import{a as oe}from"./chunk-WO3CKQXO.js";import{a as me}from"./chunk-M76MZDDL.js";import{a as pe,b as ue,c as fe,d as he,e as ge,f as be}from"./chunk-FYJFD3NO.js";import{a as ye,b as ve}from"./chunk-CWD6T6DC.js";import{f as ce,g as de,h as se,i as le}from"./chunk-TH4ES2HL.js";import{Ba as B,Ca as O,E as te,Ea as L,Fa as xe,J as ae,K as ie,da as re,ia as I,ka as C,ma as P,na as E,pa as b,qa as F,ra as ne,sa as T,ta as k,ua as N,wa as V,ya as z}from"./chunk-RSKG7BCR.js";import{o as ee}from"./chunk-M5DCLWJD.js";import"./chunk-AESYL7IM.js";import{Ab as J,Bb as K,Cb as r,Db as n,Eb as f,Fa as X,Ib as j,Kc as Z,Lb as g,Nb as v,Ob as $,Pb as A,Xb as c,Yb as Y,Za as d,Zb as H,_a as m,ac as u,f as W,fa as R,ha as U,oa as p,pa as q,qa as w,rb as _,tb as l,vb as Q,wa as D,xa as M,yb as S}from"./chunk-FYJXFM5Q.js";var Ee=["*"];var Fe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Te=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],ke=new U("MAT_CARD_CONFIG"),Ce=(()=>{let e=class e{constructor(i){this.appearance=i?.appearance||"raised"}};e.\u0275fac=function(t){return new(t||e)(m(ke,8))},e.\u0275cmp=p({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,o){t&2&&Q("mat-mdc-card-outlined",o.appearance==="outlined")("mdc-card--outlined",o.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[u],ngContentSelectors:Ee,decls:1,vars:0,template:function(t,o){t&1&&($(),A(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let a=e;return a})(),_e=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=w({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0});let a=e;return a})();var Se=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=w({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let a=e;return a})(),we=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=w({type:e,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"],standalone:!0});let a=e;return a})(),De=(()=>{let e=class e{constructor(){this.align="start"}};e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=w({type:e,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(t,o){t&2&&Q("mat-mdc-card-actions-align-end",o.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0});let a=e;return a})(),Me=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[u],ngContentSelectors:Te,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(t,o){t&1&&($(Fe),A(0),r(1,"div",0),A(2,1),n(),A(3,2))},encapsulation:2,changeDetection:0});let a=e;return a})();var ze=(a,e)=>e.id;function Be(a,e){if(a&1&&(r(0,"mat-list-option",5),c(1),n()),a&2){let s=e.$implicit;l("value",s),d(),Y(s.name)}}function Oe(a,e){if(a&1&&(r(0,"mat-selection-list",3),J(1,Be,2,2,"mat-list-option",5,ze),n()),a&2){let s=v(2);l("multiple",!1),d(),K(s.analysisGroupQuery.results)}}function Le(a,e){if(a&1){let s=j();_(0,Oe,3,1,"mat-selection-list",3),r(1,"mat-paginator",4),g("page",function(t){D(s);let o=v();return M(o.handlePageEvent(t))}),n()}if(a&2){let s=v();S(s.analysisGroupQuery.results.length>0?0:-1),d(),l("pageSize",s.analysisGroupPageSize)("length",s.analysisGroupQuery.count)("pageIndex",s.analysisGroupPageIndex)}}var je=(()=>{let e=class e{constructor(i,t){this.fb=i,this.web=t,this.formAnalysisGroupSearch=this.fb.group({searchTerm:new b("",C.required),selectedAnalysisGroups:new b([])}),this.analysisGroupPageSize=5,this.analysisGroupPageIndex=0,this.analysisGroupQuery=void 0,this.selectedAnalysisGroups=new X,this.formAnalysisGroupSearch.controls.searchTerm.valueChanges.subscribe(o=>{o&&this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0,o).subscribe(h=>{this.analysisGroupQuery=h})}),this.formAnalysisGroupSearch.controls.selectedAnalysisGroups.valueChanges.subscribe(o=>{o&&this.selectedAnalysisGroups.emit(o)}),this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0).subscribe(o=>{this.analysisGroupQuery=o})}handlePageEvent(i){let t=i.pageIndex*i.pageSize;this.analysisGroupPageIndex=i.pageIndex,this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,t,this.formAnalysisGroupSearch.value.searchTerm).subscribe(o=>{this.analysisGroupQuery=o})}};e.\u0275fac=function(t){return new(t||e)(m(N),m(L))},e.\u0275cmp=p({type:e,selectors:[["app-analysis-search"]],outputs:{selectedAnalysisGroups:"selectedAnalysisGroups"},standalone:!0,features:[u],decls:6,vars:2,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Analysis Group Name","type","search"],[3,"pageSize","length","pageIndex"],["formControlName","selectedAnalysisGroups",3,"multiple"],[3,"page","pageSize","length","pageIndex"],[3,"value"]],template:function(t,o){t&1&&(r(0,"form",0)(1,"mat-form-field"),f(2,"input",1),r(3,"mat-label"),c(4,"Search For Specific Analysis Groups"),n()(),_(5,Le,2,4,"mat-paginator",2),n()),t&2&&(l("formGroup",o.formAnalysisGroupSearch),d(5),S(o.analysisGroupQuery?5:-1))},dependencies:[V,F,I,P,E,T,k,de,ce,le,z,B,O]});let a=e;return a})();function Re(a,e){if(a&1){let s=j();r(0,"mat-card-actions")(1,"button",17),g("click",function(){D(s);let t=v();return M(t.openProjectCreateDialog())}),c(2,"Create Project"),n()()}}function qe(a,e){if(a&1){let s=j();r(0,"mat-card-actions")(1,"button",17),g("click",function(){D(s);let t=v();return M(t.openAnalysisGroupCreateDialog())}),c(2,"Create Analysis Group"),n()()}}var Ae=(()=>{let e=class e{constructor(i,t,o,h,y,Pe){this.accounts=i,this.web=t,this.dialog=o,this.fb=h,this.sb=y,this.ws=Pe,this.projectCount=0,this.analysisGroupCount=0,this.form=this.fb.group({search:new b("",C.required),searchMode:new b("full",C.required),foldChange:new b(.6,C.required),pValue:new b(1.31,C.required),projects:new b([])}),this.web.getProjectCount().subscribe(x=>{this.projectCount=x.count}),this.web.getAnalysisGroupCount().subscribe(x=>{this.analysisGroupCount=x.count}),this.ws.searchWSConnection?.subscribe(x=>{if(x&&x.type==="search_status")switch(x.status){case"complete":window.open(`/#/search-session/${x.id}`,"_blank");break}})}openProjectCreateDialog(){this.dialog.open(oe).afterClosed().subscribe(t=>{t&&this.web.createProject(t.name,t.description).subscribe(o=>{this.web.getProjectCount().subscribe(h=>{this.projectCount=h.count}),window.open(`/#/project/${o.id}`,"_blank")})})}openAnalysisGroupCreateDialog(){let i=this.dialog.open(me);i.componentInstance.enableProjectSelection=!0,i.afterClosed().subscribe(t=>{t&&(this.web.getAnalysisGroupCount().subscribe(o=>{this.analysisGroupCount=o.count}),window.open(`/#/analysis-group/${t.id}`,"_blank"))})}handleProjectSelection(i){i.length!==0&&window.open(`/#/project/${i[0].id}`,"_blank")}handleMultipleProjectSelection(i){this.form.controls.projects.setValue(i)}searchDatabase(){return W(this,null,function*(){if(this.form.invalid)return;let i=[];if(this.form.value.projects){let t=yield this.web.getAnalysisGroupsFromProjects(this.form.value.projects).toPromise();if(t)for(let o of t)i.push(o.id)}this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(i,this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode).subscribe(t=>{this.sb.open("Search queued","Dismiss",{duration:2e3})})})}handleAGSelection(i){i.length>0&&window.open(`/#/analysis-group/${i[0].id}`,"_blank")}};e.\u0275fac=function(t){return new(t||e)(m(xe),m(L),m(re),m(N),m(ye),m(ve))},e.\u0275cmp=p({type:e,selectors:[["app-banner"]],standalone:!0,features:[u],decls:92,vars:11,consts:[[2,"display","flex","flex-direction","row","justify-content","center","gap","20px","padding","20px","flex-wrap","wrap"],[2,"display","flex","flex-direction","column","gap","20px"],["appearance","outlined",2,"width","350px"],[2,"color","#ba0000"],["href","/#/project"],[3,"selectedProjects","multipleSelection"],["href","/#/analysis-group"],[3,"selectedAnalysisGroups"],[2,"display","flex","flex-direction","row","justify-content","center"],["appearance","outlined",2,"min-width","350px","width","100%"],["href","/#/search-session"],[2,"display","flex","flex-direction","column","gap","5px",3,"formGroup"],["matInput","","formControlName","search","placeholder","Search","type","search"],["formControlName","searchMode"],[3,"value"],["matInput","","formControlName","foldChange","type","number","placeholder","Log2 Fold Change"],["matInput","","formControlName","pValue","type","number","placeholder","P-Value"],["mat-button","","type","button",3,"click"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title")(5,"span",3)(6,"mat-icon"),c(7,"lock"),n()(),r(8,"a",4)(9,"span",3),c(10,"Project"),n()()(),r(11,"mat-card-subtitle"),c(12," Cinder Project Data "),n()(),r(13,"mat-card-content")(14,"p"),c(15),n(),r(16,"app-project-search",5),g("selectedProjects",function(y){return o.handleProjectSelection(y)}),n()(),_(17,Re,3,0,"mat-card-actions"),n(),r(18,"mat-card",2)(19,"mat-card-header")(20,"mat-card-title")(21,"span",3)(22,"mat-icon"),c(23,"lock"),n()(),r(24,"a",6)(25,"span",3),c(26,"Analysis Groups"),n()()(),r(27,"mat-card-subtitle"),c(28," Project Assigned Analysis Groups "),n()(),r(29,"mat-card-content")(30,"p"),c(31),n(),r(32,"app-analysis-search",7),g("selectedAnalysisGroups",function(y){return o.handleAGSelection(y)}),n()(),_(33,qe,3,0,"mat-card-actions"),n()(),r(34,"div",8)(35,"div")(36,"mat-card",9)(37,"mat-card-header")(38,"mat-card-title")(39,"span",3)(40,"mat-icon"),c(41,"lock_open"),n()(),r(42,"a",10)(43,"span",3),c(44,"Search"),n()()(),r(45,"mat-card-subtitle"),c(46," Search through the Cinder Database "),n()(),r(47,"mat-card-content")(48,"form",11)(49,"mat-form-field"),f(50,"input",12),r(51,"mat-label"),c(52,"Database Search Term"),n()(),r(53,"p")(54,"b"),c(55,"Search Multiple Terms"),n(),f(56,"br"),c(57," In order to search with multiple terms, enclose each term in single quotes and separate them with "),r(58,"b"),c(59,"OR"),n(),c(60,". "),n(),r(61,"mat-form-field")(62,"mat-select",13)(63,"mat-option",14),c(64," Full Text "),n(),r(65,"mat-option",14),c(66," UniProt Accession ID "),n(),r(67,"mat-option",14),c(68," Gene Names "),n(),r(69,"mat-option",14),c(70," Primary IDs "),n()(),r(71,"mat-label"),c(72,"Search Mode"),n()(),r(73,"mat-form-field"),f(74,"input",15),r(75,"mat-label"),c(76,"Log2 Fold Change Cutoff"),n()(),r(77,"mat-form-field"),f(78,"input",16),r(79,"mat-label"),c(80,"-Log10(P-Value) Cutoff"),n()()(),r(81,"mat-accordion")(82,"mat-expansion-panel")(83,"mat-expansion-panel-header")(84,"mat-panel-title"),c(85," Filter by Project "),n(),r(86,"mat-panel-description"),c(87," Optional "),n()(),r(88,"app-project-search",5),g("selectedProjects",function(y){return o.handleMultipleProjectSelection(y)}),n()()()(),r(89,"mat-card-actions")(90,"button",17),g("click",function(){return o.searchDatabase()}),c(91,"Search"),n()()()()()()),t&2&&(d(15),H(" # of Projects: ",o.projectCount," "),d(),l("multipleSelection",!1),d(),S(o.accounts.loggedIn?17:-1),d(14),H(" # of Analysis Groups: ",o.analysisGroupCount," "),d(2),S(o.accounts.loggedIn?33:-1),d(15),l("formGroup",o.form),d(15),l("value","full"),d(2),l("value","uniprot"),d(2),l("value","gene"),d(2),l("value","pi"),d(19),l("multipleSelection",!0))},dependencies:[Ce,we,_e,Me,Se,ae,De,ie,pe,V,F,I,ne,P,E,T,k,B,O,se,z,te,be,ue,ge,he,fe,je],styles:[".banner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:wrap;gap:20px;padding:20px}"]});let a=e;return a})();var Ge=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-footer"]],standalone:!0,features:[u],decls:4,vars:0,consts:[[1,"footer",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","20px"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"p",2),c(3," MRC-PPU, University of Dundee. ASAP. "),n()()())}});let a=e;return a})();var Ie=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-home"]],standalone:!0,features:[u],decls:9,vars:0,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),c(3,"C|nder"),n(),f(4,"br"),r(5,"div",2),c(6,"Proteomics Data Indexer"),n()()(),f(7,"app-banner")(8,"app-footer"))},dependencies:[Ae,Ge],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]});let a=e;return a})();var Qe=[{path:"",component:Ie}],kt=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=q({type:e}),e.\u0275inj=R({imports:[Z,ee.forChild(Qe)]});let a=e;return a})();export{kt as HomeModule};
