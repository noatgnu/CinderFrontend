import{a as X}from"./chunk-3Q34LHWH.js";import{b as B,d as O,e as W,f as H,h as J}from"./chunk-Q3CP4PFK.js";import{a as T,d as A,e as M,f as w}from"./chunk-4IGE2ET3.js";import{Ba as V,Ca as k,Da as Q,Fa as R,Ha as q,Ma as $,Na as z,Oa as K,Q as G,Qa as U,Sa as Y,W as I,pa as E,ra as u,ta as N,ua as L,wa as m,ya as F}from"./chunk-CVWGLCQJ.js";import{Db as c,Jb as h,Lb as x,Mb as S,Nb as i,Ob as o,Pb as C,Tb as D,Wb as j,Yb as p,eb as l,jc as s,kb as f,lc as y,qa as v,ra as b,rb as P,wb as _}from"./chunk-2DK2OQN6.js";var ee=(t,a)=>a.value,te=(t,a)=>a.id;function ie(t,a){if(t&1&&(i(0,"mat-list-option",6),s(1),o()),t&2){let e=a.$implicit;c("value",e),l(),y(" ",e.name," ")}}function oe(t,a){if(t&1){let e=D();i(0,"mat-selection-list",10),x(1,ie,2,2,"mat-list-option",6,te),o(),i(3,"mat-paginator",11),j("page",function(r){v(e);let d=p(3);return b(d.handlePageEvent(r))}),o()}if(t&2){let e=p(3);c("multiple",!1),l(),S(e.projectQuery.results),l(2),c("pageSize",e.projectPageLimit)("length",e.projectQuery.count)("pageIndex",e.projectPageIndex)}}function re(t,a){if(t&1&&_(0,oe,4,4),t&2){let e=p(2);h(e.projectQuery.results.length>0?0:-1)}}function ae(t,a){if(t&1&&(i(0,"form",1)(1,"mat-form-field",8),C(2,"input",9),i(3,"mat-label"),s(4,"Project Search Term"),o()(),_(5,re,1,1),o()),t&2){let e=p();c("formGroup",e.formProjectSearch),l(5),h(e.projectQuery?5:-1)}}function ne(t,a){if(t&1&&(i(0,"mat-list")(1,"mat-list-item")(2,"span",12)(3,"b"),s(4),o()()()()),t&2){let e=p();l(4),y("Selected project: ",e.project.name,"")}}function le(t,a){if(t&1&&(i(0,"mat-option",6),s(1),o()),t&2){let e=a.$implicit;c("value",e.value),l(),y(" ",e.label," ")}}var xe=(()=>{class t{set project(e){this._project=e,this.form.controls.project_id.setValue(e.id),this.form.controls.project_name.setValue(e.name)}get project(){return this._project}constructor(e,n,r,d){this.dataService=e,this.web=n,this.fb=r,this.matDialogRef=d,this.enableProjectSelection=!1,this.form=this.fb.group({name:new m("",u.required),description:new m("",u.required),project_name:new m("",u.required),project_id:new m(0,u.required),analysis_group_type:new m("proteomics",u.required)}),this.formProjectSearch=this.fb.group({searchTerm:new m(""),selectedProject:new m(void 0)}),this.projectPageLimit=5,this.projectPageIndex=0,this.projectQuery=void 0,this.analysisGroupTypeChoices=[""],this.formProjectSearch.controls.selectedProject.valueChanges.subscribe(g=>{g&&(this.project=g[0])}),this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(g=>{this.web.getProjects(void 0,this.projectPageLimit,0,g).subscribe(Z=>{this.projectQuery=Z})})}close(){this.matDialogRef.close()}submit(){this.form.valid&&this.project&&this.form.value.name&&this.form.value.description&&this.form.value.project_id&&this.form.value.analysis_group_type&&this.web.createAnalysisGroup(this.form.value.name,this.form.value.description,this.form.value.project_id,this.form.value.analysis_group_type).subscribe(e=>{this.matDialogRef.close(e)},e=>{this.matDialogRef.close(e)})}getProjects(e,n){this.web.getProjects(void 0,n,e,this.formProjectSearch.value.searchTerm).subscribe(r=>{this.projectQuery=r})}handlePageEvent(e){this.projectPageIndex=e.pageIndex;let n=e.pageIndex*e.pageSize;this.getProjects(n,this.projectPageLimit)}static{this.\u0275fac=function(n){return new(n||t)(f(X),f(Y),f(Q),f(T))}}static{this.\u0275cmp=P({type:t,selectors:[["app-create-analysis-group-dialog"]],inputs:{enableProjectSelection:"enableProjectSelection",project:"project"},decls:25,vars:3,consts:[["mat-dialog-title",""],[3,"formGroup"],[2,"display","flex","flex-direction","column","gap","1px",3,"formGroup"],["matInput","","formControlName","name","type","text","placeholder","Analysis Group Name"],["matInput","","formControlName","description","placeholder","Analysis Group Description"],["formControlName","analysis_group_type"],[3,"value"],["mat-button","",3,"click"],[2,"width","100%"],["matInput","","formControlName","searchTerm","placeholder","Project Search","type","search"],["formControlName","selectedProject",3,"multiple"],[3,"page","pageSize","length","pageIndex"],["matListItemTitle",""]],template:function(n,r){n&1&&(i(0,"h2",0),s(1,"Create Analysis Group"),o(),i(2,"mat-dialog-content"),_(3,ae,6,2,"form",1),i(4,"form",2),_(5,ne,5,1,"mat-list"),i(6,"mat-form-field"),C(7,"input",3),i(8,"mat-label"),s(9,"Analysis Group Name"),o()(),i(10,"mat-form-field"),C(11,"textarea",4),i(12,"mat-label"),s(13,"Analysis Group Description"),o()(),i(14,"mat-form-field")(15,"mat-select",5),x(16,le,2,2,"mat-option",6,ee),o(),i(18,"mat-label"),s(19,"Analysis Group Type"),o()()()(),i(20,"mat-dialog-actions")(21,"button",7),j("click",function(){return r.submit()}),s(22,"Create"),o(),i(23,"button",7),j("click",function(){return r.close()}),s(24,"Close"),o()()),n&2&&(l(3),h(r.enableProjectSelection?3:-1),l(),c("formGroup",r.form),l(),h(r.project?5:-1),l(11),S(r.dataService.analysisGroupChoices))},dependencies:[A,M,R,F,E,N,L,V,k,$,z,w,I,J,H,O,W,q,B,K,U,G],encapsulation:2})}}return t})();export{xe as a};
