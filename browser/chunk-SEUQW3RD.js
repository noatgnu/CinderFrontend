import{a as me,b as pe}from"./chunk-54H6KG54.js";import{b as le,c as se,d as ce,h as z}from"./chunk-5YSNDHRT.js";import{$ as k,E as ee,F as te,H as G,I as ie,J as Q,_ as oe,aa as ne,ba as re,ca as ae,ea as P,fa as B,ha as S,ia as v,ka as N,la as y,na as I,oa as M,pa as D,ra as V,ta as E,wa as F,xa as T,za as A}from"./chunk-H4GRKNEN.js";import{m as Z}from"./chunk-ZOIK2NCC.js";import"./chunk-AESYL7IM.js";import{Ab as n,Bb as a,Cb as C,Da as L,Dc as Y,Gb as b,Ib as p,Jb as m,Nb as J,Tb as s,Ub as K,Va as q,Vb as X,Xa as c,Xb as w,Ya as d,da as O,ma as x,na as $,pb as g,rb as _,ua as u,va as f,wb as j,yb as W,zb as H}from"./chunk-EU3335TE.js";var fe=(()=>{let o=class o{constructor(t,e){this.fb=t,this.dialogRef=e,this.form=this.fb.group({name:[""],description:[""]})}close(){this.dialogRef.close()}submit(){this.form.valid&&this.dialogRef.close(this.form.value)}};o.\u0275fac=function(e){return new(e||o)(d(D),d(oe))},o.\u0275cmp=x({type:o,selectors:[["app-create-project-dialog"]],standalone:!0,features:[w],decls:17,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","name","placeholder","Project Name"],["matInput","","formControlName","description","placeholder","Project Description"],["mat-button","",3,"click"]],template:function(e,l){e&1&&(n(0,"h2",0),s(1,"Create Project"),a(),n(2,"div",1)(3,"form",2)(4,"mat-form-field"),C(5,"input",3),n(6,"mat-label"),s(7,"Project Name"),a()(),n(8,"mat-form-field"),C(9,"textarea",4),n(10,"mat-label"),s(11,"Project Description"),a()()()(),n(12,"mat-dialog-actions")(13,"button",5),p("click",function(){return l.close()}),s(14,"Close"),a(),n(15,"button",5),p("click",function(){return l.submit()}),s(16,"Create"),a()()),e&2&&(c(3),_("formGroup",l.form))},dependencies:[ne,re,V,y,P,S,v,I,M,F,T,E,ae,G]});let i=o;return i})();var je=(i,o)=>o.id;function Ce(i,o){if(i&1&&(n(0,"mat-list-item")(1,"a",12),s(2),a(),C(3,"hr"),a()),i&2){let r=o.$implicit;c(),J("href","/#/analysis-group/",r.id,"",q),c(),K(r.name)}}function xe(i,o){if(i&1&&(n(0,"mat-list"),W(1,Ce,4,3,"mat-list-item",null,je),a()),i&2){let r=m(3);c(),H(r.analysisGroupQuery.results)}}function be(i,o){i&1&&(n(0,"p"),s(1,"No analysis groups found."),a())}function we(i,o){if(i&1){let r=b();n(0,"div",10)(1,"b"),s(2,"Associated Analysis Group"),a(),g(3,xe,3,0,"mat-list")(4,be,2,0,"p"),n(5,"mat-paginator",11,0),p("page",function(e){u(r);let l=m(2);return f(l.handlePageChange(e))}),a()()}if(i&2){let r=m(2);c(3),j(r.analysisGroupQuery.results.length>0?3:4),c(2),_("length",r.analysisGroupQuery.count)("pageSize",r.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",r.currentPage)}}function Pe(i,o){if(i&1){let r=b();n(0,"form",3),p("ngSubmit",function(){u(r);let e=m();return f(e.updateProject())}),n(1,"mat-form-field",2),C(2,"input",4),n(3,"mat-label"),s(4,"Project Name"),a()(),n(5,"mat-form-field",2),C(6,"textarea",5),n(7,"mat-label"),s(8,"Project Description"),a()(),n(9,"div",6)(10,"button",7),s(11,"Update"),a(),n(12,"button",8),p("click",function(){u(r);let e=m();return f(e.openAnalysisGroupCreateModal())}),n(13,"mat-icon"),s(14,"add"),a(),s(15," Analysis Group"),a(),n(16,"button",9),p("click",function(){u(r);let e=m();return f(e.deleteProject())}),s(17,"Delete"),a()()(),g(18,we,7,6,"div",10)}if(i&2){let r=m();_("formGroup",r.form),c(18),j(r.analysisGroupQuery?18:-1)}}var _e=(()=>{let o=class o{set project(t){this._project=t,t&&(this.form.controls.name.setValue(t.name),this.form.controls.description.setValue(t.description),this.web.getAnalysisGroups(void 0,this.pageSize,0,void 0,t.id).subscribe(e=>{this.analysisGroupQuery=e}))}get project(){return this._project}constructor(t,e,l){this.fb=t,this.web=e,this.dialog=l,this.form=this.fb.group({name:new N("",B.required),description:new N("",B.required)}),this.deleted=new L,this.updated=new L,this.pageSize=10,this.currentPage=0}updateProject(){this.form.invalid||this.web.updateProject(this.project.id,this.form.value.name,this.form.value.description).subscribe(t=>{this.project=t,this.updated.emit(t)})}deleteProject(){this.web.deleteProject(this.project.id).subscribe(()=>{this.project=void 0,this.deleted.emit(!0)})}openAnalysisGroupCreateModal(){let t=this.dialog.open(pe);t.componentInstance.project=this.project,t.afterClosed().subscribe(e=>{e&&window.open(`/#/analysis-group/${e.id}`,"_blank")})}handlePageChange(t){let e=t.pageIndex*t.pageSize;this.currentPage=t.pageIndex,this.web.getAnalysisGroups(void 0,t.pageSize,e,void 0,this.project.id).subscribe(l=>{this.analysisGroupQuery=l})}};o.\u0275fac=function(e){return new(e||o)(d(D),d(A),d(k))},o.\u0275cmp=x({type:o,selectors:[["app-project-view"]],inputs:{project:"project"},outputs:{deleted:"deleted",updated:"updated"},standalone:!0,features:[w],decls:3,vars:1,consts:[["paginator",""],[2,"display","flex","flex-direction","row","justify-content","center","padding","50px"],[2,"width","100%"],[2,"display","flex","flex-direction","column","gap","20px",3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text","placeholder","Project Name"],["matInput","","formControlName","description","placeholder","Project Description"],[2,"display","flex","flex-direction","row","gap","20px"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"],[2,"padding","20px"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],["matListItemTitle","","target","_blank",3,"href"]],template:function(e,l){e&1&&(n(0,"div",1)(1,"div",2),g(2,Pe,19,2),a()()),e&2&&(c(2),j(l.project?2:-1))},dependencies:[V,y,P,S,v,I,M,F,T,E,G,Q,se,ce,z,le]});let i=o;return i})();function Se(i,o){if(i&1){let r=b();n(0,"div",11)(1,"app-project-list",12),p("projectSelected",function(e){u(r);let l=m(2);return f(l.handleProjectSelect(e))}),a()(),n(2,"mat-paginator",13,0),p("page",function(e){u(r);let l=m(2);return f(l.handlePageEvent(e))}),a()}if(i&2){let r=m(2);c(),_("projectQuery",r.projectQuery),c(),_("length",r.projectQuery.count)("pageSize",r.limit)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",r.pageIndex)}}function ve(i,o){i&1&&(n(0,"p"),s(1,"No projects found."),a())}function ye(i,o){if(i&1&&g(0,Se,4,6)(1,ve,2,0,"p"),i&2){let r=m();j(r.projectQuery.count>0?0:1)}}function Ie(i,o){if(i&1&&s(0),i&2){let r=m();X(" ",r.selectedProject.name," ")}}function Me(i,o){i&1&&s(0," Select Project ")}function De(i,o){if(i&1){let r=b();n(0,"app-project-view",14),p("deleted",function(){u(r);let e=m();return f(e.refreshData())})("updated",function(e){u(r);let l=m();return f(l.handleUpdateData(e))}),a()}if(i&2){let r=m();_("project",r.selectedProject)}}var U=(()=>{let o=class o{set projectID(t){this._projectID=t,t&&this.web.getProject(t).subscribe(e=>{this.selectedProject=e})}get projectID(){return this._projectID}constructor(t,e,l){this.web=t,this.dialog=e,this.fb=l,this.pageIndex=0,this.limit=15,this.offset=0,this.form=this.fb.group({name:new N}),this.web.getProjects(void 0,this.limit,this.offset).subscribe(h=>{this.projectQuery=h}),this.form.controls.name.valueChanges.subscribe(h=>{h&&this.web.getProjects(void 0,this.limit,this.offset,h).subscribe(he=>{this.projectQuery=he})})}openCreateProjectDialog(){this.dialog.open(fe).afterClosed().subscribe(e=>{e&&this.web.createProject(e.name,e.description).subscribe(l=>{this.selectedProject=l,this.web.getProjects(void 0,this.limit,this.offset).subscribe(h=>{this.projectQuery=h})})})}handlePageEvent(t){this.offset=t.pageIndex*t.pageSize,this.limit=t.pageSize,this.form.controls.name.value?this.web.getProjects(void 0,this.limit,this.offset,this.form.controls.name.value).subscribe(e=>{this.projectQuery=e}):this.web.getProjects(void 0,this.limit,this.offset).subscribe(e=>{this.projectQuery=e})}handleProjectSelect(t){this.selectedProject=t}refreshData(){if(this.form.controls.name.value){this.web.getProjects(void 0,this.limit,this.offset,this.form.controls.name.value).subscribe(t=>{this.projectQuery=t});return}this.web.getProjects(void 0,this.limit,this.offset).subscribe(t=>{this.projectQuery=t})}handleUpdateData(t){this.projectQuery.results=this.projectQuery.results.map(e=>e.id===t.id?t:e)}};o.\u0275fac=function(e){return new(e||o)(d(A),d(k),d(D))},o.\u0275cmp=x({type:o,selectors:[["app-project"]],inputs:{projectID:"projectID"},standalone:!0,features:[w],decls:24,vars:4,consts:[["paginator",""],[2,"display","flex","flex-direction","row"],[1,"project-side-nav"],["mat-icon-button","",3,"click"],[2,"display","flex","flex-direction","column","padding","5px"],[3,"formGroup"],[2,"width","100%"],["matInput","","formControlName","name","type","search","placeholder","Search Project"],[1,"project-main-content"],[2,"height","calc(100vh - 64px*2 - 20px)","overflow","auto"],[3,"project"],[2,"height","calc(100vh - 64px*4 - 20px)","overflow","auto"],[3,"projectSelected","projectQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],[3,"deleted","updated","project"]],template:function(e,l){e&1&&(n(0,"div",1)(1,"div",2)(2,"mat-toolbar")(3,"mat-toolbar-row")(4,"span"),s(5,"Project"),a(),n(6,"button",3),p("click",function(){return l.openCreateProjectDialog()}),n(7,"mat-icon"),s(8,"create_new_folder"),a()()()(),n(9,"div",4)(10,"form",5)(11,"mat-form-field",6),C(12,"input",7),n(13,"mat-label"),s(14,"Search Project"),a()()(),g(15,ye,2,1),a()(),n(16,"div",8)(17,"mat-toolbar")(18,"mat-toolbar-row")(19,"span"),g(20,Ie,1,1)(21,Me,1,0),a()()(),n(22,"div",9),g(23,De,1,1,"app-project-view",10),a()()()),e&2&&(c(10),_("formGroup",l.form),c(5),j(l.projectQuery?15:-1),c(5),j(l.selectedProject?20:21),c(3),j(l.selectedProject?23:-1))},dependencies:[te,ee,ie,Q,me,V,y,P,S,v,I,M,F,T,E,z,_e],styles:[".project-side-nav[_ngcontent-%COMP%]{width:300px;border-right:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 64px)}.project-main-content[_ngcontent-%COMP%]{flex:1}"]});let i=o;return i})();var Ve=[{path:"",component:U},{path:":projectID",component:U}],mt=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=$({type:o}),o.\u0275inj=O({imports:[Y,Z.forChild(Ve)]});let i=o;return i})();export{mt as ProjectModule};
