import{a as Tn}from"./chunk-FGJXDNVU.js";import{a as wn}from"./chunk-Z5WHE6JY.js";import{a as Sn,b as sr,c as jn,d as yo,e as Ht,f as Ji,g as Et,h as Dt}from"./chunk-ULDJCDVS.js";import{a as Xi,b as Ui,c as Yi,d as Ki}from"./chunk-4RMQVNY3.js";import{a as Oi}from"./chunk-ZOSGX7BB.js";import{a as Ii,b as Fi}from"./chunk-NUBOSCJZ.js";import{a as Tt}from"./chunk-TLPY36UM.js";import{a as Mn,b as $i,c as Wi}from"./chunk-5NOQ2VUG.js";import{a as Vi,b as Ri,c as Bi,d as Li,e as Gi,f as zi,g as Ni,h as qi,i as Hi,j as Qi}from"./chunk-O6GWFT6L.js";import{a as Kt,b as sn,c as Jt,d as cn,e as ln,f as dn,g as Ai,h as Pi}from"./chunk-QJRU7V3X.js";import{a as Ti,b as Ei,c as xn,d as Di,e as yn,f as kn}from"./chunk-4FN7HG47.js";import{a as rt}from"./chunk-D2LSGOGF.js";import{a as fn,c as gn,d as _n,e as Cn,f as wi,g as vn,h as Si}from"./chunk-O3W74R33.js";import{a as He,c as Zt,d as Qe,e as $e,f as We,g as pt}from"./chunk-XX32RFT6.js";import{Aa as dt,Ca as jt,H as _o,Ha as et,Ia as tt,Ja as bn,Ka as Mi,L as Yt,La as ji,Na as Xe,P as an,Q as qe,R as Oe,S as yt,ja as ki,ka as Je,la as hn,ma as ot,oa as Ve,pa as ct,qa as mn,ra as nt,sa as kt,ta as lt,va as un,wa as wt,xa as St,ya as Ze,za as Mt}from"./chunk-IEHRCBVQ.js";import{c as pn,d as Co,g as gt,i as vo,j as bo,l as oi,m as xo}from"./chunk-HX3ESI56.js";import{h as nn,l as Ut,p as rn}from"./chunk-QJ2HU2ZW.js";import{$c as go,A as ai,Aa as F,Ab as ii,Ac as Zo,Ba as V,Bb as I,Ca as Wt,Cb as Ct,Da as mi,Db as Nt,Dc as Xt,Eb as Xo,Fa as Go,Fb as Uo,G as Ro,Ga as zo,Hb as J,Ia as xe,Ib as ft,Ic as qt,Ja as No,Jb as fe,Jc as en,Kb as ge,L as Bo,La as zt,Lb as p,Mb as f,Nb as W,Ob as Ae,Pb as Pe,Ra as qo,Rb as Y,Sb as Yo,Ub as O,Wb as b,Xb as ui,Yb as fi,Zb as Ko,_b as uo,_c as tn,a as be,ac as vt,ad as bi,b as Me,ba as si,bb as Ho,bc as bt,ca as ci,cb as Qo,cc as xt,cd as xi,d as ar,db as mo,e as Fo,ed as yi,f as Ke,fb as v,fc as Ye,g as Vo,gb as L,gc as w,ha as li,hc as ye,ia as ti,ic as me,ja as Lt,jc as Jo,kb as $o,kc as Ge,kd as on,la as Lo,lc as ze,mc as Ne,na as di,nc as gi,oc as pe,pc as _i,qc as fo,r as ri,sa as ae,sc as Ci,ta as Gt,tc as vi,ua as pi,ub as Wo,xb as q,za as hi}from"./chunk-TUTLJQZA.js";var Fn=ar((no,So)=>{"use strict";(function(o,a){typeof no=="object"&&typeof So=="object"?So.exports=a():typeof define=="function"&&define.amd?define([],a):typeof no=="object"?no.QRCodeStyling=a():o.QRCodeStyling=a()})(self,function(){return(()=>{var o={192:(t,i)=>{var n,u,j=function(){var R=function(P,A){var E=P,k=he[A],x=null,T=0,H=null,G=[],Q={},Te=function(d,m){x=function(l){for(var C=new Array(l),y=0;y<l;y+=1){C[y]=new Array(l);for(var B=0;B<l;B+=1)C[y][B]=null}return C}(T=4*E+17),S(0,0),S(T-7,0),S(0,T-7),c(),r(),h(d,m),E>=7&&s(d),H==null&&(H=g(E,k,G)),_(H,m)},S=function(d,m){for(var l=-1;l<=7;l+=1)if(!(d+l<=-1||T<=d+l))for(var C=-1;C<=7;C+=1)m+C<=-1||T<=m+C||(x[d+l][m+C]=0<=l&&l<=6&&(C==0||C==6)||0<=C&&C<=6&&(l==0||l==6)||2<=l&&l<=4&&2<=C&&C<=4)},r=function(){for(var d=8;d<T-8;d+=1)x[d][6]==null&&(x[d][6]=d%2==0);for(var m=8;m<T-8;m+=1)x[6][m]==null&&(x[6][m]=m%2==0)},c=function(){for(var d=le.getPatternPosition(E),m=0;m<d.length;m+=1)for(var l=0;l<d.length;l+=1){var C=d[m],y=d[l];if(x[C][y]==null)for(var B=-2;B<=2;B+=1)for(var z=-2;z<=2;z+=1)x[C+B][y+z]=B==-2||B==2||z==-2||z==2||B==0&&z==0}},s=function(d){for(var m=le.getBCHTypeNumber(E),l=0;l<18;l+=1){var C=!d&&(m>>l&1)==1;x[Math.floor(l/3)][l%3+T-8-3]=C}for(l=0;l<18;l+=1)C=!d&&(m>>l&1)==1,x[l%3+T-8-3][Math.floor(l/3)]=C},h=function(d,m){for(var l=k<<3|m,C=le.getBCHTypeInfo(l),y=0;y<15;y+=1){var B=!d&&(C>>y&1)==1;y<6?x[y][8]=B:y<8?x[y+1][8]=B:x[T-15+y][8]=B}for(y=0;y<15;y+=1)B=!d&&(C>>y&1)==1,y<8?x[8][T-y-1]=B:y<9?x[8][15-y-1+1]=B:x[8][15-y-1]=B;x[T-8][8]=!d},_=function(d,m){for(var l=-1,C=T-1,y=7,B=0,z=le.getMaskFunction(m),D=T-1;D>0;D-=2)for(D==6&&(D-=1);;){for(var $=0;$<2;$+=1)if(x[C][D-$]==null){var K=!1;B<d.length&&(K=(d[B]>>>y&1)==1),z(C,D-$)&&(K=!K),x[C][D-$]=K,(y-=1)==-1&&(B+=1,y=7)}if((C+=l)<0||T<=C){C-=l,l=-l;break}}},g=function(d,m,l){for(var C=Ot.getRSBlocks(d,m),y=mt(),B=0;B<l.length;B+=1){var z=l[B];y.put(z.getMode(),4),y.put(z.getLength(),le.getLengthInBits(z.getMode(),d)),z.write(y)}var D=0;for(B=0;B<C.length;B+=1)D+=C[B].dataCount;if(y.getLengthInBits()>8*D)throw"code length overflow. ("+y.getLengthInBits()+">"+8*D+")";for(y.getLengthInBits()+4<=8*D&&y.put(0,4);y.getLengthInBits()%8!=0;)y.putBit(!1);for(;!(y.getLengthInBits()>=8*D||(y.put(236,8),y.getLengthInBits()>=8*D));)y.put(17,8);return function($,K){for(var ie=0,_e=0,U=0,oe=new Array(K.length),te=new Array(K.length),re=0;re<K.length;re+=1){var Le=K[re].dataCount,ke=K[re].totalCount-Le;_e=Math.max(_e,Le),U=Math.max(U,ke),oe[re]=new Array(Le);for(var se=0;se<oe[re].length;se+=1)oe[re][se]=255&$.getBuffer()[se+ie];ie+=Le;var we=le.getErrorCorrectPolynomial(ke),Ce=Ie(oe[re],we.getLength()-1).mod(we);for(te[re]=new Array(we.getLength()-1),se=0;se<te[re].length;se+=1){var Se=se+Ce.getLength()-te[re].length;te[re][se]=Se>=0?Ce.getAt(Se):0}}var Ee=0;for(se=0;se<K.length;se+=1)Ee+=K[se].totalCount;var De=new Array(Ee),Be=0;for(se=0;se<_e;se+=1)for(re=0;re<K.length;re+=1)se<oe[re].length&&(De[Be]=oe[re][se],Be+=1);for(se=0;se<U;se+=1)for(re=0;re<K.length;re+=1)se<te[re].length&&(De[Be]=te[re][se],Be+=1);return De}(y,C)};Q.addData=function(d,m){var l=null;switch(m=m||"Byte"){case"Numeric":l=$t(d);break;case"Alphanumeric":l=ne(d);break;case"Byte":l=ue(d);break;case"Kanji":l=ve(d);break;default:throw"mode:"+m}G.push(l),H=null},Q.isDark=function(d,m){if(d<0||T<=d||m<0||T<=m)throw d+","+m;return x[d][m]},Q.getModuleCount=function(){return T},Q.make=function(){if(E<1){for(var d=1;d<40;d++){for(var m=Ot.getRSBlocks(d,k),l=mt(),C=0;C<G.length;C++){var y=G[C];l.put(y.getMode(),4),l.put(y.getLength(),le.getLengthInBits(y.getMode(),d)),y.write(l)}var B=0;for(C=0;C<m.length;C++)B+=m[C].dataCount;if(l.getLengthInBits()<=8*B)break}E=d}Te(!1,function(){for(var z=0,D=0,$=0;$<8;$+=1){Te(!0,$);var K=le.getLostPoint(Q);($==0||z>K)&&(z=K,D=$)}return D}())},Q.createTableTag=function(d,m){d=d||2;var l="";l+='<table style="',l+=" border-width: 0px; border-style: none;",l+=" border-collapse: collapse;",l+=" padding: 0px; margin: "+(m=m===void 0?4*d:m)+"px;",l+='">',l+="<tbody>";for(var C=0;C<Q.getModuleCount();C+=1){l+="<tr>";for(var y=0;y<Q.getModuleCount();y+=1)l+='<td style="',l+=" border-width: 0px; border-style: none;",l+=" border-collapse: collapse;",l+=" padding: 0px; margin: 0px;",l+=" width: "+d+"px;",l+=" height: "+d+"px;",l+=" background-color: ",l+=Q.isDark(C,y)?"#000000":"#ffffff",l+=";",l+='"/>';l+="</tr>"}return(l+="</tbody>")+"</table>"},Q.createSvgTag=function(d,m,l,C){var y={};typeof arguments[0]=="object"&&(d=(y=arguments[0]).cellSize,m=y.margin,l=y.alt,C=y.title),d=d||2,m=m===void 0?4*d:m,(l=typeof l=="string"?{text:l}:l||{}).text=l.text||null,l.id=l.text?l.id||"qrcode-description":null,(C=typeof C=="string"?{text:C}:C||{}).text=C.text||null,C.id=C.text?C.id||"qrcode-title":null;var B,z,D,$,K=Q.getModuleCount()*d+2*m,ie="";for($="l"+d+",0 0,"+d+" -"+d+",0 0,-"+d+"z ",ie+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ie+=y.scalable?"":' width="'+K+'px" height="'+K+'px"',ie+=' viewBox="0 0 '+K+" "+K+'" ',ie+=' preserveAspectRatio="xMinYMin meet"',ie+=C.text||l.text?' role="img" aria-labelledby="'+M([C.id,l.id].join(" ").trim())+'"':"",ie+=">",ie+=C.text?'<title id="'+M(C.id)+'">'+M(C.text)+"</title>":"",ie+=l.text?'<description id="'+M(l.id)+'">'+M(l.text)+"</description>":"",ie+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ie+='<path d="',z=0;z<Q.getModuleCount();z+=1)for(D=z*d+m,B=0;B<Q.getModuleCount();B+=1)Q.isDark(z,B)&&(ie+="M"+(B*d+m)+","+D+$);return(ie+='" stroke="transparent" fill="black"/>')+"</svg>"},Q.createDataURL=function(d,m){d=d||2,m=m===void 0?4*d:m;var l=Q.getModuleCount()*d+2*m,C=m,y=l-m;return it(l,l,function(B,z){if(C<=B&&B<y&&C<=z&&z<y){var D=Math.floor((B-C)/d),$=Math.floor((z-C)/d);return Q.isDark($,D)?0:1}return 1})},Q.createImgTag=function(d,m,l){d=d||2,m=m===void 0?4*d:m;var C=Q.getModuleCount()*d+2*m,y="";return y+="<img",y+=' src="',y+=Q.createDataURL(d,m),y+='"',y+=' width="',y+=C,y+='"',y+=' height="',y+=C,y+='"',l&&(y+=' alt="',y+=M(l),y+='"'),y+"/>"};var M=function(d){for(var m="",l=0;l<d.length;l+=1){var C=d.charAt(l);switch(C){case"<":m+="&lt;";break;case">":m+="&gt;";break;case"&":m+="&amp;";break;case'"':m+="&quot;";break;default:m+=C}}return m};return Q.createASCII=function(d,m){if((d=d||1)<2)return function(oe){oe=oe===void 0?2:oe;var te,re,Le,ke,se,we=1*Q.getModuleCount()+2*oe,Ce=oe,Se=we-oe,Ee={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},De={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},Be="";for(te=0;te<we;te+=2){for(Le=Math.floor((te-Ce)/1),ke=Math.floor((te+1-Ce)/1),re=0;re<we;re+=1)se="\u2588",Ce<=re&&re<Se&&Ce<=te&&te<Se&&Q.isDark(Le,Math.floor((re-Ce)/1))&&(se=" "),Ce<=re&&re<Se&&Ce<=te+1&&te+1<Se&&Q.isDark(ke,Math.floor((re-Ce)/1))?se+=" ":se+="\u2588",Be+=oe<1&&te+1>=Se?De[se]:Ee[se];Be+=`
`}return we%2&&oe>0?Be.substring(0,Be.length-we-1)+Array(we+1).join("\u2580"):Be.substring(0,Be.length-1)}(m);d-=1,m=m===void 0?2*d:m;var l,C,y,B,z=Q.getModuleCount()*d+2*m,D=m,$=z-m,K=Array(d+1).join("\u2588\u2588"),ie=Array(d+1).join("  "),_e="",U="";for(l=0;l<z;l+=1){for(y=Math.floor((l-D)/d),U="",C=0;C<z;C+=1)B=1,D<=C&&C<$&&D<=l&&l<$&&Q.isDark(y,Math.floor((C-D)/d))&&(B=0),U+=B?K:ie;for(y=0;y<d;y+=1)_e+=U+`
`}return _e.substring(0,_e.length-1)},Q.renderTo2dContext=function(d,m){m=m||2;for(var l=Q.getModuleCount(),C=0;C<l;C++)for(var y=0;y<l;y++)d.fillStyle=Q.isDark(C,y)?"black":"white",d.fillRect(C*m,y*m,m,m)},Q};R.stringToBytes=(R.stringToBytesFuncs={default:function(P){for(var A=[],E=0;E<P.length;E+=1){var k=P.charCodeAt(E);A.push(255&k)}return A}}).default,R.createStringToBytes=function(P,A){var E=function(){for(var x=st(P),T=function(){var r=x.read();if(r==-1)throw"eof";return r},H=0,G={};;){var Q=x.read();if(Q==-1)break;var Te=T(),S=T()<<8|T();G[String.fromCharCode(Q<<8|Te)]=S,H+=1}if(H!=A)throw H+" != "+A;return G}(),k=63;return function(x){for(var T=[],H=0;H<x.length;H+=1){var G=x.charCodeAt(H);if(G<128)T.push(G);else{var Q=E[x.charAt(H)];typeof Q=="number"?(255&Q)==Q?T.push(Q):(T.push(Q>>>8),T.push(255&Q)):T.push(k)}}return T}};var N,X,ce,Z,ee,he={L:1,M:0,Q:3,H:2},le=(N=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],X=1335,ce=7973,ee=function(P){for(var A=0;P!=0;)A+=1,P>>>=1;return A},(Z={}).getBCHTypeInfo=function(P){for(var A=P<<10;ee(A)-ee(X)>=0;)A^=X<<ee(A)-ee(X);return 21522^(P<<10|A)},Z.getBCHTypeNumber=function(P){for(var A=P<<12;ee(A)-ee(ce)>=0;)A^=ce<<ee(A)-ee(ce);return P<<12|A},Z.getPatternPosition=function(P){return N[P-1]},Z.getMaskFunction=function(P){switch(P){case 0:return function(A,E){return(A+E)%2==0};case 1:return function(A,E){return A%2==0};case 2:return function(A,E){return E%3==0};case 3:return function(A,E){return(A+E)%3==0};case 4:return function(A,E){return(Math.floor(A/2)+Math.floor(E/3))%2==0};case 5:return function(A,E){return A*E%2+A*E%3==0};case 6:return function(A,E){return(A*E%2+A*E%3)%2==0};case 7:return function(A,E){return(A*E%3+(A+E)%2)%2==0};default:throw"bad maskPattern:"+P}},Z.getErrorCorrectPolynomial=function(P){for(var A=Ie([1],0),E=0;E<P;E+=1)A=A.multiply(Ie([1,Fe.gexp(E)],0));return A},Z.getLengthInBits=function(P,A){if(1<=A&&A<10)switch(P){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+P}else if(A<27)switch(P){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+P}else{if(!(A<41))throw"type:"+A;switch(P){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+P}}},Z.getLostPoint=function(P){for(var A=P.getModuleCount(),E=0,k=0;k<A;k+=1)for(var x=0;x<A;x+=1){for(var T=0,H=P.isDark(k,x),G=-1;G<=1;G+=1)if(!(k+G<0||A<=k+G))for(var Q=-1;Q<=1;Q+=1)x+Q<0||A<=x+Q||G==0&&Q==0||H==P.isDark(k+G,x+Q)&&(T+=1);T>5&&(E+=3+T-5)}for(k=0;k<A-1;k+=1)for(x=0;x<A-1;x+=1){var Te=0;P.isDark(k,x)&&(Te+=1),P.isDark(k+1,x)&&(Te+=1),P.isDark(k,x+1)&&(Te+=1),P.isDark(k+1,x+1)&&(Te+=1),Te!=0&&Te!=4||(E+=3)}for(k=0;k<A;k+=1)for(x=0;x<A-6;x+=1)P.isDark(k,x)&&!P.isDark(k,x+1)&&P.isDark(k,x+2)&&P.isDark(k,x+3)&&P.isDark(k,x+4)&&!P.isDark(k,x+5)&&P.isDark(k,x+6)&&(E+=40);for(x=0;x<A;x+=1)for(k=0;k<A-6;k+=1)P.isDark(k,x)&&!P.isDark(k+1,x)&&P.isDark(k+2,x)&&P.isDark(k+3,x)&&P.isDark(k+4,x)&&!P.isDark(k+5,x)&&P.isDark(k+6,x)&&(E+=40);var S=0;for(x=0;x<A;x+=1)for(k=0;k<A;k+=1)P.isDark(k,x)&&(S+=1);return E+Math.abs(100*S/A/A-50)/5*10},Z),Fe=function(){for(var P=new Array(256),A=new Array(256),E=0;E<8;E+=1)P[E]=1<<E;for(E=8;E<256;E+=1)P[E]=P[E-4]^P[E-5]^P[E-6]^P[E-8];for(E=0;E<255;E+=1)A[P[E]]=E;return{glog:function(k){if(k<1)throw"glog("+k+")";return A[k]},gexp:function(k){for(;k<0;)k+=255;for(;k>=256;)k-=255;return P[k]}}}();function Ie(P,A){if(P.length===void 0)throw P.length+"/"+A;var E=function(){for(var x=0;x<P.length&&P[x]==0;)x+=1;for(var T=new Array(P.length-x+A),H=0;H<P.length-x;H+=1)T[H]=P[H+x];return T}(),k={getAt:function(x){return E[x]},getLength:function(){return E.length},multiply:function(x){for(var T=new Array(k.getLength()+x.getLength()-1),H=0;H<k.getLength();H+=1)for(var G=0;G<x.getLength();G+=1)T[H+G]^=Fe.gexp(Fe.glog(k.getAt(H))+Fe.glog(x.getAt(G)));return Ie(T,0)},mod:function(x){if(k.getLength()-x.getLength()<0)return k;for(var T=Fe.glog(k.getAt(0))-Fe.glog(x.getAt(0)),H=new Array(k.getLength()),G=0;G<k.getLength();G+=1)H[G]=k.getAt(G);for(G=0;G<x.getLength();G+=1)H[G]^=Fe.gexp(Fe.glog(x.getAt(G))+T);return Ie(H,0).mod(x)}};return k}var Ot=function(){var P=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],A=function(k,x){var T={};return T.totalCount=k,T.dataCount=x,T},E={getRSBlocks:function(k,x){var T=function(s,h){switch(h){case he.L:return P[4*(s-1)+0];case he.M:return P[4*(s-1)+1];case he.Q:return P[4*(s-1)+2];case he.H:return P[4*(s-1)+3];default:return}}(k,x);if(T===void 0)throw"bad rs block @ typeNumber:"+k+"/errorCorrectionLevel:"+x;for(var H=T.length/3,G=[],Q=0;Q<H;Q+=1)for(var Te=T[3*Q+0],S=T[3*Q+1],r=T[3*Q+2],c=0;c<Te;c+=1)G.push(A(S,r));return G}};return E}(),mt=function(){var P=[],A=0,E={getBuffer:function(){return P},getAt:function(k){var x=Math.floor(k/8);return(P[x]>>>7-k%8&1)==1},put:function(k,x){for(var T=0;T<x;T+=1)E.putBit((k>>>x-T-1&1)==1)},getLengthInBits:function(){return A},putBit:function(k){var x=Math.floor(A/8);P.length<=x&&P.push(0),k&&(P[x]|=128>>>A%8),A+=1}};return E},$t=function(P){var A=P,E={getMode:function(){return 1},getLength:function(T){return A.length},write:function(T){for(var H=A,G=0;G+2<H.length;)T.put(k(H.substring(G,G+3)),10),G+=3;G<H.length&&(H.length-G==1?T.put(k(H.substring(G,G+1)),4):H.length-G==2&&T.put(k(H.substring(G,G+2)),7))}},k=function(T){for(var H=0,G=0;G<T.length;G+=1)H=10*H+x(T.charAt(G));return H},x=function(T){if("0"<=T&&T<="9")return T.charCodeAt(0)-48;throw"illegal char :"+T};return E},ne=function(P){var A=P,E={getMode:function(){return 2},getLength:function(x){return A.length},write:function(x){for(var T=A,H=0;H+1<T.length;)x.put(45*k(T.charAt(H))+k(T.charAt(H+1)),11),H+=2;H<T.length&&x.put(k(T.charAt(H)),6)}},k=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-48;if("A"<=x&&x<="Z")return x.charCodeAt(0)-65+10;switch(x){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+x}};return E},ue=function(P){var A=R.stringToBytes(P);return{getMode:function(){return 4},getLength:function(E){return A.length},write:function(E){for(var k=0;k<A.length;k+=1)E.put(A[k],8)}}},ve=function(P){var A=R.stringToBytesFuncs.SJIS;if(!A)throw"sjis not supported.";(function(k,x){var T=A("\u53CB");if(T.length!=2||(T[0]<<8|T[1])!=38726)throw"sjis not supported."})();var E=A(P);return{getMode:function(){return 8},getLength:function(k){return~~(E.length/2)},write:function(k){for(var x=E,T=0;T+1<x.length;){var H=(255&x[T])<<8|255&x[T+1];if(33088<=H&&H<=40956)H-=33088;else{if(!(57408<=H&&H<=60351))throw"illegal char at "+(T+1)+"/"+H;H-=49472}H=192*(H>>>8&255)+(255&H),k.put(H,13),T+=2}if(T<x.length)throw"illegal char at "+(T+1)}}},de=function(){var P=[],A={writeByte:function(E){P.push(255&E)},writeShort:function(E){A.writeByte(E),A.writeByte(E>>>8)},writeBytes:function(E,k,x){k=k||0,x=x||E.length;for(var T=0;T<x;T+=1)A.writeByte(E[T+k])},writeString:function(E){for(var k=0;k<E.length;k+=1)A.writeByte(E.charCodeAt(k))},toByteArray:function(){return P},toString:function(){var E="";E+="[";for(var k=0;k<P.length;k+=1)k>0&&(E+=","),E+=P[k];return E+"]"}};return A},st=function(P){var A=P,E=0,k=0,x=0,T={read:function(){for(;x<8;){if(E>=A.length){if(x==0)return-1;throw"unexpected end of file./"+x}var G=A.charAt(E);if(E+=1,G=="=")return x=0,-1;G.match(/^\s$/)||(k=k<<6|H(G.charCodeAt(0)),x+=6)}var Q=k>>>x-8&255;return x-=8,Q}},H=function(G){if(65<=G&&G<=90)return G-65;if(97<=G&&G<=122)return G-97+26;if(48<=G&&G<=57)return G-48+52;if(G==43)return 62;if(G==47)return 63;throw"c:"+G};return T},it=function(P,A,E){for(var k=function(S,r){var c=S,s=r,h=new Array(S*r),_={setPixel:function(d,m,l){h[m*c+d]=l},write:function(d){d.writeString("GIF87a"),d.writeShort(c),d.writeShort(s),d.writeByte(128),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(255),d.writeByte(255),d.writeByte(255),d.writeString(","),d.writeShort(0),d.writeShort(0),d.writeShort(c),d.writeShort(s),d.writeByte(0);var m=g(2);d.writeByte(2);for(var l=0;m.length-l>255;)d.writeByte(255),d.writeBytes(m,l,255),l+=255;d.writeByte(m.length-l),d.writeBytes(m,l,m.length-l),d.writeByte(0),d.writeString(";")}},g=function(d){for(var m=1<<d,l=1+(1<<d),C=d+1,y=M(),B=0;B<m;B+=1)y.add(String.fromCharCode(B));y.add(String.fromCharCode(m)),y.add(String.fromCharCode(l));var z,D,$,K=de(),ie=(z=K,D=0,$=0,{write:function(te,re){if(te>>>re)throw"length over";for(;D+re>=8;)z.writeByte(255&(te<<D|$)),re-=8-D,te>>>=8-D,$=0,D=0;$|=te<<D,D+=re},flush:function(){D>0&&z.writeByte($)}});ie.write(m,C);var _e=0,U=String.fromCharCode(h[_e]);for(_e+=1;_e<h.length;){var oe=String.fromCharCode(h[_e]);_e+=1,y.contains(U+oe)?U+=oe:(ie.write(y.indexOf(U),C),y.size()<4095&&(y.size()==1<<C&&(C+=1),y.add(U+oe)),U=oe)}return ie.write(y.indexOf(U),C),ie.write(l,C),ie.flush(),K.toByteArray()},M=function(){var d={},m=0,l={add:function(C){if(l.contains(C))throw"dup key:"+C;d[C]=m,m+=1},size:function(){return m},indexOf:function(C){return d[C]},contains:function(C){return d[C]!==void 0}};return l};return _}(P,A),x=0;x<A;x+=1)for(var T=0;T<P;T+=1)k.setPixel(T,x,E(T,x));var H=de();k.write(H);for(var G=function(){var S=0,r=0,c=0,s="",h={},_=function(M){s+=String.fromCharCode(g(63&M))},g=function(M){if(!(M<0)){if(M<26)return 65+M;if(M<52)return M-26+97;if(M<62)return M-52+48;if(M==62)return 43;if(M==63)return 47}throw"n:"+M};return h.writeByte=function(M){for(S=S<<8|255&M,r+=8,c+=1;r>=6;)_(S>>>r-6),r-=6},h.flush=function(){if(r>0&&(_(S<<6-r),S=0,r=0),c%3!=0)for(var M=3-c%3,d=0;d<M;d+=1)s+="="},h.toString=function(){return s},h}(),Q=H.toByteArray(),Te=0;Te<Q.length;Te+=1)G.writeByte(Q[Te]);return G.flush(),"data:image/gif;base64,"+G};return R}();j.stringToBytesFuncs["UTF-8"]=function(R){return function(N){for(var X=[],ce=0;ce<N.length;ce++){var Z=N.charCodeAt(ce);Z<128?X.push(Z):Z<2048?X.push(192|Z>>6,128|63&Z):Z<55296||Z>=57344?X.push(224|Z>>12,128|Z>>6&63,128|63&Z):(ce++,Z=65536+((1023&Z)<<10|1023&N.charCodeAt(ce)),X.push(240|Z>>18,128|Z>>12&63,128|Z>>6&63,128|63&Z))}return X}(R)},(u=typeof(n=function(){return j})=="function"?n.apply(i,[]):n)===void 0||(t.exports=u)},676:(t,i,n)=>{"use strict";n.d(i,{default:()=>Te});var u=function(){return(u=Object.assign||function(S){for(var r,c=1,s=arguments.length;c<s;c++)for(var h in r=arguments[c])Object.prototype.hasOwnProperty.call(r,h)&&(S[h]=r[h]);return S}).apply(this,arguments)},j=function(){for(var S=0,r=0,c=arguments.length;r<c;r++)S+=arguments[r].length;var s=Array(S),h=0;for(r=0;r<c;r++)for(var _=arguments[r],g=0,M=_.length;g<M;g++,h++)s[h]=_[g];return s},R=function(S){return!!S&&typeof S=="object"&&!Array.isArray(S)};function N(S){for(var r=[],c=1;c<arguments.length;c++)r[c-1]=arguments[c];if(!r.length)return S;var s=r.shift();return s!==void 0&&R(S)&&R(s)?(S=u({},S),Object.keys(s).forEach(function(h){var _=S[h],g=s[h];Array.isArray(_)&&Array.isArray(g)?S[h]=g:R(_)&&R(g)?S[h]=N(Object.assign({},_),g):S[h]=g}),N.apply(void 0,j([S],r))):S}function X(S,r){var c=document.createElement("a");c.download=r,c.href=S,document.body.appendChild(c),c.click(),document.body.removeChild(c)}function ce(S){return r=this,c=void 0,h=function(){return function(_,g){var M,d,m,l,C={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return l={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function y(B){return function(z){return function(D){if(M)throw new TypeError("Generator is already executing.");for(;C;)try{if(M=1,d&&(m=2&D[0]?d.return:D[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,D[1])).done)return m;switch(d=0,m&&(D=[2&D[0],m.value]),D[0]){case 0:case 1:m=D;break;case 4:return C.label++,{value:D[1],done:!1};case 5:C.label++,d=D[1],D=[0];continue;case 7:D=C.ops.pop(),C.trys.pop();continue;default:if(!((m=(m=C.trys).length>0&&m[m.length-1])||D[0]!==6&&D[0]!==2)){C=0;continue}if(D[0]===3&&(!m||D[1]>m[0]&&D[1]<m[3])){C.label=D[1];break}if(D[0]===6&&C.label<m[1]){C.label=m[1],m=D;break}if(m&&C.label<m[2]){C.label=m[2],C.ops.push(D);break}m[2]&&C.ops.pop(),C.trys.pop();continue}D=g.call(_,C)}catch($){D=[6,$],d=0}finally{M=m=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([B,z])}}}(this,function(_){return[2,new Promise(function(g){var M=new XMLHttpRequest;M.onload=function(){var d=new FileReader;d.onloadend=function(){g(d.result)},d.readAsDataURL(M.response)},M.open("GET",S),M.responseType="blob",M.send()})]})},new((s=void 0)||(s=Promise))(function(_,g){function M(l){try{m(h.next(l))}catch(C){g(C)}}function d(l){try{m(h.throw(l))}catch(C){g(C)}}function m(l){var C;l.done?_(l.value):(C=l.value,C instanceof s?C:new s(function(y){y(C)})).then(M,d)}m((h=h.apply(r,c||[])).next())});var r,c,s,h}let Z={L:.07,M:.15,Q:.25,H:.3};var ee=function(){return(ee=Object.assign||function(S){for(var r,c=1,s=arguments.length;c<s;c++)for(var h in r=arguments[c])Object.prototype.hasOwnProperty.call(r,h)&&(S[h]=r[h]);return S}).apply(this,arguments)};let he=function(){function S(r){var c=r.svg,s=r.type;this._svg=c,this._type=s}return S.prototype.draw=function(r,c,s,h){var _;switch(this._type){case"dots":_=this._drawDot;break;case"classy":_=this._drawClassy;break;case"classy-rounded":_=this._drawClassyRounded;break;case"rounded":_=this._drawRounded;break;case"extra-rounded":_=this._drawExtraRounded;break;case"square":default:_=this._drawSquare}_.call(this,{x:r,y:c,size:s,getNeighbor:h})},S.prototype._rotateFigure=function(r){var c,s=r.x,h=r.y,_=r.size,g=r.rotation,M=g===void 0?0:g,d=s+_/2,m=h+_/2;(0,r.draw)(),(c=this._element)===null||c===void 0||c.setAttribute("transform","rotate("+180*M/Math.PI+","+d+","+m+")")},S.prototype._basicDot=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(ee(ee({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),c._element.setAttribute("cx",String(h+s/2)),c._element.setAttribute("cy",String(_+s/2)),c._element.setAttribute("r",String(s/2))}}))},S.prototype._basicSquare=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(ee(ee({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),c._element.setAttribute("x",String(h)),c._element.setAttribute("y",String(_)),c._element.setAttribute("width",String(s)),c._element.setAttribute("height",String(s))}}))},S.prototype._basicSideRounded=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(ee(ee({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","path"),c._element.setAttribute("d","M "+h+" "+_+"v "+s+"h "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, 0 "+-s)}}))},S.prototype._basicCornerRounded=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(ee(ee({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","path"),c._element.setAttribute("d","M "+h+" "+_+"v "+s+"h "+s+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},S.prototype._basicCornerExtraRounded=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(ee(ee({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","path"),c._element.setAttribute("d","M "+h+" "+_+"v "+s+"h "+s+"a "+s+" "+s+", 0, 0, 0, "+-s+" "+-s)}}))},S.prototype._basicCornersRounded=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(ee(ee({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","path"),c._element.setAttribute("d","M "+h+" "+_+"v "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+s/2+" "+s/2+"h "+s/2+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},S.prototype._drawDot=function(r){var c=r.x,s=r.y,h=r.size;this._basicDot({x:c,y:s,size:h,rotation:0})},S.prototype._drawSquare=function(r){var c=r.x,s=r.y,h=r.size;this._basicSquare({x:c,y:s,size:h,rotation:0})},S.prototype._drawRounded=function(r){var c=r.x,s=r.y,h=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,M=_?+_(1,0):0,d=_?+_(0,-1):0,m=_?+_(0,1):0,l=g+M+d+m;if(l!==0)if(l>2||g&&M||d&&m)this._basicSquare({x:c,y:s,size:h,rotation:0});else{if(l===2){var C=0;return g&&d?C=Math.PI/2:d&&M?C=Math.PI:M&&m&&(C=-Math.PI/2),void this._basicCornerRounded({x:c,y:s,size:h,rotation:C})}if(l===1)return C=0,d?C=Math.PI/2:M?C=Math.PI:m&&(C=-Math.PI/2),void this._basicSideRounded({x:c,y:s,size:h,rotation:C})}else this._basicDot({x:c,y:s,size:h,rotation:0})},S.prototype._drawExtraRounded=function(r){var c=r.x,s=r.y,h=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,M=_?+_(1,0):0,d=_?+_(0,-1):0,m=_?+_(0,1):0,l=g+M+d+m;if(l!==0)if(l>2||g&&M||d&&m)this._basicSquare({x:c,y:s,size:h,rotation:0});else{if(l===2){var C=0;return g&&d?C=Math.PI/2:d&&M?C=Math.PI:M&&m&&(C=-Math.PI/2),void this._basicCornerExtraRounded({x:c,y:s,size:h,rotation:C})}if(l===1)return C=0,d?C=Math.PI/2:M?C=Math.PI:m&&(C=-Math.PI/2),void this._basicSideRounded({x:c,y:s,size:h,rotation:C})}else this._basicDot({x:c,y:s,size:h,rotation:0})},S.prototype._drawClassy=function(r){var c=r.x,s=r.y,h=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,M=_?+_(1,0):0,d=_?+_(0,-1):0,m=_?+_(0,1):0;g+M+d+m!==0?g||d?M||m?this._basicSquare({x:c,y:s,size:h,rotation:0}):this._basicCornerRounded({x:c,y:s,size:h,rotation:Math.PI/2}):this._basicCornerRounded({x:c,y:s,size:h,rotation:-Math.PI/2}):this._basicCornersRounded({x:c,y:s,size:h,rotation:Math.PI/2})},S.prototype._drawClassyRounded=function(r){var c=r.x,s=r.y,h=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,M=_?+_(1,0):0,d=_?+_(0,-1):0,m=_?+_(0,1):0;g+M+d+m!==0?g||d?M||m?this._basicSquare({x:c,y:s,size:h,rotation:0}):this._basicCornerExtraRounded({x:c,y:s,size:h,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:c,y:s,size:h,rotation:-Math.PI/2}):this._basicCornersRounded({x:c,y:s,size:h,rotation:Math.PI/2})},S}();var le=function(){return(le=Object.assign||function(S){for(var r,c=1,s=arguments.length;c<s;c++)for(var h in r=arguments[c])Object.prototype.hasOwnProperty.call(r,h)&&(S[h]=r[h]);return S}).apply(this,arguments)};let Fe=function(){function S(r){var c=r.svg,s=r.type;this._svg=c,this._type=s}return S.prototype.draw=function(r,c,s,h){var _;switch(this._type){case"square":_=this._drawSquare;break;case"extra-rounded":_=this._drawExtraRounded;break;case"dot":default:_=this._drawDot}_.call(this,{x:r,y:c,size:s,rotation:h})},S.prototype._rotateFigure=function(r){var c,s=r.x,h=r.y,_=r.size,g=r.rotation,M=g===void 0?0:g,d=s+_/2,m=h+_/2;(0,r.draw)(),(c=this._element)===null||c===void 0||c.setAttribute("transform","rotate("+180*M/Math.PI+","+d+","+m+")")},S.prototype._basicDot=function(r){var c=this,s=r.size,h=r.x,_=r.y,g=s/7;this._rotateFigure(le(le({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","path"),c._element.setAttribute("clip-rule","evenodd"),c._element.setAttribute("d","M "+(h+s/2)+" "+_+"a "+s/2+" "+s/2+" 0 1 0 0.1 0zm 0 "+g+"a "+(s/2-g)+" "+(s/2-g)+" 0 1 1 -0.1 0Z")}}))},S.prototype._basicSquare=function(r){var c=this,s=r.size,h=r.x,_=r.y,g=s/7;this._rotateFigure(le(le({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","path"),c._element.setAttribute("clip-rule","evenodd"),c._element.setAttribute("d","M "+h+" "+_+"v "+s+"h "+s+"v "+-s+"zM "+(h+g)+" "+(_+g)+"h "+(s-2*g)+"v "+(s-2*g)+"h "+(2*g-s)+"z")}}))},S.prototype._basicExtraRounded=function(r){var c=this,s=r.size,h=r.x,_=r.y,g=s/7;this._rotateFigure(le(le({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","path"),c._element.setAttribute("clip-rule","evenodd"),c._element.setAttribute("d","M "+h+" "+(_+2.5*g)+"v "+2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*g+" "+2.5*g+"h "+2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*g+" "+2.5*-g+"v "+-2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*-g+" "+2.5*-g+"h "+-2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*-g+" "+2.5*g+"M "+(h+2.5*g)+" "+(_+g)+"h "+2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*g+" "+1.5*g+"v "+2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*-g+" "+1.5*g+"h "+-2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*-g+" "+1.5*-g+"v "+-2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*g+" "+1.5*-g)}}))},S.prototype._drawDot=function(r){var c=r.x,s=r.y,h=r.size,_=r.rotation;this._basicDot({x:c,y:s,size:h,rotation:_})},S.prototype._drawSquare=function(r){var c=r.x,s=r.y,h=r.size,_=r.rotation;this._basicSquare({x:c,y:s,size:h,rotation:_})},S.prototype._drawExtraRounded=function(r){var c=r.x,s=r.y,h=r.size,_=r.rotation;this._basicExtraRounded({x:c,y:s,size:h,rotation:_})},S}();var Ie=function(){return(Ie=Object.assign||function(S){for(var r,c=1,s=arguments.length;c<s;c++)for(var h in r=arguments[c])Object.prototype.hasOwnProperty.call(r,h)&&(S[h]=r[h]);return S}).apply(this,arguments)};let Ot=function(){function S(r){var c=r.svg,s=r.type;this._svg=c,this._type=s}return S.prototype.draw=function(r,c,s,h){var _;switch(this._type){case"square":_=this._drawSquare;break;case"dot":default:_=this._drawDot}_.call(this,{x:r,y:c,size:s,rotation:h})},S.prototype._rotateFigure=function(r){var c,s=r.x,h=r.y,_=r.size,g=r.rotation,M=g===void 0?0:g,d=s+_/2,m=h+_/2;(0,r.draw)(),(c=this._element)===null||c===void 0||c.setAttribute("transform","rotate("+180*M/Math.PI+","+d+","+m+")")},S.prototype._basicDot=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(Ie(Ie({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),c._element.setAttribute("cx",String(h+s/2)),c._element.setAttribute("cy",String(_+s/2)),c._element.setAttribute("r",String(s/2))}}))},S.prototype._basicSquare=function(r){var c=this,s=r.size,h=r.x,_=r.y;this._rotateFigure(Ie(Ie({},r),{draw:function(){c._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),c._element.setAttribute("x",String(h)),c._element.setAttribute("y",String(_)),c._element.setAttribute("width",String(s)),c._element.setAttribute("height",String(s))}}))},S.prototype._drawDot=function(r){var c=r.x,s=r.y,h=r.size,_=r.rotation;this._basicDot({x:c,y:s,size:h,rotation:_})},S.prototype._drawSquare=function(r){var c=r.x,s=r.y,h=r.size,_=r.rotation;this._basicSquare({x:c,y:s,size:h,rotation:_})},S}(),mt="circle";var $t=function(S,r,c,s){return new(c||(c=Promise))(function(h,_){function g(m){try{d(s.next(m))}catch(l){_(l)}}function M(m){try{d(s.throw(m))}catch(l){_(l)}}function d(m){var l;m.done?h(m.value):(l=m.value,l instanceof c?l:new c(function(C){C(l)})).then(g,M)}d((s=s.apply(S,r||[])).next())})},ne=function(S,r){var c,s,h,_,g={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return _={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function M(d){return function(m){return function(l){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,s&&(h=2&l[0]?s.return:l[0]?s.throw||((h=s.return)&&h.call(s),0):s.next)&&!(h=h.call(s,l[1])).done)return h;switch(s=0,h&&(l=[2&l[0],h.value]),l[0]){case 0:case 1:h=l;break;case 4:return g.label++,{value:l[1],done:!1};case 5:g.label++,s=l[1],l=[0];continue;case 7:l=g.ops.pop(),g.trys.pop();continue;default:if(!((h=(h=g.trys).length>0&&h[h.length-1])||l[0]!==6&&l[0]!==2)){g=0;continue}if(l[0]===3&&(!h||l[1]>h[0]&&l[1]<h[3])){g.label=l[1];break}if(l[0]===6&&g.label<h[1]){g.label=h[1],h=l;break}if(h&&g.label<h[2]){g.label=h[2],g.ops.push(l);break}h[2]&&g.ops.pop(),g.trys.pop();continue}l=r.call(S,g)}catch(C){l=[6,C],s=0}finally{c=h=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([d,m])}}},ue=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],ve=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];let de=function(){function S(r){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(r.width)),this._element.setAttribute("height",String(r.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=r}return Object.defineProperty(S.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),S.prototype.getElement=function(){return this._element},S.prototype.drawQR=function(r){return $t(this,void 0,void 0,function(){var c,s,h,_,g,M,d,m,l,C,y=this;return ne(this,function(B){switch(B.label){case 0:return c=r.getModuleCount(),s=Math.min(this._options.width,this._options.height)-2*this._options.margin,h=this._options.shape===mt?s/Math.sqrt(2):s,_=Math.floor(h/c),g={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=r,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(B.sent(),!this._image)return[2];M=this._options,d=M.imageOptions,m=M.qrOptions,l=d.imageSize*Z[m.errorCorrectionLevel],C=Math.floor(l*c*c),g=function(z){var D=z.originalHeight,$=z.originalWidth,K=z.maxHiddenDots,ie=z.maxHiddenAxisDots,_e=z.dotSize,U={x:0,y:0},oe={x:0,y:0};if(D<=0||$<=0||K<=0||_e<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var te=D/$;return U.x=Math.floor(Math.sqrt(K/te)),U.x<=0&&(U.x=1),ie&&ie<U.x&&(U.x=ie),U.x%2==0&&U.x--,oe.x=U.x*_e,U.y=1+2*Math.ceil((U.x*te-1)/2),oe.y=Math.round(oe.x*te),(U.y*U.x>K||ie&&ie<U.y)&&(ie&&ie<U.y?(U.y=ie,U.y%2==0&&U.x--):U.y-=2,oe.y=U.y*_e,U.x=1+2*Math.ceil((U.y/te-1)/2),oe.x=Math.round(oe.y/te)),{height:oe.y,width:oe.x,hideYDots:U.y,hideXDots:U.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:C,maxHiddenAxisDots:c-14,dotSize:_}),B.label=2;case 2:return this.drawBackground(),this.drawDots(function(z,D){var $,K,ie,_e,U,oe;return!(y._options.imageOptions.hideBackgroundDots&&z>=(c-g.hideXDots)/2&&z<(c+g.hideXDots)/2&&D>=(c-g.hideYDots)/2&&D<(c+g.hideYDots)/2||!(($=ue[z])===null||$===void 0)&&$[D]||!((K=ue[z-c+7])===null||K===void 0)&&K[D]||!((ie=ue[z])===null||ie===void 0)&&ie[D-c+7]||!((_e=ve[z])===null||_e===void 0)&&_e[D]||!((U=ve[z-c+7])===null||U===void 0)&&U[D]||!((oe=ve[z])===null||oe===void 0)&&oe[D-c+7])}),this.drawCorners(),this._options.image?[4,this.drawImage({width:g.width,height:g.height,count:c,dotSize:_})]:[3,4];case 3:B.sent(),B.label=4;case 4:return[2]}})})},S.prototype.drawBackground=function(){var r,c,s,h=this._element,_=this._options;if(h){var g=(r=_.backgroundOptions)===null||r===void 0?void 0:r.gradient,M=(c=_.backgroundOptions)===null||c===void 0?void 0:c.color;if((g||M)&&this._createColor({options:g,color:M,additionalRotation:0,x:0,y:0,height:_.height,width:_.width,name:"background-color"}),(s=_.backgroundOptions)===null||s===void 0?void 0:s.round){var d=Math.min(_.width,_.height),m=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),m.setAttribute("x",String((_.width-d)/2)),m.setAttribute("y",String((_.height-d)/2)),m.setAttribute("width",String(d)),m.setAttribute("height",String(d)),m.setAttribute("rx",String(d/2*_.backgroundOptions.round)),this._backgroundClipPath.appendChild(m)}}},S.prototype.drawDots=function(r){var c,s,h=this;if(!this._qr)throw"QR code is not defined";var _=this._options,g=this._qr.getModuleCount();if(g>_.width||g>_.height)throw"The canvas is too small.";var M=Math.min(_.width,_.height)-2*_.margin,d=_.shape===mt?M/Math.sqrt(2):M,m=Math.floor(d/g),l=Math.floor((_.width-g*m)/2),C=Math.floor((_.height-g*m)/2),y=new he({svg:this._element,type:_.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(c=_.dotsOptions)===null||c===void 0?void 0:c.gradient,color:_.dotsOptions.color,additionalRotation:0,x:0,y:0,height:_.height,width:_.width,name:"dot-color"});for(var B=function(ke){for(var se=function(Ce){return r&&!r(ke,Ce)?"continue":!((s=z._qr)===null||s===void 0)&&s.isDark(ke,Ce)?(y.draw(l+ke*m,C+Ce*m,m,function(Se,Ee){return!(ke+Se<0||Ce+Ee<0||ke+Se>=g||Ce+Ee>=g)&&!(r&&!r(ke+Se,Ce+Ee))&&!!h._qr&&h._qr.isDark(ke+Se,Ce+Ee)}),void(y._element&&z._dotsClipPath&&z._dotsClipPath.appendChild(y._element))):"continue"},we=0;we<g;we++)se(we)},z=this,D=0;D<g;D++)B(D);if(_.shape===mt){var $=Math.floor((M/m-g)/2),K=g+2*$,ie=l-$*m,_e=C-$*m,U=[],oe=Math.floor(K/2);for(D=0;D<K;D++){U[D]=[];for(var te=0;te<K;te++)D>=$-1&&D<=K-$&&te>=$-1&&te<=K-$||Math.sqrt((D-oe)*(D-oe)+(te-oe)*(te-oe))>oe?U[D][te]=0:U[D][te]=this._qr.isDark(te-2*$<0?te:te>=g?te-2*$:te-$,D-2*$<0?D:D>=g?D-2*$:D-$)?1:0}var re=function(ke){for(var se=function(Ce){if(!U[ke][Ce])return"continue";y.draw(ie+ke*m,_e+Ce*m,m,function(Se,Ee){var De;return!!(!((De=U[ke+Se])===null||De===void 0)&&De[Ce+Ee])}),y._element&&Le._dotsClipPath&&Le._dotsClipPath.appendChild(y._element)},we=0;we<K;we++)se(we)},Le=this;for(D=0;D<K;D++)re(D)}},S.prototype.drawCorners=function(){var r=this;if(!this._qr)throw"QR code is not defined";var c=this._element,s=this._options;if(!c)throw"Element code is not defined";var h=this._qr.getModuleCount(),_=Math.min(s.width,s.height)-2*s.margin,g=s.shape===mt?_/Math.sqrt(2):_,M=Math.floor(g/h),d=7*M,m=3*M,l=Math.floor((s.width-h*M)/2),C=Math.floor((s.height-h*M)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(y){var B,z,D,$,K,ie,_e,U,oe,te,re,Le,ke=y[0],se=y[1],we=y[2],Ce=l+ke*M*(h-7),Se=C+se*M*(h-7),Ee=r._dotsClipPath,De=r._dotsClipPath;if((!((B=s.cornersSquareOptions)===null||B===void 0)&&B.gradient||!((z=s.cornersSquareOptions)===null||z===void 0)&&z.color)&&((Ee=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+ke+"-"+se),r._defs.appendChild(Ee),r._cornersSquareClipPath=r._cornersDotClipPath=De=Ee,r._createColor({options:(D=s.cornersSquareOptions)===null||D===void 0?void 0:D.gradient,color:($=s.cornersSquareOptions)===null||$===void 0?void 0:$.color,additionalRotation:we,x:Ce,y:Se,height:d,width:d,name:"corners-square-color-"+ke+"-"+se})),(K=s.cornersSquareOptions)===null||K===void 0?void 0:K.type){var Be=new Fe({svg:r._element,type:s.cornersSquareOptions.type});Be.draw(Ce,Se,d,we),Be._element&&Ee&&Ee.appendChild(Be._element)}else for(var It=new he({svg:r._element,type:s.dotsOptions.type}),nr=function(ut){for(var lo=function(Rt){if(!(!((ie=ue[ut])===null||ie===void 0)&&ie[Rt]))return"continue";It.draw(Ce+ut*M,Se+Rt*M,M,function(po,ho){var Bt;return!!(!((Bt=ue[ut+po])===null||Bt===void 0)&&Bt[Rt+ho])}),It._element&&Ee&&Ee.appendChild(It._element)},Vt=0;Vt<ue[ut].length;Vt++)lo(Vt)},Ft=0;Ft<ue.length;Ft++)nr(Ft);if((!((_e=s.cornersDotOptions)===null||_e===void 0)&&_e.gradient||!((U=s.cornersDotOptions)===null||U===void 0)&&U.color)&&((De=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+ke+"-"+se),r._defs.appendChild(De),r._cornersDotClipPath=De,r._createColor({options:(oe=s.cornersDotOptions)===null||oe===void 0?void 0:oe.gradient,color:(te=s.cornersDotOptions)===null||te===void 0?void 0:te.color,additionalRotation:we,x:Ce+2*M,y:Se+2*M,height:m,width:m,name:"corners-dot-color-"+ke+"-"+se})),(re=s.cornersDotOptions)===null||re===void 0?void 0:re.type){var co=new Ot({svg:r._element,type:s.cornersDotOptions.type});co.draw(Ce+2*M,Se+2*M,m,we),co._element&&De&&De.appendChild(co._element)}else{It=new he({svg:r._element,type:s.dotsOptions.type});var rr=function(ut){for(var lo=function(Rt){if(!(!((Le=ve[ut])===null||Le===void 0)&&Le[Rt]))return"continue";It.draw(Ce+ut*M,Se+Rt*M,M,function(po,ho){var Bt;return!!(!((Bt=ve[ut+po])===null||Bt===void 0)&&Bt[Rt+ho])}),It._element&&De&&De.appendChild(It._element)},Vt=0;Vt<ve[ut].length;Vt++)lo(Vt)};for(Ft=0;Ft<ve.length;Ft++)rr(Ft)}})},S.prototype.loadImage=function(){var r=this;return new Promise(function(c,s){var h=r._options,_=new Image;if(!h.image)return s("Image is not defined");typeof h.imageOptions.crossOrigin=="string"&&(_.crossOrigin=h.imageOptions.crossOrigin),r._image=_,_.onload=function(){c()},_.src=h.image})},S.prototype.drawImage=function(r){var c=r.width,s=r.height,h=r.count,_=r.dotSize;return $t(this,void 0,void 0,function(){var g,M,d,m,l,C,y,B,z;return ne(this,function(D){switch(D.label){case 0:return g=this._options,M=Math.floor((g.width-h*_)/2),d=Math.floor((g.height-h*_)/2),m=M+g.imageOptions.margin+(h*_-c)/2,l=d+g.imageOptions.margin+(h*_-s)/2,C=c-2*g.imageOptions.margin,y=s-2*g.imageOptions.margin,(B=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(m)),B.setAttribute("y",String(l)),B.setAttribute("width",C+"px"),B.setAttribute("height",y+"px"),[4,ce(g.image||"")];case 1:return z=D.sent(),B.setAttribute("href",z||""),this._element.appendChild(B),[2]}})})},S.prototype._createColor=function(r){var c=r.options,s=r.color,h=r.additionalRotation,_=r.x,g=r.y,M=r.height,d=r.width,m=r.name,l=d>M?d:M,C=document.createElementNS("http://www.w3.org/2000/svg","rect");if(C.setAttribute("x",String(_)),C.setAttribute("y",String(g)),C.setAttribute("height",String(M)),C.setAttribute("width",String(d)),C.setAttribute("clip-path","url('#clip-path-"+m+"')"),c){var y;if(c.type==="radial")(y=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",m),y.setAttribute("gradientUnits","userSpaceOnUse"),y.setAttribute("fx",String(_+d/2)),y.setAttribute("fy",String(g+M/2)),y.setAttribute("cx",String(_+d/2)),y.setAttribute("cy",String(g+M/2)),y.setAttribute("r",String(l/2));else{var B=((c.rotation||0)+h)%(2*Math.PI),z=(B+2*Math.PI)%(2*Math.PI),D=_+d/2,$=g+M/2,K=_+d/2,ie=g+M/2;z>=0&&z<=.25*Math.PI||z>1.75*Math.PI&&z<=2*Math.PI?(D-=d/2,$-=M/2*Math.tan(B),K+=d/2,ie+=M/2*Math.tan(B)):z>.25*Math.PI&&z<=.75*Math.PI?($-=M/2,D-=d/2/Math.tan(B),ie+=M/2,K+=d/2/Math.tan(B)):z>.75*Math.PI&&z<=1.25*Math.PI?(D+=d/2,$+=M/2*Math.tan(B),K-=d/2,ie-=M/2*Math.tan(B)):z>1.25*Math.PI&&z<=1.75*Math.PI&&($+=M/2,D+=d/2/Math.tan(B),ie-=M/2,K-=d/2/Math.tan(B)),(y=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",m),y.setAttribute("gradientUnits","userSpaceOnUse"),y.setAttribute("x1",String(Math.round(D))),y.setAttribute("y1",String(Math.round($))),y.setAttribute("x2",String(Math.round(K))),y.setAttribute("y2",String(Math.round(ie)))}c.colorStops.forEach(function(_e){var U=_e.offset,oe=_e.color,te=document.createElementNS("http://www.w3.org/2000/svg","stop");te.setAttribute("offset",100*U+"%"),te.setAttribute("stop-color",oe),y.appendChild(te)}),C.setAttribute("fill","url('#"+m+"')"),this._defs.appendChild(y)}else s&&C.setAttribute("fill",s);this._element.appendChild(C)},S}(),st="canvas";for(var it={},P=0;P<=40;P++)it[P]=P;let A={type:st,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:it[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var E=function(){return(E=Object.assign||function(S){for(var r,c=1,s=arguments.length;c<s;c++)for(var h in r=arguments[c])Object.prototype.hasOwnProperty.call(r,h)&&(S[h]=r[h]);return S}).apply(this,arguments)};function k(S){var r=E({},S);if(!r.colorStops||!r.colorStops.length)throw"Field 'colorStops' is required in gradient";return r.rotation?r.rotation=Number(r.rotation):r.rotation=0,r.colorStops=r.colorStops.map(function(c){return E(E({},c),{offset:Number(c.offset)})}),r}function x(S){var r=E({},S);return r.width=Number(r.width),r.height=Number(r.height),r.margin=Number(r.margin),r.imageOptions=E(E({},r.imageOptions),{hideBackgroundDots:!!r.imageOptions.hideBackgroundDots,imageSize:Number(r.imageOptions.imageSize),margin:Number(r.imageOptions.margin)}),r.margin>Math.min(r.width,r.height)&&(r.margin=Math.min(r.width,r.height)),r.dotsOptions=E({},r.dotsOptions),r.dotsOptions.gradient&&(r.dotsOptions.gradient=k(r.dotsOptions.gradient)),r.cornersSquareOptions&&(r.cornersSquareOptions=E({},r.cornersSquareOptions),r.cornersSquareOptions.gradient&&(r.cornersSquareOptions.gradient=k(r.cornersSquareOptions.gradient))),r.cornersDotOptions&&(r.cornersDotOptions=E({},r.cornersDotOptions),r.cornersDotOptions.gradient&&(r.cornersDotOptions.gradient=k(r.cornersDotOptions.gradient))),r.backgroundOptions&&(r.backgroundOptions=E({},r.backgroundOptions),r.backgroundOptions.gradient&&(r.backgroundOptions.gradient=k(r.backgroundOptions.gradient))),r}var T=n(192),H=n.n(T),G=function(S,r,c,s){return new(c||(c=Promise))(function(h,_){function g(m){try{d(s.next(m))}catch(l){_(l)}}function M(m){try{d(s.throw(m))}catch(l){_(l)}}function d(m){var l;m.done?h(m.value):(l=m.value,l instanceof c?l:new c(function(C){C(l)})).then(g,M)}d((s=s.apply(S,r||[])).next())})},Q=function(S,r){var c,s,h,_,g={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return _={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function M(d){return function(m){return function(l){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,s&&(h=2&l[0]?s.return:l[0]?s.throw||((h=s.return)&&h.call(s),0):s.next)&&!(h=h.call(s,l[1])).done)return h;switch(s=0,h&&(l=[2&l[0],h.value]),l[0]){case 0:case 1:h=l;break;case 4:return g.label++,{value:l[1],done:!1};case 5:g.label++,s=l[1],l=[0];continue;case 7:l=g.ops.pop(),g.trys.pop();continue;default:if(!((h=(h=g.trys).length>0&&h[h.length-1])||l[0]!==6&&l[0]!==2)){g=0;continue}if(l[0]===3&&(!h||l[1]>h[0]&&l[1]<h[3])){g.label=l[1];break}if(l[0]===6&&g.label<h[1]){g.label=h[1],h=l;break}if(h&&g.label<h[2]){g.label=h[2],g.ops.push(l);break}h[2]&&g.ops.pop(),g.trys.pop();continue}l=r.call(S,g)}catch(C){l=[6,C],s=0}finally{c=h=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([d,m])}}};let Te=function(){function S(r){this._options=r?x(N(A,r)):A,this.update()}return S._clearContainer=function(r){r&&(r.innerHTML="")},S.prototype._setupSvg=function(){var r=this;if(this._qr){var c=new de(this._options);this._svg=c.getElement(),this._svgDrawingPromise=c.drawQR(this._qr).then(function(){var s;r._svg&&((s=r._extension)===null||s===void 0||s.call(r,c.getElement(),r._options))})}},S.prototype._setupCanvas=function(){var r,c=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=(r=this._svgDrawingPromise)===null||r===void 0?void 0:r.then(function(){if(c._svg){var s=c._svg,h=new XMLSerializer().serializeToString(s),_="data:image/svg+xml;base64,"+btoa(h),g=new Image;return new Promise(function(M){g.onload=function(){var d,m;(m=(d=c._canvas)===null||d===void 0?void 0:d.getContext("2d"))===null||m===void 0||m.drawImage(g,0,0),M()},g.src=_})}}))},S.prototype._getElement=function(r){return r===void 0&&(r="png"),G(this,void 0,void 0,function(){return Q(this,function(c){switch(c.label){case 0:if(!this._qr)throw"QR code is empty";return r.toLowerCase()!=="svg"?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return c.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return c.sent(),[2,this._canvas]}})})},S.prototype.update=function(r){S._clearContainer(this._container),this._options=r?x(N(this._options,r)):this._options,this._options.data&&(this._qr=H()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(c){switch(!0){case/^[0-9]*$/.test(c):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(c):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===st?this._setupCanvas():this._setupSvg(),this.append(this._container))},S.prototype.append=function(r){if(r){if(typeof r.appendChild!="function")throw"Container should be a single DOM node";this._options.type===st?this._canvas&&r.appendChild(this._canvas):this._svg&&r.appendChild(this._svg),this._container=r}},S.prototype.applyExtension=function(r){if(!r)throw"Extension function should be defined.";this._extension=r,this.update()},S.prototype.deleteExtension=function(){this._extension=void 0,this.update()},S.prototype.getRawData=function(r){return r===void 0&&(r="png"),G(this,void 0,void 0,function(){var c,s,h;return Q(this,function(_){switch(_.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(r)];case 1:return(c=_.sent())?r.toLowerCase()==="svg"?(s=new XMLSerializer,h=s.serializeToString(c),[2,new Blob([`<?xml version="1.0" standalone="no"?>\r
`+h],{type:"image/svg+xml"})]):[2,new Promise(function(g){return c.toBlob(g,"image/"+r,1)})]:[2,null]}})})},S.prototype.download=function(r){return G(this,void 0,void 0,function(){var c,s,h,_,g;return Q(this,function(M){switch(M.label){case 0:if(!this._qr)throw"QR code is empty";return c="png",s="qr",typeof r=="string"?(c=r,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof r=="object"&&r!==null&&(r.name&&(s=r.name),r.extension&&(c=r.extension)),[4,this._getElement(c)];case 1:return(h=M.sent())?(c.toLowerCase()==="svg"?(_=new XMLSerializer,g=`<?xml version="1.0" standalone="no"?>\r
`+(g=_.serializeToString(h)),X("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(g),s+".svg")):X(h.toDataURL("image/"+c),s+"."+c),[2]):[2]}})})},S}()}},a={};function e(t){if(a[t])return a[t].exports;var i=a[t]={exports:{}};return o[t](i,i.exports,e),i.exports}return e.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e(676)})().default})});var ko=(o,a)=>a.id;function cr(o,a){if(o&1){let e=Y();p(0,"mat-chip-row",15),O("removed",function(){let i=F(e).$implicit,n=b();return V(n.removeTag(i))}),w(1),p(2,"button",16)(3,"mat-icon"),w(4,"cancel"),f()()()}if(o&2){let e=a.$implicit;I("removable",!0),v(),me(" ",e.name," "),v(),ii("aria-label","remove "+e.name)}}function lr(o,a){if(o&1&&(p(0,"mat-option",13),w(1),f()),o&2){let e=a.$implicit;I("value",e),v(),me(" ",e.name," ")}}function dr(o,a){if(o&1&&(p(0,"mat-list-option",13),w(1),f()),o&2){let e=a.$implicit;I("value",e),v(),me(" ",e.title," ")}}function pr(o,a){if(o&1){let e=Y();p(0,"mat-selection-list",17),Ne("ngModelChange",function(i){F(e);let n=b();return ze(n.selectedCollate,i)||(n.selectedCollate=i),V(i)}),O("selectionChange",function(i){F(e);let n=b();return V(n.onCollateSelect(i))}),fe(1,dr,2,2,"mat-list-option",13,ko),f(),p(3,"mat-paginator",18),O("page",function(i){F(e);let n=b();return V(n.handlePageEvent(i))}),f()}if(o&2){let e=b();Ge("ngModel",e.selectedCollate),I("multiple",!1),v(),ge(e.collates),v(2),I("length",e.totalCount)("pageSize",e.limit)}}function hr(o,a){o&1&&(p(0,"p"),w(1,"No collates could be found."),f())}var Dn=(()=>{class o{constructor(e,t,i,n,u){this.snackBar=e,this.fb=t,this.router=i,this.collateService=n,this.dialog=u,this.collates=[],this.searchTags=[],this.selectedCollate=null,this.searchTerm="",this.limit=5,this.offset=0,this.totalCount=0,this.separatorKeysCodes=[13,188],this.form=this.fb.group({tag:[""]}),this.loading=!1}ngOnInit(){this.searchCollates(),this.filteredTags=this.form.controls.tag.valueChanges.pipe(si(""),Bo(e=>e?e.length>=2:!1),ci(e=>this.collateService.getCollateTags(e).pipe(ai(t=>t.results))))}searchCollates(){this.loading=!0,this.collateService.getCollates(this.limit,this.offset,this.searchTerm,this.searchTags.map(e=>e.id)).subscribe({next:e=>{this.collates=e.results,this.totalCount=e.count,this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Error loading collates","Dismiss")}})}onCollateSelect(e){this.selectedCollate=e.options[0].value,this.router.navigate([`/collate/view/${e.options[0].value.id}`]).then(t=>console.log(t))}openCreateCollateDialog(){this.dialog.open(wn).afterClosed().subscribe(t=>{t&&this.collateService.createCollate(t.title,t.greeting).subscribe(i=>{this.router.navigate([`/collate/edit/${i.id}`]).then(n=>console.log(n))})})}handlePageEvent(e){this.limit=e.pageSize,this.offset=e.pageIndex*this.limit,this.searchCollates()}addTag(e){let t=e.option.value;t&&!this.searchTags.find(i=>i.id===t.id)&&this.searchTags.push(t),this.form.controls.tag.setValue(""),this.searchCollates()}removeTag(e){let t=this.searchTags.indexOf(e);t>=0&&this.searchTags.splice(t,1),this.searchCollates()}static{this.\u0275fac=function(t){return new(t||o)(L(rt),L(Ze),L(Ut),L(Tt),L(Zt))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate"]],standalone:!0,features:[pe],decls:33,vars:8,consts:[["chipGrid",""],["auto","matAutocomplete"],[1,"collate-container"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[1,"search-box"],["mat-button","",2,"width","100%",3,"click"],["appearance","outlined",2,"width","500px"],[2,"width","100%"],["matInput","","placeholder","Search Collates",3,"ngModelChange","ngModel"],[3,"removable"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],[3,"removed","removable"],["matChipRemove",""],[3,"ngModelChange","selectionChange","ngModel","multiple"],[3,"page","length","pageSize"]],template:function(t,i){if(t&1){let n=Y();p(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),w(4,"C|nder Collates"),f(),W(5,"br"),f()(),p(6,"div",5)(7,"div")(8,"button",6),O("click",function(){return F(n),V(i.openCreateCollateDialog())}),p(9,"h3"),w(10,"+ Create Collate From Projects"),f()()(),W(11,"hr"),p(12,"mat-card",7)(13,"mat-card-content")(14,"mat-form-field",8)(15,"input",9),Ne("ngModelChange",function(j){return F(n),ze(i.searchTerm,j)||(i.searchTerm=j),V(j)}),O("ngModelChange",function(){return F(n),V(i.searchCollates())}),f()(),p(16,"mat-form-field",8)(17,"mat-label"),w(18,"Search Tags"),f(),p(19,"mat-chip-grid",null,0),fe(21,cr,5,3,"mat-chip-row",10,ko),W(23,"input",11),f(),p(24,"mat-autocomplete",12,1),O("optionSelected",function(j){return F(n),V(i.addTag(j))}),fe(26,lr,2,2,"mat-option",13,ko),Ci(28,"async"),f()(),p(29,"button",14),O("click",function(){return F(n),V(i.searchCollates())}),w(30,"Search"),f(),q(31,pr,4,4)(32,hr,2,0,"p"),f()()()()}if(t&2){let n=Ye(20),u=Ye(25);v(15),Ge("ngModel",i.searchTerm),v(6),ge(i.searchTags),v(2),I("matChipInputFor",n)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("formControl",i.form.controls.tag)("matAutocomplete",u),v(3),ge(vi(28,6,i.filteredTags)),v(5),J(i.collates.length>0?31:32)}},dependencies:[et,Mt,Je,Ve,kt,tt,Si,wi,jt,Jt,Kt,Oe,ji,qe,Ti,kn,yn,xn,Yt,Ai,xi,dt,un,Pi],styles:[".collate-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:80vh}.search-box[_ngcontent-%COMP%]{width:500px}"]})}}return o})();var An=(()=>{class o{constructor(){this.collate=null}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-header"]],inputs:{collate:"collate"},standalone:!0,features:[pe],decls:7,vars:2,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"]],template:function(t,i){t&1&&(p(0,"div",0)(1,"div",1)(2,"h1"),w(3),f(),W(4,"br"),p(5,"div",2),w(6),f()()()),t&2&&(v(3),ye(i.collate==null?null:i.collate.title),v(3),ye(i.collate==null?null:i.collate.greeting))},styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return o})();function ur(o,a){if(o&1&&(p(0,"p"),w(1),W(2,"br"),w(3),f(),W(4,"mat-progress-bar",8)),o&2){let e=b();v(),me("Elapsed Time: ",e.elapsedTime," seconds"),v(2),me(" ",e.progress," ")}}var eo=(()=>{class o{constructor(e,t,i,n,u){this.snackBar=e,this.ws=t,this.fb=i,this.web=n,this.sb=u,this.projects=[],this.loading=!1,this.searchStartTime=null,this.elapsedTime="0.00",this.progress="",this.form=this.fb.group({searchQuery:new nt("",ot.required),searchMode:new nt("gene",ot.required)}),this.searchResultID=new xe,this.ws.searchWSConnection?.subscribe(j=>{if(j&&j.type==="search_status")switch(j.status){case"complete":this.loading=!1,clearInterval(this.timerInterval);let R=this.calculateElapsedTime();this.progress="",this.showSnackBar(`Search complete in ${R} seconds`),this.searchResultID.emit(parseInt(j.id));break;case"in_progress":this.progress=`Current progress: ${j.current_progress}/${j.found_files}`;break;case"error":this.loading=!1,this.progress="Search error",this.showSnackBar("Search error");break}})}runSearch(){return Ke(this,null,function*(){if(this.form.invalid)return;this.loading=!0,this.progress="Current progress: search initiated",this.searchStartTime=new Date,this.elapsedTime="0.00",this.timerInterval=setInterval(()=>{this.elapsedTime=this.calculateElapsedTime().toFixed(2)},200);let e=[];if(this.projects.length>0){let t=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();if(t)for(let i of t)e.push(i.id)}if(this.form.value.searchQuery&&this.form.value.searchMode){let i=this.form.value.searchQuery.toUpperCase().split("OR").map(n=>`"${n.trim().replace(/'/g,"").replace(/"/g,"")}"`);this.web.createSearch(e,i.join(" OR "),this.web.searchSessionID,1e-9,1e-9,this.form.value.searchMode).subscribe({next:()=>{this.sb.open("Search queued","Dismiss",{duration:2e3})},error:()=>{this.loading=!1,clearInterval(this.timerInterval),this.showSnackBar("Search error")}})}})}showSnackBar(e){this.snackBar.open(e,"Close",{duration:3e3})}calculateElapsedTime(){return this.searchStartTime?(new Date().getTime()-this.searchStartTime.getTime())/1e3:0}static{this.\u0275fac=function(t){return new(t||o)(L(rt),L(Oi),L(Ze),L(Xe),L(rt))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-search"]],inputs:{projects:"projects"},outputs:{searchResultID:"searchResultID"},standalone:!0,features:[pe],decls:22,vars:2,consts:[["appearance","outlined"],[2,"display","flex","gap","20px","align-items","center",3,"ngSubmit","formGroup"],[2,"width","500px"],["matInput","","placeholder","Search Query","formControlName","searchQuery"],["formControlName","searchMode"],["value","pi"],["value","gene"],["mat-icon-button","","color","primary","type","submit"],["mode","indeterminate"]],template:function(t,i){t&1&&(p(0,"mat-card",0)(1,"mat-card-content")(2,"form",1),O("ngSubmit",function(){return i.runSearch()}),p(3,"mat-form-field",2),W(4,"input",3),f(),p(5,"mat-form-field")(6,"mat-label"),w(7,"Search Mode"),f(),p(8,"mat-select",4)(9,"mat-option",5),w(10,"Primary Ids"),f(),p(11,"mat-option",6),w(12,"Gene Names"),f()()(),p(13,"button",7)(14,"mat-icon"),w(15,"search"),f()()(),p(16,"p"),w(17," For multiple search terms separate them with "),p(18,"b"),w(19,"OR"),f(),w(20,". "),f(),q(21,ur,5,2),f()()),t&2&&(v(2),I("formGroup",i.form),v(19),J(i.loading?21:-1))},dependencies:[tt,dt,lt,Je,Ve,ct,wt,St,et,yt,qe,Jt,Kt,Yt,bn,jt,Sn]})}}return o})();var gr=Fo(sr());yo.plotlyjs=gr;var Pn=(()=>{class o{set searchTerm(e){e?this._searchTerm=e:this._searchTerm=""}get searchTerm(){return this._searchTerm}set renameCondition(e){e?this._renameCondition=e:this._renameCondition={}}get renameCondition(){return this._renameCondition}set data(e){this._data=e,this.graphLayout.title=e?.analysis_group?.name||"",this.graphLayout.yaxis.title=this.searchTerm||"",this.conditionA=e?.condition_A||"",this.conditionB=e?.condition_B||"",this.drawGraph()}get data(){return this._data}set expanded(e){this._expanded=e,this.data&&this.drawGraph()}get expanded(){return this._expanded}set colorMap(e){e&&(this._colorMap=e,this.data&&e&&this.drawGraph())}get colorMap(){return this._colorMap}constructor(e,t){this.graph=e,this.accounts=t,this._data=null,this._renameCondition={},this._searchTerm="",this._expanded=!1,this.graphData=[],this.graphLayout={title:"",height:400,margin:{l:150,r:100,b:100,t:100},yaxis:{title:this.searchTerm,tickfont:{size:14}}},this.conditionA="",this.conditionB="",this.valueA=[],this.valueB=[],this.barSize=50,this.revision=0,this._colorMap={},this.currentColor=0,this.graph.redrawTrigger.subscribe(()=>{this.drawGraph()})}drawGraph(){let e=this.renameCondition[this.conditionA];e||(e=this.conditionA);let t=this.renameCondition[this.conditionB];t||(t=this.conditionB);let i=document.getElementsByTagName("body")[0],u=window.getComputedStyle(i).backgroundColor;this.accounts.userAccount.darkMode?(this.graphLayout.plot_bgcolor=u,this.graphLayout.paper_bgcolor=u,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white"):(this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14});let j=0;if(this.data&&this.data.condition_A&&this.data.condition_B&&this.data.searched_data&&!this.expanded){this.conditionA=this.data.condition_A||"",this.conditionB=this.data.condition_B||"",this.valueA=this.data.searched_data.filter(he=>he.Condition===this.conditionA).map(he=>he.Value),this.valueB=this.data.searched_data.filter(he=>he.Condition===this.conditionB).map(he=>he.Value);let R=this.calculateMean(this.valueA),N=this.calculateMean(this.valueB);this.colorMap[this.conditionA]||(this.colorMap[this.conditionA]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let X={x:[e],y:[R],type:"bar",mode:"markers",name:e,error_y:{type:"data",array:[this.calculateWhisker(this.valueA)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionA]},showlegend:!1},ce=this.drawTransparentBoxPlot(this.valueA,e);this.colorMap[this.conditionB]||(this.colorMap[this.conditionB]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let Z={x:[t],y:[N],type:"bar",mode:"markers",name:t,error_y:{type:"data",array:[this.calculateWhisker(this.valueB)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionB]},showlegend:!1},ee=this.drawTransparentBoxPlot(this.valueB,t);j=2,this.graphData=[X,ce,Z,ee]}else if(this.data&&(this.expanded||this.data.condition_A==""||this.data.condition_B=="")){let R=Array.from(new Set(this.data.searched_data.map(ee=>ee.Condition))),N=R.map(ee=>{let he=this.data.searched_data.filter(le=>le.Condition===ee).map(le=>le.Value);return this.calculateMean(he)}),X=R.map(ee=>{let he=this.data.searched_data.filter(le=>le.Condition===ee).map(le=>le.Value);return this.calculateWhisker(he)}),ce=R.map((ee,he)=>{this.colorMap[ee]||(this.colorMap[ee]=this.graph.defaultColorList[this.currentColor],this.currentColor++,this.currentColor>=this.graph.defaultColorList.length&&(this.currentColor=0));let le=this.renameCondition[ee];return le||(le=ee),{x:[le],y:[N[he]],type:"bar",mode:"markers",name:le,error_y:{type:"data",array:[X[he]],visible:!0},line:{color:"black"},marker:{color:this.colorMap[ee]},showlegend:!1}}),Z=R.map((ee,he)=>{let le=this.renameCondition[ee];le||(le=ee);let Fe=this.data.searched_data.filter(Ie=>Ie.Condition===ee).map(Ie=>Ie.Value);return this.drawTransparentBoxPlot(Fe,le)});j=R.length,this.graphData=[...ce,...Z]}console.log(this.colorMap),this.graphLayout.width=this.graphLayout.margin.l+this.graphLayout.margin.r+this.barSize*j,this.revision++,console.log(this.graphData)}calculateMean(e){return e.reduce((i,n)=>i+n,0)/e.length}calculateWhisker(e){let t=this.calculateMean(e),i=e.reduce((n,u)=>n+Math.pow(u-t,2),0)/e.length;return Math.sqrt(i)}drawTransparentBoxPlot(e,t){return{x:t,y:e.filter(i=>!isNaN(i)),type:"box",boxpoints:"all",pointpos:0,jitter:.3,fillcolor:"rgba(255,255,255,0)",line:{color:"rgba(255,255,255,0)"},hoveron:"points",marker:{color:"#654949",opacity:.8},name:t,showlegend:!1}}static{this.\u0275fac=function(t){return new(t||o)(L(Xi),L(pt))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-bar-chart"]],inputs:{searchTerm:"searchTerm",renameCondition:"renameCondition",data:"data",expanded:"expanded",colorMap:"colorMap"},standalone:!0,features:[pe],decls:1,vars:4,consts:[[3,"data","layout","revision","updateOnLayoutChange"]],template:function(t,i){t&1&&W(0,"plotly-plot",0),t&2&&I("data",i.graphData)("layout",i.graphLayout)("revision",i.revision)("updateOnLayoutChange",!0)},dependencies:[yo,jn]})}}return o})();var _r=(o,a)=>a.id;function Cr(o,a){if(o&1){let e=Y();p(0,"div",3)(1,"mat-slide-toggle",8),O("change",function(){F(e);let i=b(2);return V(i.expanded=!i.expanded)}),w(2," Expand Bar Chart "),f(),p(3,"mat-slide-toggle",8),O("change",function(){F(e);let i=b(2);return V(i.viewDifferentialAnalysis=!i.viewDifferentialAnalysis)}),w(4," View Differential Analysis Stats "),f()()}o&2&&(v(),I("color","primary"),v(2),I("color","primary"))}function vr(o,a){if(o&1&&(p(0,"div"),W(1,"app-bar-chart",11),f()),o&2){let e=b().$implicit,t=b(3);v(),I("searchTerm",e.gene_name)("expanded",t.expanded)("renameCondition",t.renameCondition)("colorMap",t.colorMap)("data",e)}}function br(o,a){o&1&&(p(0,"div")(1,"p"),w(2,"No data found for this search"),f()())}function xr(o,a){if(o&1&&(p(0,"div",9),q(1,vr,2,5,"div")(2,br,3,0,"div"),p(3,"button",10)(4,"mat-icon"),w(5,"drag_handle"),f()()()),o&2){let e=a.$implicit;v(),J(e.searched_data.length>0?1:2)}}function yr(o,a){if(o&1&&fe(0,xr,6,1,"div",9,_r),o&2){let e=b(2);ge(e.searchResults)}}function kr(o,a){o&1&&(p(0,"p"),w(1,"No search results found in this project"),f())}function wr(o,a){o&1&&(p(0,"th",24),w(1," Primary ID "),f())}function Sr(o,a){if(o&1&&(p(0,"td",25),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e.primary_id," ")}}function Mr(o,a){o&1&&(p(0,"th",24),w(1," UniProt ID "),f())}function jr(o,a){if(o&1&&(p(0,"td",25),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e.uniprot_id," ")}}function Tr(o,a){o&1&&(p(0,"th",24),w(1," Gene Names "),f())}function Er(o,a){if(o&1&&(p(0,"td",25),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e.gene_name," ")}}function Dr(o,a){o&1&&(p(0,"th",24),w(1," log2FC "),f())}function Ar(o,a){if(o&1&&(p(0,"td",25),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e.log2_fc," ")}}function Pr(o,a){o&1&&(p(0,"th",24),w(1," -log10(p) "),f())}function Or(o,a){if(o&1&&(p(0,"td",25),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e.log10_p," ")}}function Ir(o,a){o&1&&(p(0,"th",24),w(1," Condition A "),f())}function Fr(o,a){if(o&1&&w(0),o&2){let e=b().$implicit,t=b(3);me(" ",t.renameCondition[e.condition_A]," ")}}function Vr(o,a){if(o&1&&w(0),o&2){let e=b().$implicit;me(" ",e.condition_A," ")}}function Rr(o,a){if(o&1&&(p(0,"td",25),q(1,Fr,1,1)(2,Vr,1,1),f()),o&2){let e=b(3);v(),J(e.renameCondition?1:2)}}function Br(o,a){o&1&&(p(0,"th",24),w(1," Condition B "),f())}function Lr(o,a){if(o&1&&w(0),o&2){let e=b().$implicit,t=b(3);me(" ",t.renameCondition[e.condition_B]," ")}}function Gr(o,a){if(o&1&&w(0),o&2){let e=b().$implicit;me(" ",e.condition_B," ")}}function zr(o,a){if(o&1&&(p(0,"td",25),q(1,Lr,1,1)(2,Gr,1,1),f()),o&2){let e=b(3);v(),J(e.renameCondition?1:2)}}function Nr(o,a){o&1&&(p(0,"th",24),w(1," Comparison "),f())}function qr(o,a){if(o&1&&(p(0,"td",25),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e.comparison_label," ")}}function Hr(o,a){o&1&&W(0,"tr",26)}function Qr(o,a){o&1&&W(0,"tr",27)}function $r(o,a){if(o&1&&(p(0,"table",5),Ae(1,12),q(2,wr,2,0,"th",13)(3,Sr,2,1,"td",14),Pe(),Ae(4,15),q(5,Mr,2,0,"th",13)(6,jr,2,1,"td",14),Pe(),Ae(7,16),q(8,Tr,2,0,"th",13)(9,Er,2,1,"td",14),Pe(),Ae(10,17),q(11,Dr,2,0,"th",13)(12,Ar,2,1,"td",14),Pe(),Ae(13,18),q(14,Pr,2,0,"th",13)(15,Or,2,1,"td",14),Pe(),Ae(16,19),q(17,Ir,2,0,"th",13)(18,Rr,3,1,"td",14),Pe(),Ae(19,20),q(20,Br,2,0,"th",13)(21,zr,3,1,"td",14),Pe(),Ae(22,21),q(23,Nr,2,0,"th",13)(24,qr,2,1,"td",14),Pe(),q(25,Hr,1,0,"tr",22)(26,Qr,1,0,"tr",23),f()),o&2){let e=b(2);I("dataSource",e.searchResults),v(25),I("matHeaderRowDef",e.searchResultDisplayColumns),v(),I("matRowDefColumns",e.searchResultDisplayColumns)}}function Wr(o,a){if(o&1){let e=Y();p(0,"button",28),O("click",function(){F(e);let i=b(2);return V(i.deleteProject.emit(i.project))}),p(1,"mat-icon"),w(2,"delete"),f()()}if(o&2){let e=b(2);uo("matTooltip","Delete Project ",e.project.name," from collate")}}function Xr(o,a){if(o&1&&(p(0,"a",7)(1,"mat-icon"),w(2,"link"),f()()),o&2){let e=b(2);uo("href","/#/project/",e.project.id,"",Ho)}}function Ur(o,a){if(o&1){let e=Y();p(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"span",2),w(4),f()(),p(5,"mat-card-subtitle"),w(6),f()(),p(7,"mat-card-content"),q(8,Cr,5,2,"div",3),p(9,"div",4),O("cdkDropListDropped",function(i){F(e);let n=b();return V(n.drop(i))}),q(10,yr,2,0)(11,kr,2,0,"p"),f(),q(12,$r,27,3,"table",5),f(),p(13,"mat-card-actions"),q(14,Wr,3,2,"button",6)(15,Xr,3,2,"a",7),f()()}if(o&2){let e=b();v(4),ye(e.project.name),v(2),ye(e.project.description),v(2),J(e.searchResults.length>0?8:-1),v(2),J(e.searchResults.length>0?10:11),v(2),J(e.searchResults.length>0&&e.viewDifferentialAnalysis?12:-1),v(2),J(e.accounts.loggedIn?14:-1),v(),J(e.project?15:-1)}}var On=(()=>{class o{set project(e){this._project=e}get project(){return this._project}set searchResults(e){this._searchResults=e,console.log(e)}get searchResults(){return this._searchResults}constructor(e){this.accounts=e,this._project=null,this.searchTerm="",this._searchResults=[],this.colorMap={},this.renameCondition={},this.deleteProject=new xe,this.searchResultsChange=new xe,this.searchResultDisplayColumns=["primary_id","uniprot_id","gene_name","condition_A","condition_B","log2_fc","log10_p","comparison_label"],this.expanded=!1,this.viewDifferentialAnalysis=!1}drop(e){let i=this._searchResults[e.previousIndex].analysis_group.id,n=this._searchResults.filter(u=>u.analysis_group.id===i);this._searchResults=this._searchResults.filter(u=>u.analysis_group.id!==i),this._searchResults.splice(e.currentIndex,0,...n),this.searchResultsChange.emit(this._searchResults)}static{this.\u0275fac=function(t){return new(t||o)(L(pt))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-project-card-viewer"]],inputs:{searchTerm:"searchTerm",project:"project",searchResults:"searchResults",colorMap:"colorMap",renameCondition:"renameCondition"},outputs:{deleteProject:"deleteProject",searchResultsChange:"searchResultsChange"},standalone:!0,features:[pe],decls:1,vars:1,consts:[["appearance","outlined"],["cdkDragHandle",""],[2,"color","#ba0000"],[2,"display","flex","flex-direction","column","gap","20px"],["cdkDropList","",2,"display","flex","gap","20px","flex-wrap","wrap","justify-content","center",3,"cdkDropListDropped"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["mat-icon-button","","color","primary",3,"matTooltip"],["target","_blank",3,"href"],[3,"change","color"],["cdkDrag",""],["mat-icon-button","","cdkDragHandle",""],[3,"searchTerm","expanded","renameCondition","colorMap","data"],["matColumnDef","primary_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uniprot_id"],["matColumnDef","gene_name"],["matColumnDef","log2_fc"],["matColumnDef","log10_p"],["matColumnDef","condition_A"],["matColumnDef","condition_B"],["matColumnDef","comparison_label"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-icon-button","","color","primary",3,"click","matTooltip"]],template:function(t,i){t&1&&q(0,Ur,16,7,"mat-card",0),t&2&&J(i.project?0:-1)},dependencies:[cn,sn,dn,Kt,Jt,Ji,Pn,ln,qe,yt,Et,Dt,zi,Ri,Li,Gi,Hi,Ni,Qi,qi,Vi,Bi,Tn,Mi]})}}return o})();var Yr=(o,a)=>a.id,Kr=()=>[];function Jr(o,a){if(o&1){let e=Y();p(0,"app-project-card-viewer",3),O("deleteProject",function(i){F(e);let n=b(2);return V(n.deleteProject.emit(i))}),f()}if(o&2){let e=b().$implicit,t=b();I("searchTerm",t.searchTerm)("colorMap",t.projectConditionColorMap==null?null:t.projectConditionColorMap[e.id])("project",e)("searchResults",t.filteredResults[e.id]||_i(5,Kr))("renameCondition",t.renameCondition==null?null:t.renameCondition[e.id])}}function Zr(o,a){if(o&1&&(p(0,"div",1),q(1,Jr,1,6,"app-project-card-viewer",2),f()),o&2){let e=a.$implicit;v(),J(e&&e.id?1:-1)}}var io=(()=>{class o{constructor(){this._searchTerm="",this.projects=[],this.filteredResults={},this.projectConditionColorMap={},this.renameCondition={},this.projectOrderChanged=new xe,this.deleteProject=new xe}set searchTerm(e){e?this._searchTerm=e:this._searchTerm=""}get searchTerm(){return this._searchTerm}drop(e){Ht(this.projects,e.previousIndex,e.currentIndex),this.projectOrderChanged.emit(this.projects)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-project-list"]],inputs:{searchTerm:"searchTerm",projects:"projects",filteredResults:"filteredResults",projectConditionColorMap:"projectConditionColorMap",renameCondition:"renameCondition"},outputs:{projectOrderChanged:"projectOrderChanged",deleteProject:"deleteProject"},standalone:!0,features:[pe],decls:3,vars:0,consts:[["cdkDropList","",1,"project-list",3,"cdkDropListDropped"],[2,"margin","20px"],["cdkDrag","",3,"searchTerm","colorMap","project","searchResults","renameCondition"],["cdkDrag","",3,"deleteProject","searchTerm","colorMap","project","searchResults","renameCondition"]],template:function(t,i){t&1&&(p(0,"div",0),O("cdkDropListDropped",function(u){return i.drop(u)}),fe(1,Zr,2,1,"div",1,Yr),f()),t&2&&(v(),ge(i.projects))},dependencies:[Dt,On,Et]})}}return o})();var In=(o,a)=>a.id;function ea(o,a){if(o&1){let e=Y();p(0,"mat-chip",4),O("removed",function(){let i=F(e).$implicit,n=b(2);return V(n.removeTag(i))}),w(1),p(2,"mat-icon",5),w(3,"cancel"),f()()}if(o&2){let e=a.$implicit;v(),me(" ",e.name," ")}}function ta(o,a){if(o&1){let e=Y();p(0,"mat-chip-set",2),O("cdkDropListDropped",function(i){F(e);let n=b();return V(n.drop(i))}),fe(1,ea,4,1,"mat-chip",3,In),f()}if(o&2){let e=b();v(),ge(e.collageTags)}}function ia(o,a){if(o&1&&(p(0,"mat-chip"),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e.name," ")}}function oa(o,a){if(o&1&&(p(0,"mat-chip-set"),fe(1,ia,2,1,"mat-chip",null,In),f()),o&2){let e=b();v(),ge(e.collageTags)}}var oo=(()=>{class o{constructor(e){this.accounts=e,this.collageTags=[],this.collageTagsChange=new xe}removeTag(e){this.collageTags=this.collageTags.filter(t=>t!==e),this.collageTagsChange.emit(this.collageTags)}drop(e){Ht(this.collageTags,e.previousIndex,e.currentIndex),this.collageTagsChange.emit(this.collageTags)}static{this.\u0275fac=function(t){return new(t||o)(L(pt))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-tags"]],inputs:{collageTags:"collageTags"},outputs:{collageTagsChange:"collageTagsChange"},standalone:!0,features:[pe],decls:4,vars:1,consts:[[2,"display","flex","justify-content","center"],["cdkDropList",""],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["cdkDrag","",3,"removed"],["matChipRemove",""]],template:function(t,i){t&1&&(p(0,"div",0),q(1,ta,3,0,"mat-chip-set",1)(2,oa,3,0,"mat-chip-set"),f(),W(3,"div",0)),t&2&&(v(),J(i.accounts.loggedIn?1:2))},dependencies:[Dt,Di,Ti,qe,Ei,Et]})}}return o})();var jo=Fo(Fn(),1);var na=["*"],ra=o=>{switch(o){case"default":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#202020"},backgroundOptions:{color:"#ffffff"}};case"ocean":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"dots",gradient:{type:"radial",colorStops:[{offset:0,color:"#36CDA5"},{offset:1,color:"#1582AE"},{offset:2,color:"#0277BD"}]}},backgroundOptions:{color:"#ffffff"},cornersSquareOptions:{type:"square"}};case"sunflower":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"dots",gradient:{type:"radial",colorStops:[{offset:0,color:"#BB8412"},{offset:1,color:"#4D762E"},{offset:2,color:"#2F702F"}]}},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#006B3B",type:"dot"},cornersSquareOptions:{color:"#006B3B",type:"extra-rounded"}};case"luxury":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#E29C0F"},{offset:1,color:"#913C0C"},{offset:2,color:"#732E0C"}]}},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#732E0C",type:"dot"},cornersSquareOptions:{color:"#732E0C",type:"extra-rounded"}};case"bitcoin":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#3a3a3a",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#ff9900"},cornersSquareOptions:{type:"extra-rounded"}};case"starbucks":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#3a3a3a",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#00643C",type:"dot"},cornersSquareOptions:{color:"#00643C",type:"extra-rounded"}};case"angular":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#c3002f",type:"dots"},backgroundOptions:{color:"#ffffff"}};case"facebook":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#4D72A9",type:"dots"},backgroundOptions:{color:"#ffffff"}};case"beans":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#416B2C",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#60A541",type:"dot"},cornersSquareOptions:{type:"extra-rounded"}};case"green":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#006B3B",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#006B3B",type:"dot"},cornersSquareOptions:{color:"#006B3B",type:"extra-rounded"}};case"sky":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2c7597",type:"rounded"},backgroundOptions:{color:"#ffffff"}};case"mosaic":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"rounded",gradient:{rotation:190,type:"linear",colorStops:[{offset:0,color:"#0277BD"},{offset:1,color:"#943A40"},{offset:2,color:"#A13535"}]}},backgroundOptions:{color:"#ffffff"}};case"coffee":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#5E4F39",type:"dots"},backgroundOptions:{color:"#FAEDE7"}};case"vintage":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2D7363",type:"extra-rounded"},backgroundOptions:{color:"#E7E5C5"},cornersDotOptions:{color:"#BE8C49"},cornersSquareOptions:{color:"#2D7363"}};case"stamp":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2a3c16",type:"square"},backgroundOptions:{color:"#9cc66e"},cornersDotOptions:{color:"#4c692c"},cornersSquareOptions:{color:"#2a3c16"}};case"chess":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#F4EAA5",type:"dots"},backgroundOptions:{color:"#494B49"}};case"jungle":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#84b931"},{offset:1,color:"#537234"},{offset:2,color:"#537234"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#84b931"},{offset:1,color:"#537234"},{offset:2,color:"#537234"}]}}};case"arabic":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#393939"},{offset:1,color:"#393939"},{offset:2,color:"#393939"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#393939"},{offset:1,color:"#72a28b"},{offset:2,color:"#72a28b"}]}}};case"tea":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"extra-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#72b0b4"},{offset:1,color:"#035558"},{offset:2,color:"#035558"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#72b0b4"},{offset:1,color:"#035558"},{offset:2,color:"#035558"}]}}};case"grape":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#7076ae"},{offset:1,color:"#2a3240"},{offset:2,color:"#2a3240"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#7b7cb5"},{offset:1,color:"#2a3240"},{offset:2,color:"#2a3240"}]}}};default:return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#202020"},backgroundOptions:{color:"#ffffff"}}}};function Vn(o,a){let e=new ri;if(!o||!a)return e.error("Container or Config not available!"),e.complete(),e;let t=document.createElement("div"),i=()=>{if(o?.frameOptions)return!1;{let ne=()=>{let ve=o&&JSON.parse(JSON.stringify(o));return Object.assign({data:window.unescape(encodeURIComponent(ve?.data??""))},ve)};for(;a.firstChild;)a.removeChild(a.lastChild);return new jo.default(ne()).append(a),!0}},n=o?.frameOptions?.style??"F_020",u=o?.frameOptions?.height??300,j=o?.frameOptions?.width??300,R=o?.frameOptions?.x??50,N=o?.frameOptions?.y??50,X=()=>{let ne=fetch(`https://cdn.jsdelivr.net/gh/id1945/ngx-qrcode-styling/svg/1.2.9/${n}.svg`,{method:"GET"});return new Promise((ue,ve)=>{ne.then(de=>de.text()).then(de=>{de!=="404: Not Found"&&ce(de),ue(de)}).catch(de=>{console.error(de),ve(de)})})},ce=ne=>{let ve=new DOMParser().parseFromString(ne,"image/svg+xml");if(ve){let de=ve.documentElement.children[n+"_svg"];if(!de)return;let st=de.getElementsByClassName("frame-text"),it=de.getElementsByClassName("frame-content"),P=de.getElementsByClassName("frame-container");o?.frameOptions?.background&&de.setAttribute("style",`background: ${o?.frameOptions?.background};${de?.getAttribute("style")}`);let A=(k,x)=>{if(k)for(let T in x)["x","y","transform"].includes(T)?k.setAttribute(T,x&&x[T]):["textContent"].includes(T)?k[T]=x&&x[T]:k.style[T]=x&&x[T]},E=k=>{let T=document.createElementNS("http://www.w3.org/2000/svg","text");A(T,k),de.appendChild(T)};o?.frameOptions?.texts&&[...o.frameOptions.texts].forEach((k,x)=>{let T=[...st][x];T?A(T,k):E(k)}),o?.frameOptions?.containers&&[...P].forEach((k,x)=>{A(k,o?.frameOptions?.containers?.[x])}),o?.frameOptions?.contents&&[...it].forEach((k,x)=>{A(k,o?.frameOptions?.contents?.[x])}),t.appendChild(ve.documentElement)}},Z=()=>{let ne=t.querySelector(".ngx_qrcode_styling_after");if(ne&&o?.zIndex===1)return ne?.setAttribute("transform",`translate(${R},${N})`),ne;let ue=t.querySelector(".ngx_qrcode_styling_before");return ue?.setAttribute("transform",`translate(${R},${N})`),ue},ee=ne=>{ne&&o?.rotate&&ne?.childNodes?.[0]?.childNodes?.forEach(ue=>{ue.nodeName==="rect"&&(ue.style.transformOrigin="50% 50%",ue.style.transform=`rotate(${o?.rotate??0}deg)`)}),ne&&o?.scale&&ne?.childNodes?.[0]?.childNodes?.forEach(ue=>{ue.nodeName==="rect"&&(ue.style.scale=o?.scale??0)})},he=ne=>{let ue=()=>{let de=o&&JSON.parse(JSON.stringify(o));return de=Me(be({},de),{type:"svg",data:window.unescape(encodeURIComponent(de?.data??""))}),delete de.frameOptions,delete de.template,de};for(;a?.firstChild;)a.removeChild(a.lastChild);let ve=new jo.default(ue());return ve?._svgDrawingPromise?.then(()=>{ve.append(ne)}).catch(de=>console.error(de))},le=()=>o?.type==="svg"?(Ot(),a.appendChild(t),!0):!1,Fe=()=>{let ne=document.createElement("canvas");return ne.height=u,ne.width=j,a.appendChild(ne),ne},Ie=ne=>{let ue="data:image/svg+xml;base64,",ve=ne&&new XMLSerializer().serializeToString(ne);return ue+=ve&&btoa(unescape(encodeURIComponent(ve)))},Ot=()=>{let ne=t.querySelector(`#${n}_svg`);return ne&&ne.setAttribute("height",`${u}px`),ne&&ne.setAttribute("width",`${j}px`),ne},mt=ne=>{let ue=ne.split(";base64,"),ve=ue[0].split(":")[1],de=window.atob(ue[1]),st=new Uint8Array(de.length);for(let it=0;it<de.length;++it)st[it]=de.charCodeAt(it);return new Blob([st],{type:ve})},$t=()=>{let ne=new Image,ue=Fe().getContext("2d");ne.onload=function(){ue&&ue.drawImage(ne,0,0)};let ve=mt(Ie(Ot())),de=URL.createObjectURL(ve);ne.src=de};return function(){return Ke(this,null,function*(){if(i()){e.next({config:o,container:a}),e.complete();return}else{yield X();let ne=Z();yield he(ne),ee(ne),le()?(e.next({config:o,container:a}),e.complete()):($t(),e.next({config:o,container:a}),e.complete())}})}(),e}var Mo=o=>{let a=o&&JSON.parse(JSON.stringify(o));return o?.template?be(be({},ra(o.template.toLocaleLowerCase())),a):a},aa=(o,a)=>Ke(void 0,null,function*(){let e=o&&JSON.parse(JSON.stringify(o)),t=be(be({},e),a),i=["frameOptions","qrOptions","imageOptions","dotsOptions","cornersSquareOptions","cornersDotOptions","backgroundOptions"];try{for(var n=Vo(i),u,j,R;u=!(j=yield n.next()).done;u=!1){let N=j.value;if(N in a){let X={[N]:be(be({},e[N]),a[N])};t=be(be({},t),X)}}}catch{R=[j]}finally{try{u&&(j=n.return)&&(yield j.call(n))}finally{if(R)throw R[0]}}return t}),Rn=(()=>{class o{create(e,t){return Vn(Mo(e),t)}update(e,t,i){let n=new ri;return function(){return Ke(this,null,function*(){let u=yield aa(Mo(e),Mo(t));Vn(u,i).subscribe(j=>{n.next(j),n.complete()})})}(),n}download(e,t="",i=0){let n=new ri,u=N=>{t||(t=`ngx_qrcode_styling_${Date.now()}.${N}`)},j=N=>{let X=document.createElement("a");X.download=t,X.href=N,X.click(),X.remove()},R=N=>{N?(j(N),n.next({fileName:t,container:e,url:N}),n.complete()):(n.error("Container not found!"),n.complete())};return setTimeout(()=>{let N=e?.querySelector("canvas");if(N){u("png");let X=t?t?.split(".")?.slice(-1)?.toString():"png";N.toBlob(ce=>R(URL.createObjectURL(ce)),"image/"+X)}else{let X=e?.querySelector("svg");if(X){u("svg");let ce=X.outerHTML,Z=new Blob([ce],{type:"image/svg+xml;charset=utf-8"}),ee=URL.createObjectURL(Z);R(ee)}else R("")}},i),n}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=ti({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Bn=(()=>{class o{constructor(e,t){this.canvas=e,this.service=t,this.template="default",this.scale=0,this.rotate=0,this.zIndex=2}ngOnInit(){this.canvas&&(this.template&&(this.config=Me(be({},this.config),{template:this.template})),this.type&&(this.config=Me(be({},this.config),{type:this.type})),this.shape&&(this.config=Me(be({},this.config),{shape:this.shape})),this.width&&(this.config=Me(be({},this.config),{width:this.width})),this.height&&(this.config=Me(be({},this.config),{height:this.height})),this.margin&&(this.config=Me(be({},this.config),{margin:this.margin})),this.data&&(this.config=Me(be({},this.config),{data:this.data})),this.image&&(this.config=Me(be({},this.config),{image:this.image})),this.scale&&(this.config=Me(be({},this.config),{scale:this.scale})),this.rotate&&(this.config=Me(be({},this.config),{rotate:this.rotate})),this.zIndex&&(this.config=Me(be({},this.config),{zIndex:this.zIndex})),this.frameOptions&&(this.config=Me(be({},this.config),{frameOptions:this.frameOptions})),this.qrOptions&&(this.config=Me(be({},this.config),{qrOptions:this.qrOptions})),this.imageOptions&&(this.config=Me(be({},this.config),{imageOptions:this.imageOptions})),this.dotsOptions&&(this.config=Me(be({},this.config),{dotsOptions:this.dotsOptions})),this.cornersSquareOptions&&(this.config=Me(be({},this.config),{cornersSquareOptions:this.cornersSquareOptions})),this.cornersDotOptions&&(this.config=Me(be({},this.config),{cornersDotOptions:this.cornersDotOptions})),this.backgroundOptions&&(this.config=Me(be({},this.config),{backgroundOptions:this.backgroundOptions})),this.create(this.config))}create(e){return this.service.create(e,this.canvas.nativeElement)}update(e,t){return this.service.update(e,t,this.canvas.nativeElement)}download(e,t=0){return this.service.download(this.canvas.nativeElement,e,t)}static{this.\u0275fac=function(t){return new(t||o)(L(zt),L(Rn))}}static{this.\u0275cmp=ae({type:o,selectors:[["ngx-qrcode-styling"]],inputs:{config:"config",template:"template",type:"type",shape:"shape",width:"width",height:"height",margin:"margin",data:"data",image:"image",scale:"scale",rotate:"rotate",zIndex:"zIndex",frameOptions:"frameOptions",qrOptions:"qrOptions",imageOptions:"imageOptions",dotsOptions:"dotsOptions",cornersSquareOptions:"cornersSquareOptions",cornersDotOptions:"cornersDotOptions",backgroundOptions:"backgroundOptions"},ngContentSelectors:na,decls:1,vars:0,template:function(t,i){t&1&&(ui(),fi(0))},encapsulation:2})}}return o})(),Ln=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=Gt({type:o})}static{this.\u0275inj=Lt({providers:[Rn]})}}return o})();function ca(o,a){if(o&1&&(p(0,"div",2),W(1,"ngx-qrcode-styling",5),f()),o&2){let e=b();v(),I("config",e.config)}}var Gn=(()=>{class o{set url(e){this.config.data=e,this._url=e}constructor(e){this.dialogRef=e,this._url="",this.config={width:250,height:250,data:this.url,margin:5,dotsOptions:{color:"#780101",type:"dots"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:0}}}close(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||o)(L(He))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-qr-code-dialog"]],inputs:{url:"url"},standalone:!0,features:[pe],decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","justify-content","center","align-items","center"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"config"]],template:function(t,i){t&1&&(p(0,"h1",0),w(1,"Collate QR Code"),f(),p(2,"div",1),q(3,ca,2,1,"div",2),f(),p(4,"div",3)(5,"button",4),O("click",function(){return i.close()}),w(6,"Close"),f()()),t&2&&(v(3),J(i.config.data&&i.config.data!==""?3:-1))},dependencies:[Qe,$e,Ln,Bn,We,Oe]})}}return o})();var la=["input"],da=["label"],pa=["*"],ha=new Lo("mat-checkbox-default-options",{providedIn:"root",factory:Nn});function Nn(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var Re=function(o){return o[o.Init=0]="Init",o[o.Checked=1]="Checked",o[o.Unchecked=2]="Unchecked",o[o.Indeterminate=3]="Indeterminate",o}(Re||{}),ma={provide:ki,useExisting:li(()=>ni),multi:!0},To=class{},ua=0,zn=Nn(),ni=(()=>{class o{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let t=new To;return t.source=this,t.checked=e,t}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,t,i,n,u,j){this._elementRef=e,this._changeDetectorRef=t,this._ngZone=i,this._animationMode=u,this._options=j,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new xe,this.indeterminateChange=new xe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=Re.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||zn,this.color=this._options.color||zn.color,this.tabIndex=parseInt(n)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++ua}`,this.disabledInteractive=j?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){let t=e!=this._indeterminate;this._indeterminate=e,t&&(this._indeterminate?this._transitionCheckState(Re.Indeterminate):this._transitionCheckState(this.checked?Re.Checked:Re.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let t=this._currentCheckState,i=this._getAnimationTargetElement();if(!(t===e||!i)&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);let n=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(n)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?Re.Checked:Re.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,t){if(this._animationMode==="NoopAnimations")return"";switch(e){case Re.Init:if(t===Re.Checked)return this._animationClasses.uncheckedToChecked;if(t==Re.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case Re.Unchecked:return t===Re.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case Re.Checked:return t===Re.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case Re.Indeterminate:return t===Re.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static{this.\u0275fac=function(t){return new(t||o)(L(zt),L(Xt),L(No),Go("tabindex"),L(qo,8),L(ha,8))}}static{this.\u0275cmp=ae({type:o,selectors:[["mat-checkbox"]],viewQuery:function(t,i){if(t&1&&(vt(la,5),vt(da,5),vt(_o,5)),t&2){let n;bt(n=xt())&&(i._inputElement=n.first),bt(n=xt())&&(i._labelElement=n.first),bt(n=xt())&&(i.ripple=n.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(t,i){t&2&&(Yo("id",i.id),ii("tabindex",null)("aria-label",null)("aria-labelledby",null),Uo(i.color?"mat-"+i.color:"mat-accent"),Nt("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked)("mat-mdc-checkbox-disabled-interactive",i.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],id:"id",required:[2,"required","required",qt],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",qt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:en(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",qt],checked:[2,"checked","checked",qt],disabled:[2,"disabled","disabled",qt],indeterminate:[2,"indeterminate","indeterminate",qt]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[gi([ma,{provide:hn,useExisting:o,multi:!0}]),Wo,hi,pe],ngContentSelectors:pa,decls:15,vars:20,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(t,i){if(t&1){let n=Y();ui(),p(0,"div",3),O("click",function(j){return F(n),V(i._preventBubblingFromLabel(j))}),p(1,"div",4,0)(3,"div",5),O("click",function(){return F(n),V(i._onTouchTargetClick())}),f(),p(4,"input",6,1),O("blur",function(){return F(n),V(i._onBlur())})("click",function(){return F(n),V(i._onInputClick())})("change",function(j){return F(n),V(i._onInteractionEvent(j))}),f(),W(6,"div",7),p(7,"div",8),Wt(),p(8,"svg",9),W(9,"path",10),f(),mi(),W(10,"div",11),f(),W(11,"div",12),f(),p(12,"label",13,2),fi(14),f()()}if(t&2){let n=Ye(2);I("labelPosition",i.labelPosition),v(4),Nt("mdc-checkbox--selected",i.checked),I("checked",i.checked)("indeterminate",i.indeterminate)("disabled",i.disabled&&!i.disabledInteractive)("id",i.inputId)("required",i.required)("tabIndex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex),ii("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-checked",i.indeterminate?"mixed":null)("aria-disabled",i.disabled&&i.disabledInteractive?!0:null)("name",i.name)("value",i.value),v(7),I("matRippleTrigger",n)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),v(),I("for",i.inputId)}},dependencies:[_o,an],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.cdk-high-contrast-active .mdc-checkbox--disabled{opacity:.5}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-app-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-app-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.cdk-high-contrast-active .mdc-checkbox--disabled .mdc-checkbox__checkmark,.cdk-high-contrast-active .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__mixedmark{margin:0 1px}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *,.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return o})();var qn=(o,a)=>a.id,fa=()=>({standalone:!0});function ga(o,a){if(o&1){let e=Y();p(0,"mat-checkbox",6),Ne("ngModelChange",function(i){let n=F(e).$implicit,u=b(2).$implicit,j=b();return ze(j.projectAnalysisGroupVisibilityMap[u.id][n.id],i)||(j.projectAnalysisGroupVisibilityMap[u.id][n.id]=i),V(i)}),w(1),f()}if(o&2){let e=a.$implicit,t=b(2).$implicit,i=b();Ge("ngModel",i.projectAnalysisGroupVisibilityMap[t.id][e.id]),I("ngModelOptions",_i(3,fa)),v(),me(" ",e.name," ")}}function _a(o,a){if(o&1&&fe(0,ga,2,4,"mat-checkbox",5,qn),o&2){let e=b().$implicit,t=b();ge(t.projectAnalysisGroupMap[e.id])}}function Ca(o,a){if(o&1&&(p(0,"h2"),w(1),f(),q(2,_a,2,0)),o&2){let e=a.$implicit,t=b();v(),ye(e.name),v(),J(t.projectAnalysisGroupMap[e.id]?2:-1)}}var ro=(()=>{class o{set projects(e){this._projects=e}get projects(){return this._projects}set projectAnalysisGroupMap(e){this._projectAnalysisGroupMap=e}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}set projectAnalysisGroupVisibilityMap(e){this._projectAnalysisGroupVisibilityMap={};for(let t in e){this._projectAnalysisGroupVisibilityMap[t]={};for(let i in e[t])this._projectAnalysisGroupVisibilityMap[t][i]=e[t][i]}}get projectAnalysisGroupVisibilityMap(){return this._projectAnalysisGroupVisibilityMap}constructor(e){this.dialog=e,this._projects=[],this._projectAnalysisGroupMap={},this._projectAnalysisGroupVisibilityMap={}}close(){this.dialog.close()}save(){this.dialog.close(this.projectAnalysisGroupVisibilityMap)}static{this.\u0275fac=function(t){return new(t||o)(L(He))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-project-analysis-group-visibility-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap",projectAnalysisGroupVisibilityMap:"projectAnalysisGroupVisibilityMap"},standalone:!0,features:[pe],decls:11,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","20px"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"]],template:function(t,i){t&1&&(p(0,"h1",0),w(1,"Analysis Group Visibility"),f(),p(2,"div",1)(3,"form",2),fe(4,Ca,3,2,null,null,qn),f()(),p(6,"div",3)(7,"button",4),O("click",function(){return i.close()}),w(8,"Cancel"),f(),p(9,"button",4),O("click",function(){return i.save()}),w(10,"Submit"),f()()),t&2&&(v(4),ge(i.projects))},dependencies:[Qe,$e,Mt,lt,Ve,ct,kt,mn,ni,We,Oe]})}}return o})();function va(o,a){o&1&&(p(0,"button",11),w(1,"No previous searches"),f())}function ba(o,a){if(o&1){let e=Y();p(0,"button",13),O("click",function(){F(e);let i=b().$implicit,n=b(3);return V(n.restoreSearches(i.searchQuery,i.searchID))}),w(1),f()}if(o&2){let e=b().$implicit;v(),Jo("",e.searchID,". ",e.termFounds.join(","),"")}}function xa(o,a){if(o&1&&q(0,ba,2,2,"button",12),o&2){let e=a.$implicit,t=b(3);J(e.collate===t.collate.id?0:-1)}}function ya(o,a){if(o&1&&fe(0,xa,1,1,null,null,ft),o&2){let e=b(2);ge(e.pastSearches)}}function ka(o,a){if(o&1&&(p(0,"button",10)(1,"mat-icon"),w(2,"history"),f()(),p(3,"mat-menu",null,0),q(5,va,2,0,"button",11)(6,ya,2,0),f()),o&2){let e=Ye(4),t=b();I("matMenuTriggerFor",e),v(5),J(t.pastSearches.length===0?5:6)}}function wa(o,a){if(o&1){let e=Y();p(0,"button",14),O("click",function(){F(e);let i=b();return V(i.navigateToEdit())}),p(1,"mat-icon"),w(2,"edit"),f()()}}function Sa(o,a){if(o&1&&W(0,"app-collate-header",7),o&2){let e=b();I("collate",e.collate)}}function Ma(o,a){if(o&1&&(p(0,"div",15),W(1,"app-collate-tags",16),f()),o&2){let e=b(2);v(),I("collageTags",e.collate.tags)}}function ja(o,a){if(o&1&&q(0,Ma,2,1,"div",15),o&2){let e=b();J(e.collate.settings.showTags?0:-1)}}function Ta(o,a){if(o&1){let e=Y();w(0),p(1,"button",21),O("click",function(){F(e);let i=b().$implicit,n=b(2);return V(n.exportData(i))}),p(2,"mat-icon"),w(3,"download"),f()()}if(o&2){let e=b().$implicit,t=b(2);me(" ",e," "),v(),I("disabled",t.waitingForDownload)}}function Ea(o,a){o&1&&(p(0,"mat-tab"),q(1,Ta,4,2,"ng-template",20),f())}function Da(o,a){if(o&1&&W(0,"app-collate-project-list",19),o&2){let e=b(2);I("searchTerm",e.selectedSearchTerm)("renameCondition",e.collate.settings.renameSampleCondition)("projects",e.projects)("filteredResults",e.filteredResults)}}function Aa(o,a){if(o&1){let e=Y();p(0,"div",17)(1,"mat-tab-group",18),O("selectedTabChange",function(){F(e);let i=b();return V(i.filterDataBySearchTerm())}),Ne("selectedIndexChange",function(i){F(e);let n=b();return ze(n.selectedIndex,i)||(n.selectedIndex=i),V(i)}),fe(2,Ea,2,0,"mat-tab",null,ft),f()(),q(4,Da,1,4,"app-collate-project-list",19)}if(o&2){let e=b();v(),Ge("selectedIndex",e.selectedIndex),I("mat-stretch-tabs",!1),v(),ge(e.searchTerms),v(2),J(e.collate?4:-1)}}var Eo=(()=>{class o{set collateId(e){e&&this.collateService.getCollate(e).subscribe(t=>{if(this.collate=t,this.title.setTitle(`${t.title} - C|nder`),this.projects=t.projects,t.settings||(t.settings={projectOrder:[],analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},showTags:!1}),t.settings.projectOrder&&(this.projects=t.settings.projectOrder.map(i=>t.projects.find(n=>n.id===i))),!this.collate?.settings.projectAnalysisGroupVisibility){this.collate.settings.projectAnalysisGroupVisibility={};for(let i of this.projects)this.collate.settings.projectAnalysisGroupVisibility[i.id]={}}if(!this.collate?.settings.renameSampleCondition){this.collate.settings.renameSampleCondition={};for(let i of this.projects)this.collate.settings.renameSampleCondition[i.id]={},this.web.getProjectUniqueConditions(i.id).subscribe(n=>{for(let u of n)this.collate.settings.renameSampleCondition[i.id][u.Condition]=u.Condition;console.log(this.collate.settings.renameSampleCondition)})}console.log(this.projects)})}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(e){this._selectedSearchTerm=e}constructor(e,t,i,n,u,j,R,N){this.title=e,this.ws=t,this.sb=i,this.dialog=n,this.collateService=u,this.web=j,this.accounts=R,this.router=N,this.collate=null,this.projects=[],this.filteredResults={},this.searchTerms=[],this.selectedIndex=0,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this._selectedSearchTerm="",this.pastSearches=[],this.waitingForDownload=!1;let X=localStorage.getItem("cinderPastSearches");X&&(this.pastSearches=JSON.parse(X)),this.ws.searchWSConnection?.subscribe(ce=>{if(ce&&ce.type==="export_status"&&this.web.cinderInstanceID===ce.instance_id&&this.waitingForDownload)switch(ce.status){case"error":this.waitingForDownload=!1;break;case"started":this.sb.open("Export started","Dismiss",{duration:2e3});break;case"in_progress":break;case"complete":this.waitingForDownload=!1,this.sb.open("Export complete","Dismiss",{duration:2e3});let Z=`${this.web.baseURL}/api/search/download_temp_file/?token=${ce.file}`;window.open(Z,"_blank");break}})}associateAnalysisGroupsWithProjects(){return Ke(this,null,function*(){let e=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},e&&e.forEach(t=>{let i=t.project;this.projectAnalysisGroups[i]||(this.projectAnalysisGroups[i]=[]),this.projectAnalysisGroups[i].push(t),this.analysisGroupProjects[t.id]=this.projects.find(n=>n.id===i)})})}distributeSearchResults(e){return Ke(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(e.map(t=>t.search_term))),e.forEach(t=>{let i=t.analysis_group.id,n=this.analysisGroupProjects[i];n&&(this.searchResults[n.id]||(this.searchResults[n.id]=[]),this.searchResults[n.id].push(t))}),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let e={};return Object.keys(this.searchResults).forEach(t=>{e[t]=this.searchResults[t].filter(i=>i.search_term===this.selectedSearchTerm),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(i=>{let n=parseInt(i),u=this.collate?.settings.analysisGroupOrderMap[n];if(!e[n]||!u)return;let j=e[n].filter(R=>!u.includes(R.analysis_group.id));if(e[n]=e[n].filter(R=>u.includes(R.analysis_group.id)),e[n]=e[n].sort((R,N)=>u.indexOf(R.analysis_group.id)-u.indexOf(N.analysis_group.id)),e[n].concat(j),this.collate?.settings?.projectAnalysisGroupVisibility){let R=this.collate?.settings.projectAnalysisGroupVisibility[n];e[n]=e[n].filter(N=>!R||!(N.analysis_group.id in R)?!0:R[N.analysis_group.id])}})}),e}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults()}getSearchFromID(e){this.web.getSearchSession(e).subscribe(t=>{this.searchSession=t}),this.web.getSearchResults(e,99999).subscribe(t=>{if(!this.collate)return;console.log(t.results);let i=Array.from(new Set(t.results.map(n=>n.search_term)));this.pastSearches.push({searchQuery:t,termFounds:i,collate:this.collate.id,searchID:e}),this.pastSearches=this.pastSearches.slice(-20),localStorage.setItem("cinderPastSearches",JSON.stringify(this.pastSearches)),this.distributeSearchResults(t.results).then()})}restoreSearches(e,t){this.web.getSearchSession(t).subscribe(i=>{this.searchSession=i}),this.distributeSearchResults(e.results).then()}navigateToEdit(){this.collate&&this.router.navigate([`/collate/edit/${this.collate.id}`])}openQRCodeDialog(){let e=window.location.href,t=this.dialog.open(Gn);t.componentInstance.url=e}navigateToHome(){this.router.navigate(["/"])}exportData(e){this.web.exportSearchData(this.searchSession.id,e,1e-8,1e-8,this.web.searchSessionID).subscribe(t=>{this.waitingForDownload=!0})}openVisibilityDialog(){let e=this.dialog.open(ro);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(t=>{let i={};t.forEach(u=>{i[u.project]||(i[u.project]=[]),i[u.project].push(u)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(u=>{let j=parseInt(u),R=this.collate?.settings.analysisGroupOrderMap[j];if(!R||!i[j])return;let N=i[j].filter(X=>!R.includes(X.id));i[j]=i[j].filter(X=>R.includes(X.id)),i[j]=i[j].sort((X,ce)=>R.indexOf(X.id)-R.indexOf(ce.id)),i[j]=i[j].concat(N)}),e.componentInstance.projectAnalysisGroupMap=i,e.componentInstance.projects=this.projects;let n={};this.collate?.settings?.projectAnalysisGroupVisibility&&(n=this.collate.settings.projectAnalysisGroupVisibility);for(let u in i){n[u]||(n[u]={});for(let j of i[u])j.id in n[u]||(n[u][j.id]=!0)}e.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},n)}),e.afterClosed().subscribe(t=>{this.collate&&t&&(this.collate.settings.projectAnalysisGroupVisibility=t,this.filteredResults=this.getFilteredSearchResults())})}static{this.\u0275fac=function(t){return new(t||o)(L(nn),L(Oi),L(rt),L(Zt),L(Tt),L(Xe),L(pt),L(Ut))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-view"]],inputs:{collateId:"collateId"},standalone:!0,features:[pe],decls:18,vars:9,consts:[["previousSearch","matMenu"],["href","/#/home"],[3,"width","height","ngSrc"],[1,"spacer"],["mat-icon-button","","matTooltip","Open QR code dialog",3,"click"],["mat-icon-button","","matTooltip","Change analysis group visibility",3,"click"],["mat-icon-button","","matTooltip","Edit collate"],[3,"collate"],[2,"display","flex","justify-content","center"],[3,"searchResultID","projects"],["mat-icon-button","","matTooltip","View previous searches",3,"matMenuTriggerFor"],["mat-menu-item","","disabled",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],["mat-icon-button","","matTooltip","Edit collate",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTags"],[2,"padding","20px"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"searchTerm","renameCondition","projects","filteredResults"],["mat-tab-label",""],["mat-icon-button","","matTooltip","Export data",3,"click","disabled"]],template:function(t,i){t&1&&(p(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"a",1),W(3,"img",2),f(),W(4,"span",3),q(5,ka,7,2),p(6,"button",4),O("click",function(){return i.openQRCodeDialog()}),p(7,"mat-icon"),w(8,"qr_code"),f()(),p(9,"button",5),O("click",function(){return i.openVisibilityDialog()}),p(10,"mat-icon"),w(11,"visibility"),f()(),q(12,wa,3,0,"button",6),f()(),q(13,Sa,1,1,"app-collate-header",7)(14,ja,1,1),p(15,"div",8)(16,"app-collate-search",9),O("searchResultID",function(u){return i.getSearchFromID(u)}),f()(),q(17,Aa,5,3)),t&2&&(v(3),I("width",25)("height",25)("ngSrc","/assets/logo.png"),v(2),J(i.collate?5:-1),v(7),J(i.accounts.loggedIn?12:-1),v(),J(i.collate?13:-1),v(),J(i.collate&&i.collate.settings?14:-1),v(2),I("projects",i.projects),v(),J(i.searchTerms.length>0?17:-1))},dependencies:[An,eo,$i,Wi,io,qe,yt,Ii,Fi,oo,on,Yi,Ui,Ki,Mn,Mi]})}}return o})();var Hn=(o,a)=>a.id;function Pa(o,a){if(o&1){let e=Y();p(0,"mat-chip",2),O("click",function(){let i=F(e).$implicit,n=b(2);return V(n.removeProject(i))}),w(1),f()}if(o&2){let e=a.$implicit;v(),me(" ",e.name," ")}}function Oa(o,a){if(o&1&&(p(0,"div"),w(1),p(2,"mat-chip-set"),fe(3,Pa,2,1,"mat-chip",null,Hn),f()()),o&2){let e=b();v(),me(" Selected Projects: ",e.selectedMultipleProjects.length," "),v(2),ge(e.selectedMultipleProjects)}}function Ia(o,a){if(o&1&&(p(0,"mat-list-option",4),w(1),f()),o&2){let e=a.$implicit;I("value",e),v(),ye(e.name)}}function Fa(o,a){if(o&1){let e=Y();p(0,"div")(1,"mat-selection-list",3),fe(2,Ia,2,2,"mat-list-option",4,Hn),f(),p(4,"mat-paginator",5),O("page",function(i){F(e);let n=b(2);return V(n.handleProjectPageEvent(i))}),f()()}if(o&2){let e=b(2);v(),I("multiple",!1),v(),ge(e.projectQuery.results),v(2),I("pageSize",e.projectPageSize)("length",e.projectQuery.count)("pageIndex",e.projectPageIndex)}}function Va(o,a){o&1&&(p(0,"p"),w(1,"No projects found."),f())}function Ra(o,a){if(o&1&&q(0,Fa,5,4,"div")(1,Va,2,0,"p"),o&2){let e=b();J(e.projectQuery.count>0?0:1)}}var Qn=(()=>{class o{constructor(e,t){this.fb=e,this.web=t,this.multipleSelection=!1,this.selectedProjects=new xe,this.formProjectSearch=this.fb.group({searchTerm:new nt("",ot.required),selectedProjects:new nt([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(i=>{i&&this.fetchProjects(i,this.projectPageSize,0)}),this.formProjectSearch.controls.selectedProjects.valueChanges.subscribe(i=>{if(i){for(let n of i)this.selectedMultipleProjects.includes(n)||this.selectedMultipleProjects.push(n);this.selectedProjects.emit(this.selectedMultipleProjects)}})}fetchProjects(e,t,i){let n=i*t;this.web.getProjects(void 0,t,n,e,void 0).subscribe(u=>{this.projectQuery=u})}handleProjectPageEvent(e){this.projectPageIndex=e.pageIndex,this.fetchProjects(this.formProjectSearch.controls.searchTerm.value||"",e.pageSize,e.pageIndex)}removeProject(e){this.selectedMultipleProjects=this.selectedMultipleProjects.filter(t=>t!==e),this.selectedProjects.emit(this.selectedMultipleProjects)}static{this.\u0275fac=function(t){return new(t||o)(L(Ze),L(Xe))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-project-search"]],inputs:{multipleSelection:"multipleSelection"},outputs:{selectedProjects:"selectedProjects"},standalone:!0,features:[pe],decls:7,vars:3,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Project Name","type","search"],[3,"click"],["formControlName","selectedProjects",3,"multiple"],[3,"value"],[3,"page","pageSize","length","pageIndex"]],template:function(t,i){t&1&&(p(0,"form",0)(1,"mat-form-field"),W(2,"input",1),p(3,"mat-label"),w(4,"Search For Specific Projects"),f()(),q(5,Oa,5,1,"div")(6,Ra,2,1),f()),t&2&&(I("formGroup",i.formProjectSearch),v(5),J(i.selectedMultipleProjects.length>0?5:-1),v(),J(i.projectQuery?6:-1))},dependencies:[dt,lt,Je,Ve,ct,wt,St,et,tt,jt,Di,Ei,Si,wi,ji]})}}return o})();var $n=(()=>{class o{constructor(e,t,i){this.dialogRef=e,this.fb=t,this.web=i,this.formProjectSearch=this.fb.group({searchTerm:new nt("",ot.required),selectedProjects:new nt([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.multipleSelection=!0,this.web.getProjects(void 0,this.projectPageSize,0,void 0).subscribe(n=>{this.projectQuery=n}),this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(n=>{n&&this.web.getProjects(void 0,this.projectPageSize,0,n).subscribe(u=>{this.projectQuery=u})})}handleSelectedProjects(e){this.selectedMultipleProjects=e}close(){this.dialogRef.close()}save(){this.dialogRef.close(this.selectedMultipleProjects)}static{this.\u0275fac=function(t){return new(t||o)(L(He),L(Ze),L(Xe))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-project-add-dialog"]],standalone:!0,features:[pe],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedProjects"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(t,i){t&1&&(p(0,"h2",0),w(1,"Project Add"),f(),p(2,"div",1)(3,"app-project-search",2),O("selectedProjects",function(u){return i.handleSelectedProjects(u)}),f(),p(4,"small"),w(5),f()(),p(6,"div",3)(7,"button",4),O("click",function(){return i.save()}),w(8,"Submit"),f(),p(9,"button",4),O("click",function(){return i.close()}),w(10,"Close"),f()()),t&2&&(v(5),me("Selected ",i.selectedMultipleProjects.length," Projects."))},dependencies:[Qn,Qe,$e,We,Oe]})}}return o})();var Wn=(o,a)=>a.id;function Ba(o,a){if(o&1&&(p(0,"mat-list-item",5)(1,"mat-icon",7),w(2,"notes"),f(),p(3,"div",8),w(4),f(),W(5,"div",9),f()),o&2){let e=a.$implicit;v(4),ye(e.name)}}function La(o,a){if(o&1){let e=Y();p(0,"div",5)(1,"div",6)(2,"b"),w(3),f()(),p(4,"div",4),O("cdkDropListDropped",function(i){let n=F(e).$implicit,u=b(2);return V(u.drop(i,n.id))}),fe(5,Ba,6,1,"mat-list-item",5,Wn),f(),W(7,"mat-divider"),f()}if(o&2){let e=a.$implicit,t=b(2);v(3),ye(e.name),v(2),ge(t.projectAnalysisGroupMap[e.id])}}function Ga(o,a){if(o&1){let e=Y();p(0,"mat-list")(1,"div",4),O("cdkDropListDropped",function(i){F(e);let n=b();return V(n.dropProject(i))}),fe(2,La,8,1,"div",5,Wn),f()()}if(o&2){let e=b();v(2),ge(e.projects)}}var Xn=(()=>{class o{set projects(e){this._projects=e.slice()}get projects(){return this._projects}set projectAnalysisGroupMap(e){this._projectAnalysisGroupMap=e}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}constructor(e){this.dialogRef=e,this._projectAnalysisGroupMap={},this._projects=[]}save(){this.dialogRef.close({projects:this.projects,projectAnalysisGroupMap:this.projectAnalysisGroupMap})}cancel(){this.dialogRef.close()}drop(e,t){Ht(this.projectAnalysisGroupMap[t],e.previousIndex,e.currentIndex)}dropProject(e){Ht(this.projects,e.previousIndex,e.currentIndex)}static{this.\u0275fac=function(t){return new(t||o)(L(He))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-project-analysis-group-reorder-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap"},standalone:!0,features:[pe],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["mat-subheader","","cdkDragHandle",""],["cdkDragHandle","","matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(t,i){t&1&&(p(0,"h1",0),w(1,"Analysis Group Reorder"),f(),p(2,"div",1),q(3,Ga,4,0,"mat-list"),f(),p(4,"div",2)(5,"button",3),O("click",function(){return i.cancel()}),w(6,"Close"),f(),p(7,"button",3),O("click",function(){return i.save()}),w(8,"Save"),f()()),t&2&&(v(3),J(i.projects.length>0?3:-1))},dependencies:[Qe,$e,_n,vn,Cn,fn,qe,gn,Ji,Dt,Et,We,Oe]})}}return o})();var za=["hueSlider"],Na=["alphaSlider"];function qa(o,a){if(o&1){let e=Y();p(0,"div",10),O("newValue",function(i){F(e);let n=b();return V(n.onSliderChange("saturation-lightness",i))}),p(1,"div",11),W(2,"div"),f()()}if(o&2){let e=b();Ct("background-color",e.hueSliderColor),I("rgX",1)("rgY",1),v(),Ct("top",e.slider==null?null:e.slider.v,"px")("left",e.slider==null?null:e.slider.s,"px")}}function Ha(o,a){if(o&1&&(p(0,"div",12),W(1,"div",13)(2,"div",14),f()),o&2){let e=b();v(2),Ct("background-color",e.selectedColor)}}function Qa(o,a){if(o&1){let e=Y();p(0,"div",15,1),O("newValue",function(i){F(e);let n=b();return V(n.onSliderChange("hue",i))}),p(2,"div",16)(3,"div"),W(4,"div"),f()()()}if(o&2){let e=b();I("rgX",1),v(2),Ct("left",e.slider==null?null:e.slider.h,"px")}}function $a(o,a){if(o&1){let e=Y();p(0,"div",17,2),O("newValue",function(i){F(e);let n=b();return V(n.onSliderChange("alpha",i))}),W(2,"div",18),p(3,"div",16)(4,"div"),W(5,"div"),f()()()}if(o&2){let e=b();I("rgX",1),v(2),I("ngStyle",e.getBackgroundColor(e.alphaSliderColor)),v(),Ct("left",e.slider==null?null:e.slider.a,"px")}}var Wa=["dialog"],Kn=o=>({background:o});function Xa(o,a){o&1&&W(0,"div",12)}function Ua(o,a){if(o&1){let e=Y();Ae(0),p(1,"div",9)(2,"div",10),O("click",function(){let i=F(e).$implicit,n=b(2);return V(n.onColorClick(i))}),q(3,Xa,1,0,"div",11),f()(),Pe()}if(o&2){let e=a.$implicit,t=a.index,i=b(2);v(2),Nt("colornull",!e),I("ngStyle",i.getBackgroundColor(e)),v(),I("ngIf",t==i.indexSeleccionado)}}function Ya(o,a){if(o&1&&W(0,"div",18),o&2){let e=b(3);I("ngStyle",e.getBackgroundColor(e.color))}}function Ka(o,a){if(o&1){let e=Y();p(0,"div",13),O("click",function(){F(e);let i=b(2);return V(i.addColor())}),q(1,Ya,1,1,"div",14),Wt(),p(2,"svg",15),W(3,"path",16)(4,"path",17),f()()}if(o&2){let e=b(2);v(),I("ngIf",e.indexSeleccionado===void 0)}}function Ja(o,a){if(o&1){let e=Y();p(0,"color-picker",19),O("colorChange",function(i){F(e);let n=b(2);return V(n.onChangeColorPicker(i))})("onAlphaChange",function(i){F(e);let n=b(2);return V(n.onAlphaChange(i))}),f()}if(o&2){let e=b(2);I("controls",e.colorPickerControls)("color",e.hsva)}}function Za(o,a){if(o&1&&(Ae(0),p(1,"div",5),q(2,Ua,4,4,"ng-container",6)(3,Ka,5,1,"div",7)(4,Ja,1,2,"color-picker",8),f(),Pe()),o&2){let e=b();v(),I("@colorsAnimation",e.colorsAnimationEffect),v(),I("ngForOf",e.palette),v(),I("ngIf",!e.hideColorPicker&&e.colorPickerControls!="only-alpha"),v(),I("ngIf",!e.hideColorPicker&&e.colorPickerControls=="only-alpha")}}function es(o,a){o&1&&W(0,"div",12)}function ts(o,a){if(o&1){let e=Y();Ae(0),p(1,"div",9)(2,"div",25),O("click",function(){let i=F(e).$implicit,n=b(2);return V(n.changeColor(i))}),q(3,es,1,0,"div",11),f()(),Pe()}if(o&2){let e=a.$implicit,t=b(2);v(2),Nt("colornull",!e),I("ngStyle",fo(4,Kn,e)),v(),I("ngIf",t.isSelected(e))}}function is(o,a){if(o&1){let e=Y();Ae(0),p(1,"div",5)(2,"div",20)(3,"div",21),O("click",function(){F(e);let i=b();return V(i.onClickBack())}),Wt(),p(4,"svg",22),W(5,"path",23)(6,"path",24),f()()(),q(7,ts,4,6,"ng-container",6),f(),Pe()}if(o&2){let e=b();v(),I("@colorsAnimation",e.colorsAnimationEffect),v(6),I("ngForOf",e.variants)}}function os(o,a){if(o&1){let e=Y();Ae(0),p(1,"div",26)(2,"div",27),O("click",function(){F(e);let i=b();return V(i.onClickBack())}),Wt(),p(3,"svg",22),W(4,"path",23)(5,"path",24),f()(),mi(),p(6,"button",28),O("click",function(){F(e);let i=b();return V(i.emitClose("cancel"))}),w(7),f(),p(8,"button",28),O("click",function(){F(e);let i=b();return V(i.emitClose("accept"))}),w(9),f()(),p(10,"div",29)(11,"color-picker",30),O("sliderChange",function(i){F(e);let n=b();return V(n.onChangeColorPicker(i))}),f()(),Pe()}if(o&2){let e=b();v(7),me(" ",e.cancelLabel," "),v(2),me(" ",e.acceptLabel," "),v(2),I("controls",e.colorPickerControls)("color",e.hsva)}}function ns(o,a){if(o&1){let e=Y();p(0,"div",31)(1,"p",32),O("click",function(){F(e);let i=b();return V(i.nextFormat())}),w(2),f(),p(3,"div",33)(4,"input",34,1),O("keyup",function(){F(e);let i=Ye(5),n=b();return V(n.changeColorManual(i.value))})("keydown.enter",function(){F(e);let i=b();return V(i.emitClose("accept"))}),f()()()}if(o&2){let e=b();v(2),ye(e.colorFormats[e.format]),v(2),Ct("font-size",e.color&&e.color.length>23?9:10,"px")("letter-spacing",e.color&&e.color.length>16?0:1.5,"px"),I("placeholder",e.placeholder)("value",e.color)}}var Do=["hex","rgba","hsla","cmyk"],Ue=function(o){return o[o.HEX=0]="HEX",o[o.RGBA=1]="RGBA",o[o.HSLA=2]="HSLA",o[o.CMYK=3]="CMYK",o}(Ue||{}),Un=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],ht=class{constructor(a,e,t,i){this.r=a,this.g=e,this.b=t,this.a=i}denormalize(){return this.r=Math.round(this.r*255),this.g=Math.round(this.g*255),this.b=Math.round(this.b*255),this}toString(){return this.denormalize(),"rgb"+(this.a!=1?"a(":"(")+this.r+", "+this.g+", "+this.b+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},at=class{constructor(a,e,t,i){this.h=a,this.s=e,this.v=t,this.a=i,this.onChange=new xe(!0)}onColorChange(a){this.s=a.s/a.rgX,this.v=a.v/a.rgY}onHueChange(a){this.h=a.v/a.rgX}onValueChange(a){this.v=a.v/a.rgX}onAlphaChange(a){this.a=a.v/a.rgX}},Qt=class{constructor(a,e,t,i){this.h=a,this.s=e,this.l=t,this.a=i}denormalize(){return this.h=Math.round(this.h*360),this.s=Math.round(this.s*100),this.l=Math.round(this.l*100),this}toString(){return"hsl"+(this.a!=1?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},Pt=class{constructor(a,e,t,i,n=1){this.c=a,this.m=e,this.y=t,this.k=i,this.a=n}denormalize(){return this.c=Math.round(this.c*100),this.m=Math.round(this.m*100),this.y=Math.round(this.y*100),this.k=Math.round(this.k*100),this}toString(){return this.denormalize(),"cmyk("+this.c+", "+this.m+", "+this.y+", "+this.k+")"}},Ao=class{constructor(a){a&&(this.preview=a.preview,this.variants=a.variants)}},so=(()=>{class o{constructor(){}toFormat(e,t){var i="";if(e)switch(t){case Ue.HEX:var u=this.hsvaToRgba(e);u.denormalize();var i=this.rgbaToHex(u,!0);break;case Ue.HSLA:var n=this.hsva2hsla(e);n.denormalize();var i=n.toString();break;case Ue.RGBA:var u=this.hsvaToRgba(e),i=u.toString();break;case Ue.CMYK:var j=this.hsvaToCmyk(e),i=j.toString();break}return i}stringToFormat(e,t){var i=this.stringToHsva(e,!0);return this.toFormat(i,t)}hsva2hsla(e){let t=e.h,i=e.s,n=e.v,u=e.a;if(n===0)return new Qt(t,0,0,u);if(i===0&&n===1)return new Qt(t,1,1,u);{let j=n*(2-i)/2;return new Qt(t,n*i/(1-Math.abs(2*j-1)),j,u)}}hsla2hsva(e){let t=Math.min(e.h,1),i=Math.min(e.s,1),n=Math.min(e.l,1),u=Math.min(e.a,1);if(n===0)return new at(t,0,0,u);{let j=n+i*(1-Math.abs(2*n-1))/2;return new at(t,2*(j-n)/j,j,u)}}hsvaToRgba(e){let t,i,n,u=e.h,j=e.s,R=e.v,N=e.a,X=Math.floor(u*6),ce=u*6-X,Z=R*(1-j),ee=R*(1-ce*j),he=R*(1-(1-ce)*j);switch(X%6){case 0:t=R,i=he,n=Z;break;case 1:t=ee,i=R,n=Z;break;case 2:t=Z,i=R,n=he;break;case 3:t=Z,i=ee,n=R;break;case 4:t=he,i=Z,n=R;break;case 5:t=R,i=Z,n=ee;break;default:t=0,i=0,n=0}return new ht(t,i,n,N)}cmykToRgb(e){let t=(1-e.c)*(1-e.k),i=(1-e.m)*(1-e.k),n=(1-e.y)*(1-e.k);return new ht(t,i,n,e.a)}rgbaToCmyk(e){let t=1-Math.max(e.r,e.g,e.b);if(t===1)return new Pt(0,0,0,1,e.a);{let i=(1-e.r-t)/(1-t),n=(1-e.g-t)/(1-t),u=(1-e.b-t)/(1-t);return new Pt(i,n,u,t,e.a)}}hsvaToCmyk(e){let t=this.hsvaToRgba(e);return this.rgbaToCmyk(t)}rgbaToHsva(e){let t,i,n=Math.min(e.r,1),u=Math.min(e.g,1),j=Math.min(e.b,1),R=Math.min(e.a,1),N=Math.max(n,u,j),X=Math.min(n,u,j),ce=N,Z=N-X;if(i=N===0?0:Z/N,N===X)t=0;else{switch(N){case n:t=(u-j)/Z+(u<j?6:0);break;case u:t=(j-n)/Z+2;break;case j:t=(n-u)/Z+4;break;default:t=0}t/=6}return new at(t,i,ce,R)}rgbaToHex(e,t){let i="#"+(16777216|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return e.a!=1&&(i+=(256|Math.round(e.a*255)).toString(16).substr(1)),i}normalizeCMYK(e){return new Pt(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new Pt(Math.floor(e.c*100),Math.floor(e.m*100),Math.floor(e.y*100),Math.floor(e.k*100),e.a)}denormalizeRGBA(e){return new ht(Math.round(e.r*255),Math.round(e.g*255),Math.round(e.b*255),e.a)}stringToHsva(e="",t=!0){let i=null;e=(e||"").toLowerCase();let n=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(u){return new ht(parseInt(u[2],10)/255,parseInt(u[3],10)/255,parseInt(u[4],10)/255,isNaN(parseFloat(u[5]))?1:parseFloat(u[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(u){return new Qt(parseInt(u[2],10)/360,parseInt(u[3],10)/100,parseInt(u[4],10)/100,isNaN(parseFloat(u[5]))?1:parseFloat(u[5]))}},{re:/cmyk?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(u){return new Pt(parseInt(u[1],10)/100,parseInt(u[2],10)/100,parseInt(u[3],10)/100,parseInt(u[4],10)/100)}}];t?n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(u){return new ht(parseInt(u[1],16)/255,parseInt(u[2],16)/255,parseInt(u[3],16)/255,parseInt(u[4]||"FF",16)/255)}}):n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(u){return new ht(parseInt(u[1],16)/255,parseInt(u[2],16)/255,parseInt(u[3],16)/255,1)}}),n.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(u){return new ht(parseInt(u[1]+u[1],16)/255,parseInt(u[2]+u[2],16)/255,parseInt(u[3]+u[3],16)/255,1)}});for(let u in n)if(n.hasOwnProperty(u)){let j=n[u],R=j.re.exec(e),N=R&&j.parse(R);if(N){if(N instanceof ht)i=this.rgbaToHsva(N);else if(N instanceof Qt)i=this.hsla2hsva(N);else if(N instanceof Pt){let X=this.cmykToRgb(N);i=this.rgbaToHsva(X)}return i}}return i}outputFormat(e){return this.hsvaToRgba(e).toString()}getFormatByString(e){if(e){e=e.toLowerCase();let t=/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/,i=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,n=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/,u=/(cmyk\(\d{1,3}(,\s?\d{1,3}){3}\))/;if(t.test(e))return"hex";if(i.test(e))return"rgba";if(n.test(e))return"hsla";if(u.test(e))return"cmyk"}return"hex"}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=ti({token:o,factory:o.\u0275fac}),o})(),ao=class{constructor(a,e,t,i){this.h=a,this.s=e,this.v=t,this.a=i}},Po=class{constructor(a,e,t,i){this.h=a,this.s=e,this.v=t,this.a=i}},rs=(()=>{class o{mouseDown(e){this.start(e)}touchStart(e){this.start(e)}constructor(e){this.elRef=e,this.dragEnd=new xe,this.dragStart=new xe,this.newValue=new xe,this.listenerMove=t=>this.move(t),this.listenerStop=()=>this.stop()}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){let t=this.elRef.nativeElement.getBoundingClientRect();return(e.pageX!==void 0?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}getY(e){let t=this.elRef.nativeElement.getBoundingClientRect();return(e.pageY!==void 0?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}setCursor(e){let t=this.elRef.nativeElement.offsetWidth,i=this.elRef.nativeElement.offsetHeight,n=Math.max(0,Math.min(this.getX(e),t)),u=Math.max(0,Math.min(this.getY(e),i));this.rgX!==void 0&&this.rgY!==void 0?this.newValue.emit({s:n/t,v:1-u/i,rgX:this.rgX,rgY:this.rgY}):this.rgX===void 0&&this.rgY!==void 0?this.newValue.emit({v:u/i,rgY:this.rgY}):this.rgX!==void 0&&this.rgY===void 0&&this.newValue.emit({v:n/t,rgX:this.rgX})}}return o.\u0275fac=function(e){return new(e||o)(L(zt))},o.\u0275dir=pi({type:o,selectors:[["","slider",""]],hostBindings:function(e,t){e&1&&O("mousedown",function(n){return t.mouseDown(n)})("touchstart",function(n){return t.touchStart(n)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),o})(),as=(()=>{class o{constructor(e,t){this.service=e,this.cdr=t,this.color=new at(0,1,1,1),this.controls="default",this.sliderChange=new xe(!1),this.onAlphaChange=new xe(!1),this.hsva=new at(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new at(0,1,1,1)),this.slider=new ao(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(e){e.color&&this.color&&this.update()}ngAfterViewInit(){let e=this.hueSlider?.nativeElement.offsetWidth||140,t=this.alphaSlider?.nativeElement.offsetWidth||140;this.sliderDimMax=new Po(e,220,130,t),this.update()}onSliderChange(e,t){switch(e){case"saturation-lightness":this.hsva.onColorChange(t);break;case"hue":this.hsva.onHueChange(t);break;case"alpha":this.hsva.onAlphaChange(t),this.onAlphaChange.emit(t);break;case"value":this.hsva.onValueChange(t);break}this.update(),this.setColor(this.outputColor)}setColor(e){this.color=e,this.sliderChange.emit(this.color)}getBackgroundColor(e){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+e+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let e=this.service.hsvaToRgba(this.hsva).denormalize(),t=this.service.hsvaToRgba(new at(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+t.r+","+t.g+","+t.b+")",this.alphaSliderColor="rgb("+e.r+","+e.g+","+e.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new ao(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return o.\u0275fac=function(e){return new(e||o)(L(so),L(Xt))},o.\u0275cmp=ae({type:o,selectors:[["color-picker"]],viewQuery:function(e,t){if(e&1&&(vt(za,5),vt(Na,5)),e&2){let i;bt(i=xt())&&(t.hueSlider=i.first),bt(i=xt())&&(t.alphaSlider=i.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[hi],decls:8,vars:4,consts:[["dialogPopup",""],["hueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"newValue","slider","rgX","rgY"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"newValue","slider","rgX"],[1,"sliderCursor"],[1,"alpha",3,"newValue","slider","rgX"],[1,"alpha-gradient",3,"ngStyle"]],template:function(e,t){if(e&1){let i=Y();p(0,"div",3,0),O("click",function(u){return F(i),V(u.stopPropagation())}),q(2,qa,3,8,"div",4),p(3,"div",5),q(4,Ha,3,2,"div",6),p(5,"div",7),q(6,Qa,5,3,"div",8)(7,$a,6,4,"div",9),f()()()}e&2&&(v(2),I("ngIf",t.controls!="only-alpha"),v(2),I("ngIf",t.controls!="only-alpha"),v(2),I("ngIf",t.controls!="only-alpha"),v(),I("ngIf",t.controls!="no-alpha"))},dependencies:[go,bi,rs],styles:[`.color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}
`],encapsulation:2}),o})(),ss=(()=>{class o{click(e){this.isOutside(e)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(e,t){this.service=e,this.cdr=t,this.color="#000000",this.previewColor="#000000",this.hsva=new at(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=Un,this.variants=[],this.userFormats=[],this.colorFormats=Do,this.format=Ue.HEX,this.formatMap={hex:Ue.HEX,rgba:Ue.RGBA,hsla:Ue.HSLA,cmyk:Ue.CMYK},this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default",this.placeholder="#FFFFFF"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(e){let t;if(this.color)for(let i=0;i<e.length;i++){let n=e[i];typeof n=="string"?this.service.stringToFormat(this.color,Ue.HEX)==this.service.stringToFormat(n,Ue.HEX)&&(t=i):n===void 0?this.color=void 0:this.findIndexSelectedColor(n.variants)!=null&&(t=i)}return t}iniciate(e,t,i,n,u,j,R,N,X,ce,Z,ee,he=[]){if(this.colorPickerControls=Z,this.triggerInstance=e,this.TriggerBBox=t,this.color=i,this.hideColorPicker=N,this.hideTextInput=R,this.acceptLabel=X,this.cancelLabel=ce,he.length&&he.every(Fe=>Do.includes(Fe))&&(this.colorFormats=he),j?this.colorFormats.includes(j)?(this.format=this.colorFormats.indexOf(j.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=j.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=Ue.HEX):(this.format=this.colorFormats.indexOf(this.service.getFormatByString(this.color)),this.format<0&&(this.format=0)),this.previewColor=this.color,this.palette=n??Un,this.colorsAnimationEffect=u,ee=="top"){let le=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+le.height+"px ))"}}setPosition(){if(this.TriggerBBox){let t=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=t.top+t.height,t.left+250>window.innerWidth?this.left=t.right<250?window.innerWidth/2-250/2:t.right-250:this.left=t.left}}setPositionY(){let e=this.TriggerBBox.nativeElement.getBoundingClientRect(),t=this.panelRef.nativeElement.getBoundingClientRect(),i=t.height;e.bottom+i>window.innerHeight?this.positionString=e.top<t.height?"transform: translateY(-"+e.bottom+"px );":"transform: translateY(calc( -100% - "+e.height+"px ));":this.positionString="",this.cdr.detectChanges()}hasVariant(e){return this.previewColor?typeof e!="string"&&e.variants.some(t=>t.toUpperCase()==this.previewColor.toUpperCase()):!1}isSelected(e){return this.previewColor?typeof e=="string"&&e.toUpperCase()==this.previewColor.toUpperCase():!1}getBackgroundColor(e){return typeof e=="string"?{background:e}:{background:e?.preview}}onAlphaChange(e){this.palette=this.ChangeAlphaOnPalette(e,this.palette)}ChangeAlphaOnPalette(e,t){var i=[];for(let n=0;n<t.length;n++){let u=t[n];if(typeof u=="string"){let j=this.service.stringToHsva(u);j.onAlphaChange(e),i.push(this.service.toFormat(j,this.format))}else{let j=new Ao,R=this.service.stringToHsva(u.preview);R.onAlphaChange(e),j.preview=this.service.toFormat(R,this.format),j.variants=this.ChangeAlphaOnPalette(e,u.variants),i.push(j)}}return i}changeColor(e){this.setColor(this.service.stringToHsva(e)),this.emitClose("accept")}onChangeColorPicker(e){this.temporalColor=e,this.color=this.service.toFormat(e,this.format),this.triggerInstance.sliderChange(this.service.toFormat(e,this.format))}changeColorManual(e){this.previewColor=e,this.color=e,this.hsva=this.service.stringToHsva(e),this.setPreviewColor(this.hsva),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color,this.previewColor)}setColor(e,t=-1){this.hsva=e;let i=this.colorFormats[this.format],n=t;n<0&&(n=this.formatMap[i]),this.color=this.service.toFormat(e,n),this.setPreviewColor(e),this.triggerInstance.setColor(this.color,this.previewColor)}setPreviewColor(e){this.previewColor=e?this.service.hsvaToRgba(e).toString():void 0}onChange(){}onColorClick(e){typeof e=="string"||e===void 0?this.changeColor(e):(this.variants=e.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){if(this.canChangeFormat){this.format=(this.format+1)%this.colorFormats.length;let e=this.colorFormats[this.format],t=this.formatMap[e];this.setColor(this.hsva,t),this.placeholder=this.service.toFormat(new at(0,0,1,1),t)}}emitClose(e){this.menu==3&&(e=="cancel"||e=="accept"&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){this.menu==3&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(e){return e.target.classList.contains("ngx-colors-overlay")}}return o.\u0275fac=function(e){return new(e||o)(L(so),L(Xt))},o.\u0275cmp=ae({type:o,selectors:[["ngx-colors-panel"]],viewQuery:function(e,t){if(e&1&&vt(Wa,5),e&2){let i;bt(i=xt())&&(t.panelRef=i.first)}},hostVars:4,hostBindings:function(e,t){e&1&&O("mousedown",function(n){return t.click(n)},!1,mo)("scroll",function(){return t.onScroll()},!1,mo)("resize",function(){return t.onResize()},!1,Qo),e&2&&Ct("top",t.top,"px")("left",t.left,"px")},decls:6,vars:6,consts:[["dialog",""],["paintInput",""],[1,"opened"],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"click","ngStyle"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style",`
            position: absolute;
            height: 7px;
            width: 7px;
            border: 1px solid rgba(0, 0, 0, 0.03);
            border-radius: 100%;
            top: 0;
            right: 0;
          `,3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"colorChange","onAlphaChange","controls","color"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"click","ngStyle"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"sliderChange","controls","color"],[1,"manual-input-wrapper"],[2,"cursor","pointer",3,"click"],[1,"g-input"],["type","text",3,"keyup","keydown.enter","placeholder","value"]],template:function(e,t){e&1&&(p(0,"div",2,0),q(2,Za,5,4,"ng-container",3)(3,is,8,2,"ng-container",3)(4,os,12,4,"ng-container",3)(5,ns,6,7,"div",4),f()),e&2&&(Xo(t.positionString),v(2),I("ngIf",t.menu==1),v(),I("ngIf",t.menu==2),v(),I("ngIf",t.menu==3),v(),I("ngIf",!t.hideTextInput))},dependencies:[tn,go,bi,as],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[pn("colorsAnimation",[bo("void => slide-in",[oi(":enter",gt({opacity:0}),{optional:!0}),oi(":enter",xo("10ms",[Co(".3s ease-in",vo([gt({opacity:0,transform:"translatex(-50%)",offset:0}),gt({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),gt({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),bo("void => popup",[oi(":enter",gt({opacity:0,transform:"scale(0)"}),{optional:!0}),oi(":enter",xo("10ms",[Co("500ms ease-out",vo([gt({opacity:.5,transform:"scale(.5)",offset:.3}),gt({opacity:1,transform:"scale(1.1)",offset:.8}),gt({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),o})(),Yn={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0},Jn=(()=>{class o{constructor(e,t,i){this.resolver=e,this.applicationRef=t,this.injector=i}createPanel(e,t){this.componentRef!=null&&this.removePanel();let i=this.resolver.resolveComponentFactory(ss);this.componentRef=i.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);let n=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(t),Object.keys(Yn).forEach(u=>{this.overlay.style[u]=Yn[u]}),e?document.getElementById(e).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(n),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return o.\u0275fac=function(e){return new(e||o)(di($o),di(Zo),di(zo))},o.\u0275prov=ti({token:o,factory:o.\u0275fac}),o})(),Oo=(()=>{class o{onClick(){this.openPanel()}constructor(e,t,i){this.triggerRef=e,this.panelFactory=t,this.service=i,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new xe,this.input=new xe,this.slider=new xe,this.close=new xe,this.open=new xe,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}ngOnDestroy(){this.panelRef&&this.panelFactory.removePanel()}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position,this.formats)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}setDisabledState(e){this.isDisabled=e,this.triggerRef.nativeElement.style.opacity=e?.5:1}setColor(e,t=""){this.writeValue(e,t),this.onChangeCallback(e),this.input.emit(e)}sliderChange(e){this.slider.emit(e)}get value(){return this.color}set value(e){this.setColor(e),this.onChangeCallback(e)}writeValue(e,t=""){if(e!==this.color){if(this.format){let n=Do.indexOf(this.format.toLowerCase());e=this.service.stringToFormat(e,n)}this.color=e;let i=!1;e&&e.startsWith("cmyk")&&(i=!0,t||(t=this.service.stringToFormat(e,Ue.RGBA))),this.change.emit(i?t:e)}}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}}return o.\u0275fac=function(e){return new(e||o)(L(zt),L(Jn),L(so))},o.\u0275dir=pi({type:o,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(e,t){e&1&&O("click",function(){return t.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",formats:"formats",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[gi([{provide:ki,useExisting:li(()=>o),multi:!0}])]}),o})(),Zn=(()=>{class o{constructor(e,t){this.cdRef=e,this.triggerDirective=t,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(e=>{this.color=e,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(L(Xt),L(Oo,1))},o.\u0275cmp=ae({type:o,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(e,t){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),W(3,"div",3),f()()()),e&2&&(v(3),Nt("colornull",!t.color),I("ngStyle",fo(3,Kn,t.color)))},dependencies:[bi],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),o})(),er=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=Gt({type:o}),o.\u0275inj=Lt({providers:[so,Jn],imports:[yi]}),o})();var ls=(o,a)=>a.id;function ds(o,a){if(o&1){let e=Y();p(0,"div",4)(1,"ngx-colors",5),Ne("ngModelChange",function(i){let n=F(e).$implicit,u=b(2).$implicit,j=b();return ze(j.projectConditionColorMap[u.id][n],i)||(j.projectConditionColorMap[u.id][n]=i),V(i)}),f(),p(2,"div"),w(3),f()()}if(o&2){let e=a.$implicit,t=b(2).$implicit,i=b();v(),Ge("ngModel",i.projectConditionColorMap[t.id][e]),v(2),ye(e)}}function ps(o,a){if(o&1&&fe(0,ds,4,2,"div",4,ft),o&2){let e=b().$implicit,t=b();ge(t.projectConditionMap[e.id])}}function hs(o,a){if(o&1&&(p(0,"div")(1,"div")(2,"b"),w(3),f()(),q(4,ps,2,0),f()),o&2){let e=a.$implicit,t=b();v(3),ye(e.name),v(),J(t.projectConditionMap[e.id]?4:-1)}}var tr=(()=>{class o{set projects(e){this._projects=e;for(let t of e)this.web.getProjectUniqueConditions(t.id).subscribe(i=>{for(let n of i)this.projectConditionMap[n.AnalysisGroup.project]||(this.projectConditionMap[n.AnalysisGroup.project]=[]),this.projectConditionMap[n.AnalysisGroup.project].includes(n.Condition)||this.projectConditionMap[n.AnalysisGroup.project].push(n.Condition),this.projectConditionColorMap[n.AnalysisGroup.project]||(this.projectConditionColorMap[n.AnalysisGroup.project]={}),this.projectConditionColorMap[n.AnalysisGroup.project][n.Condition]||(this.projectConditionColorMap[n.AnalysisGroup.project][n.Condition]="")})}get projects(){return this._projects}set projectConditionColorMap(e){if(e==null){this._projectConditionColorMap={};return}this._projectConditionColorMap=Object.assign({},e)}get projectConditionColorMap(){return this._projectConditionColorMap}constructor(e,t){this.dialogRef=e,this.web=t,this._projects=[],this.projectConditionMap={},this._projectConditionColorMap={}}save(){this.dialogRef.close(this.projectConditionColorMap)}cancel(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||o)(L(He),L(Xe))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-condition-color-editor-dialog"]],inputs:{projects:"projects",projectConditionColorMap:"projectConditionColorMap"},standalone:!0,features:[pe],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],[2,"display","flex","gap","5px","align-items","center"],["ngx-colors-trigger","",3,"ngModelChange","ngModel"]],template:function(t,i){t&1&&(p(0,"h1",0),w(1,"Condition Color Editor"),f(),p(2,"div",1),fe(3,hs,5,2,"div",null,ls),f(),p(5,"div",2)(6,"button",3),O("click",function(){return i.cancel()}),w(7,"Close"),f(),p(8,"button",3),O("click",function(){return i.save()}),w(9,"Save"),f()()),t&2&&(v(3),ge(i.projects))},dependencies:[Qe,$e,er,Zn,Oo,Mt,Ve,kt,Oe,We]})}}return o})();function ms(o,a){if(o&1&&(p(0,"mat-option",6),w(1),f()),o&2){let e=a.$implicit;I("value",e),v(),ye(e)}}var ir=(()=>{class o{_filter(e){let t=e.toLowerCase();return this.tags.filter(i=>i.toLowerCase().includes(t))}constructor(e,t,i){this.fb=e,this.dialogRef=t,this.collateService=i,this.form=this.fb.group({name:["",ot.required],existing:[!1],id:[-1]}),this.tags=[]}ngOnInit(){this.filteredTags=this.form.controls.name.valueChanges.pipe(si(""),ci(e=>this.collateService.getCollateTags(e).pipe(ai(t=>t.results.map(i=>i.name)))))}submit(){let e=this.form.controls.name.value;this.collateService.getCollateTags(e).subscribe(t=>{let i=t.results.find(u=>u.name.toLowerCase()===e.toLowerCase()),n=!!i;this.form.controls.existing.setValue(n),this.form.controls.id.setValue(n?i.id:null),this.dialogRef.close(this.form.value)})}cancel(){this.dialogRef.close()}onTagSelected(e){let t=e.option.value;this.form.controls.name.setValue(t),this.collateService.getCollateTags(t).subscribe(i=>{let n=i.results.find(u=>u.name.toLowerCase()===t.toLowerCase());this.form.controls.existing.setValue(!!n),this.form.controls.id.setValue(n?n.id:null)})}static{this.\u0275fac=function(t){return new(t||o)(L(Ze),L(He),L(Tt))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-tag-create-dialog"]],standalone:!0,features:[pe],decls:18,vars:5,consts:[["auto","matAutocomplete"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["type","text","matInput","","formControlName","name",3,"matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"click","disabled"]],template:function(t,i){if(t&1){let n=Y();p(0,"h1",1),w(1,"Create/Add Tag"),f(),p(2,"div",2)(3,"form",3)(4,"mat-form-field")(5,"mat-label"),w(6,"Tag Name"),f(),W(7,"input",4),p(8,"mat-autocomplete",5,0),O("optionSelected",function(j){return F(n),V(i.onTagSelected(j))}),fe(10,ms,2,2,"mat-option",6,ft),Ci(12,"async"),f()()()(),p(13,"div",7)(14,"button",8),O("click",function(){return F(n),V(i.cancel())}),w(15,"Cancel"),f(),p(16,"button",9),O("click",function(){return F(n),V(i.submit())}),w(17,"Submit"),f()()}if(t&2){let n=Ye(9);v(3),I("formGroup",i.form),v(4),I("matAutocomplete",n),v(3),ge(vi(12,3,i.filteredTags)),v(6),I("disabled",i.form.invalid)}},dependencies:[Qe,$e,dt,lt,Je,Ve,ct,wt,St,jt,tt,et,Oe,We,Yt,xi,Ai,Pi]})}}return o})();var us=(o,a)=>a.id;function fs(o,a){o&1&&(p(0,"th",11),w(1," Original Title "),f())}function gs(o,a){if(o&1&&(p(0,"td",12),w(1),f()),o&2){let e=a.$implicit;v(),me(" ",e," ")}}function _s(o,a){o&1&&(p(0,"th",11),w(1," Display Title "),f())}function Cs(o,a){if(o&1&&(p(0,"td",12)(1,"form",13)(2,"mat-form-field"),W(3,"input",14),f()()()),o&2){let e=a.$implicit,t=b(2).$implicit,i=b();v(),I("formGroup",i.formMap[t.id][e]),v(2),Ko("formControlName",e)}}function vs(o,a){o&1&&W(0,"tr",15)}function bs(o,a){o&1&&W(0,"tr",16)}function xs(o,a){if(o&1&&(p(0,"h5"),w(1),f(),p(2,"table",4),Ae(3,5),q(4,fs,2,0,"th",6)(5,gs,2,1,"td",7),Pe(),Ae(6,8),q(7,_s,2,0,"th",6)(8,Cs,4,2,"td",7),Pe(),q(9,vs,1,0,"tr",9)(10,bs,1,0,"tr",10),f()),o&2){let e=b().$implicit,t=b();v(),ye(e.name),v(),I("dataSource",t.projectConditionMap[e.id]),v(7),I("matHeaderRowDef",t.displayedColumns),v(),I("matRowDefColumns",t.displayedColumns)}}function ys(o,a){if(o&1&&q(0,xs,11,4),o&2){let e=a.$implicit,t=b();J(t.formMap[e.id]?0:-1)}}var or=(()=>{class o{set projects(e){this._projects=e.slice()}get projects(){return this._projects}set renameSampleCondition(e){for(let t of this.projects)this.web.getProjectUniqueConditions(t.id).subscribe(i=>{for(let n of i){if(this.formMap[n.AnalysisGroup.project]||(this.formMap[n.AnalysisGroup.project]={}),!this.formMap[n.AnalysisGroup.project][n.Condition]){let u={};u[n.Condition]=new nt(n.Condition,ot.required),this.formMap[n.AnalysisGroup.project][n.Condition]=this.fb.group(u)}this.projectConditionMap[n.AnalysisGroup.project]||(this.projectConditionMap[n.AnalysisGroup.project]=[]),this.projectConditionMap[n.AnalysisGroup.project].includes(n.Condition)||this.projectConditionMap[n.AnalysisGroup.project].push(n.Condition),this.renameSampleCondition[n.AnalysisGroup.project]||(this.renameSampleCondition[n.AnalysisGroup.project]={}),this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]||(this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]=n.Condition),e[n.AnalysisGroup.project]&&e[n.AnalysisGroup.project][n.Condition]&&(this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]=e[n.AnalysisGroup.project][n.Condition],this.formMap[n.AnalysisGroup.project][n.Condition].controls[n.Condition].setValue(e[n.AnalysisGroup.project][n.Condition]))}})}get renameSampleCondition(){return this._renameSampleCondition}constructor(e,t,i,n){this.dialog=e,this.web=t,this.fb=i,this.sb=n,this.displayedColumns=["original","display"],this.projectConditionMap={},this._projects=[],this._renameSampleCondition={},this.formMap={}}close(){this.dialog.close()}submit(){let e={};for(let t in this.formMap){e[t]={};for(let i in this.formMap[t])if(e[t][i]=this.formMap[t][i].value[i],!this.formMap[t][i].valid){this.sb.open(`${i} is invalid`);return}}this.dialog.close(e)}static{this.\u0275fac=function(t){return new(t||o)(L(He),L(Xe),L(Ze),L(rt))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-rename-sample-condition-dialog"]],inputs:{projects:"projects",renameSampleCondition:"renameSampleCondition"},standalone:!0,features:[pe],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","original"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","display"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"formGroup"],["matInput","",2,"border-radius","0",3,"formControlName"],["mat-header-row",""],["mat-row",""]],template:function(t,i){t&1&&(p(0,"h1",0),w(1,"Rename Conditions"),f(),p(2,"div",1),fe(3,ys,1,1,null,null,us),f(),p(5,"div",2)(6,"button",3),O("click",function(){return i.submit()}),w(7,"Submit"),f(),p(8,"button",3),O("click",function(){return i.close()}),w(9,"Close"),f()()),t&2&&(v(3),ge(i.projects))},dependencies:[Qe,$e,dt,lt,Je,Ve,ct,wt,St,zi,Ri,Li,Gi,Hi,Ni,Qi,qi,Vi,Bi,We,Oe,et,tt]})}}return o})();function ks(o,a){if(o&1){let e=Y();p(0,"mat-checkbox",12),Ne("ngModelChange",function(i){F(e);let n=b(2);return ze(n.collate.settings.showTags,i)||(n.collate.settings.showTags=i),V(i)}),w(1,"Show Tags"),f()}if(o&2){let e=b(2);Ge("ngModel",e.collate.settings.showTags)}}function ws(o,a){if(o&1){let e=Y();p(0,"h1",15),O("click",function(){F(e);let i=b(3);return V(i.toggleEditTitle())}),w(1),f(),W(2,"br")}if(o&2){let e=b(3);v(),ye(e.collate.title)}}function Ss(o,a){if(o&1){let e=Y();p(0,"div")(1,"mat-form-field",16)(2,"input",17),O("keydown.enter",function(){F(e);let i=b(3);return V(i.toggleEditTitle())}),Ne("ngModelChange",function(i){F(e);let n=b(3);return ze(n.collate.title,i)||(n.collate.title=i),V(i)}),f()(),p(3,"button",18),O("click",function(){F(e);let i=b(3);return V(i.toggleEditTitle())}),p(4,"mat-icon"),w(5,"save"),f()()()}if(o&2){let e=b(3);v(2),Ge("ngModel",e.collate.title)}}function Ms(o,a){if(o&1){let e=Y();p(0,"div",19),O("click",function(){F(e);let i=b(3);return V(i.toggleEditGreeting())}),w(1),f()}if(o&2){let e=b(3);v(),ye(e.collate.greeting)}}function js(o,a){if(o&1){let e=Y();p(0,"div")(1,"mat-form-field",20)(2,"input",17),O("keydown.enter",function(){F(e);let i=b(3);return V(i.toggleEditGreeting())}),Ne("ngModelChange",function(i){F(e);let n=b(3);return ze(n.collate.greeting,i)||(n.collate.greeting=i),V(i)}),f()(),p(3,"button",18),O("click",function(){F(e);let i=b(3);return V(i.toggleEditGreeting())}),p(4,"mat-icon"),w(5,"save"),f()()()}if(o&2){let e=b(3);v(2),Ge("ngModel",e.collate.greeting)}}function Ts(o,a){if(o&1&&(p(0,"div",9)(1,"div",13),q(2,ws,3,1)(3,Ss,6,1,"div")(4,Ms,2,1,"div",14)(5,js,6,1,"div"),f()()),o&2){let e=b(2);v(2),J(e.editTitle?3:2),v(2),J(e.editGreeting?5:4)}}function Es(o,a){if(o&1){let e=Y();p(0,"div",1)(1,"button",21),O("click",function(){F(e);let i=b(2);return V(i.openCollateTagCreateDialog())}),w(2,"Add Tag +"),f()(),p(3,"div",22)(4,"app-collate-tags",23),O("collageTagsChange",function(i){F(e);let n=b(2);return V(n.handleCollageTagsChange(i))}),f()()}if(o&2){let e=b(2);v(4),I("collageTags",e.collate.tags)}}function Ds(o,a){if(o&1&&W(0,"mat-tab",25),o&2){let e=a.$implicit;I("label",e)}}function As(o,a){if(o&1){let e=Y();p(0,"div",11)(1,"mat-tab-group",24),O("selectedTabChange",function(){F(e);let i=b(2);return V(i.filterDataBySearchTerm())}),Ne("selectedIndexChange",function(i){F(e);let n=b(2);return ze(n.selectedIndex,i)||(n.selectedIndex=i),V(i)}),fe(2,Ds,1,1,"mat-tab",25,ft),f()()}if(o&2){let e=b(2);v(),Ge("selectedIndex",e.selectedIndex),I("mat-stretch-tabs",!1),v(),ge(e.searchTerms)}}function Ps(o,a){if(o&1){let e=Y();p(0,"app-collate-project-list",27),O("deleteProject",function(i){F(e);let n=b(4);return V(n.deleteProject(i))})("projectOrderChanged",function(i){F(e);let n=b(4);return V(n.onProjectOrderChanged(i))}),f()}if(o&2){let e=b(4);I("searchTerm",e.selectedSearchTerm)("projectConditionColorMap",e.collate.settings.projectConditionColorMap)("projects",e.projects)("filteredResults",e.filteredResults)("renameCondition",e.collate.settings.renameSampleCondition)}}function Os(o,a){if(o&1&&q(0,Ps,1,5,"app-collate-project-list",26),o&2){let e=b(3);J(e.collate.settings.projectConditionColorMap&&e.collate.settings.renameSampleCondition?0:-1)}}function Is(o,a){if(o&1&&q(0,Os,1,1),o&2){let e=b(2);J(e.collate.settings?0:-1)}}function Fs(o,a){if(o&1){let e=Y();p(0,"mat-toolbar")(1,"mat-toolbar-row"),W(2,"span",2),q(3,ks,2,1,"mat-checkbox",3),p(4,"button",4),O("click",function(){F(e);let i=b();return V(i.goToCollateView())}),p(5,"mat-icon"),w(6,"visibility"),f()(),p(7,"button",5),O("click",function(){F(e);let i=b();return V(i.openProjectAddDialog())}),p(8,"mat-icon"),w(9,"add"),f()(),p(10,"button",6),O("click",function(){F(e);let i=b();return V(i.updateCollate())}),p(11,"mat-icon"),w(12,"save"),f()(),p(13,"button",7)(14,"mat-icon"),w(15,"more_vert"),f()(),p(16,"mat-menu",null,0)(18,"button",8),O("click",function(){F(e);let i=b();return V(i.openReorderDialog())}),w(19,"Reorder Analysis Groups"),f(),p(20,"button",8),O("click",function(){F(e);let i=b();return V(i.openVisibilityDialog())}),w(21,"Change Analysis Group Visibility"),f(),p(22,"button",8),O("click",function(){F(e);let i=b();return V(i.openConditionColorEditorDialog())}),w(23,"Set Condition Colors"),f(),p(24,"button",8),O("click",function(){F(e);let i=b();return V(i.openRenameConditionDialog())}),w(25,"Rename Condition"),f()()()(),q(26,Ts,6,2,"div",9)(27,Es,5,1),p(28,"div",1)(29,"app-collate-search",10),O("searchResultID",function(i){F(e);let n=b();return V(n.getSearchFromID(i))}),f()(),q(30,As,4,2,"div",11)(31,Is,1,1)}if(o&2){let e=Ye(17),t=b();v(3),J(t.collate?3:-1),v(10),I("matMenuTriggerFor",e),v(13),J(t.collate?26:-1),v(),J(t.collate?27:-1),v(2),I("projects",t.projects),v(),J(t.searchTerms.length>0?30:-1),v(),J(t.collate?31:-1)}}function Vs(o,a){o&1&&(p(0,"div",1)(1,"p"),w(2," You do not have permission to edit this collate. "),f()())}var Io=(()=>{class o{set collateId(e){e&&this.collateService.getCollate(e).subscribe(t=>{if(this._collate=t,this.accounts.getCollatePermissions(t.id).subscribe(i=>{this.canEdit=i.edit}),this.projects=t.projects,this._collate.settings||(this._collate.settings={projectOrder:this.projects.map(i=>i.id),analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},showTags:!1}),t.settings.projectOrder){let i=this.projects.filter(n=>!t.settings.projectOrder.includes(n.id));this.projects=this.projects.filter(n=>t.settings.projectOrder.includes(n.id)),this.projects=this.projects.concat(i)}if(this.collate&&"showTags"in this.collate.settings&&(this.collate.settings.showTags=!1),this.collate?.settings.projectConditionColorMap)this.graph.projectConditionColorMap=this.collate.settings.projectConditionColorMap;else{this.collate.settings.projectConditionColorMap={};for(let i of this.projects)this.collate.settings.projectConditionColorMap[i.id]={}}if(!this.collate?.settings.renameSampleCondition){this.collate.settings.renameSampleCondition={};for(let i of this.projects)this.collate.settings.renameSampleCondition[i.id]={},this.web.getProjectUniqueConditions(i.id).subscribe(n=>{for(let u of n)this.collate.settings.renameSampleCondition[i.id][u.Condition]=u.Condition;console.log(this.collate.settings.renameSampleCondition)})}})}get collate(){return this._collate}set collate(e){this._collate=e}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(e){this._selectedSearchTerm=e}constructor(e,t,i,n,u,j,R){this.accounts=e,this.graph=t,this.router=i,this.snackBar=n,this.dialog=u,this.collateService=j,this.web=R,this._collate=null,this.canEdit=!1,this.projects=[],this.selectedIndex=0,this.editTitle=!1,this.editGreeting=!1,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this.searchTerms=[],this._selectedSearchTerm="",this.filteredResults={},this.removedTags=[]}openProjectAddDialog(){this.dialog.open($n).afterClosed().subscribe(t=>{t&&(this.projects=this.projects.concat(t),this.collate&&(this.collate.projects=this.projects,this.updateProjectOrder()))})}updateProjectOrder(){this._collate&&(this._collate.settings.projectOrder=this.projects.map(e=>e.id)),console.log(this.collate)}updateCollate(){this._collate&&this.collateService.updateCollate(this._collate.id,this._collate).subscribe(()=>{if(this.removedTags.length>0){let e=this.removedTags.map(t=>this.collateService.removeTagFromCollate(this._collate?.id,t.id));Ro(e).subscribe(()=>{this.showSnackBar("Collate saved successfully"),this.removedTags=[]})}else this.showSnackBar("Collate saved successfully")})}toggleEditTitle(){this.editTitle=!this.editTitle}toggleEditGreeting(){this.editGreeting=!this.editGreeting}saveTitle(){this.toggleEditTitle(),this.updateCollate()}saveGreeting(){this.toggleEditGreeting(),this.updateCollate()}getSearchFromID(e){this.web.getSearchSession(e).subscribe(t=>{console.log(t)}),this.web.getSearchResults(e,99999).subscribe(t=>{console.log(t.results),this.distributeSearchResults(t.results).then()})}associateAnalysisGroupsWithProjects(){return Ke(this,null,function*(){let e=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},e&&e.forEach(t=>{let i=t.project;this.projectAnalysisGroups[i]||(this.projectAnalysisGroups[i]=[]),this.projectAnalysisGroups[i].push(t),this.analysisGroupProjects[t.id]=this.projects.find(n=>n.id===i)})})}distributeSearchResults(e){return Ke(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(e.map(t=>t.search_term))),e.forEach(t=>{let i=t.analysis_group.id,n=this.analysisGroupProjects[i];n&&(this.searchResults[n.id]||(this.searchResults[n.id]=[]),this.searchResults[n.id].push(t))}),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let e={};return Object.keys(this.searchResults).forEach(t=>{e[t]=this.searchResults[t].filter(i=>i.search_term===this.selectedSearchTerm)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(t=>{let i=parseInt(t),n=this.collate?.settings.analysisGroupOrderMap[i];if(!e[i]||!n)return;let u=e[i].filter(j=>!n.includes(j.analysis_group.id));if(e[i]=e[i].filter(j=>n.includes(j.analysis_group.id)),e[i]=e[i].sort((j,R)=>n.indexOf(j.analysis_group.id)-n.indexOf(R.analysis_group.id)),e[i]=e[i].concat(u),this.collate?.settings?.projectAnalysisGroupVisibility){let j=this.collate?.settings.projectAnalysisGroupVisibility[i];e[i]=e[i].filter(R=>!j||!(R.analysis_group.id in j)?!0:j[R.analysis_group.id])}}),e}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults()}onProjectOrderChanged(e){this.projects=e,this.updateProjectOrder()}showSnackBar(e){this.snackBar.open(e,"Close",{duration:3e3})}deleteProject(e){this.projects=this.projects.filter(t=>t.id!==e.id),this.updateProjectOrder()}goToCollateView(){this._collate&&this.router.navigate(["/collate/view",this._collate.id])}onSearchResultsChange(e,t){this.filteredResults[t]=e,this.collate&&(this.collate.settings.analysisGroupOrderMap||(this.collate.settings.analysisGroupOrderMap={}),this.collate.settings.analysisGroupOrderMap[t]=e.map(i=>i.analysis_group.id),Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(i=>{this.collate.settings.analysisGroupOrderMap[i]=Array.from(new Set(this.collate.settings.analysisGroupOrderMap[i]))}))}openVisibilityDialog(){let e=this.dialog.open(ro);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(t=>{let i={};t.forEach(u=>{i[u.project]||(i[u.project]=[]),i[u.project].push(u)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(u=>{let j=parseInt(u),R=this.collate?.settings.analysisGroupOrderMap[j];if(!R||!i[j])return;let N=i[j].filter(X=>!R.includes(X.id));i[j]=i[j].filter(X=>R.includes(X.id)),i[j]=i[j].sort((X,ce)=>R.indexOf(X.id)-R.indexOf(ce.id)),i[j]=i[j].concat(N)}),e.componentInstance.projectAnalysisGroupMap=i,e.componentInstance.projects=this.projects;let n={};this.collate?.settings?.projectAnalysisGroupVisibility&&(n=this.collate.settings.projectAnalysisGroupVisibility);for(let u in i){n[u]||(n[u]={});for(let j of i[u])j.id in n[u]||(n[u][j.id]=!0)}e.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},n)}),e.afterClosed().subscribe(t=>{this.collate&&t&&(this.collate.settings.projectAnalysisGroupVisibility=t,this.filteredResults=this.getFilteredSearchResults())})}openReorderDialog(){let e=this.dialog.open(Xn);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(t=>{let i={};t.forEach(n=>{i[n.project]||(i[n.project]=[]),i[n.project].push(n)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(n=>{let u=parseInt(n),j=this.collate?.settings.analysisGroupOrderMap[u];if(!j||!i[u])return;let R=i[u].filter(N=>!j.includes(N.id));i[u]=i[u].filter(N=>j.includes(N.id)),i[u]=i[u].sort((N,X)=>j.indexOf(N.id)-j.indexOf(X.id)),i[u]=i[u].concat(R)}),e.componentInstance.projectAnalysisGroupMap=i,e.componentInstance.projects=this.projects}),e.afterClosed().subscribe(t=>{this.projects=t.projects,this.updateProjectOrder(),this.projectAnalysisGroups=t.projectAnalysisGroupMap;let i={};Object.keys(this.projectAnalysisGroups).forEach(n=>{i[n]=this.projectAnalysisGroups[n].map(u=>u.id)}),this.collate&&(this.collate.settings.analysisGroupOrderMap=i,this.filteredResults=this.getFilteredSearchResults())})}openConditionColorEditorDialog(){let e=this.dialog.open(tr);e.componentInstance.projectConditionColorMap=this.collate?.settings?.projectConditionColorMap,e.componentInstance.projects=this.projects,e.afterClosed().subscribe(t=>{this.collate&&(this.collate.settings.projectConditionColorMap=t),this.graph.projectConditionColorMap=Object.assign({},t),this.filteredResults=this.getFilteredSearchResults(),this.graph.redrawTrigger.next(!0)})}openCollateTagCreateDialog(){this.dialog.open(ir).afterClosed().subscribe(t=>{t&&t.name&&(t.existing&&t.id&&t.id!==-1?this.collateService.addTagToCollate(this.collate?.id,t.id).subscribe(i=>{this.collate&&this.collate.tags.push(i)}):this.collateService.createCollateTag(t.name).subscribe(i=>{this.collateService.addTagToCollate(this.collate?.id,i.id).subscribe(n=>{this.collate&&this.collate.tags.push(n)})}))})}handleCollageTagsChange(e){this.collate&&(this.removedTags=this.collate.tags.filter(t=>!e.includes(t)),this.collate.tags=e)}openRenameConditionDialog(){if(this.collate){let e=this.dialog.open(or);e.componentInstance.projects=this.collate.projects,e.componentInstance.renameSampleCondition=this.collate.settings.renameSampleCondition,e.afterClosed().subscribe(t=>{this.collate&&(this.collate.settings.renameSampleCondition=Object.assign({},t),console.log(this.collate.settings.renameSampleCondition))})}}static{this.\u0275fac=function(t){return new(t||o)(L(pt),L(Xi),L(Ut),L(rt),L(Zt),L(Tt),L(Xe))}}static{this.\u0275cmp=ae({type:o,selectors:[["app-collate-editor"]],inputs:{collateId:"collateId"},standalone:!0,features:[pe],decls:2,vars:1,consts:[["extraActionsMenu","matMenu"],[2,"display","flex","justify-content","center"],[1,"spacer"],[3,"ngModel"],["type","button","aria-label","View Collate","mat-icon-button","",3,"click"],["type","button","aria-label","Add Projects","mat-icon-button","",3,"click"],["type","button","aria-label","Update Collate","mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[3,"searchResultID","projects"],[2,"padding","20px"],[3,"ngModelChange","ngModel"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"],[3,"click"],[2,"font-size","2em","text-align","center","font-family","Roboto, Helvetica Neue, sans-serif","padding","5px"],["matInput","",3,"keydown.enter","ngModelChange","ngModel"],["mat-icon-button","",3,"click"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif",3,"click"],[2,"font-size","25px","text-align","center","font-family","'Roboto', 'Arial Narrow', sans-serif","padding","5px"],["mat-button","",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTagsChange","collageTags"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"label"],[3,"searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"],[3,"deleteProject","projectOrderChanged","searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"]],template:function(t,i){t&1&&q(0,Fs,32,7)(1,Vs,3,0,"div",1),t&2&&J(i.canEdit?0:1)},dependencies:[Fi,yt,qe,Ii,Mt,Je,Ve,kt,eo,Wi,$i,et,tt,io,Yi,Ui,Ki,Oe,oo,ni],styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return o})();var Rs=[{component:Dn,path:""},{component:Eo,path:"view"},{component:Eo,path:"view/:collateId"},{component:Io,path:"edit"},{component:Io,path:"edit/:collateId"}],jp=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=Gt({type:o})}static{this.\u0275inj=Lt({imports:[yi,rn.forChild(Rs)]})}}return o})();export{jp as CollateModule};
