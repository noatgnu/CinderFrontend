import{a as Uf}from"./chunk-5FZDEB73.js";import{a as Gf}from"./chunk-LT5OS7KN.js";import{a as Hf,b as fg,c as $f,d as Iu,e as na,f as Qs,g as Di,h as Mi,i as Aa}from"./chunk-4PVRXQAO.js";import{a as Us,b as Ks,c as Xs,d as Ys}from"./chunk-YE4PZOJH.js";import{a as Is}from"./chunk-I7KSBDRZ.js";import{a as Bs,b as Rs}from"./chunk-ON4LJNYO.js";import{a as ki}from"./chunk-4IALJWBY.js";import{a as Wf,b as Ws,c as $s}from"./chunk-JZVXNH5J.js";import{a as Os,b as Ls,c as Fs,d as Ns,e as js,f as Vs,g as zs,h as qs,i as Gs,j as Hs}from"./chunk-LE3F4ORG.js";import{a as Da,b as Ef,c as Ma,d as kf,e as Df,f as Mf,g as Ps,h as As}from"./chunk-YYO262FZ.js";import{a as ks,b as Ds,c as Vf,d as Ms,e as zf,f as qf}from"./chunk-GH6BASN2.js";import{a as Ln}from"./chunk-DZJ2KETN.js";import{a as xs,c as Of,d as Lf,e as Ff,f as _s,g as Nf,h as Ss}from"./chunk-25CFQFJY.js";import{a as qr,c as Pa,d as Gr,e as Hr,f as Wr,g as Xn}from"./chunk-NPOKFU2J.js";import{Aa as Rf,Ba as $n,Ca as Un,Da as un,Ea as Ei,Fa as Tn,Ha as Kn,Ma as cn,Na as fn,Oa as jf,Pa as Ts,Q as ka,Qa as Es,Sa as dn,V as sn,W as yr,X as Si,oa as Af,pa as ln,ra as Rn,ta as Pr,ua as _n,va as If,wa as On,xa as Ti,ya as Sn,za as Bf}from"./chunk-G4XN575R.js";import{c as Pf,d as Du,g as fi,i as Mu,j as Pu,l as vo,m as Au}from"./chunk-3CIC7QKD.js";import{h as Sf,l as Ea,p as Tf}from"./chunk-OTVSX5VU.js";import{Aa as lr,Cb as vf,Cc as ys,D as of,Db as gf,Ea as _u,Eb as Xe,Fb as _i,Gb as ps,H as sf,Hb as mf,Kb as Ct,Lb as ci,Mb as Ut,Nb as Kt,Ob as ne,Pb as ue,Qb as ht,Rb as Dr,Sb as Mr,Ub as St,Xb as He,Xc as wf,Yc as xf,Z as ls,Zb as _e,Zc as ku,_ as us,_c as bs,ac as yf,ad as Cs,bb as df,bc as Eu,cb as hf,cd as ws,d as ho,da as lf,db as Su,e as os,ea as xu,eb as ye,ec as _a,f as zr,fa as cs,fb as st,fc as Sa,gc as Ta,id as _f,ja as fs,jb as pf,jc as Bn,kc as ke,lc as or,mc as zt,nc as bf,oc as nn,pa as uf,pc as an,qa as Ze,qc as on,ra as Je,rb as It,rc as Cf,sa as ds,sb as hs,sc as vs,ta as cf,tb as Tu,tc as po,va as ff,vc as gs,wc as ms,x as ss,xb as ct}from"./chunk-ZY3XLMOC.js";var ed=ho((go,Ou)=>{"use strict";(function(r,e){typeof go=="object"&&typeof Ou=="object"?Ou.exports=e():typeof define=="function"&&define.amd?define([],e):typeof go=="object"?go.QRCodeStyling=e():r.QRCodeStyling=e()})(go,()=>(()=>{var r={873:(i,a)=>{var o,s,l=function(){var u=function(P,z){var A=P,T=C[z],E=null,M=0,L=null,F=[],X={},K=function($,Q){E=function(J){for(var le=new Array(J),de=0;de<J;de+=1){le[de]=new Array(J);for(var je=0;je<J;je+=1)le[de][je]=null}return le}(M=4*A+17),Y(0,0),Y(M-7,0),Y(0,M-7),he(),ae(),me($,Q),A>=7&&be($),L==null&&(L=xe(A,T,F)),we(L,Q)},Y=function($,Q){for(var J=-1;J<=7;J+=1)if(!($+J<=-1||M<=$+J))for(var le=-1;le<=7;le+=1)Q+le<=-1||M<=Q+le||(E[$+J][Q+le]=0<=J&&J<=6&&(le==0||le==6)||0<=le&&le<=6&&(J==0||J==6)||2<=J&&J<=4&&2<=le&&le<=4)},ae=function(){for(var $=8;$<M-8;$+=1)E[$][6]==null&&(E[$][6]=$%2==0);for(var Q=8;Q<M-8;Q+=1)E[6][Q]==null&&(E[6][Q]=Q%2==0)},he=function(){for(var $=y.getPatternPosition(A),Q=0;Q<$.length;Q+=1)for(var J=0;J<$.length;J+=1){var le=$[Q],de=$[J];if(E[le][de]==null)for(var je=-2;je<=2;je+=1)for(var it=-2;it<=2;it+=1)E[le+je][de+it]=je==-2||je==2||it==-2||it==2||je==0&&it==0}},be=function($){for(var Q=y.getBCHTypeNumber(A),J=0;J<18;J+=1){var le=!$&&(Q>>J&1)==1;E[Math.floor(J/3)][J%3+M-8-3]=le}for(J=0;J<18;J+=1)le=!$&&(Q>>J&1)==1,E[J%3+M-8-3][Math.floor(J/3)]=le},me=function($,Q){for(var J=T<<3|Q,le=y.getBCHTypeInfo(J),de=0;de<15;de+=1){var je=!$&&(le>>de&1)==1;de<6?E[de][8]=je:de<8?E[de+1][8]=je:E[M-15+de][8]=je}for(de=0;de<15;de+=1)je=!$&&(le>>de&1)==1,de<8?E[8][M-de-1]=je:de<9?E[8][15-de-1+1]=je:E[8][15-de-1]=je;E[M-8][8]=!$},we=function($,Q){for(var J=-1,le=M-1,de=7,je=0,it=y.getMaskFunction(Q),Ke=M-1;Ke>0;Ke-=2)for(Ke==6&&(Ke-=1);;){for(var qe=0;qe<2;qe+=1)if(E[le][Ke-qe]==null){var Ge=!1;je<$.length&&(Ge=($[je]>>>de&1)==1),it(le,Ke-qe)&&(Ge=!Ge),E[le][Ke-qe]=Ge,(de-=1)==-1&&(je+=1,de=7)}if((le+=J)<0||M<=le){le-=J,J=-J;break}}},xe=function($,Q,J){for(var le=x.getRSBlocks($,Q),de=k(),je=0;je<J.length;je+=1){var it=J[je];de.put(it.getMode(),4),de.put(it.getLength(),y.getLengthInBits(it.getMode(),$)),it.write(de)}var Ke=0;for(je=0;je<le.length;je+=1)Ke+=le[je].dataCount;if(de.getLengthInBits()>8*Ke)throw"code length overflow. ("+de.getLengthInBits()+">"+8*Ke+")";for(de.getLengthInBits()+4<=8*Ke&&de.put(0,4);de.getLengthInBits()%8!=0;)de.putBit(!1);for(;!(de.getLengthInBits()>=8*Ke||(de.put(236,8),de.getLengthInBits()>=8*Ke));)de.put(17,8);return function(qe,Ge){for(var et=0,rt=0,Qe=0,Ye=new Array(Ge.length),Ie=new Array(Ge.length),Ve=0;Ve<Ge.length;Ve+=1){var Re=Ge[Ve].dataCount,W=Ge[Ve].totalCount-Re;rt=Math.max(rt,Re),Qe=Math.max(Qe,W),Ye[Ve]=new Array(Re);for(var se=0;se<Ye[Ve].length;se+=1)Ye[Ve][se]=255&qe.getBuffer()[se+et];et+=Re;var Te=y.getErrorCorrectPolynomial(W),ve=_(Ye[Ve],Te.getLength()-1).mod(Te);for(Ie[Ve]=new Array(Te.getLength()-1),se=0;se<Ie[Ve].length;se+=1){var ge=se+ve.getLength()-Ie[Ve].length;Ie[Ve][se]=ge>=0?ve.getAt(ge):0}}var ze=0;for(se=0;se<Ge.length;se+=1)ze+=Ge[se].totalCount;var Pe=new Array(ze),We=0;for(se=0;se<rt;se+=1)for(Ve=0;Ve<Ge.length;Ve+=1)se<Ye[Ve].length&&(Pe[We]=Ye[Ve][se],We+=1);for(se=0;se<Qe;se+=1)for(Ve=0;Ve<Ge.length;Ve+=1)se<Ie[Ve].length&&(Pe[We]=Ie[Ve][se],We+=1);return Pe}(de,le)};X.addData=function($,Q){var J=null;switch(Q=Q||"Byte"){case"Numeric":J=O($);break;case"Alphanumeric":J=p($);break;case"Byte":J=I($);break;case"Kanji":J=N($);break;default:throw"mode:"+Q}F.push(J),L=null},X.isDark=function($,Q){if($<0||M<=$||Q<0||M<=Q)throw $+","+Q;return E[$][Q]},X.getModuleCount=function(){return M},X.make=function(){if(A<1){for(var $=1;$<40;$++){for(var Q=x.getRSBlocks($,T),J=k(),le=0;le<F.length;le++){var de=F[le];J.put(de.getMode(),4),J.put(de.getLength(),y.getLengthInBits(de.getMode(),$)),de.write(J)}var je=0;for(le=0;le<Q.length;le++)je+=Q[le].dataCount;if(J.getLengthInBits()<=8*je)break}A=$}K(!1,function(){for(var it=0,Ke=0,qe=0;qe<8;qe+=1){K(!0,qe);var Ge=y.getLostPoint(X);(qe==0||it>Ge)&&(it=Ge,Ke=qe)}return Ke}())},X.createTableTag=function($,Q){$=$||2;var J="";J+='<table style="',J+=" border-width: 0px; border-style: none;",J+=" border-collapse: collapse;",J+=" padding: 0px; margin: "+(Q=Q===void 0?4*$:Q)+"px;",J+='">',J+="<tbody>";for(var le=0;le<X.getModuleCount();le+=1){J+="<tr>";for(var de=0;de<X.getModuleCount();de+=1)J+='<td style="',J+=" border-width: 0px; border-style: none;",J+=" border-collapse: collapse;",J+=" padding: 0px; margin: 0px;",J+=" width: "+$+"px;",J+=" height: "+$+"px;",J+=" background-color: ",J+=X.isDark(le,de)?"#000000":"#ffffff",J+=";",J+='"/>';J+="</tr>"}return(J+="</tbody>")+"</table>"},X.createSvgTag=function($,Q,J,le){var de={};typeof arguments[0]=="object"&&($=(de=arguments[0]).cellSize,Q=de.margin,J=de.alt,le=de.title),$=$||2,Q=Q===void 0?4*$:Q,(J=typeof J=="string"?{text:J}:J||{}).text=J.text||null,J.id=J.text?J.id||"qrcode-description":null,(le=typeof le=="string"?{text:le}:le||{}).text=le.text||null,le.id=le.text?le.id||"qrcode-title":null;var je,it,Ke,qe,Ge=X.getModuleCount()*$+2*Q,et="";for(qe="l"+$+",0 0,"+$+" -"+$+",0 0,-"+$+"z ",et+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',et+=de.scalable?"":' width="'+Ge+'px" height="'+Ge+'px"',et+=' viewBox="0 0 '+Ge+" "+Ge+'" ',et+=' preserveAspectRatio="xMinYMin meet"',et+=le.text||J.text?' role="img" aria-labelledby="'+oe([le.id,J.id].join(" ").trim())+'"':"",et+=">",et+=le.text?'<title id="'+oe(le.id)+'">'+oe(le.text)+"</title>":"",et+=J.text?'<description id="'+oe(J.id)+'">'+oe(J.text)+"</description>":"",et+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',et+='<path d="',it=0;it<X.getModuleCount();it+=1)for(Ke=it*$+Q,je=0;je<X.getModuleCount();je+=1)X.isDark(it,je)&&(et+="M"+(je*$+Q)+","+Ke+qe);return(et+='" stroke="transparent" fill="black"/>')+"</svg>"},X.createDataURL=function($,Q){$=$||2,Q=Q===void 0?4*$:Q;var J=X.getModuleCount()*$+2*Q,le=Q,de=J-Q;return G(J,J,function(je,it){if(le<=je&&je<de&&le<=it&&it<de){var Ke=Math.floor((je-le)/$),qe=Math.floor((it-le)/$);return X.isDark(qe,Ke)?0:1}return 1})},X.createImgTag=function($,Q,J){$=$||2,Q=Q===void 0?4*$:Q;var le=X.getModuleCount()*$+2*Q,de="";return de+="<img",de+=' src="',de+=X.createDataURL($,Q),de+='"',de+=' width="',de+=le,de+='"',de+=' height="',de+=le,de+='"',J&&(de+=' alt="',de+=oe(J),de+='"'),de+"/>"};var oe=function($){for(var Q="",J=0;J<$.length;J+=1){var le=$.charAt(J);switch(le){case"<":Q+="&lt;";break;case">":Q+="&gt;";break;case"&":Q+="&amp;";break;case'"':Q+="&quot;";break;default:Q+=le}}return Q};return X.createASCII=function($,Q){if(($=$||1)<2)return function(Ye){Ye=Ye===void 0?2:Ye;var Ie,Ve,Re,W,se,Te=1*X.getModuleCount()+2*Ye,ve=Ye,ge=Te-Ye,ze={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},Pe={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},We="";for(Ie=0;Ie<Te;Ie+=2){for(Re=Math.floor((Ie-ve)/1),W=Math.floor((Ie+1-ve)/1),Ve=0;Ve<Te;Ve+=1)se="\u2588",ve<=Ve&&Ve<ge&&ve<=Ie&&Ie<ge&&X.isDark(Re,Math.floor((Ve-ve)/1))&&(se=" "),ve<=Ve&&Ve<ge&&ve<=Ie+1&&Ie+1<ge&&X.isDark(W,Math.floor((Ve-ve)/1))?se+=" ":se+="\u2588",We+=Ye<1&&Ie+1>=ge?Pe[se]:ze[se];We+=`
`}return Te%2&&Ye>0?We.substring(0,We.length-Te-1)+Array(Te+1).join("\u2580"):We.substring(0,We.length-1)}(Q);$-=1,Q=Q===void 0?2*$:Q;var J,le,de,je,it=X.getModuleCount()*$+2*Q,Ke=Q,qe=it-Q,Ge=Array($+1).join("\u2588\u2588"),et=Array($+1).join("  "),rt="",Qe="";for(J=0;J<it;J+=1){for(de=Math.floor((J-Ke)/$),Qe="",le=0;le<it;le+=1)je=1,Ke<=le&&le<qe&&Ke<=J&&J<qe&&X.isDark(de,Math.floor((le-Ke)/$))&&(je=0),Qe+=je?Ge:et;for(de=0;de<$;de+=1)rt+=Qe+`
`}return rt.substring(0,rt.length-1)},X.renderTo2dContext=function($,Q){Q=Q||2;for(var J=X.getModuleCount(),le=0;le<J;le++)for(var de=0;de<J;de++)$.fillStyle=X.isDark(le,de)?"black":"white",$.fillRect(le*Q,de*Q,Q,Q)},X};u.stringToBytes=(u.stringToBytesFuncs={default:function(P){for(var z=[],A=0;A<P.length;A+=1){var T=P.charCodeAt(A);z.push(255&T)}return z}}).default,u.createStringToBytes=function(P,z){var A=function(){for(var E=H(P),M=function(){var ae=E.read();if(ae==-1)throw"eof";return ae},L=0,F={};;){var X=E.read();if(X==-1)break;var K=M(),Y=M()<<8|M();F[String.fromCharCode(X<<8|K)]=Y,L+=1}if(L!=z)throw L+" != "+z;return F}(),T=63;return function(E){for(var M=[],L=0;L<E.length;L+=1){var F=E.charCodeAt(L);if(F<128)M.push(F);else{var X=A[E.charAt(L)];typeof X=="number"?(255&X)==X?M.push(X):(M.push(X>>>8),M.push(255&X)):M.push(T)}}return M}};var c,d,h,m,g,C={L:1,M:0,Q:3,H:2},y=(c=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d=1335,h=7973,g=function(P){for(var z=0;P!=0;)z+=1,P>>>=1;return z},(m={}).getBCHTypeInfo=function(P){for(var z=P<<10;g(z)-g(d)>=0;)z^=d<<g(z)-g(d);return 21522^(P<<10|z)},m.getBCHTypeNumber=function(P){for(var z=P<<12;g(z)-g(h)>=0;)z^=h<<g(z)-g(h);return P<<12|z},m.getPatternPosition=function(P){return c[P-1]},m.getMaskFunction=function(P){switch(P){case 0:return function(z,A){return(z+A)%2==0};case 1:return function(z,A){return z%2==0};case 2:return function(z,A){return A%3==0};case 3:return function(z,A){return(z+A)%3==0};case 4:return function(z,A){return(Math.floor(z/2)+Math.floor(A/3))%2==0};case 5:return function(z,A){return z*A%2+z*A%3==0};case 6:return function(z,A){return(z*A%2+z*A%3)%2==0};case 7:return function(z,A){return(z*A%3+(z+A)%2)%2==0};default:throw"bad maskPattern:"+P}},m.getErrorCorrectPolynomial=function(P){for(var z=_([1],0),A=0;A<P;A+=1)z=z.multiply(_([1,w.gexp(A)],0));return z},m.getLengthInBits=function(P,z){if(1<=z&&z<10)switch(P){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+P}else if(z<27)switch(P){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+P}else{if(!(z<41))throw"type:"+z;switch(P){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+P}}},m.getLostPoint=function(P){for(var z=P.getModuleCount(),A=0,T=0;T<z;T+=1)for(var E=0;E<z;E+=1){for(var M=0,L=P.isDark(T,E),F=-1;F<=1;F+=1)if(!(T+F<0||z<=T+F))for(var X=-1;X<=1;X+=1)E+X<0||z<=E+X||F==0&&X==0||L==P.isDark(T+F,E+X)&&(M+=1);M>5&&(A+=3+M-5)}for(T=0;T<z-1;T+=1)for(E=0;E<z-1;E+=1){var K=0;P.isDark(T,E)&&(K+=1),P.isDark(T+1,E)&&(K+=1),P.isDark(T,E+1)&&(K+=1),P.isDark(T+1,E+1)&&(K+=1),K!=0&&K!=4||(A+=3)}for(T=0;T<z;T+=1)for(E=0;E<z-6;E+=1)P.isDark(T,E)&&!P.isDark(T,E+1)&&P.isDark(T,E+2)&&P.isDark(T,E+3)&&P.isDark(T,E+4)&&!P.isDark(T,E+5)&&P.isDark(T,E+6)&&(A+=40);for(E=0;E<z;E+=1)for(T=0;T<z-6;T+=1)P.isDark(T,E)&&!P.isDark(T+1,E)&&P.isDark(T+2,E)&&P.isDark(T+3,E)&&P.isDark(T+4,E)&&!P.isDark(T+5,E)&&P.isDark(T+6,E)&&(A+=40);var Y=0;for(E=0;E<z;E+=1)for(T=0;T<z;T+=1)P.isDark(T,E)&&(Y+=1);return A+Math.abs(100*Y/z/z-50)/5*10},m),w=function(){for(var P=new Array(256),z=new Array(256),A=0;A<8;A+=1)P[A]=1<<A;for(A=8;A<256;A+=1)P[A]=P[A-4]^P[A-5]^P[A-6]^P[A-8];for(A=0;A<255;A+=1)z[P[A]]=A;return{glog:function(T){if(T<1)throw"glog("+T+")";return z[T]},gexp:function(T){for(;T<0;)T+=255;for(;T>=256;)T-=255;return P[T]}}}();function _(P,z){if(P.length===void 0)throw P.length+"/"+z;var A=function(){for(var E=0;E<P.length&&P[E]==0;)E+=1;for(var M=new Array(P.length-E+z),L=0;L<P.length-E;L+=1)M[L]=P[L+E];return M}(),T={getAt:function(E){return A[E]},getLength:function(){return A.length},multiply:function(E){for(var M=new Array(T.getLength()+E.getLength()-1),L=0;L<T.getLength();L+=1)for(var F=0;F<E.getLength();F+=1)M[L+F]^=w.gexp(w.glog(T.getAt(L))+w.glog(E.getAt(F)));return _(M,0)},mod:function(E){if(T.getLength()-E.getLength()<0)return T;for(var M=w.glog(T.getAt(0))-w.glog(E.getAt(0)),L=new Array(T.getLength()),F=0;F<T.getLength();F+=1)L[F]=T.getAt(F);for(F=0;F<E.getLength();F+=1)L[F]^=w.gexp(w.glog(E.getAt(F))+M);return _(L,0).mod(E)}};return T}var x=function(){var P=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],z=function(T,E){var M={};return M.totalCount=T,M.dataCount=E,M},A={getRSBlocks:function(T,E){var M=function(be,me){switch(me){case C.L:return P[4*(be-1)+0];case C.M:return P[4*(be-1)+1];case C.Q:return P[4*(be-1)+2];case C.H:return P[4*(be-1)+3];default:return}}(T,E);if(M===void 0)throw"bad rs block @ typeNumber:"+T+"/errorCorrectionLevel:"+E;for(var L=M.length/3,F=[],X=0;X<L;X+=1)for(var K=M[3*X+0],Y=M[3*X+1],ae=M[3*X+2],he=0;he<K;he+=1)F.push(z(Y,ae));return F}};return A}(),k=function(){var P=[],z=0,A={getBuffer:function(){return P},getAt:function(T){var E=Math.floor(T/8);return(P[E]>>>7-T%8&1)==1},put:function(T,E){for(var M=0;M<E;M+=1)A.putBit((T>>>E-M-1&1)==1)},getLengthInBits:function(){return z},putBit:function(T){var E=Math.floor(z/8);P.length<=E&&P.push(0),T&&(P[E]|=128>>>z%8),z+=1}};return A},O=function(P){var z=P,A={getMode:function(){return 1},getLength:function(M){return z.length},write:function(M){for(var L=z,F=0;F+2<L.length;)M.put(T(L.substring(F,F+3)),10),F+=3;F<L.length&&(L.length-F==1?M.put(T(L.substring(F,F+1)),4):L.length-F==2&&M.put(T(L.substring(F,F+2)),7))}},T=function(M){for(var L=0,F=0;F<M.length;F+=1)L=10*L+E(M.charAt(F));return L},E=function(M){if("0"<=M&&M<="9")return M.charCodeAt(0)-48;throw"illegal char :"+M};return A},p=function(P){var z=P,A={getMode:function(){return 2},getLength:function(E){return z.length},write:function(E){for(var M=z,L=0;L+1<M.length;)E.put(45*T(M.charAt(L))+T(M.charAt(L+1)),11),L+=2;L<M.length&&E.put(T(M.charAt(L)),6)}},T=function(E){if("0"<=E&&E<="9")return E.charCodeAt(0)-48;if("A"<=E&&E<="Z")return E.charCodeAt(0)-65+10;switch(E){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+E}};return A},I=function(P){var z=u.stringToBytes(P);return{getMode:function(){return 4},getLength:function(A){return z.length},write:function(A){for(var T=0;T<z.length;T+=1)A.put(z[T],8)}}},N=function(P){var z=u.stringToBytesFuncs.SJIS;if(!z)throw"sjis not supported.";(function(){var E=z("\u53CB");if(E.length!=2||(E[0]<<8|E[1])!=38726)throw"sjis not supported."})();var A=z(P),T={getMode:function(){return 8},getLength:function(E){return~~(A.length/2)},write:function(E){for(var M=A,L=0;L+1<M.length;){var F=(255&M[L])<<8|255&M[L+1];if(33088<=F&&F<=40956)F-=33088;else{if(!(57408<=F&&F<=60351))throw"illegal char at "+(L+1)+"/"+F;F-=49472}F=192*(F>>>8&255)+(255&F),E.put(F,13),L+=2}if(L<M.length)throw"illegal char at "+(L+1)}};return T},j=function(){var P=[],z={writeByte:function(A){P.push(255&A)},writeShort:function(A){z.writeByte(A),z.writeByte(A>>>8)},writeBytes:function(A,T,E){T=T||0,E=E||A.length;for(var M=0;M<E;M+=1)z.writeByte(A[M+T])},writeString:function(A){for(var T=0;T<A.length;T+=1)z.writeByte(A.charCodeAt(T))},toByteArray:function(){return P},toString:function(){var A="";A+="[";for(var T=0;T<P.length;T+=1)T>0&&(A+=","),A+=P[T];return A+"]"}};return z},H=function(P){var z=P,A=0,T=0,E=0,M={read:function(){for(;E<8;){if(A>=z.length){if(E==0)return-1;throw"unexpected end of file./"+E}var F=z.charAt(A);if(A+=1,F=="=")return E=0,-1;F.match(/^\s$/)||(T=T<<6|L(F.charCodeAt(0)),E+=6)}var X=T>>>E-8&255;return E-=8,X}},L=function(F){if(65<=F&&F<=90)return F-65;if(97<=F&&F<=122)return F-97+26;if(48<=F&&F<=57)return F-48+52;if(F==43)return 62;if(F==47)return 63;throw"c:"+F};return M},G=function(P,z,A){for(var T=function(Y,ae){var he=Y,be=ae,me=new Array(Y*ae),we={setPixel:function($,Q,J){me[Q*he+$]=J},write:function($){$.writeString("GIF87a"),$.writeShort(he),$.writeShort(be),$.writeByte(128),$.writeByte(0),$.writeByte(0),$.writeByte(0),$.writeByte(0),$.writeByte(0),$.writeByte(255),$.writeByte(255),$.writeByte(255),$.writeString(","),$.writeShort(0),$.writeShort(0),$.writeShort(he),$.writeShort(be),$.writeByte(0);var Q=xe(2);$.writeByte(2);for(var J=0;Q.length-J>255;)$.writeByte(255),$.writeBytes(Q,J,255),J+=255;$.writeByte(Q.length-J),$.writeBytes(Q,J,Q.length-J),$.writeByte(0),$.writeString(";")}},xe=function($){for(var Q=1<<$,J=1+(1<<$),le=$+1,de=oe(),je=0;je<Q;je+=1)de.add(String.fromCharCode(je));de.add(String.fromCharCode(Q)),de.add(String.fromCharCode(J));var it,Ke,qe,Ge=j(),et=(it=Ge,Ke=0,qe=0,{write:function(Ie,Ve){if(Ie>>>Ve)throw"length over";for(;Ke+Ve>=8;)it.writeByte(255&(Ie<<Ke|qe)),Ve-=8-Ke,Ie>>>=8-Ke,qe=0,Ke=0;qe|=Ie<<Ke,Ke+=Ve},flush:function(){Ke>0&&it.writeByte(qe)}});et.write(Q,le);var rt=0,Qe=String.fromCharCode(me[rt]);for(rt+=1;rt<me.length;){var Ye=String.fromCharCode(me[rt]);rt+=1,de.contains(Qe+Ye)?Qe+=Ye:(et.write(de.indexOf(Qe),le),de.size()<4095&&(de.size()==1<<le&&(le+=1),de.add(Qe+Ye)),Qe=Ye)}return et.write(de.indexOf(Qe),le),et.write(J,le),et.flush(),Ge.toByteArray()},oe=function(){var $={},Q=0,J={add:function(le){if(J.contains(le))throw"dup key:"+le;$[le]=Q,Q+=1},size:function(){return Q},indexOf:function(le){return $[le]},contains:function(le){return $[le]!==void 0}};return J};return we}(P,z),E=0;E<z;E+=1)for(var M=0;M<P;M+=1)T.setPixel(M,E,A(M,E));var L=j();T.write(L);for(var F=function(){var Y=0,ae=0,he=0,be="",me={},we=function(oe){be+=String.fromCharCode(xe(63&oe))},xe=function(oe){if(!(oe<0)){if(oe<26)return 65+oe;if(oe<52)return oe-26+97;if(oe<62)return oe-52+48;if(oe==62)return 43;if(oe==63)return 47}throw"n:"+oe};return me.writeByte=function(oe){for(Y=Y<<8|255&oe,ae+=8,he+=1;ae>=6;)we(Y>>>ae-6),ae-=6},me.flush=function(){if(ae>0&&(we(Y<<6-ae),Y=0,ae=0),he%3!=0)for(var oe=3-he%3,$=0;$<oe;$+=1)be+="="},me.toString=function(){return be},me}(),X=L.toByteArray(),K=0;K<X.length;K+=1)F.writeByte(X[K]);return F.flush(),"data:image/gif;base64,"+F};return u}();l.stringToBytesFuncs["UTF-8"]=function(u){return function(c){for(var d=[],h=0;h<c.length;h++){var m=c.charCodeAt(h);m<128?d.push(m):m<2048?d.push(192|m>>6,128|63&m):m<55296||m>=57344?d.push(224|m>>12,128|m>>6&63,128|63&m):(h++,m=65536+((1023&m)<<10|1023&c.charCodeAt(h)),d.push(240|m>>18,128|m>>12&63,128|m>>6&63,128|63&m))}return d}(u)},(s=typeof(o=function(){return l})=="function"?o.apply(a,[]):o)===void 0||(i.exports=s)}},e={};function t(i){var a=e[i];if(a!==void 0)return a.exports;var o=e[i]={exports:{}};return r[i](o,o.exports,t),o.exports}t.n=i=>{var a=i&&i.__esModule?()=>i.default:()=>i;return t.d(a,{a}),a},t.d=(i,a)=>{for(var o in a)t.o(a,o)&&!t.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:a[o]})},t.o=(i,a)=>Object.prototype.hasOwnProperty.call(i,a);var n={};return(()=>{"use strict";t.d(n,{default:()=>z});let i=A=>!!A&&typeof A=="object"&&!Array.isArray(A);function a(A,...T){if(!T.length)return A;let E=T.shift();return E!==void 0&&i(A)&&i(E)?(A=Object.assign({},A),Object.keys(E).forEach(M=>{let L=A[M],F=E[M];Array.isArray(L)&&Array.isArray(F)?A[M]=F:i(L)&&i(F)?A[M]=a(Object.assign({},L),F):A[M]=F}),a(A,...T)):A}function o(A,T){let E=document.createElement("a");E.download=T,E.href=A,document.body.appendChild(E),E.click(),document.body.removeChild(E)}let s={L:.07,M:.15,Q:.25,H:.3};class l{constructor({svg:T,type:E,window:M}){this._svg=T,this._type=E,this._window=M}draw(T,E,M,L){let F;switch(this._type){case"dots":F=this._drawDot;break;case"classy":F=this._drawClassy;break;case"classy-rounded":F=this._drawClassyRounded;break;case"rounded":F=this._drawRounded;break;case"extra-rounded":F=this._drawExtraRounded;break;default:F=this._drawSquare}F.call(this,{x:T,y:E,size:M,getNeighbor:L})}_rotateFigure({x:T,y:E,size:M,rotation:L=0,draw:F}){var X;let K=T+M/2,Y=E+M/2;F(),(X=this._element)===null||X===void 0||X.setAttribute("transform",`rotate(${180*L/Math.PI},${K},${Y})`)}_basicDot(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(M+E/2)),this._element.setAttribute("cy",String(L+E/2)),this._element.setAttribute("r",String(E/2))}}))}_basicSquare(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(M)),this._element.setAttribute("y",String(L)),this._element.setAttribute("width",String(E)),this._element.setAttribute("height",String(E))}}))}_basicSideRounded(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${L}v ${E}h `+E/2+`a ${E/2} ${E/2}, 0, 0, 0, 0 ${-E}`)}}))}_basicCornerRounded(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${L}v ${E}h ${E}v `+-E/2+`a ${E/2} ${E/2}, 0, 0, 0, ${-E/2} ${-E/2}`)}}))}_basicCornerExtraRounded(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${L}v ${E}h ${E}a ${E} ${E}, 0, 0, 0, ${-E} ${-E}`)}}))}_basicCornersRounded(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${L}v `+E/2+`a ${E/2} ${E/2}, 0, 0, 0, ${E/2} ${E/2}h `+E/2+"v "+-E/2+`a ${E/2} ${E/2}, 0, 0, 0, ${-E/2} ${-E/2}`)}}))}_drawDot({x:T,y:E,size:M}){this._basicDot({x:T,y:E,size:M,rotation:0})}_drawSquare({x:T,y:E,size:M}){this._basicSquare({x:T,y:E,size:M,rotation:0})}_drawRounded({x:T,y:E,size:M,getNeighbor:L}){let F=L?+L(-1,0):0,X=L?+L(1,0):0,K=L?+L(0,-1):0,Y=L?+L(0,1):0,ae=F+X+K+Y;if(ae!==0)if(ae>2||F&&X||K&&Y)this._basicSquare({x:T,y:E,size:M,rotation:0});else{if(ae===2){let he=0;return F&&K?he=Math.PI/2:K&&X?he=Math.PI:X&&Y&&(he=-Math.PI/2),void this._basicCornerRounded({x:T,y:E,size:M,rotation:he})}if(ae===1){let he=0;return K?he=Math.PI/2:X?he=Math.PI:Y&&(he=-Math.PI/2),void this._basicSideRounded({x:T,y:E,size:M,rotation:he})}}else this._basicDot({x:T,y:E,size:M,rotation:0})}_drawExtraRounded({x:T,y:E,size:M,getNeighbor:L}){let F=L?+L(-1,0):0,X=L?+L(1,0):0,K=L?+L(0,-1):0,Y=L?+L(0,1):0,ae=F+X+K+Y;if(ae!==0)if(ae>2||F&&X||K&&Y)this._basicSquare({x:T,y:E,size:M,rotation:0});else{if(ae===2){let he=0;return F&&K?he=Math.PI/2:K&&X?he=Math.PI:X&&Y&&(he=-Math.PI/2),void this._basicCornerExtraRounded({x:T,y:E,size:M,rotation:he})}if(ae===1){let he=0;return K?he=Math.PI/2:X?he=Math.PI:Y&&(he=-Math.PI/2),void this._basicSideRounded({x:T,y:E,size:M,rotation:he})}}else this._basicDot({x:T,y:E,size:M,rotation:0})}_drawClassy({x:T,y:E,size:M,getNeighbor:L}){let F=L?+L(-1,0):0,X=L?+L(1,0):0,K=L?+L(0,-1):0,Y=L?+L(0,1):0;F+X+K+Y!==0?F||K?X||Y?this._basicSquare({x:T,y:E,size:M,rotation:0}):this._basicCornerRounded({x:T,y:E,size:M,rotation:Math.PI/2}):this._basicCornerRounded({x:T,y:E,size:M,rotation:-Math.PI/2}):this._basicCornersRounded({x:T,y:E,size:M,rotation:Math.PI/2})}_drawClassyRounded({x:T,y:E,size:M,getNeighbor:L}){let F=L?+L(-1,0):0,X=L?+L(1,0):0,K=L?+L(0,-1):0,Y=L?+L(0,1):0;F+X+K+Y!==0?F||K?X||Y?this._basicSquare({x:T,y:E,size:M,rotation:0}):this._basicCornerExtraRounded({x:T,y:E,size:M,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:T,y:E,size:M,rotation:-Math.PI/2}):this._basicCornersRounded({x:T,y:E,size:M,rotation:Math.PI/2})}}let u={dot:"dot",square:"square",extraRounded:"extra-rounded"},c=Object.values(u);class d{constructor({svg:T,type:E,window:M}){this._svg=T,this._type=E,this._window=M}draw(T,E,M,L){let F;switch(this._type){case u.square:F=this._drawSquare;break;case u.extraRounded:F=this._drawExtraRounded;break;default:F=this._drawDot}F.call(this,{x:T,y:E,size:M,rotation:L})}_rotateFigure({x:T,y:E,size:M,rotation:L=0,draw:F}){var X;let K=T+M/2,Y=E+M/2;F(),(X=this._element)===null||X===void 0||X.setAttribute("transform",`rotate(${180*L/Math.PI},${K},${Y})`)}_basicDot(T){let{size:E,x:M,y:L}=T,F=E/7;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M+E/2} ${L}a ${E/2} ${E/2} 0 1 0 0.1 0zm 0 ${F}a ${E/2-F} ${E/2-F} 0 1 1 -0.1 0Z`)}}))}_basicSquare(T){let{size:E,x:M,y:L}=T,F=E/7;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M} ${L}v ${E}h ${E}v `+-E+`zM ${M+F} ${L+F}h `+(E-2*F)+"v "+(E-2*F)+"h "+(2*F-E)+"z")}}))}_basicExtraRounded(T){let{size:E,x:M,y:L}=T,F=E/7;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M} ${L+2.5*F}v `+2*F+`a ${2.5*F} ${2.5*F}, 0, 0, 0, ${2.5*F} ${2.5*F}h `+2*F+`a ${2.5*F} ${2.5*F}, 0, 0, 0, ${2.5*F} ${2.5*-F}v `+-2*F+`a ${2.5*F} ${2.5*F}, 0, 0, 0, ${2.5*-F} ${2.5*-F}h `+-2*F+`a ${2.5*F} ${2.5*F}, 0, 0, 0, ${2.5*-F} ${2.5*F}M ${M+2.5*F} ${L+F}h `+2*F+`a ${1.5*F} ${1.5*F}, 0, 0, 1, ${1.5*F} ${1.5*F}v `+2*F+`a ${1.5*F} ${1.5*F}, 0, 0, 1, ${1.5*-F} ${1.5*F}h `+-2*F+`a ${1.5*F} ${1.5*F}, 0, 0, 1, ${1.5*-F} ${1.5*-F}v `+-2*F+`a ${1.5*F} ${1.5*F}, 0, 0, 1, ${1.5*F} ${1.5*-F}`)}}))}_drawDot({x:T,y:E,size:M,rotation:L}){this._basicDot({x:T,y:E,size:M,rotation:L})}_drawSquare({x:T,y:E,size:M,rotation:L}){this._basicSquare({x:T,y:E,size:M,rotation:L})}_drawExtraRounded({x:T,y:E,size:M,rotation:L}){this._basicExtraRounded({x:T,y:E,size:M,rotation:L})}}let h={dot:"dot",square:"square"},m=Object.values(h);class g{constructor({svg:T,type:E,window:M}){this._svg=T,this._type=E,this._window=M}draw(T,E,M,L){let F;F=this._type===h.square?this._drawSquare:this._drawDot,F.call(this,{x:T,y:E,size:M,rotation:L})}_rotateFigure({x:T,y:E,size:M,rotation:L=0,draw:F}){var X;let K=T+M/2,Y=E+M/2;F(),(X=this._element)===null||X===void 0||X.setAttribute("transform",`rotate(${180*L/Math.PI},${K},${Y})`)}_basicDot(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(M+E/2)),this._element.setAttribute("cy",String(L+E/2)),this._element.setAttribute("r",String(E/2))}}))}_basicSquare(T){let{size:E,x:M,y:L}=T;this._rotateFigure(Object.assign(Object.assign({},T),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(M)),this._element.setAttribute("y",String(L)),this._element.setAttribute("width",String(E)),this._element.setAttribute("height",String(E))}}))}_drawDot({x:T,y:E,size:M,rotation:L}){this._basicDot({x:T,y:E,size:M,rotation:L})}_drawSquare({x:T,y:E,size:M,rotation:L}){this._basicSquare({x:T,y:E,size:M,rotation:L})}}let C="circle",y=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],w=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],x=(()=>{class A{constructor(E,M){this._roundSize=L=>this._options.dotsOptions.roundSize?Math.floor(L):L,this._window=M,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(E.width)),this._element.setAttribute("height",String(E.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),E.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${E.width} ${E.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=E.image,this._instanceId=A.instanceCount++,this._options=E}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}drawQR(E){return zr(this,null,function*(){let M=E.getModuleCount(),L=Math.min(this._options.width,this._options.height)-2*this._options.margin,F=this._options.shape===C?L/Math.sqrt(2):L,X=this._roundSize(F/M),K={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=E,this._options.image){if(yield this.loadImage(),!this._image)return;let{imageOptions:Y,qrOptions:ae}=this._options,he=Y.imageSize*s[ae.errorCorrectionLevel],be=Math.floor(he*M*M);K=function({originalHeight:me,originalWidth:we,maxHiddenDots:xe,maxHiddenAxisDots:oe,dotSize:$}){let Q={x:0,y:0},J={x:0,y:0};if(me<=0||we<=0||xe<=0||$<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};let le=me/we;return Q.x=Math.floor(Math.sqrt(xe/le)),Q.x<=0&&(Q.x=1),oe&&oe<Q.x&&(Q.x=oe),Q.x%2==0&&Q.x--,J.x=Q.x*$,Q.y=1+2*Math.ceil((Q.x*le-1)/2),J.y=Math.round(J.x*le),(Q.y*Q.x>xe||oe&&oe<Q.y)&&(oe&&oe<Q.y?(Q.y=oe,Q.y%2==0&&Q.x--):Q.y-=2,J.y=Q.y*$,Q.x=1+2*Math.ceil((Q.y/le-1)/2),J.x=Math.round(J.y/le)),{height:J.y,width:J.x,hideYDots:Q.y,hideXDots:Q.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:be,maxHiddenAxisDots:M-14,dotSize:X})}this.drawBackground(),this.drawDots((Y,ae)=>{var he,be,me,we,xe,oe;return!(this._options.imageOptions.hideBackgroundDots&&Y>=(M-K.hideYDots)/2&&Y<(M+K.hideYDots)/2&&ae>=(M-K.hideXDots)/2&&ae<(M+K.hideXDots)/2||!((he=y[Y])===null||he===void 0)&&he[ae]||!((be=y[Y-M+7])===null||be===void 0)&&be[ae]||!((me=y[Y])===null||me===void 0)&&me[ae-M+7]||!((we=w[Y])===null||we===void 0)&&we[ae]||!((xe=w[Y-M+7])===null||xe===void 0)&&xe[ae]||!((oe=w[Y])===null||oe===void 0)&&oe[ae-M+7])}),this.drawCorners(),this._options.image&&(yield this.drawImage({width:K.width,height:K.height,count:M,dotSize:X}))})}drawBackground(){var E,M,L;let F=this._element,X=this._options;if(F){let K=(E=X.backgroundOptions)===null||E===void 0?void 0:E.gradient,Y=(M=X.backgroundOptions)===null||M===void 0?void 0:M.color,ae=X.height,he=X.width;if(K||Y){let be=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((L=X.backgroundOptions)===null||L===void 0)&&L.round&&(ae=he=Math.min(X.width,X.height),be.setAttribute("rx",String(ae/2*X.backgroundOptions.round))),be.setAttribute("x",String(this._roundSize((X.width-he)/2))),be.setAttribute("y",String(this._roundSize((X.height-ae)/2))),be.setAttribute("width",String(he)),be.setAttribute("height",String(ae)),this._backgroundClipPath.appendChild(be),this._createColor({options:K,color:Y,additionalRotation:0,x:0,y:0,height:X.height,width:X.width,name:`background-color-${this._instanceId}`})}}}drawDots(E){var M,L;if(!this._qr)throw"QR code is not defined";let F=this._options,X=this._qr.getModuleCount();if(X>F.width||X>F.height)throw"The canvas is too small.";let K=Math.min(F.width,F.height)-2*F.margin,Y=F.shape===C?K/Math.sqrt(2):K,ae=this._roundSize(Y/X),he=this._roundSize((F.width-X*ae)/2),be=this._roundSize((F.height-X*ae)/2),me=new l({svg:this._element,type:F.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(M=F.dotsOptions)===null||M===void 0?void 0:M.gradient,color:F.dotsOptions.color,additionalRotation:0,x:0,y:0,height:F.height,width:F.width,name:`dot-color-${this._instanceId}`});for(let we=0;we<X;we++)for(let xe=0;xe<X;xe++)E&&!E(we,xe)||!((L=this._qr)===null||L===void 0)&&L.isDark(we,xe)&&(me.draw(he+xe*ae,be+we*ae,ae,(oe,$)=>!(xe+oe<0||we+$<0||xe+oe>=X||we+$>=X)&&!(E&&!E(we+$,xe+oe))&&!!this._qr&&this._qr.isDark(we+$,xe+oe)),me._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(me._element));if(F.shape===C){let we=this._roundSize((K/ae-X)/2),xe=X+2*we,oe=he-we*ae,$=be-we*ae,Q=[],J=this._roundSize(xe/2);for(let le=0;le<xe;le++){Q[le]=[];for(let de=0;de<xe;de++)le>=we-1&&le<=xe-we&&de>=we-1&&de<=xe-we||Math.sqrt((le-J)*(le-J)+(de-J)*(de-J))>J?Q[le][de]=0:Q[le][de]=this._qr.isDark(de-2*we<0?de:de>=X?de-2*we:de-we,le-2*we<0?le:le>=X?le-2*we:le-we)?1:0}for(let le=0;le<xe;le++)for(let de=0;de<xe;de++)Q[le][de]&&(me.draw(oe+de*ae,$+le*ae,ae,(je,it)=>{var Ke;return!!(!((Ke=Q[le+it])===null||Ke===void 0)&&Ke[de+je])}),me._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(me._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";let E=this._element,M=this._options;if(!E)throw"Element code is not defined";let L=this._qr.getModuleCount(),F=Math.min(M.width,M.height)-2*M.margin,X=M.shape===C?F/Math.sqrt(2):F,K=this._roundSize(X/L),Y=7*K,ae=3*K,he=this._roundSize((M.width-L*K)/2),be=this._roundSize((M.height-L*K)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([me,we,xe])=>{var oe,$,Q,J,le,de,je,it,Ke,qe,Ge,et,rt,Qe;let Ye=he+me*K*(L-7),Ie=be+we*K*(L-7),Ve=this._dotsClipPath,Re=this._dotsClipPath;if((!((oe=M.cornersSquareOptions)===null||oe===void 0)&&oe.gradient||!(($=M.cornersSquareOptions)===null||$===void 0)&&$.color)&&(Ve=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Ve.setAttribute("id",`clip-path-corners-square-color-${me}-${we}-${this._instanceId}`),this._defs.appendChild(Ve),this._cornersSquareClipPath=this._cornersDotClipPath=Re=Ve,this._createColor({options:(Q=M.cornersSquareOptions)===null||Q===void 0?void 0:Q.gradient,color:(J=M.cornersSquareOptions)===null||J===void 0?void 0:J.color,additionalRotation:xe,x:Ye,y:Ie,height:Y,width:Y,name:`corners-square-color-${me}-${we}-${this._instanceId}`})),((le=M.cornersSquareOptions)===null||le===void 0?void 0:le.type)&&c.includes(M.cornersSquareOptions.type)){let W=new d({svg:this._element,type:M.cornersSquareOptions.type,window:this._window});W.draw(Ye,Ie,Y,xe),W._element&&Ve&&Ve.appendChild(W._element)}else{let W=new l({svg:this._element,type:((de=M.cornersSquareOptions)===null||de===void 0?void 0:de.type)||M.dotsOptions.type,window:this._window});for(let se=0;se<y.length;se++)for(let Te=0;Te<y[se].length;Te++)!((je=y[se])===null||je===void 0)&&je[Te]&&(W.draw(Ye+Te*K,Ie+se*K,K,(ve,ge)=>{var ze;return!!(!((ze=y[se+ge])===null||ze===void 0)&&ze[Te+ve])}),W._element&&Ve&&Ve.appendChild(W._element))}if((!((it=M.cornersDotOptions)===null||it===void 0)&&it.gradient||!((Ke=M.cornersDotOptions)===null||Ke===void 0)&&Ke.color)&&(Re=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Re.setAttribute("id",`clip-path-corners-dot-color-${me}-${we}-${this._instanceId}`),this._defs.appendChild(Re),this._cornersDotClipPath=Re,this._createColor({options:(qe=M.cornersDotOptions)===null||qe===void 0?void 0:qe.gradient,color:(Ge=M.cornersDotOptions)===null||Ge===void 0?void 0:Ge.color,additionalRotation:xe,x:Ye+2*K,y:Ie+2*K,height:ae,width:ae,name:`corners-dot-color-${me}-${we}-${this._instanceId}`})),((et=M.cornersDotOptions)===null||et===void 0?void 0:et.type)&&m.includes(M.cornersDotOptions.type)){let W=new g({svg:this._element,type:M.cornersDotOptions.type,window:this._window});W.draw(Ye+2*K,Ie+2*K,ae,xe),W._element&&Re&&Re.appendChild(W._element)}else{let W=new l({svg:this._element,type:((rt=M.cornersDotOptions)===null||rt===void 0?void 0:rt.type)||M.dotsOptions.type,window:this._window});for(let se=0;se<w.length;se++)for(let Te=0;Te<w[se].length;Te++)!((Qe=w[se])===null||Qe===void 0)&&Qe[Te]&&(W.draw(Ye+Te*K,Ie+se*K,K,(ve,ge)=>{var ze;return!!(!((ze=w[se+ge])===null||ze===void 0)&&ze[Te+ve])}),W._element&&Re&&Re.appendChild(W._element))}})}loadImage(){return new Promise((E,M)=>{var L;let F=this._options;if(!F.image)return M("Image is not defined");if(!((L=F.nodeCanvas)===null||L===void 0)&&L.loadImage)F.nodeCanvas.loadImage(F.image).then(X=>{var K,Y;if(this._image=X,this._options.imageOptions.saveAsBlob){let ae=(K=F.nodeCanvas)===null||K===void 0?void 0:K.createCanvas(this._image.width,this._image.height);(Y=ae?.getContext("2d"))===null||Y===void 0||Y.drawImage(X,0,0),this._imageUri=ae?.toDataURL()}E()}).catch(M);else{let X=new this._window.Image;typeof F.imageOptions.crossOrigin=="string"&&(X.crossOrigin=F.imageOptions.crossOrigin),this._image=X,X.onload=()=>zr(this,null,function*(){this._options.imageOptions.saveAsBlob&&(this._imageUri=yield function(K,Y){return zr(this,null,function*(){return new Promise(ae=>{let he=new Y.XMLHttpRequest;he.onload=function(){let be=new Y.FileReader;be.onloadend=function(){ae(be.result)},be.readAsDataURL(he.response)},he.open("GET",K),he.responseType="blob",he.send()})})}(F.image||"",this._window)),E()}),X.src=F.image}})}drawImage(X){return zr(this,arguments,function*({width:E,height:M,count:L,dotSize:F}){let K=this._options,Y=this._roundSize((K.width-L*F)/2),ae=this._roundSize((K.height-L*F)/2),he=Y+this._roundSize(K.imageOptions.margin+(L*F-E)/2),be=ae+this._roundSize(K.imageOptions.margin+(L*F-M)/2),me=E-2*K.imageOptions.margin,we=M-2*K.imageOptions.margin,xe=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");xe.setAttribute("href",this._imageUri||""),xe.setAttribute("x",String(he)),xe.setAttribute("y",String(be)),xe.setAttribute("width",`${me}px`),xe.setAttribute("height",`${we}px`),this._element.appendChild(xe)})}_createColor({options:E,color:M,additionalRotation:L,x:F,y:X,height:K,width:Y,name:ae}){let he=Y>K?Y:K,be=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(be.setAttribute("x",String(F)),be.setAttribute("y",String(X)),be.setAttribute("height",String(K)),be.setAttribute("width",String(Y)),be.setAttribute("clip-path",`url('#clip-path-${ae}')`),E){let me;if(E.type==="radial")me=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),me.setAttribute("id",ae),me.setAttribute("gradientUnits","userSpaceOnUse"),me.setAttribute("fx",String(F+Y/2)),me.setAttribute("fy",String(X+K/2)),me.setAttribute("cx",String(F+Y/2)),me.setAttribute("cy",String(X+K/2)),me.setAttribute("r",String(he/2));else{let we=((E.rotation||0)+L)%(2*Math.PI),xe=(we+2*Math.PI)%(2*Math.PI),oe=F+Y/2,$=X+K/2,Q=F+Y/2,J=X+K/2;xe>=0&&xe<=.25*Math.PI||xe>1.75*Math.PI&&xe<=2*Math.PI?(oe-=Y/2,$-=K/2*Math.tan(we),Q+=Y/2,J+=K/2*Math.tan(we)):xe>.25*Math.PI&&xe<=.75*Math.PI?($-=K/2,oe-=Y/2/Math.tan(we),J+=K/2,Q+=Y/2/Math.tan(we)):xe>.75*Math.PI&&xe<=1.25*Math.PI?(oe+=Y/2,$+=K/2*Math.tan(we),Q-=Y/2,J-=K/2*Math.tan(we)):xe>1.25*Math.PI&&xe<=1.75*Math.PI&&($+=K/2,oe+=Y/2/Math.tan(we),J-=K/2,Q-=Y/2/Math.tan(we)),me=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),me.setAttribute("id",ae),me.setAttribute("gradientUnits","userSpaceOnUse"),me.setAttribute("x1",String(Math.round(oe))),me.setAttribute("y1",String(Math.round($))),me.setAttribute("x2",String(Math.round(Q))),me.setAttribute("y2",String(Math.round(J)))}E.colorStops.forEach(({offset:we,color:xe})=>{let oe=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");oe.setAttribute("offset",100*we+"%"),oe.setAttribute("stop-color",xe),me.appendChild(oe)}),be.setAttribute("fill",`url('#${ae}')`),this._defs.appendChild(me)}else M&&be.setAttribute("fill",M);this._element.appendChild(be)}}return A.instanceCount=0,A})(),k="canvas",O={};for(let A=0;A<=40;A++)O[A]=A;let p={type:k,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:O[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function I(A){let T=Object.assign({},A);if(!T.colorStops||!T.colorStops.length)throw"Field 'colorStops' is required in gradient";return T.rotation?T.rotation=Number(T.rotation):T.rotation=0,T.colorStops=T.colorStops.map(E=>Object.assign(Object.assign({},E),{offset:Number(E.offset)})),T}function N(A){let T=Object.assign({},A);return T.width=Number(T.width),T.height=Number(T.height),T.margin=Number(T.margin),T.imageOptions=Object.assign(Object.assign({},T.imageOptions),{hideBackgroundDots:!!T.imageOptions.hideBackgroundDots,imageSize:Number(T.imageOptions.imageSize),margin:Number(T.imageOptions.margin)}),T.margin>Math.min(T.width,T.height)&&(T.margin=Math.min(T.width,T.height)),T.dotsOptions=Object.assign({},T.dotsOptions),T.dotsOptions.gradient&&(T.dotsOptions.gradient=I(T.dotsOptions.gradient)),T.cornersSquareOptions&&(T.cornersSquareOptions=Object.assign({},T.cornersSquareOptions),T.cornersSquareOptions.gradient&&(T.cornersSquareOptions.gradient=I(T.cornersSquareOptions.gradient))),T.cornersDotOptions&&(T.cornersDotOptions=Object.assign({},T.cornersDotOptions),T.cornersDotOptions.gradient&&(T.cornersDotOptions.gradient=I(T.cornersDotOptions.gradient))),T.backgroundOptions&&(T.backgroundOptions=Object.assign({},T.backgroundOptions),T.backgroundOptions.gradient&&(T.backgroundOptions.gradient=I(T.backgroundOptions.gradient))),T}var j=t(873),H=t.n(j);function G(A){if(!A)throw new Error("Extension must be defined");A[0]==="."&&(A=A.substring(1));let T={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[A.toLowerCase()];if(!T)throw new Error(`Extension "${A}" is not supported`);return T}class P{constructor(T){T?.jsdom?this._window=new T.jsdom("",{resources:"usable"}).window:this._window=window,this._options=T?N(a(p,T)):p,this.update()}static _clearContainer(T){T&&(T.innerHTML="")}_setupSvg(){if(!this._qr)return;let T=new x(this._options,this._window);this._svg=T.getElement(),this._svgDrawingPromise=T.drawQR(this._qr).then(()=>{var E;this._svg&&((E=this._extension)===null||E===void 0||E.call(this,T.getElement(),this._options))})}_setupCanvas(){var T,E;this._qr&&(!((T=this._options.nodeCanvas)===null||T===void 0)&&T.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(E=this._svgDrawingPromise)===null||E===void 0?void 0:E.then(()=>{var M;if(!this._svg)return;let L=this._svg,F=new this._window.XMLSerializer().serializeToString(L),X=btoa(F),K=`data:${G("svg")};base64,${X}`;if(!((M=this._options.nodeCanvas)===null||M===void 0)&&M.loadImage)return this._options.nodeCanvas.loadImage(K).then(Y=>{var ae,he;Y.width=this._options.width,Y.height=this._options.height,(he=(ae=this._nodeCanvas)===null||ae===void 0?void 0:ae.getContext("2d"))===null||he===void 0||he.drawImage(Y,0,0)});{let Y=new this._window.Image;return new Promise(ae=>{Y.onload=()=>{var he,be;(be=(he=this._domCanvas)===null||he===void 0?void 0:he.getContext("2d"))===null||be===void 0||be.drawImage(Y,0,0),ae()},Y.src=K})}}))}_getElement(T="png"){return zr(this,null,function*(){if(!this._qr)throw"QR code is empty";return T.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),yield this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),yield this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)})}update(T){P._clearContainer(this._container),this._options=T?N(a(this._options,T)):this._options,this._options.data&&(this._qr=H()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(E){switch(!0){case/^[0-9]*$/.test(E):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(E):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===k?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(T){if(T){if(typeof T.appendChild!="function")throw"Container should be a single DOM node";this._options.type===k?this._domCanvas&&T.appendChild(this._domCanvas):this._svg&&T.appendChild(this._svg),this._container=T}}applyExtension(T){if(!T)throw"Extension function should be defined.";this._extension=T,this.update()}deleteExtension(){this._extension=void 0,this.update()}getRawData(T="png"){return zr(this,null,function*(){if(!this._qr)throw"QR code is empty";let E=yield this._getElement(T),M=G(T);if(!E)return null;if(T.toLowerCase()==="svg"){let L=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(E)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(L):new Blob([L],{type:M})}return new Promise(L=>{let F=E;if("toBuffer"in F)if(M==="image/png")L(F.toBuffer(M));else if(M==="image/jpeg")L(F.toBuffer(M));else{if(M!=="application/pdf")throw Error("Unsupported extension");L(F.toBuffer(M))}else"toBlob"in F&&F.toBlob(L,M,1)})})}download(T){return zr(this,null,function*(){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let E="png",M="qr";typeof T=="string"?(E=T,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof T=="object"&&T!==null&&(T.name&&(M=T.name),T.extension&&(E=T.extension));let L=yield this._getElement(E);if(L)if(E.toLowerCase()==="svg"){let F=new XMLSerializer().serializeToString(L);F=`<?xml version="1.0" standalone="no"?>\r
`+F,o(`data:${G(E)};charset=utf-8,${encodeURIComponent(F)}`,`${M}.svg`)}else o(L.toDataURL(G(E)),`${M}.${E}`)})}}let z=P})(),n.default})())});var gv=ho((es,Vc)=>{"use strict";(function(e,t){typeof es=="object"&&typeof Vc=="object"?Vc.exports=t():typeof define=="function"&&define.amd?define([],t):typeof es=="object"?es.cytoscapeEuler=t():e.cytoscapeEuler=t()})(es,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.i=function(n){return n},t.d=function(n,i,a){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},t.p="",t(t.s=11)}([function(r,e,t){"use strict";r.exports=Object.assign!=null?Object.assign.bind(Object):function(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a.forEach(function(s){Object.keys(s).forEach(function(l){return n[l]=s[l]})}),n}},function(r,e,t){"use strict";var n=t(0),i=Object.freeze({source:null,target:null,length:80,coeff:2e-4,weight:1});function a(s){return n({},i,s)}function o(s){var l=s.source,u=s.target,c=s.length<0?i.length:s.length,d=u.pos.x-l.pos.x,h=u.pos.y-l.pos.y,m=Math.sqrt(d*d+h*h);m===0&&(d=(Math.random()-.5)/50,h=(Math.random()-.5)/50,m=Math.sqrt(d*d+h*h));var g=m-c,C=(!s.coeff||s.coeff<0?i.springCoeff:s.coeff)*g/m*s.weight;l.force.x+=C*d,l.force.y+=C*h,u.force.x-=C*d,u.force.y-=C*h}r.exports={makeSpring:a,applySpring:o}},function(r,e,t){"use strict";var n=function(){function A(T,E){for(var M=0;M<E.length;M++){var L=E[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(T,L.key,L)}}return function(T,E,M){return E&&A(T.prototype,E),M&&A(T,M),T}}();function i(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}function a(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:A}function o(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);A.prototype=Object.create(T&&T.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(A,T):A.__proto__=T)}var s=t(13),l=t(0),u=t(4),c=t(10),d=c.tick,h=t(7),m=h.makeQuadtree,g=t(3),C=g.makeBody,y=t(1),w=y.makeSpring,_=function(T){return typeof T=="function"},x=function(T){return T.isParent()},k=function(T){return!x(T)},O=function(T){return T.locked()},p=function(T){return!O(T)},I=function(T){return x(T.source())||x(T.target())},N=function(T){return!I(T)},j=function(T){return T.scratch("euler").body},H=function(T){return x(T)?T.descendants().filter(k):T},G=function(T){var E=T.scratch("euler");return E||(E={},T.scratch("euler",E)),E},P=function(T,E){return _(T)?T(E):T},z=function(A){o(T,A);function T(E){return i(this,T),a(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,l({},u,E)))}return n(T,[{key:"prerun",value:function(M){var L=M;L.quadtree=m();var F=L.bodies=[];L.nodes.filter(function(K){return k(K)}).forEach(function(K){var Y=G(K),ae=C({pos:{x:Y.x,y:Y.y},mass:P(L.mass,K),locked:Y.locked});ae._cyNode=K,Y.body=ae,ae._scratch=Y,F.push(ae)});var X=L.springs=[];L.edges.filter(N).forEach(function(K){var Y=w({source:j(K.source()),target:j(K.target()),length:P(L.springLength,K),coeff:P(L.springCoeff,K)});Y._cyEdge=K;var ae=G(K);Y._scratch=ae,ae.spring=Y,X.push(Y)}),L.edges.filter(I).forEach(function(K){var Y=H(K.source()),ae=H(K.target());Y=[Y[0]],ae=[ae[0]],Y.forEach(function(he){ae.forEach(function(be){X.push(w({source:j(he),target:j(be),length:P(L.springLength,K),coeff:P(L.springCoeff,K)}))})})})}},{key:"tick",value:function(M){var L=d(M),F=L<=M.movementThreshold;return F}}]),T}(s);r.exports=z},function(r,e,t){"use strict";var n=Object.freeze({pos:{x:0,y:0},prevPos:{x:0,y:0},force:{x:0,y:0},velocity:{x:0,y:0},mass:1}),i=function(u){return{x:u.x,y:u.y}},a=function(u,c){return u??c},o=function(u,c){return i(a(u,c))};function s(l){var u={};return u.pos=o(l.pos,n.pos),u.prevPos=o(l.prevPos,u.pos),u.force=o(l.force,n.force),u.velocity=o(l.velocity,n.velocity),u.mass=l.mass!=null?l.mass:n.mass,u.locked=l.locked,u}r.exports={makeBody:s}},function(r,e,t){"use strict";var n=Object.freeze({springLength:function(a){return 80},springCoeff:function(a){return 8e-4},mass:function(a){return 4},gravity:-1.2,pull:.001,theta:.666,dragCoeff:.02,movementThreshold:1,timeStep:20});r.exports=n},function(r,e,t){"use strict";var n=.02;function i(a,o){var s=void 0;o!=null?s=o:a.dragCoeff!=null?s=a.dragCoeff:s=n,a.force.x-=s*a.velocity.x,a.force.y-=s*a.velocity.y}r.exports={applyDrag:i}},function(r,e,t){"use strict";function n(i,a){var o=0,s=0,l=0,u=0,c,d=i.length;if(d===0)return 0;for(c=0;c<d;++c){var h=i[c],m=a/h.mass;if(!h.grabbed){h.locked?(h.velocity.x=0,h.velocity.y=0):(h.velocity.x+=m*h.force.x,h.velocity.y+=m*h.force.y);var g=h.velocity.x,C=h.velocity.y,y=Math.sqrt(g*g+C*C);y>1&&(h.velocity.x=g/y,h.velocity.y=C/y),o=a*h.velocity.x,l=a*h.velocity.y,h.pos.x+=o,h.pos.y+=l,s+=Math.abs(o),u+=Math.abs(l)}}return(s*s+u*u)/d}r.exports={integrate:n}},function(r,e,t){"use strict";var n=t(9),i=t(8),a=function(d){d.x=0,d.y=0},o=function(d,h){var m=1e-8,g=Math.abs(d.x-h.x),C=Math.abs(d.y-h.y);return g<m&&C<m};function s(){var c=[],d=new i,h=[],m=0,g=C();function C(){var x=h[m];return x?(x.quad0=null,x.quad1=null,x.quad2=null,x.quad3=null,x.body=null,x.mass=x.massX=x.massY=0,x.left=x.right=x.top=x.bottom=0):(x=new n,h[m]=x),++m,x}function y(x,k,O,p){var I=c,N=void 0,j=void 0,H=void 0,G=void 0,P=0,z=0,A=1,T=0,E=1;I[0]=g,a(x.force);var M=-x.pos.x,L=-x.pos.y,F=Math.sqrt(M*M+L*L),X=x.mass*p/F;for(P+=X*M,z+=X*L;A;){var K=I[T],Y=K.body;A-=1,T+=1;var ae=Y!==x;Y&&ae?(j=Y.pos.x-x.pos.x,H=Y.pos.y-x.pos.y,G=Math.sqrt(j*j+H*H),G===0&&(j=(Math.random()-.5)/50,H=(Math.random()-.5)/50,G=Math.sqrt(j*j+H*H)),N=k*Y.mass*x.mass/(G*G*G),P+=N*j,z+=N*H):ae&&(j=K.massX/K.mass-x.pos.x,H=K.massY/K.mass-x.pos.y,G=Math.sqrt(j*j+H*H),G===0&&(j=(Math.random()-.5)/50,H=(Math.random()-.5)/50,G=Math.sqrt(j*j+H*H)),(K.right-K.left)/G<O?(N=k*K.mass*x.mass/(G*G*G),P+=N*j,z+=N*H):(K.quad0&&(I[E]=K.quad0,A+=1,E+=1),K.quad1&&(I[E]=K.quad1,A+=1,E+=1),K.quad2&&(I[E]=K.quad2,A+=1,E+=1),K.quad3&&(I[E]=K.quad3,A+=1,E+=1)))}x.force.x+=P,x.force.y+=z}function w(x){if(x.length!==0){var k=Number.MAX_VALUE,O=Number.MAX_VALUE,p=Number.MIN_VALUE,I=Number.MIN_VALUE,N=void 0,j=x.length;for(N=j;N--;){var H=x[N].pos.x,G=x[N].pos.y;H<k&&(k=H),H>p&&(p=H),G<O&&(O=G),G>I&&(I=G)}var P=p-k,z=I-O;for(P>z?I=O+P:p=k+z,m=0,g=C(),g.left=k,g.right=p,g.top=O,g.bottom=I,N=j-1,N>=0&&(g.body=x[N]);N--;)_(x[N],g)}}function _(x){for(d.reset(),d.push(g,x);!d.isEmpty();){var k=d.pop(),O=k.node,p=k.body;if(O.body){var T=O.body;if(O.body=null,o(T.pos,p.pos)){var E=3;do{var M=Math.random(),L=(O.right-O.left)*M,F=(O.bottom-O.top)*M;T.pos.x=O.left+L,T.pos.y=O.top+F,E-=1}while(E>0&&o(T.pos,p.pos));if(E===0&&o(T.pos,p.pos))return}d.push(O,T),d.push(O,p)}else{var I=p.pos.x,N=p.pos.y;O.mass=O.mass+p.mass,O.massX=O.massX+p.mass*I,O.massY=O.massY+p.mass*N;var j=0,H=O.left,G=(O.right+H)/2,P=O.top,z=(O.bottom+P)/2;I>G&&(j=j+1,H=G,G=O.right),N>z&&(j=j+2,P=z,z=O.bottom);var A=l(O,j);A?d.push(A,p):(A=C(),A.left=H,A.top=P,A.right=G,A.bottom=z,A.body=p,u(O,j,A))}}}return{insertBodies:w,updateBodyForce:y}}function l(c,d){return d===0?c.quad0:d===1?c.quad1:d===2?c.quad2:d===3?c.quad3:null}function u(c,d,h){d===0?c.quad0=h:d===1?c.quad1=h:d===2?c.quad2=h:d===3&&(c.quad3=h)}r.exports={makeQuadtree:s}},function(r,e,t){"use strict";r.exports=n;function n(){this.stack=[],this.popIdx=0}n.prototype={isEmpty:function(){return this.popIdx===0},push:function(o,s){var l=this.stack[this.popIdx];l?(l.node=o,l.body=s):this.stack[this.popIdx]=new i(o,s),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};function i(a,o){this.node=a,this.body=o}},function(r,e,t){"use strict";r.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(r,e,t){"use strict";var n=t(6),i=n.integrate,a=t(5),o=a.applyDrag,s=t(1),l=s.applySpring;function u(c){var d=c.bodies,h=c.springs,m=c.quadtree,g=c.timeStep,C=c.gravity,y=c.theta,w=c.dragCoeff,_=c.pull;d.forEach(function(N){var j=N._scratch;j&&(N.locked=j.locked,N.grabbed=j.grabbed,N.pos.x=j.x,N.pos.y=j.y)}),m.insertBodies(d);for(var x=0;x<d.length;x++){var k=d[x];m.updateBodyForce(k,C,y,_),o(k,w)}for(var O=0;O<h.length;O++){var p=h[O];l(p)}var I=i(d,g);return d.forEach(function(N){var j=N._scratch;j&&(j.x=N.pos.x,j.y=N.pos.y)}),I}r.exports={tick:u}},function(r,e,t){"use strict";var n=t(2),i=function(o){o&&o("layout","euler",n)};typeof cytoscape<"u"&&i(cytoscape),r.exports=i},function(r,e,t){"use strict";r.exports=Object.freeze({animate:!0,refresh:10,maxIterations:1e3,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,infinite:!1})},function(r,e,t){"use strict";var n=function(){function C(y,w){for(var _=0;_<w.length;_++){var x=w[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,w,_){return w&&C(y.prototype,w),_&&C(y,_),y}}();function i(C,y){if(!(C instanceof y))throw new TypeError("Cannot call a class as a function")}var a=t(0),o=t(12),s=t(14),l=t(15),u=l.setInitialPositionState,c=l.refreshPositions,d=l.getNodePositionData,h=t(16),m=h.multitick,g=function(){function C(y){i(this,C);var w=this.options=a({},o,y),_=w.eles.nodes();if(!w.randomize){_=_.sort(function(p,I){return p.position().x-I.position().x});var x={x:0,y:0},k={};_.forEach(function(p){Object.assign(k,p.position()),Math.abs(x.x-k.x)<w.theta&&Math.abs(x.y-k.y)<w.theta&&p.position({x:Math.random()*100,y:Math.random()*100}),Object.assign(x,k)})}var O=this.state=a({},w,{layout:this,nodes:_,edges:w.eles.edges(),tickIndex:0,firstUpdate:!0});O.animateEnd=w.animate&&w.animate==="end",O.animateContinuously=w.animate&&!O.animateEnd}return n(C,[{key:"run",value:function(){var w=this,_=this.state;if(_.tickIndex=0,_.firstUpdate=!0,_.startTime=Date.now(),_.running=!0,_.currentBoundingBox=s(_.boundingBox,_.cy),_.ready&&w.one("ready",_.ready),_.stop&&w.one("stop",_.stop),_.nodes.forEach(function(L){return u(L,_)}),w.prerun(_),_.animateContinuously){var x=function(F){if(_.ungrabifyWhileSimulating){var X=d(F,_).grabbable=F.grabbable();X&&F.ungrabify()}},k=function(F){if(_.ungrabifyWhileSimulating){var X=d(F,_).grabbable;X&&F.grabify()}},O=function(F){return d(F,_).grabbed=F.grabbed()},p=function(F){var X=F.target;O(X)},I=p,N=function(F){var X=F.target,K=d(X,_),Y=X.position();K.x=Y.x,K.y=Y.y},j=function(F){F.on("grab",p),F.on("free",I),F.on("drag",N)},H=function(F){F.removeListener("grab",p),F.removeListener("free",I),F.removeListener("drag",N)},G=function(){_.fit&&_.animateContinuously&&_.cy.fit(_.padding)},P=function(){c(_.nodes,_),G(),requestAnimationFrame(z)},z=function(){m(_,P,A)},A=function(){c(_.nodes,_),G(),_.nodes.forEach(function(F){k(F),H(F)}),_.running=!1,w.emit("layoutstop")};w.emit("layoutstart"),_.nodes.forEach(function(L){x(L),j(L)}),z()}else{for(var T=!1,E=function(){},M=function(){return T=!0};!T;)m(_,E,M);_.eles.layoutPositions(this,_,function(L){var F=d(L,_);return{x:F.x,y:F.y}})}return w.postrun(_),this}},{key:"prerun",value:function(){}},{key:"postrun",value:function(){}},{key:"tick",value:function(){}},{key:"stop",value:function(){return this.state.running=!1,this}},{key:"destroy",value:function(){return this}}]),C}();r.exports=g},function(r,e,t){"use strict";r.exports=function(n,i){return n==null?n={x1:0,y1:0,w:i.width(),h:i.height()}:n={x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2,w:n.w,h:n.h},n.x2==null&&(n.x2=n.x1+n.w),n.w==null&&(n.w=n.x2-n.x1),n.y2==null&&(n.y2=n.y1+n.h),n.h==null&&(n.h=n.y2-n.y1),n}},function(r,e,t){"use strict";var n=t(0),i=function(l,u){var c=l.position(),d=u.currentBoundingBox,h=l.scratch(u.name);h==null&&(h={},l.scratch(u.name,h)),n(h,u.randomize?{x:d.x1+Math.random()*d.w,y:d.y1+Math.random()*d.h}:{x:c.x,y:c.y}),h.locked=l.locked()},a=function(l,u){return l.scratch(u.name)},o=function(l,u){l.positions(function(c){var d=c.scratch(u.name);return{x:d.x,y:d.y}})};r.exports={setInitialPositionState:i,getNodePositionData:a,refreshPositions:o}},function(r,e,t){"use strict";var n=function(){},i=function(s){var l=s,u=s.layout,c=u.tick(l);l.firstUpdate&&(l.animateContinuously&&l.layout.emit("layoutready"),l.firstUpdate=!1),l.tickIndex++;var d=Date.now()-l.startTime;return!l.infinite&&(c||l.tickIndex>=l.maxIterations||d>=l.maxSimulationTime)},a=function(s){for(var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n,c=!1,d=s,h=0;h<d.refresh&&(c=!d.running||i(d),!c);h++);c?u():l()};r.exports={tick:i,multitick:a}}])})});var yv=ho((mv,ru)=>{"use strict";(function(r,e){"use strict";typeof ru=="object"&&typeof ru.exports=="object"?ru.exports=r.document?e(r,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(r)})(typeof window<"u"?window:mv,function(r,e){"use strict";var t=[],n=Object.getPrototypeOf,i=t.slice,a=t.flat?function(f){return t.flat.call(f)}:function(f){return t.concat.apply([],f)},o=t.push,s=t.indexOf,l={},u=l.toString,c=l.hasOwnProperty,d=c.toString,h=d.call(Object),m={},g=function(v){return typeof v=="function"&&typeof v.nodeType!="number"&&typeof v.item!="function"},C=function(v){return v!=null&&v===v.window},y=r.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function _(f,v,b){b=b||y;var S,B,R=b.createElement("script");if(R.text=f,v)for(S in w)B=v[S]||v.getAttribute&&v.getAttribute(S),B&&R.setAttribute(S,B);b.head.appendChild(R).parentNode.removeChild(R)}function x(f){return f==null?f+"":typeof f=="object"||typeof f=="function"?l[u.call(f)]||"object":typeof f}var k="3.7.1",O=/HTML$/i,p=function(f,v){return new p.fn.init(f,v)};p.fn=p.prototype={jquery:k,constructor:p,length:0,toArray:function(){return i.call(this)},get:function(f){return f==null?i.call(this):f<0?this[f+this.length]:this[f]},pushStack:function(f){var v=p.merge(this.constructor(),f);return v.prevObject=this,v},each:function(f){return p.each(this,f)},map:function(f){return this.pushStack(p.map(this,function(v,b){return f.call(v,b,v)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(f,v){return(v+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(f,v){return v%2}))},eq:function(f){var v=this.length,b=+f+(f<0?v:0);return this.pushStack(b>=0&&b<v?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:t.sort,splice:t.splice},p.extend=p.fn.extend=function(){var f,v,b,S,B,R,q=arguments[0]||{},ie=1,te=arguments.length,pe=!1;for(typeof q=="boolean"&&(pe=q,q=arguments[ie]||{},ie++),typeof q!="object"&&!g(q)&&(q={}),ie===te&&(q=this,ie--);ie<te;ie++)if((f=arguments[ie])!=null)for(v in f)S=f[v],!(v==="__proto__"||q===S)&&(pe&&S&&(p.isPlainObject(S)||(B=Array.isArray(S)))?(b=q[v],B&&!Array.isArray(b)?R=[]:!B&&!p.isPlainObject(b)?R={}:R=b,B=!1,q[v]=p.extend(pe,R,S)):S!==void 0&&(q[v]=S));return q},p.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(f){throw new Error(f)},noop:function(){},isPlainObject:function(f){var v,b;return!f||u.call(f)!=="[object Object]"?!1:(v=n(f),v?(b=c.call(v,"constructor")&&v.constructor,typeof b=="function"&&d.call(b)===h):!0)},isEmptyObject:function(f){var v;for(v in f)return!1;return!0},globalEval:function(f,v,b){_(f,{nonce:v&&v.nonce},b)},each:function(f,v){var b,S=0;if(I(f))for(b=f.length;S<b&&v.call(f[S],S,f[S])!==!1;S++);else for(S in f)if(v.call(f[S],S,f[S])===!1)break;return f},text:function(f){var v,b="",S=0,B=f.nodeType;if(!B)for(;v=f[S++];)b+=p.text(v);return B===1||B===11?f.textContent:B===9?f.documentElement.textContent:B===3||B===4?f.nodeValue:b},makeArray:function(f,v){var b=v||[];return f!=null&&(I(Object(f))?p.merge(b,typeof f=="string"?[f]:f):o.call(b,f)),b},inArray:function(f,v,b){return v==null?-1:s.call(v,f,b)},isXMLDoc:function(f){var v=f&&f.namespaceURI,b=f&&(f.ownerDocument||f).documentElement;return!O.test(v||b&&b.nodeName||"HTML")},merge:function(f,v){for(var b=+v.length,S=0,B=f.length;S<b;S++)f[B++]=v[S];return f.length=B,f},grep:function(f,v,b){for(var S,B=[],R=0,q=f.length,ie=!b;R<q;R++)S=!v(f[R],R),S!==ie&&B.push(f[R]);return B},map:function(f,v,b){var S,B,R=0,q=[];if(I(f))for(S=f.length;R<S;R++)B=v(f[R],R,b),B!=null&&q.push(B);else for(R in f)B=v(f[R],R,b),B!=null&&q.push(B);return a(q)},guid:1,support:m}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=t[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(f,v){l["[object "+v+"]"]=v.toLowerCase()});function I(f){var v=!!f&&"length"in f&&f.length,b=x(f);return g(f)||C(f)?!1:b==="array"||v===0||typeof v=="number"&&v>0&&v-1 in f}function N(f,v){return f.nodeName&&f.nodeName.toLowerCase()===v.toLowerCase()}var j=t.pop,H=t.sort,G=t.splice,P="[\\x20\\t\\r\\n\\f]",z=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");p.contains=function(f,v){var b=v&&v.parentNode;return f===b||!!(b&&b.nodeType===1&&(f.contains?f.contains(b):f.compareDocumentPosition&&f.compareDocumentPosition(b)&16))};var A=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function T(f,v){return v?f==="\0"?"\uFFFD":f.slice(0,-1)+"\\"+f.charCodeAt(f.length-1).toString(16)+" ":"\\"+f}p.escapeSelector=function(f){return(f+"").replace(A,T)};var E=y,M=o;(function(){var f,v,b,S,B,R=M,q,ie,te,pe,Ae,Fe=p.expando,Ee=0,Ue=0,Pt=rs(),Gt=rs(),Bt=rs(),Rr=rs(),_r=function(Z,ce){return Z===ce&&(B=!0),0},zn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",qn="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Vt="\\["+P+"*("+qn+")(?:"+P+"*([*^$|!~]?=)"+P+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+qn+"))|)"+P+"*\\]",ta=":("+qn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Vt+")*)|.*)\\)|)",Ht=new RegExp(P+"+","g"),hr=new RegExp("^"+P+"*,"+P+"*"),uo=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),vu=new RegExp(P+"|>"),Gn=new RegExp(ta),co=new RegExp("^"+qn+"$"),Hn={ID:new RegExp("^#("+qn+")"),CLASS:new RegExp("^\\.("+qn+")"),TAG:new RegExp("^("+qn+"|[*])"),ATTR:new RegExp("^"+Vt),PSEUDO:new RegExp("^"+ta),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+zn+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},Ci=/^(?:input|select|textarea|button)$/i,wi=/^h\d$/i,wn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gu=/[+~]/,li=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),ui=function(Z,ce){var Se="0x"+Z.slice(1)-65536;return ce||(Se<0?String.fromCharCode(Se+65536):String.fromCharCode(Se>>10|55296,Se&1023|56320))},ig=function(){xi()},ag=is(function(Z){return Z.disabled===!0&&N(Z,"fieldset")},{dir:"parentNode",next:"legend"});function og(){try{return q.activeElement}catch{}}try{R.apply(t=i.call(E.childNodes),E.childNodes),t[E.childNodes.length].nodeType}catch{R={apply:function(ce,Se){M.apply(ce,i.call(Se))},call:function(ce){M.apply(ce,i.call(arguments,1))}}}function Jt(Z,ce,Se,De){var Le,tt,lt,vt,ut,Lt,Mt,At=ce&&ce.ownerDocument,Ft=ce?ce.nodeType:9;if(Se=Se||[],typeof Z!="string"||!Z||Ft!==1&&Ft!==9&&Ft!==11)return Se;if(!De&&(xi(ce),ce=ce||q,te)){if(Ft!==11&&(ut=wn.exec(Z)))if(Le=ut[1]){if(Ft===9)if(lt=ce.getElementById(Le)){if(lt.id===Le)return R.call(Se,lt),Se}else return Se;else if(At&&(lt=At.getElementById(Le))&&Jt.contains(ce,lt)&&lt.id===Le)return R.call(Se,lt),Se}else{if(ut[2])return R.apply(Se,ce.getElementsByTagName(Z)),Se;if((Le=ut[3])&&ce.getElementsByClassName)return R.apply(Se,ce.getElementsByClassName(Le)),Se}if(!Rr[Z+" "]&&(!pe||!pe.test(Z))){if(Mt=Z,At=ce,Ft===1&&(vu.test(Z)||uo.test(Z))){for(At=gu.test(Z)&&mu(ce.parentNode)||ce,(At!=ce||!m.scope)&&((vt=ce.getAttribute("id"))?vt=p.escapeSelector(vt):ce.setAttribute("id",vt=Fe)),Lt=fo(Z),tt=Lt.length;tt--;)Lt[tt]=(vt?"#"+vt:":scope")+" "+ns(Lt[tt]);Mt=Lt.join(",")}try{return R.apply(Se,At.querySelectorAll(Mt)),Se}catch{Rr(Z,!0)}finally{vt===Fe&&ce.removeAttribute("id")}}}return af(Z.replace(z,"$1"),ce,Se,De)}function rs(){var Z=[];function ce(Se,De){return Z.push(Se+" ")>v.cacheLength&&delete ce[Z.shift()],ce[Se+" "]=De}return ce}function In(Z){return Z[Fe]=!0,Z}function wa(Z){var ce=q.createElement("fieldset");try{return!!Z(ce)}catch{return!1}finally{ce.parentNode&&ce.parentNode.removeChild(ce),ce=null}}function sg(Z){return function(ce){return N(ce,"input")&&ce.type===Z}}function lg(Z){return function(ce){return(N(ce,"input")||N(ce,"button"))&&ce.type===Z}}function rf(Z){return function(ce){return"form"in ce?ce.parentNode&&ce.disabled===!1?"label"in ce?"label"in ce.parentNode?ce.parentNode.disabled===Z:ce.disabled===Z:ce.isDisabled===Z||ce.isDisabled!==!Z&&ag(ce)===Z:ce.disabled===Z:"label"in ce?ce.disabled===Z:!1}}function ra(Z){return In(function(ce){return ce=+ce,In(function(Se,De){for(var Le,tt=Z([],Se.length,ce),lt=tt.length;lt--;)Se[Le=tt[lt]]&&(Se[Le]=!(De[Le]=Se[Le]))})})}function mu(Z){return Z&&typeof Z.getElementsByTagName<"u"&&Z}function xi(Z){var ce,Se=Z?Z.ownerDocument||Z:E;return Se==q||Se.nodeType!==9||!Se.documentElement||(q=Se,ie=q.documentElement,te=!p.isXMLDoc(q),Ae=ie.matches||ie.webkitMatchesSelector||ie.msMatchesSelector,ie.msMatchesSelector&&E!=q&&(ce=q.defaultView)&&ce.top!==ce&&ce.addEventListener("unload",ig),m.getById=wa(function(De){return ie.appendChild(De).id=p.expando,!q.getElementsByName||!q.getElementsByName(p.expando).length}),m.disconnectedMatch=wa(function(De){return Ae.call(De,"*")}),m.scope=wa(function(){return q.querySelectorAll(":scope")}),m.cssHas=wa(function(){try{return q.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(v.filter.ID=function(De){var Le=De.replace(li,ui);return function(tt){return tt.getAttribute("id")===Le}},v.find.ID=function(De,Le){if(typeof Le.getElementById<"u"&&te){var tt=Le.getElementById(De);return tt?[tt]:[]}}):(v.filter.ID=function(De){var Le=De.replace(li,ui);return function(tt){var lt=typeof tt.getAttributeNode<"u"&&tt.getAttributeNode("id");return lt&&lt.value===Le}},v.find.ID=function(De,Le){if(typeof Le.getElementById<"u"&&te){var tt,lt,vt,ut=Le.getElementById(De);if(ut){if(tt=ut.getAttributeNode("id"),tt&&tt.value===De)return[ut];for(vt=Le.getElementsByName(De),lt=0;ut=vt[lt++];)if(tt=ut.getAttributeNode("id"),tt&&tt.value===De)return[ut]}return[]}}),v.find.TAG=function(De,Le){return typeof Le.getElementsByTagName<"u"?Le.getElementsByTagName(De):Le.querySelectorAll(De)},v.find.CLASS=function(De,Le){if(typeof Le.getElementsByClassName<"u"&&te)return Le.getElementsByClassName(De)},pe=[],wa(function(De){var Le;ie.appendChild(De).innerHTML="<a id='"+Fe+"' href='' disabled='disabled'></a><select id='"+Fe+"-\r\\' disabled='disabled'><option selected=''></option></select>",De.querySelectorAll("[selected]").length||pe.push("\\["+P+"*(?:value|"+zn+")"),De.querySelectorAll("[id~="+Fe+"-]").length||pe.push("~="),De.querySelectorAll("a#"+Fe+"+*").length||pe.push(".#.+[+~]"),De.querySelectorAll(":checked").length||pe.push(":checked"),Le=q.createElement("input"),Le.setAttribute("type","hidden"),De.appendChild(Le).setAttribute("name","D"),ie.appendChild(De).disabled=!0,De.querySelectorAll(":disabled").length!==2&&pe.push(":enabled",":disabled"),Le=q.createElement("input"),Le.setAttribute("name",""),De.appendChild(Le),De.querySelectorAll("[name='']").length||pe.push("\\["+P+"*name"+P+"*="+P+`*(?:''|"")`)}),m.cssHas||pe.push(":has"),pe=pe.length&&new RegExp(pe.join("|")),_r=function(De,Le){if(De===Le)return B=!0,0;var tt=!De.compareDocumentPosition-!Le.compareDocumentPosition;return tt||(tt=(De.ownerDocument||De)==(Le.ownerDocument||Le)?De.compareDocumentPosition(Le):1,tt&1||!m.sortDetached&&Le.compareDocumentPosition(De)===tt?De===q||De.ownerDocument==E&&Jt.contains(E,De)?-1:Le===q||Le.ownerDocument==E&&Jt.contains(E,Le)?1:S?s.call(S,De)-s.call(S,Le):0:tt&4?-1:1)}),q}Jt.matches=function(Z,ce){return Jt(Z,null,null,ce)},Jt.matchesSelector=function(Z,ce){if(xi(Z),te&&!Rr[ce+" "]&&(!pe||!pe.test(ce)))try{var Se=Ae.call(Z,ce);if(Se||m.disconnectedMatch||Z.document&&Z.document.nodeType!==11)return Se}catch{Rr(ce,!0)}return Jt(ce,q,null,[Z]).length>0},Jt.contains=function(Z,ce){return(Z.ownerDocument||Z)!=q&&xi(Z),p.contains(Z,ce)},Jt.attr=function(Z,ce){(Z.ownerDocument||Z)!=q&&xi(Z);var Se=v.attrHandle[ce.toLowerCase()],De=Se&&c.call(v.attrHandle,ce.toLowerCase())?Se(Z,ce,!te):void 0;return De!==void 0?De:Z.getAttribute(ce)},Jt.error=function(Z){throw new Error("Syntax error, unrecognized expression: "+Z)},p.uniqueSort=function(Z){var ce,Se=[],De=0,Le=0;if(B=!m.sortStable,S=!m.sortStable&&i.call(Z,0),H.call(Z,_r),B){for(;ce=Z[Le++];)ce===Z[Le]&&(De=Se.push(Le));for(;De--;)G.call(Z,Se[De],1)}return S=null,Z},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(i.apply(this)))},v=p.expr={cacheLength:50,createPseudo:In,match:Hn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Z){return Z[1]=Z[1].replace(li,ui),Z[3]=(Z[3]||Z[4]||Z[5]||"").replace(li,ui),Z[2]==="~="&&(Z[3]=" "+Z[3]+" "),Z.slice(0,4)},CHILD:function(Z){return Z[1]=Z[1].toLowerCase(),Z[1].slice(0,3)==="nth"?(Z[3]||Jt.error(Z[0]),Z[4]=+(Z[4]?Z[5]+(Z[6]||1):2*(Z[3]==="even"||Z[3]==="odd")),Z[5]=+(Z[7]+Z[8]||Z[3]==="odd")):Z[3]&&Jt.error(Z[0]),Z},PSEUDO:function(Z){var ce,Se=!Z[6]&&Z[2];return Hn.CHILD.test(Z[0])?null:(Z[3]?Z[2]=Z[4]||Z[5]||"":Se&&Gn.test(Se)&&(ce=fo(Se,!0))&&(ce=Se.indexOf(")",Se.length-ce)-Se.length)&&(Z[0]=Z[0].slice(0,ce),Z[2]=Se.slice(0,ce)),Z.slice(0,3))}},filter:{TAG:function(Z){var ce=Z.replace(li,ui).toLowerCase();return Z==="*"?function(){return!0}:function(Se){return N(Se,ce)}},CLASS:function(Z){var ce=Pt[Z+" "];return ce||(ce=new RegExp("(^|"+P+")"+Z+"("+P+"|$)"))&&Pt(Z,function(Se){return ce.test(typeof Se.className=="string"&&Se.className||typeof Se.getAttribute<"u"&&Se.getAttribute("class")||"")})},ATTR:function(Z,ce,Se){return function(De){var Le=Jt.attr(De,Z);return Le==null?ce==="!=":ce?(Le+="",ce==="="?Le===Se:ce==="!="?Le!==Se:ce==="^="?Se&&Le.indexOf(Se)===0:ce==="*="?Se&&Le.indexOf(Se)>-1:ce==="$="?Se&&Le.slice(-Se.length)===Se:ce==="~="?(" "+Le.replace(Ht," ")+" ").indexOf(Se)>-1:ce==="|="?Le===Se||Le.slice(0,Se.length+1)===Se+"-":!1):!0}},CHILD:function(Z,ce,Se,De,Le){var tt=Z.slice(0,3)!=="nth",lt=Z.slice(-4)!=="last",vt=ce==="of-type";return De===1&&Le===0?function(ut){return!!ut.parentNode}:function(ut,Lt,Mt){var At,Ft,_t,rr,rn,Vr=tt!==lt?"nextSibling":"previousSibling",xn=ut.parentNode,Wn=vt&&ut.nodeName.toLowerCase(),xa=!Mt&&!vt,Qr=!1;if(xn){if(tt){for(;Vr;){for(_t=ut;_t=_t[Vr];)if(vt?N(_t,Wn):_t.nodeType===1)return!1;rn=Vr=Z==="only"&&!rn&&"nextSibling"}return!0}if(rn=[lt?xn.firstChild:xn.lastChild],lt&&xa){for(Ft=xn[Fe]||(xn[Fe]={}),At=Ft[Z]||[],rr=At[0]===Ee&&At[1],Qr=rr&&At[2],_t=rr&&xn.childNodes[rr];_t=++rr&&_t&&_t[Vr]||(Qr=rr=0)||rn.pop();)if(_t.nodeType===1&&++Qr&&_t===ut){Ft[Z]=[Ee,rr,Qr];break}}else if(xa&&(Ft=ut[Fe]||(ut[Fe]={}),At=Ft[Z]||[],rr=At[0]===Ee&&At[1],Qr=rr),Qr===!1)for(;(_t=++rr&&_t&&_t[Vr]||(Qr=rr=0)||rn.pop())&&!((vt?N(_t,Wn):_t.nodeType===1)&&++Qr&&(xa&&(Ft=_t[Fe]||(_t[Fe]={}),Ft[Z]=[Ee,Qr]),_t===ut)););return Qr-=Le,Qr===De||Qr%De===0&&Qr/De>=0}}},PSEUDO:function(Z,ce){var Se,De=v.pseudos[Z]||v.setFilters[Z.toLowerCase()]||Jt.error("unsupported pseudo: "+Z);return De[Fe]?De(ce):De.length>1?(Se=[Z,Z,"",ce],v.setFilters.hasOwnProperty(Z.toLowerCase())?In(function(Le,tt){for(var lt,vt=De(Le,ce),ut=vt.length;ut--;)lt=s.call(Le,vt[ut]),Le[lt]=!(tt[lt]=vt[ut])}):function(Le){return De(Le,0,Se)}):De}},pseudos:{not:In(function(Z){var ce=[],Se=[],De=wu(Z.replace(z,"$1"));return De[Fe]?In(function(Le,tt,lt,vt){for(var ut,Lt=De(Le,null,vt,[]),Mt=Le.length;Mt--;)(ut=Lt[Mt])&&(Le[Mt]=!(tt[Mt]=ut))}):function(Le,tt,lt){return ce[0]=Le,De(ce,null,lt,Se),ce[0]=null,!Se.pop()}}),has:In(function(Z){return function(ce){return Jt(Z,ce).length>0}}),contains:In(function(Z){return Z=Z.replace(li,ui),function(ce){return(ce.textContent||p.text(ce)).indexOf(Z)>-1}}),lang:In(function(Z){return co.test(Z||"")||Jt.error("unsupported lang: "+Z),Z=Z.replace(li,ui).toLowerCase(),function(ce){var Se;do if(Se=te?ce.lang:ce.getAttribute("xml:lang")||ce.getAttribute("lang"))return Se=Se.toLowerCase(),Se===Z||Se.indexOf(Z+"-")===0;while((ce=ce.parentNode)&&ce.nodeType===1);return!1}}),target:function(Z){var ce=r.location&&r.location.hash;return ce&&ce.slice(1)===Z.id},root:function(Z){return Z===ie},focus:function(Z){return Z===og()&&q.hasFocus()&&!!(Z.type||Z.href||~Z.tabIndex)},enabled:rf(!1),disabled:rf(!0),checked:function(Z){return N(Z,"input")&&!!Z.checked||N(Z,"option")&&!!Z.selected},selected:function(Z){return Z.parentNode&&Z.parentNode.selectedIndex,Z.selected===!0},empty:function(Z){for(Z=Z.firstChild;Z;Z=Z.nextSibling)if(Z.nodeType<6)return!1;return!0},parent:function(Z){return!v.pseudos.empty(Z)},header:function(Z){return wi.test(Z.nodeName)},input:function(Z){return Ci.test(Z.nodeName)},button:function(Z){return N(Z,"input")&&Z.type==="button"||N(Z,"button")},text:function(Z){var ce;return N(Z,"input")&&Z.type==="text"&&((ce=Z.getAttribute("type"))==null||ce.toLowerCase()==="text")},first:ra(function(){return[0]}),last:ra(function(Z,ce){return[ce-1]}),eq:ra(function(Z,ce,Se){return[Se<0?Se+ce:Se]}),even:ra(function(Z,ce){for(var Se=0;Se<ce;Se+=2)Z.push(Se);return Z}),odd:ra(function(Z,ce){for(var Se=1;Se<ce;Se+=2)Z.push(Se);return Z}),lt:ra(function(Z,ce,Se){var De;for(Se<0?De=Se+ce:Se>ce?De=ce:De=Se;--De>=0;)Z.push(De);return Z}),gt:ra(function(Z,ce,Se){for(var De=Se<0?Se+ce:Se;++De<ce;)Z.push(De);return Z})}},v.pseudos.nth=v.pseudos.eq;for(f in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[f]=sg(f);for(f in{submit:!0,reset:!0})v.pseudos[f]=lg(f);function nf(){}nf.prototype=v.filters=v.pseudos,v.setFilters=new nf;function fo(Z,ce){var Se,De,Le,tt,lt,vt,ut,Lt=Gt[Z+" "];if(Lt)return ce?0:Lt.slice(0);for(lt=Z,vt=[],ut=v.preFilter;lt;){(!Se||(De=hr.exec(lt)))&&(De&&(lt=lt.slice(De[0].length)||lt),vt.push(Le=[])),Se=!1,(De=uo.exec(lt))&&(Se=De.shift(),Le.push({value:Se,type:De[0].replace(z," ")}),lt=lt.slice(Se.length));for(tt in v.filter)(De=Hn[tt].exec(lt))&&(!ut[tt]||(De=ut[tt](De)))&&(Se=De.shift(),Le.push({value:Se,type:tt,matches:De}),lt=lt.slice(Se.length));if(!Se)break}return ce?lt.length:lt?Jt.error(Z):Gt(Z,vt).slice(0)}function ns(Z){for(var ce=0,Se=Z.length,De="";ce<Se;ce++)De+=Z[ce].value;return De}function is(Z,ce,Se){var De=ce.dir,Le=ce.next,tt=Le||De,lt=Se&&tt==="parentNode",vt=Ue++;return ce.first?function(ut,Lt,Mt){for(;ut=ut[De];)if(ut.nodeType===1||lt)return Z(ut,Lt,Mt);return!1}:function(ut,Lt,Mt){var At,Ft,_t=[Ee,vt];if(Mt){for(;ut=ut[De];)if((ut.nodeType===1||lt)&&Z(ut,Lt,Mt))return!0}else for(;ut=ut[De];)if(ut.nodeType===1||lt)if(Ft=ut[Fe]||(ut[Fe]={}),Le&&N(ut,Le))ut=ut[De]||ut;else{if((At=Ft[tt])&&At[0]===Ee&&At[1]===vt)return _t[2]=At[2];if(Ft[tt]=_t,_t[2]=Z(ut,Lt,Mt))return!0}return!1}}function yu(Z){return Z.length>1?function(ce,Se,De){for(var Le=Z.length;Le--;)if(!Z[Le](ce,Se,De))return!1;return!0}:Z[0]}function ug(Z,ce,Se){for(var De=0,Le=ce.length;De<Le;De++)Jt(Z,ce[De],Se);return Se}function as(Z,ce,Se,De,Le){for(var tt,lt=[],vt=0,ut=Z.length,Lt=ce!=null;vt<ut;vt++)(tt=Z[vt])&&(!Se||Se(tt,De,Le))&&(lt.push(tt),Lt&&ce.push(vt));return lt}function bu(Z,ce,Se,De,Le,tt){return De&&!De[Fe]&&(De=bu(De)),Le&&!Le[Fe]&&(Le=bu(Le,tt)),In(function(lt,vt,ut,Lt){var Mt,At,Ft,_t,rr=[],rn=[],Vr=vt.length,xn=lt||ug(ce||"*",ut.nodeType?[ut]:ut,[]),Wn=Z&&(lt||!ce)?as(xn,rr,Z,ut,Lt):xn;if(Se?(_t=Le||(lt?Z:Vr||De)?[]:vt,Se(Wn,_t,ut,Lt)):_t=Wn,De)for(Mt=as(_t,rn),De(Mt,[],ut,Lt),At=Mt.length;At--;)(Ft=Mt[At])&&(_t[rn[At]]=!(Wn[rn[At]]=Ft));if(lt){if(Le||Z){if(Le){for(Mt=[],At=_t.length;At--;)(Ft=_t[At])&&Mt.push(Wn[At]=Ft);Le(null,_t=[],Mt,Lt)}for(At=_t.length;At--;)(Ft=_t[At])&&(Mt=Le?s.call(lt,Ft):rr[At])>-1&&(lt[Mt]=!(vt[Mt]=Ft))}}else _t=as(_t===vt?_t.splice(Vr,_t.length):_t),Le?Le(null,vt,_t,Lt):R.apply(vt,_t)})}function Cu(Z){for(var ce,Se,De,Le=Z.length,tt=v.relative[Z[0].type],lt=tt||v.relative[" "],vt=tt?1:0,ut=is(function(At){return At===ce},lt,!0),Lt=is(function(At){return s.call(ce,At)>-1},lt,!0),Mt=[function(At,Ft,_t){var rr=!tt&&(_t||Ft!=b)||((ce=Ft).nodeType?ut(At,Ft,_t):Lt(At,Ft,_t));return ce=null,rr}];vt<Le;vt++)if(Se=v.relative[Z[vt].type])Mt=[is(yu(Mt),Se)];else{if(Se=v.filter[Z[vt].type].apply(null,Z[vt].matches),Se[Fe]){for(De=++vt;De<Le&&!v.relative[Z[De].type];De++);return bu(vt>1&&yu(Mt),vt>1&&ns(Z.slice(0,vt-1).concat({value:Z[vt-2].type===" "?"*":""})).replace(z,"$1"),Se,vt<De&&Cu(Z.slice(vt,De)),De<Le&&Cu(Z=Z.slice(De)),De<Le&&ns(Z))}Mt.push(Se)}return yu(Mt)}function cg(Z,ce){var Se=ce.length>0,De=Z.length>0,Le=function(tt,lt,vt,ut,Lt){var Mt,At,Ft,_t=0,rr="0",rn=tt&&[],Vr=[],xn=b,Wn=tt||De&&v.find.TAG("*",Lt),xa=Ee+=xn==null?1:Math.random()||.1,Qr=Wn.length;for(Lt&&(b=lt==q||lt||Lt);rr!==Qr&&(Mt=Wn[rr])!=null;rr++){if(De&&Mt){for(At=0,!lt&&Mt.ownerDocument!=q&&(xi(Mt),vt=!te);Ft=Z[At++];)if(Ft(Mt,lt||q,vt)){R.call(ut,Mt);break}Lt&&(Ee=xa)}Se&&((Mt=!Ft&&Mt)&&_t--,tt&&rn.push(Mt))}if(_t+=rr,Se&&rr!==_t){for(At=0;Ft=ce[At++];)Ft(rn,Vr,lt,vt);if(tt){if(_t>0)for(;rr--;)rn[rr]||Vr[rr]||(Vr[rr]=j.call(ut));Vr=as(Vr)}R.apply(ut,Vr),Lt&&!tt&&Vr.length>0&&_t+ce.length>1&&p.uniqueSort(ut)}return Lt&&(Ee=xa,b=xn),rn};return Se?In(Le):Le}function wu(Z,ce){var Se,De=[],Le=[],tt=Bt[Z+" "];if(!tt){for(ce||(ce=fo(Z)),Se=ce.length;Se--;)tt=Cu(ce[Se]),tt[Fe]?De.push(tt):Le.push(tt);tt=Bt(Z,cg(Le,De)),tt.selector=Z}return tt}function af(Z,ce,Se,De){var Le,tt,lt,vt,ut,Lt=typeof Z=="function"&&Z,Mt=!De&&fo(Z=Lt.selector||Z);if(Se=Se||[],Mt.length===1){if(tt=Mt[0]=Mt[0].slice(0),tt.length>2&&(lt=tt[0]).type==="ID"&&ce.nodeType===9&&te&&v.relative[tt[1].type]){if(ce=(v.find.ID(lt.matches[0].replace(li,ui),ce)||[])[0],ce)Lt&&(ce=ce.parentNode);else return Se;Z=Z.slice(tt.shift().value.length)}for(Le=Hn.needsContext.test(Z)?0:tt.length;Le--&&(lt=tt[Le],!v.relative[vt=lt.type]);)if((ut=v.find[vt])&&(De=ut(lt.matches[0].replace(li,ui),gu.test(tt[0].type)&&mu(ce.parentNode)||ce))){if(tt.splice(Le,1),Z=De.length&&ns(tt),!Z)return R.apply(Se,De),Se;break}}return(Lt||wu(Z,Mt))(De,ce,!te,Se,!ce||gu.test(Z)&&mu(ce.parentNode)||ce),Se}m.sortStable=Fe.split("").sort(_r).join("")===Fe,xi(),m.sortDetached=wa(function(Z){return Z.compareDocumentPosition(q.createElement("fieldset"))&1}),p.find=Jt,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,Jt.compile=wu,Jt.select=af,Jt.setDocument=xi,Jt.tokenize=fo,Jt.escape=p.escapeSelector,Jt.getText=p.text,Jt.isXML=p.isXMLDoc,Jt.selectors=p.expr,Jt.support=p.support,Jt.uniqueSort=p.uniqueSort})();var L=function(f,v,b){for(var S=[],B=b!==void 0;(f=f[v])&&f.nodeType!==9;)if(f.nodeType===1){if(B&&p(f).is(b))break;S.push(f)}return S},F=function(f,v){for(var b=[];f;f=f.nextSibling)f.nodeType===1&&f!==v&&b.push(f);return b},X=p.expr.match.needsContext,K=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Y(f,v,b){return g(v)?p.grep(f,function(S,B){return!!v.call(S,B,S)!==b}):v.nodeType?p.grep(f,function(S){return S===v!==b}):typeof v!="string"?p.grep(f,function(S){return s.call(v,S)>-1!==b}):p.filter(v,f,b)}p.filter=function(f,v,b){var S=v[0];return b&&(f=":not("+f+")"),v.length===1&&S.nodeType===1?p.find.matchesSelector(S,f)?[S]:[]:p.find.matches(f,p.grep(v,function(B){return B.nodeType===1}))},p.fn.extend({find:function(f){var v,b,S=this.length,B=this;if(typeof f!="string")return this.pushStack(p(f).filter(function(){for(v=0;v<S;v++)if(p.contains(B[v],this))return!0}));for(b=this.pushStack([]),v=0;v<S;v++)p.find(f,B[v],b);return S>1?p.uniqueSort(b):b},filter:function(f){return this.pushStack(Y(this,f||[],!1))},not:function(f){return this.pushStack(Y(this,f||[],!0))},is:function(f){return!!Y(this,typeof f=="string"&&X.test(f)?p(f):f||[],!1).length}});var ae,he=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,be=p.fn.init=function(f,v,b){var S,B;if(!f)return this;if(b=b||ae,typeof f=="string")if(f[0]==="<"&&f[f.length-1]===">"&&f.length>=3?S=[null,f,null]:S=he.exec(f),S&&(S[1]||!v))if(S[1]){if(v=v instanceof p?v[0]:v,p.merge(this,p.parseHTML(S[1],v&&v.nodeType?v.ownerDocument||v:y,!0)),K.test(S[1])&&p.isPlainObject(v))for(S in v)g(this[S])?this[S](v[S]):this.attr(S,v[S]);return this}else return B=y.getElementById(S[2]),B&&(this[0]=B,this.length=1),this;else return!v||v.jquery?(v||b).find(f):this.constructor(v).find(f);else{if(f.nodeType)return this[0]=f,this.length=1,this;if(g(f))return b.ready!==void 0?b.ready(f):f(p)}return p.makeArray(f,this)};be.prototype=p.fn,ae=p(y);var me=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(f){var v=p(f,this),b=v.length;return this.filter(function(){for(var S=0;S<b;S++)if(p.contains(this,v[S]))return!0})},closest:function(f,v){var b,S=0,B=this.length,R=[],q=typeof f!="string"&&p(f);if(!X.test(f)){for(;S<B;S++)for(b=this[S];b&&b!==v;b=b.parentNode)if(b.nodeType<11&&(q?q.index(b)>-1:b.nodeType===1&&p.find.matchesSelector(b,f))){R.push(b);break}}return this.pushStack(R.length>1?p.uniqueSort(R):R)},index:function(f){return f?typeof f=="string"?s.call(p(f),this[0]):s.call(this,f.jquery?f[0]:f):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(f,v){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(f,v))))},addBack:function(f){return this.add(f==null?this.prevObject:this.prevObject.filter(f))}});function xe(f,v){for(;(f=f[v])&&f.nodeType!==1;);return f}p.each({parent:function(f){var v=f.parentNode;return v&&v.nodeType!==11?v:null},parents:function(f){return L(f,"parentNode")},parentsUntil:function(f,v,b){return L(f,"parentNode",b)},next:function(f){return xe(f,"nextSibling")},prev:function(f){return xe(f,"previousSibling")},nextAll:function(f){return L(f,"nextSibling")},prevAll:function(f){return L(f,"previousSibling")},nextUntil:function(f,v,b){return L(f,"nextSibling",b)},prevUntil:function(f,v,b){return L(f,"previousSibling",b)},siblings:function(f){return F((f.parentNode||{}).firstChild,f)},children:function(f){return F(f.firstChild)},contents:function(f){return f.contentDocument!=null&&n(f.contentDocument)?f.contentDocument:(N(f,"template")&&(f=f.content||f),p.merge([],f.childNodes))}},function(f,v){p.fn[f]=function(b,S){var B=p.map(this,v,b);return f.slice(-5)!=="Until"&&(S=b),S&&typeof S=="string"&&(B=p.filter(S,B)),this.length>1&&(we[f]||p.uniqueSort(B),me.test(f)&&B.reverse()),this.pushStack(B)}});var oe=/[^\x20\t\r\n\f]+/g;function $(f){var v={};return p.each(f.match(oe)||[],function(b,S){v[S]=!0}),v}p.Callbacks=function(f){f=typeof f=="string"?$(f):p.extend({},f);var v,b,S,B,R=[],q=[],ie=-1,te=function(){for(B=B||f.once,S=v=!0;q.length;ie=-1)for(b=q.shift();++ie<R.length;)R[ie].apply(b[0],b[1])===!1&&f.stopOnFalse&&(ie=R.length,b=!1);f.memory||(b=!1),v=!1,B&&(b?R=[]:R="")},pe={add:function(){return R&&(b&&!v&&(ie=R.length-1,q.push(b)),function Ae(Fe){p.each(Fe,function(Ee,Ue){g(Ue)?(!f.unique||!pe.has(Ue))&&R.push(Ue):Ue&&Ue.length&&x(Ue)!=="string"&&Ae(Ue)})}(arguments),b&&!v&&te()),this},remove:function(){return p.each(arguments,function(Ae,Fe){for(var Ee;(Ee=p.inArray(Fe,R,Ee))>-1;)R.splice(Ee,1),Ee<=ie&&ie--}),this},has:function(Ae){return Ae?p.inArray(Ae,R)>-1:R.length>0},empty:function(){return R&&(R=[]),this},disable:function(){return B=q=[],R=b="",this},disabled:function(){return!R},lock:function(){return B=q=[],!b&&!v&&(R=b=""),this},locked:function(){return!!B},fireWith:function(Ae,Fe){return B||(Fe=Fe||[],Fe=[Ae,Fe.slice?Fe.slice():Fe],q.push(Fe),v||te()),this},fire:function(){return pe.fireWith(this,arguments),this},fired:function(){return!!S}};return pe};function Q(f){return f}function J(f){throw f}function le(f,v,b,S){var B;try{f&&g(B=f.promise)?B.call(f).done(v).fail(b):f&&g(B=f.then)?B.call(f,v,b):v.apply(void 0,[f].slice(S))}catch(R){b.apply(void 0,[R])}}p.extend({Deferred:function(f){var v=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],b="pending",S={state:function(){return b},always:function(){return B.done(arguments).fail(arguments),this},catch:function(R){return S.then(null,R)},pipe:function(){var R=arguments;return p.Deferred(function(q){p.each(v,function(ie,te){var pe=g(R[te[4]])&&R[te[4]];B[te[1]](function(){var Ae=pe&&pe.apply(this,arguments);Ae&&g(Ae.promise)?Ae.promise().progress(q.notify).done(q.resolve).fail(q.reject):q[te[0]+"With"](this,pe?[Ae]:arguments)})}),R=null}).promise()},then:function(R,q,ie){var te=0;function pe(Ae,Fe,Ee,Ue){return function(){var Pt=this,Gt=arguments,Bt=function(){var _r,zn;if(!(Ae<te)){if(_r=Ee.apply(Pt,Gt),_r===Fe.promise())throw new TypeError("Thenable self-resolution");zn=_r&&(typeof _r=="object"||typeof _r=="function")&&_r.then,g(zn)?Ue?zn.call(_r,pe(te,Fe,Q,Ue),pe(te,Fe,J,Ue)):(te++,zn.call(_r,pe(te,Fe,Q,Ue),pe(te,Fe,J,Ue),pe(te,Fe,Q,Fe.notifyWith))):(Ee!==Q&&(Pt=void 0,Gt=[_r]),(Ue||Fe.resolveWith)(Pt,Gt))}},Rr=Ue?Bt:function(){try{Bt()}catch(_r){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(_r,Rr.error),Ae+1>=te&&(Ee!==J&&(Pt=void 0,Gt=[_r]),Fe.rejectWith(Pt,Gt))}};Ae?Rr():(p.Deferred.getErrorHook?Rr.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(Rr.error=p.Deferred.getStackHook()),r.setTimeout(Rr))}}return p.Deferred(function(Ae){v[0][3].add(pe(0,Ae,g(ie)?ie:Q,Ae.notifyWith)),v[1][3].add(pe(0,Ae,g(R)?R:Q)),v[2][3].add(pe(0,Ae,g(q)?q:J))}).promise()},promise:function(R){return R!=null?p.extend(R,S):S}},B={};return p.each(v,function(R,q){var ie=q[2],te=q[5];S[q[1]]=ie.add,te&&ie.add(function(){b=te},v[3-R][2].disable,v[3-R][3].disable,v[0][2].lock,v[0][3].lock),ie.add(q[3].fire),B[q[0]]=function(){return B[q[0]+"With"](this===B?void 0:this,arguments),this},B[q[0]+"With"]=ie.fireWith}),S.promise(B),f&&f.call(B,B),B},when:function(f){var v=arguments.length,b=v,S=Array(b),B=i.call(arguments),R=p.Deferred(),q=function(ie){return function(te){S[ie]=this,B[ie]=arguments.length>1?i.call(arguments):te,--v||R.resolveWith(S,B)}};if(v<=1&&(le(f,R.done(q(b)).resolve,R.reject,!v),R.state()==="pending"||g(B[b]&&B[b].then)))return R.then();for(;b--;)le(B[b],q(b),R.reject);return R.promise()}});var de=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(f,v){r.console&&r.console.warn&&f&&de.test(f.name)&&r.console.warn("jQuery.Deferred exception: "+f.message,f.stack,v)},p.readyException=function(f){r.setTimeout(function(){throw f})};var je=p.Deferred();p.fn.ready=function(f){return je.then(f).catch(function(v){p.readyException(v)}),this},p.extend({isReady:!1,readyWait:1,ready:function(f){(f===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(f!==!0&&--p.readyWait>0)&&je.resolveWith(y,[p]))}}),p.ready.then=je.then;function it(){y.removeEventListener("DOMContentLoaded",it),r.removeEventListener("load",it),p.ready()}y.readyState==="complete"||y.readyState!=="loading"&&!y.documentElement.doScroll?r.setTimeout(p.ready):(y.addEventListener("DOMContentLoaded",it),r.addEventListener("load",it));var Ke=function(f,v,b,S,B,R,q){var ie=0,te=f.length,pe=b==null;if(x(b)==="object"){B=!0;for(ie in b)Ke(f,v,ie,b[ie],!0,R,q)}else if(S!==void 0&&(B=!0,g(S)||(q=!0),pe&&(q?(v.call(f,S),v=null):(pe=v,v=function(Ae,Fe,Ee){return pe.call(p(Ae),Ee)})),v))for(;ie<te;ie++)v(f[ie],b,q?S:S.call(f[ie],ie,v(f[ie],b)));return B?f:pe?v.call(f):te?v(f[0],b):R},qe=/^-ms-/,Ge=/-([a-z])/g;function et(f,v){return v.toUpperCase()}function rt(f){return f.replace(qe,"ms-").replace(Ge,et)}var Qe=function(f){return f.nodeType===1||f.nodeType===9||!+f.nodeType};function Ye(){this.expando=p.expando+Ye.uid++}Ye.uid=1,Ye.prototype={cache:function(f){var v=f[this.expando];return v||(v={},Qe(f)&&(f.nodeType?f[this.expando]=v:Object.defineProperty(f,this.expando,{value:v,configurable:!0}))),v},set:function(f,v,b){var S,B=this.cache(f);if(typeof v=="string")B[rt(v)]=b;else for(S in v)B[rt(S)]=v[S];return B},get:function(f,v){return v===void 0?this.cache(f):f[this.expando]&&f[this.expando][rt(v)]},access:function(f,v,b){return v===void 0||v&&typeof v=="string"&&b===void 0?this.get(f,v):(this.set(f,v,b),b!==void 0?b:v)},remove:function(f,v){var b,S=f[this.expando];if(S!==void 0){if(v!==void 0)for(Array.isArray(v)?v=v.map(rt):(v=rt(v),v=v in S?[v]:v.match(oe)||[]),b=v.length;b--;)delete S[v[b]];(v===void 0||p.isEmptyObject(S))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(f){var v=f[this.expando];return v!==void 0&&!p.isEmptyObject(v)}};var Ie=new Ye,Ve=new Ye,Re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,W=/[A-Z]/g;function se(f){return f==="true"?!0:f==="false"?!1:f==="null"?null:f===+f+""?+f:Re.test(f)?JSON.parse(f):f}function Te(f,v,b){var S;if(b===void 0&&f.nodeType===1)if(S="data-"+v.replace(W,"-$&").toLowerCase(),b=f.getAttribute(S),typeof b=="string"){try{b=se(b)}catch{}Ve.set(f,v,b)}else b=void 0;return b}p.extend({hasData:function(f){return Ve.hasData(f)||Ie.hasData(f)},data:function(f,v,b){return Ve.access(f,v,b)},removeData:function(f,v){Ve.remove(f,v)},_data:function(f,v,b){return Ie.access(f,v,b)},_removeData:function(f,v){Ie.remove(f,v)}}),p.fn.extend({data:function(f,v){var b,S,B,R=this[0],q=R&&R.attributes;if(f===void 0){if(this.length&&(B=Ve.get(R),R.nodeType===1&&!Ie.get(R,"hasDataAttrs"))){for(b=q.length;b--;)q[b]&&(S=q[b].name,S.indexOf("data-")===0&&(S=rt(S.slice(5)),Te(R,S,B[S])));Ie.set(R,"hasDataAttrs",!0)}return B}return typeof f=="object"?this.each(function(){Ve.set(this,f)}):Ke(this,function(ie){var te;if(R&&ie===void 0)return te=Ve.get(R,f),te!==void 0||(te=Te(R,f),te!==void 0)?te:void 0;this.each(function(){Ve.set(this,f,ie)})},null,v,arguments.length>1,null,!0)},removeData:function(f){return this.each(function(){Ve.remove(this,f)})}}),p.extend({queue:function(f,v,b){var S;if(f)return v=(v||"fx")+"queue",S=Ie.get(f,v),b&&(!S||Array.isArray(b)?S=Ie.access(f,v,p.makeArray(b)):S.push(b)),S||[]},dequeue:function(f,v){v=v||"fx";var b=p.queue(f,v),S=b.length,B=b.shift(),R=p._queueHooks(f,v),q=function(){p.dequeue(f,v)};B==="inprogress"&&(B=b.shift(),S--),B&&(v==="fx"&&b.unshift("inprogress"),delete R.stop,B.call(f,q,R)),!S&&R&&R.empty.fire()},_queueHooks:function(f,v){var b=v+"queueHooks";return Ie.get(f,b)||Ie.access(f,b,{empty:p.Callbacks("once memory").add(function(){Ie.remove(f,[v+"queue",b])})})}}),p.fn.extend({queue:function(f,v){var b=2;return typeof f!="string"&&(v=f,f="fx",b--),arguments.length<b?p.queue(this[0],f):v===void 0?this:this.each(function(){var S=p.queue(this,f,v);p._queueHooks(this,f),f==="fx"&&S[0]!=="inprogress"&&p.dequeue(this,f)})},dequeue:function(f){return this.each(function(){p.dequeue(this,f)})},clearQueue:function(f){return this.queue(f||"fx",[])},promise:function(f,v){var b,S=1,B=p.Deferred(),R=this,q=this.length,ie=function(){--S||B.resolveWith(R,[R])};for(typeof f!="string"&&(v=f,f=void 0),f=f||"fx";q--;)b=Ie.get(R[q],f+"queueHooks"),b&&b.empty&&(S++,b.empty.add(ie));return ie(),B.promise(v)}});var ve=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ge=new RegExp("^(?:([+-])=|)("+ve+")([a-z%]*)$","i"),ze=["Top","Right","Bottom","Left"],Pe=y.documentElement,We=function(f){return p.contains(f.ownerDocument,f)},gt={composed:!0};Pe.getRootNode&&(We=function(f){return p.contains(f.ownerDocument,f)||f.getRootNode(gt)===f.ownerDocument});var Et=function(f,v){return f=v||f,f.style.display==="none"||f.style.display===""&&We(f)&&p.css(f,"display")==="none"};function ft(f,v,b,S){var B,R,q=20,ie=S?function(){return S.cur()}:function(){return p.css(f,v,"")},te=ie(),pe=b&&b[3]||(p.cssNumber[v]?"":"px"),Ae=f.nodeType&&(p.cssNumber[v]||pe!=="px"&&+te)&&ge.exec(p.css(f,v));if(Ae&&Ae[3]!==pe){for(te=te/2,pe=pe||Ae[3],Ae=+te||1;q--;)p.style(f,v,Ae+pe),(1-R)*(1-(R=ie()/te||.5))<=0&&(q=0),Ae=Ae/R;Ae=Ae*2,p.style(f,v,Ae+pe),b=b||[]}return b&&(Ae=+Ae||+te||0,B=b[1]?Ae+(b[1]+1)*b[2]:+b[2],S&&(S.unit=pe,S.start=Ae,S.end=B)),B}var xt={};function kt(f){var v,b=f.ownerDocument,S=f.nodeName,B=xt[S];return B||(v=b.body.appendChild(b.createElement(S)),B=p.css(v,"display"),v.parentNode.removeChild(v),B==="none"&&(B="block"),xt[S]=B,B)}function dt(f,v){for(var b,S,B=[],R=0,q=f.length;R<q;R++)S=f[R],S.style&&(b=S.style.display,v?(b==="none"&&(B[R]=Ie.get(S,"display")||null,B[R]||(S.style.display="")),S.style.display===""&&Et(S)&&(B[R]=kt(S))):b!=="none"&&(B[R]="none",Ie.set(S,"display",b)));for(R=0;R<q;R++)B[R]!=null&&(f[R].style.display=B[R]);return f}p.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(f){return typeof f=="boolean"?f?this.show():this.hide():this.each(function(){Et(this)?p(this).show():p(this).hide()})}});var Nt=/^(?:checkbox|radio)$/i,qt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,wr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var f=y.createDocumentFragment(),v=f.appendChild(y.createElement("div")),b=y.createElement("input");b.setAttribute("type","radio"),b.setAttribute("checked","checked"),b.setAttribute("name","t"),v.appendChild(b),m.checkClone=v.cloneNode(!0).cloneNode(!0).lastChild.checked,v.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!v.cloneNode(!0).lastChild.defaultValue,v.innerHTML="<option></option>",m.option=!!v.lastChild})();var Zt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,m.option||(Zt.optgroup=Zt.option=[1,"<select multiple='multiple'>","</select>"]);function jt(f,v){var b;return typeof f.getElementsByTagName<"u"?b=f.getElementsByTagName(v||"*"):typeof f.querySelectorAll<"u"?b=f.querySelectorAll(v||"*"):b=[],v===void 0||v&&N(f,v)?p.merge([f],b):b}function ar(f,v){for(var b=0,S=f.length;b<S;b++)Ie.set(f[b],"globalEval",!v||Ie.get(v[b],"globalEval"))}var D=/<|&#?\w+;/;function V(f,v,b,S,B){for(var R,q,ie,te,pe,Ae,Fe=v.createDocumentFragment(),Ee=[],Ue=0,Pt=f.length;Ue<Pt;Ue++)if(R=f[Ue],R||R===0)if(x(R)==="object")p.merge(Ee,R.nodeType?[R]:R);else if(!D.test(R))Ee.push(v.createTextNode(R));else{for(q=q||Fe.appendChild(v.createElement("div")),ie=(qt.exec(R)||["",""])[1].toLowerCase(),te=Zt[ie]||Zt._default,q.innerHTML=te[1]+p.htmlPrefilter(R)+te[2],Ae=te[0];Ae--;)q=q.lastChild;p.merge(Ee,q.childNodes),q=Fe.firstChild,q.textContent=""}for(Fe.textContent="",Ue=0;R=Ee[Ue++];){if(S&&p.inArray(R,S)>-1){B&&B.push(R);continue}if(pe=We(R),q=jt(Fe.appendChild(R),"script"),pe&&ar(q),b)for(Ae=0;R=q[Ae++];)wr.test(R.type||"")&&b.push(R)}return Fe}var U=/^([^.]*)(?:\.(.+)|)/;function re(){return!0}function ee(){return!1}function fe(f,v,b,S,B,R){var q,ie;if(typeof v=="object"){typeof b!="string"&&(S=S||b,b=void 0);for(ie in v)fe(f,ie,b,S,v[ie],R);return f}if(S==null&&B==null?(B=b,S=b=void 0):B==null&&(typeof b=="string"?(B=S,S=void 0):(B=S,S=b,b=void 0)),B===!1)B=ee;else if(!B)return f;return R===1&&(q=B,B=function(te){return p().off(te),q.apply(this,arguments)},B.guid=q.guid||(q.guid=p.guid++)),f.each(function(){p.event.add(this,v,B,S,b)})}p.event={global:{},add:function(f,v,b,S,B){var R,q,ie,te,pe,Ae,Fe,Ee,Ue,Pt,Gt,Bt=Ie.get(f);if(Qe(f))for(b.handler&&(R=b,b=R.handler,B=R.selector),B&&p.find.matchesSelector(Pe,B),b.guid||(b.guid=p.guid++),(te=Bt.events)||(te=Bt.events=Object.create(null)),(q=Bt.handle)||(q=Bt.handle=function(Rr){return typeof p<"u"&&p.event.triggered!==Rr.type?p.event.dispatch.apply(f,arguments):void 0}),v=(v||"").match(oe)||[""],pe=v.length;pe--;)ie=U.exec(v[pe])||[],Ue=Gt=ie[1],Pt=(ie[2]||"").split(".").sort(),Ue&&(Fe=p.event.special[Ue]||{},Ue=(B?Fe.delegateType:Fe.bindType)||Ue,Fe=p.event.special[Ue]||{},Ae=p.extend({type:Ue,origType:Gt,data:S,handler:b,guid:b.guid,selector:B,needsContext:B&&p.expr.match.needsContext.test(B),namespace:Pt.join(".")},R),(Ee=te[Ue])||(Ee=te[Ue]=[],Ee.delegateCount=0,(!Fe.setup||Fe.setup.call(f,S,Pt,q)===!1)&&f.addEventListener&&f.addEventListener(Ue,q)),Fe.add&&(Fe.add.call(f,Ae),Ae.handler.guid||(Ae.handler.guid=b.guid)),B?Ee.splice(Ee.delegateCount++,0,Ae):Ee.push(Ae),p.event.global[Ue]=!0)},remove:function(f,v,b,S,B){var R,q,ie,te,pe,Ae,Fe,Ee,Ue,Pt,Gt,Bt=Ie.hasData(f)&&Ie.get(f);if(!(!Bt||!(te=Bt.events))){for(v=(v||"").match(oe)||[""],pe=v.length;pe--;){if(ie=U.exec(v[pe])||[],Ue=Gt=ie[1],Pt=(ie[2]||"").split(".").sort(),!Ue){for(Ue in te)p.event.remove(f,Ue+v[pe],b,S,!0);continue}for(Fe=p.event.special[Ue]||{},Ue=(S?Fe.delegateType:Fe.bindType)||Ue,Ee=te[Ue]||[],ie=ie[2]&&new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"),q=R=Ee.length;R--;)Ae=Ee[R],(B||Gt===Ae.origType)&&(!b||b.guid===Ae.guid)&&(!ie||ie.test(Ae.namespace))&&(!S||S===Ae.selector||S==="**"&&Ae.selector)&&(Ee.splice(R,1),Ae.selector&&Ee.delegateCount--,Fe.remove&&Fe.remove.call(f,Ae));q&&!Ee.length&&((!Fe.teardown||Fe.teardown.call(f,Pt,Bt.handle)===!1)&&p.removeEvent(f,Ue,Bt.handle),delete te[Ue])}p.isEmptyObject(te)&&Ie.remove(f,"handle events")}},dispatch:function(f){var v,b,S,B,R,q,ie=new Array(arguments.length),te=p.event.fix(f),pe=(Ie.get(this,"events")||Object.create(null))[te.type]||[],Ae=p.event.special[te.type]||{};for(ie[0]=te,v=1;v<arguments.length;v++)ie[v]=arguments[v];if(te.delegateTarget=this,!(Ae.preDispatch&&Ae.preDispatch.call(this,te)===!1)){for(q=p.event.handlers.call(this,te,pe),v=0;(B=q[v++])&&!te.isPropagationStopped();)for(te.currentTarget=B.elem,b=0;(R=B.handlers[b++])&&!te.isImmediatePropagationStopped();)(!te.rnamespace||R.namespace===!1||te.rnamespace.test(R.namespace))&&(te.handleObj=R,te.data=R.data,S=((p.event.special[R.origType]||{}).handle||R.handler).apply(B.elem,ie),S!==void 0&&(te.result=S)===!1&&(te.preventDefault(),te.stopPropagation()));return Ae.postDispatch&&Ae.postDispatch.call(this,te),te.result}},handlers:function(f,v){var b,S,B,R,q,ie=[],te=v.delegateCount,pe=f.target;if(te&&pe.nodeType&&!(f.type==="click"&&f.button>=1)){for(;pe!==this;pe=pe.parentNode||this)if(pe.nodeType===1&&!(f.type==="click"&&pe.disabled===!0)){for(R=[],q={},b=0;b<te;b++)S=v[b],B=S.selector+" ",q[B]===void 0&&(q[B]=S.needsContext?p(B,this).index(pe)>-1:p.find(B,this,null,[pe]).length),q[B]&&R.push(S);R.length&&ie.push({elem:pe,handlers:R})}}return pe=this,te<v.length&&ie.push({elem:pe,handlers:v.slice(te)}),ie},addProp:function(f,v){Object.defineProperty(p.Event.prototype,f,{enumerable:!0,configurable:!0,get:g(v)?function(){if(this.originalEvent)return v(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[f]},set:function(b){Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(f){return f[p.expando]?f:new p.Event(f)},special:{load:{noBubble:!0},click:{setup:function(f){var v=this||f;return Nt.test(v.type)&&v.click&&N(v,"input")&&Ce(v,"click",!0),!1},trigger:function(f){var v=this||f;return Nt.test(v.type)&&v.click&&N(v,"input")&&Ce(v,"click"),!0},_default:function(f){var v=f.target;return Nt.test(v.type)&&v.click&&N(v,"input")&&Ie.get(v,"click")||N(v,"a")}},beforeunload:{postDispatch:function(f){f.result!==void 0&&f.originalEvent&&(f.originalEvent.returnValue=f.result)}}}};function Ce(f,v,b){if(!b){Ie.get(f,v)===void 0&&p.event.add(f,v,re);return}Ie.set(f,v,!1),p.event.add(f,v,{namespace:!1,handler:function(S){var B,R=Ie.get(this,v);if(S.isTrigger&1&&this[v]){if(R)(p.event.special[v]||{}).delegateType&&S.stopPropagation();else if(R=i.call(arguments),Ie.set(this,v,R),this[v](),B=Ie.get(this,v),Ie.set(this,v,!1),R!==B)return S.stopImmediatePropagation(),S.preventDefault(),B}else R&&(Ie.set(this,v,p.event.trigger(R[0],R.slice(1),this)),S.stopPropagation(),S.isImmediatePropagationStopped=re)}})}p.removeEvent=function(f,v,b){f.removeEventListener&&f.removeEventListener(v,b)},p.Event=function(f,v){if(!(this instanceof p.Event))return new p.Event(f,v);f&&f.type?(this.originalEvent=f,this.type=f.type,this.isDefaultPrevented=f.defaultPrevented||f.defaultPrevented===void 0&&f.returnValue===!1?re:ee,this.target=f.target&&f.target.nodeType===3?f.target.parentNode:f.target,this.currentTarget=f.currentTarget,this.relatedTarget=f.relatedTarget):this.type=f,v&&p.extend(this,v),this.timeStamp=f&&f.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:ee,isPropagationStopped:ee,isImmediatePropagationStopped:ee,isSimulated:!1,preventDefault:function(){var f=this.originalEvent;this.isDefaultPrevented=re,f&&!this.isSimulated&&f.preventDefault()},stopPropagation:function(){var f=this.originalEvent;this.isPropagationStopped=re,f&&!this.isSimulated&&f.stopPropagation()},stopImmediatePropagation:function(){var f=this.originalEvent;this.isImmediatePropagationStopped=re,f&&!this.isSimulated&&f.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(f,v){function b(S){if(y.documentMode){var B=Ie.get(this,"handle"),R=p.event.fix(S);R.type=S.type==="focusin"?"focus":"blur",R.isSimulated=!0,B(S),R.target===R.currentTarget&&B(R)}else p.event.simulate(v,S.target,p.event.fix(S))}p.event.special[f]={setup:function(){var S;if(Ce(this,f,!0),y.documentMode)S=Ie.get(this,v),S||this.addEventListener(v,b),Ie.set(this,v,(S||0)+1);else return!1},trigger:function(){return Ce(this,f),!0},teardown:function(){var S;if(y.documentMode)S=Ie.get(this,v)-1,S?Ie.set(this,v,S):(this.removeEventListener(v,b),Ie.remove(this,v));else return!1},_default:function(S){return Ie.get(S.target,f)},delegateType:v},p.event.special[v]={setup:function(){var S=this.ownerDocument||this.document||this,B=y.documentMode?this:S,R=Ie.get(B,v);R||(y.documentMode?this.addEventListener(v,b):S.addEventListener(f,b,!0)),Ie.set(B,v,(R||0)+1)},teardown:function(){var S=this.ownerDocument||this.document||this,B=y.documentMode?this:S,R=Ie.get(B,v)-1;R?Ie.set(B,v,R):(y.documentMode?this.removeEventListener(v,b):S.removeEventListener(f,b,!0),Ie.remove(B,v))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(f,v){p.event.special[f]={delegateType:v,bindType:v,handle:function(b){var S,B=this,R=b.relatedTarget,q=b.handleObj;return(!R||R!==B&&!p.contains(B,R))&&(b.type=q.origType,S=q.handler.apply(this,arguments),b.type=v),S}}}),p.fn.extend({on:function(f,v,b,S){return fe(this,f,v,b,S)},one:function(f,v,b,S){return fe(this,f,v,b,S,1)},off:function(f,v,b){var S,B;if(f&&f.preventDefault&&f.handleObj)return S=f.handleObj,p(f.delegateTarget).off(S.namespace?S.origType+"."+S.namespace:S.origType,S.selector,S.handler),this;if(typeof f=="object"){for(B in f)this.off(B,v,f[B]);return this}return(v===!1||typeof v=="function")&&(b=v,v=void 0),b===!1&&(b=ee),this.each(function(){p.event.remove(this,f,b,v)})}});var Me=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ne(f,v){return N(f,"table")&&N(v.nodeType!==11?v:v.firstChild,"tr")&&p(f).children("tbody")[0]||f}function nt(f){return f.type=(f.getAttribute("type")!==null)+"/"+f.type,f}function $e(f){return(f.type||"").slice(0,5)==="true/"?f.type=f.type.slice(5):f.removeAttribute("type"),f}function mt(f,v){var b,S,B,R,q,ie,te;if(v.nodeType===1){if(Ie.hasData(f)&&(R=Ie.get(f),te=R.events,te)){Ie.remove(v,"handle events");for(B in te)for(b=0,S=te[B].length;b<S;b++)p.event.add(v,B,te[B][b])}Ve.hasData(f)&&(q=Ve.access(f),ie=p.extend({},q),Ve.set(v,ie))}}function wt(f,v){var b=v.nodeName.toLowerCase();b==="input"&&Nt.test(f.type)?v.checked=f.checked:(b==="input"||b==="textarea")&&(v.defaultValue=f.defaultValue)}function ot(f,v,b,S){v=a(v);var B,R,q,ie,te,pe,Ae=0,Fe=f.length,Ee=Fe-1,Ue=v[0],Pt=g(Ue);if(Pt||Fe>1&&typeof Ue=="string"&&!m.checkClone&&Oe.test(Ue))return f.each(function(Gt){var Bt=f.eq(Gt);Pt&&(v[0]=Ue.call(this,Gt,Bt.html())),ot(Bt,v,b,S)});if(Fe&&(B=V(v,f[0].ownerDocument,!1,f,S),R=B.firstChild,B.childNodes.length===1&&(B=R),R||S)){for(q=p.map(jt(B,"script"),nt),ie=q.length;Ae<Fe;Ae++)te=B,Ae!==Ee&&(te=p.clone(te,!0,!0),ie&&p.merge(q,jt(te,"script"))),b.call(f[Ae],te,Ae);if(ie)for(pe=q[q.length-1].ownerDocument,p.map(q,$e),Ae=0;Ae<ie;Ae++)te=q[Ae],wr.test(te.type||"")&&!Ie.access(te,"globalEval")&&p.contains(pe,te)&&(te.src&&(te.type||"").toLowerCase()!=="module"?p._evalUrl&&!te.noModule&&p._evalUrl(te.src,{nonce:te.nonce||te.getAttribute("nonce")},pe):_(te.textContent.replace(Be,""),te,pe))}return f}function Dt(f,v,b){for(var S,B=v?p.filter(v,f):f,R=0;(S=B[R])!=null;R++)!b&&S.nodeType===1&&p.cleanData(jt(S)),S.parentNode&&(b&&We(S)&&ar(jt(S,"script")),S.parentNode.removeChild(S));return f}p.extend({htmlPrefilter:function(f){return f},clone:function(f,v,b){var S,B,R,q,ie=f.cloneNode(!0),te=We(f);if(!m.noCloneChecked&&(f.nodeType===1||f.nodeType===11)&&!p.isXMLDoc(f))for(q=jt(ie),R=jt(f),S=0,B=R.length;S<B;S++)wt(R[S],q[S]);if(v)if(b)for(R=R||jt(f),q=q||jt(ie),S=0,B=R.length;S<B;S++)mt(R[S],q[S]);else mt(f,ie);return q=jt(ie,"script"),q.length>0&&ar(q,!te&&jt(f,"script")),ie},cleanData:function(f){for(var v,b,S,B=p.event.special,R=0;(b=f[R])!==void 0;R++)if(Qe(b)){if(v=b[Ie.expando]){if(v.events)for(S in v.events)B[S]?p.event.remove(b,S):p.removeEvent(b,S,v.handle);b[Ie.expando]=void 0}b[Ve.expando]&&(b[Ve.expando]=void 0)}}}),p.fn.extend({detach:function(f){return Dt(this,f,!0)},remove:function(f){return Dt(this,f)},text:function(f){return Ke(this,function(v){return v===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=v)})},null,f,arguments.length)},append:function(){return ot(this,arguments,function(f){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var v=Ne(this,f);v.appendChild(f)}})},prepend:function(){return ot(this,arguments,function(f){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var v=Ne(this,f);v.insertBefore(f,v.firstChild)}})},before:function(){return ot(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this)})},after:function(){return ot(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling)})},empty:function(){for(var f,v=0;(f=this[v])!=null;v++)f.nodeType===1&&(p.cleanData(jt(f,!1)),f.textContent="");return this},clone:function(f,v){return f=f??!1,v=v??f,this.map(function(){return p.clone(this,f,v)})},html:function(f){return Ke(this,function(v){var b=this[0]||{},S=0,B=this.length;if(v===void 0&&b.nodeType===1)return b.innerHTML;if(typeof v=="string"&&!Me.test(v)&&!Zt[(qt.exec(v)||["",""])[1].toLowerCase()]){v=p.htmlPrefilter(v);try{for(;S<B;S++)b=this[S]||{},b.nodeType===1&&(p.cleanData(jt(b,!1)),b.innerHTML=v);b=0}catch{}}b&&this.empty().append(v)},null,f,arguments.length)},replaceWith:function(){var f=[];return ot(this,arguments,function(v){var b=this.parentNode;p.inArray(this,f)<0&&(p.cleanData(jt(this)),b&&b.replaceChild(v,this))},f)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,v){p.fn[f]=function(b){for(var S,B=[],R=p(b),q=R.length-1,ie=0;ie<=q;ie++)S=ie===q?this:this.clone(!0),p(R[ie])[v](S),o.apply(B,S.get());return this.pushStack(B)}});var bt=new RegExp("^("+ve+")(?!px)[a-z%]+$","i"),fr=/^--/,Br=function(f){var v=f.ownerDocument.defaultView;return(!v||!v.opener)&&(v=r),v.getComputedStyle(f)},en=function(f,v,b){var S,B,R={};for(B in v)R[B]=f.style[B],f.style[B]=v[B];S=b.call(f);for(B in v)f.style[B]=R[B];return S},gn=new RegExp(ze.join("|"),"i");(function(){function f(){if(pe){te.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",pe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Pe.appendChild(te).appendChild(pe);var Ae=r.getComputedStyle(pe);b=Ae.top!=="1%",ie=v(Ae.marginLeft)===12,pe.style.right="60%",R=v(Ae.right)===36,S=v(Ae.width)===36,pe.style.position="absolute",B=v(pe.offsetWidth/3)===12,Pe.removeChild(te),pe=null}}function v(Ae){return Math.round(parseFloat(Ae))}var b,S,B,R,q,ie,te=y.createElement("div"),pe=y.createElement("div");pe.style&&(pe.style.backgroundClip="content-box",pe.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=pe.style.backgroundClip==="content-box",p.extend(m,{boxSizingReliable:function(){return f(),S},pixelBoxStyles:function(){return f(),R},pixelPosition:function(){return f(),b},reliableMarginLeft:function(){return f(),ie},scrollboxSize:function(){return f(),B},reliableTrDimensions:function(){var Ae,Fe,Ee,Ue;return q==null&&(Ae=y.createElement("table"),Fe=y.createElement("tr"),Ee=y.createElement("div"),Ae.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Fe.style.cssText="box-sizing:content-box;border:1px solid",Fe.style.height="1px",Ee.style.height="9px",Ee.style.display="block",Pe.appendChild(Ae).appendChild(Fe).appendChild(Ee),Ue=r.getComputedStyle(Fe),q=parseInt(Ue.height,10)+parseInt(Ue.borderTopWidth,10)+parseInt(Ue.borderBottomWidth,10)===Fe.offsetHeight,Pe.removeChild(Ae)),q}}))})();function gr(f,v,b){var S,B,R,q,ie=fr.test(v),te=f.style;return b=b||Br(f),b&&(q=b.getPropertyValue(v)||b[v],ie&&q&&(q=q.replace(z,"$1")||void 0),q===""&&!We(f)&&(q=p.style(f,v)),!m.pixelBoxStyles()&&bt.test(q)&&gn.test(v)&&(S=te.width,B=te.minWidth,R=te.maxWidth,te.minWidth=te.maxWidth=te.width=q,q=b.width,te.width=S,te.minWidth=B,te.maxWidth=R)),q!==void 0?q+"":q}function dr(f,v){return{get:function(){if(f()){delete this.get;return}return(this.get=v).apply(this,arguments)}}}var mr=["Webkit","Moz","ms"],jr=y.createElement("div").style,Mn={};function vr(f){for(var v=f[0].toUpperCase()+f.slice(1),b=mr.length;b--;)if(f=mr[b]+v,f in jr)return f}function oi(f){var v=p.cssProps[f]||Mn[f];return v||(f in jr?f:Mn[f]=vr(f)||f)}var Ui=/^(none|table(?!-c[ea]).+)/,Pn={position:"absolute",visibility:"hidden",display:"block"},Ot={letterSpacing:"0",fontWeight:"400"};function si(f,v,b){var S=ge.exec(v);return S?Math.max(0,S[2]-(b||0))+(S[3]||"px"):v}function Ca(f,v,b,S,B,R){var q=v==="width"?1:0,ie=0,te=0,pe=0;if(b===(S?"border":"content"))return 0;for(;q<4;q+=2)b==="margin"&&(pe+=p.css(f,b+ze[q],!0,B)),S?(b==="content"&&(te-=p.css(f,"padding"+ze[q],!0,B)),b!=="margin"&&(te-=p.css(f,"border"+ze[q]+"Width",!0,B))):(te+=p.css(f,"padding"+ze[q],!0,B),b!=="padding"?te+=p.css(f,"border"+ze[q]+"Width",!0,B):ie+=p.css(f,"border"+ze[q]+"Width",!0,B));return!S&&R>=0&&(te+=Math.max(0,Math.ceil(f["offset"+v[0].toUpperCase()+v.slice(1)]-R-te-ie-.5))||0),te+pe}function Ki(f,v,b){var S=Br(f),B=!m.boxSizingReliable()||b,R=B&&p.css(f,"boxSizing",!1,S)==="border-box",q=R,ie=gr(f,v,S),te="offset"+v[0].toUpperCase()+v.slice(1);if(bt.test(ie)){if(!b)return ie;ie="auto"}return(!m.boxSizingReliable()&&R||!m.reliableTrDimensions()&&N(f,"tr")||ie==="auto"||!parseFloat(ie)&&p.css(f,"display",!1,S)==="inline")&&f.getClientRects().length&&(R=p.css(f,"boxSizing",!1,S)==="border-box",q=te in f,q&&(ie=f[te])),ie=parseFloat(ie)||0,ie+Ca(f,v,b||(R?"border":"content"),q,S,ie)+"px"}p.extend({cssHooks:{opacity:{get:function(f,v){if(v){var b=gr(f,"opacity");return b===""?"1":b}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(f,v,b,S){if(!(!f||f.nodeType===3||f.nodeType===8||!f.style)){var B,R,q,ie=rt(v),te=fr.test(v),pe=f.style;if(te||(v=oi(ie)),q=p.cssHooks[v]||p.cssHooks[ie],b!==void 0){if(R=typeof b,R==="string"&&(B=ge.exec(b))&&B[1]&&(b=ft(f,v,B),R="number"),b==null||b!==b)return;R==="number"&&!te&&(b+=B&&B[3]||(p.cssNumber[ie]?"":"px")),!m.clearCloneStyle&&b===""&&v.indexOf("background")===0&&(pe[v]="inherit"),(!q||!("set"in q)||(b=q.set(f,b,S))!==void 0)&&(te?pe.setProperty(v,b):pe[v]=b)}else return q&&"get"in q&&(B=q.get(f,!1,S))!==void 0?B:pe[v]}},css:function(f,v,b,S){var B,R,q,ie=rt(v),te=fr.test(v);return te||(v=oi(ie)),q=p.cssHooks[v]||p.cssHooks[ie],q&&"get"in q&&(B=q.get(f,!0,b)),B===void 0&&(B=gr(f,v,S)),B==="normal"&&v in Ot&&(B=Ot[v]),b===""||b?(R=parseFloat(B),b===!0||isFinite(R)?R||0:B):B}}),p.each(["height","width"],function(f,v){p.cssHooks[v]={get:function(b,S,B){if(S)return Ui.test(p.css(b,"display"))&&(!b.getClientRects().length||!b.getBoundingClientRect().width)?en(b,Pn,function(){return Ki(b,v,B)}):Ki(b,v,B)},set:function(b,S,B){var R,q=Br(b),ie=!m.scrollboxSize()&&q.position==="absolute",te=ie||B,pe=te&&p.css(b,"boxSizing",!1,q)==="border-box",Ae=B?Ca(b,v,B,pe,q):0;return pe&&ie&&(Ae-=Math.ceil(b["offset"+v[0].toUpperCase()+v.slice(1)]-parseFloat(q[v])-Ca(b,v,"border",!1,q)-.5)),Ae&&(R=ge.exec(S))&&(R[3]||"px")!=="px"&&(b.style[v]=S,S=p.css(b,v)),si(b,S,Ae)}}}),p.cssHooks.marginLeft=dr(m.reliableMarginLeft,function(f,v){if(v)return(parseFloat(gr(f,"marginLeft"))||f.getBoundingClientRect().left-en(f,{marginLeft:0},function(){return f.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(f,v){p.cssHooks[f+v]={expand:function(b){for(var S=0,B={},R=typeof b=="string"?b.split(" "):[b];S<4;S++)B[f+ze[S]+v]=R[S]||R[S-2]||R[0];return B}},f!=="margin"&&(p.cssHooks[f+v].set=si)}),p.fn.extend({css:function(f,v){return Ke(this,function(b,S,B){var R,q,ie={},te=0;if(Array.isArray(S)){for(R=Br(b),q=S.length;te<q;te++)ie[S[te]]=p.css(b,S[te],!1,R);return ie}return B!==void 0?p.style(b,S,B):p.css(b,S)},f,v,arguments.length>1)}});function xr(f,v,b,S,B){return new xr.prototype.init(f,v,b,S,B)}p.Tween=xr,xr.prototype={constructor:xr,init:function(f,v,b,S,B,R){this.elem=f,this.prop=b,this.easing=B||p.easing._default,this.options=v,this.start=this.now=this.cur(),this.end=S,this.unit=R||(p.cssNumber[b]?"":"px")},cur:function(){var f=xr.propHooks[this.prop];return f&&f.get?f.get(this):xr.propHooks._default.get(this)},run:function(f){var v,b=xr.propHooks[this.prop];return this.options.duration?this.pos=v=p.easing[this.easing](f,this.options.duration*f,0,1,this.options.duration):this.pos=v=f,this.now=(this.end-this.start)*v+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),b&&b.set?b.set(this):xr.propHooks._default.set(this),this}},xr.prototype.init.prototype=xr.prototype,xr.propHooks={_default:{get:function(f){var v;return f.elem.nodeType!==1||f.elem[f.prop]!=null&&f.elem.style[f.prop]==null?f.elem[f.prop]:(v=p.css(f.elem,f.prop,""),!v||v==="auto"?0:v)},set:function(f){p.fx.step[f.prop]?p.fx.step[f.prop](f):f.elem.nodeType===1&&(p.cssHooks[f.prop]||f.elem.style[oi(f.prop)]!=null)?p.style(f.elem,f.prop,f.now+f.unit):f.elem[f.prop]=f.now}}},xr.propHooks.scrollTop=xr.propHooks.scrollLeft={set:function(f){f.elem.nodeType&&f.elem.parentNode&&(f.elem[f.prop]=f.now)}},p.easing={linear:function(f){return f},swing:function(f){return .5-Math.cos(f*Math.PI)/2},_default:"swing"},p.fx=xr.prototype.init,p.fx.step={};var tn,mn,ao=/^(?:toggle|show|hide)$/,su=/queueHooks$/;function Xi(){mn&&(y.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Xi):r.setTimeout(Xi,p.fx.interval),p.fx.tick())}function ts(){return r.setTimeout(function(){tn=void 0}),tn=Date.now()}function Yi(f,v){var b,S=0,B={height:f};for(v=v?1:0;S<4;S+=2-v)b=ze[S],B["margin"+b]=B["padding"+b]=f;return v&&(B.opacity=B.width=f),B}function Qi(f,v,b){for(var S,B=(An.tweeners[v]||[]).concat(An.tweeners["*"]),R=0,q=B.length;R<q;R++)if(S=B[R].call(b,v,f))return S}function Zi(f,v,b){var S,B,R,q,ie,te,pe,Ae,Fe="width"in v||"height"in v,Ee=this,Ue={},Pt=f.style,Gt=f.nodeType&&Et(f),Bt=Ie.get(f,"fxshow");b.queue||(q=p._queueHooks(f,"fx"),q.unqueued==null&&(q.unqueued=0,ie=q.empty.fire,q.empty.fire=function(){q.unqueued||ie()}),q.unqueued++,Ee.always(function(){Ee.always(function(){q.unqueued--,p.queue(f,"fx").length||q.empty.fire()})}));for(S in v)if(B=v[S],ao.test(B)){if(delete v[S],R=R||B==="toggle",B===(Gt?"hide":"show"))if(B==="show"&&Bt&&Bt[S]!==void 0)Gt=!0;else continue;Ue[S]=Bt&&Bt[S]||p.style(f,S)}if(te=!p.isEmptyObject(v),!(!te&&p.isEmptyObject(Ue))){Fe&&f.nodeType===1&&(b.overflow=[Pt.overflow,Pt.overflowX,Pt.overflowY],pe=Bt&&Bt.display,pe==null&&(pe=Ie.get(f,"display")),Ae=p.css(f,"display"),Ae==="none"&&(pe?Ae=pe:(dt([f],!0),pe=f.style.display||pe,Ae=p.css(f,"display"),dt([f]))),(Ae==="inline"||Ae==="inline-block"&&pe!=null)&&p.css(f,"float")==="none"&&(te||(Ee.done(function(){Pt.display=pe}),pe==null&&(Ae=Pt.display,pe=Ae==="none"?"":Ae)),Pt.display="inline-block")),b.overflow&&(Pt.overflow="hidden",Ee.always(function(){Pt.overflow=b.overflow[0],Pt.overflowX=b.overflow[1],Pt.overflowY=b.overflow[2]})),te=!1;for(S in Ue)te||(Bt?"hidden"in Bt&&(Gt=Bt.hidden):Bt=Ie.access(f,"fxshow",{display:pe}),R&&(Bt.hidden=!Gt),Gt&&dt([f],!0),Ee.done(function(){Gt||dt([f]),Ie.remove(f,"fxshow");for(S in Ue)p.style(f,S,Ue[S])})),te=Qi(Gt?Bt[S]:0,S,Ee),S in Bt||(Bt[S]=te.start,Gt&&(te.end=te.start,te.start=0))}}function bi(f,v){var b,S,B,R,q;for(b in f)if(S=rt(b),B=v[S],R=f[b],Array.isArray(R)&&(B=R[1],R=f[b]=R[0]),b!==S&&(f[S]=R,delete f[b]),q=p.cssHooks[S],q&&"expand"in q){R=q.expand(R),delete f[S];for(b in R)b in f||(f[b]=R[b],v[b]=B)}else v[S]=B}function An(f,v,b){var S,B,R=0,q=An.prefilters.length,ie=p.Deferred().always(function(){delete te.elem}),te=function(){if(B)return!1;for(var Fe=tn||ts(),Ee=Math.max(0,pe.startTime+pe.duration-Fe),Ue=Ee/pe.duration||0,Pt=1-Ue,Gt=0,Bt=pe.tweens.length;Gt<Bt;Gt++)pe.tweens[Gt].run(Pt);return ie.notifyWith(f,[pe,Pt,Ee]),Pt<1&&Bt?Ee:(Bt||ie.notifyWith(f,[pe,1,0]),ie.resolveWith(f,[pe]),!1)},pe=ie.promise({elem:f,props:p.extend({},v),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},b),originalProperties:v,originalOptions:b,startTime:tn||ts(),duration:b.duration,tweens:[],createTween:function(Fe,Ee){var Ue=p.Tween(f,pe.opts,Fe,Ee,pe.opts.specialEasing[Fe]||pe.opts.easing);return pe.tweens.push(Ue),Ue},stop:function(Fe){var Ee=0,Ue=Fe?pe.tweens.length:0;if(B)return this;for(B=!0;Ee<Ue;Ee++)pe.tweens[Ee].run(1);return Fe?(ie.notifyWith(f,[pe,1,0]),ie.resolveWith(f,[pe,Fe])):ie.rejectWith(f,[pe,Fe]),this}}),Ae=pe.props;for(bi(Ae,pe.opts.specialEasing);R<q;R++)if(S=An.prefilters[R].call(pe,f,Ae,pe.opts),S)return g(S.stop)&&(p._queueHooks(pe.elem,pe.opts.queue).stop=S.stop.bind(S)),S;return p.map(Ae,Qi,pe),g(pe.opts.start)&&pe.opts.start.call(f,pe),pe.progress(pe.opts.progress).done(pe.opts.done,pe.opts.complete).fail(pe.opts.fail).always(pe.opts.always),p.fx.timer(p.extend(te,{elem:f,anim:pe,queue:pe.opts.queue})),pe}p.Animation=p.extend(An,{tweeners:{"*":[function(f,v){var b=this.createTween(f,v);return ft(b.elem,f,ge.exec(v),b),b}]},tweener:function(f,v){g(f)?(v=f,f=["*"]):f=f.match(oe);for(var b,S=0,B=f.length;S<B;S++)b=f[S],An.tweeners[b]=An.tweeners[b]||[],An.tweeners[b].unshift(v)},prefilters:[Zi],prefilter:function(f,v){v?An.prefilters.unshift(f):An.prefilters.push(f)}}),p.speed=function(f,v,b){var S=f&&typeof f=="object"?p.extend({},f):{complete:b||!b&&v||g(f)&&f,duration:f,easing:b&&v||v&&!g(v)&&v};return p.fx.off?S.duration=0:typeof S.duration!="number"&&(S.duration in p.fx.speeds?S.duration=p.fx.speeds[S.duration]:S.duration=p.fx.speeds._default),(S.queue==null||S.queue===!0)&&(S.queue="fx"),S.old=S.complete,S.complete=function(){g(S.old)&&S.old.call(this),S.queue&&p.dequeue(this,S.queue)},S},p.fn.extend({fadeTo:function(f,v,b,S){return this.filter(Et).css("opacity",0).show().end().animate({opacity:v},f,b,S)},animate:function(f,v,b,S){var B=p.isEmptyObject(f),R=p.speed(v,b,S),q=function(){var ie=An(this,p.extend({},f),R);(B||Ie.get(this,"finish"))&&ie.stop(!0)};return q.finish=q,B||R.queue===!1?this.each(q):this.queue(R.queue,q)},stop:function(f,v,b){var S=function(B){var R=B.stop;delete B.stop,R(b)};return typeof f!="string"&&(b=v,v=f,f=void 0),v&&this.queue(f||"fx",[]),this.each(function(){var B=!0,R=f!=null&&f+"queueHooks",q=p.timers,ie=Ie.get(this);if(R)ie[R]&&ie[R].stop&&S(ie[R]);else for(R in ie)ie[R]&&ie[R].stop&&su.test(R)&&S(ie[R]);for(R=q.length;R--;)q[R].elem===this&&(f==null||q[R].queue===f)&&(q[R].anim.stop(b),B=!1,q.splice(R,1));(B||!b)&&p.dequeue(this,f)})},finish:function(f){return f!==!1&&(f=f||"fx"),this.each(function(){var v,b=Ie.get(this),S=b[f+"queue"],B=b[f+"queueHooks"],R=p.timers,q=S?S.length:0;for(b.finish=!0,p.queue(this,f,[]),B&&B.stop&&B.stop.call(this,!0),v=R.length;v--;)R[v].elem===this&&R[v].queue===f&&(R[v].anim.stop(!0),R.splice(v,1));for(v=0;v<q;v++)S[v]&&S[v].finish&&S[v].finish.call(this);delete b.finish})}}),p.each(["toggle","show","hide"],function(f,v){var b=p.fn[v];p.fn[v]=function(S,B,R){return S==null||typeof S=="boolean"?b.apply(this,arguments):this.animate(Yi(v,!0),S,B,R)}}),p.each({slideDown:Yi("show"),slideUp:Yi("hide"),slideToggle:Yi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(f,v){p.fn[f]=function(b,S,B){return this.animate(v,b,S,B)}}),p.timers=[],p.fx.tick=function(){var f,v=0,b=p.timers;for(tn=Date.now();v<b.length;v++)f=b[v],!f()&&b[v]===f&&b.splice(v--,1);b.length||p.fx.stop(),tn=void 0},p.fx.timer=function(f){p.timers.push(f),p.fx.start()},p.fx.interval=13,p.fx.start=function(){mn||(mn=!0,Xi())},p.fx.stop=function(){mn=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(f,v){return f=p.fx&&p.fx.speeds[f]||f,v=v||"fx",this.queue(v,function(b,S){var B=r.setTimeout(b,f);S.stop=function(){r.clearTimeout(B)}})},function(){var f=y.createElement("input"),v=y.createElement("select"),b=v.appendChild(y.createElement("option"));f.type="checkbox",m.checkOn=f.value!=="",m.optSelected=b.selected,f=y.createElement("input"),f.value="t",f.type="radio",m.radioValue=f.value==="t"}();var $c,oo=p.expr.attrHandle;p.fn.extend({attr:function(f,v){return Ke(this,p.attr,f,v,arguments.length>1)},removeAttr:function(f){return this.each(function(){p.removeAttr(this,f)})}}),p.extend({attr:function(f,v,b){var S,B,R=f.nodeType;if(!(R===3||R===8||R===2)){if(typeof f.getAttribute>"u")return p.prop(f,v,b);if((R!==1||!p.isXMLDoc(f))&&(B=p.attrHooks[v.toLowerCase()]||(p.expr.match.bool.test(v)?$c:void 0)),b!==void 0){if(b===null){p.removeAttr(f,v);return}return B&&"set"in B&&(S=B.set(f,b,v))!==void 0?S:(f.setAttribute(v,b+""),b)}return B&&"get"in B&&(S=B.get(f,v))!==null?S:(S=p.find.attr(f,v),S??void 0)}},attrHooks:{type:{set:function(f,v){if(!m.radioValue&&v==="radio"&&N(f,"input")){var b=f.value;return f.setAttribute("type",v),b&&(f.value=b),v}}}},removeAttr:function(f,v){var b,S=0,B=v&&v.match(oe);if(B&&f.nodeType===1)for(;b=B[S++];)f.removeAttribute(b)}}),$c={set:function(f,v,b){return v===!1?p.removeAttr(f,b):f.setAttribute(b,b),b}},p.each(p.expr.match.bool.source.match(/\w+/g),function(f,v){var b=oo[v]||p.find.attr;oo[v]=function(S,B,R){var q,ie,te=B.toLowerCase();return R||(ie=oo[te],oo[te]=q,q=b(S,B,R)!=null?te:null,oo[te]=ie),q}});var jv=/^(?:input|select|textarea|button)$/i,Vv=/^(?:a|area)$/i;p.fn.extend({prop:function(f,v){return Ke(this,p.prop,f,v,arguments.length>1)},removeProp:function(f){return this.each(function(){delete this[p.propFix[f]||f]})}}),p.extend({prop:function(f,v,b){var S,B,R=f.nodeType;if(!(R===3||R===8||R===2))return(R!==1||!p.isXMLDoc(f))&&(v=p.propFix[v]||v,B=p.propHooks[v]),b!==void 0?B&&"set"in B&&(S=B.set(f,b,v))!==void 0?S:f[v]=b:B&&"get"in B&&(S=B.get(f,v))!==null?S:f[v]},propHooks:{tabIndex:{get:function(f){var v=p.find.attr(f,"tabindex");return v?parseInt(v,10):jv.test(f.nodeName)||Vv.test(f.nodeName)&&f.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(p.propHooks.selected={get:function(f){var v=f.parentNode;return v&&v.parentNode&&v.parentNode.selectedIndex,null},set:function(f){var v=f.parentNode;v&&(v.selectedIndex,v.parentNode&&v.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Ji(f){var v=f.match(oe)||[];return v.join(" ")}function ea(f){return f.getAttribute&&f.getAttribute("class")||""}function lu(f){return Array.isArray(f)?f:typeof f=="string"?f.match(oe)||[]:[]}p.fn.extend({addClass:function(f){var v,b,S,B,R,q;return g(f)?this.each(function(ie){p(this).addClass(f.call(this,ie,ea(this)))}):(v=lu(f),v.length?this.each(function(){if(S=ea(this),b=this.nodeType===1&&" "+Ji(S)+" ",b){for(R=0;R<v.length;R++)B=v[R],b.indexOf(" "+B+" ")<0&&(b+=B+" ");q=Ji(b),S!==q&&this.setAttribute("class",q)}}):this)},removeClass:function(f){var v,b,S,B,R,q;return g(f)?this.each(function(ie){p(this).removeClass(f.call(this,ie,ea(this)))}):arguments.length?(v=lu(f),v.length?this.each(function(){if(S=ea(this),b=this.nodeType===1&&" "+Ji(S)+" ",b){for(R=0;R<v.length;R++)for(B=v[R];b.indexOf(" "+B+" ")>-1;)b=b.replace(" "+B+" "," ");q=Ji(b),S!==q&&this.setAttribute("class",q)}}):this):this.attr("class","")},toggleClass:function(f,v){var b,S,B,R,q=typeof f,ie=q==="string"||Array.isArray(f);return g(f)?this.each(function(te){p(this).toggleClass(f.call(this,te,ea(this),v),v)}):typeof v=="boolean"&&ie?v?this.addClass(f):this.removeClass(f):(b=lu(f),this.each(function(){if(ie)for(R=p(this),B=0;B<b.length;B++)S=b[B],R.hasClass(S)?R.removeClass(S):R.addClass(S);else(f===void 0||q==="boolean")&&(S=ea(this),S&&Ie.set(this,"__className__",S),this.setAttribute&&this.setAttribute("class",S||f===!1?"":Ie.get(this,"__className__")||""))}))},hasClass:function(f){var v,b,S=0;for(v=" "+f+" ";b=this[S++];)if(b.nodeType===1&&(" "+Ji(ea(b))+" ").indexOf(v)>-1)return!0;return!1}});var zv=/\r/g;p.fn.extend({val:function(f){var v,b,S,B=this[0];return arguments.length?(S=g(f),this.each(function(R){var q;this.nodeType===1&&(S?q=f.call(this,R,p(this).val()):q=f,q==null?q="":typeof q=="number"?q+="":Array.isArray(q)&&(q=p.map(q,function(ie){return ie==null?"":ie+""})),v=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!v||!("set"in v)||v.set(this,q,"value")===void 0)&&(this.value=q))})):B?(v=p.valHooks[B.type]||p.valHooks[B.nodeName.toLowerCase()],v&&"get"in v&&(b=v.get(B,"value"))!==void 0?b:(b=B.value,typeof b=="string"?b.replace(zv,""):b??"")):void 0}}),p.extend({valHooks:{option:{get:function(f){var v=p.find.attr(f,"value");return v??Ji(p.text(f))}},select:{get:function(f){var v,b,S,B=f.options,R=f.selectedIndex,q=f.type==="select-one",ie=q?null:[],te=q?R+1:B.length;for(R<0?S=te:S=q?R:0;S<te;S++)if(b=B[S],(b.selected||S===R)&&!b.disabled&&(!b.parentNode.disabled||!N(b.parentNode,"optgroup"))){if(v=p(b).val(),q)return v;ie.push(v)}return ie},set:function(f,v){for(var b,S,B=f.options,R=p.makeArray(v),q=B.length;q--;)S=B[q],(S.selected=p.inArray(p.valHooks.option.get(S),R)>-1)&&(b=!0);return b||(f.selectedIndex=-1),R}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(f,v){if(Array.isArray(v))return f.checked=p.inArray(p(f).val(),v)>-1}},m.checkOn||(p.valHooks[this].get=function(f){return f.getAttribute("value")===null?"on":f.value})});var so=r.location,Uc={guid:Date.now()},uu=/\?/;p.parseXML=function(f){var v,b;if(!f||typeof f!="string")return null;try{v=new r.DOMParser().parseFromString(f,"text/xml")}catch{}return b=v&&v.getElementsByTagName("parsererror")[0],(!v||b)&&p.error("Invalid XML: "+(b?p.map(b.childNodes,function(S){return S.textContent}).join(`
`):f)),v};var Kc=/^(?:focusinfocus|focusoutblur)$/,Xc=function(f){f.stopPropagation()};p.extend(p.event,{trigger:function(f,v,b,S){var B,R,q,ie,te,pe,Ae,Fe,Ee=[b||y],Ue=c.call(f,"type")?f.type:f,Pt=c.call(f,"namespace")?f.namespace.split("."):[];if(R=Fe=q=b=b||y,!(b.nodeType===3||b.nodeType===8)&&!Kc.test(Ue+p.event.triggered)&&(Ue.indexOf(".")>-1&&(Pt=Ue.split("."),Ue=Pt.shift(),Pt.sort()),te=Ue.indexOf(":")<0&&"on"+Ue,f=f[p.expando]?f:new p.Event(Ue,typeof f=="object"&&f),f.isTrigger=S?2:3,f.namespace=Pt.join("."),f.rnamespace=f.namespace?new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=b),v=v==null?[f]:p.makeArray(v,[f]),Ae=p.event.special[Ue]||{},!(!S&&Ae.trigger&&Ae.trigger.apply(b,v)===!1))){if(!S&&!Ae.noBubble&&!C(b)){for(ie=Ae.delegateType||Ue,Kc.test(ie+Ue)||(R=R.parentNode);R;R=R.parentNode)Ee.push(R),q=R;q===(b.ownerDocument||y)&&Ee.push(q.defaultView||q.parentWindow||r)}for(B=0;(R=Ee[B++])&&!f.isPropagationStopped();)Fe=R,f.type=B>1?ie:Ae.bindType||Ue,pe=(Ie.get(R,"events")||Object.create(null))[f.type]&&Ie.get(R,"handle"),pe&&pe.apply(R,v),pe=te&&R[te],pe&&pe.apply&&Qe(R)&&(f.result=pe.apply(R,v),f.result===!1&&f.preventDefault());return f.type=Ue,!S&&!f.isDefaultPrevented()&&(!Ae._default||Ae._default.apply(Ee.pop(),v)===!1)&&Qe(b)&&te&&g(b[Ue])&&!C(b)&&(q=b[te],q&&(b[te]=null),p.event.triggered=Ue,f.isPropagationStopped()&&Fe.addEventListener(Ue,Xc),b[Ue](),f.isPropagationStopped()&&Fe.removeEventListener(Ue,Xc),p.event.triggered=void 0,q&&(b[te]=q)),f.result}},simulate:function(f,v,b){var S=p.extend(new p.Event,b,{type:f,isSimulated:!0});p.event.trigger(S,null,v)}}),p.fn.extend({trigger:function(f,v){return this.each(function(){p.event.trigger(f,v,this)})},triggerHandler:function(f,v){var b=this[0];if(b)return p.event.trigger(f,v,b,!0)}});var qv=/\[\]$/,Yc=/\r?\n/g,Gv=/^(?:submit|button|image|reset|file)$/i,Hv=/^(?:input|select|textarea|keygen)/i;function cu(f,v,b,S){var B;if(Array.isArray(v))p.each(v,function(R,q){b||qv.test(f)?S(f,q):cu(f+"["+(typeof q=="object"&&q!=null?R:"")+"]",q,b,S)});else if(!b&&x(v)==="object")for(B in v)cu(f+"["+B+"]",v[B],b,S);else S(f,v)}p.param=function(f,v){var b,S=[],B=function(R,q){var ie=g(q)?q():q;S[S.length]=encodeURIComponent(R)+"="+encodeURIComponent(ie??"")};if(f==null)return"";if(Array.isArray(f)||f.jquery&&!p.isPlainObject(f))p.each(f,function(){B(this.name,this.value)});else for(b in f)cu(b,f[b],v,B);return S.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var f=p.prop(this,"elements");return f?p.makeArray(f):this}).filter(function(){var f=this.type;return this.name&&!p(this).is(":disabled")&&Hv.test(this.nodeName)&&!Gv.test(f)&&(this.checked||!Nt.test(f))}).map(function(f,v){var b=p(this).val();return b==null?null:Array.isArray(b)?p.map(b,function(S){return{name:v.name,value:S.replace(Yc,`\r
`)}}):{name:v.name,value:b.replace(Yc,`\r
`)}}).get()}});var Wv=/%20/g,$v=/#.*$/,Uv=/([?&])_=[^&]*/,Kv=/^(.*?):[ \t]*([^\r\n]*)$/mg,Xv=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Yv=/^(?:GET|HEAD)$/,Qv=/^\/\//,Qc={},fu={},Zc="*/".concat("*"),du=y.createElement("a");du.href=so.href;function Jc(f){return function(v,b){typeof v!="string"&&(b=v,v="*");var S,B=0,R=v.toLowerCase().match(oe)||[];if(g(b))for(;S=R[B++];)S[0]==="+"?(S=S.slice(1)||"*",(f[S]=f[S]||[]).unshift(b)):(f[S]=f[S]||[]).push(b)}}function ef(f,v,b,S){var B={},R=f===fu;function q(ie){var te;return B[ie]=!0,p.each(f[ie]||[],function(pe,Ae){var Fe=Ae(v,b,S);if(typeof Fe=="string"&&!R&&!B[Fe])return v.dataTypes.unshift(Fe),q(Fe),!1;if(R)return!(te=Fe)}),te}return q(v.dataTypes[0])||!B["*"]&&q("*")}function hu(f,v){var b,S,B=p.ajaxSettings.flatOptions||{};for(b in v)v[b]!==void 0&&((B[b]?f:S||(S={}))[b]=v[b]);return S&&p.extend(!0,f,S),f}function Zv(f,v,b){for(var S,B,R,q,ie=f.contents,te=f.dataTypes;te[0]==="*";)te.shift(),S===void 0&&(S=f.mimeType||v.getResponseHeader("Content-Type"));if(S){for(B in ie)if(ie[B]&&ie[B].test(S)){te.unshift(B);break}}if(te[0]in b)R=te[0];else{for(B in b){if(!te[0]||f.converters[B+" "+te[0]]){R=B;break}q||(q=B)}R=R||q}if(R)return R!==te[0]&&te.unshift(R),b[R]}function Jv(f,v,b,S){var B,R,q,ie,te,pe={},Ae=f.dataTypes.slice();if(Ae[1])for(q in f.converters)pe[q.toLowerCase()]=f.converters[q];for(R=Ae.shift();R;)if(f.responseFields[R]&&(b[f.responseFields[R]]=v),!te&&S&&f.dataFilter&&(v=f.dataFilter(v,f.dataType)),te=R,R=Ae.shift(),R){if(R==="*")R=te;else if(te!=="*"&&te!==R){if(q=pe[te+" "+R]||pe["* "+R],!q){for(B in pe)if(ie=B.split(" "),ie[1]===R&&(q=pe[te+" "+ie[0]]||pe["* "+ie[0]],q)){q===!0?q=pe[B]:pe[B]!==!0&&(R=ie[0],Ae.unshift(ie[1]));break}}if(q!==!0)if(q&&f.throws)v=q(v);else try{v=q(v)}catch(Fe){return{state:"parsererror",error:q?Fe:"No conversion from "+te+" to "+R}}}}return{state:"success",data:v}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:so.href,type:"GET",isLocal:Xv.test(so.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Zc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(f,v){return v?hu(hu(f,p.ajaxSettings),v):hu(p.ajaxSettings,f)},ajaxPrefilter:Jc(Qc),ajaxTransport:Jc(fu),ajax:function(f,v){typeof f=="object"&&(v=f,f=void 0),v=v||{};var b,S,B,R,q,ie,te,pe,Ae,Fe,Ee=p.ajaxSetup({},v),Ue=Ee.context||Ee,Pt=Ee.context&&(Ue.nodeType||Ue.jquery)?p(Ue):p.event,Gt=p.Deferred(),Bt=p.Callbacks("once memory"),Rr=Ee.statusCode||{},_r={},zn={},qn="canceled",Vt={readyState:0,getResponseHeader:function(Ht){var hr;if(te){if(!R)for(R={};hr=Kv.exec(B);)R[hr[1].toLowerCase()+" "]=(R[hr[1].toLowerCase()+" "]||[]).concat(hr[2]);hr=R[Ht.toLowerCase()+" "]}return hr==null?null:hr.join(", ")},getAllResponseHeaders:function(){return te?B:null},setRequestHeader:function(Ht,hr){return te==null&&(Ht=zn[Ht.toLowerCase()]=zn[Ht.toLowerCase()]||Ht,_r[Ht]=hr),this},overrideMimeType:function(Ht){return te==null&&(Ee.mimeType=Ht),this},statusCode:function(Ht){var hr;if(Ht)if(te)Vt.always(Ht[Vt.status]);else for(hr in Ht)Rr[hr]=[Rr[hr],Ht[hr]];return this},abort:function(Ht){var hr=Ht||qn;return b&&b.abort(hr),ta(0,hr),this}};if(Gt.promise(Vt),Ee.url=((f||Ee.url||so.href)+"").replace(Qv,so.protocol+"//"),Ee.type=v.method||v.type||Ee.method||Ee.type,Ee.dataTypes=(Ee.dataType||"*").toLowerCase().match(oe)||[""],Ee.crossDomain==null){ie=y.createElement("a");try{ie.href=Ee.url,ie.href=ie.href,Ee.crossDomain=du.protocol+"//"+du.host!=ie.protocol+"//"+ie.host}catch{Ee.crossDomain=!0}}if(Ee.data&&Ee.processData&&typeof Ee.data!="string"&&(Ee.data=p.param(Ee.data,Ee.traditional)),ef(Qc,Ee,v,Vt),te)return Vt;pe=p.event&&Ee.global,pe&&p.active++===0&&p.event.trigger("ajaxStart"),Ee.type=Ee.type.toUpperCase(),Ee.hasContent=!Yv.test(Ee.type),S=Ee.url.replace($v,""),Ee.hasContent?Ee.data&&Ee.processData&&(Ee.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ee.data=Ee.data.replace(Wv,"+")):(Fe=Ee.url.slice(S.length),Ee.data&&(Ee.processData||typeof Ee.data=="string")&&(S+=(uu.test(S)?"&":"?")+Ee.data,delete Ee.data),Ee.cache===!1&&(S=S.replace(Uv,"$1"),Fe=(uu.test(S)?"&":"?")+"_="+Uc.guid+++Fe),Ee.url=S+Fe),Ee.ifModified&&(p.lastModified[S]&&Vt.setRequestHeader("If-Modified-Since",p.lastModified[S]),p.etag[S]&&Vt.setRequestHeader("If-None-Match",p.etag[S])),(Ee.data&&Ee.hasContent&&Ee.contentType!==!1||v.contentType)&&Vt.setRequestHeader("Content-Type",Ee.contentType),Vt.setRequestHeader("Accept",Ee.dataTypes[0]&&Ee.accepts[Ee.dataTypes[0]]?Ee.accepts[Ee.dataTypes[0]]+(Ee.dataTypes[0]!=="*"?", "+Zc+"; q=0.01":""):Ee.accepts["*"]);for(Ae in Ee.headers)Vt.setRequestHeader(Ae,Ee.headers[Ae]);if(Ee.beforeSend&&(Ee.beforeSend.call(Ue,Vt,Ee)===!1||te))return Vt.abort();if(qn="abort",Bt.add(Ee.complete),Vt.done(Ee.success),Vt.fail(Ee.error),b=ef(fu,Ee,v,Vt),!b)ta(-1,"No Transport");else{if(Vt.readyState=1,pe&&Pt.trigger("ajaxSend",[Vt,Ee]),te)return Vt;Ee.async&&Ee.timeout>0&&(q=r.setTimeout(function(){Vt.abort("timeout")},Ee.timeout));try{te=!1,b.send(_r,ta)}catch(Ht){if(te)throw Ht;ta(-1,Ht)}}function ta(Ht,hr,uo,vu){var Gn,co,Hn,Ci,wi,wn=hr;te||(te=!0,q&&r.clearTimeout(q),b=void 0,B=vu||"",Vt.readyState=Ht>0?4:0,Gn=Ht>=200&&Ht<300||Ht===304,uo&&(Ci=Zv(Ee,Vt,uo)),!Gn&&p.inArray("script",Ee.dataTypes)>-1&&p.inArray("json",Ee.dataTypes)<0&&(Ee.converters["text script"]=function(){}),Ci=Jv(Ee,Ci,Vt,Gn),Gn?(Ee.ifModified&&(wi=Vt.getResponseHeader("Last-Modified"),wi&&(p.lastModified[S]=wi),wi=Vt.getResponseHeader("etag"),wi&&(p.etag[S]=wi)),Ht===204||Ee.type==="HEAD"?wn="nocontent":Ht===304?wn="notmodified":(wn=Ci.state,co=Ci.data,Hn=Ci.error,Gn=!Hn)):(Hn=wn,(Ht||!wn)&&(wn="error",Ht<0&&(Ht=0))),Vt.status=Ht,Vt.statusText=(hr||wn)+"",Gn?Gt.resolveWith(Ue,[co,wn,Vt]):Gt.rejectWith(Ue,[Vt,wn,Hn]),Vt.statusCode(Rr),Rr=void 0,pe&&Pt.trigger(Gn?"ajaxSuccess":"ajaxError",[Vt,Ee,Gn?co:Hn]),Bt.fireWith(Ue,[Vt,wn]),pe&&(Pt.trigger("ajaxComplete",[Vt,Ee]),--p.active||p.event.trigger("ajaxStop")))}return Vt},getJSON:function(f,v,b){return p.get(f,v,b,"json")},getScript:function(f,v){return p.get(f,void 0,v,"script")}}),p.each(["get","post"],function(f,v){p[v]=function(b,S,B,R){return g(S)&&(R=R||B,B=S,S=void 0),p.ajax(p.extend({url:b,type:v,dataType:R,data:S,success:B},p.isPlainObject(b)&&b))}}),p.ajaxPrefilter(function(f){var v;for(v in f.headers)v.toLowerCase()==="content-type"&&(f.contentType=f.headers[v]||"")}),p._evalUrl=function(f,v,b){return p.ajax({url:f,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(S){p.globalEval(S,v,b)}})},p.fn.extend({wrapAll:function(f){var v;return this[0]&&(g(f)&&(f=f.call(this[0])),v=p(f,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&v.insertBefore(this[0]),v.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),this},wrapInner:function(f){return g(f)?this.each(function(v){p(this).wrapInner(f.call(this,v))}):this.each(function(){var v=p(this),b=v.contents();b.length?b.wrapAll(f):v.append(f)})},wrap:function(f){var v=g(f);return this.each(function(b){p(this).wrapAll(v?f.call(this,b):f)})},unwrap:function(f){return this.parent(f).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(f){return!p.expr.pseudos.visible(f)},p.expr.pseudos.visible=function(f){return!!(f.offsetWidth||f.offsetHeight||f.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var eg={0:200,1223:204},lo=p.ajaxSettings.xhr();m.cors=!!lo&&"withCredentials"in lo,m.ajax=lo=!!lo,p.ajaxTransport(function(f){var v,b;if(m.cors||lo&&!f.crossDomain)return{send:function(S,B){var R,q=f.xhr();if(q.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(R in f.xhrFields)q[R]=f.xhrFields[R];f.mimeType&&q.overrideMimeType&&q.overrideMimeType(f.mimeType),!f.crossDomain&&!S["X-Requested-With"]&&(S["X-Requested-With"]="XMLHttpRequest");for(R in S)q.setRequestHeader(R,S[R]);v=function(ie){return function(){v&&(v=b=q.onload=q.onerror=q.onabort=q.ontimeout=q.onreadystatechange=null,ie==="abort"?q.abort():ie==="error"?typeof q.status!="number"?B(0,"error"):B(q.status,q.statusText):B(eg[q.status]||q.status,q.statusText,(q.responseType||"text")!=="text"||typeof q.responseText!="string"?{binary:q.response}:{text:q.responseText},q.getAllResponseHeaders()))}},q.onload=v(),b=q.onerror=q.ontimeout=v("error"),q.onabort!==void 0?q.onabort=b:q.onreadystatechange=function(){q.readyState===4&&r.setTimeout(function(){v&&b()})},v=v("abort");try{q.send(f.hasContent&&f.data||null)}catch(ie){if(v)throw ie}},abort:function(){v&&v()}}}),p.ajaxPrefilter(function(f){f.crossDomain&&(f.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(f){return p.globalEval(f),f}}}),p.ajaxPrefilter("script",function(f){f.cache===void 0&&(f.cache=!1),f.crossDomain&&(f.type="GET")}),p.ajaxTransport("script",function(f){if(f.crossDomain||f.scriptAttrs){var v,b;return{send:function(S,B){v=p("<script>").attr(f.scriptAttrs||{}).prop({charset:f.scriptCharset,src:f.url}).on("load error",b=function(R){v.remove(),b=null,R&&B(R.type==="error"?404:200,R.type)}),y.head.appendChild(v[0])},abort:function(){b&&b()}}}});var tf=[],pu=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var f=tf.pop()||p.expando+"_"+Uc.guid++;return this[f]=!0,f}}),p.ajaxPrefilter("json jsonp",function(f,v,b){var S,B,R,q=f.jsonp!==!1&&(pu.test(f.url)?"url":typeof f.data=="string"&&(f.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&pu.test(f.data)&&"data");if(q||f.dataTypes[0]==="jsonp")return S=f.jsonpCallback=g(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,q?f[q]=f[q].replace(pu,"$1"+S):f.jsonp!==!1&&(f.url+=(uu.test(f.url)?"&":"?")+f.jsonp+"="+S),f.converters["script json"]=function(){return R||p.error(S+" was not called"),R[0]},f.dataTypes[0]="json",B=r[S],r[S]=function(){R=arguments},b.always(function(){B===void 0?p(r).removeProp(S):r[S]=B,f[S]&&(f.jsonpCallback=v.jsonpCallback,tf.push(S)),R&&g(B)&&B(R[0]),R=B=void 0}),"script"}),m.createHTMLDocument=function(){var f=y.implementation.createHTMLDocument("").body;return f.innerHTML="<form></form><form></form>",f.childNodes.length===2}(),p.parseHTML=function(f,v,b){if(typeof f!="string")return[];typeof v=="boolean"&&(b=v,v=!1);var S,B,R;return v||(m.createHTMLDocument?(v=y.implementation.createHTMLDocument(""),S=v.createElement("base"),S.href=y.location.href,v.head.appendChild(S)):v=y),B=K.exec(f),R=!b&&[],B?[v.createElement(B[1])]:(B=V([f],v,R),R&&R.length&&p(R).remove(),p.merge([],B.childNodes))},p.fn.load=function(f,v,b){var S,B,R,q=this,ie=f.indexOf(" ");return ie>-1&&(S=Ji(f.slice(ie)),f=f.slice(0,ie)),g(v)?(b=v,v=void 0):v&&typeof v=="object"&&(B="POST"),q.length>0&&p.ajax({url:f,type:B||"GET",dataType:"html",data:v}).done(function(te){R=arguments,q.html(S?p("<div>").append(p.parseHTML(te)).find(S):te)}).always(b&&function(te,pe){q.each(function(){b.apply(this,R||[te.responseText,pe,te])})}),this},p.expr.pseudos.animated=function(f){return p.grep(p.timers,function(v){return f===v.elem}).length},p.offset={setOffset:function(f,v,b){var S,B,R,q,ie,te,pe,Ae=p.css(f,"position"),Fe=p(f),Ee={};Ae==="static"&&(f.style.position="relative"),ie=Fe.offset(),R=p.css(f,"top"),te=p.css(f,"left"),pe=(Ae==="absolute"||Ae==="fixed")&&(R+te).indexOf("auto")>-1,pe?(S=Fe.position(),q=S.top,B=S.left):(q=parseFloat(R)||0,B=parseFloat(te)||0),g(v)&&(v=v.call(f,b,p.extend({},ie))),v.top!=null&&(Ee.top=v.top-ie.top+q),v.left!=null&&(Ee.left=v.left-ie.left+B),"using"in v?v.using.call(f,Ee):Fe.css(Ee)}},p.fn.extend({offset:function(f){if(arguments.length)return f===void 0?this:this.each(function(B){p.offset.setOffset(this,f,B)});var v,b,S=this[0];if(S)return S.getClientRects().length?(v=S.getBoundingClientRect(),b=S.ownerDocument.defaultView,{top:v.top+b.pageYOffset,left:v.left+b.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var f,v,b,S=this[0],B={top:0,left:0};if(p.css(S,"position")==="fixed")v=S.getBoundingClientRect();else{for(v=this.offset(),b=S.ownerDocument,f=S.offsetParent||b.documentElement;f&&(f===b.body||f===b.documentElement)&&p.css(f,"position")==="static";)f=f.parentNode;f&&f!==S&&f.nodeType===1&&(B=p(f).offset(),B.top+=p.css(f,"borderTopWidth",!0),B.left+=p.css(f,"borderLeftWidth",!0))}return{top:v.top-B.top-p.css(S,"marginTop",!0),left:v.left-B.left-p.css(S,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var f=this.offsetParent;f&&p.css(f,"position")==="static";)f=f.offsetParent;return f||Pe})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,v){var b=v==="pageYOffset";p.fn[f]=function(S){return Ke(this,function(B,R,q){var ie;if(C(B)?ie=B:B.nodeType===9&&(ie=B.defaultView),q===void 0)return ie?ie[v]:B[R];ie?ie.scrollTo(b?ie.pageXOffset:q,b?q:ie.pageYOffset):B[R]=q},f,S,arguments.length)}}),p.each(["top","left"],function(f,v){p.cssHooks[v]=dr(m.pixelPosition,function(b,S){if(S)return S=gr(b,v),bt.test(S)?p(b).position()[v]+"px":S})}),p.each({Height:"height",Width:"width"},function(f,v){p.each({padding:"inner"+f,content:v,"":"outer"+f},function(b,S){p.fn[S]=function(B,R){var q=arguments.length&&(b||typeof B!="boolean"),ie=b||(B===!0||R===!0?"margin":"border");return Ke(this,function(te,pe,Ae){var Fe;return C(te)?S.indexOf("outer")===0?te["inner"+f]:te.document.documentElement["client"+f]:te.nodeType===9?(Fe=te.documentElement,Math.max(te.body["scroll"+f],Fe["scroll"+f],te.body["offset"+f],Fe["offset"+f],Fe["client"+f])):Ae===void 0?p.css(te,pe,ie):p.style(te,pe,Ae,ie)},v,q?B:void 0,q)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(f,v){p.fn[v]=function(b){return this.on(v,b)}}),p.fn.extend({bind:function(f,v,b){return this.on(f,null,v,b)},unbind:function(f,v){return this.off(f,null,v)},delegate:function(f,v,b,S){return this.on(v,f,b,S)},undelegate:function(f,v,b){return arguments.length===1?this.off(f,"**"):this.off(v,f||"**",b)},hover:function(f,v){return this.on("mouseenter",f).on("mouseleave",v||f)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(f,v){p.fn[v]=function(b,S){return arguments.length>0?this.on(v,null,b,S):this.trigger(v)}});var tg=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(f,v){var b,S,B;if(typeof v=="string"&&(b=f[v],v=f,f=b),!!g(f))return S=i.call(arguments,2),B=function(){return f.apply(v||this,S.concat(i.call(arguments)))},B.guid=f.guid=f.guid||p.guid++,B},p.holdReady=function(f){f?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=N,p.isFunction=g,p.isWindow=C,p.camelCase=rt,p.type=x,p.now=Date.now,p.isNumeric=function(f){var v=p.type(f);return(v==="number"||v==="string")&&!isNaN(f-parseFloat(f))},p.trim=function(f){return f==null?"":(f+"").replace(tg,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return p});var rg=r.jQuery,ng=r.$;return p.noConflict=function(f){return r.$===p&&(r.$=ng),f&&r.jQuery===p&&(r.jQuery=rg),p},typeof e>"u"&&(r.jQuery=r.$=p),p})});var bv=ho(()=>{"use strict";(function(r,e,t){(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.qtip&&n(jQuery)})(function(n){"use strict";var i=!0,a=!1,o=null,s="x",l="y",u="width",c="height",d="top",h="left",m="bottom",g="right",C="center",y="flip",w="flipinvert",_="shift",x,k,O,p,I={},N="qtip",j="data-hasqtip",H="data-qtip-id",G=["ui-widget","ui-tooltip"],P="."+N,z="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),A=N+"-fixed",T=N+"-default",E=N+"-focus",M=N+"-hover",L=N+"-disabled",F="_replacedByqTip",X="oldtitle",K,Y={ie:function(){var D,V;for(D=4,V=e.createElement("div");(V.innerHTML="<!--[if gt IE "+D+"]><i></i><![endif]-->")&&V.getElementsByTagName("i")[0];D+=1);return D>4?D:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||a};function ae(D,V,U,re){this.id=U,this.target=D,this.tooltip=o,this.elements={target:D},this._id=N+"-"+U,this.timers={img:{}},this.options=V,this.plugins={},this.cache={event:{},target:n(),disabled:a,attr:re,onTooltip:a,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=a}k=ae.prototype,k._when=function(D){return n.when.apply(n,D)},k.render=function(D){if(this.rendered||this.destroyed)return this;var V=this,U=this.options,re=this.cache,ee=this.elements,fe=U.content.text,Ce=U.content.title,Me=U.content.button,Oe=U.position,Be=[];return n.attr(this.target[0],"aria-describedby",this._id),re.posClass=this._createPosClass((this.position={my:Oe.my,at:Oe.at}).my),this.tooltip=ee.tooltip=n("<div/>",{id:this._id,class:[N,T,U.style.classes,re.posClass].join(" "),width:U.style.width||"",height:U.style.height||"",tracking:Oe.target==="mouse"&&Oe.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":a,"aria-describedby":this._id+"-content","aria-hidden":i}).toggleClass(L,this.disabled).attr(H,this.id).data(N,this).appendTo(Oe.container).append(ee.content=n("<div />",{class:N+"-content",id:this._id+"-content","aria-atomic":i})),this.rendered=-1,this.positioning=i,Ce&&(this._createTitle(),n.isFunction(Ce)||Be.push(this._updateTitle(Ce,a))),Me&&this._createButton(),n.isFunction(fe)||Be.push(this._updateContent(fe,a)),this.rendered=i,this._setWidget(),n.each(I,function(Ne){var nt;this.initialize==="render"&&(nt=this(V))&&(V.plugins[Ne]=nt)}),this._unassignEvents(),this._assignEvents(),this._when(Be).then(function(){V._trigger("render"),V.positioning=a,!V.hiddenDuringWait&&(U.show.ready||D)&&V.toggle(i,re.event,a),V.hiddenDuringWait=a}),x.api[this.id]=this,this},k.destroy=function(D){if(this.destroyed)return this.target;function V(){if(!this.destroyed){this.destroyed=i;var U=this.target,re=U.attr(X),ee;this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),n.each(this.plugins,function(){this.destroy&&this.destroy()});for(ee in this.timers)this.timers.hasOwnProperty(ee)&&clearTimeout(this.timers[ee]);U.removeData(N).removeAttr(H).removeAttr(j).removeAttr("aria-describedby"),this.options.suppress&&re&&U.attr("title",re).removeAttr(X),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=o,delete x.api[this.id]}}return(D!==i||this.triggering==="hide")&&this.rendered?(this.tooltip.one("tooltiphidden",n.proxy(V,this)),!this.triggering&&this.hide()):V.call(this),this.target};function he(D){return D===o||n.type(D)!=="object"}function be(D){return!(n.isFunction(D)||D&&D.attr||D.length||n.type(D)==="object"&&(D.jquery||D.then))}function me(D){var V,U,re,ee;return he(D)?a:(he(D.metadata)&&(D.metadata={type:D.metadata}),"content"in D&&(V=D.content,he(V)||V.jquery||V.done?(U=be(V)?a:V,V=D.content={text:U}):U=V.text,"ajax"in V&&(re=V.ajax,ee=re&&re.once!==a,delete V.ajax,V.text=function(fe,Ce){var Me=U||n(this).attr(Ce.options.content.attr)||"Loading...",Oe=n.ajax(n.extend({},re,{context:Ce})).then(re.success,o,re.error).then(function(Be){return Be&&ee&&Ce.set("content.text",Be),Be},function(Be,Ne,nt){Ce.destroyed||Be.status===0||Ce.set("content.text",Ne+": "+nt)});return ee?Me:(Ce.set("content.text",Me),Oe)}),"title"in V&&(n.isPlainObject(V.title)&&(V.button=V.title.button,V.title=V.title.text),be(V.title||a)&&(V.title=a))),"position"in D&&he(D.position)&&(D.position={my:D.position,at:D.position}),"show"in D&&he(D.show)&&(D.show=D.show.jquery?{target:D.show}:D.show===i?{ready:i}:{event:D.show}),"hide"in D&&he(D.hide)&&(D.hide=D.hide.jquery?{target:D.hide}:{event:D.hide}),"style"in D&&he(D.style)&&(D.style={classes:D.style}),n.each(I,function(){this.sanitize&&this.sanitize(D)}),D)}p=k.checks={builtin:{"^id$":function(D,V,U,re){var ee=U===i?x.nextid:U,fe=N+"-"+ee;ee!==a&&ee.length>0&&!n("#"+fe).length?(this._id=fe,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):D[V]=re},"^prerender":function(D,V,U){U&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(D,V,U){this._updateContent(U)},"^content.attr$":function(D,V,U,re){this.options.content.text===this.target.attr(re)&&this._updateContent(this.target.attr(U))},"^content.title$":function(D,V,U){if(!U)return this._removeTitle();U&&!this.elements.title&&this._createTitle(),this._updateTitle(U)},"^content.button$":function(D,V,U){this._updateButton(U)},"^content.title.(text|button)$":function(D,V,U){this.set("content."+V,U)},"^position.(my|at)$":function(D,V,U){typeof U=="string"&&(this.position[V]=D[V]=new O(U,V==="at"))},"^position.container$":function(D,V,U){this.rendered&&this.tooltip.appendTo(U)},"^show.ready$":function(D,V,U){U&&(!this.rendered&&this.render(i)||this.toggle(i))},"^style.classes$":function(D,V,U,re){this.rendered&&this.tooltip.removeClass(re).addClass(U)},"^style.(width|height)":function(D,V,U){this.rendered&&this.tooltip.css(V,U)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(D,V,U){this.rendered&&this.tooltip.toggleClass(T,!!U)},"^events.(render|show|move|hide|focus|blur)$":function(D,V,U){this.rendered&&this.tooltip[(n.isFunction(U)?"":"un")+"bind"]("tooltip"+V,U)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var D=this.options.position;this.tooltip.attr("tracking",D.target==="mouse"&&D.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}};function we(D,V){for(var U=0,re,ee=D,fe=V.split(".");ee=ee[fe[U++]];)U<fe.length&&(re=ee);return[re||D,fe.pop()]}k.get=function(D){if(this.destroyed)return this;var V=we(this.options,D.toLowerCase()),U=V[0][V[1]];return U.precedance?U.string():U};function xe(D,V){var U,re,ee;for(U in this.checks)if(this.checks.hasOwnProperty(U))for(re in this.checks[U])this.checks[U].hasOwnProperty(re)&&(ee=new RegExp(re,"i").exec(D))&&(V.push(ee),(U==="builtin"||this.plugins[U])&&this.checks[U][re].apply(this.plugins[U]||this,V))}var oe=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,$=/^prerender|show\.ready/i;k.set=function(D,V){if(this.destroyed)return this;var U=this.rendered,re=a,ee=this.options,fe;return typeof D=="string"?(fe=D,D={},D[fe]=V):D=n.extend({},D),n.each(D,function(Ce,Me){if(U&&$.test(Ce)){delete D[Ce];return}var Oe=we(ee,Ce.toLowerCase()),Be;Be=Oe[0][Oe[1]],Oe[0][Oe[1]]=Me&&Me.nodeType?n(Me):Me,re=oe.test(Ce)||re,D[Ce]=[Oe[0],Oe[1],Me,Be]}),me(ee),this.positioning=i,n.each(D,n.proxy(xe,this)),this.positioning=a,this.rendered&&this.tooltip[0].offsetWidth>0&&re&&this.reposition(ee.position.target==="mouse"?o:this.cache.event),this},k._update=function(D,V){var U=this,re=this.cache;return!this.rendered||!D?a:(n.isFunction(D)&&(D=D.call(this.elements.target,re.event,this)||""),n.isFunction(D.then)?(re.waiting=i,D.then(function(ee){return re.waiting=a,U._update(ee,V)},o,function(ee){return U._update(ee,V)})):D===a||!D&&D!==""?a:(D.jquery&&D.length>0?V.empty().append(D.css({display:"block",visibility:"visible"})):V.html(D),this._waitForContent(V).then(function(ee){U.rendered&&U.tooltip[0].offsetWidth>0&&U.reposition(re.event,!ee.length)})))},k._waitForContent=function(D){var V=this.cache;return V.waiting=i,(n.fn.imagesLoaded?D.imagesLoaded():new n.Deferred().resolve([])).done(function(){V.waiting=a}).promise()},k._updateContent=function(D,V){this._update(D,this.elements.content,V)},k._updateTitle=function(D,V){this._update(D,this.elements.title,V)===a&&this._removeTitle(a)},k._createTitle=function(){var D=this.elements,V=this._id+"-title";D.titlebar&&this._removeTitle(),D.titlebar=n("<div />",{class:N+"-titlebar "+(this.options.style.widget?J("header"):"")}).append(D.title=n("<div />",{id:V,class:N+"-title","aria-atomic":i})).insertBefore(D.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(U){n(this).toggleClass("ui-state-active ui-state-focus",U.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(U){n(this).toggleClass("ui-state-hover",U.type==="mouseover")}),this.options.content.button&&this._createButton()},k._removeTitle=function(D){var V=this.elements;V.title&&(V.titlebar.remove(),V.titlebar=V.title=V.button=o,D!==a&&this.reposition())},k._createPosClass=function(D){return N+"-pos-"+(D||this.options.position.my).abbrev()},k.reposition=function(D,V){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=i;var U=this.cache,re=this.tooltip,ee=this.options.position,fe=ee.target,Ce=ee.my,Me=ee.at,Oe=ee.viewport,Be=ee.container,Ne=ee.adjust,nt=Ne.method.split(" "),$e=re.outerWidth(a),mt=re.outerHeight(a),wt=0,ot=0,Dt=re.css("position"),bt={left:0,top:0},fr=re[0].offsetWidth>0,Br=D&&D.type==="scroll",en=n(r),gn=Be[0].ownerDocument,gr=this.mouse,dr,mr,jr,Mn;if(n.isArray(fe)&&fe.length===2)Me={x:h,y:d},bt={left:fe[0],top:fe[1]};else if(fe==="mouse")Me={x:h,y:d},(!Ne.mouse||this.options.hide.distance)&&U.origin&&U.origin.pageX?D=U.origin:!D||D&&(D.type==="resize"||D.type==="scroll")?D=U.event:gr&&gr.pageX&&(D=gr),Dt!=="static"&&(bt=Be.offset()),gn.body.offsetWidth!==(r.innerWidth||gn.documentElement.clientWidth)&&(mr=n(e.body).offset()),bt={left:D.pageX-bt.left+(mr&&mr.left||0),top:D.pageY-bt.top+(mr&&mr.top||0)},Ne.mouse&&Br&&gr&&(bt.left-=(gr.scrollX||0)-en.scrollLeft(),bt.top-=(gr.scrollY||0)-en.scrollTop());else{if(fe==="event"?D&&D.target&&D.type!=="scroll"&&D.type!=="resize"?U.target=n(D.target):D.target||(U.target=this.elements.target):fe!=="event"&&(U.target=n(fe.jquery?fe:this.elements.target)),fe=U.target,fe=n(fe).eq(0),fe.length===0)return this;fe[0]===e||fe[0]===r?(wt=Y.iOS?r.innerWidth:fe.width(),ot=Y.iOS?r.innerHeight:fe.height(),fe[0]===r&&(bt={top:(Oe||fe).scrollTop(),left:(Oe||fe).scrollLeft()})):I.imagemap&&fe.is("area")?dr=I.imagemap(this,fe,Me,I.viewport?nt:a):I.svg&&fe&&fe[0].ownerSVGElement?dr=I.svg(this,fe,Me,I.viewport?nt:a):(wt=fe.outerWidth(a),ot=fe.outerHeight(a),bt=fe.offset()),dr&&(wt=dr.width,ot=dr.height,mr=dr.offset,bt=dr.position),bt=this.reposition.offset(fe,bt,Be),(Y.iOS>3.1&&Y.iOS<4.1||Y.iOS>=4.3&&Y.iOS<4.33||!Y.iOS&&Dt==="fixed")&&(bt.left-=en.scrollLeft(),bt.top-=en.scrollTop()),(!dr||dr&&dr.adjustable!==a)&&(bt.left+=Me.x===g?wt:Me.x===C?wt/2:0,bt.top+=Me.y===m?ot:Me.y===C?ot/2:0)}return bt.left+=Ne.x+(Ce.x===g?-$e:Ce.x===C?-$e/2:0),bt.top+=Ne.y+(Ce.y===m?-mt:Ce.y===C?-mt/2:0),I.viewport?(jr=bt.adjusted=I.viewport(this,bt,ee,wt,ot,$e,mt),mr&&jr.left&&(bt.left+=mr.left),mr&&jr.top&&(bt.top+=mr.top),jr.my&&(this.position.my=jr.my)):bt.adjusted={left:0,top:0},U.posClass!==(Mn=this._createPosClass(this.position.my))&&(U.posClass=Mn,re.removeClass(U.posClass).addClass(Mn)),this._trigger("move",[bt,Oe.elem||Oe],D)?(delete bt.adjusted,V===a||!fr||isNaN(bt.left)||isNaN(bt.top)||fe==="mouse"||!n.isFunction(ee.effect)?re.css(bt):n.isFunction(ee.effect)&&(ee.effect.call(re,this,n.extend({},bt)),re.queue(function(vr){n(this).css({opacity:"",height:""}),Y.ie&&this.style.removeAttribute("filter"),vr()})),this.positioning=a,this):this},k.reposition.offset=function(D,V,U){if(!U[0])return V;var re=n(D[0].ownerDocument),ee=!!Y.ie&&e.compatMode!=="CSS1Compat",fe=U[0],Ce,Me,Oe,Be;function Ne(nt,$e){V.left+=$e*nt.scrollLeft(),V.top+=$e*nt.scrollTop()}do(Me=n.css(fe,"position"))!=="static"&&(Me==="fixed"?(Oe=fe.getBoundingClientRect(),Ne(re,-1)):(Oe=n(fe).position(),Oe.left+=parseFloat(n.css(fe,"borderLeftWidth"))||0,Oe.top+=parseFloat(n.css(fe,"borderTopWidth"))||0),V.left-=Oe.left+(parseFloat(n.css(fe,"marginLeft"))||0),V.top-=Oe.top+(parseFloat(n.css(fe,"marginTop"))||0),!Ce&&(Be=n.css(fe,"overflow"))!=="hidden"&&Be!=="visible"&&(Ce=n(fe)));while(fe=fe.offsetParent);return Ce&&(Ce[0]!==re[0]||ee)&&Ne(Ce,1),V};var Q=(O=k.reposition.Corner=function(D,V){D=(""+D).replace(/([A-Z])/," $1").replace(/middle/gi,C).toLowerCase(),this.x=(D.match(/left|right/i)||D.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(D.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!V;var U=D.charAt(0);this.precedance=U==="t"||U==="b"?l:s}).prototype;Q.invert=function(D,V){this[D]=this[D]===h?g:this[D]===g?h:V||this[D]},Q.string=function(D){var V=this.x,U=this.y,re=V!==U?V==="center"||U!=="center"&&(this.precedance===l||this.forceY)?[U,V]:[V,U]:[V];return D!==!1?re.join(" "):re},Q.abbrev=function(){var D=this.string(!1);return D[0].charAt(0)+(D[1]&&D[1].charAt(0)||"")},Q.clone=function(){return new O(this.string(),this.forceY)},k.toggle=function(D,V){var U=this.cache,re=this.options,ee=this.tooltip;if(V){if(/over|enter/.test(V.type)&&U.event&&/out|leave/.test(U.event.type)&&re.show.target.add(V.target).length===re.show.target.length&&ee.has(V.relatedTarget).length)return this;U.event=n.event.fix(V)}if(this.waiting&&!D&&(this.hiddenDuringWait=i),this.rendered){if(this.destroyed||this.disabled)return this}else return D?this.render(1):this;var fe=D?"show":"hide",Ce=this.options[fe],Me=this.options.position,Oe=this.options.content,Be=this.tooltip.css("width"),Ne=this.tooltip.is(":visible"),nt=D||Ce.target.length===1,$e=!V||Ce.target.length<2||U.target[0]===V.target,mt,wt,ot;return(typeof D).search("boolean|number")&&(D=!Ne),mt=!ee.is(":animated")&&Ne===D&&$e,wt=mt?o:!!this._trigger(fe,[90]),this.destroyed?this:(wt!==a&&D&&this.focus(V),!wt||mt?this:(n.attr(ee[0],"aria-hidden",!D),D?(this.mouse&&(U.origin=n.event.fix(this.mouse)),n.isFunction(Oe.text)&&this._updateContent(Oe.text,a),n.isFunction(Oe.title)&&this._updateTitle(Oe.title,a),!K&&Me.target==="mouse"&&Me.adjust.mouse&&(n(e).bind("mousemove."+N,this._storeMouse),K=i),Be||ee.css("width",ee.outerWidth(a)),this.reposition(V,arguments[2]),Be||ee.css("width",""),Ce.solo&&(typeof Ce.solo=="string"?n(Ce.solo):n(P,Ce.solo)).not(ee).not(Ce.target).qtip("hide",new n.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete U.origin,K&&!n(P+'[tracking="true"]:visible',Ce.solo).not(ee).length&&(n(e).unbind("mousemove."+N),K=a),this.blur(V)),ot=n.proxy(function(){D?(Y.ie&&ee[0].style.removeAttribute("filter"),ee.css("overflow",""),typeof Ce.autofocus=="string"&&n(this.options.show.autofocus,ee).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):ee.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(D?"visible":"hidden")},this),Ce.effect===a||nt===a?(ee[fe](),ot()):n.isFunction(Ce.effect)?(ee.stop(1,1),Ce.effect.call(ee,this),ee.queue("fx",function(Dt){ot(),Dt()})):ee.fadeTo(90,D?1:0,ot),D&&Ce.target.trigger("qtip-"+this.id+"-inactive"),this))},k.show=function(D){return this.toggle(i,D)},k.hide=function(D){return this.toggle(a,D)},k.focus=function(D){if(!this.rendered||this.destroyed)return this;var V=n(P),U=this.tooltip,re=parseInt(U[0].style.zIndex,10),ee=x.zindex+V.length;return U.hasClass(E)||this._trigger("focus",[ee],D)&&(re!==ee&&(V.each(function(){this.style.zIndex>re&&(this.style.zIndex=this.style.zIndex-1)}),V.filter("."+E).qtip("blur",D)),U.addClass(E)[0].style.zIndex=ee),this},k.blur=function(D){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(E),this._trigger("blur",[this.tooltip.css("zIndex")],D),this)},k.disable=function(D){return this.destroyed?this:(D==="toggle"?D=!(this.rendered?this.tooltip.hasClass(L):this.disabled):typeof D!="boolean"&&(D=i),this.rendered&&this.tooltip.toggleClass(L,D).attr("aria-disabled",D),this.disabled=!!D,this)},k.enable=function(){return this.disable(a)},k._createButton=function(){var D=this,V=this.elements,U=V.tooltip,re=this.options.content.button,ee=typeof re=="string",fe=ee?re:"Close tooltip";V.button&&V.button.remove(),re.jquery?V.button=re:V.button=n("<a />",{class:"qtip-close "+(this.options.style.widget?"":N+"-icon"),title:fe,"aria-label":fe}).prepend(n("<span />",{class:"ui-icon ui-icon-close",html:"&times;"})),V.button.appendTo(V.titlebar||U).attr("role","button").click(function(Ce){return U.hasClass(L)||D.hide(Ce),a})},k._updateButton=function(D){if(!this.rendered)return a;var V=this.elements.button;D?this._createButton():V.remove()};function J(D){return G.concat("").join(D?"-"+D+" ":" ")}k._setWidget=function(){var D=this.options.style.widget,V=this.elements,U=V.tooltip,re=U.hasClass(L);U.removeClass(L),L=D?"ui-state-disabled":"qtip-disabled",U.toggleClass(L,re),U.toggleClass("ui-helper-reset "+J(),D).toggleClass(T,this.options.style.def&&!D),V.content&&V.content.toggleClass(J("content"),D),V.titlebar&&V.titlebar.toggleClass(J("header"),D),V.button&&V.button.toggleClass(N+"-icon",!D)};function le(D,V){if(V>0)return setTimeout(n.proxy(D,this),V);D.call(this)}function de(D){this.tooltip.hasClass(L)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=le.call(this,function(){this.toggle(i,D)},this.options.show.delay))}function je(D){if(!(this.tooltip.hasClass(L)||this.destroyed)){var V=n(D.relatedTarget),U=V.closest(P)[0]===this.tooltip[0],re=V[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==V[0]&&this.options.position.target==="mouse"&&U||this.options.hide.fixed&&/mouse(out|leave|move)/.test(D.type)&&(U||re)){try{D.preventDefault(),D.stopImmediatePropagation()}catch{}return}this.timers.hide=le.call(this,function(){this.toggle(a,D)},this.options.hide.delay,this)}}function it(D){this.tooltip.hasClass(L)||!this.options.hide.inactive||(clearTimeout(this.timers.inactive),this.timers.inactive=le.call(this,function(){this.hide(D)},this.options.hide.inactive))}function Ke(D){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(D)}k._storeMouse=function(D){return(this.mouse=n.event.fix(D)).type="mousemove",this},k._bind=function(D,V,U,re,ee){if(!(!D||!U||!V.length)){var fe="."+this._id+(re?"-"+re:"");return n(D).bind((V.split?V:V.join(fe+" "))+fe,n.proxy(U,ee||this)),this}},k._unbind=function(D,V){return D&&n(D).unbind("."+this._id+(V?"-"+V:"")),this};function qe(D,V,U){n(e.body).delegate(D,(V.split?V:V.join("."+N+" "))+"."+N,function(){var re=x.api[n.attr(this,H)];re&&!re.disabled&&U.apply(re,arguments)})}k._trigger=function(D,V,U){var re=new n.Event("tooltip"+D);return re.originalEvent=U&&n.extend({},U)||this.cache.event||o,this.triggering=D,this.tooltip.trigger(re,[this].concat(V||[])),this.triggering=a,!re.isDefaultPrevented()},k._bindEvents=function(D,V,U,re,ee,fe){var Ce=U.filter(re).add(re.filter(U)),Me=[];Ce.length&&(n.each(V,function(Oe,Be){var Ne=n.inArray(Be,D);Ne>-1&&Me.push(D.splice(Ne,1)[0])}),Me.length&&(this._bind(Ce,Me,function(Oe){var Be=this.rendered?this.tooltip[0].offsetWidth>0:!1;(Be?fe:ee).call(this,Oe)}),U=U.not(Ce),re=re.not(Ce))),this._bind(U,D,ee),this._bind(re,V,fe)},k._assignInitialEvents=function(D){var V=this.options,U=V.show.target,re=V.hide.target,ee=V.show.event?n.trim(""+V.show.event).split(" "):[],fe=V.hide.event?n.trim(""+V.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(V.show.event)&&!/mouse(out|leave)/i.test(V.hide.event)&&fe.push("mouseleave"),this._bind(U,"mousemove",function(Me){this._storeMouse(Me),this.cache.onTarget=i});function Ce(Me){if(this.disabled||this.destroyed)return a;this.cache.event=Me&&n.event.fix(Me),this.cache.target=Me&&n(Me.target),clearTimeout(this.timers.show),this.timers.show=le.call(this,function(){this.render(typeof Me=="object"||V.show.ready)},V.prerender?0:V.show.delay)}this._bindEvents(ee,fe,U,re,Ce,function(){if(!this.timers)return a;clearTimeout(this.timers.show)}),(V.show.ready||V.prerender)&&Ce.call(this,D)},k._assignEvents=function(){var D=this,V=this.options,U=V.position,re=this.tooltip,ee=V.show.target,fe=V.hide.target,Ce=U.container,Me=U.viewport,Oe=n(e),Be=n(r),Ne=V.show.event?n.trim(""+V.show.event).split(" "):[],nt=V.hide.event?n.trim(""+V.hide.event).split(" "):[];n.each(V.events,function($e,mt){D._bind(re,$e==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+$e],mt,null,re)}),/mouse(out|leave)/i.test(V.hide.event)&&V.hide.leave==="window"&&this._bind(Oe,["mouseout","blur"],function($e){!/select|option/.test($e.target.nodeName)&&!$e.relatedTarget&&this.hide($e)}),V.hide.fixed?fe=fe.add(re.addClass(A)):/mouse(over|enter)/i.test(V.show.event)&&this._bind(fe,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+V.hide.event).indexOf("unfocus")>-1&&this._bind(Ce.closest("html"),["mousedown","touchstart"],function($e){var mt=n($e.target),wt=this.rendered&&!this.tooltip.hasClass(L)&&this.tooltip[0].offsetWidth>0,ot=mt.parents(P).filter(this.tooltip[0]).length>0;mt[0]!==this.target[0]&&mt[0]!==this.tooltip[0]&&!ot&&!this.target.has(mt[0]).length&&wt&&this.hide($e)}),typeof V.hide.inactive=="number"&&(this._bind(ee,"qtip-"+this.id+"-inactive",it,"inactive"),this._bind(fe.add(re),x.inactiveEvents,it)),this._bindEvents(Ne,nt,ee,fe,de,je),this._bind(ee.add(re),"mousemove",function($e){if(typeof V.hide.distance=="number"){var mt=this.cache.origin||{},wt=this.options.hide.distance,ot=Math.abs;(ot($e.pageX-mt.pageX)>=wt||ot($e.pageY-mt.pageY)>=wt)&&this.hide($e)}this._storeMouse($e)}),U.target==="mouse"&&U.adjust.mouse&&(V.hide.event&&this._bind(ee,["mouseenter","mouseleave"],function($e){if(!this.cache)return a;this.cache.onTarget=$e.type==="mouseenter"}),this._bind(Oe,"mousemove",function($e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(L)&&this.tooltip[0].offsetWidth>0&&this.reposition($e)})),(U.adjust.resize||Me.length)&&this._bind(n.event.special.resize?Me:Be,"resize",Ke),U.adjust.scroll&&this._bind(Be.add(U.container),"scroll",Ke)},k._unassignEvents=function(){var D=this.options,V=D.show.target,U=D.hide.target,re=n.grep([this.elements.target[0],this.rendered&&this.tooltip[0],D.position.container[0],D.position.viewport[0],D.position.container.closest("html")[0],r,e],function(ee){return typeof ee=="object"});V&&V.toArray&&(re=re.concat(V.toArray())),U&&U.toArray&&(re=re.concat(U.toArray())),this._unbind(re)._unbind(re,"destroy")._unbind(re,"inactive")},n(function(){qe(P,["mouseenter","mouseleave"],function(D){var V=D.type==="mouseenter",U=n(D.currentTarget),re=n(D.relatedTarget||D.target),ee=this.options;V?(this.focus(D),U.hasClass(A)&&!U.hasClass(L)&&clearTimeout(this.timers.hide)):ee.position.target==="mouse"&&ee.position.adjust.mouse&&ee.hide.event&&ee.show.target&&!re.closest(ee.show.target[0]).length&&this.hide(D),U.toggleClass(M,V)}),qe("["+H+"]",z,it)});function Ge(D,V,U){var re,ee,fe,Ce,Me,Oe=n(e.body),Be=D[0]===e?Oe:D,Ne=D.metadata?D.metadata(U.metadata):o,nt=U.metadata.type==="html5"&&Ne?Ne[U.metadata.name]:o,$e=D.data(U.metadata.name||"qtipopts");try{$e=typeof $e=="string"?n.parseJSON($e):$e}catch{}if(Ce=n.extend(i,{},x.defaults,U,typeof $e=="object"?me($e):o,me(nt||Ne)),ee=Ce.position,Ce.id=V,typeof Ce.content.text=="boolean")if(fe=D.attr(Ce.content.attr),Ce.content.attr!==a&&fe)Ce.content.text=fe;else return a;if(ee.container.length||(ee.container=Oe),ee.target===a&&(ee.target=Be),Ce.show.target===a&&(Ce.show.target=Be),Ce.show.solo===i&&(Ce.show.solo=ee.container.closest("body")),Ce.hide.target===a&&(Ce.hide.target=Be),Ce.position.viewport===i&&(Ce.position.viewport=ee.container),ee.container=ee.container.eq(0),ee.at=new O(ee.at,i),ee.my=new O(ee.my),D.data(N)){if(Ce.overwrite)D.qtip("destroy",!0);else if(Ce.overwrite===a)return a}return D.attr(j,V),Ce.suppress&&(Me=D.attr("title"))&&D.removeAttr("title").attr(X,Me).attr("title",""),re=new ae(D,Ce,V,!!fe),D.data(N,re),re}x=n.fn.qtip=function(D,V,U){var re=(""+D).toLowerCase(),ee=o,fe=n.makeArray(arguments).slice(1),Ce=fe[fe.length-1],Me=this[0]?n.data(this[0],N):o;if(!arguments.length&&Me||re==="api")return Me;if(typeof D=="string")return this.each(function(){var Oe=n.data(this,N);if(!Oe)return i;if(Ce&&Ce.timeStamp&&(Oe.cache.event=Ce),V&&(re==="option"||re==="options"))if(U!==t||n.isPlainObject(V))Oe.set(V,U);else return ee=Oe.get(V),a;else Oe[re]&&Oe[re].apply(Oe,fe)}),ee!==o?ee:this;if(typeof D=="object"||!arguments.length)return Me=me(n.extend(i,{},D)),this.each(function(Oe){var Be,Ne;if(Ne=n.isArray(Me.id)?Me.id[Oe]:Me.id,Ne=!Ne||Ne===a||Ne.length<1||x.api[Ne]?x.nextid++:Ne,Be=Ge(n(this),Ne,Me),Be===a)return i;x.api[Ne]=Be,n.each(I,function(){this.initialize==="initialize"&&this(Be)}),Be._assignInitialEvents(Ce)})},n.qtip=ae,x.api={},n.each({attr:function(D,V){if(this.length){var U=this[0],re="title",ee=n.data(U,"qtip");if(D===re&&ee&&ee.options&&typeof ee=="object"&&typeof ee.options=="object"&&ee.options.suppress)return arguments.length<2?n.attr(U,X):(ee&&ee.options.content.attr===re&&ee.cache.attr&&ee.set("content.text",V),this.attr(X,V))}return n.fn["attr"+F].apply(this,arguments)},clone:function(D){var V=n.fn["clone"+F].apply(this,arguments);return D||V.filter("["+X+"]").attr("title",function(){return n.attr(this,X)}).removeAttr(X),V}},function(D,V){if(!V||n.fn[D+F])return i;var U=n.fn[D+F]=n.fn[D];n.fn[D]=function(){return V.apply(this,arguments)||U.apply(this,arguments)}}),n.ui||(n["cleanData"+F]=n.cleanData,n.cleanData=function(D){for(var V=0,U;(U=n(D[V])).length;V++)if(U.attr(j))try{U.triggerHandler("removeqtip")}catch{}n["cleanData"+F].apply(this,arguments)}),x.version="3.0.3",x.nextid=0,x.inactiveEvents=z,x.zindex=15e3,x.defaults={prerender:a,id:a,overwrite:i,suppress:i,content:{text:i,attr:"title",title:a,button:a},position:{my:"top left",at:"bottom right",target:a,container:a,viewport:a,adjust:{x:0,y:0,mouse:i,scroll:i,resize:i,method:"flipinvert flipinvert"},effect:function(D,V){n(this).animate(V,{duration:200,queue:a})}},show:{target:a,event:"mouseenter",effect:i,delay:90,solo:a,ready:a,autofocus:a},hide:{target:a,event:"mouseleave",effect:i,delay:0,fixed:a,inactive:a,leave:"window",distance:a},style:{classes:"",widget:a,width:a,height:a,def:i},events:{render:o,move:o,show:o,hide:o,toggle:o,visible:o,hidden:o,focus:o,blur:o}};var et,rt,Qe,Ye,Ie,Ve="margin",Re="border",W="color",se="background-color",Te="transparent",ve=" !important",ge=!!e.createElement("canvas").getContext,ze=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;function Pe(D){return D.charAt(0).toUpperCase()+D.slice(1)}var We={},gt=["Webkit","O","Moz","ms"];function Et(D,V){var U=V.charAt(0).toUpperCase()+V.slice(1),re=(V+" "+gt.join(U+" ")+U).split(" "),ee,fe,Ce=0;if(We[V])return D.css(We[V]);for(;ee=re[Ce++];)if((fe=D.css(ee))!==t)return We[V]=ee,fe}function ft(D,V){return Math.ceil(parseFloat(Et(D,V)))}ge?(Ye=r.devicePixelRatio||1,Ie=function(){var D=e.createElement("canvas").getContext("2d");return D.backingStorePixelRatio||D.webkitBackingStorePixelRatio||D.mozBackingStorePixelRatio||D.msBackingStorePixelRatio||D.oBackingStorePixelRatio||1}(),Qe=Ye/Ie):rt=function(D,V,U){return"<qtipvml:"+D+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(V||"")+' style="behavior: url(#default#VML); '+(U||"")+'" />'};function xt(D,V){this._ns="tip",this.options=V,this.offset=V.offset,this.size=[V.width,V.height],this.qtip=D,this.init(D)}n.extend(xt.prototype,{init:function(D){var V,U;U=this.element=D.elements.tip=n("<div />",{class:N+"-tip"}).prependTo(D.tooltip),ge?(V=n("<canvas />").appendTo(this.element)[0].getContext("2d"),V.lineJoin="miter",V.miterLimit=1e5,V.save()):(V=rt("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(V+V),D._bind(n("*",U).add(U),["click","mousedown"],function(re){re.stopPropagation()},this._ns)),D._bind(D.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(D){var V=this.qtip.elements.titlebar;return V&&(D.y===d||D.y===C&&this.element.position().top+this.size[1]/2+this.options.offset<V.outerHeight(i))},_parseCorner:function(D){var V=this.qtip.options.position.my;return D===a||V===a?D=a:D===i?D=new O(V.string()):D.string||(D=new O(D),D.fixed=i),D},_parseWidth:function(D,V,U){var re=this.qtip.elements,ee=Re+Pe(V)+"Width";return(U?ft(U,ee):ft(re.content,ee)||ft(this._useTitle(D)&&re.titlebar||re.content,ee)||ft(re.tooltip,ee))||0},_parseRadius:function(D){var V=this.qtip.elements,U=Re+Pe(D.y)+Pe(D.x)+"Radius";return Y.ie<9?0:ft(this._useTitle(D)&&V.titlebar||V.content,U)||ft(V.tooltip,U)||0},_invalidColour:function(D,V,U){var re=D.css(V);return!re||U&&re===D.css(U)||ze.test(re)?a:re},_parseColours:function(D){var V=this.qtip.elements,U=this.element.css("cssText",""),re=Re+Pe(D[D.precedance])+Pe(W),ee=this._useTitle(D)&&V.titlebar||V.content,fe=this._invalidColour,Ce=[];return Ce[0]=fe(U,se)||fe(ee,se)||fe(V.content,se)||fe(V.tooltip,se)||U.css(se),Ce[1]=fe(U,re,W)||fe(ee,re,W)||fe(V.content,re,W)||fe(V.tooltip,re,W)||V.tooltip.css(re),n("*",U).add(U).css("cssText",se+":"+Te+ve+";"+Re+":0"+ve+";"),Ce},_calculateSize:function(D){var V=D.precedance===l,U=this.options.width,re=this.options.height,ee=D.abbrev()==="c",fe=(V?U:re)*(ee?.5:1),Ce=Math.pow,Me=Math.round,Oe,Be,Ne,nt=Math.sqrt(Ce(fe,2)+Ce(re,2)),$e=[this.border/fe*nt,this.border/re*nt];return $e[2]=Math.sqrt(Ce($e[0],2)-Ce(this.border,2)),$e[3]=Math.sqrt(Ce($e[1],2)-Ce(this.border,2)),Oe=nt+$e[2]+$e[3]+(ee?0:$e[0]),Be=Oe/nt,Ne=[Me(Be*U),Me(Be*re)],V?Ne:Ne.reverse()},_calculateTip:function(D,V,U){U=U||1,V=V||this.size;var re=V[0]*U,ee=V[1]*U,fe=Math.ceil(re/2),Ce=Math.ceil(ee/2),Me={br:[0,0,re,ee,re,0],bl:[0,0,re,0,0,ee],tr:[0,ee,re,0,re,ee],tl:[0,0,0,ee,re,ee],tc:[0,ee,fe,0,re,ee],bc:[0,0,re,0,fe,ee],rc:[0,0,re,Ce,0,ee],lc:[re,0,re,ee,0,Ce]};return Me.lt=Me.br,Me.rt=Me.bl,Me.lb=Me.tr,Me.rb=Me.tl,Me[D.abbrev()]},_drawCoords:function(D,V){D.beginPath(),D.moveTo(V[0],V[1]),D.lineTo(V[2],V[3]),D.lineTo(V[4],V[5]),D.closePath()},create:function(){var D=this.corner=(ge||Y.ie)&&this._parseCorner(this.options.corner);return this.enabled=!!this.corner&&this.corner.abbrev()!=="c",this.enabled&&(this.qtip.cache.corner=D.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(D,V){if(!this.enabled)return this;var U=this.qtip.elements,re=this.element,ee=re.children(),fe=this.options,Ce=this.size,Me=fe.mimic,Oe=Math.round,Be,Ne,nt,$e,mt,wt,ot,Dt;D||(D=this.qtip.cache.corner||this.corner),Me===a?Me=D:(Me=new O(Me),Me.precedance=D.precedance,Me.x==="inherit"?Me.x=D.x:Me.y==="inherit"?Me.y=D.y:Me.x===Me.y&&(Me[D.precedance]=D[D.precedance])),Ne=Me.precedance,D.precedance===s?this._swapDimensions():this._resetDimensions(),Be=this.color=this._parseColours(D),Be[1]!==Te?(Dt=this.border=this._parseWidth(D,D[D.precedance]),fe.border&&Dt<1&&!ze.test(Be[1])&&(Be[0]=Be[1]),this.border=Dt=fe.border!==i?fe.border:Dt):this.border=Dt=0,ot=this.size=this._calculateSize(D),re.css({width:ot[0],height:ot[1],lineHeight:ot[1]+"px"}),D.precedance===l?wt=[Oe(Me.x===h?Dt:Me.x===g?ot[0]-Ce[0]-Dt:(ot[0]-Ce[0])/2),Oe(Me.y===d?ot[1]-Ce[1]:0)]:wt=[Oe(Me.x===h?ot[0]-Ce[0]:0),Oe(Me.y===d?Dt:Me.y===m?ot[1]-Ce[1]-Dt:(ot[1]-Ce[1])/2)],ge?(nt=ee[0].getContext("2d"),nt.restore(),nt.save(),nt.clearRect(0,0,6e3,6e3),$e=this._calculateTip(Me,Ce,Qe),mt=this._calculateTip(Me,this.size,Qe),ee.attr(u,ot[0]*Qe).attr(c,ot[1]*Qe),ee.css(u,ot[0]).css(c,ot[1]),this._drawCoords(nt,mt),nt.fillStyle=Be[1],nt.fill(),nt.translate(wt[0]*Qe,wt[1]*Qe),this._drawCoords(nt,$e),nt.fillStyle=Be[0],nt.fill()):($e=this._calculateTip(Me),$e="m"+$e[0]+","+$e[1]+" l"+$e[2]+","+$e[3]+" "+$e[4]+","+$e[5]+" xe",wt[2]=Dt&&/^(r|b)/i.test(D.string())?Y.ie===8?2:1:0,ee.css({coordsize:ot[0]+Dt+" "+ot[1]+Dt,antialias:""+(Me.string().indexOf(C)>-1),left:wt[0]-wt[2]*+(Ne===s),top:wt[1]-wt[2]*+(Ne===l),width:ot[0]+Dt,height:ot[1]+Dt}).each(function(bt){var fr=n(this);fr[fr.prop?"prop":"attr"]({coordsize:ot[0]+Dt+" "+ot[1]+Dt,path:$e,fillcolor:Be[0],filled:!!bt,stroked:!bt}).toggle(!!(Dt||bt)),!bt&&fr.html(rt("stroke",'weight="'+Dt*2+'px" color="'+Be[1]+'" miterlimit="1000" joinstyle="miter"'))})),r.opera&&setTimeout(function(){U.tip.css({display:"inline-block",visibility:"visible"})},1),V!==a&&this.calculate(D,ot)},calculate:function(D,V){if(!this.enabled)return a;var U=this,re=this.qtip.elements,ee=this.element,fe=this.options.offset,Ce={},Me,Oe;return D=D||this.corner,Me=D.precedance,V=V||this._calculateSize(D),Oe=[D.x,D.y],Me===s&&Oe.reverse(),n.each(Oe,function(Be,Ne){var nt,$e,mt;Ne===C?(nt=Me===l?h:d,Ce[nt]="50%",Ce[Ve+"-"+nt]=-Math.round(V[Me===l?0:1]/2)+fe):(nt=U._parseWidth(D,Ne,re.tooltip),$e=U._parseWidth(D,Ne,re.content),mt=U._parseRadius(D),Ce[Ne]=Math.max(-U.border,Be?$e:fe+(mt>nt?mt:-nt)))}),Ce[D[Me]]-=V[Me===s?0:1],ee.css({margin:"",top:"",bottom:"",left:"",right:""}).css(Ce),Ce},reposition:function(D,V,U){if(!this.enabled)return;var re=V.cache,ee=this.corner.clone(),fe=U.adjusted,Ce=V.options.position.adjust.method.split(" "),Me=Ce[0],Oe=Ce[1]||Ce[0],Be={left:a,top:a,x:0,y:0},Ne,nt={},$e;function mt(ot,Dt,bt,fr,Br){ot===_&&ee.precedance===Dt&&fe[fr]&&ee[bt]!==C?ee.precedance=ee.precedance===s?l:s:ot!==_&&fe[fr]&&(ee[Dt]=ee[Dt]===C?fe[fr]>0?fr:Br:ee[Dt]===fr?Br:fr)}function wt(ot,Dt,bt){ee[ot]===C?nt[Ve+"-"+Dt]=Be[ot]=Ne[Ve+"-"+Dt]-fe[Dt]:($e=Ne[bt]!==t?[fe[Dt],-Ne[Dt]]:[-fe[Dt],Ne[Dt]],(Be[ot]=Math.max($e[0],$e[1]))>$e[0]&&(U[Dt]-=fe[Dt],Be[Dt]=a),nt[Ne[bt]!==t?bt:Dt]=Be[ot])}this.corner.fixed!==i&&(mt(Me,s,l,h,g),mt(Oe,l,s,d,m),(ee.string()!==re.corner.string()||re.cornerTop!==fe.top||re.cornerLeft!==fe.left)&&this.update(ee,a)),Ne=this.calculate(ee),Ne.right!==t&&(Ne.left=-Ne.right),Ne.bottom!==t&&(Ne.top=-Ne.bottom),Ne.user=this.offset,Be.left=Me===_&&!!fe.left,Be.left&&wt(s,h,g),Be.top=Oe===_&&!!fe.top,Be.top&&wt(l,d,m),this.element.css(nt).toggle(!(Be.x&&Be.y||ee.x===C&&Be.y||ee.y===C&&Be.x)),U.left-=Ne.left.charAt?Ne.user:Me!==_||Be.top||!Be.left&&!Be.top?Ne.left+this.border:0,U.top-=Ne.top.charAt?Ne.user:Oe!==_||Be.left||!Be.left&&!Be.top?Ne.top+this.border:0,re.cornerLeft=fe.left,re.cornerTop=fe.top,re.corner=ee.clone()},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),et=I.tip=function(D){return new xt(D,D.options.style.tip)},et.initialize="render",et.sanitize=function(D){if(D.style&&"tip"in D.style){var V=D.style.tip;typeof V!="object"&&(V=D.style.tip={corner:V}),/string|boolean/i.test(typeof V.corner)||(V.corner=i)}},p.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(D){this.size=[D.width,D.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},n.extend(i,x.defaults,{style:{tip:{corner:i,mimic:a,width:6,height:6,border:i,offset:0}}});var kt,dt,Nt="qtip-modal",qt="."+Nt;dt=function(){var D=this,V={},U,re,ee;function fe(Oe){if(n.expr[":"].focusable)return n.expr[":"].focusable;var Be=!isNaN(n.attr(Oe,"tabindex")),Ne=Oe.nodeName&&Oe.nodeName.toLowerCase(),nt,$e,mt;return Ne==="area"?(nt=Oe.parentNode,$e=nt.name,!Oe.href||!$e||nt.nodeName.toLowerCase()!=="map"?!1:(mt=n("img[usemap=#"+$e+"]")[0],!!mt&&mt.is(":visible"))):/input|select|textarea|button|object/.test(Ne)?!Oe.disabled:Ne==="a"&&Oe.href||Be}function Ce(Oe){V.length<1&&Oe.length?Oe.not("body").blur():V.first().focus()}function Me(Oe){if(ee.is(":visible")){var Be=n(Oe.target),Ne=U.tooltip,nt=Be.closest(P),$e;$e=nt.length<1?a:parseInt(nt[0].style.zIndex,10)>parseInt(Ne[0].style.zIndex,10),!$e&&Be.closest(P)[0]!==Ne[0]&&Ce(Be)}}n.extend(D,{init:function(){return ee=D.elem=n("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return a}}).hide(),n(e.body).bind("focusin"+qt,Me),n(e).bind("keydown"+qt,function(Oe){U&&U.options.show.modal.escape&&Oe.keyCode===27&&U.hide(Oe)}),ee.bind("click"+qt,function(Oe){U&&U.options.show.modal.blur&&U.hide(Oe)}),D},update:function(Oe){U=Oe,Oe.options.show.modal.stealfocus!==a?V=Oe.tooltip.find("*").filter(function(){return fe(this)}):V=[]},toggle:function(Oe,Be,Ne){var nt=Oe.tooltip,$e=Oe.options.show.modal,mt=$e.effect,wt=Be?"show":"hide",ot=ee.is(":visible"),Dt=n(qt).filter(":visible:not(:animated)").not(nt);return D.update(Oe),Be&&$e.stealfocus!==a&&Ce(n(":focus")),ee.toggleClass("blurs",$e.blur),Be&&ee.appendTo(e.body),ee.is(":animated")&&ot===Be&&re!==a||!Be&&Dt.length||(ee.stop(i,a),n.isFunction(mt)?mt.call(ee,Be):mt===a?ee[wt]():ee.fadeTo(parseInt(Ne,10)||90,Be?1:0,function(){Be||ee.hide()}),Be||ee.queue(function(bt){ee.css({left:"",top:""}),n(qt).length||ee.detach(),bt()}),re=Be,U.destroyed&&(U=o)),D}}),D.init()},dt=new dt;function wr(D,V){this.options=V,this._ns="-modal",this.qtip=D,this.init(D)}n.extend(wr.prototype,{init:function(D){var V=D.tooltip;if(!this.options.on)return this;D.elements.overlay=dt.elem,V.addClass(Nt).css("z-index",x.modal_zindex+n(qt).length),D._bind(V,["tooltipshow","tooltiphide"],function(U,re,ee){var fe=U.originalEvent;if(U.target===V[0])if(fe&&U.type==="tooltiphide"&&/mouse(leave|enter)/.test(fe.type)&&n(fe.relatedTarget).closest(dt.elem[0]).length)try{U.preventDefault()}catch{}else(!fe||fe&&fe.type!=="tooltipsolo")&&this.toggle(U,U.type==="tooltipshow",ee)},this._ns,this),D._bind(V,"tooltipfocus",function(U,re){if(!(U.isDefaultPrevented()||U.target!==V[0])){var ee=n(qt),fe=x.modal_zindex+ee.length,Ce=parseInt(V[0].style.zIndex,10);dt.elem[0].style.zIndex=fe-1,ee.each(function(){this.style.zIndex>Ce&&(this.style.zIndex-=1)}),ee.filter("."+E).qtip("blur",U.originalEvent),V.addClass(E)[0].style.zIndex=fe,dt.update(re);try{U.preventDefault()}catch{}}},this._ns,this),D._bind(V,"tooltiphide",function(U){U.target===V[0]&&n(qt).filter(":visible").not(V).last().qtip("focus",U)},this._ns,this)},toggle:function(D,V,U){if(D&&D.isDefaultPrevented())return this;dt.toggle(this.qtip,!!V,U)},destroy:function(){this.qtip.tooltip.removeClass(Nt),this.qtip._unbind(this.qtip.tooltip,this._ns),dt.toggle(this.qtip,a),delete this.qtip.elements.overlay}}),kt=I.modal=function(D){return new wr(D,D.options.show.modal)},kt.sanitize=function(D){D.show&&(typeof D.show.modal!="object"?D.show.modal={on:!!D.show.modal}:typeof D.show.modal.on>"u"&&(D.show.modal.on=i))},x.modal_zindex=x.zindex-200,kt.initialize="render",p.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},n.extend(i,x.defaults,{show:{modal:{on:a,effect:i,blur:i,stealfocus:i,escape:i}}}),I.viewport=function(D,V,U,re,ee,fe,Ce){var Me=U.target,Oe=D.elements.tooltip,Be=U.my,Ne=U.at,nt=U.adjust,$e=nt.method.split(" "),mt=$e[0],wt=$e[1]||$e[0],ot=U.viewport,Dt=U.container,bt={left:0,top:0},fr,Br,en,gn,gr,dr,mr,jr;if(!ot.jquery||Me[0]===r||Me[0]===e.body||nt.method==="none")return bt;en=Dt.offset()||bt,gn=Dt.css("position")==="static",fr=Oe.css("position")==="fixed",gr=ot[0]===r?ot.width():ot.outerWidth(a),dr=ot[0]===r?ot.height():ot.outerHeight(a),mr={left:fr?0:ot.scrollLeft(),top:fr?0:ot.scrollTop()},jr=ot.offset()||bt;function Mn(vr,oi,Ui,Pn,Ot,si,Ca,Ki,xr){var tn=V[Ot],mn=Be[vr],ao=Ne[vr],su=Ui===_,Xi=mn===Ot?xr:mn===si?-xr:-xr/2,ts=ao===Ot?Ki:ao===si?-Ki:-Ki/2,Yi=mr[Ot]+jr[Ot]-(gn?0:en[Ot]),Qi=Yi-tn,Zi=tn+xr-(Ca===u?gr:dr)-Yi,bi=Xi-(Be.precedance===vr||mn===Be[oi]?ts:0)-(ao===C?Ki/2:0);return su?(bi=(mn===Ot?1:-1)*Xi,V[Ot]+=Qi>0?Qi:Zi>0?-Zi:0,V[Ot]=Math.max(-en[Ot]+jr[Ot],tn-bi,Math.min(Math.max(-en[Ot]+jr[Ot]+(Ca===u?gr:dr),tn+bi),V[Ot],mn==="center"?tn-Xi:1e9))):(Pn*=Ui===w?2:0,Qi>0&&(mn!==Ot||Zi>0)?(V[Ot]-=bi+Pn,Br.invert(vr,Ot)):Zi>0&&(mn!==si||Qi>0)&&(V[Ot]-=(mn===C?-bi:bi)+Pn,Br.invert(vr,si)),V[Ot]<mr[Ot]&&-V[Ot]>Zi&&(V[Ot]=tn,Br=Be.clone())),V[Ot]-tn}return(mt!=="shift"||wt!=="shift")&&(Br=Be.clone()),bt={left:mt!=="none"?Mn(s,l,mt,nt.x,h,g,u,re,fe):0,top:wt!=="none"?Mn(l,s,wt,nt.y,d,m,c,ee,Ce):0,my:Br},bt},I.polys={polygon:function(D,V){var U={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:a},re=0,ee,fe=[],Ce=1,Me=1,Oe=0,Be=0,Ne,nt;for(re=D.length;re--;)ee=[parseInt(D[--re],10),parseInt(D[re+1],10)],ee[0]>U.position.right&&(U.position.right=ee[0]),ee[0]<U.position.left&&(U.position.left=ee[0]),ee[1]>U.position.bottom&&(U.position.bottom=ee[1]),ee[1]<U.position.top&&(U.position.top=ee[1]),fe.push(ee);if(Ne=U.width=Math.abs(U.position.right-U.position.left),nt=U.height=Math.abs(U.position.bottom-U.position.top),V.abbrev()==="c")U.position={left:U.position.left+U.width/2,top:U.position.top+U.height/2};else{for(;Ne>0&&nt>0&&Ce>0&&Me>0;)for(Ne=Math.floor(Ne/2),nt=Math.floor(nt/2),V.x===h?Ce=Ne:V.x===g?Ce=U.width-Ne:Ce+=Math.floor(Ne/2),V.y===d?Me=nt:V.y===m?Me=U.height-nt:Me+=Math.floor(nt/2),re=fe.length;re--&&!(fe.length<2);)Oe=fe[re][0]-U.position.left,Be=fe[re][1]-U.position.top,(V.x===h&&Oe>=Ce||V.x===g&&Oe<=Ce||V.x===C&&(Oe<Ce||Oe>U.width-Ce)||V.y===d&&Be>=Me||V.y===m&&Be<=Me||V.y===C&&(Be<Me||Be>U.height-Me))&&fe.splice(re,1);U.position={left:fe[0][0],top:fe[0][1]}}return U},rect:function(D,V,U,re){return{width:Math.abs(U-D),height:Math.abs(re-V),position:{left:Math.min(D,U),top:Math.min(V,re)}}},_angles:{tc:3/2,tr:7/4,tl:5/4,bc:1/2,br:1/4,bl:3/4,rc:2,lc:1,c:0},ellipse:function(D,V,U,re,ee){var fe=I.polys._angles[ee.abbrev()],Ce=fe===0?0:U*Math.cos(fe*Math.PI),Me=re*Math.sin(fe*Math.PI);return{width:U*2-Math.abs(Ce),height:re*2-Math.abs(Me),position:{left:D+Ce,top:V+Me},adjustable:a}},circle:function(D,V,U,re){return I.polys.ellipse(D,V,U,U,re)}},I.svg=function(D,V,U){for(var re=V[0],ee=n(re.ownerSVGElement),fe=re.ownerDocument,Ce=(parseInt(V.css("stroke-width"),10)||0)/2,Me,Oe,Be,Ne,nt,$e,mt,wt,ot;!re.getBBox;)re=re.parentNode;if(!re.getBBox||!re.parentNode)return a;switch(re.nodeName){case"ellipse":case"circle":wt=I.polys.ellipse(re.cx.baseVal.value,re.cy.baseVal.value,(re.rx||re.r).baseVal.value+Ce,(re.ry||re.r).baseVal.value+Ce,U);break;case"line":case"polygon":case"polyline":for(mt=re.points||[{x:re.x1.baseVal.value,y:re.y1.baseVal.value},{x:re.x2.baseVal.value,y:re.y2.baseVal.value}],wt=[],$e=-1,Ne=mt.numberOfItems||mt.length;++$e<Ne;)nt=mt.getItem?mt.getItem($e):mt[$e],wt.push.apply(wt,[nt.x,nt.y]);wt=I.polys.polygon(wt,U);break;default:wt=re.getBBox(),wt={width:wt.width,height:wt.height,position:{left:wt.x,top:wt.y}};break}return ot=wt.position,ee=ee[0],ee.createSVGPoint&&(Oe=re.getScreenCTM(),mt=ee.createSVGPoint(),mt.x=ot.left,mt.y=ot.top,Be=mt.matrixTransform(Oe),ot.left=Be.x,ot.top=Be.y),fe!==e&&D.position.target!=="mouse"&&(Me=n((fe.defaultView||fe.parentWindow).frameElement).offset(),Me&&(ot.left+=Me.left,ot.top+=Me.top)),fe=n(fe),ot.left+=fe.scrollLeft(),ot.top+=fe.scrollTop(),wt},I.imagemap=function(D,V,U){V.jquery||(V=n(V));var re=(V.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),ee=n('img[usemap="#'+V.parent("map").attr("name")+'"]'),fe=n.trim(V.attr("coords")),Ce=fe.replace(/,$/,"").split(","),Me,Oe,Be,Ne,nt;if(!ee.length)return a;if(re==="polygon")Ne=I.polys.polygon(Ce,U);else if(I.polys[re]){for(Be=-1,nt=Ce.length,Oe=[];++Be<nt;)Oe.push(parseInt(Ce[Be],10));Ne=I.polys[re].apply(this,Oe.concat(U))}else return a;return Me=ee.offset(),Me.left+=Math.ceil((ee.outerWidth(a)-ee.width())/2),Me.top+=Math.ceil((ee.outerHeight(a)-ee.height())/2),Ne.position.left+=Me.left,Ne.position.top+=Me.top,Ne};var Zt,jt=`<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:'';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>`;function ar(D){this._ns="ie6",this.qtip=D,this.init(D)}n.extend(ar.prototype,{_scroll:function(){var D=this.qtip.elements.overlay;D&&(D[0].style.top=n(r).scrollTop()+"px")},init:function(D){var V=D.tooltip;n("select, object").length<1&&(this.bgiframe=D.elements.bgiframe=n(jt).appendTo(V),D._bind(V,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=n("<div/>",{id:N+"-rcontainer"}).appendTo(e.body),D.elements.overlay&&D.elements.overlay.addClass("qtipmodal-ie6fix")&&(D._bind(r,["scroll","resize"],this._scroll,this._ns,this),D._bind(V,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var D=this.qtip.tooltip,V={height:D.outerHeight(a),width:D.outerWidth(a)},U=this.qtip.plugins.tip,re=this.qtip.elements.tip,ee,fe;fe=parseInt(D.css("borderLeftWidth"),10)||0,fe={left:-fe,top:-fe},U&&re&&(ee=U.corner.precedance==="x"?[u,h]:[c,d],fe[ee[1]]-=re[ee[0]]()),this.bgiframe.css(fe).css(V)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var D=this.qtip.tooltip,V=this.qtip.options.style,U=this.qtip.options.position.container,re,ee,fe,Ce;return this.qtip.drawing=1,V.height&&D.css(c,V.height),V.width?D.css(u,V.width):(D.css(u,"").appendTo(this.redrawContainer),ee=D.width(),ee%2<1&&(ee+=1),fe=D.css("maxWidth")||"",Ce=D.css("minWidth")||"",re=(fe+Ce).indexOf("%")>-1?U.width()/100:0,fe=(fe.indexOf("%")>-1?re:1*parseInt(fe,10))||ee,Ce=(Ce.indexOf("%")>-1?re:1*parseInt(Ce,10))||0,ee=fe+Ce?Math.min(Math.max(ee,Ce),fe):ee,D.css(u,Math.round(ee)).appendTo(U)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([r,this.qtip.tooltip],this._ns)}}),Zt=I.ie6=function(D){return Y.ie===6?new ar(D):a},Zt.initialize="render",p.ie6={"^content|style$":function(){this.redraw()}}})})(window,document)});var Cv=ho((fT,nu)=>{"use strict";(function(r,e){"use strict";var t=function(h){return h!=null&&typeof h=="object"},n=function(h){return h!=null&&typeof h=="function"},i=function(h){return h!=null&&typeof h=="number"},a=function(h){return h!=null&&typeof h=="string"},o=function(h){return h===void 0},s=function(h,m){return n(h)?function(g,C){return h.apply(m,[g,C])}:h},l=function(h){return h&&h[0]===window?void 0:h},u=function(h,m,g){var C=!0,y=!0;return g===!1?C=!1:t(g)&&(C="leading"in g?g.leading:C,y="trailing"in g?g.trailing:y),g=g||{},g.leading=C,g.maxWait=m,g.trailing=y,c(h,m,g)},c=function(h,m,g){var C,y,w,_,x,k,O,p=0,I=!1,N=!0;if(n(h)){if(m=Math.max(0,m)||0,g===!0){var j=!0;N=!1}else t(g)&&(j=g.leading,I="maxWait"in g&&(Math.max(m,g.maxWait)||0),N="trailing"in g?g.trailing:N);var H=function(){var P=m-(Date.now()-_);if(P<=0){y&&clearTimeout(y);var z=O;y=k=O=void 0,z&&(p=Date.now(),w=h.apply(x,C),!k&&!y&&(C=x=null))}else k=setTimeout(H,P)},G=function(){k&&clearTimeout(k),y=k=O=void 0,(N||I!==m)&&(p=Date.now(),w=h.apply(x,C),!k&&!y&&(C=x=null))};return function(){if(C=arguments,_=Date.now(),x=this,O=N&&(k||!j),I===!1)var P=j&&!k;else{!y&&!j&&(p=_);var z=I-(_-p),A=z<=0;A?(y&&(y=clearTimeout(y)),p=_,w=h.apply(x,C)):y||(y=setTimeout(G,z))}return A&&k?k=clearTimeout(k):!k&&m!==I&&(k=setTimeout(H,m)),P&&(A=!0,w=h.apply(x,C)),A&&!k&&!y&&(C=x=null),w}}};function d(h,m){var g=m("<div></div>"),C=250;g.css({"z-index":-1,position:"absolute"});function y(_,x){var k=_.scratch().qtip,O=m.extend({},x);O.id||(O.id="cy-qtip-target-"+(Date.now()+Math.round(Math.random()*1e4))),k.$domEle||(k.$domEle=g),O.position=O.position||{},O.position.container=l(O.position.container)||m(document.body),O.position.viewport=l(O.position.viewport)||m(document.body),O.position.target=[0,0],O.position.my=O.position.my||"top center",O.position.at=O.position.at||"bottom center";var p=O.position.adjust=O.position.adjust||{};return p.method=p.method||"flip",p.mouse=!1,O.show=O.show||{},o(O.show.event)&&(O.show.event="tap"),O.hide=O.hide||{},O.hide.cyViewport=O.hide.cyViewport===void 0?!0:O.hide.cyViewport,o(O.hide.event)&&(O.hide.event="unfocus"),O.overwrite=!1,O.content&&(n(O.content)||a(O.content)?O.content=s(O.content,_):O.content={text:s(O.content.text,_),title:s(O.content.title,_)}),O}function w(_,x,k){var O=k,p=n(_.pan),I=!p,N=I&&_.isNode(),j=p?_:_.cy(),H=j.container().getBoundingClientRect(),G=N?_.renderedPosition():O?O.renderedPosition||O.cyRenderedPosition:void 0;if(!(!G||G.x==null||isNaN(G.x))){var P=N?_.renderedBoundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1}):{x1:G.x-1,x2:G.x+1,w:3,y1:G.y-1,y2:G.y+1,h:3};x.$domEle.parent().length===0&&x.$domEle.appendTo(document.body),x.$domEle.css({width:P.w,height:P.h,top:P.y1+H.top+window.pageYOffset,left:P.x1+H.left+window.pageXOffset,position:"absolute","pointer-events":"none",background:"red","z-index":99999999,opacity:.5,visibility:"hidden"}),x.api.set("position.target",x.$domEle)}}h("collection","qtip",function(_){var x=this,k=this.cy(),O=k.container();if(_==="api"){var p=this.scratch().qtip;return p?p.api:null}return x.each(function(I,N){i(I)&&(I=N);var j=I.scratch(),H=j.qtip=j.qtip||{},G=y(I,_),P=G.position.adjust;H.$domEle.qtip(G);var z=H.api=H.$domEle.qtip("api");H.$domEle.removeData("qtip"),w(I,H),I.on(G.show.event,function(A){w(I,H,A),z.show()}),I.on(G.hide.event,function(A){z.hide()}),G.hide.cyViewport&&k.on("viewport",c(function(){z.hide()},C,{leading:!0})),G.position.adjust.cyViewport&&k.on("pan zoom",c(function(A){w(I,H,A),z.reposition()},C,{trailing:!0}))}),this}),h("core","qtip",function(_){var x=this,k=x.container();if(_==="api"){var p=this.scratch().qtip;return p?p.api:null}var O=x.scratch(),p=O.qtip=O.qtip||{},I=y(x,_);p.$domEle.qtip(I);var N=p.api=p.$domEle.qtip("api");return p.$domEle.removeData("qtip"),x.on(I.show.event,function(j){(!I.show.cyBgOnly||I.show.cyBgOnly&&(j.target===x||j.cyTarget===x))&&(w(x,p,j),N.show())}),x.on(I.hide.event,function(j){(!I.hide.cyBgOnly||I.hide.cyBgOnly&&(j.target===x||j.cyTarget===x))&&N.hide()}),I.hide.cyViewport&&x.on("viewport",c(function(){N.hide()},C,{leading:!0})),this})}typeof nu<"u"&&nu.exports?nu.exports=function(h){var m=window.jQuery,g=window.$,C=window.jQuery=window.$=yv(),y=bv();d(h,C),window.jQuery=m,window.$=g}:typeof define<"u"&&define.amd&&define("cytoscape-qtip",function(){return d}),r&&e&&d(e,r)})(typeof jQuery<"u"?jQuery:null,typeof cytoscape<"u"?cytoscape:null)});var Bu=(r,e)=>e.id;function dg(r,e){if(r&1){let t=St();ne(0,"mat-chip-row",15),He("removed",function(){let i=Ze(t).$implicit,a=_e();return Je(a.removeTag(i))}),ke(1),ne(2,"button",16)(3,"mat-icon"),ke(4,"cancel"),ue()()()}if(r&2){let t=e.$implicit;Xe("removable",!0),ye(),zt(" ",t.name," "),ye(),gf("aria-label","remove "+t.name)}}function hg(r,e){if(r&1&&(ne(0,"mat-option",13),ke(1),ue()),r&2){let t=e.$implicit;Xe("value",t),ye(),zt(" ",t.name," ")}}function pg(r,e){if(r&1&&(ne(0,"mat-list-option",13),ke(1),ue()),r&2){let t=e.$implicit;Xe("value",t),ye(),zt(" ",t.title," ")}}function vg(r,e){if(r&1){let t=St();ne(0,"mat-selection-list",17),on("ngModelChange",function(i){Ze(t);let a=_e();return an(a.selectedCollate,i)||(a.selectedCollate=i),Je(i)}),He("selectionChange",function(i){Ze(t);let a=_e();return Je(a.onCollateSelect(i))}),Ut(1,pg,2,2,"mat-list-option",13,Bu),ue(),ne(3,"mat-paginator",18),He("page",function(i){Ze(t);let a=_e();return Je(a.handlePageEvent(i))}),ue()}if(r&2){let t=_e();nn("ngModel",t.selectedCollate),Xe("multiple",!1),ye(),Kt(t.collates),ye(2),Xe("length",t.totalCount)("pageSize",t.limit)}}function gg(r,e){r&1&&(ne(0,"p"),ke(1,"No collates could be found."),ue())}var Xf=(()=>{class r{constructor(t,n,i,a,o){this.snackBar=t,this.fb=n,this.router=i,this.collateService=a,this.dialog=o,this.collates=[],this.searchTags=[],this.selectedCollate=null,this.searchTerm="",this.limit=5,this.offset=0,this.totalCount=0,this.separatorKeysCodes=[13,188],this.form=this.fb.group({tag:[""]}),this.loading=!1}ngOnInit(){this.searchCollates(),this.filteredTags=this.form.controls.tag.valueChanges.pipe(ls(""),sf(t=>t?t.length>=2:!1),us(t=>this.collateService.getCollateTags(t).pipe(ss(n=>n.results))))}searchCollates(){this.loading=!0,this.collateService.getCollates(this.limit,this.offset,this.searchTerm,this.searchTags.map(t=>t.id)).subscribe({next:t=>{this.collates=t.results,this.totalCount=t.count,this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Error loading collates","Dismiss")}})}onCollateSelect(t){this.selectedCollate=t.options[0].value,this.router.navigate([`/collate/view/${t.options[0].value.id}`]).then(n=>console.log(n))}openCreateCollateDialog(){this.dialog.open(Gf).afterClosed().subscribe(n=>{n&&this.collateService.createCollate(n.title,n.greeting).subscribe(i=>{this.router.navigate([`/collate/edit/${i.id}`]).then(a=>console.log(a))})})}handlePageEvent(t){this.limit=t.pageSize,this.offset=t.pageIndex*this.limit,this.searchCollates()}addTag(t){let n=t.option.value;n&&!this.searchTags.find(i=>i.id===n.id)&&this.searchTags.push(n),this.form.controls.tag.setValue(""),this.searchCollates()}removeTag(t){let n=this.searchTags.indexOf(t);n>=0&&this.searchTags.splice(n,1),this.searchCollates()}static{this.\u0275fac=function(n){return new(n||r)(st(Ln),st(un),st(Ea),st(ki),st(Pa))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate"]],decls:33,vars:8,consts:[["chipGrid",""],["auto","matAutocomplete"],[1,"collate-container"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[1,"search-box"],["mat-button","",2,"width","100%",3,"click"],["appearance","outlined",2,"width","500px"],[2,"width","100%"],["matInput","","placeholder","Search Collates",3,"ngModelChange","ngModel"],[3,"removable"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],[3,"removed","removable"],["matChipRemove",""],[3,"ngModelChange","selectionChange","ngModel","multiple"],[3,"page","length","pageSize"]],template:function(n,i){if(n&1){let a=St();ne(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),ke(4,"C|nder Collates"),ue(),ht(5,"br"),ue()(),ne(6,"div",5)(7,"div")(8,"button",6),He("click",function(){return Ze(a),Je(i.openCreateCollateDialog())}),ne(9,"h3"),ke(10,"+ Create Collate From Projects"),ue()()(),ht(11,"hr"),ne(12,"mat-card",7)(13,"mat-card-content")(14,"mat-form-field",8)(15,"input",9),on("ngModelChange",function(s){return Ze(a),an(i.searchTerm,s)||(i.searchTerm=s),Je(s)}),He("ngModelChange",function(){return Ze(a),Je(i.searchCollates())}),ue()(),ne(16,"mat-form-field",8)(17,"mat-label"),ke(18,"Search Tags"),ue(),ne(19,"mat-chip-grid",null,0),Ut(21,dg,5,3,"mat-chip-row",10,Bu),ht(23,"input",11),ue(),ne(24,"mat-autocomplete",12,1),He("optionSelected",function(s){return Ze(a),Je(i.addTag(s))}),Ut(26,hg,2,2,"mat-option",13,Bu),gs(28,"async"),ue()(),ne(29,"button",14),He("click",function(){return Ze(a),Je(i.searchCollates())}),ke(30,"Search"),ue(),ct(31,vg,4,4)(32,gg,2,0,"p"),ue()()()()}if(n&2){let a=Bn(20),o=Bn(25);ye(15),nn("ngModel",i.searchTerm),ye(6),Kt(i.searchTags),ye(2),Xe("matChipInputFor",a)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("formControl",i.form.controls.tag)("matAutocomplete",o),ye(3),Kt(ms(28,6,i.filteredTags)),ye(5),Ct(i.collates.length>0?31:32)}},dependencies:[cn,Ei,ln,Pr,Ti,fn,Ss,_s,Kn,Ma,Da,yr,Es,sn,ks,qf,zf,Vf,ka,Ps,Cs,Tn,Rf,As],styles:[".collate-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:80vh}.search-box[_ngcontent-%COMP%]{width:500px}"]})}}return r})();var Yf=(()=>{class r{constructor(){this.collate=null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-header"]],inputs:{collate:"collate"},decls:7,vars:2,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"]],template:function(n,i){n&1&&(ne(0,"div",0)(1,"div",1)(2,"h1"),ke(3),ue(),ht(4,"br"),ne(5,"div",2),ke(6),ue()()()),n&2&&(ye(3),or(i.collate==null?null:i.collate.title),ye(3),or(i.collate==null?null:i.collate.greeting))},styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return r})();function yg(r,e){if(r&1&&(ne(0,"p"),ke(1),ht(2,"br"),ke(3),ue(),ht(4,"mat-progress-bar",8)),r&2){let t=_e();ye(),zt("Elapsed Time: ",t.elapsedTime," seconds"),ye(2),zt(" ",t.progress," ")}}var Js=(()=>{class r{constructor(t,n,i,a,o){this.snackBar=t,this.ws=n,this.fb=i,this.web=a,this.sb=o,this.projects=[],this.loading=!1,this.searchStartTime=null,this.elapsedTime="0.00",this.progress="",this.form=this.fb.group({searchQuery:new On("",Rn.required),searchMode:new On("gene",Rn.required)}),this.searchResultID=new lr,this.ws.searchWSConnection?.subscribe(s=>{if(s&&s.type==="search_status")switch(s.status){case"complete":this.loading=!1,clearInterval(this.timerInterval);let l=this.calculateElapsedTime();this.progress="",this.showSnackBar(`Search complete in ${l} seconds`),this.searchResultID.emit(parseInt(s.id));break;case"in_progress":this.progress=`Current progress: ${s.current_progress}/${s.found_files}`;break;case"error":this.loading=!1,this.progress="Search error",this.showSnackBar("Search error");break}})}runSearch(){return zr(this,null,function*(){if(this.form.invalid)return;this.loading=!0,this.progress="Current progress: search initiated",this.searchStartTime=new Date,this.elapsedTime="0.00",this.timerInterval=setInterval(()=>{this.elapsedTime=this.calculateElapsedTime().toFixed(2)},200);let t=[];if(this.projects.length>0){let n=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();if(n)for(let i of n)t.push(i.id)}if(this.form.value.searchQuery&&this.form.value.searchMode){let i=this.form.value.searchQuery.toUpperCase().split("OR").map(a=>`"${a.trim().replace(/'/g,"").replace(/"/g,"")}"`);this.web.createSearch(t,i.join(" OR "),this.web.searchSessionID,1e-9,1e-9,this.form.value.searchMode).subscribe({next:()=>{this.sb.open("Search queued","Dismiss",{duration:2e3})},error:()=>{this.loading=!1,clearInterval(this.timerInterval),this.showSnackBar("Search error")}})}})}showSnackBar(t){this.snackBar.open(t,"Close",{duration:3e3})}calculateElapsedTime(){return this.searchStartTime?(new Date().getTime()-this.searchStartTime.getTime())/1e3:0}static{this.\u0275fac=function(n){return new(n||r)(st(Ln),st(Is),st(un),st(dn),st(Ln))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-search"]],inputs:{projects:"projects"},outputs:{searchResultID:"searchResultID"},decls:22,vars:2,consts:[["appearance","outlined"],[2,"display","flex","gap","20px","align-items","center",3,"ngSubmit","formGroup"],[2,"width","500px"],["matInput","","placeholder","Search Query","formControlName","searchQuery"],["formControlName","searchMode"],["value","pi"],["value","gene"],["mat-icon-button","","color","primary","type","submit"],["mode","indeterminate"]],template:function(n,i){n&1&&(ne(0,"mat-card",0)(1,"mat-card-content")(2,"form",1),He("ngSubmit",function(){return i.runSearch()}),ne(3,"mat-form-field",2),ht(4,"input",3),ue(),ne(5,"mat-form-field")(6,"mat-label"),ke(7,"Search Mode"),ue(),ne(8,"mat-select",4)(9,"mat-option",5),ke(10,"Primary Ids"),ue(),ne(11,"mat-option",6),ke(12,"Gene Names"),ue()()(),ne(13,"button",7)(14,"mat-icon"),ke(15,"search"),ue()()(),ne(16,"p"),ke(17," For multiple search terms separate them with "),ne(18,"b"),ke(19,"OR"),ue(),ke(20,". "),ue(),ct(21,yg,5,2),ue()()),n&2&&(ye(2),Xe("formGroup",i.form),ye(19),Ct(i.loading?21:-1))},dependencies:[fn,Tn,Sn,ln,Pr,_n,$n,Un,cn,Si,sn,Ma,Da,ka,jf,Kn,Hf],encapsulation:2})}}return r})();var Cg=os(fg());Iu.plotlyjs=Cg;var Qf=(()=>{class r{set searchTerm(t){t?this._searchTerm=t:this._searchTerm=""}get searchTerm(){return this._searchTerm}set renameCondition(t){t?this._renameCondition=t:this._renameCondition={}}get renameCondition(){return this._renameCondition}set data(t){this._data=t,this.graphLayout.title.text=t?.analysis_group?.name||"",this.graphLayout.yaxis.title=this.searchTerm||"",this.conditionA=t?.condition_A||"",this.conditionB=t?.condition_B||"",this.drawGraph()}get data(){return this._data}set expanded(t){this._expanded=t,this.data&&this.drawGraph()}get expanded(){return this._expanded}set colorMap(t){t&&(this._colorMap=t,this.data&&t&&this.drawGraph())}get colorMap(){return this._colorMap}constructor(t,n){this.graph=t,this.accounts=n,this._data=null,this._renameCondition={},this._searchTerm="",this._expanded=!1,this.graphData=[],this.graphLayout={title:{text:"",font:{size:16}},height:400,margin:{l:150,r:100,b:100,t:100},yaxis:{title:this.searchTerm,tickfont:{size:14}}},this.conditionA="",this.conditionB="",this.valueA=[],this.valueB=[],this.barSize=50,this.revision=0,this._colorMap={},this.currentColor=0,this.graph.redrawTrigger.subscribe(()=>{this.drawGraph()})}drawGraph(){this.loadPlotSettings(),this.graph.plotSettings.showTitle||(this.graphLayout.title.text="");let t=this.renameCondition[this.conditionA];t||(t=this.conditionA);let n=this.renameCondition[this.conditionB];n||(n=this.conditionB);let i=document.getElementsByTagName("body")[0],o=window.getComputedStyle(i).backgroundColor;this.accounts.userAccount.darkMode?(this.graphLayout.plot_bgcolor=o,this.graphLayout.paper_bgcolor=o,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white"):(this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14});let s=0;if(this.data&&this.data.condition_A&&this.data.condition_B&&this.data.searched_data&&!this.expanded){this.conditionA=this.data.condition_A||"",this.conditionB=this.data.condition_B||"",this.valueA=this.data.searched_data.filter(g=>g.Condition===this.conditionA).map(g=>g.Value),this.valueB=this.data.searched_data.filter(g=>g.Condition===this.conditionB).map(g=>g.Value);let l=this.calculateMean(this.valueA),u=this.calculateMean(this.valueB);this.colorMap[this.conditionA]||(this.colorMap[this.conditionA]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let c={x:[t],y:[l],type:"bar",mode:"markers",name:t,error_y:{type:"data",array:[this.calculateWhisker(this.valueA)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionA]},showlegend:!1},d=this.drawTransparentBoxPlot(this.valueA,t);this.colorMap[this.conditionB]||(this.colorMap[this.conditionB]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let h={x:[n],y:[u],type:"bar",mode:"markers",name:n,error_y:{type:"data",array:[this.calculateWhisker(this.valueB)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionB]},showlegend:!1},m=this.drawTransparentBoxPlot(this.valueB,n);s=2,this.graphData=[c,d,h,m]}else if(this.data&&(this.expanded||this.data.condition_A==""||this.data.condition_B=="")){let l=Array.from(new Set(this.data.searched_data.map(m=>m.Condition))),u=l.map(m=>{let g=this.data.searched_data.filter(C=>C.Condition===m).map(C=>C.Value);return this.calculateMean(g)}),c=l.map(m=>{let g=this.data.searched_data.filter(C=>C.Condition===m).map(C=>C.Value);return this.calculateWhisker(g)}),d=l.map((m,g)=>{this.colorMap[m]||(this.colorMap[m]=this.graph.defaultColorList[this.currentColor],this.currentColor++,this.currentColor>=this.graph.defaultColorList.length&&(this.currentColor=0));let C=this.renameCondition[m];return C||(C=m),{x:[C],y:[u[g]],type:"bar",mode:"markers",name:C,error_y:{type:"data",array:[c[g]],visible:!0},line:{color:"black"},marker:{color:this.colorMap[m]},showlegend:!1}}),h=l.map((m,g)=>{let C=this.renameCondition[m];C||(C=m);let y=this.data.searched_data.filter(w=>w.Condition===m).map(w=>w.Value);return this.drawTransparentBoxPlot(y,C)});s=l.length,this.graphData=[...d,...h]}console.log(this.colorMap),this.graphLayout.width=this.graphLayout.margin.l+this.graphLayout.margin.r+this.barSize*s,this.revision++,console.log(this.graphData)}calculateMean(t){return t.reduce((i,a)=>i+a,0)/t.length}calculateWhisker(t){let n=this.calculateMean(t),i=t.reduce((a,o)=>a+Math.pow(o-n,2),0)/t.length;return Math.sqrt(i)}drawTransparentBoxPlot(t,n){return{x:n,y:t.filter(i=>!isNaN(i)),type:"box",boxpoints:"all",pointpos:0,jitter:.3,fillcolor:"rgba(255,255,255,0)",line:{color:"rgba(255,255,255,0)"},hoveron:"points",marker:{color:"#654949",opacity:.8},name:n,showlegend:!1}}loadPlotSettings(){this.graphLayout.height=this.graph.plotSettings.height,this.graphLayout.margin.l=this.graph.plotSettings.marginLeft,this.graphLayout.margin.r=this.graph.plotSettings.marginRight,this.graphLayout.margin.b=this.graph.plotSettings.marginBottom,this.graphLayout.margin.t=this.graph.plotSettings.marginTop,this.graphLayout.title.font.size=this.graph.plotSettings.titleTextSize,this.barSize=this.graph.plotSettings.barSize}static{this.\u0275fac=function(n){return new(n||r)(st(Us),st(Xn))}}static{this.\u0275cmp=It({type:r,selectors:[["app-bar-chart"]],inputs:{searchTerm:"searchTerm",renameCondition:"renameCondition",data:"data",expanded:"expanded",colorMap:"colorMap"},decls:1,vars:4,consts:[[3,"data","layout","revision","updateOnLayoutChange"]],template:function(n,i){n&1&&ht(0,"plotly-plot",0),n&2&&Xe("data",i.graphData)("layout",i.graphLayout)("revision",i.revision)("updateOnLayoutChange",!0)},dependencies:[Iu,$f],encapsulation:2})}}return r})();var wg=(r,e)=>e.id;function xg(r,e){if(r&1){let t=St();ne(0,"div",3)(1,"mat-slide-toggle",8),He("change",function(){Ze(t);let i=_e(2);return Je(i.expanded=!i.expanded)}),ke(2," Expand Bar Chart "),ue(),ne(3,"mat-slide-toggle",8),He("change",function(){Ze(t);let i=_e(2);return Je(i.viewDifferentialAnalysis=!i.viewDifferentialAnalysis)}),ke(4," View Differential Analysis Stats "),ue()()}r&2&&(ye(),Xe("color","primary"),ye(2),Xe("color","primary"))}function _g(r,e){if(r&1&&(ne(0,"div"),ht(1,"app-bar-chart",11),ue()),r&2){let t=_e().$implicit,n=_e(3);ye(),Xe("searchTerm",t.gene_name)("expanded",n.expanded)("renameCondition",n.renameCondition)("colorMap",n.colorMap)("data",t)}}function Sg(r,e){r&1&&(ne(0,"div")(1,"p"),ke(2,"No data found for this search"),ue()())}function Tg(r,e){if(r&1&&(ne(0,"div",9),ct(1,_g,2,5,"div")(2,Sg,3,0,"div"),ne(3,"div")(4,"button",10)(5,"mat-icon"),ke(6,"drag_handle"),ue()(),ne(7,"p"),ke(8),ue()()()),r&2){let t=e.$implicit;ye(),Ct(t.searched_data.length>0?1:2),ye(3),Xe("matTooltip",t.analysis_group.name),ye(4),zt(" ",t.analysis_group.name," ")}}function Eg(r,e){if(r&1&&Ut(0,Tg,9,3,"div",9,wg),r&2){let t=_e(2);Kt(t.searchResults)}}function kg(r,e){r&1&&(ne(0,"p"),ke(1,"No search results found in this project"),ue())}function Dg(r,e){r&1&&(ne(0,"th",24),ke(1," Primary ID "),ue())}function Mg(r,e){if(r&1&&(ne(0,"td",25),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t.primary_id," ")}}function Pg(r,e){r&1&&(ne(0,"th",24),ke(1," UniProt ID "),ue())}function Ag(r,e){if(r&1&&(ne(0,"td",25),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t.uniprot_id," ")}}function Ig(r,e){r&1&&(ne(0,"th",24),ke(1," Gene Names "),ue())}function Bg(r,e){if(r&1&&(ne(0,"td",25),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t.gene_name," ")}}function Rg(r,e){r&1&&(ne(0,"th",24),ke(1," log2FC "),ue())}function Og(r,e){if(r&1&&(ne(0,"td",25),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t.log2_fc," ")}}function Lg(r,e){r&1&&(ne(0,"th",24),ke(1," -log10(p) "),ue())}function Fg(r,e){if(r&1&&(ne(0,"td",25),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t.log10_p," ")}}function Ng(r,e){r&1&&(ne(0,"th",24),ke(1," Condition A "),ue())}function jg(r,e){if(r&1&&ke(0),r&2){let t=_e().$implicit,n=_e(3);zt(" ",n.renameCondition[t.condition_A]," ")}}function Vg(r,e){if(r&1&&ke(0),r&2){let t=_e().$implicit;zt(" ",t.condition_A," ")}}function zg(r,e){if(r&1&&(ne(0,"td",25),ct(1,jg,1,1)(2,Vg,1,1),ue()),r&2){let t=_e(3);ye(),Ct(t.renameCondition?1:2)}}function qg(r,e){r&1&&(ne(0,"th",24),ke(1," Condition B "),ue())}function Gg(r,e){if(r&1&&ke(0),r&2){let t=_e().$implicit,n=_e(3);zt(" ",n.renameCondition[t.condition_B]," ")}}function Hg(r,e){if(r&1&&ke(0),r&2){let t=_e().$implicit;zt(" ",t.condition_B," ")}}function Wg(r,e){if(r&1&&(ne(0,"td",25),ct(1,Gg,1,1)(2,Hg,1,1),ue()),r&2){let t=_e(3);ye(),Ct(t.renameCondition?1:2)}}function $g(r,e){r&1&&(ne(0,"th",24),ke(1," Comparison "),ue())}function Ug(r,e){if(r&1&&(ne(0,"td",25),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t.comparison_label," ")}}function Kg(r,e){r&1&&ht(0,"tr",26)}function Xg(r,e){r&1&&ht(0,"tr",27)}function Yg(r,e){if(r&1&&(ne(0,"table",5),Dr(1,12),ct(2,Dg,2,0,"th",13)(3,Mg,2,1,"td",14),Mr(),Dr(4,15),ct(5,Pg,2,0,"th",13)(6,Ag,2,1,"td",14),Mr(),Dr(7,16),ct(8,Ig,2,0,"th",13)(9,Bg,2,1,"td",14),Mr(),Dr(10,17),ct(11,Rg,2,0,"th",13)(12,Og,2,1,"td",14),Mr(),Dr(13,18),ct(14,Lg,2,0,"th",13)(15,Fg,2,1,"td",14),Mr(),Dr(16,19),ct(17,Ng,2,0,"th",13)(18,zg,3,1,"td",14),Mr(),Dr(19,20),ct(20,qg,2,0,"th",13)(21,Wg,3,1,"td",14),Mr(),Dr(22,21),ct(23,$g,2,0,"th",13)(24,Ug,2,1,"td",14),Mr(),ct(25,Kg,1,0,"tr",22)(26,Xg,1,0,"tr",23),ue()),r&2){let t=_e(2);Xe("dataSource",t.searchResults),ye(25),Xe("matHeaderRowDef",t.searchResultDisplayColumns),ye(),Xe("matRowDefColumns",t.searchResultDisplayColumns)}}function Qg(r,e){if(r&1){let t=St();ne(0,"button",28),He("click",function(){Ze(t);let i=_e(2);return Je(i.deleteProject.emit(i.project))}),ne(1,"mat-icon"),ke(2,"delete"),ue()()}if(r&2){let t=_e(2);Eu("matTooltip","Delete Project ",t.project.name," from collate")}}function Zg(r,e){if(r&1&&(ne(0,"a",7)(1,"mat-icon"),ke(2,"link"),ue()()),r&2){let t=_e(2);Eu("href","/#/project/",t.project.id,"",df)}}function Jg(r,e){if(r&1){let t=St();ne(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"span",2),ke(4),ue()(),ne(5,"mat-card-subtitle"),ke(6),ue()(),ne(7,"mat-card-content"),ct(8,xg,5,2,"div",3),ne(9,"div",4),He("cdkDropListDropped",function(i){Ze(t);let a=_e();return Je(a.drop(i))}),ct(10,Eg,2,0)(11,kg,2,0,"p"),ue(),ct(12,Yg,27,3,"table",5),ue(),ne(13,"mat-card-actions"),ct(14,Qg,3,2,"button",6)(15,Zg,3,2,"a",7),ue()()}if(r&2){let t=_e();ye(4),or(t.project.name),ye(2),or(t.project.description),ye(2),Ct(t.searchResults.length>0?8:-1),ye(2),Ct(t.searchResults.length>0?10:11),ye(2),Ct(t.searchResults.length>0&&t.viewDifferentialAnalysis?12:-1),ye(2),Ct(t.accounts.loggedIn?14:-1),ye(),Ct(t.project?15:-1)}}var Zf=(()=>{class r{set project(t){this._project=t}get project(){return this._project}set searchResults(t){this._searchResults=t,console.log(t)}get searchResults(){return this._searchResults}constructor(t){this.accounts=t,this._project=null,this.searchTerm="",this._searchResults=[],this.colorMap={},this.renameCondition={},this.deleteProject=new lr,this.searchResultsChange=new lr,this.searchResultDisplayColumns=["primary_id","uniprot_id","gene_name","condition_A","condition_B","log2_fc","log10_p","comparison_label"],this.expanded=!1,this.viewDifferentialAnalysis=!1}drop(t){let i=this._searchResults[t.previousIndex].analysis_group.id,a=this._searchResults.filter(o=>o.analysis_group.id===i);this._searchResults=this._searchResults.filter(o=>o.analysis_group.id!==i),this._searchResults.splice(t.currentIndex,0,...a),this.searchResultsChange.emit(this._searchResults)}static{this.\u0275fac=function(n){return new(n||r)(st(Xn))}}static{this.\u0275cmp=It({type:r,selectors:[["app-project-card-viewer"]],inputs:{searchTerm:"searchTerm",project:"project",searchResults:"searchResults",colorMap:"colorMap",renameCondition:"renameCondition"},outputs:{deleteProject:"deleteProject",searchResultsChange:"searchResultsChange"},decls:1,vars:1,consts:[["appearance","outlined"],["cdkDragHandle",""],[2,"color","#ba0000"],[2,"display","flex","flex-direction","column","gap","20px"],["cdkDropList","",2,"display","flex","gap","20px","flex-wrap","wrap","justify-content","center",3,"cdkDropListDropped"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["mat-icon-button","","color","primary",3,"matTooltip"],["target","_blank",3,"href"],[3,"change","color"],["cdkDrag",""],["mat-icon-button","","cdkDragHandle","",3,"matTooltip"],[3,"searchTerm","expanded","renameCondition","colorMap","data"],["matColumnDef","primary_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uniprot_id"],["matColumnDef","gene_name"],["matColumnDef","log2_fc"],["matColumnDef","log10_p"],["matColumnDef","condition_A"],["matColumnDef","condition_B"],["matColumnDef","comparison_label"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-icon-button","","color","primary",3,"click","matTooltip"]],template:function(n,i){n&1&&ct(0,Jg,16,7,"mat-card",0),n&2&&Ct(i.project?0:-1)},dependencies:[kf,Ef,Mf,Da,Ma,Qs,Qf,Df,sn,Si,Di,Mi,Vs,Ls,Ns,js,Gs,zs,Hs,qs,Os,Fs,Uf,Ts],encapsulation:2})}}return r})();var em=(r,e)=>e.id,tm=()=>[];function rm(r,e){if(r&1){let t=St();ne(0,"app-project-card-viewer",3),He("deleteProject",function(i){Ze(t);let a=_e(2);return Je(a.deleteProject.emit(i))}),ue()}if(r&2){let t=_e().$implicit,n=_e();Xe("searchTerm",n.searchTerm)("colorMap",n.projectConditionColorMap==null?null:n.projectConditionColorMap[t.id])("project",t)("searchResults",n.filteredResults[t.id]||vs(5,tm))("renameCondition",n.renameCondition==null?null:n.renameCondition[t.id])}}function nm(r,e){if(r&1&&(ne(0,"div",1),ct(1,rm,1,6,"app-project-card-viewer",2),ue()),r&2){let t=e.$implicit;ye(),Ct(t&&t.id?1:-1)}}var tl=(()=>{class r{constructor(){this._searchTerm="",this.projects=[],this._filteredResults={},this.projectConditionColorMap={},this.renameCondition={},this.projectOrderChanged=new lr,this.deleteProject=new lr}set searchTerm(t){t?this._searchTerm=t:this._searchTerm=""}get searchTerm(){return this._searchTerm}set filteredResults(t){console.log(t),t?this._filteredResults=t:this._filteredResults={}}get filteredResults(){return this._filteredResults}drop(t){na(this.projects,t.previousIndex,t.currentIndex),this.projectOrderChanged.emit(this.projects)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-project-list"]],inputs:{searchTerm:"searchTerm",projects:"projects",filteredResults:"filteredResults",projectConditionColorMap:"projectConditionColorMap",renameCondition:"renameCondition"},outputs:{projectOrderChanged:"projectOrderChanged",deleteProject:"deleteProject"},decls:3,vars:0,consts:[["cdkDropList","",1,"project-list",3,"cdkDropListDropped"],[2,"margin","20px"],["cdkDrag","",3,"searchTerm","colorMap","project","searchResults","renameCondition"],["cdkDrag","",3,"deleteProject","searchTerm","colorMap","project","searchResults","renameCondition"]],template:function(n,i){n&1&&(ne(0,"div",0),He("cdkDropListDropped",function(o){return i.drop(o)}),Ut(1,nm,2,1,"div",1,em),ue()),n&2&&(ye(),Kt(i.projects))},dependencies:[Mi,Zf,Di],encapsulation:2})}}return r})();var Jf=(r,e)=>e.id;function im(r,e){if(r&1){let t=St();ne(0,"mat-chip",4),He("removed",function(){let i=Ze(t).$implicit,a=_e(2);return Je(a.removeTag(i))}),ke(1),ne(2,"mat-icon",5),ke(3,"cancel"),ue()()}if(r&2){let t=e.$implicit;ye(),zt(" ",t.name," ")}}function am(r,e){if(r&1){let t=St();ne(0,"mat-chip-set",2),He("cdkDropListDropped",function(i){Ze(t);let a=_e();return Je(a.drop(i))}),Ut(1,im,4,1,"mat-chip",3,Jf),ue()}if(r&2){let t=_e();ye(),Kt(t.collageTags)}}function om(r,e){if(r&1&&(ne(0,"mat-chip"),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t.name," ")}}function sm(r,e){if(r&1&&(ne(0,"mat-chip-set"),Ut(1,om,2,1,"mat-chip",null,Jf),ue()),r&2){let t=_e();ye(),Kt(t.collageTags)}}var rl=(()=>{class r{constructor(t){this.accounts=t,this.collageTags=[],this.collageTagsChange=new lr}removeTag(t){this.collageTags=this.collageTags.filter(n=>n!==t),this.collageTagsChange.emit(this.collageTags)}drop(t){na(this.collageTags,t.previousIndex,t.currentIndex),this.collageTagsChange.emit(this.collageTags)}static{this.\u0275fac=function(n){return new(n||r)(st(Xn))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-tags"]],inputs:{collageTags:"collageTags"},outputs:{collageTagsChange:"collageTagsChange"},decls:4,vars:1,consts:[[2,"display","flex","justify-content","center"],["cdkDropList",""],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["cdkDrag","",3,"removed"],["matChipRemove",""]],template:function(n,i){n&1&&(ne(0,"div",0),ct(1,am,3,0,"mat-chip-set",1)(2,sm,3,0,"mat-chip-set"),ue(),ht(3,"div",0)),n&2&&(ye(),Ct(i.accounts.loggedIn?1:2))},dependencies:[Mi,Ms,ks,sn,Ds,Di],encapsulation:2})}}return r})();var td=os(ed());function lm(r,e){r&1&&(ne(0,"div",2),ht(1,"div",5),ue())}var rd=(()=>{class r{set url(t){this.config.data=t,this._url=t}constructor(t){this.dialogRef=t,this._url="",this.config={width:250,height:250,data:this.url,margin:5,dotsOptions:{color:"#780101",type:"dots"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:0}}}ngAfterViewInit(){let t=new td.default(this.config),n=document.getElementById("canvas");n&&t.append(n),this.qrCode=t}close(){this.dialogRef.close()}download(){this.qrCode&&this.qrCode.download({name:"qrcode",extension:"svg"}).then(()=>{})}static{this.\u0275fac=function(n){return new(n||r)(st(qr))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-qr-code-dialog"]],inputs:{url:"url"},decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","justify-content","center","align-items","center"],["mat-dialog-actions",""],["mat-button","",3,"click"],["id","canvas"]],template:function(n,i){n&1&&(ne(0,"h1",0),ke(1,"Collate QR Code"),ue(),ne(2,"div",1),ct(3,lm,2,0,"div",2),ue(),ne(4,"div",3)(5,"button",4),He("click",function(){return i.close()}),ke(6,"Close"),ue(),ne(7,"button",4),He("click",function(){return i.download()}),ke(8,"Download"),ue()()),n&2&&(ye(3),Ct(i.config.data&&i.config.data!==""?3:-1))},dependencies:[Gr,Hr,Wr,yr],encapsulation:2})}}return r})();var nd=(r,e)=>e.id,um=()=>({standalone:!0});function cm(r,e){if(r&1){let t=St();ne(0,"mat-checkbox",6),on("ngModelChange",function(i){let a=Ze(t).$implicit,o=_e(2).$implicit,s=_e();return an(s.projectAnalysisGroupVisibilityMap[o.id][a.id],i)||(s.projectAnalysisGroupVisibilityMap[o.id][a.id]=i),Je(i)}),ke(1),ue()}if(r&2){let t=e.$implicit,n=_e(2).$implicit,i=_e();nn("ngModel",i.projectAnalysisGroupVisibilityMap[n.id][t.id]),Xe("ngModelOptions",vs(3,um)),ye(),zt(" ",t.name," ")}}function fm(r,e){if(r&1&&Ut(0,cm,2,4,"mat-checkbox",5,nd),r&2){let t=_e().$implicit,n=_e();Kt(n.projectAnalysisGroupMap[t.id])}}function dm(r,e){if(r&1&&(ne(0,"h2"),ke(1),ue(),ct(2,fm,2,0)),r&2){let t=e.$implicit,n=_e();ye(),or(t.name),ye(),Ct(n.projectAnalysisGroupMap[t.id]?2:-1)}}var nl=(()=>{class r{set projects(t){this._projects=t}get projects(){return this._projects}set projectAnalysisGroupMap(t){this._projectAnalysisGroupMap=t}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}set projectAnalysisGroupVisibilityMap(t){this._projectAnalysisGroupVisibilityMap={};for(let n in t){this._projectAnalysisGroupVisibilityMap[n]={};for(let i in t[n])this._projectAnalysisGroupVisibilityMap[n][i]=t[n][i]}}get projectAnalysisGroupVisibilityMap(){return this._projectAnalysisGroupVisibilityMap}constructor(t){this.dialog=t,this._projects=[],this._projectAnalysisGroupMap={},this._projectAnalysisGroupVisibilityMap={}}close(){this.dialog.close()}save(){this.dialog.close(this.projectAnalysisGroupVisibilityMap)}static{this.\u0275fac=function(n){return new(n||r)(st(qr))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-project-analysis-group-visibility-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap",projectAnalysisGroupVisibilityMap:"projectAnalysisGroupVisibilityMap"},decls:11,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","20px"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"]],template:function(n,i){n&1&&(ne(0,"h1",0),ke(1,"Analysis Group Visibility"),ue(),ne(2,"div",1)(3,"form",2),Ut(4,dm,3,2,null,null,nd),ue()(),ne(6,"div",3)(7,"button",4),He("click",function(){return i.close()}),ke(8,"Cancel"),ue(),ne(9,"button",4),He("click",function(){return i.save()}),ke(10,"Submit"),ue()()),n&2&&(ye(4),Kt(i.projects))},dependencies:[Gr,Hr,Ei,Sn,Pr,_n,Ti,If,Aa,Wr,yr],encapsulation:2})}}return r})();function Er(r){"@babel/helpers - typeof";return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(r)}function qi(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function id(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Gi(r,e,t){return e&&id(r.prototype,e),t&&id(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function _h(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Cr(r,e){return pm(r)||gm(r,e)||vc(r,e)||ym()}function Sh(r){return hm(r)||vm(r)||vc(r)||mm()}function hm(r){if(Array.isArray(r))return Zu(r)}function pm(r){if(Array.isArray(r))return r}function vm(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function gm(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,a=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){a=!0,s=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(a)throw s}}return n}}function vc(r,e){if(r){if(typeof r=="string")return Zu(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zu(r,e)}}function Zu(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function mm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ym(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bn(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=vc(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}var Sr=typeof window>"u"?null:window,ad=Sr?Sr.navigator:null;Sr&&Sr.document;var bm=Er(""),Th=Er({}),Cm=Er(function(){}),wm=typeof HTMLElement>"u"?"undefined":Er(HTMLElement),Ho=function(e){return e&&e.instanceString&&cr(e.instanceString)?e.instanceString():null},yt=function(e){return e!=null&&Er(e)==bm},cr=function(e){return e!=null&&Er(e)===Cm},tr=function(e){return!Cn(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},$t=function(e){return e!=null&&Er(e)===Th&&!tr(e)&&e.constructor===Object},xm=function(e){return e!=null&&Er(e)===Th},at=function(e){return e!=null&&Er(e)===Er(1)&&!isNaN(e)},_m=function(e){return at(e)&&Math.floor(e)===e},kl=function(e){if(wm!=="undefined")return e!=null&&e instanceof HTMLElement},Cn=function(e){return Wo(e)||Eh(e)},Wo=function(e){return Ho(e)==="collection"&&e._private.single},Eh=function(e){return Ho(e)==="collection"&&!e._private.single},gc=function(e){return Ho(e)==="core"},kh=function(e){return Ho(e)==="stylesheet"},Sm=function(e){return Ho(e)==="event"},Li=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Tm=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Em=function(e){return $t(e)&&at(e.x1)&&at(e.x2)&&at(e.y1)&&at(e.y2)},km=function(e){return xm(e)&&cr(e.then)},Dm=function(){return ad&&ad.userAgent.match(/msie|trident|edge/i)},Bo=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);return a.join("$")});var n=function i(){var a=this,o=arguments,s,l=t.apply(a,o),u=i.cache;return(s=u[l])||(s=u[l]=e.apply(a,o)),s};return n.cache={},n},mc=Bo(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),jl=Bo(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Dh=Bo(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),od=function(e){return Li(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Tr="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Mm="rgb[a]?\\(("+Tr+"[%]?)\\s*,\\s*("+Tr+"[%]?)\\s*,\\s*("+Tr+"[%]?)(?:\\s*,\\s*("+Tr+"))?\\)",Pm="rgb[a]?\\((?:"+Tr+"[%]?)\\s*,\\s*(?:"+Tr+"[%]?)\\s*,\\s*(?:"+Tr+"[%]?)(?:\\s*,\\s*(?:"+Tr+"))?\\)",Am="hsl[a]?\\(("+Tr+")\\s*,\\s*("+Tr+"[%])\\s*,\\s*("+Tr+"[%])(?:\\s*,\\s*("+Tr+"))?\\)",Im="hsl[a]?\\((?:"+Tr+")\\s*,\\s*(?:"+Tr+"[%])\\s*,\\s*(?:"+Tr+"[%])(?:\\s*,\\s*(?:"+Tr+"))?\\)",Bm="\\#[0-9a-fA-F]{3}",Rm="\\#[0-9a-fA-F]{6}",Mh=function(e,t){return e<t?-1:e>t?1:0},Om=function(e,t){return-1*Mh(e,t)},Tt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];r[o]=n[o]}}return r},Lm=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,a,o=16;return t?(n=parseInt(e[1]+e[1],o),i=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),i=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[n,i,a]}},Fm=function(e){var t,n,i,a,o,s,l,u;function c(g,C,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?g+(C-g)*6*y:y<1/2?C:y<2/3?g+(C-g)*(2/3-y)*6:g}var d=new RegExp("^"+Am+"$").exec(e);if(d){if(n=parseInt(d[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(d[2]),i<0||i>100||(i=i/100,a=parseFloat(d[3]),a<0||a>100)||(a=a/100,o=d[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(i===0)s=l=u=Math.round(a*255);else{var h=a<.5?a*(1+i):a+i-a*i,m=2*a-h;s=Math.round(255*c(m,h,n+1/3)),l=Math.round(255*c(m,h,n)),u=Math.round(255*c(m,h,n-1/3))}t=[s,l,u,o]}return t},Nm=function(e){var t,n=new RegExp("^"+Mm+"$").exec(e);if(n){t=[];for(var i=[],a=1;a<=3;a++){var o=n[a];if(o[o.length-1]==="%"&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;t.push(u)}}return t},jm=function(e){return Vm[e.toLowerCase()]},Ph=function(e){return(tr(e)?e:null)||jm(e)||Lm(e)||Nm(e)||Fm(e)},Vm={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ah=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if($t(o))throw Error("Tried to set map with object key");a<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},Ih=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if($t(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t};function zm(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var fa=zm,So=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qm(r,e){return e={exports:{}},r(e,e.exports),e.exports}var Gm=typeof So=="object"&&So&&So.Object===Object&&So,Hm=Gm,Wm=typeof self=="object"&&self&&self.Object===Object&&self,$m=Hm||Wm||Function("return this")(),Vl=$m,Um=function(){return Vl.Date.now()},Lu=Um,Km=/\s/;function Xm(r){for(var e=r.length;e--&&Km.test(r.charAt(e)););return e}var Ym=Xm,Qm=/^\s+/;function Zm(r){return r&&r.slice(0,Ym(r)+1).replace(Qm,"")}var Jm=Zm,e0=Vl.Symbol,Wa=e0,Bh=Object.prototype,t0=Bh.hasOwnProperty,r0=Bh.toString,mo=Wa?Wa.toStringTag:void 0;function n0(r){var e=t0.call(r,mo),t=r[mo];try{r[mo]=void 0;var n=!0}catch{}var i=r0.call(r);return n&&(e?r[mo]=t:delete r[mo]),i}var i0=n0,a0=Object.prototype,o0=a0.toString;function s0(r){return o0.call(r)}var l0=s0,u0="[object Null]",c0="[object Undefined]",sd=Wa?Wa.toStringTag:void 0;function f0(r){return r==null?r===void 0?c0:u0:sd&&sd in Object(r)?i0(r):l0(r)}var Rh=f0;function d0(r){return r!=null&&typeof r=="object"}var h0=d0,p0="[object Symbol]";function v0(r){return typeof r=="symbol"||h0(r)&&Rh(r)==p0}var $o=v0,ld=NaN,g0=/^[-+]0x[0-9a-f]+$/i,m0=/^0b[01]+$/i,y0=/^0o[0-7]+$/i,b0=parseInt;function C0(r){if(typeof r=="number")return r;if($o(r))return ld;if(fa(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=fa(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=Jm(r);var t=m0.test(r);return t||y0.test(r)?b0(r.slice(2),t?2:8):g0.test(r)?ld:+r}var ud=C0,w0="Expected a function",x0=Math.max,_0=Math.min;function S0(r,e,t){var n,i,a,o,s,l,u=0,c=!1,d=!1,h=!0;if(typeof r!="function")throw new TypeError(w0);e=ud(e)||0,fa(t)&&(c=!!t.leading,d="maxWait"in t,a=d?x0(ud(t.maxWait)||0,e):a,h="trailing"in t?!!t.trailing:h);function m(p){var I=n,N=i;return n=i=void 0,u=p,o=r.apply(N,I),o}function g(p){return u=p,s=setTimeout(w,e),c?m(p):o}function C(p){var I=p-l,N=p-u,j=e-I;return d?_0(j,a-N):j}function y(p){var I=p-l,N=p-u;return l===void 0||I>=e||I<0||d&&N>=a}function w(){var p=Lu();if(y(p))return _(p);s=setTimeout(w,C(p))}function _(p){return s=void 0,h&&n?m(p):(n=i=void 0,o)}function x(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function k(){return s===void 0?o:_(Lu())}function O(){var p=Lu(),I=y(p);if(n=arguments,i=this,l=p,I){if(s===void 0)return g(l);if(d)return clearTimeout(s),s=setTimeout(w,e),m(l)}return s===void 0&&(s=setTimeout(w,e)),o}return O.cancel=x,O.flush=k,O}var Uo=S0,Fu=Sr?Sr.performance:null,Oh=Fu&&Fu.now?function(){return Fu.now()}:function(){return Date.now()},T0=function(){if(Sr){if(Sr.requestAnimationFrame)return function(r){Sr.requestAnimationFrame(r)};if(Sr.mozRequestAnimationFrame)return function(r){Sr.mozRequestAnimationFrame(r)};if(Sr.webkitRequestAnimationFrame)return function(r){Sr.webkitRequestAnimationFrame(r)};if(Sr.msRequestAnimationFrame)return function(r){Sr.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(Oh())},1e3/60)}}(),Dl=function(e){return T0(e)},pi=Oh,Na=9261,Lh=65599,To=5381,Fh=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Na,n=t,i;i=e.next(),!i.done;)n=n*Lh+i.value|0;return n},Ro=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Na;return t*Lh+e|0},Oo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:To;return(t<<5)+t+e|0},E0=function(e,t){return e*2097152+t},Pi=function(e){return e[0]*2097152+e[1]},il=function(e,t){return[Ro(e[0],t[0]),Oo(e[1],t[1])]},k0=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return Fh(o,t)},Fi=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return Fh(o,t)},Nh=function(){return D0(arguments)},D0=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=Fi(i):t=Fi(i,t)}return t},cd=!0,M0=console.warn!=null,P0=console.trace!=null,yc=Number.MAX_SAFE_INTEGER||9007199254740991,jh=function(){return!0},Ml=function(){return!1},fd=function(){return 0},bc=function(){},ur=function(e){throw new Error(e)},Vh=function(e){if(e!==void 0)cd=!!e;else return cd},Qt=function(e){Vh()&&(M0?console.warn(e):(console.log(e),P0&&console.trace()))},A0=function(e){return Tt({},e)},Jn=function(e){return e==null?e:tr(e)?e.slice():$t(e)?A0(e):e},I0=function(e){return e.slice()},zh=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},B0={},qh=function(){return B0},Ir=function(e){var t=Object.keys(e);return function(n){for(var i={},a=0;a<t.length;a++){var o=t[a],s=n?.[o];i[o]=s===void 0?e[o]:s}return i}},Ni=function(e,t,n){for(var i=e.length-1;i>=0&&!(e[i]===t&&(e.splice(i,1),n));i--);},Cc=function(e){e.splice(0,e.length)},R0=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},Nn=function(e,t,n){return n&&(t=Dh(n,t)),e[t]},Ii=function(e,t,n,i){n&&(t=Dh(n,t)),e[t]=i},O0=function(){function r(){qi(this,r),this._obj={}}return Gi(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),r}(),ei=typeof Map<"u"?Map:O0,L0="undefined",F0=function(){function r(e){if(qi(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Gi(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),r}(),Xa=(typeof Set>"u"?"undefined":Er(Set))!==L0?Set:F0,zl=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!gc(e)){ur("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){ur("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new Xa,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),l=e.zoom();a.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];tr(t.classes)?u=t.classes:yt(t.classes)&&(u=t.classes.split(/\s+/));for(var c=0,d=u.length;c<d;c++){var h=u[c];!h||h===""||a.classes.add(h)}this.createEmitter();var m=t.style||t.css;m&&(Qt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(m)),(n===void 0||n)&&this.restore()},dd=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var o;$t(n)&&!Cn(n)&&(o=n,n=o.roots||o.root,i=o.visit,a=o.directed),a=arguments.length===2&&!cr(i)?i:a,i=cr(i)?i:function(){};for(var s=this._private.cy,l=n=yt(n)?this.filter(n):n,u=[],c=[],d={},h={},m={},g=0,C,y=this.byGroup(),w=y.nodes,_=y.edges,x=0;x<l.length;x++){var k=l[x],O=k.id();k.isNode()&&(u.unshift(k),e.bfs&&(m[O]=!0,c.push(k)),h[O]=0)}for(var p=function(){var z=e.bfs?u.shift():u.pop(),A=z.id();if(e.dfs){if(m[A])return"continue";m[A]=!0,c.push(z)}var T=h[A],E=d[A],M=E!=null?E.source():null,L=E!=null?E.target():null,F=E==null?void 0:z.same(M)?L[0]:M[0],X=void 0;if(X=i(z,E,F,g++,T),X===!0)return C=z,"break";if(X===!1)return"break";for(var K=z.connectedEdges().filter(function(me){return(!a||me.source().same(z))&&_.has(me)}),Y=0;Y<K.length;Y++){var ae=K[Y],he=ae.connectedNodes().filter(function(me){return!me.same(z)&&w.has(me)}),be=he.id();he.length!==0&&!m[be]&&(he=he[0],u.push(he),e.bfs&&(m[be]=!0,c.push(he)),d[be]=ae,h[be]=h[A]+1)}};u.length!==0;){var I=p();if(I!=="continue"&&I==="break")break}for(var N=s.collection(),j=0;j<c.length;j++){var H=c[j],G=d[H.id()];G!=null&&N.push(G),N.push(H)}return{path:s.collection(N),found:s.collection(C)}}},Lo={breadthFirstSearch:dd({bfs:!0}),depthFirstSearch:dd({dfs:!0})};Lo.bfs=Lo.breadthFirstSearch;Lo.dfs=Lo.depthFirstSearch;var N0=qm(function(r,e){(function(){var t,n,i,a,o,s,l,u,c,d,h,m,g,C,y;i=Math.floor,d=Math.min,n=function(w,_){return w<_?-1:w>_?1:0},c=function(w,_,x,k,O){var p;if(x==null&&(x=0),O==null&&(O=n),x<0)throw new Error("lo must be non-negative");for(k==null&&(k=w.length);x<k;)p=i((x+k)/2),O(_,w[p])<0?k=p:x=p+1;return[].splice.apply(w,[x,x-x].concat(_)),_},s=function(w,_,x){return x==null&&(x=n),w.push(_),C(w,0,w.length-1,x)},o=function(w,_){var x,k;return _==null&&(_=n),x=w.pop(),w.length?(k=w[0],w[0]=x,y(w,0,_)):k=x,k},u=function(w,_,x){var k;return x==null&&(x=n),k=w[0],w[0]=_,y(w,0,x),k},l=function(w,_,x){var k;return x==null&&(x=n),w.length&&x(w[0],_)<0&&(k=[w[0],_],_=k[0],w[0]=k[1],y(w,0,x)),_},a=function(w,_){var x,k,O,p,I,N;for(_==null&&(_=n),p=function(){N=[];for(var j=0,H=i(w.length/2);0<=H?j<H:j>H;0<=H?j++:j--)N.push(j);return N}.apply(this).reverse(),I=[],k=0,O=p.length;k<O;k++)x=p[k],I.push(y(w,x,_));return I},g=function(w,_,x){var k;if(x==null&&(x=n),k=w.indexOf(_),k!==-1)return C(w,0,k,x),y(w,k,x)},h=function(w,_,x){var k,O,p,I,N;if(x==null&&(x=n),O=w.slice(0,_),!O.length)return O;for(a(O,x),N=w.slice(_),p=0,I=N.length;p<I;p++)k=N[p],l(O,k,x);return O.sort(x).reverse()},m=function(w,_,x){var k,O,p,I,N,j,H,G,P;if(x==null&&(x=n),_*10<=w.length){if(p=w.slice(0,_).sort(x),!p.length)return p;for(O=p[p.length-1],H=w.slice(_),I=0,j=H.length;I<j;I++)k=H[I],x(k,O)<0&&(c(p,k,0,null,x),p.pop(),O=p[p.length-1]);return p}for(a(w,x),P=[],N=0,G=d(_,w.length);0<=G?N<G:N>G;0<=G?++N:--N)P.push(o(w,x));return P},C=function(w,_,x,k){var O,p,I;for(k==null&&(k=n),O=w[x];x>_;){if(I=x-1>>1,p=w[I],k(O,p)<0){w[x]=p,x=I;continue}break}return w[x]=O},y=function(w,_,x){var k,O,p,I,N;for(x==null&&(x=n),O=w.length,N=_,p=w[_],k=2*_+1;k<O;)I=k+1,I<O&&!(x(w[k],w[I])<0)&&(k=I),w[_]=w[k],_=k,k=2*_+1;return w[_]=p,C(w,N,_,x)},t=function(){w.push=s,w.pop=o,w.replace=u,w.pushpop=l,w.heapify=a,w.updateItem=g,w.nlargest=h,w.nsmallest=m;function w(_){this.cmp=_??n,this.nodes=[]}return w.prototype.push=function(_){return s(this.nodes,_,this.cmp)},w.prototype.pop=function(){return o(this.nodes,this.cmp)},w.prototype.peek=function(){return this.nodes[0]},w.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},w.prototype.replace=function(_){return u(this.nodes,_,this.cmp)},w.prototype.pushpop=function(_){return l(this.nodes,_,this.cmp)},w.prototype.heapify=function(){return a(this.nodes,this.cmp)},w.prototype.updateItem=function(_){return g(this.nodes,_,this.cmp)},w.prototype.clear=function(){return this.nodes=[]},w.prototype.empty=function(){return this.nodes.length===0},w.prototype.size=function(){return this.nodes.length},w.prototype.clone=function(){var _;return _=new w,_.nodes=this.nodes.slice(0),_},w.prototype.toArray=function(){return this.nodes.slice(0)},w.prototype.insert=w.prototype.push,w.prototype.top=w.prototype.peek,w.prototype.front=w.prototype.peek,w.prototype.has=w.prototype.contains,w.prototype.copy=w.prototype.clone,w}(),function(w,_){return r.exports=_()}(this,function(){return t})}).call(So)}),Ko=N0,j0=Ir({root:null,weight:function(e){return 1},directed:!1}),V0={dijkstra:function(e){if(!$t(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=j0(e),i=n.root,a=n.weight,o=n.directed,s=this,l=a,u=yt(i)?this.filter(i)[0]:i[0],c={},d={},h={},m=this.byGroup(),g=m.nodes,C=m.edges;C.unmergeBy(function(T){return T.isLoop()});for(var y=function(E){return c[E.id()]},w=function(E,M){c[E.id()]=M,_.updateItem(E)},_=new Ko(function(T,E){return y(T)-y(E)}),x=0;x<g.length;x++){var k=g[x];c[k.id()]=k.same(u)?0:1/0,_.push(k)}for(var O=function(E,M){for(var L=(o?E.edgesTo(M):E.edgesWith(M)).intersect(C),F=1/0,X,K=0;K<L.length;K++){var Y=L[K],ae=l(Y);(ae<F||!X)&&(F=ae,X=Y)}return{edge:X,dist:F}};_.size()>0;){var p=_.pop(),I=y(p),N=p.id();if(h[N]=I,I!==1/0)for(var j=p.neighborhood().intersect(g),H=0;H<j.length;H++){var G=j[H],P=G.id(),z=O(p,G),A=I+z.dist;A<y(G)&&(w(G,A),d[P]={node:p,edge:z.edge})}}return{distanceTo:function(E){var M=yt(E)?g.filter(E)[0]:E[0];return h[M.id()]},pathTo:function(E){var M=yt(E)?g.filter(E)[0]:E[0],L=[],F=M,X=F.id();if(M.length>0)for(L.unshift(M);d[X];){var K=d[X];L.unshift(K.edge),L.unshift(K.node),F=K.node,X=F.id()}return s.spawn(L)}}}},z0={kruskal:function(e){e=e||function(x){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,a=n.length,o=new Array(a),s=n,l=function(k){for(var O=0;O<o.length;O++){var p=o[O];if(p.has(k))return O}},u=0;u<a;u++)o[u]=this.spawn(n[u]);for(var c=i.sort(function(x,k){return e(x)-e(k)}),d=0;d<c.length;d++){var h=c[d],m=h.source()[0],g=h.target()[0],C=l(m),y=l(g),w=o[C],_=o[y];C!==y&&(s.merge(h),w.merge(_),o.splice(y,1))}return s}},q0=Ir({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),G0={aStar:function(e){var t=this.cy(),n=q0(e),i=n.root,a=n.goal,o=n.heuristic,s=n.directed,l=n.weight;i=t.collection(i)[0],a=t.collection(a)[0];var u=i.id(),c=a.id(),d={},h={},m={},g=new Ko(function(X,K){return h[X.id()]-h[K.id()]}),C=new Xa,y={},w={},_=function(K,Y){g.push(K),C.add(Y)},x,k,O=function(){x=g.pop(),k=x.id(),C.delete(k)},p=function(K){return C.has(K)};_(i,u),d[u]=0,h[u]=o(i);for(var I=0;g.size()>0;){if(O(),I++,k===c){for(var N=[],j=a,H=c,G=w[H];N.unshift(j),G!=null&&N.unshift(G),j=y[H],j!=null;)H=j.id(),G=w[H];return{found:!0,distance:d[k],path:this.spawn(N),steps:I}}m[k]=!0;for(var P=x._private.edges,z=0;z<P.length;z++){var A=P[z];if(this.hasElementWithId(A.id())&&!(s&&A.data("source")!==k)){var T=A.source(),E=A.target(),M=T.id()!==k?T:E,L=M.id();if(this.hasElementWithId(L)&&!m[L]){var F=d[k]+l(A);if(!p(L)){d[L]=F,h[L]=F+o(M),_(M,L),y[L]=x,w[L]=A;continue}F<d[L]&&(d[L]=F,h[L]=F+o(M),y[L]=x,w[L]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:I}}},H0=Ir({weight:function(e){return 1},directed:!1}),W0={floydWarshall:function(e){for(var t=this.cy(),n=H0(e),i=n.weight,a=n.directed,o=i,s=this.byGroup(),l=s.nodes,u=s.edges,c=l.length,d=c*c,h=function(ae){return l.indexOf(ae)},m=function(ae){return l[ae]},g=new Array(d),C=0;C<d;C++){var y=C%c,w=(C-y)/c;w===y?g[C]=0:g[C]=1/0}for(var _=new Array(d),x=new Array(d),k=0;k<u.length;k++){var O=u[k],p=O.source()[0],I=O.target()[0];if(p!==I){var N=h(p),j=h(I),H=N*c+j,G=o(O);if(g[H]>G&&(g[H]=G,_[H]=j,x[H]=O),!a){var P=j*c+N;!a&&g[P]>G&&(g[P]=G,_[P]=N,x[P]=O)}}}for(var z=0;z<c;z++)for(var A=0;A<c;A++)for(var T=A*c+z,E=0;E<c;E++){var M=A*c+E,L=z*c+E;g[T]+g[L]<g[M]&&(g[M]=g[T]+g[L],_[M]=_[T])}var F=function(ae){return(yt(ae)?t.filter(ae):ae)[0]},X=function(ae){return h(F(ae))},K={distance:function(ae,he){var be=X(ae),me=X(he);return g[be*c+me]},path:function(ae,he){var be=X(ae),me=X(he),we=m(be);if(be===me)return we.collection();if(_[be*c+me]==null)return t.collection();var xe=t.collection(),oe=be,$;for(xe.merge(we);be!==me;)oe=be,be=_[be*c+me],$=x[oe*c+be],xe.merge($),xe.merge(m(be));return xe}};return K}},$0=Ir({weight:function(e){return 1},directed:!1,root:null}),U0={bellmanFord:function(e){var t=this,n=$0(e),i=n.weight,a=n.directed,o=n.root,s=i,l=this,u=this.cy(),c=this.byGroup(),d=c.edges,h=c.nodes,m=h.length,g=new ei,C=!1,y=[];o=u.collection(o)[0],d.unmergeBy(function(Ke){return Ke.isLoop()});for(var w=d.length,_=function(qe){var Ge=g.get(qe.id());return Ge||(Ge={},g.set(qe.id(),Ge)),Ge},x=function(qe){return(yt(qe)?u.$(qe):qe)[0]},k=function(qe){return _(x(qe)).dist},O=function(qe){for(var Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,et=x(qe),rt=[],Qe=et;;){if(Qe==null)return t.spawn();var Ye=_(Qe),Ie=Ye.edge,Ve=Ye.pred;if(rt.unshift(Qe[0]),Qe.same(Ge)&&rt.length>0)break;Ie!=null&&rt.unshift(Ie),Qe=Ve}return l.spawn(rt)},p=0;p<m;p++){var I=h[p],N=_(I);I.same(o)?N.dist=0:N.dist=1/0,N.pred=null,N.edge=null}for(var j=!1,H=function(qe,Ge,et,rt,Qe,Ye){var Ie=rt.dist+Ye;Ie<Qe.dist&&!et.same(rt.edge)&&(Qe.dist=Ie,Qe.pred=qe,Qe.edge=et,j=!0)},G=1;G<m;G++){j=!1;for(var P=0;P<w;P++){var z=d[P],A=z.source(),T=z.target(),E=s(z),M=_(A),L=_(T);H(A,T,z,M,L,E),a||H(T,A,z,L,M,E)}if(!j)break}if(j)for(var F=[],X=0;X<w;X++){var K=d[X],Y=K.source(),ae=K.target(),he=s(K),be=_(Y).dist,me=_(ae).dist;if(be+he<me||!a&&me+he<be)if(C||(Qt("Graph contains a negative weight cycle for Bellman-Ford"),C=!0),e.findNegativeWeightCycles!==!1){var we=[];be+he<me&&we.push(Y),!a&&me+he<be&&we.push(ae);for(var xe=we.length,oe=0;oe<xe;oe++){var $=we[oe],Q=[$];Q.push(_($).edge);for(var J=_($).pred;Q.indexOf(J)===-1;)Q.push(J),Q.push(_(J).edge),J=_(J).pred;Q=Q.slice(Q.indexOf(J));for(var le=Q[0].id(),de=0,je=2;je<Q.length;je+=2)Q[je].id()<le&&(le=Q[je].id(),de=je);Q=Q.slice(de).concat(Q.slice(0,de)),Q.push(Q[0]);var it=Q.map(function(Ke){return Ke.id()}).join(",");F.indexOf(it)===-1&&(y.push(l.spawn(Q)),F.push(it))}}else break}return{distanceTo:k,pathTo:O,hasNegativeWeightCycle:C,negativeWeightCycles:y}}},K0=Math.sqrt(2),X0=function(e,t,n){n.length===0&&ur("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],o=i[2],s=t[a],l=t[o],u=n,c=u.length-1;c>=0;c--){var d=u[c],h=d[1],m=d[2];(t[h]===s&&t[m]===l||t[h]===l&&t[m]===s)&&u.splice(c,1)}for(var g=0;g<u.length;g++){var C=u[g];C[1]===l?(u[g]=C.slice(),u[g][1]=s):C[2]===l&&(u[g]=C.slice(),u[g][2]=s)}for(var y=0;y<t.length;y++)t[y]===l&&(t[y]=s);return u},Nu=function(e,t,n,i){for(;n>i;){var a=Math.floor(Math.random()*t.length);t=X0(a,e,t),n--}return t},Y0={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(L){return L.isLoop()});var a=n.length,o=i.length,s=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),l=Math.floor(a/K0);if(a<2){ur("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],c=0;c<o;c++){var d=i[c];u.push([c,n.indexOf(d.source()),n.indexOf(d.target())])}for(var h=1/0,m=[],g=new Array(a),C=new Array(a),y=new Array(a),w=function(F,X){for(var K=0;K<a;K++)X[K]=F[K]},_=0;_<=s;_++){for(var x=0;x<a;x++)C[x]=x;var k=Nu(C,u.slice(),a,l),O=k.slice();w(C,y);var p=Nu(C,k,l,2),I=Nu(y,O,l,2);p.length<=I.length&&p.length<h?(h=p.length,m=p,w(C,g)):I.length<=p.length&&I.length<h&&(h=I.length,m=I,w(y,g))}for(var N=this.spawn(m.map(function(L){return i[L[0]]})),j=this.spawn(),H=this.spawn(),G=g[0],P=0;P<g.length;P++){var z=g[P],A=n[P];z===G?j.merge(A):H.merge(A)}var T=function(F){var X=e.spawn();return F.forEach(function(K){X.merge(K),K.connectedEdges().forEach(function(Y){e.contains(Y)&&!N.contains(Y)&&X.merge(Y)})}),X},E=[T(j),T(H)],M={cut:N,components:E,partition1:j,partition2:H};return M}},Q0=function(e){return{x:e.x,y:e.y}},ql=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Gh=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},ja=function(e){return{x:e[0],y:e[1]}},Z0=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.min(o,i))}return i},J0=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.max(o,i))}return i},ey=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(i+=s,a++)}return i/a},ty=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}a&&e.sort(function(h,m){return h-m});var c=e.length,d=Math.floor(c/2);return c%2!==0?e[d+1+s]:(e[d-1+s]+e[d+s])/2},ry=function(e){return Math.PI*e/180},al=function(e,t){return Math.atan2(t,e)-Math.PI/2},wc=Math.log2||function(r){return Math.log(r)/Math.log(2)},Hh=function(e){return e>0?1:e<0?-1:0},da=function(e,t){return Math.sqrt(oa(e,t))},oa=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},ny=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},Ar=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},za=function(e,t,n,i){return{x:Ar(e.x,t.x,n.x,i),y:Ar(e.y,t.y,n.y,i)}},iy=function(e,t,n,i){var a={x:t.x-e.x,y:t.y-e.y},o=da(e,t),s={x:a.x/o,y:a.y/o};return n=n??0,i=i??n*o,{x:e.x+s.x*i,y:e.y+s.y*i}},Fo=function(e,t,n){return Math.max(e,Math.min(n,t))},pn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},ay=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},oy=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},sy=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},Wh=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},ly=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},yl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},bl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,o;if(t.length===1)n=i=a=o=t[0];else if(t.length===2)n=a=t[0],o=i=t[1];else if(t.length===4){var s=Cr(t,4);n=s[0],i=s[1],a=s[2],o=s[3]}return e.x1-=o,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},hd=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},xc=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},$a=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},uy=function(e,t){return $a(e,t.x,t.y)},$h=function(e,t){return $a(e,t.x1,t.y1)&&$a(e,t.x2,t.y2)},Uh=function(e,t,n,i,a,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?ha(a,o):l,c=a/2,d=o/2;u=Math.min(u,c,d);var h=u!==c,m=u!==d,g;if(h){var C=n-c+u-s,y=i-d-s,w=n+c-u+s,_=y;if(g=Bi(e,t,n,i,C,y,w,_,!1),g.length>0)return g}if(m){var x=n+c+s,k=i-d+u-s,O=x,p=i+d-u+s;if(g=Bi(e,t,n,i,x,k,O,p,!1),g.length>0)return g}if(h){var I=n-c+u-s,N=i+d+s,j=n+c-u+s,H=N;if(g=Bi(e,t,n,i,I,N,j,H,!1),g.length>0)return g}if(m){var G=n-c-s,P=i-d+u-s,z=G,A=i+d-u+s;if(g=Bi(e,t,n,i,G,P,z,A,!1),g.length>0)return g}var T;{var E=n-c+u,M=i-d+u;if(T=Eo(e,t,n,i,E,M,u+s),T.length>0&&T[0]<=E&&T[1]<=M)return[T[0],T[1]]}{var L=n+c-u,F=i-d+u;if(T=Eo(e,t,n,i,L,F,u+s),T.length>0&&T[0]>=L&&T[1]<=F)return[T[0],T[1]]}{var X=n+c-u,K=i+d-u;if(T=Eo(e,t,n,i,X,K,u+s),T.length>0&&T[0]>=X&&T[1]>=K)return[T[0],T[1]]}{var Y=n-c+u,ae=i+d-u;if(T=Eo(e,t,n,i,Y,ae,u+s),T.length>0&&T[0]<=Y&&T[1]>=ae)return[T[0],T[1]]}return[]},cy=function(e,t,n,i,a,o,s){var l=s,u=Math.min(n,a),c=Math.max(n,a),d=Math.min(i,o),h=Math.max(i,o);return u-l<=e&&e<=c+l&&d-l<=t&&t<=h+l},fy=function(e,t,n,i,a,o,s,l,u){var c={x1:Math.min(n,s,a)-u,x2:Math.max(n,s,a)+u,y1:Math.min(i,l,o)-u,y2:Math.max(i,l,o)+u};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},dy=function(e,t,n,i){n-=i;var a=t*t-4*e*n;if(a<0)return[];var o=Math.sqrt(a),s=2*e,l=(-t+o)/s,u=(-t-o)/s;return[l,u]},hy=function(e,t,n,i,a){var o=1e-5;e===0&&(e=o),t/=e,n/=e,i/=e;var s,l,u,c,d,h,m,g;if(l=(3*n-t*t)/9,u=-(27*i)+t*(9*n-2*(t*t)),u/=54,s=l*l*l+u*u,a[1]=0,m=t/3,s>0){d=u+Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),h=u-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),a[0]=-m+d+h,m+=(d+h)/2,a[4]=a[2]=-m,m=Math.sqrt(3)*(-h+d)/2,a[3]=m,a[5]=-m;return}if(a[5]=a[3]=0,s===0){g=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),a[0]=-m+2*g,a[4]=a[2]=-(g+m);return}l=-l,c=l*l*l,c=Math.acos(u/Math.sqrt(c)),g=2*Math.sqrt(l),a[0]=-m+g*Math.cos(c/3),a[2]=-m+g*Math.cos((c+2*Math.PI)/3),a[4]=-m+g*Math.cos((c+4*Math.PI)/3)},py=function(e,t,n,i,a,o,s,l){var u=1*n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s+i*i-4*i*o+2*i*l+4*o*o-4*o*l+l*l,c=1*9*n*a-3*n*n-3*n*s-6*a*a+3*a*s+9*i*o-3*i*i-3*i*l-6*o*o+3*o*l,d=1*3*n*n-6*n*a+n*s-n*e+2*a*a+2*a*e-s*e+3*i*i-6*i*o+i*l-i*t+2*o*o+2*o*t-l*t,h=1*n*a-n*n+n*e-a*e+i*o-i*i+i*t-o*t,m=[];hy(u,c,d,h,m);for(var g=1e-7,C=[],y=0;y<6;y+=2)Math.abs(m[y+1])<g&&m[y]>=0&&m[y]<=1&&C.push(m[y]);C.push(1),C.push(0);for(var w=-1,_,x,k,O=0;O<C.length;O++)_=Math.pow(1-C[O],2)*n+2*(1-C[O])*C[O]*a+C[O]*C[O]*s,x=Math.pow(1-C[O],2)*i+2*(1-C[O])*C[O]*o+C[O]*C[O]*l,k=Math.pow(_-e,2)+Math.pow(x-t,2),w>=0?k<w&&(w=k):w=k;return w},vy=function(e,t,n,i,a,o){var s=[e-n,t-i],l=[a-n,o-i],u=l[0]*l[0]+l[1]*l[1],c=s[0]*s[0]+s[1]*s[1],d=s[0]*l[0]+s[1]*l[1],h=d*d/u;return d<0?c:h>u?(e-a)*(e-a)+(t-o)*(t-o):c-h},hn=function(e,t,n){for(var i,a,o,s,l,u=0,c=0;c<n.length/2;c++)if(i=n[c*2],a=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&o==e))if(i>=e&&e>=o||i<=e&&e<=o)l=(e-i)/(o-i)*(s-a)+a,l>t&&u++;else continue;return u%2!==0},vi=function(e,t,n,i,a,o,s,l,u){var c=new Array(n.length),d;l[0]!=null?(d=Math.atan(l[1]/l[0]),l[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=l;for(var h=Math.cos(-d),m=Math.sin(-d),g=0;g<c.length/2;g++)c[g*2]=o/2*(n[g*2]*h-n[g*2+1]*m),c[g*2+1]=s/2*(n[g*2+1]*h+n[g*2]*m),c[g*2]+=i,c[g*2+1]+=a;var C;if(u>0){var y=Al(c,-u);C=Pl(y)}else C=c;return hn(e,t,C)},gy=function(e,t,n,i,a,o,s,l){for(var u=new Array(n.length*2),c=0;c<l.length;c++){var d=l[c];u[c*4+0]=d.startX,u[c*4+1]=d.startY,u[c*4+2]=d.stopX,u[c*4+3]=d.stopY;var h=Math.pow(d.cx-e,2)+Math.pow(d.cy-t,2);if(h<=Math.pow(d.radius,2))return!0}return hn(e,t,u)},Pl=function(e){for(var t=new Array(e.length/2),n,i,a,o,s,l,u,c,d=0;d<e.length/4;d++){n=e[d*4],i=e[d*4+1],a=e[d*4+2],o=e[d*4+3],d<e.length/4-1?(s=e[(d+1)*4],l=e[(d+1)*4+1],u=e[(d+1)*4+2],c=e[(d+1)*4+3]):(s=e[0],l=e[1],u=e[2],c=e[3]);var h=Bi(n,i,a,o,s,l,u,c,!0);t[d*2]=h[0],t[d*2+1]=h[1]}return t},Al=function(e,t){for(var n=new Array(e.length*2),i,a,o,s,l=0;l<e.length/2;l++){i=e[l*2],a=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-a,c=-(o-i),d=Math.sqrt(u*u+c*c),h=u/d,m=c/d;n[l*4]=i+h*t,n[l*4+1]=a+m*t,n[l*4+2]=o+h*t,n[l*4+3]=s+m*t}return n},my=function(e,t,n,i,a,o){var s=n-e,l=i-t;s/=a,l/=o;var u=Math.sqrt(s*s+l*l),c=u-1;if(c<0)return[];var d=c/u;return[(n-e)*d+e,(i-t)*d+t]},ca=function(e,t,n,i,a,o,s){return e-=a,t-=o,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},Eo=function(e,t,n,i,a,o,s){var l=[n-e,i-t],u=[e-a,t-o],c=l[0]*l[0]+l[1]*l[1],d=2*(u[0]*l[0]+u[1]*l[1]),h=u[0]*u[0]+u[1]*u[1]-s*s,m=d*d-4*c*h;if(m<0)return[];var g=(-d+Math.sqrt(m))/(2*c),C=(-d-Math.sqrt(m))/(2*c),y=Math.min(g,C),w=Math.max(g,C),_=[];if(y>=0&&y<=1&&_.push(y),w>=0&&w<=1&&_.push(w),_.length===0)return[];var x=_[0]*l[0]+e,k=_[0]*l[1]+t;if(_.length>1){if(_[0]==_[1])return[x,k];var O=_[1]*l[0]+e,p=_[1]*l[1]+t;return[x,k,O,p]}else return[x,k]},ju=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Bi=function(e,t,n,i,a,o,s,l,u){var c=e-a,d=n-e,h=s-a,m=t-o,g=i-t,C=l-o,y=h*m-C*c,w=d*m-g*c,_=C*d-h*g;if(_!==0){var x=y/_,k=w/_,O=.001,p=0-O,I=1+O;return p<=x&&x<=I&&p<=k&&k<=I?[e+x*d,t+x*g]:u?[e+x*d,t+x*g]:[]}else return y===0||w===0?ju(e,n,s)===s?[s,l]:ju(e,n,a)===a?[a,o]:ju(a,s,n)===n?[n,i]:[]:[]},No=function(e,t,n,i,a,o,s,l){var u=[],c,d=new Array(n.length),h=!0;o==null&&(h=!1);var m;if(h){for(var g=0;g<d.length/2;g++)d[g*2]=n[g*2]*o+i,d[g*2+1]=n[g*2+1]*s+a;if(l>0){var C=Al(d,-l);m=Pl(C)}else m=d}else m=n;for(var y,w,_,x,k=0;k<m.length/2;k++)y=m[k*2],w=m[k*2+1],k<m.length/2-1?(_=m[(k+1)*2],x=m[(k+1)*2+1]):(_=m[0],x=m[1]),c=Bi(e,t,i,a,y,w,_,x),c.length!==0&&u.push(c[0],c[1]);return u},yy=function(e,t,n,i,a,o,s,l,u){var c=[],d,h=new Array(n.length*2);u.forEach(function(_,x){x===0?(h[h.length-2]=_.startX,h[h.length-1]=_.startY):(h[x*4-2]=_.startX,h[x*4-1]=_.startY),h[x*4]=_.stopX,h[x*4+1]=_.stopY,d=Eo(e,t,i,a,_.cx,_.cy,_.radius),d.length!==0&&c.push(d[0],d[1])});for(var m=0;m<h.length/4;m++)d=Bi(e,t,i,a,h[m*4],h[m*4+1],h[m*4+2],h[m*4+3],!1),d.length!==0&&c.push(d[0],d[1]);if(c.length>2){for(var g=[c[0],c[1]],C=Math.pow(g[0]-e,2)+Math.pow(g[1]-t,2),y=1;y<c.length/2;y++){var w=Math.pow(c[y*2]-e,2)+Math.pow(c[y*2+1]-t,2);w<=C&&(g[0]=c[y*2],g[1]=c[y*2+1],C=w)}return g}return c},ol=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(a-n)/a;return o<0&&(o=1e-5),[t[0]+o*i[0],t[1]+o*i[1]]},Zr=function(e,t){var n=Ju(e,t);return n=Kh(n),n},Kh=function(e){for(var t,n,i=e.length/2,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<i;u++)t=e[2*u],n=e[2*u+1],a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);for(var c=2/(s-a),d=2/(l-o),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*d,a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var m=0;m<i;m++)n=e[2*m+1]=e[2*m+1]+(-1-o);return e},Ju=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a=new Array(e*2),o,s=0;s<e;s++)o=s*n+i,a[2*s]=Math.cos(o),a[2*s+1]=Math.sin(-o);return a},ha=function(e,t){return Math.min(e/4,t/4,8)},Xh=function(e,t){return Math.min(e/10,t/10,8)},_c=function(){return 8},by=function(e,t,n){return[e-2*t+n,2*(t-e),e]},ec=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Cy=Ir({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),wy={pageRank:function(e){for(var t=Cy(e),n=t.dampingFactor,i=t.precision,a=t.iterations,o=t.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,d=u.length,h=d*d,m=c.length,g=new Array(h),C=new Array(d),y=(1-n)/d,w=0;w<d;w++){for(var _=0;_<d;_++){var x=w*d+_;g[x]=0}C[w]=0}for(var k=0;k<m;k++){var O=c[k],p=O.data("source"),I=O.data("target");if(p!==I){var N=u.indexOfId(p),j=u.indexOfId(I),H=o(O),G=j*d+N;g[G]+=H,C[N]+=H}}for(var P=1/d+y,z=0;z<d;z++)if(C[z]===0)for(var A=0;A<d;A++){var T=A*d+z;g[T]=P}else for(var E=0;E<d;E++){var M=E*d+z;g[M]=g[M]/C[z]+y}for(var L=new Array(d),F=new Array(d),X,K=0;K<d;K++)L[K]=1;for(var Y=0;Y<a;Y++){for(var ae=0;ae<d;ae++)F[ae]=0;for(var he=0;he<d;he++)for(var be=0;be<d;be++){var me=he*d+be;F[he]+=g[me]*L[be]}ny(F),X=L,L=F,F=X;for(var we=0,xe=0;xe<d;xe++){var oe=X[xe]-L[xe];we+=oe*oe}if(we<i)break}var $={rank:function(J){return J=s.collection(J)[0],L[u.indexOf(J)]}};return $}},pd=Ir({root:null,weight:function(e){return 1},directed:!1,alpha:0}),qa={degreeCentralityNormalized:function(e){e=pd(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},d={},h=0,m=0,g=0;g<i;g++){var C=n[g],y=C.id();e.root=C;var w=this.degreeCentrality(e);h<w.indegree&&(h=w.indegree),m<w.outdegree&&(m=w.outdegree),c[y]=w.indegree,d[y]=w.outdegree}return{indegree:function(x){return h==0?0:(yt(x)&&(x=t.filter(x)),c[x.id()]/h)},outdegree:function(x){return m===0?0:(yt(x)&&(x=t.filter(x)),d[x.id()]/m)}}}else{for(var a={},o=0,s=0;s<i;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),a[l.id()]=u.degree}return{degree:function(x){return o===0?0:(yt(x)&&(x=t.filter(x)),a[x.id()]/o)}}}},degreeCentrality:function(e){e=pd(e);var t=this.cy(),n=this,i=e,a=i.root,o=i.weight,s=i.directed,l=i.alpha;if(a=t.collection(a)[0],s){for(var m=a.connectedEdges(),g=m.filter(function(p){return p.target().same(a)&&n.has(p)}),C=m.filter(function(p){return p.source().same(a)&&n.has(p)}),y=g.length,w=C.length,_=0,x=0,k=0;k<g.length;k++)_+=o(g[k]);for(var O=0;O<C.length;O++)x+=o(C[O]);return{indegree:Math.pow(y,1-l)*Math.pow(_,l),outdegree:Math.pow(w,1-l)*Math.pow(x,l)}}else{for(var u=a.connectedEdges().intersection(n),c=u.length,d=0,h=0;h<u.length;h++)d+=o(u[h]);return{degree:Math.pow(c,1-l)*Math.pow(d,l)}}}};qa.dc=qa.degreeCentrality;qa.dcn=qa.degreeCentralityNormalised=qa.degreeCentralityNormalized;var vd=Ir({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ga={closenessCentralityNormalized:function(e){for(var t=vd(e),n=t.harmonic,i=t.weight,a=t.directed,o=this.cy(),s={},l=0,u=this.nodes(),c=this.floydWarshall({weight:i,directed:a}),d=0;d<u.length;d++){for(var h=0,m=u[d],g=0;g<u.length;g++)if(d!==g){var C=c.distance(m,u[g]);n?h+=1/C:h+=C}n||(h=1/h),l<h&&(l=h),s[m.id()]=h}return{closeness:function(w){return l==0?0:(yt(w)?w=o.filter(w)[0].id():w=w.id(),s[w]/l)}}},closenessCentrality:function(e){var t=vd(e),n=t.root,i=t.weight,a=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:a}),l=0,u=this.nodes(),c=0;c<u.length;c++){var d=u[c];if(!d.same(n)){var h=s.distanceTo(d);o?l+=1/h:l+=h}}return o?l:1/l}};Ga.cc=Ga.closenessCentrality;Ga.ccn=Ga.closenessCentralityNormalised=Ga.closenessCentralityNormalized;var xy=Ir({weight:null,directed:!1}),tc={betweennessCentrality:function(e){for(var t=xy(e),n=t.directed,i=t.weight,a=i!=null,o=this.cy(),s=this.nodes(),l={},u={},c=0,d={set:function(x,k){u[x]=k,k>c&&(c=k)},get:function(x){return u[x]}},h=0;h<s.length;h++){var m=s[h],g=m.id();n?l[g]=m.outgoers().nodes():l[g]=m.openNeighborhood().nodes(),d.set(g,0)}for(var C=function(x){for(var k=s[x].id(),O=[],p={},I={},N={},j=new Ko(function(be,me){return N[be]-N[me]}),H=0;H<s.length;H++){var G=s[H].id();p[G]=[],I[G]=0,N[G]=1/0}for(I[k]=1,N[k]=0,j.push(k);!j.empty();){var P=j.pop();if(O.push(P),a)for(var z=0;z<l[P].length;z++){var A=l[P][z],T=o.getElementById(P),E=void 0;T.edgesTo(A).length>0?E=T.edgesTo(A)[0]:E=A.edgesTo(T)[0];var M=i(E);A=A.id(),N[A]>N[P]+M&&(N[A]=N[P]+M,j.nodes.indexOf(A)<0?j.push(A):j.updateItem(A),I[A]=0,p[A]=[]),N[A]==N[P]+M&&(I[A]=I[A]+I[P],p[A].push(P))}else for(var L=0;L<l[P].length;L++){var F=l[P][L].id();N[F]==1/0&&(j.push(F),N[F]=N[P]+1),N[F]==N[P]+1&&(I[F]=I[F]+I[P],p[F].push(P))}}for(var X={},K=0;K<s.length;K++)X[s[K].id()]=0;for(;O.length>0;){for(var Y=O.pop(),ae=0;ae<p[Y].length;ae++){var he=p[Y][ae];X[he]=X[he]+I[he]/I[Y]*(1+X[Y])}Y!=s[x].id()&&d.set(Y,d.get(Y)+X[Y])}},y=0;y<s.length;y++)C(y);var w={betweenness:function(x){var k=o.collection(x).id();return d.get(k)},betweennessNormalized:function(x){if(c==0)return 0;var k=o.collection(x).id();return d.get(k)/c}};return w.betweennessNormalised=w.betweennessNormalized,w}};tc.bc=tc.betweennessCentrality;var _y=Ir({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),Sy=function(e){return _y(e)},Ty=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},Ey=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},Yh=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var a=0;a<t;a++)n+=e[a*t+i];for(var o=0;o<t;o++)e[o*t+i]=e[o*t+i]/n}},ky=function(e,t,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var o=0;o<n;o++)i[a*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)i[a*n+l]+=e[a*n+s]*t[s*n+l]}return i},Dy=function(e,t,n){for(var i=e.slice(0),a=1;a<n;a++)e=ky(e,i,t);return e},My=function(e,t,n){for(var i=new Array(t*t),a=0;a<t*t;a++)i[a]=Math.pow(e[a],n);return Yh(i,t),i},Py=function(e,t,n,i){for(var a=0;a<n;a++){var o=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i);if(o!==s)return!1}return!0},Ay=function(e,t,n,i){for(var a=[],o=0;o<t;o++){for(var s=[],l=0;l<t;l++)Math.round(e[o*t+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&a.push(i.collection(s))}return a},Iy=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},By=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&Iy(e[t],e[n])&&e.splice(n,1);return e},gd=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),a=Sy(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var l=t.length,u=l*l,c=new Array(u),d,h=0;h<u;h++)c[h]=0;for(var m=0;m<n.length;m++){var g=n[m],C=o[g.source().id()],y=o[g.target().id()],w=Ty(g,a.attributes);c[C*l+y]+=w,c[y*l+C]+=w}Ey(c,l,a.multFactor),Yh(c,l);for(var _=!0,x=0;_&&x<a.maxIterations;)_=!1,d=Dy(c,l,a.expandFactor),c=My(d,l,a.inflateFactor),Py(c,d,u,4)||(_=!0),x++;var k=Ay(c,l,t,i);return k=By(k),k},Ry={markovClustering:gd,mcl:gd},Oy=function(e){return e},Qh=function(e,t){return Math.abs(t-e)},md=function(e,t,n){return e+Qh(t,n)},yd=function(e,t,n){return e+Math.pow(n-t,2)},Ly=function(e){return Math.sqrt(e)},Fy=function(e,t,n){return Math.max(e,Qh(t,n))},yo=function(e,t,n,i,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Oy,s=i,l,u,c=0;c<e;c++)l=t(c),u=n(c),s=a(s,l,u);return o(s)},Ua={euclidean:function(e,t,n){return e>=2?yo(e,t,n,0,yd,Ly):yo(e,t,n,0,md)},squaredEuclidean:function(e,t,n){return yo(e,t,n,0,yd)},manhattan:function(e,t,n){return yo(e,t,n,0,md)},max:function(e,t,n){return yo(e,t,n,-1/0,Fy)}};Ua["squared-euclidean"]=Ua.squaredEuclidean;Ua.squaredeuclidean=Ua.squaredEuclidean;function Gl(r,e,t,n,i,a){var o;return cr(r)?o=r:o=Ua[r]||Ua.euclidean,e===0&&cr(r)?o(i,a):o(e,t,n,i,a)}var Ny=Ir({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Sc=function(e){return Ny(e)},Il=function(e,t,n,i,a){var o=a!=="kMedoids",s=o?function(d){return n[d]}:function(d){return i[d](n)},l=function(h){return i[h](t)},u=n,c=t;return Gl(e,i.length,s,l,u,c)},Vu=function(e,t,n){for(var i=n.length,a=new Array(i),o=new Array(i),s=new Array(t),l=null,u=0;u<i;u++)a[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var c=0;c<t;c++){l=[];for(var d=0;d<i;d++)l[d]=Math.random()*(o[d]-a[d])+a[d];s[c]=l}return s},Zh=function(e,t,n,i,a){for(var o=1/0,s=0,l=0;l<t.length;l++){var u=Il(n,e,t[l],i,a);u<o&&(o=u,s=l)}return s},Jh=function(e,t,n){for(var i=[],a=null,o=0;o<t.length;o++)a=t[o],n[a.id()]===e&&i.push(a);return i},jy=function(e,t,n){return Math.abs(t-e)<=n},Vy=function(e,t,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var o=Math.abs(e[i][a]-t[i][a]);if(o>n)return!1}return!0},zy=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},bd=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var a=e[Math.floor(Math.random()*e.length)];zy(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Cd=function(e,t,n){for(var i=0,a=0;a<t.length;a++)i+=Il("manhattan",t[a],e,n,"kMedoids");return i},qy=function(e){var t=this.cy(),n=this.nodes(),i=null,a=Sc(e),o=new Array(a.k),s={},l;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,l=Vu(n,a.k,a.attributes)):Er(a.testCentroids)==="object"?l=a.testCentroids:l=Vu(n,a.k,a.attributes):l=Vu(n,a.k,a.attributes);for(var u=!0,c=0;u&&c<a.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],s[i.id()]=Zh(i,l,a.distance,a.attributes,"kMeans");u=!1;for(var h=0;h<a.k;h++){var m=Jh(h,n,s);if(m.length!==0){for(var g=a.attributes.length,C=l[h],y=new Array(g),w=new Array(g),_=0;_<g;_++){w[_]=0;for(var x=0;x<m.length;x++)i=m[x],w[_]+=a.attributes[_](i);y[_]=w[_]/m.length,jy(y[_],C[_],a.sensitivityThreshold)||(u=!0)}l[h]=y,o[h]=t.collection(m)}}c++}return o},Gy=function(e){var t=this.cy(),n=this.nodes(),i=null,a=Sc(e),o=new Array(a.k),s,l={},u,c=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Er(a.testCentroids)==="object"?s=a.testCentroids:s=bd(n,a.k)):s=bd(n,a.k);for(var d=!0,h=0;d&&h<a.maxIterations;){for(var m=0;m<n.length;m++)i=n[m],l[i.id()]=Zh(i,s,a.distance,a.attributes,"kMedoids");d=!1;for(var g=0;g<s.length;g++){var C=Jh(g,n,l);if(C.length!==0){c[g]=Cd(s[g],C,a.attributes);for(var y=0;y<C.length;y++)u=Cd(C[y],C,a.attributes),u<c[g]&&(c[g]=u,s[g]=C[y],d=!0);o[g]=t.collection(C)}}h++}return o},Hy=function(e,t,n,i,a){for(var o,s,l=0;l<t.length;l++)for(var u=0;u<e.length;u++)i[l][u]=Math.pow(n[l][u],a.m);for(var c=0;c<e.length;c++)for(var d=0;d<a.attributes.length;d++){o=0,s=0;for(var h=0;h<t.length;h++)o+=i[h][c]*a.attributes[d](t[h]),s+=i[h][c];e[c][d]=o/s}},Wy=function(e,t,n,i,a){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,l,u,c=2/(a.m-1),d=0;d<n.length;d++)for(var h=0;h<i.length;h++){s=0;for(var m=0;m<n.length;m++)l=Il(a.distance,i[h],n[d],a.attributes,"cmeans"),u=Il(a.distance,i[h],n[m],a.attributes,"cmeans"),s+=Math.pow(l/u,c);e[h][d]=1/s}},$y=function(e,t,n,i){for(var a=new Array(n.k),o=0;o<a.length;o++)a[o]=[];for(var s,l,u=0;u<t.length;u++){s=-1/0,l=-1;for(var c=0;c<t[0].length;c++)t[u][c]>s&&(s=t[u][c],l=c);a[l].push(e[u])}for(var d=0;d<a.length;d++)a[d]=i.collection(a[d]);return a},wd=function(e){var t=this.cy(),n=this.nodes(),i=Sc(e),a,o,s,l,u;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(i.k);s=new Array(n.length);for(var d=0;d<n.length;d++)s[d]=new Array(i.k);for(var h=0;h<n.length;h++){for(var m=0,g=0;g<i.k;g++)s[h][g]=Math.random(),m+=s[h][g];for(var C=0;C<i.k;C++)s[h][C]=s[h][C]/m}o=new Array(i.k);for(var y=0;y<i.k;y++)o[y]=new Array(i.attributes.length);u=new Array(n.length);for(var w=0;w<n.length;w++)u[w]=new Array(i.k);for(var _=!0,x=0;_&&x<i.maxIterations;)_=!1,Hy(o,n,s,u,i),Wy(s,l,o,n,i),Vy(s,l,i.sensitivityThreshold)||(_=!0),x++;return a=$y(n,s,i,t),{clusters:a,degreeOfMembership:s}},Uy={kMeans:qy,kMedoids:Gy,fuzzyCMeans:wd,fcm:wd},Ky=Ir({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Xy={single:"min",complete:"max"},Yy=function(e){var t=Ky(e),n=Xy[t.linkage];return n!=null&&(t.linkage=n),t},xd=function(e,t,n,i,a){for(var o=0,s=1/0,l,u=a.attributes,c=function(j,H){return Gl(a.distance,u.length,function(G){return u[G](j)},function(G){return u[G](H)},j,H)},d=0;d<e.length;d++){var h=e[d].key,m=n[h][i[h]];m<s&&(o=h,s=m)}if(a.mode==="threshold"&&s>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var g=t[o],C=t[i[o]],y;a.mode==="dendrogram"?y={left:g,right:C,key:g.key}:y={value:g.value.concat(C.value),key:g.key},e[g.index]=y,e.splice(C.index,1),t[g.key]=y;for(var w=0;w<e.length;w++){var _=e[w];g.key===_.key?l=1/0:a.linkage==="min"?(l=n[g.key][_.key],n[g.key][_.key]>n[C.key][_.key]&&(l=n[C.key][_.key])):a.linkage==="max"?(l=n[g.key][_.key],n[g.key][_.key]<n[C.key][_.key]&&(l=n[C.key][_.key])):a.linkage==="mean"?l=(n[g.key][_.key]*g.size+n[C.key][_.key]*C.size)/(g.size+C.size):a.mode==="dendrogram"?l=c(_.value,g.value):l=c(_.value[0],g.value[0]),n[g.key][_.key]=n[_.key][g.key]=l}for(var x=0;x<e.length;x++){var k=e[x].key;if(i[k]===g.key||i[k]===C.key){for(var O=k,p=0;p<e.length;p++){var I=e[p].key;n[k][I]<n[k][O]&&(O=I)}i[k]=O}e[x].index=x}return g.key=C.key=g.index=C.index=null,!0},sl=function r(e,t,n){e&&(e.value?t.push(e.value):(e.left&&r(e.left,t),e.right&&r(e.right,t)))},Qy=function r(e,t){if(!e)return"";if(e.left&&e.right){var n=r(e.left,t),i=r(e.right,t),a=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:a.id()}}),t.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},Zy=function r(e,t,n){if(!e)return[];var i=[],a=[],o=[];return t===0?(e.left&&sl(e.left,i),e.right&&sl(e.right,a),o=i.concat(a),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&sl(e.left,i),e.right&&sl(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=r(e.left,t-1,n)),e.right&&(a=r(e.right,t-1,n)),i.concat(a))},_d=function(e){for(var t=this.cy(),n=this.nodes(),i=Yy(e),a=i.attributes,o=function(x,k){return Gl(i.distance,a.length,function(O){return a[O](x)},function(O){return a[O](k)},x,k)},s=[],l=[],u=[],c=[],d=0;d<n.length;d++){var h={value:i.mode==="dendrogram"?n[d]:[n[d]],key:d,index:d};s[d]=h,c[d]=h,l[d]=[],u[d]=0}for(var m=0;m<s.length;m++)for(var g=0;g<=m;g++){var C=void 0;i.mode==="dendrogram"?C=m===g?1/0:o(s[m].value,s[g].value):C=m===g?1/0:o(s[m].value[0],s[g].value[0]),l[m][g]=C,l[g][m]=C,C<l[m][u[m]]&&(u[m]=g)}for(var y=xd(s,c,l,u,i);y;)y=xd(s,c,l,u,i);var w;return i.mode==="dendrogram"?(w=Zy(s[0],i.dendrogramDepth,t),i.addDendrogram&&Qy(s[0],t)):(w=new Array(s.length),s.forEach(function(_,x){_.key=_.index=null,w[x]=t.collection(_.value)})),w},Jy={hierarchicalClustering:_d,hca:_d},e1=Ir({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),t1=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||ur("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||at(n)||ur("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),e1(e)},r1=function(e,t,n,i){var a=function(s,l){return i[l](s)};return-Gl(e,i.length,function(o){return a(t,o)},function(o){return a(n,o)},t,n)},n1=function(e,t){var n=null;return t==="median"?n=ty(e):t==="mean"?n=ey(e):t==="min"?n=Z0(e):t==="max"?n=J0(e):n=t,n},i1=function(e,t,n){for(var i=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&i.push(a);return i},Sd=function(e,t,n){for(var i=[],a=0;a<e;a++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];t[a*e+u]>s&&(o=u,s=t[a*e+u])}o>0&&i.push(o)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},a1=function(e,t,n){for(var i=Sd(e,t,n),a=0;a<n.length;a++){for(var o=[],s=0;s<i.length;s++)i[s]===n[a]&&o.push(s);for(var l=-1,u=-1/0,c=0;c<o.length;c++){for(var d=0,h=0;h<o.length;h++)d+=t[o[h]*e+o[c]];d>u&&(l=c,u=d)}n[a]=o[l]}return i=Sd(e,t,n),i},Td=function(e){for(var t=this.cy(),n=this.nodes(),i=t1(e),a={},o=0;o<n.length;o++)a[n[o].id()]=o;var s,l,u,c,d,h;s=n.length,l=s*s,u=new Array(l);for(var m=0;m<l;m++)u[m]=-1/0;for(var g=0;g<s;g++)for(var C=0;C<s;C++)g!==C&&(u[g*s+C]=r1(i.distance,n[g],n[C],i.attributes));c=n1(u,i.preference);for(var y=0;y<s;y++)u[y*s+y]=c;d=new Array(l);for(var w=0;w<l;w++)d[w]=0;h=new Array(l);for(var _=0;_<l;_++)h[_]=0;for(var x=new Array(s),k=new Array(s),O=new Array(s),p=0;p<s;p++)x[p]=0,k[p]=0,O[p]=0;for(var I=new Array(s*i.minIterations),N=0;N<I.length;N++)I[N]=0;var j;for(j=0;j<i.maxIterations;j++){for(var H=0;H<s;H++){for(var G=-1/0,P=-1/0,z=-1,A=0,T=0;T<s;T++)x[T]=d[H*s+T],A=h[H*s+T]+u[H*s+T],A>=G?(P=G,G=A,z=T):A>P&&(P=A);for(var E=0;E<s;E++)d[H*s+E]=(1-i.damping)*(u[H*s+E]-G)+i.damping*x[E];d[H*s+z]=(1-i.damping)*(u[H*s+z]-P)+i.damping*x[z]}for(var M=0;M<s;M++){for(var L=0,F=0;F<s;F++)x[F]=h[F*s+M],k[F]=Math.max(0,d[F*s+M]),L+=k[F];L-=k[M],k[M]=d[M*s+M],L+=k[M];for(var X=0;X<s;X++)h[X*s+M]=(1-i.damping)*Math.min(0,L-k[X])+i.damping*x[X];h[M*s+M]=(1-i.damping)*(L-k[M])+i.damping*x[M]}for(var K=0,Y=0;Y<s;Y++){var ae=h[Y*s+Y]+d[Y*s+Y]>0?1:0;I[j%i.minIterations*s+Y]=ae,K+=ae}if(K>0&&(j>=i.minIterations-1||j==i.maxIterations-1)){for(var he=0,be=0;be<s;be++){O[be]=0;for(var me=0;me<i.minIterations;me++)O[be]+=I[me*s+be];(O[be]===0||O[be]===i.minIterations)&&he++}if(he===s)break}}for(var we=i1(s,d,h),xe=a1(s,u,we),oe={},$=0;$<we.length;$++)oe[we[$]]=[];for(var Q=0;Q<n.length;Q++){var J=a[n[Q].id()],le=xe[J];le!=null&&oe[le].push(n[Q])}for(var de=new Array(we.length),je=0;je<we.length;je++)de[je]=t.collection(oe[we[je]]);return de},o1={affinityPropagation:Td,ap:Td},s1=Ir({root:void 0,directed:!1}),l1={hierholzer:function(e){if(!$t(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=s1(e),i=n.root,a=n.directed,o=this,s=!1,l,u,c;i&&(c=yt(i)?this.filter(i)[0].id():i[0].id());var d={},h={};a?o.forEach(function(_){var x=_.id();if(_.isNode()){var k=_.indegree(!0),O=_.outdegree(!0),p=k-O,I=O-k;p==1?l?s=!0:l=x:I==1?u?s=!0:u=x:(I>1||p>1)&&(s=!0),d[x]=[],_.outgoers().forEach(function(N){N.isEdge()&&d[x].push(N.id())})}else h[x]=[void 0,_.target().id()]}):o.forEach(function(_){var x=_.id();if(_.isNode()){var k=_.degree(!0);k%2&&(l?u?s=!0:u=x:l=x),d[x]=[],_.connectedEdges().forEach(function(O){return d[x].push(O.id())})}else h[x]=[_.source().id(),_.target().id()]});var m={found:!1,trail:void 0};if(s)return m;if(u&&l)if(a){if(c&&u!=c)return m;c=u}else{if(c&&u!=c&&l!=c)return m;c||(c=u)}else c||(c=o[0].id());var g=function(x){for(var k=x,O=[x],p,I,N;d[k].length;)p=d[k].shift(),I=h[p][0],N=h[p][1],k!=N?(d[N]=d[N].filter(function(j){return j!=p}),k=N):!a&&k!=I&&(d[I]=d[I].filter(function(j){return j!=p}),k=I),O.unshift(p),O.unshift(k);return O},C=[],y=[];for(y=g(c);y.length!=1;)d[y[0]].length==0?(C.unshift(o.getElementById(y.shift())),C.unshift(o.getElementById(y.shift()))):y=g(y.shift()).concat(y);C.unshift(o.getElementById(y.shift()));for(var w in d)if(d[w].length)return m;return m.found=!0,m.trail=this.spawn(C,!0),m}},ll=function(){var e=this,t={},n=0,i=0,a=[],o=[],s={},l=function(h,m){for(var g=o.length-1,C=[],y=e.spawn();o[g].x!=h||o[g].y!=m;)C.push(o.pop().edge),g--;C.push(o.pop().edge),C.forEach(function(w){var _=w.connectedNodes().intersection(e);y.merge(w),_.forEach(function(x){var k=x.id(),O=x.connectedEdges().intersection(e);y.merge(x),t[k].cutVertex?y.merge(O.filter(function(p){return p.isLoop()})):y.merge(O)})}),a.push(y)},u=function d(h,m,g){h===g&&(i+=1),t[m]={id:n,low:n++,cutVertex:!1};var C=e.getElementById(m).connectedEdges().intersection(e);if(C.size()===0)a.push(e.spawn(e.getElementById(m)));else{var y,w,_,x;C.forEach(function(k){y=k.source().id(),w=k.target().id(),_=y===m?w:y,_!==g&&(x=k.id(),s[x]||(s[x]=!0,o.push({x:m,y:_,edge:k})),_ in t?t[m].low=Math.min(t[m].low,t[_].id):(d(h,_,m),t[m].low=Math.min(t[m].low,t[_].low),t[m].id<=t[_].low&&(t[m].cutVertex=!0,l(m,_))))})}};e.forEach(function(d){if(d.isNode()){var h=d.id();h in t||(i=0,u(h,h),t[h].cutVertex=i>1)}});var c=Object.keys(t).filter(function(d){return t[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(c),components:a}},u1={hopcroftTarjanBiconnected:ll,htbc:ll,htb:ll,hopcroftTarjanBiconnectedComponents:ll},ul=function(){var e=this,t={},n=0,i=[],a=[],o=e.spawn(e),s=function l(u){a.push(u),t[u]={index:n,low:n++,explored:!1};var c=e.getElementById(u).connectedEdges().intersection(e);if(c.forEach(function(C){var y=C.target().id();y!==u&&(y in t||l(y),t[y].explored||(t[u].low=Math.min(t[u].low,t[y].low)))}),t[u].index===t[u].low){for(var d=e.spawn();;){var h=a.pop();if(d.merge(e.getElementById(h)),t[h].low=t[u].index,t[h].explored=!0,h===u)break}var m=d.edgesWith(d),g=d.merge(m);i.push(g),o=o.difference(g)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in t||s(u)}}),{cut:o,components:i}},c1={tarjanStronglyConnected:ul,tsc:ul,tscc:ul,tarjanStronglyConnectedComponents:ul},ep={};[Lo,V0,z0,G0,W0,U0,Y0,wy,qa,Ga,tc,Ry,Uy,Jy,o1,l1,u1,c1].forEach(function(r){Tt(ep,r)});var tp=0,rp=1,np=2,gi=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=tp,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};gi.prototype={fulfill:function(e){return Ed(this,rp,"fulfillValue",e)},reject:function(e){return Ed(this,np,"rejectReason",e)},then:function(e,t){var n=this,i=new gi;return n.onFulfilled.push(Dd(e,i,"fulfill")),n.onRejected.push(Dd(t,i,"reject")),ip(n),i.proxy}};var Ed=function(e,t,n,i){return e.state===tp&&(e.state=t,e[n]=i,ip(e)),e},ip=function(e){e.state===rp?kd(e,"onFulfilled",e.fulfillValue):e.state===np&&kd(e,"onRejected",e.rejectReason)},kd=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var a=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},Dd=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var a;try{a=e(i)}catch(o){t.reject(o);return}f1(t,a)}}},f1=function r(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Er(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(a){i||(i=!0,a===t?e.reject(new TypeError("circular thenable chain")):r(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(t)};gi.all=function(r){return new gi(function(e,t){for(var n=new Array(r.length),i=0,a=function(l,u){n[l]=u,i++,i===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var l=r[s],u=l!=null&&l.then!=null;if(u)l.then(function(d){a(s,d)},function(d){t(d)});else{var c=l;a(s,c)}})(o)})};gi.resolve=function(r){return new gi(function(e,t){e(r)})};gi.reject=function(r){return new gi(function(e,t){t(r)})};var Ya=typeof Promise<"u"?Promise:gi,rc=function(e,t,n){var i=gc(e),a=!i,o=this._private=Tt({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&cr(o.complete)&&o.completes.push(o.complete),a){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(i){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},pa=rc.prototype;Tt(pa,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Cn(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,c){var d=e[u];d!=null&&(e[u]=e[c],e[c]=d)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=a,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Ya(function(i,a){n.push(function(){i()})})}});pa.complete=pa.completed;pa.run=pa.play;pa.running=pa.playing;var d1={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return!1;var o=i[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){var s=i[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this,l=!a,u=!l;if(!s.styleEnabled())return this;var c=s.style();t=Tt({},t,n);var d=Object.keys(t).length===0;if(d)return new rc(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(u&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),u&&t.renderedPosition!=null){var h=t.renderedPosition,m=s.pan(),g=s.zoom();t.position=Gh(h,g,m)}if(l&&t.panBy!=null){var C=t.panBy,y=s.pan();t.pan={x:y.x+C.x,y:y.y+C.y}}var w=t.center||t.centre;if(l&&w!=null){var _=s.getCenterPan(w.eles,t.zoom);_!=null&&(t.pan=_)}if(l&&t.fit!=null){var x=t.fit,k=s.getFitViewport(x.eles||x.boundingBox,x.padding);k!=null&&(t.pan=k.pan,t.zoom=k.zoom)}if(l&&$t(t.zoom)){var O=s.getZoomedViewport(t.zoom);O!=null?(O.zoomed&&(t.zoom=O.zoom),O.panned&&(t.pan=O.pan)):t.zoom=null}return new rc(o[0],t)}},animate:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=Tt({},t,n));for(var l=0;l<o.length;l++){var u=o[l],c=u.animated()&&(t.queue===void 0||t.queue),d=u.animation(t,c?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],c=u._private,d=c.animation.current,h=0;h<d.length;h++){var m=d[h],g=m._private;n&&(g.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},h1=Array.isArray,Hl=h1,p1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v1=/^\w*$/;function g1(r,e){if(Hl(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||$o(r)?!0:v1.test(r)||!p1.test(r)||e!=null&&r in Object(e)}var m1=g1,y1="[object AsyncFunction]",b1="[object Function]",C1="[object GeneratorFunction]",w1="[object Proxy]";function x1(r){if(!fa(r))return!1;var e=Rh(r);return e==b1||e==C1||e==y1||e==w1}var _1=x1,S1=Vl["__core-js_shared__"],zu=S1,Md=function(){var r=/[^.]+$/.exec(zu&&zu.keys&&zu.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function T1(r){return!!Md&&Md in r}var E1=T1,k1=Function.prototype,D1=k1.toString;function M1(r){if(r!=null){try{return D1.call(r)}catch{}try{return r+""}catch{}}return""}var P1=M1,A1=/[\\^$.*+?()[\]{}|]/g,I1=/^\[object .+?Constructor\]$/,B1=Function.prototype,R1=Object.prototype,O1=B1.toString,L1=R1.hasOwnProperty,F1=RegExp("^"+O1.call(L1).replace(A1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N1(r){if(!fa(r)||E1(r))return!1;var e=_1(r)?F1:I1;return e.test(P1(r))}var j1=N1;function V1(r,e){return r?.[e]}var z1=V1;function q1(r,e){var t=z1(r,e);return j1(t)?t:void 0}var Tc=q1,G1=Tc(Object,"create"),jo=G1;function H1(){this.__data__=jo?jo(null):{},this.size=0}var W1=H1;function $1(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var U1=$1,K1="__lodash_hash_undefined__",X1=Object.prototype,Y1=X1.hasOwnProperty;function Q1(r){var e=this.__data__;if(jo){var t=e[r];return t===K1?void 0:t}return Y1.call(e,r)?e[r]:void 0}var Z1=Q1,J1=Object.prototype,eb=J1.hasOwnProperty;function tb(r){var e=this.__data__;return jo?e[r]!==void 0:eb.call(e,r)}var rb=tb,nb="__lodash_hash_undefined__";function ib(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=jo&&e===void 0?nb:e,this}var ab=ib;function Qa(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Qa.prototype.clear=W1;Qa.prototype.delete=U1;Qa.prototype.get=Z1;Qa.prototype.has=rb;Qa.prototype.set=ab;var Pd=Qa;function ob(){this.__data__=[],this.size=0}var sb=ob;function lb(r,e){return r===e||r!==r&&e!==e}var ap=lb;function ub(r,e){for(var t=r.length;t--;)if(ap(r[t][0],e))return t;return-1}var Wl=ub,cb=Array.prototype,fb=cb.splice;function db(r){var e=this.__data__,t=Wl(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():fb.call(e,t,1),--this.size,!0}var hb=db;function pb(r){var e=this.__data__,t=Wl(e,r);return t<0?void 0:e[t][1]}var vb=pb;function gb(r){return Wl(this.__data__,r)>-1}var mb=gb;function yb(r,e){var t=this.__data__,n=Wl(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var bb=yb;function Za(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Za.prototype.clear=sb;Za.prototype.delete=hb;Za.prototype.get=vb;Za.prototype.has=mb;Za.prototype.set=bb;var Cb=Za,wb=Tc(Vl,"Map"),xb=wb;function _b(){this.size=0,this.__data__={hash:new Pd,map:new(xb||Cb),string:new Pd}}var Sb=_b;function Tb(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var Eb=Tb;function kb(r,e){var t=r.__data__;return Eb(e)?t[typeof e=="string"?"string":"hash"]:t.map}var $l=kb;function Db(r){var e=$l(this,r).delete(r);return this.size-=e?1:0,e}var Mb=Db;function Pb(r){return $l(this,r).get(r)}var Ab=Pb;function Ib(r){return $l(this,r).has(r)}var Bb=Ib;function Rb(r,e){var t=$l(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var Ob=Rb;function Ja(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ja.prototype.clear=Sb;Ja.prototype.delete=Mb;Ja.prototype.get=Ab;Ja.prototype.has=Bb;Ja.prototype.set=Ob;var op=Ja,Lb="Expected a function";function Ec(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(Lb);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=r.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(Ec.Cache||op),t}Ec.Cache=op;var Fb=Ec,Nb=500;function jb(r){var e=Fb(r,function(n){return t.size===Nb&&t.clear(),n}),t=e.cache;return e}var Vb=jb,zb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qb=/\\(\\)?/g,Gb=Vb(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(zb,function(t,n,i,a){e.push(i?a.replace(qb,"$1"):n||t)}),e}),sp=Gb;function Hb(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var lp=Hb,Wb=1/0,Ad=Wa?Wa.prototype:void 0,Id=Ad?Ad.toString:void 0;function up(r){if(typeof r=="string")return r;if(Hl(r))return lp(r,up)+"";if($o(r))return Id?Id.call(r):"";var e=r+"";return e=="0"&&1/r==-Wb?"-0":e}var $b=up;function Ub(r){return r==null?"":$b(r)}var cp=Ub;function Kb(r,e){return Hl(r)?r:m1(r,e)?[r]:sp(cp(r))}var fp=Kb,Xb=1/0;function Yb(r){if(typeof r=="string"||$o(r))return r;var e=r+"";return e=="0"&&1/r==-Xb?"-0":e}var kc=Yb;function Qb(r,e){e=fp(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[kc(e[t++])];return t&&t==n?r:void 0}var Zb=Qb;function Jb(r,e,t){var n=r==null?void 0:Zb(r,e);return n===void 0?t:n}var eC=Jb,tC=function(){try{var r=Tc(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Bd=tC;function rC(r,e,t){e=="__proto__"&&Bd?Bd(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var nC=rC,iC=Object.prototype,aC=iC.hasOwnProperty;function oC(r,e,t){var n=r[e];(!(aC.call(r,e)&&ap(n,t))||t===void 0&&!(e in r))&&nC(r,e,t)}var sC=oC,lC=9007199254740991,uC=/^(?:0|[1-9]\d*)$/;function cC(r,e){var t=typeof r;return e=e??lC,!!e&&(t=="number"||t!="symbol"&&uC.test(r))&&r>-1&&r%1==0&&r<e}var fC=cC;function dC(r,e,t,n){if(!fa(r))return r;e=fp(e,r);for(var i=-1,a=e.length,o=a-1,s=r;s!=null&&++i<a;){var l=kc(e[i]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=o){var c=s[l];u=n?n(c,l,s):void 0,u===void 0&&(u=fa(c)?c:fC(e[i+1])?[]:{})}sC(s,l,u),s=s[l]}return r}var hC=dC;function pC(r,e,t){return r==null?r:hC(r,e,t)}var vC=pC;function gC(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var mC=gC;function yC(r){return Hl(r)?lp(r,kc):$o(r)?[r]:mC(sp(cp(r)))}var bC=yC,CC={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=Tt({},t,e),function(i,a){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],c=l?s[0]:s;if(yt(i)){var d=i.indexOf(".")!==-1,h=d&&bC(i);if(o.allowGetting&&a===void 0){var m;return c&&(o.beforeGet(c),h&&c._private[o.field][i]===void 0?m=eC(c._private[o.field],h):m=c._private[o.field][i]),m}else if(o.allowSetting&&a!==void 0){var g=!o.immutableKeys[i];if(g){var C=_h({},i,a);o.beforeSet(s,C);for(var y=0,w=u.length;y<w;y++){var _=u[y];o.canSet(_)&&(h&&c._private[o.field][i]===void 0?vC(_._private[o.field],h,a):_._private[o.field][i]=a)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&$t(i)){var x=i,k,O,p=Object.keys(x);o.beforeSet(s,x);for(var I=0;I<p.length;I++){k=p[I],O=x[k];var N=!o.immutableKeys[k];if(N)for(var j=0;j<u.length;j++){var H=u[j];o.canSet(H)&&(H._private[o.field][k]=O)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&cr(i)){var G=i;s.on(o.bindingEvent,G)}else if(o.allowGetting&&i===void 0){var P;return c&&(o.beforeGet(c),P=c._private[o.field]),P}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Tt({},t,e),function(i){var a=e,o=this,s=o.length!==void 0,l=s?o:[o];if(yt(i)){for(var u=i.split(/\s+/),c=u.length,d=0;d<c;d++){var h=u[d];if(!Li(h)){var m=!a.immutableKeys[h];if(m)for(var g=0,C=l.length;g<C;g++)l[g]._private[a.field][h]=void 0}}a.triggerEvent&&o[a.triggerFnName](a.event)}else if(i===void 0){for(var y=0,w=l.length;y<w;y++)for(var _=l[y]._private[a.field],x=Object.keys(_),k=0;k<x.length;k++){var O=x[k],p=!a.immutableKeys[O];p&&(_[O]=void 0)}a.triggerEvent&&o[a.triggerFnName](a.event)}return o}}},wC={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var a=this,o=Array.prototype.slice.call(arguments,0);return new Ya(function(s,l){var u=function(m){a.off.apply(a,d),s(m)},c=o.concat([u]),d=c.concat([]);a.on.apply(a,c)})}}},Yt={};[d1,CC,wC].forEach(function(r){Tt(Yt,r)});var xC={animate:Yt.animate(),animation:Yt.animation(),animated:Yt.animated(),clearQueue:Yt.clearQueue(),delay:Yt.delay(),delayAnimation:Yt.delayAnimation(),stop:Yt.stop()},Cl={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(g){return n.push(g)}),n}else tr(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new Xa(e),o=0;o<t.length;o++){for(var s=t[o],l=s._private,u=l.classes,c=!1,d=0;d<e.length;d++){var h=e[d],m=u.has(h);if(!m){c=!0;break}}c||(c=u.size!==e.length),c&&(l.classes=a,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){tr(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,a=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,c=!1,d=0;d<e.length;d++){var h=e[d],m=u.has(h),g=!1;t||i&&!m?(u.add(h),g=!0):(!t||i&&m)&&(u.delete(h),g=!0),!c&&g&&(a.push(l),c=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Cl.className=Cl.classNames=Cl.classes;var Wt={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Tr,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Wt.variable="(?:[\\w-.]|(?:\\\\"+Wt.metaChar+"))+";Wt.className="(?:[\\w-]|(?:\\\\"+Wt.metaChar+"))+";Wt.value=Wt.string+"|"+Wt.number;Wt.id=Wt.variable;(function(){var r,e,t;for(r=Wt.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Wt.comparatorOp+="|@"+e;for(r=Wt.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Wt.comparatorOp+="|\\!"+e)})();var er=function(){return{checks:[]}},pt={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},nc=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return Om(r.selector,e.selector)}),_C=function(){for(var r={},e,t=0;t<nc.length;t++)e=nc[t],r[e.selector]=e.matches;return r}(),SC=function(e,t){return _C[e](t)},TC="("+nc.map(function(r){return r.selector}).join("|")+")",Ba=function(e){return e.replace(new RegExp("\\\\("+Wt.metaChar+")","g"),function(t,n){return n})},Ai=function(e,t,n){e[e.length-1]=n},ic=[{name:"group",query:!0,regex:"("+Wt.group+")",populate:function(e,t,n){var i=Cr(n,1),a=i[0];t.checks.push({type:pt.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:TC,populate:function(e,t,n){var i=Cr(n,1),a=i[0];t.checks.push({type:pt.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+Wt.id+")",populate:function(e,t,n){var i=Cr(n,1),a=i[0];t.checks.push({type:pt.ID,value:Ba(a)})}},{name:"className",query:!0,regex:"\\.("+Wt.className+")",populate:function(e,t,n){var i=Cr(n,1),a=i[0];t.checks.push({type:pt.CLASS,value:Ba(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Wt.variable+")\\s*\\]",populate:function(e,t,n){var i=Cr(n,1),a=i[0];t.checks.push({type:pt.DATA_EXIST,field:Ba(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Wt.variable+")\\s*("+Wt.comparatorOp+")\\s*("+Wt.value+")\\s*\\]",populate:function(e,t,n){var i=Cr(n,3),a=i[0],o=i[1],s=i[2],l=new RegExp("^"+Wt.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:pt.DATA_COMPARE,field:Ba(a),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Wt.boolOp+")\\s*("+Wt.variable+")\\s*\\]",populate:function(e,t,n){var i=Cr(n,2),a=i[0],o=i[1];t.checks.push({type:pt.DATA_BOOL,field:Ba(o),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Wt.meta+")\\s*("+Wt.comparatorOp+")\\s*("+Wt.number+")\\s*\\]\\]",populate:function(e,t,n){var i=Cr(n,3),a=i[0],o=i[1],s=i[2];t.checks.push({type:pt.META_COMPARE,field:Ba(a),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Wt.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=i,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=er();return s}},{name:"directedEdge",separator:!0,regex:Wt.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=er(),i=t,a=er();return n.checks.push({type:pt.DIRECTED_EDGE,source:i,target:a}),Ai(e,t,n),e.edgeCount++,a}else{var o=er(),s=t,l=er();return o.checks.push({type:pt.NODE_SOURCE,source:s,target:l}),Ai(e,t,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Wt.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=er(),i=t,a=er();return n.checks.push({type:pt.UNDIRECTED_EDGE,nodes:[i,a]}),Ai(e,t,n),e.edgeCount++,a}else{var o=er(),s=t,l=er();return o.checks.push({type:pt.NODE_NEIGHBOR,node:s,neighbor:l}),Ai(e,t,o),l}}},{name:"child",separator:!0,regex:Wt.child,populate:function(e,t){if(e.currentSubject==null){var n=er(),i=er(),a=e[e.length-1];return n.checks.push({type:pt.CHILD,parent:a,child:i}),Ai(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=er(),s=e[e.length-1],l=er(),u=er(),c=er(),d=er();return o.checks.push({type:pt.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:pt.TRUE}],d.checks.push({type:pt.TRUE}),l.checks.push({type:pt.PARENT,parent:d,child:c}),Ai(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var h=er(),m=er(),g=[{type:pt.PARENT,parent:h,child:m}];return h.checks=t.checks,t.checks=g,e.compoundCount++,m}}},{name:"descendant",separator:!0,regex:Wt.descendant,populate:function(e,t){if(e.currentSubject==null){var n=er(),i=er(),a=e[e.length-1];return n.checks.push({type:pt.DESCENDANT,ancestor:a,descendant:i}),Ai(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=er(),s=e[e.length-1],l=er(),u=er(),c=er(),d=er();return o.checks.push({type:pt.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:pt.TRUE}],d.checks.push({type:pt.TRUE}),l.checks.push({type:pt.ANCESTOR,ancestor:d,descendant:c}),Ai(e,s,o),e.currentSubject=u,e.compoundCount++,c}else{var h=er(),m=er(),g=[{type:pt.ANCESTOR,ancestor:h,descendant:m}];return h.checks=t.checks,t.checks=g,e.compoundCount++,m}}},{name:"subject",modifier:!0,regex:Wt.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Qt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===pt.DIRECTED_EDGE?i.type=pt.NODE_TARGET:a===pt.UNDIRECTED_EDGE&&(i.type=pt.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];ic.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var EC=function(e){for(var t,n,i,a=0;a<ic.length;a++){var o=ic[a],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,t=o,i=s;var u=l[0];e=e.substring(u.length);break}}return{expr:t,match:n,name:i,remaining:e}},kC=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},DC=function(e){var t=this,n=t.inputText=e,i=t[0]=er();for(t.length=1,n=kC(n);;){var a=EC(n);if(a.expr==null)return Qt("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),s=a.expr.populate(t,i,o);if(s===!1)return!1;if(s!=null&&(i=s),n=a.remaining,n.match(/^\s*$/))break}var l=t[t.length-1];t.currentSubject!=null&&(l.subject=t.currentSubject),l.edgeCount=t.edgeCount,l.compoundCount=t.compoundCount;for(var u=0;u<t.length;u++){var c=t[u];if(c.compoundCount>0&&c.edgeCount>0)return Qt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Qt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Qt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},MC=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return yt(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,d){var h=c.type,m=c.value;switch(h){case pt.GROUP:{var g=e(m);return g.substring(0,g.length-1)}case pt.DATA_COMPARE:{var C=c.field,y=c.operator;return"["+C+n(e(y))+t(m)+"]"}case pt.DATA_BOOL:{var w=c.operator,_=c.field;return"["+e(w)+_+"]"}case pt.DATA_EXIST:{var x=c.field;return"["+x+"]"}case pt.META_COMPARE:{var k=c.operator,O=c.field;return"[["+O+n(e(k))+t(m)+"]]"}case pt.STATE:return m;case pt.ID:return"#"+m;case pt.CLASS:return"."+m;case pt.PARENT:case pt.CHILD:return a(c.parent,d)+n(">")+a(c.child,d);case pt.ANCESTOR:case pt.DESCENDANT:return a(c.ancestor,d)+" "+a(c.descendant,d);case pt.COMPOUND_SPLIT:{var p=a(c.left,d),I=a(c.subject,d),N=a(c.right,d);return p+(p.length>0?" ":"")+I+N}case pt.TRUE:return""}},a=function(c,d){return c.checks.reduce(function(h,m,g){return h+(d===c&&g===0?"$":"")+i(m,d)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=a(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},PC={parse:DC,toString:MC},dp=function(e,t,n){var i,a=yt(e),o=at(e),s=yt(n),l,u,c=!1,d=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),d=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(a||s||c)&&(l=!a&&!o?"":""+e,u=""+n),c&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),t){case"*=":i=l.indexOf(u)>=0;break;case"$=":i=l.indexOf(u,l.length-u.length)>=0;break;case"^=":i=l.indexOf(u)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return d&&(e!=null||!h)&&(i=!i),i},AC=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},IC=function(e){return e!==void 0},Dc=function(e,t){return e.data(t)},BC=function(e,t){return e[t]()},pr=[],sr=function(e,t){return e.checks.every(function(n){return pr[n.type](n,t)})};pr[pt.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};pr[pt.STATE]=function(r,e){var t=r.value;return SC(t,e)};pr[pt.ID]=function(r,e){var t=r.value;return e.id()===t};pr[pt.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};pr[pt.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return dp(BC(e,t),n,i)};pr[pt.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return dp(Dc(e,t),n,i)};pr[pt.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return AC(Dc(e,t),n)};pr[pt.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,IC(Dc(e,t))};pr[pt.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),a=e.target();return sr(t,i)&&sr(n,a)||sr(n,i)&&sr(t,a)};pr[pt.NODE_NEIGHBOR]=function(r,e){return sr(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&sr(r.neighbor,t)})};pr[pt.DIRECTED_EDGE]=function(r,e){return sr(r.source,e.source())&&sr(r.target,e.target())};pr[pt.NODE_SOURCE]=function(r,e){return sr(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&sr(r.target,t)})};pr[pt.NODE_TARGET]=function(r,e){return sr(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&sr(r.source,t)})};pr[pt.CHILD]=function(r,e){return sr(r.child,e)&&sr(r.parent,e.parent())};pr[pt.PARENT]=function(r,e){return sr(r.parent,e)&&e.children().some(function(t){return sr(r.child,t)})};pr[pt.DESCENDANT]=function(r,e){return sr(r.descendant,e)&&e.ancestors().some(function(t){return sr(r.ancestor,t)})};pr[pt.ANCESTOR]=function(r,e){return sr(r.ancestor,e)&&e.descendants().some(function(t){return sr(r.descendant,t)})};pr[pt.COMPOUND_SPLIT]=function(r,e){return sr(r.subject,e)&&sr(r.left,e)&&sr(r.right,e)};pr[pt.TRUE]=function(){return!0};pr[pt.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};pr[pt.FILTER]=function(r,e){var t=r.value;return t(e)};var RC=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===pt.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(a){for(var o=0;o<t.length;o++){var s=t[o];if(sr(s,a))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},OC=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(sr(i,e))return!0}return!1},LC={matches:OC,filter:RC},ji=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||yt(e)&&e.match(/^\s*$/)||(Cn(e)?this.addQuery({checks:[{type:pt.COLLECTION,value:e.collection()}]}):cr(e)?this.addQuery({checks:[{type:pt.FILTER,value:e}]}):yt(e)?this.parse(e)||(this.invalid=!0):ur("A selector must be created from a string; found "))},Vi=ji.prototype;[PC,LC].forEach(function(r){return Tt(Vi,r)});Vi.text=function(){return this.inputText};Vi.size=function(){return this.length};Vi.eq=function(r){return this[r]};Vi.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};Vi.addQuery=function(r){this[this.length++]=r};Vi.selector=Vi.toString;var Ri={allAre:function(e){var t=new ji(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new ji(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Ri.allAreNeighbours=Ri.allAreNeighbors;Ri.has=Ri.contains;Ri.equal=Ri.equals=Ri.same;var Dn=function(e,t){return function(i,a,o,s){var l=i,u=this,c;if(l==null?c="":Cn(l)&&l.length===1&&(c=l.id()),u.length===1&&c){var d=u[0]._private,h=d.traversalCache=d.traversalCache||{},m=h[t]=h[t]||[],g=Fi(c),C=m[g];return C||(m[g]=e.call(u,i,a,o,s))}else return e.call(u,i,a,o,s)}},Ka={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],o=a._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],a=i.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:Dn(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var a=0;a<i.length;a++){var o=i[a];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function Mc(r,e,t,n){for(var i=[],a=new Xa,o=r.cy(),s=o.hasCompoundNodes(),l=0;l<r.length;l++){var u=r[l];t?i.push(u):s&&n(i,a,u)}for(;i.length>0;){var c=i.shift();e(c),a.add(c.id()),s&&n(i,a,c)}return r}function hp(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||r.push(a)}}Ka.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mc(this,r,e,hp)};function pp(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Ka.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mc(this,r,e,pp)};function FC(r,e,t){pp(r,e,t),hp(r,e,t)}Ka.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mc(this,r,e,FC)};Ka.ancestors=Ka.parents;var Vo,vp;Vo=vp={data:Yt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Yt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Yt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Yt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Yt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Yt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Vo.attr=Vo.data;Vo.removeAttr=Vo.removeData;var NC=vp,Ul={};function qu(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}Tt(Ul,{degree:qu(function(r,e){return e.source().same(e.target())?2:1}),indegree:qu(function(r,e){return e.target().same(r)?1:0}),outdegree:qu(function(r,e){return e.source().same(r)?1:0})});function Ra(r,e){return function(t){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Tt(Ul,{minDegree:Ra("degree",function(r,e){return r<e}),maxDegree:Ra("degree",function(r,e){return r>e}),minIndegree:Ra("indegree",function(r,e){return r<e}),maxIndegree:Ra("indegree",function(r,e){return r>e}),minOutdegree:Ra("outdegree",function(r,e){return r<e}),maxOutdegree:Ra("outdegree",function(r,e){return r>e})});Tt(Ul,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var jn,gp,mp=function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var o=a._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};a.isParent()&&!(s.x===0&&s.y===0)&&a.children().shift(s,n),a.dirtyBoundingBoxCache()}}},Rd={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){mp(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};jn=gp={position:Yt.data(Rd),silentPosition:Yt.data(Tt({},Rd,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){mp(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if($t(e))t?this.silentPosition(e):this.position(e);else if(cr(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=void 0;(s=n(o,a))&&(t?o.silentPosition(s):o.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if($t(e)?(i={x:at(e.x)?e.x:0,y:at(e.y)?e.y:0},n=t):yt(e)&&at(t)&&(i={x:0,y:0},i[e]=t),i!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(a.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+i.x,y:l.y+i.y};n?s.silentPosition(u):s.position(u)}}a.endBatch()}return this},silentShift:function(e,t){return $t(e)?this.shift(e,!0):yt(e)&&at(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=$t(e)?e:void 0,l=s!==void 0||t!==void 0&&yt(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var c=this[u];t!==void 0?c.position(e,(t-o[e])/a):s!==void 0&&c.position(Gh(s,a,o))}else{var d=n.position();return s=ql(d,a,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),a=$t(e)?e:void 0,o=a!==void 0||t!==void 0&&yt(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],c=s?u.parent():null,d=c&&c.length>0,h=d;d&&(c=c[0]);var m=h?c.position():{x:0,y:0};t!==void 0?u.position(e,t+m[e]):a!==void 0&&u.position({x:a.x+m.x,y:a.y+m.y})}else{var g=n.position(),C=s?n.parent():null,y=C&&C.length>0,w=y;y&&(C=C[0]);var _=w?C.position():{x:0,y:0};return a={x:g.x-_.x,y:g.y-_.y},e===void 0?a:a[e]}else if(!o)return;return this}};jn.modelPosition=jn.point=jn.position;jn.modelPositions=jn.points=jn.positions;jn.renderedPoint=jn.renderedPosition;jn.relativePoint=jn.relativePosition;var jC=gp,Ha,Hi;Ha=Hi={};Hi.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),a=e.x1*n+i.x,o=e.x2*n+i.x,s=e.y1*n+i.y,l=e.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}};Hi.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Hi.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},d=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),h=s.position;(d.w===0||d.h===0)&&(d={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},d.x1=h.x-d.w/2,d.x2=h.x+d.w/2,d.y1=h.y-d.h/2,d.y2=h.y+d.h/2);function m(j,H,G){var P=0,z=0,A=H+G;return j>0&&A>0&&(P=H/A*j,z=G/A*j),{biasDiff:P,biasComplementDiff:z}}function g(j,H,G,P){if(G.units==="%")switch(P){case"width":return j>0?G.pfValue*j:0;case"height":return H>0?G.pfValue*H:0;case"average":return j>0&&H>0?G.pfValue*(j+H)/2:0;case"min":return j>0&&H>0?j>H?G.pfValue*H:G.pfValue*j:0;case"max":return j>0&&H>0?j>H?G.pfValue*j:G.pfValue*H:0;default:return 0}else return G.units==="px"?G.pfValue:0}var C=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(C=C*100/c.width.val);var y=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(y=y*100/c.width.val);var w=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(w=w*100/c.height.val);var _=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(_=_*100/c.height.val);var x=m(c.width.val-d.w,C,y),k=x.biasDiff,O=x.biasComplementDiff,p=m(c.height.val-d.h,w,_),I=p.biasDiff,N=p.biasComplementDiff;s.autoPadding=g(d.w,d.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(d.w,c.width.val),h.x=(-k+d.x1+d.x2+O)/2,s.autoHeight=Math.max(d.h,c.height.val),h.y=(-I+d.y1+d.y2+N)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||r)&&(t(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var kn=function(e){return e===1/0||e===-1/0?0:e},Fn=function(e,t,n,i,a){i-t===0||a-n===0||t==null||n==null||i==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},sa=function(e,t){return t==null?e:Fn(e,t.x1,t.y1,t.x2,t.y2)},bo=function(e,t,n){return Nn(e,t,n)},cl=function(e,t,n){if(!t.cy().headless()){var i=t._private,a=i.rstyle,o=a.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=a.srcX,u=a.srcY):n==="target"?(l=a.tgtX,u=a.tgtY):(l=a.midX,u=a.midY);var c=i.arrowBounds=i.arrowBounds||{},d=c[n]=c[n]||{};d.x1=l-o,d.y1=u-o,d.x2=l+o,d.y2=u+o,d.w=d.x2-d.x1,d.h=d.y2-d.y1,yl(d,1),Fn(e,d.x1,d.y1,d.x2,d.y2)}}},Gu=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var a=t._private,o=a.rstyle,s=t.pstyle(i+"label").strValue;if(s){var l=t.pstyle("text-halign"),u=t.pstyle("text-valign"),c=bo(o,"labelWidth",n),d=bo(o,"labelHeight",n),h=bo(o,"labelX",n),m=bo(o,"labelY",n),g=t.pstyle(i+"text-margin-x").pfValue,C=t.pstyle(i+"text-margin-y").pfValue,y=t.isEdge(),w=t.pstyle(i+"text-rotation"),_=t.pstyle("text-outline-width").pfValue,x=t.pstyle("text-border-width").pfValue,k=x/2,O=t.pstyle("text-background-padding").pfValue,p=2,I=d,N=c,j=N/2,H=I/2,G,P,z,A;if(y)G=h-j,P=h+j,z=m-H,A=m+H;else{switch(l.value){case"left":G=h-N,P=h;break;case"center":G=h-j,P=h+j;break;case"right":G=h,P=h+N;break}switch(u.value){case"top":z=m-I,A=m;break;case"center":z=m-H,A=m+H;break;case"bottom":z=m,A=m+I;break}}var T=g-Math.max(_,k)-O-p,E=g+Math.max(_,k)+O+p,M=C-Math.max(_,k)-O-p,L=C+Math.max(_,k)+O+p;G+=T,P+=E,z+=M,A+=L;var F=n||"main",X=a.labelBounds,K=X[F]=X[F]||{};K.x1=G,K.y1=z,K.x2=P,K.y2=A,K.w=P-G,K.h=A-z,K.leftPad=T,K.rightPad=E,K.topPad=M,K.botPad=L;var Y=y&&w.strValue==="autorotate",ae=w.pfValue!=null&&w.pfValue!==0;if(Y||ae){var he=Y?bo(a.rstyle,"labelAngle",n):w.pfValue,be=Math.cos(he),me=Math.sin(he),we=(G+P)/2,xe=(z+A)/2;if(!y){switch(l.value){case"left":we=P;break;case"right":we=G;break}switch(u.value){case"top":xe=A;break;case"bottom":xe=z;break}}var oe=function(Ke,qe){return Ke=Ke-we,qe=qe-xe,{x:Ke*be-qe*me+we,y:Ke*me+qe*be+xe}},$=oe(G,z),Q=oe(G,A),J=oe(P,z),le=oe(P,A);G=Math.min($.x,Q.x,J.x,le.x),P=Math.max($.x,Q.x,J.x,le.x),z=Math.min($.y,Q.y,J.y,le.y),A=Math.max($.y,Q.y,J.y,le.y)}var de=F+"Rot",je=X[de]=X[de]||{};je.x1=G,je.y1=z,je.x2=P,je.y2=A,je.w=P-G,je.h=A-z,Fn(e,G,z,P,A),Fn(a.labelBounds.all,G,z,P,A)}return e}},VC=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(n>0&&i>0){var a=t.pstyle("outline-offset").value,o=t.pstyle("shape").value,s=i+a,l=(e.w+s*2)/e.w,u=(e.h+s*2)/e.h,c=0,d=0;["diamond","pentagon","round-triangle"].includes(o)?(l=(e.w+s*2.4)/e.w,d=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?l=(e.w+s*2.4)/e.w:o==="star"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.6)/e.h,d=-s/3.8):o==="triangle"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.4)/e.h,d=-s/1.4):o==="vee"&&(l=(e.w+s*4.4)/e.w,u=(e.h+s*3.8)/e.h,d=-s*.5);var h=e.h*u-e.h,m=e.w*l-e.w;if(bl(e,[Math.ceil(h/2),Math.ceil(m/2)]),c!=0||d!==0){var g=sy(e,c,d);Wh(e,g)}}}},zC=function(e,t){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),o=pn(),s=e._private,l=e.isNode(),u=e.isEdge(),c,d,h,m,g,C,y=s.rstyle,w=l&&i?e.pstyle("bounds-expansion").pfValue:[0],_=function(it){return it.pstyle("display").value!=="none"},x=!i||_(e)&&(!u||_(e.source())&&_(e.target()));if(x){var k=0,O=0;i&&t.includeOverlays&&(k=e.pstyle("overlay-opacity").value,k!==0&&(O=e.pstyle("overlay-padding").value));var p=0,I=0;i&&t.includeUnderlays&&(p=e.pstyle("underlay-opacity").value,p!==0&&(I=e.pstyle("underlay-padding").value));var N=Math.max(O,I),j=0,H=0;if(i&&(j=e.pstyle("width").pfValue,H=j/2),l&&t.includeNodes){var G=e.position();g=G.x,C=G.y;var P=e.outerWidth(),z=P/2,A=e.outerHeight(),T=A/2;c=g-z,d=g+z,h=C-T,m=C+T,Fn(o,c,h,d,m),i&&t.includeOutlines&&VC(o,e)}else if(u&&t.includeEdges)if(i&&!a){var E=e.pstyle("curve-style").strValue;if(c=Math.min(y.srcX,y.midX,y.tgtX),d=Math.max(y.srcX,y.midX,y.tgtX),h=Math.min(y.srcY,y.midY,y.tgtY),m=Math.max(y.srcY,y.midY,y.tgtY),c-=H,d+=H,h-=H,m+=H,Fn(o,c,h,d,m),E==="haystack"){var M=y.haystackPts;if(M&&M.length===2){if(c=M[0].x,h=M[0].y,d=M[1].x,m=M[1].y,c>d){var L=c;c=d,d=L}if(h>m){var F=h;h=m,m=F}Fn(o,c-H,h-H,d+H,m+H)}}else if(E==="bezier"||E==="unbundled-bezier"||E.endsWith("segments")||E.endsWith("taxi")){var X;switch(E){case"bezier":case"unbundled-bezier":X=y.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":X=y.linePts;break}if(X!=null)for(var K=0;K<X.length;K++){var Y=X[K];c=Y.x-H,d=Y.x+H,h=Y.y-H,m=Y.y+H,Fn(o,c,h,d,m)}}}else{var ae=e.source(),he=ae.position(),be=e.target(),me=be.position();if(c=he.x,d=me.x,h=he.y,m=me.y,c>d){var we=c;c=d,d=we}if(h>m){var xe=h;h=m,m=xe}c-=H,d+=H,h-=H,m+=H,Fn(o,c,h,d,m)}if(i&&t.includeEdges&&u&&(cl(o,e,"mid-source"),cl(o,e,"mid-target"),cl(o,e,"source"),cl(o,e,"target")),i){var oe=e.pstyle("ghost").value==="yes";if(oe){var $=e.pstyle("ghost-offset-x").pfValue,Q=e.pstyle("ghost-offset-y").pfValue;Fn(o,o.x1+$,o.y1+Q,o.x2+$,o.y2+Q)}}var J=s.bodyBounds=s.bodyBounds||{};hd(J,o),bl(J,w),yl(J,1),i&&(c=o.x1,d=o.x2,h=o.y1,m=o.y2,Fn(o,c-N,h-N,d+N,m+N));var le=s.overlayBounds=s.overlayBounds||{};hd(le,o),bl(le,w),yl(le,1);var de=s.labelBounds=s.labelBounds||{};de.all!=null?oy(de.all):de.all=pn(),i&&t.includeLabels&&(t.includeMainLabels&&Gu(o,e,null),u&&(t.includeSourceLabels&&Gu(o,e,"source"),t.includeTargetLabels&&Gu(o,e,"target")))}return o.x1=kn(o.x1),o.y1=kn(o.y1),o.x2=kn(o.x2),o.y2=kn(o.y2),o.w=kn(o.x2-o.x1),o.h=kn(o.y2-o.y1),o.w>0&&o.h>0&&x&&(bl(o,w),yl(o,1)),o},yp=function(e){var t=0,n=function(o){return(o?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},bp=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),i=function(o){return Math.round(o)};return k0([i(t.x),i(t.y),i(n.x),i(n.y)])}else return 0},Od=function(e,t){var n=e._private,i,a=e.isEdge(),o=t==null?Ld:yp(t),s=o===Ld,l=bp(e),u=n.bbCachePosKey===l,c=t.useCache&&u,d=function(C){return C._private.bbCache==null||C._private.styleDirty},h=!c||d(e)||a&&(d(e.source())||d(e.target()));if(h?(u||e.recalculateRenderedStyle(c),i=zC(e,zo),n.bbCache=i,n.bbCachePosKey=l):i=n.bbCache,!s){var m=e.isNode();i=pn(),(t.includeNodes&&m||t.includeEdges&&!m)&&(t.includeOverlays?sa(i,n.overlayBounds):sa(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?sa(i,n.labelBounds.all):(t.includeMainLabels&&sa(i,n.labelBounds.mainRot),t.includeSourceLabels&&sa(i,n.labelBounds.sourceRot),t.includeTargetLabels&&sa(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},zo={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Ld=yp(zo),Fd=Ir(zo);Hi.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=zo:r=Fd(r),e=Od(this[0],r);else{e=pn(),r=r||zo;var t=Fd(r),n=this,i=n.cy(),a=i.styleEnabled();if(a)for(var o=0;o<n.length;o++){var s=n[o],l=s._private,u=bp(s),c=l.bbCachePosKey===u,d=t.useCache&&c&&!l.styleDirty;s.recalculateRenderedStyle(d)}this.updateCompoundBounds(!r.useCache);for(var h=0;h<n.length;h++){var m=n[h];sa(e,Od(m,t))}}return e.x1=kn(e.x1),e.y1=kn(e.y1),e.x2=kn(e.x2),e.y2=kn(e.y2),e.w=kn(e.x2-e.x1),e.h=kn(e.y2-e.y1),e};Hi.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Hi.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(u){return u.isParent()}),e=e.not(i)),$t(r)){var a=r;r=function(){return a}}var o=function(c,d){return c._private.bbAtOldPos=r(c,d)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var l=ay(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),l};Ha.boundingbox=Ha.bb=Ha.boundingBox;Ha.renderedBoundingbox=Ha.renderedBoundingBox;var qC=Hi,ko,Xo;ko=Xo={};var Cp=function(e){e.uppercaseName=od(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=od(e.outerName),ko[e.name]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},ko["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-width").pfValue,u=2*n.padding();return s+l+u}else return 1},ko["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},ko["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};Cp({name:"width"});Cp({name:"height"});Xo.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Xo.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Xo.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var GC=Xo,HC=function(e,t){if(e.isEdge())return t(e)},WC=function(e,t){if(e.isEdge()){var n=e.cy();return ql(t(e),n.zoom(),n.pan())}},$C=function(e,t){if(e.isEdge()){var n=e.cy(),i=n.pan(),a=n.zoom();return t(e).map(function(o){return ql(o,a,i)})}},UC=function(e){return e.renderer().getControlPoints(e)},KC=function(e){return e.renderer().getSegmentPoints(e)},XC=function(e){return e.renderer().getSourceEndpoint(e)},YC=function(e){return e.renderer().getTargetEndpoint(e)},QC=function(e){return e.renderer().getEdgeMidpoint(e)},Nd={controlPoints:{get:UC,mult:!0},segmentPoints:{get:KC,mult:!0},sourceEndpoint:{get:XC},targetEndpoint:{get:YC},midpoint:{get:QC}},ZC=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},JC=Object.keys(Nd).reduce(function(r,e){var t=Nd[e],n=ZC(e);return r[e]=function(){return HC(this,t.get)},t.mult?r[n]=function(){return $C(this,t.get)}:r[n]=function(){return WC(this,t.get)},r},{}),ew=Tt({},jC,qC,GC,JC);var wp=function(e,t){this.recycle(e,t)};function Co(){return!1}function fl(){return!0}wp.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Co,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?fl:Co):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=fl;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=fl;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=fl,this.stopPropagation()},isDefaultPrevented:Co,isPropagationStopped:Co,isImmediatePropagationStopped:Co};var xp=/^([^.]+)(\.(?:[^.]+))?$/,tw=".*",_p={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},jd=Object.keys(_p),rw={};function Kl(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rw,e=arguments.length>1?arguments[1]:void 0,t=0;t<jd.length;t++){var n=jd[t];this[n]=r[n]||_p[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var zi=Kl.prototype,Sp=function(e,t,n,i,a,o,s){cr(i)&&(a=i,i=null),s&&(o==null?o=s:o=Tt({},o,s));for(var l=tr(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var c=l[u];if(!Li(c)){var d=c.match(xp);if(d){var h=d[1],m=d[2]?d[2]:null,g=t(e,c,h,m,i,a,o);if(g===!1)break}}}},Vd=function(e,t){return e.addEventFields(e.context,t),new wp(t.type,t)},nw=function(e,t,n){if(Sm(n)){t(e,n);return}else if($t(n)){t(e,Vd(e,n));return}for(var i=tr(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var o=i[a];if(!Li(o)){var s=o.match(xp);if(s){var l=s[1],u=s[2]?s[2]:null,c=Vd(e,{type:l,namespace:u,target:e.context});t(e,c)}}}};zi.on=zi.addListener=function(r,e,t,n,i){return Sp(this,function(a,o,s,l,u,c,d){cr(c)&&a.listeners.push({event:o,callback:c,type:s,namespace:l,qualifier:u,conf:d})},r,e,t,n,i),this};zi.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};zi.removeListener=zi.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=I0(this.listeners));for(var a=this.listeners,o=function(u){var c=a[u];Sp(i,function(d,h,m,g,C,y){if((c.type===m||r==="*")&&(!g&&c.namespace!==".*"||c.namespace===g)&&(!C||d.qualifierCompare(c.qualifier,C))&&(!y||c.callback===y))return a.splice(u,1),!1},r,e,t,n)},s=a.length-1;s>=0;s--)o(s);return this};zi.removeAllListeners=function(){return this.removeListener("*")};zi.emit=zi.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,tr(e)||(e=[e]),nw(this,function(a,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],i=n.length);for(var s=function(c){var d=n[c];if(d.type===o.type&&(!d.namespace||d.namespace===o.namespace||d.namespace===tw)&&a.eventMatches(a.context,d,o)){var h=[o];e!=null&&R0(h,e),a.beforeEmit(a.context,d,o),d.conf&&d.conf.one&&(a.listeners=a.listeners.filter(function(C){return C!==d}));var m=a.callbackContext(a.context,d,o),g=d.callback.apply(m,h);a.afterEmit(a.context,d,o),g===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<i;l++)s(l);a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},r),this.emitting--,this};var iw={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Wo(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},dl=function(e){return yt(e)?new ji(e):e},Tp={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Kl(iw,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=dl(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=dl(t),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=dl(t),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=dl(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Yt.eventAliasesOn(Tp);var Ep={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(yt(e)||Cn(e))return new ji(e).filter(this);if(cr(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){yt(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(yt(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,a=e,o=this.length<e.length,s=o?i:a,l=o?a:i,u=0;u<s.length;u++){var c=s[u];l.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;yt(e)&&(e=t.$(e));var n=this.spawn(),i=this,a=e,o=function(l,u){for(var c=0;c<l.length;c++){var d=l[c],h=d._private.data.id,m=u.hasElementWithId(h);m||n.push(d)}};return o(i,a),o(a,i),n},diff:function(e){var t=this._private.cy;yt(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),o=this,s=e,l=function(c,d,h){for(var m=0;m<c.length;m++){var g=c[m],C=g._private.data.id,y=d.hasElementWithId(C);y?a.merge(g):h.push(g)}};return l(o,s,n),l(s,o,i),{left:n,right:i,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(yt(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],s=!this.has(o);s&&i.push(o)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&yt(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=t.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!a.has(l);if(u){var c=this.length++;this[c]=s,a.set(l,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,a.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,a=i.get(n);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&yt(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,t){for(var n=-1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],l=t?e.apply(t,[s,o,a]):e(s,o,a);l>n&&(n=l,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],l=t?e.apply(t,[s,o,a]):e(s,o,a);l<n&&(n=l,i=s)}return{value:n,ele:i}}},Xt=Ep;Xt.u=Xt["|"]=Xt["+"]=Xt.union=Xt.or=Xt.add;Xt["\\"]=Xt["!"]=Xt["-"]=Xt.difference=Xt.relativeComplement=Xt.subtract=Xt.not;Xt.n=Xt["&"]=Xt["."]=Xt.and=Xt.intersection=Xt.intersect;Xt["^"]=Xt["(+)"]=Xt["(-)"]=Xt.symmetricDifference=Xt.symdiff=Xt.xor;Xt.fnFilter=Xt.filterFn=Xt.stdFilter=Xt.filter;Xt.complement=Xt.abscomp=Xt.absoluteComplement;var aw={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},kp=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function a(c){var d=c.pstyle("z-compound-depth");return d.value==="auto"?i?c.zDepth():0:d.value==="bottom"?-1:d.value==="top"?yc:0}var o=a(e)-a(t);if(o!==0)return o;function s(c){var d=c.pstyle("z-index-compare");return d.value==="auto"&&c.isNode()?1:0}var l=s(e)-s(t);if(l!==0)return l;var u=e.pstyle("z-index").value-t.pstyle("z-index").value;return u!==0?u:e.poolIndex()-t.poolIndex()},Bl={forEach:function(e,t){if(cr(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var a=e;a>=0&&a<t&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!cr(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(kp)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:yc-1}else{var a=t.source,o=t.target,s=a.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};Bl.each=Bl.forEach;var ow=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Er(Symbol))!=e&&Er(Symbol.iterator)!=e;t&&(Bl[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,o=this.length;return _h({next:function(){return a<o?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};ow();var sw=Ir({nodeDimensionsIncludeLabels:!1}),wl={layoutDimensions:function(e){e=sw(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(O){return!O.isParent()}),a=this.cy(),o=t.eles,s=function(p){return p.id()},l=Bo(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(p,I,N){var j={x:I.x1+I.w/2,y:I.y1+I.h/2},H={x:(N.x-j.x)*p,y:(N.y-j.y)*p};return{x:j.x+H.x,y:j.y+H.y}},c=t.spacingFactor&&t.spacingFactor!==1,d=function(){if(!c)return null;for(var p=pn(),I=0;I<i.length;I++){var N=i[I],j=l(N,I);ly(p,j.x,j.y)}return p},h=d(),m=Bo(function(O,p){var I=l(O,p);if(c){var N=Math.abs(t.spacingFactor);I=u(N,h,I)}return t.transform!=null&&(I=t.transform(O,I)),I},s);if(t.animate){for(var g=0;g<i.length;g++){var C=i[g],y=m(C,g),w=t.animateFilter==null||t.animateFilter(C,g);if(w){var _=C.animation({position:y,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}else C.position(y)}if(t.fit){var x=a.animation({fit:{boundingBox:o.boundingBoxAt(m),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}else if(t.zoom!==void 0&&t.pan!==void 0){var k=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(k)}e.animations.forEach(function(O){return O.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Ya.all(e.animations.map(function(O){return O.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(m),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(Tt({},e,{eles:this}))}};wl.createLayout=wl.makeLayout=wl.layout;function Dp(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],a;return(a=i[r])!=null||(a=i[r]=e(t)),a}function Xl(r,e){return r=Fi(r),function(n){return Dp(r,e,n)}}function Yl(r,e){r=Fi(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return Dp(r,t,i)}}var Lr={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var a=n._private.style[e];return a??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if($t(e)){var o=e;a.applyBypass(this,o,i),this.emitAndNotify("style")}else if(yt(e))if(t===void 0){var s=this[0];return s?a.getStylePropertyValue(s,e):void 0}else a.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?a.getRawStyle(l):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var s=a[o];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<a.length;l++){var u=a[l];i.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!t)return a;var o=i.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;a=u*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Hu(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function Pc(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var s=a._private;if(!e(a))return!1;if(a.isNode())return!o||Hu(a,n);var l=s.source,u=s.target;return t(l)&&(!o||Hu(l,t))&&(l===u||t(u)&&(!o||Hu(u,t)))}}}var eo=Xl("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Lr.takesUpSpace=Yl("takesUpSpace",Pc({ok:eo}));var lw=Xl("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&eo(r)}),uw=Xl("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&eo(r)});Lr.interactive=Yl("interactive",Pc({ok:lw,parentOk:uw,edgeOkViaNode:eo}));Lr.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var cw=Xl("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&eo(r)}),fw=eo;Lr.visible=Yl("visible",Pc({ok:cw,edgeOkViaNode:fw}));Lr.hidden=function(){var r=this[0];if(r)return!r.visible()};Lr.isBundledBezier=Yl("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Lr.bypass=Lr.css=Lr.style;Lr.renderedCss=Lr.renderedStyle;Lr.removeBypass=Lr.removeCss=Lr.removeStyle;Lr.pstyle=Lr.parsedStyle;var Oi={};function zd(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&cr(e[0])){var a=e[0];this.on(r.event,a)}else if(e.length===0||e.length===1&&tr(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!r.ableField||l._private[r.ableField],c=l._private[r.field]!=r.value;if(r.overrideAble){var d=r.overrideAble(l);if(d!==void 0&&(u=d,!d))return this}u&&(l._private[r.field]=r.value,c&&t.push(l))}var h=this.spawn(t);h.updateStyle(),h.emit(r.event),o&&h.emit(o)}return this}}function to(r){Oi[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},Oi[r.on]=zd({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),Oi[r.off]=zd({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}to({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});to({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});to({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});to({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Oi.deselect=Oi.unselect;Oi.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};to({field:"active",on:"activate",off:"unactivate"});to({field:"pannable",on:"panify",off:"unpanify"});Oi.inactive=function(){var r=this[0];if(r)return!r._private.active};var Ur={},qd=function(e){return function(n){for(var i=this,a=[],o=0;o<i.length;o++){var s=i[o];if(s.isNode()){for(var l=!1,u=s.connectedEdges(),c=0;c<u.length;c++){var d=u[c],h=d.source(),m=d.target();if(e.noIncomingEdges&&m===s&&h!==s||e.noOutgoingEdges&&h===s&&m!==s){l=!0;break}}l||a.push(s)}}return this.spawn(a,!0).filter(n)}},Gd=function(e){return function(t){for(var n=this,i=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.source(),d=u.target();e.outgoing&&c===o?(i.push(u),i.push(d)):e.incoming&&d===o&&(i.push(u),i.push(c))}}return this.spawn(i,!0).filter(t)}},Hd=function(e){return function(t){for(var n=this,i=[],a={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],c=u.id();a[c]||(a[c]=!0,i.push(u),s=!0)}if(!s)break;n=o}return this.spawn(i,!0).filter(t)}};Ur.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};Tt(Ur,{roots:qd({noIncomingEdges:!0}),leaves:qd({noOutgoingEdges:!0}),outgoers:Dn(Gd({outgoing:!0}),"outgoers"),successors:Hd({outgoing:!0}),incomers:Dn(Gd({incoming:!0}),"incomers"),predecessors:Hd({incoming:!0})});Tt(Ur,{neighborhood:Dn(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ur.neighbourhood=Ur.neighborhood;Ur.closedNeighbourhood=Ur.closedNeighborhood;Ur.openNeighbourhood=Ur.openNeighborhood;Tt(Ur,{source:Dn(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:Dn(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Wd({attr:"source"}),targets:Wd({attr:"target"})});function Wd(r){return function(t){for(var n=[],i=0;i<this.length;i++){var a=this[i],o=a._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}Tt(Ur,{edgesWith:Dn($d(),"edgesWith"),edgesTo:Dn($d({thisIsSrc:!0}),"edgesTo")});function $d(r){return function(t){var n=[],i=this._private.cy,a=r||{};yt(t)&&(t=i.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data,d=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),m=d||h;m&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!d||a.thisIsTgt&&!h)||n.push(u))}return this.spawn(n,!0)}}Tt(Ur,{connectedEdges:Dn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:Dn(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:Dn(Ud(),"parallelEdges"),codirectedEdges:Dn(Ud({codirected:!0}),"codirectedEdges")});function Ud(r){var e={codirected:!1};return r=Tt({},e,r),function(n){for(var i=[],a=this.edges(),o=r,s=0;s<a.length;s++)for(var l=a[s],u=l._private,c=u.source,d=c._private.data.id,h=u.data.target,m=c._private.edges,g=0;g<m.length;g++){var C=m[g],y=C._private.data,w=y.target,_=y.source,x=w===h&&_===d,k=d===w&&h===_;(o.codirected&&x||!o.codirected&&(x||k))&&i.push(C)}return this.spawn(i,!0).filter(n)}}Tt(Ur,{components:function(e){var t=this,n=t.cy(),i=n.collection(),a=e==null?t.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var s=function(c,d){i.merge(c),a.unmerge(c),d.merge(c)};if(a.empty())return t.spawn();var l=function(){var c=n.collection();o.push(c);var d=a[0];s(d,c),t.bfs({directed:!1,roots:d,visit:function(m){return s(m,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(m){t.has(m)&&c.has(m.source())&&c.has(m.target())&&c.merge(m)})})};do l();while(a.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ur.componentsOf=Ur.components;var Fr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){ur("A collection must have a reference to the core");return}var a=new ei,o=!1;if(!t)t=[];else if(t.length>0&&$t(t[0])&&!Wo(t[0])){o=!0;for(var s=[],l=new Xa,u=0,c=t.length;u<c;u++){var d=t[u];d.data==null&&(d.data={});var h=d.data;if(h.id==null)h.id=zh();else if(e.hasElementWithId(h.id)||l.has(h.id))continue;var m=new zl(e,d,!1);s.push(m),l.add(h.id)}t=s}this.length=0;for(var g=0,C=t.length;g<C;g++){var y=t[g][0];if(y!=null){var w=y._private.data.id;(!n||!a.has(w))&&(n&&a.set(w,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(_){this.lazyMap=_},rebuildMap:function(){for(var x=this.lazyMap=new ei,k=this.eles,O=0;O<k.length;O++){var p=k[O];x.set(p.id(),{index:O,ele:p})}}},n&&(this._private.map=a),o&&!i&&this.restore()},ir=zl.prototype=Fr.prototype=Object.create(Array.prototype);ir.instanceString=function(){return"collection"};ir.spawn=function(r,e){return new Fr(this.cy(),r,e)};ir.spawnSelf=function(){return this.spawn(this)};ir.cy=function(){return this._private.cy};ir.renderer=function(){return this._private.cy.renderer()};ir.element=function(){return this[0]};ir.collection=function(){return Eh(this)?this:new Fr(this._private.cy,[this])};ir.unique=function(){return new Fr(this._private.cy,this,!0)};ir.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};ir.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Fr(e)};ir.$id=ir.getElementById;ir.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};ir.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};ir.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};ir.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if($t(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var a=!1,o={},s=r.data.source,l=r.data.target;s!=null&&s!=i.source&&(o.source=""+s,a=!0),l!=null&&l!=i.target&&(o.target=""+l,a=!0),a&&(e=e.move(o))}else{var u="parent"in r.data,c=r.data.parent;u&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var d=function(C,y,w){var _=r[C];_!=null&&_!==n[C]&&(_?e[y]():e[w]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var h={data:Jn(n.data),position:Jn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var m=0;return n.classes.forEach(function(g){return h.classes+=m++===0?g:" "+g}),h}}};ir.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};ir.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),a=new zl(r,i,!1);e.push(a)}return new Fr(r,e)};ir.copy=ir.clone;ir.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,a=[],o=[],s,l=0,u=t.length;l<u;l++){var c=t[l];e&&!c.removed()||(c.isNode()?a.push(c):o.push(c))}s=a.concat(o);var d,h=function(){s.splice(d,1),d--};for(d=0;d<s.length;d++){var m=s[d],g=m._private,C=g.data;if(m.clearTraversalCache(),!(!e&&!g.removed)){if(C.id===void 0)C.id=zh();else if(at(C.id))C.id=""+C.id;else if(Li(C.id)||!yt(C.id)){ur("Can not create element with invalid string ID `"+C.id+"`"),h();continue}else if(n.hasElementWithId(C.id)){ur("Can not create second element with ID `"+C.id+"`"),h();continue}}var y=C.id;if(m.isNode()){var w=g.position;w.x==null&&(w.x=0),w.y==null&&(w.y=0)}if(m.isEdge()){for(var _=m,x=["source","target"],k=x.length,O=!1,p=0;p<k;p++){var I=x[p],N=C[I];at(N)&&(N=C[I]=""+C[I]),N==null||N===""?(ur("Can not create edge `"+y+"` with unspecified "+I),O=!0):n.hasElementWithId(N)||(ur("Can not create edge `"+y+"` with nonexistant "+I+" `"+N+"`"),O=!0)}if(O){h();continue}var j=n.getElementById(C.source),H=n.getElementById(C.target);j.same(H)?j._private.edges.push(_):(j._private.edges.push(_),H._private.edges.push(_)),_._private.source=j,_._private.target=H}g.map=new ei,g.map.set(y,{ele:m,index:0}),g.removed=!1,e&&n.addToPool(m)}for(var G=0;G<a.length;G++){var P=a[G],z=P._private.data;at(z.parent)&&(z.parent=""+z.parent);var A=z.parent,T=A!=null;if(T||P._private.parent){var E=P._private.parent?n.collection().merge(P._private.parent):n.getElementById(A);if(E.empty())z.parent=void 0;else if(E[0].removed())Qt("Node added with missing parent, reference to parent removed"),z.parent=void 0,P._private.parent=null;else{for(var M=!1,L=E;!L.empty();){if(P.same(L)){M=!0,z.parent=void 0;break}L=L.parent()}M||(E[0]._private.children.push(P),P._private.parent=E[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var F=s.length===t.length?t:new Fr(n,s),X=0;X<F.length;X++){var K=F[X];K.isNode()||(K.parallelEdges().clearTraversalCache(),K.source().clearTraversalCache(),K.target().clearTraversalCache())}var Y;i.hasCompoundNodes?Y=n.collection().merge(F).merge(F.connectedNodes()).merge(F.parent()):Y=F,Y.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?F.emitAndNotify("add"):e&&F.emit("add")}return t};ir.removed=function(){var r=this[0];return r&&r._private.removed};ir.inside=function(){var r=this[0];return r&&!r._private.removed};ir.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},a=t._private.cy;function o(A){for(var T=A._private.edges,E=0;E<T.length;E++)l(T[E])}function s(A){for(var T=A._private.children,E=0;E<T.length;E++)l(T[E])}function l(A){var T=i[A.id()];e&&A.removed()||T||(i[A.id()]=!0,A.isNode()?(n.push(A),o(A),s(A)):n.unshift(A))}for(var u=0,c=t.length;u<c;u++){var d=t[u];l(d)}function h(A,T){var E=A._private.edges;Ni(E,T),A.clearTraversalCache()}function m(A){A.clearTraversalCache()}var g=[];g.ids={};function C(A,T){T=T[0],A=A[0];var E=A._private.children,M=A.id();Ni(E,T),T._private.parent=null,g.ids[M]||(g.ids[M]=!0,g.push(A))}t.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var y=0;y<n.length;y++){var w=n[y];if(w.isEdge()){var _=w.source()[0],x=w.target()[0];h(_,w),h(x,w);for(var k=w.parallelEdges(),O=0;O<k.length;O++){var p=k[O];m(p),p.isBundledBezier()&&p.dirtyBoundingBoxCache()}}else{var I=w.parent();I.length!==0&&C(I,w)}e&&(w._private.removed=!0)}var N=a._private.elements;a._private.hasCompoundNodes=!1;for(var j=0;j<N.length;j++){var H=N[j];if(H.isParent()){a._private.hasCompoundNodes=!0;break}}var G=new Fr(this.cy(),n);G.size()>0&&(r?G.emitAndNotify("remove"):e&&G.emit("remove"));for(var P=0;P<g.length;P++){var z=g[P];(!e||!z.removed())&&z.updateStyle()}return G};ir.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,a=function(g){return g==null?g:""+g};if(r.source!==void 0||r.target!==void 0){var o=a(r.source),s=a(r.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var m=0;m<t.length;m++){var g=t[m],C=g._private.data;g.isEdge()&&(l&&(C.source=o),u&&(C.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=a(r.parent),d=c===null||e.hasElementWithId(c);if(d){var h=c===null?void 0:c;e.batch(function(){var m=t.remove(n,i);m.emitAndNotify("moveout");for(var g=0;g<t.length;g++){var C=t[g],y=C._private.data;C.isNode()&&(y.parent=h)}m.restore(n,i)}),t.emitAndNotify("move")}}return this};[ep,xC,Cl,Ri,Ka,NC,Ul,ew,Tp,Ep,aw,Bl,wl,Lr,Oi,Ur].forEach(function(r){Tt(ir,r)});var dw={add:function(e){var t,n=this;if(Cn(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}t=new Fr(n,a)}}else if(tr(e)){var l=e;t=new Fr(n,l)}else if($t(e)&&(tr(e.nodes)||tr(e.edges))){for(var u=e,c=[],d=["nodes","edges"],h=0,m=d.length;h<m;h++){var g=d[h],C=u[g];if(tr(C))for(var y=0,w=C.length;y<w;y++){var _=Tt({group:g},C[y]);c.push(_)}}t=new Fr(n,c)}else{var x=e;t=new zl(n,x).collection()}return t},remove:function(e){if(!Cn(e)){if(yt(e)){var t=e;e=this.$(t)}}return e.remove()}};function hw(r,e,t,n){var i=4,a=.001,o=1e-7,s=10,l=11,u=1/(l-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var h=c?new Float32Array(l):new Array(l);function m(H,G){return 1-3*G+3*H}function g(H,G){return 3*G-6*H}function C(H){return 3*H}function y(H,G,P){return((m(G,P)*H+g(G,P))*H+C(G))*H}function w(H,G,P){return 3*m(G,P)*H*H+2*g(G,P)*H+C(G)}function _(H,G){for(var P=0;P<i;++P){var z=w(G,r,t);if(z===0)return G;var A=y(G,r,t)-H;G-=A/z}return G}function x(){for(var H=0;H<l;++H)h[H]=y(H*u,r,t)}function k(H,G,P){var z,A,T=0;do A=G+(P-G)/2,z=y(A,r,t)-H,z>0?P=A:G=A;while(Math.abs(z)>o&&++T<s);return A}function O(H){for(var G=0,P=1,z=l-1;P!==z&&h[P]<=H;++P)G+=u;--P;var A=(H-h[P])/(h[P+1]-h[P]),T=G+A*u,E=w(T,r,t);return E>=a?_(H,T):E===0?T:k(H,G,G+u)}var p=!1;function I(){p=!0,(r!==e||t!==n)&&x()}var N=function(G){return p||I(),r===e&&t===n?G:G===0?0:G===1?1:y(O(G),e,n)};N.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var j="generateBezier("+[r,e,t,n]+")";return N.toString=function(){return j},N}var pw=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var o={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,i){var a={dx:n.v,dv:r(n)},o=e(n,i*.5,a),s=e(n,i*.5,o),l=e(n,i,s),u=1/6*(a.dx+2*(o.dx+s.dx)+l.dx),c=1/6*(a.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*i,n.v=n.v+c*i,n}return function n(i,a,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,c=1/1e4,d=16/1e3,h,m,g;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,s.tension=i,s.friction=a,h=o!==null,h?(u=n(i,a),m=u/o*d):m=d;g=t(g||s,m),l.push(1+g.x),u+=16,Math.abs(g.x)>c&&Math.abs(g.v)>c;);return h?function(C){return l[C*(l.length-1)|0]}:u}}(),nr=function(e,t,n,i){var a=hw(e,t,n,i);return function(o,s,l){return o+(s-o)*a(l)}},xl={linear:function(e,t,n){return e+(t-e)*n},ease:nr(.25,.1,.25,1),"ease-in":nr(.42,0,1,1),"ease-out":nr(0,0,.58,1),"ease-in-out":nr(.42,0,.58,1),"ease-in-sine":nr(.47,0,.745,.715),"ease-out-sine":nr(.39,.575,.565,1),"ease-in-out-sine":nr(.445,.05,.55,.95),"ease-in-quad":nr(.55,.085,.68,.53),"ease-out-quad":nr(.25,.46,.45,.94),"ease-in-out-quad":nr(.455,.03,.515,.955),"ease-in-cubic":nr(.55,.055,.675,.19),"ease-out-cubic":nr(.215,.61,.355,1),"ease-in-out-cubic":nr(.645,.045,.355,1),"ease-in-quart":nr(.895,.03,.685,.22),"ease-out-quart":nr(.165,.84,.44,1),"ease-in-out-quart":nr(.77,0,.175,1),"ease-in-quint":nr(.755,.05,.855,.06),"ease-out-quint":nr(.23,1,.32,1),"ease-in-out-quint":nr(.86,0,.07,1),"ease-in-expo":nr(.95,.05,.795,.035),"ease-out-expo":nr(.19,1,.22,1),"ease-in-out-expo":nr(1,0,0,1),"ease-in-circ":nr(.6,.04,.98,.335),"ease-out-circ":nr(.075,.82,.165,1),"ease-in-out-circ":nr(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return xl.linear;var i=pw(e,t,n);return function(a,o,s){return a+(o-a)*i(s)}},"cubic-bezier":nr};function Kd(r,e,t,n,i){if(n===1||e===t)return t;var a=i(e,t,n);return r==null||((r.roundValue||r.color)&&(a=Math.round(a)),r.min!==void 0&&(a=Math.max(a,r.min)),r.max!==void 0&&(a=Math.min(a,r.max))),a}function Xd(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Oa(r,e,t,n,i){var a=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var o=Xd(r,i),s=Xd(e,i);if(at(o)&&at(s))return Kd(a,o,s,t,n);if(tr(o)&&tr(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u];if(c!=null&&d!=null){var h=Kd(a,c,d,t,n);l.push(h)}else l.push(d)}return l}}function vw(r,e,t,n){var i=!n,a=r._private,o=e._private,s=o.easing,l=o.startTime,u=n?r:r.cy(),c=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=xl.linear;else{var d;if(yt(s)){var h=c.parse("transition-timing-function",s);d=h.value}else d=s;var m,g;yt(d)?(m=d,g=[]):(m=d[1],g=d.slice(2).map(function(F){return+F})),g.length>0?(m==="spring"&&g.push(o.duration),o.easingImpl=xl[m].apply(null,g)):o.easingImpl=xl[m]}var C=o.easingImpl,y;if(o.duration===0?y=1:y=(t-l)/o.duration,o.applying&&(y=o.progress),y<0?y=0:y>1&&(y=1),o.delay==null){var w=o.startPosition,_=o.position;if(_&&i&&!r.locked()){var x={};wo(w.x,_.x)&&(x.x=Oa(w.x,_.x,y,C)),wo(w.y,_.y)&&(x.y=Oa(w.y,_.y,y,C)),r.position(x)}var k=o.startPan,O=o.pan,p=a.pan,I=O!=null&&n;I&&(wo(k.x,O.x)&&(p.x=Oa(k.x,O.x,y,C)),wo(k.y,O.y)&&(p.y=Oa(k.y,O.y,y,C)),r.emit("pan"));var N=o.startZoom,j=o.zoom,H=j!=null&&n;H&&(wo(N,j)&&(a.zoom=Fo(a.minZoom,Oa(N,j,y,C),a.maxZoom)),r.emit("zoom")),(I||H)&&r.emit("viewport");var G=o.style;if(G&&G.length>0&&i){for(var P=0;P<G.length;P++){var z=G[P],A=z.name,T=z,E=o.startStyle[A],M=c.properties[E.name],L=Oa(E,T,y,C,M);c.overrideBypass(r,A,L)}r.emit("style")}}return o.progress=y,y}function wo(r,e){return r==null||e==null?!1:at(r)&&at(e)?!0:!!(r&&e)}function gw(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function Yd(r,e){var t=e._private.aniEles,n=[];function i(c,d){var h=c._private,m=h.animation.current,g=h.animation.queue,C=!1;if(m.length===0){var y=g.shift();y&&m.push(y)}for(var w=function(p){for(var I=p.length-1;I>=0;I--){var N=p[I];N()}p.splice(0,p.length)},_=m.length-1;_>=0;_--){var x=m[_],k=x._private;if(k.stopped){m.splice(_,1),k.hooked=!1,k.playing=!1,k.started=!1,w(k.frames);continue}!k.playing&&!k.applying||(k.playing&&k.applying&&(k.applying=!1),k.started||gw(c,x,r),vw(c,x,r,d),k.applying&&(k.applying=!1),w(k.frames),k.step!=null&&k.step(r),x.completed()&&(m.splice(_,1),k.hooked=!1,k.playing=!1,k.started=!1,w(k.completes)),C=!0)}return!d&&m.length===0&&g.length===0&&n.push(c),C}for(var a=!1,o=0;o<t.length;o++){var s=t[o],l=i(s);a=a||l}var u=i(e,!0);(a||u)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var mw={animate:Yt.animate(),animation:Yt.animation(),animated:Yt.animated(),clearQueue:Yt.clearQueue(),delay:Yt.delay(),delayAnimation:Yt.delayAnimation(),stop:Yt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&Dl(function(a){Yd(a,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,o){Yd(o,e)},n.beforeRenderPriorities.animations):t()}},yw={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Wo(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},hl=function(e){return yt(e)?new ji(e):e},Mp={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Kl(yw,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,hl(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,hl(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,hl(t),n),this},once:function(e,t,n){return this.emitter().one(e,hl(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Yt.eventAliasesOn(Mp);var ac={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};ac.jpeg=ac.jpg;var _l={layout:function(e){var t=this;if(e==null){ur("Layout options must be specified to make a layout");return}if(e.name==null){ur("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){ur("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;yt(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var o=new i(Tt({},e,{cy:t,eles:a}));return o}};_l.createLayout=_l.makeLayout=_l.layout;var bw={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a],s=t.getElementById(a);s.data(o)}})}},Cw=Ir({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:12,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),oc={renderTo:function(e,t,n,i){var a=this._private.renderer;return a.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){ur("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Qt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=Cw(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};oc.invalidateDimensions=oc.resize;var Sl={collection:function(e,t){return yt(e)?this.$(e):Cn(e)?e.collection():tr(e)?(t||(t={}),new Fr(this,e,t.unique,t.removed)):new Fr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Sl.elements=Sl.filter=Sl.$;var Xr={},Mo="t",ww="f";Xr.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),a=0;a<r.length;a++){var o=r[a],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&i.push(o)}}return i};Xr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,a=n[i];if(a)return a;for(var o=[],s={},l=0;l<t.length;l++){var u=t[l],c=r[l]===Mo,d=e[l]===Mo,h=c!==d,m=u.mappedProperties.length>0;if(h||d&&m){var g=void 0;h&&m||h?g=u.properties:m&&(g=u.mappedProperties);for(var C=0;C<g.length;C++){for(var y=g[C],w=y.name,_=!1,x=l+1;x<t.length;x++){var k=t[x],O=e[x]===Mo;if(O&&(_=k.properties[y.name]!=null,_))break}!s[w]&&!_&&(s[w]=!0,o.push(w))}}}return n[i]=o,o};Xr.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",a=0;a<e.length;a++){var o=e[a],s=o.selector&&o.selector.matches(r);s?t+=Mo:t+=ww}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};Xr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<t.length;a++){var o=t[a],s=e[a]===Mo;if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];i[u.name]=u}}return n[e]=i,i};Xr.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,a={},o=n.types,s=0;s<i.length;s++){var l=i[s],u=e[l],c=t.pstyle(l);if(!u)if(c)c.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(c!==u){if(u.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===u.value){var d=c.mapping,h=d.fnValue=u.value(t);if(h===d.prevFnValue)continue}var m=a[l]={prev:c};n.applyParsedProperty(t,u),m.next=t.pstyle(l),m.next&&m.next.bypass&&(m.next=m.next.bypassed)}}return{diffProps:a}};Xr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,a=function(Q,J,le){return t.getPropertiesHash(Q,J,le)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",l=r._private.style;n=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];e.styleKeys[c]=[Na,To]}for(var d=function(Q,J){return e.styleKeys[J][0]=Ro(Q,e.styleKeys[J][0])},h=function(Q,J){return e.styleKeys[J][1]=Oo(Q,e.styleKeys[J][1])},m=function(Q,J){d(Q,J),h(Q,J)},g=function(Q,J){for(var le=0;le<Q.length;le++){var de=Q.charCodeAt(le);d(de,J),h(de,J)}},C=2e9,y=function(Q){return-128<Q&&Q<128&&Math.floor(Q)!==Q?C-(Q*1024|0):Q},w=0;w<n.length;w++){var _=n[w],x=l[_];if(x!=null){var k=this.properties[_],O=k.type,p=k.groupKey,I=void 0;k.hashOverride!=null?I=k.hashOverride(r,x):x.pfValue!=null&&(I=x.pfValue);var N=k.enums==null?x.value:null,j=I!=null,H=N!=null,G=j||H,P=x.units;if(O.number&&G&&!O.multiple){var z=j?I:N;m(y(z),p),!j&&P!=null&&g(P,p)}else g(x.strValue,p)}}for(var A=[Na,To],T=0;T<i.length;T++){var E=i[T],M=e.styleKeys[E];A[0]=Ro(M[0],A[0]),A[1]=Oo(M[1],A[1])}e.styleKey=E0(A[0],A[1]);var L=e.styleKeys;e.labelDimsKey=Pi(L.labelDimensions);var F=a(r,["label"],L.labelDimensions);if(e.labelKey=Pi(F),e.labelStyleKey=Pi(il(L.commonLabel,F)),!s){var X=a(r,["source-label"],L.labelDimensions);e.sourceLabelKey=Pi(X),e.sourceLabelStyleKey=Pi(il(L.commonLabel,X));var K=a(r,["target-label"],L.labelDimensions);e.targetLabelKey=Pi(K),e.targetLabelStyleKey=Pi(il(L.commonLabel,K))}if(s){var Y=e.styleKeys,ae=Y.nodeBody,he=Y.nodeBorder,be=Y.nodeOutline,me=Y.backgroundImage,we=Y.compound,xe=Y.pie,oe=[ae,he,be,me,we,xe].filter(function($){return $!=null}).reduce(il,[Na,To]);e.nodeKey=Pi(oe),e.hasPie=xe!=null&&xe[0]!==Na&&xe[1]!==To}return o!==e.styleKey};Xr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Xr.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,a,o=t.types,s=t.properties[n.name].type,l=n.bypass,u=i[n.name],c=u&&u.bypass,d=r._private,h="mapping",m=function(ae){return ae==null?null:ae.pfValue!=null?ae.pfValue:ae.value},g=function(){var ae=m(u),he=m(n);t.checkTriggers(r,n.name,ae,he)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return i[n.name]=void 0,g(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,g(),!0):!1:(g(),!0);if(n.deleteBypass)return u?u.bypass?(i[n.name]=u.bypassed,g(),!0):!1:(g(),!0);var C=function(){Qt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var y=n.field.split("."),w=d.data,_=0;_<y.length&&w;_++){var x=y[_];w=w[x]}if(w==null)return C(),!1;var k;if(at(w)){var O=n.fieldMax-n.fieldMin;O===0?k=0:k=(w-n.fieldMin)/O}else return Qt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+w+"` for `"+r.id()+"` is non-numeric)"),!1;if(k<0?k=0:k>1&&(k=1),s.color){var p=n.valueMin[0],I=n.valueMax[0],N=n.valueMin[1],j=n.valueMax[1],H=n.valueMin[2],G=n.valueMax[2],P=n.valueMin[3]==null?1:n.valueMin[3],z=n.valueMax[3]==null?1:n.valueMax[3],A=[Math.round(p+(I-p)*k),Math.round(N+(j-N)*k),Math.round(H+(G-H)*k),Math.round(P+(z-P)*k)];a={bypass:n.bypass,name:n.name,value:A,strValue:"rgb("+A[0]+", "+A[1]+", "+A[2]+")"}}else if(s.number){var T=n.valueMin+(n.valueMax-n.valueMin)*k;a=this.parse(n.name,T,n.bypass,h)}else return!1;if(!a)return C(),!1;a.mapping=n,n=a;break}case o.data:{for(var E=n.field.split("."),M=d.data,L=0;L<E.length&&M;L++){var F=E[L];M=M[F]}if(M!=null&&(a=this.parse(n.name,M,n.bypass,h)),!a)return C(),!1;a.mapping=n,n=a;break}case o.fn:{var X=n.value,K=n.fnValue!=null?n.fnValue:X(r);if(n.prevFnValue=K,K==null)return Qt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(a=this.parse(n.name,K,n.bypass,h),!a)return Qt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;a.mapping=Jn(n),n=a;break}case void 0:break;default:return!1}return l?(c?n.bypassed=u.bypassed:n.bypassed=u,i[n.name]=n):c?u.bypassed=n:i[n.name]=n,g(),!0};Xr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s];l!=null&&(l.bypass?l.bypassed=null:i[s]=null)}}};Xr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};Xr.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,a=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],d=r.pstyle(c),h=e[c];if(h){var m=h.prev,g=m,C=h.next!=null?h.next:d,y=!1,w=void 0,_=1e-6;g&&(at(g.pfValue)&&at(C.pfValue)?(y=C.pfValue-g.pfValue,w=g.pfValue+_*y):at(g.value)&&at(C.value)?(y=C.value-g.value,w=g.value+_*y):tr(g.value)&&tr(C.value)&&(y=g.value[0]!==C.value[0]||g.value[1]!==C.value[1]||g.value[2]!==C.value[2],w=g.strValue),y&&(s[c]=C.strValue,this.applyBypass(r,c,w),l=!0))}}if(!l)return;n.transitioning=!0,new Ya(function(x){o>0?r.delayAnimation(o).play().promise().then(x):x()}).then(function(){return r.animation({style:s,duration:a,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};Xr.checkTrigger=function(r,e,t,n,i,a){var o=this.properties[e],s=i(o);s!=null&&s(t,n)&&a(o)};Xr.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};Xr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(t==="bezier"||n==="bezier")&&r.parallelEdges().forEach(function(a){a.dirtyBoundingBoxCache()}),i.triggersBoundsOfConnectedEdges&&e==="display"&&(t==="none"||n==="none")&&r.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};Xr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n)};var Yo={};Yo.applyBypass=function(r,e,t,n){var i=this,a=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var l=i.properties[s],u=l.name,c=this.parse(u,t,!0);c&&a.push(c)}}else if(yt(e)){var d=this.parse(e,t,!0);d&&a.push(d)}else if($t(e)){var h=e;n=t;for(var m=Object.keys(h),g=0;g<m.length;g++){var C=m[g],y=h[C];if(y===void 0&&(y=h[jl(C)]),y!==void 0){var w=this.parse(C,y,!0);w&&a.push(w)}}}else return!1;if(a.length===0)return!1;for(var _=!1,x=0;x<r.length;x++){for(var k=r[x],O={},p=void 0,I=0;I<a.length;I++){var N=a[I];if(n){var j=k.pstyle(N.name);p=O[N.name]={prev:j}}_=this.applyParsedProperty(k,Jn(N))||_,n&&(p.next=k.pstyle(N.name))}_&&this.updateStyleHints(k),n&&this.updateTransitions(k,O,o)}return _};Yo.overrideBypass=function(r,e,t){e=mc(e);for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,t):(a.value=t,a.pfValue!=null&&(a.pfValue=t),s?a.strValue="rgb("+t.join(",")+")":l?a.strValue=t.join(" "):a.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,u,t)}};Yo.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Yo.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var a=r[i],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],c=a.pstyle(u.name);if(!(!c||!c.bypass)){var d="",h=this.parse(l,d,!0),m=o[u.name]={prev:c};this.applyParsedProperty(a,h),m.next=a.pstyle(u.name)}}this.updateStyleHints(a),t&&this.updateTransitions(a,o,n)}};var Ac={};Ac.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};Ac.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var ti={};ti.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};ti.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var a=t.properties[i],o=t.getStylePropertyValue(r,a.name,e);o!=null&&(n[a.name]=o,n[jl(a.name)]=o)}return n}};ti.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};ti.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,o=r.pstyle(i.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(t&&a.number&&s!=null&&at(s)){var c=r.cy().zoom(),d=function(y){return y*c},h=function(y,w){return d(y)+w},m=tr(s),g=m?l.every(function(C){return C!=null}):l!=null;return g?m?s.map(function(C,y){return h(C,l[y])}).join(" "):h(s,l):m?s.map(function(C){return yt(C)?C:""+d(C)}).join(" "):""+d(s)}else if(u!=null)return u}return null}};ti.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=i.name,o=r.pstyle(a);o!==void 0&&($t(o)?o=this.parse(a,o.strValue):o=this.parse(a,o)),o&&(t[a]=o)}return t};ti.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],l=n[s],u=i[s]||i[mc(s)],c=this.parse(u.name,l);c&&t.push(c)}return t};ti.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,a,o,s,l,u;for(l=0;l<e.length;l++)if(i=e[l],a=r.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=Ro(s,n[0]),n[1]=Oo(s,n[1]);else for(o=a.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=Ro(s,n[0]),n[1]=Oo(s,n[1]);return n};ti.getPropertiesHash=ti.getNonDefaultPropertiesHash;var Ql={};Ql.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,a=n.style||n.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var l=o[s],u=a[l];e.css(l,u)}}return e};Ql.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};Ql.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:a})}return r};var Ic={};Ic.appendFromString=function(r){var e=this,t=this,n=""+r,i,a,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function l(){a.length>o.length?a=a.substr(o.length):a=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Qt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var d=c[1];if(d!=="core"){var h=new ji(d);if(h.invalid){Qt("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),s();continue}}var m=c[2],g=!1;a=m;for(var C=[];;){var y=a.match(/^\s*$/);if(y)break;var w=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!w){Qt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+m),g=!0;break}o=w[0];var _=w[1],x=w[2],k=e.properties[_];if(!k){Qt("Skipping property: Invalid property name in: "+o),l();continue}var O=t.parse(_,x);if(!O){Qt("Skipping property: Invalid property definition in: "+o),l();continue}C.push({name:_,val:x}),l()}if(g){s();break}t.selector(d);for(var p=0;p<C.length;p++){var I=C[p];t.css(I.name,I.val)}s()}return t};Ic.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Or={};(function(){var r=Tr,e=Pm,t=Im,n=Bm,i=Rm,a=function(oe){return"^"+oe+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(oe){var $=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+oe+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+$+")\\s*\\,\\s*("+$+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Or.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(oe,$){switch(oe.length){case 2:return $[0]!=="deg"&&$[0]!=="rad"&&$[1]!=="deg"&&$[1]!=="rad";case 1:return yt(oe[0])||$[0]==="deg"||$[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(oe){var $=oe.length;return $===1||$===2||$===4}}};var l={zeroNonZero:function(oe,$){return(oe==null||$==null)&&oe!==$||oe==0&&$!=0?!0:oe!=0&&$==0},any:function(oe,$){return oe!=$},emptyNonEmpty:function(oe,$){var Q=Li(oe),J=Li($);return Q&&!J||!Q&&J}},u=Or.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],d=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],h=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],m=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],g=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],C=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],y=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],w=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],_=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],x=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],k=function(oe,$){return $.value==="label"?-oe.poolIndex():$.pfValue},O=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:k},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:k},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],p=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],I=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],N=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],j=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],H=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],G=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],P=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],z=[];Or.pieBackgroundN=16,z.push({name:"pie-size",type:u.sizeMaybePercent});for(var A=1;A<=Or.pieBackgroundN;A++)z.push({name:"pie-"+A+"-background-color",type:u.color}),z.push({name:"pie-"+A+"-background-size",type:u.percent}),z.push({name:"pie-"+A+"-background-opacity",type:u.zeroOneNumber});var T=[],E=Or.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(xe){E.forEach(function(oe){var $=oe+"-"+xe.name,Q=xe.type,J=xe.triggersBounds;T.push({name:$,type:Q,triggersBounds:J})})},{});var M=Or.properties=[].concat(C,x,y,w,_,G,g,m,c,d,h,O,p,I,N,z,j,H,T,P),L=Or.propertyGroups={behavior:C,transition:x,visibility:y,overlay:w,underlay:_,ghost:G,commonLabel:g,labelDimensions:m,mainLabel:c,sourceLabel:d,targetLabel:h,nodeBody:O,nodeBorder:p,nodeOutline:I,backgroundImage:N,pie:z,compound:j,edgeLine:H,edgeArrow:T,core:P},F=Or.propertyGroupNames={},X=Or.propertyGroupKeys=Object.keys(L);X.forEach(function(xe){F[xe]=L[xe].map(function(oe){return oe.name}),L[xe].forEach(function(oe){return oe.groupKey=xe})});var K=Or.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Or.propertyNames=M.map(function(xe){return xe.name});for(var Y=0;Y<M.length;Y++){var ae=M[Y];M[ae.name]=ae}for(var he=0;he<K.length;he++){var be=K[he],me=M[be.pointsTo],we={name:be.name,alias:!0,pointsTo:me};M.push(we),M[be.name]=we}})();Or.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Or.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=Tt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var c=1;c<=Or.pieBackgroundN;c++){var d=u.name.replace("{{i}}",c),h=u.value;l[d]=h}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return Or.arrowPrefixes.forEach(function(c){var d=c+"-"+u.name,h=u.value;l[d]=h}),l},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);t[a]=s}}return r.defaultProperties=t,r.defaultProperties};Or.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Zl={};Zl.parse=function(r,e,t,n){var i=this;if(cr(e))return i.parseImplWarn(r,e,t,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,l=Nh(r,s,o,a),u=i.propCache=i.propCache||[],c;return(c=u[l])||(c=u[l]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=Jn(c),c&&(c.value=Jn(c.value))),c};Zl.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&Qt("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Qt("The style value of `label` is deprecated for `"+i.name+"`"),i};Zl.parseImpl=function(r,e,t,n){var i=this;r=mc(r);var a=i.properties[r],o=e,s=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,r=a.name);var l=yt(e);l&&(e=e.trim());var u=a.type;if(!u)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(cr(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,d;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var h=s.data;return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(d=new RegExp(s.mapData.regex).exec(e))){if(t||u.multiple)return!1;var m=s.mapData;if(!(u.color||u.number))return!1;var g=this.parse(r,d[4]);if(!g||g.mapped)return!1;var C=this.parse(r,d[5]);if(!C||C.mapped)return!1;if(g.pfValue===C.pfValue||g.strValue===C.strValue)return Qt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+g.strValue+"`"),this.parse(r,g.strValue);if(u.color){var y=g.value,w=C.value,_=y[0]===w[0]&&y[1]===w[1]&&y[2]===w[2]&&(y[3]===w[3]||(y[3]==null||y[3]===1)&&(w[3]==null||w[3]===1));if(_)return!1}return{name:r,value:d,strValue:""+e,mapped:m,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:g.value,valueMax:C.value,bypass:t}}}if(u.multiple&&n!=="multiple"){var x;if(l?x=e.split(/\s+/):tr(e)?x=e:x=[e],u.evenMultiple&&x.length%2!==0)return null;for(var k=[],O=[],p=[],I="",N=!1,j=0;j<x.length;j++){var H=i.parse(r,x[j],t,"multiple");N=N||yt(H.value),k.push(H.value),p.push(H.pfValue!=null?H.pfValue:H.value),O.push(H.units),I+=(j>0?" ":"")+H.strValue}return u.validate&&!u.validate(k,O)?null:u.singleEnum&&N?k.length===1&&yt(k[0])?{name:r,value:k[0],strValue:k[0],bypass:t}:null:{name:r,value:k,pfValue:p,strValue:I,bypass:t,units:O}}var G=function(){for(var oe=0;oe<u.enums.length;oe++){var $=u.enums[oe];if($===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(u.number){var P,z="px";if(u.units&&(P=u.units),u.implicitUnits&&(z=u.implicitUnits),!u.unitless)if(l){var A="px|em"+(u.allowPercent?"|\\%":"");P&&(A=P);var T=e.match("^("+Tr+")("+A+")?$");T&&(e=T[1],P=T[2]||z)}else(!P||u.implicitUnits)&&(P=z);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,G();if(u.integer&&!_m(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var E={name:r,value:e,strValue:""+e+(P||""),units:P,bypass:t};return u.unitless||P!=="px"&&P!=="em"?E.pfValue=e:E.pfValue=P==="px"||!P?e:this.getEmSizeInPixels()*e,(P==="ms"||P==="s")&&(E.pfValue=P==="ms"?e:1e3*e),(P==="deg"||P==="rad")&&(E.pfValue=P==="rad"?e:ry(e)),P==="%"&&(E.pfValue=e/100),E}else if(u.propList){var M=[],L=""+e;if(L!=="none"){for(var F=L.split(/\s*,\s*|\s+/),X=0;X<F.length;X++){var K=F[X].trim();i.properties[K]?M.push(K):Qt("`"+K+"` is not a valid property name")}if(M.length===0)return null}return{name:r,value:M,strValue:M.length===0?"none":M.join(" "),bypass:t}}else if(u.color){var Y=Ph(e);return Y?{name:r,value:Y,pfValue:Y,strValue:"rgb("+Y[0]+","+Y[1]+","+Y[2]+")",bypass:t}:null}else if(u.regex||u.regexes){if(u.enums){var ae=G();if(ae)return ae}for(var he=u.regexes?u.regexes:[u.regex],be=0;be<he.length;be++){var me=new RegExp(he[be]),we=me.exec(e);if(we)return{name:r,value:u.singleRegexMatchValue?we[1]:we,strValue:""+e,bypass:t}}return null}else return u.string?{name:r,value:""+e,strValue:""+e,bypass:t}:u.enums?G():null};var $r=function r(e){if(!(this instanceof r))return new r(e);if(!gc(e)){ur("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Kr=$r.prototype;Kr.instanceString=function(){return"style"};Kr.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};Kr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Kr.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Kr.selector=function(r){var e=r==="core"?null:new ji(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Kr.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],a=t[i.name];a===void 0&&(a=t[jl(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Kr.style=Kr.css;Kr.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};Kr.append=function(r){return kh(r)?r.appendToStyle(this):tr(r)?this.appendFromJson(r):yt(r)&&this.appendFromString(r),this};$r.fromJson=function(r,e){var t=new $r(r);return t.fromJson(e),t};$r.fromString=function(r,e){return new $r(r).fromString(e)};[Xr,Yo,Ac,ti,Ql,Ic,Or,Zl].forEach(function(r){Tt(Kr,r)});$r.types=Kr.types;$r.properties=Kr.properties;$r.propertyGroups=Kr.propertyGroups;$r.propertyGroupNames=Kr.propertyGroupNames;$r.propertyGroupKeys=Kr.propertyGroupKeys;var xw={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return kh(e)?t.style=e.generateStyle(this):tr(e)?t.style=$r.fromJson(this,e):yt(e)?t.style=$r.fromString(this,e):t.style=$r(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},_w="single",va={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=_w),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,a,o,s;switch(e.length){case 0:return t;case 1:if(yt(e[0]))return n=e[0],t[n];if($t(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,s=a.y,at(o)&&(t.x=o),at(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&at(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,a,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:$t(e)&&(s=n[0],l=s.x,u=s.y,at(l)&&(i.x+=l),at(u)&&(i.y+=u),this.emit("pan viewport"));break;case 2:a=e,o=t,(a==="x"||a==="y")&&at(o)&&(i[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(at(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(yt(e)){var i=e;e=this.$(i)}else if(Em(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Cn(e)||(e=this.mutableElements());if(!(Cn(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(t=at(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*t)/n.w,(s-2*t)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return at(e)&&at(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):at(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:at(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a,o,s=!1;if(t.zoomingEnabled||(s=!0),at(e)?o=e:$t(e)&&(o=e.level,e.position!=null?a=ql(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!at(o)||o===i||a!=null&&(!at(a.x)||!at(a.y)))return null;if(a!=null){var l=n,u=i,c=o,d={x:-c/u*(a.x-l.x)+a.x,y:-c/u*(a.y-l.y)+a.y};return{zoomed:!0,panned:!0,zoom:c,pan:d}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(at(e.zoom)||(n=!1),$t(e.pan)||(i=!1),!n&&!i)return this;if(n){var l=e.zoom;l<t.minZoom||l>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=l,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var u=e.pan;at(u.x)&&(t.pan.x=u.x,s=!1),at(u.y)&&(t.pan.y=u.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(yt(e)){var n=e;e=this.mutableElements().filter(n)}else Cn(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(a-t*(i.x1+i.x2))/2,y:(o-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var i=n.window().getComputedStyle(t),a=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};va.centre=va.center;va.autolockNodes=va.autolock;va.autoungrabifyNodes=va.autoungrabify;var qo={data:Yt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Yt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Yt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Yt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};qo.attr=qo.data;qo.removeAttr=qo.removeData;var Go=function(e){var t=this;e=Tt({},e);var n=e.container;n&&!kl(n)&&kl(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var o=Sr!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Tt({name:o?"grid":"null"},s.layout),s.renderer=Tt({name:o?"canvas":"null"},s.renderer);var l=function(g,C,y){return C!==void 0?C:y!==void 0?y:g},u=this._private={container:n,ready:!1,options:s,elements:new Fr(this),listeners:[],aniEles:new Fr(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:at(s.zoom)?s.zoom:1,pan:{x:$t(s.pan)&&at(s.pan.x)?s.pan.x:0,y:$t(s.pan)&&at(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(g,C){var y=g.some(km);if(y)return Ya.all(g).then(C);C(g)};u.styleEnabled&&t.setStyle([]);var d=Tt({},s,s.renderer);t.initRenderer(d);var h=function(g,C,y){t.notifications(!1);var w=t.mutableElements();w.length>0&&w.remove(),g!=null&&($t(g)||tr(g))&&t.add(g),t.one("layoutready",function(x){t.notifications(!0),t.emit(x),t.one("load",C),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",y),t.emit("done")});var _=Tt({},t._private.options.layout);_.eles=t.elements(),t.layout(_).run()};c([s.style,s.elements],function(m){var g=m[0],C=m[1];u.styleEnabled&&t.style().append(g),h(C,function(){t.startAnimationLoop(),u.ready=!0,cr(s.ready)&&t.on("ready",s.ready);for(var y=0;y<a.length;y++){var w=a[y];t.on("ready",w)}i&&(i.readies=[]),t.emit("ready")},s.done)})},Rl=Go.prototype;Tt(Rl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Sr;var t=this._private.container.ownerDocument;return t===void 0||t==null?Sr:t.defaultView||Sr},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!kl(e)&&kl(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(Tt({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Jn(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),a=function(k){return t.getElementById(k.id())};if($t(e)){if(t.startBatch(),e.elements){var o={},s=function(k,O){for(var p=[],I=[],N=0;N<k.length;N++){var j=k[N];if(!j.data.id){Qt("cy.json() cannot handle elements without an ID attribute");continue}var H=""+j.data.id,G=t.getElementById(H);o[H]=!0,G.length!==0?I.push({ele:G,json:j}):(O&&(j.group=O),p.push(j))}t.add(p);for(var P=0;P<I.length;P++){var z=I[P],A=z.ele,T=z.json;A.json(T)}};if(tr(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],d=e.elements[c];tr(d)&&s(d,c)}var h=t.collection();i.filter(function(x){return!o[x.id()]}).forEach(function(x){x.isParent()?h.merge(x):x.remove()}),h.forEach(function(x){return x.children().move({parent:null})}),h.forEach(function(x){return a(x).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var m=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],g=0;g<m.length;g++){var C=m[g];e[C]!=null&&t[C](e[C])}return t.endBatch(),this}else{var y=!!e,w={};y?w.elements=this.elements().map(function(x){return x.json()}):(w.elements={},i.forEach(function(x){var k=x.group();w.elements[k]||(w.elements[k]=[]),w.elements[k].push(x.json())})),this._private.styleEnabled&&(w.style=t.style().json()),w.data=Jn(t.data());var _=n.options;return w.zoomingEnabled=n.zoomingEnabled,w.userZoomingEnabled=n.userZoomingEnabled,w.zoom=n.zoom,w.minZoom=n.minZoom,w.maxZoom=n.maxZoom,w.panningEnabled=n.panningEnabled,w.userPanningEnabled=n.userPanningEnabled,w.pan=Jn(n.pan),w.boxSelectionEnabled=n.boxSelectionEnabled,w.renderer=Jn(_.renderer),w.hideEdgesOnViewport=_.hideEdgesOnViewport,w.textureOnViewport=_.textureOnViewport,w.wheelSensitivity=_.wheelSensitivity,w.motionBlur=_.motionBlur,w.multiClickDebounceTime=_.multiClickDebounceTime,w}}});Rl.$id=Rl.getElementById;[dw,mw,Mp,ac,_l,bw,oc,Sl,xw,va,qo].forEach(function(r){Tt(Rl,r)});var Sw={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},Tw={maximal:!1,acyclic:!1},La=function(e){return e.scratch("breadthfirst")},Qd=function(e,t){return e.scratch("breadthfirst",t)};function Pp(r){this.options=Tt({},Sw,Tw,r)}Pp.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(qe){return qe.isChildless()}),i=t,a=r.directed,o=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,l=e.extent(),u=pn(s?r.boundingBox:{x1:l.x1,y1:l.y1,w:l.w,h:l.h}),c;if(Cn(r.roots))c=r.roots;else if(tr(r.roots)){for(var d=[],h=0;h<r.roots.length;h++){var m=r.roots[h],g=e.getElementById(m);d.push(g)}c=e.collection(d)}else if(yt(r.roots))c=e.$(r.roots);else if(a)c=n.roots();else{var C=t.components();c=e.collection();for(var y=function(Ge){var et=C[Ge],rt=et.maxDegree(!1),Qe=et.filter(function(Ye){return Ye.degree(!1)===rt});c=c.add(Qe)},w=0;w<C.length;w++)y(w)}var _=[],x={},k=function(Ge,et){_[et]==null&&(_[et]=[]);var rt=_[et].length;_[et].push(Ge),Qd(Ge,{index:rt,depth:et})},O=function(Ge,et){var rt=La(Ge),Qe=rt.depth,Ye=rt.index;_[Qe][Ye]=null,Ge.isChildless()&&k(Ge,et)};i.bfs({roots:c,directed:r.directed,visit:function(Ge,et,rt,Qe,Ye){var Ie=Ge[0],Ve=Ie.id();Ie.isChildless()&&k(Ie,Ye),x[Ve]=!0}});for(var p=[],I=0;I<n.length;I++){var N=n[I];x[N.id()]||p.push(N)}var j=function(Ge){for(var et=_[Ge],rt=0;rt<et.length;rt++){var Qe=et[rt];if(Qe==null){et.splice(rt,1),rt--;continue}Qd(Qe,{depth:Ge,index:rt})}},H=function(Ge,et){for(var rt=La(Ge),Qe=Ge.incomers().filter(function(Te){return Te.isNode()&&t.has(Te)}),Ye=-1,Ie=Ge.id(),Ve=0;Ve<Qe.length;Ve++){var Re=Qe[Ve],W=La(Re);Ye=Math.max(Ye,W.depth)}if(rt.depth<=Ye){if(!r.acyclic&&et[Ie])return null;var se=Ye+1;return O(Ge,se),et[Ie]=se,!0}return!1};if(a&&o){var G=[],P={},z=function(Ge){return G.push(Ge)},A=function(){return G.shift()};for(n.forEach(function(qe){return G.push(qe)});G.length>0;){var T=A(),E=H(T,P);if(E)T.outgoers().filter(function(qe){return qe.isNode()&&t.has(qe)}).forEach(z);else if(E===null){Qt("Detected double maximal shift for node `"+T.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var M=0;if(r.avoidOverlap)for(var L=0;L<n.length;L++){var F=n[L],X=F.layoutDimensions(r),K=X.w,Y=X.h;M=Math.max(M,K,Y)}var ae={},he=function(Ge){if(ae[Ge.id()])return ae[Ge.id()];for(var et=La(Ge).depth,rt=Ge.neighborhood(),Qe=0,Ye=0,Ie=0;Ie<rt.length;Ie++){var Ve=rt[Ie];if(!(Ve.isEdge()||Ve.isParent()||!n.has(Ve))){var Re=La(Ve);if(Re!=null){var W=Re.index,se=Re.depth;if(!(W==null||se==null)){var Te=_[se].length;se<et&&(Qe+=W/Te,Ye++)}}}}return Ye=Math.max(1,Ye),Qe=Qe/Ye,Ye===0&&(Qe=0),ae[Ge.id()]=Qe,Qe},be=function(Ge,et){var rt=he(Ge),Qe=he(et),Ye=rt-Qe;return Ye===0?Mh(Ge.id(),et.id()):Ye};r.depthSort!==void 0&&(be=r.depthSort);for(var me=_.length,we=0;we<me;we++)_[we].sort(be),j(we);for(var xe=[],oe=0;oe<p.length;oe++)xe.push(p[oe]);var $=function(){for(var Ge=0;Ge<me;Ge++)j(Ge)};xe.length&&(_.unshift(xe),me=_.length,$());for(var Q=0,J=0;J<me;J++)Q=Math.max(_[J].length,Q);var le={x:u.x1+u.w/2,y:u.y1+u.h/2},de=n.reduce(function(qe,Ge){return function(et){return{w:qe.w===-1?et.w:(qe.w+et.w)/2,h:qe.h===-1?et.h:(qe.h+et.h)/2}}(Ge.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),je=Math.max(me===1?0:s?(u.h-r.padding*2-de.h)/(me-1):(u.h-r.padding*2-de.h)/(me+1),M),it=_.reduce(function(qe,Ge){return Math.max(qe,Ge.length)},0),Ke=function(Ge){var et=La(Ge),rt=et.depth,Qe=et.index;if(r.circle){var Ye=Math.min(u.w/2/me,u.h/2/me);Ye=Math.max(Ye,M);var Ie=Ye*rt+Ye-(me>0&&_[0].length<=3?Ye/2:0),Ve=2*Math.PI/_[rt].length*Qe;return rt===0&&_[0].length===1&&(Ie=1),{x:le.x+Ie*Math.cos(Ve),y:le.y+Ie*Math.sin(Ve)}}else{var Re=_[rt].length,W=Math.max(Re===1?0:s?(u.w-r.padding*2-de.w)/((r.grid?it:Re)-1):(u.w-r.padding*2-de.w)/((r.grid?it:Re)+1),M),se={x:le.x+(Qe+1-(Re+1)/2)*W,y:le.y+(rt+1-(me+1)/2)*je};return se}};return t.nodes().layoutPositions(this,r,Ke),this};var Ew={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Ap(r){this.options=Tt({},Ew,r)}Ap.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o=pn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,u=l/Math.max(1,a.length-1),c,d=0,h=0;h<a.length;h++){var m=a[h],g=m.layoutDimensions(e),C=g.w,y=g.h;d=Math.max(d,C,y)}if(at(e.radius)?c=e.radius:a.length<=1?c=0:c=Math.min(o.h,o.w)/2-d,a.length>1&&e.avoidOverlap){d*=1.75;var w=Math.cos(u)-Math.cos(0),_=Math.sin(u)-Math.sin(0),x=Math.sqrt(d*d/(w*w+_*_));c=Math.max(x,c)}var k=function(p,I){var N=e.startAngle+I*u*(i?1:-1),j=c*Math.cos(N),H=c*Math.sin(N),G={x:s.x+j,y:s.y+H};return G};return n.nodes().layoutPositions(this,e,k),this};var kw={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Ip(r){this.options=Tt({},kw,r)}Ip.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,a=i.nodes().not(":parent"),o=pn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,c=0;c<a.length;c++){var d=a[c],h=void 0;h=e.concentric(d),l.push({value:h,node:d}),d._private.scratch.concentric=h}a.updateStyle();for(var m=0;m<a.length;m++){var g=a[m],C=g.layoutDimensions(e);u=Math.max(u,C.w,C.h)}l.sort(function(de,je){return je.value-de.value});for(var y=e.levelWidth(a),w=[[]],_=w[0],x=0;x<l.length;x++){var k=l[x];if(_.length>0){var O=Math.abs(_[0].value-k.value);O>=y&&(_=[],w.push(_))}_.push(k)}var p=u+e.minNodeSpacing;if(!e.avoidOverlap){var I=w.length>0&&w[0].length>1,N=Math.min(o.w,o.h)/2-p,j=N/(w.length+I?1:0);p=Math.min(p,j)}for(var H=0,G=0;G<w.length;G++){var P=w[G],z=e.sweep===void 0?2*Math.PI-2*Math.PI/P.length:e.sweep,A=P.dTheta=z/Math.max(1,P.length-1);if(P.length>1&&e.avoidOverlap){var T=Math.cos(A)-Math.cos(0),E=Math.sin(A)-Math.sin(0),M=Math.sqrt(p*p/(T*T+E*E));H=Math.max(M,H)}P.r=H,H+=p}if(e.equidistant){for(var L=0,F=0,X=0;X<w.length;X++){var K=w[X],Y=K.r-F;L=Math.max(L,Y)}F=0;for(var ae=0;ae<w.length;ae++){var he=w[ae];ae===0&&(F=he.r),he.r=F,F+=L}}for(var be={},me=0;me<w.length;me++)for(var we=w[me],xe=we.dTheta,oe=we.r,$=0;$<we.length;$++){var Q=we[$],J=e.startAngle+(t?1:-1)*xe*$,le={x:s.x+oe*Math.cos(J),y:s.y+oe*Math.sin(J)};be[Q.node.id()]=le}return i.nodes().layoutPositions(this,e,function(de){var je=de.id();return be[je]}),this};var Wu,Dw={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Jl(r){this.options=Tt({},Dw,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var a=i.source().data("id"),o=i.target().data("id"),s=e.some(function(u){return u.data("id")===a}),l=e.some(function(u){return u.data("id")===o});return!s||!l});this.options.eles=this.options.eles.not(n)}Jl.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?Wu=!0:Wu=!1;var n=Mw(e,t,r);Wu&&Iw(n),r.randomize&&Bw(n);var i=pi(),a=function(){Rw(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(h){return!(t.stopped||h>=r.numIter||(Ow(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)a(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var h=r.eles.nodes(),m=Bp(n,r,h);h.layoutPositions(t,r,m)}},l=0,u=!0;if(r.animate===!0){var c=function d(){for(var h=0;u&&h<r.refresh;)u=o(l),l++,h++;if(!u)Jd(n,r),s();else{var m=pi();m-i>=r.animationThreshold&&a(),Dl(d)}};c()}else{for(;u;)u=o(l),l++;Jd(n,r),s()}return this};Jl.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Jl.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Mw=function(e,t,n){for(var i=n.eles.edges(),a=n.eles.nodes(),o=pn(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=n.eles.components(),u={},c=0;c<l.length;c++)for(var d=l[c],h=0;h<d.length;h++){var m=d[h];u[m.id()]=c}for(var c=0;c<s.nodeSize;c++){var g=a[c],C=g.layoutDimensions(n),y={};y.isLocked=g.locked(),y.id=g.data("id"),y.parentId=g.data("parent"),y.cmptId=u[g.id()],y.children=[],y.positionX=g.position("x"),y.positionY=g.position("y"),y.offsetX=0,y.offsetY=0,y.height=C.w,y.width=C.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(g.style("padding")),y.padRight=parseFloat(g.style("padding")),y.padTop=parseFloat(g.style("padding")),y.padBottom=parseFloat(g.style("padding")),y.nodeRepulsion=cr(n.nodeRepulsion)?n.nodeRepulsion(g):n.nodeRepulsion,s.layoutNodes.push(y),s.idToIndex[y.id]=c}for(var w=[],_=0,x=-1,k=[],c=0;c<s.nodeSize;c++){var g=s.layoutNodes[c],O=g.parentId;O!=null?s.layoutNodes[s.idToIndex[O]].children.push(g.id):(w[++x]=g.id,k.push(g.id))}for(s.graphSet.push(k);_<=x;){var p=w[_++],I=s.idToIndex[p],m=s.layoutNodes[I],N=m.children;if(N.length>0){s.graphSet.push(N);for(var c=0;c<N.length;c++)w[++x]=N[c]}}for(var c=0;c<s.graphSet.length;c++)for(var j=s.graphSet[c],h=0;h<j.length;h++){var H=s.idToIndex[j[h]];s.indexToGraph[H]=c}for(var c=0;c<s.edgeSize;c++){var G=i[c],P={};P.id=G.data("id"),P.sourceId=G.data("source"),P.targetId=G.data("target");var z=cr(n.idealEdgeLength)?n.idealEdgeLength(G):n.idealEdgeLength,A=cr(n.edgeElasticity)?n.edgeElasticity(G):n.edgeElasticity,T=s.idToIndex[P.sourceId],E=s.idToIndex[P.targetId],M=s.indexToGraph[T],L=s.indexToGraph[E];if(M!=L){for(var F=Pw(P.sourceId,P.targetId,s),X=s.graphSet[F],K=0,y=s.layoutNodes[T];X.indexOf(y.id)===-1;)y=s.layoutNodes[s.idToIndex[y.parentId]],K++;for(y=s.layoutNodes[E];X.indexOf(y.id)===-1;)y=s.layoutNodes[s.idToIndex[y.parentId]],K++;z*=K*n.nestingFactor}P.idealLength=z,P.elasticity=A,s.layoutEdges.push(P)}return s},Pw=function(e,t,n){var i=Aw(e,t,0,n);return 2>i.count?0:i.graph},Aw=function r(e,t,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var l=a[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(c.length!==0){var d=i.indexToGraph[i.idToIndex[c[0]]],h=r(e,t,d,i);if(h.count!==0)if(h.count===1){if(o++,o===2)break}else return h}}return{count:o,graph:n}},Iw,Bw=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*i)}},Bp=function(e,t,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,s.positionX),a.x2=Math.max(a.x2,s.positionX),a.y1=Math.min(a.y1,s.positionY),a.y2=Math.max(a.y2,s.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var u=(l.positionX-a.x1)/a.w,c=(l.positionY-a.y1)/a.h;return{x:i.x1+u*i.w,y:i.y1+c*i.h}}else return{x:l.positionX,y:l.positionY}}},Rw=function(e,t,n){var i=n.layout,a=n.eles.nodes(),o=Bp(e,n,a);a.positions(o),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},Ow=function(e,t,n){Lw(e,t),jw(e),Vw(e,t),zw(e),qw(e)},Lw=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,o=0;o<a;o++)for(var s=e.layoutNodes[e.idToIndex[i[o]]],l=o+1;l<a;l++){var u=e.layoutNodes[e.idToIndex[i[l]]];Fw(s,u,e,t)}},Zd=function(e){return-e+2*e*Math.random()},Fw=function(e,t,n,i){var a=e.cmptId,o=t.cmptId;if(!(a!==o&&!n.isCompound)){var s=t.positionX-e.positionX,l=t.positionY-e.positionY,u=1;s===0&&l===0&&(s=Zd(u),l=Zd(u));var c=Nw(e,t,s,l);if(c>0)var d=i.nodeOverlap*c,h=Math.sqrt(s*s+l*l),m=d*s/h,g=d*l/h;else var C=Ol(e,s,l),y=Ol(t,-1*s,-1*l),w=y.x-C.x,_=y.y-C.y,x=w*w+_*_,h=Math.sqrt(x),d=(e.nodeRepulsion+t.nodeRepulsion)/x,m=d*w/h,g=d*_/h;e.isLocked||(e.offsetX-=m,e.offsetY-=g),t.isLocked||(t.offsetX+=m,t.offsetY+=g)}},Nw=function(e,t,n,i){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(i>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},Ol=function(e,t,n){var i=e.positionX,a=e.positionY,o=e.height||1,s=e.width||1,l=n/t,u=o/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=a+o/2,c):0<t&&-1*u<=l&&l<=u?(c.x=i+s/2,c.y=a+s*n/2/t,c):0>t&&-1*u<=l&&l<=u?(c.x=i-s/2,c.y=a-s*n/2/t,c):0<n&&(l<=-1*u||l>=u)?(c.x=i+o*t/2/n,c.y=a+o/2,c):(0>n&&(l<=-1*u||l>=u)&&(c.x=i-o*t/2/n,c.y=a-o/2),c)},jw=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,c=l.positionY-o.positionY;if(!(u===0&&c===0)){var d=Ol(o,u,c),h=Ol(l,-1*u,-1*c),m=h.x-d.x,g=h.y-d.y,C=Math.sqrt(m*m+g*g),y=Math.pow(i.idealLength-C,2)/i.elasticity;if(C!==0)var w=y*m/C,_=y*g/C;else var w=0,_=0;o.isLocked||(o.offsetX+=w,o.offsetY+=_),l.isLocked||(l.offsetX-=w,l.offsetY-=_)}}},Vw=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(i===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],s=c.positionX,l=c.positionY;for(var d=0;d<o;d++){var h=e.layoutNodes[e.idToIndex[a[d]]];if(!h.isLocked){var m=s-h.positionX,g=l-h.positionY,C=Math.sqrt(m*m+g*g);if(C>n){var y=t.gravity*m/C,w=t.gravity*g/C;h.offsetX+=y,h.offsetY+=w}}}}},zw=function(e,t){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var o=n[i++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var c=l.offsetX,d=l.offsetY,h=0;h<u.length;h++){var m=e.layoutNodes[e.idToIndex[u[h]]];m.offsetX+=c,m.offsetY+=d,n[++a]=u[h]}l.offsetX=0,l.offsetY=0}}},qw=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=Gw(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Hw(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},Gw=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else var a={x:e,y:t};return a},Hw=function r(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return r(i,t)}},Jd=function(e,t){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var o=n[a],s=o.cmptId,l=i[s]=i[s]||[];l.push(o)}for(var u=0,a=0;a<i.length;a++){var c=i[a];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var d=0;d<c.length;d++){var h=c[d];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}i.sort(function(_,x){return x.w*x.h-_.w*_.h});for(var m=0,g=0,C=0,y=0,w=Math.sqrt(u)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var c=i[a];if(c){for(var d=0;d<c.length;d++){var h=c[d];h.isLocked||(h.positionX+=m-c.x1,h.positionY+=g-c.y1)}m+=c.w+t.componentSpacing,C+=c.w+t.componentSpacing,y=Math.max(y,c.h),C>w&&(g+=y+t.componentSpacing,m=0,C=0,y=0)}}},Ww={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Rp(r){this.options=Tt({},Ww,r)}Rp.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=pn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(ae){return{x:a.x1,y:a.y1}});else{var o=i.size(),s=Math.sqrt(o*a.h/a.w),l=Math.round(s),u=Math.round(a.w/a.h*s),c=function(he){if(he==null)return Math.min(l,u);var be=Math.min(l,u);be==l?l=he:u=he},d=function(he){if(he==null)return Math.max(l,u);var be=Math.max(l,u);be==l?l=he:u=he},h=e.rows,m=e.cols!=null?e.cols:e.columns;if(h!=null&&m!=null)l=h,u=m;else if(h!=null&&m==null)l=h,u=Math.ceil(o/l);else if(h==null&&m!=null)u=m,l=Math.ceil(o/u);else if(u*l>o){var g=c(),C=d();(g-1)*C>=o?c(g-1):(C-1)*g>=o&&d(C-1)}else for(;u*l<o;){var y=c(),w=d();(w+1)*y>=o?d(w+1):c(y+1)}var _=a.w/u,x=a.h/l;if(e.condense&&(_=0,x=0),e.avoidOverlap)for(var k=0;k<i.length;k++){var O=i[k],p=O._private.position;(p.x==null||p.y==null)&&(p.x=0,p.y=0);var I=O.layoutDimensions(e),N=e.avoidOverlapPadding,j=I.w+N,H=I.h+N;_=Math.max(_,j),x=Math.max(x,H)}for(var G={},P=function(he,be){return!!G["c-"+he+"-"+be]},z=function(he,be){G["c-"+he+"-"+be]=!0},A=0,T=0,E=function(){T++,T>=u&&(T=0,A++)},M={},L=0;L<i.length;L++){var F=i[L],X=e.position(F);if(X&&(X.row!==void 0||X.col!==void 0)){var K={row:X.row,col:X.col};if(K.col===void 0)for(K.col=0;P(K.row,K.col);)K.col++;else if(K.row===void 0)for(K.row=0;P(K.row,K.col);)K.row++;M[F.id()]=K,z(K.row,K.col)}}var Y=function(he,be){var me,we;if(he.locked()||he.isParent())return!1;var xe=M[he.id()];if(xe)me=xe.col*_+_/2+a.x1,we=xe.row*x+x/2+a.y1;else{for(;P(A,T);)E();me=T*_+_/2+a.x1,we=A*x+x/2+a.y1,z(A,T),E()}return{x:me,y:we}};i.layoutPositions(this,e,Y)}return this};var $w={ready:function(){},stop:function(){}};function Bc(r){this.options=Tt({},$w,r)}Bc.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};Bc.prototype.stop=function(){return this};var Uw={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Op(r){this.options=Tt({},Uw,r)}Op.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=cr(r.positions);function i(a){if(r.positions==null)return Q0(a.position());if(n)return r.positions(a);var o=r.positions[a._private.data.id];return o??null}return t.layoutPositions(this,r,function(a,o){var s=i(a);return a.locked()||s==null?!1:s}),this};var Kw={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Lp(r){this.options=Tt({},Kw,r)}Lp.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=pn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var Xw=[{name:"breadthfirst",impl:Pp},{name:"circle",impl:Ap},{name:"concentric",impl:Ip},{name:"cose",impl:Jl},{name:"grid",impl:Rp},{name:"null",impl:Bc},{name:"preset",impl:Op},{name:"random",impl:Lp}];function Fp(r){this.options=r,this.notifications=0}var eh=function(){},th=function(){throw new Error("A headless instance can not render images")};Fp.prototype={recalculateRenderedStyle:eh,notify:function(){this.notifications++},init:eh,isHeadless:function(){return!0},png:th,jpg:th};var Rc={};Rc.arrowShapeWidth=.3;Rc.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(u,c,d,h,m,g,C){var y=m.x-d/2-C,w=m.x+d/2+C,_=m.y-d/2-C,x=m.y+d/2+C,k=y<=u&&u<=w&&_<=c&&c<=x;return k},n=function(u,c,d,h,m){var g=u*Math.cos(h)-c*Math.sin(h),C=u*Math.sin(h)+c*Math.cos(h),y=g*d,w=C*d,_=y+m.x,x=w+m.y;return{x:_,y:x}},i=function(u,c,d,h){for(var m=[],g=0;g<u.length;g+=2){var C=u[g],y=u[g+1];m.push(n(C,y,c,d,h))}return m},a=function(u){for(var c=[],d=0;d<u.length;d++){var h=u[d];c.push(h.x,h.y)}return c},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,c){yt(c)&&(c=r[c]),r[u]=Tt({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,m,g,C,y,w){var _=a(i(this.points,g+2*w,C,y)),x=hn(h,m,_);return x},roughCollide:t,draw:function(h,m,g,C){var y=i(this.points,m,g,C);e.arrowShapeImpl("polygon")(h,y)},spacing:function(h){return 0},gap:o},c)};s("none",{collide:Ml,roughCollide:Ml,draw:bc,spacing:fd,gap:fd}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(u,c,d,h,m){var g=i(this.points,c,d,h),C=this.controlPoint,y=n(C[0],C[1],c,d,h);e.arrowShapeImpl(this.name)(u,g,y)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,c,d,h,m,g,C){var y=a(i(this.points,d+2*C,h,m)),w=a(i(this.pointsTee,d+2*C,h,m)),_=hn(u,c,y)||hn(u,c,w);return _},draw:function(u,c,d,h,m){var g=i(this.points,c,d,h),C=i(this.pointsTee,c,d,h);e.arrowShapeImpl(this.name)(u,g,C)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,c,d,h,m,g,C){var y=m,w=Math.pow(y.x-u,2)+Math.pow(y.y-c,2)<=Math.pow((d+2*C)*this.radius,2),_=a(i(this.points,d+2*C,h,m));return hn(u,c,_)||w},draw:function(u,c,d,h,m){var g=i(this.pointsTr,c,d,h);e.arrowShapeImpl(this.name)(u,g,h.x,h.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,c){var d=this.baseCrossLinePts.slice(),h=c/u,m=3,g=5;return d[m]=d[m]-h,d[g]=d[g]-h,d},collide:function(u,c,d,h,m,g,C){var y=a(i(this.points,d+2*C,h,m)),w=a(i(this.crossLinePts(d,g),d+2*C,h,m)),_=hn(u,c,y)||hn(u,c,w);return _},draw:function(u,c,d,h,m){var g=i(this.points,c,d,h),C=i(this.crossLinePts(c,m),c,d,h);e.arrowShapeImpl(this.name)(u,g,C)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,c,d,h,m,g,C){var y=m,w=Math.pow(y.x-u,2)+Math.pow(y.y-c,2)<=Math.pow((d+2*C)*this.radius,2);return w},draw:function(u,c,d,h,m){e.arrowShapeImpl(this.name)(u,h.x,h.y,this.radius*c)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var ma={};ma.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=t.pan(),l=t.zoom(),u=((r-i)/o-s.x)/l,c=((e-a)/o-s.y)/l;return[u,c]};ma.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(w){return parseFloat(t.getPropertyValue(w))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,l=i.left+i.right,u=i.top+i.bottom,c=a.left+a.right,d=e.width/(o+c),h=o-l,m=s-u,g=e.left+i.left+a.left,C=e.top+i.top+a.top;return this.containerBB=[g,C,h,m,d]};ma.invalidateContainerClientCoordsCache=function(){this.containerBB=null};ma.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};ma.findNearestElements=function(r,e,t,n){var i=this,a=this,o=a.getCachedZSortedEles(),s=[],l=a.cy.zoom(),u=a.cy.hasCompoundNodes(),c=(n?24:8)/l,d=(n?8:2)/l,h=(n?8:2)/l,m=1/0,g,C;t&&(o=o.interactive);function y(I,N){if(I.isNode()){if(C)return;C=I,s.push(I)}if(I.isEdge()&&(N==null||N<m))if(g){if(g.pstyle("z-compound-depth").value===I.pstyle("z-compound-depth").value&&g.pstyle("z-compound-depth").value===I.pstyle("z-compound-depth").value){for(var j=0;j<s.length;j++)if(s[j].isEdge()){s[j]=I,g=I,m=N??m;break}}}else s.push(I),g=I,m=N??m}function w(I){var N=I.outerWidth()+2*d,j=I.outerHeight()+2*d,H=N/2,G=j/2,P=I.position(),z=I.pstyle("corner-radius").value==="auto"?"auto":I.pstyle("corner-radius").pfValue,A=I._private.rscratch;if(P.x-H<=r&&r<=P.x+H&&P.y-G<=e&&e<=P.y+G){var T=a.nodeShapes[i.getNodeShape(I)];if(T.checkPoint(r,e,0,N,j,P.x,P.y,z,A))return y(I,0),!0}}function _(I){var N=I._private,j=N.rscratch,H=I.pstyle("width").pfValue,G=I.pstyle("arrow-scale").value,P=H/2+c,z=P*P,A=P*2,L=N.source,F=N.target,T;if(j.edgeType==="segments"||j.edgeType==="straight"||j.edgeType==="haystack"){for(var E=j.allpts,M=0;M+3<E.length;M+=2)if(cy(r,e,E[M],E[M+1],E[M+2],E[M+3],A)&&z>(T=vy(r,e,E[M],E[M+1],E[M+2],E[M+3])))return y(I,T),!0}else if(j.edgeType==="bezier"||j.edgeType==="multibezier"||j.edgeType==="self"||j.edgeType==="compound"){for(var E=j.allpts,M=0;M+5<j.allpts.length;M+=4)if(fy(r,e,E[M],E[M+1],E[M+2],E[M+3],E[M+4],E[M+5],A)&&z>(T=py(r,e,E[M],E[M+1],E[M+2],E[M+3],E[M+4],E[M+5])))return y(I,T),!0}for(var L=L||N.source,F=F||N.target,X=i.getArrowWidth(H,G),K=[{name:"source",x:j.arrowStartX,y:j.arrowStartY,angle:j.srcArrowAngle},{name:"target",x:j.arrowEndX,y:j.arrowEndY,angle:j.tgtArrowAngle},{name:"mid-source",x:j.midX,y:j.midY,angle:j.midsrcArrowAngle},{name:"mid-target",x:j.midX,y:j.midY,angle:j.midtgtArrowAngle}],M=0;M<K.length;M++){var Y=K[M],ae=a.arrowShapes[I.pstyle(Y.name+"-arrow-shape").value],he=I.pstyle("width").pfValue;if(ae.roughCollide(r,e,X,Y.angle,{x:Y.x,y:Y.y},he,c)&&ae.collide(r,e,X,Y.angle,{x:Y.x,y:Y.y},he,c))return y(I),!0}u&&s.length>0&&(w(L),w(F))}function x(I,N,j){return Nn(I,N,j)}function k(I,N){var j=I._private,H=h,G;N?G=N+"-":G="",I.boundingBox();var P=j.labelBounds[N||"main"],z=I.pstyle(G+"label").value,A=I.pstyle("text-events").strValue==="yes";if(!(!A||!z)){var T=x(j.rscratch,"labelX",N),E=x(j.rscratch,"labelY",N),M=x(j.rscratch,"labelAngle",N),L=I.pstyle(G+"text-margin-x").pfValue,F=I.pstyle(G+"text-margin-y").pfValue,X=P.x1-H-L,K=P.x2+H-L,Y=P.y1-H-F,ae=P.y2+H-F;if(M){var he=Math.cos(M),be=Math.sin(M),me=function(le,de){return le=le-T,de=de-E,{x:le*he-de*be+T,y:le*be+de*he+E}},we=me(X,Y),xe=me(X,ae),oe=me(K,Y),$=me(K,ae),Q=[we.x+L,we.y+F,oe.x+L,oe.y+F,$.x+L,$.y+F,xe.x+L,xe.y+F];if(hn(r,e,Q))return y(I),!0}else if($a(P,r,e))return y(I),!0}}for(var O=o.length-1;O>=0;O--){var p=o[O];p.isNode()?w(p)||k(p):_(p)||k(p)||k(p,"source")||k(p,"target")}return s};ma.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,a=[],o=Math.min(r,t),s=Math.max(r,t),l=Math.min(e,n),u=Math.max(e,n);r=o,t=s,e=l,n=u;for(var c=pn({x1:r,y1:e,x2:t,y2:n}),d=0;d<i.length;d++){var h=i[d];if(h.isNode()){var m=h,g=m.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});xc(c,g)&&!$h(g,c)&&a.push(m)}else{var C=h,y=C._private,w=y.rscratch;if(w.startX!=null&&w.startY!=null&&!$a(c,w.startX,w.startY)||w.endX!=null&&w.endY!=null&&!$a(c,w.endX,w.endY))continue;if(w.edgeType==="bezier"||w.edgeType==="multibezier"||w.edgeType==="self"||w.edgeType==="compound"||w.edgeType==="segments"||w.edgeType==="haystack"){for(var _=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,x=!0,k=0;k<_.length;k++)if(!uy(c,_[k])){x=!1;break}x&&a.push(C)}else(w.edgeType==="haystack"||w.edgeType==="straight")&&a.push(C)}}return a};var Ll={};Ll.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,c,d,h,m,w,_;if(t?(c=e.haystackPts[0],d=e.haystackPts[1],h=e.haystackPts[2],m=e.haystackPts[3]):(c=e.arrowStartX,d=e.arrowStartY,h=e.arrowEndX,m=e.arrowEndY),w=e.midX,_=e.midY,a)l=c-e.segpts[0],u=d-e.segpts[1];else if(i||o||s||n){var g=e.allpts,C=Ar(g[0],g[2],g[4],.1),y=Ar(g[1],g[3],g[5],.1);l=c-C,u=d-y}else l=c-w,u=d-_;e.srcArrowAngle=al(l,u);var w=e.midX,_=e.midY;if(t&&(w=(c+h)/2,_=(d+m)/2),l=h-c,u=m-d,a){var g=e.allpts;if(g.length/2%2===0){var x=g.length/2,k=x-2;l=g[x]-g[k],u=g[x+1]-g[k+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var x=g.length/2-1,k=x-2;l=g[x]-g[k],u=g[x+1]-g[k+1]}}else if(i||o||s){var g=e.allpts,O=e.ctrlpts,p,I,N,j;if(O.length/2%2===0){var H=g.length/2-1,G=H+2,P=G+2;p=Ar(g[H],g[G],g[P],0),I=Ar(g[H+1],g[G+1],g[P+1],0),N=Ar(g[H],g[G],g[P],1e-4),j=Ar(g[H+1],g[G+1],g[P+1],1e-4)}else{var G=g.length/2-1,H=G-2,P=G+2;p=Ar(g[H],g[G],g[P],.4999),I=Ar(g[H+1],g[G+1],g[P+1],.4999),N=Ar(g[H],g[G],g[P],.5),j=Ar(g[H+1],g[G+1],g[P+1],.5)}l=N-p,u=j-I}if(e.midtgtArrowAngle=al(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,a){var g=e.allpts;if(g.length/2%2!==0){if(!e.isRound){var x=g.length/2-1,z=x+2;l=-(g[z]-g[x]),u=-(g[z+1]-g[x+1])}}}if(e.midsrcArrowAngle=al(l,u),a)l=h-e.segpts[e.segpts.length-2],u=m-e.segpts[e.segpts.length-1];else if(i||o||s||n){var g=e.allpts,A=g.length,C=Ar(g[A-6],g[A-4],g[A-2],.9),y=Ar(g[A-5],g[A-3],g[A-1],.9);l=h-C,u=m-y}else l=h-w,u=m-_;e.tgtArrowAngle=al(l,u)};Ll.getArrowWidth=Ll.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var sc,lc,Zn={},En={},rh,nh,ua,Tl,hi,ia,la,Qn,Fa,pl,Np,jp,uc,cc,ih,ah=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},Yw=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},Qw=function(e,t,n,i,a){if(e!==ih?ah(t,e,Zn):Yw(En,Zn),ah(t,n,En),rh=Zn.nx*En.ny-Zn.ny*En.nx,nh=Zn.nx*En.nx-Zn.ny*-En.ny,hi=Math.asin(Math.max(-1,Math.min(1,rh))),Math.abs(hi)<1e-6){sc=t.x,lc=t.y,la=Fa=0;return}ua=1,Tl=!1,nh<0?hi<0?hi=Math.PI+hi:(hi=Math.PI-hi,ua=-1,Tl=!0):hi>0&&(ua=-1,Tl=!0),t.radius!==void 0?Fa=t.radius:Fa=i,ia=hi/2,pl=Math.min(Zn.len/2,En.len/2),a?(Qn=Math.abs(Math.cos(ia)*Fa/Math.sin(ia)),Qn>pl?(Qn=pl,la=Math.abs(Qn*Math.sin(ia)/Math.cos(ia))):la=Fa):(Qn=Math.min(pl,Fa),la=Math.abs(Qn*Math.sin(ia)/Math.cos(ia))),uc=t.x+En.nx*Qn,cc=t.y+En.ny*Qn,sc=uc-En.ny*la*ua,lc=cc+En.nx*la*ua,Np=t.x+Zn.nx*Qn,jp=t.y+Zn.ny*Qn,ih=t};function Vp(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Oc(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(Qw(r,e,t,n,i),{cx:sc,cy:lc,radius:la,startX:Np,startY:jp,stopX:uc,stopY:cc,startAngle:Zn.ang+Math.PI/2*ua,endAngle:En.ang-Math.PI/2*ua,counterClockwise:Tl})}var Yr={};Yr.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,a,o=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),l=o.units!=null&&s.units!=null,u=function(O,p,I,N){var j=N-p,H=I-O,G=Math.sqrt(H*H+j*j);return{x:-j/G,y:H/G}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":a=t;break;case"intersection":a=n;break;case"endpoints":{if(l){var d=this.manualEndptToPx(r.source()[0],o),h=Cr(d,2),m=h[0],g=h[1],C=this.manualEndptToPx(r.target()[0],s),y=Cr(C,2),w=y[0],_=y[1],x={x1:m,y1:g,x2:w,y2:_};i=u(m,g,w,_),a=x}else Qt("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};Yr.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),c=o.width(),d=s.width(),h=o.height(),m=s.height(),g=t.pstyle("haystack-radius").value,C=g/2;i.haystackPts=i.allpts=[i.source.x*c*C+l.x,i.source.y*h*C+l.y,i.target.x*d*C+u.x,i.target.y*m*C+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Yr.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),a=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),l=a.pfValue[a.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var d=n.pfValue[c],h=i.pfValue[c],m=1-d,g=d,C=this.findMidptPtsEtc(r,e),y=C.midptPts,w=C.vectorNormInverse,_={x:y.x1*m+y.x2*g,y:y.y1*m+y.y2*g};t.segpts.push(_.x+w.x*h,_.y+w.y*h),t.radii.push(a.pfValue[c]!==void 0?a.pfValue[c]:l),t.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:u)==="arc-radius")}};Yr.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,a=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,d=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=t,m=d;n&&(h=0,m=l);var g=u-Math.PI/2,C=g-c/2,y=g+c/2,w=u+"_"+c;h=a[w]===void 0?a[w]=0:++a[w],i.ctrlpts=[o.x+Math.cos(C)*1.4*m*(h/3+1),o.y+Math.sin(C)*1.4*m*(h/3+1),o.x+Math.cos(y)*1.4*m*(h/3+1),o.y+Math.sin(y)*1.4*m*(h/3+1)]};Yr.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,c=e.tgtH,d=r.pstyle("control-point-step-size").pfValue,h=r.pstyle("control-point-distances"),m=h?h.pfValue[0]:void 0,g=t,C=d;n&&(g=0,C=m);var y=50,w={x:a.x-s/2,y:a.y-l/2},_={x:o.x-u/2,y:o.y-c/2},x={x:Math.min(w.x,_.x),y:Math.min(w.y,_.y)},k=.5,O=Math.max(k,Math.log(s*.01)),p=Math.max(k,Math.log(u*.01));i.ctrlpts=[x.x,x.y-(1+Math.pow(y,1.12)/100)*C*(g/3+1)*O,x.x-(1+Math.pow(y,1.12)/100)*C*(g/3+1)*p,x.y]};Yr.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Yr.findBezierPoints=function(r,e,t,n,i){var a=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),l=r.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,d=l.value[0],h=n;a.edgeType=h?"multibezier":"bezier",a.ctrlpts=[];for(var m=0;m<u;m++){var g=(.5-e.eles.length/2+t)*o*(i?-1:1),C=void 0,y=Hh(g);h&&(c=s?s.pfValue[m]:o,d=l.value[m]),n?C=c:C=c!==void 0?y*c:void 0;var w=C!==void 0?C:g,_=1-d,x=d,k=this.findMidptPtsEtc(r,e),O=k.midptPts,p=k.vectorNormInverse,I={x:O.x1*_+O.x2*x,y:O.y1*_+O.y2*x};a.ctrlpts.push(I.x+p.x*w,I.y+p.y*w)}};Yr.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",s="downward",l="upward",u="auto",c=e.posPts,d=e.srcW,h=e.srcH,m=e.tgtW,g=e.tgtH,C=r.pstyle("edge-distances").value,y=C!=="node-position",w=r.pstyle("taxi-direction").value,_=w,x=r.pstyle("taxi-turn"),k=x.units==="%",O=x.pfValue,p=O<0,I=r.pstyle("taxi-turn-min-distance").pfValue,N=y?(d+m)/2:0,j=y?(h+g)/2:0,H=c.x2-c.x1,G=c.y2-c.y1,P=function(Pe,We){return Pe>0?Math.max(Pe-We,0):Math.min(Pe+We,0)},z=P(H,N),A=P(G,j),T=!1;_===u?w=Math.abs(z)>Math.abs(A)?i:n:_===l||_===s?(w=n,T=!0):(_===a||_===o)&&(w=i,T=!0);var E=w===n,M=E?A:z,L=E?G:H,F=Hh(L),X=!1;!(T&&(k||p))&&(_===s&&L<0||_===l&&L>0||_===a&&L>0||_===o&&L<0)&&(F*=-1,M=F*Math.abs(M),X=!0);var K;if(k){var Y=O<0?1+O:O;K=Y*M}else{var ae=O<0?M:0;K=ae+O*F}var he=function(Pe){return Math.abs(Pe)<I||Math.abs(Pe)>=Math.abs(M)},be=he(K),me=he(Math.abs(M)-Math.abs(K)),we=be||me;if(we&&!X)if(E){var xe=Math.abs(L)<=h/2,oe=Math.abs(H)<=m/2;if(xe){var $=(c.x1+c.x2)/2,Q=c.y1,J=c.y2;t.segpts=[$,Q,$,J]}else if(oe){var le=(c.y1+c.y2)/2,de=c.x1,je=c.x2;t.segpts=[de,le,je,le]}else t.segpts=[c.x1,c.y2]}else{var it=Math.abs(L)<=d/2,Ke=Math.abs(G)<=g/2;if(it){var qe=(c.y1+c.y2)/2,Ge=c.x1,et=c.x2;t.segpts=[Ge,qe,et,qe]}else if(Ke){var rt=(c.x1+c.x2)/2,Qe=c.y1,Ye=c.y2;t.segpts=[rt,Qe,rt,Ye]}else t.segpts=[c.x2,c.y1]}else if(E){var Ie=c.y1+K+(y?h/2*F:0),Ve=c.x1,Re=c.x2;t.segpts=[Ve,Ie,Re,Ie]}else{var W=c.x1+K+(y?d/2*F:0),se=c.y1,Te=c.y2;t.segpts=[W,se,W,Te]}if(t.isRound){var ve=r.pstyle("taxi-radius").value,ge=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(ve),t.isArcRadius=new Array(t.segpts.length/2).fill(ge)}};Yr.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,c=e.tgtShape,d=e.srcCornerRadius,h=e.tgtCornerRadius,m=e.srcRs,g=e.tgtRs,C=!at(t.startX)||!at(t.startY),y=!at(t.arrowStartX)||!at(t.arrowStartY),w=!at(t.endX)||!at(t.endY),_=!at(t.arrowEndX)||!at(t.arrowEndY),x=3,k=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,O=x*k,p=da({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),I=p<O,N=da({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),j=N<O,H=!1;if(C||y||I){H=!0;var G={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},P=Math.sqrt(G.x*G.x+G.y*G.y),z={x:G.x/P,y:G.y/P},A=Math.max(a,o),T={x:t.ctrlpts[0]+z.x*2*A,y:t.ctrlpts[1]+z.y*2*A},E=u.intersectLine(n.x,n.y,a,o,T.x,T.y,0,d,m);I?(t.ctrlpts[0]=t.ctrlpts[0]+z.x*(O-p),t.ctrlpts[1]=t.ctrlpts[1]+z.y*(O-p)):(t.ctrlpts[0]=E[0]+z.x*O,t.ctrlpts[1]=E[1]+z.y*O)}if(w||_||j){H=!0;var M={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},L=Math.sqrt(M.x*M.x+M.y*M.y),F={x:M.x/L,y:M.y/L},X=Math.max(a,o),K={x:t.ctrlpts[0]+F.x*2*X,y:t.ctrlpts[1]+F.y*2*X},Y=c.intersectLine(i.x,i.y,s,l,K.x,K.y,0,h,g);j?(t.ctrlpts[0]=t.ctrlpts[0]+F.x*(O-N),t.ctrlpts[1]=t.ctrlpts[1]+F.y*(O-N)):(t.ctrlpts[0]=Y[0]+F.x*O,t.ctrlpts[1]=Y[1]+F.y*O)}H&&this.findEndpoints(r)}};Yr.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=Ar(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=Ar(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var a=2;a+3<e.allpts.length;a+=2){var o=e.radii[a/2-1],s=e.isArcRadius[a/2-1];e.roundCorners.push(Oc({x:e.allpts[a-2],y:e.allpts[a-1]},{x:e.allpts[a],y:e.allpts[a+1],radius:o},{x:e.allpts[a+2],y:e.allpts[a+3]},o,s))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var d={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2],m=[d.x-h.cx,d.y-h.cy],g=h.radius/Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2));m=m.map(function(C){return C*g}),e.midX=h.cx+m[0],e.midY=h.cy+m[1],e.midVector=m}}}};Yr.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||at(e.startX)&&at(e.startY)&&at(e.endX)&&at(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Qt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Yr.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),a={map:new ei,get:function(I){var N=this.map.get(I[0]);return N!=null?N.get(I[1]):null},set:function(I,N){var j=this.map.get(I[0]);j==null&&(j=new ei,this.map.set(I[0],j)),j.set(I[1],N)}},o=[],s=[],l=0;l<r.length;l++){var u=r[l],c=u._private,d=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(d==="haystack"){s.push(u);continue}var h=d==="unbundled-bezier"||d.endsWith("segments")||d==="straight"||d==="straight-triangle"||d.endsWith("taxi"),m=d==="unbundled-bezier"||d==="bezier",g=c.source,C=c.target,y=g.poolIndex(),w=C.poolIndex(),_=[y,w].sort(),x=a.get(_);x==null&&(x={eles:[]},a.set(_,x),o.push(_)),x.eles.push(u),h&&(x.hasUnbundled=!0),m&&(x.hasBezier=!0)}}for(var k=function(I){var N=o[I],j=a.get(N),H=void 0;if(!j.hasUnbundled){var G=j.eles[0].parallelEdges().filter(function(W){return W.isBundledBezier()});Cc(j.eles),G.forEach(function(W){return j.eles.push(W)}),j.eles.sort(function(W,se){return W.poolIndex()-se.poolIndex()})}var P=j.eles[0],z=P.source(),A=P.target();if(z.poolIndex()>A.poolIndex()){var T=z;z=A,A=T}var E=j.srcPos=z.position(),M=j.tgtPos=A.position(),L=j.srcW=z.outerWidth(),F=j.srcH=z.outerHeight(),X=j.tgtW=A.outerWidth(),K=j.tgtH=A.outerHeight(),Y=j.srcShape=t.nodeShapes[e.getNodeShape(z)],ae=j.tgtShape=t.nodeShapes[e.getNodeShape(A)],he=j.srcCornerRadius=z.pstyle("corner-radius").value==="auto"?"auto":z.pstyle("corner-radius").pfValue,be=j.tgtCornerRadius=A.pstyle("corner-radius").value==="auto"?"auto":A.pstyle("corner-radius").pfValue,me=j.tgtRs=A._private.rscratch,we=j.srcRs=z._private.rscratch;j.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var xe=0;xe<j.eles.length;xe++){var oe=j.eles[xe],$=oe[0]._private.rscratch,Q=oe.pstyle("curve-style").value,J=Q==="unbundled-bezier"||Q.endsWith("segments")||Q.endsWith("taxi"),le=!z.same(oe.source());if(!j.calculatedIntersection&&z!==A&&(j.hasBezier||j.hasUnbundled)){j.calculatedIntersection=!0;var de=Y.intersectLine(E.x,E.y,L,F,M.x,M.y,0,he,we),je=j.srcIntn=de,it=ae.intersectLine(M.x,M.y,X,K,E.x,E.y,0,be,me),Ke=j.tgtIntn=it,qe=j.intersectionPts={x1:de[0],x2:it[0],y1:de[1],y2:it[1]},Ge=j.posPts={x1:E.x,x2:M.x,y1:E.y,y2:M.y},et=it[1]-de[1],rt=it[0]-de[0],Qe=Math.sqrt(rt*rt+et*et),Ye=j.vector={x:rt,y:et},Ie=j.vectorNorm={x:Ye.x/Qe,y:Ye.y/Qe},Ve={x:-Ie.y,y:Ie.x};j.nodesOverlap=!at(Qe)||ae.checkPoint(de[0],de[1],0,X,K,M.x,M.y,be,me)||Y.checkPoint(it[0],it[1],0,L,F,E.x,E.y,he,we),j.vectorNormInverse=Ve,H={nodesOverlap:j.nodesOverlap,dirCounts:j.dirCounts,calculatedIntersection:!0,hasBezier:j.hasBezier,hasUnbundled:j.hasUnbundled,eles:j.eles,srcPos:M,srcRs:me,tgtPos:E,tgtRs:we,srcW:X,srcH:K,tgtW:L,tgtH:F,srcIntn:Ke,tgtIntn:je,srcShape:ae,tgtShape:Y,posPts:{x1:Ge.x2,y1:Ge.y2,x2:Ge.x1,y2:Ge.y1},intersectionPts:{x1:qe.x2,y1:qe.y2,x2:qe.x1,y2:qe.y1},vector:{x:-Ye.x,y:-Ye.y},vectorNorm:{x:-Ie.x,y:-Ie.y},vectorNormInverse:{x:-Ve.x,y:-Ve.y}}}var Re=le?H:j;$.nodesOverlap=Re.nodesOverlap,$.srcIntn=Re.srcIntn,$.tgtIntn=Re.tgtIntn,$.isRound=Q.startsWith("round"),i&&(z.isParent()||z.isChild()||A.isParent()||A.isChild())&&(z.parents().anySame(A)||A.parents().anySame(z)||z.same(A)&&z.isParent())?e.findCompoundLoopPoints(oe,Re,xe,J):z===A?e.findLoopPoints(oe,Re,xe,J):Q.endsWith("segments")?e.findSegmentsPoints(oe,Re):Q.endsWith("taxi")?e.findTaxiPoints(oe,Re):Q==="straight"||!J&&j.eles.length%2===1&&xe===Math.floor(j.eles.length/2)?e.findStraightEdgePoints(oe):e.findBezierPoints(oe,Re,xe,J,le),e.findEndpoints(oe),e.tryToCorrectInvalidPoints(oe,Re),e.checkForInvalidEdgeWarning(oe),e.storeAllpts(oe),e.storeEdgeProjections(oe),e.calculateArrowAngles(oe),e.recalculateEdgeLabelProjections(oe),e.calculateLabelAngles(oe)}},O=0;O<o.length;O++)k(O);this.findHaystackPoints(s)}};function zp(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}Yr.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return zp(e.segpts)};Yr.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return zp(e.ctrlpts)};Yr.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Qo={};Qo.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),a=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=n.x,s[1]+=n.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(i,a),c=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,a,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Qo.findEndpoints=function(r){var e=this,t,n=r.source()[0],i=r.target()[0],a=n.position(),o=i.position(),s=r.pstyle("target-arrow-shape").value,l=r.pstyle("source-arrow-shape").value,u=r.pstyle("target-distance-from-node").pfValue,c=r.pstyle("source-distance-from-node").pfValue,d=n._private.rscratch,h=i._private.rscratch,m=r.pstyle("curve-style").value,g=r._private.rscratch,C=g.edgeType,y=m==="taxi",w=C==="self"||C==="compound",_=C==="bezier"||C==="multibezier"||w,x=C!=="bezier",k=C==="straight"||C==="segments",O=C==="segments",p=_||x||k,I=w||y,N=r.pstyle("source-endpoint"),j=I?"outside-to-node":N.value,H=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,G=r.pstyle("target-endpoint"),P=I?"outside-to-node":G.value,z=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;g.srcManEndpt=N,g.tgtManEndpt=G;var A,T,E,M;if(_){var L=[g.ctrlpts[0],g.ctrlpts[1]],F=x?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:L;A=F,T=L}else if(k){var X=O?g.segpts.slice(0,2):[o.x,o.y],K=O?g.segpts.slice(g.segpts.length-2):[a.x,a.y];A=K,T=X}if(P==="inside-to-node")t=[o.x,o.y];else if(G.units)t=this.manualEndptToPx(i,G);else if(P==="outside-to-line")t=g.tgtIntn;else if(P==="outside-to-node"||P==="outside-to-node-or-label"?E=A:(P==="outside-to-line"||P==="outside-to-line-or-label")&&(E=[a.x,a.y]),t=e.nodeShapes[this.getNodeShape(i)].intersectLine(o.x,o.y,i.outerWidth(),i.outerHeight(),E[0],E[1],0,z,h),P==="outside-to-node-or-label"||P==="outside-to-line-or-label"){var Y=i._private.rscratch,ae=Y.labelWidth,he=Y.labelHeight,be=Y.labelX,me=Y.labelY,we=ae/2,xe=he/2,oe=i.pstyle("text-valign").value;oe==="top"?me-=xe:oe==="bottom"&&(me+=xe);var $=i.pstyle("text-halign").value;$==="left"?be-=we:$==="right"&&(be+=we);var Q=No(E[0],E[1],[be-we,me-xe,be+we,me-xe,be+we,me+xe,be-we,me+xe],o.x,o.y);if(Q.length>0){var J=a,le=oa(J,ja(t)),de=oa(J,ja(Q)),je=le;if(de<le&&(t=Q,je=de),Q.length>2){var it=oa(J,{x:Q[2],y:Q[3]});it<je&&(t=[Q[2],Q[3]])}}}var Ke=ol(t,A,e.arrowShapes[s].spacing(r)+u),qe=ol(t,A,e.arrowShapes[s].gap(r)+u);if(g.endX=qe[0],g.endY=qe[1],g.arrowEndX=Ke[0],g.arrowEndY=Ke[1],j==="inside-to-node")t=[a.x,a.y];else if(N.units)t=this.manualEndptToPx(n,N);else if(j==="outside-to-line")t=g.srcIntn;else if(j==="outside-to-node"||j==="outside-to-node-or-label"?M=T:(j==="outside-to-line"||j==="outside-to-line-or-label")&&(M=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(a.x,a.y,n.outerWidth(),n.outerHeight(),M[0],M[1],0,H,d),j==="outside-to-node-or-label"||j==="outside-to-line-or-label"){var Ge=n._private.rscratch,et=Ge.labelWidth,rt=Ge.labelHeight,Qe=Ge.labelX,Ye=Ge.labelY,Ie=et/2,Ve=rt/2,Re=n.pstyle("text-valign").value;Re==="top"?Ye-=Ve:Re==="bottom"&&(Ye+=Ve);var W=n.pstyle("text-halign").value;W==="left"?Qe-=Ie:W==="right"&&(Qe+=Ie);var se=No(M[0],M[1],[Qe-Ie,Ye-Ve,Qe+Ie,Ye-Ve,Qe+Ie,Ye+Ve,Qe-Ie,Ye+Ve],a.x,a.y);if(se.length>0){var Te=o,ve=oa(Te,ja(t)),ge=oa(Te,ja(se)),ze=ve;if(ge<ve&&(t=[se[0],se[1]],ze=ge),se.length>2){var Pe=oa(Te,{x:se[2],y:se[3]});Pe<ze&&(t=[se[2],se[3]])}}}var We=ol(t,T,e.arrowShapes[l].spacing(r)+c),gt=ol(t,T,e.arrowShapes[l].gap(r)+c);g.startX=gt[0],g.startY=gt[1],g.arrowStartX=We[0],g.arrowStartY=We[1],p&&(!at(g.startX)||!at(g.startY)||!at(g.endX)||!at(g.endY)?g.badLine=!0:g.badLine=!1)};Qo.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Qo.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Lc={};function Zw(r,e,t){for(var n=function(u,c,d,h){return Ar(u,c,d,h)},i=e._private,a=i.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];a.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}Lc.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)Zw(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)a.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};Lc.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var ni={};ni.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Li(e)){var t,n,i=r._private,a=r.width(),o=r.height(),s=r.padding(),l=r.position(),u=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,d=i.rscratch,h=i.rstyle;switch(u){case"left":t=l.x-a/2-s;break;case"right":t=l.x+a/2+s;break;default:t=l.x}switch(c){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}d.labelX=t,d.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var qp=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},Gp=function(e,t){var n=t.x-e.x,i=t.y-e.y;return qp(n,i)},Jw=function(e,t,n,i){var a=Fo(0,i-.001,1),o=Fo(0,i+.001,1),s=za(e,t,n,a),l=za(e,t,n,o);return Gp(s,l)};ni.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,a={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var o=function(d,h,m){Ii(t.rscratch,d,h,m),Ii(t.rstyle,d,h,m)};o("labelX",null,e.x),o("labelY",null,e.y);var s=qp(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function c(){if(c.cache)return c.cache;for(var d=[],h=0;h+5<n.allpts.length;h+=4){var m={x:n.allpts[h],y:n.allpts[h+1]},g={x:n.allpts[h+2],y:n.allpts[h+3]},C={x:n.allpts[h+4],y:n.allpts[h+5]};d.push({p0:m,p1:g,p2:C,startDist:0,length:0,segments:[]})}var y=t.rstyle.bezierPts,w=i.bezierProjPcts.length;function _(I,N,j,H,G){var P=da(N,j),z=I.segments[I.segments.length-1],A={p0:N,p1:j,t0:H,t1:G,startDist:z?z.startDist+z.length:0,length:P};I.segments.push(A),I.length+=P}for(var x=0;x<d.length;x++){var k=d[x],O=d[x-1];O&&(k.startDist=O.startDist+O.length),_(k,k.p0,y[x*w],0,i.bezierProjPcts[0]);for(var p=0;p<w-1;p++)_(k,y[x*w+p],y[x*w+p+1],i.bezierProjPcts[p],i.bezierProjPcts[p+1]);_(k,y[x*w+w-1],k.p2,i.bezierProjPcts[w-1],1)}return c.cache=d},u=function(d){var h,m=d==="source";if(a[d]){var g=r.pstyle(d+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var C=l(),y,w=0,_=0,x=0;x<C.length;x++){for(var k=C[m?x:C.length-1-x],O=0;O<k.segments.length;O++){var p=k.segments[m?O:k.segments.length-1-O],I=x===C.length-1&&O===k.segments.length-1;if(w=_,_+=p.length,_>=g||I){y={cp:k,segment:p};break}}if(y)break}var N=y.cp,j=y.segment,H=(g-w)/j.length,G=j.t1-j.t0,P=m?j.t0+G*H:j.t1-G*H;P=Fo(0,P,1),e=za(N.p0,N.p1,N.p2,P),h=Jw(N.p0,N.p1,N.p2,P);break}case"straight":case"segments":case"haystack":{for(var z=0,A,T,E,M,L=n.allpts.length,F=0;F+3<L&&(m?(E={x:n.allpts[F],y:n.allpts[F+1]},M={x:n.allpts[F+2],y:n.allpts[F+3]}):(E={x:n.allpts[L-2-F],y:n.allpts[L-1-F]},M={x:n.allpts[L-4-F],y:n.allpts[L-3-F]}),A=da(E,M),T=z,z+=A,!(z>=g));F+=2);var X=g-T,K=X/A;K=Fo(0,K,1),e=iy(E,M,K),h=Gp(E,M);break}}o("labelX",d,e.x),o("labelY",d,e.y),o("labelAutoAngle",d,h)}};u("source"),u("target"),this.applyLabelDimensions(r)}};ni.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};ni.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=this.calculateLabelDimensions(r,n),a=r.pstyle("line-height").pfValue,o=r.pstyle("text-wrap").strValue,s=Nn(t.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(s.length,1),u=i.height/l,c=u*a,d=i.width,h=i.height+(l-1)*(a-1)*u;Ii(t.rstyle,"labelWidth",e,d),Ii(t.rscratch,"labelWidth",e,d),Ii(t.rstyle,"labelHeight",e,h),Ii(t.rscratch,"labelHeight",e,h),Ii(t.rscratch,"labelLineHeight",e,c)};ni.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,a=r.pstyle("text-transform").value,o=function(ae,he){return he?(Ii(t.rscratch,ae,e,he),he):Nn(t.rscratch,ae,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="\u200B",c=i.split(`
`),d=r.pstyle("text-max-width").pfValue,h=r.pstyle("text-overflow-wrap").value,m=h==="anywhere",g=[],C=/[\s\u200b]+|$/g,y=0;y<c.length;y++){var w=c[y],_=this.calculateLabelDimensions(r,w),x=_.width;if(m){var k=w.split("").join(u);w=k}if(x>d){var O=w.matchAll(C),p="",I=0,N=bn(O),j;try{for(N.s();!(j=N.n()).done;){var H=j.value,G=H[0],P=w.substring(I,H.index);I=H.index+G.length;var z=p.length===0?P:p+P+G,A=this.calculateLabelDimensions(r,z),T=A.width;T<=d?p+=P+G:(p&&g.push(p),p=P+G)}}catch(Y){N.e(Y)}finally{N.f()}p.match(/^[\s\u200b]+$/)||g.push(p)}else g.push(w)}o("labelWrapCachedLines",g),i=o("labelWrapCachedText",g.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var E=r.pstyle("text-max-width").pfValue,M="",L="\u2026",F=!1;if(this.calculateLabelDimensions(r,i).width<E)return i;for(var X=0;X<i.length;X++){var K=this.calculateLabelDimensions(r,M+i[X]+L).width;if(K>E)break;M+=i[X],X===i.length-1&&(F=!0)}return F||(M+=L),M}return i};ni.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};ni.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,a=Fi(e,r._private.labelDimsKey),o=t.labelDimCache||(t.labelDimCache=[]),s=o[a];if(s!=null)return s;var l=0,u=r.pstyle("font-style").strValue,c=r.pstyle("font-size").pfValue,d=r.pstyle("font-family").strValue,h=r.pstyle("font-weight").strValue,m=this.labelCalcCanvas,g=this.labelCalcCanvasContext;if(!m){m=this.labelCalcCanvas=i.createElement("canvas"),g=this.labelCalcCanvasContext=m.getContext("2d");var C=m.style;C.position="absolute",C.left="-9999px",C.top="-9999px",C.zIndex="-1",C.visibility="hidden",C.pointerEvents="none"}g.font="".concat(u," ").concat(h," ").concat(c,"px ").concat(d);for(var y=0,w=0,_=e.split(`
`),x=0;x<_.length;x++){var k=_[x],O=g.measureText(k),p=Math.ceil(O.width),I=c;y=Math.max(p,y),w+=I}return y+=l,w+=l,o[a]={width:y,height:w}};ni.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),a=e?e+"-":"",o=r.pstyle(a+"text-rotation"),s=o.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};ni.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var Hp={},oh=28,sh=!1;Hp.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<oh||r.height()<oh))return sh||(Qt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),sh=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var eu={};eu.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],c=u._private,d=c.rstyle;d.clean=!1,d.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var i=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(n(u.connectedEdges()),c.cleanConnected=!0)}if(s)for(var d=0;d<s.length;d++){var h=s[d];h(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};eu.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};eu.recalculateRenderedStyle=function(r,e){var t=function(k){return k._private.rstyle.cleanConnected},n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<r.length;a++){var o=r[a],s=o._private,l=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(o):n.push(o),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],d=c._private,h=d.rstyle,m=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=m.x,h.nodeY=m.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var g=0;g<n.length;g++){var C=n[g],y=C._private,w=y.rstyle,_=y.rscratch;w.srcX=_.arrowStartX,w.srcY=_.arrowStartY,w.tgtX=_.arrowEndX,w.tgtY=_.arrowEndY,w.midX=_.midX,w.midY=_.midY,w.labelAngle=_.labelAngle,w.sourceLabelAngle=_.sourceLabelAngle,w.targetLabelAngle=_.targetLabelAngle}}};var tu={};tu.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};tu.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};tu.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(kp),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Wp={};[ma,Ll,Yr,Qo,Lc,ni,Hp,eu,tu].forEach(function(r){Tt(Wp,r)});var $p={};$p.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},a=i[r];if(a)return a.image.complete||a.image.addEventListener("load",t),a.image;a=i[r]=i[r]||{};var o=a.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",l=r.substring(0,s.length).toLowerCase()===s;return l||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var ro={};ro.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var a=[],o=0;o<r.length;o++){var s=r[o];if(s!==void 0){var l=this.binder(s);a.push(l.on.apply(l,i))}}return a}var l=this.binder(r);return l.on.apply(l,i)};ro.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||Tm(r);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var o=function(l,u,c){var d=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(d[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:d}),(r.addEventListener||r.on).apply(r,d),this};return{on:o,addEventListener:o,addListener:o,bind:o}};ro.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};ro.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};ro.load=function(){var r=this,e=r.cy.window(),t=function(W){return W.selected()},n=function(W){var se=W.getRootNode();if(se&&se.nodeType===11&&se.host!==void 0)return se},i=function(W,se,Te,ve){W==null&&(W=r.cy);for(var ge=0;ge<se.length;ge++){var ze=se[ge];W.emit({originalEvent:Te,type:ze,position:ve})}},a=function(W){return W.shiftKey||W.metaKey||W.ctrlKey},o=function(W,se){var Te=!0;if(r.cy.hasCompoundNodes()&&W&&W.pannable())for(var ve=0;se&&ve<se.length;ve++){var W=se[ve];if(W.isNode()&&W.isParent()&&!W.pannable()){Te=!1;break}}else Te=!0;return Te},s=function(W){W[0]._private.grabbed=!0},l=function(W){W[0]._private.grabbed=!1},u=function(W){W[0]._private.rscratch.inDragLayer=!0},c=function(W){W[0]._private.rscratch.inDragLayer=!1},d=function(W){W[0]._private.rscratch.isGrabTarget=!0},h=function(W){W[0]._private.rscratch.isGrabTarget=!1},m=function(W,se){var Te=se.addToList,ve=Te.has(W);!ve&&W.grabbable()&&!W.locked()&&(Te.merge(W),s(W))},g=function(W,se){if(W.cy().hasCompoundNodes()&&!(se.inDragLayer==null&&se.addToList==null)){var Te=W.descendants();se.inDragLayer&&(Te.forEach(u),Te.connectedEdges().forEach(u)),se.addToList&&m(Te,se)}},C=function(W,se){se=se||{};var Te=W.cy().hasCompoundNodes();se.inDragLayer&&(W.forEach(u),W.neighborhood().stdFilter(function(ve){return!Te||ve.isEdge()}).forEach(u)),se.addToList&&W.forEach(function(ve){m(ve,se)}),g(W,se),_(W,{inDragLayer:se.inDragLayer}),r.updateCachedGrabbedEles()},y=C,w=function(W){W&&(r.getCachedZSortedEles().forEach(function(se){l(se),c(se),h(se)}),r.updateCachedGrabbedEles())},_=function(W,se){if(!(se.inDragLayer==null&&se.addToList==null)&&W.cy().hasCompoundNodes()){var Te=W.ancestors().orphans();if(!Te.same(W)){var ve=Te.descendants().spawnSelf().merge(Te).unmerge(W).unmerge(W.descendants()),ge=ve.connectedEdges();se.inDragLayer&&(ge.forEach(u),ve.forEach(u)),se.addToList&&ve.forEach(function(ze){m(ze,se)})}}},x=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},k=typeof MutationObserver<"u",O=typeof ResizeObserver<"u";k?(r.removeObserver=new MutationObserver(function(Re){for(var W=0;W<Re.length;W++){var se=Re[W],Te=se.removedNodes;if(Te)for(var ve=0;ve<Te.length;ve++){var ge=Te[ve];if(ge===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(Re){r.destroy()});var p=Uo(function(){r.cy.resize()},100);k&&(r.styleObserver=new MutationObserver(p),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",p),O&&(r.resizeObserver=new ResizeObserver(p),r.resizeObserver.observe(r.container));var I=function(W,se){for(;W!=null;)se(W),W=W.parentNode},N=function(){r.invalidateContainerClientCoordsCache()};I(r.container,function(Re){r.registerBinding(Re,"transitionend",N),r.registerBinding(Re,"animationend",N),r.registerBinding(Re,"scroll",N)}),r.registerBinding(r.container,"contextmenu",function(Re){Re.preventDefault()});var j=function(){return r.selection[4]!==0},H=function(W){for(var se=r.findContainerClientCoords(),Te=se[0],ve=se[1],ge=se[2],ze=se[3],Pe=W.touches?W.touches:[W],We=!1,gt=0;gt<Pe.length;gt++){var Et=Pe[gt];if(Te<=Et.clientX&&Et.clientX<=Te+ge&&ve<=Et.clientY&&Et.clientY<=ve+ze){We=!0;break}}if(!We)return!1;for(var ft=r.container,xt=W.target,kt=xt.parentNode,dt=!1;kt;){if(kt===ft){dt=!0;break}kt=kt.parentNode}return!!dt};r.registerBinding(r.container,"mousedown",function(W){if(H(W)&&!(r.hoverData.which===1&&W.which!==1)){W.preventDefault(),x(),r.hoverData.capture=!0,r.hoverData.which=W.which;var se=r.cy,Te=[W.clientX,W.clientY],ve=r.projectIntoViewport(Te[0],Te[1]),ge=r.selection,ze=r.findNearestElements(ve[0],ve[1],!0,!1),Pe=ze[0],We=r.dragData.possibleDragElements;r.hoverData.mdownPos=ve,r.hoverData.mdownGPos=Te;var gt=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var Nt=r.hoverData.down;Nt?Nt.emit({originalEvent:W,type:"taphold",position:{x:ve[0],y:ve[1]}}):se.emit({originalEvent:W,type:"taphold",position:{x:ve[0],y:ve[1]}})}},r.tapholdDuration)};if(W.which==3){r.hoverData.cxtStarted=!0;var Et={originalEvent:W,type:"cxttapstart",position:{x:ve[0],y:ve[1]}};Pe?(Pe.activate(),Pe.emit(Et),r.hoverData.down=Pe):se.emit(Et),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(W.which==1){Pe&&Pe.activate();{if(Pe!=null&&r.nodeIsGrabbable(Pe)){var ft=function(Nt){return{originalEvent:W,type:Nt,position:{x:ve[0],y:ve[1]}}},xt=function(Nt){Nt.emit(ft("grab"))};if(d(Pe),!Pe.selected())We=r.dragData.possibleDragElements=se.collection(),y(Pe,{addToList:We}),Pe.emit(ft("grabon")).emit(ft("grab"));else{We=r.dragData.possibleDragElements=se.collection();var kt=se.$(function(dt){return dt.isNode()&&dt.selected()&&r.nodeIsGrabbable(dt)});C(kt,{addToList:We}),Pe.emit(ft("grabon")),kt.forEach(xt)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Pe,r.hoverData.downs=ze,r.hoverData.downTime=new Date().getTime()}i(Pe,["mousedown","tapstart","vmousedown"],W,{x:ve[0],y:ve[1]}),Pe==null?(ge[4]=1,r.data.bgActivePosistion={x:ve[0],y:ve[1]},r.redrawHint("select",!0),r.redraw()):Pe.pannable()&&(ge[4]=1),gt()}ge[0]=ge[2]=ve[0],ge[1]=ge[3]=ve[1]}},!1);var G=n(r.container);r.registerBinding([e,G],"mousemove",function(W){var se=r.hoverData.capture;if(!(!se&&!H(W))){var Te=!1,ve=r.cy,ge=ve.zoom(),ze=[W.clientX,W.clientY],Pe=r.projectIntoViewport(ze[0],ze[1]),We=r.hoverData.mdownPos,gt=r.hoverData.mdownGPos,Et=r.selection,ft=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(ft=r.findNearestElement(Pe[0],Pe[1],!0,!1));var xt=r.hoverData.last,kt=r.hoverData.down,dt=[Pe[0]-Et[2],Pe[1]-Et[3]],Nt=r.dragData.possibleDragElements,qt;if(gt){var wr=ze[0]-gt[0],Zt=wr*wr,jt=ze[1]-gt[1],ar=jt*jt,D=Zt+ar;r.hoverData.isOverThresholdDrag=qt=D>=r.desktopTapThreshold2}var V=a(W);qt&&(r.hoverData.tapholdCancelled=!0);var U=function(){var $e=r.hoverData.dragDelta=r.hoverData.dragDelta||[];$e.length===0?($e.push(dt[0]),$e.push(dt[1])):($e[0]+=dt[0],$e[1]+=dt[1])};Te=!0,i(ft,["mousemove","vmousemove","tapdrag"],W,{x:Pe[0],y:Pe[1]});var re=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||ve.emit({originalEvent:W,type:"boxstart",position:{x:Pe[0],y:Pe[1]}}),Et[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(qt){var ee={originalEvent:W,type:"cxtdrag",position:{x:Pe[0],y:Pe[1]}};kt?kt.emit(ee):ve.emit(ee),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||ft!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:W,type:"cxtdragout",position:{x:Pe[0],y:Pe[1]}}),r.hoverData.cxtOver=ft,ft&&ft.emit({originalEvent:W,type:"cxtdragover",position:{x:Pe[0],y:Pe[1]}}))}}else if(r.hoverData.dragging){if(Te=!0,ve.panningEnabled()&&ve.userPanningEnabled()){var fe;if(r.hoverData.justStartedPan){var Ce=r.hoverData.mdownPos;fe={x:(Pe[0]-Ce[0])*ge,y:(Pe[1]-Ce[1])*ge},r.hoverData.justStartedPan=!1}else fe={x:dt[0]*ge,y:dt[1]*ge};ve.panBy(fe),ve.emit("dragpan"),r.hoverData.dragged=!0}Pe=r.projectIntoViewport(W.clientX,W.clientY)}else if(Et[4]==1&&(kt==null||kt.pannable())){if(qt){if(!r.hoverData.dragging&&ve.boxSelectionEnabled()&&(V||!ve.panningEnabled()||!ve.userPanningEnabled()))re();else if(!r.hoverData.selecting&&ve.panningEnabled()&&ve.userPanningEnabled()){var Me=o(kt,r.hoverData.downs);Me&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Et[4]=0,r.data.bgActivePosistion=ja(We),r.redrawHint("select",!0),r.redraw())}kt&&kt.pannable()&&kt.active()&&kt.unactivate()}}else{if(kt&&kt.pannable()&&kt.active()&&kt.unactivate(),(!kt||!kt.grabbed())&&ft!=xt&&(xt&&i(xt,["mouseout","tapdragout"],W,{x:Pe[0],y:Pe[1]}),ft&&i(ft,["mouseover","tapdragover"],W,{x:Pe[0],y:Pe[1]}),r.hoverData.last=ft),kt)if(qt){if(ve.boxSelectionEnabled()&&V)kt&&kt.grabbed()&&(w(Nt),kt.emit("freeon"),Nt.emit("free"),r.dragData.didDrag&&(kt.emit("dragfreeon"),Nt.emit("dragfree"))),re();else if(kt&&kt.grabbed()&&r.nodeIsDraggable(kt)){var Oe=!r.dragData.didDrag;Oe&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||C(Nt,{inDragLayer:!0});var Be={x:0,y:0};if(at(dt[0])&&at(dt[1])&&(Be.x+=dt[0],Be.y+=dt[1],Oe)){var Ne=r.hoverData.dragDelta;Ne&&at(Ne[0])&&at(Ne[1])&&(Be.x+=Ne[0],Be.y+=Ne[1])}r.hoverData.draggingEles=!0,Nt.silentShift(Be).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else U();Te=!0}if(Et[2]=Pe[0],Et[3]=Pe[1],Te)return W.stopPropagation&&W.stopPropagation(),W.preventDefault&&W.preventDefault(),!1}},!1);var P,z,A;r.registerBinding(e,"mouseup",function(W){if(!(r.hoverData.which===1&&W.which!==1&&r.hoverData.capture)){var se=r.hoverData.capture;if(se){r.hoverData.capture=!1;var Te=r.cy,ve=r.projectIntoViewport(W.clientX,W.clientY),ge=r.selection,ze=r.findNearestElement(ve[0],ve[1],!0,!1),Pe=r.dragData.possibleDragElements,We=r.hoverData.down,gt=a(W);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,We&&We.unactivate(),r.hoverData.which===3){var Et={originalEvent:W,type:"cxttapend",position:{x:ve[0],y:ve[1]}};if(We?We.emit(Et):Te.emit(Et),!r.hoverData.cxtDragged){var ft={originalEvent:W,type:"cxttap",position:{x:ve[0],y:ve[1]}};We?We.emit(ft):Te.emit(ft)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(ze,["mouseup","tapend","vmouseup"],W,{x:ve[0],y:ve[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(We,["click","tap","vclick"],W,{x:ve[0],y:ve[1]}),z=!1,W.timeStamp-A<=Te.multiClickDebounceTime()?(P&&clearTimeout(P),z=!0,A=null,i(We,["dblclick","dbltap","vdblclick"],W,{x:ve[0],y:ve[1]})):(P=setTimeout(function(){z||i(We,["oneclick","onetap","voneclick"],W,{x:ve[0],y:ve[1]})},Te.multiClickDebounceTime()),A=W.timeStamp)),We==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!a(W)&&(Te.$(t).unselect(["tapunselect"]),Pe.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Pe=Te.collection()),ze==We&&!r.dragData.didDrag&&!r.hoverData.selecting&&ze!=null&&ze._private.selectable&&(r.hoverData.dragging||(Te.selectionType()==="additive"||gt?ze.selected()?ze.unselect(["tapunselect"]):ze.select(["tapselect"]):gt||(Te.$(t).unmerge(ze).unselect(["tapunselect"]),ze.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var xt=Te.collection(r.getAllInBox(ge[0],ge[1],ge[2],ge[3]));r.redrawHint("select",!0),xt.length>0&&r.redrawHint("eles",!0),Te.emit({type:"boxend",originalEvent:W,position:{x:ve[0],y:ve[1]}});var kt=function(qt){return qt.selectable()&&!qt.selected()};Te.selectionType()==="additive"||gt||Te.$(t).unmerge(xt).unselect(),xt.emit("box").stdFilter(kt).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ge[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var dt=We&&We.grabbed();w(Pe),dt&&(We.emit("freeon"),Pe.emit("free"),r.dragData.didDrag&&(We.emit("dragfreeon"),Pe.emit("dragfree")))}}ge[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var T=function(W){if(!r.scrollingPage){var se=r.cy,Te=se.zoom(),ve=se.pan(),ge=r.projectIntoViewport(W.clientX,W.clientY),ze=[ge[0]*Te+ve.x,ge[1]*Te+ve.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||j()){W.preventDefault();return}if(se.panningEnabled()&&se.userPanningEnabled()&&se.zoomingEnabled()&&se.userZoomingEnabled()){W.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var Pe;W.deltaY!=null?Pe=W.deltaY/-250:W.wheelDeltaY!=null?Pe=W.wheelDeltaY/1e3:Pe=W.wheelDelta/1e3,Pe=Pe*r.wheelSensitivity;var We=W.deltaMode===1;We&&(Pe*=33);var gt=se.zoom()*Math.pow(10,Pe);W.type==="gesturechange"&&(gt=r.gestureStartZoom*W.scale),se.zoom({level:gt,renderedPosition:{x:ze[0],y:ze[1]}}),se.emit(W.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",T,!0),r.registerBinding(e,"scroll",function(W){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(W){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||W.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(Re){r.hasTouchStarted||T(Re)},!0),r.registerBinding(r.container,"mouseout",function(W){var se=r.projectIntoViewport(W.clientX,W.clientY);r.cy.emit({originalEvent:W,type:"mouseout",position:{x:se[0],y:se[1]}})},!1),r.registerBinding(r.container,"mouseover",function(W){var se=r.projectIntoViewport(W.clientX,W.clientY);r.cy.emit({originalEvent:W,type:"mouseover",position:{x:se[0],y:se[1]}})},!1);var E,M,L,F,X,K,Y,ae,he,be,me,we,xe,oe=function(W,se,Te,ve){return Math.sqrt((Te-W)*(Te-W)+(ve-se)*(ve-se))},$=function(W,se,Te,ve){return(Te-W)*(Te-W)+(ve-se)*(ve-se)},Q;r.registerBinding(r.container,"touchstart",Q=function(W){if(r.hasTouchStarted=!0,!!H(W)){x(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var se=r.cy,Te=r.touchData.now,ve=r.touchData.earlier;if(W.touches[0]){var ge=r.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);Te[0]=ge[0],Te[1]=ge[1]}if(W.touches[1]){var ge=r.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);Te[2]=ge[0],Te[3]=ge[1]}if(W.touches[2]){var ge=r.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);Te[4]=ge[0],Te[5]=ge[1]}if(W.touches[1]){r.touchData.singleTouchMoved=!0,w(r.dragData.touchDragEles);var ze=r.findContainerClientCoords();he=ze[0],be=ze[1],me=ze[2],we=ze[3],E=W.touches[0].clientX-he,M=W.touches[0].clientY-be,L=W.touches[1].clientX-he,F=W.touches[1].clientY-be,xe=0<=E&&E<=me&&0<=L&&L<=me&&0<=M&&M<=we&&0<=F&&F<=we;var Pe=se.pan(),We=se.zoom();X=oe(E,M,L,F),K=$(E,M,L,F),Y=[(E+L)/2,(M+F)/2],ae=[(Y[0]-Pe.x)/We,(Y[1]-Pe.y)/We];var gt=200,Et=gt*gt;if(K<Et&&!W.touches[2]){var ft=r.findNearestElement(Te[0],Te[1],!0,!0),xt=r.findNearestElement(Te[2],Te[3],!0,!0);ft&&ft.isNode()?(ft.activate().emit({originalEvent:W,type:"cxttapstart",position:{x:Te[0],y:Te[1]}}),r.touchData.start=ft):xt&&xt.isNode()?(xt.activate().emit({originalEvent:W,type:"cxttapstart",position:{x:Te[0],y:Te[1]}}),r.touchData.start=xt):se.emit({originalEvent:W,type:"cxttapstart",position:{x:Te[0],y:Te[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(W.touches[2])se.boxSelectionEnabled()&&W.preventDefault();else if(!W.touches[1]){if(W.touches[0]){var kt=r.findNearestElements(Te[0],Te[1],!0,!0),dt=kt[0];if(dt!=null&&(dt.activate(),r.touchData.start=dt,r.touchData.starts=kt,r.nodeIsGrabbable(dt))){var Nt=r.dragData.touchDragEles=se.collection(),qt=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),dt.selected()?(qt=se.$(function(D){return D.selected()&&r.nodeIsGrabbable(D)}),C(qt,{addToList:Nt})):y(dt,{addToList:Nt}),d(dt);var wr=function(V){return{originalEvent:W,type:V,position:{x:Te[0],y:Te[1]}}};dt.emit(wr("grabon")),qt?qt.forEach(function(D){D.emit(wr("grab"))}):dt.emit(wr("grab"))}i(dt,["touchstart","tapstart","vmousedown"],W,{x:Te[0],y:Te[1]}),dt==null&&(r.data.bgActivePosistion={x:ge[0],y:ge[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],W,{x:Te[0],y:Te[1]})},r.tapholdDuration)}}if(W.touches.length>=1){for(var Zt=r.touchData.startPosition=[null,null,null,null,null,null],jt=0;jt<Te.length;jt++)Zt[jt]=ve[jt]=Te[jt];var ar=W.touches[0];r.touchData.startGPosition=[ar.clientX,ar.clientY]}}},!1);var J;r.registerBinding(e,"touchmove",J=function(W){var se=r.touchData.capture;if(!(!se&&!H(W))){var Te=r.selection,ve=r.cy,ge=r.touchData.now,ze=r.touchData.earlier,Pe=ve.zoom();if(W.touches[0]){var We=r.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);ge[0]=We[0],ge[1]=We[1]}if(W.touches[1]){var We=r.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);ge[2]=We[0],ge[3]=We[1]}if(W.touches[2]){var We=r.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);ge[4]=We[0],ge[5]=We[1]}var gt=r.touchData.startGPosition,Et;if(se&&W.touches[0]&&gt){for(var ft=[],xt=0;xt<ge.length;xt++)ft[xt]=ge[xt]-ze[xt];var kt=W.touches[0].clientX-gt[0],dt=kt*kt,Nt=W.touches[0].clientY-gt[1],qt=Nt*Nt,wr=dt+qt;Et=wr>=r.touchTapThreshold2}if(se&&r.touchData.cxt){W.preventDefault();var Zt=W.touches[0].clientX-he,jt=W.touches[0].clientY-be,ar=W.touches[1].clientX-he,D=W.touches[1].clientY-be,V=$(Zt,jt,ar,D),U=V/K,re=150,ee=re*re,fe=1.5,Ce=fe*fe;if(U>=Ce||V>=ee){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Me={originalEvent:W,type:"cxttapend",position:{x:ge[0],y:ge[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(Me),r.touchData.start=null):ve.emit(Me)}}if(se&&r.touchData.cxt){var Me={originalEvent:W,type:"cxtdrag",position:{x:ge[0],y:ge[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Me):ve.emit(Me),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Oe=r.findNearestElement(ge[0],ge[1],!0,!0);(!r.touchData.cxtOver||Oe!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:W,type:"cxtdragout",position:{x:ge[0],y:ge[1]}}),r.touchData.cxtOver=Oe,Oe&&Oe.emit({originalEvent:W,type:"cxtdragover",position:{x:ge[0],y:ge[1]}}))}else if(se&&W.touches[2]&&ve.boxSelectionEnabled())W.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||ve.emit({originalEvent:W,type:"boxstart",position:{x:ge[0],y:ge[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,Te[4]=1,!Te||Te.length===0||Te[0]===void 0?(Te[0]=(ge[0]+ge[2]+ge[4])/3,Te[1]=(ge[1]+ge[3]+ge[5])/3,Te[2]=(ge[0]+ge[2]+ge[4])/3+1,Te[3]=(ge[1]+ge[3]+ge[5])/3+1):(Te[2]=(ge[0]+ge[2]+ge[4])/3,Te[3]=(ge[1]+ge[3]+ge[5])/3),r.redrawHint("select",!0),r.redraw();else if(se&&W.touches[1]&&!r.touchData.didSelect&&ve.zoomingEnabled()&&ve.panningEnabled()&&ve.userZoomingEnabled()&&ve.userPanningEnabled()){W.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Be=r.dragData.touchDragEles;if(Be){r.redrawHint("drag",!0);for(var Ne=0;Ne<Be.length;Ne++){var nt=Be[Ne]._private;nt.grabbed=!1,nt.rscratch.inDragLayer=!1}}var $e=r.touchData.start,Zt=W.touches[0].clientX-he,jt=W.touches[0].clientY-be,ar=W.touches[1].clientX-he,D=W.touches[1].clientY-be,mt=oe(Zt,jt,ar,D),wt=mt/X;if(xe){var ot=Zt-E,Dt=jt-M,bt=ar-L,fr=D-F,Br=(ot+bt)/2,en=(Dt+fr)/2,gn=ve.zoom(),gr=gn*wt,dr=ve.pan(),mr=ae[0]*gn+dr.x,jr=ae[1]*gn+dr.y,Mn={x:-gr/gn*(mr-dr.x-Br)+mr,y:-gr/gn*(jr-dr.y-en)+jr};if($e&&$e.active()){var Be=r.dragData.touchDragEles;w(Be),r.redrawHint("drag",!0),r.redrawHint("eles",!0),$e.unactivate().emit("freeon"),Be.emit("free"),r.dragData.didDrag&&($e.emit("dragfreeon"),Be.emit("dragfree"))}ve.viewport({zoom:gr,pan:Mn,cancelOnFailedZoom:!0}),ve.emit("pinchzoom"),X=mt,E=Zt,M=jt,L=ar,F=D,r.pinching=!0}if(W.touches[0]){var We=r.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);ge[0]=We[0],ge[1]=We[1]}if(W.touches[1]){var We=r.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);ge[2]=We[0],ge[3]=We[1]}if(W.touches[2]){var We=r.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);ge[4]=We[0],ge[5]=We[1]}}else if(W.touches[0]&&!r.touchData.didSelect){var vr=r.touchData.start,oi=r.touchData.last,Oe;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Oe=r.findNearestElement(ge[0],ge[1],!0,!0)),se&&vr!=null&&W.preventDefault(),se&&vr!=null&&r.nodeIsDraggable(vr))if(Et){var Be=r.dragData.touchDragEles,Ui=!r.dragData.didDrag;Ui&&C(Be,{inDragLayer:!0}),r.dragData.didDrag=!0;var Pn={x:0,y:0};if(at(ft[0])&&at(ft[1])&&(Pn.x+=ft[0],Pn.y+=ft[1],Ui)){r.redrawHint("eles",!0);var Ot=r.touchData.dragDelta;Ot&&at(Ot[0])&&at(Ot[1])&&(Pn.x+=Ot[0],Pn.y+=Ot[1])}r.hoverData.draggingEles=!0,Be.silentShift(Pn).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==ze[0]&&r.touchData.startPosition[1]==ze[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Ot=r.touchData.dragDelta=r.touchData.dragDelta||[];Ot.length===0?(Ot.push(ft[0]),Ot.push(ft[1])):(Ot[0]+=ft[0],Ot[1]+=ft[1])}if(i(vr||Oe,["touchmove","tapdrag","vmousemove"],W,{x:ge[0],y:ge[1]}),(!vr||!vr.grabbed())&&Oe!=oi&&(oi&&oi.emit({originalEvent:W,type:"tapdragout",position:{x:ge[0],y:ge[1]}}),Oe&&Oe.emit({originalEvent:W,type:"tapdragover",position:{x:ge[0],y:ge[1]}})),r.touchData.last=Oe,se)for(var Ne=0;Ne<ge.length;Ne++)ge[Ne]&&r.touchData.startPosition[Ne]&&Et&&(r.touchData.singleTouchMoved=!0);if(se&&(vr==null||vr.pannable())&&ve.panningEnabled()&&ve.userPanningEnabled()){var si=o(vr,r.touchData.starts);si&&(W.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=ja(r.touchData.startPosition)),r.swipePanning?(ve.panBy({x:ft[0]*Pe,y:ft[1]*Pe}),ve.emit("dragpan")):Et&&(r.swipePanning=!0,ve.panBy({x:kt*Pe,y:Nt*Pe}),ve.emit("dragpan"),vr&&(vr.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var We=r.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);ge[0]=We[0],ge[1]=We[1]}}for(var xt=0;xt<ge.length;xt++)ze[xt]=ge[xt];se&&W.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var le;r.registerBinding(e,"touchcancel",le=function(W){var se=r.touchData.start;r.touchData.capture=!1,se&&se.unactivate()});var de,je,it,Ke;if(r.registerBinding(e,"touchend",de=function(W){var se=r.touchData.start,Te=r.touchData.capture;if(Te)W.touches.length===0&&(r.touchData.capture=!1),W.preventDefault();else return;var ve=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ge=r.cy,ze=ge.zoom(),Pe=r.touchData.now,We=r.touchData.earlier;if(W.touches[0]){var gt=r.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);Pe[0]=gt[0],Pe[1]=gt[1]}if(W.touches[1]){var gt=r.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);Pe[2]=gt[0],Pe[3]=gt[1]}if(W.touches[2]){var gt=r.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);Pe[4]=gt[0],Pe[5]=gt[1]}se&&se.unactivate();var Et;if(r.touchData.cxt){if(Et={originalEvent:W,type:"cxttapend",position:{x:Pe[0],y:Pe[1]}},se?se.emit(Et):ge.emit(Et),!r.touchData.cxtDragged){var ft={originalEvent:W,type:"cxttap",position:{x:Pe[0],y:Pe[1]}};se?se.emit(ft):ge.emit(ft)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!W.touches[2]&&ge.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var xt=ge.collection(r.getAllInBox(ve[0],ve[1],ve[2],ve[3]));ve[0]=void 0,ve[1]=void 0,ve[2]=void 0,ve[3]=void 0,ve[4]=0,r.redrawHint("select",!0),ge.emit({type:"boxend",originalEvent:W,position:{x:Pe[0],y:Pe[1]}});var kt=function(ee){return ee.selectable()&&!ee.selected()};xt.emit("box").stdFilter(kt).select().emit("boxselect"),xt.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(se?.unactivate(),W.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!W.touches[1]){if(!W.touches[0]){if(!W.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var dt=r.dragData.touchDragEles;if(se!=null){var Nt=se._private.grabbed;w(dt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Nt&&(se.emit("freeon"),dt.emit("free"),r.dragData.didDrag&&(se.emit("dragfreeon"),dt.emit("dragfree"))),i(se,["touchend","tapend","vmouseup","tapdragout"],W,{x:Pe[0],y:Pe[1]}),se.unactivate(),r.touchData.start=null}else{var qt=r.findNearestElement(Pe[0],Pe[1],!0,!0);i(qt,["touchend","tapend","vmouseup","tapdragout"],W,{x:Pe[0],y:Pe[1]})}var wr=r.touchData.startPosition[0]-Pe[0],Zt=wr*wr,jt=r.touchData.startPosition[1]-Pe[1],ar=jt*jt,D=Zt+ar,V=D*ze*ze;r.touchData.singleTouchMoved||(se||ge.$(":selected").unselect(["tapunselect"]),i(se,["tap","vclick"],W,{x:Pe[0],y:Pe[1]}),je=!1,W.timeStamp-Ke<=ge.multiClickDebounceTime()?(it&&clearTimeout(it),je=!0,Ke=null,i(se,["dbltap","vdblclick"],W,{x:Pe[0],y:Pe[1]})):(it=setTimeout(function(){je||i(se,["onetap","voneclick"],W,{x:Pe[0],y:Pe[1]})},ge.multiClickDebounceTime()),Ke=W.timeStamp)),se!=null&&!r.dragData.didDrag&&se._private.selectable&&V<r.touchTapThreshold2&&!r.pinching&&(ge.selectionType()==="single"?(ge.$(t).unmerge(se).unselect(["tapunselect"]),se.select(["tapselect"])):se.selected()?se.unselect(["tapunselect"]):se.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var U=0;U<Pe.length;U++)We[U]=Pe[U];r.dragData.didDrag=!1,W.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),W.touches.length<2&&(W.touches.length===1&&(r.touchData.startGPosition=[W.touches[0].clientX,W.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var qe=[],Ge=function(W){return{clientX:W.clientX,clientY:W.clientY,force:1,identifier:W.pointerId,pageX:W.pageX,pageY:W.pageY,radiusX:W.width/2,radiusY:W.height/2,screenX:W.screenX,screenY:W.screenY,target:W.target}},et=function(W){return{event:W,touch:Ge(W)}},rt=function(W){qe.push(et(W))},Qe=function(W){for(var se=0;se<qe.length;se++){var Te=qe[se];if(Te.event.pointerId===W.pointerId){qe.splice(se,1);return}}},Ye=function(W){var se=qe.filter(function(Te){return Te.event.pointerId===W.pointerId})[0];se.event=W,se.touch=Ge(W)},Ie=function(W){W.touches=qe.map(function(se){return se.touch})},Ve=function(W){return W.pointerType==="mouse"||W.pointerType===4};r.registerBinding(r.container,"pointerdown",function(Re){Ve(Re)||(Re.preventDefault(),rt(Re),Ie(Re),Q(Re))}),r.registerBinding(r.container,"pointerup",function(Re){Ve(Re)||(Qe(Re),Ie(Re),de(Re))}),r.registerBinding(r.container,"pointercancel",function(Re){Ve(Re)||(Qe(Re),Ie(Re),le(Re))}),r.registerBinding(r.container,"pointermove",function(Re){Ve(Re)||(Re.preventDefault(),Ye(Re),Ie(Re),J(Re))})}};var mi={};mi.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,a,o,s,l){this.renderer.nodeShapeImpl("polygon",n,i,a,o,s,this.points)},intersectLine:function(n,i,a,o,s,l,u,c){return No(s,l,this.points,n,i,a/2,o/2,u)},checkPoint:function(n,i,a,o,s,l,u,c){return vi(n,i,this.points,l,u,o,s,[0,-1],a)}}};mi.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,l){return my(a,o,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,a,o,s,l){return ca(e,t,i,a,o,s,n)}}};mi.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,a,o,s,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===i)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=n,l[u+"-cy"]=i;var c=a/2,d=o/2;s=s==="auto"?Xh(a,o):s;for(var h=new Array(e.length/2),m=0;m<e.length/2;m++)h[m]={x:n+c*e[m*2],y:i+d*e[m*2+1]};var g,C,y,w,_=h.length;for(C=h[_-1],g=0;g<_;g++)y=h[g%_],w=h[(g+1)%_],l[u][g]=Oc(C,y,w,s),C=y,y=w;return l[u]},draw:function(n,i,a,o,s,l,u){this.renderer.nodeShapeImpl("round-polygon",n,i,a,o,s,this.points,this.getOrCreateCorners(i,a,o,s,l,u,"drawCorners"))},intersectLine:function(n,i,a,o,s,l,u,c,d){return yy(s,l,this.points,n,i,a,o,u,this.getOrCreateCorners(n,i,a,o,c,d,"corners"))},checkPoint:function(n,i,a,o,s,l,u,c,d){return gy(n,i,this.points,l,u,o,s,this.getOrCreateCorners(l,u,o,s,c,d,"corners"))}}};mi.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Zr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,l){return Uh(a,o,e,t,n,i,s,l)},checkPoint:function(e,t,n,i,a,o,s,l){var u=i/2,c=a/2;l=l==="auto"?ha(i,a):l,l=Math.min(u,c,l);var d=l*2;return!!(vi(e,t,this.points,o,s,i,a-d,[0,-1],n)||vi(e,t,this.points,o,s,i-d,a,[0,-1],n)||ca(e,t,d,d,o-u+l,s-c+l,n)||ca(e,t,d,d,o+u-l,s-c+l,n)||ca(e,t,d,d,o+u-l,s+c-l,n)||ca(e,t,d,d,o-u+l,s+c-l,n))}}};mi.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:_c(),points:Zr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,null,o)},generateCutTrianglePts:function(e,t,n,i,a){var o=a==="auto"?this.cornerLength:a,s=t/2,l=e/2,u=n-l,c=n+l,d=i-s,h=i+s;return{topLeft:[u,d+o,u+o,d,u+o,d+o],topRight:[c-o,d,c,d+o,c-o,d+o],bottomRight:[c,h-o,c-o,h,c-o,h-o],bottomLeft:[u+o,h,u,h-o,u+o,h-o]}},intersectLine:function(e,t,n,i,a,o,s,l){var u=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,l),c=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return No(a,o,c,e,t)},checkPoint:function(e,t,n,i,a,o,s,l){var u=l==="auto"?this.cornerLength:l;if(vi(e,t,this.points,o,s,i,a-2*u,[0,-1],n)||vi(e,t,this.points,o,s,i-2*u,a,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,a,o,s);return hn(e,t,c.topLeft)||hn(e,t,c.topRight)||hn(e,t,c.bottomRight)||hn(e,t,c.bottomLeft)}}};mi.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Zr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,l){var u=.15,c=.5,d=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),m=function(y){var w=za({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},u),_=za({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},c),x=za({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},d);return[y[0],y[1],w.x,w.y,_.x,_.y,x.x,x.y,y[4],y[5]]},g=[].concat(m(h.topLeft),m(h.topRight),m(h.bottomRight),m(h.bottomLeft));return No(a,o,g,e,t)},generateBarrelBezierPts:function(e,t,n,i){var a=t/2,o=e/2,s=n-o,l=n+o,u=i-a,c=i+a,d=ec(e,t),h=d.heightOffset,m=d.widthOffset,g=d.ctrlPtOffsetPct*e,C={topLeft:[s,u+h,s+g,u,s+m,u],topRight:[l-m,u,l-g,u,l,u+h],bottomRight:[l,c-h,l-g,c,l-m,c],bottomLeft:[s+m,c,s+g,c,s,c-h]};return C.topLeft.isTop=!0,C.topRight.isTop=!0,C.bottomLeft.isBottom=!0,C.bottomRight.isBottom=!0,C},checkPoint:function(e,t,n,i,a,o,s,l){var u=ec(i,a),c=u.heightOffset,d=u.widthOffset;if(vi(e,t,this.points,o,s,i,a-2*c,[0,-1],n)||vi(e,t,this.points,o,s,i-2*d,a,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,a,o,s),m=function(N,j,H){var G=H[4],P=H[2],z=H[0],A=H[5],T=H[1],E=Math.min(G,z),M=Math.max(G,z),L=Math.min(A,T),F=Math.max(A,T);if(E<=N&&N<=M&&L<=j&&j<=F){var X=by(G,P,z),K=dy(X[0],X[1],X[2],N),Y=K.filter(function(ae){return 0<=ae&&ae<=1});if(Y.length>0)return Y[0]}return null},g=Object.keys(h),C=0;C<g.length;C++){var y=g[C],w=h[y],_=m(e,t,w);if(_!=null){var x=w[5],k=w[3],O=w[1],p=Ar(x,k,O,_);if(w.isTop&&p<=t||w.isBottom&&t<=p)return!0}}return!1}}};mi.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Zr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,l){var u=e-(n/2+s),c=t-(i/2+s),d=c,h=e+(n/2+s),m=Bi(a,o,e,t,u,c,h,d,!1);return m.length>0?m:Uh(a,o,e,t,n,i,s,l)},checkPoint:function(e,t,n,i,a,o,s,l){l=l==="auto"?ha(i,a):l;var u=2*l;if(vi(e,t,this.points,o,s,i,a-u,[0,-1],n)||vi(e,t,this.points,o,s,i-u,a,[0,-1],n))return!0;var c=i/2+2*n,d=a/2+2*n,h=[o-c,s-d,o-c,s,o+c,s,o+c,s-d];return!!(hn(e,t,h)||ca(e,t,u,u,o+i/2-l,s+a/2-l,n)||ca(e,t,u,u,o-i/2+l,s+a/2-l,n))}}};mi.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Zr(3,0)),this.generateRoundPolygon("round-triangle",Zr(3,0)),this.generatePolygon("rectangle",Zr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Zr(5,0)),this.generateRoundPolygon("round-pentagon",Zr(5,0)),this.generatePolygon("hexagon",Zr(6,0)),this.generateRoundPolygon("round-hexagon",Zr(6,0)),this.generatePolygon("heptagon",Zr(7,0)),this.generateRoundPolygon("round-heptagon",Zr(7,0)),this.generatePolygon("octagon",Zr(8,0)),this.generateRoundPolygon("round-octagon",Zr(8,0));var n=new Array(20);{var i=Ju(5,0),a=Ju(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[s*2]*=o,a[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=a[s*2],n[s*4+3]=a[s*2+1]}n=Kh(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}r.makePolygon=function(u){var c=u.join("$"),d="polygon-"+c,h;return(h=this[d])?h:e.generatePolygon(d,u)}};var Zo={};Zo.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Zo.redraw=function(r){r=r||qh();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Zo.beforeRender=function(r,e){if(!this.destroyed){e==null&&ur("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var lh=function(e,t,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(t,n)};Zo.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function n(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){lh(r,!0,i);var a=pi();r.render(r.renderOptions);var o=r.lastDrawTime=pi();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-a),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-a;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else lh(r,!1,i);r.skipFrame=!1,Dl(n)}};Dl(t)}};var ex=function(e){this.init(e)},Up=ex,no=Up.prototype;no.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];no.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=i.getElementById(o)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!l){var u=i.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",a.insertBefore(u,a.children[0])}var c=n.getComputedStyle(t),d=c.getPropertyValue("position");d==="static"&&Qt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=at(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};no.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};no.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};no.isHeadless=function(){return!1};[Rc,Wp,$p,ro,mi,Zo].forEach(function(r){Tt(no,r)});var $u=1e3/60,Kp={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=Uo(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),o=function(u,c){var d=pi(),h=i.averageRedrawTime,m=i.lastRedrawTime,g=[],C=i.cy.extent(),y=i.getPixelRatio();for(u||i.flushRenderedStyleQueue();;){var w=pi(),_=w-d,x=w-c;if(m<$u){var k=$u-(u?h:0);if(x>=e.deqFastCost*k)break}else if(u){if(_>=e.deqCost*m||_>=e.deqAvgCost*h)break}else if(x>=e.deqNoDrawCost*$u)break;var O=e.deq(n,y,C);if(O.length>0)for(var p=0;p<O.length;p++)g.push(O[p]);else break}g.length>0&&(e.onDeqd(n,g),!u&&e.shouldRedraw(n,g,y,C)&&a())},s=e.priority||bc;i.beforeRender(o,s(n))}}}},tx=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml;qi(this,r),this.idsByKey=new ei,this.keyForId=new ei,this.cachesByLvl=new ei,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Gi(r,[{key:"getIdsFor",value:function(t){t==null&&ur("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new Xa,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);return i!==a}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,a=n.get(t);return a||(a=new ei,n.set(t,a),i.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var a=this.getKey(t);this.setCache(a,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}]),r}(),uh=25,vl=50,El=-4,fc=3,Xp=7.99,rx=8,nx=1024,ix=1024,ax=1024,ox=.2,sx=.8,lx=10,ux=.15,cx=.1,fx=.9,dx=.9,hx=100,px=1,Va={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},vx=Ir({getKey:null,doesEleInvalidateKey:Ml,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:jh,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Do=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=vx(t);Tt(n,i),n.lookup=new tx(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},kr=Do.prototype;kr.reasons=Va;kr.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};kr.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};kr.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Ko(function(t,n){return n.reqs-t.reqs});return e};kr.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};kr.getElement=function(r,e,t,n,i){var a=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!a.allowEdgeTxrCaching&&r.isEdge()||!a.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(wc(s*t))),n<El)n=El;else if(s>=Xp||n>fc)return null;var u=Math.pow(2,n),c=e.h*u,d=e.w*u,h=o.eleTextBiggerThanMin(r,u);if(!this.isVisible(r,h))return null;var m=l.get(r,n);if(m&&m.invalidated&&(m.invalidated=!1,m.texture.invalidatedWidth-=m.width),m)return m;var g;if(c<=uh?g=uh:c<=vl?g=vl:g=Math.ceil(c/vl)*vl,c>ax||d>ix)return null;var C=a.getTextureQueue(g),y=C[C.length-2],w=function(){return a.recycleTexture(g,d)||a.addTexture(g,d)};y||(y=C[C.length-1]),y||(y=w()),y.width-y.usedWidth<d&&(y=w());for(var _=function(E){return E&&E.scaledLabelShown===h},x=i&&i===Va.dequeue,k=i&&i===Va.highQuality,O=i&&i===Va.downscale,p,I=n+1;I<=fc;I++){var N=l.get(r,I);if(N){p=N;break}}var j=p&&p.level===n+1?p:null,H=function(){y.context.drawImage(j.texture.canvas,j.x,0,j.width,j.height,y.usedWidth,0,d,c)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,d,g),_(j))H();else if(_(p))if(k){for(var G=p.level;G>n;G--)j=a.getElement(r,e,t,G,Va.downscale);H()}else return a.queueElement(r,p.level-1),p;else{var P;if(!x&&!k&&!O)for(var z=n-1;z>=El;z--){var A=l.get(r,z);if(A){P=A;break}}if(_(P))return a.queueElement(r,n),P;y.context.translate(y.usedWidth,0),y.context.scale(u,u),this.drawElement(y.context,r,e,h,!1),y.context.scale(1/u,1/u),y.context.translate(-y.usedWidth,0)}return m={x:y.usedWidth,texture:y,level:n,scale:u,width:d,height:c,scaledLabelShown:h},y.usedWidth+=Math.ceil(d+rx),y.eleCaches.push(m),l.set(r,n,m),a.checkTextureFullness(y),m};kr.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};kr.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var a=El;a<=fc;a++){var o=t.getForCachedKey(r,a);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var l=0;l<n.length;l++){var u=n[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};kr.checkTextureUtility=function(r){r.invalidatedWidth>=ox*r.width&&this.retireTexture(r)};kr.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>sx&&r.fullnessChecks>=lx?Ni(t,r):r.fullnessChecks++};kr.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;Ni(n,r),r.retired=!0;for(var a=r.eleCaches,o=0;o<a.length;o++){var s=a[o];i.deleteCache(s.key,s.level)}Cc(a);var l=e.getRetiredTextureQueue(t);l.push(r)};kr.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(nx,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};kr.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),a=0;a<i.length;a++){var o=i[a];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Cc(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Ni(i,o),n.push(o),o}};kr.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),a=this.getKey(r),o=i[a];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:a};n.push(s),i[a]=s}};kr.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<px&&t.size()>0;o++){var s=t.pop(),l=s.key,u=s.eles[0],c=a.hasCache(u,s.level);if(n[l]=null,c)continue;i.push(s);var d=e.getBoundingBox(u);e.getElement(u,d,r,s.level,Va.dequeue)}return i};kr.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=yc,t.updateItem(a),t.pop(),n[i]=null):a.eles.unmerge(r))};kr.onDequeue=function(r){this.onDequeues.push(r)};kr.offDequeue=function(r){Ni(this.onDequeues,r)};kr.setupDequeueing=Kp.setupDequeueing({deqRedrawThreshold:hx,deqCost:ux,deqAvgCost:cx,deqNoDrawCost:fx,deqFastCost:dx,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var a=0;a<t.length;a++)for(var o=t[a].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(xc(l,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var gx=1,Po=-4,Fl=2,mx=3.99,yx=50,bx=50,Cx=.15,wx=.1,xx=.9,_x=.9,Sx=1,ch=250,Tx=4e3*4e3,fh=32767,Ex=!0,Yp=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=pi()-2*ch,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=Uo(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},bx),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=ch?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(s,l){return l.reqs-s.reqs};t.layersQueue=new Ko(a),t.setupDequeueing()},Nr=Yp.prototype,dh=0,kx=Math.pow(2,53)-1;Nr.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),a=this.renderer.makeOffscreenCanvas(n,i),o={id:dh=++dh%kx,bb:r,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(t,t),s.translate(l,u),o};Nr.getLayers=function(r,e,t){var n=this,i=n.renderer,a=i.cy,o=a.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(wc(o*e)),t<Po)t=Po;else if(o>=mx||t>Fl)return null}n.validateLayersElesOrdering(t,r);var l=n.layersByLevel,u=Math.pow(2,t),c=l[t]=l[t]||[],d,h=n.levelIsComplete(t,r),m,g=function(){var H=function(T){if(n.validateLayersElesOrdering(T,r),n.levelIsComplete(T,r))return m=l[T],!0},G=function(T){if(!m)for(var E=t+T;Po<=E&&E<=Fl&&!H(E);E+=T);};G(1),G(-1);for(var P=c.length-1;P>=0;P--){var z=c[P];z.invalid&&Ni(c,z)}};if(!h)g();else return c;var C=function(){if(!d){d=pn();for(var H=0;H<r.length;H++)Wh(d,r[H].boundingBox())}return d},y=function(H){H=H||{};var G=H.after;C();var P=Math.ceil(d.w*u),z=Math.ceil(d.h*u);if(P>fh||z>fh)return null;var A=P*z;if(A>Tx)return null;var T=n.makeLayer(d,t);if(G!=null){var E=c.indexOf(G)+1;c.splice(E,0,T)}else(H.insert===void 0||H.insert)&&c.unshift(T);return T};if(n.skipping&&!s)return null;for(var w=null,_=r.length/gx,x=!s,k=0;k<r.length;k++){var O=r[k],p=O._private.rscratch,I=p.imgLayerCaches=p.imgLayerCaches||{},N=I[t];if(N){w=N;continue}if((!w||w.eles.length>=_||!$h(w.bb,O.boundingBox()))&&(w=y({insert:!0,after:w}),!w))return null;m||x?n.queueLayer(w,O):n.drawEleInLayer(w,O,t,e),w.eles.push(O),I[t]=w}return m||(x?null:c)};Nr.getEleLevelForLayerLevel=function(r,e){return r};Nr.drawEleInLayer=function(r,e,t,n){var i=this,a=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),a.setImgSmoothing(o,!1),a.drawCachedElement(o,e,null,null,t,Ex),a.setImgSmoothing(o,!0))};Nr.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var o=n[a];if(o.reqs>0||o.invalid)return!1;i+=o.eles.length}return i===e.length};Nr.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}};Nr.updateElementsInLayers=function(r,e){for(var t=this,n=Wo(r[0]),i=0;i<r.length;i++)for(var a=n?null:r[i],o=n?r[i]:r[i].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=Po;u<=Fl;u++){var c=l[u];c&&(a&&t.getEleLevelForLayerLevel(c.level)!==a.level||e(c,o,a))}};Nr.haveLayers=function(){for(var r=this,e=!1,t=Po;t<=Fl;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Nr.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=pi(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,a){e.invalidateLayer(n)}))};Nr.invalidateLayer=function(r){if(this.lastInvalidationTime=pi(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];Ni(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var a=t[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};Nr.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,a){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};Nr.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Nr.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,a=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Nr.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<Sx&&t.size()!==0;){var a=t.peek();if(a.replacement){t.pop();continue}if(a.replaces&&a!==a.replaces.replacement){t.pop();continue}if(a.invalid){t.pop();continue}var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,r),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(t.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};Nr.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var a=0;a<r.eles.length;a++){var o=r.eles[a]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Nr.requestRedraw=Uo(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Nr.setupDequeueing=Kp.setupDequeueing({deqRedrawThreshold:yx,deqCost:Cx,deqAvgCost:wx,deqNoDrawCost:xx,deqFastCost:_x,deq:function(e,t){return e.dequeue(t)},onDeqd:bc,shouldRedraw:jh,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Qp={},hh;function Dx(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function Mx(r,e,t){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),r.lineTo(a.x,a.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function ph(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];r.lineTo(a.x,a.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<o.length;i++){var a=o[i];r.lineTo(a.x,a.y)}r.closePath&&r.closePath()}function Px(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var a=e,o=a[0];r.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var l=a[s];r.lineTo(l.x,l.y)}r.closePath&&r.closePath()}function Ax(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}Qp.arrowShapeImpl=function(r){return(hh||(hh={polygon:Dx,"triangle-backcurve":Mx,"triangle-tee":ph,"circle-triangle":Px,"triangle-cross":ph,circle:Ax}))[r]};var ii={};ii.drawElement=function(r,e,t,n,i,a){var o=this;e.isNode()?o.drawNode(r,e,t,n,i,a):o.drawEdge(r,e,t,n,i,a)};ii.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};ii.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};ii.drawCachedElementPortion=function(r,e,t,n,i,a,o,s){var l=this,u=t.getBoundingBox(e);if(!(u.w===0||u.h===0)){var c=t.getElement(e,u,n,i,a);if(c!=null){var d=s(l,e);if(d===0)return;var h=o(l,e),m=u.x1,g=u.y1,C=u.w,y=u.h,w,_,x,k,O;if(h!==0){var p=t.getRotationPoint(e);x=p.x,k=p.y,r.translate(x,k),r.rotate(h),O=l.getImgSmoothing(r),O||l.setImgSmoothing(r,!0);var I=t.getRotationOffset(e);w=I.x,_=I.y}else w=m,_=g;var N;d!==1&&(N=r.globalAlpha,r.globalAlpha=N*d),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,w,_,C,y),d!==1&&(r.globalAlpha=N),h!==0&&(r.rotate(-h),r.translate(-x,-k),O||l.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var Ix=function(){return 0},Bx=function(e,t){return e.getTextAngle(t,null)},Rx=function(e,t){return e.getTextAngle(t,"source")},Ox=function(e,t){return e.getTextAngle(t,"target")},Lx=function(e,t){return t.effectiveOpacity()},Uu=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};ii.drawCachedElement=function(r,e,t,n,i,a){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,c=s.slbTxrCache,d=s.tlbTxrCache,h=e.boundingBox(),m=a===!0?l.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||xc(h,n))){var g=e.isEdge(),C=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,l,t,i,m,Ix,Lx),(!g||!C)&&o.drawCachedElementPortion(r,e,u,t,i,m,Bx,Uu),g&&!C&&(o.drawCachedElementPortion(r,e,c,t,i,m,Rx,Uu),o.drawCachedElementPortion(r,e,d,t,i,m,Ox,Uu)),o.drawElementOverlay(r,e)}};ii.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};ii.drawCachedElements=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];i.drawCachedElement(r,o,t,n)}};ii.drawCachedNodes=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];o.isNode()&&i.drawCachedElement(r,o,t,n)}};ii.drawLayeredElements=function(r,e,t,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,t);if(a)for(var o=0;o<a.length;o++){var s=a[o],l=s.bb;l.w===0||l.h===0||r.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else i.drawCachedElements(r,e,t,n)};var yi={};yi.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(a&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;t&&(l=t,r.translate(-l.x1,-l.y1));var u=a?e.pstyle("opacity").value:1,c=a?e.pstyle("line-opacity").value:1,d=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,m=e.pstyle("width").pfValue,g=e.pstyle("line-cap").value,C=e.pstyle("line-outline-width").value,y=e.pstyle("line-outline-color").value,w=u*c,_=u*c,x=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;d==="straight-triangle"?(o.eleStrokeStyle(r,e,T),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=m,r.lineCap=g,o.eleStrokeStyle(r,e,T),o.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},k=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;if(r.lineWidth=m+C,r.lineCap=g,C>0)o.colorStrokeStyle(r,y[0],y[1],y[2],T);else{r.lineCap="butt";return}d==="straight-triangle"?o.drawEdgeTrianglePath(e,r,s.allpts):(o.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},O=function(){i&&o.drawEdgeOverlay(r,e)},p=function(){i&&o.drawEdgeUnderlay(r,e)},I=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_;o.drawArrowheads(r,e,T)},N=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var j=e.pstyle("ghost").value==="yes";if(j){var H=e.pstyle("ghost-offset-x").pfValue,G=e.pstyle("ghost-offset-y").pfValue,P=e.pstyle("ghost-opacity").value,z=w*P;r.translate(H,G),x(z),I(z),r.translate(-H,-G)}else k();p(),x(),I(),O(),N(),t&&r.translate(l.x1,l.y1)}};var Zp=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,o=a.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=u,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,c[0],c[1],c[2],i),a.drawEdgePath(n,t,s.allpts,"solid")}}}};yi.drawEdgeOverlay=Zp("overlay");yi.drawEdgeUnderlay=Zp("underlay");yi.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,a=e,o,s=!1,l=this.usePaths(),u=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(l){var d=t.join("$"),h=i.pathCacheKey&&i.pathCacheKey===d;h?(o=e=i.pathCache,s=!0):(o=e=new Path2D,i.pathCacheKey=d,i.pathCache=o)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(u),a.lineDashOffset=c;break;case"solid":a.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var m=2;m+3<t.length;m+=4)e.quadraticCurveTo(t[m],t[m+1],t[m+2],t[m+3]);break;case"straight":case"haystack":for(var g=2;g+1<t.length;g+=2)e.lineTo(t[g],t[g+1]);break;case"segments":if(i.isRound){var C=bn(i.roundCorners),y;try{for(C.s();!(y=C.n()).done;){var w=y.value;Vp(e,w)}}catch(x){C.e(x)}finally{C.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var _=2;_+1<t.length;_+=2)e.lineTo(t[_],t[_+1]);break}e=a,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};yi.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var a=[t[i+2]-t[i],t[i+3]-t[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-l[0],t[i+1]-l[1]),e.lineTo(t[i]+l[0],t[i+1]+l[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};yi.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};yi.drawArrowhead=function(r,e,t,n,i,a,o){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var s=this,l=e.pstyle(t+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,d=e.pstyle("width").pfValue,h=e.pstyle(t+"-arrow-width"),m=h.value==="match-line"?d:h.pfValue;h.units==="%"&&(m*=d);var g=e.pstyle("opacity").value;o===void 0&&(o=g);var C=r.globalCompositeOperation;(o!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,u,d,l,m,n,i,a),r.globalCompositeOperation=C);var y=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,y[0],y[1],y[2],o),s.colorStrokeStyle(r,y[0],y[1],y[2],o),s.drawArrowShape(e,r,c,d,l,m,n,i,a)}}};yi.drawArrowShape=function(r,e,t,n,i,a,o,s,l){var u=this,c=this.usePaths()&&i!=="triangle-cross",d=!1,h,m=e,g={x:o,y:s},C=r.pstyle("arrow-scale").value,y=this.getArrowWidth(n,C),w=u.arrowShapes[i];if(c){var _=u.arrowPathCache=u.arrowPathCache||[],x=Fi(i),k=_[x];k!=null?(h=e=k,d=!0):(h=e=new Path2D,_[x]=h)}d||(e.beginPath&&e.beginPath(),c?w.draw(e,1,0,{x:0,y:0},1):w.draw(e,y,l,g,n),e.closePath&&e.closePath()),e=m,c&&(e.translate(o,s),e.rotate(l),e.scale(y,y)),(t==="filled"||t==="both")&&(c?e.fill(h):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=a/(c?y:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/y,1/y),e.rotate(-l),e.translate(-o,-s))};var Fc={};Fc.safeDrawImage=function(r,e,t,n,i,a,o,s,l,u){if(!(i<=0||a<=0||l<=0||u<=0))try{r.drawImage(e,t,n,i,a,o,s,l,u)}catch(c){Qt(c)}};Fc.drawInscribedImage=function(r,e,t,n,i){var a=this,o=t.position(),s=o.x,l=o.y,u=t.cy().style(),c=u.getIndexedStyle.bind(u),d=c(t,"background-fit","value",n),h=c(t,"background-repeat","value",n),m=t.width(),g=t.height(),C=t.padding()*2,y=m+(c(t,"background-width-relative-to","value",n)==="inner"?0:C),w=g+(c(t,"background-height-relative-to","value",n)==="inner"?0:C),_=t._private.rscratch,x=c(t,"background-clip","value",n),k=x==="node",O=c(t,"background-image-opacity","value",n)*i,p=c(t,"background-image-smoothing","value",n),I=t.pstyle("corner-radius").value;I!=="auto"&&(I=t.pstyle("corner-radius").pfValue);var N=e.width||e.cachedW,j=e.height||e.cachedH;(N==null||j==null)&&(document.body.appendChild(e),N=e.cachedW=e.width||e.offsetWidth,j=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var H=N,G=j;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?H=c(t,"background-width","pfValue",n)*y:H=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?G=c(t,"background-height","pfValue",n)*w:G=c(t,"background-height","pfValue",n)),!(H===0||G===0)){if(d==="contain"){var P=Math.min(y/H,w/G);H*=P,G*=P}else if(d==="cover"){var P=Math.max(y/H,w/G);H*=P,G*=P}var z=s-y/2,A=c(t,"background-position-x","units",n),T=c(t,"background-position-x","pfValue",n);A==="%"?z+=(y-H)*T:z+=T;var E=c(t,"background-offset-x","units",n),M=c(t,"background-offset-x","pfValue",n);E==="%"?z+=(y-H)*M:z+=M;var L=l-w/2,F=c(t,"background-position-y","units",n),X=c(t,"background-position-y","pfValue",n);F==="%"?L+=(w-G)*X:L+=X;var K=c(t,"background-offset-y","units",n),Y=c(t,"background-offset-y","pfValue",n);K==="%"?L+=(w-G)*Y:L+=Y,_.pathCache&&(z-=s,L-=l,s=0,l=0);var ae=r.globalAlpha;r.globalAlpha=O;var he=a.getImgSmoothing(r),be=!1;if(p==="no"&&he?(a.setImgSmoothing(r,!1),be=!0):p==="yes"&&!he&&(a.setImgSmoothing(r,!0),be=!0),h==="no-repeat")k&&(r.save(),_.pathCache?r.clip(_.pathCache):(a.nodeShapes[a.getNodeShape(t)].draw(r,s,l,y,w,I,_),r.clip())),a.safeDrawImage(r,e,0,0,N,j,z,L,H,G),k&&r.restore();else{var me=r.createPattern(e,h);r.fillStyle=me,a.nodeShapes[a.getNodeShape(t)].draw(r,s,l,y,w,I,_),r.translate(z,L),r.fill(),r.translate(-z,-L)}r.globalAlpha=ae,be&&a.setImgSmoothing(r,he)}};var ya={};ya.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(wc(t*n));e=Math.pow(2,i)}var a=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(a<o)};ya.drawElementText=function(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(a&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);r.textAlign=l,r.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,c=e.pstyle("label"),d=e.pstyle("source-label"),h=e.pstyle("target-label");if(u||(!c||!c.value)&&(!d||!d.value)&&(!h||!h.value))return;r.textAlign="center",r.textBaseline="bottom"}var m=!t,g;t&&(g=t,r.translate(-g.x1,-g.y1)),i==null?(o.drawText(r,e,null,m,a),e.isEdge()&&(o.drawText(r,e,"source",m,a),o.drawText(r,e,"target",m,a))):o.drawText(r,e,i,m,a),t&&r.translate(g.x1,g.y1)};ya.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};ya.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+i+" "+a,r.lineJoin="round",this.colorFillStyle(r,u[0],u[1],u[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],l)};function Ku(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+n-a,t),r.quadraticCurveTo(e+n,t,e+n,t+a),r.lineTo(e+n,t+i-a),r.quadraticCurveTo(e+n,t+i,e+n-a,t+i),r.lineTo(e+a,t+i),r.quadraticCurveTo(e,t+i,e,t+i-a),r.lineTo(e,t+a),r.quadraticCurveTo(e,t,e+a,t),r.closePath(),o?r.stroke():r.fill()}ya.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,a=e?e+"-":"",o=r.pstyle(a+"text-rotation");if(o.strValue==="autorotate"){var s=Nn(i,"labelAngle",e);t=r.isEdge()?s:0}else o.strValue==="none"?t=0:t=o.pfValue;return t};ya.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,o=a.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var l=Nn(o,"labelX",t),u=Nn(o,"labelY",t),c,d,h=this.getLabelText(e,t);if(h!=null&&h!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(r,e,i);var m=t?t+"-":"",g=Nn(o,"labelWidth",t),C=Nn(o,"labelHeight",t),y=e.pstyle(m+"text-margin-x").pfValue,w=e.pstyle(m+"text-margin-y").pfValue,_=e.isEdge(),x=e.pstyle("text-halign").value,k=e.pstyle("text-valign").value;_&&(x="center",k="center"),l+=y,u+=w;var O;switch(n?O=this.getTextAngle(e,t):O=0,O!==0&&(c=l,d=u,r.translate(c,d),r.rotate(O),l=0,u=0),k){case"top":break;case"center":u+=C/2;break;case"bottom":u+=C;break}var p=e.pstyle("text-background-opacity").value,I=e.pstyle("text-border-opacity").value,N=e.pstyle("text-border-width").pfValue,j=e.pstyle("text-background-padding").pfValue,H=e.pstyle("text-background-shape").strValue,G=H.indexOf("round")===0,P=2;if(p>0||N>0&&I>0){var z=l-j;switch(x){case"left":z-=g;break;case"center":z-=g/2;break}var A=u-C-j,T=g+2*j,E=C+2*j;if(p>0){var M=r.fillStyle,L=e.pstyle("text-background-color").value;r.fillStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+p*s+")",G?Ku(r,z,A,T,E,P):r.fillRect(z,A,T,E),r.fillStyle=M}if(N>0&&I>0){var F=r.strokeStyle,X=r.lineWidth,K=e.pstyle("text-border-color").value,Y=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+K[0]+","+K[1]+","+K[2]+","+I*s+")",r.lineWidth=N,r.setLineDash)switch(Y){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=N/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(G?Ku(r,z,A,T,E,P,"stroke"):r.strokeRect(z,A,T,E),Y==="double"){var ae=N/2;G?Ku(r,z+ae,A+ae,T-ae*2,E-ae*2,P,"stroke"):r.strokeRect(z+ae,A+ae,T-ae*2,E-ae*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=X,r.strokeStyle=F}}var he=2*e.pstyle("text-outline-width").pfValue;if(he>0&&(r.lineWidth=he),e.pstyle("text-wrap").value==="wrap"){var be=Nn(o,"labelWrapCachedLines",t),me=Nn(o,"labelLineHeight",t),we=g/2,xe=this.getLabelJustification(e);switch(xe==="auto"||(x==="left"?xe==="left"?l+=-g:xe==="center"&&(l+=-we):x==="center"?xe==="left"?l+=-we:xe==="right"&&(l+=we):x==="right"&&(xe==="center"?l+=we:xe==="right"&&(l+=g))),k){case"top":u-=(be.length-1)*me;break;case"center":case"bottom":u-=(be.length-1)*me;break}for(var oe=0;oe<be.length;oe++)he>0&&r.strokeText(be[oe],l,u),r.fillText(be[oe],l,u),u+=me}else he>0&&r.strokeText(h,l,u),r.fillText(h,l,u);O!==0&&(r.rotate(-O),r.translate(-c,-d))}}};var io={};io.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,c=u.rscratch,d=e.position();if(!(!at(d.x)||!at(d.y))&&!(a&&!e.visible())){var h=a?e.effectiveOpacity():1,m=o.usePaths(),g,C=!1,y=e.padding();s=e.width()+2*y,l=e.height()+2*y;var w;t&&(w=t,r.translate(-w.x1,-w.y1));for(var _=e.pstyle("background-image"),x=_.value,k=new Array(x.length),O=new Array(x.length),p=0,I=0;I<x.length;I++){var N=x[I],j=k[I]=N!=null&&N!=="none";if(j){var H=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",I);p++,O[I]=o.getCachedImage(N,H,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var G=e.pstyle("background-blacken").value,P=e.pstyle("border-width").pfValue,z=e.pstyle("background-opacity").value*h,A=e.pstyle("border-color").value,T=e.pstyle("border-style").value,E=e.pstyle("border-join").value,M=e.pstyle("border-cap").value,L=e.pstyle("border-position").value,F=e.pstyle("border-dash-pattern").pfValue,X=e.pstyle("border-dash-offset").pfValue,K=e.pstyle("border-opacity").value*h,Y=e.pstyle("outline-width").pfValue,ae=e.pstyle("outline-color").value,he=e.pstyle("outline-style").value,be=e.pstyle("outline-opacity").value*h,me=e.pstyle("outline-offset").value,we=e.pstyle("corner-radius").value;we!=="auto"&&(we=e.pstyle("corner-radius").pfValue);var xe=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;o.eleFillStyle(r,e,ve)},oe=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K;o.colorStrokeStyle(r,A[0],A[1],A[2],ve)},$=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:be;o.colorStrokeStyle(r,ae[0],ae[1],ae[2],ve)},Q=function(ve,ge,ze,Pe){var We=o.nodePathCache=o.nodePathCache||[],gt=Nh(ze==="polygon"?ze+","+Pe.join(","):ze,""+ge,""+ve,""+we),Et=We[gt],ft,xt=!1;return Et!=null?(ft=Et,xt=!0,c.pathCache=ft):(ft=new Path2D,We[gt]=c.pathCache=ft),{path:ft,cacheHit:xt}},J=e.pstyle("shape").strValue,le=e.pstyle("shape-polygon-points").pfValue;if(m){r.translate(d.x,d.y);var de=Q(s,l,J,le);g=de.path,C=de.cacheHit}var je=function(){if(!C){var ve=d;m&&(ve={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(g||r,ve.x,ve.y,s,l,we,c)}m?r.fill(g):r.fill()},it=function(){for(var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ze=u.backgrounding,Pe=0,We=0;We<O.length;We++){var gt=e.cy().style().getIndexedStyle(e,"background-image-containment","value",We);if(ge&&gt==="over"||!ge&&gt==="inside"){Pe++;continue}k[We]&&O[We].complete&&!O[We].error&&(Pe++,o.drawInscribedImage(r,O[We],e,We,ve))}u.backgrounding=Pe!==p,ze!==u.backgrounding&&e.updateStyle(!1)},Ke=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;o.hasPie(e)&&(o.drawPie(r,e,ge),ve&&(m||o.nodeShapes[o.getNodeShape(e)].draw(r,d.x,d.y,s,l,we,c)))},qe=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,ge=(G>0?G:-G)*ve,ze=G>0?0:255;G!==0&&(o.colorFillStyle(r,ze,ze,ze,ge),m?r.fill(g):r.fill())},Ge=function(){if(P>0){if(r.lineWidth=P,r.lineCap=M,r.lineJoin=E,r.setLineDash)switch(T){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(F),r.lineDashOffset=X;break;case"solid":case"double":r.setLineDash([]);break}if(L!=="center"){if(r.save(),r.lineWidth*=2,L==="inside")m?r.clip(g):r.clip();else{var ve=new Path2D;ve.rect(-s/2-P,-l/2-P,s+2*P,l+2*P),ve.addPath(g),r.clip(ve,"evenodd")}m?r.stroke(g):r.stroke(),r.restore()}else m?r.stroke(g):r.stroke();if(T==="double"){r.lineWidth=P/3;var ge=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",m?r.stroke(g):r.stroke(),r.globalCompositeOperation=ge}r.setLineDash&&r.setLineDash([])}},et=function(){if(Y>0){if(r.lineWidth=Y,r.lineCap="butt",r.setLineDash)switch(he){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ve=d;m&&(ve={x:0,y:0});var ge=o.getNodeShape(e),ze=P;L==="inside"&&(ze=0),L==="outside"&&(ze*=2);var Pe=(s+ze+(Y+me))/s,We=(l+ze+(Y+me))/l,gt=s*Pe,Et=l*We,ft=o.nodeShapes[ge].points,xt;if(m){var kt=Q(gt,Et,ge,ft);xt=kt.path}if(ge==="ellipse")o.drawEllipsePath(xt||r,ve.x,ve.y,gt,Et);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ge)){var dt=0,Nt=0,qt=0;ge==="round-diamond"?dt=(ze+me+Y)*1.4:ge==="round-heptagon"?(dt=(ze+me+Y)*1.075,qt=-(ze/2+me+Y)/35):ge==="round-hexagon"?dt=(ze+me+Y)*1.12:ge==="round-pentagon"?(dt=(ze+me+Y)*1.13,qt=-(ze/2+me+Y)/15):ge==="round-tag"?(dt=(ze+me+Y)*1.12,Nt=(ze/2+Y+me)*.07):ge==="round-triangle"&&(dt=(ze+me+Y)*(Math.PI/2),qt=-(ze+me/2+Y)/Math.PI),dt!==0&&(Pe=(s+dt)/s,gt=s*Pe,["round-hexagon","round-tag"].includes(ge)||(We=(l+dt)/l,Et=l*We)),we=we==="auto"?Xh(gt,Et):we;for(var wr=gt/2,Zt=Et/2,jt=we+(ze+Y+me)/2,ar=new Array(ft.length/2),D=new Array(ft.length/2),V=0;V<ft.length/2;V++)ar[V]={x:ve.x+Nt+wr*ft[V*2],y:ve.y+qt+Zt*ft[V*2+1]};var U,re,ee,fe,Ce=ar.length;for(re=ar[Ce-1],U=0;U<Ce;U++)ee=ar[U%Ce],fe=ar[(U+1)%Ce],D[U]=Oc(re,ee,fe,jt),re=ee,ee=fe;o.drawRoundPolygonPath(xt||r,ve.x+Nt,ve.y+qt,s*Pe,l*We,ft,D)}else if(["roundrectangle","round-rectangle"].includes(ge))we=we==="auto"?ha(gt,Et):we,o.drawRoundRectanglePath(xt||r,ve.x,ve.y,gt,Et,we+(ze+Y+me)/2);else if(["cutrectangle","cut-rectangle"].includes(ge))we=we==="auto"?_c():we,o.drawCutRectanglePath(xt||r,ve.x,ve.y,gt,Et,null,we+(ze+Y+me)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ge))we=we==="auto"?ha(gt,Et):we,o.drawBottomRoundRectanglePath(xt||r,ve.x,ve.y,gt,Et,we+(ze+Y+me)/2);else if(ge==="barrel")o.drawBarrelPath(xt||r,ve.x,ve.y,gt,Et);else if(ge.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ge)){var Me=(ze+Y+me)/s;ft=Pl(Al(ft,Me)),o.drawPolygonPath(xt||r,ve.x,ve.y,s,l,ft)}else{var Oe=(ze+Y+me)/s;ft=Pl(Al(ft,-Oe)),o.drawPolygonPath(xt||r,ve.x,ve.y,s,l,ft)}if(m?r.stroke(xt):r.stroke(),he==="double"){r.lineWidth=ze/3;var Be=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",m?r.stroke(xt):r.stroke(),r.globalCompositeOperation=Be}r.setLineDash&&r.setLineDash([])}},rt=function(){i&&o.drawNodeOverlay(r,e,d,s,l)},Qe=function(){i&&o.drawNodeUnderlay(r,e,d,s,l)},Ye=function(){o.drawElementText(r,e,null,n)},Ie=e.pstyle("ghost").value==="yes";if(Ie){var Ve=e.pstyle("ghost-offset-x").pfValue,Re=e.pstyle("ghost-offset-y").pfValue,W=e.pstyle("ghost-opacity").value,se=W*h;r.translate(Ve,Re),$(),et(),xe(W*z),je(),it(se,!0),oe(W*K),Ge(),Ke(G!==0||P!==0),it(se,!1),qe(se),r.translate(-Ve,-Re)}m&&r.translate(-d.x,-d.y),Qe(),m&&r.translate(d.x,d.y),$(),et(),xe(),je(),it(h,!0),oe(),Ge(),Ke(G!==0||P!==0),it(h,!1),qe(),m&&r.translate(-d.x,-d.y),Ye(),rt(),t&&r.translate(w.x1,w.y1)}};var Jp=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,a,o){var s=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,d=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(i=i||n.position(),a==null||o==null){var m=n.padding();a=n.width()+2*m,o=n.height()+2*m}s.colorFillStyle(t,c[0],c[1],c[2],u),s.nodeShapes[d].draw(t,i.x,i.y,a+l*2,o+l*2,h),t.fill()}}}};io.drawNodeOverlay=Jp("overlay");io.drawNodeUnderlay=Jp("underlay");io.hasPie=function(r){return r=r[0],r._private.hasPie};io.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=n.x,s=n.y,l=e.width(),u=e.height(),c=Math.min(l,u)/2,d=0,h=this.usePaths();h&&(o=0,s=0),a.units==="%"?c=c*a.pfValue:a.pfValue!==void 0&&(c=a.pfValue/2);for(var m=1;m<=i.pieBackgroundN;m++){var g=e.pstyle("pie-"+m+"-background-size").value,C=e.pstyle("pie-"+m+"-background-color").value,y=e.pstyle("pie-"+m+"-background-opacity").value*t,w=g/100;w+d>1&&(w=1-d);var _=1.5*Math.PI+2*Math.PI*d,x=2*Math.PI*w,k=_+x;g===0||d>=1||d+w>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,c,_,k),r.closePath(),this.colorFillStyle(r,C[0],C[1],C[2],y),r.fill(),d+=w)}};var Jr={},Fx=100;Jr.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};Jr.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Jr.createGradientStyleFor=function(r,e,t,n,i){var a,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,l=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var u=t.sourceEndpoint(),c=t.targetEndpoint(),d=t.midpoint(),h=da(u,d),m=da(c,d);a=r.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(h,m))}else{var g=o?{x:0,y:0}:t.position(),C=t.paddedWidth(),y=t.paddedHeight();a=r.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(C,y))}else if(t.isEdge()){var w=t.sourceEndpoint(),_=t.targetEndpoint();a=r.createLinearGradient(w.x,w.y,_.x,_.y)}else{var x=o?{x:0,y:0}:t.position(),k=t.paddedWidth(),O=t.paddedHeight(),p=k/2,I=O/2,N=t.pstyle("background-gradient-direction").value;switch(N){case"to-bottom":a=r.createLinearGradient(x.x,x.y-I,x.x,x.y+I);break;case"to-top":a=r.createLinearGradient(x.x,x.y+I,x.x,x.y-I);break;case"to-left":a=r.createLinearGradient(x.x+p,x.y,x.x-p,x.y);break;case"to-right":a=r.createLinearGradient(x.x-p,x.y,x.x+p,x.y);break;case"to-bottom-right":case"to-right-bottom":a=r.createLinearGradient(x.x-p,x.y-I,x.x+p,x.y+I);break;case"to-top-right":case"to-right-top":a=r.createLinearGradient(x.x-p,x.y+I,x.x+p,x.y-I);break;case"to-bottom-left":case"to-left-bottom":a=r.createLinearGradient(x.x+p,x.y-I,x.x-p,x.y+I);break;case"to-top-left":case"to-left-top":a=r.createLinearGradient(x.x+p,x.y+I,x.x-p,x.y-I);break}}if(!a)return null;for(var j=l.length===s.length,H=s.length,G=0;G<H;G++)a.addColorStop(j?l[G]:G/(H-1),"rgba("+s[G][0]+","+s[G][1]+","+s[G][2]+","+i+")");return a};Jr.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};Jr.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};Jr.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};Jr.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};Jr.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};Jr.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};Jr.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=i*o,u=a*o,c;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var d=t.canvasContainer;d.style.width=i+"px",d.style.height=a+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=t.canvases[h],c.width=l,c.height=u,c.style.width=i+"px",c.style.height=a+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=t.bufferCanvases[h],c.width=l,c.height=u,c.style.width=i+"px",c.style.height=a+"px";e.textureMult=1,o<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u,e.pixelRatio=o}};Jr.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Jr.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};Jr.render=function(r){var e=this;r=r||qh();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,a=r.drawOnlyNodeLayer,o=r.forcedZoom,s=r.forcedPan,l=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,u=e.data,c=u.canvasNeedsRedraw,d=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,m=e.motionBlurPxRatio,g=t.hasCompoundNodes(),C=e.hoverData.draggingEles,y=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!y;var w=h;n||(e.prevPxRatio!==l&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=l),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(w=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!d&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var _=t.style(),x=t.zoom(),k=o!==void 0?o:x,O=t.pan(),p={x:O.x,y:O.y},I={zoom:x,pan:{x:O.x,y:O.y}},N=e.prevViewport,j=N===void 0||I.zoom!==N.zoom||I.pan.x!==N.pan.x||I.pan.y!==N.pan.y;!j&&!(C&&!g)&&(e.motionBlurPxRatio=1),s&&(p=s),k*=l,p.x*=l,p.y*=l;var H=e.getCachedZSortedEles();function G(oe,$,Q,J,le){var de=oe.globalCompositeOperation;oe.globalCompositeOperation="destination-out",e.colorFillStyle(oe,255,255,255,e.motionBlurTransparency),oe.fillRect($,Q,J,le),oe.globalCompositeOperation=de}function P(oe,$){var Q,J,le,de;!e.clearingMotionBlur&&(oe===u.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||oe===u.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(Q={x:O.x*m,y:O.y*m},J=x*m,le=e.canvasWidth*m,de=e.canvasHeight*m):(Q=p,J=k,le=e.canvasWidth,de=e.canvasHeight),oe.setTransform(1,0,0,1,0,0),$==="motionBlur"?G(oe,0,0,le,de):!n&&($===void 0||$)&&oe.clearRect(0,0,le,de),i||(oe.translate(Q.x,Q.y),oe.scale(J,J)),s&&oe.translate(s.x,s.y),o&&oe.scale(o,o)}if(d||(e.textureDrawLastFrame=!1),d){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var z=e.data.bufferContexts[e.TEXTURE_BUFFER];z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:z,drawOnlyNodeLayer:!0,forcedPxRatio:l*e.textureMult});var I=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};I.mpan={x:(0-I.pan.x)/I.zoom,y:(0-I.pan.y)/I.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var A=u.contexts[e.NODE],T=e.textureCache.texture,I=e.textureCache.viewport;A.setTransform(1,0,0,1,0,0),h?G(A,0,0,I.width,I.height):A.clearRect(0,0,I.width,I.height);var E=_.core("outside-texture-bg-color").value,M=_.core("outside-texture-bg-opacity").value;e.colorFillStyle(A,E[0],E[1],E[2],M),A.fillRect(0,0,I.width,I.height);var x=t.zoom();P(A,!1),A.clearRect(I.mpan.x,I.mpan.y,I.width/I.zoom/l,I.height/I.zoom/l),A.drawImage(T,I.mpan.x,I.mpan.y,I.width/I.zoom/l,I.height/I.zoom/l)}else e.textureOnViewport&&!n&&(e.textureCache=null);var L=t.extent(),F=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),X=e.hideEdgesOnViewport&&F,K=[];if(K[e.NODE]=!c[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,K[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),K[e.DRAG]=!c[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,K[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||a||K[e.NODE]){var Y=h&&!K[e.NODE]&&m!==1,A=n||(Y?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:u.contexts[e.NODE]),ae=h&&!Y?"motionBlur":void 0;P(A,ae),X?e.drawCachedNodes(A,H.nondrag,l,L):e.drawLayeredElements(A,H.nondrag,l,L),e.debug&&e.drawDebugPoints(A,H.nondrag),!i&&!h&&(c[e.NODE]=!1)}if(!a&&(c[e.DRAG]||i||K[e.DRAG])){var Y=h&&!K[e.DRAG]&&m!==1,A=n||(Y?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:u.contexts[e.DRAG]);P(A,h&&!Y?"motionBlur":void 0),X?e.drawCachedNodes(A,H.drag,l,L):e.drawCachedElements(A,H.drag,l,L),e.debug&&e.drawDebugPoints(A,H.drag),!i&&!h&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,P),h&&m!==1){var he=u.contexts[e.NODE],be=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],me=u.contexts[e.DRAG],we=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],xe=function($,Q,J){$.setTransform(1,0,0,1,0,0),J||!w?$.clearRect(0,0,e.canvasWidth,e.canvasHeight):G($,0,0,e.canvasWidth,e.canvasHeight);var le=m;$.drawImage(Q,0,0,e.canvasWidth*le,e.canvasHeight*le,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||K[e.NODE])&&(xe(he,be,K[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||K[e.DRAG])&&(xe(me,we,K[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=I,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!d,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},Fx)),n||t.emit("render")};var xo;Jr.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,a=n.style(),o=r.drawOnlyNodeLayer,s=r.drawAllLayers,l=i.canvasNeedsRedraw,u=r.forcedContext;if(t.showFps||!o&&l[t.SELECT_BOX]&&!s){var c=u||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var d=t.cy.zoom(),h=a.core("selection-box-border-width").value/d;c.lineWidth=h,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),h>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var d=t.cy.zoom(),m=i.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(m.x,m.y,a.core("active-bg-size").pfValue/d,0,2*Math.PI),c.fill()}var g=t.lastRedrawTime;if(t.showFps&&g){g=Math.round(g);var C=Math.round(1e3/g),y="1 frame = "+g+" ms = "+C+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!xo){var w=c.measureText(y);xo=w.actualBoundingBoxAscent}c.fillText(y,0,xo);var _=60;c.strokeRect(0,xo+10,250,20),c.fillRect(0,xo+10,250*Math.min(C/_,1),20)}s||(l[t.SELECT_BOX]=!1)}};function vh(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function Nx(r,e,t){var n=vh(r,r.VERTEX_SHADER,e),i=vh(r,r.FRAGMENT_SHADER,t),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,i),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function jx(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function Nc(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function Xu(r,e,t,n,i){var a=n*t+e.x,o=i*t+e.y;return o=Math.round(r.canvasHeight-o),[a,o]}function gl(r,e,t){var n=r[0]/255,i=r[1]/255,a=r[2]/255,o=e,s=t||new Array(4);return s[0]=n*o,s[1]=i*o,s[2]=a*o,s[3]=o,s}function ml(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function Vx(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function zx(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function ev(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function tv(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function qx(r,e,t,n,i,a){switch(e){case r.FLOAT:return new Float32Array(t.buffer,a*n,i);case r.INT:return new Int32Array(t.buffer,a*n,i)}}function Gx(r,e,t,n){var i=ev(r,e),a=Cr(i,2),o=a[0],s=a[1],l=tv(r,s,n),u=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,l,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,o,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,o,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),u}function yn(r,e,t,n){var i=ev(r,t),a=Cr(i,3),o=a[0],s=a[1],l=a[2],u=tv(r,s,e*o),c=o*l,d=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,d),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,o,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,o,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var h=new Array(e),m=0;m<e;m++)h[m]=qx(r,s,u,c,o,m);return d.dataArray=u,d.stride=c,d.size=o,d.getView=function(g){return h[g]},d.setPoint=function(g,C,y){var w=h[g];w[0]=C,w[1]=y},d.bufferSubData=function(g){r.bindBuffer(r.ARRAY_BUFFER,d),g?r.bufferSubData(r.ARRAY_BUFFER,0,u,0,g*o):r.bufferSubData(r.ARRAY_BUFFER,0,u)},d}function Hx(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var gh=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function Ao(){var r=new gh(9);return gh!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function rv(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Wx(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=t[0],m=t[1],g=t[2],C=t[3],y=t[4],w=t[5],_=t[6],x=t[7],k=t[8];return r[0]=h*n+m*o+g*u,r[1]=h*i+m*s+g*c,r[2]=h*a+m*l+g*d,r[3]=C*n+y*o+w*u,r[4]=C*i+y*s+w*c,r[5]=C*a+y*l+w*d,r[6]=_*n+x*o+k*u,r[7]=_*i+x*s+k*c,r[8]=_*a+x*l+k*d,r}function Nl(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=t[0],m=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r[6]=h*n+m*o+u,r[7]=h*i+m*s+c,r[8]=h*a+m*l+d,r}function nv(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=Math.sin(t),m=Math.cos(t);return r[0]=m*n+h*o,r[1]=m*i+h*s,r[2]=m*a+h*l,r[3]=m*o-h*n,r[4]=m*s-h*i,r[5]=m*l-h*a,r[6]=u,r[7]=c,r[8]=d,r}function jc(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function $x(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var Io={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},_o=Ir({getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:null,getPadding:null}),Ux=function(){function r(e,t){qi(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.atlasSize=t.webglTexSize,this.rows=t.webglTexRows,this.enableWrapping=t.enableWrapping,this.texHeight=Math.floor(this.atlasSize/this.rows),this.maxTexWidth=this.atlasSize,this.texture=null,this.canvas=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=t.createTextureCanvas(e,this.atlasSize,this.atlasSize),this.scratch=t.createTextureCanvas(e,this.atlasSize,this.texHeight,"scratch")}return Gi(r,[{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,a=this.texHeight,o=this.maxTexWidth,s=a/i,l=n*s,u=i*s;return l>o&&(s=o/n,l=n*s,u=i*s),{scale:s,texW:l,texH:u}}},{key:"draw",value:function(t,n,i){var a=this,o=this.atlasSize,s=this.rows,l=this.texHeight,u=this.getScale(n),c=u.scale,d=u.texW,h=u.texH,m=[null,null],g=function(x,k){if(i&&k){var O=k.context,p=x.x,I=x.row,N=p,j=l*I;O.save(),O.translate(N,j),O.scale(c,c),i(O,n),O.restore()}},C=function(){g(a.freePointer,a.canvas),m[0]={x:a.freePointer.x,y:a.freePointer.row*l,w:d,h},m[1]={x:a.freePointer.x+d,y:a.freePointer.row*l,w:0,h},a.freePointer.x+=d,a.freePointer.x==o&&(a.freePointer.x=0,a.freePointer.row++)},y=function(){var x=a.scratch,k=a.canvas;x.clear(),g({x:0,row:0},x);var O=o-a.freePointer.x,p=d-O,I=l;{var N=a.freePointer.x,j=a.freePointer.row*l,H=O;k.context.drawImage(x,0,0,H,I,N,j,H,I),m[0]={x:N,y:j,w:H,h}}{var G=O,P=(a.freePointer.row+1)*l,z=p;k&&k.context.drawImage(x,G,0,z,I,0,P,z,I),m[1]={x:0,y:P,w:z,h}}a.freePointer.x=p,a.freePointer.row++},w=function(){a.freePointer.x=0,a.freePointer.row++};if(this.freePointer.x+d<=o)C();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(w(),C()):this.enableWrapping?y():(w(),C())}return this.keyToLocation.set(t,m),this.needsBuffer=!0,m}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){var n=this.atlasSize,i=this.rows,a=this.getScale(t),o=a.texW;return this.freePointer.x+o>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=zx(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1)}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null,this.needsBuffer=!0)}}]),r}(),Kx=function(){function r(e,t){qi(this,r),this.r=e,this.opts=t,this.keyToIds=new Map,this.idToKey=new Map,this.atlases=[],this.styleKeyToAtlas=new Map,this.styleKeyNeedsRedraw=new Set,this.forceGC=!1}return Gi(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"getIdsFor",value:function(t){var n=this.keyToIds.get(t);return n||(n=new Set,this.keyToIds.set(t,n)),n}},{key:"_createAtlas",value:function(){var t=this.r,n=this.opts;return new Ux(t,n)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.opts,i=n.webglTexSize,a=Math.floor(i/n.webglTexRows);this.scratch=n.createTextureCanvas(t,i,a,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i,a){if(this.styleKeyNeedsRedraw.has(n)){this.styleKeyNeedsRedraw.delete(n),this.deleteKey(t,n);var o=this.styleKeyToAtlas.get(n);o&&(o.forceGC=!0),this.styleKeyToAtlas.delete(n)}var s=this.styleKeyToAtlas.get(n);return s||(s=this.atlases[this.atlases.length-1],(!s||!s.canFit(i))&&(s=this._createAtlas(),this.atlases.push(s)),s.draw(n,i,a),this.styleKeyToAtlas.set(n,s),this.getIdsFor(n).add(t),this.idToKey.set(t,n)),s}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"deleteKey",value:function(t,n){this.idToKey.delete(t),this.getIdsFor(n).delete(t)}},{key:"checkKeyIsInvalid",value:function(t,n){if(!this.idToKey.has(t))return!1;var i=this.idToKey.get(t);return i!=n?(this.deleteKey(t,i),!0):!1}},{key:"_getKeysToCollect",value:function(){var t=new Set,n=bn(this.styleKeyToAtlas.keys()),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;this.getIdsFor(a).size==0&&t.add(a)}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"gc",value:function(){var t=this,n=this.atlases.some(function(h){return h.forceGC}),i=this._getKeysToCollect();if(i.size===0&&!n){console.log("nothing to garbage collect");return}var a=[],o=new Map,s=null,l=bn(this.atlases),u;try{var c=function(){var m=u.value,g=m.getKeys(),C=Xx(i,g);if(C.size===0&&!m.forceGC)return a.push(m),g.forEach(function(I){return o.set(I,m)}),"continue";s||(s=t._createAtlas(),a.push(s));var y=bn(g),w;try{for(y.s();!(w=y.n()).done;){var _=w.value;if(!C.has(_)){var x=m.getOffsets(_),k=Cr(x,2),O=k[0],p=k[1];s.canFit({w:O.w+p.w,h:O.h})||(s=t._createAtlas(),a.push(s)),t._copyTextureToNewAtlas(_,m,s),o.set(_,s)}}}catch(I){y.e(I)}finally{y.f()}};for(l.s();!(u=l.n()).done;)var d=c()}catch(h){l.e(h)}finally{l.f()}this.atlases=a,this.styleKeyToAtlas=o}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var a=n.getOffsets(t),o=Cr(a,2),s=o[0],l=o[1];if(l.w===0)i.draw(t,s,function(h){h.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var u=this._getScratchCanvas();u.clear(),u.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),u.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,s.w,0,l.w,l.h);var c=s.w+l.w,d=s.h;i.draw(t,{w:c,h:d},function(h){h.drawImage(u,0,0,c,d,0,0,c,d)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}]),r}();function Xx(r,e){return r.intersection?r.intersection(e):new Set(Sh(r).filter(function(t){return e.has(t)}))}var Yx=function(){function r(e,t){qi(this,r),this.r=e;var n=t;this.globalOptions=n,this.maxAtlases=n.webglTexPerBatch,this.atlasSize=n.webglTexSize,this.renderTypes=new Map,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[],this._cacheScratchCanvas(n)}return Gi(r,[{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,a=null,o=t.createTextureCanvas;t.createTextureCanvas=function(s,l,u,c){return c?((!a||l!=n||u!=i)&&(n=l,i=u,a=o(s,l,u)),a):o(s,l,u)}}},{key:"addRenderType",value:function(t,n){var i=new Kx(this.r,this.globalOptions),a=n;this.renderTypes.set(t,Tt({type:t,atlasCollection:i},a))}},{key:"getRenderTypes",value:function(){return Sh(this.renderTypes.values())}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.forceRedraw,a=i===void 0?!1:i,o=n.filterEle,s=o===void 0?function(){return!0}:o,l=n.filterType,u=l===void 0?function(){return!0}:l,c=!1,d=bn(t),h;try{for(d.s();!(h=d.n()).done;){var m=h.value;if(s(m)){var g=m.id(),C=bn(this.getRenderTypes()),y;try{for(C.s();!(y=C.n()).done;){var w=y.value;if(u(w.type)){var _=w.getKey(m);a?(w.atlasCollection.deleteKey(g,_),w.atlasCollection.styleKeyNeedsRedraw.add(_),c=!0):c|=w.atlasCollection.checkKeyIsInvalid(g,_)}}}catch(x){C.e(x)}finally{C.f()}}}}catch(x){d.e(x)}finally{d.f()}return c}},{key:"gc",value:function(){var t=bn(this.getRenderTypes()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.atlasCollection.gc()}}catch(a){t.e(a)}finally{t.f()}}},{key:"isRenderable",value:function(t,n){var i=this.getRenderTypeOpts(n);return i&&i.isVisible(t)}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"getOrCreateAtlas",value:function(t,n,i){var a=this.renderTypes.get(i),o=a.getKey(t),s=t.id();return a.atlasCollection.draw(s,o,n,function(l){a.drawElement(l,t,n,!0,!0)})}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlases},function(t,n){return n})}},{key:"getAtlasInfo",value:function(t,n){var i=this.renderTypes.get(n),a=i.getBoundingBox(t),o=this.getOrCreateAtlas(t,a,n),s=this.getAtlasIndexForBatch(o);if(s!==void 0){var l=i.getKey(t),u=o.getOffsets(l),c=Cr(u,2),d=c[0],h=c[1];return{atlasID:s,tex:d,tex1:d,tex2:h,bb:a,type:n,styleKey:l}}}},{key:"canAddToCurrentBatch",value:function(t,n){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var i=this.renderTypes.get(n),a=i.getKey(t),o=i.atlasCollection.getAtlas(a);return o&&this.batchAtlases.includes(o)}return!0}},{key:"setTransformMatrix",value:function(t,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=n.bb,s=n.type,l=n.tex1,u=n.tex2,c=this.getRenderTypeOpts(s),d=c.getPadding?c.getPadding(i):0,h=l.w/(l.w+u.w);a||(h=1-h);var m=this.getAdjustedBB(o,d,a,h),g,C;rv(t);var y=c.getRotation?c.getRotation(i):0;if(y!==0){var w=c.getRotationPoint(i),_=w.x,x=w.y;Nl(t,t,[_,x]),nv(t,t,y);var k=c.getRotationOffset(i);g=k.x+m.xOffset,C=k.y}else g=m.x1,C=m.y1;Nl(t,t,[g,C]),jc(t,t,[m.w,m.h])}},{key:"getTransformMatrix",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Ao();return this.setTransformMatrix(a,t,n,i),a}},{key:"getAdjustedBB",value:function(t,n,i,a){var o=t.x1,s=t.y1,l=t.w,u=t.h;n&&(o-=n,s-=n,l+=2*n,u+=2*n);var c=0,d=l*a;return i&&a<1?l=d:!i&&a<1&&(c=l-d,o+=c,l=d),{x1:o,y1:s,w:l,h:u,xOffset:c}}},{key:"getDebugInfo",value:function(){var t=[],n=bn(this.renderTypes),i;try{for(n.s();!(i=n.n()).done;){var a=Cr(i.value,2),o=a[0],s=a[1],l=s.atlasCollection.getCounts(),u=l.keyCount,c=l.atlasCount;t.push({type:o,keyCount:u,atlasCount:c})}}catch(d){n.e(d)}finally{n.f()}return t}}]),r}(),Yu=0,mh=1,yh=2,Qu=3,Qx=function(){function r(e,t,n){qi(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.maxAtlases=n.webglTexPerBatch,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,n.enableWrapping=!0,n.createTextureCanvas=jx,this.atlasManager=new Yx(e,n),this.program=this.createShaderProgram(Io.SCREEN),this.pickingProgram=this.createShaderProgram(Io.PICKING),this.vao=this.createVAO(),this.debugInfo=[]}return Gi(r,[{key:"addTextureRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,a=this.atlasManager;return i?a.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):a.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; 

      // what are we rendering?
      in int aVertType;

      // for picking
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex1; // x/y/w/h of texture in atlas
      in vec4 aTex2; 

      // for any transforms that are needed
      in vec4 aScaleRotate1;  // vectors use fewer attributes than matrices
      in vec2 aTranslate1;
      in vec4 aScaleRotate2;
      in vec2 aTranslate2;

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in float aLineWidth;
      in vec4 aEdgeColor;

      out vec2 vTexCoord;
      out vec4 vEdgeColor;
      flat out int vAtlasId;
      flat out vec4 vIndex;
      flat out int vVertType;

      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition;

        if(aVertType == `.concat(Yu,`) {
          float texX;
          float texY;
          float texW;
          float texH;
          mat3  texMatrix;

          int vid = gl_VertexID;
          if(vid <= 5) {
            texX = aTex1.x;
            texY = aTex1.y;
            texW = aTex1.z;
            texH = aTex1.w;
            texMatrix = mat3(
              vec3(aScaleRotate1.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate1,      1.0)
            );
          } else {
            texX = aTex2.x;
            texY = aTex2.y;
            texW = aTex2.z;
            texH = aTex2.w;
            texMatrix = mat3(
              vec3(aScaleRotate2.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate2,      1.0)
            );
          }

          if(vid == 1 || vid == 2 || vid == 4 || vid == 7 || vid == 8 || vid == 10) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5 || vid == 8 || vid == 10 || vid == 11) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * texMatrix * vec3(position, 1.0), 1.0);
        } 
        else if(aVertType == `).concat(mh,` && vid < 6) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(yh,` && vid < 6) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0 = pointA;
          vec2 p1 = pointB;
          vec2 p2 = pointC;
          vec2 pos = position;
          if(position.x == 1.0) {
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth;

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(Qu,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2( 0.0,   0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          mat3 transform = mat3(
            vec3(aScaleRotate1.xy, 0.0),
            vec3(aScaleRotate1.zw, 0.0),
            vec3(aTranslate1,      1.0)
          );
          gl_Position = vec4(uPanZoomMatrix * transform * vec3(position, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vIndex = aIndex;
        vVertType = aVertType;
      }
    `),a=this.atlasManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // define texture unit for each node in the batch
      `.concat(a.map(function(u){return"uniform sampler2D uTexture".concat(u,";")}).join(`
	`),`

      uniform vec4 uBGColor;

      in vec2 vTexCoord;
      in vec4 vEdgeColor;
      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;

      out vec4 outColor;

      void main(void) {
        if(vVertType == `).concat(Yu,`) {
          `).concat(a.map(function(u){return"if(vAtlasId == ".concat(u,") outColor = texture(uTexture").concat(u,", vTexCoord);")}).join(`
	else `),`
        } else if(vVertType == `).concat(Qu,`) {
          // blend arrow color with background (using premultiplied alpha)
          outColor.rgb = vEdgeColor.rgb + (uBGColor.rgb * (1.0 - vEdgeColor.a)); 
          outColor.a = 1.0; // make opaque, masks out line under arrow
        } else {
          outColor = vEdgeColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=Nx(n,i,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex1=n.getAttribLocation(s,"aTex1"),s.aTex2=n.getAttribLocation(s,"aTex2"),s.aScaleRotate1=n.getAttribLocation(s,"aScaleRotate1"),s.aTranslate1=n.getAttribLocation(s,"aTranslate1"),s.aScaleRotate2=n.getAttribLocation(s,"aScaleRotate2"),s.aTranslate2=n.getAttribLocation(s,"aTranslate2"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aEdgeColor=n.getAttribLocation(s,"aEdgeColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uTextures=[];for(var l=0;l<this.atlasManager.maxAtlases;l++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(l)));return s}},{key:"createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1],n=[].concat(t,t);this.vertexCount=n.length/2;var i=this.maxInstances,a=this.gl,o=this.program,s=a.createVertexArray();return a.bindVertexArray(s),Gx(a,"vec2",o.aPosition,n),this.indexBuffer=yn(a,i,"vec4",o.aIndex),this.vertTypeBuffer=yn(a,i,"int",o.aVertType),this.atlasIdBuffer=yn(a,i,"int",o.aAtlasId),this.tex1Buffer=yn(a,i,"vec4",o.aTex1),this.tex2Buffer=yn(a,i,"vec4",o.aTex2),this.scaleRotate1Buffer=yn(a,i,"vec4",o.aScaleRotate1),this.translate1Buffer=yn(a,i,"vec2",o.aTranslate1),this.scaleRotate2Buffer=yn(a,i,"vec4",o.aScaleRotate2),this.translate2Buffer=yn(a,i,"vec2",o.aTranslate2),this.pointAPointBBuffer=yn(a,i,"vec4",o.aPointAPointB),this.pointCPointDBuffer=yn(a,i,"vec4",o.aPointCPointD),this.lineWidthBuffer=yn(a,i,"float",o.aLineWidth),this.edgeColorBuffer=yn(a,i,"vec4",o.aEdgeColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Io.SCREEN;this.panZoomMatrix=t,this.debugInfo=n,this.renderTarget=i,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.atlasManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"getTempMatrix",value:function(){return this.tempMatrix=this.tempMatrix||Ao()}},{key:"drawTexture",value:function(t,n,i){var a=this.atlasManager;if(a.isRenderable(t,i)){a.canAddToCurrentBatch(t,i)||this.endBatch();var o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=Yu;var s=this.indexBuffer.getView(o);ml(n,s);var l=a.getAtlasInfo(t,i,l),u=l.atlasID,c=l.tex1,d=l.tex2,h=this.atlasIdBuffer.getView(o);h[0]=u;var m=this.tex1Buffer.getView(o);m[0]=c.x,m[1]=c.y,m[2]=c.w,m[3]=c.h;var g=this.tex2Buffer.getView(o);g[0]=d.x,g[1]=d.y,g[2]=d.w,g[3]=d.h;for(var C=this.getTempMatrix(),y=0,w=[1,2];y<w.length;y++){var _=w[y];a.setTransformMatrix(C,l,t,_===1);var x=this["scaleRotate".concat(_,"Buffer")].getView(o);x[0]=C[0],x[1]=C[1],x[2]=C[3],x[3]=C[4];var k=this["translate".concat(_,"Buffer")].getView(o);k[0]=C[6],k[1]=C[7]}this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawEdgeArrow",value:function(t,n,i){var a=t._private.rscratch,o,s,l;if(i==="source"?(o=a.arrowStartX,s=a.arrowStartY,l=a.srcArrowAngle):(o=a.arrowEndX,s=a.arrowEndY,l=a.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(l)||l==null)){var u=t.pstyle(i+"-arrow-shape").value;if(u!=="none"){var c=t.pstyle(i+"-arrow-color").value,d=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,m=d*h,g=t.pstyle("width").pfValue,C=t.pstyle("arrow-scale").value,y=this.r.getArrowWidth(g,C),w=this.getTempMatrix();rv(w),Nl(w,w,[o,s]),jc(w,w,[y,y]),nv(w,w,l);var _=this.instanceCount;this.vertTypeBuffer.getView(_)[0]=Qu;var x=this.indexBuffer.getView(_);ml(n,x);var k=this.edgeColorBuffer.getView(_);gl(c,m,k);var O=this.scaleRotate1Buffer.getView(_);O[0]=w[0],O[1]=w[1],O[2]=w[3],O[3]=w[4];var p=this.translate1Buffer.getView(_);p[0]=w[6],p[1]=w[7],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(t,n){var i=t.pstyle("opacity").value,a=t.pstyle("line-opacity").value,o=t.pstyle("width").pfValue,s=t.pstyle("line-color").value,l=i*a,u=this.getEdgePoints(t);if(u.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),u.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=mh;var d=this.indexBuffer.getView(c);ml(n,d);var h=this.edgeColorBuffer.getView(c);gl(s,l,h);var m=this.lineWidthBuffer.getView(c);m[0]=o;var g=this.pointAPointBBuffer.getView(c);g[0]=u[0],g[1]=u[1],g[2]=u[2],g[3]=u[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var C=0;C<u.length-2;C+=2){var y=this.instanceCount;this.vertTypeBuffer.getView(y)[0]=yh;var w=this.indexBuffer.getView(y);ml(n,w);var _=this.edgeColorBuffer.getView(y);gl(s,l,_);var x=this.lineWidthBuffer.getView(y);x[0]=o;var k=u[C-2],O=u[C-1],p=u[C],I=u[C+1],N=u[C+2],j=u[C+3],H=u[C+4],G=u[C+5];C==0&&(k=2*p-N+.001,O=2*I-j+.001),C==u.length-4&&(H=2*N-p+.001,G=2*j-I+.001);var P=this.pointAPointBBuffer.getView(y);P[0]=k,P[1]=O,P[2]=p,P[3]=I;var z=this.pointCPointDBuffer.getView(y);z[0]=N,z[1]=j,z[2]=H,z[3]=G,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"getEdgePoints",value:function(t){var n=t._private.rscratch,i=n.allpts;if(i.length==4)return i;var a=this.getNumSegments(t);return this.getCurveSegmentPoints(i,a)}},{key:"getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),a=0;a<=n;a++)if(a==0)i[0]=t[0],i[1]=t[1];else if(a==n)i[a*2]=t[t.length-2],i[a*2+1]=t[t.length-1];else{var o=a/n;this.setCurvePoint(t,o,i,a*2)}return i}},{key:"setCurvePoint",value:function(t,n,i,a){if(t.length<=2)i[a]=t[0],i[a+1]=t[1];else{for(var o=Array(t.length-2),s=0;s<o.length;s+=2){var l=(1-n)*t[s]+n*t[s+2],u=(1-n)*t[s+1]+n*t[s+3];o[s]=l,o[s+1]=u}return this.setCurvePoint(o,n,i,a)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,a=this.instanceCount;if(a!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(o),t.bindVertexArray(n);var s=bn(this.buffers),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.bufferSubData(a)}}catch(g){s.e(g)}finally{s.f()}for(var c=this.atlasManager.getAtlases(),d=0;d<c.length;d++)c[d].bufferIfNeeded(t);for(var h=0;h<c.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,c[h].texture),t.uniform1i(o.uTextures[h],h);t.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(o.uAtlasSize,this.atlasManager.atlasSize);var m=gl(this.bgColor,1);t.uniform4fv(o.uBGColor,m),t.drawArraysInstanced(t.TRIANGLES,0,i,a),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debugInfo&&this.debugInfo.push({count:a,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){return this.debugInfo}},{key:"getAtlasDebugInfo",value:function(){return this.atlasManager.getDebugInfo()}}]),r}();function bh(r,e){return"rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", ").concat(e,")")}var Zx=function(){function r(e){qi(this,r),this.r=e}return Gi(r,[{key:"getStyleKey",value:function(t,n){var i=this.getStyle(t,n),a=i.shape,o=i.opacity,s=i.color;if(!a)return null;var l=n.width(),u=n.height(),c=bh(s,o);return Fi("".concat(a,"-").concat(l,"-").concat(u,"-").concat(c))}},{key:"isVisible",value:function(t,n){var i=n.pstyle("".concat(t,"-opacity")).value;return i>0}},{key:"getStyle",value:function(t,n){var i=n.pstyle("".concat(t,"-opacity")).value,a=n.pstyle("".concat(t,"-color")).value,o=n.pstyle("".concat(t,"-shape")).value;return{opacity:i,color:a,shape:o}}},{key:"getPadding",value:function(t,n){return n.pstyle("".concat(t,"-padding")).pfValue}},{key:"draw",value:function(t,n,i,a){if(this.isVisible(t,i)){var o=this.r,s=a.w,l=a.h,u=s/2,c=l/2,d=this.getStyle(t,i),h=d.shape,m=d.color,g=d.opacity;n.save(),n.fillStyle=bh(m,g),h==="round-rectangle"||h==="roundrectangle"?o.drawRoundRectanglePath(n,u,c,s,l,"auto"):h==="ellipse"&&o.drawEllipsePath(n,u,c,s,l),n.fill(),n.restore()}}}]),r}();function Jx(r){var e=r&&r.style&&r.style.backgroundColor||"white";return Ph(e)}var iv={};iv.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL],i=r.cy.container();r.bgColor=Jx(i),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,console.log("max texture units",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),console.log("max texture size",n.getParameter(n.MAX_TEXTURE_SIZE)),console.log("webgl options",r),t.pickingFrameBuffer=Hx(n),t.pickingFrameBuffer.needsDraw=!0;var a=function(c){return t.getTextAngle(c,null)},o=function(c){var d=c.pstyle("label");return d&&d.value};t.eleDrawing=new Qx(t,n,r);var s=new Zx(t);t.eleDrawing.addTextureRenderType("node-body",_o({getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement,isVisible:function(c){return c.visible()}})),t.eleDrawing.addTextureRenderType("node-label",_o({getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:a,getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o})),t.eleDrawing.addTextureRenderType("node-overlay",_o({getBoundingBox:e.getElementBox,getKey:function(c){return s.getStyleKey("overlay",c)},drawElement:function(c,d,h){return s.draw("overlay",c,d,h)},isVisible:function(c){return s.isVisible("overlay",c)},getPadding:function(c){return s.getPadding("overlay",c)}})),t.eleDrawing.addTextureRenderType("node-underlay",_o({getBoundingBox:e.getElementBox,getKey:function(c){return s.getStyleKey("underlay",c)},drawElement:function(c,d,h){return s.draw("underlay",c,d,h)},isVisible:function(c){return s.isVisible("underlay",c)},getPadding:function(c){return s.getPadding("underlay",c)}})),t.eleDrawing.addTextureRenderType("edge-label",_o({getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:a,getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o}));var l=Uo(function(){console.log("garbage collect flag set"),t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(u,c){var d=!1;c&&c.length>0&&(d|=t.eleDrawing.invalidate(c)),d&&l()}),e2(t)};function e2(r){{var e=r.render;r.render=function(a){a=a||{};var o=r.cy;r.webgl&&(o.zoom()>Xp?(t2(r),e.call(r,a)):(r2(r),ov(r,a,Io.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(a){t.call(r,a),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(a,o,s,l){return l2(r,a,o)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(a,o){i.call(r,a,o),a==="viewport"||a==="bounds"?r.pickingFrameBuffer.needsDraw=!0:a==="background"&&r.eleDrawing.invalidate(o,{type:"node-body"})}}}function t2(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function r2(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function n2(r){var e=r.canvasWidth,t=r.canvasHeight,n=Nc(r),i=n.pan,a=n.zoom,o=Ao();Nl(o,o,[i.x,i.y]),jc(o,o,[a,a]);var s=Ao();$x(s,e,t);var l=Ao();return Wx(l,s,o),l}function av(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=Nc(r),a=i.pan,o=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(a.x,a.y),e.scale(o,o)}function i2(r,e){r.drawSelectionRectangle(e,function(t){return av(r,t)})}function a2(r){var e=r.data.contexts[r.NODE];e.save(),av(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function o2(r){var e=function(i,a,o){for(var s=i.atlasManager.getRenderTypeOpts(a),l=r.data.contexts[r.NODE],u=.125,c=s.atlasCollection.atlases,d=0;d<c.length;d++){var h=c[d],m=h.canvas,g=m.width,C=m.height,y=g*d,w=m.height*o;l.save(),l.scale(u,u),l.drawImage(m,y,w),l.strokeStyle="black",l.rect(y,w,g,C),l.stroke(),l.restore()}},t=0;e(r.eleDrawing,"node-body",t++),e(r.eleDrawing,"node-label",t++)}function s2(r,e,t,n,i){var a,o,s,l,u=Nc(r),c=u.pan,d=u.zoom;if(n===void 0||i===void 0){var h=Xu(r,c,d,e,t),m=Cr(h,2),g=m[0],C=m[1],y=6;a=g-y/2,o=C-y/2,s=y,l=y}else{var w=Xu(r,c,d,e,t),_=Cr(w,2),x=_[0],k=_[1],O=Xu(r,c,d,n,i),p=Cr(O,2),I=p[0],N=p[1];a=x,o=N,s=Math.abs(I-x),l=Math.abs(N-k)}if(s===0||l===0)return[];var j=r.data.contexts[r.WEBGL];j.bindFramebuffer(j.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(j.viewport(0,0,j.canvas.width,j.canvas.height),ov(r,null,Io.PICKING),r.pickingFrameBuffer.needsDraw=!1);var H=s*l,G=new Uint8Array(H*4);j.readPixels(a,o,s,l,j.RGBA,j.UNSIGNED_BYTE,G),j.bindFramebuffer(j.FRAMEBUFFER,null);for(var P=new Set,z=0;z<H;z++){var A=G.slice(z*4,z*4+4),T=Vx(A)-1;T>=0&&P.add(T)}return P}function l2(r,e,t){var n=s2(r,e,t),i=r.getCachedZSortedEles(),a,o,s=bn(n),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,c=i[u];if(!a&&c.isNode()&&(a=c),!o&&c.isEdge()&&(o=c),a&&o)break}}catch(d){s.e(d)}finally{s.f()}return[a,o].filter(Boolean)}function ov(r,e,t){var n,i;r.webglDebug&&(i=[],n=performance.now());var a=r.eleDrawing,o=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&i2(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var s=function(P,z){z+=1,P.isNode()?(a.drawTexture(P,z,"node-underlay"),a.drawTexture(P,z,"node-body"),a.drawTexture(P,z,"node-label"),a.drawTexture(P,z,"node-overlay")):(a.drawEdgeLine(P,z),a.drawEdgeArrow(P,z,"source"),a.drawEdgeArrow(P,z,"target"),a.drawTexture(P,z,"edge-label"))},l=r.data.contexts[r.WEBGL];t.screen?(l.clearColor(0,0,0,0),l.enable(l.BLEND),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA)):l.disable(l.BLEND),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),l.viewport(0,0,l.canvas.width,l.canvas.height);var u=n2(r),c=r.getCachedZSortedEles();if(o=c.length,a.startFrame(u,i,t),t.screen){for(var d=0;d<c.nondrag.length;d++)s(c.nondrag[d],d);for(var h=0;h<c.drag.length;h++)s(c.drag[h],-1)}else if(t.picking)for(var m=0;m<c.length;m++)s(c[m],m);a.endFrame(),r.data.gc&&(console.log("Garbage Collect!"),r.data.gc=!1,a.gc()),t.screen&&r.webglDebugShowAtlases&&(a2(r),o2(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var g=performance.now(),C=!0,y=0,w=0,_=bn(i),x;try{for(_.s();!(x=_.n()).done;){var k=x.value;y++,w+=k.count}}catch(G){_.e(G)}finally{_.f()}var O=Math.ceil(g-n),p="".concat(o," elements, ").concat(w," rectangles, ").concat(y," batches");if(C)console.log("WebGL (".concat(t.name,") - ").concat(p));else{console.log("WebGL render (".concat(t.name,") - frame time ").concat(O,"ms")),console.log("  ".concat(p)),console.log("Texture Atlases Used:");var I=a.getAtlasDebugInfo(),N=bn(I),j;try{for(N.s();!(j=N.n()).done;){var H=j.value;console.log("  ".concat(H.type,": ").concat(H.keyCount," keys, ").concat(H.atlasCount," atlases"))}}catch(G){N.e(G)}finally{N.f()}console.log("")}}}var Wi={};Wi.drawPolygonPath=function(r,e,t,n,i,a){var o=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*a[0],t+s*a[1]);for(var l=1;l<a.length/2;l++)r.lineTo(e+o*a[l*2],t+s*a[l*2+1]);r.closePath()};Wi.drawRoundPolygonPath=function(r,e,t,n,i,a,o){o.forEach(function(s){return Vp(r,s)}),r.closePath()};Wi.drawRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,l=a==="auto"?ha(n,i):Math.min(a,s,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+o,t-s,e+o,t,l),r.arcTo(e+o,t+s,e,t+s,l),r.arcTo(e-o,t+s,e-o,t,l),r.arcTo(e-o,t-s,e,t-s,l),r.lineTo(e,t-s),r.closePath()};Wi.drawBottomRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,l=a==="auto"?ha(n,i):a;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+o,t-s),r.lineTo(e+o,t),r.arcTo(e+o,t+s,e,t+s,l),r.arcTo(e-o,t+s,e-o,t,l),r.lineTo(e-o,t-s),r.lineTo(e,t-s),r.closePath()};Wi.drawCutRectanglePath=function(r,e,t,n,i,a,o){var s=n/2,l=i/2,u=o==="auto"?_c():o;r.beginPath&&r.beginPath(),r.moveTo(e-s+u,t-l),r.lineTo(e+s-u,t-l),r.lineTo(e+s,t-l+u),r.lineTo(e+s,t+l-u),r.lineTo(e+s-u,t+l),r.lineTo(e-s+u,t+l),r.lineTo(e-s,t+l-u),r.lineTo(e-s,t-l+u),r.closePath()};Wi.drawBarrelPath=function(r,e,t,n,i){var a=n/2,o=i/2,s=e-a,l=e+a,u=t-o,c=t+o,d=ec(n,i),h=d.widthOffset,m=d.heightOffset,g=d.ctrlPtOffsetPct*h;r.beginPath&&r.beginPath(),r.moveTo(s,u+m),r.lineTo(s,c-m),r.quadraticCurveTo(s+g,c,s+h,c),r.lineTo(l-h,c),r.quadraticCurveTo(l-g,c,l,c-m),r.lineTo(l,u+m),r.quadraticCurveTo(l-g,u,l-h,u),r.lineTo(s+h,u),r.quadraticCurveTo(s+g,u,s,u+m),r.closePath()};var Ch=Math.sin(0),wh=Math.cos(0),dc={},hc={},sv=Math.PI/40;for(aa=0*Math.PI;aa<2*Math.PI;aa+=sv)dc[aa]=Math.sin(aa),hc[aa]=Math.cos(aa);var aa;Wi.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=sv)a=e-s*dc[u]*Ch+s*hc[u]*wh,o=t+l*hc[u]*Ch+l*dc[u]*wh,u===0?r.moveTo(a,o):r.lineTo(a,o);r.closePath()};var Jo={};Jo.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Jo.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),a=r.full?Math.ceil(n.w):i[2],o=r.full?Math.ceil(n.h):i[3],s=at(r.maxWidth)||at(r.maxHeight),l=this.getPixelRatio(),u=1;if(r.scale!==void 0)a*=r.scale,o*=r.scale,u=r.scale;else if(s){var c=1/0,d=1/0;at(r.maxWidth)&&(c=u*r.maxWidth/a),at(r.maxHeight)&&(d=u*r.maxHeight/o),u=Math.min(c,d),a*=u,o*=u}s||(a*=l,o*=l,u*=l);var h=document.createElement("canvas");h.width=a,h.height=o,h.style.width=a+"px",h.style.height=o+"px";var m=h.getContext("2d");if(a>0&&o>0){m.clearRect(0,0,a,o),m.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(r.full)m.translate(-n.x1*u,-n.y1*u),m.scale(u,u),this.drawElements(m,g),m.scale(1/u,1/u),m.translate(n.x1*u,n.y1*u);else{var C=e.pan(),y={x:C.x*u,y:C.y*u};u*=e.zoom(),m.translate(y.x,y.y),m.scale(u,u),this.drawElements(m,g),m.scale(1/u,1/u),m.translate(-y.x,-y.y)}r.bg&&(m.globalCompositeOperation="destination-over",m.fillStyle=r.bg,m.rect(0,0,a,o),m.fill())}return h};function u2(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([n],{type:e})}function xh(r){var e=r.indexOf(",");return r.substr(e+1)}function lv(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Ya(function(i,a){try{e.toBlob(function(o){o!=null?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){a(o)}});case"blob":return u2(xh(n()),t);case"base64":return xh(n());case"base64uri":default:return n()}}Jo.png=function(r){return lv(r,this.bufferCanvasImage(r),"image/png")};Jo.jpg=function(r){return lv(r,this.bufferCanvasImage(r),"image/jpeg")};var uv={};uv.nodeShapeImpl=function(r,e,t,n,i,a,o,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,a);case"polygon":return this.drawPolygonPath(e,t,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,a,s);case"barrel":return this.drawBarrelPath(e,t,n,i,a)}};var c2=cv,Rt=cv.prototype;Rt.CANVAS_LAYERS=3;Rt.SELECT_BOX=0;Rt.DRAG=1;Rt.NODE=2;Rt.WEBGL=3;Rt.CANVAS_TYPES=["2d","2d","2d","webgl2"];Rt.BUFFER_COUNT=3;Rt.TEXTURE_BUFFER=0;Rt.MOTIONBLUR_BUFFER_NODE=1;Rt.MOTIONBLUR_BUFFER_DRAG=2;function cv(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(Rt.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Rt.CANVAS_LAYERS),contexts:new Array(Rt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Rt.CANVAS_LAYERS),bufferCanvases:new Array(Rt.BUFFER_COUNT),bufferContexts:new Array(Rt.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=a,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=a;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Dm()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var u=0;u<Rt.CANVAS_LAYERS;u++){var c=e.data.canvases[u]=n.createElement("canvas"),d=Rt.CANVAS_TYPES[u];e.data.contexts[u]=c.getContext(d),e.data.contexts[u]||ur("Could not create canvas of type "+d),Object.keys(l).forEach(function(oe){c.style[oe]=l[oe]}),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(Rt.CANVAS_LAYERS-u),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[u]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Rt.NODE].setAttribute("data-id","layer"+Rt.NODE+"-node"),e.data.canvases[Rt.SELECT_BOX].setAttribute("data-id","layer"+Rt.SELECT_BOX+"-selectbox"),e.data.canvases[Rt.DRAG].setAttribute("data-id","layer"+Rt.DRAG+"-drag"),e.data.canvases[Rt.WEBGL]&&e.data.canvases[Rt.WEBGL].setAttribute("data-id","layer"+Rt.WEBGL+"-webgl");for(var u=0;u<Rt.BUFFER_COUNT;u++)e.data.bufferCanvases[u]=n.createElement("canvas"),e.data.bufferContexts[u]=e.data.bufferCanvases[u].getContext("2d"),e.data.bufferCanvases[u].style.position="absolute",e.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),e.data.bufferCanvases[u].style.zIndex=String(-u-1),e.data.bufferCanvases[u].style.visibility="hidden";e.pathsEnabled=!0;var h=pn(),m=function($){return{x:($.x1+$.x2)/2,y:($.y1+$.y2)/2}},g=function($){return{x:-$.w/2,y:-$.h/2}},C=function($){var Q=$[0]._private,J=Q.oldBackgroundTimestamp===Q.backgroundTimestamp;return!J},y=function($){return $[0]._private.nodeKey},w=function($){return $[0]._private.labelStyleKey},_=function($){return $[0]._private.sourceLabelStyleKey},x=function($){return $[0]._private.targetLabelStyleKey},k=function($,Q,J,le,de){return e.drawElement($,Q,J,!1,!1,de)},O=function($,Q,J,le,de){return e.drawElementText($,Q,J,le,"main",de)},p=function($,Q,J,le,de){return e.drawElementText($,Q,J,le,"source",de)},I=function($,Q,J,le,de){return e.drawElementText($,Q,J,le,"target",de)},N=function($){return $.boundingBox(),$[0]._private.bodyBounds},j=function($){return $.boundingBox(),$[0]._private.labelBounds.main||h},H=function($){return $.boundingBox(),$[0]._private.labelBounds.source||h},G=function($){return $.boundingBox(),$[0]._private.labelBounds.target||h},P=function($,Q){return Q},z=function($){return m(N($))},A=function($,Q,J){var le=$?$+"-":"";return{x:Q.x+J.pstyle(le+"text-margin-x").pfValue,y:Q.y+J.pstyle(le+"text-margin-y").pfValue}},T=function($,Q,J){var le=$[0]._private.rscratch;return{x:le[Q],y:le[J]}},E=function($){return A("",T($,"labelX","labelY"),$)},M=function($){return A("source",T($,"sourceLabelX","sourceLabelY"),$)},L=function($){return A("target",T($,"targetLabelX","targetLabelY"),$)},F=function($){return g(N($))},X=function($){return g(H($))},K=function($){return g(G($))},Y=function($){var Q=j($),J=g(j($));if($.isNode()){switch($.pstyle("text-halign").value){case"left":J.x=-Q.w-(Q.leftPad||0);break;case"right":J.x=-(Q.rightPad||0);break}switch($.pstyle("text-valign").value){case"top":J.y=-Q.h-(Q.topPad||0);break;case"bottom":J.y=-(Q.botPad||0);break}}return J},ae=e.data.eleTxrCache=new Do(e,{getKey:y,doesEleInvalidateKey:C,drawElement:k,getBoundingBox:N,getRotationPoint:z,getRotationOffset:F,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),he=e.data.lblTxrCache=new Do(e,{getKey:w,drawElement:O,getBoundingBox:j,getRotationPoint:E,getRotationOffset:Y,isVisible:P}),be=e.data.slbTxrCache=new Do(e,{getKey:_,drawElement:p,getBoundingBox:H,getRotationPoint:M,getRotationOffset:X,isVisible:P}),me=e.data.tlbTxrCache=new Do(e,{getKey:x,drawElement:I,getBoundingBox:G,getRotationPoint:L,getRotationOffset:K,isVisible:P}),we=e.data.lyrTxrCache=new Yp(e);e.onUpdateEleCalcs(function($,Q){ae.invalidateElements(Q),he.invalidateElements(Q),be.invalidateElements(Q),me.invalidateElements(Q),we.invalidateElements(Q);for(var J=0;J<Q.length;J++){var le=Q[J]._private;le.oldBackgroundTimestamp=le.backgroundTimestamp}});var xe=function($){for(var Q=0;Q<$.length;Q++)we.enqueueElementRefinement($[Q].ele)};ae.onDequeue(xe),he.onDequeue(xe),be.onDequeue(xe),me.onDequeue(xe),r.webgl&&e.initWebgl(r,{getStyleKey:y,getLabelKey:w,drawElement:k,drawLabel:O,getElementBox:N,getLabelBox:j,getElementRotationPoint:z,getElementRotationOffset:F,getLabelRotationPoint:E,getLabelRotationOffset:Y})}Rt.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Rt.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Rt.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Rt.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var f2=typeof Path2D<"u";Rt.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Rt.usePaths=function(){return f2&&this.pathsEnabled};Rt.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Rt.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Rt.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Er(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[Qp,ii,yi,Fc,ya,io,Jr,iv,Wi,Jo,uv].forEach(function(r){Tt(Rt,r)});var d2=[{name:"null",impl:Fp},{name:"base",impl:Up},{name:"canvas",impl:c2}],h2=[{type:"layout",extensions:Xw},{type:"renderer",extensions:d2}],fv={},dv={};function hv(r,e,t){var n=t,i=function(N){Qt("Can not register `"+e+"` for `"+r+"` since `"+N+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Go.prototype[e])return i(e);Go.prototype[e]=t}else if(r==="collection"){if(Fr.prototype[e])return i(e);Fr.prototype[e]=t}else if(r==="layout"){for(var a=function(N){this.options=N,t.call(this,N),$t(this._private)||(this._private={}),this._private.cy=N.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(t.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=t.prototype.stop;o.stop=function(){var I=this.options;if(I&&I.animate){var N=this.animations;if(N)for(var j=0;j<N.length;j++)N[j].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var d=function(N){return N._private.cy},h={addEventFields:function(N,j){j.layout=N,j.cy=d(N),j.target=N},bubble:function(){return!0},parent:function(N){return d(N)}};Tt(o,{createEmitter:function(){return this._private.emitter=new Kl(h,this),this},emitter:function(){return this._private.emitter},on:function(N,j){return this.emitter().on(N,j),this},one:function(N,j){return this.emitter().one(N,j),this},once:function(N,j){return this.emitter().one(N,j),this},removeListener:function(N,j){return this.emitter().removeListener(N,j),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(N,j){return this.emitter().emit(N,j),this}}),Yt.eventAliasesOn(o),n=a}else if(r==="renderer"&&e!=="null"&&e!=="base"){var m=pv("renderer","base"),g=m.prototype,C=t,y=t.prototype,w=function(){m.apply(this,arguments),C.apply(this,arguments)},_=w.prototype;for(var x in g){var k=g[x],O=y[x]!=null;if(O)return i(x);_[x]=k}for(var p in y)_[p]=y[p];g.clientFunctions.forEach(function(I){_[I]=_[I]||function(){ur("Renderer does not implement `renderer."+I+"()` on its prototype")}}),n=w}else if(r==="__proto__"||r==="constructor"||r==="prototype")return ur(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ah({map:fv,keys:[r,e],value:n})}function pv(r,e){return Ih({map:fv,keys:[r,e]})}function p2(r,e,t,n,i){return Ah({map:dv,keys:[r,e,t,n],value:i})}function v2(r,e,t,n){return Ih({map:dv,keys:[r,e,t,n]})}var pc=function(){if(arguments.length===2)return pv.apply(null,arguments);if(arguments.length===3)return hv.apply(null,arguments);if(arguments.length===4)return v2.apply(null,arguments);if(arguments.length===5)return p2.apply(null,arguments);ur("Invalid extension access syntax")};Go.prototype.extension=pc;h2.forEach(function(r){r.extensions.forEach(function(e){hv(r.type,e.name,e.impl)})});var vv=function r(){if(!(this instanceof r))return new r;this.length=0},ga=vv.prototype;ga.instanceString=function(){return"stylesheet"};ga.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};ga.css=function(r,e){var t=this.length-1;if(yt(r))this[t].properties.push({name:r,value:e});else if($t(r))for(var n=r,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(s!=null){var l=$r.properties[o]||$r.properties[jl(o)];if(l!=null){var u=l.name,c=s;this[t].properties.push({name:u,value:c})}}}return this};ga.style=ga.css;ga.generateStyle=function(r){var e=new $r(r);return this.appendToStyle(e)};ga.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var a=0;a<i.length;a++){var o=i[a];r.css(o.name,o.value)}}return r};var g2="3.31.0",ri=function(e){if(e===void 0&&(e={}),$t(e))return new Go(e);if(yt(e))return pc.apply(pc,arguments)};ri.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(ri),r.apply(null,e),this};ri.warnings=function(r){return Vh(r)};ri.version=g2;ri.stylesheet=ri.Stylesheet=vv;var wv=os(gv()),xv=os(Cv());var m2=["cy"];ri.use(wv.default);ri.use(xv.default);var _v=(()=>{class r{constructor(){this.projects=[],this.searchResultsMap={},this.renameCondition={}}ngAfterViewInit(){this.initCytoscape()}initCytoscape(){if(this.cyElement){let t=this.buildGraphElements();this.cy=ri({container:this.cyElement.nativeElement,elements:t,style:[{selector:"node",style:{label:"data(label)","background-color":"#666",width:25,height:25}},{selector:".protein",style:{"background-color":"#FF5733"}},{selector:".project",style:{"background-color":"#33A8FF"}},{selector:".analysis",style:{"background-color":"#33FF57"}},{selector:".condition",style:{"background-color":"#FF33A1"}},{selector:"edge",style:{width:2,"line-color":"#ccc"}}],layout:{name:"euler",animate:!0}}),this.cy.nodes().forEach(n=>{n.qtip({content:n.data("label"),position:{my:"top center",at:"bottom center"},style:{classes:"qtip-bootstrap",tip:{width:16,height:8}}})})}}buildGraphElements(){let t=[],n=new Set;return this.projects.forEach(i=>{n.has(i.id)||(t.push({data:{id:i.id,label:i.name},classes:"project"}),n.add(i.id)),(this.searchResultsMap[i.id]||[]).forEach(o=>{let s=o.gene_name||o.uniprot_id||o.primary_id,l=`AG_${o.analysis_group.id}`,u=`Cond_${o.condition_A}`,c=`Cond_${o.condition_B}`;this.renameCondition[i.id]||(this.renameCondition[i.id][o.condition_A]||(u=`Cond_${this.renameCondition[i.id][o.condition_A]||o.condition_A}`),this.renameCondition[i.id][o.condition_B]||(c=`Cond_${this.renameCondition[i.id][o.condition_B]||o.condition_B}`)),n.has(s)||(t.push({data:{id:s,label:s},classes:"protein"}),n.add(s)),n.has(l)||(t.push({data:{id:l,label:o.analysis_group.name},classes:"analysis"}),n.add(l)),n.has(u)||(t.push({data:{id:u,label:o.condition_A},classes:"condition"}),n.add(u)),n.has(c)||(t.push({data:{id:c,label:o.condition_B},classes:"condition"}),n.add(c)),t.push({data:{source:s,target:i.id}}),t.push({data:{source:s,target:l}}),t.push({data:{source:l,target:u}}),t.push({data:{source:l,target:c}})})}),t}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=It({type:r,selectors:[["app-cytoscape-plot"]],viewQuery:function(n,i){if(n&1&&_a(m2,5),n&2){let a;Sa(a=Ta())&&(i.cyElement=a.first)}},inputs:{projects:"projects",searchResultsMap:"searchResultsMap",renameCondition:"renameCondition"},decls:2,vars:0,consts:[["cy",""],[1,"cy-container"]],template:function(n,i){n&1&&ht(0,"div",1,0)},styles:[".cy-container[_ngcontent-%COMP%]{width:100%;height:600px;border:1px solid #ccc}"]})}}return r})();var y2=r=>({"disabled-icon":r});function b2(r,e){r&1&&(ne(0,"button",11),ke(1,"No previous searches"),ue())}function C2(r,e){if(r&1){let t=St();ne(0,"button",13),He("click",function(){Ze(t);let i=_e().$implicit,a=_e(3);return Je(a.restoreSearches(i.searchQuery,i.searchID))}),ke(1),ue()}if(r&2){let t=_e().$implicit;ye(),bf("",t.searchID,". ",t.termFounds.join(","),"")}}function w2(r,e){if(r&1&&ct(0,C2,2,2,"button",12),r&2){let t=e.$implicit,n=_e(3);Ct(t.collate===n.collate.id?0:-1)}}function x2(r,e){if(r&1&&Ut(0,w2,1,1,null,null,ci),r&2){let t=_e(2);Kt(t.pastSearches)}}function _2(r,e){if(r&1&&(ne(0,"button",10)(1,"mat-icon"),ke(2,"history"),ue()(),ne(3,"mat-menu",null,0),ct(5,b2,2,0,"button",11)(6,x2,2,0),ue()),r&2){let t=Bn(4),n=_e();Xe("matMenuTriggerFor",t),ye(5),Ct(n.pastSearches.length===0?5:6)}}function S2(r,e){if(r&1){let t=St();ne(0,"button",14),He("click",function(){Ze(t);let i=_e();return Je(i.navigateToEdit())}),ne(1,"mat-icon"),ke(2,"edit"),ue()()}}function T2(r,e){if(r&1&&ht(0,"app-collate-header",7),r&2){let t=_e();Xe("collate",t.collate)}}function E2(r,e){if(r&1&&(ne(0,"div",15),ht(1,"app-collate-tags",16),ue()),r&2){let t=_e(2);ye(),Xe("collageTags",t.collate.tags)}}function k2(r,e){if(r&1&&ct(0,E2,2,1,"div",15),r&2){let t=_e();Ct(t.collate.settings.showTags?0:-1)}}function D2(r,e){if(r&1&&ht(0,"app-cytoscape-plot",19),r&2){let t=_e(2);Xe("renameCondition",t.collate.settings.renameSampleCondition)("projects",t.projects)("searchResultsMap",t.filteredResults)}}function M2(r,e){if(r&1){let t=St();ke(0),ne(1,"button",24),He("click",function(){Ze(t);let i=_e().$implicit,a=_e(2);return Je(a.exportData(i))}),ne(2,"mat-icon"),ke(3,"download"),ue()()}if(r&2){let t=_e().$implicit,n=_e(2);zt(" ",t," "),ye(),Xe("disabled",n.waitingForDownload)}}function P2(r,e){r&1&&(ne(0,"mat-tab"),ct(1,M2,4,2,"ng-template",23),ue())}function A2(r,e){if(r&1&&ht(0,"app-collate-project-list",22),r&2){let t=_e(2);Xe("searchTerm",t.selectedSearchTerm)("renameCondition",t.collate.settings.renameSampleCondition)("projects",t.projects)("filteredResults",t.filteredResults)}}function I2(r,e){if(r&1){let t=St();ne(0,"button",17),He("click",function(){Ze(t);let i=_e();return Je(i.toggleCytoscapePlot())}),ne(1,"mat-icon",18),ke(2,"graph_4"),ue()(),ct(3,D2,1,3,"app-cytoscape-plot",19),ne(4,"div",20)(5,"mat-tab-group",21),He("selectedTabChange",function(){Ze(t);let i=_e();return Je(i.filterDataBySearchTerm())}),on("selectedIndexChange",function(i){Ze(t);let a=_e();return an(a.selectedIndex,i)||(a.selectedIndex=i),Je(i)}),Ut(6,P2,2,0,"mat-tab",null,ci),ue()(),ct(8,A2,1,4,"app-collate-project-list",22)}if(r&2){let t=_e();ye(),Xe("ngClass",po(5,y2,!t.showCytoscapePlot)),ye(2),Ct(t.collate&&t.showCytoscapePlot?3:-1),ye(2),nn("selectedIndex",t.selectedIndex),Xe("mat-stretch-tabs",!1),ye(),Kt(t.searchTerms),ye(2),Ct(t.collate?8:-1)}}var iu=(()=>{class r{set sessionId(t){t&&this.collate&&this.getSearchFromID(t),this._sessionId=t}get sessionId(){return this._sessionId}set collateId(t){t&&this.collateService.getCollate(t).subscribe(n=>{if(this.collate=n,this.title.setTitle(`${n.title} - C|nder`),this.projects=n.projects,n.settings||(n.settings={projectOrder:[],analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},plotSettings:{},showTags:!1}),n.settings.plotSettings||(n.settings.plotSettings={}),n.settings.projectOrder&&(this.projects=n.settings.projectOrder.map(i=>n.projects.find(a=>a.id===i))),!this.collate?.settings.projectAnalysisGroupVisibility){this.collate.settings.projectAnalysisGroupVisibility={};for(let i of this.projects)this.collate.settings.projectAnalysisGroupVisibility[i.id]={}}if(this.collate?.settings.renameSampleCondition)this.sessionId&&this.getSearchFromID(this.sessionId);else{this.collate.settings.renameSampleCondition={};for(let i of this.projects)this.collate.settings.renameSampleCondition[i.id]={},this.web.getProjectUniqueConditions(i.id).subscribe(a=>{for(let o of a)this.collate.settings.renameSampleCondition[i.id][o.Condition]=o.Condition;console.log(this.collate.settings.renameSampleCondition)});this.sessionId&&this.getSearchFromID(this.sessionId)}console.log(this.projects)})}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(t){this._selectedSearchTerm=t}toggleCytoscapePlot(){this.showCytoscapePlot=!this.showCytoscapePlot}constructor(t,n,i,a,o,s,l,u){this.title=t,this.ws=n,this.sb=i,this.dialog=a,this.collateService=o,this.web=s,this.accounts=l,this.router=u,this.showCytoscapePlot=!1,this._sessionId=null,this.collate=null,this.projects=[],this.filteredResults={},this.searchTerms=[],this.selectedIndex=0,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this._selectedSearchTerm="",this.pastSearches=[],this.waitingForDownload=!1;let c=localStorage.getItem("cinderPastSearches");c&&(this.pastSearches=JSON.parse(c)),this.ws.searchWSConnection?.subscribe(d=>{if(d&&d.type==="export_status"&&this.web.cinderInstanceID===d.instance_id&&this.waitingForDownload)switch(d.status){case"error":this.waitingForDownload=!1;break;case"started":this.sb.open("Export started","Dismiss",{duration:2e3});break;case"in_progress":break;case"complete":this.waitingForDownload=!1,this.sb.open("Export complete","Dismiss",{duration:2e3});let h=`${this.web.baseURL}/api/search/download_temp_file/?token=${d.file}`;window.open(h,"_blank");break}})}associateAnalysisGroupsWithProjects(){return zr(this,null,function*(){let t=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},t&&t.forEach(n=>{let i=n.project;this.projectAnalysisGroups[i]||(this.projectAnalysisGroups[i]=[]),this.projectAnalysisGroups[i].push(n),this.analysisGroupProjects[n.id]=this.projects.find(a=>a.id===i)})})}distributeSearchResults(t){return zr(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(t.map(n=>n.search_term))),t.forEach(n=>{let i=n.analysis_group.id,a=this.analysisGroupProjects[i];a&&(this.searchResults[a.id]||(this.searchResults[a.id]=[]),this.searchResults[a.id].push(n))}),console.log(this.searchResults),this.searchTerms.sort((n,i)=>n.localeCompare(i)),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let t={};return Object.keys(this.searchResults).forEach(n=>{t[n]=this.searchResults[n].filter(i=>i.search_term===this.selectedSearchTerm),this.collate?.settings?.analysisGroupOrderMap&&(console.log(this.collate.settings.analysisGroupOrderMap),Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(i=>{let a=parseInt(i),o=this.collate?.settings.analysisGroupOrderMap[a];if(!t[a]||!o)return;console.log(o);let s=t[a].filter(l=>!o.includes(l.analysis_group.id));if(t[a]=t[a].filter(l=>o.includes(l.analysis_group.id)),t[a]=t[a].sort((l,u)=>o.indexOf(l.analysis_group.id)-o.indexOf(u.analysis_group.id)),t[a].concat(s),this.collate?.settings?.projectAnalysisGroupVisibility){let l=this.collate?.settings.projectAnalysisGroupVisibility[a];t[a]=t[a].filter(u=>!l||!(u.analysis_group.id in l)?!0:l[u.analysis_group.id])}}))}),t}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults(),console.log(this.filteredResults)}getSearchFromID(t){this.web.getSearchSession(t).subscribe(n=>{this.searchSession=n}),this.web.getSearchResults(t,99999).subscribe(n=>{if(!this.collate)return;console.log(n.results);let i=Array.from(new Set(n.results.map(o=>o.search_term)));this.pastSearches.find(o=>o.searchID===t)||(this.pastSearches.push({searchQuery:null,termFounds:i,collate:this.collate.id,searchID:t}),this.pastSearches=this.pastSearches.slice(-20),localStorage.setItem("cinderPastSearches",JSON.stringify(this.pastSearches))),this.distributeSearchResults(n.results).then()})}restoreSearches(t,n){this.web.getSearchSession(n).subscribe(i=>{this.searchSession=i}),t?this.distributeSearchResults(t.results).then():this.web.getSearchResults(n,99999).subscribe(i=>{this.distributeSearchResults(i.results).then()})}navigateToEdit(){this.collate&&this.router.navigate([`/collate/edit/${this.collate.id}`])}openQRCodeDialog(){let t=window.location.href,n=this.dialog.open(rd);n.componentInstance.url=t}navigateToHome(){this.router.navigate(["/"])}exportData(t){this.web.exportSearchData(this.searchSession.id,t,1e-8,1e-8,this.web.searchSessionID).subscribe(n=>{this.waitingForDownload=!0})}openVisibilityDialog(){let t=this.dialog.open(nl);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(n=>{let i={};n.forEach(o=>{i[o.project]||(i[o.project]=[]),i[o.project].push(o)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(o=>{let s=parseInt(o),l=this.collate?.settings.analysisGroupOrderMap[s];if(!l||!i[s])return;let u=i[s].filter(c=>!l.includes(c.id));i[s]=i[s].filter(c=>l.includes(c.id)),i[s]=i[s].sort((c,d)=>l.indexOf(c.id)-l.indexOf(d.id)),i[s]=i[s].concat(u)}),t.componentInstance.projectAnalysisGroupMap=i,t.componentInstance.projects=this.projects;let a={};this.collate?.settings?.projectAnalysisGroupVisibility&&(a=this.collate.settings.projectAnalysisGroupVisibility);for(let o in i){a[o]||(a[o]={});for(let s of i[o])s.id in a[o]||(a[o][s.id]=!0)}t.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},a)}),t.afterClosed().subscribe(n=>{this.collate&&n&&(this.collate.settings.projectAnalysisGroupVisibility=n,this.filteredResults=this.getFilteredSearchResults())})}static{this.\u0275fac=function(n){return new(n||r)(st(Sf),st(Is),st(Ln),st(Pa),st(ki),st(dn),st(Xn),st(Ea))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-view"]],inputs:{sessionId:"sessionId",collateId:"collateId"},decls:18,vars:9,consts:[["previousSearch","matMenu"],["href","/#/home"],[3,"width","height","ngSrc"],[1,"spacer"],["mat-icon-button","","matTooltip","Open QR code dialog",3,"click"],["mat-icon-button","","matTooltip","Change analysis group visibility",3,"click"],["mat-icon-button","","matTooltip","Edit collate"],[3,"collate"],[2,"display","flex","justify-content","center"],[3,"searchResultID","projects"],["mat-icon-button","","matTooltip","View previous searches",3,"matMenuTriggerFor"],["mat-menu-item","","disabled",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],["mat-icon-button","","matTooltip","Edit collate",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTags"],["mat-icon-button","","matTooltip","Toggle Cytoscape Plot",3,"click"],[3,"ngClass"],[3,"renameCondition","projects","searchResultsMap"],[2,"padding","20px"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"searchTerm","renameCondition","projects","filteredResults"],["mat-tab-label",""],["mat-icon-button","","matTooltip","Export data",3,"click","disabled"]],template:function(n,i){n&1&&(ne(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"a",1),ht(3,"img",2),ue(),ht(4,"span",3),ct(5,_2,7,2),ne(6,"button",4),He("click",function(){return i.openQRCodeDialog()}),ne(7,"mat-icon"),ke(8,"qr_code"),ue()(),ne(9,"button",5),He("click",function(){return i.openVisibilityDialog()}),ne(10,"mat-icon"),ke(11,"visibility"),ue()(),ct(12,S2,3,0,"button",6),ue()(),ct(13,T2,1,1,"app-collate-header",7)(14,k2,1,1),ne(15,"div",8)(16,"app-collate-search",9),He("searchResultID",function(o){return i._sessionId=o,i.getSearchFromID(o)}),ue()(),ct(17,I2,9,7)),n&2&&(ye(3),Xe("width",25)("height",25)("ngSrc","/assets/logo.png"),ye(2),Ct(i.collate?5:-1),ye(7),Ct(i.accounts.loggedIn?12:-1),ye(),Ct(i.collate?13:-1),ye(),Ct(i.collate&&i.collate.settings?14:-1),ye(2),Xe("projects",i.projects),ye(),Ct(i.searchTerms.length>0?17:-1))},dependencies:[Yf,Js,Ws,$s,tl,sn,Si,Bs,Rs,rl,_f,Xs,Ks,Ys,Wf,Ts,_v,wf],styles:[".disabled-icon[_ngcontent-%COMP%]{color:red}"]})}}return r})();var Sv=(r,e)=>e.id;function B2(r,e){if(r&1){let t=St();ne(0,"mat-chip",2),He("click",function(){let i=Ze(t).$implicit,a=_e(2);return Je(a.removeProject(i))}),ke(1),ue()}if(r&2){let t=e.$implicit;ye(),zt(" ",t.name," ")}}function R2(r,e){if(r&1&&(ne(0,"div"),ke(1),ne(2,"mat-chip-set"),Ut(3,B2,2,1,"mat-chip",null,Sv),ue()()),r&2){let t=_e();ye(),zt(" Selected Projects: ",t.selectedMultipleProjects.length," "),ye(2),Kt(t.selectedMultipleProjects)}}function O2(r,e){if(r&1&&(ne(0,"mat-list-option",4),ke(1),ue()),r&2){let t=e.$implicit;Xe("value",t),ye(),or(t.name)}}function L2(r,e){if(r&1){let t=St();ne(0,"div")(1,"mat-selection-list",3),Ut(2,O2,2,2,"mat-list-option",4,Sv),ue(),ne(4,"mat-paginator",5),He("page",function(i){Ze(t);let a=_e(2);return Je(a.handleProjectPageEvent(i))}),ue()()}if(r&2){let t=_e(2);ye(),Xe("multiple",!1),ye(),Kt(t.projectQuery.results),ye(2),Xe("pageSize",t.projectPageSize)("length",t.projectQuery.count)("pageIndex",t.projectPageIndex)}}function F2(r,e){r&1&&(ne(0,"p"),ke(1,"No projects found."),ue())}function N2(r,e){if(r&1&&ct(0,L2,5,4,"div")(1,F2,2,0,"p"),r&2){let t=_e();Ct(t.projectQuery.count>0?0:1)}}var Tv=(()=>{class r{constructor(t,n){this.fb=t,this.web=n,this.multipleSelection=!1,this.selectedProjects=new lr,this.formProjectSearch=this.fb.group({searchTerm:new On("",Rn.required),selectedProjects:new On([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(i=>{i&&this.fetchProjects(i,this.projectPageSize,0)}),this.formProjectSearch.controls.selectedProjects.valueChanges.subscribe(i=>{if(i){for(let a of i)this.selectedMultipleProjects.includes(a)||this.selectedMultipleProjects.push(a);this.selectedProjects.emit(this.selectedMultipleProjects)}})}fetchProjects(t,n,i){let a=i*n;this.web.getProjects(void 0,n,a,t,void 0).subscribe(o=>{this.projectQuery=o})}handleProjectPageEvent(t){this.projectPageIndex=t.pageIndex,this.fetchProjects(this.formProjectSearch.controls.searchTerm.value||"",t.pageSize,t.pageIndex)}removeProject(t){this.selectedMultipleProjects=this.selectedMultipleProjects.filter(n=>n!==t),this.selectedProjects.emit(this.selectedMultipleProjects)}static{this.\u0275fac=function(n){return new(n||r)(st(un),st(dn))}}static{this.\u0275cmp=It({type:r,selectors:[["app-project-search"]],inputs:{multipleSelection:"multipleSelection"},outputs:{selectedProjects:"selectedProjects"},decls:7,vars:3,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Project Name","type","search"],[3,"click"],["formControlName","selectedProjects",3,"multiple"],[3,"value"],[3,"page","pageSize","length","pageIndex"]],template:function(n,i){n&1&&(ne(0,"form",0)(1,"mat-form-field"),ht(2,"input",1),ne(3,"mat-label"),ke(4,"Search For Specific Projects"),ue()(),ct(5,R2,5,1,"div")(6,N2,2,1),ue()),n&2&&(Xe("formGroup",i.formProjectSearch),ye(5),Ct(i.selectedMultipleProjects.length>0?5:-1),ye(),Ct(i.projectQuery?6:-1))},dependencies:[Tn,Sn,ln,Pr,_n,$n,Un,cn,fn,Kn,Ms,Ds,Ss,_s,Es],encapsulation:2})}}return r})();var Ev=(()=>{class r{constructor(t,n,i){this.dialogRef=t,this.fb=n,this.web=i,this.formProjectSearch=this.fb.group({searchTerm:new On("",Rn.required),selectedProjects:new On([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.multipleSelection=!0,this.web.getProjects(void 0,this.projectPageSize,0,void 0).subscribe(a=>{this.projectQuery=a}),this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(a=>{a&&this.web.getProjects(void 0,this.projectPageSize,0,a).subscribe(o=>{this.projectQuery=o})})}handleSelectedProjects(t){this.selectedMultipleProjects=t}close(){this.dialogRef.close()}save(){this.dialogRef.close(this.selectedMultipleProjects)}static{this.\u0275fac=function(n){return new(n||r)(st(qr),st(un),st(dn))}}static{this.\u0275cmp=It({type:r,selectors:[["app-project-add-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedProjects"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(n,i){n&1&&(ne(0,"h2",0),ke(1,"Project Add"),ue(),ne(2,"div",1)(3,"app-project-search",2),He("selectedProjects",function(o){return i.handleSelectedProjects(o)}),ue(),ne(4,"small"),ke(5),ue()(),ne(6,"div",3)(7,"button",4),He("click",function(){return i.save()}),ke(8,"Submit"),ue(),ne(9,"button",4),He("click",function(){return i.close()}),ke(10,"Close"),ue()()),n&2&&(ye(5),zt("Selected ",i.selectedMultipleProjects.length," Projects."))},dependencies:[Tv,Gr,Hr,Wr,yr],encapsulation:2})}}return r})();var kv=(r,e)=>e.id;function j2(r,e){if(r&1&&(ne(0,"mat-list-item",5)(1,"mat-icon",7),ke(2,"notes"),ue(),ne(3,"div",8),ke(4),ue(),ht(5,"div",9),ue()),r&2){let t=e.$implicit;ye(4),or(t.name)}}function V2(r,e){if(r&1){let t=St();ne(0,"div",5)(1,"div",6)(2,"b"),ke(3),ue()(),ne(4,"div",4),He("cdkDropListDropped",function(i){let a=Ze(t).$implicit,o=_e(2);return Je(o.drop(i,a.id))}),Ut(5,j2,6,1,"mat-list-item",5,kv),ue(),ht(7,"mat-divider"),ue()}if(r&2){let t=e.$implicit,n=_e(2);ye(3),or(t.name),ye(2),Kt(n.projectAnalysisGroupMap[t.id])}}function z2(r,e){if(r&1){let t=St();ne(0,"mat-list")(1,"div",4),He("cdkDropListDropped",function(i){Ze(t);let a=_e();return Je(a.dropProject(i))}),Ut(2,V2,8,1,"div",5,kv),ue()()}if(r&2){let t=_e();ye(2),Kt(t.projects)}}var Dv=(()=>{class r{set projects(t){this._projects=t.slice()}get projects(){return this._projects}set projectAnalysisGroupMap(t){this._projectAnalysisGroupMap=t}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}constructor(t){this.dialogRef=t,this._projectAnalysisGroupMap={},this._projects=[]}save(){this.dialogRef.close({projects:this.projects,projectAnalysisGroupMap:this.projectAnalysisGroupMap})}cancel(){this.dialogRef.close()}drop(t,n){na(this.projectAnalysisGroupMap[n],t.previousIndex,t.currentIndex)}dropProject(t){na(this.projects,t.previousIndex,t.currentIndex)}static{this.\u0275fac=function(n){return new(n||r)(st(qr))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-project-analysis-group-reorder-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap"},decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["mat-subheader","","cdkDragHandle",""],["cdkDragHandle","","matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(n,i){n&1&&(ne(0,"h1",0),ke(1,"Analysis Group Reorder"),ue(),ne(2,"div",1),ct(3,z2,4,0,"mat-list"),ue(),ne(4,"div",2)(5,"button",3),He("click",function(){return i.cancel()}),ke(6,"Close"),ue(),ne(7,"button",3),He("click",function(){return i.save()}),ke(8,"Save"),ue()()),n&2&&(ye(3),Ct(i.projects.length>0?3:-1))},dependencies:[Gr,Hr,Lf,Nf,Ff,xs,sn,Of,Qs,Mi,Di,Wr,yr],encapsulation:2})}}return r})();var q2=["hueSlider"],G2=["alphaSlider"];function H2(r,e){if(r&1){let t=St();ne(0,"div",10),He("newValue",function(i){Ze(t);let a=_e();return Je(a.onSliderChange("saturation-lightness",i))}),ne(1,"div",11),ht(2,"div"),ue()()}if(r&2){let t=_e();_i("background-color",t.hueSliderColor),Xe("rgX",1)("rgY",1),ye(),_i("top",t.slider==null?null:t.slider.v,"px")("left",t.slider==null?null:t.slider.s,"px")}}function W2(r,e){if(r&1&&(ne(0,"div",12),ht(1,"div",13)(2,"div",14),ue()),r&2){let t=_e();ye(2),_i("background-color",t.selectedColor)}}function $2(r,e){if(r&1){let t=St();ne(0,"div",15,1),He("newValue",function(i){Ze(t);let a=_e();return Je(a.onSliderChange("hue",i))}),ne(2,"div",16)(3,"div"),ht(4,"div"),ue()()()}if(r&2){let t=_e();Xe("rgX",1),ye(2),_i("left",t.slider==null?null:t.slider.h,"px")}}function U2(r,e){if(r&1){let t=St();ne(0,"div",17,2),He("newValue",function(i){Ze(t);let a=_e();return Je(a.onSliderChange("alpha",i))}),ht(2,"div",18),ne(3,"div",16)(4,"div"),ht(5,"div"),ue()()()}if(r&2){let t=_e();Xe("rgX",1),ye(2),Xe("ngStyle",t.getBackgroundColor(t.alphaSliderColor)),ye(),_i("left",t.slider==null?null:t.slider.a,"px")}}var K2=["dialog"],Av=r=>({background:r});function X2(r,e){r&1&&ht(0,"div",12)}function Y2(r,e){if(r&1){let t=St();Dr(0),ne(1,"div",9)(2,"div",10),He("click",function(){let i=Ze(t).$implicit,a=_e(2);return Je(a.onColorClick(i))}),ct(3,X2,1,0,"div",11),ue()(),Mr()}if(r&2){let t=e.$implicit,n=e.index,i=_e(2);ye(2),ps("colornull",!t),Xe("ngStyle",i.getBackgroundColor(t)),ye(),Xe("ngIf",n==i.indexSeleccionado)}}function Q2(r,e){if(r&1&&ht(0,"div",18),r&2){let t=_e(3);Xe("ngStyle",t.getBackgroundColor(t.color))}}function Z2(r,e){if(r&1){let t=St();ne(0,"div",13),He("click",function(){Ze(t);let i=_e(2);return Je(i.addColor())}),ct(1,Q2,1,1,"div",14),ds(),ne(2,"svg",15),ht(3,"path",16)(4,"path",17),ue()()}if(r&2){let t=_e(2);ye(),Xe("ngIf",t.indexSeleccionado===void 0)}}function J2(r,e){if(r&1){let t=St();ne(0,"color-picker",19),He("colorChange",function(i){Ze(t);let a=_e(2);return Je(a.onChangeColorPicker(i))})("onAlphaChange",function(i){Ze(t);let a=_e(2);return Je(a.onAlphaChange(i))}),ue()}if(r&2){let t=_e(2);Xe("controls",t.colorPickerControls)("color",t.hsva)}}function e_(r,e){if(r&1&&(Dr(0),ne(1,"div",5),ct(2,Y2,4,4,"ng-container",6)(3,Z2,5,1,"div",7)(4,J2,1,2,"color-picker",8),ue(),Mr()),r&2){let t=_e();ye(),Xe("@colorsAnimation",t.colorsAnimationEffect),ye(),Xe("ngForOf",t.palette),ye(),Xe("ngIf",!t.hideColorPicker&&t.colorPickerControls!="only-alpha"),ye(),Xe("ngIf",!t.hideColorPicker&&t.colorPickerControls=="only-alpha")}}function t_(r,e){r&1&&ht(0,"div",12)}function r_(r,e){if(r&1){let t=St();Dr(0),ne(1,"div",9)(2,"div",25),He("click",function(){let i=Ze(t).$implicit,a=_e(2);return Je(a.changeColor(i))}),ct(3,t_,1,0,"div",11),ue()(),Mr()}if(r&2){let t=e.$implicit,n=_e(2);ye(2),ps("colornull",!t),Xe("ngStyle",po(4,Av,t)),ye(),Xe("ngIf",n.isSelected(t))}}function n_(r,e){if(r&1){let t=St();Dr(0),ne(1,"div",5)(2,"div",20)(3,"div",21),He("click",function(){Ze(t);let i=_e();return Je(i.onClickBack())}),ds(),ne(4,"svg",22),ht(5,"path",23)(6,"path",24),ue()()(),ct(7,r_,4,6,"ng-container",6),ue(),Mr()}if(r&2){let t=_e();ye(),Xe("@colorsAnimation",t.colorsAnimationEffect),ye(6),Xe("ngForOf",t.variants)}}function i_(r,e){if(r&1){let t=St();Dr(0),ne(1,"div",26)(2,"div",27),He("click",function(){Ze(t);let i=_e();return Je(i.onClickBack())}),ds(),ne(3,"svg",22),ht(4,"path",23)(5,"path",24),ue()(),cf(),ne(6,"button",28),He("click",function(){Ze(t);let i=_e();return Je(i.emitClose("cancel"))}),ke(7),ue(),ne(8,"button",28),He("click",function(){Ze(t);let i=_e();return Je(i.emitClose("accept"))}),ke(9),ue()(),ne(10,"div",29)(11,"color-picker",30),He("sliderChange",function(i){Ze(t);let a=_e();return Je(a.onChangeColorPicker(i))}),ue()(),Mr()}if(r&2){let t=_e();ye(7),zt(" ",t.cancelLabel," "),ye(2),zt(" ",t.acceptLabel," "),ye(2),Xe("controls",t.colorPickerControls)("color",t.hsva)}}function a_(r,e){if(r&1){let t=St();ne(0,"div",31)(1,"p",32),He("click",function(){Ze(t);let i=_e();return Je(i.nextFormat())}),ke(2),ue(),ne(3,"div",33)(4,"input",34,1),He("keyup",function(){Ze(t);let i=Bn(5),a=_e();return Je(a.changeColorManual(i.value))})("keydown.enter",function(){Ze(t);let i=_e();return Je(i.emitClose("accept"))}),ue()()()}if(r&2){let t=_e();ye(2),or(t.colorFormats[t.format]),ye(2),_i("font-size",t.color&&t.color.length>23?9:10,"px")("letter-spacing",t.color&&t.color.length>16?0:1.5,"px"),Xe("placeholder",t.placeholder)("value",t.color)}}var zc=["hex","rgba","hsla","cmyk"],vn=function(r){return r[r.HEX=0]="HEX",r[r.RGBA=1]="RGBA",r[r.HSLA=2]="HSLA",r[r.CMYK=3]="CMYK",r}(vn||{}),Mv=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],ai=class{constructor(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i}denormalize(){return this.r=Math.round(this.r*255),this.g=Math.round(this.g*255),this.b=Math.round(this.b*255),this}toString(){return this.denormalize(),"rgb"+(this.a!=1?"a(":"(")+this.r+", "+this.g+", "+this.b+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},Vn=class{constructor(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i,this.onChange=new lr(!0)}onColorChange(e){this.s=e.s/e.rgX,this.v=e.v/e.rgY}onHueChange(e){this.h=e.v/e.rgX}onValueChange(e){this.v=e.v/e.rgX}onAlphaChange(e){this.a=e.v/e.rgX}},ba=class{constructor(e,t,n,i){this.h=e,this.s=t,this.l=n,this.a=i}denormalize(){return this.h=Math.round(this.h*360),this.s=Math.round(this.s*100),this.l=Math.round(this.l*100),this}toString(){return"hsl"+(this.a!=1?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},$i=class{constructor(e,t,n,i,a=1){this.c=e,this.m=t,this.y=n,this.k=i,this.a=a}denormalize(){return this.c=Math.round(this.c*100),this.m=Math.round(this.m*100),this.y=Math.round(this.y*100),this.k=Math.round(this.k*100),this}toString(){return this.denormalize(),"cmyk("+this.c+", "+this.m+", "+this.y+", "+this.k+")"}},qc=class{constructor(e){e&&(this.preview=e.preview,this.variants=e.variants)}},ou=(()=>{class r{constructor(){}toFormat(t,n){var i="";if(t)switch(n){case vn.HEX:var o=this.hsvaToRgba(t);o.denormalize();var i=this.rgbaToHex(o,!0);break;case vn.HSLA:var a=this.hsva2hsla(t);a.denormalize();var i=a.toString();break;case vn.RGBA:var o=this.hsvaToRgba(t),i=o.toString();break;case vn.CMYK:var s=this.hsvaToCmyk(t),i=s.toString();break}return i}stringToFormat(t,n){var i=this.stringToHsva(t,!0);return this.toFormat(i,n)}hsva2hsla(t){let n=t.h,i=t.s,a=t.v,o=t.a;if(a===0)return new ba(n,0,0,o);if(i===0&&a===1)return new ba(n,1,1,o);{let s=a*(2-i)/2;return new ba(n,a*i/(1-Math.abs(2*s-1)),s,o)}}hsla2hsva(t){let n=Math.min(t.h,1),i=Math.min(t.s,1),a=Math.min(t.l,1),o=Math.min(t.a,1);if(a===0)return new Vn(n,0,0,o);{let s=a+i*(1-Math.abs(2*a-1))/2;return new Vn(n,2*(s-a)/s,s,o)}}hsvaToRgba(t){let n,i,a,o=t.h,s=t.s,l=t.v,u=t.a,c=Math.floor(o*6),d=o*6-c,h=l*(1-s),m=l*(1-d*s),g=l*(1-(1-d)*s);switch(c%6){case 0:n=l,i=g,a=h;break;case 1:n=m,i=l,a=h;break;case 2:n=h,i=l,a=g;break;case 3:n=h,i=m,a=l;break;case 4:n=g,i=h,a=l;break;case 5:n=l,i=h,a=m;break;default:n=0,i=0,a=0}return new ai(n,i,a,u)}cmykToRgb(t){let n=(1-t.c)*(1-t.k),i=(1-t.m)*(1-t.k),a=(1-t.y)*(1-t.k);return new ai(n,i,a,t.a)}rgbaToCmyk(t){let n=1-Math.max(t.r,t.g,t.b);if(n===1)return new $i(0,0,0,1,t.a);{let i=(1-t.r-n)/(1-n),a=(1-t.g-n)/(1-n),o=(1-t.b-n)/(1-n);return new $i(i,a,o,n,t.a)}}hsvaToCmyk(t){let n=this.hsvaToRgba(t);return this.rgbaToCmyk(n)}rgbaToHsva(t){let n,i,a=Math.min(t.r,1),o=Math.min(t.g,1),s=Math.min(t.b,1),l=Math.min(t.a,1),u=Math.max(a,o,s),c=Math.min(a,o,s),d=u,h=u-c;if(i=u===0?0:h/u,u===c)n=0;else{switch(u){case a:n=(o-s)/h+(o<s?6:0);break;case o:n=(s-a)/h+2;break;case s:n=(a-o)/h+4;break;default:n=0}n/=6}return new Vn(n,i,d,l)}rgbaToHex(t,n){let i="#"+(16777216|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return t.a!=1&&(i+=(256|Math.round(t.a*255)).toString(16).substr(1)),i}normalizeCMYK(t){return new $i(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new $i(Math.floor(t.c*100),Math.floor(t.m*100),Math.floor(t.y*100),Math.floor(t.k*100),t.a)}denormalizeRGBA(t){return new ai(Math.round(t.r*255),Math.round(t.g*255),Math.round(t.b*255),t.a)}stringToHsva(t="",n=!0){let i=null;t=(t||"").toLowerCase();let a=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(o){return new ai(parseInt(o[2],10)/255,parseInt(o[3],10)/255,parseInt(o[4],10)/255,isNaN(parseFloat(o[5]))?1:parseFloat(o[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(o){return new ba(parseInt(o[2],10)/360,parseInt(o[3],10)/100,parseInt(o[4],10)/100,isNaN(parseFloat(o[5]))?1:parseFloat(o[5]))}},{re:/cmyk?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(o){return new $i(parseInt(o[1],10)/100,parseInt(o[2],10)/100,parseInt(o[3],10)/100,parseInt(o[4],10)/100)}}];n?a.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(o){return new ai(parseInt(o[1],16)/255,parseInt(o[2],16)/255,parseInt(o[3],16)/255,parseInt(o[4]||"FF",16)/255)}}):a.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(o){return new ai(parseInt(o[1],16)/255,parseInt(o[2],16)/255,parseInt(o[3],16)/255,1)}}),a.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(o){return new ai(parseInt(o[1]+o[1],16)/255,parseInt(o[2]+o[2],16)/255,parseInt(o[3]+o[3],16)/255,1)}});for(let o in a)if(a.hasOwnProperty(o)){let s=a[o],l=s.re.exec(t),u=l&&s.parse(l);if(u){if(u instanceof ai)i=this.rgbaToHsva(u);else if(u instanceof ba)i=this.hsla2hsva(u);else if(u instanceof $i){let c=this.cmykToRgb(u);i=this.rgbaToHsva(c)}return i}}return i}outputFormat(t){return this.hsvaToRgba(t).toString()}getFormatByString(t){if(t){t=t.toLowerCase();let n=/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/,i=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,a=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/,o=/(cmyk\(\d{1,3}(,\s?\d{1,3}){3}\))/;if(n.test(t))return"hex";if(i.test(t))return"rgba";if(a.test(t))return"hsla";if(o.test(t))return"cmyk"}return"hex"}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=xu({token:r,factory:r.\u0275fac}),r})(),au=class{constructor(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i}},Gc=class{constructor(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i}},o_=(()=>{class r{mouseDown(t){this.start(t)}touchStart(t){this.start(t)}constructor(t){this.elRef=t,this.dragEnd=new lr,this.dragStart=new lr,this.newValue=new lr,this.listenerMove=n=>this.move(n),this.listenerStop=()=>this.stop()}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){let n=this.elRef.nativeElement.getBoundingClientRect();return(t.pageX!==void 0?t.pageX:t.touches[0].pageX)-n.left-window.pageXOffset}getY(t){let n=this.elRef.nativeElement.getBoundingClientRect();return(t.pageY!==void 0?t.pageY:t.touches[0].pageY)-n.top-window.pageYOffset}setCursor(t){let n=this.elRef.nativeElement.offsetWidth,i=this.elRef.nativeElement.offsetHeight,a=Math.max(0,Math.min(this.getX(t),n)),o=Math.max(0,Math.min(this.getY(t),i));this.rgX!==void 0&&this.rgY!==void 0?this.newValue.emit({s:a/n,v:1-o/i,rgX:this.rgX,rgY:this.rgY}):this.rgX===void 0&&this.rgY!==void 0?this.newValue.emit({v:o/i,rgY:this.rgY}):this.rgX!==void 0&&this.rgY===void 0&&this.newValue.emit({v:a/n,rgX:this.rgX})}}return r.\u0275fac=function(t){return new(t||r)(st(_u))},r.\u0275dir=Tu({type:r,selectors:[["","slider",""]],hostBindings:function(t,n){t&1&&He("mousedown",function(a){return n.mouseDown(a)})("touchstart",function(a){return n.touchStart(a)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"},standalone:!1}),r})(),s_=(()=>{class r{constructor(t,n){this.service=t,this.cdr=n,this.color=new Vn(0,1,1,1),this.controls="default",this.sliderChange=new lr(!1),this.onAlphaChange=new lr(!1),this.hsva=new Vn(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new Vn(0,1,1,1)),this.slider=new au(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(t){t.color&&this.color&&this.update()}ngAfterViewInit(){let t=this.hueSlider?.nativeElement.offsetWidth||140,n=this.alphaSlider?.nativeElement.offsetWidth||140;this.sliderDimMax=new Gc(t,220,130,n),this.update()}onSliderChange(t,n){switch(t){case"saturation-lightness":this.hsva.onColorChange(n);break;case"hue":this.hsva.onHueChange(n);break;case"alpha":this.hsva.onAlphaChange(n),this.onAlphaChange.emit(n);break;case"value":this.hsva.onValueChange(n);break}this.update(),this.setColor(this.outputColor)}setColor(t){this.color=t,this.sliderChange.emit(this.color)}getBackgroundColor(t){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+t+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let t=this.service.hsvaToRgba(this.hsva).denormalize(),n=this.service.hsvaToRgba(new Vn(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+n.r+","+n.g+","+n.b+")",this.alphaSliderColor="rgb("+t.r+","+t.g+","+t.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new au(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return r.\u0275fac=function(t){return new(t||r)(st(ou),st(ys))},r.\u0275cmp=It({type:r,selectors:[["color-picker"]],viewQuery:function(t,n){if(t&1&&(_a(q2,5),_a(G2,5)),t&2){let i;Sa(i=Ta())&&(n.hueSlider=i.first),Sa(i=Ta())&&(n.alphaSlider=i.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},standalone:!1,features:[uf],decls:8,vars:4,consts:[["dialogPopup",""],["hueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"newValue","slider","rgX","rgY"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"newValue","slider","rgX"],[1,"sliderCursor"],[1,"alpha",3,"newValue","slider","rgX"],[1,"alpha-gradient",3,"ngStyle"]],template:function(t,n){if(t&1){let i=St();ne(0,"div",3,0),He("click",function(o){return Ze(i),Je(o.stopPropagation())}),ct(2,H2,3,8,"div",4),ne(3,"div",5),ct(4,W2,3,2,"div",6),ne(5,"div",7),ct(6,$2,5,3,"div",8)(7,U2,6,4,"div",9),ue()()()}t&2&&(ye(2),Xe("ngIf",n.controls!="only-alpha"),ye(2),Xe("ngIf",n.controls!="only-alpha"),ye(2),Xe("ngIf",n.controls!="only-alpha"),ye(),Xe("ngIf",n.controls!="no-alpha"))},dependencies:[ku,bs,o_],styles:[`.color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}
`],encapsulation:2}),r})(),l_=(()=>{class r{click(t){this.isOutside(t)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(t,n){this.service=t,this.cdr=n,this.color="#000000",this.previewColor="#000000",this.hsva=new Vn(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=Mv,this.variants=[],this.userFormats=[],this.colorFormats=zc,this.format=vn.HEX,this.formatMap={hex:vn.HEX,rgba:vn.RGBA,hsla:vn.HSLA,cmyk:vn.CMYK},this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default",this.placeholder="#FFFFFF"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(t){let n;if(this.color)for(let i=0;i<t.length;i++){let a=t[i];typeof a=="string"?this.service.stringToFormat(this.color,vn.HEX)==this.service.stringToFormat(a,vn.HEX)&&(n=i):a===void 0?this.color=void 0:this.findIndexSelectedColor(a.variants)!=null&&(n=i)}return n}iniciate(t,n,i,a,o,s,l,u,c,d,h,m,g=[]){if(this.colorPickerControls=h,this.triggerInstance=t,this.TriggerBBox=n,this.color=i,this.hideColorPicker=u,this.hideTextInput=l,this.acceptLabel=c,this.cancelLabel=d,g.length&&g.every(y=>zc.includes(y))&&(this.colorFormats=g),s?this.colorFormats.includes(s)?(this.format=this.colorFormats.indexOf(s.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=s.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=vn.HEX):(this.format=this.colorFormats.indexOf(this.service.getFormatByString(this.color)),this.format<0&&(this.format=0)),this.previewColor=this.color,this.palette=a??Mv,this.colorsAnimationEffect=o,m=="top"){let C=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+C.height+"px ))"}}setPosition(){if(this.TriggerBBox){let n=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=n.top+n.height,n.left+250>window.innerWidth?this.left=n.right<250?window.innerWidth/2-250/2:n.right-250:this.left=n.left}}setPositionY(){let t=this.TriggerBBox.nativeElement.getBoundingClientRect(),n=this.panelRef.nativeElement.getBoundingClientRect(),i=n.height;t.bottom+i>window.innerHeight?this.positionString=t.top<n.height?"transform: translateY(-"+t.bottom+"px );":"transform: translateY(calc( -100% - "+t.height+"px ));":this.positionString="",this.cdr.detectChanges()}hasVariant(t){return this.previewColor?typeof t!="string"&&t.variants.some(n=>n.toUpperCase()==this.previewColor.toUpperCase()):!1}isSelected(t){return this.previewColor?typeof t=="string"&&t.toUpperCase()==this.previewColor.toUpperCase():!1}getBackgroundColor(t){return typeof t=="string"?{background:t}:{background:t?.preview}}onAlphaChange(t){this.palette=this.ChangeAlphaOnPalette(t,this.palette)}ChangeAlphaOnPalette(t,n){var i=[];for(let a=0;a<n.length;a++){let o=n[a];if(typeof o=="string"){let s=this.service.stringToHsva(o);s.onAlphaChange(t),i.push(this.service.toFormat(s,this.format))}else{let s=new qc,l=this.service.stringToHsva(o.preview);l.onAlphaChange(t),s.preview=this.service.toFormat(l,this.format),s.variants=this.ChangeAlphaOnPalette(t,o.variants),i.push(s)}}return i}changeColor(t){this.setColor(this.service.stringToHsva(t)),this.emitClose("accept")}onChangeColorPicker(t){this.temporalColor=t,this.color=this.service.toFormat(t,this.format),this.triggerInstance.sliderChange(this.service.toFormat(t,this.format))}changeColorManual(t){this.previewColor=t,this.color=t,this.hsva=this.service.stringToHsva(t),this.setPreviewColor(this.hsva),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color,this.previewColor)}setColor(t,n=-1){this.hsva=t;let i=this.colorFormats[this.format],a=n;a<0&&(a=this.formatMap[i]),this.color=this.service.toFormat(t,a),this.setPreviewColor(t),this.triggerInstance.setColor(this.color,this.previewColor)}setPreviewColor(t){this.previewColor=t?this.service.hsvaToRgba(t).toString():void 0}onChange(){}onColorClick(t){typeof t=="string"||t===void 0?this.changeColor(t):(this.variants=t.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){if(this.canChangeFormat){this.format=(this.format+1)%this.colorFormats.length;let t=this.colorFormats[this.format],n=this.formatMap[t];this.setColor(this.hsva,n),this.placeholder=this.service.toFormat(new Vn(0,0,1,1),n)}}emitClose(t){this.menu==3&&(t=="cancel"||t=="accept"&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){this.menu==3&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(t){return t.target.classList.contains("ngx-colors-overlay")}}return r.\u0275fac=function(t){return new(t||r)(st(ou),st(ys))},r.\u0275cmp=It({type:r,selectors:[["ngx-colors-panel"]],viewQuery:function(t,n){if(t&1&&_a(K2,5),t&2){let i;Sa(i=Ta())&&(n.panelRef=i.first)}},hostVars:4,hostBindings:function(t,n){t&1&&He("mousedown",function(a){return n.click(a)},!1,Su)("scroll",function(){return n.onScroll()},!1,Su)("resize",function(){return n.onResize()},!1,hf),t&2&&_i("top",n.top,"px")("left",n.left,"px")},standalone:!1,decls:6,vars:6,consts:[["dialog",""],["paintInput",""],[1,"opened"],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"click","ngStyle"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style",`
            position: absolute;
            height: 7px;
            width: 7px;
            border: 1px solid rgba(0, 0, 0, 0.03);
            border-radius: 100%;
            top: 0;
            right: 0;
          `,3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"colorChange","onAlphaChange","controls","color"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"click","ngStyle"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"sliderChange","controls","color"],[1,"manual-input-wrapper"],[2,"cursor","pointer",3,"click"],[1,"g-input"],["type","text",3,"keyup","keydown.enter","placeholder","value"]],template:function(t,n){t&1&&(ne(0,"div",2,0),ct(2,e_,5,4,"ng-container",3)(3,n_,8,2,"ng-container",3)(4,i_,12,4,"ng-container",3)(5,a_,6,7,"div",4),ue()),t&2&&(mf(n.positionString),ye(2),Xe("ngIf",n.menu==1),ye(),Xe("ngIf",n.menu==2),ye(),Xe("ngIf",n.menu==3),ye(),Xe("ngIf",!n.hideTextInput))},dependencies:[xf,ku,bs,s_],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[Pf("colorsAnimation",[Pu("void => slide-in",[vo(":enter",fi({opacity:0}),{optional:!0}),vo(":enter",Au("10ms",[Du(".3s ease-in",Mu([fi({opacity:0,transform:"translatex(-50%)",offset:0}),fi({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),fi({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),Pu("void => popup",[vo(":enter",fi({opacity:0,transform:"scale(0)"}),{optional:!0}),vo(":enter",Au("10ms",[Du("500ms ease-out",Mu([fi({opacity:.5,transform:"scale(.5)",offset:.3}),fi({opacity:1,transform:"scale(1.1)",offset:.8}),fi({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),r})(),Pv={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0},Iv=(()=>{class r{constructor(t,n,i){this.resolver=t,this.applicationRef=n,this.injector=i}createPanel(t,n){this.componentRef!=null&&this.removePanel();let i=this.resolver.resolveComponentFactory(l_);this.componentRef=i.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);let a=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(n),Object.keys(Pv).forEach(o=>{this.overlay.style[o]=Pv[o]}),t?document.getElementById(t).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(a),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return r.\u0275fac=function(t){return new(t||r)(fs(pf),fs(vf),fs(ff))},r.\u0275prov=xu({token:r,factory:r.\u0275fac}),r})(),Hc=(()=>{class r{onClick(){this.openPanel()}constructor(t,n,i){this.triggerRef=t,this.panelFactory=n,this.service=i,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new lr,this.input=new lr,this.slider=new lr,this.close=new lr,this.open=new lr,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}ngOnDestroy(){this.panelRef&&this.panelFactory.removePanel()}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position,this.formats)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}setDisabledState(t){this.isDisabled=t,this.triggerRef.nativeElement.style.opacity=t?.5:1}setColor(t,n=""){this.writeValue(t,n),this.onChangeCallback(t),this.input.emit(t)}sliderChange(t){this.slider.emit(t)}get value(){return this.color}set value(t){this.setColor(t),this.onChangeCallback(t)}writeValue(t,n=""){if(t!==this.color){if(this.format){let a=zc.indexOf(this.format.toLowerCase());t=this.service.stringToFormat(t,a)}this.color=t;let i=!1;t&&t.startsWith("cmyk")&&(i=!0,n||(n=this.service.stringToFormat(t,vn.RGBA))),this.change.emit(i?n:t)}}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}}return r.\u0275fac=function(t){return new(t||r)(st(_u),st(Iv),st(ou))},r.\u0275dir=Tu({type:r,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(t,n){t&1&&He("click",function(){return n.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",formats:"formats",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},standalone:!1,features:[Cf([{provide:Af,useExisting:lf(()=>r),multi:!0}])]}),r})(),Bv=(()=>{class r{constructor(t,n){this.cdRef=t,this.triggerDirective=n,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(t=>{this.color=t,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(st(ys),st(Hc,1))},r.\u0275cmp=It({type:r,selectors:[["ngx-colors"]],standalone:!1,decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(t,n){t&1&&(ne(0,"div",0)(1,"div",1)(2,"div",2),ht(3,"div",3),ue()()()),t&2&&(ye(3),ps("colornull",!n.color),Xe("ngStyle",po(3,Av,n.color)))},dependencies:[bs],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),r})(),Rv=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=hs({type:r}),r.\u0275inj=cs({providers:[ou,Iv],imports:[ws]}),r})();var c_=(r,e)=>e.id;function f_(r,e){if(r&1){let t=St();ne(0,"div",4)(1,"ngx-colors",5),on("ngModelChange",function(i){let a=Ze(t).$implicit,o=_e(2).$implicit,s=_e();return an(s.projectConditionColorMap[o.id][a],i)||(s.projectConditionColorMap[o.id][a]=i),Je(i)}),ue(),ne(2,"div"),ke(3),ue()()}if(r&2){let t=e.$implicit,n=_e(2).$implicit,i=_e();ye(),nn("ngModel",i.projectConditionColorMap[n.id][t]),ye(2),or(t)}}function d_(r,e){if(r&1&&Ut(0,f_,4,2,"div",4,ci),r&2){let t=_e().$implicit,n=_e();Kt(n.projectConditionMap[t.id])}}function h_(r,e){if(r&1&&(ne(0,"div")(1,"div")(2,"b"),ke(3),ue()(),ct(4,d_,2,0),ue()),r&2){let t=e.$implicit,n=_e();ye(3),or(t.name),ye(),Ct(n.projectConditionMap[t.id]?4:-1)}}var Ov=(()=>{class r{set projects(t){this._projects=t;for(let n of t)this.web.getProjectUniqueConditions(n.id).subscribe(i=>{for(let a of i)this.projectConditionMap[a.AnalysisGroup.project]||(this.projectConditionMap[a.AnalysisGroup.project]=[]),this.projectConditionMap[a.AnalysisGroup.project].includes(a.Condition)||this.projectConditionMap[a.AnalysisGroup.project].push(a.Condition),this.projectConditionColorMap[a.AnalysisGroup.project]||(this.projectConditionColorMap[a.AnalysisGroup.project]={}),this.projectConditionColorMap[a.AnalysisGroup.project][a.Condition]||(this.projectConditionColorMap[a.AnalysisGroup.project][a.Condition]="")})}get projects(){return this._projects}set projectConditionColorMap(t){if(t==null){this._projectConditionColorMap={};return}this._projectConditionColorMap=Object.assign({},t)}get projectConditionColorMap(){return this._projectConditionColorMap}constructor(t,n){this.dialogRef=t,this.web=n,this._projects=[],this.projectConditionMap={},this._projectConditionColorMap={}}save(){this.dialogRef.close(this.projectConditionColorMap)}cancel(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||r)(st(qr),st(dn))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-condition-color-editor-dialog"]],inputs:{projects:"projects",projectConditionColorMap:"projectConditionColorMap"},decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],[2,"display","flex","gap","5px","align-items","center"],["ngx-colors-trigger","",3,"ngModelChange","ngModel"]],template:function(n,i){n&1&&(ne(0,"h1",0),ke(1,"Condition Color Editor"),ue(),ne(2,"div",1),Ut(3,h_,5,2,"div",null,c_),ue(),ne(5,"div",2)(6,"button",3),He("click",function(){return i.cancel()}),ke(7,"Close"),ue(),ne(8,"button",3),He("click",function(){return i.save()}),ke(9,"Save"),ue()()),n&2&&(ye(3),Kt(i.projects))},dependencies:[Gr,Hr,Rv,Bv,Hc,Ei,Pr,Ti,yr,Wr],encapsulation:2})}}return r})();function p_(r,e){if(r&1&&(ne(0,"mat-option",6),ke(1),ue()),r&2){let t=e.$implicit;Xe("value",t),ye(),or(t)}}var Lv=(()=>{class r{_filter(t){let n=t.toLowerCase();return this.tags.filter(i=>i.toLowerCase().includes(n))}constructor(t,n,i){this.fb=t,this.dialogRef=n,this.collateService=i,this.form=this.fb.group({name:["",Rn.required],existing:[!1],id:[-1]}),this.tags=[]}ngOnInit(){this.filteredTags=this.form.controls.name.valueChanges.pipe(ls(""),us(t=>this.collateService.getCollateTags(t).pipe(ss(n=>n.results.map(i=>i.name)))))}submit(){let t=this.form.controls.name.value;this.collateService.getCollateTags(t).subscribe(n=>{let i=n.results.find(o=>o.name.toLowerCase()===t.toLowerCase()),a=!!i;this.form.controls.existing.setValue(a),this.form.controls.id.setValue(a?i.id:null),this.dialogRef.close(this.form.value)})}cancel(){this.dialogRef.close()}onTagSelected(t){let n=t.option.value;this.form.controls.name.setValue(n),this.collateService.getCollateTags(n).subscribe(i=>{let a=i.results.find(o=>o.name.toLowerCase()===n.toLowerCase());this.form.controls.existing.setValue(!!a),this.form.controls.id.setValue(a?a.id:null)})}static{this.\u0275fac=function(n){return new(n||r)(st(un),st(qr),st(ki))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-tag-create-dialog"]],decls:18,vars:5,consts:[["auto","matAutocomplete"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["type","text","matInput","","formControlName","name",3,"matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"click","disabled"]],template:function(n,i){if(n&1){let a=St();ne(0,"h1",1),ke(1,"Create/Add Tag"),ue(),ne(2,"div",2)(3,"form",3)(4,"mat-form-field")(5,"mat-label"),ke(6,"Tag Name"),ue(),ht(7,"input",4),ne(8,"mat-autocomplete",5,0),He("optionSelected",function(s){return Ze(a),Je(i.onTagSelected(s))}),Ut(10,p_,2,2,"mat-option",6,ci),gs(12,"async"),ue()()()(),ne(13,"div",7)(14,"button",8),He("click",function(){return Ze(a),Je(i.cancel())}),ke(15,"Cancel"),ue(),ne(16,"button",9),He("click",function(){return Ze(a),Je(i.submit())}),ke(17,"Submit"),ue()()}if(n&2){let a=Bn(9);ye(3),Xe("formGroup",i.form),ye(4),Xe("matAutocomplete",a),ye(3),Kt(ms(12,3,i.filteredTags)),ye(6),Xe("disabled",i.form.invalid)}},dependencies:[Gr,Hr,Tn,Sn,ln,Pr,_n,$n,Un,Kn,fn,cn,yr,Wr,ka,Cs,Ps,As],encapsulation:2})}}return r})();var v_=(r,e)=>e.id;function g_(r,e){r&1&&(ne(0,"th",11),ke(1," Original Title "),ue())}function m_(r,e){if(r&1&&(ne(0,"td",12),ke(1),ue()),r&2){let t=e.$implicit;ye(),zt(" ",t," ")}}function y_(r,e){r&1&&(ne(0,"th",11),ke(1," Display Title "),ue())}function b_(r,e){if(r&1&&(ne(0,"td",12)(1,"form",13)(2,"mat-form-field"),ht(3,"input",14),ue()()()),r&2){let t=e.$implicit,n=_e(2).$implicit,i=_e();ye(),Xe("formGroup",i.formMap[n.id][t]),ye(2),yf("formControlName",t)}}function C_(r,e){r&1&&ht(0,"tr",15)}function w_(r,e){r&1&&ht(0,"tr",16)}function x_(r,e){if(r&1&&(ne(0,"h5"),ke(1),ue(),ne(2,"table",4),Dr(3,5),ct(4,g_,2,0,"th",6)(5,m_,2,1,"td",7),Mr(),Dr(6,8),ct(7,y_,2,0,"th",6)(8,b_,4,2,"td",7),Mr(),ct(9,C_,1,0,"tr",9)(10,w_,1,0,"tr",10),ue()),r&2){let t=_e().$implicit,n=_e();ye(),or(t.name),ye(),Xe("dataSource",n.projectConditionMap[t.id]),ye(7),Xe("matHeaderRowDef",n.displayedColumns),ye(),Xe("matRowDefColumns",n.displayedColumns)}}function __(r,e){if(r&1&&ct(0,x_,11,4),r&2){let t=e.$implicit,n=_e();Ct(n.formMap[t.id]?0:-1)}}var Fv=(()=>{class r{set projects(t){this._projects=t.slice()}get projects(){return this._projects}set renameSampleCondition(t){for(let n of this.projects)this.web.getProjectUniqueConditions(n.id).subscribe(i=>{for(let a of i){if(this.formMap[a.AnalysisGroup.project]||(this.formMap[a.AnalysisGroup.project]={}),!this.formMap[a.AnalysisGroup.project][a.Condition]){let o={};o[a.Condition]=new On(a.Condition,Rn.required),this.formMap[a.AnalysisGroup.project][a.Condition]=this.fb.group(o)}this.projectConditionMap[a.AnalysisGroup.project]||(this.projectConditionMap[a.AnalysisGroup.project]=[]),this.projectConditionMap[a.AnalysisGroup.project].includes(a.Condition)||this.projectConditionMap[a.AnalysisGroup.project].push(a.Condition),this.renameSampleCondition[a.AnalysisGroup.project]||(this.renameSampleCondition[a.AnalysisGroup.project]={}),this.renameSampleCondition[a.AnalysisGroup.project][a.Condition]||(this.renameSampleCondition[a.AnalysisGroup.project][a.Condition]=a.Condition),t[a.AnalysisGroup.project]&&t[a.AnalysisGroup.project][a.Condition]&&(this.renameSampleCondition[a.AnalysisGroup.project][a.Condition]=t[a.AnalysisGroup.project][a.Condition],this.formMap[a.AnalysisGroup.project][a.Condition].controls[a.Condition].setValue(t[a.AnalysisGroup.project][a.Condition]))}})}get renameSampleCondition(){return this._renameSampleCondition}constructor(t,n,i,a){this.dialog=t,this.web=n,this.fb=i,this.sb=a,this.displayedColumns=["original","display"],this.projectConditionMap={},this._projects=[],this._renameSampleCondition={},this.formMap={}}close(){this.dialog.close()}submit(){let t={};for(let n in this.formMap){t[n]={};for(let i in this.formMap[n])if(t[n][i]=this.formMap[n][i].value[i],!this.formMap[n][i].valid){this.sb.open(`${i} is invalid`);return}}this.dialog.close(t)}static{this.\u0275fac=function(n){return new(n||r)(st(qr),st(dn),st(un),st(Ln))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-rename-sample-condition-dialog"]],inputs:{projects:"projects",renameSampleCondition:"renameSampleCondition"},decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","original"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","display"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"formGroup"],["matInput","",2,"border-radius","0",3,"formControlName"],["mat-header-row",""],["mat-row",""]],template:function(n,i){n&1&&(ne(0,"h1",0),ke(1,"Rename Conditions"),ue(),ne(2,"div",1),Ut(3,__,1,1,null,null,v_),ue(),ne(5,"div",2)(6,"button",3),He("click",function(){return i.submit()}),ke(7,"Submit"),ue(),ne(8,"button",3),He("click",function(){return i.close()}),ke(9,"Close"),ue()()),n&2&&(ye(3),Kt(i.projects))},dependencies:[Gr,Hr,Tn,Sn,ln,Pr,_n,$n,Un,Vs,Ls,Ns,js,Gs,zs,Hs,qs,Os,Fs,Wr,yr,cn,fn],encapsulation:2})}}return r})();var Nv=(()=>{class r{set settings(t){for(let n in t)this._settings[n]=t[n];this._settings&&this.form.patchValue(this._settings)}get settings(){return this._settings}constructor(t,n){this.fb=t,this.dialog=n,this._settings={},this.form=this.fb.group({marginLeft:150,marginRight:100,marginTop:100,marginBottom:100,titleTextSize:14,showTitle:!0,height:500,barSize:50})}submit(){this.dialog.close(this.form.value)}close(){this.dialog.close()}static{this.\u0275fac=function(n){return new(n||r)(st(un),st(qr))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-plot-settings"]],inputs:{settings:"settings"},decls:46,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","20px",3,"formGroup"],[2,"display","flex","flex-direction","column","gap","5px"],["matInput","","formControlName","height","type","number"],["matInput","","formControlName","barSize","type","number"],["matInput","","formControlName","marginLeft","type","number"],["matInput","","formControlName","marginRight","type","number"],["matInput","","formControlName","marginTop","type","number"],["matInput","","formControlName","marginBottom","type","number"],["formControlName","showTitle"],["matInput","","formControlName","titleTextSize","type","number"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(n,i){n&1&&(ne(0,"h5",0),ke(1,"Plot General Settings"),ue(),ne(2,"div",1)(3,"form",2)(4,"section",3)(5,"b"),ke(6,"Overall Size"),ue(),ne(7,"mat-form-field"),ht(8,"input",4),ne(9,"mat-label"),ke(10,"Height"),ue()(),ne(11,"mat-form-field"),ht(12,"input",5),ne(13,"mat-label"),ke(14,"Bar size"),ue()(),ne(15,"mat-form-field"),ht(16,"input",6),ne(17,"mat-label"),ke(18,"Margin Left"),ue()(),ne(19,"mat-form-field"),ht(20,"input",7),ne(21,"mat-label"),ke(22,"Margin Right"),ue()(),ne(23,"mat-form-field"),ht(24,"input",8),ne(25,"mat-label"),ke(26,"Margin Top"),ue()(),ne(27,"mat-form-field"),ht(28,"input",9),ne(29,"mat-label"),ke(30,"Margin Bottom"),ue()()(),ht(31,"mat-divider"),ne(32,"section",3)(33,"b"),ke(34,"Title"),ue(),ne(35,"mat-checkbox",10),ke(36,"Show Title"),ue(),ne(37,"mat-form-field"),ht(38,"input",11),ne(39,"mat-label"),ke(40,"Title Text Size"),ue()()()()(),ne(41,"div",12)(42,"button",13),He("click",function(){return i.close()}),ke(43,"Cancel"),ue(),ne(44,"button",13),He("click",function(){return i.submit()}),ke(45,"Save"),ue()()),n&2&&(ye(3),Xe("formGroup",i.form))},dependencies:[Gr,Hr,Tn,Sn,ln,Bf,Pr,_n,$n,Un,cn,fn,Kn,Aa,Wr,yr,xs],encapsulation:2})}}return r})();function S_(r,e){if(r&1){let t=St();ne(0,"mat-checkbox",12),on("ngModelChange",function(i){Ze(t);let a=_e(2);return an(a.collate.settings.showTags,i)||(a.collate.settings.showTags=i),Je(i)}),ke(1,"Show Tags"),ue()}if(r&2){let t=_e(2);nn("ngModel",t.collate.settings.showTags)}}function T_(r,e){if(r&1){let t=St();ne(0,"h1",15),He("click",function(){Ze(t);let i=_e(3);return Je(i.toggleEditTitle())}),ke(1),ue(),ht(2,"br")}if(r&2){let t=_e(3);ye(),or(t.collate.title)}}function E_(r,e){if(r&1){let t=St();ne(0,"div")(1,"mat-form-field",16)(2,"input",17),He("keydown.enter",function(){Ze(t);let i=_e(3);return Je(i.toggleEditTitle())}),on("ngModelChange",function(i){Ze(t);let a=_e(3);return an(a.collate.title,i)||(a.collate.title=i),Je(i)}),ue()(),ne(3,"button",18),He("click",function(){Ze(t);let i=_e(3);return Je(i.toggleEditTitle())}),ne(4,"mat-icon"),ke(5,"save"),ue()()()}if(r&2){let t=_e(3);ye(2),nn("ngModel",t.collate.title)}}function k_(r,e){if(r&1){let t=St();ne(0,"div",19),He("click",function(){Ze(t);let i=_e(3);return Je(i.toggleEditGreeting())}),ke(1),ue()}if(r&2){let t=_e(3);ye(),or(t.collate.greeting)}}function D_(r,e){if(r&1){let t=St();ne(0,"div")(1,"mat-form-field",20)(2,"input",17),He("keydown.enter",function(){Ze(t);let i=_e(3);return Je(i.toggleEditGreeting())}),on("ngModelChange",function(i){Ze(t);let a=_e(3);return an(a.collate.greeting,i)||(a.collate.greeting=i),Je(i)}),ue()(),ne(3,"button",18),He("click",function(){Ze(t);let i=_e(3);return Je(i.toggleEditGreeting())}),ne(4,"mat-icon"),ke(5,"save"),ue()()()}if(r&2){let t=_e(3);ye(2),nn("ngModel",t.collate.greeting)}}function M_(r,e){if(r&1&&(ne(0,"div",9)(1,"div",13),ct(2,T_,3,1)(3,E_,6,1,"div")(4,k_,2,1,"div",14)(5,D_,6,1,"div"),ue()()),r&2){let t=_e(2);ye(2),Ct(t.editTitle?3:2),ye(2),Ct(t.editGreeting?5:4)}}function P_(r,e){if(r&1){let t=St();ne(0,"div",1)(1,"button",21),He("click",function(){Ze(t);let i=_e(2);return Je(i.openCollateTagCreateDialog())}),ke(2,"Add Tag +"),ue()(),ne(3,"div",22)(4,"app-collate-tags",23),He("collageTagsChange",function(i){Ze(t);let a=_e(2);return Je(a.handleCollageTagsChange(i))}),ue()()}if(r&2){let t=_e(2);ye(4),Xe("collageTags",t.collate.tags)}}function A_(r,e){if(r&1&&ht(0,"mat-tab",25),r&2){let t=e.$implicit;Xe("label",t)}}function I_(r,e){if(r&1){let t=St();ne(0,"div",11)(1,"mat-tab-group",24),He("selectedTabChange",function(){Ze(t);let i=_e(2);return Je(i.filterDataBySearchTerm())}),on("selectedIndexChange",function(i){Ze(t);let a=_e(2);return an(a.selectedIndex,i)||(a.selectedIndex=i),Je(i)}),Ut(2,A_,1,1,"mat-tab",25,ci),ue()()}if(r&2){let t=_e(2);ye(),nn("selectedIndex",t.selectedIndex),Xe("mat-stretch-tabs",!1),ye(),Kt(t.searchTerms)}}function B_(r,e){if(r&1){let t=St();ne(0,"app-collate-project-list",27),He("deleteProject",function(i){Ze(t);let a=_e(4);return Je(a.deleteProject(i))})("projectOrderChanged",function(i){Ze(t);let a=_e(4);return Je(a.onProjectOrderChanged(i))}),ue()}if(r&2){let t=_e(4);Xe("searchTerm",t.selectedSearchTerm)("projectConditionColorMap",t.collate.settings.projectConditionColorMap)("projects",t.projects)("filteredResults",t.filteredResults)("renameCondition",t.collate.settings.renameSampleCondition)}}function R_(r,e){if(r&1&&ct(0,B_,1,5,"app-collate-project-list",26),r&2){let t=_e(3);Ct(t.collate.settings.projectConditionColorMap&&t.collate.settings.renameSampleCondition?0:-1)}}function O_(r,e){if(r&1&&ct(0,R_,1,1),r&2){let t=_e(2);Ct(t.collate.settings?0:-1)}}function L_(r,e){if(r&1){let t=St();ne(0,"mat-toolbar")(1,"mat-toolbar-row"),ht(2,"span",2),ct(3,S_,2,1,"mat-checkbox",3),ne(4,"button",4),He("click",function(){Ze(t);let i=_e();return Je(i.goToCollateView())}),ne(5,"mat-icon"),ke(6,"visibility"),ue()(),ne(7,"button",5),He("click",function(){Ze(t);let i=_e();return Je(i.openProjectAddDialog())}),ne(8,"mat-icon"),ke(9,"add"),ue()(),ne(10,"button",6),He("click",function(){Ze(t);let i=_e();return Je(i.updateCollate())}),ne(11,"mat-icon"),ke(12,"save"),ue()(),ne(13,"button",7)(14,"mat-icon"),ke(15,"more_vert"),ue()(),ne(16,"mat-menu",null,0)(18,"button",8),He("click",function(){Ze(t);let i=_e();return Je(i.openReorderDialog())}),ke(19,"Reorder Analysis Groups"),ue(),ne(20,"button",8),He("click",function(){Ze(t);let i=_e();return Je(i.openVisibilityDialog())}),ke(21,"Change Analysis Group Visibility"),ue(),ne(22,"button",8),He("click",function(){Ze(t);let i=_e();return Je(i.openConditionColorEditorDialog())}),ke(23,"Set Condition Colors"),ue(),ne(24,"button",8),He("click",function(){Ze(t);let i=_e();return Je(i.openPlotSettings())}),ke(25,"Change Plot General Settings"),ue(),ne(26,"button",8),He("click",function(){Ze(t);let i=_e();return Je(i.openRenameConditionDialog())}),ke(27,"Rename Condition"),ue()()()(),ct(28,M_,6,2,"div",9)(29,P_,5,1),ne(30,"div",1)(31,"app-collate-search",10),He("searchResultID",function(i){Ze(t);let a=_e();return Je(a.getSearchFromID(i))}),ue()(),ct(32,I_,4,2,"div",11)(33,O_,1,1)}if(r&2){let t=Bn(17),n=_e();ye(3),Ct(n.collate?3:-1),ye(10),Xe("matMenuTriggerFor",t),ye(15),Ct(n.collate?28:-1),ye(),Ct(n.collate?29:-1),ye(2),Xe("projects",n.projects),ye(),Ct(n.searchTerms.length>0?32:-1),ye(),Ct(n.collate?33:-1)}}function F_(r,e){r&1&&(ne(0,"div",1)(1,"p"),ke(2," You do not have permission to edit this collate. "),ue()())}var Wc=(()=>{class r{set collateId(t){t&&this.collateService.getCollate(t).subscribe(n=>{if(this._collate=n,this.accounts.getCollatePermissions(n.id).subscribe(i=>{this.canEdit=i.edit}),this.projects=n.projects,this._collate.settings||(this._collate.settings={projectOrder:this.projects.map(i=>i.id),analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},plotSettings:{},showTags:!1}),this._collate.settings.plotSettings||(this._collate.settings.plotSettings={}),n.settings.projectOrder){let i=this.projects.filter(a=>!n.settings.projectOrder.includes(a.id));this.projects=this.projects.filter(a=>n.settings.projectOrder.includes(a.id)),this.projects=this.projects.concat(i)}if(this.collate&&"showTags"in this.collate.settings&&(this.collate.settings.showTags=!1),this.collate?.settings.projectConditionColorMap)this.graph.projectConditionColorMap=this.collate.settings.projectConditionColorMap;else{this.collate.settings.projectConditionColorMap={};for(let i of this.projects)this.collate.settings.projectConditionColorMap[i.id]={}}if(!this.collate?.settings.renameSampleCondition){this.collate.settings.renameSampleCondition={};for(let i of this.projects)this.collate.settings.renameSampleCondition[i.id]={},this.web.getProjectUniqueConditions(i.id).subscribe(a=>{for(let o of a)this.collate.settings.renameSampleCondition[i.id][o.Condition]=o.Condition;console.log(this.collate.settings.renameSampleCondition)})}})}get collate(){return this._collate}set collate(t){this._collate=t}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(t){this._selectedSearchTerm=t}constructor(t,n,i,a,o,s,l){this.accounts=t,this.graph=n,this.router=i,this.snackBar=a,this.dialog=o,this.collateService=s,this.web=l,this._collate=null,this.canEdit=!1,this.projects=[],this.selectedIndex=0,this.editTitle=!1,this.editGreeting=!1,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this.searchTerms=[],this._selectedSearchTerm="",this.filteredResults={},this.removedTags=[]}openProjectAddDialog(){this.dialog.open(Ev).afterClosed().subscribe(n=>{n&&(this.projects=this.projects.concat(n),this.collate&&(this.collate.projects=this.projects,this.updateProjectOrder()))})}updateProjectOrder(){this._collate&&(this._collate.settings.projectOrder=this.projects.map(t=>t.id)),console.log(this.collate)}updateCollate(){this._collate&&this.collateService.updateCollate(this._collate.id,this._collate).subscribe(()=>{if(this.removedTags.length>0){let t=this.removedTags.map(n=>this.collateService.removeTagFromCollate(this._collate?.id,n.id));of(t).subscribe(()=>{this.showSnackBar("Collate saved successfully"),this.removedTags=[]})}else this.showSnackBar("Collate saved successfully")})}toggleEditTitle(){this.editTitle=!this.editTitle}toggleEditGreeting(){this.editGreeting=!this.editGreeting}saveTitle(){this.toggleEditTitle(),this.updateCollate()}saveGreeting(){this.toggleEditGreeting(),this.updateCollate()}getSearchFromID(t){this.web.getSearchSession(t).subscribe(n=>{console.log(n)}),this.web.getSearchResults(t,99999).subscribe(n=>{console.log(n.results),this.distributeSearchResults(n.results).then()})}associateAnalysisGroupsWithProjects(){return zr(this,null,function*(){let t=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},t&&t.forEach(n=>{let i=n.project;this.projectAnalysisGroups[i]||(this.projectAnalysisGroups[i]=[]),this.projectAnalysisGroups[i].push(n),this.analysisGroupProjects[n.id]=this.projects.find(a=>a.id===i)})})}distributeSearchResults(t){return zr(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(t.map(n=>n.search_term))),t.forEach(n=>{let i=n.analysis_group.id,a=this.analysisGroupProjects[i];a&&(this.searchResults[a.id]||(this.searchResults[a.id]=[]),this.searchResults[a.id].push(n))}),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let t={};return Object.keys(this.searchResults).forEach(n=>{t[n]=this.searchResults[n].filter(i=>i.search_term===this.selectedSearchTerm)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(n=>{let i=parseInt(n),a=this.collate?.settings.analysisGroupOrderMap[i];if(!t[i]||!a)return;let o=t[i].filter(s=>!a.includes(s.analysis_group.id));if(t[i]=t[i].filter(s=>a.includes(s.analysis_group.id)),t[i]=t[i].sort((s,l)=>a.indexOf(s.analysis_group.id)-a.indexOf(l.analysis_group.id)),t[i]=t[i].concat(o),this.collate?.settings?.projectAnalysisGroupVisibility){let s=this.collate?.settings.projectAnalysisGroupVisibility[i];t[i]=t[i].filter(l=>!s||!(l.analysis_group.id in s)?!0:s[l.analysis_group.id])}}),t}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults()}onProjectOrderChanged(t){this.projects=t,this.updateProjectOrder()}showSnackBar(t){this.snackBar.open(t,"Close",{duration:3e3})}deleteProject(t){this.projects=this.projects.filter(n=>n.id!==t.id),this.updateProjectOrder()}goToCollateView(){this._collate&&this.router.navigate(["/collate/view",this._collate.id])}onSearchResultsChange(t,n){this.filteredResults[n]=t,this.collate&&(this.collate.settings.analysisGroupOrderMap||(this.collate.settings.analysisGroupOrderMap={}),this.collate.settings.analysisGroupOrderMap[n]=t.map(i=>i.analysis_group.id),Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(i=>{this.collate.settings.analysisGroupOrderMap[i]=Array.from(new Set(this.collate.settings.analysisGroupOrderMap[i]))}))}openVisibilityDialog(){let t=this.dialog.open(nl);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(n=>{let i={};n.forEach(o=>{i[o.project]||(i[o.project]=[]),i[o.project].push(o)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(o=>{let s=parseInt(o),l=this.collate?.settings.analysisGroupOrderMap[s];if(!l||!i[s])return;let u=i[s].filter(c=>!l.includes(c.id));i[s]=i[s].filter(c=>l.includes(c.id)),i[s]=i[s].sort((c,d)=>l.indexOf(c.id)-l.indexOf(d.id)),i[s]=i[s].concat(u)}),t.componentInstance.projectAnalysisGroupMap=i,t.componentInstance.projects=this.projects;let a={};this.collate?.settings?.projectAnalysisGroupVisibility&&(a=this.collate.settings.projectAnalysisGroupVisibility);for(let o in i){a[o]||(a[o]={});for(let s of i[o])s.id in a[o]||(a[o][s.id]=!0)}t.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},a)}),t.afterClosed().subscribe(n=>{this.collate&&n&&(this.collate.settings.projectAnalysisGroupVisibility=n,this.filteredResults=this.getFilteredSearchResults())})}openReorderDialog(){let t=this.dialog.open(Dv);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(n=>{let i={};n.forEach(a=>{i[a.project]||(i[a.project]=[]),i[a.project].push(a)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(a=>{let o=parseInt(a),s=this.collate?.settings.analysisGroupOrderMap[o];if(!s||!i[o])return;let l=i[o].filter(u=>!s.includes(u.id));i[o]=i[o].filter(u=>s.includes(u.id)),i[o]=i[o].sort((u,c)=>s.indexOf(u.id)-s.indexOf(c.id)),i[o]=i[o].concat(l)}),t.componentInstance.projectAnalysisGroupMap=i,t.componentInstance.projects=this.projects}),t.afterClosed().subscribe(n=>{this.projects=n.projects,this.updateProjectOrder(),this.projectAnalysisGroups=n.projectAnalysisGroupMap;let i={};Object.keys(this.projectAnalysisGroups).forEach(a=>{i[a]=this.projectAnalysisGroups[a].map(o=>o.id)}),this.collate&&(this.collate.settings.analysisGroupOrderMap=i,this.filteredResults=this.getFilteredSearchResults())})}openConditionColorEditorDialog(){let t=this.dialog.open(Ov);t.componentInstance.projectConditionColorMap=this.collate?.settings?.projectConditionColorMap,t.componentInstance.projects=this.projects,t.afterClosed().subscribe(n=>{this.collate&&(this.collate.settings.projectConditionColorMap=n),this.graph.projectConditionColorMap=Object.assign({},n),this.filteredResults=this.getFilteredSearchResults(),this.graph.redrawTrigger.next(!0)})}openCollateTagCreateDialog(){this.dialog.open(Lv).afterClosed().subscribe(n=>{n&&n.name&&(n.existing&&n.id&&n.id!==-1?this.collateService.addTagToCollate(this.collate?.id,n.id).subscribe(i=>{this.collate&&this.collate.tags.push(i)}):this.collateService.createCollateTag(n.name).subscribe(i=>{this.collateService.addTagToCollate(this.collate?.id,i.id).subscribe(a=>{this.collate&&this.collate.tags.push(a)})}))})}handleCollageTagsChange(t){this.collate&&(this.removedTags=this.collate.tags.filter(n=>!t.includes(n)),this.collate.tags=t)}openRenameConditionDialog(){if(this.collate){let t=this.dialog.open(Fv);t.componentInstance.projects=this.collate.projects,t.componentInstance.renameSampleCondition=this.collate.settings.renameSampleCondition,t.afterClosed().subscribe(n=>{this.collate&&(this.collate.settings.renameSampleCondition=Object.assign({},n),console.log(this.collate.settings.renameSampleCondition))})}}openPlotSettings(){if(this.collate){let t=this.dialog.open(Nv);t.componentInstance.settings=this.collate.settings.plotSettings,t.afterClosed().subscribe(n=>{this.collate&&n&&(this.collate.settings.plotSettings=n,this.graph.plotSettings=n,this.graph.redrawTrigger.next(!0))})}}static{this.\u0275fac=function(n){return new(n||r)(st(Xn),st(Us),st(Ea),st(Ln),st(Pa),st(ki),st(dn))}}static{this.\u0275cmp=It({type:r,selectors:[["app-collate-editor"]],inputs:{collateId:"collateId"},decls:2,vars:1,consts:[["extraActionsMenu","matMenu"],[2,"display","flex","justify-content","center"],[1,"spacer"],[3,"ngModel"],["type","button","aria-label","View Collate","mat-icon-button","",3,"click"],["type","button","aria-label","Add Projects","mat-icon-button","",3,"click"],["type","button","aria-label","Update Collate","mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[3,"searchResultID","projects"],[2,"padding","20px"],[3,"ngModelChange","ngModel"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"],[3,"click"],[2,"font-size","2em","text-align","center","font-family","Roboto, Helvetica Neue, sans-serif","padding","5px"],["matInput","",3,"keydown.enter","ngModelChange","ngModel"],["mat-icon-button","",3,"click"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif",3,"click"],[2,"font-size","25px","text-align","center","font-family","'Roboto', 'Arial Narrow', sans-serif","padding","5px"],["mat-button","",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTagsChange","collageTags"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"label"],[3,"searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"],[3,"deleteProject","projectOrderChanged","searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"]],template:function(n,i){n&1&&ct(0,L_,34,7)(1,F_,3,0,"div",1),n&2&&Ct(i.canEdit?0:1)},dependencies:[Rs,Si,sn,Bs,Ei,ln,Pr,Ti,Js,$s,Ws,cn,fn,tl,Xs,Ks,Ys,yr,rl,Aa],styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return r})();var N_=[{component:Xf,path:""},{component:iu,path:"view"},{component:iu,path:"view/:collateId"},{component:iu,path:"view/:collateId/:sessionId"},{component:Wc,path:"edit"},{component:Wc,path:"edit/:collateId"}],_k=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=hs({type:r})}static{this.\u0275inj=cs({imports:[ws,Tf.forChild(N_)]})}}return r})();export{_k as CollateModule};
