import{a as ye}from"./chunk-DJ63SIO7.js";import{a as Se}from"./chunk-UGDXIUM2.js";import{a as _e,b as be,c as xe,d as ve,e as we,f as Ge}from"./chunk-4EF53FDU.js";import"./chunk-E7WCFS4V.js";import{a as re,b as se,c as le,d as ce,e as pe,f as me}from"./chunk-TSMHSBKG.js";import"./chunk-ED5XJP5F.js";import{a as Pe,b as Me}from"./chunk-KVFSNNL6.js";import{f as Q,h as L,i as Ce,j as ge}from"./chunk-MJTMJ65I.js";import{Aa as N,Ba as V,Da as B,Fa as k,Ia as O,J as ae,Ja as z,La as $,Ma as je,O as ue,P as de,ia as fe,na as A,pa as v,ra as I,sa as F,ua as y,wa as D,xa as he,za as T}from"./chunk-HHZMQOYZ.js";import{l as ne,p as oe}from"./chunk-KCCSOALX.js";import"./chunk-4N6BO7AP.js";import{Aa as w,Ba as G,Bb as p,Hb as _,Ia as K,Jb as M,Kb as E,Lb as t,Mb as i,Nb as f,Rb as j,Ub as h,Wb as C,cd as te,ed as ie,f as W,fb as c,gb as d,gc as a,hc as X,ic as q,ja as U,jc as Y,oc as b,p as H,sa as g,sc as Z,ta as J,tc as ee,xb as S}from"./chunk-QNTGE4BG.js";var Be=(o,e)=>e.id;function ke(o,e){if(o&1&&(t(0,"mat-list-option",5),a(1),i()),o&2){let l=e.$implicit;p("value",l),c(),X(l.name)}}function Oe(o,e){if(o&1&&(t(0,"mat-selection-list",3),M(1,ke,2,2,"mat-list-option",5,Be),i()),o&2){let l=C(2);p("multiple",!1),c(),E(l.analysisGroupQuery.results)}}function ze(o,e){if(o&1){let l=j();S(0,Oe,3,1,"mat-selection-list",3),t(1,"mat-paginator",4),h("page",function(n){w(l);let s=C();return G(s.handlePageEvent(n))}),i()}if(o&2){let l=C();_(l.analysisGroupQuery.results.length>0?0:-1),c(),p("pageSize",l.analysisGroupPageSize)("length",l.analysisGroupQuery.count)("pageIndex",l.analysisGroupPageIndex)}}var Ee=(()=>{let e=class e{constructor(r,n){this.fb=r,this.web=n,this.formAnalysisGroupSearch=this.fb.group({searchTerm:new y("",v.required),selectedAnalysisGroups:new y([])}),this.analysisGroupPageSize=5,this.analysisGroupPageIndex=0,this.analysisGroupQuery=void 0,this.selectedAnalysisGroups=new K,this.formAnalysisGroupSearch.controls.searchTerm.valueChanges.subscribe(s=>{s&&this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0,s).subscribe(u=>{this.analysisGroupQuery=u})}),this.formAnalysisGroupSearch.controls.selectedAnalysisGroups.valueChanges.subscribe(s=>{s&&this.selectedAnalysisGroups.emit(s)}),this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0).subscribe(s=>{this.analysisGroupQuery=s})}handlePageEvent(r){let n=r.pageIndex*r.pageSize;this.analysisGroupPageIndex=r.pageIndex,this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,n,this.formAnalysisGroupSearch.value.searchTerm).subscribe(s=>{this.analysisGroupQuery=s})}};e.\u0275fac=function(n){return new(n||e)(d(V),d($))},e.\u0275cmp=g({type:e,selectors:[["app-analysis-search"]],outputs:{selectedAnalysisGroups:"selectedAnalysisGroups"},standalone:!0,features:[b],decls:6,vars:2,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Analysis Group Name","type","search"],[3,"pageSize","length","pageIndex"],["formControlName","selectedAnalysisGroups",3,"multiple"],[3,"page","pageSize","length","pageIndex"],[3,"value"]],template:function(n,s){n&1&&(t(0,"form",0)(1,"mat-form-field"),f(2,"input",1),t(3,"mat-label"),a(4,"Search For Specific Analysis Groups"),i()(),S(5,ze,2,4,"mat-paginator",2),i()),n&2&&(p("formGroup",s.formAnalysisGroupSearch),c(5),_(s.analysisGroupQuery?5:-1))},dependencies:[B,D,A,I,F,T,N,L,Q,ge,k,O,z]});let o=e;return o})();var Qe=(o,e)=>e.id;function Le(o,e){if(o&1){let l=j();t(0,"mat-card-actions")(1,"button",19),h("click",function(){w(l);let n=C();return G(n.openProjectCreateDialog())}),a(2,"Create Project"),i()()}}function $e(o,e){if(o&1){let l=j();t(0,"mat-card-actions")(1,"button",19),h("click",function(){w(l);let n=C();return G(n.openAnalysisGroupCreateDialog())}),a(2,"Create Analysis Group"),i()()}}function Re(o,e){if(o&1){let l=j();t(0,"mat-list-option",21),h("click",function(){let n=w(l).$implicit,s=C(3);return G(s.selectSpecies(n))}),a(1),i()}if(o&2){let l=e.$implicit;p("value",l),c(),Y(" ",l.official_name," (",l.code,") ")}}function qe(o,e){if(o&1&&(t(0,"p"),a(1," Select an option from below: "),i(),t(2,"mat-selection-list",20),M(3,Re,2,3,"mat-list-option",14,Qe),i()),o&2){let l=C();c(2),p("multiple",!1),c(),E(l)}}function We(o,e){o&1&&S(0,qe,5,1),o&2&&_(e.length>0?0:-1)}var Ae=(()=>{let e=class e{constructor(r,n,s,u,x,De,Te){this.router=r,this.accounts=n,this.web=s,this.dialog=u,this.fb=x,this.sb=De,this.ws=Te,this.projectCount=0,this.analysisGroupCount=0,this.form=this.fb.group({search:new y("",v.required),searchMode:new y("full",v.required),foldChange:new y(.6,v.required),pValue:new y(1.31,v.required),projects:new y([]),species_name:new y("")}),this.pageSize=10,this.currentPage=0,this.speciesQueryBehaviorSubject=new H([]),this.selectedSpecies=void 0,this.web.getProjectCount().subscribe(m=>{this.projectCount=m.count}),this.web.getAnalysisGroupCount().subscribe(m=>{this.analysisGroupCount=m.count}),this.form.controls.species_name.valueChanges.subscribe(m=>{m&&this.web.getSpecies(void 0,20,0,m).subscribe(P=>{this.speciesQueryBehaviorSubject.next(P.results)})}),this.ws.searchWSConnection?.subscribe(m=>{if(m&&m.type==="search_status")switch(m.status){case"complete":if(this.router.url.includes("collate"))return;this.router.navigate([`/search-session/${m.id}`]).then();break}}),this.web.updateFromLabGroupSelection.subscribe(m=>{m&&(this.web.getProjectCount().subscribe(P=>{this.projectCount=P.count}),this.web.getAnalysisGroupCount().subscribe(P=>{this.analysisGroupCount=P.count}))})}openProjectCreateDialog(){this.dialog.open(ye).afterClosed().subscribe(n=>{n&&this.web.createProject(n.name,n.description).subscribe(s=>{this.web.getProjectCount().subscribe(u=>{this.projectCount=u.count}),window.open(`/#/project/${s.id}`,"_blank")})})}openAnalysisGroupCreateDialog(){let r=this.dialog.open(Se);r.componentInstance.enableProjectSelection=!0,r.afterClosed().subscribe(n=>{n&&(this.web.getAnalysisGroupCount().subscribe(s=>{this.analysisGroupCount=s.count}),window.open(`/#/analysis-group/${n.id}`,"_blank"))})}handleProjectSelection(r){r.length!==0&&this.router.navigate([`/project/${r[0].id}`]).then()}handleMultipleProjectSelection(r){this.form.controls.projects.setValue(r)}searchDatabase(){return W(this,null,function*(){if(this.form.invalid)return;let r=[];if(this.form.value.projects){let n=yield this.web.getAnalysisGroupsFromProjects(this.form.value.projects).toPromise();if(n)for(let s of n)r.push(s.id)}this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(r,this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode,this.selectedSpecies).subscribe(n=>{this.sb.open("Search queued","Dismiss",{duration:2e3})})})}handleAGSelection(r){r.length>0&&this.router.navigate([`/analysis-group/${r[0].id}`]).then()}selectSpecies(r){if(this.selectedSpecies===r){this.selectedSpecies=void 0;return}this.selectedSpecies=r}};e.\u0275fac=function(n){return new(n||e)(d(ne),d(je),d($),d(fe),d(V),d(Pe),d(Me))},e.\u0275cmp=g({type:e,selectors:[["app-banner"]],standalone:!0,features:[b],decls:98,vars:15,consts:[[2,"display","flex","flex-direction","row","justify-content","center","gap","20px","padding","20px","flex-wrap","wrap"],[2,"display","flex","flex-direction","column","gap","20px"],["appearance","outlined",2,"width","350px"],[2,"color","#ba0000"],["href","/#/project"],[3,"selectedProjects","multipleSelection"],["href","/#/analysis-group"],[3,"selectedAnalysisGroups"],[2,"display","flex","flex-direction","row","justify-content","center"],["appearance","outlined",2,"min-width","350px","width","100%"],["href","/#/search-session"],[2,"display","flex","flex-direction","column","gap","5px",3,"formGroup"],["matInput","","formControlName","search","placeholder","Search","type","search"],["formControlName","searchMode"],[3,"value"],["matInput","","formControlName","foldChange","type","number","placeholder","Log2 Fold Change"],["matInput","","formControlName","pValue","type","number","placeholder","P-Value"],["matInput","","type","search","formControlName","species_name","placeholder","Species Name"],[3,"selectedProjects","species","multipleSelection"],["mat-button","","type","button",3,"click"],[3,"multiple"],[3,"click","value"]],template:function(n,s){if(n&1&&(t(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title")(5,"span",3)(6,"mat-icon"),a(7,"lock"),i()(),t(8,"a",4)(9,"span",3),a(10,"Project"),i()()(),t(11,"mat-card-subtitle"),a(12," Cinder Project Data "),i()(),t(13,"mat-card-content")(14,"p"),a(15),i(),t(16,"app-project-search",5),h("selectedProjects",function(x){return s.handleProjectSelection(x)}),i()(),S(17,Le,3,0,"mat-card-actions"),i(),t(18,"mat-card",2)(19,"mat-card-header")(20,"mat-card-title")(21,"span",3)(22,"mat-icon"),a(23,"lock"),i()(),t(24,"a",6)(25,"span",3),a(26,"Analysis Groups"),i()()(),t(27,"mat-card-subtitle"),a(28," Project Assigned Analysis Groups "),i()(),t(29,"mat-card-content")(30,"p"),a(31),i(),t(32,"app-analysis-search",7),h("selectedAnalysisGroups",function(x){return s.handleAGSelection(x)}),i()(),S(33,$e,3,0,"mat-card-actions"),i()(),t(34,"div",8)(35,"div")(36,"mat-card",9)(37,"mat-card-header")(38,"mat-card-title")(39,"span",3)(40,"mat-icon"),a(41,"lock_open"),i()(),t(42,"a",10)(43,"span",3),a(44,"Search"),i()()(),t(45,"mat-card-subtitle"),a(46," Search through the Cinder Database "),i()(),t(47,"mat-card-content")(48,"form",11)(49,"mat-form-field"),f(50,"input",12),t(51,"mat-label"),a(52,"Database Search Term"),i()(),t(53,"p")(54,"b"),a(55,"Search Multiple Terms"),i(),f(56,"br"),a(57," In order to search with multiple terms, enclose each term in single quotes and separate them with "),t(58,"b"),a(59,"OR"),i(),a(60,". "),i(),t(61,"mat-form-field")(62,"mat-select",13)(63,"mat-option",14),a(64," Full Text "),i(),t(65,"mat-option",14),a(66," UniProt Accession ID "),i(),t(67,"mat-option",14),a(68," Gene Names "),i(),t(69,"mat-option",14),a(70," Primary IDs "),i()(),t(71,"mat-label"),a(72,"Search Mode"),i()(),t(73,"mat-form-field"),f(74,"input",15),t(75,"mat-label"),a(76,"Log2 Fold Change Cutoff"),i()(),t(77,"mat-form-field"),f(78,"input",16),t(79,"mat-label"),a(80,"-Log10(P-Value) Cutoff"),i()(),t(81,"mat-form-field"),f(82,"input",17),t(83,"mat-label"),a(84,"Species Name Search"),i()(),S(85,We,1,1),Z(86,"async"),i(),t(87,"mat-accordion")(88,"mat-expansion-panel")(89,"mat-expansion-panel-header")(90,"mat-panel-title"),a(91," Filter by Project "),i(),t(92,"mat-panel-description"),a(93," Optional "),i()(),t(94,"app-project-search",18),h("selectedProjects",function(x){return s.handleMultipleProjectSelection(x)}),i()()()(),t(95,"mat-card-actions")(96,"button",19),h("click",function(){return s.searchDatabase()}),a(97,"Search"),i()()()()()()),n&2){let u;c(15),q(" # of Projects: ",s.projectCount," "),c(),p("multipleSelection",!1),c(),_(s.accounts.loggedIn?17:-1),c(14),q(" # of Analysis Groups: ",s.analysisGroupCount," "),c(2),_(s.accounts.loggedIn?33:-1),c(15),p("formGroup",s.form),c(15),p("value","full"),c(2),p("value","uniprot"),c(2),p("value","gene"),c(2),p("value","pi"),c(16),_((u=ee(86,13,s.speciesQueryBehaviorSubject.asObservable()))?85:-1,u),c(9),p("species",s.selectedSpecies)("multipleSelection",!0)}},dependencies:[re,ce,se,me,le,ue,pe,de,_e,B,D,A,he,I,F,T,N,O,z,Ce,k,ae,Ge,be,we,ve,xe,Ee,te,L,Q],styles:[".banner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:wrap;gap:20px;padding:20px}"]});let o=e;return o})();var Ie=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["app-footer"]],standalone:!0,features:[b],decls:4,vars:0,consts:[[1,"footer",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","20px"]],template:function(n,s){n&1&&(t(0,"div",0)(1,"div",1)(2,"p",2),a(3," MRC-PPU, University of Dundee. ASAP. "),i()()())}});let o=e;return o})();var Fe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["app-home"]],standalone:!0,features:[b],decls:9,vars:0,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"]],template:function(n,s){n&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),a(3,"C|nder"),i(),f(4,"br"),t(5,"div",2),a(6,"Proteomics Data Indexer"),i()()(),f(7,"app-banner")(8,"app-footer"))},dependencies:[Ae,Ie],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]});let o=e;return o})();var He=[{path:"",component:Fe}],Dt=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=J({type:e}),e.\u0275inj=U({imports:[ie,oe.forChild(He)]});let o=e;return o})();export{Dt as HomeModule};
