import"./chunk-PTG2DYHO.js";import"./chunk-IRQCCJII.js";import"./chunk-ZDUQ6FEO.js";import{b as Re,c as ue,d as ut}from"./chunk-AO6VYA3B.js";import{a as _e}from"./chunk-HZFMELAP.js";import{a as ee}from"./chunk-V5RE6BFB.js";import{a as ie,b as ne}from"./chunk-YLNQ6YAN.js";import{a as oe,b as re,c as ae,d as se,e as ce,f as le,g as de,h as he,i as me,j as pe}from"./chunk-CF2TBK2L.js";import"./chunk-PRCX7VDN.js";import"./chunk-P2FFHIGI.js";import"./chunk-U7RJ4N2E.js";import"./chunk-3NXFNHE6.js";import{a as te}from"./chunk-5BQX5E3H.js";import{a as Kt,f as Jt,h as Xt}from"./chunk-3ZRSVP4T.js";import{g as at}from"./chunk-LUNVEN3K.js";import{A as $t,Aa as et,B as Gt,Ca as it,Ha as nt,Ia as ot,Ka as rt,La as Zt,Ma as B,Q as U,R as Yt,S as W,ka as q,oa as K,p as zt,pa as J,ra as H,ta as X,ua as qt,wa as Z,x as jt,xa as tt,ya as Q}from"./chunk-QJNOXFLF.js";import{c as O,d as A,g as u,h as D,i as $,j as E,k as Ut,l as Wt}from"./chunk-HX3ESI56.js";import{h as Qt,l as Bt,p as Nt}from"./chunk-QJ2HU2ZW.js";import{Aa as v,Ab as mt,Ba as w,Bb as p,Db as pt,Dc as kt,Hb as f,Ia as F,Ic as j,Jb as yt,K as Ct,Kb as Dt,La as bt,Lb as o,Mb as r,Nb as _,Ob as R,Pb as I,Rb as M,Ub as S,Wb as h,Xb as Rt,Yb as It,Zc as Ot,_b as Y,ac as Mt,bb as G,bc as Tt,cc as Et,dd as Pt,e as De,ed as Ht,fb as s,gb as m,gc as c,hc as k,ia as gt,ic as T,ja as lt,la as vt,n as ct,oc as y,q as St,qc as At,rc as Lt,sa as b,sc as Vt,ta as dt,ua as wt,ub as ht,uc as Ft,xb as d,za as xt}from"./chunk-TUTLJQZA.js";var Ie=(e,a)=>a.id;function Me(e,a){if(e&1){let t=M();o(0,"mat-list-option",1),S("click",function(){let n=v(t).$implicit,l=h(2);return w(l.searchSessionSelected.emit(n))}),o(1,"div")(2,"div")(3,"b"),c(4),r()(),o(5,"small"),c(6),Vt(7,"date"),r()()(),_(8,"mat-divider")}if(e&2){let t=a.$implicit;p("value",t)("disabled",t.failed),s(4),k(t.search_term),s(2),k(Ft(7,4,t.created_at,"short"))}}function Te(e,a){if(e&1&&(o(0,"mat-selection-list",0),yt(1,Me,9,7,null,null,Ie),r()),e&2){let t=h();p("multiple",!1),s(),Dt(t.searchSessionQuery.results)}}var fe=(()=>{class e{set searchSessionQuery(t){this._searchSessionQuery=t}get searchSessionQuery(){return this._searchSessionQuery}constructor(){this._searchSessionQuery=void 0,this.searchSessionSelected=new F}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-search-session-list"]],inputs:{searchSessionQuery:"searchSessionQuery"},outputs:{searchSessionSelected:"searchSessionSelected"},standalone:!0,features:[y],decls:1,vars:1,consts:[[3,"multiple"],[3,"click","value","disabled"]],template:function(i,n){i&1&&d(0,Te,3,1,"mat-selection-list",0),i&2&&f(n.searchSessionQuery?0:-1)},dependencies:[Kt,Jt,Xt,Pt]})}}return e})();var Ee=["mat-sort-header",""],Ae=["*"];function Le(e,a){if(e&1){let t=M();o(0,"div",2),S("@arrowPosition.start",function(){v(t);let n=h();return w(n._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){v(t);let n=h();return w(n._disableViewStateAnimation=!1)}),_(1,"div",3),o(2,"div",4),_(3,"div",5)(4,"div",6)(5,"div",7),r()()}if(e&2){let t=h();p("@arrowOpacity",t._getArrowViewState())("@arrowPosition",t._getArrowViewState())("@allowChildren",t._getArrowDirectionState()),s(2),p("@indicator",t._getArrowDirectionState()),s(),p("@leftPointer",t._getArrowDirectionState()),s(),p("@rightPointer",t._getArrowDirectionState())}}var Se=new vt("MAT_SORT_DEFAULT_OPTIONS"),_t=(()=>{class e{get direction(){return this._direction}set direction(t){this._direction=t}constructor(t){this._defaultOptions=t,this._initializedStream=new St(1),this.sortables=new Map,this._stateChanges=new ct,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new F,this.initialized=this._initializedStream}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let i=t?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,n=Ve(t.start||this.start,i),l=n.indexOf(this.direction)+1;return l>=n.length&&(l=0),n[l]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static{this.\u0275fac=function(i){return new(i||e)(m(Se,8))}}static{this.\u0275dir=wt({type:e,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",j],disabled:[2,"matSortDisabled","disabled",j]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[ht,xt]})}}return e})();function Ve(e,a){let t=["asc","desc"];return e=="desc"&&t.reverse(),a||t.push(""),t}var V=Gt.ENTERING+" "+$t.STANDARD_CURVE,N={indicator:O("indicator",[D("active-asc, asc",u({transform:"translateY(0px)"})),D("active-desc, desc",u({transform:"translateY(10px)"})),E("active-asc <=> active-desc",A(V))]),leftPointer:O("leftPointer",[D("active-asc, asc",u({transform:"rotate(-45deg)"})),D("active-desc, desc",u({transform:"rotate(45deg)"})),E("active-asc <=> active-desc",A(V))]),rightPointer:O("rightPointer",[D("active-asc, asc",u({transform:"rotate(45deg)"})),D("active-desc, desc",u({transform:"rotate(-45deg)"})),E("active-asc <=> active-desc",A(V))]),arrowOpacity:O("arrowOpacity",[D("desc-to-active, asc-to-active, active",u({opacity:1})),D("desc-to-hint, asc-to-hint, hint",u({opacity:.54})),D("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",u({opacity:0})),E("* => asc, * => desc, * => active, * => hint, * => void",A("0ms")),E("* <=> *",A(V))]),arrowPosition:O("arrowPosition",[E("* => desc-to-hint, * => desc-to-active",A(V,$([u({transform:"translateY(-25%)"}),u({transform:"translateY(0)"})]))),E("* => hint-to-desc, * => active-to-desc",A(V,$([u({transform:"translateY(0)"}),u({transform:"translateY(25%)"})]))),E("* => asc-to-hint, * => asc-to-active",A(V,$([u({transform:"translateY(25%)"}),u({transform:"translateY(0)"})]))),E("* => hint-to-asc, * => active-to-asc",A(V,$([u({transform:"translateY(0)"}),u({transform:"translateY(-25%)"})]))),D("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",u({transform:"translateY(0)"})),D("hint-to-desc, active-to-desc, desc",u({transform:"translateY(-25%)"})),D("hint-to-asc, active-to-asc, asc",u({transform:"translateY(25%)"}))]),allowChildren:O("allowChildren",[E("* <=> *",[Wt("@*",Ut(),{optional:!0})])])},Fe=(()=>{class e{constructor(){this.changes=new ct}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ce=(()=>{class e{get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(t){this._updateSortActionDescription(t)}constructor(t,i,n,l,C,x,L,z){this._intl=t,this._changeDetectorRef=i,this._sort=n,this._columnDef=l,this._focusMonitor=C,this._elementRef=x,this._ariaDescriber=L,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this.disabled=!1,this._sortActionDescription="Sort",z?.arrowPosition&&(this.arrowPosition=z?.arrowPosition),this._handleStateChanges()}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{let i=!!t;i!==this._showIndicatorHint&&(this._setIndicatorHintVisible(i),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_setIndicatorHintVisible(t){this._isDisabled()&&t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._showIndicatorHint?this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"hint"}):this._setAnimationTransitionState({fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(t){this._viewState=t||{},this._disableViewStateAnimation&&(this._viewState={toState:t.toState})}_toggleOnInteraction(){this._sort.sort(this),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(t){!this._isDisabled()&&(t.keyCode===32||t.keyCode===13)&&(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&(this._sort.direction==="asc"||this._sort.direction==="desc")}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){let t=this._viewState.fromState;return(t?`${t}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?this._sort.direction=="asc"?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(t){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,t)),this._sortActionDescription=t}_handleStateChanges(){this._rerenderSubscription=Ct(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&this._viewState.toState==="active"&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(i){return new(i||e)(m(Fe),m(kt),m(_t,8),m("MAT_SORT_HEADER_COLUMN_DEF",8),m(jt),m(bt),m(zt,8),m(Se,8))}}static{this.\u0275cmp=b({type:e,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(i,n){i&1&&S("click",function(){return n._handleClick()})("keydown",function(C){return n._handleKeydown(C)})("mouseenter",function(){return n._setIndicatorHintVisible(!0)})("mouseleave",function(){return n._setIndicatorHintVisible(!1)}),i&2&&(mt("aria-sort",n._getAriaSortAttribute()),pt("mat-sort-header-disabled",n._isDisabled()))},inputs:{id:[0,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[2,"disabled","disabled",j],sortActionDescription:"sortActionDescription",disableClear:[2,"disableClear","disableClear",j]},exportAs:["matSortHeader"],standalone:!0,features:[ht,y],attrs:Ee,ngContentSelectors:Ae,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(i,n){i&1&&(Rt(),o(0,"div",0)(1,"div",1),It(2),r(),d(3,Le,6,6,"div",2),r()),i&2&&(pt("mat-sort-header-sorted",n._isSorted())("mat-sort-header-position-before",n.arrowPosition==="before"),mt("tabindex",n._isDisabled()?null:0)("role",n._isDisabled()?null:"button"),s(3),f(n._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;color:var(--mat-sort-arrow-color, var(--mat-app-on-surface));opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[N.indicator,N.leftPointer,N.rightPointer,N.arrowOpacity,N.arrowPosition,N.allowChildren]},changeDetection:0})}}return e})();var ke=["table"],Oe=e=>({"highlighted-row":e});function Pe(e,a){e&1&&(o(0,"div",1)(1,"h2"),c(2,"No results found"),r()())}function He(e,a){e&1&&(o(0,"th",20),c(1," Primary ID "),r())}function Qe(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.primary_id," ")}}function Be(e,a){e&1&&(o(0,"th",20),c(1," UniProt Accession ID "),r())}function Ne(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.uniprot_id," ")}}function ze(e,a){e&1&&(o(0,"th",20),c(1," Gene name "),r())}function je(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.gene_name," ")}}function $e(e,a){e&1&&(o(0,"th",22),c(1," Log2 FC "),r())}function Ge(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.log2_fc," ")}}function Ye(e,a){e&1&&(o(0,"th",22),c(1," -Log10(P-Value) "),r())}function Ue(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.log10_p," ")}}function We(e,a){e&1&&(o(0,"th",20),c(1," Comparison "),r())}function qe(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.comparison_label," ")}}function Ke(e,a){e&1&&(o(0,"th",20),c(1," Search term "),r())}function Je(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.search_term," ")}}function Xe(e,a){e&1&&(o(0,"th",20),c(1," Condition A "),r())}function Ze(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.condition_A,"")}}function ti(e,a){e&1&&(o(0,"th",20),c(1," Condition B "),r())}function ei(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.condition_B,"")}}function ii(e,a){e&1&&(o(0,"th",20),c(1," File "),r())}function ni(e,a){if(e&1&&(o(0,"td",21),c(1),r()),e&2){let t=a.$implicit;s(),T(" ",t.file.name," ")}}function oi(e,a){e&1&&(o(0,"th",20),c(1," Analysis Group "),r())}function ri(e,a){if(e&1&&(o(0,"td",21)(1,"a",23),c(2),r()()),e&2){let t=a.$implicit;s(),Y("href","/#/analysis-group/",t.analysis_group.id,"",G),s(),k(t.analysis_group.name)}}function ai(e,a){e&1&&_(0,"tr",24)}function si(e,a){if(e&1){let t=M();o(0,"tr",25),S("click",function(){let n=v(t).$implicit,l=h(3);return w(l.handleSelection(n))}),r()}if(e&2){let t=a.$implicit,i=h(3);p("ngClass",At(1,Oe,i.selectedRow===t))}}function ci(e,a){if(e&1){let t=M();o(0,"table",3,0),S("matSortChange",function(n){v(t);let l=h(2);return w(l.handleSortChange(n))}),R(2,4),d(3,He,2,0,"th",5)(4,Qe,2,1,"td",6),I(),R(5,7),d(6,Be,2,0,"th",5)(7,Ne,2,1,"td",6),I(),R(8,8),d(9,ze,2,0,"th",5)(10,je,2,1,"td",6),I(),R(11,9),d(12,$e,2,0,"th",10)(13,Ge,2,1,"td",6),I(),R(14,11),d(15,Ye,2,0,"th",10)(16,Ue,2,1,"td",6),I(),R(17,12),d(18,We,2,0,"th",5)(19,qe,2,1,"td",6),I(),R(20,13),d(21,Ke,2,0,"th",5)(22,Je,2,1,"td",6),I(),R(23,14),d(24,Xe,2,0,"th",5)(25,Ze,2,1,"td",6),I(),R(26,15),d(27,ti,2,0,"th",5)(28,ei,2,1,"td",6),I(),R(29,16),d(30,ii,2,0,"th",5)(31,ni,2,1,"td",6),I(),R(32,17),d(33,oi,2,0,"th",5)(34,ri,3,3,"td",6),I(),d(35,ai,1,0,"tr",18)(36,si,1,3,"tr",19),r()}if(e&2){let t=h(2);p("dataSource",t.searchResultQuery.results),s(35),p("matHeaderRowDef",t.displayedColumns),s(),p("matRowDefColumns",t.displayedColumns)}}function li(e,a){if(e&1&&d(0,Pe,3,0,"div",1)(1,ci,37,3,"table",2),e&2){let t=h();f(t.searchResultQuery.results.length===0?0:1)}}var ge=(()=>{class e{set searchResultQuery(t){this._searchResultQuery=t,this.table&&this.table.renderRows()}get searchResultQuery(){return this._searchResultQuery}constructor(){this.displayedColumns=["primary_id","gene_name","uniprot_id","search_term","condition_A","condition_B","log2_fc","log10_p","file","comparison_label","analysis_group"],this._searchResultQuery=void 0,this.selectedRow=void 0,this.selected=new F,this.sortChange=new F}handleSelection(t){this.selected.emit(t),this.selectedRow=t}handleSortChange(t){this.sortChange.emit(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-search-result-list"]],viewQuery:function(i,n){if(i&1&&Mt(ke,5),i&2){let l;Tt(l=Et())&&(n.table=l.first)}},inputs:{searchResultQuery:"searchResultQuery"},outputs:{selected:"selected",sortChange:"sortChange"},standalone:!0,features:[y],decls:1,vars:1,consts:[["table",""],[1,"no-results"],["mat-table","","matSort","",3,"dataSource"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","primary_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uniprot_id"],["matColumnDef","gene_name"],["matColumnDef","log2_fc"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","log10_p"],["matColumnDef","comparison_label"],["matColumnDef","search_term"],["matColumnDef","condition_A"],["matColumnDef","condition_B"],["matColumnDef","file"],["matColumnDef","analysis_group"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["target","_blank",3,"href"],["mat-header-row",""],["mat-row","",3,"click","ngClass"]],template:function(i,n){i&1&&d(0,li,2,1),i&2&&f(n.searchResultQuery?0:-1)},dependencies:[oe,se,ce,re,le,ae,me,pe,he,de,_t,Ce,Ot],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.highlighted-row[_ngcontent-%COMP%]{background-color:#009dff}"]})}}return e})();var hi=De(Re());ut.plotlyjs=hi;var ve=(()=>{class e{set annotationData(t){console.log(t),this._annotationData=t,this.currentColor=0,this.drawVerticalBarChart()}get annotationData(){return this._annotationData}constructor(t,i){this.graph=t,this.accounts=i,this.showOtherConditions=!1,this.title="",this.comparedConditions=[],this._annotationData=[],this.graphData=[],this.graphLayout={xaxis:{title:"Sample",tickfont:{size:17,color:"black"},tickvals:[],ticktext:[]},yaxis:{title:"Value",tickfont:{size:17,color:"black"}},margin:{r:40,l:100,b:120,t:100},width:1e3},this.barSize=50,this.revision=0,this.currentColor=0,this.colorMap={},this.graph.redrawTrigger.subscribe(()=>{this.drawVerticalBarChart()})}drawVerticalBarChart(){let t=document.getElementsByTagName("body")[0],n=window.getComputedStyle(t).backgroundColor;this.accounts.userAccount.darkMode?(this.graphLayout.plot_bgcolor=n,this.graphLayout.paper_bgcolor=n,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white"):(this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14});let l=this.annotationData,C={},x=[],L=[];for(let g of l)C[g.Condition]||(this.colorMap[g.Condition]||(this.colorMap[g.Condition]=this.graph.defaultColorList[this.currentColor]),C[g.Condition]={x:[],y:[],type:"bar",marker:{color:this.colorMap[g.Condition]},showlegend:!1,name:g.Condition},this.currentColor+=1,this.currentColor>=this.graph.defaultColorList.length&&(this.currentColor=0)),C[g.Condition].y.push(g.Value),C[g.Condition].x.push(g.Sample);let z=[],st=0;for(let g in C)!this.showOtherConditions&&this.comparedConditions.length>0&&!this.comparedConditions.includes(g)||(st=st+C[g].x.length,L.push(C[g].x[Math.round(C[g].x.length/2)-1]),x.push(g),z.push(C[g]));this.graphData=z,this.graphLayout.xaxis.tickvals=L,this.graphLayout.xaxis.ticktext=x,this.title&&(this.graphLayout.title=this.title),this.graphLayout.width=this.graphLayout.margin.l+this.graphLayout.margin.r+this.barSize*st,this.revision+=1}toggleOtherConditions(){this.showOtherConditions=!this.showOtherConditions,this.drawVerticalBarChart()}static{this.\u0275fac=function(i){return new(i||e)(m(_e),m(at))}}static{this.\u0275cmp=b({type:e,selectors:[["app-vertical-bar-chart"]],inputs:{title:"title",comparedConditions:"comparedConditions",annotationData:"annotationData"},standalone:!0,features:[y],decls:6,vars:4,consts:[[2,"display","flex","flex-direction","column","gap","10px"],["mat-raised-button","",3,"click"],[2,"max-width","calc(100vw - 500px)","overflow","auto"],[3,"data","layout","updateOnlyWithRevision","revision"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div")(2,"button",1),S("click",function(){return n.toggleOtherConditions()}),c(3,"Other Conditions"),r()(),o(4,"div",2),_(5,"plotly-plot",3),r()()),i&2&&(s(5),p("data",n.graphData)("layout",n.graphLayout)("updateOnlyWithRevision",!0)("revision",n.revision))},dependencies:[ut,ue,Yt]})}}return e})();var mi=(e,a)=>[e,a];function pi(e,a){if(e&1&&_(0,"app-vertical-bar-chart",1),e&2){let t=h();p("title",t.searchResult.condition_A+"-"+t.searchResult.condition_B+" "+t.searchResult.gene_name+"("+t.searchResult.primary_id+")")("comparedConditions",Lt(3,mi,t.searchResult.condition_A,t.searchResult.condition_B))("annotationData",t.searchResult.searched_data)}}var be=(()=>{class e{set searchResult(t){this._searchResult=t}get searchResult(){return this._searchResult}constructor(t,i){this.web=t,this.fb=i,this._searchResult=void 0,this.relatedResultSearched=void 0,this.relatedResultCopyNumber=void 0,this.analysisGroup=void 0,this.analysisGroupDF=void 0,this.analysisGroupDFColumns=[],this.analysisGroupSearched=void 0,this.analysisGroupSearchedColumns=[],this.sampleAnnotations=void 0,this.comparisonMatrix=void 0}getSAIndex(t){return this.analysisGroupSearchedColumns?this.analysisGroupSearchedColumns.indexOf(t):-1}getCMIndex(t){return this.analysisGroupDFColumns?this.analysisGroupDFColumns.indexOf(t):-1}static{this.\u0275fac=function(i){return new(i||e)(m(B),m(Q))}}static{this.\u0275cmp=b({type:e,selectors:[["app-selected-result-view"]],inputs:{searchResult:"searchResult"},standalone:!0,features:[y],decls:2,vars:1,consts:[[2,"display","flex","flex-direction","row","justify-content","center"],[3,"title","comparedConditions","annotationData"]],template:function(i,n){i&1&&(o(0,"div",0),d(1,pi,1,6,"app-vertical-bar-chart",1),r()),i&2&&(s(),f(n.searchResult.searched_data?1:-1))},dependencies:[ve]})}}return e})();function ui(e,a){if(e&1&&(o(0,"div"),_(1,"app-selected-result-view",8),r()),e&2){let t=h();s(),p("searchResult",t.selectedSearchResult)}}function _i(e,a){if(e&1){let t=M();o(0,"app-search-result-list",9),S("selected",function(n){v(t);let l=h();return w(l.handleSelectedResult(n))})("sortChange",function(n){v(t);let l=h();return w(l.handleSort(n))}),r(),o(1,"mat-paginator",10,0),S("page",function(n){v(t);let l=h();return w(l.handlePageEvent(n))}),c(3,"> "),r()}if(e&2){let t=h();p("searchResultQuery",t.searchResultQuery),s(),p("length",t.searchResultQuery.count)("pageSize",t.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",t.pageIndex)}}var ye=(()=>{class e{set searchSession(t){this._searchSession=t,this.titleService.setTitle(`Search - ${t.search_term}`),this.searchResultQuery=void 0,t&&!t.failed&&this.web.getSearchResults(t.id,this.pageSize,0,"df",this.currentSort?.active,this.currentSort?.direction).subscribe(i=>{this.searchResultQuery=i})}get searchSession(){return this._searchSession}constructor(t,i,n,l,C){this.titleService=t,this.web=i,this.fb=n,this.ws=l,this.sb=C,this.baseUrl=Zt.baseURL,this._searchSession=void 0,this.searchResultQuery=void 0,this.pageSize=10,this.pageIndex=0,this.selectedSearchResult=void 0,this.form=this.fb.group({searchTerm:new H(""),log2_fc:new H(0),log10_p:new H(0)}),this.currentSort=void 0,this.form.valueChanges.subscribe(x=>{this.searchSession.failed||this.web.getSearchResults(this.searchSession.id,this.pageSize,0,"df",this.currentSort?.active,this.currentSort?.direction,x.searchTerm,x.log2_fc,x.log10_p).subscribe(L=>{this.searchResultQuery=L})}),this.ws.searchWSConnection?.subscribe(x=>{if(x&&x.type==="export_status"&&this.web.cinderInstanceID===x.instance_id)switch(x.status){case"error":break;case"started":this.sb.open("Export started","Dismiss",{duration:2e3});break;case"in_progress":break;case"complete":this.sb.open("Export complete","Dismiss",{duration:2e3});let L=`${this.baseUrl}/api/search/download_temp_file/?token=${x.file}`;window.open(L,"_blank");break}})}handlePageEvent(t){let i=t.pageIndex*t.pageSize;this.pageSize=t.pageSize,this.web.getSearchResults(this.searchSession.id,this.pageSize,i,"df",this.currentSort?.active,this.currentSort?.direction,this.form.controls.searchTerm.value,this.form.controls.log2_fc.value,this.form.controls.log10_p.value).subscribe(n=>{this.searchResultQuery=n})}handleSelectedResult(t){t&&(this.selectedSearchResult=t)}handleSort(t){this.currentSort=t,this.searchResultQuery&&this.web.getSearchResults(this.searchSession.id,this.pageSize,0,"df",t.active,t.direction,this.form.controls.searchTerm.value,this.form.controls.log2_fc.value,this.form.controls.log10_p.value).subscribe(i=>{this.searchResultQuery=i})}exportData(){this.web.exportSearchData(this.searchSession.id,this.form.controls.searchTerm.value,this.form.controls.log2_fc.value,this.form.controls.log10_p.value,this.web.searchSessionID).subscribe(t=>{})}static{this.\u0275fac=function(i){return new(i||e)(m(Qt),m(B),m(Q),m(ee),m(te))}}static{this.\u0275cmp=b({type:e,selectors:[["app-search-session-view"]],inputs:{searchSession:"searchSession"},standalone:!0,features:[y],decls:20,vars:3,consts:[["paginator",""],[2,"display","flex","flex-direction","row","justify-content","center"],[2,"width","100%","padding","50px"],[2,"display","flex","flex-direction","row","gap","10px","flex-wrap","wrap",3,"formGroup"],["matInput","","formControlName","searchTerm","type","search","placeholder","Search Term"],["matInput","","type","number","formControlName","log2_fc"],["matInput","","type","number","formControlName","log10_p"],["mat-icon-button","","type","button",3,"click"],[3,"searchResult"],[3,"selected","sortChange","searchResultQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"]],template:function(i,n){i&1&&(o(0,"div",1)(1,"div",2),d(2,ui,2,1,"div"),o(3,"form",3)(4,"mat-form-field"),_(5,"input",4),o(6,"mat-label"),c(7,"Filter Results Term"),r()(),o(8,"mat-form-field"),_(9,"input",5),o(10,"mat-label"),c(11,"Filter By Log2 Fold Change"),r()(),o(12,"mat-form-field"),_(13,"input",6),o(14,"mat-label"),c(15,"Filter By log10(P-Value)"),r()(),o(16,"button",7),S("click",function(){return n.exportData()}),o(17,"mat-icon"),c(18,"download"),r()()(),d(19,_i,4,6),r()()),i&2&&(s(2),f(n.selectedSearchResult?2:-1),s(),p("formGroup",n.form),s(16),f(n.searchResultQuery?19:-1))},dependencies:[ge,rt,et,X,q,qt,K,J,Z,tt,nt,it,be,ot,W,U],styles:[".selected-result[_ngcontent-%COMP%]{width:500px;border-left:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 148px)}"]})}}return e})();function fi(e,a){if(e&1){let t=M();o(0,"div",14)(1,"app-search-session-list",15),S("searchSessionSelected",function(n){v(t);let l=h(3);return w(l.onSearchSessionSelected(n))}),r()(),o(2,"mat-paginator",16,0),S("page",function(n){v(t);let l=h(3);return w(l.handlePageEvent(n))}),r()}if(e&2){let t=h(3);s(),p("searchSessionQuery",t.searchSessionQuery),s(),p("length",t.searchSessionQuery.count)("pageSize",t.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",t.pageIndex)}}function Si(e,a){e&1&&(o(0,"p"),c(1,"No search sessions found."),r())}function Ci(e,a){if(e&1&&d(0,fi,4,6)(1,Si,2,0,"p"),e&2){let t=h(2);f(t.searchSessionQuery.count>0?0:1)}}function gi(e,a){if(e&1&&(o(0,"div",2)(1,"mat-toolbar")(2,"mat-toolbar-row")(3,"span"),c(4,"Search Session"),r()()(),o(5,"div",10)(6,"form",11)(7,"mat-form-field",12),_(8,"input",13),o(9,"mat-label"),c(10,"Find Search Sessions"),r()()(),d(11,Ci,2,1),r()()),e&2){let t=h();s(6),p("formGroup",t.form),s(5),f(t.searchSessionQuery?11:-1)}}function vi(e,a){if(e&1&&(o(0,"a",5)(1,"span",17)(2,"b"),c(3),r()()()),e&2){let t=h();Y("href","/#/search-session/",t.searchSession.id,"",G),s(3),k(t.searchSession.search_term)}}function wi(e,a){e&1&&c(0," Select Search Session ")}function xi(e,a){if(e&1){let t=M();o(0,"button",18),S("click",function(){v(t);let n=h();return w(n.deleteSearchSession(n.searchSession.id))}),o(1,"mat-icon"),c(2,"delete"),r()()}}function bi(e,a){if(e&1&&_(0,"app-search-session-view",9),e&2){let t=h();p("searchSession",t.searchSession)}}var ft=(()=>{class e{set searchID(t){t&&(this._searchID=t,this.web.getSearchSession(t).subscribe(i=>{this._searchSession=i}))}get searchID(){return this._searchID}set searchSession(t){this._searchSession=t}get searchSession(){return this._searchSession}constructor(t,i,n,l){this.router=t,this.web=i,this.fb=n,this.accounts=l,this.sidebarOpen=!0,this._searchSession=void 0,this._searchID=0,this.searchSessionQuery=void 0,this.pageSize=10,this.pageIndex=0,this.form=this.fb.group({search:new H("")}),this.web.getSearchSessions(void 0,this.pageSize,0,void 0,this.accounts.loggedIn,this.web.searchSessionID).subscribe(C=>{this.searchSessionQuery=C})}handlePageEvent(t){this.pageSize=t.pageSize;let i=t.pageIndex*t.pageSize;this.form.controls.search.value?this.web.getSearchSessions(void 0,this.pageSize,i,this.form.controls.search.value,this.accounts.loggedIn,this.web.searchSessionID).subscribe(n=>{this.searchSessionQuery=n}):this.web.getSearchSessions(void 0,this.pageSize,i,void 0,this.accounts.loggedIn,this.web.searchSessionID).subscribe(n=>{this.searchSessionQuery=n})}deleteSearchSession(t){this.web.deleteSearchSession(t).subscribe(i=>{this.searchSession=void 0,this.searchSessionQuery?.results?.splice(this.searchSessionQuery.results.findIndex(n=>n.id===t),1)})}toggleSidePanel(){this.sidebarOpen=!this.sidebarOpen}onSearchSessionSelected(t){this.router.navigate(["/search-session",t.id])}static{this.\u0275fac=function(i){return new(i||e)(m(Bt),m(B),m(Q),m(at))}}static{this.\u0275cmp=b({type:e,selectors:[["app-search-session"]],inputs:{searchID:"searchID"},standalone:!0,features:[y],decls:15,vars:4,consts:[["paginator",""],[2,"display","flex","flex-direction","row"],[1,"search-session-side-nav"],[1,"search-session-main-content"],["mat-icon-button","",3,"click"],[3,"href"],[1,"spacer"],["mat-icon-button","","color","accent"],[2,"height","calc(100vh - 64px*2 - 20px)","overflow","auto"],[3,"searchSession"],[2,"display","flex","flex-direction","column","padding","5px"],[3,"formGroup"],[2,"width","100%"],["matInput","","formControlName","search","type","search","placeholder","Find Search Session"],[2,"height","calc(100vh - 64px*4 - 20px)","overflow","auto"],[3,"searchSessionSelected","searchSessionQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],[2,"color","#ba0000"],["mat-icon-button","","color","accent",3,"click"]],template:function(i,n){i&1&&(o(0,"div",1),d(1,gi,12,2,"div",2),o(2,"div",3)(3,"mat-toolbar")(4,"mat-toolbar-row")(5,"button",4),S("click",function(){return n.toggleSidePanel()}),o(6,"mat-icon"),c(7,"menu"),r()(),o(8,"div"),d(9,vi,4,3,"a",5)(10,wi,1,0),r(),_(11,"div",6),d(12,xi,3,0,"button",7),r()(),o(13,"div",8),d(14,bi,1,1,"app-search-session-view",9),r()()()),i&2&&(s(),f(n.sidebarOpen?1:-1),s(8),f(n.searchSession?9:10),s(3),f(n.searchSession?12:-1),s(2),f(n.searchSession?14:-1))},dependencies:[nt,ot,it,et,X,q,K,J,Z,tt,U,W,rt,ne,ie,fe,ye],styles:[".search-session-side-nav[_ngcontent-%COMP%]{width:300px;border-right:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 64px)}.search-session-main-content[_ngcontent-%COMP%]{flex:1}"]})}}return e})();var yi=[{path:"",component:ft},{path:":searchID",component:ft}],Jn=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=dt({type:e})}static{this.\u0275inj=lt({imports:[Ht,Nt.forChild(yi)]})}}return e})();export{Jn as SearchSessionModule};
