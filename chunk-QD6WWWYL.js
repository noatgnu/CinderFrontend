import{b as re,c as ae,d as se,e as ce,f as le,g as de,h as he,i as me,j as pe,k as ue}from"./chunk-XCDBAKBG.js";import"./chunk-VMYBXSUU.js";import"./chunk-BQM3TBAQ.js";import"./chunk-E7WCFS4V.js";import{c as Ie,d as _e,e as _t}from"./chunk-KDI5MM5D.js";import{a as fe}from"./chunk-OUGMZIKZ.js";import"./chunk-MRHYXTUV.js";import{a as ee,b as ie}from"./chunk-JR5KVI6S.js";import{a as ne,b as oe}from"./chunk-CWXEO6BC.js";import{a as Jt,f as Xt,h as Zt,j as at}from"./chunk-MGCBTEWI.js";import{Aa as et,Ba as N,Da as it,Fa as nt,Ia as ot,Ja as rt,Ka as te,La as B,Ma as st,O as W,P as Ut,Q as q,na as K,p as jt,ra as J,sa as X,ua as H,v as $t,wa as Z,xa as Kt,y as Gt,z as Yt,za as tt}from"./chunk-6VZ6DTTY.js";import{h as Nt,l as Bt,p as zt}from"./chunk-KCCSOALX.js";import{c as P,d as L,g as _,h as R,i as G,j as A,k as Wt,l as qt}from"./chunk-4N6BO7AP.js";import{Aa as w,Ab as pt,Ba as x,Bb as p,Db as ut,Dc as Ot,Hb as S,Ia as V,Ic as $,Jb as Dt,K as gt,Kb as Rt,La as yt,Lb as a,Mb as s,Nb as f,Ob as I,Pb as M,Rb as T,Ub as C,Wb as h,Xb as It,Yb as Mt,Zc as Pt,_b as U,ac as Tt,bb as Y,bc as Et,cc as At,dd as Qt,e as Re,ed as Ht,fb as c,gb as m,gc as l,hc as O,ia as vt,ic as E,ja as dt,la as wt,n as lt,oc as D,q as Ct,qc as Lt,rc as Ft,sa as y,sc as kt,ta as ht,ua as xt,ub as mt,uc as Vt,xb as d,za as bt}from"./chunk-QNTGE4BG.js";var Me=(t,i)=>i.id;function Te(t,i){if(t&1){let o=T();a(0,"mat-list-option",1),C("click",function(){let n=w(o).$implicit,r=h(2);return x(r.searchSessionSelected.emit(n))}),a(1,"div")(2,"div")(3,"b"),l(4),s()(),a(5,"small"),l(6),kt(7,"date"),s()()(),f(8,"mat-divider")}if(t&2){let o=i.$implicit;p("value",o)("disabled",o.failed),c(4),O(o.search_term),c(2),O(Vt(7,4,o.created_at,"short"))}}function Ee(t,i){if(t&1&&(a(0,"mat-selection-list",0),Dt(1,Te,9,7,null,null,Me),s()),t&2){let o=h();p("multiple",!1),c(),Rt(o.searchSessionQuery.results)}}var Se=(()=>{let i=class i{set searchSessionQuery(e){this._searchSessionQuery=e}get searchSessionQuery(){return this._searchSessionQuery}constructor(){this._searchSessionQuery=void 0,this.searchSessionSelected=new V}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=y({type:i,selectors:[["app-search-session-list"]],inputs:{searchSessionQuery:"searchSessionQuery"},outputs:{searchSessionSelected:"searchSessionSelected"},standalone:!0,features:[D],decls:1,vars:1,consts:[[3,"multiple"],[3,"click","value","disabled"]],template:function(n,r){n&1&&d(0,Ee,3,1,"mat-selection-list",0),n&2&&S(r.searchSessionQuery?0:-1)},dependencies:[Jt,Xt,Zt,Qt]});let t=i;return t})();var Ae=["mat-sort-header",""],Le=["*"];function Fe(t,i){if(t&1){let o=T();a(0,"div",2),C("@arrowPosition.start",function(){w(o);let n=h();return x(n._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){w(o);let n=h();return x(n._disableViewStateAnimation=!1)}),f(1,"div",3),a(2,"div",4),f(3,"div",5)(4,"div",6)(5,"div",7),s()()}if(t&2){let o=h();p("@arrowOpacity",o._getArrowViewState())("@arrowPosition",o._getArrowViewState())("@allowChildren",o._getArrowDirectionState()),c(2),p("@indicator",o._getArrowDirectionState()),c(),p("@leftPointer",o._getArrowDirectionState()),c(),p("@rightPointer",o._getArrowDirectionState())}}var Ce=new wt("MAT_SORT_DEFAULT_OPTIONS"),ft=(()=>{let i=class i{get direction(){return this._direction}set direction(e){this._direction=e}constructor(e){this._defaultOptions=e,this._initializedStream=new Ct(1),this.sortables=new Map,this._stateChanges=new lt,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new V,this.initialized=this._initializedStream}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let n=e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,r=ke(e.start||this.start,n),u=r.indexOf(this.direction)+1;return u>=r.length&&(u=0),r[u]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}};i.\u0275fac=function(n){return new(n||i)(m(Ce,8))},i.\u0275dir=xt({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",$],disabled:[2,"matSortDisabled","disabled",$]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[mt,bt]});let t=i;return t})();function ke(t,i){let o=["asc","desc"];return t=="desc"&&o.reverse(),i||o.push(""),o}var k=Yt.ENTERING+" "+Gt.STANDARD_CURVE,z={indicator:P("indicator",[R("active-asc, asc",_({transform:"translateY(0px)"})),R("active-desc, desc",_({transform:"translateY(10px)"})),A("active-asc <=> active-desc",L(k))]),leftPointer:P("leftPointer",[R("active-asc, asc",_({transform:"rotate(-45deg)"})),R("active-desc, desc",_({transform:"rotate(45deg)"})),A("active-asc <=> active-desc",L(k))]),rightPointer:P("rightPointer",[R("active-asc, asc",_({transform:"rotate(45deg)"})),R("active-desc, desc",_({transform:"rotate(-45deg)"})),A("active-asc <=> active-desc",L(k))]),arrowOpacity:P("arrowOpacity",[R("desc-to-active, asc-to-active, active",_({opacity:1})),R("desc-to-hint, asc-to-hint, hint",_({opacity:.54})),R("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",_({opacity:0})),A("* => asc, * => desc, * => active, * => hint, * => void",L("0ms")),A("* <=> *",L(k))]),arrowPosition:P("arrowPosition",[A("* => desc-to-hint, * => desc-to-active",L(k,G([_({transform:"translateY(-25%)"}),_({transform:"translateY(0)"})]))),A("* => hint-to-desc, * => active-to-desc",L(k,G([_({transform:"translateY(0)"}),_({transform:"translateY(25%)"})]))),A("* => asc-to-hint, * => asc-to-active",L(k,G([_({transform:"translateY(25%)"}),_({transform:"translateY(0)"})]))),A("* => hint-to-asc, * => active-to-asc",L(k,G([_({transform:"translateY(0)"}),_({transform:"translateY(-25%)"})]))),R("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",_({transform:"translateY(0)"})),R("hint-to-desc, active-to-desc, desc",_({transform:"translateY(-25%)"})),R("hint-to-asc, active-to-asc, asc",_({transform:"translateY(25%)"}))]),allowChildren:P("allowChildren",[A("* <=> *",[qt("@*",Wt(),{optional:!0})])])},Ve=(()=>{let i=class i{constructor(){this.changes=new lt}};i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=vt({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();var ge=(()=>{let i=class i{get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}constructor(e,n,r,u,g,b,F,j){this._intl=e,this._changeDetectorRef=n,this._sort=r,this._columnDef=u,this._focusMonitor=g,this._elementRef=b,this._ariaDescriber=F,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this.disabled=!1,this._sortActionDescription="Sort",j?.arrowPosition&&(this.arrowPosition=j?.arrowPosition),this._handleStateChanges()}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let n=!!e;n!==this._showIndicatorHint&&(this._setIndicatorHintVisible(n),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._showIndicatorHint?this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"hint"}):this._setAnimationTransitionState({fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(e.keyCode===32||e.keyCode===13)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&(this._sort.direction==="asc"||this._sort.direction==="desc")}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){let e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?this._sort.direction=="asc"?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=gt(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&this._viewState.toState==="active"&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}};i.\u0275fac=function(n){return new(n||i)(m(Ve),m(Ot),m(ft,8),m("MAT_SORT_HEADER_COLUMN_DEF",8),m($t),m(yt),m(jt,8),m(Ce,8))},i.\u0275cmp=y({type:i,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(n,r){n&1&&C("click",function(){return r._handleClick()})("keydown",function(g){return r._handleKeydown(g)})("mouseenter",function(){return r._setIndicatorHintVisible(!0)})("mouseleave",function(){return r._setIndicatorHintVisible(!1)}),n&2&&(pt("aria-sort",r._getAriaSortAttribute()),ut("mat-sort-header-disabled",r._isDisabled()))},inputs:{id:[0,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[2,"disabled","disabled",$],sortActionDescription:"sortActionDescription",disableClear:[2,"disableClear","disableClear",$]},exportAs:["matSortHeader"],standalone:!0,features:[mt,D],attrs:Ae,ngContentSelectors:Le,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(n,r){n&1&&(It(),a(0,"div",0)(1,"div",1),Mt(2),s(),d(3,Fe,6,6,"div",2),s()),n&2&&(ut("mat-sort-header-sorted",r._isSorted())("mat-sort-header-position-before",r.arrowPosition==="before"),pt("tabindex",r._isDisabled()?null:0)("role",r._isDisabled()?null:"button"),c(3),S(r._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;color:var(--mat-sort-arrow-color, var(--mat-app-on-surface));opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[z.indicator,z.leftPointer,z.rightPointer,z.arrowOpacity,z.arrowPosition,z.allowChildren]},changeDetection:0});let t=i;return t})();var Oe=["table"],Pe=t=>({"highlighted-row":t});function Qe(t,i){t&1&&(a(0,"div",1)(1,"h2"),l(2,"No results found"),s()())}function He(t,i){t&1&&(a(0,"th",20),l(1," Primary ID "),s())}function Ne(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.primary_id," ")}}function Be(t,i){t&1&&(a(0,"th",20),l(1," UniProt Accession ID "),s())}function ze(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.uniprot_id," ")}}function je(t,i){t&1&&(a(0,"th",20),l(1," Gene name "),s())}function $e(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.gene_name," ")}}function Ge(t,i){t&1&&(a(0,"th",22),l(1," Log2 FC "),s())}function Ye(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.log2_fc," ")}}function Ue(t,i){t&1&&(a(0,"th",22),l(1," -Log10(P-Value) "),s())}function We(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.log10_p," ")}}function qe(t,i){t&1&&(a(0,"th",20),l(1," Comparison "),s())}function Ke(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.comparison_label," ")}}function Je(t,i){t&1&&(a(0,"th",20),l(1," Search term "),s())}function Xe(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.search_term," ")}}function Ze(t,i){t&1&&(a(0,"th",20),l(1," Condition A "),s())}function ti(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.condition_A,"")}}function ei(t,i){t&1&&(a(0,"th",20),l(1," Condition B "),s())}function ii(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.condition_B,"")}}function ni(t,i){t&1&&(a(0,"th",20),l(1," File "),s())}function oi(t,i){if(t&1&&(a(0,"td",21),l(1),s()),t&2){let o=i.$implicit;c(),E(" ",o.file.name," ")}}function ri(t,i){t&1&&(a(0,"th",20),l(1," Analysis Group "),s())}function ai(t,i){if(t&1&&(a(0,"td",21)(1,"a",23),l(2),s()()),t&2){let o=i.$implicit;c(),U("href","/#/analysis-group/",o.analysis_group.id,"",Y),c(),O(o.analysis_group.name)}}function si(t,i){t&1&&f(0,"tr",24)}function ci(t,i){if(t&1){let o=T();a(0,"tr",25),C("click",function(){let n=w(o).$implicit,r=h(3);return x(r.handleSelection(n))}),s()}if(t&2){let o=i.$implicit,e=h(3);p("ngClass",Lt(1,Pe,e.selectedRow===o))}}function li(t,i){if(t&1){let o=T();a(0,"table",3,0),C("matSortChange",function(n){w(o);let r=h(2);return x(r.handleSortChange(n))}),I(2,4),d(3,He,2,0,"th",5)(4,Ne,2,1,"td",6),M(),I(5,7),d(6,Be,2,0,"th",5)(7,ze,2,1,"td",6),M(),I(8,8),d(9,je,2,0,"th",5)(10,$e,2,1,"td",6),M(),I(11,9),d(12,Ge,2,0,"th",10)(13,Ye,2,1,"td",6),M(),I(14,11),d(15,Ue,2,0,"th",10)(16,We,2,1,"td",6),M(),I(17,12),d(18,qe,2,0,"th",5)(19,Ke,2,1,"td",6),M(),I(20,13),d(21,Je,2,0,"th",5)(22,Xe,2,1,"td",6),M(),I(23,14),d(24,Ze,2,0,"th",5)(25,ti,2,1,"td",6),M(),I(26,15),d(27,ei,2,0,"th",5)(28,ii,2,1,"td",6),M(),I(29,16),d(30,ni,2,0,"th",5)(31,oi,2,1,"td",6),M(),I(32,17),d(33,ri,2,0,"th",5)(34,ai,3,3,"td",6),M(),d(35,si,1,0,"tr",18)(36,ci,1,3,"tr",19),s()}if(t&2){let o=h(2);p("dataSource",o.searchResultQuery.results),c(35),p("matHeaderRowDef",o.displayedColumns),c(),p("matRowDefColumns",o.displayedColumns)}}function di(t,i){if(t&1&&d(0,Qe,3,0,"div",1)(1,li,37,3,"table",2),t&2){let o=h();S(o.searchResultQuery.results.length===0?0:1)}}var ve=(()=>{let i=class i{set searchResultQuery(e){this._searchResultQuery=e,this.table&&this.table.renderRows()}get searchResultQuery(){return this._searchResultQuery}constructor(){this.displayedColumns=["primary_id","gene_name","uniprot_id","search_term","condition_A","condition_B","log2_fc","log10_p","file","comparison_label","analysis_group"],this._searchResultQuery=void 0,this.selectedRow=void 0,this.selected=new V,this.sortChange=new V}handleSelection(e){this.selected.emit(e),this.selectedRow=e}handleSortChange(e){this.sortChange.emit(e)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=y({type:i,selectors:[["app-search-result-list"]],viewQuery:function(n,r){if(n&1&&Tt(Oe,5),n&2){let u;Et(u=At())&&(r.table=u.first)}},inputs:{searchResultQuery:"searchResultQuery"},outputs:{selected:"selected",sortChange:"sortChange"},standalone:!0,features:[D],decls:1,vars:1,consts:[["table",""],[1,"no-results"],["mat-table","","matSort","",3,"dataSource"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","primary_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uniprot_id"],["matColumnDef","gene_name"],["matColumnDef","log2_fc"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","log10_p"],["matColumnDef","comparison_label"],["matColumnDef","search_term"],["matColumnDef","condition_A"],["matColumnDef","condition_B"],["matColumnDef","file"],["matColumnDef","analysis_group"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["target","_blank",3,"href"],["mat-header-row",""],["mat-row","",3,"click","ngClass"]],template:function(n,r){n&1&&d(0,di,2,1),n&2&&S(r.searchResultQuery?0:-1)},dependencies:[re,ce,le,ae,de,se,pe,ue,me,he,ft,ge,Pt],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.highlighted-row[_ngcontent-%COMP%]{background-color:#009dff}"]});let t=i;return t})();var mi=Re(Ie());_t.plotlyjs=mi;var we=(()=>{let i=class i{set annotationData(e){console.log(e),this._annotationData=e,this.currentColor=0,this.drawVerticalBarChart()}get annotationData(){return this._annotationData}constructor(e,n){this.graph=e,this.accounts=n,this.showOtherConditions=!1,this.title="",this.comparedConditions=[],this._annotationData=[],this.graphData=[],this.graphLayout={xaxis:{title:"Sample",tickfont:{size:17,color:"black"},tickvals:[],ticktext:[]},yaxis:{title:"Value",tickfont:{size:17,color:"black"}},margin:{r:40,l:100,b:120,t:100},width:1e3},this.barSize=50,this.revision=0,this.currentColor=0,this.colorMap={},this.graph.redrawTrigger.subscribe(()=>{this.drawVerticalBarChart()})}drawVerticalBarChart(){let e=document.getElementsByTagName("body")[0],r=window.getComputedStyle(e).backgroundColor;this.accounts.userAccount.darkMode?(this.graphLayout.plot_bgcolor=r,this.graphLayout.paper_bgcolor=r,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white"):(this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14});let u=this.annotationData,g={},b=[],F=[];for(let v of u)g[v.Condition]||(this.colorMap[v.Condition]||(this.colorMap[v.Condition]=this.graph.defaultColorList[this.currentColor]),g[v.Condition]={x:[],y:[],type:"bar",marker:{color:this.colorMap[v.Condition]},showlegend:!1,name:v.Condition},this.currentColor+=1,this.currentColor>=this.graph.defaultColorList.length&&(this.currentColor=0)),g[v.Condition].y.push(v.Value),g[v.Condition].x.push(v.Sample);let j=[],ct=0;for(let v in g)!this.showOtherConditions&&this.comparedConditions.length>0&&!this.comparedConditions.includes(v)||(ct=ct+g[v].x.length,F.push(g[v].x[Math.round(g[v].x.length/2)-1]),b.push(v),j.push(g[v]));this.graphData=j,this.graphLayout.xaxis.tickvals=F,this.graphLayout.xaxis.ticktext=b,this.title&&(this.graphLayout.title=this.title),this.graphLayout.width=this.graphLayout.margin.l+this.graphLayout.margin.r+this.barSize*ct,this.revision+=1}toggleOtherConditions(){this.showOtherConditions=!this.showOtherConditions,this.drawVerticalBarChart()}};i.\u0275fac=function(n){return new(n||i)(m(fe),m(st))},i.\u0275cmp=y({type:i,selectors:[["app-vertical-bar-chart"]],inputs:{title:"title",comparedConditions:"comparedConditions",annotationData:"annotationData"},standalone:!0,features:[D],decls:6,vars:4,consts:[[2,"display","flex","flex-direction","column","gap","10px"],["mat-raised-button","",3,"click"],[2,"max-width","calc(100vw - 500px)","overflow","auto"],[3,"data","layout","updateOnlyWithRevision","revision"]],template:function(n,r){n&1&&(a(0,"div",0)(1,"div")(2,"button",1),C("click",function(){return r.toggleOtherConditions()}),l(3,"Other Conditions"),s()(),a(4,"div",2),f(5,"plotly-plot",3),s()()),n&2&&(c(5),p("data",r.graphData)("layout",r.graphLayout)("updateOnlyWithRevision",!0)("revision",r.revision))},dependencies:[_t,_e,Ut]});let t=i;return t})();var pi=(t,i)=>[t,i];function ui(t,i){if(t&1&&f(0,"app-vertical-bar-chart",1),t&2){let o=h();p("title",o.searchResult.condition_A+"-"+o.searchResult.condition_B+" "+o.searchResult.gene_name+"("+o.searchResult.primary_id+")")("comparedConditions",Ft(3,pi,o.searchResult.condition_A,o.searchResult.condition_B))("annotationData",o.searchResult.searched_data)}}var ye=(()=>{let i=class i{set searchResult(e){this._searchResult=e}get searchResult(){return this._searchResult}constructor(e,n){this.web=e,this.fb=n,this._searchResult=void 0,this.relatedResultSearched=void 0,this.relatedResultCopyNumber=void 0,this.analysisGroup=void 0,this.analysisGroupDF=void 0,this.analysisGroupDFColumns=[],this.analysisGroupSearched=void 0,this.analysisGroupSearchedColumns=[],this.sampleAnnotations=void 0,this.comparisonMatrix=void 0}getSAIndex(e){return this.analysisGroupSearchedColumns?this.analysisGroupSearchedColumns.indexOf(e):-1}getCMIndex(e){return this.analysisGroupDFColumns?this.analysisGroupDFColumns.indexOf(e):-1}};i.\u0275fac=function(n){return new(n||i)(m(B),m(N))},i.\u0275cmp=y({type:i,selectors:[["app-selected-result-view"]],inputs:{searchResult:"searchResult"},standalone:!0,features:[D],decls:2,vars:1,consts:[[2,"display","flex","flex-direction","row","justify-content","center"],[3,"title","comparedConditions","annotationData"]],template:function(n,r){n&1&&(a(0,"div",0),d(1,ui,1,6,"app-vertical-bar-chart",1),s()),n&2&&(c(),S(r.searchResult.searched_data?1:-1))},dependencies:[we]});let t=i;return t})();function _i(t,i){if(t&1&&(a(0,"div"),f(1,"app-selected-result-view",8),s()),t&2){let o=h();c(),p("searchResult",o.selectedSearchResult)}}function fi(t,i){if(t&1){let o=T();a(0,"app-search-result-list",9),C("selected",function(n){w(o);let r=h();return x(r.handleSelectedResult(n))})("sortChange",function(n){w(o);let r=h();return x(r.handleSort(n))}),s(),a(1,"mat-paginator",10,0),C("page",function(n){w(o);let r=h();return x(r.handlePageEvent(n))}),l(3,"> "),s()}if(t&2){let o=h();p("searchResultQuery",o.searchResultQuery),c(),p("length",o.searchResultQuery.count)("pageSize",o.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",o.pageIndex)}}var De=(()=>{let i=class i{set searchSession(e){this._searchSession=e,this.titleService.setTitle(`Search - ${e.search_term}`),this.searchResultQuery=void 0,e&&!e.failed&&this.web.getSearchResults(e.id,this.pageSize,0,"df",this.currentSort?.active,this.currentSort?.direction).subscribe(n=>{this.searchResultQuery=n})}get searchSession(){return this._searchSession}constructor(e,n,r,u,g){this.titleService=e,this.web=n,this.fb=r,this.ws=u,this.sb=g,this.baseUrl=te.baseURL,this._searchSession=void 0,this.searchResultQuery=void 0,this.pageSize=10,this.pageIndex=0,this.selectedSearchResult=void 0,this.form=this.fb.group({searchTerm:new H(""),log2_fc:new H(0),log10_p:new H(0)}),this.currentSort=void 0,this.form.valueChanges.subscribe(b=>{this.searchSession.failed||this.web.getSearchResults(this.searchSession.id,this.pageSize,0,"df",this.currentSort?.active,this.currentSort?.direction,b.searchTerm,b.log2_fc,b.log10_p).subscribe(F=>{this.searchResultQuery=F})}),this.ws.searchWSConnection?.subscribe(b=>{if(b&&b.type==="export_status"&&this.web.cinderInstanceID===b.instance_id)switch(b.status){case"error":break;case"started":this.sb.open("Export started","Dismiss",{duration:2e3});break;case"in_progress":break;case"complete":this.sb.open("Export complete","Dismiss",{duration:2e3});let F=`${this.baseUrl}/api/search/download_temp_file/?token=${b.file}`;window.open(F,"_blank");break}})}handlePageEvent(e){let n=e.pageIndex*e.pageSize;this.pageSize=e.pageSize,this.web.getSearchResults(this.searchSession.id,this.pageSize,n,"df",this.currentSort?.active,this.currentSort?.direction,this.form.controls.searchTerm.value,this.form.controls.log2_fc.value,this.form.controls.log10_p.value).subscribe(r=>{this.searchResultQuery=r})}handleSelectedResult(e){e&&(this.selectedSearchResult=e)}handleSort(e){this.currentSort=e,this.searchResultQuery&&this.web.getSearchResults(this.searchSession.id,this.pageSize,0,"df",e.active,e.direction,this.form.controls.searchTerm.value,this.form.controls.log2_fc.value,this.form.controls.log10_p.value).subscribe(n=>{this.searchResultQuery=n})}exportData(){this.web.exportSearchData(this.searchSession.id,this.form.controls.searchTerm.value,this.form.controls.log2_fc.value,this.form.controls.log10_p.value,this.web.searchSessionID).subscribe(e=>{})}};i.\u0275fac=function(n){return new(n||i)(m(Nt),m(B),m(N),m(ie),m(ee))},i.\u0275cmp=y({type:i,selectors:[["app-search-session-view"]],inputs:{searchSession:"searchSession"},standalone:!0,features:[D],decls:20,vars:3,consts:[["paginator",""],[2,"display","flex","flex-direction","row","justify-content","center"],[2,"width","100%","padding","50px"],[2,"display","flex","flex-direction","row","gap","10px","flex-wrap","wrap",3,"formGroup"],["matInput","","formControlName","searchTerm","type","search","placeholder","Search Term"],["matInput","","type","number","formControlName","log2_fc"],["matInput","","type","number","formControlName","log10_p"],["mat-icon-button","","type","button",3,"click"],[3,"searchResult"],[3,"selected","sortChange","searchResultQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"]],template:function(n,r){n&1&&(a(0,"div",1)(1,"div",2),d(2,_i,2,1,"div"),a(3,"form",3)(4,"mat-form-field"),f(5,"input",4),a(6,"mat-label"),l(7,"Filter Results Term"),s()(),a(8,"mat-form-field"),f(9,"input",5),a(10,"mat-label"),l(11,"Filter By Log2 Fold Change"),s()(),a(12,"mat-form-field"),f(13,"input",6),a(14,"mat-label"),l(15,"Filter By log10(P-Value)"),s()(),a(16,"button",7),C("click",function(){return r.exportData()}),a(17,"mat-icon"),l(18,"download"),s()()(),d(19,fi,4,6),s()()),n&2&&(c(2),S(r.selectedSearchResult?2:-1),c(),p("formGroup",r.form),c(16),S(r.searchResultQuery?19:-1))},dependencies:[ve,at,it,Z,K,Kt,J,X,tt,et,ot,nt,ye,rt,q,W],styles:[".selected-result[_ngcontent-%COMP%]{width:500px;border-left:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 148px)}"]});let t=i;return t})();function Si(t,i){if(t&1){let o=T();a(0,"div",14)(1,"app-search-session-list",15),C("searchSessionSelected",function(n){w(o);let r=h(3);return x(r.onSearchSessionSelected(n))}),s()(),a(2,"mat-paginator",16,0),C("page",function(n){w(o);let r=h(3);return x(r.handlePageEvent(n))}),s()}if(t&2){let o=h(3);c(),p("searchSessionQuery",o.searchSessionQuery),c(),p("length",o.searchSessionQuery.count)("pageSize",o.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",o.pageIndex)}}function Ci(t,i){t&1&&(a(0,"p"),l(1,"No search sessions found."),s())}function gi(t,i){if(t&1&&d(0,Si,4,6)(1,Ci,2,0,"p"),t&2){let o=h(2);S(o.searchSessionQuery.count>0?0:1)}}function vi(t,i){if(t&1&&(a(0,"div",2)(1,"mat-toolbar")(2,"mat-toolbar-row")(3,"span"),l(4,"Search Session"),s()()(),a(5,"div",10)(6,"form",11)(7,"mat-form-field",12),f(8,"input",13),a(9,"mat-label"),l(10,"Find Search Sessions"),s()()(),d(11,gi,2,1),s()()),t&2){let o=h();c(6),p("formGroup",o.form),c(5),S(o.searchSessionQuery?11:-1)}}function wi(t,i){if(t&1&&(a(0,"a",5)(1,"span",17)(2,"b"),l(3),s()()()),t&2){let o=h();U("href","/#/search-session/",o.searchSession.id,"",Y),c(3),O(o.searchSession.search_term)}}function xi(t,i){t&1&&l(0," Select Search Session ")}function bi(t,i){if(t&1){let o=T();a(0,"button",18),C("click",function(){w(o);let n=h();return x(n.deleteSearchSession(n.searchSession.id))}),a(1,"mat-icon"),l(2,"delete"),s()()}}function yi(t,i){if(t&1&&f(0,"app-search-session-view",9),t&2){let o=h();p("searchSession",o.searchSession)}}var St=(()=>{let i=class i{set searchID(e){e&&(this._searchID=e,this.web.getSearchSession(e).subscribe(n=>{this._searchSession=n}))}get searchID(){return this._searchID}set searchSession(e){this._searchSession=e}get searchSession(){return this._searchSession}constructor(e,n,r,u){this.router=e,this.web=n,this.fb=r,this.accounts=u,this.sidebarOpen=!0,this._searchSession=void 0,this._searchID=0,this.searchSessionQuery=void 0,this.pageSize=10,this.pageIndex=0,this.form=this.fb.group({search:new H("")}),this.web.getSearchSessions(void 0,this.pageSize,0,void 0,this.accounts.loggedIn,this.web.searchSessionID).subscribe(g=>{this.searchSessionQuery=g})}handlePageEvent(e){this.pageSize=e.pageSize;let n=e.pageIndex*e.pageSize;this.form.controls.search.value?this.web.getSearchSessions(void 0,this.pageSize,n,this.form.controls.search.value,this.accounts.loggedIn,this.web.searchSessionID).subscribe(r=>{this.searchSessionQuery=r}):this.web.getSearchSessions(void 0,this.pageSize,n,void 0,this.accounts.loggedIn,this.web.searchSessionID).subscribe(r=>{this.searchSessionQuery=r})}deleteSearchSession(e){this.web.deleteSearchSession(e).subscribe(n=>{this.searchSession=void 0,this.searchSessionQuery?.results?.splice(this.searchSessionQuery.results.findIndex(r=>r.id===e),1)})}toggleSidePanel(){this.sidebarOpen=!this.sidebarOpen}onSearchSessionSelected(e){this.router.navigate(["/search-session",e.id])}};i.\u0275fac=function(n){return new(n||i)(m(Bt),m(B),m(N),m(st))},i.\u0275cmp=y({type:i,selectors:[["app-search-session"]],inputs:{searchID:"searchID"},standalone:!0,features:[D],decls:15,vars:4,consts:[["paginator",""],[2,"display","flex","flex-direction","row"],[1,"search-session-side-nav"],[1,"search-session-main-content"],["mat-icon-button","",3,"click"],[3,"href"],[1,"spacer"],["mat-icon-button","","color","accent"],[2,"height","calc(100vh - 64px*2 - 20px)","overflow","auto"],[3,"searchSession"],[2,"display","flex","flex-direction","column","padding","5px"],[3,"formGroup"],[2,"width","100%"],["matInput","","formControlName","search","type","search","placeholder","Find Search Session"],[2,"height","calc(100vh - 64px*4 - 20px)","overflow","auto"],[3,"searchSessionSelected","searchSessionQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],[2,"color","#ba0000"],["mat-icon-button","","color","accent",3,"click"]],template:function(n,r){n&1&&(a(0,"div",1),d(1,vi,12,2,"div",2),a(2,"div",3)(3,"mat-toolbar")(4,"mat-toolbar-row")(5,"button",4),C("click",function(){return r.toggleSidePanel()}),a(6,"mat-icon"),l(7,"menu"),s()(),a(8,"div"),d(9,wi,4,3,"a",5)(10,xi,1,0),s(),f(11,"div",6),d(12,bi,3,0,"button",7),s()(),a(13,"div",8),d(14,yi,1,1,"app-search-session-view",9),s()()()),n&2&&(c(),S(r.sidebarOpen?1:-1),c(8),S(r.searchSession?9:10),c(3),S(r.searchSession?12:-1),c(2),S(r.searchSession?14:-1))},dependencies:[ot,rt,nt,it,Z,K,J,X,tt,et,W,q,at,oe,ne,Se,De],styles:[".search-session-side-nav[_ngcontent-%COMP%]{width:300px;border-right:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 64px)}.search-session-main-content[_ngcontent-%COMP%]{flex:1}"]});let t=i;return t})();var Di=[{path:"",component:St},{path:":searchID",component:St}],Xn=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=ht({type:i}),i.\u0275inj=dt({imports:[Ht,zt.forChild(Di)]});let t=i;return t})();export{Xn as SearchSessionModule};
