import{La as d}from"./chunk-RBHTY4FE.js";import{a as u,c as m}from"./chunk-KCCSOALX.js";import{ia as c,n as a,na as l}from"./chunk-QNTGE4BG.js";var S=(()=>{let e=class e{constructor(t){this.http=t,this.token="",this.loggedIn=!1,this.baseURL=d.baseURL,this.username="",this.lastVisited=new Date,this.userAccount={token:"",username:"",darkMode:!1,lastVisited:new Date,currentLabGroup:null},this.triggerLoginSubject=new a,this.is_staff=!1,this.currentUser=null}login(t,s){this.loggedIn=!1;let o=new u;return o.append("Content-Type","application/json"),o.append("Accept","application/json"),this.http.post(`${this.baseURL}/api/token-auth/`,{username:t,password:s},{responseType:"json",observe:"body"})}logout(){this.loggedIn=!1,this.token="",localStorage.removeItem("cinderToken"),localStorage.removeItem("cinderUsername"),localStorage.removeItem("cinderUserAccount"),this.currentUser=null}loadAuthFromStorage(){let t=localStorage.getItem("cinderToken"),s=localStorage.getItem("cinderUsername"),o=localStorage.getItem("cinderLastVisited");t&&s&&(this.userAccount.token=t,this.userAccount.username=s,this.loggedIn=!0,localStorage.removeItem("cinderToken"),localStorage.removeItem("cinderUsername"),localStorage.setItem("cinderUserAccount",JSON.stringify(this.userAccount))),o&&(this.userAccount.lastVisited=new Date(JSON.parse(o)));let i=localStorage.getItem("cinderUserAccount");i&&(this.userAccount=JSON.parse(i),this.userAccount.token!==""&&this.userAccount.username!==""&&(this.loggedIn=!0));let r=document.getElementsByTagName("body")[0];this.userAccount.darkMode?(r.classList.add("dark-theme"),r.classList.remove("light-theme")):(r.classList.remove("dark-theme"),r.classList.add("light-theme"))}saveToStorage(){localStorage.setItem("cinderUserAccount",JSON.stringify(this.userAccount))}};e.\u0275fac=function(s){return new(s||e)(l(m))},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();export{S as a};
