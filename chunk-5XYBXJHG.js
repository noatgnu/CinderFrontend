import{a as ee}from"./chunk-5AFS2SGB.js";import{a as se}from"./chunk-OSO4BYNH.js";import{a as ne}from"./chunk-XNZB4PMY.js";import{a as re,b as ae}from"./chunk-5XMENZPE.js";import{b as te,c as ie,d as oe,h as z}from"./chunk-7RZVIFS7.js";import{F as y,G as Y,H as Z,Z as S,ca as v,da as A,fa as I,ga as V,ia as b,ja as M,la as D,ma as E,na as T,pa as F,ra as G,ua as Q,va as N,xa as k}from"./chunk-O6IC6BXN.js";import{m as X}from"./chunk-ZOIK2NCC.js";import"./chunk-AESYL7IM.js";import{Ab as r,Bb as a,Cb as x,Da as L,Dc as K,Gb as C,Ib as u,Jb as c,Nb as W,Tb as l,Ub as H,Va as O,Vb as J,Xa as p,Xb as P,Ya as h,da as R,ma as w,na as U,pb as f,rb as j,ua as m,va as d,wb as _,yb as $,zb as q}from"./chunk-EU3335TE.js";var fe=(i,o)=>o.id;function _e(i,o){if(i&1&&(r(0,"mat-list-item")(1,"a",12),l(2),a(),x(3,"hr"),a()),i&2){let n=o.$implicit;p(),W("href","/#/analysis-group/",n.id,"",O),p(),H(n.name)}}function he(i,o){if(i&1&&(r(0,"mat-list"),$(1,_e,4,3,"mat-list-item",null,fe),a()),i&2){let n=c(3);p(),q(n.analysisGroupQuery.results)}}function je(i,o){i&1&&(r(0,"p"),l(1,"No analysis groups found."),a())}function ge(i,o){if(i&1){let n=C();r(0,"div",10)(1,"b"),l(2,"Associated Analysis Group"),a(),f(3,he,3,0,"mat-list")(4,je,2,0,"p"),r(5,"mat-paginator",11,0),u("page",function(t){m(n);let s=c(2);return d(s.handlePageChange(t))}),a()()}if(i&2){let n=c(2);p(3),_(n.analysisGroupQuery.results.length>0?3:4),p(2),j("length",n.analysisGroupQuery.count)("pageSize",n.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",n.currentPage)}}function xe(i,o){if(i&1){let n=C();r(0,"form",3),u("ngSubmit",function(){m(n);let t=c();return d(t.updateProject())}),r(1,"mat-form-field",2),x(2,"input",4),r(3,"mat-label"),l(4,"Project Name"),a()(),r(5,"mat-form-field",2),x(6,"textarea",5),r(7,"mat-label"),l(8,"Project Description"),a()(),r(9,"div",6)(10,"button",7),l(11,"Update"),a(),r(12,"button",8),u("click",function(){m(n);let t=c();return d(t.openAnalysisGroupCreateModal())}),r(13,"mat-icon"),l(14,"add"),a(),l(15," Analysis Group"),a(),r(16,"button",9),u("click",function(){m(n);let t=c();return d(t.deleteProject())}),l(17,"Delete"),a()()(),f(18,ge,7,6,"div",10)}if(i&2){let n=c();j("formGroup",n.form),p(18),_(n.analysisGroupQuery?18:-1)}}var le=(()=>{let o=class o{set project(e){this._project=e,e&&(this.form.controls.name.setValue(e.name),this.form.controls.description.setValue(e.description),this.web.getAnalysisGroups(void 0,this.pageSize,0,void 0,e.id).subscribe(t=>{this.analysisGroupQuery=t}))}get project(){return this._project}constructor(e,t,s){this.fb=e,this.web=t,this.dialog=s,this.form=this.fb.group({name:new b("",A.required),description:new b("",A.required)}),this.deleted=new L,this.updated=new L,this.pageSize=10,this.currentPage=0}updateProject(){this.form.invalid||this.web.updateProject(this.project.id,this.form.value.name,this.form.value.description).subscribe(e=>{this.project=e,this.updated.emit(e)})}deleteProject(){this.web.deleteProject(this.project.id).subscribe(()=>{this.project=void 0,this.deleted.emit(!0)})}openAnalysisGroupCreateModal(){let e=this.dialog.open(ne);e.componentInstance.project=this.project,e.afterClosed().subscribe(t=>{t&&window.open(`/#/analysis-group/${t.id}`,"_blank")})}handlePageChange(e){let t=e.pageIndex*e.pageSize;this.currentPage=e.pageIndex,this.web.getAnalysisGroups(void 0,e.pageSize,t,void 0,this.project.id).subscribe(s=>{this.analysisGroupQuery=s})}};o.\u0275fac=function(t){return new(t||o)(h(T),h(k),h(S))},o.\u0275cmp=w({type:o,selectors:[["app-project-view"]],inputs:{project:"project"},outputs:{deleted:"deleted",updated:"updated"},standalone:!0,features:[P],decls:3,vars:1,consts:[["paginator",""],[2,"display","flex","flex-direction","row","justify-content","center","padding","50px"],[2,"width","100%"],[2,"display","flex","flex-direction","column","gap","20px",3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text","placeholder","Project Name"],["matInput","","formControlName","description","placeholder","Project Description"],[2,"display","flex","flex-direction","row","gap","20px"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"],[2,"padding","20px"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],["matListItemTitle","","target","_blank",3,"href"]],template:function(t,s){t&1&&(r(0,"div",1)(1,"div",2),f(2,xe,19,2),a()()),t&2&&(p(2),_(s.project?2:-1))},dependencies:[F,M,v,I,V,D,E,Q,N,G,Y,y,ie,oe,z,te]});let i=o;return i})();function Ce(i,o){if(i&1){let n=C();r(0,"div",11)(1,"app-project-list",12),u("projectSelected",function(t){m(n);let s=c(2);return d(s.handleProjectSelect(t))}),a()(),r(2,"mat-paginator",13,0),u("page",function(t){m(n);let s=c(2);return d(s.handlePageEvent(t))}),a()}if(i&2){let n=c(2);p(),j("projectQuery",n.projectQuery),p(),j("length",n.projectQuery.count)("pageSize",n.limit)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",n.pageIndex)}}function be(i,o){i&1&&(r(0,"p"),l(1,"No projects found."),a())}function we(i,o){if(i&1&&f(0,Ce,4,6)(1,be,2,0,"p"),i&2){let n=c();_(n.projectQuery.count>0?0:1)}}function Pe(i,o){if(i&1&&l(0),i&2){let n=c();J(" ",n.selectedProject.name," ")}}function ye(i,o){i&1&&l(0," Select Project ")}function Se(i,o){if(i&1){let n=C();r(0,"app-project-view",14),u("deleted",function(){m(n);let t=c();return d(t.refreshData())})("updated",function(t){m(n);let s=c();return d(s.handleUpdateData(t))}),a()}if(i&2){let n=c();j("project",n.selectedProject)}}var B=(()=>{let o=class o{set projectID(e){this._projectID=e,e&&this.web.getProject(e).subscribe(t=>{this.selectedProject=t})}get projectID(){return this._projectID}constructor(e,t,s){this.web=e,this.dialog=t,this.fb=s,this.pageIndex=0,this.limit=15,this.offset=0,this.form=this.fb.group({name:new b}),this.web.getProjects(void 0,this.limit,this.offset).subscribe(g=>{this.projectQuery=g}),this.form.controls.name.valueChanges.subscribe(g=>{g&&this.web.getProjects(void 0,this.limit,this.offset,g).subscribe(pe=>{this.projectQuery=pe})})}openCreateProjectDialog(){this.dialog.open(ee).afterClosed().subscribe(t=>{t&&this.web.createProject(t.name,t.description).subscribe(s=>{this.selectedProject=s,this.web.getProjects(void 0,this.limit,this.offset).subscribe(g=>{this.projectQuery=g})})})}handlePageEvent(e){this.offset=e.pageIndex*e.pageSize,this.limit=e.pageSize,this.form.controls.name.value?this.web.getProjects(void 0,this.limit,this.offset,this.form.controls.name.value).subscribe(t=>{this.projectQuery=t}):this.web.getProjects(void 0,this.limit,this.offset).subscribe(t=>{this.projectQuery=t})}handleProjectSelect(e){this.selectedProject=e}refreshData(){if(this.form.controls.name.value){this.web.getProjects(void 0,this.limit,this.offset,this.form.controls.name.value).subscribe(e=>{this.projectQuery=e});return}this.web.getProjects(void 0,this.limit,this.offset).subscribe(e=>{this.projectQuery=e})}handleUpdateData(e){this.projectQuery.results=this.projectQuery.results.map(t=>t.id===e.id?e:t)}};o.\u0275fac=function(t){return new(t||o)(h(k),h(S),h(T))},o.\u0275cmp=w({type:o,selectors:[["app-project"]],inputs:{projectID:"projectID"},standalone:!0,features:[P],decls:24,vars:4,consts:[["paginator",""],[2,"display","flex","flex-direction","row"],[1,"project-side-nav"],["mat-icon-button","",3,"click"],[2,"display","flex","flex-direction","column","padding","5px"],[3,"formGroup"],[2,"width","100%"],["matInput","","formControlName","name","type","search","placeholder","Search Project"],[1,"project-main-content"],[2,"height","calc(100vh - 64px*2 - 20px)","overflow","auto"],[3,"project"],[2,"height","calc(100vh - 64px*4 - 20px)","overflow","auto"],[3,"projectSelected","projectQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],[3,"deleted","updated","project"]],template:function(t,s){t&1&&(r(0,"div",1)(1,"div",2)(2,"mat-toolbar")(3,"mat-toolbar-row")(4,"span"),l(5,"Project"),a(),r(6,"button",3),u("click",function(){return s.openCreateProjectDialog()}),r(7,"mat-icon"),l(8,"create_new_folder"),a()()()(),r(9,"div",4)(10,"form",5)(11,"mat-form-field",6),x(12,"input",7),r(13,"mat-label"),l(14,"Search Project"),a()()(),f(15,we,2,1),a()(),r(16,"div",8)(17,"mat-toolbar")(18,"mat-toolbar-row")(19,"span"),f(20,Pe,1,1)(21,ye,1,0),a()()(),r(22,"div",9),f(23,Se,1,1,"app-project-view",10),a()()()),t&2&&(p(10),j("formGroup",s.form),p(5),_(s.projectQuery?15:-1),p(5),_(s.selectedProject?20:21),p(3),_(s.selectedProject?23:-1))},dependencies:[ae,re,Z,y,se,F,M,v,I,V,D,E,Q,N,G,z,le],styles:[".project-side-nav[_ngcontent-%COMP%]{width:300px;border-right:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 64px)}.project-main-content[_ngcontent-%COMP%]{flex:1}"]});let i=o;return i})();var ve=[{path:"",component:B},{path:":projectID",component:B}],et=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=U({type:o}),o.\u0275inj=R({imports:[K,X.forChild(ve)]});let i=o;return i})();export{et as ProjectModule};
