import{La as _}from"./chunk-RBHTY4FE.js";import{a as m,b as h,c as f}from"./chunk-KCCSOALX.js";import{A as u,ia as y,n as c,na as g}from"./chunk-QNTGE4BG.js";var S=(()=>{let d=class d{constructor(e){this.http=e,this.cinderInstanceID=crypto.randomUUID(),this.baseURL=_.baseURL,this.searchSessionID=null,this.updateFromLabGroupSelection=new c}uploadDataChunk(e="",s,r,t){let p=new FormData;p.append("file",s),p.append("filename",r);let n=new m;return n=n.append("Content-Range",t),console.log(n),e!==""?(e.startsWith("http://")&&!e.startsWith("http://localhost")&&(e=e.replace("http://","https://")),this.http.put(e,p,{responseType:"json",observe:"body",headers:n})):this.http.put(`${this.baseURL}/api/chunked_upload/`,p,{responseType:"json",observe:"body",headers:n})}uploadDataChunkComplete(e="",s,r,t){let p=new FormData;return p.append("sha256",s),e.startsWith("http://")&&!e.startsWith("http://localhost")&&(e=e.replace("http://","https://")),r&&t?(p.append("file",r),p.append("filename",t),this.http.post(`${this.baseURL}/api/chunked_upload/`,p,{responseType:"json",observe:"body"})):this.http.post(e,p,{responseType:"json",observe:"body"})}bindUploadedFile(e,s,r,t,p){return this.http.post(`${this.baseURL}/api/project_files/bind_uploaded_file/`,{file_name:t,analysis_group:e,file_type:s,file_category:r,upload_id:p},{responseType:"json",observe:"body"}).pipe(u(n=>(n.extra_data&&(n.extra_data=JSON.parse(n.extra_data)),n)))}getProjects(e,s=10,r=0,t,p=null,n=null){if(e)return this.http.get(e,{responseType:"json",observe:"body"});let o=new h;s&&(o=o.append("limit",s.toString())),r&&(o=o.append("offset",r.toString())),t&&t!==""&&(o=o.append("search",t)),p&&(o=o.append("species",p.id.toString()));let a=localStorage.getItem("cinderUserAccount");if(a){let b=JSON.parse(a);b.currentLabGroup?o=o.append("lab_group",b.currentLabGroup.toString()):n&&(o=o.append("lab_group",n.toString()))}return o=o.append("ordering","-created_at"),this.http.get(`${this.baseURL}/api/projects/`,{responseType:"json",observe:"body",params:o})}updateProject(e,s,r,t=null){return this.http.put(`${this.baseURL}/api/projects/${e}/`,{name:s,description:r,species:t},{responseType:"json",observe:"body"})}deleteProject(e){return this.http.delete(`${this.baseURL}/api/projects/${e}/`,{responseType:"json",observe:"body"})}createProject(e,s){return this.http.post(`${this.baseURL}/api/projects/`,{name:e,description:s},{responseType:"json",observe:"body"})}getAnalysisGroups(e,s=10,r=0,t,p,n){if(e)return this.http.get(e,{responseType:"json",observe:"body"});let o=new h;s&&(o=o.append("limit",s.toString())),r&&(o=o.append("offset",r.toString())),t&&t!==""&&(o=o.append("search",t)),p&&(o=o.append("project",p.toString()));let a=localStorage.getItem("cinderUserAccount");if(a){let b=JSON.parse(a);b.currentLabGroup?o=o.append("lab_group",b.currentLabGroup.toString()):n&&(o=o.append("lab_group",n.toString()))}return o=o.append("ordering","-created_at"),this.http.get(`${this.baseURL}/api/analysis_groups/`,{responseType:"json",observe:"body",params:o})}createAnalysisGroup(e,s,r,t){return this.http.post(`${this.baseURL}/api/analysis_groups/`,{name:e,description:s,project:r,analysis_group_type:t},{responseType:"json",observe:"body"})}getProject(e){return this.http.get(`${this.baseURL}/api/projects/${e}/`,{responseType:"json",observe:"body"})}getAnalysisGroup(e){return this.http.get(`${this.baseURL}/api/analysis_groups/${e}/`,{responseType:"json",observe:"body"})}updateAnalysisGroup(e,s,r,t=null,p){let n={name:s,description:r};return t&&(n.curtain_link=t),p&&(n.session_id=p),this.http.put(`${this.baseURL}/api/analysis_groups/${e}/`,n,{responseType:"json",observe:"body"})}refreshCurtainLink(e,s){return this.http.post(`${this.baseURL}/api/analysis_groups/${e}/refresh_curtain_data/`,{session_id:s},{responseType:"json",observe:"body"})}getCurtainLinkData(e){return this.http.get(`${this.baseURL}/api/analysis_groups/${e}/get_curtain_data/`,{responseType:"json",observe:"body"})}getAnalysisGroupFiles(e){return this.http.get(`${this.baseURL}/api/analysis_groups/${e}/files/`,{responseType:"json",observe:"body"}).pipe(u(s=>s.map(r=>(r.extra_data&&(r.extra_data=JSON.parse(r.extra_data)),r))))}getProjectFileColumns(e){return this.http.get(`${this.baseURL}/api/project_files/${e}/get_columns/`,{responseType:"json",observe:"body"})}createSampleAnnotation(e,s,r,t){return this.http.post(`${this.baseURL}/api/sample_annotations/`,{analysis_group:e,name:s,annotations:r,file:t}).pipe(u(p=>(p.annotations=JSON.parse(p.annotations),p)))}getSampleAnnotation(e){return this.http.get(`${this.baseURL}/api/sample_annotations/${e}/`,{responseType:"json",observe:"body"}).pipe(u(s=>(s.annotations=JSON.parse(s.annotations),s)))}updateSampleAnnotation(e,s,r){return this.http.put(`${this.baseURL}/api/sample_annotations/${e}/`,{name:s,annotations:r},{responseType:"json",observe:"body"}).pipe(u(t=>(t.annotations=JSON.parse(t.annotations),t)))}getProjectFileSampleAnnotations(e){return this.http.get(`${this.baseURL}/api/project_files/${e}/sample_annotations/`,{responseType:"json",observe:"body"}).pipe(u(s=>(s.annotations=JSON.parse(s.annotations),s)))}createComparisonMatrix(e,s,r,t){return this.http.post(`${this.baseURL}/api/comparison_matrices/`,{name:s,matrix:r,analysis_group:e,file:t},{responseType:"json",observe:"body"}).pipe(u(p=>(p.matrix=JSON.parse(p.matrix),p)))}updateComparisonMatrix(e,s,r){return this.http.put(`${this.baseURL}/api/comparison_matrices/${e}/`,{name:s,matrix:r},{responseType:"json",observe:"body"}).pipe(u(t=>(t.matrix=JSON.parse(t.matrix),t)))}getProjectFileComparisonMatrix(e){return this.http.get(`${this.baseURL}/api/project_files/${e}/comparison_matrices/`,{responseType:"json",observe:"body"}).pipe(u(s=>(s.matrix=JSON.parse(s.matrix),s)))}deleteAnalysisGroup(e){return this.http.delete(`${this.baseURL}/api/analysis_groups/${e}/`,{responseType:"json",observe:"body"})}createSearch(e,s,r=null,t=.6,p=1.31,n="full",o=void 0){let a={analysis_groups:e,search_term:s};return r&&(a.session_id=r),t&&(a.fc_cutoff=t),p&&(a.p_value_cutoff=p),n&&(a.search_mode=n),o&&(a.species=o.id),this.http.post(`${this.baseURL}/api/search/`,a,{responseType:"json",observe:"body"})}getSearchSessionID(){return this.http.get(`${this.baseURL}/api/search/session_id/`,{responseType:"json",observe:"body"})}getSearchSession(e){return this.http.get(`${this.baseURL}/api/search/${e}/`,{responseType:"json",observe:"body"})}getSearchSessions(e,s=10,r=0,t,p=!1,n=null){if(e)return this.http.get(e,{responseType:"json",observe:"body"});let o=new h;return s&&(o=o.append("limit",s.toString())),r&&(o=o.append("offset",r.toString())),t&&t!==""&&(o=o.append("search",t)),p&&(o=o.append("user_owned_only","true")),n&&(o=o.append("session_id",n)),o=o.append("ordering","-created_at"),this.http.get(`${this.baseURL}/api/search/`,{responseType:"json",observe:"body",params:o})}getSearchResults(e,s=10,r=0,t="df",p="",n="desc",o="",a=0,b=0){let i=new h;return s&&(i=i.append("limit",s.toString())),r&&(i=i.append("offset",r.toString())),p&&p!==""&&n&&n!==""&&(n==="asc"?i=i.append("ordering",p):n==="desc"&&(i=i.append("ordering",`-${p}`))),o&&o!==""&&(i=i.append("search",o)),a&&a>0&&(i=i.append("log2_fc",a.toString())),b&&b>0&&(i=i.append("log10_p",b.toString())),i=i.append("file_category",t),i=i.append("search_id",e.toString()),this.http.get(`${this.baseURL}/api/search_results/`,{responseType:"json",observe:"body",params:i})}getSearchResultRelated(e,s="df",r=null){let t=new h;return t=t.append("file_category",s),r&&(t=t.append("primary_id",r)),this.http.get(`${this.baseURL}/api/search_results/${e}/get_related/`,{responseType:"json",observe:"body",params:t})}updateProjectFileExtraData(e,s){return this.http.put(`${this.baseURL}/api/project_files/${e}/`,{extra_data:s},{responseType:"json",observe:"body"}).pipe(u(r=>(r.extra_data&&(r.extra_data=JSON.parse(r.extra_data)),r)))}getProjectCount(e=null){let s=new h,r=localStorage.getItem("cinderUserAccount");if(r){let t=JSON.parse(r);t.currentLabGroup?s=s.append("lab_group",t.currentLabGroup.toString()):e&&(s=s.append("lab_group",e.toString()))}return this.http.get(`${this.baseURL}/api/projects/get_count/`,{responseType:"json",observe:"body",params:s})}getAnalysisGroupCount(e=null){let s=new h,r=localStorage.getItem("cinderUserAccount");if(r){let t=JSON.parse(r);t.currentLabGroup?s=s.append("lab_group",t.currentLabGroup.toString()):e&&(s=s.append("lab_group",e.toString()))}return this.http.get(`${this.baseURL}/api/analysis_groups/get_count/`,{responseType:"json",observe:"body",params:s})}deleteSearchSession(e){return this.http.delete(`${this.baseURL}/api/search/${e}/`,{responseType:"json",observe:"body"})}getAnalysisGroupsFromProjects(e){return this.http.post(`${this.baseURL}/api/search/get_analysis_groups_from_projects/`,{projects:e.map(s=>s.id)})}getSpecies(e,s=10,r=0,t){if(e)return this.http.get(e,{responseType:"json",observe:"body"});let p=new h;return s&&(p=p.append("limit",s.toString())),r&&(p=p.append("offset",r.toString())),t&&t!==""&&(p=p.append("search",t)),p=p.append("ordering","official_name"),this.http.get(`${this.baseURL}/api/species/`,{responseType:"json",observe:"body",params:p})}getSpeciesByID(e){return this.http.get(`${this.baseURL}/api/species/${e}/`,{responseType:"json",observe:"body"})}getUniqueComparisonLabel(e,s){return this.http.get(`${this.baseURL}/api/project_files/${e}/get_unique_comparison_label/`,{responseType:"json",observe:"body",params:new h().append("column",s)})}composeAnalysisGroupFilesFromCurtainData(e,s){return this.http.post(`${this.baseURL}/api/analysis_groups/${e}/compose_files_from_curtain_data/`,{session_id:s},{responseType:"json",observe:"body"})}deleteProjectFile(e){return this.http.delete(`${this.baseURL}/api/project_files/${e}/`,{responseType:"json",observe:"body"})}exportSearchData(e,s,r=0,t=0,p){return this.http.post(`${this.baseURL}/api/search/${e}/export_search_data/`,{search_term:s,log2_fc:r,p_value:t,session_id:p,instance_id:this.cinderInstanceID},{responseType:"json",observe:"body"})}downloadTempFile(e){return this.http.get(`${this.baseURL}/api/search/download_temp_file/`,{responseType:"blob",observe:"body",params:new h().append("token",e)})}getFileDownloadToken(e){return this.http.get(`${this.baseURL}/api/project_files/${e}/request_download_token/`,{responseType:"json",observe:"body"})}getProjectUniqueConditions(e){return this.http.get(`${this.baseURL}/api/projects/${e}/get_unique_conditions/`,{responseType:"json",observe:"body"})}getLabGroups(e="",s=10,r=0){let t=new h;return e&&e!==""&&(t=t.append("search",e)),s&&(t=t.append("limit",s.toString())),r&&(t=t.append("offset",r.toString())),this.http.get(`${this.baseURL}/api/lab_groups/`,{responseType:"json",observe:"body",params:t})}createLabGroup(e){return this.http.post(`${this.baseURL}/api/lab_groups/`,{name:e},{responseType:"json",observe:"body"})}deleteLabGroup(e){return this.http.delete(`${this.baseURL}/api/lab_groups/${e}/`,{responseType:"json",observe:"body"})}addLabGroupMember(e,s){return this.http.post(`${this.baseURL}/api/lab_groups/${e}/add_member/`,{user:s},{responseType:"json",observe:"body"})}removeLabGroupMember(e,s){return this.http.post(`${this.baseURL}/api/lab_groups/${e}/remove_member/`,{user:s},{responseType:"json",observe:"body"})}createUser(e,s,r){return this.http.post(`${this.baseURL}/api/users/`,{username:e,password:s,email:r},{responseType:"json",observe:"body"})}updateUser(e,s,r,t,p){let n={};return s&&(n.email=s),r&&(n.password=r),t&&(n.last_name=t),p&&(n.first_name=p),this.http.put(`${this.baseURL}/api/users/${e}/`,n,{responseType:"json",observe:"body"})}removeUser(e){return this.http.delete(`${this.baseURL}/api/users/${e}/`,{responseType:"json",observe:"body"})}getCurrentUser(){return this.http.get(`${this.baseURL}/api/users/get_current_user/`,{responseType:"json",observe:"body"})}getCurrentUserLabGroups(){return this.http.get(`${this.baseURL}/api/users/get_user_lab_group/`,{responseType:"json",observe:"body"})}createUserWithToken(e,s,r,t,p,n,o=null){let a={username:e,token:s,email:r,last_name:t,password:p,first_name:n};return o&&(a.lab_group=o),this.http.post(`${this.baseURL}/api/users/create_with_token/`,a,{responseType:"json",observe:"body"})}};d.\u0275fac=function(s){return new(s||d)(g(f))},d.\u0275prov=y({token:d,factory:d.\u0275fac,providedIn:"root"});let l=d;return l})();export{S as a};
