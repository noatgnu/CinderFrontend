import{a as Bm}from"./chunk-NJO5D4OP.js";import{a as Pm,b as Dm,c as Om,d as Rm,e as zm,f as Fm}from"./chunk-KJTREUQC.js";import{a as Vh,b as Hh}from"./chunk-WOLITJN3.js";import{a as Cm,c as Em,f as Lm,g as Im,h as Yc,j as jh}from"./chunk-D7ULMO2O.js";import{B as Zd,Ba as sc,Ca as Wc,E as Uc,Ea as yl,Fa as Uh,J as Wu,K as tc,L as Yu,M as Dh,N as bm,O as Lf,P as Oh,T as _m,U as If,W as wm,Y as Tm,Z as Rh,a as vu,b as mm,ca as Vc,d as gm,da as Am,ea as Hc,fa as Gc,g as vm,ga as qc,ia as Zu,ka as zi,ma as nc,n as ym,na as pl,pa as $r,qa as ml,ra as Mm,s as xm,sa as rc,t as qu,ta as ic,ua as ac,va as Nh,wa as vl,xa as Sm,ya as oc}from"./chunk-CPRBURD4.js";import{h as pm}from"./chunk-M5DCLWJD.js";import{c as km,d as zh,f as Xu,g as Fh,i as Bh}from"./chunk-AESYL7IM.js";import{$ as fl,$b as oo,Aa as Fl,Ab as ta,Ba as Yd,Bb as na,Ca as Eh,Cb as Nn,Db as Gn,E as Ah,Ea as yo,Eb as Wi,F as $0,Fa as qr,Fb as du,G as Mh,Ga as am,Gb as pu,Gc as hm,H as Q0,Hb as Is,Hc as dm,Ib as ya,Kc as Ph,L as em,La as Hu,Lb as Jr,Nb as Br,Ob as ec,Pb as Ps,Q as tm,Qb as Xd,Rb as lm,Sb as Ds,Tb as us,Ub as ca,Vb as ua,Wb as mu,Xa as om,Xb as yr,Y as nm,Yb as ra,Z as Sh,Za as _r,Zb as dl,_ as rm,_a as hr,a as X0,ab as cs,ac as Yi,bc as cm,cb as sm,cc as um,d as kv,da as im,e as Av,ea as Ef,f as Uu,fa as zc,g as Vu,gb as $l,ha as hl,ib as Lh,j as Z0,ja as Ch,jb as Ql,ka as Xs,lb as Fa,m as fu,nb as Wo,nc as bc,o as Wd,oa as Ri,oc as jc,pa as Fc,pc as fm,qa as Ni,r as K0,rb as fi,rc as Ya,sb as Nc,sc as gu,t as Cf,tb as Nr,ub as hu,v as J0,va as Bc,vb as Yo,wa as ri,wb as Gu,xa as ii,yb as hi,zb as ka,zc as Ih}from"./chunk-FYJXFM5Q.js";var Og=kv((rd,pp)=>{"use strict";(function(ht,qe){typeof rd=="object"&&typeof pp=="object"?pp.exports=qe():typeof define=="function"&&define.amd?define([],qe):typeof rd=="object"?rd.Plotly=qe():ht.Plotly=qe()})(self,function(){return function(){var ht={79288:function(F,C,e){"use strict";var T=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in k){var w=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");T.addStyleRule(w,k[a])}},86712:function(F,C,e){"use strict";F.exports=e(84224)},37240:function(F,C,e){"use strict";F.exports=e(51132)},29744:function(F,C,e){"use strict";F.exports=e(94456)},29352:function(F,C,e){"use strict";F.exports=e(67244)},96144:function(F,C,e){"use strict";F.exports=e(97776)},53219:function(F,C,e){"use strict";F.exports=e(61712)},4624:function(F,C,e){"use strict";F.exports=e(95856)},54543:function(F,C,e){"use strict";F.exports=e(54272)},45e3:function(F,C,e){"use strict";F.exports=e(85404)},62300:function(F,C,e){"use strict";F.exports=e(26048)},6920:function(F,C,e){"use strict";F.exports=e(66240)},10264:function(F,C,e){"use strict";F.exports=e(40448)},32016:function(F,C,e){"use strict";F.exports=e(64884)},27528:function(F,C,e){"use strict";F.exports=e(15088)},75556:function(F,C,e){"use strict";F.exports=e(76744)},39204:function(F,C,e){"use strict";F.exports=e(94704)},73996:function(F,C,e){"use strict";F.exports=e(62396)},16489:function(F,C,e){"use strict";F.exports=e(32028)},5e3:function(F,C,e){"use strict";F.exports=e(81932)},77280:function(F,C,e){"use strict";F.exports=e(45536)},33992:function(F,C,e){"use strict";F.exports=e(42600)},17600:function(F,C,e){"use strict";F.exports=e(21536)},49116:function(F,C,e){"use strict";F.exports=e(65664)},46808:function(F,C,e){"use strict";F.exports=e(29044)},36168:function(F,C,e){"use strict";F.exports=e(48928)},13792:function(F,C,e){"use strict";var T=e(32016);T.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),F.exports=T},3920:function(F,C,e){"use strict";F.exports=e(43480)},25120:function(F,C,e){"use strict";F.exports=e(6296)},4340:function(F,C,e){"use strict";F.exports=e(7404)},86152:function(F,C,e){"use strict";F.exports=e(65456)},56816:function(F,C,e){"use strict";F.exports=e(22020)},89296:function(F,C,e){"use strict";F.exports=e(29928)},20260:function(F,C,e){"use strict";F.exports=e(75792)},32140:function(F,C,e){"use strict";F.exports=e(156)},84764:function(F,C,e){"use strict";F.exports=e(45499)},48824:function(F,C,e){"use strict";F.exports=e(3296)},69967:function(F,C,e){"use strict";F.exports=e(4184)},8363:function(F,C,e){"use strict";F.exports=e(36952)},86636:function(F,C,e){"use strict";F.exports=e(38983)},70192:function(F,C,e){"use strict";F.exports=e(11572)},81604:function(F,C,e){"use strict";F.exports=e(76924)},63796:function(F,C,e){"use strict";F.exports=e(62944)},89336:function(F,C,e){"use strict";F.exports=e(95443)},67484:function(F,C,e){"use strict";F.exports=e(34864)},97312:function(F,C,e){"use strict";F.exports=e(76272)},42192:function(F,C,e){"use strict";F.exports=e(97924)},29800:function(F,C,e){"use strict";F.exports=e(15436)},63560:function(F,C,e){"use strict";F.exports=e(5621)},89904:function(F,C,e){"use strict";F.exports=e(91304)},50248:function(F,C,e){"use strict";F.exports=e(41724)},65832:function(F,C,e){"use strict";F.exports=e(31991)},79440:function(F,C,e){"use strict";F.exports=e(22869)},13752:function(F,C,e){"use strict";F.exports=e(67776)},83096:function(F,C,e){"use strict";F.exports=e(95952)},72196:function(F){"use strict";F.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(F,C,e){"use strict";var T=e(72196),k=e(25376),a=e(33816),w=e(31780).templatedArray;e(36208),F.exports=w("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:T.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(23816).draw;function w(f){var s=f._fullLayout;T.filterVisible(s.annotations).forEach(function(t){var i=k.getFromId(f,t.xref),r=k.getFromId(f,t.yref),n=k.getRefType(t.xref),o=k.getRefType(t.yref);t._extremes={},n==="range"&&b(t,i),o==="range"&&b(t,r)})}function b(f,s){var t,i=s._id,r=i.charAt(0),n=f[r],o=f["a"+r],l=f[r+"ref"],c=f["a"+r+"ref"],d=f["_"+r+"padplus"],u=f["_"+r+"padminus"],x={x:1,y:-1}[r]*f[r+"shift"],p=3*f.arrowsize*f.arrowwidth||0,g=p+x,m=p-x,y=3*f.startarrowsize*f.arrowwidth||0,v=y+x,_=y-x;if(c===l){var h=k.findExtremes(s,[s.r2c(n)],{ppadplus:g,ppadminus:m}),S=k.findExtremes(s,[s.r2c(o)],{ppadplus:Math.max(d,v),ppadminus:Math.max(u,_)});t={min:[h.min[0],S.min[0]],max:[h.max[0],S.max[0]]}}else v=o?v+o:v,_=o?_-o:_,t=k.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(d,g,v),ppadminus:Math.max(u,m,_)});f._extremes[i]=t}F.exports=function(f){var s=f._fullLayout;if(T.filterVisible(s.annotations).length&&f._fullData.length)return T.syncOrAsync([a,w],f)}},42300:function(F,C,e){"use strict";var T=e(3400),k=e(24040),a=e(31780).arrayEditor;function w(f,s){var t,i,r,n,o,l,c,d=f._fullLayout.annotations,u=[],x=[],p=[],g=(s||[]).length;for(t=0;t<d.length;t++)if(n=(r=d[t]).clicktoshow){for(i=0;i<g;i++)if(l=(o=s[i]).xaxis,c=o.yaxis,l._id===r.xref&&c._id===r.yref&&l.d2r(o.x)===b(r._xclick,l)&&c.d2r(o.y)===b(r._yclick,c)){(r.visible?n==="onout"?x:p:u).push(t);break}i===g&&r.visible&&n==="onout"&&x.push(t)}return{on:u,off:x,explicitOff:p}}function b(f,s){return s.type==="log"?s.l2r(f):s.d2r(f)}F.exports={hasClickToShow:function(f,s){var t=w(f,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(f,s){var t,i,r=w(f,s),n=r.on,o=r.off.concat(r.explicitOff),l={},c=f._fullLayout.annotations;if(n.length||o.length){for(t=0;t<n.length;t++)(i=a(f.layout,"annotations",c[n[t]])).modifyItem("visible",!0),T.extendFlat(l,i.getUpdateObj());for(t=0;t<o.length;t++)(i=a(f.layout,"annotations",c[o[t]])).modifyItem("visible",!1),T.extendFlat(l,i.getUpdateObj());return k.call("update",f,{},l)}}}},87192:function(F,C,e){"use strict";var T=e(3400),k=e(76308);F.exports=function(a,w,b,f){f("opacity");var s=f("bgcolor"),t=f("bordercolor"),i=k.opacity(t);f("borderpad");var r=f("borderwidth"),n=f("showarrow");if(f("text",n?" ":b._dfltTitle.annotation),f("textangle"),T.coerceFont(f,"font",b.font),f("width"),f("align"),f("height")&&f("valign"),n){var o,l,c=f("arrowside");c.indexOf("end")!==-1&&(o=f("arrowhead"),l=f("arrowsize")),c.indexOf("start")!==-1&&(f("startarrowhead",o),f("startarrowsize",l)),f("arrowcolor",i?w.bordercolor:k.defaultLine),f("arrowwidth",2*(i&&r||1)),f("standoff"),f("startstandoff")}var d=f("hovertext"),u=b.hoverlabel||{};if(d){var x=f("hoverlabel.bgcolor",u.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),p=f("hoverlabel.bordercolor",u.bordercolor||k.contrast(x)),g=T.extendFlat({},u.font);g.color||(g.color=p),T.coerceFont(f,"hoverlabel.font",g)}f("captureevents",!!d)}},26828:function(F,C,e){"use strict";var T=e(38248),k=e(36896);F.exports=function(a,w,b,f){w=w||{};var s=b==="log"&&w.type==="linear",t=b==="linear"&&w.type==="log";if(s||t)for(var i,r,n=a._fullLayout.annotations,o=w._id.charAt(0),l=0;l<n.length;l++)i=n[l],r="annotations["+l+"].",i[o+"ref"]===w._id&&c(o),i["a"+o+"ref"]===w._id&&c("a"+o);function c(d){var u=i[d],x=null;x=s?k(u,w.range):Math.pow(10,u),T(x)||(x=null),f(r+d,x)}}},45216:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(51272),w=e(87192),b=e(13916);function f(s,t,i){function r(S,A){return T.coerce(s,t,b,S,A)}var n=r("visible"),o=r("clicktoshow");if(n||o){w(s,t,i,r);for(var l=t.showarrow,c=["x","y"],d=[-10,-30],u={_fullLayout:i},x=0;x<2;x++){var p=c[x],g=k.coerceRef(s,t,u,p,"","paper");if(g!=="paper"&&k.getFromId(u,g)._annIndices.push(t._index),k.coercePosition(t,u,r,g,p,.5),l){var m="a"+p,y=k.coerceRef(s,t,u,m,"pixel",["pixel","paper"]);y!=="pixel"&&y!==g&&(y=t[m]="pixel");var v=y==="pixel"?d[x]:.4;k.coercePosition(t,u,r,y,m,v)}r(p+"anchor"),r(p+"shift")}if(T.noneOrAll(s,t,["x","y"]),l&&T.noneOrAll(s,t,["ax","ay"]),o){var _=r("xclick"),h=r("yclick");t._xclick=_===void 0?t.x:k.cleanPosition(_,u,t.xref),t._yclick=h===void 0?t.y:k.cleanPosition(h,u,t.yref)}}}F.exports=function(s,t){a(s,t,{name:"annotations",handleItemDefaults:f})}},23816:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(7316),w=e(3400),b=w.strTranslate,f=e(54460),s=e(76308),t=e(43616),i=e(93024),r=e(72736),n=e(93972),o=e(86476),l=e(31780).arrayEditor,c=e(33652);function d(p,g){var m=p._fullLayout.annotations[g]||{},y=f.getFromId(p,m.xref),v=f.getFromId(p,m.yref);y&&y.setScale(),v&&v.setScale(),x(p,m,g,!1,y,v)}function u(p,g,m,y,v){var _=v[m],h=v[m+"ref"],S=m.indexOf("y")!==-1,A=f.getRefType(h)==="domain",E=S?y.h:y.w;return p?A?_+(S?-g:g)/p._length:p.p2r(p.r2p(_)+g):_+(S?-g:g)/E}function x(p,g,m,y,v,_){var h,S,A=p._fullLayout,E=p._fullLayout._size,P=p._context.edits;y?(h="annotation-"+y,S=y+".annotations"):(h="annotation",S="annotations");var I=l(p.layout,S,g),D=I.modifyBase,z=I.modifyItem,V=I.getUpdateObj;A._infolayer.selectAll("."+h+'[data-index="'+m+'"]').remove();var O="clip"+A._uid+"_ann"+m;if(g._input&&g.visible!==!1){var j={x:{},y:{}},Y=+g.textangle||0,B=A._infolayer.append("g").classed(h,!0).attr("data-index",String(m)).style("opacity",g.opacity),U=B.append("g").classed("annotation-text-g",!0),q=P[g.showarrow?"annotationTail":"annotationPosition"],te=g.captureevents||P.annotationText||q,ee=U.append("g").style("pointer-events",te?"all":null).call(n,"pointer").on("click",function(){p._dragging=!1,p.emit("plotly_clickannotation",ye(T.event))});g.hovertext&&ee.on("mouseover",function(){var me=g.hoverlabel,ke=me.font,Ce=this.getBoundingClientRect(),ge=p.getBoundingClientRect();i.loneHover({x0:Ce.left-ge.left,x1:Ce.right-ge.left,y:(Ce.top+Ce.bottom)/2-ge.top,text:g.hovertext,color:me.bgcolor,borderColor:me.bordercolor,fontFamily:ke.family,fontSize:ke.size,fontColor:ke.color,fontWeight:ke.weight,fontStyle:ke.style,fontVariant:ke.variant,fontShadow:ke.fontShadow,fontLineposition:ke.fontLineposition,fontTextcase:ke.fontTextcase},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:p})}).on("mouseout",function(){i.loneUnhover(A._hoverlayer.node())});var Q=g.borderwidth,J=g.borderpad,K=Q+J,X=ee.append("rect").attr("class","bg").style("stroke-width",Q+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),ie=g.width||g.height,se=A._topclips.selectAll("#"+O).data(ie?[0]:[]);se.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),se.exit().remove();var ae=g.font,ue=A._meta?w.templateString(g.text,A._meta):g.text,ve=ee.append("text").classed("annotation-text",!0).text(ue);P.annotationText?ve.call(r.makeEditable,{delegate:ee,gd:p}).call(pe).on("edit",function(me){g.text=me,this.call(pe),z("text",me),v&&v.autorange&&D(v._name+".autorange",!0),_&&_.autorange&&D(_._name+".autorange",!0),k.call("_guiRelayout",p,V())}):ve.call(pe)}else T.selectAll("#"+O).remove();function ye(me){var ke={index:m,annotation:g._input,fullAnnotation:g,event:me};return y&&(ke.subplotId=y),ke}function pe(me){return me.call(t.font,ae).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),r.convertToTspans(me,p,de),me}function de(){var me=ve.selectAll("a");me.size()===1&&me.text()===ve.text()&&ee.insert("a",":first-child").attr({"xlink:xlink:href":me.attr("xlink:href"),"xlink:xlink:show":me.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(X.node());var ke=ee.select(".annotation-text-math-group"),Ce=!ke.empty(),ge=t.bBox((Ce?ke:ve).node()),oe=ge.width,re=ge.height,fe=g.width||oe,Se=g.height||re,be=Math.round(fe+2*K),we=Math.round(Se+2*K);function Me(vt,ut){return ut==="auto"&&(ut=vt<.3333333333333333?"left":vt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ut]}for(var Pe=!1,De=["x","y"],he=0;he<De.length;he++){var _e,Ae,Oe,Ee,Be,Ve=De[he],Ze=g[Ve+"ref"]||Ve,it=g["a"+Ve+"ref"],at={x:v,y:_}[Ve],gt=(Y+(Ve==="x"?0:-90))*Math.PI/180,yt=be*Math.cos(gt),pt=we*Math.sin(gt),et=Math.abs(yt)+Math.abs(pt),$e=g[Ve+"anchor"],At=g[Ve+"shift"]*(Ve==="x"?1:-1),Ot=j[Ve],Rt=f.getRefType(Ze);if(at&&Rt!=="domain"){var Ct=at.r2fraction(g[Ve]);(Ct<0||Ct>1)&&(it===Ze?((Ct=at.r2fraction(g["a"+Ve]))<0||Ct>1)&&(Pe=!0):Pe=!0),_e=at._offset+at.r2p(g[Ve]),Ee=.5}else{var Ge=Rt==="domain";Ve==="x"?(Oe=g[Ve],_e=Ge?at._offset+at._length*Oe:_e=E.l+E.w*Oe):(Oe=1-g[Ve],_e=Ge?at._offset+at._length*Oe:_e=E.t+E.h*Oe),Ee=g.showarrow?.5:Oe}if(g.showarrow){Ot.head=_e;var Xe=g["a"+Ve];if(Be=yt*Me(.5,g.xanchor)-pt*Me(.5,g.yanchor),it===Ze){var Ne=f.getRefType(it);Ne==="domain"?(Ve==="y"&&(Xe=1-Xe),Ot.tail=at._offset+at._length*Xe):Ne==="paper"?Ve==="y"?(Xe=1-Xe,Ot.tail=E.t+E.h*Xe):Ot.tail=E.l+E.w*Xe:Ot.tail=at._offset+at.r2p(Xe),Ae=Be}else Ot.tail=_e+Xe,Ae=Be+Xe;Ot.text=Ot.tail+Be;var Ye=A[Ve==="x"?"width":"height"];if(Ze==="paper"&&(Ot.head=w.constrain(Ot.head,1,Ye-1)),it==="pixel"){var ot=-Math.max(Ot.tail-3,Ot.text),nt=Math.min(Ot.tail+3,Ot.text)-Ye;ot>0?(Ot.tail+=ot,Ot.text+=ot):nt>0&&(Ot.tail-=nt,Ot.text-=nt)}Ot.tail+=At,Ot.head+=At}else Ae=Be=et*Me(Ee,$e),Ot.text=_e+Be;Ot.text+=At,Be+=At,Ae+=At,g["_"+Ve+"padplus"]=et/2+Ae,g["_"+Ve+"padminus"]=et/2-Ae,g["_"+Ve+"size"]=et,g["_"+Ve+"shift"]=Be}if(Pe)ee.remove();else{var ze=0,Fe=0;if(g.align!=="left"&&(ze=(fe-oe)*(g.align==="center"?.5:1)),g.valign!=="top"&&(Fe=(Se-re)*(g.valign==="middle"?.5:1)),Ce)ke.select("svg").attr({x:K+ze-1,y:K+Fe}).call(t.setClipUrl,ie?O:null,p);else{var rt=K+Fe-ge.top,We=K+ze-ge.left;ve.call(r.positionText,We,rt).call(t.setClipUrl,ie?O:null,p)}se.select("rect").call(t.setRect,K,K,fe,Se),X.call(t.setRect,Q/2,Q/2,be-Q,we-Q),ee.call(t.setTranslate,Math.round(j.x.text-be/2),Math.round(j.y.text-we/2)),U.attr({transform:"rotate("+Y+","+j.x.text+","+j.y.text+")"});var ft,mt=function(vt,ut){B.selectAll(".annotation-arrow-g").remove();var Mt=j.x.head,bt=j.y.head,St=j.x.tail+vt,Pt=j.y.tail+ut,Dt=j.x.text+vt,Ft=j.y.text+ut,Xt=w.rotationXYMatrix(Y,Dt,Ft),an=w.apply2DTransform(Xt),Ht=w.apply2DTransform2(Xt),Zt=+X.attr("width"),jt=+X.attr("height"),Pn=Dt-.5*Zt,Tn=Pn+Zt,mn=Ft-.5*jt,Qt=mn+jt,un=[[Pn,mn,Pn,Qt],[Pn,Qt,Tn,Qt],[Tn,Qt,Tn,mn],[Tn,mn,Pn,mn]].map(Ht);if(!un.reduce(function(ar,Kn){return ar^!!w.segmentsIntersect(Mt,bt,Mt+1e6,bt+1e6,Kn[0],Kn[1],Kn[2],Kn[3])},!1)){un.forEach(function(ar){var Kn=w.segmentsIntersect(St,Pt,Mt,bt,ar[0],ar[1],ar[2],ar[3]);Kn&&(St=Kn.x,Pt=Kn.y)});var nn=g.arrowwidth,hn=g.arrowcolor,bn=g.arrowside,wn=B.append("g").style({opacity:s.opacity(hn)}).classed("annotation-arrow-g",!0),Cn=wn.append("path").attr("d","M"+St+","+Pt+"L"+Mt+","+bt).style("stroke-width",nn+"px").call(s.stroke,s.rgb(hn));if(c(Cn,bn,g),P.annotationPosition&&Cn.node().parentNode&&!y){var Ln=Mt,Mn=bt;if(g.standoff){var jn=Math.sqrt(Math.pow(Mt-St,2)+Math.pow(bt-Pt,2));Ln+=g.standoff*(St-Mt)/jn,Mn+=g.standoff*(Pt-bt)/jn}var Rn,Qn,Yn=wn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(St-Ln)+","+(Pt-Mn),transform:b(Ln,Mn)}).style("stroke-width",nn+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");o.init({element:Yn.node(),gd:p,prepFn:function(){var ar=t.getTranslate(ee);Rn=ar.x,Qn=ar.y,v&&v.autorange&&D(v._name+".autorange",!0),_&&_.autorange&&D(_._name+".autorange",!0)},moveFn:function(ar,Kn){var mr=an(Rn,Qn),en=mr[0]+ar,rn=mr[1]+Kn;ee.call(t.setTranslate,en,rn),z("x",u(v,ar,"x",E,g)),z("y",u(_,Kn,"y",E,g)),g.axref===g.xref&&z("ax",u(v,ar,"ax",E,g)),g.ayref===g.yref&&z("ay",u(_,Kn,"ay",E,g)),wn.attr("transform",b(ar,Kn)),U.attr({transform:"rotate("+Y+","+en+","+rn+")"})},doneFn:function(){k.call("_guiRelayout",p,V());var ar=document.querySelector(".js-notes-box-panel");ar&&ar.redraw(ar.selectedObj)}})}}};g.showarrow&&mt(0,0),q&&o.init({element:ee.node(),gd:p,prepFn:function(){ft=U.attr("transform")},moveFn:function(vt,ut){var Mt="pointer";if(g.showarrow)g.axref===g.xref?z("ax",u(v,vt,"ax",E,g)):z("ax",g.ax+vt),g.ayref===g.yref?z("ay",u(_,ut,"ay",E.w,g)):z("ay",g.ay+ut),mt(vt,ut);else{if(y)return;var bt,St;if(v)bt=u(v,vt,"x",E,g);else{var Pt=g._xsize/E.w,Dt=g.x+(g._xshift-g.xshift)/E.w-Pt/2;bt=o.align(Dt+vt/E.w,Pt,0,1,g.xanchor)}if(_)St=u(_,ut,"y",E,g);else{var Ft=g._ysize/E.h,Xt=g.y-(g._yshift+g.yshift)/E.h-Ft/2;St=o.align(Xt-ut/E.h,Ft,0,1,g.yanchor)}z("x",bt),z("y",St),v&&_||(Mt=o.getCursor(v?.5:bt,_?.5:St,g.xanchor,g.yanchor))}U.attr({transform:b(vt,ut)+ft}),n(ee,Mt)},clickFn:function(vt,ut){g.captureevents&&p.emit("plotly_clickannotation",ye(ut))},doneFn:function(){n(ee),k.call("_guiRelayout",p,V());var vt=document.querySelector(".js-notes-box-panel");vt&&vt.redraw(vt.selectedObj)}})}}}F.exports={draw:function(p){var g=p._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var m=0;m<g.annotations.length;m++)g.annotations[m].visible&&d(p,m);return a.previousPromises(p)},drawOne:d,drawRaw:x}},33652:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(72196),w=e(3400),b=w.strScale,f=w.strRotate,s=w.strTranslate;F.exports=function(t,i,r){var n,o,l,c,d=t.node(),u=a[r.arrowhead||0],x=a[r.startarrowhead||0],p=(r.arrowwidth||1)*(r.arrowsize||1),g=(r.arrowwidth||1)*(r.startarrowsize||1),m=i.indexOf("start")>=0,y=i.indexOf("end")>=0,v=u.backoff*p+r.standoff,_=x.backoff*g+r.startstandoff;if(d.nodeName==="line"){n={x:+t.attr("x1"),y:+t.attr("y1")},o={x:+t.attr("x2"),y:+t.attr("y2")};var h=n.x-o.x,S=n.y-o.y;if(c=(l=Math.atan2(S,h))+Math.PI,v&&_&&v+_>Math.sqrt(h*h+S*S))return void B();if(v){if(v*v>h*h+S*S)return void B();var A=v*Math.cos(l),E=v*Math.sin(l);o.x+=A,o.y+=E,t.attr({x2:o.x,y2:o.y})}if(_){if(_*_>h*h+S*S)return void B();var P=_*Math.cos(l),I=_*Math.sin(l);n.x-=P,n.y-=I,t.attr({x1:n.x,y1:n.y})}}else if(d.nodeName==="path"){var D=d.getTotalLength(),z="";if(D<v+_)return void B();var V=d.getPointAtLength(0),O=d.getPointAtLength(.1);l=Math.atan2(V.y-O.y,V.x-O.x),n=d.getPointAtLength(Math.min(_,D)),z="0px,"+_+"px,";var j=d.getPointAtLength(D),Y=d.getPointAtLength(D-.1);c=Math.atan2(j.y-Y.y,j.x-Y.x),o=d.getPointAtLength(Math.max(0,D-v)),z+=D-(z?_+v:v)+"px,"+D+"px",t.style("stroke-dasharray",z)}function B(){t.style("stroke-dasharray","0px,100px")}function U(q,te,ee,Q){q.path&&(q.noRotate&&(ee=0),T.select(d.parentNode).append("path").attr({class:t.attr("class"),d:q.path,transform:s(te.x,te.y)+f(180*ee/Math.PI)+b(Q)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}m&&U(x,n,l,g),y&&U(u,o,c,p)}},79180:function(F,C,e){"use strict";var T=e(23816),k=e(42300);F.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:T.draw,drawOne:T.drawOne,drawRaw:T.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(F,C,e){"use strict";var T=e(13916),k=e(67824).overrideAll,a=e(31780).templatedArray;F.exports=k(a("annotation",{visible:T.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:T.xanchor,xshift:T.xshift,yanchor:T.yanchor,yshift:T.yshift,text:T.text,textangle:T.textangle,font:T.font,width:T.width,height:T.height,opacity:T.opacity,align:T.align,valign:T.valign,bgcolor:T.bgcolor,bordercolor:T.bordercolor,borderpad:T.borderpad,borderwidth:T.borderwidth,showarrow:T.showarrow,arrowcolor:T.arrowcolor,arrowhead:T.arrowhead,startarrowhead:T.startarrowhead,arrowside:T.arrowside,arrowsize:T.arrowsize,startarrowsize:T.startarrowsize,arrowwidth:T.arrowwidth,standoff:T.standoff,startstandoff:T.startstandoff,hovertext:T.hovertext,hoverlabel:T.hoverlabel,captureevents:T.captureevents}),"calc","from-root")},42456:function(F,C,e){"use strict";var T=e(3400),k=e(54460);function a(w,b){var f=b.fullSceneLayout.domain,s=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};w._xa={},T.extendFlat(w._xa,t),k.setConvert(w._xa),w._xa._offset=s.l+f.x[0]*s.w,w._xa.l2p=function(){return .5*(1+w._pdata[0]/w._pdata[3])*s.w*(f.x[1]-f.x[0])},w._ya={},T.extendFlat(w._ya,t),k.setConvert(w._ya),w._ya._offset=s.t+(1-f.y[1])*s.h,w._ya.l2p=function(){return .5*(1-w._pdata[1]/w._pdata[3])*s.h*(f.y[1]-f.y[0])}}F.exports=function(w){for(var b=w.fullSceneLayout.annotations,f=0;f<b.length;f++)a(b[f],w);w.fullLayout._infolayer.selectAll(".annotation-"+w.id).remove()}},52808:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(51272),w=e(87192),b=e(45899);function f(s,t,i,r){function n(l,c){return T.coerce(s,t,b,l,c)}function o(l){var c=l+"axis",d={_fullLayout:{}};return d._fullLayout[c]=i[c],k.coercePosition(t,d,n,l,l,.5)}n("visible")&&(w(s,t,r.fullLayout,n),o("x"),o("y"),o("z"),T.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),T.noneOrAll(s,t,["ax","ay"])))}F.exports=function(s,t,i){a(s,t,{name:"annotations",handleItemDefaults:f,fullLayout:i.fullLayout})}},71836:function(F,C,e){"use strict";var T=e(23816).drawRaw,k=e(94424),a=["x","y","z"];F.exports=function(w){for(var b=w.fullSceneLayout,f=w.dataScale,s=b.annotations,t=0;t<s.length;t++){for(var i=s[t],r=!1,n=0;n<3;n++){var o=a[n],l=i[o],c=b[o+"axis"].r2fraction(l);if(c<0||c>1){r=!0;break}}r?w.fullLayout._infolayer.select(".annotation-"+w.id+'[data-index="'+t+'"]').remove():(i._pdata=k(w.glplot.cameraParams,[b.xaxis.r2l(i.x)*f[0],b.yaxis.r2l(i.y)*f[1],b.zaxis.r2l(i.z)*f[2]]),T(w.graphDiv,i,t,w.id,i._xa,i._ya))}}},56864:function(F,C,e){"use strict";var T=e(24040),k=e(3400);F.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(a,w){var b=T.subplotsRegistry.gl3d;if(b)for(var f=b.attrRegex,s=Object.keys(a),t=0;t<s.length;t++){var i=s[t];f.test(i)&&(a[i].annotations||[]).length&&(k.pushUnique(w._basePlotModules,b),k.pushUnique(w._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(F,C,e){"use strict";F.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(F,C,e){"use strict";var T=e(54976),k=e(3400),a=e(39032),w=a.EPOCHJD,b=a.ONEDAY,f={valType:"enumerated",values:k.sortObjectKeys(T.calendars),editType:"calc",dflt:"gregorian"},s=function(p,g,m,y){var v={};return v[m]=f,k.coerce(p,g,v,m,y)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(p){var g=r[p];return g||(r[p]=T.instance(p))}function o(p){return k.extendFlat({},f,{description:p})}function l(p){return"Sets the calendar system to use with `"+p+"` date data."}var c={xcalendar:o(l("x"))},d=k.extendFlat({},c,{ycalendar:o(l("y"))}),u=k.extendFlat({},d,{zcalendar:o(l("z"))}),x=o(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));F.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:d,bar:d,box:d,heatmap:d,contour:d,histogram:d,histogram2d:d,histogram2dcontour:d,scatter3d:u,surface:u,mesh3d:u,scattergl:d,ohlc:c,candlestick:c},layout:{calendar:o(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:o(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:f,handleDefaults:s,handleTraceDefaults:function(p,g,m,y){for(var v=0;v<m.length;v++)s(p,g,m[v]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(p,g,m){for(var y,v,_,h,S,A=Math.floor((g+.05)/b)+w,E=n(m).fromJD(A),P=0;(P=p.indexOf("%",P))!==-1;)(y=p.charAt(P+1))==="0"||y==="-"||y==="_"?(_=3,v=p.charAt(P+2),y==="_"&&(y="-")):(v=y,y="0",_=2),(h=i[v])?(S=h===t?t:E.formatDate(h[y]),p=p.substr(0,P)+S+p.substr(P+_),P+=S.length):P+=_;return p}}},22548:function(F,C){"use strict";C.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],C.defaultLine="#444",C.lightLine="#eee",C.background="#fff",C.borderLine="#BEC8D9",C.lightFraction=90.9090909090909},76308:function(F,C,e){"use strict";var T=e(49760),k=e(38248),a=e(38116).isTypedArray,w=F.exports={},b=e(22548);w.defaults=b.defaults;var f=w.defaultLine=b.defaultLine;w.lightLine=b.lightLine;var s=w.background=b.background;function t(i){if(k(i)||typeof i!="string")return i;var r=i.trim();if(r.substr(0,3)!=="rgb")return i;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return i;var o=n[1].trim().split(/\s*[\s,]\s*/),l=r.charAt(3)==="a"&&o.length===4;if(!l&&o.length!==3)return i;for(var c=0;c<o.length;c++){if(!o[c].length||(o[c]=Number(o[c]),!(o[c]>=0)))return i;if(c===3)o[c]>1&&(o[c]=1);else if(o[c]>=1)return i}var d=Math.round(255*o[0])+", "+Math.round(255*o[1])+", "+Math.round(255*o[2]);return l?"rgba("+d+", "+o[3]+")":"rgb("+d+")"}w.tinyRGB=function(i){var r=i.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},w.rgb=function(i){return w.tinyRGB(T(i))},w.opacity=function(i){return i?T(i).getAlpha():0},w.addOpacity=function(i,r){var n=T(i).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},w.combine=function(i,r){var n=T(i).toRgb();if(n.a===1)return T(i).toRgbString();var o=T(r||s).toRgb(),l=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},c={r:l.r*(1-n.a)+n.r*n.a,g:l.g*(1-n.a)+n.g*n.a,b:l.b*(1-n.a)+n.b*n.a};return T(c).toRgbString()},w.interpolate=function(i,r,n){var o=T(i).toRgb(),l=T(r).toRgb(),c={r:n*o.r+(1-n)*l.r,g:n*o.g+(1-n)*l.g,b:n*o.b+(1-n)*l.b};return T(c).toRgbString()},w.contrast=function(i,r,n){var o=T(i);return o.getAlpha()!==1&&(o=T(w.combine(i,s))),(o.isDark()?r?o.lighten(r):s:n?o.darken(n):f).toString()},w.stroke=function(i,r){var n=T(r);i.style({stroke:w.tinyRGB(n),"stroke-opacity":n.getAlpha()})},w.fill=function(i,r){var n=T(r);i.style({fill:w.tinyRGB(n),"fill-opacity":n.getAlpha()})},w.clean=function(i){if(i&&typeof i=="object"){var r,n,o,l,c=Object.keys(i);for(r=0;r<c.length;r++)if(l=i[o=c[r]],o.substr(o.length-5)==="color")if(Array.isArray(l))for(n=0;n<l.length;n++)l[n]=t(l[n]);else i[o]=t(l);else if(o.substr(o.length-10)==="colorscale"&&Array.isArray(l))for(n=0;n<l.length;n++)Array.isArray(l[n])&&(l[n][1]=t(l[n][1]));else if(Array.isArray(l)){var d=l[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(n=0;n<l.length;n++)w.clean(l[n])}else l&&typeof l=="object"&&!a(l)&&w.clean(l)}}},42996:function(F,C,e){"use strict";var T=e(94724),k=e(25376),a=e(92880).extendFlat,w=e(67824).overrideAll;F.exports=w({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:T.linecolor,outlinewidth:T.linewidth,bordercolor:T.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:T.minor.tickmode,nticks:T.nticks,tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:a({},T.ticks,{dflt:""}),ticklabeloverflow:a({},T.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,labelalias:T.labelalias,tickfont:k({}),tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,tickprefix:T.tickprefix,showtickprefix:T.showtickprefix,ticksuffix:T.ticksuffix,showticksuffix:T.showticksuffix,separatethousands:T.separatethousands,exponentformat:T.exponentformat,minexponent:T.minexponent,showexponent:T.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(F){"use strict";F.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(F,C,e){"use strict";var T=e(3400),k=e(31780),a=e(26332),w=e(25404),b=e(95936),f=e(42568),s=e(42996);F.exports=function(t,i,r){var n=k.newContainer(i,"colorbar"),o=t.colorbar||{};function l(z,V){return T.coerce(o,n,s,z,V)}var c=r.margin||{t:0,b:0,l:0,r:0},d=r.width-c.l-c.r,u=r.height-c.t-c.b,x=l("orientation")==="v",p=l("thicknessmode");l("thickness",p==="fraction"?30/(x?d:u):30);var g=l("lenmode");l("len",g==="fraction"?1:x?u:d);var m,y,v,_=l("yref")==="paper",h=l("xref")==="paper",S="left";x?(v="middle",S=h?"left":"right",m=h?1.02:1,y=.5):(v=_?"bottom":"top",S="center",m=.5,y=_?1.02:1),T.coerce(o,n,{x:{valType:"number",min:h?-2:0,max:h?3:1,dflt:m}},"x"),T.coerce(o,n,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:y}},"y"),l("xanchor",S),l("xpad"),l("yanchor",v),l("ypad"),T.noneOrAll(o,n,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var A=T.coerce(o,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",A.indexOf("inside")!==-1?"hide past domain":"hide past div"),a(o,n,l,"linear");var E=r.font,P={noAutotickangles:!0,outerTicks:!1,font:E};A.indexOf("inside")!==-1&&(P.bgColor="black"),f(o,n,l,"linear",P),b(o,n,l,"linear",P),w(o,n,l,"linear",P),l("title.text",r._dfltTitle.colorbar);var I=n.showticklabels?n.tickfont:E,D=T.extendFlat({},E,{family:I.family,size:T.bigFont(I.size)});T.coerceFont(l,"title.font",D),l("title.side",x?"top":"right")}},37848:function(F,C,e){"use strict";var T=e(33428),k=e(49760),a=e(7316),w=e(24040),b=e(54460),f=e(86476),s=e(3400),t=s.strTranslate,i=e(92880).extendFlat,r=e(93972),n=e(43616),o=e(76308),l=e(81668),c=e(72736),d=e(94288).flipScale,u=e(28336),x=e(37668),p=e(94724),g=e(84284),m=g.LINE_SPACING,y=g.FROM_TL,v=g.FROM_BR,_=e(63964).cn;F.exports={draw:function(h){var S=h._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(A){var E,P,I,D,z=A._fullLayout,V=A.calcdata,O=[];function j(ie){return i(ie,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Y(){typeof D.calc=="function"?D.calc(A,I,E):(E._fillgradient=P.reversescale?d(P.colorscale):P.colorscale,E._zrange=[P[D.min],P[D.max]])}for(var B=0;B<V.length;B++){var U=V[B];if((I=U[0].trace)._module){var q=I._module.colorbar;if(I.visible===!0&&q)for(var te=Array.isArray(q),ee=te?q:[q],Q=0;Q<ee.length;Q++){var J=(D=ee[Q]).container;(P=J?I[J]:I)&&P.showscale&&((E=j(P.colorbar))._id="cb"+I.uid+(te&&J?"-"+J:""),E._traceIndex=I.index,E._propPrefix=(J?J+".":"")+"colorbar.",E._meta=I._meta,Y(),O.push(E))}}}for(var K in z._colorAxes)if((P=z[K]).showscale){var X=z._colorAxes[K];(E=j(P.colorbar))._id="cb"+K,E._propPrefix=K+".colorbar.",E._meta=z._meta,D={min:"cmin",max:"cmax"},X[0]!=="heatmap"&&(I=X[1],D.calc=I._module.colorbar.calc),Y(),O.push(E)}return O}(h),function(A){return A._id});S.enter().append("g").attr("class",function(A){return A._id}).classed(_.colorbar,!0),S.each(function(A){var E=T.select(this);s.ensureSingle(E,"rect",_.cbbg),s.ensureSingle(E,"g",_.cbfills),s.ensureSingle(E,"g",_.cblines),s.ensureSingle(E,"g",_.cbaxis,function(I){I.classed(_.crisp,!0)}),s.ensureSingle(E,"g",_.cbtitleunshift,function(I){I.append("g").classed(_.cbtitle,!0)}),s.ensureSingle(E,"rect",_.cboutline);var P=function(I,D,z){var V=D.orientation==="v",O=D.len,j=D.lenmode,Y=D.thickness,B=D.thicknessmode,U=D.outlinewidth,q=D.borderwidth,te=D.bgcolor,ee=D.xanchor,Q=D.yanchor,J=D.xpad,K=D.ypad,X=D.x,ie=V?D.y:1-D.y,se=D.yref==="paper",ae=D.xref==="paper",ue=z._fullLayout,ve=ue._size,ye=D._fillcolor,pe=D._line,de=D.title,me=de.side,ke=D._zrange||T.extent((typeof ye=="function"?ye:pe.color).domain()),Ce=typeof pe.color=="function"?pe.color:function(){return pe.color},ge=typeof ye=="function"?ye:function(){return ye},oe=D._levels,re=function(Ne,Ye,ot){var nt,ze,Fe=Ye._levels,rt=[],We=[],ft=Fe.end+Fe.size/100,mt=Fe.size,vt=1.001*ot[0]-.001*ot[1],ut=1.001*ot[1]-.001*ot[0];for(ze=0;ze<1e5&&(nt=Fe.start+ze*mt,!(mt>0?nt>=ft:nt<=ft));ze++)nt>vt&&nt<ut&&rt.push(nt);if(Ye._fillgradient)We=[0];else if(typeof Ye._fillcolor=="function"){var Mt=Ye._filllevels;if(Mt)for(ft=Mt.end+Mt.size/100,mt=Mt.size,ze=0;ze<1e5&&(nt=Mt.start+ze*mt,!(mt>0?nt>=ft:nt<=ft));ze++)nt>ot[0]&&nt<ot[1]&&We.push(nt);else(We=rt.map(function(bt){return bt-Fe.size/2})).push(We[We.length-1]+Fe.size)}else Ye._fillcolor&&typeof Ye._fillcolor=="string"&&(We=[0]);return Fe.size<0&&(rt.reverse(),We.reverse()),{line:rt,fill:We}}(0,D,ke),fe=re.fill,Se=re.line,be=Math.round(Y*(B==="fraction"?V?ve.w:ve.h:1)),we=be/(V?ve.w:ve.h),Me=Math.round(O*(j==="fraction"?V?ve.h:ve.w:1)),Pe=Me/(V?ve.h:ve.w),De=ae?ve.w:z._fullLayout.width,he=se?ve.h:z._fullLayout.height,_e=Math.round(V?X*De+J:ie*he+K),Ae={center:.5,right:1}[ee]||0,Oe={top:1,middle:.5}[Q]||0,Ee=V?X-Ae*we:ie-Oe*we,Be=V?ie-Oe*Pe:X-Ae*Pe,Ve=Math.round(V?he*(1-Be):De*Be);D._lenFrac=Pe,D._thickFrac=we,D._uFrac=Ee,D._vFrac=Be;var Ze=D._axis=function(Ne,Ye,ot){var nt=Ne._fullLayout,ze=Ye.orientation==="v",Fe={type:"linear",range:ot,tickmode:Ye.tickmode,nticks:Ye.nticks,tick0:Ye.tick0,dtick:Ye.dtick,tickvals:Ye.tickvals,ticktext:Ye.ticktext,ticks:Ye.ticks,ticklen:Ye.ticklen,tickwidth:Ye.tickwidth,tickcolor:Ye.tickcolor,showticklabels:Ye.showticklabels,labelalias:Ye.labelalias,ticklabelposition:Ye.ticklabelposition,ticklabeloverflow:Ye.ticklabeloverflow,ticklabelstep:Ye.ticklabelstep,tickfont:Ye.tickfont,tickangle:Ye.tickangle,tickformat:Ye.tickformat,exponentformat:Ye.exponentformat,minexponent:Ye.minexponent,separatethousands:Ye.separatethousands,showexponent:Ye.showexponent,showtickprefix:Ye.showtickprefix,tickprefix:Ye.tickprefix,showticksuffix:Ye.showticksuffix,ticksuffix:Ye.ticksuffix,title:Ye.title,showline:!0,anchor:"free",side:ze?"right":"bottom",position:1},rt=ze?"y":"x",We={type:"linear",_id:rt+Ye._id},ft={letter:rt,font:nt.font,noAutotickangles:rt==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:nt.calendar};function mt(vt,ut){return s.coerce(Fe,We,p,vt,ut)}return u(Fe,We,mt,ft,nt),x(Fe,We,mt,ft),We}(z,D,ke);Ze.position=we+(V?X+J/ve.w:ie+K/ve.h);var it=["top","bottom"].indexOf(me)!==-1;if(V&&it&&(Ze.title.side=me,Ze.titlex=X+J/ve.w,Ze.titley=Be+(de.side==="top"?Pe-K/ve.h:K/ve.h)),V||it||(Ze.title.side=me,Ze.titley=ie+K/ve.h,Ze.titlex=Be+J/ve.w),pe.color&&D.tickmode==="auto"){Ze.tickmode="linear",Ze.tick0=oe.start;var at=oe.size,gt=s.constrain(Me/50,4,15)+1,yt=(ke[1]-ke[0])/((D.nticks||gt)*at);if(yt>1){var pt=Math.pow(10,Math.floor(Math.log(yt)/Math.LN10));at*=pt*s.roundUp(yt/pt,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(Ze.tick0=0)}Ze.dtick=at}Ze.domain=V?[Be+K/ve.h,Be+Pe-K/ve.h]:[Be+J/ve.w,Be+Pe-J/ve.w],Ze.setScale(),I.attr("transform",t(Math.round(ve.l),Math.round(ve.t)));var et,$e=I.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(ve.l),-Math.round(ve.t))),At=Ze.ticklabelposition,Ot=Ze.title.font.size,Rt=I.select("."+_.cbaxis),Ct=0,Ge=0;function Xe(Ne,Ye){var ot={propContainer:Ze,propName:D._propPrefix+"title",traceIndex:D._traceIndex,_meta:D._meta,placeholder:ue._dfltTitle.colorbar,containerGroup:I.select("."+_.cbtitle)},nt=Ne.charAt(0)==="h"?Ne.substr(1):"h"+Ne;I.selectAll("."+nt+",."+nt+"-math-group").remove(),l.draw(z,Ne,i(ot,Ye||{}))}return s.syncOrAsync([a.previousPromises,function(){var Ne,Ye;(V&&it||!V&&!it)&&(me==="top"&&(Ne=J+ve.l+De*X,Ye=K+ve.t+he*(1-Be-Pe)+3+.75*Ot),me==="bottom"&&(Ne=J+ve.l+De*X,Ye=K+ve.t+he*(1-Be)-3-.25*Ot),me==="right"&&(Ye=K+ve.t+he*ie+3+.75*Ot,Ne=J+ve.l+De*Be),Xe(Ze._id+"title",{attributes:{x:Ne,y:Ye,"text-anchor":V?"start":"middle"}}))},function(){if(!V&&!it||V&&it){var Ne,Ye=I.select("."+_.cbtitle),ot=Ye.select("text"),nt=[-U/2,U/2],ze=Ye.select(".h"+Ze._id+"title-math-group").node(),Fe=15.6;if(ot.node()&&(Fe=parseInt(ot.node().style.fontSize,10)*m),ze?(Ne=n.bBox(ze),Ge=Ne.width,(Ct=Ne.height)>Fe&&(nt[1]-=(Ct-Fe)/2)):ot.node()&&!ot.classed(_.jsPlaceholder)&&(Ne=n.bBox(ot.node()),Ge=Ne.width,Ct=Ne.height),V){if(Ct){if(Ct+=5,me==="top")Ze.domain[1]-=Ct/ve.h,nt[1]*=-1;else{Ze.domain[0]+=Ct/ve.h;var rt=c.lineCount(ot);nt[1]+=(1-rt)*Fe}Ye.attr("transform",t(nt[0],nt[1])),Ze.setScale()}}else Ge&&(me==="right"&&(Ze.domain[0]+=(Ge+Ot/2)/ve.w),Ye.attr("transform",t(nt[0],nt[1])),Ze.setScale())}I.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",V?t(0,Math.round(ve.h*(1-Ze.domain[1]))):t(Math.round(ve.w*Ze.domain[0]),0)),Rt.attr("transform",V?t(0,Math.round(-ve.t)):t(Math.round(-ve.l),0));var We=I.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(fe);We.enter().append("rect").classed(_.cbfill,!0).attr("style",""),We.exit().remove();var ft=ke.map(Ze.c2p).map(Math.round).sort(function(bt,St){return bt-St});We.each(function(bt,St){var Pt=[St===0?ke[0]:(fe[St]+fe[St-1])/2,St===fe.length-1?ke[1]:(fe[St]+fe[St+1])/2].map(Ze.c2p).map(Math.round);V&&(Pt[1]=s.constrain(Pt[1]+(Pt[1]>Pt[0])?1:-1,ft[0],ft[1]));var Dt=T.select(this).attr(V?"x":"y",_e).attr(V?"y":"x",T.min(Pt)).attr(V?"width":"height",Math.max(be,2)).attr(V?"height":"width",Math.max(T.max(Pt)-T.min(Pt),2));if(D._fillgradient)n.gradient(Dt,z,D._id,V?"vertical":"horizontalreversed",D._fillgradient,"fill");else{var Ft=ge(bt).replace("e-","");Dt.attr("fill",k(Ft).toHexString())}});var mt=I.select("."+_.cblines).selectAll("path."+_.cbline).data(pe.color&&pe.width?Se:[]);mt.enter().append("path").classed(_.cbline,!0),mt.exit().remove(),mt.each(function(bt){var St=_e,Pt=Math.round(Ze.c2p(bt))+pe.width/2%1;T.select(this).attr("d","M"+(V?St+","+Pt:Pt+","+St)+(V?"h":"v")+be).call(n.lineGroupStyle,pe.width,Ce(bt),pe.dash)}),Rt.selectAll("g."+Ze._id+"tick,path").remove();var vt=_e+be+(U||0)/2-(D.ticks==="outside"?1:0),ut=b.calcTicks(Ze),Mt=b.getTickSigns(Ze)[2];return b.drawTicks(z,Ze,{vals:Ze.ticks==="inside"?b.clipEnds(Ze,ut):ut,layer:Rt,path:b.makeTickPath(Ze,vt,Mt),transFn:b.makeTransTickFn(Ze)}),b.drawLabels(z,Ze,{vals:ut,layer:Rt,transFn:b.makeTransTickLabelFn(Ze),labelFns:b.makeLabelFns(Ze,vt)})},function(){if(V&&!it||!V&&it){var Ne,Ye,ot=Ze.position||0,nt=Ze._offset+Ze._length/2;if(me==="right")Ye=nt,Ne=ve.l+De*ot+10+Ot*(Ze.showticklabels?1:.5);else if(Ne=nt,me==="bottom"&&(Ye=ve.t+he*ot+10+(At.indexOf("inside")===-1?Ze.tickfont.size:0)+(Ze.ticks!=="intside"&&D.ticklen||0)),me==="top"){var ze=de.text.split("<br>").length;Ye=ve.t+he*ot+10-be-m*Ot*ze}Xe((V?"h":"v")+Ze._id+"title",{avoid:{selection:T.select(z).selectAll("g."+Ze._id+"tick"),side:me,offsetTop:V?0:ve.t,offsetLeft:V?ve.l:0,maxShift:V?ue.width:ue.height},attributes:{x:Ne,y:Ye,"text-anchor":"middle"},transform:{rotate:V?-90:0,offset:0}})}},a.previousPromises,function(){var Ne,Ye=be+U/2;At.indexOf("inside")===-1&&(Ne=n.bBox(Rt.node()),Ye+=V?Ne.width:Ne.height),et=$e.select("text");var ot=0,nt=V&&me==="top",ze=!V&&me==="right",Fe=0;if(et.node()&&!et.classed(_.jsPlaceholder)){var rt,We=$e.select(".h"+Ze._id+"title-math-group").node();We&&(V&&it||!V&&!it)?(ot=(Ne=n.bBox(We)).width,rt=Ne.height):(ot=(Ne=n.bBox($e.node())).right-ve.l-(V?_e:Ve),rt=Ne.bottom-ve.t-(V?Ve:_e),V||me!=="top"||(Ye+=Ne.height,Fe=Ne.height)),ze&&(et.attr("transform",t(ot/2+Ot/2,0)),ot*=2),Ye=Math.max(Ye,V?ot:rt)}var ft=2*(V?J:K)+Ye+q+U/2,mt=0;!V&&de.text&&Q==="bottom"&&ie<=0&&(ft+=mt=ft/2,Fe+=mt),ue._hColorbarMoveTitle=mt,ue._hColorbarMoveCBTitle=Fe;var vt=q+U,ut=(V?_e:Ve)-vt/2-(V?J:0),Mt=(V?Ve:_e)-(V?Me:K+Fe-mt);I.select("."+_.cbbg).attr("x",ut).attr("y",Mt).attr(V?"width":"height",Math.max(ft-mt,2)).attr(V?"height":"width",Math.max(Me+vt,2)).call(o.fill,te).call(o.stroke,D.bordercolor).style("stroke-width",q);var bt=ze?Math.max(ot-10,0):0;I.selectAll("."+_.cboutline).attr("x",(V?_e:Ve+J)+bt).attr("y",(V?Ve+K-Me:_e)+(nt?Ct:0)).attr(V?"width":"height",Math.max(be,2)).attr(V?"height":"width",Math.max(Me-(V?2*K+Ct:2*J+bt),2)).call(o.stroke,D.outlinecolor).style({fill:"none","stroke-width":U});var St=V?Ae*ft:0,Pt=V?0:(1-Oe)*ft-Fe;if(St=ae?ve.l-St:-St,Pt=se?ve.t-Pt:-Pt,I.attr("transform",t(St,Pt)),!V&&(q||k(te).getAlpha()&&!k.equals(ue.paper_bgcolor,te))){var Dt=Rt.selectAll("text"),Ft=Dt[0].length,Xt=I.select("."+_.cbbg).node(),an=n.bBox(Xt),Ht=n.getTranslate(I);Dt.each(function(bn,wn){var Cn=Ft-1;if(wn===0||wn===Cn){var Ln,Mn=n.bBox(this),jn=n.getTranslate(this);if(wn===Cn){var Rn=Mn.right+jn.x;(Ln=an.right+Ht.x+Ve-q-2+X-Rn)>0&&(Ln=0)}else if(wn===0){var Qn=Mn.left+jn.x;(Ln=an.left+Ht.x+Ve+q+2-Qn)<0&&(Ln=0)}Ln&&(Ft<3?this.setAttribute("transform","translate("+Ln+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Zt={},jt=y[ee],Pn=v[ee],Tn=y[Q],mn=v[Q],Qt=ft-be;V?(j==="pixels"?(Zt.y=ie,Zt.t=Me*Tn,Zt.b=Me*mn):(Zt.t=Zt.b=0,Zt.yt=ie+O*Tn,Zt.yb=ie-O*mn),B==="pixels"?(Zt.x=X,Zt.l=ft*jt,Zt.r=ft*Pn):(Zt.l=Qt*jt,Zt.r=Qt*Pn,Zt.xl=X-Y*jt,Zt.xr=X+Y*Pn)):(j==="pixels"?(Zt.x=X,Zt.l=Me*jt,Zt.r=Me*Pn):(Zt.l=Zt.r=0,Zt.xl=X+O*jt,Zt.xr=X-O*Pn),B==="pixels"?(Zt.y=1-ie,Zt.t=ft*Tn,Zt.b=ft*mn):(Zt.t=Qt*Tn,Zt.b=Qt*mn,Zt.yt=ie-Y*Tn,Zt.yb=ie+Y*mn));var un=D.y<.5?"b":"t",nn=D.x<.5?"l":"r";z._fullLayout._reservedMargin[D._id]={};var hn={r:ue.width-ut-St,l:ut+Zt.r,b:ue.height-Mt-Pt,t:Mt+Zt.b};ae&&se?a.autoMargin(z,D._id,Zt):ae?z._fullLayout._reservedMargin[D._id][un]=hn[un]:se||V?z._fullLayout._reservedMargin[D._id][nn]=hn[nn]:z._fullLayout._reservedMargin[D._id][un]=hn[un]}],z)}(E,A,h);P&&P.then&&(h._promises||[]).push(P),h._context.edits.colorbarPosition&&function(I,D,z){var V,O,j,Y=D.orientation==="v",B=z._fullLayout._size;f.init({element:I.node(),gd:z,prepFn:function(){V=I.attr("transform"),r(I)},moveFn:function(U,q){I.attr("transform",V+t(U,q)),O=f.align((Y?D._uFrac:D._vFrac)+U/B.w,Y?D._thickFrac:D._lenFrac,0,1,D.xanchor),j=f.align((Y?D._vFrac:1-D._uFrac)-q/B.h,Y?D._lenFrac:D._thickFrac,0,1,D.yanchor);var te=f.getCursor(O,j,D.xanchor,D.yanchor);r(I,te)},doneFn:function(){if(r(I),O!==void 0&&j!==void 0){var U={};U[D._propPrefix+"x"]=O,U[D._propPrefix+"y"]=j,D._traceIndex!==void 0?w.call("_guiRestyle",z,U,D._traceIndex):w.call("_guiRelayout",z,U)}}})}(E,A,h)}),S.exit().each(function(A){a.autoMargin(h,A._id)}).remove(),S.order()}}},90553:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k){return T.isPlainObject(k.colorbar)}},55080:function(F,C,e){"use strict";F.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(F,C,e){"use strict";var T=e(42996),k=e(53756).counter,a=e(95376),w=e(88304).scales;function b(f){return"`"+f+"`"}a(w),F.exports=function(f,s){f=f||"";var t,i=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:f==="marker.line"),n="showScaleDflt"in s?s.showScaleDflt:i==="z",o=typeof s.colorscaleDflt=="string"?w[s.colorscaleDflt]:null,l=s.editTypeOverride||"",c=f?f+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):b(c+(t={z:"z",c:"color"}[i]));var d=i+"auto",u=i+"min",x=i+"max",p=i+"mid",g=(b(c+d),b(c+u),b(c+x),{});g[u]=g[x]=void 0;var m={};m[d]=!1;var y={};return t==="color"&&(y.color={valType:"color",arrayOk:!0,editType:l||"style"},s.anim&&(y.color.anim=!0)),y[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},y[u]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:m},y[x]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:m},y[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},y.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},y.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},y.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(y.showscale={valType:"boolean",dflt:n,editType:"calc"},y.colorbar=T),s.noColorAxis||(y.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),y}},47128:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(94288).extractOpts;F.exports=function(w,b,f){var s,t=w._fullLayout,i=f.vals,r=f.containerStr,n=r?k.nestedProperty(b,r).get():b,o=a(n),l=o.auto!==!1,c=o.min,d=o.max,u=o.mid,x=function(){return k.aggNums(Math.min,null,i)},p=function(){return k.aggNums(Math.max,null,i)};c===void 0?c=x():l&&(c=n._colorAx&&T(c)?Math.min(c,x()):x()),d===void 0?d=p():l&&(d=n._colorAx&&T(d)?Math.max(d,p()):p()),l&&u!==void 0&&(d-u>u-c?c=u-(d-u):d-u<u-c&&(d=u+(u-c))),c===d&&(c-=.5,d+=.5),o._sync("min",c),o._sync("max",d),o.autocolorscale&&(s=c*d<0?t.colorscale.diverging:c>=0?t.colorscale.sequential:t.colorscale.sequentialminus,o._sync("colorscale",s))}},95504:function(F,C,e){"use strict";var T=e(3400),k=e(94288).hasColorscale,a=e(94288).extractOpts;F.exports=function(w,b){function f(l,c){var d=l["_"+c];d!==void 0&&(l[c]=d)}function s(l,c){var d=c.container?T.nestedProperty(l,c.container).get():l;if(d)if(d.coloraxis)d._colorAx=b[d.coloraxis];else{var u=a(d),x=u.auto;(x||u.min===void 0)&&f(d,c.min),(x||u.max===void 0)&&f(d,c.max),u.autocolorscale&&f(d,"colorscale")}}for(var t=0;t<w.length;t++){var i=w[t],r=i._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(i,r[n]);else s(i,r);k(i,"marker.line")&&s(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var o in b._colorAxes)s(b[o],{min:"cmin",max:"cmax"})}},27260:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(90553),w=e(64013),b=e(88304).isValid,f=e(24040).traceIs;function s(t,i){var r=i.slice(0,i.length-1);return i?k.nestedProperty(t,r).get()||{}:t}F.exports=function t(i,r,n,o,l){var c=l.prefix,d=l.cLetter,u="_module"in r,x=s(i,c),p=s(r,c),g=s(r._template||{},c)||{},m=function(){return delete i.coloraxis,delete r.coloraxis,t(i,r,n,o,l)};if(u){var y=n._colorAxes||{},v=o(c+"coloraxis");if(v){var _=f(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",h=y[v];return void(h?(h[2].push(m),h[0]!==_&&(h[0]=!1,k.warn(["Ignoring coloraxis:",v,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[v]=[_,r,[m]])}}var S=x[d+"min"],A=x[d+"max"],E=T(S)&&T(A)&&S<A;o(c+d+"auto",!E)?o(c+d+"mid"):(o(c+d+"min"),o(c+d+"max"));var P,I,D=x.colorscale,z=g.colorscale;D!==void 0&&(P=!b(D)),z!==void 0&&(P=!b(z)),o(c+"autocolorscale",P),o(c+"colorscale"),o(c+"reversescale"),c!=="marker.line."&&(c&&u&&(I=a(x)),o(c+"showscale",I)&&(c&&g&&(p._template=g),w(x,p,n)))}},94288:function(F,C,e){"use strict";var T=e(33428),k=e(49760),a=e(38248),w=e(3400),b=e(76308),f=e(88304).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(c){var d,u,x,p=c._colorAx,g=p||c,m={};for(u=0;u<s.length;u++)m[x=s[u]]=g[x];if(p)for(d="c",u=0;u<t.length;u++)m[x=t[u]]=g["c"+x];else{var y;for(u=0;u<t.length;u++)((y="c"+(x=t[u]))in g||(y="z"+x)in g)&&(m[x]=g[y]);d=y.charAt(0)}return m._sync=function(v,_){var h=t.indexOf(v)!==-1?d+v:v;g[h]=g["_"+h]=_},m}function r(c){for(var d=i(c),u=d.min,x=d.max,p=d.reversescale?n(d.colorscale):d.colorscale,g=p.length,m=new Array(g),y=new Array(g),v=0;v<g;v++){var _=p[v];m[v]=u+_[0]*(x-u),y[v]=_[1]}return{domain:m,range:y}}function n(c){for(var d=c.length,u=new Array(d),x=d-1,p=0;x>=0;x--,p++){var g=c[x];u[p]=[1-g[0],g[1]]}return u}function o(c,d){d=d||{};for(var u=c.domain,x=c.range,p=x.length,g=new Array(p),m=0;m<p;m++){var y=k(x[m]).toRgb();g[m]=[y.r,y.g,y.b,y.a]}var v,_=T.scale.linear().domain(u).range(g).clamp(!0),h=d.noNumericCheck,S=d.returnArray;return(v=h&&S?_:h?function(A){return l(_(A))}:S?function(A){return a(A)?_(A):k(A).isValid()?A:b.defaultLine}:function(A){return a(A)?l(_(A)):k(A).isValid()?A:b.defaultLine}).domain=_.domain,v.range=function(){return x},v}function l(c){var d={r:c[0],g:c[1],b:c[2],a:c[3]};return k(d).toRgbString()}F.exports={hasColorscale:function(c,d,u){var x=d?w.nestedProperty(c,d).get()||{}:c,p=x[u||"color"];p&&p._inputArray&&(p=p._inputArray);var g=!1;if(w.isArrayOrTypedArray(p)){for(var m=0;m<p.length;m++)if(a(p[m])){g=!0;break}}return w.isPlainObject(x)&&(g||x.showscale===!0||a(x.cmin)&&a(x.cmax)||f(x.colorscale)||w.isPlainObject(x.colorbar))},extractOpts:i,extractScale:r,flipScale:n,makeColorScaleFunc:o,makeColorScaleFuncFromTrace:function(c,d){return o(r(c),d)}}},8932:function(F,C,e){"use strict";var T=e(88304),k=e(94288);F.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:T.scales,defaultScale:T.defaultScale,getScale:T.get,isValidScale:T.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(F,C,e){"use strict";var T=e(92880).extendFlat,k=e(49084),a=e(88304).scales;F.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}},coloraxis:T({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(F,C,e){"use strict";var T=e(3400),k=e(31780),a=e(92332),w=e(27260);F.exports=function(b,f){function s(d,u){return T.coerce(b,f,a,d,u)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,i,r=f._colorAxes;function n(d,u){return T.coerce(t,i,a.coloraxis,d,u)}for(var o in r){var l=r[o];if(l[0])t=b[o]||{},(i=k.newContainer(f,o,"coloraxis"))._name=o,w(t,i,f,n,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete f._colorAxes[o]}}}},88304:function(F,C,e){"use strict";var T=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=k.RdBu;function w(b){var f=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var s=0;s<b.length;s++){var t=b[s];if(t.length!==2||+t[0]<f||!T(t[1]).isValid())return!1;f=+t[0]}return!0}F.exports={scales:k,defaultScale:a,get:function(b,f){if(f||(f=a),!b)return f;function s(){try{b=k[b]||JSON.parse(b)}catch{b=f}}return typeof b=="string"&&(s(),typeof b=="string"&&s()),w(b)?b:f},isValid:function(b){return k[b]!==void 0||w(b)}}},78316:function(F){"use strict";F.exports=function(C,e,T,k,a){var w=(C-T)/(k-T),b=w+e/(k-T),f=(w+b)/2;return a==="left"||a==="bottom"?w:a==="center"||a==="middle"?f:a==="right"||a==="top"?b:w<.6666666666666666-f?w:b>1.3333333333333333-f?b:f}},67416:function(F,C,e){"use strict";var T=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];F.exports=function(a,w,b,f){return a=b==="left"?0:b==="center"?1:b==="right"?2:T.constrain(Math.floor(3*a),0,2),w=f==="bottom"?0:f==="middle"?1:f==="top"?2:T.constrain(Math.floor(3*w),0,2),k[w][a]}},72760:function(F,C){"use strict";C.selectMode=function(e){return e==="lasso"||e==="select"},C.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},C.openMode=function(e){return e==="drawline"||e==="drawopenpath"},C.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},C.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},C.selectingOrDrawing=function(e){return C.freeMode(e)||C.rectMode(e)}},86476:function(F,C,e){"use strict";var T=e(29128),k=e(52264),a=e(89184),w=e(3400).removeElement,b=e(33816),f=F.exports={};f.align=e(78316),f.getCursor=e(67416);var s=e(2616);function t(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function i(r){return T(r.changedTouches?r.changedTouches[0]:r,document.body)}f.unhover=s.wrapped,f.unhoverRaw=s.raw,f.init=function(r){var n,o,l,c,d,u,x,p,g=r.gd,m=1,y=g._context.doubleClickDelay,v=r.element;g._mouseDownTime||(g._mouseDownTime=0),v.style.pointerEvents="all",v.onmousedown=h,a?(v._ontouchstart&&v.removeEventListener("touchstart",v._ontouchstart),v._ontouchstart=h,v.addEventListener("touchstart",h,{passive:!1})):v.ontouchstart=h;var _=r.clampFn||function(E,P,I){return Math.abs(E)<I&&(E=0),Math.abs(P)<I&&(P=0),[E,P]};function h(E){g._dragged=!1,g._dragging=!0;var P=i(E);n=P[0],o=P[1],x=E.target,u=E,p=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=o),(l=new Date().getTime())-g._mouseDownTime<y?m+=1:(m=1,g._mouseDownTime=l),r.prepFn&&r.prepFn(E,n,o),k&&!p?(d=t()).style.cursor=window.getComputedStyle(v).cursor:k||(d=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(v).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var P=i(E),I=r.minDrag||b.MINDRAG,D=_(P[0]-n,P[1]-o,I),z=D[0],V=D[1];(z||V)&&(g._dragged=!0,f.unhover(g,E)),g._dragged&&r.moveFn&&!p&&(g._dragdata={element:v,dx:z,dy:V},r.moveFn(z,V))}function A(E){if(delete g._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),k?w(d):c&&(d.documentElement.style.cursor=c,c=null),g._dragging){if(g._dragging=!1,new Date().getTime()-g._mouseDownTime>y&&(m=Math.max(m-1,1)),g._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(m,u),!p){var P;try{P=new MouseEvent("click",E)}catch{var I=i(E);(P=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,I[0],I[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(P)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},f.coverSlip=t},2616:function(F,C,e){"use strict";var T=e(95924),k=e(91200),a=e(52200).getGraphDiv,w=e(92456),b=F.exports={};b.wrapped=function(f,s,t){(f=a(f))._fullLayout&&k.clear(f._fullLayout._uid+w.HOVERID),b.raw(f,s,t)},b.raw=function(f,s){var t=f._fullLayout,i=f._hoverdata;s||(s={}),s.target&&!f._dragged&&T.triggerHandler(f,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),f._hoverdata=void 0,s.target&&i&&f.emit("plotly_unhover",{event:s,points:i}))}},98192:function(F,C){"use strict";C.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},C.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=k.numberFormat,w=e(38248),b=e(49760),f=e(24040),s=e(76308),t=e(8932),i=k.strTranslate,r=e(72736),n=e(9616),o=e(84284).LINE_SPACING,l=e(13448).DESELECTDIM,c=e(43028),d=e(7152),u=e(10624).appendArrayPointValue,x=F.exports={};function p(ge){return ge==="none"?void 0:ge}x.font=function(ge,oe){var re=oe.variant,fe=oe.style,Se=oe.weight,be=oe.color,we=oe.size,Me=oe.family,Pe=oe.shadow,De=oe.lineposition,he=oe.textcase;Me&&ge.style("font-family",Me),we+1&&ge.style("font-size",we+"px"),be&&ge.call(s.fill,be),Se&&ge.style("font-weight",Se),fe&&ge.style("font-style",fe),re&&ge.style("font-variant",re),he&&ge.style("text-transform",p(function(_e){return g[_e]}(he))),Pe&&ge.style("text-shadow",Pe==="auto"?r.makeTextShadow(s.contrast(be)):p(Pe)),De&&ge.style("text-decoration-line",p(function(_e){return _e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}(De)))};var g={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function m(ge,oe,re,fe){var Se=oe.fillpattern,be=oe.fillgradient,we=Se&&x.getPatternAttr(Se.shape,0,"");if(we){var Me=x.getPatternAttr(Se.bgcolor,0,null),Pe=x.getPatternAttr(Se.fgcolor,0,null),De=Se.fgopacity,he=x.getPatternAttr(Se.size,0,8),_e=x.getPatternAttr(Se.solidity,0,.3),Ae=oe.uid;x.pattern(ge,"point",re,Ae,we,he,_e,void 0,Se.fillmode,Me,Pe,De)}else if(be&&be.type!=="none"){var Oe,Ee,Be=be.type,Ve="scatterfill-"+oe.uid;fe&&(Ve="legendfill-"+oe.uid),fe||be.start===void 0&&be.stop===void 0?(Be==="horizontal"&&(Be+="reversed"),ge.call(x.gradient,re,Ve,Be,be.colorscale,"fill")):(Be==="horizontal"?(Oe={x:be.start,y:0},Ee={x:be.stop,y:0}):Be==="vertical"&&(Oe={x:0,y:be.start},Ee={x:0,y:be.stop}),Oe.x=oe._xA.c2p(Oe.x===void 0?oe._extremes.x.min[0].val:Oe.x,!0),Oe.y=oe._yA.c2p(Oe.y===void 0?oe._extremes.y.min[0].val:Oe.y,!0),Ee.x=oe._xA.c2p(Ee.x===void 0?oe._extremes.x.max[0].val:Ee.x,!0),Ee.y=oe._yA.c2p(Ee.y===void 0?oe._extremes.y.max[0].val:Ee.y,!0),ge.call(A,re,Ve,"linear",be.colorscale,"fill",Oe,Ee,!0,!1))}else oe.fillcolor&&ge.call(s.fill,oe.fillcolor)}x.setPosition=function(ge,oe,re){ge.attr("x",oe).attr("y",re)},x.setSize=function(ge,oe,re){ge.attr("width",oe).attr("height",re)},x.setRect=function(ge,oe,re,fe,Se){ge.call(x.setPosition,oe,re).call(x.setSize,fe,Se)},x.translatePoint=function(ge,oe,re,fe){var Se=re.c2p(ge.x),be=fe.c2p(ge.y);return!!(w(Se)&&w(be)&&oe.node())&&(oe.node().nodeName==="text"?oe.attr("x",Se).attr("y",be):oe.attr("transform",i(Se,be)),!0)},x.translatePoints=function(ge,oe,re){ge.each(function(fe){var Se=T.select(this);x.translatePoint(fe,Se,oe,re)})},x.hideOutsideRangePoint=function(ge,oe,re,fe,Se,be){oe.attr("display",re.isPtWithinRange(ge,Se)&&fe.isPtWithinRange(ge,be)?null:"none")},x.hideOutsideRangePoints=function(ge,oe){if(oe._hasClipOnAxisFalse){var re=oe.xaxis,fe=oe.yaxis;ge.each(function(Se){var be=Se[0].trace,we=be.xcalendar,Me=be.ycalendar,Pe=f.traceIs(be,"bar-like")?".bartext":".point,.textpoint";ge.selectAll(Pe).each(function(De){x.hideOutsideRangePoint(De,T.select(this),re,fe,we,Me)})})}},x.crispRound=function(ge,oe,re){return oe&&w(oe)?ge._context.staticPlot?oe:oe<1?1:Math.round(oe):re||0},x.singleLineStyle=function(ge,oe,re,fe,Se){oe.style("fill","none");var be=(((ge||[])[0]||{}).trace||{}).line||{},we=re||be.width||0,Me=Se||be.dash||"";s.stroke(oe,fe||be.color),x.dashLine(oe,Me,we)},x.lineGroupStyle=function(ge,oe,re,fe){ge.style("fill","none").each(function(Se){var be=(((Se||[])[0]||{}).trace||{}).line||{},we=oe||be.width||0,Me=fe||be.dash||"";T.select(this).call(s.stroke,re||be.color).call(x.dashLine,Me,we)})},x.dashLine=function(ge,oe,re){re=+re||0,oe=x.dashStyle(oe,re),ge.style({"stroke-dasharray":oe,"stroke-width":re+"px"})},x.dashStyle=function(ge,oe){oe=+oe||1;var re=Math.max(oe,3);return ge==="solid"?ge="":ge==="dot"?ge=re+"px,"+re+"px":ge==="dash"?ge=3*re+"px,"+3*re+"px":ge==="longdash"?ge=5*re+"px,"+5*re+"px":ge==="dashdot"?ge=3*re+"px,"+re+"px,"+re+"px,"+re+"px":ge==="longdashdot"&&(ge=5*re+"px,"+2*re+"px,"+re+"px,"+2*re+"px"),ge},x.singleFillStyle=function(ge,oe){var re=T.select(ge.node());m(ge,((re.data()[0]||[])[0]||{}).trace||{},oe,!1)},x.fillGroupStyle=function(ge,oe,re){ge.style("stroke-width",0).each(function(fe){var Se=T.select(this);fe[0].trace&&m(Se,fe[0].trace,oe,re)})};var y=e(71984);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(y).forEach(function(ge){var oe=y[ge],re=oe.n;x.symbolList.push(re,String(re),ge,re+100,String(re+100),ge+"-open"),x.symbolNames[re]=ge,x.symbolFuncs[re]=oe.f,x.symbolBackOffs[re]=oe.backoff||0,oe.needLine&&(x.symbolNeedLines[re]=!0),oe.noDot?x.symbolNoDot[re]=!0:x.symbolList.push(re+200,String(re+200),ge+"-dot",re+300,String(re+300),ge+"-open-dot"),oe.noFill&&(x.symbolNoFill[re]=!0)});var v=x.symbolNames.length;function _(ge,oe,re,fe){var Se=ge%100;return x.symbolFuncs[Se](oe,re,fe)+(ge>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(ge){if(w(ge))ge=+ge;else if(typeof ge=="string"){var oe=0;ge.indexOf("-open")>0&&(oe=100,ge=ge.replace("-open","")),ge.indexOf("-dot")>0&&(oe+=200,ge=ge.replace("-dot","")),(ge=x.symbolNames.indexOf(ge))>=0&&(ge+=oe)}return ge%100>=v||ge>=400?0:Math.floor(Math.max(ge,0))};var h=a("~f"),S={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function A(ge,oe,re,fe,Se,be,we,Me,Pe,De){var he,_e=Se.length;fe==="linear"?he={node:"linearGradient",attrs:{x1:we.x,y1:we.y,x2:Me.x,y2:Me.y,gradientUnits:Pe?"userSpaceOnUse":"objectBoundingBox"},reversed:De}:fe==="radial"&&(he={node:"radialGradient",reversed:De});for(var Ae=new Array(_e),Oe=0;Oe<_e;Oe++)he.reversed?Ae[_e-1-Oe]=[h(100*(1-Se[Oe][0])),Se[Oe][1]]:Ae[Oe]=[h(100*Se[Oe][0]),Se[Oe][1]];var Ee=oe._fullLayout,Be="g"+Ee._uid+"-"+re,Ve=Ee._defs.select(".gradients").selectAll("#"+Be).data([fe+Ae.join(";")],k.identity);Ve.exit().remove(),Ve.enter().append(he.node).each(function(){var Ze=T.select(this);he.attrs&&Ze.attr(he.attrs),Ze.attr("id",Be);var it=Ze.selectAll("stop").data(Ae);it.exit().remove(),it.enter().append("stop"),it.each(function(at){var gt=b(at[1]);T.select(this).attr({offset:at[0]+"%","stop-color":s.tinyRGB(gt),"stop-opacity":gt.getAlpha()})})}),ge.style(be,Q(Be,oe)).style(be+"-opacity",null),ge.classed("gradient_filled",!0)}x.gradient=function(ge,oe,re,fe,Se,be){var we=S[fe];return A(ge,oe,re,we.type,Se,be,we.start,we.stop,!1,we.reversed)},x.pattern=function(ge,oe,re,fe,Se,be,we,Me,Pe,De,he,_e){var Ae=oe==="legend";Me&&(Pe==="overlay"?(De=Me,he=s.contrast(De)):(De=void 0,he=Me));var Oe,Ee,Be,Ve,Ze,it,at,gt,yt,pt=re._fullLayout,et="p"+pt._uid+"-"+fe,$e={},At=b(he),Ot=s.tinyRGB(At),Rt=_e*At.getAlpha();switch(Se){case"/":Oe=be*Math.sqrt(2),Ee=be*Math.sqrt(2),it="path",$e={d:Be="M-"+Oe/4+","+Ee/4+"l"+Oe/2+",-"+Ee/2+"M0,"+Ee+"L"+Oe+",0M"+Oe/4*3+","+Ee/4*5+"l"+Oe/2+",-"+Ee/2,opacity:Rt,stroke:Ot,"stroke-width":(Ve=we*be)+"px"};break;case"\\":Oe=be*Math.sqrt(2),Ee=be*Math.sqrt(2),it="path",$e={d:Be="M"+Oe/4*3+",-"+Ee/4+"l"+Oe/2+","+Ee/2+"M0,0L"+Oe+","+Ee+"M-"+Oe/4+","+Ee/4*3+"l"+Oe/2+","+Ee/2,opacity:Rt,stroke:Ot,"stroke-width":(Ve=we*be)+"px"};break;case"x":Oe=be*Math.sqrt(2),Ee=be*Math.sqrt(2),Be="M-"+Oe/4+","+Ee/4+"l"+Oe/2+",-"+Ee/2+"M0,"+Ee+"L"+Oe+",0M"+Oe/4*3+","+Ee/4*5+"l"+Oe/2+",-"+Ee/2+"M"+Oe/4*3+",-"+Ee/4+"l"+Oe/2+","+Ee/2+"M0,0L"+Oe+","+Ee+"M-"+Oe/4+","+Ee/4*3+"l"+Oe/2+","+Ee/2,Ve=be-be*Math.sqrt(1-we),it="path",$e={d:Be,opacity:Rt,stroke:Ot,"stroke-width":Ve+"px"};break;case"|":it="path",it="path",$e={d:Be="M"+(Oe=be)/2+",0L"+Oe/2+","+(Ee=be),opacity:Rt,stroke:Ot,"stroke-width":(Ve=we*be)+"px"};break;case"-":it="path",it="path",$e={d:Be="M0,"+(Ee=be)/2+"L"+(Oe=be)+","+Ee/2,opacity:Rt,stroke:Ot,"stroke-width":(Ve=we*be)+"px"};break;case"+":it="path",Be="M"+(Oe=be)/2+",0L"+Oe/2+","+(Ee=be)+"M0,"+Ee/2+"L"+Oe+","+Ee/2,Ve=be-be*Math.sqrt(1-we),it="path",$e={d:Be,opacity:Rt,stroke:Ot,"stroke-width":Ve+"px"};break;case".":Oe=be,Ee=be,we<Math.PI/4?Ze=Math.sqrt(we*be*be/Math.PI):(at=we,gt=Math.PI/4,Ze=(yt=be/2)+(be/Math.sqrt(2)-yt)*(at-gt)/(1-gt)),it="circle",$e={cx:Oe/2,cy:Ee/2,r:Ze,opacity:Rt,fill:Ot}}var Ct=[Se||"noSh",De||"noBg",he||"noFg",be,we].join(";"),Ge=pt._defs.select(".patterns").selectAll("#"+et).data([Ct],k.identity);Ge.exit().remove(),Ge.enter().append("pattern").each(function(){var Xe=T.select(this);if(Xe.attr({id:et,width:Oe+"px",height:Ee+"px",patternUnits:"userSpaceOnUse",patternTransform:Ae?"scale(0.8)":""}),De){var Ne=b(De),Ye=s.tinyRGB(Ne),ot=Ne.getAlpha(),nt=Xe.selectAll("rect").data([0]);nt.exit().remove(),nt.enter().append("rect").attr({width:Oe+"px",height:Ee+"px",fill:Ye,"fill-opacity":ot})}var ze=Xe.selectAll(it).data([0]);ze.exit().remove(),ze.enter().append(it).attr($e)}),ge.style("fill",Q(et,re)).style("fill-opacity",null),ge.classed("pattern_filled",!0)},x.initGradients=function(ge){var oe=ge._fullLayout;k.ensureSingle(oe._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),T.select(ge).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(ge){var oe=ge._fullLayout;k.ensureSingle(oe._defs,"g","patterns").selectAll("pattern").remove(),T.select(ge).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(ge,oe,re){return ge&&k.isArrayOrTypedArray(ge)?oe<ge.length?ge[oe]:re:ge},x.pointStyle=function(ge,oe,re,fe){if(ge.size()){var Se=x.makePointStyleFns(oe);ge.each(function(be){x.singlePointStyle(be,T.select(this),oe,Se,re,fe)})}},x.singlePointStyle=function(ge,oe,re,fe,Se,be){var we=re.marker,Me=we.line;if(be&&be.i>=0&&ge.i===void 0&&(ge.i=be.i),oe.style("opacity",fe.selectedOpacityFn?fe.selectedOpacityFn(ge):ge.mo===void 0?we.opacity:ge.mo),fe.ms2mrc){var Pe;Pe=ge.ms==="various"||we.size==="various"?3:fe.ms2mrc(ge.ms),ge.mrc=Pe,fe.selectedSizeFn&&(Pe=ge.mrc=fe.selectedSizeFn(ge));var De=x.symbolNumber(ge.mx||we.symbol)||0;ge.om=De%200>=100;var he=Ce(ge,re),_e=X(ge,re);oe.attr("d",_(De,Pe,he,_e))}var Ae,Oe,Ee,Be=!1;if(ge.so)Ee=Me.outlierwidth,Oe=Me.outliercolor,Ae=we.outliercolor;else{var Ve=(Me||{}).width;Ee=(ge.mlw+1||Ve+1||(ge.trace?(ge.trace.marker.line||{}).width:0)+1)-1||0,Oe="mlc"in ge?ge.mlcc=fe.lineScale(ge.mlc):k.isArrayOrTypedArray(Me.color)?s.defaultLine:Me.color,k.isArrayOrTypedArray(we.color)&&(Ae=s.defaultLine,Be=!0),Ae="mc"in ge?ge.mcc=fe.markerScale(ge.mc):we.color||we.colors||"rgba(0,0,0,0)",fe.selectedColorFn&&(Ae=fe.selectedColorFn(ge))}if(ge.om)oe.call(s.stroke,Ae).style({"stroke-width":(Ee||1)+"px",fill:"none"});else{oe.style("stroke-width",(ge.isBlank?0:Ee)+"px");var Ze=we.gradient,it=ge.mgt;it?Be=!0:it=Ze&&Ze.type,k.isArrayOrTypedArray(it)&&(it=it[0],S[it]||(it=0));var at=we.pattern,gt=at&&x.getPatternAttr(at.shape,ge.i,"");if(it&&it!=="none"){var yt=ge.mgc;yt?Be=!0:yt=Ze.color;var pt=re.uid;Be&&(pt+="-"+ge.i),x.gradient(oe,Se,pt,it,[[0,yt],[1,Ae]],"fill")}else if(gt){var et=!1,$e=at.fgcolor;!$e&&be&&be.color&&($e=be.color,et=!0);var At=x.getPatternAttr($e,ge.i,be&&be.color||null),Ot=x.getPatternAttr(at.bgcolor,ge.i,null),Rt=at.fgopacity,Ct=x.getPatternAttr(at.size,ge.i,8),Ge=x.getPatternAttr(at.solidity,ge.i,.3);et=et||ge.mcc||k.isArrayOrTypedArray(at.shape)||k.isArrayOrTypedArray(at.bgcolor)||k.isArrayOrTypedArray(at.fgcolor)||k.isArrayOrTypedArray(at.size)||k.isArrayOrTypedArray(at.solidity);var Xe=re.uid;et&&(Xe+="-"+ge.i),x.pattern(oe,"point",Se,Xe,gt,Ct,Ge,ge.mcc,at.fillmode,Ot,At,Rt)}else k.isArrayOrTypedArray(Ae)?s.fill(oe,Ae[ge.i]):s.fill(oe,Ae);Ee&&s.stroke(oe,Oe)}},x.makePointStyleFns=function(ge){var oe={},re=ge.marker;return oe.markerScale=x.tryColorscale(re,""),oe.lineScale=x.tryColorscale(re,"line"),f.traceIs(ge,"symbols")&&(oe.ms2mrc=c.isBubble(ge)?d(ge):function(){return(re.size||6)/2}),ge.selectedpoints&&k.extendFlat(oe,x.makeSelectedPointStyleFns(ge)),oe},x.makeSelectedPointStyleFns=function(ge){var oe={},re=ge.selected||{},fe=ge.unselected||{},Se=ge.marker||{},be=re.marker||{},we=fe.marker||{},Me=Se.opacity,Pe=be.opacity,De=we.opacity,he=Pe!==void 0,_e=De!==void 0;(k.isArrayOrTypedArray(Me)||he||_e)&&(oe.selectedOpacityFn=function(gt){var yt=gt.mo===void 0?Se.opacity:gt.mo;return gt.selected?he?Pe:yt:_e?De:l*yt});var Ae=Se.color,Oe=be.color,Ee=we.color;(Oe||Ee)&&(oe.selectedColorFn=function(gt){var yt=gt.mcc||Ae;return gt.selected?Oe||yt:Ee||yt});var Be=Se.size,Ve=be.size,Ze=we.size,it=Ve!==void 0,at=Ze!==void 0;return f.traceIs(ge,"symbols")&&(it||at)&&(oe.selectedSizeFn=function(gt){var yt=gt.mrc||Be/2;return gt.selected?it?Ve/2:yt:at?Ze/2:yt}),oe},x.makeSelectedTextStyleFns=function(ge){var oe={},re=ge.selected||{},fe=ge.unselected||{},Se=ge.textfont||{},be=re.textfont||{},we=fe.textfont||{},Me=Se.color,Pe=be.color,De=we.color;return oe.selectedTextColorFn=function(he){var _e=he.tc||Me;return he.selected?Pe||_e:De||(Pe?_e:s.addOpacity(_e,l))},oe},x.selectedPointStyle=function(ge,oe){if(ge.size()&&oe.selectedpoints){var re=x.makeSelectedPointStyleFns(oe),fe=oe.marker||{},Se=[];re.selectedOpacityFn&&Se.push(function(be,we){be.style("opacity",re.selectedOpacityFn(we))}),re.selectedColorFn&&Se.push(function(be,we){s.fill(be,re.selectedColorFn(we))}),re.selectedSizeFn&&Se.push(function(be,we){var Me=we.mx||fe.symbol||0,Pe=re.selectedSizeFn(we);be.attr("d",_(x.symbolNumber(Me),Pe,Ce(we,oe),X(we,oe))),we.mrc2=Pe}),Se.length&&ge.each(function(be){for(var we=T.select(this),Me=0;Me<Se.length;Me++)Se[Me](we,be)})}},x.tryColorscale=function(ge,oe){var re=oe?k.nestedProperty(ge,oe).get():ge;if(re){var fe=re.color;if((re.colorscale||re._colorAx)&&k.isArrayOrTypedArray(fe))return t.makeColorScaleFuncFromTrace(re)}return k.identity};var E,P,I={start:1,end:-1,middle:0,bottom:1,top:-1};function D(ge,oe,re,fe,Se){var be=T.select(ge.node().parentNode),we=oe.indexOf("top")!==-1?"top":oe.indexOf("bottom")!==-1?"bottom":"middle",Me=oe.indexOf("left")!==-1?"end":oe.indexOf("right")!==-1?"start":"middle",Pe=fe?fe/.8+1:0,De=(r.lineCount(ge)-1)*o+1,he=I[Me]*Pe,_e=.75*re+I[we]*Pe+(I[we]-1)*De*re/2;ge.attr("text-anchor",Me),Se||be.attr("transform",i(he,_e))}function z(ge,oe){var re=ge.ts||oe.textfont.size;return w(re)&&re>0?re:0}function V(ge,oe,re){return re&&(ge=q(ge)),oe?j(ge[1]):O(ge[0])}function O(ge){var oe=T.round(ge,2);return E=oe,oe}function j(ge){var oe=T.round(ge,2);return P=oe,oe}function Y(ge,oe,re,fe){var Se=ge[0]-oe[0],be=ge[1]-oe[1],we=re[0]-oe[0],Me=re[1]-oe[1],Pe=Math.pow(Se*Se+be*be,.25),De=Math.pow(we*we+Me*Me,.25),he=(De*De*Se-Pe*Pe*we)*fe,_e=(De*De*be-Pe*Pe*Me)*fe,Ae=3*De*(Pe+De),Oe=3*Pe*(Pe+De);return[[O(oe[0]+(Ae&&he/Ae)),j(oe[1]+(Ae&&_e/Ae))],[O(oe[0]-(Oe&&he/Oe)),j(oe[1]-(Oe&&_e/Oe))]]}x.textPointStyle=function(ge,oe,re){if(ge.size()){var fe;if(oe.selectedpoints){var Se=x.makeSelectedTextStyleFns(oe);fe=Se.selectedTextColorFn}var be=oe.texttemplate,we=re._fullLayout;ge.each(function(Me){var Pe=T.select(this),De=be?k.extractOption(Me,oe,"txt","texttemplate"):k.extractOption(Me,oe,"tx","text");if(De||De===0){if(be){var he=oe._module.formatLabels,_e=he?he(Me,oe,we):{},Ae={};u(Ae,oe,Me.i);var Oe=oe._meta||{};De=k.texttemplateString(De,_e,we._d3locale,Ae,Me,Oe)}var Ee=Me.tp||oe.textposition,Be=z(Me,oe),Ve=fe?fe(Me):Me.tc||oe.textfont.color;Pe.call(x.font,{family:Me.tf||oe.textfont.family,weight:Me.tw||oe.textfont.weight,style:Me.ty||oe.textfont.style,variant:Me.tv||oe.textfont.variant,textcase:Me.tC||oe.textfont.textcase,lineposition:Me.tE||oe.textfont.lineposition,shadow:Me.tS||oe.textfont.shadow,size:Be,color:Ve}).text(De).call(r.convertToTspans,re).call(D,Ee,Be,Me.mrc)}else Pe.remove()})}},x.selectedTextStyle=function(ge,oe){if(ge.size()&&oe.selectedpoints){var re=x.makeSelectedTextStyleFns(oe);ge.each(function(fe){var Se=T.select(this),be=re.selectedTextColorFn(fe),we=fe.tp||oe.textposition,Me=z(fe,oe);s.fill(Se,be);var Pe=f.traceIs(oe,"bar-like");D(Se,we,Me,fe.mrc2||fe.mrc,Pe)})}},x.smoothopen=function(ge,oe){if(ge.length<3)return"M"+ge.join("L");var re,fe="M"+ge[0],Se=[];for(re=1;re<ge.length-1;re++)Se.push(Y(ge[re-1],ge[re],ge[re+1],oe));for(fe+="Q"+Se[0][0]+" "+ge[1],re=2;re<ge.length-1;re++)fe+="C"+Se[re-2][1]+" "+Se[re-1][0]+" "+ge[re];return fe+"Q"+Se[ge.length-3][1]+" "+ge[ge.length-1]},x.smoothclosed=function(ge,oe){if(ge.length<3)return"M"+ge.join("L")+"Z";var re,fe="M"+ge[0],Se=ge.length-1,be=[Y(ge[Se],ge[0],ge[1],oe)];for(re=1;re<Se;re++)be.push(Y(ge[re-1],ge[re],ge[re+1],oe));for(be.push(Y(ge[Se-1],ge[Se],ge[0],oe)),re=1;re<=Se;re++)fe+="C"+be[re-1][1]+" "+be[re][0]+" "+ge[re];return fe+"C"+be[Se][1]+" "+be[0][0]+" "+ge[0]+"Z"};var B={hv:function(ge,oe,re){return"H"+O(oe[0])+"V"+V(oe,1,re)},vh:function(ge,oe,re){return"V"+j(oe[1])+"H"+V(oe,0,re)},hvh:function(ge,oe,re){return"H"+O((ge[0]+oe[0])/2)+"V"+j(oe[1])+"H"+V(oe,0,re)},vhv:function(ge,oe,re){return"V"+j((ge[1]+oe[1])/2)+"H"+O(oe[0])+"V"+V(oe,1,re)}},U=function(ge,oe,re){return"L"+V(oe,0,re)+","+V(oe,1,re)};function q(ge,oe){var re=ge.backoff,fe=ge.trace,Se=ge.d,be=ge.i;if(re&&fe&&fe.marker&&fe.marker.angle%360==0&&fe.line&&fe.line.shape!=="spline"){var we=k.isArrayOrTypedArray(re),Me=ge,Pe=oe?oe[0]:E||0,De=oe?oe[1]:P||0,he=Me[0],_e=Me[1],Ae=he-Pe,Oe=_e-De,Ee=Math.atan2(Oe,Ae),Be=we?re[be]:re;if(Be==="auto"){var Ve=Me.i;fe.type==="scatter"&&Ve--;var Ze=Me.marker,it=Ze.symbol;k.isArrayOrTypedArray(it)&&(it=it[Ve]);var at=Ze.size;k.isArrayOrTypedArray(at)&&(at=at[Ve]),Be=Ze?x.symbolBackOffs[x.symbolNumber(it)]*at:0,Be+=x.getMarkerStandoff(Se[Ve],fe)||0}var gt=he-Be*Math.cos(Ee),yt=_e-Be*Math.sin(Ee);(gt<=he&&gt>=Pe||gt>=he&&gt<=Pe)&&(yt<=_e&&yt>=De||yt>=_e&&yt<=De)&&(ge=[gt,yt])}return ge}x.steps=function(ge){var oe=B[ge]||U;return function(re){for(var fe="M"+O(re[0][0])+","+j(re[0][1]),Se=re.length,be=1;be<Se;be++)fe+=oe(re[be-1],re[be],be===Se-1);return fe}},x.applyBackoff=q,x.makeTester=function(){var ge=k.ensureSingleById(T.select("body"),"svg","js-plotly-tester",function(re){re.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),oe=k.ensureSingle(ge,"path","js-reference-point",function(re){re.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=ge,x.testref=oe},x.savedBBoxes={};var te=0;function ee(ge){var oe=ge.getAttribute("data-unformatted");if(oe!==null)return oe+ge.getAttribute("data-math")+ge.getAttribute("text-anchor")+ge.getAttribute("style")}function Q(ge,oe){if(!ge)return null;var re=oe._context,fe=re._exportedPlot?"":re._baseUrl||"";return fe?"url('"+fe+"#"+ge+"')":"url(#"+ge+")"}x.bBox=function(ge,oe,re){var fe,Se,be;if(re||(re=ee(ge)),re){if(fe=x.savedBBoxes[re])return k.extendFlat({},fe)}else if(ge.childNodes.length===1){var we=ge.childNodes[0];if(re=ee(we)){var Me=+we.getAttribute("x")||0,Pe=+we.getAttribute("y")||0,De=we.getAttribute("transform");if(!De){var he=x.bBox(we,!1,re);return Me&&(he.left+=Me,he.right+=Me),Pe&&(he.top+=Pe,he.bottom+=Pe),he}if(re+="~"+Me+"~"+Pe+"~"+De,fe=x.savedBBoxes[re])return k.extendFlat({},fe)}}oe?Se=ge:(be=x.tester.node(),Se=ge.cloneNode(!0),be.appendChild(Se)),T.select(Se).attr("transform",null).call(r.positionText,0,0);var _e=Se.getBoundingClientRect(),Ae=x.testref.node().getBoundingClientRect();oe||be.removeChild(Se);var Oe={height:_e.height,width:_e.width,left:_e.left-Ae.left,top:_e.top-Ae.top,right:_e.right-Ae.left,bottom:_e.bottom-Ae.top};return te>=1e4&&(x.savedBBoxes={},te=0),re&&(x.savedBBoxes[re]=Oe),te++,k.extendFlat({},Oe)},x.setClipUrl=function(ge,oe,re){ge.attr("clip-path",Q(oe,re))},x.getTranslate=function(ge){var oe=(ge[ge.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(re,fe,Se){return[fe,Se].join(" ")}).split(" ");return{x:+oe[0]||0,y:+oe[1]||0}},x.setTranslate=function(ge,oe,re){var fe=ge.attr?"attr":"getAttribute",Se=ge.attr?"attr":"setAttribute",be=ge[fe]("transform")||"";return oe=oe||0,re=re||0,be=be.replace(/(\btranslate\(.*?\);?)/,"").trim(),be=(be+=i(oe,re)).trim(),ge[Se]("transform",be),be},x.getScale=function(ge){var oe=(ge[ge.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(re,fe,Se){return[fe,Se].join(" ")}).split(" ");return{x:+oe[0]||1,y:+oe[1]||1}},x.setScale=function(ge,oe,re){var fe=ge.attr?"attr":"getAttribute",Se=ge.attr?"attr":"setAttribute",be=ge[fe]("transform")||"";return oe=oe||1,re=re||1,be=be.replace(/(\bscale\(.*?\);?)/,"").trim(),be=(be+="scale("+oe+","+re+")").trim(),ge[Se]("transform",be),be};var J=/\s*sc.*/;x.setPointGroupScale=function(ge,oe,re){if(oe=oe||1,re=re||1,ge){var fe=oe===1&&re===1?"":"scale("+oe+","+re+")";ge.each(function(){var Se=(this.getAttribute("transform")||"").replace(J,"");Se=(Se+=fe).trim(),this.setAttribute("transform",Se)})}};var K=/translate\([^)]*\)\s*$/;function X(ge,oe){var re;return ge&&(re=ge.mf),re===void 0&&(re=oe.marker&&oe.marker.standoff||0),oe._geo||oe._xA?re:-re}x.setTextPointsScale=function(ge,oe,re){ge&&ge.each(function(){var fe,Se=T.select(this),be=Se.select("text");if(be.node()){var we=parseFloat(be.attr("x")||0),Me=parseFloat(be.attr("y")||0),Pe=(Se.attr("transform")||"").match(K);fe=oe===1&&re===1?[]:[i(we,Me),"scale("+oe+","+re+")",i(-we,-Me)],Pe&&fe.push(Pe),Se.attr("transform",fe.join(""))}})},x.getMarkerStandoff=X;var ie,se,ae,ue,ve,ye,pe=Math.atan2,de=Math.cos,me=Math.sin;function ke(ge,oe){var re=oe[0],fe=oe[1];return[re*de(ge)-fe*me(ge),re*me(ge)+fe*de(ge)]}function Ce(ge,oe){var re,fe,Se=ge.ma;Se===void 0&&((Se=oe.marker.angle)&&!k.isArrayOrTypedArray(Se)||(Se=0));var be=oe.marker.angleref;if(be==="previous"||be==="north"){if(oe._geo){var we=oe._geo.project(ge.lonlat);re=we[0],fe=we[1]}else{var Me=oe._xA,Pe=oe._yA;if(!Me||!Pe)return 90;re=Me.c2p(ge.x),fe=Pe.c2p(ge.y)}if(oe._geo){var De,he=ge.lonlat[0],_e=ge.lonlat[1],Ae=oe._geo.project([he,_e+1e-5]),Oe=oe._geo.project([he+1e-5,_e]),Ee=pe(Oe[1]-fe,Oe[0]-re),Be=pe(Ae[1]-fe,Ae[0]-re);if(be==="north")De=Se/180*Math.PI;else if(be==="previous"){var Ve=he/180*Math.PI,Ze=_e/180*Math.PI,it=ie/180*Math.PI,at=se/180*Math.PI,gt=it-Ve,yt=de(at)*me(gt),pt=me(at)*de(Ze)-de(at)*me(Ze)*de(gt);De=-pe(yt,pt)-Math.PI,ie=he,se=_e}var et=ke(Ee,[de(De),0]),$e=ke(Be,[me(De),0]);Se=pe(et[1]+$e[1],et[0]+$e[0])/Math.PI*180,be!=="previous"||ye===oe.uid&&ge.i===ve+1||(Se=null)}if(be==="previous"&&!oe._geo)if(ye===oe.uid&&ge.i===ve+1&&w(re)&&w(fe)){var At=re-ae,Ot=fe-ue,Rt=oe.line&&oe.line.shape||"",Ct=Rt.slice(Rt.length-1);Ct==="h"&&(Ot=0),Ct==="v"&&(At=0),Se+=pe(Ot,At)/Math.PI*180+90}else Se=null}return ae=re,ue=fe,ve=ge.i,ye=oe.uid,Se}x.getMarkerAngle=Ce},71984:function(F,C,e){"use strict";var T,k,a,w,b=e(21984),f=e(33428).round,s="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),r=Math.PI,n=Math.cos,o=Math.sin;function l(d){return d===null}function c(d,u,x){if(!(d&&d%360!=0||u))return x;if(a===d&&w===u&&T===x)return k;function p(z,V){var O=n(z),j=o(z),Y=V[0],B=V[1]+(u||0);return[Y*O-B*j,Y*j+B*O]}a=d,w=u,T=x;for(var g=d/180*r,m=0,y=0,v=b(x),_="",h=0;h<v.length;h++){var S=v[h],A=S[0],E=m,P=y;if(A==="M"||A==="L")m=+S[1],y=+S[2];else if(A==="m"||A==="l")m+=+S[1],y+=+S[2];else if(A==="H")m=+S[1];else if(A==="h")m+=+S[1];else if(A==="V")y=+S[1];else if(A==="v")y+=+S[1];else if(A==="A"){m=+S[1],y=+S[2];var I=p(g,[+S[6],+S[7]]);S[6]=I[0],S[7]=I[1],S[3]=+S[3]+d}A!=="H"&&A!=="V"||(A="L"),A!=="h"&&A!=="v"||(A="l"),A!=="m"&&A!=="l"||(m-=E,y-=P);var D=p(g,[m,y]);A!=="H"&&A!=="V"||(A="L"),A!=="M"&&A!=="L"&&A!=="m"&&A!=="l"||(S[1]=D[0],S[2]=D[1]),S[0]=A,_+=S[0]+S.slice(1).join(",")}return k=_,_}F.exports={circle:{n:0,f:function(d,u,x){if(l(u))return s;var p=f(d,2),g="M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z";return x?c(u,x,g):g}},square:{n:1,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")}},diamond:{n:2,f:function(d,u,x){if(l(u))return s;var p=f(1.3*d,2);return c(u,x,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"Z")}},cross:{n:3,f:function(d,u,x){if(l(u))return s;var p=f(.4*d,2),g=f(1.2*d,2);return c(u,x,"M"+g+","+p+"H"+p+"V"+g+"H-"+p+"V"+p+"H-"+g+"V-"+p+"H-"+p+"V-"+g+"H"+p+"V-"+p+"H"+g+"Z")}},x:{n:4,f:function(d,u,x){if(l(u))return s;var p=f(.8*d/t,2),g="l"+p+","+p,m="l"+p+",-"+p,y="l-"+p+",-"+p,v="l-"+p+","+p;return c(u,x,"M0,"+p+g+m+y+m+y+v+y+v+g+v+g+"Z")}},"triangle-up":{n:5,f:function(d,u,x){if(l(u))return s;var p=f(2*d/i,2);return c(u,x,"M-"+p+","+f(d/2,2)+"H"+p+"L0,-"+f(d,2)+"Z")}},"triangle-down":{n:6,f:function(d,u,x){if(l(u))return s;var p=f(2*d/i,2);return c(u,x,"M-"+p+",-"+f(d/2,2)+"H"+p+"L0,"+f(d,2)+"Z")}},"triangle-left":{n:7,f:function(d,u,x){if(l(u))return s;var p=f(2*d/i,2);return c(u,x,"M"+f(d/2,2)+",-"+p+"V"+p+"L-"+f(d,2)+",0Z")}},"triangle-right":{n:8,f:function(d,u,x){if(l(u))return s;var p=f(2*d/i,2);return c(u,x,"M-"+f(d/2,2)+",-"+p+"V"+p+"L"+f(d,2)+",0Z")}},"triangle-ne":{n:9,f:function(d,u,x){if(l(u))return s;var p=f(.6*d,2),g=f(1.2*d,2);return c(u,x,"M-"+g+",-"+p+"H"+p+"V"+g+"Z")}},"triangle-se":{n:10,f:function(d,u,x){if(l(u))return s;var p=f(.6*d,2),g=f(1.2*d,2);return c(u,x,"M"+p+",-"+g+"V"+p+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(d,u,x){if(l(u))return s;var p=f(.6*d,2),g=f(1.2*d,2);return c(u,x,"M"+g+","+p+"H-"+p+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(d,u,x){if(l(u))return s;var p=f(.6*d,2),g=f(1.2*d,2);return c(u,x,"M-"+p+","+g+"V-"+p+"H"+g+"Z")}},pentagon:{n:13,f:function(d,u,x){if(l(u))return s;var p=f(.951*d,2),g=f(.588*d,2),m=f(-d,2),y=f(-.309*d,2);return c(u,x,"M"+p+","+y+"L"+g+","+f(.809*d,2)+"H-"+g+"L-"+p+","+y+"L0,"+m+"Z")}},hexagon:{n:14,f:function(d,u,x){if(l(u))return s;var p=f(d,2),g=f(d/2,2),m=f(d*i/2,2);return c(u,x,"M"+m+",-"+g+"V"+g+"L0,"+p+"L-"+m+","+g+"V-"+g+"L0,-"+p+"Z")}},hexagon2:{n:15,f:function(d,u,x){if(l(u))return s;var p=f(d,2),g=f(d/2,2),m=f(d*i/2,2);return c(u,x,"M-"+g+","+m+"H"+g+"L"+p+",0L"+g+",-"+m+"H-"+g+"L-"+p+",0Z")}},octagon:{n:16,f:function(d,u,x){if(l(u))return s;var p=f(.924*d,2),g=f(.383*d,2);return c(u,x,"M-"+g+",-"+p+"H"+g+"L"+p+",-"+g+"V"+g+"L"+g+","+p+"H-"+g+"L-"+p+","+g+"V-"+g+"Z")}},star:{n:17,f:function(d,u,x){if(l(u))return s;var p=1.4*d,g=f(.225*p,2),m=f(.951*p,2),y=f(.363*p,2),v=f(.588*p,2),_=f(-p,2),h=f(-.309*p,2),S=f(.118*p,2),A=f(.809*p,2);return c(u,x,"M"+g+","+h+"H"+m+"L"+y+","+S+"L"+v+","+A+"L0,"+f(.382*p,2)+"L-"+v+","+A+"L-"+y+","+S+"L-"+m+","+h+"H-"+g+"L0,"+_+"Z")}},hexagram:{n:18,f:function(d,u,x){if(l(u))return s;var p=f(.66*d,2),g=f(.38*d,2),m=f(.76*d,2);return c(u,x,"M-"+m+",0l-"+g+",-"+p+"h"+m+"l"+g+",-"+p+"l"+g+","+p+"h"+m+"l-"+g+","+p+"l"+g+","+p+"h-"+m+"l-"+g+","+p+"l-"+g+",-"+p+"h-"+m+"Z")}},"star-triangle-up":{n:19,f:function(d,u,x){if(l(u))return s;var p=f(d*i*.8,2),g=f(.8*d,2),m=f(1.6*d,2),y=f(4*d,2),v="A "+y+","+y+" 0 0 1 ";return c(u,x,"M-"+p+","+g+v+p+","+g+v+"0,-"+m+v+"-"+p+","+g+"Z")}},"star-triangle-down":{n:20,f:function(d,u,x){if(l(u))return s;var p=f(d*i*.8,2),g=f(.8*d,2),m=f(1.6*d,2),y=f(4*d,2),v="A "+y+","+y+" 0 0 1 ";return c(u,x,"M"+p+",-"+g+v+"-"+p+",-"+g+v+"0,"+m+v+p+",-"+g+"Z")}},"star-square":{n:21,f:function(d,u,x){if(l(u))return s;var p=f(1.1*d,2),g=f(2*d,2),m="A "+g+","+g+" 0 0 1 ";return c(u,x,"M-"+p+",-"+p+m+"-"+p+","+p+m+p+","+p+m+p+",-"+p+m+"-"+p+",-"+p+"Z")}},"star-diamond":{n:22,f:function(d,u,x){if(l(u))return s;var p=f(1.4*d,2),g=f(1.9*d,2),m="A "+g+","+g+" 0 0 1 ";return c(u,x,"M-"+p+",0"+m+"0,"+p+m+p+",0"+m+"0,-"+p+m+"-"+p+",0Z")}},"diamond-tall":{n:23,f:function(d,u,x){if(l(u))return s;var p=f(.7*d,2),g=f(1.4*d,2);return c(u,x,"M0,"+g+"L"+p+",0L0,-"+g+"L-"+p+",0Z")}},"diamond-wide":{n:24,f:function(d,u,x){if(l(u))return s;var p=f(1.4*d,2),g=f(.7*d,2);return c(u,x,"M0,"+g+"L"+p+",0L0,-"+g+"L-"+p+",0Z")}},hourglass:{n:25,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M"+p+","+p+"H-"+p+"L"+p+",-"+p+"H-"+p+"Z")},noDot:!0},bowtie:{n:26,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M"+p+","+p+"V-"+p+"L-"+p+","+p+"V-"+p+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,u,x){if(l(u))return s;var p=f(d,2),g=f(d/t,2);return c(u,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,u,x){if(l(u))return s;var p=f(1.3*d,2);return c(u,x,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM0,-"+p+"V"+p+"M-"+p+",0H"+p)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,u,x){if(l(u))return s;var p=f(1.3*d,2),g=f(.65*d,2);return c(u,x,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,u,x){if(l(u))return s;var p=f(1.4*d,2);return c(u,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,u,x){if(l(u))return s;var p=f(1.2*d,2),g=f(.85*d,2);return c(u,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,u,x){if(l(u))return s;var p=f(d/2,2),g=f(d,2);return c(u,x,"M"+p+","+g+"V-"+g+"M"+(p-g)+",-"+g+"V"+g+"M"+g+","+p+"H-"+g+"M-"+g+","+(p-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,u,x){if(l(u))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return c(u,x,"M-"+p+","+m+"L0,0M"+p+","+m+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,u,x){if(l(u))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return c(u,x,"M-"+p+",-"+m+"L0,0M"+p+",-"+m+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,u,x){if(l(u))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return c(u,x,"M"+m+","+p+"L0,0M"+m+",-"+p+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,u,x){if(l(u))return s;var p=f(1.2*d,2),g=f(1.6*d,2),m=f(.8*d,2);return c(u,x,"M-"+m+","+p+"L0,0M-"+m+",-"+p+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,u,x){if(l(u))return s;var p=f(1.4*d,2);return c(u,x,"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,u,x){if(l(u))return s;var p=f(1.4*d,2);return c(u,x,"M0,"+p+"V-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M"+p+","+p+"L-"+p+",-"+p)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M0,0L-"+p+","+f(2*d,2)+"H"+p+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M0,0L-"+p+",-"+f(2*d,2)+"H"+p+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,u,x){if(l(u))return s;var p=f(2*d,2),g=f(d,2);return c(u,x,"M0,0L"+p+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,u,x){if(l(u))return s;var p=f(2*d,2),g=f(d,2);return c(u,x,"M0,0L-"+p+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M-"+p+",0H"+p+"M0,0L-"+p+","+f(2*d,2)+"H"+p+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,u,x){if(l(u))return s;var p=f(d,2);return c(u,x,"M-"+p+",0H"+p+"M0,0L-"+p+",-"+f(2*d,2)+"H"+p+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,u,x){if(l(u))return s;var p=f(2*d,2),g=f(d,2);return c(u,x,"M0,-"+g+"V"+g+"M0,0L"+p+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,u,x){if(l(u))return s;var p=f(2*d,2),g=f(d,2);return c(u,x,"M0,-"+g+"V"+g+"M0,0L-"+p+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,u,x){if(l(u))return s;var p=r/2.5,g=2*d*n(p),m=2*d*o(p);return c(u,x,"M0,0L"+-g+","+m+"L"+g+","+m+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,u,x){if(l(u))return s;var p=r/4,g=2*d*n(p),m=2*d*o(p);return c(u,x,"M0,0L"+-g+","+m+"A "+2*d+","+2*d+" 0 0 1 "+g+","+m+"Z")},backoff:.4,noDot:!0}}},97644:function(F){"use strict";F.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(F,C,e){"use strict";var T=e(38248),k=e(24040),a=e(54460),w=e(3400),b=e(93792);function f(s,t,i,r){var n=t["error_"+r]||{},o=[];if(n.visible&&["linear","log"].indexOf(i.type)!==-1){for(var l=b(n),c=0;c<s.length;c++){var d=s[c],u=d.i;if(u===void 0)u=c;else if(u===null)continue;var x=d[r];if(T(i.c2l(x))){var p=l(x,u);if(T(p[0])&&T(p[1])){var g=d[r+"s"]=x-p[0],m=d[r+"h"]=x+p[1];o.push(g,m)}}}var y=i._id,v=t._extremes[y],_=a.findExtremes(i,o,w.extendFlat({tozero:v.opts.tozero},{padded:!0}));v.min=v.min.concat(_.min),v.max=v.max.concat(_.max)}}F.exports=function(s){for(var t=s.calcdata,i=0;i<t.length;i++){var r=t[i],n=r[0].trace;if(n.visible===!0&&k.traceIs(n,"errorBarsOK")){var o=a.getFromId(s,n.xaxis),l=a.getFromId(s,n.yaxis);f(r,n,o,"x"),f(r,n,l,"y")}}}},93792:function(F){"use strict";function C(e,T){return e==="percent"?function(k){return Math.abs(k*T/100)}:e==="constant"?function(){return Math.abs(T)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}F.exports=function(e){var T=e.type,k=e.symmetric;if(T==="data"){var a=e.array||[];if(k)return function(s,t){var i=+a[t];return[i,i]};var w=e.arrayminus||[];return function(s,t){var i=+a[t],r=+w[t];return isNaN(i)&&isNaN(r)?[NaN,NaN]:[r||0,i||0]}}var b=C(T,e.value),f=C(T,e.valueminus);return k||e.valueminus===void 0?function(s){var t=b(s);return[t,t]}:function(s){return[f(s),b(s)]}}},65200:function(F,C,e){"use strict";var T=e(38248),k=e(24040),a=e(3400),w=e(31780),b=e(97644);F.exports=function(f,s,t,i){var r="error_"+i.axis,n=w.newContainer(s,r),o=f[r]||{};function l(x,p){return a.coerce(o,n,b,x,p)}if(l("visible",o.array!==void 0||o.value!==void 0||o.type==="sqrt")!==!1){var c=l("type","array"in o?"data":"percent"),d=!0;c!=="sqrt"&&(d=l("symmetric",!((c==="data"?"arrayminus":"valueminus")in o))),c==="data"?(l("array"),l("traceref"),d||(l("arrayminus"),l("tracerefminus"))):c!=="percent"&&c!=="constant"||(l("value"),d||l("valueminus"));var u="copy_"+i.inherit+"style";i.inherit&&(s["error_"+i.inherit]||{}).visible&&l(u,!(o.color||T(o.thickness)||T(o.width))),i.inherit&&n[u]||(l("color",t),l("thickness"),l("width",k.traceIs(s,"gl3d")?0:4))}}},64968:function(F,C,e){"use strict";var T=e(3400),k=e(67824).overrideAll,a=e(97644),w={error_x:T.extendFlat({},a),error_y:T.extendFlat({},a)};delete w.error_x.copy_zstyle,delete w.error_y.copy_zstyle,delete w.error_y.copy_ystyle;var b={error_x:T.extendFlat({},a),error_y:T.extendFlat({},a),error_z:T.extendFlat({},a)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,F.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:w,bar:w,histogram:w,scatter3d:k(b,"calc","nested"),scattergl:k(w,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(f,s,t){(s.error_y||{}).visible&&(t.yerr=f.yh-f.y,s.error_y.symmetric||(t.yerrneg=f.y-f.ys)),(s.error_x||{}).visible&&(t.xerr=f.xh-f.x,s.error_x.symmetric||(t.xerrneg=f.x-f.xs))}}},78512:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(43616),w=e(43028);F.exports=function(b,f,s,t){var i=s.xaxis,r=s.yaxis,n=t&&t.duration>0,o=b._context.staticPlot;f.each(function(l){var c,d=l[0].trace,u=d.error_x||{},x=d.error_y||{};d.ids&&(c=function(y){return y.id});var p=w.hasMarkers(d)&&d.marker.maxdisplayed>0;x.visible||u.visible||(l=[]);var g=T.select(this).selectAll("g.errorbar").data(l,c);if(g.exit().remove(),l.length){u.visible||g.selectAll("path.xerror").remove(),x.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var m=g.enter().append("g").classed("errorbar",!0);n&&m.style("opacity",0).transition().duration(t.duration).style("opacity",1),a.setClipUrl(g,s.layerClipId,b),g.each(function(y){var v=T.select(this),_=function(I,D,z){var V={x:D.c2p(I.x),y:z.c2p(I.y)};return I.yh!==void 0&&(V.yh=z.c2p(I.yh),V.ys=z.c2p(I.ys),k(V.ys)||(V.noYS=!0,V.ys=z.c2p(I.ys,!0))),I.xh!==void 0&&(V.xh=D.c2p(I.xh),V.xs=D.c2p(I.xs),k(V.xs)||(V.noXS=!0,V.xs=D.c2p(I.xs,!0))),V}(y,i,r);if(!p||y.vis){var h,S=v.select("path.yerror");if(x.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var A=x.width;h="M"+(_.x-A)+","+_.yh+"h"+2*A+"m-"+A+",0V"+_.ys,_.noYS||(h+="m-"+A+",0h"+2*A),S.size()?n&&(S=S.transition().duration(t.duration).ease(t.easing)):S=v.append("path").style("vector-effect",o?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",h)}else S.remove();var E=v.select("path.xerror");if(u.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var P=(u.copy_ystyle?x:u).width;h="M"+_.xh+","+(_.y-P)+"v"+2*P+"m0,-"+P+"H"+_.xs,_.noXS||(h+="m0,-"+P+"v"+2*P),E.size()?n&&(E=E.transition().duration(t.duration).ease(t.easing)):E=v.append("path").style("vector-effect",o?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",h)}else E.remove()}})}})}},92036:function(F,C,e){"use strict";var T=e(33428),k=e(76308);F.exports=function(a){a.each(function(w){var b=w[0].trace,f=b.error_y||{},s=b.error_x||{},t=T.select(this);t.selectAll("path.yerror").style("stroke-width",f.thickness+"px").call(k.stroke,f.color),s.copy_ystyle&&(s=f),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},55756:function(F,C,e){"use strict";var T=e(25376),k=e(65460).hoverlabel,a=e(92880).extendFlat;F.exports={hoverlabel:{bgcolor:a({},k.bgcolor,{arrayOk:!0}),bordercolor:a({},k.bordercolor,{arrayOk:!0}),font:T({arrayOk:!0,editType:"none"}),align:a({},k.align,{arrayOk:!0}),namelength:a({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(F,C,e){"use strict";var T=e(3400),k=e(24040);function a(w,b,f,s){s=s||T.identity,Array.isArray(w)&&(b[0][f]=s(w))}F.exports=function(w){var b=w.calcdata,f=w._fullLayout;function s(o){return function(l){return T.coerceHoverinfo({hoverinfo:l},{_module:o._module},f)}}for(var t=0;t<b.length;t++){var i=b[t],r=i[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?a:T.fillArray;n(r.hoverinfo,i,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,i,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,i,"hbg"),n(r.hoverlabel.bordercolor,i,"hbc"),n(r.hoverlabel.font.size,i,"hts"),n(r.hoverlabel.font.color,i,"htc"),n(r.hoverlabel.font.family,i,"htf"),n(r.hoverlabel.font.weight,i,"htw"),n(r.hoverlabel.font.style,i,"hty"),n(r.hoverlabel.font.variant,i,"htv"),n(r.hoverlabel.namelength,i,"hnl"),n(r.hoverlabel.align,i,"hta"))}}}},62376:function(F,C,e){"use strict";var T=e(24040),k=e(83292).hover;F.exports=function(a,w,b){var f=T.getComponentMethod("annotations","onClick")(a,a._hoverdata);function s(){a.emit("plotly_click",{points:a._hoverdata,event:w})}b!==void 0&&k(a,w,b,!0),a._hoverdata&&w&&w.target&&(f&&f.then?f.then(s):s(),w.stopImmediatePropagation&&w.stopImmediatePropagation())}},92456:function(F){"use strict";F.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(F,C,e){"use strict";var T=e(3400),k=e(55756),a=e(16132);F.exports=function(w,b,f,s){var t=T.extendFlat({},s.hoverlabel);b.hovertemplate&&(t.namelength=-1),a(w,b,function(i,r){return T.coerce(w,b,k,i,r)},t)}},10624:function(F,C,e){"use strict";var T=e(3400);C.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},C.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var i=s.xaxes||[],r=s.yaxes||[],n=0;n<i.length;n++)for(var o=0;o<r.length;o++)if(t.indexOf(i[n]+r[o])!==-1)return!0;return!1}return t.indexOf(C.getSubplot(s))!==-1},C.flat=function(s,t){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=t;return i},C.p2c=function(s,t){for(var i=new Array(s.length),r=0;r<s.length;r++)i[r]=s[r].p2c(t);return i},C.getDistanceFunction=function(s,t,i,r){return s==="closest"?r||C.quadrature(t,i):s.charAt(0)==="x"?t:i},C.getClosest=function(s,t,i){if(i.index!==!1)i.index>=0&&i.index<s.length?i.distance=0:i.index=!1;else for(var r=0;r<s.length;r++){var n=t(s[r]);n<=i.distance&&(i.index=r,i.distance=n)}return i},C.inbox=function(s,t,i){return s*t<0||s===0?i:1/0},C.quadrature=function(s,t){return function(i){var r=s(i),n=t(i);return Math.sqrt(r*r+n*n)}},C.makeEventData=function(s,t,i){var r="index"in s?s.index:s.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var o=t._indexToPoints[r];o.length===1?n.pointIndex=o[0]:n.pointIndices=o}else n.pointIndex=r;return t._module.eventData?n=t._module.eventData(n,s,t,i,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),s.zLabelVal!==void 0&&(n.z=s.zLabelVal)),C.appendArrayPointValue(n,t,r),n},C.appendArrayPointValue=function(s,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var o=r[n],l=a(o);if(s[l]===void 0){var c=w(T.nestedProperty(t,o).get(),i);c!==void 0&&(s[l]=c)}}},C.appendArrayMultiPointValues=function(s,t,i){var r=t._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var o=r[n],l=a(o);if(s[l]===void 0){for(var c=T.nestedProperty(t,o).get(),d=new Array(i.length),u=0;u<i.length;u++)d[u]=w(c,i[u]);s[l]=d}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function a(s){return k[s]||s}function w(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var b={x:!0,y:!0},f={"x unified":!0,"y unified":!0};C.isUnifiedHover=function(s){return typeof s=="string"&&!!f[s]},C.isXYhover=function(s){return typeof s=="string"&&!!b[s]}},83292:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(49760),w=e(3400),b=w.pushUnique,f=w.strTranslate,s=w.strRotate,t=e(95924),i=e(72736),r=e(72213),n=e(43616),o=e(76308),l=e(86476),c=e(54460),d=e(24040),u=e(10624),x=e(92456),p=e(77864),g=e(31140),m=x.YANGLE,y=Math.PI*m/180,v=1/Math.sin(y),_=Math.cos(y),h=Math.sin(y),S=x.HOVERARROWSIZE,A=x.HOVERTEXTPAD,E={box:!0,ohlc:!0,violin:!0,candlestick:!0},P={scatter:!0,scattergl:!0,splom:!0};function I(X,ie){return X.distance-ie.distance}function D(X){return[X.trace.index,X.index,X.x0,X.y0,X.name,X.attr,X.xa?X.xa._id:"",X.ya?X.ya._id:""].join(",")}C.hover=function(X,ie,se,ae){X=w.getGraphDiv(X);var ue=ie.target;w.throttle(X._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,function(){(function(ve,ye,pe,de,me){pe||(pe="xy");var ke,Ce,ge,oe=Array.isArray(pe)?pe:[pe],re=ve._fullLayout,fe=re.hoversubplots,Se=re._plots||[],be=Se[pe],we=re._has("cartesian"),Me=ye.hovermode||re.hovermode,Pe=(Me||"").charAt(0)==="x",De=(Me||"").charAt(0)==="y";if(we&&(Pe||De)&&fe==="axis"){for(var he=oe.length,_e=0;_e<he;_e++)if(Se[ke=oe[_e]]){Ce=c.getFromId(ve,ke,"x"),ge=c.getFromId(ve,ke,"y");var Ae=(Pe?Ce:ge)._subplotsWith;if(Ae&&Ae.length)for(var Oe=0;Oe<Ae.length;Oe++)b(oe,Ae[Oe])}}if(be&&fe!=="single"){var Ee=be.overlays.map(function(Nt){return Nt.id});oe=oe.concat(Ee)}for(var Be=oe.length,Ve=new Array(Be),Ze=new Array(Be),it=!1,at=0;at<Be;at++)if(Se[ke=oe[at]])it=!0,Ve[at]=Se[ke].xaxis,Ze[at]=Se[ke].yaxis;else{if(!re[ke]||!re[ke]._subplot)return void w.warn("Unrecognized subplot: "+ke);var gt=re[ke]._subplot;Ve[at]=gt.xaxis,Ze[at]=gt.yaxis}if(Me&&!it&&(Me="closest"),["x","y","closest","x unified","y unified"].indexOf(Me)===-1||!ve.calcdata||ve.querySelector(".zoombox")||ve._dragging)return l.unhoverRaw(ve,ye);var yt=re.hoverdistance;yt===-1&&(yt=1/0);var pt=re.spikedistance;pt===-1&&(pt=1/0);var et,$e,At,Ot,Rt,Ct,Ge,Xe,Ne,Ye,ot,nt,ze,Fe=[],rt=[],We={hLinePoint:null,vLinePoint:null},ft=!1;if(Array.isArray(ye))for(Me="array",At=0;At<ye.length;At++)(Rt=ve.calcdata[ye[At].curveNumber||0])&&(Ct=Rt[0].trace,Rt[0].trace.hoverinfo!=="skip"&&(rt.push(Rt),Ct.orientation==="h"&&(ft=!0)));else{var mt,vt,ut=ve.calcdata.slice();for(ut.sort(function(Nt,$t){return(Nt[0].trace.zorder||0)-($t[0].trace.zorder||0)}),Ot=0;Ot<ut.length;Ot++)Rt=ut[Ot],(Ct=Rt[0].trace).hoverinfo!=="skip"&&u.isTraceInSubplots(Ct,oe)&&(rt.push(Rt),Ct.orientation==="h"&&(ft=!0));if(me){if(t.triggerHandler(ve,"plotly_beforehover",ye)===!1)return;var Mt=me.getBoundingClientRect();mt=ye.clientX-Mt.left,vt=ye.clientY-Mt.top,re._calcInverseTransform(ve);var bt=w.apply3DTransform(re._invTransform)(mt,vt);if(mt=bt[0],vt=bt[1],mt<0||mt>Ve[0]._length||vt<0||vt>Ze[0]._length)return l.unhoverRaw(ve,ye)}else mt="xpx"in ye?ye.xpx:Ve[0]._length/2,vt="ypx"in ye?ye.ypx:Ze[0]._length/2;if(ye.pointerX=mt+Ve[0]._offset,ye.pointerY=vt+Ze[0]._offset,et="xval"in ye?u.flat(oe,ye.xval):u.p2c(Ve,mt),$e="yval"in ye?u.flat(oe,ye.yval):u.p2c(Ze,vt),!k(et[0])||!k($e[0]))return w.warn("Fx.hover failed",ye,ve),l.unhoverRaw(ve,ye)}var St=1/0;function Pt(Nt,$t){for(Ot=0;Ot<rt.length;Ot++)if((Rt=rt[Ot])&&Rt[0]&&Rt[0].trace&&(Ct=Rt[0].trace).visible===!0&&Ct._length!==0&&["carpet","contourcarpet"].indexOf(Ct._module.name)===-1){if(Ne=Me,u.isUnifiedHover(Ne)&&(Ne=Ne.charAt(0)),Ct.type==="splom"?Ge=oe[Xe=0]:(Ge=u.getSubplot(Ct),Xe=oe.indexOf(Ge)),nt={cd:Rt,trace:Ct,xa:Ve[Xe],ya:Ze[Xe],maxHoverDistance:yt,maxSpikeDistance:pt,index:!1,distance:Math.min(St,yt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:o.defaultLine,name:Ct.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},re[Ge]&&(nt.subplot=re[Ge]._subplot),re._splomScenes&&re._splomScenes[Ct.uid]&&(nt.scene=re._splomScenes[Ct.uid]),Ne==="array"){var fn=ye[Ot];"pointNumber"in fn?(nt.index=fn.pointNumber,Ne="closest"):(Ne="","xval"in fn&&(Ye=fn.xval,Ne="x"),"yval"in fn&&(ot=fn.yval,Ne=Ne?"closest":"y"))}else Nt!==void 0&&$t!==void 0?(Ye=Nt,ot=$t):(Ye=et[Xe],ot=$e[Xe]);if(ze=Fe.length,yt!==0)if(Ct._module&&Ct._module.hoverPoints){var dn=Ct._module.hoverPoints(nt,Ye,ot,Ne,{finiteRange:!0,hoverLayer:re._hoverlayer,hoversubplots:fe,gd:ve});if(dn)for(var xn,sn=0;sn<dn.length;sn++)xn=dn[sn],k(xn.x0)&&k(xn.y0)&&Fe.push(B(xn,Me))}else w.log("Unrecognized trace type in hover:",Ct);if(Me==="closest"&&Fe.length>ze&&(Fe.splice(0,ze),St=Fe[0].distance),we&&pt!==0&&Fe.length===0){nt.distance=pt,nt.index=!1;var Yt=Ct._module.hoverPoints(nt,Ye,ot,"closest",{hoverLayer:re._hoverlayer});if(Yt&&(Yt=Yt.filter(function(zn){return zn.spikeDistance<=pt})),Yt&&Yt.length){var Wt,tn=Yt.filter(function(zn){return zn.xa.showspikes&&zn.xa.spikesnap!=="hovered data"});if(tn.length){var ln=tn[0];k(ln.x0)&&k(ln.y0)&&(Wt=Ft(ln),(!We.vLinePoint||We.vLinePoint.spikeDistance>Wt.spikeDistance)&&(We.vLinePoint=Wt))}var An=Yt.filter(function(zn){return zn.ya.showspikes&&zn.ya.spikesnap!=="hovered data"});if(An.length){var In=An[0];k(In.x0)&&k(In.y0)&&(Wt=Ft(In),(!We.hLinePoint||We.hLinePoint.spikeDistance>Wt.spikeDistance)&&(We.hLinePoint=Wt))}}}}}function Dt(Nt,$t,fn){for(var dn,xn=null,sn=1/0,Yt=0;Yt<Nt.length;Yt++)Ce&&Ce._id!==Nt[Yt].xa._id||ge&&ge._id!==Nt[Yt].ya._id||(dn=Nt[Yt].spikeDistance,fn&&Yt===0&&(dn=-1/0),dn<=sn&&dn<=$t&&(xn=Nt[Yt],sn=dn));return xn}function Ft(Nt){return Nt?{xa:Nt.xa,ya:Nt.ya,x:Nt.xSpike!==void 0?Nt.xSpike:(Nt.x0+Nt.x1)/2,y:Nt.ySpike!==void 0?Nt.ySpike:(Nt.y0+Nt.y1)/2,distance:Nt.distance,spikeDistance:Nt.spikeDistance,curveNumber:Nt.trace.index,color:Nt.color,pointNumber:Nt.index}:null}Pt();var Xt={fullLayout:re,container:re._hoverlayer,event:ye},an=ve._spikepoints,Ht={vLinePoint:We.vLinePoint,hLinePoint:We.hLinePoint};ve._spikepoints=Ht;var Zt=function(){var Nt=Fe.filter(function(fn){return Ce&&Ce._id===fn.xa._id&&ge&&ge._id===fn.ya._id}),$t=Fe.filter(function(fn){return!(Ce&&Ce._id===fn.xa._id&&ge&&ge._id===fn.ya._id)});Nt.sort(I),$t.sort(I),Fe=function(fn,dn){for(var xn=dn.charAt(0),sn=[],Yt=[],Wt=[],tn=0;tn<fn.length;tn++){var ln=fn[tn];d.traceIs(ln.trace,"bar-like")||d.traceIs(ln.trace,"box-violin")?Wt.push(ln):ln.trace[xn+"period"]?Yt.push(ln):sn.push(ln)}return sn.concat(Yt).concat(Wt)}(Fe=Nt.concat($t),Me)};Zt();var jt=Me.charAt(0),Pn=(jt==="x"||jt==="y")&&Fe[0]&&P[Fe[0].trace.type];if(we&&pt!==0&&Fe.length!==0){var Tn=Dt(Fe.filter(function(Nt){return Nt.ya.showspikes}),pt,Pn);We.hLinePoint=Ft(Tn);var mn=Dt(Fe.filter(function(Nt){return Nt.xa.showspikes}),pt,Pn);We.vLinePoint=Ft(mn)}if(Fe.length===0){var Qt=l.unhoverRaw(ve,ye);return!we||We.hLinePoint===null&&We.vLinePoint===null||q(an)&&U(ve,We,Xt),Qt}if(we&&q(an)&&U(ve,We,Xt),u.isXYhover(Ne)&&Fe[0].length!==0&&Fe[0].trace.type!=="splom"){var un=Fe[0],nn=(Fe=E[un.trace.type]?Fe.filter(function(Nt){return Nt.trace.index===un.trace.index}):[un]).length;Pt(ee("x",un,re),ee("y",un,re));var hn,bn=[],wn={},Cn=0,Ln=function(Nt){var $t=E[Nt.trace.type]?D(Nt):Nt.trace.index;if(wn[$t]){var fn=wn[$t]-1,dn=bn[fn];fn>0&&Math.abs(Nt.distance)<Math.abs(dn.distance)&&(bn[fn]=Nt)}else Cn++,wn[$t]=Cn,bn.push(Nt)};for(hn=0;hn<nn;hn++)Ln(Fe[hn]);for(hn=Fe.length-1;hn>nn-1;hn--)Ln(Fe[hn]);Fe=bn,Zt()}var Mn=ve._hoverdata,jn=[],Rn=Q(ve),Qn=J(ve);for(At=0;At<Fe.length;At++){var Yn=Fe[At],ar=u.makeEventData(Yn,Yn.trace,Yn.cd);if(Yn.hovertemplate!==!1){var Kn=!1;Yn.cd[Yn.index]&&Yn.cd[Yn.index].ht&&(Kn=Yn.cd[Yn.index].ht),Yn.hovertemplate=Kn||Yn.trace.hovertemplate||!1}if(Yn.xa&&Yn.ya){var mr=Yn.x0+Yn.xa._offset,en=Yn.x1+Yn.xa._offset,rn=Yn.y0+Yn.ya._offset,En=Yn.y1+Yn.ya._offset,gn=Math.min(mr,en),Dn=Math.max(mr,en),qn=Math.min(rn,En),Vn=Math.max(rn,En);ar.bbox={x0:gn+Qn,x1:Dn+Qn,y0:qn+Rn,y1:Vn+Rn}}Yn.eventData=[ar],jn.push(ar)}ve._hoverdata=jn;var Jn=Me==="y"&&(rt.length>1||Fe.length>1)||Me==="closest"&&ft&&Fe.length>1,xr=o.combine(re.plot_bgcolor||o.background,re.paper_bgcolor),Jt=V(Fe,{gd:ve,hovermode:Me,rotateLabels:Jn,bgColor:xr,container:re._hoverlayer,outerContainer:re._paper.node(),commonLabelOpts:re.hoverlabel,hoverdistance:re.hoverdistance}),vn=Jt.hoverLabels;if(u.isUnifiedHover(Me)||(function(Nt,$t,fn,dn){var xn,sn,Yt,Wt,tn,ln,An,In=$t?"xa":"ya",zn=$t?"ya":"xa",Un=0,rr=1,Xn=Nt.size(),er=new Array(Xn),or=0,tr=dn.minX,gr=dn.maxX,Mr=dn.minY,br=dn.maxY,cr=function(Gr){return Gr*fn._invScaleX},wr=function(Gr){return Gr*fn._invScaleY};function Pr(Gr){var fa=Gr[0],so=Gr[Gr.length-1];if(sn=fa.pmin-fa.pos-fa.dp+fa.size,Yt=so.pos+so.dp+so.size-fa.pmax,sn>.01){for(tn=Gr.length-1;tn>=0;tn--)Gr[tn].dp+=sn;xn=!1}if(!(Yt<.01)){if(sn<-.01){for(tn=Gr.length-1;tn>=0;tn--)Gr[tn].dp-=Yt;xn=!1}if(xn){var oa=0;for(Wt=0;Wt<Gr.length;Wt++)(ln=Gr[Wt]).pos+ln.dp+ln.size>fa.pmax&&oa++;for(Wt=Gr.length-1;Wt>=0&&!(oa<=0);Wt--)(ln=Gr[Wt]).pos>fa.pmax-1&&(ln.del=!0,oa--);for(Wt=0;Wt<Gr.length&&!(oa<=0);Wt++)if((ln=Gr[Wt]).pos<fa.pmin+1)for(ln.del=!0,oa--,Yt=2*ln.size,tn=Gr.length-1;tn>=0;tn--)Gr[tn].dp-=Yt;for(Wt=Gr.length-1;Wt>=0&&!(oa<=0);Wt--)(ln=Gr[Wt]).pos+ln.dp+ln.size>fa.pmax&&(ln.del=!0,oa--)}}}for(Nt.each(function(Gr){var fa=Gr[In],so=Gr[zn],oa=fa._id.charAt(0)==="x",Zo=fa.range;or===0&&Zo&&Zo[0]>Zo[1]!==oa&&(rr=-1);var fs=0,Aa=oa?fn.width:fn.height;if(fn.hovermode==="x"||fn.hovermode==="y"){var Do,Oo,hs=j(Gr,$t),lo=Gr.anchor,xo=lo==="end"?-1:1;if(lo==="middle")Oo=(Do=Gr.crossPos+(oa?wr(hs.y-Gr.by/2):cr(Gr.bx/2+Gr.tx2width/2)))+(oa?wr(Gr.by):cr(Gr.bx));else if(oa)Oo=(Do=Gr.crossPos+wr(S+hs.y)-wr(Gr.by/2-S))+wr(Gr.by);else{var bo=cr(xo*S+hs.x),bi=bo+cr(xo*Gr.bx);Do=Gr.crossPos+Math.min(bo,bi),Oo=Gr.crossPos+Math.max(bo,bi)}oa?Mr!==void 0&&br!==void 0&&Math.min(Oo,br)-Math.max(Do,Mr)>1&&(so.side==="left"?(fs=so._mainLinePosition,Aa=fn.width):Aa=so._mainLinePosition):tr!==void 0&&gr!==void 0&&Math.min(Oo,gr)-Math.max(Do,tr)>1&&(so.side==="top"?(fs=so._mainLinePosition,Aa=fn.height):Aa=so._mainLinePosition)}er[or++]=[{datum:Gr,traceIndex:Gr.trace.index,dp:0,pos:Gr.pos,posref:Gr.posref,size:Gr.by*(oa?v:1)/2,pmin:fs,pmax:Aa}]}),er.sort(function(Gr,fa){return Gr[0].posref-fa[0].posref||rr*(fa[0].traceIndex-Gr[0].traceIndex)});!xn&&Un<=Xn;){for(Un++,xn=!0,Wt=0;Wt<er.length-1;){var Hr=er[Wt],Ai=er[Wt+1],Mi=Hr[Hr.length-1],ia=Ai[0];if((sn=Mi.pos+Mi.dp+Mi.size-ia.pos-ia.dp+ia.size)>.01&&Mi.pmin===ia.pmin&&Mi.pmax===ia.pmax){for(tn=Ai.length-1;tn>=0;tn--)Ai[tn].dp+=sn;for(Hr.push.apply(Hr,Ai),er.splice(Wt+1,1),An=0,tn=Hr.length-1;tn>=0;tn--)An+=Hr[tn].dp;for(Yt=An/Hr.length,tn=Hr.length-1;tn>=0;tn--)Hr[tn].dp-=Yt;xn=!1}else Wt++}er.forEach(Pr)}for(Wt=er.length-1;Wt>=0;Wt--){var Ti=er[Wt];for(tn=Ti.length-1;tn>=0;tn--){var ji=Ti[tn],Ba=ji.datum;Ba.offset=ji.dp,Ba.del=ji.del}}}(vn,Jn,re,Jt.commonLabelBoundingBox),Y(vn,Jn,re._invScaleX,re._invScaleY)),me&&me.tagName){var Lt=d.getComponentMethod("annotations","hasClickToShow")(ve,jn);r(T.select(me),Lt?"pointer":"")}me&&!de&&function(Nt,$t,fn){if(!fn||fn.length!==Nt._hoverdata.length)return!0;for(var dn=fn.length-1;dn>=0;dn--){var xn=fn[dn],sn=Nt._hoverdata[dn];if(xn.curveNumber!==sn.curveNumber||String(xn.pointNumber)!==String(sn.pointNumber)||String(xn.pointNumbers)!==String(sn.pointNumbers))return!0}return!1}(ve,0,Mn)&&(Mn&&ve.emit("plotly_unhover",{event:ye,points:Mn}),ve.emit("plotly_hover",{event:ye,points:ve._hoverdata,xaxes:Ve,yaxes:Ze,xvals:et,yvals:$e}))})(X,ie,se,ae,ue)})},C.loneHover=function(X,ie){var se=!0;Array.isArray(X)||(se=!1,X=[X]);var ae=ie.gd,ue=Q(ae),ve=J(ae),ye=V(X.map(function(me){var ke=me._x0||me.x0||me.x||0,Ce=me._x1||me.x1||me.x||0,ge=me._y0||me.y0||me.y||0,oe=me._y1||me.y1||me.y||0,re=me.eventData;if(re){var fe=Math.min(ke,Ce),Se=Math.max(ke,Ce),be=Math.min(ge,oe),we=Math.max(ge,oe),Me=me.trace;if(d.traceIs(Me,"gl3d")){var Pe=ae._fullLayout[Me.scene]._scene.container,De=Pe.offsetLeft,he=Pe.offsetTop;fe+=De,Se+=De,be+=he,we+=he}re.bbox={x0:fe+ve,x1:Se+ve,y0:be+ue,y1:we+ue},ie.inOut_bbox&&ie.inOut_bbox.push(re.bbox)}else re=!1;return{color:me.color||o.defaultLine,x0:me.x0||me.x||0,x1:me.x1||me.x||0,y0:me.y0||me.y||0,y1:me.y1||me.y||0,xLabel:me.xLabel,yLabel:me.yLabel,zLabel:me.zLabel,text:me.text,name:me.name,idealAlign:me.idealAlign,borderColor:me.borderColor,fontFamily:me.fontFamily,fontSize:me.fontSize,fontColor:me.fontColor,fontWeight:me.fontWeight,fontStyle:me.fontStyle,fontVariant:me.fontVariant,nameLength:me.nameLength,textAlign:me.textAlign,trace:me.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:me.hovertemplate||!1,hovertemplateLabels:me.hovertemplateLabels||!1,eventData:re}}),{gd:ae,hovermode:"closest",rotateLabels:!1,bgColor:ie.bgColor||o.background,container:T.select(ie.container),outerContainer:ie.outerContainer||ie.container}).hoverLabels,pe=0,de=0;return ye.sort(function(me,ke){return me.y0-ke.y0}).each(function(me,ke){var Ce=me.y0-me.by/2;me.offset=Ce-5<pe?pe-Ce+5:0,pe=Ce+me.by+me.offset,ke===ie.anchorIndex&&(de=me.offset)}).each(function(me){me.offset-=de}),Y(ye,!1,ae._fullLayout._invScaleX,ae._fullLayout._invScaleY),se?ye:ye.node()};var z=/<extra>([\s\S]*)<\/extra>/;function V(X,ie){var se=ie.gd,ae=se._fullLayout,ue=ie.hovermode,ve=ie.rotateLabels,ye=ie.bgColor,pe=ie.container,de=ie.outerContainer,me=ie.commonLabelOpts||{};if(X.length===0)return[[]];var ke=ie.fontFamily||x.HOVERFONT,Ce=ie.fontSize||x.HOVERFONTSIZE,ge=ie.fontWeight||ae.font.weight,oe=ie.fontStyle||ae.font.style,re=ie.fontVariant||ae.font.variant,fe=ie.fontTextcase||ae.font.textcase,Se=ie.fontLineposition||ae.font.lineposition,be=ie.fontShadow||ae.font.shadow,we=X[0],Me=we.xa,Pe=we.ya,De=ue.charAt(0),he=De+"Label",_e=we[he];if(_e===void 0&&Me.type==="multicategory")for(var Ae=0;Ae<X.length&&(_e=X[Ae][he])===void 0;Ae++);var Oe=K(se,de),Ee=Oe.top,Be=Oe.width,Ve=Oe.height,Ze=_e!==void 0&&we.distance<=ie.hoverdistance&&(ue==="x"||ue==="y");if(Ze){var it,at,gt=!0;for(it=0;it<X.length;it++)if(gt&&X[it].zLabel===void 0&&(gt=!1),at=X[it].hoverinfo||X[it].trace.hoverinfo){var yt=Array.isArray(at)?at:at.split("+");if(yt.indexOf("all")===-1&&yt.indexOf(ue)===-1){Ze=!1;break}}gt&&(Ze=!1)}var pt=pe.selectAll("g.axistext").data(Ze?[0]:[]);pt.enter().append("g").classed("axistext",!0),pt.exit().remove();var et={minX:0,maxX:0,minY:0,maxY:0};if(pt.each(function(){var jt=T.select(this),Pn=w.ensureSingle(jt,"path","",function(gn){gn.style({"stroke-width":"1px"})}),Tn=w.ensureSingle(jt,"text","",function(gn){gn.attr("data-notex",1)}),mn=me.bgcolor||o.defaultLine,Qt=me.bordercolor||o.contrast(mn),un=o.contrast(mn),nn=me.font,hn={weight:nn.weight||ge,style:nn.style||oe,variant:nn.variant||re,textcase:nn.textcase||fe,lineposition:nn.lineposition||Se,shadow:nn.shadow||be,family:nn.family||ke,size:nn.size||Ce,color:nn.color||un};Pn.style({fill:mn,stroke:Qt}),Tn.text(_e).call(n.font,hn).call(i.positionText,0,0).call(i.convertToTspans,se),jt.attr("transform","");var bn,wn,Cn=K(se,Tn.node());if(ue==="x"){var Ln=Me.side==="top"?"-":"";Tn.attr("text-anchor","middle").call(i.positionText,0,Me.side==="top"?Ee-Cn.bottom-S-A:Ee-Cn.top+S+A),bn=Me._offset+(we.x0+we.x1)/2,wn=Pe._offset+(Me.side==="top"?0:Pe._length);var Mn=Cn.width/2+A,jn=bn;bn<Mn?jn=Mn:bn>ae.width-Mn&&(jn=ae.width-Mn),Pn.attr("d","M"+(bn-jn)+",0L"+(bn-jn+S)+","+Ln+S+"H"+Mn+"v"+Ln+(2*A+Cn.height)+"H"+-Mn+"V"+Ln+S+"H"+(bn-jn-S)+"Z"),bn=jn,et.minX=bn-Mn,et.maxX=bn+Mn,Me.side==="top"?(et.minY=wn-(2*A+Cn.height),et.maxY=wn-A):(et.minY=wn+A,et.maxY=wn+(2*A+Cn.height))}else{var Rn,Qn,Yn;Pe.side==="right"?(Rn="start",Qn=1,Yn="",bn=Me._offset+Me._length):(Rn="end",Qn=-1,Yn="-",bn=Me._offset),wn=Pe._offset+(we.y0+we.y1)/2,Tn.attr("text-anchor",Rn),Pn.attr("d","M0,0L"+Yn+S+","+S+"V"+(A+Cn.height/2)+"h"+Yn+(2*A+Cn.width)+"V-"+(A+Cn.height/2)+"H"+Yn+S+"V-"+S+"Z"),et.minY=wn-(A+Cn.height/2),et.maxY=wn+(A+Cn.height/2),Pe.side==="right"?(et.minX=bn+S,et.maxX=bn+S+(2*A+Cn.width)):(et.minX=bn-S-(2*A+Cn.width),et.maxX=bn-S);var ar,Kn=Cn.height/2,mr=Ee-Cn.top-Kn,en="clip"+ae._uid+"commonlabel"+Pe._id;if(bn<Cn.width+2*A+S){ar="M-"+(S+A)+"-"+Kn+"h-"+(Cn.width-A)+"V"+Kn+"h"+(Cn.width-A)+"Z";var rn=Cn.width-bn+A;i.positionText(Tn,rn,mr),Rn==="end"&&Tn.selectAll("tspan").each(function(){var gn=T.select(this),Dn=n.tester.append("text").text(gn.text()).call(n.font,hn),qn=K(se,Dn.node());Math.round(qn.width)<Math.round(Cn.width)&&gn.attr("x",rn-qn.width),Dn.remove()})}else i.positionText(Tn,Qn*(A+S),mr),ar=null;var En=ae._topclips.selectAll("#"+en).data(ar?[0]:[]);En.enter().append("clipPath").attr("id",en).append("path"),En.exit().remove(),En.select("path").attr("d",ar),n.setClipUrl(Tn,ar?en:null,se)}jt.attr("transform",f(bn,wn))}),u.isUnifiedHover(ue)){pe.selectAll("g.hovertext").remove();var $e=X.filter(function(jt){return jt.hoverinfo!=="none"});if($e.length===0)return[];var At=ae.hoverlabel,Ot=At.font,Rt={showlegend:!0,legend:{title:{text:_e,font:Ot},font:Ot,bgcolor:At.bgcolor,bordercolor:At.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ae.legend?ae.legend.traceorder:void 0,orientation:"v"}},Ct={font:Ot};p(Rt,Ct,se._fullData);var Ge=Ct.legend;Ge.entries=[];for(var Xe=0;Xe<$e.length;Xe++){var Ne=$e[Xe];if(Ne.hoverinfo!=="none"){var Ye=O(Ne,!0,ue,ae,_e),ot=Ye[0],nt=Ye[1];Ne.name=nt,Ne.text=nt!==""?nt+" : "+ot:ot;var ze=Ne.cd[Ne.index];ze&&(ze.mc&&(Ne.mc=ze.mc),ze.mcc&&(Ne.mc=ze.mcc),ze.mlc&&(Ne.mlc=ze.mlc),ze.mlcc&&(Ne.mlc=ze.mlcc),ze.mlw&&(Ne.mlw=ze.mlw),ze.mrc&&(Ne.mrc=ze.mrc),ze.dir&&(Ne.dir=ze.dir)),Ne._distinct=!0,Ge.entries.push([Ne])}}Ge.entries.sort(function(jt,Pn){return jt[0].trace.index-Pn[0].trace.index}),Ge.layer=pe,Ge._inHover=!0,Ge._groupTitleFont=At.grouptitlefont,g(se,Ge);var Fe,rt,We,ft,mt=pe.select("g.legend"),vt=K(se,mt.node()),ut=vt.width+2*A,Mt=vt.height+2*A,bt=$e[0],St=(bt.x0+bt.x1)/2,Pt=(bt.y0+bt.y1)/2,Dt=!(d.traceIs(bt.trace,"bar-like")||d.traceIs(bt.trace,"box-violin"));De==="y"?Dt?(rt=Pt-A,Fe=Pt+A):(rt=Math.min.apply(null,$e.map(function(jt){return Math.min(jt.y0,jt.y1)})),Fe=Math.max.apply(null,$e.map(function(jt){return Math.max(jt.y0,jt.y1)}))):rt=Fe=w.mean($e.map(function(jt){return(jt.y0+jt.y1)/2}))-Mt/2,De==="x"?Dt?(We=St+A,ft=St-A):(We=Math.max.apply(null,$e.map(function(jt){return Math.max(jt.x0,jt.x1)})),ft=Math.min.apply(null,$e.map(function(jt){return Math.min(jt.x0,jt.x1)}))):We=ft=w.mean($e.map(function(jt){return(jt.x0+jt.x1)/2}))-ut/2;var Ft,Xt,an=Me._offset,Ht=Pe._offset;return ft+=an-ut,rt+=Ht-Mt,Ft=(We+=an)+ut<Be&&We>=0?We:ft+ut<Be&&ft>=0?ft:an+ut<Be?an:We-St<St-ft+ut?Be-ut:0,Ft+=A,Xt=(Fe+=Ht)+Mt<Ve&&Fe>=0?Fe:rt+Mt<Ve&&rt>=0?rt:Ht+Mt<Ve?Ht:Fe-Pt<Pt-rt+Mt?Ve-Mt:0,Xt+=A,mt.attr("transform",f(Ft-1,Xt-1)),mt}var Zt=pe.selectAll("g.hovertext").data(X,function(jt){return D(jt)});return Zt.enter().append("g").classed("hovertext",!0).each(function(){var jt=T.select(this);jt.append("rect").call(o.fill,o.addOpacity(ye,.8)),jt.append("text").classed("name",!0),jt.append("path").style("stroke-width","1px"),jt.append("text").classed("nums",!0).call(n.font,{weight:ge,style:oe,variant:re,textcase:fe,lineposition:Se,shadow:be,family:ke,size:Ce})}),Zt.exit().remove(),Zt.each(function(jt){var Pn=T.select(this).attr("transform",""),Tn=jt.color;Array.isArray(Tn)&&(Tn=Tn[jt.eventData[0].pointNumber]);var mn=jt.bgcolor||Tn,Qt=o.combine(o.opacity(mn)?mn:o.defaultLine,ye),un=o.combine(o.opacity(Tn)?Tn:o.defaultLine,ye),nn=jt.borderColor||o.contrast(Qt),hn=O(jt,Ze,ue,ae,_e,Pn),bn=hn[0],wn=hn[1],Cn=Pn.select("text.nums").call(n.font,{family:jt.fontFamily||ke,size:jt.fontSize||Ce,color:jt.fontColor||nn,weight:jt.fontWeight||ge,style:jt.fontStyle||oe,variant:jt.fontVariant||re,textcase:jt.fontTextcase||fe,lineposition:jt.fontLineposition||Se,shadow:jt.fontShadow||be}).text(bn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se),Ln=Pn.select("text.name"),Mn=0,jn=0;if(wn&&wn!==bn){Ln.call(n.font,{family:jt.fontFamily||ke,size:jt.fontSize||Ce,color:un,weight:jt.fontWeight||ge,style:jt.fontStyle||oe,variant:jt.fontVariant||re,textcase:jt.fontTextcase||fe,lineposition:jt.fontLineposition||Se,shadow:jt.fontShadow||be}).text(wn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se);var Rn=K(se,Ln.node());Mn=Rn.width+2*A,jn=Rn.height+2*A}else Ln.remove(),Pn.select("rect").remove();Pn.select("path").style({fill:Qt,stroke:nn});var Qn=jt.xa._offset+(jt.x0+jt.x1)/2,Yn=jt.ya._offset+(jt.y0+jt.y1)/2,ar=Math.abs(jt.x1-jt.x0),Kn=Math.abs(jt.y1-jt.y0),mr=K(se,Cn.node()),en=mr.width/ae._invScaleX,rn=mr.height/ae._invScaleY;jt.ty0=(Ee-mr.top)/ae._invScaleY,jt.bx=en+2*A,jt.by=Math.max(rn+2*A,jn),jt.anchor="start",jt.txwidth=en,jt.tx2width=Mn,jt.offset=0;var En,gn,Dn=(en+S+A+Mn)*ae._invScaleX;if(ve)jt.pos=Qn,En=Yn+Kn/2+Dn<=Ve,gn=Yn-Kn/2-Dn>=0,jt.idealAlign!=="top"&&En||!gn?En?(Yn+=Kn/2,jt.anchor="start"):jt.anchor="middle":(Yn-=Kn/2,jt.anchor="end"),jt.crossPos=Yn;else{if(jt.pos=Yn,En=Qn+ar/2+Dn<=Be,gn=Qn-ar/2-Dn>=0,jt.idealAlign!=="left"&&En||!gn)if(En)Qn+=ar/2,jt.anchor="start";else{jt.anchor="middle";var qn=Dn/2,Vn=Qn+qn-Be,Jn=Qn-qn;Vn>0&&(Qn-=Vn),Jn<0&&(Qn+=-Jn)}else Qn-=ar/2,jt.anchor="end";jt.crossPos=Qn}Cn.attr("text-anchor",jt.anchor),Mn&&Ln.attr("text-anchor",jt.anchor),Pn.attr("transform",f(Qn,Yn)+(ve?s(m):""))}),{hoverLabels:Zt,commonLabelBoundingBox:et}}function O(X,ie,se,ae,ue,ve){var ye="",pe="";X.nameOverride!==void 0&&(X.name=X.nameOverride),X.name&&(X.trace._meta&&(X.name=w.templateString(X.name,X.trace._meta)),ye=te(X.name,X.nameLength));var de=se.charAt(0),me=de==="x"?"y":"x";X.zLabel!==void 0?(X.xLabel!==void 0&&(pe+="x: "+X.xLabel+"<br>"),X.yLabel!==void 0&&(pe+="y: "+X.yLabel+"<br>"),X.trace.type!=="choropleth"&&X.trace.type!=="choroplethmapbox"&&(pe+=(pe?"z: ":"")+X.zLabel)):ie&&X[de+"Label"]===ue?pe=X[me+"Label"]||"":X.xLabel===void 0?X.yLabel!==void 0&&X.trace.type!=="scattercarpet"&&(pe=X.yLabel):pe=X.yLabel===void 0?X.xLabel:"("+X.xLabel+", "+X.yLabel+")",!X.text&&X.text!==0||Array.isArray(X.text)||(pe+=(pe?"<br>":"")+X.text),X.extraText!==void 0&&(pe+=(pe?"<br>":"")+X.extraText),ve&&pe===""&&!X.hovertemplate&&(ye===""&&ve.remove(),pe=ye);var ke=X.hovertemplate||!1;if(ke){var Ce=X.hovertemplateLabels||X;X[de+"Label"]!==ue&&(Ce[de+"other"]=Ce[de+"Val"],Ce[de+"otherLabel"]=Ce[de+"Label"]),pe=(pe=w.hovertemplateString(ke,Ce,ae._d3locale,X.eventData[0]||{},X.trace._meta)).replace(z,function(ge,oe){return ye=te(oe,X.nameLength),""})}return[pe,ye]}function j(X,ie){var se=0,ae=X.offset;return ie&&(ae*=-h,se=X.offset*_),{x:se,y:ae}}function Y(X,ie,se,ae){var ue=function(ye){return ye*se},ve=function(ye){return ye*ae};X.each(function(ye){var pe=T.select(this);if(ye.del)return pe.remove();var de,me,ke,Ce,ge=pe.select("text.nums"),oe=ye.anchor,re=oe==="end"?-1:1,fe=(Ce=(ke=(me={start:1,end:-1,middle:0}[(de=ye).anchor])*(S+A))+me*(de.txwidth+A),de.anchor==="middle"&&(ke-=de.tx2width/2,Ce+=de.txwidth/2+A),{alignShift:me,textShiftX:ke,text2ShiftX:Ce}),Se=j(ye,ie),be=Se.x,we=Se.y,Me=oe==="middle";pe.select("path").attr("d",Me?"M-"+ue(ye.bx/2+ye.tx2width/2)+","+ve(we-ye.by/2)+"h"+ue(ye.bx)+"v"+ve(ye.by)+"h-"+ue(ye.bx)+"Z":"M0,0L"+ue(re*S+be)+","+ve(S+we)+"v"+ve(ye.by/2-S)+"h"+ue(re*ye.bx)+"v-"+ve(ye.by)+"H"+ue(re*S+be)+"V"+ve(we-S)+"Z");var Pe=be+fe.textShiftX,De=we+ye.ty0-ye.by/2+A,he=ye.textAlign||"auto";he!=="auto"&&(he==="left"&&oe!=="start"?(ge.attr("text-anchor","start"),Pe=Me?-ye.bx/2-ye.tx2width/2+A:-ye.bx-A):he==="right"&&oe!=="end"&&(ge.attr("text-anchor","end"),Pe=Me?ye.bx/2-ye.tx2width/2-A:ye.bx+A)),ge.call(i.positionText,ue(Pe),ve(De)),ye.tx2width&&(pe.select("text.name").call(i.positionText,ue(fe.text2ShiftX+fe.alignShift*A+be),ve(we+ye.ty0-ye.by/2+A)),pe.select("rect").call(n.setRect,ue(fe.text2ShiftX+(fe.alignShift-1)*ye.tx2width/2+be),ve(we-ye.by/2-1),ue(ye.tx2width),ve(ye.by+2)))})}function B(X,ie){var se=X.index,ae=X.trace||{},ue=X.cd[0],ve=X.cd[se]||{};function ye(ge){return ge||k(ge)&&ge===0}var pe=Array.isArray(se)?function(ge,oe){var re=w.castOption(ue,se,ge);return ye(re)?re:w.extractOption({},ae,"",oe)}:function(ge,oe){return w.extractOption(ve,ae,ge,oe)};function de(ge,oe,re){var fe=pe(oe,re);ye(fe)&&(X[ge]=fe)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("fontWeight","htw","hoverlabel.font.weight"),de("fontStyle","hty","hoverlabel.font.style"),de("fontVariant","htv","hoverlabel.font.variant"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),X.posref=ie==="y"||ie==="closest"&&ae.orientation==="h"?X.xa._offset+(X.x0+X.x1)/2:X.ya._offset+(X.y0+X.y1)/2,X.x0=w.constrain(X.x0,0,X.xa._length),X.x1=w.constrain(X.x1,0,X.xa._length),X.y0=w.constrain(X.y0,0,X.ya._length),X.y1=w.constrain(X.y1,0,X.ya._length),X.xLabelVal!==void 0&&(X.xLabel="xLabel"in X?X.xLabel:c.hoverLabelText(X.xa,X.xLabelVal,ae.xhoverformat),X.xVal=X.xa.c2d(X.xLabelVal)),X.yLabelVal!==void 0&&(X.yLabel="yLabel"in X?X.yLabel:c.hoverLabelText(X.ya,X.yLabelVal,ae.yhoverformat),X.yVal=X.ya.c2d(X.yLabelVal)),X.zLabelVal!==void 0&&X.zLabel===void 0&&(X.zLabel=String(X.zLabelVal)),!(isNaN(X.xerr)||X.xa.type==="log"&&X.xerr<=0)){var me=c.tickText(X.xa,X.xa.c2l(X.xerr),"hover").text;X.xerrneg!==void 0?X.xLabel+=" +"+me+" / -"+c.tickText(X.xa,X.xa.c2l(X.xerrneg),"hover").text:X.xLabel+=" \xB1 "+me,ie==="x"&&(X.distance+=1)}if(!(isNaN(X.yerr)||X.ya.type==="log"&&X.yerr<=0)){var ke=c.tickText(X.ya,X.ya.c2l(X.yerr),"hover").text;X.yerrneg!==void 0?X.yLabel+=" +"+ke+" / -"+c.tickText(X.ya,X.ya.c2l(X.yerrneg),"hover").text:X.yLabel+=" \xB1 "+ke,ie==="y"&&(X.distance+=1)}var Ce=X.hoverinfo||X.trace.hoverinfo;return Ce&&Ce!=="all"&&((Ce=Array.isArray(Ce)?Ce:Ce.split("+")).indexOf("x")===-1&&(X.xLabel=void 0),Ce.indexOf("y")===-1&&(X.yLabel=void 0),Ce.indexOf("z")===-1&&(X.zLabel=void 0),Ce.indexOf("text")===-1&&(X.text=void 0),Ce.indexOf("name")===-1&&(X.name=void 0)),X}function U(X,ie,se){var ae,ue,ve=se.container,ye=se.fullLayout,pe=ye._size,de=se.event,me=!!ie.hLinePoint,ke=!!ie.vLinePoint;if(ve.selectAll(".spikeline").remove(),ke||me){var Ce=o.combine(ye.plot_bgcolor,ye.paper_bgcolor);if(me){var ge,oe,re=ie.hLinePoint;ae=re&&re.xa,(ue=re&&re.ya).spikesnap==="cursor"?(ge=de.pointerX,oe=de.pointerY):(ge=ae._offset+re.x,oe=ue._offset+re.y);var fe,Se,be=a.readability(re.color,Ce)<1.5?o.contrast(Ce):re.color,we=ue.spikemode,Me=ue.spikethickness,Pe=ue.spikecolor||be,De=c.getPxPosition(X,ue);if(we.indexOf("toaxis")!==-1||we.indexOf("across")!==-1){if(we.indexOf("toaxis")!==-1&&(fe=De,Se=ge),we.indexOf("across")!==-1){var he=ue._counterDomainMin,_e=ue._counterDomainMax;ue.anchor==="free"&&(he=Math.min(he,ue.position),_e=Math.max(_e,ue.position)),fe=pe.l+he*pe.w,Se=pe.l+_e*pe.w}ve.insert("line",":first-child").attr({x1:fe,x2:Se,y1:oe,y2:oe,"stroke-width":Me,stroke:Pe,"stroke-dasharray":n.dashStyle(ue.spikedash,Me)}).classed("spikeline",!0).classed("crisp",!0),ve.insert("line",":first-child").attr({x1:fe,x2:Se,y1:oe,y2:oe,"stroke-width":Me+2,stroke:Ce}).classed("spikeline",!0).classed("crisp",!0)}we.indexOf("marker")!==-1&&ve.insert("circle",":first-child").attr({cx:De+(ue.side!=="right"?Me:-Me),cy:oe,r:Me,fill:Pe}).classed("spikeline",!0)}if(ke){var Ae,Oe,Ee=ie.vLinePoint;ae=Ee&&Ee.xa,ue=Ee&&Ee.ya,ae.spikesnap==="cursor"?(Ae=de.pointerX,Oe=de.pointerY):(Ae=ae._offset+Ee.x,Oe=ue._offset+Ee.y);var Be,Ve,Ze=a.readability(Ee.color,Ce)<1.5?o.contrast(Ce):Ee.color,it=ae.spikemode,at=ae.spikethickness,gt=ae.spikecolor||Ze,yt=c.getPxPosition(X,ae);if(it.indexOf("toaxis")!==-1||it.indexOf("across")!==-1){if(it.indexOf("toaxis")!==-1&&(Be=yt,Ve=Oe),it.indexOf("across")!==-1){var pt=ae._counterDomainMin,et=ae._counterDomainMax;ae.anchor==="free"&&(pt=Math.min(pt,ae.position),et=Math.max(et,ae.position)),Be=pe.t+(1-et)*pe.h,Ve=pe.t+(1-pt)*pe.h}ve.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Be,y2:Ve,"stroke-width":at,stroke:gt,"stroke-dasharray":n.dashStyle(ae.spikedash,at)}).classed("spikeline",!0).classed("crisp",!0),ve.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Be,y2:Ve,"stroke-width":at+2,stroke:Ce}).classed("spikeline",!0).classed("crisp",!0)}it.indexOf("marker")!==-1&&ve.insert("circle",":first-child").attr({cx:Ae,cy:yt-(ae.side!=="top"?at:-at),r:at,fill:gt}).classed("spikeline",!0)}}}function q(X,ie){return!ie||ie.vLinePoint!==X._spikepoints.vLinePoint||ie.hLinePoint!==X._spikepoints.hLinePoint}function te(X,ie){return i.plainText(X||"",{len:ie,allowedTags:["br","sub","sup","b","i","em"]})}function ee(X,ie,se){var ae=ie[X+"a"],ue=ie[X+"Val"],ve=ie.cd[0];if(ae.type==="category"||ae.type==="multicategory")ue=ae._categoriesMap[ue];else if(ae.type==="date"){var ye=ie.trace[X+"periodalignment"];if(ye){var pe=ie.cd[ie.index],de=pe[X+"Start"];de===void 0&&(de=pe[X]);var me=pe[X+"End"];me===void 0&&(me=pe[X]);var ke=me-de;ye==="end"?ue+=ke:ye==="middle"&&(ue+=ke/2)}ue=ae.d2c(ue)}return ve&&ve.t&&ve.t.posLetter===ae._id&&(se.boxmode!=="group"&&se.violinmode!=="group"||(ue+=ve.t.dPos)),ue}function Q(X){return X.offsetTop+X.clientTop}function J(X){return X.offsetLeft+X.clientLeft}function K(X,ie){var se=X._fullLayout,ae=ie.getBoundingClientRect(),ue=ae.left,ve=ae.top,ye=ue+ae.width,pe=ve+ae.height,de=w.apply3DTransform(se._invTransform)(ue,ve),me=w.apply3DTransform(se._invTransform)(ye,pe),ke=de[0],Ce=de[1],ge=me[0],oe=me[1];return{x:ke,y:Ce,width:ge-ke,height:oe-Ce,top:Math.min(Ce,oe),left:Math.min(ke,ge),right:Math.max(ke,ge),bottom:Math.max(Ce,oe)}}},16132:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(10624).isUnifiedHover;F.exports=function(w,b,f,s){s=s||{};var t=b.legend;function i(r){s.font[r]||(s.font[r]=t?b.legend.font[r]:b.font[r])}b&&a(b.hovermode)&&(s.font||(s.font={}),i("size"),i("family"),i("color"),i("weight"),i("style"),i("variant"),t?(s.bgcolor||(s.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),f("hoverlabel.bgcolor",s.bgcolor),f("hoverlabel.bordercolor",s.bordercolor),f("hoverlabel.namelength",s.namelength),T.coerceFont(f,"hoverlabel.font",s.font),f("hoverlabel.align",s.align)}},41008:function(F,C,e){"use strict";var T=e(3400),k=e(65460);F.exports=function(a,w){function b(f,s){return w[f]!==void 0?w[f]:T.coerce(a,w,k,f,s)}return b("clickmode"),b("hoversubplots"),b("hovermode")}},93024:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(86476),w=e(10624),b=e(65460),f=e(83292);F.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:b},attributes:e(55756),layoutAttributes:b,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:w.getDistanceFunction,getClosest:w.getClosest,inbox:w.inbox,quadrature:w.quadrature,appendArrayPointValue:w.appendArrayPointValue,castHoverOption:function(s,t,i){return k.castOption(s,t,"hoverlabel."+i)},castHoverinfo:function(s,t,i){return k.castOption(s,i,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:s._module},t)})},hover:f.hover,unhover:a.unhover,loneHover:f.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:T.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(F,C,e){"use strict";var T=e(92456),k=e(25376),a=k({editType:"none"});a.family.dflt=T.HOVERFONT,a.size.dflt=T.HOVERFONTSIZE,F.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(F,C,e){"use strict";var T=e(3400),k=e(65460),a=e(41008),w=e(16132);F.exports=function(b,f){function s(n,o){return T.coerce(b,f,k,n,o)}a(b,f)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=f._has("mapbox"),i=f._has("geo"),r=f._basePlotModules.length;f.dragmode==="zoom"&&((t||i)&&r===1||t&&i&&r===2)&&(f.dragmode="pan"),w(b,f,s),T.coerceFont(s,"hoverlabel.grouptitlefont",f.hoverlabel.font)}},81976:function(F,C,e){"use strict";var T=e(3400),k=e(16132),a=e(65460);F.exports=function(w,b){k(w,b,function(f,s){return T.coerce(w,b,a,f,s)})}},12704:function(F,C,e){"use strict";var T=e(3400),k=e(53756).counter,a=e(86968).u,w=e(33816).idRegex,b=e(31780),f={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,o){var l=n[o+"axes"],c=Object.keys((r._splomAxes||{})[o]||{});return Array.isArray(l)?l:c.length?c:void 0}function t(r,n,o,l,c,d){var u=n(r+"gap",o),x=n("domain."+r);n(r+"side",l);for(var p=new Array(c),g=x[0],m=(x[1]-g)/(c-u),y=m*(1-u),v=0;v<c;v++){var _=g+m*v;p[d?c-1-v:v]=[_,_+y]}return p}function i(r,n,o,l,c){var d,u=new Array(o);function x(p,g){n.indexOf(g)!==-1&&l[g]===void 0?(u[p]=g,l[g]=p):u[p]=""}if(Array.isArray(r))for(d=0;d<o;d++)x(d,r[d]);else for(x(0,c),d=1;d<o;d++)x(d,c+(d+1));return u}F.exports={moduleType:"component",name:"grid",schema:{layout:{grid:f}},layoutAttributes:f,sizeDefaults:function(r,n){var o=r.grid||{},l=s(n,o,"x"),c=s(n,o,"y");if(r.grid||l||c){var d,u,x=Array.isArray(o.subplots)&&Array.isArray(o.subplots[0]),p=Array.isArray(l),g=Array.isArray(c),m=p&&l!==o.xaxes&&g&&c!==o.yaxes;x?(d=o.subplots.length,u=o.subplots[0].length):(g&&(d=c.length),p&&(u=l.length));var y=b.newContainer(n,"grid"),v=I("rows",d),_=I("columns",u);if(v*_>1){x||p||g||I("pattern")==="independent"&&(x=!0),y._hasSubplotGrid=x;var h,S,A=I("roworder")==="top to bottom",E=x?.2:.1,P=x?.3:.1;m&&n._splomGridDflt&&(h=n._splomGridDflt.xside,S=n._splomGridDflt.yside),y._domains={x:t("x",I,E,h,_),y:t("y",I,P,S,v,A)}}else delete n.grid}function I(D,z){return T.coerce(o,y,f,D,z)}},contentDefaults:function(r,n){var o=n.grid;if(o&&o._domains){var l,c,d,u,x,p,g,m=r.grid||{},y=n._subplots,v=o._hasSubplotGrid,_=o.rows,h=o.columns,S=o.pattern==="independent",A=o._axisMap={};if(v){var E=m.subplots||[];p=o.subplots=new Array(_);var P=1;for(l=0;l<_;l++){var I=p[l]=new Array(h),D=E[l]||[];for(c=0;c<h;c++)if(S?(x=P===1?"xy":"x"+P+"y"+P,P++):x=D[c],I[c]="",y.cartesian.indexOf(x)!==-1){if(g=x.indexOf("y"),d=x.slice(0,g),u=x.slice(g),A[d]!==void 0&&A[d]!==c||A[u]!==void 0&&A[u]!==l)continue;I[c]=x,A[d]=c,A[u]=l}}}else{var z=s(n,m,"x"),V=s(n,m,"y");o.xaxes=i(z,y.xaxis,h,A,"x"),o.yaxes=i(V,y.yaxis,_,A,"y")}var O=o._anchors={},j=o.roworder==="top to bottom";for(var Y in A){var B,U,q,te=Y.charAt(0),ee=o[te+"side"];if(ee.length<8)O[Y]="free";else if(te==="x"){if(ee.charAt(0)==="t"===j?(B=0,U=1,q=_):(B=_-1,U=-1,q=-1),v){var Q=A[Y];for(l=B;l!==q;l+=U)if((x=p[l][Q])&&(g=x.indexOf("y"),x.slice(0,g)===Y)){O[Y]=x.slice(g);break}}else for(l=B;l!==q;l+=U)if(u=o.yaxes[l],y.cartesian.indexOf(Y+u)!==-1){O[Y]=u;break}}else if(ee.charAt(0)==="l"?(B=0,U=1,q=h):(B=h-1,U=-1,q=-1),v){var J=A[Y];for(l=B;l!==q;l+=U)if((x=p[J][l])&&(g=x.indexOf("y"),x.slice(g)===Y)){O[Y]=x.slice(0,g);break}}else for(l=B;l!==q;l+=U)if(d=o.xaxes[l],y.cartesian.indexOf(d+Y)!==-1){O[Y]=d;break}}}}}},65760:function(F,C,e){"use strict";var T=e(33816),k=e(31780).templatedArray;e(36208),F.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(F,C,e){"use strict";var T=e(38248),k=e(36896);F.exports=function(a,w,b,f){w=w||{};var s=b==="log"&&w.type==="linear",t=b==="linear"&&w.type==="log";if(s||t){for(var i,r,n=a._fullLayout.images,o=w._id.charAt(0),l=0;l<n.length;l++)if(r="images["+l+"].",(i=n[l])[o+"ref"]===w._id){var c=i[o],d=i["size"+o],u=null,x=null;if(s){u=k(c,w.range);var p=d/Math.pow(10,u)/2;x=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else x=(u=Math.pow(10,c))*(Math.pow(10,d/2)-Math.pow(10,-d/2));T(u)?T(x)||(x=null):(u=null,x=null),f(r+o,u),f(r+"size"+o,x)}}}},25024:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(51272),w=e(65760);function b(f,s,t){function i(u,x){return T.coerce(f,s,w,u,x)}var r=i("source");if(!i("visible",!!r))return s;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var n={_fullLayout:t},o=["x","y"],l=0;l<2;l++){var c=o[l],d=k.coerceRef(f,s,n,c,"paper",void 0);d!=="paper"&&k.getFromId(n,d)._imgIndices.push(s._index),k.coercePosition(s,n,i,d,c,0)}return s}F.exports=function(f,s){a(f,s,{name:"images",handleItemDefaults:b})}},60963:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(54460),w=e(79811),b=e(9616);F.exports=function(f){var s,t,i=f._fullLayout,r=[],n={},o=[];for(t=0;t<i.images.length;t++){var l=i.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){s=w.ref2id(l.xref)+w.ref2id(l.yref);var c=i._plots[s];if(!c){o.push(l);continue}c.mainplot&&(s=c.mainplot.id),n[s]||(n[s]=[]),n[s].push(l)}else l.layer==="above"?r.push(l):o.push(l)}var d={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},u={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(h){var S=T.select(this);if(this._imgSrc!==h.source)if(S.attr("xmlns",b.svg),h.source&&h.source.slice(0,5)==="data:")S.attr("xlink:href",h.source),this._imgSrc=h.source;else{var A=new Promise((function(E){var P=new Image;function I(){S.remove(),E()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=I,P.onload=function(){var D=document.createElement("canvas");D.width=this.width,D.height=this.height,D.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=D.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",I),P.src=h.source,this._imgSrc=h.source}).bind(this));f._promises.push(A)}}function p(h){var S,A,E=T.select(this),P=a.getFromId(f,h.xref),I=a.getFromId(f,h.yref),D=a.getRefType(h.xref)==="domain",z=a.getRefType(h.yref)==="domain",V=i._size;S=P!==void 0?typeof h.xref=="string"&&D?P._length*h.sizex:Math.abs(P.l2p(h.sizex)-P.l2p(0)):h.sizex*V.w,A=I!==void 0?typeof h.yref=="string"&&z?I._length*h.sizey:Math.abs(I.l2p(h.sizey)-I.l2p(0)):h.sizey*V.h;var O,j,Y=S*d[h.xanchor].offset,B=A*u[h.yanchor].offset,U=d[h.xanchor].sizing+u[h.yanchor].sizing;switch(O=P!==void 0?typeof h.xref=="string"&&D?P._length*h.x+P._offset:P.r2p(h.x)+P._offset:h.x*V.w+V.l,O+=Y,j=I!==void 0?typeof h.yref=="string"&&z?I._length*(1-h.y)+I._offset:I.r2p(h.y)+I._offset:V.h-h.y*V.h+V.t,j+=B,h.sizing){case"fill":U+=" slice";break;case"stretch":U="none"}E.attr({x:O,y:j,width:S,height:A,preserveAspectRatio:U,opacity:h.opacity});var q=(P&&a.getRefType(h.xref)!=="domain"?P._id:"")+(I&&a.getRefType(h.yref)!=="domain"?I._id:"");k.setClipUrl(E,q?"clip"+i._uid+q:null,f)}var g=i._imageLowerLayer.selectAll("image").data(o),m=i._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),m.enter().append("image"),g.exit().remove(),m.exit().remove(),g.each(function(h){x.bind(this)(h),p.bind(this)(h)}),m.each(function(h){x.bind(this)(h),p.bind(this)(h)});var y=Object.keys(i._plots);for(t=0;t<y.length;t++){s=y[t];var v=i._plots[s];if(v.imagelayer){var _=v.imagelayer.selectAll("image").data(n[s]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(h){x.bind(this)(h),p.bind(this)(h)})}}}},7402:function(F,C,e){"use strict";F.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(F,C,e){"use strict";var T=e(25376),k=e(22548);F.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:T({editType:"legend"}),grouptitlefont:T({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:T({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(F){"use strict";F.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(31780),w=e(45464),b=e(3800),f=e(64859),s=e(42451);function t(i,r,n,o){var l=r[i]||{},c=a.newContainer(n,i);function d(U,q){return k.coerce(l,c,b,U,q)}var u=k.coerceFont(d,"font",n.font);if(d("bgcolor",n.paper_bgcolor),d("bordercolor"),d("visible")){for(var x,p=function(U,q){var te=x._input,ee=x;return k.coerce(te,ee,w,U,q)},g=n.font||{},m=k.coerceFont(d,"grouptitlefont",g,{overrideDflt:{size:Math.round(1.1*g.size)}}),y=0,v=!1,_="normal",h=(n.shapes||[]).filter(function(U){return U.showlegend}),S=o.concat(h).filter(function(U){return i===(U.legend||"legend")}),A=0;A<S.length;A++)if((x=S[A]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(y++,x.showlegend&&(v=!0,(!E&&T.traceIs(x,"pie-like")||x._input.showlegend===!0)&&y++),k.coerceFont(p,"legendgrouptitle.font",m)),(!E&&T.traceIs(x,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(_=s.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(_=s.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var P=k.coerce(r,n,f,"showlegend",v&&y>(i==="legend"?1:0));if(P===!1&&(n[i]=void 0),(P!==!1||l.uirevision)&&(d("uirevision",n.uirevision),P!==!1)){d("borderwidth");var I,D,z,V=d("orientation")==="h",O=d("yref")==="paper",j=d("xref")==="paper",Y="left";if(V?(I=0,T.getComponentMethod("rangeslider","isVisible")(r.xaxis)?O?(D=1.1,z="bottom"):(D=1,z="top"):O?(D=-.1,z="top"):(D=0,z="bottom")):(D=1,z="auto",j?I=1.02:(I=1,Y="right")),k.coerce(l,c,{x:{valType:"number",editType:"legend",min:j?-2:0,max:j?3:1,dflt:I}},"x"),k.coerce(l,c,{y:{valType:"number",editType:"legend",min:O?-2:0,max:O?3:1,dflt:D}},"y"),d("traceorder",_),s.isGrouped(n[i])&&d("tracegroupgap"),d("entrywidth"),d("entrywidthmode"),d("indentation"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("xanchor",Y),d("yanchor",z),d("valign"),k.noneOrAll(l,c,["x","y"]),d("title.text")){d("title.side",V?"left":"top");var B=k.extendFlat({},u,{size:k.bigFont(u.size)});k.coerceFont(d,"title.font",B)}}}}F.exports=function(i,r,n){var o,l=n.slice(),c=r.shapes;if(c)for(o=0;o<c.length;o++){var d=c[o];if(d.showlegend){var u={_input:d._input,visible:d.visible,showlegend:d.showlegend,legend:d.legend};l.push(u)}}var x=["legend"];for(o=0;o<l.length;o++)k.pushUnique(x,l[o].legend);for(r._legends=[],o=0;o<x.length;o++){var p=x[o];t(p,i,r,l),r[p]&&r[p].visible&&(r[p]._id=p),r._legends.push(p)}}},31140:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(7316),w=e(24040),b=e(95924),f=e(86476),s=e(43616),t=e(76308),i=e(72736),r=e(33048),n=e(65196),o=e(84284),l=o.LINE_SPACING,c=o.FROM_TL,d=o.FROM_BR,u=e(35456),x=e(2012),p=e(42451),g=1,m=/^legend[0-9]*$/;function y(z,V){var O,j,Y=V||{},B=z._fullLayout,U=D(Y),q=Y._inHover;if(q?(j=Y.layer,O="hover"):(j=B._infolayer,O=U),j){var te;if(O+=B._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),q){if(!Y.entries)return;te=u(Y.entries,Y)}else{for(var ee=(z.calcdata||[]).slice(),Q=B.shapes,J=0;J<Q.length;J++){var K=Q[J];if(K.showlegend){var X={_isShape:!0,_fullInput:K,index:K._index,name:K.name||K.label.text||"shape "+K._index,legend:K.legend,legendgroup:K.legendgroup,legendgrouptitle:K.legendgrouptitle,legendrank:K.legendrank,legendwidth:K.legendwidth,showlegend:K.showlegend,visible:K.visible,opacity:K.opacity,mode:K.type==="line"?"lines":"markers",line:K.line,marker:{line:K.line,color:K.fillcolor,size:12,symbol:K.type==="rect"?"square":K.type==="circle"?"circle":"hexagon2"}};ee.push([{trace:X}])}}te=B.showlegend&&u(ee,Y,B._legends.length>1)}var ie=B.hiddenlabels||[];if(!(q||B.showlegend&&te.length))return j.selectAll("."+U).remove(),B._topdefs.select("#"+O).remove(),a.autoMargin(z,U);var se=k.ensureSingle(j,"g",U,function(Ce){q||Ce.attr("pointer-events","all")}),ae=k.ensureSingleById(B._topdefs,"clipPath",O,function(Ce){Ce.append("rect")}),ue=k.ensureSingle(se,"rect","bg",function(Ce){Ce.attr("shape-rendering","crispEdges")});ue.call(t.stroke,Y.bordercolor).call(t.fill,Y.bgcolor).style("stroke-width",Y.borderwidth+"px");var ve,ye=k.ensureSingle(se,"g","scrollbox"),pe=Y.title;Y._titleWidth=0,Y._titleHeight=0,pe.text?((ve=k.ensureSingle(ye,"text",U+"titletext")).attr("text-anchor","start").call(s.font,pe.font).text(pe.text),E(ve,ye,z,Y,g)):ye.selectAll("."+U+"titletext").remove();var de=k.ensureSingle(se,"rect","scrollbar",function(Ce){Ce.attr(n.scrollBarEnterAttrs).call(t.fill,n.scrollBarColor)}),me=ye.selectAll("g.groups").data(te);me.enter().append("g").attr("class","groups"),me.exit().remove();var ke=me.selectAll("g.traces").data(k.identity);ke.enter().append("g").attr("class","traces"),ke.exit().remove(),ke.style("opacity",function(Ce){var ge=Ce[0].trace;return w.traceIs(ge,"pie-like")?ie.indexOf(Ce[0].label)!==-1?.5:1:ge.visible==="legendonly"?.5:1}).each(function(){T.select(this).call(h,z,Y)}).call(x,z,Y).each(function(){q||T.select(this).call(A,z,U)}),k.syncOrAsync([a.previousPromises,function(){return function(Ce,ge,oe,re){var fe=Ce._fullLayout,Se=D(re);re||(re=fe[Se]);var be=fe._size,we=p.isVertical(re),Me=p.isGrouped(re),Pe=re.entrywidthmode==="fraction",De=re.borderwidth,he=2*De,_e=n.itemGap,Ae=re.indentation+re.itemwidth+2*_e,Oe=2*(De+_e),Ee=I(re),Be=re.y<0||re.y===0&&Ee==="top",Ve=re.y>1||re.y===1&&Ee==="bottom",Ze=re.tracegroupgap,it={};re._maxHeight=Math.max(Be||Ve?fe.height/2:be.h,30);var at=0;re._width=0,re._height=0;var gt=function(mt){var vt=0,ut=0,Mt=mt.title.side;return Mt&&(Mt.indexOf("left")!==-1&&(vt=mt._titleWidth),Mt.indexOf("top")!==-1&&(ut=mt._titleHeight)),[vt,ut]}(re);if(we)oe.each(function(mt){var vt=mt[0].height;s.setTranslate(this,De+gt[0],De+gt[1]+re._height+vt/2+_e),re._height+=vt,re._width=Math.max(re._width,mt[0].width)}),at=Ae+re._width,re._width+=_e+Ae+he,re._height+=Oe,Me&&(ge.each(function(mt,vt){s.setTranslate(this,0,vt*re.tracegroupgap)}),re._height+=(re._lgroupsLength-1)*re.tracegroupgap);else{var yt=P(re),pt=re.x<0||re.x===0&&yt==="right",et=re.x>1||re.x===1&&yt==="left",$e=Ve||Be,At=fe.width/2;re._maxWidth=Math.max(pt?$e&&yt==="left"?be.l+be.w:At:et?$e&&yt==="right"?be.r+be.w:At:be.w,2*Ae);var Ot=0,Rt=0;oe.each(function(mt){var vt=v(mt,re,Ae);Ot=Math.max(Ot,vt),Rt+=vt}),at=null;var Ct=0;if(Me){var Ge=0,Xe=0,Ne=0;ge.each(function(){var mt=0,vt=0;T.select(this).selectAll("g.traces").each(function(Mt){var bt=v(Mt,re,Ae),St=Mt[0].height;s.setTranslate(this,gt[0],gt[1]+De+_e+St/2+vt),vt+=St,mt=Math.max(mt,bt),it[Mt[0].trace.legendgroup]=mt});var ut=mt+_e;Xe>0&&ut+De+Xe>re._maxWidth?(Ct=Math.max(Ct,Xe),Xe=0,Ne+=Ge+Ze,Ge=vt):Ge=Math.max(Ge,vt),s.setTranslate(this,Xe,Ne),Xe+=ut}),re._width=Math.max(Ct,Xe)+De,re._height=Ne+Ge+Oe}else{var Ye=oe.size(),ot=Rt+he+(Ye-1)*_e<re._maxWidth,nt=0,ze=0,Fe=0,rt=0;oe.each(function(mt){var vt=mt[0].height,ut=v(mt,re,Ae),Mt=ot?ut:Ot;Pe||(Mt+=_e),Mt+De+ze-_e>=re._maxWidth&&(Ct=Math.max(Ct,rt),ze=0,Fe+=nt,re._height+=nt,nt=0),s.setTranslate(this,gt[0]+De+ze,gt[1]+De+Fe+vt/2+_e),rt=ze+ut+_e,ze+=Mt,nt=Math.max(nt,vt)}),ot?(re._width=ze+he,re._height=nt+Oe):(re._width=Math.max(Ct,rt)+he,re._height+=nt+Oe)}}re._width=Math.ceil(Math.max(re._width+gt[0],re._titleWidth+2*(De+n.titlePad))),re._height=Math.ceil(Math.max(re._height+gt[1],re._titleHeight+2*(De+n.itemGap))),re._effHeight=Math.min(re._height,re._maxHeight);var We=Ce._context.edits,ft=We.legendText||We.legendPosition;oe.each(function(mt){var vt=T.select(this).select("."+Se+"toggle"),ut=mt[0].height,Mt=mt[0].trace.legendgroup,bt=v(mt,re,Ae);Me&&Mt!==""&&(bt=it[Mt]);var St=ft?Ae:at||bt;we||Pe||(St+=_e/2),s.setRect(vt,0,-ut/2,St,ut)})}(z,me,ke,Y)},function(){var Ce,ge,oe,re,fe=B._size,Se=Y.borderwidth,be=Y.xref==="paper",we=Y.yref==="paper";if(pe.text&&function($e,At,Ot){if(At.title.side==="top center"||At.title.side==="top right"){var Rt=At.title.font.size*l,Ct=0,Ge=$e.node(),Xe=s.bBox(Ge).width;At.title.side==="top center"?Ct=.5*(At._width-2*Ot-2*n.titlePad-Xe):At.title.side==="top right"&&(Ct=At._width-2*Ot-2*n.titlePad-Xe),i.positionText($e,Ot+n.titlePad+Ct,Ot+Rt)}}(ve,Y,Se),!q){var Me,Pe;Me=be?fe.l+fe.w*Y.x-c[P(Y)]*Y._width:B.width*Y.x-c[P(Y)]*Y._width,Pe=we?fe.t+fe.h*(1-Y.y)-c[I(Y)]*Y._effHeight:B.height*(1-Y.y)-c[I(Y)]*Y._effHeight;var De=function($e,At,Ot,Rt){var Ct=$e._fullLayout,Ge=Ct[At],Xe=P(Ge),Ne=I(Ge),Ye=Ge.xref==="paper",ot=Ge.yref==="paper";$e._fullLayout._reservedMargin[At]={};var nt=Ge.y<.5?"b":"t",ze=Ge.x<.5?"l":"r",Fe={r:Ct.width-Ot,l:Ot+Ge._width,b:Ct.height-Rt,t:Rt+Ge._effHeight};if(Ye&&ot)return a.autoMargin($e,At,{x:Ge.x,y:Ge.y,l:Ge._width*c[Xe],r:Ge._width*d[Xe],b:Ge._effHeight*d[Ne],t:Ge._effHeight*c[Ne]});Ye?$e._fullLayout._reservedMargin[At][nt]=Fe[nt]:ot||Ge.orientation==="v"?$e._fullLayout._reservedMargin[At][ze]=Fe[ze]:$e._fullLayout._reservedMargin[At][nt]=Fe[nt]}(z,U,Me,Pe);if(De)return;if(B.margin.autoexpand){var he=Me,_e=Pe;Me=be?k.constrain(Me,0,B.width-Y._width):he,Pe=we?k.constrain(Pe,0,B.height-Y._effHeight):_e,Me!==he&&k.log("Constrain "+U+".x to make legend fit inside graph"),Pe!==_e&&k.log("Constrain "+U+".y to make legend fit inside graph")}s.setTranslate(se,Me,Pe)}if(de.on(".drag",null),se.on("wheel",null),q||Y._height<=Y._maxHeight||z._context.staticPlot){var Ae=Y._effHeight;q&&(Ae=Y._height),ue.attr({width:Y._width-Se,height:Ae-Se,x:Se/2,y:Se/2}),s.setTranslate(ye,0,0),ae.select("rect").attr({width:Y._width-2*Se,height:Ae-2*Se,x:Se,y:Se}),s.setClipUrl(ye,O,z),s.setRect(de,0,0,0,0),delete Y._scrollY}else{var Oe,Ee,Be,Ve=Math.max(n.scrollBarMinHeight,Y._effHeight*Y._effHeight/Y._height),Ze=Y._effHeight-Ve-2*n.scrollBarMargin,it=Y._height-Y._effHeight,at=Ze/it,gt=Math.min(Y._scrollY||0,it);ue.attr({width:Y._width-2*Se+n.scrollBarWidth+n.scrollBarMargin,height:Y._effHeight-Se,x:Se/2,y:Se/2}),ae.select("rect").attr({width:Y._width-2*Se+n.scrollBarWidth+n.scrollBarMargin,height:Y._effHeight-2*Se,x:Se,y:Se+gt}),s.setClipUrl(ye,O,z),et(gt,Ve,at),se.on("wheel",function(){et(gt=k.constrain(Y._scrollY+T.event.deltaY/Ze*it,0,it),Ve,at),gt!==0&&gt!==it&&T.event.preventDefault()});var yt=T.behavior.drag().on("dragstart",function(){var $e=T.event.sourceEvent;Oe=$e.type==="touchstart"?$e.changedTouches[0].clientY:$e.clientY,Be=gt}).on("drag",function(){var $e=T.event.sourceEvent;$e.buttons===2||$e.ctrlKey||(Ee=$e.type==="touchmove"?$e.changedTouches[0].clientY:$e.clientY,gt=function(At,Ot,Rt){var Ct=(Rt-Ot)/at+At;return k.constrain(Ct,0,it)}(Be,Oe,Ee),et(gt,Ve,at))});de.call(yt);var pt=T.behavior.drag().on("dragstart",function(){var $e=T.event.sourceEvent;$e.type==="touchstart"&&(Oe=$e.changedTouches[0].clientY,Be=gt)}).on("drag",function(){var $e=T.event.sourceEvent;$e.type==="touchmove"&&(Ee=$e.changedTouches[0].clientY,gt=function(At,Ot,Rt){var Ct=(Ot-Rt)/at+At;return k.constrain(Ct,0,it)}(Be,Oe,Ee),et(gt,Ve,at))});ye.call(pt)}function et($e,At,Ot){Y._scrollY=z._fullLayout[U]._scrollY=$e,s.setTranslate(ye,0,-$e),s.setRect(de,Y._width,n.scrollBarMargin+$e*Ot,n.scrollBarWidth,At),ae.select("rect").attr("y",Se+$e)}z._context.edits.legendPosition&&(se.classed("cursor-move",!0),f.init({element:se.node(),gd:z,prepFn:function($e){if($e.target!==de.node()){var At=s.getTranslate(se);oe=At.x,re=At.y}},moveFn:function($e,At){if(oe!==void 0&&re!==void 0){var Ot=oe+$e,Rt=re+At;s.setTranslate(se,Ot,Rt),Ce=f.align(Ot,Y._width,fe.l,fe.l+fe.w,Y.xanchor),ge=f.align(Rt+Y._height,-Y._height,fe.t+fe.h,fe.t,Y.yanchor)}},doneFn:function(){if(Ce!==void 0&&ge!==void 0){var $e={};$e[U+".x"]=Ce,$e[U+".y"]=ge,w.call("_guiRelayout",z,$e)}},clickFn:function($e,At){var Ot=j.selectAll("g.traces").filter(function(){var Rt=this.getBoundingClientRect();return At.clientX>=Rt.left&&At.clientX<=Rt.right&&At.clientY>=Rt.top&&At.clientY<=Rt.bottom});Ot.size()>0&&_(z,se,Ot,$e,At)}}))}],z)}}function v(z,V,O){var j=z[0],Y=j.width,B=V.entrywidthmode,U=j.trace.legendwidth||V.entrywidth;return B==="fraction"?V._maxWidth*U:O+(U||Y)}function _(z,V,O,j,Y){var B=O.data()[0][0].trace,U={event:Y,node:O.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};B._group&&(U.group=B._group),w.traceIs(B,"pie-like")&&(U.label=O.datum()[0].label);var q=b.triggerHandler(z,"plotly_legendclick",U);if(j===1){if(q===!1)return;V._clickTimeout=setTimeout(function(){z._fullLayout&&r(O,z,j)},z._context.doubleClickDelay)}else j===2&&(V._clickTimeout&&clearTimeout(V._clickTimeout),z._legendMouseDownTime=0,b.triggerHandler(z,"plotly_legenddoubleclick",U)!==!1&&q!==!1&&r(O,z,j))}function h(z,V,O){var j,Y,B=D(O),U=z.data()[0][0],q=U.trace,te=w.traceIs(q,"pie-like"),ee=!O._inHover&&V._context.edits.legendText&&!te,Q=O._maxNameLength;U.groupTitle?(j=U.groupTitle.text,Y=U.groupTitle.font):(Y=O.font,O.entries?j=U.text:(j=te?U.label:q.name,q._meta&&(j=k.templateString(j,q._meta))));var J=k.ensureSingle(z,"text",B+"text");J.attr("text-anchor","start").call(s.font,Y).text(ee?S(j,Q):j);var K=O.indentation+O.itemwidth+2*n.itemGap;i.positionText(J,K,0),ee?J.call(i.makeEditable,{gd:V,text:j}).call(E,z,V,O).on("edit",function(X){this.text(S(X,Q)).call(E,z,V,O);var ie=U.trace._fullInput||{},se={};if(w.hasTransform(ie,"groupby")){var ae=w.getTransformIndices(ie,"groupby"),ue=ae[ae.length-1],ve=k.keyedContainer(ie,"transforms["+ue+"].styles","target","value.name");ve.set(U.trace._group,X),se=ve.constructUpdate()}else se.name=X;return ie._isShape?w.call("_guiRelayout",V,"shapes["+q.index+"].name",se.name):w.call("_guiRestyle",V,se,q.index)}):E(J,z,V,O)}function S(z,V){var O=Math.max(4,V);if(z&&z.trim().length>=O/2)return z;for(var j=O-(z=z||"").length;j>0;j--)z+=" ";return z}function A(z,V,O){var j,Y=V._context.doubleClickDelay,B=1,U=k.ensureSingle(z,"rect",O+"toggle",function(q){V._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(t.fill,"rgba(0,0,0,0)")});V._context.staticPlot||(U.on("mousedown",function(){(j=new Date().getTime())-V._legendMouseDownTime<Y?B+=1:(B=1,V._legendMouseDownTime=j)}),U.on("mouseup",function(){if(!V._dragged&&!V._editing){var q=V._fullLayout[O];new Date().getTime()-V._legendMouseDownTime>Y&&(B=Math.max(B-1,1)),_(V,q,z,B,T.event)}}))}function E(z,V,O,j,Y){j._inHover&&z.attr("data-notex",!0),i.convertToTspans(z,O,function(){(function(B,U,q,te){var ee=B.data()[0][0];if(q._inHover||!ee||ee.trace.showlegend){var Q=B.select("g[class*=math-group]"),J=Q.node(),K=D(q);q||(q=U._fullLayout[K]);var X,ie,se=q.borderwidth,ae=(te===g?q.title.font:ee.groupTitle?ee.groupTitle.font:q.font).size*l;if(J){var ue=s.bBox(J);X=ue.height,ie=ue.width,te===g?s.setTranslate(Q,se,se+.75*X):s.setTranslate(Q,0,.25*X)}else{var ve="."+K+(te===g?"title":"")+"text",ye=B.select(ve),pe=i.lineCount(ye),de=ye.node();if(X=ae*pe,ie=de?s.bBox(de).width:0,te===g)q.title.side==="left"&&(ie+=2*n.itemGap),i.positionText(ye,se+n.titlePad,se+ae);else{var me=2*n.itemGap+q.indentation+q.itemwidth;ee.groupTitle&&(me=n.itemGap,ie-=q.indentation+q.itemwidth),i.positionText(ye,me,-ae*((pe-1)/2-.3))}}te===g?(q._titleWidth=ie,q._titleHeight=X):(ee.lineHeight=ae,ee.height=Math.max(X,16)+3,ee.width=ie)}else B.remove()})(V,O,j,Y)})}function P(z){return k.isRightAnchor(z)?"right":k.isCenterAnchor(z)?"center":"left"}function I(z){return k.isBottomAnchor(z)?"bottom":k.isMiddleAnchor(z)?"middle":"top"}function D(z){return z._id||"legend"}F.exports=function(z,V){if(V)y(z,V);else{var O=z._fullLayout,j=O._legends;O._infolayer.selectAll('[class^="legend"]').each(function(){var U=T.select(this),q=U.attr("class").split(" ")[0];q.match(m)&&j.indexOf(q)===-1&&U.remove()});for(var Y=0;Y<j.length;Y++){var B=j[Y];y(z,z._fullLayout[B])}}}},35456:function(F,C,e){"use strict";var T=e(24040),k=e(42451);F.exports=function(a,w,b){var f,s,t=w._inHover,i=k.isGrouped(w),r=k.isReversed(w),n={},o=[],l=!1,c={},d=0,u=0;function x(j,Y,B){if(w.visible!==!1&&(!b||j===w._id))if(Y!==""&&k.isGrouped(w))o.indexOf(Y)===-1?(o.push(Y),l=!0,n[Y]=[B]):n[Y].push(B);else{var U="~~i"+d;o.push(U),n[U]=[B],d++}}for(f=0;f<a.length;f++){var p=a[f],g=p[0],m=g.trace,y=m.legend,v=m.legendgroup;if(t||m.visible&&m.showlegend)if(T.traceIs(m,"pie-like"))for(c[v]||(c[v]={}),s=0;s<p.length;s++){var _=p[s].label;c[v][_]||(x(y,v,{label:_,color:p[s].color,i:p[s].i,trace:m,pts:p[s].pts}),c[v][_]=!0,u=Math.max(u,(_||"").length))}else x(y,v,g),u=Math.max(u,(m.name||"").length)}if(!o.length)return[];var h=!l||!i,S=[];for(f=0;f<o.length;f++){var A=n[o[f]];h?S.push(A[0]):S.push(A)}for(h&&(S=[S]),f=0;f<S.length;f++){var E=1/0;for(s=0;s<S[f].length;s++){var P=S[f][s].trace.legendrank;E>P&&(E=P)}S[f][0]._groupMinRank=E,S[f][0]._preGroupSort=f}var I=function(j,Y){return j.trace.legendrank-Y.trace.legendrank||j._preSort-Y._preSort};for(S.forEach(function(j,Y){j[0]._preGroupSort=Y}),S.sort(function(j,Y){return j[0]._groupMinRank-Y[0]._groupMinRank||j[0]._preGroupSort-Y[0]._preGroupSort}),f=0;f<S.length;f++){S[f].forEach(function(j,Y){j._preSort=Y}),S[f].sort(I);var D=S[f][0].trace,z=null;for(s=0;s<S[f].length;s++){var V=S[f][s].trace.legendgrouptitle;if(V&&V.text){z=V,t&&(V.font=w._groupTitleFont);break}}if(r&&S[f].reverse(),z){var O=!1;for(s=0;s<S[f].length;s++)if(T.traceIs(S[f][s].trace,"pie-like")){O=!0;break}S[f].unshift({i:-1,groupTitle:z,noClick:O,trace:{showlegend:D.showlegend,legendgroup:D.legendgroup,visible:w.groupclick==="toggleitem"||D.visible}})}for(s=0;s<S[f].length;s++)S[f][s]=[S[f][s]]}return w._lgroupsLength=S.length,w._maxNameLength=u,S}},33048:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=k.pushUnique,w=!0;F.exports=function(b,f,s){var t=f._fullLayout;if(!f._dragged&&!f._editing){var i,r=t.legend.itemclick,n=t.legend.itemdoubleclick,o=t.legend.groupclick;if(s===1&&r==="toggle"&&n==="toggleothers"&&w&&f.data&&f._context.showTips&&k.notifier(k._(f,"Double-click on legend to isolate one trace"),"long"),w=!1,s===1?i=r:s===2&&(i=n),i){var l=o==="togglegroup",c=t.hiddenlabels?t.hiddenlabels.slice():[],d=b.data()[0][0];if(!d.groupTitle||!d.noClick){var u=f._fullData,x=(t.shapes||[]).filter(function(ge){return ge.showlegend}),p=u.concat(x),g=d.trace;g._isShape&&(g=g._fullInput);var m,y,v,_,h,S=g.legendgroup,A={},E=[],P=[],I=[],D=(t.shapes||[]).map(function(ge){return ge._input}),z=!1,V=g.legend,O=g._fullInput;if(O&&O._isShape||!T.traceIs(g,"pie-like")){var j,Y=S&&S.length,B=[];if(Y)for(m=0;m<p.length;m++)(j=p[m]).visible&&j.legendgroup===S&&B.push(m);if(i==="toggle"){var U;switch(g.visible){case!0:U="legendonly";break;case!1:U=!1;break;case"legendonly":U=!0}if(Y)if(l)for(m=0;m<p.length;m++){var q=p[m];q.visible!==!1&&q.legendgroup===S&&Ce(q,U)}else Ce(g,U);else Ce(g,U)}else if(i==="toggleothers"){var te,ee,Q,J,K=!0;for(m=0;m<p.length;m++)if(te=(J=p[m])===g,ee=J.showlegend!==!0,!(te||ee||Y&&J.legendgroup===S||J.legend!==V||J.visible!==!0||T.traceIs(J,"notLegendIsolatable"))){K=!1;break}for(m=0;m<p.length;m++)if((J=p[m]).visible!==!1&&J.legend===V&&!T.traceIs(J,"notLegendIsolatable"))switch(g.visible){case"legendonly":Ce(J,!0);break;case!0:Q=!!K||"legendonly",te=J===g,ee=J.showlegend!==!0&&!J.legendgroup,Ce(J,!!(te||Y&&J.legendgroup===S||ee)||Q)}}for(m=0;m<P.length;m++)if(v=P[m]){var X=v.constructUpdate(),ie=Object.keys(X);for(y=0;y<ie.length;y++)_=ie[y],(A[_]=A[_]||[])[I[m]]=X[_]}for(h=Object.keys(A),m=0;m<h.length;m++)for(_=h[m],y=0;y<E.length;y++)A[_].hasOwnProperty(y)||(A[_][y]=void 0);z?T.call("_guiUpdate",f,A,{shapes:D},E):T.call("_guiRestyle",f,A,E)}else{var se=d.label,ae=c.indexOf(se);if(i==="toggle")ae===-1?c.push(se):c.splice(ae,1);else if(i==="toggleothers"){var ue=ae!==-1,ve=[];for(m=0;m<f.calcdata.length;m++){var ye=f.calcdata[m];for(y=0;y<ye.length;y++){var pe=ye[y].label;V===ye[0].trace.legend&&se!==pe&&(c.indexOf(pe)===-1&&(ue=!0),a(c,pe),ve.push(pe))}}if(!ue)for(var de=0;de<ve.length;de++){var me=c.indexOf(ve[de]);me!==-1&&c.splice(me,1)}}T.call("_guiRelayout",f,"hiddenlabels",c)}}}}function ke(ge,oe){var re=E.indexOf(ge),fe=A.visible;return fe||(fe=A.visible=[]),E.indexOf(ge)===-1&&(E.push(ge),re=E.length-1),fe[re]=oe,re}function Ce(ge,oe){if(!d.groupTitle||l){var re,fe=ge._fullInput||ge,Se=fe._isShape,be=fe.index;if(be===void 0&&(be=fe._index),T.hasTransform(fe,"groupby")){var we=P[be];if(!we){var Me=T.getTransformIndices(fe,"groupby"),Pe=Me[Me.length-1];we=k.keyedContainer(fe,"transforms["+Pe+"].styles","target","value.visible"),P[be]=we}var De=we.get(ge._group);De===void 0&&(De=!0),De!==!1&&we.set(ge._group,oe),I[be]=ke(be,fe.visible!==!1)}else{var he=fe.visible!==!1&&oe;Se?(re=he,D[be].visible=re,z=!0):ke(be,he)}}}}},42451:function(F,C){"use strict";C.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},C.isVertical=function(e){return e.orientation!=="h"},C.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(F,C,e){"use strict";F.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(3400),w=a.strTranslate,b=e(43616),f=e(76308),s=e(94288).extractOpts,t=e(43028),i=e(10528),r=e(69656).castOption,n=e(65196);function o(d,u){return(u?"radial":"horizontal")+(d?"":"reversed")}function l(d){var u=d[0].trace,x=u.contours,p=t.hasLines(u),g=t.hasMarkers(u),m=u.visible&&u.fill&&u.fill!=="none",y=!1,v=!1;if(x){var _=x.coloring;_==="lines"?y=!0:p=_==="none"||_==="heatmap"||x.showlines,x.type==="constraint"?m=x._operation!=="=":_!=="fill"&&_!=="heatmap"||(v=!0)}return{showMarker:g,showLine:p,showFill:m,showGradientLine:y,showGradientFill:v,anyLine:p||y,anyFill:m||v}}function c(d,u,x){return d&&a.isArrayOrTypedArray(d)?u:d>x?x:d}F.exports=function(d,u,x){var p=u._fullLayout;x||(x=p.legend);var g=x.itemsizing==="constant",m=x.itemwidth,y=(m+2*n.itemGap)/2,v=w(y,0),_=function(A,E,P,I){var D;if(A+1)D=A;else{if(!(E&&E.width>0))return 0;D=E.width}return g?I:Math.min(D,P)};function h(A,E,P){var I=A[0].trace,D=I.marker||{},z=D.line||{},V=D.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",O=P?I.visible&&I.type===P:k.traceIs(I,"bar"),j=T.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(O?[A]:[]);j.enter().append("path").classed("legend"+P,!0).attr("d",V).attr("transform",v),j.exit().remove(),j.each(function(Y){var B=T.select(this),U=Y[0],q=_(U.mlw,D.line,5,2);B.style("stroke-width",q+"px");var te=U.mcc;if(!x._inHover&&"mc"in U){var ee=s(D),Q=ee.mid;Q===void 0&&(Q=(ee.max+ee.min)/2),te=b.tryColorscale(D,"")(Q)}var J=te||U.mc||D.color,K=D.pattern,X=K&&b.getPatternAttr(K.shape,0,"");if(X){var ie=b.getPatternAttr(K.bgcolor,0,null),se=b.getPatternAttr(K.fgcolor,0,null),ae=K.fgopacity,ue=c(K.size,8,10),ve=c(K.solidity,.5,1),ye="legend-"+I.uid;B.call(b.pattern,"legend",u,ye,X,ue,ve,te,K.fillmode,ie,se,ae)}else B.call(f.fill,J);q&&f.stroke(B,U.mlc||z.color)})}function S(A,E,P){var I=A[0],D=I.trace,z=P?D.visible&&D.type===P:k.traceIs(D,P),V=T.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(z?[A]:[]);if(V.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),V.exit().remove(),V.size()){var O=D.marker||{},j=_(r(O.line.width,I.pts),O.line,5,2),Y="pieLike",B=a.minExtend(D,{marker:{line:{width:j}}},Y),U=a.minExtend(I,{trace:B},Y);i(V,U,B,u)}}d.each(function(A){var E=T.select(this),P=a.ensureSingle(E,"g","layers");P.style("opacity",A[0].trace.opacity);var I=x.indentation,D=x.valign,z=A[0].lineHeight,V=A[0].height;if(D==="middle"&&I===0||!z||!V)P.attr("transform",null);else{var O={top:1,bottom:-1}[D]*(.5*(z-V+3))||0,j=x.indentation;P.attr("transform",w(j,O))}P.selectAll("g.legendfill").data([A]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([A]).enter().append("g").classed("legendlines",!0);var Y=P.selectAll("g.legendsymbols").data([A]);Y.enter().append("g").classed("legendsymbols",!0),Y.selectAll("g.legendpoints").data([A]).enter().append("g").classed("legendpoints",!0)}).each(function(A){var E,P=A[0].trace,I=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":I=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":I=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":I=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":I=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":I=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":I=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var D=T.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(I);D.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(z,V){var O,j=T.select(this),Y=s(P),B=Y.colorscale,U=Y.reversescale;if(B){if(!E){var q=B.length;O=V===0?B[U?q-1:0][1]:V===1?B[U?0:q-1][1]:B[Math.floor((q-1)/2)][1]}}else{var te=P.vertexcolor||P.facecolor||P.color;O=a.isArrayOrTypedArray(te)?te[V]||te[0]:te}j.attr("d",z[0]),O?j.call(f.fill,O):j.call(function(ee){if(ee.size()){var Q="legendfill-"+P.uid;b.gradient(ee,u,Q,o(U,E==="radial"),B,"fill")}})})}).each(function(A){var E=A[0].trace,P=E.type==="waterfall";if(A[0]._distinct&&P){var I=A[0].trace[A[0].dir].marker;return A[0].mc=I.color,A[0].mlw=I.line.width,A[0].mlc=I.line.color,h(A,this,"waterfall")}var D=[];E.visible&&P&&(D=A[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=T.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(D);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(V){var O=T.select(this),j=E[V[0]].marker,Y=_(void 0,j.line,5,2);O.attr("d",V[1]).style("stroke-width",Y+"px").call(f.fill,j.color),Y&&O.call(f.stroke,j.line.color)})}).each(function(A){h(A,this,"funnel")}).each(function(A){h(A,this)}).each(function(A){var E=A[0].trace,P=T.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[A]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),P.exit().remove(),P.each(function(){var I=T.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||f.opacity(E.fillcolor)!==0||f.opacity((E.line||{}).color)!==0){var D=_(void 0,E.line,5,2);I.style("stroke-width",D+"px").call(f.fill,E.fillcolor),D&&f.stroke(I,E.line.color)}else{var z=a.minExtend(E,{marker:{size:g?12:a.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(b.pointStyle,z,u)}})}).each(function(A){S(A,this,"funnelarea")}).each(function(A){S(A,this,"pie")}).each(function(A){var E,P,I=l(A),D=I.showFill,z=I.showLine,V=I.showGradientLine,O=I.showGradientFill,j=I.anyFill,Y=I.anyLine,B=A[0],U=B.trace,q=s(U),te=q.colorscale,ee=q.reversescale,Q=t.hasMarkers(U)||!j?"M5,0":Y?"M5,-2":"M5,-3",J=T.select(this),K=J.select(".legendfill").selectAll("path").data(D||O?[A]:[]);if(K.enter().append("path").classed("js-fill",!0),K.exit().remove(),K.attr("d",Q+"h"+m+"v6h-"+m+"z").call(function(se){if(se.size())if(D)b.fillGroupStyle(se,u,!0);else{var ae="legendfill-"+U.uid;b.gradient(se,u,ae,o(ee),te,"fill")}}),z||V){var X=_(void 0,U.line,10,5);P=a.minExtend(U,{line:{width:X}}),E=[a.minExtend(B,{trace:P})]}var ie=J.select(".legendlines").selectAll("path").data(z||V?[E]:[]);ie.enter().append("path").classed("js-line",!0),ie.exit().remove(),ie.attr("d",Q+(V?"l"+m+",0.0001":"h"+m)).call(z?b.lineGroupStyle:function(se){if(se.size()){var ae="legendline-"+U.uid;b.lineGroupStyle(se),b.gradient(se,u,ae,o(ee),te,"stroke")}})}).each(function(A){var E,P,I=l(A),D=I.anyFill,z=I.anyLine,V=I.showLine,O=I.showMarker,j=A[0],Y=j.trace,B=!O&&!z&&!D&&t.hasText(Y);function U(ie,se,ae,ue){var ve=a.nestedProperty(Y,ie).get(),ye=a.isArrayOrTypedArray(ve)&&se?se(ve):ve;if(g&&ye&&ue!==void 0&&(ye=ue),ae){if(ye<ae[0])return ae[0];if(ye>ae[1])return ae[1]}return ye}function q(ie){return j._distinct&&j.index&&ie[j.index]?ie[j.index]:ie[0]}if(O||B||V){var te={},ee={};if(O){te.mc=U("marker.color",q),te.mx=U("marker.symbol",q),te.mo=U("marker.opacity",a.mean,[.2,1]),te.mlc=U("marker.line.color",q),te.mlw=U("marker.line.width",a.mean,[0,5],2),ee.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Q=U("marker.size",a.mean,[2,16],12);te.ms=Q,ee.marker.size=Q}V&&(ee.line={width:U("line.width",q,[0,10],5)}),B&&(te.tx="Aa",te.tp=U("textposition",q),te.ts=10,te.tc=U("textfont.color",q),te.tf=U("textfont.family",q),te.tw=U("textfont.weight",q),te.ty=U("textfont.style",q),te.tv=U("textfont.variant",q),te.tC=U("textfont.textcase",q),te.tE=U("textfont.lineposition",q),te.tS=U("textfont.shadow",q)),E=[a.minExtend(j,te)],(P=a.minExtend(Y,ee)).selectedpoints=null,P.texttemplate=null}var J=T.select(this).select("g.legendpoints"),K=J.selectAll("path.scatterpts").data(O?E:[]);K.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),K.exit().remove(),K.call(b.pointStyle,P,u),O&&(E[0].mrc=3);var X=J.selectAll("g.pointtext").data(B?E:[]);X.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),X.exit().remove(),X.selectAll("text").call(b.textPointStyle,P,u)}).each(function(A){var E=A[0].trace,P=T.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[A,A]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(I,D){return D?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,D){var z=T.select(this),V=E[D?"increasing":"decreasing"],O=_(void 0,V.line,5,2);z.style("stroke-width",O+"px").call(f.fill,V.fillcolor),O&&f.stroke(z,V.line.color)})}).each(function(A){var E=A[0].trace,P=T.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[A,A]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(I,D){return D?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(I,D){var z=T.select(this),V=E[D?"increasing":"decreasing"],O=_(void 0,V.line,5,2);z.style("fill","none").call(b.dashLine,V.line.dash,O),O&&f.stroke(z,V.line.color)})})}},66540:function(F,C,e){"use strict";e(76052),F.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(F,C,e){"use strict";var T=e(24040),k=e(7316),a=e(79811),w=e(9224),b=e(4016).eraseActiveShape,f=e(3400),s=f._,t=F.exports={};function i(p,g){var m,y,v=g.currentTarget,_=v.getAttribute("data-attr"),h=v.getAttribute("data-val")||!0,S=p._fullLayout,A={},E=a.list(p,null,!0),P=S._cartesianSpikesEnabled;if(_==="zoom"){var I,D=h==="in"?.5:2,z=(1+D)/2,V=(1-D)/2;for(y=0;y<E.length;y++)if(!(m=E[y]).fixedrange)if(I=m._name,h==="auto")A[I+".autorange"]=!0;else if(h==="reset")m._rangeInitial0===void 0&&m._rangeInitial1===void 0?A[I+".autorange"]=!0:m._rangeInitial0===void 0?(A[I+".autorange"]=m._autorangeInitial,A[I+".range"]=[null,m._rangeInitial1]):m._rangeInitial1===void 0?(A[I+".range"]=[m._rangeInitial0,null],A[I+".autorange"]=m._autorangeInitial):A[I+".range"]=[m._rangeInitial0,m._rangeInitial1],m._showSpikeInitial!==void 0&&(A[I+".showspikes"]=m._showSpikeInitial,P!=="on"||m._showSpikeInitial||(P="off"));else{var O=[m.r2l(m.range[0]),m.r2l(m.range[1])],j=[z*O[0]+V*O[1],z*O[1]+V*O[0]];A[I+".range[0]"]=m.l2r(j[0]),A[I+".range[1]"]=m.l2r(j[1])}}else _!=="hovermode"||h!=="x"&&h!=="y"||(h=S._isHoriz?"y":"x",v.setAttribute("data-val",h)),A[_]=h;S._cartesianSpikesEnabled=P,T.call("_guiRelayout",p,A)}function r(p,g){for(var m=g.currentTarget,y=m.getAttribute("data-attr"),v=m.getAttribute("data-val")||!0,_=p._fullLayout._subplots.gl3d||[],h={},S=y.split("."),A=0;A<_.length;A++)h[_[A]+"."+S[1]]=v;var E=v==="pan"?v:"zoom";h.dragmode=E,T.call("_guiRelayout",p,h)}function n(p,g){for(var m=g.currentTarget.getAttribute("data-attr"),y=m==="resetLastSave",v=m==="resetDefault",_=p._fullLayout,h=_._subplots.gl3d||[],S={},A=0;A<h.length;A++){var E,P=h[A],I=P+".camera",D=P+".aspectratio",z=P+".aspectmode",V=_[P]._scene;y?(S[I+".up"]=V.viewInitial.up,S[I+".eye"]=V.viewInitial.eye,S[I+".center"]=V.viewInitial.center,E=!0):v&&(S[I+".up"]=null,S[I+".eye"]=null,S[I+".center"]=null,E=!0),E&&(S[D+".x"]=V.viewInitial.aspectratio.x,S[D+".y"]=V.viewInitial.aspectratio.y,S[D+".z"]=V.viewInitial.aspectratio.z,S[z]=V.viewInitial.aspectmode)}T.call("_guiRelayout",p,S)}function o(p,g){var m=g.currentTarget,y=m._previousVal,v=p._fullLayout,_=v._subplots.gl3d||[],h=["xaxis","yaxis","zaxis"],S={},A={};if(y)A=y,m._previousVal=null;else{for(var E=0;E<_.length;E++){var P=_[E],I=v[P],D=P+".hovermode";S[D]=I.hovermode,A[D]=!1;for(var z=0;z<3;z++){var V=h[z],O=P+"."+V+".showspikes";A[O]=!1,S[O]=I[V].showspikes}}m._previousVal=S}return A}function l(p,g){for(var m=g.currentTarget,y=m.getAttribute("data-attr"),v=m.getAttribute("data-val")||!0,_=p._fullLayout,h=_._subplots.geo||[],S=0;S<h.length;S++){var A=h[S],E=_[A];if(y==="zoom"){var P=E.projection.scale,I=v==="in"?2*P:.5*P;T.call("_guiRelayout",p,A+".projection.scale",I)}}y==="reset"&&x(p,"geo")}function c(p){var g=p._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function d(p){var g=c(p);T.call("_guiRelayout",p,"hovermode",g)}function u(p,g){for(var m=g.currentTarget.getAttribute("data-val"),y=p._fullLayout,v=y._subplots.mapbox||[],_={},h=0;h<v.length;h++){var S=v[h],A=y[S].zoom,E=m==="in"?1.05*A:A/1.05;_[S+".zoom"]=E}T.call("_guiRelayout",p,_)}function x(p,g){for(var m=p._fullLayout,y=m._subplots[g]||[],v={},_=0;_<y.length;_++)for(var h=y[_],S=m[h]._subplot.viewInitial,A=Object.keys(S),E=0;E<A.length;E++){var P=A[E];v[h+"."+P]=S[P]}T.call("_guiRelayout",p,v)}t.toImage={name:"toImage",title:function(p){var g=(p._context.toImageButtonOptions||{}).format||"png";return s(p,g==="png"?"Download plot as a png":"Download plot")},icon:w.camera,click:function(p){var g=p._context.toImageButtonOptions,m={format:g.format||"png"};f.notifier(s(p,"Taking snapshot - this may take a few seconds"),"long"),m.format!=="svg"&&f.isIE()&&(f.notifier(s(p,"IE only supports svg.  Changing format to svg."),"long"),m.format="svg"),["filename","width","height","scale"].forEach(function(y){y in g&&(m[y]=g[y])}),T.call("downloadImage",p,m).then(function(y){f.notifier(s(p,"Snapshot succeeded")+" - "+y,"long")}).catch(function(){f.notifier(s(p,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(p){return s(p,"Edit in Chart Studio")},icon:w.disk,click:function(p){k.sendDataToCloud(p)}},t.editInChartStudio={name:"editInChartStudio",title:function(p){return s(p,"Edit in Chart Studio")},icon:w.pencil,click:function(p){k.sendDataToCloud(p)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(p){return s(p,"Zoom")},attr:"dragmode",val:"zoom",icon:w.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(p){return s(p,"Pan")},attr:"dragmode",val:"pan",icon:w.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(p){return s(p,"Box Select")},attr:"dragmode",val:"select",icon:w.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(p){return s(p,"Lasso Select")},attr:"dragmode",val:"lasso",icon:w.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(p){return s(p,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:w.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(p){return s(p,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:w.drawopenpath,click:i},t.drawline={name:"drawline",title:function(p){return s(p,"Draw line")},attr:"dragmode",val:"drawline",icon:w.drawline,click:i},t.drawrect={name:"drawrect",title:function(p){return s(p,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:w.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(p){return s(p,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:w.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(p){return s(p,"Erase active shape")},icon:w.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(p){return s(p,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(p){return s(p,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(p){return s(p,"Autoscale")},attr:"zoom",val:"auto",icon:w.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(p){return s(p,"Reset axes")},attr:"zoom",val:"reset",icon:w.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(p){return s(p,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(p){return s(p,"Compare data on hover")},attr:"hovermode",val:function(p){return p._fullLayout._isHoriz?"y":"x"},icon:w.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(p){return s(p,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:w.zoombox,click:r},t.pan3d={name:"pan3d",_cat:"pan",title:function(p){return s(p,"Pan")},attr:"scene.dragmode",val:"pan",icon:w.pan,click:r},t.orbitRotation={name:"orbitRotation",title:function(p){return s(p,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:w["3d_rotate"],click:r},t.tableRotation={name:"tableRotation",title:function(p){return s(p,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:w["z-axis"],click:r},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(p){return s(p,"Reset camera to default")},attr:"resetDefault",icon:w.home,click:n},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(p){return s(p,"Reset camera to last save")},attr:"resetLastSave",icon:w.movie,click:n},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(p,g){var m=o(p,g);T.call("_guiRelayout",p,m)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(p){return s(p,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(p){return s(p,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(p){return s(p,"Reset")},attr:"reset",val:null,icon:w.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:d},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:d},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:d},t.resetViewSankey={name:"resetSankeyGroup",title:function(p){return s(p,"Reset view")},icon:w.home,click:function(p){for(var g={"node.groups":[],"node.x":[],"node.y":[]},m=0;m<p._fullData.length;m++){var y=p._fullData[m]._viewInitial;g["node.groups"].push(y.node.groups.slice()),g["node.x"].push(y.node.x.slice()),g["node.y"].push(y.node.y.slice())}T.call("restyle",p,g)}},t.toggleHover={name:"toggleHover",title:function(p){return s(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(p,g){var m=o(p,g);m.hovermode=c(p),T.call("_guiRelayout",p,m)}},t.resetViews={name:"resetViews",title:function(p){return s(p,"Reset views")},icon:w.home,click:function(p,g){var m=g.currentTarget;m.setAttribute("data-attr","zoom"),m.setAttribute("data-val","reset"),i(p,g),m.setAttribute("data-attr","resetLastSave"),n(p,g),x(p,"geo"),x(p,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(p){return s(p,"Toggle Spike Lines")},icon:w.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(p){var g=p._fullLayout,m=g._cartesianSpikesEnabled;g._cartesianSpikesEnabled=m==="on"?"off":"on",T.call("_guiRelayout",p,function(y){for(var v=y._fullLayout._cartesianSpikesEnabled==="on",_=a.list(y,null,!0),h={},S=0;S<_.length;S++){var A=_[S];h[A._name+".showspikes"]=!!v||A._showSpikeInitial}return h}(p))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(p){return s(p,"Reset view")},attr:"reset",icon:w.home,click:function(p){x(p,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(p){return s(p,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:u},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(p){return s(p,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:u}},76052:function(F,C,e){"use strict";var T=e(44248),k=Object.keys(T),a=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],w=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(a),b=[];k.forEach(function(f){(function(s){if(w.indexOf(s._cat||s.name)===-1){var t=s.name,i=(s._cat||s.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(i)===-1&&b.push(i)}})(T[f])}),b.sort(),F.exports={DRAW_MODES:a,backButtons:w,foreButtons:b}},90824:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(31780),w=e(66540);F.exports=function(b,f){var s=b.modebar||{},t=a.newContainer(f,"modebar");function i(n,o){return T.coerce(s,t,w,n,o)}i("orientation"),i("bgcolor",k.addOpacity(f.paper_bgcolor,.5));var r=k.contrast(k.rgb(f.modebar.bgcolor));i("color",k.addOpacity(r,.3)),i("activecolor",k.addOpacity(r,.7)),i("uirevision",f.uirevision),i("add"),i("remove")}},45460:function(F,C,e){"use strict";F.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(F,C,e){"use strict";var T=e(79811),k=e(43028),a=e(24040),w=e(10624).isUnifiedHover,b=e(66400),f=e(44248),s=e(76052).DRAW_MODES,t=e(3400).extendDeep;F.exports=function(i){var r=i._fullLayout,n=i._context,o=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,c=n.modeBarButtons;l=Array.isArray(c)&&c.length?function(d){for(var u=t([],d),x=0;x<u.length;x++)for(var p=u[x],g=0;g<p.length;g++){var m=p[g];if(typeof m=="string"){if(f[m]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));u[x][g]=f[m]}}return u}(c):!n.displayModeBar&&n.watermark?[]:function(d){var u=d._fullLayout,x=d._fullData,p=d._context;function g(ve,ye){if(typeof ye=="string"){if(ye.toLowerCase()===ve.toLowerCase())return!0}else{var pe=ye.name,de=ye._cat||ye.name;if(pe===ve||de===ve.toLowerCase())return!0}return!1}var m=u.modebar.add;typeof m=="string"&&(m=[m]);var y=u.modebar.remove;typeof y=="string"&&(y=[y]);var v=p.modeBarButtonsToAdd.concat(m.filter(function(ve){for(var ye=0;ye<p.modeBarButtonsToRemove.length;ye++)if(g(ve,p.modeBarButtonsToRemove[ye]))return!1;return!0})),_=p.modeBarButtonsToRemove.concat(y.filter(function(ve){for(var ye=0;ye<p.modeBarButtonsToAdd.length;ye++)if(g(ve,p.modeBarButtonsToAdd[ye]))return!1;return!0})),h=u._has("cartesian"),S=u._has("gl3d"),A=u._has("geo"),E=u._has("pie"),P=u._has("funnelarea"),I=u._has("gl2d"),D=u._has("ternary"),z=u._has("mapbox"),V=u._has("polar"),O=u._has("smith"),j=u._has("sankey"),Y=function(ve){for(var ye=T.list({_fullLayout:ve},null,!0),pe=0;pe<ye.length;pe++)if(!ye[pe].fixedrange)return!1;return!0}(u),B=w(u.hovermode),U=[];function q(ve){if(ve.length){for(var ye=[],pe=0;pe<ve.length;pe++){for(var de=ve[pe],me=f[de],ke=me.name.toLowerCase(),Ce=(me._cat||me.name).toLowerCase(),ge=!1,oe=0;oe<_.length;oe++){var re=_[oe].toLowerCase();if(re===ke||re===Ce){ge=!0;break}}ge||ye.push(f[de])}U.push(ye)}}var te=["toImage"];p.showEditInChartStudio?te.push("editInChartStudio"):p.showSendToCloud&&te.push("sendDataToCloud"),q(te);var ee=[],Q=[],J=[],K=[];(h||I||E||P||D)+A+S+z+V+O>1?(Q=["toggleHover"],J=["resetViews"]):A?(ee=["zoomInGeo","zoomOutGeo"],Q=["hoverClosestGeo"],J=["resetGeo"]):S?(Q=["hoverClosest3d"],J=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(ee=["zoomInMapbox","zoomOutMapbox"],Q=["toggleHover"],J=["resetViewMapbox"]):I?Q=["hoverClosestGl2d"]:E?Q=["hoverClosestPie"]:j?(Q=["hoverClosestCartesian","hoverCompareCartesian"],J=["resetViewSankey"]):Q=["toggleHover"],h&&(Q=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ve){for(var ye=0;ye<ve.length;ye++)if(!a.traceIs(ve[ye],"noHover"))return!1;return!0}(x)||B)&&(Q=[]),!h&&!I||Y||(ee=["zoomIn2d","zoomOut2d","autoScale2d"],J[0]!=="resetViews"&&(J=["resetScale2d"])),S?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(h||I)&&!Y||D?K=["zoom2d","pan2d"]:z||A?K=["pan2d"]:V&&(K=["zoom2d"]),function(ve){for(var ye=!1,pe=0;pe<ve.length&&!ye;pe++){var de=ve[pe];de._module&&de._module.selectPoints&&(a.traceIs(de,"scatter-like")?(k.hasMarkers(de)||k.hasText(de))&&(ye=!0):a.traceIs(de,"box-violin")&&de.boxpoints!=="all"&&de.points!=="all"||(ye=!0))}return ye}(x)&&K.push("select2d","lasso2d");var X=[],ie=function(ve){X.indexOf(ve)===-1&&Q.indexOf(ve)!==-1&&X.push(ve)};if(Array.isArray(v)){for(var se=[],ae=0;ae<v.length;ae++){var ue=v[ae];typeof ue=="string"?(ue=ue.toLowerCase(),s.indexOf(ue)!==-1?(u._has("mapbox")||u._has("cartesian"))&&K.push(ue):ue==="togglespikelines"?ie("toggleSpikelines"):ue==="togglehover"?ie("toggleHover"):ue==="hovercompare"?ie("hoverCompareCartesian"):ue==="hoverclosest"?(ie("hoverClosestCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie")):ue==="v1hovermode"&&(ie("toggleHover"),ie("hoverClosestCartesian"),ie("hoverCompareCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie"))):se.push(ue)}v=se}return q(K),q(ee.concat(J)),q(X),function(ve,ye){if(ye.length)if(Array.isArray(ye[0]))for(var pe=0;pe<ye.length;pe++)ve.push(ye[pe]);else ve.push(ye);return ve}(U,v)}(i),o?o.update(i,l):r._modeBar=b(i,l)}else o&&(o.destroy(),delete r._modeBar)}},66400:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(3400),w=e(9224),b=e(25788).version,f=new DOMParser;function s(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(i,r){this.graphInfo=i;var n=this.graphInfo._context,o=this.graphInfo._fullLayout,l="modebar-"+o._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),o.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var c=o.modebar,d=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";a.deleteRelatedStyleRule(l),a.addRelatedStyleRule(l,d+"#"+l+" .modebar-group","background-color: "+c.bgcolor),a.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+c.color),a.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+c.activecolor),a.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+c.activecolor);var u=!this.hasButtons(r),x=this.hasLogo!==n.displaylogo,p=this.locale!==n.locale;if(this.locale=n.locale,(u||x||p)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var g=this.getLogo();n.watermark&&(g.className=g.className+" watermark"),o.modebar.orientation==="v"?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var r=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var o=r.createGroup();n.forEach(function(l){var c=l.name;if(!c)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");r.buttonsNames.push(c);var d=r.createButton(l);r.buttonElements.push(d),o.appendChild(d)}),r.element.appendChild(o)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var o=i.title;o===void 0?o=i.name:typeof o=="function"&&(o=o(this.graphInfo)),(o||o===0)&&n.setAttribute("data-title",o),i.attr!==void 0&&n.setAttribute("data-attr",i.attr);var l=i.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),n.setAttribute("data-val",l)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(d){i.click(r.graphInfo,d),r.updateActiveButton(d.currentTarget)}),n.setAttribute("data-toggle",i.toggle||!1),i.toggle&&T.select(n).classed("active",!0);var c=i.icon;return typeof c=="function"?n.appendChild(c()):n.appendChild(this.createIcon(c||w.question)),n.setAttribute("data-gravity",i.gravity||"n"),n},t.createIcon=function(i){var r,n=k(i.height)?Number(i.height):i.ascent-i.descent,o="http://www.w3.org/2000/svg";if(i.path){(r=document.createElementNS(o,"svg")).setAttribute("viewBox",[0,0,i.width,n].join(" ")),r.setAttribute("class","icon");var l=document.createElementNS(o,"path");l.setAttribute("d",i.path),i.transform?l.setAttribute("transform",i.transform):i.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),r.appendChild(l)}return i.svg&&(r=f.parseFromString(i.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(i){var r=this.graphInfo._fullLayout,n=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(o){var l=o.getAttribute("data-val")||!0,c=o.getAttribute("data-attr"),d=o.getAttribute("data-toggle")==="true",u=T.select(o);if(d)c===n&&u.classed("active",!u.classed("active"));else{var x=c===null?c:a.nestedProperty(r,c).get();u.classed("active",x===l)}})},t.hasButtons=function(i){var r=this.buttons;if(!r||i.length!==r.length)return!1;for(var n=0;n<i.length;++n){if(i[n].length!==r[n].length)return!1;for(var o=0;o<i[n].length;o++)if(i[n][o].name!==r[n][o].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",a._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(w.newplotlylogo)),i.appendChild(r),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){a.removeElement(this.container.querySelector(".modebar")),a.deleteRelatedStyleRule(this._uid)},F.exports=function(i,r){var n=i._fullLayout,o=new s({graphInfo:i,container:n._modebardiv.node(),buttons:r});return n._privateplot&&T.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}},26680:function(F,C,e){"use strict";var T=e(25376),k=e(22548),a=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});F.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:T({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(F){"use strict";F.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(31780),w=e(51272),b=e(26680),f=e(85984);function s(t,i,r,n){var o=n.calendar;function l(d,u){return T.coerce(t,i,b.buttons,d,u)}if(l("visible")){var c=l("step");c!=="all"&&(!o||o==="gregorian"||c!=="month"&&c!=="year"?l("stepmode"):i.stepmode="backward",l("count")),l("label")}}F.exports=function(t,i,r,n,o){var l=t.rangeselector||{},c=a.newContainer(i,"rangeselector");function d(p,g){return T.coerce(l,c,b,p,g)}if(d("visible",w(l,c,{name:"buttons",handleItemDefaults:s,calendar:o}).length>0)){var u=function(p,g,m){for(var y=m.filter(function(S){return g[S].anchor===p._id}),v=0,_=0;_<y.length;_++){var h=g[y[_]].domain;h&&(v=Math.max(h[1],v))}return[p.domain[0],v+f.yPad]}(i,r,n);d("x",u[0]),d("y",u[1]),T.noneOrAll(t,i,["x","y"]),d("xanchor"),d("yanchor"),T.coerceFont(d,"font",r.font);var x=d("bgcolor");d("activecolor",k.contrast(x,f.lightAmount,f.darkAmount)),d("bordercolor"),d("borderwidth")}}},50216:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(7316),w=e(76308),b=e(43616),f=e(3400),s=f.strTranslate,t=e(72736),i=e(79811),r=e(84284),n=r.LINE_SPACING,o=r.FROM_TL,l=r.FROM_BR,c=e(85984),d=e(48040);function u(g){return g._id}function x(g,m,y){var v=f.ensureSingle(g,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});v.attr({rx:c.rx,ry:c.ry}),v.call(w.stroke,m.bordercolor).call(w.fill,function(_,h){return h._isActive||h._isHovered?_.activecolor:_.bgcolor}(m,y)).style("stroke-width",m.borderwidth+"px")}function p(g,m,y,v){var _,h;f.ensureSingle(g,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,m.font).text((_=y,h=v._fullLayout._meta,_.label?h?f.templateString(_.label,h):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(S){t.convertToTspans(S,v)})}F.exports=function(g){var m=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(y){for(var v=i.list(y,"x",!0),_=[],h=0;h<v.length;h++){var S=v[h];S.rangeselector&&S.rangeselector.visible&&_.push(S)}return _}(g),u);m.enter().append("g").classed("rangeselector",!0),m.exit().remove(),m.style({cursor:"pointer","pointer-events":"all"}),m.each(function(y){var v=T.select(this),_=y,h=_.rangeselector,S=v.selectAll("g.button").data(f.filterVisible(h.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(A){var E=T.select(this),P=d(_,A);A._isActive=function(I,D,z){if(D.step==="all")return I.autorange===!0;var V=Object.keys(z);return I.range[0]===z[V[0]]&&I.range[1]===z[V[1]]}(_,A,P),E.call(x,h,A),E.call(p,h,A,g),E.on("click",function(){g._dragged||k.call("_guiRelayout",g,P)}),E.on("mouseover",function(){A._isHovered=!0,E.call(x,h,A)}),E.on("mouseout",function(){A._isHovered=!1,E.call(x,h,A)})}),function(A,E,P,I,D){var z=0,V=0,O=P.borderwidth;E.each(function(){var te=T.select(this).select(".selector-text"),ee=P.font.size*n,Q=Math.max(ee*t.lineCount(te),16)+3;V=Math.max(V,Q)}),E.each(function(){var te=T.select(this),ee=te.select(".selector-rect"),Q=te.select(".selector-text"),J=Q.node()&&b.bBox(Q.node()).width,K=P.font.size*n,X=t.lineCount(Q),ie=Math.max(J+10,c.minButtonWidth);te.attr("transform",s(O+z,O)),ee.attr({x:0,y:0,width:ie,height:V}),t.positionText(Q,ie/2,V/2-(X-1)*K/2+3),z+=ie+5});var j=A._fullLayout._size,Y=j.l+j.w*P.x,B=j.t+j.h*(1-P.y),U="left";f.isRightAnchor(P)&&(Y-=z,U="right"),f.isCenterAnchor(P)&&(Y-=z/2,U="center");var q="top";f.isBottomAnchor(P)&&(B-=V,q="bottom"),f.isMiddleAnchor(P)&&(B-=V/2,q="middle"),z=Math.ceil(z),V=Math.ceil(V),Y=Math.round(Y),B=Math.round(B),a.autoMargin(A,I+"-range-selector",{x:P.x,y:P.y,l:z*o[U],r:z*l[U],b:V*l[q],t:V*o[q]}),D.attr("transform",s(Y,B))}(g,S,h,_._name,v)})}},48040:function(F,C,e){"use strict";var T=e(73220),k=e(3400).titleCase;F.exports=function(a,w){var b=a._name,f={};if(w.step==="all")f[b+".autorange"]=!0;else{var s=function(t,i){var r,n=t.range,o=new Date(t.r2l(n[1])),l=i.step,c=T["utc"+k(l)],d=i.count;switch(i.stepmode){case"backward":r=t.l2r(+c.offset(o,-d));break;case"todate":var u=c.offset(o,-d);r=t.l2r(+c.ceil(u))}return[r,n[1]]}(a,w);f[b+".range[0]"]=s[0],f[b+".range[1]"]=s[1]}return f}},41152:function(F,C,e){"use strict";F.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(F,C,e){"use strict";var T=e(22548);F.exports={bgcolor:{valType:"color",dflt:T.background,editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(F,C,e){"use strict";var T=e(79811).list,k=e(19280).getAutoRange,a=e(74636);F.exports=function(w){for(var b=T(w,"x",!0),f=0;f<b.length;f++){var s=b[f],t=s[a.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(w,s))}}},74636:function(F){"use strict";F.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(F,C,e){"use strict";var T=e(3400),k=e(31780),a=e(79811),w=e(11200),b=e(10936);F.exports=function(f,s,t){var i=f[t],r=s[t];if(i.rangeslider||s._requestRangeslider[r._id]){T.isPlainObject(i.rangeslider)||(i.rangeslider={});var n,o,l=i.rangeslider,c=k.newContainer(r,"rangeslider");if(v("visible")){v("bgcolor",s.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!r.isValidRange(l.range)),v("range");var d=s._subplots;if(d)for(var u=d.cartesian.filter(function(h){return h.substr(0,h.indexOf("y"))===a.name2id(t)}).map(function(h){return h.substr(h.indexOf("y"),h.length)}),x=T.simpleMap(u,a.id2name),p=0;p<x.length;p++){var g=x[p];n=l[g]||{},o=k.newContainer(c,g,"yaxis");var m,y=s[g];n.range&&y.isValidRange(n.range)&&(m="fixed"),_("rangemode",m)!=="match"&&_("range",y.range.slice())}c._input=l}}function v(h,S){return T.coerce(l,c,w,h,S)}function _(h,S){return T.coerce(n,o,b,h,S)}}},20060:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(7316),w=e(3400),b=w.strTranslate,f=e(43616),s=e(76308),t=e(81668),i=e(57952),r=e(79811),n=e(86476),o=e(93972),l=e(74636);function c(y){return typeof y.clientX=="number"?y.clientX:y.touches&&y.touches.length>0?y.touches[0].clientX:0}function d(y,v,_,h){var S=w.ensureSingle(y,"rect",l.bgClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),A=h.borderwidth%2==0?h.borderwidth:h.borderwidth-1,E=-h._offsetShift,P=f.crispRound(v,h.borderwidth);S.attr({width:h._width+A,height:h._height+A,transform:b(E,E),"stroke-width":P}).call(s.stroke,h.bordercolor).call(s.fill,h.bgcolor)}function u(y,v,_,h){var S=v._fullLayout;w.ensureSingleById(S._topdefs,"clipPath",h._clipId,function(A){A.append("rect").attr({x:0,y:0})}).select("rect").attr({width:h._width,height:h._height})}function x(y,v,_,h){var S,A=v.calcdata,E=y.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,w.identity);E.enter().append("g").attr("class",function(P){return l.rangePlotClassName+" "+P}).call(f.setClipUrl,h._clipId,v),E.order(),E.exit().remove(),E.each(function(P,I){var D=T.select(this),z=I===0,V=r.getFromId(v,P,"y"),O=V._name,j=h[O],Y={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:h.range.slice(),calendar:_.calendar},width:h._width,height:h._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};_.rangebreaks&&(Y.layout.xaxis.rangebreaks=_.rangebreaks),Y.layout[O]={type:V.type,domain:[0,1],range:j.rangemode!=="match"?j.range.slice():V.range.slice(),calendar:V.calendar},V.rangebreaks&&(Y.layout[O].rangebreaks=V.rangebreaks),a.supplyDefaults(Y);var B=Y._fullLayout.xaxis,U=Y._fullLayout[O];B.clearCalc(),B.setScale(),U.clearCalc(),U.setScale();var q={id:P,plotgroup:D,xaxis:B,yaxis:U,isRangePlot:!0};z?S=q:(q.mainplot="xy",q.mainplotinfo=S),i.rangePlot(v,q,function(te,ee){for(var Q=[],J=0;J<te.length;J++){var K=te[J],X=K[0].trace;X.xaxis+X.yaxis===ee&&Q.push(K)}return Q}(A,P))})}function p(y,v,_,h,S){w.ensureSingle(y,"rect",l.maskMinClassName,function(A){A.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(s.fill,l.maskColor),w.ensureSingle(y,"rect",l.maskMaxClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",h._height).call(s.fill,l.maskColor),S.rangemode!=="match"&&(w.ensureSingle(y,"rect",l.maskMinOppAxisClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).call(s.fill,l.maskOppAxisColor),w.ensureSingle(y,"rect",l.maskMaxOppAxisClassName,function(A){A.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",h._width).style("border-top",l.maskOppBorder).call(s.fill,l.maskOppAxisColor))}function g(y,v,_,h){v._context.staticPlot||w.ensureSingle(y,"rect",l.slideBoxClassName,function(S){S.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:h._height,fill:l.slideBoxFill})}function m(y,v,_,h){var S=w.ensureSingle(y,"g",l.grabberMinClassName),A=w.ensureSingle(y,"g",l.grabberMaxClassName),E={x:0,width:l.handleWidth,rx:l.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(h._height/4),height:Math.round(h._height/2)};w.ensureSingle(S,"rect",l.handleMinClassName,function(D){D.attr(E)}).attr(P),w.ensureSingle(A,"rect",l.handleMaxClassName,function(D){D.attr(E)}).attr(P);var I={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:v._context.staticPlot?void 0:l.grabAreaCursor};w.ensureSingle(S,"rect",l.grabAreaMinClassName,function(D){D.attr(I)}).attr("height",h._height),w.ensureSingle(A,"rect",l.grabAreaMaxClassName,function(D){D.attr(I)}).attr("height",h._height)}F.exports=function(y){for(var v=y._fullLayout,_=v._rangeSliderData,h=0;h<_.length;h++){var S=_[h][l.name];S._clipId=S._id+"-"+v._uid}var A=v._infolayer.selectAll("g."+l.containerClassName).data(_,function(E){return E._name});A.exit().each(function(E){var P=E[l.name];v._topdefs.select("#"+P._clipId).remove()}).remove(),_.length!==0&&(A.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),A.each(function(E){var P=T.select(this),I=E[l.name],D=v[r.id2name(E.anchor)],z=I[r.id2name(E.anchor)];if(I.range){var V,O=w.simpleMap(I.range,E.r2l),j=w.simpleMap(E.range,E.r2l);V=j[0]<j[1]?[Math.min(O[0],j[0]),Math.max(O[1],j[1])]:[Math.max(O[0],j[0]),Math.min(O[1],j[1])],I.range=I._input.range=w.simpleMap(V,E.l2r)}E.cleanRange("rangeslider.range");var Y=v._size,B=E.domain;I._width=Y.w*(B[1]-B[0]);var U=Math.round(Y.l+Y.w*B[0]),q=Math.round(Y.t+Y.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+I._offsetShift+l.extraPad);P.attr("transform",b(U,q)),I._rl=w.simpleMap(I.range,E.r2l);var te=I._rl[0],ee=I._rl[1],Q=ee-te;if(I.p2d=function(ye){return ye/I._width*Q+te},I.d2p=function(ye){return(ye-te)/Q*I._width},E.rangebreaks){var J=E.locateBreaks(te,ee);if(J.length){var K,X,ie=0;for(K=0;K<J.length;K++)ie+=(X=J[K]).max-X.min;var se=I._width/(ee-te-ie),ae=[-se*te];for(K=0;K<J.length;K++)X=J[K],ae.push(ae[ae.length-1]-se*(X.max-X.min));for(I.d2p=function(ye){for(var pe=ae[0],de=0;de<J.length;de++){var me=J[de];if(ye>=me.max)pe=ae[de+1];else if(ye<me.min)break}return pe+se*ye},K=0;K<J.length;K++)(X=J[K]).pmin=I.d2p(X.min),X.pmax=I.d2p(X.max);I.p2d=function(ye){for(var pe=ae[0],de=0;de<J.length;de++){var me=J[de];if(ye>=me.pmax)pe=ae[de+1];else if(ye<me.pmin)break}return(ye-pe)/se}}}if(z.rangemode!=="match"){var ue=D.r2l(z.range[0]),ve=D.r2l(z.range[1])-ue;I.d2pOppAxis=function(ye){return(ye-ue)/ve*I._height}}P.call(d,y,E,I).call(u,y,E,I).call(x,y,E,I).call(p,y,E,I,z).call(g,y,E,I).call(m,y,E,I),function(ye,pe,de,me){if(!pe._context.staticPlot){var ke=ye.select("rect."+l.slideBoxClassName).node(),Ce=ye.select("rect."+l.grabAreaMinClassName).node(),ge=ye.select("rect."+l.grabAreaMaxClassName).node();ye.on("mousedown",oe),ye.on("touchstart",oe)}function oe(){var re=T.event,fe=re.target,Se=c(re),be=Se-ye.node().getBoundingClientRect().left,we=me.d2p(de._rl[0]),Me=me.d2p(de._rl[1]),Pe=n.coverSlip();function De(_e){var Ae,Oe,Ee,Be=+c(_e)-Se;switch(fe){case ke:if(Ee="ew-resize",we+Be>de._length||Me+Be<0)return;Ae=we+Be,Oe=Me+Be;break;case Ce:if(Ee="col-resize",we+Be>de._length)return;Ae=we+Be,Oe=Me;break;case ge:if(Ee="col-resize",Me+Be<0)return;Ae=we,Oe=Me+Be;break;default:Ee="ew-resize",Ae=be,Oe=be+Be}if(Oe<Ae){var Ve=Oe;Oe=Ae,Ae=Ve}me._pixelMin=Ae,me._pixelMax=Oe,o(T.select(Pe),Ee),function(Ze,it,at,gt){function yt($e){return at.l2r(w.constrain($e,gt._rl[0],gt._rl[1]))}var pt=yt(gt.p2d(gt._pixelMin)),et=yt(gt.p2d(gt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",it,at._name+".range",[pt,et])})}(0,pe,de,me)}function he(){Pe.removeEventListener("mousemove",De),Pe.removeEventListener("mouseup",he),this.removeEventListener("touchmove",De),this.removeEventListener("touchend",he),w.removeElement(Pe)}this.addEventListener("touchmove",De),this.addEventListener("touchend",he),Pe.addEventListener("mousemove",De),Pe.addEventListener("mouseup",he)}}(P,y,E,I),function(ye,pe,de,me,ke,Ce){var ge=l.handleWidth/2;function oe(_e){return w.constrain(_e,0,me._width)}function re(_e){return w.constrain(_e,0,me._height)}function fe(_e){return w.constrain(_e,-ge,me._width+ge)}var Se=oe(me.d2p(de._rl[0])),be=oe(me.d2p(de._rl[1]));if(ye.select("rect."+l.slideBoxClassName).attr("x",Se).attr("width",be-Se),ye.select("rect."+l.maskMinClassName).attr("width",Se),ye.select("rect."+l.maskMaxClassName).attr("x",be).attr("width",me._width-be),Ce.rangemode!=="match"){var we=me._height-re(me.d2pOppAxis(ke._rl[1])),Me=me._height-re(me.d2pOppAxis(ke._rl[0]));ye.select("rect."+l.maskMinOppAxisClassName).attr("x",Se).attr("height",we).attr("width",be-Se),ye.select("rect."+l.maskMaxOppAxisClassName).attr("x",Se).attr("y",Me).attr("height",me._height-Me).attr("width",be-Se),ye.select("rect."+l.slideBoxClassName).attr("y",we).attr("height",Me-we)}var Pe=.5,De=Math.round(fe(Se-ge))-Pe,he=Math.round(fe(be-ge))+Pe;ye.select("g."+l.grabberMinClassName).attr("transform",b(De,Pe)),ye.select("g."+l.grabberMaxClassName).attr("transform",b(he,Pe))}(P,0,E,I,D,z),E.side==="bottom"&&t.draw(y,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:v._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:q+I._height+I._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(F,C,e){"use strict";var T=e(79811),k=e(72736),a=e(74636),w=e(84284).LINE_SPACING,b=a.name;function f(s){var t=s&&s[b];return t&&t.visible}C.isVisible=f,C.makeData=function(s){var t=T.list({_fullLayout:s},"x",!0),i=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<t.length;n++){var o=t[n];if(f(o)){r.push(o);var l=o[b];l._id=b+o._id,l._height=(s.height-i.b-i.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}s._rangeSliderData=r},C.autoMarginOpts=function(s,t){var i=s._fullLayout,r=t[b],n=t._id.charAt(0),o=0,l=0;return t.side==="bottom"&&(o=t._depth,t.title.text!==i._dfltTitle[n]&&(l=1.5*t.title.font.size+10+r._offsetShift,l+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*w)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:r._height+o+Math.max(i.margin.b,l),pad:a.extraPad+2*r._offsetShift}}},49692:function(F,C,e){"use strict";var T=e(3400),k=e(11200),a=e(10936),w=e(97944);F.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:T.extendFlat({},k,{yaxis:a})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:w.isVisible,makeData:w.makeData,autoMarginOpts:w.autoMarginOpts}},10936:function(F){"use strict";F.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(F,C,e){"use strict";var T=e(13916),k=e(52904).line,a=e(98192).u,w=e(92880).extendFlat,b=e(67824).overrideAll,f=e(31780).templatedArray;e(36208),F.exports=b(f("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:w({},T.xref,{}),yref:w({},T.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:w({},k.width,{min:1,dflt:1}),dash:w({},a,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(F){"use strict";F.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(51272),w=e(93956),b=e(65152);function f(s,t,i){function r(E,P){return T.coerce(s,t,w,E,P)}var n=r("path"),o=r("type",n?"path":"rect")!=="path";o&&delete t.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var l=["x","y"],c=0;c<2;c++){var d,u,x,p=l[c],g={_fullLayout:i},m=k.coerceRef(s,t,g,p);if((d=k.getFromId(g,m))._selectionIndices.push(t._index),x=b.rangeToShapePosition(d),u=b.shapePositionToRange(d),o){var y=p+"0",v=p+"1",_=s[y],h=s[v];s[y]=u(s[y],!0),s[v]=u(s[v],!0),k.coercePosition(t,g,r,m,y),k.coercePosition(t,g,r,m,v);var S=t[y],A=t[v];S!==void 0&&A!==void 0&&(t[y]=x(S),t[v]=x(A),s[y]=_,s[v]=h)}}o&&T.noneOrAll(s,t,["x0","x1","y0","y1"])}F.exports=function(s,t){a(s,t,{name:"selections",handleItemDefaults:f});for(var i=t.selections,r=0;r<i.length;r++){var n=i[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(t.selections[r]=null))}}},23640:function(F,C,e){"use strict";var T=e(9856).readPaths,k=e(55496),a=e(1936).clearOutlineControllers,w=e(76308),b=e(43616),f=e(31780).arrayEditor,s=e(65152),t=s.getPathString;function i(c){var d=c._fullLayout;for(var u in a(c),d._selectionLayer.selectAll("path").remove(),d._plots){var x=d._plots[u].selectionLayer;x&&x.selectAll("path").remove()}for(var p=0;p<d.selections.length;p++)n(c,p)}function r(c){return c._context.editSelection}function n(c,d){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+d+'"]').remove();var u=s.makeSelectionsOptionsAndPlotinfo(c,d),x=u.options,p=u.plotinfo;x._input&&function(g){var m=t(c,x),y={"data-index":d,"fill-rule":"evenodd",d:m},v=x.opacity,_="rgba(0,0,0,0)",h=x.line.color||w.contrast(c._fullLayout.plot_bgcolor),S=x.line.width,A=x.line.dash;S||(S=5,A="solid");var E=r(c)&&c._fullLayout._activeSelectionIndex===d;E&&(_=c._fullLayout.activeselection.fillcolor,v=c._fullLayout.activeselection.opacity);for(var P=[],I=1;I>=0;I--){var D=g.append("path").attr(y).style("opacity",I?.1:v).call(w.stroke,h).call(w.fill,_).call(b.dashLine,I?"solid":A,I?4+S:S);if(o(D,c,x),E){var z=f(c.layout,"selections",x);D.style({cursor:"move"});var V={element:D.node(),plotinfo:p,gd:c,editHelpers:z,isActiveSelection:!0},O=T(m,c);k(O,D,V)}else D.style("pointer-events",I?"all":"none");P[I]=D}var j=P[0];P[1].node().addEventListener("click",function(){return function(Y,B){if(r(Y)){var U=+B.node().getAttribute("data-index");if(U>=0){if(U===Y._fullLayout._activeSelectionIndex)return void l(Y);Y._fullLayout._activeSelectionIndex=U,Y._fullLayout._deactivateSelection=l,i(Y)}}}(c,j)})}(c._fullLayout._selectionLayer)}function o(c,d,u){var x=u.xref+u.yref;b.setClipUrl(c,"clip"+d._fullLayout._uid+x,d)}function l(c){r(c)&&c._fullLayout._activeSelectionIndex>=0&&(a(c),delete c._fullLayout._activeSelectionIndex,i(c))}F.exports={draw:i,drawOne:n,activateLastSelection:function(c){if(r(c)){var d=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=d,c._fullLayout._deactivateSelection=l,i(c)}}}},34200:function(F,C,e){"use strict";var T=e(98192).u,k=e(92880).extendFlat;F.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},T,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(F){"use strict";F.exports=function(C,e,T){T("newselection.mode"),T("newselection.line.width")&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},5968:function(F,C,e){"use strict";var T=e(72760).selectMode,k=e(1936).clearOutline,a=e(9856),w=a.readPaths,b=a.writePaths,f=a.fixDatesForPaths;F.exports=function(s,t){if(s.length){var i=s[0][0];if(i){var r=i.getAttribute("d"),n=t.gd,o=n._fullLayout.newselection,l=t.plotinfo,c=l.xaxis,d=l.yaxis,u=t.isActiveSelection,x=t.dragmode,p=(n.layout||{}).selections||[];if(!T(x)&&u!==void 0){var g=n._fullLayout._activeSelectionIndex;if(g<p.length)switch(n._fullLayout.selections[g].type){case"rect":x="select";break;case"path":x="lasso"}}var m,y=w(r,n,l,u),v={xref:c._id,yref:d._id,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};y.length===1&&(m=y[0]),m&&m.length===5&&x==="select"?(v.type="rect",v.x0=m[0][1],v.y0=m[0][2],v.x1=m[2][1],v.y1=m[2][2]):(v.type="path",c&&d&&f(y,c,d),v.path=b(y),m=null),k(n);for(var _=t.editHelpers,h=(_||{}).modifyItem,S=[],A=0;A<p.length;A++){var E=n._fullLayout.selections[A];if(E){if(S[A]=E._input,u!==void 0&&A===n._fullLayout._activeSelectionIndex){var P=v;switch(E.type){case"rect":h("x0",P.x0),h("x1",P.x1),h("y0",P.y0),h("y1",P.y1);break;case"path":h("path",P.path)}}}else S[A]=E}return u===void 0?(S.push(v),S):_?_.getUpdateObj():{}}}}},5840:function(F,C,e){"use strict";var T=e(3400).strTranslate;function k(a,w){switch(a.type){case"log":return a.p2d(w);case"date":return a.p2r(w,0,a.calendar);default:return a.p2r(w)}}F.exports={p2r:k,r2p:function(a,w){switch(a.type){case"log":return a.d2p(w);case"date":return a.r2p(w,0,a.calendar);default:return a.r2p(w)}},axValue:function(a){var w=a._id.charAt(0)==="y"?1:0;return function(b){return k(a,b[w])}},getTransform:function(a){return T(a.xaxis._offset,a.yaxis._offset)}}},22676:function(F,C,e){"use strict";var T=e(23640),k=e(43156);F.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:T.draw,drawOne:T.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(F,C,e){"use strict";var T=e(14756),k=e(61456),a=e(24040),w=e(43616).dashStyle,b=e(76308),f=e(93024),s=e(10624).makeEventData,t=e(72760),i=t.freeMode,r=t.rectMode,n=t.drawMode,o=t.openMode,l=t.selectMode,c=e(65152),d=e(85448),u=e(55496),x=e(1936).clearOutline,p=e(9856),g=p.handleEllipse,m=p.readPaths,y=e(93940).newShapes,v=e(5968),_=e(23640).activateLastSelection,h=e(3400),S=h.sorterAsc,A=e(92065),E=e(91200),P=e(79811).getFromId,I=e(73696),D=e(39172).redrawReglTraces,z=e(83280),V=z.MINSELECT,O=A.filter,j=A.tester,Y=e(5840),B=Y.p2r,U=Y.axValue,q=Y.getTransform;function te(De){return De.subplot!==void 0}function ee(De,he,_e,Ae,Oe,Ee,Be){var Ve,Ze,it,at,gt,yt,pt,et,$e,At=he._hoverdata,Ot=he._fullLayout.clickmode.indexOf("event")>-1,Rt=[];if(function(Ye){return Ye&&Array.isArray(Ye)&&Ye[0].hoverOnBox!==!0}(At)){X(De,he,Ee);var Ct=function(Ye,ot){var nt,ze,Fe=Ye[0],rt=-1,We=[];for(ze=0;ze<ot.length;ze++)if(nt=ot[ze],Fe.fullData._expandedIndex===nt.cd[0].trace._expandedIndex){if(Fe.hoverOnBox===!0)break;Fe.pointNumber!==void 0?rt=Fe.pointNumber:Fe.binNumber!==void 0&&(rt=Fe.binNumber,We=Fe.pointNumbers);break}return{pointNumber:rt,pointNumbers:We,searchInfo:nt}}(At,Ve=ae(he,_e,Ae,Oe));if(Ct.pointNumbers.length>0?function(Ye,ot){var nt,ze,Fe,rt=[];for(Fe=0;Fe<Ye.length;Fe++)(nt=Ye[Fe]).cd[0].trace.selectedpoints&&nt.cd[0].trace.selectedpoints.length>0&&rt.push(nt);if(rt.length===1&&rt[0]===ot.searchInfo&&(ze=ot.searchInfo.cd[0].trace).selectedpoints.length===ot.pointNumbers.length){for(Fe=0;Fe<ot.pointNumbers.length;Fe++)if(ze.selectedpoints.indexOf(ot.pointNumbers[Fe])<0)return!1;return!0}return!1}(Ve,Ct):function(Ye){var ot,nt,ze=0;for(nt=0;nt<Ye.length;nt++)if((ot=Ye[nt].cd[0].trace).selectedpoints&&(ot.selectedpoints.length>1||(ze+=ot.selectedpoints.length)>1))return!1;return ze===1}(Ve)&&(yt=ve(Ct))){for(Be&&Be.remove(),$e=0;$e<Ve.length;$e++)(Ze=Ve[$e])._module.selectPoints(Ze,!1);ye(he,Ve),ie(Ee),Ot&&Pe(he)}else{for(pt=De.shiftKey&&(yt!==void 0?yt:ve(Ct)),it=function(Ye,ot,nt){return{pointNumber:Ye,searchInfo:ot,subtract:!!nt}}(Ct.pointNumber,Ct.searchInfo,pt),at=K(Ee.selectionDefs.concat([it])),$e=0;$e<Ve.length;$e++)if(gt=de(Ve[$e]._module.selectPoints(Ve[$e],at),Ve[$e]),Rt.length)for(var Ge=0;Ge<gt.length;Ge++)Rt.push(gt[Ge]);else Rt=gt;if(ye(he,Ve,et={points:Rt}),it&&Ee&&Ee.selectionDefs.push(it),Be){var Xe=Ee.mergedPolygons,Ne=o(Ee.dragmode);u(me(Xe,Ne),Be,Ee)}Ot&&Me(he,et)}}}function Q(De){return"pointNumber"in De&&"searchInfo"in De}function J(De){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(he,_e,Ae,Oe){var Ee=De.searchInfo.cd[0].trace._expandedIndex;return Oe.cd[0].trace._expandedIndex===Ee&&Ae===De.pointNumber},isRect:!1,degenerate:!1,subtract:!!De.subtract}}function K(De){if(De.length){for(var he=[],_e=Q(De[0])?0:De[0][0][0],Ae=_e,Oe=Q(De[0])?0:De[0][0][1],Ee=Oe,Be=0;Be<De.length;Be++)if(Q(De[Be]))he.push(J(De[Be]));else{var Ve=j(De[Be]);Ve.subtract=!!De[Be].subtract,he.push(Ve),_e=Math.min(_e,Ve.xmin),Ae=Math.max(Ae,Ve.xmax),Oe=Math.min(Oe,Ve.ymin),Ee=Math.max(Ee,Ve.ymax)}return{xmin:_e,xmax:Ae,ymin:Oe,ymax:Ee,pts:[],contains:function(Ze,it,at,gt){for(var yt=!1,pt=0;pt<he.length;pt++)he[pt].contains(Ze,it,at,gt)&&(yt=!he[pt].subtract);return yt},isRect:!1,degenerate:!1}}}function X(De,he,_e){var Ae=he._fullLayout,Oe=_e.plotinfo,Ee=_e.dragmode,Be=Ae._lastSelectedSubplot&&Ae._lastSelectedSubplot===Oe.id,Ve=(De.shiftKey||De.altKey)&&!(n(Ee)&&o(Ee));Be&&Ve&&Oe.selection&&Oe.selection.selectionDefs&&!_e.selectionDefs?(_e.selectionDefs=Oe.selection.selectionDefs,_e.mergedPolygons=Oe.selection.mergedPolygons):Ve&&Oe.selection||ie(_e),Be||(x(he),Ae._lastSelectedSubplot=Oe.id)}function ie(De,he){var _e=De.dragmode,Ae=De.plotinfo,Oe=De.gd;(function(gt){return gt._fullLayout._activeShapeIndex>=0})(Oe)&&Oe._fullLayout._deactivateShape(Oe),function(gt){return gt._fullLayout._activeSelectionIndex>=0}(Oe)&&Oe._fullLayout._deactivateSelection(Oe);var Ee=Oe._fullLayout._zoomlayer,Be=n(_e),Ve=l(_e);if(Be||Ve){var Ze,it,at=Ee.selectAll(".select-outline-"+Ae.id);at&&Oe._fullLayout._outlining&&(Be&&(Ze=y(at,De)),Ze&&a.call("_guiRelayout",Oe,{shapes:Ze}),Ve&&!te(De)&&(it=v(at,De)),it&&(Oe._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",Oe,{selections:it}).then(function(){he&&_(Oe)})),Oe._fullLayout._outlining=!1)}Ae.selection={},Ae.selection.selectionDefs=De.selectionDefs=[],Ae.selection.mergedPolygons=De.mergedPolygons=[]}function se(De){return De._id}function ae(De,he,_e,Ae){if(!De.calcdata)return[];var Oe,Ee,Be,Ve=[],Ze=he.map(se),it=_e.map(se);for(Be=0;Be<De.calcdata.length;Be++)if((Ee=(Oe=De.calcdata[Be])[0].trace).visible===!0&&Ee._module&&Ee._module.selectPoints)if(!te({subplot:Ae})||Ee.subplot!==Ae&&Ee.geo!==Ae)if(Ee.type==="splom"){if(Ee._xaxes[Ze[0]]&&Ee._yaxes[it[0]]){var at=ue(Ee._module,Oe,he[0],_e[0]);at.scene=De._fullLayout._splomScenes[Ee.uid],Ve.push(at)}}else if(Ee.type==="sankey"){var gt=ue(Ee._module,Oe,he[0],_e[0]);Ve.push(gt)}else{if(!(Ze.indexOf(Ee.xaxis)!==-1||Ee._xA&&Ee._xA.overlaying)||!(it.indexOf(Ee.yaxis)!==-1||Ee._yA&&Ee._yA.overlaying))continue;Ve.push(ue(Ee._module,Oe,P(De,Ee.xaxis),P(De,Ee.yaxis)))}else Ve.push(ue(Ee._module,Oe,he[0],_e[0]));return Ve}function ue(De,he,_e,Ae){return{_module:De,cd:he,xaxis:_e,yaxis:Ae}}function ve(De){var he=De.searchInfo.cd[0].trace,_e=De.pointNumber,Ae=De.pointNumbers,Oe=Ae.length>0?Ae[0]:_e;return!!he.selectedpoints&&he.selectedpoints.indexOf(Oe)>-1}function ye(De,he,_e){var Ae,Oe;for(Ae=0;Ae<he.length;Ae++){var Ee=he[Ae].cd[0].trace._fullInput,Be=De._fullLayout._tracePreGUI[Ee.uid]||{};Be.selectedpoints===void 0&&(Be.selectedpoints=Ee._input.selectedpoints||null)}if(_e){var Ve=_e.points||[];for(Ae=0;Ae<he.length;Ae++)(Oe=he[Ae].cd[0].trace)._input.selectedpoints=Oe._fullInput.selectedpoints=[],Oe._fullInput!==Oe&&(Oe.selectedpoints=[]);for(var Ze=0;Ze<Ve.length;Ze++){var it=Ve[Ze],at=it.data,gt=it.fullData,yt=it.pointIndex,pt=it.pointIndices;pt?([].push.apply(at.selectedpoints,pt),Oe._fullInput!==Oe&&[].push.apply(gt.selectedpoints,pt)):(at.selectedpoints.push(yt),Oe._fullInput!==Oe&&gt.selectedpoints.push(yt))}}else for(Ae=0;Ae<he.length;Ae++)delete(Oe=he[Ae].cd[0].trace).selectedpoints,delete Oe._input.selectedpoints,Oe._fullInput!==Oe&&delete Oe._fullInput.selectedpoints;(function(et,$e){for(var At=!1,Ot=0;Ot<$e.length;Ot++){var Rt=$e[Ot],Ct=Rt.cd;a.traceIs(Ct[0].trace,"regl")&&(At=!0);var Ge=Rt._module,Xe=Ge.styleOnSelect||Ge.style;Xe&&(Xe(et,Ct,Ct[0].node3),Ct[0].nodeRangePlot3&&Xe(et,Ct,Ct[0].nodeRangePlot3))}At&&(I(et),D(et))})(De,he)}function pe(De,he,_e){for(var Ae=(_e?T.difference:T.union)({regions:De},{regions:[he]}).regions.reverse(),Oe=0;Oe<Ae.length;Oe++){var Ee=Ae[Oe];Ee.subtract=fe(Ee,Ae.slice(0,Oe))}return Ae}function de(De,he){if(Array.isArray(De))for(var _e=he.cd,Ae=he.cd[0].trace,Oe=0;Oe<De.length;Oe++)De[Oe]=s(De[Oe],Ae,_e);return De}function me(De,he){for(var _e=[],Ae=0;Ae<De.length;Ae++){_e[Ae]=[];for(var Oe=0;Oe<De[Ae].length;Oe++){_e[Ae][Oe]=[],_e[Ae][Oe][0]=Oe?"L":"M";for(var Ee=0;Ee<De[Ae][Oe].length;Ee++)_e[Ae][Oe].push(De[Ae][Oe][Ee])}he||_e[Ae].push(["Z",_e[Ae][0][1],_e[Ae][0][2]])}return _e}function ke(De,he){for(var _e,Ae,Oe=[],Ee=[],Be=0;Be<he.length;Be++){var Ve=he[Be];Ae=Ve._module.selectPoints(Ve,De),Ee.push(Ae),_e=de(Ae,Ve),Oe=Oe.concat(_e)}return Oe}function Ce(De,he,_e,Ae,Oe){var Ee,Be,Ve,Ze=!!Ae;Oe&&(Ee=Oe.plotinfo,Be=Oe.xaxes[0]._id,Ve=Oe.yaxes[0]._id);var it=[],at=[],gt=re(De),yt=De._fullLayout;if(Ee){var pt=yt._zoomlayer,et=yt.dragmode,$e=n(et),At=l(et);if($e||At){var Ot=P(De,Be,"x"),Rt=P(De,Ve,"y");if(Ot&&Rt){var Ct=pt.selectAll(".select-outline-"+Ee.id);if(Ct&&De._fullLayout._outlining&&Ct.length){for(var Ge=Ct[0][0].getAttribute("d"),Xe=m(Ge,De,Ee),Ne=[],Ye=0;Ye<Xe.length;Ye++){for(var ot=Xe[Ye],nt=[],ze=0;ze<ot.length;ze++)nt.push([Se(Ot,ot[ze][1]),Se(Rt,ot[ze][2])]);nt.xref=Be,nt.yref=Ve,nt.subtract=fe(nt,Ne),Ne.push(nt)}gt=gt.concat(Ne)}}}}var Fe=Be&&Ve?[Be+Ve]:yt._subplots.cartesian;(function(Cn){var Ln=Cn.calcdata;if(Ln)for(var Mn=0;Mn<Ln.length;Mn++){var jn=Ln[Mn][0].trace,Rn=Cn._fullLayout._splomScenes;if(Rn){var Qn=Rn[jn.uid];Qn&&(Qn.selectBatch=[])}}})(De);for(var rt={},We=0;We<Fe.length;We++){var ft=Fe[We],mt=ft.indexOf("y"),vt=ft.slice(0,mt),ut=ft.slice(mt),Mt=Be&&Ve?_e:void 0;if(Mt=oe(gt,vt,ut,Mt)){var bt=Ae;if(!Ze){var St=P(De,vt,"x"),Pt=P(De,ut,"y");bt=ae(De,[St],[Pt],ft);for(var Dt=0;Dt<bt.length;Dt++){var Ft=bt[Dt],Xt=Ft.cd[0],an=Xt.trace;if(Ft._module.name==="scattergl"&&!Xt.t.xpx){var Ht=an.x,Zt=an.y,jt=an._length;Xt.t.xpx=[],Xt.t.ypx=[];for(var Pn=0;Pn<jt;Pn++)Xt.t.xpx[Pn]=St.c2p(Ht[Pn]),Xt.t.ypx[Pn]=Pt.c2p(Zt[Pn])}Ft._module.name==="splom"&&(rt[an.uid]||(rt[an.uid]=!0))}}var Tn=ke(Mt,bt);it=it.concat(Tn),at=at.concat(bt)}}var mn={points:it};ye(De,at,mn);var Qt=yt.clickmode.indexOf("event")>-1&&he;if(!Ee&&he){var un=re(De,!0);if(un.length){var nn=un[0].xref,hn=un[0].yref;if(nn&&hn){var bn=be(un);we([P(De,nn,"x"),P(De,hn,"y")])(mn,bn)}}De._fullLayout._noEmitSelectedAtStart?De._fullLayout._noEmitSelectedAtStart=!1:Qt&&Me(De,mn),yt._reselect=!1}if(!Ee&&yt._deselect){var wn=yt._deselect;(function(Cn,Ln,Mn){for(var jn=0;jn<Mn.length;jn++){var Rn=Mn[jn];if(Rn.xaxis&&Rn.xaxis._id===Cn&&Rn.yaxis&&Rn.yaxis._id===Ln)return!0}return!1})(Be=wn.xref,Ve=wn.yref,at)||ge(De,Be,Ve,Ae),Qt&&(mn.points.length?Me(De,mn):Pe(De)),yt._deselect=!1}return{eventData:mn,selectionTesters:_e}}function ge(De,he,_e,Ae){Ae=ae(De,[P(De,he,"x")],[P(De,_e,"y")],he+_e);for(var Oe=0;Oe<Ae.length;Oe++){var Ee=Ae[Oe];Ee._module.selectPoints(Ee,!1)}ye(De,Ae)}function oe(De,he,_e,Ae){for(var Oe,Ee=0;Ee<De.length;Ee++){var Be=De[Ee];he===Be.xref&&_e===Be.yref&&(Oe?Ae=K(Oe=pe(Oe,Be,!!Be.subtract)):(Oe=[Be],Ae=j(Be)))}return Ae}function re(De,he){for(var _e=[],Ae=De._fullLayout,Oe=Ae.selections,Ee=Oe.length,Be=0;Be<Ee;Be++)if(!he||Be===Ae._activeSelectionIndex){var Ve=Oe[Be];if(Ve){var Ze,it,at,gt,yt,pt=Ve.xref,et=Ve.yref,$e=P(De,pt,"x"),At=P(De,et,"y");if(Ve.type==="rect"){yt=[];var Ot=Se($e,Ve.x0),Rt=Se($e,Ve.x1),Ct=Se(At,Ve.y0),Ge=Se(At,Ve.y1);yt=[[Ot,Ct],[Ot,Ge],[Rt,Ge],[Rt,Ct]],Ze=Math.min(Ot,Rt),it=Math.max(Ot,Rt),at=Math.min(Ct,Ge),gt=Math.max(Ct,Ge),yt.xmin=Ze,yt.xmax=it,yt.ymin=at,yt.ymax=gt,yt.xref=pt,yt.yref=et,yt.subtract=!1,yt.isRect=!0,_e.push(yt)}else if(Ve.type==="path")for(var Xe=Ve.path.split("Z"),Ne=[],Ye=0;Ye<Xe.length;Ye++){var ot=Xe[Ye];if(ot){ot+="Z";var nt=c.extractPathCoords(ot,d.paramIsX,"raw"),ze=c.extractPathCoords(ot,d.paramIsY,"raw");Ze=1/0,it=-1/0,at=1/0,gt=-1/0,yt=[];for(var Fe=0;Fe<nt.length;Fe++){var rt=Se($e,nt[Fe]),We=Se(At,ze[Fe]);yt.push([rt,We]),Ze=Math.min(rt,Ze),it=Math.max(rt,it),at=Math.min(We,at),gt=Math.max(We,gt)}yt.xmin=Ze,yt.xmax=it,yt.ymin=at,yt.ymax=gt,yt.xref=pt,yt.yref=et,yt.subtract=fe(yt,Ne),Ne.push(yt),_e.push(yt)}}}}return _e}function fe(De,he){for(var _e=!1,Ae=0;Ae<he.length;Ae++)for(var Oe=he[Ae],Ee=0;Ee<De.length;Ee++)if(k(De[Ee],Oe)){_e=!_e;break}return _e}function Se(De,he){return De.type==="date"&&(he=he.replace("_"," ")),De.type==="log"?De.c2p(he):De.r2p(he,null,De.calendar)}function be(De){for(var he=De.length,_e=[],Ae=0;Ae<he;Ae++){var Oe=De[Ae];_e=(_e=_e.concat(Oe)).concat([Oe[0]])}return(Ee=_e).isRect=Ee.length===5&&Ee[0][0]===Ee[4][0]&&Ee[0][1]===Ee[4][1]&&Ee[0][0]===Ee[1][0]&&Ee[2][0]===Ee[3][0]&&Ee[0][1]===Ee[3][1]&&Ee[1][1]===Ee[2][1]||Ee[0][1]===Ee[1][1]&&Ee[2][1]===Ee[3][1]&&Ee[0][0]===Ee[3][0]&&Ee[1][0]===Ee[2][0],Ee.isRect&&(Ee.xmin=Math.min(Ee[0][0],Ee[2][0]),Ee.xmax=Math.max(Ee[0][0],Ee[2][0]),Ee.ymin=Math.min(Ee[0][1],Ee[2][1]),Ee.ymax=Math.max(Ee[0][1],Ee[2][1])),Ee;var Ee}function we(De){return function(he,_e){for(var Ae,Oe,Ee=0;Ee<De.length;Ee++){var Be=De[Ee],Ve=Be._id,Ze=Ve.charAt(0);if(_e.isRect){Ae||(Ae={});var it=_e[Ze+"min"],at=_e[Ze+"max"];it!==void 0&&at!==void 0&&(Ae[Ve]=[B(Be,it),B(Be,at)].sort(S))}else Oe||(Oe={}),Oe[Ve]=_e.map(U(Be))}Ae&&(he.range=Ae),Oe&&(he.lassoPoints=Oe)}}function Me(De,he){he&&(he.selections=(De.layout||{}).selections||[]),De.emit("plotly_selected",he)}function Pe(De){De.emit("plotly_deselect",null)}F.exports={reselect:Ce,prepSelect:function(De,he,_e,Ae,Oe){var Ee=!te(Ae),Be=i(Oe),Ve=r(Oe),Ze=o(Oe),it=n(Oe),at=l(Oe),gt=Oe==="drawcircle",yt=Oe==="drawline"||gt,pt=Ae.gd,et=pt._fullLayout,$e=at&&et.newselection.mode==="immediate"&&Ee,At=et._zoomlayer,Ot=Ae.element.getBoundingClientRect(),Rt=Ae.plotinfo,Ct=q(Rt),Ge=he-Ot.left,Xe=_e-Ot.top;et._calcInverseTransform(pt);var Ne=h.apply3DTransform(et._invTransform)(Ge,Xe);Ge=Ne[0],Xe=Ne[1];var Ye,ot,nt,ze,Fe,rt,We,ft=et._invScaleX,mt=et._invScaleY,vt=Ge,ut=Xe,Mt="M"+Ge+","+Xe,bt=Ae.xaxes[0],St=Ae.yaxes[0],Pt=bt._length,Dt=St._length,Ft=De.altKey&&!(n(Oe)&&Ze);X(De,pt,Ae),Be&&(Ye=O([[Ge,Xe]],z.BENDPX));var Xt=At.selectAll("path.select-outline-"+Rt.id).data([1]),an=it?et.newshape:et.newselection;it&&(Ae.hasText=an.label.text||an.label.texttemplate);var Ht=it&&!Ze?an.fillcolor:"rgba(0,0,0,0)",Zt=an.line.color||(Ee?b.contrast(pt._fullLayout.plot_bgcolor):"#7f7f7f");Xt.enter().append("path").attr("class","select-outline select-outline-"+Rt.id).style({opacity:it?an.opacity/2:1,"stroke-dasharray":w(an.line.dash,an.line.width),"stroke-width":an.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,Zt).call(b.fill,Ht).attr("fill-rule","evenodd").classed("cursor-move",!!it).attr("transform",Ct).attr("d",Mt+"Z");var jt=At.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",Ct).attr("d","M0,0Z");if(it&&Ae.hasText){var Pn=At.select(".label-temp");Pn.empty()&&(Pn=At.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Tn=et._uid+z.SELECTID,mn=[],Qt=ae(pt,Ae.xaxes,Ae.yaxes,Ae.subplot);$e&&!De.shiftKey&&(Ae._clearSubplotSelections=function(){if(Ee){var nn=bt._id,hn=St._id;ge(pt,nn,hn,Qt);for(var bn=(pt.layout||{}).selections||[],wn=[],Cn=!1,Ln=0;Ln<bn.length;Ln++){var Mn=et.selections[Ln];Mn.xref!==nn||Mn.yref!==hn?wn.push(bn[Ln]):Cn=!0}Cn&&(pt._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",pt,{selections:wn}))}});var un=function(nn){return nn.plotinfo.fillRangeItems||we(nn.xaxes.concat(nn.yaxes))}(Ae);Ae.moveFn=function(nn,hn){Ae._clearSubplotSelections&&(Ae._clearSubplotSelections(),Ae._clearSubplotSelections=void 0),vt=Math.max(0,Math.min(Pt,ft*nn+Ge)),ut=Math.max(0,Math.min(Dt,mt*hn+Xe));var bn=Math.abs(vt-Ge),wn=Math.abs(ut-Xe);if(Ve){var Cn,Ln,Mn;if(at){var jn=et.selectdirection;switch(Cn=jn==="any"?wn<Math.min(.6*bn,V)?"h":bn<Math.min(.6*wn,V)?"v":"d":jn){case"h":Ln=gt?Dt/2:0,Mn=Dt;break;case"v":Ln=gt?Pt/2:0,Mn=Pt}}if(it)switch(et.newshape.drawdirection){case"vertical":Cn="h",Ln=gt?Dt/2:0,Mn=Dt;break;case"horizontal":Cn="v",Ln=gt?Pt/2:0,Mn=Pt;break;case"ortho":bn<wn?(Cn="h",Ln=Xe,Mn=ut):(Cn="v",Ln=Ge,Mn=vt);break;default:Cn="d"}Cn==="h"?((ze=yt?g(gt,[vt,Ln],[vt,Mn]):[[Ge,Ln],[Ge,Mn],[vt,Mn],[vt,Ln]]).xmin=yt?vt:Math.min(Ge,vt),ze.xmax=yt?vt:Math.max(Ge,vt),ze.ymin=Math.min(Ln,Mn),ze.ymax=Math.max(Ln,Mn),jt.attr("d","M"+ze.xmin+","+(Xe-V)+"h-4v"+2*V+"h4ZM"+(ze.xmax-1)+","+(Xe-V)+"h4v"+2*V+"h-4Z")):Cn==="v"?((ze=yt?g(gt,[Ln,ut],[Mn,ut]):[[Ln,Xe],[Ln,ut],[Mn,ut],[Mn,Xe]]).xmin=Math.min(Ln,Mn),ze.xmax=Math.max(Ln,Mn),ze.ymin=yt?ut:Math.min(Xe,ut),ze.ymax=yt?ut:Math.max(Xe,ut),jt.attr("d","M"+(Ge-V)+","+ze.ymin+"v-4h"+2*V+"v4ZM"+(Ge-V)+","+(ze.ymax-1)+"v4h"+2*V+"v-4Z")):Cn==="d"&&((ze=yt?g(gt,[Ge,Xe],[vt,ut]):[[Ge,Xe],[Ge,ut],[vt,ut],[vt,Xe]]).xmin=Math.min(Ge,vt),ze.xmax=Math.max(Ge,vt),ze.ymin=Math.min(Xe,ut),ze.ymax=Math.max(Xe,ut),jt.attr("d","M0,0Z"))}else Be&&(Ye.addPt([vt,ut]),ze=Ye.filtered);if(Ae.selectionDefs&&Ae.selectionDefs.length?(nt=pe(Ae.mergedPolygons,ze,Ft),ze.subtract=Ft,ot=K(Ae.selectionDefs.concat([ze]))):(nt=[ze],ot=j(ze)),u(me(nt,Ze),Xt,Ae),at){var Rn,Qn=Ce(pt,!1),Yn=Qn.eventData?Qn.eventData.points.slice():[];Qn=Ce(pt,!1,ot,Qt,Ae),ot=Qn.selectionTesters,We=Qn.eventData,Rn=Ye?Ye.filtered:be(nt),E.throttle(Tn,z.SELECTDELAY,function(){for(var ar=(mn=ke(ot,Qt)).slice(),Kn=0;Kn<Yn.length;Kn++){for(var mr=Yn[Kn],en=!1,rn=0;rn<ar.length;rn++)if(ar[rn].curveNumber===mr.curveNumber&&ar[rn].pointNumber===mr.pointNumber){en=!0;break}en||ar.push(mr)}ar.length&&(We||(We={}),We.points=ar),un(We,Rn),function(En,gn){En.emit("plotly_selecting",gn)}(pt,We)})}},Ae.clickFn=function(nn,hn){if(jt.remove(),pt._fullLayout._activeShapeIndex>=0)pt._fullLayout._deactivateShape(pt);else if(!it){var bn=et.clickmode;E.done(Tn).then(function(){if(E.clear(Tn),nn===2){for(Xt.remove(),Fe=0;Fe<Qt.length;Fe++)(rt=Qt[Fe])._module.selectPoints(rt,!1);if(ye(pt,Qt),ie(Ae),Pe(pt),Qt.length){var wn=Qt[0].xaxis,Cn=Qt[0].yaxis;if(wn&&Cn){for(var Ln=[],Mn=pt._fullLayout.selections,jn=0;jn<Mn.length;jn++){var Rn=Mn[jn];Rn&&(Rn.xref===wn._id&&Rn.yref===Cn._id||Ln.push(Rn))}Ln.length<Mn.length&&(pt._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",pt,{selections:Ln}))}}}else bn.indexOf("select")>-1&&ee(hn,pt,Ae.xaxes,Ae.yaxes,Ae.subplot,Ae,Xt),bn==="event"&&Me(pt,void 0);f.click(pt,hn,Rt.id)}).catch(h.error)}},Ae.doneFn=function(){jt.remove(),E.done(Tn).then(function(){E.clear(Tn),!$e&&ze&&Ae.selectionDefs&&(ze.subtract=Ft,Ae.selectionDefs.push(ze),Ae.mergedPolygons.length=0,[].push.apply(Ae.mergedPolygons,nt)),($e||it)&&ie(Ae,$e),Ae.doneFnCompleted&&Ae.doneFnCompleted(mn),at&&Me(pt,We)}).catch(h.error)}},clearOutline:x,clearSelectionsCache:ie,selectOnClick:ee}},46056:function(F,C,e){"use strict";var T=e(13916),k=e(25376),a=e(52904).line,w=e(98192).u,b=e(92880).extendFlat,f=e(31780).templatedArray,s=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);F.exports=f("shape",{visible:b({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},s.legend,{editType:"calc+arraydraw"}),legendgroup:b({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:b({},T.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},T.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},a.color,{editType:"arraydraw"}),width:b({},a.width,{editType:"calc+arraydraw"}),dash:b({},w,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(85448),w=e(65152);function b(i){return s(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function f(i){return s(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function s(i,r,n,o,l,c){var d=i/2,u=c;if(r==="pixel"){var x=l?w.extractPathCoords(l,c?a.paramIsY:a.paramIsX):[n,o],p=T.aggNums(Math.max,null,x),g=T.aggNums(Math.min,null,x),m=g<0?Math.abs(g)+d:d,y=p>0?p+d:d;return{ppad:d,ppadplus:u?m:y,ppadminus:u?y:m}}return{ppad:d}}function t(i,r,n,o,l){var c=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(r!==void 0)return[c(r),c(n)];if(o){var d,u,x,p,g=1/0,m=-1/0,y=o.match(a.segmentRE);for(i.type==="date"&&(c=w.decodeDate(c)),d=0;d<y.length;d++)(u=l[y[d].charAt(0)].drawn)!==void 0&&(!(x=y[d].substr(1).match(a.paramRE))||x.length<u||((p=c(x[u]))<g&&(g=p),p>m&&(m=p)));return m>=g?[g,m]:void 0}}F.exports=function(i){var r=i._fullLayout,n=T.filterVisible(r.shapes);if(n.length&&i._fullData.length)for(var o=0;o<n.length;o++){var l,c,d=n[o];d._extremes={};var u=k.getRefType(d.xref),x=k.getRefType(d.yref);if(d.xref!=="paper"&&u!=="domain"){var p=d.xsizemode==="pixel"?d.xanchor:d.x0,g=d.xsizemode==="pixel"?d.xanchor:d.x1;(c=t(l=k.getFromId(i,d.xref),p,g,d.path,a.paramIsX))&&(d._extremes[l._id]=k.findExtremes(l,c,b(d)))}if(d.yref!=="paper"&&x!=="domain"){var m=d.ysizemode==="pixel"?d.yanchor:d.y0,y=d.ysizemode==="pixel"?d.yanchor:d.y1;(c=t(l=k.getFromId(i,d.yref),m,y,d.path,a.paramIsY))&&(d._extremes[l._id]=k.findExtremes(l,c,f(d)))}}}},85448:function(F){"use strict";F.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(51272),w=e(46056),b=e(65152);function f(s,t,i){function r(Y,B){return T.coerce(s,t,w,Y,B)}if(t._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),T.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var n=r("path"),o=r("type",n?"path":"rect"),l=o!=="path";l&&delete t.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var c=r("xsizemode"),d=r("ysizemode"),u=["x","y"],x=0;x<2;x++){var p,g,m,y=u[x],v=y+"anchor",_=y==="x"?c:d,h={_fullLayout:i},S=k.coerceRef(s,t,h,y,void 0,"paper");if(k.getRefType(S)==="range"?((p=k.getFromId(h,S))._shapeIndices.push(t._index),m=b.rangeToShapePosition(p),g=b.shapePositionToRange(p)):g=m=T.identity,l){var A=y+"0",E=y+"1",P=s[A],I=s[E];s[A]=g(s[A],!0),s[E]=g(s[E],!0),_==="pixel"?(r(A,0),r(E,10)):(k.coercePosition(t,h,r,S,A,.25),k.coercePosition(t,h,r,S,E,.75)),t[A]=m(t[A]),t[E]=m(t[E]),s[A]=P,s[E]=I}if(_==="pixel"){var D=s[v];s[v]=g(s[v],!0),k.coercePosition(t,h,r,S,v,.25),t[v]=m(t[v]),s[v]=D}}l&&T.noneOrAll(s,t,["x0","x1","y0","y1"]);var z,V,O=o==="line";if(l&&(z=r("label.texttemplate")),z||(V=r("label.text")),V||z){r("label.textangle");var j=r("label.textposition",O?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(Y,B){return Y?"bottom":B.indexOf("top")!==-1?"top":B.indexOf("bottom")!==-1?"bottom":"middle"}(O,j)),r("label.padding"),T.coerceFont(r,"label.font",i.font)}}}F.exports=function(s,t){a(s,t,{name:"shapes",handleItemDefaults:f})}},60728:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(72736),w=e(43616),b=e(9856).readPaths,f=e(65152),s=f.getPathString,t=e(97728),i=e(84284).FROM_TL;F.exports=function(r,n,o,l){if(l.selectAll(".shape-label").remove(),o.label.text||o.label.texttemplate){var c;if(o.label.texttemplate){var d={};if(o.type!=="path"){var u=k.getFromId(r,o.xref),x=k.getFromId(r,o.yref);for(var p in t){var g=t[p](o,u,x);g!==void 0&&(d[p]=g)}}c=T.texttemplateStringForShapes(o.label.texttemplate,{},r._fullLayout._d3locale,d)}else c=o.label.text;var m,y,v,_,h={"data-index":n},S=o.label.font,A=l.append("g").attr(h).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(c);if(o.path){var E=s(r,o),P=b(E,r);m=1/0,v=1/0,y=-1/0,_=-1/0;for(var I=0;I<P.length;I++)for(var D=0;D<P[I].length;D++)for(var z=P[I][D],V=1;V<z.length;V+=2){var O=z[V],j=z[V+1];m=Math.min(m,O),y=Math.max(y,O),v=Math.min(v,j),_=Math.max(_,j)}}else{var Y=k.getFromId(r,o.xref),B=k.getRefType(o.xref),U=k.getFromId(r,o.yref),q=k.getRefType(o.yref),te=f.getDataToPixel(r,Y,!1,B),ee=f.getDataToPixel(r,U,!0,q);m=te(o.x0),y=te(o.x1),v=ee(o.y0),_=ee(o.y1)}var Q=o.label.textangle;Q==="auto"&&(Q=o.type==="line"?function(se,ae,ue,ve){var ye,pe;return pe=Math.abs(ue-se),ye=ue>=se?ae-ve:ve-ae,-180/Math.PI*Math.atan2(ye,pe)}(m,v,y,_):0),A.call(function(se){return se.call(w.font,S).attr({}),a.convertToTspans(se,r),se});var J=function(se,ae,ue,ve,ye,pe,de){var me,ke,Ce,ge,oe=ye.label.textposition,re=ye.label.textangle,fe=ye.label.padding,Se=ye.type,be=Math.PI/180*pe,we=Math.sin(be),Me=Math.cos(be),Pe=ye.label.xanchor,De=ye.label.yanchor;if(Se==="line"){oe==="start"?(me=se,ke=ae):oe==="end"?(me=ue,ke=ve):(me=(se+ue)/2,ke=(ae+ve)/2),Pe==="auto"&&(Pe=oe==="start"?re==="auto"?ue>se?"left":ue<se?"right":"center":ue>se?"right":ue<se?"left":"center":oe==="end"?re==="auto"?ue>se?"right":ue<se?"left":"center":ue>se?"left":ue<se?"right":"center":"center");var he={bottom:-1,middle:0,top:1};if(re==="auto"){var _e=he[De];Ce=-fe*we*_e,ge=fe*Me*_e}else Ce=fe*{left:1,center:0,right:-1}[Pe],ge=fe*he[De];me+=Ce,ke+=ge}else Ce=fe+3,oe.indexOf("right")!==-1?(me=Math.max(se,ue)-Ce,Pe==="auto"&&(Pe="right")):oe.indexOf("left")!==-1?(me=Math.min(se,ue)+Ce,Pe==="auto"&&(Pe="left")):(me=(se+ue)/2,Pe==="auto"&&(Pe="center")),ke=oe.indexOf("top")!==-1?Math.min(ae,ve):oe.indexOf("bottom")!==-1?Math.max(ae,ve):(ae+ve)/2,ge=fe,De==="bottom"?ke-=ge:De==="top"&&(ke+=ge);var Ae=i[De],Oe=ye.label.font.size,Ee=de.height;return{textx:me+(Ee*Ae-Oe)*we,texty:ke+-(Ee*Ae-Oe)*Me,xanchor:Pe}}(m,v,y,_,o,Q,w.bBox(A.node())),K=J.textx,X=J.texty,ie=J.xanchor;A.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ie],y:X,x:K,transform:"rotate("+Q+","+K+","+X+")"}).call(a.positionText,K,X)}}},55496:function(F,C,e){"use strict";var T=e(3400).strTranslate,k=e(86476),a=e(72760),w=a.drawMode,b=a.selectMode,f=e(24040),s=e(76308),t=e(7e3),i=t.i000,r=t.i090,n=t.i180,o=t.i270,l=e(1936).clearOutlineControllers,c=e(9856),d=c.pointsOnRectangle,u=c.pointsOnEllipse,x=c.writePaths,p=e(93940).newShapes,g=e(93940).createShapeObj,m=e(5968),y=e(60728);function v(_,h){var S,A,E,P=_[h][1],I=_[h][2],D=_.length;return A=_[S=(h+1)%D][1],E=_[S][2],A===P&&E===I&&(A=_[S=(h+2)%D][1],E=_[S][2]),[S,A,E]}F.exports=function _(h,S,A,E){E||(E=0);var P=A.gd;function I(){_(h,S,A,E++),(u(h[0])||A.hasText)&&D({redrawing:!0})}function D(ye){var pe={};A.isActiveShape!==void 0&&(A.isActiveShape=!1,pe=p(S,A)),A.isActiveSelection!==void 0&&(A.isActiveSelection=!1,pe=m(S,A),P._fullLayout._reselect=!0),Object.keys(pe).length&&f.call((ye||{}).redrawing?"relayout":"_guiRelayout",P,pe)}var z,V,O,j,Y,B=P._fullLayout._zoomlayer,U=A.dragmode,q=w(U),te=b(U);if((q||te)&&(P._fullLayout._outlining=!0),l(P),S.attr("d",x(h)),E||!A.isActiveShape&&!A.isActiveSelection||(Y=function(ye,pe){for(var de=0;de<pe.length;de++){var me=pe[de];ye[de]=[];for(var ke=0;ke<me.length;ke++){ye[de][ke]=[];for(var Ce=0;Ce<me[ke].length;Ce++)ye[de][ke][Ce]=me[ke][Ce]}}return ye}([],h),function(ye){z=[];for(var pe=0;pe<h.length;pe++){var de=h[pe],me=d(de),ke=!me&&u(de);z[pe]=[];for(var Ce=de.length,ge=0;ge<Ce;ge++)if(de[ge][0]!=="Z"&&(!ke||ge===i||ge===r||ge===n||ge===o)){var oe,re=me&&A.isActiveSelection;re&&(oe=v(de,ge));var fe=de[ge][1],Se=de[ge][2],be=ye.append(re?"rect":"circle").attr("data-i",pe).attr("data-j",ge).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(re){var we=oe[1]-fe,Me=oe[2]-Se,Pe=Me?5:Math.max(Math.min(25,Math.abs(we)-5),5),De=we?5:Math.max(Math.min(25,Math.abs(Me)-5),5);be.classed(Me?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Pe).attr("height",De).attr("x",fe-Pe/2).attr("y",Se-De/2).attr("transform",T(we/2,Me/2))}else be.classed("cursor-grab",!0).attr("r",5).attr("cx",fe).attr("cy",Se);z[pe][ge]={element:be.node(),gd:P,prepFn:J,doneFn:X,clickFn:ie},k.init(z[pe][ge])}}}(B.append("g").attr("class","outline-controllers")),function(){V=[],h.length&&(V[0]={element:S[0][0],gd:P,prepFn:ae,doneFn:ue,clickFn:ve},k.init(V[0]))}()),q&&A.hasText){var ee=B.select(".label-temp"),Q=g(S,A,A.dragmode);y(P,"label-temp",Q,ee)}function J(ye){O=+ye.srcElement.getAttribute("data-i"),j=+ye.srcElement.getAttribute("data-j"),z[O][j].moveFn=K}function K(ye,pe){if(h.length){var de=Y[O][j][1],me=Y[O][j][2],ke=h[O],Ce=ke.length;if(d(ke)){var ge=ye,oe=pe;A.isActiveSelection&&(v(ke,j)[1]===ke[j][1]?oe=0:ge=0);for(var re=0;re<Ce;re++)if(re!==j){var fe=ke[re];fe[1]===ke[j][1]&&(fe[1]=de+ge),fe[2]===ke[j][2]&&(fe[2]=me+oe)}if(ke[j][1]=de+ge,ke[j][2]=me+oe,!d(ke))for(var Se=0;Se<Ce;Se++)for(var be=0;be<ke[Se].length;be++)ke[Se][be]=Y[O][Se][be]}else ke[j][1]=de+ye,ke[j][2]=me+pe;I()}}function X(){D()}function ie(ye,pe){if(ye===2){O=+pe.srcElement.getAttribute("data-i"),j=+pe.srcElement.getAttribute("data-j");var de=h[O];d(de)||u(de)||function(){if(h.length&&h[O]&&h[O].length){for(var me=[],ke=0;ke<h[O].length;ke++)ke!==j&&me.push(h[O][ke]);me.length>1&&(me.length!==2||me[1][0]!=="Z")&&(j===0&&(me[0][0]="M"),h[O]=me,I(),D())}}()}}function se(ye,pe){(function(de,me){if(h.length)for(var ke=0;ke<h.length;ke++)for(var Ce=0;Ce<h[ke].length;Ce++)for(var ge=0;ge+2<h[ke][Ce].length;ge+=2)h[ke][Ce][ge+1]=Y[ke][Ce][ge+1]+de,h[ke][Ce][ge+2]=Y[ke][Ce][ge+2]+me})(ye,pe),I()}function ae(ye){(O=+ye.srcElement.getAttribute("data-i"))||(O=0),V[O].moveFn=se}function ue(){D()}function ve(ye){ye===2&&function(pe){if(b(pe._fullLayout.dragmode)){l(pe);var de=pe._fullLayout._activeSelectionIndex,me=(pe.layout||{}).selections||[];if(de<me.length){for(var ke=[],Ce=0;Ce<me.length;Ce++)Ce!==de&&ke.push(me[Ce]);delete pe._fullLayout._activeSelectionIndex;var ge=pe._fullLayout.selections[de];pe._fullLayout._deselect={xref:ge.xref,yref:ge.yref},f.call("_guiRelayout",pe,{selections:ke})}}}(P)}}},4016:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(3400),w=e(54460),b=e(9856).readPaths,f=e(55496),s=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),r=e(43616),n=e(31780).arrayEditor,o=e(86476),l=e(93972),c=e(85448),d=e(65152),u=d.getPathString;function x(h){var S=h._fullLayout;for(var A in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[A].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var P=0;P<S.shapes.length;P++)S.shapes[P].visible===!0&&m(h,P)}function p(h){return!!h._fullLayout._outlining}function g(h){return!h._context.edits.shapePosition}function m(h,S){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var A=d.makeShapesOptionsAndPlotinfo(h,S),E=A.options,P=A.plotinfo;function I(D){var z=u(h,E),V={"data-index":S,"fill-rule":E.fillrule,d:z},O=E.opacity,j=E.fillcolor,Y=E.line.width?E.line.color:"rgba(0,0,0,0)",B=E.line.width,U=E.line.dash;B||E.editable!==!0||(B=5,U="solid");var q=z[z.length-1]!=="Z",te=g(h)&&E.editable&&h._fullLayout._activeShapeIndex===S;te&&(j=q?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,O=h._fullLayout.activeshape.opacity);var ee,Q=D.append("g").classed("shape-group",!0).attr({"data-index":S}),J=Q.append("path").attr(V).style("opacity",O).call(i.stroke,Y).call(i.fill,j).call(r.dashLine,U,B);if(y(Q,h,E),s(h,S,E,Q),(te||h._context.edits.shapePosition)&&(ee=n(h.layout,"shapes",E)),te){J.style({cursor:"move"});var K={element:J.node(),plotinfo:P,gd:h,editHelpers:ee,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},X=b(z,h);f(X,J,K)}else h._context.edits.shapePosition?function(ie,se,ae,ue,ve,ye){var pe,de,me,ke,Ce,ge,oe,re,fe,Se,be,we,Me,Pe,De,he,_e=10,Ae=10,Oe=ae.xsizemode==="pixel",Ee=ae.ysizemode==="pixel",Be=ae.type==="line",Ve=ae.type==="path",Ze=ye.modifyItem,it=T.select(se.node().parentNode),at=w.getFromId(ie,ae.xref),gt=w.getRefType(ae.xref),yt=w.getFromId(ie,ae.yref),pt=w.getRefType(ae.yref),et=d.getDataToPixel(ie,at,!1,gt),$e=d.getDataToPixel(ie,yt,!0,pt),At=d.getPixelToData(ie,at,!1,gt),Ot=d.getPixelToData(ie,yt,!0,pt),Rt=Be?function(){var nt=10,ze=Math.max(ae.line.width,nt),Fe=ve.append("g").attr("data-index",ue).attr("drag-helper",!0);Fe.append("path").attr("d",se.attr("d")).style({cursor:"move","stroke-width":ze,"stroke-opacity":"0"});var rt={"fill-opacity":"0"},We=Math.max(ze/2,nt);return Fe.append("circle").attr({"data-line-point":"start-point",cx:Oe?et(ae.xanchor)+ae.x0:et(ae.x0),cy:Ee?$e(ae.yanchor)-ae.y0:$e(ae.y0),r:We}).style(rt).classed("cursor-grab",!0),Fe.append("circle").attr({"data-line-point":"end-point",cx:Oe?et(ae.xanchor)+ae.x1:et(ae.x1),cy:Ee?$e(ae.yanchor)-ae.y1:$e(ae.y1),r:We}).style(rt).classed("cursor-grab",!0),Fe}():se,Ct={element:Rt.node(),gd:ie,prepFn:function(nt){p(ie)||(Oe&&(Ce=et(ae.xanchor)),Ee&&(ge=$e(ae.yanchor)),ae.type==="path"?De=ae.path:(pe=Oe?ae.x0:et(ae.x0),de=Ee?ae.y0:$e(ae.y0),me=Oe?ae.x1:et(ae.x1),ke=Ee?ae.y1:$e(ae.y1)),pe<me?(fe=pe,Me="x0",Se=me,Pe="x1"):(fe=me,Me="x1",Se=pe,Pe="x0"),!Ee&&de<ke||Ee&&de>ke?(oe=de,be="y0",re=ke,we="y1"):(oe=ke,be="y1",re=de,we="y0"),Ge(nt),Ye(ve,ae),function(ze,Fe,rt){var We=Fe.xref,ft=Fe.yref,mt=w.getFromId(rt,We),vt=w.getFromId(rt,ft),ut="";We==="paper"||mt.autorange||(ut+=We),ft==="paper"||vt.autorange||(ut+=ft),r.setClipUrl(ze,ut?"clip"+rt._fullLayout._uid+ut:null,rt)}(se,ae,ie),Ct.moveFn=he==="move"?Xe:Ne,Ct.altKey=nt.altKey)},doneFn:function(){p(ie)||(l(se),ot(ve),y(se,ie,ae),k.call("_guiRelayout",ie,ye.getUpdateObj()))},clickFn:function(){p(ie)||ot(ve)}};function Ge(nt){if(p(ie))he=null;else if(Be)he=nt.target.tagName==="path"?"move":nt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var ze=Ct.element.getBoundingClientRect(),Fe=ze.right-ze.left,rt=ze.bottom-ze.top,We=nt.clientX-ze.left,ft=nt.clientY-ze.top,mt=!Ve&&Fe>_e&&rt>Ae&&!nt.shiftKey?o.getCursor(We/Fe,1-ft/rt):"move";l(se,mt),he=mt.split("-")[0]}}function Xe(nt,ze){if(ae.type==="path"){var Fe=function(ft){return ft},rt=Fe,We=Fe;Oe?Ze("xanchor",ae.xanchor=At(Ce+nt)):(rt=function(ft){return At(et(ft)+nt)},at&&at.type==="date"&&(rt=d.encodeDate(rt))),Ee?Ze("yanchor",ae.yanchor=Ot(ge+ze)):(We=function(ft){return Ot($e(ft)+ze)},yt&&yt.type==="date"&&(We=d.encodeDate(We))),Ze("path",ae.path=v(De,rt,We))}else Oe?Ze("xanchor",ae.xanchor=At(Ce+nt)):(Ze("x0",ae.x0=At(pe+nt)),Ze("x1",ae.x1=At(me+nt))),Ee?Ze("yanchor",ae.yanchor=Ot(ge+ze)):(Ze("y0",ae.y0=Ot(de+ze)),Ze("y1",ae.y1=Ot(ke+ze)));se.attr("d",u(ie,ae)),Ye(ve,ae),s(ie,ue,ae,it)}function Ne(nt,ze){if(Ve){var Fe=function(Zt){return Zt},rt=Fe,We=Fe;Oe?Ze("xanchor",ae.xanchor=At(Ce+nt)):(rt=function(Zt){return At(et(Zt)+nt)},at&&at.type==="date"&&(rt=d.encodeDate(rt))),Ee?Ze("yanchor",ae.yanchor=Ot(ge+ze)):(We=function(Zt){return Ot($e(Zt)+ze)},yt&&yt.type==="date"&&(We=d.encodeDate(We))),Ze("path",ae.path=v(De,rt,We))}else if(Be){if(he==="resize-over-start-point"){var ft=pe+nt,mt=Ee?de-ze:de+ze;Ze("x0",ae.x0=Oe?ft:At(ft)),Ze("y0",ae.y0=Ee?mt:Ot(mt))}else if(he==="resize-over-end-point"){var vt=me+nt,ut=Ee?ke-ze:ke+ze;Ze("x1",ae.x1=Oe?vt:At(vt)),Ze("y1",ae.y1=Ee?ut:Ot(ut))}}else{var Mt=function(Zt){return he.indexOf(Zt)!==-1},bt=Mt("n"),St=Mt("s"),Pt=Mt("w"),Dt=Mt("e"),Ft=bt?oe+ze:oe,Xt=St?re+ze:re,an=Pt?fe+nt:fe,Ht=Dt?Se+nt:Se;Ee&&(bt&&(Ft=oe-ze),St&&(Xt=re-ze)),(!Ee&&Xt-Ft>Ae||Ee&&Ft-Xt>Ae)&&(Ze(be,ae[be]=Ee?Ft:Ot(Ft)),Ze(we,ae[we]=Ee?Xt:Ot(Xt))),Ht-an>_e&&(Ze(Me,ae[Me]=Oe?an:At(an)),Ze(Pe,ae[Pe]=Oe?Ht:At(Ht)))}se.attr("d",u(ie,ae)),Ye(ve,ae),s(ie,ue,ae,it)}function Ye(nt,ze){(Oe||Ee)&&function(){var Fe=ze.type!=="path",rt=nt.selectAll(".visual-cue").data([0]);rt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var We=et(Oe?ze.xanchor:a.midRange(Fe?[ze.x0,ze.x1]:d.extractPathCoords(ze.path,c.paramIsX))),ft=$e(Ee?ze.yanchor:a.midRange(Fe?[ze.y0,ze.y1]:d.extractPathCoords(ze.path,c.paramIsY)));if(We=d.roundPositionForSharpStrokeRendering(We,1),ft=d.roundPositionForSharpStrokeRendering(ft,1),Oe&&Ee){var mt="M"+(We-1-1)+","+(ft-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";rt.attr("d",mt)}else if(Oe){var vt="M"+(We-1-1)+","+(ft-9-1)+"v18 h2 v-18 Z";rt.attr("d",vt)}else{var ut="M"+(We-9-1)+","+(ft-1-1)+"h18 v2 h-18 Z";rt.attr("d",ut)}}()}function ot(nt){nt.selectAll(".visual-cue").remove()}o.init(Ct),Rt.node().onmousemove=Ge}(h,J,E,S,D,ee):E.editable===!0&&J.style("pointer-events",q||i.opacity(j)*O<=.5?"stroke":"all");J.node().addEventListener("click",function(){return function(ie,se){if(g(ie)){var ae=+se.node().getAttribute("data-index");if(ae>=0){if(ae===ie._fullLayout._activeShapeIndex)return void _(ie);ie._fullLayout._activeShapeIndex=ae,ie._fullLayout._deactivateShape=_,x(ie)}}}(h,J)})}E._input&&E.visible===!0&&(E.layer==="above"?I(h._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?I(h._fullLayout._shapeLowerLayer):E.layer==="between"?I(P.shapelayerBetween):P._hadPlotinfo?I((P.mainplotinfo||P).shapelayer):I(h._fullLayout._shapeLowerLayer))}function y(h,S,A){var E=(A.xref+A.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(h,E?"clip"+S._fullLayout._uid+E:null,S)}function v(h,S,A){return h.replace(c.segmentRE,function(E){var P=0,I=E.charAt(0),D=c.paramIsX[I],z=c.paramIsY[I],V=c.numParams[I];return I+E.substr(1).replace(c.paramRE,function(O){return P>=V||(D[P]?O=S(O):z[P]&&(O=A(O)),P++),O})})}function _(h){g(h)&&h._fullLayout._activeShapeIndex>=0&&(t(h),delete h._fullLayout._activeShapeIndex,x(h))}F.exports={draw:x,drawOne:m,eraseActiveShape:function(h){if(g(h)){t(h);var S=h._fullLayout._activeShapeIndex,A=(h.layout||{}).shapes||[];if(S<A.length){for(var E=[],P=0;P<A.length;P++)P!==S&&E.push(A[P]);return delete h._fullLayout._activeShapeIndex,k.call("_guiRelayout",h,{shapes:E})}}},drawLabel:s}},92872:function(F,C,e){"use strict";var T=e(67824).overrideAll,k=e(45464),a=e(25376),w=e(98192).u,b=e(92880).extendFlat,f=e(21776).ye,s=e(97728);F.exports=T({newshape:{visible:b({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},k.legend,{}),legendgroup:b({},k.legendgroup,{}),legendgrouptitle:{text:b({},k.legendgrouptitle.text,{}),font:a({})},legendrank:b({},k.legendrank,{}),legendwidth:b({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},w,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:f({newshape:!0},{keys:Object.keys(s)}),font:a({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(F){"use strict";F.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(F,C,e){"use strict";var T=e(76308),k=e(3400);F.exports=function(a,w,b){if(b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),k.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var f=(a||{}).plot_bgcolor||"#FFF";b("newshape.line.color",T.contrast(f)),b("newshape.line.dash")}var s=a.dragmode==="drawline",t=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(t||i){b("newshape.label.textangle");var r=b("newshape.label.textposition",s?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(n,o){return n?"bottom":o.indexOf("top")!==-1?"top":o.indexOf("bottom")!==-1?"bottom":"middle"}(s,r)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",w.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},9856:function(F,C,e){"use strict";var T=e(21984),k=e(7e3),a=k.CIRCLE_SIDES,w=k.SQRT2,b=e(5840),f=b.p2r,s=b.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function r(o,l){return Math.abs(o-l)<=1e-6}function n(o,l){var c=l[1]-o[1],d=l[2]-o[2];return Math.sqrt(c*c+d*d)}C.writePaths=function(o){var l=o.length;if(!l)return"M0,0Z";for(var c="",d=0;d<l;d++)for(var u=o[d].length,x=0;x<u;x++){var p=o[d][x][0];if(p==="Z")c+="Z";else for(var g=o[d][x].length,m=0;m<g;m++){var y=m;p==="Q"||p==="S"?y=i[m]:p==="C"&&(y=t[m]),c+=o[d][x][y],m>0&&m<g-1&&(c+=",")}}return c},C.readPaths=function(o,l,c,d){var u,x,p,g=T(o),m=[],y=-1,v=0,_=0,h=function(){x=v,p=_};h();for(var S=0;S<g.length;S++){var A,E,P,I,D=[],z=g[S][0],V=z;switch(z){case"M":m[++y]=[],v=+g[S][1],_=+g[S][2],D.push([V,v,_]),h();break;case"Q":case"S":A=+g[S][1],P=+g[S][2],v=+g[S][3],_=+g[S][4],D.push([V,v,_,A,P]);break;case"C":A=+g[S][1],P=+g[S][2],E=+g[S][3],I=+g[S][4],v=+g[S][5],_=+g[S][6],D.push([V,v,_,A,P,E,I]);break;case"T":case"L":v=+g[S][1],_=+g[S][2],D.push([V,v,_]);break;case"H":V="L",v=+g[S][1],D.push([V,v,_]);break;case"V":V="L",_=+g[S][1],D.push([V,v,_]);break;case"A":V="L";var O=+g[S][1],j=+g[S][2];+g[S][4]||(O=-O,j=-j);var Y=v-O,B=_;for(u=1;u<=a/2;u++){var U=2*Math.PI*u/a;D.push([V,Y+O*Math.cos(U),B+j*Math.sin(U)])}break;case"Z":v===x&&_===p||(v=x,_=p,D.push([V,v,_]))}for(var q=(c||{}).domain,te=l._fullLayout._size,ee=c&&c.xsizemode==="pixel",Q=c&&c.ysizemode==="pixel",J=d===!1,K=0;K<D.length;K++){for(u=0;u+2<7;u+=2){var X=D[K][u+1],ie=D[K][u+2];X!==void 0&&ie!==void 0&&(v=X,_=ie,c&&(c.xaxis&&c.xaxis.p2r?(J&&(X-=c.xaxis._offset),X=ee?s(c.xaxis,c.xanchor)+X:f(c.xaxis,X)):(J&&(X-=te.l),q?X=q.x[0]+X/te.w:X/=te.w),c.yaxis&&c.yaxis.p2r?(J&&(ie-=c.yaxis._offset),ie=Q?s(c.yaxis,c.yanchor)-ie:f(c.yaxis,ie)):(J&&(ie-=te.t),ie=q?q.y[1]-ie/te.h:1-ie/te.h)),D[K][u+1]=X,D[K][u+2]=ie)}m[y].push(D[K].slice())}}return m},C.pointsOnRectangle=function(o){if(o.length!==5)return!1;for(var l=1;l<3;l++)if(!r(o[0][l]-o[1][l],o[3][l]-o[2][l])||!r(o[0][l]-o[3][l],o[1][l]-o[2][l]))return!1;return!(!r(o[0][1],o[1][1])&&!r(o[0][1],o[3][1])||!(n(o[0],o[1])*n(o[0],o[3])))},C.pointsOnEllipse=function(o){var l=o.length;if(l!==a+1)return!1;l=a;for(var c=0;c<l;c++){var d=(2*l-c)%l,u=(l/2+d)%l,x=(l/2+c)%l;if(!r(n(o[c],o[x]),n(o[d],o[u])))return!1}return!0},C.handleEllipse=function(o,l,c){if(!o)return[l,c];var d=C.ellipseOver({x0:l[0],y0:l[1],x1:c[0],y1:c[1]}),u=(d.x1+d.x0)/2,x=(d.y1+d.y0)/2,p=(d.x1-d.x0)/2,g=(d.y1-d.y0)/2;p||(p=g/=w),g||(g=p/=w);for(var m=[],y=0;y<a;y++){var v=2*y*Math.PI/a;m.push([u+p*Math.cos(v),x+g*Math.sin(v)])}return m},C.ellipseOver=function(o){var l=o.x0,c=o.y0,d=o.x1,u=o.y1,x=d-l,p=u-c,g=((l-=x)+d)/2,m=((c-=p)+u)/2;return{x0:g-(x*=w),y0:m-(p*=w),x1:g+x,y1:m+p}},C.fixDatesForPaths=function(o,l,c){var d=l.type==="date",u=c.type==="date";if(!d&&!u)return o;for(var x=0;x<o.length;x++)for(var p=0;p<o[x].length;p++)for(var g=0;g+2<o[x][p].length;g+=2)d&&(o[x][p][g+1]=o[x][p][g+1].replace(" ","_")),u&&(o[x][p][g+2]=o[x][p][g+2].replace(" ","_"));return o}},93940:function(F,C,e){"use strict";var T=e(72760),k=T.drawMode,a=T.openMode,w=e(7e3),b=w.i000,f=w.i090,s=w.i180,t=w.i270,i=w.cos45,r=w.sin45,n=e(5840),o=n.p2r,l=n.r2p,c=e(1936).clearOutline,d=e(9856),u=d.readPaths,x=d.writePaths,p=d.ellipseOver,g=d.fixDatesForPaths;function m(y,v,_){var h,S=y[0][0],A=v.gd,E=S.getAttribute("d"),P=A._fullLayout.newshape,I=v.plotinfo,D=v.isActiveShape,z=I.xaxis,V=I.yaxis,O=!!I.domain||!I.xaxis,j=!!I.domain||!I.yaxis,Y=a(_),B=u(E,A,I,D),U={editable:!0,visible:P.visible,name:P.name,showlegend:P.showlegend,legend:P.legend,legendwidth:P.legendwidth,legendgroup:P.legendgroup,legendgrouptitle:{text:P.legendgrouptitle.text,font:P.legendgrouptitle.font},legendrank:P.legendrank,label:P.label,xref:O?"paper":z._id,yref:j?"paper":V._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(Y||(U.fillcolor=P.fillcolor,U.fillrule=P.fillrule),B.length===1&&(h=B[0]),h&&h.length===5&&_==="drawrect")U.type="rect",U.x0=h[0][1],U.y0=h[0][2],U.x1=h[2][1],U.y1=h[2][2];else if(h&&_==="drawline")U.type="line",U.x0=h[0][1],U.y0=h[0][2],U.x1=h[1][1],U.y1=h[1][2];else if(h&&_==="drawcircle"){U.type="circle";var q=h[b][1],te=h[f][1],ee=h[s][1],Q=h[t][1],J=h[b][2],K=h[f][2],X=h[s][2],ie=h[t][2],se=I.xaxis&&(I.xaxis.type==="date"||I.xaxis.type==="log"),ae=I.yaxis&&(I.yaxis.type==="date"||I.yaxis.type==="log");se&&(q=l(I.xaxis,q),te=l(I.xaxis,te),ee=l(I.xaxis,ee),Q=l(I.xaxis,Q)),ae&&(J=l(I.yaxis,J),K=l(I.yaxis,K),X=l(I.yaxis,X),ie=l(I.yaxis,ie));var ue=(te+Q)/2,ve=(J+X)/2,ye=p({x0:ue,y0:ve,x1:ue+(Q-te+ee-q)/2*i,y1:ve+(ie-K+X-J)/2*r});se&&(ye.x0=o(I.xaxis,ye.x0),ye.x1=o(I.xaxis,ye.x1)),ae&&(ye.y0=o(I.yaxis,ye.y0),ye.y1=o(I.yaxis,ye.y1)),U.x0=ye.x0,U.y0=ye.y0,U.x1=ye.x1,U.y1=ye.y1}else U.type="path",z&&V&&g(B,z,V),U.path=x(B),h=null;return U}F.exports={newShapes:function(y,v){if(y.length&&y[0][0]){var _=v.gd,h=v.isActiveShape,S=v.dragmode,A=(_.layout||{}).shapes||[];if(!k(S)&&h!==void 0){var E=_._fullLayout._activeShapeIndex;if(E<A.length)switch(_._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var P=A[E].path||"";S=P[P.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var I=m(y,v,S);c(_);for(var D=v.editHelpers,z=(D||{}).modifyItem,V=[],O=0;O<A.length;O++){var j=_._fullLayout.shapes[O];if(V[O]=j._input,h!==void 0&&O===_._fullLayout._activeShapeIndex){var Y=I;switch(j.type){case"line":case"rect":case"circle":z("x0",Y.x0),z("x1",Y.x1),z("y0",Y.y0),z("y1",Y.y1);break;case"path":z("path",Y.path)}}}return h===void 0?(V.push(I),V):D?D.getUpdateObj():{}}},createShapeObj:m}},1936:function(F){"use strict";F.exports={clearOutlineControllers:function(C){var e=C._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(C){var e=C._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),C._fullLayout._outlining=!1}}},65152:function(F,C,e){"use strict";var T=e(85448),k=e(3400),a=e(54460);C.rangeToShapePosition=function(w){return w.type==="log"?w.r2d:function(b){return b}},C.shapePositionToRange=function(w){return w.type==="log"?w.d2r:function(b){return b}},C.decodeDate=function(w){return function(b){return b.replace&&(b=b.replace("_"," ")),w(b)}},C.encodeDate=function(w){return function(b){return w(b).replace(" ","_")}},C.extractPathCoords=function(w,b,f){var s=[];return w.match(T.segmentRE).forEach(function(t){var i=b[t.charAt(0)].drawn;if(i!==void 0){var r=t.substr(1).match(T.paramRE);if(r&&!(r.length<i)){var n=r[i],o=f?n:k.cleanNumber(n);s.push(o)}}}),s},C.getDataToPixel=function(w,b,f,s){var t,i=w._fullLayout._size;if(b)if(s==="domain")t=function(n){return b._length*(f?1-n:n)+b._offset};else{var r=C.shapePositionToRange(b);t=function(n){return b._offset+b.r2p(r(n,!0))},b.type==="date"&&(t=C.decodeDate(t))}else t=f?function(n){return i.t+i.h*(1-n)}:function(n){return i.l+i.w*n};return t},C.getPixelToData=function(w,b,f,s){var t,i=w._fullLayout._size;if(b)if(s==="domain")t=function(n){var o=(n-b._offset)/b._length;return f?1-o:o};else{var r=C.rangeToShapePosition(b);t=function(n){return r(b.p2r(n-b._offset))}}else t=f?function(n){return 1-(n-i.t)/i.h}:function(n){return(n-i.l)/i.w};return t},C.roundPositionForSharpStrokeRendering=function(w,b){var f=Math.round(b%2)===1,s=Math.round(w);return f?s+.5:s},C.makeShapesOptionsAndPlotinfo=function(w,b){var f=w._fullLayout.shapes[b]||{},s=w._fullLayout._plots[f.xref+f.yref];return s?s._hadPlotinfo=!0:(s={},f.xref&&f.xref!=="paper"&&(s.xaxis=w._fullLayout[f.xref+"axis"]),f.yref&&f.yref!=="paper"&&(s.yaxis=w._fullLayout[f.yref+"axis"])),s.xsizemode=f.xsizemode,s.ysizemode=f.ysizemode,s.xanchor=f.xanchor,s.yanchor=f.yanchor,{options:f,plotinfo:s}},C.makeSelectionsOptionsAndPlotinfo=function(w,b){var f=w._fullLayout.selections[b]||{},s=w._fullLayout._plots[f.xref+f.yref];return s?s._hadPlotinfo=!0:(s={},f.xref&&(s.xaxis=w._fullLayout[f.xref+"axis"]),f.yref&&(s.yaxis=w._fullLayout[f.yref+"axis"])),{options:f,plotinfo:s}},C.getPathString=function(w,b){var f,s,t,i,r,n,o,l,c=b.type,d=a.getRefType(b.xref),u=a.getRefType(b.yref),x=a.getFromId(w,b.xref),p=a.getFromId(w,b.yref),g=w._fullLayout._size;if(x?d==="domain"?s=function(P){return x._offset+x._length*P}:(f=C.shapePositionToRange(x),s=function(P){return x._offset+x.r2p(f(P,!0))}):s=function(P){return g.l+g.w*P},p?u==="domain"?i=function(P){return p._offset+p._length*(1-P)}:(t=C.shapePositionToRange(p),i=function(P){return p._offset+p.r2p(t(P,!0))}):i=function(P){return g.t+g.h*(1-P)},c==="path")return x&&x.type==="date"&&(s=C.decodeDate(s)),p&&p.type==="date"&&(i=C.decodeDate(i)),function(P,I,D){var z=P.path,V=P.xsizemode,O=P.ysizemode,j=P.xanchor,Y=P.yanchor;return z.replace(T.segmentRE,function(B){var U=0,q=B.charAt(0),te=T.paramIsX[q],ee=T.paramIsY[q],Q=T.numParams[q],J=B.substr(1).replace(T.paramRE,function(K){return te[U]?K=V==="pixel"?I(j)+Number(K):I(K):ee[U]&&(K=O==="pixel"?D(Y)-Number(K):D(K)),++U>Q&&(K="X"),K});return U>Q&&(J=J.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+B)),q+J})}(b,s,i);if(b.xsizemode==="pixel"){var m=s(b.xanchor);r=m+b.x0,n=m+b.x1}else r=s(b.x0),n=s(b.x1);if(b.ysizemode==="pixel"){var y=i(b.yanchor);o=y-b.y0,l=y-b.y1}else o=i(b.y0),l=i(b.y1);if(c==="line")return"M"+r+","+o+"L"+n+","+l;if(c==="rect")return"M"+r+","+o+"H"+n+"V"+l+"H"+r+"Z";var v=(r+n)/2,_=(o+l)/2,h=Math.abs(v-r),S=Math.abs(_-o),A="A"+h+","+S,E=v+h+","+_;return"M"+E+A+" 0 1,1 "+v+","+(_-S)+A+" 0 0,1 "+E+"Z"}},41592:function(F,C,e){"use strict";var T=e(4016);F.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:T.draw,drawOne:T.drawOne}},97728:function(F){"use strict";function C(a,w){return w?w.d2l(a):a}function e(a,w){return w?w.l2d(a):a}function T(a,w){return C(a.x1,w)-C(a.x0,w)}function k(a,w,b){return C(a.y1,b)-C(a.y0,b)}F.exports={x0:function(a){return a.x0},x1:function(a){return a.x1},y0:function(a){return a.y0},y1:function(a){return a.y1},slope:function(a,w,b){return a.type!=="line"?void 0:k(a,0,b)/T(a,w)},dx:T,dy:k,width:function(a,w){return Math.abs(T(a,w))},height:function(a,w,b){return Math.abs(k(a,0,b))},length:function(a,w,b){return a.type!=="line"?void 0:Math.sqrt(Math.pow(T(a,w),2)+Math.pow(k(a,0,b),2))},xcenter:function(a,w){return e((C(a.x1,w)+C(a.x0,w))/2,w)},ycenter:function(a,w,b){return e((C(a.y1,b)+C(a.y0,b))/2,b)}}},89861:function(F,C,e){"use strict";var T=e(25376),k=e(66741),a=e(92880).extendDeepAll,w=e(67824).overrideAll,b=e(85656),f=e(31780).templatedArray,s=e(60876),t=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});F.exports=w(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:T({})},font:T({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(F){"use strict";F.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(F,C,e){"use strict";var T=e(3400),k=e(51272),a=e(89861),w=e(60876).name,b=a.steps;function f(t,i,r){function n(u,x){return T.coerce(t,i,a,u,x)}for(var o=k(t,i,{name:"steps",handleItemDefaults:s}),l=0,c=0;c<o.length;c++)o[c].visible&&l++;if(l<2?i.visible=!1:n("visible")){i._stepCount=l;var d=i._visibleSteps=T.filterVisible(o);(o[n("active")]||{}).visible||(i.active=d[0]._index),n("x"),n("y"),T.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),T.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),T.coerceFont(n,"currentvalue.font",i.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(t,i){function r(o,l){return T.coerce(t,i,b,o,l)}if(t.method==="skip"||Array.isArray(t.args)?r("visible"):i.visible=!1){r("method"),r("args");var n=r("label","step-"+i._index);r("value",n),r("execute")}}F.exports=function(t,i){k(t,i,{name:w,handleItemDefaults:f})}},79664:function(F,C,e){"use strict";var T=e(33428),k=e(7316),a=e(76308),w=e(43616),b=e(3400),f=b.strTranslate,s=e(72736),t=e(31780).arrayEditor,i=e(60876),r=e(84284),n=r.LINE_SPACING,o=r.FROM_TL,l=r.FROM_BR;function c(D){return i.autoMarginIdRoot+D._index}function d(D){return D._index}function u(D,z){var V=w.tester.selectAll("g."+i.labelGroupClass).data(z._visibleSteps);V.enter().append("g").classed(i.labelGroupClass,!0);var O=0,j=0;V.each(function(K){var X=g(T.select(this),{step:K},z).node();if(X){var ie=w.bBox(X);j=Math.max(j,ie.height),O=Math.max(O,ie.width)}}),V.remove();var Y=z._dims={};Y.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var B=D._fullLayout._size;Y.lx=B.l+B.w*z.x,Y.ly=B.t+B.h*(1-z.y),z.lenmode==="fraction"?Y.outerLength=Math.round(B.w*z.len):Y.outerLength=z.len,Y.inputAreaStart=0,Y.inputAreaLength=Math.round(Y.outerLength-z.pad.l-z.pad.r);var U=(Y.inputAreaLength-2*i.stepInset)/(z._stepCount-1),q=O+i.labelPadding;if(Y.labelStride=Math.max(1,Math.ceil(q/U)),Y.labelHeight=j,Y.currentValueMaxWidth=0,Y.currentValueHeight=0,Y.currentValueTotalHeight=0,Y.currentValueMaxLines=1,z.currentvalue.visible){var te=w.tester.append("g");V.each(function(K){var X=x(te,z,K.label),ie=X.node()&&w.bBox(X.node())||{width:0,height:0},se=s.lineCount(X);Y.currentValueMaxWidth=Math.max(Y.currentValueMaxWidth,Math.ceil(ie.width)),Y.currentValueHeight=Math.max(Y.currentValueHeight,Math.ceil(ie.height)),Y.currentValueMaxLines=Math.max(Y.currentValueMaxLines,se)}),Y.currentValueTotalHeight=Y.currentValueHeight+z.currentvalue.offset,te.remove()}Y.height=Y.currentValueTotalHeight+i.tickOffset+z.ticklen+i.labelOffset+Y.labelHeight+z.pad.t+z.pad.b;var ee="left";b.isRightAnchor(z)&&(Y.lx-=Y.outerLength,ee="right"),b.isCenterAnchor(z)&&(Y.lx-=Y.outerLength/2,ee="center");var Q="top";b.isBottomAnchor(z)&&(Y.ly-=Y.height,Q="bottom"),b.isMiddleAnchor(z)&&(Y.ly-=Y.height/2,Q="middle"),Y.outerLength=Math.ceil(Y.outerLength),Y.height=Math.ceil(Y.height),Y.lx=Math.round(Y.lx),Y.ly=Math.round(Y.ly);var J={y:z.y,b:Y.height*l[Q],t:Y.height*o[Q]};z.lenmode==="fraction"?(J.l=0,J.xl=z.x-z.len*o[ee],J.r=0,J.xr=z.x+z.len*l[ee]):(J.x=z.x,J.l=Y.outerLength*o[ee],J.r=Y.outerLength*l[ee]),k.autoMargin(D,c(z),J)}function x(D,z,V){if(z.currentvalue.visible){var O,j,Y=z._dims;switch(z.currentvalue.xanchor){case"right":O=Y.inputAreaLength-i.currentValueInset-Y.currentValueMaxWidth,j="left";break;case"center":O=.5*Y.inputAreaLength,j="middle";break;default:O=i.currentValueInset,j="left"}var B=b.ensureSingle(D,"text",i.labelClass,function(J){J.attr({"text-anchor":j,"data-notex":1})}),U=z.currentvalue.prefix?z.currentvalue.prefix:"";if(typeof V=="string")U+=V;else{var q=z.steps[z.active].label,te=z._gd._fullLayout._meta;te&&(q=b.templateString(q,te)),U+=q}z.currentvalue.suffix&&(U+=z.currentvalue.suffix),B.call(w.font,z.currentvalue.font).text(U).call(s.convertToTspans,z._gd);var ee=s.lineCount(B),Q=(Y.currentValueMaxLines+1-ee)*z.currentvalue.font.size*n;return s.positionText(B,O,Q),B}}function p(D,z,V){b.ensureSingle(D,"rect",i.gripRectClass,function(O){O.call(_,z,D,V).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(a.stroke,V.bordercolor).call(a.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px")}function g(D,z,V){var O=b.ensureSingle(D,"text",i.labelClass,function(B){B.attr({"text-anchor":"middle","data-notex":1})}),j=z.step.label,Y=V._gd._fullLayout._meta;return Y&&(j=b.templateString(j,Y)),O.call(w.font,V.font).text(j).call(s.convertToTspans,V._gd),O}function m(D,z){var V=b.ensureSingle(D,"g",i.labelsClass),O=z._dims,j=V.selectAll("g."+i.labelGroupClass).data(O.labelSteps);j.enter().append("g").classed(i.labelGroupClass,!0),j.exit().remove(),j.each(function(Y){var B=T.select(this);B.call(g,Y,z),w.setTranslate(B,A(z,Y.fraction),i.tickOffset+z.ticklen+z.font.size*n+i.labelOffset+O.currentValueTotalHeight)})}function y(D,z,V,O,j){var Y=Math.round(O*(V._stepCount-1)),B=V._visibleSteps[Y]._index;B!==V.active&&v(D,z,V,B,!0,j)}function v(D,z,V,O,j,Y){var B=V.active;V.active=O,t(D.layout,i.name,V).applyUpdate("active",O);var U=V.steps[V.active];z.call(S,V,Y),z.call(x,V),D.emit("plotly_sliderchange",{slider:V,step:V.steps[V.active],interaction:j,previousActive:B}),U&&U.method&&j&&(z._nextMethod?(z._nextMethod.step=U,z._nextMethod.doCallback=j,z._nextMethod.doTransition=Y):(z._nextMethod={step:U,doCallback:j,doTransition:Y},z._nextMethodRaf=window.requestAnimationFrame(function(){var q=z._nextMethod.step;q.method&&(q.execute&&k.executeAPICommand(D,q.method,q.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function _(D,z,V){if(!z._context.staticPlot){var O=V.node(),j=T.select(z);D.on("mousedown",B),D.on("touchstart",B)}function Y(){return V.data()[0]}function B(){var U=Y();z.emit("plotly_sliderstart",{slider:U});var q=V.select("."+i.gripRectClass);T.event.stopPropagation(),T.event.preventDefault(),q.call(a.fill,U.activebgcolor);var te=E(U,T.mouse(O)[0]);function ee(){var J=Y(),K=E(J,T.mouse(O)[0]);y(z,V,J,K,!1)}function Q(){var J=Y();J._dragging=!1,q.call(a.fill,J.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),z.emit("plotly_sliderend",{slider:J,step:J.steps[J.active]})}y(z,V,U,te,!0),U._dragging=!0,j.on("mousemove",ee),j.on("touchmove",ee),j.on("mouseup",Q),j.on("touchend",Q)}}function h(D,z){var V=D.selectAll("rect."+i.tickRectClass).data(z._visibleSteps),O=z._dims;V.enter().append("rect").classed(i.tickRectClass,!0),V.exit().remove(),V.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),V.each(function(j,Y){var B=Y%O.labelStride==0,U=T.select(this);U.attr({height:B?z.ticklen:z.minorticklen}).call(a.fill,z.tickcolor),w.setTranslate(U,A(z,Y/(z._stepCount-1))-.5*z.tickwidth,(B?i.tickOffset:i.minorTickOffset)+O.currentValueTotalHeight)})}function S(D,z,V){for(var O=D.select("rect."+i.gripRectClass),j=0,Y=0;Y<z._stepCount;Y++)if(z._visibleSteps[Y]._index===z.active){j=Y;break}var B=A(z,j/(z._stepCount-1));if(!z._invokingCommand){var U=O;V&&z.transition.duration>0&&(U=U.transition().duration(z.transition.duration).ease(z.transition.easing)),U.attr("transform",f(B-.5*i.gripWidth,z._dims.currentValueTotalHeight))}}function A(D,z){var V=D._dims;return V.inputAreaStart+i.stepInset+(V.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,z))}function E(D,z){var V=D._dims;return Math.min(1,Math.max(0,(z-i.stepInset-V.inputAreaStart)/(V.inputAreaLength-2*i.stepInset-2*V.inputAreaStart)))}function P(D,z,V){var O=V._dims,j=b.ensureSingle(D,"rect",i.railTouchRectClass,function(Y){Y.call(_,z,D,V).style("pointer-events","all")});j.attr({width:O.inputAreaLength,height:Math.max(O.inputAreaWidth,i.tickOffset+V.ticklen+O.labelHeight)}).call(a.fill,V.bgcolor).attr("opacity",0),w.setTranslate(j,0,O.currentValueTotalHeight)}function I(D,z){var V=z._dims,O=V.inputAreaLength-2*i.railInset,j=b.ensureSingle(D,"rect",i.railRectClass);j.attr({width:O,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,z.bordercolor).call(a.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),w.setTranslate(j,i.railInset,.5*(V.inputAreaWidth-i.railWidth)+V.currentValueTotalHeight)}F.exports=function(D){var z=D._context.staticPlot,V=D._fullLayout,O=function(te,ee){for(var Q=te[i.name],J=[],K=0;K<Q.length;K++){var X=Q[K];X.visible&&(X._gd=ee,J.push(X))}return J}(V,D),j=V._infolayer.selectAll("g."+i.containerClassName).data(O.length>0?[0]:[]);function Y(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),k.autoMargin(D,c(te))}if(j.enter().append("g").classed(i.containerClassName,!0).style("cursor",z?null:"ew-resize"),j.exit().each(function(){T.select(this).selectAll("g."+i.groupClassName).each(Y)}).remove(),O.length!==0){var B=j.selectAll("g."+i.groupClassName).data(O,d);B.enter().append("g").classed(i.groupClassName,!0),B.exit().each(Y).remove();for(var U=0;U<O.length;U++){var q=O[U];u(D,q)}B.each(function(te){var ee=T.select(this);(function(Q){var J=Q._dims;J.labelSteps=[];for(var K=Q._stepCount,X=0;X<K;X+=J.labelStride)J.labelSteps.push({fraction:X/(K-1),step:Q._visibleSteps[X]})})(te),k.manageCommandObserver(D,te,te._visibleSteps,function(Q){var J=ee.data()[0];J.active!==Q.index&&(J._dragging||v(D,ee,J,Q.index,!1,!0))}),function(Q,J,K){(K.steps[K.active]||{}).visible||(K.active=K._visibleSteps[0]._index),J.call(x,K).call(I,K).call(m,K).call(h,K).call(P,Q,K).call(p,Q,K);var X=K._dims;w.setTranslate(J,X.lx+K.pad.l,X.ly+K.pad.t),J.call(S,K,!1),J.call(x,K)}(D,T.select(this),te)})}}},97544:function(F,C,e){"use strict";var T=e(60876);F.exports={moduleType:"component",name:T.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(7316),w=e(24040),b=e(3400),f=b.strTranslate,s=e(43616),t=e(76308),i=e(72736),r=e(13448),n=e(84284).OPPOSITE_SIDE,o=/ [XY][0-9]* /;F.exports={draw:function(l,c,d){var u,x=d.propContainer,p=d.propName,g=d.placeholder,m=d.traceIndex,y=d.avoid||{},v=d.attributes,_=d.transform,h=d.containerGroup,S=l._fullLayout,A=1,E=!1,P=x.title,I=(P&&P.text?P.text:"").trim(),D=P&&P.font?P.font:{},z=D.family,V=D.size,O=D.color,j=D.weight,Y=D.style,B=D.variant,U=D.textcase,q=D.lineposition,te=D.shadow;p==="title.text"?u="titleText":p.indexOf("axis")!==-1?u="axisTitleText":p.indexOf(!0)&&(u="colorbarTitleText");var ee=l._context.edits[u];I===""?A=0:I.replace(o," % ")===g.replace(o," % ")&&(A=.2,E=!0,ee||(I="")),d._meta?I=b.templateString(I,d._meta):S._meta&&(I=b.templateString(I,S._meta));var Q,J=I||ee;h||(h=b.ensureSingle(S._infolayer,"g","g-"+c),Q=S._hColorbarMoveTitle);var K=h.selectAll("text").data(J?[0]:[]);if(K.enter().append("text"),K.text(I).attr("class",c),K.exit().remove(),!J)return h;function X(ae){b.syncOrAsync([ie,se],ae)}function ie(ae){var ue;return!_&&Q&&(_={}),_?(ue="",_.rotate&&(ue+="rotate("+[_.rotate,v.x,v.y]+")"),(_.offset||Q)&&(ue+=f(0,(_.offset||0)-(Q||0)))):ue=null,ae.attr("transform",ue),ae.style("opacity",A*t.opacity(O)).call(s.font,{color:t.rgb(O),size:T.round(V,2),family:z,weight:j,style:Y,variant:B,textcase:U,shadow:te,lineposition:q}).attr(v).call(i.convertToTspans,l),a.previousPromises(l)}function se(ae){var ue=T.select(ae.node().parentNode);if(y&&y.selection&&y.side&&I){ue.attr("transform",null);var ve=n[y.side],ye=y.side==="left"||y.side==="top"?-1:1,pe=k(y.pad)?y.pad:2,de=s.bBox(ue.node()),me={t:0,b:0,l:0,r:0},ke=l._fullLayout._reservedMargin;for(var Ce in ke)for(var ge in ke[Ce]){var oe=ke[Ce][ge];me[ge]=Math.max(me[ge],oe)}var re={left:me.l,top:me.t,right:S.width-me.r,bottom:S.height-me.b},fe=y.maxShift||ye*(re[y.side]-de[y.side]),Se=0;if(fe<0)Se=fe;else{var be=y.offsetLeft||0,we=y.offsetTop||0;de.left-=be,de.right-=be,de.top-=we,de.bottom-=we,y.selection.each(function(){var Pe=s.bBox(this);b.bBoxIntersect(de,Pe,pe)&&(Se=Math.max(Se,ye*(Pe[y.side]-de[ve])+pe))}),Se=Math.min(fe,Se),x._titleScoot=Math.abs(Se)}if(Se>0||fe<0){var Me={left:[-Se,0],right:[Se,0],top:[0,-Se],bottom:[0,Se]}[y.side];ue.attr("transform",f(Me[0],Me[1]))}}}return K.call(X),ee&&(I?K.on(".opacity",null):(A=0,E=!0,K.text(g).on("mouseover.opacity",function(){T.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){T.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),K.call(i.makeEditable,{gd:l}).on("edit",function(ae){m!==void 0?w.call("_guiRestyle",l,p,ae,m):w.call("_guiRelayout",l,p,ae)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(X)}).on("input",function(ae){this.text(ae||" ").call(i.positionText,v.x,v.y)})),K.classed("js-placeholder",E),h}}},88444:function(F,C,e){"use strict";var T=e(25376),k=e(22548),a=e(92880).extendFlat,w=e(67824).overrideAll,b=e(66741),f=e(31780).templatedArray,s=f("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});F.exports=w(f("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(b({editType:"arraydraw"}),{}),font:T({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(F){"use strict";F.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},91384:function(F,C,e){"use strict";var T=e(3400),k=e(51272),a=e(88444),w=e(73712).name,b=a.buttons;function f(t,i,r){function n(o,l){return T.coerce(t,i,a,o,l)}n("visible",k(t,i,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),T.noneOrAll(t,i,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),T.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(t,i){function r(n,o){return T.coerce(t,i,b,n,o)}r("visible",t.method==="skip"||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}F.exports=function(t,i){k(t,i,{name:w,handleItemDefaults:f})}},14420:function(F,C,e){"use strict";var T=e(33428),k=e(7316),a=e(76308),w=e(43616),b=e(3400),f=e(72736),s=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),r=e(37400);function n(A){return A._index}function o(A,E){return+A.attr(i.menuIndexAttrName)===E._index}function l(A,E,P,I,D,z,V,O){E.active=V,s(A.layout,i.name,E).applyUpdate("active",V),E.type==="buttons"?d(A,I,null,null,E):E.type==="dropdown"&&(D.attr(i.menuIndexAttrName,"-1"),c(A,I,D,z,E),O||d(A,I,D,z,E))}function c(A,E,P,I,D){var z=b.ensureSingle(E,"g",i.headerClassName,function(U){U.style("pointer-events","all")}),V=D._dims,O=D.active,j=D.buttons[O]||i.blankHeaderOpts,Y={y:D.pad.t,yPad:0,x:D.pad.l,xPad:0,index:0},B={width:V.headerWidth,height:V.headerHeight};z.call(u,D,j,A).call(h,D,Y,B),b.ensureSingle(E,"text",i.headerArrowClassName,function(U){U.attr("text-anchor","end").call(w.font,D.font).text(i.arrowSymbol[D.direction])}).attr({x:V.headerWidth-i.arrowOffsetX+D.pad.l,y:V.headerHeight/2+i.textOffsetY+D.pad.t}),z.on("click",function(){P.call(S,String(o(P,D)?-1:D._index)),d(A,E,P,I,D)}),z.on("mouseover",function(){z.call(m)}),z.on("mouseout",function(){z.call(y,D)}),w.setTranslate(E,V.lx,V.ly)}function d(A,E,P,I,D){P||(P=E).attr("pointer-events","all");var z=function(J){return+J.attr(i.menuIndexAttrName)==-1}(P)&&D.type!=="buttons"?[]:D.buttons,V=D.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,O=P.selectAll("g."+V).data(b.filterVisible(z)),j=O.enter().append("g").classed(V,!0),Y=O.exit();D.type==="dropdown"?(j.attr("opacity","0").transition().attr("opacity","1"),Y.transition().attr("opacity","0").remove()):Y.remove();var B=0,U=0,q=D._dims,te=["up","down"].indexOf(D.direction)!==-1;D.type==="dropdown"&&(te?U=q.headerHeight+i.gapButtonHeader:B=q.headerWidth+i.gapButtonHeader),D.type==="dropdown"&&D.direction==="up"&&(U=-i.gapButtonHeader+i.gapButton-q.openHeight),D.type==="dropdown"&&D.direction==="left"&&(B=-i.gapButtonHeader+i.gapButton-q.openWidth);var ee={x:q.lx+B+D.pad.l,y:q.ly+U+D.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},Q={l:ee.x+D.borderwidth,t:ee.y+D.borderwidth};O.each(function(J,K){var X=T.select(this);X.call(u,D,J,A).call(h,D,ee),X.on("click",function(){T.event.defaultPrevented||(J.execute&&(J.args2&&D.active===K?(l(A,D,0,E,P,I,-1),k.executeAPICommand(A,J.method,J.args2)):(l(A,D,0,E,P,I,K),k.executeAPICommand(A,J.method,J.args))),A.emit("plotly_buttonclicked",{menu:D,button:J,active:D.active}))}),X.on("mouseover",function(){X.call(m)}),X.on("mouseout",function(){X.call(y,D),O.call(g,D)})}),O.call(g,D),te?(Q.w=Math.max(q.openWidth,q.headerWidth),Q.h=ee.y-Q.t):(Q.w=ee.x-Q.l,Q.h=Math.max(q.openHeight,q.headerHeight)),Q.direction=D.direction,I&&(O.size()?function(J,K,X,ie,se,ae){var ue,ve,ye,pe=se.direction,de=pe==="up"||pe==="down",me=se._dims,ke=se.active;if(de)for(ve=0,ye=0;ye<ke;ye++)ve+=me.heights[ye]+i.gapButton;else for(ue=0,ye=0;ye<ke;ye++)ue+=me.widths[ye]+i.gapButton;ie.enable(ae,ue,ve),ie.hbar&&ie.hbar.attr("opacity","0").transition().attr("opacity","1"),ie.vbar&&ie.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,I,D,Q):function(J){var K=!!J.hbar,X=!!J.vbar;K&&J.hbar.transition().attr("opacity","0").each("end",function(){K=!1,X||J.disable()}),X&&J.vbar.transition().attr("opacity","0").each("end",function(){X=!1,K||J.disable()})}(I))}function u(A,E,P,I){A.call(x,E).call(p,E,P,I)}function x(A,E){b.ensureSingle(A,"rect",i.itemRectClassName,function(P){P.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(a.stroke,E.bordercolor).call(a.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function p(A,E,P,I){var D=b.ensureSingle(A,"text",i.itemTextClassName,function(O){O.attr({"text-anchor":"start","data-notex":1})}),z=P.label,V=I._fullLayout._meta;V&&(z=b.templateString(z,V)),D.call(w.font,E.font).text(z).call(f.convertToTspans,I)}function g(A,E){var P=E.active;A.each(function(I,D){var z=T.select(this);D===P&&E.showactive&&z.select("rect."+i.itemRectClassName).call(a.fill,i.activeColor)})}function m(A){A.select("rect."+i.itemRectClassName).call(a.fill,i.hoverColor)}function y(A,E){A.select("rect."+i.itemRectClassName).call(a.fill,E.bgcolor)}function v(A,E){var P=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},I=w.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));I.enter().append("g").classed(i.dropdownButtonClassName,!0);var D=["up","down"].indexOf(E.direction)!==-1;I.each(function(B,U){var q=T.select(this);q.call(u,E,B,A);var te=q.select("."+i.itemTextClassName),ee=te.node()&&w.bBox(te.node()).width,Q=Math.max(ee+i.textPadX,i.minWidth),J=E.font.size*t,K=f.lineCount(te),X=Math.max(J*K,i.minHeight)+i.textOffsetY;X=Math.ceil(X),Q=Math.ceil(Q),P.widths[U]=Q,P.heights[U]=X,P.height1=Math.max(P.height1,X),P.width1=Math.max(P.width1,Q),D?(P.totalWidth=Math.max(P.totalWidth,Q),P.openWidth=P.totalWidth,P.totalHeight+=X+i.gapButton,P.openHeight+=X+i.gapButton):(P.totalWidth+=Q+i.gapButton,P.openWidth+=Q+i.gapButton,P.totalHeight=Math.max(P.totalHeight,X),P.openHeight=P.totalHeight)}),D?P.totalHeight-=i.gapButton:P.totalWidth-=i.gapButton,P.headerWidth=P.width1+i.arrowPadX,P.headerHeight=P.height1,E.type==="dropdown"&&(D?(P.width1+=i.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=i.arrowPadX),I.remove();var z=P.totalWidth+E.pad.l+E.pad.r,V=P.totalHeight+E.pad.t+E.pad.b,O=A._fullLayout._size;P.lx=O.l+O.w*E.x,P.ly=O.t+O.h*(1-E.y);var j="left";b.isRightAnchor(E)&&(P.lx-=z,j="right"),b.isCenterAnchor(E)&&(P.lx-=z/2,j="center");var Y="top";b.isBottomAnchor(E)&&(P.ly-=V,Y="bottom"),b.isMiddleAnchor(E)&&(P.ly-=V/2,Y="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),k.autoMargin(A,_(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[j]||0),r:z*({left:1,center:.5}[j]||0),b:V*({top:1,middle:.5}[Y]||0),t:V*({bottom:1,middle:.5}[Y]||0)})}function _(A){return i.autoMarginIdRoot+A._index}function h(A,E,P,I){I=I||{};var D=A.select("."+i.itemRectClassName),z=A.select("."+i.itemTextClassName),V=E.borderwidth,O=P.index,j=E._dims;w.setTranslate(A,V+P.x,V+P.y);var Y=["up","down"].indexOf(E.direction)!==-1,B=I.height||(Y?j.heights[O]:j.height1);D.attr({x:0,y:0,width:I.width||(Y?j.width1:j.widths[O]),height:B});var U=E.font.size*t,q=(f.lineCount(z)-1)*U/2;f.positionText(z,i.textOffsetX,B/2-q+i.textOffsetY),Y?P.y+=j.heights[O]+P.yPad:P.x+=j.widths[O]+P.xPad,P.index++}function S(A,E){A.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}F.exports=function(A){var E=A._fullLayout,P=b.filterVisible(E[i.name]);function I(U){k.autoMargin(A,_(U))}var D=E._menulayer.selectAll("g."+i.containerClassName).data(P.length>0?[0]:[]);if(D.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),D.exit().each(function(){T.select(this).selectAll("g."+i.headerGroupClassName).each(I)}).remove(),P.length!==0){var z=D.selectAll("g."+i.headerGroupClassName).data(P,n);z.enter().append("g").classed(i.headerGroupClassName,!0);for(var V=b.ensureSingle(D,"g",i.dropdownButtonGroupClassName,function(U){U.style("pointer-events","all")}),O=0;O<P.length;O++){var j=P[O];v(A,j)}var Y="updatemenus"+E._uid,B=new r(A,V,Y);z.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(S)),z.exit().each(function(U){V.call(S),I(U)}).remove(),z.each(function(U){var q=T.select(this),te=U.type==="dropdown"?V:null;k.manageCommandObserver(A,U,U.buttons,function(ee){l(A,U,U.buttons[ee.index],q,te,B,ee.index,!0)}),U.type==="dropdown"?(c(A,q,V,B,U),o(V,U)&&d(A,q,V,B,U)):d(A,q,null,null,U)})}}},76908:function(F,C,e){"use strict";var T=e(73712);F.exports={moduleType:"component",name:T.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(F,C,e){"use strict";F.exports=b;var T=e(33428),k=e(76308),a=e(43616),w=e(3400);function b(f,s,t){this.gd=f,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(f,s,t){var i=this.gd._fullLayout,r=i.width,n=i.height;this.position=f;var o,l,c,d,u=this.position.l,x=this.position.w,p=this.position.t,g=this.position.h,m=this.position.direction,y=m==="down",v=m==="left",_=m==="up",h=x,S=g;y||v||m==="right"||_||(this.position.direction="down",y=!0),y||_?(l=(o=u)+h,y?(c=p,S=(d=Math.min(c+S,n))-c):S=(d=p+S)-(c=Math.max(d-S,0))):(d=(c=p)+S,v?h=(l=u+h)-(o=Math.max(l-h,0)):(o=u,h=(l=Math.min(o+h,r))-o)),this._box={l:o,t:c,w:h,h:S};var A=x>h,E=b.barLength+2*b.barPad,P=b.barWidth+2*b.barPad,I=u,D=p+g;D+P>n&&(D=n-P);var z=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),A?(this.hbar=z.attr({rx:b.barRadius,ry:b.barRadius,x:I,y:D,width:E,height:P}),this._hbarXMin=I+E/2,this._hbarTranslateMax=h-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var V=g>S,O=b.barWidth+2*b.barPad,j=b.barLength+2*b.barPad,Y=u+x,B=p;Y+O>r&&(Y=r-O);var U=this.container.selectAll("rect.scrollbar-vertical").data(V?[0]:[]);U.exit().on(".drag",null).remove(),U.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),V?(this.vbar=U.attr({rx:b.barRadius,ry:b.barRadius,x:Y,y:B,width:O,height:j}),this._vbarYMin=B+j/2,this._vbarTranslateMax=S-j):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,te=o-.5,ee=V?l+O+.5:l+.5,Q=c-.5,J=A?d+P+.5:d+.5,K=i._topdefs.selectAll("#"+q).data(A||V?[0]:[]);if(K.exit().remove(),K.enter().append("clipPath").attr("id",q).append("rect"),A||V?(this._clipRect=K.select("rect").attr({x:Math.floor(te),y:Math.floor(Q),width:Math.ceil(ee)-Math.floor(te),height:Math.ceil(J)-Math.floor(Q)}),this.container.call(a.setClipUrl,q,this.gd),this.bg.attr({x:u,y:p,width:x,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),A||V){var X=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(X);var ie=T.behavior.drag().on("dragstart",function(){T.event.sourceEvent.preventDefault(),T.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));A&&this.hbar.on(".drag",null).call(ie),V&&this.vbar.on(".drag",null).call(ie)}this.setTranslate(s,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var f=this.translateX,s=this.translateY;this.hbar&&(f-=T.event.dx),this.vbar&&(s-=T.event.dy),this.setTranslate(f,s)},b.prototype._onBoxWheel=function(){var f=this.translateX,s=this.translateY;this.hbar&&(f+=T.event.deltaY),this.vbar&&(s+=T.event.deltaY),this.setTranslate(f,s)},b.prototype._onBarDrag=function(){var f=this.translateX,s=this.translateY;if(this.hbar){var t=f+this._hbarXMin,i=t+this._hbarTranslateMax;f=(w.constrain(T.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(w.constrain(T.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(f,s)},b.prototype.setTranslate=function(f,s){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(f=w.constrain(f||0,0,t),s=w.constrain(s||0,0,i),this.translateX=f,this.translateY=s,this.container.call(a.setTranslate,this._box.l-this.position.l-f,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+f-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var r=f/t;this.hbar.call(a.setTranslate,f+r*this._hbarTranslateMax,s)}if(this.vbar){var n=s/i;this.vbar.call(a.setTranslate,f,s+n*this._vbarTranslateMax)}}},84284:function(F){"use strict";F.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(F){"use strict";F.exports={axisRefDescription:function(C,e,T){return["If set to a",C,"axis id (e.g. *"+C+"* or","*"+C+"2*), the `"+C+"` position refers to a",C,"coordinate. If set to *paper*, the `"+C+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+T+"). If set to a",C,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+C+"2 domain* refers to the domain of the second",C," axis and a",C,"position of 0.5 refers to the","point between the",e,"and the",T,"of the domain of the","second",C,"axis."].join(" ")}}},48164:function(F){"use strict";F.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},26880:function(F){"use strict";F.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(F){"use strict";F.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(F){"use strict";F.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(F){"use strict";F.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},13448:function(F){"use strict";F.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(F){"use strict";F.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(F,C){"use strict";C.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],C.STYLE=C.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(F,C){"use strict";C.xmlns="http://www.w3.org/2000/xmlns/",C.svg="http://www.w3.org/2000/svg",C.xlink="http://www.w3.org/1999/xlink",C.svgAttrs={xmlns:C.svg,"xmlns:xlink":C.xlink}},64884:function(F,C,e){"use strict";C.version=e(25788).version,e(88324),e(79288);for(var T=e(24040),k=C.register=T.register,a=e(22448),w=Object.keys(a),b=0;b<w.length;b++){var f=w[b];f.charAt(0)!=="_"&&(C[f]=a[f]),k({moduleType:"apiMethod",name:f,fn:a[f]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),C.Icons=e(9224);var s=e(93024),t=e(7316);C.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},C.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},C.Snapshot=e(78904),C.PlotSchema=e(73060)},9224:function(F){"use strict";F.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(F,C){"use strict";C.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},C.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},C.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},C.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},C.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},C.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(F,C,e){"use strict";var T=e(20435),k=T.mod,a=T.modHalf,w=Math.PI,b=2*w;function f(r){return Math.abs(r[1]-r[0])>b-1e-14}function s(r,n){return a(n-r,b)}function t(r,n){if(f(n))return!0;var o,l;n[0]<n[1]?(o=n[0],l=n[1]):(o=n[1],l=n[0]),(o=k(o,b))>(l=k(l,b))&&(l+=b);var c=k(r,b),d=c+b;return c>=o&&c<=l||d>=o&&d<=l}function i(r,n,o,l,c,d,u){c=c||0,d=d||0;var x,p,g,m,y,v=f([o,l]);function _(E,P){return[E*Math.cos(P)+c,d-E*Math.sin(P)]}v?(x=0,p=w,g=b):o<l?(x=o,g=l):(x=l,g=o),r<n?(m=r,y=n):(m=n,y=r);var h,S=Math.abs(g-x)<=w?0:1;function A(E,P,I){return"A"+[E,E]+" "+[0,S,I]+" "+_(E,P)}return v?h=m===null?"M"+_(y,x)+A(y,p,0)+A(y,g,0)+"Z":"M"+_(m,x)+A(m,p,0)+A(m,g,0)+"ZM"+_(y,x)+A(y,p,1)+A(y,g,1)+"Z":m===null?(h="M"+_(y,x)+A(y,g,0),u&&(h+="L0,0Z")):h="M"+_(m,x)+"L"+_(y,x)+A(y,g,0)+"L"+_(m,g)+A(m,x,1)+"Z",h}F.exports={deg2rad:function(r){return r/180*w},rad2deg:function(r){return r/w*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:f,isAngleInsideSector:t,isPtInsideSector:function(r,n,o,l){return!!t(n,l)&&(o[0]<o[1]?(c=o[0],d=o[1]):(c=o[1],d=o[0]),r>=c&&r<=d);var c,d},pathArc:function(r,n,o,l,c){return i(null,r,n,o,l,c,0)},pathSector:function(r,n,o,l,c){return i(null,r,n,o,l,c,1)},pathAnnulus:function(r,n,o,l,c,d){return i(r,n,o,l,c,d,1)}}},38116:function(F,C,e){"use strict";var T=e(83160).decode,k=e(63620),a=Array.isArray,w=ArrayBuffer,b=DataView;function f(n){return w.isView(n)&&!(n instanceof b)}function s(n){return a(n)||f(n)}C.isTypedArray=f,C.isArrayOrTypedArray=s,C.isArray1D=function(n){return!s(n[0])},C.ensureArray=function(n,o){return a(n)||(n=[]),n.length=o,n};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function i(n){return n.constructor===ArrayBuffer}function r(n,o,l){if(s(n)){if(s(n[0])){for(var c=l,d=0;d<n.length;d++)c=o(c,n[d].length);return c}return n.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,C.isArrayBuffer=i,C.decodeTypedArraySpec=function(n){var o=[],l=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(n),c=l.dtype,d=t[c];if(!d)throw new Error('Error in dtype: "'+c+'"');var u=d.BYTES_PER_ELEMENT,x=l.bdata;i(x)||(x=T(x));var p=l.shape===void 0?[x.byteLength/u]:(""+l.shape).split(",");p.reverse();var g,m,y=p.length,v=+p[0],_=u*v,h=0;if(y===1)o=new d(x);else if(y===2)for(g=+p[1],m=0;m<g;m++)o[m]=new d(x,h,v),h+=_;else{if(y!==3)throw new Error("ndim: "+y+'is not supported with the shape:"'+l.shape+'"');g=+p[1];for(var S=+p[2],A=0;A<S;A++)for(o[A]=[],m=0;m<g;m++)o[A][m]=new d(x,h,v),h+=_}return o.bdata=l.bdata,o.dtype=l.dtype,o.shape=p.reverse().join(","),n._inputArray=o,o},C.isTypedArraySpec=function(n){return k(n)&&n.hasOwnProperty("dtype")&&typeof n.dtype=="string"&&n.hasOwnProperty("bdata")&&(typeof n.bdata=="string"||i(n.bdata))&&(n.shape===void 0||n.hasOwnProperty("shape")&&(typeof n.shape=="string"||typeof n.shape=="number"))},C.concat=function(){var n,o,l,c,d,u,x,p,g=[],m=!0,y=0;for(l=0;l<arguments.length;l++)(u=(c=arguments[l]).length)&&(o?g.push(c):(o=c,d=u),a(c)?n=!1:(m=!1,y?n!==c.constructor&&(n=!1):n=c.constructor),y+=u);if(!y)return[];if(!g.length)return o;if(m)return o.concat.apply(o,g);if(n){for((x=new n(y)).set(o),l=0;l<g.length;l++)c=g[l],x.set(c,d),d+=c.length;return x}for(x=new Array(y),p=0;p<o.length;p++)x[p]=o[p];for(l=0;l<g.length;l++){for(c=g[l],p=0;p<c.length;p++)x[d+p]=c[p];d+=p}return x},C.maxRowLength=function(n){return r(n,Math.max,0)},C.minRowLength=function(n){return r(n,Math.min,1/0)}},54037:function(F,C,e){"use strict";var T=e(38248),k=e(39032).BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;F.exports=function(w){return typeof w=="string"&&(w=w.replace(a,"")),T(w)?Number(w):k}},73696:function(F){"use strict";F.exports=function(C){var e=C._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},75352:function(F){"use strict";F.exports=function(C){C._responsiveChartHandler&&(window.removeEventListener("resize",C._responsiveChartHandler),delete C._responsiveChartHandler)}},63064:function(F,C,e){"use strict";var T=e(38248),k=e(49760),a=e(92880).extendFlat,w=e(45464),b=e(88304),f=e(76308),s=e(13448).DESELECTDIM,t=e(22296),i=e(53756).counter,r=e(20435).modHalf,n=e(38116).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,l=e(38116).decodeTypedArraySpec;function c(d,u){var x=C.valObjectMeta[u.valType];if(u.arrayOk&&n(d))return!0;if(x.validateFunction)return x.validateFunction(d,u);var p={},g=p,m={set:function(y){g=y}};return x.coerceFunction(d,m,p,u),g!==p}C.valObjectMeta={data_array:{coerceFunction:function(d,u,x){u.set(n(d)?d:o(d)?l(d):x)}},enumerated:{coerceFunction:function(d,u,x,p){p.coerceNumber&&(d=+d),p.values.indexOf(d)===-1?u.set(x):u.set(d)},validateFunction:function(d,u){u.coerceNumber&&(d=+d);for(var x=u.values,p=0;p<x.length;p++){var g=String(x[p]);if(g.charAt(0)==="/"&&g.charAt(g.length-1)==="/"){if(new RegExp(g.substr(1,g.length-2)).test(d))return!0}else if(d===x[p])return!0}return!1}},boolean:{coerceFunction:function(d,u,x){d===!0||d===!1?u.set(d):u.set(x)}},number:{coerceFunction:function(d,u,x,p){o(d)&&(d=l(d)),!T(d)||p.min!==void 0&&d<p.min||p.max!==void 0&&d>p.max?u.set(x):u.set(+d)}},integer:{coerceFunction:function(d,u,x,p){(p.extras||[]).indexOf(d)===-1?(o(d)&&(d=l(d)),d%1||!T(d)||p.min!==void 0&&d<p.min||p.max!==void 0&&d>p.max?u.set(x):u.set(+d)):u.set(d)}},string:{coerceFunction:function(d,u,x,p){if(typeof d!="string"){var g=typeof d=="number";p.strict!==!0&&g?u.set(String(d)):u.set(x)}else p.noBlank&&!d?u.set(x):u.set(d)}},color:{coerceFunction:function(d,u,x){o(d)&&(d=l(d)),k(d).isValid()?u.set(d):u.set(x)}},colorlist:{coerceFunction:function(d,u,x){Array.isArray(d)&&d.length&&d.every(function(p){return k(p).isValid()})?u.set(d):u.set(x)}},colorscale:{coerceFunction:function(d,u,x){u.set(b.get(d,x))}},angle:{coerceFunction:function(d,u,x){o(d)&&(d=l(d)),d==="auto"?u.set("auto"):T(d)?u.set(r(+d,360)):u.set(x)}},subplotid:{coerceFunction:function(d,u,x,p){var g=p.regex||i(x);typeof d=="string"&&g.test(d)?u.set(d):u.set(x)},validateFunction:function(d,u){var x=u.dflt;return d===x||typeof d=="string"&&!!i(x).test(d)}},flaglist:{coerceFunction:function(d,u,x,p){if((p.extras||[]).indexOf(d)===-1)if(typeof d=="string"){for(var g=d.split("+"),m=0;m<g.length;){var y=g[m];p.flags.indexOf(y)===-1||g.indexOf(y)<m?g.splice(m,1):m++}g.length?u.set(g.join("+")):u.set(x)}else u.set(x);else u.set(d)}},any:{coerceFunction:function(d,u,x){d===void 0?u.set(x):u.set(o(d)?l(d):d)}},info_array:{coerceFunction:function(d,u,x,p){function g(O,j,Y){var B,U={set:function(q){B=q}};return Y===void 0&&(Y=j.dflt),C.valObjectMeta[j.valType].coerceFunction(O,U,Y,j),B}if(o(d)&&(d=l(d)),n(d)){var m,y,v,_,h,S,A=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(d)&&n(d[0]),E=p.items,P=[],I=Array.isArray(E),D=I&&A&&n(E[0]),z=A&&I&&!D,V=I&&!z?E.length:d.length;if(x=Array.isArray(x)?x:[],A)for(m=0;m<V;m++)for(P[m]=[],v=n(d[m])?d[m]:[],h=z?E.length:I?E[m].length:v.length,y=0;y<h;y++)_=z?E[y]:I?E[m][y]:E,(S=g(v[y],_,(x[m]||[])[y]))!==void 0&&(P[m][y]=S);else for(m=0;m<V;m++)(S=g(d[m],I?E[m]:E,x[m]))!==void 0&&(P[m]=S);u.set(P)}else u.set(x)},validateFunction:function(d,u){if(!n(d))return!1;var x=u.items,p=Array.isArray(x),g=u.dimensions===2;if(!u.freeLength&&d.length!==x.length)return!1;for(var m=0;m<d.length;m++)if(g){if(!n(d[m])||!u.freeLength&&d[m].length!==x[m].length)return!1;for(var y=0;y<d[m].length;y++)if(!c(d[m][y],p?x[m][y]:x))return!1}else if(!c(d[m],p?x[m]:x))return!1;return!0}}},C.coerce=function(d,u,x,p,g){var m=t(x,p).get(),y=t(d,p),v=t(u,p),_=y.get(),h=u._template;if(_===void 0&&h&&(_=t(h,p).get(),h=0),g===void 0&&(g=m.dflt),m.arrayOk){if(n(_))return v.set(_),_;if(o(_))return _=l(_),v.set(_),_}var S=C.valObjectMeta[m.valType].coerceFunction;S(_,v,g,m);var A=v.get();return h&&A===g&&!c(_,m)&&(S(_=t(h,p).get(),v,g,m),A=v.get()),A},C.coerce2=function(d,u,x,p,g){var m=t(d,p),y=C.coerce(d,u,x,p,g);return m.get()!=null&&y},C.coerceFont=function(d,u,x,p){p||(p={}),x=a({},x);var g={family:d(u+".family",(x=a(x,p.overrideDflt||{})).family),size:d(u+".size",x.size),color:d(u+".color",x.color),weight:d(u+".weight",x.weight),style:d(u+".style",x.style)};if(p.noFontVariant||(g.variant=d(u+".variant",x.variant)),p.noFontLineposition||(g.lineposition=d(u+".lineposition",x.lineposition)),p.noFontTextcase||(g.textcase=d(u+".textcase",x.textcase)),!p.noFontShadow){var m=x.shadow;m==="none"&&p.autoShadowDflt&&(m="auto"),g.shadow=d(u+".shadow",m)}return g},C.coercePattern=function(d,u,x,p){if(d(u+".shape")){d(u+".solidity"),d(u+".size");var g=d(u+".fillmode")==="overlay";if(!p){var m=d(u+".bgcolor",g?x:void 0);d(u+".fgcolor",g?f.contrast(m):x)}d(u+".fgopacity",g?.5:1)}},C.coerceHoverinfo=function(d,u,x){var p,g=u._module.attributes,m=g.hoverinfo?g:w,y=m.hoverinfo;if(x._dataLength===1){var v=y.dflt==="all"?y.flags.slice():y.dflt.split("+");v.splice(v.indexOf("name"),1),p=v.join("+")}return C.coerce(d,u,m,"hoverinfo",p)},C.coerceSelectionMarkerOpacity=function(d,u){if(d.marker){var x,p,g=d.marker.opacity;g!==void 0&&(n(g)||d.selected||d.unselected||(x=g,p=s*g),u("selected.marker.opacity",x),u("unselected.marker.opacity",p))}},C.validate=c},67555:function(F,C,e){"use strict";var T,k,a=e(94336).Yn,w=e(38248),b=e(24248),f=e(20435).mod,s=e(39032),t=s.BADNUM,i=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,o=s.ONESEC,l=s.EPOCHJD,c=e(24040),d=e(94336).E9,u=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=new Date().getFullYear()-70;function g(z){return z&&c.componentsRegistry.calendars&&typeof z=="string"&&z!=="gregorian"}function m(z,V){return String(z+Math.pow(10,V)).substr(1)}C.dateTick0=function(z,V){var O=function(Y,B){return g(Y)?B?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[Y]:c.getComponentMethod("calendars","CANONICAL_TICK")[Y]:B?"2000-01-02":"2000-01-01"}(z,!!V);if(V<2)return O;var j=C.dateTime2ms(O,z);return j+=i*(V-1),C.ms2DateTime(j,0,z)},C.dfltRange=function(z){return g(z)?c.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},C.isJSDate=function(z){return typeof z=="object"&&z!==null&&typeof z.getTime=="function"},C.dateTime2ms=function(z,V){if(C.isJSDate(z)){var O=z.getTimezoneOffset()*n,j=(z.getUTCMinutes()-z.getMinutes())*n+(z.getUTCSeconds()-z.getSeconds())*o+(z.getUTCMilliseconds()-z.getMilliseconds());if(j){var Y=3*n;O=O-Y/2+f(j-O+Y/2,Y)}return(z=Number(z)-O)>=T&&z<=k?z:t}if(typeof z!="string"&&typeof z!="number")return t;z=String(z);var B=g(V),U=z.charAt(0);!B||U!=="G"&&U!=="g"||(z=z.substr(1),V="");var q=B&&V.substr(0,7)==="chinese",te=z.match(q?x:u);if(!te)return t;var ee=te[1],Q=te[3]||"1",J=Number(te[5]||1),K=Number(te[7]||0),X=Number(te[9]||0),ie=Number(te[11]||0);if(B){if(ee.length===2)return t;var se;ee=Number(ee);try{var ae=c.getComponentMethod("calendars","getCal")(V);if(q){var ue=Q.charAt(Q.length-1)==="i";Q=parseInt(Q,10),se=ae.newDate(ee,ae.toMonthIndex(ee,Q,ue),J)}else se=ae.newDate(ee,Number(Q),J)}catch{return t}return se?(se.toJD()-l)*i+K*r+X*n+ie*o:t}ee=ee.length===2?(Number(ee)+2e3-p)%100+p:Number(ee),Q-=1;var ve=new Date(Date.UTC(2e3,Q,J,K,X));return ve.setUTCFullYear(ee),ve.getUTCMonth()!==Q||ve.getUTCDate()!==J?t:ve.getTime()+ie*o},T=C.MIN_MS=C.dateTime2ms("-9999"),k=C.MAX_MS=C.dateTime2ms("9999-12-31 23:59:59.9999"),C.isDateTime=function(z,V){return C.dateTime2ms(z,V)!==t};var y=90*i,v=3*r,_=5*n;function h(z,V,O,j,Y){if((V||O||j||Y)&&(z+=" "+m(V,2)+":"+m(O,2),(j||Y)&&(z+=":"+m(j,2),Y))){for(var B=4;Y%10==0;)B-=1,Y/=10;z+="."+m(Y,B)}return z}C.ms2DateTime=function(z,V,O){if(typeof z!="number"||!(z>=T&&z<=k))return t;V||(V=0);var j,Y,B,U,q,te,ee=Math.floor(10*f(z+.05,1)),Q=Math.round(z-ee/10);if(g(O)){var J=Math.floor(Q/i)+l,K=Math.floor(f(z,i));try{j=c.getComponentMethod("calendars","getCal")(O).fromJD(J).formatDate("yyyy-mm-dd")}catch{j=d("G%Y-%m-%d")(new Date(Q))}if(j.charAt(0)==="-")for(;j.length<11;)j="-0"+j.substr(1);else for(;j.length<10;)j="0"+j;Y=V<y?Math.floor(K/r):0,B=V<y?Math.floor(K%r/n):0,U=V<v?Math.floor(K%n/o):0,q=V<_?K%o*10+ee:0}else te=new Date(Q),j=d("%Y-%m-%d")(te),Y=V<y?te.getUTCHours():0,B=V<y?te.getUTCMinutes():0,U=V<v?te.getUTCSeconds():0,q=V<_?10*te.getUTCMilliseconds()+ee:0;return h(j,Y,B,U,q)},C.ms2DateTimeLocal=function(z){if(!(z>=T+i&&z<=k-i))return t;var V=Math.floor(10*f(z+.05,1)),O=new Date(Math.round(z-V/10));return h(a("%Y-%m-%d")(O),O.getHours(),O.getMinutes(),O.getSeconds(),10*O.getUTCMilliseconds()+V)},C.cleanDate=function(z,V,O){if(z===t)return V;if(C.isJSDate(z)||typeof z=="number"&&isFinite(z)){if(g(O))return b.error("JS Dates and milliseconds are incompatible with world calendars",z),V;if(!(z=C.ms2DateTimeLocal(+z))&&V!==void 0)return V}else if(!C.isDateTime(z,O))return b.error("unrecognized date",z),V;return z};var S=/%\d?f/g,A=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function P(z,V,O,j){z=z.replace(S,function(B){var U=Math.min(+B.charAt(1)||6,6);return(V/1e3%1+2).toFixed(U).substr(2).replace(/0+$/,"")||"0"});var Y=new Date(Math.floor(V+.05));if(z=z.replace(A,function(){return E[O("%q")(Y)]}),g(j))try{z=c.getComponentMethod("calendars","worldCalFmt")(z,V,j)}catch{return"Invalid"}return O(z)(Y)}var I=[59,59.9,59.99,59.999,59.9999];C.formatDate=function(z,V,O,j,Y,B){if(Y=g(Y)&&Y,!V)if(O==="y")V=B.year;else if(O==="m")V=B.month;else{if(O!=="d")return function(U,q){var te=f(U+.05,i),ee=m(Math.floor(te/r),2)+":"+m(f(Math.floor(te/n),60),2);if(q!=="M"){w(q)||(q=0);var Q=(100+Math.min(f(U/o,60),I[q])).toFixed(q).substr(1);q>0&&(Q=Q.replace(/0+$/,"").replace(/[\.]$/,"")),ee+=":"+Q}return ee}(z,O)+`
`+P(B.dayMonthYear,z,j,Y);V=B.dayMonth+`
`+B.year}return P(V,z,j,Y)};var D=3*i;C.incrementMonth=function(z,V,O){O=g(O)&&O;var j=f(z,i);if(z=Math.round(z-j),O)try{var Y=Math.round(z/i)+l,B=c.getComponentMethod("calendars","getCal")(O),U=B.fromJD(Y);return V%12?B.add(U,V,"m"):B.add(U,V/12,"y"),(U.toJD()-l)*i+j}catch{b.error("invalid ms "+z+" in calendar "+O)}var q=new Date(z+D);return q.setUTCMonth(q.getUTCMonth()+V)+j-D},C.findExactDates=function(z,V){for(var O,j,Y=0,B=0,U=0,q=0,te=g(V)&&c.getComponentMethod("calendars","getCal")(V),ee=0;ee<z.length;ee++)if(j=z[ee],w(j)){if(!(j%i))if(te)try{(O=te.fromJD(j/i+l)).day()===1?O.month()===1?Y++:B++:U++}catch{}else(O=new Date(j)).getUTCDate()===1?O.getUTCMonth()===0?Y++:B++:U++}else q++;U+=B+=Y;var Q=z.length-q;return{exactYears:Y/Q,exactMonths:B/Q,exactDays:U/Q}}},52200:function(F,C,e){"use strict";var T=e(33428),k=e(24248),a=e(52248),w=e(36524);function b(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function f(r,n,o){var l="plotly.js-style-"+r,c=document.getElementById(l);c||((c=document.createElement("style")).setAttribute("id",l),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var d=c.sheet;d.insertRule?d.insertRule(n+"{"+o+"}",0):d.addRule?d.addRule(n,o,0):k.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),o=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return o==="none"?null:o.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(r){for(var n=[];i(r);)n.push(r),r=r.parentNode,typeof ShadowRoot=="function"&&r instanceof ShadowRoot&&(r=r.host);return n}function i(r){return r&&(r instanceof Element||r instanceof HTMLElement)}F.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=T.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(r,n){f("global",r,n)},addRelatedStyleRule:f,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,o=document.getElementById(n);o&&b(o)},getFullTransformMatrix:function(r){var n=t(r),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(l){var c=s(l);if(c){var d=a.convertCssMatrix(c);o=w.multiply(o,o,d)}}),o},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},95924:function(F,C,e){"use strict";var T=e(61252).EventEmitter,k={init:function(a){if(a._ev instanceof T)return a;var w=new T,b=new T;return a._ev=w,a._internalEv=b,a.on=w.on.bind(w),a.once=w.once.bind(w),a.removeListener=w.removeListener.bind(w),a.removeAllListeners=w.removeAllListeners.bind(w),a._internalOn=b.on.bind(b),a._internalOnce=b.once.bind(b),a._removeInternalListener=b.removeListener.bind(b),a._removeAllInternalListeners=b.removeAllListeners.bind(b),a.emit=function(f,s){typeof jQuery<"u"&&jQuery(a).trigger(f,s),w.emit(f,s),b.emit(f,s)},a},triggerHandler:function(a,w,b){var f,s;typeof jQuery<"u"&&(f=jQuery(a).triggerHandler(w,b));var t=a._ev;if(!t)return f;var i,r=t._events[w];if(!r)return f;function n(o){return o.listener?(t.removeListener(w,o.listener),o.fired?void 0:(o.fired=!0,o.listener.apply(t,[b]))):o.apply(t,[b])}for(r=Array.isArray(r)?r:[r],i=0;i<r.length-1;i++)n(r[i]);return s=n(r[i]),f!==void 0?f:s},purge:function(a){return delete a._ev,delete a.on,delete a.once,delete a.removeListener,delete a.removeAllListeners,delete a.emit,delete a._ev,delete a._internalEv,delete a._internalOn,delete a._internalOnce,delete a._removeInternalListener,delete a._removeAllInternalListeners,a}};F.exports=k},92880:function(F,C,e){"use strict";var T=e(63620),k=Array.isArray;function a(w,b,f,s){var t,i,r,n,o,l,c,d=w[0],u=w.length;if(u===2&&k(d)&&k(w[1])&&d.length===0){if(c=function(p,g){var m,y;for(m=0;m<p.length;m++){if((y=p[m])!==null&&typeof y=="object")return!1;y!==void 0&&(g[m]=y)}return!0}(w[1],d),c)return d;d.splice(0,d.length)}for(var x=1;x<u;x++)for(i in t=w[x])r=d[i],n=t[i],s&&k(n)?d[i]=n:b&&n&&(T(n)||(o=k(n)))?(o?(o=!1,l=r&&k(r)?r:[]):l=r&&T(r)?r:{},d[i]=a([l,n],b,f,s)):(n!==void 0||f)&&(d[i]=n);return d}C.extendFlat=function(){return a(arguments,!1,!1,!1)},C.extendDeep=function(){return a(arguments,!0,!1,!1)},C.extendDeepAll=function(){return a(arguments,!0,!0,!1)},C.extendDeepNoArrays=function(){return a(arguments,!0,!1,!0)}},68944:function(F){"use strict";F.exports=function(C){for(var e={},T=[],k=0,a=0;a<C.length;a++){var w=C[a];e[w]!==1&&(e[w]=1,T[k++]=w)}return T}},43880:function(F){"use strict";function C(T){return T.visible===!0}function e(T){var k=T[0].trace;return k.visible===!0&&k._length!==0}F.exports=function(T){for(var k,a=(k=T,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:C),w=[],b=0;b<T.length;b++){var f=T[b];a(f)&&w.push(f)}return w}},27144:function(F,C,e){"use strict";var T=e(33428),k=e(36116),a=e(40440),w=e(77844),b=e(42428),f=e(35536),s=e(24248),t=e(63620),i=e(22296),r=e(92065),n=Object.keys(k),o={"ISO-3":f,"USA-states":f,"country names":function(c){for(var d=0;d<n.length;d++){var u=n[d];if(new RegExp(k[u]).test(c.trim().toLowerCase()))return u}return s.log("Unrecognized country name: "+c+"."),!1}};function l(c){var d=c.geojson,u=window.PlotlyGeoAssets||{},x=typeof d=="string"?u[d]:d;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+d),!1)}F.exports={locationToFeature:function(c,d,u){if(!d||typeof d!="string")return!1;var x,p,g,m=o[c](d);if(m){if(c==="USA-states")for(x=[],g=0;g<u.length;g++)(p=u[g]).properties&&p.properties.gu&&p.properties.gu==="USA"&&x.push(p);else x=u;for(g=0;g<x.length;g++)if((p=x[g]).id===m)return p;s.log(["Location with id",m,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var d,u,x,p,g=c.geometry,m=g.coordinates,y=c.id,v=[];function _(h){for(var S=0;S<h.length-1;S++)if(h[S][0]>0&&h[S+1][0]<0)return S;return null}switch(d=y==="RUS"||y==="FJI"?function(h){var S;if(_(h)===null)S=h;else for(S=new Array(h.length),p=0;p<h.length;p++)S[p]=[h[p][0]<0?h[p][0]+360:h[p][0],h[p][1]];v.push(r.tester(S))}:y==="ATA"?function(h){var S=_(h);if(S===null)return v.push(r.tester(h));var A=new Array(h.length+1),E=0;for(p=0;p<h.length;p++)p>S?A[E++]=[h[p][0]+360,h[p][1]]:p===S?(A[E++]=h[p],A[E++]=[h[p][0],-90]):A[E++]=h[p];var P=r.tester(A);P.pts.pop(),v.push(P)}:function(h){v.push(r.tester(h))},g.type){case"MultiPolygon":for(u=0;u<m.length;u++)for(x=0;x<m[u].length;x++)d(m[u][x]);break;case"Polygon":for(u=0;u<m.length;u++)d(m[u])}return v},getTraceGeojson:l,extractTraceFeature:function(c){var d=c[0].trace,u=l(d);if(!u)return!1;var x,p={},g=[];for(x=0;x<d._length;x++){var m=c[x];(m.loc||m.loc===0)&&(p[m.loc]=m)}function y(h){var S=i(h,d.featureidkey||"id").get(),A=p[S];if(A){var E=h.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var P={type:"Feature",id:S,geometry:E,properties:{}};P.properties.ct=function(I){var D,z=I.geometry;if(z.type==="MultiPolygon")for(var V=z.coordinates,O=0,j=0;j<V.length;j++){var Y={type:"Polygon",coordinates:V[j]},B=a.default(Y);B>O&&(O=B,D=Y)}else D=z;return w.default(D).geometry.coordinates}(P),A.fIn=h,A.fOut=P,g.push(P)}else s.log(["Location",A.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete p[S]}switch(u.type){case"FeatureCollection":var v=u.features;for(x=0;x<v.length;x++)y(v[x]);break;case"Feature":y(u);break;default:return s.warn(["Invalid GeoJSON type",(u.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in p)s.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+d.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(c){var d=window.PlotlyGeoAssets||{},u=[];function x(y){return new Promise(function(v,_){T.json(y,function(h,S){if(h){delete d[y];var A=h.status===404?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y;return _(new Error(A))}return d[y]=S,v(S)})})}function p(y){return new Promise(function(v,_){var h=0,S=setInterval(function(){return d[y]&&d[y]!=="pending"?(clearInterval(S),v(d[y])):h>100?(clearInterval(S),_("Unexpected error while fetching from "+y)):void h++},50)})}for(var g=0;g<c.length;g++){var m=c[g][0].trace.geojson;typeof m=="string"&&(d[m]?d[m]==="pending"&&u.push(p(m)):(d[m]="pending",u.push(x(m))))}return u},computeBbox:function(c){return b.default(c)}}},44808:function(F,C,e){"use strict";var T=e(39032).BADNUM;C.calcTraceToLineCoords=function(k){for(var a=k[0].trace.connectgaps,w=[],b=[],f=0;f<k.length;f++){var s=k[f].lonlat;s[0]!==T?b.push(s):!a&&b.length>0&&(w.push(b),b=[])}return b.length>0&&w.push(b),w},C.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},C.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var a=new Array(k.length),w=0;w<k.length;w++)a[w]=[k[w]];return{type:"MultiPolygon",coordinates:a}},C.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(F,C,e){"use strict";var T,k,a,w=e(20435).mod;function b(s,t,i,r,n,o,l,c){var d=i-s,u=n-s,x=l-n,p=r-t,g=o-t,m=c-o,y=d*m-x*p;if(y===0)return null;var v=(u*m-x*g)/y,_=(u*p-d*g)/y;return _<0||_>1||v<0||v>1?null:{x:s+d*v,y:t+p*v}}function f(s,t,i,r,n){var o=r*s+n*t;if(o<0)return r*r+n*n;if(o>i){var l=r-s,c=n-t;return l*l+c*c}var d=r*t-n*s;return d*d/i}C.segmentsIntersect=b,C.segmentDistance=function(s,t,i,r,n,o,l,c){if(b(s,t,i,r,n,o,l,c))return 0;var d=i-s,u=r-t,x=l-n,p=c-o,g=d*d+u*u,m=x*x+p*p,y=Math.min(f(d,u,g,n-s,o-t),f(d,u,g,l-s,c-t),f(x,p,m,s-n,t-o),f(x,p,m,i-n,r-o));return Math.sqrt(y)},C.getTextLocation=function(s,t,i,r){if(s===k&&r===a||(T={},k=s,a=r),T[i])return T[i];var n=s.getPointAtLength(w(i-r/2,t)),o=s.getPointAtLength(w(i+r/2,t)),l=Math.atan((o.y-n.y)/(o.x-n.x)),c=s.getPointAtLength(w(i,t)),d={x:(4*c.x+n.x+o.x)/6,y:(4*c.y+n.y+o.y)/6,theta:l};return T[i]=d,d},C.clearLocationCache=function(){k=null},C.getVisibleSegment=function(s,t,i){var r,n,o=t.left,l=t.right,c=t.top,d=t.bottom,u=0,x=s.getTotalLength(),p=x;function g(y){var v=s.getPointAtLength(y);y===0?r=v:y===x&&(n=v);var _=v.x<o?o-v.x:v.x>l?v.x-l:0,h=v.y<c?c-v.y:v.y>d?v.y-d:0;return Math.sqrt(_*_+h*h)}for(var m=g(u);m;){if((u+=m+i)>p)return;m=g(u)}for(m=g(p);m;){if(u>(p-=m+i))return;m=g(p)}return{min:u,max:p,len:p-u,total:x,isClosed:u===0&&p===x&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},C.findPointOnPath=function(s,t,i,r){for(var n,o,l,c=(r=r||{}).pathLength||s.getTotalLength(),d=r.tolerance||.001,u=r.iterationLimit||30,x=s.getPointAtLength(0)[i]>s.getPointAtLength(c)[i]?-1:1,p=0,g=0,m=c;p<u;){if(n=(g+m)/2,l=(o=s.getPointAtLength(n))[i]-t,Math.abs(l)<d)return o;x*l>0?m=n:g=n,p++}return o}},33040:function(F,C,e){"use strict";var T=e(38248),k=e(49760),a=e(72160),w=e(8932),b=e(22548).defaultLine,f=e(38116).isArrayOrTypedArray,s=a(b);function t(n,o){var l=n;return l[3]*=o,l}function i(n){if(T(n))return s;var o=a(n);return o.length?o:s}function r(n){return T(n)?n:1}F.exports={formatColor:function(n,o,l){var c=n.color;c&&c._inputArray&&(c=c._inputArray);var d,u,x,p,g,m=f(c),y=f(o),v=w.extractOpts(n),_=[];if(d=v.colorscale!==void 0?w.makeColorScaleFuncFromTrace(n):i,u=m?function(S,A){return S[A]===void 0?s:a(d(S[A]))}:i,x=y?function(S,A){return S[A]===void 0?1:r(S[A])}:r,m||y)for(var h=0;h<l;h++)p=u(c,h),g=x(o,h),_[h]=t(p,g);else _=t(a(c),o);return _},parseColorScale:function(n){var o=w.extractOpts(n),l=o.colorscale;return o.reversescale&&(l=w.flipScale(o.colorscale)),l.map(function(c){var d=c[0],u=k(c[1]).toRgb();return{index:d,rgb:[u.r,u.g,u.b,u.a]}})}}},71688:function(F,C,e){"use strict";var T=e(35536);function k(a){return[a]}F.exports={keyFun:function(a){return a.key},repeat:k,descend:T,wrap:k,unwrap:function(a){return a[0]}}},35536:function(F){"use strict";F.exports=function(C){return C}},1396:function(F){"use strict";F.exports=function(C,e){if(!e)return C;var T=1/Math.abs(e),k=T>1?(T*C+T*e)/T:C+e,a=String(k).length;if(a>16){var w=String(e).length;if(a>=String(C).length+w){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},3400:function(F,C,e){"use strict";var T=e(33428),k=e(94336).E9,a=e(57624).E9,w=e(38248),b=e(39032),f=b.FP_SAFE,s=-f,t=b.BADNUM,i=F.exports={};i.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var r={};i.warnBadFormat=function(K){var X=String(K);r[X]||(r[X]=1,i.warn('encountered bad format: "'+X+'"'))},i.noFormat=function(K){return String(K)},i.numberFormat=function(K){var X;try{X=a(i.adjustFormat(K))}catch{return i.warnBadFormat(K),i.noFormat}return X},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var n=e(38116);i.isArrayBuffer=n.isArrayBuffer,i.isTypedArray=n.isTypedArray,i.isArrayOrTypedArray=n.isArrayOrTypedArray,i.isArray1D=n.isArray1D,i.ensureArray=n.ensureArray,i.concat=n.concat,i.maxRowLength=n.maxRowLength,i.minRowLength=n.minRowLength;var o=e(20435);i.mod=o.mod,i.modHalf=o.modHalf;var l=e(63064);i.valObjectMeta=l.valObjectMeta,i.coerce=l.coerce,i.coerce2=l.coerce2,i.coerceFont=l.coerceFont,i.coercePattern=l.coercePattern,i.coerceHoverinfo=l.coerceHoverinfo,i.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,i.validate=l.validate;var c=e(67555);i.dateTime2ms=c.dateTime2ms,i.isDateTime=c.isDateTime,i.ms2DateTime=c.ms2DateTime,i.ms2DateTimeLocal=c.ms2DateTimeLocal,i.cleanDate=c.cleanDate,i.isJSDate=c.isJSDate,i.formatDate=c.formatDate,i.incrementMonth=c.incrementMonth,i.dateTick0=c.dateTick0,i.dfltRange=c.dfltRange,i.findExactDates=c.findExactDates,i.MIN_MS=c.MIN_MS,i.MAX_MS=c.MAX_MS;var d=e(14952);i.findBin=d.findBin,i.sorterAsc=d.sorterAsc,i.sorterDes=d.sorterDes,i.distinctVals=d.distinctVals,i.roundUp=d.roundUp,i.sort=d.sort,i.findIndexOfMin=d.findIndexOfMin,i.sortObjectKeys=e(95376);var u=e(63084);i.aggNums=u.aggNums,i.len=u.len,i.mean=u.mean,i.median=u.median,i.midRange=u.midRange,i.variance=u.variance,i.stdev=u.stdev,i.interp=u.interp;var x=e(52248);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var p=e(11864);i.deg2rad=p.deg2rad,i.rad2deg=p.rad2deg,i.angleDelta=p.angleDelta,i.angleDist=p.angleDist,i.isFullCircle=p.isFullCircle,i.isAngleInsideSector=p.isAngleInsideSector,i.isPtInsideSector=p.isPtInsideSector,i.pathArc=p.pathArc,i.pathSector=p.pathSector,i.pathAnnulus=p.pathAnnulus;var g=e(98308);i.isLeftAnchor=g.isLeftAnchor,i.isCenterAnchor=g.isCenterAnchor,i.isRightAnchor=g.isRightAnchor,i.isTopAnchor=g.isTopAnchor,i.isMiddleAnchor=g.isMiddleAnchor,i.isBottomAnchor=g.isBottomAnchor;var m=e(92348);i.segmentsIntersect=m.segmentsIntersect,i.segmentDistance=m.segmentDistance,i.getTextLocation=m.getTextLocation,i.clearLocationCache=m.clearLocationCache,i.getVisibleSegment=m.getVisibleSegment,i.findPointOnPath=m.findPointOnPath;var y=e(92880);i.extendFlat=y.extendFlat,i.extendDeep=y.extendDeep,i.extendDeepAll=y.extendDeepAll,i.extendDeepNoArrays=y.extendDeepNoArrays;var v=e(24248);i.log=v.log,i.warn=v.warn,i.error=v.error;var _=e(53756);i.counterRegex=_.counter;var h=e(91200);i.throttle=h.throttle,i.throttleDone=h.done,i.clearThrottle=h.clear;var S=e(52200);function A(K){var X={};for(var ie in K)for(var se=K[ie],ae=0;ae<se.length;ae++)X[se[ae]]=+ie;return X}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function(K){return w(K)?(K=Number(K))>f||K<s?t:K:t},i.isIndex=function(K,X){return!(X!==void 0&&K>=X)&&w(K)&&K>=0&&K%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function(K,X){for(var ie=new Array(X),se=0;se<X;se++)ie[se]=K;return ie},i.swapAttrs=function(K,X,ie,se){ie||(ie="x"),se||(se="y");for(var ae=0;ae<X.length;ae++){var ue=X[ae],ve=i.nestedProperty(K,ue.replace("?",ie)),ye=i.nestedProperty(K,ue.replace("?",se)),pe=ve.get();ve.set(ye.get()),ye.set(pe)}},i.raiseToTop=function(K){K.parentNode.appendChild(K)},i.cancelTransition=function(K){return K.transition().duration(0)},i.constrain=function(K,X,ie){return X>ie?Math.max(ie,Math.min(X,K)):Math.max(X,Math.min(ie,K))},i.bBoxIntersect=function(K,X,ie){return ie=ie||0,K.left<=X.right+ie&&X.left<=K.right+ie&&K.top<=X.bottom+ie&&X.top<=K.bottom+ie},i.simpleMap=function(K,X,ie,se,ae){for(var ue=K.length,ve=new Array(ue),ye=0;ye<ue;ye++)ve[ye]=X(K[ye],ie,se,ae);return ve},i.randstr=function K(X,ie,se,ae){if(se||(se=16),ie===void 0&&(ie=24),ie<=0)return"0";var ue,ve,ye=Math.log(Math.pow(2,ie))/Math.log(se),pe="";for(ue=2;ye===1/0;ue*=2)ye=Math.log(Math.pow(2,ie/ue))/Math.log(se)*ue;var de=ye-Math.floor(ye);for(ue=0;ue<Math.floor(ye);ue++)pe=Math.floor(Math.random()*se).toString(se)+pe;de&&(ve=Math.pow(se,de),pe=Math.floor(Math.random()*ve).toString(se)+pe);var me=parseInt(pe,se);return X&&X[pe]||me!==1/0&&me>=Math.pow(2,ie)?ae>10?(i.warn("randstr failed uniqueness"),pe):K(X,ie,se,(ae||0)+1):pe},i.OptionControl=function(K,X){K||(K={}),X||(X="opt");var ie={optionList:[],_newoption:function(se){se[X]=K,ie[se.name]=se,ie.optionList.push(se)}};return ie["_"+X]=K,ie},i.smooth=function(K,X){if((X=Math.round(X)||0)<2)return K;var ie,se,ae,ue,ve=K.length,ye=2*ve,pe=2*X-1,de=new Array(pe),me=new Array(ve);for(ie=0;ie<pe;ie++)de[ie]=(1-Math.cos(Math.PI*(ie+1)/X))/(2*X);for(ie=0;ie<ve;ie++){for(ue=0,se=0;se<pe;se++)(ae=ie+se+1-X)<-ve?ae-=ye*Math.round(ae/ye):ae>=ye&&(ae-=ye*Math.floor(ae/ye)),ae<0?ae=-1-ae:ae>=ve&&(ae=ye-1-ae),ue+=K[ae]*de[se];me[ie]=ue}return me},i.syncOrAsync=function(K,X,ie){var se;function ae(){return i.syncOrAsync(K,X,ie)}for(;K.length;)if((se=(0,K.splice(0,1)[0])(X))&&se.then)return se.then(ae);return ie&&ie(X)},i.stripTrailingSlash=function(K){return K.substr(-1)==="/"?K.substr(0,K.length-1):K},i.noneOrAll=function(K,X,ie){if(K){var se,ae=!1,ue=!0;for(se=0;se<ie.length;se++)K[ie[se]]!=null?ae=!0:ue=!1;if(ae&&!ue)for(se=0;se<ie.length;se++)K[ie[se]]=X[ie[se]]}},i.mergeArray=function(K,X,ie,se){var ae=typeof se=="function";if(i.isArrayOrTypedArray(K))for(var ue=Math.min(K.length,X.length),ve=0;ve<ue;ve++){var ye=K[ve];X[ve][ie]=ae?se(ye):ye}},i.mergeArrayCastPositive=function(K,X,ie){return i.mergeArray(K,X,ie,function(se){var ae=+se;return isFinite(ae)&&ae>0?ae:0})},i.fillArray=function(K,X,ie,se){if(se=se||i.identity,i.isArrayOrTypedArray(K))for(var ae=0;ae<X.length;ae++)X[ae][ie]=se(K[ae])},i.castOption=function(K,X,ie,se){se=se||i.identity;var ae=i.nestedProperty(K,ie).get();return i.isArrayOrTypedArray(ae)?Array.isArray(X)&&i.isArrayOrTypedArray(ae[X[0]])?se(ae[X[0]][X[1]]):se(ae[X]):ae},i.extractOption=function(K,X,ie,se){if(ie in K)return K[ie];var ae=i.nestedProperty(X,se).get();return Array.isArray(ae)?void 0:ae},i.tagSelected=function(K,X,ie){var se,ae,ue=X.selectedpoints,ve=X._indexToPoints;ve&&(se=A(ve));for(var ye=0;ye<ue.length;ye++){var pe=ue[ye];if(i.isIndex(pe)||i.isArrayOrTypedArray(pe)&&i.isIndex(pe[0])&&i.isIndex(pe[1])){var de=se?se[pe]:pe,me=ie?ie[de]:de;(ae=me)!==void 0&&ae<K.length&&(K[me].selected=1)}}},i.selIndices2selPoints=function(K){var X=K.selectedpoints,ie=K._indexToPoints;if(ie){for(var se=A(ie),ae=[],ue=0;ue<X.length;ue++){var ve=X[ue];if(i.isIndex(ve)){var ye=se[ve];i.isIndex(ye)&&ae.push(ye)}}return ae}return X},i.getTargetArray=function(K,X){var ie=X.target;if(typeof ie=="string"&&ie){var se=i.nestedProperty(K,ie).get();return!!i.isArrayOrTypedArray(se)&&se}return!!i.isArrayOrTypedArray(ie)&&ie},i.minExtend=function K(X,ie,se){var ae={};typeof ie!="object"&&(ie={});var ue,ve,ye,pe=se==="pieLike"?-1:3,de=Object.keys(X);for(ue=0;ue<de.length;ue++)ye=X[ve=de[ue]],ve.charAt(0)!=="_"&&typeof ye!="function"&&(ve==="module"?ae[ve]=ye:Array.isArray(ye)?ae[ve]=ve==="colorscale"||pe===-1?ye.slice():ye.slice(0,pe):i.isTypedArray(ye)?ae[ve]=pe===-1?ye.subarray():ye.subarray(0,pe):ae[ve]=ye&&typeof ye=="object"?K(X[ve],ie[ve],se):ye);for(de=Object.keys(ie),ue=0;ue<de.length;ue++)typeof(ye=ie[ve=de[ue]])=="object"&&ve in ae&&typeof ae[ve]=="object"||(ae[ve]=ye);return ae},i.titleCase=function(K){return K.charAt(0).toUpperCase()+K.substr(1)},i.containsAny=function(K,X){for(var ie=0;ie<X.length;ie++)if(K.indexOf(X[ie])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;i.isIOS=function(){return P.test(window.navigator.userAgent)};var I=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var K=I.exec(window.navigator.userAgent);if(K&&K.length===2){var X=parseInt(K[1]);if(!isNaN(X))return X}return null},i.isD3Selection=function(K){return K instanceof T.selection},i.ensureSingle=function(K,X,ie,se){var ae=K.select(X+(ie?"."+ie:""));if(ae.size())return ae;var ue=K.append(X);return ie&&ue.classed(ie,!0),se&&ue.call(se),ue},i.ensureSingleById=function(K,X,ie,se){var ae=K.select(X+"#"+ie);if(ae.size())return ae;var ue=K.append(X).attr("id",ie);return se&&ue.call(se),ue},i.objectFromPath=function(K,X){for(var ie,se=K.split("."),ae=ie={},ue=0;ue<se.length;ue++){var ve=se[ue],ye=null,pe=se[ue].match(/(.*)\[([0-9]+)\]/);pe?(ve=pe[1],ye=pe[2],ie=ie[ve]=[],ue===se.length-1?ie[ye]=X:ie[ye]={},ie=ie[ye]):(ue===se.length-1?ie[ve]=X:ie[ve]={},ie=ie[ve])}return ae};var D=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function V(K){return K.slice(0,2)==="__"}i.expandObjectPaths=function(K){var X,ie,se,ae,ue,ve,ye;if(typeof K=="object"&&!Array.isArray(K)){for(ie in K)if(K.hasOwnProperty(ie))if(X=ie.match(D)){if(ae=K[ie],V(se=X[1]))continue;delete K[ie],K[se]=i.extendDeepNoArrays(K[se]||{},i.objectFromPath(ie,i.expandObjectPaths(ae))[se])}else if(X=ie.match(z)){if(ae=K[ie],V(se=X[1]))continue;if(ue=parseInt(X[2]),delete K[ie],K[se]=K[se]||[],X[3]===".")ye=X[4],ve=K[se][ue]=K[se][ue]||{},i.extendDeepNoArrays(ve,i.objectFromPath(ye,i.expandObjectPaths(ae)));else{if(V(se))continue;K[se][ue]=i.expandObjectPaths(ae)}}else{if(V(ie))continue;K[ie]=i.expandObjectPaths(K[ie])}}return K},i.numSeparate=function(K,X,ie){if(ie||(ie=!1),typeof X!="string"||X.length===0)throw new Error("Separator string required for formatting!");typeof K=="number"&&(K=String(K));var se=/(\d+)(\d{3})/,ae=X.charAt(0),ue=X.charAt(1),ve=K.split("."),ye=ve[0],pe=ve.length>1?ae+ve[1]:"";if(ue&&(ve.length>1||ye.length>4||ie))for(;se.test(ye);)ye=ye.replace(se,"$1"+ue+"$2");return ye+pe},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;i.templateString=function(K,X){var ie={};return K.replace(i.TEMPLATE_STRING_REGEX,function(se,ae){var ue;return O.test(ae)?ue=X[ae]:(ie[ae]=ie[ae]||i.nestedProperty(X,ae).get,ue=ie[ae]()),i.isValidTextValue(ue)?ue:""})};var j={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return te.apply(j,arguments)};var Y={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return te.apply(Y,arguments)};var B=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,U={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return te.apply(U,arguments)};var q=/^[:|\|]/;function te(K,X,ie){var se=this,ae=arguments;X||(X={});var ue={};return K.replace(i.TEMPLATE_STRING_REGEX,function(ve,ye,pe){var de=ye==="_xother"||ye==="_yother",me=ye==="_xother_"||ye==="_yother_",ke=ye==="xother_"||ye==="yother_",Ce=ye==="xother"||ye==="yother"||de||ke||me,ge=ye;(de||me)&&(ge=ge.substring(1)),(ke||me)&&(ge=ge.substring(0,ge.length-1));var oe,re,fe,Se=null,be=null;if(se.parseMultDiv){var we=function(he){var _e=he.match(B);return _e?{key:_e[1],op:_e[2],number:Number(_e[3])}:{key:he,op:null,number:null}}(ge);ge=we.key,Se=we.op,be=we.number}if(Ce){if((oe=X[ge])===void 0)return""}else for(fe=3;fe<ae.length;fe++)if(re=ae[fe]){if(re.hasOwnProperty(ge)){oe=re[ge];break}if(O.test(ge)||(oe=i.nestedProperty(re,ge).get(),(oe=ue[ge]||i.nestedProperty(re,ge).get())&&(ue[ge]=oe)),oe!==void 0)break}if(oe!==void 0&&(Se==="*"&&(oe*=be),Se==="/"&&(oe/=be)),oe===void 0&&se)return se.count<se.max&&(i.warn("Variable '"+ge+"' in "+se.name+" could not be found!"),oe=ve),se.count===se.max&&i.warn("Too many "+se.name+" warnings - additional warnings will be suppressed"),se.count++,ve;if(pe){var Me;if(pe[0]===":"&&(Me=ie?ie.numberFormat:i.numberFormat,oe!==""&&(oe=Me(pe.replace(q,""))(oe))),pe[0]==="|"){Me=ie?ie.timeFormat:k;var Pe=i.dateTime2ms(oe);oe=i.formatDate(Pe,pe.replace(q,""),!1,Me)}}else{var De=ge+"Label";X.hasOwnProperty(De)&&(oe=X[De])}return Ce&&(oe="("+oe+")",(de||me)&&(oe=" "+oe),(ke||me)&&(oe+=" ")),oe})}i.subplotSort=function(K,X){for(var ie=Math.min(K.length,X.length)+1,se=0,ae=0,ue=0;ue<ie;ue++){var ve=K.charCodeAt(ue)||0,ye=X.charCodeAt(ue)||0,pe=ve>=48&&ve<=57,de=ye>=48&&ye<=57;if(pe&&(se=10*se+ve-48),de&&(ae=10*ae+ye-48),!pe||!de){if(se!==ae)return se-ae;if(ve!==ye)return ve-ye}}return ae-se};var ee=2e9;i.seedPseudoRandom=function(){ee=2e9},i.pseudoRandom=function(){var K=ee;return ee=(69069*ee+1)%4294967296,Math.abs(ee-K)<429496729?i.pseudoRandom():ee/4294967296},i.fillText=function(K,X,ie){var se=Array.isArray(ie)?function(ve){ie.push(ve)}:function(ve){ie.text=ve},ae=i.extractOption(K,X,"htx","hovertext");if(i.isValidTextValue(ae))return se(ae);var ue=i.extractOption(K,X,"tx","text");return i.isValidTextValue(ue)?se(ue):void 0},i.isValidTextValue=function(K){return K||K===0},i.formatPercent=function(K,X){X=X||0;for(var ie=(Math.round(100*K*Math.pow(10,X))*Math.pow(.1,X)).toFixed(X)+"%",se=0;se<X;se++)ie.indexOf(".")!==-1&&(ie=(ie=ie.replace("0%","%")).replace(".%","%"));return ie},i.isHidden=function(K){var X=window.getComputedStyle(K).display;return!X||X==="none"},i.strTranslate=function(K,X){return K||X?"translate("+K+","+X+")":""},i.strRotate=function(K){return K?"rotate("+K+")":""},i.strScale=function(K){return K!==1?"scale("+K+")":""},i.getTextTransform=function(K){var X=K.noCenter,ie=K.textX,se=K.textY,ae=K.targetX,ue=K.targetY,ve=K.anchorX||0,ye=K.anchorY||0,pe=K.rotate,de=K.scale;return de?de>1&&(de=1):de=0,i.strTranslate(ae-de*(ie+ve),ue-de*(se+ye))+i.strScale(de)+(pe?"rotate("+pe+(X?"":" "+ie+" "+se)+")":"")},i.setTransormAndDisplay=function(K,X){K.attr("transform",i.getTextTransform(X)),K.style("display",X.scale?null:"none")},i.ensureUniformFontSize=function(K,X){var ie=i.extendFlat({},X);return ie.size=Math.max(X.size,K._fullLayout.uniformtext.minsize||0),ie},i.join2=function(K,X,ie){var se=K.length;return se>1?K.slice(0,-1).join(X)+ie+K[se-1]:K.join(X)},i.bigFont=function(K){return Math.round(1.2*K)};var Q=i.getFirefoxVersion(),J=Q!==null&&Q<86;i.getPositionFromD3Event=function(){return J?[T.event.layerX,T.event.layerY]:[T.event.offsetX,T.event.offsetY]}},63620:function(F){"use strict";F.exports=function(C){return window&&window.process&&window.process.versions?Object.prototype.toString.call(C)==="[object Object]":Object.prototype.toString.call(C)==="[object Object]"&&Object.getPrototypeOf(C).hasOwnProperty("hasOwnProperty")}},37804:function(F,C,e){"use strict";var T=e(22296),k=/^\w*$/;F.exports=function(a,w,b,f){var s,t,i;b=b||"name",f=f||"value";var r={};w&&w.length?(i=T(a,w),t=i.get()):t=a,w=w||"";var n={};if(t)for(s=0;s<t.length;s++)n[t[s][b]]=s;var o=k.test(f),l={set:function(c,d){var u=d===null?4:0;if(!t){if(!i||u===4)return;t=[],i.set(t)}var x=n[c];if(x===void 0){if(u===4)return;u|=3,x=t.length,n[c]=x}else d!==(o?t[x][f]:T(t[x],f).get())&&(u|=2);var p=t[x]=t[x]||{};return p[b]=c,o?p[f]=d:T(p,f).set(d),d!==null&&(u&=-5),r[x]=r[x]|u,l},get:function(c){if(t){var d=n[c];return d===void 0?void 0:o?t[d][f]:T(t[d],f).get()}},rename:function(c,d){var u=n[c];return u===void 0||(r[u]=1|r[u],n[d]=u,delete n[c],t[u][b]=d),l},remove:function(c){var d=n[c];if(d===void 0)return l;var u=t[d];if(Object.keys(u).length>2)return r[d]=2|r[d],l.set(c,null);if(o){for(s=d;s<t.length;s++)r[s]=3|r[s];for(s=d;s<t.length;s++)n[t[s][b]]--;t.splice(d,1),delete n[c]}else T(u,f).set(null),r[d]=6|r[d];return l},constructUpdate:function(){for(var c,d,u={},x=Object.keys(r),p=0;p<x.length;p++)d=x[p],c=w+"["+d+"]",t[d]?(1&r[d]&&(u[c+"."+b]=t[d][b]),2&r[d]&&(u[c+"."+f]=o?4&r[d]?null:t[d][f]:4&r[d]?null:T(t[d],f).get())):u[c]=null;return u}};return l}},98356:function(F,C,e){"use strict";var T=e(24040);F.exports=function(k,a){for(var w=k._context.locale,b=0;b<2;b++){for(var f=k._context.locales,s=0;s<2;s++){var t=(f[w]||{}).dictionary;if(t){var i=t[a];if(i)return i}f=T.localeRegistry}var r=w.split("-")[0];if(r===w)break;w=r}return a}},24248:function(F,C,e){"use strict";var T=e(20556).dfltConfig,k=e(41792),a=F.exports={};a.log=function(){var w;if(T.logging>1){var b=["LOG:"];for(w=0;w<arguments.length;w++)b.push(arguments[w]);console.trace.apply(console,b)}if(T.notifyOnLogging>1){var f=[];for(w=0;w<arguments.length;w++)f.push(arguments[w]);k(f.join("<br>"),"long")}},a.warn=function(){var w;if(T.logging>0){var b=["WARN:"];for(w=0;w<arguments.length;w++)b.push(arguments[w]);console.trace.apply(console,b)}if(T.notifyOnLogging>0){var f=[];for(w=0;w<arguments.length;w++)f.push(arguments[w]);k(f.join("<br>"),"stick")}},a.error=function(){var w;if(T.logging>0){var b=["ERROR:"];for(w=0;w<arguments.length;w++)b.push(arguments[w]);console.error.apply(console,b)}if(T.notifyOnLogging>0){var f=[];for(w=0;w<arguments.length;w++)f.push(arguments[w]);k(f.join("<br>"),"stick")}}},30988:function(F,C,e){"use strict";var T=e(33428);F.exports=function(k,a,w){var b=k.selectAll("g."+w.replace(/\s/g,".")).data(a,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",w),b.order();var f=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][f]=T.select(this)}),b}},52248:function(F,C,e){"use strict";var T=e(36524);C.init2dArray=function(k,a){for(var w=new Array(k),b=0;b<k;b++)w[b]=new Array(a);return w},C.transposeRagged=function(k){var a,w,b=0,f=k.length;for(a=0;a<f;a++)b=Math.max(b,k[a].length);var s=new Array(b);for(a=0;a<b;a++)for(s[a]=new Array(f),w=0;w<f;w++)s[a][w]=k[w][a];return s},C.dot=function(k,a){if(!k.length||!a.length||k.length!==a.length)return null;var w,b,f=k.length;if(k[0].length)for(w=new Array(f),b=0;b<f;b++)w[b]=C.dot(k[b],a);else if(a[0].length){var s=C.transposeRagged(a);for(w=new Array(s.length),b=0;b<s.length;b++)w[b]=C.dot(k,s[b])}else for(w=0,b=0;b<f;b++)w+=k[b]*a[b];return w},C.translationMatrix=function(k,a){return[[1,0,k],[0,1,a],[0,0,1]]},C.rotationMatrix=function(k){var a=k*Math.PI/180;return[[Math.cos(a),-Math.sin(a),0],[Math.sin(a),Math.cos(a),0],[0,0,1]]},C.rotationXYMatrix=function(k,a,w){return C.dot(C.dot(C.translationMatrix(a,w),C.rotationMatrix(k)),C.translationMatrix(-a,-w))},C.apply3DTransform=function(k){return function(){var a=arguments,w=arguments.length===1?a[0]:[a[0],a[1],a[2]||0];return C.dot(k,[w[0],w[1],w[2],1]).slice(0,3)}},C.apply2DTransform=function(k){return function(){var a=arguments;a.length===3&&(a=a[0]);var w=arguments.length===1?a[0]:[a[0],a[1]];return C.dot(k,[w[0],w[1],1]).slice(0,2)}},C.apply2DTransform2=function(k){var a=C.apply2DTransform(k);return function(w){return a(w.slice(0,2)).concat(a(w.slice(2,4)))}},C.convertCssMatrix=function(k){if(k){var a=k.length;if(a===16)return k;if(a===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},C.inverseTransformMatrix=function(k){var a=[];return T.invert(a,k),[[a[0],a[1],a[2],a[3]],[a[4],a[5],a[6],a[7]],[a[8],a[9],a[10],a[11]],[a[12],a[13],a[14],a[15]]]}},20435:function(F){"use strict";F.exports={mod:function(C,e){var T=C%e;return T<0?T+e:T},modHalf:function(C,e){return Math.abs(C)>e/2?C-Math.round(C/e)*e:C}}},22296:function(F,C,e){"use strict";var T=e(38248),k=e(38116).isArrayOrTypedArray;function a(r,n){return function(){var o,l,c,d,u,x=r;for(d=0;d<n.length-1;d++){if((o=n[d])===-1){for(l=!0,c=[],u=0;u<x.length;u++)c[u]=a(x[u],n.slice(d+1))(),c[u]!==c[0]&&(l=!1);return l?c[0]:c}if(typeof o=="number"&&!k(x)||typeof(x=x[o])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(c=x[n[d]])!==null)return c}}F.exports=function(r,n){if(T(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";var o,l,c,d,u=n.split(".");for(d=0;d<u.length;d++)if(String(u[d]).slice(0,2)==="__")throw"bad property string";for(d=0;d<u.length;){if(o=String(u[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(o[1])u[d]=o[1];else{if(d!==0)throw"bad property string";u.splice(0,1)}for(l=o[2].substr(1,o[2].length-2).split("]["),c=0;c<l.length;c++)d++,u.splice(d,0,Number(l[c]))}d++}return typeof r!="object"?function(x,p,g){return{set:function(){throw"bad container"},get:function(){},astr:p,parts:g,obj:x}}(r,n,u):{set:f(r,u,n),get:a(r,u),astr:n,parts:u,obj:r}};var w=/(^|\.)args\[/;function b(r,n){return r===void 0||r===null&&!n.match(w)}function f(r,n,o){return function(l){var c,d,u=r,x="",p=[[r,x]],g=b(l,o);for(d=0;d<n.length-1;d++){if(typeof(c=n[d])=="number"&&!k(u))throw"array index but container is not an array";if(c===-1){if(g=!t(u,n.slice(d+1),l,o))break;return}if(!i(u,c,n[d+1],g))break;if(typeof(u=u[c])!="object"||u===null)throw"container is not an object";x=s(x,c),p.push([u,x])}if(g){if(d===n.length-1&&(delete u[n[d]],Array.isArray(u)&&+n[d]==u.length-1))for(;u.length&&u[u.length-1]===void 0;)u.pop()}else u[n[d]]=l}}function s(r,n){var o=n;return T(n)?o="["+n+"]":r&&(o="."+n),r+o}function t(r,n,o,l){var c,d=k(o),u=!0,x=o,p=l.replace("-1",0),g=!d&&b(o,p),m=n[0];for(c=0;c<r.length;c++)p=l.replace("-1",c),d&&(g=b(x=o[c%o.length],p)),g&&(u=!1),i(r,c,m,g)&&f(r[c],n,l.replace("-1",c))(x);return u}function i(r,n,o,l){if(r[n]===void 0){if(l)return!1;r[n]=typeof o=="number"?[]:{}}return!0}},16628:function(F){"use strict";F.exports=function(){}},41792:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=[];F.exports=function(w,b){if(a.indexOf(w)===-1){a.push(w);var f=1e3;k(b)?f=b:b==="long"&&(f=3e3);var s=T.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var r=T.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(t)});for(var n=r.append("p"),o=i.split(/<br\s*\/?>/g),l=0;l<o.length;l++)l&&n.append("br"),n.append("span").text(o[l]);b==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(f).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(r){var n=a.indexOf(r);n!==-1&&a.splice(n,1),T.select(this).remove()})}}},72213:function(F,C,e){"use strict";var T=e(93972),k="data-savedcursor";F.exports=function(a,w){var b=a.attr(k);if(w){if(!b){for(var f=(a.attr("class")||"").split(" "),s=0;s<f.length;s++){var t=f[s];t.indexOf("cursor-")===0&&a.attr(k,t.substr(7)).classed(t,!1)}a.attr(k)||a.attr(k,"!!")}T(a,w)}else b&&(a.attr(k,null),b==="!!"?T(a):T(a,b))}},92065:function(F,C,e){"use strict";var T=e(52248).dot,k=e(39032).BADNUM,a=F.exports={};a.tester=function(w){var b,f=w.slice(),s=f[0][0],t=s,i=f[0][1],r=i;for(f[f.length-1][0]===f[0][0]&&f[f.length-1][1]===f[0][1]||f.push(f[0]),b=1;b<f.length;b++)s=Math.min(s,f[b][0]),t=Math.max(t,f[b][0]),i=Math.min(i,f[b][1]),r=Math.max(r,f[b][1]);var n,o=!1;f.length===5&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(o=!0,n=function(d){return d[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(o=!0,n=function(d){return d[1]===f[0][1]}));var l=!0,c=f[0];for(b=1;b<f.length;b++)if(c[0]!==f[b][0]||c[1]!==f[b][1]){l=!1;break}return{xmin:s,xmax:t,ymin:i,ymax:r,pts:f,contains:o?function(d,u){var x=d[0],p=d[1];return!(x===k||x<s||x>t||p===k||p<i||p>r||u&&n(d))}:function(d,u){var x=d[0],p=d[1];if(x===k||x<s||x>t||p===k||p<i||p>r)return!1;var g,m,y,v,_,h=f.length,S=f[0][0],A=f[0][1],E=0;for(g=1;g<h;g++)if(m=S,y=A,S=f[g][0],A=f[g][1],!(x<(v=Math.min(m,S))||x>Math.max(m,S)||p>Math.max(y,A)))if(p<Math.min(y,A))x!==v&&E++;else{if(p===(_=S===m?p:y+(x-m)*(A-y)/(S-m)))return g!==1||!u;p<=_&&x!==v&&E++}return E%2==1},isRect:o,degenerate:l}},a.isSegmentBent=function(w,b,f,s){var t,i,r,n=w[b],o=[w[f][0]-n[0],w[f][1]-n[1]],l=T(o,o),c=Math.sqrt(l),d=[-o[1]/c,o[0]/c];for(t=b+1;t<f;t++)if(i=[w[t][0]-n[0],w[t][1]-n[1]],(r=T(i,o))<0||r>l||Math.abs(T(i,d))>s)return!0;return!1},a.filter=function(w,b){var f=[w[0]],s=0,t=0;function i(r){w.push(r);var n=f.length,o=s;f.splice(t+1);for(var l=o+1;l<w.length;l++)(l===w.length-1||a.isSegmentBent(w,o,l+1,b))&&(f.push(w[l]),f.length<n-2&&(s=l,t=f.length-1),o=l)}return w.length>1&&i(w.pop()),{addPt:i,raw:w,filtered:f}}},5048:function(F,C,e){"use strict";var T=e(16576),k=e(28624);F.exports=function(a,w,b){var f=a._fullLayout,s=!0;return f._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||f._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:a._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:w||[],cachedCode:b||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(i){a&&a.emit&&a.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),s||T({container:f._glcontainer.node()}),s}},34296:function(F,C,e){"use strict";var T=e(38248),k=e(25928);F.exports=function(a){var w;if(typeof(w=a&&a.hasOwnProperty("userAgent")?a.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var b=k({ua:{headers:{"user-agent":w}},tablet:!0,featureDetect:!1});if(!b){for(var f=w.split(" "),s=1;s<f.length;s++)if(f[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var i=f[t];if(i.substr(0,8)==="Version/"){var r=i.substr(8).split(".")[0];if(T(r)&&(r=+r),r>=13)return!0}}}return b}},52416:function(F){"use strict";F.exports=function(C,e){if(e instanceof RegExp){for(var T=e.toString(),k=0;k<C.length;k++)if(C[k]instanceof RegExp&&C[k].toString()===T)return C;C.push(e)}else!e&&e!==0||C.indexOf(e)!==-1||C.push(e);return C}},94552:function(F,C,e){"use strict";var T=e(3400),k=e(20556).dfltConfig,a={add:function(w,b,f,s,t){var i,r;w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},r=w.undoQueue.index,w.autoplay?w.undoQueue.inSequence||(w.autoplay=!1):(!w.undoQueue.sequence||w.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},w.undoQueue.queue.splice(r,w.undoQueue.queue.length-r,i),w.undoQueue.index+=1):i=w.undoQueue.queue[r-1],w.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(f),i.redo.calls.push(s),i.redo.args.push(t)),w.undoQueue.queue.length>k.queueLength&&(w.undoQueue.queue.shift(),w.undoQueue.index--))},startSequence:function(w){w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},w.undoQueue.sequence=!0,w.undoQueue.beginSequence=!0},stopSequence:function(w){w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},w.undoQueue.sequence=!1,w.undoQueue.beginSequence=!1},undo:function(w){var b,f;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index<=0)){for(w.undoQueue.index--,b=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,f=0;f<b.undo.calls.length;f++)a.plotDo(w,b.undo.calls[f],b.undo.args[f]);w.undoQueue.inSequence=!1,w.autoplay=!1}},redo:function(w){var b,f;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index>=w.undoQueue.queue.length)){for(b=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,f=0;f<b.redo.calls.length;f++)a.plotDo(w,b.redo.calls[f],b.redo.args[f]);w.undoQueue.inSequence=!1,w.autoplay=!1,w.undoQueue.index++}},plotDo:function(w,b,f){w.autoplay=!0,f=function(s,t){for(var i,r=[],n=0;n<t.length;n++)i=t[n],r[n]=i===s?i:typeof i=="object"?Array.isArray(i)?T.extendDeep([],i):T.extendDeepAll({},i):i;return r}(w,f),b.apply(null,f)}};F.exports=a},53756:function(F,C){"use strict";C.counter=function(e,T,k,a){var w=(T||"")+(k?"":"$"),b=a===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+w):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+w)}},23193:function(F){"use strict";var C=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;F.exports=function(T,k){for(;k;){var a=T.match(C);if(a)T=a[1];else{if(!T.match(e))throw new Error("bad relativeAttr call:"+[T,k]);T=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return T&&k.charAt(0)!=="["?T+"."+k:T+k}},51528:function(F,C,e){"use strict";var T=e(38116).isArrayOrTypedArray,k=e(63620);F.exports=function a(w,b){for(var f in b){var s=b[f],t=w[f];if(t!==s)if(f.charAt(0)==="_"||typeof s=="function"){if(f in w)continue;w[f]=s}else if(T(s)&&T(t)&&k(s[0])){if(f==="customdata"||f==="ids")continue;for(var i=Math.min(s.length,t.length),r=0;r<i;r++)t[r]!==s[r]&&k(s[r])&&k(t[r])&&a(t[r],s[r])}else k(s)&&k(t)&&(a(t,s),Object.keys(t).length||delete w[f])}}},14952:function(F,C,e){"use strict";var T=e(38248),k=e(24248),a=e(35536),w=e(39032).BADNUM,b=1e-9;function f(r,n){return r<n}function s(r,n){return r<=n}function t(r,n){return r>n}function i(r,n){return r>=n}C.findBin=function(r,n,o){if(T(n.start))return o?Math.ceil((r-n.start)/n.size-b)-1:Math.floor((r-n.start)/n.size+b);var l,c,d=0,u=n.length,x=0,p=u>1?(n[u-1]-n[0])/(u-1):1;for(c=p>=0?o?f:s:o?i:t,r+=p*b*(o?-1:1)*(p>=0?1:-1);d<u&&x++<100;)c(n[l=Math.floor((d+u)/2)],r)?d=l+1:u=l;return x>90&&k.log("Long binary search..."),d-1},C.sorterAsc=function(r,n){return r-n},C.sorterDes=function(r,n){return n-r},C.distinctVals=function(r){var n,o=r.slice();for(o.sort(C.sorterAsc),n=o.length-1;n>-1&&o[n]===w;n--);for(var l,c=o[n]-o[0]||1,d=c/(n||1)/1e4,u=[],x=0;x<=n;x++){var p=o[x],g=p-l;l===void 0?(u.push(p),l=p):g>d&&(c=Math.min(c,g),u.push(p),l=p)}return{vals:u,minDiff:c}},C.roundUp=function(r,n,o){for(var l,c=0,d=n.length-1,u=0,x=o?0:1,p=o?1:0,g=o?Math.ceil:Math.floor;c<d&&u++<100;)n[l=g((c+d)/2)]<=r?c=l+x:d=l-p;return n[c]},C.sort=function(r,n){for(var o=0,l=0,c=1;c<r.length;c++){var d=n(r[c],r[c-1]);if(d<0?o=1:d>0&&(l=1),o&&l)return r.sort(n)}return l?r:r.reverse()},C.findIndexOfMin=function(r,n){n=n||a;for(var o,l=1/0,c=0;c<r.length;c++){var d=n(r[c]);d<l&&(l=d,o=c)}return o}},93972:function(F){"use strict";F.exports=function(C,e){(C.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&C.classed(T,!1)}),e&&C.classed("cursor-"+e,!0)}},16576:function(F,C,e){"use strict";var T=e(76308),k=function(){};F.exports=function(a){for(var w in a)typeof a[w]=="function"&&(a[w]=k);a.destroy=function(){a.container.parentNode.removeChild(a.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=T.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=T.lightLine,b.style["z-index"]=30;var f=document.createElement("p");return f.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",f.style.position="relative",f.style.top="50%",f.style.left="50%",f.style.height="30%",f.style.width="50%",f.style.margin="-15% 0 0 -25%",b.appendChild(f),a.container.appendChild(b),a.container.style.background="#FFFFFF",a.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(F){"use strict";F.exports=function(C){return Object.keys(C).sort()}},63084:function(F,C,e){"use strict";var T=e(38248),k=e(38116).isArrayOrTypedArray;C.aggNums=function(a,w,b,f){var s,t;if((!f||f>b.length)&&(f=b.length),T(w)||(w=!1),k(b[0])){for(t=new Array(f),s=0;s<f;s++)t[s]=C.aggNums(a,w,b[s]);b=t}for(s=0;s<f;s++)T(w)?T(b[s])&&(w=a(+w,+b[s])):w=b[s];return w},C.len=function(a){return C.aggNums(function(w){return w+1},0,a)},C.mean=function(a,w){return w||(w=C.len(a)),C.aggNums(function(b,f){return b+f},0,a)/w},C.midRange=function(a){if(a!==void 0&&a.length!==0)return(C.aggNums(Math.max,null,a)+C.aggNums(Math.min,null,a))/2},C.variance=function(a,w,b){return w||(w=C.len(a)),T(b)||(b=C.mean(a,w)),C.aggNums(function(f,s){return f+Math.pow(s-b,2)},0,a)/w},C.stdev=function(a,w,b){return Math.sqrt(C.variance(a,w,b))},C.median=function(a){var w=a.slice().sort();return C.interp(w,.5)},C.interp=function(a,w){if(!T(w))throw"n should be a finite number";if((w=w*a.length-.5)<0)return a[0];if(w>a.length-1)return a[a.length-1];var b=w%1;return b*a[Math.ceil(w)]+(1-b)*a[Math.floor(w)]}},43080:function(F,C,e){"use strict";var T=e(72160);F.exports=function(k){return k?T(k):[0,0,0,1]}},9188:function(F,C,e){"use strict";var T=e(2264),k=e(43616),a=e(3400),w=null;F.exports=function(){if(w!==null)return w;w=!1;var b=a.isIE()||a.isSafari()||a.isIOS();if(window.navigator.userAgent&&!b){var f=Array.from(T.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")w=f.some(function(r){return s.apply(null,r)});else{var t=k.tester.append("image").attr("style",T.STYLE),i=window.getComputedStyle(t.node()).imageRendering;w=f.some(function(r){var n=r[1];return i===n||i===n.toLowerCase()}),t.remove()}}return w}},72736:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=k.strTranslate,w=e(9616),b=e(84284).LINE_SPACING,f=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;C.convertToTspans=function(z,V,O){var j=z.text(),Y=!z.attr("data-notex")&&V&&V._context.typesetMath&&typeof MathJax<"u"&&j.match(f),B=T.select(z.node().parentNode);if(!B.empty()){var U=z.attr("class")?z.attr("class").split(" ")[0]:"text";return U+="-math",B.selectAll("svg."+U).remove(),B.selectAll("g."+U+"-group").remove(),z.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),Y?(V&&V._promises||[]).push(new Promise(function(te){z.style("display","none");var ee=parseInt(z.node().style.fontSize,10),Q={fontSize:ee};(function(J,K,X){var ie,se,ae,ue,ve=parseInt((MathJax.version||"").split(".")[0]);if(ve===2||ve===3){var ye=function(){var de="math-output-"+k.randstr({},64),me=(ue=T.select("body").append("div").attr({id:de}).style({visibility:"hidden",position:"absolute","font-size":K.fontSize+"px"}).text(J.replace(s,"\\lt ").replace(t,"\\gt "))).node();return ve===2?MathJax.Hub.Typeset(me):MathJax.typeset([me])},pe=function(){var de=ue.select(ve===2?".MathJax_SVG":".MathJax"),me=!de.empty()&&ue.select("svg").node();if(me){var ke,Ce=me.getBoundingClientRect();ke=ve===2?T.select("body").select("#MathJax_SVG_glyphs"):de.select("defs"),X(de,ke,Ce)}else k.log("There was an error in the tex syntax.",J),X();ue.remove()};ve===2?MathJax.Hub.Queue(function(){return se=k.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((ie=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ye,pe,function(){if(ie!=="SVG")return MathJax.Hub.setRenderer(ie)},function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(se)}):ve===3&&(se=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(ie=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ye(),pe(),ie!=="svg"&&(MathJax.config.startup.output=ie),MathJax.config=se}))}else k.warn("No MathJax version:",MathJax.version)})(Y[2],Q,function(J,K,X){B.selectAll("svg."+U).remove(),B.selectAll("g."+U+"-group").remove();var ie=J&&J.select("svg");if(!ie||!ie.node())return q(),void te();var se=B.append("g").classed(U+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});se.node().appendChild(ie.node()),K&&K.node()&&ie.node().insertBefore(K.node().cloneNode(!0),ie.node().firstChild);var ae=X.width,ue=X.height;ie.attr({class:U,height:ue,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ve=z.node().style.fill||"black",ye=ie.select("g");ye.attr({fill:ve,stroke:ve});var pe=ye.node().getBoundingClientRect(),de=pe.width,me=pe.height;(de>ae||me>ue)&&(ie.style("overflow","hidden"),de=(pe=ie.node().getBoundingClientRect()).width,me=pe.height);var ke=+z.attr("x"),Ce=+z.attr("y"),ge=-(ee||z.node().getBoundingClientRect().height)/4;if(U[0]==="y")se.attr({transform:"rotate("+[-90,ke,Ce]+")"+a(-de/2,ge-me/2)});else if(U[0]==="l")Ce=ge-me/2;else if(U[0]==="a"&&U.indexOf("atitle")!==0)ke=0,Ce=ge;else{var oe=z.attr("text-anchor");ke-=de*(oe==="middle"?.5:oe==="end"?1:0),Ce=Ce+ge-me/2}ie.attr({x:ke,y:Ce}),O&&O.call(z,se),te(se)})})):q(),z}function q(){B.empty()||(U=z.attr("class")+"-math",B.select("svg."+U).remove()),z.text("").style("white-space","pre");var te=function(ee,Q){Q=Q.replace(d," ");var J,K=!1,X=[],ie=-1;function se(){ie++;var be=document.createElementNS(w.svg,"tspan");T.select(be).attr({class:"line",dy:ie*b+"em"}),ee.appendChild(be),J=be;var we=X;if(X=[{node:be}],we.length>1)for(var Me=1;Me<we.length;Me++)ae(we[Me])}function ae(be){var we,Me=be.type,Pe={};if(Me==="a"){we="a";var De=be.target,he=be.href,_e=be.popup;he&&(Pe={"xlink:xlink:show":De==="_blank"||De.charAt(0)!=="_"?"new":"replace",target:De,"xlink:xlink:href":he},_e&&(Pe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+_e+'");return false;'))}else we="tspan";be.style&&(Pe.style=be.style);var Ae=document.createElementNS(w.svg,we);if(Me==="sup"||Me==="sub"){ue(J,l),J.appendChild(Ae);var Oe=document.createElementNS(w.svg,"tspan");ue(Oe,l),T.select(Oe).attr("dy",o[Me]),Pe.dy=n[Me],J.appendChild(Ae),J.appendChild(Oe)}else J.appendChild(Ae);T.select(Ae).attr(Pe),J=be.node=Ae,X.push(be)}function ue(be,we){be.appendChild(document.createTextNode(we))}function ve(be){if(X.length!==1){var we=X.pop();be!==we.type&&k.log("Start tag <"+we.type+"> doesnt match end tag <"+be+">. Pretending it did match.",Q),J=X[X.length-1].node}else k.log("Ignoring unexpected end tag </"+be+">.",Q)}p.test(Q)?se():(J=ee,X=[{node:ee}]);for(var ye=Q.split(u),pe=0;pe<ye.length;pe++){var de=ye[pe],me=de.match(x),ke=me&&me[2].toLowerCase(),Ce=r[ke];if(ke==="br")se();else if(Ce===void 0)ue(J,E(de));else if(me[1])ve(ke);else{var ge=me[4],oe={type:ke},re=_(ge,g);if(re?(re=re.replace(h,"$1 fill:"),Ce&&(re+=";"+Ce)):Ce&&(re=Ce),re&&(oe.style=re),ke==="a"){K=!0;var fe=_(ge,m);if(fe){var Se=P(fe);Se&&(oe.href=Se,oe.target=_(ge,y)||"_blank",oe.popup=_(ge,v))}}ae(oe)}}return K}(z.node(),j);te&&z.style("pointer-events","all"),C.positionText(z),O&&O.call(z)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},o={sub:"-0.21em",sup:"0.42em"},l="\u200B",c=["http:","https:","mailto:","",void 0,":"],d=C.NEWLINES=/(\r\n?|\n)/g,u=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,p=/<br(\s+.*)?>/i;C.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,m=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,v=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(z,V){if(!z)return null;var O=z.match(V),j=O&&(O[3]||O[4]);return j&&E(j)}var h=/(^|;)\s*color:/;C.plainText=function(z,V){for(var O=(V=V||{}).len!==void 0&&V.len!==-1?V.len:1/0,j=V.allowedTags!==void 0?V.allowedTags:["br"],Y=z.split(u),B=[],U="",q=0,te=0;te<Y.length;te++){var ee=Y[te],Q=ee.match(x),J=Q&&Q[2].toLowerCase();if(J)j.indexOf(J)!==-1&&(B.push(ee),U=J);else{var K=ee.length;if(q+K<O)B.push(ee),q+=K;else if(q<O){var X=O-q;U&&(U!=="br"||X<=3||K<=3)&&B.pop(),O>3?B.push(ee.substr(0,X-3)+"..."):B.push(ee.substr(0,X));break}U=""}}return B.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},A=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(A,function(V,O){return(O.charAt(0)==="#"?function(j){if(!(j>1114111)){var Y=String.fromCodePoint;if(Y)return Y(j);var B=String.fromCharCode;return j<=65535?B(j):B(55232+(j>>10),j%1024+56320)}}(O.charAt(1)==="x"?parseInt(O.substr(2),16):parseInt(O.substr(1),10)):S[O])||V})}function P(z){var V=encodeURI(decodeURI(z)),O=document.createElement("a"),j=document.createElement("a");O.href=z,j.href=V;var Y=O.protocol,B=j.protocol;return c.indexOf(Y)!==-1&&c.indexOf(B)!==-1?V:""}function I(z,V,O){var j,Y,B,U=O.horizontalAlign,q=O.verticalAlign||"top",te=z.node().getBoundingClientRect(),ee=V.node().getBoundingClientRect();return Y=q==="bottom"?function(){return te.bottom-j.height}:q==="middle"?function(){return te.top+(te.height-j.height)/2}:function(){return te.top},B=U==="right"?function(){return te.right-j.width}:U==="center"?function(){return te.left+(te.width-j.width)/2}:function(){return te.left},function(){j=this.node().getBoundingClientRect();var Q=B()-ee.left,J=Y()-ee.top,K=O.gd||{};if(O.gd){K._fullLayout._calcInverseTransform(K);var X=k.apply3DTransform(K._fullLayout._invTransform)(Q,J);Q=X[0],J=X[1]}return this.style({top:J+"px",left:Q+"px","z-index":1e3}),this}}C.convertEntities=E,C.sanitizeHTML=function(z){z=z.replace(d," ");for(var V=document.createElement("p"),O=V,j=[],Y=z.split(u),B=0;B<Y.length;B++){var U=Y[B],q=U.match(x),te=q&&q[2].toLowerCase();if(te in r)if(q[1])j.length&&(O=j.pop());else{var ee=q[4],Q=_(ee,g),J=Q?{style:Q}:{};if(te==="a"){var K=_(ee,m);if(K){var X=P(K);if(X){J.href=X;var ie=_(ee,y);ie&&(J.target=ie)}}}var se=document.createElement(te);O.appendChild(se),T.select(se).attr(J),O=se,j.push(se)}else O.appendChild(document.createTextNode(E(U)))}return V.innerHTML},C.lineCount=function(z){return z.selectAll("tspan.line").size()||1},C.positionText=function(z,V,O){return z.each(function(){var j=T.select(this);function Y(q,te){return te===void 0?(te=j.attr(q))===null&&(j.attr(q,0),te=0):j.attr(q,te),te}var B=Y("x",V),U=Y("y",O);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:B,y:U})})};var D="1px ";C.makeTextShadow=function(z){return D+D+D+z+", -"+D+"-"+D+D+z+", "+D+"-"+D+D+z+", -"+D+D+D+z},C.makeEditable=function(z,V){var O=V.gd,j=V.delegate,Y=T.dispatch("edit","input","cancel"),B=j||z;if(z.style({"pointer-events":j?"none":"all"}),z.size()!==1)throw new Error("boo");function U(){var te,ee,Q,J,K;te=T.select(O).select(".svg-container"),ee=te.append("div"),Q=z.node().style,J=parseFloat(Q.fontSize||12),(K=V.text)===void 0&&(K=z.attr("data-unformatted")),ee.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Q.fontFamily||"Arial","font-size":J,color:V.fill||Q.fill||"black",opacity:1,"background-color":V.background||"transparent",outline:"#ffffff33 1px solid",margin:[-J/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(K).call(I(z,te,V)).on("blur",function(){O._editing=!1,z.text(this.textContent).style({opacity:1});var se,ae=T.select(this).attr("class");(se=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(z.node().parentNode).select(se).style({opacity:0});var ue=this.textContent;T.select(this).transition().duration(0).remove(),T.select(document).on("mouseup",null),Y.edit.call(z,ue)}).on("focus",function(){var se=this;O._editing=!0,T.select(document).on("mouseup",function(){if(T.event.target===se)return!1;document.activeElement===ee.node()&&ee.node().blur()})}).on("keyup",function(){T.event.which===27?(O._editing=!1,z.style({opacity:1}),T.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Y.cancel.call(z,this.textContent)):(Y.input.call(z,this.textContent),T.select(this).call(I(z,te,V)))}).on("keydown",function(){T.event.which===13&&this.blur()}).call(q),z.style({opacity:0});var X,ie=B.attr("class");(X=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&T.select(z.node().parentNode).select(X).style({opacity:0})}function q(te){var ee=te.node(),Q=document.createRange();Q.selectNodeContents(ee);var J=window.getSelection();J.removeAllRanges(),J.addRange(Q),ee.focus()}return V.immediate?U():B.on("click",U),T.rebind(z,Y,"on")}},91200:function(F,C){"use strict";var e={};function T(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}C.throttle=function(k,a,w){var b=e[k],f=Date.now();if(!b){for(var s in e)e[s].ts<f-6e4&&delete e[s];b=e[k]={ts:0,timer:null}}function t(){w(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}T(b),f>b.ts+a?t():b.timer=setTimeout(function(){t(),b.timer=null},a)},C.done=function(k){var a=e[k];return a&&a.timer?new Promise(function(w){var b=a.onDone;a.onDone=function(){b&&b(),w(),a.onDone=null}}):Promise.resolve()},C.clear=function(k){if(k)T(e[k]),delete e[k];else for(var a in e)C.clear(a)}},36896:function(F,C,e){"use strict";var T=e(38248);F.exports=function(k,a){if(k>0)return Math.log(k)/Math.LN10;var w=Math.log(Math.min(a[0],a[1]))/Math.LN10;return T(w)||(w=Math.log(Math.max(a[0],a[1]))/Math.LN10-6),w}},59972:function(F,C,e){"use strict";var T=F.exports={},k=e(79552).locationmodeToLayer,a=e(55712).NO;T.getTopojsonName=function(w){return[w.scope.replace(/ /g,"-"),"_",w.resolution.toString(),"m"].join("")},T.getTopojsonPath=function(w,b){return w+b+".json"},T.getTopojsonFeatures=function(w,b){var f=k[w.locationmode],s=b.objects[f];return a(b,s).features}},11680:function(F){"use strict";F.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(F){"use strict";F.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(F,C,e){"use strict";var T=e(24040);F.exports=function(k){for(var a,w,b=T.layoutArrayContainers,f=T.layoutArrayRegexes,s=k.split("[")[0],t=0;t<f.length;t++)if((w=k.match(f[t]))&&w.index===0){a=w[0];break}if(a||(a=b[b.indexOf(s)]),!a)return!1;var i=k.substr(a.length);return i?!!(w=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:a,index:Number(w[1]),property:w[3]||""}:{array:a,index:"",property:""}}},67824:function(F,C,e){"use strict";var T=e(92880).extendFlat,k=e(63620),a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},w={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=a.flags.slice().concat(["fullReplot"]),f=w.flags.slice().concat("layoutReplot");function s(r){for(var n={},o=0;o<r.length;o++)n[r[o]]=!1;return n}function t(r,n,o){var l=T({},r);for(var c in l){var d=l[c];k(d)&&(l[c]=i(d,n,0,c))}return o==="from-root"&&(l.editType=n),l}function i(r,n,o,l){if(r.valType){var c=T({},r);if(c.editType=n,Array.isArray(r.items)){c.items=new Array(r.items.length);for(var d=0;d<r.items.length;d++)c.items[d]=i(r.items[d],n)}return c}return t(r,n,l.charAt(0)==="_"?"nested":"from-root")}F.exports={traces:a,layout:w,traceFlags:function(){return s(b)},layoutFlags:function(){return s(f)},update:function(r,n){var o=n.editType;if(o&&o!=="none")for(var l=o.split("+"),c=0;c<l.length;c++)r[l[c]]=!0},overrideAll:t}},93404:function(F,C,e){"use strict";var T=e(38248),k=e(61784),a=e(24040),w=e(3400),b=e(7316),f=e(79811),s=e(76308),t=f.cleanId,i=f.getFromTrace,r=a.traceIs;function n(m,y){var v=m[y],_=y.charAt(0);v&&v!=="paper"&&(m[y]=t(v,_,!0))}function o(m){function y(v,_){var h=m[v],S=m.title&&m.title[_];h&&!S&&(m.title||(m.title={}),m.title[_]=m[v],delete m[v])}m&&(typeof m.title!="string"&&typeof m.title!="number"||(m.title={text:m.title}),y("titlefont","font"),y("titleposition","position"),y("titleside","side"),y("titleoffset","offset"))}function l(m){if(!w.isPlainObject(m))return!1;var y=m.name;return delete m.name,delete m.showlegend,(typeof y=="string"||typeof y=="number")&&String(y)}function c(m,y,v,_){if(v&&!_)return m;if(_&&!v||!m.trim())return y;if(!y.trim())return m;var h,S=Math.min(m.length,y.length);for(h=0;h<S&&m.charAt(h)===y.charAt(h);h++);return m.substr(0,h).trim()}function d(m){var y="middle",v="center";return typeof m=="string"&&(m.indexOf("top")!==-1?y="top":m.indexOf("bottom")!==-1&&(y="bottom"),m.indexOf("left")!==-1?v="left":m.indexOf("right")!==-1&&(v="right")),y+" "+v}function u(m,y){return y in m&&typeof m[y]=="object"&&Object.keys(m[y]).length===0}C.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&w.log("Clearing previous rejected promises from queue."),m._promises=[]},C.cleanLayout=function(m){var y,v;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,h=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,A=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(m);for(y=0;y<E.length;y++){var P=E[y];if(_&&_.test(P)){var I=m[P];I.anchor&&I.anchor!=="free"&&(I.anchor=t(I.anchor)),I.overlaying&&(I.overlaying=t(I.overlaying)),I.type||(I.isdate?I.type="date":I.islog?I.type="log":I.isdate===!1&&I.islog===!1&&(I.type="linear")),I.autorange!=="withzero"&&I.autorange!=="tozero"||(I.autorange=!0,I.rangemode="tozero"),I.insiderange&&delete I.range,delete I.islog,delete I.isdate,delete I.categories,u(I,"domain")&&delete I.domain,I.autotick!==void 0&&(I.tickmode===void 0&&(I.tickmode=I.autotick?"auto":"linear"),delete I.autotick),o(I)}else if(h&&h.test(P))o(m[P].radialaxis);else if(S&&S.test(P)){var D=m[P];o(D.aaxis),o(D.baxis),o(D.caxis)}else if(A&&A.test(P)){var z=m[P],V=z.cameraposition;if(Array.isArray(V)&&V[0].length===4){var O=V[0],j=V[1],Y=V[2],B=k([],O),U=[];for(v=0;v<3;++v)U[v]=j[v]+Y*B[2+4*v];z.camera={eye:{x:U[0],y:U[1],z:U[2]},center:{x:j[0],y:j[1],z:j[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}o(z.xaxis),o(z.yaxis),o(z.zaxis)}}var q=Array.isArray(m.annotations)?m.annotations.length:0;for(y=0;y<q;y++){var te=m.annotations[y];w.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),n(te,"xref"),n(te,"yref"))}var ee=Array.isArray(m.shapes)?m.shapes.length:0;for(y=0;y<ee;y++){var Q=m.shapes[y];w.isPlainObject(Q)&&(n(Q,"xref"),n(Q,"yref"))}var J=Array.isArray(m.images)?m.images.length:0;for(y=0;y<J;y++){var K=m.images[y];w.isPlainObject(K)&&(n(K,"xref"),n(K,"yref"))}var X=m.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),o(m),m.dragmode==="rotate"&&(m.dragmode="orbit"),s.clean(m),m.template&&m.template.layout&&C.cleanLayout(m.template.layout),m},C.cleanData=function(m){for(var y=0;y<m.length;y++){var v,_=m[y];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var h=s.defaults,S=_.error_y.color||(r(_,"bar")?s.defaultLine:h[y%h.length]);_.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!r(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",C.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&C.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),r(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!r(_,"pie-like")&&!r(_,"bar-like"))if(Array.isArray(_.textposition))for(v=0;v<_.textposition.length;v++)_.textposition[v]=d(_.textposition[v]);else _.textposition&&(_.textposition=d(_.textposition));var A=a.getModule(_);if(A&&A.colorbar){var E=A.colorbar.container,P=E?_[E]:_;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(_.type==="surface"&&w.isPlainObject(_.contours)){var I=["x","y","z"];for(v=0;v<I.length;v++){var D=_.contours[I[v]];w.isPlainObject(D)&&(D.highlightColor&&(D.highlightcolor=D.highlightColor,delete D.highlightColor),D.highlightWidth&&(D.highlightwidth=D.highlightWidth,delete D.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var z=(_.increasing||{}).showlegend!==!1,V=(_.decreasing||{}).showlegend!==!1,O=l(_.increasing),j=l(_.decreasing);if(O!==!1&&j!==!1){var Y=c(O,j,z,V);Y&&(_.name=Y)}else!O&&!j||_.name||(_.name=O||j)}if(Array.isArray(_.transforms)){var B=_.transforms;for(v=0;v<B.length;v++){var U=B[v];if(w.isPlainObject(U))switch(U.type){case"filter":U.filtersrc&&(U.target=U.filtersrc,delete U.filtersrc),U.calendar&&(U.valuecalendar||(U.valuecalendar=U.calendar),delete U.calendar);break;case"groupby":if(U.styles=U.styles||U.style,U.styles&&!Array.isArray(U.styles)){var q=U.styles,te=Object.keys(q);U.styles=[];for(var ee=0;ee<te.length;ee++)U.styles.push({target:te[ee],value:q[te[ee]]})}}}}u(_,"line")&&delete _.line,"marker"in _&&(u(_.marker,"line")&&delete _.marker.line,u(_,"marker")&&delete _.marker),s.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),o(_),_.colorbar&&o(_.colorbar),_.marker&&_.marker.colorbar&&o(_.marker.colorbar),_.line&&_.line.colorbar&&o(_.line.colorbar),_.aaxis&&o(_.aaxis),_.baxis&&o(_.baxis)}},C.swapXYData=function(m){var y;if(w.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var v=m.error_y,_="copy_ystyle"in v?v.copy_ystyle:!(v.color||v.thickness||v.width);w.swapAttrs(m,["error_?.copy_ystyle"]),_&&w.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if(typeof m.hoverinfo=="string"){var h=m.hoverinfo.split("+");for(y=0;y<h.length;y++)h[y]==="x"?h[y]="y":h[y]==="y"&&(h[y]="x");m.hoverinfo=h.join("+")}},C.coerceTraceIndices=function(m,y){if(T(y))return[y];if(!Array.isArray(y)||!y.length)return m.data.map(function(h,S){return S});if(Array.isArray(y)){for(var v=[],_=0;_<y.length;_++)w.isIndex(y[_],m.data.length)?v.push(y[_]):w.warn("trace index (",y[_],") is not a number or is out of bounds");return v}return y},C.manageArrayContainers=function(m,y,v){var _=m.obj,h=m.parts,S=h.length,A=h[S-1],E=T(A);if(E&&y===null){var P=h.slice(0,S-1).join(".");w.nestedProperty(_,P).get().splice(A,1)}else E&&m.get()===void 0&&m.get()===void 0&&(v[m.astr]=null),m.set(y)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function p(m){var y=m.search(x);if(y>0)return m.substr(0,y)}C.hasParent=function(m,y){for(var v=p(y);v;){if(v in m)return!0;v=p(v)}return!1};var g=["x","y","z"];C.clearAxisTypes=function(m,y,v){for(var _=0;_<y.length;_++)for(var h=m._fullData[_],S=0;S<3;S++){var A=i(m,h,g[S]);if(A&&A.type!=="log"){var E=A._name,P=A._id.substr(1);if(P.substr(0,5)==="scene"){if(v[P]!==void 0)continue;E=P+"."+E}var I=E+".type";v[E]===void 0&&v[I]===void 0&&w.nestedProperty(m.layout,I).set(null)}}}},22448:function(F,C,e){"use strict";var T=e(36424);C._doPlot=T._doPlot,C.newPlot=T.newPlot,C.restyle=T.restyle,C.relayout=T.relayout,C.redraw=T.redraw,C.update=T.update,C._guiRestyle=T._guiRestyle,C._guiRelayout=T._guiRelayout,C._guiUpdate=T._guiUpdate,C._storeDirectGUIEdit=T._storeDirectGUIEdit,C.react=T.react,C.extendTraces=T.extendTraces,C.prependTraces=T.prependTraces,C.addTraces=T.addTraces,C.deleteTraces=T.deleteTraces,C.moveTraces=T.moveTraces,C.purge=T.purge,C.addFrames=T.addFrames,C.deleteFrames=T.deleteFrames,C.animate=T.animate,C.setPlotConfig=T.setPlotConfig;var k=e(52200).getGraphDiv,a=e(4016).eraseActiveShape;C.deleteActiveShape=function(b){return a(k(b))},C.toImage=e(67024),C.validate=e(21480),C.downloadImage=e(39792);var w=e(94828);C.makeTemplate=w.makeTemplate,C.validateTemplate=w.validateTemplate},17680:function(F,C,e){"use strict";var T=e(63620),k=e(16628),a=e(24248),w=e(14952).sorterAsc,b=e(24040);C.containerArrayMatch=e(69820);var f=C.isAddVal=function(t){return t==="add"||T(t)},s=C.isRemoveVal=function(t){return t===null||t==="remove"};C.applyContainerArrayChanges=function(t,i,r,n,o){var l=i.astr,c=b.getComponentMethod(l,"supplyLayoutDefaults"),d=b.getComponentMethod(l,"draw"),u=b.getComponentMethod(l,"drawOne"),x=n.replot||n.recalc||c===k||d===k,p=t.layout,g=t._fullLayout;if(r[""]){Object.keys(r).length>1&&a.warn("Full array edits are incompatible with other edits",l);var m=r[""][""];if(s(m))i.set(null);else{if(!Array.isArray(m))return a.warn("Unrecognized full array edit value",l,m),!0;i.set(m)}return!x&&(c(p,g),d(t),!0)}var y,v,_,h,S,A,E,P,I=Object.keys(r).map(Number).sort(w),D=i.get(),z=D||[],V=o(g,l).get(),O=[],j=-1,Y=z.length;for(y=0;y<I.length;y++)if(h=r[_=I[y]],S=Object.keys(h),A=h[""],E=f(A),_<0||_>z.length-(E?0:1))a.warn("index out of range",l,_);else if(A!==void 0)S.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",l,_),s(A)?O.push(_):E?(A==="add"&&(A={}),z.splice(_,0,A),V&&V.splice(_,0,{})):a.warn("Unrecognized full object edit value",l,_,A),j===-1&&(j=_);else for(v=0;v<S.length;v++)P=l+"["+_+"].",o(z[_],S[v],P).set(h[S[v]]);for(y=O.length-1;y>=0;y--)z.splice(O[y],1),V&&V.splice(O[y],1);if(z.length?D||i.set(z):i.set(null),x)return!1;if(c(p,g),u!==k){var B;if(j===-1)B=I;else{for(Y=Math.max(z.length,Y),B=[],y=0;y<I.length&&!((_=I[y])>=j);y++)B.push(_);for(y=j;y<Y;y++)B.push(y)}for(y=0;y<B.length;y++)u(t,B[y])}else d(t);return!0}},36424:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(52264),w=e(3400),b=w.nestedProperty,f=e(95924),s=e(94552),t=e(24040),i=e(73060),r=e(7316),n=e(54460),o=e(96312),l=e(94724),c=e(43616),d=e(76308),u=e(42464).initInteractions,x=e(9616),p=e(22676).clearOutline,g=e(20556).dfltConfig,m=e(17680),y=e(93404),v=e(39172),_=e(67824),h=e(33816).AX_NAME_PATTERN,S=0;function A(be){var we=be._fullLayout;we._redrawFromAutoMarginCount?we._redrawFromAutoMarginCount--:be.emit("plotly_afterplot")}function E(be,we){try{be._fullLayout._paper.style("background",we)}catch(Me){w.error(Me)}}function P(be,we){E(be,d.combine(we,"white"))}function I(be,we){if(!be._context){be._context=w.extendDeep({},g);var Me=T.select("base");be._context._baseUrl=Me.size()&&Me.attr("href")?window.location.href.split("#")[0]:""}var Pe,De,he,_e=be._context;if(we){for(De=Object.keys(we),Pe=0;Pe<De.length;Pe++)(he=De[Pe])!=="editable"&&he!=="edits"&&he in _e&&(he==="setBackground"&&we[he]==="opaque"?_e[he]=P:_e[he]=we[he]);we.plot3dPixelRatio&&!_e.plotGlPixelRatio&&(_e.plotGlPixelRatio=_e.plot3dPixelRatio);var Ae=we.editable;if(Ae!==void 0)for(_e.editable=Ae,De=Object.keys(_e.edits),Pe=0;Pe<De.length;Pe++)_e.edits[De[Pe]]=Ae;if(we.edits)for(De=Object.keys(we.edits),Pe=0;Pe<De.length;Pe++)(he=De[Pe])in _e.edits&&(_e.edits[he]=we.edits[he]);_e._exportedPlot=we._exportedPlot}_e.staticPlot&&(_e.editable=!1,_e.edits={},_e.autosizable=!1,_e.scrollZoom=!1,_e.doubleClick=!1,_e.showTips=!1,_e.showLink=!1,_e.displayModeBar=!1),_e.displayModeBar!=="hover"||a||(_e.displayModeBar=!0),_e.setBackground!=="transparent"&&typeof _e.setBackground=="function"||(_e.setBackground=E),_e._hasZeroHeight=_e._hasZeroHeight||be.clientHeight===0,_e._hasZeroWidth=_e._hasZeroWidth||be.clientWidth===0;var Oe=_e.scrollZoom,Ee=_e._scrollZoom={};if(Oe===!0)Ee.cartesian=1,Ee.gl3d=1,Ee.geo=1,Ee.mapbox=1;else if(typeof Oe=="string"){var Be=Oe.split("+");for(Pe=0;Pe<Be.length;Pe++)Ee[Be[Pe]]=1}else Oe!==!1&&(Ee.gl3d=1,Ee.geo=1,Ee.mapbox=1)}function D(be,we){var Me,Pe,De=we+1,he=[];for(Me=0;Me<be.length;Me++)(Pe=be[Me])<0?he.push(De+Pe):he.push(Pe);return he}function z(be,we,Me){var Pe,De;for(Pe=0;Pe<we.length;Pe++){if((De=we[Pe])!==parseInt(De,10))throw new Error("all values in "+Me+" must be integers");if(De>=be.data.length||De<-be.data.length)throw new Error(Me+" must be valid indices for gd.data.");if(we.indexOf(De,Pe+1)>-1||De>=0&&we.indexOf(-be.data.length+De)>-1||De<0&&we.indexOf(be.data.length+De)>-1)throw new Error("each index in "+Me+" must be unique.")}}function V(be,we,Me){if(!Array.isArray(be.data))throw new Error("gd.data must be an array.");if(we===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(we)||(we=[we]),z(be,we,"currentIndices"),Me===void 0||Array.isArray(Me)||(Me=[Me]),Me!==void 0&&z(be,Me,"newIndices"),Me!==void 0&&we.length!==Me.length)throw new Error("current and new indices must be of equal length.")}function O(be,we,Me,Pe,De){(function(Ze,it,at,gt){var yt=w.isPlainObject(gt);if(!Array.isArray(Ze.data))throw new Error("gd.data must be an array");if(!w.isPlainObject(it))throw new Error("update must be a key:value object");if(at===void 0)throw new Error("indices must be an integer or array of integers");for(var pt in z(Ze,at,"indices"),it){if(!Array.isArray(it[pt])||it[pt].length!==at.length)throw new Error("attribute "+pt+" must be an array of length equal to indices array length");if(yt&&(!(pt in gt)||!Array.isArray(gt[pt])||gt[pt].length!==it[pt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(be,we,Me,Pe);for(var he=function(Ze,it,at,gt){var yt,pt,et,$e,At,Ot=w.isPlainObject(gt),Rt=[];for(var Ct in Array.isArray(at)||(at=[at]),at=D(at,Ze.data.length-1),it)for(var Ge=0;Ge<at.length;Ge++){if(yt=Ze.data[at[Ge]],pt=(et=b(yt,Ct)).get(),$e=it[Ct][Ge],!w.isArrayOrTypedArray($e))throw new Error("attribute: "+Ct+" index: "+Ge+" must be an array");if(!w.isArrayOrTypedArray(pt))throw new Error("cannot extend missing or non-array attribute: "+Ct);if(pt.constructor!==$e.constructor)throw new Error("cannot extend array with an array of a different type: "+Ct);At=Ot?gt[Ct][Ge]:gt,k(At)||(At=-1),Rt.push({prop:et,target:pt,insert:$e,maxp:Math.floor(At)})}return Rt}(be,we,Me,Pe),_e={},Ae={},Oe=0;Oe<he.length;Oe++){var Ee=he[Oe].prop,Be=he[Oe].maxp,Ve=De(he[Oe].target,he[Oe].insert,Be);Ee.set(Ve[0]),Array.isArray(_e[Ee.astr])||(_e[Ee.astr]=[]),_e[Ee.astr].push(Ve[1]),Array.isArray(Ae[Ee.astr])||(Ae[Ee.astr]=[]),Ae[Ee.astr].push(he[Oe].target.length)}return{update:_e,maxPoints:Ae}}function j(be,we){var Me=new be.constructor(be.length+we.length);return Me.set(be),Me.set(we,be.length),Me}function Y(be,we,Me,Pe){be=w.getGraphDiv(be),y.clearPromiseQueue(be);var De={};if(typeof we=="string")De[we]=Me;else{if(!w.isPlainObject(we))return w.warn("Restyle fail.",we,Me,Pe),Promise.reject();De=w.extendFlat({},we),Pe===void 0&&(Pe=Me)}Object.keys(De).length&&(be.changed=!0);var he=y.coerceTraceIndices(be,Pe),_e=te(be,De,he),Ae=_e.flags;Ae.calc&&(be.calcdata=void 0),Ae.clearAxisTypes&&y.clearAxisTypes(be,he,{});var Oe=[];Ae.fullReplot?Oe.push(C._doPlot):(Oe.push(r.previousPromises),r.supplyDefaults(be),Ae.markerSize&&(r.doCalcdata(be),K(Oe)),Ae.style&&Oe.push(v.doTraceStyle),Ae.colorbars&&Oe.push(v.doColorBars),Oe.push(A)),Oe.push(r.rehover,r.redrag,r.reselect),s.add(be,Y,[be,_e.undoit,_e.traces],Y,[be,_e.redoit,_e.traces]);var Ee=w.syncOrAsync(Oe,be);return Ee&&Ee.then||(Ee=Promise.resolve()),Ee.then(function(){return be.emit("plotly_restyle",_e.eventData),be})}function B(be){return be===void 0?null:be}function U(be,we){return we?function(Me,Pe,De){var he=b(Me,Pe),_e=he.set;return he.set=function(Ae){q((De||"")+Pe,he.get(),Ae,be),_e(Ae)},he}:b}function q(be,we,Me,Pe){if(Array.isArray(we)||Array.isArray(Me))for(var De=Array.isArray(we)?we:[],he=Array.isArray(Me)?Me:[],_e=Math.max(De.length,he.length),Ae=0;Ae<_e;Ae++)q(be+"["+Ae+"]",De[Ae],he[Ae],Pe);else if(w.isPlainObject(we)||w.isPlainObject(Me)){var Oe=w.isPlainObject(we)?we:{},Ee=w.isPlainObject(Me)?Me:{},Be=w.extendFlat({},Oe,Ee);for(var Ve in Be)q(be+"."+Ve,Oe[Ve],Ee[Ve],Pe)}else Pe[be]===void 0&&(Pe[be]=B(we))}function te(be,we,Me){var Pe,De=be._fullLayout,he=be._fullData,_e=be.data,Ae=De._guiEditing,Oe=U(De._preGUI,Ae),Ee=w.extendDeepAll({},we);ee(we);var Be,Ve=_.traceFlags(),Ze={},it={};function at(){return Me.map(function(){})}function gt(Ht){var Zt=n.id2name(Ht);Be.indexOf(Zt)===-1&&Be.push(Zt)}function yt(Ht){return"LAYOUT"+Ht+".autorange"}function pt(Ht){return"LAYOUT"+Ht+".range"}function et(Ht){for(var Zt=Ht;Zt<he.length;Zt++)if(he[Zt]._input===_e[Ht])return he[Zt]}function $e(Ht,Zt,jt){if(Array.isArray(Ht))Ht.forEach(function(mn){$e(mn,Zt,jt)});else if(!(Ht in we)&&!y.hasParent(we,Ht)){var Pn;if(Ht.substr(0,6)==="LAYOUT")Pn=Oe(be.layout,Ht.replace("LAYOUT",""));else{var Tn=Me[jt];Pn=U(De._tracePreGUI[et(Tn)._fullInput.uid],Ae)(_e[Tn],Ht)}Ht in it||(it[Ht]=at()),it[Ht][jt]===void 0&&(it[Ht][jt]=B(Pn.get())),Zt!==void 0&&Pn.set(Zt)}}function At(Ht){return function(Zt){return he[Zt][Ht]}}function Ot(Ht){return function(Zt,jt){return Zt===!1?he[Me[jt]][Ht]:null}}for(var Rt in we){if(y.hasParent(we,Rt))throw new Error("cannot set "+Rt+" and a parent attribute simultaneously");var Ct,Ge,Xe,Ne,Ye,ot,nt=we[Rt];if(Rt!=="autobinx"&&Rt!=="autobiny"||(Rt=Rt.charAt(Rt.length-1)+"bins",nt=Array.isArray(nt)?nt.map(Ot(Rt)):nt===!1?Me.map(At(Rt)):null),Ze[Rt]=nt,Rt.substr(0,6)!=="LAYOUT"){for(it[Rt]=at(),Pe=0;Pe<Me.length;Pe++)if(Ct=_e[Me[Pe]],Ge=et(Me[Pe]),Ne=(Xe=U(De._tracePreGUI[Ge._fullInput.uid],Ae)(Ct,Rt)).get(),(Ye=Array.isArray(nt)?nt[Pe%nt.length]:nt)!==void 0){var ze=Xe.parts[Xe.parts.length-1],Fe=Rt.substr(0,Rt.length-ze.length-1),rt=Fe?Fe+".":"",We=Fe?b(Ge,Fe).get():Ge;if((ot=i.getTraceValObject(Ge,Xe.parts))&&ot.impliedEdits&&Ye!==null)for(var ft in ot.impliedEdits)$e(w.relativeAttr(Rt,ft),ot.impliedEdits[ft],Pe);else if(ze!=="thicknessmode"&&ze!=="lenmode"||Ne===Ye||Ye!=="fraction"&&Ye!=="pixels"||!We){if(Rt==="type"&&(Ye==="pie"!=(Ne==="pie")||Ye==="funnelarea"!=(Ne==="funnelarea"))){var mt="x",vt="y";Ye!=="bar"&&Ne!=="bar"||Ct.orientation!=="h"||(mt="y",vt="x"),w.swapAttrs(Ct,["?","?src"],"labels",mt),w.swapAttrs(Ct,["d?","?0"],"label",mt),w.swapAttrs(Ct,["?","?src"],"values",vt),Ne==="pie"||Ne==="funnelarea"?(b(Ct,"marker.color").set(b(Ct,"marker.colors").get()),De._pielayer.selectAll("g.trace").remove()):t.traceIs(Ct,"cartesian")&&b(Ct,"marker.colors").set(b(Ct,"marker.color").get())}}else{var ut=De._size,Mt=We.orient,bt=Mt==="top"||Mt==="bottom";if(ze==="thicknessmode"){var St=bt?ut.h:ut.w;$e(rt+"thickness",We.thickness*(Ye==="fraction"?1/St:St),Pe)}else{var Pt=bt?ut.w:ut.h;$e(rt+"len",We.len*(Ye==="fraction"?1/Pt:Pt),Pe)}}if(it[Rt][Pe]=B(Ne),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Rt)!==-1){if(Rt==="orientation"){Xe.set(Ye);var Dt=Ct.x&&!Ct.y?"h":"v";if((Xe.get()||Dt)===Ge.orientation)continue}else Rt==="orientationaxes"&&(Ct.orientation={v:"h",h:"v"}[Ge.orientation]);y.swapXYData(Ct),Ve.calc=Ve.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Xe.parts[0])!==-1?(y.manageArrayContainers(Xe,Ye,it),Ve.calc=!0):(ot?ot.arrayOk&&!t.traceIs(Ge,"regl")&&(w.isArrayOrTypedArray(Ye)||w.isArrayOrTypedArray(Ne))?Ve.calc=!0:_.update(Ve,ot):Ve.calc=!0,Xe.set(Ye))}if(["swapxyaxes","orientationaxes"].indexOf(Rt)!==-1&&n.swap(be,Me),Rt==="orientationaxes"){var Ft=b(be.layout,"hovermode"),Xt=Ft.get();Xt==="x"?Ft.set("y"):Xt==="y"?Ft.set("x"):Xt==="x unified"?Ft.set("y unified"):Xt==="y unified"&&Ft.set("x unified")}if(["orientation","type"].indexOf(Rt)!==-1){for(Be=[],Pe=0;Pe<Me.length;Pe++){var an=_e[Me[Pe]];t.traceIs(an,"cartesian")&&(gt(an.xaxis||"x"),gt(an.yaxis||"y"))}$e(Be.map(yt),!0,0),$e(Be.map(pt),[0,1],0)}}else Xe=Oe(be.layout,Rt.replace("LAYOUT","")),it[Rt]=[B(Xe.get())],Xe.set(Array.isArray(nt)?nt[0]:nt),Ve.calc=!0}return(Ve.calc||Ve.plot)&&(Ve.fullReplot=!0),{flags:Ve,undoit:it,redoit:Ze,traces:Me,eventData:w.extendDeepNoArrays([],[Ee,Me])}}function ee(be){var we,Me,Pe,De=w.counterRegex("axis",".title",!1,!1),he=/colorbar\.title$/,_e=Object.keys(be);for(we=0;we<_e.length;we++)Me=_e[we],Pe=be[Me],Me!=="title"&&!De.test(Me)&&!he.test(Me)||typeof Pe!="string"&&typeof Pe!="number"?Me.indexOf("titlefont")>-1&&Me.indexOf("grouptitlefont")===-1?Ae(Me,Me.replace("titlefont","title.font")):Me.indexOf("titleposition")>-1?Ae(Me,Me.replace("titleposition","title.position")):Me.indexOf("titleside")>-1?Ae(Me,Me.replace("titleside","title.side")):Me.indexOf("titleoffset")>-1&&Ae(Me,Me.replace("titleoffset","title.offset")):Ae(Me,Me.replace("title","title.text"));function Ae(Oe,Ee){be[Ee]=be[Oe],delete be[Oe]}}function Q(be,we,Me){be=w.getGraphDiv(be),y.clearPromiseQueue(be);var Pe={};if(typeof we=="string")Pe[we]=Me;else{if(!w.isPlainObject(we))return w.warn("Relayout fail.",we,Me),Promise.reject();Pe=w.extendFlat({},we)}Object.keys(Pe).length&&(be.changed=!0);var De=ae(be,Pe),he=De.flags;he.calc&&(be.calcdata=void 0);var _e=[r.previousPromises];he.layoutReplot?_e.push(v.layoutReplot):Object.keys(Pe).length&&(J(be,he,De)||r.supplyDefaults(be),he.legend&&_e.push(v.doLegend),he.layoutstyle&&_e.push(v.layoutStyles),he.axrange&&K(_e,De.rangesAltered),he.ticks&&_e.push(v.doTicksRelayout),he.modebar&&_e.push(v.doModeBar),he.camera&&_e.push(v.doCamera),he.colorbars&&_e.push(v.doColorBars),_e.push(A)),_e.push(r.rehover,r.redrag,r.reselect),s.add(be,Q,[be,De.undoit],Q,[be,De.redoit]);var Ae=w.syncOrAsync(_e,be);return Ae&&Ae.then||(Ae=Promise.resolve(be)),Ae.then(function(){return be.emit("plotly_relayout",De.eventData),be})}function J(be,we,Me){var Pe,De,he=be._fullLayout;if(!we.axrange)return!1;for(var _e in we)if(_e!=="axrange"&&we[_e])return!1;var Ae=function(it,at){return w.coerce(Pe,De,l,it,at)},Oe={};for(var Ee in Me.rangesAltered){var Be=n.id2name(Ee);if(Pe=be.layout[Be],De=he[Be],o(Pe,De,Ae,Oe),De._matchGroup){for(var Ve in De._matchGroup)if(Ve!==Ee){var Ze=he[n.id2name(Ve)];Ze.autorange=De.autorange,Ze.range=De.range.slice(),Ze._input.range=De.range.slice()}}}return!0}function K(be,we){var Me=we?function(Pe){var De=[];for(var he in we){var _e=n.getFromId(Pe,he);if(De.push(he),(_e.ticklabelposition||"").indexOf("inside")!==-1&&_e._anchorAxis&&De.push(_e._anchorAxis._id),_e._matchGroup)for(var Ae in _e._matchGroup)we[Ae]||De.push(Ae)}return n.draw(Pe,De,{skipTitle:!0})}:function(Pe){return n.draw(Pe,"redraw")};be.push(p,v.doAutoRangeAndConstraints,Me,v.drawData,v.finalDraw)}var X=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,se=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ae(be,we){var Me,Pe,De,he=be.layout,_e=be._fullLayout,Ae=_e._guiEditing,Oe=U(_e._preGUI,Ae),Ee=Object.keys(we),Be=n.list(be),Ve=w.extendDeepAll({},we),Ze={};for(ee(we),Ee=Object.keys(we),Pe=0;Pe<Ee.length;Pe++)if(Ee[Pe].indexOf("allaxes")===0){for(De=0;De<Be.length;De++){var it=Be[De]._id.substr(1),at=it.indexOf("scene")!==-1?it+".":"",gt=Ee[Pe].replace("allaxes",at+Be[De]._name);we[gt]||(we[gt]=we[Ee[Pe]])}delete we[Ee[Pe]]}var yt=_.layoutFlags(),pt={},et={};function $e(mn,Qt){if(Array.isArray(mn))mn.forEach(function(nn){$e(nn,Qt)});else if(!(mn in we)&&!y.hasParent(we,mn)){var un=Oe(he,mn);mn in et||(et[mn]=B(un.get())),Qt!==void 0&&un.set(Qt)}}var At,Ot={};function Rt(mn){var Qt=n.name2id(mn.split(".")[0]);return Ot[Qt]=1,Qt}for(var Ct in we){if(y.hasParent(we,Ct))throw new Error("cannot set "+Ct+" and a parent attribute simultaneously");for(var Ge=Oe(he,Ct),Xe=we[Ct],Ne=Ge.parts.length-1;Ne>0&&typeof Ge.parts[Ne]!="string";)Ne--;var Ye=Ge.parts[Ne],ot=Ge.parts[Ne-1]+"."+Ye,nt=Ge.parts.slice(0,Ne).join("."),ze=b(be.layout,nt).get(),Fe=b(_e,nt).get(),rt=Ge.get();if(Xe!==void 0){pt[Ct]=Xe,et[Ct]=Ye==="reverse"?Xe:B(rt);var We=i.getLayoutValObject(_e,Ge.parts);if(We&&We.impliedEdits&&Xe!==null)for(var ft in We.impliedEdits)$e(w.relativeAttr(Ct,ft),We.impliedEdits[ft]);if(["width","height"].indexOf(Ct)!==-1)if(Xe){$e("autosize",null);var mt=Ct==="height"?"width":"height";$e(mt,_e[mt])}else _e[Ct]=be._initialAutoSize[Ct];else if(Ct==="autosize")$e("width",Xe?null:_e.width),$e("height",Xe?null:_e.height);else if(ot.match(X))Rt(ot),b(_e,nt+"._inputRange").set(null);else if(ot.match(ie)){Rt(ot),b(_e,nt+"._inputRange").set(null);var vt=b(_e,nt).get();vt._inputDomain&&(vt._input.domain=vt._inputDomain.slice())}else ot.match(se)&&b(_e,nt+"._inputDomain").set(null);if(Ye==="type"){At=ze;var ut=Fe.type==="linear"&&Xe==="log",Mt=Fe.type==="log"&&Xe==="linear";if(ut||Mt){if(At&&At.range)if(Fe.autorange)ut&&(At.range=At.range[1]>At.range[0]?[1,2]:[2,1]);else{var bt=At.range[0],St=At.range[1];ut?(bt<=0&&St<=0&&$e(nt+".autorange",!0),bt<=0?bt=St/1e6:St<=0&&(St=bt/1e6),$e(nt+".range[0]",Math.log(bt)/Math.LN10),$e(nt+".range[1]",Math.log(St)/Math.LN10)):($e(nt+".range[0]",Math.pow(10,bt)),$e(nt+".range[1]",Math.pow(10,St)))}else $e(nt+".autorange",!0);Array.isArray(_e._subplots.polar)&&_e._subplots.polar.length&&_e[Ge.parts[0]]&&Ge.parts[1]==="radialaxis"&&delete _e[Ge.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(be,Fe,Xe,$e),t.getComponentMethod("images","convertCoords")(be,Fe,Xe,$e)}else $e(nt+".autorange",!0),$e(nt+".range",null);b(_e,nt+"._inputRange").set(null)}else if(Ye.match(h)){var Pt=b(_e,Ct).get(),Dt=(Xe||{}).type;Dt&&Dt!=="-"||(Dt="linear"),t.getComponentMethod("annotations","convertCoords")(be,Pt,Dt,$e),t.getComponentMethod("images","convertCoords")(be,Pt,Dt,$e)}var Ft=m.containerArrayMatch(Ct);if(Ft){Me=Ft.array,Pe=Ft.index;var Xt=Ft.property,an=We||{editType:"calc"};Pe!==""&&Xt===""&&(m.isAddVal(Xe)?et[Ct]=null:m.isRemoveVal(Xe)?et[Ct]=(b(he,Me).get()||[])[Pe]:w.warn("unrecognized full object value",we)),_.update(yt,an),Ze[Me]||(Ze[Me]={});var Ht=Ze[Me][Pe];Ht||(Ht=Ze[Me][Pe]={}),Ht[Xt]=Xe,delete we[Ct]}else Ye==="reverse"?(ze.range?ze.range.reverse():($e(nt+".autorange",!0),ze.range=[1,0]),Fe.autorange?yt.calc=!0:yt.plot=!0):(Ct==="dragmode"&&(Xe===!1&&rt!==!1||Xe!==!1&&rt===!1)||_e._has("scatter-like")&&_e._has("regl")&&Ct==="dragmode"&&(Xe==="lasso"||Xe==="select")&&rt!=="lasso"&&rt!=="select"||_e._has("gl2d")?yt.plot=!0:We?_.update(yt,We):yt.calc=!0,Ge.set(Xe))}}for(Me in Ze)m.applyContainerArrayChanges(be,Oe(he,Me),Ze[Me],yt,Oe)||(yt.plot=!0);for(var Zt in Ot){var jt=(At=n.getFromId(be,Zt))&&At._constraintGroup;if(jt)for(var Pn in yt.calc=!0,jt)Ot[Pn]||(n.getFromId(be,Pn)._constraintShrinkable=!0)}(ue(be)||we.height||we.width)&&(yt.plot=!0);var Tn=_e.shapes;for(Pe=0;Pe<Tn.length;Pe++)if(Tn[Pe].showlegend){yt.calc=!0;break}return(yt.plot||yt.calc)&&(yt.layoutReplot=!0),{flags:yt,rangesAltered:Ot,undoit:et,redoit:pt,eventData:Ve}}function ue(be){var we=be._fullLayout,Me=we.width,Pe=we.height;return be.layout.autosize&&r.plotAutoSize(be,be.layout,we),we.width!==Me||we.height!==Pe}function ve(be,we,Me,Pe){be=w.getGraphDiv(be),y.clearPromiseQueue(be),w.isPlainObject(we)||(we={}),w.isPlainObject(Me)||(Me={}),Object.keys(we).length&&(be.changed=!0),Object.keys(Me).length&&(be.changed=!0);var De=y.coerceTraceIndices(be,Pe),he=te(be,w.extendFlat({},we),De),_e=he.flags,Ae=ae(be,w.extendFlat({},Me)),Oe=Ae.flags;(_e.calc||Oe.calc)&&(be.calcdata=void 0),_e.clearAxisTypes&&y.clearAxisTypes(be,De,Me);var Ee=[];Oe.layoutReplot?Ee.push(v.layoutReplot):_e.fullReplot?Ee.push(C._doPlot):(Ee.push(r.previousPromises),J(be,Oe,Ae)||r.supplyDefaults(be),_e.style&&Ee.push(v.doTraceStyle),(_e.colorbars||Oe.colorbars)&&Ee.push(v.doColorBars),Oe.legend&&Ee.push(v.doLegend),Oe.layoutstyle&&Ee.push(v.layoutStyles),Oe.axrange&&K(Ee,Ae.rangesAltered),Oe.ticks&&Ee.push(v.doTicksRelayout),Oe.modebar&&Ee.push(v.doModeBar),Oe.camera&&Ee.push(v.doCamera),Ee.push(A)),Ee.push(r.rehover,r.redrag,r.reselect),s.add(be,ve,[be,he.undoit,Ae.undoit,he.traces],ve,[be,he.redoit,Ae.redoit,he.traces]);var Be=w.syncOrAsync(Ee,be);return Be&&Be.then||(Be=Promise.resolve(be)),Be.then(function(){return be.emit("plotly_update",{data:he.eventData,layout:Ae.eventData}),be})}function ye(be){return function(we){we._fullLayout._guiEditing=!0;var Me=be.apply(null,arguments);return we._fullLayout._guiEditing=!1,Me}}var pe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],de=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function me(be,we){for(var Me=0;Me<we.length;Me++){var Pe=we[Me],De=be.match(Pe.pattern);if(De){var he=De[1]||"";return{head:he,tail:be.substr(he.length+1),attr:Pe.attr}}}}function ke(be,we){var Me=b(we,be).get();if(Me!==void 0)return Me;var Pe=be.split(".");for(Pe.pop();Pe.length>1;)if(Pe.pop(),(Me=b(we,Pe.join(".")+".uirevision").get())!==void 0)return Me;return we.uirevision}function Ce(be,we){for(var Me=0;Me<we.length;Me++)if(we[Me]._fullInput.uid===be)return Me;return-1}function ge(be,we,Me){for(var Pe=0;Pe<we.length;Pe++)if(we[Pe].uid===be)return Pe;return!we[Me]||we[Me].uid?-1:Me}function oe(be,we){var Me=w.isPlainObject(be),Pe=Array.isArray(be);return Me||Pe?(Me&&w.isPlainObject(we)||Pe&&Array.isArray(we))&&JSON.stringify(be)===JSON.stringify(we):be===we}function re(be,we,Me,Pe){var De,he,_e,Ae=Pe.getValObject,Oe=Pe.flags,Ee=Pe.immutable,Be=Pe.inArray,Ve=Pe.arrayIndex;function Ze(){var ze=De.editType;Be&&ze.indexOf("arraydraw")!==-1?w.pushUnique(Oe.arrays[Be],Ve):(_.update(Oe,De),ze!=="none"&&Oe.nChanges++,Pe.transition&&De.anim&&Oe.nChangesAnim++,(X.test(_e)||ie.test(_e))&&(Oe.rangesAltered[Me[0]]=1),se.test(_e)&&b(we,"_inputDomain").set(null),he==="datarevision"&&(Oe.newDataRevision=1))}function it(ze){return ze.valType==="data_array"||ze.arrayOk}for(he in be){if(Oe.calc&&!Pe.transition)return;var at=be[he],gt=we[he],yt=Me.concat(he);if(_e=yt.join("."),he.charAt(0)!=="_"&&typeof at!="function"&&at!==gt){if((he==="tick0"||he==="dtick")&&Me[0]!=="geo"){var pt=we.tickmode;if(pt==="auto"||pt==="array"||!pt)continue}if((he!=="range"||!we.autorange)&&(he!=="zmin"&&he!=="zmax"||we.type!=="contourcarpet")&&(De=Ae(yt))&&(!De._compareAsJSON||JSON.stringify(at)!==JSON.stringify(gt))){var et,$e=De.valType,At=it(De),Ot=Array.isArray(at),Rt=Array.isArray(gt);if(Ot&&Rt){var Ct="_input_"+he,Ge=be[Ct],Xe=we[Ct];if(Array.isArray(Ge)&&Ge===Xe)continue}if(gt===void 0)At&&Ot?Oe.calc=!0:Ze();else if(De._isLinkedToArray){var Ne=[],Ye=!1;Be||(Oe.arrays[he]=Ne);var ot=Math.min(at.length,gt.length),nt=Math.max(at.length,gt.length);if(ot!==nt){if(De.editType!=="arraydraw"){Ze();continue}Ye=!0}for(et=0;et<ot;et++)re(at[et],gt[et],yt.concat(et),w.extendFlat({inArray:he,arrayIndex:et},Pe));if(Ye)for(et=ot;et<nt;et++)Ne.push(et)}else!$e&&w.isPlainObject(at)?re(at,gt,yt,Pe):At?Ot&&Rt?(Ee&&(Oe.calc=!0),(Ee||Pe.newDataRevision)&&Ze()):Ot!==Rt?Oe.calc=!0:Ze():Ot&&Rt&&at.length===gt.length&&String(at)===String(gt)||Ze()}}}for(he in we)if(!(he in be)&&he.charAt(0)!=="_"&&typeof we[he]!="function"){if(it(De=Ae(Me.concat(he)))&&Array.isArray(we[he]))return void(Oe.calc=!0);Ze()}}function fe(be,we){var Me;for(Me in be)if(Me.charAt(0)!=="_"){var Pe=be[Me],De=we[Me];if(Pe!==De)if(w.isPlainObject(Pe)&&w.isPlainObject(De)){if(fe(Pe,De))return!0}else{if(!Array.isArray(Pe)||!Array.isArray(De)||Pe.length!==De.length)return!0;for(var he=0;he<Pe.length;he++)if(Pe[he]!==De[he]&&(!w.isPlainObject(Pe[he])||!w.isPlainObject(De[he])||fe(Pe[he],De[he])))return!0}}}function Se(be){var we=be._fullLayout,Me=be.getBoundingClientRect();if(!w.equalDomRects(Me,we._lastBBox)){var Pe=we._invTransform=w.inverseTransformMatrix(w.getFullTransformMatrix(be));we._invScaleX=Math.sqrt(Pe[0][0]*Pe[0][0]+Pe[0][1]*Pe[0][1]+Pe[0][2]*Pe[0][2]),we._invScaleY=Math.sqrt(Pe[1][0]*Pe[1][0]+Pe[1][1]*Pe[1][1]+Pe[1][2]*Pe[1][2]),we._lastBBox=Me}}C.animate=function(be,we,Me){if(be=w.getGraphDiv(be),!w.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Pe=be._transitionData;Pe._frameQueue||(Pe._frameQueue=[]);var De=(Me=r.supplyAnimationDefaults(Me)).transition,he=Me.frame;function _e(Ee){return Array.isArray(De)?Ee>=De.length?De[0]:De[Ee]:De}function Ae(Ee){return Array.isArray(he)?Ee>=he.length?he[0]:he[Ee]:he}function Oe(Ee,Be){var Ve=0;return function(){if(Ee&&++Ve===Be)return Ee()}}return Pe._frameWaitingCnt===void 0&&(Pe._frameWaitingCnt=0),new Promise(function(Ee,Be){function Ve(){be.emit("plotly_animating"),Pe._lastFrameAt=-1/0,Pe._timeToNext=0,Pe._runningTransitions=0,Pe._currentFrame=null;var Ct=function(){Pe._animationRaf=window.requestAnimationFrame(Ct),Date.now()-Pe._lastFrameAt>Pe._timeToNext&&function(){Pe._currentFrame&&Pe._currentFrame.onComplete&&Pe._currentFrame.onComplete();var Ge=Pe._currentFrame=Pe._frameQueue.shift();if(Ge){var Xe=Ge.name?Ge.name.toString():null;be._fullLayout._currentFrame=Xe,Pe._lastFrameAt=Date.now(),Pe._timeToNext=Ge.frameOpts.duration,r.transition(be,Ge.frame.data,Ge.frame.layout,y.coerceTraceIndices(be,Ge.frame.traces),Ge.frameOpts,Ge.transitionOpts).then(function(){Ge.onComplete&&Ge.onComplete()}),be.emit("plotly_animatingframe",{name:Xe,frame:Ge.frame,animation:{frame:Ge.frameOpts,transition:Ge.transitionOpts}})}else be.emit("plotly_animated"),window.cancelAnimationFrame(Pe._animationRaf),Pe._animationRaf=null}()};Ct()}var Ze,it,at=0;function gt(Ct){return Array.isArray(De)?at>=De.length?Ct.transitionOpts=De[at]:Ct.transitionOpts=De[0]:Ct.transitionOpts=De,at++,Ct}var yt=[],pt=we==null,et=Array.isArray(we);if(pt||et||!w.isPlainObject(we)){if(pt||["string","number"].indexOf(typeof we)!==-1)for(Ze=0;Ze<Pe._frames.length;Ze++)(it=Pe._frames[Ze])&&(pt||String(it.group)===String(we))&&yt.push({type:"byname",name:String(it.name),data:gt({name:it.name})});else if(et)for(Ze=0;Ze<we.length;Ze++){var $e=we[Ze];["number","string"].indexOf(typeof $e)!==-1?($e=String($e),yt.push({type:"byname",name:$e,data:gt({name:$e})})):w.isPlainObject($e)&&yt.push({type:"object",data:gt(w.extendFlat({},$e))})}}else yt.push({type:"object",data:gt(w.extendFlat({},we))});for(Ze=0;Ze<yt.length;Ze++)if((it=yt[Ze]).type==="byname"&&!Pe._frameHash[it.data.name])return w.warn('animate failure: frame not found: "'+it.data.name+'"'),void Be();["next","immediate"].indexOf(Me.mode)!==-1&&function(){if(Pe._frameQueue.length!==0){for(;Pe._frameQueue.length;){var Ct=Pe._frameQueue.pop();Ct.onInterrupt&&Ct.onInterrupt()}be.emit("plotly_animationinterrupted",[])}}(),Me.direction==="reverse"&&yt.reverse();var At=be._fullLayout._currentFrame;if(At&&Me.fromcurrent){var Ot=-1;for(Ze=0;Ze<yt.length;Ze++)if((it=yt[Ze]).type==="byname"&&it.name===At){Ot=Ze;break}if(Ot>0&&Ot<yt.length-1){var Rt=[];for(Ze=0;Ze<yt.length;Ze++)it=yt[Ze],(yt[Ze].type!=="byname"||Ze>Ot)&&Rt.push(it);yt=Rt}}yt.length>0?function(Ct){if(Ct.length!==0){for(var Ge=0;Ge<Ct.length;Ge++){var Xe;Xe=Ct[Ge].type==="byname"?r.computeFrame(be,Ct[Ge].name):Ct[Ge].data;var Ne=Ae(Ge),Ye=_e(Ge);Ye.duration=Math.min(Ye.duration,Ne.duration);var ot={frame:Xe,name:Ct[Ge].name,frameOpts:Ne,transitionOpts:Ye};Ge===Ct.length-1&&(ot.onComplete=Oe(Ee,2),ot.onInterrupt=Be),Pe._frameQueue.push(ot)}Me.mode==="immediate"&&(Pe._lastFrameAt=-1/0),Pe._animationRaf||Ve()}}(yt):(be.emit("plotly_animated"),Ee())})},C.addFrames=function(be,we,Me){if(be=w.getGraphDiv(be),we==null)return Promise.resolve();if(!w.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Pe,De,he,_e,Ae=be._transitionData._frames,Oe=be._transitionData._frameHash;if(!Array.isArray(we))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+we);var Ee=Ae.length+2*we.length,Be=[],Ve={};for(Pe=we.length-1;Pe>=0;Pe--)if(w.isPlainObject(we[Pe])){var Ze=we[Pe].name,it=(Oe[Ze]||Ve[Ze]||{}).name,at=we[Pe].name,gt=Oe[it]||Ve[it];it&&at&&typeof at=="number"&&gt&&S<5&&(S++,w.warn('addFrames: overwriting frame "'+(Oe[it]||Ve[it]).name+'" with a frame whose name of type "number" also equates to "'+it+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&w.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ve[Ze]={name:Ze},Be.push({frame:r.supplyFrameDefaults(we[Pe]),index:Me&&Me[Pe]!==void 0&&Me[Pe]!==null?Me[Pe]:Ee+Pe})}Be.sort(function(Ct,Ge){return Ct.index>Ge.index?-1:Ct.index<Ge.index?1:0});var yt=[],pt=[],et=Ae.length;for(Pe=Be.length-1;Pe>=0;Pe--){if(typeof(De=Be[Pe].frame).name=="number"&&w.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!De.name)for(;Oe[De.name="frame "+be._transitionData._counter++];);if(Oe[De.name]){for(he=0;he<Ae.length&&(Ae[he]||{}).name!==De.name;he++);yt.push({type:"replace",index:he,value:De}),pt.unshift({type:"replace",index:he,value:Ae[he]})}else _e=Math.max(0,Math.min(Be[Pe].index,et)),yt.push({type:"insert",index:_e,value:De}),pt.unshift({type:"delete",index:_e}),et++}var $e=r.modifyFrames,At=r.modifyFrames,Ot=[be,pt],Rt=[be,yt];return s&&s.add(be,$e,Ot,At,Rt),r.modifyFrames(be,yt)},C.deleteFrames=function(be,we){if(be=w.getGraphDiv(be),!w.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be);var Me,Pe,De=be._transitionData._frames,he=[],_e=[];if(!we)for(we=[],Me=0;Me<De.length;Me++)we.push(Me);for((we=we.slice()).sort(),Me=we.length-1;Me>=0;Me--)Pe=we[Me],he.push({type:"delete",index:Pe}),_e.unshift({type:"insert",index:Pe,value:De[Pe]});var Ae=r.modifyFrames,Oe=r.modifyFrames,Ee=[be,_e],Be=[be,he];return s&&s.add(be,Ae,Ee,Oe,Be),r.modifyFrames(be,he)},C.addTraces=function be(we,Me,Pe){we=w.getGraphDiv(we);var De,he,_e=[],Ae=C.deleteTraces,Oe=be,Ee=[we,_e],Be=[we,Me];for(function(Ve,Ze,it){var at,gt;if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(Ze===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ze)||(Ze=[Ze]),at=0;at<Ze.length;at++)if(typeof(gt=Ze[at])!="object"||Array.isArray(gt)||gt===null)throw new Error("all values in traces array must be non-array objects");if(it===void 0||Array.isArray(it)||(it=[it]),it!==void 0&&it.length!==Ze.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(we,Me,Pe),Array.isArray(Me)||(Me=[Me]),Me=Me.map(function(Ve){return w.extendFlat({},Ve)}),y.cleanData(Me),De=0;De<Me.length;De++)we.data.push(Me[De]);for(De=0;De<Me.length;De++)_e.push(-Me.length+De);if(Pe===void 0)return he=C.redraw(we),s.add(we,Ae,Ee,Oe,Be),he;Array.isArray(Pe)||(Pe=[Pe]);try{V(we,_e,Pe)}catch(Ve){throw we.data.splice(we.data.length-Me.length,Me.length),Ve}return s.startSequence(we),s.add(we,Ae,Ee,Oe,Be),he=C.moveTraces(we,_e,Pe),s.stopSequence(we),he},C.deleteTraces=function be(we,Me){we=w.getGraphDiv(we);var Pe,De,he=[],_e=C.addTraces,Ae=be,Oe=[we,he,Me],Ee=[we,Me];if(Me===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Me)||(Me=[Me]),z(we,Me,"indices"),(Me=D(Me,we.data.length-1)).sort(w.sorterDes),Pe=0;Pe<Me.length;Pe+=1)De=we.data.splice(Me[Pe],1)[0],he.push(De);var Be=C.redraw(we);return s.add(we,_e,Oe,Ae,Ee),Be},C.extendTraces=function be(we,Me,Pe,De){var he=O(we=w.getGraphDiv(we),Me,Pe,De,function(Oe,Ee,Be){var Ve,Ze;if(w.isTypedArray(Oe))if(Be<0){var it=new Oe.constructor(0),at=j(Oe,Ee);Be<0?(Ve=at,Ze=it):(Ve=it,Ze=at)}else if(Ve=new Oe.constructor(Be),Ze=new Oe.constructor(Oe.length+Ee.length-Be),Be===Ee.length)Ve.set(Ee),Ze.set(Oe);else if(Be<Ee.length){var gt=Ee.length-Be;Ve.set(Ee.subarray(gt)),Ze.set(Oe),Ze.set(Ee.subarray(0,gt),Oe.length)}else{var yt=Be-Ee.length,pt=Oe.length-yt;Ve.set(Oe.subarray(pt)),Ve.set(Ee,yt),Ze.set(Oe.subarray(0,pt))}else Ve=Oe.concat(Ee),Ze=Be>=0&&Be<Ve.length?Ve.splice(0,Ve.length-Be):[];return[Ve,Ze]}),_e=C.redraw(we),Ae=[we,he.update,Pe,he.maxPoints];return s.add(we,C.prependTraces,Ae,be,arguments),_e},C.moveTraces=function be(we,Me,Pe){var De,he=[],_e=[],Ae=be,Oe=be,Ee=[we=w.getGraphDiv(we),Pe,Me],Be=[we,Me,Pe];if(V(we,Me,Pe),Me=Array.isArray(Me)?Me:[Me],Pe===void 0)for(Pe=[],De=0;De<Me.length;De++)Pe.push(-Me.length+De);for(Pe=Array.isArray(Pe)?Pe:[Pe],Me=D(Me,we.data.length-1),Pe=D(Pe,we.data.length-1),De=0;De<we.data.length;De++)Me.indexOf(De)===-1&&he.push(we.data[De]);for(De=0;De<Me.length;De++)_e.push({newIndex:Pe[De],trace:we.data[Me[De]]});for(_e.sort(function(Ze,it){return Ze.newIndex-it.newIndex}),De=0;De<_e.length;De+=1)he.splice(_e[De].newIndex,0,_e[De].trace);we.data=he;var Ve=C.redraw(we);return s.add(we,Ae,Ee,Oe,Be),Ve},C.prependTraces=function be(we,Me,Pe,De){var he=O(we=w.getGraphDiv(we),Me,Pe,De,function(Oe,Ee,Be){var Ve,Ze;if(w.isTypedArray(Oe))if(Be<=0){var it=new Oe.constructor(0),at=j(Ee,Oe);Be<0?(Ve=at,Ze=it):(Ve=it,Ze=at)}else if(Ve=new Oe.constructor(Be),Ze=new Oe.constructor(Oe.length+Ee.length-Be),Be===Ee.length)Ve.set(Ee),Ze.set(Oe);else if(Be<Ee.length){var gt=Ee.length-Be;Ve.set(Ee.subarray(0,gt)),Ze.set(Ee.subarray(gt)),Ze.set(Oe,gt)}else{var yt=Be-Ee.length;Ve.set(Ee),Ve.set(Oe.subarray(0,yt),Ee.length),Ze.set(Oe.subarray(yt))}else Ve=Ee.concat(Oe),Ze=Be>=0&&Be<Ve.length?Ve.splice(Be,Ve.length):[];return[Ve,Ze]}),_e=C.redraw(we),Ae=[we,he.update,Pe,he.maxPoints];return s.add(we,C.extendTraces,Ae,be,arguments),_e},C.newPlot=function(be,we,Me,Pe){return be=w.getGraphDiv(be),r.cleanPlot([],{},be._fullData||[],be._fullLayout||{}),r.purge(be),C._doPlot(be,we,Me,Pe)},C._doPlot=function(be,we,Me,Pe){var De;if(be=w.getGraphDiv(be),f.init(be),w.isPlainObject(we)){var he=we;we=he.data,Me=he.layout,Pe=he.config,De=he.frames}if(f.triggerHandler(be,"plotly_beforeplot",[we,Me,Pe])===!1)return Promise.reject();we||Me||w.isPlotDiv(be)||w.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",be),I(be,Pe),Me||(Me={}),T.select(be).classed("js-plotly-plot",!0),c.makeTester(),Array.isArray(be._promises)||(be._promises=[]);var _e=(be.data||[]).length===0&&Array.isArray(we);Array.isArray(we)&&(y.cleanData(we),_e?be.data=we:be.data.push.apply(be.data,we),be.empty=!1),be.layout&&!_e||(be.layout=y.cleanLayout(Me)),r.supplyDefaults(be);var Ae=be._fullLayout,Oe=Ae._has("cartesian");Ae._replotting=!0,(_e||Ae._shouldCreateBgLayer)&&(function(pt){var et=T.select(pt),$e=pt._fullLayout;if($e._calcInverseTransform=Se,$e._calcInverseTransform(pt),$e._container=et.selectAll(".plot-container").data([0]),$e._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),$e._paperdiv=$e._container.selectAll(".svg-container").data([0]),$e._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),$e._glcontainer=$e._paperdiv.selectAll(".gl-container").data([{}]),$e._glcontainer.enter().append("div").classed("gl-container",!0),$e._paperdiv.selectAll(".main-svg").remove(),$e._paperdiv.select(".modebar-container").remove(),$e._paper=$e._paperdiv.insert("svg",":first-child").classed("main-svg",!0),$e._toppaper=$e._paperdiv.append("svg").classed("main-svg",!0),$e._modebardiv=$e._paperdiv.append("div"),delete $e._modeBar,$e._hoverpaper=$e._paperdiv.append("svg").classed("main-svg",!0),!$e._uid){var At={};T.selectAll("defs").each(function(){this.id&&(At[this.id.split("-")[1]]=1)}),$e._uid=w.randstr(At)}$e._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),$e._defs=$e._paper.append("defs").attr("id","defs-"+$e._uid),$e._clips=$e._defs.append("g").classed("clips",!0),$e._topdefs=$e._toppaper.append("defs").attr("id","topdefs-"+$e._uid),$e._topclips=$e._topdefs.append("g").classed("clips",!0),$e._bgLayer=$e._paper.append("g").classed("bglayer",!0),$e._draggers=$e._paper.append("g").classed("draglayer",!0);var Ot=$e._paper.append("g").classed("layer-below",!0);$e._imageLowerLayer=Ot.append("g").classed("imagelayer",!0),$e._shapeLowerLayer=Ot.append("g").classed("shapelayer",!0),$e._cartesianlayer=$e._paper.append("g").classed("cartesianlayer",!0),$e._polarlayer=$e._paper.append("g").classed("polarlayer",!0),$e._smithlayer=$e._paper.append("g").classed("smithlayer",!0),$e._ternarylayer=$e._paper.append("g").classed("ternarylayer",!0),$e._geolayer=$e._paper.append("g").classed("geolayer",!0),$e._funnelarealayer=$e._paper.append("g").classed("funnelarealayer",!0),$e._pielayer=$e._paper.append("g").classed("pielayer",!0),$e._iciclelayer=$e._paper.append("g").classed("iciclelayer",!0),$e._treemaplayer=$e._paper.append("g").classed("treemaplayer",!0),$e._sunburstlayer=$e._paper.append("g").classed("sunburstlayer",!0),$e._indicatorlayer=$e._toppaper.append("g").classed("indicatorlayer",!0),$e._glimages=$e._paper.append("g").classed("glimages",!0);var Rt=$e._toppaper.append("g").classed("layer-above",!0);$e._imageUpperLayer=Rt.append("g").classed("imagelayer",!0),$e._shapeUpperLayer=Rt.append("g").classed("shapelayer",!0),$e._selectionLayer=$e._toppaper.append("g").classed("selectionlayer",!0),$e._infolayer=$e._toppaper.append("g").classed("infolayer",!0),$e._menulayer=$e._toppaper.append("g").classed("menulayer",!0),$e._zoomlayer=$e._toppaper.append("g").classed("zoomlayer",!0),$e._hoverlayer=$e._hoverpaper.append("g").classed("hoverlayer",!0),$e._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),pt.emit("plotly_framework")}(be),Ae._shouldCreateBgLayer&&delete Ae._shouldCreateBgLayer),c.initGradients(be),c.initPatterns(be),_e&&n.saveShowSpikeInitial(be);var Ee=!be.calcdata||be.calcdata.length!==(be._fullData||[]).length;Ee&&r.doCalcdata(be);for(var Be=0;Be<be.calcdata.length;Be++)be.calcdata[Be][0].trace=be._fullData[Be];be._context.responsive?be._responsiveChartHandler||(be._responsiveChartHandler=function(){w.isHidden(be)||r.resize(be)},window.addEventListener("resize",be._responsiveChartHandler)):w.clearResponsive(be);var Ve=w.extendFlat({},Ae._size),Ze=0;function it(){if(r.clearAutoMarginIds(be),v.drawMarginPushers(be),n.allowAutoMargin(be),be._fullLayout.title.text&&be._fullLayout.title.automargin&&r.allowAutoMargin(be,"title.automargin"),Ae._has("pie"))for(var pt=be._fullData,et=0;et<pt.length;et++){var $e=pt[et];$e.type==="pie"&&$e.automargin&&r.allowAutoMargin(be,"pie."+$e.uid+".automargin")}return r.doAutoMargin(be),r.previousPromises(be)}function at(){be._transitioning||(v.doAutoRangeAndConstraints(be),_e&&n.saveRangeInitial(be),t.getComponentMethod("rangeslider","calcAutorange")(be))}var gt=[r.previousPromises,function(){if(De)return C.addFrames(be,De)},function pt(){for(var et=Ae._basePlotModules,$e=0;$e<et.length;$e++)et[$e].drawFramework&&et[$e].drawFramework(be);!Ae._glcanvas&&Ae._has("gl")&&(Ae._glcanvas=Ae._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ct){return Ct.key}),Ae._glcanvas.enter().append("canvas").attr("class",function(Ct){return"gl-canvas gl-canvas-"+Ct.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var At=be._context.plotGlPixelRatio;if(Ae._glcanvas){Ae._glcanvas.attr("width",Ae.width*At).attr("height",Ae.height*At).style("width",Ae.width+"px").style("height",Ae.height+"px");var Ot=Ae._glcanvas.data()[0].regl;if(Ot&&(Math.floor(Ae.width*At)!==Ot._gl.drawingBufferWidth||Math.floor(Ae.height*At)!==Ot._gl.drawingBufferHeight)){var Rt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ze)return w.log(Rt+" Clearing graph and plotting again."),r.cleanPlot([],{},be._fullData,Ae),r.supplyDefaults(be),Ae=be._fullLayout,r.doCalcdata(be),Ze++,pt();w.error(Rt)}}return Ae.modebar.orientation==="h"?Ae._modebardiv.style("height",null).style("width","100%"):Ae._modebardiv.style("width",null).style("height",Ae.height+"px"),r.previousPromises(be)},it,function(){if(r.didMarginChange(Ve,Ae._size))return w.syncOrAsync([it,v.layoutStyles],be)}];Oe&&gt.push(function(){if(Ee)return w.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),at],be);at()}),gt.push(v.layoutStyles),Oe&&gt.push(function(){return n.draw(be,_e?"":"redraw")},function(pt){var et=pt._fullLayout._insideTickLabelsUpdaterange;if(et)return pt._fullLayout._insideTickLabelsUpdaterange=void 0,Q(pt,et).then(function(){n.saveRangeInitial(pt,!0)})}),gt.push(v.drawData,v.finalDraw,u,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var yt=w.syncOrAsync(gt,be);return yt&&yt.then||(yt=Promise.resolve()),yt.then(function(){return A(be),be})},C.purge=function(be){var we=(be=w.getGraphDiv(be))._fullLayout||{},Me=be._fullData||[];return r.cleanPlot([],{},Me,we),r.purge(be),f.purge(be),we._container&&we._container.remove(),delete be._context,be},C.react=function(be,we,Me,Pe){var De,he;be=w.getGraphDiv(be),y.clearPromiseQueue(be);var _e=be._fullData,Ae=be._fullLayout;if(w.isPlotDiv(be)&&_e&&Ae){if(w.isPlainObject(we)){var Oe=we;we=Oe.data,Me=Oe.layout,Pe=Oe.config,De=Oe.frames}var Ee=!1;if(Pe){var Be=w.extendDeep({},be._context);be._context=void 0,I(be,Pe),Ee=fe(Be,be._context)}be.data=we||[],y.cleanData(be.data),be.layout=Me||{},y.cleanLayout(be.layout),function(nt,ze,Fe,rt){var We,ft,mt,vt,ut,Mt,bt,St,Pt,Dt,Ft=rt._preGUI,Xt=[],an={},Ht={};for(We in Ft){if(ut=me(We,pe)){if(Pt=ut.head,Dt=ut.tail,ft=ut.attr||Pt+".uirevision",(vt=(mt=b(rt,ft).get())&&ke(ft,ze))&&vt===mt){if((Mt=Ft[We])===null&&(Mt=void 0),oe(St=(bt=b(ze,We)).get(),Mt)){St===void 0&&Dt==="autorange"&&Xt.push(Pt),bt.set(B(b(rt,We).get()));continue}if(Dt==="autorange"||Dt.substr(0,6)==="range["){var Zt=Ft[Pt+".range[0]"],jt=Ft[Pt+".range[1]"],Pn=Ft[Pt+".autorange"];if(Pn||Pn===null&&Zt===null&&jt===null){if(!(Pt in an)){var Tn=b(ze,Pt).get();an[Pt]=Tn&&(Tn.autorange||Tn.autorange!==!1&&(!Tn.range||Tn.range.length!==2))}if(an[Pt]){bt.set(B(b(rt,We).get()));continue}}}}}else w.warn("unrecognized GUI edit: "+We);delete Ft[We],ut&&ut.tail.substr(0,6)==="range["&&(Ht[ut.head]=1)}for(var mn=0;mn<Xt.length;mn++){var Qt=Xt[mn];if(Ht[Qt]){var un=b(ze,Qt).get();un&&delete un.autorange}}var nn=rt._tracePreGUI;for(var hn in nn){var bn,wn=nn[hn],Cn=null;for(We in wn){if(!Cn){var Ln=Ce(hn,Fe);if(Ln<0){delete nn[hn];break}var Mn=ge(hn,nt,(bn=Fe[Ln]._fullInput).index);if(Mn<0){delete nn[hn];break}Cn=nt[Mn]}if(ut=me(We,de)){if(ut.attr?vt=(mt=b(rt,ut.attr).get())&&ke(ut.attr,ze):(mt=bn.uirevision,(vt=Cn.uirevision)===void 0&&(vt=ze.uirevision)),vt&&vt===mt&&((Mt=wn[We])===null&&(Mt=void 0),oe(St=(bt=b(Cn,We)).get(),Mt))){bt.set(B(b(bn,We).get()));continue}}else w.warn("unrecognized GUI edit: "+We+" in trace uid "+hn);delete wn[We]}}}(be.data,be.layout,_e,Ae),r.supplyDefaults(be,{skipUpdateCalc:!0});var Ve=be._fullData,Ze=be._fullLayout,it=Ze.datarevision===void 0,at=Ze.transition,gt=function(nt,ze,Fe,rt,We){var ft=_.layoutFlags();return ft.arrays={},ft.rangesAltered={},ft.nChanges=0,ft.nChangesAnim=0,re(ze,Fe,[],{getValObject:function(mt){return i.getLayoutValObject(Fe,mt)},flags:ft,immutable:rt,transition:We,gd:nt}),(ft.plot||ft.calc)&&(ft.layoutReplot=!0),We&&ft.nChanges&&ft.nChangesAnim&&(ft.anim=ft.nChanges===ft.nChangesAnim?"all":"some"),ft}(be,Ae,Ze,it,at),yt=gt.newDataRevision,pt=function(nt,ze,Fe,rt,We,ft){var mt=ze.length===Fe.length;if(!We&&!mt)return{fullReplot:!0,calc:!0};var vt,ut,Mt=_.traceFlags();Mt.arrays={},Mt.nChanges=0,Mt.nChangesAnim=0;var bt={getValObject:function(Pt){var Dt=i.getTraceValObject(ut,Pt);return!ut._module.animatable&&Dt.anim&&(Dt.anim=!1),Dt},flags:Mt,immutable:rt,transition:We,newDataRevision:ft,gd:nt},St={};for(vt=0;vt<ze.length;vt++)if(Fe[vt]){if(ut=Fe[vt]._fullInput,r.hasMakesDataTransform(ut)&&(ut=Fe[vt]),St[ut.uid])continue;St[ut.uid]=1,re(ze[vt]._fullInput,ut,[],bt)}return(Mt.calc||Mt.plot)&&(Mt.fullReplot=!0),We&&Mt.nChanges&&Mt.nChangesAnim&&(Mt.anim=Mt.nChanges===Mt.nChangesAnim&&mt?"all":"some"),Mt}(be,_e,Ve,it,at,yt);if(ue(be)&&(gt.layoutReplot=!0),pt.calc||gt.calc){be.calcdata=void 0;for(var et=Object.getOwnPropertyNames(Ze),$e=0;$e<et.length;$e++){var At=et[$e],Ot=At.substring(0,5);if(Ot==="xaxis"||Ot==="yaxis"){var Rt=Ze[At]._emptyCategories;Rt&&Rt()}}}else r.supplyDefaultsUpdateCalc(be.calcdata,Ve);var Ct=[];if(De&&(be._transitionData={},r.createTransitionData(be),Ct.push(function(){return C.addFrames(be,De)})),Ze.transition&&!Ee&&(pt.anim||gt.anim))gt.ticks&&Ct.push(v.doTicksRelayout),r.doCalcdata(be),v.doAutoRangeAndConstraints(be),Ct.push(function(){return r.transitionFromReact(be,pt,gt,Ae)});else if(pt.fullReplot||gt.layoutReplot||Ee)be._fullLayout._skipDefaults=!0,Ct.push(C._doPlot);else{for(var Ge in gt.arrays){var Xe=gt.arrays[Ge];if(Xe.length){var Ne=t.getComponentMethod(Ge,"drawOne");if(Ne!==w.noop)for(var Ye=0;Ye<Xe.length;Ye++)Ne(be,Xe[Ye]);else{var ot=t.getComponentMethod(Ge,"draw");if(ot===w.noop)throw new Error("cannot draw components: "+Ge);ot(be)}}}Ct.push(r.previousPromises),pt.style&&Ct.push(v.doTraceStyle),(pt.colorbars||gt.colorbars)&&Ct.push(v.doColorBars),gt.legend&&Ct.push(v.doLegend),gt.layoutstyle&&Ct.push(v.layoutStyles),gt.axrange&&K(Ct),gt.ticks&&Ct.push(v.doTicksRelayout),gt.modebar&&Ct.push(v.doModeBar),gt.camera&&Ct.push(v.doCamera),Ct.push(A)}Ct.push(r.rehover,r.redrag,r.reselect),(he=w.syncOrAsync(Ct,be))&&he.then||(he=Promise.resolve(be))}else he=C.newPlot(be,we,Me,Pe);return he.then(function(){return be.emit("plotly_react",{data:we,layout:Me}),be})},C.redraw=function(be){if(be=w.getGraphDiv(be),!w.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be);return y.cleanData(be.data),y.cleanLayout(be.layout),be.calcdata=void 0,C._doPlot(be).then(function(){return be.emit("plotly_redraw"),be})},C.relayout=Q,C.restyle=Y,C.setPlotConfig=function(be){return w.extendFlat(g,be)},C.update=ve,C._guiRelayout=ye(Q),C._guiRestyle=ye(Y),C._guiUpdate=ye(ve),C._storeDirectGUIEdit=function(be,we,Me){for(var Pe in Me)q(Pe,b(be,Pe).get(),Me[Pe],we)}},20556:function(F){"use strict";var C={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function T(k,a){for(var w in k){var b=k[w];b.valType?a[w]=b.dflt:(a[w]||(a[w]={}),T(b,a[w]))}})(C,e),F.exports={configAttributes:C,dfltConfig:e}},73060:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(45464),w=e(64859),b=e(16672),f=e(85656),s=e(20556).configAttributes,t=e(67824),i=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,o=k.nestedProperty,l=k.valObjectMeta,c="_isSubplotObj",d="_isLinkedToArray",u="_deprecated",x=[c,d,"_arrayAttrRegexps",u];function p(h,S,A){if(!h)return!1;if(h._isLinkedToArray){if(g(S[A]))A++;else if(A<S.length)return!1}for(;A<S.length;A++){var E=h[S[A]];if(!r(E)||(h=E,A===S.length-1))break;if(h._isLinkedToArray){if(!g(S[++A]))return!1}else if(h.valType==="info_array"){var P=S[++A];if(!g(P))return!1;var I=h.items;if(Array.isArray(I)){if(P>=I.length)return!1;if(h.dimensions===2){if(A++,S.length===A)return h;var D=S[A];if(!g(D))return!1;h=I[P][D]}else h=I[P]}else h=I}}return h}function g(h){return h===Math.round(h)&&h>=0}function m(){var h,S,A={};for(h in i(A,w),T.subplotsRegistry)if((S=T.subplotsRegistry[h]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)v(A,S,S.attr[E]);else v(A,S,S.attr==="subplot"?S.name:S.attr);for(h in T.componentsRegistry){var P=(S=T.componentsRegistry[h]).schema;if(P&&(P.subplots||P.layout)){var I=P.subplots;if(I&&I.xaxis&&!I.yaxis)for(var D in I.xaxis)delete A.yaxis[D];delete A.xaxis.shift,delete A.xaxis.autoshift}else S.name==="colorscale"?i(A,S.layoutAttributes):S.layoutAttributes&&_(A,S.layoutAttributes,S.name)}return{layoutAttributes:y(A)}}function y(h){return function(S){C.crawl(S,function(A,E,P){C.isValObject(A)?A.arrayOk!==!0&&A.valType!=="data_array"||(P[E+"src"]={valType:"string",editType:"none"}):r(A)&&(A.role="object")})}(h),function(S){C.crawl(S,function(A,E,P){if(A){var I=A[d];I&&(delete A[d],P[E]={items:{}},P[E].items[I]=A,P[E].role="object")}})}(h),function(S){(function A(E){for(var P in E)if(r(E[P]))A(E[P]);else if(Array.isArray(E[P]))for(var I=0;I<E[P].length;I++)A(E[P][I]);else E[P]instanceof RegExp&&(E[P]=E[P].toString())})(S)}(h),h}function v(h,S,A){var E=o(h,A),P=i({},S.layoutAttributes);P[c]=!0,E.set(P)}function _(h,S,A){var E=o(h,A);E.set(i(E.get()||{},S))}C.IS_SUBPLOT_OBJ=c,C.IS_LINKED_TO_ARRAY=d,C.DEPRECATED=u,C.UNDERSCORE_ATTRS=x,C.get=function(){var h={};T.allTypes.forEach(function(E){h[E]=function(P){var I,D;D=(I=T.modules[P]._module).basePlotModule;var z={type:null},V=i({},a),O=i({},I.attributes);C.crawl(O,function(B,U,q,te,ee){o(V,ee).set(void 0),B===void 0&&o(O,ee).set(void 0)}),i(z,V),T.traceIs(P,"noOpacity")&&delete z.opacity,T.traceIs(P,"showLegend")||(delete z.showlegend,delete z.legendgroup),T.traceIs(P,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),I.selectPoints||delete z.selectedpoints,i(z,O),D.attributes&&i(z,D.attributes),z.type=P;var j={meta:I.meta||{},categories:I.categories||{},animatable:!!I.animatable,type:P,attributes:y(z)};if(I.layoutAttributes){var Y={};i(Y,I.layoutAttributes),j.layoutAttributes=y(Y)}return I.animatable||C.crawl(j,function(B){C.isValObject(B)&&"anim"in B&&delete B.anim}),j}(E)});var S,A={};return Object.keys(T.transformsRegistry).forEach(function(E){A[E]=function(P){var I=T.transformsRegistry[P],D=i({},I.attributes);return Object.keys(T.componentsRegistry).forEach(function(z){var V=T.componentsRegistry[z];V.schema&&V.schema.transforms&&V.schema.transforms[P]&&Object.keys(V.schema.transforms[P]).forEach(function(O){_(D,V.schema.transforms[P][O],O)})}),{attributes:y(D)}}(E)}),{defs:{valObjects:l,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:h,layout:m(),transforms:A,frames:(S={frames:i({},b)},y(S),S.frames),animation:y(f),config:y(s)}},C.crawl=function(h,S,A,E){var P=A||0;E=E||"",Object.keys(h).forEach(function(I){var D=h[I];if(x.indexOf(I)===-1){var z=(E?E+".":"")+I;S(D,I,h,P,z),C.isValObject(D)||r(D)&&I!=="impliedEdits"&&C.crawl(D,S,P+1,z)}})},C.isValObject=function(h){return h&&h.valType!==void 0},C.findArrayAttributes=function(h){var S,A,E=[],P=[],I=[];function D(B,U,q,te){P=P.slice(0,te).concat([U]),I=I.slice(0,te).concat([B&&B._isLinkedToArray]),B&&(B.valType==="data_array"||B.arrayOk===!0)&&(P[te-1]!=="colorbar"||U!=="ticktext"&&U!=="tickvals")&&z(S,0,"")}function z(B,U,q){var te=B[P[U]],ee=q+P[U];if(U===P.length-1)n(te)&&E.push(A+ee);else if(I[U]){if(Array.isArray(te))for(var Q=0;Q<te.length;Q++)r(te[Q])&&z(te[Q],U+1,ee+"["+Q+"].")}else r(te)&&z(te,U+1,ee+".")}S=h,A="",C.crawl(a,D),h._module&&h._module.attributes&&C.crawl(h._module.attributes,D);var V=h.transforms;if(V)for(var O=0;O<V.length;O++){var j=V[O],Y=j._module;Y&&(A="transforms["+O+"].",S=j,C.crawl(Y.attributes,D))}return E},C.getTraceValObject=function(h,S){var A,E,P=S[0],I=1;if(P==="transforms"){if(S.length===1)return a.transforms;var D=h.transforms;if(!Array.isArray(D)||!D.length)return!1;var z=S[1];if(!g(z)||z>=D.length)return!1;E=(A=(T.transformsRegistry[D[z].type]||{}).attributes)&&A[S[2]],I=3}else{var V=h._module;if(V||(V=(T.modules[h.type||a.type.dflt]||{})._module),!V)return!1;if(!(E=(A=V.attributes)&&A[P])){var O=V.basePlotModule;O&&O.attributes&&(E=O.attributes[P])}E||(E=a[P])}return p(E,S,I)},C.getLayoutValObject=function(h,S){var A=function(E,P){var I,D,z,V,O=E._basePlotModules;if(O){var j;for(I=0;I<O.length;I++){if((z=O[I]).attrRegex&&z.attrRegex.test(P)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!j&&z.layoutAttributes&&(j=z.layoutAttributes)}var Y=z.baseLayoutAttrOverrides;if(Y&&P in Y)return Y[P]}if(j)return j}var B=E._modules;if(B){for(I=0;I<B.length;I++)if((V=B[I].layoutAttributes)&&P in V)return V[P]}for(D in T.componentsRegistry){if((z=T.componentsRegistry[D]).name==="colorscale"&&P.indexOf("coloraxis")===0)return z.layoutAttributes[P];if(!z.schema&&P===z.name)return z.layoutAttributes}return P in w&&w[P]}(h,S[0]);return p(A,S,1)}},31780:function(F,C,e){"use strict";var T=e(3400),k=e(45464),a="templateitemname",w={name:{valType:"string",editType:"none"}};function b(s){return s&&typeof s=="string"}function f(s){var t=s.length-1;return s.charAt(t)!=="s"&&T.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}w[a]={valType:"string",editType:"calc"},C.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=w.name,t[a]=w[a],t},C.traceTemplater=function(s){var t,i,r={};for(t in s)i=s[t],Array.isArray(i)&&i.length&&(r[t]=0);return{newTrace:function(n){var o={type:t=T.coerce(n,{},k,"type"),_template:null};if(t in r){i=s[t];var l=r[t]%i.length;r[t]++,o._template=i[l]}return o}}},C.newContainer=function(s,t,i){var r=s._template,n=r&&(r[t]||i&&r[i]);return T.isPlainObject(n)||(n=null),s[t]={_template:n}},C.arrayTemplater=function(s,t,i){var r=s._template,n=r&&r[f(t)],o=r&&r[t];Array.isArray(o)&&o.length||(o=[]);var l={};return{newItem:function(c){var d={name:c.name,_input:c},u=d[a]=c[a];if(!b(u))return d._template=n,d;for(var x=0;x<o.length;x++){var p=o[x];if(p.name===u)return l[u]=1,d._template=p,d}return d[i]=c[i]||!1,d._template=!1,d},defaultItems:function(){for(var c=[],d=0;d<o.length;d++){var u=o[d],x=u.name;if(b(x)&&!l[x]){var p={_template:u,name:x,_input:{_templateitemname:x}};p[a]=u[a],c.push(p),l[x]=1}}return c}}},C.arrayDefaultKey=f,C.arrayEditor=function(s,t,i){var r=(T.nestedProperty(s,t).get()||[]).length,n=i._index,o=n>=r&&(i._input||{})._templateitemname;o&&(n=r);var l,c=t+"["+n+"]";function d(){l={},o&&(l[c]={},l[c][a]=o)}function u(p,g){o?T.nestedProperty(l[c],p).set(g):l[c+"."+p]=g}function x(){var p=l;return d(),p}return d(),{modifyBase:function(p,g){l[p]=g},modifyItem:u,getUpdateObj:x,applyUpdate:function(p,g){p&&u(p,g);var m=x();for(var y in m)T.nestedProperty(s,y).set(m[y])}}}},39172:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(7316),w=e(3400),b=e(72736),f=e(73696),s=e(76308),t=e(43616),i=e(81668),r=e(45460),n=e(54460),o=e(84284),l=e(71888),c=l.enforce,d=l.clean,u=e(19280).doAutoRange,x="start";function p(_,h,S){for(var A=0;A<S.length;A++){var E=S[A][0],P=S[A][1];if(!(E[0]>=_[1]||E[1]<=_[0])&&P[0]<h[1]&&P[1]>h[0])return!0}return!1}function g(_){var h,S,A,E,P,I,D=_._fullLayout,z=D._size,V=z.p,O=n.list(_,"",!0);if(D._paperdiv.style({width:_._context.responsive&&D.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":D.width+"px",height:_._context.responsive&&D.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":D.height+"px"}).selectAll(".main-svg").call(t.setSize,D.width,D.height),_._context.setBackground(_,D.paper_bgcolor),C.drawMainTitle(_),r.manage(_),!D._has("cartesian"))return a.previousPromises(_);function j(Ee,Be,Ve){var Ze=Ee._lw/2;return Ee._id.charAt(0)==="x"?Be?Ve==="top"?Be._offset-V-Ze:Be._offset+Be._length+V+Ze:z.t+z.h*(1-(Ee.position||0))+Ze%1:Be?Ve==="right"?Be._offset+Be._length+V+Ze:Be._offset-V-Ze:z.l+z.w*(Ee.position||0)+Ze%1}for(h=0;h<O.length;h++){var Y=(E=O[h])._anchorAxis;E._linepositions={},E._lw=t.crispRound(_,E.linewidth,1),E._mainLinePosition=j(E,Y,E.side),E._mainMirrorPosition=E.mirror&&Y?j(E,Y,o.OPPOSITE_SIDE[E.side]):null}var B=[],U=[],q=[],te=s.opacity(D.paper_bgcolor)===1&&s.opacity(D.plot_bgcolor)===1&&D.paper_bgcolor===D.plot_bgcolor;for(S in D._plots)if((A=D._plots[S]).mainplot)A.bg&&A.bg.remove(),A.bg=void 0;else{var ee=A.xaxis.domain,Q=A.yaxis.domain,J=A.plotgroup;if(p(ee,Q,q)){var K=J.node(),X=A.bg=w.ensureSingle(J,"rect","bg");K.insertBefore(X.node(),K.childNodes[0]),U.push(S)}else J.select("rect.bg").remove(),q.push([ee,Q]),te||(B.push(S),U.push(S))}var ie,se,ae,ue,ve,ye,pe,de,me,ke,Ce,ge,oe,re=D._bgLayer.selectAll(".bg").data(B);for(re.enter().append("rect").classed("bg",!0),re.exit().remove(),re.each(function(Ee){D._plots[Ee].bg=T.select(this)}),h=0;h<U.length;h++)A=D._plots[U[h]],P=A.xaxis,I=A.yaxis,A.bg&&P._offset!==void 0&&I._offset!==void 0&&A.bg.call(t.setRect,P._offset-V,I._offset-V,P._length+2*V,I._length+2*V).call(s.fill,D.plot_bgcolor).style("stroke-width",0);if(!D._hasOnlyLargeSploms)for(S in D._plots){A=D._plots[S],P=A.xaxis,I=A.yaxis;var fe,Se,be=A.clipId="clip"+D._uid+S+"plot",we=w.ensureSingleById(D._clips,"clipPath",be,function(Ee){Ee.classed("plotclip",!0).append("rect")});A.clipRect=we.select("rect").attr({width:P._length,height:I._length}),t.setTranslate(A.plot,P._offset,I._offset),A._hasClipOnAxisFalse?(fe=null,Se=be):(fe=be,Se=null),t.setClipUrl(A.plot,fe,_),A.layerClipId=Se}function Me(Ee){return"M"+ie+","+Ee+"H"+se}function Pe(Ee){return"M"+P._offset+","+Ee+"h"+P._length}function De(Ee){return"M"+Ee+","+de+"V"+pe}function he(Ee){return I._shift!==void 0&&(Ee+=I._shift),"M"+Ee+","+I._offset+"v"+I._length}function _e(Ee,Be,Ve){if(!Ee.showline||S!==Ee._mainSubplot)return"";if(!Ee._anchorAxis)return Ve(Ee._mainLinePosition);var Ze=Be(Ee._mainLinePosition);return Ee.mirror&&(Ze+=Be(Ee._mainMirrorPosition)),Ze}for(S in D._plots){A=D._plots[S],P=A.xaxis,I=A.yaxis;var Ae="M0,0";m(P,S)&&(ve=v(P,"left",I,O),ie=P._offset-(ve?V+ve:0),ye=v(P,"right",I,O),se=P._offset+P._length+(ye?V+ye:0),ae=j(P,I,"bottom"),ue=j(P,I,"top"),!(oe=!P._anchorAxis||S!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[S]=[ae,ue]),Ae=_e(P,Me,Pe),oe&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Ae+=Me(ae)+Me(ue)),A.xlines.style("stroke-width",P._lw+"px").call(s.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),A.xlines.attr("d",Ae);var Oe="M0,0";m(I,S)&&(Ce=v(I,"bottom",P,O),pe=I._offset+I._length+(Ce?V:0),ge=v(I,"top",P,O),de=I._offset-(ge?V:0),me=j(I,P,"left"),ke=j(I,P,"right"),!(oe=!I._anchorAxis||S!==I._mainSubplot)||I.mirror!=="allticks"&&I.mirror!=="all"||(I._linepositions[S]=[me,ke]),Oe=_e(I,De,he),oe&&I.showline&&(I.mirror==="all"||I.mirror==="allticks")&&(Oe+=De(me)+De(ke)),A.ylines.style("stroke-width",I._lw+"px").call(s.stroke,I.showline?I.linecolor:"rgba(0,0,0,0)")),A.ylines.attr("d",Oe)}return n.makeClipPaths(_),a.previousPromises(_)}function m(_,h){return(_.ticks||_.showline)&&(h===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function y(_,h,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var A=S._anchorAxis;if(!A)return!1;var E=o.FROM_BL[h];return S.side===h?A.domain[E]===_.domain[E]:S.mirror&&A.domain[1-E]===_.domain[1-E]}function v(_,h,S,A){if(y(_,h,S))return S._lw;for(var E=0;E<A.length;E++){var P=A[E];if(P._mainAxis===S._mainAxis&&y(_,h,P))return P._lw}return 0}C.layoutStyles=function(_){return w.syncOrAsync([a.doAutoMargin,g],_)},C.drawMainTitle=function(_){var h,S=_._fullLayout.title,A=_._fullLayout,E=function(B){var U=B.title,q="middle";return w.isRightAnchor(U)?q="end":w.isLeftAnchor(U)&&(q=x),q}(A),P=function(B){var U=B.title,q="0em";return w.isTopAnchor(U)?q=o.CAP_SHIFT+"em":w.isMiddleAnchor(U)&&(q=o.MID_SHIFT+"em"),q}(A),I=function(B,U){var q=B.title,te=B._size,ee=0;return U!=="0em"&&U?U===o.CAP_SHIFT+"em"&&(ee=q.pad.t):ee=-q.pad.b,q.y==="auto"?te.t/2:q.yref==="paper"?te.t+te.h-te.h*q.y+ee:B.height-B.height*q.y+ee}(A,P),D=function(B,U){var q=B.title,te=B._size,ee=0;return U===x?ee=q.pad.l:U==="end"&&(ee=-q.pad.r),q.xref==="paper"?te.l+te.w*q.x+ee:B.width*q.x+ee}(A,E);if(i.draw(_,"gtitle",{propContainer:A,propName:"title.text",placeholder:A._dfltTitle.plot,attributes:{x:D,y:I,"text-anchor":E,dy:P}}),S.text&&S.automargin){var z=T.selectAll(".gtitle"),V=t.bBox(z.node()).height,O=function(B,U,q){var te=U.y,ee=U.yanchor,Q=te>.5?"t":"b",J=B._fullLayout.margin[Q],K=0;return U.yref==="paper"?K=q+U.pad.t+U.pad.b:U.yref==="container"&&(K=function(X,ie,se,ae,ue){var ve=0;return se==="middle"&&(ve+=ue/2),X==="t"?(se==="top"&&(ve+=ue),ve+=ae-ie*ae):(se==="bottom"&&(ve+=ue),ve+=ie*ae),ve}(Q,te,ee,B._fullLayout.height,q)+U.pad.t+U.pad.b),K>J?K:0}(_,S,V);if(O>0){(function(B,U,q,te){var ee="title.automargin",Q=B._fullLayout.title,J=Q.y>.5?"t":"b",K={x:Q.x,y:Q.y,t:0,b:0},X={};Q.yref==="paper"&&function(ie,se,ae,ue,ve){var ye=se.yref==="paper"?ie._fullLayout._size.h:ie._fullLayout.height,pe=w.isTopAnchor(se)?ue:ue-ve,de=ae==="b"?ye-pe:pe;return!(w.isTopAnchor(se)&&ae==="t"||w.isBottomAnchor(se)&&ae==="b")&&de<ve}(B,Q,J,U,te)?K[J]=q:Q.yref==="container"&&(X[J]=q,B._fullLayout._reservedMargin[ee]=X),a.allowAutoMargin(B,ee),a.autoMargin(B,ee,K)})(_,I,O,V),z.attr({x:D,y:I,"text-anchor":E,dy:(h=S.yanchor,h==="top"?o.CAP_SHIFT+.3+"em":h==="bottom"?"-0.3em":o.MID_SHIFT+"em")}).call(b.positionText,D,I);var j=(S.text.match(b.BR_TAG_ALL)||[]).length;if(j){var Y=o.LINE_SPACING*j+o.MID_SHIFT;S.y===0&&(Y=-Y),z.selectAll(".line").each(function(){var B=+this.getAttribute("dy").slice(0,-2)-Y+"em";this.setAttribute("dy",B)})}}}},C.doTraceStyle=function(_){var h,S=_.calcdata,A=[];for(h=0;h<S.length;h++){var E=S[h],P=E[0]||{},I=P.trace||{},D=I._module||{},z=D.arraysToCalcdata;z&&z(E,I);var V=D.editStyle;V&&A.push({fn:V,cd0:P})}if(A.length){for(h=0;h<A.length;h++){var O=A[h];O.fn(_,O.cd0)}f(_),C.redrawReglTraces(_)}return a.style(_),k.getComponentMethod("legend","draw")(_),a.previousPromises(_)},C.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),a.previousPromises(_)},C.layoutReplot=function(_){var h=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",h)},C.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),a.previousPromises(_)},C.doTicksRelayout=function(_){return n.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),f(_),C.redrawReglTraces(_)),C.drawMainTitle(_),a.previousPromises(_)},C.doModeBar=function(_){var h=_._fullLayout;r.manage(_);for(var S=0;S<h._basePlotModules.length;S++){var A=h._basePlotModules[S].updateFx;A&&A(_)}return a.previousPromises(_)},C.doCamera=function(_){for(var h=_._fullLayout,S=h._subplots.gl3d,A=0;A<S.length;A++){var E=h[S[A]];E._scene.setViewport(E)}},C.drawData=function(_){var h=_._fullLayout;f(_);for(var S=h._basePlotModules,A=0;A<S.length;A++)S[A].plot(_);return C.redrawReglTraces(_),a.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),h._replotting=!1,a.previousPromises(_)},C.redrawReglTraces=function(_){var h=_._fullLayout;if(h._has("regl")){var S,A,E=_._fullData,P=[],I=[];for(h._hasOnlyLargeSploms&&h._splomGrid.draw(),S=0;S<E.length;S++){var D=E[S];D.visible===!0&&D._length!==0&&(D.type==="splom"?h._splomScenes[D.uid].draw():D.type==="scattergl"?w.pushUnique(P,D.xaxis+D.yaxis):D.type==="scatterpolargl"&&w.pushUnique(I,D.subplot))}for(S=0;S<P.length;S++)(A=h._plots[P[S]])._scene&&A._scene.draw();for(S=0;S<I.length;S++)(A=h[I[S]]._subplot)._scene&&A._scene.draw()}},C.doAutoRangeAndConstraints=function(_){for(var h,S=n.list(_,"",!0),A={},E=0;E<S.length;E++)if(!A[(h=S[E])._id]){A[h._id]=1,d(_,h),u(_,h);var P=h._matchGroup;if(P)for(var I in P){var D=n.getFromId(_,I);u(_,D,h.range),A[I]=1}}c(_)},C.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},C.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},94828:function(F,C,e){"use strict";var T=e(3400),k=T.isPlainObject,a=e(73060),w=e(7316),b=e(45464),f=e(31780),s=e(20556).dfltConfig;function t(u,x){u=T.extendDeep({},u);var p,g,m=Object.keys(u).sort();function y(A,E,P){if(k(E)&&k(A))t(A,E);else if(Array.isArray(E)&&Array.isArray(A)){var I=f.arrayTemplater({_template:u},P);for(g=0;g<E.length;g++){var D=E[g],z=I.newItem(D)._template;z&&t(z,D)}var V=I.defaultItems();for(g=0;g<V.length;g++)E.push(V[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(p=0;p<m.length;p++){var v=m[p],_=u[v];if(v in x?y(_,x[v],v):x[v]=_,i(v)===v)for(var h in x){var S=i(h);h===S||S!==v||h in u||y(_,x[h],v)}}}function i(u){return u.replace(/[0-9]+$/,"")}function r(u,x,p,g,m){var y=m&&p(m);for(var v in u){var _=u[v],h=l(u,v,g),S=l(u,v,m),A=p(S);if(!A){var E=i(v);E!==v&&(A=p(S=l(u,E,m)))}if(!(y&&y===A||!A||A._noTemplating||A.valType==="data_array"||A.arrayOk&&Array.isArray(_)))if(!A.valType&&k(_))r(_,x,p,h,S);else if(A._isLinkedToArray&&Array.isArray(_))for(var P=!1,I=0,D={},z=0;z<_.length;z++){var V=_[z];if(k(V)){var O=V.name;if(O)D[O]||(r(V,x,p,l(_,I,h),l(_,I,S)),I++,D[O]=1);else if(!P){var j=l(u,f.arrayDefaultKey(v),g),Y=l(_,I,h);r(V,x,p,Y,l(_,I,S));var B=T.nestedProperty(x,Y);T.nestedProperty(x,j).set(B.get()),B.set(null),P=!0}}}else T.nestedProperty(x,h).set(_)}}function n(u,x){return a.getLayoutValObject(u,T.nestedProperty({},x).parts)}function o(u,x){return a.getTraceValObject(u,T.nestedProperty({},x).parts)}function l(u,x,p){return p?Array.isArray(u)?p+"["+x+"]":p+"."+x:x}function c(u){for(var x=0;x<u.length;x++)if(k(u[x]))return!0}function d(u){var x;switch(u.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=u.path?"There are no templates for item "+u.path+" with name "+u.templateitemname:"There are no templates for trace "+u.index+", of type "+u.traceType+".";break;case"unused":x=u.path?"The template item at "+u.path+" was not used in constructing the plot.":u.dataCount?"Some of the templates of type "+u.traceType+" were not used. The template has "+u.templateCount+" traces, the data only has "+u.dataCount+" of this type.":"The template has "+u.templateCount+" traces of type "+u.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+u.traceType+" were used more than once. The template has "+u.templateCount+" traces, the data has "+u.dataCount+" of this type."}return u.msg=x,u}C.makeTemplate=function(u){u=T.isPlainObject(u)?u:T.getGraphDiv(u),u=T.extendDeep({_context:s},{data:u.data,layout:u.layout}),w.supplyDefaults(u);var x=u.data||[],p=u.layout||{};p._basePlotModules=u._fullLayout._basePlotModules,p._modules=u._fullLayout._modules;var g={data:{},layout:{}};x.forEach(function(I){var D={};r(I,D,o.bind(null,I));var z=T.coerce(I,{},b,"type"),V=g.data[z];V||(V=g.data[z]=[]),V.push(D)}),r(p,g.layout,n.bind(null,p)),delete g.layout.template;var m=p.template;if(k(m)){var y,v,_,h,S,A,E=m.layout;k(E)&&t(E,g.layout);var P=m.data;if(k(P)){for(v in g.data)if(_=P[v],Array.isArray(_)){for(A=(S=g.data[v]).length,h=_.length,y=0;y<A;y++)t(_[y%h],S[y]);for(y=A;y<h;y++)S.push(T.extendDeep({},_[y]))}for(v in P)v in g.data||(g.data[v]=T.extendDeep([],P[v]))}}return g},C.validateTemplate=function(u,x){var p=T.extendDeep({},{_context:s,data:u.data,layout:u.layout}),g=p.layout||{};k(x)||(x=g.template||{});var m=x.layout,y=x.data,v=[];p.layout=g,p.layout.template=x,w.supplyDefaults(p);var _=p._fullLayout,h=p._fullData,S={};if(k(m)?(function V(O,j){for(var Y in O)if(Y.charAt(0)!=="_"&&k(O[Y])){var B,U=i(Y),q=[];for(B=0;B<j.length;B++)q.push(l(O,Y,j[B])),U!==Y&&q.push(l(O,U,j[B]));for(B=0;B<q.length;B++)S[q[B]]=1;V(O[Y],q)}}(_,["layout"]),function V(O,j){for(var Y in O)if(Y.indexOf("defaults")===-1&&k(O[Y])){var B=l(O,Y,j);S[B]?V(O[Y],B):v.push({code:"unused",path:B})}}(m,"layout")):v.push({code:"layout"}),k(y)){for(var A,E={},P=0;P<h.length;P++){var I=h[P];E[A=I.type]=(E[A]||0)+1,I._fullInput._template||v.push({code:"missing",index:I._fullInput.index,traceType:A})}for(A in y){var D=y[A].length,z=E[A]||0;D>z?v.push({code:"unused",traceType:A,templateCount:D,dataCount:z}):z>D&&v.push({code:"reused",traceType:A,templateCount:D,dataCount:z})}}else v.push({code:"data"});if(function V(O,j){for(var Y in O)if(Y.charAt(0)!=="_"){var B=O[Y],U=l(O,Y,j);k(B)?(Array.isArray(O)&&B._template===!1&&B.templateitemname&&v.push({code:"missing",path:U,templateitemname:B.templateitemname}),V(B,U)):Array.isArray(B)&&c(B)&&V(B,U)}}({data:h,layout:_},""),v.length)return v.map(d)}},67024:function(F,C,e){"use strict";var T=e(38248),k=e(36424),a=e(7316),w=e(3400),b=e(81792),f=e(37164),s=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};F.exports=function(r,n){var o,l,c,d;function u(z){return!(z in n)||w.validate(n[z],i[z])}if(n=n||{},w.isPlainObject(r)?(o=r.data||[],l=r.layout||{},c=r.config||{},d={}):(r=w.getGraphDiv(r),o=w.extendDeep([],r.data),l=w.extendDeep({},r.layout),c=r._context,d=r._fullLayout||{}),!u("width")&&n.width!==null||!u("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!u("format"))throw new Error("Export format is not "+w.join2(i.format.values,", "," or ")+".");var x={};function p(z,V){return w.coerce(n,x,i,z,V)}var g=p("format"),m=p("width"),y=p("height"),v=p("scale"),_=p("setBackground"),h=p("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var A=w.extendFlat({},l);m?A.width=m:n.width===null&&T(d.width)&&(A.width=d.width),y?A.height=y:n.height===null&&T(d.height)&&(A.height=d.height);var E=w.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=b.getRedrawFunc(S);function I(){return new Promise(function(z){setTimeout(z,b.getDelay(S._fullLayout))})}function D(){return new Promise(function(z,V){var O=f(S,g,v),j=S._fullLayout.width,Y=S._fullLayout.height;function B(){k.purge(S),document.body.removeChild(S)}if(g==="full-json"){var U=a.graphJson(S,!1,"keepdata","object",!0,!0);return U.version=t,U=JSON.stringify(U),B(),z(h?U:b.encodeJSON(U))}if(B(),g==="svg")return z(h?O:b.encodeSVG(O));var q=document.createElement("canvas");q.id=w.randstr(),s({format:g,width:j,height:Y,scale:v,canvas:q,svg:O,promise:!0}).then(z).catch(V)})}return new Promise(function(z,V){k.newPlot(S,o,A,E).then(P).then(I).then(D).then(function(O){z(function(j){return h?j.replace(b.IMAGE_URL_PREFIX,""):j}(O))}).catch(function(O){V(O)})})}},21480:function(F,C,e){"use strict";var T=e(3400),k=e(7316),a=e(73060),w=e(20556).dfltConfig,b=T.isPlainObject,f=Array.isArray,s=T.isArrayOrTypedArray;function t(u,x,p,g,m,y){y=y||[];for(var v=Object.keys(u),_=0;_<v.length;_++){var h=v[_];if(h!=="transforms"){var S=y.slice();S.push(h);var A=u[h],E=x[h],P=l(p,h),I=(P||{}).valType,D=I==="info_array",z=I==="colorscale",V=(P||{}).items;if(o(p,h))if(b(A)&&b(E)&&I!=="any")t(A,E,P,g,m,S);else if(D&&f(A)){A.length>E.length&&g.push(n("unused",m,S.concat(E.length)));var O,j,Y,B,U,q=E.length,te=Array.isArray(V);if(te&&(q=Math.min(q,V.length)),P.dimensions===2)for(j=0;j<q;j++)if(f(A[j])){A[j].length>E[j].length&&g.push(n("unused",m,S.concat(j,E[j].length)));var ee=E[j].length;for(O=0;O<(te?Math.min(ee,V[j].length):ee);O++)Y=te?V[j][O]:V,B=A[j][O],U=E[j][O],T.validate(B,Y)?U!==B&&U!==+B&&g.push(n("dynamic",m,S.concat(j,O),B,U)):g.push(n("value",m,S.concat(j,O),B))}else g.push(n("array",m,S.concat(j),A[j]));else for(j=0;j<q;j++)Y=te?V[j]:V,B=A[j],U=E[j],T.validate(B,Y)?U!==B&&U!==+B&&g.push(n("dynamic",m,S.concat(j),B,U)):g.push(n("value",m,S.concat(j),B))}else if(P.items&&!D&&f(A)){var Q,J,K=V[Object.keys(V)[0]],X=[];for(Q=0;Q<E.length;Q++){var ie=E[Q]._index||Q;if((J=S.slice()).push(ie),b(A[ie])&&b(E[Q])){X.push(ie);var se=A[ie],ae=E[Q];b(se)&&se.visible!==!1&&ae.visible===!1?g.push(n("invisible",m,J)):t(se,ae,K,g,m,J)}}for(Q=0;Q<A.length;Q++)(J=S.slice()).push(Q),b(A[Q])?X.indexOf(Q)===-1&&g.push(n("unused",m,J)):g.push(n("object",m,J,A[Q]))}else!b(A)&&b(E)?g.push(n("object",m,S,A)):s(A)||!s(E)||D||z?h in x?T.validate(A,P)?P.valType==="enumerated"&&(P.coerceNumber&&A!==+E||A!==E)&&g.push(n("dynamic",m,S,A,E)):g.push(n("value",m,S,A)):g.push(n("unused",m,S,A)):g.push(n("array",m,S,A));else g.push(n("schema",m,S))}}return g}F.exports=function(u,x){u===void 0&&(u=[]),x===void 0&&(x={});var p,g,m=a.get(),y=[],v={_context:T.extendFlat({},w)};f(u)?(v.data=T.extendDeep([],u),p=u):(v.data=[],p=[],y.push(n("array","data"))),b(x)?(v.layout=T.extendDeep({},x),g=x):(v.layout={},g={},arguments.length>1&&y.push(n("object","layout"))),k.supplyDefaults(v);for(var _=v._fullData,h=p.length,S=0;S<h;S++){var A=p[S],E=["data",S];if(b(A)){var P=_[S],I=P.type,D=m.traces[I].attributes;D.type={valType:"enumerated",values:[I]},P.visible===!1&&A.visible!==!1&&y.push(n("invisible",E)),t(A,P,D,y,E);var z=A.transforms,V=P.transforms;if(z){f(z)||y.push(n("array",E,["transforms"])),E.push("transforms");for(var O=0;O<z.length;O++){var j=["transforms",O],Y=z[O].type;if(b(z[O])){var B=m.transforms[Y]?m.transforms[Y].attributes:{};B.type={valType:"enumerated",values:Object.keys(m.transforms)},t(z[O],V[O],B,y,E,j)}else y.push(n("object",E,j))}}}else y.push(n("object",E))}var U=v._fullLayout,q=function(te,ee){for(var Q=te.layout.layoutAttributes,J=0;J<ee.length;J++){var K=ee[J],X=te.traces[K.type],ie=X.layoutAttributes;ie&&(K.subplot?T.extendFlat(Q[X.attributes.subplot.dflt],ie):T.extendFlat(Q,ie))}return Q}(m,_);return t(g,U,q,y,"layout"),y.length===0?void 0:y};var i={object:function(u,x){return(u==="layout"&&x===""?"The layout argument":u[0]==="data"&&x===""?"Trace "+u[1]+" in the data argument":r(u)+"key "+x)+" must be linked to an object container"},array:function(u,x){return(u==="data"?"The data argument":r(u)+"key "+x)+" must be linked to an array container"},schema:function(u,x){return r(u)+"key "+x+" is not part of the schema"},unused:function(u,x,p){var g=b(p)?"container":"key";return r(u)+g+" "+x+" did not get coerced"},dynamic:function(u,x,p,g){return[r(u)+"key",x,"(set to '"+p+"')","got reset to","'"+g+"'","during defaults."].join(" ")},invisible:function(u,x){return(x?r(u)+"item "+x:"Trace "+u[1])+" got defaulted to be not visible"},value:function(u,x,p){return[r(u)+"key "+x,"is set to an invalid value ("+p+")"].join(" ")}};function r(u){return f(u)?"In data trace "+u[1]+", ":"In "+u+", "}function n(u,x,p,g,m){var y,v;p=p||"",f(x)?(y=x[0],v=x[1]):(y=x,v=null);var _=function(S){if(!f(S))return String(S);for(var A="",E=0;E<S.length;E++){var P=S[E];typeof P=="number"?A=A.substr(0,A.length-1)+"["+P+"]":A+=P,E<S.length-1&&(A+=".")}return A}(p),h=i[u](x,_,g,m);return T.log(h),{code:u,container:y,trace:v,path:p,astr:_,msg:h}}function o(u,x){var p=d(x),g=p.keyMinusId,m=p.id;return!!(g in u&&u[g]._isSubplotObj&&m)||x in u}function l(u,x){return x in u?u[x]:u[d(x).keyMinusId]}var c=T.counterRegex("([a-z]+)");function d(u){var x=u.match(c);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85656:function(F){"use strict";F.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(F,C,e){"use strict";var T=e(3400),k=e(31780);F.exports=function(a,w,b){var f,s,t=b.name,i=b.inclusionAttr||"visible",r=w[t],n=T.isArrayOrTypedArray(a[t])?a[t]:[],o=w[t]=[],l=k.arrayTemplater(w,t,i);for(f=0;f<n.length;f++){var c=n[f];T.isPlainObject(c)?s=l.newItem(c):(s=l.newItem({}))[i]=!1,s._index=f,s[i]!==!1&&b.handleItemDefaults(c,s,w,b),o.push(s)}var d=l.defaultItems();for(f=0;f<d.length;f++)(s=d[f])._index=o.length,b.handleItemDefaults({},s,w,b,{}),o.push(s);if(T.isArrayOrTypedArray(r)){var u=Math.min(r.length,o.length);for(f=0;f<u;f++)T.relinkPrivateKeys(o[f],r[f])}return o}},45464:function(F,C,e){"use strict";var T=e(25376),k=e(55756);F.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:T({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=k.dateTime2ms,w=k.incrementMonth,b=e(39032).ONEAVGMONTH;F.exports=function(f,s,t,i){if(s.type!=="date")return{vals:i};var r=f[t+"periodalignment"];if(!r)return{vals:i};var n,o=f[t+"period"];if(T(o)){if((o=+o)<=0)return{vals:i}}else if(typeof o=="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:i};n=l}for(var c=s.calendar,d=r==="start",u=r==="end",x=f[t+"period0"],p=a(x,c)||0,g=[],m=[],y=[],v=i.length,_=0;_<v;_++){var h,S,A,E=i[_];if(n){for(h=Math.round((E-p)/(n*b)),A=w(p,n*h,c);A>E;)A=w(A,-n,c);for(;A<=E;)A=w(A,n,c);S=w(A,-n,c)}else{for(A=p+(h=Math.round((E-p)/o))*o;A>E;)A-=o;for(;A<=E;)A+=o;S=A-o}g[_]=d?S:u?A:(S+A)/2,m[_]=S,y[_]=A}return{vals:g,starts:m,ends:y}}},26720:function(F){"use strict";F.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(3400),w=e(39032).FP_SAFE,b=e(24040),f=e(43616),s=e(79811),t=s.getFromId,i=s.isLinked;function r(_,h){var S,A,E=[],P=_._fullLayout,I=o(P,h,0),D=o(P,h,1),z=c(_,h),V=z.min,O=z.max;if(V.length===0||O.length===0)return a.simpleMap(h.range,h.r2l);var j=V[0].val,Y=O[0].val;for(S=1;S<V.length&&j===Y;S++)j=Math.min(j,V[S].val);for(S=1;S<O.length&&j===Y;S++)Y=Math.max(Y,O[S].val);var B=h.autorange,U=B==="reversed"||B==="min reversed"||B==="max reversed";if(!U&&h.range){var q=a.simpleMap(h.range,h.r2l);U=q[1]<q[0]}h.autorange==="reversed"&&(h.autorange=!0);var te,ee,Q,J,K,X,ie=h.rangemode,se=ie==="tozero",ae=ie==="nonnegative",ue=h._length,ve=ue/10,ye=0;for(S=0;S<V.length;S++)for(te=V[S],A=0;A<O.length;A++)(X=(ee=O[A]).val-te.val-n(h,te.val,ee.val))>0&&((K=ue-I(te)-D(ee))>ve?X/K>ye&&(Q=te,J=ee,ye=X/K):X/ue>ye&&(Q={val:te.val,nopad:1},J={val:ee.val,nopad:1},ye=X/ue));if(j===Y){var pe=j-1,de=j+1;if(se)if(j===0)E=[0,1];else{var me=(j>0?O:V).reduce(function(Ce,ge){return Math.max(Ce,D(ge))},0),ke=j/(1-Math.min(.5,me/ue));E=j>0?[0,ke]:[ke,0]}else E=ae?[Math.max(0,pe),Math.max(1,de)]:[pe,de]}else se?(Q.val>=0&&(Q={val:0,nopad:1}),J.val<=0&&(J={val:0,nopad:1})):ae&&(Q.val-ye*I(Q)<0&&(Q={val:0,nopad:1}),J.val<=0&&(J={val:1,nopad:1})),ye=(J.val-Q.val-n(h,te.val,ee.val))/(ue-I(Q)-D(J)),E=[Q.val-ye*I(Q),J.val+ye*D(J)];return E=v(E,h),h.limitRange&&h.limitRange(),U&&E.reverse(),a.simpleMap(E,h.l2r||Number)}function n(_,h,S){var A=0;if(_.rangebreaks)for(var E=_.locateBreaks(h,S),P=0;P<E.length;P++){var I=E[P];A+=I.max-I.min}return A}function o(_,h,S){var A=.05*h._length,E=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var P=h.isReversed();if(!P){var I=a.simpleMap(h.range,h.r2l);P=I[1]<I[0]}P&&(S=!S)}var D=0;return i(_,h._id)||(D=function(z,V,O){var j=0,Y=V._id.charAt(0)==="x";for(var B in z._plots){var U=z._plots[B];if(V._id===U.xaxis._id||V._id===U.yaxis._id){var q=(Y?U.yaxis:U.xaxis)||{};if((q.ticklabelposition||"").indexOf("inside")!==-1&&(!O&&(q.side==="left"||q.side==="bottom")||O&&(q.side==="top"||q.side==="right"))){if(q._vals){var te=a.deg2rad(q._tickAngles[q._id+"tick"]||0),ee=Math.abs(Math.cos(te)),Q=Math.abs(Math.sin(te));if(!q._vals[0].bb){var J=q._id+"tick";q._selections[J].each(function(ae){var ue=T.select(this);ue.select(".text-math-group").empty()&&(ae.bb=f.bBox(ue.node()))})}for(var K=0;K<q._vals.length;K++){var X=q._vals[K].bb;if(X){var ie=2*l+X.width,se=2*l+X.height;j=Math.max(j,Y?Math.max(ie*ee,se*Q):Math.max(se*ee,ie*Q))}}}q.ticks==="inside"&&q.ticklabelposition==="inside"&&(j+=q.ticklen||0)}}}return j}(_,h,S)),A=Math.max(D,A),h.constrain==="domain"&&h._inputDomain&&(A*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(z){return z.nopad?0:z.pad+(z.extrapad?A:D)}}F.exports={applyAutorangeOptions:v,getAutoRange:r,makePadFn:o,doAutoRange:function(_,h,S){if(h.setScale(),h.autorange){h.range=S?S.slice():r(_,h),h._r=h.range.slice(),h._rl=a.simpleMap(h._r,h.r2l);var A=h._input,E={};E[h._attr+".range"]=h.range,E[h._attr+".autorange"]=h.autorange,b.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),A.range=h.range.slice(),A.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var I=P.rangeslider[h._name];I&&I.rangemode==="auto"&&(I.range=r(_,h)),P._input.rangeslider[h._name]=a.extendFlat({},I)}},findExtremes:function(_,h,S){S||(S={}),_._m||_.setScale();var A,E,P,I,D,z,V,O,j,Y=[],B=[],U=h.length,q=S.padded||!1,te=S.tozero&&(_.type==="linear"||_.type==="-"),ee=_.type==="log",Q=!1,J=S.vpadLinearized||!1;function K(pe){if(Array.isArray(pe))return Q=!0,function(me){return Math.max(Number(pe[me]||0),0)};var de=Math.max(Number(pe||0),0);return function(){return de}}var X=K((_._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),ie=K((_._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),se=K(S.vpadplus||S.vpad),ae=K(S.vpadminus||S.vpad);if(!Q){if(O=1/0,j=-1/0,ee)for(A=0;A<U;A++)(E=h[A])<O&&E>0&&(O=E),E>j&&E<w&&(j=E);else for(A=0;A<U;A++)(E=h[A])<O&&E>-w&&(O=E),E>j&&E<w&&(j=E);h=[O,j],U=2}var ue={tozero:te,extrapad:q};function ve(pe){P=h[pe],k(P)&&(z=X(pe),V=ie(pe),J?(I=_.c2l(P)-ae(pe),D=_.c2l(P)+se(pe)):(O=P-ae(pe),j=P+se(pe),ee&&O<j/10&&(O=j/10),I=_.c2l(O),D=_.c2l(j)),te&&(I=Math.min(0,I),D=Math.max(0,D)),p(I)&&d(Y,I,V,ue),p(D)&&u(B,D,z,ue))}var ye=Math.min(6,U);for(A=0;A<ye;A++)ve(A);for(A=U-1;A>=ye;A--)ve(A);return{min:Y,max:B,opts:S}},concatExtremes:c};var l=3;function c(_,h,S){var A,E,P,I=h._id,D=_._fullData,z=_._fullLayout,V=[],O=[];function j(te,ee){for(A=0;A<ee.length;A++){var Q=te[ee[A]],J=(Q._extremes||{})[I];if(Q.visible===!0&&J){for(E=0;E<J.min.length;E++)P=J.min[E],d(V,P.val,P.pad,{extrapad:P.extrapad});for(E=0;E<J.max.length;E++)P=J.max[E],u(O,P.val,P.pad,{extrapad:P.extrapad})}}}if(j(D,h._traceIndices),j(z.annotations||[],h._annIndices||[]),j(z.shapes||[],h._shapeIndices||[]),h._matchGroup&&!S){for(var Y in h._matchGroup)if(Y!==h._id){var B=t(_,Y),U=c(_,B,!0),q=h._length/B._length;for(E=0;E<U.min.length;E++)P=U.min[E],d(V,P.val,P.pad*q,{extrapad:P.extrapad});for(E=0;E<U.max.length;E++)P=U.max[E],u(O,P.val,P.pad*q,{extrapad:P.extrapad})}}return{min:V,max:O}}function d(_,h,S,A){x(_,h,S,A,g)}function u(_,h,S,A){x(_,h,S,A,m)}function x(_,h,S,A,E){for(var P=A.tozero,I=A.extrapad,D=!0,z=0;z<_.length&&D;z++){var V=_[z];if(E(V.val,h)&&V.pad>=S&&(V.extrapad||!I)){D=!1;break}E(h,V.val)&&V.pad<=S&&(I||!V.extrapad)&&(_.splice(z,1),z--)}if(D){var O=P&&h===0;_.push({val:h,pad:O?0:S,extrapad:!O&&I})}}function p(_){return k(_)&&Math.abs(_)<w}function g(_,h){return _<=h}function m(_,h){return _>=h}function y(_,h,S){return h===void 0||S===void 0||(h=_.d2l(h))<_.d2l(S)}function v(_,h){if(!h||!h.autorangeoptions)return _;var S=_[0],A=_[1],E=h.autorangeoptions.include;if(E!==void 0){var P=h.d2l(S),I=h.d2l(A);a.isArrayOrTypedArray(E)||(E=[E]);for(var D=0;D<E.length;D++){var z=h.d2l(E[D]);P>=z&&(P=z,S=z),I<=z&&(I=z,A=z)}}return S=function(V,O){var j=O.autorangeoptions;return j&&j.minallowed!==void 0&&y(O,j.minallowed,j.maxallowed)?j.minallowed:j&&j.clipmin!==void 0&&y(O,j.clipmin,j.clipmax)?Math.max(V,O.d2l(j.clipmin)):V}(S,h),A=function(V,O){var j=O.autorangeoptions;return j&&j.maxallowed!==void 0&&y(O,j.minallowed,j.maxallowed)?j.maxallowed:j&&j.clipmax!==void 0&&y(O,j.clipmin,j.clipmax)?Math.min(V,O.d2l(j.clipmax)):V}(A,h),[S,A]}},76808:function(F){"use strict";F.exports=function(C,e,T){var k,a;if(T){var w=e==="reversed"||e==="min reversed"||e==="max reversed";k=T[w?1:0],a=T[w?0:1]}var b=C("autorangeoptions.minallowed",a===null?k:void 0),f=C("autorangeoptions.maxallowed",k===null?a:void 0);b===void 0&&C("autorangeoptions.clipmin"),f===void 0&&C("autorangeoptions.clipmax"),C("autorangeoptions.include")}},54460:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(7316),w=e(24040),b=e(3400),f=b.strTranslate,s=e(72736),t=e(81668),i=e(76308),r=e(43616),n=e(94724),o=e(98728),l=e(39032),c=l.ONEMAXYEAR,d=l.ONEAVGYEAR,u=l.ONEMINYEAR,x=l.ONEMAXQUARTER,p=l.ONEAVGQUARTER,g=l.ONEMINQUARTER,m=l.ONEMAXMONTH,y=l.ONEAVGMONTH,v=l.ONEMINMONTH,_=l.ONEWEEK,h=l.ONEDAY,S=h/2,A=l.ONEHOUR,E=l.ONEMIN,P=l.ONESEC,I=l.MINUS_SIGN,D=l.BADNUM,z={K:"zeroline"},V={K:"gridline",L:"path"},O={K:"minor-gridline",L:"path"},j={K:"tick",L:"path"},Y={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},U=e(84284),q=U.MID_SHIFT,te=U.CAP_SHIFT,ee=U.LINE_SPACING,Q=U.OPPOSITE_SIDE,J=F.exports={};J.setConvert=e(78344);var K=e(52976),X=e(79811),ie=X.idSort,se=X.isLinked;J.id2name=X.id2name,J.name2id=X.name2id,J.cleanId=X.cleanId,J.list=X.list,J.listIds=X.listIds,J.getFromId=X.getFromId,J.getFromTrace=X.getFromTrace;var ae=e(19280);J.getAutoRange=ae.getAutoRange,J.findExtremes=ae.findExtremes;var ue=1e-4;function ve(ze){var Fe=(ze[1]-ze[0])*ue;return[ze[0]-Fe,ze[1]+Fe]}J.coerceRef=function(ze,Fe,rt,We,ft,mt){var vt=We.charAt(We.length-1),ut=rt._fullLayout._subplots[vt+"axis"],Mt=We+"ref",bt={};return ft||(ft=ut[0]||(typeof mt=="string"?mt:mt[0])),mt||(mt=ft),ut=ut.concat(ut.map(function(St){return St+" domain"})),bt[Mt]={valType:"enumerated",values:ut.concat(mt?typeof mt=="string"?[mt]:mt:[]),dflt:ft},b.coerce(ze,Fe,bt,Mt)},J.getRefType=function(ze){return ze===void 0?ze:ze==="paper"?"paper":ze==="pixel"?"pixel":/( domain)$/.test(ze)?"domain":"range"},J.coercePosition=function(ze,Fe,rt,We,ft,mt){var vt,ut;if(J.getRefType(We)!=="range")vt=b.ensureNumber,ut=rt(ft,mt);else{var Mt=J.getFromId(Fe,We);ut=rt(ft,mt=Mt.fraction2r(mt)),vt=Mt.cleanPos}ze[ft]=vt(ut)},J.cleanPosition=function(ze,Fe,rt){return(rt==="paper"||rt==="pixel"?b.ensureNumber:J.getFromId(Fe,rt).cleanPos)(ze)},J.redrawComponents=function(ze,Fe){Fe=Fe||J.listIds(ze);var rt=ze._fullLayout;function We(ft,mt,vt,ut){for(var Mt=w.getComponentMethod(ft,mt),bt={},St=0;St<Fe.length;St++)for(var Pt=rt[J.id2name(Fe[St])][vt],Dt=0;Dt<Pt.length;Dt++){var Ft=Pt[Dt];if(!bt[Ft]&&(Mt(ze,Ft),bt[Ft]=1,ut))return}}We("annotations","drawOne","_annIndices"),We("shapes","drawOne","_shapeIndices"),We("images","draw","_imgIndices",!0),We("selections","drawOne","_selectionIndices")};var ye=J.getDataConversions=function(ze,Fe,rt,We){var ft,mt=rt==="x"||rt==="y"||rt==="z"?rt:We;if(b.isArrayOrTypedArray(mt)){if(ft={type:K(We,void 0,{autotypenumbers:ze._fullLayout.autotypenumbers}),_categories:[]},J.setConvert(ft),ft.type==="category")for(var vt=0;vt<We.length;vt++)ft.d2c(We[vt])}else ft=J.getFromTrace(ze,Fe,mt);return ft?{d2c:ft.d2c,c2d:ft.c2d}:mt==="ids"?{d2c:de,c2d:de}:{d2c:pe,c2d:pe}};function pe(ze){return+ze}function de(ze){return String(ze)}function me(ze,Fe){return Math.abs((ze/Fe+.5)%1-.5)<.001}function ke(ze,Fe){return Math.abs(ze/Fe-1)<.001}function Ce(ze){return+ze.substring(1)}function ge(ze,Fe){return ze.rangebreaks&&(Fe=Fe.filter(function(rt){return ze.maskBreaks(rt.x)!==D})),Fe}function oe(ze){var Fe=ze._mainAxis,rt=[];if(Fe._vals){for(var We=0;We<Fe._vals.length;We++)if(!Fe._vals[We].noTick){var ft=Fe.l2p(Fe._vals[We].x),mt=ze.p2l(ft),vt=J.tickText(ze,mt);Fe._vals[We].minor&&(vt.minor=!0,vt.text=""),rt.push(vt)}}return ge(ze,rt)}function re(ze,Fe){var rt=ve(b.simpleMap(ze.range,ze.r2l)),We=Math.min(rt[0],rt[1]),ft=Math.max(rt[0],rt[1]),mt=ze.type==="category"?ze.d2l_noadd:ze.d2l;ze.type==="log"&&String(ze.dtick).charAt(0)!=="L"&&(ze.dtick="L"+Math.pow(10,Math.floor(Math.min(ze.range[0],ze.range[1]))-1));for(var vt=[],ut=0;ut<=1;ut++)if((Fe===void 0||!(Fe&&ut||Fe===!1&&!ut))&&(!ut||ze.minor)){var Mt=ut?ze.minor.tickvals:ze.tickvals,bt=ut?[]:ze.ticktext;if(Mt){b.isArrayOrTypedArray(bt)||(bt=[]);for(var St=0;St<Mt.length;St++){var Pt=mt(Mt[St]);if(Pt>We&&Pt<ft){var Dt=J.tickText(ze,Pt,!1,String(bt[St]));ut&&(Dt.minor=!0,Dt.text=""),vt.push(Dt)}}}}return ge(ze,vt)}J.getDataToCoordFunc=function(ze,Fe,rt,We){return ye(ze,Fe,rt,We).d2c},J.counterLetter=function(ze){var Fe=ze.charAt(0);return Fe==="x"?"y":Fe==="y"?"x":void 0},J.minDtick=function(ze,Fe,rt,We){["log","category","multicategory"].indexOf(ze.type)===-1&&We?ze._minDtick===void 0?(ze._minDtick=Fe,ze._forceTick0=rt):ze._minDtick&&((ze._minDtick/Fe+1e-6)%1<2e-6&&((rt-ze._forceTick0)/Fe%1+1.000001)%1<2e-6?(ze._minDtick=Fe,ze._forceTick0=rt):((Fe/ze._minDtick+1e-6)%1>2e-6||((rt-ze._forceTick0)/ze._minDtick%1+1.000001)%1>2e-6)&&(ze._minDtick=0)):ze._minDtick=0},J.saveRangeInitial=function(ze,Fe){for(var rt=J.list(ze,"",!0),We=!1,ft=0;ft<rt.length;ft++){var mt=rt[ft],vt=mt._rangeInitial0===void 0&&mt._rangeInitial1===void 0,ut=vt||mt.range[0]!==mt._rangeInitial0||mt.range[1]!==mt._rangeInitial1,Mt=mt.autorange;(vt&&Mt!==!0||Fe&&ut)&&(mt._rangeInitial0=Mt==="min"||Mt==="max reversed"?void 0:mt.range[0],mt._rangeInitial1=Mt==="max"||Mt==="min reversed"?void 0:mt.range[1],mt._autorangeInitial=Mt,We=!0)}return We},J.saveShowSpikeInitial=function(ze,Fe){for(var rt=J.list(ze,"",!0),We=!1,ft="on",mt=0;mt<rt.length;mt++){var vt=rt[mt],ut=vt._showSpikeInitial===void 0,Mt=ut||vt.showspikes!==vt._showspikes;(ut||Fe&&Mt)&&(vt._showSpikeInitial=vt.showspikes,We=!0),ft!=="on"||vt.showspikes||(ft="off")}return ze._fullLayout._cartesianSpikesEnabled=ft,We},J.autoBin=function(ze,Fe,rt,We,ft,mt){var vt,ut=b.aggNums(Math.min,null,ze),Mt=b.aggNums(Math.max,null,ze);if(Fe.type==="category"||Fe.type==="multicategory")return{start:ut-.5,end:Mt+.5,size:Math.max(1,Math.round(mt)||1),_dataSpan:Mt-ut};if(ft||(ft=Fe.calendar),vt=Fe.type==="log"?{type:"linear",range:[ut,Mt]}:{type:Fe.type,range:b.simpleMap([ut,Mt],Fe.c2r,0,ft),calendar:ft},J.setConvert(vt),mt=mt&&o.dtick(mt,vt.type))vt.dtick=mt,vt.tick0=o.tick0(void 0,vt.type,ft);else{var bt;if(rt)bt=(Mt-ut)/rt;else{var St=b.distinctVals(ze),Pt=Math.pow(10,Math.floor(Math.log(St.minDiff)/Math.LN10)),Dt=Pt*b.roundUp(St.minDiff/Pt,[.9,1.9,4.9,9.9],!0);bt=Math.max(Dt,2*b.stdev(ze)/Math.pow(ze.length,We?.25:.4)),k(bt)||(bt=1)}J.autoTicks(vt,bt)}var Ft,Xt=vt.dtick,an=J.tickIncrement(J.tickFirst(vt),Xt,"reverse",ft);if(typeof Xt=="number")an=function(Ht,Zt,jt,Pn,Tn){var mn=0,Qt=0,un=0,nn=0;function hn(Ln){return(1+100*(Ln-Ht)/jt.dtick)%100<2}for(var bn=0;bn<Zt.length;bn++)Zt[bn]%1==0?un++:k(Zt[bn])||nn++,hn(Zt[bn])&&mn++,hn(Zt[bn]+jt.dtick/2)&&Qt++;var wn=Zt.length-nn;if(un===wn&&jt.type!=="date")jt.dtick<1?Ht=Pn-.5*jt.dtick:(Ht-=.5)+jt.dtick<Pn&&(Ht+=jt.dtick);else if(Qt<.1*wn&&(mn>.3*wn||hn(Pn)||hn(Tn))){var Cn=jt.dtick/2;Ht+=Ht+Cn<Pn?Cn:-Cn}return Ht}(an,ze,vt,ut,Mt),Ft=an+(1+Math.floor((Mt-an)/Xt))*Xt;else for(vt.dtick.charAt(0)==="M"&&(an=function(Ht,Zt,jt,Pn,Tn){var mn=b.findExactDates(Zt,Tn);if(mn.exactDays>.8){var Qt=Number(jt.substr(1));mn.exactYears>.8&&Qt%12==0?Ht=J.tickIncrement(Ht,"M6","reverse")+1.5*h:mn.exactMonths>.8?Ht=J.tickIncrement(Ht,"M1","reverse")+15.5*h:Ht-=S;var un=J.tickIncrement(Ht,jt);if(un<=Pn)return un}return Ht}(an,ze,Xt,ut,ft)),Ft=an;Ft<=Mt;)Ft=J.tickIncrement(Ft,Xt,!1,ft);return{start:Fe.c2r(an,0,ft),end:Fe.c2r(Ft,0,ft),size:Xt,_dataSpan:Mt-ut}},J.prepMinorTicks=function(ze,Fe,rt){if(!Fe.minor.dtick){delete ze.dtick;var We,ft=Fe.dtick&&k(Fe._tmin);if(ft){var mt=J.tickIncrement(Fe._tmin,Fe.dtick,!0);We=[Fe._tmin,.99*mt+.01*Fe._tmin]}else{var vt=b.simpleMap(Fe.range,Fe.r2l);We=[vt[0],.8*vt[0]+.2*vt[1]]}if(ze.range=b.simpleMap(We,Fe.l2r),ze._isMinor=!0,J.prepTicks(ze,rt),ft){var ut=k(Fe.dtick),Mt=k(ze.dtick),bt=ut?Fe.dtick:+Fe.dtick.substring(1),St=Mt?ze.dtick:+ze.dtick.substring(1);ut&&Mt?me(bt,St)?bt===2*_&&St===2*h&&(ze.dtick=_):bt===2*_&&St===3*h?ze.dtick=_:bt!==_||(Fe._input.minor||{}).nticks?ke(bt/St,2.5)?ze.dtick=bt/2:ze.dtick=bt:ze.dtick=h:String(Fe.dtick).charAt(0)==="M"?Mt?ze.dtick="M1":me(bt,St)?bt>=12&&St===2&&(ze.dtick="M3"):ze.dtick=Fe.dtick:String(ze.dtick).charAt(0)==="L"?String(Fe.dtick).charAt(0)==="L"?me(bt,St)||(ze.dtick=ke(bt/St,2.5)?Fe.dtick/2:Fe.dtick):ze.dtick="D1":ze.dtick==="D2"&&+Fe.dtick>1&&(ze.dtick=1)}ze.range=Fe.range}Fe.minor._tick0Init===void 0&&(ze.tick0=Fe.tick0)},J.prepTicks=function(ze,Fe){var rt=b.simpleMap(ze.range,ze.r2l,void 0,void 0,Fe);if(ze.tickmode==="auto"||!ze.dtick){var We,ft=ze.nticks;ft||(ze.type==="category"||ze.type==="multicategory"?(We=ze.tickfont?b.bigFont(ze.tickfont.size||12):15,ft=ze._length/We):(We=ze._id.charAt(0)==="y"?40:80,ft=b.constrain(ze._length/We,4,9)+1),ze._name==="radialaxis"&&(ft*=2)),ze.minor&&ze.minor.tickmode!=="array"||ze.tickmode==="array"&&(ft*=100),ze._roughDTick=Math.abs(rt[1]-rt[0])/ft,J.autoTicks(ze,ze._roughDTick),ze._minDtick>0&&ze.dtick<2*ze._minDtick&&(ze.dtick=ze._minDtick,ze.tick0=ze.l2r(ze._forceTick0))}ze.ticklabelmode==="period"&&function(mt){var vt;function ut(){return!(k(mt.dtick)||mt.dtick.charAt(0)!=="M")}var Mt=ut(),bt=J.getTickFormat(mt);if(bt){var St=mt._dtickInit!==mt.dtick;/%[fLQsSMX]/.test(bt)||(/%[HI]/.test(bt)?(vt=A,St&&!Mt&&mt.dtick<A&&(mt.dtick=A)):/%p/.test(bt)?(vt=S,St&&!Mt&&mt.dtick<S&&(mt.dtick=S)):/%[Aadejuwx]/.test(bt)?(vt=h,St&&!Mt&&mt.dtick<h&&(mt.dtick=h)):/%[UVW]/.test(bt)?(vt=_,St&&!Mt&&mt.dtick<_&&(mt.dtick=_)):/%[Bbm]/.test(bt)?(vt=y,St&&(Mt?Ce(mt.dtick)<1:mt.dtick<v)&&(mt.dtick="M1")):/%[q]/.test(bt)?(vt=p,St&&(Mt?Ce(mt.dtick)<3:mt.dtick<g)&&(mt.dtick="M3")):/%[Yy]/.test(bt)&&(vt=d,St&&(Mt?Ce(mt.dtick)<12:mt.dtick<u)&&(mt.dtick="M12")))}(Mt=ut())&&mt.tick0===mt._dowTick0&&(mt.tick0=mt._rawTick0),mt._definedDelta=vt}(ze),ze.tick0||(ze.tick0=ze.type==="date"?"2000-01-01":0),ze.type==="date"&&ze.dtick<.1&&(ze.dtick=.1),_e(ze)},J.calcTicks=function(ze,Fe){for(var rt,We,ft=ze.type,mt=ze.calendar,vt=ze.ticklabelstep,ut=ze.ticklabelmode==="period",Mt=b.simpleMap(ze.range,ze.r2l,void 0,void 0,Fe),bt=Mt[1]<Mt[0],St=Math.min(Mt[0],Mt[1]),Pt=Math.max(Mt[0],Mt[1]),Dt=Math.max(1e3,ze._length||0),Ft=[],Xt=[],an=[],Ht=[],Zt=ze.minor&&(ze.minor.ticks||ze.minor.showgrid),jt=1;jt>=(Zt?0:1);jt--){var Pn=!jt;jt?(ze._dtickInit=ze.dtick,ze._tick0Init=ze.tick0):(ze.minor._dtickInit=ze.minor.dtick,ze.minor._tick0Init=ze.minor.tick0);var Tn=jt?ze:b.extendFlat({},ze,ze.minor);if(Pn?J.prepMinorTicks(Tn,ze,Fe):J.prepTicks(Tn,Fe),Tn.tickmode!=="array")if(Tn.tickmode!=="sync"){var mn=ve(Mt),Qt=mn[0],un=mn[1],nn=k(Tn.dtick),hn=ft==="log"&&!(nn||Tn.dtick.charAt(0)==="L"),bn=J.tickFirst(Tn,Fe);if(jt){if(ze._tmin=bn,bn<Qt!==bt)break;ft!=="category"&&ft!=="multicategory"||(un=bt?Math.max(-.5,un):Math.min(ze._categories.length-.5,un))}var wn,Cn,Ln=null,Mn=bn;jt&&(nn?Cn=ze.dtick:ft==="date"?typeof ze.dtick=="string"&&ze.dtick.charAt(0)==="M"&&(Cn=y*ze.dtick.substring(1)):Cn=ze._roughDTick,wn=Math.round((ze.r2l(Mn)-ze.r2l(ze.tick0))/Cn)-1);var jn=Tn.dtick;for(Tn.rangebreaks&&Tn._tick0Init!==Tn.tick0&&(Mn=Ne(Mn,ze),bt||(Mn=J.tickIncrement(Mn,jn,!bt,mt))),jt&&ut&&(Mn=J.tickIncrement(Mn,jn,!bt,mt),wn--);bt?Mn>=un:Mn<=un;Mn=J.tickIncrement(Mn,jn,bt,mt)){if(jt&&wn++,Tn.rangebreaks&&!bt){if(Mn<Qt)continue;if(Tn.maskBreaks(Mn)===D&&Ne(Mn,Tn)>=Pt)break}if(an.length>Dt||Mn===Ln)break;Ln=Mn;var Rn={value:Mn};jt?(hn&&Mn!==(0|Mn)&&(Rn.simpleLabel=!0),vt>1&&wn%vt&&(Rn.skipLabel=!0),an.push(Rn)):(Rn.minor=!0,Ht.push(Rn))}}else an=[],Ft=oe(ze);else jt?(an=[],Ft=re(ze,!Pn)):(Ht=[],Xt=re(ze,!Pn))}if(Zt&&!(ze.minor.ticks==="inside"&&ze.ticks==="outside"||ze.minor.ticks==="outside"&&ze.ticks==="inside")){for(var Qn=an.map(function(Lt){return Lt.value}),Yn=[],ar=0;ar<Ht.length;ar++){var Kn=Ht[ar],mr=Kn.value;if(Qn.indexOf(mr)===-1){for(var en=!1,rn=0;!en&&rn<an.length;rn++)1e7+an[rn].value===1e7+mr&&(en=!0);en||Yn.push(Kn)}}Ht=Yn}if(ut&&function(Lt,Nt,$t){for(var fn=0;fn<Lt.length;fn++){var dn=Lt[fn].value,xn=fn,sn=fn+1;fn<Lt.length-1?(xn=fn,sn=fn+1):fn>0?(xn=fn-1,sn=fn):(xn=fn,sn=fn);var Yt,Wt=Lt[xn].value,tn=Lt[sn].value,ln=Math.abs(tn-Wt),An=$t||ln,In=0;An>=u?In=ln>=u&&ln<=c?ln:d:$t===p&&An>=g?In=ln>=g&&ln<=x?ln:p:An>=v?In=ln>=v&&ln<=m?ln:y:$t===_&&An>=_?In=_:An>=h?In=h:$t===S&&An>=S?In=S:$t===A&&An>=A&&(In=A),In>=ln&&(In=ln,Yt=!0);var zn=dn+In;if(Nt.rangebreaks&&In>0){for(var Un=0,rr=0;rr<84;rr++){var Xn=(rr+.5)/84;Nt.maskBreaks(dn*(1-Xn)+Xn*zn)!==D&&Un++}(In*=Un/84)||(Lt[fn].drop=!0),Yt&&ln>_&&(In=ln)}(In>0||fn===0)&&(Lt[fn].periodX=dn+In/2)}}(an,ze,ze._definedDelta),ze.rangebreaks){var En=ze._id.charAt(0)==="y",gn=1;ze.tickmode==="auto"&&(gn=ze.tickfont?ze.tickfont.size:12);var Dn=NaN;for(rt=an.length-1;rt>-1;rt--)if(an[rt].drop)an.splice(rt,1);else{an[rt].value=Ne(an[rt].value,ze);var qn=ze.c2p(an[rt].value);(En?Dn>qn-gn:Dn<qn+gn)?an.splice(bt?rt+1:rt,1):Dn=qn}}Xe(ze)&&Math.abs(Mt[1]-Mt[0])===360&&an.pop(),ze._tmax=(an[an.length-1]||{}).value,ze._prevDateHead="",ze._inCalcTicks=!0;var Vn,Jn,xr=function(Lt){Lt.text="",ze._prevDateHead=We};for(an=an.concat(Ht),rt=0;rt<an.length;rt++){var Jt=an[rt].minor,vn=an[rt].value;Jt?Xt.push({x:vn,minor:!0}):(We=ze._prevDateHead,Vn=J.tickText(ze,vn,!1,an[rt].simpleLabel),(Jn=an[rt].periodX)!==void 0&&(Vn.periodX=Jn,(Jn>Pt||Jn<St)&&(Jn>Pt&&(Vn.periodX=Pt),Jn<St&&(Vn.periodX=St),xr(Vn))),an[rt].skipLabel&&xr(Vn),Ft.push(Vn))}return Ft=Ft.concat(Xt),ze._inCalcTicks=!1,ut&&Ft.length&&(Ft[0].noTick=!0),Ft};var fe=[2,5,10],Se=[1,2,3,6,12],be=[1,2,5,10,15,30],we=[1,2,3,7,14],Me=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Pe=[-.301,0,.301,.699,1],De=[15,30,45,90,180];function he(ze,Fe,rt){return Fe*b.roundUp(ze/Fe,rt)}function _e(ze){var Fe=ze.dtick;if(ze._tickexponent=0,k(Fe)||typeof Fe=="string"||(Fe=1),ze.type!=="category"&&ze.type!=="multicategory"||(ze._tickround=null),ze.type==="date"){var rt=ze.r2l(ze.tick0),We=ze.l2r(rt).replace(/(^-|i)/g,""),ft=We.length;if(String(Fe).charAt(0)==="M")ft>10||We.substr(5)!=="01-01"?ze._tickround="d":ze._tickround=+Fe.substr(1)%12==0?"y":"m";else if(Fe>=h&&ft<=10||Fe>=15*h)ze._tickround="d";else if(Fe>=E&&ft<=16||Fe>=A)ze._tickround="M";else if(Fe>=P&&ft<=19||Fe>=E)ze._tickround="S";else{var mt=ze.l2r(rt+Fe).replace(/^-/,"").length;ze._tickround=Math.max(ft,mt)-20,ze._tickround<0&&(ze._tickround=4)}}else if(k(Fe)||Fe.charAt(0)==="L"){var vt=ze.range.map(ze.r2d||Number);k(Fe)||(Fe=Number(Fe.substr(1))),ze._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var ut=Math.max(Math.abs(vt[0]),Math.abs(vt[1])),Mt=Math.floor(Math.log(ut)/Math.LN10+.01),bt=ze.minexponent===void 0?3:ze.minexponent;Math.abs(Mt)>bt&&(Ee(ze.exponentformat)&&!Be(Mt)?ze._tickexponent=3*Math.round((Mt-1)/3):ze._tickexponent=Mt)}else ze._tickround=null}function Ae(ze,Fe,rt){var We=ze.tickfont||{};return{x:Fe,dx:0,dy:0,text:rt||"",fontSize:We.size,font:We.family,fontWeight:We.weight,fontStyle:We.style,fontVariant:We.variant,fontTextcase:We.textcase,fontLineposition:We.lineposition,fontShadow:We.shadow,fontColor:We.color}}J.autoTicks=function(ze,Fe,rt){var We;function ft(Pt){return Math.pow(Pt,Math.floor(Math.log(Fe)/Math.LN10))}if(ze.type==="date"){ze.tick0=b.dateTick0(ze.calendar,0);var mt=2*Fe;if(mt>d)Fe/=d,We=ft(10),ze.dtick="M"+12*he(Fe,We,fe);else if(mt>y)Fe/=y,ze.dtick="M"+he(Fe,1,Se);else if(mt>h){if(ze.dtick=he(Fe,h,ze._hasDayOfWeekBreaks?[1,2,7,14]:we),!rt){var vt=J.getTickFormat(ze),ut=ze.ticklabelmode==="period";ut&&(ze._rawTick0=ze.tick0),/%[uVW]/.test(vt)?ze.tick0=b.dateTick0(ze.calendar,2):ze.tick0=b.dateTick0(ze.calendar,1),ut&&(ze._dowTick0=ze.tick0)}}else mt>A?ze.dtick=he(Fe,A,Se):mt>E?ze.dtick=he(Fe,E,be):mt>P?ze.dtick=he(Fe,P,be):(We=ft(10),ze.dtick=he(Fe,We,fe))}else if(ze.type==="log"){ze.tick0=0;var Mt=b.simpleMap(ze.range,ze.r2l);if(ze._isMinor&&(Fe*=1.5),Fe>.7)ze.dtick=Math.ceil(Fe);else if(Math.abs(Mt[1]-Mt[0])<1){var bt=1.5*Math.abs((Mt[1]-Mt[0])/Fe);Fe=Math.abs(Math.pow(10,Mt[1])-Math.pow(10,Mt[0]))/bt,We=ft(10),ze.dtick="L"+he(Fe,We,fe)}else ze.dtick=Fe>.3?"D2":"D1"}else ze.type==="category"||ze.type==="multicategory"?(ze.tick0=0,ze.dtick=Math.ceil(Math.max(Fe,1))):Xe(ze)?(ze.tick0=0,We=1,ze.dtick=he(Fe,We,De)):(ze.tick0=0,We=ft(10),ze.dtick=he(Fe,We,fe));if(ze.dtick===0&&(ze.dtick=1),!k(ze.dtick)&&typeof ze.dtick!="string"){var St=ze.dtick;throw ze.dtick=1,"ax.dtick error: "+String(St)}},J.tickIncrement=function(ze,Fe,rt,We){var ft=rt?-1:1;if(k(Fe))return b.increment(ze,ft*Fe);var mt=Fe.charAt(0),vt=ft*Number(Fe.substr(1));if(mt==="M")return b.incrementMonth(ze,vt,We);if(mt==="L")return Math.log(Math.pow(10,ze)+vt)/Math.LN10;if(mt==="D"){var ut=Fe==="D2"?Pe:Me,Mt=ze+.01*ft,bt=b.roundUp(b.mod(Mt,1),ut,rt);return Math.floor(Mt)+Math.log(T.round(Math.pow(10,bt),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},J.tickFirst=function(ze,Fe){var rt=ze.r2l||Number,We=b.simpleMap(ze.range,rt,void 0,void 0,Fe),ft=We[1]<We[0],mt=ft?Math.floor:Math.ceil,vt=ve(We)[0],ut=ze.dtick,Mt=rt(ze.tick0);if(k(ut)){var bt=mt((vt-Mt)/ut)*ut+Mt;return ze.type!=="category"&&ze.type!=="multicategory"||(bt=b.constrain(bt,0,ze._categories.length-1)),bt}var St=ut.charAt(0),Pt=Number(ut.substr(1));if(St==="M"){for(var Dt,Ft,Xt,an=0,Ht=Mt;an<10;){if(((Dt=J.tickIncrement(Ht,ut,ft,ze.calendar))-vt)*(Ht-vt)<=0)return ft?Math.min(Ht,Dt):Math.max(Ht,Dt);Ft=(vt-(Ht+Dt)/2)/(Dt-Ht),Xt=St+(Math.abs(Math.round(Ft))||1)*Pt,Ht=J.tickIncrement(Ht,Xt,Ft<0?!ft:ft,ze.calendar),an++}return b.error("tickFirst did not converge",ze),Ht}if(St==="L")return Math.log(mt((Math.pow(10,vt)-Mt)/Pt)*Pt+Mt)/Math.LN10;if(St==="D"){var Zt=ut==="D2"?Pe:Me,jt=b.roundUp(b.mod(vt,1),Zt,ft);return Math.floor(vt)+Math.log(T.round(Math.pow(10,jt),1))/Math.LN10}throw"unrecognized dtick "+String(ut)},J.tickText=function(ze,Fe,rt,We){var ft,mt=Ae(ze,Fe),vt=ze.tickmode==="array",ut=rt||vt,Mt=ze.type,bt=Mt==="category"?ze.d2l_noadd:ze.d2l,St=function(Ht){var Zt=ze.l2p(Ht);return Zt>=0&&Zt<=ze._length?Ht:null};if(vt&&b.isArrayOrTypedArray(ze.ticktext)){var Pt=b.simpleMap(ze.range,ze.r2l),Dt=(Math.abs(Pt[1]-Pt[0])-(ze._lBreaks||0))/1e4;for(ft=0;ft<ze.ticktext.length&&!(Math.abs(Fe-bt(ze.tickvals[ft]))<Dt);ft++);if(ft<ze.ticktext.length)return mt.text=String(ze.ticktext[ft]),mt.xbnd=[St(mt.x-.5),St(mt.x+ze.dtick-.5)],mt}function Ft(Ht){if(Ht===void 0)return!0;if(rt)return Ht==="none";var Zt={first:ze._tmin,last:ze._tmax}[Ht];return Ht!=="all"&&Fe!==Zt}var Xt=rt?"never":ze.exponentformat!=="none"&&Ft(ze.showexponent)?"hide":"";if(Mt==="date"?function(Ht,Zt,jt,Pn){var Tn=Ht._tickround,mn=jt&&Ht.hoverformat||J.getTickFormat(Ht);(Pn=!mn&&Pn)&&(Tn=k(Tn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Tn]);var Qt,un=b.formatDate(Zt.x,mn,Tn,Ht._dateFormat,Ht.calendar,Ht._extraFormat),nn=un.indexOf(`
`);if(nn!==-1&&(Qt=un.substr(nn+1),un=un.substr(0,nn)),Pn&&(Qt===void 0||un!=="00:00:00"&&un!=="00:00"?un.length===8&&(un=un.replace(/:00$/,"")):(un=Qt,Qt="")),Qt)if(jt)Tn==="d"?un+=", "+Qt:un=Qt+(un?", "+un:"");else if(Ht._inCalcTicks&&Ht._prevDateHead===Qt){var hn=Ye(Ht),bn=Ht._trueSide||Ht.side;(!hn&&bn==="top"||hn&&bn==="bottom")&&(un+="<br> ")}else Ht._prevDateHead=Qt,un+="<br>"+Qt;Zt.text=un}(ze,mt,rt,ut):Mt==="log"?function(Ht,Zt,jt,Pn,Tn){var mn=Ht.dtick,Qt=Zt.x,un=Ht.tickformat,nn=typeof mn=="string"&&mn.charAt(0);if(Tn==="never"&&(Tn=""),Pn&&nn!=="L"&&(mn="L3",nn="L"),un||nn==="L")Zt.text=Ve(Math.pow(10,Qt),Ht,Tn,Pn);else if(k(mn)||nn==="D"&&b.mod(Qt+.01,1)<.1){var hn=Math.round(Qt),bn=Math.abs(hn),wn=Ht.exponentformat;wn==="power"||Ee(wn)&&Be(hn)?(Zt.text=hn===0?1:hn===1?"10":"10<sup>"+(hn>1?"":I)+bn+"</sup>",Zt.fontSize*=1.25):(wn==="e"||wn==="E")&&bn>2?Zt.text="1"+wn+(hn>0?"+":I)+bn:(Zt.text=Ve(Math.pow(10,Qt),Ht,"","fakehover"),mn==="D1"&&Ht._id.charAt(0)==="y"&&(Zt.dy-=Zt.fontSize/6))}else{if(nn!=="D")throw"unrecognized dtick "+String(mn);Zt.text=String(Math.round(Math.pow(10,b.mod(Qt,1)))),Zt.fontSize*=.75}if(Ht.dtick==="D1"){var Cn=String(Zt.text).charAt(0);Cn!=="0"&&Cn!=="1"||(Ht._id.charAt(0)==="y"?Zt.dx-=Zt.fontSize/4:(Zt.dy+=Zt.fontSize/2,Zt.dx+=(Ht.range[1]>Ht.range[0]?1:-1)*Zt.fontSize*(Qt<0?.5:.25)))}}(ze,mt,0,ut,Xt):Mt==="category"?function(Ht,Zt){var jt=Ht._categories[Math.round(Zt.x)];jt===void 0&&(jt=""),Zt.text=String(jt)}(ze,mt):Mt==="multicategory"?function(Ht,Zt,jt){var Pn=Math.round(Zt.x),Tn=Ht._categories[Pn]||[],mn=Tn[1]===void 0?"":String(Tn[1]),Qt=Tn[0]===void 0?"":String(Tn[0]);jt?Zt.text=Qt+" - "+mn:(Zt.text=mn,Zt.text2=Qt)}(ze,mt,rt):Xe(ze)?function(Ht,Zt,jt,Pn,Tn){if(Ht.thetaunit!=="radians"||jt)Zt.text=Ve(Zt.x,Ht,Tn,Pn);else{var mn=Zt.x/180;if(mn===0)Zt.text="0";else{var Qt=function(nn){function hn(Ln,Mn){return Math.abs(Ln-Mn)<=1e-6}var bn=function(Ln){for(var Mn=1;!hn(Math.round(Ln*Mn)/Mn,Ln);)Mn*=10;return Mn}(nn),wn=nn*bn,Cn=Math.abs(function Ln(Mn,jn){return hn(jn,0)?Mn:Ln(jn,Mn%jn)}(wn,bn));return[Math.round(wn/Cn),Math.round(bn/Cn)]}(mn);if(Qt[1]>=100)Zt.text=Ve(b.deg2rad(Zt.x),Ht,Tn,Pn);else{var un=Zt.x<0;Qt[1]===1?Qt[0]===1?Zt.text="\u03C0":Zt.text=Qt[0]+"\u03C0":Zt.text=["<sup>",Qt[0],"</sup>","\u2044","<sub>",Qt[1],"</sub>","\u03C0"].join(""),un&&(Zt.text=I+Zt.text)}}}}(ze,mt,rt,ut,Xt):function(Ht,Zt,jt,Pn,Tn){Tn==="never"?Tn="":Ht.showexponent==="all"&&Math.abs(Zt.x/Ht.dtick)<1e-6&&(Tn="hide"),Zt.text=Ve(Zt.x,Ht,Tn,Pn)}(ze,mt,0,ut,Xt),We||(ze.tickprefix&&!Ft(ze.showtickprefix)&&(mt.text=ze.tickprefix+mt.text),ze.ticksuffix&&!Ft(ze.showticksuffix)&&(mt.text+=ze.ticksuffix)),ze.labelalias&&ze.labelalias.hasOwnProperty(mt.text)){var an=ze.labelalias[mt.text];typeof an=="string"&&(mt.text=an)}return(ze.tickson==="boundaries"||ze.showdividers)&&(mt.xbnd=[St(mt.x-.5),St(mt.x+ze.dtick-.5)]),mt},J.hoverLabelText=function(ze,Fe,rt){rt&&(ze=b.extendFlat({},ze,{hoverformat:rt}));var We=b.isArrayOrTypedArray(Fe)?Fe[0]:Fe,ft=b.isArrayOrTypedArray(Fe)?Fe[1]:void 0;if(ft!==void 0&&ft!==We)return J.hoverLabelText(ze,We,rt)+" - "+J.hoverLabelText(ze,ft,rt);var mt=ze.type==="log"&&We<=0,vt=J.tickText(ze,ze.c2l(mt?-We:We),"hover").text;return mt?We===0?"0":I+vt:vt};var Oe=["f","p","n","\u03BC","m","","k","M","G","T"];function Ee(ze){return ze==="SI"||ze==="B"}function Be(ze){return ze>14||ze<-15}function Ve(ze,Fe,rt,We){var ft=ze<0,mt=Fe._tickround,vt=rt||Fe.exponentformat||"B",ut=Fe._tickexponent,Mt=J.getTickFormat(Fe),bt=Fe.separatethousands;if(We){var St={exponentformat:vt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:k(ze)&&Math.abs(ze)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,ze||1]};_e(St),mt=(Number(St._tickround)||0)+4,ut=St._tickexponent,Fe.hoverformat&&(Mt=Fe.hoverformat)}if(Mt)return Fe._numFormat(Mt)(ze).replace(/-/g,I);var Pt,Dt=Math.pow(10,-mt)/2;if(vt==="none"&&(ut=0),(ze=Math.abs(ze))<Dt)ze="0",ft=!1;else{if(ze+=Dt,ut&&(ze*=Math.pow(10,-ut),mt+=ut),mt===0)ze=String(Math.floor(ze));else if(mt<0){ze=(ze=String(Math.round(ze))).substr(0,ze.length+mt);for(var Ft=mt;Ft<0;Ft++)ze+="0"}else{var Xt=(ze=String(ze)).indexOf(".")+1;Xt&&(ze=ze.substr(0,Xt+mt).replace(/\.?0+$/,""))}ze=b.numSeparate(ze,Fe._separators,bt)}return ut&&vt!=="hide"&&(Ee(vt)&&Be(ut)&&(vt="power"),Pt=ut<0?I+-ut:vt!=="power"?"+"+ut:String(ut),vt==="e"||vt==="E"?ze+=vt+Pt:vt==="power"?ze+="\xD710<sup>"+Pt+"</sup>":vt==="B"&&ut===9?ze+="B":Ee(vt)&&(ze+=Oe[ut/3+5])),ft?I+ze:ze}function Ze(ze,Fe){if(ze){var rt=Object.keys(B).reduce(function(We,ft){return Fe.indexOf(ft)!==-1&&B[ft].forEach(function(mt){We[mt]=1}),We},{});Object.keys(ze).forEach(function(We){rt[We]||(We.length===1?ze[We]=0:delete ze[We])})}}function it(ze,Fe){for(var rt=[],We={},ft=0;ft<Fe.length;ft++){var mt=Fe[ft];We[mt.text2]?We[mt.text2].push(mt.x):We[mt.text2]=[mt.x]}for(var vt in We)rt.push(Ae(ze,b.interp(We[vt],.5),vt));return rt}function at(ze){return ze.periodX!==void 0?ze.periodX:ze.x}function gt(ze){return[ze.text,ze.x,ze.axInfo,ze.font,ze.fontSize,ze.fontColor].join("_")}function yt(ze){var Fe=ze.title.font.size,rt=(ze.title.text.match(s.BR_TAG_ALL)||[]).length;return ze.title.hasOwnProperty("standoff")?Fe*(te+rt*ee):rt?Fe*(rt+1)*ee:Fe}function pt(ze,Fe){var rt=ze.l2p(Fe);return rt>1&&rt<ze._length-1}function et(ze){var Fe=T.select(ze),rt=Fe.select(".text-math-group");return rt.empty()?Fe.select("text"):rt}function $e(ze){return ze._id+".automargin"}function At(ze){return $e(ze)+".mirror"}function Ot(ze){return ze._id+".rangeslider"}function Rt(ze,Fe){for(var rt=0;rt<Fe.length;rt++)ze.indexOf(Fe[rt])===-1&&ze.push(Fe[rt])}function Ct(ze,Fe,rt){var We,ft,mt=[],vt=[],ut=ze.layout;for(We=0;We<Fe.length;We++)mt.push(J.getFromId(ze,Fe[We]));for(We=0;We<rt.length;We++)vt.push(J.getFromId(ze,rt[We]));var Mt=Object.keys(n),bt=["anchor","domain","overlaying","position","side","tickangle","editType"],St=["linear","log"];for(We=0;We<Mt.length;We++){var Pt=Mt[We],Dt=mt[0][Pt],Ft=vt[0][Pt],Xt=!0,an=!1,Ht=!1;if(Pt.charAt(0)!=="_"&&typeof Dt!="function"&&bt.indexOf(Pt)===-1){for(ft=1;ft<mt.length&&Xt;ft++){var Zt=mt[ft][Pt];Pt==="type"&&St.indexOf(Dt)!==-1&&St.indexOf(Zt)!==-1&&Dt!==Zt?an=!0:Zt!==Dt&&(Xt=!1)}for(ft=1;ft<vt.length&&Xt;ft++){var jt=vt[ft][Pt];Pt==="type"&&St.indexOf(Ft)!==-1&&St.indexOf(jt)!==-1&&Ft!==jt?Ht=!0:vt[ft][Pt]!==Ft&&(Xt=!1)}Xt&&(an&&(ut[mt[0]._name].type="linear"),Ht&&(ut[vt[0]._name].type="linear"),Ge(ut,Pt,mt,vt,ze._fullLayout._dfltTitle))}}for(We=0;We<ze._fullLayout.annotations.length;We++){var Pn=ze._fullLayout.annotations[We];Fe.indexOf(Pn.xref)!==-1&&rt.indexOf(Pn.yref)!==-1&&b.swapAttrs(ut.annotations[We],["?"])}}function Ge(ze,Fe,rt,We,ft){var mt,vt=b.nestedProperty,ut=vt(ze[rt[0]._name],Fe).get(),Mt=vt(ze[We[0]._name],Fe).get();for(Fe==="title"&&(ut&&ut.text===ft.x&&(ut.text=ft.y),Mt&&Mt.text===ft.y&&(Mt.text=ft.x)),mt=0;mt<rt.length;mt++)vt(ze,rt[mt]._name+"."+Fe).set(Mt);for(mt=0;mt<We.length;mt++)vt(ze,We[mt]._name+"."+Fe).set(ut)}function Xe(ze){return ze._id==="angularaxis"}function Ne(ze,Fe){for(var rt=Fe._rangebreaks.length,We=0;We<rt;We++){var ft=Fe._rangebreaks[We];if(ze>=ft.min&&ze<ft.max)return ft.max}return ze}function Ye(ze){return(ze.ticklabelposition||"").indexOf("inside")!==-1}function ot(ze,Fe){Ye(ze._anchorAxis||{})&&ze._hideCounterAxisInsideTickLabels&&ze._hideCounterAxisInsideTickLabels(Fe)}function nt(ze,Fe,rt,We){var ft,mt=ze.anchor==="free"||ze.overlaying!==void 0&&ze.overlaying!==!1?ze.overlaying:ze._id;ft=We?ze.side==="right"?Fe:-Fe:Fe,mt in rt||(rt[mt]={}),ze.side in rt[mt]||(rt[mt][ze.side]=0),rt[mt][ze.side]+=ft}J.getTickFormat=function(ze){var Fe,rt,We,ft,mt,vt,ut,Mt;function bt(Dt){return typeof Dt!="string"?Dt:Number(Dt.replace("M",""))*y}function St(Dt,Ft){var Xt=["L","D"];if(typeof Dt==typeof Ft){if(typeof Dt=="number")return Dt-Ft;var an=Xt.indexOf(Dt.charAt(0)),Ht=Xt.indexOf(Ft.charAt(0));return an===Ht?Number(Dt.replace(/(L|D)/g,""))-Number(Ft.replace(/(L|D)/g,"")):an-Ht}return typeof Dt=="number"?1:-1}function Pt(Dt,Ft){var Xt=Ft[0]===null,an=Ft[1]===null,Ht=St(Dt,Ft[0])>=0,Zt=St(Dt,Ft[1])<=0;return(Xt||Ht)&&(an||Zt)}if(ze.tickformatstops&&ze.tickformatstops.length>0)switch(ze.type){case"date":case"linear":for(Fe=0;Fe<ze.tickformatstops.length;Fe++)if((We=ze.tickformatstops[Fe]).enabled&&(ft=ze.dtick,mt=We.dtickrange,vt=void 0,ut=void 0,Mt=void 0,vt=bt||function(Dt){return Dt},ut=mt[0],Mt=mt[1],(!ut&&typeof ut!="number"||vt(ut)<=vt(ft))&&(!Mt&&typeof Mt!="number"||vt(Mt)>=vt(ft)))){rt=We;break}break;case"log":for(Fe=0;Fe<ze.tickformatstops.length;Fe++)if((We=ze.tickformatstops[Fe]).enabled&&Pt(ze.dtick,We.dtickrange)){rt=We;break}}return rt?rt.value:ze.tickformat},J.getSubplots=function(ze,Fe){var rt=ze._fullLayout._subplots,We=rt.cartesian.concat(rt.gl2d||[]),ft=Fe?J.findSubplotsWithAxis(We,Fe):We;return ft.sort(function(mt,vt){var ut=mt.substr(1).split("y"),Mt=vt.substr(1).split("y");return ut[0]===Mt[0]?+ut[1]-+Mt[1]:+ut[0]-+Mt[0]}),ft},J.findSubplotsWithAxis=function(ze,Fe){for(var rt=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),We=[],ft=0;ft<ze.length;ft++){var mt=ze[ft];rt.test(mt)&&We.push(mt)}return We},J.makeClipPaths=function(ze){var Fe=ze._fullLayout;if(!Fe._hasOnlyLargeSploms){var rt,We,ft={_offset:0,_length:Fe.width,_id:""},mt={_offset:0,_length:Fe.height,_id:""},vt=J.list(ze,"x",!0),ut=J.list(ze,"y",!0),Mt=[];for(rt=0;rt<vt.length;rt++)for(Mt.push({x:vt[rt],y:mt}),We=0;We<ut.length;We++)rt===0&&Mt.push({x:ft,y:ut[We]}),Mt.push({x:vt[rt],y:ut[We]});var bt=Fe._clips.selectAll(".axesclip").data(Mt,function(St){return St.x._id+St.y._id});bt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(St){return"clip"+Fe._uid+St.x._id+St.y._id}).append("rect"),bt.exit().remove(),bt.each(function(St){T.select(this).select("rect").attr({x:St.x._offset||0,y:St.y._offset||0,width:St.x._length||1,height:St.y._length||1})})}},J.draw=function(ze,Fe,rt){var We=ze._fullLayout;Fe==="redraw"&&We._paper.selectAll("g.subplot").each(function(ut){var Mt=ut[0],bt=We._plots[Mt];if(bt){var St=bt.xaxis,Pt=bt.yaxis;bt.xaxislayer.selectAll("."+St._id+"tick").remove(),bt.yaxislayer.selectAll("."+Pt._id+"tick").remove(),bt.xaxislayer.selectAll("."+St._id+"tick2").remove(),bt.yaxislayer.selectAll("."+Pt._id+"tick2").remove(),bt.xaxislayer.selectAll("."+St._id+"divider").remove(),bt.yaxislayer.selectAll("."+Pt._id+"divider").remove(),bt.minorGridlayer&&bt.minorGridlayer.selectAll("path").remove(),bt.gridlayer&&bt.gridlayer.selectAll("path").remove(),bt.zerolinelayer&&bt.zerolinelayer.selectAll("path").remove(),We._infolayer.select(".g-"+St._id+"title").remove(),We._infolayer.select(".g-"+Pt._id+"title").remove()}});var ft=Fe&&Fe!=="redraw"?Fe:J.listIds(ze),mt=J.list(ze).filter(function(ut){return ut.autoshift}).map(function(ut){return ut.overlaying});ft.map(function(ut){var Mt=J.getFromId(ze,ut);if(Mt.tickmode==="sync"&&Mt.overlaying){var bt=ft.findIndex(function(St){return St===Mt.overlaying});bt>=0&&ft.unshift(ft.splice(bt,1).shift())}});var vt={false:{left:0,right:0}};return b.syncOrAsync(ft.map(function(ut){return function(){if(ut){var Mt=J.getFromId(ze,ut);rt||(rt={}),rt.axShifts=vt,rt.overlayingShiftedAx=mt;var bt=J.drawOne(ze,Mt,rt);return Mt._shiftPusher&&nt(Mt,Mt._fullDepth||0,vt,!0),Mt._r=Mt.range.slice(),Mt._rl=b.simpleMap(Mt._r,Mt.r2l),bt}}}))},J.drawOne=function(ze,Fe,rt){var We,ft,mt,vt=(rt=rt||{}).axShifts||{},ut=rt.overlayingShiftedAx||[];Fe.setScale();var Mt=ze._fullLayout,bt=Fe._id,St=bt.charAt(0),Pt=J.counterLetter(bt),Dt=Mt._plots[Fe._mainSubplot];if(Dt){if(Fe._shiftPusher=Fe.autoshift||ut.indexOf(Fe._id)!==-1||ut.indexOf(Fe.overlaying)!==-1,Fe._shiftPusher&Fe.anchor==="free"){var Ft=Fe.linewidth/2||0;Fe.ticks==="inside"&&(Ft+=Fe.ticklen),nt(Fe,Ft,vt,!0),nt(Fe,Fe.shift||0,vt,!1)}rt.skipTitle===!0&&Fe._shift!==void 0||(Fe._shift=function(sn,Yt){return sn.autoshift?Yt[sn.overlaying][sn.side]:sn.shift||0}(Fe,vt));var Xt=Dt[St+"axislayer"],an=Fe._mainLinePosition,Ht=an+=Fe._shift,Zt=Fe._mainMirrorPosition,jt=Fe._vals=J.calcTicks(Fe),Pn=[Fe.mirror,Ht,Zt].join("_");for(We=0;We<jt.length;We++)jt[We].axInfo=Pn;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var Tn={};if(Fe.visible){var mn,Qt,un=J.makeTransTickFn(Fe),nn=J.makeTransTickLabelFn(Fe),hn=Fe.ticks==="inside",bn=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var wn=function(sn,Yt){var Wt,tn=[],ln=function(An,In){var zn=An.xbnd[In];zn!==null&&tn.push(b.extendFlat({},An,{x:zn}))};if(Yt.length){for(Wt=0;Wt<Yt.length;Wt++)ln(Yt[Wt],0);ln(Yt[Wt-1],1)}return tn}(0,jt);Qt=J.clipEnds(Fe,wn),mn=hn?Qt:wn}else Qt=J.clipEnds(Fe,jt),mn=hn&&Fe.ticklabelmode!=="period"?Qt:jt;var Cn,Ln=Fe._gridVals=Qt,Mn=function(sn,Yt){var Wt,tn,ln=[],An=Yt.length&&Yt[Yt.length-1].x<Yt[0].x,In=function(Un,rr){var Xn=Un.xbnd[rr];Xn!==null&&ln.push(b.extendFlat({},Un,{x:Xn}))};if(sn.showdividers&&Yt.length){for(Wt=0;Wt<Yt.length;Wt++){var zn=Yt[Wt];zn.text2!==tn&&In(zn,An?1:0),tn=zn.text2}In(Yt[Wt-1],An?0:1)}return ln}(Fe,jt);if(!Mt._hasOnlyLargeSploms){var jn=Fe._subplotsWith,Rn={};for(We=0;We<jn.length;We++){ft=jn[We];var Qn=(mt=Mt._plots[ft])[Pt+"axis"],Yn=Qn._mainAxis._id;if(!Rn[Yn]){Rn[Yn]=1;var ar=St==="x"?"M0,"+Qn._offset+"v"+Qn._length:"M"+Qn._offset+",0h"+Qn._length;J.drawGrid(ze,Fe,{vals:Ln,counterAxis:Qn,layer:mt.gridlayer.select("."+bt),minorLayer:mt.minorGridlayer.select("."+bt),path:ar,transFn:un}),J.drawZeroLine(ze,Fe,{counterAxis:Qn,layer:mt.zerolinelayer,path:ar,transFn:un})}}}var Kn=J.getTickSigns(Fe),mr=J.getTickSigns(Fe,"minor");if(Fe.ticks||Fe.minor&&Fe.minor.ticks){var en,rn,En,gn,Dn=J.makeTickPath(Fe,Ht,Kn[2]),qn=J.makeTickPath(Fe,Ht,mr[2],{minor:!0});if(Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(en=J.makeTickPath(Fe,Zt,Kn[3]),rn=J.makeTickPath(Fe,Zt,mr[3],{minor:!0}),En=Dn+en,gn=qn+rn):(en="",rn="",En=Dn,gn=qn),Fe.showdividers&&bn&&Fe.tickson==="boundaries"){var Vn={};for(We=0;We<Mn.length;We++)Vn[Mn[We].x]=1;Cn=function(sn){return Vn[sn.x]?en:En}}else Cn=function(sn){return sn.minor?gn:En}}if(J.drawTicks(ze,Fe,{vals:mn,layer:Xt,path:Cn,transFn:un}),Fe.mirror==="allticks"){var Jn=Object.keys(Fe._linepositions||{});for(We=0;We<Jn.length;We++){ft=Jn[We],mt=Mt._plots[ft];var xr=Fe._linepositions[ft]||[],Jt=xr[0],vn=xr[1],Lt=xr[2],Nt=J.makeTickPath(Fe,Jt,Lt?Kn[0]:mr[0],{minor:Lt})+J.makeTickPath(Fe,vn,Lt?Kn[1]:mr[1],{minor:Lt});J.drawTicks(ze,Fe,{vals:mn,layer:mt[St+"axislayer"],path:Nt,transFn:un})}}var $t=[];if($t.push(function(){return J.drawLabels(ze,Fe,{vals:jt,layer:Xt,plotinfo:mt,transFn:nn,labelFns:J.makeLabelFns(Fe,Ht)})}),Fe.type==="multicategory"){var fn={x:2,y:10}[St];$t.push(function(){var sn={x:"height",y:"width"}[St],Yt=xn()[sn]+fn+(Fe._tickAngles[bt+"tick"]?Fe.tickfont.size*ee:0);return J.drawLabels(ze,Fe,{vals:it(Fe,jt),layer:Xt,cls:bt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:un,labelFns:J.makeLabelFns(Fe,Ht+Yt*Kn[4])})}),$t.push(function(){return Fe._depth=Kn[4]*(xn("tick2")[Fe.side]-Ht),function(sn,Yt,Wt){var tn=Yt._id+"divider",ln=Wt.vals,An=Wt.layer.selectAll("path."+tn).data(ln,gt);An.exit().remove(),An.enter().insert("path",":first-child").classed(tn,1).classed("crisp",1).call(i.stroke,Yt.dividercolor).style("stroke-width",r.crispRound(sn,Yt.dividerwidth,1)+"px"),An.attr("transform",Wt.transFn).attr("d",Wt.path)}(ze,Fe,{vals:Mn,layer:Xt,path:J.makeTickPath(Fe,Ht,Kn[4],{len:Fe._depth}),transFn:un})})}else Fe.title.hasOwnProperty("standoff")&&$t.push(function(){Fe._depth=Kn[4]*(xn()[Fe.side]-Ht)});var dn=w.getComponentMethod("rangeslider","isVisible")(Fe);return rt.skipTitle||dn&&Fe.side==="bottom"||$t.push(function(){return function(sn,Yt){var Wt,tn=sn._fullLayout,ln=Yt._id,An=ln.charAt(0),In=Yt.title.font.size,zn=(Yt.title.text.match(s.BR_TAG_ALL)||[]).length;if(Yt.title.hasOwnProperty("standoff"))Yt.side==="bottom"||Yt.side==="right"?Wt=Yt._depth+Yt.title.standoff+In*te:Yt.side!=="top"&&Yt.side!=="left"||(Wt=Yt._depth+Yt.title.standoff+In*(q+zn*ee));else{var Un=Ye(Yt);if(Yt.type==="multicategory")Wt=Yt._depth;else{var rr=1.5*In;Un&&(rr=.5*In,Yt.ticks==="outside"&&(rr+=Yt.ticklen)),Wt=10+rr+(Yt.linewidth?Yt.linewidth-1:0)}Un||(Wt+=An==="x"?Yt.side==="top"?In*(Yt.showticklabels?1:0):In*(Yt.showticklabels?1.5:.5):Yt.side==="right"?In*(Yt.showticklabels?1:.5):In*(Yt.showticklabels?.5:0))}var Xn,er,or,tr,gr=J.getPxPosition(sn,Yt);if(An==="x"?(er=Yt._offset+Yt._length/2,or=Yt.side==="top"?gr-Wt:gr+Wt):(or=Yt._offset+Yt._length/2,er=Yt.side==="right"?gr+Wt:gr-Wt,Xn={rotate:"-90",offset:0}),Yt.type!=="multicategory"){var Mr=Yt._selections[Yt._id+"tick"];if(tr={selection:Mr,side:Yt.side},Mr&&Mr.node()&&Mr.node().parentNode){var br=r.getTranslate(Mr.node().parentNode);tr.offsetLeft=br.x,tr.offsetTop=br.y}Yt.title.hasOwnProperty("standoff")&&(tr.pad=0)}return Yt._titleStandoff=Wt,t.draw(sn,ln+"title",{propContainer:Yt,propName:Yt._name+".title.text",placeholder:tn._dfltTitle[An],avoid:tr,transform:Xn,attributes:{x:er,y:or,"text-anchor":"middle"}})}(ze,Fe)}),$t.push(function(){var sn,Yt,Wt,tn,ln=Fe.side.charAt(0),An=Q[Fe.side].charAt(0),In=J.getPxPosition(ze,Fe),zn=bn?Fe.ticklen:0;(Fe.automargin||dn||Fe._shiftPusher)&&(Fe.type==="multicategory"?sn=xn("tick2"):(sn=xn(),St==="x"&&ln==="b"&&(Fe._depth=Math.max(sn.width>0?sn.bottom-In:0,zn))));var Un=0,rr=0;if(Fe._shiftPusher&&(Un=Math.max(zn,sn.height>0?ln==="l"?In-sn.left:sn.right-In:0),Fe.title.text!==Mt._dfltTitle[St]&&(rr=(Fe._titleStandoff||0)+(Fe._titleScoot||0),ln==="l"&&(rr+=yt(Fe))),Fe._fullDepth=Math.max(Un,rr)),Fe.automargin){Yt={x:0,y:0,r:0,l:0,t:0,b:0};var Xn=[0,1],er=typeof Fe._shift=="number"?Fe._shift:0;if(St==="x"){if(ln==="b"?Yt[ln]=Fe._depth:(Yt[ln]=Fe._depth=Math.max(sn.width>0?In-sn.top:0,zn),Xn.reverse()),sn.width>0){var or=sn.right-(Fe._offset+Fe._length);or>0&&(Yt.xr=1,Yt.r=or);var tr=Fe._offset-sn.left;tr>0&&(Yt.xl=0,Yt.l=tr)}}else if(ln==="l"?(Fe._depth=Math.max(sn.height>0?In-sn.left:0,zn),Yt[ln]=Fe._depth-er):(Fe._depth=Math.max(sn.height>0?sn.right-In:0,zn),Yt[ln]=Fe._depth+er,Xn.reverse()),sn.height>0){var gr=sn.bottom-(Fe._offset+Fe._length);gr>0&&(Yt.yb=0,Yt.b=gr);var Mr=Fe._offset-sn.top;Mr>0&&(Yt.yt=1,Yt.t=Mr)}Yt[Pt]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[Xn[0]],Fe.title.text!==Mt._dfltTitle[St]&&(Yt[ln]+=yt(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&((Wt={x:0,y:0,r:0,l:0,t:0,b:0})[An]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(Wt[An]+=zn),Fe.mirror===!0||Fe.mirror==="ticks"?Wt[Pt]=Fe._anchorAxis.domain[Xn[1]]:Fe.mirror!=="all"&&Fe.mirror!=="allticks"||(Wt[Pt]=[Fe._counterDomainMin,Fe._counterDomainMax][Xn[1]]))}dn&&(tn=w.getComponentMethod("rangeslider","autoMarginOpts")(ze,Fe)),typeof Fe.automargin=="string"&&(Ze(Yt,Fe.automargin),Ze(Wt,Fe.automargin)),a.autoMargin(ze,$e(Fe),Yt),a.autoMargin(ze,At(Fe),Wt),a.autoMargin(ze,Ot(Fe),tn)}),b.syncOrAsync($t)}}function xn(sn){var Yt=bt+(sn||"tick");return Tn[Yt]||(Tn[Yt]=function(Wt,tn,ln){var An,In,zn,Un;if(Wt._selections[tn].size())An=1/0,In=-1/0,zn=1/0,Un=-1/0,Wt._selections[tn].each(function(){var Xn=et(this),er=r.bBox(Xn.node().parentNode);An=Math.min(An,er.top),In=Math.max(In,er.bottom),zn=Math.min(zn,er.left),Un=Math.max(Un,er.right)});else{var rr=J.makeLabelFns(Wt,ln);An=In=rr.yFn({dx:0,dy:0,fontSize:0}),zn=Un=rr.xFn({dx:0,dy:0,fontSize:0})}return{top:An,bottom:In,left:zn,right:Un,height:In-An,width:Un-zn}}(Fe,Yt,Ht)),Tn[Yt]}},J.getTickSigns=function(ze,Fe){var rt=ze._id.charAt(0),We={x:"top",y:"right"}[rt],ft=ze.side===We?1:-1,mt=[-1,1,ft,-ft];return(Fe?(ze.minor||{}).ticks:ze.ticks)!=="inside"==(rt==="x")&&(mt=mt.map(function(vt){return-vt})),ze.side&&mt.push({l:-1,t:-1,r:1,b:1}[ze.side.charAt(0)]),mt},J.makeTransTickFn=function(ze){return ze._id.charAt(0)==="x"?function(Fe){return f(ze._offset+ze.l2p(Fe.x),0)}:function(Fe){return f(0,ze._offset+ze.l2p(Fe.x))}},J.makeTransTickLabelFn=function(ze){var Fe=function(ft){var mt=ft.ticklabelposition||"",vt=function(Zt){return mt.indexOf(Zt)!==-1},ut=vt("top"),Mt=vt("left"),bt=vt("right"),St=vt("bottom"),Pt=vt("inside"),Dt=St||Mt||ut||bt;if(!Dt&&!Pt)return[0,0];var Ft=ft.side,Xt=Dt?(ft.tickwidth||0)/2:0,an=3,Ht=ft.tickfont?ft.tickfont.size:12;return(St||ut)&&(Xt+=Ht*te,an+=(ft.linewidth||0)/2),(Mt||bt)&&(Xt+=(ft.linewidth||0)/2,an+=3),Pt&&Ft==="top"&&(an-=Ht*(1-te)),(Mt||ut)&&(Xt=-Xt),Ft!=="bottom"&&Ft!=="right"||(an=-an),[Dt?Xt:0,Pt?an:0]}(ze),rt=Fe[0],We=Fe[1];return ze._id.charAt(0)==="x"?function(ft){return f(rt+ze._offset+ze.l2p(at(ft)),We)}:function(ft){return f(We,rt+ze._offset+ze.l2p(at(ft)))}},J.makeTickPath=function(ze,Fe,rt,We){We||(We={});var ft=We.minor;if(ft&&!ze.minor)return"";var mt=We.len!==void 0?We.len:ft?ze.minor.ticklen:ze.ticklen,vt=ze._id.charAt(0),ut=(ze.linewidth||1)/2;return vt==="x"?"M0,"+(Fe+ut*rt)+"v"+mt*rt:"M"+(Fe+ut*rt)+",0h"+mt*rt},J.makeLabelFns=function(ze,Fe,rt){var We=ze.ticklabelposition||"",ft=function(wn){return We.indexOf(wn)!==-1},mt=ft("top"),vt=ft("left"),ut=ft("right"),Mt=ft("bottom")||vt||mt||ut,bt=ft("inside"),St=We==="inside"&&ze.ticks==="inside"||!bt&&ze.ticks==="outside"&&ze.tickson!=="boundaries",Pt=0,Dt=0,Ft=St?ze.ticklen:0;if(bt?Ft*=-1:Mt&&(Ft=0),St&&(Pt+=Ft,rt)){var Xt=b.deg2rad(rt);Pt=Ft*Math.cos(Xt)+1,Dt=Ft*Math.sin(Xt)}ze.showticklabels&&(St||ze.showline)&&(Pt+=.2*ze.tickfont.size);var an,Ht,Zt,jt,Pn,Tn={labelStandoff:Pt+=(ze.linewidth||1)/2*(bt?-1:1),labelShift:Dt},mn=0,Qt=ze.side,un=ze._id.charAt(0),nn=ze.tickangle;if(un==="x")jt=(Pn=!bt&&Qt==="bottom"||bt&&Qt==="top")?1:-1,bt&&(jt*=-1),an=Dt*jt,Ht=Fe+Pt*jt,Zt=Pn?1:-.2,Math.abs(nn)===90&&(bt?Zt+=q:Zt=nn===-90&&Qt==="bottom"?te:nn===90&&Qt==="top"?q:.5,mn=q/2*(nn/90)),Tn.xFn=function(wn){return wn.dx+an+mn*wn.fontSize},Tn.yFn=function(wn){return wn.dy+Ht+wn.fontSize*Zt},Tn.anchorFn=function(wn,Cn){if(Mt){if(vt)return"end";if(ut)return"start"}return k(Cn)&&Cn!==0&&Cn!==180?Cn*jt<0!==bt?"end":"start":"middle"},Tn.heightFn=function(wn,Cn,Ln){return Cn<-60||Cn>60?-.5*Ln:ze.side==="top"!==bt?-Ln:0};else if(un==="y"){if(jt=(Pn=!bt&&Qt==="left"||bt&&Qt==="right")?1:-1,bt&&(jt*=-1),an=Pt,Ht=Dt*jt,Zt=0,bt||Math.abs(nn)!==90||(Zt=nn===-90&&Qt==="left"||nn===90&&Qt==="right"?te:.5),bt){var hn=k(nn)?+nn:0;if(hn!==0){var bn=b.deg2rad(hn);mn=Math.abs(Math.sin(bn))*te*jt,Zt=0}}Tn.xFn=function(wn){return wn.dx+Fe-(an+wn.fontSize*Zt)*jt+mn*wn.fontSize},Tn.yFn=function(wn){return wn.dy+Ht+wn.fontSize*q},Tn.anchorFn=function(wn,Cn){return k(Cn)&&Math.abs(Cn)===90?"middle":Pn?"end":"start"},Tn.heightFn=function(wn,Cn,Ln){return ze.side==="right"&&(Cn*=-1),Cn<-30?-Ln:Cn<30?-.5*Ln:0}}return Tn},J.drawTicks=function(ze,Fe,rt){rt=rt||{};var We=Fe._id+"tick",ft=[].concat(Fe.minor&&Fe.minor.ticks?rt.vals.filter(function(vt){return vt.minor&&!vt.noTick}):[]).concat(Fe.ticks?rt.vals.filter(function(vt){return!vt.minor&&!vt.noTick}):[]),mt=rt.layer.selectAll("path."+We).data(ft,gt);mt.exit().remove(),mt.enter().append("path").classed(We,1).classed("ticks",1).classed("crisp",rt.crisp!==!1).each(function(vt){return i.stroke(T.select(this),vt.minor?Fe.minor.tickcolor:Fe.tickcolor)}).style("stroke-width",function(vt){return r.crispRound(ze,vt.minor?Fe.minor.tickwidth:Fe.tickwidth,1)+"px"}).attr("d",rt.path).style("display",null),ot(Fe,[j]),mt.attr("transform",rt.transFn)},J.drawGrid=function(ze,Fe,rt){if(rt=rt||{},Fe.tickmode!=="sync"){var We=Fe._id+"grid",ft=Fe.minor&&Fe.minor.showgrid,mt=ft?rt.vals.filter(function(Zt){return Zt.minor}):[],vt=Fe.showgrid?rt.vals.filter(function(Zt){return!Zt.minor}):[],ut=rt.counterAxis;if(ut&&J.shouldShowZeroLine(ze,Fe,ut))for(var Mt=Fe.tickmode==="array",bt=0;bt<vt.length;bt++){var St=vt[bt].x;if(Mt?!St:Math.abs(St)<Fe.dtick/100){if(vt=vt.slice(0,bt).concat(vt.slice(bt+1)),!Mt)break;bt--}}Fe._gw=r.crispRound(ze,Fe.gridwidth,1);for(var Pt=ft?r.crispRound(ze,Fe.minor.gridwidth,1):0,Dt=rt.layer,Ft=rt.minorLayer,Xt=1;Xt>=0;Xt--){var an=Xt?Dt:Ft;if(an){var Ht=an.selectAll("path."+We).data(Xt?vt:mt,gt);Ht.exit().remove(),Ht.enter().append("path").classed(We,1).classed("crisp",rt.crisp!==!1),Ht.attr("transform",rt.transFn).attr("d",rt.path).each(function(Zt){return i.stroke(T.select(this),Zt.minor?Fe.minor.gridcolor:Fe.gridcolor||"#ddd")}).style("stroke-dasharray",function(Zt){return r.dashStyle(Zt.minor?Fe.minor.griddash:Fe.griddash,Zt.minor?Fe.minor.gridwidth:Fe.gridwidth)}).style("stroke-width",function(Zt){return(Zt.minor?Pt:Fe._gw)+"px"}).style("display",null),typeof rt.path=="function"&&Ht.attr("d",rt.path)}}ot(Fe,[V,O])}},J.drawZeroLine=function(ze,Fe,rt){rt=rt||rt;var We=Fe._id+"zl",ft=J.shouldShowZeroLine(ze,Fe,rt.counterAxis),mt=rt.layer.selectAll("path."+We).data(ft?[{x:0,id:Fe._id}]:[]);mt.exit().remove(),mt.enter().append("path").classed(We,1).classed("zl",1).classed("crisp",rt.crisp!==!1).each(function(){rt.layer.selectAll("path").sort(function(vt,ut){return ie(vt.id,ut.id)})}),mt.attr("transform",rt.transFn).attr("d",rt.path).call(i.stroke,Fe.zerolinecolor||i.defaultLine).style("stroke-width",r.crispRound(ze,Fe.zerolinewidth,Fe._gw||1)+"px").style("display",null),ot(Fe,[z])},J.drawLabels=function(ze,Fe,rt){rt=rt||{};var We=ze._fullLayout,ft=Fe._id,mt=rt.cls||ft+"tick",vt=rt.vals.filter(function(Rn){return Rn.text}),ut=rt.labelFns,Mt=rt.secondary?0:Fe.tickangle,bt=(Fe._prevTickAngles||{})[mt],St=rt.layer.selectAll("g."+mt).data(Fe.showticklabels?vt:[],gt),Pt=[];function Dt(Rn,Qn){Rn.each(function(Yn){var ar=T.select(this),Kn=ar.select(".text-math-group"),mr=ut.anchorFn(Yn,Qn),en=rt.transFn.call(ar.node(),Yn)+(k(Qn)&&+Qn!=0?" rotate("+Qn+","+ut.xFn(Yn)+","+(ut.yFn(Yn)-Yn.fontSize/2)+")":""),rn=s.lineCount(ar),En=ee*Yn.fontSize,gn=ut.heightFn(Yn,k(Qn)?+Qn:0,(rn-1)*En);if(gn&&(en+=f(0,gn)),Kn.empty()){var Dn=ar.select("text");Dn.attr({transform:en,"text-anchor":mr}),Dn.style("opacity",1),Fe._adjustTickLabelsOverflow&&Fe._adjustTickLabelsOverflow()}else{var qn=r.bBox(Kn.node()).width*{end:-.5,start:.5}[mr];Kn.attr("transform",en+f(qn,0))}})}St.enter().append("g").classed(mt,1).append("text").attr("text-anchor","middle").each(function(Rn){var Qn=T.select(this),Yn=ze._promises.length;Qn.call(s.positionText,ut.xFn(Rn),ut.yFn(Rn)).call(r.font,{family:Rn.font,size:Rn.fontSize,color:Rn.fontColor,weight:Rn.fontWeight,style:Rn.fontStyle,variant:Rn.fontVariant,textcase:Rn.fontTextcase,lineposition:Rn.fontLineposition,shadow:Rn.fontShadow}).text(Rn.text).call(s.convertToTspans,ze),ze._promises[Yn]?Pt.push(ze._promises.pop().then(function(){Dt(Qn,Mt)})):Dt(Qn,Mt)}),ot(Fe,[Y]),St.exit().remove(),rt.repositionOnUpdate&&St.each(function(Rn){T.select(this).select("text").call(s.positionText,ut.xFn(Rn),ut.yFn(Rn))}),Fe._adjustTickLabelsOverflow=function(){var Rn=Fe.ticklabeloverflow;if(Rn&&Rn!=="allow"){var Qn=Rn.indexOf("hide")!==-1,Yn=Fe._id.charAt(0)==="x",ar=0,Kn=Yn?ze._fullLayout.width:ze._fullLayout.height;if(Rn.indexOf("domain")!==-1){var mr=b.simpleMap(Fe.range,Fe.r2l);ar=Fe.l2p(mr[0])+Fe._offset,Kn=Fe.l2p(mr[1])+Fe._offset}var en=Math.min(ar,Kn),rn=Math.max(ar,Kn),En=Fe.side,gn=1/0,Dn=-1/0;for(var qn in St.each(function(xr){var Jt=T.select(this);if(Jt.select(".text-math-group").empty()){var vn=r.bBox(Jt.node()),Lt=0;Yn?(vn.right>rn||vn.left<en)&&(Lt=1):(vn.bottom>rn||vn.top+(Fe.tickangle?0:xr.fontSize/4)<en)&&(Lt=1);var Nt=Jt.select("text");Lt?Qn&&Nt.style("opacity",0):(Nt.style("opacity",1),gn=En==="bottom"||En==="right"?Math.min(gn,Yn?vn.top:vn.left):-1/0,Dn=En==="top"||En==="left"?Math.max(Dn,Yn?vn.bottom:vn.right):1/0)}}),We._plots){var Vn=We._plots[qn];if(Fe._id===Vn.xaxis._id||Fe._id===Vn.yaxis._id){var Jn=Yn?Vn.yaxis:Vn.xaxis;Jn&&(Jn["_visibleLabelMin_"+Fe._id]=gn,Jn["_visibleLabelMax_"+Fe._id]=Dn)}}}},Fe._hideCounterAxisInsideTickLabels=function(Rn){var Qn=Fe._id.charAt(0)==="x",Yn=[];for(var ar in We._plots){var Kn=We._plots[ar];Fe._id!==Kn.xaxis._id&&Fe._id!==Kn.yaxis._id||Yn.push(Qn?Kn.yaxis:Kn.xaxis)}Yn.forEach(function(mr,en){mr&&Ye(mr)&&(Rn||[z,O,V,j,Y]).forEach(function(rn){var En=rn.K==="tick"&&rn.L==="text"&&Fe.ticklabelmode==="period",gn=We._plots[Fe._mainSubplot];(rn.K===z.K?gn.zerolinelayer.selectAll("."+Fe._id+"zl"):rn.K===O.K?gn.minorGridlayer.selectAll("."+Fe._id):rn.K===V.K?gn.gridlayer.selectAll("."+Fe._id):gn[Fe._id.charAt(0)+"axislayer"]).each(function(){var Dn=T.select(this);rn.L&&(Dn=Dn.selectAll(rn.L)),Dn.each(function(qn){var Vn=Fe.l2p(En?at(qn):qn.x)+Fe._offset,Jn=T.select(this);Vn<Fe["_visibleLabelMax_"+mr._id]&&Vn>Fe["_visibleLabelMin_"+mr._id]?Jn.style("display","none"):rn.K!=="tick"||en||Jn.style("display",null)})})})})},Dt(St,bt+1?bt:Mt);var Ft=null;Fe._selections&&(Fe._selections[mt]=St);var Xt=[function(){return Pt.length&&Promise.all(Pt)}];Fe.automargin&&We._redrawFromAutoMarginCount&&bt===90?(Ft=bt,Xt.push(function(){Dt(St,bt)})):Xt.push(function(){if(Dt(St,Mt),vt.length&&Fe.autotickangles&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){Ft=Fe.autotickangles[0];var Rn,Qn=0,Yn=[],ar=1;St.each(function(xn){Qn=Math.max(Qn,xn.fontSize);var sn=Fe.l2p(xn.x),Yt=et(this),Wt=r.bBox(Yt.node());ar=Math.max(ar,s.lineCount(Yt)),Yn.push({top:0,bottom:10,height:10,left:sn-Wt.width/2,right:sn+Wt.width/2+2,width:Wt.width+2})});var Kn=(Fe.tickson==="boundaries"||Fe.showdividers)&&!rt.secondary,mr=vt.length,en=Math.abs((vt[mr-1].x-vt[0].x)*Fe._m)/(mr-1),rn=Kn?en/2:en,En=Kn?Fe.ticklen:1.25*Qn*ar,gn=rn/Math.sqrt(Math.pow(rn,2)+Math.pow(En,2)),Dn=Fe.autotickangles.map(function(xn){return xn*Math.PI/180}),qn=Dn.find(function(xn){return Math.abs(Math.cos(xn))<=gn});qn===void 0&&(qn=Dn.reduce(function(xn,sn){return Math.abs(Math.cos(xn))<Math.abs(Math.cos(sn))?xn:sn},Dn[0]));var Vn=qn*(180/Math.PI);if(Kn){var Jn=2;for(Fe.ticks&&(Jn+=Fe.tickwidth/2),Rn=0;Rn<Yn.length;Rn++){var xr=vt[Rn].xbnd,Jt=Yn[Rn];if(xr[0]!==null&&Jt.left-Fe.l2p(xr[0])<Jn||xr[1]!==null&&Fe.l2p(xr[1])-Jt.right<Jn){Ft=Vn;break}}}else{var vn=Fe.ticklabelposition||"",Lt=function(xn){return vn.indexOf(xn)!==-1},Nt=Lt("top"),$t=Lt("left"),fn=Lt("right"),dn=Lt("bottom")||$t||Nt||fn?(Fe.tickwidth||0)+6:0;for(Rn=0;Rn<Yn.length-1;Rn++)if(b.bBoxIntersect(Yn[Rn],Yn[Rn+1],dn)){Ft=Vn;break}}Ft&&Dt(St,Ft)}}),Fe._tickAngles&&Xt.push(function(){Fe._tickAngles[mt]=Ft===null?k(Mt)?Mt:0:Ft});var an=function(){var Rn=0,Qn=0;return St.each(function(Yn,ar){var Kn,mr=et(this);mr.select(".text-math-group").empty()&&(Fe._vals[ar]&&(Kn=Fe._vals[ar].bb||r.bBox(mr.node()),Fe._vals[ar].bb=Kn),Rn=Math.max(Rn,Kn.width),Qn=Math.max(Qn,Kn.height))}),{labelsMaxW:Rn,labelsMaxH:Qn}},Ht=Fe._anchorAxis;if(Ht&&(Ht.autorange||Ht.insiderange)&&Ye(Fe)&&!se(We,Fe._id)&&(We._insideTickLabelsUpdaterange||(We._insideTickLabelsUpdaterange={}),Ht.autorange&&(We._insideTickLabelsUpdaterange[Ht._name+".autorange"]=Ht.autorange,Xt.push(an)),Ht.insiderange)){var Zt=an(),jt=Fe._id.charAt(0)==="y"?Zt.labelsMaxW:Zt.labelsMaxH;jt+=6,Fe.ticklabelposition==="inside"&&(jt+=Fe.ticklen||0);var Pn=Fe.side==="right"||Fe.side==="top"?1:-1,Tn=Pn===1?1:0,mn=Pn===1?0:1,Qt=[];Qt[mn]=Ht.range[mn];var un=Ht.range,nn=Ht.r2p(un[Tn]),hn=Ht.r2p(un[mn]),bn=We._insideTickLabelsUpdaterange[Ht._name+".range"];if(bn){var wn=Ht.r2p(bn[Tn]),Cn=Ht.r2p(bn[mn]),Ln=Pn*(Fe._id.charAt(0)==="y"?1:-1);Ln*nn<Ln*wn&&(nn=wn,Qt[Tn]=un[Tn]=bn[Tn]),Ln*hn>Ln*Cn&&(hn=Cn,Qt[mn]=un[mn]=bn[mn])}var Mn=Math.abs(hn-nn);Mn-jt>0?jt*=1+jt/(Mn-=jt):jt=0,Fe._id.charAt(0)!=="y"&&(jt=-jt),Qt[Tn]=Ht.p2r(Ht.r2p(un[Tn])+Pn*jt),Ht.autorange==="min"||Ht.autorange==="max reversed"?(Qt[0]=null,Ht._rangeInitial0=void 0,Ht._rangeInitial1=void 0):Ht.autorange!=="max"&&Ht.autorange!=="min reversed"||(Qt[1]=null,Ht._rangeInitial0=void 0,Ht._rangeInitial1=void 0),We._insideTickLabelsUpdaterange[Ht._name+".range"]=Qt}var jn=b.syncOrAsync(Xt);return jn&&jn.then&&ze._promises.push(jn),jn},J.getPxPosition=function(ze,Fe){var rt,We=ze._fullLayout._size,ft=Fe._id.charAt(0),mt=Fe.side;return Fe.anchor!=="free"?rt=Fe._anchorAxis:ft==="x"?rt={_offset:We.t+(1-(Fe.position||0))*We.h,_length:0}:ft==="y"&&(rt={_offset:We.l+(Fe.position||0)*We.w+Fe._shift,_length:0}),mt==="top"||mt==="left"?rt._offset:mt==="bottom"||mt==="right"?rt._offset+rt._length:void 0},J.shouldShowZeroLine=function(ze,Fe,rt){var We=b.simpleMap(Fe.range,Fe.r2l);return We[0]*We[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===D)&&(pt(Fe,0)||!function(ft,mt,vt,ut){var Mt=vt._mainAxis;if(Mt){var bt=ft._fullLayout,St=mt._id.charAt(0),Pt=J.counterLetter(mt._id),Dt=mt._offset+(Math.abs(ut[0])<Math.abs(ut[1])==(St==="x")?0:mt._length),Ft=bt._plots[vt._mainSubplot];if(!(Ft.mainplotinfo||Ft).overlays.length)return Zt(vt);for(var Xt=J.list(ft,Pt),an=0;an<Xt.length;an++){var Ht=Xt[an];if(Ht._mainAxis===Mt&&Zt(Ht))return!0}}function Zt(jt){if(!jt.showline||!jt.linewidth)return!1;var Pn=Math.max((jt.linewidth+mt.zerolinewidth)/2,1);function Tn(un){return typeof un=="number"&&Math.abs(un-Dt)<Pn}if(Tn(jt._mainLinePosition)||Tn(jt._mainMirrorPosition))return!0;var mn=jt._linepositions||{};for(var Qt in mn)if(Tn(mn[Qt][0])||Tn(mn[Qt][1]))return!0}}(ze,Fe,rt,We)||function(ft,mt){for(var vt=ft._fullData,ut=mt._mainSubplot,Mt=mt._id.charAt(0),bt=0;bt<vt.length;bt++){var St=vt[bt];if(St.visible===!0&&St.xaxis+St.yaxis===ut&&(w.traceIs(St,"bar-like")&&St.orientation==={x:"h",y:"v"}[Mt]||St.fill&&St.fill.charAt(St.fill.length-1)===Mt))return!0}return!1}(ze,Fe))},J.clipEnds=function(ze,Fe){return Fe.filter(function(rt){return pt(ze,rt.x)})},J.allowAutoMargin=function(ze){for(var Fe=J.list(ze,"",!0),rt=0;rt<Fe.length;rt++){var We=Fe[rt];We.automargin&&(a.allowAutoMargin(ze,$e(We)),We.mirror&&a.allowAutoMargin(ze,At(We))),w.getComponentMethod("rangeslider","isVisible")(We)&&a.allowAutoMargin(ze,Ot(We))}},J.swap=function(ze,Fe){for(var rt=function(ft,mt){var vt,ut,Mt=[];for(vt=0;vt<mt.length;vt++){var bt=[],St=ft._fullData[mt[vt]].xaxis,Pt=ft._fullData[mt[vt]].yaxis;if(St&&Pt){for(ut=0;ut<Mt.length;ut++)Mt[ut].x.indexOf(St)===-1&&Mt[ut].y.indexOf(Pt)===-1||bt.push(ut);if(bt.length){var Dt,Ft=Mt[bt[0]];if(bt.length>1)for(ut=1;ut<bt.length;ut++)Dt=Mt[bt[ut]],Rt(Ft.x,Dt.x),Rt(Ft.y,Dt.y);Rt(Ft.x,[St]),Rt(Ft.y,[Pt])}else Mt.push({x:[St],y:[Pt]})}}return Mt}(ze,Fe),We=0;We<rt.length;We++)Ct(ze,rt[We].x,rt[We].y)}},52976:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(39032).BADNUM,w=k.isArrayOrTypedArray,b=k.isDateTime,f=k.cleanNumber,s=Math.round;function t(r,n){return n?T(r):typeof r=="number"}function i(r){return Math.max(1,(r-1)/1e3)}F.exports=function(r,n,o){var l=r,c=o.noMultiCategory;if(w(l)&&!l.length)return"-";if(!c&&function(g){return w(g[0])&&w(g[1])}(l))return"multicategory";if(c&&Array.isArray(l[0])){for(var d=[],u=0;u<l.length;u++)if(w(l[u]))for(var x=0;x<l[u].length;x++)d.push(l[u][x]);l=d}if(function(g,m){for(var y=g.length,v=i(y),_=0,h=0,S={},A=0;A<y;A+=v){var E=g[s(A)],P=String(E);S[P]||(S[P]=1,b(E,m)&&_++,T(E)&&h++)}return _>2*h}(l,n))return"date";var p=o.autotypenumbers!=="strict";return function(g,m){for(var y=g.length,v=i(y),_=0,h=0,S={},A=0;A<y;A+=v){var E=g[s(A)],P=String(E);if(!S[P]){S[P]=1;var I=typeof E;I==="boolean"?h++:(m?f(E)!==a:I==="number")?_++:I==="string"&&h++}}return h>2*_}(l,p)?"category":function(g,m){for(var y=g.length,v=0;v<y;v++)if(t(g[v],m))return!0;return!1}(l,p)?"linear":"-"}},28336:function(F,C,e){"use strict";var T=e(38248),k=e(24040),a=e(3400),w=e(31780),b=e(51272),f=e(94724),s=e(26332),t=e(25404),i=e(95936),r=e(42568),n=e(22416),o=e(42136),l=e(96312),c=e(78344),d=e(33816).WEEKDAY_PATTERN,u=e(33816).HOUR_PATTERN;function x(m,y,v){function _(z,V){return a.coerce(m,y,f.rangebreaks,z,V)}if(_("enabled")){var h=_("bounds");if(h&&h.length>=2){var S,A,E="";if(h.length===2){for(S=0;S<2;S++)if(A=g(h[S])){E=d;break}}var P=_("pattern",E);if(P===d)for(S=0;S<2;S++)(A=g(h[S]))&&(y.bounds[S]=h[S]=A-1);if(P)for(S=0;S<2;S++)switch(A=h[S],P){case d:if(!T(A)||(A=+A)!==Math.floor(A)||A<0||A>=7)return void(y.enabled=!1);y.bounds[S]=h[S]=A;break;case u:if(!T(A)||(A=+A)<0||A>24)return void(y.enabled=!1);y.bounds[S]=h[S]=A}if(v.autorange===!1){var I=v.range;if(I[0]<I[1]){if(h[0]<I[0]&&h[1]>I[1])return void(y.enabled=!1)}else if(h[0]>I[0]&&h[1]<I[1])return void(y.enabled=!1)}}else{var D=_("values");if(!D||!D.length)return void(y.enabled=!1);_("dvalue")}}}F.exports=function(m,y,v,_,h){var S,A=_.letter,E=_.font||{},P=_.splomStash||{},I=v("visible",!_.visibleDflt),D=y._template||{},z=y.type||D.type||"-";z==="date"&&(k.getComponentMethod("calendars","handleDefaults")(m,y,"calendar",_.calendar),_.noTicklabelmode||(S=v("ticklabelmode")));var V="";_.noTicklabelposition&&z!=="multicategory"||(V=a.coerce(m,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:A==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||v("ticklabeloverflow",V.indexOf("inside")!==-1?"hide past domain":z==="category"||z==="multicategory"?"allow":"hide past div"),c(y,h),l(m,y,v,_),n(m,y,v,_),z==="category"||_.noHover||v("hoverformat");var O=v("color"),j=O!==f.color.dflt?O:E.color,Y=P.label||h._dfltTitle[A];if(r(m,y,v,z,_),!I)return y;v("title.text",Y),a.coerceFont(v,"title.font",E,{overrideDflt:{size:a.bigFont(E.size),color:j}}),s(m,y,v,z);var B=_.hasMinor;if(B&&(w.newContainer(y,"minor"),s(m,y,v,z,{isMinor:!0})),i(m,y,v,z,_),t(m,y,v,_),B){var U=_.isMinor;_.isMinor=!0,t(m,y,v,_),_.isMinor=U}o(m,y,v,{dfltColor:O,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:B,attributes:f}),!B||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&v("mirror");var q,te=z==="multicategory";if(_.noTickson||z!=="category"&&!te||!y.ticks&&!y.showgrid||(te&&(q="boundaries"),v("tickson",q)==="boundaries"&&delete y.ticklabelposition),te&&v("showdividers")&&(v("dividercolor"),v("dividerwidth")),z==="date")if(b(m,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),y.rangebreaks.length){for(var ee=0;ee<y.rangebreaks.length;ee++)if(y.rangebreaks[ee].pattern===d){y._hasDayOfWeekBreaks=!0;break}if(c(y,h),h._has("scattergl")||h._has("splom"))for(var Q=0;Q<_.data.length;Q++){var J=_.data[Q];J.type!=="scattergl"&&J.type!=="splom"||(J.visible=!1,a.warn(J.type+" traces do not work on axes with rangebreaks. Setting trace "+J.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var p={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(m){if(typeof m=="string")return p[m.substr(0,3).toLowerCase()]}},29736:function(F,C,e){"use strict";var T=e(26880),k=T.FORMAT_LINK,a=T.DATE_FORMAT_LINK;function w(f,s){return["Sets the "+f+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(f,s){return w(f,s)+[" And for dates see: "+a+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}F.exports={axisHoverFormat:function(f,s){return{valType:"string",dflt:"",editType:"none",description:(s?w:b)("hover text",f)+["By default the values are formatted using "+(s?"generic number format":"`"+f+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:w,descriptionWithDates:b}},79811:function(F,C,e){"use strict";var T=e(24040),k=e(33816);function a(w,b){if(b&&b.length){for(var f=0;f<b.length;f++)if(b[f][w])return!0}return!1}C.id2name=function(w){if(typeof w=="string"&&w.match(k.AX_ID_PATTERN)){var b=w.split(" ")[0].substr(1);return b==="1"&&(b=""),w.charAt(0)+"axis"+b}},C.name2id=function(w){if(w.match(k.AX_NAME_PATTERN)){var b=w.substr(5);return b==="1"&&(b=""),w.charAt(0)+b}},C.cleanId=function(w,b,f){var s=/( domain)$/.test(w);if(typeof w=="string"&&w.match(k.AX_ID_PATTERN)&&(!b||w.charAt(0)===b)&&(!s||f)){var t=w.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),w.charAt(0)+t+(s&&f?" domain":"")}},C.list=function(w,b,f){var s=w._fullLayout;if(!s)return[];var t,i=C.listIds(w,b),r=new Array(i.length);for(t=0;t<i.length;t++){var n=i[t];r[t]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!f){var o=s._subplots.gl3d||[];for(t=0;t<o.length;t++){var l=s[o[t]];b?r.push(l[b+"axis"]):r.push(l.xaxis,l.yaxis,l.zaxis)}}return r},C.listIds=function(w,b){var f=w._fullLayout;if(!f)return[];var s=f._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},C.getFromId=function(w,b,f){var s=w._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),f==="x"?b=b.replace(/y[0-9]*/,""):f==="y"&&(b=b.replace(/x[0-9]*/,"")),s[C.id2name(b)]},C.getFromTrace=function(w,b,f){var s=w._fullLayout,t=null;if(T.traceIs(b,"gl3d")){var i=b.scene;i.substr(0,5)==="scene"&&(t=s[i][f+"axis"])}else t=C.getFromId(w,b[f+"axis"]||f);return t},C.idSort=function(w,b){var f=w.charAt(0),s=b.charAt(0);return f!==s?f>s?1:-1:+(w.substr(1)||1)-+(b.substr(1)||1)},C.ref2id=function(w){return!!/^[xyz]/.test(w)&&w.split(" ")[0]},C.isLinked=function(w,b){return a(b,w._axisMatchGroups)||a(b,w._axisConstraintGroups)}},22416:function(F,C,e){"use strict";var T=e(38116).isTypedArraySpec;F.exports=function(k,a,w,b){if(a.type==="category"){var f,s=k.categoryarray,t=Array.isArray(s)&&s.length>0||T(s);t&&(f="array");var i,r=w("categoryorder",f);r==="array"&&(i=w("categoryarray")),t||r!=="array"||(r=a.categoryorder="trace"),r==="trace"?a._initialCategories=[]:r==="array"?a._initialCategories=i.slice():(i=function(n,o){var l,c,d,u=o.dataAttr||n._id.charAt(0),x={};if(o.axData)l=o.axData;else for(l=[],c=0;c<o.data.length;c++){var p=o.data[c];p[u+"axis"]===n._id&&l.push(p)}for(c=0;c<l.length;c++){var g=l[c][u];for(d=0;d<g.length;d++){var m=g[d];m!=null&&(x[m]=1)}}return Object.keys(x)}(a,b).sort(),r==="category ascending"?a._initialCategories=i:r==="category descending"&&(a._initialCategories=i.reverse()))}}},98728:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(39032),w=a.ONEDAY,b=a.ONEWEEK;C.dtick=function(f,s){var t=s==="log",i=s==="date",r=s==="category",n=i?w:1;if(!f)return n;if(T(f))return(f=Number(f))<=0?n:r?Math.max(1,Math.round(f)):i?Math.max(.1,f):f;if(typeof f!="string"||!i&&!t)return n;var o=f.charAt(0),l=f.substr(1);return(l=T(l)?Number(l):0)<=0||!(i&&o==="M"&&l===Math.round(l)||t&&o==="L"||t&&o==="D"&&(l===1||l===2))?n:f},C.tick0=function(f,s,t,i){return s==="date"?k.cleanDate(f,k.dateTick0(t,i%b==0?1:0)):i!=="D1"&&i!=="D2"?T(f)?Number(f):0:void 0}},33816:function(F,C,e){"use strict";var T=e(53756).counter;F.exports={idRegex:{x:T("x","( domain)?"),y:T("y","( domain)?")},attrRegex:T("[xy]axis"),xAxisMatch:T("xaxis"),yAxisMatch:T("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(F,C,e){"use strict";var T=e(3400),k=e(19280),a=e(79811).id2name,w=e(94724),b=e(21160),f=e(78344),s=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(u,x,p){var g=p.axIds,m=p.layoutOut,y=p.hasImage,v=m._axisConstraintGroups,_=m._axisMatchGroups,h=x._id,S=h.charAt(0),A=((m._splomAxes||{})[S]||{})[h]||{},E=x._id,P=E.charAt(0)==="x";function I(K,X){return T.coerce(u,x,w,K,X)}x._matchGroup=null,x._constraintGroup=null,I("constrain",y?"domain":"range"),T.coerce(u,x,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var D,z,V=x.type,O=[];for(D=0;D<g.length;D++)(z=g[D])!==E&&m[a(z)].type===V&&O.push(z);var j=n(v,E);if(j){var Y=[];for(D=0;D<O.length;D++)j[z=O[D]]||Y.push(z);O=Y}var B,U,q=O.length;q&&(u.matches||A.matches)&&(B=T.coerce(u,x,{matches:{valType:"enumerated",values:O,dflt:O.indexOf(A.matches)!==-1?A.matches:void 0}},"matches"));var te=y&&!P?x.anchor:void 0;if(q&&!B&&(u.scaleanchor||te)&&(U=T.coerce(u,x,{scaleanchor:{valType:"enumerated",values:O.concat([!1])}},"scaleanchor",te)),B){x._matchGroup=o(_,E,B,1);var ee=m[a(B)],Q=r(m,x)/r(m,ee);P!==(B.charAt(0)==="x")&&(Q=(P?"x":"y")+Q),o(v,E,B,Q)}else u.matches&&g.indexOf(u.matches)!==-1&&T.warn("ignored "+x._name+'.matches: "'+u.matches+'" to avoid an infinite loop');if(U){var J=I("scaleratio");J||(J=x.scaleratio=1),o(v,E,U,J)}else u.scaleanchor&&g.indexOf(u.scaleanchor)!==-1&&T.warn("ignored "+x._name+'.scaleanchor: "'+u.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(u,x){var p=x.domain;return p||(p=u[a(x.overlaying)].domain),p[1]-p[0]}function n(u,x){for(var p=0;p<u.length;p++)if(u[p][x])return u[p];return null}function o(u,x,p,g){var m,y,v,_,h,S=n(u,x);S===null?((S={})[x]=1,h=u.length,u.push(S)):h=u.indexOf(S);var A=Object.keys(S);for(m=0;m<u.length;m++)if(v=u[m],m!==h&&v[p]){var E=v[p];for(y=0;y<A.length;y++)v[_=A[y]]=l(E,l(g,S[_]));return void u.splice(h,1)}if(g!==1)for(y=0;y<A.length;y++){var P=A[y];S[P]=l(g,S[P])}S[p]=1}function l(u,x){var p,g,m="",y="";typeof u=="string"&&(p=(m=u.match(/^[xy]*/)[0]).length,u=+u.substr(p)),typeof x=="string"&&(g=(y=x.match(/^[xy]*/)[0]).length,x=+x.substr(g));var v=u*x;return p||g?p&&g&&m.charAt(0)!==y.charAt(0)?p===g?v:(p>g?m.substr(g):y.substr(p))+v:m+y+u*x:v}function c(u,x){for(var p=x._size,g=p.h/p.w,m={},y=Object.keys(u),v=0;v<y.length;v++){var _=y[v],h=u[_];if(typeof h=="string"){var S=h.match(/^[xy]*/)[0],A=S.length;h=+h.substr(A);for(var E=S.charAt(0)==="y"?g:1/g,P=0;P<A;P++)h*=E}m[_]=h}return m}function d(u,x){var p=u._inputDomain,g=t[u.constraintoward],m=p[0]+(p[1]-p[0])*g;u.domain=u._input.domain=[m+(p[0]-m)/x,m+(p[1]-m)/x],u.setScale()}C.handleDefaults=function(u,x,p){var g,m,y,v,_,h,S,A,E=p.axIds,P=p.axHasImage,I=x._axisConstraintGroups=[],D=x._axisMatchGroups=[];for(g=0;g<E.length;g++)i(_=u[v=a(E[g])],h=x[v],{axIds:E,layoutOut:x,hasImage:P[v]});function z(ee,Q){for(g=0;g<ee.length;g++)for(y in m=ee[g])x[a(y)][Q]=m}for(z(D,"_matchGroup"),g=0;g<I.length;g++)for(y in m=I[g])if((h=x[a(y)]).fixedrange){for(var V in m){var O=a(V);(u[O]||{}).fixedrange===!1&&T.warn("fixedrange was specified as false for axis "+O+" but was overridden because another axis in its constraint group has fixedrange true"),x[O].fixedrange=!0}break}for(g=0;g<I.length;){for(y in m=I[g]){(h=x[a(y)])._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(m).length&&(I.splice(g,1),g--);break}g++}z(I,"_constraintGroup");var j=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Y=!1,B=!1;function U(){A=h[S],S==="rangebreaks"&&(B=h._hasDayOfWeekBreaks)}for(g=0;g<D.length;g++){m=D[g];for(var q=0;q<j.length;q++){var te;for(y in S=j[q],A=null,m)if(_=u[v=a(y)],h=x[v],S in h){if(!h.matches&&(te=h,S in _)){U();break}A===null&&S in _&&U()}if(S==="range"&&A&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(Y=!0),S==="autorange"&&A===null&&Y&&(A=!1),A===null&&S in te&&(A=te[S]),A!==null)for(y in m)(h=x[a(y)])[S]=S==="range"?A.slice():A,S==="rangebreaks"&&(h._hasDayOfWeekBreaks=B,f(h,x))}}},C.enforce=function(u){var x,p,g,m,y,v,_,h,S=u._fullLayout,A=S._axisConstraintGroups||[];for(x=0;x<A.length;x++){g=c(A[x],S);var E=Object.keys(g),P=1/0,I=0,D=1/0,z={},V={},O=!1;for(p=0;p<E.length;p++)V[m=E[p]]=y=S[a(m)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),z[m]=v=Math.abs(y._m)/g[m],P=Math.min(P,v),y.constrain!=="domain"&&y._constraintShrinkable||(D=Math.min(D,v)),delete y._constraintShrinkable,I=Math.max(I,v),y.constrain==="domain"&&(O=!0);if(!(P>s*I)||O){for(p=0;p<E.length;p++)if(v=z[m=E[p]],_=(y=V[m]).constrain,v!==D||_==="domain")if(h=v/D,_==="range")b(y,h);else{var j=y._inputDomain,Y=(y.domain[1]-y.domain[0])/(j[1]-j[0]),B=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if((h/=Y)*B<1){y.domain=y._input.domain=j.slice(),b(y,h);continue}if(B<1&&(y.range=y._input.range=y._inputRange.slice(),h*=B),y.autorange){var U=y.r2l(y.range[0]),q=y.r2l(y.range[1]),te=(U+q)/2,ee=te,Q=te,J=Math.abs(q-te),K=te-J*h*1.0001,X=te+J*h*1.0001,ie=k.makePadFn(S,y,0),se=k.makePadFn(S,y,1);d(y,h);var ae,ue,ve=Math.abs(y._m),ye=k.concatExtremes(u,y),pe=ye.min,de=ye.max;for(ue=0;ue<pe.length;ue++)(ae=pe[ue].val-ie(pe[ue])/ve)>K&&ae<ee&&(ee=ae);for(ue=0;ue<de.length;ue++)(ae=de[ue].val+se(de[ue])/ve)<X&&ae>Q&&(Q=ae);h/=(Q-ee)/(2*J),ee=y.l2r(ee),Q=y.l2r(Q),y.range=y._input.range=U<q?[ee,Q]:[Q,ee]}d(y,h)}}}},C.getAxisGroup=function(u,x){for(var p=u._axisMatchGroups,g=0;g<p.length;g++)if(p[g][x])return"g"+g;return x},C.clean=function(u,x){if(x._inputDomain){for(var p=!1,g=x._id,m=u._fullLayout._axisConstraintGroups,y=0;y<m.length;y++)if(m[y][g]){p=!0;break}p&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},51184:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=k.numberFormat,w=e(49760),b=e(89184),f=e(24040),s=k.strTranslate,t=e(72736),i=e(76308),r=e(43616),n=e(93024),o=e(54460),l=e(93972),c=e(86476),d=e(72760),u=d.selectingOrDrawing,x=d.freeMode,p=e(84284).FROM_TL,g=e(73696),m=e(39172).redrawReglTraces,y=e(7316),v=e(79811).getFromId,_=e(22676).prepSelect,h=e(22676).clearOutline,S=e(22676).selectOnClick,A=e(21160),E=e(33816),P=E.MINDRAG,I=E.MINZOOM,D=!0;function z(ae,ue,ve,ye){var pe=k.ensureSingle(ae.draglayer,ue,ve,function(de){de.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return pe.call(l,ye),pe.node()}function V(ae,ue,ve,ye,pe,de,me){var ke=z(ae,"rect",ue,ve);return T.select(ke).call(r.setRect,ye,pe,de,me),ke}function O(ae,ue){for(var ve=0;ve<ae.length;ve++)if(!ae[ve].fixedrange)return ue;return""}function j(ae,ue,ve,ye,pe){for(var de=0;de<ae.length;de++){var me=ae[de];if(!me.fixedrange)if(me.rangebreaks){var ke=me._id.charAt(0)==="y",Ce=ke?1-ue:ue,ge=ke?1-ve:ve;ye[me._name+".range[0]"]=me.l2r(me.p2l(Ce*me._length)),ye[me._name+".range[1]"]=me.l2r(me.p2l(ge*me._length))}else{var oe=me._rl[0],re=me._rl[1]-oe;ye[me._name+".range[0]"]=me.l2r(oe+re*ue),ye[me._name+".range[1]"]=me.l2r(oe+re*ve)}}if(pe&&pe.length){var fe=(ue+(1-ve))/2;j(pe,fe,1-fe,ye,[])}}function Y(ae,ue){for(var ve=0;ve<ae.length;ve++){var ye=ae[ve];if(!ye.fixedrange){if(ye.rangebreaks){var pe=ye._length,de=(ye.p2l(0+ue)-ye.p2l(0)+(ye.p2l(pe+ue)-ye.p2l(pe)))/2;ye.range=[ye.l2r(ye._rl[0]-de),ye.l2r(ye._rl[1]-de)]}else ye.range=[ye.l2r(ye._rl[0]-ue/ye._m),ye.l2r(ye._rl[1]-ue/ye._m)];ye.limitRange&&ye.limitRange()}}}function B(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function U(ae,ue,ve,ye,pe){return ae.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(ve,ye)).attr("d",pe+"Z")}function q(ae,ue,ve){return ae.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ue,ve)).attr("d","M0,0Z")}function te(ae,ue,ve,ye,pe,de){ae.attr("d",ye+"M"+ve.l+","+ve.t+"v"+ve.h+"h"+ve.w+"v-"+ve.h+"h-"+ve.w+"Z"),ee(ae,ue,pe,de)}function ee(ae,ue,ve,ye){ve||(ae.transition().style("fill",ye>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function Q(ae){T.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function J(ae){D&&ae.data&&ae._context.showTips&&(k.notifier(k._(ae,"Double-click to zoom back out"),"long"),D=!1)}function K(ae){var ue=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,I)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function X(ae,ue,ve,ye,pe){for(var de,me,ke,Ce,ge=!1,oe={},re={},fe=(pe||{}).xaHash,Se=(pe||{}).yaHash,be=0;be<ue.length;be++){var we=ue[be];for(de in ve)if(we[de]){for(ke in we)pe&&(fe[ke]||Se[ke])||(ke.charAt(0)==="x"?ve:ye)[ke]||(oe[ke]=de);for(me in ye)pe&&(fe[me]||Se[me])||!we[me]||(ge=!0)}for(me in ye)if(we[me])for(Ce in we)pe&&(fe[Ce]||Se[Ce])||(Ce.charAt(0)==="x"?ve:ye)[Ce]||(re[Ce]=me)}ge&&(k.extendFlat(oe,re),re={});var Me={},Pe=[];for(ke in oe){var De=v(ae,ke);Pe.push(De),Me[De._id]=De}var he={},_e=[];for(Ce in re){var Ae=v(ae,Ce);_e.push(Ae),he[Ae._id]=Ae}return{xaHash:Me,yaHash:he,xaxes:Pe,yaxes:_e,xLinks:oe,yLinks:re,isSubplotConstrained:ge}}function ie(ae,ue){if(b){var ve=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(ve,ae._onwheel),ae._onwheel=ue,ae.addEventListener(ve,ue,{passive:!1})}else ae.onwheel!==void 0?ae.onwheel=ue:ae.onmousewheel!==void 0?ae.onmousewheel=ue:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ue,{passive:!1}))}function se(ae){var ue=[];for(var ve in ae)ue.push(ae[ve]);return ue}F.exports={makeDragBox:function(ae,ue,ve,ye,pe,de,me,ke){var Ce,ge,oe,re,fe,Se,be,we,Me,Pe,De,he,_e,Ae,Oe,Ee,Be,Ve,Ze,it,at,gt,yt,pt=ae._fullLayout._zoomlayer,et=me+ke==="nsew",$e=(me+ke).length===1;function At(){if(Ce=ue.xaxis,ge=ue.yaxis,Me=Ce._length,Pe=ge._length,be=Ce._offset,we=ge._offset,(oe={})[Ce._id]=Ce,(re={})[ge._id]=ge,me&&ke)for(var Qt=ue.overlays,un=0;un<Qt.length;un++){var nn=Qt[un].xaxis;oe[nn._id]=nn;var hn=Qt[un].yaxis;re[hn._id]=hn}fe=se(oe),Se=se(re),_e=O(fe,ke),Ae=O(Se,me),Oe=!Ae&&!_e,he=X(ae,ae._fullLayout._axisMatchGroups,oe,re);var bn=(De=X(ae,ae._fullLayout._axisConstraintGroups,oe,re,he)).isSubplotConstrained||he.isSubplotConstrained;Ee=ke||bn,Be=me||bn;var wn=ae._fullLayout;Ve=wn._has("scattergl"),Ze=wn._has("splom"),it=wn._has("svg")}ve+=ue.yaxis._shift,At();var Ot=function(Qt,un,nn){return Qt?Qt==="nsew"?nn?"":un==="pan"?"move":"crosshair":Qt.toLowerCase()+"-resize":"pointer"}(Ae+_e,ae._fullLayout.dragmode,et),Rt=V(ue,me+ke+"drag",Ot,ve,ye,pe,de);if(Oe&&!et)return Rt.onmousedown=null,Rt.style.pointerEvents="none",Rt;var Ct,Ge,Xe,Ne,Ye,ot,nt,ze,Fe,rt,We={element:Rt,gd:ae,plotinfo:ue};function ft(){We.plotinfo.selection=!1,h(ae)}function mt(Qt,un){var nn=We.gd;if(nn._fullLayout._activeShapeIndex>=0)nn._fullLayout._deactivateShape(nn);else{var hn=nn._fullLayout.clickmode;if(Q(nn),Qt!==2||$e||Ht(),et)hn.indexOf("select")>-1&&S(un,nn,fe,Se,ue.id,We),hn.indexOf("event")>-1&&n.click(nn,un,ue.id);else if(Qt===1&&$e){var bn=me?ge:Ce,wn=me==="s"||ke==="w"?0:1,Cn=bn._name+".range["+wn+"]",Ln=function(Rn,Qn){var Yn,ar=Rn.range[Qn],Kn=Math.abs(ar-Rn.range[1-Qn]);return Rn.type==="date"?ar:Rn.type==="log"?(Yn=Math.ceil(Math.max(0,-Math.log(Kn)/Math.LN10))+3,a("."+Yn+"g")(Math.pow(10,ar))):(Yn=Math.floor(Math.log(Math.abs(ar))/Math.LN10)-Math.floor(Math.log(Kn)/Math.LN10)+4,a("."+String(Yn)+"g")(ar))}(bn,wn),Mn="left",jn="middle";if(bn.fixedrange)return;me?(jn=me==="n"?"top":"bottom",bn.side==="right"&&(Mn="right")):ke==="e"&&(Mn="right"),nn._context.showAxisRangeEntryBoxes&&T.select(Rt).call(t.makeEditable,{gd:nn,immediate:!0,background:nn._fullLayout.paper_bgcolor,text:String(Ln),fill:bn.tickfont?bn.tickfont.color:"#444",horizontalAlign:Mn,verticalAlign:jn}).on("edit",function(Rn){var Qn=bn.d2r(Rn);Qn!==void 0&&f.call("_guiRelayout",nn,Cn,Qn)})}}}function vt(Qt,un){if(ae._transitioningWithDuration)return!1;var nn=Math.max(0,Math.min(Me,gt*Qt+Ct)),hn=Math.max(0,Math.min(Pe,yt*un+Ge)),bn=Math.abs(nn-Ct),wn=Math.abs(hn-Ge);function Cn(){nt="",Xe.r=Xe.l,Xe.t=Xe.b,Fe.attr("d","M0,0Z")}if(Xe.l=Math.min(Ct,nn),Xe.r=Math.max(Ct,nn),Xe.t=Math.min(Ge,hn),Xe.b=Math.max(Ge,hn),De.isSubplotConstrained)bn>I||wn>I?(nt="xy",bn/Me>wn/Pe?(wn=bn*Pe/Me,Ge>hn?Xe.t=Ge-wn:Xe.b=Ge+wn):(bn=wn*Me/Pe,Ct>nn?Xe.l=Ct-bn:Xe.r=Ct+bn),Fe.attr("d",K(Xe))):Cn();else if(he.isSubplotConstrained)if(bn>I||wn>I){nt="xy";var Ln=Math.min(Xe.l/Me,(Pe-Xe.b)/Pe),Mn=Math.max(Xe.r/Me,(Pe-Xe.t)/Pe);Xe.l=Ln*Me,Xe.r=Mn*Me,Xe.b=(1-Ln)*Pe,Xe.t=(1-Mn)*Pe,Fe.attr("d",K(Xe))}else Cn();else!Ae||wn<Math.min(Math.max(.6*bn,P),I)?bn<P||!_e?Cn():(Xe.t=0,Xe.b=Pe,nt="x",Fe.attr("d",function(jn,Rn){return"M"+(jn.l-.5)+","+(Rn-I-.5)+"h-3v"+(2*I+1)+"h3ZM"+(jn.r+.5)+","+(Rn-I-.5)+"h3v"+(2*I+1)+"h-3Z"}(Xe,Ge))):!_e||bn<Math.min(.6*wn,I)?(Xe.l=0,Xe.r=Me,nt="y",Fe.attr("d",function(jn,Rn){return"M"+(Rn-I-.5)+","+(jn.t-.5)+"v-3h"+(2*I+1)+"v3ZM"+(Rn-I-.5)+","+(jn.b+.5)+"v3h"+(2*I+1)+"v-3Z"}(Xe,Ct))):(nt="xy",Fe.attr("d",K(Xe)));Xe.w=Xe.r-Xe.l,Xe.h=Xe.b-Xe.t,nt&&(rt=!0),ae._dragged=rt,te(ze,Fe,Xe,Ye,ot,Ne),ut(),ae.emit("plotly_relayouting",at),ot=!0}function ut(){at={},nt!=="xy"&&nt!=="x"||(j(fe,Xe.l/Me,Xe.r/Me,at,De.xaxes),Xt("x",at)),nt!=="xy"&&nt!=="y"||(j(Se,(Pe-Xe.b)/Pe,(Pe-Xe.t)/Pe,at,De.yaxes),Xt("y",at))}function Mt(){ut(),Q(ae),Zt(),J(ae)}We.prepFn=function(Qt,un,nn){var hn=We.dragmode,bn=ae._fullLayout.dragmode;bn!==hn&&(We.dragmode=bn),At(),gt=ae._fullLayout._invScaleX,yt=ae._fullLayout._invScaleY,Oe||(et?Qt.shiftKey?bn==="pan"?bn="zoom":u(bn)||(bn="pan"):Qt.ctrlKey&&(bn="pan"):bn="pan"),x(bn)?We.minDrag=1:We.minDrag=void 0,u(bn)?(We.xaxes=fe,We.yaxes=Se,_(Qt,un,nn,We,bn)):(We.clickFn=mt,u(hn)&&ft(),Oe||(bn==="zoom"?(We.moveFn=vt,We.doneFn=Mt,We.minDrag=1,function(wn,Cn,Ln){var Mn=Rt.getBoundingClientRect();Ct=Cn-Mn.left,Ge=Ln-Mn.top,ae._fullLayout._calcInverseTransform(ae);var jn=k.apply3DTransform(ae._fullLayout._invTransform)(Ct,Ge);Ct=jn[0],Ge=jn[1],Xe={l:Ct,r:Ct,w:0,t:Ge,b:Ge,h:0},Ne=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:w(ae._fullLayout.plot_bgcolor).getLuminance(),ot=!1,nt="xy",rt=!1,ze=U(pt,Ne,be,we,Ye="M0,0H"+Me+"V"+Pe+"H0V0"),Fe=q(pt,be,we)}(0,un,nn)):bn==="pan"&&(We.moveFn=Ft,We.doneFn=Zt))),ae._fullLayout._redrag=function(){var wn=ae._dragdata;if(wn&&wn.element===Rt){var Cn=ae._fullLayout.dragmode;u(Cn)||(At(),jt([0,0,Me,Pe]),We.moveFn(wn.dx,wn.dy))}}},c.init(We);var bt=[0,0,Me,Pe],St=null,Pt=E.REDRAWDELAY,Dt=ue.mainplot?ae._fullLayout._plots[ue.mainplot]:ue;function Ft(Qt,un){if(Qt*=gt,un*=yt,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,_e==="ew"||Ae==="ns"){var nn=_e?-Qt:0,hn=Ae?-un:0;if(he.isSubplotConstrained){if(_e&&Ae){var bn=(Qt/Me-un/Pe)/2;nn=-(Qt=bn*Me),hn=-(un=-bn*Pe)}Ae?nn=-hn*Me/Pe:hn=-nn*Pe/Me}return _e&&(Y(fe,Qt),Xt("x")),Ae&&(Y(Se,un),Xt("y")),jt([nn,hn,Me,Pe]),an(),void ae.emit("plotly_relayouting",at)}var wn,Cn,Ln=_e==="w"==(Ae==="n")?1:-1;if(_e&&Ae&&(De.isSubplotConstrained||he.isSubplotConstrained)){var Mn=(Qt/Me+Ln*un/Pe)/2;Qt=Mn*Me,un=Ln*Mn*Pe}if(_e==="w"?Qt=Yn(fe,0,Qt):_e==="e"?Qt=Yn(fe,1,-Qt):_e||(Qt=0),Ae==="n"?un=Yn(Se,1,un):Ae==="s"?un=Yn(Se,0,-un):Ae||(un=0),wn=_e==="w"?Qt:0,Cn=Ae==="n"?un:0,De.isSubplotConstrained&&!he.isSubplotConstrained||he.isSubplotConstrained&&_e&&Ae&&Ln>0){var jn;if(he.isSubplotConstrained||!_e&&Ae.length===1){for(jn=0;jn<fe.length;jn++)fe[jn].range=fe[jn]._r.slice(),A(fe[jn],1-un/Pe);wn=(Qt=un*Me/Pe)/2}if(he.isSubplotConstrained||!Ae&&_e.length===1){for(jn=0;jn<Se.length;jn++)Se[jn].range=Se[jn]._r.slice(),A(Se[jn],1-Qt/Me);Cn=(un=Qt*Pe/Me)/2}}he.isSubplotConstrained&&Ae||Xt("x"),he.isSubplotConstrained&&_e||Xt("y");var Rn=Me-Qt,Qn=Pe-un;!he.isSubplotConstrained||_e&&Ae||(_e?(Cn=wn?0:Qt*Pe/Me,Qn=Rn*Pe/Me):(wn=Cn?0:un*Me/Pe,Rn=Qn*Me/Pe)),jt([wn,Cn,Rn,Qn]),an(),ae.emit("plotly_relayouting",at)}function Yn(ar,Kn,mr){for(var en,rn,En=1-Kn,gn=0;gn<ar.length;gn++){var Dn=ar[gn];if(!Dn.fixedrange){en=Dn,rn=Dn._rl[En]+(Dn._rl[Kn]-Dn._rl[En])/B(mr/Dn._length);var qn=Dn.l2r(rn);qn!==!1&&qn!==void 0&&(Dn.range[Kn]=qn)}}return en._length*(en._rl[Kn]-rn)/(en._rl[Kn]-en._rl[En])}}function Xt(Qt,un){for(var nn=he.isSubplotConstrained?{x:Se,y:fe}[Qt]:he[Qt+"axes"],hn=he.isSubplotConstrained?{x:fe,y:Se}[Qt]:[],bn=0;bn<nn.length;bn++){var wn=nn[bn],Cn=wn._id,Ln=he.xLinks[Cn]||he.yLinks[Cn],Mn=hn[0]||oe[Ln]||re[Ln];Mn&&(un?(un[wn._name+".range[0]"]=un[Mn._name+".range[0]"],un[wn._name+".range[1]"]=un[Mn._name+".range[1]"]):wn.range=Mn.range.slice())}}function an(){var Qt,un=[];function nn(Cn){for(Qt=0;Qt<Cn.length;Qt++)Cn[Qt].fixedrange||un.push(Cn[Qt]._id)}function hn(Cn,Ln){for(Qt=0;Qt<Cn.length;Qt++){var Mn=Cn[Qt],jn=Mn[Ln];Mn.fixedrange||jn.tickmode!=="sync"||un.push(jn._id)}}for(Ee&&(nn(fe),nn(De.xaxes),nn(he.xaxes),hn(ue.overlays,"xaxis")),Be&&(nn(Se),nn(De.yaxes),nn(he.yaxes),hn(ue.overlays,"yaxis")),at={},Qt=0;Qt<un.length;Qt++){var bn=un[Qt],wn=v(ae,bn);o.drawOne(ae,wn,{skipTitle:!0}),at[wn._name+".range[0]"]=wn.range[0],at[wn._name+".range[1]"]=wn.range[1]}o.redrawComponents(ae,un)}function Ht(){if(!ae._transitioningWithDuration){var Qt=ae._context.doubleClick,un=[];_e&&(un=un.concat(fe)),Ae&&(un=un.concat(Se)),he.xaxes&&(un=un.concat(he.xaxes)),he.yaxes&&(un=un.concat(he.yaxes));var nn,hn,bn={};if(Qt==="reset+autosize")for(Qt="autosize",hn=0;hn<un.length;hn++){var wn=(nn=un[hn])._rangeInitial0,Cn=nn._rangeInitial1,Ln=wn!==void 0||Cn!==void 0;if(Ln&&(wn!==void 0&&wn!==nn.range[0]||Cn!==void 0&&Cn!==nn.range[1])||!Ln&&nn.autorange!==!0){Qt="reset";break}}if(Qt==="autosize")for(hn=0;hn<un.length;hn++)(nn=un[hn]).fixedrange||(bn[nn._name+".autorange"]=!0);else if(Qt==="reset"){for((_e||De.isSubplotConstrained)&&(un=un.concat(De.xaxes)),Ae&&!De.isSubplotConstrained&&(un=un.concat(De.yaxes)),De.isSubplotConstrained&&(_e?Ae||(un=un.concat(Se)):un=un.concat(fe)),hn=0;hn<un.length;hn++)if(!(nn=un[hn]).fixedrange){var Mn=nn._name,jn=nn._autorangeInitial;nn._rangeInitial0===void 0&&nn._rangeInitial1===void 0?bn[Mn+".autorange"]=!0:nn._rangeInitial0===void 0?(bn[Mn+".autorange"]=jn,bn[Mn+".range"]=[null,nn._rangeInitial1]):nn._rangeInitial1===void 0?(bn[Mn+".range"]=[nn._rangeInitial0,null],bn[Mn+".autorange"]=jn):bn[Mn+".range"]=[nn._rangeInitial0,nn._rangeInitial1]}}ae.emit("plotly_doubleclick",null),f.call("_guiRelayout",ae,bn)}}function Zt(){jt([0,0,Me,Pe]),k.syncOrAsync([y.previousPromises,function(){ae._fullLayout._replotting=!1,f.call("_guiRelayout",ae,at)}],ae)}function jt(Qt){var un,nn,hn,bn,wn=ae._fullLayout,Cn=wn._plots,Ln=wn._subplots.cartesian;if(Ze&&f.subplotsRegistry.splom.drag(ae),Ve){for(un=0;un<Ln.length;un++)if(hn=(nn=Cn[Ln[un]]).xaxis,bn=nn.yaxis,nn._scene){var Mn=k.simpleMap(hn.range,hn.r2l),jn=k.simpleMap(bn.range,bn.r2l);hn.limitRange&&hn.limitRange(),bn.limitRange&&bn.limitRange(),Mn=hn.range,jn=bn.range,nn._scene.update({range:[Mn[0],jn[0],Mn[1],jn[1]]})}}if((Ze||Ve)&&(g(ae),m(ae)),it){var Rn=Qt[2]/Ce._length,Qn=Qt[3]/ge._length;for(un=0;un<Ln.length;un++){hn=(nn=Cn[Ln[un]]).xaxis,bn=nn.yaxis;var Yn,ar,Kn,mr,en=(Ee||he.isSubplotConstrained)&&!hn.fixedrange&&oe[hn._id],rn=(Be||he.isSubplotConstrained)&&!bn.fixedrange&&re[bn._id];if(en?(Yn=Rn,Kn=ke||he.isSubplotConstrained?Qt[0]:mn(hn,Yn)):he.xaHash[hn._id]?(Yn=Rn,Kn=Qt[0]*hn._length/Ce._length):he.yaHash[hn._id]?(Yn=Qn,Kn=Ae==="ns"?-Qt[1]*hn._length/ge._length:mn(hn,Yn,{n:"top",s:"bottom"}[Ae])):Kn=Tn(hn,Yn=Pn(hn,Rn,Qn)),Yn>1&&(hn.maxallowed!==void 0&&Ee===(hn.range[0]<hn.range[1]?"e":"w")||hn.minallowed!==void 0&&Ee===(hn.range[0]<hn.range[1]?"w":"e"))&&(Yn=1,Kn=0),rn?(ar=Qn,mr=me||he.isSubplotConstrained?Qt[1]:mn(bn,ar)):he.yaHash[bn._id]?(ar=Qn,mr=Qt[1]*bn._length/ge._length):he.xaHash[bn._id]?(ar=Rn,mr=_e==="ew"?-Qt[0]*bn._length/Ce._length:mn(bn,ar,{e:"right",w:"left"}[_e])):mr=Tn(bn,ar=Pn(bn,Rn,Qn)),ar>1&&(bn.maxallowed!==void 0&&Be===(bn.range[0]<bn.range[1]?"n":"s")||bn.minallowed!==void 0&&Be===(bn.range[0]<bn.range[1]?"s":"n"))&&(ar=1,mr=0),Yn||ar){Yn||(Yn=1),ar||(ar=1);var En=hn._offset-Kn/Yn,gn=bn._offset-mr/ar;nn.clipRect.call(r.setTranslate,Kn,mr).call(r.setScale,Yn,ar),nn.plot.call(r.setTranslate,En,gn).call(r.setScale,1/Yn,1/ar),Yn===nn.xScaleFactor&&ar===nn.yScaleFactor||(r.setPointGroupScale(nn.zoomScalePts,Yn,ar),r.setTextPointsScale(nn.zoomScaleTxt,Yn,ar)),r.hideOutsideRangePoints(nn.clipOnAxisFalseTraces,nn),nn.xScaleFactor=Yn,nn.yScaleFactor=ar}}}}function Pn(Qt,un,nn){return Qt.fixedrange?0:Ee&&De.xaHash[Qt._id]?un:Be&&(De.isSubplotConstrained?De.xaHash:De.yaHash)[Qt._id]?nn:0}function Tn(Qt,un){return un?(Qt.range=Qt._r.slice(),A(Qt,un),mn(Qt,un)):0}function mn(Qt,un,nn){return Qt._length*(1-un)*p[nn||Qt.constraintoward||"middle"]}return me.length*ke.length!=1&&ie(Rt,function(Qt){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(ft(),ae._transitioningWithDuration)return Qt.preventDefault(),void Qt.stopPropagation();At(),clearTimeout(St);var un=-Qt.deltaY;if(isFinite(un)||(un=Qt.wheelDelta/10),isFinite(un)){var nn,hn=Math.exp(-Math.min(Math.max(un,-20),20)/200),bn=Dt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),wn=(Qt.clientX-bn.left)/bn.width,Cn=(bn.bottom-Qt.clientY)/bn.height;if(Ee){for(ke||(wn=.5),nn=0;nn<fe.length;nn++)Ln(fe[nn],wn,hn);Xt("x"),bt[2]*=hn,bt[0]+=bt[2]*wn*(1/hn-1)}if(Be){for(me||(Cn=.5),nn=0;nn<Se.length;nn++)Ln(Se[nn],Cn,hn);Xt("y"),bt[3]*=hn,bt[1]+=bt[3]*(1-Cn)*(1/hn-1)}jt(bt),an(),ae.emit("plotly_relayouting",at),St=setTimeout(function(){ae._fullLayout&&(bt=[0,0,Me,Pe],Zt())},Pt),Qt.preventDefault()}else k.log("Did not find wheel motion attributes: ",Qt)}function Ln(Mn,jn,Rn){if(!Mn.fixedrange){var Qn=k.simpleMap(Mn.range,Mn.r2l),Yn=Qn[0]+(Qn[1]-Qn[0])*jn;Mn.range=Qn.map(function(ar){return Mn.l2r(Yn+(ar-Yn)*Rn)})}}}),Rt},makeDragger:z,makeRectDragger:V,makeZoombox:U,makeCorners:q,updateZoombox:te,xyCorners:K,transitionZoombox:ee,removeZoombox:Q,showDoubleClickNotifier:J,attachWheelEventHandler:ie}},42464:function(F,C,e){"use strict";var T=e(33428),k=e(93024),a=e(86476),w=e(93972),b=e(51184).makeDragBox,f=e(33816).DRAGGERSIZE;C.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)T.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(r,n){if((t._plots[r].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var o=r.split("y"),l=n.split("y");return o[0]===l[0]?Number(o[1]||1)-Number(l[1]||1):Number(o[0]||1)-Number(l[0]||1)}return t._plots[r].mainplot?1:-1}).forEach(function(r){var n=t._plots[r],o=n.xaxis,l=n.yaxis;if(!n.mainplot){var c=b(s,n,o._offset,l._offset,o._length,l._length,"ns","ew");c.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&k.hover(s,x,r)},k.hover(s,x,r),s._fullLayout._lasthover=c,s._fullLayout._hoversubplot=r},c.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,a.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,n,o._offset-f,l._offset-f,f,f,"n","w"),b(s,n,o._offset+o._length,l._offset-f,f,f,"n","e"),b(s,n,o._offset-f,l._offset+l._length,f,f,"s","w"),b(s,n,o._offset+o._length,l._offset+l._length,f,f,"s","e"))}if(s._context.showAxisDragHandles){if(r===o._mainSubplot){var d=o._mainLinePosition;o.side==="top"&&(d-=f),b(s,n,o._offset+.1*o._length,d,.8*o._length,f,"","ew"),b(s,n,o._offset,d,.1*o._length,f,"","w"),b(s,n,o._offset+.9*o._length,d,.1*o._length,f,"","e")}if(r===l._mainSubplot){var u=l._mainLinePosition;l.side!=="right"&&(u-=f),b(s,n,u,l._offset+.1*l._length,f,.8*l._length,"ns",""),b(s,n,u,l._offset+.9*l._length,f,.1*l._length,"s",""),b(s,n,u,l._offset,f,.1*l._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(r){r.target=s._fullLayout._lasthover,k.hover(s,r,t._hoversubplot)},i.onclick=function(r){r.target=s._fullLayout._lasthover,k.click(s,r)},i.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},C.updateFx(s)}},C.updateFx=function(s){var t=s._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";w(t._draggers,i)}},36632:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(79811);F.exports=function(w){return function(b,f){var s=b[w];if(Array.isArray(s))for(var t=T.subplotsRegistry.cartesian,i=t.idRegex,r=f._subplots,n=r.xaxis,o=r.yaxis,l=r.cartesian,c=f._has("cartesian")||f._has("gl2d"),d=0;d<s.length;d++){var u=s[d];if(k.isPlainObject(u)){var x=a.cleanId(u.xref,"x",!1),p=a.cleanId(u.yref,"y",!1),g=i.x.test(x),m=i.y.test(p);if(g||m){c||k.pushUnique(f._basePlotModules,t);var y=!1;g&&n.indexOf(x)===-1&&(n.push(x),y=!0),m&&o.indexOf(p)===-1&&(o.push(p),y=!0),y&&g&&m&&l.push(x+p)}}}}}},57952:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(3400),w=e(7316),b=e(43616),f=e(84888)._M,s=e(79811),t=e(33816),i=e(9616),r=a.ensureSingle;function n(u,x,p){return a.ensureSingle(u,x,p,function(g){g.datum(p)})}function o(u,x,p,g,m){for(var y,v,_,h=t.traceLayerClasses,S=u._fullLayout,A=S._modules,E={},P=0;P<p.length;P++){var I=p[P][0].trace.zorder||0;E[I]||(E[I]=[]),E[I].push(p[P])}for(var D=[],z=[],V=Object.keys(E).map(Number).sort(a.sorterAsc),O=0;O<V.length;O++)for(var j=V[O],Y=0;Y<A.length;Y++){var B=(y=A[Y]).name,U=k.modules[B].categories;if(U.svg){var q=y.layerName||B+"layer",te=q+(O?Number(O)+1:""),ee=y.plot;_=(v=f(p,ee,j))[0],p=v[1],_.length&&D.push({i:h.indexOf(q),zorder:O,className:te,plotMethod:ee,cdModule:_}),U.zoomScale&&z.push("."+te)}}D.sort(function(K,X){return(K.zorder||0)-(X.zorder||0)||K.i-X.i});var Q=x.plot.selectAll("g.mlayer").data(D,function(K){return K.className});if(Q.enter().append("g").attr("class",function(K){return K.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),Q.exit().remove(),Q.order(),Q.each(function(K){var X=T.select(this),ie=K.className;K.plotMethod(u,x,K.cdModule,X,g,m),t.clipOnAxisFalseQuery.indexOf("."+ie)===-1&&b.setClipUrl(X,x.layerClipId,u)}),S._has("scattergl")&&(y=k.getModule("scattergl"),_=f(p,y)[0],y.plot(u,x,_)),!u._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),z.length)){var J=x.plot.selectAll(z.join(",")).selectAll(".trace");x.zoomScalePts=J.selectAll("path.point"),x.zoomScaleTxt=J.selectAll(".textpoint")}}function l(u,x){var p=x.plotgroup,g=x.id,m=t.layerValue2layerClass[x.xaxis.layer],y=t.layerValue2layerClass[x.yaxis.layer],v=u._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var _=x.mainplotinfo,h=_.plotgroup,S=g+"-x",A=g+"-y";x.minorGridlayer=_.minorGridlayer,x.gridlayer=_.gridlayer,x.zerolinelayer=_.zerolinelayer,r(_.overlinesBelow,"path",S),r(_.overlinesBelow,"path",A),r(_.overaxesBelow,"g",S),r(_.overaxesBelow,"g",A),x.plot=r(_.overplot,"g",g),r(_.overlinesAbove,"path",S),r(_.overlinesAbove,"path",A),r(_.overaxesAbove,"g",S),r(_.overaxesAbove,"g",A),x.xlines=h.select(".overlines-"+m).select("."+S),x.ylines=h.select(".overlines-"+y).select("."+A),x.xaxislayer=h.select(".overaxes-"+m).select("."+S),x.yaxislayer=h.select(".overaxes-"+y).select("."+A)}else if(v)x.xlines=r(p,"path","xlines-above"),x.ylines=r(p,"path","ylines-above"),x.xaxislayer=r(p,"g","xaxislayer-above"),x.yaxislayer=r(p,"g","yaxislayer-above");else{var E=r(p,"g","layer-subplot");x.shapelayer=r(E,"g","shapelayer"),x.imagelayer=r(E,"g","imagelayer"),x.minorGridlayer=r(p,"g","minor-gridlayer"),x.gridlayer=r(p,"g","gridlayer"),x.zerolinelayer=r(p,"g","zerolinelayer");var P=r(p,"g","layer-between");x.shapelayerBetween=r(P,"g","shapelayer"),x.imagelayerBetween=r(P,"g","imagelayer"),r(p,"path","xlines-below"),r(p,"path","ylines-below"),x.overlinesBelow=r(p,"g","overlines-below"),r(p,"g","xaxislayer-below"),r(p,"g","yaxislayer-below"),x.overaxesBelow=r(p,"g","overaxes-below"),x.plot=r(p,"g","plot"),x.overplot=r(p,"g","overplot"),x.xlines=r(p,"path","xlines-above"),x.ylines=r(p,"path","ylines-above"),x.overlinesAbove=r(p,"g","overlines-above"),r(p,"g","xaxislayer-above"),r(p,"g","yaxislayer-above"),x.overaxesAbove=r(p,"g","overaxes-above"),x.xlines=p.select(".xlines-"+m),x.ylines=p.select(".ylines-"+y),x.xaxislayer=p.select(".xaxislayer-"+m),x.yaxislayer=p.select(".yaxislayer-"+y)}v||(n(x.minorGridlayer,"g",x.xaxis._id),n(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(I){return I[0]}).sort(s.idSort),n(x.gridlayer,"g",x.xaxis._id),n(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(I){return I[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function c(u,x){if(u){var p={};for(var g in u.each(function(_){var h=_[0];T.select(this).remove(),d(h,x),p[h]=!0}),x._plots)for(var m=x._plots[g].overlays||[],y=0;y<m.length;y++){var v=m[y];p[v.id]&&v.plot.selectAll(".trace").remove()}}}function d(u,x){x._draggers.selectAll("g."+u).remove(),x._defs.select("#clip"+x._uid+u+"plot").remove()}C.name="cartesian",C.attr=["xaxis","yaxis"],C.idRoot=["x","y"],C.idRegex=t.idRegex,C.attrRegex=t.attrRegex,C.attributes=e(26720),C.layoutAttributes=e(94724),C.supplyLayoutDefaults=e(67352),C.transitionAxes=e(73736),C.finalizeSubplots=function(u,x){var p,g,m,y=x._subplots,v=y.xaxis,_=y.yaxis,h=y.cartesian,S=h.concat(y.gl2d||[]),A={},E={};for(p=0;p<S.length;p++){var P=S[p].split("y");A[P[0]]=1,E["y"+P[1]]=1}for(p=0;p<v.length;p++)A[g=v[p]]||(m=(u[s.id2name(g)]||{}).anchor,t.idRegex.y.test(m)||(m="y"),h.push(g+m),S.push(g+m),E[m]||(E[m]=1,a.pushUnique(_,m)));for(p=0;p<_.length;p++)E[m=_[p]]||(g=(u[s.id2name(m)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),h.push(g+m),S.push(g+m),A[g]||(A[g]=1,a.pushUnique(v,g)));if(!S.length){for(var I in g="",m="",u)t.attrRegex.test(I)&&(I.charAt(0)==="x"?(!g||+I.substr(5)<+g.substr(5))&&(g=I):(!m||+I.substr(5)<+m.substr(5))&&(m=I));g=g?s.name2id(g):"x",m=m?s.name2id(m):"y",v.push(g),_.push(m),h.push(g+m)}},C.plot=function(u,x,p,g){var m,y=u._fullLayout,v=y._subplots.cartesian,_=u.calcdata;if(!Array.isArray(x))for(x=[],m=0;m<_.length;m++)x.push(m);for(m=0;m<v.length;m++){for(var h,S=v[m],A=y._plots[S],E=[],P=0;P<_.length;P++){var I=_[P],D=I[0].trace;D.xaxis+D.yaxis===S&&((x.indexOf(D.index)!==-1||D.carpet)&&(h&&h[0].trace.xaxis+h[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(D.fill)!==-1&&E.indexOf(h)===-1&&E.push(h),E.push(I)),h=I)}o(u,A,E,p,g)}},C.clean=function(u,x,p,g){var m,y,v,_=g._plots||{},h=x._plots||{},S=g._subplots||{};if(g._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(v in _)(m=_[v]).plotgroup&&m.plotgroup.remove();var A=g._has&&g._has("gl"),E=x._has&&x._has("gl");if(A&&!E)for(v in _)(m=_[v])._scene&&m._scene.destroy();if(S.xaxis&&S.yaxis){var P=s.listIds({_fullLayout:g});for(y=0;y<P.length;y++){var I=P[y];x[s.id2name(I)]||g._infolayer.selectAll(".g-"+I+"title").remove()}}var D=g._has&&g._has("cartesian"),z=x._has&&x._has("cartesian");if(D&&!z)c(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(S.cartesian)for(y=0;y<S.cartesian.length;y++){var V=S.cartesian[y];if(!h[V]){var O="."+V+",."+V+"-x,."+V+"-y";g._cartesianlayer.selectAll(O).remove(),d(V,g)}}},C.drawFramework=function(u){var x=u._fullLayout,p=function(m){var y,v,_,h,S,A,E=m._fullLayout,P=E._subplots.cartesian,I=P.length,D=[],z=[];for(y=0;y<I;y++){_=P[y],S=(h=E._plots[_]).xaxis,A=h.yaxis;var V=S._mainAxis,O=A._mainAxis,j=V._id+O._id,Y=E._plots[j];h.overlays=[],j!==_&&Y?(h.mainplot=j,h.mainplotinfo=Y,z.push(_)):(h.mainplot=void 0,h.mainplotinfo=void 0,D.push(_))}for(y=0;y<z.length;y++)_=z[y],(h=E._plots[_]).mainplotinfo.overlays.push(h);var B=D.concat(z),U=new Array(I);for(y=0;y<I;y++){_=B[y],S=(h=E._plots[_]).xaxis,A=h.yaxis;var q=[_,S.layer,A.layer,S.overlaying||"",A.overlaying||""];for(v=0;v<h.overlays.length;v++)q.push(h.overlays[v].id);U[y]=q}return U}(u),g=x._cartesianlayer.selectAll(".subplot").data(p,String);g.enter().append("g").attr("class",function(m){return"subplot "+m[0]}),g.order(),g.exit().call(c,x),g.each(function(m){var y=m[0],v=x._plots[y];v.plotgroup=T.select(this),l(u,v),v.draglayer=r(x._draggers,"g",y)})},C.rangePlot=function(u,x,p){l(u,x),o(u,x,p),w.style(u)},C.toSVG=function(u){var x=u._fullLayout._glimages,p=T.select(u).selectAll(".svg-container");p.filter(function(g,m){return m===p.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,m=g.toDataURL("image/png");x.append("svg:image").attr({xmlns:i.svg,"xlink:href":m,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},C.updateFx=e(42464).updateFx},94724:function(F,C,e){"use strict";var T=e(25376),k=e(22548),a=e(98192).u,w=e(92880).extendFlat,b=e(31780).templatedArray,f=e(29736).descriptionWithDates,s=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,r=t.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},o=w({},n,{values:n.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},u={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function p(S){var A={valType:"number",min:0,editType:"ticks"};return S||(A.dflt=5),A}function g(S){var A={valType:"number",min:0,editType:"ticks"};return S||(A.dflt=1),A}var m={valType:"color",dflt:k.defaultLine,editType:"ticks"},y={valType:"color",dflt:k.lightLine,editType:"ticks"};function v(S){var A={valType:"number",min:0,editType:"ticks"};return S||(A.dflt=1),A}var _=w({},a,{editType:"ticks"}),h={valType:"boolean",editType:"ticks"};F.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:T({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:o,nticks:l(),tick0:c,dtick:d,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:u,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:p(),tickwidth:g(),tickcolor:m,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:w({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:T({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:f("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:f("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:h,gridcolor:y,gridwidth:v(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:l("minor"),tick0:c,dtick:d,tickvals:u,ticks:x,ticklen:p("minor"),tickwidth:g("minor"),tickcolor:m,gridcolor:y,gridwidth:v("minor"),griddash:_,showgrid:h,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:T({editType:"ticks"})}}},67352:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(10624).isUnifiedHover,w=e(41008),b=e(31780),f=e(64859),s=e(94724),t=e(14944),i=e(28336),r=e(71888),n=e(37668),o=e(79811),l=o.id2name,c=o.name2id,d=e(33816).AX_ID_PATTERN,u=e(24040),x=u.traceIs,p=u.getComponentMethod;function g(m,y,v){Array.isArray(m[y])?m[y].push(v):m[y]=[v]}F.exports=function(m,y,v){var _,h,S=y.autotypenumbers,A={},E={},P={},I={},D={},z={},V={},O={},j={},Y={};for(_=0;_<v.length;_++){var B=v[_];if(x(B,"cartesian")||x(B,"gl2d")){var U,q;if(B.xaxis)U=l(B.xaxis),g(A,U,B);else if(B.xaxes)for(h=0;h<B.xaxes.length;h++)g(A,l(B.xaxes[h]),B);if(B.yaxis)q=l(B.yaxis),g(A,q,B);else if(B.yaxes)for(h=0;h<B.yaxes.length;h++)g(A,l(B.yaxes[h]),B);B.type==="funnel"?B.orientation==="h"?(U&&(E[U]=!0),q&&(V[q]=!0)):q&&(P[q]=!0):B.type==="image"?(q&&(O[q]=!0),U&&(O[U]=!0)):(q&&(D[q]=!0,z[q]=!0),x(B,"carpet")&&(B.type!=="carpet"||B._cheater)||U&&(I[U]=!0)),B.type==="carpet"&&B._cheater&&U&&(E[U]=!0),x(B,"2dMap")&&(j[U]=!0,j[q]=!0),x(B,"oriented")&&(Y[B.orientation==="h"?q:U]=!0)}}var te=y._subplots,ee=te.xaxis,Q=te.yaxis,J=T.simpleMap(ee,l),K=T.simpleMap(Q,l),X=J.concat(K),ie=k.background;ee.length&&Q.length&&(ie=T.coerce(m,y,f,"plot_bgcolor"));var se,ae,ue,ve,ye,pe=k.combine(ie,y.paper_bgcolor);function de(){var $e=A[se]||[];ye._traceIndices=$e.map(function(At){return At._expandedIndex}),ye._annIndices=[],ye._shapeIndices=[],ye._selectionIndices=[],ye._imgIndices=[],ye._subplotsWith=[],ye._counterAxes=[],ye._name=ye._attr=se,ye._id=ae}function me($e,At){return T.coerce(ve,ye,s,$e,At)}function ke($e,At){return T.coerce2(ve,ye,s,$e,At)}function Ce($e){return $e==="x"?Q:ee}function ge($e,At){for(var Ot=$e==="x"?J:K,Rt=[],Ct=0;Ct<Ot.length;Ct++){var Ge=Ot[Ct];Ge===At||(m[Ge]||{}).overlaying||Rt.push(c(Ge))}return Rt}var oe={x:Ce("x"),y:Ce("y")},re=oe.x.concat(oe.y),fe={},Se=[];function be(){var $e=ve.matches;d.test($e)&&re.indexOf($e)===-1&&(fe[$e]=ve.type,Se=Object.keys(fe))}var we=w(m,y),Me=a(we);for(_=0;_<X.length;_++){se=X[_],ae=c(se),ue=se.charAt(0),T.isPlainObject(m[se])||(m[se]={}),ve=m[se],ye=b.newContainer(y,se,ue+"axis"),de();var Pe=ue==="x"&&!I[se]&&E[se]||ue==="y"&&!D[se]&&P[se],De=ue==="y"&&(!z[se]&&V[se]||O[se]),he={hasMinor:!0,letter:ue,font:y.font,outerTicks:j[se],showGrid:!Y[se],data:A[se]||[],bgColor:pe,calendar:y.calendar,automargin:!0,visibleDflt:Pe,reverseDflt:De,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ue]||{})[ae],noAutotickangles:ue==="y"};me("uirevision",y.uirevision),t(ve,ye,me,he),i(ve,ye,me,he,y);var _e=Me&&ue===we.charAt(0),Ae=ke("spikecolor",Me?ye.color:void 0),Oe=ke("spikethickness",Me?1.5:void 0),Ee=ke("spikedash",Me?"dot":void 0),Be=ke("spikemode",Me?"across":void 0),Ve=ke("spikesnap");me("showspikes",!!(_e||Ae||Oe||Ee||Be||Ve))||(delete ye.spikecolor,delete ye.spikethickness,delete ye.spikedash,delete ye.spikemode,delete ye.spikesnap);var Ze=l(ve.overlaying),it=[0,1];if(y[Ze]!==void 0){var at=l(y[Ze].anchor);y[at]!==void 0&&(it=y[at].domain)}n(ve,ye,me,{letter:ue,counterAxes:oe[ue],overlayableAxes:ge(ue,se),grid:y.grid,overlayingDomain:it}),me("title.standoff"),be(),ye._input=ve}for(_=0;_<Se.length;){ae=Se[_++],ue=(se=l(ae)).charAt(0),T.isPlainObject(m[se])||(m[se]={}),ve=m[se],ye=b.newContainer(y,se,ue+"axis"),de();var gt={letter:ue,font:y.font,outerTicks:j[se],showGrid:!Y[se],data:[],bgColor:pe,calendar:y.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ue]||{})[ae]};me("uirevision",y.uirevision),ye.type=fe[ae]||"linear",i(ve,ye,me,gt,y),n(ve,ye,me,{letter:ue,counterAxes:oe[ue],overlayableAxes:ge(ue,se),grid:y.grid}),me("fixedrange"),be(),ye._input=ve}var yt=p("rangeslider","handleDefaults"),pt=p("rangeselector","handleDefaults");for(_=0;_<J.length;_++)se=J[_],ve=m[se],ye=y[se],yt(m,y,se),ye.type==="date"&&pt(ve,ye,y,K,ye.calendar),me("fixedrange");for(_=0;_<K.length;_++){se=K[_],ve=m[se],ye=y[se];var et=y[l(ye.anchor)];me("fixedrange",p("rangeslider","isVisible")(et))}r.handleDefaults(m,y,{axIds:re.concat(Se).sort(o.idSort),axHasImage:O})}},42136:function(F,C,e){"use strict";var T=e(49760).mix,k=e(22548),a=e(3400);F.exports=function(w,b,f,s){var t=(s=s||{}).dfltColor;function i(m,y){return a.coerce2(w,b,s.attributes,m,y)}var r=i("linecolor",t),n=i("linewidth");f("showline",s.showLine||!!r||!!n)||(delete b.linecolor,delete b.linewidth);var o=i("gridcolor",T(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),l=i("gridwidth"),c=i("griddash");if(f("showgrid",s.showGrid||!!o||!!l||!!c)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var d=i("minor.gridcolor",T(b.gridcolor,s.bgColor,67).toRgbString()),u=i("minor.gridwidth",b.gridwidth||1),x=i("minor.griddash",b.griddash||"solid");f("minor.showgrid",!!d||!!u||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var p=i("zerolinecolor",t),g=i("zerolinewidth");f("zeroline",s.showGrid||!!p||!!g)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},37668:function(F,C,e){"use strict";var T=e(38248),k=e(3400);F.exports=function(a,w,b,f){var s,t,i,r,n,o,l=f.counterAxes||[],c=f.overlayableAxes||[],d=f.letter,u=f.grid,x=f.overlayingDomain;u&&(t=u._domains[d][u._axisMap[w._id]],s=u._anchors[w._id],t&&(i=u[d+"side"].split(" ")[0],r=u.domain[d][i==="right"||i==="top"?1:0])),t=t||[0,1],s=s||(T(a.position)?"free":l[0]||"free"),i=i||(d==="x"?"bottom":"left"),r=r||0,n=0,o=!1;var p=k.coerce(a,w,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:s}},"anchor"),g=k.coerce(a,w,{side:{valType:"enumerated",values:d==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");p==="free"&&(d==="y"&&(b("autoshift")&&(r=g==="left"?x[0]:x[1],o=!w.automargin||w.automargin,n=g==="left"?-3:3),b("shift",n)),b("position",r)),b("automargin",o);var m=!1;if(c.length&&(m=k.coerce(a,w,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!m){var y=b("domain",t);y[0]>y[1]-.000244140625&&(w.domain=t),k.noneOrAll(a.domain,w.domain,t),w.tickmode==="sync"&&(w.tickmode="auto")}return b("layer"),w}},42568:function(F,C,e){"use strict";var T=e(85024);F.exports=function(k,a,w,b,f){f||(f={});var s=f.tickSuffixDflt,t=T(k);w("tickprefix")&&w("showtickprefix",t),w("ticksuffix",s)&&w("showticksuffix",t)}},96312:function(F,C,e){"use strict";var T=e(76808);F.exports=function(k,a,w,b){var f=a._template||{},s=a.type||f.type||"-";w("minallowed"),w("maxallowed");var t,i=w("range");i||b.noInsiderange||s==="log"||(!(t=w("insiderange"))||t[0]!==null&&t[1]!==null||(a.insiderange=!1,t=void 0),t&&(i=w("range",t)));var r,n=a.getAutorangeDflt(i,b),o=w("autorange",n);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||o!=="reversed"&&o!==!0)&&(i[0]===null||o!=="min"&&o!=="max reversed")&&(i[1]===null||o!=="max"&&o!=="min reversed")||(i=void 0,delete a.range,a.autorange=!0,r=!0),r||(o=w("autorange",n=a.getAutorangeDflt(i,b))),o&&(T(w,o,i),s!=="linear"&&s!=="-"||w("rangemode")),a.cleanRange()}},21160:function(F,C,e){"use strict";var T=e(84284).FROM_BL;F.exports=function(k,a,w){w===void 0&&(w=T[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],f=b[0]+(b[1]-b[0])*w;k.range=k._input.range=[k.l2r(f+(b[0]-f)*a),k.l2r(f+(b[1]-f)*a)],k.setScale()}},78344:function(F,C,e){"use strict";var T=e(33428),k=e(94336).E9,a=e(3400),w=a.numberFormat,b=e(38248),f=a.cleanNumber,s=a.ms2DateTime,t=a.dateTime2ms,i=a.ensureNumber,r=a.isArrayOrTypedArray,n=e(39032),o=n.FP_SAFE,l=n.BADNUM,c=n.LOG_CLIP,d=n.ONEWEEK,u=n.ONEDAY,x=n.ONEHOUR,p=n.ONEMIN,g=n.ONESEC,m=e(79811),y=e(33816),v=y.HOUR_PATTERN,_=y.WEEKDAY_PATTERN;function h(A){return Math.pow(10,A)}function S(A){return A!=null}F.exports=function(A,E){E=E||{};var P=A._id||"x",I=P.charAt(0);function D(X,ie){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&ie&&A.range&&A.range.length===2){var se=A.range[0],ae=A.range[1];return .5*(se+ae-2*c*Math.abs(se-ae))}return l}function z(X,ie,se,ae){if((ae||{}).msUTC&&b(X))return+X;var ue=t(X,se||A.calendar);if(ue===l){if(!b(X))return l;X=+X;var ve=Math.floor(10*a.mod(X+.05,1)),ye=Math.round(X-ve/10);ue=t(new Date(ye))+ve/10}return ue}function V(X,ie,se){return s(X,ie,se||A.calendar)}function O(X){return A._categories[Math.round(X)]}function j(X){if(S(X)){if(A._categoriesMap===void 0&&(A._categoriesMap={}),A._categoriesMap[X]!==void 0)return A._categoriesMap[X];A._categories.push(typeof X=="number"?String(X):X);var ie=A._categories.length-1;return A._categoriesMap[X]=ie,ie}return l}function Y(X){if(A._categoriesMap)return A._categoriesMap[X]}function B(X){var ie=Y(X);return ie!==void 0?ie:b(X)?+X:void 0}function U(X){return b(X)?+X:Y(X)}function q(X,ie,se){return T.round(se+ie*X,2)}function te(X,ie,se){return(X-se)/ie}var ee=function(X){return b(X)?q(X,A._m,A._b):l},Q=function(X){return te(X,A._m,A._b)};if(A.rangebreaks){var J=I==="y";ee=function(X){if(!b(X))return l;var ie=A._rangebreaks.length;if(!ie)return q(X,A._m,A._b);var se=J;A.range[0]>A.range[1]&&(se=!se);for(var ae=se?-1:1,ue=ae*X,ve=0,ye=0;ye<ie;ye++){var pe=ae*A._rangebreaks[ye].min,de=ae*A._rangebreaks[ye].max;if(ue<pe)break;if(!(ue>de)){ve=ue<(pe+de)/2?ye:ye+1;break}ve=ye+1}var me=A._B[ve]||0;return isFinite(me)?q(X,A._m2,me):0},Q=function(X){var ie=A._rangebreaks.length;if(!ie)return te(X,A._m,A._b);for(var se=0,ae=0;ae<ie&&!(X<A._rangebreaks[ae].pmin);ae++)X>A._rangebreaks[ae].pmax&&(se=ae+1);return te(X,A._m2,A._B[se])}}A.c2l=A.type==="log"?D:i,A.l2c=A.type==="log"?h:i,A.l2p=ee,A.p2l=Q,A.c2p=A.type==="log"?function(X,ie){return ee(D(X,ie))}:ee,A.p2c=A.type==="log"?function(X){return h(Q(X))}:Q,["linear","-"].indexOf(A.type)!==-1?(A.d2r=A.r2d=A.d2c=A.r2c=A.d2l=A.r2l=f,A.c2d=A.c2r=A.l2d=A.l2r=i,A.d2p=A.r2p=function(X){return A.l2p(f(X))},A.p2d=A.p2r=Q,A.cleanPos=i):A.type==="log"?(A.d2r=A.d2l=function(X,ie){return D(f(X),ie)},A.r2d=A.r2c=function(X){return h(f(X))},A.d2c=A.r2l=f,A.c2d=A.l2r=i,A.c2r=D,A.l2d=h,A.d2p=function(X,ie){return A.l2p(A.d2r(X,ie))},A.p2d=function(X){return h(Q(X))},A.r2p=function(X){return A.l2p(f(X))},A.p2r=Q,A.cleanPos=i):A.type==="date"?(A.d2r=A.r2d=a.identity,A.d2c=A.r2c=A.d2l=A.r2l=z,A.c2d=A.c2r=A.l2d=A.l2r=V,A.d2p=A.r2p=function(X,ie,se){return A.l2p(z(X,0,se))},A.p2d=A.p2r=function(X,ie,se){return V(Q(X),ie,se)},A.cleanPos=function(X){return a.cleanDate(X,l,A.calendar)}):A.type==="category"?(A.d2c=A.d2l=j,A.r2d=A.c2d=A.l2d=O,A.d2r=A.d2l_noadd=B,A.r2c=function(X){var ie=U(X);return ie!==void 0?ie:A.fraction2r(.5)},A.l2r=A.c2r=i,A.r2l=U,A.d2p=function(X){return A.l2p(A.r2c(X))},A.p2d=function(X){return O(Q(X))},A.r2p=A.d2p,A.p2r=Q,A.cleanPos=function(X){return typeof X=="string"&&X!==""?X:i(X)}):A.type==="multicategory"&&(A.r2d=A.c2d=A.l2d=O,A.d2r=A.d2l_noadd=B,A.r2c=function(X){var ie=B(X);return ie!==void 0?ie:A.fraction2r(.5)},A.r2c_just_indices=Y,A.l2r=A.c2r=i,A.r2l=B,A.d2p=function(X){return A.l2p(A.r2c(X))},A.p2d=function(X){return O(Q(X))},A.r2p=A.d2p,A.p2r=Q,A.cleanPos=function(X){return Array.isArray(X)||typeof X=="string"&&X!==""?X:i(X)},A.setupMultiCategory=function(X){var ie,se,ae=A._traceIndices,ue=A._matchGroup;if(ue&&A._categories.length===0){for(var ve in ue)if(ve!==P){var ye=E[m.id2name(ve)];ae=ae.concat(ye._traceIndices)}}var pe=[[0,{}],[0,{}]],de=[];for(ie=0;ie<ae.length;ie++){var me=X[ae[ie]];if(I in me){var ke=me[I],Ce=me._length||a.minRowLength(ke);if(r(ke[0])&&r(ke[1]))for(se=0;se<Ce;se++){var ge=ke[0][se],oe=ke[1][se];S(ge)&&S(oe)&&(de.push([ge,oe]),ge in pe[0][1]||(pe[0][1][ge]=pe[0][0]++),oe in pe[1][1]||(pe[1][1][oe]=pe[1][0]++))}}}for(de.sort(function(re,fe){var Se=pe[0][1],be=Se[re[0]]-Se[fe[0]];if(be)return be;var we=pe[1][1];return we[re[1]]-we[fe[1]]}),ie=0;ie<de.length;ie++)j(de[ie])}),A.fraction2r=function(X){var ie=A.r2l(A.range[0]),se=A.r2l(A.range[1]);return A.l2r(ie+X*(se-ie))},A.r2fraction=function(X){var ie=A.r2l(A.range[0]),se=A.r2l(A.range[1]);return(A.r2l(X)-ie)/(se-ie)},A.limitRange=function(X){var ie=A.minallowed,se=A.maxallowed;if(ie!==void 0||se!==void 0){X||(X="range");var ae=a.nestedProperty(A,X).get(),ue=a.simpleMap(ae,A.r2l),ve=ue[1]<ue[0];ve&&ue.reverse();var ye=a.simpleMap([ie,se],A.r2l);if(ie!==void 0&&ue[0]<ye[0]&&(ae[ve?1:0]=ie),se!==void 0&&ue[1]>ye[1]&&(ae[ve?0:1]=se),ae[0]===ae[1]){var pe=A.l2r(ie),de=A.l2r(se);if(ie!==void 0){var me=pe+1;se!==void 0&&(me=Math.min(me,de)),ae[ve?1:0]=me}if(se!==void 0){var ke=de+1;ie!==void 0&&(ke=Math.max(ke,pe)),ae[ve?0:1]=ke}}}},A.cleanRange=function(X,ie){A._cleanRange(X,ie),A.limitRange(X)},A._cleanRange=function(X,ie){ie||(ie={}),X||(X="range");var se,ae,ue=a.nestedProperty(A,X).get();if(ae=(ae=A.type==="date"?a.dfltRange(A.calendar):I==="y"?y.DFLTRANGEY:A._name==="realaxis"?[0,1]:ie.dfltRange||y.DFLTRANGEX).slice(),A.rangemode!=="tozero"&&A.rangemode!=="nonnegative"||(ae[0]=0),ue&&ue.length===2){var ve=ue[0]===null,ye=ue[1]===null;for(A.type!=="date"||A.autorange||(ue[0]=a.cleanDate(ue[0],l,A.calendar),ue[1]=a.cleanDate(ue[1],l,A.calendar)),se=0;se<2;se++)if(A.type==="date"){if(!a.isDateTime(ue[se],A.calendar)){A[X]=ae;break}if(A.r2l(ue[0])===A.r2l(ue[1])){var pe=a.constrain(A.r2l(ue[0]),a.MIN_MS+1e3,a.MAX_MS-1e3);ue[0]=A.l2r(pe-1e3),ue[1]=A.l2r(pe+1e3);break}}else{if(!b(ue[se])){if(ve||ye||!b(ue[1-se])){A[X]=ae;break}ue[se]=ue[1-se]*(se?10:.1)}if(ue[se]<-o?ue[se]=-o:ue[se]>o&&(ue[se]=o),ue[0]===ue[1]){var de=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=de,ue[1]+=de}}}else a.nestedProperty(A,X).set(ae)},A.setScale=function(X){var ie=E._size;if(A.overlaying){var se=m.getFromId({_fullLayout:E},A.overlaying);A.domain=se.domain}var ae=X&&A._r?"_r":"range",ue=A.calendar;A.cleanRange(ae);var ve,ye,pe=A.r2l(A[ae][0],ue),de=A.r2l(A[ae][1],ue),me=I==="y";if(me?(A._offset=ie.t+(1-A.domain[1])*ie.h,A._length=ie.h*(A.domain[1]-A.domain[0]),A._m=A._length/(pe-de),A._b=-A._m*de):(A._offset=ie.l+A.domain[0]*ie.w,A._length=ie.w*(A.domain[1]-A.domain[0]),A._m=A._length/(de-pe),A._b=-A._m*pe),A._rangebreaks=[],A._lBreaks=0,A._m2=0,A._B=[],A.rangebreaks&&(A._rangebreaks=A.locateBreaks(Math.min(pe,de),Math.max(pe,de)),A._rangebreaks.length)){for(ve=0;ve<A._rangebreaks.length;ve++)ye=A._rangebreaks[ve],A._lBreaks+=Math.abs(ye.max-ye.min);var ke=me;pe>de&&(ke=!ke),ke&&A._rangebreaks.reverse();var Ce=ke?-1:1;for(A._m2=Ce*A._length/(Math.abs(de-pe)-A._lBreaks),A._B.push(-A._m2*(me?de:pe)),ve=0;ve<A._rangebreaks.length;ve++)ye=A._rangebreaks[ve],A._B.push(A._B[A._B.length-1]-Ce*A._m2*(ye.max-ye.min));for(ve=0;ve<A._rangebreaks.length;ve++)(ye=A._rangebreaks[ve]).pmin=ee(ye.min),ye.pmax=ee(ye.max)}if(!isFinite(A._m)||!isFinite(A._b)||A._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},A.maskBreaks=function(X){var ie,se,ae,ue,ve,ye=A.rangebreaks||[];ye._cachedPatterns||(ye._cachedPatterns=ye.map(function(ge){return ge.enabled&&ge.bounds?a.simpleMap(ge.bounds,ge.pattern?f:A.d2c):null})),ye._cachedValues||(ye._cachedValues=ye.map(function(ge){return ge.enabled&&ge.values?a.simpleMap(ge.values,A.d2c).sort(a.sorterAsc):null}));for(var pe=0;pe<ye.length;pe++){var de=ye[pe];if(de.enabled){if(de.bounds){var me=de.pattern;switch(se=(ie=ye._cachedPatterns[pe])[0],ae=ie[1],me){case _:ue=(ve=new Date(X)).getUTCDay(),se>ae&&(ae+=7,ue<se&&(ue+=7));break;case v:ue=(ve=new Date(X)).getUTCHours()+(ve.getUTCMinutes()/60+ve.getUTCSeconds()/3600+ve.getUTCMilliseconds()/36e5),se>ae&&(ae+=24,ue<se&&(ue+=24));break;case"":ue=X}if(ue>=se&&ue<ae)return l}else for(var ke=ye._cachedValues[pe],Ce=0;Ce<ke.length;Ce++)if(ae=(se=ke[Ce])+de.dvalue,X>=se&&X<ae)return l}}return X},A.locateBreaks=function(X,ie){var se,ae,ue,ve,ye=[];if(!A.rangebreaks)return ye;var pe=A.rangebreaks.slice().sort(function(we,Me){return we.pattern===_&&Me.pattern===v?-1:Me.pattern===_&&we.pattern===v?1:0}),de=function(we,Me){if((we=a.constrain(we,X,ie))!==(Me=a.constrain(Me,X,ie))){for(var Pe=!0,De=0;De<ye.length;De++){var he=ye[De];we<he.max&&Me>=he.min&&(we<he.min&&(he.min=we),Me>he.max&&(he.max=Me),Pe=!1)}Pe&&ye.push({min:we,max:Me})}};for(se=0;se<pe.length;se++){var me=pe[se];if(me.enabled)if(me.bounds){var ke=X,Ce=ie;me.pattern&&(ke=Math.floor(ke)),ue=(ae=a.simpleMap(me.bounds,me.pattern?f:A.r2l))[0],ve=ae[1];var ge,oe,re=new Date(ke);switch(me.pattern){case _:oe=d,ge=(ve-ue+(ve<ue?7:0))*u,ke+=ue*u-(re.getUTCDay()*u+re.getUTCHours()*x+re.getUTCMinutes()*p+re.getUTCSeconds()*g+re.getUTCMilliseconds());break;case v:oe=u,ge=(ve-ue+(ve<ue?24:0))*x,ke+=ue*x-(re.getUTCHours()*x+re.getUTCMinutes()*p+re.getUTCSeconds()*g+re.getUTCMilliseconds());break;default:ke=Math.min(ae[0],ae[1]),ge=oe=(Ce=Math.max(ae[0],ae[1]))-ke}for(var fe=ke;fe<Ce;fe+=oe)de(fe,fe+ge)}else for(var Se=a.simpleMap(me.values,A.d2c),be=0;be<Se.length;be++)de(ue=Se[be],ve=ue+me.dvalue)}return ye.sort(function(we,Me){return we.min-Me.min}),ye},A.makeCalcdata=function(X,ie,se){var ae,ue,ve,ye,pe=A.type,de=pe==="date"&&X[ie+"calendar"];if(ie in X){if(ae=X[ie],ye=X._length||a.minRowLength(ae),a.isTypedArray(ae)&&(pe==="linear"||pe==="log")){if(ye===ae.length)return ae;if(ae.subarray)return ae.subarray(0,ye)}if(pe==="multicategory")return function(Ce,ge){for(var oe=new Array(ge),re=0;re<ge;re++){var fe=(Ce[0]||[])[re],Se=(Ce[1]||[])[re];oe[re]=Y([fe,Se])}return oe}(ae,ye);for(ue=new Array(ye),ve=0;ve<ye;ve++)ue[ve]=A.d2c(ae[ve],0,de,se)}else{var me=ie+"0"in X?A.d2c(X[ie+"0"],0,de):0,ke=X["d"+ie]?Number(X["d"+ie]):1;for(ae=X[{x:"y",y:"x"}[ie]],ye=X._length||ae.length,ue=new Array(ye),ve=0;ve<ye;ve++)ue[ve]=me+ve*ke}if(A.rangebreaks)for(ve=0;ve<ye;ve++)ue[ve]=A.maskBreaks(ue[ve]);return ue},A.isValidRange=function(X,ie){return Array.isArray(X)&&X.length===2&&(ie&&X[0]===null||b(A.r2l(X[0])))&&(ie&&X[1]===null||b(A.r2l(X[1])))},A.getAutorangeDflt=function(X,ie){var se=!A.isValidRange(X,"nullOk");return se&&ie&&ie.reverseDflt?se="reversed":X&&(X[0]===null&&X[1]===null?se=!0:X[0]===null&&X[1]!==null?se="min":X[0]!==null&&X[1]===null&&(se="max")),se},A.isReversed=function(){var X=A.autorange;return X==="reversed"||X==="min reversed"||X==="max reversed"},A.isPtWithinRange=function(X,ie){var se=A.c2l(X[I],null,ie),ae=A.r2l(A.range[0]),ue=A.r2l(A.range[1]);return ae<ue?ae<=se&&se<=ue:ue<=se&&se<=ae},A._emptyCategories=function(){A._categories=[],A._categoriesMap={}},A.clearCalc=function(){var X=A._matchGroup;if(X){var ie=null,se=null;for(var ae in X){var ue=E[m.id2name(ae)];if(ue._categories){ie=ue._categories,se=ue._categoriesMap;break}}ie&&se?(A._categories=ie,A._categoriesMap=se):A._emptyCategories()}else A._emptyCategories();if(A._initialCategories)for(var ve=0;ve<A._initialCategories.length;ve++)j(A._initialCategories[ve])},A.sortByInitialCategories=function(){var X=[];if(A._emptyCategories(),A._initialCategories)for(var ie=0;ie<A._initialCategories.length;ie++)j(A._initialCategories[ie]);X=X.concat(A._traceIndices);var se=A._matchGroup;for(var ae in se)if(P!==ae){var ue=E[m.id2name(ae)];ue._categories=A._categories,ue._categoriesMap=A._categoriesMap,X=X.concat(ue._traceIndices)}return X};var K=E._d3locale;A.type==="date"&&(A._dateFormat=K?K.timeFormat:k,A._extraFormat=E._extraFormat),A._separators=E.separators,A._numFormat=K?K.numberFormat:w,delete A._minDtick,delete A._forceTick0}},85024:function(F){"use strict";F.exports=function(C){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return C[T]!==void 0});if(e.every(function(T){return C[T]===C[e[0]]})||e.length===1)return C[e[0]]}},95936:function(F,C,e){"use strict";var T=e(3400),k=e(76308).contrast,a=e(94724),w=e(85024),b=e(51272);function f(s,t){function i(r,n){return T.coerce(s,t,a.tickformatstops,r,n)}i("enabled")&&(i("dtickrange"),i("value"))}F.exports=function(s,t,i,r,n){n||(n={});var o=i("labelalias");T.isPlainObject(o)||delete t.labelalias;var l=w(s);if(i("showticklabels")){var c=n.font||{},d=t.color,u=(t.ticklabelposition||"").indexOf("inside")!==-1?k(n.bgColor):d&&d!==a.color.dflt?d:c.color;if(T.coerceFont(i,"tickfont",c,{overrideDflt:{color:u}}),n.noTicklabelstep||r==="multicategory"||r==="log"||i("ticklabelstep"),!n.noAng){var x=i("tickangle");n.noAutotickangles||x!=="auto"||i("autotickangles")}if(r!=="category"){var p=i("tickformat");b(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:f}),t.tickformatstops.length||delete t.tickformatstops,n.noExp||p||r==="date"||(i("showexponent",l),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(F,C,e){"use strict";var T=e(3400),k=e(94724);F.exports=function(a,w,b,f){var s=f.isMinor,t=s?a.minor||{}:a,i=s?w.minor:w,r=s?k.minor:k,n=s?"minor.":"",o=T.coerce2(t,i,r,"ticklen",s?.6*(w.ticklen||5):void 0),l=T.coerce2(t,i,r,"tickwidth",s?w.tickwidth||1:void 0),c=T.coerce2(t,i,r,"tickcolor",(s?w.tickcolor:void 0)||i.color);b(n+"ticks",!s&&f.outerTicks||o||l||c?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(F,C,e){"use strict";var T=e(98728),k=e(3400).isArrayOrTypedArray,a=e(38116).isTypedArraySpec,w=e(38116).decodeTypedArraySpec;F.exports=function(b,f,s,t,i){i||(i={});var r=i.isMinor,n=r?b.minor||{}:b,o=r?f.minor:f,l=r?"minor.":"";function c(m){var y=n[m];return a(y)&&(y=w(y)),y!==void 0?y:(o._template||{})[m]}var d=c("tick0"),u=c("dtick"),x=c("tickvals"),p=s(l+"tickmode",k(x)?"array":u?"linear":"auto");if(p==="auto"||p==="sync")s(l+"nticks");else if(p==="linear"){var g=o.dtick=T.dtick(u,t);o.tick0=T.tick0(d,t,f.calendar,g)}else t!=="multicategory"&&(s(l+"tickvals")===void 0?o.tickmode="auto":r||s("ticktext"))}},73736:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(3400),w=e(43616),b=e(54460);F.exports=function(f,s,t,i){var r=f._fullLayout;if(s.length!==0){var n,o,l,c;i&&(n=i());var d=T.ease(t.easing);return f._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var p={},g=0;g<s.length;g++){var m=s[g],y=m.plotinfo.xaxis,v=m.plotinfo.yaxis;m.xr0&&(p[y._name+".range"]=m.xr0.slice()),m.yr0&&(p[v._name+".range"]=m.yr0.slice())}return k.call("relayout",f,p).then(function(){for(var _=0;_<s.length;_++)u(s[_].plotinfo)})}()}),o=Date.now(),c=window.requestAnimationFrame(function p(){l=Date.now();for(var g=Math.min(1,(l-o)/t.duration),m=d(g),y=0;y<s.length;y++)x(s[y],m);l-o>t.duration?(function(){for(var v={},_=0;_<s.length;_++){var h=s[_],S=h.plotinfo.xaxis,A=h.plotinfo.yaxis;h.xr1&&(v[S._name+".range"]=h.xr1.slice()),h.yr1&&(v[A._name+".range"]=h.yr1.slice())}n&&n(),k.call("relayout",f,v).then(function(){for(var E=0;E<s.length;E++)u(s[E].plotinfo)})}(),c=window.cancelAnimationFrame(p)):c=window.requestAnimationFrame(p)}),Promise.resolve()}function u(p){var g=p.xaxis,m=p.yaxis;r._defs.select("#"+p.clipId+"> rect").call(w.setTranslate,0,0).call(w.setScale,1,1),p.plot.call(w.setTranslate,g._offset,m._offset).call(w.setScale,1,1);var y=p.plot.selectAll(".scatterlayer .trace");y.selectAll(".point").call(w.setPointGroupScale,1,1),y.selectAll(".textpoint").call(w.setTextPointsScale,1,1),y.call(w.hideOutsideRangePoints,p)}function x(p,g){var m=p.plotinfo,y=m.xaxis,v=m.yaxis,_=y._length,h=v._length,S=!!p.xr1,A=!!p.yr1,E=[];if(S){var P=a.simpleMap(p.xr0,y.r2l),I=a.simpleMap(p.xr1,y.r2l),D=P[1]-P[0],z=I[1]-I[0];E[0]=(P[0]*(1-g)+g*I[0]-P[0])/(P[1]-P[0])*_,E[2]=_*(1-g+g*z/D),y.range[0]=y.l2r(P[0]*(1-g)+g*I[0]),y.range[1]=y.l2r(P[1]*(1-g)+g*I[1])}else E[0]=0,E[2]=_;if(A){var V=a.simpleMap(p.yr0,v.r2l),O=a.simpleMap(p.yr1,v.r2l),j=V[1]-V[0],Y=O[1]-O[0];E[1]=(V[1]*(1-g)+g*O[1]-V[1])/(V[0]-V[1])*h,E[3]=h*(1-g+g*Y/j),v.range[0]=y.l2r(V[0]*(1-g)+g*O[0]),v.range[1]=v.l2r(V[1]*(1-g)+g*O[1])}else E[1]=0,E[3]=h;b.drawOne(f,y,{skipTitle:!0}),b.drawOne(f,v,{skipTitle:!0}),b.redrawComponents(f,[y._id,v._id]);var B=S?_/E[2]:1,U=A?h/E[3]:1,q=S?E[0]:0,te=A?E[1]:0,ee=S?E[0]/E[2]*_:0,Q=A?E[1]/E[3]*h:0,J=y._offset-ee,K=v._offset-Q;m.clipRect.call(w.setTranslate,q,te).call(w.setScale,1/B,1/U),m.plot.call(w.setTranslate,J,K).call(w.setScale,B,U),w.setPointGroupScale(m.zoomScalePts,1/B,1/U),w.setTextPointsScale(m.zoomScaleTxt,1/B,1/U)}b.redrawComponents(f)}},14944:function(F,C,e){"use strict";var T=e(24040).traceIs,k=e(52976);function a(b){return{v:"x",h:"y"}[b.orientation||"v"]}function w(b,f){var s=a(b),t=T(b,"box-violin"),i=T(b._fullInput||{},"candlestick");return t&&!i&&f===s&&b[s]===void 0&&b[s+"0"]===void 0}F.exports=function(b,f,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(i,r){if(i.type==="-"){var n,o=i._id,l=o.charAt(0);o.indexOf("scene")!==-1&&(o=l);var c=function(v,_,h){for(var S=0;S<v.length;S++){var A=v[S];if(A.type==="splom"&&A._length>0&&(A["_"+h+"axes"]||{})[_]||(A[h+"axis"]||h)===_&&(w(A,h)||(A[h]||[]).length||A[h+"0"]))return A}}(r,o,l);if(c)if(c.type!=="histogram"||l!=={v:"y",h:"x"}[c.orientation||"v"]){var d=l+"calendar",u=c[d],x={noMultiCategory:!T(c,"cartesian")||T(c,"noMultiCategory")};if(c.type==="box"&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,w(c,l)){var p=a(c),g=[];for(n=0;n<r.length;n++){var m=r[n];T(m,"box-violin")&&(m[l+"axis"]||l)===o&&(m[p]!==void 0?g.push(m[p][0]):m.name!==void 0?g.push(m.name):g.push("text"),m[d]!==u&&(u=void 0))}i.type=k(g,u,x)}else if(c.type==="splom"){var y=c.dimensions[c._axesDim[o]];y.visible&&(i.type=k(y.values,u,x))}else i.type=k(c[l]||[c[l+"0"]],u,x)}else i.type="linear"}}(f,t.data),f.type==="-"?f.type="linear":b.type=f.type)}},62460:function(F,C,e){"use strict";var T=e(24040),k=e(3400);function a(s,t,i){var r,n,o,l=!1;if(t.type==="data")r=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;r=s._fullLayout}return n=k.nestedProperty(r,t.prop).get(),(o=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&o[t.prop]!==n&&(l=!0),o[t.prop]=n,{changed:l,value:n}}function w(s,t){var i=[],r=t[0],n={};if(typeof r=="string")n[r]=t[1];else{if(!k.isPlainObject(r))return i;n=r}return f(n,function(o,l,c){i.push({type:"layout",prop:o,value:c})},"",0),i}function b(s,t){var i,r,n,o,l=[];if(r=t[0],n=t[1],i=t[2],o={},typeof r=="string")o[r]=n;else{if(!k.isPlainObject(r))return l;o=r,i===void 0&&(i=n)}return i===void 0&&(i=null),f(o,function(c,d,u){var x,p;if(Array.isArray(u)){p=u.slice();var g=Math.min(p.length,s.data.length);i&&(g=Math.min(g,i.length)),x=[];for(var m=0;m<g;m++)x[m]=i?i[m]:m}else p=u,x=i?i.slice():null;if(x===null)Array.isArray(p)&&(p=p[0]);else if(Array.isArray(x)){if(!Array.isArray(p)){var y=p;p=[];for(var v=0;v<x.length;v++)p[v]=y}p.length=Math.min(x.length,p.length)}l.push({type:"data",prop:c,traces:x,value:p})},"",0),l}function f(s,t,i,r){Object.keys(s).forEach(function(n){var o=s[n];if(n[0]!=="_"){var l=i+(r>0?".":"")+n;k.isPlainObject(o)?f(o,t,l,r+1):t(l,n,o)}})}C.manageCommandObserver=function(s,t,i,r){var n={},o=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var l=C.hasSimpleAPICommandBindings(s,i,n.lookupTable);if(t&&t._commandObserver){if(l)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(l){a(s,l,n.cache),n.check=function(){if(o){var u=a(s,l,n.cache);return u.changed&&r&&n.lookupTable[u.value]!==void 0&&(n.disable(),Promise.resolve(r({value:u.value,type:l.type,prop:l.prop,traces:l.traces,index:n.lookupTable[u.value]})).then(n.enable,n.enable)),u.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<c.length;d++)s._internalOn(c[d],n.check);n.remove=function(){for(var u=0;u<c.length;u++)s._removeInternalListener(c[u],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){o=!1},n.enable=function(){o=!0},t&&(t._commandObserver=n),n},C.hasSimpleAPICommandBindings=function(s,t,i){var r,n,o=t.length;for(r=0;r<o;r++){var l,c=t[r],d=c.method,u=c.args;if(Array.isArray(u)||(u=[]),!d)return!1;var x=C.computeAPICommandBindings(s,d,u);if(x.length!==1)return!1;if(n){if((l=x[0]).type!==n.type||l.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var p=0;p<n.traces.length;p++)if(n.traces[p]!==l.traces[p])return!1}else if(l.prop!==n.prop)return!1}else n=x[0],Array.isArray(n.traces)&&n.traces.sort();var g=(l=x[0]).value;if(Array.isArray(g)){if(g.length!==1)return!1;g=g[0]}i&&(i[g]=r)}return n},C.executeAPICommand=function(s,t,i){if(t==="skip")return Promise.resolve();var r=T.apiMethodRegistry[t],n=[s];Array.isArray(i)||(i=[]);for(var o=0;o<i.length;o++)n.push(i[o]);return r.apply(null,n).catch(function(l){return k.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},C.computeAPICommandBindings=function(s,t,i){var r;switch(Array.isArray(i)||(i=[]),t){case"restyle":r=b(s,i);break;case"relayout":r=w(0,i);break;case"update":r=b(s,[i[0],i[2]]).concat(w(0,[i[1]]));break;case"animate":r=function(n,o){return Array.isArray(o[0])&&o[0].length===1&&["string","number"].indexOf(typeof o[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:o[0][0].toString()}]:[]}(0,i);break;default:r=[]}return r}},86968:function(F,C,e){"use strict";var T=e(92880).extendFlat;C.u=function(k,a){a=a||{};var w={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,a.description&&a.description,{x:T({},w,{}),y:T({},w,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},C.Q=function(k,a,w,b){var f=b&&b.x||[0,1],s=b&&b.y||[0,1],t=a.grid;if(t){var i=w("domain.column");i!==void 0&&(i<t.columns?f=t._domains.x[i]:delete k.domain.column);var r=w("domain.row");r!==void 0&&(r<t.rows?s=t._domains.y[r]:delete k.domain.row)}var n=w("domain.x",f),o=w("domain.y",s);n[0]<n[1]||(k.domain.x=f.slice()),o[0]<o[1]||(k.domain.y=s.slice())}},25376:function(F){"use strict";F.exports=function(C){var e=C.variantValues,T=C.editType,k=C.colorEditType;k===void 0&&(k=T);var a={editType:T,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};C.noNumericWeightValues&&(a.valType="enumerated",a.values=a.extras,a.extras=void 0,a.min=void 0,a.max=void 0);var w={family:{valType:"string",noBlank:!0,strict:!0,editType:T},size:{valType:"number",min:1,editType:T},color:{valType:"color",editType:k},weight:a,style:{editType:T,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:C.noFontVariant?void 0:{editType:T,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:C.noFontTextcase?void 0:{editType:T,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:C.noFontLineposition?void 0:{editType:T,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:C.noFontShadow?void 0:{editType:T,valType:"string",dflt:C.autoShadowDflt?"auto":"none"},editType:T};return C.autoSize&&(w.size.dflt="auto"),C.autoColor&&(w.color.dflt="auto"),C.arrayOk&&(w.family.arrayOk=!0,w.weight.arrayOk=!0,w.style.arrayOk=!0,C.noFontVariant||(w.variant.arrayOk=!0),C.noFontTextcase||(w.textcase.arrayOk=!0),C.noFontLineposition||(w.lineposition.arrayOk=!0),C.noFontShadow||(w.shadow.arrayOk=!0),w.size.arrayOk=!0,w.color.arrayOk=!0),w}},16672:function(F){"use strict";F.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(F,C){"use strict";C.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},C.axesNames=["lonaxis","lataxis"],C.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},C.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},C.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},C.clipPad=.001,C.precision=.1,C.landColor="#F0DC82",C.waterColor="#3399FF",C.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},C.sphereSVG={type:"Sphere"},C.fillLayers={ocean:1,land:1,lakes:1},C.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},C.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],C.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],C.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(F,C,e){"use strict";var T=e(33428),k=e(83356),a=k.geoPath,w=k.geoDistance,b=e(87108),f=e(24040),s=e(3400),t=s.strTranslate,i=e(76308),r=e(43616),n=e(93024),o=e(7316),l=e(54460),c=e(19280).getAutoRange,d=e(86476),u=e(22676).prepSelect,x=e(22676).clearOutline,p=e(22676).selectOnClick,g=e(79248),m=e(79552),y=e(27144),v=e(59972),_=e(55712).NO;function h(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=h.prototype;function A(E,P){var I=m.clipPad,D=E[0]+I,z=E[1]-I,V=P[0]+I,O=P[1]-I;D>0&&z<0&&(z+=360);var j=(z-D)/4;return{type:"Polygon",coordinates:[[[D,V],[D,O],[D+j,O],[D+2*j,O],[D+3*j,O],[z,O],[z,V],[z-j,V],[z-2*j,V],[z-3*j,V],[D,V]]]}}F.exports=function(E){return new h(E)},S.plot=function(E,P,I,D){var z=this;if(D)return z.update(E,P,!0);z._geoCalcData=E,z._fullLayout=P;var V=P[this.id],O=[],j=!1;for(var Y in m.layerNameToAdjective)if(Y!=="frame"&&V["show"+Y]){j=!0;break}for(var B=!1,U=0;U<E.length;U++){var q=E[0][0].trace;q._geo=z,q.locationmode&&(j=!0);var te=q.marker;if(te){var ee=te.angle,Q=te.angleref;(ee||Q==="north"||Q==="previous")&&(B=!0)}}if(this._hasMarkerAngles=B,j){var J=v.getTopojsonName(V);z.topojson!==null&&J===z.topojsonName||(z.topojsonName=J,PlotlyGeoAssets.topojson[z.topojsonName]===void 0&&O.push(z.fetchTopojson()))}O=O.concat(y.fetchTraceGeoData(E)),I.push(new Promise(function(K,X){Promise.all(O).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,P),K()}).catch(X)}))},S.fetchTopojson=function(){var E=this,P=v.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(I,D){T.json(P,function(z,V){if(z)return z.status===404?D(new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=V,I()})})},S.update=function(E,P,I){var D=P[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var V=E[z],O=V[0].trace;O.type==="choropleth"&&(this.hasChoropleth=!0),O.visible===!0&&O._length>0&&O._module.calcGeoJSON(V,P)}if(!I){if(this.updateProjection(E,P))return;this.viewInitial&&this.scope===D.scope||this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(P,D),this.updateDims(P,D),this.updateFx(P,D),o.generalUpdatePerTraceModule(this.graphDiv,this,E,D);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this._render()},S.updateProjection=function(E,P){var I=this.graphDiv,D=P[this.id],z=P._size,V=D.domain,O=D.projection,j=D.lonaxis,Y=D.lataxis,B=j._ax,U=Y._ax,q=this.projection=function(re){var fe=re.projection,Se=fe.type,be=m.projNames[Se];be="geo"+s.titleCase(be);for(var we=(k[be]||b[be])(),Me=re._isSatellite?180*Math.acos(1/fe.distance)/Math.PI:re._isClipped?m.lonaxisSpan[Se]/2:null,Pe=["center","rotate","parallels","clipExtent"],De=function(Ae){return Ae?we:[]},he=0;he<Pe.length;he++){var _e=Pe[he];typeof we[_e]!="function"&&(we[_e]=De)}return we.isLonLatOverEdges=function(Ae){if(we(Ae)===null)return!0;if(Me){var Oe=we.rotate();return w(Ae,[-Oe[0],-Oe[1]])>Me*Math.PI/180}return!1},we.getPath=function(){return a().projection(we)},we.getBounds=function(Ae){return we.getPath().bounds(Ae)},we.precision(m.precision),re._isSatellite&&we.tilt(fe.tilt).distance(fe.distance),Me&&we.clipAngle(Me-m.clipPad),we}(D),te=[[z.l+z.w*V.x[0],z.t+z.h*(1-V.y[1])],[z.l+z.w*V.x[1],z.t+z.h*(1-V.y[0])]],ee=D.center||{},Q=O.rotation||{},J=j.range||[],K=Y.range||[];if(D.fitbounds){B._length=te[1][0]-te[0][0],U._length=te[1][1]-te[0][1],B.range=c(I,B),U.range=c(I,U);var X=(B.range[0]+B.range[1])/2,ie=(U.range[0]+U.range[1])/2;if(D._isScoped)ee={lon:X,lat:ie};else if(D._isClipped){ee={lon:X,lat:ie},Q={lon:X,lat:ie,roll:Q.roll};var se=O.type,ae=m.lonaxisSpan[se]/2||180,ue=m.lataxisSpan[se]/2||90;J=[X-ae,X+ae],K=[ie-ue,ie+ue]}else ee={lon:X,lat:ie},Q={lon:X,lat:Q.lat,roll:Q.roll}}q.center([ee.lon-Q.lon,ee.lat-Q.lat]).rotate([-Q.lon,-Q.lat,Q.roll]).parallels(O.parallels);var ve=A(J,K);q.fitExtent(te,ve);var ye=this.bounds=q.getBounds(ve),pe=this.fitScale=q.scale(),de=q.translate();if(D.fitbounds){var me=q.getBounds(A(B.range,U.range)),ke=Math.min((ye[1][0]-ye[0][0])/(me[1][0]-me[0][0]),(ye[1][1]-ye[0][1])/(me[1][1]-me[0][1]));isFinite(ke)?q.scale(ke*pe):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(O.scale*pe);var Ce=this.midPt=[(ye[0][0]+ye[1][0])/2,(ye[0][1]+ye[1][1])/2];if(q.translate([de[0]+(Ce[0]-de[0]),de[1]+(Ce[1]-de[1])]).clipExtent(ye),D._isAlbersUsa){var ge=q([ee.lon,ee.lat]),oe=q.translate();q.translate([oe[0]-(ge[0]-oe[0]),oe[1]-(ge[1]-oe[1])])}},S.updateBaseLayers=function(E,P){var I=this,D=I.topojson,z=I.layers,V=I.basePaths;function O(q){return q==="lonaxis"||q==="lataxis"}function j(q){return!!m.lineLayers[q]}function Y(q){return!!m.fillLayers[q]}var B=(this.hasChoropleth?m.layersForChoropleth:m.layers).filter(function(q){return j(q)||Y(q)?P["show"+q]:!O(q)||P[q].showgrid}),U=I.framework.selectAll(".layer").data(B,String);U.exit().each(function(q){delete z[q],delete V[q],T.select(this).remove()}),U.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var te=z[q]=T.select(this);q==="bg"?I.bgRect=te.append("rect").style("pointer-events","all"):O(q)?V[q]=te.append("path").style("fill","none"):q==="backplot"?te.append("g").classed("choroplethlayer",!0):q==="frontplot"?te.append("g").classed("scatterlayer",!0):j(q)?V[q]=te.append("path").style("fill","none").style("stroke-miterlimit",2):Y(q)&&(V[q]=te.append("path").style("stroke","none"))}),U.order(),U.each(function(q){var te=V[q],ee=m.layerNameToAdjective[q];q==="frame"?te.datum(m.sphereSVG):j(q)||Y(q)?te.datum(_(D,D.objects[q])):O(q)&&te.datum(function(Q,J,K){var X,ie,se,ae=J[Q],ue=m.scopeDefaults[J.scope];Q==="lonaxis"?(X=ue.lonaxisRange,ie=ue.lataxisRange,se=function(oe,re){return[oe,re]}):Q==="lataxis"&&(X=ue.lataxisRange,ie=ue.lonaxisRange,se=function(oe,re){return[re,oe]});var ve={type:"linear",range:[X[0],X[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};l.setConvert(ve,K);var ye=l.calcTicks(ve);J.isScoped||Q!=="lonaxis"||ye.pop();for(var pe=ye.length,de=new Array(pe),me=0;me<pe;me++)for(var ke=ye[me].x,Ce=de[me]=[],ge=ie[0];ge<ie[1]+2.5;ge+=2.5)Ce.push(se(ke,ge));return{type:"MultiLineString",coordinates:de}}(q,P,E)).call(i.stroke,P[q].gridcolor).call(r.dashLine,P[q].griddash,P[q].gridwidth),j(q)?te.call(i.stroke,P[ee+"color"]).call(r.dashLine,"",P[ee+"width"]):Y(q)&&te.call(i.fill,P[ee+"color"])})},S.updateDims=function(E,P){var I=this.bounds,D=(P.framewidth||0)/2,z=I[0][0]-D,V=I[0][1]-D,O=I[1][0]-z+D,j=I[1][1]-V+D;r.setRect(this.clipRect,z,V,O,j),this.bgRect.call(r.setRect,z,V,O,j).call(i.fill,P.bgcolor),this.xaxis._offset=z,this.xaxis._length=O,this.yaxis._offset=V,this.yaxis._length=j},S.updateFx=function(E,P){var I=this,D=I.graphDiv,z=I.bgRect,V=E.dragmode,O=E.clickmode;if(!I.isStatic){var j={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:function(B,U){U.isRect?(B.range={})[I.id]=[Y([U.xmin,U.ymin]),Y([U.xmax,U.ymax])]:(B.lassoPoints={})[I.id]=U.map(Y)}},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(B){B===2&&x(D)}};V==="pan"?(z.node().onmousedown=null,z.call(g(I,P)),z.on("dblclick.zoom",function(){var B=I.viewInitial,U={};for(var q in B)U[I.id+"."+q]=B[q];f.call("_guiRelayout",D,U),D.emit("plotly_doubleclick",null)}),D._context._scrollZoom.geo||z.on("wheel.zoom",null)):V!=="select"&&V!=="lasso"||(z.on(".zoom",null),j.prepFn=function(B,U,q){u(B,U,q,j,V)},d.init(j)),z.on("mousemove",function(){var B=I.projection.invert(s.getPositionFromD3Event());if(!B)return d.unhover(D,T.event);I.xaxis.p2c=function(){return B[0]},I.yaxis.p2c=function(){return B[1]},n.hover(D,T.event,I.id)}),z.on("mouseout",function(){D._dragging||d.unhover(D,T.event)}),z.on("click",function(){V!=="select"&&V!=="lasso"&&(O.indexOf("select")>-1&&p(T.event,D,[I.xaxis],[I.yaxis],I.id,j),O.indexOf("event")>-1&&n.click(D,T.event))})}function Y(B){return I.projection.invert([B[0]+I.xaxis._offset,B[1]+I.yaxis._offset])}},S.makeFramework=function(){var E=this,P=E.graphDiv,I=P._fullLayout,D="clip"+I._uid+E.id;E.clipDef=I._clips.append("clipPath").attr("id",D),E.clipRect=E.clipDef.append("rect"),E.framework=T.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,D,P),E.project=function(z){var V=E.projection(z);return V?[V[0]-E.xaxis._offset,V[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(E.mockAxis,I)},S.saveViewInitial=function(E){var P,I=E.center||{},D=E.projection,z=D.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":D.scale},P=E._isScoped?{"center.lon":I.lon,"center.lat":I.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":I.lon,"center.lat":I.lat,"projection.rotation.lon":z.lon},s.extendFlat(this.viewInitial,P)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,P=this.projection,I=P.getPath();function D(V){var O=P(V.lonlat);return O?t(O[0],O[1]):null}function z(V){return P.isLonLatOverEdges(V.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",I);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(V){return I(V.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",D)}},10816:function(F,C,e){"use strict";var T=e(84888).KY,k=e(3400).counterRegex,a=e(43520),w="geo",b=k(w),f={};f[w]={valType:"subplotid",dflt:w,editType:"calc"},F.exports={attr:w,name:w,idRoot:w,idRegex:b,attrRegex:b,attributes:f,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(s){for(var t=s._fullLayout,i=s.calcdata,r=t._subplots[w],n=0;n<r.length;n++){var o=r[n],l=T(i,w,o),c=t[o]._subplot;c||(c=a({id:o,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[o]._subplot=c),c.plot(l,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,i=t._subplots[w],r=0;r<i.length;r++){var n=t[i[r]];n._subplot.updateFx(t,n)}},clean:function(s,t,i,r){for(var n=r._subplots[w]||[],o=0;o<n.length;o++){var l=n[o],c=r[l]._subplot;!t[l]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},40384:function(F,C,e){"use strict";var T=e(22548),k=e(86968).u,a=e(98192).u,w=e(79552),b=e(67824).overrideAll,f=e(95376),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:T.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:a};(F.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:f(w.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:f(w.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:T.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:w.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:w.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:w.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:w.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:T.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:T.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:T.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:T.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(F,C,e){"use strict";var T=e(3400),k=e(168),a=e(84888).op,w=e(79552),b=e(40384),f=w.axesNames;function s(t,i,r,n){var o=a(n.fullData,"geo",n.id).map(function(Q){return Q._expandedIndex}),l=r("resolution"),c=r("scope"),d=w.scopeDefaults[c],u=r("projection.type",d.projType),x=i._isAlbersUsa=u==="albers usa";x&&(c=i.scope="usa");var p=i._isScoped=c!=="world",g=i._isSatellite=u==="satellite",m=i._isConic=u.indexOf("conic")!==-1||u==="albers",y=i._isClipped=!!w.lonaxisSpan[u];if(t.visible===!1){var v=T.extendDeep({},i._template);v.showcoastlines=!1,v.showcountries=!1,v.showframe=!1,v.showlakes=!1,v.showland=!1,v.showocean=!1,v.showrivers=!1,v.showsubunits=!1,v.lonaxis&&(v.lonaxis.showgrid=!1),v.lataxis&&(v.lataxis.showgrid=!1),i._template=v}for(var _=r("visible"),h=0;h<f.length;h++){var S,A=f[h],E=[30,10][h];if(p)S=d[A+"Range"];else{var P=w[A+"Span"],I=(P[u]||P["*"])/2,D=r("projection.rotation."+A.substr(0,3),d.projRotate[h]);S=[D-I,D+I]}var z=r(A+".range",S);r(A+".tick0"),r(A+".dtick",E),r(A+".showgrid",!!_&&void 0)&&(r(A+".gridcolor"),r(A+".gridwidth"),r(A+".griddash")),i[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:o,setScale:T.identity,c2l:T.identity,r2l:T.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var V=i.lonaxis.range,O=i.lataxis.range,j=V[0],Y=V[1];j>0&&Y<0&&(Y+=360);var B,U,q,te=(j+Y)/2;if(!x){var ee=p?d.projRotate:[te,0,0];B=r("projection.rotation.lon",ee[0]),r("projection.rotation.lat",ee[1]),r("projection.rotation.roll",ee[2]),r("showcoastlines",!p&&_)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!_&&void 0)&&r("oceancolor")}x?(U=-96.6,q=38.7):(U=p?te:B,q=(O[0]+O[1])/2),r("center.lon",U),r("center.lat",q),g&&(r("projection.tilt"),r("projection.distance")),m&&r("projection.parallels",d.projParallels||[0,60]),r("projection.scale"),r("showland",!!_&&void 0)&&r("landcolor"),r("showlakes",!!_&&void 0)&&r("lakecolor"),r("showrivers",!!_&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",p&&c!=="usa"&&_)&&(r("countrycolor"),r("countrywidth")),(c==="usa"||c==="north america"&&l===50)&&(r("showsubunits",_),r("subunitcolor"),r("subunitwidth")),p||r("showframe",_)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete i.projection.scale,p?(delete i.center.lon,delete i.center.lat):y?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}F.exports=function(t,i,r){k(t,i,r,{type:"geo",attributes:b,handleDefaults:s,fullData:r,partition:"y"})}},79248:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(24040),w=Math.PI/180,b=180/Math.PI,f={cursor:"pointer"},s={cursor:"auto"};function t(p,g){return T.behavior.zoom().translate(g.translate()).scale(g.scale())}function i(p,g,m){var y=p.id,v=p.graphDiv,_=v.layout,h=_[y],S=v._fullLayout,A=S[y],E={},P={};function I(D,z){E[y+"."+D]=k.nestedProperty(h,D).get(),a.call("_storeDirectGUIEdit",_,S._preGUI,E);var V=k.nestedProperty(A,D);V.get()!==z&&(V.set(z),k.nestedProperty(h,D).set(z),P[y+"."+D]=z)}m(I),I("projection.scale",g.scale()/p.fitScale),I("fitbounds",!1),v.emit("plotly_relayout",P)}function r(p,g){var m=t(0,g);function y(v){var _=g.invert(p.midPt);v("center.lon",_[0]),v("center.lat",_[1])}return m.on("zoomstart",function(){T.select(this).style(f)}).on("zoom",function(){g.scale(T.event.scale).translate(T.event.translate),p.render(!0);var v=g.invert(p.midPt);p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/p.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",function(){T.select(this).style(s),i(p,g,y)}),m}function n(p,g){var m,y,v,_,h,S,A,E,P,I=t(0,g);function D(V){return g.invert(V)}function z(V){var O=g.rotate(),j=g.invert(p.midPt);V("projection.rotation.lon",-O[0]),V("center.lon",j[0]),V("center.lat",j[1])}return I.on("zoomstart",function(){T.select(this).style(f),m=T.mouse(this),y=g.rotate(),v=g.translate(),_=y,h=D(m)}).on("zoom",function(){if(S=T.mouse(this),function(j){var Y=D(j);if(!Y)return!0;var B=g(Y);return Math.abs(B[0]-j[0])>2||Math.abs(B[1]-j[1])>2}(m))return I.scale(g.scale()),void I.translate(g.translate());g.scale(T.event.scale),g.translate([v[0],T.event.translate[1]]),h?D(S)&&(E=D(S),A=[_[0]+(E[0]-h[0]),y[1],y[2]],g.rotate(A),_=A):h=D(m=S),P=!0,p.render(!0);var V=g.rotate(),O=g.invert(p.midPt);p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/p.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1],"geo.projection.rotation.lon":-V[0]})}).on("zoomend",function(){T.select(this).style(s),P&&i(p,g,z)}),I}function o(p,g){var m,y={r:g.rotate(),k:g.scale()},v=t(0,g),_=function(E){for(var P=0,I=arguments.length,D=[];++P<I;)D.push(arguments[P]);var z=T.dispatch.apply(null,D);return z.of=function(V,O){return function(j){var Y;try{Y=j.sourceEvent=T.event,j.target=E,T.event=j,z[j.type].apply(V,O)}finally{T.event=Y}}},z}(v,"zoomstart","zoom","zoomend"),h=0,S=v.on;function A(E){var P=g.rotate();E("projection.rotation.lon",-P[0]),E("projection.rotation.lat",-P[1])}return v.on("zoomstart",function(){T.select(this).style(f);var E,P,I,D,z,V,O,j,Y,B,U,q=T.mouse(this),te=g.rotate(),ee=te,Q=g.translate(),J=(P=.5*(E=te)[0]*w,I=.5*E[1]*w,D=.5*E[2]*w,z=Math.sin(P),V=Math.cos(P),O=Math.sin(I),j=Math.cos(I),Y=Math.sin(D),[V*j*(B=Math.cos(D))+z*O*Y,z*j*B-V*O*Y,V*O*B+z*j*Y,V*j*Y-z*O*B]);m=l(g,q),S.call(v,"zoom",function(){var K,X,ie,se,ae,ue,ve,ye,pe,de,me=T.mouse(this);if(g.scale(y.k=T.event.scale),m){if(l(g,me)){g.rotate(te).translate(Q);var ke=l(g,me),Ce=function(re,fe){if(re&&fe){var Se=function(Pe,De){return[Pe[1]*De[2]-Pe[2]*De[1],Pe[2]*De[0]-Pe[0]*De[2],Pe[0]*De[1]-Pe[1]*De[0]]}(re,fe),be=Math.sqrt(x(Se,Se)),we=.5*Math.acos(Math.max(-1,Math.min(1,x(re,fe)))),Me=Math.sin(we)/be;return be&&[Math.cos(we),Se[2]*Me,-Se[1]*Me,Se[0]*Me]}}(m,ke),ge=function(re){return[Math.atan2(2*(re[0]*re[1]+re[2]*re[3]),1-2*(re[1]*re[1]+re[2]*re[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(re[0]*re[2]-re[3]*re[1]))))*b,Math.atan2(2*(re[0]*re[3]+re[1]*re[2]),1-2*(re[2]*re[2]+re[3]*re[3]))*b]}((ie=(K=J)[0],se=K[1],ae=K[2],ue=K[3],[ie*(ve=(X=Ce)[0])-se*(ye=X[1])-ae*(pe=X[2])-ue*(de=X[3]),ie*ye+se*ve+ae*de-ue*pe,ie*pe-se*de+ae*ve+ue*ye,ie*de+se*pe-ae*ye+ue*ve])),oe=y.r=function(re,fe,Se){var be=u(fe,2,re[0]);be=u(be,1,re[1]),be=u(be,0,re[2]-Se[2]);var we,Me,Pe=fe[0],De=fe[1],he=fe[2],_e=be[0],Ae=be[1],Oe=be[2],Ee=Math.atan2(De,Pe)*b,Be=Math.sqrt(Pe*Pe+De*De);Math.abs(Ae)>Be?(Me=(Ae>0?90:-90)-Ee,we=0):(Me=Math.asin(Ae/Be)*b-Ee,we=Math.sqrt(Be*Be-Ae*Ae));var Ve=180-Me-2*Ee,Ze=(Math.atan2(Oe,_e)-Math.atan2(he,we))*b,it=(Math.atan2(Oe,_e)-Math.atan2(he,-we))*b;return c(Se[0],Se[1],Me,Ze)<=c(Se[0],Se[1],Ve,it)?[Me,Ze,Se[2]]:[Ve,it,Se[2]]}(ge,m,ee);isFinite(oe[0])&&isFinite(oe[1])&&isFinite(oe[2])||(oe=ee),g.rotate(oe),ee=oe}}else m=l(g,q=me);_.of(this,arguments)({type:"zoom"})}),U=_.of(this,arguments),h++||U({type:"zoomstart"})}).on("zoomend",function(){var E;T.select(this).style(s),S.call(v,"zoom",null),E=_.of(this,arguments),--h||E({type:"zoomend"}),i(p,g,A)}).on("zoom.redraw",function(){p.render(!0);var E=g.rotate();p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/p.fitScale,"geo.projection.rotation.lon":-E[0],"geo.projection.rotation.lat":-E[1]})}),T.rebind(v,_,"on")}function l(p,g){var m=p.invert(g);return m&&isFinite(m[0])&&isFinite(m[1])&&function(y){var v=y[0]*w,_=y[1]*w,h=Math.cos(_);return[h*Math.cos(v),h*Math.sin(v),Math.sin(_)]}(m)}function c(p,g,m,y){var v=d(m-p),_=d(y-g);return Math.sqrt(v*v+_*_)}function d(p){return(p%360+540)%360-180}function u(p,g,m){var y=m*w,v=p.slice(),_=g===0?1:0,h=g===2?1:2,S=Math.cos(y),A=Math.sin(y);return v[_]=p[_]*S-p[h]*A,v[h]=p[h]*S+p[_]*A,v}function x(p,g){for(var m=0,y=0,v=p.length;y<v;++y)m+=p[y]*g[y];return m}F.exports=function(p,g){var m=p.projection;return(g._isScoped?r:g._isClipped?o:n)(p,m)}},84888:function(F,C,e){"use strict";var T=e(24040),k=e(33816).SUBPLOT_PATTERN;C.KY=function(a,w,b){var f=T.subplotsRegistry[w];if(!f)return[];for(var s=f.attr,t=[],i=0;i<a.length;i++){var r=a[i];r[0].trace[s]===b&&t.push(r)}return t},C._M=function(a,w,b){var f,s=[],t=[];if(!(f=typeof w=="string"?T.getModule(w).plot:typeof w=="function"?w:w.plot))return[s,a];for(var i=b,r=0;r<a.length;r++){var n=a[r],o=n[0].trace,l=o.zorder!==void 0;o.visible===!0&&o._length!==0&&(!o._module||o._module.plot!==f||l&&o.zorder!==i?t.push(n):s.push(n))}return[s,t]},C.op=function(a,w,b){if(!T.subplotsRegistry[w])return[];var f,s,t,i=T.subplotsRegistry[w].attr,r=[];if(w==="gl2d"){var n=b.match(k);s="x"+n[1],t="y"+n[2]}for(var o=0;o<a.length;o++)f=a[o],w==="gl2d"&&T.traceIs(f,"gl2d")?f[i[0]]===s&&f[i[1]]===t&&r.push(f):f[i]===b&&r.push(f);return r}},2428:function(F,C,e){"use strict";var T=e(62644),k=e(97264),a=e(29128),w=e(33816),b=e(89184);function f(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}F.exports=function(s){var t=s.mouseContainer,i=s.glplot,r=new f(t,i);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function o(l,c,d){var u,x,p=s.calcDataBox(),g=i.viewBox,m=r.lastPos[0],y=r.lastPos[1],v=w.MINDRAG*i.pixelRatio,_=w.MINZOOM*i.pixelRatio;function h(D,z,V){var O=Math.min(z,V),j=Math.max(z,V);O!==j?(p[D]=O,p[D+2]=j,r.dataBox=p,s.setRanges(p)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(c*=i.pixelRatio,d*=i.pixelRatio,d=g[3]-g[1]-d,s.fullLayout.dragmode){case"zoom":if(l){var S=c/(g[2]-g[0])*(p[2]-p[0])+p[0],A=d/(g[3]-g[1])*(p[3]-p[1])+p[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=A,r.dragStart[0]=c,r.dragStart[1]=d),r.boxEnd[0]=S,r.boxEnd[1]=A,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-c)<_,P=Math.abs(r.dragStart[1]-d)<_;if(!function(){for(var D=s.graphDiv._fullLayout._axisConstraintGroups,z=s.xaxis._id,V=s.yaxis._id,O=0;O<D.length;O++)if(D[O][z]!==-1){if(D[O][V]!==-1)return!0;break}return!1}()||E&&P)E&&(r.boxEnd[0]=r.boxStart[0]),P&&(r.boxEnd[1]=r.boxStart[1]);else{u=r.boxEnd[0]-r.boxStart[0],x=r.boxEnd[1]-r.boxStart[1];var I=(p[3]-p[1])/(p[2]-p[0]);Math.abs(u*I)>Math.abs(x)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(u)*I*(x>=0?1:-1),r.boxEnd[1]<p[1]?(r.boxEnd[1]=p[1],r.boxEnd[0]=r.boxStart[0]+(p[1]-r.boxStart[1])/Math.abs(I)):r.boxEnd[1]>p[3]&&(r.boxEnd[1]=p[3],r.boxEnd[0]=r.boxStart[0]+(p[3]-r.boxStart[1])/Math.abs(I))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(x)/I*(u>=0?1:-1),r.boxEnd[0]<p[0]?(r.boxEnd[0]=p[0],r.boxEnd[1]=r.boxStart[1]+(p[0]-r.boxStart[0])*Math.abs(I)):r.boxEnd[0]>p[2]&&(r.boxEnd[0]=p[2],r.boxEnd[1]=r.boxStart[1]+(p[2]-r.boxStart[0])*Math.abs(I)))}}else r.boxEnabled?(u=r.boxStart[0]!==r.boxEnd[0],x=r.boxStart[1]!==r.boxEnd[1],u||x?(u&&(h(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),x&&(h(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,l?(r.panning||(r.dragStart[0]=c,r.dragStart[1]=d),Math.abs(r.dragStart[0]-c)<v&&(c=r.dragStart[0]),Math.abs(r.dragStart[1]-d)<v&&(d=r.dragStart[1]),u=(m-c)*(p[2]-p[0])/(i.viewBox[2]-i.viewBox[0]),x=(y-d)*(p[3]-p[1])/(i.viewBox[3]-i.viewBox[1]),p[0]+=u,p[2]+=u,p[1]+=x,p[3]+=x,s.setRanges(p),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=c,r.lastPos[1]=d}return r.mouseListener=T(t,o),t.addEventListener("touchstart",function(l){var c=a(l.changedTouches[0],t);o(0,c[0],c[1]),o(1,c[0],c[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var c=a(l.changedTouches[0],t);o(1,c[0],c[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(l){o(0,r.lastPos[0],r.lastPos[1]),l.preventDefault()},!!b&&{passive:!1}),r.wheelListener=k(t,function(l,c){if(!s.scrollZoom)return!1;var d=s.calcDataBox(),u=i.viewBox,x=r.lastPos[0],p=r.lastPos[1],g=Math.exp(5*c/(u[3]-u[1])),m=x/(u[2]-u[0])*(d[2]-d[0])+d[0],y=p/(u[3]-u[1])*(d[3]-d[1])+d[1];return d[0]=(d[0]-m)*g+m,d[2]=(d[2]-m)*g+m,d[1]=(d[1]-y)*g+y,d[3]=(d[3]-y)*g+y,s.setRanges(d),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},92568:function(F,C,e){"use strict";var T=e(54460),k=e(43080);function a(f){this.scene=f,this.gl=f.gl,this.pixelRatio=f.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var w=a.prototype,b=["xaxis","yaxis"];w.merge=function(f){var s,t,i,r,n,o,l,c,d,u,x;for(this.titleEnable=!1,this.backgroundColor=k(f.plot_bgcolor),u=0;u<2;++u){var p=(s=b[u]).charAt(0);for(i=(t=f[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[p]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[u+x]=!1,this.labels[u+x]=i,this.labelColor[u+x]=k(t.title.font.color),this.labelFont[u+x]=t.title.font.family,this.labelSize[u+x]=t.title.font.size,this.labelPad[u+x]=this.getLabelPad(s,t),this.tickEnable[u+x]=!1,this.tickColor[u+x]=k((t.tickfont||{}).color),this.tickAngle[u+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[u+x]=this.getTickPad(t),this.tickMarkLength[u+x]=0,this.tickMarkWidth[u+x]=t.tickwidth||0,this.tickMarkColor[u+x]=k(t.tickcolor),this.borderLineEnable[u+x]=!1,this.borderLineColor[u+x]=k(t.linecolor),this.borderLineWidth[u+x]=t.linewidth||0;l=this.hasSharedAxis(t),n=this.hasAxisInDfltPos(s,t)&&!l,o=this.hasAxisInAltrPos(s,t)&&!l,r=t.mirror||!1,c=l?String(r).indexOf("all")!==-1:!!r,d=l?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[u]=!0:o&&(this.labelEnable[u+2]=!0),n?this.tickEnable[u]=t.showticklabels:o&&(this.tickEnable[u+2]=t.showticklabels),(n||c)&&(this.borderLineEnable[u]=t.showline),(o||c)&&(this.borderLineEnable[u+2]=t.showline),(n||d)&&(this.tickMarkLength[u]=this.getTickMarkLength(t)),(o||d)&&(this.tickMarkLength[u+2]=this.getTickMarkLength(t)),this.gridLineEnable[u]=t.showgrid,this.gridLineColor[u]=k(t.gridcolor),this.gridLineWidth[u]=t.gridwidth,this.zeroLineEnable[u]=t.zeroline,this.zeroLineColor[u]=k(t.zerolinecolor),this.zeroLineWidth[u]=t.zerolinewidth}},w.hasSharedAxis=function(f){var s=this.scene,t=s.fullLayout._subplots.gl2d;return T.findSubplotsWithAxis(t,f).indexOf(s.id)!==0},w.hasAxisInDfltPos=function(f,s){var t=s.side;return f==="xaxis"?t==="bottom":f==="yaxis"?t==="left":void 0},w.hasAxisInAltrPos=function(f,s){var t=s.side;return f==="xaxis"?t==="top":f==="yaxis"?t==="right":void 0},w.getLabelPad=function(f,s){var t=1.5,i=s.title.font.size,r=s.showticklabels;return f==="xaxis"?s.side==="top"?i*(t+(r?1:0))-10:i*(t+(r?.5:0))-10:f==="yaxis"?s.side==="right"?10+i*(t+(r?1:.5)):10+i*(t+(r?.5:0)):void 0},w.getTickPad=function(f){return f.ticks==="outside"?10+f.ticklen:15},w.getTickMarkLength=function(f){if(!f.ticks)return 0;var s=f.ticklen;return f.ticks==="inside"?-s:s},F.exports=function(f){return new a(f)}},39952:function(F,C,e){"use strict";var T=e(67824).overrideAll,k=e(17188),a=e(64859),w=e(9616),b=e(33816),f=e(57952),s=e(65460),t=e(84888).op;C.name="gl2d",C.attr=["xaxis","yaxis"],C.idRoot=["x","y"],C.idRegex=b.idRegex,C.attrRegex=b.attrRegex,C.attributes=e(26720),C.supplyLayoutDefaults=function(i,r,n){r._has("cartesian")||f.supplyLayoutDefaults(i,r,n)},C.layoutAttrOverrides=T(f.layoutAttributes,"plot","from-root"),C.baseLayoutAttrOverrides=T({plot_bgcolor:a.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),C.plot=function(i){for(var r=i._fullLayout,n=i._fullData,o=r._subplots.gl2d,l=0;l<o.length;l++){var c=o[l],d=r._plots[c],u=t(n,"gl2d",c),x=d._scene2d;x===void 0&&(x=new k({id:c,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},r),d._scene2d=x),x.plot(u,i.calcdata,r,i.layout)}},C.clean=function(i,r,n,o){for(var l=o._subplots.gl2d||[],c=0;c<l.length;c++){var d=l[c],u=o._plots[d];u._scene2d&&t(i,"gl2d",d).length===0&&(u._scene2d.destroy(),delete o._plots[d])}f.clean.apply(this,arguments)},C.drawFramework=function(i){i._context.staticPlot||f.drawFramework(i)},C.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,o=0;o<n.length;o++){var l=r._plots[n[o]]._scene2d,c=l.toImage("png");r._glimages.append("svg:image").attr({xmlns:w.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},C.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,o=0;o<n.length;o++)r._plots[n[o]]._scene2d.updateFx(r.dragmode)}},17188:function(F,C,e){"use strict";var T,k,a=e(24040),w=e(54460),b=e(93024),f=e(67792).gl_plot2d,s=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),r=e(92568),n=e(2428),o=e(16576),l=e(71888),c=l.enforce,d=l.clean,u=e(19280).doAutoRange,x=e(72760),p=x.drawMode,g=x.selectMode,m=["xaxis","yaxis"],y=e(33816).SUBPLOT_PATTERN;function v(h,S){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=f(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}F.exports=v;var _=v.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(T=document.createElement("canvas"),k=i({canvas:T,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=T,this.gl=k}else{var h=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return o(this),void(this.stopped=!0);this.canvas=h,this.gl=S}var A=this.canvas;A.style.width="100%",A.style.height="100%",A.style.position="absolute",A.style.top="0px",A.style.left="0px",A.style["pointer-events"]="none",this.updateSize(A);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var I=this.container;I.appendChild(E),I.appendChild(P);var D=this;P.addEventListener("mouseout",function(){D.isMouseOver=!1,D.unhover()}),P.addEventListener("mouseover",function(){D.isMouseOver=!0})},_.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(T),this.updateSize(this.canvas);var S=this.glplot.gl,A=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var P=new Uint8Array(A*E*4);S.readPixels(0,0,A,E,S.RGBA,S.UNSIGNED_BYTE,P);for(var I=0,D=E-1;I<D;++I,--D)for(var z=0;z<A;++z)for(var V=0;V<4;++V){var O=P[4*(A*I+z)+V];P[4*(A*I+z)+V]=P[4*(A*D+z)+V],P[4*(A*D+z)+V]=O}var j=document.createElement("canvas");j.width=A,j.height=E;var Y,B=j.getContext("2d",{willReadFrequently:!0}),U=B.createImageData(A,E);switch(U.data.set(P),B.putImageData(U,0,0),h){case"jpeg":Y=j.toDataURL("image/jpeg");break;case"webp":Y=j.toDataURL("image/webp");break;default:Y=j.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(T),Y},_.updateSize=function(h){h||(h=this.canvas);var S=this.pixelRatio,A=this.fullLayout,E=A.width,P=A.height,I=0|Math.ceil(S*E),D=0|Math.ceil(S*P);return h.width===I&&h.height===D||(h.width=I,h.height=D),h},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[w.calcTicks(this.xaxis),w.calcTicks(this.yaxis)],S=0;S<2;++S)for(var A=0;A<h[S].length;++A)h[S][A].text=h[S][A].text+"";return h},_.updateRefs=function(h){this.fullLayout=h;var S=this.id.match(y),A="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[A],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var h=this.graphDiv,S=this.xaxis,A=this.yaxis,E=h.layout,P={},I=P[S._name+".range"]=S.range.slice(),D=P[A._name+".range"]=A.range.slice();P[S._name+".autorange"]=S.autorange,P[A._name+".autorange"]=A.autorange,a.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var z=E[S._name];z.range=I,z.autorange=S.autorange;var V=E[A._name];V.range=D,V.autorange=A.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},_.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(A,E){for(var P=0;P<2;++P){var I=A[P],D=E[P];if(I.length!==D.length)return!0;for(var z=0;z<I.length;++z)if(I[z].x!==D[z].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var h=this.graphDiv,S=this.fullLayout.annotations,A=0;A<S.length;A++){var E=S[A];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&a.getComponentMethod("annotations","drawOne")(h,A)}},_.destroy=function(){if(this.glplot){var h=this.traces;h&&Object.keys(h).map(function(S){h[S].dispose(),delete h[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(h,S,A){var E=this.glplot;this.updateRefs(A),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,S),this.updateFx(A.dragmode);var P=A.width,I=A.height;this.updateSize(this.canvas);var D=this.glplotOptions;D.merge(A),D.screenBox=[0,0,P,I];var z={_fullLayout:{_axisConstraintGroups:A._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:A._size}};d(z,this.xaxis),d(z,this.yaxis);var V,O,j=A._size,Y=this.xaxis.domain,B=this.yaxis.domain;for(D.viewBox=[j.l+Y[0]*j.w,j.b+B[0]*j.h,P-j.r-(1-Y[1])*j.w,I-j.t-(1-B[1])*j.h],this.mouseContainer.style.width=j.w*(Y[1]-Y[0])+"px",this.mouseContainer.style.height=j.h*(B[1]-B[0])+"px",this.mouseContainer.height=j.h*(B[1]-B[0]),this.mouseContainer.style.left=j.l+Y[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-B[1])*j.h+"px",O=0;O<2;++O)(V=this[m[O]])._length=D.viewBox[O+2]-D.viewBox[O],u(this.graphDiv,V),V.setScale();c(z),D.ticks=this.computeTickMarks(),D.dataBox=this.calcDataBox(),D.merge(A),E.update(D),this.glplot.draw()},_.calcDataBox=function(){var h=this.xaxis,S=this.yaxis,A=h.range,E=S.range,P=h.r2l,I=S.r2l;return[P(A[0]),I(E[0]),P(A[1]),I(E[1])]},_.setRanges=function(h){var S=this.xaxis,A=this.yaxis,E=S.l2r,P=A.l2r;S.range=[E(h[0]),E(h[2])],A.range=[P(h[1]),P(h[3])]},_.updateTraces=function(h,S){var A,E,P,I=Object.keys(this.traces);this.fullData=h;e:for(A=0;A<I.length;A++){var D=I[A],z=this.traces[D];for(E=0;E<h.length;E++)if((P=h[E]).uid===D&&P.type===z.type)continue e;z.dispose(),delete this.traces[D]}for(A=0;A<h.length;A++){P=h[A];var V=S[A],O=this.traces[P.uid];O?O.update(P,V):(O=P._module.plot(this,P,V),this.traces[P.uid]=O)}this.glplot.objects.sort(function(j,Y){return j._trace.index-Y._trace.index})},_.updateFx=function(h){g(h)||p(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=h==="pan"?"move":h==="zoom"?"crosshair":null},_.emitPointAction=function(h,S){for(var A,E=h.trace.uid,P=h.pointIndex,I=0;I<this.fullData.length;I++)this.fullData[I].uid===E&&(A=this.fullData[I]);var D={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:A.index,pointNumber:P,data:A._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(D,A,P),this.graphDiv.emit(S,{points:[D]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,S=this.camera,A=S.mouseListener,E=this.lastButtonState===1&&A.buttons===0,P=this.fullLayout;this.lastButtonState=A.buttons,this.cameraChanged();var I,D=A.x*h.pixelRatio,z=this.canvas.height-h.pixelRatio*A.y;if(S.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var V=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],O=0;O<2;O++)S.boxStart[O]===S.boxEnd[O]&&(V[O]=h.dataBox[O],V[O+2]=h.dataBox[O+2]);h.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var j=P._size,Y=this.xaxis.domain,B=this.yaxis.domain,U=(I=h.pick(D/h.pixelRatio+j.l+Y[0]*j.w,z/h.pixelRatio-(j.t+(1-B[1])*j.h)))&&I.object._trace.handlePick(I);if(U&&E&&this.emitPointAction(U,"plotly_click"),I&&I.object._trace.hoverinfo!=="skip"&&P.hovermode&&U&&(!this.lastPickResult||this.lastPickResult.traceUid!==U.trace.uid||this.lastPickResult.dataCoord[0]!==U.dataCoord[0]||this.lastPickResult.dataCoord[1]!==U.dataCoord[1])){var q=U;this.lastPickResult={traceUid:U.trace?U.trace.uid:null,dataCoord:U.dataCoord.slice()},this.spikes.update({center:I.dataCoord}),q.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(I.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(I.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(U,"plotly_hover");var te=this.fullData[q.trace.index]||{},ee=q.pointIndex,Q=b.castHoverinfo(te,P,ee);if(Q&&Q!=="all"){var J=Q.split("+");J.indexOf("x")===-1&&(q.traceCoord[0]=void 0),J.indexOf("y")===-1&&(q.traceCoord[1]=void 0),J.indexOf("z")===-1&&(q.traceCoord[2]=void 0),J.indexOf("text")===-1&&(q.textLabel=void 0),J.indexOf("name")===-1&&(q.name=void 0)}b.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:b.castHoverOption(te,ee,"bgcolor")||q.color,borderColor:b.castHoverOption(te,ee,"bordercolor"),fontFamily:b.castHoverOption(te,ee,"font.family"),fontSize:b.castHoverOption(te,ee,"font.size"),fontColor:b.castHoverOption(te,ee,"font.color"),nameLength:b.castHoverOption(te,ee,"namelength"),textAlign:b.castHoverOption(te,ee,"align")},{container:this.svgContainer,gd:this.graphDiv})}}I||this.unhover(),h.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(h,S){if(S!==void 0){var A=this[h];return w.tickText(A,A.c2l(S),"hover").text}}},12536:function(F,C,e){"use strict";var T=e(67824).overrideAll,k=e(65460),a=e(98432),w=e(84888).op,b=e(3400),f=e(9616),s="gl3d",t="scene";C.name=s,C.attr=t,C.idRoot=t,C.idRegex=C.attrRegex=b.counterRegex("scene"),C.attributes=e(6636),C.layoutAttributes=e(346),C.baseLayoutAttrOverrides=T({hoverlabel:k.hoverlabel},"plot","nested"),C.supplyLayoutDefaults=e(5208),C.plot=function(i){for(var r=i._fullLayout,n=i._fullData,o=r._subplots[s],l=0;l<o.length;l++){var c=o[l],d=w(n,s,c),u=r[c],x=u.camera,p=u._scene;p||(p=new a({id:c,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},r),u._scene=p),p.viewInitial||(p.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),p.plot(d,r,i.layout)}},C.clean=function(i,r,n,o){for(var l=o._subplots[s]||[],c=0;c<l.length;c++){var d=l[c];!r[d]&&o[d]._scene&&(o[d]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+d).remove())}},C.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots[s],o=r._size,l=0;l<n.length;l++){var c=r[n[l]],d=c.domain,u=c._scene,x=u.toImage("png");r._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":x,x:o.l+o.w*d.x[0],y:o.t+o.h*(1-d.y[1]),width:o.w*(d.x[1]-d.x[0]),height:o.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),u.destroy()}},C.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var r=i.substr(5);return r==="1"&&(r=""),t+r}},C.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots[s],o=0;o<n.length;o++)r[n[o]]._scene.updateFx(r.dragmode,r.hovermode)}},6636:function(F){"use strict";F.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(F,C,e){"use strict";var T=e(76308),k=e(94724),a=e(92880).extendFlat,w=e(67824).overrideAll;F.exports=w({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:T.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:a({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:a({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:a({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(F,C,e){"use strict";var T=e(49760).mix,k=e(3400),a=e(31780),w=e(86140),b=e(14944),f=e(28336),s=["xaxis","yaxis","zaxis"];F.exports=function(t,i,r){var n,o;function l(u,x){return k.coerce(n,o,w,u,x)}for(var c=0;c<s.length;c++){var d=s[c];n=t[d]||{},(o=a.newContainer(i,d))._id=d[0]+r.scene,o._name=d,b(n,o,l,r),f(n,o,l,{font:r.font,letter:d[0],data:r.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),l("gridcolor",T(o.color,r.bgColor,72.72727272727273).toRgbString()),l("title.text",d[0]),o.setScale=k.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",o.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},44728:function(F,C,e){"use strict";var T=e(43080),k=e(3400),a=["xaxis","yaxis","zaxis"];function w(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}w.prototype.merge=function(b,f){for(var s=this,t=0;t<3;++t){var i=f[a[t]];i.visible?(s.labels[t]=b._meta?k.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(s.labelColor[t]=T(i.title.font.color)),i.title.font.family&&(s.labelFont[t]=i.title.font.family),i.title.font.size&&(s.labelSize[t]=i.title.font.size),i.title.font.weight&&(s.labelFontWeight[t]=i.title.font.weight),i.title.font.style&&(s.labelFontStyle[t]=i.title.font.style),i.title.font.variant&&(s.labelFontVariant[t]=i.title.font.variant)),"showline"in i&&(s.lineEnable[t]=i.showline),"linecolor"in i&&(s.lineColor[t]=T(i.linecolor)),"linewidth"in i&&(s.lineWidth[t]=i.linewidth),"showgrid"in i&&(s.gridEnable[t]=i.showgrid),"gridcolor"in i&&(s.gridColor[t]=T(i.gridcolor)),"gridwidth"in i&&(s.gridWidth[t]=i.gridwidth),i.type==="log"?s.zeroEnable[t]=!1:"zeroline"in i&&(s.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(s.zeroLineColor[t]=T(i.zerolinecolor)),"zerolinewidth"in i&&(s.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in i&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(s.lineTickColor[t]=T(i.tickcolor)),"tickwidth"in i&&(s.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(s.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(s.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(s.tickColor[t]=T(i.tickfont.color)),i.tickfont.family&&(s.tickFont[t]=i.tickfont.family),i.tickfont.size&&(s.tickSize[t]=i.tickfont.size),i.tickfont.weight&&(s.tickFontWeight[t]=i.tickfont.weight),i.tickfont.style&&(s.tickFontStyle[t]=i.tickfont.style),i.tickfont.variant&&(s.tickFontVariant[t]=i.tickfont.variant)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):i.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=T(i.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},F.exports=function(b,f){var s=new w;return s.merge(b,f),s}},5208:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(24040),w=e(168),b=e(64380),f=e(346),s=e(84888).op,t="gl3d";function i(r,n,o,l){for(var c=o("bgcolor"),d=k.combine(c,l.paper_bgcolor),u=["up","center","eye"],x=0;x<u.length;x++)o("camera."+u[x]+".x"),o("camera."+u[x]+".y"),o("camera."+u[x]+".z");o("camera.projection.type");var p=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),g=o("aspectmode",p?"manual":"auto");p||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},g==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var m=s(l.fullData,t,l.id);b(r,n,{font:l.font,scene:l.id,data:m,bgColor:d,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),a.getComponentMethod("annotations3d","handleDefaults")(r,n,l);var y=l.getDfltFromLayout("dragmode");if(y!==!1&&!y)if(y="orbit",r.camera&&r.camera.up){var v=r.camera.up.x,_=r.camera.up.y,h=r.camera.up.z;h!==0&&(v&&_&&h?h/Math.sqrt(v*v+_*_+h*h)>.999&&(y="turntable"):y="turntable")}else y="turntable";o("dragmode",y),o("hovermode",l.getDfltFromLayout("hovermode"))}F.exports=function(r,n,o){var l=n._basePlotModules.length>1;w(r,n,o,{type:t,attributes:f,handleDefaults:i,fullLayout:n,font:n.font,fullData:o,getDfltFromLayout:function(c){if(!l)return T.validate(r[c],f[c])?r[c]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},346:function(F,C,e){"use strict";var T=e(86140),k=e(86968).u,a=e(92880).extendFlat,w=e(3400).counterRegex;function b(f,s,t){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}F.exports={_arrayAttrRegexps:[w("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:a(b(0,0,1),{}),center:a(b(0,0,0),{}),eye:a(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:T,yaxis:T,zaxis:T,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(F,C,e){"use strict";var T=e(43080),k=["xaxis","yaxis","zaxis"];function a(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}a.prototype.merge=function(w){for(var b=0;b<3;++b){var f=w[k[b]];f.visible?(this.enabled[b]=f.showspikes,this.colors[b]=T(f.spikecolor),this.drawSides[b]=f.spikesides,this.lineWidth[b]=f.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},F.exports=function(w){var b=new a;return b.merge(w),b}},87152:function(F,C,e){"use strict";F.exports=function(b){for(var f=b.axesOptions,s=b.glplot.axesPixels,t=b.fullSceneLayout,i=[[],[],[]],r=0;r<3;++r){var n=t[a[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/b.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))i[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/b.dataScale[r],n.range[1]=s[r].hi/b.dataScale[r],n._m=1/(b.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var o=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var l=n.nticks||k.constrain(n._length/40,4,9);T.autoTicks(n,Math.abs(n.range[1]-n.range[0])/l)}for(var c=T.calcTicks(n,{msUTC:!0}),d=0;d<c.length;++d)c[d].x=c[d].x*b.dataScale[r],n.type==="date"&&(c[d].text=c[d].text.replace(/\<br\>/g," "));i[r]=c,n.tickmode=o}}for(f.ticks=i,r=0;r<3;++r)for(w[r]=.5*(b.glplot.bounds[0][r]+b.glplot.bounds[1][r]),d=0;d<2;++d)f.bounds[d][r]=b.glplot.bounds[d][r];b.contourLevels=function(u){for(var x=new Array(3),p=0;p<3;++p){for(var g=u[p],m=new Array(g.length),y=0;y<g.length;++y)m[y]=g[y].x;x[p]=m}return x}(i)};var T=e(54460),k=e(3400),a=["xaxis","yaxis","zaxis"],w=[0,0,0]},94424:function(F){"use strict";function C(e,T){var k,a,w=[0,0,0,0];for(k=0;k<4;++k)for(a=0;a<4;++a)w[a]+=e[4*k+a]*T[k];return w}F.exports=function(e,T){return C(e.projection,C(e.view,C(e.model,[T[0],T[1],T[2],1])))}},98432:function(F,C,e){"use strict";var T,k,a=e(67792).gl_plot3d,w=a.createCamera,b=a.createScene,f=e(5408),s=e(89184),t=e(24040),i=e(3400),r=i.preserveDrawingBuffer(),n=e(54460),o=e(93024),l=e(43080),c=e(16576),d=e(94424),u=e(44728),x=e(9020),p=e(87152),g=e(19280).applyAutorangeOptions,m=!1;function y(A,E){var P=document.createElement("div"),I=A.container;this.graphDiv=A.graphDiv;var D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none",P.appendChild(D),this.svgContainer=D,P.id=A.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",I.appendChild(P),this.fullLayout=E,this.id=A.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=u(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=P,this.staticMode=!!A.staticPlot,this.pixelRatio=this.pixelRatio||A.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var v=y.prototype;v.prepareOptions=function(){var A=this,E={canvas:A.canvas,gl:A.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:A.container,axes:A.axesOptions,spikes:A.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:A.camera,pixelRatio:A.pixelRatio};if(A.staticMode){if(!(k||(T=document.createElement("canvas"),k=f({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=T}return E};var _=!0;v.tryCreatePlot=function(){var A=this,E=A.prepareOptions(),P=!0;try{A.glplot=b(E)}catch{if(A.staticMode||!_||r)P=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=E.glOptions.preserveDrawingBuffer=!0,A.glplot=b(E)}catch{r=E.glOptions.preserveDrawingBuffer=!1,P=!1}}}return _=!1,P},v.initializeGLCamera=function(){var A=this,E=A.fullSceneLayout.camera,P=E.projection.type==="orthographic";A.camera=w(A.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:P,zoomMin:.01,zoomMax:100,mode:"orbit"})},v.initializeGLPlot=function(){var A=this;if(A.initializeGLCamera(),!A.tryCreatePlot())return c(A);A.traces={},A.make4thDimension();var E=A.graphDiv,P=E.layout,I=function(){var z={};return A.isCameraChanged(P)&&(z[A.id+".camera"]=A.getCamera()),A.isAspectChanged(P)&&(z[A.id+".aspectratio"]=A.glplot.getAspectratio(),P[A.id].aspectmode!=="manual"&&(A.fullSceneLayout.aspectmode=P[A.id].aspectmode=z[A.id+".aspectmode"]="manual")),z},D=function(z){if(z.fullSceneLayout.dragmode!==!1){var V=I();z.saveLayout(P),z.graphDiv.emit("plotly_relayout",V)}};return A.glplot.canvas&&(A.glplot.canvas.addEventListener("mouseup",function(){D(A)}),A.glplot.canvas.addEventListener("touchstart",function(){m=!0}),A.glplot.canvas.addEventListener("wheel",function(z){if(E._context._scrollZoom.gl3d){if(A.camera._ortho){var V=z.deltaX>z.deltaY?1.1:.9090909090909091,O=A.glplot.getAspectratio();A.glplot.setAspectratio({x:V*O.x,y:V*O.y,z:V*O.z})}D(A)}},!!s&&{passive:!1}),A.glplot.canvas.addEventListener("mousemove",function(){if(A.fullSceneLayout.dragmode!==!1&&A.camera.mouseListener.buttons!==0){var z=I();A.graphDiv.emit("plotly_relayouting",z)}}),A.staticMode||A.glplot.canvas.addEventListener("webglcontextlost",function(z){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:z,layer:A.id})},!1)),A.glplot.oncontextloss=function(){A.recoverContext()},A.glplot.onrender=function(){A.render()},!0},v.render=function(){var A,E=this,P=E.graphDiv,I=E.svgContainer,D=E.container.getBoundingClientRect();P._fullLayout._calcInverseTransform(P);var z=P._fullLayout._invScaleX,V=P._fullLayout._invScaleY,O=D.width*z,j=D.height*V;I.setAttributeNS(null,"viewBox","0 0 "+O+" "+j),I.setAttributeNS(null,"width",O),I.setAttributeNS(null,"height",j),p(E),E.glplot.axes.update(E.axesOptions);for(var Y=Object.keys(E.traces),B=null,U=E.glplot.selection,q=0;q<Y.length;++q)(A=E.traces[Y[q]]).data.hoverinfo!=="skip"&&A.handlePick(U)&&(B=A),A.setContourLevels&&A.setContourLevels();function te(de,me,ke){var Ce=E.fullSceneLayout[de+"axis"];return Ce.type!=="log"&&(me=Ce.d2l(me)),n.hoverLabelText(Ce,me,ke)}if(B!==null){var ee=d(E.glplot.cameraParams,U.dataCoordinate);A=B.data;var Q,J=P._fullData[A.index],K=U.index,X={xLabel:te("x",U.traceCoordinate[0],A.xhoverformat),yLabel:te("y",U.traceCoordinate[1],A.yhoverformat),zLabel:te("z",U.traceCoordinate[2],A.zhoverformat)},ie=o.castHoverinfo(J,E.fullLayout,K),se=(ie||"").split("+"),ae=ie&&ie==="all";J.hovertemplate||ae||(se.indexOf("x")===-1&&(X.xLabel=void 0),se.indexOf("y")===-1&&(X.yLabel=void 0),se.indexOf("z")===-1&&(X.zLabel=void 0),se.indexOf("text")===-1&&(U.textLabel=void 0),se.indexOf("name")===-1&&(B.name=void 0));var ue=[];A.type==="cone"||A.type==="streamtube"?(X.uLabel=te("x",U.traceCoordinate[3],A.uhoverformat),(ae||se.indexOf("u")!==-1)&&ue.push("u: "+X.uLabel),X.vLabel=te("y",U.traceCoordinate[4],A.vhoverformat),(ae||se.indexOf("v")!==-1)&&ue.push("v: "+X.vLabel),X.wLabel=te("z",U.traceCoordinate[5],A.whoverformat),(ae||se.indexOf("w")!==-1)&&ue.push("w: "+X.wLabel),X.normLabel=U.traceCoordinate[6].toPrecision(3),(ae||se.indexOf("norm")!==-1)&&ue.push("norm: "+X.normLabel),A.type==="streamtube"&&(X.divergenceLabel=U.traceCoordinate[7].toPrecision(3),(ae||se.indexOf("divergence")!==-1)&&ue.push("divergence: "+X.divergenceLabel)),U.textLabel&&ue.push(U.textLabel),Q=ue.join("<br>")):A.type==="isosurface"||A.type==="volume"?(X.valueLabel=n.hoverLabelText(E._mockAxis,E._mockAxis.d2l(U.traceCoordinate[3]),A.valuehoverformat),ue.push("value: "+X.valueLabel),U.textLabel&&ue.push(U.textLabel),Q=ue.join("<br>")):Q=U.textLabel;var ve={x:U.traceCoordinate[0],y:U.traceCoordinate[1],z:U.traceCoordinate[2],data:J._input,fullData:J,curveNumber:J.index,pointNumber:K};o.appendArrayPointValue(ve,J,K),A._module.eventData&&(ve=J._module.eventData(ve,U,J,{},K));var ye={points:[ve]};if(E.fullSceneLayout.hovermode){var pe=[];o.loneHover({trace:J,x:(.5+.5*ee[0]/ee[3])*O,y:(.5-.5*ee[1]/ee[3])*j,xLabel:X.xLabel,yLabel:X.yLabel,zLabel:X.zLabel,text:Q,name:B.name,color:o.castHoverOption(J,K,"bgcolor")||B.color,borderColor:o.castHoverOption(J,K,"bordercolor"),fontFamily:o.castHoverOption(J,K,"font.family"),fontSize:o.castHoverOption(J,K,"font.size"),fontColor:o.castHoverOption(J,K,"font.color"),nameLength:o.castHoverOption(J,K,"namelength"),textAlign:o.castHoverOption(J,K,"align"),hovertemplate:i.castOption(J,K,"hovertemplate"),hovertemplateLabels:i.extendFlat({},ve,X),eventData:[ve]},{container:I,gd:P,inOut_bbox:pe}),ve.bbox=pe[0]}U.distance<5&&(U.buttons||m)?P.emit("plotly_click",ye):P.emit("plotly_hover",ye),this.oldEventData=ye}else o.loneUnhover(I),this.oldEventData&&P.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},v.recoverContext=function(){var A=this;A.glplot.dispose();var E=function(){A.glplot.gl.isContextLost()?requestAnimationFrame(E):A.initializeGLPlot()?A.plot.apply(A,A.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var h=["xaxis","yaxis","zaxis"];function S(A,E,P){for(var I=A.fullSceneLayout,D=0;D<3;D++){var z=h[D],V=z.charAt(0),O=I[z],j=E[V],Y=E[V+"calendar"],B=E["_"+V+"length"];if(i.isArrayOrTypedArray(j))for(var U,q=0;q<(B||j.length);q++)if(i.isArrayOrTypedArray(j[q]))for(var te=0;te<j[q].length;++te)U=O.d2l(j[q][te],0,Y),!isNaN(U)&&isFinite(U)&&(P[0][D]=Math.min(P[0][D],U),P[1][D]=Math.max(P[1][D],U));else U=O.d2l(j[q],0,Y),!isNaN(U)&&isFinite(U)&&(P[0][D]=Math.min(P[0][D],U),P[1][D]=Math.max(P[1][D],U));else P[0][D]=Math.min(P[0][D],0),P[1][D]=Math.max(P[1][D],B-1)}}v.plot=function(A,E,P){var I=this;if(I.plotArgs=[A,E,P],!I.glplot.contextLost){var D,z,V,O,j,Y,B=E[I.id],U=P[I.id];I.fullLayout=E,I.fullSceneLayout=B,I.axesOptions.merge(E,B),I.spikeOptions.merge(B),I.setViewport(B),I.updateFx(B.dragmode,B.hovermode),I.camera.enableWheel=I.graphDiv._context._scrollZoom.gl3d,I.glplot.setClearColor(l(B.bgcolor)),I.setConvert(j),A?Array.isArray(A)||(A=[A]):A=[];var q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(V=0;V<A.length;++V)(D=A[V]).visible===!0&&D._length!==0&&S(this,D,q);(function(Me,Pe){for(var De=Me.fullSceneLayout,he=De.annotations||[],_e=0;_e<3;_e++)for(var Ae=h[_e],Oe=Ae.charAt(0),Ee=De[Ae],Be=0;Be<he.length;Be++){var Ve=he[Be];if(Ve.visible){var Ze=Ee.r2l(Ve[Oe]);!isNaN(Ze)&&isFinite(Ze)&&(Pe[0][_e]=Math.min(Pe[0][_e],Ze),Pe[1][_e]=Math.max(Pe[1][_e],Ze))}}})(this,q);var te=[1,1,1];for(O=0;O<3;++O)q[1][O]===q[0][O]?te[O]=1:te[O]=1/(q[1][O]-q[0][O]);for(I.dataScale=te,I.convertAnnotations(this),V=0;V<A.length;++V)(D=A[V]).visible===!0&&D._length!==0&&((z=I.traces[D.uid])?z.data.type===D.type?z.update(D):(z.dispose(),z=D._module.plot(this,D),I.traces[D.uid]=z):(z=D._module.plot(this,D),I.traces[D.uid]=z),z.name=D.name);var ee=Object.keys(I.traces);e:for(V=0;V<ee.length;++V){for(O=0;O<A.length;++O)if(A[O].uid===ee[V]&&A[O].visible===!0&&A[O]._length!==0)continue e;(z=I.traces[ee[V]]).dispose(),delete I.traces[ee[V]]}I.glplot.objects.sort(function(Me,Pe){return Me._trace.data.index-Pe._trace.data.index});var Q,J=[[0,0,0],[0,0,0]],K=[],X={};for(V=0;V<3;++V){var ie;if((Y=(j=B[h[V]]).type)in X?(X[Y].acc*=te[V],X[Y].count+=1):X[Y]={acc:te[V],count:1},j.autorange){J[0][V]=1/0,J[1][V]=-1/0;var se=I.glplot.objects,ae=I.fullSceneLayout.annotations||[],ue=j._name.charAt(0);for(O=0;O<se.length;O++){var ve=se[O],ye=ve.bounds,pe=ve._trace.data._pad||0;ve.constructor.name==="ErrorBars"&&j._lowerLogErrorBound?J[0][V]=Math.min(J[0][V],j._lowerLogErrorBound):J[0][V]=Math.min(J[0][V],ye[0][V]/te[V]-pe),J[1][V]=Math.max(J[1][V],ye[1][V]/te[V]+pe)}for(O=0;O<ae.length;O++){var de=ae[O];if(de.visible){var me=j.r2l(de[ue]);J[0][V]=Math.min(J[0][V],me),J[1][V]=Math.max(J[1][V],me)}}if("rangemode"in j&&j.rangemode==="tozero"&&(J[0][V]=Math.min(J[0][V],0),J[1][V]=Math.max(J[1][V],0)),J[0][V]>J[1][V])J[0][V]=-1,J[1][V]=1;else{var ke=J[1][V]-J[0][V];J[0][V]-=ke/32,J[1][V]+=ke/32}if(ie=[J[0][V],J[1][V]],ie=g(ie,j),J[0][V]=ie[0],J[1][V]=ie[1],j.isReversed()){var Ce=J[0][V];J[0][V]=J[1][V],J[1][V]=Ce}}else ie=j.range,J[0][V]=j.r2l(ie[0]),J[1][V]=j.r2l(ie[1]);J[0][V]===J[1][V]&&(J[0][V]-=1,J[1][V]+=1),K[V]=J[1][V]-J[0][V],j.range=[J[0][V],J[1][V]],j.limitRange(),I.glplot.setBounds(V,{min:j.range[0]*te[V],max:j.range[1]*te[V]})}var ge=B.aspectmode;if(ge==="cube")Q=[1,1,1];else if(ge==="manual"){var oe=B.aspectratio;Q=[oe.x,oe.y,oe.z]}else{if(ge!=="auto"&&ge!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var re=[1,1,1];for(V=0;V<3;++V){var fe=X[Y=(j=B[h[V]]).type];re[V]=Math.pow(fe.acc,1/fe.count)/te[V]}Q=ge==="data"||Math.max.apply(null,re)/Math.min.apply(null,re)<=4?re:[1,1,1]}B.aspectratio.x=U.aspectratio.x=Q[0],B.aspectratio.y=U.aspectratio.y=Q[1],B.aspectratio.z=U.aspectratio.z=Q[2],I.glplot.setAspectratio(B.aspectratio),I.viewInitial.aspectratio||(I.viewInitial.aspectratio={x:B.aspectratio.x,y:B.aspectratio.y,z:B.aspectratio.z}),I.viewInitial.aspectmode||(I.viewInitial.aspectmode=B.aspectmode);var Se=B.domain||null,be=E._size||null;if(Se&&be){var we=I.container.style;we.position="absolute",we.left=be.l+Se.x[0]*be.w+"px",we.top=be.t+(1-Se.y[1])*be.h+"px",we.width=be.w*(Se.x[1]-Se.x[0])+"px",we.height=be.h*(Se.y[1]-Se.y[0])+"px"}I.glplot.redraw()}},v.destroy=function(){var A=this;A.glplot&&(A.camera.mouseListener.enabled=!1,A.container.removeEventListener("wheel",A.camera.wheelListener),A.camera=null,A.glplot.dispose(),A.container.parentNode.removeChild(A.container),A.glplot=null)},v.getCamera=function(){var A,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(A=E.camera).up[0],y:A.up[1],z:A.up[2]},center:{x:A.center[0],y:A.center[1],z:A.center[2]},eye:{x:A.eye[0],y:A.eye[1],z:A.eye[2]},projection:{type:A._ortho===!0?"orthographic":"perspective"}}},v.setViewport=function(A){var E,P=this,I=A.camera;P.camera.lookAt.apply(this,[[(E=I).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),P.glplot.setAspectratio(A.aspectratio),I.projection.type==="orthographic"!==P.camera._ortho&&(P.glplot.redraw(),P.glplot.clearRGBA(),P.glplot.dispose(),P.initializeGLPlot())},v.isCameraChanged=function(A){var E=this.getCamera(),P=i.nestedProperty(A,this.id+".camera").get();function I(O,j,Y,B){var U=["up","center","eye"],q=["x","y","z"];return j[U[Y]]&&O[U[Y]][q[B]]===j[U[Y]][q[B]]}var D=!1;if(P===void 0)D=!0;else{for(var z=0;z<3;z++)for(var V=0;V<3;V++)if(!I(E,P,z,V)){D=!0;break}(!P.projection||E.projection&&E.projection.type!==P.projection.type)&&(D=!0)}return D},v.isAspectChanged=function(A){var E=this.glplot.getAspectratio(),P=i.nestedProperty(A,this.id+".aspectratio").get();return P===void 0||P.x!==E.x||P.y!==E.y||P.z!==E.z},v.saveLayout=function(A){var E,P,I,D,z,V,O=this,j=O.fullLayout,Y=O.isCameraChanged(A),B=O.isAspectChanged(A),U=Y||B;if(U){var q={};Y&&(E=O.getCamera(),I=(P=i.nestedProperty(A,O.id+".camera")).get(),q[O.id+".camera"]=I),B&&(D=O.glplot.getAspectratio(),V=(z=i.nestedProperty(A,O.id+".aspectratio")).get(),q[O.id+".aspectratio"]=V),t.call("_storeDirectGUIEdit",A,j._preGUI,q),Y&&(P.set(E),i.nestedProperty(j,O.id+".camera").set(E)),B&&(z.set(D),i.nestedProperty(j,O.id+".aspectratio").set(D),O.glplot.redraw())}return U},v.updateFx=function(A,E){var P=this,I=P.camera;if(I)if(A==="orbit")I.mode="orbit",I.keyBindingMode="rotate";else if(A==="turntable"){I.up=[0,0,1],I.mode="turntable",I.keyBindingMode="rotate";var D=P.graphDiv,z=D._fullLayout,V=P.fullSceneLayout.camera,O=V.up.x,j=V.up.y,Y=V.up.z;if(Y/Math.sqrt(O*O+j*j+Y*Y)<.999){var B=P.id+".camera.up",U={x:0,y:0,z:1},q={};q[B]=U;var te=D.layout;t.call("_storeDirectGUIEdit",te,z._preGUI,q),V.up=U,i.nestedProperty(te,B).set(U)}}else I.keyBindingMode=A;P.fullSceneLayout.hovermode=E},v.toImage=function(A){var E=this;A||(A="png"),E.staticMode&&E.container.appendChild(T),E.glplot.redraw();var P=E.glplot.gl,I=P.drawingBufferWidth,D=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var z=new Uint8Array(I*D*4);P.readPixels(0,0,I,D,P.RGBA,P.UNSIGNED_BYTE,z),function(B,U,q){for(var te=0,ee=q-1;te<ee;++te,--ee)for(var Q=0;Q<U;++Q)for(var J=0;J<4;++J){var K=4*(U*te+Q)+J,X=4*(U*ee+Q)+J,ie=B[K];B[K]=B[X],B[X]=ie}}(z,I,D),function(B,U,q){for(var te=0;te<q;++te)for(var ee=0;ee<U;++ee){var Q=4*(U*te+ee),J=B[Q+3];if(J>0)for(var K=255/J,X=0;X<3;++X)B[Q+X]=Math.min(K*B[Q+X],255)}}(z,I,D);var V=document.createElement("canvas");V.width=I,V.height=D;var O,j=V.getContext("2d",{willReadFrequently:!0}),Y=j.createImageData(I,D);switch(Y.data.set(z),j.putImageData(Y,0,0),A){case"jpeg":O=V.toDataURL("image/jpeg");break;case"webp":O=V.toDataURL("image/webp");break;default:O=V.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(T),O},v.setConvert=function(){for(var A=0;A<3;A++){var E=this.fullSceneLayout[h[A]];n.setConvert(E,this.fullLayout),E.setScale=i.noop}},v.make4thDimension=function(){var A=this,E=A.graphDiv._fullLayout;A._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(A._mockAxis,E)},F.exports=y},52094:function(F){"use strict";F.exports=function(C,e,T,k){k=k||C.length;for(var a=new Array(k),w=0;w<k;w++)a[w]=[C[w],e[w],T[w]];return a}},64859:function(F,C,e){"use strict";var T=e(25376),k=e(85656),a=e(22548),w=e(92872),b=e(34200),f=e(66741),s=e(92880).extendFlat,t=T({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=a.defaultLine,F.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:T({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(f({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:w.newshape,activeshape:w.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:T({editType:"layoutstyle"})}}},47552:function(F,C,e){"use strict";var T=e(95376),k="1.13.4",a='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',w=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',a].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),f={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:a,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=T(f);F.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:f,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){var w=k.split(" "),b=w[0],f=w[1],s=T.isArrayOrTypedArray(a)?T.mean(a):a,t=.5+s/100,i=1.5+s/100,r=["",""],n=[0,0];switch(b){case"top":r[0]="top",n[1]=-i;break;case"bottom":r[0]="bottom",n[1]=i}switch(f){case"left":r[1]="right",n[0]=-t;break;case"right":r[1]="left",n[0]=t}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},33688:function(F,C,e){"use strict";var T=e(3480),k=e(3400),a=k.strTranslate,w=k.strScale,b=e(84888).KY,f=e(9616),s=e(33428),t=e(43616),i=e(72736),r=e(14440),n="mapbox",o=C.constants=e(47552);function l(c){return typeof c=="string"&&(o.styleValuesMapbox.indexOf(c)!==-1||c.indexOf("mapbox://")===0||c.indexOf("stamen")===0)}C.name=n,C.attr="subplot",C.idRoot=n,C.idRegex=C.attrRegex=k.counterRegex(n),C.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},C.layoutAttributes=e(5232),C.supplyLayoutDefaults=e(5976),C.plot=function(c){var d=c._fullLayout,u=c.calcdata,x=d._subplots[n];if(T.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var p=function(h,S){var A=h._fullLayout;if(h._context.mapboxAccessToken==="")return"";for(var E=[],P=[],I=!1,D=!1,z=0;z<S.length;z++){var V=A[S[z]],O=V.accesstoken;l(V.style)&&(O?k.pushUnique(E,O):(l(V._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),I=!0),D=!0)),O&&k.pushUnique(P,O)}if(D){var j=I?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw k.error(j),new Error(j)}return E.length?(E.length>1&&k.warn(o.multipleTokensErrorMsg),E[0]):(P.length&&k.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,x);T.accessToken=p;for(var g=0;g<x.length;g++){var m=x[g],y=b(u,n,m),v=d[m],_=v._subplot;_||(_=new r(c,m),d[m]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),_.plot(y,d,c._promises)}},C.clean=function(c,d,u,x){for(var p=x._subplots[n]||[],g=0;g<p.length;g++){var m=p[g];!d[m]&&x[m]._subplot&&x[m]._subplot.destroy()}},C.toSVG=function(c){for(var d=c._fullLayout,u=d._subplots[n],x=d._size,p=0;p<u.length;p++){var g=d[u[p]],m=g.domain,y=g._subplot.toImage("png");d._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":y,x:x.l+x.w*m.x[0],y:x.t+x.h*(1-m.y[1]),width:x.w*(m.x[1]-m.x[0]),height:x.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"});var v=s.select(g._subplot.div);if(v.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=d._glimages.append("g");_.attr("transform",a(x.l+x.w*m.x[0]+10,x.t+x.h*(1-m.y[0])-31)),_.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var h=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=d._glimages.append("g"),A=S.append("text");A.text(h).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":h});var E=t.bBox(A.node()),P=x.w*(m.x[1]-m.x[0]);if(E.width>P/2){var I=h.split("|").join("<br>");A.text(I).attr("data-unformatted",I).call(i.convertToTspans,c),E=t.bBox(A.node())}A.attr("transform",a(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var D=1;E.width+6>P&&(D=P/(E.width+6));var z=[x.l+x.w*m.x[1],x.t+x.h*(1-m.y[0])];S.attr("transform",a(z[0],z[1])+w(D))}},C.updateFx=function(c){for(var d=c._fullLayout,u=d._subplots[n],x=0;x<u.length;x++)d[u[x]]._subplot.updateFx(d)}},22360:function(F,C,e){"use strict";var T=e(3400),k=e(72736).sanitizeHTML,a=e(89032),w=e(47552);function b(i,r){this.subplot=i,this.uid=i.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=w.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var f=b.prototype;function s(i){if(!i.visible)return!1;var r=i.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return T.isPlainObject(r)||typeof r=="string"&&r.length>0}function t(i){var r={},n={};switch(i.type){case"circle":T.extendFlat(n,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":T.extendFlat(n,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":T.extendFlat(n,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var o=i.symbol,l=a(o.textposition,o.iconsize);T.extendFlat(r,{"icon-image":o.icon+"-15","icon-size":o.iconsize/10,"text-field":o.text,"text-size":o.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":o.placement}),T.extendFlat(n,{"icon-color":i.color,"text-color":o.textfont.color,"text-opacity":i.opacity});break;case"raster":T.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:r,paint:n}}f.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=s(i)},f.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},f.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},f.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},f.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},f.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},f.updateSource=function(i){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,s(i)){var n=function(o){var l,c=o.sourcetype,d=o.source,u={type:c};return c==="geojson"?l="data":c==="vector"?l=typeof d=="string"?"url":"tiles":c==="raster"?(l="tiles",u.tileSize=256):c==="image"&&(l="url",u.coordinates=o.coordinates),u[l]=d,o.sourceattribution&&(u.attribution=k(o.sourceattribution)),u}(i);r.addSource(this.idSource,n)}},f.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var o=r[n].id;if(typeof o=="string"&&o.indexOf(w.traceLayerPrefix)===0){i=o;break}}return i},f.updateLayer=function(i){var r=this.subplot,n=t(i),o=this.lookupBelow(),l=this.findFollowingMapboxLayerId(o);this.removeLayer(),s(i)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:n.layout,paint:n.paint},l),this.layerType=i.type,this.below=o},f.updateStyle=function(i){if(s(i)){var r=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},f.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},f.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},F.exports=function(i,r,n){var o=new b(i,r);return o.update(n),o}},5232:function(F,C,e){"use strict";var T=e(3400),k=e(76308).defaultLine,a=e(86968).u,w=e(25376),b=e(52904).textposition,f=e(67824).overrideAll,s=e(31780).templatedArray,t=e(47552),i=w({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(F.exports=f({_arrayAttrRegexps:[T.counterRegex("mapbox",".layers",!0)],domain:a({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:T.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(F,C,e){"use strict";var T=e(3400),k=e(168),a=e(51272),w=e(5232);function b(s,t,i,r){i("accesstoken",r.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var n=i("bounds.west"),o=i("bounds.east"),l=i("bounds.south"),c=i("bounds.north");n!==void 0&&o!==void 0&&l!==void 0&&c!==void 0||delete t.bounds,a(s,t,{name:"layers",handleItemDefaults:f}),t._input=s}function f(s,t){function i(c,d){return T.coerce(s,t,w.layers,c,d)}if(i("visible")){var r,n=i("sourcetype"),o=n==="raster"||n==="image";i("source"),i("sourceattribution"),n==="vector"&&i("sourcelayer"),n==="image"&&i("coordinates"),o&&(r="raster");var l=i("type",r);o&&l!=="raster"&&(l=t.type="raster",T.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),l==="circle"&&i("circle.radius"),l==="line"&&(i("line.width"),i("line.dash")),l==="fill"&&i("fill.outlinecolor"),l==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),T.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}F.exports=function(s,t,i){k(s,t,i,{type:"mapbox",attributes:w,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(F,C,e){"use strict";var T=e(3480),k=e(3400),a=e(27144),w=e(24040),b=e(54460),f=e(86476),s=e(93024),t=e(72760),i=t.drawMode,r=t.selectMode,n=e(22676).prepSelect,o=e(22676).clearOutline,l=e(22676).clearSelectionsCache,c=e(22676).selectOnClick,d=e(47552),u=e(22360);function x(_,h){this.id=h,this.gd=_;var S=_._fullLayout,A=_._context;this.container=S._glcontainer.node(),this.isStatic=A.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var p=x.prototype;p.plot=function(_,h,S){var A,E=this,P=h[E.id];E.map&&P.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),A=E.map?new Promise(function(I,D){E.updateMap(_,h,I,D)}):new Promise(function(I,D){E.createMap(_,h,I,D)}),S.push(A)},p.createMap=function(_,h,S,A){var E=this,P=h[E.id],I=E.styleObj=m(P.style,h);E.accessToken=P.accesstoken;var D=P.bounds,z=D?[[D.west,D.south],[D.east,D.north]]:null,V=E.map=new T.Map({container:E.div,style:I.style,center:v(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new T.AttributionControl({compact:!0}));V._canvas.style.left="0px",V._canvas.style.top="0px",E.rejectOnError(A),E.isStatic||E.initFx(_,h);var O=[];O.push(new Promise(function(j){V.once("load",j)})),O=O.concat(a.fetchTraceGeoData(_)),Promise.all(O).then(function(){E.fillBelowLookup(_,h),E.updateData(_),E.updateLayout(h),E.resolveOnRender(S)}).catch(A)},p.updateMap=function(_,h,S,A){var E=this,P=E.map,I=h[this.id];E.rejectOnError(A);var D=[],z=m(I.style,h);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,P.setStyle(z.style),E.traceHash={},D.push(new Promise(function(V){P.once("styledata",V)}))),D=D.concat(a.fetchTraceGeoData(_)),Promise.all(D).then(function(){E.fillBelowLookup(_,h),E.updateData(_),E.updateLayout(h),E.resolveOnRender(S)}).catch(A)},p.fillBelowLookup=function(_,h){var S,A,E=h[this.id].layers,P=this.belowLookup={},I=!1;for(S=0;S<_.length;S++){var D=_[S][0].trace,z=D._module;typeof D.below=="string"?A=D.below:z.getBelow&&(A=z.getBelow(D,this)),A===""&&(I=!0),P["trace-"+D.uid]=A||""}for(S=0;S<E.length;S++){var V=E[S];A=typeof V.below=="string"?V.below:I?"traces":"",P["layout-"+S]=A}var O,j,Y={};for(O in P)Y[A=P[O]]?Y[A].push(O):Y[A]=[O];for(A in Y){var B=Y[A];if(B.length>1)for(S=0;S<B.length;S++)(O=B[S]).indexOf("trace-")===0?(j=O.split("trace-")[1],this.traceHash[j]&&(this.traceHash[j].below=null)):O.indexOf("layout-")===0&&(j=O.split("layout-")[1],this.layerList[j]&&(this.layerList[j].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function m(_,h){var S={};if(k.isPlainObject(_))S.id=_.id,S.style=_;else if(typeof _=="string")if(S.id=_,d.styleValuesMapbox.indexOf(_)!==-1)S.style=y(_);else if(d.stylesNonMapbox[_]){S.style=d.stylesNonMapbox[_];var A=S.style.sources["plotly-"+_],E=A?A.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=h._mapboxAccessToken)}else S.style=_;else S.id=d.styleValueDflt,S.style=y(d.styleValueDflt);return S.transition={duration:0,delay:0},S}function y(_){return d.styleUrlPrefix+_+"-"+d.styleUrlSuffix}function v(_){return[_.lon,_.lat]}p.updateData=function(_){var h,S,A,E,P=this.traceHash,I=_.slice().sort(function(j,Y){return g[j[0].trace.type]-g[Y[0].trace.type]});for(A=0;A<I.length;A++){var D=I[A],z=!1;(h=P[(S=D[0].trace).uid])&&(h.type===S.type?(h.update(D),z=!0):h.dispose()),!z&&S._module&&(P[S.uid]=S._module.plot(this,D))}var V=Object.keys(P);e:for(A=0;A<V.length;A++){var O=V[A];for(E=0;E<_.length;E++)if(O===(S=_[E][0].trace).uid)continue e;(h=P[O]).dispose(),delete P[O]}},p.updateLayout=function(_){var h=this.map,S=_[this.id];this.dragging||this.wheeling||(h.setCenter(v(S.center)),h.setZoom(S.zoom),h.setBearing(S.bearing),h.setPitch(S.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?h.scrollZoom.enable():h.scrollZoom.disable()},p.resolveOnRender=function(_){var h=this.map;h.on("render",function S(){h.loaded()&&(h.off("render",S),setTimeout(_,10))})},p.rejectOnError=function(_){var h=this.map;function S(){_(new Error(d.mapOnErrorMsg))}h.once("error",S),h.once("style.error",S),h.once("source.error",S),h.once("tile.error",S),h.once("layer.error",S)},p.createFramework=function(_){var h=this,S=h.div=document.createElement("div");S.id=h.uid,S.style.position="absolute",h.container.appendChild(S),h.xaxis={_id:"x",c2p:function(A){return h.project(A).x}},h.yaxis={_id:"y",c2p:function(A){return h.project(A).y}},h.updateFramework(_),h.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(h.mockAxis,_)},p.initFx=function(_,h){var S=this,A=S.gd,E=S.map;function P(){s.loneUnhover(h._hoverlayer)}function I(){var D=S.getView();A.emit("plotly_relayouting",S.getViewEditsWithDerived(D))}E.on("moveend",function(D){if(S.map){var z=A._fullLayout;if(D.originalEvent||S.wheeling){var V=z[S.id];w.call("_storeDirectGUIEdit",A.layout,z._preGUI,S.getViewEdits(V));var O=S.getView();V._input.center=V.center=O.center,V._input.zoom=V.zoom=O.zoom,V._input.bearing=V.bearing=O.bearing,V._input.pitch=V.pitch=O.pitch,A.emit("plotly_relayout",S.getViewEditsWithDerived(O))}D.originalEvent&&D.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(D){var z=S.div.getBoundingClientRect(),V=[D.originalEvent.offsetX,D.originalEvent.offsetY];D.target.getBoundingClientRect=function(){return z},S.xaxis.p2c=function(){return E.unproject(V).lng},S.yaxis.p2c=function(){return E.unproject(V).lat},A._fullLayout._rehover=function(){A._fullLayout._hoversubplot===S.id&&A._fullLayout[S.id]&&s.hover(A,D,S.id)},s.hover(A,D,S.id),A._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,P()}),E.on("zoomstart",P),E.on("mouseout",function(){A._fullLayout._hoversubplot=null}),E.on("drag",I),E.on("zoom",I),E.on("dblclick",function(){var D=A._fullLayout[S.id];w.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,S.getViewEdits(D));var z=S.viewInitial;E.setCenter(v(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var V=S.getView();D._input.center=D.center=V.center,D._input.zoom=D.zoom=V.zoom,D._input.bearing=D.bearing=V.bearing,D._input.pitch=D.pitch=V.pitch,A.emit("plotly_doubleclick",null),A.emit("plotly_relayout",S.getViewEditsWithDerived(V))}),S.clearOutline=function(){l(S.dragOptions),o(S.dragOptions.gd)},S.onClickInPanFn=function(D){return function(z){var V=A._fullLayout.clickmode;V.indexOf("select")>-1&&c(z.originalEvent,A,[S.xaxis],[S.yaxis],S.id,D),V.indexOf("event")>-1&&s.click(A,z.originalEvent)}}},p.updateFx=function(_){var h=this,S=h.map,A=h.gd;if(!h.isStatic){var E,P=_.dragmode;E=function(z,V){V.isRect?(z.range={})[h.id]=[D([V.xmin,V.ymin]),D([V.xmax,V.ymax])]:(z.lassoPoints={})[h.id]=V.map(D)};var I=h.dragOptions;h.dragOptions=k.extendDeep(I||{},{dragmode:_.dragmode,element:h.div,gd:A,plotinfo:{id:h.id,domain:_[h.id].domain,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:E},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id}),S.off("click",h.onClickInPanHandler),r(P)||i(P)?(S.dragPan.disable(),S.on("zoomstart",h.clearOutline),h.dragOptions.prepFn=function(z,V,O){n(z,V,O,h.dragOptions,P)},f.init(h.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",h.clearOutline),h.div.onmousedown=null,h.div.ontouchstart=null,h.div.removeEventListener("touchstart",h.div._ontouchstart),h.onClickInPanHandler=h.onClickInPanFn(h.dragOptions),S.on("click",h.onClickInPanHandler))}function D(z){var V=h.map.unproject(z);return[V.lng,V.lat]}},p.updateFramework=function(_){var h=_[this.id].domain,S=_._size,A=this.div.style;A.width=S.w*(h.x[1]-h.x[0])+"px",A.height=S.h*(h.y[1]-h.y[0])+"px",A.left=S.l+h.x[0]*S.w+"px",A.top=S.t+(1-h.y[1])*S.h+"px",this.xaxis._offset=S.l+h.x[0]*S.w,this.xaxis._length=S.w*(h.x[1]-h.x[0]),this.yaxis._offset=S.t+(1-h.y[1])*S.h,this.yaxis._length=S.h*(h.y[1]-h.y[0])},p.updateLayers=function(_){var h,S=_[this.id].layers,A=this.layerList;if(S.length!==A.length){for(h=0;h<A.length;h++)A[h].dispose();for(A=this.layerList=[],h=0;h<S.length;h++)A.push(u(this,h,S[h]))}else for(h=0;h<S.length;h++)A[h].update(S[h])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},p.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},p.setOptions=function(_,h,S){for(var A in S)this.map[h](_,A,S[A])},p.getMapLayers=function(){return this.map.getStyle().layers},p.addLayer=function(_,h){var S=this.map;if(typeof h=="string"){if(h==="")return void S.addLayer(_,h);for(var A=this.getMapLayers(),E=0;E<A.length;E++)if(h===A[E].id)return void S.addLayer(_,h);k.warn(["Trying to add layer with *below* value",h,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(_)},p.project=function(_){return this.map.project(new T.LngLat(_[0],_[1]))},p.getView=function(){var _=this.map,h=_.getCenter(),S={lon:h.lng,lat:h.lat},A=_.getCanvas(),E=parseInt(A.style.width),P=parseInt(A.style.height);return{center:S,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,P]).toArray(),_.unproject([0,P]).toArray()]}}},p.getViewEdits=function(_){for(var h=this.id,S=["center","zoom","bearing","pitch"],A={},E=0;E<S.length;E++){var P=S[E];A[h+"."+P]=_[P]}return A},p.getViewEditsWithDerived=function(_){var h=this.id,S=this.getViewEdits(_);return S[h+"._derived"]=_._derived,S},F.exports=x},66741:function(F){"use strict";F.exports=function(C){var e=C.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(F,C,e){"use strict";var T=e(33428),k=e(94336).m_,a=e(57624).SO,w=e(38248),b=e(83160),f=e(24040),s=e(73060),t=e(31780),i=e(3400),r=e(76308),n=e(39032).BADNUM,o=e(79811),l=e(1936).clearOutline,c=e(55308),d=e(85656),u=e(16672),x=e(84888)._M,p=i.relinkPrivateKeys,g=i._,m=F.exports={};i.extendFlat(m,f),m.attributes=e(45464),m.attributes.type.values=m.allTypes,m.fontAttrs=e(25376),m.layoutAttributes=e(64859);var y=m.transformsRegistry,v=e(62460);m.executeAPICommand=v.executeAPICommand,m.computeAPICommandBindings=v.computeAPICommandBindings,m.manageCommandObserver=v.manageCommandObserver,m.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,m.redrawText=function(B){return B=i.getGraphDiv(B),new Promise(function(U){setTimeout(function(){B._fullLayout&&(f.getComponentMethod("annotations","draw")(B),f.getComponentMethod("legend","draw")(B),f.getComponentMethod("colorbar","draw")(B),U(m.previousPromises(B)))},300)})},m.resize=function(B){var U;B=i.getGraphDiv(B);var q=new Promise(function(te,ee){B&&!i.isHidden(B)||ee(new Error("Resize must be passed a displayed plot div element.")),B._redrawTimer&&clearTimeout(B._redrawTimer),B._resolveResize&&(U=B._resolveResize),B._resolveResize=te,B._redrawTimer=setTimeout(function(){if(!B.layout||B.layout.width&&B.layout.height||i.isHidden(B))te(B);else{delete B.layout.width,delete B.layout.height;var Q=B.changed;B.autoplay=!0,f.call("relayout",B,{autosize:!0}).then(function(){B.changed=Q,B._resolveResize===te&&(delete B._resolveResize,te(B))})}},100)});return U&&U(q),q},m.previousPromises=function(B){if((B._promises||[]).length)return Promise.all(B._promises).then(function(){B._promises=[]})},m.addLinks=function(B){if(B._context.showLink||B._context.showSources){var U=B._fullLayout,q=i.ensureSingle(U._paper,"text","js-plot-link-container",function(X){X.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var ie=T.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),te=q.node(),ee={y:U._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=U.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=U._paper.attr("width")-7),q.attr(ee);var Q=q.select(".js-link-to-tool"),J=q.select(".js-link-spacer"),K=q.select(".js-sourcelinks");B._context.showSources&&B._context.showSources(B),B._context.showLink&&function(X,ie){ie.text("");var se=ie.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(X._context.linkText+" \xBB");if(X._context.sendData)se.on("click",function(){m.sendDataToCloud(X)});else{var ae=window.location.pathname.split("/"),ue=window.location.search;se.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ae[2].split(".")[0]+"/"+ae[1]+ue})}}(B,Q),J.text(Q.text()&&K.text()?" - ":"")}},m.sendDataToCloud=function(B){var U=(window.PLOTLYENV||{}).BASE_URL||B._context.plotlyServerURL;if(U){B.emit("plotly_beforeexport");var q=T.select(B).append("div").attr("id","hiddenform").style("display","none"),te=q.append("form").attr({action:U+"/external",method:"post",target:"_blank"});return te.append("input").attr({type:"text",name:"data"}).node().value=m.graphJson(B,!1,"keepdata"),te.node().submit(),q.remove(),B.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],h=["year","month","dayMonth","dayMonthYear"];function S(B,U){var q=B._context.locale;q||(q="en-US");var te=!1,ee={};function Q(ae){for(var ue=!0,ve=0;ve<U.length;ve++){var ye=U[ve];ee[ye]||(ae[ye]?ee[ye]=ae[ye]:ue=!1)}ue&&(te=!0)}for(var J=0;J<2;J++){for(var K=B._context.locales,X=0;X<2;X++){var ie=(K[q]||{}).format;if(ie&&(Q(ie),te))break;K=f.localeRegistry}var se=q.split("-")[0];if(te||se===q)break;q=se}return te||Q(f.localeRegistry.en.format),ee}function A(B,U){var q={_fullLayout:U},te=B._id.charAt(0)==="x",ee=B._mainAxis._anchorAxis,Q="",J="",K="";if(ee&&(K=ee._mainAxis._id,Q=te?B._id+K:K+B._id),!Q||!U._plots[Q]){Q="";for(var X=B._counterAxes,ie=0;ie<X.length;ie++){var se=X[ie],ae=te?B._id+se:se+B._id;J||(J=ae);var ue=o.getFromId(q,se);if(K&&ue.overlaying===K){Q=ae;break}}}return Q||J}function E(B){var U=B.transforms;if(Array.isArray(U)&&U.length)for(var q=0;q<U.length;q++){var te=U[q],ee=te._module||y[te.type];if(ee&&ee.makesData)return!0}return!1}function P(B,U,q,te){for(var ee=B.transforms,Q=[B],J=0;J<ee.length;J++){var K=ee[J],X=y[K.type];X&&X.transform&&(Q=X.transform(Q,{transform:K,fullTrace:B,fullData:U,layout:q,fullLayout:te,transformIndex:J}))}return Q}function I(B){return typeof B=="string"&&B.substr(B.length-2)==="px"&&parseFloat(B)}function D(B){var U=B.margin;if(!B._size){var q=B._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)};q.w=Math.round(B.width)-q.l-q.r,q.h=Math.round(B.height)-q.t-q.b}B._pushmargin||(B._pushmargin={}),B._pushmarginIds||(B._pushmarginIds={}),B._reservedMargin||(B._reservedMargin={})}m.supplyDefaults=function(B,U){var q=U&&U.skipUpdateCalc,te=B._fullLayout||{};if(te._skipDefaults)delete te._skipDefaults;else{var ee,Q=B._fullLayout={},J=B.layout||{},K=B._fullData||[],X=B._fullData=[],ie=B.data||[],se=B.calcdata||[],ae=B._context||{};B._transitionData||m.createTransitionData(B),Q._dfltTitle={plot:g(B,"Click to enter Plot title"),x:g(B,"Click to enter X axis title"),y:g(B,"Click to enter Y axis title"),colorbar:g(B,"Click to enter Colorscale title"),annotation:g(B,"new text")},Q._traceWord=g(B,"trace");var ue=S(B,_);if(Q._mapboxAccessToken=ae.mapboxAccessToken,te._initialAutoSizeIsDone){var ve=te.width,ye=te.height;m.supplyLayoutGlobalDefaults(J,Q,ue),J.width||(Q.width=ve),J.height||(Q.height=ye),m.sanitizeMargins(Q)}else{m.supplyLayoutGlobalDefaults(J,Q,ue);var pe=!J.width||!J.height,de=Q.autosize,me=ae.autosizable;pe&&(de||me)?m.plotAutoSize(B,J,Q):pe&&m.sanitizeMargins(Q),!de&&pe&&(J.width=Q.width,J.height=Q.height)}Q._d3locale=function(Ee,Be){return Ee.decimal=Be.charAt(0),Ee.thousands=Be.charAt(1),{numberFormat:function(Ve){try{Ve=a(Ee).format(i.adjustFormat(Ve))}catch{return i.warnBadFormat(Ve),i.noFormat}return Ve},timeFormat:k(Ee).utcFormat}}(ue,Q.separators),Q._extraFormat=S(B,h),Q._initialAutoSizeIsDone=!0,Q._dataLength=ie.length,Q._modules=[],Q._visibleModules=[],Q._basePlotModules=[];var ke=Q._subplots=function(){var Ee,Be,Ve=f.collectableSubplotTypes,Ze={};if(!Ve){Ve=[];var it=f.subplotsRegistry;for(var at in it){var gt=it[at].attr;if(gt&&(Ve.push(at),Array.isArray(gt)))for(Be=0;Be<gt.length;Be++)i.pushUnique(Ve,gt[Be])}}for(Ee=0;Ee<Ve.length;Ee++)Ze[Ve[Ee]]=[];return Ze}(),Ce=Q._splomAxes={x:{},y:{}},ge=Q._splomSubplots={};Q._splomGridDflt={},Q._scatterStackOpts={},Q._firstScatter={},Q._alignmentOpts={},Q._colorAxes={},Q._requestRangeslider={},Q._traceUids=function(Ee,Be){var Ve,Ze,it=Be.length,at=[];for(Ve=0;Ve<Ee.length;Ve++){var gt=Ee[Ve]._fullInput;gt!==Ze&&at.push(gt),Ze=gt}var yt=at.length,pt=new Array(it),et={};function $e(Rt,Ct){pt[Ct]=Rt,et[Rt]=1}function At(Rt,Ct){if(Rt&&typeof Rt=="string"&&!et[Rt])return $e(Rt,Ct),!0}for(Ve=0;Ve<it;Ve++){var Ot=Be[Ve].uid;typeof Ot=="number"&&(Ot=String(Ot)),At(Ot,Ve)||Ve<yt&&At(at[Ve].uid,Ve)||$e(i.randstr(et),Ve)}return pt}(K,ie),Q._globalTransforms=(B._context||{}).globalTransforms,m.supplyDataDefaults(ie,X,J,Q);var oe=Object.keys(Ce.x),re=Object.keys(Ce.y);if(oe.length>1&&re.length>1){for(f.getComponentMethod("grid","sizeDefaults")(J,Q),ee=0;ee<oe.length;ee++)i.pushUnique(ke.xaxis,oe[ee]);for(ee=0;ee<re.length;ee++)i.pushUnique(ke.yaxis,re[ee]);for(var fe in ge)i.pushUnique(ke.cartesian,fe)}if(Q._has=m._hasPlotType.bind(Q),K.length===X.length)for(ee=0;ee<X.length;ee++)p(X[ee],K[ee]);m.supplyLayoutModuleDefaults(J,Q,X,B._transitionData);var Se=Q._visibleModules,be=[];for(ee=0;ee<Se.length;ee++){var we=Se[ee].crossTraceDefaults;we&&i.pushUnique(be,we)}for(ee=0;ee<be.length;ee++)be[ee](X,Q);Q._hasOnlyLargeSploms=Q._basePlotModules.length===1&&Q._basePlotModules[0].name==="splom"&&oe.length>15&&re.length>15&&Q.shapes.length===0&&Q.images.length===0,m.linkSubplots(X,Q,K,te),m.cleanPlot(X,Q,K,te);var Me=!(!te._has||!te._has("gl2d")),Pe=!(!Q._has||!Q._has("gl2d")),De=!(!te._has||!te._has("cartesian"))||Me,he=!(!Q._has||!Q._has("cartesian"))||Pe;De&&!he?te._bgLayer.remove():he&&!De&&(Q._shouldCreateBgLayer=!0),te._zoomlayer&&!B._dragging&&l({_fullLayout:te}),function(Ee,Be){var Ve,Ze=[];Be.meta&&(Ve=Be._meta={meta:Be.meta,layout:{meta:Be.meta}});for(var it=0;it<Ee.length;it++){var at=Ee[it];at.meta?Ze[at.index]=at._meta={meta:at.meta}:Be.meta&&(at._meta={meta:Be.meta}),Be.meta&&(at._meta.layout={meta:Be.meta})}Ze.length&&(Ve||(Ve=Be._meta={}),Ve.data=Ze)}(X,Q),p(Q,te),f.getComponentMethod("colorscale","crossTraceDefaults")(X,Q),Q._preGUI||(Q._preGUI={}),Q._tracePreGUI||(Q._tracePreGUI={});var _e,Ae=Q._tracePreGUI,Oe={};for(_e in Ae)Oe[_e]="old";for(ee=0;ee<X.length;ee++)Oe[_e=X[ee]._fullInput.uid]||(Ae[_e]={}),Oe[_e]="new";for(_e in Oe)Oe[_e]==="old"&&delete Ae[_e];D(Q),f.getComponentMethod("rangeslider","makeData")(Q),q||se.length!==X.length||m.supplyDefaultsUpdateCalc(se,X)}},m.supplyDefaultsUpdateCalc=function(B,U){for(var q=0;q<U.length;q++){var te=U[q],ee=(B[q]||[])[0];if(ee&&ee.trace){var Q=ee.trace;if(Q._hasCalcTransform){var J,K,X,ie=Q._arrayAttrs;for(J=0;J<ie.length;J++)K=ie[J],X=i.nestedProperty(Q,K).get().slice(),i.nestedProperty(te,K).set(X)}ee.trace=te}}},m.createTransitionData=function(B){B._transitionData||(B._transitionData={}),B._transitionData._frames||(B._transitionData._frames=[]),B._transitionData._frameHash||(B._transitionData._frameHash={}),B._transitionData._counter||(B._transitionData._counter=0),B._transitionData._interruptCallbacks||(B._transitionData._interruptCallbacks=[])},m._hasPlotType=function(B){var U,q=this._basePlotModules||[];for(U=0;U<q.length;U++)if(q[U].name===B)return!0;var te=this._modules||[];for(U=0;U<te.length;U++){var ee=te[U].name;if(ee===B)return!0;var Q=f.modules[ee];if(Q&&Q.categories[B])return!0}return!1},m.cleanPlot=function(B,U,q,te){var ee,Q,J=te._basePlotModules||[];for(ee=0;ee<J.length;ee++){var K=J[ee];K.clean&&K.clean(B,U,q,te)}var X=te._has&&te._has("gl"),ie=U._has&&U._has("gl");X&&!ie&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var se=!!te._infolayer;e:for(ee=0;ee<q.length;ee++){var ae=q[ee].uid;for(Q=0;Q<B.length;Q++)if(ae===B[Q].uid)continue e;se&&te._infolayer.select(".cb"+ae).remove()}},m.linkSubplots=function(B,U,q,te){var ee,Q,J=te._plots||{},K=U._plots={},X=U._subplots,ie={_fullData:B,_fullLayout:U},se=X.cartesian.concat(X.gl2d||[]);for(ee=0;ee<se.length;ee++){var ae,ue=se[ee],ve=J[ue],ye=o.getFromId(ie,ue,"x"),pe=o.getFromId(ie,ue,"y");for(ve?ae=K[ue]=ve:(ae=K[ue]={}).id=ue,ye._counterAxes.push(pe._id),pe._counterAxes.push(ye._id),ye._subplotsWith.push(ue),pe._subplotsWith.push(ue),ae.xaxis=ye,ae.yaxis=pe,ae._hasClipOnAxisFalse=!1,Q=0;Q<B.length;Q++){var de=B[Q];if(de.xaxis===ae.xaxis._id&&de.yaxis===ae.yaxis._id&&de.cliponaxis===!1){ae._hasClipOnAxisFalse=!0;break}}}var me,ke=o.list(ie,null,!0);for(ee=0;ee<ke.length;ee++){var Ce=null;(me=ke[ee]).overlaying&&(Ce=o.getFromId(ie,me.overlaying))&&Ce.overlaying&&(me.overlaying=!1,Ce=null),me._mainAxis=Ce||me,Ce&&(me.domain=Ce.domain.slice()),me._anchorAxis=me.anchor==="free"?null:o.getFromId(ie,me.anchor)}for(ee=0;ee<ke.length;ee++)if((me=ke[ee])._counterAxes.sort(o.idSort),me._subplotsWith.sort(i.subplotSort),me._mainSubplot=A(me,U),me._counterAxes.length&&(me.spikemode&&me.spikemode.indexOf("across")!==-1||me.automargin&&me.mirror&&me.anchor!=="free"||f.getComponentMethod("rangeslider","isVisible")(me))){var ge=1,oe=0;for(Q=0;Q<me._counterAxes.length;Q++){var re=o.getFromId(ie,me._counterAxes[Q]);ge=Math.min(ge,re.domain[0]),oe=Math.max(oe,re.domain[1])}ge<oe&&(me._counterDomainMin=ge,me._counterDomainMax=oe)}},m.clearExpandedTraceDefaultColors=function(B){var U,q,te;for(q=[],(U=B._module._colorAttrs)||(B._module._colorAttrs=U=[],s.crawl(B._module.attributes,function(ee,Q,J,K){q[K]=Q,q.length=K+1,ee.valType==="color"&&ee.dflt===void 0&&U.push(q.join("."))})),te=0;te<U.length;te++)i.nestedProperty(B,"_input."+U[te]).get()||i.nestedProperty(B,U[te]).set(null)},m.supplyDataDefaults=function(B,U,q,te){var ee,Q,J,K=te._modules,X=te._visibleModules,ie=te._basePlotModules,se=0,ae=0;function ue(fe){U.push(fe);var Se=fe._module;Se&&(i.pushUnique(K,Se),fe.visible===!0&&i.pushUnique(X,Se),i.pushUnique(ie,fe._module.basePlotModule),se++,fe._input.visible!==!1&&ae++)}te._transformModules=[];var ve={},ye=[],pe=(q.template||{}).data||{},de=t.traceTemplater(pe);for(ee=0;ee<B.length;ee++){if(J=B[ee],(Q=de.newTrace(J)).uid=te._traceUids[ee],m.supplyTraceDefaults(J,Q,ae,te,ee),Q.index=ee,Q._input=J,Q._expandedIndex=se,Q.transforms&&Q.transforms.length)for(var me=J.visible!==!1&&Q.visible===!1,ke=P(Q,U,q,te),Ce=0;Ce<ke.length;Ce++){var ge=ke[Ce],oe={_template:Q._template,type:Q.type,uid:Q.uid+Ce};me&&ge.visible===!1&&delete ge.visible,m.supplyTraceDefaults(ge,oe,se,te,ee),p(oe,ge),oe.index=ee,oe._input=J,oe._fullInput=Q,oe._expandedIndex=se,oe._expandedInput=ge,ue(oe)}else Q._fullInput=Q,Q._expandedInput=Q,ue(Q);f.traceIs(Q,"carpetAxis")&&(ve[Q.carpet]=Q),f.traceIs(Q,"carpetDependent")&&ye.push(ee)}for(ee=0;ee<ye.length;ee++)if((Q=U[ye[ee]]).visible){var re=ve[Q.carpet];Q._carpet=re,re&&re.visible?(Q.xaxis=re.xaxis,Q.yaxis=re.yaxis):Q.visible=!1}},m.supplyAnimationDefaults=function(B){var U;B=B||{};var q={};function te(ee,Q){return i.coerce(B||{},q,d,ee,Q)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(B.frame))for(q.frame=[],U=0;U<B.frame.length;U++)q.frame[U]=m.supplyAnimationFrameDefaults(B.frame[U]||{});else q.frame=m.supplyAnimationFrameDefaults(B.frame||{});if(Array.isArray(B.transition))for(q.transition=[],U=0;U<B.transition.length;U++)q.transition[U]=m.supplyAnimationTransitionDefaults(B.transition[U]||{});else q.transition=m.supplyAnimationTransitionDefaults(B.transition||{});return q},m.supplyAnimationFrameDefaults=function(B){var U={};function q(te,ee){return i.coerce(B||{},U,d.frame,te,ee)}return q("duration"),q("redraw"),U},m.supplyAnimationTransitionDefaults=function(B){var U={};function q(te,ee){return i.coerce(B||{},U,d.transition,te,ee)}return q("duration"),q("easing"),U},m.supplyFrameDefaults=function(B){var U={};function q(te,ee){return i.coerce(B,U,u,te,ee)}return q("group"),q("name"),q("traces"),q("baseframe"),q("data"),q("layout"),U},m.supplyTraceDefaults=function(B,U,q,te,ee){var Q,J=te.colorway||r.defaults,K=J[q%J.length];function X(Ce,ge){return i.coerce(B,U,m.attributes,Ce,ge)}var ie=X("visible");X("type"),X("name",te._traceWord+" "+ee),X("uirevision",te.uirevision);var se=m.getModule(U);if(U._module=se,se){var ae=se.basePlotModule,ue=ae.attr,ve=ae.attributes;if(ue&&ve){var ye=te._subplots,pe="";if(ie||ae.name!=="gl2d"){if(Array.isArray(ue))for(Q=0;Q<ue.length;Q++){var de=ue[Q],me=i.coerce(B,U,ve,de);ye[de]&&i.pushUnique(ye[de],me),pe+=me}else pe=i.coerce(B,U,ve,ue);ye[ae.name]&&i.pushUnique(ye[ae.name],pe)}}}if(ie){if(X("customdata"),X("ids"),X("meta"),f.traceIs(U,"showLegend")?(i.coerce(B,U,se.attributes.showlegend?se.attributes:m.attributes,"showlegend"),X("legend"),X("legendwidth"),X("legendgroup"),X("legendgrouptitle.text"),X("legendrank"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,se&&se.supplyDefaults(B,U,K,te),f.traceIs(U,"noOpacity")||X("opacity"),f.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),f.traceIs(U,"noHover")||(U.hovertemplate||i.coerceHoverinfo(B,U,te),U.type!=="parcats"&&f.getComponentMethod("fx","supplyDefaults")(B,U,K,te)),se&&se.selectPoints){var ke=X("selectedpoints");i.isTypedArray(ke)&&(U.selectedpoints=Array.from(ke))}m.supplyTransformDefaults(B,U,te)}return U},m.hasMakesDataTransform=E,m.supplyTransformDefaults=function(B,U,q){if(U._length||E(B)){var te=q._globalTransforms||[],ee=q._transformModules||[];if(Array.isArray(B.transforms)||te.length!==0)for(var Q=B.transforms||[],J=te.concat(Q),K=U.transforms=[],X=0;X<J.length;X++){var ie,se=J[X],ae=se.type,ue=y[ae],ve=!(se._module&&se._module===ue),ye=ue&&typeof ue.transform=="function";ue||i.warn("Unrecognized transform type "+ae+"."),ue&&ue.supplyDefaults&&(ve||ye)?((ie=ue.supplyDefaults(se,U,q,B)).type=ae,ie._module=ue,i.pushUnique(ee,ue)):ie=i.extendFlat({},se),K.push(ie)}}},m.supplyLayoutGlobalDefaults=function(B,U,q){function te(se,ae){return i.coerce(B,U,m.layoutAttributes,se,ae)}var ee=B.template;i.isPlainObject(ee)&&(U.template=ee,U._template=ee.layout,U._dataTemplate=ee.data),te("autotypenumbers");var Q=i.coerceFont(te,"font"),J=Q.size;i.coerceFont(te,"title.font",Q,{overrideDflt:{size:Math.round(1.4*J)}}),te("title.text",U._dfltTitle.plot),te("title.xref");var K=te("title.yref");te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var X=te("title.automargin");te("title.x"),te("title.xanchor"),te("title.y"),te("title.yanchor"),X&&(K==="paper"&&(U.title.y!==0&&(U.title.y=1),U.title.yanchor==="auto"&&(U.title.yanchor=U.title.y===0?"top":"bottom")),K==="container"&&(U.title.y==="auto"&&(U.title.y=1),U.title.yanchor==="auto"&&(U.title.yanchor=U.title.y<.5?"bottom":"top"))),te("uniformtext.mode")&&te("uniformtext.minsize"),te("autosize",!(B.width&&B.height)),te("width"),te("height"),te("minreducedwidth"),te("minreducedheight"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),B.width&&B.height&&m.sanitizeMargins(U),f.getComponentMethod("grid","sizeDefaults")(B,U),te("paper_bgcolor"),te("separators",q.decimal+q.thousands),te("hidesources"),te("colorway"),te("datarevision");var ie=te("uirevision");te("editrevision",ie),te("selectionrevision",ie),f.getComponentMethod("modebar","supplyLayoutDefaults")(B,U),f.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(B,U,te),f.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(B,U,te),te("meta"),i.isPlainObject(B.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),f.getComponentMethod("calendars","handleDefaults")(B,U,"calendar"),f.getComponentMethod("fx","supplyLayoutGlobalDefaults")(B,U,te),i.coerce(B,U,c,"scattermode")},m.plotAutoSize=function(B,U,q){var te,ee,Q=B._context||{},J=Q.frameMargins,K=i.isPlotDiv(B);if(K&&B.emit("plotly_autosize"),Q.fillFrame)te=window.innerWidth,ee=window.innerHeight,document.body.style.overflow="hidden";else{var X=K?window.getComputedStyle(B):{};if(te=I(X.width)||I(X.maxWidth)||q.width,ee=I(X.height)||I(X.maxHeight)||q.height,w(J)&&J>0){var ie=1-2*J;te=Math.round(ie*te),ee=Math.round(ie*ee)}}var se=m.layoutAttributes.width.min,ae=m.layoutAttributes.height.min;te<se&&(te=se),ee<ae&&(ee=ae);var ue=!U.width&&Math.abs(q.width-te)>1,ve=!U.height&&Math.abs(q.height-ee)>1;(ve||ue)&&(ue&&(q.width=te),ve&&(q.height=ee)),B._initialAutoSize||(B._initialAutoSize={width:te,height:ee}),m.sanitizeMargins(q)},m.supplyLayoutModuleDefaults=function(B,U,q,te){var ee,Q,J,K=f.componentsRegistry,X=U._basePlotModules,ie=f.subplotsRegistry.cartesian;for(ee in K)(J=K[ee]).includeBasePlot&&J.includeBasePlot(B,U);for(var se in X.length||X.push(ie),U._has("cartesian")&&(f.getComponentMethod("grid","contentDefaults")(B,U),ie.finalizeSubplots(B,U)),U._subplots)U._subplots[se].sort(i.subplotSort);for(Q=0;Q<X.length;Q++)(J=X[Q]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,U,q);var ae=U._modules;for(Q=0;Q<ae.length;Q++)(J=ae[Q]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,U,q);var ue=U._transformModules;for(Q=0;Q<ue.length;Q++)(J=ue[Q]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,U,q,te);for(ee in K)(J=K[ee]).supplyLayoutDefaults&&J.supplyLayoutDefaults(B,U,q)},m.purge=function(B){var U=B._fullLayout||{};U._glcontainer!==void 0&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null),U._modeBar&&U._modeBar.destroy(),B._transitionData&&(B._transitionData._interruptCallbacks&&(B._transitionData._interruptCallbacks.length=0),B._transitionData._animationRaf&&window.cancelAnimationFrame(B._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(B),delete B.data,delete B.layout,delete B._fullData,delete B._fullLayout,delete B.calcdata,delete B.empty,delete B.fid,delete B.undoqueue,delete B.undonum,delete B.autoplay,delete B.changed,delete B._promises,delete B._redrawTimer,delete B._hmlumcount,delete B._hmpixcount,delete B._transitionData,delete B._transitioning,delete B._initialAutoSize,delete B._transitioningWithDuration,delete B._dragging,delete B._dragged,delete B._dragdata,delete B._hoverdata,delete B._snapshotInProgress,delete B._editing,delete B._mouseDownTime,delete B._legendMouseDownTime,B.removeAllListeners&&B.removeAllListeners()},m.style=function(B){var U,q=B._fullLayout._visibleModules,te=[];for(U=0;U<q.length;U++){var ee=q[U];ee.style&&i.pushUnique(te,ee.style)}for(U=0;U<te.length;U++)te[U](B)},m.sanitizeMargins=function(B){if(B&&B.margin){var U,q=B.width,te=B.height,ee=B.margin,Q=q-(ee.l+ee.r),J=te-(ee.t+ee.b);Q<0&&(U=(q-1)/(ee.l+ee.r),ee.l=Math.floor(U*ee.l),ee.r=Math.floor(U*ee.r)),J<0&&(U=(te-1)/(ee.t+ee.b),ee.t=Math.floor(U*ee.t),ee.b=Math.floor(U*ee.b))}},m.clearAutoMarginIds=function(B){B._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(B,U){B._fullLayout._pushmarginIds[U]=1},m.autoMargin=function(B,U,q){var te=B._fullLayout,ee=te.width,Q=te.height,J=te.margin,K=te.minreducedwidth,X=te.minreducedheight,ie=i.constrain(ee-J.l-J.r,2,K),se=i.constrain(Q-J.t-J.b,2,X),ae=Math.max(0,ee-ie),ue=Math.max(0,Q-se),ve=te._pushmargin,ye=te._pushmarginIds;if(J.autoexpand!==!1){if(q){var pe=q.pad;if(pe===void 0&&(pe=Math.min(12,J.l,J.r,J.t,J.b)),ae){var de=(q.l+q.r)/ae;de>1&&(q.l/=de,q.r/=de)}if(ue){var me=(q.t+q.b)/ue;me>1&&(q.t/=me,q.b/=me)}var ke=q.xl!==void 0?q.xl:q.x,Ce=q.xr!==void 0?q.xr:q.x,ge=q.yt!==void 0?q.yt:q.y,oe=q.yb!==void 0?q.yb:q.y;ve[U]={l:{val:ke,size:q.l+pe},r:{val:Ce,size:q.r+pe},b:{val:oe,size:q.b+pe},t:{val:ge,size:q.t+pe}},ye[U]=1}else delete ve[U],delete ye[U];if(!te._replotting)return m.doAutoMargin(B)}},m.doAutoMargin=function(B){var U=B._fullLayout,q=U.width,te=U.height;U._size||(U._size={}),D(U);var ee=U._size,Q=U.margin,J={t:0,b:0,l:0,r:0},K=i.extendFlat({},ee),X=Q.l,ie=Q.r,se=Q.t,ae=Q.b,ue=U._pushmargin,ve=U._pushmarginIds,ye=U.minreducedwidth,pe=U.minreducedheight;if(Q.autoexpand!==!1){for(var de in ue)ve[de]||delete ue[de];var me=B._fullLayout._reservedMargin;for(var ke in me)for(var Ce in me[ke]){var ge=me[ke][Ce];J[Ce]=Math.max(J[Ce],ge)}for(var oe in ue.base={l:{val:0,size:X},r:{val:1,size:ie},t:{val:1,size:se},b:{val:0,size:ae}},J){var re=0;for(var fe in ue)fe!=="base"&&w(ue[fe][oe].size)&&(re=ue[fe][oe].size>re?ue[fe][oe].size:re);var Se=Math.max(0,Q[oe]-re);J[oe]=Math.max(0,J[oe]-Se)}for(var be in ue){var we=ue[be].l||{},Me=ue[be].b||{},Pe=we.val,De=we.size,he=Me.val,_e=Me.size,Ae=q-J.r-J.l,Oe=te-J.t-J.b;for(var Ee in ue){if(w(De)&&ue[Ee].r){var Be=ue[Ee].r.val,Ve=ue[Ee].r.size;if(Be>Pe){var Ze=(De*Be+(Ve-Ae)*Pe)/(Be-Pe),it=(Ve*(1-Pe)+(De-Ae)*(1-Be))/(Be-Pe);Ze+it>X+ie&&(X=Ze,ie=it)}}if(w(_e)&&ue[Ee].t){var at=ue[Ee].t.val,gt=ue[Ee].t.size;if(at>he){var yt=(_e*at+(gt-Oe)*he)/(at-he),pt=(gt*(1-he)+(_e-Oe)*(1-at))/(at-he);yt+pt>ae+se&&(ae=yt,se=pt)}}}}}var et=i.constrain(q-Q.l-Q.r,2,ye),$e=i.constrain(te-Q.t-Q.b,2,pe),At=Math.max(0,q-et),Ot=Math.max(0,te-$e);if(At){var Rt=(X+ie)/At;Rt>1&&(X/=Rt,ie/=Rt)}if(Ot){var Ct=(ae+se)/Ot;Ct>1&&(ae/=Ct,se/=Ct)}if(ee.l=Math.round(X)+J.l,ee.r=Math.round(ie)+J.r,ee.t=Math.round(se)+J.t,ee.b=Math.round(ae)+J.b,ee.p=Math.round(Q.pad),ee.w=Math.round(q)-ee.l-ee.r,ee.h=Math.round(te)-ee.t-ee.b,!U._replotting&&(m.didMarginChange(K,ee)||function(Xe){if("_redrawFromAutoMarginCount"in Xe._fullLayout)return!1;var Ne=o.list(Xe,"",!0);for(var Ye in Ne)if(Ne[Ye].autoshift||Ne[Ye].shift)return!0;return!1}(B))){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;var Ge=3*(1+Object.keys(ve).length);if(U._redrawFromAutoMarginCount<Ge)return f.call("_doPlot",B);U._size=K,i.warn("Too many auto-margin redraws.")}(function(Xe){var Ne=o.list(Xe,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ye){for(var ot=0;ot<Ne.length;ot++){var nt=Ne[ot][Ye];nt&&nt()}})})(B)};var z=["l","r","t","b","p","w","h"];function V(B,U,q){var te=!1,ee=[m.previousPromises,function(){if(B._transitionData)return B._transitioning=!1,function(J){var K=Promise.resolve();if(!J)return K;for(;J.length;)K=K.then(J.shift());return K}(B._transitionData._interruptCallbacks)},q.prepareFn,m.rehover,m.reselect,function(){return B.emit("plotly_transitioning",[]),new Promise(function(J){B._transitioning=!0,U.duration>0&&(B._transitioningWithDuration=!0),B._transitionData._interruptCallbacks.push(function(){te=!0}),q.redraw&&B._transitionData._interruptCallbacks.push(function(){return f.call("redraw",B)}),B._transitionData._interruptCallbacks.push(function(){B.emit("plotly_transitioninterrupted",[])});var K=0,X=0;function ie(){return K++,function(){var se;X++,te||X!==K||(se=J,B._transitionData&&(function(ae){if(ae)for(;ae.length;)ae.shift()}(B._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(q.redraw)return f.call("redraw",B)}).then(function(){B._transitioning=!1,B._transitioningWithDuration=!1,B.emit("plotly_transitioned",[])}).then(se)))}}q.runFn(ie),setTimeout(ie())})}],Q=i.syncOrAsync(ee,B);return Q&&Q.then||(Q=Promise.resolve()),Q.then(function(){return B})}m.didMarginChange=function(B,U){for(var q=0;q<z.length;q++){var te=z[q],ee=B[te],Q=U[te];if(!w(ee)||Math.abs(Q-ee)>1)return!0}return!1},m.graphJson=function(B,U,q,te,ee,Q){(ee&&U&&!B._fullData||ee&&!U&&!B._fullLayout)&&m.supplyDefaults(B);var J=ee?B._fullData:B.data,K=ee?B._fullLayout:B.layout,X=(B._transitionData||{})._frames;function ie(ue,ve){if(typeof ue=="function")return ve?"_function_":null;if(i.isPlainObject(ue)){var ye,pe={};return Object.keys(ue).sort().forEach(function(Ce){if(["_","["].indexOf(Ce.charAt(0))===-1)if(typeof ue[Ce]!="function"){if(q==="keepdata"){if(Ce.substr(Ce.length-3)==="src")return}else if(q==="keepstream"){if(typeof(ye=ue[Ce+"src"])=="string"&&ye.indexOf(":")>0&&!i.isPlainObject(ue.stream))return}else if(q!=="keepall"&&typeof(ye=ue[Ce+"src"])=="string"&&ye.indexOf(":")>0)return;pe[Ce]=ie(ue[Ce],ve)}else ve&&(pe[Ce]="_function")}),pe}var de=Array.isArray(ue),me=i.isTypedArray(ue);if((de||me)&&ue.dtype&&ue.shape){var ke=ue.bdata;return ie({dtype:ue.dtype,shape:ue.shape,bdata:i.isArrayBuffer(ke)?b.encode(ke):ke},ve)}return de?ue.map(function(Ce){return ie(Ce,ve)}):me?i.simpleMap(ue,i.identity):i.isJSDate(ue)?i.ms2DateTimeLocal(+ue):ue}var se={data:(J||[]).map(function(ue){var ve=ie(ue);return U&&delete ve.fit,ve})};if(!U&&(se.layout=ie(K),ee)){var ae=K._size;se.layout.computed={margin:{b:ae.b,l:ae.l,r:ae.r,t:ae.t}}}return X&&(se.frames=ie(X)),Q&&(se.config=ie(B._context,!0)),te==="object"?se:JSON.stringify(se)},m.modifyFrames=function(B,U){var q,te,ee,Q=B._transitionData._frames,J=B._transitionData._frameHash;for(q=0;q<U.length;q++)switch((te=U[q]).type){case"replace":ee=te.value;var K=(Q[te.index]||{}).name,X=ee.name;Q[te.index]=J[X]=ee,X!==K&&(delete J[K],J[X]=ee);break;case"insert":J[(ee=te.value).name]=ee,Q.splice(te.index,0,ee);break;case"delete":delete J[(ee=Q[te.index]).name],Q.splice(te.index,1)}return Promise.resolve()},m.computeFrame=function(B,U){var q,te,ee,Q,J=B._transitionData._frameHash;if(!U)throw new Error("computeFrame must be given a string frame name");var K=J[U.toString()];if(!K)return!1;for(var X=[K],ie=[K.name];K.baseframe&&(K=J[K.baseframe.toString()])&&ie.indexOf(K.name)===-1;)X.push(K),ie.push(K.name);for(var se={};K=X.pop();)if(K.layout&&(se.layout=m.extendLayout(se.layout,K.layout)),K.data){if(se.data||(se.data=[]),!(te=K.traces))for(te=[],q=0;q<K.data.length;q++)te[q]=q;for(se.traces||(se.traces=[]),q=0;q<K.data.length;q++)(ee=te[q])!=null&&((Q=se.traces.indexOf(ee))===-1&&(Q=se.data.length,se.traces[Q]=ee),se.data[Q]=m.extendTrace(se.data[Q],K.data[q]))}return se},m.recomputeFrameHash=function(B){for(var U=B._transitionData._frameHash={},q=B._transitionData._frames,te=0;te<q.length;te++){var ee=q[te];ee&&ee.name&&(U[ee.name]=ee)}},m.extendObjectWithContainers=function(B,U,q){var te,ee,Q,J,K,X,ie,se=i.extendDeepNoArrays({},U||{}),ae=i.expandObjectPaths(se),ue={};if(q&&q.length)for(Q=0;Q<q.length;Q++)(ee=(te=i.nestedProperty(ae,q[Q])).get())===void 0?i.nestedProperty(ue,q[Q]).set(null):(te.set(null),i.nestedProperty(ue,q[Q]).set(ee));if(B=i.extendDeepNoArrays(B||{},ae),q&&q.length){for(Q=0;Q<q.length;Q++)if(X=i.nestedProperty(ue,q[Q]).get()){for(ie=(K=i.nestedProperty(B,q[Q])).get(),Array.isArray(ie)||(ie=[],K.set(ie)),J=0;J<X.length;J++){var ve=X[J];ie[J]=ve===null?null:m.extendObjectWithContainers(ie[J],ve)}K.set(ie)}}return B},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=f.layoutArrayContainers,m.extendTrace=function(B,U){return m.extendObjectWithContainers(B,U,m.dataArrayContainers)},m.extendLayout=function(B,U){return m.extendObjectWithContainers(B,U,m.layoutArrayContainers)},m.transition=function(B,U,q,te,ee,Q){var J={redraw:ee.redraw},K={},X=[];return J.prepareFn=function(){for(var ie=Array.isArray(U)?U.length:0,se=te.slice(0,ie),ae=0;ae<se.length;ae++){var ue=se[ae],ve=B._fullData[ue]._module;if(ve){if(ve.animatable){var ye=ve.basePlotModule.name;K[ye]||(K[ye]=[]),K[ye].push(ue)}B.data[se[ae]]=m.extendTrace(B.data[se[ae]],U[ae])}}var pe=i.expandObjectPaths(i.extendDeepNoArrays({},q)),de=/^[xy]axis[0-9]*$/;for(var me in pe)de.test(me)&&delete pe[me].range;m.extendLayout(B.layout,pe),delete B.calcdata,m.supplyDefaults(B),m.doCalcdata(B);var ke=i.expandObjectPaths(q);if(ke){var Ce=B._fullLayout._plots;for(var ge in Ce){var oe=Ce[ge],re=oe.xaxis,fe=oe.yaxis,Se=re.range.slice(),be=fe.range.slice(),we=null,Me=null,Pe=null,De=null;Array.isArray(ke[re._name+".range"])?we=ke[re._name+".range"].slice():Array.isArray((ke[re._name]||{}).range)&&(we=ke[re._name].range.slice()),Array.isArray(ke[fe._name+".range"])?Me=ke[fe._name+".range"].slice():Array.isArray((ke[fe._name]||{}).range)&&(Me=ke[fe._name].range.slice()),Se&&we&&(re.r2l(Se[0])!==re.r2l(we[0])||re.r2l(Se[1])!==re.r2l(we[1]))&&(Pe={xr0:Se,xr1:we}),be&&Me&&(fe.r2l(be[0])!==fe.r2l(Me[0])||fe.r2l(be[1])!==fe.r2l(Me[1]))&&(De={yr0:be,yr1:Me}),(Pe||De)&&X.push(i.extendFlat({plotinfo:oe},Pe,De))}}return Promise.resolve()},J.runFn=function(ie){var se,ae,ue=B._fullLayout._basePlotModules,ve=X.length;if(q)for(ae=0;ae<ue.length;ae++)ue[ae].transitionAxes&&ue[ae].transitionAxes(B,X,Q,ie);for(var ye in ve?((se=i.extendFlat({},Q)).duration=0,delete K.cartesian):se=Q,K){var pe=K[ye];B._fullData[pe[0]]._module.basePlotModule.plot(B,pe,se,ie)}},V(B,Q,J)},m.transitionFromReact=function(B,U,q,te){var ee=B._fullLayout,Q=ee.transition,J={},K=[];return J.prepareFn=function(){var X=ee._plots;for(var ie in J.redraw=!1,U.anim==="some"&&(J.redraw=!0),q.anim==="some"&&(J.redraw=!0),X){var se=X[ie],ae=se.xaxis,ue=se.yaxis,ve=te[ae._name].range.slice(),ye=te[ue._name].range.slice(),pe=ae.range.slice(),de=ue.range.slice();ae.setScale(),ue.setScale();var me=null,ke=null;ae.r2l(ve[0])===ae.r2l(pe[0])&&ae.r2l(ve[1])===ae.r2l(pe[1])||(me={xr0:ve,xr1:pe}),ue.r2l(ye[0])===ue.r2l(de[0])&&ue.r2l(ye[1])===ue.r2l(de[1])||(ke={yr0:ye,yr1:de}),(me||ke)&&K.push(i.extendFlat({plotinfo:se},me,ke))}return Promise.resolve()},J.runFn=function(X){for(var ie,se,ae,ue=B._fullData,ve=B._fullLayout._basePlotModules,ye=[],pe=0;pe<ue.length;pe++)ye.push(pe);function de(){if(B._fullLayout)for(var ke=0;ke<ve.length;ke++)ve[ke].transitionAxes&&ve[ke].transitionAxes(B,K,ie,X)}function me(){if(B._fullLayout)for(var ke=0;ke<ve.length;ke++)ve[ke].plot(B,ae,se,X)}K.length&&U.anim?Q.ordering==="traces first"?(ie=i.extendFlat({},Q,{duration:0}),ae=ye,se=Q,setTimeout(de,Q.duration),me()):(ie=Q,ae=null,se=i.extendFlat({},Q,{duration:0}),setTimeout(me,ie.duration),de()):K.length?(ie=Q,de()):U.anim&&(ae=ye,se=Q,me())},V(B,Q,J)},m.doCalcdata=function(B,U){var q,te,ee,Q,J=o.list(B),K=B._fullData,X=B._fullLayout,ie=new Array(K.length),se=(B.calcdata||[]).slice();for(B.calcdata=ie,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},B._hmpixcount=0,B._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},ee=0;ee<K.length;ee++)Array.isArray(U)&&U.indexOf(ee)===-1&&(ie[ee]=se[ee]);for(ee=0;ee<K.length;ee++)(q=K[ee])._arrayAttrs=s.findArrayAttributes(q),q._extremes={};var ae=X._subplots.polar||[];for(ee=0;ee<ae.length;ee++)J.push(X[ae[ee]].radialaxis,X[ae[ee]].angularaxis);for(var ue in X._colorAxes){var ve=X[ue];ve.cauto!==!1&&(delete ve.cmin,delete ve.cmax)}var ye=!1;function pe(ke){if(q=K[ke],te=q._module,q.visible===!0&&q.transforms){if(te&&te.calc){var Ce=te.calc(B,q);Ce[0]&&Ce[0].t&&Ce[0].t._scene&&delete Ce[0].t._scene.dirty}for(Q=0;Q<q.transforms.length;Q++){var ge=q.transforms[Q];(te=y[ge.type])&&te.calcTransform&&(q._hasCalcTransform=!0,ye=!0,te.calcTransform(B,q,ge))}}}function de(ke,Ce){if(q=K[ke],!!(te=q._module).isContainer===Ce){var ge=[];if(q.visible===!0&&q._length!==0){delete q._indexToPoints;var oe=q.transforms||[];for(Q=oe.length-1;Q>=0;Q--)if(oe[Q].enabled){q._indexToPoints=oe[Q]._indexToPoints;break}te&&te.calc&&(ge=te.calc(B,q))}Array.isArray(ge)&&ge[0]||(ge=[{x:n,y:n}]),ge[0].t||(ge[0].t={}),ge[0].trace=q,ie[ke]=ge}}for(j(J,K,X),ee=0;ee<K.length;ee++)de(ee,!0);for(ee=0;ee<K.length;ee++)pe(ee);for(ye&&j(J,K,X),ee=0;ee<K.length;ee++)de(ee,!0);for(ee=0;ee<K.length;ee++)de(ee,!1);Y(B);var me=function(ke,Ce){var ge,oe,re,fe,Se,be=[];function we(Ye,ot,nt){var ze=ot._id.charAt(0);if(Ye==="histogram2dcontour"){var Fe=ot._counterAxes[0],rt=o.getFromId(Ce,Fe),We=ze==="x"||Fe==="x"&&rt.type==="category",ft=ze==="y"||Fe==="y"&&rt.type==="category";return function(mt,vt){return mt===0||vt===0||We&&mt===nt[vt].length-1||ft&&vt===nt.length-1?-1:(ze==="y"?vt:mt)-1}}return function(mt,vt){return ze==="y"?vt:mt}}var Me={min:function(Ye){return i.aggNums(Math.min,null,Ye)},max:function(Ye){return i.aggNums(Math.max,null,Ye)},sum:function(Ye){return i.aggNums(function(ot,nt){return ot+nt},null,Ye)},total:function(Ye){return i.aggNums(function(ot,nt){return ot+nt},null,Ye)},mean:function(Ye){return i.mean(Ye)},median:function(Ye){return i.median(Ye)}};function Pe(Ye,ot){return Ye[1]-ot[1]}function De(Ye,ot){return ot[1]-Ye[1]}for(ge=0;ge<ke.length;ge++){var he=ke[ge];if(he.type==="category"){var _e=he.categoryorder.match(O);if(_e){var Ae=_e[1],Oe=_e[2],Ee=he._id.charAt(0),Be=Ee==="x",Ve=[];for(oe=0;oe<he._categories.length;oe++)Ve.push([he._categories[oe],[]]);for(oe=0;oe<he._traceIndices.length;oe++){var Ze=he._traceIndices[oe],it=Ce._fullData[Ze];if(it.visible===!0){var at=it.type;f.traceIs(it,"histogram")&&(delete it._xautoBinFinished,delete it._yautoBinFinished);var gt=at==="splom",yt=at==="scattergl",pt=Ce.calcdata[Ze];for(re=0;re<pt.length;re++){var et,$e,At=pt[re];if(gt){var Ot=it._axesDim[he._id];if(!Be){var Rt=it._diag[Ot][0];Rt&&(he=Ce._fullLayout[o.id2name(Rt)])}var Ct=At.trace.dimensions[Ot].values;for(fe=0;fe<Ct.length;fe++)for(et=he._categoriesMap[Ct[fe]],Se=0;Se<At.trace.dimensions.length;Se++)if(Se!==Ot){var Ge=At.trace.dimensions[Se];Ve[et][1].push(Ge.values[fe])}}else if(yt){for(fe=0;fe<At.t.x.length;fe++)Be?(et=At.t.x[fe],$e=At.t.y[fe]):(et=At.t.y[fe],$e=At.t.x[fe]),Ve[et][1].push($e);At.t&&At.t._scene&&delete At.t._scene.dirty}else if(At.hasOwnProperty("z")){$e=At.z;var Xe=we(it.type,he,$e);for(fe=0;fe<$e.length;fe++)for(Se=0;Se<$e[fe].length;Se++)(et=Xe(Se,fe))+1&&Ve[et][1].push($e[fe][Se])}else for((et=At.p)===void 0&&(et=At[Ee]),($e=At.s)===void 0&&($e=At.v),$e===void 0&&($e=Be?At.y:At.x),Array.isArray($e)||($e=$e===void 0?[]:[$e]),fe=0;fe<$e.length;fe++)Ve[et][1].push($e[fe])}}}he._categoriesValue=Ve;var Ne=[];for(oe=0;oe<Ve.length;oe++)Ne.push([Ve[oe][0],Me[Ae](Ve[oe][1])]);Ne.sort(Oe==="descending"?De:Pe),he._categoriesAggregatedValue=Ne,he._initialCategories=Ne.map(function(Ye){return Ye[0]}),be=be.concat(he.sortByInitialCategories())}}}return be}(J,B);if(me.length){for(X._numBoxes=0,X._numViolins=0,ee=0;ee<me.length;ee++)de(me[ee],!0);for(ee=0;ee<me.length;ee++)de(me[ee],!1);Y(B)}f.getComponentMethod("fx","calc")(B),f.getComponentMethod("errorbars","calc")(B)};var O=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(B,U,q){var te={};function ee(X){X.clearCalc(),X.type==="multicategory"&&X.setupMultiCategory(U),te[X._id]=1}i.simpleMap(B,ee);for(var Q=q._axisMatchGroups||[],J=0;J<Q.length;J++)for(var K in Q[J])te[K]||ee(q[o.id2name(K)])}function Y(B){var U,q,te,ee=B._fullLayout,Q=ee._visibleModules,J={};for(q=0;q<Q.length;q++){var K=Q[q],X=K.crossTraceCalc;if(X){var ie=K.basePlotModule.name;J[ie]?i.pushUnique(J[ie],X):J[ie]=[X]}}for(te in J){var se=J[te],ae=ee._subplots[te];if(Array.isArray(ae))for(U=0;U<ae.length;U++){var ue=ae[U],ve=te==="cartesian"?ee._plots[ue]:ee[ue];for(q=0;q<se.length;q++)se[q](B,ve,ue)}else for(q=0;q<se.length;q++)se[q](B)}}m.rehover=function(B){B._fullLayout._rehover&&B._fullLayout._rehover()},m.redrag=function(B){B._fullLayout._redrag&&B._fullLayout._redrag()},m.reselect=function(B){var U=B._fullLayout,q=(B.layout||{}).selections,te=U._previousSelections;U._previousSelections=q;var ee=U._reselect||JSON.stringify(q)!==JSON.stringify(te);f.getComponentMethod("selections","reselect")(B,ee)},m.generalUpdatePerTraceModule=function(B,U,q,te){var ee,Q=U.traceHash,J={};for(ee=0;ee<q.length;ee++){var K=q[ee],X=K[0].trace;X.visible&&(J[X.type]=J[X.type]||[],J[X.type].push(K))}for(var ie in Q)if(!J[ie]){var se=Q[ie][0];se[0].trace.visible=!1,J[ie]=[se]}for(var ae in J){var ue=J[ae];ue[0][0].trace._module.plot(B,U,i.filterVisible(ue),te)}U.traceHash=J},m.plotBasePlot=function(B,U,q,te,ee){var Q=f.getModule(B),J=x(U.calcdata,Q)[0];Q.plot(U,J,te,ee)},m.cleanBasePlot=function(B,U,q,te,ee){var Q=ee._has&&ee._has(B),J=q._has&&q._has(B);Q&&!J&&ee["_"+B+"layer"].selectAll("g.trace").remove()}},39360:function(F){"use strict";F.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(F,C,e){"use strict";var T=e(3400),k=e(92065).tester,a=T.findIndexOfMin,w=T.isAngleInsideSector,b=T.angleDelta,f=T.angleDist;function s(n,o,l,c){var d,u,x=c[0],p=c[1],g=i(Math.sin(o)-Math.sin(n)),m=i(Math.cos(o)-Math.cos(n)),y=Math.tan(l),v=i(1/y),_=g/m,h=p-_*x;return v?g&&m?u=y*(d=h/(y-_)):m?(d=p*v,u=p):(d=x,u=x*y):g&&m?(d=0,u=h):m?(d=0,u=p):d=u=NaN,[d,u]}function t(n,o,l,c){return T.isFullCircle([o,l])?function(d,u){var x,p=u.length,g=new Array(p+1);for(x=0;x<p;x++){var m=u[x];g[x]=[d*Math.cos(m),d*Math.sin(m)]}return g[x]=g[0].slice(),g}(n,c):function(d,u,x,p){var g,m,y=p.length,v=[];function _(V){return[d*Math.cos(V),d*Math.sin(V)]}function h(V,O,j){return s(V,O,j,_(V))}function S(V){return T.mod(V,y)}function A(V){return w(V,[u,x])}var E=a(p,function(V){return A(V)?f(V,u):1/0}),P=h(p[E],p[S(E-1)],u);for(v.push(P),g=E,m=0;m<y;g++,m++){var I=p[S(g)];if(!A(I))break;v.push(_(I))}var D=a(p,function(V){return A(V)?f(V,x):1/0}),z=h(p[D],p[S(D+1)],x);return v.push(z),v.push([0,0]),v.push(v[0].slice()),v}(n,o,l,c)}function i(n){return Math.abs(n)>1e-10?n:0}function r(n,o,l){o=o||0,l=l||0;for(var c=n.length,d=new Array(c),u=0;u<c;u++){var x=n[u];d[u]=[o+x[0],l-x[1]]}return d}F.exports={isPtInsidePolygon:function(n,o,l,c,d){if(!w(o,c))return!1;var u,x;l[0]<l[1]?(u=l[0],x=l[1]):(u=l[1],x=l[0]);var p=k(t(u,c[0],c[1],d)),g=k(t(x,c[0],c[1],d)),m=[n*Math.cos(o),n*Math.sin(o)];return g.contains(m)&&!p.contains(m)},findPolygonOffset:function(n,o,l,c){for(var d=1/0,u=1/0,x=t(n,o,l,c),p=0;p<x.length;p++){var g=x[p];d=Math.min(d,g[0]),u=Math.min(u,-g[1])}return[d,u]},findEnclosingVertexAngles:function(n,o){var l=a(o,function(d){var u=b(d,n);return u>0?u:1/0}),c=T.mod(l+1,o.length);return[o[l],o[c]]},findIntersectionXY:s,findXYatLength:function(n,o,l,c){var d=-o*l,u=o*o+1,x=2*(o*d-l),p=d*d+l*l-n*n,g=Math.sqrt(x*x-4*u*p),m=(-x+g)/(2*u),y=(-x-g)/(2*u);return[[m,o*m+d+c],[y,o*y+d+c]]},clampTiny:i,pathPolygon:function(n,o,l,c,d,u){return"M"+r(t(n,o,l,c),d,u).join("L")},pathPolygonAnnulus:function(n,o,l,c,d,u,x){var p,g;n<o?(p=n,g=o):(p=o,g=n);var m=r(t(p,l,c,d),u,x);return"M"+r(t(g,l,c,d),u,x).reverse().join("L")+"M"+m.join("L")}}},40872:function(F,C,e){"use strict";var T=e(84888).KY,k=e(3400).counterRegex,a=e(62400),w=e(39360),b=w.attr,f=w.name,s=k(f),t={};t[b]={valType:"subplotid",dflt:f,editType:"calc"},F.exports={attr:b,name:f,idRoot:f,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,o=r._subplots[f],l=0;l<o.length;l++){var c=o[l],d=T(n,f,c),u=r[c]._subplot;u||(u=a(i,c),r[c]._subplot=u),u.plot(d,r,i._promises)}},clean:function(i,r,n,o){for(var l=o._subplots[f]||[],c=o._has&&o._has("gl"),d=r._has&&r._has("gl"),u=c&&!d,x=0;x<l.length;x++){var p=l[x],g=o[p]._subplot;if(!r[p]&&g)for(var m in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[m].remove();u&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(57952).toSVG}},95300:function(F,C,e){"use strict";var T=e(22548),k=e(94724),a=e(86968).u,w=e(3400).extendFlat,b=e(67824).overrideAll,f=b({color:k.color,showline:w({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:w({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:w({},k.visible,{dflt:!0}),type:w({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:w({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:w({},k.minallowed,{editType:"plot"}),maxallowed:w({},k.maxallowed,{editType:"plot"}),range:w({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:w({},k.title.text,{editType:"plot",dflt:""}),font:w({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};w(t,f,s);var i={visible:w({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};w(i,f,s),F.exports={domain:a({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:T.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(31780),w=e(168),b=e(84888).op,f=e(26332),s=e(25404),t=e(95936),i=e(42568),r=e(22416),n=e(42136),o=e(76808),l=e(52976),c=e(95300),d=e(57696),u=e(39360),x=u.axisNames;function p(m,y,v,_){var h=v("bgcolor");_.bgColor=k.combine(h,_.paper_bgcolor);var S=v("sector");v("hole");var A,E=b(_.fullData,u.name,_.id),P=_.layoutOut;function I(me,ke){return v(A+"."+me,ke)}for(var D=0;D<x.length;D++){A=x[D],T.isPlainObject(m[A])||(m[A]={});var z=m[A],V=a.newContainer(y,A);V._id=V._name=A,V._attr=_.id+"."+A,V._traceIndices=E.map(function(me){return me._expandedIndex});var O=u.axisName2dataArray[A],j=g(z,V,I,E,O,_);r(z,V,I,{axData:E,dataAttr:O});var Y=I("visible");switch(d(V,y,P),I("uirevision",y.uirevision),V._m=1,A){case"radialaxis":I("minallowed"),I("maxallowed");var B,U=I("range"),q=V.getAutorangeDflt(U),te=I("autorange",q);!U||(U[0]!==null||U[1]!==null)&&(U[0]!==null&&U[1]!==null||te!=="reversed"&&te!==!0)&&(U[0]===null||te!=="min"&&te!=="max reversed")&&(U[1]===null||te!=="max"&&te!=="min reversed")||(U=void 0,delete V.range,V.autorange=!0,B=!0),B||(te=I("autorange",q=V.getAutorangeDflt(U))),z.autorange=te,te&&(o(I,te,U),j!=="linear"&&j!=="-"||I("rangemode"),V.isReversed()&&(V._m=-1)),V.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(j==="date"){T.log("Polar plots do not support date angular axes yet.");for(var ee=0;ee<E.length;ee++)E[ee].visible=!1;j=z.type=V.type="linear"}I(j==="linear"?"thetaunit":"period");var Q=I("direction");I("rotation",{counterclockwise:0,clockwise:90}[Q])}if(i(z,V,I,V.type,{tickSuffixDflt:V.thetaunit==="degrees"?"\xB0":void 0}),Y){var J,K,X,ie,se,ae,ue,ve,ye,pe,de=_.font||{};K=(J=I("color"))===z.color?J:de.color,X=de.size,ie=de.family,se=de.weight,ae=de.style,ue=de.variant,ve=de.textcase,ye=de.lineposition,pe=de.shadow,f(z,V,I,V.type),t(z,V,I,V.type,{font:{weight:se,style:ae,variant:ue,textcase:ve,lineposition:ye,shadow:pe,color:K,size:X,family:ie},noAutotickangles:A==="angularaxis"}),s(z,V,I,{outerTicks:!0}),n(z,V,I,{dfltColor:J,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[A]}),I("layer"),A==="radialaxis"&&(I("side"),I("angle",S[0]),I("title.text"),T.coerceFont(I,"title.font",{weight:se,style:ae,variant:ue,textcase:ve,lineposition:ye,shadow:pe,color:K,size:T.bigFont(X),family:ie}))}j!=="category"&&I("hoverformat"),V._input=z}y.angularaxis.type==="category"&&v("gridshape")}function g(m,y,v,_,h,S){var A=v("autotypenumbers",S.autotypenumbersDflt);if(v("type")==="-"){for(var E,P=0;P<_.length;P++)if(_[P].visible){E=_[P];break}E&&E[h]&&(y.type=l(E[h],"gregorian",{noMultiCategory:!0,autotypenumbers:A})),y.type==="-"?y.type="linear":m.type=y.type}return y.type}F.exports=function(m,y,v){w(m,y,v,{type:u.name,attributes:c,handleDefaults:p,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:v,layoutOut:y})}},62400:function(F,C,e){"use strict";var T=e(33428),k=e(49760),a=e(24040),w=e(3400),b=w.strRotate,f=w.strTranslate,s=e(76308),t=e(43616),i=e(7316),r=e(54460),n=e(78344),o=e(57696),l=e(19280).doAutoRange,c=e(51184),d=e(86476),u=e(93024),x=e(81668),p=e(22676).prepSelect,g=e(22676).selectOnClick,m=e(22676).clearOutline,y=e(93972),v=e(73696),_=e(39172).redrawReglTraces,h=e(84284).MID_SHIFT,S=e(39360),A=e(57384),E=e(36416),P=E.smith,I=E.reactanceArc,D=E.resistanceArc,z=E.smithTransform,V=w._,O=w.mod,j=w.deg2rad,Y=w.rad2deg;function B(Q,J,K){this.isSmith=K||!1,this.id=J,this.gd=Q,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var X=Q._fullLayout,ie="clip"+X._uid+J;this.clipIds.forTraces=ie+"-for-traces",this.clipPaths.forTraces=X._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=X["_"+(K?"smith":"polar")+"layer"].append("g").attr("class",J),this.getHole=function(se){return this.isSmith?0:se.hole},this.getSector=function(se){return this.isSmith?[0,360]:se.sector},this.getRadial=function(se){return this.isSmith?se.realaxis:se.radialaxis},this.getAngular=function(se){return this.isSmith?se.imaginaryaxis:se.angularaxis},K||(this.radialTickLayout=null,this.angularTickLayout=null)}var U=B.prototype;function q(Q){var J=Q.ticks+String(Q.ticklen)+String(Q.showticklabels);return"side"in Q&&(J+=Q.side),J}function te(Q,J){return J[w.findIndexOfMin(J,function(K){return w.angleDist(Q,K)})]}function ee(Q,J,K){return J?(Q.attr("display",null),Q.attr(K)):Q&&Q.attr("display","none"),Q}F.exports=function(Q,J,K){return new B(Q,J,K)},U.plot=function(Q,J){for(var K=this,X=J[K.id],ie=!1,se=0;se<Q.length;se++)if(Q[se][0].trace.cliponaxis===!1){ie=!0;break}K._hasClipOnAxisFalse=ie,K.updateLayers(J,X),K.updateLayout(J,X),i.generalUpdatePerTraceModule(K.gd,K,Q,X),K.updateFx(J,X),K.isSmith&&(delete X.realaxis.range,delete X.imaginaryaxis.range)},U.updateLayers=function(Q,J){var K=this,X=K.isSmith,ie=K.layers,se=K.getRadial(J),ae=K.getAngular(J),ue=S.layerNames,ve=ue.indexOf("frontplot"),ye=ue.slice(0,ve),pe=ae.layer==="below traces",de=se.layer==="below traces";pe&&ye.push("angular-line"),de&&ye.push("radial-line"),pe&&ye.push("angular-axis"),de&&ye.push("radial-axis"),ye.push("frontplot"),pe||ye.push("angular-line"),de||ye.push("radial-line"),pe||ye.push("angular-axis"),de||ye.push("radial-axis");var me=(X?"smith":"polar")+"sublayer",ke=K.framework.selectAll("."+me).data(ye,String);ke.enter().append("g").attr("class",function(Ce){return me+" "+Ce}).each(function(Ce){var ge=ie[Ce]=T.select(this);switch(Ce){case"frontplot":X||ge.append("g").classed("barlayer",!0),ge.append("g").classed("scatterlayer",!0);break;case"backplot":ge.append("g").classed("maplayer",!0);break;case"plotbg":ie.bg=ge.append("path");break;case"radial-grid":case"angular-grid":ge.style("fill","none");break;case"radial-line":ge.append("line").style("fill","none");break;case"angular-line":ge.append("path").style("fill","none")}}),ke.order()},U.updateLayout=function(Q,J){var K=this,X=K.layers,ie=Q._size,se=K.getRadial(J),ae=K.getAngular(J),ue=J.domain.x,ve=J.domain.y;K.xOffset=ie.l+ie.w*ue[0],K.yOffset=ie.t+ie.h*(1-ve[1]);var ye=K.xLength=ie.w*(ue[1]-ue[0]),pe=K.yLength=ie.h*(ve[1]-ve[0]),de=K.getSector(J);K.sectorInRad=de.map(j);var me,ke,Ce,ge,oe,re=K.sectorBBox=function(it){var at,gt=it[0],yt=it[1]-gt,pt=O(gt,360),et=pt+yt,$e=Math.cos(j(pt)),At=Math.sin(j(pt)),Ot=Math.cos(j(et)),Rt=Math.sin(j(et));return at=pt<=90&&et>=90||pt>90&&et>=450?1:At<=0&&Rt<=0?0:Math.max(At,Rt),[pt<=180&&et>=180||pt>180&&et>=540?-1:$e>=0&&Ot>=0?0:Math.min($e,Ot),pt<=270&&et>=270||pt>270&&et>=630?-1:At>=0&&Rt>=0?0:Math.min(At,Rt),et>=360?1:$e<=0&&Ot<=0?0:Math.max($e,Ot),at]}(de),fe=re[2]-re[0],Se=re[3]-re[1],be=pe/ye,we=Math.abs(Se/fe);be>we?(me=ye,oe=(pe-(ke=ye*we))/ie.h/2,Ce=[ue[0],ue[1]],ge=[ve[0]+oe,ve[1]-oe]):(ke=pe,oe=(ye-(me=pe/we))/ie.w/2,Ce=[ue[0]+oe,ue[1]-oe],ge=[ve[0],ve[1]]),K.xLength2=me,K.yLength2=ke,K.xDomain2=Ce,K.yDomain2=ge;var Me,Pe=K.xOffset2=ie.l+ie.w*Ce[0],De=K.yOffset2=ie.t+ie.h*(1-ge[1]),he=K.radius=me/fe,_e=K.innerRadius=K.getHole(J)*he,Ae=K.cx=Pe-he*re[0],Oe=K.cy=De+he*re[3],Ee=K.cxx=Ae-Pe,Be=K.cyy=Oe-De,Ve=se.side;Ve==="counterclockwise"?(Me=Ve,Ve="top"):Ve==="clockwise"&&(Me=Ve,Ve="bottom"),K.radialAxis=K.mockAxis(Q,J,se,{_id:"x",side:Ve,_trueSide:Me,domain:[_e/ie.w,he/ie.w]}),K.angularAxis=K.mockAxis(Q,J,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),K.doAutoRange(Q,J),K.updateAngularAxis(Q,J),K.updateRadialAxis(Q,J),K.updateRadialAxisTitle(Q,J),K.xaxis=K.mockCartesianAxis(Q,J,{_id:"x",domain:Ce}),K.yaxis=K.mockCartesianAxis(Q,J,{_id:"y",domain:ge});var Ze=K.pathSubplot();K.clipPaths.forTraces.select("path").attr("d",Ze).attr("transform",f(Ee,Be)),X.frontplot.attr("transform",f(Pe,De)).call(t.setClipUrl,K._hasClipOnAxisFalse?null:K.clipIds.forTraces,K.gd),X.bg.attr("d",Ze).attr("transform",f(Ae,Oe)).call(s.fill,J.bgcolor)},U.mockAxis=function(Q,J,K,X){var ie=w.extendFlat({},K,X);return o(ie,J,Q),ie},U.mockCartesianAxis=function(Q,J,K){var X=this,ie=X.isSmith,se=K._id,ae=w.extendFlat({type:"linear"},K);n(ae,Q);var ue={x:[0,2],y:[1,3]};return ae.setRange=function(){var ve=X.sectorBBox,ye=ue[se],pe=X.radialAxis._rl,de=(pe[1]-pe[0])/(1-X.getHole(J));ae.range=[ve[ye[0]]*de,ve[ye[1]]*de]},ae.isPtWithinRange=se!=="x"||ie?function(){return!0}:function(ve){return X.isPtInside(ve)},ae.setRange(),ae.setScale(),ae},U.doAutoRange=function(Q,J){var K=this,X=K.gd,ie=K.radialAxis,se=K.getRadial(J);l(X,ie);var ae=ie.range;if(se.range=ae.slice(),se._input.range=ae.slice(),ie._rl=[ie.r2l(ae[0],null,"gregorian"),ie.r2l(ae[1],null,"gregorian")],ie.minallowed!==void 0){var ue=ie.r2l(ie.minallowed);ie._rl[0]>ie._rl[1]?ie._rl[1]=Math.max(ie._rl[1],ue):ie._rl[0]=Math.max(ie._rl[0],ue)}if(ie.maxallowed!==void 0){var ve=ie.r2l(ie.maxallowed);ie._rl[0]<ie._rl[1]?ie._rl[1]=Math.min(ie._rl[1],ve):ie._rl[0]=Math.min(ie._rl[0],ve)}},U.updateRadialAxis=function(Q,J){var K=this,X=K.gd,ie=K.layers,se=K.radius,ae=K.innerRadius,ue=K.cx,ve=K.cy,ye=K.getRadial(J),pe=O(K.getSector(J)[0],360),de=K.radialAxis,me=ae<se,ke=K.isSmith;ke||(K.fillViewInitialKey("radialaxis.angle",ye.angle),K.fillViewInitialKey("radialaxis.range",de.range.slice()),de.setGeometry()),de.tickangle==="auto"&&pe>90&&pe<=270&&(de.tickangle=180);var Ce=ke?function(De){var he=z(K,P([De.x,0]));return f(he[0]-ue,he[1]-ve)}:function(De){return f(de.l2p(De.x)+ae,0)},ge=ke?function(De){return D(K,De.x,-1/0,1/0)}:function(De){return K.pathArc(de.r2p(De.x)+ae)},oe=q(ye);if(K.radialTickLayout!==oe&&(ie["radial-axis"].selectAll(".xtick").remove(),K.radialTickLayout=oe),me){de.setScale();var re=0,fe=ke?(de.tickvals||[]).filter(function(De){return De>=0}).map(function(De){return r.tickText(de,De,!0,!1)}):r.calcTicks(de),Se=ke?fe:r.clipEnds(de,fe),be=r.getTickSigns(de)[2];ke&&((de.ticks==="top"&&de.side==="bottom"||de.ticks==="bottom"&&de.side==="top")&&(be=-be),de.ticks==="top"&&de.side==="top"&&(re=-de.ticklen),de.ticks==="bottom"&&de.side==="bottom"&&(re=de.ticklen)),r.drawTicks(X,de,{vals:fe,layer:ie["radial-axis"],path:r.makeTickPath(de,0,be),transFn:Ce,crisp:!1}),r.drawGrid(X,de,{vals:Se,layer:ie["radial-grid"],path:ge,transFn:w.noop,crisp:!1}),r.drawLabels(X,de,{vals:fe,layer:ie["radial-axis"],transFn:Ce,labelFns:r.makeLabelFns(de,re)})}var we=K.radialAxisAngle=K.vangles?Y(te(j(ye.angle),K.vangles)):ye.angle,Me=f(ue,ve),Pe=Me+b(-we);ee(ie["radial-axis"],me&&(ye.showticklabels||ye.ticks),{transform:Pe}),ee(ie["radial-grid"],me&&ye.showgrid,{transform:ke?"":Me}),ee(ie["radial-line"].select("line"),me&&ye.showline,{x1:ke?-se:ae,y1:0,x2:se,y2:0,transform:Pe}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},U.updateRadialAxisTitle=function(Q,J,K){if(!this.isSmith){var X=this,ie=X.gd,se=X.radius,ae=X.cx,ue=X.cy,ve=X.getRadial(J),ye=X.id+"title",pe=0;if(ve.title){var de=t.bBox(X.layers["radial-axis"].node()).height,me=ve.title.font.size,ke=ve.side;pe=ke==="top"?me:ke==="counterclockwise"?-(de+.4*me):de+.8*me}var Ce=K!==void 0?K:X.radialAxisAngle,ge=j(Ce),oe=Math.cos(ge),re=Math.sin(ge),fe=ae+se/2*oe+pe*re,Se=ue-se/2*re+pe*oe;X.layers["radial-axis-title"]=x.draw(ie,ye,{propContainer:ve,propName:X.id+".radialaxis.title",placeholder:V(ie,"Click to enter radial axis title"),attributes:{x:fe,y:Se,"text-anchor":"middle"},transform:{rotate:-Ce}})}},U.updateAngularAxis=function(Q,J){var K=this,X=K.gd,ie=K.layers,se=K.radius,ae=K.innerRadius,ue=K.cx,ve=K.cy,ye=K.getAngular(J),pe=K.angularAxis,de=K.isSmith;de||(K.fillViewInitialKey("angularaxis.rotation",ye.rotation),pe.setGeometry(),pe.setScale());var me=de?function(De){var he=z(K,P([0,De.x]));return Math.atan2(he[0]-ue,he[1]-ve)-Math.PI/2}:function(De){return pe.t2g(De.x)};pe.type==="linear"&&pe.thetaunit==="radians"&&(pe.tick0=Y(pe.tick0),pe.dtick=Y(pe.dtick));var ke=function(De){return f(ue+se*Math.cos(De),ve-se*Math.sin(De))},Ce=de?function(De){var he=z(K,P([0,De.x]));return f(he[0],he[1])}:function(De){return ke(me(De))},ge=de?function(De){var he=z(K,P([0,De.x])),_e=Math.atan2(he[0]-ue,he[1]-ve)-Math.PI/2;return f(he[0],he[1])+b(-Y(_e))}:function(De){var he=me(De);return ke(he)+b(-Y(he))},oe=de?function(De){return I(K,De.x,0,1/0)}:function(De){var he=me(De),_e=Math.cos(he),Ae=Math.sin(he);return"M"+[ue+ae*_e,ve-ae*Ae]+"L"+[ue+se*_e,ve-se*Ae]},re=r.makeLabelFns(pe,0).labelStandoff,fe={xFn:function(De){var he=me(De);return Math.cos(he)*re},yFn:function(De){var he=me(De),_e=Math.sin(he)>0?.2:1;return-Math.sin(he)*(re+De.fontSize*_e)+Math.abs(Math.cos(he))*(De.fontSize*h)},anchorFn:function(De){var he=me(De),_e=Math.cos(he);return Math.abs(_e)<.1?"middle":_e>0?"start":"end"},heightFn:function(De,he,_e){var Ae=me(De);return-.5*(1+Math.sin(Ae))*_e}},Se=q(ye);K.angularTickLayout!==Se&&(ie["angular-axis"].selectAll("."+pe._id+"tick").remove(),K.angularTickLayout=Se);var be,we=de?[1/0].concat(pe.tickvals||[]).map(function(De){return r.tickText(pe,De,!0,!1)}):r.calcTicks(pe);if(de&&(we[0].text="\u221E",we[0].fontSize*=1.75),J.gridshape==="linear"?(be=we.map(me),w.angleDelta(be[0],be[1])<0&&(be=be.slice().reverse())):be=null,K.vangles=be,pe.type==="category"&&(we=we.filter(function(De){return w.isAngleInsideSector(me(De),K.sectorInRad)})),pe.visible){var Me=pe.ticks==="inside"?-1:1,Pe=(pe.linewidth||1)/2;r.drawTicks(X,pe,{vals:we,layer:ie["angular-axis"],path:"M"+Me*Pe+",0h"+Me*pe.ticklen,transFn:ge,crisp:!1}),r.drawGrid(X,pe,{vals:we,layer:ie["angular-grid"],path:oe,transFn:w.noop,crisp:!1}),r.drawLabels(X,pe,{vals:we,layer:ie["angular-axis"],repositionOnUpdate:!0,transFn:Ce,labelFns:fe})}ee(ie["angular-line"].select("path"),ye.showline,{d:K.pathSubplot(),transform:f(ue,ve)}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},U.updateFx=function(Q,J){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(Q),this.updateRadialDrag(Q,J,0),this.updateRadialDrag(Q,J,1)),this.updateHoverAndMainDrag(Q))},U.updateHoverAndMainDrag=function(Q){var J,K,X=this,ie=X.isSmith,se=X.gd,ae=X.layers,ue=Q._zoomlayer,ve=S.MINZOOM,ye=S.OFFEDGE,pe=X.radius,de=X.innerRadius,me=X.cx,ke=X.cy,Ce=X.cxx,ge=X.cyy,oe=X.sectorInRad,re=X.vangles,fe=X.radialAxis,Se=A.clampTiny,be=A.findXYatLength,we=A.findEnclosingVertexAngles,Me=S.cornerHalfWidth,Pe=S.cornerLen/2,De=c.makeDragger(ae,"path","maindrag",Q.dragmode===!1?"none":"crosshair");T.select(De).attr("d",X.pathSubplot()).attr("transform",f(me,ke)),De.onmousemove=function(nt){u.hover(se,nt,X.id),se._fullLayout._lasthover=De,se._fullLayout._hoversubplot=X.id},De.onmouseout=function(nt){se._dragging||d.unhover(se,nt)};var he,_e,Ae,Oe,Ee,Be,Ve,Ze,it,at={element:De,gd:se,subplot:X.id,plotinfo:{id:X.id,xaxis:X.xaxis,yaxis:X.yaxis},xaxes:[X.xaxis],yaxes:[X.yaxis]};function gt(nt,ze){return Math.sqrt(nt*nt+ze*ze)}function yt(nt,ze){return gt(nt-Ce,ze-ge)}function pt(nt,ze){return Math.atan2(ge-ze,nt-Ce)}function et(nt,ze){return[nt*Math.cos(ze),nt*Math.sin(-ze)]}function $e(nt,ze){if(nt===0)return X.pathSector(2*Me);var Fe=Pe/nt,rt=ze-Fe,We=ze+Fe,ft=Math.max(0,Math.min(nt,pe)),mt=ft-Me,vt=ft+Me;return"M"+et(mt,rt)+"A"+[mt,mt]+" 0,0,0 "+et(mt,We)+"L"+et(vt,We)+"A"+[vt,vt]+" 0,0,1 "+et(vt,rt)+"Z"}function At(nt,ze,Fe){if(nt===0)return X.pathSector(2*Me);var rt,We,ft=et(nt,ze),mt=et(nt,Fe),vt=Se((ft[0]+mt[0])/2),ut=Se((ft[1]+mt[1])/2);if(vt&&ut){var Mt=ut/vt,bt=-1/Mt,St=be(Me,Mt,vt,ut);rt=be(Pe,bt,St[0][0],St[0][1]),We=be(Pe,bt,St[1][0],St[1][1])}else{var Pt,Dt;ut?(Pt=Pe,Dt=Me):(Pt=Me,Dt=Pe),rt=[[vt-Pt,ut-Dt],[vt+Pt,ut-Dt]],We=[[vt-Pt,ut+Dt],[vt+Pt,ut+Dt]]}return"M"+rt.join("L")+"L"+We.reverse().join("L")+"Z"}function Ot(nt,ze){return ze=Math.max(Math.min(ze,pe),de),nt<ye?nt=0:pe-nt<ye?nt=pe:ze<ye?ze=0:pe-ze<ye&&(ze=pe),Math.abs(ze-nt)>ve?(nt<ze?(Ae=nt,Oe=ze):(Ae=ze,Oe=nt),!0):(Ae=null,Oe=null,!1)}function Rt(nt,ze){nt=nt||Ee,ze=ze||"M0,0Z",Ze.attr("d",nt),it.attr("d",ze),c.transitionZoombox(Ze,it,Be,Ve),Be=!0;var Fe={};Ye(Fe),se.emit("plotly_relayouting",Fe)}function Ct(nt,ze){var Fe,rt,We=he+(nt*=J),ft=_e+(ze*=K),mt=yt(he,_e),vt=Math.min(yt(We,ft),pe),ut=pt(he,_e);Ot(mt,vt)&&(Fe=Ee+X.pathSector(Oe),Ae&&(Fe+=X.pathSector(Ae)),rt=$e(Ae,ut)+$e(Oe,ut)),Rt(Fe,rt)}function Ge(nt,ze,Fe,rt){var We=A.findIntersectionXY(Fe,rt,Fe,[nt-Ce,ge-ze]);return gt(We[0],We[1])}function Xe(nt,ze){var Fe,rt,We=he+nt,ft=_e+ze,mt=pt(he,_e),vt=pt(We,ft),ut=we(mt,re),Mt=we(vt,re);Ot(Ge(he,_e,ut[0],ut[1]),Math.min(Ge(We,ft,Mt[0],Mt[1]),pe))&&(Fe=Ee+X.pathSector(Oe),Ae&&(Fe+=X.pathSector(Ae)),rt=[At(Ae,ut[0],ut[1]),At(Oe,ut[0],ut[1])].join(" ")),Rt(Fe,rt)}function Ne(){if(c.removeZoombox(se),Ae!==null&&Oe!==null){var nt={};Ye(nt),c.showDoubleClickNotifier(se),a.call("_guiRelayout",se,nt)}}function Ye(nt){var ze=fe._rl,Fe=(ze[1]-ze[0])/(1-de/pe)/pe,rt=[ze[0]+(Ae-de)*Fe,ze[0]+(Oe-de)*Fe];nt[X.id+".radialaxis.range"]=rt}function ot(nt,ze){var Fe=se._fullLayout.clickmode;if(c.removeZoombox(se),nt===2){var rt={};for(var We in X.viewInitial)rt[X.id+"."+We]=X.viewInitial[We];se.emit("plotly_doubleclick",null),a.call("_guiRelayout",se,rt)}Fe.indexOf("select")>-1&&nt===1&&g(ze,se,[X.xaxis],[X.yaxis],X.id,at),Fe.indexOf("event")>-1&&u.click(se,ze,X.id)}at.prepFn=function(nt,ze,Fe){var rt=se._fullLayout.dragmode,We=De.getBoundingClientRect();se._fullLayout._calcInverseTransform(se);var ft=se._fullLayout._invTransform;J=se._fullLayout._invScaleX,K=se._fullLayout._invScaleY;var mt=w.apply3DTransform(ft)(ze-We.left,Fe-We.top);if(he=mt[0],_e=mt[1],re){var vt=A.findPolygonOffset(pe,oe[0],oe[1],re);he+=Ce+vt[0],_e+=ge+vt[1]}switch(rt){case"zoom":at.clickFn=ot,ie||(at.moveFn=re?Xe:Ct,at.doneFn=Ne,function(){Ae=null,Oe=null,Ee=X.pathSubplot(),Be=!1;var ut=se._fullLayout[X.id];Ve=k(ut.bgcolor).getLuminance(),(Ze=c.makeZoombox(ue,Ve,me,ke,Ee)).attr("fill-rule","evenodd"),it=c.makeCorners(ue,me,ke),m(se)}());break;case"select":case"lasso":p(nt,ze,Fe,at,rt)}},d.init(at)},U.updateRadialDrag=function(Q,J,K){var X=this,ie=X.gd,se=X.layers,ae=X.radius,ue=X.innerRadius,ve=X.cx,ye=X.cy,pe=X.radialAxis,de=S.radialDragBoxSize,me=de/2;if(pe.visible){var ke,Ce,ge,oe=j(X.radialAxisAngle),re=pe._rl,fe=re[0],Se=re[1],be=re[K],we=.75*(re[1]-re[0])/(1-X.getHole(J))/ae;K?(ke=ve+(ae+me)*Math.cos(oe),Ce=ye-(ae+me)*Math.sin(oe),ge="radialdrag"):(ke=ve+(ue-me)*Math.cos(oe),Ce=ye-(ue-me)*Math.sin(oe),ge="radialdrag-inner");var Me,Pe,De,he=c.makeRectDragger(se,ge,"crosshair",-me,-me,de,de),_e={element:he,gd:ie};Q.dragmode===!1&&(_e.dragmode=!1),ee(T.select(he),pe.visible&&ue<ae,{transform:f(ke,Ce)}),_e.prepFn=function(){Me=null,Pe=null,De=null,_e.moveFn=Ae,_e.doneFn=Oe,m(ie)},_e.clampFn=function(Ve,Ze){return Math.sqrt(Ve*Ve+Ze*Ze)<S.MINDRAG&&(Ve=0,Ze=0),[Ve,Ze]},d.init(_e)}function Ae(Ve,Ze){if(Me)Me(Ve,Ze);else{var it=[Ve,-Ze],at=[Math.cos(oe),Math.sin(oe)],gt=Math.abs(w.dot(it,at)/Math.sqrt(w.dot(it,it)));isNaN(gt)||(Me=gt<.5?Ee:Be)}var yt={};(function(pt){Pe!==null?pt[X.id+".radialaxis.angle"]=Pe:De!==null&&(pt[X.id+".radialaxis.range["+K+"]"]=De)})(yt),ie.emit("plotly_relayouting",yt)}function Oe(){Pe!==null?a.call("_guiRelayout",ie,X.id+".radialaxis.angle",Pe):De!==null&&a.call("_guiRelayout",ie,X.id+".radialaxis.range["+K+"]",De)}function Ee(Ve,Ze){if(K!==0){var it=ke+Ve,at=Ce+Ze;Pe=Math.atan2(ye-at,it-ve),X.vangles&&(Pe=te(Pe,X.vangles)),Pe=Y(Pe);var gt=f(ve,ye)+b(-Pe);se["radial-axis"].attr("transform",gt),se["radial-line"].select("line").attr("transform",gt);var yt=X.gd._fullLayout,pt=yt[X.id];X.updateRadialAxisTitle(yt,pt,Pe)}}function Be(Ve,Ze){var it=w.dot([Ve,-Ze],[Math.cos(oe),Math.sin(oe)]);if(De=be-we*it,we>0==(K?De>fe:De<Se)){var at=ie._fullLayout,gt=at[X.id];pe.range[K]=De,pe._rl[K]=De,X.updateRadialAxis(at,gt),X.xaxis.setRange(),X.xaxis.setScale(),X.yaxis.setRange(),X.yaxis.setScale();var yt=!1;for(var pt in X.traceHash){var et=X.traceHash[pt],$e=w.filterVisible(et);et[0][0].trace._module.plot(ie,X,$e,gt),a.traceIs(pt,"gl")&&$e.length&&(yt=!0)}yt&&(v(ie),_(ie))}else De=null}},U.updateAngularDrag=function(Q){var J=this,K=J.gd,X=J.layers,ie=J.radius,se=J.angularAxis,ae=J.cx,ue=J.cy,ve=J.cxx,ye=J.cyy,pe=S.angularDragBoxSize,de=c.makeDragger(X,"path","angulardrag",Q.dragmode===!1?"none":"move"),me={element:de,gd:K};function ke(_e,Ae){return Math.atan2(ye+pe-Ae,_e-ve-pe)}Q.dragmode===!1?me.dragmode=!1:T.select(de).attr("d",J.pathAnnulus(ie,ie+pe)).attr("transform",f(ae,ue)).call(y,"move");var Ce,ge,oe,re,fe,Se,be=X.frontplot.select(".scatterlayer").selectAll(".trace"),we=be.selectAll(".point"),Me=be.selectAll(".textpoint");function Pe(_e,Ae){var Oe=J.gd._fullLayout,Ee=Oe[J.id],Be=ke(Ce+_e*Q._invScaleX,ge+Ae*Q._invScaleY),Ve=Y(Be-Se);if(re=oe+Ve,X.frontplot.attr("transform",f(J.xOffset2,J.yOffset2)+b([-Ve,ve,ye])),J.vangles){fe=J.radialAxisAngle+Ve;var Ze=f(ae,ue)+b(-Ve),it=f(ae,ue)+b(-fe);X.bg.attr("transform",Ze),X["radial-grid"].attr("transform",Ze),X["radial-axis"].attr("transform",it),X["radial-line"].select("line").attr("transform",it),J.updateRadialAxisTitle(Oe,Ee,fe)}else J.clipPaths.forTraces.select("path").attr("transform",f(ve,ye)+b(Ve));we.each(function(){var $e=T.select(this),At=t.getTranslate($e);$e.attr("transform",f(At.x,At.y)+b([Ve]))}),Me.each(function(){var $e=T.select(this),At=$e.select("text"),Ot=t.getTranslate($e);$e.attr("transform",b([Ve,At.attr("x"),At.attr("y")])+f(Ot.x,Ot.y))}),se.rotation=w.modHalf(re,360),J.updateAngularAxis(Oe,Ee),J._hasClipOnAxisFalse&&!w.isFullCircle(J.sectorInRad)&&be.call(t.hideOutsideRangePoints,J);var at=!1;for(var gt in J.traceHash)if(a.traceIs(gt,"gl")){var yt=J.traceHash[gt],pt=w.filterVisible(yt);yt[0][0].trace._module.plot(K,J,pt,Ee),pt.length&&(at=!0)}at&&(v(K),_(K));var et={};De(et),K.emit("plotly_relayouting",et)}function De(_e){_e[J.id+".angularaxis.rotation"]=re,J.vangles&&(_e[J.id+".radialaxis.angle"]=fe)}function he(){Me.select("text").attr("transform",null);var _e={};De(_e),a.call("_guiRelayout",K,_e)}me.prepFn=function(_e,Ae,Oe){var Ee=Q[J.id];oe=Ee.angularaxis.rotation;var Be=de.getBoundingClientRect();Ce=Ae-Be.left,ge=Oe-Be.top,K._fullLayout._calcInverseTransform(K);var Ve=w.apply3DTransform(Q._invTransform)(Ce,ge);Ce=Ve[0],ge=Ve[1],Se=ke(Ce,ge),me.moveFn=Pe,me.doneFn=he,m(K)},J.vangles&&!w.isFullCircle(J.sectorInRad)&&(me.prepFn=w.noop,y(T.select(de),null)),d.init(me)},U.isPtInside=function(Q){if(this.isSmith)return!0;var J=this.sectorInRad,K=this.vangles,X=this.angularAxis.c2g(Q.theta),ie=this.radialAxis,se=ie.c2l(Q.r),ae=ie._rl;return(K?A.isPtInsidePolygon:w.isPtInsideSector)(se,X,ae,J,K)},U.pathArc=function(Q){var J=this.sectorInRad,K=this.vangles;return(K?A.pathPolygon:w.pathArc)(Q,J[0],J[1],K)},U.pathSector=function(Q){var J=this.sectorInRad,K=this.vangles;return(K?A.pathPolygon:w.pathSector)(Q,J[0],J[1],K)},U.pathAnnulus=function(Q,J){var K=this.sectorInRad,X=this.vangles;return(X?A.pathPolygonAnnulus:w.pathAnnulus)(Q,J,K[0],K[1],X)},U.pathSubplot=function(){var Q=this.innerRadius,J=this.radius;return Q?this.pathAnnulus(Q,J):this.pathSector(J)},U.fillViewInitialKey=function(Q,J){Q in this.viewInitial||(this.viewInitial[Q]=J)}},57696:function(F,C,e){"use strict";var T=e(3400),k=e(78344),a=T.deg2rad,w=T.rad2deg;F.exports=function(b,f,s){switch(k(b,s),b._id){case"x":case"radialaxis":(function(t,i){var r=i._subplot;t.setGeometry=function(){var n=t._rl[0],o=t._rl[1],l=r.innerRadius,c=(r.radius-l)/(o-n),d=l/c,u=n>o?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var p=t.c2l(x)-n;return(u(p)?p:0)+d},t.g2c=function(x){return t.l2c(x+n-d)},t.g2p=function(x){return x*c},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(b,f);break;case"angularaxis":(function(t,i){var r=t.type;if(r==="linear"){var n=t.d2c,o=t.c2d;t.d2c=function(l,c){return function(d,u){return u==="degrees"?a(d):d}(n(l),c)},t.c2d=function(l,c){return o(function(d,u){return u==="degrees"?w(d):d}(l,c))}}t.makeCalcdata=function(l,c){var d,u,x=l[c],p=l._length,g=function(h){return t.d2c(h,l.thetaunit)};if(x)for(d=new Array(p),u=0;u<p;u++)d[u]=g(x[u]);else{var m=c+"0",y="d"+c,v=m in l?g(l[m]):0,_=l[y]?g(l[y]):(t.period||2*Math.PI)/p;for(d=new Array(p),u=0;u<p;u++)d[u]=v+u*_}return d},t.setGeometry=function(){var l,c,d,u,x=i.sector,p=x.map(a),g={clockwise:-1,counterclockwise:1}[t.direction],m=a(t.rotation),y=function(S){return g*S+m},v=function(S){return(S-m)/g};switch(r){case"linear":c=l=T.identity,u=a,d=w,t.range=T.isFullCircle(p)?[x[0],x[0]+360]:p.map(v).map(w);break;case"category":var _=t._categories.length,h=t.period?Math.max(t.period,_):_;h===0&&(h=1),c=u=function(S){return 2*S*Math.PI/h},l=d=function(S){return S*h/Math.PI/2},t.range=[0,h]}t.c2g=function(S){return y(c(S))},t.g2c=function(S){return l(v(S))},t.t2g=function(S){return y(u(S))},t.g2t=function(S){return d(v(S))}}})(b,f)}}},55012:function(F){"use strict";F.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(F){"use strict";function C(a){return a<0?-1:a>0?1:0}function e(a){var w=a[0],b=a[1];if(!isFinite(w)||!isFinite(b))return[1,0];var f=(w+1)*(w+1)+b*b;return[(w*w+b*b-1)/f,2*b/f]}function T(a,w){var b=w[0],f=w[1];return[b*a.radius+a.cx,-f*a.radius+a.cy]}function k(a,w){return w*a.radius}F.exports={smith:e,reactanceArc:function(a,w,b,f){var s=T(a,e([b,w])),t=s[0],i=s[1],r=T(a,e([f,w])),n=r[0],o=r[1];if(w===0)return["M"+t+","+i,"L"+n+","+o].join(" ");var l=k(a,1/Math.abs(w));return["M"+t+","+i,"A"+l+","+l+" 0 0,"+(w<0?1:0)+" "+n+","+o].join(" ")},resistanceArc:function(a,w,b,f){var s=k(a,1/(w+1)),t=T(a,e([w,b])),i=t[0],r=t[1],n=T(a,e([w,f])),o=n[0],l=n[1];if(C(b)!==C(f)){var c=T(a,e([w,0]));return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+c[0]+","+c[1],"A"+s+","+s+" 0 0,"+(f<0?0:1)+o+","+l].join(" ")}return["M"+i+","+r,"A"+s+","+s+" 0 0,"+(f<b?0:1)+" "+o+","+l].join(" ")},smithTransform:T}},47788:function(F,C,e){"use strict";var T=e(84888).KY,k=e(3400).counterRegex,a=e(62400),w=e(55012),b=w.attr,f=w.name,s=k(f),t={};t[b]={valType:"subplotid",dflt:f,editType:"calc"},F.exports={attr:b,name:f,idRoot:f,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,o=r._subplots[f],l=0;l<o.length;l++){var c=o[l],d=T(n,f,c),u=r[c]._subplot;u||(u=a(i,c,!0),r[c]._subplot=u),u.plot(d,r,i._promises)}},clean:function(i,r,n,o){for(var l=o._subplots[f]||[],c=0;c<l.length;c++){var d=l[c],u=o[d]._subplot;if(!r[d]&&u)for(var x in u.framework.remove(),u.clipPaths)u.clipPaths[x].remove()}},toSVG:e(57952).toSVG}},6183:function(F,C,e){"use strict";var T=e(22548),k=e(94724),a=e(86968).u,w=e(3400).extendFlat,b=e(67824).overrideAll,f=b({color:k.color,showline:w({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:w({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({ticklen:k.ticklen,tickwidth:w({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=w({visible:w({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:w({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},f,s),i=w({visible:w({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},f,s);F.exports={domain:a({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:T.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(F,C,e){"use strict";var T,k,a,w=e(3400),b=e(76308),f=e(31780),s=e(168),t=e(84888).op,i=e(42568),r=e(95936),n=e(42136),o=e(78344),l=e(6183),c=e(55012),d=c.axisNames,u=(T=function(p){return w.isTypedArray(p)&&(p=Array.from(p)),p.slice().reverse().map(function(g){return-g}).concat([0]).concat(p)},k=String,a={},function(p){var g=k?k(p):p;if(g in a)return a[g];var m=T(p);return a[g]=m,m});function x(p,g,m,y){var v=m("bgcolor");y.bgColor=b.combine(v,y.paper_bgcolor);var _,h=t(y.fullData,c.name,y.id),S=y.layoutOut;function A(U,q){return m(_+"."+U,q)}for(var E=0;E<d.length;E++){_=d[E],w.isPlainObject(p[_])||(p[_]={});var P=p[_],I=f.newContainer(g,_);I._id=I._name=_,I._attr=y.id+"."+_,I._traceIndices=h.map(function(U){return U._expandedIndex});var D=A("visible");if(I.type="linear",o(I,S),i(P,I,A,I.type),D){var z,V,O,j,Y=_==="realaxis";Y&&A("side"),Y?A("tickvals"):A("tickvals",u(g.realaxis.tickvals||l.realaxis.tickvals.dflt)),w.isTypedArray(I.tickvals)&&(I.tickvals=Array.from(I.tickvals));var B=y.font||{};D&&(V=(z=A("color"))===P.color?z:B.color,O=B.size,j=B.family),r(P,I,A,I.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!Y,noExp:!0,font:{color:V,size:O,family:j}}),w.coerce2(p,g,l,_+".ticklen"),w.coerce2(p,g,l,_+".tickwidth"),w.coerce2(p,g,l,_+".tickcolor",g.color),A("ticks")||(delete g[_].ticklen,delete g[_].tickwidth,delete g[_].tickcolor),n(P,I,A,{dfltColor:z,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[_]}),A("layer")}A("hoverformat"),delete I.type,I._input=P}}F.exports=function(p,g,m){s(p,g,m,{noUirevision:!0,type:c.name,attributes:l,handleDefaults:x,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:m,layoutOut:g})}},168:function(F,C,e){"use strict";var T=e(3400),k=e(31780),a=e(86968).Q;F.exports=function(w,b,f,s){var t,i,r=s.type,n=s.attributes,o=s.handleDefaults,l=s.partition||"x",c=b._subplots[r],d=c.length,u=d&&c[0].replace(/\d+$/,"");function x(y,v){return T.coerce(t,i,n,y,v)}for(var p=0;p<d;p++){var g=c[p];t=w[g]?w[g]:w[g]={},i=k.newContainer(b,g,u),s.noUirevision||x("uirevision",b.uirevision);var m={};m[l]=[p/d,(p+1)/d],a(i,b,x,m),s.id=g,o(t,i,x,s)}}},21776:function(F,C,e){"use strict";var T=e(26880);function k(a){var w=a.description?" "+a.description:"",b=a.keys||[];if(b.length>0){for(var f=[],s=0;s<b.length;s++)f[s]="`"+b[s]+"`";w+="Finally, the template string has access to ",w=b.length===1?w+"variable "+f[0]:w+"variables "+f.slice(0,-1).join(", ")+" and "+f.slice(-1)+"."}return w}T.FORMAT_LINK,T.DATE_FORMAT_LINK,C.Ks=function(a,w){a=a||{},k(w=w||{});var b={valType:"string",dflt:"",editType:a.editType||"none"};return a.arrayOk!==!1&&(b.arrayOk=!0),b},C.Gw=function(a,w){a=a||{},k(w=w||{});var b={valType:"string",dflt:"",editType:a.editType||"calc"};return a.arrayOk!==!1&&(b.arrayOk=!0),b},C.ye=function(a,w){return w=w||{},(a=a||{}).newshape,k(w),{valType:"string",dflt:"",editType:a.editType||"arraydraw"}}},19352:function(F,C,e){"use strict";var T=e(24696),k=e(84888).KY,a=e(3400).counterRegex,w="ternary";C.name=w;var b=C.attr="subplot";C.idRoot=w,C.idRegex=C.attrRegex=a(w),(C.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},C.layoutAttributes=e(86379),C.supplyLayoutDefaults=e(38536),C.plot=function(f){for(var s=f._fullLayout,t=f.calcdata,i=s._subplots[w],r=0;r<i.length;r++){var n=i[r],o=k(t,w,n),l=s[n]._subplot;l||(l=new T({id:n,graphDiv:f,container:s._ternarylayer.node()},s),s[n]._subplot=l),l.plot(o,s,f._promises)}},C.clean=function(f,s,t,i){for(var r=i._subplots[w]||[],n=0;n<r.length;n++){var o=r[n],l=i[o]._subplot;!s[o]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(F,C,e){"use strict";var T=e(22548),k=e(86968).u,a=e(94724),w=e(67824).overrideAll,b=e(92880).extendFlat,f={title:{text:a.title.text,font:a.title.font},color:a.color,tickmode:a.minor.tickmode,nticks:b({},a.nticks,{dflt:6,min:1}),tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,labelalias:a.labelalias,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:b({},a.showline,{dflt:!0}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:b({},a.showgrid,{dflt:!0}),gridcolor:a.gridcolor,gridwidth:a.gridwidth,griddash:a.griddash,layer:a.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}},s=F.exports=w({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:T.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},38536:function(F,C,e){"use strict";var T=e(76308),k=e(31780),a=e(3400),w=e(168),b=e(95936),f=e(42568),s=e(25404),t=e(26332),i=e(42136),r=e(86379),n=["aaxis","baxis","caxis"];function o(c,d,u,x){var p,g,m,y=u("bgcolor"),v=u("sum");x.bgColor=T.combine(y,x.paper_bgcolor);for(var _=0;_<n.length;_++)g=c[p=n[_]]||{},(m=k.newContainer(d,p))._name=p,l(g,m,x,d);var h=d.aaxis,S=d.baxis,A=d.caxis;h.min+S.min+A.min>=v&&(h.min=0,S.min=0,A.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function l(c,d,u,x){var p=r[d._name];function g(S,A){return a.coerce(c,d,p,S,A)}g("uirevision",x.uirevision),d.type="linear";var m=g("color"),y=m!==p.color.dflt?m:u.font.color,v=d._name.charAt(0).toUpperCase(),_="Component "+v,h=g("title.text",_);d._hovertitle=h===_?h:v,a.coerceFont(g,"title.font",u.font,{overrideDflt:{size:a.bigFont(u.font.size),color:y}}),g("min"),t(c,d,g,"linear"),f(c,d,g,"linear"),b(c,d,g,"linear",{noAutotickangles:!0}),s(c,d,g,{outerTicks:!0}),g("showticklabels")&&(a.coerceFont(g,"tickfont",u.font,{overrideDflt:{color:y}}),g("tickangle"),g("tickformat")),i(c,d,g,{dfltColor:m,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p}),g("hoverformat"),g("layer")}F.exports=function(c,d,u){w(c,d,u,{type:"ternary",attributes:r,handleDefaults:o,font:d.font,paper_bgcolor:d.paper_bgcolor})}},24696:function(F,C,e){"use strict";var T=e(33428),k=e(49760),a=e(24040),w=e(3400),b=w.strTranslate,f=w._,s=e(76308),t=e(43616),i=e(78344),r=e(92880).extendFlat,n=e(7316),o=e(54460),l=e(86476),c=e(93024),d=e(72760),u=d.freeMode,x=d.rectMode,p=e(81668),g=e(22676).prepSelect,m=e(22676).selectOnClick,y=e(22676).clearOutline,v=e(22676).clearSelectionsCache,_=e(33816);function h(O,j){this.id=O.id,this.graphDiv=O.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}F.exports=h;var S=h.prototype;S.init=function(O){this.container=O._ternarylayer,this.defs=O._defs,this.layoutId=O._uid,this.traceHash={},this.layers={}},S.plot=function(O,j){var Y=this,B=j[Y.id],U=j._size;Y._hasClipOnAxisFalse=!1;for(var q=0;q<O.length;q++)if(O[q][0].trace.cliponaxis===!1){Y._hasClipOnAxisFalse=!0;break}Y.updateLayers(B),Y.adjustLayout(B,U),n.generalUpdatePerTraceModule(Y.graphDiv,Y,O,B),Y.layers.plotbg.select("path").call(s.fill,B.bgcolor)},S.makeFramework=function(O){var j=this,Y=j.graphDiv,B=O[j.id],U=j.clipId="clip"+j.layoutId+j.id,q=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=w.ensureSingleById(O._clips,"clipPath",U,function(te){te.append("path").attr("d","M0,0Z")}),j.clipDefRelative=w.ensureSingleById(O._clips,"clipPath",q,function(te){te.append("path").attr("d","M0,0Z")}),j.plotContainer=w.ensureSingle(j.container,"g",j.id),j.updateLayers(B),t.setClipUrl(j.layers.backplot,U,Y),t.setClipUrl(j.layers.grids,U,Y)},S.updateLayers=function(O){var j=this.layers,Y=["draglayer","plotbg","backplot","grids"];O.aaxis.layer==="below traces"&&Y.push("aaxis","aline"),O.baxis.layer==="below traces"&&Y.push("baxis","bline"),O.caxis.layer==="below traces"&&Y.push("caxis","cline"),Y.push("frontplot"),O.aaxis.layer==="above traces"&&Y.push("aaxis","aline"),O.baxis.layer==="above traces"&&Y.push("baxis","bline"),O.caxis.layer==="above traces"&&Y.push("caxis","cline");var B=this.plotContainer.selectAll("g.toplevel").data(Y,String),U=["agrid","bgrid","cgrid"];B.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var te=T.select(this);j[q]=te,q==="frontplot"?te.append("g").classed("scatterlayer",!0):q==="backplot"?te.append("g").classed("maplayer",!0):q==="plotbg"?te.append("path").attr("d","M0,0Z"):q==="aline"||q==="bline"||q==="cline"?te.append("path"):q==="grids"&&U.forEach(function(ee){j[ee]=te.append("g").classed("grid "+ee,!0)})}),B.order()};var A=Math.sqrt(4/3);S.adjustLayout=function(O,j){var Y,B,U,q,te,ee,Q=this,J=O.domain,K=(J.x[0]+J.x[1])/2,X=(J.y[0]+J.y[1])/2,ie=J.x[1]-J.x[0],se=J.y[1]-J.y[0],ae=ie*j.w,ue=se*j.h,ve=O.sum,ye=O.aaxis.min,pe=O.baxis.min,de=O.caxis.min;ae>A*ue?U=(q=ue)*A:q=(U=ae)/A,te=ie*U/ae,ee=se*q/ue,Y=j.l+j.w*K-U/2,B=j.t+j.h*(1-X)-q/2,Q.x0=Y,Q.y0=B,Q.w=U,Q.h=q,Q.sum=ve,Q.xaxis={type:"linear",range:[ye+2*de-ve,ve-ye-2*pe],domain:[K-te/2,K+te/2],_id:"x"},i(Q.xaxis,Q.graphDiv._fullLayout),Q.xaxis.setScale(),Q.xaxis.isPtWithinRange=function(Me){return Me.a>=Q.aaxis.range[0]&&Me.a<=Q.aaxis.range[1]&&Me.b>=Q.baxis.range[1]&&Me.b<=Q.baxis.range[0]&&Me.c>=Q.caxis.range[1]&&Me.c<=Q.caxis.range[0]},Q.yaxis={type:"linear",range:[ye,ve-pe-de],domain:[X-ee/2,X+ee/2],_id:"y"},i(Q.yaxis,Q.graphDiv._fullLayout),Q.yaxis.setScale(),Q.yaxis.isPtWithinRange=function(){return!0};var me=Q.yaxis.domain[0],ke=Q.aaxis=r({},O.aaxis,{range:[ye,ve-pe-de],side:"left",tickangle:(+O.aaxis.tickangle||0)-30,domain:[me,me+ee*A],anchor:"free",position:0,_id:"y",_length:U});i(ke,Q.graphDiv._fullLayout),ke.setScale();var Ce=Q.baxis=r({},O.baxis,{range:[ve-ye-de,pe],side:"bottom",domain:Q.xaxis.domain,anchor:"free",position:0,_id:"x",_length:U});i(Ce,Q.graphDiv._fullLayout),Ce.setScale();var ge=Q.caxis=r({},O.caxis,{range:[ve-ye-pe,de],side:"right",tickangle:(+O.caxis.tickangle||0)+30,domain:[me,me+ee*A],anchor:"free",position:0,_id:"y",_length:U});i(ge,Q.graphDiv._fullLayout),ge.setScale();var oe="M"+Y+","+(B+q)+"h"+U+"l-"+U/2+",-"+q+"Z";Q.clipDef.select("path").attr("d",oe),Q.layers.plotbg.select("path").attr("d",oe);var re="M0,"+q+"h"+U+"l-"+U/2+",-"+q+"Z";Q.clipDefRelative.select("path").attr("d",re);var fe=b(Y,B);Q.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",fe),Q.clipDefRelative.select("path").attr("transform",null);var Se=b(Y-Ce._offset,B+q);Q.layers.baxis.attr("transform",Se),Q.layers.bgrid.attr("transform",Se);var be=b(Y+U/2,B)+"rotate(30)"+b(0,-ke._offset);Q.layers.aaxis.attr("transform",be),Q.layers.agrid.attr("transform",be);var we=b(Y+U/2,B)+"rotate(-30)"+b(0,-ge._offset);Q.layers.caxis.attr("transform",we),Q.layers.cgrid.attr("transform",we),Q.drawAxes(!0),Q.layers.aline.select("path").attr("d",ke.showline?"M"+Y+","+(B+q)+"l"+U/2+",-"+q:"M0,0").call(s.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),Q.layers.bline.select("path").attr("d",Ce.showline?"M"+Y+","+(B+q)+"h"+U:"M0,0").call(s.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),Q.layers.cline.select("path").attr("d",ge.showline?"M"+(Y+U/2)+","+B+"l"+U/2+","+q:"M0,0").call(s.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),Q.graphDiv._context.staticPlot||Q.initInteractions(),t.setClipUrl(Q.layers.frontplot,Q._hasClipOnAxisFalse?null:Q.clipId,Q.graphDiv)},S.drawAxes=function(O){var j=this,Y=j.graphDiv,B=j.id.substr(7)+"title",U=j.layers,q=j.aaxis,te=j.baxis,ee=j.caxis;if(j.drawAx(q),j.drawAx(te),j.drawAx(ee),O){var Q=Math.max(q.showticklabels?q.tickfont.size/2:0,(ee.showticklabels?.75*ee.tickfont.size:0)+(ee.ticks==="outside"?.87*ee.ticklen:0)),J=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;U["a-title"]=p.draw(Y,"a"+B,{propContainer:q,propName:j.id+".aaxis.title",placeholder:f(Y,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-q.title.font.size/3-Q,"text-anchor":"middle"}}),U["b-title"]=p.draw(Y,"b"+B,{propContainer:te,propName:j.id+".baxis.title",placeholder:f(Y,"Click to enter Component B title"),attributes:{x:j.x0-J,y:j.y0+j.h+.83*te.title.font.size+J,"text-anchor":"middle"}}),U["c-title"]=p.draw(Y,"c"+B,{propContainer:ee,propName:j.id+".caxis.title",placeholder:f(Y,"Click to enter Component C title"),attributes:{x:j.x0+j.w+J,y:j.y0+j.h+.83*ee.title.font.size+J,"text-anchor":"middle"}})}},S.drawAx=function(O){var j,Y=this,B=Y.graphDiv,U=O._name,q=U.charAt(0),te=O._id,ee=Y.layers[U],Q=q+"tickLayout",J=(j=O).ticks+String(j.ticklen)+String(j.showticklabels);Y[Q]!==J&&(ee.selectAll("."+te+"tick").remove(),Y[Q]=J),O.setScale();var K=o.calcTicks(O),X=o.clipEnds(O,K),ie=o.makeTransTickFn(O),se=o.getTickSigns(O)[2],ae=w.deg2rad(30),ue=se*(O.linewidth||1)/2,ve=se*O.ticklen,ye=Y.w,pe=Y.h,de=q==="b"?"M0,"+ue+"l"+Math.sin(ae)*ve+","+Math.cos(ae)*ve:"M"+ue+",0l"+Math.cos(ae)*ve+","+-Math.sin(ae)*ve,me={a:"M0,0l"+pe+",-"+ye/2,b:"M0,0l-"+ye/2+",-"+pe,c:"M0,0l-"+pe+","+ye/2}[q];o.drawTicks(B,O,{vals:O.ticks==="inside"?X:K,layer:ee,path:de,transFn:ie,crisp:!1}),o.drawGrid(B,O,{vals:X,layer:Y.layers[q+"grid"],path:me,transFn:ie,crisp:!1}),o.drawLabels(B,O,{vals:K,layer:ee,transFn:ie,labelFns:o.makeLabelFns(O,0,30)})};var E=_.MINZOOM/2+.87,P="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",I="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",D="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function V(O){T.select(O).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){v(this.dragOptions),y(this.dragOptions.gd)},S.initInteractions=function(){var O,j,Y,B,U,q,te,ee,Q,J,K,X,ie=this,se=ie.layers.plotbg.select("path").node(),ae=ie.graphDiv,ue=ae._fullLayout._zoomlayer;function ve(re){var fe={};return fe[ie.id+".aaxis.min"]=re.a,fe[ie.id+".baxis.min"]=re.b,fe[ie.id+".caxis.min"]=re.c,fe}function ye(re,fe){var Se=ae._fullLayout.clickmode;V(ae),re===2&&(ae.emit("plotly_doubleclick",null),a.call("_guiRelayout",ae,ve({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&re===1&&m(fe,ae,[ie.xaxis],[ie.yaxis],ie.id,ie.dragOptions),Se.indexOf("event")>-1&&c.click(ae,fe,ie.id)}function pe(re,fe){return 1-fe/ie.h}function de(re,fe){return 1-(re+(ie.h-fe)/Math.sqrt(3))/ie.w}function me(re,fe){return(re-(ie.h-fe)/Math.sqrt(3))/ie.w}function ke(re,fe){var Se=Y+re*O,be=B+fe*j,we=Math.max(0,Math.min(1,pe(0,B),pe(0,be))),Me=Math.max(0,Math.min(1,de(Y,B),de(Se,be))),Pe=Math.max(0,Math.min(1,me(Y,B),me(Se,be))),De=(we/2+Pe)*ie.w,he=(1-we/2-Me)*ie.w,_e=(De+he)/2,Ae=he-De,Oe=(1-we)*ie.h,Ee=Oe-Ae/A;Ae<_.MINZOOM?(te=U,K.attr("d",Q),X.attr("d","M0,0Z")):(te={a:U.a+we*q,b:U.b+Me*q,c:U.c+Pe*q},K.attr("d",Q+"M"+De+","+Oe+"H"+he+"L"+_e+","+Ee+"L"+De+","+Oe+"Z"),X.attr("d","M"+Y+","+B+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+De+","+Oe+P+"M"+he+","+Oe+I+"M"+_e+","+Ee+D)),J||(K.transition().style("fill",ee>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),J=!0),ae.emit("plotly_relayouting",ve(te))}function Ce(){V(ae),te!==U&&(a.call("_guiRelayout",ae,ve(te)),z&&ae.data&&ae._context.showTips&&(w.notifier(f(ae,"Double-click to zoom back out"),"long"),z=!1))}function ge(re,fe){var Se=re/ie.xaxis._m,be=fe/ie.yaxis._m,we=[(te={a:U.a-be,b:U.b+(Se+be)/2,c:U.c-(Se-be)/2}).a,te.b,te.c].sort(w.sorterAsc),Me=we.indexOf(te.a),Pe=we.indexOf(te.b),De=we.indexOf(te.c);we[0]<0&&(we[1]+we[0]/2<0?(we[2]+=we[0]+we[1],we[0]=we[1]=0):(we[2]+=we[0]/2,we[1]+=we[0]/2,we[0]=0),te={a:we[Me],b:we[Pe],c:we[De]},fe=(U.a-te.a)*ie.yaxis._m,re=(U.c-te.c-U.b+te.b)*ie.xaxis._m);var he=b(ie.x0+re,ie.y0+fe);ie.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",he);var _e=b(-re,-fe);ie.clipDefRelative.select("path").attr("transform",_e),ie.aaxis.range=[te.a,ie.sum-te.b-te.c],ie.baxis.range=[ie.sum-te.a-te.c,te.b],ie.caxis.range=[ie.sum-te.a-te.b,te.c],ie.drawAxes(!1),ie._hasClipOnAxisFalse&&ie.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ie),ae.emit("plotly_relayouting",ve(te))}function oe(){a.call("_guiRelayout",ae,ve(te))}this.dragOptions={element:se,gd:ae,plotinfo:{id:ie.id,domain:ae._fullLayout[ie.id].domain,xaxis:ie.xaxis,yaxis:ie.yaxis},subplot:ie.id,prepFn:function(re,fe,Se){ie.dragOptions.xaxes=[ie.xaxis],ie.dragOptions.yaxes=[ie.yaxis],O=ae._fullLayout._invScaleX,j=ae._fullLayout._invScaleY;var be=ie.dragOptions.dragmode=ae._fullLayout.dragmode;u(be)?ie.dragOptions.minDrag=1:ie.dragOptions.minDrag=void 0,be==="zoom"?(ie.dragOptions.moveFn=ke,ie.dragOptions.clickFn=ye,ie.dragOptions.doneFn=Ce,function(we,Me,Pe){var De=se.getBoundingClientRect();Y=Me-De.left,B=Pe-De.top,ae._fullLayout._calcInverseTransform(ae);var he=ae._fullLayout._invTransform,_e=w.apply3DTransform(he)(Y,B);Y=_e[0],B=_e[1],U={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},te=U,q=ie.aaxis.range[1]-U.a,ee=k(ie.graphDiv._fullLayout[ie.id].bgcolor).getLuminance(),Q="M0,"+ie.h+"L"+ie.w/2+", 0L"+ie.w+","+ie.h+"Z",J=!1,K=ue.append("path").attr("class","zoombox").attr("transform",b(ie.x0,ie.y0)).style({fill:ee>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",Q),X=ue.append("path").attr("class","zoombox-corners").attr("transform",b(ie.x0,ie.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ie.clearOutline(ae)}(0,fe,Se)):be==="pan"?(ie.dragOptions.moveFn=ge,ie.dragOptions.clickFn=ye,ie.dragOptions.doneFn=oe,U={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},te=U,ie.clearOutline(ae)):(x(be)||u(be))&&g(re,fe,Se,ie.dragOptions,be)}},se.onmousemove=function(re){c.hover(ae,re,ie.id),ae._fullLayout._lasthover=se,ae._fullLayout._hoversubplot=ie.id},se.onmouseout=function(re){ae._dragging||l.unhover(ae,re)},l.init(this.dragOptions)}},24040:function(F,C,e){"use strict";var T=e(24248),k=e(16628),a=e(52416),w=e(63620),b=e(52200).addStyleRule,f=e(92880),s=e(45464),t=e(64859),i=f.extendFlat,r=f.extendDeepAll;function n(m){var y=m.name,v=m.categories,_=m.meta;if(C.modules[y])T.log("Type "+y+" already registered");else{C.subplotsRegistry[m.basePlotModule.name]||function(z){var V=z.name;if(C.subplotsRegistry[V])T.log("Plot type "+V+" already registered.");else for(var O in d(z),C.subplotsRegistry[V]=z,C.componentsRegistry)p(O,z.name)}(m.basePlotModule);for(var h={},S=0;S<v.length;S++)h[v[S]]=!0,C.allCategories[v[S]]=!0;for(var A in C.modules[y]={_module:m,categories:h},_&&Object.keys(_).length&&(C.modules[y].meta=_),C.allTypes.push(y),C.componentsRegistry)u(A,y);m.layoutAttributes&&i(C.traceLayoutAttributes,m.layoutAttributes);var E=m.basePlotModule,P=E.name;if(P==="mapbox"){var I=E.constants.styleRules;for(var D in I)b(".js-plotly-plot .plotly .mapboxgl-"+D,I[D])}P!=="geo"&&P!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function o(m){if(typeof m.name!="string")throw new Error("Component module *name* must be a string.");var y=m.name;for(var v in C.componentsRegistry[y]=m,m.layoutAttributes&&(m.layoutAttributes._isLinkedToArray&&a(C.layoutArrayContainers,y),d(m)),C.modules)u(y,v);for(var _ in C.subplotsRegistry)p(y,_);for(var h in C.transformsRegistry)x(y,h);m.schema&&m.schema.layout&&r(t,m.schema.layout)}function l(m){if(typeof m.name!="string")throw new Error("Transform module *name* must be a string.");var y="Transform module "+m.name,v=typeof m.transform=="function",_=typeof m.calcTransform=="function";if(!v&&!_)throw new Error(y+" is missing a *transform* or *calcTransform* method.");for(var h in v&&_&&T.log([y+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),w(m.attributes)||T.log(y+" registered without an *attributes* object."),typeof m.supplyDefaults!="function"&&T.log(y+" registered without a *supplyDefaults* method."),C.transformsRegistry[m.name]=m,C.componentsRegistry)x(h,m.name)}function c(m){var y=m.name,v=y.split("-")[0],_=m.dictionary,h=m.format,S=_&&Object.keys(_).length,A=h&&Object.keys(h).length,E=C.localeRegistry,P=E[y];if(P||(E[y]=P={}),v!==y){var I=E[v];I||(E[v]=I={}),S&&I.dictionary===P.dictionary&&(I.dictionary=_),A&&I.format===P.format&&(I.format=h)}S&&(P.dictionary=_),A&&(P.format=h)}function d(m){if(m.layoutAttributes){var y=m.layoutAttributes._arrayAttrRegexps;if(y)for(var v=0;v<y.length;v++)a(C.layoutArrayRegexes,y[v])}}function u(m,y){var v=C.componentsRegistry[m].schema;if(v&&v.traces){var _=v.traces[y];_&&r(C.modules[y]._module.attributes,_)}}function x(m,y){var v=C.componentsRegistry[m].schema;if(v&&v.transforms){var _=v.transforms[y];_&&r(C.transformsRegistry[y].attributes,_)}}function p(m,y){var v=C.componentsRegistry[m].schema;if(v&&v.subplots){var _=C.subplotsRegistry[y],h=_.layoutAttributes,S=_.attr==="subplot"?_.name:_.attr;Array.isArray(S)&&(S=S[0]);var A=v.subplots[S];h&&A&&r(h,A)}}function g(m){return typeof m=="object"&&(m=m.type),m}C.modules={},C.allCategories={},C.allTypes=[],C.subplotsRegistry={},C.transformsRegistry={},C.componentsRegistry={},C.layoutArrayContainers=[],C.layoutArrayRegexes=[],C.traceLayoutAttributes={},C.localeRegistry={},C.apiMethodRegistry={},C.collectableSubplotTypes=null,C.register=function(m){if(C.collectableSubplotTypes=null,!m)throw new Error("No argument passed to Plotly.register.");m&&!Array.isArray(m)&&(m=[m]);for(var y=0;y<m.length;y++){var v=m[y];if(!v)throw new Error("Invalid module was attempted to be registered!");switch(v.moduleType){case"trace":n(v);break;case"transform":l(v);break;case"component":o(v);break;case"locale":c(v);break;case"apiMethod":var _=v.name;C.apiMethodRegistry[_]=v.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},C.getModule=function(m){var y=C.modules[g(m)];return!!y&&y._module},C.traceIs=function(m,y){if((m=g(m))==="various")return!1;var v=C.modules[m];return v||(m&&T.log("Unrecognized trace type "+m+"."),v=C.modules[s.type.dflt]),!!v.categories[y]},C.getTransformIndices=function(m,y){for(var v=[],_=m.transforms||[],h=0;h<_.length;h++)_[h].type===y&&v.push(h);return v},C.hasTransform=function(m,y){for(var v=m.transforms||[],_=0;_<v.length;_++)if(v[_].type===y)return!0;return!1},C.getComponentMethod=function(m,y){var v=C.componentsRegistry[m];return v&&v[y]||k},C.call=function(){var m=arguments[0],y=[].slice.call(arguments,1);return C.apiMethodRegistry[m].apply(null,y)}},91536:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=k.extendFlat,w=k.extendDeep;function b(f){var s;switch(f){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}F.exports=function(f,s){var t,i,r=f.data,n=f.layout,o=w([],r),l=w({},n,b(s.tileClass)),c=f._context||{};if(s.width&&(l.width=s.width),s.height&&(l.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){l.annotations=[];var d=Object.keys(l);for(t=0;t<d.length;t++)i=d[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(l[d[t]].title={text:""});for(t=0;t<o.length;t++){var u=o[t];u.showscale=!1,u.marker&&(u.marker.showscale=!1),T.traceIs(u,"pie-like")&&(u.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)l.annotations.push(s.annotations[t]);var x=Object.keys(l).filter(function(v){return v.match(/^scene\d*$/)});if(x.length){var p={};for(s.tileClass==="thumbnail"&&(p={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var g=l[x[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),a(g.xaxis,p),a(g.yaxis,p),a(g.zaxis,p),g._scene=null}}var m=document.createElement("div");s.tileClass&&(m.className=s.tileClass);var y={gd:m,td:m,layout:l,data:o,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return s.setBackground!=="transparent"&&(y.config.setBackground=s.setBackground||"opaque"),y.gd.defaultLayout=b(s.tileClass),y}},39792:function(F,C,e){"use strict";var T=e(3400),k=e(67024),a=e(48616),w=e(81792);F.exports=function(b,f){var s;return T.isPlainObject(b)||(s=T.getGraphDiv(b)),(f=f||{}).format=f.format||"png",f.width=f.width||null,f.height=f.height||null,f.imageDataOnly=!0,new Promise(function(t,i){s&&s._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),T.isIE()&&f.format!=="svg"&&i(new Error(w.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=k(b,f),n=f.filename||b.fn||"newplot";n+="."+f.format.replace("-","."),r.then(function(o){return s&&(s._snapshotInProgress=!1),a(o,n,f.format)}).then(function(o){t(o)}).catch(function(o){s&&(s._snapshotInProgress=!1),i(o)})})}},48616:function(F,C,e){"use strict";var T=e(3400),k=e(81792);F.exports=function(a,w,b){var f=document.createElement("a"),s="download"in f;return new Promise(function(t,i){var r,n;if(T.isIE())return r=k.createBlob(a,"svg"),window.navigator.msSaveBlob(r,w),r=null,t(w);if(s)return r=k.createBlob(a,b),n=k.createObjectURL(r),f.href=n,f.download=w,document.body.appendChild(f),f.click(),document.body.removeChild(f),k.revokeObjectURL(n),r=null,t(w);if(T.isSafari()){var o=b==="svg"?",":";base64,";return k.octetStream(o+encodeURIComponent(a)),t(w)}i(new Error("download error"))})}},81792:function(F,C,e){"use strict";var T=e(24040);C.getDelay=function(a){return a._has&&(a._has("gl3d")||a._has("gl2d")||a._has("mapbox"))?500:0},C.getRedrawFunc=function(a){return function(){T.getComponentMethod("colorbar","draw")(a)}},C.encodeSVG=function(a){return"data:image/svg+xml,"+encodeURIComponent(a)},C.encodeJSON=function(a){return"data:application/json,"+encodeURIComponent(a)};var k=window.URL||window.webkitURL;C.createObjectURL=function(a){return k.createObjectURL(a)},C.revokeObjectURL=function(a){return k.revokeObjectURL(a)},C.createBlob=function(a,w){if(w==="svg")return new window.Blob([a],{type:"image/svg+xml;charset=utf-8"});if(w==="full-json")return new window.Blob([a],{type:"application/json;charset=utf-8"});var b=function(f){for(var s=f.length,t=new ArrayBuffer(s),i=new Uint8Array(t),r=0;r<s;r++)i[r]=f.charCodeAt(r);return t}(window.atob(a));return new window.Blob([b],{type:"image/"+w})},C.octetStream=function(a){document.location.href="data:application/octet-stream"+a},C.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,C.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(F,C,e){"use strict";var T=e(81792),k={getDelay:T.getDelay,getRedrawFunc:T.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};F.exports=k},63268:function(F,C,e){"use strict";var T=e(3400),k=e(61252).EventEmitter,a=e(81792);F.exports=function(w){var b=w.emitter||new k,f=new Promise(function(s,t){var i=window.Image,r=w.svg,n=w.format||"png";if(T.isIE()&&n!=="svg"){var o=new Error(a.MSG_IE_BAD_FORMAT);return t(o),w.promise?f:b.emit("error",o)}var l,c,d=w.canvas,u=w.scale||1,x=w.width||300,p=w.height||150,g=u*x,m=u*p,y=d.getContext("2d",{willReadFrequently:!0}),v=new i;n==="svg"||T.isSafari()?c=a.encodeSVG(r):(l=a.createBlob(r,"svg"),c=a.createObjectURL(l)),d.width=g,d.height=m,v.onload=function(){var _;switch(l=null,a.revokeObjectURL(c),n!=="svg"&&y.drawImage(v,0,0,g,m),n){case"jpeg":_=d.toDataURL("image/jpeg");break;case"png":_=d.toDataURL("image/png");break;case"webp":_=d.toDataURL("image/webp");break;case"svg":_=c;break;default:var h="Image format is not jpeg, png, svg or webp.";if(t(new Error(h)),!w.promise)return b.emit("error",h)}s(_),w.promise||b.emit("success",_)},v.onerror=function(_){if(l=null,a.revokeObjectURL(c),t(_),!w.promise)return b.emit("error",_)},v.src=c});return w.promise?f:b}},61808:function(F,C,e){"use strict";var T=e(61252).EventEmitter,k=e(24040),a=e(3400),w=e(81792),b=e(91536),f=e(37164),s=e(63268);F.exports=function(t,i){var r=new T,n=b(t,{format:"png"}),o=n.gd;o.style.position="absolute",o.style.left="-5000px",document.body.appendChild(o);var l=w.getRedrawFunc(o);return k.call("_doPlot",o,n.data,n.layout,n.config).then(l).then(function(){var c=w.getDelay(o._fullLayout);setTimeout(function(){var d=f(o),u=document.createElement("canvas");u.id=a.randstr(),(r=s({format:i.format,width:o._fullLayout.width,height:o._fullLayout.height,canvas:u,emitter:r,svg:d})).clean=function(){o&&document.body.removeChild(o)}},c)}).catch(function(c){r.emit("error",c)}),r}},37164:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(76308),b=e(9616),f=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");F.exports=function(i,r,n){var o,l=i._fullLayout,c=l._paper,d=l._toppaper,u=l.width,x=l.height;c.insert("rect",":first-child").call(a.setRect,0,0,u,x).call(w.fill,l.paper_bgcolor);var p=l._basePlotModules||[];for(o=0;o<p.length;o++){var g=p[o];g.toSVG&&g.toSVG(i)}if(d){var m=d.node().childNodes,y=Array.prototype.slice.call(m);for(o=0;o<y.length;o++){var v=y[o];v.childNodes.length&&c.node().appendChild(v)}}l._draggers&&l._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var h=T.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){h.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&h.style("font-family",S.replace(f,s));var A=this.style.fontWeight;!A||A!=="normal"&&A!=="400"||h.style("font-weight",void 0);var E=this.style.fontStyle;E&&E==="normal"&&h.style("font-style",void 0);var P=this.style.fontVariant;P&&P==="normal"&&h.style("font-variant",void 0)}else h.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var h=T.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&h.style("fill",S.replace(f,s));var A=this.style.stroke;A&&A.indexOf("url(")!==-1&&h.style("stroke",A.replace(f,s))}),r!=="pdf"&&r!=="eps"||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(b.xmlns,"xmlns",b.svg),c.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),r==="svg"&&n&&(c.attr("width",n*u),c.attr("height",n*x),c.attr("viewBox","0 0 "+u+" "+x));var _=new window.XMLSerializer().serializeToString(c.node());return _=(_=(_=function(h){var S=T.select("body").append("div").style({display:"none"}).html(""),A=h.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),A}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},84664:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){for(var w=0;w<k.length;w++)k[w].i=w;T.mergeArray(a.text,k,"tx"),T.mergeArray(a.hovertext,k,"htx");var b=a.marker;if(b){T.mergeArray(b.opacity,k,"mo",!0),T.mergeArray(b.color,k,"mc");var f=b.line;f&&(T.mergeArray(f.color,k,"mlc"),T.mergeArrayCastPositive(f.width,k,"mlw"))}}},20832:function(F,C,e){"use strict";var T=e(52904),k=e(29736).axisHoverFormat,a=e(21776).Ks,w=e(21776).Gw,b=e(49084),f=e(25376),s=e(78048),t=e(98192).c,i=e(92880).extendFlat,r=f({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=i({},T.marker.line.width,{dflt:0}),o=i({width:n,editType:"calc"},b("marker.line")),l=i({line:o,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});F.exports={x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:T.text,texttemplate:w({editType:"plot"},{keys:s.eventDataKeys}),hovertext:T.hovertext,hovertemplate:a({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},r,{}),insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},T.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:{marker:{opacity:T.selected.marker.opacity,color:T.selected.marker.color,editType:"style"},textfont:T.selected.textfont,editType:"style"},unselected:{marker:{opacity:T.unselected.marker.opacity,color:T.unselected.marker.color,editType:"style"},textfont:T.unselected.textfont,editType:"style"},zorder:T.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(F,C,e){"use strict";var T=e(54460),k=e(1220),a=e(94288).hasColorscale,w=e(47128),b=e(84664),f=e(4500);F.exports=function(s,t){var i,r,n,o,l,c,d=T.getFromId(s,t.xaxis||"x"),u=T.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=d.makeCalcdata(t,"x",x),n=u.makeCalcdata(t,"y"),o=k(t,u,"y",n),l=!!t.yperiodalignment,c="y"):(i=u.makeCalcdata(t,"y",x),n=d.makeCalcdata(t,"x"),o=k(t,d,"x",n),l=!!t.xperiodalignment,c="x"),r=o.vals;for(var p=Math.min(r.length,i.length),g=new Array(p),m=0;m<p;m++)g[m]={p:r[m],s:i[m]},l&&(g[m].orig_p=n[m],g[m][c+"End"]=o.ends[m],g[m][c+"Start"]=o.starts[m]),t.ids&&(g[m].id=String(t.ids[m]));return a(t,"marker")&&w(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),a(t,"marker.line")&&w(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(g,t),f(g,t),g}},78048:function(F){"use strict";F.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(F,C,e){"use strict";var T=e(38248),k=e(3400).isArrayOrTypedArray,a=e(39032).BADNUM,w=e(24040),b=e(54460),f=e(71888).getAxisGroup,s=e(72592);function t(p,g,m,y,v){if(y.length){var _,h,S,A;switch(function(E,P){var I,D;for(I=0;I<P.length;I++){var z,V=P[I],O=V[0].trace,j=O.type==="funnel"?O._base:O.base,Y=O.orientation==="h"?O.xcalendar:O.ycalendar,B=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(j)){for(D=0;D<Math.min(j.length,V.length);D++)z=B(j[D],0,Y),T(z)?(V[D].b=+z,V[D].hasB=1):V[D].b=0;for(;D<V.length;D++)V[D].b=0}else{z=B(j,0,Y);var U=T(z);for(z=U?z:0,D=0;D<V.length;D++)V[D].b=z,U&&(V[D].hasB=1)}}}(m,y),v.mode){case"overlay":i(g,m,y,v);break;case"group":for(_=[],h=[],S=0;S<y.length;S++)(A=y[S])[0].trace.offset===void 0?h.push(A):_.push(A);h.length&&function(E,P,I,D,z){var V=new s(D,{posAxis:P,sepNegVal:!1,overlapNoMerge:!z.norm});(function(O,j,Y,B){for(var U=O._fullLayout,q=Y.positions,te=Y.distinctPositions,ee=Y.minDiff,Q=Y.traces,J=Q.length,K=q.length!==te.length,X=ee*(1-B.gap),ie=f(U,j._id)+Q[0][0].trace.orientation,se=U._alignmentOpts[ie]||{},ae=0;ae<J;ae++){var ue,ve,ye=Q[ae],pe=ye[0].trace,de=se[pe.alignmentgroup]||{},me=Object.keys(de.offsetGroups||{}).length,ke=(ue=me?X/me:K?X/J:X)*(1-(B.groupgap||0));ve=me?((2*pe._offsetIndex+1-me)*ue-ke)/2:K?((2*ae+1-J)*ue-ke)/2:-ke/2;var Ce=ye[0].t;Ce.barwidth=ke,Ce.poffset=ve,Ce.bargroupwidth=X,Ce.bardelta=ee}Y.binWidth=Q[0][0].t.barwidth/100,n(Y),o(j,Y),l(j,Y,K)})(E,P,V,z),function(O,j){for(var Y=O.traces,B=0;B<Y.length;B++){var U=Y[B];if(U[0].trace.base===void 0)for(var q=new s([U],{posAxis:j,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<U.length;te++){var ee=U[te];if(ee.p!==a){var Q=q.put(ee.p,ee.b+ee.s);Q&&(ee.b=Q)}}}}(V,P),z.norm?(d(V),u(I,V,z)):c(I,V)}(p,g,m,h,v),_.length&&i(g,m,_,v);break;case"stack":case"relative":for(_=[],h=[],S=0;S<y.length;S++)(A=y[S])[0].trace.base===void 0?h.push(A):_.push(A);(function(E){if(!(E.length<2)){var P,I,D,z,V,O;for(P=0;P<E.length&&(z=(I=E[P][0].trace).marker?I.marker.cornerradius:void 0)===void 0;P++);if(z!==void 0)for(V=T(z)?+z:+z.slice(0,-1),O=T(z)?"px":"%",P=0;P<E.length;P++)(D=E[P][0].t).cornerradiusvalue=V,D.cornerradiusform=O}})(h),h.length&&function(E,P,I,D,z){var V=new s(D,{posAxis:P,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});r(P,V,z),function(U,q,te){var ee,Q,J,K,X,ie,se=x(U),ae=q.traces;for(K=0;K<ae.length;K++)if((Q=(ee=ae[K])[0].trace).type==="funnel")for(X=0;X<ee.length;X++)(ie=ee[X]).s!==a&&q.put(ie.p,-.5*ie.s);for(K=0;K<ae.length;K++){J=(Q=(ee=ae[K])[0].trace).type==="funnel";var ue=[];for(X=0;X<ee.length;X++)if((ie=ee[X]).s!==a){var ve;ve=J?ie.s:ie.s+ie.b;var ye=q.put(ie.p,ve),pe=ye+ve;ie.b=ye,ie[se]=pe,te.norm||(ue.push(pe),ie.hasB&&ue.push(ye))}te.norm||(Q._extremes[U._id]=b.findExtremes(U,ue,{tozero:!0,padded:!0}))}}(I,V,z);for(var O=0;O<D.length;O++)for(var j=D[O],Y=0;Y<j.length;Y++){var B=j[Y];B.s!==a&&B.b+B.s===V.get(B.p,B.s)&&(B._outmost=!0)}z.norm&&u(I,V,z)}(0,g,m,h,v),_.length&&i(g,m,_,v)}(function(E){var P,I,D,z,V,O,j;for(P=0;P<E.length;P++)D=(I=E[P])[0].trace,(z=I[0].t).cornerradiusvalue===void 0&&(V=D.marker?D.marker.cornerradius:void 0)!==void 0&&(O=T(V)?+V:+V.slice(0,-1),j=T(V)?"px":"%",z.cornerradiusvalue=O,z.cornerradiusform=j)})(y),function(E,P){var I,D,z,V=x(P),O={},j=1/0,Y=-1/0;for(I=0;I<E.length;I++)for(z=E[I],D=0;D<z.length;D++){var B=z[D].p;T(B)&&(j=Math.min(j,B),Y=Math.max(Y,B))}var U=1e4/(Y-j),q=O.round=function(pe){return String(Math.round(U*(pe-j)))},te={},ee={},Q=E.some(function(pe){var de=pe[0].trace;return"marker"in de&&de.marker.cornerradius});for(I=0;I<E.length;I++){(z=E[I])[0].t.extents=O;var J=z[0].t.poffset,K=k(J);for(D=0;D<z.length;D++){var X=z[D],ie=X[V]-X.w/2;if(T(ie)){var se=X[V]+X.w/2,ae=q(X.p);O[ae]?O[ae]=[Math.min(ie,O[ae][0]),Math.max(se,O[ae][1])]:O[ae]=[ie,se]}if(X.p0=X.p+(K?J[D]:J),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s,Q){var ue=Math.min(X.s0,X.s1)||0,ve=Math.max(X.s0,X.s1)||0,ye=X[V];te[ye]=ye in te?Math.min(te[ye],ue):ue,ee[ye]=ye in ee?Math.max(ee[ye],ve):ve}}}Q&&function(pe,de,me,ke){for(var Ce=x(ke),ge=0;ge<pe.length;ge++)for(var oe=pe[ge],re=0;re<oe.length;re++){var fe=oe[re],Se=fe[Ce];fe._sMin=de[Se],fe._sMax=me[Se]}}(E,te,ee,P)}(y,g)}}function i(p,g,m,y){for(var v=0;v<m.length;v++){var _=m[v],h=new s([_],{posAxis:p,sepNegVal:!1,overlapNoMerge:!y.norm});r(p,h,y),y.norm?(d(h),u(g,h,y)):c(g,h)}}function r(p,g,m){for(var y=g.minDiff,v=g.traces,_=y*(1-m.gap),h=_*(1-(m.groupgap||0)),S=-h/2,A=0;A<v.length;A++){var E=v[A][0].t;E.barwidth=h,E.poffset=S,E.bargroupwidth=_,E.bardelta=y}g.binWidth=v[0][0].t.barwidth/100,n(g),o(p,g),l(p,g)}function n(p){var g,m,y=p.traces;for(g=0;g<y.length;g++){var v,_=y[g],h=_[0],S=h.trace,A=h.t,E=S._offset||S.offset,P=A.poffset;if(k(E)){for(v=Array.prototype.slice.call(E,0,_.length),m=0;m<v.length;m++)T(v[m])||(v[m]=P);for(m=v.length;m<_.length;m++)v.push(P);A.poffset=v}else E!==void 0&&(A.poffset=E);var I=S._width||S.width,D=A.barwidth;if(k(I)){var z=Array.prototype.slice.call(I,0,_.length);for(m=0;m<z.length;m++)T(z[m])||(z[m]=D);for(m=z.length;m<_.length;m++)z.push(D);if(A.barwidth=z,E===void 0){for(v=[],m=0;m<_.length;m++)v.push(P+(D-z[m])/2);A.poffset=v}}else I!==void 0&&(A.barwidth=I,E===void 0&&(A.poffset=P+(D-I)/2))}}function o(p,g){for(var m=g.traces,y=x(p),v=0;v<m.length;v++)for(var _=m[v],h=_[0].t,S=h.poffset,A=k(S),E=h.barwidth,P=k(E),I=0;I<_.length;I++){var D=_[I],z=D.w=P?E[I]:E;D.p===void 0&&(D.p=D[y],D["orig_"+y]=D[y]);var V=(A?S[I]:S)+z/2;D[y]=D.p+V}}function l(p,g,m){var y=g.traces,v=g.minDiff/2;b.minDtick(p,g.minDiff,g.distinctPositions[0],m);for(var _=0;_<y.length;_++){var h,S,A,E,P=y[_],I=P[0],D=I.trace,z=[];for(E=0;E<P.length;E++)S=(h=P[E]).p-v,A=h.p+v,z.push(S,A);if(D.width||D.offset){var V=I.t,O=V.poffset,j=V.barwidth,Y=k(O),B=k(j);for(E=0;E<P.length;E++){h=P[E];var U=Y?O[E]:O,q=B?j[E]:j;A=(S=h.p+U)+q,z.push(S,A)}}D._extremes[p._id]=b.findExtremes(p,z,{padded:!1})}}function c(p,g){for(var m=g.traces,y=x(p),v=0;v<m.length;v++){for(var _=m[v],h=_[0].trace,S=h.type==="scatter",A=h.orientation==="v",E=[],P=!1,I=0;I<_.length;I++){var D=_[I],z=S?0:D.b,V=S?A?D.y:D.x:z+D.s;D[y]=V,E.push(V),D.hasB&&E.push(z),D.hasB&&D.b||(P=!0)}h._extremes[p._id]=b.findExtremes(p,E,{tozero:P,padded:!0})}}function d(p){for(var g=p.traces,m=0;m<g.length;m++)for(var y=g[m],v=0;v<y.length;v++){var _=y[v];_.s!==a&&p.put(_.p,_.b+_.s)}}function u(p,g,m){var y=g.traces,v=x(p),_=m.norm==="fraction"?1:100,h=_/1e9,S=p.l2c(p.c2l(0)),A=m.mode==="stack"?_:S;function E(te){return T(p.c2l(te))&&(te<S-h||te>A+h||!T(S))}for(var P=0;P<y.length;P++){for(var I=y[P],D=I[0].trace,z=[],V=!1,O=!1,j=0;j<I.length;j++){var Y=I[j];if(Y.s!==a){var B=Math.abs(_/g.get(Y.p,Y.s));Y.b*=B,Y.s*=B;var U=Y.b,q=U+Y.s;Y[v]=q,z.push(q),O=O||E(q),Y.hasB&&(z.push(U),O=O||E(U)),Y.hasB&&Y.b||(V=!0)}}D._extremes[p._id]=b.findExtremes(p,z,{tozero:V,padded:O})}}function x(p){return p._id.charAt(0)}F.exports={crossTraceCalc:function(p,g){for(var m=g.xaxis,y=g.yaxis,v=p._fullLayout,_=p._fullData,h=p.calcdata,S=[],A=[],E=0;E<_.length;E++){var P=_[E];if(P.visible===!0&&w.traceIs(P,"bar")&&P.xaxis===m._id&&P.yaxis===y._id&&(P.orientation==="h"?S.push(h[E]):A.push(h[E]),P._computePh))for(var I=p.calcdata[E],D=0;D<I.length;D++)typeof I[D].ph0=="function"&&(I[D].ph0=I[D].ph0()),typeof I[D].ph1=="function"&&(I[D].ph1=I[D].ph1())}var z={xCat:m.type==="category"||m.type==="multicategory",yCat:y.type==="category"||y.type==="multicategory",mode:v.barmode,norm:v.barnorm,gap:v.bargap,groupgap:v.bargroupgap};t(p,m,y,A,z),t(p,y,m,S,z)},setGroupPositions:t}},31508:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(76308),w=e(24040),b=e(43980),f=e(31147),s=e(55592),t=e(20011),i=e(20832),r=k.coerceFont;function n(l){if(T(l)){if((l=+l)>=0)return l}else if(typeof l=="string"&&(l=l.trim()).slice(-1)==="%"&&T(l.slice(0,-1))&&(l=+l.slice(0,-1))>=0)return l+"%"}function o(l,c,d,u,x,p){var g=(p=p||{}).moduleHasSelected!==!1,m=p.moduleHasUnselected!==!1,y=p.moduleHasConstrain!==!1,v=p.moduleHasCliponaxis!==!1,_=p.moduleHasTextangle!==!1,h=p.moduleHasInsideanchor!==!1,S=!!p.hasPathbar,A=Array.isArray(x)||x==="auto",E=A||x==="inside",P=A||x==="outside";if(E||P){var I=r(u,"textfont",d.font),D=k.extendFlat({},I),z=!(l.textfont&&l.textfont.color);if(z&&delete D.color,r(u,"insidetextfont",D),S){var V=k.extendFlat({},I);z&&delete V.color,r(u,"pathbar.textfont",V)}P&&r(u,"outsidetextfont",I),g&&u("selected.textfont.color"),m&&u("unselected.textfont.color"),y&&u("constraintext"),v&&u("cliponaxis"),_&&u("textangle"),u("texttemplate")}E&&h&&u("insidetextanchor")}F.exports={supplyDefaults:function(l,c,d,u){function x(y,v){return k.coerce(l,c,i,y,v)}if(b(l,c,u,x)){f(l,c,u,x),x("xhoverformat"),x("yhoverformat"),x("zorder"),x("orientation",c.x&&!c.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var p=x("textposition");o(l,0,u,x,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(l,c,x,d,u);var g=(c.marker.line||{}).color,m=w.getComponentMethod("errorbars","supplyDefaults");m(l,c,g||a.defaultLine,{axis:"y"}),m(l,c,g||a.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(c,x)}else c.visible=!1},crossTraceDefaults:function(l,c){var d,u;function x(m,y){return k.coerce(u._input,u,i,m,y)}for(var p=0;p<l.length;p++)if((u=l[p]).type==="bar"){d=u._input;var g=x("marker.cornerradius",c.barcornerradius);u.marker&&(u.marker.cornerradius=n(g)),c.barmode==="group"&&t(d,u,c,x)}},handleText:o,validateCornerradius:n}},52160:function(F){"use strict";F.exports=function(C,e,T){return C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),T.orientation==="h"?(C.label=C.y,C.value=C.x):(C.label=C.x,C.value=C.y),C}},60444:function(F,C,e){"use strict";var T=e(38248),k=e(49760),a=e(3400).isArrayOrTypedArray;C.coerceString=function(w,b,f){if(typeof b=="string"){if(b||!w.noBlank)return b}else if((typeof b=="number"||b===!0)&&!w.strict)return String(b);return f!==void 0?f:w.dflt},C.coerceNumber=function(w,b,f){if(T(b)){b=+b;var s=w.min,t=w.max;if(!(s!==void 0&&b<s||t!==void 0&&b>t))return b}return f!==void 0?f:w.dflt},C.coerceColor=function(w,b,f){return k(b).isValid()?b:f!==void 0?f:w.dflt},C.coerceEnumerated=function(w,b,f){return w.coerceNumber&&(b=+b),w.values.indexOf(b)!==-1?b:f!==void 0?f:w.dflt},C.getValue=function(w,b){var f;return a(w)?b<w.length&&(f=w[b]):f=w,f},C.getLineWidth=function(w,b){return 0<b.mlw?b.mlw:a(w.marker.line.width)?0:w.marker.line.width}},63400:function(F,C,e){"use strict";var T=e(93024),k=e(24040),a=e(76308),w=e(3400).fillText,b=e(60444).getLineWidth,f=e(54460).hoverLabelText,s=e(39032).BADNUM;function t(r,n,o,l,c){var d,u,x,p,g,m,y,v=r.cd,_=v[0].trace,h=v[0].t,S=l==="closest",A=_.type==="waterfall",E=r.maxHoverDistance,P=r.maxSpikeDistance;_.orientation==="h"?(d=o,u=n,x="y",p="x",g=ee,m=q):(d=n,u=o,x="x",p="y",m=ee,g=q);var I=_[x+"period"],D=S||I;function z(ue){return O(ue,-1)}function V(ue){return O(ue,1)}function O(ue,ve){var ye=ue.w;return ue[x]+ve*ye/2}function j(ue){return ue[x+"End"]-ue[x+"Start"]}var Y=S?z:I?function(ue){return ue.p-j(ue)/2}:function(ue){return Math.min(z(ue),ue.p-h.bardelta/2)},B=S?V:I?function(ue){return ue.p+j(ue)/2}:function(ue){return Math.max(V(ue),ue.p+h.bardelta/2)};function U(ue,ve,ye){return c.finiteRange&&(ye=0),T.inbox(ue-d,ve-d,ye+Math.min(1,Math.abs(ve-ue)/y)-1)}function q(ue){return U(Y(ue),B(ue),E)}function te(ue){var ve=ue[p];if(A){var ye=Math.abs(ue.rawS)||0;u>0?ve+=ye:u<0&&(ve-=ye)}return ve}function ee(ue){var ve=u,ye=ue.b,pe=te(ue);return T.inbox(ye-ve,pe-ve,E+(pe-ve)/(pe-ye)-1)}var Q=r[x+"a"],J=r[p+"a"];y=Math.abs(Q.r2c(Q.range[1])-Q.r2c(Q.range[0]));var K=T.getDistanceFunction(l,g,m,function(ue){return(g(ue)+m(ue))/2});if(T.getClosest(v,K,r),r.index!==!1&&v[r.index].p!==s){D||(Y=function(ue){return Math.min(z(ue),ue.p-h.bargroupwidth/2)},B=function(ue){return Math.max(V(ue),ue.p+h.bargroupwidth/2)});var X=v[r.index],ie=_.base?X.b+X.s:X.s;r[p+"0"]=r[p+"1"]=J.c2p(X[p],!0),r[p+"LabelVal"]=ie;var se=h.extents[h.extents.round(X.p)];r[x+"0"]=Q.c2p(S?Y(X):se[0],!0),r[x+"1"]=Q.c2p(S?B(X):se[1],!0);var ae=X.orig_p!==void 0;return r[x+"LabelVal"]=ae?X.orig_p:X.p,r.labelLabel=f(Q,r[x+"LabelVal"],_[x+"hoverformat"]),r.valueLabel=f(J,r[p+"LabelVal"],_[p+"hoverformat"]),r.baseLabel=f(J,X.b,_[p+"hoverformat"]),r.spikeDistance=(function(ue){var ve=u,ye=ue.b,pe=te(ue);return T.inbox(ye-ve,pe-ve,P+(pe-ve)/(pe-ye)-1)}(X)+function(ue){return U(z(ue),V(ue),P)}(X))/2,r[x+"Spike"]=Q.c2p(X.p,!0),w(X,_,r),r.hovertemplate=_.hovertemplate,r}}function i(r,n){var o=n.mcc||r.marker.color,l=n.mlcc||r.marker.line.color,c=b(r,n);return a.opacity(o)?o:a.opacity(l)&&c?l:void 0}F.exports={hoverPoints:function(r,n,o,l,c){var d=t(r,n,o,l,c);if(d){var u=d.cd,x=u[0].trace,p=u[d.index];return d.color=i(x,p),k.getComponentMethod("errorbars","hoverInfo")(p,x,d),[d]}},hoverOnBars:t,getTraceColor:i}},51132:function(F,C,e){"use strict";F.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(F){"use strict";F.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(F,C,e){"use strict";var T=e(24040),k=e(54460),a=e(3400),w=e(39324),b=e(31508).validateCornerradius;F.exports=function(f,s,t){function i(g,m){return a.coerce(f,s,w,g,m)}for(var r=!1,n=!1,o=!1,l={},c=i("barmode"),d=0;d<t.length;d++){var u=t[d];if(T.traceIs(u,"bar")&&u.visible){if(r=!0,c==="group"){var x=u.xaxis+u.yaxis;l[x]&&(o=!0),l[x]=!0}u.visible&&u.type==="histogram"&&k.getFromId({_fullLayout:s},u[u.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(n=!0)}}if(r){c!=="overlay"&&i("barnorm"),i("bargap",n&&!o?0:.2),i("bargroupgap");var p=i("barcornerradius");s.barcornerradius=b(p)}else delete s.barmode}},98184:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(3400),w=e(72736),b=e(76308),f=e(43616),s=e(24040),t=e(54460).tickText,i=e(82744),r=i.recordMinTextSize,n=i.clearMinTextSize,o=e(60100),l=e(60444),c=e(78048),d=e(20832),u=d.text,x=d.textposition,p=e(10624).appendArrayPointValue,g=c.TEXTPAD;function m(D){return D.id}function y(D){if(D.ids)return m}function v(D){return(D>0)-(D<0)}function _(D,z){return D<z?1:-1}function h(D,z,V,O){var j;return!z.uniformtext.mode&&S(V)?(O&&(j=O()),D.transition().duration(V.duration).ease(V.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})):D}function S(D){return D&&D.duration>0}function A(D,z,V,O,j){return!(D<0||z<0)&&(V<=D&&O<=z||V<=z&&O<=D||(j?D>=V*(z/O):z>=O*(D/V)))}function E(D){return D==="auto"?0:D}function P(D,z){var V=Math.PI/180*z,O=Math.abs(Math.sin(V)),j=Math.abs(Math.cos(V));return{x:D.width*j+D.height*O,y:D.width*O+D.height*j}}function I(D,z,V,O,j,Y){var B=!!Y.isHorizontal,U=!!Y.constrained,q=Y.angle||0,te=Y.anchor,ee=te==="end",Q=te==="start",J=((Y.leftToRight||0)+1)/2,K=1-J,X=Y.hasB,ie=Y.r,se=Y.overhead,ae=j.width,ue=j.height,ve=Math.abs(z-D),ye=Math.abs(O-V),pe=ve>2*g&&ye>2*g?g:0;ve-=2*pe,ye-=2*pe;var de=E(q);q!=="auto"||ae<=ve&&ue<=ye||!(ae>ve||ue>ye)||(ae>ye||ue>ve)&&ae<ue==ve<ye||(de+=90);var me,ke,Ce=P(j,de);if(ie&&ie-se>g){var ge=function(De,he,_e,Ae,Oe,Ee,Be,Ve,Ze){var it,at,gt,yt,pt=Math.max(0,Math.abs(he-De)-2*g),et=Math.max(0,Math.abs(Ae-_e)-2*g),$e=Ee-g,At=Be?$e-Math.sqrt($e*$e-($e-Be)*($e-Be)):$e,Ot=Ze?2*$e:Ve?$e-Be:2*At,Rt=Ze?2*$e:Ve?2*At:$e-Be;return Oe.y/Oe.x>=et/(pt-Ot)?yt=et/Oe.y:Oe.y/Oe.x<=(et-Rt)/pt?yt=pt/Oe.x:!Ze&&Ve?(it=Oe.x*Oe.x+Oe.y*Oe.y/4,gt=(pt-$e)*(pt-$e)+(et/2-$e)*(et/2-$e)-$e*$e,yt=(-(at=-2*Oe.x*(pt-$e)-Oe.y*(et/2-$e))+Math.sqrt(at*at-4*it*gt))/(2*it)):Ze?(it=(Oe.x*Oe.x+Oe.y*Oe.y)/4,gt=(pt/2-$e)*(pt/2-$e)+(et/2-$e)*(et/2-$e)-$e*$e,yt=(-(at=-Oe.x*(pt/2-$e)-Oe.y*(et/2-$e))+Math.sqrt(at*at-4*it*gt))/(2*it)):(it=Oe.x*Oe.x/4+Oe.y*Oe.y,gt=(pt/2-$e)*(pt/2-$e)+(et-$e)*(et-$e)-$e*$e,yt=(-(at=-Oe.x*(pt/2-$e)-2*Oe.y*(et-$e))+Math.sqrt(at*at-4*it*gt))/(2*it)),{scale:yt=Math.min(1,yt),pad:Ve?Math.max(0,$e-Math.sqrt(Math.max(0,$e*$e-($e-(et-Oe.y*yt)/2)*($e-(et-Oe.y*yt)/2)))-Be):Math.max(0,$e-Math.sqrt(Math.max(0,$e*$e-($e-(pt-Oe.x*yt)/2)*($e-(pt-Oe.x*yt)/2)))-Be)}}(D,z,V,O,Ce,ie,se,B,X);me=ge.scale,ke=ge.pad}else me=1,U&&(me=Math.min(1,ve/Ce.x,ye/Ce.y)),ke=0;var oe=j.left*K+j.right*J,re=(j.top+j.bottom)/2,fe=(D+g)*K+(z-g)*J,Se=(V+O)/2,be=0,we=0;if(Q||ee){var Me=(B?Ce.x:Ce.y)/2;ie&&(ee||X)&&(pe+=ke);var Pe=B?_(D,z):_(V,O);B?Q?(fe=D+Pe*pe,be=-Pe*Me):(fe=z-Pe*pe,be=Pe*Me):Q?(Se=V+Pe*pe,we=-Pe*Me):(Se=O-Pe*pe,we=Pe*Me)}return{textX:oe,textY:re,targetX:fe,targetY:Se,anchorX:be,anchorY:we,scale:me,rotate:de}}F.exports={plot:function(D,z,V,O,j,Y){var B=z.xaxis,U=z.yaxis,q=D._fullLayout,te=D._context.staticPlot;j||(j={mode:q.barmode,norm:q.barmode,gap:q.bargap,groupgap:q.bargroupgap},n("bar",q));var ee=a.makeTraceGroups(O,V,"trace bars").each(function(Q){var J=T.select(this),K=Q[0].trace,X=Q[0].t,ie=K.type==="waterfall",se=K.type==="funnel",ae=K.type==="histogram",ue=K.type==="bar",ve=ue||se,ye=0;ie&&K.connector.visible&&K.connector.mode==="between"&&(ye=K.connector.line.width/2);var pe=K.orientation==="h",de=S(j),me=a.ensureSingle(J,"g","points"),ke=y(K),Ce=me.selectAll("g.point").data(a.identity,ke);Ce.enter().append("g").classed("point",!0),Ce.exit().remove(),Ce.each(function(oe,re){var fe,Se,be=T.select(this),we=function(nt,ze,Fe,rt){var We=[],ft=[],mt=rt?ze:Fe,vt=rt?Fe:ze;return We[0]=mt.c2p(nt.s0,!0),ft[0]=vt.c2p(nt.p0,!0),We[1]=mt.c2p(nt.s1,!0),ft[1]=vt.c2p(nt.p1,!0),rt?[We,ft]:[ft,We]}(oe,B,U,pe),Me=we[0][0],Pe=we[0][1],De=we[1][0],he=we[1][1],_e=(pe?Pe-Me:he-De)==0;if(_e&&ve&&l.getLineWidth(K,oe)&&(_e=!1),_e||(_e=!(k(Me)&&k(Pe)&&k(De)&&k(he))),oe.isBlank=_e,_e&&(pe?Pe=Me:he=De),ye&&!_e&&(pe?(Me-=_(Me,Pe)*ye,Pe+=_(Me,Pe)*ye):(De-=_(De,he)*ye,he+=_(De,he)*ye)),K.type==="waterfall"){if(!_e){var Ae=K[oe.dir].marker;fe=Ae.line.width,Se=Ae.color}}else fe=l.getLineWidth(K,oe),Se=oe.mc||K.marker.color;function Oe(nt){var ze=T.round(fe/2%1,2);return j.gap===0&&j.groupgap===0?T.round(Math.round(nt)-ze,2):nt}var Ee=b.opacity(Se)<1||fe>.01?Oe:function(nt,ze,Fe){return Fe&&nt===ze?nt:Math.abs(nt-ze)>=2?Oe(nt):nt>ze?Math.ceil(nt):Math.floor(nt)};D._context.staticPlot||(Me=Ee(Me,Pe,pe),Pe=Ee(Pe,Me,pe),De=Ee(De,he,!pe),he=Ee(he,De,!pe));var Be,Ve=pe?B.c2p:U.c2p;Be=oe.s0>0?oe._sMax:oe.s0<0?oe._sMin:oe.s1>0?oe._sMax:oe._sMin;var Ze,it,at=ue||ae?function(nt,ze){if(!nt)return 0;var Fe,rt=Math.abs(pe?he-De:Pe-Me),We=Math.abs(pe?Pe-Me:he-De),ft=Ee(Math.abs(Ve(Be,!0)-Ve(0,!0))),mt=oe.hasB?Math.min(rt/2,We/2):Math.min(rt/2,ft);return Fe=ze==="%"?rt*(Math.min(50,nt)/100):nt,Ee(Math.max(Math.min(Fe,mt),0))}(X.cornerradiusvalue,X.cornerradiusform):0,gt="M"+Me+","+De+"V"+he+"H"+Pe+"V"+De+"Z",yt=0;if(at&&oe.s){var pt=v(oe.s0)===0||v(oe.s)===v(oe.s0)?oe.s1:oe.s0;if((yt=Ee(oe.hasB?0:Math.abs(Ve(Be,!0)-Ve(pt,!0))))<at){var et=_(Me,Pe),$e=_(De,he),At=et===-$e?1:0;if(pe)if(oe.hasB)Ze="M"+(Me+at*et)+","+De+"A "+at+","+at+" 0 0 "+At+" "+Me+","+(De+at*$e)+"V"+(he-at*$e)+"A "+at+","+at+" 0 0 "+At+" "+(Me+at*et)+","+he+"H"+(Pe-at*et)+"A "+at+","+at+" 0 0 "+At+" "+Pe+","+(he-at*$e)+"V"+(De+at*$e)+"A "+at+","+at+" 0 0 "+At+" "+(Pe-at*et)+","+De+"Z";else{var Ot=(it=Math.abs(Pe-Me)+yt)<at?at-Math.sqrt(it*(2*at-it)):0,Rt=yt>0?Math.sqrt(yt*(2*at-yt)):0,Ct=et>0?Math.max:Math.min;Ze="M"+Me+","+De+"V"+(he-Ot*$e)+"H"+Ct(Pe-(at-yt)*et,Me)+"A "+at+","+at+" 0 0 "+At+" "+Pe+","+(he-at*$e-Rt)+"V"+(De+at*$e+Rt)+"A "+at+","+at+" 0 0 "+At+" "+Ct(Pe-(at-yt)*et,Me)+","+(De+Ot*$e)+"Z"}else if(oe.hasB)Ze="M"+(Me+at*et)+","+De+"A "+at+","+at+" 0 0 "+At+" "+Me+","+(De+at*$e)+"V"+(he-at*$e)+"A "+at+","+at+" 0 0 "+At+" "+(Me+at*et)+","+he+"H"+(Pe-at*et)+"A "+at+","+at+" 0 0 "+At+" "+Pe+","+(he-at*$e)+"V"+(De+at*$e)+"A "+at+","+at+" 0 0 "+At+" "+(Pe-at*et)+","+De+"Z";else{var Ge=(it=Math.abs(he-De)+yt)<at?at-Math.sqrt(it*(2*at-it)):0,Xe=yt>0?Math.sqrt(yt*(2*at-yt)):0,Ne=$e>0?Math.max:Math.min;Ze="M"+(Me+Ge*et)+","+De+"V"+Ne(he-(at-yt)*$e,De)+"A "+at+","+at+" 0 0 "+At+" "+(Me+at*et-Xe)+","+he+"H"+(Pe-at*et+Xe)+"A "+at+","+at+" 0 0 "+At+" "+(Pe-Ge*et)+","+Ne(he-(at-yt)*$e,De)+"V"+De+"Z"}}else Ze=gt}else Ze=gt;var Ye=h(a.ensureSingle(be,"path"),q,j,Y);if(Ye.style("vector-effect",te?"none":"non-scaling-stroke").attr("d",isNaN((Pe-Me)*(he-De))||_e&&D._context.staticPlot?"M0,0Z":Ze).call(f.setClipUrl,z.layerClipId,D),!q.uniformtext.mode&&de){var ot=f.makePointStyleFns(K);f.singlePointStyle(oe,Ye,K,ot,D)}(function(nt,ze,Fe,rt,We,ft,mt,vt,ut,Mt,bt,St,Pt){var Dt,Ft=ze.xaxis,Xt=ze.yaxis,an=nt._fullLayout;function Ht(xr,Jt,vn){return a.ensureSingle(xr,"text").text(Jt).attr({class:"bartext bartext-"+Dt,"text-anchor":"middle","data-notex":1}).call(f.font,vn).call(w.convertToTspans,nt)}var Zt=rt[0].trace,jt=Zt.orientation==="h",Pn=function(xr,Jt,vn,Lt,Nt){var $t,fn=Jt[0].trace;return $t=fn.texttemplate?function(dn,xn,sn,Yt,Wt){var tn=xn[0].trace,ln=a.castOption(tn,sn,"texttemplate");if(!ln)return"";var An,In,zn,Un,rr=tn.type==="histogram",Xn=tn.type==="waterfall",er=tn.type==="funnel",or=tn.orientation==="h";function tr(Hr){return t(Un,Un.c2l(Hr),!0).text}or?(An="y",In=Wt,zn="x",Un=Yt):(An="x",In=Yt,zn="y",Un=Wt);var gr,Mr=xn[sn],br={};br.label=Mr.p,br.labelLabel=br[An+"Label"]=(gr=Mr.p,t(In,In.c2l(gr),!0).text);var cr=a.castOption(tn,Mr.i,"text");(cr===0||cr)&&(br.text=cr),br.value=Mr.s,br.valueLabel=br[zn+"Label"]=tr(Mr.s);var wr={};p(wr,tn,Mr.i),(rr||wr.x===void 0)&&(wr.x=or?br.value:br.label),(rr||wr.y===void 0)&&(wr.y=or?br.label:br.value),(rr||wr.xLabel===void 0)&&(wr.xLabel=or?br.valueLabel:br.labelLabel),(rr||wr.yLabel===void 0)&&(wr.yLabel=or?br.labelLabel:br.valueLabel),Xn&&(br.delta=+Mr.rawS||Mr.s,br.deltaLabel=tr(br.delta),br.final=Mr.v,br.finalLabel=tr(br.final),br.initial=br.final-br.delta,br.initialLabel=tr(br.initial)),er&&(br.value=Mr.s,br.valueLabel=tr(br.value),br.percentInitial=Mr.begR,br.percentInitialLabel=a.formatPercent(Mr.begR),br.percentPrevious=Mr.difR,br.percentPreviousLabel=a.formatPercent(Mr.difR),br.percentTotal=Mr.sumR,br.percenTotalLabel=a.formatPercent(Mr.sumR));var Pr=a.castOption(tn,Mr.i,"customdata");return Pr&&(br.customdata=Pr),a.texttemplateString(ln,br,dn._d3locale,wr,br,tn._meta||{})}(xr,Jt,vn,Lt,Nt):fn.textinfo?function(dn,xn,sn,Yt){var Wt=dn[0].trace,tn=Wt.orientation==="h",ln=Wt.type==="waterfall",An=Wt.type==="funnel";function In(Pr){return t(tn?sn:Yt,+Pr,!0).text}var zn,Un,rr=Wt.textinfo,Xn=dn[xn],er=rr.split("+"),or=[],tr=function(Pr){return er.indexOf(Pr)!==-1};if(tr("label")&&or.push((Un=dn[xn].p,t(tn?Yt:sn,Un,!0).text)),tr("text")&&((zn=a.castOption(Wt,Xn.i,"text"))===0||zn)&&or.push(zn),ln){var gr=+Xn.rawS||Xn.s,Mr=Xn.v,br=Mr-gr;tr("initial")&&or.push(In(br)),tr("delta")&&or.push(In(gr)),tr("final")&&or.push(In(Mr))}if(An){tr("value")&&or.push(In(Xn.s));var cr=0;tr("percent initial")&&cr++,tr("percent previous")&&cr++,tr("percent total")&&cr++;var wr=cr>1;tr("percent initial")&&(zn=a.formatPercent(Xn.begR),wr&&(zn+=" of initial"),or.push(zn)),tr("percent previous")&&(zn=a.formatPercent(Xn.difR),wr&&(zn+=" of previous"),or.push(zn)),tr("percent total")&&(zn=a.formatPercent(Xn.sumR),wr&&(zn+=" of total"),or.push(zn))}return or.join("<br>")}(Jt,vn,Lt,Nt):l.getValue(fn.text,vn),l.coerceString(u,$t)}(an,rt,We,Ft,Xt);Dt=function(xr,Jt){var vn=l.getValue(xr.textposition,Jt);return l.coerceEnumerated(x,vn)}(Zt,We);var Tn=St.mode==="stack"||St.mode==="relative",mn=rt[We],Qt=!Tn||mn._outmost,un=mn.hasB,nn=Mt&&Mt-bt>g;if(Pn&&Dt!=="none"&&(!mn.isBlank&&ft!==mt&&vt!==ut||Dt!=="auto"&&Dt!=="inside")){var hn=an.font,bn=o.getBarColor(rt[We],Zt),wn=o.getInsideTextFont(Zt,We,hn,bn),Cn=o.getOutsideTextFont(Zt,We,hn),Ln=Zt.insidetextanchor||"end",Mn=Fe.datum();jt?Ft.type==="log"&&Mn.s0<=0&&(ft=Ft.range[0]<Ft.range[1]?0:Ft._length):Xt.type==="log"&&Mn.s0<=0&&(vt=Xt.range[0]<Xt.range[1]?Xt._length:0);var jn,Rn,Qn,Yn,ar,Kn=Math.abs(mt-ft),mr=Math.abs(ut-vt),en=Kn-2*g,rn=mr-2*g;if(Dt==="outside"&&(Qt||mn.hasB||(Dt="inside")),Dt==="auto")if(Qt){Dt="inside",jn=Ht(Fe,Pn,ar=a.ensureUniformFontSize(nt,wn)),Qn=(Rn=f.bBox(jn.node())).width,Yn=Rn.height;var En,gn=Qn>0&&Yn>0;En=nn?un?A(en-2*Mt,rn,Qn,Yn,jt)||A(en,rn-2*Mt,Qn,Yn,jt):jt?A(en-(Mt-bt),rn,Qn,Yn,jt)||A(en,rn-2*(Mt-bt),Qn,Yn,jt):A(en,rn-(Mt-bt),Qn,Yn,jt)||A(en-2*(Mt-bt),rn,Qn,Yn,jt):A(en,rn,Qn,Yn,jt),gn&&En?Dt="inside":(Dt="outside",jn.remove(),jn=null)}else Dt="inside";if(!jn){var Dn=(jn=Ht(Fe,Pn,ar=a.ensureUniformFontSize(nt,Dt==="outside"?Cn:wn))).attr("transform");if(jn.attr("transform",""),Qn=(Rn=f.bBox(jn.node())).width,Yn=Rn.height,jn.attr("transform",Dn),Qn<=0||Yn<=0)return void jn.remove()}var qn,Vn=Zt.textangle;qn=Dt==="outside"?function(xr,Jt,vn,Lt,Nt,$t){var fn,dn=!!$t.isHorizontal,xn=!!$t.constrained,sn=$t.angle||0,Yt=Nt.width,Wt=Nt.height,tn=Math.abs(Jt-xr),ln=Math.abs(Lt-vn);fn=dn?ln>2*g?g:0:tn>2*g?g:0;var An=1;xn&&(An=dn?Math.min(1,ln/Wt):Math.min(1,tn/Yt));var In=E(sn),zn=P(Nt,In),Un=(dn?zn.x:zn.y)/2,rr=(Nt.left+Nt.right)/2,Xn=(Nt.top+Nt.bottom)/2,er=(xr+Jt)/2,or=(vn+Lt)/2,tr=0,gr=0,Mr=dn?_(Jt,xr):_(vn,Lt);return dn?(er=Jt-Mr*fn,tr=Mr*Un):(or=Lt+Mr*fn,gr=-Mr*Un),{textX:rr,textY:Xn,targetX:er,targetY:or,anchorX:tr,anchorY:gr,scale:An,rotate:In}}(ft,mt,vt,ut,Rn,{isHorizontal:jt,constrained:Zt.constraintext==="both"||Zt.constraintext==="outside",angle:Vn}):I(ft,mt,vt,ut,Rn,{isHorizontal:jt,constrained:Zt.constraintext==="both"||Zt.constraintext==="inside",angle:Vn,anchor:Ln,hasB:un,r:Mt,overhead:bt}),qn.fontSize=ar.size,r(Zt.type==="histogram"?"bar":Zt.type,qn,an),mn.transform=qn;var Jn=h(jn,an,St,Pt);a.setTransormAndDisplay(Jn,qn)}else Fe.select("text").remove()})(D,z,be,Q,re,Me,Pe,De,he,at,yt,j,Y),z.layerClipId&&f.hideOutsideRangePoint(oe,be.select("text"),B,U,K.xcalendar,K.ycalendar)});var ge=K.cliponaxis===!1;f.setClipUrl(J,ge?null:z.layerClipId,D)});s.getComponentMethod("errorbars","plot")(D,ee,z,j)},toMoveInsideBar:I}},45784:function(F){"use strict";function C(e,T,k,a,w){var b=T.c2p(a?e.s0:e.p0,!0),f=T.c2p(a?e.s1:e.p1,!0),s=k.c2p(a?e.p0:e.s0,!0),t=k.c2p(a?e.p1:e.s1,!0);return w?[(b+f)/2,(s+t)/2]:a?[f,(s+t)/2]:[(b+f)/2,t]}F.exports=function(e,T){var k,a=e.cd,w=e.xaxis,b=e.yaxis,f=a[0].trace,s=f.type==="funnel",t=f.orientation==="h",i=[];if(T===!1)for(k=0;k<a.length;k++)a[k].selected=0;else for(k=0;k<a.length;k++){var r=a[k],n="ct"in r?r.ct:C(r,w,b,t,s);T.contains(n,!1,k,e)?(i.push({pointNumber:k,x:w.c2d(r.x),y:b.c2d(r.y)}),r.selected=1):r.selected=0}return i}},72592:function(F,C,e){"use strict";F.exports=k;var T=e(3400).distinctVals;function k(a,w){this.traces=a,this.sepNegVal=w.sepNegVal,this.overlapNoMerge=w.overlapNoMerge;for(var b=1/0,f=w.posAxis._id.charAt(0),s=[],t=0;t<a.length;t++){for(var i=a[t],r=0;r<i.length;r++){var n=i[r],o=n.p;o===void 0&&(o=n[f]),o!==void 0&&s.push(o)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=s;var l=T(s);this.distinctPositions=l.vals,l.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(l.minDiff,b);var c=(w.posAxis||{}).type;c!=="category"&&c!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(a,w){var b=this.getLabel(a,w),f=this.bins[b]||0;return this.bins[b]=f+w,f},k.prototype.get=function(a,w){var b=this.getLabel(a,w);return this.bins[b]||0},k.prototype.getLabel=function(a,w){return(w<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?a:Math.round(a/this.binWidth))}},60100:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(43616),w=e(3400),b=e(24040),f=e(82744).resizeText,s=e(20832),t=s.textfont,i=s.insidetextfont,r=s.outsidetextfont,n=e(60444);function o(m,y,v){a.pointStyle(m.selectAll("path"),y,v),l(m,y,v)}function l(m,y,v){m.selectAll("text").each(function(_){var h=T.select(this),S=w.ensureUniformFontSize(v,c(h,_,y,v));a.font(h,S)})}function c(m,y,v,_){var h=_._fullLayout.font,S=v.textfont;if(m.classed("bartext-inside")){var A=g(y,v);S=u(v,y.i,h,A)}else m.classed("bartext-outside")&&(S=x(v,y.i,h));return S}function d(m,y,v){return p(t,m.textfont,y,v)}function u(m,y,v,_){var h=d(m,y,v);return(m._input.textfont===void 0||m._input.textfont.color===void 0||Array.isArray(m.textfont.color)&&m.textfont.color[y]===void 0)&&(h={color:k.contrast(_),family:h.family,size:h.size,weight:h.weight,style:h.style,variant:h.variant,textcase:h.textcase,lineposition:h.lineposition,shadow:h.shadow}),p(i,m.insidetextfont,y,h)}function x(m,y,v){var _=d(m,y,v);return p(r,m.outsidetextfont,y,_)}function p(m,y,v,_){y=y||{};var h=n.getValue(y.family,v),S=n.getValue(y.size,v),A=n.getValue(y.color,v),E=n.getValue(y.weight,v),P=n.getValue(y.style,v),I=n.getValue(y.variant,v),D=n.getValue(y.textcase,v),z=n.getValue(y.lineposition,v),V=n.getValue(y.shadow,v);return{family:n.coerceString(m.family,h,_.family),size:n.coerceNumber(m.size,S,_.size),color:n.coerceColor(m.color,A,_.color),weight:n.coerceString(m.weight,E,_.weight),style:n.coerceString(m.style,P,_.style),variant:n.coerceString(m.variant,I,_.variant),textcase:n.coerceString(m.variant,D,_.textcase),lineposition:n.coerceString(m.variant,z,_.lineposition),shadow:n.coerceString(m.variant,V,_.shadow)}}function g(m,y){return y.type==="waterfall"?y[m.dir].marker.color:m.mcc||m.mc||y.marker.color}F.exports={style:function(m){var y=T.select(m).selectAll('g[class^="barlayer"]').selectAll("g.trace");f(m,y,"bar");var v=y.size(),_=m._fullLayout;y.style("opacity",function(h){return h[0].trace.opacity}).each(function(h){(_.barmode==="stack"&&v>1||_.bargap===0&&_.bargroupgap===0&&!h[0].trace.marker.line.width)&&T.select(this).attr("shape-rendering","crispEdges")}),y.selectAll("g.points").each(function(h){o(T.select(this),h[0].trace,m)}),b.getComponentMethod("errorbars","style")(y)},styleTextPoints:l,styleOnSelect:function(m,y,v){var _=y[0].trace;_.selectedpoints?function(h,S,A){a.selectedPointStyle(h.selectAll("path"),S),function(E,P,I){E.each(function(D){var z,V=T.select(this);if(D.selected){z=w.ensureUniformFontSize(I,c(V,D,P,I));var O=P.selected.textfont&&P.selected.textfont.color;O&&(z.color=O),a.font(V,z)}else a.selectedTextStyle(V,P)})}(h.selectAll("text"),S,A)}(v,_,m):(o(v,_,m),b.getComponentMethod("errorbars","style")(v))},getInsideTextFont:u,getOutsideTextFont:x,getBarColor:g,resizeText:f}},55592:function(F,C,e){"use strict";var T=e(76308),k=e(94288).hasColorscale,a=e(27260),w=e(3400).coercePattern;F.exports=function(b,f,s,t,i){var r=s("marker.color",t),n=k(b,"marker");n&&a(b,f,i,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",T.defaultLine),k(b,"marker.line")&&a(b,f,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),w(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},82744:function(F,C,e){"use strict";var T=e(33428),k=e(3400);function a(w){return"_"+w+"Text_minsize"}F.exports={recordMinTextSize:function(w,b,f){if(f.uniformtext.mode){var s=a(w),t=f.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<t,f[s]=f[s]||1/0,b.hide||(f[s]=Math.min(f[s],Math.max(i,t)))}},clearMinTextSize:function(w,b){b[a(w)]=void 0},resizeText:function(w,b,f){var s=w._fullLayout,t=s["_"+f+"Text_minsize"];if(t){var i,r=s.uniformtext.mode==="hide";switch(f){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(n){var o=n.transform;if(o){o.scale=r&&o.hide?0:t/o.fontSize;var l=T.select(this).select("text");k.setTransormAndDisplay(l,o)}})}}}},78100:function(F,C,e){"use strict";var T,k=e(21776).Ks,a=e(92880).extendFlat,w=e(8319),b=e(20832);F.exports={r:w.r,theta:w.theta,r0:w.r0,dr:w.dr,theta0:w.theta0,dtheta:w.dtheta,thetaunit:w.thetaunit,base:a({},b.base,{}),offset:a({},b.offset,{}),width:a({},b.width,{}),text:a({},b.text,{}),hovertext:a({},b.hovertext,{}),marker:(T=a({},b.marker),delete T.cornerradius,T),hoverinfo:w.hoverinfo,hovertemplate:k(),selected:b.selected,unselected:b.unselected}},47056:function(F,C,e){"use strict";var T=e(94288).hasColorscale,k=e(47128),a=e(3400).isArrayOrTypedArray,w=e(84664),b=e(96376).setGroupPositions,f=e(4500),s=e(24040).traceIs,t=e(3400).extendFlat;F.exports={calc:function(i,r){for(var n=i._fullLayout,o=r.subplot,l=n[o].radialaxis,c=n[o].angularaxis,d=l.makeCalcdata(r,"r"),u=c.makeCalcdata(r,"theta"),x=r._length,p=new Array(x),g=d,m=u,y=0;y<x;y++)p[y]={p:m[y],s:g[y]};function v(_){var h=r[_];h!==void 0&&(r["_"+_]=a(h)?c.makeCalcdata(r,_):c.d2c(h,r.thetaunit))}return c.type==="linear"&&(v("width"),v("offset")),T(r,"marker")&&k(i,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),T(r,"marker.line")&&k(i,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),w(p,r),f(p,r),p},crossTraceCalc:function(i,r,n){for(var o=i.calcdata,l=[],c=0;c<o.length;c++){var d=o[c],u=d[0].trace;u.visible===!0&&s(u,"bar")&&u.subplot===n&&l.push(d)}var x=t({},r.radialaxis,{_id:"x"}),p=r.angularaxis;b(i,p,x,l,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},70384:function(F,C,e){"use strict";var T=e(3400),k=e(85968).handleRThetaDefaults,a=e(55592),w=e(78100);F.exports=function(b,f,s,t){function i(r,n){return T.coerce(b,f,w,r,n)}k(b,f,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),a(b,f,i,s,t),T.coerceSelectionMarkerOpacity(f,i)):f.visible=!1}},68896:function(F,C,e){"use strict";var T=e(93024),k=e(3400),a=e(63400).getTraceColor,w=k.fillText,b=e(8504).makeHoverPointText,f=e(57384).isPtInsidePolygon;F.exports=function(s,t,i){var r=s.cd,n=r[0].trace,o=s.subplot,l=o.radialAxis,c=o.angularAxis,d=o.vangles,u=d?f:k.isPtInsideSector,x=s.maxHoverDistance,p=c._period||2*Math.PI,g=Math.abs(l.g2p(Math.sqrt(t*t+i*i))),m=Math.atan2(i,t);if(l.range[0]>l.range[1]&&(m+=Math.PI),T.getClosest(r,function(_){return u(g,m,[_.rp0,_.rp1],[_.thetag0,_.thetag1],d)?x+Math.min(1,Math.abs(_.thetag1-_.thetag0)/p)-1+(_.rp1-g)/(_.rp1-_.rp0)-1:1/0},s),s.index!==!1){var y=r[s.index];s.x0=s.x1=y.ct[0],s.y0=s.y1=y.ct[1];var v=k.extendFlat({},y,{r:y.s,theta:y.p});return w(y,n,s),b(v,n,o,s),s.hovertemplate=n.hovertemplate,s.color=a(n,y),s.xLabelVal=s.yLabelVal=void 0,y.s<0&&(s.idealAlign="left"),[s]}}},94456:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(F){"use strict";F.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(F,C,e){"use strict";var T=e(3400),k=e(9320);F.exports=function(a,w,b){var f,s={};function t(n,o){return T.coerce(a[f]||{},w[f],k,n,o)}for(var i=0;i<b.length;i++){var r=b[i];r.type==="barpolar"&&r.visible===!0&&(s[f=r.subplot]||(t("barmode"),t("bargap"),s[f]=1))}}},42040:function(F,C,e){"use strict";var T=e(33428),k=e(38248),a=e(3400),w=e(43616),b=e(57384);F.exports=function(f,s,t){var i=f._context.staticPlot,r=s.xaxis,n=s.yaxis,o=s.radialAxis,l=s.angularAxis,c=function(u){var x=u.cxx,p=u.cyy;return u.vangles?function(g,m,y,v){var _,h;a.angleDelta(y,v)>0?(_=y,h=v):(_=v,h=y);var S=[b.findEnclosingVertexAngles(_,u.vangles)[0],(_+h)/2,b.findEnclosingVertexAngles(h,u.vangles)[1]];return b.pathPolygonAnnulus(g,m,_,h,S,x,p)}:function(g,m,y,v){return a.pathAnnulus(g,m,y,v,x,p)}}(s),d=s.layers.frontplot.select("g.barlayer");a.makeTraceGroups(d,t,"trace bars").each(function(){var u=T.select(this),x=a.ensureSingle(u,"g","points").selectAll("g.point").data(a.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(p){var g,m=T.select(this),y=p.rp0=o.c2p(p.s0),v=p.rp1=o.c2p(p.s1),_=p.thetag0=l.c2g(p.p0),h=p.thetag1=l.c2g(p.p1);if(k(y)&&k(v)&&k(_)&&k(h)&&y!==v&&_!==h){var S=o.c2g(p.s1),A=(_+h)/2;p.ct=[r.c2p(S*Math.cos(A)),n.c2p(S*Math.sin(A))],g=c(y,v,_,h)}else g="M0,0Z";a.ensureSingle(m,"path").attr("d",g)}),w.setClipUrl(u,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,f)})}},63188:function(F,C,e){"use strict";var T=e(98304),k=e(52904),a=e(20832),w=e(22548),b=e(29736).axisHoverFormat,f=e(21776).Ks,s=e(92880).extendFlat,t=k.marker,i=t.line;F.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:s({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:s({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:s({},t.angle,{arrayOk:!1,editType:"calc"}),size:s({},t.size,{arrayOk:!1,editType:"calc"}),color:s({},t.color,{arrayOk:!1,editType:"style"}),line:{color:s({},i.color,{arrayOk:!1,dflt:w.defaultLine,editType:"style"}),width:s({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:s({},k.text,{}),hovertext:s({},k.hovertext,{}),hovertemplate:f({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:k.zorder}},62555:function(F,C,e){"use strict";var T=e(38248),k=e(54460),a=e(1220),w=e(3400),b=e(39032).BADNUM,f=w._;F.exports=function(u,x){var p,g,m,y,v,_,h,S=u._fullLayout,A=k.getFromId(u,x.xaxis||"x"),E=k.getFromId(u,x.yaxis||"y"),P=[],I=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(m=A,y="x",v=E,_="y",h=!!x.yperiodalignment):(m=E,y="y",v=A,_="x",h=!!x.xperiodalignment);var D,z,V,O,j,Y,B=function(Oe,Ee,Be,Ve){var Ze,it=Ee+"0"in Oe;if(Ee in Oe||it&&"d"+Ee in Oe){var at=Be.makeCalcdata(Oe,Ee);return[a(Oe,Be,Ee,at).vals,at]}Ze=it?Oe[Ee+"0"]:"name"in Oe&&(Be.type==="category"||T(Oe.name)&&["linear","log"].indexOf(Be.type)!==-1||w.isDateTime(Oe.name)&&Be.type==="date")?Oe.name:Ve;for(var gt=Be.type==="multicategory"?Be.r2c_just_indices(Ze):Be.d2c(Ze,0,Oe[Ee+"calendar"]),yt=Oe._length,pt=new Array(yt),et=0;et<yt;et++)pt[et]=gt;return[pt]}(x,_,v,S[I]),U=B[0],q=B[1],te=w.distinctVals(U,v),ee=te.vals,Q=te.minDiff/2,J=(x.boxpoints||x.points)==="all"?w.identity:function(Oe){return Oe.v<D.lf||Oe.v>D.uf};if(x._hasPreCompStats){var K=x[y],X=function(Oe){return m.d2c((x[Oe]||[])[p])},ie=1/0,se=-1/0;for(p=0;p<x._length;p++){var ae=U[p];if(T(ae)){if((D={}).pos=D[_]=ae,h&&q&&(D.orig_p=q[p]),D.q1=X("q1"),D.med=X("median"),D.q3=X("q3"),z=[],K&&w.isArrayOrTypedArray(K[p]))for(g=0;g<K[p].length;g++)(Y=m.d2c(K[p][g]))!==b&&(t(j={v:Y,i:[p,g]},x,[p,g]),z.push(j));if(D.pts=z.sort(i),O=(V=D[y]=z.map(r)).length,D.med!==b&&D.q1!==b&&D.q3!==b&&D.med>=D.q1&&D.q3>=D.med){var ue=X("lowerfence");D.lf=ue!==b&&ue<=D.q1?ue:n(D,V,O);var ve=X("upperfence");D.uf=ve!==b&&ve>=D.q3?ve:o(D,V,O);var ye=X("mean");D.mean=ye!==b?ye:O?w.mean(V,O):(D.q1+D.q3)/2;var pe=X("sd");D.sd=ye!==b&&pe>=0?pe:O?w.stdev(V,O,D.mean):D.q3-D.q1,D.lo=l(D),D.uo=c(D);var de=X("notchspan");de=de!==b&&de>0?de:d(D,O),D.ln=D.med-de,D.un=D.med+de;var me=D.lf,ke=D.uf;x.boxpoints&&V.length&&(me=Math.min(me,V[0]),ke=Math.max(ke,V[O-1])),x.notched&&(me=Math.min(me,D.ln),ke=Math.max(ke,D.un)),D.min=me,D.max=ke}else{var Ce;w.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+D.q1,"median = "+D.med,"q3 = "+D.q3].join(`
`)),Ce=D.med!==b?D.med:D.q1!==b?D.q3!==b?(D.q1+D.q3)/2:D.q1:D.q3!==b?D.q3:0,D.med=Ce,D.q1=D.q3=Ce,D.lf=D.uf=Ce,D.mean=D.sd=Ce,D.ln=D.un=Ce,D.min=D.max=Ce}ie=Math.min(ie,D.min),se=Math.max(se,D.max),D.pts2=z.filter(J),P.push(D)}}x._extremes[m._id]=k.findExtremes(m,[ie,se],{padded:!0})}else{var ge=m.makeCalcdata(x,y),oe=function(Oe,Ee){for(var Be=Oe.length,Ve=new Array(Be+1),Ze=0;Ze<Be;Ze++)Ve[Ze]=Oe[Ze]-Ee;return Ve[Be]=Oe[Be-1]+Ee,Ve}(ee,Q),re=ee.length,fe=function(Oe){for(var Ee=new Array(Oe),Be=0;Be<Oe;Be++)Ee[Be]=[];return Ee}(re);for(p=0;p<x._length;p++)if(Y=ge[p],T(Y)){var Se=w.findBin(U[p],oe);Se>=0&&Se<re&&(t(j={v:Y,i:p},x,p),fe[Se].push(j))}var be=1/0,we=-1/0,Me=x.quartilemethod,Pe=Me==="exclusive",De=Me==="inclusive";for(p=0;p<re;p++)if(fe[p].length>0){var he,_e;(D={}).pos=D[_]=ee[p],z=D.pts=fe[p].sort(i),O=(V=D[y]=z.map(r)).length,D.min=V[0],D.max=V[O-1],D.mean=w.mean(V,O),D.sd=w.stdev(V,O,D.mean)*x.sdmultiple,D.med=w.interp(V,.5),O%2&&(Pe||De)?(Pe?(he=V.slice(0,O/2),_e=V.slice(O/2+1)):De&&(he=V.slice(0,O/2+1),_e=V.slice(O/2)),D.q1=w.interp(he,.5),D.q3=w.interp(_e,.5)):(D.q1=w.interp(V,.25),D.q3=w.interp(V,.75)),D.lf=n(D,V,O),D.uf=o(D,V,O),D.lo=l(D),D.uo=c(D);var Ae=d(D,O);D.ln=D.med-Ae,D.un=D.med+Ae,be=Math.min(be,D.ln),we=Math.max(we,D.un),D.pts2=z.filter(J),P.push(D)}x.notched&&w.isTypedArray(ge)&&(ge=Array.from(ge)),x._extremes[m._id]=k.findExtremes(m,x.notched?ge.concat([be,we]):ge,{padded:!0})}return function(Oe,Ee){if(w.isArrayOrTypedArray(Ee.selectedpoints))for(var Be=0;Be<Oe.length;Be++){for(var Ve=Oe[Be].pts||[],Ze={},it=0;it<Ve.length;it++)Ze[Ve[it].i]=it;w.tagSelected(Ve,Ee,Ze)}}(P,x),P.length>0?(P[0].t={num:S[I],dPos:Q,posLetter:_,valLetter:y,labels:{med:f(u,"median:"),min:f(u,"min:"),q1:f(u,"q1:"),q3:f(u,"q3:"),max:f(u,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?f(u,"mean \xB1 \u03C3:").replace("\u03C3",x.sdmultiple===1?"\u03C3":x.sdmultiple+"\u03C3"):f(u,"mean:"),lf:f(u,"lower fence:"),uf:f(u,"upper fence:")}},S[I]++,P):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(u,x,p){for(var g in s)w.isArrayOrTypedArray(x[g])&&(Array.isArray(p)?w.isArrayOrTypedArray(x[g][p[0]])&&(u[s[g]]=x[g][p[0]][p[1]]):u[s[g]]=x[g][p])}function i(u,x){return u.v-x.v}function r(u){return u.v}function n(u,x,p){return p===0?u.q1:Math.min(u.q1,x[Math.min(w.findBin(2.5*u.q1-1.5*u.q3,x,!0)+1,p-1)])}function o(u,x,p){return p===0?u.q3:Math.max(u.q3,x[Math.max(w.findBin(2.5*u.q3-1.5*u.q1,x),0)])}function l(u){return 4*u.q1-3*u.q3}function c(u){return 4*u.q3-3*u.q1}function d(u,x){return x===0?0:1.57*(u.q3-u.q1)/Math.sqrt(x)}},96404:function(F,C,e){"use strict";var T=e(54460),k=e(3400),a=e(71888).getAxisGroup,w=["v","h"];function b(f,s,t,i){var r,n,o,l=s.calcdata,c=s._fullLayout,d=i._id,u=d.charAt(0),x=[],p=0;for(r=0;r<t.length;r++)for(o=l[t[r]],n=0;n<o.length;n++)x.push(i.c2l(o[n].pos,!0)),p+=(o[n].pts2||[]).length;if(x.length){var g=k.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(g.minDiff=1);var m=g.minDiff/2;T.minDtick(i,g.minDiff,g.vals[0],!0);var y=c[f==="violin"?"_numViolins":"_numBoxes"],v=c[f+"mode"]==="group"&&y>1,_=1-c[f+"gap"],h=1-c[f+"groupgap"];for(r=0;r<t.length;r++){var S,A,E,P,I,D,z=(o=l[t[r]])[0].trace,V=o[0].t,O=z.width,j=z.side;if(O)S=A=P=O/2,E=0;else if(S=m,v){var Y=a(c,i._id)+z.orientation,B=(c._alignmentOpts[Y]||{})[z.alignmentgroup]||{},U=Object.keys(B.offsetGroups||{}).length,q=U||y;A=S*_*h/q,E=2*S*(((U?z._offsetIndex:V.num)+.5)/q-.5)*_,P=S*_/q}else A=S*_*h,E=0,P=S;V.dPos=S,V.bPos=E,V.bdPos=A,V.wHover=P;var te,ee,Q,J,K,X,ie=E+A,se=!!O;if(j==="positive"?(I=S*(O?1:.5),te=ie,D=te=E):j==="negative"?(I=te=E,D=S*(O?1:.5),ee=ie):(I=D=S,te=ee=ie),(z.boxpoints||z.points)&&p>0){var ae=z.pointpos,ue=z.jitter,ve=z.marker.size/2,ye=0;ae+ue>=0&&((ye=ie*(ae+ue))>I?(se=!0,K=ve,Q=ye):ye>te&&(K=ve,Q=I)),ye<=I&&(Q=I);var pe=0;ae-ue<=0&&((pe=-ie*(ae-ue))>D?(se=!0,X=ve,J=pe):pe>ee&&(X=ve,J=D)),pe<=D&&(J=D)}else Q=I,J=D;var de=new Array(o.length);for(n=0;n<o.length;n++)de[n]=o[n].pos;z._extremes[d]=T.findExtremes(i,de,{padded:se,vpadminus:J,vpadplus:Q,vpadLinearized:!0,ppadminus:{x:X,y:K}[u],ppadplus:{x:K,y:X}[u]})}}}F.exports={crossTraceCalc:function(f,s){for(var t=f.calcdata,i=s.xaxis,r=s.yaxis,n=0;n<w.length;n++){for(var o=w[n],l=o==="h"?r:i,c=[],d=0;d<t.length;d++){var u=t[d],x=u[0].t,p=u[0].trace;p.visible!==!0||p.type!=="box"&&p.type!=="candlestick"||x.empty||(p.orientation||"v")!==o||p.xaxis!==i._id||p.yaxis!==r._id||c.push(d)}b("box",f,c,l)}},setPositionOffset:b}},90624:function(F,C,e){"use strict";var T=e(3400),k=e(24040),a=e(76308),w=e(31147),b=e(20011),f=e(52976),s=e(63188);function t(r,n,o,l){function c(j){var Y=0;return j&&j.length&&(Y+=1,T.isArrayOrTypedArray(j[0])&&j[0].length&&(Y+=1)),Y}function d(j){return T.validate(r[j],s[j])}var u,x=o("y"),p=o("x");if(n.type==="box"){var g=o("q1"),m=o("median"),y=o("q3");n._hasPreCompStats=g&&g.length&&m&&m.length&&y&&y.length,u=Math.min(T.minRowLength(g),T.minRowLength(m),T.minRowLength(y))}var v,_,h=c(x),S=c(p),A=h&&T.minRowLength(x),E=S&&T.minRowLength(p),P=l.calendar,I={autotypenumbers:l.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(h)){case"00":var D=d("x0")||d("dx");v=!d("y0")&&!d("dy")||D?"v":"h",_=u;break;case"10":v="v",_=Math.min(u,E);break;case"20":v="h",_=Math.min(u,p.length);break;case"01":v="h",_=Math.min(u,A);break;case"02":v="v",_=Math.min(u,x.length);break;case"12":v="v",_=Math.min(u,E,x.length);break;case"21":v="h",_=Math.min(u,p.length,A);break;case"11":_=0;break;case"22":var z,V=!1;for(z=0;z<p.length;z++)if(f(p[z],P,I)==="category"){V=!0;break}if(V)v="v",_=Math.min(u,E,x.length);else{for(z=0;z<x.length;z++)if(f(x[z],P,I)==="category"){V=!0;break}V?(v="h",_=Math.min(u,p.length,A)):(v="v",_=Math.min(u,E,x.length))}}else h>0?(v="v",_=S>0?Math.min(E,A):Math.min(A)):S>0?(v="h",_=Math.min(E)):_=0;if(_){n._length=_;var O=o("orientation",v);n._hasPreCompStats?O==="v"&&S===0?(o("x0",0),o("dx",1)):O==="h"&&h===0&&(o("y0",0),o("dy",1)):O==="v"&&S===0?o("x0"):O==="h"&&h===0&&o("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],l)}else n.visible=!1}function i(r,n,o,l){var c=l.prefix,d=T.coerce2(r,n,s,"marker.outliercolor"),u=o("marker.line.outliercolor"),x="outliers";n._hasPreCompStats?x="all":(d||u)&&(x="suspectedoutliers");var p=o(c+"points",x);p?(o("jitter",p==="all"?.3:0),o("pointpos",p==="all"?-1.5:0),o("marker.symbol"),o("marker.opacity"),o("marker.size"),o("marker.angle"),o("marker.color",n.line.color),o("marker.line.color"),o("marker.line.width"),p==="suspectedoutliers"&&(o("marker.line.outliercolor",n.marker.color),o("marker.line.outlierwidth")),o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size"),o("text"),o("hovertext")):delete n.marker;var g=o("hoveron");g!=="all"&&g.indexOf("points")===-1||o("hovertemplate"),T.coerceSelectionMarkerOpacity(n,o)}F.exports={supplyDefaults:function(r,n,o,l){function c(_,h){return T.coerce(r,n,s,_,h)}if(t(r,n,c,l),n.visible!==!1){w(r,n,l,c),c("xhoverformat"),c("yhoverformat");var d=n._hasPreCompStats;d&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||o),c("line.width"),c("fillcolor",a.addOpacity(n.line.color,.5));var u=!1;if(d){var x=c("mean"),p=c("sd");x&&x.length&&(u=!0,p&&p.length&&(u="sd"))}c("whiskerwidth");var g,m=c("sizemode");m==="quartiles"&&(g=c("boxmean",u)),c("showwhiskers",m==="quartiles"),m!=="sd"&&g!=="sd"||c("sdmultiple"),c("width"),c("quartilemethod");var y=!1;if(d){var v=c("notchspan");v&&v.length&&(y=!0)}else T.validate(r.notchwidth,s.notchwidth)&&(y=!0);c("notched",y)&&c("notchwidth"),i(r,n,c,{prefix:"box"}),c("zorder")}},crossTraceDefaults:function(r,n){var o,l;function c(x){return T.coerce(l._input,l,s,x)}for(var d=0;d<r.length;d++){var u=(l=r[d]).type;u!=="box"&&u!=="violin"||(o=l._input,n[u+"mode"]==="group"&&b(o,l,n,c))}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(F){"use strict";F.exports=function(C,e){return e.hoverOnBox&&(C.hoverOnBox=e.hoverOnBox),"xVal"in e&&(C.x=e.xVal),"yVal"in e&&(C.y=e.yVal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C}},27576:function(F,C,e){"use strict";var T=e(54460),k=e(3400),a=e(93024),w=e(76308),b=k.fillText;function f(t,i,r,n){var o,l,c,d,u,x,p,g,m,y,v,_,h,S,A=t.cd,E=t.xa,P=t.ya,I=A[0].trace,D=A[0].t,z=I.type==="violin",V=D.bdPos,O=D.wHover,j=function(Ce){return c.c2l(Ce.pos)+D.bPos-c.c2l(x)};z&&I.side!=="both"?(I.side==="positive"&&(m=function(Ce){var ge=j(Ce);return a.inbox(ge,ge+O,y)},_=V,h=0),I.side==="negative"&&(m=function(Ce){var ge=j(Ce);return a.inbox(ge-O,ge,y)},_=0,h=V)):(m=function(Ce){var ge=j(Ce);return a.inbox(ge-O,ge+O,y)},_=h=V),S=z?function(Ce){return a.inbox(Ce.span[0]-u,Ce.span[1]-u,y)}:function(Ce){return a.inbox(Ce.min-u,Ce.max-u,y)},I.orientation==="h"?(u=i,x=r,p=S,g=m,o="y",c=P,l="x",d=E):(u=r,x=i,p=m,g=S,o="x",c=E,l="y",d=P);var Y=Math.min(1,V/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function B(Ce){return(p(Ce)+g(Ce))/2}y=t.maxHoverDistance-Y,v=t.maxSpikeDistance-Y;var U=a.getDistanceFunction(n,p,g,B);if(a.getClosest(A,U,t),t.index===!1)return[];var q=A[t.index],te=I.line.color,ee=(I.marker||{}).color;w.opacity(te)&&I.line.width?t.color=te:w.opacity(ee)&&I.boxpoints?t.color=ee:t.color=I.fillcolor,t[o+"0"]=c.c2p(q.pos+D.bPos-h,!0),t[o+"1"]=c.c2p(q.pos+D.bPos+_,!0),t[o+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var Q=o+"Spike";t.spikeDistance=B(q)*v/y,t[Q]=c.c2p(q.pos,!0);var J=I.boxmean||I.sizemode==="sd"||(I.meanline||{}).visible,K=I.boxpoints||I.points,X=K&&J?["max","uf","q3","med","mean","q1","lf","min"]:K&&!J?["max","uf","q3","med","q1","lf","min"]:!K&&J?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ie=d.range[1]<d.range[0];I.orientation===(ie?"v":"h")&&X.reverse();for(var se=t.spikeDistance,ae=t[Q],ue=[],ve=0;ve<X.length;ve++){var ye=X[ve];if(ye in q){var pe=q[ye],de=d.c2p(pe,!0),me=k.extendFlat({},t);me.attr=ye,me[l+"0"]=me[l+"1"]=de,me[l+"LabelVal"]=pe,me[l+"Label"]=(D.labels?D.labels[ye]+" ":"")+T.hoverLabelText(d,pe,I[l+"hoverformat"]),me.hoverOnBox=!0,ye!=="mean"||!("sd"in q)||I.boxmean!=="sd"&&I.sizemode!=="sd"||(me[l+"err"]=q.sd),me.hovertemplate=!1,ue.push(me)}}t.name="",t.spikeDistance=void 0,t[Q]=void 0;for(var ke=0;ke<ue.length;ke++)ue[ke].attr!=="med"?(ue[ke].name="",ue[ke].spikeDistance=void 0,ue[ke][Q]=void 0):(ue[ke].spikeDistance=se,ue[ke][Q]=ae);return ue}function s(t,i,r){for(var n,o,l,c=t.cd,d=t.xa,u=t.ya,x=c[0].trace,p=d.c2p(i),g=u.c2p(r),m=a.quadrature(function(z){var V=Math.max(3,z.mrc||0);return Math.max(Math.abs(d.c2p(z.x)-p)-V,1-3/V)},function(z){var V=Math.max(3,z.mrc||0);return Math.max(Math.abs(u.c2p(z.y)-g)-V,1-3/V)}),y=!1,v=0;v<c.length;v++){o=c[v];for(var _=0;_<(o.pts||[]).length;_++){var h=m(l=o.pts[_]);h<=t.distance&&(t.distance=h,y=[v,_])}}if(!y)return!1;l=(o=c[y[0]]).pts[y[1]];var S=d.c2p(l.x,!0),A=u.c2p(l.y,!0),E=l.mrc||1;n=k.extendFlat({},t,{index:l.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:A-E,y1:A+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var P,I=o.orig_p,D=I!==void 0?I:o.pos;return x.orientation==="h"?(P=u,n.xLabelVal=l.x,n.yLabelVal=D):(P=d,n.xLabelVal=D,n.yLabelVal=l.y),n[P._id.charAt(0)+"Spike"]=P.c2p(o.pos,!0),b(l,x,n),n}F.exports={hoverPoints:function(t,i,r,n){var o,l=t.cd[0].trace.hoveron,c=[];return l.indexOf("boxes")!==-1&&(c=c.concat(f(t,i,r,n))),l.indexOf("points")!==-1&&(o=s(t,i,r)),n==="closest"?o?[o]:c:(o&&c.push(o),c)},hoverOnBoxes:f,hoverOnPoints:s}},67244:function(F,C,e){"use strict";F.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(F){"use strict";F.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(16560);function w(b,f,s,t,i){for(var r=i+"Layout",n=!1,o=0;o<s.length;o++){var l=s[o];if(T.traceIs(l,r)){n=!0;break}}n&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}F.exports={supplyLayoutDefaults:function(b,f,s){w(0,0,s,function(t,i){return k.coerce(b,f,a,t,i)},"box")},_supply:w}},18728:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616);function w(s,t,i,r,n){var o,l,c=i.orientation==="h",d=t.val,u=t.pos,x=!!u.rangebreaks,p=r.bPos,g=r.wdPos||0,m=r.bPosPxOffset||0,y=i.whiskerwidth||0,v=i.showwhiskers!==!1,_=i.notched||!1,h=_?1-2*i.notchwidth:1;Array.isArray(r.bdPos)?(o=r.bdPos[0],l=r.bdPos[1]):(o=r.bdPos,l=r.bdPos);var S=s.selectAll("path.box").data(i.type!=="violin"||i.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(A){if(A.empty)return T.select(this).attr("d","M0,0Z");var E=u.c2l(A.pos+p,!0),P=u.l2p(E-o)+m,I=u.l2p(E+l)+m,D=x?(P+I)/2:u.l2p(E)+m,z=i.whiskerwidth,V=x?P*z+(1-z)*D:u.l2p(E-g)+m,O=x?I*z+(1-z)*D:u.l2p(E+g)+m,j=u.l2p(E-o*h)+m,Y=u.l2p(E+l*h)+m,B=i.sizemode==="sd",U=d.c2p(B?A.mean-A.sd:A.q1,!0),q=B?d.c2p(A.mean+A.sd,!0):d.c2p(A.q3,!0),te=k.constrain(B?d.c2p(A.mean,!0):d.c2p(A.med,!0),Math.min(U,q)+1,Math.max(U,q)-1),ee=A.lf===void 0||i.boxpoints===!1||B,Q=d.c2p(ee?A.min:A.lf,!0),J=d.c2p(ee?A.max:A.uf,!0),K=d.c2p(A.ln,!0),X=d.c2p(A.un,!0);c?T.select(this).attr("d","M"+te+","+j+"V"+Y+"M"+U+","+P+"V"+I+(_?"H"+K+"L"+te+","+Y+"L"+X+","+I:"")+"H"+q+"V"+P+(_?"H"+X+"L"+te+","+j+"L"+K+","+P:"")+"Z"+(v?"M"+U+","+D+"H"+Q+"M"+q+","+D+"H"+J+(y===0?"":"M"+Q+","+V+"V"+O+"M"+J+","+V+"V"+O):"")):T.select(this).attr("d","M"+j+","+te+"H"+Y+"M"+P+","+U+"H"+I+(_?"V"+K+"L"+Y+","+te+"L"+I+","+X:"")+"V"+q+"H"+P+(_?"V"+X+"L"+j+","+te+"L"+P+","+K:"")+"Z"+(v?"M"+D+","+U+"V"+Q+"M"+D+","+q+"V"+J+(y===0?"":"M"+V+","+Q+"H"+O+"M"+V+","+J+"H"+O):""))})}function b(s,t,i,r){var n=t.x,o=t.y,l=r.bdPos,c=r.bPos,d=i.boxpoints||i.points;k.seedPseudoRandom();var u=s.selectAll("g.points").data(d?function(p){return p.forEach(function(g){g.t=r,g.trace=i}),p}:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var x=u.selectAll("path").data(function(p){var g,m,y=p.pts2,v=Math.max((p.max-p.min)/10,p.q3-p.q1),_=1e-9*v,h=.01*v,S=[],A=0;if(i.jitter){if(v===0)for(A=1,S=new Array(y.length),g=0;g<y.length;g++)S[g]=1;else for(g=0;g<y.length;g++){var E=Math.max(0,g-5),P=y[E].v,I=Math.min(y.length-1,g+5),D=y[I].v;d!=="all"&&(y[g].v<p.lf?D=Math.min(D,p.lf):P=Math.max(P,p.uf));var z=Math.sqrt(h*(I-E)/(D-P+_))||0;z=k.constrain(Math.abs(z),0,1),S.push(z),A=Math.max(z,A)}m=2*i.jitter/(A||1)}for(g=0;g<y.length;g++){var V=y[g],O=V.v,j=i.jitter?m*S[g]*(k.pseudoRandom()-.5):0,Y=p.pos+c+l*(i.pointpos+j);i.orientation==="h"?(V.y=Y,V.x=O):(V.x=Y,V.y=O),d==="suspectedoutliers"&&O<p.uo&&O>p.lo&&(V.so=!0)}return y});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(a.translatePoints,n,o)}function f(s,t,i,r){var n,o,l=t.val,c=t.pos,d=!!c.rangebreaks,u=r.bPos,x=r.bPosPxOffset||0,p=i.boxmean||(i.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],o=r.bdPos[1]):(n=r.bdPos,o=r.bdPos);var g=s.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?k.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(m){var y=c.c2l(m.pos+u,!0),v=c.l2p(y-n)+x,_=c.l2p(y+o)+x,h=d?(v+_)/2:c.l2p(y)+x,S=l.c2p(m.mean,!0),A=l.c2p(m.mean-m.sd,!0),E=l.c2p(m.mean+m.sd,!0);i.orientation==="h"?T.select(this).attr("d","M"+S+","+v+"V"+_+(p==="sd"?"m0,0L"+A+","+h+"L"+S+","+v+"L"+E+","+h+"Z":"")):T.select(this).attr("d","M"+v+","+S+"H"+_+(p==="sd"?"m0,0L"+h+","+A+"L"+v+","+S+"L"+h+","+E+"Z":""))})}F.exports={plot:function(s,t,i,r){var n=s._context.staticPlot,o=t.xaxis,l=t.yaxis;k.makeTraceGroups(r,i,"trace boxes").each(function(c){var d,u,x=T.select(this),p=c[0],g=p.t,m=p.trace;g.wdPos=g.bdPos*m.whiskerwidth,m.visible!==!0||g.empty?x.remove():(m.orientation==="h"?(d=l,u=o):(d=o,u=l),w(x,{pos:d,val:u},m,g,n),b(x,{x:o,y:l},m,g),f(x,{pos:d,val:u},m,g))})},plotBoxAndWhiskers:w,plotPoints:b,plotBoxMean:f}},8264:function(F){"use strict";F.exports=function(C,e){var T,k,a=C.cd,w=C.xaxis,b=C.yaxis,f=[];if(e===!1)for(T=0;T<a.length;T++)for(k=0;k<(a[T].pts||[]).length;k++)a[T].pts[k].selected=0;else for(T=0;T<a.length;T++)for(k=0;k<(a[T].pts||[]).length;k++){var s=a[T].pts[k],t=w.c2p(s.x),i=b.c2p(s.y);e.contains([t,i],null,s.i,C)?(f.push({pointNumber:s.i,x:w.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return f}},25776:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(43616);F.exports={style:function(w,b,f){var s=f||T.select(w).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=T.select(this),r=t[0].trace,n=r.line.width;function o(d,u,x,p){d.style("stroke-width",u+"px").call(k.stroke,x).call(k.fill,p)}var l=i.selectAll("path.box");if(r.type==="candlestick")l.each(function(d){if(!d.empty){var u=T.select(this),x=r[d.dir];o(u,x.line.width,x.line.color,x.fillcolor),u.style("opacity",r.selectedpoints&&!d.selected?.3:1)}});else{o(l,n,r.line.color,r.fillcolor),i.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var c=i.selectAll("path.point");a.pointStyle(c,r,w)}})},styleOnSelect:function(w,b,f){var s=b[0].trace,t=f.selectAll("path.point");s.selectedpoints?a.selectedPointStyle(t,s):a.pointStyle(t,s,w)}}},64216:function(F,C,e){"use strict";var T=e(3400).extendFlat,k=e(29736).axisHoverFormat,a=e(20279),w=e(63188);function b(f){return{line:{color:T({},w.line.color,{dflt:f}),width:w.line.width,editType:"style"},fillcolor:w.fillcolor,editType:"style"}}F.exports={xperiod:a.xperiod,xperiod0:a.xperiod0,xperiodalignment:a.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:a.x,open:a.open,high:a.high,low:a.low,close:a.close,line:{width:T({},w.line.width,{}),editType:"style"},increasing:b(a.increasing.line.color.dflt),decreasing:b(a.decreasing.line.color.dflt),text:a.text,hovertext:a.hovertext,whiskerwidth:T({},w.whiskerwidth,{dflt:0}),hoverlabel:a.hoverlabel,zorder:w.zorder}},46283:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(1220),w=e(42812).calcCommon;function b(f,s,t,i){return{min:t,q1:Math.min(f,i),med:i,q3:Math.max(f,i),max:s}}F.exports=function(f,s){var t=f._fullLayout,i=k.getFromId(f,s.xaxis),r=k.getFromId(f,s.yaxis),n=i.makeCalcdata(s,"x"),o=a(s,i,"x",n).vals,l=w(f,s,n,o,r,b);return l.length?(T.extendFlat(l[0].t,{num:t._numBoxes,dPos:T.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},64588:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(52744),w=e(31147),b=e(64216);function f(s,t,i,r){var n=i(r+".line.color");i(r+".line.width",t.line.width),i(r+".fillcolor",k.addOpacity(n,.5))}F.exports=function(s,t,i,r){function n(o,l){return T.coerce(s,t,b,o,l)}a(s,t,n,r)?(w(s,t,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),f(0,t,n,"increasing"),f(0,t,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[t.xaxis]=!0,n("zorder")):t.visible=!1}},61712:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(F,C,e){"use strict";var T=e(63856),k=e(31780);F.exports=function(a,w,b,f,s){f("a")||(f("da"),f("a0")),f("b")||(f("db"),f("b0")),function(t,i,r,n){["aaxis","baxis"].forEach(function(o){var l=o.charAt(0),c=t[o]||{},d=k.newContainer(i,o),u={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:i.font,name:o,data:t[l],calendar:i.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};T(c,d,u),d._categories=d._categories||[],t[o]||c.type==="-"||(t[o]={type:c.type})})}(a,w,b,s)}},51676:function(F,C,e){"use strict";var T=e(3400).isArrayOrTypedArray;function k(a,w){if(!T(a)||w>=10)return null;for(var b=1/0,f=-1/0,s=a.length,t=0;t<s;t++){var i=a[t];if(T(i)){var r=k(i,w+1);r&&(b=Math.min(r[0],b),f=Math.max(r[1],f))}else b=Math.min(i,b),f=Math.max(i,f)}return[b,f]}F.exports=function(a){return k(a,0)}},85720:function(F,C,e){"use strict";var T=e(25376),k=e(98692),a=e(22548),w=T({editType:"calc"}),b=e(52904).zorder;w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=a.defaultLine,F.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:w,color:{valType:"color",dflt:a.defaultLine,editType:"plot"},transforms:void 0,zorder:b}},77712:function(F,C,e){"use strict";var T=e(3400).isArrayOrTypedArray;F.exports=function(k,a,w,b){var f,s,t,i,r,n,o,l,c,d,u,x,p,g=T(w)?"a":"b",m=(g==="a"?k.aaxis:k.baxis).smoothing,y=g==="a"?k.a2i:k.b2j,v=g==="a"?w:b,_=g==="a"?b:w,h=g==="a"?a.a.length:a.b.length,S=g==="a"?a.b.length:a.a.length,A=Math.floor(g==="a"?k.b2j(_):k.a2i(_)),E=g==="a"?function(te){return k.evalxy([],te,A)}:function(te){return k.evalxy([],A,te)};m&&(t=Math.max(0,Math.min(S-2,A)),i=A-t,s=g==="a"?function(te,ee){return k.dxydi([],te,t,ee,i)}:function(te,ee){return k.dxydj([],t,te,i,ee)});var P=y(v[0]),I=y(v[1]),D=P<I?1:-1,z=1e-8*(I-P),V=D>0?Math.floor:Math.ceil,O=D>0?Math.ceil:Math.floor,j=D>0?Math.min:Math.max,Y=D>0?Math.max:Math.min,B=V(P+z),U=O(I-z),q=[[o=E(P)]];for(f=B;f*D<U*D;f+=D)r=[],u=Y(P,f),p=(x=j(I,f+D))-u,n=Math.max(0,Math.min(h-2,Math.floor(.5*(u+x)))),l=E(x),m&&(c=s(n,u-n),d=s(n,x-n),r.push([o[0]+c[0]/3*p,o[1]+c[1]/3*p]),r.push([l[0]-d[0]/3*p,l[1]-d[1]/3*p])),r.push(l),q.push(r),o=l;return q}},98692:function(F,C,e){"use strict";var T=e(25376),k=e(22548),a=e(94724),w=e(29736).descriptionWithDates,b=e(67824).overrideAll,f=e(98192).u,s=e(92880).extendFlat;F.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:T({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:a.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},a.labelalias,{editType:"calc"}),tickfont:T({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:w("tick label")},tickformatstops:b(a.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},f,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},f,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:T({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(F,C,e){"use strict";var T=e(85720),k=e(76308).addOpacity,a=e(24040),w=e(3400),b=e(26332),f=e(95936),s=e(42568),t=e(22416),i=e(78344),r=e(52976);F.exports=function(n,o,l){var c=l.letter,d=l.font||{},u=T[c+"axis"];function x(D,z){return w.coerce(n,o,u,D,z)}function p(D,z){return w.coerce2(n,o,u,D,z)}l.name&&(o._name=l.name,o._id=l.name),x("autotypenumbers",l.autotypenumbersDflt);var g=x("type");g==="-"&&(l.data&&function(D,z){if(D.type==="-"){var V=D._id.charAt(0),O=D[V+"calendar"];D.type=r(z,O,{autotypenumbers:D.autotypenumbers})}}(o,l.data),o.type==="-"?o.type="linear":g=n.type=o.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",c+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),o.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),o._hovertitle=c,g==="date"&&a.getComponentMethod("calendars","handleDefaults")(n,o,"calendar",l.calendar),i(o,l.fullLayout),o.c2p=w.identity;var m=x("color",l.dfltColor),y=m===n.color?m:d.color;x("title.text")&&(w.coerceFont(x,"title.font",d,{overrideDflt:{size:w.bigFont(d.size),color:y}}),x("title.offset")),x("tickangle"),x("autorange",!o.isValidRange(n.range))&&x("rangemode"),x("range"),o.cleanRange(),x("fixedrange"),b(n,o,x,g),s(n,o,x,g,l),f(n,o,x,g,l),t(n,o,x,{data:l.data,dataAttr:c});var v=p("gridcolor",k(m,.3)),_=p("gridwidth"),h=p("griddash"),S=x("showgrid");S||(delete o.gridcolor,delete o.gridwidth,delete o.griddash);var A=p("startlinecolor",m),E=p("startlinewidth",_);x("startline",o.showgrid||!!A||!!E)||(delete o.startlinecolor,delete o.startlinewidth);var P=p("endlinecolor",m),I=p("endlinewidth",_);return x("endline",o.showgrid||!!P||!!I)||(delete o.endlinecolor,delete o.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",_),x("minorgriddash",h),x("minorgridcolor",k(v,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgriddash,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridwidth,delete o.griddash),o.showticklabels==="none"&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,x("tickmode"),o}},58744:function(F,C,e){"use strict";var T=e(54460),k=e(3400).isArray1D,a=e(60776),w=e(51676),b=e(19216),f=e(14724),s=e(24944),t=e(26136),i=e(51512),r=e(2872),n=e(81e3);F.exports=function(o,l){var c=T.getFromId(o,l.xaxis),d=T.getFromId(o,l.yaxis),u=l.aaxis,x=l.baxis,p=l.x,g=l.y,m=[];p&&k(p)&&m.push("x"),g&&k(g)&&m.push("y"),m.length&&r(l,u,x,"a","b",m);var y=l._a=l._a||l.a,v=l._b=l._b||l.b;p=l._x||l.x,g=l._y||l.y;var _={};if(l._cheater){var h=u.cheatertype==="index"?y.length:y,S=x.cheatertype==="index"?v.length:v;p=a(h,S,l.cheaterslope)}l._x=p=t(p),l._y=g=t(g),i(p,y,v),i(g,y,v),n(l),l.setScale();var A=w(p),E=w(g),P=.5*(A[1]-A[0]),I=.5*(A[1]+A[0]),D=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),V=1.3;return A=[I-P*V,I+P*V],E=[z-D*V,z+D*V],l._extremes[c._id]=T.findExtremes(c,A,{padded:!0}),l._extremes[d._id]=T.findExtremes(d,E,{padded:!0}),b(l,"a","b"),b(l,"b","a"),f(l,u),f(l,x),_.clipsegments=s(l._xctrl,l._yctrl,u,x),_.x=p,_.y=g,_.a=y,_.b=v,[_]}},24944:function(F){"use strict";F.exports=function(C,e,T,k){var a,w,b,f=[],s=!!T.smoothing,t=!!k.smoothing,i=C[0].length-1,r=C.length-1;for(a=0,w=[],b=[];a<=i;a++)w[a]=C[0][a],b[a]=e[0][a];for(f.push({x:w,y:b,bicubic:s}),a=0,w=[],b=[];a<=r;a++)w[a]=C[a][i],b[a]=e[a][i];for(f.push({x:w,y:b,bicubic:t}),a=i,w=[],b=[];a>=0;a--)w[i-a]=C[r][a],b[i-a]=e[r][a];for(f.push({x:w,y:b,bicubic:s}),a=r,w=[],b=[];a>=0;a--)w[r-a]=C[a][0],b[r-a]=e[a][0];return f.push({x:w,y:b,bicubic:t}),f}},19216:function(F,C,e){"use strict";var T=e(54460),k=e(92880).extendFlat;F.exports=function(a,w,b){var f,s,t,i,r,n,o,l,c,d,u,x,p,g,m=a["_"+w],y=a[w+"axis"],v=y._gridlines=[],_=y._minorgridlines=[],h=y._boundarylines=[],S=a["_"+b],A=a[b+"axis"];y.tickmode==="array"&&(y.tickvals=m.slice());var E=a._xctrl,P=a._yctrl,I=E[0].length,D=E.length,z=a._a.length,V=a._b.length;T.prepTicks(y),y.tickmode==="array"&&delete y.tickvals;var O=y.smoothing?3:1;function j(B){var U,q,te,ee,Q,J,K,X,ie,se,ae,ue,ve=[],ye=[],pe={};if(w==="b")for(q=a.b2j(B),te=Math.floor(Math.max(0,Math.min(V-2,q))),ee=q-te,pe.length=V,pe.crossLength=z,pe.xy=function(de){return a.evalxy([],de,q)},pe.dxy=function(de,me){return a.dxydi([],de,te,me,ee)},U=0;U<z;U++)J=Math.min(z-2,U),K=U-J,X=a.evalxy([],U,q),A.smoothing&&U>0&&(ie=a.dxydi([],U-1,te,0,ee),ve.push(Q[0]+ie[0]/3),ye.push(Q[1]+ie[1]/3),se=a.dxydi([],U-1,te,1,ee),ve.push(X[0]-se[0]/3),ye.push(X[1]-se[1]/3)),ve.push(X[0]),ye.push(X[1]),Q=X;else for(U=a.a2i(B),J=Math.floor(Math.max(0,Math.min(z-2,U))),K=U-J,pe.length=z,pe.crossLength=V,pe.xy=function(de){return a.evalxy([],U,de)},pe.dxy=function(de,me){return a.dxydj([],J,de,K,me)},q=0;q<V;q++)te=Math.min(V-2,q),ee=q-te,X=a.evalxy([],U,q),A.smoothing&&q>0&&(ae=a.dxydj([],J,q-1,K,0),ve.push(Q[0]+ae[0]/3),ye.push(Q[1]+ae[1]/3),ue=a.dxydj([],J,q-1,K,1),ve.push(X[0]-ue[0]/3),ye.push(X[1]-ue[1]/3)),ve.push(X[0]),ye.push(X[1]),Q=X;return pe.axisLetter=w,pe.axis=y,pe.crossAxis=A,pe.value=B,pe.constvar=b,pe.index=l,pe.x=ve,pe.y=ye,pe.smoothing=A.smoothing,pe}function Y(B){var U,q,te,ee,Q,J=[],K=[],X={};if(X.length=m.length,X.crossLength=S.length,w==="b")for(te=Math.max(0,Math.min(V-2,B)),Q=Math.min(1,Math.max(0,B-te)),X.xy=function(ie){return a.evalxy([],ie,B)},X.dxy=function(ie,se){return a.dxydi([],ie,te,se,Q)},U=0;U<I;U++)J[U]=E[B*O][U],K[U]=P[B*O][U];else for(q=Math.max(0,Math.min(z-2,B)),ee=Math.min(1,Math.max(0,B-q)),X.xy=function(ie){return a.evalxy([],B,ie)},X.dxy=function(ie,se){return a.dxydj([],q,ie,ee,se)},U=0;U<D;U++)J[U]=E[U][B*O],K[U]=P[U][B*O];return X.axisLetter=w,X.axis=y,X.crossAxis=A,X.value=m[B],X.constvar=b,X.index=B,X.x=J,X.y=K,X.smoothing=A.smoothing,X}if(y.tickmode==="array"){for(i=5e-15,n=(r=[Math.floor((m.length-1-y.arraytick0)/y.arraydtick*(1+i)),Math.ceil(-y.arraytick0/y.arraydtick/(1+i))].sort(function(B,U){return B-U}))[0]-1,o=r[1]+1,l=n;l<o;l++)(s=y.arraytick0+y.arraydtick*l)<0||s>m.length-1||v.push(k(Y(s),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=n;l<o;l++)if(t=y.arraytick0+y.arraydtick*l,u=Math.min(t+y.arraydtick,m.length-1),!(t<0||t>m.length-1||u<0||u>m.length-1))for(x=m[t],p=m[u],f=0;f<y.minorgridcount;f++)(g=u-t)<=0||(d=x+(p-x)*(f+1)/(y.minorgridcount+1)*(y.arraydtick/g))<m[0]||d>m[m.length-1]||_.push(k(j(d),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&h.push(k(Y(0),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&h.push(k(Y(m.length-1),{color:y.endlinecolor,width:y.endlinewidth}))}else{for(i=5e-15,n=(r=[Math.floor((m[m.length-1]-y.tick0)/y.dtick*(1+i)),Math.ceil((m[0]-y.tick0)/y.dtick/(1+i))].sort(function(B,U){return B-U}))[0],o=r[1],l=n;l<=o;l++)c=y.tick0+y.dtick*l,v.push(k(j(c),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=n-1;l<o+1;l++)for(c=y.tick0+y.dtick*l,f=0;f<y.minorgridcount;f++)(d=c+y.dtick*(f+1)/(y.minorgridcount+1))<m[0]||d>m[m.length-1]||_.push(k(j(d),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&h.push(k(j(m[0]),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&h.push(k(j(m[m.length-1]),{color:y.endlinecolor,width:y.endlinewidth}))}}},14724:function(F,C,e){"use strict";var T=e(54460),k=e(92880).extendFlat;F.exports=function(a,w){var b,f,s,t=w._labels=[],i=w._gridlines;for(b=0;b<i.length;b++)s=i[b],["start","both"].indexOf(w.showticklabels)!==-1&&(f=T.tickText(w,s.value),k(f,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(f)),["end","both"].indexOf(w.showticklabels)!==-1&&(f=T.tickText(w,s.value),k(f,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(f))}},62284:function(F){"use strict";F.exports=function(C,e,T,k){var a=C[0]-e[0],w=C[1]-e[1],b=T[0]-e[0],f=T[1]-e[1],s=Math.pow(a*a+w*w,.25),t=Math.pow(b*b+f*f,.25),i=(t*t*a-s*s*b)*k,r=(t*t*w-s*s*f)*k,n=t*(s+t)*3,o=s*(s+t)*3;return[[e[0]+(n&&i/n),e[1]+(n&&r/n)],[e[0]-(o&&i/o),e[1]-(o&&r/o)]]}},60776:function(F,C,e){"use strict";var T=e(3400).isArrayOrTypedArray;F.exports=function(k,a,w){var b,f,s,t,i,r,n=[],o=T(k)?k.length:k,l=T(a)?a.length:a,c=T(k)?k:null,d=T(a)?a:null;c&&(s=(c.length-1)/(c[c.length-1]-c[0])/(o-1)),d&&(t=(d.length-1)/(d[d.length-1]-d[0])/(l-1));var u=1/0,x=-1/0;for(f=0;f<l;f++)for(n[f]=[],i=d?(d[f]-d[0])*t:f/(l-1),b=0;b<o;b++)r=(c?(c[b]-c[0])*s:b/(o-1))-i*w,u=Math.min(r,u),x=Math.max(r,x),n[f][b]=r;var p=1/(x-u),g=-u*p;for(f=0;f<l;f++)for(b=0;b<o;b++)n[f][b]=p*n[f][b]+g;return n}},30180:function(F,C,e){"use strict";var T=e(62284),k=e(3400).ensureArray;function a(w,b,f){var s=-.5*f[0]+1.5*b[0],t=-.5*f[1]+1.5*b[1];return[(2*s+w[0])/3,(2*t+w[1])/3]}F.exports=function(w,b,f,s,t,i){var r,n,o,l,c,d,u,x,p,g,m=f[0].length,y=f.length,v=t?3*m-2:m,_=i?3*y-2:y;for(w=k(w,_),b=k(b,_),o=0;o<_;o++)w[o]=k(w[o],v),b[o]=k(b[o],v);for(n=0,l=0;n<y;n++,l+=i?3:1)for(c=w[l],d=b[l],u=f[n],x=s[n],r=0,o=0;r<m;r++,o+=t?3:1)c[o]=u[r],d[o]=x[r];if(t)for(n=0,l=0;n<y;n++,l+=i?3:1){for(r=1,o=3;r<m-1;r++,o+=3)p=T([f[n][r-1],s[n][r-1]],[f[n][r],s[n][r]],[f[n][r+1],s[n][r+1]],t),w[l][o-1]=p[0][0],b[l][o-1]=p[0][1],w[l][o+1]=p[1][0],b[l][o+1]=p[1][1];g=a([w[l][0],b[l][0]],[w[l][2],b[l][2]],[w[l][3],b[l][3]]),w[l][1]=g[0],b[l][1]=g[1],g=a([w[l][v-1],b[l][v-1]],[w[l][v-3],b[l][v-3]],[w[l][v-4],b[l][v-4]]),w[l][v-2]=g[0],b[l][v-2]=g[1]}if(i)for(o=0;o<v;o++){for(l=3;l<_-3;l+=3)p=T([w[l-3][o],b[l-3][o]],[w[l][o],b[l][o]],[w[l+3][o],b[l+3][o]],i),w[l-1][o]=p[0][0],b[l-1][o]=p[0][1],w[l+1][o]=p[1][0],b[l+1][o]=p[1][1];g=a([w[0][o],b[0][o]],[w[2][o],b[2][o]],[w[3][o],b[3][o]]),w[1][o]=g[0],b[1][o]=g[1],g=a([w[_-1][o],b[_-1][o]],[w[_-3][o],b[_-3][o]],[w[_-4][o],b[_-4][o]]),w[_-2][o]=g[0],b[_-2][o]=g[1]}if(t&&i)for(l=1;l<_;l+=(l+1)%3==0?2:1){for(o=3;o<v-3;o+=3)p=T([w[l][o-3],b[l][o-3]],[w[l][o],b[l][o]],[w[l][o+3],b[l][o+3]],t),w[l][o-1]=.5*(w[l][o-1]+p[0][0]),b[l][o-1]=.5*(b[l][o-1]+p[0][1]),w[l][o+1]=.5*(w[l][o+1]+p[1][0]),b[l][o+1]=.5*(b[l][o+1]+p[1][1]);g=a([w[l][0],b[l][0]],[w[l][2],b[l][2]],[w[l][3],b[l][3]]),w[l][1]=.5*(w[l][1]+g[0]),b[l][1]=.5*(b[l][1]+g[1]),g=a([w[l][v-1],b[l][v-1]],[w[l][v-3],b[l][v-3]],[w[l][v-4],b[l][v-4]]),w[l][v-2]=.5*(w[l][v-2]+g[0]),b[l][v-2]=.5*(b[l][v-2]+g[1])}return[w,b]}},24588:function(F){"use strict";F.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(F){"use strict";F.exports=function(C,e,T){return e&&T?function(k,a,w,b,f){var s,t,i,r,n,o;k||(k=[]),a*=3,w*=3;var l=b*b,c=1-b,d=c*c,u=c*b*2,x=-3*d,p=3*(d-u),g=3*(u-l),m=3*l,y=f*f,v=y*f,_=1-f,h=_*_,S=h*_;for(o=0;o<C.length;o++)s=x*(n=C[o])[w][a]+p*n[w][a+1]+g*n[w][a+2]+m*n[w][a+3],t=x*n[w+1][a]+p*n[w+1][a+1]+g*n[w+1][a+2]+m*n[w+1][a+3],i=x*n[w+2][a]+p*n[w+2][a+1]+g*n[w+2][a+2]+m*n[w+2][a+3],r=x*n[w+3][a]+p*n[w+3][a+1]+g*n[w+3][a+2]+m*n[w+3][a+3],k[o]=S*s+3*(h*f*t+_*y*i)+v*r;return k}:e?function(k,a,w,b,f){var s,t,i,r;k||(k=[]),a*=3;var n=b*b,o=1-b,l=o*o,c=o*b*2,d=-3*l,u=3*(l-c),x=3*(c-n),p=3*n,g=1-f;for(i=0;i<C.length;i++)s=d*(r=C[i])[w][a]+u*r[w][a+1]+x*r[w][a+2]+p*r[w][a+3],t=d*r[w+1][a]+u*r[w+1][a+1]+x*r[w+1][a+2]+p*r[w+1][a+3],k[i]=g*s+f*t;return k}:T?function(k,a,w,b,f){var s,t,i,r,n,o;k||(k=[]),w*=3;var l=f*f,c=l*f,d=1-f,u=d*d,x=u*d;for(n=0;n<C.length;n++)s=(o=C[n])[w][a+1]-o[w][a],t=o[w+1][a+1]-o[w+1][a],i=o[w+2][a+1]-o[w+2][a],r=o[w+3][a+1]-o[w+3][a],k[n]=x*s+3*(u*f*t+d*l*i)+c*r;return k}:function(k,a,w,b,f){var s,t,i,r;k||(k=[]);var n=1-f;for(i=0;i<C.length;i++)s=(r=C[i])[w][a+1]-r[w][a],t=r[w+1][a+1]-r[w+1][a],k[i]=n*s+f*t;return k}}},24464:function(F){"use strict";F.exports=function(C,e,T){return e&&T?function(k,a,w,b,f){var s,t,i,r,n,o;k||(k=[]),a*=3,w*=3;var l=b*b,c=l*b,d=1-b,u=d*d,x=u*d,p=f*f,g=1-f,m=g*g,y=g*f*2,v=-3*m,_=3*(m-y),h=3*(y-p),S=3*p;for(o=0;o<C.length;o++)s=v*(n=C[o])[w][a]+_*n[w+1][a]+h*n[w+2][a]+S*n[w+3][a],t=v*n[w][a+1]+_*n[w+1][a+1]+h*n[w+2][a+1]+S*n[w+3][a+1],i=v*n[w][a+2]+_*n[w+1][a+2]+h*n[w+2][a+2]+S*n[w+3][a+2],r=v*n[w][a+3]+_*n[w+1][a+3]+h*n[w+2][a+3]+S*n[w+3][a+3],k[o]=x*s+3*(u*b*t+d*l*i)+c*r;return k}:e?function(k,a,w,b,f){var s,t,i,r,n,o;k||(k=[]),a*=3;var l=f*f,c=l*f,d=1-f,u=d*d,x=u*d;for(n=0;n<C.length;n++)s=(o=C[n])[w+1][a]-o[w][a],t=o[w+1][a+1]-o[w][a+1],i=o[w+1][a+2]-o[w][a+2],r=o[w+1][a+3]-o[w][a+3],k[n]=x*s+3*(u*f*t+d*l*i)+c*r;return k}:T?function(k,a,w,b,f){var s,t,i,r;k||(k=[]),w*=3;var n=1-b,o=f*f,l=1-f,c=l*l,d=l*f*2,u=-3*c,x=3*(c-d),p=3*(d-o),g=3*o;for(i=0;i<C.length;i++)s=u*(r=C[i])[w][a]+x*r[w+1][a]+p*r[w+2][a]+g*r[w+3][a],t=u*r[w][a+1]+x*r[w+1][a+1]+p*r[w+2][a+1]+g*r[w+3][a+1],k[i]=n*s+b*t;return k}:function(k,a,w,b,f){var s,t,i,r;k||(k=[]);var n=1-b;for(i=0;i<C.length;i++)s=(r=C[i])[w+1][a]-r[w][a],t=r[w+1][a+1]-r[w][a+1],k[i]=n*s+b*t;return k}}},29056:function(F){"use strict";F.exports=function(C,e,T,k,a){var w=e-2,b=T-2;return k&&a?function(f,s,t){var i,r,n,o,l,c;f||(f=[]);var d=Math.max(0,Math.min(Math.floor(s),w)),u=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-d)),p=Math.max(0,Math.min(1,t-u));d*=3,u*=3;var g=x*x,m=g*x,y=1-x,v=y*y,_=v*y,h=p*p,S=h*p,A=1-p,E=A*A,P=E*A;for(c=0;c<C.length;c++)i=_*(l=C[c])[u][d]+3*(v*x*l[u][d+1]+y*g*l[u][d+2])+m*l[u][d+3],r=_*l[u+1][d]+3*(v*x*l[u+1][d+1]+y*g*l[u+1][d+2])+m*l[u+1][d+3],n=_*l[u+2][d]+3*(v*x*l[u+2][d+1]+y*g*l[u+2][d+2])+m*l[u+2][d+3],o=_*l[u+3][d]+3*(v*x*l[u+3][d+1]+y*g*l[u+3][d+2])+m*l[u+3][d+3],f[c]=P*i+3*(E*p*r+A*h*n)+S*o;return f}:k?function(f,s,t){f||(f=[]);var i,r,n,o,l,c,d=Math.max(0,Math.min(Math.floor(s),w)),u=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-d)),p=Math.max(0,Math.min(1,t-u));d*=3;var g=x*x,m=g*x,y=1-x,v=y*y,_=v*y,h=1-p;for(l=0;l<C.length;l++)i=h*(c=C[l])[u][d]+p*c[u+1][d],r=h*c[u][d+1]+p*c[u+1][d+1],n=h*c[u][d+2]+p*c[u+1][d+1],o=h*c[u][d+3]+p*c[u+1][d+1],f[l]=_*i+3*(v*x*r+y*g*n)+m*o;return f}:a?function(f,s,t){f||(f=[]);var i,r,n,o,l,c,d=Math.max(0,Math.min(Math.floor(s),w)),u=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-d)),p=Math.max(0,Math.min(1,t-u));u*=3;var g=p*p,m=g*p,y=1-p,v=y*y,_=v*y,h=1-x;for(l=0;l<C.length;l++)i=h*(c=C[l])[u][d]+x*c[u][d+1],r=h*c[u+1][d]+x*c[u+1][d+1],n=h*c[u+2][d]+x*c[u+2][d+1],o=h*c[u+3][d]+x*c[u+3][d+1],f[l]=_*i+3*(v*p*r+y*g*n)+m*o;return f}:function(f,s,t){f||(f=[]);var i,r,n,o,l=Math.max(0,Math.min(Math.floor(s),w)),c=Math.max(0,Math.min(Math.floor(t),b)),d=Math.max(0,Math.min(1,s-l)),u=Math.max(0,Math.min(1,t-c)),x=1-u,p=1-d;for(n=0;n<C.length;n++)i=p*(o=C[n])[c][l]+d*o[c][l+1],r=p*o[c+1][l]+d*o[c+1][l+1],f[n]=x*i+u*r;return f}}},38356:function(F,C,e){"use strict";var T=e(3400),k=e(86411),a=e(93504),w=e(85720),b=e(22548);F.exports=function(f,s,t,i){function r(o,l){return T.coerce(f,s,w,o,l)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",b.defaultLine);T.coerceFont(r,"font",i.font),r("carpet"),a(f,s,i,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(f,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope"),r("zorder")):s.visible=!1}},95856:function(F,C,e){"use strict";F.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(F){"use strict";F.exports=function(C,e){for(var T,k=C._fullData.length,a=0;a<k;a++){var w=C._fullData[a];if(w.index!==e.index&&w.type==="carpet"&&(T||(T=w),w.carpet===e.carpet))return w}return T}},53416:function(F){"use strict";F.exports=function(C,e,T){if(C.length===0)return"";var k,a=[],w=T?3:1;for(k=0;k<C.length;k+=w)a.push(C[k]+","+e[k]),T&&k<C.length-w&&(a.push("C"),a.push([C[k+1]+","+e[k+1],C[k+2]+","+e[k+2]+" "].join(" ")));return a.join(T?"":"L")}},87072:function(F,C,e){"use strict";var T=e(3400).isArrayOrTypedArray;F.exports=function(k,a,w){var b;for(T(k)?k.length>a.length&&(k=k.slice(0,a.length)):k=[],b=0;b<a.length;b++)k[b]=w(a[b]);return k}},15584:function(F){"use strict";F.exports=function(C,e,T,k,a,w){var b=a[0]*C.dpdx(e),f=a[1]*C.dpdy(T),s=1,t=1;if(w){var i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),r=Math.sqrt(w[0]*w[0]+w[1]*w[1]),n=(a[0]*w[0]+a[1]*w[1])/i/r;t=Math.max(0,n)}var o=180*Math.atan2(f,b)/Math.PI;return o<-90?(o+=180,s=-s):o>90&&(o-=180,s=-s),{angle:o,flip:s,p:C.c2p(k,e,T),offsetMultplier:t}}},164:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(87072),w=e(53416),b=e(15584),f=e(72736),s=e(3400),t=s.strRotate,i=s.strTranslate,r=e(84284);function n(u,x,p,g,m,y,v){var _="const-"+m+"-lines",h=p.selectAll("."+_).data(y);h.enter().append("path").classed(_,!0).style("vector-effect",v?"none":"non-scaling-stroke"),h.each(function(S){var A=S,E=A.x,P=A.y,I=a([],E,u.c2p),D=a([],P,x.c2p),z="M"+w(I,D,A.smoothing);T.select(this).attr("d",z).style("stroke-width",A.width).style("stroke",A.color).style("stroke-dasharray",k.dashStyle(A.dash,A.width)).style("fill","none")}),h.exit().remove()}function o(u,x,p,g,m,y,v,_){var h=y.selectAll("text."+_).data(v);h.enter().append("text").classed(_,!0);var S=0,A={};return h.each(function(E,P){var I;if(E.axis.tickangle==="auto")I=b(g,x,p,E.xy,E.dxy);else{var D=(E.axis.tickangle+180)*Math.PI/180;I=b(g,x,p,E.xy,[Math.cos(D),Math.sin(D)])}P||(A={angle:I.angle,flip:I.flip});var z=(E.endAnchor?-1:1)*I.flip,V=T.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(f.convertToTspans,u),O=k.bBox(this);V.attr("transform",i(I.p[0],I.p[1])+t(I.angle)+i(E.axis.labelpadding*z,.3*O.height)),S=Math.max(S,O.width+E.axis.labelpadding)}),h.exit().remove(),A.maxExtent=S,A}F.exports=function(u,x,p,g){var m=u._context.staticPlot,y=x.xaxis,v=x.yaxis,_=u._fullLayout._clips;s.makeTraceGroups(g,p,"trace").each(function(h){var S=T.select(this),A=h[0],E=A.trace,P=E.aaxis,I=E.baxis,D=s.ensureSingle(S,"g","minorlayer"),z=s.ensureSingle(S,"g","majorlayer"),V=s.ensureSingle(S,"g","boundarylayer"),O=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),n(y,v,z,0,"a",P._gridlines,!0),n(y,v,z,0,"b",I._gridlines,!0),n(y,v,D,0,"a",P._minorgridlines,!0),n(y,v,D,0,"b",I._minorgridlines,!0),n(y,v,V,0,"a-boundary",P._boundarylines,m),n(y,v,V,0,"b-boundary",I._boundarylines,m);var j=o(u,y,v,E,0,O,P._labels,"a-label"),Y=o(u,y,v,E,0,O,I._labels,"b-label");(function(B,U,q,te,ee,Q,J,K){var X,ie,se,ae,ue=s.aggNums(Math.min,null,q.a),ve=s.aggNums(Math.max,null,q.a),ye=s.aggNums(Math.min,null,q.b),pe=s.aggNums(Math.max,null,q.b);X=.5*(ue+ve),ie=ye,se=q.ab2xy(X,ie,!0),ae=q.dxyda_rough(X,ie),J.angle===void 0&&s.extendFlat(J,b(q,ee,Q,se,q.dxydb_rough(X,ie))),d(B,U,q,0,se,ae,q.aaxis,ee,Q,J,"a-title"),X=ue,ie=.5*(ye+pe),se=q.ab2xy(X,ie,!0),ae=q.dxydb_rough(X,ie),K.angle===void 0&&s.extendFlat(K,b(q,ee,Q,se,q.dxyda_rough(X,ie))),d(B,U,q,0,se,ae,q.baxis,ee,Q,K,"b-title")})(u,O,E,0,y,v,j,Y),function(B,U,q,te,ee){var Q,J,K,X,ie=q.select("#"+B._clipPathId);ie.size()||(ie=q.append("clipPath").classed("carpetclip",!0));var se=s.ensureSingle(ie,"path","carpetboundary"),ae=U.clipsegments,ue=[];for(X=0;X<ae.length;X++)Q=ae[X],J=a([],Q.x,te.c2p),K=a([],Q.y,ee.c2p),ue.push(w(J,K,Q.bicubic));var ve="M"+ue.join("L")+"Z";ie.attr("id",B._clipPathId),se.attr("d",ve)}(E,A,_,y,v)})};var l=r.LINE_SPACING,c=(1-r.MID_SHIFT)/l+1;function d(u,x,p,g,m,y,v,_,h,S,A){var E=[];v.title.text&&E.push(v.title.text);var P=x.selectAll("text."+A).data(E),I=S.maxExtent;P.enter().append("text").classed(A,!0),P.each(function(){var D=b(p,_,h,m,y);["start","both"].indexOf(v.showticklabels)===-1&&(I=0);var z=v.title.font.size;I+=z+v.title.offset;var V=(S.angle+(S.flip<0?180:0)-D.angle+450)%360,O=V>90&&V<270,j=T.select(this);j.text(v.title.text).call(f.convertToTspans,u),O&&(I=(-f.lineCount(j)+c)*l*z-I),j.attr("transform",i(D.p[0],D.p[1])+t(D.angle)+i(0,I)).attr("text-anchor","middle").call(k.font,v.title.font)}),P.exit().remove()}},81e3:function(F,C,e){"use strict";var T=e(24588),k=e(14952).findBin,a=e(30180),w=e(29056),b=e(26435),f=e(24464);F.exports=function(s){var t=s._a,i=s._b,r=t.length,n=i.length,o=s.aaxis,l=s.baxis,c=t[0],d=t[r-1],u=i[0],x=i[n-1],p=t[t.length-1]-t[0],g=i[i.length-1]-i[0],m=p*T.RELATIVE_CULL_TOLERANCE,y=g*T.RELATIVE_CULL_TOLERANCE;c-=m,d+=m,u-=y,x+=y,s.isVisible=function(v,_){return v>c&&v<d&&_>u&&_<x},s.isOccluded=function(v,_){return v<c||v>d||_<u||_>x},s.setScale=function(){var v=s._x,_=s._y,h=a(s._xctrl,s._yctrl,v,_,o.smoothing,l.smoothing);s._xctrl=h[0],s._yctrl=h[1],s.evalxy=w([s._xctrl,s._yctrl],r,n,o.smoothing,l.smoothing),s.dxydi=b([s._xctrl,s._yctrl],o.smoothing,l.smoothing),s.dxydj=f([s._xctrl,s._yctrl],o.smoothing,l.smoothing)},s.i2a=function(v){var _=Math.max(0,Math.floor(v[0]),r-2),h=v[0]-_;return(1-h)*t[_]+h*t[_+1]},s.j2b=function(v){var _=Math.max(0,Math.floor(v[1]),r-2),h=v[1]-_;return(1-h)*i[_]+h*i[_+1]},s.ij2ab=function(v){return[s.i2a(v[0]),s.j2b(v[1])]},s.a2i=function(v){var _=Math.max(0,Math.min(k(v,t),r-2)),h=t[_],S=t[_+1];return Math.max(0,Math.min(r-1,_+(v-h)/(S-h)))},s.b2j=function(v){var _=Math.max(0,Math.min(k(v,i),n-2)),h=i[_],S=i[_+1];return Math.max(0,Math.min(n-1,_+(v-h)/(S-h)))},s.ab2ij=function(v){return[s.a2i(v[0]),s.b2j(v[1])]},s.i2c=function(v,_){return s.evalxy([],v,_)},s.ab2xy=function(v,_,h){if(!h&&(v<t[0]||v>t[r-1]|_<i[0]||_>i[n-1]))return[!1,!1];var S=s.a2i(v),A=s.b2j(_),E=s.evalxy([],S,A);if(h){var P,I,D,z,V=0,O=0,j=[];v<t[0]?(P=0,I=0,V=(v-t[0])/(t[1]-t[0])):v>t[r-1]?(P=r-2,I=1,V=(v-t[r-1])/(t[r-1]-t[r-2])):I=S-(P=Math.max(0,Math.min(r-2,Math.floor(S)))),_<i[0]?(D=0,z=0,O=(_-i[0])/(i[1]-i[0])):_>i[n-1]?(D=n-2,z=1,O=(_-i[n-1])/(i[n-1]-i[n-2])):z=A-(D=Math.max(0,Math.min(n-2,Math.floor(A)))),V&&(s.dxydi(j,P,D,I,z),E[0]+=j[0]*V,E[1]+=j[1]*V),O&&(s.dxydj(j,P,D,I,z),E[0]+=j[0]*O,E[1]+=j[1]*O)}return E},s.c2p=function(v,_,h){return[_.c2p(v[0]),h.c2p(v[1])]},s.p2x=function(v,_,h){return[_.p2c(v[0]),h.p2c(v[1])]},s.dadi=function(v){var _=Math.max(0,Math.min(t.length-2,v));return t[_+1]-t[_]},s.dbdj=function(v){var _=Math.max(0,Math.min(i.length-2,v));return i[_+1]-i[_]},s.dxyda=function(v,_,h,S){var A=s.dxydi(null,v,_,h,S),E=s.dadi(v,h);return[A[0]/E,A[1]/E]},s.dxydb=function(v,_,h,S){var A=s.dxydj(null,v,_,h,S),E=s.dbdj(_,S);return[A[0]/E,A[1]/E]},s.dxyda_rough=function(v,_,h){var S=p*(h||.1),A=s.ab2xy(v+S,_,!0),E=s.ab2xy(v-S,_,!0);return[.5*(A[0]-E[0])/S,.5*(A[1]-E[1])/S]},s.dxydb_rough=function(v,_,h){var S=g*(h||.1),A=s.ab2xy(v,_+S,!0),E=s.ab2xy(v,_-S,!0);return[.5*(A[0]-E[0])/S,.5*(A[1]-E[1])/S]},s.dpdx=function(v){return v._m},s.dpdy=function(v){return v._m}}},51512:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a,w){var b,f,s,t=[],i=[],r=k[0].length,n=k.length;function o(B,U){var q,te=0,ee=0;return B>0&&(q=k[U][B-1])!==void 0&&(ee++,te+=q),B<r-1&&(q=k[U][B+1])!==void 0&&(ee++,te+=q),U>0&&(q=k[U-1][B])!==void 0&&(ee++,te+=q),U<n-1&&(q=k[U+1][B])!==void 0&&(ee++,te+=q),te/Math.max(1,ee)}var l,c,d,u,x,p,g,m,y,v,_,h=0;for(b=0;b<r;b++)for(f=0;f<n;f++)k[f][b]===void 0&&(t.push(b),i.push(f),k[f][b]=o(b,f)),h=Math.max(h,Math.abs(k[f][b]));if(!t.length)return k;var S=0,A=0,E=t.length;do{for(S=0,s=0;s<E;s++){b=t[s],f=i[s];var P,I,D,z,V,O,j=0,Y=0;b===0?(D=a[V=Math.min(r-1,2)],z=a[1],P=k[f][V],Y+=(I=k[f][1])+(I-P)*(a[0]-z)/(z-D),j++):b===r-1&&(D=a[V=Math.max(0,r-3)],z=a[r-2],P=k[f][V],Y+=(I=k[f][r-2])+(I-P)*(a[r-1]-z)/(z-D),j++),(b===0||b===r-1)&&f>0&&f<n-1&&(l=w[f+1]-w[f],Y+=((c=w[f]-w[f-1])*k[f+1][b]+l*k[f-1][b])/(c+l),j++),f===0?(D=w[O=Math.min(n-1,2)],z=w[1],P=k[O][b],Y+=(I=k[1][b])+(I-P)*(w[0]-z)/(z-D),j++):f===n-1&&(D=w[O=Math.max(0,n-3)],z=w[n-2],P=k[O][b],Y+=(I=k[n-2][b])+(I-P)*(w[n-1]-z)/(z-D),j++),(f===0||f===n-1)&&b>0&&b<r-1&&(l=a[b+1]-a[b],Y+=((c=a[b]-a[b-1])*k[f][b+1]+l*k[f][b-1])/(c+l),j++),j?Y/=j:(d=a[b+1]-a[b],u=a[b]-a[b-1],m=(x=w[f+1]-w[f])*(p=w[f]-w[f-1])*(x+p),Y=((g=d*u*(d+u))*(p*k[f+1][b]+x*k[f-1][b])+m*(u*k[f][b+1]+d*k[f][b-1]))/(m*(u+d)+g*(p+x))),S+=(v=(y=Y-k[f][b])/h)*v,_=j?0:.85,k[f][b]+=y*(1+_)}S=Math.sqrt(S)}while(A++<100&&S>1e-5);return T.log("Smoother converged to",S,"after",A,"iterations"),k}},86411:function(F,C,e){"use strict";var T=e(3400).isArray1D;F.exports=function(k,a,w){var b=w("x"),f=b&&b.length,s=w("y"),t=s&&s.length;if(!f&&!t)return!1;if(a._cheater=!b,f&&!T(b)||t&&!T(s))a._length=null;else{var i=f?b.length:1/0;t&&(i=Math.min(i,s.length)),a.a&&a.a.length&&(i=Math.min(i,a.a.length)),a.b&&a.b.length&&(i=Math.min(i,a.b.length)),a._length=i}return!0}},83372:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(6096),a=e(49084),w=e(45464),b=e(22548).defaultLine,f=e(92880).extendFlat,s=k.marker.line;F.exports=f({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f({},k.geojson,{}),featureidkey:k.featureidkey,text:f({},k.text,{}),hovertext:f({},k.hovertext,{}),marker:{line:{color:f({},s.color,{dflt:b}),width:f({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f({},w.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:T(),showlegend:f({},w.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(F,C,e){"use strict";var T=e(38248),k=e(39032).BADNUM,a=e(47128),w=e(20148),b=e(4500);function f(s){return s&&typeof s=="string"}F.exports=function(s,t){var i,r=t._length,n=new Array(r);i=t.geojson?function(u){return f(u)||T(u)}:f;for(var o=0;o<r;o++){var l=n[o]={},c=t.locations[o],d=t.z[o];i(c)&&T(d)?(l.loc=c,l.z=d):(l.loc=null,l.z=k),l.index=o}return w(n,t),a(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(n,t),n}},30972:function(F,C,e){"use strict";var T=e(3400),k=e(27260),a=e(83372);F.exports=function(w,b,f,s){function t(l,c){return T.coerce(w,b,a,l,c)}var i=t("locations"),r=t("z");if(i&&i.length&&T.isArrayOrTypedArray(r)&&r.length){b._length=Math.min(i.length,r.length);var n,o=t("geojson");(typeof o=="string"&&o!==""||T.isPlainObject(o))&&(n="geojson-id"),t("locationmode",n)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(w,b,s,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},52428:function(F){"use strict";F.exports=function(C,e,T,k,a){C.location=e.location,C.z=e.z;var w=k[a];return w.fIn&&w.fIn.properties&&(C.properties=w.fIn.properties),C.ct=w.ct,C}},69224:function(F,C,e){"use strict";var T=e(54460),k=e(83372),a=e(3400).fillText;F.exports=function(w,b,f){var s,t,i,r,n=w.cd,o=n[0].trace,l=w.subplot,c=[b,f],d=[b+360,f];for(t=0;t<n.length;t++)if(r=!1,(s=n[t])._polygons){for(i=0;i<s._polygons.length;i++)s._polygons[i].contains(c)&&(r=!r),s._polygons[i].contains(d)&&(r=!r);if(r)break}if(r&&s)return w.x0=w.x1=w.xa.c2p(s.ct),w.y0=w.y1=w.ya.c2p(s.ct),w.index=s.index,w.location=s.loc,w.z=s.z,w.zLabel=T.tickText(l.mockAxis,l.mockAxis.c2l(s.z),"hover").text,w.hovertemplate=s.hovertemplate,function(u,x,p){if(!x.hovertemplate){var g=p.hi||x.hoverinfo,m=String(p.loc),y=g==="all"?k.hoverinfo.flags:g.split("+"),v=y.indexOf("name")!==-1,_=y.indexOf("location")!==-1,h=y.indexOf("z")!==-1,S=y.indexOf("text")!==-1,A=[];!v&&_?u.nameOverride=m:(v&&(u.nameOverride=x.name),_&&A.push(m)),h&&A.push(u.zLabel),S&&a(p,x,A),u.extraText=A.join("<br>")}}(w,o,s),[w]}},54272:function(F,C,e){"use strict";F.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(27144),w=e(59972).getTopojsonFeatures,b=e(19280).findExtremes,f=e(7947).style;F.exports={calcGeoJSON:function(s,t){for(var i=s[0].trace,r=t[i.geo],n=r._subplot,o=i.locationmode,l=i._length,c=o==="geojson-id"?a.extractTraceFeature(s):w(i,n.topojson),d=[],u=[],x=0;x<l;x++){var p=s[x],g=o==="geojson-id"?p.fOut:a.locationToFeature(o,p.loc,c);if(g){p.geojson=g,p.ct=g.properties.ct,p._polygons=a.feature2polygons(g);var m=a.computeBbox(g);d.push(m[0],m[2]),u.push(m[1],m[3])}else p.geojson=null}if(r.fitbounds==="geojson"&&o==="geojson-id"){var y=a.computeBbox(a.getTraceGeojson(i));d=[y[0],y[2]],u=[y[1],y[3]]}var v={padded:!0};i._extremes.lon=b(r.lonaxis._ax,d,v),i._extremes.lat=b(r.lataxis._ax,u,v)},plot:function(s,t,i){var r=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,i,"trace choropleth").each(function(n){var o=T.select(this).selectAll("path.choroplethlocation").data(k.identity);o.enter().append("path").classed("choroplethlocation",!0),o.exit().remove(),f(s,n)})}}},17328:function(F){"use strict";F.exports=function(C,e){var T,k,a,w,b,f=C.cd,s=C.xaxis,t=C.yaxis,i=[];if(e===!1)for(T=0;T<f.length;T++)f[T].selected=0;else for(T=0;T<f.length;T++)(a=(k=f[T]).ct)&&(w=s.c2p(a),b=t.c2p(a),e.contains([w,b],null,T,C)?(i.push({pointNumber:T,lon:a[0],lat:a[1]}),k.selected=1):k.selected=0);return i}},7947:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(43616),w=e(8932);function b(f,s){var t=s[0].trace,i=s[0].node3.selectAll(".choroplethlocation"),r=t.marker||{},n=r.line||{},o=w.makeColorScaleFuncFromTrace(t);i.each(function(l){T.select(this).attr("fill",o(l.z)).call(k.stroke,l.mlc||n.color).call(a.dashLine,"",l.mlw||n.width||0).style("opacity",r.opacity)}),a.selectedPointStyle(i,t)}F.exports={style:function(f,s){s&&b(0,s)},styleOnSelect:function(f,s){var t=s[0].node3,i=s[0].trace;i.selectedpoints?a.selectedPointStyle(t.selectAll(".choroplethlocation"),i):b(0,s)}}},45608:function(F,C,e){"use strict";var T=e(83372),k=e(49084),a=e(21776).Ks,w=e(45464),b=e(92880).extendFlat;F.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},T.featureidkey,{}),below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,marker:{line:{color:b({},T.marker.line.color,{editType:"plot"}),width:b({},T.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},T.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},T.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},T.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:T.hoverinfo,hovertemplate:a({},{keys:["properties"]}),showlegend:b({},w.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(8932),w=e(43616),b=e(44808).makeBlank,f=e(27144);function s(t){var i,r=t[0].trace,n=r._opts;if(r.selectedpoints){for(var o=w.makeSelectedPointStyleFns(r),l=0;l<t.length;l++){var c=t[l];c.fOut&&(c.fOut.properties.mo2=o.selectedOpacityFn(c))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":i}),k.extendFlat(n.line.paint,{"line-opacity":i}),n}F.exports={convert:function(t){var i=t[0].trace,r=i.visible===!0&&i._length!==0,n={layout:{visibility:"none"},paint:{}},o={layout:{visibility:"none"},paint:{}},l=i._opts={fill:n,line:o,geojson:b()};if(!r)return l;var c=f.extractTraceFeature(t);if(!c)return l;var d,u,x,p=a.makeColorScaleFuncFromTrace(i),g=i.marker,m=g.line||{};k.isArrayOrTypedArray(g.opacity)&&(d=function(A){var E=A.mo;return T(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(m.color)&&(u=function(A){return A.mlc}),k.isArrayOrTypedArray(m.width)&&(x=function(A){return A.mlw});for(var y=0;y<t.length;y++){var v=t[y],_=v.fOut;if(_){var h=_.properties;h.fc=p(v.z),d&&(h.mo=d(v)),u&&(h.mlc=u(v)),x&&(h.mlw=x(v)),v.ct=h.ct,v._polygons=f.feature2polygons(_)}}var S=d?{type:"identity",property:"mo"}:g.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(o.paint,{"line-color":u?{type:"identity",property:"mlc"}:m.color,"line-width":x?{type:"identity",property:"mlw"}:m.width,"line-opacity":S}),n.layout.visibility="visible",o.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:c},s(t),l},convertOnSelect:s}},9352:function(F,C,e){"use strict";var T=e(3400),k=e(27260),a=e(45608);F.exports=function(w,b,f,s){function t(o,l){return T.coerce(w,b,a,o,l)}var i=t("locations"),r=t("z"),n=t("geojson");T.isArrayOrTypedArray(i)&&i.length&&T.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||T.isPlainObject(n))?(t("featureidkey"),b._length=Math.min(i.length,r.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(w,b,s,t,{prefix:"",cLetter:"z"}),T.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},85404:function(F,C,e){"use strict";F.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(T,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(T,k){for(var a=k.getMapLayers(),w=a.length-2;w>=0;w--){var b=a[w].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var f=w+1;f<a.length;f++)if(typeof(b=a[f].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(F,C,e){"use strict";var T=e(13504).convert,k=e(13504).convertOnSelect,a=e(47552).traceLayerPrefix;function w(f,s){this.type="choroplethmapbox",this.subplot=f,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",a+s+"-fill"],["line",a+s+"-line"]],this.below=null}var b=w.prototype;b.update=function(f){this._update(T(f)),f[0].trace._glTrace=this},b.updateOnSelect=function(f){this._update(k(f))},b._update=function(f){var s=this.subplot,t=this.layerList,i=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(f.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(f,i),this.below=i);for(var r=0;r<t.length;r++){var n=t[r],o=n[0],l=n[1],c=f[o];s.setOptions(l,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&s.setOptions(l,"setPaintProperty",c.paint)}},b._addLayers=function(f,s){for(var t=this.subplot,i=this.layerList,r=this.sourceId,n=0;n<i.length;n++){var o=i[n],l=o[0],c=f[l];t.addLayer({type:l,id:o[1],source:r,layout:c.layout,paint:c.paint},s)}},b._removeLayers=function(){for(var f=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)f.removeLayer(s[t][1])},b.dispose=function(){var f=this.subplot.map;this._removeLayers(),f.removeSource(this.sourceId)},F.exports=function(f,s){var t=s[0].trace,i=new w(f,t.uid),r=i.sourceId,n=T(s),o=i.below=f.belowLookup["trace-"+t.uid];return f.map.addSource(r,{type:"geojson",data:n.geojson}),i._addLayers(n,o),s[0].trace._glTrace=i,i}},86040:function(F,C,e){"use strict";var T=e(49084),k=e(29736).axisHoverFormat,a=e(21776).Ks,w=e(52948),b=e(45464),f=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:f({},b.showlegend,{dflt:!1})};f(s,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=w[t]}),s.hoverinfo=f({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,F.exports=s},83344:function(F,C,e){"use strict";var T=e(47128);F.exports=function(k,a){for(var w=a.u,b=a.v,f=a.w,s=Math.min(a.x.length,a.y.length,a.z.length,w.length,b.length,f.length),t=-1/0,i=1/0,r=0;r<s;r++){var n=w[r],o=b[r],l=f[r],c=Math.sqrt(n*n+o*o+l*l);t=Math.max(t,c),i=Math.min(i,c)}a._len=s,a._normMax=t,T(k,a,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(F,C,e){"use strict";var T=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,a=e(3400).simpleMap,w=e(33040).parseColorScale,b=e(8932).extractOpts,f=e(3400).isArrayOrTypedArray,s=e(52094);function t(c,d){this.scene=c,this.uid=d,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(c){if(c.object===this.mesh){var d=c.index=c.data.index,u=this.data.x[d],x=this.data.y[d],p=this.data.z[d],g=this.data.u[d],m=this.data.v[d],y=this.data.w[d];c.traceCoordinate=[u,x,p,g,m,y,Math.sqrt(g*g+m*m+y*y)];var v=this.data.hovertext||this.data.text;return f(v)&&v[d]!==void 0?c.textLabel=v[d]:v&&(c.textLabel=v),!0}};var r={xaxis:0,yaxis:1,zaxis:2},n={tip:1,tail:0,cm:.25,center:.5},o={tip:1,tail:1,cm:.75,center:.5};function l(c,d){var u=c.fullSceneLayout,x=c.dataScale,p={};function g(h,S){var A=u[S],E=x[r[S]];return a(h,function(P){return A.d2l(P)*E})}p.vectors=s(g(d.u,"xaxis"),g(d.v,"yaxis"),g(d.w,"zaxis"),d._len),p.positions=s(g(d.x,"xaxis"),g(d.y,"yaxis"),g(d.z,"zaxis"),d._len);var m=b(d);p.colormap=w(d),p.vertexIntensityBounds=[m.min/d._normMax,m.max/d._normMax],p.coneOffset=n[d.anchor];var y=d.sizemode;y==="scaled"?p.coneSize=d.sizeref||.5:y==="absolute"?p.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5:y==="raw"&&(p.coneSize=d.sizeref),p.coneSizemode=y;var v=T(p),_=d.lightposition;return v.lightPosition=[_.x,_.y,_.z],v.ambient=d.lighting.ambient,v.diffuse=d.lighting.diffuse,v.specular=d.lighting.specular,v.roughness=d.lighting.roughness,v.fresnel=d.lighting.fresnel,v.opacity=d.opacity,d._pad=o[d.anchor]*v.vectorScale*v.coneScale*d._normMax,v}i.update=function(c){this.data=c;var d=l(this.scene,c);this.mesh.update(d)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(c,d){var u=c.glplot.gl,x=l(c,d),p=k(u,x),g=new t(c,d.uid);return g.mesh=p,g.data=d,p._trace=g,c.glplot.add(p),g}},86096:function(F,C,e){"use strict";var T=e(3400),k=e(27260),a=e(86040);F.exports=function(w,b,f,s){function t(u,x){return T.coerce(w,b,a,u,x)}var i=t("u"),r=t("v"),n=t("w"),o=t("x"),l=t("y"),c=t("z");if(i&&i.length&&r&&r.length&&n&&n.length&&o&&o.length&&l&&l.length&&c&&c.length){var d=t("sizemode");t("sizeref",d==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(w,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null}else b.visible=!1}},26048:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(T,k){return T.norm=k.traceCoordinate[6],T},meta:{}}},67104:function(F,C,e){"use strict";var T=e(83328),k=e(52904),a=e(29736),w=a.axisHoverFormat,b=a.descriptionOnlyNumbers,f=e(49084),s=e(98192).u,t=e(25376),i=e(92880).extendFlat,r=e(69104),n=r.COMPARISON_OPS2,o=r.INTERVAL_OPS,l=k.line;F.exports=i({z:T.z,x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,text:T.text,hovertext:T.hovertext,transpose:T.transpose,xtype:T.xtype,ytype:T.ytype,xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:T.hovertemplate,texttemplate:i({},T.texttemplate,{}),textfont:i({},T.textfont,{}),hoverongaps:T.hoverongaps,connectgaps:i({},T.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:i({},l.smoothing,{}),editType:"plot"},zorder:k.zorder},f("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(F,C,e){"use strict";var T=e(8932),k=e(19512),a=e(54444),w=e(46960);F.exports=function(b,f){var s=k(b,f),t=s[0].z;a(f,t);var i,r=f.contours,n=T.extractOpts(f);if(r.coloring==="heatmap"&&n.auto&&f.autocontour===!1){var o=r.start,l=w(r),c=r.size||1,d=Math.floor((l-o)/c)+1;isFinite(c)||(c=1,d=1);var u=o-c/2;i=[u,u+d*c]}else i=t;return T.calc(b,f,{vals:i,cLetter:"z"}),s}},56008:function(F){"use strict";F.exports=function(C,e){var T,k=C[0],a=k.z;switch(e.type){case"levels":var w=Math.min(a[0][0],a[0][1]);for(T=0;T<C.length;T++){var b=C[T];b.prefixBoundary=!b.edgepaths.length&&(w>b.level||b.starts.length&&w===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var f=k.x.length,s=k.y.length,t=-1/0,i=1/0;for(T=0;T<s;T++)i=Math.min(i,a[T][0]),i=Math.min(i,a[T][f-1]),t=Math.max(t,a[T][0]),t=Math.max(t,a[T][f-1]);for(T=1;T<f-1;T++)i=Math.min(i,a[0][T]),i=Math.min(i,a[s-1][T]),t=Math.max(t,a[0][T]),t=Math.max(t,a[s-1][T]);var r,n,o=e.value;switch(e._operation){case">":o>t&&(k.prefixBoundary=!0);break;case"<":(o<i||k.starts.length&&o===i)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(o[0],o[1]),((n=Math.max(o[0],o[1]))<i||r>t||k.starts.length&&n===i)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(o[0],o[1]),n=Math.max(o[0],o[1]),r<i&&n>t&&(k.prefixBoundary=!0)}}}},55296:function(F,C,e){"use strict";var T=e(8932),k=e(41076),a=e(46960);F.exports={min:"zmin",max:"zmax",calc:function(w,b,f){var s=b.contours,t=b.line,i=s.size||1,r=s.coloring,n=k(b,{isColorbar:!0});if(r==="heatmap"){var o=T.extractOpts(b);f._fillgradient=o.reversescale?T.flipScale(o.colorscale):o.colorscale,f._zrange=[o.min,o.max]}else r==="fill"&&(f._fillcolor=n);f._line={color:r==="lines"?n:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},f._levels={start:s.start,end:a(s),size:i}}}},93252:function(F){"use strict";F.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(F,C,e){"use strict";var T=e(38248),k=e(17428),a=e(76308),w=a.addOpacity,b=a.opacity,f=e(69104),s=e(3400).isArrayOrTypedArray,t=f.CONSTRAINT_REDUCTION,i=f.COMPARISON_OPS2;F.exports=function(r,n,o,l,c,d){var u,x,p,g=n.contours,m=o("contours.operation");g._operation=t[m],function(y,v){var _;i.indexOf(v.operation)===-1?(y("contours.value",[0,1]),s(v.value)?v.value.length>2?v.value=v.value.slice(2):v.length===0?v.value=[0,1]:v.length<2?(_=parseFloat(v.value[0]),v.value=[_,_+1]):v.value=[parseFloat(v.value[0]),parseFloat(v.value[1])]:T(v.value)&&(_=parseFloat(v.value),v.value=[_,_+1])):(y("contours.value",0),T(v.value)||(s(v.value)?v.value=parseFloat(v.value[0]):v.value=0))}(o,g),m==="="?u=g.showlines=!0:(u=o("contours.showlines"),p=o("fillcolor",w((r.line||{}).color||c,.5))),u&&(x=o("line.color",p&&b(p)?w(n.fillcolor,1):c),o("line.width",2),o("line.dash")),o("line.smoothing"),k(o,l,x,d)}},3212:function(F,C,e){"use strict";var T=e(69104),k=e(38248);function a(f,s){var t,i=Array.isArray(s);function r(n){return k(n)?+n:null}return T.COMPARISON_OPS2.indexOf(f)!==-1?t=r(i?s[0]:s):T.INTERVAL_OPS.indexOf(f)!==-1?t=i?[r(s[0]),r(s[1])]:[r(s),r(s)]:T.SET_OPS.indexOf(f)!==-1&&(t=i?s.map(r):[r(s)]),t}function w(f){return function(s){s=a(f,s);var t=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return{start:t,end:i,size:i-t}}}function b(f){return function(s){return{start:s=a(f,s),end:1/0,size:1/0}}}F.exports={"[]":w("[]"),"][":w("]["),">":b(">"),"<":b("<"),"=":b("=")}},84952:function(F){"use strict";F.exports=function(C,e,T,k){var a=k("contours.start"),w=k("contours.end"),b=a===!1||w===!1,f=T("contours.size");!(b?e.autocontour=!0:T("autocontour",!1))&&f||T("ncontours")}},82172:function(F,C,e){"use strict";var T=e(3400);function k(a){return T.extendFlat({},a,{edgepaths:T.extendDeep([],a.edgepaths),paths:T.extendDeep([],a.paths),starts:T.extendDeep([],a.starts)})}F.exports=function(a,w){var b,f,s,t=function(n){return n.reverse()},i=function(n){return n};switch(w){case"=":case"<":return a;case">":for(a.length!==1&&T.warn("Contour data invalid for the specified inequality operation."),f=a[0],b=0;b<f.edgepaths.length;b++)f.edgepaths[b]=t(f.edgepaths[b]);for(b=0;b<f.paths.length;b++)f.paths[b]=t(f.paths[b]);for(b=0;b<f.starts.length;b++)f.starts[b]=t(f.starts[b]);return a;case"][":var r=t;t=i,i=r;case"[]":for(a.length!==2&&T.warn("Contour data invalid for the specified inequality range operation."),f=k(a[0]),s=k(a[1]),b=0;b<f.edgepaths.length;b++)f.edgepaths[b]=t(f.edgepaths[b]);for(b=0;b<f.paths.length;b++)f.paths[b]=t(f.paths[b]);for(b=0;b<f.starts.length;b++)f.starts[b]=t(f.starts[b]);for(;s.edgepaths.length;)f.edgepaths.push(i(s.edgepaths.shift()));for(;s.paths.length;)f.paths.push(i(s.paths.shift()));for(;s.starts.length;)f.starts.push(i(s.starts.shift()));return[f]}}},57004:function(F,C,e){"use strict";var T=e(3400),k=e(51264),a=e(31147),w=e(95536),b=e(84952),f=e(97680),s=e(39096),t=e(67104);F.exports=function(i,r,n,o){function l(d,u){return T.coerce(i,r,t,d,u)}if(k(i,r,l,o)){a(i,r,o,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var c=l("contours.type")==="constraint";l("connectgaps",T.isArray1D(r.z)),c?w(i,r,l,o,n):(b(i,r,l,function(d){return T.coerce2(i,r,t,d)}),f(i,r,l,o)),r.contours&&r.contours.coloring==="heatmap"&&s(l,o),l("zorder")}else r.visible=!1}},61512:function(F,C,e){"use strict";var T=e(3400),k=e(3212),a=e(46960);F.exports=function(w,b,f){for(var s=w.type==="constraint"?k[w._operation](w.value):w,t=s.size,i=[],r=a(s),n=f.trace._carpetTrace,o=n?{xaxis:n.aaxis,yaxis:n.baxis,x:f.a,y:f.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:f.x,y:f.y},l=s.start;l<r;l+=t)if(i.push(T.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:f.z,smoothing:f.trace.line.smoothing},o)),i.length>1e3){T.warn("Too many contours, clipping at 1000",w);break}return i}},46960:function(F){"use strict";F.exports=function(C){return C.end+C.size/1e6}},88748:function(F,C,e){"use strict";var T=e(3400),k=e(93252);function a(f,s,t,i){return Math.abs(f[0]-s[0])<t&&Math.abs(f[1]-s[1])<i}function w(f,s,t,i,r){var n,o=s.join(","),l=f.crossings[o],c=function(ie,se,ae){var ue=0,ve=0;return ie>20&&se?ie===208||ie===1114?ue=ae[0]===0?1:-1:ve=ae[1]===0?1:-1:k.BOTTOMSTART.indexOf(ie)!==-1?ve=1:k.LEFTSTART.indexOf(ie)!==-1?ue=1:k.TOPSTART.indexOf(ie)!==-1?ve=-1:ue=-1,[ue,ve]}(l,t,s),d=[b(f,s,[-c[0],-c[1]])],u=f.z.length,x=f.z[0].length,p=s.slice(),g=c.slice();for(n=0;n<1e4;n++){if(l>20?(l=k.CHOOSESADDLE[l][(c[0]||c[1])<0?0:1],f.crossings[o]=k.SADDLEREMAINDER[l]):delete f.crossings[o],!(c=k.NEWDELTA[l])){T.log("Found bad marching index:",l,s,f.level);break}d.push(b(f,s,c)),s[0]+=c[0],s[1]+=c[1],o=s.join(","),a(d[d.length-1],d[d.length-2],i,r)&&d.pop();var m=c[0]&&(s[0]<0||s[0]>x-2)||c[1]&&(s[1]<0||s[1]>u-2);if(s[0]===p[0]&&s[1]===p[1]&&c[0]===g[0]&&c[1]===g[1]||t&&m)break;l=f.crossings[o]}n===1e4&&T.log("Infinite loop in contour?");var y,v,_,h,S,A,E,P,I,D,z,V,O,j,Y,B=a(d[0],d[d.length-1],i,r),U=0,q=.2*f.smoothing,te=[],ee=0;for(n=1;n<d.length;n++)V=d[n],O=d[n-1],j=V[2]-O[2],Y=V[3]-O[3],U+=E=Math.sqrt(j*j+Y*Y),te.push(E);var Q=U/te.length*q;function J(ie){return d[ie%d.length]}for(n=d.length-2;n>=ee;n--)if((y=te[n])<Q){for(_=0,v=n-1;v>=ee&&y+te[v]<Q;v--)y+=te[v];if(B&&n===d.length-2)for(_=0;_<v&&y+te[_]<Q;_++)y+=te[_];S=n-v+_+1,A=Math.floor((n+v+_+2)/2),h=B||n!==d.length-2?B||v!==-1?S%2?J(A):[(J(A)[0]+J(A+1)[0])/2,(J(A)[1]+J(A+1)[1])/2]:d[0]:d[d.length-1],d.splice(v+1,n-v+1,h),n=v+1,_&&(ee=_),B&&(n===d.length-2?d[_]=d[d.length-1]:n===0&&(d[d.length-1]=d[0]))}for(d.splice(0,ee),n=0;n<d.length;n++)d[n].length=2;if(!(d.length<2))if(B)d.pop(),f.paths.push(d);else{t||T.log("Unclosed interior contour?",f.level,p.join(","),d.join("L"));var K=!1;for(P=0;P<f.edgepaths.length;P++)if(D=f.edgepaths[P],!K&&a(D[0],d[d.length-1],i,r)){d.pop(),K=!0;var X=!1;for(I=0;I<f.edgepaths.length;I++)if(a((z=f.edgepaths[I])[z.length-1],d[0],i,r)){X=!0,d.shift(),f.edgepaths.splice(P,1),I===P?f.paths.push(d.concat(z)):(I>P&&I--,f.edgepaths[I]=z.concat(d,D));break}X||(f.edgepaths[P]=d.concat(D))}for(P=0;P<f.edgepaths.length&&!K;P++)a((D=f.edgepaths[P])[D.length-1],d[0],i,r)&&(d.shift(),f.edgepaths[P]=D.concat(d),K=!0);K||f.edgepaths.push(d)}}function b(f,s,t){var i=s[0]+Math.max(t[0],0),r=s[1]+Math.max(t[1],0),n=f.z[r][i],o=f.xaxis,l=f.yaxis;if(t[1]){var c=(f.level-n)/(f.z[r][i+1]-n),d=(c!==1?(1-c)*o.c2l(f.x[i]):0)+(c!==0?c*o.c2l(f.x[i+1]):0);return[o.c2p(o.l2c(d),!0),l.c2p(f.y[r],!0),i+c,r]}var u=(f.level-n)/(f.z[r+1][i]-n),x=(u!==1?(1-u)*l.c2l(f.y[r]):0)+(u!==0?u*l.c2l(f.y[r+1]):0);return[o.c2p(f.x[i],!0),l.c2p(l.l2c(x),!0),i,r+u]}F.exports=function(f,s,t){var i,r,n,o;for(s=s||.01,t=t||.01,r=0;r<f.length;r++){for(n=f[r],o=0;o<n.starts.length;o++)w(n,n.starts[o],"edge",s,t);for(i=0;Object.keys(n.crossings).length&&i<1e4;)i++,w(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,t);i===1e4&&T.log("Infinite loop in contour?")}}},38200:function(F,C,e){"use strict";var T=e(76308),k=e(55512);F.exports=function(a,w,b,f,s){s||(s={}),s.isContour=!0;var t=k(a,w,b,f,s);return t&&t.forEach(function(i){var r=i.trace;r.contours.type==="constraint"&&(r.fillcolor&&T.opacity(r.fillcolor)?i.color=T.addOpacity(r.fillcolor,1):r.contours.showlines&&T.opacity(r.line.color)&&(i.color=T.addOpacity(r.line.color,1)))}),t}},66240:function(F,C,e){"use strict";F.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a,w,b){if(b||(b={}),k("contours.showlabels")){var f=a.font;T.coerceFont(k,"contours.labelfont",f,{overrideDflt:{color:w}}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},41076:function(F,C,e){"use strict";var T=e(33428),k=e(8932),a=e(46960);F.exports=function(w){var b=w.contours,f=b.start,s=a(b),t=b.size||1,i=Math.floor((s-f)/t)+1,r=b.coloring==="lines"?0:1,n=k.extractOpts(w);isFinite(t)||(t=1,i=1);var o,l,c=n.reversescale?k.flipScale(n.colorscale):n.colorscale,d=c.length,u=new Array(d),x=new Array(d),p=n.min,g=n.max;if(b.coloring==="heatmap"){for(l=0;l<d;l++)o=c[l],u[l]=o[0]*(g-p)+p,x[l]=o[1];var m=T.extent([p,g,b.start,b.start+t*(i-1)]),y=m[p<g?0:1],v=m[p<g?1:0];y!==p&&(u.splice(0,0,y),x.splice(0,0,x[0])),v!==g&&(u.push(v),x.push(x[x.length-1]))}else{var _=w._input&&typeof w._input.zmin=="number"&&typeof w._input.zmax=="number";for(_&&(f<=p||s>=g)&&(f<=p&&(f=p),s>=g&&(s=g),i=Math.floor((s-f)/t)+1,r=0),l=0;l<d;l++)o=c[l],u[l]=(o[0]*(i+r-1)-r/2)*t+f,x[l]=o[1];(_||w.autocontour)&&(u[0]>p&&(u.unshift(p),x.unshift(x[0])),u[u.length-1]<g&&(u.push(g),x.push(x[x.length-1])))}return k.makeColorScaleFunc({domain:u,range:x},{noNumericCheck:!0})}},72424:function(F,C,e){"use strict";var T=e(93252);function k(a,w){var b=(w[0][0]>a?0:1)+(w[0][1]>a?0:2)+(w[1][1]>a?0:4)+(w[1][0]>a?0:8);return b===5||b===10?a>(w[0][0]+w[0][1]+w[1][0]+w[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}F.exports=function(a){var w,b,f,s,t,i,r,n,o,l=a[0].z,c=l.length,d=l[0].length,u=c===2||d===2;for(b=0;b<c-1;b++)for(s=[],b===0&&(s=s.concat(T.BOTTOMSTART)),b===c-2&&(s=s.concat(T.TOPSTART)),w=0;w<d-1;w++)for(f=s.slice(),w===0&&(f=f.concat(T.LEFTSTART)),w===d-2&&(f=f.concat(T.RIGHTSTART)),t=w+","+b,i=[[l[b][w],l[b][w+1]],[l[b+1][w],l[b+1][w+1]]],o=0;o<a.length;o++)(r=k((n=a[o]).level,i))&&(n.crossings[t]=r,f.indexOf(r)!==-1&&(n.starts.push([w,b]),u&&f.indexOf(r,f.indexOf(r)+1)!==-1&&n.starts.push([w,b])))}},23676:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(8932),b=e(72736),f=e(54460),s=e(78344),t=e(41420),i=e(72424),r=e(88748),n=e(61512),o=e(82172),l=e(56008),c=e(93252),d=c.LABELOPTIMIZER;function u(g,m){var y,v,_,h,S,A,E,P="",I=0,D=g.edgepaths.map(function(B,U){return U}),z=!0;function V(B){return Math.abs(B[1]-m[2][1])<.01}function O(B){return Math.abs(B[0]-m[0][0])<.01}function j(B){return Math.abs(B[0]-m[2][0])<.01}for(;D.length;){for(A=a.smoothopen(g.edgepaths[I],g.smoothing),P+=z?A:A.replace(/^M/,"L"),D.splice(D.indexOf(I),1),y=g.edgepaths[I][g.edgepaths[I].length-1],h=-1,_=0;_<4;_++){if(!y){k.log("Missing end?",I,g);break}for(E=y,Math.abs(E[1]-m[0][1])<.01&&!j(y)?v=m[1]:O(y)?v=m[0]:V(y)?v=m[3]:j(y)&&(v=m[2]),S=0;S<g.edgepaths.length;S++){var Y=g.edgepaths[S][0];Math.abs(y[0]-v[0])<.01?Math.abs(y[0]-Y[0])<.01&&(Y[1]-y[1])*(v[1]-Y[1])>=0&&(v=Y,h=S):Math.abs(y[1]-v[1])<.01?Math.abs(y[1]-Y[1])<.01&&(Y[0]-y[0])*(v[0]-Y[0])>=0&&(v=Y,h=S):k.log("endpt to newendpt is not vert. or horz.",y,v,Y)}if(y=v,h>=0)break;P+="L"+v}if(h===g.edgepaths.length){k.log("unclosed perimeter path");break}I=h,(z=D.indexOf(I)===-1)&&(I=D[0],P+="Z")}for(I=0;I<g.paths.length;I++)P+=a.smoothclosed(g.paths[I],g.smoothing);return P}function x(g,m,y,v){var _=m.width/2,h=m.height/2,S=g.x,A=g.y,E=g.theta,P=Math.cos(E)*_,I=Math.sin(E)*_,D=(S>v.center?v.right-S:S-v.left)/(P+Math.abs(Math.sin(E)*h)),z=(A>v.middle?v.bottom-A:A-v.top)/(Math.abs(I)+Math.cos(E)*h);if(D<1||z<1)return 1/0;var V=d.EDGECOST*(1/(D-1)+1/(z-1));V+=d.ANGLECOST*E*E;for(var O=S-P,j=A-I,Y=S+P,B=A+I,U=0;U<y.length;U++){var q=y[U],te=Math.cos(q.theta)*q.width/2,ee=Math.sin(q.theta)*q.width/2,Q=2*k.segmentDistance(O,j,Y,B,q.x-te,q.y-ee,q.x+te,q.y+ee)/(m.height+q.height),J=q.level===m.level,K=J?d.SAMELEVELDISTANCE:1;if(Q<=K)return 1/0;V+=d.NEIGHBORCOST*(J?d.SAMELEVELFACTOR:1)/(Q-K)}return V}function p(g){var m,y,v=g.trace._emptypoints,_=[],h=g.z.length,S=g.z[0].length,A=[];for(m=0;m<S;m++)A.push(1);for(m=0;m<h;m++)_.push(A.slice());for(m=0;m<v.length;m++)_[(y=v[m])[0]][y[1]]=0;return g.zmask=_,_}C.plot=function(g,m,y,v){var _=m.xaxis,h=m.yaxis;k.makeTraceGroups(v,y,"contour").each(function(S){var A=T.select(this),E=S[0],P=E.trace,I=E.x,D=E.y,z=P.contours,V=n(z,m,E),O=k.ensureSingle(A,"g","heatmapcoloring"),j=[];z.coloring==="heatmap"&&(j=[S]),t(g,m,j,O),i(V),r(V);var Y=_.c2p(I[0],!0),B=_.c2p(I[I.length-1],!0),U=h.c2p(D[0],!0),q=h.c2p(D[D.length-1],!0),te=[[Y,q],[B,q],[B,U],[Y,U]],ee=V;z.type==="constraint"&&(ee=o(V,z._operation)),function(Q,J,K){var X=k.ensureSingle(Q,"g","contourbg").selectAll("path").data(K.coloring==="fill"?[0]:[]);X.enter().append("path"),X.exit().remove(),X.attr("d","M"+J.join("L")+"Z").style("stroke","none")}(A,te,z),function(Q,J,K,X){var ie=X.coloring==="fill"||X.type==="constraint"&&X._operation!=="=",se="M"+K.join("L")+"Z";ie&&l(J,X);var ae=k.ensureSingle(Q,"g","contourfill").selectAll("path").data(ie?J:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(ue){var ve=(ue.prefixBoundary?se:"")+u(ue,K);ve?T.select(this).attr("d",ve).style("stroke","none"):T.select(this).remove()})}(A,ee,te,z),function(Q,J,K,X,ie){var se=K._context.staticPlot,ae=k.ensureSingle(Q,"g","contourlines"),ue=ie.showlines!==!1,ve=ie.showlabels,ye=ue&&ve,pe=C.createLines(ae,ue||ve,J,se),de=C.createLineClip(ae,ye,K,X.trace.uid),me=Q.selectAll("g.contourlabels").data(ve?[0]:[]);if(me.exit().remove(),me.enter().append("g").classed("contourlabels",!0),ve){var ke=[],Ce=[];k.clearLocationCache();var ge=C.labelFormatter(K,X),oe=a.tester.append("text").attr("data-notex",1).call(a.font,ie.labelfont),re=J[0].xaxis,fe=J[0].yaxis,Se=re._length,be=fe._length,we=re.range,Me=fe.range,Pe=k.aggNums(Math.min,null,X.x),De=k.aggNums(Math.max,null,X.x),he=k.aggNums(Math.min,null,X.y),_e=k.aggNums(Math.max,null,X.y),Ae=Math.max(re.c2p(Pe,!0),0),Oe=Math.min(re.c2p(De,!0),Se),Ee=Math.max(fe.c2p(_e,!0),0),Be=Math.min(fe.c2p(he,!0),be),Ve={};we[0]<we[1]?(Ve.left=Ae,Ve.right=Oe):(Ve.left=Oe,Ve.right=Ae),Me[0]<Me[1]?(Ve.top=Ee,Ve.bottom=Be):(Ve.top=Be,Ve.bottom=Ee),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,ke.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var Ze=Math.sqrt(Se*Se+be*be),it=c.LABELDISTANCE*Ze/Math.max(1,J.length/c.LABELINCREASE);pe.each(function(at){var gt=C.calcTextOpts(at.level,ge,oe,K);T.select(this).selectAll("path").each(function(){var yt=k.getVisibleSegment(this,Ve,gt.height/2);if(yt&&!(yt.len<(gt.width+gt.height)*c.LABELMIN))for(var pt=Math.min(Math.ceil(yt.len/it),c.LABELMAX),et=0;et<pt;et++){var $e=C.findBestTextLocation(this,yt,gt,Ce,Ve);if(!$e)break;C.addLabelData($e,gt,Ce,ke)}})}),oe.remove(),C.drawLabels(me,Ce,K,de,ye?ke:null)}ve&&!ue&&pe.remove()}(A,V,g,E,z),function(Q,J,K,X,ie){var se=X.trace,ae=K._fullLayout._clips,ue="clip"+se.uid,ve=ae.selectAll("#"+ue).data(se.connectgaps?[]:[0]);if(ve.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),ve.exit().remove(),se.connectgaps===!1){var ye={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:J.xaxis,yaxis:J.yaxis,x:X.x,y:X.y,z:p(X),smoothing:0};i([ye]),r([ye]),l([ye],{type:"levels"}),k.ensureSingle(ve,"path","").attr("d",(ye.prefixBoundary?"M"+ie.join("L")+"Z":"")+u(ye,ie))}else ue=null;a.setClipUrl(Q,ue,K)}(A,m,g,E,te)})},C.createLines=function(g,m,y,v){var _=y[0].smoothing,h=g.selectAll("g.contourlevel").data(m?y:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlevel",!0),m){var S=h.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return a.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke");var A=h.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});A.exit().remove(),A.enter().append("path").classed("closedline",!0),A.attr("d",function(E){return a.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke")}return h},C.createLineClip=function(g,m,y,v){var _=m?"clipline"+v:null,h=y._fullLayout._clips.selectAll("#"+_).data(m?[0]:[]);return h.exit().remove(),h.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),a.setClipUrl(g,_,y),h},C.labelFormatter=function(g,m){var y=g._fullLayout,v=m.trace,_=v.contours,h={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)h.tickformat=_.labelformat,s(h,y);else{var S=w.extractOpts(v);if(S&&S.colorbar&&S.colorbar._axis)h=S.colorbar._axis;else{if(_.type==="constraint"){var A=_.value;k.isArrayOrTypedArray(A)?h.range=[A[0],A[A.length-1]]:h.range=[A,A]}else h.range=[_.start,_.end],h.nticks=(_.end-_.start)/_.size;h.range[0]===h.range[1]&&(h.range[1]+=h.range[0]||1),h.nticks||(h.nticks=1e3),s(h,y),f.prepTicks(h),h._tmin=null,h._tmax=null}}return function(E){return f.tickText(h,E).text}},C.calcTextOpts=function(g,m,y,v){var _=m(g);y.text(_).call(b.convertToTspans,v);var h=y.node(),S=a.bBox(h,!0);return{text:_,width:S.width,height:S.height,fontSize:+h.style["font-size"].replace("px",""),level:g,dy:(S.top+S.bottom)/2}},C.findBestTextLocation=function(g,m,y,v,_){var h,S,A,E,P,I=y.width;m.isClosed?(S=m.len/d.INITIALSEARCHPOINTS,h=m.min+S/2,A=m.max):(S=(m.len-I)/(d.INITIALSEARCHPOINTS+1),h=m.min+S+I/2,A=m.max-(S+I)/2);for(var D=1/0,z=0;z<d.ITERATIONS;z++){for(var V=h;V<A;V+=S){var O=k.getTextLocation(g,m.total,V,I),j=x(O,y,v,_);j<D&&(D=j,P=O,E=V)}if(D>2*d.MAXCOST)break;z&&(S/=2),A=(h=E-S/2)+1.5*S}if(D<=d.MAXCOST)return P},C.addLabelData=function(g,m,y,v){var _=m.fontSize,h=m.width+_/3,S=Math.max(0,m.height-_/3),A=g.x,E=g.y,P=g.theta,I=Math.sin(P),D=Math.cos(P),z=function(O,j){return[A+O*D-j*I,E+O*I+j*D]},V=[z(-h/2,-S/2),z(-h/2,S/2),z(h/2,S/2),z(h/2,-S/2)];y.push({text:m.text,x:A,y:E,dy:m.dy,theta:P,level:m.level,width:h,height:S}),v.push(V)},C.drawLabels=function(g,m,y,v,_){var h=g.selectAll("text").data(m,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(h.exit().remove(),h.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var P=E.x+Math.sin(E.theta)*E.dy,I=E.y-Math.cos(E.theta)*E.dy;T.select(this).text(E.text).attr({x:P,y:I,transform:"rotate("+180*E.theta/Math.PI+" "+P+" "+I+")"}).call(b.convertToTspans,y)}),_){for(var S="",A=0;A<_.length;A++)S+="M"+_[A].join("L")+"Z";k.ensureSingle(v,"path","").attr("d",S)}}},54444:function(F,C,e){"use strict";var T=e(54460),k=e(3400);function a(w,b,f){var s={type:"linear",range:[w,b]};return T.autoTicks(s,(b-w)/(f||15)),s}F.exports=function(w,b){var f=w.contours;if(w.autocontour){var s=w.zmin,t=w.zmax;(w.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,b)),(w.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,b));var i=a(s,t,w.ncontours);f.size=i.dtick,f.start=T.tickFirst(i),i.range.reverse(),f.end=T.tickFirst(i),f.start===s&&(f.start+=f.size),f.end===t&&(f.end-=f.size),f.start>f.end&&(f.start=f.end=(f.start+f.end)/2),w._input.contours||(w._input.contours={}),k.extendFlat(w._input.contours,{start:f.start,end:f.end,size:f.size}),w._input.autocontour=!0}else if(f.type!=="constraint"){var r,n=f.start,o=f.end,l=w._input.contours;n>o&&(f.start=l.start=o,o=f.end=l.end=n,n=f.start),f.size>0||(r=n===o?1:a(n,o,w.ncontours).dtick,l.size=f.size=r)}}},52440:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(41648),w=e(41076);F.exports=function(b){var f=T.select(b).selectAll("g.contour");f.style("opacity",function(s){return s[0].trace.opacity}),f.each(function(s){var t=T.select(this),i=s[0].trace,r=i.contours,n=i.line,o=r.size||1,l=r.start,c=r.type==="constraint",d=!c&&r.coloring==="lines",u=!c&&r.coloring==="fill",x=d||u?w(i):null;t.selectAll("g.contourlevel").each(function(m){T.select(this).selectAll("path").call(k.lineGroupStyle,n.width,d?x(m.level):n.color,n.dash)});var p=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(m){k.font(T.select(this),{weight:p.weight,style:p.style,variant:p.variant,textcase:p.textcase,lineposition:p.lineposition,shadow:p.shadow,family:p.family,size:p.size,color:p.color||(d?x(m.level):n.color)})}),c)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(u){var g;t.selectAll("g.contourfill path").style("fill",function(m){return g===void 0&&(g=m.level),x(m.level+.5*o)}),g===void 0&&(g=l),t.selectAll("g.contourbg path").style("fill",x(g-.5*o))}}),a(b)}},97680:function(F,C,e){"use strict";var T=e(27260),k=e(17428);F.exports=function(a,w,b,f,s){var t,i=b("contours.coloring"),r="";i==="fill"&&(t=b("contours.showlines")),t!==!1&&(i!=="lines"&&(r=b("line.color","#000")),b("line.width",.5),b("line.dash")),i!=="none"&&(a.showlegend!==!0&&(w.showlegend=!1),w._dfltShowLegend=!1,T(a,w,f,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,f,r,s)}},37960:function(F,C,e){"use strict";var T=e(83328),k=e(67104),a=e(49084),w=e(92880).extendFlat,b=k.contours;F.exports=w({carpet:{valType:"string",editType:"calc"},z:T.z,a:T.x,a0:T.x0,da:T.dx,b:T.y,b0:T.y0,db:T.dy,text:T.text,hovertext:T.hovertext,transpose:T.transpose,atype:T.xtype,btype:T.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},zorder:k.zorder,transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},30572:function(F,C,e){"use strict";var T=e(47128),k=e(3400),a=e(2872),w=e(26136),b=e(70448),f=e(11240),s=e(35744),t=e(3252),i=e(50948),r=e(54444);F.exports=function(n,o){var l=o._carpetTrace=i(n,o);if(l&&l.visible&&l.visible!=="legendonly"){if(!o.a||!o.b){var c=n.data[l.index],d=n.data[o.index];d.a||(d.a=c.a),d.b||(d.b=c.b),t(d,o,o._defaultColor,n._fullLayout)}var u=function(x,p){var g,m,y,v,_,h,S,A=p._carpetTrace,E=A.aaxis,P=A.baxis;E._minDtick=0,P._minDtick=0,k.isArray1D(p.z)&&a(p,E,P,"a","b",["z"]),g=p._a=p._a||p.a,v=p._b=p._b||p.b,g=g?E.makeCalcdata(p,"_a"):[],v=v?P.makeCalcdata(p,"_b"):[],m=p.a0||0,y=p.da||1,_=p.b0||0,h=p.db||1,S=p._z=w(p._z||p.z,p.transpose),p._emptypoints=f(S),b(S,p._emptypoints);var I=k.maxRowLength(S),D=p.xtype==="scaled"?"":g,z=s(p,D,m,y,I,E),V=p.ytype==="scaled"?"":v,O={a:z,b:s(p,V,_,h,S.length,P),z:S};return p.contours.type==="levels"&&p.contours.coloring!=="none"&&T(x,p,{vals:S,containerStr:"",cLetter:"z"}),[O]}(n,o);return r(o,o._z),u}}},3252:function(F,C,e){"use strict";var T=e(3400),k=e(51264),a=e(37960),w=e(95536),b=e(84952),f=e(97680);F.exports=function(s,t,i,r){function n(o,l){return T.coerce(s,t,a,o,l)}if(n("carpet"),s.a&&s.b){if(!k(s,t,n,r,"a","b"))return void(t.visible=!1);n("text"),n("contours.type")==="constraint"?w(s,t,n,r,i,{hasHover:!1}):(b(s,t,n,function(o){return T.coerce2(s,t,a,o)}),f(s,t,n,r,{hasHover:!1}))}else t._defaultColor=i,t._length=null;n("zorder")}},40448:function(F,C,e){"use strict";F.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(F,C,e){"use strict";var T=e(33428),k=e(87072),a=e(53416),w=e(43616),b=e(3400),f=e(72424),s=e(88748),t=e(23676),i=e(93252),r=e(82172),n=e(61512),o=e(56008),l=e(50948),c=e(77712);function d(p,g,m){var y=p.getPointAtLength(g),v=p.getPointAtLength(m),_=v.x-y.x,h=v.y-y.y,S=Math.sqrt(_*_+h*h);return[_/S,h/S]}function u(p){var g=Math.sqrt(p[0]*p[0]+p[1]*p[1]);return[p[0]/g,p[1]/g]}function x(p,g){var m=Math.abs(p[0]*g[0]+p[1]*g[1]);return Math.sqrt(1-m*m)/m}F.exports=function(p,g,m,y){var v=g.xaxis,_=g.yaxis;b.makeTraceGroups(y,m,"contour").each(function(h){var S=T.select(this),A=h[0],E=A.trace,P=E._carpetTrace=l(p,E),I=p.calcdata[P.index][0];if(P.visible&&P.visible!=="legendonly"){var D=A.a,z=A.b,V=E.contours,O=n(V,g,A),j=V.type==="constraint",Y=V._operation,B=j?Y==="="?"lines":"fill":V.coloring,U=[[D[0],z[z.length-1]],[D[D.length-1],z[z.length-1]],[D[D.length-1],z[0]],[D[0],z[0]]];f(O);var q=1e-8*(D[D.length-1]-D[0]),te=1e-8*(z[z.length-1]-z[0]);s(O,q,te);var ee,Q,J,K,X=O;V.type==="constraint"&&(X=r(O,Y)),function(ue,ve){var ye,pe,de,me,ke,Ce,ge,oe,re;for(ye=0;ye<ue.length;ye++){for(ke=(me=ue[ye]).pedgepaths=[],Ce=me.ppaths=[],pe=0;pe<me.edgepaths.length;pe++){for(re=me.edgepaths[pe],ge=[],de=0;de<re.length;de++)ge[de]=ve(re[de]);ke.push(ge)}for(pe=0;pe<me.paths.length;pe++){for(re=me.paths[pe],oe=[],de=0;de<re.length;de++)oe[de]=ve(re[de]);Ce.push(oe)}}}(O,ae);var ie=[];for(K=I.clipsegments.length-1;K>=0;K--)ee=I.clipsegments[K],Q=k([],ee.x,v.c2p),J=k([],ee.y,_.c2p),Q.reverse(),J.reverse(),ie.push(a(Q,J,ee.bicubic));var se="M"+ie.join("L")+"Z";(function(ue,ve,ye,pe,de,me){var ke,Ce,ge,oe,re=b.ensureSingle(ue,"g","contourbg").selectAll("path").data(me!=="fill"||de?[]:[0]);re.enter().append("path"),re.exit().remove();var fe=[];for(oe=0;oe<ve.length;oe++)ke=ve[oe],Ce=k([],ke.x,ye.c2p),ge=k([],ke.y,pe.c2p),fe.push(a(Ce,ge,ke.bicubic));re.attr("d","M"+fe.join("L")+"Z").style("stroke","none")})(S,I.clipsegments,v,_,j,B),function(ue,ve,ye,pe,de,me,ke,Ce,ge,oe,re){var fe=oe==="fill";fe&&o(de,ue.contours);var Se=b.ensureSingle(ve,"g","contourfill").selectAll("path").data(fe?de:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(be){var we=(be.prefixBoundary?re:"")+function(Me,Pe,De,he,_e,Ae,Oe,Ee){var Be,Ve,Ze,it,at,gt,yt,pt="",et=Pe.edgepaths.map(function(nt,ze){return ze}),$e=!0,At=1e-4*Math.abs(De[0][0]-De[2][0]),Ot=1e-4*Math.abs(De[0][1]-De[2][1]);function Rt(nt){return Math.abs(nt[1]-De[0][1])<Ot}function Ct(nt){return Math.abs(nt[1]-De[2][1])<Ot}function Ge(nt){return Math.abs(nt[0]-De[0][0])<At}function Xe(nt){return Math.abs(nt[0]-De[2][0])<At}function Ne(nt,ze){var Fe,rt,We,ft,mt="";for(Rt(nt)&&!Xe(nt)||Ct(nt)&&!Ge(nt)?(ft=_e.aaxis,We=c(_e,Ae,[nt[0],ze[0]],.5*(nt[1]+ze[1]))):(ft=_e.baxis,We=c(_e,Ae,.5*(nt[0]+ze[0]),[nt[1],ze[1]])),Fe=1;Fe<We.length;Fe++)for(mt+=ft.smoothing?"C":"L",rt=0;rt<We[Fe].length;rt++){var vt=We[Fe][rt];mt+=[Oe.c2p(vt[0]),Ee.c2p(vt[1])]+" "}return mt}for(Be=0,Ve=null;et.length;){var Ye=Pe.edgepaths[Be][0];for(Ve&&(pt+=Ne(Ve,Ye)),yt=w.smoothopen(Pe.edgepaths[Be].map(he),Pe.smoothing),pt+=$e?yt:yt.replace(/^M/,"L"),et.splice(et.indexOf(Be),1),Ve=Pe.edgepaths[Be][Pe.edgepaths[Be].length-1],at=-1,it=0;it<4;it++){if(!Ve){b.log("Missing end?",Be,Pe);break}for(Rt(Ve)&&!Xe(Ve)?Ze=De[1]:Ge(Ve)?Ze=De[0]:Ct(Ve)?Ze=De[3]:Xe(Ve)&&(Ze=De[2]),gt=0;gt<Pe.edgepaths.length;gt++){var ot=Pe.edgepaths[gt][0];Math.abs(Ve[0]-Ze[0])<At?Math.abs(Ve[0]-ot[0])<At&&(ot[1]-Ve[1])*(Ze[1]-ot[1])>=0&&(Ze=ot,at=gt):Math.abs(Ve[1]-Ze[1])<Ot?Math.abs(Ve[1]-ot[1])<Ot&&(ot[0]-Ve[0])*(Ze[0]-ot[0])>=0&&(Ze=ot,at=gt):b.log("endpt to newendpt is not vert. or horz.",Ve,Ze,ot)}if(at>=0)break;pt+=Ne(Ve,Ze),Ve=Ze}if(at===Pe.edgepaths.length){b.log("unclosed perimeter path");break}Be=at,($e=et.indexOf(Be)===-1)&&(Be=et[0],pt+=Ne(Ve,Ze)+"Z",Ve=null)}for(Be=0;Be<Pe.paths.length;Be++)pt+=w.smoothclosed(Pe.paths[Be].map(he),Pe.smoothing);return pt}(0,be,me,ke,Ce,ge,ye,pe);we?T.select(this).attr("d",we).style("stroke","none"):T.select(this).remove()})}(E,S,v,_,X,U,ae,P,I,B,se),function(ue,ve,ye,pe,de,me,ke){var Ce=ye._context.staticPlot,ge=b.ensureSingle(ue,"g","contourlines"),oe=de.showlines!==!1,re=de.showlabels,fe=oe&&re,Se=t.createLines(ge,oe||re,ve,Ce),be=t.createLineClip(ge,fe,ye,pe.trace.uid),we=ue.selectAll("g.contourlabels").data(re?[0]:[]);if(we.exit().remove(),we.enter().append("g").classed("contourlabels",!0),re){var Me=me.xaxis,Pe=me.yaxis,De=Me._length,he=Pe._length,_e=[[[0,0],[De,0],[De,he],[0,he]]],Ae=[];b.clearLocationCache();var Oe=t.labelFormatter(ye,pe),Ee=w.tester.append("text").attr("data-notex",1).call(w.font,de.labelfont),Be={left:0,right:De,center:De/2,top:0,bottom:he,middle:he/2},Ve=Math.sqrt(De*De+he*he),Ze=i.LABELDISTANCE*Ve/Math.max(1,ve.length/i.LABELINCREASE);Se.each(function(it){var at=t.calcTextOpts(it.level,Oe,Ee,ye);T.select(this).selectAll("path").each(function(gt){var yt=this,pt=b.getVisibleSegment(yt,Be,at.height/2);if(pt&&(function(Ot,Rt,Ct,Ge,Xe,Ne){for(var Ye,ot=0;ot<Ct.pedgepaths.length;ot++)Rt===Ct.pedgepaths[ot]&&(Ye=Ct.edgepaths[ot]);if(Ye){var nt=Xe.a[0],ze=Xe.a[Xe.a.length-1],Fe=Xe.b[0],rt=Xe.b[Xe.b.length-1],We=d(Ot,0,1),ft=d(Ot,Ge.total,Ge.total-1),mt=ut(Ye[0],We),vt=Ge.total-ut(Ye[Ye.length-1],ft);Ge.min<mt&&(Ge.min=mt),Ge.max>vt&&(Ge.max=vt),Ge.len=Ge.max-Ge.min}function ut(Mt,bt){var St,Pt=0,Dt=.1;return(Math.abs(Mt[0]-nt)<Dt||Math.abs(Mt[0]-ze)<Dt)&&(St=u(Xe.dxydb_rough(Mt[0],Mt[1],Dt)),Pt=Math.max(Pt,Ne*x(bt,St)/2)),(Math.abs(Mt[1]-Fe)<Dt||Math.abs(Mt[1]-rt)<Dt)&&(St=u(Xe.dxyda_rough(Mt[0],Mt[1],Dt)),Pt=Math.max(Pt,Ne*x(bt,St)/2)),Pt}}(yt,gt,it,pt,ke,at.height),!(pt.len<(at.width+at.height)*i.LABELMIN)))for(var et=Math.min(Math.ceil(pt.len/Ze),i.LABELMAX),$e=0;$e<et;$e++){var At=t.findBestTextLocation(yt,pt,at,Ae,Be);if(!At)break;t.addLabelData(At,at,Ae,_e)}})}),Ee.remove(),t.drawLabels(we,Ae,ye,be,fe?_e:null)}re&&!oe&&Se.remove()}(S,O,p,A,V,g,P),w.setClipUrl(S,P._clipPathId,p)}function ae(ue){var ve=P.ab2xy(ue[0],ue[1],!0);return[v.c2p(ve[0]),_.c2p(ve[1])]}})}},33928:function(F,C,e){"use strict";var T=e(49084),k=e(21776).Ks,a=e(45464),w=e(31512),b=e(92880).extendFlat;F.exports=b({lon:w.lon,lat:w.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,hoverinfo:b({},a.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},a.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(F,C,e){"use strict";var T=e(38248),k=e(3400).isArrayOrTypedArray,a=e(39032).BADNUM,w=e(47128),b=e(3400)._;F.exports=function(f,s){for(var t=s._length,i=new Array(t),r=s.z,n=k(r)&&r.length,o=0;o<t;o++){var l=i[o]={},c=s.lon[o],d=s.lat[o];if(l.lonlat=T(c)&&T(d)?[+c,+d]:[a,a],n){var u=r[o];l.z=T(u)?u:a}}return w(f,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:b(f,"lat:")+" ",lon:b(f,"lon:")+" "}}),i}},4629:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(76308),w=e(8932),b=e(39032).BADNUM,f=e(44808).makeBlank;F.exports=function(s){var t=s[0].trace,i=t.visible===!0&&t._length!==0,r=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:f()};if(!i)return r;var n,o=[],l=t.z,c=t.radius,d=k.isArrayOrTypedArray(l)&&l.length,u=k.isArrayOrTypedArray(c);for(n=0;n<s.length;n++){var x=s[n],p=x.lonlat;if(p[0]!==b){var g={};if(d){var m=x.z;g.z=m!==b?m:0}u&&(g.r=T(c[n])&&c[n]>0?+c[n]:0),o.push({type:"Feature",geometry:{type:"Point",coordinates:p},properties:g})}}var y=w.extractOpts(t),v=y.reversescale?w.flipScale(y.colorscale):y.colorscale,_=v[0][1],h=["interpolate",["linear"],["heatmap-density"],0,a.opacity(_)<1?_:a.addOpacity(_,0)];for(n=1;n<v.length;n++)h.push(v[n][0],v[n][1]);var S=["interpolate",["linear"],["get","z"],y.min,0,y.max,1];return k.extendFlat(r.heatmap.paint,{"heatmap-weight":d?S:1/(y.max-y.min),"heatmap-color":h,"heatmap-radius":u?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),r.geojson={type:"FeatureCollection",features:o},r.heatmap.layout.visibility="visible",r}},97664:function(F,C,e){"use strict";var T=e(3400),k=e(27260),a=e(33928);F.exports=function(w,b,f,s){function t(o,l){return T.coerce(w,b,a,o,l)}var i=t("lon")||[],r=t("lat")||[],n=Math.min(i.length,r.length);n?(b._length=n,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(w,b,s,t,{prefix:"",cLetter:"z"})):b.visible=!1}},96176:function(F){"use strict";F.exports=function(C,e){return C.lon=e.lon,C.lat=e.lat,C.z=e.z,C}},25336:function(F,C,e){"use strict";var T=e(54460),k=e(63312).hoverPoints,a=e(63312).getExtraText;F.exports=function(w,b,f){var s=k(w,b,f);if(s){var t=s[0],i=t.cd,r=i[0].trace,n=i[t.index];if(delete t.color,"z"in n){var o=t.subplot.mockAxis;t.z=n.z,t.zLabel=T.tickText(o,o.c2l(n.z),"hover").text}return t.extraText=a(r,n,i[0].t.labels),[t]}}},15088:function(F,C,e){"use strict";F.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(T,k){for(var a=k.getMapLayers(),w=0;w<a.length;w++){var b=a[w],f=b.id;if(b.type==="symbol"&&typeof f=="string"&&f.indexOf("plotly-")===-1)return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(F,C,e){"use strict";var T=e(4629),k=e(47552).traceLayerPrefix;function a(b,f){this.type="densitymapbox",this.subplot=b,this.uid=f,this.sourceId="source-"+f,this.layerList=[["heatmap",k+f+"-heatmap"]],this.below=null}var w=a.prototype;w.update=function(b){var f=this.subplot,s=this.layerList,t=T(b),i=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var r=0;r<s.length;r++){var n=s[r],o=n[0],l=n[1],c=t[o];f.setOptions(l,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&f.setOptions(l,"setPaintProperty",c.paint)}},w._addLayers=function(b,f){for(var s=this.subplot,t=this.layerList,i=this.sourceId,r=0;r<t.length;r++){var n=t[r],o=n[0],l=b[o];s.addLayer({type:o,id:n[1],source:i,layout:l.layout,paint:l.paint},f)}},w._removeLayers=function(){for(var b=this.subplot.map,f=this.layerList,s=f.length-1;s>=0;s--)b.removeLayer(f[s][1])},w.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},F.exports=function(b,f){var s=f[0].trace,t=new a(b,s.uid),i=t.sourceId,r=T(f),n=t.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(i,{type:"geojson",data:r.geojson}),t._addLayers(r,n),t}},74248:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){for(var w=0;w<k.length;w++)k[w].i=w;T.mergeArray(a.text,k,"tx"),T.mergeArray(a.hovertext,k,"htx");var b=a.marker;if(b){T.mergeArray(b.opacity,k,"mo"),T.mergeArray(b.color,k,"mc");var f=b.line;f&&(T.mergeArray(f.color,k,"mlc"),T.mergeArrayCastPositive(f.width,k,"mlw"))}}},20088:function(F,C,e){"use strict";var T,k=e(20832),a=e(52904).line,w=e(45464),b=e(29736).axisHoverFormat,f=e(21776).Ks,s=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,r=e(76308);F.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:f({},{keys:t.eventDataKeys}),hoverinfo:i({},w.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(T=i({},k.marker),delete T.pattern,delete T.cornerradius,T),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},a.color,{dflt:r.defaultLine}),width:i({},a.width,{dflt:0,editType:"plot"}),dash:a.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,zorder:k.zorder}},23096:function(F,C,e){"use strict";var T=e(54460),k=e(1220),a=e(74248),w=e(4500),b=e(39032).BADNUM;function f(s){return s===b?0:s}F.exports=function(s,t){var i,r,n,o,l,c,d,u,x=T.getFromId(s,t.xaxis||"x"),p=T.getFromId(s,t.yaxis||"y");t.orientation==="h"?(i=x.makeCalcdata(t,"x"),n=p.makeCalcdata(t,"y"),o=k(t,p,"y",n),l=!!t.yperiodalignment,c="y"):(i=p.makeCalcdata(t,"y"),n=x.makeCalcdata(t,"x"),o=k(t,x,"x",n),l=!!t.xperiodalignment,c="x"),r=o.vals;var g,m=Math.min(r.length,i.length),y=new Array(m);for(t._base=[],d=0;d<m;d++){i[d]<0&&(i[d]=b);var v=!1;i[d]!==b&&d+1<m&&i[d+1]!==b&&(v=!0),u=y[d]={p:r[d],s:i[d],cNext:v},t._base[d]=-.5*u.s,l&&(y[d].orig_p=n[d],y[d][c+"End"]=o.ends[d],y[d][c+"Start"]=o.starts[d]),t.ids&&(u.id=String(t.ids[d])),d===0&&(y[0].vTotal=0),y[0].vTotal+=f(u.s),u.begR=f(u.s)/f(y[0].s)}for(d=0;d<m;d++)(u=y[d]).s!==b&&(u.sumR=u.s/y[0].vTotal,u.difR=g!==void 0?u.s/g:1,g=u.s);return a(y,t),w(y,t),y}},74732:function(F){"use strict";F.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(F,C,e){"use strict";var T=e(96376).setGroupPositions;F.exports=function(k,a){var w,b,f=k._fullLayout,s=k._fullData,t=k.calcdata,i=a.xaxis,r=a.yaxis,n=[],o=[],l=[];for(b=0;b<s.length;b++){var c=s[b],d=c.orientation==="h";c.visible===!0&&c.xaxis===i._id&&c.yaxis===r._id&&c.type==="funnel"&&(w=t[b],d?l.push(w):o.push(w),n.push(w))}var u={mode:f.funnelmode,norm:f.funnelnorm,gap:f.funnelgap,groupgap:f.funnelgroupgap};for(T(k,i,r,o,u),T(k,r,i,l,u),b=0;b<n.length;b++){w=n[b];for(var x=0;x<w.length;x++)x+1<w.length&&(w[x].nextP0=w[x+1].p0,w[x].nextS0=w[x+1].s0,w[x].nextP1=w[x+1].p1,w[x].nextS1=w[x+1].s1)}}},45432:function(F,C,e){"use strict";var T=e(3400),k=e(20011),a=e(31508).handleText,w=e(43980),b=e(31147),f=e(20088),s=e(76308);F.exports={supplyDefaults:function(t,i,r,n){function o(u,x){return T.coerce(t,i,f,u,x)}if(w(t,i,n,o)){b(t,i,n,o),o("xhoverformat"),o("yhoverformat"),o("orientation",i.y&&!i.x?"v":"h"),o("offset"),o("width");var l=o("text");o("hovertext"),o("hovertemplate");var c=o("textposition");a(t,i,n,o,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||o("textinfo",T.isArrayOrTypedArray(l)?"text+value":"value");var d=o("marker.color",r);o("marker.line.color",s.defaultLine),o("marker.line.width"),o("connector.visible")&&(o("connector.fillcolor",function(u){var x=T.isArrayOrTypedArray(u)?"#000":u;return s.addOpacity(x,.5*s.opacity(x))}(d)),o("connector.line.width")&&(o("connector.line.color"),o("connector.line.dash"))),o("zorder")}else i.visible=!1},crossTraceDefaults:function(t,i){var r,n;function o(c){return T.coerce(n._input,n,f,c)}if(i.funnelmode==="group")for(var l=0;l<t.length;l++)r=(n=t[l])._input,k(r,n,i,o)}}},34580:function(F){"use strict";F.exports=function(C,e){return C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(C.percentInitial=e.percentInitial),"percentPrevious"in e&&(C.percentPrevious=e.percentPrevious),"percentTotal"in e&&(C.percentTotal=e.percentTotal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C}},31488:function(F,C,e){"use strict";var T=e(76308).opacity,k=e(63400).hoverOnBars,a=e(3400).formatPercent;F.exports=function(w,b,f,s,t){var i=k(w,b,f,s,t);if(i){var r=i.cd,n=r[0].trace,o=n.orientation==="h",l=r[i.index];i[(o?"x":"y")+"LabelVal"]=l.s,i.percentInitial=l.begR,i.percentInitialLabel=a(l.begR,1),i.percentPrevious=l.difR,i.percentPreviousLabel=a(l.difR,1),i.percentTotal=l.sumR,i.percentTotalLabel=a(l.sumR,1);var c=l.hi||n.hoverinfo,d=[];if(c&&c!=="none"&&c!=="skip"){var u=c==="all",x=c.split("+"),p=function(g){return u||x.indexOf(g)!==-1};p("percent initial")&&d.push(i.percentInitialLabel+" of initial"),p("percent previous")&&d.push(i.percentPreviousLabel+" of previous"),p("percent total")&&d.push(i.percentTotalLabel+" of total")}return i.extraText=d.join("<br>"),i.color=function(g,m){var y=g.marker,v=m.mc||y.color,_=m.mlc||y.line.color,h=m.mlw||y.line.width;return T(v)?v:T(_)&&h?_:void 0}(n,l),[i]}}},94704:function(F,C,e){"use strict";F.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(F){"use strict";F.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(F,C,e){"use strict";var T=e(3400),k=e(7076);F.exports=function(a,w,b){var f=!1;function s(r,n){return T.coerce(a,w,k,r,n)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="funnel"){f=!0;break}}f&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},42200:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(39032).BADNUM,b=e(98184),f=e(82744).clearMinTextSize;function s(t,i,r,n){var o=[],l=[],c=n?i:r,d=n?r:i;return o[0]=c.c2p(t.s0,!0),l[0]=d.c2p(t.p0,!0),o[1]=c.c2p(t.s1,!0),l[1]=d.c2p(t.p1,!0),o[2]=c.c2p(t.nextS0,!0),l[2]=d.c2p(t.nextP0,!0),o[3]=c.c2p(t.nextS1,!0),l[3]=d.c2p(t.nextP1,!0),n?[o,l]:[l,o]}F.exports=function(t,i,r,n){var o=t._fullLayout;f("funnel",o),function(l,c,d,u){var x=c.xaxis,p=c.yaxis;k.makeTraceGroups(u,d,"trace bars").each(function(g){var m=T.select(this),y=g[0].trace,v=k.ensureSingle(m,"g","regions");if(y.connector&&y.connector.visible){var _=y.orientation==="h",h=v.selectAll("g.region").data(k.identity);h.enter().append("g").classed("region",!0),h.exit().remove();var S=h.size();h.each(function(A,E){if(E===S-1||A.cNext){var P=s(A,x,p,_),I=P[0],D=P[1],z="";I[0]!==w&&D[0]!==w&&I[1]!==w&&D[1]!==w&&I[2]!==w&&D[2]!==w&&I[3]!==w&&D[3]!==w&&(z+=_?"M"+I[0]+","+D[1]+"L"+I[2]+","+D[2]+"H"+I[3]+"L"+I[1]+","+D[1]+"Z":"M"+I[1]+","+D[1]+"L"+I[2]+","+D[3]+"V"+D[2]+"L"+I[1]+","+D[0]+"Z"),z===""&&(z="M0,0Z"),k.ensureSingle(T.select(this),"path").attr("d",z).call(a.setClipUrl,c.layerClipId,l)}})}else v.remove()})}(t,i,r,n),function(l,c,d,u){var x=c.xaxis,p=c.yaxis;k.makeTraceGroups(u,d,"trace bars").each(function(g){var m=T.select(this),y=g[0].trace,v=k.ensureSingle(m,"g","lines");if(y.connector&&y.connector.visible&&y.connector.line.width){var _=y.orientation==="h",h=v.selectAll("g.line").data(k.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var S=h.size();h.each(function(A,E){if(E===S-1||A.cNext){var P=s(A,x,p,_),I=P[0],D=P[1],z="";I[3]!==void 0&&D[3]!==void 0&&(_?(z+="M"+I[0]+","+D[1]+"L"+I[2]+","+D[2],z+="M"+I[1]+","+D[1]+"L"+I[3]+","+D[2]):(z+="M"+I[1]+","+D[1]+"L"+I[2]+","+D[3],z+="M"+I[1]+","+D[0]+"L"+I[2]+","+D[2])),z===""&&(z="M0,0Z"),k.ensureSingle(T.select(this),"path").attr("d",z).call(a.setClipUrl,c.layerClipId,l)}})}else v.remove()})}(t,i,r,n),b.plot(t,i,r,n,{mode:o.funnelmode,norm:o.funnelmode,gap:o.funnelgap,groupgap:o.funnelgroupgap})}},44544:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(76308),w=e(13448).DESELECTDIM,b=e(60100),f=e(82744).resizeText,s=b.styleTextPoints;F.exports={style:function(t,i,r){var n=r||T.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");f(t,n,"funnel"),n.style("opacity",function(o){return o[0].trace.opacity}),n.each(function(o){var l=T.select(this),c=o[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var u=c.marker;T.select(this).call(a.fill,d.mc||u.color).call(a.stroke,d.mlc||u.line.color).call(k.dashLine,u.line.dash,d.mlw||u.line.width).style("opacity",c.selectedpoints&&!d.selected?w:1)}}),s(l,c,t),l.selectAll(".regions").each(function(){T.select(this).selectAll("path").style("stroke-width",0).call(a.fill,c.connector.fillcolor)}),l.selectAll(".lines").each(function(){var d=c.connector.line;k.lineGroupStyle(T.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},22332:function(F,C,e){"use strict";var T=e(74996),k=e(45464),a=e(86968).u,w=e(21776).Ks,b=e(21776).Gw,f=e(92880).extendFlat;F.exports={labels:T.labels,label0:T.label0,dlabel:T.dlabel,values:T.values,marker:{colors:T.marker.colors,line:{color:f({},T.marker.line.color,{dflt:null}),width:f({},T.marker.line.width,{dflt:1}),editType:"calc"},pattern:T.marker.pattern,editType:"calc"},text:T.text,hovertext:T.hovertext,scalegroup:f({},T.scalegroup,{}),textinfo:f({},T.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:f({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:w({},{keys:["label","color","value","text","percent"]}),textposition:f({},T.textposition,{values:["inside","none"],dflt:"inside"}),textfont:T.textfont,insidetextfont:T.insidetextfont,title:{text:T.title.text,font:T.title.font,position:f({},T.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:a({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(F,C,e){"use strict";var T=e(7316);C.name="funnelarea",C.plot=function(k,a,w,b){T.plotBasePlot(C.name,k,a,w,b)},C.clean=function(k,a,w,b){T.cleanBasePlot(C.name,k,a,w,b)}},54e3:function(F,C,e){"use strict";var T=e(45768);F.exports={calc:function(k,a){return T.calc(k,a)},crossTraceCalc:function(k){T.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(F,C,e){"use strict";var T=e(3400),k=e(22332),a=e(86968).Q,w=e(31508).handleText,b=e(74174).handleLabelsAndValues,f=e(74174).handleMarkerDefaults;F.exports=function(s,t,i,r){function n(m,y){return T.coerce(s,t,k,m,y)}var o=n("labels"),l=n("values"),c=b(o,l),d=c.len;if(t._hasLabels=c.hasLabels,t._hasValues=c.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),d){t._length=d,f(s,t,r,n),n("scalegroup");var u,x=n("text"),p=n("texttemplate");if(p||(u=n("textinfo",Array.isArray(x)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),p||u&&u!=="none"){var g=n("textposition");w(s,t,r,n,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else u==="none"&&n("textposition","none");a(t,r,n),n("title.text")&&(n("title.position"),T.coerceFont(n,"title.font",r.font)),n("aspectratio"),n("baseratio")}else t.visible=!1}},62396:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(F,C,e){"use strict";var T=e(85204).hiddenlabels;F.exports={hiddenlabels:T,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(F,C,e){"use strict";var T=e(3400),k=e(61280);F.exports=function(a,w){function b(f,s){return T.coerce(a,w,k,f,s)}b("hiddenlabels"),b("funnelareacolorway",w.colorway),b("extendfunnelareacolors")}},39472:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(3400),w=a.strScale,b=a.strTranslate,f=e(72736),s=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,r=t.clearMinTextSize,n=e(69656),o=e(37820),l=o.attachFxHandlers,c=o.determineInsideTextFont,d=o.layoutAreas,u=o.prerenderTitles,x=o.positionTitleOutside,p=o.formatSliceLabel;function g(m,y){return"l"+(y[0]-m[0])+","+(y[1]-m[1])}F.exports=function(m,y){var v=m._context.staticPlot,_=m._fullLayout;r("funnelarea",_),u(y,m),d(y,_._size),a.makeTraceGroups(_._funnelarealayer,y,"trace").each(function(h){var S=T.select(this),A=h[0],E=A.trace;(function(P){if(P.length){var I=P[0],D=I.trace,z=D.aspectratio,V=D.baseratio;V>.999&&(V=.999);var O,j,Y,B=Math.pow(V,2),U=I.vTotal,q=U,te=U*B/(1-B)/U,ee=[];for(ee.push(ge()),j=P.length-1;j>-1;j--)if(!(Y=P[j]).hidden){var Q=Y.v/q;te+=Q,ee.push(ge())}var J=1/0,K=-1/0;for(j=0;j<ee.length;j++)O=ee[j],J=Math.min(J,O[1]),K=Math.max(K,O[1]);for(j=0;j<ee.length;j++)ee[j][1]-=(K+J)/2;var X=ee[ee.length-1][0],ie=I.r,se=(K-J)/2,ae=ie/X,ue=ie/se*z;for(I.r=ue*se,j=0;j<ee.length;j++)ee[j][0]*=ae,ee[j][1]*=ue;var ve,ye,pe=[-(O=ee[0])[0],O[1]],de=[O[0],O[1]],me=0;for(j=P.length-1;j>-1;j--)if(!(Y=P[j]).hidden){var ke=ee[me+=1][0],Ce=ee[me][1];Y.TL=[-ke,Ce],Y.TR=[ke,Ce],Y.BL=pe,Y.BR=de,Y.pxmid=(ve=Y.TR,ye=Y.BR,[.5*(ve[0]+ye[0]),.5*(ve[1]+ye[1])]),pe=Y.TL,de=Y.TR}}function ge(){var oe,re={x:oe=Math.sqrt(te),y:-oe};return[re.x,re.y]}})(h),S.each(function(){var P=T.select(this).selectAll("g.slice").data(h);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(D,z){if(D.hidden)T.select(this).selectAll("path,g").remove();else{D.pointNumber=D.i,D.curveNumber=E.index;var V=A.cx,O=A.cy,j=T.select(this),Y=j.selectAll("path.surface").data([D]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":v?"none":"all"}),j.call(l,m,h);var B="M"+(V+D.TR[0])+","+(O+D.TR[1])+g(D.TR,D.BR)+g(D.BR,D.BL)+g(D.BL,D.TL)+"Z";Y.attr("d",B),p(m,D,A);var U=n.castOption(E.textposition,D.pts),q=j.selectAll("g.slicetext").data(D.text&&U!=="none"?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var te=a.ensureSingle(T.select(this),"text","",function(ae){ae.attr("data-notex",1)}),ee=a.ensureUniformFontSize(m,c(E,D,_.font));te.text(D.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,ee).call(f.convertToTspans,m);var Q,J,K,X=k.bBox(te.node()),ie=Math.min(D.BL[1],D.BR[1])+O,se=Math.max(D.TL[1],D.TR[1])+O;J=Math.max(D.TL[0],D.BL[0])+V,K=Math.min(D.TR[0],D.BR[0])+V,(Q=s(J,K,ie,se,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ee.size,i(E.type,Q,_),h[z].transform=Q,a.setTransormAndDisplay(te,Q)})}});var I=T.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);I.enter().append("g").classed("titletext",!0),I.exit().remove(),I.each(function(){var D=a.ensureSingle(T.select(this),"text","",function(O){O.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=a.templateString(z,E._meta)),D.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(f.convertToTspans,m);var V=x(A,_._size);D.attr("transform",b(V.x,V.y)+w(Math.min(1,V.scale))+b(V.tx,V.ty))})})})}},62096:function(F,C,e){"use strict";var T=e(33428),k=e(10528),a=e(82744).resizeText;F.exports=function(w){var b=w._fullLayout._funnelarealayer.selectAll(".trace");a(w,b,"funnelarea"),b.each(function(f){var s=f[0].trace,t=T.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){T.select(this).call(k,i,s,w)})})}},83328:function(F,C,e){"use strict";var T=e(52904),k=e(45464),a=e(25376),w=e(29736).axisHoverFormat,b=e(21776).Ks,f=e(21776).Gw,s=e(49084),t=e(92880).extendFlat;F.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},T.x,{impliedEdits:{xtype:"array"}}),x0:t({},T.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},T.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},T.y,{impliedEdits:{ytype:"array"}}),y0:t({},T.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},T.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},T.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},T.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},T.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},T.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},T.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},T.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:b(),texttemplate:f({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:a({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1}),zorder:T.zorder},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},19512:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(54460),w=e(1220),b=e(55480),f=e(47128),s=e(2872),t=e(26136),i=e(70448),r=e(11240),n=e(35744),o=e(39032).BADNUM;function l(c){for(var d=[],u=c.length,x=0;x<u;x++){var p=c[x];p!==o&&d.push(p)}return d}F.exports=function(c,d){var u,x,p,g,m,y,v,_,h,S,A,E=a.getFromId(c,d.xaxis||"x"),P=a.getFromId(c,d.yaxis||"y"),I=T.traceIs(d,"contour"),D=T.traceIs(d,"histogram"),z=T.traceIs(d,"gl2d"),V=I?"best":d.zsmooth;if(E._minDtick=0,P._minDtick=0,D)g=(A=b(c,d)).orig_x,u=A.x,x=A.x0,p=A.dx,_=A.orig_y,m=A.y,y=A.y0,v=A.dy,h=A.z;else{var O=d.z;k.isArray1D(O)?(s(d,E,P,"x","y",["z"]),u=d._x,m=d._y,O=d._z):(g=d.x?E.makeCalcdata(d,"x"):[],_=d.y?P.makeCalcdata(d,"y"):[],u=w(d,E,"x",g).vals,m=w(d,P,"y",_).vals,d._x=u,d._y=m),x=d.x0,p=d.dx,y=d.y0,v=d.dy,h=t(O,d,E,P)}function j(K){V=d._input.zsmooth=d.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+K)}function Y(K){if(K.length>1){var X=(K[K.length-1]-K[0])/(K.length-1),ie=Math.abs(X/100);for(S=0;S<K.length-1;S++)if(Math.abs(K[S+1]-K[S]-X)>ie)return!1}return!0}(E.rangebreaks||P.rangebreaks)&&(h=function(K,X,ie){for(var se=[],ae=-1,ue=0;ue<ie.length;ue++)if(X[ue]!==o){se[++ae]=[];for(var ve=0;ve<ie[ue].length;ve++)K[ve]!==o&&se[ae].push(ie[ue][ve])}return se}(u,m,h),D||(u=l(u),m=l(m),d._x=u,d._y=m)),D||!I&&!d.connectgaps||(d._emptypoints=r(h),i(h,d._emptypoints)),d._islinear=!1,E.type==="log"||P.type==="log"?V==="fast"&&j("log axis found"):Y(u)?Y(m)?d._islinear=!0:V==="fast"&&j("y scale is not linear"):V==="fast"&&j("x scale is not linear");var B=k.maxRowLength(h),U=d.xtype==="scaled"?"":u,q=n(d,U,x,p,B,E),te=d.ytype==="scaled"?"":m,ee=n(d,te,y,v,h.length,P);z||(d._extremes[E._id]=a.findExtremes(E,q),d._extremes[P._id]=a.findExtremes(P,ee));var Q={x:q,y:ee,z:h,text:d._text||d.text,hovertext:d._hovertext||d.hovertext};if(d.xperiodalignment&&g&&(Q.orig_x=g),d.yperiodalignment&&_&&(Q.orig_y=_),U&&U.length===q.length-1&&(Q.xCenter=U),te&&te.length===ee.length-1&&(Q.yCenter=te),D&&(Q.xRanges=A.xRanges,Q.yRanges=A.yRanges,Q.pts=A.pts),I||f(c,d,{vals:h,cLetter:"z"}),I&&d.contours&&d.contours.coloring==="heatmap"){var J={type:d.type==="contour"?"heatmap":"histogram2d",xcalendar:d.xcalendar,ycalendar:d.ycalendar};Q.xfill=n(J,U,x,p,B,E),Q.yfill=n(J,te,y,v,h.length,P)}return[Q]}},26136:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(39032).BADNUM;F.exports=function(w,b,f,s){var t,i,r,n,o,l;function c(m){if(T(m))return+m}if(b&&b.transpose){for(t=0,o=0;o<w.length;o++)t=Math.max(t,w[o].length);if(t===0)return!1;r=function(m){return m.length},n=function(m,y,v){return(m[v]||[])[y]}}else t=w.length,r=function(m,y){return m[y].length},n=function(m,y,v){return(m[y]||[])[v]};var d=function(m,y,v){return y===a||v===a?a:n(m,y,v)};function u(m){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&m&&m.type==="category"&&b["_"+m._id.charAt(0)].length){var y=m._id.charAt(0),v={},_=b["_"+y+"CategoryMap"]||b[y];for(o=0;o<_.length;o++)v[_[o]]=o;return function(h){var S=v[m._categories[h]];return S+1?S:a}}return k.identity}var x=u(f),p=u(s);s&&s.type==="category"&&(t=s._categories.length);var g=new Array(t);for(o=0;o<t;o++)for(i=f&&f.type==="category"?f._categories.length:r(w,o),g[o]=new Array(i),l=0;l<i;l++)g[o][l]=c(d(w,p(o),x(l)));return g}},96288:function(F){"use strict";F.exports={min:"zmin",max:"zmax"}},2872:function(F,C,e){"use strict";var T=e(3400),k=e(39032).BADNUM,a=e(1220);F.exports=function(w,b,f,s,t,i){var r=w._length,n=b.makeCalcdata(w,s),o=f.makeCalcdata(w,t);n=a(w,b,s,n).vals,o=a(w,f,t,o).vals;var l,c,d,u,x=w.text,p=x!==void 0&&T.isArray1D(x),g=w.hovertext,m=g!==void 0&&T.isArray1D(g),y=T.distinctVals(n),v=y.vals,_=T.distinctVals(o),h=_.vals,S=[],A=h.length,E=v.length;for(l=0;l<i.length;l++)S[l]=T.init2dArray(A,E);p&&(d=T.init2dArray(A,E)),m&&(u=T.init2dArray(A,E));var P=T.init2dArray(A,E);for(l=0;l<r;l++)if(n[l]!==k&&o[l]!==k){var I=T.findBin(n[l]+y.minDiff/2,v),D=T.findBin(o[l]+_.minDiff/2,h);for(c=0;c<i.length;c++){var z=w[i[c]];S[c][D][I]=z[l],P[D][I]=l}p&&(d[D][I]=x[l]),m&&(u[D][I]=g[l])}for(w["_"+s]=v,w["_"+t]=h,c=0;c<i.length;c++)w["_"+i[c]]=S[c];p&&(w._text=d),m&&(w._hovertext=u),b&&b.type==="category"&&(w["_"+s+"CategoryMap"]=v.map(function(V){return b._categories[V]})),f&&f.type==="category"&&(w["_"+t+"CategoryMap"]=h.map(function(V){return f._categories[V]})),w._after2before=P}},24480:function(F,C,e){"use strict";var T=e(3400),k=e(51264),a=e(39096),w=e(31147),b=e(82748),f=e(27260),s=e(83328);F.exports=function(t,i,r,n){function o(l,c){return T.coerce(t,i,s,l,c)}k(t,i,o,n)?(w(t,i,n,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hovertemplate"),a(o,n),b(t,i,o,n),o("hoverongaps"),o("connectgaps",T.isArray1D(i.z)&&i.zsmooth!==!1),f(t,i,n,o,{prefix:"",cLetter:"z"}),o("zorder")):i.visible=!1}},11240:function(F,C,e){"use strict";var T=e(3400).maxRowLength;F.exports=function(k){var a,w,b,f,s,t,i,r,n=[],o={},l=[],c=k[0],d=[],u=[0,0,0],x=T(k);for(w=0;w<k.length;w++)for(a=d,d=c,c=k[w+1]||[],b=0;b<x;b++)d[b]===void 0&&((t=(d[b-1]!==void 0?1:0)+(d[b+1]!==void 0?1:0)+(a[b]!==void 0?1:0)+(c[b]!==void 0?1:0))?(w===0&&t++,b===0&&t++,w===k.length-1&&t++,b===d.length-1&&t++,t<4&&(o[[w,b]]=[w,b,t]),n.push([w,b,t])):l.push([w,b]));for(;l.length;){for(i={},r=!1,s=l.length-1;s>=0;s--)(t=((o[[(w=(f=l[s])[0])-1,b=f[1]]]||u)[2]+(o[[w+1,b]]||u)[2]+(o[[w,b-1]]||u)[2]+(o[[w,b+1]]||u)[2])/20)&&(i[f]=[w,b,t],l.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(f in i)o[f]=i[f],n.push(i[f])}return n.sort(function(p,g){return g[2]-p[2]})}},55512:function(F,C,e){"use strict";var T=e(93024),k=e(3400),a=k.isArrayOrTypedArray,w=e(54460),b=e(8932).extractOpts;F.exports=function(f,s,t,i,r){r||(r={});var n,o,l,c,d=r.isContour,u=f.cd[0],x=u.trace,p=f.xa,g=f.ya,m=u.x,y=u.y,v=u.z,_=u.xCenter,h=u.yCenter,S=u.zmask,A=x.zhoverformat,E=m,P=y;if(f.index!==!1){try{l=Math.round(f.index[1]),c=Math.round(f.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",f.index)}if(l<0||l>=v[0].length||c<0||c>v.length)return}else{if(T.inbox(s-m[0],s-m[m.length-1],0)>0||T.inbox(t-y[0],t-y[y.length-1],0)>0)return;if(d){var I;for(E=[2*m[0]-m[1]],I=1;I<m.length;I++)E.push((m[I]+m[I-1])/2);for(E.push([2*m[m.length-1]-m[m.length-2]]),P=[2*y[0]-y[1]],I=1;I<y.length;I++)P.push((y[I]+y[I-1])/2);P.push([2*y[y.length-1]-y[y.length-2]])}l=Math.max(0,Math.min(E.length-2,k.findBin(s,E))),c=Math.max(0,Math.min(P.length-2,k.findBin(t,P)))}var D,z,V=p.c2p(m[l]),O=p.c2p(m[l+1]),j=g.c2p(y[c]),Y=g.c2p(y[c+1]);d?(D=u.orig_x||m,z=u.orig_y||y,O=V,n=D[l],Y=j,o=z[c]):(D=u.orig_x||_||m,z=u.orig_y||h||y,n=_?D[l]:(D[l]+D[l+1])/2,o=h?z[c]:(z[c]+z[c+1])/2,p&&p.type==="category"&&(n=m[l]),g&&g.type==="category"&&(o=y[c]),x.zsmooth&&(V=O=p.c2p(n),j=Y=g.c2p(o)));var B=v[c][l];if(S&&!S[c][l]&&(B=void 0),B!==void 0||x.hoverongaps){var U;a(u.hovertext)&&a(u.hovertext[c])?U=u.hovertext[c][l]:a(u.text)&&a(u.text[c])&&(U=u.text[c][l]);var q=b(x),te={type:"linear",range:[q.min,q.max],hoverformat:A,_separators:p._separators,_numFormat:p._numFormat},ee=w.tickText(te,B,"hover").text;return[k.extendFlat(f,{index:x._after2before?x._after2before[c][l]:[c,l],distance:f.maxHoverDistance,spikeDistance:f.maxSpikeDistance,x0:V,x1:O,y0:j,y1:Y,xLabelVal:n,yLabelVal:o,zLabelVal:B,zLabel:ee,text:U})]}}},81932:function(F,C,e){"use strict";F.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(F,C,e){"use strict";var T=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function a(b){return .5-.25*Math.min(1,.5*b)}function w(b,f,s){var t,i,r,n,o,l,c,d,u,x,p,g,m,y=0;for(n=0;n<f.length;n++){for(i=(t=f[n])[0],r=t[1],p=b[i][r],x=0,u=0,o=0;o<4;o++)(c=b[i+(l=k[o])[0]])&&(d=c[r+l[1]])!==void 0&&(x===0?g=m=d:(g=Math.min(g,d),m=Math.max(m,d)),u++,x+=d);if(u===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][r]=x/u,p===void 0?u<4&&(y=1):(b[i][r]=(1+s)*b[i][r]-s*p,m>g&&(y=Math.max(y,Math.abs(b[i][r]-p)/(m-g))))}return y}F.exports=function(b,f){var s,t=1;for(w(b,f),s=0;s<f.length&&!(f[s][2]<4);s++);for(f=f.slice(s),s=0;s<100&&t>.01;s++)t=w(b,f,a(t));return t>.01&&T.log("interp2d didn't converge quickly",t),b}},39096:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){k("texttemplate");var w=T.extendFlat({},a.font,{color:"auto",size:"auto"});T.coerceFont(k,"textfont",w)}},35744:function(F,C,e){"use strict";var T=e(24040),k=e(3400).isArrayOrTypedArray;F.exports=function(a,w,b,f,s,t){var i,r,n,o=[],l=T.traceIs(a,"contour"),c=T.traceIs(a,"histogram"),d=T.traceIs(a,"gl2d");if(k(w)&&w.length>1&&!c&&t.type!=="category"){var u=w.length;if(!(u<=s))return l?w.slice(0,s):w.slice(0,s+1);if(l||d)o=Array.from(w).slice(0,s);else if(s===1)o=t.type==="log"?[.5*w[0],2*w[0]]:[w[0]-.5,w[0]+.5];else if(t.type==="log"){for(o=[Math.pow(w[0],1.5)/Math.pow(w[1],.5)],n=1;n<u;n++)o.push(Math.sqrt(w[n-1]*w[n]));o.push(Math.pow(w[u-1],1.5)/Math.pow(w[u-2],.5))}else{for(o=[1.5*w[0]-.5*w[1]],n=1;n<u;n++)o.push(.5*(w[n-1]+w[n]));o.push(1.5*w[u-1]-.5*w[u-2])}if(u<s){var x,p=o[o.length-1];if(t.type==="log")for(x=p/o[o.length-2],n=u;n<s;n++)p*=x,o.push(p);else for(x=p-o[o.length-2],n=u;n<s;n++)p+=x,o.push(p)}}else{var g=a[t._id.charAt(0)+"calendar"];for(i=c?t.r2c(b,0,g):k(w)&&w.length===1?w[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,g),r=f||1,n=l||d?0:-.5;n<s;n++)o.push(i+r*n)}return o}},41420:function(F,C,e){"use strict";var T=e(33428),k=e(49760),a=e(24040),w=e(43616),b=e(54460),f=e(3400),s=e(72736),t=e(76688),i=e(76308),r=e(8932).extractOpts,n=e(8932).makeColorScaleFuncFromTrace,o=e(9616),l=e(84284).LINE_SPACING,c=e(9188),d=e(2264).STYLE,u="heatmap-label";function x(v){return v.selectAll("g."+u)}function p(v){x(v).remove()}function g(v,_){var h=_.length-2,S=f.constrain(f.findBin(v,_),0,h),A=_[S],E=_[S+1],P=f.constrain(S+(v-A)/(E-A)-.5,0,h),I=Math.round(P),D=Math.abs(P-I);return P&&P!==h&&D?{bin0:I,frac:D,bin1:Math.round(I+D/(P-I))}:{bin0:I,bin1:I,frac:0}}function m(v,_){var h=_.length-1,S=f.constrain(f.findBin(v,_),0,h),A=_[S],E=(v-A)/(_[S+1]-A)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function y(v,_,h){v[_]=h[0],v[_+1]=h[1],v[_+2]=h[2],v[_+3]=Math.round(255*h[3])}F.exports=function(v,_,h,S){var A=_.xaxis,E=_.yaxis;f.makeTraceGroups(S,h,"hm").each(function(P){var I,D,z,V,O,j,Y,B,U=T.select(this),q=P[0],te=q.trace,ee=te.xgap||0,Q=te.ygap||0,J=q.z,K=q.x,X=q.y,ie=q.xCenter,se=q.yCenter,ae=a.traceIs(te,"contour"),ue=ae?"best":te.zsmooth,ve=J.length,ye=f.maxRowLength(J),pe=!1,de=!1;for(j=0;I===void 0&&j<K.length-1;)I=A.c2p(K[j]),j++;for(j=K.length-1;D===void 0&&j>0;)D=A.c2p(K[j]),j--;for(D<I&&(z=D,D=I,I=z,pe=!0),j=0;V===void 0&&j<X.length-1;)V=E.c2p(X[j]),j++;for(j=X.length-1;O===void 0&&j>0;)O=E.c2p(X[j]),j--;O<V&&(z=V,V=O,O=z,de=!0),ae&&(ie=K,se=X,K=q.xfill,X=q.yfill);var me="default";if(ue?me=ue==="best"?"smooth":"fast":te._islinear&&ee===0&&Q===0&&c()&&(me="fast"),me!=="fast"){var ke=ue==="best"?0:.5;I=Math.max(-ke*A._length,I),D=Math.min((1+ke)*A._length,D),V=Math.max(-ke*E._length,V),O=Math.min((1+ke)*E._length,O)}var Ce,ge,oe=Math.round(D-I),re=Math.round(O-V);if(I>=A._length||D<=0||V>=E._length||O<=0)return U.selectAll("image").data([]).exit().remove(),void p(U);me==="fast"?(Ce=ye,ge=ve):(Ce=oe,ge=re);var fe=document.createElement("canvas");fe.width=Ce,fe.height=ge;var Se,be,we=fe.getContext("2d",{willReadFrequently:!0}),Me=n(te,{noNumericCheck:!0,returnArray:!0});me==="fast"?(Se=pe?function(mr){return ye-1-mr}:f.identity,be=de?function(mr){return ve-1-mr}:f.identity):(Se=function(mr){return f.constrain(Math.round(A.c2p(K[mr])-I),0,oe)},be=function(mr){return f.constrain(Math.round(E.c2p(X[mr])-V),0,re)});var Pe,De,he,_e,Ae=be(0),Oe=[Ae,Ae],Ee=pe?0:1,Be=de?0:1,Ve=0,Ze=0,it=0,at=0;function gt(mr,en){if(mr!==void 0){var rn=Me(mr);return rn[0]=Math.round(rn[0]),rn[1]=Math.round(rn[1]),rn[2]=Math.round(rn[2]),Ve+=en,Ze+=rn[0]*en,it+=rn[1]*en,at+=rn[2]*en,rn}return[0,0,0,0]}function yt(mr,en,rn,En){var gn=mr[rn.bin0];if(gn===void 0)return gt(void 0,1);var Dn,qn=mr[rn.bin1],Vn=en[rn.bin0],Jn=en[rn.bin1],xr=qn-gn||0,Jt=Vn-gn||0;return Dn=qn===void 0?Jn===void 0?0:Vn===void 0?2*(Jn-gn):2*(2*Jn-Vn-gn)/3:Jn===void 0?Vn===void 0?0:2*(2*gn-qn-Vn)/3:Vn===void 0?2*(2*Jn-qn-gn)/3:Jn+gn-qn-Vn,gt(gn+rn.frac*xr+En.frac*(Jt+rn.frac*Dn))}if(me!=="default"){var pt,et=0;try{pt=new Uint8Array(Ce*ge*4)}catch{pt=new Array(Ce*ge*4)}if(me==="smooth"){var $e,At,Ot,Rt=ie||K,Ct=se||X,Ge=new Array(Rt.length),Xe=new Array(Ct.length),Ne=new Array(oe),Ye=ie?m:g,ot=se?m:g;for(j=0;j<Rt.length;j++)Ge[j]=Math.round(A.c2p(Rt[j])-I);for(j=0;j<Ct.length;j++)Xe[j]=Math.round(E.c2p(Ct[j])-V);for(j=0;j<oe;j++)Ne[j]=Ye(j,Ge);for(Y=0;Y<re;Y++)for(At=J[($e=ot(Y,Xe)).bin0],Ot=J[$e.bin1],j=0;j<oe;j++,et+=4)y(pt,et,_e=yt(At,Ot,Ne[j],$e))}else for(Y=0;Y<ve;Y++)for(he=J[Y],Oe=be(Y),j=0;j<ye;j++)_e=gt(he[j],1),y(pt,et=4*(Oe*ye+Se(j)),_e);var nt=we.createImageData(Ce,ge);try{nt.data.set(pt)}catch{var ze=nt.data,Fe=ze.length;for(Y=0;Y<Fe;Y++)ze[Y]=pt[Y]}we.putImageData(nt,0,0)}else{var rt=Math.floor(ee/2),We=Math.floor(Q/2);for(Y=0;Y<ve;Y++)if(he=J[Y],Oe.reverse(),Oe[Be]=be(Y+1),Oe[0]!==Oe[1]&&Oe[0]!==void 0&&Oe[1]!==void 0)for(Pe=[De=Se(0),De],j=0;j<ye;j++)Pe.reverse(),Pe[Ee]=Se(j+1),Pe[0]!==Pe[1]&&Pe[0]!==void 0&&Pe[1]!==void 0&&(_e=gt(he[j],(Pe[1]-Pe[0])*(Oe[1]-Oe[0])),we.fillStyle="rgba("+_e.join(",")+")",we.fillRect(Pe[0]+rt,Oe[0]+We,Pe[1]-Pe[0]-ee,Oe[1]-Oe[0]-Q))}Ze=Math.round(Ze/Ve),it=Math.round(it/Ve),at=Math.round(at/Ve);var ft=k("rgb("+Ze+","+it+","+at+")");v._hmpixcount=(v._hmpixcount||0)+Ve,v._hmlumcount=(v._hmlumcount||0)+Ve*ft.getLuminance();var mt=U.selectAll("image").data(P);mt.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),mt.attr({height:re,width:oe,x:I,y:V,"xlink:href":fe.toDataURL("image/png")}),me!=="fast"||ue||mt.attr("style",d),p(U);var vt=te.texttemplate;if(vt){var ut=r(te),Mt={type:"linear",range:[ut.min,ut.max],_separators:A._separators,_numFormat:A._numFormat},bt=te.type==="histogram2dcontour",St=te.type==="contour",Pt=St?ve-1:ve,Dt=St?1:0,Ft=St?ye-1:ye,Xt=[];for(j=St?1:0;j<Pt;j++){var an;if(St)an=q.y[j];else if(bt){if(j===0||j===ve-1)continue;an=q.y[j]}else if(q.yCenter)an=q.yCenter[j];else{if(j+1===ve&&q.y[j+1]===void 0)continue;an=(q.y[j]+q.y[j+1])/2}var Ht=Math.round(E.c2p(an));if(!(0>Ht||Ht>E._length))for(Y=Dt;Y<Ft;Y++){var Zt;if(St)Zt=q.x[Y];else if(bt){if(Y===0||Y===ye-1)continue;Zt=q.x[Y]}else if(q.xCenter)Zt=q.xCenter[Y];else{if(Y+1===ye&&q.x[Y+1]===void 0)continue;Zt=(q.x[Y]+q.x[Y+1])/2}var jt=Math.round(A.c2p(Zt));if(!(0>jt||jt>A._length)){var Pn=t({x:Zt,y:an},te,v._fullLayout);Pn.x=Zt,Pn.y=an;var Tn=q.z[j][Y];Tn===void 0?(Pn.z="",Pn.zLabel=""):(Pn.z=Tn,Pn.zLabel=b.tickText(Mt,Tn,"hover").text);var mn=q.text&&q.text[j]&&q.text[j][Y];mn!==void 0&&mn!==!1||(mn=""),Pn.text=mn;var Qt=f.texttemplateString(vt,Pn,v._fullLayout._d3locale,Pn,te._meta||{});if(Qt){var un=Qt.split("<br>"),nn=un.length,hn=0;for(B=0;B<nn;B++)hn=Math.max(hn,un[B].length);Xt.push({l:nn,c:hn,t:Qt,x:jt,y:Ht,z:Tn})}}}}var bn=te.textfont,wn=bn.size,Cn=v._fullLayout.font.size;if(!wn||wn==="auto"){var Ln=1/0,Mn=1/0,jn=0,Rn=0;for(B=0;B<Xt.length;B++){var Qn=Xt[B];if(jn=Math.max(jn,Qn.l),Rn=Math.max(Rn,Qn.c),B<Xt.length-1){var Yn=Xt[B+1],ar=Math.abs(Yn.x-Qn.x),Kn=Math.abs(Yn.y-Qn.y);ar&&(Ln=Math.min(Ln,ar)),Kn&&(Mn=Math.min(Mn,Kn))}}isFinite(Ln)&&isFinite(Mn)?(Ln-=ee,Mn-=Q,Ln/=Rn,Mn/=jn,Ln/=l/2,Mn/=l,wn=Math.min(Math.floor(Ln),Math.floor(Mn),Cn)):wn=Cn}if(wn<=0||!isFinite(wn))return;x(U).data(Xt).enter().append("g").classed(u,1).append("text").attr("text-anchor","middle").each(function(mr){var en=T.select(this),rn=bn.color;rn&&rn!=="auto"||(rn=i.contrast(mr.z===void 0?v._fullLayout.plot_bgcolor:"rgba("+Me(mr.z).join()+")")),en.attr("data-notex",1).call(s.positionText,function(En){return En.x}(mr),function(En){return En.y-wn*(En.l*l/2-1)}(mr)).call(w.font,{family:bn.family,size:wn,color:rn,weight:bn.weight,style:bn.style,variant:bn.variant,textcase:bn.textcase,lineposition:bn.lineposition,shadow:bn.shadow}).text(mr.t).call(s.convertToTspans,v)})}})}},41648:function(F,C,e){"use strict";var T=e(33428);F.exports=function(k){T.select(k).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},82748:function(F){"use strict";F.exports=function(C,e,T){T("zsmooth")===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},51264:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(24040);function w(b,f){var s=f(b);return(s?f(b+"type","array"):"scaled")==="scaled"&&(f(b+"0"),f("d"+b)),s}F.exports=function(b,f,s,t,i,r){var n,o,l=s("z");if(i=i||"x",r=r||"y",l===void 0||!l.length)return 0;if(k.isArray1D(l)){n=s(i),o=s(r);var c=k.minRowLength(n),d=k.minRowLength(o);if(c===0||d===0)return 0;f._length=Math.min(c,d,l.length)}else{if(n=w(i,s),o=w(r,s),!function(u){for(var x,p=!0,g=!1,m=!1,y=0;y<u.length;y++){if(x=u[y],!k.isArrayOrTypedArray(x)){p=!1;break}x.length>0&&(g=!0);for(var v=0;v<x.length;v++)if(T(x[v])){m=!0;break}}return p&&g&&m}(l))return 0;s("transpose"),f._length=null}return b.type==="heatmapgl"||a.getComponentMethod("calendars","handleTraceDefaults")(b,f,[i,r],t),!0}},74512:function(F,C,e){"use strict";for(var T=e(83328),k=e(49084),a=e(92880).extendFlat,w=e(67824).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],f={},s=0;s<b.length;s++){var t=b[s];f[t]=T[t]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},a(f,k("",{cLetter:"z",autoColorDflt:!1})),F.exports=w(f,"calc","nested")},84656:function(F,C,e){"use strict";var T=e(67792).gl_heatmap2d,k=e(54460),a=e(43080);function w(f,s){this.scene=f,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=T(f.glplot,this.options),this.heatmap._trace=this}var b=w.prototype;b.handlePick=function(f){var s=this.options,t=s.shape,i=f.pointId,r=i%t[0],n=Math.floor(i/t[0]),o=i;return{trace:this,dataCoord:f.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[o]],textLabel:this.textLabels[i],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},b.update=function(f,s){var t=s[0];this.index=f.index,this.name=f.name,this.hoverinfo=f.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var r=i[0].length,n=i.length;this.options.shape=[r,n],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=f.zsmooth;var o=function(x){for(var p=x.colorscale,g=x.zmin,m=x.zmax,y=p.length,v=new Array(y),_=new Array(4*y),h=0;h<y;h++){var S=p[h],A=a(S[1]);v[h]=g+S[0]*(m-g);for(var E=0;E<4;E++)_[4*h+E]=A[E]}return{colorLevels:v,colorValues:_}}(f);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],f.text),this.heatmap.update(this.options);var l,c,d=this.scene.xaxis,u=this.scene.yaxis;f.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},c={ppad:t.y[1]-t.y[0]}),f._extremes[d._id]=k.findExtremes(d,t.x,l),f._extremes[u._id]=k.findExtremes(u,t.y,c)},b.dispose=function(){this.heatmap.dispose()},F.exports=function(f,s,t){var i=new w(f,s.uid);return i.update(s,t),i}},86464:function(F,C,e){"use strict";var T=e(3400),k=e(51264),a=e(27260),w=e(74512);F.exports=function(b,f,s,t){function i(r,n){return T.coerce(b,f,w,r,n)}k(b,f,i,t)?(i("text"),i("zsmooth"),a(b,f,t,i,{prefix:"",cLetter:"z"})):f.visible=!1}},45536:function(F,C,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),F.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(F,C,e){"use strict";var T=e(20832),k=e(29736).axisHoverFormat,a=e(21776).Ks,w=e(21776).Gw,b=e(25376),f=e(11120),s=e(73316),t=e(92880).extendFlat;F.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},T.text,{}),hovertext:t({},T.hovertext,{}),orientation:T.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:f("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:f("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({},{keys:s.eventDataKeys}),texttemplate:w({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},T.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:T.insidetextanchor,textangle:T.textangle,cliponaxis:T.cliponaxis,constraintext:T.constraintext,marker:T.marker,offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,_deprecated:{bardir:T._deprecated.bardir},zorder:T.zorder}},2e3:function(F){"use strict";F.exports=function(C,e){for(var T=C.length,k=0,a=0;a<T;a++)e[a]?(C[a]/=e[a],k+=C[a]):C[a]=null;return k}},11120:function(F){"use strict";F.exports=function(C,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(F,C,e){"use strict";var T=e(38248);F.exports={count:function(k,a,w){return w[k]++,1},sum:function(k,a,w,b){var f=b[a];return T(f)?(f=Number(f),w[k]+=f,f):0},avg:function(k,a,w,b,f){var s=b[a];return T(s)&&(s=Number(s),w[k]+=s,f[k]++),0},min:function(k,a,w,b){var f=b[a];if(T(f)){if(f=Number(f),!T(w[k]))return w[k]=f,f;if(w[k]>f){var s=f-w[k];return w[k]=f,s}}return 0},max:function(k,a,w,b){var f=b[a];if(T(f)){if(f=Number(f),!T(w[k]))return w[k]=f,f;if(w[k]<f){var s=f-w[k];return w[k]=f,s}}return 0}}},67712:function(F,C,e){"use strict";var T=e(39032),k=T.ONEAVGYEAR,a=T.ONEAVGMONTH,w=T.ONEDAY,b=T.ONEHOUR,f=T.ONEMIN,s=T.ONESEC,t=e(54460).tickIncrement;function i(l,c,d,u){if(l*c<=0)return 1/0;for(var x=Math.abs(c-l),p=d.type==="date",g=r(x,p),m=0;m<10;m++){var y=r(80*g,p);if(g===y||!n(y,l,c,p,d,u))break;g=y}return g}function r(l,c){return c&&l>s?l>w?l>1.1*k?k:l>1.1*a?a:w:l>b?b:l>f?f:s:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function n(l,c,d,u,x,p){if(u&&l>w){var g=o(c,x,p),m=o(d,x,p),y=l===k?0:1;return g[y]!==m[y]}return Math.floor(d/l)-Math.floor(c/l)>.1}function o(l,c,d){var u=c.c2d(l,k,d).split("-");return u[0]===""&&(u.unshift(),u[0]="-"+u[0]),u}F.exports=function(l,c,d,u,x){var p,g,m=-1.1*c,y=-.1*c,v=l-y,_=d[0],h=d[1],S=Math.min(i(_+y,_+v,u,x),i(h+y,h+v,u,x)),A=Math.min(i(_+m,_+y,u,x),i(h+m,h+y,u,x));if(S>A&&A<Math.abs(h-_)/4e3?(p=S,g=!1):(p=Math.min(S,A),g=!0),u.type==="date"&&p>w){var E=p===k?1:6,P=p===k?"M12":"M1";return function(I,D){var z=u.c2d(I,k,x),V=z.indexOf("-",E);V>0&&(z=z.substr(0,V));var O=u.d2c(z,0,x);if(O<I){var j=t(O,P,!1,x);(O+j)/2<I+l&&(O=j)}return D&&g?t(O,P,!0,x):O}}return function(I,D){var z=p*Math.round(I/p);return z+p/10<I&&z+.9*p<I+l&&(z+=p),D&&g&&(z-=p),z}}},35852:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(24040),w=e(54460),b=e(84664),f=e(16964),s=e(10648),t=e(2e3),i=e(67712);function r(n,o,l,c,d){var u,x,p,g,m,y,v,_=c+"bins",h=n._fullLayout,S=o["_"+c+"bingroup"],A=h._histogramBinOpts[S],E=h.barmode==="overlay",P=function(de){return l.r2c(de,0,g)},I=function(de){return l.c2r(de,0,g)},D=l.type==="date"?function(de){return de||de===0?k.cleanDate(de,null,g):null}:function(de){return T(de)?Number(de):null};function z(de,me,ke){me[de+"Found"]?(me[de]=D(me[de]),me[de]===null&&(me[de]=ke[de])):(y[de]=me[de]=ke[de],k.nestedProperty(x[0],_+"."+de).set(ke[de]))}if(o["_"+c+"autoBinFinished"])delete o["_"+c+"autoBinFinished"];else{x=A.traces;var V=[],O=!0,j=!1,Y=!1;for(u=0;u<x.length;u++)if((p=x[u]).visible){var B=A.dirs[u];m=p["_"+B+"pos0"]=l.makeCalcdata(p,B),V=k.concat(V,m),delete p["_"+c+"autoBinFinished"],o.visible===!0&&(O?O=!1:(delete p._autoBin,p["_"+c+"autoBinFinished"]=1),a.traceIs(p,"2dMap")&&(j=!0),p.type==="histogram2dcontour"&&(Y=!0))}g=x[0][c+"calendar"];var U=w.autoBin(V,l,A.nbins,j,g,A.sizeFound&&A.size),q=x[0]._autoBin={};if(y=q[A.dirs[0]]={},Y&&(A.size||(U.start=I(w.tickIncrement(P(U.start),U.size,!0,g))),A.end===void 0&&(U.end=I(w.tickIncrement(P(U.end),U.size,!1,g)))),E&&!a.traceIs(o,"2dMap")&&U._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&o.bingroup===""&&o.xbins===void 0){if(d)return[U,m,!0];U=function(de,me,ke,Ce,ge){var oe,re,fe,Se=de._fullLayout,be=function(Ze,it){for(var at=it.xaxis,gt=it.yaxis,yt=it.orientation,pt=[],et=Ze._fullData,$e=0;$e<et.length;$e++){var At=et[$e];At.type==="histogram"&&At.visible===!0&&At.orientation===yt&&At.xaxis===at&&At.yaxis===gt&&pt.push(At)}return pt}(de,me),we=!1,Me=1/0,Pe=[me];for(oe=0;oe<be.length;oe++)if((re=be[oe])===me)we=!0;else if(we){var De=r(de,re,ke,Ce,!0),he=De[0],_e=De[2];re["_"+Ce+"autoBinFinished"]=1,re["_"+Ce+"pos0"]=De[1],_e?Pe.push(re):Me=Math.min(Me,he.size)}else fe=Se._histogramBinOpts[re["_"+Ce+"bingroup"]],Me=Math.min(Me,fe.size||re[ge].size);var Ae=new Array(Pe.length);for(oe=0;oe<Pe.length;oe++)for(var Oe=Pe[oe]["_"+Ce+"pos0"],Ee=0;Ee<Oe.length;Ee++)if(Oe[Ee]!==void 0){Ae[oe]=Oe[Ee];break}for(isFinite(Me)||(Me=k.distinctVals(Ae).minDiff),oe=0;oe<Pe.length;oe++){var Be=(re=Pe[oe])[Ce+"calendar"],Ve={start:ke.c2r(Ae[oe]-Me/2,0,Be),end:ke.c2r(Ae[oe]+Me/2,0,Be),size:Me};re._input[ge]=re[ge]=Ve,(fe=Se._histogramBinOpts[re["_"+Ce+"bingroup"]])&&k.extendFlat(fe,Ve)}return me[ge]}(n,o,l,c,_)}(v=p.cumulative||{}).enabled&&v.currentbin!=="include"&&(v.direction==="decreasing"?U.start=I(w.tickIncrement(P(U.start),U.size,!0,g)):U.end=I(w.tickIncrement(P(U.end),U.size,!1,g))),A.size=U.size,A.sizeFound||(y.size=U.size,k.nestedProperty(x[0],_+".size").set(U.size)),z("start",A,U),z("end",A,U)}m=o["_"+c+"pos0"],delete o["_"+c+"pos0"];var te=o._input[_]||{},ee=k.extendFlat({},A),Q=A.start,J=l.r2l(te.start),K=J!==void 0;if((A.startFound||K)&&J!==l.r2l(Q)){var X=K?J:k.aggNums(Math.min,null,m),ie={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:A.size,tick0:Q,calendar:g,range:[X,w.tickIncrement(X,A.size,!1,g)].map(l.l2r)},se=w.tickFirst(ie);se>l.r2l(X)&&(se=w.tickIncrement(se,A.size,!0,g)),ee.start=l.l2r(se),K||k.nestedProperty(o,_+".start").set(ee.start)}var ae=A.end,ue=l.r2l(te.end),ve=ue!==void 0;if((A.endFound||ve)&&ue!==l.r2l(ae)){var ye=ve?ue:k.aggNums(Math.max,null,m);ee.end=l.l2r(ye),ve||k.nestedProperty(o,_+".start").set(ee.end)}var pe="autobin"+c;return o._input[pe]===!1&&(o._input[_]=k.extendFlat({},o[_]||{}),delete o._input[pe],delete o[pe]),[ee,m]}F.exports={calc:function(n,o){var l,c,d,u,x=[],p=[],g=o.orientation==="h",m=w.getFromId(n,g?o.yaxis:o.xaxis),y=g?"y":"x",v={x:"y",y:"x"}[y],_=o[y+"calendar"],h=o.cumulative,S=r(n,o,m,y),A=S[0],E=S[1],P=typeof A.size=="string",I=[],D=P?I:A,z=[],V=[],O=[],j=0,Y=o.histnorm,B=o.histfunc,U=Y.indexOf("density")!==-1;h.enabled&&U&&(Y=Y.replace(/ ?density$/,""),U=!1);var q,te=B==="max"||B==="min"?null:0,ee=f.count,Q=s[Y],J=!1,K=function(re){return m.r2c(re,0,_)};for(k.isArrayOrTypedArray(o[v])&&B!=="count"&&(q=o[v],J=B==="avg",ee=f[B]),l=K(A.start),d=K(A.end)+(l-w.tickIncrement(l,A.size,!1,_))/1e6;l<d&&x.length<1e6&&(c=w.tickIncrement(l,A.size,!1,_),x.push((l+c)/2),p.push(te),O.push([]),I.push(l),U&&z.push(1/(c-l)),J&&V.push(0),!(c<=l));)l=c;I.push(l),P||m.type!=="date"||(D={start:K(D.start),end:K(D.end),size:D.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var X=o["_"+y+"bingroup"],ie={leftGap:1/0,rightGap:1/0};X&&(n._fullLayout._roundFnOpts[X]||(n._fullLayout._roundFnOpts[X]=ie),ie=n._fullLayout._roundFnOpts[X]);var se,ae=p.length,ue=!0,ve=ie.leftGap,ye=ie.rightGap,pe={};for(l=0;l<E.length;l++){var de=E[l];(u=k.findBin(de,D))>=0&&u<ae&&(j+=ee(u,l,p,q,V),ue&&O[u].length&&de!==E[O[u][0]]&&(ue=!1),O[u].push(l),pe[l]=u,ve=Math.min(ve,de-I[u]),ye=Math.min(ye,I[u+1]-de))}ie.leftGap=ve,ie.rightGap=ye,ue||(se=function(re,fe){return function(){var Se=n._fullLayout._roundFnOpts[X];return i(Se.leftGap,Se.rightGap,I,m,_)(re,fe)}}),J&&(j=t(p,V)),Q&&Q(p,j,z),h.enabled&&function(re,fe,Se){var be,we,Me;function Pe(he){Me=re[he],re[he]/=2}function De(he){we=re[he],re[he]=Me+we/2,Me+=we}if(Se==="half")if(fe==="increasing")for(Pe(0),be=1;be<re.length;be++)De(be);else for(Pe(re.length-1),be=re.length-2;be>=0;be--)De(be);else if(fe==="increasing"){for(be=1;be<re.length;be++)re[be]+=re[be-1];Se==="exclude"&&(re.unshift(0),re.pop())}else{for(be=re.length-2;be>=0;be--)re[be]+=re[be+1];Se==="exclude"&&(re.push(0),re.shift())}}(p,h.direction,h.currentbin);var me=Math.min(x.length,p.length),ke=[],Ce=0,ge=me-1;for(l=0;l<me;l++)if(p[l]){Ce=l;break}for(l=me-1;l>=Ce;l--)if(p[l]){ge=l;break}for(l=Ce;l<=ge;l++)if(T(x[l])&&T(p[l])){var oe={p:x[l],s:p[l],b:0};h.enabled||(oe.pts=O[l],ue?oe.ph0=oe.ph1=O[l].length?E[O[l][0]]:x[l]:(o._computePh=!0,oe.ph0=se(I[l]),oe.ph1=se(I[l+1],!0))),ke.push(oe)}return ke.length===1&&(ke[0].width1=w.tickIncrement(ke[0].p,A.size,!1,_)-ke[0].p),b(ke,o),k.isArrayOrTypedArray(o.selectedpoints)&&k.tagSelected(ke,o,pe),ke},calcAllAutoBins:r}},73316:function(F){"use strict";F.exports={eventDataKeys:["binNumber"]}},80536:function(F,C,e){"use strict";var T=e(3400),k=e(79811),a=e(24040).traceIs,w=e(20011),b=e(31508).validateCornerradius,f=T.nestedProperty,s=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];F.exports=function(r,n){var o,l,c,d,u,x,p,g=n._histogramBinOpts={},m=[],y={},v=[];function _(te,ee){return T.coerce(o._input,o,o._module.attributes,te,ee)}function h(te){return te.orientation==="v"?"x":"y"}function S(te,ee,Q){var J=te.uid+"__"+Q;ee||(ee=J);var K=function(ae,ue){return k.getFromTrace({_fullLayout:n},ae,ue).type}(te,Q),X=te[Q+"calendar"]||"",ie=g[ee],se=!0;ie&&(K===ie.axType&&X===ie.calendar?(se=!1,ie.traces.push(te),ie.dirs.push(Q)):(ee=J,K!==ie.axType&&T.warn(["Attempted to group the bins of trace",te.index,"set on a","type:"+K,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),X!==ie.calendar&&T.warn(["Attempted to group the bins of trace",te.index,"set with a",X,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),se&&(g[ee]={traces:[te],dirs:[Q],axType:K,calendar:te[Q+"calendar"]||""}),te["_"+Q+"bingroup"]=ee}for(u=0;u<r.length;u++)if(o=r[u],a(o,"histogram")){if(m.push(o),delete o._xautoBinFinished,delete o._yautoBinFinished,o.type==="histogram"){var A=_("marker.cornerradius",n.barcornerradius);o.marker&&(o.marker.cornerradius=b(A))}a(o,"2dMap")||w(o._input,o,n,_)}var E=n._alignmentOpts||{};for(u=0;u<m.length;u++){if(o=m[u],c="",!a(o,"2dMap")){if(d=h(o),n.barmode==="group"&&o.alignmentgroup){var P=o[d+"axis"],I=s(n,P)+o.orientation;(E[I]||{})[o.alignmentgroup]&&(c=I)}c||n.barmode==="overlay"||(c=s(n,o.xaxis)+s(n,o.yaxis)+h(o))}c?(y[c]||(y[c]=[]),y[c].push(o)):v.push(o)}for(c in y)if((l=y[c]).length!==1){var D=!1;for(l.length&&(o=l[0],D=_("bingroup")),c=D||c,u=0;u<l.length;u++){var z=(o=l[u])._input.bingroup;z&&z!==c&&T.warn(["Trace",o.index,"must match","within bingroup",c+".","Ignoring its bingroup:",z,"setting."].join(" ")),o.bingroup=c,S(o,c,h(o))}}else v.push(l[0]);for(u=0;u<v.length;u++){o=v[u];var V=_("bingroup");if(a(o,"2dMap"))for(p=0;p<2;p++){var O=_((d=i[p])+"bingroup",V?V+"__"+d:null);S(o,O,d)}else S(o,V,h(o))}for(c in g){var j=g[c];for(l=j.traces,x=0;x<t.length;x++){var Y,B,U=t[x],q=U.name;if(q!=="nbins"||!j.sizeFound){for(u=0;u<l.length;u++){if(o=l[u],d=j.dirs[u],Y=U.aStr[d],f(o._input,Y).get()!==void 0){j[q]=_(Y),j[q+"Found"]=!0;break}(B=(o._autoBin||{})[d]||{})[q]&&f(o,Y).set(B[q])}if(q==="start"||q==="end")for(;u<l.length;u++)(o=l[u])["_"+d+"bingroup"]&&_(Y,(B=(o._autoBin||{})[d]||{})[q]);q!=="nbins"||j.sizeFound||j.nbinsFound||(o=l[0],j[q]=_(Y))}}}}},6616:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(76308),w=e(31508).handleText,b=e(55592),f=e(40196);F.exports=function(s,t,i,r){function n(y,v){return k.coerce(s,t,f,y,v)}var o=n("x"),l=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var c=n("textposition");w(s,t,r,n,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var d=n("orientation",l&&!o?"h":"v"),u=d==="v"?"x":"y",x=d==="v"?"y":"x",p=o&&l?Math.min(k.minRowLength(o)&&k.minRowLength(l)):k.minRowLength(t[u]||[]);if(p){t._length=p,T.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],r),t[x]&&n("histfunc"),n("histnorm"),n("autobin"+u),b(s,t,n,i,r),k.coerceSelectionMarkerOpacity(t,n);var g=(t.marker.line||{}).color,m=T.getComponentMethod("errorbars","supplyDefaults");m(s,t,g||a.defaultLine,{axis:"y"}),m(s,t,g||a.defaultLine,{axis:"x",inherit:"y"}),n("zorder")}else t.visible=!1}},84980:function(F){"use strict";F.exports=function(C,e,T,k,a){if(C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(C.z=e.zLabelVal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),!(T.cumulative||{}).enabled){var w,b=Array.isArray(a)?k[0].pts[a[0]][a[1]]:k[a].pts;if(C.pointNumbers=b,C.binNumber=C.pointNumber,delete C.pointNumber,delete C.pointIndex,T._indexToPoints){w=[];for(var f=0;f<b.length;f++)w=w.concat(T._indexToPoints[b[f]])}else w=b;C.pointIndices=w}return C}},43339:function(F,C,e){"use strict";var T=e(63400).hoverPoints,k=e(54460).hoverLabelText;F.exports=function(a,w,b,f,s){var t=T(a,w,b,f,s);if(t){var i=(a=t[0]).cd[a.index],r=a.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";a[n+"Label"]=k(a[n+"a"],[i.ph0,i.ph1],r[n+"hoverformat"])}return t}}},42600:function(F,C,e){"use strict";F.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(F){"use strict";F.exports={percent:function(C,e){for(var T=C.length,k=100/e,a=0;a<T;a++)C[a]*=k},probability:function(C,e){for(var T=C.length,k=0;k<T;k++)C[k]/=e},density:function(C,e,T,k){var a=C.length;k=k||1;for(var w=0;w<a;w++)C[w]*=T[w]*k},"probability density":function(C,e,T,k){var a=C.length;k&&(e/=k);for(var w=0;w<a;w++)C[w]*=T[w]/e}}},37008:function(F,C,e){"use strict";var T=e(40196),k=e(11120),a=e(83328),w=e(45464),b=e(29736).axisHoverFormat,f=e(21776).Ks,s=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;F.exports=i({x:T.x,y:T.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:k("x"),nbinsy:T.nbinsy,ybins:k("y"),autobinx:T.autobinx,autobiny:T.autobiny,bingroup:i({},T.bingroup,{}),xbingroup:i({},T.bingroup,{}),ybingroup:i({},T.bingroup,{}),xgap:a.xgap,ygap:a.ygap,zsmooth:a.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:f({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:a.textfont,showlegend:i({},w.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(16964),w=e(10648),b=e(2e3),f=e(67712),s=e(35852).calcAllAutoBins;function t(n,o,l,c){var d,u=new Array(n);if(c)for(d=0;d<n;d++)u[d]=1/(o[d+1]-o[d]);else{var x=1/l;for(d=0;d<n;d++)u[d]=x}return u}function i(n,o){return{start:n(o.start),end:n(o.end),size:o.size}}function r(n,o,l,c,d,u){var x,p=n.length-1,g=new Array(p),m=f(l,c,n,d,u);for(x=0;x<p;x++){var y=(o||[])[x];g[x]=y===void 0?[m(n[x]),m(n[x+1],!0)]:[y,y]}return g}F.exports=function(n,o){var l,c,d,u,x=k.getFromId(n,o.xaxis),p=k.getFromId(n,o.yaxis),g=o.xcalendar,m=o.ycalendar,y=function(gt){return x.r2c(gt,0,g)},v=function(gt){return p.r2c(gt,0,m)},_=s(n,o,x,"x"),h=_[0],S=_[1],A=s(n,o,p,"y"),E=A[0],P=A[1],I=o._length;S.length>I&&S.splice(I,S.length-I),P.length>I&&P.splice(I,P.length-I);var D=[],z=[],V=[],O=typeof h.size=="string",j=typeof E.size=="string",Y=[],B=[],U=O?Y:h,q=j?B:E,te=0,ee=[],Q=[],J=o.histnorm,K=o.histfunc,X=J.indexOf("density")!==-1,ie=K==="max"||K==="min"?null:0,se=a.count,ae=w[J],ue=!1,ve=[],ye=[],pe="z"in o?o.z:"marker"in o&&Array.isArray(o.marker.color)?o.marker.color:"";pe&&K!=="count"&&(ue=K==="avg",se=a[K]);var de=h.size,me=y(h.start),ke=y(h.end)+(me-k.tickIncrement(me,de,!1,g))/1e6;for(l=me;l<ke;l=k.tickIncrement(l,de,!1,g))z.push(ie),Y.push(l),ue&&V.push(0);Y.push(l);var Ce,ge=z.length,oe=(l-me)/ge,re=(Ce=me+oe/2,x.c2r(Ce,0,g)),fe=E.size,Se=v(E.start),be=v(E.end)+(Se-k.tickIncrement(Se,fe,!1,m))/1e6;for(l=Se;l<be;l=k.tickIncrement(l,fe,!1,m)){D.push(z.slice()),B.push(l);var we=new Array(ge);for(c=0;c<ge;c++)we[c]=[];Q.push(we),ue&&ee.push(V.slice())}B.push(l);var Me=D.length,Pe=(l-Se)/Me,De=function(gt){return p.c2r(gt,0,m)}(Se+Pe/2);X&&(ve=t(z.length,U,oe,O),ye=t(D.length,q,Pe,j)),O||x.type!=="date"||(U=i(y,U)),j||p.type!=="date"||(q=i(v,q));var he=!0,_e=!0,Ae=new Array(ge),Oe=new Array(Me),Ee=1/0,Be=1/0,Ve=1/0,Ze=1/0;for(l=0;l<I;l++){var it=S[l],at=P[l];d=T.findBin(it,U),u=T.findBin(at,q),d>=0&&d<ge&&u>=0&&u<Me&&(te+=se(d,l,D[u],pe,ee[u]),Q[u][d].push(l),he&&(Ae[d]===void 0?Ae[d]=it:Ae[d]!==it&&(he=!1)),_e&&(Oe[u]===void 0?Oe[u]=at:Oe[u]!==at&&(_e=!1)),Ee=Math.min(Ee,it-Y[d]),Be=Math.min(Be,Y[d+1]-it),Ve=Math.min(Ve,at-B[u]),Ze=Math.min(Ze,B[u+1]-at))}if(ue)for(u=0;u<Me;u++)te+=b(D[u],ee[u]);if(ae)for(u=0;u<Me;u++)ae(D[u],te,ve,ye[u]);return{x:S,xRanges:r(Y,he&&Ae,Ee,Be,x,g),x0:re,dx:oe,y:P,yRanges:r(B,_e&&Oe,Ve,Ze,p,m),y0:De,dy:Pe,z:D,pts:Q}}},99784:function(F,C,e){"use strict";var T=e(3400),k=e(56408),a=e(82748),w=e(27260),b=e(39096),f=e(37008);F.exports=function(s,t,i,r){function n(o,l){return T.coerce(s,t,f,o,l)}k(s,t,n,r),t.visible!==!1&&(a(s,t,n,r),w(s,t,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),b(n,r),n("xhoverformat"),n("yhoverformat"))}},59576:function(F,C,e){"use strict";var T=e(55512),k=e(54460).hoverLabelText;F.exports=function(a,w,b,f,s){var t=T(a,w,b,f,s);if(t){var i=(a=t[0]).index,r=i[0],n=i[1],o=a.cd[0],l=o.trace,c=o.xRanges[n],d=o.yRanges[r];return a.xLabel=k(a.xa,[c[0],c[1]],l.xhoverformat),a.yLabel=k(a.ya,[d[0],d[1]],l.yhoverformat),t}}},21536:function(F,C,e){"use strict";F.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(F,C,e){"use strict";var T=e(24040),k=e(3400);F.exports=function(a,w,b,f){var s=b("x"),t=b("y"),i=k.minRowLength(s),r=k.minRowLength(t);i&&r?(w._length=Math.min(i,r),T.getComponentMethod("calendars","handleTraceDefaults")(a,w,["x","y"],f),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):w.visible=!1}},81220:function(F,C,e){"use strict";var T=e(37008),k=e(67104),a=e(49084),w=e(29736).axisHoverFormat,b=e(92880).extendFlat;F.exports=b({x:T.x,y:T.y,z:T.z,marker:T.marker,histnorm:T.histnorm,histfunc:T.histfunc,nbinsx:T.nbinsx,xbins:T.xbins,nbinsy:T.nbinsy,ybins:T.ybins,autobinx:T.autobinx,autobiny:T.autobiny,bingroup:T.bingroup,xbingroup:T.xbingroup,ybingroup:T.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:T.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},a("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(F,C,e){"use strict";var T=e(3400),k=e(56408),a=e(84952),w=e(97680),b=e(39096),f=e(81220);F.exports=function(s,t,i,r){function n(o,l){return T.coerce(s,t,f,o,l)}k(s,t,n,r),t.visible!==!1&&(a(s,t,n,function(o){return T.coerce2(s,t,f,o)}),w(s,t,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(n,r))}},65664:function(F,C,e){"use strict";F.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(21776).Gw,a=e(49084),w=e(86968).u,b=e(74996),f=e(424),s=e(40516),t=e(32984),i=e(92880).extendFlat,r=e(98192).c;F.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:f.marker.colors,line:f.marker.line,pattern:r,editType:"calc"},a("marker",{colorAttr:"colors",anim:!1})),leaf:f.leaf,pathbar:s.pathbar,text:b.text,textinfo:f.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:f.hoverinfo,hovertemplate:T({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:f.root,domain:w({name:"icicle",trace:!0,editType:"calc"})}},59564:function(F,C,e){"use strict";var T=e(7316);C.name="icicle",C.plot=function(k,a,w,b){T.plotBasePlot(C.name,k,a,w,b)},C.clean=function(k,a,w,b){T.cleanBasePlot(C.name,k,a,w,b)}},73876:function(F,C,e){"use strict";var T=e(3776);C.r=function(k,a){return T.calc(k,a)},C.q=function(k){return T._runCrossTraceCalc("icicle",k)}},7045:function(F,C,e){"use strict";var T=e(3400),k=e(97376),a=e(76308),w=e(86968).Q,b=e(31508).handleText,f=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;F.exports=function(n,o,l,c){function d(v,_){return T.coerce(n,o,k,v,_)}var u=d("labels"),x=d("parents");if(u&&u.length&&x&&x.length){var p=d("values");p&&p.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var g=d("text");d("texttemplate"),o.texttemplate||d("textinfo",T.isArrayOrTypedArray(g)?"text+label":"label"),d("hovertext"),d("hovertemplate");var m=d("pathbar.visible");b(n,o,c,d,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition"),s(n,o,c,d);var y=o._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;y&&r(n,o,c,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",y?1:.7),o._hovered={marker:{line:{width:2,color:a.contrast(c.paper_bgcolor)}}},m&&(d("pathbar.thickness",o.pathbar.textfont.size+2*f),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),w(o,c,d),o._length=null}else o.visible=!1}},67880:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(72736),b=e(25132),f=e(47192).styleOne,s=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;F.exports=function(o,l,c,d,u){var x=u.width,p=u.height,g=u.viewX,m=u.viewY,y=u.pathSlice,v=u.toMoveInsideSlice,_=u.strTransform,h=u.hasTransition,S=u.handleSlicesExit,A=u.makeUpdateSliceInterpolator,E=u.makeUpdateTextInterpolator,P=u.prevEntry,I=o._context.staticPlot,D=o._fullLayout,z=l[0].trace,V=z.textposition.indexOf("left")!==-1,O=z.textposition.indexOf("right")!==-1,j=z.textposition.indexOf("bottom")!==-1,Y=b(c,[x,p],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),B=1/0,U=-1/0;Y.forEach(function(J){var K=J.depth;K>=z._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(B=Math.min(B,K),U=Math.max(U,K))}),d=d.data(Y,t.getPtId),z._maxVisibleLayers=isFinite(U)?U-B+1:0,d.enter().append("g").classed("slice",!0),S(d,n,{},[x,p],y),d.order();var q=null;if(h&&P){var te=t.getPtId(P);d.each(function(J){q===null&&t.getPtId(J)===te&&(q={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var ee=function(){return q||{x0:0,x1:x,y0:0,y1:p}},Q=d;return h&&(Q=Q.transition().each("end",function(){var J=T.select(this);t.setSliceCursor(J,o,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(J){J._x0=g(J.x0),J._x1=g(J.x1),J._y0=m(J.y0),J._y1=m(J.y1),J._hoverX=g(J.x1-z.tiling.pad),J._hoverY=m(j?J.y1-z.tiling.pad/2:J.y0+z.tiling.pad/2);var K=T.select(this),X=k.ensureSingle(K,"path","surface",function(ue){ue.style("pointer-events",I?"none":"all")});h?X.transition().attrTween("d",function(ue){var ve=A(ue,n,ee(),[x,p],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(ye){return y(ve(ye))}}):X.attr("d",y),K.call(i,c,o,l,{styleOne:f,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,o,{isTransitioning:o._transitioning}),X.call(f,J,z,o,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":J._text=r(J,c,z,l,D)||"";var ie=k.ensureSingle(K,"g","slicetext"),se=k.ensureSingle(ie,"text","",function(ue){ue.attr("data-notex",1)}),ae=k.ensureUniformFontSize(o,t.determineTextFont(z,J,D.font));se.text(J._text||" ").classed("slicetext",!0).attr("text-anchor",O?"end":V?"start":"middle").call(a.font,ae).call(w.convertToTspans,o),J.textBB=a.bBox(se.node()),J.transform=v(J,{fontSize:ae.size}),J.transform.fontSize=ae.size,h?se.transition().attrTween("transform",function(ue){var ve=E(ue,n,ee(),[x,p]);return function(ye){return _(ve(ye))}}):se.attr("transform",_(J))}),q}},29044:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(F){"use strict";F.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(F,C,e){"use strict";var T=e(3400),k=e(90676);F.exports=function(a,w){function b(f,s){return T.coerce(a,w,k,f,s)}b("iciclecolorway",w.colorway),b("extendiciclecolors")}},25132:function(F,C,e){"use strict";var T=e(74148),k=e(83024);F.exports=function(a,w,b){var f=b.flipX,s=b.flipY,t=b.orientation==="h",i=b.maxDepth,r=w[0],n=w[1];i&&(r=(a.height+1)*w[0]/Math.min(a.height+1,i),n=(a.height+1)*w[1]/Math.min(a.height+1,i));var o=T.partition().padding(b.pad.inner).size(t?[w[1],r]:[w[0],n])(a);return(t||f||s)&&k(o,w,{swapXY:t,flipX:f,flipY:s}),o}},38364:function(F,C,e){"use strict";var T=e(95808),k=e(67880);F.exports=function(a,w,b,f){return T(a,w,b,f,{type:"icicle",drawDescendants:k})}},47192:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(3400),w=e(82744).resizeText,b=e(60404);function f(s,t,i,r){var n=t.data.data,o=!t.children,l=n.i,c=a.castOption(i,l,"marker.line.color")||k.defaultLine,d=a.castOption(i,l,"marker.line.width")||0;s.call(b,t,i,r).style("stroke-width",d).call(k.stroke,c).style("opacity",o?i.leaf.opacity:null)}F.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");w(s,t,"icicle"),t.each(function(i){var r=T.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(o){T.select(this).call(f,o,n,s)})})},styleOne:f}},95188:function(F,C,e){"use strict";for(var T=e(45464),k=e(52904).zorder,a=e(21776).Ks,w=e(92880).extendFlat,b=e(47797).colormodel,f=["rgb","rgba","rgba256","hsl","hsla"],s=[],t=[],i=0;i<f.length;i++){var r=b[f[i]];s.push("For the `"+f[i]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),t.push("For the `"+f[i]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}F.exports=w({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:f,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:w({},T.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:a({},{keys:["z","color","colormodel"]}),zorder:k,transforms:void 0})},93336:function(F,C,e){"use strict";var T=e(3400),k=e(47797),a=e(38248),w=e(54460),b=e(3400).maxRowLength,f=e(18712).i;function s(i,r,n,o){return function(l){return T.constrain((l-i)*r,n,o)}}function t(i,r){return function(n){return T.constrain(n,i,r)}}F.exports=function(i,r){var n,o;if(r._hasZ)n=r.z.length,o=b(r.z);else if(r._hasSource){var l=f(r.source);n=l.height,o=l.width}var c,d=w.getFromId(i,r.xaxis||"x"),u=w.getFromId(i,r.yaxis||"y"),x=d.d2c(r.x0)-r.dx/2,p=u.d2c(r.y0)-r.dy/2,g=[x,x+o*r.dx],m=[p,p+n*r.dy];if(d&&d.type==="log")for(c=0;c<o;c++)g.push(x+c*r.dx);if(u&&u.type==="log")for(c=0;c<n;c++)m.push(p+c*r.dy);return r._extremes[d._id]=w.findExtremes(d,g),r._extremes[u._id]=w.findExtremes(u,m),r._scaler=function(y){var v=k.colormodel[y.colormodel],_=(v.colormodel||y.colormodel).length;y._sArray=[];for(var h=0;h<_;h++)v.min[h]!==y.zmin[h]||v.max[h]!==y.zmax[h]?y._sArray.push(s(y.zmin[h],(v.max[h]-v.min[h])/(y.zmax[h]-y.zmin[h]),v.min[h],v.max[h])):y._sArray.push(t(v.min[h],v.max[h]));return function(S){for(var A=S.slice(0,_),E=0;E<_;E++){var P=A[E];if(!a(P))return!1;A[E]=y._sArray[E](P)}return A}}(r),[{x0:x,y0:p,z:r.z,w:o,h:n}]}},47797:function(F){"use strict";F.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(C){return C.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(C){return C.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(C){return C.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(C){var e=C.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(C){var e=C.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%",""]}}}},13188:function(F,C,e){"use strict";var T=e(3400),k=e(95188),a=e(47797),w=e(81792).IMAGE_URL_PREFIX;F.exports=function(b,f){function s(r,n){return T.coerce(b,f,k,r,n)}s("source"),f.source&&!f.source.match(w)&&delete f.source,f._hasSource=!!f.source;var t,i=s("z");f._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),f._hasZ||f._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),f._hasZ?(s("colormodel","rgb"),s("zmin",(t=a.colormodel[f.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):f._hasSource&&(f.colormodel="rgba256",t=a.colormodel[f.colormodel],f.zmin=t.zminDflt,f.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),f._length=null,s("zorder")):f.visible=!1}},79972:function(F){"use strict";F.exports=function(C,e){return"xVal"in e&&(C.x=e.xVal),"yVal"in e&&(C.y=e.yVal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C.color=e.color,C.colormodel=e.trace.colormodel,C.z||(C.z=e.color),C}},18712:function(F,C,e){"use strict";var T=e(19480),k=e(81792).IMAGE_URL_PREFIX,a=e(33576).Buffer;C.i=function(w){var b=w.replace(k,""),f=new a(b,"base64");return T(f)}},24892:function(F,C,e){"use strict";var T=e(93024),k=e(3400),a=k.isArrayOrTypedArray,w=e(47797);F.exports=function(b,f,s){var t=b.cd[0],i=t.trace,r=b.xa,n=b.ya;if(!(T.inbox(f-t.x0,f-(t.x0+t.w*i.dx),0)>0||T.inbox(s-t.y0,s-(t.y0+t.h*i.dy),0)>0)){var o,l=Math.floor((f-t.x0)/i.dx),c=Math.floor(Math.abs(s-t.y0)/i.dy);if(i._hasZ?o=t.z[c][l]:i._hasSource&&(o=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,c,1,1).data),o){var d,u=t.hi||i.hoverinfo;if(u){var x=u.split("+");x.indexOf("all")!==-1&&(x=["color"]),x.indexOf("color")!==-1&&(d=!0)}var p,g=w.colormodel[i.colormodel],m=g.colormodel||i.colormodel,y=m.length,v=i._scaler(o),_=g.suffix,h=[];(i.hovertemplate||d)&&(h.push("["+[v[0]+_[0],v[1]+_[1],v[2]+_[2]].join(", ")),y===4&&h.push(", "+v[3]+_[3]),h.push("]"),h=h.join(""),b.extraText=m.toUpperCase()+": "+h),a(i.hovertext)&&a(i.hovertext[c])?p=i.hovertext[c][l]:a(i.text)&&a(i.text[c])&&(p=i.text[c][l]);var S=n.c2p(t.y0+(c+.5)*i.dy),A=t.x0+(l+.5)*i.dx,E=t.y0+(c+.5)*i.dy,P="["+o.slice(0,i.colormodel.length).join(", ")+"]";return[k.extendFlat(b,{index:[c,l],x0:r.c2p(t.x0+l*i.dx),x1:r.c2p(t.x0+(l+1)*i.dx),y0:S,y1:S,color:v,xVal:A,xLabelVal:A,yVal:E,yLabelVal:E,zLabelVal:P,text:p,hovertemplateLabels:{zLabel:P,colorLabel:h,"color[0]Label":v[0]+_[0],"color[1]Label":v[1]+_[1],"color[2]Label":v[2]+_[2],"color[3]Label":v[3]+_[3]}})]}}}},48928:function(F,C,e){"use strict";F.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=k.strTranslate,w=e(9616),b=e(47797),f=e(9188),s=e(2264).STYLE;F.exports=function(t,i,r,n){var o=i.xaxis,l=i.yaxis,c=!t._context._exportedPlot&&f();k.makeTraceGroups(n,r,"im").each(function(d){var u=T.select(this),x=d[0],p=x.trace,g=(p.zsmooth==="fast"||p.zsmooth===!1&&c)&&!p._hasZ&&p._hasSource&&o.type==="linear"&&l.type==="linear";p._realImage=g;var m,y,v,_,h,S,A=x.z,E=x.x0,P=x.y0,I=x.w,D=x.h,z=p.dx,V=p.dy;for(S=0;m===void 0&&S<I;)m=o.c2p(E+S*z),S++;for(S=I;y===void 0&&S>0;)y=o.c2p(E+S*z),S--;for(S=0;_===void 0&&S<D;)_=l.c2p(P+S*V),S++;for(S=D;h===void 0&&S>0;)h=l.c2p(P+S*V),S--;y<m&&(v=y,y=m,m=v),h<_&&(v=_,_=h,h=v),g||(m=Math.max(-.5*o._length,m),y=Math.min(1.5*o._length,y),_=Math.max(-.5*l._length,_),h=Math.min(1.5*l._length,h));var O=Math.round(y-m),j=Math.round(h-_);if(O<=0||j<=0)u.selectAll("image").data([]).exit().remove();else{var Y=u.selectAll("image").data([d]);Y.enter().append("svg:image").attr({xmlns:w.svg,preserveAspectRatio:"none"}),Y.exit().remove();var B=p.zsmooth===!1?s:"";if(g){var U=k.simpleMap(o.range,o.r2l),q=k.simpleMap(l.range,l.r2l),te=U[1]<U[0],ee=q[1]>q[0];if(te||ee){var Q=m+O/2,J=_+j/2;B+="transform:"+a(Q+"px",J+"px")+"scale("+(te?-1:1)+","+(ee?-1:1)+")"+a(-Q+"px",-J+"px")+";"}}Y.attr("style",B);var K=new Promise(function(ie){if(p._hasZ)ie();else if(p._hasSource)if(p._canvas&&p._canvas.el.width===I&&p._canvas.el.height===D&&p._canvas.source===p.source)ie();else{var se=document.createElement("canvas");se.width=I,se.height=D;var ae=se.getContext("2d",{willReadFrequently:!0});p._image=p._image||new Image;var ue=p._image;ue.onload=function(){ae.drawImage(ue,0,0),p._canvas={el:se,source:p.source},ie()},ue.setAttribute("src",p.source)}}).then(function(){var ie,se;if(p._hasZ)se=X(function(ue,ve){var ye=A[ve][ue];return k.isTypedArray(ye)&&(ye=Array.from(ye)),ye}),ie=se.toDataURL("image/png");else if(p._hasSource)if(g)ie=p.source;else{var ae=p._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,I,D).data;se=X(function(ue,ve){var ye=4*(ve*I+ue);return[ae[ye],ae[ye+1],ae[ye+2],ae[ye+3]]}),ie=se.toDataURL("image/png")}Y.attr({"xlink:href":ie,height:j,width:O,x:m,y:_})});t._promises.push(K)}function X(ie){var se=document.createElement("canvas");se.width=O,se.height=j;var ae,ue=se.getContext("2d",{willReadFrequently:!0}),ve=function(fe){return k.constrain(Math.round(o.c2p(E+fe*z)-m),0,O)},ye=function(fe){return k.constrain(Math.round(l.c2p(P+fe*V)-_),0,j)},pe=b.colormodel[p.colormodel],de=pe.colormodel||p.colormodel,me=pe.fmt;for(S=0;S<x.w;S++){var ke=ve(S),Ce=ve(S+1);if(Ce!==ke&&!isNaN(Ce)&&!isNaN(ke))for(var ge=0;ge<x.h;ge++){var oe=ye(ge),re=ye(ge+1);re===oe||isNaN(re)||isNaN(oe)||!ie(S,ge)||(ae=p._scaler(ie(S,ge)),ue.fillStyle=ae?de+"("+me(ae).join(",")+")":"rgba(0,0,0,0)",ue.fillRect(ke,oe,Ce-ke,re-oe))}}return se}})}},28576:function(F,C,e){"use strict";var T=e(33428);F.exports=function(k){T.select(k).selectAll(".im image").style("opacity",function(a){return a[0].trace.opacity})}},89864:function(F,C,e){"use strict";var T=e(92880).extendFlat,k=e(92880).extendDeep,a=e(67824).overrideAll,w=e(25376),b=e(22548),f=e(86968).u,s=e(94724),t=e(31780).templatedArray,i=e(48164),r=e(29736).descriptionOnlyNumbers,n=w({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=t("step",k({},o,{range:l}));F.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:T({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:T({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:T({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:a({range:l,visible:T({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:T({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:w({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:T({},o.line.color,{}),width:T({},o.line.width,{dflt:1}),editType:"plot"},thickness:T({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(F,C,e){"use strict";var T=e(7316);C.name="indicator",C.plot=function(k,a,w,b){T.plotBasePlot(C.name,k,a,w,b)},C.clean=function(k,a,w,b){T.cleanBasePlot(C.name,k,a,w,b)}},79136:function(F){"use strict";F.exports={calc:function(C,e){var T=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var a=e._lastValue,w=a;return e._hasDelta&&typeof e.delta.reference=="number"&&(w=e.delta.reference),T[0]={y:k,lastY:a,delta:k-w,relativeDelta:(k-w)/w},T}}},12096:function(F){"use strict";F.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(F,C,e){"use strict";var T=e(3400),k=e(89864),a=e(86968).Q,w=e(31780),b=e(51272),f=e(12096),s=e(26332),t=e(25404),i=e(95936),r=e(42568);function n(o,l){function c(d,u){return T.coerce(o,l,k.gauge.steps,d,u)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}F.exports={supplyDefaults:function(o,l,c,d){function u(z,V){return T.coerce(o,l,k,z,V)}a(l,d,u),u("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var x=u("value");l._range=[0,typeof x=="number"?1.5*x:1];var p,g,m=new Array(2);if(l._hasNumber){u("number.valueformat");var y=T.extendFlat({},d.font);y.size=void 0,T.coerceFont(u,"number.font",y),l.number.font.size===void 0&&(l.number.font.size=f.defaultNumberFontSize,m[0]=!0),u("number.prefix"),u("number.suffix"),p=l.number.font.size}if(l._hasDelta){var v=T.extendFlat({},d.font);v.size=void 0,T.coerceFont(u,"delta.font",v),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(p||f.defaultNumberFontSize),m[1]=!0),u("delta.reference",l.value),u("delta.relative"),u("delta.valueformat",l.delta.relative?"2%":""),u("delta.increasing.symbol"),u("delta.increasing.color"),u("delta.decreasing.symbol"),u("delta.decreasing.color"),u("delta.position"),u("delta.prefix"),u("delta.suffix"),g=l.delta.font.size}l._scaleNumbers=(!l._hasNumber||m[0])&&(!l._hasDelta||m[1])||!1;var _,h,S,A,E=T.extendFlat({},d.font);function P(z,V){return T.coerce(_,h,k.gauge,z,V)}function I(z,V){return T.coerce(S,A,k.gauge.axis,z,V)}if(E.size=.25*(p||g||f.defaultNumberFontSize),T.coerceFont(u,"title.font",E),u("title.text"),l._hasGauge){(_=o.gauge)||(_={}),h=w.newContainer(l,"gauge"),P("shape"),(l._isBullet=l.gauge.shape==="bullet")||u("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||u("align","center"),P("bgcolor",d.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",f.valueThickness*(l.gauge.shape==="bullet"?.5:1)),b(_,h,{name:"steps",handleItemDefaults:n}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),S={},_&&(S=_.axis||{}),A=w.newContainer(h,"axis"),I("visible"),l._range=I("range",l._range);var D={font:d.font,noAutotickangles:!0,outerTicks:!0};s(S,A,I,"linear"),r(S,A,I,"linear",D),i(S,A,I,"linear",D),t(S,A,I,D)}else u("title.align","center"),u("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},43480:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(F,C,e){"use strict";var T=e(33428),k=e(67756).qy,a=e(67756).Gz,w=e(3400),b=w.strScale,f=w.strTranslate,s=w.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),r=e(12096),n=e(72736),o=e(54460),l=e(28336),c=e(37668),d=e(94724),u=e(76308),x={left:"start",center:"middle",right:"end"},p={left:0,center:.5,right:1},g=/[yzafpnmkMGTPEZY]/;function m(A){return A&&A.duration>0}function y(A){A.each(function(E){u.stroke(T.select(this),E.line.color)}).each(function(E){u.fill(T.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function v(A,E,P){var I=A._fullLayout,D=w.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},E),z={type:"linear",_id:"x"+E._id},V={letter:"x",font:I.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function O(j,Y){return w.coerce(D,z,d,j,Y)}return l(D,z,O,V,I),c(D,z,O,V),z}function _(A,E,P){return[Math.min(E/A.width,P/A.height),A,E+"x"+P]}function h(A,E,P,I){var D=document.createElementNS("http://www.w3.org/2000/svg","text"),z=T.select(D);return z.text(A).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",A).call(n.convertToTspans,I).call(i.font,E),i.bBox(z.node())}function S(A,E,P,I,D,z){var V="_cache"+E;A[V]&&A[V].key===D||(A[V]={key:D,value:P});var O=w.aggNums(z,null,[A[V].value,I],2);return A[V].value=O,O}F.exports=function(A,E,P,I){var D,z=A._fullLayout;m(P)&&I&&(D=I()),w.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(V){var O,j,Y,B,U,q=V[0].trace,te=T.select(this),ee=q._hasGauge,Q=q._isAngular,J=q._isBullet,K=q.domain,X={w:z._size.w*(K.x[1]-K.x[0]),h:z._size.h*(K.y[1]-K.y[0]),l:z._size.l+z._size.w*K.x[0],r:z._size.r+z._size.w*(1-K.x[1]),t:z._size.t+z._size.h*(1-K.y[1]),b:z._size.b+z._size.h*K.y[0]},ie=X.l+X.w/2,se=X.t+X.h/2,ae=Math.min(X.w/2,X.h),ue=r.innerRadius*ae,ve=q.align||"center";if(j=se,ee){if(Q&&(O=ie,j=se+ae/2,Y=function(oe){return function(re,fe){return[fe/Math.sqrt(re.width/2*(re.width/2)+re.height*re.height),re,fe]}(oe,.9*ue)}),J){var ye=r.bulletPadding,pe=1-r.bulletNumberDomainSize+ye;O=X.l+(pe+(1-pe)*p[ve])*X.w,Y=function(oe){return _(oe,(r.bulletNumberDomainSize-ye)*X.w,X.h)}}}else O=X.l+p[ve]*X.w,Y=function(oe){return _(oe,X.w,X.h)};(function(oe,re,fe,Se){var be,we,Me,Pe=fe[0].trace,De=Se.numbersX,he=Se.numbersY,_e=Pe.align||"center",Ae=x[_e],Oe=Se.transitionOpts,Ee=Se.onComplete,Be=w.ensureSingle(re,"g","numbers"),Ve=[];Pe._hasNumber&&Ve.push("number"),Pe._hasDelta&&(Ve.push("delta"),Pe.delta.position==="left"&&Ve.reverse());var Ze=Be.selectAll("text").data(Ve);function it(Ot,Rt,Ct,Ge){if(!Ot.match("s")||Ct>=0==Ge>=0||Rt(Ct).slice(-1).match(g)||Rt(Ge).slice(-1).match(g))return Rt;var Xe=Ot.slice().replace("s","f").replace(/\d+/,function(Ye){return parseInt(Ye)-1}),Ne=v(oe,{tickformat:Xe});return function(Ye){return Math.abs(Ye)<1?o.tickText(Ne,Ye).text:Rt(Ye)}}Ze.enter().append("text"),Ze.attr("text-anchor",function(){return Ae}).attr("class",function(Ot){return Ot}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ze.exit().remove();var at,gt=Pe.mode+Pe.align;if(Pe._hasDelta&&(at=function(){var Ot=v(oe,{tickformat:Pe.delta.valueformat},Pe._range);Ot.setScale(),o.prepTicks(Ot);var Rt=function(ze){return o.tickText(Ot,ze).text},Ct=Pe.delta.suffix,Ge=Pe.delta.prefix,Xe=function(ze){return Pe.delta.relative?ze.relativeDelta:ze.delta},Ne=function(ze,Fe){return ze===0||typeof ze!="number"||isNaN(ze)?"-":(ze>0?Pe.delta.increasing.symbol:Pe.delta.decreasing.symbol)+Ge+Fe(ze)+Ct},Ye=function(ze){return ze.delta>=0?Pe.delta.increasing.color:Pe.delta.decreasing.color};Pe._deltaLastValue===void 0&&(Pe._deltaLastValue=Xe(fe[0]));var ot=Be.select("text.delta");function nt(){ot.text(Ne(Xe(fe[0]),Rt)).call(u.fill,Ye(fe[0])).call(n.convertToTspans,oe)}return ot.call(i.font,Pe.delta.font).call(u.fill,Ye({delta:Pe._deltaLastValue})),m(Oe)?ot.transition().duration(Oe.duration).ease(Oe.easing).tween("text",function(){var ze=T.select(this),Fe=Xe(fe[0]),rt=Pe._deltaLastValue,We=it(Pe.delta.valueformat,Rt,rt,Fe),ft=a(rt,Fe);return Pe._deltaLastValue=Fe,function(mt){ze.text(Ne(ft(mt),We)),ze.call(u.fill,Ye({delta:ft(mt)}))}}).each("end",function(){nt(),Ee&&Ee()}).each("interrupt",function(){nt(),Ee&&Ee()}):nt(),we=h(Ne(Xe(fe[0]),Rt),Pe.delta.font,Ae,oe),ot}(),gt+=Pe.delta.position+Pe.delta.font.size+Pe.delta.font.family+Pe.delta.valueformat,gt+=Pe.delta.increasing.symbol+Pe.delta.decreasing.symbol,Me=we),Pe._hasNumber&&(function(){var Ot=v(oe,{tickformat:Pe.number.valueformat},Pe._range);Ot.setScale(),o.prepTicks(Ot);var Rt=function(Ye){return o.tickText(Ot,Ye).text},Ct=Pe.number.suffix,Ge=Pe.number.prefix,Xe=Be.select("text.number");function Ne(){var Ye=typeof fe[0].y=="number"?Ge+Rt(fe[0].y)+Ct:"-";Xe.text(Ye).call(i.font,Pe.number.font).call(n.convertToTspans,oe)}m(Oe)?Xe.transition().duration(Oe.duration).ease(Oe.easing).each("end",function(){Ne(),Ee&&Ee()}).each("interrupt",function(){Ne(),Ee&&Ee()}).attrTween("text",function(){var Ye=T.select(this),ot=a(fe[0].lastY,fe[0].y);Pe._lastValue=fe[0].y;var nt=it(Pe.number.valueformat,Rt,fe[0].lastY,fe[0].y);return function(ze){Ye.text(Ge+nt(ot(ze))+Ct)}}):Ne(),be=h(Ge+Rt(fe[0].y)+Ct,Pe.number.font,Ae,oe)}(),gt+=Pe.number.font.size+Pe.number.font.family+Pe.number.valueformat+Pe.number.suffix+Pe.number.prefix,Me=be),Pe._hasDelta&&Pe._hasNumber){var yt,pt,et=[(be.left+be.right)/2,(be.top+be.bottom)/2],$e=[(we.left+we.right)/2,(we.top+we.bottom)/2],At=.75*Pe.delta.font.size;Pe.delta.position==="left"&&(yt=S(Pe,"deltaPos",0,-1*(be.width*p[Pe.align]+we.width*(1-p[Pe.align])+At),gt,Math.min),pt=et[1]-$e[1],Me={width:be.width+we.width+At,height:Math.max(be.height,we.height),left:we.left+yt,right:be.right,top:Math.min(be.top,we.top+pt),bottom:Math.max(be.bottom,we.bottom+pt)}),Pe.delta.position==="right"&&(yt=S(Pe,"deltaPos",0,be.width*(1-p[Pe.align])+we.width*p[Pe.align]+At,gt,Math.max),pt=et[1]-$e[1],Me={width:be.width+we.width+At,height:Math.max(be.height,we.height),left:be.left,right:we.right+yt,top:Math.min(be.top,we.top+pt),bottom:Math.max(be.bottom,we.bottom+pt)}),Pe.delta.position==="bottom"&&(yt=null,pt=we.height,Me={width:Math.max(be.width,we.width),height:be.height+we.height,left:Math.min(be.left,we.left),right:Math.max(be.right,we.right),top:be.bottom-be.height,bottom:be.bottom+we.height}),Pe.delta.position==="top"&&(yt=null,pt=be.top,Me={width:Math.max(be.width,we.width),height:be.height+we.height,left:Math.min(be.left,we.left),right:Math.max(be.right,we.right),top:be.bottom-be.height-we.height,bottom:be.bottom}),at.attr({dx:yt,dy:pt})}(Pe._hasNumber||Pe._hasDelta)&&Be.attr("transform",function(){var Ot=Se.numbersScaler(Me);gt+=Ot[2];var Rt,Ct=S(Pe,"numbersScale",1,Ot[0],gt,Math.min);Pe._scaleNumbers||(Ct=1),Rt=Pe._isAngular?he-Ct*Me.bottom:he-Ct*(Me.top+Me.bottom)/2,Pe._numbersTop=Ct*Me.top+Rt;var Ge=Me[_e];_e==="center"&&(Ge=(Me.left+Me.right)/2);var Xe=De-Ct*Ge;return Xe=S(Pe,"numbersTranslate",0,Xe,gt,Math.max),f(Xe,Rt)+b(Ct)})})(A,te,V,{numbersX:O,numbersY:j,numbersScaler:Y,transitionOpts:P,onComplete:D}),ee&&(B={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},U={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var de=te.selectAll("g.angular").data(Q?V:[]);de.exit().remove();var me=te.selectAll("g.angularaxis").data(Q?V:[]);me.exit().remove(),Q&&function(oe,re,fe,Se){var be,we,Me,Pe,De=fe[0].trace,he=Se.size,_e=Se.radius,Ae=Se.innerRadius,Oe=Se.gaugeBg,Ee=Se.gaugeOutline,Be=[he.l+he.w/2,he.t+he.h/2+_e/2],Ve=Se.gauge,Ze=Se.layer,it=Se.transitionOpts,at=Se.onComplete,gt=Math.PI/2;function yt(mt){var vt=De.gauge.axis.range[0],ut=(mt-vt)/(De.gauge.axis.range[1]-vt)*Math.PI-gt;return ut<-gt?-gt:ut>gt?gt:ut}function pt(mt){return T.svg.arc().innerRadius((Ae+_e)/2-mt/2*(_e-Ae)).outerRadius((Ae+_e)/2+mt/2*(_e-Ae)).startAngle(-gt)}function et(mt){mt.attr("d",function(vt){return pt(vt.thickness).startAngle(yt(vt.range[0])).endAngle(yt(vt.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",f(Be[0],Be[1])),Ze.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ze.selectAll("g.xangularaxistick,path,text").remove(),(be=v(oe,De.gauge.axis)).type="linear",be.range=De.gauge.axis.range,be._id="xangularaxis",be.ticklabeloverflow="allow",be.setScale();var $e=function(mt){return(be.range[0]-mt.x)/(be.range[1]-be.range[0])*Math.PI+Math.PI},At={},Ot=o.makeLabelFns(be,0).labelStandoff;At.xFn=function(mt){var vt=$e(mt);return Math.cos(vt)*Ot},At.yFn=function(mt){var vt=$e(mt),ut=Math.sin(vt)>0?.2:1;return-Math.sin(vt)*(Ot+mt.fontSize*ut)+Math.abs(Math.cos(vt))*(mt.fontSize*t)},At.anchorFn=function(mt){var vt=$e(mt),ut=Math.cos(vt);return Math.abs(ut)<.1?"middle":ut>0?"start":"end"},At.heightFn=function(mt,vt,ut){var Mt=$e(mt);return-.5*(1+Math.sin(Mt))*ut};var Rt=function(mt){return f(Be[0]+_e*Math.cos(mt),Be[1]-_e*Math.sin(mt))};if(Me=function(mt){return Rt($e(mt))},we=o.calcTicks(be),Pe=o.getTickSigns(be)[2],be.visible){Pe=be.ticks==="inside"?-1:1;var Ct=(be.linewidth||1)/2;o.drawTicks(oe,be,{vals:we,layer:Ze,path:"M"+Pe*Ct+",0h"+Pe*be.ticklen,transFn:function(mt){var vt=$e(mt);return Rt(vt)+"rotate("+-s(vt)+")"}}),o.drawLabels(oe,be,{vals:we,layer:Ze,transFn:Me,labelFns:At})}var Ge=[Oe].concat(De.gauge.steps),Xe=Ve.selectAll("g.bg-arc").data(Ge);Xe.enter().append("g").classed("bg-arc",!0).append("path"),Xe.select("path").call(et).call(y),Xe.exit().remove();var Ne=pt(De.gauge.bar.thickness),Ye=Ve.selectAll("g.value-arc").data([De.gauge.bar]);Ye.enter().append("g").classed("value-arc",!0).append("path");var ot,nt,ze,Fe=Ye.select("path");m(it)?(Fe.transition().duration(it.duration).ease(it.easing).each("end",function(){at&&at()}).each("interrupt",function(){at&&at()}).attrTween("d",(ot=Ne,nt=yt(fe[0].lastY),ze=yt(fe[0].y),function(){var mt=k(nt,ze);return function(vt){return ot.endAngle(mt(vt))()}})),De._lastValue=fe[0].y):Fe.attr("d",typeof fe[0].y=="number"?Ne.endAngle(yt(fe[0].y)):"M0,0Z"),Fe.call(y),Ye.exit().remove(),Ge=[];var rt=De.gauge.threshold.value;(rt||rt===0)&&Ge.push({range:[rt,rt],color:De.gauge.threshold.color,line:{color:De.gauge.threshold.line.color,width:De.gauge.threshold.line.width},thickness:De.gauge.threshold.thickness});var We=Ve.selectAll("g.threshold-arc").data(Ge);We.enter().append("g").classed("threshold-arc",!0).append("path"),We.select("path").call(et).call(y),We.exit().remove();var ft=Ve.selectAll("g.gauge-outline").data([Ee]);ft.enter().append("g").classed("gauge-outline",!0).append("path"),ft.select("path").call(et).call(y),ft.exit().remove()}(A,0,V,{radius:ae,innerRadius:ue,gauge:de,layer:me,size:X,gaugeBg:B,gaugeOutline:U,transitionOpts:P,onComplete:D});var ke=te.selectAll("g.bullet").data(J?V:[]);ke.exit().remove();var Ce=te.selectAll("g.bulletaxis").data(J?V:[]);Ce.exit().remove(),J&&function(oe,re,fe,Se){var be,we,Me,Pe,De,he=fe[0].trace,_e=Se.gauge,Ae=Se.layer,Oe=Se.gaugeBg,Ee=Se.gaugeOutline,Be=Se.size,Ve=he.domain,Ze=Se.transitionOpts,it=Se.onComplete;_e.enter().append("g").classed("bullet",!0),_e.attr("transform",f(Be.l,Be.t)),Ae.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ae.selectAll("g.xbulletaxistick,path,text").remove();var at=Be.h,gt=he.gauge.bar.thickness*at,yt=Ve.x[0],pt=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(he._hasNumber||he._hasDelta?1-r.bulletNumberDomainSize:1);function et(Xe){Xe.attr("width",function(Ne){return Math.max(0,be.c2p(Ne.range[1])-be.c2p(Ne.range[0]))}).attr("x",function(Ne){return be.c2p(Ne.range[0])}).attr("y",function(Ne){return .5*(1-Ne.thickness)*at}).attr("height",function(Ne){return Ne.thickness*at})}(be=v(oe,he.gauge.axis))._id="xbulletaxis",be.domain=[yt,pt],be.setScale(),we=o.calcTicks(be),Me=o.makeTransTickFn(be),Pe=o.getTickSigns(be)[2],De=Be.t+Be.h,be.visible&&(o.drawTicks(oe,be,{vals:be.ticks==="inside"?o.clipEnds(be,we):we,layer:Ae,path:o.makeTickPath(be,De,Pe),transFn:Me}),o.drawLabels(oe,be,{vals:we,layer:Ae,transFn:Me,labelFns:o.makeLabelFns(be,De)}));var $e=[Oe].concat(he.gauge.steps),At=_e.selectAll("g.bg-bullet").data($e);At.enter().append("g").classed("bg-bullet",!0).append("rect"),At.select("rect").call(et).call(y),At.exit().remove();var Ot=_e.selectAll("g.value-bullet").data([he.gauge.bar]);Ot.enter().append("g").classed("value-bullet",!0).append("rect"),Ot.select("rect").attr("height",gt).attr("y",(at-gt)/2).call(y),m(Ze)?Ot.select("rect").transition().duration(Ze.duration).ease(Ze.easing).each("end",function(){it&&it()}).each("interrupt",function(){it&&it()}).attr("width",Math.max(0,be.c2p(Math.min(he.gauge.axis.range[1],fe[0].y)))):Ot.select("rect").attr("width",typeof fe[0].y=="number"?Math.max(0,be.c2p(Math.min(he.gauge.axis.range[1],fe[0].y))):0),Ot.exit().remove();var Rt=fe.filter(function(){return he.gauge.threshold.value||he.gauge.threshold.value===0}),Ct=_e.selectAll("g.threshold-bullet").data(Rt);Ct.enter().append("g").classed("threshold-bullet",!0).append("line"),Ct.select("line").attr("x1",be.c2p(he.gauge.threshold.value)).attr("x2",be.c2p(he.gauge.threshold.value)).attr("y1",(1-he.gauge.threshold.thickness)/2*at).attr("y2",(1-(1-he.gauge.threshold.thickness)/2)*at).call(u.stroke,he.gauge.threshold.line.color).style("stroke-width",he.gauge.threshold.line.width),Ct.exit().remove();var Ge=_e.selectAll("g.gauge-outline").data([Ee]);Ge.enter().append("g").classed("gauge-outline",!0).append("rect"),Ge.select("rect").call(et).call(y),Ge.exit().remove()}(A,0,V,{gauge:ke,layer:Ce,size:X,gaugeBg:B,gaugeOutline:U,transitionOpts:P,onComplete:D});var ge=te.selectAll("text.title").data(V);ge.exit().remove(),ge.enter().append("text").classed("title",!0),ge.attr("text-anchor",function(){return J?x.right:x[q.title.align]}).text(q.title.text).call(i.font,q.title.font).call(n.convertToTspans,A),ge.attr("transform",function(){var oe,re=X.l+X.w*p[q.title.align],fe=r.titlePadding,Se=i.bBox(ge.node());return ee?(Q&&(oe=q.gauge.axis.visible?i.bBox(me.node()).top-fe-Se.bottom:X.t+X.h/2-ae/2-Se.bottom-fe),J&&(oe=j-(Se.top+Se.bottom)/2,re=X.l-r.bulletPadding*X.w)):oe=q._numbersTop-fe-Se.bottom,f(re,oe)})})}},50048:function(F,C,e){"use strict";var T=e(49084),k=e(29736).axisHoverFormat,a=e(21776).Ks,w=e(52948),b=e(45464),f=e(92880).extendFlat,s=e(67824).overrideAll,t=F.exports=s(f({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:f({},b.showlegend,{dflt:!1})},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,lightposition:w.lightposition,lighting:w.lighting,flatshading:w.flatshading,contour:w.contour,hoverinfo:f({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(F,C,e){"use strict";var T=e(47128),k=e(3832).processGrid,a=e(3832).filter;F.exports=function(w,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=a(b.x,b._len),b._y=a(b.y,b._len),b._z=a(b.z,b._len),b._value=a(b.value,b._len);var f=k(b);b._gridFill=f.fill,b._Xs=f.Xs,b._Ys=f.Ys,b._Zs=f.Zs,b._len=f.len;for(var s=1/0,t=-1/0,i=0;i<b._len;i++){var r=b._value[i];s=Math.min(s,r),t=Math.max(t,r)}b._minValues=s,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?s:b.isomin,b._vMax=b.isomax===void 0||b.isomax===null?t:b.isomax,T(w,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},31460:function(F,C,e){"use strict";var T=e(67792).gl_mesh3d,k=e(33040).parseColorScale,a=e(3400).isArrayOrTypedArray,w=e(43080),b=e(8932).extractOpts,f=e(52094),s=function(o,l){for(var c=l.length-1;c>0;c--){var d=Math.min(l[c],l[c-1]),u=Math.max(l[c],l[c-1]);if(u>d&&d<o&&o<=u)return{id:c,distRatio:(u-o)/(u-d)}}return{id:0,distRatio:0}};function t(o,l,c){this.scene=o,this.uid=c,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(o){if(o.object===this.mesh){var l=o.data.index,c=this.data._meshX[l],d=this.data._meshY[l],u=this.data._meshZ[l],x=this.data._Ys.length,p=this.data._Zs.length,g=s(c,this.data._Xs).id,m=s(d,this.data._Ys).id,y=s(u,this.data._Zs).id,v=o.index=y+p*m+p*x*g;o.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var _=this.data.hovertext||this.data.text;return a(_)&&_[v]!==void 0?o.textLabel=_[v]:_&&(o.textLabel=_),!0}},i.update=function(o){var l=this.scene,c=l.fullSceneLayout;function d(p,g,m,y){return g.map(function(v){return p.d2l(v,0,y)*m})}this.data=n(o);var u={positions:f(d(c.xaxis,o._meshX,l.dataScale[0],o.xcalendar),d(c.yaxis,o._meshY,l.dataScale[1],o.ycalendar),d(c.zaxis,o._meshZ,l.dataScale[2],o.zcalendar)),cells:f(o._meshI,o._meshJ,o._meshK),lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:w(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},x=b(o);u.vertexIntensity=o._meshIntensity,u.vertexIntensityBounds=[x.min,x.max],u.colormap=k(o),this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function n(o){o._meshI=[],o._meshJ=[],o._meshK=[];var l,c,d,u,x,p,g,m=o.surface.show,y=o.spaceframe.show,v=o.surface.fill,_=o.spaceframe.fill,h=!1,S=!1,A=0,E=o._Xs,P=o._Ys,I=o._Zs,D=E.length,z=P.length,V=I.length,O=r.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),j=function(Ae,Oe,Ee){switch(O){case 5:return Ee+V*Oe+V*z*Ae;case 4:return Ee+V*Ae+V*D*Oe;case 3:return Oe+z*Ee+z*V*Ae;case 2:return Oe+z*Ae+z*D*Ee;case 1:return Ae+D*Ee+D*V*Oe;default:return Ae+D*Oe+D*z*Ee}},Y=o._minValues,B=o._maxValues,U=o._vMin,q=o._vMax;function te(Ae,Oe,Ee){for(var Be=p.length,Ve=c;Ve<Be;Ve++)if(Ae===d[Ve]&&Oe===u[Ve]&&Ee===x[Ve])return Ve;return-1}function ee(){c=l}function Q(){d=[],u=[],x=[],p=[],l=0,ee()}function J(Ae,Oe,Ee,Be){return d.push(Ae),u.push(Oe),x.push(Ee),p.push(Be),++l-1}function K(Ae,Oe,Ee){for(var Be=[],Ve=0;Ve<Ae.length;Ve++)Be[Ve]=Ae[Ve]*(1-Ee)+Ee*Oe[Ve];return Be}function X(Ae){g=Ae}function ie(Ae,Oe){return Ae==="all"||Ae===null||Ae.indexOf(Oe)>-1}function se(Ae,Oe){return Ae===null?Oe:Ae}function ae(Ae,Oe,Ee){ee();var Be,Ve,Ze,it=[Oe],at=[Ee];if(g>=1)it=[Oe],at=[Ee];else if(g>0){var gt=function(Ge,Xe){var Ne=Ge[0],Ye=Ge[1],ot=Ge[2],nt=function(ut,Mt,bt){for(var St=[],Pt=0;Pt<ut.length;Pt++)St[Pt]=(ut[Pt]+Mt[Pt]+bt[Pt])/3;return St}(Ne,Ye,ot),ze=Math.sqrt(1-g),Fe=K(nt,Ne,ze),rt=K(nt,Ye,ze),We=K(nt,ot,ze),ft=Xe[0],mt=Xe[1],vt=Xe[2];return{xyzv:[[Ne,Ye,rt],[rt,Fe,Ne],[Ye,ot,We],[We,rt,Ye],[ot,Ne,Fe],[Fe,We,ot]],abc:[[ft,mt,-1],[-1,-1,ft],[mt,vt,-1],[-1,-1,mt],[vt,ft,-1],[-1,-1,vt]]}}(Oe,Ee);it=gt.xyzv,at=gt.abc}for(var yt=0;yt<it.length;yt++){Oe=it[yt],Ee=at[yt];for(var pt=[],et=0;et<3;et++){var $e=Oe[et][0],At=Oe[et][1],Ot=Oe[et][2],Rt=Oe[et][3],Ct=Ee[et]>-1?Ee[et]:te($e,At,Ot);pt[et]=Ct>-1?Ct:J($e,At,Ot,se(Ae,Rt))}Be=pt[0],Ve=pt[1],Ze=pt[2],o._meshI.push(Be),o._meshJ.push(Ve),o._meshK.push(Ze),++A}}function ue(Ae,Oe,Ee,Be){var Ve=Ae[3];Ve<Ee&&(Ve=Ee),Ve>Be&&(Ve=Be);for(var Ze=(Ae[3]-Ve)/(Ae[3]-Oe[3]+1e-9),it=[],at=0;at<4;at++)it[at]=(1-Ze)*Ae[at]+Ze*Oe[at];return it}function ve(Ae,Oe,Ee){return Ae>=Oe&&Ae<=Ee}function ye(Ae){var Oe=.001*(q-U);return Ae>=U-Oe&&Ae<=q+Oe}function pe(Ae){for(var Oe=[],Ee=0;Ee<4;Ee++){var Be=Ae[Ee];Oe.push([o._x[Be],o._y[Be],o._z[Be],o._value[Be]])}return Oe}var de=3;function me(Ae,Oe,Ee,Be,Ve,Ze){Ze||(Ze=1),Ee=[-1,-1,-1];var it=!1,at=[ve(Oe[0][3],Be,Ve),ve(Oe[1][3],Be,Ve),ve(Oe[2][3],Be,Ve)];if(!at[0]&&!at[1]&&!at[2])return!1;var gt=function(pt,et,$e){return ye(et[0][3])&&ye(et[1][3])&&ye(et[2][3])?(ae(pt,et,$e),!0):Ze<de&&me(pt,et,$e,U,q,++Ze)};if(at[0]&&at[1]&&at[2])return gt(Ae,Oe,Ee)||it;var yt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(pt){if(at[pt[0]]&&at[pt[1]]&&!at[pt[2]]){var et=Oe[pt[0]],$e=Oe[pt[1]],At=Oe[pt[2]],Ot=ue(At,et,Be,Ve),Rt=ue(At,$e,Be,Ve);it=gt(Ae,[Rt,Ot,et],[-1,-1,Ee[pt[0]]])||it,it=gt(Ae,[et,$e,Rt],[Ee[pt[0]],Ee[pt[1]],-1])||it,yt=!0}}),yt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(pt){if(at[pt[0]]&&!at[pt[1]]&&!at[pt[2]]){var et=Oe[pt[0]],$e=Oe[pt[1]],At=Oe[pt[2]],Ot=ue($e,et,Be,Ve),Rt=ue(At,et,Be,Ve);it=gt(Ae,[Rt,Ot,et],[-1,-1,Ee[pt[0]]])||it,yt=!0}}),it}function ke(Ae,Oe,Ee,Be){var Ve=!1,Ze=pe(Oe),it=[ve(Ze[0][3],Ee,Be),ve(Ze[1][3],Ee,Be),ve(Ze[2][3],Ee,Be),ve(Ze[3][3],Ee,Be)];if(!(it[0]||it[1]||it[2]||it[3]))return Ve;if(it[0]&&it[1]&&it[2]&&it[3])return S&&(Ve=function(gt,yt,pt){var et=function($e,At,Ot){ae(gt,[yt[$e],yt[At],yt[Ot]],[pt[$e],pt[At],pt[Ot]])};et(0,1,2),et(3,0,1),et(2,3,0),et(1,2,3)}(Ae,Ze,Oe)||Ve),Ve;var at=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(gt){if(it[gt[0]]&&it[gt[1]]&&it[gt[2]]&&!it[gt[3]]){var yt=Ze[gt[0]],pt=Ze[gt[1]],et=Ze[gt[2]],$e=Ze[gt[3]];if(S)Ve=ae(Ae,[yt,pt,et],[Oe[gt[0]],Oe[gt[1]],Oe[gt[2]]])||Ve;else{var At=ue($e,yt,Ee,Be),Ot=ue($e,pt,Ee,Be),Rt=ue($e,et,Ee,Be);Ve=ae(null,[At,Ot,Rt],[-1,-1,-1])||Ve}at=!0}}),at||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(gt){if(it[gt[0]]&&it[gt[1]]&&!it[gt[2]]&&!it[gt[3]]){var yt=Ze[gt[0]],pt=Ze[gt[1]],et=Ze[gt[2]],$e=Ze[gt[3]],At=ue(et,yt,Ee,Be),Ot=ue(et,pt,Ee,Be),Rt=ue($e,pt,Ee,Be),Ct=ue($e,yt,Ee,Be);S?(Ve=ae(Ae,[yt,Ct,At],[Oe[gt[0]],-1,-1])||Ve,Ve=ae(Ae,[pt,Ot,Rt],[Oe[gt[1]],-1,-1])||Ve):Ve=function(Ge,Xe,Ne){var Ye=function(ot,nt,ze){ae(null,[Xe[ot],Xe[nt],Xe[ze]],[Ne[ot],Ne[nt],Ne[ze]])};Ye(0,1,2),Ye(2,3,0)}(0,[At,Ot,Rt,Ct],[-1,-1,-1,-1])||Ve,at=!0}}),at||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(gt){if(it[gt[0]]&&!it[gt[1]]&&!it[gt[2]]&&!it[gt[3]]){var yt=Ze[gt[0]],pt=Ze[gt[1]],et=Ze[gt[2]],$e=Ze[gt[3]],At=ue(pt,yt,Ee,Be),Ot=ue(et,yt,Ee,Be),Rt=ue($e,yt,Ee,Be);S?(Ve=ae(Ae,[yt,At,Ot],[Oe[gt[0]],-1,-1])||Ve,Ve=ae(Ae,[yt,Ot,Rt],[Oe[gt[0]],-1,-1])||Ve,Ve=ae(Ae,[yt,Rt,At],[Oe[gt[0]],-1,-1])||Ve):Ve=ae(null,[At,Ot,Rt],[-1,-1,-1])||Ve,at=!0}})),Ve}function Ce(Ae,Oe,Ee,Be,Ve,Ze,it,at,gt,yt,pt){var et=!1;return h&&(ie(Ae,"A")&&(et=ke(null,[Oe,Ee,Be,Ze],yt,pt)||et),ie(Ae,"B")&&(et=ke(null,[Ee,Be,Ve,gt],yt,pt)||et),ie(Ae,"C")&&(et=ke(null,[Ee,Ze,it,gt],yt,pt)||et),ie(Ae,"D")&&(et=ke(null,[Be,Ze,at,gt],yt,pt)||et),ie(Ae,"E")&&(et=ke(null,[Ee,Be,Ze,gt],yt,pt)||et)),S&&(et=ke(Ae,[Ee,Be,Ze,gt],yt,pt)||et),et}function ge(Ae,Oe,Ee,Be,Ve,Ze,it,at){return[at[0]===!0||me(Ae,pe([Oe,Ee,Be]),[Oe,Ee,Be],Ze,it),at[1]===!0||me(Ae,pe([Be,Ve,Oe]),[Be,Ve,Oe],Ze,it)]}function oe(Ae,Oe,Ee,Be,Ve,Ze,it,at,gt){return at?ge(Ae,Oe,Ee,Ve,Be,Ze,it,gt):ge(Ae,Ee,Ve,Be,Oe,Ze,it,gt)}function re(Ae,Oe,Ee,Be,Ve,Ze,it){var at,gt,yt,pt,et=!1,$e=function(){et=me(Ae,[at,gt,yt],[-1,-1,-1],Ve,Ze)||et,et=me(Ae,[yt,pt,at],[-1,-1,-1],Ve,Ze)||et},At=it[0],Ot=it[1],Rt=it[2];return At&&(at=K(pe([j(Oe,Ee-0,Be-0)])[0],pe([j(Oe-1,Ee-0,Be-0)])[0],At),gt=K(pe([j(Oe,Ee-0,Be-1)])[0],pe([j(Oe-1,Ee-0,Be-1)])[0],At),yt=K(pe([j(Oe,Ee-1,Be-1)])[0],pe([j(Oe-1,Ee-1,Be-1)])[0],At),pt=K(pe([j(Oe,Ee-1,Be-0)])[0],pe([j(Oe-1,Ee-1,Be-0)])[0],At),$e()),Ot&&(at=K(pe([j(Oe-0,Ee,Be-0)])[0],pe([j(Oe-0,Ee-1,Be-0)])[0],Ot),gt=K(pe([j(Oe-0,Ee,Be-1)])[0],pe([j(Oe-0,Ee-1,Be-1)])[0],Ot),yt=K(pe([j(Oe-1,Ee,Be-1)])[0],pe([j(Oe-1,Ee-1,Be-1)])[0],Ot),pt=K(pe([j(Oe-1,Ee,Be-0)])[0],pe([j(Oe-1,Ee-1,Be-0)])[0],Ot),$e()),Rt&&(at=K(pe([j(Oe-0,Ee-0,Be)])[0],pe([j(Oe-0,Ee-0,Be-1)])[0],Rt),gt=K(pe([j(Oe-0,Ee-1,Be)])[0],pe([j(Oe-0,Ee-1,Be-1)])[0],Rt),yt=K(pe([j(Oe-1,Ee-1,Be)])[0],pe([j(Oe-1,Ee-1,Be-1)])[0],Rt),pt=K(pe([j(Oe-1,Ee-0,Be)])[0],pe([j(Oe-1,Ee-0,Be-1)])[0],Rt),$e()),et}function fe(Ae,Oe,Ee,Be,Ve,Ze,it,at,gt,yt,pt,et){var $e=Ae;return et?(h&&Ae==="even"&&($e=null),Ce($e,Oe,Ee,Be,Ve,Ze,it,at,gt,yt,pt)):(h&&Ae==="odd"&&($e=null),Ce($e,gt,at,it,Ze,Ve,Be,Ee,Oe,yt,pt))}function Se(Ae,Oe,Ee,Be,Ve){for(var Ze=[],it=0,at=0;at<Oe.length;at++)for(var gt=Oe[at],yt=1;yt<V;yt++)for(var pt=1;pt<z;pt++)Ze.push(oe(Ae,j(gt,pt-1,yt-1),j(gt,pt-1,yt),j(gt,pt,yt-1),j(gt,pt,yt),Ee,Be,(gt+pt+yt)%2,Ve&&Ve[it]?Ve[it]:[])),it++;return Ze}function be(Ae,Oe,Ee,Be,Ve){for(var Ze=[],it=0,at=0;at<Oe.length;at++)for(var gt=Oe[at],yt=1;yt<D;yt++)for(var pt=1;pt<V;pt++)Ze.push(oe(Ae,j(yt-1,gt,pt-1),j(yt,gt,pt-1),j(yt-1,gt,pt),j(yt,gt,pt),Ee,Be,(yt+gt+pt)%2,Ve&&Ve[it]?Ve[it]:[])),it++;return Ze}function we(Ae,Oe,Ee,Be,Ve){for(var Ze=[],it=0,at=0;at<Oe.length;at++)for(var gt=Oe[at],yt=1;yt<z;yt++)for(var pt=1;pt<D;pt++)Ze.push(oe(Ae,j(pt-1,yt-1,gt),j(pt-1,yt,gt),j(pt,yt-1,gt),j(pt,yt,gt),Ee,Be,(pt+yt+gt)%2,Ve&&Ve[it]?Ve[it]:[])),it++;return Ze}function Me(Ae,Oe,Ee){for(var Be=1;Be<V;Be++)for(var Ve=1;Ve<z;Ve++)for(var Ze=1;Ze<D;Ze++)fe(Ae,j(Ze-1,Ve-1,Be-1),j(Ze-1,Ve-1,Be),j(Ze-1,Ve,Be-1),j(Ze-1,Ve,Be),j(Ze,Ve-1,Be-1),j(Ze,Ve-1,Be),j(Ze,Ve,Be-1),j(Ze,Ve,Be),Oe,Ee,(Ze+Ve+Be)%2)}function Pe(Ae,Oe,Ee,Be,Ve,Ze){for(var it=[],at=0,gt=0;gt<Oe.length;gt++)for(var yt=Oe[gt],pt=1;pt<V;pt++)for(var et=1;et<z;et++)it.push(re(Ae,yt,et,pt,Ee,Be,Ve[gt],Ze&&Ze[at]&&Ze[at])),at++;return it}function De(Ae,Oe,Ee,Be,Ve,Ze){for(var it=[],at=0,gt=0;gt<Oe.length;gt++)for(var yt=Oe[gt],pt=1;pt<D;pt++)for(var et=1;et<V;et++)it.push(re(Ae,pt,yt,et,Ee,Be,Ve[gt],Ze&&Ze[at]&&Ze[at])),at++;return it}function he(Ae,Oe,Ee,Be,Ve,Ze){for(var it=[],at=0,gt=0;gt<Oe.length;gt++)for(var yt=Oe[gt],pt=1;pt<z;pt++)for(var et=1;et<D;et++)it.push(re(Ae,et,pt,yt,Ee,Be,Ve[gt],Ze&&Ze[at]&&Ze[at])),at++;return it}function _e(Ae,Oe){for(var Ee=[],Be=Ae;Be<Oe;Be++)Ee.push(Be);return Ee}return function(){Q(),function(){for(var gt=0;gt<D;gt++)for(var yt=0;yt<z;yt++)for(var pt=0;pt<V;pt++){var et=j(gt,yt,pt);J(o._x[et],o._y[et],o._z[et],o._value[et])}}();var Ae=null;if(y&&_&&(X(_),S=!0,Me(Ae,U,q),S=!1),m&&v){X(v);for(var Oe=o.surface.pattern,Ee=o.surface.count,Be=0;Be<Ee;Be++){var Ve=Ee===1?.5:Be/(Ee-1),Ze=(1-Ve)*U+Ve*q,it=Math.abs(Ze-Y)>Math.abs(Ze-B)?[Y,Ze]:[Ze,B];h=!0,Me(Oe,it[0],it[1]),h=!1}}var at=[[Math.min(U,B),Math.max(U,B)],[Math.min(Y,q),Math.max(Y,q)]];["x","y","z"].forEach(function(gt){for(var yt=[],pt=0;pt<at.length;pt++){var et=0,$e=at[pt][0],At=at[pt][1],Ot=o.slices[gt];if(Ot.show&&Ot.fill){X(Ot.fill);var Rt=[],Ct=[],Ge=[];if(Ot.locations.length)for(var Xe=0;Xe<Ot.locations.length;Xe++){var Ne=s(Ot.locations[Xe],gt==="x"?E:gt==="y"?P:I);Ne.distRatio===0?Rt.push(Ne.id):Ne.id>0&&(Ct.push(Ne.id),gt==="x"?Ge.push([Ne.distRatio,0,0]):gt==="y"?Ge.push([0,Ne.distRatio,0]):Ge.push([0,0,Ne.distRatio]))}else Rt=_e(1,gt==="x"?D-1:gt==="y"?z-1:V-1);Ct.length>0&&(yt[et]=gt==="x"?Pe(Ae,Ct,$e,At,Ge,yt[et]):gt==="y"?De(Ae,Ct,$e,At,Ge,yt[et]):he(Ae,Ct,$e,At,Ge,yt[et]),et++),Rt.length>0&&(yt[et]=gt==="x"?Se(Ae,Rt,$e,At,yt[et]):gt==="y"?be(Ae,Rt,$e,At,yt[et]):we(Ae,Rt,$e,At,yt[et]),et++)}var Ye=o.caps[gt];Ye.show&&Ye.fill&&(X(Ye.fill),yt[et]=gt==="x"?Se(Ae,[0,D-1],$e,At,yt[et]):gt==="y"?be(Ae,[0,z-1],$e,At,yt[et]):we(Ae,[0,V-1],$e,At,yt[et]),et++)}}),A===0&&Q(),o._meshX=d,o._meshY=u,o._meshZ=x,o._meshIntensity=p,o._Xs=E,o._Ys=P,o._Zs=I}(),o}F.exports={findNearestOnAxis:s,generateIsoMeshes:n,createIsosurfaceTrace:function(o,l){var c=o.glplot.gl,d=T({gl:c}),u=new t(o,d,l.uid);return d._trace=u,u.update(l),o.glplot.add(d),u}}},70548:function(F,C,e){"use strict";var T=e(3400),k=e(24040),a=e(50048),w=e(27260);function b(f,s,t,i,r){var n=r("isomin"),o=r("isomax");o!=null&&n!=null&&n>o&&(s.isomin=null,s.isomax=null);var l=r("x"),c=r("y"),d=r("z"),u=r("value");l&&l.length&&c&&c.length&&d&&d.length&&u&&u.length?(k.getComponentMethod("calendars","handleTraceDefaults")(f,s,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach(function(x){r(x+"hoverformat");var p="caps."+x;r(p+".show")&&r(p+".fill");var g="slices."+x;r(g+".show")&&(r(g+".fill"),r(g+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){r(x)}),w(f,s,i,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}F.exports={supplyDefaults:function(f,s,t,i){b(f,s,0,i,function(r,n){return T.coerce(f,s,a,r,n)})},supplyIsoDefaults:b}},6296:function(F,C,e){"use strict";F.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(F,C,e){"use strict";var T=e(49084),k=e(29736).axisHoverFormat,a=e(21776).Ks,w=e(16716),b=e(45464),f=e(92880).extendFlat;F.exports=f({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},T("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:f({},w.contours.x.show,{}),color:w.contours.x.color,width:w.contours.x.width,editType:"calc"},lightposition:{x:f({},w.lightposition.x,{dflt:1e5}),y:f({},w.lightposition.y,{dflt:1e5}),z:f({},w.lightposition.z,{dflt:0}),editType:"calc"},lighting:f({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},w.lighting),hoverinfo:f({},b.hoverinfo,{editType:"calc"}),showlegend:f({},b.showlegend,{dflt:!1})})},1876:function(F,C,e){"use strict";var T=e(47128);F.exports=function(k,a){a.intensity&&T(k,a,{vals:a.intensity,containerStr:"",cLetter:"c"})}},576:function(F,C,e){"use strict";var T=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,a=e(67792).alpha_shape,w=e(67792).convex_hull,b=e(33040).parseColorScale,f=e(3400).isArrayOrTypedArray,s=e(43080),t=e(8932).extractOpts,i=e(52094);function r(u,x,p){this.scene=u,this.uid=p,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var n=r.prototype;function o(u){for(var x=[],p=u.length,g=0;g<p;g++)x[g]=s(u[g]);return x}function l(u,x,p,g){for(var m=[],y=x.length,v=0;v<y;v++)m[v]=u.d2l(x[v],0,g)*p;return m}function c(u){for(var x=[],p=u.length,g=0;g<p;g++)x[g]=Math.round(u[g]);return x}function d(u,x){for(var p=u.length,g=0;g<p;g++)if(u[g]<=-.5||u[g]>=x-.5)return!1;return!0}n.handlePick=function(u){if(u.object===this.mesh){var x=u.index=u.data.index;u.data._cellCenter?u.traceCoordinate=u.data.dataCoordinate:u.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var p=this.data.hovertext||this.data.text;return f(p)&&p[x]!==void 0?u.textLabel=p[x]:p&&(u.textLabel=p),!0}},n.update=function(u){var x=this.scene,p=x.fullSceneLayout;this.data=u;var g,m=u.x.length,y=i(l(p.xaxis,u.x,x.dataScale[0],u.xcalendar),l(p.yaxis,u.y,x.dataScale[1],u.ycalendar),l(p.zaxis,u.z,x.dataScale[2],u.zcalendar));if(u.i&&u.j&&u.k){if(u.i.length!==u.j.length||u.j.length!==u.k.length||!d(u.i,m)||!d(u.j,m)||!d(u.k,m))return;g=i(c(u.i),c(u.j),c(u.k))}else g=u.alphahull===0?w(y):u.alphahull>0?a(u.alphahull,y):function(S,A){for(var E=["x","y","z"].indexOf(S),P=[],I=A.length,D=0;D<I;D++)P[D]=[A[D][(E+1)%3],A[D][(E+2)%3]];return k(P)}(u.delaunayaxis,y);var v={positions:y,cells:g,lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,contourEnable:u.contour.show,contourColor:s(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading};if(u.intensity){var _=t(u);this.color="#fff";var h=u.intensitymode;v[h+"Intensity"]=u.intensity,v[h+"IntensityBounds"]=[_.min,_.max],v.colormap=b(u)}else u.vertexcolor?(this.color=u.vertexcolor[0],v.vertexColors=o(u.vertexcolor)):u.facecolor?(this.color=u.facecolor[0],v.cellColors=o(u.facecolor)):(this.color=u.color,v.meshColor=s(u.color));this.mesh.update(v)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(u,x){var p=u.glplot.gl,g=T({gl:p}),m=new r(u,g,x.uid);return g._trace=m,m.update(x),u.glplot.add(g),m}},74212:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(27260),w=e(52948);F.exports=function(b,f,s,t){function i(n,o){return k.coerce(b,f,w,n,o)}function r(n){var o=n.map(function(l){var c=i(l);return c&&k.isArrayOrTypedArray(c)?c:null});return o.every(function(l){return l&&l.length===o[0].length})&&o}r(["x","y","z"])?(r(["i","j","k"]),(!f.i||f.j&&f.k)&&(!f.j||f.k&&f.i)&&(!f.k||f.i&&f.j)?(T.getComponentMethod("calendars","handleTraceDefaults")(b,f,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){i(n)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),a(b,f,t,i,{prefix:"",cLetter:"c"})):(f.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",s)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),f._length=null):f.visible=!1):f.visible=!1}},7404:function(F,C,e){"use strict";F.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(F,C,e){"use strict";var T=e(3400).extendFlat,k=e(52904),a=e(29736).axisHoverFormat,w=e(98192).u,b=e(55756),f=e(48164),s=f.INCREASING.COLOR,t=f.DECREASING.COLOR,i=k.line;function r(n){return{line:{color:T({},i.color,{dflt:n}),width:i.width,dash:w,editType:"style"},editType:"style"}}F.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:T({},i.width,{}),dash:T({},w,{}),editType:"style"},increasing:r(s),decreasing:r(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:T({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:k.zorder}},42812:function(F,C,e){"use strict";var T=e(3400),k=T._,a=e(54460),w=e(1220),b=e(39032).BADNUM;function f(t,i,r,n){return{o:t,h:i,l:r,c:n}}function s(t,i,r,n,o,l){for(var c=o.makeCalcdata(i,"open"),d=o.makeCalcdata(i,"high"),u=o.makeCalcdata(i,"low"),x=o.makeCalcdata(i,"close"),p=T.isArrayOrTypedArray(i.text),g=T.isArrayOrTypedArray(i.hovertext),m=!0,y=null,v=!!i.xperiodalignment,_=[],h=0;h<n.length;h++){var S=n[h],A=c[h],E=d[h],P=u[h],I=x[h];if(S!==b&&A!==b&&E!==b&&P!==b&&I!==b){I===A?y!==null&&I!==y&&(m=I>y):m=I>A,y=I;var D=l(A,E,P,I);D.pos=S,D.yc=(A+I)/2,D.i=h,D.dir=m?"increasing":"decreasing",D.x=D.pos,D.y=[P,E],v&&(D.orig_p=r[h]),p&&(D.tx=i.text[h]),g&&(D.htx=i.hovertext[h]),_.push(D)}else _.push({pos:S,empty:!0})}return i._extremes[o._id]=a.findExtremes(o,T.concat(u,d),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}F.exports={calc:function(t,i){var r=a.getFromId(t,i.xaxis),n=a.getFromId(t,i.yaxis),o=function(x,p,g){var m=g._minDiff;if(!m){var y,v=x._fullData,_=[];for(m=1/0,y=0;y<v.length;y++){var h=v[y];if(h.type==="ohlc"&&h.visible===!0&&h.xaxis===p._id){_.push(h);var S=p.makeCalcdata(h,"x");h._origX=S;var A=w(g,p,"x",S).vals;h._xcalc=A;var E=T.distinctVals(A).minDiff;E&&isFinite(E)&&(m=Math.min(m,E))}}for(m===1/0&&(m=1),y=0;y<_.length;y++)_[y]._minDiff=m}return m*g.tickwidth}(t,r,i),l=i._minDiff;i._minDiff=null;var c=i._origX;i._origX=null;var d=i._xcalc;i._xcalc=null;var u=s(t,i,c,d,n,f);return i._extremes[r._id]=a.findExtremes(r,d,{vpad:l/2}),u.length?(T.extendFlat(u[0].t,{wHover:l/2,tickLen:o}),u):[{t:{empty:!0}}]},calcCommon:s}},23860:function(F,C,e){"use strict";var T=e(3400),k=e(52744),a=e(31147),w=e(20279);function b(f,s,t,i){t(i+".line.color"),t(i+".line.width",s.line.width),t(i+".line.dash",s.line.dash)}F.exports=function(f,s,t,i){function r(n,o){return T.coerce(f,s,w,n,o)}k(f,s,r,i)?(a(f,s,i,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),b(0,s,r,"increasing"),b(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),i._requestRangeslider[s.xaxis]=!0,r("zorder")):s.visible=!1}},18720:function(F,C,e){"use strict";var T=e(54460),k=e(3400),a=e(93024),w=e(76308),b=e(3400).fillText,f=e(48164),s={increasing:f.INCREASING.SYMBOL,decreasing:f.DECREASING.SYMBOL};function t(n,o,l,c){var d,u,x=n.cd,p=n.xa,g=x[0].trace,m=x[0].t,y=g.type,v=y==="ohlc"?"l":"min",_=y==="ohlc"?"h":"max",h=m.bPos||0,S=function(B){return B.pos+h-o},A=m.bdPos||m.tickLen,E=m.wHover,P=Math.min(1,A/Math.abs(p.r2c(p.range[1])-p.r2c(p.range[0])));function I(B){var U=S(B);return a.inbox(U-E,U+E,d)}function D(B){var U=B[v],q=B[_];return U===q||a.inbox(U-l,q-l,d)}function z(B){return(I(B)+D(B))/2}d=n.maxHoverDistance-P,u=n.maxSpikeDistance-P;var V=a.getDistanceFunction(c,I,D,z);if(a.getClosest(x,V,n),n.index===!1)return null;var O=x[n.index];if(O.empty)return null;var j=g[O.dir],Y=j.line.color;return w.opacity(Y)&&j.line.width?n.color=Y:n.color=j.fillcolor,n.x0=p.c2p(O.pos+h-A,!0),n.x1=p.c2p(O.pos+h+A,!0),n.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,n.spikeDistance=z(O)*u/d,n.xSpike=p.c2p(O.pos,!0),n}function i(n,o,l,c){var d=n.cd,u=n.ya,x=d[0].trace,p=d[0].t,g=[],m=t(n,o,l,c);if(!m)return[];var y=d[m.index].hi||x.hoverinfo,v=y.split("+");if(y!=="all"&&v.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],h={},S=0;S<_.length;S++){var A,E=_[S],P=x[E][m.index],I=u.c2p(P,!0);P in h?(A=h[P]).yLabel+="<br>"+p.labels[E]+T.hoverLabelText(u,P,x.yhoverformat):((A=k.extendFlat({},m)).y0=A.y1=I,A.yLabelVal=P,A.yLabel=p.labels[E]+T.hoverLabelText(u,P,x.yhoverformat),A.name="",g.push(A),h[P]=A)}return g}function r(n,o,l,c){var d=n.cd,u=n.ya,x=d[0].trace,p=d[0].t,g=t(n,o,l,c);if(!g)return[];var m=d[g.index],y=g.index=m.i,v=m.dir;function _(D){return p.labels[D]+T.hoverLabelText(u,x[D][y],x.yhoverformat)}var h=m.hi||x.hoverinfo,S=h.split("+"),A=h==="all",E=A||S.indexOf("y")!==-1,P=A||S.indexOf("text")!==-1,I=E?[_("open"),_("high"),_("low"),_("close")+"  "+s[v]]:[];return P&&b(m,x,I),g.extraText=I.join("<br>"),g.y0=g.y1=u.c2p(m.yc,!0),[g]}F.exports={hoverPoints:function(n,o,l,c){return n.cd[0].trace.hoverlabel.split?i(n,o,l,c):r(n,o,l,c)},hoverSplit:i,hoverOnPoints:r}},65456:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(F,C,e){"use strict";var T=e(24040),k=e(3400);F.exports=function(a,w,b,f){var s=b("x"),t=b("open"),i=b("high"),r=b("low"),n=b("close");if(b("hoverlabel.split"),T.getComponentMethod("calendars","handleTraceDefaults")(a,w,["x"],f),t&&i&&r&&n){var o=Math.min(t.length,i.length,r.length,n.length);return s&&(o=Math.min(o,k.minRowLength(s))),w._length=o,o}}},36664:function(F,C,e){"use strict";var T=e(33428),k=e(3400);F.exports=function(a,w,b,f){var s=w.yaxis,t=w.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(f,b,"trace ohlc").each(function(r){var n=T.select(this),o=r[0],l=o.t;if(o.trace.visible!==!0||l.empty)n.remove();else{var c=l.tickLen,d=n.selectAll("path").data(k.identity);d.enter().append("path"),d.exit().remove(),d.attr("d",function(u){if(u.empty)return"M0,0Z";var x=t.c2p(u.pos-c,!0),p=t.c2p(u.pos+c,!0),g=i?(x+p)/2:t.c2p(u.pos,!0);return"M"+x+","+s.c2p(u.o,!0)+"H"+g+"M"+g+","+s.c2p(u.h,!0)+"V"+s.c2p(u.l,!0)+"M"+p+","+s.c2p(u.c,!0)+"H"+g})}})}},97384:function(F){"use strict";F.exports=function(C,e){var T,k=C.cd,a=C.xaxis,w=C.yaxis,b=[],f=k[0].t.bPos||0;if(e===!1)for(T=0;T<k.length;T++)k[T].selected=0;else for(T=0;T<k.length;T++){var s=k[T];e.contains([a.c2p(s.pos+f),w.c2p(s.yc)],null,s.i,C)?(b.push({pointNumber:s.i,x:a.c2d(s.pos),y:w.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},14008:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(76308);F.exports=function(w,b,f){var s=f||T.select(w).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=t[0].trace;T.select(this).selectAll("path").each(function(r){if(!r.empty){var n=i[r.dir].line;T.select(this).style("fill","none").call(a.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",i.selectedpoints&&!r.selected?.3:1)}})})}},72140:function(F,C,e){"use strict";var T=e(92880).extendFlat,k=e(45464),a=e(25376),w=e(49084),b=e(21776).Ks,f=e(86968).u,s=T({editType:"calc"},w("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});F.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:T({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:a({editType:"calc"}),tickfont:a({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(F,C,e){"use strict";var T=e(84888)._M,k=e(60268),a="parcats";C.name=a,C.plot=function(w,b,f,s){var t=T(w.calcdata,a);if(t.length){var i=t[0];k(w,i,f,s)}},C.clean=function(w,b,f,s){var t=s._has&&s._has("parcats"),i=b._has&&b._has("parcats");t&&!i&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(F,C,e){"use strict";var T=e(71688).wrap,k=e(94288).hasColorscale,a=e(47128),w=e(68944),b=e(43616),f=e(3400),s=e(38248);function t(n,o,l){n.valueInds.push(o),n.count+=l}function i(n,o,l){return{categoryInds:n,color:o,rawColor:l,valueInds:[],count:0}}function r(n,o,l){n.valueInds.push(o),n.count+=l}F.exports=function(n,o){var l=f.filterVisible(o.dimensions);if(l.length===0)return[];var c,d,u,x=l.map(function(q){var te;if(q.categoryorder==="trace")te=null;else if(q.categoryorder==="array")te=q.categoryarray;else{te=w(q.values);for(var ee=!0,Q=0;Q<te.length;Q++)if(!s(te[Q])){ee=!1;break}te.sort(ee?f.sorterAsc:void 0),q.categoryorder==="category descending"&&(te=te.reverse())}return function(J,K){K=K==null?[]:K.map(function(pe){return pe});var X={},ie={},se=[];K.forEach(function(pe,de){X[pe]=0,ie[pe]=de});for(var ae=0;ae<J.length;ae++){var ue,ve=J[ae];X[ve]===void 0?(X[ve]=1,ue=K.push(ve)-1,ie[ve]=ue):(X[ve]++,ue=ie[ve]),se.push(ue)}var ye=K.map(function(pe){return X[pe]});return{uniqueValues:K,uniqueCounts:ye,inds:se}}(q.values,te)});c=f.isArrayOrTypedArray(o.counts)?o.counts:[o.counts],function(q){var te,ee=q.map(function(Q){return Q.displayindex});if(function(Q){for(var J=new Array(Q.length),K=0;K<Q.length;K++){if(Q[K]<0||Q[K]>=Q.length||J[Q[K]]!==void 0)return!1;J[Q[K]]=!0}return!0}(ee))for(te=0;te<q.length;te++)q[te]._displayindex=q[te].displayindex;else for(te=0;te<q.length;te++)q[te]._displayindex=te}(l),l.forEach(function(q,te){(function(ee,Q){ee._categoryarray=Q.uniqueValues,ee.ticktext===null||ee.ticktext===void 0?ee._ticktext=[]:ee._ticktext=ee.ticktext.slice();for(var J=ee._ticktext.length;J<Q.uniqueValues.length;J++)ee._ticktext.push(Q.uniqueValues[J])})(q,x[te])});var p,g=o.line;g?(k(o,"line")&&a(n,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),p=b.tryColorscale(g)):p=f.identity;var m,y,v,_,h,S=l[0].values.length,A={},E=x.map(function(q){return q.inds});for(u=0,m=0;m<S;m++){var P=[];for(y=0;y<E.length;y++)P.push(E[y][m]);d=c[m%c.length],u+=d;var I=(v=m,_=void 0,h=void 0,f.isArrayOrTypedArray(g.color)?h=_=g.color[v%g.color.length]:_=g.color,{color:p(_),rawColor:h}),D=P+"-"+I.rawColor;A[D]===void 0&&(A[D]=i(P,I.color,I.rawColor)),r(A[D],m,d)}var z,V=l.map(function(q,te){return function(ee,Q,J,K,X){return{dimensionInd:ee,containerInd:Q,displayInd:J,dimensionLabel:K,count:X,categories:[],dragX:null}}(te,q._index,q._displayindex,q.label,u)});for(m=0;m<S;m++)for(d=c[m%c.length],y=0;y<V.length;y++){var O=V[y].containerInd,j=x[y].inds[m],Y=V[y].categories;if(Y[j]===void 0){var B=o.dimensions[O]._categoryarray[j],U=o.dimensions[O]._ticktext[j];Y[j]={dimensionInd:y,categoryInd:z=j,categoryValue:B,displayInd:z,categoryLabel:U,valueInds:[],count:0,dragY:null}}t(Y[j],m,d)}return T(function(q,te,ee){var Q=q.map(function(J){return J.categories.length}).reduce(function(J,K){return Math.max(J,K)});return{dimensions:q,paths:te,trace:void 0,maxCats:Q,count:ee}}(V,A,u))}},76671:function(F,C,e){"use strict";var T=e(3400),k=e(94288).hasColorscale,a=e(27260),w=e(86968).Q,b=e(51272),f=e(72140),s=e(26284),t=e(38116).isTypedArraySpec;function i(r,n){function o(g,m){return T.coerce(r,n,f.dimensions,g,m)}var l=o("values"),c=o("visible");if(l&&l.length||(c=n.visible=!1),c){o("label"),o("displayindex",n._index);var d,u=r.categoryarray,x=T.isArrayOrTypedArray(u)&&u.length>0||t(u);x&&(d="array");var p=o("categoryorder",d);p==="array"?(o("categoryarray"),o("ticktext")):(delete r.categoryarray,delete r.ticktext),x||p!=="array"||(n.categoryorder="trace")}}F.exports=function(r,n,o,l){function c(p,g){return T.coerce(r,n,f,p,g)}var d=b(r,n,{name:"dimensions",handleItemDefaults:i}),u=function(p,g,m,y,v){v("line.shape"),v("line.hovertemplate");var _=v("line.color",y.colorway[0]);if(k(p,"line")&&T.isArrayOrTypedArray(_)){if(_.length)return v("line.colorscale"),a(p,g,y,v,{prefix:"line.",cLetter:"c"}),_.length;g.line.color=m}return 1/0}(r,n,o,l,c);w(n,l,c),Array.isArray(d)&&d.length||(n.visible=!1),s(n,d,"values",u),c("hoveron"),c("hovertemplate"),c("arrangement"),c("bundlecolors"),c("sortpaths"),c("counts");var x=l.font;T.coerceFont(c,"labelfont",x,{overrideDflt:{size:Math.round(x.size)}}),T.coerceFont(c,"tickfont",x,{autoShadowDflt:!0,overrideDflt:{size:Math.round(x.size/1.2)}})}},22020:function(F,C,e){"use strict";F.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(F,C,e){"use strict";var T=e(33428),k=e(67756).Gz,a=e(36424),w=e(93024),b=e(3400),f=b.strTranslate,s=e(43616),t=e(49760),i=e(72736);function r(ee,Q,J,K){var X=Q._context.staticPlot,ie=ee.map(Y.bind(0,Q,J)),se=K.selectAll("g.parcatslayer").data([null]);se.enter().append("g").attr("class","parcatslayer").style("pointer-events",X?"none":"all");var ae=se.selectAll("g.trace.parcats").data(ie,n),ue=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(ge){return f(ge.x,ge.y)}),ue.append("g").attr("class","paths");var ve=ae.select("g.paths").selectAll("path.path").data(function(ge){return ge.paths},n);ve.attr("fill",function(ge){return ge.model.color});var ye=ve.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ge){return ge.model.color}).attr("fill-opacity",0);g(ye),ve.attr("d",function(ge){return ge.svgD}),ye.empty()||ve.sort(l),ve.exit().remove(),ve.on("mouseover",c).on("mouseout",d).on("click",p),ue.append("g").attr("class","dimensions");var pe=ae.select("g.dimensions").selectAll("g.dimension").data(function(ge){return ge.dimensions},n);pe.enter().append("g").attr("class","dimension"),pe.attr("transform",function(ge){return f(ge.x,0)}),pe.exit().remove();var de=pe.selectAll("g.category").data(function(ge){return ge.categories},n),me=de.enter().append("g").attr("class","category");de.attr("transform",function(ge){return f(0,ge.y)}),me.append("rect").attr("class","catrect").attr("pointer-events","none"),de.select("rect.catrect").attr("fill","none").attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}),y(me);var ke=de.selectAll("rect.bandrect").data(function(ge){return ge.bands},n);ke.each(function(){b.raiseToTop(this)}),ke.attr("fill",function(ge){return ge.color});var Ce=ke.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ge){return ge.color}).attr("fill-opacity",0);ke.attr("fill",function(ge){return ge.color}).attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}).attr("y",function(ge){return ge.y}).attr("cursor",function(ge){return ge.parcatsViewModel.arrangement==="fixed"?"default":ge.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),v(Ce),ke.exit().remove(),me.append("text").attr("class","catlabel").attr("pointer-events","none"),de.select("text.catlabel").attr("text-anchor",function(ge){return o(ge)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(ge){return o(ge)?ge.width+5:-5}).attr("y",function(ge){return ge.height/2}).text(function(ge){return ge.model.categoryLabel}).each(function(ge){s.font(T.select(this),ge.parcatsViewModel.categorylabelfont),i.convertToTspans(T.select(this),Q)}),me.append("text").attr("class","dimlabel"),de.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ge){return ge.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(ge){return ge.width/2}).attr("y",-5).text(function(ge,oe){return oe===0?ge.parcatsViewModel.model.dimensions[ge.model.dimensionInd].dimensionLabel:null}).each(function(ge){s.font(T.select(this),ge.parcatsViewModel.labelfont)}),de.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",P),de.exit().remove(),pe.call(T.behavior.drag().origin(function(ge){return{x:ge.x,y:0}}).on("dragstart",I).on("drag",D).on("dragend",z)),ae.each(function(ge){ge.traceSelection=T.select(this),ge.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path"),ge.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function n(ee){return ee.key}function o(ee){var Q=ee.parcatsViewModel.dimensions.length,J=ee.parcatsViewModel.dimensions[Q-1].model.dimensionInd;return ee.model.dimensionInd===J}function l(ee,Q){return ee.model.rawColor>Q.model.rawColor?1:ee.model.rawColor<Q.model.rawColor?-1:0}function c(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),m(T.select(this));var Q=u(ee),J=x(ee);if(ee.parcatsViewModel.graphDiv.emit("plotly_hover",{points:Q,event:T.event,constraints:J}),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K,X,ie,se=T.mouse(this)[0],ae=ee.parcatsViewModel.graphDiv,ue=ee.parcatsViewModel.trace,ve=ae._fullLayout,ye=ve._paperdiv.node().getBoundingClientRect(),pe=ee.parcatsViewModel.graphDiv.getBoundingClientRect();for(ie=0;ie<ee.leftXs.length-1;ie++)if(ee.leftXs[ie]+ee.dimWidths[ie]-2<=se&&se<=ee.leftXs[ie+1]+2){var de=ee.parcatsViewModel.dimensions[ie],me=ee.parcatsViewModel.dimensions[ie+1];K=(de.x+de.width+me.x)/2,X=(ee.topYs[ie]+ee.topYs[ie+1]+ee.height)/2;break}var ke=ee.parcatsViewModel.x+K,Ce=ee.parcatsViewModel.y+X,ge=t.mostReadable(ee.model.color,["black","white"]),oe=ee.model.count,re=oe/ee.parcatsViewModel.model.count,fe={countLabel:oe,probabilityLabel:re.toFixed(3)},Se=[];ee.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Se.push(["Count:",fe.countLabel].join(" ")),ee.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Se.push(["P:",fe.probabilityLabel].join(" "));var be=Se.join("<br>"),we=T.mouse(ae)[0];w.loneHover({trace:ue,x:ke-ye.left+pe.left,y:Ce-ye.top+pe.top,text:be,color:ee.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ge,idealAlign:we<ke?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:fe,eventData:[{data:ue._input,fullData:ue,count:oe,probability:re}]},{container:ve._hoverlayer.node(),outerContainer:ve._paper.node(),gd:ae})}}}function d(ee){if(!ee.parcatsViewModel.dragDimension&&(g(T.select(this)),w.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ee.parcatsViewModel.pathSelection.sort(l),ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var Q=u(ee),J=x(ee);ee.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:Q,event:T.event,constraints:J})}}function u(ee){for(var Q=[],J=V(ee.parcatsViewModel),K=0;K<ee.model.valueInds.length;K++){var X=ee.model.valueInds[K];Q.push({curveNumber:J,pointNumber:X})}return Q}function x(ee){for(var Q={},J=ee.parcatsViewModel.model.dimensions,K=0;K<J.length;K++){var X=J[K],ie=X.categories[ee.model.categoryInds[K]];Q[X.containerInd]=ie.categoryValue}return ee.model.rawColor!==void 0&&(Q.color=ee.model.rawColor),Q}function p(ee){if(ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var Q=u(ee),J=x(ee);ee.parcatsViewModel.graphDiv.emit("plotly_click",{points:Q,event:T.event,constraints:J})}}function g(ee){ee.attr("fill",function(Q){return Q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m(ee){ee.attr("fill-opacity",.8).attr("stroke",function(Q){return t.mostReadable(Q.model.color,["black","white"])}).attr("stroke-width",.3)}function y(ee){ee.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function v(ee){ee.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(ee){var Q=ee.parcatsViewModel.pathSelection,J=ee.categoryViewModel.model.dimensionInd,K=ee.categoryViewModel.model.categoryInd;return Q.filter(function(X){return X.model.categoryInds[J]===K&&X.model.color===ee.color})}function h(ee,Q,J){var K=T.select(ee).datum(),X=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,se=T.select(ee.parentNode).selectAll("rect.bandrect"),ae=[];se.each(function(ve){_(ve).each(function(ye){Array.prototype.push.apply(ae,u(ye))})});var ue={};ue[X.dimensionInd]=X.categoryValue,ie.emit(Q,{points:ae,event:J,constraints:ue})}function S(ee,Q,J){var K=T.select(ee).datum(),X=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,se=_(K),ae=[];se.each(function(ve){Array.prototype.push.apply(ae,u(ve))});var ue={};ue[X.dimensionInd]=X.categoryValue,K.rawColor!==void 0&&(ue.color=K.rawColor),ie.emit(Q,{points:ae,event:J,constraints:ue})}function A(ee,Q,J){ee._fullLayout._calcInverseTransform(ee);var K,X,ie=ee._fullLayout._invScaleX,se=ee._fullLayout._invScaleY,ae=T.select(J.parentNode).select("rect.catrect"),ue=ae.node().getBoundingClientRect(),ve=ae.datum(),ye=ve.parcatsViewModel,pe=ye.model.dimensions[ve.model.dimensionInd],de=ye.trace,me=ue.top+ue.height/2;ye.dimensions.length>1&&pe.displayInd===ye.dimensions.length-1?(K=ue.left,X="left"):(K=ue.left+ue.width,X="right");var ke=ve.model.count,Ce=ve.model.categoryLabel,ge=ke/ve.parcatsViewModel.model.count,oe={countLabel:ke,categoryLabel:Ce,probabilityLabel:ge.toFixed(3)},re=[];ve.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&re.push(["Count:",oe.countLabel].join(" ")),ve.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&re.push(["P("+oe.categoryLabel+"):",oe.probabilityLabel].join(" "));var fe=re.join("<br>");return{trace:de,x:ie*(K-Q.left),y:se*(me-Q.top),text:fe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:X,hovertemplate:de.hovertemplate,hovertemplateLabels:oe,eventData:[{data:de._input,fullData:de,count:ke,category:Ce,probability:ge}]}}function E(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(T.mouse(this)[1]<-1)return;var Q,J=ee.parcatsViewModel.graphDiv,K=J._fullLayout,X=K._paperdiv.node().getBoundingClientRect(),ie=ee.parcatsViewModel.hoveron,se=this;ie==="color"?(function(ae){var ue=T.select(ae).datum(),ve=_(ue);m(ve),ve.each(function(){b.raiseToTop(this)}),T.select(ae.parentNode).selectAll("rect.bandrect").filter(function(ye){return ye.color===ue.color}).each(function(){b.raiseToTop(this),T.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(se),S(se,"plotly_hover",T.event)):(function(ae){T.select(ae.parentNode).selectAll("rect.bandrect").each(function(ue){var ve=_(ue);m(ve),ve.each(function(){b.raiseToTop(this)})}),T.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(se),h(se,"plotly_hover",T.event)),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ie==="category"?Q=A(J,X,se):ie==="color"?Q=function(ae,ue,ve){ae._fullLayout._calcInverseTransform(ae);var ye,pe,de=ae._fullLayout._invScaleX,me=ae._fullLayout._invScaleY,ke=ve.getBoundingClientRect(),Ce=T.select(ve).datum(),ge=Ce.categoryViewModel,oe=ge.parcatsViewModel,re=oe.model.dimensions[ge.model.dimensionInd],fe=oe.trace,Se=ke.y+ke.height/2;oe.dimensions.length>1&&re.displayInd===oe.dimensions.length-1?(ye=ke.left,pe="left"):(ye=ke.left+ke.width,pe="right");var be=ge.model.categoryLabel,we=Ce.parcatsViewModel.model.count,Me=0;Ce.categoryViewModel.bands.forEach(function(Ze){Ze.color===Ce.color&&(Me+=Ze.count)});var Pe=ge.model.count,De=0;oe.pathSelection.each(function(Ze){Ze.model.color===Ce.color&&(De+=Ze.model.count)});var he=Me/we,_e=Me/De,Ae=Me/Pe,Oe={countLabel:Me,categoryLabel:be,probabilityLabel:he.toFixed(3)},Ee=[];ge.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ee.push(["Count:",Oe.countLabel].join(" ")),ge.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ee.push("P(color \u2229 "+be+"): "+Oe.probabilityLabel),Ee.push("P("+be+" | color): "+_e.toFixed(3)),Ee.push("P(color | "+be+"): "+Ae.toFixed(3)));var Be=Ee.join("<br>"),Ve=t.mostReadable(Ce.color,["black","white"]);return{trace:fe,x:de*(ye-ue.left),y:me*(Se-ue.top),text:Be,color:Ce.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:pe,hovertemplate:fe.hovertemplate,hovertemplateLabels:Oe,eventData:[{data:fe._input,fullData:fe,category:be,count:we,probability:he,categorycount:Pe,colorcount:De,bandcolorcount:Me}]}}(J,X,se):ie==="dimension"&&(Q=function(ae,ue,ve){var ye=[];return T.select(ve.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ye.push(A(ae,ue,this))}),ye}(J,X,se)),Q&&w.loneHover(Q,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:J}))}}function P(ee){var Q=ee.parcatsViewModel;Q.dragDimension||(g(Q.pathSelection),y(Q.dimensionSelection.selectAll("g.category")),v(Q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),w.loneUnhover(Q.graphDiv._fullLayout._hoverlayer.node()),Q.pathSelection.sort(l),Q.hoverinfoItems.indexOf("skip")!==-1)||(ee.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",T.event):h(this,"plotly_unhover",T.event))}function I(ee){ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragDimensionDisplayInd=ee.model.displayInd,ee.initialDragDimensionDisplayInds=ee.parcatsViewModel.model.dimensions.map(function(Q){return Q.displayInd}),ee.dragHasMoved=!1,ee.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(Q){var J=T.mouse(this)[0],K=T.mouse(this)[1];-2<=J&&J<=Q.width+2&&-2<=K&&K<=Q.height+2&&(ee.dragCategoryDisplayInd=Q.model.displayInd,ee.initialDragCategoryDisplayInds=ee.model.categories.map(function(X){return X.displayInd}),Q.model.dragY=Q.y,b.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<K&&K<=X.y+X.height&&(ee.potentialClickBand=this)}))}),ee.parcatsViewModel.dragDimension=ee,w.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function D(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragHasMoved=!0,ee.dragDimensionDisplayInd!==null)){var Q=ee.dragDimensionDisplayInd,J=Q-1,K=Q+1,X=ee.parcatsViewModel.dimensions[Q];if(ee.dragCategoryDisplayInd!==null){var ie=X.categories[ee.dragCategoryDisplayInd];ie.model.dragY+=T.event.dy;var se=ie.model.dragY,ae=ie.model.displayInd,ue=X.categories,ve=ue[ae-1],ye=ue[ae+1];ve!==void 0&&se<ve.y+ve.height/2&&(ie.model.displayInd=ve.model.displayInd,ve.model.displayInd=ae),ye!==void 0&&se+ie.height>ye.y+ye.height/2&&(ie.model.displayInd=ye.model.displayInd,ye.model.displayInd=ae),ee.dragCategoryDisplayInd=ie.model.displayInd}if(ee.dragCategoryDisplayInd===null||ee.parcatsViewModel.arrangement==="freeform"){X.model.dragX=T.event.x;var pe=ee.parcatsViewModel.dimensions[J],de=ee.parcatsViewModel.dimensions[K];pe!==void 0&&X.model.dragX<pe.x+pe.width&&(X.model.displayInd=pe.model.displayInd,pe.model.displayInd=Q),de!==void 0&&X.model.dragX+X.width>de.x&&(X.model.displayInd=de.model.displayInd,de.model.displayInd=ee.dragDimensionDisplayInd),ee.dragDimensionDisplayInd=X.model.displayInd}q(ee.parcatsViewModel),U(ee.parcatsViewModel),j(ee.parcatsViewModel),O(ee.parcatsViewModel)}}function z(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&ee.dragDimensionDisplayInd!==null){T.select(this).selectAll("text").attr("font-weight","normal");var Q={},J=V(ee.parcatsViewModel),K=ee.parcatsViewModel.model.dimensions.map(function(ye){return ye.displayInd}),X=ee.initialDragDimensionDisplayInds.some(function(ye,pe){return ye!==K[pe]});X&&K.forEach(function(ye,pe){var de=ee.parcatsViewModel.model.dimensions[pe].containerInd;Q["dimensions["+de+"].displayindex"]=ye});var ie=!1;if(ee.dragCategoryDisplayInd!==null){var se=ee.model.categories.map(function(ye){return ye.displayInd});if(ie=ee.initialDragCategoryDisplayInds.some(function(ye,pe){return ye!==se[pe]})){var ae=ee.model.categories.slice().sort(function(ye,pe){return ye.displayInd-pe.displayInd}),ue=ae.map(function(ye){return ye.categoryValue}),ve=ae.map(function(ye){return ye.categoryLabel});Q["dimensions["+ee.model.containerInd+"].categoryarray"]=[ue],Q["dimensions["+ee.model.containerInd+"].ticktext"]=[ve],Q["dimensions["+ee.model.containerInd+"].categoryorder"]="array"}}ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!ee.dragHasMoved&&ee.potentialClickBand&&(ee.parcatsViewModel.hoveron==="color"?S(ee.potentialClickBand,"plotly_click",T.event.sourceEvent):h(ee.potentialClickBand,"plotly_click",T.event.sourceEvent)),ee.model.dragX=null,ee.dragCategoryDisplayInd!==null&&(ee.parcatsViewModel.dimensions[ee.dragDimensionDisplayInd].categories[ee.dragCategoryDisplayInd].model.dragY=null,ee.dragCategoryDisplayInd=null),ee.dragDimensionDisplayInd=null,ee.parcatsViewModel.dragDimension=null,ee.dragHasMoved=null,ee.potentialClickBand=null,q(ee.parcatsViewModel),U(ee.parcatsViewModel),T.transition().duration(300).ease("cubic-in-out").each(function(){j(ee.parcatsViewModel,!0),O(ee.parcatsViewModel,!0)}).each("end",function(){(X||ie)&&a.restyle(ee.parcatsViewModel.graphDiv,Q,[J])})}}function V(ee){for(var Q,J=ee.graphDiv._fullData,K=0;K<J.length;K++)if(ee.key===J[K].uid){Q=K;break}return Q}function O(ee,Q){var J;Q===void 0&&(Q=!1),ee.pathSelection.data(function(K){return K.paths},n),(J=ee.pathSelection,Q?J.transition():J).attr("d",function(K){return K.svgD})}function j(ee,Q){function J(se){return Q?se.transition():se}Q===void 0&&(Q=!1),ee.dimensionSelection.data(function(se){return se.dimensions},n);var K=ee.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},n);J(ee.dimensionSelection).attr("transform",function(se){return f(se.x,0)}),J(K).attr("transform",function(se){return f(0,se.y)}),K.select(".dimlabel").text(function(se,ae){return ae===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}),K.select(".catlabel").attr("text-anchor",function(se){return o(se)?"start":"end"}).attr("x",function(se){return o(se)?se.width+5:-5}).each(function(se){var ae,ue;o(se)?(ae=se.width+5,ue="start"):(ae=-5,ue="end"),T.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",ue)});var X=K.selectAll("rect.bandrect").data(function(se){return se.bands},n),ie=X.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);X.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),v(ie),X.each(function(){b.raiseToTop(this)}),X.exit().remove()}function Y(ee,Q,J){var K,X=J[0],ie=Q.margin||{l:80,r:80,t:100,b:80},se=X.trace,ae=se.domain,ue=Q.width,ve=Q.height,ye=Math.floor(ue*(ae.x[1]-ae.x[0])),pe=Math.floor(ve*(ae.y[1]-ae.y[0])),de=ae.x[0]*ue+ie.l,me=Q.height-ae.y[1]*Q.height+ie.t,ke=se.line.shape;K=se.hoverinfo==="all"?["count","probability"]:(se.hoverinfo||"").split("+");var Ce={trace:se,key:se.uid,model:X,x:de,y:me,width:ye,height:pe,hoveron:se.hoveron,hoverinfoItems:K,arrangement:se.arrangement,bundlecolors:se.bundlecolors,sortpaths:se.sortpaths,labelfont:se.labelfont,categorylabelfont:se.tickfont,pathShape:ke,dragDimension:null,margin:ie,paths:[],dimensions:[],graphDiv:ee,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(q(Ce),U(Ce)),Ce}function B(ee,Q,J,K,X){var ie,se,ae=[],ue=[];for(se=0;se<J.length-1;se++)ie=k(J[se]+ee[se],ee[se+1]),ae.push(ie(X)),ue.push(ie(1-X));var ve="M "+ee[0]+","+Q[0];for(ve+="l"+J[0]+",0 ",se=1;se<J.length;se++)ve+="C"+ae[se-1]+","+Q[se-1]+" "+ue[se-1]+","+Q[se]+" "+ee[se]+","+Q[se],ve+="l"+J[se]+",0 ";for(ve+="l0,"+K+" ",ve+="l -"+J[J.length-1]+",0 ",se=J.length-2;se>=0;se--)ve+="C"+ue[se]+","+(Q[se+1]+K)+" "+ae[se]+","+(Q[se]+K)+" "+(ee[se]+J[se])+","+(Q[se]+K),ve+="l-"+J[se]+",0 ";return ve+"Z"}function U(ee){var Q=ee.dimensions,J=ee.model,K=Q.map(function(Oe){return Oe.categories.map(function(Ee){return Ee.y})}),X=ee.model.dimensions.map(function(Oe){return Oe.categories.map(function(Ee){return Ee.displayInd})}),ie=ee.model.dimensions.map(function(Oe){return Oe.displayInd}),se=ee.dimensions.map(function(Oe){return Oe.model.dimensionInd}),ae=Q.map(function(Oe){return Oe.x}),ue=Q.map(function(Oe){return Oe.width}),ve=[];for(var ye in J.paths)J.paths.hasOwnProperty(ye)&&ve.push(J.paths[ye]);function pe(Oe){var Ee=Oe.categoryInds.map(function(Be,Ve){return X[Ve][Be]});return se.map(function(Be){return Ee[Be]})}ve.sort(function(Oe,Ee){var Be=pe(Oe),Ve=pe(Ee);return ee.sortpaths==="backward"&&(Be.reverse(),Ve.reverse()),Be.push(Oe.valueInds[0]),Ve.push(Ee.valueInds[0]),ee.bundlecolors&&(Be.unshift(Oe.rawColor),Ve.unshift(Ee.rawColor)),Be<Ve?-1:Be>Ve?1:0});for(var de=new Array(ve.length),me=Q[0].model.count,ke=Q[0].categories.map(function(Oe){return Oe.height}).reduce(function(Oe,Ee){return Oe+Ee}),Ce=0;Ce<ve.length;Ce++){var ge,oe=ve[Ce];ge=me>0?ke*(oe.count/me):0;for(var re,fe=new Array(K.length),Se=0;Se<oe.categoryInds.length;Se++){var be=oe.categoryInds[Se],we=X[Se][be],Me=ie[Se];fe[Me]=K[Me][we],K[Me][we]+=ge;var Pe=ee.dimensions[Me].categories[we],De=Pe.bands.length,he=Pe.bands[De-1];if(he===void 0||oe.rawColor!==he.rawColor){var _e=he===void 0?0:he.y+he.height;Pe.bands.push({key:_e,color:oe.color,rawColor:oe.rawColor,height:ge,width:Pe.width,count:oe.count,y:_e,categoryViewModel:Pe,parcatsViewModel:ee})}else{var Ae=Pe.bands[De-1];Ae.height+=ge,Ae.count+=oe.count}}re=ee.pathShape==="hspline"?B(ae,fe,ue,ge,.5):B(ae,fe,ue,ge,0),de[Ce]={key:oe.valueInds[0],model:oe,height:ge,leftXs:ae,topYs:fe,dimWidths:ue,svgD:re,parcatsViewModel:ee}}ee.paths=de}function q(ee){var Q=ee.model.dimensions.map(function(se){return{displayInd:se.displayInd,dimensionInd:se.dimensionInd}});Q.sort(function(se,ae){return se.displayInd-ae.displayInd});var J=[];for(var K in Q){var X=Q[K].dimensionInd,ie=ee.model.dimensions[X];J.push(te(ee,ie))}ee.dimensions=J}function te(ee,Q){var J,K=ee.model.dimensions.length,X=Q.displayInd;J=40+(K>1?(ee.width-80-16)/(K-1):0)*X;var ie,se,ae,ue,ve,ye=[],pe=ee.model.maxCats,de=Q.categories.length,me=Q.count,ke=ee.height-8*(pe-1),Ce=8*(pe-de)/2,ge=Q.categories.map(function(oe){return{displayInd:oe.displayInd,categoryInd:oe.categoryInd}});for(ge.sort(function(oe,re){return oe.displayInd-re.displayInd}),ve=0;ve<de;ve++)ue=ge[ve].categoryInd,se=Q.categories[ue],ie=me>0?se.count/me*ke:0,ae={key:se.valueInds[0],model:se,width:16,height:ie,y:se.dragY!==null?se.dragY:Ce,bands:[],parcatsViewModel:ee},Ce=Ce+ie+8,ye.push(ae);return{key:Q.dimensionInd,x:Q.dragX!==null?Q.dragX:J,y:0,width:16,model:Q,categories:ye,parcatsViewModel:ee,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}F.exports=function(ee,Q,J,K){r(J,ee,K,Q)}},60268:function(F,C,e){"use strict";var T=e(51036);F.exports=function(k,a,w,b){var f=k._fullLayout,s=f._paper,t=f._size;T(k,s,a,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},w,b)}},82296:function(F,C,e){"use strict";var T=e(49084),k=e(94724),a=e(25376),w=e(86968).u,b=e(92880).extendFlat,f=e(31780).templatedArray;F.exports={domain:w({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:a({editType:"plot"}),tickfont:a({autoShadowDflt:!0,editType:"plot"}),rangefont:a({editType:"plot"}),dimensions:f("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},T("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(F,C,e){"use strict";var T=e(30140),k=e(33428),a=e(71688).keyFun,w=e(71688).repeat,b=e(3400).sorterAsc,f=e(3400).strTranslate,s=T.bar.snapRatio;function t(A,E){return A*(1-s)+E*s}var i=T.bar.snapClose;function r(A,E){return A*(1-i)+E*i}function n(A,E,P,I){if(function(te,ee){for(var Q=0;Q<ee.length;Q++)if(te>=ee[Q][0]&&te<=ee[Q][1])return!0;return!1}(P,I))return P;var D=A?-1:1,z=0,V=E.length-1;if(D<0){var O=z;z=V,V=O}for(var j=E[z],Y=j,B=z;D*B<D*V;B+=D){var U=B+D,q=E[U];if(D*P<D*r(j,q))return t(j,Y);if(D*P<D*q||U===V)return t(q,j);Y=j,j=q}}function o(A){A.attr("x",-T.bar.captureWidth/2).attr("width",T.bar.captureWidth)}function l(A){A.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(A){if(!A.brush.filterSpecified)return"0,"+A.height;for(var E,P,I,D=d(A.brush.filter.getConsolidated(),A.height),z=[0],V=D.length?D[0][0]:null,O=0;O<D.length;O++)P=(E=D[O])[1]-E[0],z.push(V),z.push(P),(I=O+1)<D.length&&(V=D[I][0]-E[1]);return z.push(A.height),z}function d(A,E){return A.map(function(P){return P.map(function(I){return Math.max(0,I*E)}).sort(b)})}function u(){k.select(document.body).style("cursor",null)}function x(A){A.attr("stroke-dasharray",c)}function p(A,E){var P=k.select(A).selectAll(".highlight, .highlight-shadow");x(E?P.transition().duration(T.bar.snapDuration).each("end",E):P)}function g(A,E){var P,I=A.brush,D=NaN,z={};if(I.filterSpecified){var V=A.height,O=I.filter.getConsolidated(),j=d(O,V),Y=NaN,B=NaN,U=NaN;for(P=0;P<=j.length;P++){var q=j[P];if(q&&q[0]<=E&&E<=q[1]){Y=P;break}if(B=P?P-1:NaN,q&&q[0]>E){U=P;break}}if(D=Y,isNaN(D)&&(D=isNaN(B)||isNaN(U)?isNaN(B)?U:B:E-j[B][1]<j[U][0]-E?B:U),!isNaN(D)){var te=j[D],ee=function(X,ie){var se=T.bar.handleHeight;if(!(ie>X[1]+se||ie<X[0]-se))return ie>=.9*X[1]+.1*X[0]?"n":ie<=.9*X[0]+.1*X[1]?"s":"ns"}(te,E);ee&&(z.interval=O[D],z.intervalPix=te,z.region=ee)}}if(A.ordinal&&!z.region){var Q=A.unitTickvals,J=A.unitToPaddedPx.invert(E);for(P=0;P<Q.length;P++){var K=[.25*Q[Math.max(P-1,0)]+.75*Q[P],.25*Q[Math.min(P+1,Q.length-1)]+.75*Q[P]];if(J>=K[0]&&J<=K[1]){z.clickableOrdinalRange=K;break}}}return z}function m(A,E){k.event.sourceEvent.stopPropagation();var P=E.height-k.mouse(A)[1]-2*T.verticalPadding,I=E.brush.svgBrush;I.wasDragged=!0,I._dragging=!0,I.grabbingBar?I.newExtent=[P-I.grabPoint,P+I.barLength-I.grabPoint].map(E.unitToPaddedPx.invert):I.newExtent=[I.startExtent,E.unitToPaddedPx.invert(P)].sort(b),E.brush.filterSpecified=!0,I.extent=I.stayingIntervals.concat([I.newExtent]),I.brushCallback(E),p(A.parentNode)}function y(A,E){var P=g(E,E.height-k.mouse(A)[1]-2*T.verticalPadding),I="crosshair";P.clickableOrdinalRange?I="pointer":P.region&&(I=P.region+"-resize"),k.select(document.body).style("cursor",I)}function v(A){A.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||y(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||u()}).call(k.behavior.drag().on("dragstart",function(E){(function(P,I){k.event.sourceEvent.stopPropagation();var D=I.height-k.mouse(P)[1]-2*T.verticalPadding,z=I.unitToPaddedPx.invert(D),V=I.brush,O=g(I,D),j=O.interval,Y=V.svgBrush;if(Y.wasDragged=!1,Y.grabbingBar=O.region==="ns",Y.grabbingBar){var B=j.map(I.unitToPaddedPx);Y.grabPoint=D-B[0]-T.verticalPadding,Y.barLength=B[1]-B[0]}Y.clickableOrdinalRange=O.clickableOrdinalRange,Y.stayingIntervals=I.multiselect&&V.filterSpecified?V.filter.getConsolidated():[],j&&(Y.stayingIntervals=Y.stayingIntervals.filter(function(U){return U[0]!==j[0]&&U[1]!==j[1]})),Y.startExtent=O.region?j[O.region==="s"?1:0]:z,I.parent.inBrushDrag=!0,Y.brushStartCallback()})(this,E)}).on("drag",function(E){m(this,E)}).on("dragend",function(E){(function(P,I){var D=I.brush,z=D.filter,V=D.svgBrush;V._dragging||(y(P,I),m(P,I),I.brush.svgBrush.wasDragged=!1),V._dragging=!1,k.event.sourceEvent.stopPropagation();var O=V.grabbingBar;if(V.grabbingBar=!1,V.grabLocation=void 0,I.parent.inBrushDrag=!1,u(),!V.wasDragged)return V.wasDragged=void 0,V.clickableOrdinalRange?D.filterSpecified&&I.multiselect?V.extent.push(V.clickableOrdinalRange):(V.extent=[V.clickableOrdinalRange],D.filterSpecified=!0):O?(V.extent=V.stayingIntervals,V.extent.length===0&&h(D)):h(D),V.brushCallback(I),p(P.parentNode),void V.brushEndCallback(D.filterSpecified?z.getConsolidated():[]);var j=function(){z.set(z.getConsolidated())};if(I.ordinal){var Y=I.unitTickvals;Y[Y.length-1]<Y[0]&&Y.reverse(),V.newExtent=[n(0,Y,V.newExtent[0],V.stayingIntervals),n(1,Y,V.newExtent[1],V.stayingIntervals)];var B=V.newExtent[1]>V.newExtent[0];V.extent=V.stayingIntervals.concat(B?[V.newExtent]:[]),V.extent.length||h(D),V.brushCallback(I),B?p(P.parentNode,j):(j(),p(P.parentNode))}else j();V.brushEndCallback(D.filterSpecified?z.getConsolidated():[])})(this,E)}))}function _(A,E){return A[0]-E[0]}function h(A){A.filterSpecified=!1,A.svgBrush.extent=[[-1/0,1/0]]}function S(A){for(var E,P=A.slice(),I=[],D=P.shift();D;){for(E=D.slice();(D=P.shift())&&D[0]<=E[1];)E[1]=Math.max(E[1],D[1]);I.push(E)}return I.length===1&&I[0][0]>I[0][1]&&(I=[]),I}F.exports={makeBrush:function(A,E,P,I,D,z){var V,O=function(){var j,Y,B=[];return{set:function(U){(B=U.map(function(q){return q.slice().sort(b)}).sort(_)).length===1&&B[0][0]===-1/0&&B[0][1]===1/0&&(B=[[0,-1]]),j=S(B),Y=B.reduce(function(q,te){return[Math.min(q[0],te[0]),Math.max(q[1],te[1])]},[1/0,-1/0])},get:function(){return B.slice()},getConsolidated:function(){return j},getBounds:function(){return Y}}}();return O.set(P),{filter:O,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:I,brushCallback:(V=D,function(j){var Y=j.brush,B=function(q){return q.svgBrush.extent.map(function(te){return te.slice()})}(Y),U=B.slice();Y.filter.set(U),V()}),brushEndCallback:z}}},ensureAxisBrush:function(A,E,P){var I=A.selectAll("."+T.cn.axisBrush).data(w,a);I.enter().append("g").classed(T.cn.axisBrush,!0),function(D,z,V){var O=V._context.staticPlot,j=D.selectAll(".background").data(w);j.enter().append("rect").classed("background",!0).call(o).call(l).style("pointer-events",O?"none":"auto").attr("transform",f(0,T.verticalPadding)),j.call(v).attr("height",function(U){return U.height-T.verticalPadding});var Y=D.selectAll(".highlight-shadow").data(w);Y.enter().append("line").classed("highlight-shadow",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width+T.bar.strokeWidth).attr("stroke",z).attr("opacity",T.bar.strokeOpacity).attr("stroke-linecap","butt"),Y.attr("y1",function(U){return U.height}).call(x);var B=D.selectAll(".highlight").data(w);B.enter().append("line").classed("highlight",!0).attr("x",-T.bar.width/2).attr("stroke-width",T.bar.width-T.bar.strokeWidth).attr("stroke",T.bar.fillColor).attr("opacity",T.bar.fillOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(U){return U.height}).call(x)}(I,E,P)},cleanRanges:function(A,E){if(Array.isArray(A[0])?(A=A.map(function(I){return I.sort(b)}),A=E.multiselect?S(A.sort(_)):[A[0]]):A=[A.sort(b)],E.tickvals){var P=E.tickvals.slice().sort(b);if(!(A=A.map(function(I){var D=[n(0,P,I[0],[]),n(1,P,I[1],[])];if(D[1]>D[0])return D}).filter(function(I){return I})).length)return}return A.length>1?A:A[0]}}},61664:function(F,C,e){"use strict";F.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(F,C,e){"use strict";var T=e(33428),k=e(84888)._M,a=e(24196),w=e(9616);C.name="parcoords",C.plot=function(b){var f=k(b.calcdata,"parcoords")[0];f.length&&a(b,f)},C.clean=function(b,f,s,t){var i=t._has&&t._has("parcoords"),r=f._has&&f._has("parcoords");i&&!r&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},C.toSVG=function(b){var f=b._fullLayout._glimages,s=T.select(b).selectAll(".svg-container");s.filter(function(t,i){return i===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");f.append("svg:image").attr({xmlns:w.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){T.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(F,C,e){"use strict";var T=e(3400).isArrayOrTypedArray,k=e(8932),a=e(71688).wrap;F.exports=function(w,b){var f,s;return k.hasColorscale(b,"line")&&T(b.line.color)?(f=b.line.color,s=k.extractOpts(b.line).colorscale,k.calc(w,b,{vals:f,containerStr:"line",cLetter:"c"})):(f=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=.5;return i}(b._length),s=[[0,b.line.color],[1,b.line.color]]),a({lineColor:f,cscale:s})}},30140:function(F){"use strict";F.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(F,C,e){"use strict";var T=e(3400),k=e(94288).hasColorscale,a=e(27260),w=e(86968).Q,b=e(51272),f=e(54460),s=e(82296),t=e(71864),i=e(30140).maxDimensionCount,r=e(26284);function n(o,l,c,d){function u(y,v){return T.coerce(o,l,s.dimensions,y,v)}var x=u("values"),p=u("visible");if(x&&x.length||(p=l.visible=!1),p){u("label"),u("tickvals"),u("ticktext"),u("tickformat");var g=u("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},f.setConvert(l._ax,d.layout),u("multiselect");var m=u("constraintrange");m&&(l.constraintrange=t.cleanRanges(m,l))}}F.exports=function(o,l,c,d){function u(y,v){return T.coerce(o,l,s,y,v)}var x=o.dimensions;Array.isArray(x)&&x.length>i&&(T.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var p=b(o,l,{name:"dimensions",layout:d,handleItemDefaults:n}),g=function(y,v,_,h,S){var A=S("line.color",_);if(k(y,"line")&&T.isArrayOrTypedArray(A)){if(A.length)return S("line.colorscale"),a(y,v,h,S,{prefix:"line.",cLetter:"c"}),A.length;v.line.color=_}return 1/0}(o,l,c,d,u);w(l,d,u),Array.isArray(p)&&p.length||(l.visible=!1),r(l,p,"values",g);var m=T.extendFlat({},d.font,{size:Math.round(d.font.size/1.2)});T.coerceFont(u,"labelfont",m),T.coerceFont(u,"tickfont",m,{autoShadowDflt:!0}),T.coerceFont(u,"rangefont",m),u("labelangle"),u("labelside"),u("unselected.line.color"),u("unselected.line.opacity")}},95724:function(F,C,e){"use strict";var T=e(3400).isTypedArray;C.convertTypedArray=function(k){return T(k)?Array.prototype.slice.call(k):k},C.isOrdinal=function(k){return!!k.tickvals},C.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(F,C,e){"use strict";var T=e(61664);T.plot=e(24196),F.exports=T},51352:function(F,C,e){"use strict";var T=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),a=e(30140).maxDimensionCount,w=e(3400),b=1e-6,f=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(p,g,m,y,v){var _=p._gl;_.enable(_.SCISSOR_TEST),_.scissor(g,m,y,v),p.clear({color:[0,0,0,0],depth:1})}function r(p,g,m,y,v,_){var h=_.key;m.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:f})}(p),m.drawCompleted=!0),function S(A){var E=Math.min(y,v-A*y);A===0&&(window.cancelAnimationFrame(m.currentRafs[h]),delete m.currentRafs[h],i(p,_.scissorX,_.scissorY,_.scissorWidth,_.viewBoxSize[1])),m.clearOnly||(_.count=2*E,_.offset=2*A*y,g(_),A*y+E<v&&(m.currentRafs[h]=window.requestAnimationFrame(function(){S(A+1)})),m.drawCompleted=!1)}(0)}function n(p,g){for(var m=new Array(256),y=0;y<256;y++)m[y]=p(y/255).concat(g);return m}function o(p,g){return(p>>>8*g)%256/255}function l(p,g,m){for(var y=new Array(8*g),v=0,_=0;_<g;_++)for(var h=0;h<2;h++)for(var S=0;S<4;S++){var A=4*p+S,E=m[64*_+A];A===63&&h===0&&(E*=-1),y[v++]=E}return y}function c(p){var g="0"+p;return g.substr(g.length-2)}function d(p){return p<a?"p"+c(p+1)+"_"+c(p+4):"colors"}function u(p,g,m,y,v,_,h,S,A,E,P,I,D,z){for(var V=[[],[]],O=0;O<64;O++)V[0][O]=O===v?1:0,V[1][O]=O===_?1:0;h*=z,S*=z,A*=z,E*=z;var j=p.lines.canvasOverdrag*z,Y=p.domain,B=p.canvasWidth*z,U=p.canvasHeight*z,q=p.pad.l*z,te=p.pad.b*z,ee=p.layoutHeight*z,Q=p.layoutWidth*z,J=p.deselectedLines.color,K=p.deselectedLines.opacity;return w.extendFlat({key:P,resolution:[B,U],viewBoxPos:[h+j,S],viewBoxSize:[A,E],i0:v,i1:_,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:I,contextColor:[J[0]/255,J[1]/255,J[2]/255,K!=="auto"?J[3]*K:Math.max(.00392156862745098,Math.pow(1/p.lines.color.length,.3333333333333333))],scissorX:(y===g?0:h+j)+(q-j)+Q*Y.x[0],scissorWidth:(y===m?B-h+j:A+.5)+(y===g?h+j:0),scissorY:S+te+ee*Y.y[0],scissorHeight:E,viewportX:q-j+Q*Y.x[0],viewportY:te+ee*Y.y[0],viewportWidth:B,viewportHeight:U},D)}function x(p){var g=2047,m=Math.max(0,Math.floor(p[0]*g),0),y=Math.min(g,Math.ceil(p[1]*g),g);return[Math.min(m,y),Math.max(m,y)]}F.exports=function(p,g){var m,y,v,_,h,S=g.context,A=g.pick,E=g.regl,P=E._gl,I=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],g.viewModel.plotGlPixelRatio)),z={currentRafs:{},drawCompleted:!0,clearOnly:!1},V=function(U){for(var q={},te=0;te<=a;te+=4)q[d(te)]=U.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return q}(E),O=E.texture(t),j=[];B(g);var Y=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:T,frag:k,primitive:"lines",lineWidth:D,attributes:V,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:O,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function B(U){m=U.model,y=U.viewModel,v=y.dimensions.slice(),_=v[0]?v[0].values.length:0;var q=m.lines,te=A?q.color.map(function(Q,J){return J/q.color.length}):q.color,ee=function(Q,J,K){for(var X,ie=new Array(Q*(a+4)),se=0,ae=0;ae<Q;ae++){for(var ue=0;ue<a;ue++)ie[se++]=ue<J.length?J[ue].paddedUnitValues[ae]:.5;ie[se++]=o(ae,2),ie[se++]=o(ae,1),ie[se++]=o(ae,0),ie[se++]=(X=K[ae],Math.max(b,Math.min(.999999,X)))}return ie}(_,v,te);(function(Q,J,K){for(var X=0;X<=a;X+=4)Q[d(X)](l(X/4,J,K))})(V,_,ee),S||A||(O=E.texture(w.extendFlat({data:n(m.unitToColor,255)},t)))}return{render:function(U,q,te){var ee,Q,J,K=U.length,X=1/0,ie=-1/0;for(ee=0;ee<K;ee++)U[ee].dim0.canvasX<X&&(X=U[ee].dim0.canvasX,Q=ee),U[ee].dim1.canvasX>ie&&(ie=U[ee].dim1.canvasX,J=ee);K===0&&i(E,0,0,m.canvasWidth,m.canvasHeight);var se=function(ge){var oe,re,fe,Se=[[],[]];for(fe=0;fe<64;fe++){var be=!ge&&fe<v.length?v[fe].brush.filter.getBounds():[-1/0,1/0];Se[0][fe]=be[0],Se[1][fe]=be[1]}var we=new Array(16384);for(oe=0;oe<16384;oe++)we[oe]=255;if(!ge)for(oe=0;oe<v.length;oe++){var Me=oe%8,Pe=(oe-Me)/8,De=Math.pow(2,Me),he=v[oe].brush.filter.get();if(!(he.length<2)){var _e=x(he[0])[1];for(re=1;re<he.length;re++){var Ae=x(he[re]);for(fe=_e+1;fe<Ae[0];fe++)we[8*fe+Pe]&=~De;_e=Math.max(_e,Ae[1])}}}var Oe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:we};return h?h(Oe):h=E.texture(Oe),{maskTexture:h,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(S);for(ee=0;ee<K;ee++){var ae=U[ee],ue=ae.dim0.crossfilterDimensionIndex,ve=ae.dim1.crossfilterDimensionIndex,ye=ae.canvasX,pe=ae.canvasY,de=ye+ae.panelSizeX,me=ae.plotGlPixelRatio;if(q||!j[ue]||j[ue][0]!==ye||j[ue][1]!==de){j[ue]=[ye,de];var ke=u(m,Q,J,ee,ue,ve,ye,pe,ae.panelSizeX,ae.panelSizeY,ae.dim0.crossfilterDimensionIndex,S?0:A?2:1,se,me);z.clearOnly=te;var Ce=q?m.lines.blockLineCount:_;r(E,Y,z,Ce,_,ke)}}},readPixel:function(U,q){return E.read({x:U,y:q,width:1,height:1,data:s}),s},readPixels:function(U,q,te,ee){var Q=new Uint8Array(4*te*ee);return E.read({x:U,y:q,width:te,height:ee,data:Q}),Q},destroy:function(){for(var U in p.style["pointer-events"]="none",O.destroy(),h&&h.destroy(),V)V[U].destroy()},update:B}}},26284:function(F){"use strict";F.exports=function(C,e,T,k){var a,w;for(k||(k=1/0),a=0;a<e.length;a++)(w=e[a]).visible&&(k=Math.min(k,w[T].length));for(k===1/0&&(k=0),C._length=k,a=0;a<e.length;a++)(w=e[a]).visible&&(w._length=k);return k}},36336:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=k.isArrayOrTypedArray,w=k.numberFormat,b=e(96824),f=e(54460),s=k.strRotate,t=k.strTranslate,i=e(72736),r=e(43616),n=e(8932),o=e(71688),l=o.keyFun,c=o.repeat,d=o.unwrap,u=e(95724),x=e(30140),p=e(71864),g=e(51352);function m(Y,B,U){return k.aggNums(Y,null,B,U)}function y(Y,B){return _(m(Math.min,Y,B),m(Math.max,Y,B))}function v(Y){var B=Y.range;return B?_(B[0],B[1]):y(Y.values,Y._length)}function _(Y,B){return!isNaN(Y)&&isFinite(Y)||(Y=0),!isNaN(B)&&isFinite(B)||(B=0),Y===B&&(Y===0?(Y-=1,B+=1):(Y*=.9,B*=1.1)),[Y,B]}function h(Y,B,U,q,te){var ee,Q,J=v(U);return q?T.scale.ordinal().domain(q.map((ee=w(U.tickformat),Q=te,Q?function(K,X){var ie=Q[X];return ie??ee(K)}:ee))).range(q.map(function(K){var X=(K-J[0])/(J[1]-J[0]);return Y-B+X*(2*B-Y)})):T.scale.linear().domain(J).range([Y-B,B])}function S(Y){if(Y.tickvals){var B=v(Y);return T.scale.ordinal().domain(Y.tickvals).range(Y.tickvals.map(function(U){return(U-B[0])/(B[1]-B[0])}))}}function A(Y){var B=Y.map(function(te){return te[0]}),U=Y.map(function(te){var ee=b(te[1]);return T.rgb("rgb("+ee[0]+","+ee[1]+","+ee[2]+")")}),q="rgb".split("").map(function(te){return T.scale.linear().clamp(!0).domain(B).range(U.map((ee=te,function(Q){return Q[ee]})));var ee});return function(te){return q.map(function(ee){return ee(te)})}}function E(Y){return Y.dimensions.some(function(B){return B.brush.filterSpecified})}function P(Y,B,U){var q=d(B),te=q.trace,ee=u.convertTypedArray(q.lineColor),Q=te.line,J={color:b(te.unselected.line.color),opacity:te.unselected.line.opacity},K=n.extractOpts(Q),X=K.reversescale?n.flipScale(q.cscale):q.cscale,ie=te.domain,se=te.dimensions,ae=Y.width,ue=te.labelangle,ve=te.labelside,ye=te.labelfont,pe=te.tickfont,de=te.rangefont,me=k.extendDeepNoArrays({},Q,{color:ee.map(T.scale.linear().domain(v({values:ee,range:[K.min,K.max],_length:te._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),ke=Math.floor(ae*(ie.x[1]-ie.x[0])),Ce=Math.floor(Y.height*(ie.y[1]-ie.y[0])),ge=Y.margin||{l:80,r:80,t:100,b:80},oe=ke,re=Ce;return{key:U,colCount:se.filter(u.isVisible).length,dimensions:se,tickDistance:x.tickDistance,unitToColor:A(X),lines:me,deselectedLines:J,labelAngle:ue,labelSide:ve,labelFont:ye,tickFont:pe,rangeFont:de,layoutWidth:ae,layoutHeight:Y.height,domain:ie,translateX:ie.x[0]*ae,translateY:Y.height-ie.y[1]*Y.height,pad:ge,canvasWidth:oe*x.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:re*x.canvasPixelRatio,width:oe,height:re,canvasPixelRatio:x.canvasPixelRatio}}function I(Y,B,U){var q=U.width,te=U.height,ee=U.dimensions,Q=U.canvasPixelRatio,J=function(ae){return q*ae/Math.max(1,U.colCount-1)},K=x.verticalPadding/te,X=function(ae,ue){return T.scale.linear().range([ue,ae-ue])}(te,x.verticalPadding),ie={key:U.key,xScale:J,model:U,inBrushDrag:!1},se={};return ie.dimensions=ee.filter(u.isVisible).map(function(ae,ue){var ve=function(Me,Pe){return T.scale.linear().domain(v(Me)).range([Pe,1-Pe])}(ae,K),ye=se[ae.label];se[ae.label]=(ye||0)+1;var pe=ae.label+(ye?"__"+ye:""),de=ae.constraintrange,me=de&&de.length;me&&!a(de[0])&&(de=[de]);var ke=me?de.map(function(Me){return Me.map(ve)}):[[-1/0,1/0]],Ce=ae.values;Ce.length>ae._length&&(Ce=Ce.slice(0,ae._length));var ge,oe=ae.tickvals;function re(Me,Pe){return{val:Me,text:ge[Pe]}}function fe(Me,Pe){return Me.val-Pe.val}if(a(oe)&&oe.length){k.isTypedArray(oe)&&(oe=Array.from(oe)),ge=ae.ticktext,a(ge)&&ge.length?ge.length>oe.length?ge=ge.slice(0,oe.length):oe.length>ge.length&&(oe=oe.slice(0,ge.length)):ge=oe.map(w(ae.tickformat));for(var Se=1;Se<oe.length;Se++)if(oe[Se]<oe[Se-1]){for(var be=oe.map(re).sort(fe),we=0;we<oe.length;we++)oe[we]=be[we].val,ge[we]=be[we].text;break}}else oe=void 0;return Ce=u.convertTypedArray(Ce),{key:pe,label:ae.label,tickFormat:ae.tickformat,tickvals:oe,ticktext:ge,ordinal:u.isOrdinal(ae),multiselect:ae.multiselect,xIndex:ue,crossfilterDimensionIndex:ue,visibleIndex:ae._index,height:te,values:Ce,paddedUnitValues:Ce.map(ve),unitTickvals:oe&&oe.map(ve),xScale:J,x:J(ue),canvasX:J(ue)*Q,unitToPaddedPx:X,domainScale:h(te,x.verticalPadding,ae,oe,ge),ordinalScale:S(ae),parent:ie,model:U,brush:p.makeBrush(Y,me,ke,function(){Y.linePickActive(!1)},function(){var Me=ie;Me.focusLayer&&Me.focusLayer.render(Me.panels,!0);var Pe=E(Me);!Y.contextShown()&&Pe?(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0),Y.contextShown(!0)):Y.contextShown()&&!Pe&&(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0,!0),Y.contextShown(!1))},function(Me){if(ie.focusLayer.render(ie.panels,!0),ie.pickLayer&&ie.pickLayer.render(ie.panels,!0),Y.linePickActive(!0),B&&B.filterChanged){var Pe=ve.invert,De=Me.map(function(he){return he.map(Pe).sort(k.sorterAsc)}).sort(function(he,_e){return he[0]-_e[0]});B.filterChanged(ie.key,ae._index,De)}})}}),ie}function D(Y){Y.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function z(Y,B){var U=B==="top"?1:-1,q=Y*Math.PI/180;return{dir:U,dx:Math.sin(q),dy:Math.cos(q),degrees:Y}}function V(Y,B,U){for(var q=B.panels||(B.panels=[]),te=Y.data(),ee=0;ee<te.length-1;ee++){var Q=q[ee]||(q[ee]={}),J=te[ee],K=te[ee+1];Q.dim0=J,Q.dim1=K,Q.canvasX=J.canvasX,Q.panelSizeX=K.canvasX-J.canvasX,Q.panelSizeY=B.model.canvasHeight,Q.y=0,Q.canvasY=0,Q.plotGlPixelRatio=U}}function O(Y,B){return f.tickText(Y._ax,B,!1).text}function j(Y,B){if(Y.ordinal)return"";var U=Y.domainScale.domain(),q=U[B?U.length-1:0];return O(Y.model.dimensions[Y.visibleIndex],q)}F.exports=function(Y,B,U,q){var te=Y._context.staticPlot,ee=Y._fullLayout,Q=ee._toppaper,J=ee._glcontainer,K=Y._context.plotGlPixelRatio,X=Y._fullLayout.paper_bgcolor;(function(Me){for(var Pe=0;Pe<Me.length;Pe++)for(var De=0;De<Me[Pe].length;De++)for(var he=Me[Pe][De].trace,_e=he.dimensions,Ae=0;Ae<_e.length;Ae++){var Oe=_e[Ae].values,Ee=_e[Ae]._ax;Ee&&(Ee.range?Ee.range=_(Ee.range[0],Ee.range[1]):Ee.range=y(Oe,he._length),Ee.dtick||(Ee.dtick=.01*(Math.abs(Ee.range[1]-Ee.range[0])||1)),Ee.tickformat=_e[Ae].tickformat,f.calcTicks(Ee),Ee.cleanRange())}})(B);var ie,se,ae=(ie=!0,se=!1,{linePickActive:function(Me){return arguments.length?ie=!!Me:ie},contextShown:function(Me){return arguments.length?se=!!Me:se}}),ue=B.filter(function(Me){return d(Me).trace.visible}).map(P.bind(0,U)).map(I.bind(0,ae,q));J.each(function(Me,Pe){return k.extendFlat(Me,ue[Pe])});var ve=J.selectAll(".gl-canvas").each(function(Me){Me.viewModel=ue[0],Me.viewModel.plotGlPixelRatio=K,Me.viewModel.paperColor=X,Me.model=Me.viewModel?Me.viewModel.model:null}),ye=null;ve.filter(function(Me){return Me.pick}).style("pointer-events",te?"none":"auto").on("mousemove",function(Me){if(ae.linePickActive()&&Me.lineLayer&&q&&q.hover){var Pe=T.event,De=this.width,he=this.height,_e=T.mouse(this),Ae=_e[0],Oe=_e[1];if(Ae<0||Oe<0||Ae>=De||Oe>=he)return;var Ee=Me.lineLayer.readPixel(Ae,he-1-Oe),Be=Ee[3]!==0,Ve=Be?Ee[2]+256*(Ee[1]+256*Ee[0]):null,Ze={x:Ae,y:Oe,clientX:Pe.clientX,clientY:Pe.clientY,dataIndex:Me.model.key,curveNumber:Ve};Ve!==ye&&(Be?q.hover(Ze):q.unhover&&q.unhover(Ze),ye=Ve)}}),ve.style("opacity",function(Me){return Me.pick?0:1}),Q.style("background","rgba(255, 255, 255, 0)");var pe=Q.selectAll("."+x.cn.parcoords).data(ue,l);pe.exit().remove(),pe.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),pe.attr("transform",function(Me){return t(Me.model.translateX,Me.model.translateY)});var de=pe.selectAll("."+x.cn.parcoordsControlView).data(c,l);de.enter().append("g").classed(x.cn.parcoordsControlView,!0),de.attr("transform",function(Me){return t(Me.model.pad.l,Me.model.pad.t)});var me=de.selectAll("."+x.cn.yAxis).data(function(Me){return Me.dimensions},l);me.enter().append("g").classed(x.cn.yAxis,!0),de.each(function(Me){V(me,Me,K)}),ve.each(function(Me){if(Me.viewModel){!Me.lineLayer||q?Me.lineLayer=g(this,Me):Me.lineLayer.update(Me),(Me.key||Me.key===0)&&(Me.viewModel[Me.key]=Me.lineLayer);var Pe=!Me.context||q;Me.lineLayer.render(Me.viewModel.panels,Pe)}}),me.attr("transform",function(Me){return t(Me.xScale(Me.xIndex),0)}),me.call(T.behavior.drag().origin(function(Me){return Me}).on("drag",function(Me){var Pe=Me.parent;ae.linePickActive(!1),Me.x=Math.max(-x.overdrag,Math.min(Me.model.width+x.overdrag,T.event.x)),Me.canvasX=Me.x*Me.model.canvasPixelRatio,me.sort(function(De,he){return De.x-he.x}).each(function(De,he){De.xIndex=he,De.x=Me===De?De.x:De.xScale(De.xIndex),De.canvasX=De.x*De.model.canvasPixelRatio}),V(me,Pe,K),me.filter(function(De){return Math.abs(Me.xIndex-De.xIndex)!==0}).attr("transform",function(De){return t(De.xScale(De.xIndex),0)}),T.select(this).attr("transform",t(Me.x,0)),me.each(function(De,he,_e){_e===Me.parent.key&&(Pe.dimensions[he]=De)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!E(Pe)),Pe.focusLayer.render&&Pe.focusLayer.render(Pe.panels)}).on("dragend",function(Me){var Pe=Me.parent;Me.x=Me.xScale(Me.xIndex),Me.canvasX=Me.x*Me.model.canvasPixelRatio,V(me,Pe,K),T.select(this).attr("transform",function(De){return t(De.x,0)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!E(Pe)),Pe.focusLayer&&Pe.focusLayer.render(Pe.panels),Pe.pickLayer&&Pe.pickLayer.render(Pe.panels,!0),ae.linePickActive(!0),q&&q.axesMoved&&q.axesMoved(Pe.key,Pe.dimensions.map(function(De){return De.crossfilterDimensionIndex}))})),me.exit().remove();var ke=me.selectAll("."+x.cn.axisOverlays).data(c,l);ke.enter().append("g").classed(x.cn.axisOverlays,!0),ke.selectAll("."+x.cn.axis).remove();var Ce=ke.selectAll("."+x.cn.axis).data(c,l);Ce.enter().append("g").classed(x.cn.axis,!0),Ce.each(function(Me){var Pe=Me.model.height/Me.model.tickDistance,De=Me.domainScale,he=De.domain();T.select(this).call(T.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Pe,Me.tickFormat).tickValues(Me.ordinal?he:null).tickFormat(function(_e){return u.isOrdinal(Me)?_e:O(Me.model.dimensions[Me.visibleIndex],_e)}).scale(De)),r.font(Ce.selectAll("text"),Me.model.tickFont)}),Ce.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ce.selectAll("text").style("cursor","default");var ge=ke.selectAll("."+x.cn.axisHeading).data(c,l);ge.enter().append("g").classed(x.cn.axisHeading,!0);var oe=ge.selectAll("."+x.cn.axisTitle).data(c,l);oe.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),oe.text(function(Me){return Me.label}).each(function(Me){var Pe=T.select(this);r.font(Pe,Me.model.labelFont),i.convertToTspans(Pe,Y)}).attr("transform",function(Me){var Pe=z(Me.model.labelAngle,Me.model.labelSide),De=x.axisTitleOffset;return(Pe.dir>0?"":t(0,2*De+Me.model.height))+s(Pe.degrees)+t(-De*Pe.dx,-De*Pe.dy)}).attr("text-anchor",function(Me){var Pe=z(Me.model.labelAngle,Me.model.labelSide);return 2*Math.abs(Pe.dx)>Math.abs(Pe.dy)?Pe.dir*Pe.dx<0?"start":"end":"middle"});var re=ke.selectAll("."+x.cn.axisExtent).data(c,l);re.enter().append("g").classed(x.cn.axisExtent,!0);var fe=re.selectAll("."+x.cn.axisExtentTop).data(c,l);fe.enter().append("g").classed(x.cn.axisExtentTop,!0),fe.attr("transform",t(0,-x.axisExtentOffset));var Se=fe.selectAll("."+x.cn.axisExtentTopText).data(c,l);Se.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(D),Se.text(function(Me){return j(Me,!0)}).each(function(Me){r.font(T.select(this),Me.model.rangeFont)});var be=re.selectAll("."+x.cn.axisExtentBottom).data(c,l);be.enter().append("g").classed(x.cn.axisExtentBottom,!0),be.attr("transform",function(Me){return t(0,Me.model.height+x.axisExtentOffset)});var we=be.selectAll("."+x.cn.axisExtentBottomText).data(c,l);we.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),we.text(function(Me){return j(Me,!1)}).each(function(Me){r.font(T.select(this),Me.model.rangeFont)}),p.ensureAxisBrush(ke,X,Y)}},24196:function(F,C,e){"use strict";var T=e(36336),k=e(5048),a=e(95724).isVisible,w={};function b(f,s,t){var i=s.indexOf(t),r=f.indexOf(i);return r===-1&&(r+=s.length),r}(F.exports=function(f,s){var t=f._fullLayout;if(k(f,[],w)){var i={},r={},n={},o={},l=t._size;s.forEach(function(c,d){var u=c[0].trace;n[d]=u.index;var x=o[d]=u._fullInput.index;i[d]=f.data[x].dimensions,r[d]=f.data[x].dimensions.slice()}),T(f,s,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(c,d,u){var x=r[c][d],p=u.map(function(h){return h.slice()}),g="dimensions["+d+"].constraintrange",m=t._tracePreGUI[f._fullData[n[c]]._fullInput.uid];if(m[g]===void 0){var y=x.constraintrange;m[g]=y||null}var v=f._fullData[n[c]].dimensions[d];p.length?(p.length===1&&(p=p[0]),x.constraintrange=p,v.constraintrange=p.slice(),p=[p]):(delete x.constraintrange,delete v.constraintrange,p=null);var _={};_[g]=p,f.emit("plotly_restyle",[_,[o[c]]])},hover:function(c){f.emit("plotly_hover",c)},unhover:function(c){f.emit("plotly_unhover",c)},axesMoved:function(c,d){var u=function(x,p){return function(g,m){return b(x,p,g)-b(x,p,m)}}(d,r[c].filter(a));i[c].sort(u),r[c].filter(function(x){return!a(x)}).sort(function(x){return r[c].indexOf(x)}).forEach(function(x){i[c].splice(i[c].indexOf(x),1),i[c].splice(r[c].indexOf(x),0,x)}),f.emit("plotly_restyle",[{dimensions:[i[c]]},[o[c]]])}})}}).reglPrecompiled=w},74996:function(F,C,e){"use strict";var T=e(45464),k=e(86968).u,a=e(25376),w=e(22548),b=e(21776).Ks,f=e(21776).Gw,s=e(92880).extendFlat,t=e(98192).c,i=a({editType:"plot",arrayOk:!0,colorEditType:"plot"});F.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:w.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},T.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},i,{}),outsidetextfont:s({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(F,C,e){"use strict";var T=e(7316);C.name="pie",C.plot=function(k,a,w,b){T.plotBasePlot(C.name,k,a,w,b)},C.clean=function(k,a,w,b){T.cleanBasePlot(C.name,k,a,w,b)}},45768:function(F,C,e){"use strict";var T=e(38248),k=e(49760),a=e(76308),w={};function b(s){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=a.addOpacity(t,t.getAlpha()),s[i]||(s[i]=t),t)}}function f(s,t){var i,r=JSON.stringify(s),n=t[r];if(!n){for(n=s.slice(),i=0;i<s.length;i++)n.push(k(s[i]).lighten(20).toHexString());for(i=0;i<s.length;i++)n.push(k(s[i]).darken(20).toHexString());t[r]=n}return n}F.exports={calc:function(s,t){var i,r,n=[],o=s._fullLayout,l=o.hiddenlabels||[],c=t.labels,d=t.marker.colors||[],u=t.values,x=t._length,p=t._hasValues&&x;if(t.dlabel)for(c=new Array(x),i=0;i<x;i++)c[i]=String(t.label0+i*t.dlabel);var g={},m=b(o["_"+t.type+"colormap"]),y=0,v=!1;for(i=0;i<x;i++){var _,h,S;if(p){if(_=u[i],!T(_))continue;_=+_}else _=1;(h=c[i])!==void 0&&h!==""||(h=i);var A=g[h=String(h)];A===void 0?(g[h]=n.length,(S=l.indexOf(h)!==-1)||(y+=_),n.push({v:_,label:h,color:m(d[i],h),i,pts:[i],hidden:S})):(v=!0,(r=n[A]).v+=_,r.pts.push(i),r.hidden||(y+=_),r.color===!1&&d[i]&&(r.color=m(d[i],h)))}return n=n.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?v:t.sort)&&n.sort(function(E,P){return P.v-E.v}),n[0]&&(n[0].vTotal=y),n},crossTraceCalc:function(s,t){var i=(t||{}).type;i||(i="pie");var r=s._fullLayout,n=s.calcdata,o=r[i+"colorway"],l=r["_"+i+"colormap"];r["extend"+i+"colors"]&&(o=f(o,w));for(var c=0,d=0;d<n.length;d++){var u=n[d];if(u[0].trace.type===i)for(var x=0;x<u.length;x++){var p=u[x];p.color===!1&&(l[p.label]?p.color=l[p.label]:(l[p.label]=p.color=o[c%o.length],c++))}}},makePullColorFn:b,generateExtendedColors:f}},74174:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(74996),w=e(86968).Q,b=e(31508).handleText,f=e(3400).coercePattern;function s(i,r){var n=k.isArrayOrTypedArray(i),o=k.isArrayOrTypedArray(r),l=Math.min(n?i.length:1/0,o?r.length:1/0);if(isFinite(l)||(l=0),l&&o){for(var c,d=0;d<l;d++){var u=r[d];if(T(u)&&u>0){c=!0;break}}c||(l=0)}return{hasLabels:n,hasValues:o,len:l}}function t(i,r,n,o,l){o("marker.line.width")&&o("marker.line.color",l?void 0:n.paper_bgcolor);var c=o("marker.colors");f(o,"marker.pattern",c),i.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=i.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=n.paper_bgcolor)}F.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(i,r,n,o){function l(v,_){return k.coerce(i,r,a,v,_)}var c=s(l("labels"),l("values")),d=c.len;if(r._hasLabels=c.hasLabels,r._hasValues=c.hasValues,!r._hasLabels&&r._hasValues&&(l("label0"),l("dlabel")),d){r._length=d,t(i,r,o,l,!0),l("scalegroup");var u,x=l("text"),p=l("texttemplate");if(p||(u=l("textinfo",k.isArrayOrTypedArray(x)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),p||u&&u!=="none"){var g=l("textposition");b(i,r,o,l,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||g==="auto"||g==="outside")&&l("automargin"),(g==="inside"||g==="auto"||Array.isArray(g))&&l("insidetextorientation")}else u==="none"&&l("textposition","none");w(r,o,l);var m=l("hole");if(l("title.text")){var y=l("title.position",m?"middle center":"top center");m||y!=="middle center"||(r.title.position="top center"),k.coerceFont(l,"title.font",o.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else r.visible=!1}}},53644:function(F,C,e){"use strict";var T=e(10624).appendArrayMultiPointValues;F.exports=function(k,a){var w={curveNumber:a.index,pointNumbers:k.pts,data:a._input,fullData:a,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(w.pointNumber=w.i=k.pts[0]),T(w,a,k.pts),a.type==="funnelarea"&&(delete w.v,delete w.i),w}},21552:function(F,C,e){"use strict";var T=e(43616),k=e(76308);F.exports=function(a,w,b,f){var s=b.marker.pattern;s&&s.shape?T.pointStyle(a,b,f,w):k.fill(a,w.color)}},69656:function(F,C,e){"use strict";var T=e(3400);function k(a){return a.indexOf("e")!==-1?a.replace(/[.]?0+e/,"e"):a.indexOf(".")!==-1?a.replace(/[.]?0+$/,""):a}C.formatPiePercent=function(a,w){var b=k((100*a).toPrecision(3));return T.numSeparate(b,w)+"%"},C.formatPieValue=function(a,w){var b=k(a.toPrecision(10));return T.numSeparate(b,w)},C.getFirstFilled=function(a,w){if(T.isArrayOrTypedArray(a))for(var b=0;b<w.length;b++){var f=a[w[b]];if(f||f===0||f==="")return f}},C.castOption=function(a,w){return T.isArrayOrTypedArray(a)?C.getFirstFilled(a,w):a||void 0},C.getRotationAngle=function(a){return(a==="auto"?0:a)*Math.PI/180}},75792:function(F,C,e){"use strict";F.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(F){"use strict";F.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(F,C,e){"use strict";var T=e(3400),k=e(85204);F.exports=function(a,w){function b(f,s){return T.coerce(a,w,k,f,s)}b("hiddenlabels"),b("piecolorway",w.colorway),b("extendpiecolors")}},37820:function(F,C,e){"use strict";var T=e(33428),k=e(7316),a=e(93024),w=e(76308),b=e(43616),f=e(3400),s=f.strScale,t=f.strTranslate,i=e(72736),r=e(82744),n=r.recordMinTextSize,o=r.clearMinTextSize,l=e(78048).TEXTPAD,c=e(69656),d=e(53644),u=e(3400).isValidTextValue;function x(Y,B,U){var q=U[0],te=q.cx,ee=q.cy,Q=q.trace,J=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),Y.on("mouseover",function(K){var X=B._fullLayout,ie=B._fullData[Q.index];if(!B._dragging&&X.hovermode!==!1){var se=ie.hoverinfo;if(Array.isArray(se)&&(se=a.castHoverinfo({hoverinfo:[c.castOption(se,K.pts)],_module:Q._module},X,0)),se==="all"&&(se="label+text+value+percent+name"),ie.hovertemplate||se!=="none"&&se!=="skip"&&se){var ae=K.rInscribed||0,ue=te+K.pxmid[0]*(1-ae),ve=ee+K.pxmid[1]*(1-ae),ye=X.separators,pe=[];if(se&&se.indexOf("label")!==-1&&pe.push(K.label),K.text=c.castOption(ie.hovertext||ie.text,K.pts),se&&se.indexOf("text")!==-1){var de=K.text;f.isValidTextValue(de)&&pe.push(de)}K.value=K.v,K.valueLabel=c.formatPieValue(K.v,ye),se&&se.indexOf("value")!==-1&&pe.push(K.valueLabel),K.percent=K.v/q.vTotal,K.percentLabel=c.formatPiePercent(K.percent,ye),se&&se.indexOf("percent")!==-1&&pe.push(K.percentLabel);var me=ie.hoverlabel,ke=me.font,Ce=[];a.loneHover({trace:Q,x0:ue-ae*q.r,x1:ue+ae*q.r,y:ve,_x0:J?te+K.TL[0]:ue-ae*q.r,_x1:J?te+K.TR[0]:ue+ae*q.r,_y0:J?ee+K.TL[1]:ve-ae*q.r,_y1:J?ee+K.BL[1]:ve+ae*q.r,text:pe.join("<br>"),name:ie.hovertemplate||se.indexOf("name")!==-1?ie.name:void 0,idealAlign:K.pxmid[0]<0?"left":"right",color:c.castOption(me.bgcolor,K.pts)||K.color,borderColor:c.castOption(me.bordercolor,K.pts),fontFamily:c.castOption(ke.family,K.pts),fontSize:c.castOption(ke.size,K.pts),fontColor:c.castOption(ke.color,K.pts),nameLength:c.castOption(me.namelength,K.pts),textAlign:c.castOption(me.align,K.pts),hovertemplate:c.castOption(ie.hovertemplate,K.pts),hovertemplateLabels:K,eventData:[d(K,ie)]},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:B,inOut_bbox:Ce}),K.bbox=Ce[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,B.emit("plotly_hover",{points:[d(K,ie)],event:T.event})}}),Y.on("mouseout",function(K){var X=B._fullLayout,ie=B._fullData[Q.index],se=T.select(this).datum();Q._hasHoverEvent&&(K.originalEvent=T.event,B.emit("plotly_unhover",{points:[d(se,ie)],event:T.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(a.loneUnhover(X._hoverlayer.node()),Q._hasHoverLabel=!1)}),Y.on("click",function(K){var X=B._fullLayout,ie=B._fullData[Q.index];B._dragging||X.hovermode===!1||(B._hoverdata=[d(K,ie)],a.click(B,T.event))})}function p(Y,B,U){var q=c.castOption(Y.insidetextfont.color,B.pts);!q&&Y._input.textfont&&(q=c.castOption(Y._input.textfont.color,B.pts));var te=c.castOption(Y.insidetextfont.family,B.pts)||c.castOption(Y.textfont.family,B.pts)||U.family,ee=c.castOption(Y.insidetextfont.size,B.pts)||c.castOption(Y.textfont.size,B.pts)||U.size,Q=c.castOption(Y.insidetextfont.weight,B.pts)||c.castOption(Y.textfont.weight,B.pts)||U.weight,J=c.castOption(Y.insidetextfont.style,B.pts)||c.castOption(Y.textfont.style,B.pts)||U.style,K=c.castOption(Y.insidetextfont.variant,B.pts)||c.castOption(Y.textfont.variant,B.pts)||U.variant,X=c.castOption(Y.insidetextfont.textcase,B.pts)||c.castOption(Y.textfont.textcase,B.pts)||U.textcase,ie=c.castOption(Y.insidetextfont.lineposition,B.pts)||c.castOption(Y.textfont.lineposition,B.pts)||U.lineposition,se=c.castOption(Y.insidetextfont.shadow,B.pts)||c.castOption(Y.textfont.shadow,B.pts)||U.shadow;return{color:q||w.contrast(B.color),family:te,size:ee,weight:Q,style:J,variant:K,textcase:X,lineposition:ie,shadow:se}}function g(Y,B){for(var U,q,te=0;te<Y.length;te++)if((q=(U=Y[te][0]).trace).title.text){var ee=q.title.text;q._meta&&(ee=f.templateString(ee,q._meta));var Q=b.tester.append("text").attr("data-notex",1).text(ee).call(b.font,q.title.font).call(i.convertToTspans,B),J=b.bBox(Q.node(),!0);U.titleBox={width:J.width,height:J.height},Q.remove()}}function m(Y,B,U){var q=U.r||B.rpx1,te=B.rInscribed;if(B.startangle===B.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var ee,Q=B.ring,J=Q===1&&Math.abs(B.startangle-B.stopangle)===2*Math.PI,K=B.halfangle,X=B.midangle,ie=U.trace.insidetextorientation,se=ie==="horizontal",ae=ie==="tangential",ue=ie==="radial",ve=ie==="auto",ye=[];if(!ve){var pe,de=function(re,fe){if(function(Me,Pe){var De=Me.startangle,he=Me.stopangle;return De>Pe&&Pe>he||De<Pe&&Pe<he}(B,re)){var Se=Math.abs(re-B.startangle),be=Math.abs(re-B.stopangle),we=Se<be?Se:be;(ee=fe==="tan"?v(Y,q,Q,we,0):y(Y,q,Q,we,Math.PI/2)).textPosAngle=re,ye.push(ee)}};if(se||ae){for(pe=4;pe>=-4;pe-=2)de(Math.PI*pe,"tan");for(pe=4;pe>=-4;pe-=2)de(Math.PI*(pe+1),"tan")}if(se||ue){for(pe=4;pe>=-4;pe-=2)de(Math.PI*(pe+1.5),"rad");for(pe=4;pe>=-4;pe-=2)de(Math.PI*(pe+.5),"rad")}}if(J||ve||se){var me=Math.sqrt(Y.width*Y.width+Y.height*Y.height);if((ee={scale:te*q*2/me,rCenter:1-te,rotate:0}).textPosAngle=(B.startangle+B.stopangle)/2,ee.scale>=1)return ee;ye.push(ee)}(ve||ue)&&((ee=y(Y,q,Q,K,X)).textPosAngle=(B.startangle+B.stopangle)/2,ye.push(ee)),(ve||ae)&&((ee=v(Y,q,Q,K,X)).textPosAngle=(B.startangle+B.stopangle)/2,ye.push(ee));for(var ke=0,Ce=0,ge=0;ge<ye.length;ge++){var oe=ye[ge].scale;if(Ce<oe&&(Ce=oe,ke=ge),!ve&&Ce>=1)break}return ye[ke]}function y(Y,B,U,q,te){B=Math.max(0,B-2*l);var ee=Y.width/Y.height,Q=S(ee,q,B,U);return{scale:2*Q/Y.height,rCenter:_(ee,Q/B),rotate:h(te)}}function v(Y,B,U,q,te){B=Math.max(0,B-2*l);var ee=Y.height/Y.width,Q=S(ee,q,B,U);return{scale:2*Q/Y.width,rCenter:_(ee,Q/B),rotate:h(te+Math.PI/2)}}function _(Y,B){return Math.cos(B)-Y*B}function h(Y){return(180/Math.PI*Y+720)%180-90}function S(Y,B,U,q){var te=Y+1/(2*Math.tan(B));return U*Math.min(1/(Math.sqrt(te*te+.5)+te),q/(Math.sqrt(Y*Y+q/2)+Y))}function A(Y,B){return Y.v!==B.vTotal||B.trace.hole?Math.min(1/(1+1/Math.sin(Y.halfangle)),Y.ring/2):1}function E(Y,B){var U=B.pxmid[0],q=B.pxmid[1],te=Y.width/2,ee=Y.height/2;return U<0&&(te*=-1),q<0&&(ee*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(ee)*(te>0?1:-1)/2,y:ee/(1+U*U/(q*q)),outside:!0}}function P(Y,B){var U,q,te,ee=Y.trace,Q={x:Y.cx,y:Y.cy},J={tx:0,ty:0};J.ty+=ee.title.font.size,te=D(ee),ee.title.position.indexOf("top")!==-1?(Q.y-=(1+te)*Y.r,J.ty-=Y.titleBox.height):ee.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+te)*Y.r);var K,X=Y.r/((K=Y.trace.aspectratio)===void 0?1:K),ie=B.w*(ee.domain.x[1]-ee.domain.x[0])/2;return ee.title.position.indexOf("left")!==-1?(ie+=X,Q.x-=(1+te)*X,J.tx+=Y.titleBox.width/2):ee.title.position.indexOf("center")!==-1?ie*=2:ee.title.position.indexOf("right")!==-1&&(ie+=X,Q.x+=(1+te)*X,J.tx-=Y.titleBox.width/2),U=ie/Y.titleBox.width,q=I(Y,B)/Y.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(U,q),tx:J.tx,ty:J.ty}}function I(Y,B){var U=Y.trace,q=B.h*(U.domain.y[1]-U.domain.y[0]);return Math.min(Y.titleBox.height,q/2)}function D(Y){var B,U=Y.pull;if(!U)return 0;if(f.isArrayOrTypedArray(U))for(U=0,B=0;B<Y.pull.length;B++)Y.pull[B]>U&&(U=Y.pull[B]);return U}function z(Y,B){for(var U=[],q=0;q<Y.length;q++){var te=Y[q][0],ee=te.trace,Q=ee.domain,J=B.w*(Q.x[1]-Q.x[0]),K=B.h*(Q.y[1]-Q.y[0]);ee.title.text&&ee.title.position!=="middle center"&&(K-=I(te,B));var X=J/2,ie=K/2;ee.type!=="funnelarea"||ee.scalegroup||(ie/=ee.aspectratio),te.r=Math.min(X,ie)/(1+D(ee)),te.cx=B.l+B.w*(ee.domain.x[1]+ee.domain.x[0])/2,te.cy=B.t+B.h*(1-ee.domain.y[0])-K/2,ee.title.text&&ee.title.position.indexOf("bottom")!==-1&&(te.cy-=I(te,B)),ee.scalegroup&&U.indexOf(ee.scalegroup)===-1&&U.push(ee.scalegroup)}(function(se,ae){for(var ue,ve,ye,pe=0;pe<ae.length;pe++){var de=1/0,me=ae[pe];for(ve=0;ve<se.length;ve++)if((ye=(ue=se[ve][0]).trace).scalegroup===me){var ke;if(ye.type==="pie")ke=ue.r*ue.r;else if(ye.type==="funnelarea"){var Ce,ge;ye.aspectratio>1?ge=(Ce=ue.r)/ye.aspectratio:Ce=(ge=ue.r)*ye.aspectratio,ke=(Ce*=(1+ye.baseratio)/2)*ge}de=Math.min(de,ke/ue.vTotal)}for(ve=0;ve<se.length;ve++)if((ye=(ue=se[ve][0]).trace).scalegroup===me){var oe=de*ue.vTotal;ye.type==="funnelarea"&&(oe/=(1+ye.baseratio)/2,oe/=ye.aspectratio),ue.r=Math.sqrt(oe)}}})(Y,U)}function V(Y,B){return[Y*Math.sin(B),-Y*Math.cos(B)]}function O(Y,B,U){var q=Y._fullLayout,te=U.trace,ee=te.texttemplate,Q=te.textinfo;if(!ee&&Q&&Q!=="none"){var J,K=Q.split("+"),X=function(ke){return K.indexOf(ke)!==-1},ie=X("label"),se=X("text"),ae=X("value"),ue=X("percent"),ve=q.separators;if(J=ie?[B.label]:[],se){var ye=c.getFirstFilled(te.text,B.pts);u(ye)&&J.push(ye)}ae&&J.push(c.formatPieValue(B.v,ve)),ue&&J.push(c.formatPiePercent(B.v/U.vTotal,ve)),B.text=J.join("<br>")}if(ee){var pe=f.castOption(te,B.i,"texttemplate");if(pe){var de=function(ke){return{label:ke.label,value:ke.v,valueLabel:c.formatPieValue(ke.v,q.separators),percent:ke.v/U.vTotal,percentLabel:c.formatPiePercent(ke.v/U.vTotal,q.separators),color:ke.color,text:ke.text,customdata:f.castOption(te,ke.i,"customdata")}}(B),me=c.getFirstFilled(te.text,B.pts);(u(me)||me==="")&&(de.text=me),B.text=f.texttemplateString(pe,de,Y._fullLayout._d3locale,de,te._meta||{})}else B.text=""}}function j(Y,B){var U=Y.rotate*Math.PI/180,q=Math.cos(U),te=Math.sin(U),ee=(B.left+B.right)/2,Q=(B.top+B.bottom)/2;Y.textX=ee*q-Q*te,Y.textY=ee*te+Q*q,Y.noCenter=!0}F.exports={plot:function(Y,B){var U=Y._context.staticPlot,q=Y._fullLayout,te=q._size;o("pie",q),g(B,Y),z(B,te);var ee=f.makeTraceGroups(q._pielayer,B,"trace").each(function(Q){var J=T.select(this),K=Q[0],X=K.trace;(function(ie){var se,ae,ue,ve=ie[0],ye=ve.r,pe=ve.trace,de=c.getRotationAngle(pe.rotation),me=2*Math.PI/ve.vTotal,ke="px0",Ce="px1";if(pe.direction==="counterclockwise"){for(se=0;se<ie.length&&ie[se].hidden;se++);if(se===ie.length)return;de+=me*ie[se].v,me*=-1,ke="px1",Ce="px0"}for(ue=V(ye,de),se=0;se<ie.length;se++)(ae=ie[se]).hidden||(ae[ke]=ue,ae.startangle=de,de+=me*ae.v/2,ae.pxmid=V(ye,de),ae.midangle=de,ue=V(ye,de+=me*ae.v/2),ae.stopangle=de,ae[Ce]=ue,ae.largeArc=ae.v>ve.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/ve.vTotal,.5),ae.ring=1-pe.hole,ae.rInscribed=A(ae,ve))})(Q),J.attr("stroke-linejoin","round"),J.each(function(){var ie=T.select(this).selectAll("g.slice").data(Q);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var se=[[[],[]],[[],[]]],ae=!1;ie.each(function(Ce,ge){if(Ce.hidden)T.select(this).selectAll("path,g").remove();else{Ce.pointNumber=Ce.i,Ce.curveNumber=X.index,se[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var oe=K.cx,re=K.cy,fe=T.select(this),Se=fe.selectAll("path.surface").data([Ce]);if(Se.enter().append("path").classed("surface",!0).style({"pointer-events":U?"none":"all"}),fe.call(x,Y,Q),X.pull){var be=+c.castOption(X.pull,Ce.pts)||0;be>0&&(oe+=be*Ce.pxmid[0],re+=be*Ce.pxmid[1])}Ce.cxFinal=oe,Ce.cyFinal=re;var we=X.hole;if(Ce.v===K.vTotal){var Me="M"+(oe+Ce.px0[0])+","+(re+Ce.px0[1])+Ae(Ce.px0,Ce.pxmid,!0,1)+Ae(Ce.pxmid,Ce.px0,!0,1)+"Z";we?Se.attr("d","M"+(oe+we*Ce.px0[0])+","+(re+we*Ce.px0[1])+Ae(Ce.px0,Ce.pxmid,!1,we)+Ae(Ce.pxmid,Ce.px0,!1,we)+"Z"+Me):Se.attr("d",Me)}else{var Pe=Ae(Ce.px0,Ce.px1,!0,1);if(we){var De=1-we;Se.attr("d","M"+(oe+we*Ce.px1[0])+","+(re+we*Ce.px1[1])+Ae(Ce.px1,Ce.px0,!1,we)+"l"+De*Ce.px0[0]+","+De*Ce.px0[1]+Pe+"Z")}else Se.attr("d","M"+oe+","+re+"l"+Ce.px0[0]+","+Ce.px0[1]+Pe+"Z")}O(Y,Ce,K);var he=c.castOption(X.textposition,Ce.pts),_e=fe.selectAll("g.slicetext").data(Ce.text&&he!=="none"?[0]:[]);_e.enter().append("g").classed("slicetext",!0),_e.exit().remove(),_e.each(function(){var Oe=f.ensureSingle(T.select(this),"text","",function(yt){yt.attr("data-notex",1)}),Ee=f.ensureUniformFontSize(Y,he==="outside"?function(yt,pt,et){return{color:c.castOption(yt.outsidetextfont.color,pt.pts)||c.castOption(yt.textfont.color,pt.pts)||et.color,family:c.castOption(yt.outsidetextfont.family,pt.pts)||c.castOption(yt.textfont.family,pt.pts)||et.family,size:c.castOption(yt.outsidetextfont.size,pt.pts)||c.castOption(yt.textfont.size,pt.pts)||et.size,weight:c.castOption(yt.outsidetextfont.weight,pt.pts)||c.castOption(yt.textfont.weight,pt.pts)||et.weight,style:c.castOption(yt.outsidetextfont.style,pt.pts)||c.castOption(yt.textfont.style,pt.pts)||et.style,variant:c.castOption(yt.outsidetextfont.variant,pt.pts)||c.castOption(yt.textfont.variant,pt.pts)||et.variant,textcase:c.castOption(yt.outsidetextfont.textcase,pt.pts)||c.castOption(yt.textfont.textcase,pt.pts)||et.textcase,lineposition:c.castOption(yt.outsidetextfont.lineposition,pt.pts)||c.castOption(yt.textfont.lineposition,pt.pts)||et.lineposition,shadow:c.castOption(yt.outsidetextfont.shadow,pt.pts)||c.castOption(yt.textfont.shadow,pt.pts)||et.shadow}}(X,Ce,q.font):p(X,Ce,q.font));Oe.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Ee).call(i.convertToTspans,Y);var Be,Ve=b.bBox(Oe.node());if(he==="outside")Be=E(Ve,Ce);else if(Be=m(Ve,Ce,K),he==="auto"&&Be.scale<1){var Ze=f.ensureUniformFontSize(Y,X.outsidetextfont);Oe.call(b.font,Ze),Be=E(Ve=b.bBox(Oe.node()),Ce)}var it=Be.textPosAngle,at=it===void 0?Ce.pxmid:V(K.r,it);if(Be.targetX=oe+at[0]*Be.rCenter+(Be.x||0),Be.targetY=re+at[1]*Be.rCenter+(Be.y||0),j(Be,Ve),Be.outside){var gt=Be.targetY;Ce.yLabelMin=gt-Ve.height/2,Ce.yLabelMid=gt,Ce.yLabelMax=gt+Ve.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,ae=!0}Be.fontSize=Ee.size,n(X.type,Be,q),Q[ge].transform=Be,f.setTransormAndDisplay(Oe,Be)})}function Ae(Oe,Ee,Be,Ve){var Ze=Ve*(Ee[0]-Oe[0]),it=Ve*(Ee[1]-Oe[1]);return"a"+Ve*K.r+","+Ve*K.r+" 0 "+Ce.largeArc+(Be?" 1 ":" 0 ")+Ze+","+it}});var ue=T.select(this).selectAll("g.titletext").data(X.title.text?[0]:[]);if(ue.enter().append("g").classed("titletext",!0),ue.exit().remove(),ue.each(function(){var Ce,ge=f.ensureSingle(T.select(this),"text","",function(re){re.attr("data-notex",1)}),oe=X.title.text;X._meta&&(oe=f.templateString(oe,X._meta)),ge.text(oe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,X.title.font).call(i.convertToTspans,Y),Ce=X.title.position==="middle center"?function(re){var fe=Math.sqrt(re.titleBox.width*re.titleBox.width+re.titleBox.height*re.titleBox.height);return{x:re.cx,y:re.cy,scale:re.trace.hole*re.r*2/fe,tx:0,ty:-re.titleBox.height/2+re.trace.title.font.size}}(K):P(K,te),ge.attr("transform",t(Ce.x,Ce.y)+s(Math.min(1,Ce.scale))+t(Ce.tx,Ce.ty))}),ae&&function(Ce,ge){var oe,re,fe,Se,be,we,Me,Pe,De,he,_e,Ae,Oe;function Ee(it,at){return it.pxmid[1]-at.pxmid[1]}function Be(it,at){return at.pxmid[1]-it.pxmid[1]}function Ve(it,at){at||(at={});var gt,yt,pt,et,$e=at.labelExtraY+(re?at.yLabelMax:at.yLabelMin),At=re?it.yLabelMin:it.yLabelMax,Ot=re?it.yLabelMax:it.yLabelMin,Rt=it.cyFinal+be(it.px0[1],it.px1[1]),Ct=$e-At;if(Ct*Me>0&&(it.labelExtraY=Ct),f.isArrayOrTypedArray(ge.pull))for(yt=0;yt<he.length;yt++)(pt=he[yt])===it||(c.castOption(ge.pull,it.pts)||0)>=(c.castOption(ge.pull,pt.pts)||0)||((it.pxmid[1]-pt.pxmid[1])*Me>0?(Ct=pt.cyFinal+be(pt.px0[1],pt.px1[1])-At-it.labelExtraY)*Me>0&&(it.labelExtraY+=Ct):(Ot+it.labelExtraY-Rt)*Me>0&&(gt=3*we*Math.abs(yt-he.indexOf(it)),(et=pt.cxFinal+Se(pt.px0[0],pt.px1[0])+gt-(it.cxFinal+it.pxmid[0])-it.labelExtraX)*we>0&&(it.labelExtraX+=et)))}for(re=0;re<2;re++)for(fe=re?Ee:Be,be=re?Math.max:Math.min,Me=re?1:-1,oe=0;oe<2;oe++){for(Se=oe?Math.max:Math.min,we=oe?1:-1,(Pe=Ce[re][oe]).sort(fe),De=Ce[1-re][oe],he=De.concat(Pe),Ae=[],_e=0;_e<Pe.length;_e++)Pe[_e].yLabelMid!==void 0&&Ae.push(Pe[_e]);for(Oe=!1,_e=0;re&&_e<De.length;_e++)if(De[_e].yLabelMid!==void 0){Oe=De[_e];break}for(_e=0;_e<Ae.length;_e++){var Ze=_e&&Ae[_e-1];Oe&&!_e&&(Ze=Oe),Ve(Ae[_e],Ze)}}}(se,X),function(Ce,ge){Ce.each(function(oe){var re=T.select(this);if(oe.labelExtraX||oe.labelExtraY){var fe=re.select("g.slicetext text");oe.transform.targetX+=oe.labelExtraX,oe.transform.targetY+=oe.labelExtraY,f.setTransormAndDisplay(fe,oe.transform);var Se=oe.cxFinal+oe.pxmid[0],be="M"+Se+","+(oe.cyFinal+oe.pxmid[1]),we=(oe.yLabelMax-oe.yLabelMin)*(oe.pxmid[0]<0?-1:1)/4;if(oe.labelExtraX){var Me=oe.labelExtraX*oe.pxmid[1]/oe.pxmid[0],Pe=oe.yLabelMid+oe.labelExtraY-(oe.cyFinal+oe.pxmid[1]);Math.abs(Me)>Math.abs(Pe)?be+="l"+Pe*oe.pxmid[0]/oe.pxmid[1]+","+Pe+"H"+(Se+oe.labelExtraX+we):be+="l"+oe.labelExtraX+","+Me+"v"+(Pe-Me)+"h"+we}else be+="V"+(oe.yLabelMid+oe.labelExtraY)+"h"+we;f.ensureSingle(re,"path","textline").call(w.stroke,ge.outsidetextfont.color).attr({"stroke-width":Math.min(2,ge.outsidetextfont.size/8),d:be,fill:"none"})}else re.select("path.textline").remove()})}(ie,X),ae&&X.automargin){var ve=b.bBox(J.node()),ye=X.domain,pe=te.w*(ye.x[1]-ye.x[0]),de=te.h*(ye.y[1]-ye.y[0]),me=(.5*pe-K.r)/te.w,ke=(.5*de-K.r)/te.h;k.autoMargin(Y,"pie."+X.uid+".automargin",{xl:ye.x[0]-me,xr:ye.x[1]+me,yb:ye.y[0]-ke,yt:ye.y[1]+ke,l:Math.max(K.cx-K.r-ve.left,0),r:Math.max(ve.right-(K.cx+K.r),0),b:Math.max(ve.bottom-(K.cy+K.r),0),t:Math.max(K.cy-K.r-ve.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var Q=T.select(this);Q.attr("dy")&&Q.attr("dy",Q.attr("dy"))})},0)},formatSliceLabel:O,transformInsideText:m,determineInsideTextFont:p,positionTitleOutside:P,prerenderTitles:g,layoutAreas:z,attachFxHandlers:x,computeTransform:j}},22152:function(F,C,e){"use strict";var T=e(33428),k=e(10528),a=e(82744).resizeText;F.exports=function(w){var b=w._fullLayout._pielayer.selectAll(".trace");a(w,b,"pie"),b.each(function(f){var s=f[0].trace,t=T.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){T.select(this).call(k,i,s,w)})})}},10528:function(F,C,e){"use strict";var T=e(76308),k=e(69656).castOption,a=e(21552);F.exports=function(w,b,f,s){var t=f.marker.line,i=k(t.color,b.pts)||T.defaultLine,r=k(t.width,b.pts)||0;w.call(a,b,f,s).style("stroke-width",r).call(T.stroke,i)}},35484:function(F,C,e){"use strict";var T=e(52904);F.exports={x:T.x,y:T.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:T.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(F,C,e){"use strict";var T=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,a=e(43080),w=e(19280).findExtremes,b=e(44928);function f(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=T(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=f.prototype;s.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:k(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},s.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},s.updateFast=function(t){var i,r,n,o,l,c,d=this.xData=this.pickXData=t.x,u=this.yData=this.pickYData=t.y,x=this.pickXYData=t.xy,p=t.xbounds&&t.ybounds,g=t.indices,m=this.bounds;if(x){if(n=x,i=x.length>>>1,p)m[0]=t.xbounds[0],m[2]=t.xbounds[1],m[1]=t.ybounds[0],m[3]=t.ybounds[1];else for(c=0;c<i;c++)o=n[2*c],l=n[2*c+1],o<m[0]&&(m[0]=o),o>m[2]&&(m[2]=o),l<m[1]&&(m[1]=l),l>m[3]&&(m[3]=l);if(g)r=g;else for(r=new Int32Array(i),c=0;c<i;c++)r[c]=c}else for(i=d.length,n=new Float32Array(2*i),r=new Int32Array(i),c=0;c<i;c++)o=d[c],l=u[c],r[c]=c,n[2*c]=o,n[2*c+1]=l,o<m[0]&&(m[0]=o),o>m[2]&&(m[2]=o),l<m[1]&&(m[1]=l),l>m[3]&&(m[3]=l);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=n;var y=a(t.marker.color),v=a(t.marker.border.color),_=t.opacity*t.marker.opacity;y[3]*=_,this.pointcloudOptions.color=y;var h=t.marker.blend;h===null&&(h=d.length<100||u.length<100),this.pointcloudOptions.blend=h,v[3]*=_,this.pointcloudOptions.borderColor=v;var S=t.marker.sizemin,A=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=A,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,P=this.scene.yaxis,I=A/2||.5;t._extremes[E._id]=w(E,[m[0],m[2]],{ppad:I}),t._extremes[P._id]=w(P,[m[1],m[3]],{ppad:I})},s.dispose=function(){this.pointcloud.dispose()},F.exports=function(t,i){var r=new f(t,i.uid);return r.update(i),r}},41904:function(F,C,e){"use strict";var T=e(3400),k=e(35484);F.exports=function(a,w,b){function f(s,t){return T.coerce(a,w,k,s,t)}f("x"),f("y"),f("xbounds"),f("ybounds"),a.xy&&a.xy instanceof Float32Array&&(w.xy=a.xy),a.indices&&a.indices instanceof Int32Array&&(w.indices=a.indices),f("text"),f("marker.color",b),f("marker.opacity"),f("marker.blend"),f("marker.sizemin"),f("marker.sizemax"),f("marker.border.color",b),f("marker.border.arearatio"),w._length=null}},156:function(F,C,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),F.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(F,C,e){"use strict";var T=e(25376),k=e(45464),a=e(22548),w=e(55756),b=e(86968).u,f=e(21776).Ks,s=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,r=e(92880).extendFlat,n=e(67824).overrideAll;(F.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:w.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:T({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(F,C,e){"use strict";var T=e(67824).overrideAll,k=e(84888)._M,a=e(59596),w=e(65460),b=e(93972),f=e(86476),s=e(22676).prepSelect,t=e(3400),i=e(24040),r="sankey";function n(o,l){var c=o._fullData[l],d=o._fullLayout,u=d.dragmode,x=d.dragmode==="pan"?"move":"crosshair",p=c._bgRect;if(p&&u!=="pan"&&u!=="zoom"){b(p,x);var g={_id:"x",c2p:t.identity,_offset:c._sankey.translateX,_length:c._sankey.width},m={_id:"y",c2p:t.identity,_offset:c._sankey.translateY,_length:c._sankey.height},y={gd:o,element:p.node(),plotinfo:{id:l,xaxis:g,yaxis:m,fillRangeItems:t.noop},subplot:l,xaxes:[g],yaxes:[m],doneFnCompleted:function(v){var _,h=o._fullData[l],S=h.node.groups.slice(),A=[];function E(z){for(var V=h._sankey.graph.nodes,O=0;O<V.length;O++)if(V[O].pointNumber===z)return V[O]}for(var P=0;P<v.length;P++){var I=E(v[P].pointNumber);if(I)if(I.group){for(var D=0;D<I.childrenNodes.length;D++)A.push(I.childrenNodes[D].pointNumber);S[I.pointNumber-h.node._count]=!1}else A.push(I.pointNumber)}_=S.filter(Boolean).concat([A]),i.call("_guiRestyle",o,{"node.groups":[_]},l)},prepFn:function(v,_,h){s(v,_,h,y,u)}};f.init(y)}}C.name=r,C.baseLayoutAttrOverrides=T({hoverlabel:w.hoverlabel},"plot","nested"),C.plot=function(o){var l=k(o.calcdata,r)[0];a(o,l),C.updateFx(o)},C.clean=function(o,l,c,d){var u=d._has&&d._has(r),x=l._has&&l._has(r);u&&!x&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},C.updateFx=function(o){for(var l=0;l<o._fullData.length;l++)n(o,l)}},48068:function(F,C,e){"use strict";var T=e(78484),k=e(3400),a=e(71688).wrap,w=k.isArrayOrTypedArray,b=k.isIndex,f=e(8932);F.exports=function(s,t){var i=function(r){var n,o=r.node,l=r.link,c=[],d=w(l.color),u=w(l.hovercolor),x=w(l.customdata),p={},g={},m=l.colorscales.length;for(n=0;n<m;n++){var y=l.colorscales[n],v=f.extractScale(y,{cLetter:"c"}),_=f.makeColorScaleFunc(v);g[y.label]=_}var h=0;for(n=0;n<l.value.length;n++)l.source[n]>h&&(h=l.source[n]),l.target[n]>h&&(h=l.target[n]);var S,A=h+1;r.node._count=A;var E=r.node.groups,P={};for(n=0;n<E.length;n++){var I=E[n];for(S=0;S<I.length;S++){var D=I[S],z=A+n;P.hasOwnProperty(D)?k.warn("Node "+D+" is already part of a group."):P[D]=z}}var V={source:[],target:[]};for(n=0;n<l.value.length;n++){var O=l.value[n],j=l.source[n],Y=l.target[n];if(O>0&&b(j,A)&&b(Y,A)&&(!P.hasOwnProperty(j)||!P.hasOwnProperty(Y)||P[j]!==P[Y])){P.hasOwnProperty(Y)&&(Y=P[Y]),P.hasOwnProperty(j)&&(j=P[j]),Y=+Y,p[j=+j]=p[Y]=!0;var B="";l.label&&l.label[n]&&(B=l.label[n]);var U=null;B&&g.hasOwnProperty(B)&&(U=g[B]),c.push({pointNumber:n,label:B,color:d?l.color[n]:l.color,hovercolor:u?l.hovercolor[n]:l.hovercolor,customdata:x?l.customdata[n]:l.customdata,concentrationscale:U,source:j,target:Y,value:+O}),V.source.push(j),V.target.push(Y)}}var q=A+E.length,te=w(o.color),ee=w(o.customdata),Q=[];for(n=0;n<q;n++)if(p[n]){var J=o.label[n];Q.push({group:n>A-1,childrenNodes:[],pointNumber:n,label:J,color:te?o.color[n]:o.color,customdata:ee?o.customdata[n]:o.customdata})}var K=!1;return function(X,ie,se){for(var ae=k.init2dArray(X,0),ue=0;ue<Math.min(ie.length,se.length);ue++)if(k.isIndex(ie[ue],X)&&k.isIndex(se[ue],X)){if(ie[ue]===se[ue])return!0;ae[ie[ue]].push(se[ue])}return T(ae).components.some(function(ve){return ve.length>1})}(q,V.source,V.target)&&(K=!0),{circular:K,links:c,nodes:Q,groups:E,groupLookup:P}}(t);return a({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(F){"use strict";F.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(F,C,e){"use strict";var T=e(3400),k=e(41440),a=e(76308),w=e(49760),b=e(86968).Q,f=e(16132),s=e(31780),t=e(51272);function i(r,n){function o(l,c){return T.coerce(r,n,k.link.colorscales,l,c)}o("label"),o("cmin"),o("cmax"),o("colorscale")}F.exports=function(r,n,o,l){function c(E,P){return T.coerce(r,n,k,E,P)}var d=T.extendDeep(l.hoverlabel,r.hoverlabel),u=r.node,x=s.newContainer(n,"node");function p(E,P){return T.coerce(u,x,k.node,E,P)}p("label"),p("groups"),p("x"),p("y"),p("pad"),p("thickness"),p("line.color"),p("line.width"),p("hoverinfo",r.hoverinfo),f(u,x,p,d),p("hovertemplate"),p("align");var g=l.colorway;p("color",x.label.map(function(E,P){return a.addOpacity(function(I){return g[I%g.length]}(P),.8)})),p("customdata");var m=r.link||{},y=s.newContainer(n,"link");function v(E,P){return T.coerce(m,y,k.link,E,P)}v("label"),v("arrowlen"),v("source"),v("target"),v("value"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),f(m,y,v,d),v("hovertemplate");var _,h=w(l.paper_bgcolor).getLuminance()<.333,S=v("color",h?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function A(E){var P=w(E);if(!P.isValid())return E;var I=P.getAlpha();return I<=.8?P.setAlpha(I+.2):P=h?P.brighten():P.darken(),P.toRgbString()}v("hovercolor",Array.isArray(S)?S.map(A):A(S)),v("customdata"),t(m,y,{name:"colorscales",handleItemDefaults:i}),b(n,l,c),c("orientation"),c("valueformat"),c("valuesuffix"),x.x.length&&x.y.length&&(_="freeform"),c("arrangement",_),T.coerceFont(c,"textfont",l.font,{autoShadowDflt:!0}),n._length=null}},45499:function(F,C,e){"use strict";F.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=k.numberFormat,w=e(83248),b=e(93024),f=e(76308),s=e(11820).cn,t=k._;function i(m){return m!==""}function r(m,y){return m.filter(function(v){return v.key===y.traceId})}function n(m,y){T.select(m).select("path").style("fill-opacity",y),T.select(m).select("rect").style("fill-opacity",y)}function o(m){T.select(m).select("text.name").style("fill","black")}function l(m){return function(y){return m.node.sourceLinks.indexOf(y.link)!==-1||m.node.targetLinks.indexOf(y.link)!==-1}}function c(m){return function(y){return y.node.sourceLinks.indexOf(m.link)!==-1||y.node.targetLinks.indexOf(m.link)!==-1}}function d(m,y,v){y&&v&&r(v,y).selectAll("."+s.sankeyLink).filter(l(y)).call(x.bind(0,y,v,!1))}function u(m,y,v){y&&v&&r(v,y).selectAll("."+s.sankeyLink).filter(l(y)).call(p.bind(0,y,v,!1))}function x(m,y,v,_){_.style("fill",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverHue}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return h.tinyColorHoverAlpha}),_.each(function(h){var S=h.link.label;S!==""&&r(y,m).selectAll("."+s.sankeyLink).filter(function(A){return A.link.label===S}).style("fill",function(A){if(!A.link.concentrationscale)return A.tinyColorHoverHue}).style("fill-opacity",function(A){if(!A.link.concentrationscale)return A.tinyColorHoverAlpha})}),v&&r(y,m).selectAll("."+s.sankeyNode).filter(c(m)).call(d)}function p(m,y,v,_){_.style("fill",function(h){return h.tinyColorHue}).style("fill-opacity",function(h){return h.tinyColorAlpha}),_.each(function(h){var S=h.link.label;S!==""&&r(y,m).selectAll("."+s.sankeyLink).filter(function(A){return A.link.label===S}).style("fill",function(A){return A.tinyColorHue}).style("fill-opacity",function(A){return A.tinyColorAlpha})}),v&&r(y,m).selectAll(s.sankeyNode).filter(c(m)).call(u)}function g(m,y){var v=m.hoverlabel||{},_=k.nestedProperty(v,y).get();return!Array.isArray(_)&&_}F.exports=function(m,y){for(var v=m._fullLayout,_=v._paper,h=v._size,S=0;S<m._fullData.length;S++)if(m._fullData[S].visible&&m._fullData[S].type===s.sankey&&!m._fullData[S]._viewInitial){var A=m._fullData[S].node;m._fullData[S]._viewInitial={node:{groups:A.groups.slice(),x:A.x.slice(),y:A.y.slice()}}}var E=t(m,"source:")+" ",P=t(m,"target:")+" ",I=t(m,"concentration:")+" ",D=t(m,"incoming flow count:")+" ",z=t(m,"outgoing flow count:")+" ";w(m,_,y,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:function(V,O,j){m._fullLayout.hovermode!==!1&&(T.select(V).call(x.bind(0,O,j,!0)),O.link.trace.link.hoverinfo!=="skip"&&(O.link.fullData=O.link.trace,m.emit("plotly_hover",{event:T.event,points:[O.link]})))},follow:function(V,O){if(m._fullLayout.hovermode!==!1){var j=O.link.trace.link;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){for(var Y=[],B=0,U=0;U<O.flow.links.length;U++){var q=O.flow.links[U];if(m._fullLayout.hovermode!=="closest"||O.link.pointNumber===q.pointNumber){O.link.pointNumber===q.pointNumber&&(B=U),q.fullData=q.trace,j=O.link.trace.link;var te=Q(q),ee={valueLabel:a(O.valueFormat)(q.value)+O.valueSuffix};Y.push({x:te[0],y:te[1],name:ee.valueLabel,text:[q.label||"",E+q.source.label,P+q.target.label,q.concentrationscale?I+a("%0.2f")(q.flow.labelConcentration):""].filter(i).join("<br>"),color:g(j,"bgcolor")||f.addOpacity(q.color,1),borderColor:g(j,"bordercolor"),fontFamily:g(j,"font.family"),fontSize:g(j,"font.size"),fontColor:g(j,"font.color"),fontWeight:g(j,"font.weight"),fontStyle:g(j,"font.style"),fontVariant:g(j,"font.variant"),fontTextcase:g(j,"font.textcase"),fontLineposition:g(j,"font.lineposition"),fontShadow:g(j,"font.shadow"),nameLength:g(j,"namelength"),textAlign:g(j,"align"),idealAlign:T.event.x<te[0]?"right":"left",hovertemplate:j.hovertemplate,hovertemplateLabels:ee,eventData:[q]})}}b.loneHover(Y,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:m,anchorIndex:B}).each(function(){O.link.concentrationscale||n(this,.65),o(this)})}}function Q(J){var K,X;J.circular?(K=(J.circularPathData.leftInnerExtent+J.circularPathData.rightInnerExtent)/2,X=J.circularPathData.verticalFullExtent):(K=(J.source.x1+J.target.x0)/2,X=(J.y0+J.y1)/2);var ie=[K,X];return J.trace.orientation==="v"&&ie.reverse(),ie[0]+=O.parent.translateX,ie[1]+=O.parent.translateY,ie}},unhover:function(V,O,j){m._fullLayout.hovermode!==!1&&(T.select(V).call(p.bind(0,O,j,!0)),O.link.trace.link.hoverinfo!=="skip"&&(O.link.fullData=O.link.trace,m.emit("plotly_unhover",{event:T.event,points:[O.link]})),b.loneUnhover(v._hoverlayer.node()))},select:function(V,O){var j=O.link;j.originalEvent=T.event,m._hoverdata=[j],b.click(m,{target:!0})}},nodeEvents:{hover:function(V,O,j){m._fullLayout.hovermode!==!1&&(T.select(V).call(d,O,j),O.node.trace.node.hoverinfo!=="skip"&&(O.node.fullData=O.node.trace,m.emit("plotly_hover",{event:T.event,points:[O.node]})))},follow:function(V,O){if(m._fullLayout.hovermode!==!1){var j=O.node.trace.node;if(j.hoverinfo!=="none"&&j.hoverinfo!=="skip"){var Y=T.select(V).select("."+s.nodeRect),B=m._fullLayout._paperdiv.node().getBoundingClientRect(),U=Y.node().getBoundingClientRect(),q=U.left-2-B.left,te=U.right+2-B.left,ee=U.top+U.height/4-B.top,Q={valueLabel:a(O.valueFormat)(O.node.value)+O.valueSuffix};O.node.fullData=O.node.trace,m._fullLayout._calcInverseTransform(m);var J=m._fullLayout._invScaleX,K=m._fullLayout._invScaleY,X=b.loneHover({x0:J*q,x1:J*te,y:K*ee,name:a(O.valueFormat)(O.node.value)+O.valueSuffix,text:[O.node.label,D+O.node.targetLinks.length,z+O.node.sourceLinks.length].filter(i).join("<br>"),color:g(j,"bgcolor")||O.tinyColorHue,borderColor:g(j,"bordercolor"),fontFamily:g(j,"font.family"),fontSize:g(j,"font.size"),fontColor:g(j,"font.color"),fontWeight:g(j,"font.weight"),fontStyle:g(j,"font.style"),fontVariant:g(j,"font.variant"),fontTextcase:g(j,"font.textcase"),fontLineposition:g(j,"font.lineposition"),fontShadow:g(j,"font.shadow"),nameLength:g(j,"namelength"),textAlign:g(j,"align"),idealAlign:"left",hovertemplate:j.hovertemplate,hovertemplateLabels:Q,eventData:[O.node]},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:m});n(X,.85),o(X)}}},unhover:function(V,O,j){m._fullLayout.hovermode!==!1&&(T.select(V).call(u,O,j),O.node.trace.node.hoverinfo!=="skip"&&(O.node.fullData=O.node.trace,m.emit("plotly_unhover",{event:T.event,points:[O.node]})),b.loneUnhover(v._hoverlayer.node()))},select:function(V,O,j){var Y=O.node;Y.originalEvent=T.event,m._hoverdata=[Y],T.select(V).call(u,O,j),b.click(m,{target:!0})}}})}},83248:function(F,C,e){"use strict";var T=e(49812),k=e(67756).Gz,a=e(33428),w=e(26800),b=e(48932),f=e(11820),s=e(49760),t=e(76308),i=e(43616),r=e(3400),n=r.strTranslate,o=r.strRotate,l=e(71688),c=l.keyFun,d=l.repeat,u=l.unwrap,x=e(72736),p=e(24040),g=e(84284),m=g.CAP_SHIFT,y=g.LINE_SPACING;function v(U,q,te){var ee,Q=u(q),J=Q.trace,K=J.domain,X=J.orientation==="h",ie=J.node.pad,se=J.node.thickness,ae={justify:w.sankeyJustify,left:w.sankeyLeft,right:w.sankeyRight,center:w.sankeyCenter}[J.node.align],ue=U.width*(K.x[1]-K.x[0]),ve=U.height*(K.y[1]-K.y[0]),ye=Q._nodes,pe=Q._links,de=Q.circular;(ee=de?b.sankeyCircular().circularLinkGap(0):w.sankey()).iterations(f.sankeyIterations).size(X?[ue,ve]:[ve,ue]).nodeWidth(se).nodePadding(ie).nodeId(function(Me){return Me.pointNumber}).nodeAlign(ae).nodes(ye).links(pe);var me,ke,Ce,ge=ee();for(var oe in ee.nodePadding()<ie&&r.warn("node.pad was reduced to ",ee.nodePadding()," to fit within the figure."),Q._groupLookup){var re,fe=parseInt(Q._groupLookup[oe]);for(me=0;me<ge.nodes.length;me++)if(ge.nodes[me].pointNumber===fe){re=ge.nodes[me];break}if(re){var Se={pointNumber:parseInt(oe),x0:re.x0,x1:re.x1,y0:re.y0,y1:re.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ge.nodes.unshift(Se),re.childrenNodes.unshift(Se)}}if(function(){for(me=0;me<ge.nodes.length;me++){var Me,Pe,De=ge.nodes[me],he={};for(ke=0;ke<De.targetLinks.length;ke++)Me=(Pe=De.targetLinks[ke]).source.pointNumber+":"+Pe.target.pointNumber,he.hasOwnProperty(Me)||(he[Me]=[]),he[Me].push(Pe);var _e=Object.keys(he);for(ke=0;ke<_e.length;ke++){var Ae=he[Me=_e[ke]],Oe=0,Ee={};for(Ce=0;Ce<Ae.length;Ce++)Ee[(Pe=Ae[Ce]).label]||(Ee[Pe.label]=0),Ee[Pe.label]+=Pe.value,Oe+=Pe.value;for(Ce=0;Ce<Ae.length;Ce++)(Pe=Ae[Ce]).flow={value:Oe,labelConcentration:Ee[Pe.label]/Oe,concentration:Pe.value/Oe,links:Ae},Pe.concentrationscale&&(Pe.color=s(Pe.concentrationscale(Pe.flow.labelConcentration)))}var Be=0;for(ke=0;ke<De.sourceLinks.length;ke++)Be+=De.sourceLinks[ke].value;for(ke=0;ke<De.sourceLinks.length;ke++)(Pe=De.sourceLinks[ke]).concentrationOut=Pe.value/Be;var Ve=0;for(ke=0;ke<De.targetLinks.length;ke++)Ve+=De.targetLinks[ke].value;for(ke=0;ke<De.targetLinks.length;ke++)(Pe=De.targetLinks[ke]).concenrationIn=Pe.value/Ve}}(),J.node.x.length&&J.node.y.length){for(me=0;me<Math.min(J.node.x.length,J.node.y.length,ge.nodes.length);me++)if(J.node.x[me]&&J.node.y[me]){var be=[J.node.x[me]*ue,J.node.y[me]*ve];ge.nodes[me].x0=be[0]-se/2,ge.nodes[me].x1=be[0]+se/2;var we=ge.nodes[me].y1-ge.nodes[me].y0;ge.nodes[me].y0=be[1]-we/2,ge.nodes[me].y1=be[1]+we/2}J.arrangement==="snap"&&function(Me){var Pe,De,he=Me.map(function(Be,Ve){return{x0:Be.x0,index:Ve}}).sort(function(Be,Ve){return Be.x0-Ve.x0}),_e=[],Ae=-1,Oe=-1/0;for(me=0;me<he.length;me++){var Ee=Me[he[me].index];Ee.x0>Oe+se&&(Ae+=1,Pe=Ee.x0),Oe=Ee.x0,_e[Ae]||(_e[Ae]=[]),_e[Ae].push(Ee),De=Pe-Ee.x0,Ee.x0+=De,Ee.x1+=De}return _e}(ye=ge.nodes).forEach(function(Me){var Pe,De,he,_e=0,Ae=Me.length;for(Me.sort(function(Oe,Ee){return Oe.y0-Ee.y0}),he=0;he<Ae;++he)(Pe=Me[he]).y0>=_e||(De=_e-Pe.y0)>1e-6&&(Pe.y0+=De,Pe.y1+=De),_e=Pe.y1+ie}),ee.update(ge)}return{circular:de,key:te,trace:J,guid:r.randstr(),horizontal:X,width:ue,height:ve,nodePad:J.node.pad,nodeLineColor:J.node.line.color,nodeLineWidth:J.node.line.width,linkLineColor:J.link.line.color,linkLineWidth:J.link.line.width,linkArrowLength:J.link.arrowlen,valueFormat:J.valueformat,valueSuffix:J.valuesuffix,textFont:J.textfont,translateX:K.x[0]*U.width+U.margin.l,translateY:U.height-K.y[1]*U.height+U.margin.t,dragParallel:X?ve:ue,dragPerpendicular:X?ue:ve,arrangement:J.arrangement,sankey:ee,graph:ge,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(U,q,te){var ee=s(q.color),Q=s(q.hovercolor),J=q.source.label+"|"+q.target.label+"__"+te;return q.trace=U.trace,q.curveNumber=U.trace.index,{circular:U.circular,key:J,traceId:U.key,pointNumber:q.pointNumber,link:q,tinyColorHue:t.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),tinyColorHoverHue:t.tinyRGB(Q),tinyColorHoverAlpha:Q.getAlpha(),linkPath:h,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:q.flow}}function h(){return function(U){var q=U.linkArrowLength;if(U.link.circular)return function(me,ke){var Ce=me.width/2,ge=me.circularPathData;return me.circularLinkType==="top"?"M "+(ge.targetX-ke)+" "+(ge.targetY+Ce)+" L"+(ge.rightInnerExtent-ke)+" "+(ge.targetY+Ce)+"A"+(ge.rightLargeArcRadius+Ce)+" "+(ge.rightSmallArcRadius+Ce)+" 0 0 1 "+(ge.rightFullExtent-Ce-ke)+" "+(ge.targetY-ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-Ce-ke)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+Ce)+" "+(ge.rightLargeArcRadius+Ce)+" 0 0 1 "+(ge.rightInnerExtent-ke)+" "+(ge.verticalFullExtent-Ce)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent-Ce)+"A"+(ge.leftLargeArcRadius+Ce)+" "+(ge.leftLargeArcRadius+Ce)+" 0 0 1 "+(ge.leftFullExtent+Ce)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+Ce)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+Ce)+" "+(ge.leftSmallArcRadius+Ce)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.sourceY+Ce)+"L"+ge.sourceX+" "+(ge.sourceY+Ce)+"L"+ge.sourceX+" "+(ge.sourceY-Ce)+"L"+ge.leftInnerExtent+" "+(ge.sourceY-Ce)+"A"+(ge.leftLargeArcRadius-Ce)+" "+(ge.leftSmallArcRadius-Ce)+" 0 0 0 "+(ge.leftFullExtent-Ce)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-Ce)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-Ce)+" "+(ge.leftLargeArcRadius-Ce)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent+Ce)+"L"+(ge.rightInnerExtent-ke)+" "+(ge.verticalFullExtent+Ce)+"A"+(ge.rightLargeArcRadius-Ce)+" "+(ge.rightLargeArcRadius-Ce)+" 0 0 0 "+(ge.rightFullExtent+Ce-ke)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+Ce-ke)+" "+(ge.targetY-ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-Ce)+" "+(ge.rightSmallArcRadius-Ce)+" 0 0 0 "+(ge.rightInnerExtent-ke)+" "+(ge.targetY-Ce)+"L"+(ge.targetX-ke)+" "+(ge.targetY-Ce)+(ke>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z":"M "+(ge.targetX-ke)+" "+(ge.targetY-Ce)+" L"+(ge.rightInnerExtent-ke)+" "+(ge.targetY-Ce)+"A"+(ge.rightLargeArcRadius+Ce)+" "+(ge.rightSmallArcRadius+Ce)+" 0 0 0 "+(ge.rightFullExtent-Ce-ke)+" "+(ge.targetY+ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-Ce-ke)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+Ce)+" "+(ge.rightLargeArcRadius+Ce)+" 0 0 0 "+(ge.rightInnerExtent-ke)+" "+(ge.verticalFullExtent+Ce)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent+Ce)+"A"+(ge.leftLargeArcRadius+Ce)+" "+(ge.leftLargeArcRadius+Ce)+" 0 0 0 "+(ge.leftFullExtent+Ce)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+Ce)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+Ce)+" "+(ge.leftSmallArcRadius+Ce)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.sourceY-Ce)+"L"+ge.sourceX+" "+(ge.sourceY-Ce)+"L"+ge.sourceX+" "+(ge.sourceY+Ce)+"L"+ge.leftInnerExtent+" "+(ge.sourceY+Ce)+"A"+(ge.leftLargeArcRadius-Ce)+" "+(ge.leftSmallArcRadius-Ce)+" 0 0 1 "+(ge.leftFullExtent-Ce)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-Ce)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-Ce)+" "+(ge.leftLargeArcRadius-Ce)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent-Ce)+"L"+(ge.rightInnerExtent-ke)+" "+(ge.verticalFullExtent-Ce)+"A"+(ge.rightLargeArcRadius-Ce)+" "+(ge.rightLargeArcRadius-Ce)+" 0 0 1 "+(ge.rightFullExtent+Ce-ke)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+Ce-ke)+" "+(ge.targetY+ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-Ce)+" "+(ge.rightSmallArcRadius-Ce)+" 0 0 1 "+(ge.rightInnerExtent-ke)+" "+(ge.targetY+Ce)+"L"+(ge.targetX-ke)+" "+(ge.targetY+Ce)+(ke>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z"}(U.link,q);var te=Math.abs((U.link.target.x0-U.link.source.x1)/2);q>te&&(q=te);var ee=U.link.source.x1,Q=U.link.target.x0-q,J=k(ee,Q),K=J(.5),X=J(.5),ie=U.link.y0-U.link.width/2,se=U.link.y0+U.link.width/2,ae=U.link.y1-U.link.width/2,ue=U.link.y1+U.link.width/2,ve="M"+ee+","+ie,ye="C"+K+","+ie+" "+X+","+ae+" "+Q+","+ae,pe="C"+X+","+ue+" "+K+","+se+" "+ee+","+se,de=q>0?"L"+(Q+q)+","+(ae+U.link.width/2):"";return ve+ye+(de+="L"+Q+","+ue)+pe+"Z"}}function S(U,q){var te=s(q.color),ee=f.nodePadAcross,Q=U.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var J=q.dx,K=Math.max(.5,q.dy),X="node_"+q.pointNumber;return q.group&&(X=r.randstr()),q.trace=U.trace,q.curveNumber=U.trace.index,{index:q.pointNumber,key:X,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:U.key,trace:U.trace,node:q,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(J),visibleHeight:K,zoneX:-ee,zoneY:-Q,zoneWidth:J+2*ee,zoneHeight:K+2*Q,labelY:U.horizontal?q.dy/2+1:q.dx/2+1,left:q.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,X].join("_"),interactionState:U.interactionState,figure:U}}function A(U){U.attr("transform",function(q){return n(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function E(U){U.call(A)}function P(U,q){U.call(E),q.attr("d",h())}function I(U){U.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function D(U){return U.link.width>1||U.linkLineWidth>0}function z(U){return n(U.translateX,U.translateY)+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V(U,q,te){U.on(".basic",null).on("mouseover.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(te.hover(this,ee,q),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(te.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(te.unhover(this,ee,q),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(te.unhover(this,ee,q),ee.interactionState.hovered=!1),ee.interactionState.dragInProgress||ee.partOfGroup||te.select(this,ee,q)})}function O(U,q,te,ee){var Q=a.behavior.drag().origin(function(J){return{x:J.node.x0+J.visibleWidth/2,y:J.node.y0+J.visibleHeight/2}}).on("dragstart",function(J){if(J.arrangement!=="fixed"&&(r.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(X){ee._fullLayout._dragCover=X}),r.raiseToTop(this),J.interactionState.dragInProgress=J.node,Y(J.node),J.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,J.interactionState.hovered),J.interactionState.hovered=!1),J.arrangement==="snap")){var K=J.traceId+"|"+J.key;J.forceLayouts[K]?J.forceLayouts[K].alpha(1):function(X,ie,se,ae){(function(ve){for(var ye=0;ye<ve.length;ye++)ve[ye].y=(ve[ye].y0+ve[ye].y1)/2,ve[ye].x=(ve[ye].x0+ve[ye].x1)/2})(se.graph.nodes);var ue=se.graph.nodes.filter(function(ve){return ve.originalX===se.node.originalX}).filter(function(ve){return!ve.partOfGroup});se.forceLayouts[ie]=T.forceSimulation(ue).alphaDecay(0).force("collide",T.forceCollide().radius(function(ve){return ve.dy/2+se.nodePad/2}).strength(1).iterations(f.forceIterations)).force("constrain",function(ve,ye,pe,de){return function(){for(var me=0,ke=0;ke<pe.length;ke++){var Ce=pe[ke];Ce===de.interactionState.dragInProgress?(Ce.x=Ce.lastDraggedX,Ce.y=Ce.lastDraggedY):(Ce.vx=(Ce.originalX-Ce.x)/f.forceTicksPerFrame,Ce.y=Math.min(de.size-Ce.dy/2,Math.max(Ce.dy/2,Ce.y))),me=Math.max(me,Math.abs(Ce.vx),Math.abs(Ce.vy))}!de.interactionState.dragInProgress&&me<.1&&de.forceLayouts[ye].alpha()>0&&de.forceLayouts[ye].alpha(0)}}(0,ie,ue,se)).stop()}(0,K,J),function(X,ie,se,ae,ue){window.requestAnimationFrame(function ve(){var ye;for(ye=0;ye<f.forceTicksPerFrame;ye++)se.forceLayouts[ae].tick();if(function(de){for(var me=0;me<de.length;me++)de[me].y0=de[me].y-de[me].dy/2,de[me].y1=de[me].y0+de[me].dy,de[me].x0=de[me].x-de[me].dx/2,de[me].x1=de[me].x0+de[me].dx}(se.graph.nodes),se.sankey.update(se.graph),P(X.filter(B(se)),ie),se.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(ve);else{var pe=se.node.originalX;se.node.x0=pe-se.visibleWidth/2,se.node.x1=pe+se.visibleWidth/2,j(se,ue)}})}(U,q,J,K,ee)}}).on("drag",function(J){if(J.arrangement!=="fixed"){var K=a.event.x,X=a.event.y;J.arrangement==="snap"?(J.node.x0=K-J.visibleWidth/2,J.node.x1=K+J.visibleWidth/2,J.node.y0=X-J.visibleHeight/2,J.node.y1=X+J.visibleHeight/2):(J.arrangement==="freeform"&&(J.node.x0=K-J.visibleWidth/2,J.node.x1=K+J.visibleWidth/2),X=Math.max(0,Math.min(J.size-J.visibleHeight/2,X)),J.node.y0=X-J.visibleHeight/2,J.node.y1=X+J.visibleHeight/2),Y(J.node),J.arrangement!=="snap"&&(J.sankey.update(J.graph),P(U.filter(B(J)),q))}}).on("dragend",function(J){if(J.arrangement!=="fixed"){J.interactionState.dragInProgress=!1;for(var K=0;K<J.node.childrenNodes.length;K++)J.node.childrenNodes[K].x=J.node.x,J.node.childrenNodes[K].y=J.node.y;J.arrangement!=="snap"&&j(J,ee)}});U.on(".drag",null).call(Q)}function j(U,q){for(var te=[],ee=[],Q=0;Q<U.graph.nodes.length;Q++){var J=(U.graph.nodes[Q].x0+U.graph.nodes[Q].x1)/2,K=(U.graph.nodes[Q].y0+U.graph.nodes[Q].y1)/2;te.push(J/U.figure.width),ee.push(K/U.figure.height)}p.call("_guiRestyle",q,{"node.x":[te],"node.y":[ee]},U.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function Y(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function B(U){return function(q){return q.node.originalX===U.node.originalX}}F.exports=function(U,q,te,ee,Q){var J=U._context.staticPlot,K=!1;r.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){K=!0});var X=U._fullLayout._dragCover,ie=te.filter(function(me){return u(me).trace.visible}).map(v.bind(null,ee)),se=q.selectAll("."+f.cn.sankey).data(ie,c);se.exit().remove(),se.enter().append("g").classed(f.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",J?"none":"auto").attr("transform",z),se.each(function(me,ke){U._fullData[ke]._sankey=me;var Ce="bgsankey-"+me.trace.uid+"-"+ke;r.ensureSingle(U._fullLayout._draggers,"rect",Ce),U._fullData[ke]._bgRect=a.select("."+Ce),U._fullData[ke]._bgRect.style("pointer-events",J?"none":"all").attr("width",me.width).attr("height",me.height).attr("x",me.translateX).attr("y",me.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(f.ease).duration(f.duration).attr("transform",z);var ae=se.selectAll("."+f.cn.sankeyLinks).data(d,c);ae.enter().append("g").classed(f.cn.sankeyLinks,!0).style("fill","none");var ue=ae.selectAll("."+f.cn.sankeyLink).data(function(me){return me.graph.links.filter(function(ke){return ke.value}).map(_.bind(null,me))},c);ue.enter().append("path").classed(f.cn.sankeyLink,!0).call(V,se,Q.linkEvents),ue.style("stroke",function(me){return D(me)?t.tinyRGB(s(me.linkLineColor)):me.tinyColorHue}).style("stroke-opacity",function(me){return D(me)?t.opacity(me.linkLineColor):me.tinyColorAlpha}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}).style("stroke-width",function(me){return D(me)?me.linkLineWidth:1}).attr("d",h()),ue.style("opacity",function(){return U._context.staticPlot||K||X?1:0}).transition().ease(f.ease).duration(f.duration).style("opacity",1),ue.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var ve=se.selectAll("."+f.cn.sankeyNodeSet).data(d,c);ve.enter().append("g").classed(f.cn.sankeyNodeSet,!0),ve.style("cursor",function(me){switch(me.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ye=ve.selectAll("."+f.cn.sankeyNode).data(function(me){var ke=me.graph.nodes;return function(Ce){var ge,oe=[];for(ge=0;ge<Ce.length;ge++)Ce[ge].originalX=(Ce[ge].x0+Ce[ge].x1)/2,Ce[ge].originalY=(Ce[ge].y0+Ce[ge].y1)/2,oe.indexOf(Ce[ge].originalX)===-1&&oe.push(Ce[ge].originalX);for(oe.sort(function(re,fe){return re-fe}),ge=0;ge<Ce.length;ge++)Ce[ge].originalLayerIndex=oe.indexOf(Ce[ge].originalX),Ce[ge].originalLayer=Ce[ge].originalLayerIndex/(oe.length-1)}(ke),ke.map(S.bind(null,me))},c);ye.enter().append("g").classed(f.cn.sankeyNode,!0).call(A).style("opacity",function(me){return!U._context.staticPlot&&!K||me.partOfGroup?0:1}),ye.call(V,se,Q.nodeEvents).call(O,ue,Q,U),ye.transition().ease(f.ease).duration(f.duration).call(A).style("opacity",function(me){return me.partOfGroup?0:1}),ye.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var pe=ye.selectAll("."+f.cn.nodeRect).data(d);pe.enter().append("rect").classed(f.cn.nodeRect,!0).call(I),pe.style("stroke-width",function(me){return me.nodeLineWidth}).style("stroke",function(me){return t.tinyRGB(s(me.nodeLineColor))}).style("stroke-opacity",function(me){return t.opacity(me.nodeLineColor)}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}),pe.transition().ease(f.ease).duration(f.duration).call(I);var de=ye.selectAll("."+f.cn.nodeLabel).data(d);de.enter().append("text").classed(f.cn.nodeLabel,!0).style("cursor","default"),de.attr("data-notex",1).text(function(me){return me.node.label}).each(function(me){var ke=a.select(this);i.font(ke,me.textFont),x.convertToTspans(ke,U)}).attr("text-anchor",function(me){return me.horizontal&&me.left?"end":"start"}).attr("transform",function(me){var ke=a.select(this),Ce=x.lineCount(ke),ge=me.textFont.size*((Ce-1)*y-m),oe=me.nodeLineWidth/2+3,re=((me.horizontal?me.visibleHeight:me.visibleWidth)-ge)/2;me.horizontal&&(me.left?oe=-oe:oe+=me.visibleWidth);var fe=me.horizontal?"":"scale(-1,1)"+o(90);return n(me.horizontal?oe:re,me.horizontal?re:oe)+fe}),de.transition().ease(f.ease).duration(f.duration)}},81128:function(F){"use strict";F.exports=function(C,e){for(var T=[],k=C.cd[0].trace,a=k._sankey.graph.nodes,w=0;w<a.length;w++){var b=a[w];if(!b.partOfGroup){var f=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&f.reverse(),e&&e.contains(f,!1,w,C)&&T.push({pointNumber:b.pointNumber})}}return T}},20148:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){for(var w=0;w<k.length;w++)k[w].i=w;T.mergeArray(a.text,k,"tx"),T.mergeArray(a.texttemplate,k,"txt"),T.mergeArray(a.hovertext,k,"htx"),T.mergeArray(a.customdata,k,"data"),T.mergeArray(a.textposition,k,"tp"),a.textfont&&(T.mergeArrayCastPositive(a.textfont.size,k,"ts"),T.mergeArray(a.textfont.color,k,"tc"),T.mergeArray(a.textfont.family,k,"tf"),T.mergeArray(a.textfont.weight,k,"tw"),T.mergeArray(a.textfont.style,k,"ty"),T.mergeArray(a.textfont.variant,k,"tv"),T.mergeArray(a.textfont.textcase,k,"tC"),T.mergeArray(a.textfont.lineposition,k,"tE"),T.mergeArray(a.textfont.shadow,k,"tS"));var b=a.marker;if(b){T.mergeArrayCastPositive(b.size,k,"ms"),T.mergeArrayCastPositive(b.opacity,k,"mo"),T.mergeArray(b.symbol,k,"mx"),T.mergeArray(b.angle,k,"ma"),T.mergeArray(b.standoff,k,"mf"),T.mergeArray(b.color,k,"mc");var f=b.line;b.line&&(T.mergeArray(f.color,k,"mlc"),T.mergeArrayCastPositive(f.width,k,"mlw"));var s=b.gradient;s&&s.type!=="none"&&(T.mergeArray(s.type,k,"mgt"),T.mergeArray(s.color,k,"mgc"))}}},52904:function(F,C,e){"use strict";var T=e(29736).axisHoverFormat,k=e(21776).Gw,a=e(21776).Ks,w=e(49084),b=e(25376),f=e(98192).u,s=e(98192).c,t=e(43616),i=e(88200),r=e(92880).extendFlat,n=e(98304);F.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:T("x"),yhoverformat:T("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:a({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},f,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:n(!0),fillgradient:r({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:s,marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},w("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},w("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(54460),w=e(1220),b=e(39032).BADNUM,f=e(43028),s=e(90136),t=e(20148),i=e(4500);function r(d,u,x,p,g,m,y){var v=u._length,_=d._fullLayout,h=x._id,S=p._id,A=_._firstScatter[l(u)]===u.uid,E=(c(u,_,x,p)||{}).orientation,P=u.fill;x._minDtick=0,p._minDtick=0;var I={padded:!0},D={padded:!0};y&&(I.ppad=D.ppad=y);var z=v<2||g[0]!==g[v-1]||m[0]!==m[v-1];z&&(P==="tozerox"||P==="tonextx"&&(A||E==="h"))?I.tozero=!0:(u.error_y||{}).visible||P!=="tonexty"&&P!=="tozeroy"&&(f.hasMarkers(u)||f.hasText(u))||(I.padded=!1,I.ppad=0),z&&(P==="tozeroy"||P==="tonexty"&&(A||E==="v"))?D.tozero=!0:P!=="tonextx"&&P!=="tozerox"||(D.padded=!1),h&&(u._extremes[h]=a.findExtremes(x,g,I)),S&&(u._extremes[S]=a.findExtremes(p,m,D))}function n(d,u){if(f.hasMarkers(d)){var x,p=d.marker,g=1.6*(d.marker.sizeref||1);if(x=d.marker.sizemode==="area"?function(h){return Math.max(Math.sqrt((h||0)/g),3)}:function(h){return Math.max((h||0)/g,3)},k.isArrayOrTypedArray(p.size)){var m={type:"linear"};a.setConvert(m);for(var y=m.makeCalcdata(d.marker,"size"),v=new Array(u),_=0;_<u;_++)v[_]=x(y[_]);return v}return x(p.size)}}function o(d,u){var x=l(u),p=d._firstScatter;p[x]||(p[x]=u.uid)}function l(d){var u=d.stackgroup;return d.xaxis+d.yaxis+d.type+(u?"-"+u:"")}function c(d,u,x,p){var g=d.stackgroup;if(g){var m=u._scatterStackOpts[x._id+p._id][g],y=m.orientation==="v"?p:x;return y.type==="linear"||y.type==="log"?m:void 0}}F.exports={calc:function(d,u){var x,p,g,m,y,v,_=d._fullLayout,h=u._xA=a.getFromId(d,u.xaxis||"x","x"),S=u._yA=a.getFromId(d,u.yaxis||"y","y"),A=h.makeCalcdata(u,"x"),E=S.makeCalcdata(u,"y"),P=w(u,h,"x",A),I=w(u,S,"y",E),D=P.vals,z=I.vals,V=u._length,O=new Array(V),j=u.ids,Y=c(u,_,h,S),B=!1;o(_,u);var U,q="x",te="y";Y?(k.pushUnique(Y.traceIndices,u._expandedIndex),(x=Y.orientation==="v")?(te="s",U="x"):(q="s",U="y"),y=Y.stackgaps==="interpolate"):r(d,u,h,S,D,z,n(u,V));var ee=!!u.xperiodalignment,Q=!!u.yperiodalignment;for(p=0;p<V;p++){var J=O[p]={},K=T(D[p]),X=T(z[p]);K&&X?(J[q]=D[p],J[te]=z[p],ee&&(J.orig_x=A[p],J.xEnd=P.ends[p],J.xStart=P.starts[p]),Q&&(J.orig_y=E[p],J.yEnd=I.ends[p],J.yStart=I.starts[p])):Y&&(x?K:X)?(J[U]=x?D[p]:z[p],J.gap=!0,y?(J.s=b,B=!0):J.s=0):J[q]=J[te]=b,j&&(J.id=String(j[p]))}if(t(O,u),s(d,u),i(O,u),Y){for(p=0;p<O.length;)O[p][U]===b?O.splice(p,1):p++;if(k.sort(O,function(ue,ve){return ue[U]-ve[U]||ue.i-ve.i}),B){for(p=0;p<O.length-1&&O[p].gap;)p++;for((v=O[p].s)||(v=O[p].s=0),g=0;g<p;g++)O[g].s=v;for(m=O.length-1;m>p&&O[m].gap;)m--;for(v=O[m].s,g=O.length-1;g>m;g--)O[g].s=v;for(;p<m;)if(O[++p].gap){for(g=p+1;O[g].gap;)g++;for(var ie=O[p-1][U],se=O[p-1].s,ae=(O[g].s-se)/(O[g][U]-ie);p<g;)O[p].s=se+(O[p][U]-ie)*ae,p++}}}return O},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:o,getStackOpts:c}},4500:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){T.isArrayOrTypedArray(a.selectedpoints)&&T.tagSelected(k,a)}},90136:function(F,C,e){"use strict";var T=e(94288).hasColorscale,k=e(47128),a=e(43028);F.exports=function(w,b){a.hasLines(b)&&T(b,"line")&&k(w,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(b)&&(T(b,"marker")&&k(w,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),T(b,"marker.line")&&k(w,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(F){"use strict";F.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(F,C,e){"use strict";var T=e(16356),k=e(96376).setGroupPositions;function a(w,b,f,s,t,i,r){t[s]=!0;var n={i:null,gap:!0,s:0};if(n[r]=f,w.splice(b,0,n),b&&f===w[b-1][r]){var o=w[b-1];n.s=o.s,n.i=o.i,n.gap=o.gap}else i&&(n.s=function(l,c,d,u){var x=l[c-1],p=l[c+1];return p?x?x.s+(p.s-x.s)*(d-x[u])/(p[u]-x[u]):p.s:x.s}(w,b,f,r));b||(w[0].t=w[1].t,w[0].trace=w[1].trace,delete w[1].t,delete w[1].trace)}F.exports=function(w,b){w._fullLayout.scattermode==="group"&&function(U,q){for(var te=q.xaxis,ee=q.yaxis,Q=U._fullLayout,J=U._fullData,K=U.calcdata,X=[],ie=[],se=0;se<J.length;se++){var ae=J[se];ae.visible===!0&&ae.type==="scatter"&&ae.xaxis===te._id&&ae.yaxis===ee._id&&(ae.orientation==="h"?X.push(K[se]):ae.orientation==="v"&&ie.push(K[se]))}var ue={mode:Q.scattermode,gap:Q.scattergap};k(U,te,ee,ie,ue),k(U,ee,te,X,ue)}(w,b);var f=b.xaxis,s=b.yaxis,t=f._id+s._id,i=w._fullLayout._scatterStackOpts[t];if(i){var r,n,o,l,c,d,u,x,p,g,m,y,v,_,h,S=w.calcdata;for(var A in i){var E=(g=i[A]).traceIndices;if(E.length){for(m=g.stackgaps==="interpolate",y=g.groupnorm,g.orientation==="v"?(v="x",_="y"):(v="y",_="x"),h=new Array(E.length),r=0;r<h.length;r++)h[r]=!1;d=S[E[0]];var P=new Array(d.length);for(r=0;r<d.length;r++)P[r]=d[r][v];for(r=1;r<E.length;r++){for(c=S[E[r]],n=o=0;n<c.length;n++){for(u=c[n][v];u>P[o]&&o<P.length;o++)a(c,n,P[o],r,h,m,v),n++;if(u!==P[o]){for(l=0;l<r;l++)a(S[E[l]],o,u,l,h,m,v);P.splice(o,0,u)}o++}for(;o<P.length;o++)a(c,n,P[o],r,h,m,v),n++}var I=P.length;for(n=0;n<d.length;n++){for(x=d[n][_]=d[n].s,r=1;r<E.length;r++)(c=S[E[r]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=I,x+=c[n].s,c[n][_]=x;if(y)for(p=(y==="fraction"?x:x/100)||1,r=0;r<E.length;r++){var D=S[E[r]][n];D[_]/=p,D.sNorm=D.s/p}}for(r=0;r<E.length;r++){var z=(c=S[E[r]])[0].trace,V=T.calcMarkerSize(z,z._rawLength),O=Array.isArray(V);if(V&&h[r]||O){var j=V;for(V=new Array(I),n=0;n<I;n++)V[n]=c[n].gap?0:O?j[c[n].i]:j}var Y=new Array(I),B=new Array(I);for(n=0;n<I;n++)Y[n]=c[n].x,B[n]=c[n].y;T.calcAxisExpansion(w,z,f,s,Y,B,V),c[0].t.orientation=g.orientation}}}}}},35036:function(F,C,e){"use strict";var T=e(3400),k=e(20011),a=e(52904);F.exports=function(w,b){var f,s,t;function i(c){return T.coerce(s._input,s,a,c)}if(b.scattermode==="group")for(t=0;t<w.length;t++)(s=w[t]).type==="scatter"&&(f=s._input,k(f,s,b,i));for(t=0;t<w.length;t++){var r=w[t];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var o=t-1;o>=0;o--){var l=w[o];if(l.type==="scatter"&&l.xaxis===r.xaxis&&l.yaxis===r.yaxis){l.opacity=void 0;break}}}}}},18800:function(F,C,e){"use strict";var T=e(3400),k=e(24040),a=e(52904),w=e(88200),b=e(43028),f=e(43980),s=e(31147),t=e(43912),i=e(74428),r=e(66828),n=e(11731),o=e(124),l=e(70840),c=e(3400).coercePattern;F.exports=function(d,u,x,p){function g(E,P){return T.coerce(d,u,a,E,P)}var m=f(d,u,p,g);if(m||(u.visible=!1),u.visible){s(d,u,p,g),g("xhoverformat"),g("yhoverformat"),g("zorder");var y=t(d,u,p,g);p.scattermode==="group"&&u.orientation===void 0&&g("orientation","v");var v=!y&&m<w.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",v),b.hasMarkers(u)&&i(d,u,x,p,g,{gradient:!0}),b.hasLines(u)&&(r(d,u,x,p,g,{backoff:!0}),n(d,u,g),g("connectgaps"),g("line.simplify")),b.hasText(u)&&(g("texttemplate"),o(d,u,p,g));var _=[];(b.hasMarkers(u)||b.hasText(u))&&(g("cliponaxis"),g("marker.maxdisplayed"),_.push("points")),g("fill",y?y.fillDflt:"none"),u.fill!=="none"&&(l(d,u,x,g,{moduleHasFillgradient:!0}),b.hasLines(u)||n(d,u,g),c(g,"fillpattern",u.fillcolor,!1));var h=(u.line||{}).color,S=(u.marker||{}).color;u.fill!=="tonext"&&u.fill!=="toself"||_.push("fills"),g("hoveron",_.join("+")||"points"),u.hoveron!=="fills"&&g("hovertemplate");var A=k.getComponentMethod("errorbars","supplyDefaults");A(d,u,h||S||x,{axis:"y"}),A(d,u,h||S||x,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(u,g)}}},98304:function(F){"use strict";F.exports=function(C){return{valType:"color",editType:"style",anim:!0}}},70840:function(F,C,e){"use strict";var T=e(76308),k=e(3400).isArrayOrTypedArray;F.exports=function(a,w,b,f,s){s||(s={});var t,i=!1;if(w.marker){var r=w.marker.color,n=(w.marker.line||{}).color;r&&!k(r)?i=r:n&&!k(n)&&(i=n)}if(s.moduleHasFillgradient&&f("fillgradient.type")!=="none"){f("fillgradient.start"),f("fillgradient.stop");var o=f("fillgradient.colorscale");o&&(t=function(l){for(var c=T.interpolate(l[0][1],l[1][1],.5),d=2;d<l.length;d++){var u=T.interpolate(l[d-1][1],l[d][1],.5);c=T.interpolate(c,u,l[d-1][0]/l[d][0])}return c}(o))}f("fillcolor",T.addOpacity((w.line||{}).color||i||t||b,.5))}},76688:function(F,C,e){"use strict";var T=e(54460);F.exports=function(k,a,w){var b={},f={_fullLayout:w},s=T.getFromTrace(f,a,"x"),t=T.getFromTrace(f,a,"y"),i=k.orig_x;i===void 0&&(i=k.x);var r=k.orig_y;return r===void 0&&(r=k.y),b.xLabel=T.tickText(s,s.c2l(i),!0).text,b.yLabel=T.tickText(t,t.c2l(r),!0).text,b}},44928:function(F,C,e){"use strict";var T=e(76308),k=e(43028);F.exports=function(a,w){var b,f;if(a.mode==="lines")return(b=a.line.color)&&T.opacity(b)?b:a.fillcolor;if(a.mode==="none")return a.fill?a.fillcolor:"";var s=w.mcc||(a.marker||{}).color,t=w.mlcc||((a.marker||{}).line||{}).color;return(f=s&&T.opacity(s)?s:t&&T.opacity(t)&&(w.mlw||((a.marker||{}).line||{}).width)?t:"")?T.opacity(f)<.3?T.addOpacity(f,.3):f:(b=(a.line||{}).color)&&T.opacity(b)&&k.hasLines(a)&&a.line.width?b:a.fillcolor}},20011:function(F,C,e){"use strict";var T=e(71888).getAxisGroup;F.exports=function(k,a,w,b){var f=a.orientation,s=a[{v:"x",h:"y"}[f]+"axis"],t=T(w,s)+f,i=w._alignmentOpts||{},r=b("alignmentgroup"),n=i[t];n||(n=i[t]={});var o=n[r];o?o.traces.push(a):o=n[r]={traces:[a],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var l=b("offsetgroup"),c=o.offsetGroups,d=c[l];l&&(d||(d=c[l]={offsetIndex:Object.keys(c).length}),a._offsetIndex=d.offsetIndex)}},98723:function(F,C,e){"use strict";var T=e(3400),k=e(93024),a=e(24040),w=e(44928),b=e(76308),f=T.fillText;F.exports=function(s,t,i,r){var n=s.cd,o=n[0].trace,l=s.xa,c=s.ya,d=l.c2p(t),u=c.c2p(i),x=[d,u],p=o.hoveron||"",g=o.mode.indexOf("markers")!==-1?3:.5,m=!!o.xperiodalignment,y=!!o.yperiodalignment;if(p.indexOf("points")!==-1){var v=function(Y){var B=Math.max(g,Y.mrc||0),U=l.c2p(Y.x)-d,q=c.c2p(Y.y)-u;return Math.max(Math.sqrt(U*U+q*q)-B,1-g/B)},_=k.getDistanceFunction(r,function(Y){if(m){var B=l.c2p(Y.xStart),U=l.c2p(Y.xEnd);return d>=Math.min(B,U)&&d<=Math.max(B,U)?0:1/0}var q=Math.max(3,Y.mrc||0),te=1-1/q,ee=Math.abs(l.c2p(Y.x)-d);return ee<q?te*ee/q:ee-q+te},function(Y){if(y){var B=c.c2p(Y.yStart),U=c.c2p(Y.yEnd);return u>=Math.min(B,U)&&u<=Math.max(B,U)?0:1/0}var q=Math.max(3,Y.mrc||0),te=1-1/q,ee=Math.abs(c.c2p(Y.y)-u);return ee<q?te*ee/q:ee-q+te},v);if(k.getClosest(n,_,s),s.index!==!1){var h=n[s.index],S=l.c2p(h.x,!0),A=c.c2p(h.y,!0),E=h.mrc||1;s.index=h.i;var P=n[0].t.orientation,I=P&&(h.sNorm||h.s),D=P==="h"?I:h.orig_x!==void 0?h.orig_x:h.x,z=P==="v"?I:h.orig_y!==void 0?h.orig_y:h.y;return T.extendFlat(s,{color:w(o,h),x0:S-E,x1:S+E,xLabelVal:D,y0:A-E,y1:A+E,yLabelVal:z,spikeDistance:v(h),hovertemplate:o.hovertemplate}),f(h,o,s),a.getComponentMethod("errorbars","hoverInfo")(h,o,s),[s]}}function V(Y){if(!Y)return!1;var B=Y.node();try{var U=new DOMPoint(x[0],x[1]);return B.isPointInFill(U)}catch{var q=B.ownerSVGElement.createSVGPoint();return q.x=x[0],q.y=x[1],B.isPointInFill(q)}}if(p.indexOf("fills")!==-1&&o._fillElement&&V(o._fillElement)&&!V(o._fillExclusionElement)){var O=function(Y){var B,U,q,te,ee,Q,J,K,X,ie=[],se=1/0,ae=-1/0,ue=1/0,ve=-1/0;for(B=0;B<Y.length;B++){var ye=Y[B];ye.contains(x)&&(ie.push(ye),ue=Math.min(ue,ye.ymin),ve=Math.max(ve,ye.ymax))}if(ie.length===0)return null;for(U=((ue=Math.max(ue,0))+(ve=Math.min(ve,c._length)))/2,B=0;B<ie.length;B++)for(te=ie[B].pts,q=1;q<te.length;q++)(K=te[q-1][1])>U!=(X=te[q][1])>=U&&(Q=te[q-1][0],J=te[q][0],X-K&&(ee=Q+(J-Q)*(U-K)/(X-K),se=Math.min(se,ee),ae=Math.max(ae,ee)));return{x0:se=Math.max(se,0),x1:ae=Math.min(ae,l._length),y0:U,y1:U}}(o._polygons);O===null&&(O={x0:x[0],x1:x[0],y0:x[1],y1:x[1]});var j=b.defaultLine;return b.opacity(o.fillcolor)?j=o.fillcolor:b.opacity((o.line||{}).color)&&(j=o.line.color),T.extendFlat(s,{distance:s.maxHoverDistance,x0:O.x0,x1:O.x1,y0:O.y0,y1:O.y1,color:j,hovertemplate:!1}),delete s.index,o.text&&!T.isArrayOrTypedArray(o.text)?s.text=String(o.text):s.text=o.name,[s]}}},65875:function(F,C,e){"use strict";var T=e(43028);F.exports={hasLines:T.hasLines,hasMarkers:T.hasMarkers,hasText:T.hasText,isBubble:T.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(F){"use strict";F.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(F,C,e){"use strict";var T=e(3400),k=e(55308);F.exports=function(a,w){var b,f=w.barmode==="group";w.scattermode==="group"&&(b=f?w.bargap:.2,T.coerce(a,w,k,"scattergap",b))}},66828:function(F,C,e){"use strict";var T=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,a=e(27260);F.exports=function(w,b,f,s,t,i){i||(i={});var r=(w.marker||{}).color;r&&r._inputArray&&(r=r._inputArray),t("line.color",f),k(w,"line")?a(w,b,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!T(r)&&r||f),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(F,C,e){"use strict";var T=e(43616),k=e(39032),a=k.BADNUM,w=k.LOG_CLIP,b=w+.5,f=w-.5,s=e(3400),t=s.segmentsIntersect,i=s.constrain,r=e(88200);F.exports=function(n,o){var l,c,d,u,x,p,g,m,y,v,_,h,S,A,E,P,I,D,z=o.trace||{},V=o.xaxis,O=o.yaxis,j=V.type==="log",Y=O.type==="log",B=V._length,U=O._length,q=o.backoff,te=z.marker,ee=o.connectGaps,Q=o.baseTolerance,J=o.shape,K=J==="linear",X=z.fill&&z.fill!=="none",ie=[],se=r.minTolerance,ae=n.length,ue=new Array(ae),ve=0;function ye(Ct){var Ge=n[Ct];if(!Ge)return!1;var Xe=o.linearized?V.l2p(Ge.x):V.c2p(Ge.x),Ne=o.linearized?O.l2p(Ge.y):O.c2p(Ge.y);if(Xe===a){if(j&&(Xe=V.c2p(Ge.x,!0)),Xe===a)return!1;Y&&Ne===a&&(Xe*=Math.abs(V._m*U*(V._m>0?b:f)/(O._m*B*(O._m>0?b:f)))),Xe*=1e3}if(Ne===a){if(Y&&(Ne=O.c2p(Ge.y,!0)),Ne===a)return!1;Ne*=1e3}return[Xe,Ne]}function pe(Ct,Ge,Xe,Ne){var Ye=Xe-Ct,ot=Ne-Ge,nt=.5-Ct,ze=.5-Ge,Fe=Ye*Ye+ot*ot,rt=Ye*nt+ot*ze;if(rt>0&&rt<Fe){var We=nt*ot-ze*Ye;if(We*We<Fe)return!0}}function de(Ct,Ge){var Xe=Ct[0]/B,Ne=Ct[1]/U,Ye=Math.max(0,-Xe,Xe-1,-Ne,Ne-1);return Ye&&I!==void 0&&pe(Xe,Ne,I,D)&&(Ye=0),Ye&&Ge&&pe(Xe,Ne,Ge[0]/B,Ge[1]/U)&&(Ye=0),(1+r.toleranceGrowth*Ye)*Q}function me(Ct,Ge){var Xe=Ct[0]-Ge[0],Ne=Ct[1]-Ge[1];return Math.sqrt(Xe*Xe+Ne*Ne)}var ke,Ce,ge,oe,re,fe,Se,be=r.maxScreensAway,we=-B*be,Me=B*(1+be),Pe=-U*be,De=U*(1+be),he=[[we,Pe,Me,Pe],[Me,Pe,Me,De],[Me,De,we,De],[we,De,we,Pe]];function _e(Ct){if(Ct[0]<we||Ct[0]>Me||Ct[1]<Pe||Ct[1]>De)return[i(Ct[0],we,Me),i(Ct[1],Pe,De)]}function Ae(Ct,Ge){return Ct[0]===Ge[0]&&(Ct[0]===we||Ct[0]===Me)||Ct[1]===Ge[1]&&(Ct[1]===Pe||Ct[1]===De)||void 0}function Oe(Ct,Ge,Xe){return function(Ne,Ye){var ot=_e(Ne),nt=_e(Ye),ze=[];if(ot&&nt&&Ae(ot,nt))return ze;ot&&ze.push(ot),nt&&ze.push(nt);var Fe=2*s.constrain((Ne[Ct]+Ye[Ct])/2,Ge,Xe)-((ot||Ne)[Ct]+(nt||Ye)[Ct]);return Fe&&((ot&&nt?Fe>0==ot[Ct]>nt[Ct]?ot:nt:ot||nt)[Ct]+=Fe),ze}}function Ee(Ct){var Ge=Ct[0],Xe=Ct[1],Ne=Ge===ue[ve-1][0],Ye=Xe===ue[ve-1][1];if(!Ne||!Ye)if(ve>1){var ot=Ge===ue[ve-2][0],nt=Xe===ue[ve-2][1];Ne&&(Ge===we||Ge===Me)&&ot?nt?ve--:ue[ve-1]=Ct:Ye&&(Xe===Pe||Xe===De)&&nt?ot?ve--:ue[ve-1]=Ct:ue[ve++]=Ct}else ue[ve++]=Ct}function Be(Ct){ue[ve-1][0]!==Ct[0]&&ue[ve-1][1]!==Ct[1]&&Ee([ge,oe]),Ee(Ct),re=null,ge=oe=0}J==="linear"||J==="spline"?Se=function(Ct,Ge){for(var Xe=[],Ne=0,Ye=0;Ye<4;Ye++){var ot=he[Ye],nt=t(Ct[0],Ct[1],Ge[0],Ge[1],ot[0],ot[1],ot[2],ot[3]);nt&&(!Ne||Math.abs(nt.x-Xe[0][0])>1||Math.abs(nt.y-Xe[0][1])>1)&&(nt=[nt.x,nt.y],Ne&&me(nt,Ct)<me(Xe[0],Ct)?Xe.unshift(nt):Xe.push(nt),Ne++)}return Xe}:J==="hv"||J==="vh"?Se=function(Ct,Ge){var Xe=[],Ne=_e(Ct),Ye=_e(Ge);return Ne&&Ye&&Ae(Ne,Ye)||(Ne&&Xe.push(Ne),Ye&&Xe.push(Ye)),Xe}:J==="hvh"?Se=Oe(0,we,Me):J==="vhv"&&(Se=Oe(1,Pe,De));var Ve=s.isArrayOrTypedArray(te);function Ze(Ct){if(Ct&&q&&(Ct.i=l,Ct.d=n,Ct.trace=z,Ct.marker=Ve?te[Ct.i]:te,Ct.backoff=q),I=Ct[0]/B,D=Ct[1]/U,ke=Ct[0]<we?we:Ct[0]>Me?Me:0,Ce=Ct[1]<Pe?Pe:Ct[1]>De?De:0,ke||Ce){if(ve)if(re){var Ge=Se(re,Ct);Ge.length>1&&(Be(Ge[0]),ue[ve++]=Ge[1])}else fe=Se(ue[ve-1],Ct)[0],ue[ve++]=fe;else ue[ve++]=[ke||Ct[0],Ce||Ct[1]];var Xe=ue[ve-1];ke&&Ce&&(Xe[0]!==ke||Xe[1]!==Ce)?(re&&(ge!==ke&&oe!==Ce?Ee(ge&&oe?(Ne=re,ot=(Ye=Ct)[0]-Ne[0],nt=(Ye[1]-Ne[1])/ot,(Ne[1]*Ye[0]-Ye[1]*Ne[0])/ot>0?[nt>0?we:Me,De]:[nt>0?Me:we,Pe]):[ge||ke,oe||Ce]):ge&&oe&&Ee([ge,oe])),Ee([ke,Ce])):ge-ke&&oe-Ce&&Ee([ke||ge,Ce||oe]),re=Ct,ge=ke,oe=Ce}else re&&Be(Se(re,Ct)[0]),ue[ve++]=Ct;var Ne,Ye,ot,nt}for(l=0;l<ae;l++)if(c=ye(l)){for(ve=0,re=null,Ze(c),l++;l<ae;l++){if(!(u=ye(l))){if(ee)continue;break}if(K&&o.simplify){var it=ye(l+1);if(v=me(u,c),X&&(ve===0||ve===ae-1)||!(v<de(u,it)*se)){for(m=[(u[0]-c[0])/v,(u[1]-c[1])/v],x=c,_=v,h=A=E=0,g=!1,d=u,l++;l<n.length;l++){if(p=it,it=ye(l+1),!p){if(ee)continue;break}if(P=(y=[p[0]-c[0],p[1]-c[1]])[0]*m[1]-y[1]*m[0],A=Math.min(A,P),(E=Math.max(E,P))-A>de(p,it))break;d=p,(S=y[0]*m[0]+y[1]*m[1])>_?(_=S,u=p,g=!1):S<h&&(h=S,x=p,g=!0)}if(g?(Ze(u),d!==x&&Ze(x)):(x!==c&&Ze(x),d!==u&&Ze(u)),Ze(d),l>=n.length||!p)break;Ze(p),c=p}}else Ze(u)}re&&Ee([ge||re[0],oe||re[1]]),ie.push(ue.slice(0,ve))}var at=J.slice(J.length-1);if(q&&at!=="h"&&at!=="v"){for(var gt=!1,yt=-1,pt=[],et=0;et<ie.length;et++)for(var $e=0;$e<ie[et].length-1;$e++){var At=ie[et][$e],Ot=ie[et][$e+1],Rt=T.applyBackoff(Ot,At);Rt[0]===Ot[0]&&Rt[1]===Ot[1]||(gt=!0),pt[yt+1]||(pt[++yt]=[At,[Rt[0],Rt[1]]])}return gt?pt:ie}return ie}},11731:function(F){"use strict";F.exports=function(C,e,T){T("line.shape")==="spline"&&T("line.smoothing")}},14328:function(F){"use strict";var C={tonextx:1,tonexty:1,tonext:1};F.exports=function(e,T,k){var a,w,b,f,s,t={},i=!1,r=-1,n=0,o=-1;for(w=0;w<k.length;w++)(b=(a=k[w][0].trace).stackgroup||"")?b in t?s=t[b]:(s=t[b]=n,n++):a.fill in C&&o>=0?s=o:(s=o=n,n++),s<r&&(i=!0),a._groupIndex=r=s;var l=k.slice();i&&l.sort(function(d,u){var x=d[0].trace,p=u[0].trace;return x._groupIndex-p._groupIndex||x.index-p.index});var c={};for(w=0;w<l.length;w++)b=(a=l[w][0].trace).stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in C&&(f=c[b],a._prevtrace=f||null,f&&(f._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),c[b]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return l}},7152:function(F,C,e){"use strict";var T=e(38248);F.exports=function(k,a){a||(a=2);var w=k.marker,b=w.sizeref||1,f=w.sizemin||0,s=w.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var i=s(t/a);return T(i)&&i>0?Math.max(i,f):0}}},5528:function(F){"use strict";F.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(F,C,e){"use strict";var T=e(76308),k=e(94288).hasColorscale,a=e(27260),w=e(43028);F.exports=function(b,f,s,t,i,r){var n=w.isBubble(b),o=(b.line||{}).color;r=r||{},o&&(s=o),i("marker.symbol"),i("marker.opacity",n?.7:1),i("marker.size"),r.noAngle||(i("marker.angle"),r.noAngleRef||i("marker.angleref"),r.noStandOff||i("marker.standoff")),i("marker.color",s),k(b,"marker")&&a(b,f,t,i,{prefix:"marker.",cLetter:"c"}),r.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),r.noLine||(i("marker.line.color",o&&!Array.isArray(o)&&f.marker.color!==o?o:n?T.background:T.defaultLine),k(b,"marker.line")&&a(b,f,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",n?1:0)),n&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),r.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},31147:function(F,C,e){"use strict";var T=e(3400).dateTick0,k=e(39032).ONEWEEK;function a(w,b){return T(b,w%k==0?1:0)}F.exports=function(w,b,f,s,t){if(t||(t={x:!0,y:!0}),t.x){var i=s("xperiod");i&&(s("xperiod0",a(i,b.xcalendar)),s("xperiodalignment"))}if(t.y){var r=s("yperiod");r&&(s("yperiod0",a(r,b.ycalendar)),s("yperiodalignment"))}}},96504:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(3400),w=a.ensureSingle,b=a.identity,f=e(43616),s=e(43028),t=e(52340),i=e(14328),r=e(92065).tester;function n(o,l,c,d,u,x,p){var g,m=o._context.staticPlot;(function(Ee,Be,Ve,Ze,it){var at=Ve.xaxis,gt=Ve.yaxis,yt=T.extent(a.simpleMap(at.range,at.r2c)),pt=T.extent(a.simpleMap(gt.range,gt.r2c)),et=Ze[0].trace;if(s.hasMarkers(et)){var $e=et.marker.maxdisplayed;if($e!==0){var At=Ze.filter(function(Ge){return Ge.x>=yt[0]&&Ge.x<=yt[1]&&Ge.y>=pt[0]&&Ge.y<=pt[1]}),Ot=Math.ceil(At.length/$e),Rt=0;it.forEach(function(Ge,Xe){var Ne=Ge[0].trace;s.hasMarkers(Ne)&&Ne.marker.maxdisplayed>0&&Xe<Be&&Rt++});var Ct=Math.round(Rt*Ot/3+Math.floor(Rt/3)*Ot/7.1);Ze.forEach(function(Ge){delete Ge.vis}),At.forEach(function(Ge,Xe){Math.round((Xe+Ct)%Ot)===0&&(Ge.vis=!0)})}}})(0,l,c,d,u);var y=!!p&&p.duration>0;function v(Ee){return y?Ee.transition():Ee}var _=c.xaxis,h=c.yaxis,S=d[0].trace,A=S.line,E=T.select(x),P=w(E,"g","errorbars"),I=w(E,"g","lines"),D=w(E,"g","points"),z=w(E,"g","text");if(k.getComponentMethod("errorbars","plot")(o,P,c,p),S.visible===!0){var V,O;v(E).style("opacity",S.opacity);var j,Y,B=S.fill.charAt(S.fill.length-1);B!=="x"&&B!=="y"&&(B=""),B==="y"?(j=1,Y=h.c2p(0,!0)):B==="x"&&(j=0,Y=_.c2p(0,!0)),d[0][c.isRangePlot?"nodeRangePlot3":"node3"]=E;var U,q,te="",ee=[],Q=S._prevtrace,J=null,K=null;Q&&(te=Q._prevRevpath||"",O=Q._nextFill,ee=Q._ownPolygons,J=Q._fillsegments,K=Q._fillElement);var X,ie,se,ae,ue,ve,ye="",pe="",de=[];S._polygons=[];var me=[],ke=[],Ce=a.noop;if(V=S._ownFill,s.hasLines(S)||S.fill!=="none"){O&&O.datum(d),["hv","vh","hvh","vhv"].indexOf(A.shape)!==-1?(X=f.steps(A.shape),ie=f.steps(A.shape.split("").reverse().join(""))):X=ie=A.shape==="spline"?function(Ee){var Be=Ee[Ee.length-1];return Ee.length>1&&Ee[0][0]===Be[0]&&Ee[0][1]===Be[1]?f.smoothclosed(Ee.slice(1),A.smoothing):f.smoothopen(Ee,A.smoothing)}:function(Ee){return"M"+Ee.join("L")},se=function(Ee){return ie(Ee.reverse())},ke=t(d,{xaxis:_,yaxis:h,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(A.width||1,3)/4,shape:A.shape,backoff:A.backoff,simplify:A.simplify,fill:S.fill}),me=new Array(ke.length);var ge=0;for(g=0;g<ke.length;g++){var oe,re=ke[g];oe&&B?oe.push.apply(oe,re):(oe=re.slice(),me[ge]=oe,ge++)}S._fillElement=null,S._fillExclusionElement=K,S._fillsegments=me.slice(0,ge),me=S._fillsegments,ke.length&&(ae=ke[0][0].slice(),ve=(ue=ke[ke.length-1])[ue.length-1].slice()),Ce=function(Ee){return function(Be){if(U=X(Be),q=se(Be),ye?B?(ye+="L"+U.substr(1),pe=q+"L"+pe.substr(1)):(ye+="Z"+U,pe=q+"Z"+pe):(ye=U,pe=q),s.hasLines(S)){var Ve=T.select(this);if(Ve.datum(d),Ee)v(Ve.style("opacity",0).attr("d",U).call(f.lineGroupStyle)).style("opacity",1);else{var Ze=v(Ve);Ze.attr("d",U),f.singleLineStyle(d,Ze)}}}}}var fe=I.selectAll(".js-line").data(ke);v(fe.exit()).style("opacity",0).remove(),fe.each(Ce(!1)),fe.enter().append("path").classed("js-line",!0).style("vector-effect",m?"none":"non-scaling-stroke").call(f.lineGroupStyle).each(Ce(!0)),f.setClipUrl(fe,c.layerClipId,o);var Se=function(){var Ee=new Array(me.length);for(g=0;g<me.length;g++)Ee[g]=r(me[g]);return Ee},be=function(Ee){var Be,Ve;if(Ee&&Ee.length!==0){for(Be=new Array(Ee.length-1+me.length),Ve=0;Ve<Ee.length-1;Ve++)Be[Ve]=r(Ee[Ve]);var Ze=Ee[Ee.length-1].slice();for(Ze.reverse(),Ve=0;Ve<me.length;Ve++)Be[Ee.length-1+Ve]=r(me[Ve].concat(Ze))}else for(Be=new Array(me.length),Ve=0;Ve<me.length;Ve++){var it=me[Ve][0].slice(),at=me[Ve][me[Ve].length-1].slice();it[j]=at[j]=Y;var gt=[at,it].concat(me[Ve]);Be[Ve]=r(gt)}return Be};ke.length?(V?(V.datum(d),ae&&ve&&(B?(ae[j]=ve[j]=Y,v(V).attr("d","M"+ve+"L"+ae+"L"+ye.substr(1)).call(f.singleFillStyle,o),de=be(null)):(v(V).attr("d",ye+"Z").call(f.singleFillStyle,o),de=Se())),S._polygons=de,S._fillElement=V):O&&(S.fill.substr(0,6)==="tonext"&&ye&&te?(S.fill==="tonext"?(v(O).attr("d",ye+"Z"+te+"Z").call(f.singleFillStyle,o),de=Se(),S._polygons=de.concat(ee)):(v(O).attr("d",ye+"L"+te.substr(1)+"Z").call(f.singleFillStyle,o),de=be(J),S._polygons=de),S._fillElement=O):Me(O)),S._prevRevpath=pe):(V?Me(V):O&&Me(O),S._prevRevpath=null),S._ownPolygons=de,D.datum(d),z.datum(d),function(Ee,Be,Ve){var Ze,it=Ve[0].trace,at=s.hasMarkers(it),gt=s.hasText(it),yt=Ae(it),pt=Oe,et=Oe;if(at||gt){var $e=b,At=it.stackgroup,Ot=At&&o._fullLayout._scatterStackOpts[_._id+h._id][At].stackgaps==="infer zero";it.marker.maxdisplayed||it._needsCull?$e=Ot?De:Pe:At&&!Ot&&($e=he),at&&(pt=$e),gt&&(et=$e)}var Rt,Ct=(Ze=Ee.selectAll("path.point").data(pt,yt)).enter().append("path").classed("point",!0);y&&Ct.call(f.pointStyle,it,o).call(f.translatePoints,_,h).style("opacity",0).transition().style("opacity",1),Ze.order(),at&&(Rt=f.makePointStyleFns(it)),Ze.each(function(Ge){var Xe=T.select(this),Ne=v(Xe);f.translatePoint(Ge,Ne,_,h)?(f.singlePointStyle(Ge,Ne,it,Rt,o),c.layerClipId&&f.hideOutsideRangePoint(Ge,Ne,_,h,it.xcalendar,it.ycalendar),it.customdata&&Xe.classed("plotly-customdata",Ge.data!==null&&Ge.data!==void 0)):Ne.remove()}),y?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),(Ze=Be.selectAll("g").data(et,yt)).enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(Ge){var Xe=T.select(this),Ne=v(Xe.select("text"));f.translatePoint(Ge,Ne,_,h)?c.layerClipId&&f.hideOutsideRangePoint(Ge,Xe,_,h,it.xcalendar,it.ycalendar):Xe.remove()}),Ze.selectAll("text").call(f.textPointStyle,it,o).each(function(Ge){var Xe=_.c2p(Ge.x),Ne=h.c2p(Ge.y);T.select(this).selectAll("tspan.line").each(function(){v(T.select(this)).attr({x:Xe,y:Ne})})}),Ze.exit().remove()}(D,z,d);var we=S.cliponaxis===!1?null:c.layerClipId;f.setClipUrl(D,we,o),f.setClipUrl(z,we,o)}function Me(Ee){v(Ee).attr("d","M0,0Z")}function Pe(Ee){return Ee.filter(function(Be){return!Be.gap&&Be.vis})}function De(Ee){return Ee.filter(function(Be){return Be.vis})}function he(Ee){return Ee.filter(function(Be){return!Be.gap})}function _e(Ee){return Ee.id}function Ae(Ee){if(Ee.ids)return _e}function Oe(){return!1}}F.exports=function(o,l,c,d,u,x){var p,g,m=!u,y=!!u&&u.duration>0,v=i(o,l,c);(p=d.selectAll("g.trace").data(v,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),p.order(),function(_,h,S){h.each(function(A){var E=w(T.select(this),"g","fills");f.setClipUrl(E,S.layerClipId,_);var P=A[0].trace,I=[];P._ownfill&&I.push("_ownFill"),P._nexttrace&&I.push("_nextFill");var D=E.selectAll("g").data(I,b);D.enter().append("g"),D.exit().each(function(z){P[z]=null}).remove(),D.order().each(function(z){P[z]=w(T.select(this),"path","js-fill")})})}(o,p,l),y?(x&&(g=x()),T.transition().duration(u.duration).ease(u.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){d.selectAll("g.trace").each(function(_,h){n(o,h,l,_,v,this,u)})})):p.each(function(_,h){n(o,h,l,_,v,this,u)}),m&&p.exit().remove(),d.selectAll("path:not([d])").remove()}},91560:function(F,C,e){"use strict";var T=e(43028);F.exports=function(k,a){var w,b,f,s,t=k.cd,i=k.xaxis,r=k.yaxis,n=[],o=t[0].trace;if(!T.hasMarkers(o)&&!T.hasText(o))return[];if(a===!1)for(w=0;w<t.length;w++)t[w].selected=0;else for(w=0;w<t.length;w++)b=t[w],f=i.c2p(b.x),s=r.c2p(b.y),b.i!==null&&a.contains([f,s],!1,w,k)?(n.push({pointNumber:b.i,x:i.c2d(b.x),y:r.c2d(b.y)}),b.selected=1):b.selected=0;return n}},43912:function(F){"use strict";var C=["orientation","groupnorm","stackgaps"];F.exports=function(e,T,k,a){var w=k._scatterStackOpts,b=a("stackgroup");if(b){var f=T.xaxis+T.yaxis,s=w[f];s||(s=w[f]={});var t=s[b],i=!1;t?t.traces.push(T):(t=s[b]={traceIndices:[],traces:[T]},i=!0);for(var r={orientation:T.x&&!T.y?"h":"v"},n=0;n<C.length;n++){var o=C[n],l=o+"Found";if(!t[l]){var c=e[o]!==void 0,d=o==="orientation";if((c||i)&&(t[o]=a(o,r[o]),d&&(t.fillDflt=t[o]==="h"?"tonextx":"tonexty"),c&&(t[l]=!0,!i&&(delete t.traces[0][o],d))))for(var u=0;u<t.traces.length-1;u++){var x=t.traces[u];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},49224:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(24040);function w(f,s,t){k.pointStyle(f.selectAll("path.point"),s,t)}function b(f,s,t){k.textPointStyle(f.selectAll("text"),s,t)}F.exports={style:function(f){var s=T.select(f).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){w(T.select(this),t.trace||t[0].trace,f)}),s.selectAll("g.text").each(function(t){b(T.select(this),t.trace||t[0].trace,f)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,f,!1),a.getComponentMethod("errorbars","style")(s)},stylePoints:w,styleText:b,styleOnSelect:function(f,s,t){var i=s[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(w(t,i,f),b(t,i,f))}}},43028:function(F,C,e){"use strict";var T=e(3400),k=e(38116).isTypedArraySpec;F.exports={hasLines:function(a){return a.visible&&a.mode&&a.mode.indexOf("lines")!==-1},hasMarkers:function(a){return a.visible&&(a.mode&&a.mode.indexOf("markers")!==-1||a.type==="splom")},hasText:function(a){return a.visible&&a.mode&&a.mode.indexOf("text")!==-1},isBubble:function(a){var w=a.marker;return T.isPlainObject(w)&&(T.isArrayOrTypedArray(w.size)||k(w.size))}}},124:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a,w,b,f){f=f||{},b("textposition"),T.coerceFont(b,"textfont",f.font||w.font,f),f.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},43980:function(F,C,e){"use strict";var T=e(3400),k=e(24040);F.exports=function(a,w,b,f){var s,t=f("x"),i=f("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(a,w,["x","y"],b),t){var r=T.minRowLength(t);i?s=Math.min(r,T.minRowLength(i)):(s=r,f("y0"),f("dy"))}else{if(!i)return 0;s=T.minRowLength(i),f("x0"),f("dx")}return w._length=s,s}},91592:function(F,C,e){"use strict";var T=e(52904),k=e(25376),a=e(49084),w=e(29736).axisHoverFormat,b=e(21776).Ks,f=e(21776).Gw,s=e(45464),t=e(99168),i=e(87792),r=e(92880).extendFlat,n=e(67824).overrideAll,o=e(95376),l=T.line,c=T.marker,d=c.line,u=r({width:l.width,dash:{valType:"enumerated",values:o(t),dflt:"solid"}},a("line")),x=F.exports=n({x:T.x,y:T.y,z:{valType:"data_array"},text:r({},T.text,{}),texttemplate:f({},{}),hovertext:r({},T.hovertext,{}),hovertemplate:b(),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),mode:r({},T.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:T.connectgaps,line:u,marker:r({symbol:{valType:"enumerated",values:o(i),dflt:"circle",arrayOk:!0},size:r({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:r({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:r({width:r({},d.width,{arrayOk:!1})},a("marker.line"))},a("marker")),textposition:r({},T.textposition,{dflt:"top center"}),textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:s.opacity,hoverinfo:r({},s.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},41484:function(F,C,e){"use strict";var T=e(20148),k=e(90136);F.exports=function(a,w){var b=[{x:!1,y:!1,trace:w,t:{}}];return T(b,w),k(a,w),b}},45156:function(F,C,e){"use strict";var T=e(24040);function k(a,w,b,f){if(!w||!w.visible)return null;for(var s=T.getComponentMethod("errorbars","makeComputeError")(w),t=new Array(a.length),i=0;i<a.length;i++){var r=s(+a[i],i);if(f.type==="log"){var n=f.c2l(a[i]),o=a[i]-r[0],l=a[i]+r[1];if(t[i]=[(f.c2l(o,!0)-n)*b,(f.c2l(l,!0)-n)*b],o>0){var c=f.c2l(o);f._lowerLogErrorBound||(f._lowerLogErrorBound=c),f._lowerErrorBound=Math.min(f._lowerLogErrorBound,c)}}else t[i]=[-r[0]*b,r[1]*b]}return t}F.exports=function(a,w,b){var f=[k(a.x,a.error_x,w[0],b.xaxis),k(a.y,a.error_y,w[1],b.yaxis),k(a.z,a.error_z,w[2],b.zaxis)],s=function(l){for(var c=0;c<l.length;c++)if(l[c])return l[c].length;return 0}(f);if(s===0)return null;for(var t=new Array(s),i=0;i<s;i++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(f[n])for(var o=0;o<2;o++)r[o][n]=f[n][i][o];t[i]=r}return t}},41064:function(F,C,e){"use strict";var T=e(67792).gl_line3d,k=e(67792).gl_scatter3d,a=e(67792).gl_error3d,w=e(67792).gl_mesh3d,b=e(67792).delaunay_triangulate,f=e(3400),s=e(43080),t=e(33040).formatColor,i=e(7152),r=e(99168),n=e(87792),o=e(54460),l=e(10624).appendArrayPointValue,c=e(45156);function d(h,S){this.scene=h,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var u=d.prototype;function x(h){return h==null?0:h.indexOf("left")>-1?-1:h.indexOf("right")>-1?1:0}function p(h){return h==null?0:h.indexOf("top")>-1?-1:h.indexOf("bottom")>-1?1:0}function g(h,S){return S(4*h)}function m(h){return n[h]}function y(h,S,A,E,P){var I=null;if(f.isArrayOrTypedArray(h)){I=[];for(var D=0;D<S;D++)h[D]===void 0?I[D]=E:I[D]=A(h[D],P)}else I=A(h,f.identity);return I}function v(h){if(f.isArrayOrTypedArray(h)){var S=h[0];return f.isArrayOrTypedArray(S)&&(h=S),"rgb("+h.slice(0,3).map(function(A){return Math.round(255*A)})+")"}return null}function _(h){return f.isArrayOrTypedArray(h)?h.length===4&&typeof h[0]=="number"?v(h):h.map(v):null}u.handlePick=function(h){if(h.object&&(h.object===this.linePlot||h.object===this.delaunayMesh||h.object===this.textMarkers||h.object===this.scatterPlot)){var S=h.index=h.data.index;return h.object.highlight&&h.object.highlight(null),this.scatterPlot&&(h.object=this.scatterPlot,this.scatterPlot.highlight(h.data)),h.textLabel="",this.textLabels&&(f.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(h.textLabel=this.textLabels[S]):h.textLabel=this.textLabels),h.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},u.update=function(h){var S,A,E,P,I=this.scene.glplot.gl,D=r.solid;this.data=h;var z=function(j,Y){var B,U,q,te,ee,Q,J=[],K=j.fullSceneLayout,X=j.dataScale,ie=K.xaxis,se=K.yaxis,ae=K.zaxis,ue=Y.marker,ve=Y.line,ye=Y.x||[],pe=Y.y||[],de=Y.z||[],me=ye.length,ke=Y.xcalendar,Ce=Y.ycalendar,ge=Y.zcalendar;for(ee=0;ee<me;ee++)B=ie.d2l(ye[ee],0,ke)*X[0],U=se.d2l(pe[ee],0,Ce)*X[1],q=ae.d2l(de[ee],0,ge)*X[2],J[ee]=[B,U,q];if(Array.isArray(Y.text))Q=Y.text;else if(f.isTypedArray(Y.text))Q=Array.from(Y.text);else if(Y.text!==void 0)for(Q=new Array(me),ee=0;ee<me;ee++)Q[ee]=Y.text;function oe(Be,Ve){var Ze=K[Be];return o.tickText(Ze,Ze.d2l(Ve),!0).text}var re=Y.texttemplate;if(re){var fe=j.fullLayout._d3locale,Se=Array.isArray(re),be=Se?Math.min(re.length,me):me,we=Se?function(Be){return re[Be]}:function(){return re};for(Q=new Array(be),ee=0;ee<be;ee++){var Me={x:ye[ee],y:pe[ee],z:de[ee]},Pe={xLabel:oe("xaxis",ye[ee]),yLabel:oe("yaxis",pe[ee]),zLabel:oe("zaxis",de[ee])},De={};l(De,Y,ee);var he=Y._meta||{};Q[ee]=f.texttemplateString(we(ee),Pe,fe,De,Me,he)}}if(te={position:J,mode:Y.mode,text:Q},"line"in Y&&(te.lineColor=t(ve,1,me),te.lineWidth=ve.width,te.lineDashes=ve.dash),"marker"in Y){var _e=i(Y);te.scatterColor=t(ue,1,me),te.scatterSize=y(ue.size,me,g,20,_e),te.scatterMarker=y(ue.symbol,me,m,"\u25CF"),te.scatterLineWidth=ue.line.width,te.scatterLineColor=t(ue.line,1,me),te.scatterAngle=0}"textposition"in Y&&(te.textOffset=function(Be){var Ve=[0,0];if(Array.isArray(Be))for(var Ze=0;Ze<Be.length;Ze++)Ve[Ze]=[0,0],Be[Ze]&&(Ve[Ze][0]=x(Be[Ze]),Ve[Ze][1]=p(Be[Ze]));else Ve[0]=x(Be),Ve[1]=p(Be);return Ve}(Y.textposition),te.textColor=t(Y.textfont,1,me),te.textSize=y(Y.textfont.size,me,f.identity,12),te.textFontFamily=Y.textfont.family,te.textFontWeight=Y.textfont.weight,te.textFontStyle=Y.textfont.style,te.textFontVariant=Y.textfont.variant,te.textAngle=0);var Ae=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],ee=0;ee<3;++ee){var Oe=Y.projection[Ae[ee]];(te.project[ee]=Oe.show)&&(te.projectOpacity[ee]=Oe.opacity,te.projectScale[ee]=Oe.scale)}te.errorBounds=c(Y,X,K);var Ee=function(Be){for(var Ve=[0,0,0],Ze=[[0,0,0],[0,0,0],[0,0,0]],it=[1,1,1],at=0;at<3;at++){var gt=Be[at];gt&&gt.copy_zstyle!==!1&&Be[2].visible!==!1&&(gt=Be[2]),gt&&gt.visible&&(Ve[at]=gt.width/2,Ze[at]=s(gt.color),it[at]=gt.thickness)}return{capSize:Ve,color:Ze,lineWidth:it}}([Y.error_x,Y.error_y,Y.error_z]);return te.errorColor=Ee.color,te.errorLineWidth=Ee.lineWidth,te.errorCapSize=Ee.capSize,te.delaunayAxis=Y.surfaceaxis,te.delaunayColor=s(Y.surfacecolor),te}(this.scene,h);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in r&&(D=r[z.lineDashes]),this.color=_(z.scatterColor)||_(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:D[0],dashScale:D[1],opacity:h.opacity,connectGaps:h.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=T(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var V=h.opacity;if(h.marker&&h.marker.opacity!==void 0&&(V*=h.marker.opacity),A={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:V,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(A):(this.scatterPlot=k(A),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFontFamily,fontWeight:z.textFontWeight,fontStyle:z.textFontStyle,fontVariant:z.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:h.opacity},this.textLabels=h.hovertext||h.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=k(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:h.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=a(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var O=function(j,Y,B){var U,q=(B+1)%3,te=(B+2)%3,ee=[],Q=[];for(U=0;U<j.length;++U){var J=j[U];!isNaN(J[q])&&isFinite(J[q])&&!isNaN(J[te])&&isFinite(J[te])&&(ee.push([J[q],J[te]]),Q.push(U))}var K=b(ee);for(U=0;U<K.length;++U)for(var X=K[U],ie=0;ie<X.length;++ie)X[ie]=Q[X[ie]];return{positions:j,cells:K,meshColor:Y}}(z.position,z.delaunayColor,z.delaunayAxis);O.opacity=h.opacity,this.delaunayMesh?this.delaunayMesh.update(O):(O.gl=I,this.delaunayMesh=w(O),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},u.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},F.exports=function(h,S){var A=new d(h,S.uid);return A.update(S),A}},83484:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(43028),w=e(74428),b=e(66828),f=e(124),s=e(91592);F.exports=function(t,i,r,n){function o(m,y){return k.coerce(t,i,s,m,y)}var l=function(m,y,v,_){var h=0,S=v("x"),A=v("y"),E=v("z");return T.getComponentMethod("calendars","handleTraceDefaults")(m,y,["x","y","z"],_),S&&A&&E&&(h=Math.min(S.length,A.length,E.length),y._length=y._xlength=y._ylength=y._zlength=h),h}(t,i,o,n);if(l){o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),o("mode"),a.hasMarkers(i)&&w(t,i,r,n,o,{noSelect:!0,noAngle:!0}),a.hasLines(i)&&(o("connectgaps"),b(t,i,r,n,o)),a.hasText(i)&&(o("texttemplate"),f(t,i,n,o,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var c=(i.line||{}).color,d=(i.marker||{}).color;o("surfaceaxis")>=0&&o("surfacecolor",c||d);for(var u=["x","y","z"],x=0;x<3;++x){var p="projection."+u[x];o(p+".show")&&(o(p+".opacity"),o(p+".scale"))}var g=T.getComponentMethod("errorbars","supplyDefaults");g(t,i,c||d||r,{axis:"z"}),g(t,i,c||d||r,{axis:"y",inherit:"z"}),g(t,i,c||d||r,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(F,C,e){"use strict";F.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(F,C,e){"use strict";var T=e(98304),k=e(52904),a=e(45464),w=e(21776).Ks,b=e(21776).Gw,f=e(49084),s=e(92880).extendFlat,t=k.marker,i=k.line,r=t.line;F.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},k.mode,{dflt:"markers"}),text:s({},k.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},k.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:s({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:s({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),marker:s({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:r.width,editType:"calc"},f("marker.line")),gradient:t.gradient,editType:"calc"},f("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:s({},a.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:w(),zorder:k.zorder}},48228:function(F,C,e){"use strict";var T=e(38248),k=e(90136),a=e(20148),w=e(4500),b=e(16356).calcMarkerSize,f=e(50948);F.exports=function(s,t){var i=t._carpetTrace=f(s,t);if(i&&i.visible&&i.visible!=="legendonly"){var r;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var n,o,l=t._length,c=new Array(l),d=!1;for(r=0;r<l;r++)if(n=t.a[r],o=t.b[r],T(n)&&T(o)){var u=i.ab2xy(+n,+o,!0),x=i.isVisible(+n,+o);x||(d=!0),c[r]={x:u[0],y:u[1],a:n,b:o,vis:x}}else c[r]={x:!1,y:!1};return t._needsCull=d,c[0].carpet=i,c[0].trace=t,b(t,l),k(s,t),a(c,t),w(c,t),c}}},6176:function(F,C,e){"use strict";var T=e(3400),k=e(88200),a=e(43028),w=e(74428),b=e(66828),f=e(11731),s=e(124),t=e(70840),i=e(90372);F.exports=function(r,n,o,l){function c(g,m){return T.coerce(r,n,i,g,m)}c("carpet"),n.xaxis="x",n.yaxis="y";var d=c("a"),u=c("b"),x=Math.min(d.length,u.length);if(x){n._length=x,c("text"),c("texttemplate"),c("hovertext"),c("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),a.hasMarkers(n)&&w(r,n,o,l,c,{gradient:!0}),a.hasLines(n)&&(b(r,n,o,l,c,{backoff:!0}),f(r,n,c),c("connectgaps")),a.hasText(n)&&s(r,n,l,c);var p=[];(a.hasMarkers(n)||a.hasText(n))&&(c("marker.maxdisplayed"),p.push("points")),c("fill"),n.fill!=="none"&&(t(r,n,o,c),a.hasLines(n)||f(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||p.push("fills"),c("hoveron",p.join("+")||"points")!=="fills"&&c("hovertemplate"),c("zorder"),T.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},89307:function(F){"use strict";F.exports=function(C,e,T,k,a){var w=k[a];return C.a=w.a,C.b=w.b,C.y=w.y,C}},52364:function(F){"use strict";F.exports=function(C,e){var T={},k=e._carpet,a=k.ab2ij([C.a,C.b]),w=Math.floor(a[0]),b=a[0]-w,f=Math.floor(a[1]),s=a[1]-f,t=k.evalxy([],w,f,b,s);return T.yLabel=t[1].toFixed(3),T}},58960:function(F,C,e){"use strict";var T=e(98723),k=e(3400).fillText;F.exports=function(a,w,b,f){var s=T(a,w,b,f);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var i=1-t.y0/a.ya._length,r=a.xa._length,n=r*i/2,o=r-n;return t.x0=Math.max(Math.min(t.x0,o),n),t.x1=Math.max(Math.min(t.x1,o),n),s}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var c=t.trace,d=c._carpet,u=c._module.formatLabels(l,c);t.yLabel=u.yLabel,delete t.text;var x=[];if(!c.hovertemplate){var p=(l.hi||c.hoverinfo).split("+");p.indexOf("all")!==-1&&(p=["a","b","text"]),p.indexOf("a")!==-1&&g(d.aaxis,l.a),p.indexOf("b")!==-1&&g(d.baxis,l.b),x.push("y: "+t.yLabel),p.indexOf("text")!==-1&&k(l,c,x),t.extraText=x.join("<br>")}return s}function g(m,y){var v;v=m.labelprefix&&m.labelprefix.length>0?m.labelprefix.replace(/ = $/,""):m._hovertitle,x.push(v+": "+y.toFixed(3)+m.labelsuffix)}}},4184:function(F,C,e){"use strict";F.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(F,C,e){"use strict";var T=e(96504),k=e(54460),a=e(43616);F.exports=function(w,b,f,s){var t,i,r,n=f[0][0].carpet,o=k.getFromId(w,n.xaxis||"x"),l=k.getFromId(w,n.yaxis||"y"),c={xaxis:o,yaxis:l,plot:b.plot};for(t=0;t<f.length;t++)(i=f[t][0].trace)._xA=o,i._yA=l;for(T(w,c,f,s),t=0;t<f.length;t++)i=f[t][0].trace,r=s.selectAll("g.trace"+i.uid+" .js-line"),a.setClipUrl(r,f[t][0].carpet._clipPathId,w)}},6096:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(21776).Gw,a=e(98304),w=e(52904),b=e(45464),f=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,r=w.marker,n=w.line,o=r.line;F.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},w.mode,{dflt:"markers"}),text:t({},w.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},w.hovertext,{}),textfont:w.textfont,textposition:w.textposition,line:{color:n.color,width:n.width,dash:s},connectgaps:w.connectgaps,marker:t({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:t({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:t({width:o.width},f("marker.line")),gradient:r.gradient},f("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:a(),selected:w.selected,unselected:w.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:T()},"calc","nested")},25212:function(F,C,e){"use strict";var T=e(38248),k=e(39032).BADNUM,a=e(90136),w=e(20148),b=e(4500),f=e(3400).isArrayOrTypedArray,s=e(3400)._;function t(i){return i&&typeof i=="string"}F.exports=function(i,r){var n,o=f(r.locations),l=o?r.locations.length:r._length,c=new Array(l);n=r.geojson?function(m){return t(m)||T(m)}:t;for(var d=0;d<l;d++){var u=c[d]={};if(o){var x=r.locations[d];u.loc=n(x)?x:null}else{var p=r.lon[d],g=r.lat[d];T(p)&&T(g)?u.lonlat=[+p,+g]:u.lonlat=[k,k]}}return w(c,r),a(i,r),b(c,r),l&&(c[0].t={labels:{lat:s(i,"lat:")+" ",lon:s(i,"lon:")+" "}}),c}},86188:function(F,C,e){"use strict";var T=e(3400),k=e(43028),a=e(74428),w=e(66828),b=e(124),f=e(70840),s=e(6096);F.exports=function(t,i,r,n){function o(g,m){return T.coerce(t,i,s,g,m)}var l,c=o("locations");if(c&&c.length){var d,u=o("geojson");(typeof u=="string"&&u!==""||T.isPlainObject(u))&&(d="geojson-id"),o("locationmode",d)==="geojson-id"&&o("featureidkey"),l=c.length}else{var x=o("lon")||[],p=o("lat")||[];l=Math.min(x.length,p.length)}l?(i._length=l,o("text"),o("hovertext"),o("hovertemplate"),o("mode"),k.hasMarkers(i)&&a(t,i,r,n,o,{gradient:!0}),k.hasLines(i)&&(w(t,i,r,n,o),o("connectgaps")),k.hasText(i)&&(o("texttemplate"),b(t,i,n,o)),o("fill"),i.fill!=="none"&&f(t,i,r,o),T.coerceSelectionMarkerOpacity(i,o)):i.visible=!1}},58544:function(F){"use strict";F.exports=function(C,e,T,k,a){C.lon=e.lon,C.lat=e.lat,C.location=e.loc?e.loc:null;var w=k[a];return w.fIn&&w.fIn.properties&&(C.properties=w.fIn.properties),C}},56696:function(F,C,e){"use strict";var T=e(54460);F.exports=function(k,a,w){var b={},f=w[a.geo]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=T.tickText(f,f.c2l(s[0]),!0).text,b.latLabel=T.tickText(f,f.c2l(s[1]),!0).text,b}},64292:function(F,C,e){"use strict";var T=e(93024),k=e(39032).BADNUM,a=e(44928),w=e(3400).fillText,b=e(6096);F.exports=function(f,s,t){var i=f.cd,r=i[0].trace,n=f.xa,o=f.ya,l=f.subplot,c=l.projection.isLonLatOverEdges,d=l.project;if(T.getClosest(i,function(v){var _=v.lonlat;if(_[0]===k||c(_))return 1/0;var h=d(_),S=d([s,t]),A=Math.abs(h[0]-S[0]),E=Math.abs(h[1]-S[1]),P=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(A*A+E*E)-P,1-3/P)},f),f.index!==!1){var u=i[f.index],x=u.lonlat,p=[n.c2p(x),o.c2p(x)],g=u.mrc||1;f.x0=p[0]-g,f.x1=p[0]+g,f.y0=p[1]-g,f.y1=p[1]+g,f.loc=u.loc,f.lon=x[0],f.lat=x[1];var m={};m[r.geo]={_subplot:l};var y=r._module.formatLabels(u,r,m);return f.lonLabel=y.lonLabel,f.latLabel=y.latLabel,f.color=a(r,u),f.extraText=function(v,_,h,S){if(!v.hovertemplate){var A=_.hi||v.hoverinfo,E=A==="all"?b.hoverinfo.flags:A.split("+"),P=E.indexOf("location")!==-1&&Array.isArray(v.locations),I=E.indexOf("lon")!==-1,D=E.indexOf("lat")!==-1,z=E.indexOf("text")!==-1,V=[];return P?V.push(_.loc):I&&D?V.push("("+O(h.latLabel)+", "+O(h.lonLabel)+")"):I?V.push(S.lon+O(h.lonLabel)):D&&V.push(S.lat+O(h.latLabel)),z&&w(_,v,V),V.join("<br>")}function O(j){return j+"\xB0"}}(r,u,f,i[0].t.labels),f.hovertemplate=r.hovertemplate,[f]}}},36952:function(F,C,e){"use strict";F.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(59972).getTopojsonFeatures,w=e(44808),b=e(27144),f=e(19280).findExtremes,s=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),r=e(25064);F.exports={calcGeoJSON:function(n,o){var l,c,d=n[0].trace,u=o[d.geo],x=u._subplot,p=d._length;if(k.isArrayOrTypedArray(d.locations)){var g=d.locationmode,m=g==="geojson-id"?b.extractTraceFeature(n):a(d,x.topojson);for(l=0;l<p;l++){c=n[l];var y=g==="geojson-id"?c.fOut:b.locationToFeature(g,c.loc,m);c.lonlat=y?y.properties.ct:[s,s]}}var v,_,h={padded:!0};if(u.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var S=b.computeBbox(b.getTraceGeojson(d));v=[S[0],S[2]],_=[S[1],S[3]]}else{for(v=new Array(p),_=new Array(p),l=0;l<p;l++)c=n[l],v[l]=c.lonlat[0],_[l]=c.lonlat[1];h.ppad=t(d,p)}d._extremes.lon=f(u.lonaxis._ax,v,h),d._extremes.lat=f(u.lataxis._ax,_,h)},plot:function(n,o,l){var c=o.layers.frontplot.select(".scatterlayer"),d=k.makeTraceGroups(c,l,"trace scattergeo");function u(x,p){x.lonlat[0]===s&&T.select(p).remove()}d.selectAll("*").remove(),d.each(function(x){var p=T.select(this),g=x[0].trace;if(i.hasLines(g)||g.fill!=="none"){var m=w.calcTraceToLineCoords(x),y=g.fill!=="none"?w.makePolygon(m):w.makeLine(m);p.selectAll("path.js-line").data([{geojson:y,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(g)&&p.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(v){u(v,this)}),i.hasText(g)&&p.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(v){u(v,this)}),r(n,x)})}}},8796:function(F,C,e){"use strict";var T=e(43028),k=e(39032).BADNUM;F.exports=function(a,w){var b,f,s,t,i,r=a.cd,n=a.xaxis,o=a.yaxis,l=[],c=r[0].trace;if(!T.hasMarkers(c)&&!T.hasText(c))return[];if(w===!1)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++)(f=(b=r[i]).lonlat)[0]!==k&&(s=n.c2p(f),t=o.c2p(f),w.contains([s,t],null,i,a)?(l.push({pointNumber:i,lon:f[0],lat:f[1]}),b.selected=1):b.selected=0);return l}},25064:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(76308),w=e(49224),b=w.stylePoints,f=w.styleText;F.exports=function(s,t){t&&function(i,r){var n=r[0].trace,o=r[0].node3;o.style("opacity",r[0].trace.opacity),b(o,n,i),f(o,n,i),o.selectAll("path.js-line").style("fill","none").each(function(l){var c=T.select(this),d=l.trace,u=d.line||{};c.call(a.stroke,u.color).call(k.dashLine,u.dash||"",u.width||0),d.fill!=="none"&&c.call(a.fill,d.fillcolor)})}(s,t)}},2876:function(F,C,e){"use strict";var T=e(45464),k=e(25376),a=e(98304),w=e(52904),b=e(29736).axisHoverFormat,f=e(49084),s=e(95376),t=e(92880).extendFlat,i=e(67824).overrideAll,r=e(67072).DASHES,n=w.line,o=w.marker,l=o.line,c=F.exports=i({x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:w.text,hovertext:w.hovertext,textposition:w.textposition,textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:s(r),dflt:"solid"}},marker:t({},f("marker"),{symbol:o.symbol,angle:o.angle,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:t({},f("marker.line"),{width:l.width})}),connectgaps:w.connectgaps,fill:t({},w.fill,{dflt:"none"}),fillcolor:a(),selected:{marker:w.selected.marker,textfont:w.selected.textfont},unselected:{marker:w.unselected.marker,textfont:w.unselected.textfont},opacity:T.opacity},"calc","nested");c.x.editType=c.y.editType=c.x0.editType=c.y0.editType="calc+clearAxisTypes",c.hovertemplate=w.hovertemplate,c.texttemplate=w.texttemplate},64628:function(F,C,e){"use strict";var T=e(41272);F.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:T.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(F,C,e){"use strict";var T=e(3108),k=e(3400),a=e(79811),w=e(19280).findExtremes,b=e(1220),f=e(16356),s=f.calcMarkerSize,t=f.calcAxisExpansion,i=f.setFirstScatter,r=e(90136),n=e(84236),o=e(74588),l=e(39032).BADNUM,c=e(67072).TOO_MANY_POINTS;function d(u,x,p){var g=u._extremes[x._id],m=w(x,p._bnds,{padded:!0});g.min=g.min.concat(m.min),g.max=g.max.concat(m.max)}F.exports=function(u,x){var p,g=u._fullLayout,m=x._xA=a.getFromId(u,x.xaxis,"x"),y=x._yA=a.getFromId(u,x.yaxis,"y"),v=g._plots[x.xaxis+x.yaxis],_=x._length,h=_>=c,S=2*_,A={},E=m.makeCalcdata(x,"x"),P=y.makeCalcdata(x,"y"),I=b(x,m,"x",E),D=b(x,y,"y",P),z=I.vals,V=D.vals;x._x=z,x._y=V,x.xperiodalignment&&(x._origX=E,x._xStarts=I.starts,x._xEnds=I.ends),x.yperiodalignment&&(x._origY=P,x._yStarts=D.starts,x._yEnds=D.ends);var O=new Array(S),j=new Array(_);for(p=0;p<_;p++)O[2*p]=z[p]===l?NaN:z[p],O[2*p+1]=V[p]===l?NaN:V[p],j[p]=p;if(m.type==="log")for(p=0;p<S;p+=2)O[p]=m.c2l(O[p]);if(y.type==="log")for(p=1;p<S;p+=2)O[p]=y.c2l(O[p]);h&&m.type!=="log"&&y.type!=="log"?A.tree=T(O):A.ids=j,r(u,x);var Y,B=function(q,te,ee,Q,J,K){var X=n.style(q,ee);if(X.marker&&(X.marker.positions=Q),X.line&&Q.length>1&&k.extendFlat(X.line,n.linePositions(q,ee,Q)),X.errorX||X.errorY){var ie=n.errorBarPositions(q,ee,Q,J,K);X.errorX&&k.extendFlat(X.errorX,ie.x),X.errorY&&k.extendFlat(X.errorY,ie.y)}return X.text&&(k.extendFlat(X.text,{positions:Q},n.textPosition(q,ee,X.text,X.marker)),k.extendFlat(X.textSel,{positions:Q},n.textPosition(q,ee,X.text,X.markerSel)),k.extendFlat(X.textUnsel,{positions:Q},n.textPosition(q,ee,X.text,X.markerUnsel))),X}(u,0,x,O,z,V),U=o(u,v);return i(g,x),h?B.marker&&(Y=B.marker.sizeAvg||Math.max(B.marker.size,3)):Y=s(x,_),t(u,x,m,y,z,V,Y),B.errorX&&d(x,m,B.errorX),B.errorY&&d(x,y,B.errorY),B.fill&&!U.fill2d&&(U.fill2d=!0),B.marker&&!U.scatter2d&&(U.scatter2d=!0),B.line&&!U.line2d&&(U.line2d=!0),!B.errorX&&!B.errorY||U.error2d||(U.error2d=!0),B.text&&!U.glText&&(U.glText=!0),B.marker&&(B.marker.snap=_),U.lineOptions.push(B.line),U.errorXOptions.push(B.errorX),U.errorYOptions.push(B.errorY),U.fillOptions.push(B.fill),U.markerOptions.push(B.marker),U.markerSelectedOptions.push(B.markerSel),U.markerUnselectedOptions.push(B.markerUnsel),U.textOptions.push(B.text),U.textSelectedOptions.push(B.textSel),U.textUnselectedOptions.push(B.textUnsel),U.selectBatch.push([]),U.unselectBatch.push([]),A._scene=U,A.index=U.count,A.x=z,A.y=V,A.positions=O,U.count++,[{x:!1,y:!1,t:A,trace:x}]}},67072:function(F){"use strict";F.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(F,C,e){"use strict";var T=e(38248),k=e(20472),a=e(72160),w=e(24040),b=e(3400),f=b.isArrayOrTypedArray,s=e(43616),t=e(79811),i=e(33040).formatColor,r=e(43028),n=e(7152),o=e(80088),l=e(67072),c=e(13448).DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},u=e(10624).appendArrayPointValue;function x(I,D){var z,V=I._fullLayout,O=D._length,j=D.textfont,Y=D.textposition,B=f(Y)?Y:[Y],U=j.color,q=j.size,te=j.family,ee=j.weight,Q=j.style,J=j.variant,K={},X=I._context.plotGlPixelRatio,ie=D.texttemplate;if(ie){K.text=[];var se=V._d3locale,ae=Array.isArray(ie),ue=ae?Math.min(ie.length,O):O,ve=ae?function(ge){return ie[ge]}:function(){return ie};for(z=0;z<ue;z++){var ye={i:z},pe=D._module.formatLabels(ye,D,V),de={};u(de,D,z);var me=D._meta||{};K.text.push(b.texttemplateString(ve(z),pe,se,de,ye,me))}}else f(D.text)&&D.text.length<O?K.text=D.text.slice():K.text=D.text;if(f(K.text))for(z=K.text.length;z<O;z++)K.text[z]="";for(K.opacity=D.opacity,K.font={},K.align=[],K.baseline=[],z=0;z<B.length;z++){var ke=B[z].split(/\s+/);switch(ke[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(ke[1])}switch(ke[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(ke[0])}}if(f(U))for(K.color=new Array(O),z=0;z<O;z++)K.color[z]=U[z];else K.color=U;if(f(q)||Array.isArray(te)||f(ee)||Array.isArray(Q)||Array.isArray(J))for(K.font=new Array(O),z=0;z<O;z++){var Ce=K.font[z]={};Ce.size=(b.isTypedArray(q)?q[z]:f(q)?T(q[z])?q[z]:0:q)*X,Ce.family=Array.isArray(te)?te[z]:te,Ce.weight=p(f(ee)?ee[z]:ee),Ce.style=Array.isArray(Q)?Q[z]:Q,Ce.variant=Array.isArray(J)?J[z]:J}else K.font={size:q*X,family:te,weight:p(ee),style:Q,variant:J};return K}function p(I){return I<=1e3?I>500?"bold":"normal":I}function g(I,D){var z,V,O=D._length,j=D.marker,Y={},B=f(j.symbol),U=f(j.angle),q=f(j.color),te=f(j.line.color),ee=f(j.opacity),Q=f(j.size),J=f(j.line.width);if(B||(V=o.isOpenSymbol(j.symbol)),B||q||te||ee||U){Y.symbols=new Array(O),Y.angles=new Array(O),Y.colors=new Array(O),Y.borderColors=new Array(O);var K=j.symbol,X=j.angle,ie=i(j,j.opacity,O),se=i(j.line,j.opacity,O);if(!f(se[0])){var ae=se;for(se=Array(O),z=0;z<O;z++)se[z]=ae}if(!f(ie[0])){var ue=ie;for(ie=Array(O),z=0;z<O;z++)ie[z]=ue}if(!f(K)){var ve=K;for(K=Array(O),z=0;z<O;z++)K[z]=ve}if(!f(X)){var ye=X;for(X=Array(O),z=0;z<O;z++)X[z]=ye}for(Y.symbols=K,Y.angles=X,Y.colors=ie,Y.borderColors=se,z=0;z<O;z++)B&&(V=o.isOpenSymbol(j.symbol[z])),V&&(se[z]=ie[z].slice(),ie[z]=ie[z].slice(),ie[z][3]=0);for(Y.opacity=D.opacity,Y.markers=new Array(O),z=0;z<O;z++)Y.markers[z]=P({mx:Y.symbols[z],ma:Y.angles[z]},D)}else V?(Y.color=a(j.color,"uint8"),Y.color[3]=0,Y.borderColor=a(j.color,"uint8")):(Y.color=a(j.color,"uint8"),Y.borderColor=a(j.line.color,"uint8")),Y.opacity=D.opacity*j.opacity,Y.marker=P({mx:j.symbol,ma:j.angle},D);var pe,de=n(D,1);if(Q||J){var me,ke=Y.sizes=new Array(O),Ce=Y.borderSizes=new Array(O),ge=0;if(Q){for(z=0;z<O;z++)ke[z]=de(j.size[z]),ge+=ke[z];me=ge/O}else for(pe=de(j.size),z=0;z<O;z++)ke[z]=pe;if(J)for(z=0;z<O;z++)Ce[z]=j.line.width[z];else for(pe=j.line.width,z=0;z<O;z++)Ce[z]=pe;Y.sizeAvg=me}else Y.size=de(j&&j.size||10),Y.borderSizes=de(j.line.width);return Y}function m(I,D,z){var V=D.marker,O={};return z&&(z.marker&&z.marker.symbol?O=g(0,b.extendFlat({},V,z.marker)):z.marker&&(z.marker.size&&(O.size=z.marker.size),z.marker.color&&(O.colors=z.marker.color),z.marker.opacity!==void 0&&(O.opacity=z.marker.opacity))),O}function y(I,D,z){var V={};if(!z)return V;if(z.textfont){var O={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:b.extendFlat({},D.textfont)};z.textfont&&b.extendFlat(O.textfont,z.textfont),V=x(I,O)}return V}function v(I,D,z){var V={capSize:2*D.width*z,lineWidth:D.thickness*z,color:D.color};return D.copy_ystyle&&(V=I.error_y),V}var _=l.SYMBOL_SDF_SIZE,h=l.SYMBOL_SIZE,S=l.SYMBOL_STROKE,A={},E=s.symbolFuncs[0](.05*h);function P(I,D){var z,V,O=I.mx;if(O==="circle")return null;var j=s.symbolNumber(O),Y=s.symbolFuncs[j%100],B=!!s.symbolNoDot[j%100],U=!!s.symbolNoFill[j%100],q=o.isDotSymbol(O);if(I.ma&&(O+="_"+I.ma),A[O])return A[O];var te=s.getMarkerAngle(I,D);return z=q&&!B?Y(1.1*h,te)+E:Y(h,te),V=k(z,{w:_,h:_,viewBox:[-h,-h,h,h],stroke:U?S:-S}),A[O]=V,V||null}F.exports={style:function(I,D){var z,V={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},O=I._context.plotGlPixelRatio;if(D.visible!==!0)return V;if(r.hasText(D)&&(V.text=x(I,D),V.textSel=y(I,D,D.selected),V.textUnsel=y(I,D,D.unselected)),r.hasMarkers(D)&&(V.marker=g(0,D),V.markerSel=m(0,D,D.selected),V.markerUnsel=m(0,D,D.unselected),!D.unselected&&f(D.marker.opacity))){var j=D.marker.opacity;for(V.markerUnsel.opacity=new Array(j.length),z=0;z<j.length;z++)V.markerUnsel.opacity[z]=c*j[z]}if(r.hasLines(D)){V.line={overlay:!0,thickness:D.line.width*O,color:D.line.color,opacity:D.opacity};var Y=(l.DASHES[D.line.dash]||[1]).slice();for(z=0;z<Y.length;++z)Y[z]*=D.line.width*O;V.line.dashes=Y}return D.error_x&&D.error_x.visible&&(V.errorX=v(D,D.error_x,O)),D.error_y&&D.error_y.visible&&(V.errorY=v(D,D.error_y,O)),D.fill&&D.fill!=="none"&&(V.fill={closed:!0,fill:D.fillcolor,thickness:0}),V},markerStyle:g,markerSelection:m,linePositions:function(I,D,z){var V,O,j=z.length,Y=j/2;if(r.hasLines(D)&&Y)if(D.line.shape==="hv"){for(V=[],O=0;O<Y-1;O++)isNaN(z[2*O])||isNaN(z[2*O+1])?V.push(NaN,NaN,NaN,NaN):(V.push(z[2*O],z[2*O+1]),isNaN(z[2*O+2])||isNaN(z[2*O+3])?V.push(NaN,NaN):V.push(z[2*O+2],z[2*O+1]));V.push(z[j-2],z[j-1])}else if(D.line.shape==="hvh"){for(V=[],O=0;O<Y-1;O++)if(isNaN(z[2*O])||isNaN(z[2*O+1])||isNaN(z[2*O+2])||isNaN(z[2*O+3]))isNaN(z[2*O])||isNaN(z[2*O+1])?V.push(NaN,NaN):V.push(z[2*O],z[2*O+1]),V.push(NaN,NaN);else{var B=(z[2*O]+z[2*O+2])/2;V.push(z[2*O],z[2*O+1],B,z[2*O+1],B,z[2*O+3])}V.push(z[j-2],z[j-1])}else if(D.line.shape==="vhv"){for(V=[],O=0;O<Y-1;O++)if(isNaN(z[2*O])||isNaN(z[2*O+1])||isNaN(z[2*O+2])||isNaN(z[2*O+3]))isNaN(z[2*O])||isNaN(z[2*O+1])?V.push(NaN,NaN):V.push(z[2*O],z[2*O+1]),V.push(NaN,NaN);else{var U=(z[2*O+1]+z[2*O+3])/2;V.push(z[2*O],z[2*O+1],z[2*O],U,z[2*O+2],U)}V.push(z[j-2],z[j-1])}else if(D.line.shape==="vh"){for(V=[],O=0;O<Y-1;O++)isNaN(z[2*O])||isNaN(z[2*O+1])?V.push(NaN,NaN,NaN,NaN):(V.push(z[2*O],z[2*O+1]),isNaN(z[2*O+2])||isNaN(z[2*O+3])?V.push(NaN,NaN):V.push(z[2*O],z[2*O+3]));V.push(z[j-2],z[j-1])}else V=z;var q=!1;for(O=0;O<V.length;O++)if(isNaN(V[O])){q=!0;break}var te=q||V.length>l.TOO_MANY_POINTS||r.hasMarkers(D)?"rect":"round";if(q&&D.connectgaps){var ee=V[0],Q=V[1];for(O=0;O<V.length;O+=2)isNaN(V[O])||isNaN(V[O+1])?(V[O]=ee,V[O+1]=Q):(ee=V[O],Q=V[O+1])}return{join:te,positions:V}},errorBarPositions:function(I,D,z,V,O){var j=w.getComponentMethod("errorbars","makeComputeError"),Y=t.getFromId(I,D.xaxis,"x"),B=t.getFromId(I,D.yaxis,"y"),U=z.length/2,q={};function te(ee,Q){var J=Q._id.charAt(0),K=D["error_"+J];if(K&&K.visible&&(Q.type==="linear"||Q.type==="log")){for(var X=j(K),ie={x:0,y:1}[J],se={x:[0,1,2,3],y:[2,3,0,1]}[J],ae=new Float64Array(4*U),ue=1/0,ve=-1/0,ye=0,pe=0;ye<U;ye++,pe+=4){var de=ee[ye];if(T(de)){var me=z[2*ye+ie],ke=X(de,ye),Ce=ke[0],ge=ke[1];if(T(Ce)&&T(ge)){var oe=de-Ce,re=de+ge;ae[pe+se[0]]=me-Q.c2l(oe),ae[pe+se[1]]=Q.c2l(re)-me,ae[pe+se[2]]=0,ae[pe+se[3]]=0,ue=Math.min(ue,de-Ce),ve=Math.max(ve,de+ge)}}}q[J]={positions:z,errors:ae,_bnds:[ue,ve]}}}return te(V,Y),te(O,B),q},textPosition:function(I,D,z,V){var O,j=D._length,Y={};if(r.hasMarkers(D)){var B=z.font,U=z.align,q=z.baseline;for(Y.offset=new Array(j),O=0;O<j;O++){var te=V.sizes?V.sizes[O]:V.size,ee=f(B)?B[O].size:B.size,Q=f(U)?U.length>1?U[O]:U[0]:U,J=f(q)?q.length>1?q[O]:q[0]:q,K=d[Q],X=d[J],ie=te?te/.8+1:0,se=-X*ie-.5*X;Y.offset[O]=[K*ie/ee,se/ee]}}return Y}}},80220:function(F,C,e){"use strict";var T=e(3400),k=e(24040),a=e(80088),w=e(2876),b=e(88200),f=e(43028),s=e(43980),t=e(31147),i=e(74428),r=e(66828),n=e(70840),o=e(124);F.exports=function(l,c,d,u){function x(S,A){return T.coerce(l,c,w,S,A)}var p=!!l.marker&&a.isOpenSymbol(l.marker.symbol),g=f.isBubble(l),m=s(l,c,u,x);if(m){t(l,c,u,x),x("xhoverformat"),x("yhoverformat");var y=m<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",y),f.hasMarkers(c)&&(i(l,c,d,u,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",p||g?1:0)),f.hasLines(c)&&(x("connectgaps"),r(l,c,d,u,x),x("line.shape")),f.hasText(c)&&(x("texttemplate"),o(l,c,u,x,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var v=(c.line||{}).color,_=(c.marker||{}).color;x("fill"),c.fill!=="none"&&n(l,c,d,x);var h=k.getComponentMethod("errorbars","supplyDefaults");h(l,c,v||_||d,{axis:"y"}),h(l,c,v||_||d,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(c,x)}else c.visible=!1}},26768:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(13448).DESELECTDIM;F.exports={styleTextSelection:function(w){var b,f,s=w[0],t=s.trace,i=s.t,r=i._scene,n=i.index,o=r.selectBatch[n],l=r.unselectBatch[n],c=r.textOptions[n],d=r.textSelectedOptions[n]||{},u=r.textUnselectedOptions[n]||{},x=T.extendFlat({},c);if(o.length||l.length){var p=d.color,g=u.color,m=c.color,y=T.isArrayOrTypedArray(m);for(x.color=new Array(t._length),b=0;b<o.length;b++)f=o[b],x.color[f]=p||(y?m[f]:m);for(b=0;b<l.length;b++){f=l[b];var v=y?m[f]:m;x.color[f]=g||(p?v:k.addOpacity(v,a))}}r.glText[n].update(x)}}},99396:function(F,C,e){"use strict";var T=e(76688);F.exports=function(k,a,w){var b=k.i;return"x"in k||(k.x=a._x[b]),"y"in k||(k.y=a._y[b]),T(k,a,w)}},80088:function(F,C,e){"use strict";var T=e(67072);C.isOpenSymbol=function(k){return typeof k=="string"?T.OPEN_RE.test(k):k%200>100},C.isDotSymbol=function(k){return typeof k=="string"?T.DOT_RE.test(k):k>200}},41272:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(44928);function w(b,f,s,t){var i=b.xa,r=b.ya,n=b.distance,o=b.dxy,l=b.index,c={pointNumber:l,x:f[l],y:s[l]};c.tx=k.isArrayOrTypedArray(t.text)?t.text[l]:t.text,c.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,c.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,c.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var d=t.textfont;d&&(c.ts=k.isArrayOrTypedArray(d.size)?d.size[l]:d.size,c.tc=k.isArrayOrTypedArray(d.color)?d.color[l]:d.color,c.tf=Array.isArray(d.family)?d.family[l]:d.family,c.tw=Array.isArray(d.weight)?d.weight[l]:d.weight,c.ty=Array.isArray(d.style)?d.style[l]:d.style,c.tv=Array.isArray(d.variant)?d.variant[l]:d.variant);var u=t.marker;u&&(c.ms=k.isArrayOrTypedArray(u.size)?u.size[l]:u.size,c.mo=k.isArrayOrTypedArray(u.opacity)?u.opacity[l]:u.opacity,c.mx=k.isArrayOrTypedArray(u.symbol)?u.symbol[l]:u.symbol,c.ma=k.isArrayOrTypedArray(u.angle)?u.angle[l]:u.angle,c.mc=k.isArrayOrTypedArray(u.color)?u.color[l]:u.color);var x=u&&u.line;x&&(c.mlc=Array.isArray(x.color)?x.color[l]:x.color,c.mlw=k.isArrayOrTypedArray(x.width)?x.width[l]:x.width);var p=u&&u.gradient;p&&p.type!=="none"&&(c.mgt=Array.isArray(p.type)?p.type[l]:p.type,c.mgc=Array.isArray(p.color)?p.color[l]:p.color);var g=i.c2p(c.x,!0),m=r.c2p(c.y,!0),y=c.mrc||1,v=t.hoverlabel;v&&(c.hbg=Array.isArray(v.bgcolor)?v.bgcolor[l]:v.bgcolor,c.hbc=Array.isArray(v.bordercolor)?v.bordercolor[l]:v.bordercolor,c.hts=k.isArrayOrTypedArray(v.font.size)?v.font.size[l]:v.font.size,c.htc=Array.isArray(v.font.color)?v.font.color[l]:v.font.color,c.htf=Array.isArray(v.font.family)?v.font.family[l]:v.font.family,c.hnl=k.isArrayOrTypedArray(v.namelength)?v.namelength[l]:v.namelength);var _=t.hoverinfo;_&&(c.hi=Array.isArray(_)?_[l]:_);var h=t.hovertemplate;h&&(c.ht=Array.isArray(h)?h[l]:h);var S={};S[b.index]=c;var A=t._origX,E=t._origY,P=k.extendFlat({},b,{color:a(t,c),x0:g-y,x1:g+y,xLabelVal:A?A[l]:c.x,y0:m-y,y1:m+y,yLabelVal:E?E[l]:c.y,cd:S,distance:n,spikeDistance:o,hovertemplate:c.ht});return c.htx?P.text=c.htx:c.tx?P.text=c.tx:t.text&&(P.text=t.text),k.fillText(c,t,P),T.getComponentMethod("errorbars","hoverInfo")(c,t,P),P}F.exports={hoverPoints:function(b,f,s,t){var i,r,n,o,l,c,d,u,x,p,g=b.cd,m=g[0].t,y=g[0].trace,v=b.xa,_=b.ya,h=m.x,S=m.y,A=v.c2p(f),E=_.c2p(s),P=b.distance;if(m.tree){var I=v.p2c(A-P),D=v.p2c(A+P),z=_.p2c(E-P),V=_.p2c(E+P);i=t==="x"?m.tree.range(Math.min(I,D),Math.min(_._rl[0],_._rl[1]),Math.max(I,D),Math.max(_._rl[0],_._rl[1])):m.tree.range(Math.min(I,D),Math.min(z,V),Math.max(I,D),Math.max(z,V))}else i=m.ids;var O=P;if(t==="x"){var j=!!y.xperiodalignment,Y=!!y.yperiodalignment;for(c=0;c<i.length;c++){if(o=h[r=i[c]],d=Math.abs(v.c2p(o)-A),j){var B=v.c2p(y._xStarts[r]),U=v.c2p(y._xEnds[r]);d=A>=Math.min(B,U)&&A<=Math.max(B,U)?0:1/0}if(d<O){if(O=d,l=S[r],u=_.c2p(l)-E,Y){var q=_.c2p(y._yStarts[r]),te=_.c2p(y._yEnds[r]);u=E>=Math.min(q,te)&&E<=Math.max(q,te)?0:1/0}p=Math.sqrt(d*d+u*u),n=i[c]}}}else for(c=i.length-1;c>-1;c--)o=h[r=i[c]],l=S[r],d=v.c2p(o)-A,u=_.c2p(l)-E,(x=Math.sqrt(d*d+u*u))<O&&(O=p=x,n=r);return b.index=n,b.distance=O,b.dxy=p,n===void 0?[b]:[w(b,h,S,y)]},calcHover:w}},38983:function(F,C,e){"use strict";var T=e(64628);T.plot=e(89876),F.exports=T},89876:function(F,C,e){"use strict";var T=e(38540),k=e(13472),a=e(24544),w=e(23352),b=e(3400),f=e(72760).selectMode,s=e(5048),t=e(43028),i=e(14328),r=e(26768).styleTextSelection,n={};function o(l,c,d,u){var x=l._size,p=l.width*u,g=l.height*u,m=x.l*u,y=x.b*u,v=x.r*u,_=x.t*u,h=x.w*u,S=x.h*u;return[m+c.domain[0]*h,y+d.domain[0]*S,p-v-(1-c.domain[1])*h,g-_-(1-d.domain[1])*S]}(F.exports=function(l,c,d){if(d.length){var u,x,p=l._fullLayout,g=c._scene,m=c.xaxis,y=c.yaxis;if(g)if(s(l,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var v=g.count,_=p._glcanvas.data()[0].regl;if(i(l,c,d),g.dirty){if(!g.line2d&&!g.error2d||g.scatter2d||g.fill2d||g.glText||_.clear({}),g.error2d===!0&&(g.error2d=a(_)),g.line2d===!0&&(g.line2d=k(_)),g.scatter2d===!0&&(g.scatter2d=T(_)),g.fill2d===!0&&(g.fill2d=k(_)),g.glText===!0)for(g.glText=new Array(v),u=0;u<v;u++)g.glText[u]=new w(_);if(g.glText){if(v>g.glText.length){var h=v-g.glText.length;for(u=0;u<h;u++)g.glText.push(new w(_))}else if(v<g.glText.length){var S=g.glText.length-v;g.glText.splice(v,S).forEach(function(ie){ie.destroy()})}for(u=0;u<v;u++)g.glText[u].update(g.textOptions[u])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(ie){if(ie&&ie.positions){for(var se=ie.positions,ae=0;ae<se.length&&(isNaN(se[ae])||isNaN(se[ae+1]));)ae+=2;for(var ue=se.length-2;ue>ae&&(isNaN(se[ue])||isNaN(se[ue+1]));)ue-=2;ie.positions=se.slice(ae,ue+2)}return ie}),g.line2d.update(g.lineOptions)),g.error2d){var A=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(A)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=b.repeat(null,v),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(ie,se){var ae=d[se];if(ie&&ae&&ae[0]&&ae[0].trace){var ue,ve,ye=ae[0],pe=ye.trace,de=ye.t,me=g.lineOptions[se],ke=[];pe._ownfill&&ke.push(se),pe._nexttrace&&ke.push(se+1),ke.length&&(g.fillOrder[se]=ke);var Ce,ge,oe=[],re=me&&me.positions||de.positions;if(pe.fill==="tozeroy"){for(Ce=0;Ce<re.length&&isNaN(re[Ce+1]);)Ce+=2;for(ge=re.length-2;ge>Ce&&isNaN(re[ge+1]);)ge-=2;re[Ce+1]!==0&&(oe=[re[Ce],0]),oe=oe.concat(re.slice(Ce,ge+2)),re[ge+1]!==0&&(oe=oe.concat([re[ge],0]))}else if(pe.fill==="tozerox"){for(Ce=0;Ce<re.length&&isNaN(re[Ce]);)Ce+=2;for(ge=re.length-2;ge>Ce&&isNaN(re[ge]);)ge-=2;re[Ce]!==0&&(oe=[0,re[Ce+1]]),oe=oe.concat(re.slice(Ce,ge+2)),re[ge]!==0&&(oe=oe.concat([0,re[ge+1]]))}else if(pe.fill==="toself"||pe.fill==="tonext"){for(oe=[],ue=0,ie.splitNull=!0,ve=0;ve<re.length;ve+=2)(isNaN(re[ve])||isNaN(re[ve+1]))&&((oe=oe.concat(re.slice(ue,ve))).push(re[ue],re[ue+1]),oe.push(null,null),ue=ve+2);oe=oe.concat(re.slice(ue)),ue&&oe.push(re[ue],re[ue+1])}else{var fe=pe._nexttrace;if(fe){var Se=g.lineOptions[se+1];if(Se){var be=Se.positions;if(pe.fill==="tonexty"){for(oe=re.slice(),se=Math.floor(be.length/2);se--;){var we=be[2*se],Me=be[2*se+1];isNaN(we)||isNaN(Me)||oe.push(we,Me)}ie.fill=fe.fillcolor}}}}if(pe._prevtrace&&pe._prevtrace.fill==="tonext"){var Pe=g.lineOptions[se-1].positions,De=oe.length/2,he=[ue=De];for(ve=0;ve<Pe.length;ve+=2)(isNaN(Pe[ve])||isNaN(Pe[ve+1]))&&(he.push(ve/2+De+1),ue=ve+2);oe=oe.concat(Pe),ie.hole=he}return ie.fillmode=pe.fill,ie.opacity=pe.opacity,ie.positions=oe,ie}}),g.fill2d.update(g.fillOptions))}var E=p.dragmode,P=f(E),I=p.clickmode.indexOf("select")>-1;for(u=0;u<v;u++){var D=d[u][0],z=D.trace,V=D.t,O=V.index,j=z._length,Y=V.x,B=V.y;if(z.selectedpoints||P||I){if(P||(P=!0),z.selectedpoints){var U=g.selectBatch[O]=b.selIndices2selPoints(z),q={};for(x=0;x<U.length;x++)q[U[x]]=1;var te=[];for(x=0;x<j;x++)q[x]||te.push(x);g.unselectBatch[O]=te}var ee=V.xpx=new Array(j),Q=V.ypx=new Array(j);for(x=0;x<j;x++)ee[x]=m.c2p(Y[x]),Q[x]=y.c2p(B[x])}else V.xpx=V.ypx=null}if(P){if(g.select2d||(g.select2d=T(p._glcanvas.data()[1].regl)),g.scatter2d){var J=new Array(v);for(u=0;u<v;u++)J[u]=g.selectBatch[u].length||g.unselectBatch[u].length?g.markerUnselectedOptions[u]:{};g.scatter2d.update(J)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&d.forEach(function(ie){var se=((ie||[])[0]||{}).trace||{};t.hasText(se)&&r(ie)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var K={viewport:o(p,m,y,l._context.plotGlPixelRatio),range:[(m._rl||m.range)[0],(y._rl||y.range)[0],(m._rl||m.range)[1],(y._rl||y.range)[1]]},X=b.repeat(K,g.count);g.fill2d&&g.fill2d.update(X),g.line2d&&g.line2d.update(X),g.error2d&&g.error2d.update(X.concat(X)),g.scatter2d&&g.scatter2d.update(X),g.select2d&&g.select2d.update(X),g.glText&&g.glText.forEach(function(ie){ie.update(K)})}else g.init()}}).reglPrecompiled=n},74588:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){var w=a._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},f={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return a._scene||((w=a._scene={}).init=function(){T.extendFlat(w,f,b)},w.init(),w.update=function(s){var t=T.repeat(s,w.count);if(w.fill2d&&w.fill2d.update(t),w.scatter2d&&w.scatter2d.update(t),w.line2d&&w.line2d.update(t),w.error2d&&w.error2d.update(t.concat(t)),w.select2d&&w.select2d.update(t),w.glText)for(var i=0;i<w.count;i++)w.glText[i].update(s)},w.draw=function(){for(var s=w.count,t=w.fill2d,i=w.error2d,r=w.line2d,n=w.scatter2d,o=w.glText,l=w.select2d,c=w.selectBatch,d=w.unselectBatch,u=0;u<s;u++){if(t&&w.fillOrder[u]&&t.draw(w.fillOrder[u]),r&&w.lineOptions[u]&&r.draw(u),i&&(w.errorXOptions[u]&&i.draw(u),w.errorYOptions[u]&&i.draw(u+s)),n&&w.markerOptions[u])if(d[u].length){var x=T.repeat([],w.count);x[u]=d[u],n.draw(x)}else c[u].length||n.draw(u);o[u]&&w.textOptions[u]&&o[u].render()}l&&l.draw(c),w.dirty=!1},w.destroy=function(){w.fill2d&&w.fill2d.destroy&&w.fill2d.destroy(),w.scatter2d&&w.scatter2d.destroy&&w.scatter2d.destroy(),w.error2d&&w.error2d.destroy&&w.error2d.destroy(),w.line2d&&w.line2d.destroy&&w.line2d.destroy(),w.select2d&&w.select2d.destroy&&w.select2d.destroy(),w.glText&&w.glText.forEach(function(s){s.destroy&&s.destroy()}),w.lineOptions=null,w.fillOptions=null,w.markerOptions=null,w.markerSelectedOptions=null,w.markerUnselectedOptions=null,w.errorXOptions=null,w.errorYOptions=null,w.textOptions=null,w.textSelectedOptions=null,w.textUnselectedOptions=null,w.selectBatch=null,w.unselectBatch=null,a._scene=null}),w.dirty||T.extendFlat(w,b),w}},73224:function(F,C,e){"use strict";var T=e(43028),k=e(26768).styleTextSelection;F.exports=function(a,w){var b=a.cd,f=a.xaxis,s=a.yaxis,t=[],i=b[0].trace,r=b[0].t,n=i._length,o=r.x,l=r.y,c=r._scene,d=r.index;if(!c)return t;var u=T.hasText(i),x=T.hasMarkers(i),p=!x&&!u;if(i.visible!==!0||p)return t;var g=[],m=[];if(w!==!1&&!w.degenerate)for(var y=0;y<n;y++)w.contains([r.xpx[y],r.ypx[y]],!1,y,a)?(g.push(y),t.push({pointNumber:y,x:f.c2d(o[y]),y:s.c2d(l[y])})):m.push(y);if(x){var v=c.scatter2d;if(g.length||m.length){if(!c.selectBatch[d].length&&!c.unselectBatch[d].length){var _=new Array(c.count);_[d]=c.markerUnselectedOptions[d],v.update.apply(v,_)}}else{var h=new Array(c.count);h[d]=c.markerOptions[d],v.update.apply(v,h)}}return c.selectBatch[d]=g,c.unselectBatch[d]=m,u&&k(b),t}},31512:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(21776).Gw,a=e(98304),w=e(6096),b=e(52904),f=e(5232),s=e(45464),t=e(49084),i=e(92880).extendFlat,r=e(67824).overrideAll,n=e(5232),o=w.line,l=w.marker;F.exports=r({lon:w.lon,lat:w.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},l.opacity,{dflt:1})},mode:i({},b.mode,{dflt:"markers"}),text:i({},b.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},b.hovertext,{}),line:{color:o.color,width:o.width},connectgaps:b.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:w.fill,fillcolor:a(),textfont:f.layers.symbol.textfont,textposition:f.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:i({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:T()},"calc","nested")},79732:function(F){"use strict";var C=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];F.exports={isSupportedFont:function(e){return C.indexOf(e)!==-1}}},59392:function(F,C,e){"use strict";var T=e(38248),k=e(3400),a=e(39032).BADNUM,w=e(44808),b=e(8932),f=e(43616),s=e(7152),t=e(43028),i=e(79732).isSupportedFont,r=e(89032),n=e(10624).appendArrayPointValue,o=e(72736).NEWLINES,l=e(72736).BR_TAG_ALL;function c(m){return{type:m,geojson:w.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function d(m,y){return k.isArrayOrTypedArray(m)?y?function(v){return T(m[v])?+m[v]:0}:function(v){return m[v]}:m?function(){return m}:u}function u(){return""}function x(m){return m[0]===a}function p(m,y){var v;if(k.isArrayOrTypedArray(m)&&k.isArrayOrTypedArray(y)){v=["step",["get","point_count"],m[0]];for(var _=1;_<m.length;_++)v.push(y[_-1],m[_])}else v=m;return v}function g(m){var y=m.textfont,v=y.family,_=y.style,h=y.weight,S=v.split(" "),A=S[S.length-1]==="Italic";A&&S.pop(),A=A||_==="italic";var E=S.join(" ");return h==="bold"&&S.indexOf("Bold")===-1?E+=" Bold":h<=1e3&&(S[0]==="Metropolis"?(E="Metropolis",E+=h>850?" Black":h>750?" Extra Bold":h>650?" Bold":h>550?" Semi Bold":h>450?" Medium":h>350?" Regular":h>250?" Light":h>150?" Extra Light":" Thin"):S.slice(0,2).join(" ")==="Open Sans"?(E="Open Sans",E+=h>750?" Extrabold":h>650?" Bold":h>550?" Semibold":h>350?" Regular":" Light"):S.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(E="Klokantech Noto Sans",S[3]==="CJK"&&(E+=" CJK"),E+=h>500?" Bold":" Regular")),A&&(E+=" Italic"),E==="Open Sans Regular Italic"?E="Open Sans Italic":E==="Open Sans Regular Bold"?E="Open Sans Bold":E==="Open Sans Regular Bold Italic"?E="Open Sans Bold Italic":E==="Klokantech Noto Sans Regular Italic"&&(E="Klokantech Noto Sans Italic"),i(E)||(E=v),E.split(", ")}F.exports=function(m,y){var v,_=y[0].trace,h=_.visible===!0&&_._length!==0,S=_.fill!=="none",A=t.hasLines(_),E=t.hasMarkers(_),P=t.hasText(_),I=E&&_.marker.symbol==="circle",D=E&&_.marker.symbol!=="circle",z=_.cluster&&_.cluster.enabled,V=c("fill"),O=c("line"),j=c("circle"),Y=c("symbol"),B={fill:V,line:O,circle:j,symbol:Y};if(!h)return B;if((S||A)&&(v=w.calcTraceToLineCoords(y)),S&&(V.geojson=w.makePolygon(v),V.layout.visibility="visible",k.extendFlat(V.paint,{"fill-color":_.fillcolor})),A&&(O.geojson=w.makeLine(v),O.layout.visibility="visible",k.extendFlat(O.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),I){var U=function(ee){var Q,J,K,X,ie=ee[0].trace,se=ie.marker,ae=ie.selectedpoints,ue=k.isArrayOrTypedArray(se.color),ve=k.isArrayOrTypedArray(se.size),ye=k.isArrayOrTypedArray(se.opacity);function pe(fe){return ie.opacity*fe}ue&&(J=b.hasColorscale(ie,"marker")?b.makeColorScaleFuncFromTrace(se):k.identity),ve&&(K=s(ie)),ye&&(X=function(fe){return pe(T(fe)?+k.constrain(fe,0,1):0)});var de,me,ke=[];for(Q=0;Q<ee.length;Q++){var Ce=ee[Q],ge=Ce.lonlat;if(!x(ge)){var oe={};J&&(oe.mcc=Ce.mcc=J(Ce.mc)),K&&(oe.mrc=Ce.mrc=K(Ce.ms)),X&&(oe.mo=X(Ce.mo)),ae&&(oe.selected=Ce.selected||0),ke.push({type:"Feature",id:Q+1,geometry:{type:"Point",coordinates:ge},properties:oe})}}if(ae)for(de=f.makeSelectedPointStyleFns(ie),Q=0;Q<ke.length;Q++){var re=ke[Q].properties;de.selectedOpacityFn&&(re.mo=pe(de.selectedOpacityFn(re))),de.selectedColorFn&&(re.mcc=de.selectedColorFn(re)),de.selectedSizeFn&&(re.mrc=de.selectedSizeFn(re))}return{geojson:{type:"FeatureCollection",features:ke},mcc:ue||de&&de.selectedColorFn?{type:"identity",property:"mcc"}:se.color,mrc:ve||de&&de.selectedSizeFn?{type:"identity",property:"mrc"}:(me=se.size,me/2),mo:ye||de&&de.selectedOpacityFn?{type:"identity",property:"mo"}:pe(se.opacity)}}(y);j.geojson=U.geojson,j.layout.visibility="visible",z&&(j.filter=["!",["has","point_count"]],B.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":p(_.cluster.color,_.cluster.step),"circle-radius":p(_.cluster.size,_.cluster.step),"circle-opacity":p(_.cluster.opacity,_.cluster.step)}},B.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":g(_),"text-size":12}}),k.extendFlat(j.paint,{"circle-color":U.mcc,"circle-radius":U.mrc,"circle-opacity":U.mo})}if(I&&z&&(j.filter=["!",["has","point_count"]]),(D||P)&&(Y.geojson=function(ee,Q){for(var J=Q._fullLayout,K=ee[0].trace,X=K.marker||{},ie=X.symbol,se=X.angle,ae=ie!=="circle"?d(ie):u,ue=se!=="auto"?d(se,!0):u,ve=t.hasText(K)?d(K.text):u,ye=[],pe=0;pe<ee.length;pe++){var de=ee[pe];if(!x(de.lonlat)){var me,ke=K.texttemplate;if(ke){var Ce=Array.isArray(ke)?ke[pe]||"":ke,ge=K._module.formatLabels(de,K,J),oe={};n(oe,K,de.i);var re=K._meta||{};me=k.texttemplateString(Ce,ge,J._d3locale,oe,de,re)}else me=ve(pe);me&&(me=me.replace(o,"").replace(l,`
`)),ye.push({type:"Feature",geometry:{type:"Point",coordinates:de.lonlat},properties:{symbol:ae(pe),angle:ue(pe),text:me}})}}return{type:"FeatureCollection",features:ye}}(y,m),k.extendFlat(Y.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),D&&(k.extendFlat(Y.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&_.marker.angle!=="auto"&&k.extendFlat(Y.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),Y.layout["icon-allow-overlap"]=_.marker.allowoverlap,k.extendFlat(Y.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),P)){var q=(_.marker||{}).size,te=r(_.textposition,q);k.extendFlat(Y.layout,{"text-size":_.textfont.size,"text-anchor":te.anchor,"text-offset":te.offset,"text-font":g(_)}),k.extendFlat(Y.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return B}},15752:function(F,C,e){"use strict";var T=e(3400),k=e(43028),a=e(74428),w=e(66828),b=e(124),f=e(70840),s=e(31512),t=e(79732).isSupportedFont;F.exports=function(i,r,n,o){function l(_,h){return T.coerce(i,r,s,_,h)}function c(_,h){return T.coerce2(i,r,s,_,h)}var d=function(_,h,S){var A=S("lon")||[],E=S("lat")||[],P=Math.min(A.length,E.length);return h._length=P,P}(0,r,l);if(d){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),k.hasMarkers(r)){a(i,r,n,o,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var u=r.marker;u.symbol!=="circle"&&(T.isArrayOrTypedArray(u.size)&&(u.size=u.size[0]),T.isArrayOrTypedArray(u.color)&&(u.color=u.color[0]))}k.hasLines(r)&&(w(i,r,n,o,l,{noDash:!0}),l("connectgaps"));var x=c("cluster.maxzoom"),p=c("cluster.step"),g=c("cluster.color",r.marker&&r.marker.color||n),m=c("cluster.size"),y=c("cluster.opacity");if(l("cluster.enabled",x!==!1||p!==!1||g!==!1||m!==!1||y!==!1)||k.hasText(r)){var v=o.font.family;b(i,r,o,l,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:t(v)?v:"Open Sans Regular",weight:o.font.weight,style:o.font.style,size:o.font.size,color:o.font.color}})}l("fill"),r.fill!=="none"&&f(i,r,n,l),T.coerceSelectionMarkerOpacity(r,l)}else r.visible=!1}},37920:function(F){"use strict";F.exports=function(C,e){return C.lon=e.lon,C.lat=e.lat,C}},11960:function(F,C,e){"use strict";var T=e(54460);F.exports=function(k,a,w){var b={},f=w[a.subplot]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=T.tickText(f,f.c2l(s[0]),!0).text,b.latLabel=T.tickText(f,f.c2l(s[1]),!0).text,b}},63312:function(F,C,e){"use strict";var T=e(93024),k=e(3400),a=e(44928),w=k.fillText,b=e(39032).BADNUM,f=e(47552).traceLayerPrefix;function s(t,i,r){if(!t.hovertemplate){var n=(i.hi||t.hoverinfo).split("+"),o=n.indexOf("all")!==-1,l=n.indexOf("lon")!==-1,c=n.indexOf("lat")!==-1,d=i.lonlat,u=[];return o||l&&c?u.push("("+x(d[1])+", "+x(d[0])+")"):l?u.push(r.lon+x(d[0])):c&&u.push(r.lat+x(d[1])),(o||n.indexOf("text")!==-1)&&w(i,t,u),u.join("<br>")}function x(p){return p+"\xB0"}}F.exports={hoverPoints:function(t,i,r){var n=t.cd,o=n[0].trace,l=t.xa,c=t.ya,d=t.subplot,u=[],x=f+o.uid+"-circle",p=o.cluster&&o.cluster.enabled;if(p){var g=d.map.queryRenderedFeatures(null,{layers:[x]});u=g.map(function(D){return D.id})}var m=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),y=i-m;if(T.getClosest(n,function(D){var z=D.lonlat;if(z[0]===b||p&&u.indexOf(D.i+1)===-1)return 1/0;var V=k.modHalf(z[0],360),O=z[1],j=d.project([V,O]),Y=j.x-l.c2p([y,O]),B=j.y-c.c2p([V,r]),U=Math.max(3,D.mrc||0);return Math.max(Math.sqrt(Y*Y+B*B)-U,1-3/U)},t),t.index!==!1){var v=n[t.index],_=v.lonlat,h=[k.modHalf(_[0],360)+m,_[1]],S=l.c2p(h),A=c.c2p(h),E=v.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=A-E,t.y1=A+E;var P={};P[o.subplot]={_subplot:d};var I=o._module.formatLabels(v,o,P);return t.lonLabel=I.lonLabel,t.latLabel=I.latLabel,t.color=a(o,v),t.extraText=s(o,v,n[0].t.labels),t.hovertemplate=o.hovertemplate,[t]}},getExtraText:s}},11572:function(F,C,e){"use strict";F.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(T,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(F,C,e){"use strict";var T=e(3400),k=e(59392),a=e(47552).traceLayerPrefix,w={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,t,i,r){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=i,this.isHidden=r,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:a+t+"-fill",line:a+t+"-line",circle:a+t+"-circle",symbol:a+t+"-symbol",cluster:a+t+"-cluster",clusterCount:a+t+"-cluster-count"},this.below=null}var f=b.prototype;f.addSource=function(s,t,i){var r={type:"geojson",data:t.geojson};i&&i.enabled&&T.extendFlat(r,{cluster:!0,clusterMaxZoom:i.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[s]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],r)},f.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},f.addLayer=function(s,t,i){var r={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(r.filter=t.filter);for(var n,o=this.layerIds[s],l=this.subplot.getMapLayers(),c=0;c<l.length;c++)if(l[c].id===o){n=!0;break}n?(this.subplot.setOptions(o,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(o,"setPaintProperty",r.paint)):this.subplot.addLayer(r,i)},f.update=function(s){var t=s[0].trace,i=this.subplot,r=i.map,n=k(i.gd,s),o=i.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),c=!!this.clusterEnabled,d=this;function u(y){c?function(v){for(var _=w.cluster,h=_.length-1;h>=0;h--){var S=_[h];r.removeLayer(d.layerIds[S])}v||r.removeSource(d.sourceIds.circle)}(y):function(v){for(var _=w.nonCluster,h=_.length-1;h>=0;h--){var S=_[h];r.removeLayer(d.layerIds[S]),v||r.removeSource(d.sourceIds[S])}}(y)}function x(y){l?function(v){v||d.addSource("circle",n.circle,t.cluster);for(var _=w.cluster,h=0;h<_.length;h++){var S=_[h],A=n[S];d.addLayer(S,A,o)}}(y):function(v){for(var _=w.nonCluster,h=0;h<_.length;h++){var S=_[h],A=n[S];v||d.addSource(S,A),d.addLayer(S,A,o)}}(y)}function p(){for(var y=l?w.cluster:w.nonCluster,v=0;v<y.length;v++){var _=y[v],h=n[_];h&&(i.setOptions(d.layerIds[_],"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&(_!=="cluster"&&d.setSourceData(_,h),i.setOptions(d.layerIds[_],"setPaintProperty",h.paint)))}}var g=this.isHidden,m=t.visible!==!0;m?g||u():g?m||x():c!==l?(u(),x()):(this.below!==o&&(u(!0),x(!0)),p()),this.clusterEnabled=l,this.isHidden=m,this.below=o,s[0].trace._glTrace=this},f.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?w.cluster:w.nonCluster,i=t.length-1;i>=0;i--){var r=t[i];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},F.exports=function(s,t){var i,r,n,o=t[0].trace,l=o.cluster&&o.cluster.enabled,c=o.visible!==!0,d=new b(s,o.uid,l,c),u=k(s.gd,t),x=d.below=s.belowLookup["trace-"+o.uid];if(l)for(d.addSource("circle",u.circle,o.cluster),i=0;i<w.cluster.length;i++)n=u[r=w.cluster[i]],d.addLayer(r,n,x);else for(i=0;i<w.nonCluster.length;i++)n=u[r=w.nonCluster[i]],d.addSource(r,n,o.cluster),d.addLayer(r,n,x);return t[0].trace._glTrace=d,d}},404:function(F,C,e){"use strict";var T=e(3400),k=e(43028),a=e(39032).BADNUM;F.exports=function(w,b){var f,s=w.cd,t=w.xaxis,i=w.yaxis,r=[],n=s[0].trace;if(!k.hasMarkers(n))return[];if(b===!1)for(f=0;f<s.length;f++)s[f].selected=0;else for(f=0;f<s.length;f++){var o=s[f],l=o.lonlat;if(l[0]!==a){var c=[T.modHalf(l[0],360),l[1]],d=[t.c2p(c),i.c2p(c)];b.contains(d,null,f,w)?(r.push({pointNumber:f,lon:l[0],lat:l[1]}),o.selected=1):o.selected=0}}return r}},8319:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(21776).Gw,a=e(92880).extendFlat,w=e(98304),b=e(52904),f=e(45464),s=b.line;F.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:a({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:a({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:a({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w(),hoverinfo:a({},f.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:T(),selected:b.selected,unselected:b.unselected}},58320:function(F,C,e){"use strict";var T=e(38248),k=e(39032).BADNUM,a=e(54460),w=e(90136),b=e(20148),f=e(4500),s=e(16356).calcMarkerSize;F.exports=function(t,i){for(var r=t._fullLayout,n=i.subplot,o=r[n].radialaxis,l=r[n].angularaxis,c=o.makeCalcdata(i,"r"),d=l.makeCalcdata(i,"theta"),u=i._length,x=new Array(u),p=0;p<u;p++){var g=c[p],m=d[p],y=x[p]={};T(g)&&T(m)?(y.r=g,y.theta=m):y.r=k}var v=s(i,u);return i._extremes.x=a.findExtremes(o,c,{ppad:v}),w(t,i),b(x,i),f(x,i),x}},85968:function(F,C,e){"use strict";var T=e(3400),k=e(43028),a=e(74428),w=e(66828),b=e(11731),f=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function r(n,o,l,c){var d,u=c("r"),x=c("theta");if(T.isTypedArray(u)&&(o.r=u=Array.from(u)),T.isTypedArray(x)&&(o.theta=x=Array.from(x)),u)x?d=Math.min(u.length,x.length):(d=u.length,c("theta0"),c("dtheta"));else{if(!x)return 0;d=o.theta.length,c("r0"),c("dr")}return o._length=d,d}F.exports={handleRThetaDefaults:r,supplyDefaults:function(n,o,l,c){function d(p,g){return T.coerce(n,o,i,p,g)}var u=r(0,o,0,d);if(u){d("thetaunit"),d("mode",u<t?"lines+markers":"lines"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate"),k.hasMarkers(o)&&a(n,o,l,c,d,{gradient:!0}),k.hasLines(o)&&(w(n,o,l,c,d,{backoff:!0}),b(n,o,d),d("connectgaps")),k.hasText(o)&&(d("texttemplate"),f(n,o,c,d));var x=[];(k.hasMarkers(o)||k.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),x.push("points")),d("fill"),o.fill!=="none"&&(s(n,o,l,d),k.hasLines(o)||b(n,o,d)),o.fill!=="tonext"&&o.fill!=="toself"||x.push("fills"),d("hoveron",x.join("+")||"points"),T.coerceSelectionMarkerOpacity(o,d)}else o.visible=!1}}},22852:function(F,C,e){"use strict";var T=e(3400),k=e(54460);F.exports=function(a,w,b){var f,s,t={},i=b[w.subplot]._subplot;i?(f=i.radialAxis,s=i.angularAxis):(f=(i=b[w.subplot]).radialaxis,s=i.angularaxis);var r=f.c2l(a.r);t.rLabel=k.tickText(f,r,!0).text;var n=s.thetaunit==="degrees"?T.rad2deg(a.theta):a.theta;return t.thetaLabel=k.tickText(s,n,!0).text,t}},8504:function(F,C,e){"use strict";var T=e(98723);function k(a,w,b,f){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="r",t._hovertitle="\u03B8";var i={};i[w.subplot]={_subplot:b};var r=w._module.formatLabels(a,w,i);f.rLabel=r.rLabel,f.thetaLabel=r.thetaLabel;var n=a.hi||w.hoverinfo,o=[];function l(d,u){o.push(d._hovertitle+": "+u)}if(!w.hovertemplate){var c=n.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&l(s,f.rLabel),c.indexOf("theta")!==-1&&l(t,f.thetaLabel),c.indexOf("text")!==-1&&f.text&&(o.push(f.text),delete f.text),f.extraText=o.join("<br>")}}F.exports={hoverPoints:function(a,w,b,f){var s=T(a,w,b,f);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=a.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},76924:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(F,C,e){"use strict";var T=e(96504),k=e(39032).BADNUM;F.exports=function(a,w,b){for(var f=w.layers.frontplot.select("g.scatterlayer"),s=w.xaxis,t=w.yaxis,i={xaxis:s,yaxis:t,plot:w.framework,layerClipId:w._hasClipOnAxisFalse?w.clipIds.forTraces:null},r=w.radialAxis,n=w.angularAxis,o=0;o<b.length;o++)for(var l=b[o],c=0;c<l.length;c++){c===0&&(l[0].trace._xA=s,l[0].trace._yA=t);var d=l[c],u=d.r;if(u===k)d.x=d.y=k;else{var x=r.c2g(u),p=n.c2g(d.theta);d.x=x*Math.cos(p),d.y=x*Math.sin(p)}}T(a,i,b,f)}},24396:function(F,C,e){"use strict";var T=e(8319),k=e(2876),a=e(21776).Gw;F.exports={mode:T.mode,r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,text:T.text,texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,hovertemplate:T.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:T.hoverinfo,selected:T.selected,unselected:T.unselected}},27160:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(F,C,e){"use strict";var T=e(90136),k=e(16356).calcMarkerSize,a=e(84236),w=e(54460),b=e(67072).TOO_MANY_POINTS;F.exports=function(f,s){var t=f._fullLayout,i=s.subplot,r=t[i].radialaxis,n=t[i].angularaxis,o=s._r=r.makeCalcdata(s,"r"),l=s._theta=n.makeCalcdata(s,"theta"),c=s._length,d={};c<o.length&&(o=o.slice(0,c)),c<l.length&&(l=l.slice(0,c)),d.r=o,d.theta=l,T(f,s);var u,x=d.opts=a.style(f,s);return c<b?u=k(s,c):x.marker&&(u=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=w.findExtremes(r,o,{ppad:u}),[{x:!1,y:!1,t:d,trace:s}]}},98608:function(F,C,e){"use strict";var T=e(3400),k=e(43028),a=e(85968).handleRThetaDefaults,w=e(74428),b=e(66828),f=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);F.exports=function(r,n,o,l){function c(u,x){return T.coerce(r,n,i,u,x)}var d=a(r,n,l,c);d?(c("thetaunit"),c("mode",d<t?"lines+markers":"lines"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),k.hasMarkers(n)&&w(r,n,o,l,c,{noAngleRef:!0,noStandOff:!0}),k.hasLines(n)&&(b(r,n,o,l,c),c("connectgaps")),k.hasText(n)&&(c("texttemplate"),f(r,n,l,c,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),c("fill"),n.fill!=="none"&&s(r,n,o,c),T.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},94120:function(F,C,e){"use strict";var T=e(22852);F.exports=function(k,a,w){var b=k.i;return"r"in k||(k.r=a._r[b]),"theta"in k||(k.theta=a._theta[b]),T(k,a,w)}},1600:function(F,C,e){"use strict";var T=e(41272),k=e(8504).makeHoverPointText;F.exports={hoverPoints:function(a,w,b,f){var s=a.cd[0].t,t=s.r,i=s.theta,r=T.hoverPoints(a,w,b,f);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var o=a.subplot,l=n.cd[n.index],c=n.trace;if(l.r=t[n.index],l.theta=i[n.index],o.isPtInside(l))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(l,c,o,n),r}}}},62944:function(F,C,e){"use strict";var T=e(27160);T.plot=e(56512),F.exports=T},56512:function(F,C,e){"use strict";var T=e(3108),k=e(38248),a=e(89876),w=e(74588),b=e(84236),f=e(3400),s=e(67072).TOO_MANY_POINTS;F.exports=function(t,i,r){if(r.length){var n=i.radialAxis,o=i.angularAxis,l=w(t,i);return r.forEach(function(c){if(c&&c[0]&&c[0].trace){var d,u=c[0],x=u.trace,p=u.t,g=x._length,m=p.r,y=p.theta,v=p.opts,_=m.slice(),h=y.slice();for(d=0;d<m.length;d++)i.isPtInside({r:m[d],theta:y[d]})||(_[d]=NaN,h[d]=NaN);var S=new Array(2*g),A=Array(g),E=Array(g);for(d=0;d<g;d++){var P,I,D=_[d];if(k(D)){var z=n.c2g(D),V=o.c2g(h[d],x.thetaunit);P=z*Math.cos(V),I=z*Math.sin(V)}else P=I=NaN;A[d]=S[2*d]=P,E[d]=S[2*d+1]=I}p.tree=T(S),v.marker&&g>=s&&(v.marker.cluster=p.tree),v.marker&&(v.markerSel.positions=v.markerUnsel.positions=v.marker.positions=S),v.line&&S.length>1&&f.extendFlat(v.line,b.linePositions(t,x,S)),v.text&&(f.extendFlat(v.text,{positions:S},b.textPosition(t,x,v.text,v.marker)),f.extendFlat(v.textSel,{positions:S},b.textPosition(t,x,v.text,v.markerSel)),f.extendFlat(v.textUnsel,{positions:S},b.textPosition(t,x,v.text,v.markerUnsel))),v.fill&&!l.fill2d&&(l.fill2d=!0),v.marker&&!l.scatter2d&&(l.scatter2d=!0),v.line&&!l.line2d&&(l.line2d=!0),v.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(v.line),l.fillOptions.push(v.fill),l.markerOptions.push(v.marker),l.markerSelectedOptions.push(v.markerSel),l.markerUnselectedOptions.push(v.markerUnsel),l.textOptions.push(v.text),l.textSelectedOptions.push(v.textSel),l.textUnselectedOptions.push(v.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),p.x=A,p.y=E,p.rawx=A,p.rawy=E,p.r=m,p.theta=y,p.positions=S,p._scene=l,p.index=l.count,l.count++}}),a(t,i,r)}},F.exports.reglPrecompiled={}},69496:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(21776).Gw,a=e(92880).extendFlat,w=e(98304),b=e(52904),f=e(45464),s=b.line;F.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:a({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:a({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:a({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w(),hoverinfo:a({},f.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:T(),selected:b.selected,unselected:b.unselected}},47507:function(F,C,e){"use strict";var T=e(38248),k=e(39032).BADNUM,a=e(90136),w=e(20148),b=e(4500),f=e(16356).calcMarkerSize;F.exports=function(s,t){for(var i=s._fullLayout,r=t.subplot,n=i[r].realaxis,o=i[r].imaginaryaxis,l=n.makeCalcdata(t,"real"),c=o.makeCalcdata(t,"imag"),d=t._length,u=new Array(d),x=0;x<d;x++){var p=l[x],g=c[x],m=u[x]={};T(p)&&T(g)?(m.real=p,m.imag=g):m.real=k}return f(t,d),a(s,t),w(u,t),b(u,t),u}},76716:function(F,C,e){"use strict";var T=e(3400),k=e(43028),a=e(74428),w=e(66828),b=e(11731),f=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);F.exports=function(r,n,o,l){function c(x,p){return T.coerce(r,n,i,x,p)}var d=function(x,p,g,m){var y,v=m("real"),_=m("imag");return v&&_&&(y=Math.min(v.length,_.length)),T.isTypedArray(v)&&(p.real=v=Array.from(v)),T.isTypedArray(_)&&(p.imag=_=Array.from(_)),p._length=y,y}(0,n,0,c);if(d){c("mode",d<t?"lines+markers":"lines"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),k.hasMarkers(n)&&a(r,n,o,l,c,{gradient:!0}),k.hasLines(n)&&(w(r,n,o,l,c,{backoff:!0}),b(r,n,c),c("connectgaps")),k.hasText(n)&&(c("texttemplate"),f(r,n,l,c));var u=[];(k.hasMarkers(n)||k.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),u.push("points")),c("fill"),n.fill!=="none"&&(s(r,n,o,c),k.hasLines(n)||b(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||u.push("fills"),c("hoveron",u.join("+")||"points"),T.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},49504:function(F,C,e){"use strict";var T=e(54460);F.exports=function(k,a,w){var b={},f=w[a.subplot]._subplot;return b.realLabel=T.tickText(f.radialAxis,k.real,!0).text,b.imagLabel=T.tickText(f.angularAxis,k.imag,!0).text,b}},25292:function(F,C,e){"use strict";var T=e(98723);function k(a,w,b,f){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="real",t._hovertitle="imag";var i={};i[w.subplot]={_subplot:b};var r=w._module.formatLabels(a,w,i);f.realLabel=r.realLabel,f.imagLabel=r.imagLabel;var n=a.hi||w.hoverinfo,o=[];function l(d,u){o.push(d._hovertitle+": "+u)}if(!w.hovertemplate){var c=n.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&l(s,f.realLabel),c.indexOf("imag")!==-1&&l(t,f.imagLabel),c.indexOf("text")!==-1&&f.text&&(o.push(f.text),delete f.text),f.extraText=o.join("<br>")}}F.exports={hoverPoints:function(a,w,b,f){var s=T(a,w,b,f);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=a.subplot,r=t.cd[t.index],n=t.trace;if(i.isPtInside(r))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(r,n,i,t),t.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},95443:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(F,C,e){"use strict";var T=e(96504),k=e(39032).BADNUM,a=e(36416).smith;F.exports=function(w,b,f){for(var s=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,i=b.yaxis,r={xaxis:t,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},n=0;n<f.length;n++)for(var o=f[n],l=0;l<o.length;l++){l===0&&(o[0].trace._xA=t,o[0].trace._yA=i);var c=o[l],d=c.real;if(d===k)c.x=c.y=k;else{var u=a([d,c.imag]);c.x=u[0],c.y=u[1]}}T(w,r,f,s)}},5896:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(21776).Gw,a=e(98304),w=e(52904),b=e(45464),f=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=w.marker,r=w.line,n=i.line;F.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},w.mode,{dflt:"markers"}),text:t({},w.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},w.hovertext,{}),line:{color:r.color,width:r.width,dash:s,backoff:r.backoff,shape:t({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:w.connectgaps,cliponaxis:w.cliponaxis,fill:t({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:a(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:n.width,editType:"calc"},f("marker.line")),gradient:i.gradient,editType:"calc"},f("marker")),textfont:w.textfont,textposition:w.textposition,selected:w.selected,unselected:w.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:w.hoveron,hovertemplate:T()}},34335:function(F,C,e){"use strict";var T=e(38248),k=e(90136),a=e(20148),w=e(4500),b=e(16356).calcMarkerSize,f=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};F.exports=function(t,i){var r,n,o,l,c,d,u=t._fullLayout[i.subplot].sum,x=i.sum||u,p={a:i.a,b:i.b,c:i.c};for(r=0;r<f.length;r++)if(!p[o=f[r]]){for(c=p[s[o][0]],d=p[s[o][1]],l=new Array(c.length),n=0;n<c.length;n++)l[n]=x-c[n]-d[n];p[o]=l}var g,m,y,v,_,h,S=i._length,A=new Array(S);for(r=0;r<S;r++)g=p.a[r],m=p.b[r],y=p.c[r],T(g)&&T(m)&&T(y)?((v=u/((g=+g)+(m=+m)+(y=+y)))!=1&&(g*=v,m*=v,y*=v),h=g,_=y-m,A[r]={x:_,y:h,a:g,b:m,c:y}):A[r]={x:!1,y:!1};return b(i,S),k(t,i),a(A,i),w(A,i),A}},84256:function(F,C,e){"use strict";var T=e(3400),k=e(88200),a=e(43028),w=e(74428),b=e(66828),f=e(11731),s=e(124),t=e(70840),i=e(5896);F.exports=function(r,n,o,l){function c(m,y){return T.coerce(r,n,i,m,y)}var d,u=c("a"),x=c("b"),p=c("c");if(u?(d=u.length,x?(d=Math.min(d,x.length),p&&(d=Math.min(d,p.length))):d=p?Math.min(d,p.length):0):x&&p&&(d=Math.min(x.length,p.length)),d){n._length=d,c("sum"),c("text"),c("hovertext"),n.hoveron!=="fills"&&c("hovertemplate"),c("mode",d<k.PTS_LINESONLY?"lines+markers":"lines"),a.hasMarkers(n)&&w(r,n,o,l,c,{gradient:!0}),a.hasLines(n)&&(b(r,n,o,l,c,{backoff:!0}),f(r,n,c),c("connectgaps")),a.hasText(n)&&(c("texttemplate"),s(r,n,l,c));var g=[];(a.hasMarkers(n)||a.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),g.push("points")),c("fill"),n.fill!=="none"&&(t(r,n,o,c),a.hasLines(n)||f(r,n,c)),n.fill!=="tonext"&&n.fill!=="toself"||g.push("fills"),c("hoveron",g.join("+")||"points"),T.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},97476:function(F){"use strict";F.exports=function(C,e,T,k,a){if(e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),k[a]){var w=k[a];C.a=w.a,C.b=w.b,C.c=w.c}else C.a=e.a,C.b=e.b,C.c=e.c;return C}},90404:function(F,C,e){"use strict";var T=e(54460);F.exports=function(k,a,w){var b={},f=w[a.subplot]._subplot;return b.aLabel=T.tickText(f.aaxis,k.a,!0).text,b.bLabel=T.tickText(f.baxis,k.b,!0).text,b.cLabel=T.tickText(f.caxis,k.c,!0).text,b}},26596:function(F,C,e){"use strict";var T=e(98723);F.exports=function(k,a,w,b){var f=T(k,a,w,b);if(f&&f[0].index!==!1){var s=f[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,i=k.xa._length,r=i*t/2,n=i-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),f}var o=s.cd[s.index],l=s.trace,c=s.subplot;s.a=o.a,s.b=o.b,s.c=o.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var d={};d[l.subplot]={_subplot:c};var u=l._module.formatLabels(o,l,d);s.aLabel=u.aLabel,s.bLabel=u.bLabel,s.cLabel=u.cLabel;var x=o.hi||l.hoverinfo,p=[];if(!l.hovertemplate){var g=x.split("+");g.indexOf("all")!==-1&&(g=["a","b","c"]),g.indexOf("a")!==-1&&m(c.aaxis,s.aLabel),g.indexOf("b")!==-1&&m(c.baxis,s.bLabel),g.indexOf("c")!==-1&&m(c.caxis,s.cLabel)}return s.extraText=p.join("<br>"),s.hovertemplate=l.hovertemplate,f}function m(y,v){p.push(y._hovertitle+": "+v)}}},34864:function(F,C,e){"use strict";F.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(F,C,e){"use strict";var T=e(96504);F.exports=function(k,a,w){var b=a.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var f=a.xaxis,s=a.yaxis,t={xaxis:f,yaxis:s,plot:b,layerClipId:a._hasClipOnAxisFalse?a.clipIdRelative:null},i=a.layers.frontplot.select("g.scatterlayer"),r=0;r<w.length;r++){var n=w[r];n.length&&(n[0].trace._xA=f,n[0].trace._yA=s)}T(k,t,w,i)}},44524:function(F,C,e){"use strict";var T=e(52904),k=e(49084),a=e(29736).axisHoverFormat,w=e(21776).Ks,b=e(2876),f=e(33816).idRegex,s=e(31780).templatedArray,t=e(92880).extendFlat,i=T.marker,r=i.line,n=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},r.width,{editType:"calc"}),editType:"calc"}),o=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:n,editType:"calc"});function l(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:f[c],editType:"plot"}}}o.color.editType=o.cmin.editType=o.cmax.editType="style",F.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:w(),xhoverformat:a("x"),yhoverformat:a("y"),marker:o,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},28888:function(F,C,e){"use strict";var T=e(24040),k=e(12704);F.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},T.register(k)},99332:function(F,C,e){"use strict";var T=e(13472),k=e(24040),a=e(5048),w=e(84888)._M,b=e(57952),f=e(79811).getFromId,s=e(54460).shouldShowZeroLine,t="splom",i={};function r(o,l,c){for(var d=c.matrixOptions.data.length,u=l._visibleDims,x=c.viewOpts.ranges=new Array(d),p=0;p<u.length;p++){var g=u[p],m=x[p]=new Array(4),y=f(o,l._diag[g][0]);y&&(m[0]=y.r2l(y.range[0]),m[2]=y.r2l(y.range[1]));var v=f(o,l._diag[g][1]);v&&(m[1]=v.r2l(v.range[0]),m[3]=v.r2l(v.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:x},{ranges:x}):c.matrix.update({ranges:x})}function n(o){var l=o._fullLayout,c=l._glcanvas.data()[0].regl,d=l._splomGrid;d||(d=l._splomGrid=T(c)),d.update(function(u){var x,p=u._context.plotGlPixelRatio,g=u._fullLayout,m=g._size,y=[0,0,g.width*p,g.height*p],v={};function _(q,te,ee,Q,J,K){ee*=p,Q*=p,J*=p,K*=p;var X=te[q+"color"],ie=te[q+"width"],se=String(X+ie);se in v?v[se].data.push(NaN,NaN,ee,Q,J,K):v[se]={data:[ee,Q,J,K],join:"rect",thickness:ie*p,color:X,viewport:y,range:y,overlay:!1}}for(x in g._splomSubplots){var h,S,A=g._plots[x],E=A.xaxis,P=A.yaxis,I=E._gridVals,D=P._gridVals,z=E._offset,V=E._length,O=P._length,j=m.b+P.domain[0]*m.h,Y=-P._m,B=-Y*P.r2l(P.range[0],P.calendar);if(E.showgrid)for(x=0;x<I.length;x++)h=z+E.l2p(I[x].x),_("grid",E,h,j,h,j+O);if(P.showgrid)for(x=0;x<D.length;x++)_("grid",P,z,S=j+B+Y*D[x].x,z+V,S);s(u,E,P)&&(h=z+E.l2p(0),_("zeroline",E,h,j,h,j+O)),s(u,P,E)&&_("zeroline",P,z,S=j+B+0,z+V,S)}var U=[];for(x in v)U.push(v[x]);return U}(o))}F.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(o){var l=o._fullLayout,c=k.getModule(t),d=w(o.calcdata,c)[0];a(o,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(l._hasOnlyLargeSploms&&n(o),c.plot(o,{},d))},drag:function(o){var l=o.calcdata,c=o._fullLayout;c._hasOnlyLargeSploms&&n(o);for(var d=0;d<l.length;d++){var u=l[d][0].trace,x=c._splomScenes[u.uid];u.type==="splom"&&x&&x.matrix&&r(o,u,x)}},updateGrid:n,clean:function(o,l,c,d){var u,x={};if(d._splomScenes){for(u=0;u<o.length;u++){var p=o[u];p.type==="splom"&&(x[p.uid]=1)}for(u=0;u<c.length;u++){var g=c[u];if(!x[g.uid]){var m=d._splomScenes[g.uid];m&&m.destroy&&m.destroy(),d._splomScenes[g.uid]=null,delete d._splomScenes[g.uid]}}}Object.keys(d._splomScenes||{}).length===0&&delete d._splomScenes,d._splomGrid&&!l._hasOnlyLargeSploms&&d._hasOnlyLargeSploms&&(d._splomGrid.destroy(),d._splomGrid=null,delete d._splomGrid),b.clean(o,l,c,d)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},66821:function(F,C,e){"use strict";var T=e(3400),k=e(79811),a=e(16356).calcMarkerSize,w=e(16356).calcAxisExpansion,b=e(90136),f=e(84236).markerSelection,s=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,r=e(67072).TOO_MANY_POINTS;F.exports=function(n,o){var l,c,d,u,x,p,g=o.dimensions,m=o._length,y={},v=y.cdata=[],_=y.data=[],h=o._visibleDims=[];function S(E,P){for(var I=E.makeCalcdata({v:P.values,vcalendar:o.calendar},"v"),D=0;D<I.length;D++)I[D]=I[D]===i?NaN:I[D];v.push(I),_.push(E.type==="log"?T.simpleMap(I,E.c2l):I)}for(l=0;l<g.length;l++)if((d=g[l]).visible){if(u=k.getFromId(n,o._diag[l][0]),x=k.getFromId(n,o._diag[l][1]),u&&x&&u.type!==x.type){T.log("Skipping splom dimension "+l+" with conflicting axis types");continue}u?(S(u,d),x&&x.type==="category"&&(x._categories=u._categories.slice())):S(x,d),h.push(l)}for(b(n,o),T.extendFlat(y,s(n,o)),p=v.length*m>r?y.sizeAvg||Math.max(y.size,3):a(o,m),c=0;c<h.length;c++)d=g[l=h[c]],u=k.getFromId(n,o._diag[l][0])||{},x=k.getFromId(n,o._diag[l][1])||{},w(n,o,u,x,v[c],v[c],p);var A=t(n,o);return A.matrix||(A.matrix=!0),A.matrixOptions=y,A.selectedOptions=f(n,o,o.selected),A.unselectedOptions=f(n,o,o.unselected),[{x:!1,y:!1,t:{},trace:o}]}},69544:function(F,C,e){"use strict";var T=e(3400),k=e(51272),a=e(44524),w=e(43028),b=e(74428),f=e(26284),s=e(80088).isOpenSymbol;function t(i,r){function n(l,c){return T.coerce(i,r,a.dimensions,l,c)}n("label");var o=n("values");o&&o.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}F.exports=function(i,r,n,o){function l(m,y){return T.coerce(i,r,a,m,y)}var c=k(i,r,{name:"dimensions",handleItemDefaults:t}),d=l("diagonal.visible"),u=l("showupperhalf"),x=l("showlowerhalf");if(f(r,c,"values")&&(d||u||x)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),b(i,r,n,o,l,{noAngleRef:!0,noStandOff:!0});var p=s(r.marker.symbol),g=w.isBubble(r);l("marker.line.width",p||g?1:0),function(m,y,v,_){var h,S,A=y.dimensions,E=A.length,P=y.showupperhalf,I=y.showlowerhalf,D=y.diagonal.visible,z=new Array(E),V=new Array(E);for(h=0;h<E;h++){var O=h?h+1:"";z[h]="x"+O,V[h]="y"+O}var j=_("xaxes",z),Y=_("yaxes",V),B=y._diag=new Array(E);y._xaxes={},y._yaxes={};var U=[],q=[];function te(ue,ve,ye,pe){if(ue){var de=ue.charAt(0),me=v._splomAxes[de];if(y["_"+de+"axes"][ue]=1,pe.push(ue),!(ue in me)){var ke=me[ue]={};ye&&(ke.label=ye.label||"",ye.visible&&ye.axis&&(ye.axis.type&&(ke.type=ye.axis.type),ye.axis.matches&&(ke.matches=ve)))}}}var ee=!D&&!I,Q=!D&&!P;for(y._axesDim={},h=0;h<E;h++){var J=A[h],K=h===0,X=h===E-1,ie=K&&ee||X&&Q?void 0:j[h],se=K&&Q||X&&ee?void 0:Y[h];te(ie,se,J,U),te(se,ie,J,q),B[h]=[ie,se],y._axesDim[ie]=h,y._axesDim[se]=h}for(h=0;h<U.length;h++)for(S=0;S<q.length;S++){var ae=U[h]+q[S];h>S&&P||h<S&&I?v._splomSubplots[ae]=1:h!==S||!D&&I&&P||(v._splomSubplots[ae]=1)}(!I||!D&&P&&I)&&(v._splomGridDflt.xside="bottom",v._splomGridDflt.yside="left")}(0,r,o,l),T.coerceSelectionMarkerOpacity(r,l)}else r.visible=!1}},83156:function(F,C,e){"use strict";var T=e(3400),k=e(90136),a=e(84236).markerStyle;F.exports=function(w,b){var f=b.trace,s=w._fullLayout._splomScenes[f.uid];if(s){k(w,f),T.extendFlat(s.matrixOptions,a(w,f));var t=T.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},50328:function(F,C){"use strict";C.getDimIndex=function(e,T){for(var k=T._id,a={x:0,y:1}[k.charAt(0)],w=e._visibleDims,b=0;b<w.length;b++){var f=w[b];if(e._diag[f][a]===k)return b}return!1}},72248:function(F,C,e){"use strict";var T=e(50328),k=e(41272).calcHover,a=e(54460).getFromId,w=e(92880).extendFlat;function b(f,s,t,i){var r=f.cd[0].trace,n=f.scene.matrixOptions.cdata,o=f.xa,l=f.ya,c=o.c2p(s),d=l.c2p(t),u=f.distance,x=T.getDimIndex(r,o),p=T.getDimIndex(r,l);if(x===!1||p===!1)return[f];for(var g,m,y=n[x],v=n[p],_=u,h=0;h<y.length;h++)if(!i||h===f.index){var S=y[h],A=v[h],E=o.c2p(S)-c,P=l.c2p(A)-d,I=Math.sqrt(E*E+P*P);(i||I<_)&&(_=m=I,g=h)}return f.index=g,f.distance=_,f.dxy=m,g===void 0?[f]:[k(f,y,v,r)]}F.exports={hoverPoints:function(f,s,t,i,r){r||(r={});var n=(i||"").charAt(0)==="x",o=(i||"").charAt(0)==="y",l=b(f,s,t);if((n||o)&&r.hoversubplots==="axis"&&l[0])for(var c=(n?f.xa:f.ya)._subplotsWith,d=r.gd,u=w({},f),x=0;x<c.length;x++){var p=c[x];if(p!==f.xa._id+f.ya._id){o?u.xa=a(d,p,"x"):u.ya=a(d,p,"y");var g=b(u,s,t,n||o);l=l.concat(g)}}return l}}},97924:function(F,C,e){"use strict";var T=e(28888);T.basePlotModule=e(99332),F.exports=T},54840:function(F,C,e){"use strict";var T=e(55795),k=e(3400),a=e(79811),w=e(72760).selectMode;function b(f,s){var t,i,r,n,o,l=f._fullLayout,c=l._size,d=s.trace,u=s.t,x=l._splomScenes[d.uid],p=x.matrixOptions,g=p.cdata,m=l._glcanvas.data()[0].regl,y=l.dragmode;if(g.length!==0){p.lower=d.showupperhalf,p.upper=d.showlowerhalf,p.diagonal=d.diagonal.visible;var v=d._visibleDims,_=g.length,h=x.viewOpts={};for(h.ranges=new Array(_),h.domains=new Array(_),o=0;o<v.length;o++){r=v[o];var S=h.ranges[o]=new Array(4),A=h.domains[o]=new Array(4);(t=a.getFromId(f,d._diag[r][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],A[0]=t.domain[0],A[2]=t.domain[1]),(i=a.getFromId(f,d._diag[r][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],A[1]=i.domain[0],A[3]=i.domain[1])}var E=f._context.plotGlPixelRatio,P=c.l*E,I=c.b*E,D=c.w*E,z=c.h*E;h.viewport=[P,I,D+P,z+I],x.matrix===!0&&(x.matrix=T(m));var V=l.clickmode.indexOf("select")>-1,O=!0;if(w(y)||d.selectedpoints||V){var j=d._length;if(d.selectedpoints){x.selectBatch=d.selectedpoints;var Y=d.selectedpoints,B={};for(r=0;r<Y.length;r++)B[Y[r]]=!0;var U=[];for(r=0;r<j;r++)B[r]||U.push(r);x.unselectBatch=U}var q=u.xpx=new Array(_),te=u.ypx=new Array(_);for(o=0;o<v.length;o++){if(r=v[o],t=a.getFromId(f,d._diag[r][0]))for(q[o]=new Array(j),n=0;n<j;n++)q[o][n]=t.c2p(g[o][n]);if(i=a.getFromId(f,d._diag[r][1]))for(te[o]=new Array(j),n=0;n<j;n++)te[o][n]=i.c2p(g[o][n])}if(x.selectBatch.length||x.unselectBatch.length){var ee=k.extendFlat({},p,x.unselectedOptions,h),Q=k.extendFlat({},p,x.selectedOptions,h);x.matrix.update(ee,Q),O=!1}}else u.xpx=u.ypx=null;if(O){var J=k.extendFlat({},p,h);x.matrix.update(J,null)}}}F.exports=function(f,s,t){if(t.length)for(var i=0;i<t.length;i++)b(f,t[i][0])}},72308:function(F,C,e){"use strict";var T=e(3400);F.exports=function(k,a){var w=k._fullLayout,b=a.uid,f=w._splomScenes;f||(f=w._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=f[a.uid];return t||((t=f[b]=T.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||T.extendFlat(t,s),t}},62500:function(F,C,e){"use strict";var T=e(3400),k=T.pushUnique,a=e(43028),w=e(50328);F.exports=function(b,f){var s=b.cd,t=s[0].trace,i=s[0].t,r=b.scene,n=r.matrixOptions.cdata,o=b.xaxis,l=b.yaxis,c=[];if(!r)return c;var d=!a.hasMarkers(t)&&!a.hasText(t);if(t.visible!==!0||d)return c;var u=w.getDimIndex(t,o),x=w.getDimIndex(t,l);if(u===!1||x===!1)return c;var p=i.xpx[u],g=i.ypx[x],m=n[u],y=n[x],v=(b.scene.selectBatch||[]).slice(),_=[];if(f!==!1&&!f.degenerate)for(var h=0;h<m.length;h++)f.contains([p[h],g[h]],null,h,b)?(c.push({pointNumber:h,x:m[h],y:y[h]}),k(v,h)):v.indexOf(h)!==-1?k(v,h):_.push(h);var S=r.matrixOptions;return v.length||_.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,T.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=v,r.unselectBatch=_,c}},90167:function(F,C,e){"use strict";var T=e(49084),k=e(29736).axisHoverFormat,a=e(21776).Ks,w=e(52948),b=e(45464),f=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:f({},b.showlegend,{dflt:!1})};f(s,T("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=w[t]}),s.hoverinfo=f({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,F.exports=s},3832:function(F,C,e){"use strict";var T=e(3400),k=e(47128);function a(f){var s,t,i,r,n,o,l,c,d,u,x,p,g=f._x,m=f._y,y=f._z,v=f._len,_=-1/0,h=1/0,S=-1/0,A=1/0,E=-1/0,P=1/0,I="";for(v&&(l=g[0],d=m[0],x=y[0]),v>1&&(c=g[v-1],u=m[v-1],p=y[v-1]),s=0;s<v;s++)_=Math.max(_,g[s]),h=Math.min(h,g[s]),S=Math.max(S,m[s]),A=Math.min(A,m[s]),E=Math.max(E,y[s]),P=Math.min(P,y[s]),r||g[s]===l||(r=!0,I+="x"),n||m[s]===d||(n=!0,I+="y"),o||y[s]===x||(o=!0,I+="z");r||(I+="x"),n||(I+="y"),o||(I+="z");var D=w(f._x),z=w(f._y),V=w(f._z);I=(I=(I=I.replace("x",(l>c?"-":"+")+"x")).replace("y",(d>u?"-":"+")+"y")).replace("z",(x>p?"-":"+")+"z");var O=function(){v=0,D=[],z=[],V=[]};(!v||v<D.length*z.length*V.length)&&O();var j=function(de){return de==="x"?g:de==="y"?m:y},Y=function(de){return de==="x"?D:de==="y"?z:V},B=function(de){return de[v-1]<de[0]?-1:1},U=j(I[1]),q=j(I[3]),te=j(I[5]),ee=Y(I[1]).length,Q=Y(I[3]).length,J=Y(I[5]).length,K=!1,X=function(de,me,ke){return ee*(Q*de+me)+ke},ie=B(j(I[1])),se=B(j(I[3])),ae=B(j(I[5]));for(s=0;s<J-1;s++){for(t=0;t<Q-1;t++){for(i=0;i<ee-1;i++){var ue=X(s,t,i),ve=X(s,t,i+1),ye=X(s,t+1,i),pe=X(s+1,t,i);if(U[ue]*ie<U[ve]*ie&&q[ue]*se<q[ye]*se&&te[ue]*ae<te[pe]*ae||(K=!0),K)break}if(K)break}if(K)break}return K&&(T.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:h,yMin:A,zMin:P,xMax:_,yMax:S,zMax:E,Xs:D,Ys:z,Zs:V,len:v,fill:I}}function w(f){return T.distinctVals(f).vals}function b(f,s){if(s===void 0&&(s=f.length),T.isTypedArray(f))return f.subarray(0,s);for(var t=[],i=0;i<s;i++)t[i]=+f[i];return t}F.exports={calc:function(f,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var t=a(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var i,r,n,o=0;s.starts&&(i=b(s.starts.x||[]),r=b(s.starts.y||[]),n=b(s.starts.z||[]),o=Math.min(i.length,r.length,n.length)),s._startsX=i||[],s._startsY=r||[],s._startsZ=n||[];var l,c=0,d=1/0;for(l=0;l<s._len;l++){var u=s._u[l],x=s._v[l],p=s._w[l],g=Math.sqrt(u*u+x*x+p*p);c=Math.max(c,g),d=Math.min(d,g)}for(k(f,s,{vals:[d,c],containerStr:"",cLetter:"c"}),l=0;l<o;l++){var m=i[l];t.xMax=Math.max(t.xMax,m),t.xMin=Math.min(t.xMin,m);var y=r[l];t.yMax=Math.max(t.yMax,y),t.yMin=Math.min(t.yMin,y);var v=n[l];t.zMax=Math.max(t.zMax,v),t.zMin=Math.min(t.zMin,v)}s._slen=o,s._normMax=c,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:a}},25668:function(F,C,e){"use strict";var T=e(67792).gl_streamtube3d,k=T.createTubeMesh,a=e(3400),w=e(33040).parseColorScale,b=e(8932).extractOpts,f=e(52094),s={xaxis:0,yaxis:1,zaxis:2};function t(l,c){this.scene=l,this.uid=c,this.mesh=null,this.data=null}var i=t.prototype;function r(l){var c=l.length;return c>2?l.slice(1,c-1):c===2?[(l[0]+l[1])/2]:l}function n(l){var c=l.length;return c===1?[.5,.5]:[l[1]-l[0],l[c-1]-l[c-2]]}function o(l,c){var d=l.fullSceneLayout,u=l.dataScale,x=c._len,p={};function g(ee,Q){var J=d[Q],K=u[s[Q]];return a.simpleMap(ee,function(X){return J.d2l(X)*K})}if(p.vectors=f(g(c._u,"xaxis"),g(c._v,"yaxis"),g(c._w,"zaxis"),x),!x)return{positions:[],cells:[]};var m=g(c._Xs,"xaxis"),y=g(c._Ys,"yaxis"),v=g(c._Zs,"zaxis");if(p.meshgrid=[m,y,v],p.gridFill=c._gridFill,c._slen)p.startingPositions=f(g(c._startsX,"xaxis"),g(c._startsY,"yaxis"),g(c._startsZ,"zaxis"));else{for(var _=y[0],h=r(m),S=r(v),A=new Array(h.length*S.length),E=0,P=0;P<h.length;P++)for(var I=0;I<S.length;I++)A[E++]=[h[P],_,S[I]];p.startingPositions=A}p.colormap=w(c),p.tubeSize=c.sizeref,p.maxLength=c.maxdisplayed;var D=g(c._xbnds,"xaxis"),z=g(c._ybnds,"yaxis"),V=g(c._zbnds,"zaxis"),O=n(m),j=n(y),Y=n(v),B=[[D[0]-O[0],z[0]-j[0],V[0]-Y[0]],[D[1]+O[1],z[1]+j[1],V[1]+Y[1]]],U=T(p,B),q=b(c);U.vertexIntensityBounds=[q.min/c._normMax,q.max/c._normMax];var te=c.lightposition;return U.lightPosition=[te.x,te.y,te.z],U.ambient=c.lighting.ambient,U.diffuse=c.lighting.diffuse,U.specular=c.lighting.specular,U.roughness=c.lighting.roughness,U.fresnel=c.lighting.fresnel,U.opacity=c.opacity,c._pad=U.tubeScale*c.sizeref*2,U}i.handlePick=function(l){var c=this.scene.fullSceneLayout,d=this.scene.dataScale;function u(g,m){var y=c[m],v=d[s[m]];return y.l2c(g)/v}if(l.object===this.mesh){var x=l.data.position,p=l.data.velocity;return l.traceCoordinate=[u(x[0],"xaxis"),u(x[1],"yaxis"),u(x[2],"zaxis"),u(p[0],"xaxis"),u(p[1],"yaxis"),u(p[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(l){this.data=l;var c=o(this.scene,l);this.mesh.update(c)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(l,c){var d=l.glplot.gl,u=o(l,c),x=k(d,u),p=new t(l,c.uid);return p.mesh=x,p.data=c,x._trace=p,l.glplot.add(x),p}},54304:function(F,C,e){"use strict";var T=e(3400),k=e(27260),a=e(90167);F.exports=function(w,b,f,s){function t(d,u){return T.coerce(w,b,a,d,u)}var i=t("u"),r=t("v"),n=t("w"),o=t("x"),l=t("y"),c=t("z");i&&i.length&&r&&r.length&&n&&n.length&&o&&o.length&&l&&l.length&&c&&c.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(w,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},15436:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(T,k){return T.tubex=T.x,T.tubey=T.y,T.tubez=T.z,T.tubeu=k.traceCoordinate[3],T.tubev=k.traceCoordinate[4],T.tubew=k.traceCoordinate[5],T.norm=k.traceCoordinate[6],T.divergence=k.traceCoordinate[7],delete T.x,delete T.y,delete T.z,T},meta:{}}},424:function(F,C,e){"use strict";var T=e(45464),k=e(21776).Ks,a=e(21776).Gw,w=e(49084),b=e(86968).u,f=e(74996),s=e(27328),t=e(92880).extendFlat,i=e(98192).c;F.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},f.marker.line.color,{dflt:null}),width:t({},f.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},w("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:f.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:a({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:t({},T.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:f.textfont,insidetextorientation:f.insidetextorientation,insidetextfont:f.insidetextfont,outsidetextfont:t({},f.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:f.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(F,C,e){"use strict";var T=e(7316);C.name="sunburst",C.plot=function(k,a,w,b){T.plotBasePlot(C.name,k,a,w,b)},C.clean=function(k,a,w,b){T.cleanBasePlot(C.name,k,a,w,b)}},3776:function(F,C,e){"use strict";var T=e(74148),k=e(38248),a=e(3400),w=e(8932).makeColorScaleFuncFromTrace,b=e(45768).makePullColorFn,f=e(45768).generateExtendedColors,s=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},r={},n={};function o(l,c,d){var u=0,x=l.children;if(x){for(var p=x.length,g=0;g<p;g++)u+=o(x[g],c,d);d.branches&&u++}else d.leaves&&u++;return l.value=l.data.data.value=u,c._values||(c._values=[]),c._values[l.data.data.i]=u,u}C.calc=function(l,c){var d,u,x,p,g,m,y=l._fullLayout,v=c.ids,_=a.isArrayOrTypedArray(v),h=c.labels,S=c.parents,A=c.values,E=a.isArrayOrTypedArray(A),P=[],I={},D={},z=function(ae){return ae||typeof ae=="number"},V=function(ae){return!E||k(A[ae])&&A[ae]>=0};_?(d=Math.min(v.length,S.length),u=function(ae){return z(v[ae])&&V(ae)},x=function(ae){return String(v[ae])}):(d=Math.min(h.length,S.length),u=function(ae){return z(h[ae])&&V(ae)},x=function(ae){return String(h[ae])}),E&&(d=Math.min(d,A.length));for(var O=0;O<d;O++)if(u(O)){var j=x(O),Y=z(S[O])?String(S[O]):"",B={i:O,id:j,pid:Y,label:z(h[O])?String(h[O]):""};E&&(B.v=+A[O]),P.push(B),g=j,I[p=Y]?I[p].push(g):I[p]=[g],D[g]=1}if(I[""]){if(I[""].length>1){for(var U=a.randstr(),q=0;q<P.length;q++)P[q].pid===""&&(P[q].pid=U);P.unshift({hasMultipleRoots:!0,id:U,pid:"",label:""})}}else{var te,ee=[];for(te in I)D[te]||ee.push(te);if(ee.length!==1)return a.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",ee.join(", ")].join(" "));te=ee[0],P.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{m=T.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(P)}catch(ae){return a.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ae.message].join(" "))}var Q=T.hierarchy(m),J=!1;if(E)switch(c.branchvalues){case"remainder":Q.sum(function(ae){return ae.data.v});break;case"total":Q.each(function(ae){var ue=ae.data.data,ve=ue.v;if(ae.children){var ye=ae.children.reduce(function(pe,de){return pe+de.data.data.v},0);if((ue.hasImpliedRoot||ue.hasMultipleRoots)&&(ve=ye),ve<ye*t)return J=!0,a.warn(["Total value for node",ae.data.data.id,"of",c.name,"is smaller than the sum of its children.",`
parent value =`,ve,`
children sum =`,ye].join(" "))}ae.value=ve})}else o(Q,c,{branches:c.count.indexOf("branches")!==-1,leaves:c.count.indexOf("leaves")!==-1});if(!J){var K,X;c.sort&&Q.sort(function(ae,ue){return ue.value-ae.value});var ie=c.marker.colors||[],se=!!ie.length;return c._hasColorscale?(se||(ie=E?c.values:c._values),s(l,c,{vals:ie,containerStr:"marker",cLetter:"c"}),X=w(c.marker)):K=b(y["_"+c.type+"colormap"]),Q.each(function(ae){var ue=ae.data.data;ue.color=c._hasColorscale?X(ie[ue.i]):K(ie[ue.i],ue.id)}),P[0].hierarchy=Q,P}},C._runCrossTraceCalc=function(l,c){var d=c._fullLayout,u=c.calcdata,x=d[l+"colorway"],p=d["_"+l+"colormap"];d["extend"+l+"colors"]&&(x=f(x,l==="icicle"?n:l==="treemap"?r:i));var g,m=0;function y(h){var S=h.data.data,A=S.id;S.color===!1&&(p[A]?S.color=p[A]:h.parent?h.parent.parent?S.color=h.parent.data.data.color:(p[A]=S.color=x[m%x.length],m++):S.color=g)}for(var v=0;v<u.length;v++){var _=u[v][0];_.trace.type===l&&_.hierarchy&&(g=_.trace.root.color,_.hierarchy.each(y))}},C.crossTraceCalc=function(l){return C._runCrossTraceCalc("sunburst",l)}},27328:function(F){"use strict";F.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(F,C,e){"use strict";var T=e(3400),k=e(424),a=e(86968).Q,w=e(31508).handleText,b=e(74174).handleMarkerDefaults,f=e(8932),s=f.hasColorscale,t=f.handleDefaults;F.exports=function(i,r,n,o){function l(g,m){return T.coerce(i,r,k,g,m)}var c=l("labels"),d=l("parents");if(c&&c.length&&d&&d.length){var u=l("values");u&&u.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),b(i,r,o,l);var x=r._hasColorscale=s(i,"marker","colors")||(i.marker||{}).coloraxis;x&&t(i,r,o,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",x?1:.7);var p=l("text");l("texttemplate"),r.texttemplate||l("textinfo",T.isArrayOrTypedArray(p)?"text+label":"label"),l("hovertext"),l("hovertemplate"),w(i,r,o,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),a(r,o,l),r._length=null}else r.visible=!1}},60404:function(F,C,e){"use strict";var T=e(43616),k=e(76308);F.exports=function(a,w,b,f,s){var t=w.data.data,i=t.i,r=s||t.color;if(i>=0){w.i=t.i;var n=b.marker;n.pattern&&n.colors&&n.pattern.shape||(n.color=r,w.color=r),T.pointStyle(a,b,f,w)}else k.fill(a,r)}},45716:function(F,C,e){"use strict";var T=e(33428),k=e(24040),a=e(10624).appendArrayPointValue,w=e(93024),b=e(3400),f=e(95924),s=e(78176),t=e(69656).formatPieValue;function i(r,n,o){for(var l=r.data.data,c={curveNumber:n.index,pointNumber:l.i,data:n._input,fullData:n},d=0;d<o.length;d++){var u=o[d];u in r&&(c[u]=r[u])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(c.parent=r.parentString),a(c,n,l.i),c}F.exports=function(r,n,o,l,c){var d=l[0],u=d.trace,x=d.hierarchy,p=u.type==="sunburst",g=u.type==="treemap"||u.type==="icicle";"_hasHoverLabel"in u||(u._hasHoverLabel=!1),"_hasHoverEvent"in u||(u._hasHoverEvent=!1),r.on("mouseover",function(m){var y=o._fullLayout;if(!o._dragging&&y.hovermode!==!1){var v,_=o._fullData[u.index],h=m.data.data,S=h.i,A=s.isHierarchyRoot(m),E=s.getParent(x,m),P=s.getValue(m),I=function(ie){return b.castOption(_,S,ie)},D=I("hovertemplate"),z=w.castHoverinfo(_,y,S),V=y.separators;if(D||z&&z!=="none"&&z!=="skip"){var O,j;p&&(O=d.cx+m.pxmid[0]*(1-m.rInscribed),j=d.cy+m.pxmid[1]*(1-m.rInscribed)),g&&(O=m._hoverX,j=m._hoverY);var Y,B={},U=[],q=[],te=function(ie){return U.indexOf(ie)!==-1};z&&(U=z==="all"?_._module.attributes.hoverinfo.flags:z.split("+")),B.label=h.label,te("label")&&B.label&&q.push(B.label),h.hasOwnProperty("v")&&(B.value=h.v,B.valueLabel=t(B.value,V),te("value")&&q.push(B.valueLabel)),B.currentPath=m.currentPath=s.getPath(m.data),te("current path")&&!A&&q.push(B.currentPath);var ee=[],Q=function(){ee.indexOf(Y)===-1&&(q.push(Y),ee.push(Y))};B.percentParent=m.percentParent=P/s.getValue(E),B.parent=m.parentString=s.getPtLabel(E),te("percent parent")&&(Y=s.formatPercent(B.percentParent,V)+" of "+B.parent,Q()),B.percentEntry=m.percentEntry=P/s.getValue(n),B.entry=m.entry=s.getPtLabel(n),!te("percent entry")||A||m.onPathbar||(Y=s.formatPercent(B.percentEntry,V)+" of "+B.entry,Q()),B.percentRoot=m.percentRoot=P/s.getValue(x),B.root=m.root=s.getPtLabel(x),te("percent root")&&!A&&(Y=s.formatPercent(B.percentRoot,V)+" of "+B.root,Q()),B.text=I("hovertext")||I("text"),te("text")&&(Y=B.text,b.isValidTextValue(Y)&&q.push(Y)),v=[i(m,_,c.eventDataKeys)];var J={trace:_,y:j,_x0:m._x0,_x1:m._x1,_y0:m._y0,_y1:m._y1,text:q.join("<br>"),name:D||te("name")?_.name:void 0,color:I("hoverlabel.bgcolor")||h.color,borderColor:I("hoverlabel.bordercolor"),fontFamily:I("hoverlabel.font.family"),fontSize:I("hoverlabel.font.size"),fontColor:I("hoverlabel.font.color"),fontWeight:I("hoverlabel.font.weight"),fontStyle:I("hoverlabel.font.style"),fontVariant:I("hoverlabel.font.variant"),nameLength:I("hoverlabel.namelength"),textAlign:I("hoverlabel.align"),hovertemplate:D,hovertemplateLabels:B,eventData:v};p&&(J.x0=O-m.rInscribed*m.rpx1,J.x1=O+m.rInscribed*m.rpx1,J.idealAlign=m.pxmid[0]<0?"left":"right"),g&&(J.x=O,J.idealAlign=O<0?"left":"right");var K=[];w.loneHover(J,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:o,inOut_bbox:K}),v[0].bbox=K[0],u._hasHoverLabel=!0}if(g){var X=r.select("path.surface");c.styleOne(X,m,_,o,{hovered:!0})}u._hasHoverEvent=!0,o.emit("plotly_hover",{points:v||[i(m,_,c.eventDataKeys)],event:T.event})}}),r.on("mouseout",function(m){var y=o._fullLayout,v=o._fullData[u.index],_=T.select(this).datum();if(u._hasHoverEvent&&(m.originalEvent=T.event,o.emit("plotly_unhover",{points:[i(_,v,c.eventDataKeys)],event:T.event}),u._hasHoverEvent=!1),u._hasHoverLabel&&(w.loneUnhover(y._hoverlayer.node()),u._hasHoverLabel=!1),g){var h=r.select("path.surface");c.styleOne(h,_,v,o,{hovered:!1})}}),r.on("click",function(m){var y=o._fullLayout,v=o._fullData[u.index],_=p&&(s.isHierarchyRoot(m)||s.isLeaf(m)),h=s.getPtId(m),S=s.isEntry(m)?s.findEntryWithChild(x,h):s.findEntryWithLevel(x,h),A=s.getPtId(S),E={points:[i(m,v,c.eventDataKeys)],event:T.event};_||(E.nextLevel=A);var P=f.triggerHandler(o,"plotly_"+u.type+"click",E);if(P!==!1&&y.hovermode&&(o._hoverdata=[i(m,v,c.eventDataKeys)],w.click(o,T.event)),!_&&P!==!1&&!o._dragging&&!o._transitioning){k.call("_storeDirectGUIEdit",v,y._tracePreGUI[v.uid],{level:v.level});var I={data:[{level:A}],traces:[u.index]},D={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};w.loneUnhover(y._hoverlayer.node()),k.call("animate",o,I,D)}})}},78176:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(93972),w=e(69656);function b(f){return f.data.data.pid}C.findEntryWithLevel=function(f,s){var t;return s&&f.eachAfter(function(i){if(C.getPtId(i)===s)return t=i.copy()}),t||f},C.findEntryWithChild=function(f,s){var t;return f.eachAfter(function(i){for(var r=i.children||[],n=0;n<r.length;n++){var o=r[n];if(C.getPtId(o)===s)return t=i.copy()}}),t||f},C.isEntry=function(f){return!f.parent},C.isLeaf=function(f){return!f.children},C.getPtId=function(f){return f.data.data.id},C.getPtLabel=function(f){return f.data.data.label},C.getValue=function(f){return f.value},C.isHierarchyRoot=function(f){return b(f)===""},C.setSliceCursor=function(f,s,t){var i=t.isTransitioning;if(!i){var r=f.datum();i=t.hideOnRoot&&C.isHierarchyRoot(r)||t.hideOnLeaves&&C.isLeaf(r)}a(f,i?null:"pointer")},C.getInsideTextFontKey=function(f,s,t,i,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",o=t.data.data.i;return T.castOption(s,o,n+"."+f)||T.castOption(s,o,"textfont."+f)||i.size},C.getOutsideTextFontKey=function(f,s,t,i){var r=t.data.data.i;return T.castOption(s,r,"outsidetextfont."+f)||T.castOption(s,r,"textfont."+f)||i.size},C.isOutsideText=function(f,s){return!f._hasColorscale&&C.isHierarchyRoot(s)},C.determineTextFont=function(f,s,t,i){return C.isOutsideText(f,s)?function(r,n,o){return{color:C.getOutsideTextFontKey("color",r,n,o),family:C.getOutsideTextFontKey("family",r,n,o),size:C.getOutsideTextFontKey("size",r,n,o),weight:C.getOutsideTextFontKey("weight",r,n,o),style:C.getOutsideTextFontKey("style",r,n,o),variant:C.getOutsideTextFontKey("variant",r,n,o),textcase:C.getOutsideTextFontKey("textcase",r,n,o),lineposition:C.getOutsideTextFontKey("lineposition",r,n,o),shadow:C.getOutsideTextFontKey("shadow",r,n,o)}}(f,s,t):function(r,n,o,l){var c=(l||{}).onPathbar,d=n.data.data,u=d.i,x=T.castOption(r,u,(c?"pathbar.textfont":"insidetextfont")+".color");return!x&&r._input.textfont&&(x=T.castOption(r._input,u,"textfont.color")),{color:x||k.contrast(d.color),family:C.getInsideTextFontKey("family",r,n,o,l),size:C.getInsideTextFontKey("size",r,n,o,l),weight:C.getInsideTextFontKey("weight",r,n,o,l),style:C.getInsideTextFontKey("style",r,n,o,l),variant:C.getInsideTextFontKey("variant",r,n,o,l),textcase:C.getInsideTextFontKey("textcase",r,n,o,l),lineposition:C.getInsideTextFontKey("lineposition",r,n,o,l),shadow:C.getInsideTextFontKey("shadow",r,n,o,l)}}(f,s,t,i)},C.hasTransition=function(f){return!!(f&&f.duration>0)},C.getMaxDepth=function(f){return f.maxdepth>=0?f.maxdepth:1/0},C.isHeader=function(f,s){return!(C.isLeaf(f)||f.depth===s._maxDepth-1)},C.getParent=function(f,s){return C.findEntryWithLevel(f,b(s))},C.listPath=function(f,s){var t=f.parent;if(!t)return[];var i=s?[t.data[s]]:[t];return C.listPath(t,s).concat(i)},C.getPath=function(f){return C.listPath(f,"label").join("/")+"/"},C.formatValue=w.formatPieValue,C.formatPercent=function(f,s){var t=T.formatPercent(f,0);return t==="0%"&&(t=w.formatPiePercent(f,s)),t}},5621:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(F){"use strict";F.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(F,C,e){"use strict";var T=e(3400),k=e(84920);F.exports=function(a,w){function b(f,s){return T.coerce(a,w,k,f,s)}b("sunburstcolorway",w.colorway),b("extendsunburstcolors")}},96488:function(F,C,e){"use strict";var T=e(33428),k=e(74148),a=e(67756).qy,w=e(43616),b=e(3400),f=e(72736),s=e(82744),t=s.recordMinTextSize,i=s.clearMinTextSize,r=e(37820),n=e(69656).getRotationAngle,o=r.computeTransform,l=r.transformInsideText,c=e(85676).styleOne,d=e(60100).resizeText,u=e(45716),x=e(27328),p=e(78176);function g(y,v,_,h){var S=y._context.staticPlot,A=y._fullLayout,E=!A.uniformtext.mode&&p.hasTransition(h),P=T.select(_).selectAll("g.slice"),I=v[0],D=I.trace,z=I.hierarchy,V=p.findEntryWithLevel(z,D.level),O=p.getMaxDepth(D),j=A._size,Y=D.domain,B=j.w*(Y.x[1]-Y.x[0]),U=j.h*(Y.y[1]-Y.y[0]),q=.5*Math.min(B,U),te=I.cx=j.l+j.w*(Y.x[1]+Y.x[0])/2,ee=I.cy=j.t+j.h*(1-Y.y[0])-U/2;if(!V)return P.remove();var Q=null,J={};E&&P.each(function(re){J[p.getPtId(re)]={rpx0:re.rpx0,rpx1:re.rpx1,x0:re.x0,x1:re.x1,transform:re.transform},!Q&&p.isEntry(re)&&(Q=re)});var K=function(re){return k.partition().size([2*Math.PI,re.height+1])(re)}(V).descendants(),X=V.height+1,ie=0,se=O;I.hasMultipleRoots&&p.isHierarchyRoot(V)&&(K=K.slice(1),X-=1,ie=1,se+=1),K=K.filter(function(re){return re.y1<=se});var ae=n(D.rotation);ae&&K.forEach(function(re){re.x0+=ae,re.x1+=ae});var ue=Math.min(X,O),ve=function(re){return(re-ie)/ue*q},ye=function(re,fe){return[re*Math.cos(fe),-re*Math.sin(fe)]},pe=function(re){return b.pathAnnulus(re.rpx0,re.rpx1,re.x0,re.x1,te,ee)},de=function(re){return te+m(re)[0]*(re.transform.rCenter||0)+(re.transform.x||0)},me=function(re){return ee+m(re)[1]*(re.transform.rCenter||0)+(re.transform.y||0)};(P=P.data(K,p.getPtId)).enter().append("g").classed("slice",!0),E?P.exit().transition().each(function(){var re=T.select(this);re.select("path.surface").transition().attrTween("d",function(fe){var Se=function(be){var we,Me=p.getPtId(be),Pe=J[Me],De=J[p.getPtId(V)];if(De){var he=(be.x1>De.x1?2*Math.PI:0)+ae;we=be.rpx1<De.rpx1?{x0:be.x0,x1:be.x1,rpx0:0,rpx1:0}:{x0:he,x1:he,rpx0:be.rpx0,rpx1:be.rpx1}}else{var _e,Ae=p.getPtId(be.parent);P.each(function(Ze){if(p.getPtId(Ze)===Ae)return _e=Ze});var Oe,Ee=_e.children;Ee.forEach(function(Ze,it){if(p.getPtId(Ze)===Me)return Oe=it});var Be=Ee.length,Ve=a(_e.x0,_e.x1);we={rpx0:q,rpx1:q,x0:Ve(Oe/Be),x1:Ve((Oe+1)/Be)}}return a(Pe,we)}(fe);return function(be){return pe(Se(be))}}),re.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var ke=null;if(E&&Q){var Ce=p.getPtId(Q);P.each(function(re){ke===null&&p.getPtId(re)===Ce&&(ke=re.x1)})}var ge=P;function oe(re){var fe=re.parent,Se=J[p.getPtId(fe)],be={};if(Se){var we=fe.children,Me=we.indexOf(re),Pe=we.length,De=a(Se.x0,Se.x1);be.x0=De(Me/Pe),be.x1=De(Me/Pe)}else be.x0=be.x1=0;return be}E&&(ge=ge.transition().each("end",function(){var re=T.select(this);p.setSliceCursor(re,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ge.each(function(re){var fe=T.select(this),Se=b.ensureSingle(fe,"path","surface",function(he){he.style("pointer-events",S?"none":"all")});re.rpx0=ve(re.y0),re.rpx1=ve(re.y1),re.xmid=(re.x0+re.x1)/2,re.pxmid=ye(re.rpx1,re.xmid),re.midangle=-(re.xmid-Math.PI/2),re.startangle=-(re.x0-Math.PI/2),re.stopangle=-(re.x1-Math.PI/2),re.halfangle=.5*Math.min(b.angleDelta(re.x0,re.x1)||Math.PI,Math.PI),re.ring=1-re.rpx0/re.rpx1,re.rInscribed=function(he){return he.rpx0===0&&b.isFullCircle([he.x0,he.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(he.halfangle)),he.ring/2))}(re),E?Se.transition().attrTween("d",function(he){var _e=function(Ae){var Oe,Ee=J[p.getPtId(Ae)],Be={x0:Ae.x0,x1:Ae.x1,rpx0:Ae.rpx0,rpx1:Ae.rpx1};if(Ee)Oe=Ee;else if(Q)if(Ae.parent)if(ke){var Ve=(Ae.x1>ke?2*Math.PI:0)+ae;Oe={x0:Ve,x1:Ve}}else Oe={rpx0:q,rpx1:q},b.extendFlat(Oe,oe(Ae));else Oe={rpx0:0,rpx1:0};else Oe={x0:ae,x1:ae};return a(Oe,Be)}(he);return function(Ae){return pe(_e(Ae))}}):Se.attr("d",pe),fe.call(u,V,y,v,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),Se.call(c,re,D,y);var be=b.ensureSingle(fe,"g","slicetext"),we=b.ensureSingle(be,"text","",function(he){he.attr("data-notex",1)}),Me=b.ensureUniformFontSize(y,p.determineTextFont(D,re,A.font));we.text(C.formatSliceLabel(re,V,D,v,A)).classed("slicetext",!0).attr("text-anchor","middle").call(w.font,Me).call(f.convertToTspans,y);var Pe=w.bBox(we.node());re.transform=l(Pe,re,I),re.transform.targetX=de(re),re.transform.targetY=me(re);var De=function(he,_e){var Ae=he.transform;return o(Ae,_e),Ae.fontSize=Me.size,t(D.type,Ae,A),b.getTextTransform(Ae)};E?we.transition().attrTween("transform",function(he){var _e=function(Ae){var Oe,Ee=J[p.getPtId(Ae)],Be=Ae.transform;if(Ee)Oe=Ee;else if(Oe={rpx1:Ae.rpx1,transform:{textPosAngle:Be.textPosAngle,scale:0,rotate:Be.rotate,rCenter:Be.rCenter,x:Be.x,y:Be.y}},Q)if(Ae.parent)if(ke){var Ve=Ae.x1>ke?2*Math.PI:0;Oe.x0=Oe.x1=Ve}else b.extendFlat(Oe,oe(Ae));else Oe.x0=Oe.x1=ae;else Oe.x0=Oe.x1=ae;var Ze=a(Oe.transform.textPosAngle,Ae.transform.textPosAngle),it=a(Oe.rpx1,Ae.rpx1),at=a(Oe.x0,Ae.x0),gt=a(Oe.x1,Ae.x1),yt=a(Oe.transform.scale,Be.scale),pt=a(Oe.transform.rotate,Be.rotate),et=Be.rCenter===0?3:Oe.transform.rCenter===0?1/3:1,$e=a(Oe.transform.rCenter,Be.rCenter);return function(At){var Ot=it(At),Rt=at(At),Ct=gt(At),Ge=function(Ne){return $e(Math.pow(Ne,et))}(At),Xe={pxmid:ye(Ot,(Rt+Ct)/2),rpx1:Ot,transform:{textPosAngle:Ze(At),rCenter:Ge,x:Be.x,y:Be.y}};return t(D.type,Be,A),{transform:{targetX:de(Xe),targetY:me(Xe),scale:yt(At),rotate:pt(At),rCenter:Ge}}}}(he);return function(Ae){return De(_e(Ae),Pe)}}):we.attr("transform",De(re,Pe))})}function m(y){return v=y.rpx1,_=y.transform.textPosAngle,[v*Math.sin(_),-v*Math.cos(_)];var v,_}C.plot=function(y,v,_,h){var S,A,E=y._fullLayout,P=E._sunburstlayer,I=!_,D=!E.uniformtext.mode&&p.hasTransition(_);i("sunburst",E),(S=P.selectAll("g.trace.sunburst").data(v,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),D?(h&&(A=h()),T.transition().duration(_.duration).ease(_.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){P.selectAll("g.trace").each(function(z){g(y,z,this,_)})})):(S.each(function(z){g(y,z,this,_)}),E.uniformtext.mode&&d(y,E._sunburstlayer.selectAll(".trace"),"sunburst")),I&&S.exit().remove()},C.formatSliceLabel=function(y,v,_,h,S){var A=_.texttemplate,E=_.textinfo;if(!(A||E&&E!=="none"))return"";var P=S.separators,I=h[0],D=y.data.data,z=I.hierarchy,V=p.isHierarchyRoot(y),O=p.getParent(z,y),j=p.getValue(y);if(!A){var Y,B=E.split("+"),U=function(se){return B.indexOf(se)!==-1},q=[];if(U("label")&&D.label&&q.push(D.label),D.hasOwnProperty("v")&&U("value")&&q.push(p.formatValue(D.v,P)),!V){U("current path")&&q.push(p.getPath(y.data));var te=0;U("percent parent")&&te++,U("percent entry")&&te++,U("percent root")&&te++;var ee=te>1;if(te){var Q,J=function(se){Y=p.formatPercent(Q,P),ee&&(Y+=" of "+se),q.push(Y)};U("percent parent")&&!V&&(Q=j/p.getValue(O),J("parent")),U("percent entry")&&(Q=j/p.getValue(v),J("entry")),U("percent root")&&(Q=j/p.getValue(z),J("root"))}}return U("text")&&(Y=b.castOption(_,D.i,"text"),b.isValidTextValue(Y)&&q.push(Y)),q.join("<br>")}var K=b.castOption(_,D.i,"texttemplate");if(!K)return"";var X={};D.label&&(X.label=D.label),D.hasOwnProperty("v")&&(X.value=D.v,X.valueLabel=p.formatValue(D.v,P)),X.currentPath=p.getPath(y.data),V||(X.percentParent=j/p.getValue(O),X.percentParentLabel=p.formatPercent(X.percentParent,P),X.parent=p.getPtLabel(O)),X.percentEntry=j/p.getValue(v),X.percentEntryLabel=p.formatPercent(X.percentEntry,P),X.entry=p.getPtLabel(v),X.percentRoot=j/p.getValue(z),X.percentRootLabel=p.formatPercent(X.percentRoot,P),X.root=p.getPtLabel(z),D.hasOwnProperty("color")&&(X.color=D.color);var ie=b.castOption(_,D.i,"text");return(b.isValidTextValue(ie)||ie==="")&&(X.text=ie),X.customdata=b.castOption(_,D.i,"customdata"),b.texttemplateString(K,X,S._d3locale,X,_._meta||{})}},85676:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(3400),w=e(82744).resizeText,b=e(60404);function f(s,t,i,r){var n=t.data.data,o=!t.children,l=n.i,c=a.castOption(i,l,"marker.line.color")||k.defaultLine,d=a.castOption(i,l,"marker.line.width")||0;s.call(b,t,i,r).style("stroke-width",d).call(k.stroke,c).style("opacity",o?i.leaf.opacity:null)}F.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");w(s,t,"sunburst"),t.each(function(i){var r=T.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(o){T.select(this).call(f,o,n,s)})})},styleOne:f}},16716:function(F,C,e){"use strict";var T=e(76308),k=e(49084),a=e(29736).axisHoverFormat,w=e(21776).Ks,b=e(45464),f=e(92880).extendFlat,s=e(67824).overrideAll;function t(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:T.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:T.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=F.exports=s(f({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:w(),xhoverformat:a("x"),yhoverformat:a("y"),zhoverformat:a("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:f({},k.zauto,{}),zmin:f({},k.zmin,{}),zmax:f({},k.zmax,{})},hoverinfo:f({},b.hoverinfo),showlegend:f({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(F,C,e){"use strict";var T=e(47128);F.exports=function(k,a){a.surfacecolor?T(k,a,{vals:a.surfacecolor,containerStr:"",cLetter:"c"}):T(k,a,{vals:a.z,containerStr:"",cLetter:"c"})}},79164:function(F,C,e){"use strict";var T=e(67792).gl_surface3d,k=e(67792).ndarray,a=e(67792).ndarray_linear_interpolate.d2,w=e(70448),b=e(11240),f=e(3400).isArrayOrTypedArray,s=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function r(_,h,S){this.scene=_,this.uid=S,this.surface=h,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(_,h,S,A){var E=f(this.data.x)?f(this.data.x[0])?this.data.x[h][_]:this.data.x[_]:_;return S===void 0?E:A.d2l(E,0,S)},n.getYat=function(_,h,S,A){var E=f(this.data.y)?f(this.data.y[0])?this.data.y[h][_]:this.data.y[h]:h;return S===void 0?E:A.d2l(E,0,S)},n.getZat=function(_,h,S,A){var E=this.data.z[h][_];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[h][_]),S===void 0?E:A.d2l(E,0,S)},n.handlePick=function(_){if(_.object===this.surface){var h=(_.data.index[0]-1)/this.dataScaleX-1,S=(_.data.index[1]-1)/this.dataScaleY-1,A=Math.max(Math.min(Math.round(h),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);_.index=[A,E],_.traceCoordinate=[this.getXat(A,E),this.getYat(A,E),this.getZat(A,E)],_.dataCoordinate=[this.getXat(A,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(A,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(A,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)_.dataCoordinate[P]!=null&&(_.dataCoordinate[P]*=this.scene.dataScale[P]);var I=this.data.hovertext||this.data.text;return f(I)&&I[E]&&I[E][A]!==void 0?_.textLabel=I[E][A]:_.textLabel=I||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var o=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(_,h){if(_<h)return 0;for(var S=0;Math.floor(_%h)===0;)_/=h,S++;return S}function c(_){for(var h=[],S=0;S<o.length;S++){var A=o[S];h.push(l(_,A))}return h}function d(_){for(var h=c(_),S=_,A=0;A<o.length;A++)if(h[A]>0){S=o[A];break}return S}function u(_,h){if(!(_<1||h<1)){for(var S=c(_),A=c(h),E=1,P=0;P<o.length;P++)E*=Math.pow(o[P],Math.max(S[P],A[P]));return E}}n.calcXnums=function(_){var h,S=[];for(h=1;h<_;h++){var A=this.getXat(h-1,0),E=this.getXat(h,0);S[h-1]=E!==A&&A!=null&&E!=null?Math.abs(E-A):0}var P=0;for(h=1;h<_;h++)P+=S[h-1];for(h=1;h<_;h++)S[h-1]===0?S[h-1]=1:S[h-1]=Math.round(P/S[h-1]);return S},n.calcYnums=function(_){var h,S=[];for(h=1;h<_;h++){var A=this.getYat(0,h-1),E=this.getYat(0,h);S[h-1]=E!==A&&A!=null&&E!=null?Math.abs(E-A):0}var P=0;for(h=1;h<_;h++)P+=S[h-1];for(h=1;h<_;h++)S[h-1]===0?S[h-1]=1:S[h-1]=Math.round(P/S[h-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],p=x[9],g=x[13];function m(_,h,S){var A=S[8]+S[2]*h[0]+S[5]*h[1];return _[0]=(S[6]+S[0]*h[0]+S[3]*h[1])/A,_[1]=(S[7]+S[1]*h[0]+S[4]*h[1])/A,_}function y(_,h,S){return function(A,E,P,I){for(var D=[0,0],z=A.shape[0],V=A.shape[1],O=0;O<z;O++)for(var j=0;j<V;j++)P(D,[O,j],I),A.set(O,j,a(E,D[0],D[1]))}(_,h,m,S),_}function v(_,h){for(var S=!1,A=0;A<_.length;A++)if(h===_[A]){S=!0;break}S===!1&&_.push(h)}n.estimateScale=function(_,h){for(var S=1+function(E){if(E.length!==0){for(var P=1,I=0;I<E.length;I++)P=u(P,E[I]);return P}}(h===0?this.calcXnums(_):this.calcYnums(_));S<p;)S*=2;for(;S>g;)S--,S/=d(S),++S<p&&(S=g);var A=Math.round(S/_);return A>1?A:1},n.refineCoords=function(_){for(var h=this.dataScaleX,S=this.dataScaleY,A=_[0].shape[0],E=_[0].shape[1],P=0|Math.floor(_[0].shape[0]*h+1),I=0|Math.floor(_[0].shape[1]*S+1),D=1+A+1,z=1+E+1,V=k(new Float32Array(D*z),[D,z]),O=[1/h,0,0,0,1/S,0,0,0,1],j=0;j<_.length;++j){this.surface.padField(V,_[j]);var Y=k(new Float32Array(P*I),[P,I]);y(Y,V,O),_[j]=Y}},n.setContourLevels=function(){var _,h,S,A=[[],[],[]],E=[!1,!1,!1],P=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(P=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,h=this.contourStart[_];h<this.contourEnd[_];h+=this.contourSize[_])S=h*this.scene.dataScale[_],v(A[_],S);if(P){var I=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(I[_]=E[_]?A[_]:this.scene.contourLevels[_]);this.surface.update({levels:I})}},n.update=function(_){var h,S,A,E,P=this.scene,I=P.fullSceneLayout,D=this.surface,z=s(_),V=P.dataScale,O=_.z[0].length,j=_._ylength,Y=P.contourLevels;this.data=_;var B=[];for(h=0;h<3;h++)for(B[h]=[],S=0;S<O;S++)B[h][S]=[];for(S=0;S<O;S++)for(A=0;A<j;A++)B[0][S][A]=this.getXat(S,A,_.xcalendar,I.xaxis),B[1][S][A]=this.getYat(S,A,_.ycalendar,I.yaxis),B[2][S][A]=this.getZat(S,A,_.zcalendar,I.zaxis);if(_.connectgaps)for(_._emptypoints=b(B[2]),w(B[2],_._emptypoints),_._interpolatedZ=[],S=0;S<O;S++)for(_._interpolatedZ[S]=[],A=0;A<j;A++)_._interpolatedZ[S][A]=B[2][S][A];for(h=0;h<3;h++)for(S=0;S<O;S++)for(A=0;A<j;A++)(E=B[h][S][A])==null?B[h][S][A]=NaN:E=B[h][S][A]*=V[h];for(h=0;h<3;h++)for(S=0;S<O;S++)for(A=0;A<j;A++)(E=B[h][S][A])!=null&&(this.minValues[h]>E&&(this.minValues[h]=E),this.maxValues[h]<E&&(this.maxValues[h]=E));for(h=0;h<3;h++)this.objectOffset[h]=.5*(this.minValues[h]+this.maxValues[h]);for(h=0;h<3;h++)for(S=0;S<O;S++)for(A=0;A<j;A++)(E=B[h][S][A])!=null&&(B[h][S][A]-=this.objectOffset[h]);var U=[k(new Float32Array(O*j),[O,j]),k(new Float32Array(O*j),[O,j]),k(new Float32Array(O*j),[O,j])];for(h=0;h<3;h++)for(S=0;S<O;S++)for(A=0;A<j;A++)U[h].set(S,A,B[h][S][A]);B=[];var q={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},te=i(_);if(q.intensityBounds=[te.min,te.max],_.surfacecolor){var ee=k(new Float32Array(O*j),[O,j]);for(S=0;S<O;S++)for(A=0;A<j;A++)ee.set(S,A,_.surfacecolor[A][S]);U.push(ee)}else q.intensityBounds[0]*=V[2],q.intensityBounds[1]*=V[2];(g<U[0].shape[0]||g<U[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(U[0].shape[0],0),this.dataScaleY=this.estimateScale(U[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(U)),_.surfacecolor&&(q.intensity=U.pop());var Q=[!0,!0,!0],J=["x","y","z"];for(h=0;h<3;++h){var K=_.contours[J[h]];Q[h]=K.highlight,q.showContour[h]=K.show||K.highlight,q.showContour[h]&&(q.contourProject[h]=[K.project.x,K.project.y,K.project.z],K.show?(this.showContour[h]=!0,q.levels[h]=Y[h],D.highlightColor[h]=q.contourColor[h]=t(K.color),K.usecolormap?D.highlightTint[h]=q.contourTint[h]=0:D.highlightTint[h]=q.contourTint[h]=1,q.contourWidth[h]=K.width,this.contourStart[h]=K.start,this.contourEnd[h]=K.end,this.contourSize[h]=K.size):(this.showContour[h]=!1,this.contourStart[h]=null,this.contourEnd[h]=null,this.contourSize[h]=0),K.highlight&&(q.dynamicColor[h]=t(K.highlightcolor),q.dynamicWidth[h]=K.highlightwidth))}(function(X){var ie=X[0].rgb,se=X[X.length-1].rgb;return ie[0]===se[0]&&ie[1]===se[1]&&ie[2]===se[2]&&ie[3]===se[3]})(z)&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=U,D.update(q),D.visible=_.visible,D.enableDynamic=Q,D.enableHighlight=Q,D.snapToData=!0,"lighting"in _&&(D.ambientLight=_.lighting.ambient,D.diffuseLight=_.lighting.diffuse,D.specularLight=_.lighting.specular,D.roughness=_.lighting.roughness,D.fresnel=_.lighting.fresnel),"lightposition"in _&&(D.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},F.exports=function(_,h){var S=_.glplot.gl,A=T({gl:S}),E=new r(_,A,h.uid);return A._trace=E,E.update(h),_.glplot.add(A),E}},60192:function(F,C,e){"use strict";var T=e(24040),k=e(3400),a=e(27260),w=e(16716);function b(s,t,i,r){var n=r("opacityscale");n==="max"?t.opacityscale=[[0,.1],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,.1]]:n==="extremes"?t.opacityscale=function(o,l){for(var c=[],d=0;d<32;d++){var u=d/31,x=.1+.9*(1-Math.pow(Math.sin(1*u*Math.PI),2));c.push([u,Math.max(0,Math.min(1,x))])}return c}():function(o){var l=0;if(!Array.isArray(o)||o.length<2||!o[0]||!o[o.length-1]||+o[0][0]!=0||+o[o.length-1][0]!=1)return!1;for(var c=0;c<o.length;c++){var d=o[c];if(d.length!==2||+d[0]<l)return!1;l=+d[0]}return!0}(n)||(t.opacityscale=void 0)}function f(s,t,i){t in s&&!(i in s)&&(s[i]=s[t])}F.exports={supplyDefaults:function(s,t,i,r){var n,o;function l(v,_){return k.coerce(s,t,w,v,_)}var c=l("x"),d=l("y"),u=l("z");if(!u||!u.length||c&&c.length<1||d&&d.length<1)t.visible=!1;else{t._xlength=Array.isArray(c)&&k.isArrayOrTypedArray(c[0])?u.length:u[0].length,t._ylength=u.length,T.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],r),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(v){l(v)});var x=l("surfacecolor"),p=["x","y","z"];for(n=0;n<3;++n){var g="contours."+p[n],m=l(g+".show"),y=l(g+".highlight");if(m||y)for(o=0;o<3;++o)l(g+".project."+p[o]);m&&(l(g+".color"),l(g+".width"),l(g+".usecolormap")),y&&(l(g+".highlightcolor"),l(g+".highlightwidth")),l(g+".start"),l(g+".end"),l(g+".size")}x||(f(s,"zmin","cmin"),f(s,"zmax","cmax"),f(s,"zauto","cauto")),a(s,t,r,l,{prefix:"",cLetter:"c"}),b(0,t,0,l),t._length=null}},opacityscaleDefaults:b}},91304:function(F,C,e){"use strict";F.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(F,C,e){"use strict";var T=e(13916),k=e(92880).extendFlat,a=e(67824).overrideAll,w=e(25376),b=e(86968).u,f=e(29736).descriptionOnlyNumbers;(F.exports=a({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},w({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},T.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},w({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(F,C,e){"use strict";var T=e(84888)._M,k=e(24752),a="table";C.name=a,C.plot=function(w){var b=T(w.calcdata,a)[0];b.length&&k(w,b)},C.clean=function(w,b,f,s){var t=s._has&&s._has(a),i=b._has&&b._has(a);t&&!i&&s._paperdiv.selectAll(".table").remove()}},39312:function(F,C,e){"use strict";var T=e(71688).wrap;F.exports=function(){return T({})}},23536:function(F){"use strict";F.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(F,C,e){"use strict";var T=e(23536),k=e(92880).extendFlat,a=e(38248),w=e(38116).isTypedArray,b=e(38116).isArrayOrTypedArray;function f(l){if(b(l)){for(var c=0,d=0;d<l.length;d++)c=Math.max(c,f(l[d]));return c}return l}function s(l,c){return l+c}function t(l){var c,d=l.slice(),u=1/0,x=0;for(c=0;c<d.length;c++)w(d[c])?d[c]=Array.from(d[c]):b(d[c])||(d[c]=[d[c]]),u=Math.min(u,d[c].length),x=Math.max(x,d[c].length);if(u!==x)for(c=0;c<d.length;c++){var p=x-d[c].length;p&&(d[c]=d[c].concat(i(p)))}return d}function i(l){for(var c=new Array(l),d=0;d<l;d++)c[d]="";return c}function r(l){return l.calcdata.columns.reduce(function(c,d){return d.xIndex<l.xIndex?c+d.columnWidth:c},0)}function n(l,c){return Object.keys(l).map(function(d){return k({},l[d],{auxiliaryBlocks:c})})}function o(l,c){for(var d,u={},x=0,p=0,g={firstRowIndex:null,lastRowIndex:null,rows:[]},m=0,y=0,v=0;v<l.length;v++)d=l[v],g.rows.push({rowIndex:v,rowHeight:d}),((p+=d)>=c||v===l.length-1)&&(u[x]=g,g.key=y++,g.firstRowIndex=m,g.lastRowIndex=v,g={firstRowIndex:null,lastRowIndex:null,rows:[]},x+=p,m=v+1,p=0);return u}F.exports=function(l,c){var d=t(c.cells.values),u=function(j){return j.slice(c.header.values.length,j.length)},x=t(c.header.values);x.length&&!x[0].length&&(x[0]=[""],x=t(x));var p=x.concat(u(d).map(function(){return i((x[0]||[""]).length)})),g=c.domain,m=Math.floor(l._fullLayout._size.w*(g.x[1]-g.x[0])),y=Math.floor(l._fullLayout._size.h*(g.y[1]-g.y[0])),v=c.header.values.length?p[0].map(function(){return c.header.height}):[T.emptyHeaderHeight],_=d.length?d[0].map(function(){return c.cells.height}):[],h=v.reduce(s,0),S=o(_,y-h+T.uplift),A=n(o(v,h),[]),E=n(S,A),P={},I=c._fullInput.columnorder;b(I)&&(I=Array.from(I)),I=I.concat(u(d.map(function(j,Y){return Y})));var D=p.map(function(j,Y){var B=b(c.columnwidth)?c.columnwidth[Math.min(Y,c.columnwidth.length-1)]:c.columnwidth;return a(B)?Number(B):1}),z=D.reduce(s,0);D=D.map(function(j){return j/z*m});var V=Math.max(f(c.header.line.width),f(c.cells.line.width)),O={key:c.uid+l._context.staticPlot,translateX:g.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-g.y[1]),size:l._fullLayout._size,width:m,maxLineWidth:V,height:y,columnOrder:I,groupHeight:y,rowBlocks:E,headerRowBlocks:A,scrollY:0,cells:k({},c.cells,{values:d}),headerCells:k({},c.header,{values:p}),gdColumns:p.map(function(j){return j[0]}),gdColumnsOriginalOrder:p.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(j,Y){var B=P[j];return P[j]=(B||0)+1,{key:j+"__"+P[j],label:j,specIndex:Y,xIndex:I[Y],xScale:r,x:void 0,calcdata:void 0,columnWidth:D[Y]}})};return O.columns.forEach(function(j){j.calcdata=O,j.x=r(j)}),O}},53056:function(F,C,e){"use strict";var T=e(92880).extendFlat;C.splitToPanels=function(k){var a=[0,0],w=T({},k,{key:"header",type:"header",page:0,prevPages:a,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:T({},k.calcdata,{cells:k.calcdata.headerCells})});return[T({},k,{key:"cells1",type:"cells",page:0,prevPages:a,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T({},k,{key:"cells2",type:"cells",page:1,prevPages:a,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),w]},C.splitToCells=function(k){var a=function(w){var b=w.rowBlocks[w.page],f=b?b.rows[0].rowIndex:0;return[f,b?f+b.rows.length:0]}(k);return(k.values||[]).slice(a[0],a[1]).map(function(w,b){return{keyWithinBlock:b+(typeof w=="string"&&w.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:a[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:w}})}},53212:function(F,C,e){"use strict";var T=e(3400),k=e(60520),a=e(86968).Q;F.exports=function(w,b,f,s){function t(i,r){return T.coerce(w,b,k,i,r)}a(b,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),T.coerceFont(t,"header.font",s.font),function(i,r){for(var n=i.columnorder||[],o=i.header.values.length,l=n.slice(0,o),c=l.slice().sort(function(x,p){return x-p}),d=l.map(function(x){return c.indexOf(x)}),u=d.length;u<o;u++)d.push(u);r("columnorder",d)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),T.coerceFont(t,"cells.font",s.font),b._length=null}},41724:function(F,C,e){"use strict";F.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(F,C,e){"use strict";var T=e(23536),k=e(33428),a=e(3400),w=a.numberFormat,b=e(71688),f=e(43616),s=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,r=e(3400).cancelTransition,n=e(55992),o=e(53056),l=e(76308);function c(q){return Math.ceil(q.calcdata.maxLineWidth/2)}function d(q,te){return"clip"+q._fullLayout._uid+"_scrollAreaBottomClip_"+te.key}function u(q,te){return"clip"+q._fullLayout._uid+"_columnBoundaryClippath_"+te.calcdata.key+"_"+te.specIndex}function x(q){return[].concat.apply([],q.map(function(te){return te})).map(function(te){return te.__data__})}function p(q,te,ee){var Q=q.selectAll("."+T.cn.scrollbarKit).data(b.repeat,b.keyFun);Q.enter().append("g").classed(T.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),Q.each(function(se){var ae=se.scrollbarState;ae.totalHeight=function(ue){var ve=ue.rowBlocks;return j(ve,ve.length-1)+(ve.length?Y(ve[ve.length-1],1/0):1)}(se),ae.scrollableAreaHeight=se.groupHeight-A(se),ae.currentlyVisibleHeight=Math.min(ae.totalHeight,ae.scrollableAreaHeight),ae.ratio=ae.currentlyVisibleHeight/ae.totalHeight,ae.barLength=Math.max(ae.ratio*ae.currentlyVisibleHeight,T.goldenRatio*T.scrollbarWidth),ae.barWiggleRoom=ae.currentlyVisibleHeight-ae.barLength,ae.wiggleRoom=Math.max(0,ae.totalHeight-ae.scrollableAreaHeight),ae.topY=ae.barWiggleRoom===0?0:se.scrollY/ae.wiggleRoom*ae.barWiggleRoom,ae.bottomY=ae.topY+ae.barLength,ae.dragMultiplier=ae.wiggleRoom/ae.barWiggleRoom}).attr("transform",function(se){var ae=se.width+T.scrollbarWidth/2+T.scrollbarOffset;return i(ae,A(se))});var J=Q.selectAll("."+T.cn.scrollbar).data(b.repeat,b.keyFun);J.enter().append("g").classed(T.cn.scrollbar,!0);var K=J.selectAll("."+T.cn.scrollbarSlider).data(b.repeat,b.keyFun);K.enter().append("g").classed(T.cn.scrollbarSlider,!0),K.attr("transform",function(se){return i(0,se.scrollbarState.topY||0)});var X=K.selectAll("."+T.cn.scrollbarGlyph).data(b.repeat,b.keyFun);X.enter().append("line").classed(T.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",T.scrollbarWidth).attr("stroke-linecap","round").attr("y1",T.scrollbarWidth/2),X.attr("y2",function(se){return se.scrollbarState.barLength-T.scrollbarWidth/2}).attr("stroke-opacity",function(se){return se.columnDragInProgress||!se.scrollbarState.barWiggleRoom||ee?0:.4}),X.transition().delay(0).duration(0),X.transition().delay(T.scrollbarHideDelay).duration(T.scrollbarHideDuration).attr("stroke-opacity",0);var ie=J.selectAll("."+T.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);ie.enter().append("line").classed(T.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",T.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(se){var ae=k.event.y,ue=this.getBoundingClientRect(),ve=se.scrollbarState,ye=ae-ue.top,pe=k.scale.linear().domain([0,ve.scrollableAreaHeight]).range([0,ve.totalHeight]).clamp(!0);ve.topY<=ye&&ye<=ve.bottomY||P(te,q,null,pe(ye-ve.barLength/2))(se)}).call(k.behavior.drag().origin(function(se){return k.event.stopPropagation(),se.scrollbarState.scrollbarScrollInProgress=!0,se}).on("drag",P(te,q)).on("dragend",function(){})),ie.attr("y2",function(se){return se.scrollbarState.scrollableAreaHeight}),te._context.staticPlot&&(X.remove(),ie.remove())}function g(q,te,ee,Q){var J=function(ae){var ue=ae.selectAll("."+T.cn.columnCells).data(b.repeat,b.keyFun);return ue.enter().append("g").classed(T.cn.columnCells,!0),ue.exit().remove(),ue}(ee),K=function(ae){var ue=ae.selectAll("."+T.cn.columnCell).data(o.splitToCells,function(ve){return ve.keyWithinBlock});return ue.enter().append("g").classed(T.cn.columnCell,!0),ue.exit().remove(),ue}(J);(function(ae){ae.each(function(ue,ve){var ye=ue.calcdata.cells.font,pe=ue.column.specIndex,de={size:v(ye.size,pe,ve),color:v(ye.color,pe,ve),family:v(ye.family,pe,ve),weight:v(ye.weight,pe,ve),style:v(ye.style,pe,ve),variant:v(ye.variant,pe,ve),textcase:v(ye.textcase,pe,ve),lineposition:v(ye.lineposition,pe,ve),shadow:v(ye.shadow,pe,ve)};ue.rowNumber=ue.key,ue.align=v(ue.calcdata.cells.align,pe,ve),ue.cellBorderWidth=v(ue.calcdata.cells.line.width,pe,ve),ue.font=de})})(K);var X=function(ae){var ue=ae.selectAll("."+T.cn.cellRect).data(b.repeat,function(ve){return ve.keyWithinBlock});return ue.enter().append("rect").classed(T.cn.cellRect,!0),ue}(K);(function(ae){ae.attr("width",function(ue){return ue.column.columnWidth}).attr("stroke-width",function(ue){return ue.cellBorderWidth}).each(function(ue){var ve=k.select(this);l.stroke(ve,v(ue.calcdata.cells.line.color,ue.column.specIndex,ue.rowNumber)),l.fill(ve,v(ue.calcdata.cells.fill.color,ue.column.specIndex,ue.rowNumber))})})(X);var ie=function(ae){var ue=ae.selectAll("."+T.cn.cellTextHolder).data(b.repeat,function(ve){return ve.keyWithinBlock});return ue.enter().append("g").classed(T.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ue}(K),se=function(ae){var ue=ae.selectAll("."+T.cn.cellText).data(b.repeat,function(ve){return ve.keyWithinBlock});return ue.enter().append("text").classed(T.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ue}(ie);(function(ae){ae.each(function(ue){f.font(k.select(this),ue.font)})})(se),m(se,te,Q,q),O(K)}function m(q,te,ee,Q){q.text(function(J){var K=J.column.specIndex,X=J.rowNumber,ie=J.value,se=typeof ie=="string",ae=se&&ie.match(/<br>/i),ue=!se||ae;J.mayHaveMarkup=se&&ie.match(/[<&>]/);var ve,ye=typeof(ve=ie)=="string"&&ve.match(T.latexCheck);J.latex=ye;var pe,de,me=ye?"":v(J.calcdata.cells.prefix,K,X)||"",ke=ye?"":v(J.calcdata.cells.suffix,K,X)||"",Ce=ye?null:v(J.calcdata.cells.format,K,X)||null,ge=me+(Ce?w(Ce)(J.value):J.value)+ke;if(J.wrappingNeeded=!J.wrapped&&!ue&&!ye&&(pe=y(ge)),J.cellHeightMayIncrease=ae||ye||J.mayHaveMarkup||(pe===void 0?y(ge):pe),J.needsConvertToTspans=J.mayHaveMarkup||J.wrappingNeeded||J.latex,J.wrappingNeeded){var oe=(T.wrapSplitCharacter===" "?ge.replace(/<a href=/gi,"<a_href="):ge).split(T.wrapSplitCharacter),re=T.wrapSplitCharacter===" "?oe.map(function(fe){return fe.replace(/<a_href=/gi,"<a href=")}):oe;J.fragments=re.map(function(fe){return{text:fe,width:null}}),J.fragments.push({fragment:T.wrapSpacer,width:null}),de=re.join(T.lineBreaker)+T.lineBreaker+T.wrapSpacer}else delete J.fragments,de=ge;return de}).attr("dy",function(J){return J.needsConvertToTspans?0:"0.75em"}).each(function(J){var K=this,X=k.select(K),ie=J.wrappingNeeded?D:z;J.needsConvertToTspans?s.convertToTspans(X,Q,ie(ee,K,te,Q,J)):k.select(K.parentNode).attr("transform",function(se){return i(V(se),T.cellPad)}).attr("text-anchor",function(se){return{left:"start",center:"middle",right:"end"}[se.align]})})}function y(q){return q.indexOf(T.wrapSplitCharacter)!==-1}function v(q,te,ee){if(a.isArrayOrTypedArray(q)){var Q=q[Math.min(te,q.length-1)];return a.isArrayOrTypedArray(Q)?Q[Math.min(ee,Q.length-1)]:Q}return q}function _(q,te,ee){q.transition().ease(T.releaseTransitionEase).duration(T.releaseTransitionDuration).attr("transform",i(te.x,ee))}function h(q){return q.type==="cells"}function S(q){return q.type==="header"}function A(q){return(q.rowBlocks.length?q.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(te,ee){return te+Y(ee,1/0)},0)}function E(q,te,ee){var Q=x(te)[0];if(Q!==void 0){var J=Q.rowBlocks,K=Q.calcdata,X=j(J,J.length),ie=Q.calcdata.groupHeight-A(Q),se=K.scrollY=Math.max(0,Math.min(X-ie,K.scrollY)),ae=function(ue,ve,ye){for(var pe=[],de=0,me=0;me<ue.length;me++){for(var ke=ue[me],Ce=ke.rows,ge=0,oe=0;oe<Ce.length;oe++)ge+=Ce[oe].rowHeight;ke.allRowsHeight=ge,ve<de+ge&&ve+ye>de&&pe.push(me),de+=ge}return pe}(J,se,ie);ae.length===1&&(ae[0]===J.length-1?ae.unshift(ae[0]-1):ae.push(ae[0]+1)),ae[0]%2&&ae.reverse(),te.each(function(ue,ve){ue.page=ae[ve],ue.scrollY=se}),te.attr("transform",function(ue){var ve=j(ue.rowBlocks,ue.page)-ue.scrollY;return i(0,ve)}),q&&(I(q,ee,te,ae,Q.prevPages,Q,0),I(q,ee,te,ae,Q.prevPages,Q,1),p(ee,q))}}function P(q,te,ee,Q){return function(J){var K=J.calcdata?J.calcdata:J,X=te.filter(function(ue){return K.key===ue.key}),ie=ee||K.scrollbarState.dragMultiplier,se=K.scrollY;K.scrollY=Q===void 0?K.scrollY+ie*k.event.dy:Q;var ae=X.selectAll("."+T.cn.yColumn).selectAll("."+T.cn.columnBlock).filter(h);return E(q,ae,X),K.scrollY===se}}function I(q,te,ee,Q,J,K,X){Q[X]!==J[X]&&(clearTimeout(K.currentRepaint[X]),K.currentRepaint[X]=setTimeout(function(){var ie=ee.filter(function(se,ae){return ae===X&&Q[ae]!==J[ae]});g(q,te,ie,ee),J[X]=Q[X]}))}function D(q,te,ee,Q){return function(){var J=k.select(te.parentNode);J.each(function(K){var X=K.fragments;J.selectAll("tspan.line").each(function(de,me){X[me].width=this.getComputedTextLength()});var ie,se,ae=X[X.length-1].width,ue=X.slice(0,-1),ve=[],ye=0,pe=K.column.columnWidth-2*T.cellPad;for(K.value="";ue.length;)ye+(se=(ie=ue.shift()).width+ae)>pe&&(K.value+=ve.join(T.wrapSpacer)+T.lineBreaker,ve=[],ye=0),ve.push(ie.text),ye+=se;ye&&(K.value+=ve.join(T.wrapSpacer)),K.wrapped=!0}),J.selectAll("tspan.line").remove(),m(J.select("."+T.cn.cellText),ee,q,Q),k.select(te.parentNode.parentNode).call(O)}}function z(q,te,ee,Q,J){return function(){if(!J.settledY){var K=k.select(te.parentNode),X=U(J),ie=J.key-X.firstRowIndex,se=X.rows[ie].rowHeight,ae=J.cellHeightMayIncrease?te.parentNode.getBoundingClientRect().height+2*T.cellPad:se,ue=Math.max(ae,se);ue-X.rows[ie].rowHeight&&(X.rows[ie].rowHeight=ue,q.selectAll("."+T.cn.columnCell).call(O),E(null,q.filter(h),0),p(ee,Q,!0)),K.attr("transform",function(){var ve=this,ye=ve.parentNode.getBoundingClientRect(),pe=k.select(ve.parentNode).select("."+T.cn.cellRect).node().getBoundingClientRect(),de=ve.transform.baseVal.consolidate(),me=pe.top-ye.top+(de?de.matrix.f:T.cellPad);return i(V(J,k.select(ve.parentNode).select("."+T.cn.cellTextHolder).node().getBoundingClientRect().width),me)}),J.settledY=!0}}}function V(q,te){switch(q.align){case"left":default:return T.cellPad;case"right":return q.column.columnWidth-(te||0)-T.cellPad;case"center":return(q.column.columnWidth-(te||0))/2}}function O(q){q.attr("transform",function(te){var ee=te.rowBlocks[0].auxiliaryBlocks.reduce(function(J,K){return J+Y(K,1/0)},0),Q=Y(U(te),te.key);return i(0,Q+ee)}).selectAll("."+T.cn.cellRect).attr("height",function(te){return(ee=U(te),Q=te.key,ee.rows[Q-ee.firstRowIndex]).rowHeight;var ee,Q})}function j(q,te){for(var ee=0,Q=te-1;Q>=0;Q--)ee+=B(q[Q]);return ee}function Y(q,te){for(var ee=0,Q=0;Q<q.rows.length&&q.rows[Q].rowIndex<te;Q++)ee+=q.rows[Q].rowHeight;return ee}function B(q){var te=q.allRowsHeight;if(te!==void 0)return te;for(var ee=0,Q=0;Q<q.rows.length;Q++)ee+=q.rows[Q].rowHeight;return q.allRowsHeight=ee,ee}function U(q){return q.rowBlocks[q.page]}F.exports=function(q,te){var ee=!q._context.staticPlot,Q=q._fullLayout._paper.selectAll("."+T.cn.table).data(te.map(function(ke){var Ce=b.unwrap(ke).trace;return n(q,Ce)}),b.keyFun);Q.exit().remove(),Q.enter().append("g").classed(T.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),Q.attr("width",function(ke){return ke.width+ke.size.l+ke.size.r}).attr("height",function(ke){return ke.height+ke.size.t+ke.size.b}).attr("transform",function(ke){return i(ke.translateX,ke.translateY)});var J=Q.selectAll("."+T.cn.tableControlView).data(b.repeat,b.keyFun),K=J.enter().append("g").classed(T.cn.tableControlView,!0).style("box-sizing","content-box");if(ee){var X="onwheel"in document?"wheel":"mousewheel";K.on("mousemove",function(ke){J.filter(function(Ce){return ke===Ce}).call(p,q)}).on(X,function(ke){if(!ke.scrollbarState.wheeling){ke.scrollbarState.wheeling=!0;var Ce=ke.scrollY+k.event.deltaY;P(q,J,null,Ce)(ke)||(k.event.stopPropagation(),k.event.preventDefault()),ke.scrollbarState.wheeling=!1}}).call(p,q,!0)}J.attr("transform",function(ke){return i(ke.size.l,ke.size.t)});var ie=J.selectAll("."+T.cn.scrollBackground).data(b.repeat,b.keyFun);ie.enter().append("rect").classed(T.cn.scrollBackground,!0).attr("fill","none"),ie.attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}),J.each(function(ke){f.setClipUrl(k.select(this),d(q,ke),q)});var se=J.selectAll("."+T.cn.yColumn).data(function(ke){return ke.columns},b.keyFun);se.enter().append("g").classed(T.cn.yColumn,!0),se.exit().remove(),se.attr("transform",function(ke){return i(ke.x,0)}),ee&&se.call(k.behavior.drag().origin(function(ke){return _(k.select(this),ke,-T.uplift),t(this),ke.calcdata.columnDragInProgress=!0,p(J.filter(function(Ce){return ke.calcdata.key===Ce.key}),q),ke}).on("drag",function(ke){var Ce=k.select(this),ge=function(oe){return(ke===oe?k.event.x:oe.x)+oe.columnWidth/2};ke.x=Math.max(-T.overdrag,Math.min(ke.calcdata.width+T.overdrag-ke.columnWidth,k.event.x)),x(se).filter(function(oe){return oe.calcdata.key===ke.calcdata.key}).sort(function(oe,re){return ge(oe)-ge(re)}).forEach(function(oe,re){oe.xIndex=re,oe.x=ke===oe?oe.x:oe.xScale(oe)}),se.filter(function(oe){return ke!==oe}).transition().ease(T.transitionEase).duration(T.transitionDuration).attr("transform",function(oe){return i(oe.x,0)}),Ce.call(r).attr("transform",i(ke.x,-T.uplift))}).on("dragend",function(ke){var Ce=k.select(this),ge=ke.calcdata;ke.x=ke.xScale(ke),ke.calcdata.columnDragInProgress=!1,_(Ce,ke,0),function(oe,re,fe){var Se=re.gdColumnsOriginalOrder;re.gdColumns.sort(function(be,we){return fe[Se.indexOf(be)]-fe[Se.indexOf(we)]}),re.columnorder=fe,oe.emit("plotly_restyle")}(q,ge,ge.columns.map(function(oe){return oe.xIndex}))})),se.each(function(ke){f.setClipUrl(k.select(this),u(q,ke),q)});var ae=se.selectAll("."+T.cn.columnBlock).data(o.splitToPanels,b.keyFun);ae.enter().append("g").classed(T.cn.columnBlock,!0).attr("id",function(ke){return ke.key}),ae.style("cursor",function(ke){return ke.dragHandle?"ew-resize":ke.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ue=ae.filter(S),ve=ae.filter(h);ee&&ve.call(k.behavior.drag().origin(function(ke){return k.event.stopPropagation(),ke}).on("drag",P(q,J,-1)).on("dragend",function(){})),g(q,J,ue,ae),g(q,J,ve,ae);var ye=J.selectAll("."+T.cn.scrollAreaClip).data(b.repeat,b.keyFun);ye.enter().append("clipPath").classed(T.cn.scrollAreaClip,!0).attr("id",function(ke){return d(q,ke)});var pe=ye.selectAll("."+T.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);pe.enter().append("rect").classed(T.cn.scrollAreaClipRect,!0).attr("x",-T.overdrag).attr("y",-T.uplift).attr("fill","none"),pe.attr("width",function(ke){return ke.width+2*T.overdrag}).attr("height",function(ke){return ke.height+T.uplift}),se.selectAll("."+T.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(T.cn.columnBoundary,!0);var de=se.selectAll("."+T.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);de.enter().append("clipPath").classed(T.cn.columnBoundaryClippath,!0),de.attr("id",function(ke){return u(q,ke)});var me=de.selectAll("."+T.cn.columnBoundaryRect).data(b.repeat,b.keyFun);me.enter().append("rect").classed(T.cn.columnBoundaryRect,!0).attr("fill","none"),me.attr("width",function(ke){return ke.columnWidth+2*c(ke)}).attr("height",function(ke){return ke.calcdata.height+2*c(ke)+T.uplift}).attr("x",function(ke){return-c(ke)}).attr("y",function(ke){return-c(ke)}),E(null,ve,J)}},40516:function(F,C,e){"use strict";var T=e(21776).Ks,k=e(21776).Gw,a=e(49084),w=e(86968).u,b=e(74996),f=e(424),s=e(32984),t=e(92880).extendFlat,i=e(98192).c;F.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:f.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:f.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},a("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:f.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:f.hoverinfo,hovertemplate:T({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:f.root,domain:w({name:"treemap",trace:!0,editType:"calc"})}},79516:function(F,C,e){"use strict";var T=e(7316);C.name="treemap",C.plot=function(k,a,w,b){T.plotBasePlot(C.name,k,a,w,b)},C.clean=function(k,a,w,b){T.cleanBasePlot(C.name,k,a,w,b)}},97840:function(F,C,e){"use strict";var T=e(3776);C.r=function(k,a){return T.calc(k,a)},C.q=function(k){return T._runCrossTraceCalc("treemap",k)}},32984:function(F){"use strict";F.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(F,C,e){"use strict";var T=e(3400),k=e(40516),a=e(76308),w=e(86968).Q,b=e(31508).handleText,f=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,r=t.handleDefaults;F.exports=function(n,o,l,c){function d(_,h){return T.coerce(n,o,k,_,h)}var u=d("labels"),x=d("parents");if(u&&u.length&&x&&x.length){var p=d("values");p&&p.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.packing")==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var g=d("text");d("texttemplate"),o.texttemplate||d("textinfo",T.isArrayOrTypedArray(g)?"text+label":"label"),d("hovertext"),d("hovertemplate");var m=d("pathbar.visible");b(n,o,c,d,"auto",{hasPathbar:m,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var y=o.textposition.indexOf("bottom")!==-1;s(n,o,c,d),(o._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis)?r(n,o,c,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(o.marker.colors||[]).length);var v=2*o.textfont.size;d("marker.pad.t",y?v/4:v),d("marker.pad.l",v/4),d("marker.pad.r",v/4),d("marker.pad.b",y?v:v/4),d("marker.cornerradius"),o._hovered={marker:{line:{width:2,color:a.contrast(c.paper_bgcolor)}}},m&&(d("pathbar.thickness",o.pathbar.textfont.size+2*f),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),w(o,c,d),o._length=null}else o.visible=!1}},95808:function(F,C,e){"use strict";var T=e(33428),k=e(78176),a=e(82744).clearMinTextSize,w=e(60100).resizeText,b=e(52960);F.exports=function(f,s,t,i,r){var n,o,l=r.type,c=r.drawDescendants,d=f._fullLayout,u=d["_"+l+"layer"],x=!t;a(l,d),(n=u.selectAll("g.trace."+l).data(s,function(p){return p[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),n.order(),!d.uniformtext.mode&&k.hasTransition(t)?(i&&(o=i()),T.transition().duration(t.duration).ease(t.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){u.selectAll("g.trace").each(function(p){b(f,p,this,t,c)})})):(n.each(function(p){b(f,p,this,t,c)}),d.uniformtext.mode&&w(f,u.selectAll(".trace"),l)),x&&n.exit().remove()}},27336:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(72736),b=e(13832),f=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),r=!0;F.exports=function(n,o,l,c,d){var u=d.barDifY,x=d.width,p=d.height,g=d.viewX,m=d.viewY,y=d.pathSlice,v=d.toMoveInsideSlice,_=d.strTransform,h=d.hasTransition,S=d.handleSlicesExit,A=d.makeUpdateSliceInterpolator,E=d.makeUpdateTextInterpolator,P={},I=n._context.staticPlot,D=n._fullLayout,z=o[0],V=z.trace,O=z.hierarchy,j=x/V._entryDepth,Y=t.listPath(l.data,"id"),B=b(O.copy(),[x,p],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(B=B.filter(function(q){var te=Y.indexOf(q.data.id);return te!==-1&&(q.x0=j*te,q.x1=j*(te+1),q.y0=u,q.y1=u+p,q.onPathbar=!0,!0)})).reverse(),(c=c.data(B,t.getPtId)).enter().append("g").classed("pathbar",!0),S(c,r,P,[x,p],y),c.order();var U=c;h&&(U=U.transition().each("end",function(){var q=T.select(this);t.setSliceCursor(q,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(q){q._x0=g(q.x0),q._x1=g(q.x1),q._y0=m(q.y0),q._y1=m(q.y1),q._hoverX=g(q.x1-Math.min(x,p)/2),q._hoverY=m(q.y1-p/2);var te=T.select(this),ee=k.ensureSingle(te,"path","surface",function(X){X.style("pointer-events",I?"none":"all")});h?ee.transition().attrTween("d",function(X){var ie=A(X,r,P,[x,p]);return function(se){return y(ie(se))}}):ee.attr("d",y),te.call(i,l,n,o,{styleOne:f,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),ee.call(f,q,V,n,{hovered:!1}),q._text=(t.getPtLabel(q)||"").split("<br>").join(" ")||"";var Q=k.ensureSingle(te,"g","slicetext"),J=k.ensureSingle(Q,"text","",function(X){X.attr("data-notex",1)}),K=k.ensureUniformFontSize(n,t.determineTextFont(V,q,D.font,{onPathbar:!0}));J.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(a.font,K).call(w.convertToTspans,n),q.textBB=a.bBox(J.node()),q.transform=v(q,{fontSize:K.size,onPathbar:!0}),q.transform.fontSize=K.size,h?J.transition().attrTween("transform",function(X){var ie=E(X,r,P,[x,p]);return function(se){return _(ie(se))}}):J.attr("transform",_(q))})}},76477:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(72736),b=e(13832),f=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),r=e(96488).formatSliceLabel,n=!1;F.exports=function(o,l,c,d,u){var x=u.width,p=u.height,g=u.viewX,m=u.viewY,y=u.pathSlice,v=u.toMoveInsideSlice,_=u.strTransform,h=u.hasTransition,S=u.handleSlicesExit,A=u.makeUpdateSliceInterpolator,E=u.makeUpdateTextInterpolator,P=u.prevEntry,I=o._context.staticPlot,D=o._fullLayout,z=l[0].trace,V=z.textposition.indexOf("left")!==-1,O=z.textposition.indexOf("right")!==-1,j=z.textposition.indexOf("bottom")!==-1,Y=!j&&!z.marker.pad.t||j&&!z.marker.pad.b,B=b(c,[x,p],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),U=1/0,q=-1/0;B.forEach(function(K){var X=K.depth;X>=z._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(U=Math.min(U,X),q=Math.max(q,X))}),d=d.data(B,t.getPtId),z._maxVisibleLayers=isFinite(q)?q-U+1:0,d.enter().append("g").classed("slice",!0),S(d,n,{},[x,p],y),d.order();var te=null;if(h&&P){var ee=t.getPtId(P);d.each(function(K){te===null&&t.getPtId(K)===ee&&(te={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var Q=function(){return te||{x0:0,x1:x,y0:0,y1:p}},J=d;return h&&(J=J.transition().each("end",function(){var K=T.select(this);t.setSliceCursor(K,o,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(K){var X=t.isHeader(K,z);K._x0=g(K.x0),K._x1=g(K.x1),K._y0=m(K.y0),K._y1=m(K.y1),K._hoverX=g(K.x1-z.marker.pad.r),K._hoverY=m(j?K.y1-z.marker.pad.b/2:K.y0+z.marker.pad.t/2);var ie=T.select(this),se=k.ensureSingle(ie,"path","surface",function(de){de.style("pointer-events",I?"none":"all")});h?se.transition().attrTween("d",function(de){var me=A(de,n,Q(),[x,p]);return function(ke){return y(me(ke))}}):se.attr("d",y),ie.call(i,c,o,l,{styleOne:f,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,o,{isTransitioning:o._transitioning}),se.call(f,K,z,o,{hovered:!1}),K.x0===K.x1||K.y0===K.y1?K._text="":K._text=X?Y?"":t.getPtLabel(K)||"":r(K,c,z,l,D)||"";var ae=k.ensureSingle(ie,"g","slicetext"),ue=k.ensureSingle(ae,"text","",function(de){de.attr("data-notex",1)}),ve=k.ensureUniformFontSize(o,t.determineTextFont(z,K,D.font)),ye=K._text||" ",pe=X&&ye.indexOf("<br>")===-1;ue.text(ye).classed("slicetext",!0).attr("text-anchor",O?"end":V||pe?"start":"middle").call(a.font,ve).call(w.convertToTspans,o),K.textBB=a.bBox(ue.node()),K.transform=v(K,{fontSize:ve.size,isHeader:X}),K.transform.fontSize=ve.size,h?ue.transition().attrTween("transform",function(de){var me=E(de,n,Q(),[x,p]);return function(ke){return _(me(ke))}}):ue.attr("transform",_(K))}),te}},83024:function(F){"use strict";F.exports=function C(e,T,k){var a;k.swapXY&&(a=e.x0,e.x0=e.y0,e.y0=a,a=e.x1,e.x1=e.y1,e.y1=a),k.flipX&&(a=e.x0,e.x0=T[0]-e.x1,e.x1=T[0]-a),k.flipY&&(a=e.y0,e.y0=T[1]-e.y1,e.y1=T[1]-a);var w=e.children;if(w)for(var b=0;b<w.length;b++)C(w[b],T,k)}},31991:function(F,C,e){"use strict";F.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(F){"use strict";F.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(F,C,e){"use strict";var T=e(3400),k=e(45392);F.exports=function(a,w){function b(f,s){return T.coerce(a,w,k,f,s)}b("treemapcolorway",w.colorway),b("extendtreemapcolors")}},13832:function(F,C,e){"use strict";var T=e(74148),k=e(83024);F.exports=function(a,w,b){var f,s=b.flipX,t=b.flipY,i=b.packing==="dice-slice",r=b.pad[t?"bottom":"top"],n=b.pad[s?"right":"left"],o=b.pad[s?"left":"right"],l=b.pad[t?"top":"bottom"];i&&(f=n,n=r,r=f,f=o,o=l,l=f);var c=T.treemap().tile(function(d,u){switch(d){case"squarify":return T.treemapSquarify.ratio(u);case"binary":return T.treemapBinary;case"dice":return T.treemapDice;case"slice":return T.treemapSlice;default:return T.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(n).paddingRight(o).paddingTop(r).paddingBottom(l).size(i?[w[1],w[0]]:w)(a);return(i||s||t)&&k(c,w,{swapXY:i,flipX:s,flipY:t}),c}},53264:function(F,C,e){"use strict";var T=e(95808),k=e(76477);F.exports=function(a,w,b,f){return T(a,w,b,f,{type:"treemap",drawDescendants:k})}},52960:function(F,C,e){"use strict";var T=e(33428),k=e(67756).qy,a=e(78176),w=e(3400),b=e(78048).TEXTPAD,f=e(98184).toMoveInsideBar,s=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function r(n){return a.isHierarchyRoot(n)?"":a.getPtId(n)}F.exports=function(n,o,l,c,d){var u=n._fullLayout,x=o[0],p=x.trace,g=p.type==="icicle",m=x.hierarchy,y=a.findEntryWithLevel(m,p.level),v=T.select(l),_=v.selectAll("g.pathbar"),h=v.selectAll("g.slice");if(!y)return _.remove(),void h.remove();var S=a.isHierarchyRoot(y),A=!u.uniformtext.mode&&a.hasTransition(c),E=a.getMaxDepth(p),P=u._size,I=p.domain,D=P.w*(I.x[1]-I.x[0]),z=P.h*(I.y[1]-I.y[0]),V=D,O=p.pathbar.thickness,j=p.marker.line.width+t.gapWithPathbar,Y=p.pathbar.visible?p.pathbar.side.indexOf("bottom")>-1?z+j:-(O+j):0,B={x0:V,x1:V,y0:Y,y1:Y+O},U=function(_e,Ae,Oe){var Ee=p.tiling.pad,Be=function(at){return at-Ee<=Ae.x0},Ve=function(at){return at+Ee>=Ae.x1},Ze=function(at){return at-Ee<=Ae.y0},it=function(at){return at+Ee>=Ae.y1};return _e.x0===Ae.x0&&_e.x1===Ae.x1&&_e.y0===Ae.y0&&_e.y1===Ae.y1?{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1}:{x0:Be(_e.x0-Ee)?0:Ve(_e.x0-Ee)?Oe[0]:_e.x0,x1:Be(_e.x1+Ee)?0:Ve(_e.x1+Ee)?Oe[0]:_e.x1,y0:Ze(_e.y0-Ee)?0:it(_e.y0-Ee)?Oe[1]:_e.y0,y1:Ze(_e.y1+Ee)?0:it(_e.y1+Ee)?Oe[1]:_e.y1}},q=null,te={},ee={},Q=null,J=function(_e,Ae){return Ae?te[r(_e)]:ee[r(_e)]};x.hasMultipleRoots&&S&&E++,p._maxDepth=E,p._backgroundColor=u.paper_bgcolor,p._entryDepth=y.data.depth,p._atRootLevel=S;var K=-D/2+P.l+P.w*(I.x[1]+I.x[0])/2,X=-z/2+P.t+P.h*(1-(I.y[1]+I.y[0])/2),ie=function(_e){return K+_e},se=function(_e){return X+_e},ae=se(0),ue=ie(0),ve=function(_e){return ue+_e},ye=function(_e){return ae+_e};function pe(_e,Ae){return _e+","+Ae}var de=ve(0),me=function(_e){_e.x=Math.max(de,_e.x)},ke=p.pathbar.edgeshape,Ce=p[g?"tiling":"marker"].pad,ge=function(_e){return p.textposition.indexOf(_e)!==-1},oe=ge("top"),re=ge("left"),fe=ge("right"),Se=ge("bottom"),be=function(_e,Ae){var Oe=_e.x0,Ee=_e.x1,Be=_e.y0,Ve=_e.y1,Ze=_e.textBB,it=oe||Ae.isHeader&&!Se?"start":Se?"end":"middle",at=ge("right"),gt=ge("left")||Ae.onPathbar?-1:at?1:0;if(Ae.isHeader){if((Oe+=(g?Ce:Ce.l)-b)>=(Ee-=(g?Ce:Ce.r)-b)){var yt=(Oe+Ee)/2;Oe=yt,Ee=yt}var pt;Se?Be<(pt=Ve-(g?Ce:Ce.b))&&pt<Ve&&(Be=pt):Be<(pt=Be+(g?Ce:Ce.t))&&pt<Ve&&(Ve=pt)}var et=f(Oe,Ee,Be,Ve,Ze,{isHorizontal:!1,constrained:!0,angle:0,anchor:it,leftToRight:gt});return et.fontSize=Ae.fontSize,et.targetX=ie(et.targetX),et.targetY=se(et.targetY),isNaN(et.targetX)||isNaN(et.targetY)?{}:(Oe!==Ee&&Be!==Ve&&s(p.type,et,u),{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY})},we=function(_e,Ae){for(var Oe,Ee=0,Be=_e;!Oe&&Ee<E;)Ee++,(Be=Be.parent)?Oe=J(Be,Ae):Ee=E;return Oe||{}},Me=function(_e,Ae,Oe,Ee,Be){var Ve,Ze=J(_e,Ae);if(Ze)Ve=Ze;else if(Ae)Ve=B;else if(q)if(_e.parent){var it=Q||Oe;it&&!Ae?Ve=U(_e,it,Ee):(Ve={},w.extendFlat(Ve,we(_e,Ae)))}else Ve=w.extendFlat({},_e),g&&(Be.orientation==="h"?Be.flipX?Ve.x0=_e.x1:Ve.x1=0:Be.flipY?Ve.y0=_e.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1})},Pe=function(_e,Ae,Oe,Ee){var Be=J(_e,Ae),Ve={},Ze=function(at,gt,yt,pt){if(gt)return te[r(m)]||B;var et=ee[p.level]||yt;return function($e){return $e.data.depth-y.data.depth<E}(at)?U(at,et,pt):{}}(_e,Ae,Oe,Ee);w.extendFlat(Ve,{transform:be({x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,textBB:_e.textBB,_text:_e._text},{isHeader:a.isHeader(_e,p)})}),Be?Ve=Be:_e.parent&&w.extendFlat(Ve,we(_e,Ae));var it=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&s(p.type,it,u),k(Ve,{transform:{scale:it.scale,rotate:it.rotate,textX:it.textX,textY:it.textY,anchorX:it.anchorX,anchorY:it.anchorY,targetX:it.targetX,targetY:it.targetY}})},De=function(_e,Ae,Oe,Ee,Be){var Ve=Ee[0],Ze=Ee[1];A?_e.exit().transition().each(function(){var it=T.select(this);it.select("path.surface").transition().attrTween("d",function(at){var gt=function(yt,pt,et,$e){var At,Ot=J(yt,pt);if(pt)At=B;else{var Rt=J(y,pt);At=Rt?U(yt,Rt,$e):{}}return k(Ot,At)}(at,Ae,0,[Ve,Ze]);return function(yt){return Be(gt(yt))}}),it.select("g.slicetext").attr("opacity",0)}).remove():_e.exit().remove()},he=function(_e){var Ae=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&s(p.type,Ae,u),w.getTextTransform({textX:Ae.textX,textY:Ae.textY,anchorX:Ae.anchorX,anchorY:Ae.anchorY,targetX:Ae.targetX,targetY:Ae.targetY,scale:Ae.scale,rotate:Ae.rotate})};A&&(_.each(function(_e){te[r(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&(te[r(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate})}),h.each(function(_e){ee[r(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&(ee[r(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate}),!q&&a.isEntry(_e)&&(q=_e)})),Q=d(n,o,y,h,{width:D,height:z,viewX:ie,viewY:se,pathSlice:function(_e){var Ae=ie(_e.x0),Oe=ie(_e.x1),Ee=se(_e.y0),Be=se(_e.y1),Ve=Oe-Ae,Ze=Be-Ee;if(!Ve||!Ze)return"";var it=p.marker.cornerradius||0,at=Math.min(it,Ve/2,Ze/2);at&&_e.data&&_e.data.data&&_e.data.data.label&&(oe&&(at=Math.min(at,Ce.t)),re&&(at=Math.min(at,Ce.l)),fe&&(at=Math.min(at,Ce.r)),Se&&(at=Math.min(at,Ce.b)));var gt=function(yt,pt){return at?"a"+pe(at,at)+" 0 0 1 "+pe(yt,pt):""};return"M"+pe(Ae,Ee+at)+gt(at,-at)+"L"+pe(Oe-at,Ee)+gt(at,at)+"L"+pe(Oe,Be-at)+gt(-at,at)+"L"+pe(Ae+at,Be)+gt(-at,-at)+"Z"},toMoveInsideSlice:be,prevEntry:q,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Pe,handleSlicesExit:De,hasTransition:A,strTransform:he}),p.pathbar.visible?i(n,o,y,_,{barDifY:Y,width:V,height:O,viewX:ve,viewY:ye,pathSlice:function(_e){var Ae=ve(Math.max(Math.min(_e.x0,_e.x0),0)),Oe=ve(Math.min(Math.max(_e.x1,_e.x1),V)),Ee=ye(_e.y0),Be=ye(_e.y1),Ve=O/2,Ze={},it={};Ze.x=Ae,it.x=Oe,Ze.y=it.y=(Ee+Be)/2;var at={x:Ae,y:Ee},gt={x:Oe,y:Ee},yt={x:Oe,y:Be},pt={x:Ae,y:Be};return ke===">"?(at.x-=Ve,gt.x-=Ve,yt.x-=Ve,pt.x-=Ve):ke==="/"?(yt.x-=Ve,pt.x-=Ve,Ze.x-=Ve/2,it.x-=Ve/2):ke==="\\"?(at.x-=Ve,gt.x-=Ve,Ze.x-=Ve/2,it.x-=Ve/2):ke==="<"&&(Ze.x-=Ve,it.x-=Ve),me(at),me(pt),me(Ze),me(gt),me(yt),me(it),"M"+pe(at.x,at.y)+"L"+pe(gt.x,gt.y)+"L"+pe(it.x,it.y)+"L"+pe(yt.x,yt.y)+"L"+pe(pt.x,pt.y)+"L"+pe(Ze.x,Ze.y)+"Z"},toMoveInsideSlice:be,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Pe,handleSlicesExit:De,hasTransition:A,strTransform:he}):_.remove()}},66192:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(3400),w=e(78176),b=e(82744).resizeText,f=e(60404);function s(t,i,r,n,o){var l,c,d=(o||{}).hovered,u=i.data.data,x=u.i,p=u.color,g=w.isHierarchyRoot(i),m=1;if(d)l=r._hovered.marker.line.color,c=r._hovered.marker.line.width;else if(g&&p===r.root.color)m=100,l="rgba(0,0,0,0)",c=0;else if(l=a.castOption(r,x,"marker.line.color")||k.defaultLine,c=a.castOption(r,x,"marker.line.width")||0,!r._hasColorscale&&!i.onPathbar){var y=r.marker.depthfade;if(y){var v,_=k.combine(k.addOpacity(r._backgroundColor,.75),p);if(y===!0){var h=w.getMaxDepth(r);v=isFinite(h)?w.isLeaf(i)?0:r._maxVisibleLayers-(i.data.depth-r._entryDepth):i.data.height+1}else v=i.data.depth-r._entryDepth,r._atRootLevel||v++;if(v>0)for(var S=0;S<v;S++){var A=.5*S/v;p=k.combine(k.addOpacity(_,A),p)}}}t.call(f,i,r,n,p).style("stroke-width",c).call(k.stroke,l).style("opacity",m)}F.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");b(t,i,"treemap"),i.each(function(r){var n=T.select(this),o=r[0].trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(l){T.select(this).call(s,l,o,t,{hovered:!1})})})},styleOne:s}},13988:function(F,C,e){"use strict";var T=e(63188),k=e(92880).extendFlat,a=e(29736).axisHoverFormat;F.exports={y:T.y,x:T.x,x0:T.x0,y0:T.y0,xhoverformat:a("x"),yhoverformat:a("y"),name:k({},T.name,{}),orientation:k({},T.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:T.fillcolor,points:k({},T.boxpoints,{}),jitter:k({},T.jitter,{}),pointpos:k({},T.pointpos,{}),width:k({},T.width,{}),marker:T.marker,text:T.text,hovertext:T.hovertext,hovertemplate:T.hovertemplate,quartilemethod:T.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,selected:T.selected,unselected:T.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:T.zorder}},67064:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(62555),w=e(63800),b=e(39032).BADNUM;function f(t,i,r){var n=i.max-i.min;if(!n)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,n/1e4);var o=r.length,l=T.stdev(r,o-1,i.mean);return Math.max(function(c,d,u){return 1.059*Math.min(d,u/1.349)*Math.pow(c,-.2)}(o,l,i.q3-i.q1),n/100)}function s(t,i,r,n){var o,l=t.spanmode,c=t.span||[],d=[i.min,i.max],u=[i.min-2*n,i.max+2*n];function x(g){var m=c[g],y=r.type==="multicategory"?r.r2c(m):r.d2c(m,0,t[i.valLetter+"calendar"]);return y===b?u[g]:y}var p={type:"linear",range:o=l==="soft"?u:l==="hard"?d:[x(0),x(1)]};return k.setConvert(p),p.cleanRange(),o}F.exports=function(t,i){var r=a(t,i);if(r[0].t.empty)return r;for(var n=t._fullLayout,o=k.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),l=1/0,c=-1/0,d=0,u=0,x=0;x<r.length;x++){var p=r[x],g=p.pts.map(w.extractVal),m=p.bandwidth=f(i,p,g),y=p.span=s(i,p,o,m);if(p.min===p.max&&m===0)y=p.span=[p.min,p.max],p.density=[{v:1,t:y[0]}],p.bandwidth=m,d=Math.max(d,1);else{var v=y[1]-y[0],_=Math.ceil(v/(m/3)),h=v/_;if(!isFinite(h)||!isFinite(_))return T.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=w.makeKDE(p,i,g);p.density=new Array(_);for(var A=0,E=y[0];E<y[1]+h/2;A++,E+=h){var P=S(E);p.density[A]={v:P,t:E},d=Math.max(d,P)}}u=Math.max(u,g.length),l=Math.min(l,y[0]),c=Math.max(c,y[1])}var I=k.findExtremes(o,[l,c],{padded:!0});if(i._extremes[o._id]=I,i.width)r[0].t.maxKDE=d;else{var D=n._violinScaleGroupStats,z=i.scalegroup,V=D[z];V?(V.maxKDE=Math.max(V.maxKDE,d),V.maxCount=Math.max(V.maxCount,u)):D[z]={maxKDE:d,maxCount:u}}return r[0].t.labels.kde=T._(t,"kde:"),r}},14348:function(F,C,e){"use strict";var T=e(96404).setPositionOffset,k=["v","h"];F.exports=function(a,w){for(var b=a.calcdata,f=w.xaxis,s=w.yaxis,t=0;t<k.length;t++){for(var i=k[t],r=i==="h"?s:f,n=[],o=0;o<b.length;o++){var l=b[o],c=l[0].t,d=l[0].trace;d.visible!==!0||d.type!=="violin"||c.empty||d.orientation!==i||d.xaxis!==f._id||d.yaxis!==s._id||n.push(o)}T("violin",a,n,r)}}},36240:function(F,C,e){"use strict";var T=e(3400),k=e(76308),a=e(90624),w=e(13988);F.exports=function(b,f,s,t){function i(v,_){return T.coerce(b,f,w,v,_)}function r(v,_){return T.coerce2(b,f,w,v,_)}if(a.handleSampleDefaults(b,f,i,t),f.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",f.name),i("scalemode"));var n,o=i("span");Array.isArray(o)&&(n="manual"),i("spanmode",n);var l=i("line.color",(b.marker||{}).color||s),c=i("line.width"),d=i("fillcolor",k.addOpacity(f.line.color,.5));a.handlePointsDefaults(b,f,i,{prefix:""});var u=r("box.width"),x=r("box.fillcolor",d),p=r("box.line.color",l),g=r("box.line.width",c);i("box.visible",!!(u||x||p||g))||(f.box={visible:!1});var m=r("meanline.color",l),y=r("meanline.width",c);i("meanline.visible",!!(m||y))||(f.meanline={visible:!1}),i("quartilemethod"),i("zorder")}}},63800:function(F,C,e){"use strict";var T=e(3400),k=function(a){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*a*a)};C.makeKDE=function(a,w,b){var f=b.length,s=k,t=a.bandwidth,i=1/(f*t);return function(r){for(var n=0,o=0;o<f;o++)n+=s((r-b[o])/t);return i*n}},C.getPositionOnKdePath=function(a,w,b){var f,s;w.orientation==="h"?(f="y",s="x"):(f="x",s="y");var t=T.findPointOnPath(a.path,b,s,{pathLength:a.pathLength}),i=a.posCenterPx,r=t[f];return[r,w.side==="both"?2*i-r:i]},C.getKdeValue=function(a,w,b){var f=a.pts.map(C.extractVal);return C.makeKDE(a,w,f)(b)/a.posDensityScale},C.extractVal=function(a){return a.v}},78e3:function(F,C,e){"use strict";var T=e(76308),k=e(3400),a=e(54460),w=e(27576),b=e(63800);F.exports=function(f,s,t,i,r){r||(r={});var n,o,l=r.hoverLayer,c=f.cd,d=c[0].trace,u=d.hoveron,x=u.indexOf("violins")!==-1,p=u.indexOf("kde")!==-1,g=[];if(x||p){var m=w.hoverOnBoxes(f,s,t,i);if(p&&m.length>0){var y,v,_,h,S,A=f.xa,E=f.ya;d.orientation==="h"?(S=s,y="y",_=E,v="x",h=A):(S=t,y="x",_=A,v="y",h=E);var P=c[f.index];if(S>=P.span[0]&&S<=P.span[1]){var I=k.extendFlat({},f),D=h.c2p(S,!0),z=b.getKdeValue(P,d,S),V=b.getPositionOnKdePath(P,d,D),O=_._offset,j=_._length;I[y+"0"]=V[0],I[y+"1"]=V[1],I[v+"0"]=I[v+"1"]=D,I[v+"Label"]=v+": "+a.hoverLabelText(h,S,d[v+"hoverformat"])+", "+c[0].t.labels.kde+" "+z.toFixed(3);for(var Y=0,B=0;B<m.length;B++)if(m[B].attr==="med"){Y=B;break}I.spikeDistance=m[Y].spikeDistance;var U=y+"Spike";I[U]=m[Y][U],m[Y].spikeDistance=void 0,m[Y][U]=void 0,I.hovertemplate=!1,g.push(I),(o={})[y+"1"]=k.constrain(O+V[0],O,O+j),o[y+"2"]=k.constrain(O+V[1],O,O+j),o[v+"1"]=o[v+"2"]=h._offset+D}}x&&(g=g.concat(m))}u.indexOf("points")!==-1&&(n=w.hoverOnPoints(f,s,t));var q=l.selectAll(".violinline-"+d.uid).data(o?[0]:[]);return q.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),q.exit().remove(),q.attr(o).call(T.stroke,f.color),i==="closest"?n?[n]:g:(n&&g.push(n),g)}},22869:function(F,C,e){"use strict";F.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(F,C,e){"use strict";var T=e(16560),k=e(3400).extendFlat;F.exports={violinmode:k({},T.boxmode,{}),violingap:k({},T.boxgap,{}),violingroupgap:k({},T.boxgroupgap,{})}},8939:function(F,C,e){"use strict";var T=e(3400),k=e(98228),a=e(68832);F.exports=function(w,b,f){a._supply(w,b,f,function(s,t){return T.coerce(w,b,k,s,t)},"violin")}},5140:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(18728),b=e(52340),f=e(63800);F.exports=function(s,t,i,r){var n=s._context.staticPlot,o=s._fullLayout,l=t.xaxis,c=t.yaxis;function d(u,x){var p=b(u,{xaxis:l,yaxis:c,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return a.smoothopen(p[0],1)}k.makeTraceGroups(r,i,"trace violins").each(function(u){var x=T.select(this),p=u[0],g=p.t,m=p.trace;if(m.visible!==!0||g.empty)x.remove();else{var y=g.bPos,v=g.bdPos,_=t[g.valLetter+"axis"],h=t[g.posLetter+"axis"],S=m.side==="both",A=S||m.side==="positive",E=S||m.side==="negative",P=x.selectAll("path.violin").data(k.identity);P.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(B){var U,q,te,ee,Q,J,K,X,ie=T.select(this),se=B.density,ae=se.length,ue=h.c2l(B.pos+y,!0),ve=h.l2p(ue);if(m.width)U=g.maxKDE/v;else{var ye=o._violinScaleGroupStats[m.scalegroup];U=m.scalemode==="count"?ye.maxKDE/v*(ye.maxCount/B.pts.length):ye.maxKDE/v}if(A){for(K=new Array(ae),Q=0;Q<ae;Q++)(X=K[Q]={})[g.posLetter]=ue+se[Q].v/U,X[g.valLetter]=_.c2l(se[Q].t,!0);q=d(K,m)}if(E){for(K=new Array(ae),J=0,Q=ae-1;J<ae;J++,Q--)(X=K[J]={})[g.posLetter]=ue-se[Q].v/U,X[g.valLetter]=_.c2l(se[Q].t,!0);te=d(K,m)}if(S)ee=q+"L"+te.substr(1)+"Z";else{var pe=[ve,_.c2p(se[0].t)],de=[ve,_.c2p(se[ae-1].t)];m.orientation==="h"&&(pe.reverse(),de.reverse()),ee=A?"M"+pe+"L"+q.substr(1)+"L"+de:"M"+de+"L"+te.substr(1)+"L"+pe}ie.attr("d",ee),B.posCenterPx=ve,B.posDensityScale=U*v,B.path=ie.node(),B.pathLength=B.path.getTotalLength()/(S?2:1)});var I,D,z,V=m.box,O=V.width,j=(V.line||{}).width;S?(I=v*O,D=0):A?(I=[0,v*O/2],D=j*{x:1,y:-1}[g.posLetter]):(I=[v*O/2,0],D=j*{x:-1,y:1}[g.posLetter]),w.plotBoxAndWhiskers(x,{pos:h,val:_},m,{bPos:y,bdPos:I,bPosPxOffset:D}),w.plotBoxMean(x,{pos:h,val:_},m,{bPos:y,bdPos:I,bPosPxOffset:D}),!m.box.visible&&m.meanline.visible&&(z=k.identity);var Y=x.selectAll("path.meanline").data(z||[]);Y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),Y.exit().remove(),Y.each(function(B){var U=_.c2p(B.mean,!0),q=f.getPositionOnKdePath(B,m,U);T.select(this).attr("d",m.orientation==="h"?"M"+U+","+q[0]+"V"+q[1]:"M"+q[0]+","+U+"H"+q[1])}),w.plotPoints(x,{x:l,y:c},m,g)}})}},95908:function(F,C,e){"use strict";var T=e(33428),k=e(76308),a=e(49224).stylePoints;F.exports=function(w){var b=T.select(w).selectAll("g.trace.violins");b.style("opacity",function(f){return f[0].trace.opacity}),b.each(function(f){var s=f[0].trace,t=T.select(this),i=s.box||{},r=i.line||{},n=s.meanline||{},o=n.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,i.fillcolor);var l={"stroke-width":o+"px","stroke-dasharray":2*o+"px,"+o+"px"};t.selectAll("path.mean").style(l).call(k.stroke,n.color),t.selectAll("path.meanline").style(l).call(k.stroke,n.color),a(t,s,w)})}},58168:function(F,C,e){"use strict";var T=e(49084),k=e(50048),a=e(16716),w=e(45464),b=e(92880).extendFlat,f=e(67824).overrideAll,s=F.exports=f(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},T("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:a.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},w.hoverinfo),showlegend:b({},w.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},91976:function(F,C,e){"use strict";var T=e(67792).gl_mesh3d,k=e(33040).parseColorScale,a=e(3400).isArrayOrTypedArray,w=e(43080),b=e(8932).extractOpts,f=e(52094),s=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(n,o,l){this.scene=n,this.uid=l,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var r=i.prototype;r.handlePick=function(n){if(n.object===this.mesh){var o=n.data.index,l=this.data._meshX[o],c=this.data._meshY[o],d=this.data._meshZ[o],u=this.data._Ys.length,x=this.data._Zs.length,p=s(l,this.data._Xs).id,g=s(c,this.data._Ys).id,m=s(d,this.data._Zs).id,y=n.index=m+x*g+x*u*p;n.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var v=this.data.hovertext||this.data.text;return a(v)&&v[y]!==void 0?n.textLabel=v[y]:v&&(n.textLabel=v),!0}},r.update=function(n){var o=this.scene,l=o.fullSceneLayout;function c(x,p,g,m){return p.map(function(y){return x.d2l(y,0,m)*g})}this.data=t(n);var d={positions:f(c(l.xaxis,n._meshX,o.dataScale[0],n.xcalendar),c(l.yaxis,n._meshY,o.dataScale[1],n.ycalendar),c(l.zaxis,n._meshZ,o.dataScale[2],n.zcalendar)),cells:f(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,opacityscale:n.opacityscale,contourEnable:n.contour.show,contourColor:w(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},u=b(n);d.vertexIntensity=n._meshIntensity,d.vertexIntensityBounds=[u.min,u.max],d.colormap=k(n),this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},F.exports=function(n,o){var l=n.glplot.gl,c=T({gl:l}),d=new i(n,c,o.uid);return c._trace=d,d.update(o),n.glplot.add(c),d}},12448:function(F,C,e){"use strict";var T=e(3400),k=e(58168),a=e(70548).supplyIsoDefaults,w=e(60192).opacityscaleDefaults;F.exports=function(b,f,s,t){function i(r,n){return T.coerce(b,f,k,r,n)}a(b,f,s,t,i),w(b,f,t,i)}},67776:function(F,C,e){"use strict";F.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(F,C,e){"use strict";var T=e(20832),k=e(52904).line,a=e(45464),w=e(29736).axisHoverFormat,b=e(21776).Ks,f=e(21776).Gw,s=e(10213),t=e(92880).extendFlat,i=e(76308);function r(n){return{marker:{color:t({},T.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},T.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},T.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}F.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),hovertext:T.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:t({},a.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:f({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:T.text,textposition:T.textposition,insidetextanchor:T.insidetextanchor,textangle:T.textangle,textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:T.outsidetextfont,constraintext:T.constraintext,cliponaxis:T.cliponaxis,orientation:T.orientation,offset:T.offset,width:T.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,zorder:T.zorder}},73540:function(F,C,e){"use strict";var T=e(54460),k=e(1220),a=e(3400).mergeArray,w=e(4500),b=e(39032).BADNUM;function f(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}F.exports=function(t,i){var r,n,o,l,c,d,u=T.getFromId(t,i.xaxis||"x"),x=T.getFromId(t,i.yaxis||"y");i.orientation==="h"?(r=u.makeCalcdata(i,"x"),o=x.makeCalcdata(i,"y"),l=k(i,x,"y",o),c=!!i.yperiodalignment,d="y"):(r=x.makeCalcdata(i,"y"),o=u.makeCalcdata(i,"x"),l=k(i,u,"x",o),c=!!i.xperiodalignment,d="x"),n=l.vals;for(var p,g=Math.min(n.length,r.length),m=new Array(g),y=0,v=!1,_=0;_<g;_++){var h=r[_]||0,S=!1;(r[_]!==b||s(i.measure[_])||f(i.measure[_]))&&_+1<g&&(r[_+1]!==b||s(i.measure[_+1])||f(i.measure[_+1]))&&(S=!0);var A=m[_]={i:_,p:n[_],s:h,rawS:h,cNext:S};f(i.measure[_])?(y=A.s,A.isSum=!0,A.dir="totals",A.s=y):s(i.measure[_])?(A.isSum=!0,A.dir="totals",A.s=y):(A.isSum=!1,A.dir=A.rawS<0?"decreasing":"increasing",p=A.s,A.s=y+p,y+=p),A.dir==="totals"&&(v=!0),c&&(m[_].orig_p=o[_],m[_][d+"End"]=l.ends[_],m[_][d+"Start"]=l.starts[_]),i.ids&&(A.id=String(i.ids[_])),A.v=(i.base||0)+y}return m.length&&(m[0].hasTotals=v),a(i.text,m,"tx"),a(i.hovertext,m,"htx"),w(m,i),m}},10213:function(F){"use strict";F.exports={eventDataKeys:["initial","delta","final"]}},50152:function(F,C,e){"use strict";var T=e(96376).setGroupPositions;F.exports=function(k,a){var w,b,f=k._fullLayout,s=k._fullData,t=k.calcdata,i=a.xaxis,r=a.yaxis,n=[],o=[],l=[];for(b=0;b<s.length;b++){var c=s[b];c.visible===!0&&c.xaxis===i._id&&c.yaxis===r._id&&c.type==="waterfall"&&(w=t[b],c.orientation==="h"?l.push(w):o.push(w),n.push(w))}var d={mode:f.waterfallmode,norm:f.waterfallnorm,gap:f.waterfallgap,groupgap:f.waterfallgroupgap};for(T(k,i,r,o,d),T(k,r,i,l,d),b=0;b<n.length;b++){w=n[b];for(var u=0;u<w.length;u++){var x=w[u];x.isSum===!1&&(x.s0+=u===0?0:w[u-1].s),u+1<w.length&&(w[u].nextP0=w[u+1].p0,w[u].nextS0=w[u+1].s0)}}}},24224:function(F,C,e){"use strict";var T=e(3400),k=e(20011),a=e(31508).handleText,w=e(43980),b=e(31147),f=e(65776),s=e(76308),t=e(48164),i=t.INCREASING.COLOR,r=t.DECREASING.COLOR;function n(o,l,c){o(l+".marker.color",c),o(l+".marker.line.color",s.defaultLine),o(l+".marker.line.width")}F.exports={supplyDefaults:function(o,l,c,d){function u(p,g){return T.coerce(o,l,f,p,g)}if(w(o,l,d,u)){b(o,l,d,u),u("xhoverformat"),u("yhoverformat"),u("measure"),u("orientation",l.x&&!l.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var x=u("textposition");a(o,l,d,u,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(u("texttemplate"),l.texttemplate||u("textinfo")),n(u,"increasing",i),n(u,"decreasing",r),n(u,"totals","#4499FF"),u("connector.visible")&&(u("connector.mode"),u("connector.line.width")&&(u("connector.line.color"),u("connector.line.dash"))),u("zorder")}else l.visible=!1},crossTraceDefaults:function(o,l){var c,d;function u(p){return T.coerce(d._input,d,f,p)}if(l.waterfallmode==="group")for(var x=0;x<o.length;x++)c=(d=o[x])._input,k(c,d,l,u)}}},53256:function(F){"use strict";F.exports=function(C,e){return C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,"initial"in e&&(C.initial=e.initial),"delta"in e&&(C.delta=e.delta),"final"in e&&(C.final=e.final),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C}},94196:function(F,C,e){"use strict";var T=e(54460).hoverLabelText,k=e(76308).opacity,a=e(63400).hoverOnBars,w=e(48164),b=w.INCREASING.SYMBOL,f=w.DECREASING.SYMBOL;F.exports=function(s,t,i,r,n){var o=a(s,t,i,r,n);if(o){var l=o.cd,c=l[0].trace,d=c.orientation==="h",u=d?"x":"y",x=d?s.xa:s.ya,p=l[o.index],g=p.isSum?p.b+p.s:p.rawS;o.initial=p.b+p.s-g,o.delta=g,o.final=o.initial+o.delta;var m=A(Math.abs(o.delta));o.deltaLabel=g<0?"("+m+")":m,o.finalLabel=A(o.final),o.initialLabel=A(o.initial);var y=p.hi||c.hoverinfo,v=[];if(y&&y!=="none"&&y!=="skip"){var _=y==="all",h=y.split("+"),S=function(E){return _||h.indexOf(E)!==-1};p.isSum||(!S("final")||S(d?"x":"y")||v.push(o.finalLabel),S("delta")&&(g<0?v.push(o.deltaLabel+" "+f):v.push(o.deltaLabel+" "+b)),S("initial")&&v.push("Initial: "+o.initialLabel))}return v.length&&(o.extraText=v.join("<br>")),o.color=function(E,P){var I=E[P.dir].marker,D=I.color,z=I.line.color,V=I.line.width;return k(D)?D:k(z)&&V?z:void 0}(c,p),[o]}function A(E){return T(x,E,c[u+"hoverformat"])}}},95952:function(F,C,e){"use strict";F.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(F){"use strict";F.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(F,C,e){"use strict";var T=e(3400),k=e(91352);F.exports=function(a,w,b){var f=!1;function s(r,n){return T.coerce(a,w,k,r,n)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="waterfall"){f=!0;break}}f&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},64488:function(F,C,e){"use strict";var T=e(33428),k=e(3400),a=e(43616),w=e(39032).BADNUM,b=e(98184),f=e(82744).clearMinTextSize;F.exports=function(s,t,i,r){var n=s._fullLayout;f("waterfall",n),b.plot(s,t,i,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(o,l,c,d){var u=l.xaxis,x=l.yaxis;k.makeTraceGroups(d,c,"trace bars").each(function(p){var g=T.select(this),m=p[0].trace,y=k.ensureSingle(g,"g","lines");if(m.connector&&m.connector.visible){var v=m.orientation==="h",_=m.connector.mode,h=y.selectAll("g.line").data(k.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var S=h.size();h.each(function(A,E){if(E===S-1||A.cNext){var P=function(V,O,j,Y){var B=[],U=[],q=Y?O:j,te=Y?j:O;return B[0]=q.c2p(V.s0,!0),U[0]=te.c2p(V.p0,!0),B[1]=q.c2p(V.s1,!0),U[1]=te.c2p(V.p1,!0),B[2]=q.c2p(V.nextS0,!0),U[2]=te.c2p(V.nextP0,!0),Y?[B,U]:[U,B]}(A,u,x,v),I=P[0],D=P[1],z="";I[0]!==w&&D[0]!==w&&I[1]!==w&&D[1]!==w&&(_==="spanning"&&!A.isSum&&E>0&&(z+=v?"M"+I[0]+","+D[1]+"V"+D[0]:"M"+I[1]+","+D[0]+"H"+I[0]),_!=="between"&&(A.isSum||E<S-1)&&(z+=v?"M"+I[1]+","+D[0]+"V"+D[1]:"M"+I[0]+","+D[1]+"H"+I[1]),I[2]!==w&&D[2]!==w&&(z+=v?"M"+I[1]+","+D[1]+"V"+D[2]:"M"+I[1]+","+D[1]+"H"+I[2])),z===""&&(z="M0,0Z"),k.ensureSingle(T.select(this),"path").attr("d",z).call(a.setClipUrl,l.layerClipId,o)}})}else y.remove()})}(s,t,i,r)}},12252:function(F,C,e){"use strict";var T=e(33428),k=e(43616),a=e(76308),w=e(13448).DESELECTDIM,b=e(60100),f=e(82744).resizeText,s=b.styleTextPoints;F.exports={style:function(t,i,r){var n=r||T.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");f(t,n,"waterfall"),n.style("opacity",function(o){return o[0].trace.opacity}),n.each(function(o){var l=T.select(this),c=o[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var u=c[d.dir].marker;T.select(this).call(a.fill,u.color).call(a.stroke,u.line.color).call(k.dashLine,u.line.dash,u.line.width).style("opacity",c.selectedpoints&&!d.selected?w:1)}}),s(l,c,t),l.selectAll(".lines").each(function(){var d=c.connector.line;k.lineGroupStyle(T.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},84224:function(F,C,e){"use strict";var T=e(54460),k=e(3400),a=e(73060),w=e(60468).W,b=e(39032).BADNUM;C.moduleType="transform",C.name="aggregate";var f=C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=f.aggregations;function t(o,l,c,d){if(d.enabled){for(var u=d.target,x=k.nestedProperty(l,u),p=x.get(),g=function(v,_){var h=v.func,S=_.d2c,A=_.c2d;switch(h){case"count":return i;case"first":return r;case"last":return n;case"sum":return function(E,P){for(var I=0,D=0;D<P.length;D++){var z=S(E[P[D]]);z!==b&&(I+=z)}return A(I)};case"avg":return function(E,P){for(var I=0,D=0,z=0;z<P.length;z++){var V=S(E[P[z]]);V!==b&&(I+=V,D++)}return D?A(I/D):b};case"min":return function(E,P){for(var I=1/0,D=0;D<P.length;D++){var z=S(E[P[D]]);z!==b&&(I=Math.min(I,z))}return I===1/0?b:A(I)};case"max":return function(E,P){for(var I=-1/0,D=0;D<P.length;D++){var z=S(E[P[D]]);z!==b&&(I=Math.max(I,z))}return I===-1/0?b:A(I)};case"range":return function(E,P){for(var I=1/0,D=-1/0,z=0;z<P.length;z++){var V=S(E[P[z]]);V!==b&&(I=Math.min(I,V),D=Math.max(D,V))}return D===-1/0||I===1/0?b:A(D-I)};case"change":return function(E,P){var I=S(E[P[0]]),D=S(E[P[P.length-1]]);return I===b||D===b?b:A(D-I)};case"median":return function(E,P){for(var I=[],D=0;D<P.length;D++){var z=S(E[P[D]]);z!==b&&I.push(z)}if(!I.length)return b;I.sort(k.sorterAsc);var V=(I.length-1)/2;return A((I[Math.floor(V)]+I[Math.ceil(V)])/2)};case"mode":return function(E,P){for(var I={},D=0,z=b,V=0;V<P.length;V++){var O=S(E[P[V]]);if(O!==b){var j=I[O]=(I[O]||0)+1;j>D&&(D=j,z=O)}}return D?A(z):b};case"rms":return function(E,P){for(var I=0,D=0,z=0;z<P.length;z++){var V=S(E[P[z]]);V!==b&&(I+=V*V,D++)}return D?A(Math.sqrt(I/D)):b};case"stddev":return function(E,P){var I,D=0,z=0,V=1,O=b;for(I=0;I<P.length&&O===b;I++)O=S(E[P[I]]);if(O===b)return b;for(;I<P.length;I++){var j=S(E[P[I]]);if(j!==b){var Y=j-O;D+=Y,z+=Y*Y,V++}}var B=v.funcmode==="sample"?V-1:V;return B?Math.sqrt((z-D*D/V)/B):0}}}(d,T.getDataConversions(o,l,u,p)),m=new Array(c.length),y=0;y<c.length;y++)m[y]=g(p,c[y]);x.set(m),d.func==="count"&&k.pushUnique(l._arrayAttrs,u)}}function i(o,l){return l.length}function r(o,l){return o[l[0]]}function n(o,l){return o[l[l.length-1]]}C.supplyDefaults=function(o,l){var c,d={};function u(A,E){return k.coerce(o,d,f,A,E)}if(!u("enabled"))return d;var x=a.findArrayAttributes(l),p={};for(c=0;c<x.length;c++)p[x[c]]=1;var g=u("groups");if(!Array.isArray(g)){if(!p[g])return d.enabled=!1,d;p[g]=0}var m,y=o.aggregations||[],v=d.aggregations=new Array(y.length);function _(A,E){return k.coerce(y[c],m,s,A,E)}for(c=0;c<y.length;c++){m={_index:c};var h=_("target"),S=_("func");_("enabled")&&h&&(p[h]||S==="count"&&p[h]===void 0)?(S==="stddev"&&_("funcmode"),p[h]=0,v[c]=m):v[c]={enabled:!1,_index:c}}for(c=0;c<x.length;c++)p[x[c]]&&v.push({target:x[c],func:s.func.dflt,enabled:!0,_index:-1});return d},C.calcTransform=function(o,l,c){if(c.enabled){var d=c.groups,u=k.getTargetArray(l,{target:d});if(u){var x,p,g,m,y={},v={},_=[],h=w(l.transforms,c),S=u.length;for(l._length&&(S=Math.min(S,l._length)),x=0;x<S;x++)(g=y[p=u[x]])===void 0?(y[p]=_.length,m=[x],_.push(m),v[y[p]]=h(x)):(_[g].push(x),v[y[p]]=(v[y[p]]||[]).concat(h(x)));c._indexToPoints=v;var A=c.aggregations;for(x=0;x<A.length;x++)t(o,l,_,A[x]);typeof d=="string"&&t(o,l,_,{target:d,func:"first",enabled:!0}),l._length=_.length}}}},76744:function(F,C,e){"use strict";var T=e(3400),k=e(24040),a=e(54460),w=e(60468).W,b=e(69104),f=b.COMPARISON_OPS,s=b.INTERVAL_OPS,t=b.SET_OPS;C.moduleType="transform",C.name="filter",C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},C.supplyDefaults=function(i){var r={};function n(c,d){return T.coerce(i,r,C.attributes,c,d)}if(n("enabled")){var o=n("target");if(T.isArrayOrTypedArray(o)&&o.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var l=k.getComponentMethod("calendars","handleDefaults");l(i,r,"valuecalendar",null),l(i,r,"targetcalendar",null)}return r},C.calcTransform=function(i,r,n){if(n.enabled){var o=T.getTargetArray(r,n);if(o){var l=n.target,c=o.length;r._length&&(c=Math.min(c,r._length));var d=n.targetcalendar,u=r._arrayAttrs,x=n.preservegaps;if(typeof l=="string"){var p=T.nestedProperty(r,l+"calendar").get();p&&(d=p)}var g,m,y=function(P,I,D){var z=P.operation,V=P.value,O=T.isArrayOrTypedArray(V);function j(q){return q.indexOf(z)!==-1}var Y,B=function(q){return I(q,0,P.valuecalendar)},U=function(q){return I(q,0,D)};switch(j(f)?Y=B(O?V[0]:V):j(s)?Y=O?[B(V[0]),B(V[1])]:[B(V),B(V)]:j(t)&&(Y=O?V.map(B):[B(V)]),z){case"=":return function(q){return U(q)===Y};case"!=":return function(q){return U(q)!==Y};case"<":return function(q){return U(q)<Y};case"<=":return function(q){return U(q)<=Y};case">":return function(q){return U(q)>Y};case">=":return function(q){return U(q)>=Y};case"[]":return function(q){var te=U(q);return te>=Y[0]&&te<=Y[1]};case"()":return function(q){var te=U(q);return te>Y[0]&&te<Y[1]};case"[)":return function(q){var te=U(q);return te>=Y[0]&&te<Y[1]};case"(]":return function(q){var te=U(q);return te>Y[0]&&te<=Y[1]};case"][":return function(q){var te=U(q);return te<=Y[0]||te>=Y[1]};case")(":return function(q){var te=U(q);return te<Y[0]||te>Y[1]};case"](":return function(q){var te=U(q);return te<=Y[0]||te>Y[1]};case")[":return function(q){var te=U(q);return te<Y[0]||te>=Y[1]};case"{}":return function(q){return Y.indexOf(U(q))!==-1};case"}{":return function(q){return Y.indexOf(U(q))===-1}}}(n,a.getDataToCoordFunc(i,r,l,o),d),v={},_={},h=0;x?(g=function(P){v[P.astr]=T.extendDeep([],P.get()),P.set(new Array(c))},m=function(P,I){var D=v[P.astr][I];P.get()[I]=D}):(g=function(P){v[P.astr]=T.extendDeep([],P.get()),P.set([])},m=function(P,I){var D=v[P.astr][I];P.get().push(D)}),E(g);for(var S=w(r.transforms,n),A=0;A<c;A++)y(o[A])?(E(m,A),_[h++]=S(A)):x&&h++;n._indexToPoints=_,r._length=h}}function E(P,I){for(var D=0;D<u.length;D++)P(T.nestedProperty(r,u[D]),I)}}},32028:function(F,C,e){"use strict";var T=e(3400),k=e(73060),a=e(7316),w=e(60468).W;function b(f,s){var t,i,r,n,o,l,c,d,u,x,p=s.transform,g=s.transformIndex,m=f.transforms[g].groups,y=w(f.transforms,p);if(!T.isArrayOrTypedArray(m)||m.length===0)return[f];var v=T.filterUnique(m),_=new Array(v.length),h=m.length,S=k.findArrayAttributes(f),A=p.styles||[],E={};for(t=0;t<A.length;t++)E[A[t].target]=A[t].value;p.styles&&(x=T.keyedContainer(p,"styles","target","value.name"));var P={},I={};for(t=0;t<v.length;t++){P[l=v[t]]=t,I[l]=0,(c=_[t]=T.extendDeepNoArrays({},f))._group=l,c.transforms[g]._indexToPoints={};var D=null;for(x&&(D=x.get(l)),c.name=D||D===""?D:T.templateString(p.nameformat,{trace:f.name,group:l}),d=c.transforms,c.transforms=[],i=0;i<d.length;i++)c.transforms[i]=T.extendDeepNoArrays({},d[i]);for(i=0;i<S.length;i++)T.nestedProperty(c,S[i]).set([])}for(r=0;r<S.length;r++){for(n=S[r],i=0,u=[];i<v.length;i++)u[i]=T.nestedProperty(_[i],n).get();for(o=T.nestedProperty(f,n).get(),i=0;i<h;i++)u[P[m[i]]].push(o[i])}for(i=0;i<h;i++)(c=_[P[m[i]]]).transforms[g]._indexToPoints[I[m[i]]]=y(i),I[m[i]]++;for(t=0;t<v.length;t++)l=v[t],c=_[t],a.clearExpandedTraceDefaultColors(c),c=T.extendDeepNoArrays(c,E[l]||{});return _}C.moduleType="transform",C.name="groupby",C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},C.supplyDefaults=function(f,s,t){var i,r={};function n(u,x){return T.coerce(f,r,C.attributes,u,x)}if(!n("enabled"))return r;n("groups"),n("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var o=f.styles,l=r.styles=[];if(o)for(i=0;i<o.length;i++){var c=l[i]={};T.coerce(o[i],l[i],C.attributes.styles,"target");var d=T.coerce(o[i],l[i],C.attributes.styles,"value");T.isPlainObject(d)?c.value=T.extendDeep({},d):d&&delete c.value}return r},C.transform=function(f,s){var t,i,r,n=[];for(i=0;i<f.length;i++)for(t=b(f[i],s),r=0;r<t.length;r++)n.push(t[r]);return n}},60468:function(F,C){"use strict";C.W=function(e,T){for(var k,a,w=0;w<e.length&&(k=e[w])!==T;w++)k._indexToPoints&&k.enabled!==!1&&(a=k._indexToPoints);var b=a?function(f){return a[f]}:function(f){return[f]};return b}},76272:function(F,C,e){"use strict";var T=e(3400),k=e(54460),a=e(60468).W,w=e(39032).BADNUM;C.moduleType="transform",C.name="sort",C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},C.supplyDefaults=function(b){var f={};function s(t,i){return T.coerce(b,f,C.attributes,t,i)}return s("enabled")&&(s("target"),s("order")),f},C.calcTransform=function(b,f,s){if(s.enabled){var t=T.getTargetArray(f,s);if(t){var i=s.target,r=t.length;f._length&&(r=Math.min(r,f._length));var n,o,l=f._arrayAttrs,c=function(m,y,v,_){var h,S=new Array(_),A=new Array(_);for(h=0;h<_;h++)S[h]={v:y[h],i:h};for(S.sort(function(E,P){switch(E.order){case"ascending":return function(I,D){var z=P(I.v),V=P(D.v);return z===w?1:V===w?-1:z-V};case"descending":return function(I,D){var z=P(I.v),V=P(D.v);return z===w?1:V===w?-1:V-z}}}(m,v)),h=0;h<_;h++)A[h]=S[h].i;return A}(s,t,k.getDataToCoordFunc(b,f,i,t),r),d=a(f.transforms,s),u={};for(n=0;n<l.length;n++){var x=T.nestedProperty(f,l[n]),p=x.get(),g=new Array(r);for(o=0;o<r;o++)g[o]=p[c[o]];x.set(g)}for(o=0;o<r;o++)u[o]=d(c[o]);s._indexToPoints=u,f._length=r}}}},25788:function(F,C){"use strict";C.version="2.33.0"},67792:function(F,C,e){var T=e(4168);(function(){var k={1964:function(f,s,t){f.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(f,s,t){"use strict";function i(he,_e){for(var Ae=0;Ae<_e.length;Ae++){var Oe=_e[Ae];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(he,r(Oe.key),Oe)}}function r(he){var _e=function(Ae,Oe){if(c(Ae)!="object"||!Ae)return Ae;var Ee=Ae[Symbol.toPrimitive];if(Ee!==void 0){var Be=Ee.call(Ae,"string");if(c(Be)!="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ae)}(he);return c(_e)=="symbol"?_e:_e+""}function n(){try{var he=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n=function(){return!!he})()}function o(he){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},o(he)}function l(he,_e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ae,Oe){return Ae.__proto__=Oe,Ae},l(he,_e)}function c(he){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},c(he)}var d=t(7507),u=t(3778),x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.hp=m,s.IS=50;var p=2147483647;function g(he){if(he>p)throw new RangeError('The value "'+he+'" is invalid for option "size"');var _e=new Uint8Array(he);return Object.setPrototypeOf(_e,m.prototype),_e}function m(he,_e,Ae){if(typeof he=="number"){if(typeof _e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(he)}return y(he,_e,Ae)}function y(he,_e,Ae){if(typeof he=="string")return function(Be,Ve){if(typeof Ve=="string"&&Ve!==""||(Ve="utf8"),!m.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);var Ze=0|E(Be,Ve),it=g(Ze),at=it.write(Be,Ve);return at!==Ze&&(it=it.slice(0,at)),it}(he,_e);if(ArrayBuffer.isView(he))return function(Be){if(be(Be,Uint8Array)){var Ve=new Uint8Array(Be);return S(Ve.buffer,Ve.byteOffset,Ve.byteLength)}return h(Be)}(he);if(he==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(he));if(be(he,ArrayBuffer)||he&&be(he.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(he,SharedArrayBuffer)||he&&be(he.buffer,SharedArrayBuffer)))return S(he,_e,Ae);if(typeof he=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Oe=he.valueOf&&he.valueOf();if(Oe!=null&&Oe!==he)return m.from(Oe,_e,Ae);var Ee=function(Be){if(m.isBuffer(Be)){var Ve=0|A(Be.length),Ze=g(Ve);return Ze.length===0||Be.copy(Ze,0,0,Ve),Ze}return Be.length!==void 0?typeof Be.length!="number"||we(Be.length)?g(0):h(Be):Be.type==="Buffer"&&Array.isArray(Be.data)?h(Be.data):void 0}(he);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof he[Symbol.toPrimitive]=="function")return m.from(he[Symbol.toPrimitive]("string"),_e,Ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(he))}function v(he){if(typeof he!="number")throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function _(he){return v(he),g(he<0?0:0|A(he))}function h(he){for(var _e=he.length<0?0:0|A(he.length),Ae=g(_e),Oe=0;Oe<_e;Oe+=1)Ae[Oe]=255&he[Oe];return Ae}function S(he,_e,Ae){if(_e<0||he.byteLength<_e)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<_e+(Ae||0))throw new RangeError('"length" is outside of buffer bounds');var Oe;return Oe=_e===void 0&&Ae===void 0?new Uint8Array(he):Ae===void 0?new Uint8Array(he,_e):new Uint8Array(he,_e,Ae),Object.setPrototypeOf(Oe,m.prototype),Oe}function A(he){if(he>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|he}function E(he,_e){if(m.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||be(he,ArrayBuffer))return he.byteLength;if(typeof he!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(he));var Ae=he.length,Oe=arguments.length>2&&arguments[2]===!0;if(!Oe&&Ae===0)return 0;for(var Ee=!1;;)switch(_e){case"ascii":case"latin1":case"binary":return Ae;case"utf8":case"utf-8":return re(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Ae;case"hex":return Ae>>>1;case"base64":return fe(he).length;default:if(Ee)return Oe?-1:re(he).length;_e=(""+_e).toLowerCase(),Ee=!0}}function P(he,_e,Ae){var Oe=!1;if((_e===void 0||_e<0)&&(_e=0),_e>this.length||((Ae===void 0||Ae>this.length)&&(Ae=this.length),Ae<=0)||(Ae>>>=0)<=(_e>>>=0))return"";for(he||(he="utf8");;)switch(he){case"hex":return J(this,_e,Ae);case"utf8":case"utf-8":return q(this,_e,Ae);case"ascii":return ee(this,_e,Ae);case"latin1":case"binary":return Q(this,_e,Ae);case"base64":return U(this,_e,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,_e,Ae);default:if(Oe)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),Oe=!0}}function I(he,_e,Ae){var Oe=he[_e];he[_e]=he[Ae],he[Ae]=Oe}function D(he,_e,Ae,Oe,Ee){if(he.length===0)return-1;if(typeof Ae=="string"?(Oe=Ae,Ae=0):Ae>2147483647?Ae=2147483647:Ae<-2147483648&&(Ae=-2147483648),we(Ae=+Ae)&&(Ae=Ee?0:he.length-1),Ae<0&&(Ae=he.length+Ae),Ae>=he.length){if(Ee)return-1;Ae=he.length-1}else if(Ae<0){if(!Ee)return-1;Ae=0}if(typeof _e=="string"&&(_e=m.from(_e,Oe)),m.isBuffer(_e))return _e.length===0?-1:z(he,_e,Ae,Oe,Ee);if(typeof _e=="number")return _e&=255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(he,_e,Ae):Uint8Array.prototype.lastIndexOf.call(he,_e,Ae):z(he,[_e],Ae,Oe,Ee);throw new TypeError("val must be string, number or Buffer")}function z(he,_e,Ae,Oe,Ee){var Be,Ve=1,Ze=he.length,it=_e.length;if(Oe!==void 0&&((Oe=String(Oe).toLowerCase())==="ucs2"||Oe==="ucs-2"||Oe==="utf16le"||Oe==="utf-16le")){if(he.length<2||_e.length<2)return-1;Ve=2,Ze/=2,it/=2,Ae/=2}function at(et,$e){return Ve===1?et[$e]:et.readUInt16BE($e*Ve)}if(Ee){var gt=-1;for(Be=Ae;Be<Ze;Be++)if(at(he,Be)===at(_e,gt===-1?0:Be-gt)){if(gt===-1&&(gt=Be),Be-gt+1===it)return gt*Ve}else gt!==-1&&(Be-=Be-gt),gt=-1}else for(Ae+it>Ze&&(Ae=Ze-it),Be=Ae;Be>=0;Be--){for(var yt=!0,pt=0;pt<it;pt++)if(at(he,Be+pt)!==at(_e,pt)){yt=!1;break}if(yt)return Be}return-1}function V(he,_e,Ae,Oe){Ae=Number(Ae)||0;var Ee=he.length-Ae;Oe?(Oe=Number(Oe))>Ee&&(Oe=Ee):Oe=Ee;var Be,Ve=_e.length;for(Oe>Ve/2&&(Oe=Ve/2),Be=0;Be<Oe;++Be){var Ze=parseInt(_e.substr(2*Be,2),16);if(we(Ze))return Be;he[Ae+Be]=Ze}return Be}function O(he,_e,Ae,Oe){return Se(re(_e,he.length-Ae),he,Ae,Oe)}function j(he,_e,Ae,Oe){return Se(function(Ee){for(var Be=[],Ve=0;Ve<Ee.length;++Ve)Be.push(255&Ee.charCodeAt(Ve));return Be}(_e),he,Ae,Oe)}function Y(he,_e,Ae,Oe){return Se(fe(_e),he,Ae,Oe)}function B(he,_e,Ae,Oe){return Se(function(Ee,Be){for(var Ve,Ze,it,at=[],gt=0;gt<Ee.length&&!((Be-=2)<0);++gt)Ze=(Ve=Ee.charCodeAt(gt))>>8,it=Ve%256,at.push(it),at.push(Ze);return at}(_e,he.length-Ae),he,Ae,Oe)}function U(he,_e,Ae){return _e===0&&Ae===he.length?d.fromByteArray(he):d.fromByteArray(he.slice(_e,Ae))}function q(he,_e,Ae){Ae=Math.min(he.length,Ae);for(var Oe=[],Ee=_e;Ee<Ae;){var Be=he[Ee],Ve=null,Ze=Be>239?4:Be>223?3:Be>191?2:1;if(Ee+Ze<=Ae){var it=void 0,at=void 0,gt=void 0,yt=void 0;switch(Ze){case 1:Be<128&&(Ve=Be);break;case 2:(192&(it=he[Ee+1]))==128&&(yt=(31&Be)<<6|63&it)>127&&(Ve=yt);break;case 3:it=he[Ee+1],at=he[Ee+2],(192&it)==128&&(192&at)==128&&(yt=(15&Be)<<12|(63&it)<<6|63&at)>2047&&(yt<55296||yt>57343)&&(Ve=yt);break;case 4:it=he[Ee+1],at=he[Ee+2],gt=he[Ee+3],(192&it)==128&&(192&at)==128&&(192&gt)==128&&(yt=(15&Be)<<18|(63&it)<<12|(63&at)<<6|63&gt)>65535&&yt<1114112&&(Ve=yt)}}Ve===null?(Ve=65533,Ze=1):Ve>65535&&(Ve-=65536,Oe.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),Oe.push(Ve),Ee+=Ze}return function(pt){var et=pt.length;if(et<=te)return String.fromCharCode.apply(String,pt);for(var $e="",At=0;At<et;)$e+=String.fromCharCode.apply(String,pt.slice(At,At+=te));return $e}(Oe)}m.TYPED_ARRAY_SUPPORT=function(){try{var he=new Uint8Array(1),_e={foo:function(){return 42}};return Object.setPrototypeOf(_e,Uint8Array.prototype),Object.setPrototypeOf(he,_e),he.foo()===42}catch{return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(he,_e,Ae){return y(he,_e,Ae)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(he,_e,Ae){return function(Oe,Ee,Be){return v(Oe),Oe<=0?g(Oe):Ee!==void 0?typeof Be=="string"?g(Oe).fill(Ee,Be):g(Oe).fill(Ee):g(Oe)}(he,_e,Ae)},m.allocUnsafe=function(he){return _(he)},m.allocUnsafeSlow=function(he){return _(he)},m.isBuffer=function(he){return he!=null&&he._isBuffer===!0&&he!==m.prototype},m.compare=function(he,_e){if(be(he,Uint8Array)&&(he=m.from(he,he.offset,he.byteLength)),be(_e,Uint8Array)&&(_e=m.from(_e,_e.offset,_e.byteLength)),!m.isBuffer(he)||!m.isBuffer(_e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(he===_e)return 0;for(var Ae=he.length,Oe=_e.length,Ee=0,Be=Math.min(Ae,Oe);Ee<Be;++Ee)if(he[Ee]!==_e[Ee]){Ae=he[Ee],Oe=_e[Ee];break}return Ae<Oe?-1:Oe<Ae?1:0},m.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(he,_e){if(!Array.isArray(he))throw new TypeError('"list" argument must be an Array of Buffers');if(he.length===0)return m.alloc(0);var Ae;if(_e===void 0)for(_e=0,Ae=0;Ae<he.length;++Ae)_e+=he[Ae].length;var Oe=m.allocUnsafe(_e),Ee=0;for(Ae=0;Ae<he.length;++Ae){var Be=he[Ae];if(be(Be,Uint8Array))Ee+Be.length>Oe.length?(m.isBuffer(Be)||(Be=m.from(Be)),Be.copy(Oe,Ee)):Uint8Array.prototype.set.call(Oe,Be,Ee);else{if(!m.isBuffer(Be))throw new TypeError('"list" argument must be an Array of Buffers');Be.copy(Oe,Ee)}Ee+=Be.length}return Oe},m.byteLength=E,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var he=this.length;if(he%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _e=0;_e<he;_e+=2)I(this,_e,_e+1);return this},m.prototype.swap32=function(){var he=this.length;if(he%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _e=0;_e<he;_e+=4)I(this,_e,_e+3),I(this,_e+1,_e+2);return this},m.prototype.swap64=function(){var he=this.length;if(he%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _e=0;_e<he;_e+=8)I(this,_e,_e+7),I(this,_e+1,_e+6),I(this,_e+2,_e+5),I(this,_e+3,_e+4);return this},m.prototype.toString=function(){var he=this.length;return he===0?"":arguments.length===0?q(this,0,he):P.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(he){if(!m.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he||m.compare(this,he)===0},m.prototype.inspect=function(){var he="",_e=s.IS;return he=this.toString("hex",0,_e).replace(/(.{2})/g,"$1 ").trim(),this.length>_e&&(he+=" ... "),"<Buffer "+he+">"},x&&(m.prototype[x]=m.prototype.inspect),m.prototype.compare=function(he,_e,Ae,Oe,Ee){if(be(he,Uint8Array)&&(he=m.from(he,he.offset,he.byteLength)),!m.isBuffer(he))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(he));if(_e===void 0&&(_e=0),Ae===void 0&&(Ae=he?he.length:0),Oe===void 0&&(Oe=0),Ee===void 0&&(Ee=this.length),_e<0||Ae>he.length||Oe<0||Ee>this.length)throw new RangeError("out of range index");if(Oe>=Ee&&_e>=Ae)return 0;if(Oe>=Ee)return-1;if(_e>=Ae)return 1;if(this===he)return 0;for(var Be=(Ee>>>=0)-(Oe>>>=0),Ve=(Ae>>>=0)-(_e>>>=0),Ze=Math.min(Be,Ve),it=this.slice(Oe,Ee),at=he.slice(_e,Ae),gt=0;gt<Ze;++gt)if(it[gt]!==at[gt]){Be=it[gt],Ve=at[gt];break}return Be<Ve?-1:Ve<Be?1:0},m.prototype.includes=function(he,_e,Ae){return this.indexOf(he,_e,Ae)!==-1},m.prototype.indexOf=function(he,_e,Ae){return D(this,he,_e,Ae,!0)},m.prototype.lastIndexOf=function(he,_e,Ae){return D(this,he,_e,Ae,!1)},m.prototype.write=function(he,_e,Ae,Oe){if(_e===void 0)Oe="utf8",Ae=this.length,_e=0;else if(Ae===void 0&&typeof _e=="string")Oe=_e,Ae=this.length,_e=0;else{if(!isFinite(_e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");_e>>>=0,isFinite(Ae)?(Ae>>>=0,Oe===void 0&&(Oe="utf8")):(Oe=Ae,Ae=void 0)}var Ee=this.length-_e;if((Ae===void 0||Ae>Ee)&&(Ae=Ee),he.length>0&&(Ae<0||_e<0)||_e>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");for(var Be=!1;;)switch(Oe){case"hex":return V(this,he,_e,Ae);case"utf8":case"utf-8":return O(this,he,_e,Ae);case"ascii":case"latin1":case"binary":return j(this,he,_e,Ae);case"base64":return Y(this,he,_e,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,he,_e,Ae);default:if(Be)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Be=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;function ee(he,_e,Ae){var Oe="";Ae=Math.min(he.length,Ae);for(var Ee=_e;Ee<Ae;++Ee)Oe+=String.fromCharCode(127&he[Ee]);return Oe}function Q(he,_e,Ae){var Oe="";Ae=Math.min(he.length,Ae);for(var Ee=_e;Ee<Ae;++Ee)Oe+=String.fromCharCode(he[Ee]);return Oe}function J(he,_e,Ae){var Oe=he.length;(!_e||_e<0)&&(_e=0),(!Ae||Ae<0||Ae>Oe)&&(Ae=Oe);for(var Ee="",Be=_e;Be<Ae;++Be)Ee+=Me[he[Be]];return Ee}function K(he,_e,Ae){for(var Oe=he.slice(_e,Ae),Ee="",Be=0;Be<Oe.length-1;Be+=2)Ee+=String.fromCharCode(Oe[Be]+256*Oe[Be+1]);return Ee}function X(he,_e,Ae){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+_e>Ae)throw new RangeError("Trying to access beyond buffer length")}function ie(he,_e,Ae,Oe,Ee,Be){if(!m.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(_e>Ee||_e<Be)throw new RangeError('"value" argument is out of bounds');if(Ae+Oe>he.length)throw new RangeError("Index out of range")}function se(he,_e,Ae,Oe,Ee){ke(_e,Oe,Ee,he,Ae,7);var Be=Number(_e&BigInt(4294967295));he[Ae++]=Be,Be>>=8,he[Ae++]=Be,Be>>=8,he[Ae++]=Be,Be>>=8,he[Ae++]=Be;var Ve=Number(_e>>BigInt(32)&BigInt(4294967295));return he[Ae++]=Ve,Ve>>=8,he[Ae++]=Ve,Ve>>=8,he[Ae++]=Ve,Ve>>=8,he[Ae++]=Ve,Ae}function ae(he,_e,Ae,Oe,Ee){ke(_e,Oe,Ee,he,Ae,7);var Be=Number(_e&BigInt(4294967295));he[Ae+7]=Be,Be>>=8,he[Ae+6]=Be,Be>>=8,he[Ae+5]=Be,Be>>=8,he[Ae+4]=Be;var Ve=Number(_e>>BigInt(32)&BigInt(4294967295));return he[Ae+3]=Ve,Ve>>=8,he[Ae+2]=Ve,Ve>>=8,he[Ae+1]=Ve,Ve>>=8,he[Ae]=Ve,Ae+8}function ue(he,_e,Ae,Oe,Ee,Be){if(Ae+Oe>he.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("Index out of range")}function ve(he,_e,Ae,Oe,Ee){return _e=+_e,Ae>>>=0,Ee||ue(he,0,Ae,4),u.write(he,_e,Ae,Oe,23,4),Ae+4}function ye(he,_e,Ae,Oe,Ee){return _e=+_e,Ae>>>=0,Ee||ue(he,0,Ae,8),u.write(he,_e,Ae,Oe,52,8),Ae+8}m.prototype.slice=function(he,_e){var Ae=this.length;(he=~~he)<0?(he+=Ae)<0&&(he=0):he>Ae&&(he=Ae),(_e=_e===void 0?Ae:~~_e)<0?(_e+=Ae)<0&&(_e=0):_e>Ae&&(_e=Ae),_e<he&&(_e=he);var Oe=this.subarray(he,_e);return Object.setPrototypeOf(Oe,m.prototype),Oe},m.prototype.readUintLE=m.prototype.readUIntLE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||X(he,_e,this.length);for(var Oe=this[he],Ee=1,Be=0;++Be<_e&&(Ee*=256);)Oe+=this[he+Be]*Ee;return Oe},m.prototype.readUintBE=m.prototype.readUIntBE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||X(he,_e,this.length);for(var Oe=this[he+--_e],Ee=1;_e>0&&(Ee*=256);)Oe+=this[he+--_e]*Ee;return Oe},m.prototype.readUint8=m.prototype.readUInt8=function(he,_e){return he>>>=0,_e||X(he,1,this.length),this[he]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(he,_e){return he>>>=0,_e||X(he,2,this.length),this[he]|this[he+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(he,_e){return he>>>=0,_e||X(he,2,this.length),this[he]<<8|this[he+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(he,_e){return he>>>=0,_e||X(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+16777216*this[he+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(he,_e){return he>>>=0,_e||X(he,4,this.length),16777216*this[he]+(this[he+1]<<16|this[he+2]<<8|this[he+3])},m.prototype.readBigUInt64LE=Pe(function(he){Ce(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||ge(he,this.length-8);var Oe=_e+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24),Ee=this[++he]+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+Ae*Math.pow(2,24);return BigInt(Oe)+(BigInt(Ee)<<BigInt(32))}),m.prototype.readBigUInt64BE=Pe(function(he){Ce(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||ge(he,this.length-8);var Oe=_e*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he],Ee=this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+Ae;return(BigInt(Oe)<<BigInt(32))+BigInt(Ee)}),m.prototype.readIntLE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||X(he,_e,this.length);for(var Oe=this[he],Ee=1,Be=0;++Be<_e&&(Ee*=256);)Oe+=this[he+Be]*Ee;return Oe>=(Ee*=128)&&(Oe-=Math.pow(2,8*_e)),Oe},m.prototype.readIntBE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||X(he,_e,this.length);for(var Oe=_e,Ee=1,Be=this[he+--Oe];Oe>0&&(Ee*=256);)Be+=this[he+--Oe]*Ee;return Be>=(Ee*=128)&&(Be-=Math.pow(2,8*_e)),Be},m.prototype.readInt8=function(he,_e){return he>>>=0,_e||X(he,1,this.length),128&this[he]?-1*(255-this[he]+1):this[he]},m.prototype.readInt16LE=function(he,_e){he>>>=0,_e||X(he,2,this.length);var Ae=this[he]|this[he+1]<<8;return 32768&Ae?4294901760|Ae:Ae},m.prototype.readInt16BE=function(he,_e){he>>>=0,_e||X(he,2,this.length);var Ae=this[he+1]|this[he]<<8;return 32768&Ae?4294901760|Ae:Ae},m.prototype.readInt32LE=function(he,_e){return he>>>=0,_e||X(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},m.prototype.readInt32BE=function(he,_e){return he>>>=0,_e||X(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},m.prototype.readBigInt64LE=Pe(function(he){Ce(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||ge(he,this.length-8);var Oe=this[he+4]+this[he+5]*Math.pow(2,8)+this[he+6]*Math.pow(2,16)+(Ae<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(_e+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24))}),m.prototype.readBigInt64BE=Pe(function(he){Ce(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||ge(he,this.length-8);var Oe=(_e<<24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+Ae)}),m.prototype.readFloatLE=function(he,_e){return he>>>=0,_e||X(he,4,this.length),u.read(this,he,!0,23,4)},m.prototype.readFloatBE=function(he,_e){return he>>>=0,_e||X(he,4,this.length),u.read(this,he,!1,23,4)},m.prototype.readDoubleLE=function(he,_e){return he>>>=0,_e||X(he,8,this.length),u.read(this,he,!0,52,8)},m.prototype.readDoubleBE=function(he,_e){return he>>>=0,_e||X(he,8,this.length),u.read(this,he,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(he,_e,Ae,Oe){he=+he,_e>>>=0,Ae>>>=0,Oe||ie(this,he,_e,Ae,Math.pow(2,8*Ae)-1,0);var Ee=1,Be=0;for(this[_e]=255&he;++Be<Ae&&(Ee*=256);)this[_e+Be]=he/Ee&255;return _e+Ae},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(he,_e,Ae,Oe){he=+he,_e>>>=0,Ae>>>=0,Oe||ie(this,he,_e,Ae,Math.pow(2,8*Ae)-1,0);var Ee=Ae-1,Be=1;for(this[_e+Ee]=255&he;--Ee>=0&&(Be*=256);)this[_e+Ee]=he/Be&255;return _e+Ae},m.prototype.writeUint8=m.prototype.writeUInt8=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,1,255,0),this[_e]=255&he,_e+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,65535,0),this[_e]=255&he,this[_e+1]=he>>>8,_e+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,65535,0),this[_e]=he>>>8,this[_e+1]=255&he,_e+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,4294967295,0),this[_e+3]=he>>>24,this[_e+2]=he>>>16,this[_e+1]=he>>>8,this[_e]=255&he,_e+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,4294967295,0),this[_e]=he>>>24,this[_e+1]=he>>>16,this[_e+2]=he>>>8,this[_e+3]=255&he,_e+4},m.prototype.writeBigUInt64LE=Pe(function(he){return se(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeBigUInt64BE=Pe(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeIntLE=function(he,_e,Ae,Oe){if(he=+he,_e>>>=0,!Oe){var Ee=Math.pow(2,8*Ae-1);ie(this,he,_e,Ae,Ee-1,-Ee)}var Be=0,Ve=1,Ze=0;for(this[_e]=255&he;++Be<Ae&&(Ve*=256);)he<0&&Ze===0&&this[_e+Be-1]!==0&&(Ze=1),this[_e+Be]=(he/Ve>>0)-Ze&255;return _e+Ae},m.prototype.writeIntBE=function(he,_e,Ae,Oe){if(he=+he,_e>>>=0,!Oe){var Ee=Math.pow(2,8*Ae-1);ie(this,he,_e,Ae,Ee-1,-Ee)}var Be=Ae-1,Ve=1,Ze=0;for(this[_e+Be]=255&he;--Be>=0&&(Ve*=256);)he<0&&Ze===0&&this[_e+Be+1]!==0&&(Ze=1),this[_e+Be]=(he/Ve>>0)-Ze&255;return _e+Ae},m.prototype.writeInt8=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,1,127,-128),he<0&&(he=255+he+1),this[_e]=255&he,_e+1},m.prototype.writeInt16LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,32767,-32768),this[_e]=255&he,this[_e+1]=he>>>8,_e+2},m.prototype.writeInt16BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,32767,-32768),this[_e]=he>>>8,this[_e+1]=255&he,_e+2},m.prototype.writeInt32LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,2147483647,-2147483648),this[_e]=255&he,this[_e+1]=he>>>8,this[_e+2]=he>>>16,this[_e+3]=he>>>24,_e+4},m.prototype.writeInt32BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),this[_e]=he>>>24,this[_e+1]=he>>>16,this[_e+2]=he>>>8,this[_e+3]=255&he,_e+4},m.prototype.writeBigInt64LE=Pe(function(he){return se(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeBigInt64BE=Pe(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeFloatLE=function(he,_e,Ae){return ve(this,he,_e,!0,Ae)},m.prototype.writeFloatBE=function(he,_e,Ae){return ve(this,he,_e,!1,Ae)},m.prototype.writeDoubleLE=function(he,_e,Ae){return ye(this,he,_e,!0,Ae)},m.prototype.writeDoubleBE=function(he,_e,Ae){return ye(this,he,_e,!1,Ae)},m.prototype.copy=function(he,_e,Ae,Oe){if(!m.isBuffer(he))throw new TypeError("argument should be a Buffer");if(Ae||(Ae=0),Oe||Oe===0||(Oe=this.length),_e>=he.length&&(_e=he.length),_e||(_e=0),Oe>0&&Oe<Ae&&(Oe=Ae),Oe===Ae||he.length===0||this.length===0)return 0;if(_e<0)throw new RangeError("targetStart out of bounds");if(Ae<0||Ae>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),he.length-_e<Oe-Ae&&(Oe=he.length-_e+Ae);var Ee=Oe-Ae;return this===he&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_e,Ae,Oe):Uint8Array.prototype.set.call(he,this.subarray(Ae,Oe),_e),Ee},m.prototype.fill=function(he,_e,Ae,Oe){if(typeof he=="string"){if(typeof _e=="string"?(Oe=_e,_e=0,Ae=this.length):typeof Ae=="string"&&(Oe=Ae,Ae=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!m.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(he.length===1){var Ee=he.charCodeAt(0);(Oe==="utf8"&&Ee<128||Oe==="latin1")&&(he=Ee)}}else typeof he=="number"?he&=255:typeof he=="boolean"&&(he=Number(he));if(_e<0||this.length<_e||this.length<Ae)throw new RangeError("Out of range index");if(Ae<=_e)return this;var Be;if(_e>>>=0,Ae=Ae===void 0?this.length:Ae>>>0,he||(he=0),typeof he=="number")for(Be=_e;Be<Ae;++Be)this[Be]=he;else{var Ve=m.isBuffer(he)?he:m.from(he,Oe),Ze=Ve.length;if(Ze===0)throw new TypeError('The value "'+he+'" is invalid for argument "value"');for(Be=0;Be<Ae-_e;++Be)this[Be+_e]=Ve[Be%Ze]}return this};var pe={};function de(he,_e,Ae){pe[he]=function(Oe){function Ee(){var Ze,it,at,gt;return function(yt,pt){if(!(yt instanceof pt))throw new TypeError("Cannot call a class as a function")}(this,Ee),it=this,at=o(at=Ee),Ze=function(yt,pt){if(pt&&(c(pt)==="object"||typeof pt=="function"))return pt;if(pt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(et){if(et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et}(yt)}(it,n()?Reflect.construct(at,gt||[],o(it).constructor):at.apply(it,gt)),Object.defineProperty(Ze,"message",{value:_e.apply(Ze,arguments),writable:!0,configurable:!0}),Ze.name="".concat(Ze.name," [").concat(he,"]"),Ze.stack,delete Ze.name,Ze}return function(Ze,it){if(typeof it!="function"&&it!==null)throw new TypeError("Super expression must either be null or a function");Ze.prototype=Object.create(it&&it.prototype,{constructor:{value:Ze,writable:!0,configurable:!0}}),Object.defineProperty(Ze,"prototype",{writable:!1}),it&&l(Ze,it)}(Ee,Oe),Be=Ee,(Ve=[{key:"code",get:function(){return he},set:function(Ze){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ze,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(he,"]: ").concat(this.message)}}])&&i(Be.prototype,Ve),Object.defineProperty(Be,"prototype",{writable:!1}),Be;var Be,Ve}(Ae)}function me(he){for(var _e="",Ae=he.length,Oe=he[0]==="-"?1:0;Ae>=Oe+4;Ae-=3)_e="_".concat(he.slice(Ae-3,Ae)).concat(_e);return"".concat(he.slice(0,Ae)).concat(_e)}function ke(he,_e,Ae,Oe,Ee,Be){if(he>Ae||he<_e){var Ve,Ze=typeof _e=="bigint"?"n":"";throw Ve=Be>3?_e===0||_e===BigInt(0)?">= 0".concat(Ze," and < 2").concat(Ze," ** ").concat(8*(Be+1)).concat(Ze):">= -(2".concat(Ze," ** ").concat(8*(Be+1)-1).concat(Ze,") and < 2 ** ")+"".concat(8*(Be+1)-1).concat(Ze):">= ".concat(_e).concat(Ze," and <= ").concat(Ae).concat(Ze),new pe.ERR_OUT_OF_RANGE("value",Ve,he)}(function(it,at,gt){Ce(at,"offset"),it[at]!==void 0&&it[at+gt]!==void 0||ge(at,it.length-(gt+1))})(Oe,Ee,Be)}function Ce(he,_e){if(typeof he!="number")throw new pe.ERR_INVALID_ARG_TYPE(_e,"number",he)}function ge(he,_e,Ae){throw Math.floor(he)!==he?(Ce(he,Ae),new pe.ERR_OUT_OF_RANGE(Ae||"offset","an integer",he)):_e<0?new pe.ERR_BUFFER_OUT_OF_BOUNDS:new pe.ERR_OUT_OF_RANGE(Ae||"offset",">= ".concat(Ae?1:0," and <= ").concat(_e),he)}de("ERR_BUFFER_OUT_OF_BOUNDS",function(he){return he?"".concat(he," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(he,_e){return'The "'.concat(he,'" argument must be of type number. Received type ').concat(c(_e))},TypeError),de("ERR_OUT_OF_RANGE",function(he,_e,Ae){var Oe='The value of "'.concat(he,'" is out of range.'),Ee=Ae;return Number.isInteger(Ae)&&Math.abs(Ae)>Math.pow(2,32)?Ee=me(String(Ae)):typeof Ae=="bigint"&&(Ee=String(Ae),(Ae>Math.pow(BigInt(2),BigInt(32))||Ae<-Math.pow(BigInt(2),BigInt(32)))&&(Ee=me(Ee)),Ee+="n"),Oe+" It must be ".concat(_e,". Received ").concat(Ee)},RangeError);var oe=/[^+/0-9A-Za-z-_]/g;function re(he,_e){var Ae;_e=_e||1/0;for(var Oe=he.length,Ee=null,Be=[],Ve=0;Ve<Oe;++Ve){if((Ae=he.charCodeAt(Ve))>55295&&Ae<57344){if(!Ee){if(Ae>56319){(_e-=3)>-1&&Be.push(239,191,189);continue}if(Ve+1===Oe){(_e-=3)>-1&&Be.push(239,191,189);continue}Ee=Ae;continue}if(Ae<56320){(_e-=3)>-1&&Be.push(239,191,189),Ee=Ae;continue}Ae=65536+(Ee-55296<<10|Ae-56320)}else Ee&&(_e-=3)>-1&&Be.push(239,191,189);if(Ee=null,Ae<128){if((_e-=1)<0)break;Be.push(Ae)}else if(Ae<2048){if((_e-=2)<0)break;Be.push(Ae>>6|192,63&Ae|128)}else if(Ae<65536){if((_e-=3)<0)break;Be.push(Ae>>12|224,Ae>>6&63|128,63&Ae|128)}else{if(!(Ae<1114112))throw new Error("Invalid code point");if((_e-=4)<0)break;Be.push(Ae>>18|240,Ae>>12&63|128,Ae>>6&63|128,63&Ae|128)}}return Be}function fe(he){return d.toByteArray(function(_e){if((_e=(_e=_e.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;_e.length%4!=0;)_e+="=";return _e}(he))}function Se(he,_e,Ae,Oe){var Ee;for(Ee=0;Ee<Oe&&!(Ee+Ae>=_e.length||Ee>=he.length);++Ee)_e[Ee+Ae]=he[Ee];return Ee}function be(he,_e){return he instanceof _e||he!=null&&he.constructor!=null&&he.constructor.name!=null&&he.constructor.name===_e.name}function we(he){return he!=he}var Me=function(){for(var he="0123456789abcdef",_e=new Array(256),Ae=0;Ae<16;++Ae)for(var Oe=16*Ae,Ee=0;Ee<16;++Ee)_e[Oe+Ee]=he[Ae]+he[Ee];return _e}();function Pe(he){return typeof BigInt>"u"?De:he}function De(){throw new Error("BigInt not supported")}},9216:function(f){"use strict";f.exports=r,f.exports.isMobile=r,f.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function r(n){n||(n={});var o=n.ua;if(o||typeof navigator>"u"||(o=navigator.userAgent),o&&o.headers&&typeof o.headers["user-agent"]=="string"&&(o=o.headers["user-agent"]),typeof o!="string")return!1;var l=s.test(o)&&!t.test(o)||!!n.tablet&&i.test(o);return!l&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&o.indexOf("Macintosh")!==-1&&o.indexOf("Safari")!==-1&&(l=!0),l}},6296:function(f,s,t){"use strict";f.exports=function(c){var d=(c=c||{}).eye||[0,0,1],u=c.center||[0,0,0],x=c.up||[0,1,0],p=c.distanceLimits||[0,1/0],g=c.mode||"turntable",m=i(),y=r(),v=n();return m.setDistanceLimits(p[0],p[1]),m.lookAt(0,d,u,x),y.setDistanceLimits(p[0],p[1]),y.lookAt(0,d,u,x),v.setDistanceLimits(p[0],p[1]),v.lookAt(0,d,u,x),new o({turntable:m,orbit:y,matrix:v},g)};var i=t(7261),r=t(9977),n=t(4192);function o(c,d){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(u){return c[u]}),this._mode=d,this._active=c[d],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=o.prototype;l.flush=function(c){for(var d=this._controllerList,u=0;u<d.length;++u)d[u].flush(c)},l.idle=function(c){for(var d=this._controllerList,u=0;u<d.length;++u)d[u].idle(c)},l.lookAt=function(c,d,u,x){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].lookAt(c,d,u,x)},l.rotate=function(c,d,u,x){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].rotate(c,d,u,x)},l.pan=function(c,d,u,x){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].pan(c,d,u,x)},l.translate=function(c,d,u,x){for(var p=this._controllerList,g=0;g<p.length;++g)p[g].translate(c,d,u,x)},l.setMatrix=function(c,d){for(var u=this._controllerList,x=0;x<u.length;++x)u[x].setMatrix(c,d)},l.setDistanceLimits=function(c,d){for(var u=this._controllerList,x=0;x<u.length;++x)u[x].setDistanceLimits(c,d)},l.setDistance=function(c,d){for(var u=this._controllerList,x=0;x<u.length;++x)u[x].setDistance(c,d)},l.recalcMatrix=function(c){this._active.recalcMatrix(c)},l.getDistance=function(c){return this._active.getDistance(c)},l.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},l.lastT=function(){return this._active.lastT()},l.setMode=function(c){if(c!==this._mode){var d=this._controllerNames.indexOf(c);if(!(d<0)){var u=this._active,x=this._controllerList[d],p=Math.max(u.lastT(),x.lastT());u.recalcMatrix(p),x.setMatrix(p,u.computedMatrix),this._active=x,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},7169:function(f,s,t){"use strict";var i=typeof WeakMap>"u"?t(1538):WeakMap,r=t(2762),n=t(8116),o=new i;f.exports=function(l){var c=o.get(l),d=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!d||!l.isBuffer(d)){var u=r(l,new Float32Array([-1,-1,-1,4,4,-1]));(c=n(l,[{buffer:u,type:l.FLOAT,size:2}]))._triangleBuffer=u,o.set(l,c)}c.bind(),l.drawArrays(l.TRIANGLES,0,3),c.unbind()}},1085:function(f,s,t){var i=t(1371);f.exports=function(r,n,o){n=typeof n=="number"?n:1,o=o||": ";var l=r.split(/\r?\n/),c=String(l.length+n-1).length;return l.map(function(d,u){var x=u+n,p=String(x).length;return i(x,c-p)+o+d}).join(`
`)}},3952:function(f,s,t){"use strict";f.exports=function(n){var o=n.length;if(o===0)return[];if(o===1)return[0];for(var l=n[0].length,c=[n[0]],d=[0],u=1;u<o;++u)if(c.push(n[u]),r(c,l)){if(d.push(u),d.length===l+1)return d}else c.pop();return d};var i=t(3250);function r(n,o){for(var l=new Array(o+1),c=0;c<n.length;++c)l[c]=n[c];for(c=0;c<=n.length;++c){for(var d=n.length;d<=o;++d){for(var u=new Array(o),x=0;x<o;++x)u[x]=Math.pow(d+1-c,x);l[d]=u}if(i.apply(void 0,l))return!0}return!1}},5995:function(f,s,t){"use strict";f.exports=function(n,o){return i(o).filter(function(l){for(var c=new Array(l.length),d=0;d<l.length;++d)c[d]=o[l[d]];return r(c)*n<1})};var i=t(7642),r=t(6037)},3502:function(f,s,t){f.exports=function(n,o){return r(i(n,o))};var i=t(5995),r=t(9127)},6468:function(f){f.exports=function(s){return atob(s)}},2642:function(f,s,t){"use strict";f.exports=function(n,o){for(var l=o.length,c=new Array(l+1),d=0;d<l;++d){for(var u=new Array(l+1),x=0;x<=l;++x)u[x]=n[x][d];c[d]=u}for(c[l]=new Array(l+1),d=0;d<=l;++d)c[l][d]=1;var p=new Array(l+1);for(d=0;d<l;++d)p[d]=o[d];p[l]=1;var g=i(c,p),m=r(g[l+1]);m===0&&(m=1);var y=new Array(l+1);for(d=0;d<=l;++d)y[d]=r(g[d])/m;return y};var i=t(727);function r(n){for(var o=0,l=0;l<n.length;++l)o+=n[l];return o}},7507:function(f,s){"use strict";s.byteLength=function(d){var u=l(d),x=u[0],p=u[1];return 3*(x+p)/4-p},s.toByteArray=function(d){var u,x,p=l(d),g=p[0],m=p[1],y=new r(function(h,S,A){return 3*(S+A)/4-A}(0,g,m)),v=0,_=m>0?g-4:g;for(x=0;x<_;x+=4)u=i[d.charCodeAt(x)]<<18|i[d.charCodeAt(x+1)]<<12|i[d.charCodeAt(x+2)]<<6|i[d.charCodeAt(x+3)],y[v++]=u>>16&255,y[v++]=u>>8&255,y[v++]=255&u;return m===2&&(u=i[d.charCodeAt(x)]<<2|i[d.charCodeAt(x+1)]>>4,y[v++]=255&u),m===1&&(u=i[d.charCodeAt(x)]<<10|i[d.charCodeAt(x+1)]<<4|i[d.charCodeAt(x+2)]>>2,y[v++]=u>>8&255,y[v++]=255&u),y},s.fromByteArray=function(d){for(var u,x=d.length,p=x%3,g=[],m=16383,y=0,v=x-p;y<v;y+=m)g.push(c(d,y,y+m>v?v:y+m));return p===1?(u=d[x-1],g.push(t[u>>2]+t[u<<4&63]+"==")):p===2&&(u=(d[x-2]<<8)+d[x-1],g.push(t[u>>10]+t[u>>4&63]+t[u<<2&63]+"=")),g.join("")};for(var t=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)t[o]=n[o],i[n.charCodeAt(o)]=o;function l(d){var u=d.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=d.indexOf("=");return x===-1&&(x=u),[x,x===u?0:4-x%4]}function c(d,u,x){for(var p,g,m=[],y=u;y<x;y+=3)p=(d[y]<<16&16711680)+(d[y+1]<<8&65280)+(255&d[y+2]),m.push(t[(g=p)>>18&63]+t[g>>12&63]+t[g>>6&63]+t[63&g]);return m.join("")}i[45]=62,i[95]=63},3865:function(f,s,t){"use strict";var i=t(869);f.exports=function(r,n){return i(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},1318:function(f){"use strict";f.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},8697:function(f,s,t){"use strict";var i=t(869);f.exports=function(r,n){return i(r[0].mul(n[1]),r[1].mul(n[0]))}},7842:function(f,s,t){"use strict";var i=t(6330),r=t(1533),n=t(2651),o=t(4387),l=t(869),c=t(8697);f.exports=function d(u,x){if(i(u))return x?c(u,d(x)):[u[0].clone(),u[1].clone()];var p,g,m=0;if(r(u))p=u.clone();else if(typeof u=="string")p=o(u);else{if(u===0)return[n(0),n(1)];if(u===Math.floor(u))p=n(u);else{for(;u!==Math.floor(u);)u*=Math.pow(2,256),m-=256;p=n(u)}}if(i(x))p.mul(x[1]),g=x[0].clone();else if(r(x))g=x.clone();else if(typeof x=="string")g=o(x);else if(x)if(x===Math.floor(x))g=n(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),m+=256;g=n(x)}else g=n(1);return m>0?p=p.ushln(m):m<0&&(g=g.ushln(-m)),l(p,g)}},6330:function(f,s,t){"use strict";var i=t(1533);f.exports=function(r){return Array.isArray(r)&&r.length===2&&i(r[0])&&i(r[1])}},5716:function(f,s,t){"use strict";var i=t(6859);f.exports=function(r){return r.cmp(new i(0))}},1369:function(f,s,t){"use strict";var i=t(5716);f.exports=function(r){var n=r.length,o=r.words,l=0;if(n===1)l=o[0];else if(n===2)l=o[0]+67108864*o[1];else for(var c=0;c<n;c++)l+=o[c]*Math.pow(67108864,c);return i(r)*l}},4025:function(f,s,t){"use strict";var i=t(2361),r=t(8828).countTrailingZeros;f.exports=function(n){var o=r(i.lo(n));if(o<32)return o;var l=r(i.hi(n));return l>20?52:l+32}},1533:function(f,s,t){"use strict";t(6859),f.exports=function(i){return i&&typeof i=="object"&&!!i.words}},2651:function(f,s,t){"use strict";var i=t(6859),r=t(2361);f.exports=function(n){var o=r.exponent(n);return o<52?new i(n):new i(n*Math.pow(2,52-o)).ushln(o-52)}},869:function(f,s,t){"use strict";var i=t(2651),r=t(5716);f.exports=function(n,o){var l=r(n),c=r(o);if(l===0)return[i(0),i(1)];if(c===0)return[i(0),i(0)];c<0&&(n=n.neg(),o=o.neg());var d=n.gcd(o);return d.cmpn(1)?[n.div(d),o.div(d)]:[n,o]}},4387:function(f,s,t){"use strict";var i=t(6859);f.exports=function(r){return new i(r)}},6504:function(f,s,t){"use strict";var i=t(869);f.exports=function(r,n){return i(r[0].mul(n[0]),r[1].mul(n[1]))}},7721:function(f,s,t){"use strict";var i=t(5716);f.exports=function(r){return i(r[0])*i(r[1])}},5572:function(f,s,t){"use strict";var i=t(869);f.exports=function(r,n){return i(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},946:function(f,s,t){"use strict";var i=t(1369),r=t(4025);f.exports=function(n){var o=n[0],l=n[1];if(o.cmpn(0)===0)return 0;var c=o.abs().divmod(l.abs()),d=c.div,u=i(d),x=c.mod,p=o.negative!==l.negative?-1:1;if(x.cmpn(0)===0)return p*u;if(u){var g=r(u)+4;return p*(u+(y=i(x.ushln(g).divRound(l)))*Math.pow(2,-g))}var m=l.bitLength()-x.bitLength()+53,y=i(x.ushln(m).divRound(l));return m<1023?p*y*Math.pow(2,-m):p*(y*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},2478:function(f){"use strict";function s(l,c,d,u,x){for(var p=x+1;u<=x;){var g=u+x>>>1,m=l[g];(d!==void 0?d(m,c):m-c)>=0?(p=g,x=g-1):u=g+1}return p}function t(l,c,d,u,x){for(var p=x+1;u<=x;){var g=u+x>>>1,m=l[g];(d!==void 0?d(m,c):m-c)>0?(p=g,x=g-1):u=g+1}return p}function i(l,c,d,u,x){for(var p=u-1;u<=x;){var g=u+x>>>1,m=l[g];(d!==void 0?d(m,c):m-c)<0?(p=g,u=g+1):x=g-1}return p}function r(l,c,d,u,x){for(var p=u-1;u<=x;){var g=u+x>>>1,m=l[g];(d!==void 0?d(m,c):m-c)<=0?(p=g,u=g+1):x=g-1}return p}function n(l,c,d,u,x){for(;u<=x;){var p=u+x>>>1,g=l[p],m=d!==void 0?d(g,c):g-c;if(m===0)return p;m<=0?u=p+1:x=p-1}return-1}function o(l,c,d,u,x,p){return typeof d=="function"?p(l,c,d,u===void 0?0:0|u,x===void 0?l.length-1:0|x):p(l,c,void 0,d===void 0?0:0|d,u===void 0?l.length-1:0|u)}f.exports={ge:function(l,c,d,u,x){return o(l,c,d,u,x,s)},gt:function(l,c,d,u,x){return o(l,c,d,u,x,t)},lt:function(l,c,d,u,x){return o(l,c,d,u,x,i)},le:function(l,c,d,u,x){return o(l,c,d,u,x,r)},eq:function(l,c,d,u,x){return o(l,c,d,u,x,n)}}},8828:function(f,s){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,o;return n=(r>65535)<<4,n|=o=((r>>>=n)>255)<<3,n|=o=((r>>>=o)>15)<<2,(n|=o=((r>>>=o)>3)<<1)|(r>>>=o)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var o=n,l=n,c=7;for(o>>>=1;o;o>>>=1)l<<=1,l|=1&o,--c;r[n]=l<<c&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,o){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},6859:function(f,s,t){(function(i,r){"use strict";function n(O,j){if(!O)throw new Error(j||"Assertion failed")}function o(O,j){O.super_=j;var Y=function(){};Y.prototype=j.prototype,O.prototype=new Y,O.prototype.constructor=O}function l(O,j,Y){if(l.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&(j!=="le"&&j!=="be"||(Y=j,j=10),this._init(O||0,j||10,Y||"be"))}var c;typeof i=="object"?i.exports=l:r.BN=l,l.BN=l,l.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(7790).Buffer}catch{}function d(O,j){var Y=O.charCodeAt(j);return Y>=65&&Y<=70?Y-55:Y>=97&&Y<=102?Y-87:Y-48&15}function u(O,j,Y){var B=d(O,Y);return Y-1>=j&&(B|=d(O,Y-1)<<4),B}function x(O,j,Y,B){for(var U=0,q=Math.min(O.length,Y),te=j;te<q;te++){var ee=O.charCodeAt(te)-48;U*=B,U+=ee>=49?ee-49+10:ee>=17?ee-17+10:ee}return U}l.isBN=function(O){return O instanceof l||O!==null&&typeof O=="object"&&O.constructor.wordSize===l.wordSize&&Array.isArray(O.words)},l.max=function(O,j){return O.cmp(j)>0?O:j},l.min=function(O,j){return O.cmp(j)<0?O:j},l.prototype._init=function(O,j,Y){if(typeof O=="number")return this._initNumber(O,j,Y);if(typeof O=="object")return this._initArray(O,j,Y);j==="hex"&&(j=16),n(j===(0|j)&&j>=2&&j<=36);var B=0;(O=O.toString().replace(/\s+/g,""))[0]==="-"&&(B++,this.negative=1),B<O.length&&(j===16?this._parseHex(O,B,Y):(this._parseBase(O,j,B),Y==="le"&&this._initArray(this.toArray(),j,Y)))},l.prototype._initNumber=function(O,j,Y){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[67108863&O],this.length=1):O<4503599627370496?(this.words=[67108863&O,O/67108864&67108863],this.length=2):(n(O<9007199254740992),this.words=[67108863&O,O/67108864&67108863,1],this.length=3),Y==="le"&&this._initArray(this.toArray(),j,Y)},l.prototype._initArray=function(O,j,Y){if(n(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var U,q,te=0;if(Y==="be")for(B=O.length-1,U=0;B>=0;B-=3)q=O[B]|O[B-1]<<8|O[B-2]<<16,this.words[U]|=q<<te&67108863,this.words[U+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,U++);else if(Y==="le")for(B=0,U=0;B<O.length;B+=3)q=O[B]|O[B+1]<<8|O[B+2]<<16,this.words[U]|=q<<te&67108863,this.words[U+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,U++);return this.strip()},l.prototype._parseHex=function(O,j,Y){this.length=Math.ceil((O.length-j)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var U,q=0,te=0;if(Y==="be")for(B=O.length-1;B>=j;B-=2)U=u(O,j,B)<<q,this.words[te]|=67108863&U,q>=18?(q-=18,te+=1,this.words[te]|=U>>>26):q+=8;else for(B=(O.length-j)%2==0?j+1:j;B<O.length;B+=2)U=u(O,j,B)<<q,this.words[te]|=67108863&U,q>=18?(q-=18,te+=1,this.words[te]|=U>>>26):q+=8;this.strip()},l.prototype._parseBase=function(O,j,Y){this.words=[0],this.length=1;for(var B=0,U=1;U<=67108863;U*=j)B++;B--,U=U/j|0;for(var q=O.length-Y,te=q%B,ee=Math.min(q,q-te)+Y,Q=0,J=Y;J<ee;J+=B)Q=x(O,J,J+B,j),this.imuln(U),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(te!==0){var K=1;for(Q=x(O,J,O.length,j),J=0;J<te;J++)K*=j;this.imuln(K),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},l.prototype.copy=function(O){O.words=new Array(this.length);for(var j=0;j<this.length;j++)O.words[j]=this.words[j];O.length=this.length,O.negative=this.negative,O.red=this.red},l.prototype.clone=function(){var O=new l(null);return this.copy(O),O},l.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(O,j,Y){Y.negative=j.negative^O.negative;var B=O.length+j.length|0;Y.length=B,B=B-1|0;var U=0|O.words[0],q=0|j.words[0],te=U*q,ee=67108863&te,Q=te/67108864|0;Y.words[0]=ee;for(var J=1;J<B;J++){for(var K=Q>>>26,X=67108863&Q,ie=Math.min(J,j.length-1),se=Math.max(0,J-O.length+1);se<=ie;se++){var ae=J-se|0;K+=(te=(U=0|O.words[ae])*(q=0|j.words[se])+X)/67108864|0,X=67108863&te}Y.words[J]=0|X,Q=0|K}return Q!==0?Y.words[J]=0|Q:Y.length--,Y.strip()}l.prototype.toString=function(O,j){var Y;if(j=0|j||1,(O=O||10)===16||O==="hex"){Y="";for(var B=0,U=0,q=0;q<this.length;q++){var te=this.words[q],ee=(16777215&(te<<B|U)).toString(16);Y=(U=te>>>24-B&16777215)!=0||q!==this.length-1?p[6-ee.length]+ee+Y:ee+Y,(B+=2)>=26&&(B-=26,q--)}for(U!==0&&(Y=U.toString(16)+Y);Y.length%j!=0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}if(O===(0|O)&&O>=2&&O<=36){var Q=g[O],J=m[O];Y="";var K=this.clone();for(K.negative=0;!K.isZero();){var X=K.modn(J).toString(O);Y=(K=K.idivn(J)).isZero()?X+Y:p[Q-X.length]+X+Y}for(this.isZero()&&(Y="0"+Y);Y.length%j!=0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}n(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=67108864*this.words[1]:this.length===3&&this.words[2]===1?O+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(O,j){return n(c!==void 0),this.toArrayLike(c,O,j)},l.prototype.toArray=function(O,j){return this.toArrayLike(Array,O,j)},l.prototype.toArrayLike=function(O,j,Y){var B=this.byteLength(),U=Y||Math.max(1,B);n(B<=U,"byte array longer than desired length"),n(U>0,"Requested array length <= 0"),this.strip();var q,te,ee=j==="le",Q=new O(U),J=this.clone();if(ee){for(te=0;!J.isZero();te++)q=J.andln(255),J.iushrn(8),Q[te]=q;for(;te<U;te++)Q[te]=0}else{for(te=0;te<U-B;te++)Q[te]=0;for(te=0;!J.isZero();te++)q=J.andln(255),J.iushrn(8),Q[U-te-1]=q}return Q},Math.clz32?l.prototype._countBits=function(O){return 32-Math.clz32(O)}:l.prototype._countBits=function(O){var j=O,Y=0;return j>=4096&&(Y+=13,j>>>=13),j>=64&&(Y+=7,j>>>=7),j>=8&&(Y+=4,j>>>=4),j>=2&&(Y+=2,j>>>=2),Y+j},l.prototype._zeroBits=function(O){if(O===0)return 26;var j=O,Y=0;return!(8191&j)&&(Y+=13,j>>>=13),!(127&j)&&(Y+=7,j>>>=7),!(15&j)&&(Y+=4,j>>>=4),!(3&j)&&(Y+=2,j>>>=2),!(1&j)&&Y++,Y},l.prototype.bitLength=function(){var O=this.words[this.length-1],j=this._countBits(O);return 26*(this.length-1)+j},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,j=0;j<this.length;j++){var Y=this._zeroBits(this.words[j]);if(O+=Y,Y!==26)break}return O},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},l.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var j=0;j<O.length;j++)this.words[j]=this.words[j]|O.words[j];return this.strip()},l.prototype.ior=function(O){return n((this.negative|O.negative)==0),this.iuor(O)},l.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},l.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},l.prototype.iuand=function(O){var j;j=this.length>O.length?O:this;for(var Y=0;Y<j.length;Y++)this.words[Y]=this.words[Y]&O.words[Y];return this.length=j.length,this.strip()},l.prototype.iand=function(O){return n((this.negative|O.negative)==0),this.iuand(O)},l.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},l.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},l.prototype.iuxor=function(O){var j,Y;this.length>O.length?(j=this,Y=O):(j=O,Y=this);for(var B=0;B<Y.length;B++)this.words[B]=j.words[B]^Y.words[B];if(this!==j)for(;B<j.length;B++)this.words[B]=j.words[B];return this.length=j.length,this.strip()},l.prototype.ixor=function(O){return n((this.negative|O.negative)==0),this.iuxor(O)},l.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},l.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},l.prototype.inotn=function(O){n(typeof O=="number"&&O>=0);var j=0|Math.ceil(O/26),Y=O%26;this._expand(j),Y>0&&j--;for(var B=0;B<j;B++)this.words[B]=67108863&~this.words[B];return Y>0&&(this.words[B]=~this.words[B]&67108863>>26-Y),this.strip()},l.prototype.notn=function(O){return this.clone().inotn(O)},l.prototype.setn=function(O,j){n(typeof O=="number"&&O>=0);var Y=O/26|0,B=O%26;return this._expand(Y+1),this.words[Y]=j?this.words[Y]|1<<B:this.words[Y]&~(1<<B),this.strip()},l.prototype.iadd=function(O){var j,Y,B;if(this.negative!==0&&O.negative===0)return this.negative=0,j=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,j=this.isub(O),O.negative=1,j._normSign();this.length>O.length?(Y=this,B=O):(Y=O,B=this);for(var U=0,q=0;q<B.length;q++)j=(0|Y.words[q])+(0|B.words[q])+U,this.words[q]=67108863&j,U=j>>>26;for(;U!==0&&q<Y.length;q++)j=(0|Y.words[q])+U,this.words[q]=67108863&j,U=j>>>26;if(this.length=Y.length,U!==0)this.words[this.length]=U,this.length++;else if(Y!==this)for(;q<Y.length;q++)this.words[q]=Y.words[q];return this},l.prototype.add=function(O){var j;return O.negative!==0&&this.negative===0?(O.negative=0,j=this.sub(O),O.negative^=1,j):O.negative===0&&this.negative!==0?(this.negative=0,j=O.sub(this),this.negative=1,j):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},l.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var j=this.iadd(O);return O.negative=1,j._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var Y,B,U=this.cmp(O);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(Y=this,B=O):(Y=O,B=this);for(var q=0,te=0;te<B.length;te++)q=(j=(0|Y.words[te])-(0|B.words[te])+q)>>26,this.words[te]=67108863&j;for(;q!==0&&te<Y.length;te++)q=(j=(0|Y.words[te])+q)>>26,this.words[te]=67108863&j;if(q===0&&te<Y.length&&Y!==this)for(;te<Y.length;te++)this.words[te]=Y.words[te];return this.length=Math.max(this.length,te),Y!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(O){return this.clone().isub(O)};var v=function(O,j,Y){var B,U,q,te=O.words,ee=j.words,Q=Y.words,J=0,K=0|te[0],X=8191&K,ie=K>>>13,se=0|te[1],ae=8191&se,ue=se>>>13,ve=0|te[2],ye=8191&ve,pe=ve>>>13,de=0|te[3],me=8191&de,ke=de>>>13,Ce=0|te[4],ge=8191&Ce,oe=Ce>>>13,re=0|te[5],fe=8191&re,Se=re>>>13,be=0|te[6],we=8191&be,Me=be>>>13,Pe=0|te[7],De=8191&Pe,he=Pe>>>13,_e=0|te[8],Ae=8191&_e,Oe=_e>>>13,Ee=0|te[9],Be=8191&Ee,Ve=Ee>>>13,Ze=0|ee[0],it=8191&Ze,at=Ze>>>13,gt=0|ee[1],yt=8191&gt,pt=gt>>>13,et=0|ee[2],$e=8191&et,At=et>>>13,Ot=0|ee[3],Rt=8191&Ot,Ct=Ot>>>13,Ge=0|ee[4],Xe=8191&Ge,Ne=Ge>>>13,Ye=0|ee[5],ot=8191&Ye,nt=Ye>>>13,ze=0|ee[6],Fe=8191&ze,rt=ze>>>13,We=0|ee[7],ft=8191&We,mt=We>>>13,vt=0|ee[8],ut=8191&vt,Mt=vt>>>13,bt=0|ee[9],St=8191&bt,Pt=bt>>>13;Y.negative=O.negative^j.negative,Y.length=19;var Dt=(J+(B=Math.imul(X,it))|0)+((8191&(U=(U=Math.imul(X,at))+Math.imul(ie,it)|0))<<13)|0;J=((q=Math.imul(ie,at))+(U>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,B=Math.imul(ae,it),U=(U=Math.imul(ae,at))+Math.imul(ue,it)|0,q=Math.imul(ue,at);var Ft=(J+(B=B+Math.imul(X,yt)|0)|0)+((8191&(U=(U=U+Math.imul(X,pt)|0)+Math.imul(ie,yt)|0))<<13)|0;J=((q=q+Math.imul(ie,pt)|0)+(U>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,B=Math.imul(ye,it),U=(U=Math.imul(ye,at))+Math.imul(pe,it)|0,q=Math.imul(pe,at),B=B+Math.imul(ae,yt)|0,U=(U=U+Math.imul(ae,pt)|0)+Math.imul(ue,yt)|0,q=q+Math.imul(ue,pt)|0;var Xt=(J+(B=B+Math.imul(X,$e)|0)|0)+((8191&(U=(U=U+Math.imul(X,At)|0)+Math.imul(ie,$e)|0))<<13)|0;J=((q=q+Math.imul(ie,At)|0)+(U>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,B=Math.imul(me,it),U=(U=Math.imul(me,at))+Math.imul(ke,it)|0,q=Math.imul(ke,at),B=B+Math.imul(ye,yt)|0,U=(U=U+Math.imul(ye,pt)|0)+Math.imul(pe,yt)|0,q=q+Math.imul(pe,pt)|0,B=B+Math.imul(ae,$e)|0,U=(U=U+Math.imul(ae,At)|0)+Math.imul(ue,$e)|0,q=q+Math.imul(ue,At)|0;var an=(J+(B=B+Math.imul(X,Rt)|0)|0)+((8191&(U=(U=U+Math.imul(X,Ct)|0)+Math.imul(ie,Rt)|0))<<13)|0;J=((q=q+Math.imul(ie,Ct)|0)+(U>>>13)|0)+(an>>>26)|0,an&=67108863,B=Math.imul(ge,it),U=(U=Math.imul(ge,at))+Math.imul(oe,it)|0,q=Math.imul(oe,at),B=B+Math.imul(me,yt)|0,U=(U=U+Math.imul(me,pt)|0)+Math.imul(ke,yt)|0,q=q+Math.imul(ke,pt)|0,B=B+Math.imul(ye,$e)|0,U=(U=U+Math.imul(ye,At)|0)+Math.imul(pe,$e)|0,q=q+Math.imul(pe,At)|0,B=B+Math.imul(ae,Rt)|0,U=(U=U+Math.imul(ae,Ct)|0)+Math.imul(ue,Rt)|0,q=q+Math.imul(ue,Ct)|0;var Ht=(J+(B=B+Math.imul(X,Xe)|0)|0)+((8191&(U=(U=U+Math.imul(X,Ne)|0)+Math.imul(ie,Xe)|0))<<13)|0;J=((q=q+Math.imul(ie,Ne)|0)+(U>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,B=Math.imul(fe,it),U=(U=Math.imul(fe,at))+Math.imul(Se,it)|0,q=Math.imul(Se,at),B=B+Math.imul(ge,yt)|0,U=(U=U+Math.imul(ge,pt)|0)+Math.imul(oe,yt)|0,q=q+Math.imul(oe,pt)|0,B=B+Math.imul(me,$e)|0,U=(U=U+Math.imul(me,At)|0)+Math.imul(ke,$e)|0,q=q+Math.imul(ke,At)|0,B=B+Math.imul(ye,Rt)|0,U=(U=U+Math.imul(ye,Ct)|0)+Math.imul(pe,Rt)|0,q=q+Math.imul(pe,Ct)|0,B=B+Math.imul(ae,Xe)|0,U=(U=U+Math.imul(ae,Ne)|0)+Math.imul(ue,Xe)|0,q=q+Math.imul(ue,Ne)|0;var Zt=(J+(B=B+Math.imul(X,ot)|0)|0)+((8191&(U=(U=U+Math.imul(X,nt)|0)+Math.imul(ie,ot)|0))<<13)|0;J=((q=q+Math.imul(ie,nt)|0)+(U>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,B=Math.imul(we,it),U=(U=Math.imul(we,at))+Math.imul(Me,it)|0,q=Math.imul(Me,at),B=B+Math.imul(fe,yt)|0,U=(U=U+Math.imul(fe,pt)|0)+Math.imul(Se,yt)|0,q=q+Math.imul(Se,pt)|0,B=B+Math.imul(ge,$e)|0,U=(U=U+Math.imul(ge,At)|0)+Math.imul(oe,$e)|0,q=q+Math.imul(oe,At)|0,B=B+Math.imul(me,Rt)|0,U=(U=U+Math.imul(me,Ct)|0)+Math.imul(ke,Rt)|0,q=q+Math.imul(ke,Ct)|0,B=B+Math.imul(ye,Xe)|0,U=(U=U+Math.imul(ye,Ne)|0)+Math.imul(pe,Xe)|0,q=q+Math.imul(pe,Ne)|0,B=B+Math.imul(ae,ot)|0,U=(U=U+Math.imul(ae,nt)|0)+Math.imul(ue,ot)|0,q=q+Math.imul(ue,nt)|0;var jt=(J+(B=B+Math.imul(X,Fe)|0)|0)+((8191&(U=(U=U+Math.imul(X,rt)|0)+Math.imul(ie,Fe)|0))<<13)|0;J=((q=q+Math.imul(ie,rt)|0)+(U>>>13)|0)+(jt>>>26)|0,jt&=67108863,B=Math.imul(De,it),U=(U=Math.imul(De,at))+Math.imul(he,it)|0,q=Math.imul(he,at),B=B+Math.imul(we,yt)|0,U=(U=U+Math.imul(we,pt)|0)+Math.imul(Me,yt)|0,q=q+Math.imul(Me,pt)|0,B=B+Math.imul(fe,$e)|0,U=(U=U+Math.imul(fe,At)|0)+Math.imul(Se,$e)|0,q=q+Math.imul(Se,At)|0,B=B+Math.imul(ge,Rt)|0,U=(U=U+Math.imul(ge,Ct)|0)+Math.imul(oe,Rt)|0,q=q+Math.imul(oe,Ct)|0,B=B+Math.imul(me,Xe)|0,U=(U=U+Math.imul(me,Ne)|0)+Math.imul(ke,Xe)|0,q=q+Math.imul(ke,Ne)|0,B=B+Math.imul(ye,ot)|0,U=(U=U+Math.imul(ye,nt)|0)+Math.imul(pe,ot)|0,q=q+Math.imul(pe,nt)|0,B=B+Math.imul(ae,Fe)|0,U=(U=U+Math.imul(ae,rt)|0)+Math.imul(ue,Fe)|0,q=q+Math.imul(ue,rt)|0;var Pn=(J+(B=B+Math.imul(X,ft)|0)|0)+((8191&(U=(U=U+Math.imul(X,mt)|0)+Math.imul(ie,ft)|0))<<13)|0;J=((q=q+Math.imul(ie,mt)|0)+(U>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,B=Math.imul(Ae,it),U=(U=Math.imul(Ae,at))+Math.imul(Oe,it)|0,q=Math.imul(Oe,at),B=B+Math.imul(De,yt)|0,U=(U=U+Math.imul(De,pt)|0)+Math.imul(he,yt)|0,q=q+Math.imul(he,pt)|0,B=B+Math.imul(we,$e)|0,U=(U=U+Math.imul(we,At)|0)+Math.imul(Me,$e)|0,q=q+Math.imul(Me,At)|0,B=B+Math.imul(fe,Rt)|0,U=(U=U+Math.imul(fe,Ct)|0)+Math.imul(Se,Rt)|0,q=q+Math.imul(Se,Ct)|0,B=B+Math.imul(ge,Xe)|0,U=(U=U+Math.imul(ge,Ne)|0)+Math.imul(oe,Xe)|0,q=q+Math.imul(oe,Ne)|0,B=B+Math.imul(me,ot)|0,U=(U=U+Math.imul(me,nt)|0)+Math.imul(ke,ot)|0,q=q+Math.imul(ke,nt)|0,B=B+Math.imul(ye,Fe)|0,U=(U=U+Math.imul(ye,rt)|0)+Math.imul(pe,Fe)|0,q=q+Math.imul(pe,rt)|0,B=B+Math.imul(ae,ft)|0,U=(U=U+Math.imul(ae,mt)|0)+Math.imul(ue,ft)|0,q=q+Math.imul(ue,mt)|0;var Tn=(J+(B=B+Math.imul(X,ut)|0)|0)+((8191&(U=(U=U+Math.imul(X,Mt)|0)+Math.imul(ie,ut)|0))<<13)|0;J=((q=q+Math.imul(ie,Mt)|0)+(U>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,B=Math.imul(Be,it),U=(U=Math.imul(Be,at))+Math.imul(Ve,it)|0,q=Math.imul(Ve,at),B=B+Math.imul(Ae,yt)|0,U=(U=U+Math.imul(Ae,pt)|0)+Math.imul(Oe,yt)|0,q=q+Math.imul(Oe,pt)|0,B=B+Math.imul(De,$e)|0,U=(U=U+Math.imul(De,At)|0)+Math.imul(he,$e)|0,q=q+Math.imul(he,At)|0,B=B+Math.imul(we,Rt)|0,U=(U=U+Math.imul(we,Ct)|0)+Math.imul(Me,Rt)|0,q=q+Math.imul(Me,Ct)|0,B=B+Math.imul(fe,Xe)|0,U=(U=U+Math.imul(fe,Ne)|0)+Math.imul(Se,Xe)|0,q=q+Math.imul(Se,Ne)|0,B=B+Math.imul(ge,ot)|0,U=(U=U+Math.imul(ge,nt)|0)+Math.imul(oe,ot)|0,q=q+Math.imul(oe,nt)|0,B=B+Math.imul(me,Fe)|0,U=(U=U+Math.imul(me,rt)|0)+Math.imul(ke,Fe)|0,q=q+Math.imul(ke,rt)|0,B=B+Math.imul(ye,ft)|0,U=(U=U+Math.imul(ye,mt)|0)+Math.imul(pe,ft)|0,q=q+Math.imul(pe,mt)|0,B=B+Math.imul(ae,ut)|0,U=(U=U+Math.imul(ae,Mt)|0)+Math.imul(ue,ut)|0,q=q+Math.imul(ue,Mt)|0;var mn=(J+(B=B+Math.imul(X,St)|0)|0)+((8191&(U=(U=U+Math.imul(X,Pt)|0)+Math.imul(ie,St)|0))<<13)|0;J=((q=q+Math.imul(ie,Pt)|0)+(U>>>13)|0)+(mn>>>26)|0,mn&=67108863,B=Math.imul(Be,yt),U=(U=Math.imul(Be,pt))+Math.imul(Ve,yt)|0,q=Math.imul(Ve,pt),B=B+Math.imul(Ae,$e)|0,U=(U=U+Math.imul(Ae,At)|0)+Math.imul(Oe,$e)|0,q=q+Math.imul(Oe,At)|0,B=B+Math.imul(De,Rt)|0,U=(U=U+Math.imul(De,Ct)|0)+Math.imul(he,Rt)|0,q=q+Math.imul(he,Ct)|0,B=B+Math.imul(we,Xe)|0,U=(U=U+Math.imul(we,Ne)|0)+Math.imul(Me,Xe)|0,q=q+Math.imul(Me,Ne)|0,B=B+Math.imul(fe,ot)|0,U=(U=U+Math.imul(fe,nt)|0)+Math.imul(Se,ot)|0,q=q+Math.imul(Se,nt)|0,B=B+Math.imul(ge,Fe)|0,U=(U=U+Math.imul(ge,rt)|0)+Math.imul(oe,Fe)|0,q=q+Math.imul(oe,rt)|0,B=B+Math.imul(me,ft)|0,U=(U=U+Math.imul(me,mt)|0)+Math.imul(ke,ft)|0,q=q+Math.imul(ke,mt)|0,B=B+Math.imul(ye,ut)|0,U=(U=U+Math.imul(ye,Mt)|0)+Math.imul(pe,ut)|0,q=q+Math.imul(pe,Mt)|0;var Qt=(J+(B=B+Math.imul(ae,St)|0)|0)+((8191&(U=(U=U+Math.imul(ae,Pt)|0)+Math.imul(ue,St)|0))<<13)|0;J=((q=q+Math.imul(ue,Pt)|0)+(U>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,B=Math.imul(Be,$e),U=(U=Math.imul(Be,At))+Math.imul(Ve,$e)|0,q=Math.imul(Ve,At),B=B+Math.imul(Ae,Rt)|0,U=(U=U+Math.imul(Ae,Ct)|0)+Math.imul(Oe,Rt)|0,q=q+Math.imul(Oe,Ct)|0,B=B+Math.imul(De,Xe)|0,U=(U=U+Math.imul(De,Ne)|0)+Math.imul(he,Xe)|0,q=q+Math.imul(he,Ne)|0,B=B+Math.imul(we,ot)|0,U=(U=U+Math.imul(we,nt)|0)+Math.imul(Me,ot)|0,q=q+Math.imul(Me,nt)|0,B=B+Math.imul(fe,Fe)|0,U=(U=U+Math.imul(fe,rt)|0)+Math.imul(Se,Fe)|0,q=q+Math.imul(Se,rt)|0,B=B+Math.imul(ge,ft)|0,U=(U=U+Math.imul(ge,mt)|0)+Math.imul(oe,ft)|0,q=q+Math.imul(oe,mt)|0,B=B+Math.imul(me,ut)|0,U=(U=U+Math.imul(me,Mt)|0)+Math.imul(ke,ut)|0,q=q+Math.imul(ke,Mt)|0;var un=(J+(B=B+Math.imul(ye,St)|0)|0)+((8191&(U=(U=U+Math.imul(ye,Pt)|0)+Math.imul(pe,St)|0))<<13)|0;J=((q=q+Math.imul(pe,Pt)|0)+(U>>>13)|0)+(un>>>26)|0,un&=67108863,B=Math.imul(Be,Rt),U=(U=Math.imul(Be,Ct))+Math.imul(Ve,Rt)|0,q=Math.imul(Ve,Ct),B=B+Math.imul(Ae,Xe)|0,U=(U=U+Math.imul(Ae,Ne)|0)+Math.imul(Oe,Xe)|0,q=q+Math.imul(Oe,Ne)|0,B=B+Math.imul(De,ot)|0,U=(U=U+Math.imul(De,nt)|0)+Math.imul(he,ot)|0,q=q+Math.imul(he,nt)|0,B=B+Math.imul(we,Fe)|0,U=(U=U+Math.imul(we,rt)|0)+Math.imul(Me,Fe)|0,q=q+Math.imul(Me,rt)|0,B=B+Math.imul(fe,ft)|0,U=(U=U+Math.imul(fe,mt)|0)+Math.imul(Se,ft)|0,q=q+Math.imul(Se,mt)|0,B=B+Math.imul(ge,ut)|0,U=(U=U+Math.imul(ge,Mt)|0)+Math.imul(oe,ut)|0,q=q+Math.imul(oe,Mt)|0;var nn=(J+(B=B+Math.imul(me,St)|0)|0)+((8191&(U=(U=U+Math.imul(me,Pt)|0)+Math.imul(ke,St)|0))<<13)|0;J=((q=q+Math.imul(ke,Pt)|0)+(U>>>13)|0)+(nn>>>26)|0,nn&=67108863,B=Math.imul(Be,Xe),U=(U=Math.imul(Be,Ne))+Math.imul(Ve,Xe)|0,q=Math.imul(Ve,Ne),B=B+Math.imul(Ae,ot)|0,U=(U=U+Math.imul(Ae,nt)|0)+Math.imul(Oe,ot)|0,q=q+Math.imul(Oe,nt)|0,B=B+Math.imul(De,Fe)|0,U=(U=U+Math.imul(De,rt)|0)+Math.imul(he,Fe)|0,q=q+Math.imul(he,rt)|0,B=B+Math.imul(we,ft)|0,U=(U=U+Math.imul(we,mt)|0)+Math.imul(Me,ft)|0,q=q+Math.imul(Me,mt)|0,B=B+Math.imul(fe,ut)|0,U=(U=U+Math.imul(fe,Mt)|0)+Math.imul(Se,ut)|0,q=q+Math.imul(Se,Mt)|0;var hn=(J+(B=B+Math.imul(ge,St)|0)|0)+((8191&(U=(U=U+Math.imul(ge,Pt)|0)+Math.imul(oe,St)|0))<<13)|0;J=((q=q+Math.imul(oe,Pt)|0)+(U>>>13)|0)+(hn>>>26)|0,hn&=67108863,B=Math.imul(Be,ot),U=(U=Math.imul(Be,nt))+Math.imul(Ve,ot)|0,q=Math.imul(Ve,nt),B=B+Math.imul(Ae,Fe)|0,U=(U=U+Math.imul(Ae,rt)|0)+Math.imul(Oe,Fe)|0,q=q+Math.imul(Oe,rt)|0,B=B+Math.imul(De,ft)|0,U=(U=U+Math.imul(De,mt)|0)+Math.imul(he,ft)|0,q=q+Math.imul(he,mt)|0,B=B+Math.imul(we,ut)|0,U=(U=U+Math.imul(we,Mt)|0)+Math.imul(Me,ut)|0,q=q+Math.imul(Me,Mt)|0;var bn=(J+(B=B+Math.imul(fe,St)|0)|0)+((8191&(U=(U=U+Math.imul(fe,Pt)|0)+Math.imul(Se,St)|0))<<13)|0;J=((q=q+Math.imul(Se,Pt)|0)+(U>>>13)|0)+(bn>>>26)|0,bn&=67108863,B=Math.imul(Be,Fe),U=(U=Math.imul(Be,rt))+Math.imul(Ve,Fe)|0,q=Math.imul(Ve,rt),B=B+Math.imul(Ae,ft)|0,U=(U=U+Math.imul(Ae,mt)|0)+Math.imul(Oe,ft)|0,q=q+Math.imul(Oe,mt)|0,B=B+Math.imul(De,ut)|0,U=(U=U+Math.imul(De,Mt)|0)+Math.imul(he,ut)|0,q=q+Math.imul(he,Mt)|0;var wn=(J+(B=B+Math.imul(we,St)|0)|0)+((8191&(U=(U=U+Math.imul(we,Pt)|0)+Math.imul(Me,St)|0))<<13)|0;J=((q=q+Math.imul(Me,Pt)|0)+(U>>>13)|0)+(wn>>>26)|0,wn&=67108863,B=Math.imul(Be,ft),U=(U=Math.imul(Be,mt))+Math.imul(Ve,ft)|0,q=Math.imul(Ve,mt),B=B+Math.imul(Ae,ut)|0,U=(U=U+Math.imul(Ae,Mt)|0)+Math.imul(Oe,ut)|0,q=q+Math.imul(Oe,Mt)|0;var Cn=(J+(B=B+Math.imul(De,St)|0)|0)+((8191&(U=(U=U+Math.imul(De,Pt)|0)+Math.imul(he,St)|0))<<13)|0;J=((q=q+Math.imul(he,Pt)|0)+(U>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,B=Math.imul(Be,ut),U=(U=Math.imul(Be,Mt))+Math.imul(Ve,ut)|0,q=Math.imul(Ve,Mt);var Ln=(J+(B=B+Math.imul(Ae,St)|0)|0)+((8191&(U=(U=U+Math.imul(Ae,Pt)|0)+Math.imul(Oe,St)|0))<<13)|0;J=((q=q+Math.imul(Oe,Pt)|0)+(U>>>13)|0)+(Ln>>>26)|0,Ln&=67108863;var Mn=(J+(B=Math.imul(Be,St))|0)+((8191&(U=(U=Math.imul(Be,Pt))+Math.imul(Ve,St)|0))<<13)|0;return J=((q=Math.imul(Ve,Pt))+(U>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Q[0]=Dt,Q[1]=Ft,Q[2]=Xt,Q[3]=an,Q[4]=Ht,Q[5]=Zt,Q[6]=jt,Q[7]=Pn,Q[8]=Tn,Q[9]=mn,Q[10]=Qt,Q[11]=un,Q[12]=nn,Q[13]=hn,Q[14]=bn,Q[15]=wn,Q[16]=Cn,Q[17]=Ln,Q[18]=Mn,J!==0&&(Q[19]=J,Y.length++),Y};function _(O,j,Y){return new h().mulp(O,j,Y)}function h(O,j){this.x=O,this.y=j}Math.imul||(v=y),l.prototype.mulTo=function(O,j){var Y,B=this.length+O.length;return Y=this.length===10&&O.length===10?v(this,O,j):B<63?y(this,O,j):B<1024?function(U,q,te){te.negative=q.negative^U.negative,te.length=U.length+q.length;for(var ee=0,Q=0,J=0;J<te.length-1;J++){var K=Q;Q=0;for(var X=67108863&ee,ie=Math.min(J,q.length-1),se=Math.max(0,J-U.length+1);se<=ie;se++){var ae=J-se,ue=(0|U.words[ae])*(0|q.words[se]),ve=67108863&ue;X=67108863&(ve=ve+X|0),Q+=(K=(K=K+(ue/67108864|0)|0)+(ve>>>26)|0)>>>26,K&=67108863}te.words[J]=X,ee=K,K=Q}return ee!==0?te.words[J]=ee:te.length--,te.strip()}(this,O,j):_(this,O,j),Y},h.prototype.makeRBT=function(O){for(var j=new Array(O),Y=l.prototype._countBits(O)-1,B=0;B<O;B++)j[B]=this.revBin(B,Y,O);return j},h.prototype.revBin=function(O,j,Y){if(O===0||O===Y-1)return O;for(var B=0,U=0;U<j;U++)B|=(1&O)<<j-U-1,O>>=1;return B},h.prototype.permute=function(O,j,Y,B,U,q){for(var te=0;te<q;te++)B[te]=j[O[te]],U[te]=Y[O[te]]},h.prototype.transform=function(O,j,Y,B,U,q){this.permute(q,O,j,Y,B,U);for(var te=1;te<U;te<<=1)for(var ee=te<<1,Q=Math.cos(2*Math.PI/ee),J=Math.sin(2*Math.PI/ee),K=0;K<U;K+=ee)for(var X=Q,ie=J,se=0;se<te;se++){var ae=Y[K+se],ue=B[K+se],ve=Y[K+se+te],ye=B[K+se+te],pe=X*ve-ie*ye;ye=X*ye+ie*ve,ve=pe,Y[K+se]=ae+ve,B[K+se]=ue+ye,Y[K+se+te]=ae-ve,B[K+se+te]=ue-ye,se!==ee&&(pe=Q*X-J*ie,ie=Q*ie+J*X,X=pe)}},h.prototype.guessLen13b=function(O,j){var Y=1|Math.max(j,O),B=1&Y,U=0;for(Y=Y/2|0;Y;Y>>>=1)U++;return 1<<U+1+B},h.prototype.conjugate=function(O,j,Y){if(!(Y<=1))for(var B=0;B<Y/2;B++){var U=O[B];O[B]=O[Y-B-1],O[Y-B-1]=U,U=j[B],j[B]=-j[Y-B-1],j[Y-B-1]=-U}},h.prototype.normalize13b=function(O,j){for(var Y=0,B=0;B<j/2;B++){var U=8192*Math.round(O[2*B+1]/j)+Math.round(O[2*B]/j)+Y;O[B]=67108863&U,Y=U<67108864?0:U/67108864|0}return O},h.prototype.convert13b=function(O,j,Y,B){for(var U=0,q=0;q<j;q++)U+=0|O[q],Y[2*q]=8191&U,U>>>=13,Y[2*q+1]=8191&U,U>>>=13;for(q=2*j;q<B;++q)Y[q]=0;n(U===0),n((-8192&U)==0)},h.prototype.stub=function(O){for(var j=new Array(O),Y=0;Y<O;Y++)j[Y]=0;return j},h.prototype.mulp=function(O,j,Y){var B=2*this.guessLen13b(O.length,j.length),U=this.makeRBT(B),q=this.stub(B),te=new Array(B),ee=new Array(B),Q=new Array(B),J=new Array(B),K=new Array(B),X=new Array(B),ie=Y.words;ie.length=B,this.convert13b(O.words,O.length,te,B),this.convert13b(j.words,j.length,J,B),this.transform(te,q,ee,Q,B,U),this.transform(J,q,K,X,B,U);for(var se=0;se<B;se++){var ae=ee[se]*K[se]-Q[se]*X[se];Q[se]=ee[se]*X[se]+Q[se]*K[se],ee[se]=ae}return this.conjugate(ee,Q,B),this.transform(ee,Q,ie,q,B,U),this.conjugate(ie,q,B),this.normalize13b(ie,B),Y.negative=O.negative^j.negative,Y.length=O.length+j.length,Y.strip()},l.prototype.mul=function(O){var j=new l(null);return j.words=new Array(this.length+O.length),this.mulTo(O,j)},l.prototype.mulf=function(O){var j=new l(null);return j.words=new Array(this.length+O.length),_(this,O,j)},l.prototype.imul=function(O){return this.clone().mulTo(O,this)},l.prototype.imuln=function(O){n(typeof O=="number"),n(O<67108864);for(var j=0,Y=0;Y<this.length;Y++){var B=(0|this.words[Y])*O,U=(67108863&B)+(67108863&j);j>>=26,j+=B/67108864|0,j+=U>>>26,this.words[Y]=67108863&U}return j!==0&&(this.words[Y]=j,this.length++),this},l.prototype.muln=function(O){return this.clone().imuln(O)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(O){var j=function(q){for(var te=new Array(q.bitLength()),ee=0;ee<te.length;ee++){var Q=ee/26|0,J=ee%26;te[ee]=(q.words[Q]&1<<J)>>>J}return te}(O);if(j.length===0)return new l(1);for(var Y=this,B=0;B<j.length&&j[B]===0;B++,Y=Y.sqr());if(++B<j.length)for(var U=Y.sqr();B<j.length;B++,U=U.sqr())j[B]!==0&&(Y=Y.mul(U));return Y},l.prototype.iushln=function(O){n(typeof O=="number"&&O>=0);var j,Y=O%26,B=(O-Y)/26,U=67108863>>>26-Y<<26-Y;if(Y!==0){var q=0;for(j=0;j<this.length;j++){var te=this.words[j]&U,ee=(0|this.words[j])-te<<Y;this.words[j]=ee|q,q=te>>>26-Y}q&&(this.words[j]=q,this.length++)}if(B!==0){for(j=this.length-1;j>=0;j--)this.words[j+B]=this.words[j];for(j=0;j<B;j++)this.words[j]=0;this.length+=B}return this.strip()},l.prototype.ishln=function(O){return n(this.negative===0),this.iushln(O)},l.prototype.iushrn=function(O,j,Y){var B;n(typeof O=="number"&&O>=0),B=j?(j-j%26)/26:0;var U=O%26,q=Math.min((O-U)/26,this.length),te=67108863^67108863>>>U<<U,ee=Y;if(B-=q,B=Math.max(0,B),ee){for(var Q=0;Q<q;Q++)ee.words[Q]=this.words[Q];ee.length=q}if(q!==0)if(this.length>q)for(this.length-=q,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+q];else this.words[0]=0,this.length=1;var J=0;for(Q=this.length-1;Q>=0&&(J!==0||Q>=B);Q--){var K=0|this.words[Q];this.words[Q]=J<<26-U|K>>>U,J=K&te}return ee&&J!==0&&(ee.words[ee.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(O,j,Y){return n(this.negative===0),this.iushrn(O,j,Y)},l.prototype.shln=function(O){return this.clone().ishln(O)},l.prototype.ushln=function(O){return this.clone().iushln(O)},l.prototype.shrn=function(O){return this.clone().ishrn(O)},l.prototype.ushrn=function(O){return this.clone().iushrn(O)},l.prototype.testn=function(O){n(typeof O=="number"&&O>=0);var j=O%26,Y=(O-j)/26,B=1<<j;return!(this.length<=Y||!(this.words[Y]&B))},l.prototype.imaskn=function(O){n(typeof O=="number"&&O>=0);var j=O%26,Y=(O-j)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=Y)return this;if(j!==0&&Y++,this.length=Math.min(Y,this.length),j!==0){var B=67108863^67108863>>>j<<j;this.words[this.length-1]&=B}return this.strip()},l.prototype.maskn=function(O){return this.clone().imaskn(O)},l.prototype.iaddn=function(O){return n(typeof O=="number"),n(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(0|this.words[0])<O?(this.words[0]=O-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},l.prototype._iaddn=function(O){this.words[0]+=O;for(var j=0;j<this.length&&this.words[j]>=67108864;j++)this.words[j]-=67108864,j===this.length-1?this.words[j+1]=1:this.words[j+1]++;return this.length=Math.max(this.length,j+1),this},l.prototype.isubn=function(O){if(n(typeof O=="number"),n(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var j=0;j<this.length&&this.words[j]<0;j++)this.words[j]+=67108864,this.words[j+1]-=1;return this.strip()},l.prototype.addn=function(O){return this.clone().iaddn(O)},l.prototype.subn=function(O){return this.clone().isubn(O)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(O,j,Y){var B,U,q=O.length+Y;this._expand(q);var te=0;for(B=0;B<O.length;B++){U=(0|this.words[B+Y])+te;var ee=(0|O.words[B])*j;te=((U-=67108863&ee)>>26)-(ee/67108864|0),this.words[B+Y]=67108863&U}for(;B<this.length-Y;B++)te=(U=(0|this.words[B+Y])+te)>>26,this.words[B+Y]=67108863&U;if(te===0)return this.strip();for(n(te===-1),te=0,B=0;B<this.length;B++)te=(U=-(0|this.words[B])+te)>>26,this.words[B]=67108863&U;return this.negative=1,this.strip()},l.prototype._wordDiv=function(O,j){var Y=(this.length,O.length),B=this.clone(),U=O,q=0|U.words[U.length-1];(Y=26-this._countBits(q))!=0&&(U=U.ushln(Y),B.iushln(Y),q=0|U.words[U.length-1]);var te,ee=B.length-U.length;if(j!=="mod"){(te=new l(null)).length=ee+1,te.words=new Array(te.length);for(var Q=0;Q<te.length;Q++)te.words[Q]=0}var J=B.clone()._ishlnsubmul(U,1,ee);J.negative===0&&(B=J,te&&(te.words[ee]=1));for(var K=ee-1;K>=0;K--){var X=67108864*(0|B.words[U.length+K])+(0|B.words[U.length+K-1]);for(X=Math.min(X/q|0,67108863),B._ishlnsubmul(U,X,K);B.negative!==0;)X--,B.negative=0,B._ishlnsubmul(U,1,K),B.isZero()||(B.negative^=1);te&&(te.words[K]=X)}return te&&te.strip(),B.strip(),j!=="div"&&Y!==0&&B.iushrn(Y),{div:te||null,mod:B}},l.prototype.divmod=function(O,j,Y){return n(!O.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&O.negative===0?(q=this.neg().divmod(O,j),j!=="mod"&&(B=q.div.neg()),j!=="div"&&(U=q.mod.neg(),Y&&U.negative!==0&&U.iadd(O)),{div:B,mod:U}):this.negative===0&&O.negative!==0?(q=this.divmod(O.neg(),j),j!=="mod"&&(B=q.div.neg()),{div:B,mod:q.mod}):this.negative&O.negative?(q=this.neg().divmod(O.neg(),j),j!=="div"&&(U=q.mod.neg(),Y&&U.negative!==0&&U.isub(O)),{div:q.div,mod:U}):O.length>this.length||this.cmp(O)<0?{div:new l(0),mod:this}:O.length===1?j==="div"?{div:this.divn(O.words[0]),mod:null}:j==="mod"?{div:null,mod:new l(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new l(this.modn(O.words[0]))}:this._wordDiv(O,j);var B,U,q},l.prototype.div=function(O){return this.divmod(O,"div",!1).div},l.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},l.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},l.prototype.divRound=function(O){var j=this.divmod(O);if(j.mod.isZero())return j.div;var Y=j.div.negative!==0?j.mod.isub(O):j.mod,B=O.ushrn(1),U=O.andln(1),q=Y.cmp(B);return q<0||U===1&&q===0?j.div:j.div.negative!==0?j.div.isubn(1):j.div.iaddn(1)},l.prototype.modn=function(O){n(O<=67108863);for(var j=67108864%O,Y=0,B=this.length-1;B>=0;B--)Y=(j*Y+(0|this.words[B]))%O;return Y},l.prototype.idivn=function(O){n(O<=67108863);for(var j=0,Y=this.length-1;Y>=0;Y--){var B=(0|this.words[Y])+67108864*j;this.words[Y]=B/O|0,j=B%O}return this.strip()},l.prototype.divn=function(O){return this.clone().idivn(O)},l.prototype.egcd=function(O){n(O.negative===0),n(!O.isZero());var j=this,Y=O.clone();j=j.negative!==0?j.umod(O):j.clone();for(var B=new l(1),U=new l(0),q=new l(0),te=new l(1),ee=0;j.isEven()&&Y.isEven();)j.iushrn(1),Y.iushrn(1),++ee;for(var Q=Y.clone(),J=j.clone();!j.isZero();){for(var K=0,X=1;!(j.words[0]&X)&&K<26;++K,X<<=1);if(K>0)for(j.iushrn(K);K-- >0;)(B.isOdd()||U.isOdd())&&(B.iadd(Q),U.isub(J)),B.iushrn(1),U.iushrn(1);for(var ie=0,se=1;!(Y.words[0]&se)&&ie<26;++ie,se<<=1);if(ie>0)for(Y.iushrn(ie);ie-- >0;)(q.isOdd()||te.isOdd())&&(q.iadd(Q),te.isub(J)),q.iushrn(1),te.iushrn(1);j.cmp(Y)>=0?(j.isub(Y),B.isub(q),U.isub(te)):(Y.isub(j),q.isub(B),te.isub(U))}return{a:q,b:te,gcd:Y.iushln(ee)}},l.prototype._invmp=function(O){n(O.negative===0),n(!O.isZero());var j=this,Y=O.clone();j=j.negative!==0?j.umod(O):j.clone();for(var B,U=new l(1),q=new l(0),te=Y.clone();j.cmpn(1)>0&&Y.cmpn(1)>0;){for(var ee=0,Q=1;!(j.words[0]&Q)&&ee<26;++ee,Q<<=1);if(ee>0)for(j.iushrn(ee);ee-- >0;)U.isOdd()&&U.iadd(te),U.iushrn(1);for(var J=0,K=1;!(Y.words[0]&K)&&J<26;++J,K<<=1);if(J>0)for(Y.iushrn(J);J-- >0;)q.isOdd()&&q.iadd(te),q.iushrn(1);j.cmp(Y)>=0?(j.isub(Y),U.isub(q)):(Y.isub(j),q.isub(U))}return(B=j.cmpn(1)===0?U:q).cmpn(0)<0&&B.iadd(O),B},l.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var j=this.clone(),Y=O.clone();j.negative=0,Y.negative=0;for(var B=0;j.isEven()&&Y.isEven();B++)j.iushrn(1),Y.iushrn(1);for(;;){for(;j.isEven();)j.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var U=j.cmp(Y);if(U<0){var q=j;j=Y,Y=q}else if(U===0||Y.cmpn(1)===0)break;j.isub(Y)}return Y.iushln(B)},l.prototype.invm=function(O){return this.egcd(O).a.umod(O)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(O){return this.words[0]&O},l.prototype.bincn=function(O){n(typeof O=="number");var j=O%26,Y=(O-j)/26,B=1<<j;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=B,this;for(var U=B,q=Y;U!==0&&q<this.length;q++){var te=0|this.words[q];U=(te+=U)>>>26,te&=67108863,this.words[q]=te}return U!==0&&(this.words[q]=U,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(O){var j,Y=O<0;if(this.negative!==0&&!Y)return-1;if(this.negative===0&&Y)return 1;if(this.strip(),this.length>1)j=1;else{Y&&(O=-O),n(O<=67108863,"Number is too big");var B=0|this.words[0];j=B===O?0:B<O?-1:1}return this.negative!==0?0|-j:j},l.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var j=this.ucmp(O);return this.negative!==0?0|-j:j},l.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var j=0,Y=this.length-1;Y>=0;Y--){var B=0|this.words[Y],U=0|O.words[Y];if(B!==U){B<U?j=-1:B>U&&(j=1);break}}return j},l.prototype.gtn=function(O){return this.cmpn(O)===1},l.prototype.gt=function(O){return this.cmp(O)===1},l.prototype.gten=function(O){return this.cmpn(O)>=0},l.prototype.gte=function(O){return this.cmp(O)>=0},l.prototype.ltn=function(O){return this.cmpn(O)===-1},l.prototype.lt=function(O){return this.cmp(O)===-1},l.prototype.lten=function(O){return this.cmpn(O)<=0},l.prototype.lte=function(O){return this.cmp(O)<=0},l.prototype.eqn=function(O){return this.cmpn(O)===0},l.prototype.eq=function(O){return this.cmp(O)===0},l.red=function(O){return new z(O)},l.prototype.toRed=function(O){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},l.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(O){return this.red=O,this},l.prototype.forceRed=function(O){return n(!this.red,"Already a number in reduction context"),this._forceRed(O)},l.prototype.redAdd=function(O){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},l.prototype.redIAdd=function(O){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},l.prototype.redSub=function(O){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},l.prototype.redISub=function(O){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},l.prototype.redShl=function(O){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},l.prototype.redMul=function(O){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},l.prototype.redIMul=function(O){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},l.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(O){return n(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var S={k256:null,p224:null,p192:null,p25519:null};function A(O,j){this.name=O,this.p=new l(j,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function D(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(O){if(typeof O=="string"){var j=l._prime(O);this.m=j.p,this.prime=j}else n(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}function V(O){z.call(this,O),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A.prototype._tmp=function(){var O=new l(null);return O.words=new Array(Math.ceil(this.n/13)),O},A.prototype.ireduce=function(O){var j,Y=O;do this.split(Y,this.tmp),j=(Y=(Y=this.imulK(Y)).iadd(this.tmp)).bitLength();while(j>this.n);var B=j<this.n?-1:Y.ucmp(this.p);return B===0?(Y.words[0]=0,Y.length=1):B>0?Y.isub(this.p):Y.strip!==void 0?Y.strip():Y._strip(),Y},A.prototype.split=function(O,j){O.iushrn(this.n,0,j)},A.prototype.imulK=function(O){return O.imul(this.k)},o(E,A),E.prototype.split=function(O,j){for(var Y=4194303,B=Math.min(O.length,9),U=0;U<B;U++)j.words[U]=O.words[U];if(j.length=B,O.length<=9)return O.words[0]=0,void(O.length=1);var q=O.words[9];for(j.words[j.length++]=q&Y,U=10;U<O.length;U++){var te=0|O.words[U];O.words[U-10]=(te&Y)<<4|q>>>22,q=te}q>>>=22,O.words[U-10]=q,q===0&&O.length>10?O.length-=10:O.length-=9},E.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var j=0,Y=0;Y<O.length;Y++){var B=0|O.words[Y];j+=977*B,O.words[Y]=67108863&j,j=64*B+(j/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O},o(P,A),o(I,A),o(D,A),D.prototype.imulK=function(O){for(var j=0,Y=0;Y<O.length;Y++){var B=19*(0|O.words[Y])+j,U=67108863&B;B>>>=26,O.words[Y]=U,j=B}return j!==0&&(O.words[O.length++]=j),O},l._prime=function(O){if(S[O])return S[O];var j;if(O==="k256")j=new E;else if(O==="p224")j=new P;else if(O==="p192")j=new I;else{if(O!=="p25519")throw new Error("Unknown prime "+O);j=new D}return S[O]=j,j},z.prototype._verify1=function(O){n(O.negative===0,"red works only with positives"),n(O.red,"red works only with red numbers")},z.prototype._verify2=function(O,j){n((O.negative|j.negative)==0,"red works only with positives"),n(O.red&&O.red===j.red,"red works only with red numbers")},z.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},z.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},z.prototype.add=function(O,j){this._verify2(O,j);var Y=O.add(j);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},z.prototype.iadd=function(O,j){this._verify2(O,j);var Y=O.iadd(j);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},z.prototype.sub=function(O,j){this._verify2(O,j);var Y=O.sub(j);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},z.prototype.isub=function(O,j){this._verify2(O,j);var Y=O.isub(j);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},z.prototype.shl=function(O,j){return this._verify1(O),this.imod(O.ushln(j))},z.prototype.imul=function(O,j){return this._verify2(O,j),this.imod(O.imul(j))},z.prototype.mul=function(O,j){return this._verify2(O,j),this.imod(O.mul(j))},z.prototype.isqr=function(O){return this.imul(O,O.clone())},z.prototype.sqr=function(O){return this.mul(O,O)},z.prototype.sqrt=function(O){if(O.isZero())return O.clone();var j=this.m.andln(3);if(n(j%2==1),j===3){var Y=this.m.add(new l(1)).iushrn(2);return this.pow(O,Y)}for(var B=this.m.subn(1),U=0;!B.isZero()&&B.andln(1)===0;)U++,B.iushrn(1);n(!B.isZero());var q=new l(1).toRed(this),te=q.redNeg(),ee=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new l(2*Q*Q).toRed(this);this.pow(Q,ee).cmp(te)!==0;)Q.redIAdd(te);for(var J=this.pow(Q,B),K=this.pow(O,B.addn(1).iushrn(1)),X=this.pow(O,B),ie=U;X.cmp(q)!==0;){for(var se=X,ae=0;se.cmp(q)!==0;ae++)se=se.redSqr();n(ae<ie);var ue=this.pow(J,new l(1).iushln(ie-ae-1));K=K.redMul(ue),J=ue.redSqr(),X=X.redMul(J),ie=ae}return K},z.prototype.invm=function(O){var j=O._invmp(this.m);return j.negative!==0?(j.negative=0,this.imod(j).redNeg()):this.imod(j)},z.prototype.pow=function(O,j){if(j.isZero())return new l(1).toRed(this);if(j.cmpn(1)===0)return O.clone();var Y=new Array(16);Y[0]=new l(1).toRed(this),Y[1]=O;for(var B=2;B<Y.length;B++)Y[B]=this.mul(Y[B-1],O);var U=Y[0],q=0,te=0,ee=j.bitLength()%26;for(ee===0&&(ee=26),B=j.length-1;B>=0;B--){for(var Q=j.words[B],J=ee-1;J>=0;J--){var K=Q>>J&1;U!==Y[0]&&(U=this.sqr(U)),K!==0||q!==0?(q<<=1,q|=K,(++te==4||B===0&&J===0)&&(U=this.mul(U,Y[q]),te=0,q=0)):te=0}ee=26}return U},z.prototype.convertTo=function(O){var j=O.umod(this.m);return j===O?j.clone():j},z.prototype.convertFrom=function(O){var j=O.clone();return j.red=null,j},l.mont=function(O){return new V(O)},o(V,z),V.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},V.prototype.convertFrom=function(O){var j=this.imod(O.mul(this.rinv));return j.red=null,j},V.prototype.imul=function(O,j){if(O.isZero()||j.isZero())return O.words[0]=0,O.length=1,O;var Y=O.imul(j),B=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=Y.isub(B).iushrn(this.shift),q=U;return U.cmp(this.m)>=0?q=U.isub(this.m):U.cmpn(0)<0&&(q=U.iadd(this.m)),q._forceRed(this)},V.prototype.mul=function(O,j){if(O.isZero()||j.isZero())return new l(0)._forceRed(this);var Y=O.mul(j),B=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=Y.isub(B).iushrn(this.shift),q=U;return U.cmp(this.m)>=0?q=U.isub(this.m):U.cmpn(0)<0&&(q=U.iadd(this.m)),q._forceRed(this)},V.prototype.invm=function(O){return this.imod(O._invmp(this.m).mul(this.r2))._forceRed(this)}})(f=t.nmd(f),this)},6204:function(f){"use strict";f.exports=function(s){var t,i,r,n=s.length,o=0;for(t=0;t<n;++t)o+=s[t].length;var l=new Array(o),c=0;for(t=0;t<n;++t){var d=s[t],u=d.length;for(i=0;i<u;++i){var x=l[c++]=new Array(u-1),p=0;for(r=0;r<u;++r)r!==i&&(x[p++]=d[r]);if(1&i){var g=x[1];x[1]=x[0],x[0]=g}}}return l}},6867:function(f,s,t){"use strict";f.exports=function(x,p,g){switch(arguments.length){case 1:return i=[],d(m=x,m,u,!0),i;case 2:return typeof p=="function"?d(x,x,p,!0):function(y,v){return i=[],d(y,v,u,!1),i}(x,p);case 3:return d(x,p,g,!1);default:throw new Error("box-intersect: Invalid arguments")}var m};var i,r=t(1888),n=t(855),o=t(7150);function l(x,p){for(var g=0;g<x;++g)if(!(p[g]<=p[g+x]))return!0;return!1}function c(x,p,g,m){for(var y=0,v=0,_=0,h=x.length;_<h;++_){var S=x[_];if(!l(p,S)){for(var A=0;A<2*p;++A)g[y++]=S[A];m[v++]=_}}return v}function d(x,p,g,m){var y=x.length,v=p.length;if(!(y<=0||v<=0)){var _=x[0].length>>>1;if(!(_<=0)){var h,S=r.mallocDouble(2*_*y),A=r.mallocInt32(y);if((y=c(x,_,S,A))>0){if(_===1&&m)n.init(y),h=n.sweepComplete(_,g,0,y,S,A,0,y,S,A);else{var E=r.mallocDouble(2*_*v),P=r.mallocInt32(v);(v=c(p,_,E,P))>0&&(n.init(y+v),h=_===1?n.sweepBipartite(_,g,0,y,S,A,0,v,E,P):o(_,g,m,y,S,A,v,E,P),r.free(E),r.free(P))}r.free(S),r.free(A)}return h}}}function u(x,p){i.push([x,p])}},2455:function(f,s){"use strict";function t(i){return i?function(r,n,o,l,c,d,u,x,p,g,m){return c-l>p-x?function(y,v,_,h,S,A,E,P,I,D,z){for(var V=2*y,O=h,j=V*h;O<S;++O,j+=V){var Y=A[v+j],B=A[v+j+y],U=E[O];e:for(var q=P,te=V*P;q<I;++q,te+=V){var ee=D[v+te],Q=D[v+te+y],J=z[q];if(!(Q<Y||B<ee)){for(var K=v+1;K<y;++K){var X=A[K+j],ie=A[K+y+j],se=D[K+te],ae=D[K+y+te];if(ie<se||ae<X)continue e}var ue=_(U,J);if(ue!==void 0)return ue}}}}(r,n,o,l,c,d,u,x,p,g,m):function(y,v,_,h,S,A,E,P,I,D,z){for(var V=2*y,O=P,j=V*P;O<I;++O,j+=V){var Y=D[v+j],B=D[v+j+y],U=z[O];e:for(var q=h,te=V*h;q<S;++q,te+=V){var ee=A[v+te],Q=A[v+te+y],J=E[q];if(!(B<ee||Q<Y)){for(var K=v+1;K<y;++K){var X=A[K+te],ie=A[K+y+te],se=D[K+j],ae=D[K+y+j];if(ie<se||ae<X)continue e}var ue=_(J,U);if(ue!==void 0)return ue}}}}(r,n,o,l,c,d,u,x,p,g,m)}:function(r,n,o,l,c,d,u,x,p,g,m,y){return d-c>g-p?l?function(v,_,h,S,A,E,P,I,D,z,V){for(var O=2*v,j=S,Y=O*S;j<A;++j,Y+=O){var B=E[_+Y],U=E[_+Y+v],q=P[j];e:for(var te=I,ee=O*I;te<D;++te,ee+=O){var Q=z[_+ee],J=V[te];if(!(Q<=B||U<Q)){for(var K=_+1;K<v;++K){var X=E[K+Y],ie=E[K+v+Y],se=z[K+ee],ae=z[K+v+ee];if(ie<se||ae<X)continue e}var ue=h(J,q);if(ue!==void 0)return ue}}}}(r,n,o,c,d,u,x,p,g,m,y):function(v,_,h,S,A,E,P,I,D,z,V){for(var O=2*v,j=S,Y=O*S;j<A;++j,Y+=O){var B=E[_+Y],U=E[_+Y+v],q=P[j];e:for(var te=I,ee=O*I;te<D;++te,ee+=O){var Q=z[_+ee],J=V[te];if(!(Q<B||U<Q)){for(var K=_+1;K<v;++K){var X=E[K+Y],ie=E[K+v+Y],se=z[K+ee],ae=z[K+v+ee];if(ie<se||ae<X)continue e}var ue=h(q,J);if(ue!==void 0)return ue}}}}(r,n,o,c,d,u,x,p,g,m,y):l?function(v,_,h,S,A,E,P,I,D,z,V){for(var O=2*v,j=I,Y=O*I;j<D;++j,Y+=O){var B=z[_+Y],U=V[j];e:for(var q=S,te=O*S;q<A;++q,te+=O){var ee=E[_+te],Q=E[_+te+v],J=P[q];if(!(B<=ee||Q<B)){for(var K=_+1;K<v;++K){var X=E[K+te],ie=E[K+v+te],se=z[K+Y],ae=z[K+v+Y];if(ie<se||ae<X)continue e}var ue=h(U,J);if(ue!==void 0)return ue}}}}(r,n,o,c,d,u,x,p,g,m,y):function(v,_,h,S,A,E,P,I,D,z,V){for(var O=2*v,j=I,Y=O*I;j<D;++j,Y+=O){var B=z[_+Y],U=V[j];e:for(var q=S,te=O*S;q<A;++q,te+=O){var ee=E[_+te],Q=E[_+te+v],J=P[q];if(!(B<ee||Q<B)){for(var K=_+1;K<v;++K){var X=E[K+te],ie=E[K+v+te],se=z[K+Y],ae=z[K+v+Y];if(ie<se||ae<X)continue e}var ue=h(J,U);if(ue!==void 0)return ue}}}}(r,n,o,c,d,u,x,p,g,m,y)}}s.partial=t(!1),s.full=t(!0)},7150:function(f,s,t){"use strict";f.exports=function(O,j,Y,B,U,q,te,ee,Q){(function(Oe,Ee){var Be=8*r.log2(Ee+1)*(Oe+1)|0,Ve=r.nextPow2(A*Be);P.length<Ve&&(i.free(P),P=i.mallocInt32(Ve));var Ze=r.nextPow2(E*Be);I.length<Ze&&(i.free(I),I=i.mallocDouble(Ze))})(O,B+te);var J,K=0,X=2*O;for(D(K++,0,0,B,0,te,Y?16:0,-1/0,1/0),Y||D(K++,0,0,te,0,B,1,-1/0,1/0);K>0;){var ie=(K-=1)*A,se=P[ie],ae=P[ie+1],ue=P[ie+2],ve=P[ie+3],ye=P[ie+4],pe=P[ie+5],de=K*E,me=I[de],ke=I[de+1],Ce=1&pe,ge=!!(16&pe),oe=U,re=q,fe=ee,Se=Q;if(Ce&&(oe=ee,re=Q,fe=U,Se=q),!(2&pe&&ae>=(ue=v(O,se,ae,ue,oe,re,ke))||4&pe&&(ae=_(O,se,ae,ue,oe,re,me))>=ue)){var be=ue-ae,we=ye-ve;if(ge){if(O*be*(be+we)<g){if((J=c.scanComplete(O,se,j,ae,ue,oe,re,ve,ye,fe,Se))!==void 0)return J;continue}}else{if(O*Math.min(be,we)<x){if((J=o(O,se,j,Ce,ae,ue,oe,re,ve,ye,fe,Se))!==void 0)return J;continue}if(O*be*we<p){if((J=c.scanBipartite(O,se,j,Ce,ae,ue,oe,re,ve,ye,fe,Se))!==void 0)return J;continue}}var Me=m(O,se,ae,ue,oe,re,me,ke);if(ae<Me)if(O*(Me-ae)<x){if((J=l(O,se+1,j,ae,Me,oe,re,ve,ye,fe,Se))!==void 0)return J}else if(se===O-2){if((J=Ce?c.sweepBipartite(O,j,ve,ye,fe,Se,ae,Me,oe,re):c.sweepBipartite(O,j,ae,Me,oe,re,ve,ye,fe,Se))!==void 0)return J}else D(K++,se+1,ae,Me,ve,ye,Ce,-1/0,1/0),D(K++,se+1,ve,ye,ae,Me,1^Ce,-1/0,1/0);if(Me<ue){var Pe=d(O,se,ve,ye,fe,Se),De=fe[X*Pe+se],he=y(O,se,Pe,ye,fe,Se,De);if(he<ye&&D(K++,se,Me,ue,he,ye,(4|Ce)+(ge?16:0),De,ke),ve<Pe&&D(K++,se,Me,ue,ve,Pe,(2|Ce)+(ge?16:0),me,De),Pe+1===he){if((J=ge?V(O,se,j,Me,ue,oe,re,Pe,fe,Se[Pe]):z(O,se,j,Ce,Me,ue,oe,re,Pe,fe,Se[Pe]))!==void 0)return J}else if(Pe<he){var _e;if(ge){if(Me<(_e=h(O,se,Me,ue,oe,re,De))){var Ae=y(O,se,Me,_e,oe,re,De);if(se===O-2){if(Me<Ae&&(J=c.sweepComplete(O,j,Me,Ae,oe,re,Pe,he,fe,Se))!==void 0||Ae<_e&&(J=c.sweepBipartite(O,j,Ae,_e,oe,re,Pe,he,fe,Se))!==void 0)return J}else Me<Ae&&D(K++,se+1,Me,Ae,Pe,he,16,-1/0,1/0),Ae<_e&&(D(K++,se+1,Ae,_e,Pe,he,0,-1/0,1/0),D(K++,se+1,Pe,he,Ae,_e,1,-1/0,1/0))}}else Me<(_e=Ce?S(O,se,Me,ue,oe,re,De):h(O,se,Me,ue,oe,re,De))&&(se===O-2?J=Ce?c.sweepBipartite(O,j,Pe,he,fe,Se,Me,_e,oe,re):c.sweepBipartite(O,j,Me,_e,oe,re,Pe,he,fe,Se):(D(K++,se+1,Me,_e,Pe,he,Ce,-1/0,1/0),D(K++,se+1,Pe,he,Me,_e,1^Ce,-1/0,1/0)))}}}}};var i=t(1888),r=t(8828),n=t(2455),o=n.partial,l=n.full,c=t(855),d=t(3545),u=t(8105),x=128,p=1<<22,g=1<<22,m=u("!(lo>=p0)&&!(p1>=hi)"),y=u("lo===p0"),v=u("lo<p0"),_=u("hi<=p0"),h=u("lo<=p0&&p0<=hi"),S=u("lo<p0&&p0<=hi"),A=6,E=2,P=i.mallocInt32(1024),I=i.mallocDouble(1024);function D(O,j,Y,B,U,q,te,ee,Q){var J=A*O;P[J]=j,P[J+1]=Y,P[J+2]=B,P[J+3]=U,P[J+4]=q,P[J+5]=te;var K=E*O;I[K]=ee,I[K+1]=Q}function z(O,j,Y,B,U,q,te,ee,Q,J,K){var X=2*O,ie=Q*X,se=J[ie+j];e:for(var ae=U,ue=U*X;ae<q;++ae,ue+=X){var ve=te[ue+j],ye=te[ue+j+O];if(!(se<ve||ye<se||B&&se===ve)){for(var pe,de=ee[ae],me=j+1;me<O;++me){ve=te[ue+me],ye=te[ue+me+O];var ke=J[ie+me],Ce=J[ie+me+O];if(ye<ke||Ce<ve)continue e}if((pe=B?Y(K,de):Y(de,K))!==void 0)return pe}}}function V(O,j,Y,B,U,q,te,ee,Q,J){var K=2*O,X=ee*K,ie=Q[X+j];e:for(var se=B,ae=B*K;se<U;++se,ae+=K){var ue=te[se];if(ue!==J){var ve=q[ae+j],ye=q[ae+j+O];if(!(ie<ve||ye<ie)){for(var pe=j+1;pe<O;++pe){ve=q[ae+pe],ye=q[ae+pe+O];var de=Q[X+pe],me=Q[X+pe+O];if(ye<de||me<ve)continue e}var ke=Y(ue,J);if(ke!==void 0)return ke}}}}},3545:function(f,s,t){"use strict";f.exports=function(o,l,c,d,u,x){if(d<=c+1)return c;for(var p=c,g=d,m=d+c>>>1,y=2*o,v=m,_=u[y*m+l];p<g;){if(g-p<r){n(o,l,p,g,u,x),_=u[y*m+l];break}var h=g-p,S=Math.random()*h+p|0,A=u[y*S+l],E=Math.random()*h+p|0,P=u[y*E+l],I=Math.random()*h+p|0,D=u[y*I+l];A<=P?D>=P?(v=E,_=P):A>=D?(v=S,_=A):(v=I,_=D):P>=D?(v=E,_=P):D>=A?(v=S,_=A):(v=I,_=D);for(var z=y*(g-1),V=y*v,O=0;O<y;++O,++z,++V){var j=u[z];u[z]=u[V],u[V]=j}var Y=x[g-1];for(x[g-1]=x[v],x[v]=Y,z=y*(g-1),V=y*(v=i(o,l,p,g-1,u,x,_)),O=0;O<y;++O,++z,++V)j=u[z],u[z]=u[V],u[V]=j;if(Y=x[g-1],x[g-1]=x[v],x[v]=Y,m<v){for(g=v-1;p<g&&u[y*(g-1)+l]===_;)g-=1;g+=1}else{if(!(v<m))break;for(p=v+1;p<g&&u[y*p+l]===_;)p+=1}}return i(o,l,c,m,u,x,u[y*m+l])};var i=t(8105)("lo<p0"),r=8;function n(o,l,c,d,u,x){for(var p=2*o,g=p*(c+1)+l,m=c+1;m<d;++m,g+=p)for(var y=u[g],v=m,_=p*(m-1);v>c&&u[_+l]>y;--v,_-=p){for(var h=_,S=_+p,A=0;A<p;++A,++h,++S){var E=u[h];u[h]=u[S],u[S]=E}var P=x[v];x[v]=x[v-1],x[v-1]=P}}},8105:function(f){"use strict";f.exports=function(t){return s[t]};var s={"lo===p0":function(t,i,r,n,o,l,c){for(var d=2*t,u=d*r,x=u,p=r,g=i,m=r;n>m;++m,u+=d)if(o[u+g]===c)if(p===m)p+=1,x+=d;else{for(var y=0;d>y;++y){var v=o[u+y];o[u+y]=o[x],o[x++]=v}var _=l[m];l[m]=l[p],l[p++]=_}return p},"lo<p0":function(t,i,r,n,o,l,c){for(var d=2*t,u=d*r,x=u,p=r,g=i,m=r;n>m;++m,u+=d)if(o[u+g]<c)if(p===m)p+=1,x+=d;else{for(var y=0;d>y;++y){var v=o[u+y];o[u+y]=o[x],o[x++]=v}var _=l[m];l[m]=l[p],l[p++]=_}return p},"lo<=p0":function(t,i,r,n,o,l,c){for(var d=2*t,u=d*r,x=u,p=r,g=t+i,m=r;n>m;++m,u+=d)if(o[u+g]<=c)if(p===m)p+=1,x+=d;else{for(var y=0;d>y;++y){var v=o[u+y];o[u+y]=o[x],o[x++]=v}var _=l[m];l[m]=l[p],l[p++]=_}return p},"hi<=p0":function(t,i,r,n,o,l,c){for(var d=2*t,u=d*r,x=u,p=r,g=t+i,m=r;n>m;++m,u+=d)if(o[u+g]<=c)if(p===m)p+=1,x+=d;else{for(var y=0;d>y;++y){var v=o[u+y];o[u+y]=o[x],o[x++]=v}var _=l[m];l[m]=l[p],l[p++]=_}return p},"lo<p0&&p0<=hi":function(t,i,r,n,o,l,c){for(var d=2*t,u=d*r,x=u,p=r,g=i,m=t+i,y=r;n>y;++y,u+=d){var v=o[u+g],_=o[u+m];if(v<c&&c<=_)if(p===y)p+=1,x+=d;else{for(var h=0;d>h;++h){var S=o[u+h];o[u+h]=o[x],o[x++]=S}var A=l[y];l[y]=l[p],l[p++]=A}}return p},"lo<=p0&&p0<=hi":function(t,i,r,n,o,l,c){for(var d=2*t,u=d*r,x=u,p=r,g=i,m=t+i,y=r;n>y;++y,u+=d){var v=o[u+g],_=o[u+m];if(v<=c&&c<=_)if(p===y)p+=1,x+=d;else{for(var h=0;d>h;++h){var S=o[u+h];o[u+h]=o[x],o[x++]=S}var A=l[y];l[y]=l[p],l[p++]=A}}return p},"!(lo>=p0)&&!(p1>=hi)":function(t,i,r,n,o,l,c,d){for(var u=2*t,x=u*r,p=x,g=r,m=i,y=t+i,v=r;n>v;++v,x+=u){var _=o[x+m],h=o[x+y];if(!(_>=c||d>=h))if(g===v)g+=1,p+=u;else{for(var S=0;u>S;++S){var A=o[x+S];o[x+S]=o[p],o[p++]=A}var E=l[v];l[v]=l[g],l[g++]=E}}return g}}},1811:function(f){"use strict";f.exports=function(u,x){x<=4*s?t(0,x-1,u):d(0,x-1,u)};var s=32;function t(u,x,p){for(var g=2*(u+1),m=u+1;m<=x;++m){for(var y=p[g++],v=p[g++],_=m,h=g-2;_-- >u;){var S=p[h-2],A=p[h-1];if(S<y||S===y&&A<v)break;p[h]=S,p[h+1]=A,h-=2}p[h]=y,p[h+1]=v}}function i(u,x,p){x*=2;var g=p[u*=2],m=p[u+1];p[u]=p[x],p[u+1]=p[x+1],p[x]=g,p[x+1]=m}function r(u,x,p){x*=2,p[u*=2]=p[x],p[u+1]=p[x+1]}function n(u,x,p,g){x*=2,p*=2;var m=g[u*=2],y=g[u+1];g[u]=g[x],g[u+1]=g[x+1],g[x]=g[p],g[x+1]=g[p+1],g[p]=m,g[p+1]=y}function o(u,x,p,g,m){x*=2,m[u*=2]=m[x],m[x]=p,m[u+1]=m[x+1],m[x+1]=g}function l(u,x,p){x*=2;var g=p[u*=2],m=p[x];return!(g<m)&&(g!==m||p[u+1]>p[x+1])}function c(u,x,p,g){var m=g[u*=2];return m<x||m===x&&g[u+1]<p}function d(u,x,p){var g=(x-u+1)/6|0,m=u+g,y=x-g,v=u+x>>1,_=v-g,h=v+g,S=m,A=_,E=v,P=h,I=y,D=u+1,z=x-1,V=0;l(S,A,p)&&(V=S,S=A,A=V),l(P,I,p)&&(V=P,P=I,I=V),l(S,E,p)&&(V=S,S=E,E=V),l(A,E,p)&&(V=A,A=E,E=V),l(S,P,p)&&(V=S,S=P,P=V),l(E,P,p)&&(V=E,E=P,P=V),l(A,I,p)&&(V=A,A=I,I=V),l(A,E,p)&&(V=A,A=E,E=V),l(P,I,p)&&(V=P,P=I,I=V);for(var O=p[2*A],j=p[2*A+1],Y=p[2*P],B=p[2*P+1],U=2*S,q=2*E,te=2*I,ee=2*m,Q=2*v,J=2*y,K=0;K<2;++K){var X=p[U+K],ie=p[q+K],se=p[te+K];p[ee+K]=X,p[Q+K]=ie,p[J+K]=se}r(_,u,p),r(h,x,p);for(var ae=D;ae<=z;++ae)if(c(ae,O,j,p))ae!==D&&i(ae,D,p),++D;else if(!c(ae,Y,B,p))for(;;){if(c(z,Y,B,p)){c(z,O,j,p)?(n(ae,D,z,p),++D,--z):(i(ae,z,p),--z);break}if(--z<ae)break}o(u,D-1,O,j,p),o(x,z+1,Y,B,p),D-2-u<=s?t(u,D-2,p):d(u,D-2,p),x-(z+2)<=s?t(z+2,x,p):d(z+2,x,p),z-D<=s?t(D,z,p):d(D,z,p)}},855:function(f,s,t){"use strict";f.exports={init:function(_){var h=r.nextPow2(_);c.length<h&&(i.free(c),c=i.mallocInt32(h)),d.length<h&&(i.free(d),d=i.mallocInt32(h)),u.length<h&&(i.free(u),u=i.mallocInt32(h)),x.length<h&&(i.free(x),x=i.mallocInt32(h)),p.length<h&&(i.free(p),p=i.mallocInt32(h)),g.length<h&&(i.free(g),g=i.mallocInt32(h));var S=8*h;m.length<S&&(i.free(m),m=i.mallocDouble(S))},sweepBipartite:function(_,h,S,A,E,P,I,D,z,V){for(var O=0,j=2*_,Y=_-1,B=j-1,U=S;U<A;++U){var q=P[U],te=j*U;m[O++]=E[te+Y],m[O++]=-(q+1),m[O++]=E[te+B],m[O++]=q}for(U=I;U<D;++U){q=V[U]+o;var ee=j*U;m[O++]=z[ee+Y],m[O++]=-q,m[O++]=z[ee+B],m[O++]=q}var Q=O>>>1;n(m,Q);var J=0,K=0;for(U=0;U<Q;++U){var X=0|m[2*U+1];if(X>=o)y(u,x,K--,X=X-o|0);else if(X>=0)y(c,d,J--,X);else if(X<=-o){X=-X-o|0;for(var ie=0;ie<J;++ie)if((se=h(c[ie],X))!==void 0)return se;v(u,x,K++,X)}else{for(X=-X-1|0,ie=0;ie<K;++ie){var se;if((se=h(X,u[ie]))!==void 0)return se}v(c,d,J++,X)}}},sweepComplete:function(_,h,S,A,E,P,I,D,z,V){for(var O=0,j=2*_,Y=_-1,B=j-1,U=S;U<A;++U){var q=P[U]+1<<1,te=j*U;m[O++]=E[te+Y],m[O++]=-q,m[O++]=E[te+B],m[O++]=q}for(U=I;U<D;++U){q=V[U]+1<<1;var ee=j*U;m[O++]=z[ee+Y],m[O++]=1|-q,m[O++]=z[ee+B],m[O++]=1|q}var Q=O>>>1;n(m,Q);var J=0,K=0,X=0;for(U=0;U<Q;++U){var ie=0|m[2*U+1],se=1&ie;if(U<Q-1&&ie>>1==m[2*U+3]>>1&&(se=2,U+=1),ie<0){for(var ae=-(ie>>1)-1,ue=0;ue<X;++ue)if((ve=h(p[ue],ae))!==void 0)return ve;if(se!==0){for(ue=0;ue<J;++ue)if((ve=h(c[ue],ae))!==void 0)return ve}if(se!==1)for(ue=0;ue<K;++ue){var ve;if((ve=h(u[ue],ae))!==void 0)return ve}se===0?v(c,d,J++,ae):se===1?v(u,x,K++,ae):se===2&&v(p,g,X++,ae)}else ae=(ie>>1)-1,se===0?y(c,d,J--,ae):se===1?y(u,x,K--,ae):se===2&&y(p,g,X--,ae)}},scanBipartite:function(_,h,S,A,E,P,I,D,z,V,O,j){var Y=0,B=2*_,U=h,q=h+_,te=1,ee=1;A?ee=o:te=o;for(var Q=E;Q<P;++Q){var J=Q+te,K=B*Q;m[Y++]=I[K+U],m[Y++]=-J,m[Y++]=I[K+q],m[Y++]=J}for(Q=z;Q<V;++Q){J=Q+ee;var X=B*Q;m[Y++]=O[X+U],m[Y++]=-J}var ie=Y>>>1;n(m,ie);var se=0;for(Q=0;Q<ie;++Q){var ae=0|m[2*Q+1];if(ae<0){var ue=!1;if((J=-ae)>=o?(ue=!A,J-=o):(ue=!!A,J-=1),ue)v(c,d,se++,J);else{var ve=j[J],ye=B*J,pe=O[ye+h+1],de=O[ye+h+1+_];e:for(var me=0;me<se;++me){var ke=c[me],Ce=B*ke;if(!(de<I[Ce+h+1]||I[Ce+h+1+_]<pe)){for(var ge=h+2;ge<_;++ge)if(O[ye+ge+_]<I[Ce+ge]||I[Ce+ge+_]<O[ye+ge])continue e;var oe,re=D[ke];if((oe=A?S(ve,re):S(re,ve))!==void 0)return oe}}}}else y(c,d,se--,ae-te)}},scanComplete:function(_,h,S,A,E,P,I,D,z,V,O){for(var j=0,Y=2*_,B=h,U=h+_,q=A;q<E;++q){var te=q+o,ee=Y*q;m[j++]=P[ee+B],m[j++]=-te,m[j++]=P[ee+U],m[j++]=te}for(q=D;q<z;++q){te=q+1;var Q=Y*q;m[j++]=V[Q+B],m[j++]=-te}var J=j>>>1;n(m,J);var K=0;for(q=0;q<J;++q){var X=0|m[2*q+1];if(X<0)if((te=-X)>=o)c[K++]=te-o;else{var ie=O[te-=1],se=Y*te,ae=V[se+h+1],ue=V[se+h+1+_];e:for(var ve=0;ve<K;++ve){var ye=c[ve],pe=I[ye];if(pe===ie)break;var de=Y*ye;if(!(ue<P[de+h+1]||P[de+h+1+_]<ae)){for(var me=h+2;me<_;++me)if(V[se+me+_]<P[de+me]||P[de+me+_]<V[se+me])continue e;var ke=S(pe,ie);if(ke!==void 0)return ke}}}else{for(te=X-o,ve=K-1;ve>=0;--ve)if(c[ve]===te){for(me=ve+1;me<K;++me)c[me-1]=c[me];break}--K}}}};var i=t(1888),r=t(8828),n=t(1811),o=1<<28,l=1024,c=i.mallocInt32(l),d=i.mallocInt32(l),u=i.mallocInt32(l),x=i.mallocInt32(l),p=i.mallocInt32(l),g=i.mallocInt32(l),m=i.mallocDouble(8192);function y(_,h,S,A){var E=h[A],P=_[S-1];_[E]=P,h[P]=E}function v(_,h,S,A){_[S]=A,h[A]=S}},2538:function(f,s,t){"use strict";var i=t(8902),r=t(5542),n=t(2272),o=t(5023);function l(u){return[Math.min(u[0],u[1]),Math.max(u[0],u[1])]}function c(u,x){return u[0]-x[0]||u[1]-x[1]}function d(u,x,p){return x in u?u[x]:p}f.exports=function(u,x,p){Array.isArray(x)?(p=p||{},x=x||[]):(p=x||{},x=[]);var g=!!d(p,"delaunay",!0),m=!!d(p,"interior",!0),y=!!d(p,"exterior",!0),v=!!d(p,"infinity",!1);if(!m&&!y||u.length===0)return[];var _=i(u,x);if(g||m!==y||v){for(var h=r(u.length,function(E){return E.map(l).sort(c)}(x)),S=0;S<_.length;++S){var A=_[S];h.addTriangle(A[0],A[1],A[2])}return g&&n(u,h),y?m?v?o(h,0,v):h.cells():o(h,1,v):o(h,-1)}return _}},2272:function(f,s,t){"use strict";var i=t(2646)[4];function r(n,o,l,c,d,u){var x=o.opposite(c,d);if(!(x<0)){if(d<c){var p=c;c=d,d=p,p=u,u=x,x=p}o.isConstraint(c,d)||i(n[c],n[d],n[u],n[x])<0&&l.push(c,d)}}t(2478),f.exports=function(n,o){for(var l=[],c=n.length,d=o.stars,u=0;u<c;++u)for(var x=d[u],p=1;p<x.length;p+=2)if(!((v=x[p])<u||o.isConstraint(u,v))){for(var g=x[p-1],m=-1,y=1;y<x.length;y+=2)if(x[y-1]===v){m=x[y];break}m<0||i(n[u],n[v],n[g],n[m])<0&&l.push(u,v)}for(;l.length>0;){for(var v=l.pop(),_=(g=-1,m=-1,x=d[u=l.pop()],1);_<x.length;_+=2){var h=x[_-1],S=x[_];h===v?m=S:S===v&&(g=h)}g<0||m<0||i(n[u],n[v],n[g],n[m])>=0||(o.flip(u,v),r(n,o,l,g,u,m),r(n,o,l,u,m,g),r(n,o,l,m,v,g),r(n,o,l,v,g,m))}}},5023:function(f,s,t){"use strict";var i,r=t(2478);function n(l,c,d,u,x,p,g){this.cells=l,this.neighbor=c,this.flags=u,this.constraint=d,this.active=x,this.next=p,this.boundary=g}function o(l,c){return l[0]-c[0]||l[1]-c[1]||l[2]-c[2]}f.exports=function(l,c,d){var u=function(I,D){for(var z=I.cells(),V=z.length,O=0;O<V;++O){var j=(X=z[O])[0],Y=X[1],B=X[2];Y<B?Y<j&&(X[0]=Y,X[1]=B,X[2]=j):B<j&&(X[0]=B,X[1]=j,X[2]=Y)}z.sort(o);var U=new Array(V);for(O=0;O<U.length;++O)U[O]=0;var q=[],te=[],ee=new Array(3*V),Q=new Array(3*V),J=null;D&&(J=[]);var K=new n(z,ee,Q,U,q,te,J);for(O=0;O<V;++O)for(var X=z[O],ie=0;ie<3;++ie){j=X[ie],Y=X[(ie+1)%3];var se=ee[3*O+ie]=K.locate(Y,j,I.opposite(Y,j)),ae=Q[3*O+ie]=I.isConstraint(j,Y);se<0&&(ae?te.push(O):(q.push(O),U[O]=1),D&&J.push([Y,j,-1]))}return K}(l,d);if(c===0)return d?u.cells.concat(u.boundary):u.cells;for(var x=1,p=u.active,g=u.next,m=u.flags,y=u.cells,v=u.constraint,_=u.neighbor;p.length>0||g.length>0;){for(;p.length>0;){var h=p.pop();if(m[h]!==-x){m[h]=x,y[h];for(var S=0;S<3;++S){var A=_[3*h+S];A>=0&&m[A]===0&&(v[3*h+S]?g.push(A):(p.push(A),m[A]=x))}}}var E=g;g=p,p=E,g.length=0,x=-x}var P=function(I,D,z){for(var V=0,O=0;O<I.length;++O)D[O]===z&&(I[V++]=I[O]);return I.length=V,I}(y,m,c);return d?P.concat(u.boundary):P},n.prototype.locate=(i=[0,0,0],function(l,c,d){var u=l,x=c,p=d;return c<d?c<l&&(u=c,x=d,p=l):d<l&&(u=d,x=l,p=c),u<0?-1:(i[0]=u,i[1]=x,i[2]=p,r.eq(this.cells,i,o))})},8902:function(f,s,t){"use strict";var i=t(2478),r=t(3250)[3];function n(g,m,y,v,_){this.a=g,this.b=m,this.idx=y,this.lowerIds=v,this.upperIds=_}function o(g,m,y,v){this.a=g,this.b=m,this.type=y,this.idx=v}function l(g,m){var y=g.a[0]-m.a[0]||g.a[1]-m.a[1]||g.type-m.type;return y||(g.type!==0&&(y=r(g.a,g.b,m.b))?y:g.idx-m.idx)}function c(g,m){return r(g.a,g.b,m)}function d(g,m,y,v,_){for(var h=i.lt(m,v,c),S=i.gt(m,v,c),A=h;A<S;++A){for(var E=m[A],P=E.lowerIds,I=P.length;I>1&&r(y[P[I-2]],y[P[I-1]],v)>0;)g.push([P[I-1],P[I-2],_]),I-=1;P.length=I,P.push(_);var D=E.upperIds;for(I=D.length;I>1&&r(y[D[I-2]],y[D[I-1]],v)<0;)g.push([D[I-2],D[I-1],_]),I-=1;D.length=I,D.push(_)}}function u(g,m){var y;return(y=g.a[0]<m.a[0]?r(g.a,g.b,m.a):r(m.b,m.a,g.a))?y:(y=m.b[0]<g.b[0]?r(g.a,g.b,m.b):r(m.b,m.a,g.b))||g.idx-m.idx}function x(g,m,y){var v=i.le(g,y,u),_=g[v],h=_.upperIds,S=h[h.length-1];_.upperIds=[S],g.splice(v+1,0,new n(y.a,y.b,y.idx,[S],h))}function p(g,m,y){var v=y.a;y.a=y.b,y.b=v;var _=i.eq(g,y,u),h=g[_];g[_-1].upperIds=h.upperIds,g.splice(_,1)}f.exports=function(g,m){for(var y=g.length,v=m.length,_=[],h=0;h<y;++h)_.push(new o(g[h],null,0,h));for(h=0;h<v;++h){var S=m[h],A=g[S[0]],E=g[S[1]];A[0]<E[0]?_.push(new o(A,E,2,h),new o(E,A,1,h)):A[0]>E[0]&&_.push(new o(E,A,2,h),new o(A,E,1,h))}_.sort(l);for(var P=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),I=[new n([P,1],[P,0],-1,[],[],[],[])],D=[],z=(h=0,_.length);h<z;++h){var V=_[h],O=V.type;O===0?d(D,I,g,V.a,V.idx):O===2?x(I,0,V):p(I,0,V)}return D}},5542:function(f,s,t){"use strict";var i=t(2478);function r(l,c){this.stars=l,this.edges=c}f.exports=function(l,c){for(var d=new Array(l),u=0;u<l;++u)d[u]=[];return new r(d,c)};var n=r.prototype;function o(l,c,d){for(var u=1,x=l.length;u<x;u+=2)if(l[u-1]===c&&l[u]===d)return l[u-1]=l[x-2],l[u]=l[x-1],void(l.length=x-2)}n.isConstraint=function(){var l=[0,0];function c(d,u){return d[0]-u[0]||d[1]-u[1]}return function(d,u){return l[0]=Math.min(d,u),l[1]=Math.max(d,u),i.eq(this.edges,l,c)>=0}}(),n.removeTriangle=function(l,c,d){var u=this.stars;o(u[l],c,d),o(u[c],d,l),o(u[d],l,c)},n.addTriangle=function(l,c,d){var u=this.stars;u[l].push(c,d),u[c].push(d,l),u[d].push(l,c)},n.opposite=function(l,c){for(var d=this.stars[c],u=1,x=d.length;u<x;u+=2)if(d[u]===l)return d[u-1];return-1},n.flip=function(l,c){var d=this.opposite(l,c),u=this.opposite(c,l);this.removeTriangle(l,c,d),this.removeTriangle(c,l,u),this.addTriangle(l,u,d),this.addTriangle(c,d,u)},n.edges=function(){for(var l=this.stars,c=[],d=0,u=l.length;d<u;++d)for(var x=l[d],p=0,g=x.length;p<g;p+=2)c.push([x[p],x[p+1]]);return c},n.cells=function(){for(var l=this.stars,c=[],d=0,u=l.length;d<u;++d)for(var x=l[d],p=0,g=x.length;p<g;p+=2){var m=x[p],y=x[p+1];d<Math.min(m,y)&&c.push([d,m,y])}return c}},2419:function(f){"use strict";f.exports=function(s){for(var t=1,i=1;i<s.length;++i)for(var r=0;r<i;++r)if(s[i]<s[r])t=-t;else if(s[r]===s[i])return 0;return t}},3628:function(f,s,t){"use strict";var i=t(1338),r=t(727);function n(c,d){for(var u=0,x=c.length,p=0;p<x;++p)u+=c[p]*d[p];return u}function o(c){var d=c.length;if(d===0)return[];c[0].length;var u=i([c.length+1,c.length+1],1),x=i([c.length+1],1);u[d][d]=0;for(var p=0;p<d;++p){for(var g=0;g<=p;++g)u[g][p]=u[p][g]=2*n(c[p],c[g]);x[p]=n(c[p],c[p])}var m=r(u,x),y=0,v=m[d+1];for(p=0;p<v.length;++p)y+=v[p];var _=new Array(d);for(p=0;p<d;++p){v=m[p];var h=0;for(g=0;g<v.length;++g)h+=v[g];_[p]=h/y}return _}function l(c){if(c.length===0)return[];for(var d=c[0].length,u=i([d]),x=o(c),p=0;p<c.length;++p)for(var g=0;g<d;++g)u[g]+=c[p][g]*x[p];return u}l.barycenetric=o,f.exports=l},6037:function(f,s,t){f.exports=function(r){for(var n=i(r),o=0,l=0;l<r.length;++l)for(var c=r[l],d=0;d<n.length;++d)o+=Math.pow(c[d]-n[d],2);return Math.sqrt(o/r.length)};var i=t(3628)},332:function(f,s,t){"use strict";f.exports=function(S,A,E){var P;if(E){P=A;for(var I=new Array(A.length),D=0;D<A.length;++D){var z=A[D];I[D]=[z[0],z[1],E[D]]}A=I}for(var V=function(O,j,Y){var B=m(O,[],g(O));return _(j,B,Y),!!B}(S,A,!!E);h(S,A,!!E);)V=!0;if(E&&V)for(P.length=0,E.length=0,D=0;D<A.length;++D)z=A[D],P.push([z[0],z[1]]),E.push(z[2]);return V};var i=t(1755),r=t(6867),n=t(1125),o=t(7842),l=t(1318),c=t(946),d=t(5838),u=t(1278),x=t(3637);function p(S){var A=c(S);return[u(A,-1/0),u(A,1/0)]}function g(S){for(var A=new Array(S.length),E=0;E<S.length;++E){var P=S[E];A[E]=[u(P[0],-1/0),u(P[1],-1/0),u(P[0],1/0),u(P[1],1/0)]}return A}function m(S,A,E){for(var P=A.length,I=new i(P),D=[],z=0;z<A.length;++z){var V=A[z],O=p(V[0]),j=p(V[1]);D.push([u(O[0],-1/0),u(j[0],-1/0),u(O[1],1/0),u(j[1],1/0)])}r(D,function(te,ee){I.link(te,ee)});var Y=!0,B=new Array(P);for(z=0;z<P;++z)(q=I.find(z))!==z&&(Y=!1,S[q]=[Math.min(S[z][0],S[q][0]),Math.min(S[z][1],S[q][1])]);if(Y)return null;var U=0;for(z=0;z<P;++z){var q;(q=I.find(z))===z?(B[z]=U,S[U++]=S[z]):B[z]=-1}for(S.length=U,z=0;z<P;++z)B[z]<0&&(B[z]=B[I.find(z)]);return B}function y(S,A){return S[0]-A[0]||S[1]-A[1]}function v(S,A){return S[0]-A[0]||S[1]-A[1]||(S[2]<A[2]?-1:S[2]>A[2]?1:0)}function _(S,A,E){if(S.length!==0){if(A)for(var P=0;P<S.length;++P){var I=A[(z=S[P])[0]],D=A[z[1]];z[0]=Math.min(I,D),z[1]=Math.max(I,D)}else for(P=0;P<S.length;++P){var z;I=(z=S[P])[0],D=z[1],z[0]=Math.min(I,D),z[1]=Math.max(I,D)}E?S.sort(v):S.sort(y);var V=1;for(P=1;P<S.length;++P){var O=S[P-1],j=S[P];(j[0]!==O[0]||j[1]!==O[1]||E&&j[2]!==O[2])&&(S[V++]=j)}S.length=V}}function h(S,A,E){var P=function(O,j){for(var Y=new Array(j.length),B=0;B<j.length;++B){var U=j[B],q=O[U[0]],te=O[U[1]];Y[B]=[u(Math.min(q[0],te[0]),-1/0),u(Math.min(q[1],te[1]),-1/0),u(Math.max(q[0],te[0]),1/0),u(Math.max(q[1],te[1]),1/0)]}return Y}(S,A),I=function(O,j,Y){var B=[];return r(Y,function(U,q){var te=j[U],ee=j[q];if(te[0]!==ee[0]&&te[0]!==ee[1]&&te[1]!==ee[0]&&te[1]!==ee[1]){var Q=O[te[0]],J=O[te[1]],K=O[ee[0]],X=O[ee[1]];n(Q,J,K,X)&&B.push([U,q])}}),B}(S,A,P),D=function(O,j,Y,B){var U=[];return r(Y,B,function(q,te){var ee=j[q];if(ee[0]!==te&&ee[1]!==te){var Q=O[te],J=O[ee[0]],K=O[ee[1]];n(J,K,Q,Q)&&U.push([q,te])}}),U}(S,A,P,g(S)),z=function(O,j,Y,B,U){var q,te,ee=O.map(function(oe){return[o(oe[0]),o(oe[1])]});for(q=0;q<Y.length;++q){var Q=Y[q];te=Q[0];var J=Q[1],K=j[te],X=j[J],ie=x(d(O[K[0]]),d(O[K[1]]),d(O[X[0]]),d(O[X[1]]));if(ie){var se=O.length;O.push([c(ie[0]),c(ie[1])]),ee.push(ie),B.push([te,se],[J,se])}}for(B.sort(function(oe,re){if(oe[0]!==re[0])return oe[0]-re[0];var fe=ee[oe[1]],Se=ee[re[1]];return l(fe[0],Se[0])||l(fe[1],Se[1])}),q=B.length-1;q>=0;--q){var ae=j[te=(Ce=B[q])[0]],ue=ae[0],ve=ae[1],ye=O[ue],pe=O[ve];if((ye[0]-pe[0]||ye[1]-pe[1])<0){var de=ue;ue=ve,ve=de}ae[0]=ue;var me,ke=ae[1]=Ce[1];for(U&&(me=ae[2]);q>0&&B[q-1][0]===te;){var Ce,ge=(Ce=B[--q])[1];U?j.push([ke,ge,me]):j.push([ke,ge]),ke=ge}U?j.push([ke,ve,me]):j.push([ke,ve])}return ee}(S,A,I,D,E),V=m(S,z);return _(A,V,E),!!V||I.length>0||D.length>0}},3637:function(f,s,t){"use strict";f.exports=function(x,p,g,m){var y=l(p,x),v=l(m,g),_=u(y,v);if(o(_)===0)return null;var h=u(v,l(x,g)),S=r(h,_),A=d(y,S);return c(x,A)};var i=t(6504),r=t(8697),n=t(5572),o=t(7721),l=t(544),c=t(2653),d=t(8987);function u(x,p){return n(i(x[0],p[1]),i(x[1],p[0]))}},3642:function(f){f.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(f,s,t){"use strict";var i=t(3642),r=t(395);function n(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function o(c){for(var d,u="#",x=0;x<3;++x)u+=("00"+(d=(d=c[x]).toString(16))).substr(d.length);return u}function l(c){return"rgba("+c.join(",")+")"}f.exports=function(c){var d,u,x,p,g,m,y,v,_,h;if(c||(c={}),v=(c.nshades||72)-1,y=c.format||"hex",(m=c.colormap)||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!i[m])throw Error(m+" not a supported colorscale");g=i[m]}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);g=m.slice()}if(g.length>v+1)throw new Error(m+" map requires nshades to be at least size "+g.length);_=Array.isArray(c.alpha)?c.alpha.length!==2?[1,1]:c.alpha.slice():typeof c.alpha=="number"?[c.alpha,c.alpha]:[1,1],d=g.map(function(I){return Math.round(I.index*v)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var S=g.map(function(I,D){var z=g[D].index,V=g[D].rgb.slice();return V.length===4&&V[3]>=0&&V[3]<=1||(V[3]=_[0]+(_[1]-_[0])*z),V}),A=[];for(h=0;h<d.length-1;++h){p=d[h+1]-d[h],u=S[h],x=S[h+1];for(var E=0;E<p;E++){var P=E/p;A.push([Math.round(r(u[0],x[0],P)),Math.round(r(u[1],x[1],P)),Math.round(r(u[2],x[2],P)),r(u[3],x[3],P)])}}return A.push(g[g.length-1].rgb.concat(_[1])),y==="hex"?A=A.map(o):y==="rgbaString"?A=A.map(l):y==="float"&&(A=A.map(n)),A}},3140:function(f,s,t){"use strict";f.exports=function(d,u,x,p){var g=i(u,x,p);if(g===0){var m=r(i(d,u,x)),y=r(i(d,u,p));if(m===y){if(m===0){var v=c(d,u,x);return v===c(d,u,p)?0:v?1:-1}return 0}return y===0?m>0||c(d,u,p)?-1:1:m===0?y>0||c(d,u,x)?1:-1:r(y-m)}var _=i(d,u,x);return _>0?g>0&&i(d,u,p)>0?1:-1:_<0?g>0||i(d,u,p)>0?1:-1:i(d,u,p)>0||c(d,u,x)?1:-1};var i=t(3250),r=t(8572),n=t(9362),o=t(5382),l=t(8210);function c(d,u,x){var p=n(d[0],-u[0]),g=n(d[1],-u[1]),m=n(x[0],-u[0]),y=n(x[1],-u[1]),v=l(o(p,m),o(g,y));return v[v.length-1]>=0}},8572:function(f){"use strict";f.exports=function(s){return s<0?-1:s>0?1:0}},8507:function(f){f.exports=function(i,r){var n=i.length,o=i.length-r.length;if(o)return o;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||s(i[0],i[1])-s(r[0],r[1]);case 3:var l=i[0]+i[1],c=r[0]+r[1];if(o=l+i[2]-(c+r[2]))return o;var d=s(i[0],i[1]),u=s(r[0],r[1]);return s(d,i[2])-s(u,r[2])||s(d+i[2],l)-s(u+r[2],c);case 4:var x=i[0],p=i[1],g=i[2],m=i[3],y=r[0],v=r[1],_=r[2],h=r[3];return x+p+g+m-(y+v+_+h)||s(x,p,g,m)-s(y,v,_,h,y)||s(x+p,x+g,x+m,p+g,p+m,g+m)-s(y+v,y+_,y+h,v+_,v+h,_+h)||s(x+p+g,x+p+m,x+g+m,p+g+m)-s(y+v+_,y+v+h,y+_+h,v+_+h);default:for(var S=i.slice().sort(t),A=r.slice().sort(t),E=0;E<n;++E)if(o=S[E]-A[E])return o;return 0}};var s=Math.min;function t(i,r){return i-r}},3788:function(f,s,t){"use strict";var i=t(8507),r=t(2419);f.exports=function(n,o){return i(n,o)||r(n)-r(o)}},7352:function(f,s,t){"use strict";var i=t(5721),r=t(4750),n=t(2690);f.exports=function(o){var l=o.length;if(l===0)return[];if(l===1)return[[0]];var c=o[0].length;return c===0?[]:c===1?i(o):c===2?r(o):n(o,c)}},5721:function(f){"use strict";f.exports=function(s){for(var t=0,i=0,r=1;r<s.length;++r)s[r][0]<s[t][0]&&(t=r),s[r][0]>s[i][0]&&(i=r);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},4750:function(f,s,t){"use strict";f.exports=function(r){var n=i(r),o=n.length;if(o<=2)return[];for(var l=new Array(o),c=n[o-1],d=0;d<o;++d){var u=n[d];l[d]=[c,u],c=u}return l};var i=t(3090)},2690:function(f,s,t){"use strict";f.exports=function(n,o){try{return i(n,!0)}catch{var l=r(n);if(l.length<=o)return[];var c=function(u,x){for(var p=u.length,g=new Array(p),m=0;m<x.length;++m)g[m]=u[x[m]];var y=x.length;for(m=0;m<p;++m)x.indexOf(m)<0&&(g[y++]=u[m]);return g}(n,l);return function(u,x){for(var p=u.length,g=x.length,m=0;m<p;++m)for(var y=u[m],v=0;v<y.length;++v){var _=y[v];if(_<g)y[v]=x[_];else{_-=g;for(var h=0;h<g;++h)_>=x[h]&&(_+=1);y[v]=_}}return u}(i(c,!0),l)}};var i=t(8954),r=t(3952)},4769:function(f){"use strict";f.exports=function(s,t,i,r,n,o){var l=n-1,c=n*n,d=l*l,u=(1+2*n)*d,x=n*d,p=c*(3-2*n),g=c*l;if(s.length){o||(o=new Array(s.length));for(var m=s.length-1;m>=0;--m)o[m]=u*s[m]+x*t[m]+p*i[m]+g*r[m];return o}return u*s+x*t+p*i+g*r},f.exports.derivative=function(s,t,i,r,n,o){var l=6*n*n-6*n,c=3*n*n-4*n+1,d=-6*n*n+6*n,u=3*n*n-2*n;if(s.length){o||(o=new Array(s.length));for(var x=s.length-1;x>=0;--x)o[x]=l*s[x]+c*t[x]+d*i[x]+u*r[x];return o}return l*s+c*t+d*i[x]+u*r}},7642:function(f,s,t){"use strict";var i=t(8954),r=t(1682);function n(l,c){this.point=l,this.index=c}function o(l,c){for(var d=l.point,u=c.point,x=d.length,p=0;p<x;++p){var g=u[p]-d[p];if(g)return g}return 0}f.exports=function(l,c){var d=l.length;if(d===0)return[];var u=l[0].length;if(u<1)return[];if(u===1)return function(z,V,O){if(z===1)return O?[[-1,0]]:[];var j=V.map(function(te,ee){return[te[0],ee]});j.sort(function(te,ee){return te[0]-ee[0]});for(var Y=new Array(z-1),B=1;B<z;++B){var U=j[B-1],q=j[B];Y[B-1]=[U[1],q[1]]}return O&&Y.push([-1,Y[0][1]],[Y[z-1][1],-1]),Y}(d,l,c);for(var x=new Array(d),p=1,g=0;g<d;++g){for(var m=l[g],y=new Array(u+1),v=0,_=0;_<u;++_){var h=m[_];y[_]=h,v+=h*h}y[u]=v,x[g]=new n(y,g),p=Math.max(v,p)}r(x,o),d=x.length;var S=new Array(d+u+1),A=new Array(d+u+1),E=(u+1)*(u+1)*p,P=new Array(u+1);for(g=0;g<=u;++g)P[g]=0;for(P[u]=E,S[0]=P.slice(),A[0]=-1,g=0;g<=u;++g)(y=P.slice())[g]=1,S[g+1]=y,A[g+1]=-1;for(g=0;g<d;++g){var I=x[g];S[g+u+1]=I.point,A[g+u+1]=I.index}var D=i(S,!1);if(D=c?D.filter(function(z){for(var V=0,O=0;O<=u;++O){var j=A[z[O]];if(j<0&&++V>=2)return!1;z[O]=j}return!0}):D.filter(function(z){for(var V=0;V<=u;++V){var O=A[z[V]];if(O<0)return!1;z[V]=O}return!0}),1&u)for(g=0;g<D.length;++g)y=(I=D[g])[0],I[0]=I[1],I[1]=y;return D}},2361:function(f){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,s=!0,i[1]===1072693248?(f.exports=function(n){return t[0]=n,[i[0],i[1]]},f.exports.pack=function(n,o){return i[0]=n,i[1]=o,t[0]},f.exports.lo=function(n){return t[0]=n,i[0]},f.exports.hi=function(n){return t[0]=n,i[1]}):i[0]===1072693248?(f.exports=function(n){return t[0]=n,[i[1],i[0]]},f.exports.pack=function(n,o){return i[1]=n,i[0]=o,t[0]},f.exports.lo=function(n){return t[0]=n,i[1]},f.exports.hi=function(n){return t[0]=n,i[0]}):s=!1}if(!s){var r=new Buffer(8);f.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},f.exports.pack=function(n,o){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(o,4,!0),r.readDoubleLE(0,!0)},f.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},f.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}f.exports.sign=function(n){return f.exports.hi(n)>>>31},f.exports.exponent=function(n){return(f.exports.hi(n)<<1>>>21)-1023},f.exports.fraction=function(n){var o=f.exports.lo(n),l=f.exports.hi(n),c=1048575&l;return 2146435072&l&&(c+=1048576),[o,c]},f.exports.denormalized=function(n){return!(2146435072&f.exports.hi(n))}},1338:function(f){"use strict";function s(t,i,r){var n=0|t[r];if(n<=0)return[];var o,l=new Array(n);if(r===t.length-1)for(o=0;o<n;++o)l[o]=i;else for(o=0;o<n;++o)l[o]=s(t,i,r+1);return l}f.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(r,n){var o,l;for(o=new Array(r),l=0;l<r;++l)o[l]=n;return o}(0|t,i);break;case"object":if(typeof t.length=="number")return s(t,i,0)}return[]}},3134:function(f,s,t){"use strict";f.exports=function(r,n){var o=r.length;if(typeof n!="number"){n=0;for(var l=0;l<o;++l){var c=r[l];n=Math.max(n,c[0],c[1])}n=1+(0|n)}n|=0;var d=new Array(n);for(l=0;l<n;++l)d[l]=[];for(l=0;l<o;++l)d[(c=r[l])[0]].push(c[1]),d[c[1]].push(c[0]);for(var u=0;u<n;++u)i(d[u],function(x,p){return x-p});return d};var i=t(1682)},5033:function(f){"use strict";f.exports=function(s,t,i){var r=t||0,n=i||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},9215:function(f,s,t){"use strict";f.exports=function(d,u,x){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return typeof d=="number"?new o(p=c(d),p,0):new o(d,c(d.length),0);case 2:var p;if(typeof u=="number")return new o(d,p=c(d.length),+u);x=0;case 3:if(d.length!==u.length)throw new Error("state and velocity lengths must match");return new o(d,u,x)}};var i=t(4769),r=t(2478);function n(d,u,x){return Math.min(u,Math.max(d,x))}function o(d,u,x){this.dimension=d.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=d.slice().reverse(),this._velocity=u.slice().reverse(),this._time=[x],this._scratch=[d.slice(),d.slice(),d.slice(),d.slice(),d.slice()]}var l=o.prototype;function c(d){for(var u=new Array(d),x=0;x<d;++x)u[x]=0;return u}l.flush=function(d){var u=r.gt(this._time,d)-1;u<=0||(this._time.splice(0,u),this._state.splice(0,u*this.dimension),this._velocity.splice(0,u*this.dimension))},l.curve=function(d){var u=this._time,x=u.length,p=r.le(u,d),g=this._scratch[0],m=this._state,y=this._velocity,v=this.dimension,_=this.bounds;if(p<0)for(var h=v-1,S=0;S<v;++S,--h)g[S]=m[h];else if(p>=x-1){h=m.length-1;var A=d-u[x-1];for(S=0;S<v;++S,--h)g[S]=m[h]+A*y[h]}else{h=v*(p+1)-1;var E=u[p],P=u[p+1]-E||1,I=this._scratch[1],D=this._scratch[2],z=this._scratch[3],V=this._scratch[4],O=!0;for(S=0;S<v;++S,--h)I[S]=m[h],z[S]=y[h]*P,D[S]=m[h+v],V[S]=y[h+v]*P,O=O&&I[S]===D[S]&&z[S]===V[S]&&z[S]===0;if(O)for(S=0;S<v;++S)g[S]=I[S];else i(I,z,D,V,(d-E)/P,g)}var j=_[0],Y=_[1];for(S=0;S<v;++S)g[S]=n(j[S],Y[S],g[S]);return g},l.dcurve=function(d){var u=this._time,x=u.length,p=r.le(u,d),g=this._scratch[0],m=this._state,y=this._velocity,v=this.dimension;if(p>=x-1)for(var _=m.length-1,h=(u[x-1],0);h<v;++h,--_)g[h]=y[_];else{_=v*(p+1)-1;var S=u[p],A=u[p+1]-S||1,E=this._scratch[1],P=this._scratch[2],I=this._scratch[3],D=this._scratch[4],z=!0;for(h=0;h<v;++h,--_)E[h]=m[_],I[h]=y[_]*A,P[h]=m[_+v],D[h]=y[_+v]*A,z=z&&E[h]===P[h]&&I[h]===D[h]&&I[h]===0;if(z)for(h=0;h<v;++h)g[h]=0;else for(i.derivative(E,I,P,D,(d-S)/A,g),h=0;h<v;++h)g[h]/=A}return g},l.lastT=function(){var d=this._time;return d[d.length-1]},l.stable=function(){for(var d=this._velocity,u=d.length,x=this.dimension-1;x>=0;--x)if(d[--u])return!1;return!0},l.jump=function(d){var u=this.lastT(),x=this.dimension;if(!(d<u||arguments.length!==x+1)){var p=this._state,g=this._velocity,m=p.length-this.dimension,y=this.bounds,v=y[0],_=y[1];this._time.push(u,d);for(var h=0;h<2;++h)for(var S=0;S<x;++S)p.push(p[m++]),g.push(0);for(this._time.push(d),S=x;S>0;--S)p.push(n(v[S-1],_[S-1],arguments[S])),g.push(0)}},l.push=function(d){var u=this.lastT(),x=this.dimension;if(!(d<u||arguments.length!==x+1)){var p=this._state,g=this._velocity,m=p.length-this.dimension,y=d-u,v=this.bounds,_=v[0],h=v[1],S=y>1e-6?1/y:0;this._time.push(d);for(var A=x;A>0;--A){var E=n(_[A-1],h[A-1],arguments[A]);p.push(E),g.push((E-p[m++])*S)}}},l.set=function(d){var u=this.dimension;if(!(d<this.lastT()||arguments.length!==u+1)){var x=this._state,p=this._velocity,g=this.bounds,m=g[0],y=g[1];this._time.push(d);for(var v=u;v>0;--v)x.push(n(m[v-1],y[v-1],arguments[v])),p.push(0)}},l.move=function(d){var u=this.lastT(),x=this.dimension;if(!(d<=u||arguments.length!==x+1)){var p=this._state,g=this._velocity,m=p.length-this.dimension,y=this.bounds,v=y[0],_=y[1],h=d-u,S=h>1e-6?1/h:0;this._time.push(d);for(var A=x;A>0;--A){var E=arguments[A];p.push(n(v[A-1],_[A-1],p[m++]+E)),g.push(E*S)}}},l.idle=function(d){var u=this.lastT();if(!(d<u)){var x=this.dimension,p=this._state,g=this._velocity,m=p.length-x,y=this.bounds,v=y[0],_=y[1],h=d-u;this._time.push(d);for(var S=x-1;S>=0;--S)p.push(n(v[S],_[S],p[m]+h*g[m])),g.push(0),m+=1}}},3840:function(f){"use strict";function s(m,y,v,_,h,S){this._color=m,this.key=y,this.value=v,this.left=_,this.right=h,this._count=S}function t(m){return new s(m._color,m.key,m.value,m.left,m.right,m._count)}function i(m,y){return new s(m,y.key,y.value,y.left,y.right,y._count)}function r(m){m._count=1+(m.left?m.left._count:0)+(m.right?m.right._count:0)}function n(m,y){this._compare=m,this.root=y}f.exports=function(m){return new n(m||g,null)};var o=n.prototype;function l(m,y){var v;return y.left&&(v=l(m,y.left))?v:(v=m(y.key,y.value))||(y.right?l(m,y.right):void 0)}function c(m,y,v,_){if(y(m,_.key)<=0){var h;if(_.left&&(h=c(m,y,v,_.left))||(h=v(_.key,_.value)))return h}if(_.right)return c(m,y,v,_.right)}function d(m,y,v,_,h){var S,A=v(m,h.key),E=v(y,h.key);if(A<=0&&(h.left&&(S=d(m,y,v,_,h.left))||E>0&&(S=_(h.key,h.value))))return S;if(E>0&&h.right)return d(m,y,v,_,h.right)}function u(m,y){this.tree=m,this._stack=y}Object.defineProperty(o,"keys",{get:function(){var m=[];return this.forEach(function(y,v){m.push(y)}),m}}),Object.defineProperty(o,"values",{get:function(){var m=[];return this.forEach(function(y,v){m.push(v)}),m}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(m,y){for(var v=this._compare,_=this.root,h=[],S=[];_;){var A=v(m,_.key);h.push(_),S.push(A),_=A<=0?_.left:_.right}h.push(new s(0,m,y,null,null,1));for(var E=h.length-2;E>=0;--E)_=h[E],S[E]<=0?h[E]=new s(_._color,_.key,_.value,h[E+1],_.right,_._count+1):h[E]=new s(_._color,_.key,_.value,_.left,h[E+1],_._count+1);for(E=h.length-1;E>1;--E){var P=h[E-1];if(_=h[E],P._color===1||_._color===1)break;var I=h[E-2];if(I.left===P)if(P.left===_){if(!(D=I.right)||D._color!==0){I._color=0,I.left=P.right,P._color=1,P.right=I,h[E-2]=P,h[E-1]=_,r(I),r(P),E>=3&&((z=h[E-3]).left===I?z.left=P:z.right=P);break}P._color=1,I.right=i(1,D),I._color=0,E-=1}else{if(!(D=I.right)||D._color!==0){P.right=_.left,I._color=0,I.left=_.right,_._color=1,_.left=P,_.right=I,h[E-2]=_,h[E-1]=P,r(I),r(P),r(_),E>=3&&((z=h[E-3]).left===I?z.left=_:z.right=_);break}P._color=1,I.right=i(1,D),I._color=0,E-=1}else if(P.right===_){if(!(D=I.left)||D._color!==0){I._color=0,I.right=P.left,P._color=1,P.left=I,h[E-2]=P,h[E-1]=_,r(I),r(P),E>=3&&((z=h[E-3]).right===I?z.right=P:z.left=P);break}P._color=1,I.left=i(1,D),I._color=0,E-=1}else{var D;if(!(D=I.left)||D._color!==0){var z;P.left=_.right,I._color=0,I.right=_.left,_._color=1,_.right=P,_.left=I,h[E-2]=_,h[E-1]=P,r(I),r(P),r(_),E>=3&&((z=h[E-3]).right===I?z.right=_:z.left=_);break}P._color=1,I.left=i(1,D),I._color=0,E-=1}}return h[0]._color=1,new n(v,h[0])},o.forEach=function(m,y,v){if(this.root)switch(arguments.length){case 1:return l(m,this.root);case 2:return c(y,this._compare,m,this.root);case 3:return this._compare(y,v)>=0?void 0:d(y,v,this._compare,m,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var m=[],y=this.root;y;)m.push(y),y=y.left;return new u(this,m)}}),Object.defineProperty(o,"end",{get:function(){for(var m=[],y=this.root;y;)m.push(y),y=y.right;return new u(this,m)}}),o.at=function(m){if(m<0)return new u(this,[]);for(var y=this.root,v=[];;){if(v.push(y),y.left){if(m<y.left._count){y=y.left;continue}m-=y.left._count}if(!m)return new u(this,v);if(m-=1,!y.right||m>=y.right._count)break;y=y.right}return new u(this,[])},o.ge=function(m){for(var y=this._compare,v=this.root,_=[],h=0;v;){var S=y(m,v.key);_.push(v),S<=0&&(h=_.length),v=S<=0?v.left:v.right}return _.length=h,new u(this,_)},o.gt=function(m){for(var y=this._compare,v=this.root,_=[],h=0;v;){var S=y(m,v.key);_.push(v),S<0&&(h=_.length),v=S<0?v.left:v.right}return _.length=h,new u(this,_)},o.lt=function(m){for(var y=this._compare,v=this.root,_=[],h=0;v;){var S=y(m,v.key);_.push(v),S>0&&(h=_.length),v=S<=0?v.left:v.right}return _.length=h,new u(this,_)},o.le=function(m){for(var y=this._compare,v=this.root,_=[],h=0;v;){var S=y(m,v.key);_.push(v),S>=0&&(h=_.length),v=S<0?v.left:v.right}return _.length=h,new u(this,_)},o.find=function(m){for(var y=this._compare,v=this.root,_=[];v;){var h=y(m,v.key);if(_.push(v),h===0)return new u(this,_);v=h<=0?v.left:v.right}return new u(this,[])},o.remove=function(m){var y=this.find(m);return y?y.remove():this},o.get=function(m){for(var y=this._compare,v=this.root;v;){var _=y(m,v.key);if(_===0)return v.value;v=_<=0?v.left:v.right}};var x=u.prototype;function p(m,y){m.key=y.key,m.value=y.value,m.left=y.left,m.right=y.right,m._color=y._color,m._count=y._count}function g(m,y){return m<y?-1:m>y?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new u(this.tree,this._stack.slice())},x.remove=function(){var m=this._stack;if(m.length===0)return this.tree;var y=new Array(m.length),v=m[m.length-1];y[y.length-1]=new s(v._color,v.key,v.value,v.left,v.right,v._count);for(var _=m.length-2;_>=0;--_)(v=m[_]).left===m[_+1]?y[_]=new s(v._color,v.key,v.value,y[_+1],v.right,v._count):y[_]=new s(v._color,v.key,v.value,v.left,y[_+1],v._count);if((v=y[y.length-1]).left&&v.right){var h=y.length;for(v=v.left;v.right;)y.push(v),v=v.right;var S=y[h-1];for(y.push(new s(v._color,S.key,S.value,v.left,v.right,v._count)),y[h-1].key=v.key,y[h-1].value=v.value,_=y.length-2;_>=h;--_)v=y[_],y[_]=new s(v._color,v.key,v.value,v.left,y[_+1],v._count);y[h-1].left=y[h]}if((v=y[y.length-1])._color===0){var A=y[y.length-2];for(A.left===v?A.left=null:A.right===v&&(A.right=null),y.pop(),_=0;_<y.length;++_)y[_]._count--;return new n(this.tree._compare,y[0])}if(v.left||v.right){for(v.left?p(v,v.left):v.right&&p(v,v.right),v._color=1,_=0;_<y.length-1;++_)y[_]._count--;return new n(this.tree._compare,y[0])}if(y.length===1)return new n(this.tree._compare,null);for(_=0;_<y.length;++_)y[_]._count--;var E=y[y.length-2];return function(P){for(var I,D,z,V,O=P.length-1;O>=0;--O){if(I=P[O],O===0)return void(I._color=1);if((D=P[O-1]).left===I){if((z=D.right).right&&z.right._color===0)return V=(z=D.right=t(z)).right=t(z.right),D.right=z.left,z.left=D,z.right=V,z._color=D._color,I._color=1,D._color=1,V._color=1,r(D),r(z),O>1&&((j=P[O-2]).left===D?j.left=z:j.right=z),void(P[O-1]=z);if(z.left&&z.left._color===0)return V=(z=D.right=t(z)).left=t(z.left),D.right=V.left,z.left=V.right,V.left=D,V.right=z,V._color=D._color,D._color=1,z._color=1,I._color=1,r(D),r(z),r(V),O>1&&((j=P[O-2]).left===D?j.left=V:j.right=V),void(P[O-1]=V);if(z._color===1){if(D._color===0)return D._color=1,void(D.right=i(0,z));D.right=i(0,z);continue}z=t(z),D.right=z.left,z.left=D,z._color=D._color,D._color=0,r(D),r(z),O>1&&((j=P[O-2]).left===D?j.left=z:j.right=z),P[O-1]=z,P[O]=D,O+1<P.length?P[O+1]=I:P.push(I),O+=2}else{if((z=D.left).left&&z.left._color===0)return V=(z=D.left=t(z)).left=t(z.left),D.left=z.right,z.right=D,z.left=V,z._color=D._color,I._color=1,D._color=1,V._color=1,r(D),r(z),O>1&&((j=P[O-2]).right===D?j.right=z:j.left=z),void(P[O-1]=z);if(z.right&&z.right._color===0)return V=(z=D.left=t(z)).right=t(z.right),D.left=V.right,z.right=V.left,V.right=D,V.left=z,V._color=D._color,D._color=1,z._color=1,I._color=1,r(D),r(z),r(V),O>1&&((j=P[O-2]).right===D?j.right=V:j.left=V),void(P[O-1]=V);if(z._color===1){if(D._color===0)return D._color=1,void(D.left=i(0,z));D.left=i(0,z);continue}var j;z=t(z),D.left=z.right,z.right=D,z._color=D._color,D._color=0,r(D),r(z),O>1&&((j=P[O-2]).right===D?j.right=z:j.left=z),P[O-1]=z,P[O]=D,O+1<P.length?P[O+1]=I:P.push(I),O+=2}}}(y),E.left===v?E.left=null:E.right=null,new n(this.tree._compare,y[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var m=0,y=this._stack;if(y.length===0){var v=this.tree.root;return v?v._count:0}y[y.length-1].left&&(m=y[y.length-1].left._count);for(var _=y.length-2;_>=0;--_)y[_+1]===y[_].right&&(++m,y[_].left&&(m+=y[_].left._count));return m},enumerable:!0}),x.next=function(){var m=this._stack;if(m.length!==0){var y=m[m.length-1];if(y.right)for(y=y.right;y;)m.push(y),y=y.left;else for(m.pop();m.length>0&&m[m.length-1].right===y;)y=m[m.length-1],m.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].right)return!0;for(var y=m.length-1;y>0;--y)if(m[y-1].left===m[y])return!0;return!1}}),x.update=function(m){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var v=new Array(y.length),_=y[y.length-1];v[v.length-1]=new s(_._color,_.key,m,_.left,_.right,_._count);for(var h=y.length-2;h>=0;--h)(_=y[h]).left===y[h+1]?v[h]=new s(_._color,_.key,_.value,v[h+1],_.right,_._count):v[h]=new s(_._color,_.key,_.value,_.left,v[h+1],_._count);return new n(this.tree._compare,v[0])},x.prev=function(){var m=this._stack;if(m.length!==0){var y=m[m.length-1];if(y.left)for(y=y.left;y;)m.push(y),y=y.right;else for(m.pop();m.length>0&&m[m.length-1].left===y;)y=m[m.length-1],m.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].left)return!0;for(var y=m.length-1;y>0;--y)if(m[y-1].right===m[y])return!0;return!1}})},3837:function(f,s,t){"use strict";f.exports=function(I,D){var z=new g(I);return z.update(D),z};var i=t(4935),r=t(501),n=t(5304),o=t(6429),l=t(6444),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d=ArrayBuffer,u=DataView;function x(I){return Array.isArray(I)||function(D){return d.isView(D)&&!(D instanceof u)}(I)}function p(I,D){return I[0]=D[0],I[1]=D[1],I[2]=D[2],I}function g(I){this.gl=I,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(I)}var m=g.prototype;function y(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}m.update=function(I){function D(X,ie,se){if(se in I){var ae,ue=I[se],ve=this[se];(X?x(ue)&&x(ue[0]):x(ue))?this[se]=ae=[ie(ue[0]),ie(ue[1]),ie(ue[2])]:this[se]=ae=[ie(ue),ie(ue),ie(ue)];for(var ye=0;ye<3;++ye)if(ae[ye]!==ve[ye])return!0}return!1}I=I||{};var z,V=D.bind(this,!1,Number),O=D.bind(this,!1,Boolean),j=D.bind(this,!1,String),Y=D.bind(this,!0,function(X){if(x(X)){if(X.length===3)return[+X[0],+X[1],+X[2],1];if(X.length===4)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),B=!1,U=!1;if("bounds"in I)for(var q=I.bounds,te=0;te<2;++te)for(var ee=0;ee<3;++ee)q[te][ee]!==this.bounds[te][ee]&&(U=!0),this.bounds[te][ee]=q[te][ee];if("ticks"in I)for(z=I.ticks,B=!0,this.autoTicks=!1,te=0;te<3;++te)this.tickSpacing[te]=0;else V("tickSpacing")&&(this.autoTicks=!0,U=!0);if(this._firstInit&&("ticks"in I||"tickSpacing"in I||(this.autoTicks=!0),U=!0,B=!0,this._firstInit=!1),U&&this.autoTicks&&(z=l.create(this.bounds,this.tickSpacing),B=!0),B){for(te=0;te<3;++te)z[te].sort(function(X,ie){return X.x-ie.x});l.equal(z,this.ticks)?B=!1:this.ticks=z}O("tickEnable"),j("tickFont")&&(B=!0),j("tickFontStyle")&&(B=!0),j("tickFontWeight")&&(B=!0),j("tickFontVariant")&&(B=!0),V("tickSize"),V("tickAngle"),V("tickPad"),Y("tickColor");var Q=j("labels");j("labelFont")&&(Q=!0),j("labelFontStyle")&&(Q=!0),j("labelFontWeight")&&(Q=!0),j("labelFontVariant")&&(Q=!0),O("labelEnable"),V("labelSize"),V("labelPad"),Y("labelColor"),O("lineEnable"),O("lineMirror"),V("lineWidth"),Y("lineColor"),O("lineTickEnable"),O("lineTickMirror"),V("lineTickLength"),V("lineTickWidth"),Y("lineTickColor"),O("gridEnable"),V("gridWidth"),Y("gridColor"),O("zeroEnable"),Y("zeroLineColor"),V("zeroLineWidth"),O("backgroundEnable"),Y("backgroundColor");var J=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],K=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(Q||B)&&this._text.update(this.bounds,this.labels,J,this.ticks,K):this._text=i(this.gl,this.bounds,this.labels,J,this.ticks,K),this._lines&&B&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var v=[new y,new y,new y];function _(I,D,z,V,O){for(var j=I.primalOffset,Y=I.primalMinor,B=I.mirrorOffset,U=I.mirrorMinor,q=V[D],te=0;te<3;++te)if(D!==te){var ee=j,Q=B,J=Y,K=U;q&1<<te&&(ee=B,Q=j,J=U,K=Y),ee[te]=z[0][te],Q[te]=z[1][te],O[te]>0?(J[te]=-1,K[te]=0):(J[te]=0,K[te]=1)}}var h=[0,0,0],S={model:c,view:c,projection:c,_ortho:!1};m.isOpaque=function(){return!0},m.isTransparent=function(){return!1},m.drawTransparent=function(I){};var A=[0,0,0],E=[0,0,0],P=[0,0,0];m.draw=function(I){I=I||S;for(var D=this.gl,z=I.model||c,V=I.view||c,O=I.projection||c,j=this.bounds,Y=I._ortho||!1,B=o(z,V,O,j,Y),U=B.cubeEdges,q=B.axis,te=V[12],ee=V[13],Q=V[14],J=V[15],K=(Y?2:1)*this.pixelRatio*(O[3]*te+O[7]*ee+O[11]*Q+O[15]*J)/D.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=U[X],this.lastCubeProps.axis[X]=q[X];var ie=v;for(X=0;X<3;++X)_(v[X],X,this.bounds,U,q);D=this.gl;var se,ae,ue,ve=h;for(X=0;X<3;++X)this.backgroundEnable[X]?ve[X]=q[X]:ve[X]=0;for(this._background.draw(z,V,O,j,ve,this.backgroundColor),this._lines.bind(z,V,O,this),X=0;X<3;++X){var ye=[0,0,0];q[X]>0?ye[X]=j[1][X]:ye[X]=j[0][X];for(var pe=0;pe<2;++pe){var de=(X+1+pe)%3,me=(X+1+(1^pe))%3;this.gridEnable[de]&&this._lines.drawGrid(de,me,this.bounds,ye,this.gridColor[de],this.gridWidth[de]*this.pixelRatio)}for(pe=0;pe<2;++pe)de=(X+1+pe)%3,me=(X+1+(1^pe))%3,this.zeroEnable[me]&&Math.min(j[0][me],j[1][me])<=0&&Math.max(j[0][me],j[1][me])>=0&&this._lines.drawZero(de,me,this.bounds,ye,this.zeroLineColor[me],this.zeroLineWidth[me]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,ie[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,ie[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var ke=p(A,ie[X].primalMinor),Ce=p(E,ie[X].mirrorMinor),ge=this.lineTickLength;for(pe=0;pe<3;++pe){var oe=K/z[5*pe];ke[pe]*=ge[pe]*oe,Ce[pe]*=ge[pe]*oe}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,ie[X].primalOffset,ke,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,ie[X].mirrorOffset,Ce,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function re(Pe){(ue=[0,0,0])[Pe]=1}function fe(Pe,De,he){var _e=(Pe+1)%3,Ae=(Pe+2)%3,Oe=De[_e],Ee=De[Ae],Be=he[_e],Ve=he[Ae];Oe>0&&Ve>0||Oe>0&&Ve<0||Oe<0&&Ve>0||Oe<0&&Ve<0?re(_e):(Ee>0&&Be>0||Ee>0&&Be<0||Ee<0&&Be>0||Ee<0&&Be<0)&&re(Ae)}for(this._lines.unbind(),this._text.bind(z,V,O,this.pixelRatio),X=0;X<3;++X){var Se=ie[X].primalMinor,be=ie[X].mirrorMinor,we=p(P,ie[X].primalOffset);for(pe=0;pe<3;++pe)this.lineTickEnable[X]&&(we[pe]+=K*Se[pe]*Math.max(this.lineTickLength[pe],0)/z[5*pe]);var Me=[0,0,0];if(Me[X]=1,this.tickEnable[X]){for(this.tickAngle[X]===-3600?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,ae=1,(se=[this.tickAlign[X],.5,ae])[0]==="auto"?se[0]=0:se[0]=parseInt(""+se[0]),ue=[0,0,0],fe(X,Se,be),pe=0;pe<3;++pe)we[pe]+=K*Se[pe]*this.tickPad[pe]/z[5*pe];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],we,this.tickColor[X],Me,ue,se)}if(this.labelEnable[X]){for(ae=0,ue=[0,0,0],this.labels[X].length>4&&(re(X),ae=1),(se=[this.labelAlign[X],.5,ae])[0]==="auto"?se[0]=0:se[0]=parseInt(""+se[0]),pe=0;pe<3;++pe)we[pe]+=K*Se[pe]*this.labelPad[pe]/z[5*pe];we[X]+=.5*(j[0][X]+j[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],we,this.labelColor[X],[0,0,0],ue,se)}}this._text.unbind()},m.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(f,s,t){"use strict";f.exports=function(c){for(var d=[],u=[],x=0,p=0;p<3;++p)for(var g=(p+1)%3,m=(p+2)%3,y=[0,0,0],v=[0,0,0],_=-1;_<=1;_+=2){u.push(x,x+2,x+1,x+1,x+2,x+3),y[p]=_,v[p]=_;for(var h=-1;h<=1;h+=2){y[g]=h;for(var S=-1;S<=1;S+=2)y[m]=S,d.push(y[0],y[1],y[2],v[0],v[1],v[2]),x+=1}var A=g;g=m,m=A}var E=i(c,new Float32Array(d)),P=i(c,new Uint16Array(u),c.ELEMENT_ARRAY_BUFFER),I=r(c,[{buffer:E,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:c.FLOAT,size:3,offset:12,stride:24}],P),D=n(c);return D.attributes.position.location=0,D.attributes.normal.location=1,new o(c,E,I,D)};var i=t(2762),r=t(8116),n=t(1879).bg;function o(c,d,u,x){this.gl=c,this.buffer=d,this.vao=u,this.shader=x}var l=o.prototype;l.draw=function(c,d,u,x,p,g){for(var m=!1,y=0;y<3;++y)m=m||p[y];if(m){var v=this.gl;v.enable(v.POLYGON_OFFSET_FILL),v.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:d,projection:u,bounds:x,enable:p,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),v.disable(v.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(f,s,t){"use strict";f.exports=function(h,S,A,E,P){r(l,S,h),r(l,A,l);for(var I=0,D=0;D<2;++D){u[2]=E[D][2];for(var z=0;z<2;++z){u[1]=E[z][1];for(var V=0;V<2;++V)u[0]=E[V][0],p(c[I],u,l),I+=1}}var O=-1;for(D=0;D<8;++D){for(var j=c[D][3],Y=0;Y<3;++Y)d[D][Y]=c[D][Y]/j;P&&(d[D][2]*=-1),j<0&&(O<0||d[D][2]<d[O][2])&&(O=D)}if(O<0){O=0;for(var B=0;B<3;++B){for(var U=(B+2)%3,q=(B+1)%3,te=-1,ee=-1,Q=0;Q<2;++Q){var J=(X=Q<<B)+(Q<<U)+(1-Q<<q),K=X+(1-Q<<U)+(Q<<q);o(d[X],d[J],d[K],x)<0||(Q?te=1:ee=1)}if(te<0||ee<0)ee>te&&(O|=1<<B);else{for(Q=0;Q<2;++Q){J=(X=Q<<B)+(Q<<U)+(1-Q<<q),K=X+(1-Q<<U)+(Q<<q);var X,ie=m([c[X],c[J],c[K],c[X+(1<<U)+(1<<q)]]);Q?te=ie:ee=ie}ee>te&&(O|=1<<B)}}}var se=7^O,ae=-1;for(D=0;D<8;++D)D!==O&&D!==se&&(ae<0||d[ae][1]>d[D][1])&&(ae=D);var ue=-1;for(D=0;D<3;++D)(ye=ae^1<<D)!==O&&ye!==se&&(ue<0&&(ue=ye),(q=d[ye])[0]<d[ue][0]&&(ue=ye));var ve=-1;for(D=0;D<3;++D){var ye;(ye=ae^1<<D)!==O&&ye!==se&&ye!==ue&&(ve<0&&(ve=ye),(q=d[ye])[0]>d[ve][0]&&(ve=ye))}var pe=y;pe[0]=pe[1]=pe[2]=0,pe[i.log2(ue^ae)]=ae&ue,pe[i.log2(ae^ve)]=ae&ve;var de=7^ve;de===O||de===se?(de=7^ue,pe[i.log2(ve^de)]=de&ve):pe[i.log2(ue^de)]=de&ue;var me=v,ke=O;for(B=0;B<3;++B)me[B]=ke&1<<B?-1:1;return _};var i=t(8828),r=t(6760),n=t(5202),o=t(3250),l=new Array(16),c=new Array(8),d=new Array(8),u=new Array(3),x=[0,0,0];function p(h,S,A){for(var E=0;E<4;++E){h[E]=A[12+E];for(var P=0;P<3;++P)h[E]+=S[P]*A[4*P+E]}}(function(){for(var h=0;h<8;++h)c[h]=[1,1,1,1],d[h]=[1,1,1]})();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function m(h){for(var S=0;S<g.length;++S)if((h=n.positive(h,g[S])).length<3)return 0;var A=h[0],E=A[0]/A[3],P=A[1]/A[3],I=0;for(S=1;S+1<h.length;++S){var D=h[S],z=h[S+1],V=D[0]/D[3]-E,O=D[1]/D[3]-P,j=z[0]/z[3]-E,Y=z[1]/z[3]-P;I+=Math.abs(V*Y-O*j)}return I}var y=[1,1,1],v=[0,0,0],_={cubeEdges:y,axis:v}},501:function(f,s,t){"use strict";f.exports=function(y,v,_){var h=[],S=[0,0,0],A=[0,0,0],E=[0,0,0],P=[0,0,0];h.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var I=0;I<3;++I){for(var D=h.length/3|0,z=0;z<_[I].length;++z){var V=+_[I][z].x;h.push(V,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1)}var O=h.length/3|0;S[I]=D,A[I]=O-D,D=h.length/3|0;for(var j=0;j<_[I].length;++j)V=+_[I][j].x,h.push(V,0,1,V,1,1,V,0,-1,V,0,-1,V,1,1,V,1,-1);O=h.length/3|0,E[I]=D,P[I]=O-D}var Y=i(y,new Float32Array(h)),B=r(y,[{buffer:Y,type:y.FLOAT,size:3,stride:0,offset:0}]),U=n(y);return U.attributes.position.location=0,new g(y,Y,B,U,A,S,P,E)};var i=t(2762),r=t(8116),n=t(1879).n,o=[0,0,0],l=[0,0,0],c=[0,0,0],d=[0,0,0],u=[1,1];function x(y){return y[0]=y[1]=y[2]=0,y}function p(y,v){return y[0]=v[0],y[1]=v[1],y[2]=v[2],y}function g(y,v,_,h,S,A,E,P){this.gl=y,this.vertBuffer=v,this.vao=_,this.shader=h,this.tickCount=S,this.tickOffset=A,this.gridCount=E,this.gridOffset=P}var m=g.prototype;m.bind=function(y,v,_){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=v,this.shader.uniforms.projection=_,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},m.unbind=function(){this.vao.unbind()},m.drawAxisLine=function(y,v,_,h,S){var A=x(l);this.shader.uniforms.majorAxis=l,A[y]=v[1][y]-v[0][y],this.shader.uniforms.minorAxis=A;var E,P=p(d,_);P[y]+=v[0][y],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=h,(E=x(c))[(y+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(c))[(y+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},m.drawAxisTicks=function(y,v,_,h,S){if(this.tickCount[y]){var A=x(o);A[y]=1,this.shader.uniforms.majorAxis=A,this.shader.uniforms.offset=v,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=h,this.shader.uniforms.lineWidth=S;var E=x(c);E[y]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},m.drawGrid=function(y,v,_,h,S,A){if(this.gridCount[y]){var E=x(l);E[v]=_[1][v]-_[0][v],this.shader.uniforms.minorAxis=E;var P=p(d,h);P[v]+=_[0][v],this.shader.uniforms.offset=P;var I=x(o);I[y]=1,this.shader.uniforms.majorAxis=I;var D=x(c);D[y]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},m.drawZero=function(y,v,_,h,S,A){var E=x(l);this.shader.uniforms.majorAxis=E,E[y]=_[1][y]-_[0][y],this.shader.uniforms.minorAxis=E;var P=p(d,h);P[y]+=_[0][y],this.shader.uniforms.offset=P;var I=x(c);I[v]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},m.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(f,s,t){"use strict";var i=t(3236),r=t(9405),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.n=function(x){return r(x,n,o,null,[{name:"position",type:"vec3"}])};var l=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.Q=function(x){return r(x,l,c,null,[{name:"position",type:"vec3"}])};var d=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return r(x,d,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(f,s,t){"use strict";f.exports=function(p,g,m,y,v,_){var h=i(p),S=r(p,[{buffer:h,size:3}]),A=o(p);A.attributes.position.location=0;var E=new d(p,A,h,S);return E.update(g,m,y,v,_),E};var i=t(2762),r=t(8116),n=t(4359),o=t(1879).Q,l=window||T.global||{},c=l.__TEXT_CACHE||{};function d(p,g,m,y){this.gl=p,this.shader=g,this.buffer=m,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var u=d.prototype,x=[0,0];u.bind=function(p,g,m,y){this.vao.bind(),this.shader.bind();var v=this.shader.uniforms;v.model=p,v.view=g,v.projection=m,v.pixelScale=y,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},u.unbind=function(){this.vao.unbind()},u.update=function(p,g,m,y,v){var _=[];function h(O,j,Y,B,U,q){var te=[Y.style,Y.weight,Y.variant,Y.family].join("_"),ee=c[te];ee||(ee=c[te]={});var Q=ee[j];Q||(Q=ee[j]=function(ye,pe){try{return n(ye,pe)}catch(de){return console.warn('error vectorizing text:"'+ye+'" error:',de),{cells:[],positions:[]}}}(j,{triangles:!0,font:Y.family,fontStyle:Y.style,fontWeight:Y.weight,fontVariant:Y.variant,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:q}));for(var J=(B||12)/12,K=Q.positions,X=Q.cells,ie=0,se=X.length;ie<se;++ie)for(var ae=X[ie],ue=2;ue>=0;--ue){var ve=K[ae[ue]];_.push(J*ve[0],-J*ve[1],O)}}for(var S=[0,0,0],A=[0,0,0],E=[0,0,0],P=[0,0,0],I={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},D=0;D<3;++D){E[D]=_.length/3|0,h(.5*(p[0][D]+p[1][D]),g[D],m[D],12,1.25,I),P[D]=(_.length/3|0)-E[D],S[D]=_.length/3|0;for(var z=0;z<y[D].length;++z)if(y[D][z].text){var V={family:y[D][z].font||v[D].family,style:v[D].fontStyle||v[D].style,weight:v[D].fontWeight||v[D].weight,variant:v[D].fontVariant||v[D].variant};h(y[D][z].x,y[D][z].text,V,y[D][z].fontSize||12,1.25,I)}A[D]=(_.length/3|0)-S[D]}this.buffer.update(_),this.tickOffset=S,this.tickCount=A,this.labelOffset=E,this.labelCount=P},u.drawTicks=function(p,g,m,y,v,_,h,S){this.tickCount[p]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p]))},u.drawLabel=function(p,g,m,y,v,_,h,S){this.labelCount[p]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=h,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[p],this.labelOffset[p]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(f,s){"use strict";function t(i,r){var n=i+"",o=n.indexOf("."),l=0;o>=0&&(l=n.length-o-1);var c=Math.pow(10,l),d=Math.round(i*r*c),u=d+"";if(u.indexOf("e")>=0)return u;var x=d/c,p=d%c;d<0?(x=0|-Math.ceil(x),p=0|-p):(x=0|Math.floor(x),p|=0);var g=""+x;if(d<0&&(g="-"+g),l){for(var m=""+p;m.length<l;)m="0"+m;return g+"."+m}return g}s.create=function(i,r){for(var n=[],o=0;o<3;++o){for(var l=[],c=(i[0][o],i[1][o],0);c*r[o]<=i[1][o];++c)l.push({x:c*r[o],text:t(r[o],c)});for(c=-1;c*r[o]>=i[0][o];--c)l.push({x:c*r[o],text:t(r[o],c)});n.push(l)}return n},s.equal=function(i,r){for(var n=0;n<3;++n){if(i[n].length!==r[n].length)return!1;for(var o=0;o<i[n].length;++o){var l=i[n][o],c=r[n][o];if(l.x!==c.x||l.text!==c.text||l.font!==c.font||l.fontColor!==c.fontColor||l.fontSize!==c.fontSize||l.dx!==c.dx||l.dy!==c.dy)return!1}}return!0}},5445:function(f,s,t){"use strict";f.exports=function(_,h,S,A,E){var P=h.model||d,I=h.view||d,D=h.projection||d,z=h._ortho||!1,V=_.bounds,O=(E=E||n(P,I,D,V,z)).axis;o(u,I,P),o(u,D,u);for(var j=y,Y=0;Y<3;++Y)j[Y].lo=1/0,j[Y].hi=-1/0,j[Y].pixelsPerDataUnit=1/0;var B=i(l(u,u));l(u,u);for(var U=0;U<3;++U){var q=(U+1)%3,te=(U+2)%3,ee=v;e:for(Y=0;Y<2;++Y){var Q=[];if(O[U]<0!=!!Y){ee[U]=V[Y][U];for(var J=0;J<2;++J){ee[q]=V[J^Y][q];for(var K=0;K<2;++K)ee[te]=V[K^J^Y][te],Q.push(ee.slice())}var X=z?5:4;for(J=X;J===X;++J){if(Q.length===0)continue e;Q=r.positive(Q,B[J])}for(J=0;J<Q.length;++J){te=Q[J];var ie=m(v,u,te,S,A);for(K=0;K<3;++K)j[K].lo=Math.min(j[K].lo,te[K]),j[K].hi=Math.max(j[K].hi,te[K]),K!==U&&(j[K].pixelsPerDataUnit=Math.min(j[K].pixelsPerDataUnit,Math.abs(ie[K])))}}}}return j};var i=t(5033),r=t(5202),n=t(6429),o=t(6760),l=t(5665),c=t(5352),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function x(_,h,S){this.lo=_,this.hi=h,this.pixelsPerDataUnit=S}var p=[0,0,0,1],g=[0,0,0,1];function m(_,h,S,A,E){for(var P=0;P<3;++P){for(var I=p,D=g,z=0;z<3;++z)D[z]=I[z]=S[z];D[3]=I[3]=1,D[P]+=1,c(D,D,h),D[3]<0&&(_[P]=1/0),I[P]-=1,c(I,I,h),I[3]<0&&(_[P]=1/0);var V=(I[0]/I[3]-D[0]/D[3])*A,O=(I[1]/I[3]-D[1]/D[3])*E;_[P]=.25*Math.sqrt(V*V+O*O)}return _}var y=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],v=[0,0,0]},2762:function(f,s,t){"use strict";var i=t(1888),r=t(5298),n=t(9618),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(x,p,g,m,y){this.gl=x,this.type=p,this.handle=g,this.length=m,this.usage=y}var c=l.prototype;function d(x,p,g,m,y,v){var _=y.length*y.BYTES_PER_ELEMENT;if(v<0)return x.bufferData(p,y,m),_;if(_+v>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(p,v,y),g}function u(x,p){for(var g=i.malloc(x.length,p),m=x.length,y=0;y<m;++y)g[y]=x[y];return g}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(x,p){if(typeof p!="number"&&(p=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var g=x.dtype;if(o.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&g!=="uint16"?"uint32":"uint16"),g===x.dtype&&function(_,h){for(var S=1,A=h.length-1;A>=0;--A){if(h[A]!==S)return!1;S*=_[A]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=d(this.gl,this.type,this.length,this.usage,x.data,p):this.length=d(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),p);else{var m=i.malloc(x.size,g),y=n(m,x.shape);r.assign(y,x),this.length=d(this.gl,this.type,this.length,this.usage,p<0?m:m.subarray(0,x.size),p),i.free(m)}}else if(Array.isArray(x)){var v;v=this.type===this.gl.ELEMENT_ARRAY_BUFFER?u(x,"uint16"):u(x,"float32"),this.length=d(this.gl,this.type,this.length,this.usage,p<0?v:v.subarray(0,x.length),p),i.free(v)}else if(typeof x=="object"&&typeof x.length=="number")this.length=d(this.gl,this.type,this.length,this.usage,x,p);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},f.exports=function(x,p,g,m){if(g=g||x.ARRAY_BUFFER,m=m||x.DYNAMIC_DRAW,g!==x.ARRAY_BUFFER&&g!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(m!==x.DYNAMIC_DRAW&&m!==x.STATIC_DRAW&&m!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=x.createBuffer(),v=new l(x,g,y,0,m);return v.update(p),v}},6405:function(f,s,t){"use strict";var i=t(2931);f.exports=function(n,o){var l=n.positions,c=n.vectors,d={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return o&&(o[0]=[0,0,0],o[1]=[0,0,0]),d;for(var u=0,x=1/0,p=-1/0,g=1/0,m=-1/0,y=1/0,v=-1/0,_=null,h=null,S=[],A=1/0,E=!1,P=n.coneSizemode==="raw",I=0;I<l.length;I++){var D=l[I];x=Math.min(D[0],x),p=Math.max(D[0],p),g=Math.min(D[1],g),m=Math.max(D[1],m),y=Math.min(D[2],y),v=Math.max(D[2],v);var z=c[I];if(i.length(z)>u&&(u=i.length(z)),I&&!P){var V=2*i.distance(_,D)/(i.length(h)+i.length(z));V?(A=Math.min(A,V),E=!1):E=!0}E||(_=D,h=z),S.push(z)}var O=[x,g,y],j=[p,m,v];o&&(o[0]=O,o[1]=j),u===0&&(u=1);var Y=1/u;isFinite(A)||(A=1),d.vectorScale=A;var B=n.coneSize||(P?1:.5);n.absoluteConeSize&&(B=n.absoluteConeSize*Y),d.coneScale=B,I=0;for(var U=0;I<l.length;I++)for(var q=(D=l[I])[0],te=D[1],ee=D[2],Q=S[I],J=i.length(Q)*Y,K=0;K<8;K++){d.positions.push([q,te,ee,U++]),d.positions.push([q,te,ee,U++]),d.positions.push([q,te,ee,U++]),d.positions.push([q,te,ee,U++]),d.positions.push([q,te,ee,U++]),d.positions.push([q,te,ee,U++]),d.vectors.push(Q),d.vectors.push(Q),d.vectors.push(Q),d.vectors.push(Q),d.vectors.push(Q),d.vectors.push(Q),d.vertexIntensity.push(J,J,J),d.vertexIntensity.push(J,J,J);var X=d.positions.length;d.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return d};var r=t(614);f.exports.createMesh=t(9060),f.exports.createConeMesh=function(n,o){return f.exports.createMesh(n,o,{shaders:r,traceType:"cone"})}},9060:function(f,s,t){"use strict";var i=t(9405),r=t(2762),n=t(8116),o=t(7766),l=t(6760),c=t(7608),d=t(9618),u=t(6729),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(m,y,v,_,h,S,A,E,P,I,D){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=v,this.pickShader=_,this.trianglePositions=h,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=P,this.triangleIds=A,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=D,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var g=p.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(m){this.pickId=m},g.update=function(m){m=m||{};var y=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),m.tubeScale!==void 0&&(this.tubeScale=m.tubeScale),m.vectorScale!==void 0&&(this.vectorScale=m.vectorScale),m.coneScale!==void 0&&(this.coneScale=m.coneScale),m.coneOffset!==void 0&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(ie){for(var se=u({colormap:ie,nshades:256,format:"rgba"}),ae=new Uint8Array(1024),ue=0;ue<256;++ue){for(var ve=se[ue],ye=0;ye<3;++ye)ae[4*ue+ye]=ve[ye];ae[4*ue+3]=255*ve[3]}return d(ae,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var v=m.cells,_=m.positions,h=m.vectors;if(_&&v&&h){var S=[],A=[],E=[],P=[],I=[];this.cells=v,this.positions=_,this.vectors=h;var D=m.meshColor||[1,1,1,1],z=m.vertexIntensity,V=1/0,O=-1/0;if(z)if(m.vertexIntensityBounds)V=+m.vertexIntensityBounds[0],O=+m.vertexIntensityBounds[1];else for(var j=0;j<z.length;++j){var Y=z[j];V=Math.min(V,Y),O=Math.max(O,Y)}else for(j=0;j<_.length;++j)Y=_[j][2],V=Math.min(V,Y),O=Math.max(O,Y);for(this.intensity=z||function(ie){for(var se=ie.length,ae=new Array(se),ue=0;ue<se;++ue)ae[ue]=ie[ue][2];return ae}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=0;j<_.length;++j)for(var B=_[j],U=0;U<3;++U)!isNaN(B[U])&&isFinite(B[U])&&(this.bounds[0][U]=Math.min(this.bounds[0][U],B[U]),this.bounds[1][U]=Math.max(this.bounds[1][U],B[U]));var q=0;e:for(j=0;j<v.length;++j){var te=v[j];if(te.length===3){for(U=0;U<3;++U){B=_[Q=te[U]];for(var ee=0;ee<3;++ee)if(isNaN(B[ee])||!isFinite(B[ee]))continue e}for(U=0;U<3;++U){var Q;B=_[Q=te[2-U]],S.push(B[0],B[1],B[2],B[3]);var J=h[Q];A.push(J[0],J[1],J[2],J[3]||0);var K,X=D;X.length===3?E.push(X[0],X[1],X[2],1):E.push(X[0],X[1],X[2],X[3]),K=z?[(z[Q]-V)/(O-V),0]:[(B[2]-V)/(O-V),0],P.push(K[0],K[1]),I.push(j)}q+=1}}this.triangleCount=q,this.trianglePositions.update(S),this.triangleVectors.update(A),this.triangleColors.update(E),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(I))}},g.drawTransparent=g.draw=function(m){m=m||{};for(var y=this.gl,v=m.model||x,_=m.view||x,h=m.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)S[0][A]=Math.max(S[0][A],this.clipBounds[0][A]),S[1][A]=Math.min(S[1][A],this.clipBounds[1][A]);var E={model:v,view:_,projection:h,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=c(E.inverseModel,E.model),y.disable(y.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(l(P,E.view,E.model),l(P,E.projection,P),c(P,P),A=0;A<3;++A)E.eyePosition[A]=P[12+A]/P[15];var I=P[15];for(A=0;A<3;++A)I+=this.lightPosition[A]*P[4*A+3];for(A=0;A<3;++A){for(var D=P[12+A],z=0;z<3;++z)D+=P[4*z+A]*this.lightPosition[z];E.lightPosition[A]=D/I}if(this.triangleCount>0){var V=this.triShader;V.bind(),V.uniforms=E,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(m){m=m||{};for(var y=this.gl,v=m.model||x,_=m.view||x,h=m.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)S[0][A]=Math.max(S[0][A],this.clipBounds[0][A]),S[1][A]=Math.min(S[1][A],this.clipBounds[1][A]);this._model=[].slice.call(v),this._view=[].slice.call(_),this._projection=[].slice.call(h),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var E={model:v,view:_,projection:h,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(m){if(!m||m.id!==this.pickId)return null;var y=m.value[0]+256*m.value[1]+65536*m.value[2],v=this.cells[y],_=this.positions[v[1]].slice(0,3),h={position:_,dataCoordinate:_,index:Math.floor(v[1]/48)};return this.traceType==="cone"?h.index=Math.floor(v[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[v[1]],h.velocity=this.vectors[v[1]].slice(0,3),h.divergence=this.vectors[v[1]][3],h.index=y),h},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},f.exports=function(m,y,v){var _=v.shaders;arguments.length===1&&(m=(y=m).gl);var h=function(O,j){var Y=i(O,j.meshShader.vertex,j.meshShader.fragment,null,j.meshShader.attributes);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.vector.location=4,Y}(m,_),S=function(O,j){var Y=i(O,j.pickShader.vertex,j.pickShader.fragment,null,j.pickShader.attributes);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y.attributes.vector.location=4,Y}(m,_),A=o(m,d(new Uint8Array([255,255,255,255]),[1,1,4]));A.generateMipmap(),A.minFilter=m.LINEAR_MIPMAP_LINEAR,A.magFilter=m.LINEAR;var E=r(m),P=r(m),I=r(m),D=r(m),z=r(m),V=new p(m,A,h,S,E,P,z,I,D,n(m,[{buffer:E,type:m.FLOAT,size:4},{buffer:z,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:m.FLOAT,size:4},{buffer:D,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),v.traceType||"cone");return V.update(y),V}},614:function(f,s,t){var i=t(3236),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),o=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:o,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(f){f.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(f,s,t){var i=t(737);f.exports=function(r){return i[r]}},9165:function(f,s,t){"use strict";f.exports=function(p){var g=p.gl,m=i(g),y=r(g,[{buffer:m,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:g.FLOAT,size:3,offset:28,stride:40}]),v=n(g);v.attributes.position.location=0,v.attributes.color.location=1,v.attributes.offset.location=2;var _=new l(g,m,y,v);return _.update(p),_};var i=t(2762),r=t(8116),n=t(3436),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(p,g,m,y){this.gl=p,this.shader=y,this.buffer=g,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=l.prototype;function d(p,g){for(var m=0;m<3;++m)p[0][m]=Math.min(p[0][m],g[m]),p[1][m]=Math.max(p[1][m],g[m])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(p){var g=this.gl,m=this.shader.uniforms;this.shader.bind();var y=m.view=p.view||o,v=m.projection=p.projection||o;m.model=p.model||o,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var _=y[12],h=y[13],S=y[14],A=y[15],E=(p._ortho?2:1)*this.pixelRatio*(v[3]*_+v[7]*h+v[11]*S+v[15]*A)/g.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)g.lineWidth(this.lineWidth[P]*this.pixelRatio),m.capSize=this.capSize[P]*E,this.lineCount[P]&&g.drawArrays(g.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var u=function(){for(var p=new Array(3),g=0;g<3;++g){for(var m=[],y=1;y<=2;++y)for(var v=-1;v<=1;v+=2){var _=[0,0,0];_[(y+g)%3]=v,m.push(_)}p[g]=m}return p}();function x(p,g,m,y){for(var v=u[y],_=0;_<v.length;++_){var h=v[_];p.push(g[0],g[1],g[2],m[0],m[1],m[2],m[3],h[0],h[1],h[2])}return v.length}c.update=function(p){"lineWidth"in(p=p||{})&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=p.color||[[0,0,0],[0,0,0],[0,0,0]],m=p.position,y=p.error;if(Array.isArray(g[0])||(g=[g,g,g]),m&&y){var v=[],_=m.length,h=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=h;e:for(var A=0;A<_;++A){for(var E=m[A],P=0;P<3;++P)if(isNaN(E[P])||!isFinite(E[P]))continue e;var I,D=y[A],z=g[S];Array.isArray(z[0])&&(z=g[A]),z.length===3?z=[z[0],z[1],z[2],1]:z.length===4&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),!isNaN(D[0][S])&&!isNaN(D[1][S])&&(D[0][S]<0&&((I=E.slice())[S]+=D[0][S],v.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,I[0],I[1],I[2],z[0],z[1],z[2],z[3],0,0,0),d(this.bounds,I),h+=2+x(v,I,z,S)),D[1][S]>0&&((I=E.slice())[S]+=D[1][S],v.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,I[0],I[1],I[2],z[0],z[1],z[2],z[3],0,0,0),d(this.bounds,I),h+=2+x(v,I,z,S)))}this.lineCount[S]=h-this.lineOffset[S]}this.buffer.update(v)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(f,s,t){"use strict";var i=t(3236),r=t(9405),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),o=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);f.exports=function(l){return r(l,n,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(f,s,t){"use strict";var i=t(7766);f.exports=function(_,h,S,A){r||(r=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!c&&E&&function(j,Y){var B=j.getParameter(Y.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(B+1);for(var U=0;U<=B;++U){for(var q=new Array(B),te=0;te<U;++te)q[te]=j.COLOR_ATTACHMENT0+te;for(te=U;te<B;++te)q[te]=j.NONE;c[U]=q}}(_,E),Array.isArray(h)&&(A=S,S=0|h[1],h=0|h[0]),typeof h!="number")throw new Error("gl-fbo: Missing shape parameter");var P=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(h<0||h>P||S<0||S>P)throw new Error("gl-fbo: Parameters are too large for FBO");var I=1;if("color"in(A=A||{})){if((I=Math.max(0|A.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(I>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(I>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+I+" draw buffers")}}var D=_.UNSIGNED_BYTE,z=_.getExtension("OES_texture_float");if(A.float&&I>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");D=_.FLOAT}else A.preferFloat&&I>0&&z&&(D=_.FLOAT);var V=!0;"depth"in A&&(V=!!A.depth);var O=!1;return"stencil"in A&&(O=!!A.stencil),new m(_,h,S,D,I,V,O,E)};var r,n,o,l,c=null;function d(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function u(_,h){_.bindFramebuffer(_.FRAMEBUFFER,h[0]),_.bindRenderbuffer(_.RENDERBUFFER,h[1]),_.bindTexture(_.TEXTURE_2D,h[2])}function x(_){switch(_){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(_,h,S,A,E,P){if(!A)return null;var I=i(_,h,S,E,A);return I.magFilter=_.NEAREST,I.minFilter=_.NEAREST,I.mipSamples=1,I.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,P,_.TEXTURE_2D,I.handle,0),I}function g(_,h,S,A,E){var P=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,P),_.renderbufferStorage(_.RENDERBUFFER,A,h,S),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,P),P}function m(_,h,S,A,E,P,I,D){this.gl=_,this._shape=[0|h,0|S],this._destroyed=!1,this._ext=D,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=A,this._useDepth=P,this._useStencil=I;var V=this,O=[0|h,0|S];Object.defineProperties(O,{0:{get:function(){return V._shape[0]},set:function(j){return V.width=j}},1:{get:function(){return V._shape[1]},set:function(j){return V.height=j}}}),this._shapeVector=O,function(j){var Y=d(j.gl),B=j.gl,U=j.handle=B.createFramebuffer(),q=j._shape[0],te=j._shape[1],ee=j.color.length,Q=j._ext,J=j._useStencil,K=j._useDepth,X=j._colorType;B.bindFramebuffer(B.FRAMEBUFFER,U);for(var ie=0;ie<ee;++ie)j.color[ie]=p(B,q,te,X,B.RGBA,B.COLOR_ATTACHMENT0+ie);ee===0?(j._color_rb=g(B,q,te,B.RGBA4,B.COLOR_ATTACHMENT0),Q&&Q.drawBuffersWEBGL(c[0])):ee>1&&Q.drawBuffersWEBGL(c[ee]);var se=B.getExtension("WEBGL_depth_texture");se?J?j.depth=p(B,q,te,se.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):K&&(j.depth=p(B,q,te,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):K&&J?j._depth_rb=g(B,q,te,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):K?j._depth_rb=g(B,q,te,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):J&&(j._depth_rb=g(B,q,te,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var ae=B.checkFramebufferStatus(B.FRAMEBUFFER);if(ae!==B.FRAMEBUFFER_COMPLETE){for(j._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(j.handle),j.handle=null,j.depth&&(j.depth.dispose(),j.depth=null),j._depth_rb&&(B.deleteRenderbuffer(j._depth_rb),j._depth_rb=null),ie=0;ie<j.color.length;++ie)j.color[ie].dispose(),j.color[ie]=null;j._color_rb&&(B.deleteRenderbuffer(j._color_rb),j._color_rb=null),u(B,Y),x(ae)}u(B,Y)}(this)}var y=m.prototype;function v(_,h,S){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==h||_._shape[1]!==S){var A=_.gl,E=A.getParameter(A.MAX_RENDERBUFFER_SIZE);if(h<0||h>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=h,_._shape[1]=S;for(var P=d(A),I=0;I<_.color.length;++I)_.color[I].shape=_._shape;_._color_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,_._color_rb),A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&A.renderbufferStorage(A.RENDERBUFFER,A.STENCIL_INDEX,_._shape[0],_._shape[1])),A.bindFramebuffer(A.FRAMEBUFFER,_.handle);var D=A.checkFramebufferStatus(A.FRAMEBUFFER);D!==A.FRAMEBUFFER_COMPLETE&&(_.dispose(),u(A,P),x(D)),u(A,P)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var h=0|_[0],S=0|_[1];return v(this,h,S),[h,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,v(this,this._shape[0],_),_},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var h=0;h<this.color.length;++h)this.color[h].dispose(),this.color[h]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(f,s,t){var i=t(3387).sprintf,r=t(5171),n=t(1848),o=t(1085);f.exports=function(l,c,d){"use strict";var u=n(c)||"of unknown name (see npm glsl-shader-name)",x="unknown type";d!==void 0&&(x=d===r.FRAGMENT_SHADER?"fragment":"vertex");for(var p=i(`Error compiling %s shader %s:
`,x,u),g=i("%s%s",p,l),m=l.split(`
`),y={},v=0;v<m.length;v++){var _=m[v];if(_!==""&&_!=="\0"){var h=parseInt(_.split(":")[2]);if(isNaN(h))throw new Error(i("Could not parse error: %s",_));y[h]=_}}var S=o(c).split(`
`);for(v=0;v<S.length;v++)if((y[v+3]||y[v+2]||y[v+1])&&(p+=S[v]+`
`,y[v+1])){var A=y[v+1];A=A.substr(A.split(":",3).join(":").length+1).trim(),p+=i(`^^^ %s

`,A)}return{long:p.trim(),short:g.trim()}}},2510:function(f,s,t){"use strict";f.exports=function(g,m){var y=g.gl,v=new d(g,o(y,c.vertex,c.fragment),o(y,c.pickVertex,c.pickFragment),l(y),l(y),l(y),l(y));return v.update(m),g.addObject(v),v};var i=t(2478),r=t(7762),n=t(1888),o=t(9405),l=t(2762),c=t(6768);function d(g,m,y,v,_,h,S){this.plot=g,this.shader=m,this.pickShader=y,this.positionBuffer=v,this.weightBuffer=_,this.colorBuffer=h,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,x=d.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,m=this.shader,y=this.bounds,v=this.numVertices;if(!(v<=0)){var _=g.gl,h=g.dataBox,S=y[2]-y[0],A=y[3]-y[1],E=h[2]-h[0],P=h[3]-h[1];u[0]=2*S/E,u[4]=2*A/P,u[6]=2*(y[0]-h[0])/E-1,u[7]=2*(y[1]-h[1])/P-1,m.bind();var I=m.uniforms;I.viewTransform=u,I.shape=this.shape;var D=m.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,v)}}),x.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],m=[0,0,0,0];return function(y){var v=this.plot,_=this.pickShader,h=this.bounds,S=this.numVertices;if(!(S<=0)){var A=v.gl,E=v.dataBox,P=h[2]-h[0],I=h[3]-h[1],D=E[2]-E[0],z=E[3]-E[1];g[0]=2*P/D,g[4]=2*I/z,g[6]=2*(h[0]-E[0])/D-1,g[7]=2*(h[1]-E[1])/z-1;for(var V=0;V<4;++V)m[V]=y>>8*V&255;this.pickOffset=y,_.bind();var O=_.uniforms;O.viewTransform=g,O.pickOffset=m,O.shape=this.shape;var j=_.attributes;return this.positionBuffer.bind(),j.position.pointer(),this.weightBuffer.bind(),j.weight.pointer(A.UNSIGNED_BYTE,!1),this.idBuffer.bind(),j.pickId.pointer(A.UNSIGNED_BYTE,!1),A.drawArrays(A.TRIANGLES,0,S),y+this.shape[0]*this.shape[1]}}}(),x.pick=function(g,m,y){var v=this.pickOffset,_=this.shape[0]*this.shape[1];if(y<v||y>=v+_)return null;var h=y-v,S=this.xData,A=this.yData;return{object:this,pointId:h,dataCoord:[S[h%this.shape[0]],A[h/this.shape[0]|0]]}},x.update=function(g){var m=(g=g||{}).shape||[0,0],y=g.x||r(m[0]),v=g.y||r(m[1]),_=g.z||new Float32Array(m[0]*m[1]),h=g.zsmooth!==!1;this.xData=y,this.yData=v;var S,A,E,P,I=g.colorLevels||[0],D=g.colorValues||[0,0,0,1],z=I.length,V=this.bounds;h?(S=V[0]=y[0],A=V[1]=v[0],E=V[2]=y[y.length-1],P=V[3]=v[v.length-1]):(S=V[0]=y[0]+(y[1]-y[0])/2,A=V[1]=v[0]+(v[1]-v[0])/2,E=V[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,P=V[3]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2);var O=1/(E-S),j=1/(P-A),Y=m[0],B=m[1];this.shape=[Y,B];var U=(h?(Y-1)*(B-1):Y*B)*(p.length>>>1);this.numVertices=U;for(var q=n.mallocUint8(4*U),te=n.mallocFloat32(2*U),ee=n.mallocUint8(2*U),Q=n.mallocUint32(U),J=0,K=h?Y-1:Y,X=h?B-1:B,ie=0;ie<X;++ie){var se,ae;h?(se=j*(v[ie]-A),ae=j*(v[ie+1]-A)):(se=ie<B-1?j*(v[ie]-(v[ie+1]-v[ie])/2-A):j*(v[ie]-(v[ie]-v[ie-1])/2-A),ae=ie<B-1?j*(v[ie]+(v[ie+1]-v[ie])/2-A):j*(v[ie]+(v[ie]-v[ie-1])/2-A));for(var ue=0;ue<K;++ue){var ve,ye;h?(ve=O*(y[ue]-S),ye=O*(y[ue+1]-S)):(ve=ue<Y-1?O*(y[ue]-(y[ue+1]-y[ue])/2-S):O*(y[ue]-(y[ue]-y[ue-1])/2-S),ye=ue<Y-1?O*(y[ue]+(y[ue+1]-y[ue])/2-S):O*(y[ue]+(y[ue]-y[ue-1])/2-S));for(var pe=0;pe<p.length;pe+=2){var de,me,ke,Ce,ge=p[pe],oe=p[pe+1],re=_[h?(ie+oe)*Y+(ue+ge):ie*Y+ue],fe=i.le(I,re);if(fe<0)de=D[0],me=D[1],ke=D[2],Ce=D[3];else if(fe===z-1)de=D[4*z-4],me=D[4*z-3],ke=D[4*z-2],Ce=D[4*z-1];else{var Se=(re-I[fe])/(I[fe+1]-I[fe]),be=1-Se,we=4*fe,Me=4*(fe+1);de=be*D[we]+Se*D[Me],me=be*D[we+1]+Se*D[Me+1],ke=be*D[we+2]+Se*D[Me+2],Ce=be*D[we+3]+Se*D[Me+3]}q[4*J]=255*de,q[4*J+1]=255*me,q[4*J+2]=255*ke,q[4*J+3]=255*Ce,te[2*J]=.5*ve+.5*ye,te[2*J+1]=.5*se+.5*ae,ee[2*J]=ge,ee[2*J+1]=oe,Q[J]=ie*Y+ue,J+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(ee),this.colorBuffer.update(q),this.idBuffer.update(Q),n.free(te),n.free(q),n.free(ee),n.free(Q)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(f,s,t){"use strict";var i=t(3236);f.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(f,s,t){var i=t(3236),r=t(9405),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(d){return r(d,n,o,null,c)},s.createPickShader=function(d){return r(d,n,l,null,c)}},5714:function(f,s,t){"use strict";f.exports=function(S){var A=S.gl||S.scene&&S.scene.gl,E=x(A);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var P=p(A);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var I=i(A),D=r(A,[{buffer:I,size:3,offset:0,stride:48},{buffer:I,size:3,offset:12,stride:48},{buffer:I,size:1,offset:24,stride:48},{buffer:I,size:1,offset:28,stride:48},{buffer:I,size:4,offset:32,stride:48}]),z=d(new Array(1024),[256,1,4]),V=0;V<1024;++V)z.data[V]=255;var O=n(A,z);O.wrap=A.REPEAT;var j=new _(A,E,P,I,D,O);return j.update(S),j};var i=t(2762),r=t(8116),n=t(7766),o=new Uint8Array(4),l=new Float32Array(o.buffer),c=t(2478),d=t(9618),u=t(7319),x=u.createShader,p=u.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(S,A){for(var E=0,P=0;P<3;++P){var I=S[P]-A[P];E+=I*I}return Math.sqrt(E)}function y(S){for(var A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)A[0][E]=Math.max(S[0][E],A[0][E]),A[1][E]=Math.min(S[1][E],A[1][E]);return A}function v(S,A,E,P){this.arcLength=S,this.position=A,this.index=E,this.dataCoordinate=P}function _(S,A,E,P,I,D){this.gl=S,this.shader=A,this.pickShader=E,this.buffer=P,this.vao=I,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=D,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var h=_.prototype;h.isTransparent=function(){return this.hasAlpha},h.isOpaque=function(){return!this.hasAlpha},h.pickSlots=1,h.setPickBase=function(S){this.pickId=S},h.drawTransparent=h.draw=function(S){if(this.vertexCount){var A=this.gl,E=this.shader,P=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(A.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.drawPick=function(S){if(this.vertexCount){var A=this.gl,E=this.pickShader,P=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(A.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},h.update=function(S){var A,E;this.dirty=!0;var P=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var I=[],D=[],z=[],V=0,O=0,j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Y=S.position||S.positions;if(Y){var B=S.color||S.colors||[0,0,0,1],U=S.lineWidth||1,q=!1;e:for(A=1;A<Y.length;++A){var te,ee,Q,J=Y[A-1],K=Y[A];for(D.push(V),z.push(J.slice()),E=0;E<3;++E){if(isNaN(J[E])||isNaN(K[E])||!isFinite(J[E])||!isFinite(K[E])){if(!P&&I.length>0){for(var X=0;X<24;++X)I.push(I[I.length-12]);O+=2,q=!0}continue e}j[0][E]=Math.min(j[0][E],J[E],K[E]),j[1][E]=Math.max(j[1][E],J[E],K[E])}Array.isArray(B[0])?(te=B.length>A-1?B[A-1]:B.length>0?B[B.length-1]:[0,0,0,1],ee=B.length>A?B[A]:B.length>0?B[B.length-1]:[0,0,0,1]):te=ee=B,te.length===3&&(te=[te[0],te[1],te[2],1]),ee.length===3&&(ee=[ee[0],ee[1],ee[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),Q=Array.isArray(U)?U.length>A-1?U[A-1]:U.length>0?U[U.length-1]:[0,0,0,1]:U;var ie=V;if(V+=m(J,K),q){for(E=0;E<2;++E)I.push(J[0],J[1],J[2],K[0],K[1],K[2],ie,Q,te[0],te[1],te[2],te[3]);O+=2,q=!1}I.push(J[0],J[1],J[2],K[0],K[1],K[2],ie,Q,te[0],te[1],te[2],te[3],J[0],J[1],J[2],K[0],K[1],K[2],ie,-Q,te[0],te[1],te[2],te[3],K[0],K[1],K[2],J[0],J[1],J[2],V,-Q,ee[0],ee[1],ee[2],ee[3],K[0],K[1],K[2],J[0],J[1],J[2],V,Q,ee[0],ee[1],ee[2],ee[3]),O+=4}}if(this.buffer.update(I),D.push(V),z.push(Y[Y.length-1].slice()),this.bounds=j,this.vertexCount=O,this.points=z,this.arcLength=D,"dashes"in S){var se=S.dashes.slice();for(se.unshift(0),A=1;A<se.length;++A)se[A]=se[A-1]+se[A];var ae=d(new Array(1024),[256,1,4]);for(A=0;A<256;++A){for(E=0;E<4;++E)ae.set(A,0,E,0);1&c.le(se,se[se.length-1]*A/255)?ae.set(A,0,0,0):ae.set(A,0,0,255)}this.texture.setPixels(ae)}},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},h.pick=function(S){if(!S||S.id!==this.pickId)return null;var A=function(Y,B,U,q){return o[0]=0,o[1]=U,o[2]=B,o[3]=Y,l[0]}(S.value[0],S.value[1],S.value[2]),E=c.le(this.arcLength,A);if(E<0)return null;if(E===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var P=this.points[E],I=this.points[Math.min(E+1,this.points.length-1)],D=(A-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-D,V=[0,0,0],O=0;O<3;++O)V[O]=z*P[O]+D*I[O];var j=Math.min(D<.5?E:E+1,this.points.length-1);return new v(A,V,j,this.points[j])}},1903:function(f){f.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},6864:function(f){f.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},9921:function(f){f.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3],o=s[4],l=s[5],c=s[6],d=s[7],u=s[8],x=s[9],p=s[10],g=s[11],m=s[12],y=s[13],v=s[14],_=s[15];return(t*l-i*o)*(p*_-g*v)-(t*c-r*o)*(x*_-g*y)+(t*d-n*o)*(x*v-p*y)+(i*c-r*l)*(u*_-g*m)-(i*d-n*l)*(u*v-p*m)+(r*d-n*c)*(u*y-x*m)}},7399:function(f){f.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=t[3],l=i+i,c=r+r,d=n+n,u=i*l,x=r*l,p=r*c,g=n*l,m=n*c,y=n*d,v=o*l,_=o*c,h=o*d;return s[0]=1-p-y,s[1]=x+h,s[2]=g-_,s[3]=0,s[4]=x-h,s[5]=1-u-y,s[6]=m+v,s[7]=0,s[8]=g+_,s[9]=m-v,s[10]=1-u-p,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},6743:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],l=t[3],c=r+r,d=n+n,u=o+o,x=r*c,p=r*d,g=r*u,m=n*d,y=n*u,v=o*u,_=l*c,h=l*d,S=l*u;return s[0]=1-(m+v),s[1]=p+S,s[2]=g-h,s[3]=0,s[4]=p-S,s[5]=1-(x+v),s[6]=y+_,s[7]=0,s[8]=g+h,s[9]=y-_,s[10]=1-(x+m),s[11]=0,s[12]=i[0],s[13]=i[1],s[14]=i[2],s[15]=1,s}},7894:function(f){f.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7608:function(f){f.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=t[3],l=t[4],c=t[5],d=t[6],u=t[7],x=t[8],p=t[9],g=t[10],m=t[11],y=t[12],v=t[13],_=t[14],h=t[15],S=i*c-r*l,A=i*d-n*l,E=i*u-o*l,P=r*d-n*c,I=r*u-o*c,D=n*u-o*d,z=x*v-p*y,V=x*_-g*y,O=x*h-m*y,j=p*_-g*v,Y=p*h-m*v,B=g*h-m*_,U=S*B-A*Y+E*j+P*O-I*V+D*z;return U?(U=1/U,s[0]=(c*B-d*Y+u*j)*U,s[1]=(n*Y-r*B-o*j)*U,s[2]=(v*D-_*I+h*P)*U,s[3]=(g*I-p*D-m*P)*U,s[4]=(d*O-l*B-u*V)*U,s[5]=(i*B-n*O+o*V)*U,s[6]=(_*E-y*D-h*A)*U,s[7]=(x*D-g*E+m*A)*U,s[8]=(l*Y-c*O+u*z)*U,s[9]=(r*O-i*Y-o*z)*U,s[10]=(y*I-v*E+h*S)*U,s[11]=(p*E-x*I-m*S)*U,s[12]=(c*V-l*j-d*z)*U,s[13]=(i*j-r*V+n*z)*U,s[14]=(v*A-y*P-_*S)*U,s[15]=(x*P-p*A+g*S)*U,s):null}},6582:function(f,s,t){var i=t(7894);f.exports=function(r,n,o,l){var c,d,u,x,p,g,m,y,v,_,h=n[0],S=n[1],A=n[2],E=l[0],P=l[1],I=l[2],D=o[0],z=o[1],V=o[2];return Math.abs(h-D)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(A-V)<1e-6?i(r):(m=h-D,y=S-z,v=A-V,c=P*(v*=_=1/Math.sqrt(m*m+y*y+v*v))-I*(y*=_),d=I*(m*=_)-E*v,u=E*y-P*m,(_=Math.sqrt(c*c+d*d+u*u))?(c*=_=1/_,d*=_,u*=_):(c=0,d=0,u=0),x=y*u-v*d,p=v*c-m*u,g=m*d-y*c,(_=Math.sqrt(x*x+p*p+g*g))?(x*=_=1/_,p*=_,g*=_):(x=0,p=0,g=0),r[0]=c,r[1]=x,r[2]=m,r[3]=0,r[4]=d,r[5]=p,r[6]=y,r[7]=0,r[8]=u,r[9]=g,r[10]=v,r[11]=0,r[12]=-(c*h+d*S+u*A),r[13]=-(x*h+p*S+g*A),r[14]=-(m*h+y*S+v*A),r[15]=1,r)}},6760:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],l=t[3],c=t[4],d=t[5],u=t[6],x=t[7],p=t[8],g=t[9],m=t[10],y=t[11],v=t[12],_=t[13],h=t[14],S=t[15],A=i[0],E=i[1],P=i[2],I=i[3];return s[0]=A*r+E*c+P*p+I*v,s[1]=A*n+E*d+P*g+I*_,s[2]=A*o+E*u+P*m+I*h,s[3]=A*l+E*x+P*y+I*S,A=i[4],E=i[5],P=i[6],I=i[7],s[4]=A*r+E*c+P*p+I*v,s[5]=A*n+E*d+P*g+I*_,s[6]=A*o+E*u+P*m+I*h,s[7]=A*l+E*x+P*y+I*S,A=i[8],E=i[9],P=i[10],I=i[11],s[8]=A*r+E*c+P*p+I*v,s[9]=A*n+E*d+P*g+I*_,s[10]=A*o+E*u+P*m+I*h,s[11]=A*l+E*x+P*y+I*S,A=i[12],E=i[13],P=i[14],I=i[15],s[12]=A*r+E*c+P*p+I*v,s[13]=A*n+E*d+P*g+I*_,s[14]=A*o+E*u+P*m+I*h,s[15]=A*l+E*x+P*y+I*S,s}},4040:function(f){f.exports=function(s,t,i,r,n,o,l){var c=1/(t-i),d=1/(r-n),u=1/(o-l);return s[0]=-2*c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*d,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*u,s[11]=0,s[12]=(t+i)*c,s[13]=(n+r)*d,s[14]=(l+o)*u,s[15]=1,s}},4772:function(f){f.exports=function(s,t,i,r,n){var o=1/Math.tan(t/2),l=1/(r-n);return s[0]=o/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*l,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*l,s[15]=0,s}},6079:function(f){f.exports=function(s,t,i,r){var n,o,l,c,d,u,x,p,g,m,y,v,_,h,S,A,E,P,I,D,z,V,O,j,Y=r[0],B=r[1],U=r[2],q=Math.sqrt(Y*Y+B*B+U*U);return Math.abs(q)<1e-6?null:(Y*=q=1/q,B*=q,U*=q,n=Math.sin(i),l=1-(o=Math.cos(i)),c=t[0],d=t[1],u=t[2],x=t[3],p=t[4],g=t[5],m=t[6],y=t[7],v=t[8],_=t[9],h=t[10],S=t[11],A=Y*Y*l+o,E=B*Y*l+U*n,P=U*Y*l-B*n,I=Y*B*l-U*n,D=B*B*l+o,z=U*B*l+Y*n,V=Y*U*l+B*n,O=B*U*l-Y*n,j=U*U*l+o,s[0]=c*A+p*E+v*P,s[1]=d*A+g*E+_*P,s[2]=u*A+m*E+h*P,s[3]=x*A+y*E+S*P,s[4]=c*I+p*D+v*z,s[5]=d*I+g*D+_*z,s[6]=u*I+m*D+h*z,s[7]=x*I+y*D+S*z,s[8]=c*V+p*O+v*j,s[9]=d*V+g*O+_*j,s[10]=u*V+m*O+h*j,s[11]=x*V+y*O+S*j,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},5567:function(f){f.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[4],l=t[5],c=t[6],d=t[7],u=t[8],x=t[9],p=t[10],g=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=o*n+u*r,s[5]=l*n+x*r,s[6]=c*n+p*r,s[7]=d*n+g*r,s[8]=u*n-o*r,s[9]=x*n-l*r,s[10]=p*n-c*r,s[11]=g*n-d*r,s}},2408:function(f){f.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],l=t[1],c=t[2],d=t[3],u=t[8],x=t[9],p=t[10],g=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=o*n-u*r,s[1]=l*n-x*r,s[2]=c*n-p*r,s[3]=d*n-g*r,s[8]=o*r+u*n,s[9]=l*r+x*n,s[10]=c*r+p*n,s[11]=d*r+g*n,s}},7089:function(f){f.exports=function(s,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],l=t[1],c=t[2],d=t[3],u=t[4],x=t[5],p=t[6],g=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=o*n+u*r,s[1]=l*n+x*r,s[2]=c*n+p*r,s[3]=d*n+g*r,s[4]=u*n-o*r,s[5]=x*n-l*r,s[6]=p*n-c*r,s[7]=g*n-d*r,s}},2504:function(f){f.exports=function(s,t,i){var r=i[0],n=i[1],o=i[2];return s[0]=t[0]*r,s[1]=t[1]*r,s[2]=t[2]*r,s[3]=t[3]*r,s[4]=t[4]*n,s[5]=t[5]*n,s[6]=t[6]*n,s[7]=t[7]*n,s[8]=t[8]*o,s[9]=t[9]*o,s[10]=t[10]*o,s[11]=t[11]*o,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},7656:function(f){f.exports=function(s,t,i){var r,n,o,l,c,d,u,x,p,g,m,y,v=i[0],_=i[1],h=i[2];return t===s?(s[12]=t[0]*v+t[4]*_+t[8]*h+t[12],s[13]=t[1]*v+t[5]*_+t[9]*h+t[13],s[14]=t[2]*v+t[6]*_+t[10]*h+t[14],s[15]=t[3]*v+t[7]*_+t[11]*h+t[15]):(r=t[0],n=t[1],o=t[2],l=t[3],c=t[4],d=t[5],u=t[6],x=t[7],p=t[8],g=t[9],m=t[10],y=t[11],s[0]=r,s[1]=n,s[2]=o,s[3]=l,s[4]=c,s[5]=d,s[6]=u,s[7]=x,s[8]=p,s[9]=g,s[10]=m,s[11]=y,s[12]=r*v+c*_+p*h+t[12],s[13]=n*v+d*_+g*h+t[13],s[14]=o*v+u*_+m*h+t[14],s[15]=l*v+x*_+y*h+t[15]),s}},5665:function(f){f.exports=function(s,t){if(s===t){var i=t[1],r=t[2],n=t[3],o=t[6],l=t[7],c=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=i,s[6]=t[9],s[7]=t[13],s[8]=r,s[9]=o,s[11]=t[14],s[12]=n,s[13]=l,s[14]=c}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},7626:function(f,s,t){"use strict";var i=t(2642),r=t(9346);function n(c,d){for(var u=[0,0,0,0],x=0;x<4;++x)for(var p=0;p<4;++p)u[p]+=c[4*x+p]*d[x];return u}function o(c,d,u,x,p){for(var g=n(x,n(u,n(d,[c[0],c[1],c[2],1]))),m=0;m<3;++m)g[m]/=g[3];return[.5*p[0]*(1+g[0]),.5*p[1]*(1-g[1])]}function l(c,d){for(var u=[0,0,0],x=0;x<c.length;++x)for(var p=c[x],g=d[x],m=0;m<3;++m)u[m]+=g*p[m];return u}f.exports=function(c,d,u,x,p,g){if(c.length===1)return[0,c[0].slice()];for(var m=new Array(c.length),y=0;y<c.length;++y)m[y]=o(c[y],u,x,p,g);var v=0,_=1/0;for(y=0;y<m.length;++y){for(var h=0,S=0;S<2;++S)h+=Math.pow(m[y][S]-d[S],2);h<_&&(_=h,v=y)}var A=function(P,I){if(P.length===2){for(var D=0,z=0,V=0;V<2;++V)D+=Math.pow(I[V]-P[0][V],2),z+=Math.pow(I[V]-P[1][V],2);return(D=Math.sqrt(D))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(D+z),D/(z+D)]}if(P.length===3){var O=[0,0];return r(P[0],P[1],P[2],I,O),i(P,O)}return[]}(m,d),E=0;for(y=0;y<3;++y){if(A[y]<-.001||A[y]>1.0001)return null;E+=A[y]}return Math.abs(E-1)>.001?null:[v,l(c,A),A]}},840:function(f,s,t){var i=t(3236),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),o=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),d=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),p=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),m=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:o,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:c,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:u,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:p,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:m,attributes:[{name:"position",type:"vec3"}]}},7201:function(f,s,t){"use strict";var i=t(9405),r=t(2762),n=t(8116),o=t(7766),l=t(8406),c=t(6760),d=t(7608),u=t(9618),x=t(6729),p=t(7765),g=t(1888),m=t(840),y=t(7626),v=m.meshShader,_=m.wireShader,h=m.pointShader,S=m.pickShader,A=m.pointPickShader,E=m.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function I(B,U,q,te,ee,Q,J,K,X,ie,se,ae,ue,ve,ye,pe,de,me,ke,Ce,ge,oe,re,fe,Se,be,we){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=U,this.dirty=!0,this.triShader=q,this.lineShader=te,this.pointShader=ee,this.pickShader=Q,this.pointPickShader=J,this.contourShader=K,this.trianglePositions=X,this.triangleColors=se,this.triangleNormals=ue,this.triangleUVs=ae,this.triangleIds=ie,this.triangleVAO=ve,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ye,this.edgeColors=de,this.edgeUVs=me,this.edgeIds=pe,this.edgeVAO=ke,this.edgeCount=0,this.pointPositions=Ce,this.pointColors=oe,this.pointUVs=re,this.pointSizes=fe,this.pointIds=ge,this.pointVAO=Se,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=be,this.contourVAO=we,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var D=I.prototype;function z(B,U){if(!U||!U.length)return 1;for(var q=0;q<U.length;++q){if(U.length<2)return 1;if(U[q][0]===B)return U[q][1];if(U[q][0]>B&&q>0){var te=(U[q][0]-B)/(U[q][0]-U[q-1][0]);return U[q][1]*(1-te)+te*U[q-1][1]}}return 1}function V(B){var U=i(B,h.vertex,h.fragment);return U.attributes.position.location=0,U.attributes.color.location=2,U.attributes.uv.location=3,U.attributes.pointSize.location=4,U}function O(B){var U=i(B,S.vertex,S.fragment);return U.attributes.position.location=0,U.attributes.id.location=1,U}function j(B){var U=i(B,A.vertex,A.fragment);return U.attributes.position.location=0,U.attributes.id.location=1,U.attributes.pointSize.location=4,U}function Y(B){var U=i(B,E.vertex,E.fragment);return U.attributes.position.location=0,U}D.isOpaque=function(){return!this.hasAlpha},D.isTransparent=function(){return this.hasAlpha},D.pickSlots=1,D.setPickBase=function(B){this.pickId=B},D.highlight=function(B){if(B&&this.contourEnable){for(var U=p(this.cells,this.intensity,B.intensity),q=U.cells,te=U.vertexIds,ee=U.vertexWeights,Q=q.length,J=g.mallocFloat32(6*Q),K=0,X=0;X<Q;++X)for(var ie=q[X],se=0;se<2;++se){var ae=ie[0];ie.length===2&&(ae=ie[se]);for(var ue=te[ae][0],ve=te[ae][1],ye=ee[ae],pe=1-ye,de=this.positions[ue],me=this.positions[ve],ke=0;ke<3;++ke)J[K++]=ye*de[ke]+pe*me[ke]}this.contourCount=K/3|0,this.contourPositions.update(J.subarray(0,K)),g.free(J)}else this.contourCount=0},D.update=function(B){B=B||{};var U=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=o(U,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=U.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=U.LINEAR,this.texture.setPixels(function(Ot,Rt){for(var Ct=x({colormap:Ot,nshades:256,format:"rgba"}),Ge=new Uint8Array(1024),Xe=0;Xe<256;++Xe){for(var Ne=Ct[Xe],Ye=0;Ye<3;++Ye)Ge[4*Xe+Ye]=Ne[Ye];Ge[4*Xe+3]=Rt?255*z(Xe/255,Rt):255*Ne[3]}return u(Ge,[256,256,4],[4,0,1])}(B.colormap,this.opacityscale)),this.texture.generateMipmap());var q=B.cells,te=B.positions;if(te&&q){var ee=[],Q=[],J=[],K=[],X=[],ie=[],se=[],ae=[],ue=[],ve=[],ye=[],pe=[],de=[],me=[];this.cells=q,this.positions=te;var ke=B.vertexNormals,Ce=B.cellNormals,ge=B.vertexNormalsEpsilon===void 0?1e-6:B.vertexNormalsEpsilon,oe=B.faceNormalsEpsilon===void 0?1e-6:B.faceNormalsEpsilon;B.useFacetNormals&&!Ce&&(Ce=l.faceNormals(q,te,oe)),Ce||ke||(ke=l.vertexNormals(q,te,ge));var re=B.vertexColors,fe=B.cellColors,Se=B.meshColor||[1,1,1,1],be=B.vertexUVs,we=B.vertexIntensity,Me=B.cellUVs,Pe=B.cellIntensity,De=1/0,he=-1/0;if(!be&&!Me)if(we)if(B.vertexIntensityBounds)De=+B.vertexIntensityBounds[0],he=+B.vertexIntensityBounds[1];else for(var _e=0;_e<we.length;++_e){var Ae=we[_e];De=Math.min(De,Ae),he=Math.max(he,Ae)}else if(Pe)if(B.cellIntensityBounds)De=+B.cellIntensityBounds[0],he=+B.cellIntensityBounds[1];else for(_e=0;_e<Pe.length;++_e)Ae=Pe[_e],De=Math.min(De,Ae),he=Math.max(he,Ae);else for(_e=0;_e<te.length;++_e)Ae=te[_e][2],De=Math.min(De,Ae),he=Math.max(he,Ae);this.intensity=we||Pe||function(Ot){for(var Rt=Ot.length,Ct=new Array(Rt),Ge=0;Ge<Rt;++Ge)Ct[Ge]=Ot[Ge][2];return Ct}(te),this.pickVertex=!(Pe||fe);var Oe=B.pointSizes,Ee=B.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=0;_e<te.length;++_e)for(var Be=te[_e],Ve=0;Ve<3;++Ve)!isNaN(Be[Ve])&&isFinite(Be[Ve])&&(this.bounds[0][Ve]=Math.min(this.bounds[0][Ve],Be[Ve]),this.bounds[1][Ve]=Math.max(this.bounds[1][Ve],Be[Ve]));var Ze=0,it=0,at=0;e:for(_e=0;_e<q.length;++_e){var gt=q[_e];switch(gt.length){case 1:for(Be=te[pt=gt[0]],Ve=0;Ve<3;++Ve)if(isNaN(Be[Ve])||!isFinite(Be[Ve]))continue e;ve.push(Be[0],Be[1],Be[2]),et=re?re[pt]:fe?fe[_e]:Se,this.opacityscale&&we?Q.push(et[0],et[1],et[2],this.opacity*z((we[pt]-De)/(he-De),this.opacityscale)):et.length===3?ye.push(et[0],et[1],et[2],this.opacity):(ye.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),$e=be?be[pt]:we?[(we[pt]-De)/(he-De),0]:Me?Me[_e]:Pe?[(Pe[_e]-De)/(he-De),0]:[(Be[2]-De)/(he-De),0],pe.push($e[0],$e[1]),Oe?de.push(Oe[pt]):de.push(Ee),me.push(_e),at+=1;break;case 2:for(Ve=0;Ve<2;++Ve){Be=te[pt=gt[Ve]];for(var yt=0;yt<3;++yt)if(isNaN(Be[yt])||!isFinite(Be[yt]))continue e}for(Ve=0;Ve<2;++Ve)Be=te[pt=gt[Ve]],ie.push(Be[0],Be[1],Be[2]),et=re?re[pt]:fe?fe[_e]:Se,this.opacityscale&&we?Q.push(et[0],et[1],et[2],this.opacity*z((we[pt]-De)/(he-De),this.opacityscale)):et.length===3?se.push(et[0],et[1],et[2],this.opacity):(se.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),$e=be?be[pt]:we?[(we[pt]-De)/(he-De),0]:Me?Me[_e]:Pe?[(Pe[_e]-De)/(he-De),0]:[(Be[2]-De)/(he-De),0],ae.push($e[0],$e[1]),ue.push(_e);it+=1;break;case 3:for(Ve=0;Ve<3;++Ve)for(Be=te[pt=gt[Ve]],yt=0;yt<3;++yt)if(isNaN(Be[yt])||!isFinite(Be[yt]))continue e;for(Ve=0;Ve<3;++Ve){var pt,et,$e,At;Be=te[pt=gt[2-Ve]],ee.push(Be[0],Be[1],Be[2]),(et=re?re[pt]:fe?fe[_e]:Se)?this.opacityscale&&we?Q.push(et[0],et[1],et[2],this.opacity*z((we[pt]-De)/(he-De),this.opacityscale)):et.length===3?Q.push(et[0],et[1],et[2],this.opacity):(Q.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)):Q.push(.5,.5,.5,1),$e=be?be[pt]:we?[(we[pt]-De)/(he-De),0]:Me?Me[_e]:Pe?[(Pe[_e]-De)/(he-De),0]:[(Be[2]-De)/(he-De),0],K.push($e[0],$e[1]),At=ke?ke[pt]:Ce[_e],J.push(At[0],At[1],At[2]),X.push(_e)}Ze+=1}}this.pointCount=at,this.edgeCount=it,this.triangleCount=Ze,this.pointPositions.update(ve),this.pointColors.update(ye),this.pointUVs.update(pe),this.pointSizes.update(de),this.pointIds.update(new Uint32Array(me)),this.edgePositions.update(ie),this.edgeColors.update(se),this.edgeUVs.update(ae),this.edgeIds.update(new Uint32Array(ue)),this.trianglePositions.update(ee),this.triangleColors.update(Q),this.triangleUVs.update(K),this.triangleNormals.update(J),this.triangleIds.update(new Uint32Array(X))}},D.drawTransparent=D.draw=function(B){B=B||{};for(var U=this.gl,q=B.model||P,te=B.view||P,ee=B.projection||P,Q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)Q[0][J]=Math.max(Q[0][J],this.clipBounds[0][J]),Q[1][J]=Math.min(Q[1][J],this.clipBounds[1][J]);var K={model:q,view:te,projection:ee,inverseModel:P.slice(),clipBounds:Q,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};K.inverseModel=d(K.inverseModel,K.model),U.disable(U.CULL_FACE),this.texture.bind(0);var X=new Array(16);for(c(X,K.view,K.model),c(X,K.projection,X),d(X,X),J=0;J<3;++J)K.eyePosition[J]=X[12+J]/X[15];var ie,se=X[15];for(J=0;J<3;++J)se+=this.lightPosition[J]*X[4*J+3];for(J=0;J<3;++J){for(var ae=X[12+J],ue=0;ue<3;++ue)ae+=X[4*ue+J]*this.lightPosition[ue];K.lightPosition[J]=ae/se}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=K,this.triangleVAO.bind(),U.drawArrays(U.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=K,this.edgeVAO.bind(),U.lineWidth(this.lineWidth*this.pixelRatio),U.drawArrays(U.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=K,this.pointVAO.bind(),U.drawArrays(U.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=K,this.contourVAO.bind(),U.drawArrays(U.LINES,0,this.contourCount),this.contourVAO.unbind())},D.drawPick=function(B){B=B||{};for(var U=this.gl,q=B.model||P,te=B.view||P,ee=B.projection||P,Q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)Q[0][J]=Math.max(Q[0][J],this.clipBounds[0][J]),Q[1][J]=Math.min(Q[1][J],this.clipBounds[1][J]);this._model=[].slice.call(q),this._view=[].slice.call(te),this._projection=[].slice.call(ee),this._resolution=[U.drawingBufferWidth,U.drawingBufferHeight];var K,X={model:q,view:te,projection:ee,clipBounds:Q,pickId:this.pickId/255};(K=this.pickShader).bind(),K.uniforms=X,this.triangleCount>0&&(this.triangleVAO.bind(),U.drawArrays(U.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),U.lineWidth(this.lineWidth*this.pixelRatio),U.drawArrays(U.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((K=this.pointPickShader).bind(),K.uniforms=X,this.pointVAO.bind(),U.drawArrays(U.POINTS,0,this.pointCount),this.pointVAO.unbind())},D.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var U=B.value[0]+256*B.value[1]+65536*B.value[2],q=this.cells[U],te=this.positions,ee=new Array(q.length),Q=0;Q<q.length;++Q)ee[Q]=te[q[Q]];var J=B.coord[0],K=B.coord[1];if(!this.pickVertex){var X=this.positions[q[0]],ie=this.positions[q[1]],se=this.positions[q[2]],ae=[(X[0]+ie[0]+se[0])/3,(X[1]+ie[1]+se[1])/3,(X[2]+ie[2]+se[2])/3];return{_cellCenter:!0,position:[J,K],index:U,cell:q,cellId:U,intensity:this.intensity[U],dataCoordinate:ae}}var ue=y(ee,[J*this.pixelRatio,this._resolution[1]-K*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ue)return null;var ve=ue[2],ye=0;for(Q=0;Q<q.length;++Q)ye+=ve[Q]*this.intensity[q[Q]];return{position:ue[1],index:q[ue[0]],cell:q,cellId:U,intensity:ye,dataCoordinate:this.positions[q[ue[0]]]}},D.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},f.exports=function(B,U){if(arguments.length===1&&(B=(U=B).gl),!(B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=function(Pe){var De=i(Pe,v.vertex,v.fragment);return De.attributes.position.location=0,De.attributes.color.location=2,De.attributes.uv.location=3,De.attributes.normal.location=4,De}(B),te=function(Pe){var De=i(Pe,_.vertex,_.fragment);return De.attributes.position.location=0,De.attributes.color.location=2,De.attributes.uv.location=3,De}(B),ee=V(B),Q=O(B),J=j(B),K=Y(B),X=o(B,u(new Uint8Array([255,255,255,255]),[1,1,4]));X.generateMipmap(),X.minFilter=B.LINEAR_MIPMAP_LINEAR,X.magFilter=B.LINEAR;var ie=r(B),se=r(B),ae=r(B),ue=r(B),ve=r(B),ye=n(B,[{buffer:ie,type:B.FLOAT,size:3},{buffer:ve,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:B.FLOAT,size:4},{buffer:ae,type:B.FLOAT,size:2},{buffer:ue,type:B.FLOAT,size:3}]),pe=r(B),de=r(B),me=r(B),ke=r(B),Ce=n(B,[{buffer:pe,type:B.FLOAT,size:3},{buffer:ke,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:de,type:B.FLOAT,size:4},{buffer:me,type:B.FLOAT,size:2}]),ge=r(B),oe=r(B),re=r(B),fe=r(B),Se=r(B),be=n(B,[{buffer:ge,type:B.FLOAT,size:3},{buffer:Se,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:B.FLOAT,size:4},{buffer:re,type:B.FLOAT,size:2},{buffer:fe,type:B.FLOAT,size:1}]),we=r(B),Me=new I(B,X,q,te,ee,Q,J,K,ie,ve,se,ae,ue,ye,pe,ke,de,me,Ce,ge,Se,oe,re,fe,be,we,n(B,[{buffer:we,type:B.FLOAT,size:3}]));return Me.update(U),Me}},8120:function(f,s,t){"use strict";f.exports=function(u){var x=u.gl;return new o(u,i(x,[0,0,0,1,1,0,1,1]),r(x,n.boxVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function o(u,x,p){this.plot=u,this.vbo=x,this.shader=p}var l,c,d=o.prototype;d.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},d.drawBox=(l=[0,0],c=[0,0],function(u,x,p,g,m){var y=this.plot,v=this.shader,_=y.gl;l[0]=u,l[1]=x,c[0]=p,c[1]=g,v.uniforms.lo=l,v.uniforms.hi=c,v.uniforms.color=m,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(f,s,t){"use strict";f.exports=function(y){var v=y.gl;return new l(y,i(v),r(v,o.gridVert,o.gridFrag),r(v,o.tickVert,o.gridFrag))};var i=t(2762),r=t(9405),n=t(2478),o=t(3603);function l(y,v,_,h){this.plot=y,this.vbo=v,this.shader=_,this.tickShader=h,this.ticks=[[],[]]}function c(y,v){return y-v}var d,u,x,p,g,m=l.prototype;m.draw=(d=[0,0],u=[0,0],x=[0,0],function(){for(var y=this.plot,v=this.vbo,_=this.shader,h=this.ticks,S=y.gl,A=y._tickBounds,E=y.dataBox,P=y.viewBox,I=y.gridLineWidth,D=y.gridLineColor,z=y.gridLineEnable,V=y.pixelRatio,O=0;O<2;++O){var j=A[O],Y=A[O+2]-j,B=.5*(E[O+2]+E[O]),U=E[O+2]-E[O];u[O]=2*Y/U,d[O]=2*(j-B)/U}_.bind(),v.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=d,_.uniforms.dataScale=u;var q=0;for(O=0;O<2;++O){x[0]=x[1]=0,x[O]=1,_.uniforms.dataAxis=x,_.uniforms.lineWidth=I[O]/(P[O+2]-P[O])*V,_.uniforms.color=D[O];var te=6*h[O].length;z[O]&&te&&S.drawArrays(S.TRIANGLES,q,te),q+=te}}),m.drawTickMarks=function(){var y=[0,0],v=[0,0],_=[1,0],h=[0,1],S=[0,0],A=[0,0];return function(){for(var E=this.plot,P=this.vbo,I=this.tickShader,D=this.ticks,z=E.gl,V=E._tickBounds,O=E.dataBox,j=E.viewBox,Y=E.pixelRatio,B=E.screenBox,U=B[2]-B[0],q=B[3]-B[1],te=j[2]-j[0],ee=j[3]-j[1],Q=0;Q<2;++Q){var J=V[Q],K=V[Q+2]-J,X=.5*(O[Q+2]+O[Q]),ie=O[Q+2]-O[Q];v[Q]=2*K/ie,y[Q]=2*(J-X)/ie}v[0]*=te/U,y[0]*=te/U,v[1]*=ee/q,y[1]*=ee/q,I.bind(),P.bind(),I.attributes.dataCoord.pointer();var se=I.uniforms;se.dataShift=y,se.dataScale=v;var ae=E.tickMarkLength,ue=E.tickMarkWidth,ve=E.tickMarkColor,ye=6*D[0].length,pe=Math.min(n.ge(D[0],(O[0]-V[0])/(V[2]-V[0]),c),D[0].length),de=Math.min(n.gt(D[0],(O[2]-V[0])/(V[2]-V[0]),c),D[0].length),me=0+6*pe,ke=6*Math.max(0,de-pe),Ce=Math.min(n.ge(D[1],(O[1]-V[1])/(V[3]-V[1]),c),D[1].length),ge=Math.min(n.gt(D[1],(O[3]-V[1])/(V[3]-V[1]),c),D[1].length),oe=ye+6*Ce,re=6*Math.max(0,ge-Ce);S[0]=2*(j[0]-ae[1])/U-1,S[1]=(j[3]+j[1])/q-1,A[0]=ae[1]*Y/U,A[1]=ue[1]*Y/q,re&&(se.color=ve[1],se.tickScale=A,se.dataAxis=h,se.screenOffset=S,z.drawArrays(z.TRIANGLES,oe,re)),S[0]=(j[2]+j[0])/U-1,S[1]=2*(j[1]-ae[0])/q-1,A[0]=ue[0]*Y/U,A[1]=ae[0]*Y/q,ke&&(se.color=ve[0],se.tickScale=A,se.dataAxis=_,se.screenOffset=S,z.drawArrays(z.TRIANGLES,me,ke)),S[0]=2*(j[2]+ae[3])/U-1,S[1]=(j[3]+j[1])/q-1,A[0]=ae[3]*Y/U,A[1]=ue[3]*Y/q,re&&(se.color=ve[3],se.tickScale=A,se.dataAxis=h,se.screenOffset=S,z.drawArrays(z.TRIANGLES,oe,re)),S[0]=(j[2]+j[0])/U-1,S[1]=2*(j[3]+ae[2])/q-1,A[0]=ue[2]*Y/U,A[1]=ae[2]*Y/q,ke&&(se.color=ve[2],se.tickScale=A,se.dataAxis=_,se.screenOffset=S,z.drawArrays(z.TRIANGLES,me,ke))}}(),m.update=(p=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(y){for(var v=y.ticks,_=y.bounds,h=new Float32Array(18*(v[0].length+v[1].length)),S=(this.plot.zeroLineEnable,0),A=[[],[]],E=0;E<2;++E)for(var P=A[E],I=v[E],D=_[E],z=_[E+2],V=0;V<I.length;++V){var O=(I[V].x-D)/(z-D);P.push(O);for(var j=0;j<6;++j)h[S++]=O,h[S++]=p[j],h[S++]=g[j]}this.ticks=A,this.vbo.update(h)}),m.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(f,s,t){"use strict";f.exports=function(u){var x=u.gl;return new o(u,i(x,[-1,-1,-1,1,1,-1,1,1]),r(x,n.lineVert,n.lineFrag))};var i=t(2762),r=t(9405),n=t(3603);function o(u,x,p){this.plot=u,this.vbo=x,this.shader=p}var l,c,d=o.prototype;d.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},d.drawLine=(l=[0,0],c=[0,0],function(u,x,p,g,m,y){var v=this.plot,_=this.shader,h=v.gl;l[0]=u,l[1]=x,c[0]=p,c[1]=g,_.uniforms.start=l,_.uniforms.end=c,_.uniforms.width=m*v.pixelRatio,_.uniforms.color=y,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(f,s,t){"use strict";var i=t(3236),r=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);f.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(f,s,t){"use strict";f.exports=function(v){var _=v.gl;return new c(v,i(_),r(_,l.textVert,l.textFrag))};var i=t(2762),r=t(9405),n=t(529),o=t(2478),l=t(3603);function c(v,_,h){this.plot=v,this.vbo=_,this.shader=h,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var d,u,x,p,g,m,y=c.prototype;y.drawTicks=(d=[0,0],u=[0,0],x=[0,0],function(v){var _=this.plot,h=this.shader,S=this.tickX[v],A=this.tickOffset[v],E=_.gl,P=_.viewBox,I=_.dataBox,D=_.screenBox,z=_.pixelRatio,V=_.tickEnable,O=_.tickPad,j=_.tickColor,Y=_.tickAngle,B=_.labelEnable,U=_.labelPad,q=_.labelColor,te=_.labelAngle,ee=this.labelOffset[v],Q=this.labelCount[v],J=o.lt(S,I[v]),K=o.le(S,I[v+2]);d[0]=d[1]=0,d[v]=1,u[v]=(P[2+v]+P[v])/(D[2+v]-D[v])-1;var X=2/D[2+(1^v)]-D[1^v];u[1^v]=X*P[1^v]-1,V[v]&&(u[1^v]-=X*z*O[v],J<K&&A[K]>A[J]&&(h.uniforms.dataAxis=d,h.uniforms.screenOffset=u,h.uniforms.color=j[v],h.uniforms.angle=Y[v],E.drawArrays(E.TRIANGLES,A[J],A[K]-A[J]))),B[v]&&Q&&(u[1^v]-=X*z*U[v],h.uniforms.dataAxis=x,h.uniforms.screenOffset=u,h.uniforms.color=q[v],h.uniforms.angle=te[v],E.drawArrays(E.TRIANGLES,ee,Q)),u[1^v]=X*P[2+(1^v)]-1,V[v+2]&&(u[1^v]+=X*z*O[v+2],J<K&&A[K]>A[J]&&(h.uniforms.dataAxis=d,h.uniforms.screenOffset=u,h.uniforms.color=j[v+2],h.uniforms.angle=Y[v+2],E.drawArrays(E.TRIANGLES,A[J],A[K]-A[J]))),B[v+2]&&Q&&(u[1^v]+=X*z*U[v+2],h.uniforms.dataAxis=x,h.uniforms.screenOffset=u,h.uniforms.color=q[v+2],h.uniforms.angle=te[v+2],E.drawArrays(E.TRIANGLES,ee,Q))}),y.drawTitle=function(){var v=[0,0],_=[0,0];return function(){var h=this.plot,S=this.shader,A=h.gl,E=h.screenBox,P=h.titleCenter,I=h.titleAngle,D=h.titleColor,z=h.pixelRatio;if(this.titleCount){for(var V=0;V<2;++V)_[V]=2*(P[V]*z-E[V])/(E[2+V]-E[V])-1;S.bind(),S.uniforms.dataAxis=v,S.uniforms.screenOffset=_,S.uniforms.angle=I,S.uniforms.color=D,A.drawArrays(A.TRIANGLES,this.titleOffset,this.titleCount)}}}(),y.bind=(p=[0,0],g=[0,0],m=[0,0],function(){var v=this.plot,_=this.shader,h=v._tickBounds,S=v.dataBox,A=v.screenBox,E=v.viewBox;_.bind();for(var P=0;P<2;++P){var I=h[P],D=h[P+2]-I,z=.5*(S[P+2]+S[P]),V=S[P+2]-S[P],O=E[P],j=E[P+2]-O,Y=A[P],B=A[P+2]-Y;g[P]=2*D/V*j/B,p[P]=2*(I-z)/V*j/B}m[1]=2*v.pixelRatio/(A[3]-A[1]),m[0]=m[1]*(A[3]-A[1])/(A[2]-A[0]),_.uniforms.dataScale=g,_.uniforms.dataShift=p,_.uniforms.textScale=m,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),y.update=function(v){var _,h,S,A,E,P=[],I=v.ticks,D=v.bounds;for(E=0;E<2;++E){var z=[Math.floor(P.length/3)],V=[-1/0],O=I[E];for(_=0;_<O.length;++_){var j=O[_],Y=j.x,B=j.text,U=j.font||"sans-serif",q=j.fontStyle||"normal",te=j.fontWeight||"normal",ee=j.fontVariant||"normal";A=j.fontSize||12;for(var Q=1/(D[E+2]-D[E]),J=D[E],K=B.split(`
`),X=0;X<K.length;X++)for(S=n(U,K[X],{fontStyle:q,fontWeight:te,fontVariant:ee}).data,h=0;h<S.length;h+=2)P.push(S[h]*A,-S[h+1]*A-X*A*1.2,(Y-J)*Q);z.push(Math.floor(P.length/3)),V.push(Y)}this.tickOffset[E]=z,this.tickX[E]=V}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(P.length/3),S=n(v.labelFont[E],v.labels[E],{fontStyle:v.labelFontStyle[E],fontWeight:v.labelFontWeight[E],fontVariant:v.labelFontVariant[E],textAlign:"center"}).data,A=v.labelSize[E],_=0;_<S.length;_+=2)P.push(S[_]*A,-S[_+1]*A,0);this.labelCount[E]=Math.floor(P.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(P.length/3),S=n(v.titleFont,v.title,{fontStyle:v.titleFontStyle,fontWeight:v.titleFontWeight,fontVariant:v.titleFontVariant}).data,A=v.titleSize,_=0;_<S.length;_+=2)P.push(S[_]*A,-S[_+1]*A,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},y.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(f,s,t){"use strict";f.exports=function(p){var g=p.gl,m=new c(g,i(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return m.grid=r(m),m.text=n(m),m.line=o(m),m.box=l(m),m.update(p),m};var i=t(3589),r=t(1913),n=t(2142),o=t(4747),l=t(8120);function c(p,g){this.gl=p,this.pickBuffer=g,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var d=c.prototype;function u(p){for(var g=p.slice(),m=0;m<g.length;++m)g[m]=g[m].slice();return g}function x(p,g){return p.x-g.x}d.setDirty=function(){this.dirty=this.pickDirty=!0},d.setOverlayDirty=function(){this.dirty=!0},d.nextDepthValue=function(){return this._depthCounter++/65536},d.draw=function(){var p=this.gl,g=this.screenBox,m=this.viewBox,y=this.dataBox,v=this.pixelRatio,_=this.grid,h=this.line,S=this.text,A=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;p.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),p.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var P=this.backgroundColor;p.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),p.clear(p.COLOR_BUFFER_BIT),_.draw();var I=this.zeroLineEnable,D=this.zeroLineColor,z=this.zeroLineWidth;if(I[0]||I[1]){h.bind();for(var V=0;V<2;++V)if(I[V]&&y[V]<=0&&y[V+2]>=0){var O=g[V]-y[V]*(g[V+2]-g[V])/(y[V+2]-y[V]);V===0?h.drawLine(O,g[1],O,g[3],z[V],D[V]):h.drawLine(g[0],O,g[2],O,z[V],D[V])}}for(V=0;V<A.length;++V)A[V].draw();p.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),h.bind();var j=this.borderLineEnable,Y=this.borderLineWidth,B=this.borderLineColor;for(j[1]&&h.drawLine(m[0],m[1]-.5*Y[1]*v,m[0],m[3]+.5*Y[3]*v,Y[1],B[1]),j[0]&&h.drawLine(m[0]-.5*Y[0]*v,m[1],m[2]+.5*Y[2]*v,m[1],Y[0],B[0]),j[3]&&h.drawLine(m[2],m[1]-.5*Y[1]*v,m[2],m[3]+.5*Y[3]*v,Y[3],B[3]),j[2]&&h.drawLine(m[0]-.5*Y[0]*v,m[3],m[2]+.5*Y[2]*v,m[3],Y[2],B[2]),S.bind(),V=0;V<2;++V)S.drawTicks(V);this.titleEnable&&S.drawTitle();var U=this.overlays;for(V=0;V<U.length;++V)U[V].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}},d.drawPick=function(){if(!this.static){var p=this.pickBuffer;this.gl,this._pickTimeout=null,p.begin();for(var g=1,m=this.objects,y=0;y<m.length;++y)g=m[y].drawPick(g);p.end()}},d.pick=function(p,g){if(!this.static){var m=this.pixelRatio,y=this.pickPixelRatio,v=this.viewBox,_=0|Math.round((p-v[0]/m)*y),h=0|Math.round((g-v[1]/m)*y),S=this.pickBuffer.query(_,h,this.pickRadius);if(!S)return null;for(var A=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,P=0;P<E.length;++P){var I=E[P].pick(_,h,A);if(I)return I}return null}},d.setScreenBox=function(p){var g=this.screenBox,m=this.pixelRatio;g[0]=0|Math.round(p[0]*m),g[1]=0|Math.round(p[1]*m),g[2]=0|Math.round(p[2]*m),g[3]=0|Math.round(p[3]*m),this.setDirty()},d.setDataBox=function(p){var g=this.dataBox;(g[0]!==p[0]||g[1]!==p[1]||g[2]!==p[2]||g[3]!==p[3])&&(g[0]=p[0],g[1]=p[1],g[2]=p[2],g[3]=p[3],this.setDirty())},d.setViewBox=function(p){var g=this.pixelRatio,m=this.viewBox;m[0]=0|Math.round(p[0]*g),m[1]=0|Math.round(p[1]*g),m[2]=0|Math.round(p[2]*g),m[3]=0|Math.round(p[3]*g);var y=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((p[2]-p[0])*y),0|Math.round((p[3]-p[1])*y)],this.setDirty()},d.update=function(p){p=p||{};var g=this.gl;this.pixelRatio=p.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(p.screenBox||[0,0,g.drawingBufferWidth/m,g.drawingBufferHeight/m]),this.screenBox,this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var y=this.viewBox,v=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(p.dataBox||[-10,-10/v,10,10/v]),this.borderColor=p.borderColor!==!1&&(p.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(y[0]+y[2])/m,(y[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=p.ticks||[[],[]],h=this._tickBounds;h[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var S=0;S<2;++S){var A=_[S].slice(0);A.length!==0&&(A.sort(x),h[S]=Math.min(h[S],A[0].x),h[S+2]=Math.max(h[S+2],A[A.length-1].x))}this.grid.update({bounds:h,ticks:_}),this.text.update({bounds:h,ticks:_,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],labelFontStyle:p.labelFontStyle||["normal","normal"],labelFontWeight:p.labelFontWeight||["normal","normal"],labelFontVariant:p.labelFontVariant||["normal","normal"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif",titleFontStyle:p.titleFontStyle||"normal",titleFontWeight:p.titleFontWeight||"normal",titleFontVariant:p.titleFontVariant||"normal"}),this.static=!!p.static,this.setDirty()},d.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();for(this.objects.length=0,p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},d.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},d.removeObject=function(p){for(var g=this.objects,m=0;m<g.length;++m)if(g[m]===p){g.splice(m,1),this.setDirty();break}},d.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},d.removeOverlay=function(p){for(var g=this.overlays,m=0;m<g.length;++m)if(g[m]===p){g.splice(m,1),this.setOverlayDirty();break}}},4437:function(f,s,t){"use strict";f.exports=function(d,u){d=d||document.body;var x=[.01,1/0];"distanceLimits"in(u=u||{})&&(x[0]=u.distanceLimits[0],x[1]=u.distanceLimits[1]),"zoomMin"in u&&(x[0]=u.zoomMin),"zoomMax"in u&&(x[1]=u.zoomMax);var p=r({center:u.center||[0,0,0],up:u.up||[0,1,0],eye:u.eye||[0,0,10],mode:u.mode||"orbit",distanceLimits:x}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,y=d.clientWidth,v=d.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:p,element:d,delay:u.delay||16,rotateSpeed:u.rotateSpeed||1,zoomSpeed:u.zoomSpeed||1,translateSpeed:u.translateSpeed||1,flipX:!!u.flipX,flipY:!!u.flipY,modes:p.modes,_ortho:u._ortho||u.projection&&u.projection.type==="orthographic"||!1,tick:function(){var h=i(),S=this.delay,A=h-2*S;p.idle(h-S),p.recalcMatrix(A),p.flush(h-(100+2*S));for(var E=!0,P=p.computedMatrix,I=0;I<16;++I)E=E&&g[I]===P[I],g[I]=P[I];var D=d.clientWidth===y&&d.clientHeight===v;return y=d.clientWidth,v=d.clientHeight,E?!D:(m=Math.exp(p.computedRadius[0]),!0)},lookAt:function(h,S,A){p.lookAt(p.lastT(),h,S,A)},rotate:function(h,S,A){p.rotate(p.lastT(),h,S,A)},pan:function(h,S,A){p.pan(p.lastT(),h,S,A)},translate:function(h,S,A){p.translate(p.lastT(),h,S,A)}};return Object.defineProperties(_,{matrix:{get:function(){return p.computedMatrix},set:function(h){return p.setMatrix(p.lastT(),h),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(h){var S=p.computedUp.slice(),A=p.computedEye.slice(),E=p.computedCenter.slice();if(p.setMode(h),h==="turntable"){var P=i();p._active.lookAt(P,A,E,S),p._active.lookAt(P+500,A,E,[0,0,1]),p._active.flush(P)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(h){return p.lookAt(p.lastT(),null,h),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(h){return p.lookAt(p.lastT(),h),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(h){return p.lookAt(p.lastT(),null,null,h),p.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(h){return p.setDistance(p.lastT(),h),h},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(x)},set:function(h){return p.setDistanceLimits(h),h},enumerable:!0}}),d.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function h(S,A,E,P){var I=_.keyBindingMode;if(I!==!1){var D=I==="rotate",z=I==="pan",V=I==="zoom",O=!!P.control,j=!!P.alt,Y=!!P.shift,B=!!(1&S),U=!!(2&S),q=!!(4&S),te=1/d.clientHeight,ee=te*(A-_._lastX),Q=te*(E-_._lastY),J=_.flipX?1:-1,K=_.flipY?1:-1,X=Math.PI*_.rotateSpeed,ie=i();if(_._lastX!==-1&&_._lastY!==-1&&((D&&B&&!O&&!j&&!Y||B&&!O&&!j&&Y)&&p.rotate(ie,J*X*ee,-K*X*Q,0),(z&&B&&!O&&!j&&!Y||U||B&&O&&!j&&!Y)&&p.pan(ie,-_.translateSpeed*ee*m,_.translateSpeed*Q*m,0),V&&B&&!O&&!j&&!Y||q||B&&!O&&j&&!Y)){var se=-_.zoomSpeed*Q/window.innerHeight*(ie-p.lastT())*100;p.pan(ie,0,0,m*(Math.exp(se)-1))}return _._lastX=A,_._lastY=E,_._lastMods=P,!0}}_.mouseListener=n(d,h),d.addEventListener("touchstart",function(S){var A=l(S.changedTouches[0],d);h(0,A[0],A[1],_._lastMods),h(1,A[0],A[1],_._lastMods)},!!c&&{passive:!0}),d.addEventListener("touchmove",function(S){var A=l(S.changedTouches[0],d);h(1,A[0],A[1],_._lastMods),S.preventDefault()},!!c&&{passive:!1}),d.addEventListener("touchend",function(S){h(0,_._lastX,_._lastY,_._lastMods)},!!c&&{passive:!0}),_.wheelListener=o(d,function(S,A){if(_.keyBindingMode!==!1&&_.enableWheel){var E=_.flipX?1:-1,P=_.flipY?1:-1,I=i();if(Math.abs(S)>Math.abs(A))p.rotate(I,0,0,-S*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var D=-_.zoomSpeed*P*A/window.innerHeight*(I-p.lastT())/20;p.pan(I,0,0,m*(Math.exp(D)-1))}}},!0)},_.enableMouseListeners(),_};var i=t(3025),r=t(6296),n=t(351),o=t(8512),l=t(24),c=t(7520)},799:function(f,s,t){var i=t(3236),r=t(9405),n=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),o=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);f.exports=function(l){return r(l,n,o,null,[{name:"position",type:"vec2"}])}},4100:function(f,s,t){"use strict";var i=t(4437),r=t(3837),n=t(5445),o=t(4449),l=t(3589),c=t(2260),d=t(7169),u=t(351),x=t(4772),p=t(4040),g=t(799),m=t(9216)({tablet:!0,featureDetect:!0});function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(h){var S=Math.round(Math.log(Math.abs(h))/Math.log(10));if(S<0){var A=Math.round(Math.pow(10,-S));return Math.ceil(h*A)/A}return S>0?(A=Math.round(Math.pow(10,S)),Math.ceil(h/A)*A):Math.ceil(h)}function _(h){return typeof h!="boolean"||h}f.exports={createScene:function(h){(h=h||{}).camera=h.camera||{};var S=h.canvas;S||(S=document.createElement("canvas"),h.container?h.container.appendChild(S):document.body.appendChild(S));var A=h.gl;if(A||(h.glOptions&&(m=!!h.glOptions.preserveDrawingBuffer),A=function(ke,Ce){var ge=null;try{(ge=ke.getContext("webgl",Ce))||(ge=ke.getContext("experimental-webgl",Ce))}catch{return null}return ge}(S,h.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:m})),!A)throw new Error("webgl not supported");var E=h.bounds||[[-10,-10,-10],[10,10,10]],P=new y,I=c(A,A.drawingBufferWidth,A.drawingBufferHeight,{preferFloat:!m}),D=g(A),z=h.cameraObject&&h.cameraObject._ortho===!0||h.camera.projection&&h.camera.projection.type==="orthographic"||!1,V={eye:h.camera.eye||[2,0,0],center:h.camera.center||[0,0,0],up:h.camera.up||[0,1,0],zoomMin:h.camera.zoomMax||.1,zoomMax:h.camera.zoomMin||100,mode:h.camera.mode||"turntable",_ortho:z},O=h.axes||{},j=r(A,O);j.enable=!O.disable;var Y=h.spikes||{},B=o(A,Y),U=[],q=[],te=[],ee=[],Q=!0,J=!0,K={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},X=(J=!0,[A.drawingBufferWidth,A.drawingBufferHeight]),ie=h.cameraObject||i(S,V),se={gl:A,contextLost:!1,pixelRatio:h.pixelRatio||1,canvas:S,selection:P,camera:ie,axes:j,axesPixels:null,spikes:B,bounds:E,objects:U,shape:X,aspect:h.aspectRatio||[1,1,1],pickRadius:h.pickRadius||10,zNear:h.zNear||.01,zFar:h.zFar||1e3,fovy:h.fovy||Math.PI/4,clearColor:h.clearColor||[0,0,0,0],autoResize:_(h.autoResize),autoBounds:_(h.autoBounds),autoScale:!!h.autoScale,autoCenter:_(h.autoCenter),clipToBounds:_(h.clipToBounds),snapToData:!!h.snapToData,onselect:h.onselect||null,onrender:h.onrender||null,onclick:h.onclick||null,cameraParams:K,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ke){this.aspect[0]=ke.x,this.aspect[1]=ke.y,this.aspect[2]=ke.z,J=!0},setBounds:function(ke,Ce){this.bounds[0][ke]=Ce.min,this.bounds[1][ke]=Ce.max},setClearColor:function(ke){this.clearColor=ke},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[A.drawingBufferWidth/se.pixelRatio|0,A.drawingBufferHeight/se.pixelRatio|0];function ue(){if(!se._stopped&&se.autoResize){var ke=S.parentNode,Ce=1,ge=1;ke&&ke!==document.body?(Ce=ke.clientWidth,ge=ke.clientHeight):(Ce=window.innerWidth,ge=window.innerHeight);var oe=0|Math.ceil(Ce*se.pixelRatio),re=0|Math.ceil(ge*se.pixelRatio);if(oe!==S.width||re!==S.height){S.width=oe,S.height=re;var fe=S.style;fe.position=fe.position||"absolute",fe.left="0px",fe.top="0px",fe.width=Ce+"px",fe.height=ge+"px",Q=!0}}}function ve(){for(var ke=U.length,Ce=ee.length,ge=0;ge<Ce;++ge)te[ge]=0;e:for(ge=0;ge<ke;++ge){var oe=U[ge],re=oe.pickSlots;if(re){for(var fe=0;fe<Ce;++fe)if(te[fe]+re<255){q[ge]=fe,oe.setPickBase(te[fe]+1),te[fe]+=re;continue e}var Se=l(A,X);q[ge]=Ce,ee.push(Se),te.push(re),oe.setPickBase(1),Ce+=1}else q[ge]=-1}for(;Ce>0&&te[Ce-1]===0;)te.pop(),ee.pop().dispose()}function ye(){if(se.contextLost)return!0;A.isContextLost()&&(se.contextLost=!0,se.mouseListener.enabled=!1,se.selection.object=null,se.oncontextloss&&se.oncontextloss())}se.autoResize&&ue(),window.addEventListener("resize",ue),se.update=function(ke){se._stopped||(ke=ke||{},Q=!0,J=!0)},se.add=function(ke){se._stopped||(ke.axes=j,U.push(ke),q.push(-1),Q=!0,J=!0,ve())},se.remove=function(ke){if(!se._stopped){var Ce=U.indexOf(ke);Ce<0||(U.splice(Ce,1),q.pop(),Q=!0,J=!0,ve())}},se.dispose=function(){if(!se._stopped&&(se._stopped=!0,window.removeEventListener("resize",ue),S.removeEventListener("webglcontextlost",ye),se.mouseListener.enabled=!1,!se.contextLost)){j.dispose(),B.dispose();for(var ke=0;ke<U.length;++ke)U[ke].dispose();for(I.dispose(),ke=0;ke<ee.length;++ke)ee[ke].dispose();D.dispose(),A=null,j=null,B=null,U=[]}},se._mouseRotating=!1,se._prevButtons=0,se.enableMouseListeners=function(){se.mouseListener=u(S,function(ke,Ce,ge){if(!se._stopped){var oe=ee.length,re=U.length,fe=P.object;P.distance=1/0,P.mouse[0]=Ce,P.mouse[1]=ge,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Se=!1;if(ke&&se._prevButtons)se._mouseRotating=!0;else{se._mouseRotating&&(J=!0),se._mouseRotating=!1;for(var be=0;be<oe;++be){var we=ee[be].query(Ce,ae[1]-ge-1,se.pickRadius);if(we){if(we.distance>P.distance)continue;for(var Me=0;Me<re;++Me){var Pe=U[Me];if(q[Me]===be){var De=Pe.pick(we);De&&(P.buttons=ke,P.screen=we.coord,P.distance=we.distance,P.object=Pe,P.index=De.distance,P.dataPosition=De.position,P.dataCoordinate=De.dataCoordinate,P.data=De,Se=!0)}}}}}fe&&fe!==P.object&&(fe.highlight&&fe.highlight(null),Q=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),Q=!0),(Se=Se||P.object!==fe)&&se.onselect&&se.onselect(P),1&ke&&!(1&se._prevButtons)&&se.onclick&&se.onclick(P),se._prevButtons=ke}})},S.addEventListener("webglcontextlost",ye);var pe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],de=[pe[0].slice(),pe[1].slice()];function me(){if(!ye()){ue();var ke=se.camera.tick();K.view=se.camera.matrix,Q=Q||ke,J=J||ke,j.pixelRatio=se.pixelRatio,B.pixelRatio=se.pixelRatio;var Ce=U.length,ge=pe[0],oe=pe[1];ge[0]=ge[1]=ge[2]=1/0,oe[0]=oe[1]=oe[2]=-1/0;for(var re=0;re<Ce;++re){(Ee=U[re]).pixelRatio=se.pixelRatio,Ee.axes=se.axes,Q=Q||!!Ee.dirty,J=J||!!Ee.dirty;var fe=Ee.bounds;if(fe)for(var Se=fe[0],be=fe[1],we=0;we<3;++we)ge[we]=Math.min(ge[we],Se[we]),oe[we]=Math.max(oe[we],be[we])}var Me=se.bounds;if(se.autoBounds)for(we=0;we<3;++we){if(oe[we]<ge[we])ge[we]=-1,oe[we]=1;else{ge[we]===oe[we]&&(ge[we]-=1,oe[we]+=1);var Pe=.05*(oe[we]-ge[we]);ge[we]=ge[we]-Pe,oe[we]=oe[we]+Pe}Me[0][we]=ge[we],Me[1][we]=oe[we]}var De=!1;for(we=0;we<3;++we)De=De||de[0][we]!==Me[0][we]||de[1][we]!==Me[1][we],de[0][we]=Me[0][we],de[1][we]=Me[1][we];if(J=J||De,Q=Q||De){if(De){var he=[0,0,0];for(re=0;re<3;++re)he[re]=v((Me[1][re]-Me[0][re])/10);j.autoTicks?j.update({bounds:Me,tickSpacing:he}):j.update({bounds:Me})}var _e=A.drawingBufferWidth,Ae=A.drawingBufferHeight;for(X[0]=_e,X[1]=Ae,ae[0]=0|Math.max(_e/se.pixelRatio,1),ae[1]=0|Math.max(Ae/se.pixelRatio,1),function(Be,Ve){var Ze=Be.bounds,it=Be.cameraParams,at=it.projection,gt=it.model,yt=Be.gl.drawingBufferWidth,pt=Be.gl.drawingBufferHeight,et=Be.zNear,$e=Be.zFar,At=Be.fovy,Ot=yt/pt;Ve?(p(at,-Ot,Ot,-1,1,et,$e),it._ortho=!0):(x(at,At,Ot,et,$e),it._ortho=!1);for(var Rt=0;Rt<16;++Rt)gt[Rt]=0;gt[15]=1;var Ct=0;for(Rt=0;Rt<3;++Rt)Ct=Math.max(Ct,Ze[1][Rt]-Ze[0][Rt]);for(Rt=0;Rt<3;++Rt)Be.autoScale?gt[5*Rt]=Be.aspect[Rt]/(Ze[1][Rt]-Ze[0][Rt]):gt[5*Rt]=1/Ct,Be.autoCenter&&(gt[12+Rt]=.5*-gt[5*Rt]*(Ze[0][Rt]+Ze[1][Rt]))}(se,z),re=0;re<Ce;++re)(Ee=U[re]).axesBounds=Me,se.clipToBounds&&(Ee.clipBounds=Me);P.object&&(se.snapToData?B.position=P.dataCoordinate:B.position=P.dataPosition,B.bounds=Me),J&&(J=!1,function(){if(!ye()){A.colorMask(!0,!0,!0,!0),A.depthMask(!0),A.disable(A.BLEND),A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL);for(var Be=U.length,Ve=ee.length,Ze=0;Ze<Ve;++Ze){var it=ee[Ze];it.shape=ae,it.begin();for(var at=0;at<Be;++at)if(q[at]===Ze){var gt=U[at];gt.drawPick&&(gt.pixelRatio=1,gt.drawPick(K))}it.end()}}}()),se.axesPixels=n(se.axes,K,_e,Ae),se.onrender&&se.onrender(),A.bindFramebuffer(A.FRAMEBUFFER,null),A.viewport(0,0,_e,Ae),se.clearRGBA(),A.depthMask(!0),A.colorMask(!0,!0,!0,!0),A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL),A.disable(A.BLEND),A.disable(A.CULL_FACE);var Oe=!1;for(j.enable&&(Oe=Oe||j.isTransparent(),j.draw(K)),B.axes=j,P.object&&B.draw(K),A.disable(A.CULL_FACE),re=0;re<Ce;++re)(Ee=U[re]).axes=j,Ee.pixelRatio=se.pixelRatio,Ee.isOpaque&&Ee.isOpaque()&&Ee.draw(K),Ee.isTransparent&&Ee.isTransparent()&&(Oe=!0);if(Oe){for(I.shape=X,I.bind(),A.clear(A.DEPTH_BUFFER_BIT),A.colorMask(!1,!1,!1,!1),A.depthMask(!0),A.depthFunc(A.LESS),j.enable&&j.isTransparent()&&j.drawTransparent(K),re=0;re<Ce;++re)(Ee=U[re]).isOpaque&&Ee.isOpaque()&&Ee.draw(K);for(A.enable(A.BLEND),A.blendEquation(A.FUNC_ADD),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.colorMask(!0,!0,!0,!0),A.depthMask(!1),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),j.isTransparent()&&j.drawTransparent(K),re=0;re<Ce;++re){var Ee;(Ee=U[re]).isTransparent&&Ee.isTransparent()&&Ee.drawTransparent(K)}A.bindFramebuffer(A.FRAMEBUFFER,null),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.disable(A.DEPTH_TEST),D.bind(),I.color[0].bind(0),D.uniforms.accumBuffer=0,d(A),A.disable(A.BLEND)}for(Q=!1,re=0;re<Ce;++re)U[re].dirty=!1}}}return se.enableMouseListeners(),function ke(){se._stopped||se.contextLost||(me(),requestAnimationFrame(ke))}(),se.redraw=function(){se._stopped||(Q=!0,me())},se},createCamera:i}},6640:function(f,s,t){var i=t(3236);s.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(f,s,t){"use strict";var i=t(9405),r=t(2762),n=t(1888),o=t(6640);function l(x,p,g,m,y){this.plot=x,this.offsetBuffer=p,this.pickBuffer=g,this.shader=m,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}f.exports=function(x,p){var g=x.gl,m=new l(x,r(g),r(g),i(g,o.pointVertex,o.pointFragment),i(g,o.pickVertex,o.pickFragment));return m.update(p),x.addObject(m),m};var c,d,u=l.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(x){var p;function g(A,E){return A in x?x[A]:E}x=x||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var m=x.positions.length>>>1,y=x.positions instanceof Float32Array,v=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=m,_=x.positions,h=y?_:n.mallocFloat32(_.length),S=v?x.idToIndex:n.mallocInt32(m);if(y||h.set(_),!v)for(h.set(_),p=0;p<m;p++)S[p]=p;this.points=_,this.offsetBuffer.update(h),this.pickBuffer.update(S),y||n.free(h),v||n.free(S),this.pointCount=m,this.pickOffset=0},u.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0],function(x){var p=x!==void 0,g=p?this.pickShader:this.shader,m=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return x;var v=y[2]-y[0],_=y[3]-y[1],h=function(P,I){var D,z=0,V=P.length>>>1;for(D=0;D<V;D++){var O=P[2*D],j=P[2*D+1];O>=I[0]&&O<=I[2]&&j>=I[1]&&j<=I[3]&&z++}return z}(this.points,y),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));c[0]=2/v,c[4]=2/_,c[6]=-2*y[0]/v-1,c[7]=-2*y[1]/_-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=c,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=S<5,g.uniforms.pointSize=S,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(d[0]=255&x,d[1]=x>>8&255,d[2]=x>>16&255,d[3]=x>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(m.UNSIGNED_BYTE),g.uniforms.pickOffset=d,this.pickOffset=x);var A=m.getParameter(m.BLEND),E=m.getParameter(m.DITHER);return A&&!this.blend&&m.disable(m.BLEND),E&&m.disable(m.DITHER),m.drawArrays(m.POINTS,0,this.pointCount),A&&!this.blend&&m.enable(m.BLEND),E&&m.enable(m.DITHER),x+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(x,p,g){var m=this.pickOffset,y=this.pointCount;if(g<m||g>=m+y)return null;var v=g-m,_=this.points;return{object:this,pointId:v,dataCoord:[_[2*v],_[2*v+1]]}}},783:function(f){f.exports=function(s,t,i,r){var n,o,l,c,d,u=t[0],x=t[1],p=t[2],g=t[3],m=i[0],y=i[1],v=i[2],_=i[3];return(o=u*m+x*y+p*v+g*_)<0&&(o=-o,m=-m,y=-y,v=-v,_=-_),1-o>1e-6?(n=Math.acos(o),l=Math.sin(n),c=Math.sin((1-r)*n)/l,d=Math.sin(r*n)/l):(c=1-r,d=r),s[0]=c*u+d*m,s[1]=c*x+d*y,s[2]=c*p+d*v,s[3]=c*g+d*_,s}},5964:function(f){"use strict";f.exports=function(s){return s||s===0?s.toString():""}},9366:function(f,s,t){"use strict";var i=t(4359);f.exports=function(n,o,l){var c=[o.style,o.weight,o.variant,o.family].join("_"),d=r[c];if(d||(d=r[c]={}),n in d)return d[n];var u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o.family,fontStyle:o.style,fontWeight:o.weight,fontVariant:o.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},x=i(n,u);u.triangles=!1;var p,g,m=i(n,u);if(l&&l!==1){for(p=0;p<x.positions.length;++p)for(g=0;g<x.positions[p].length;++g)x.positions[p][g]/=l;for(p=0;p<m.positions.length;++p)for(g=0;g<m.positions[p].length;++g)m.positions[p][g]/=l}var y=[[1/0,1/0],[-1/0,-1/0]],v=m.positions.length;for(p=0;p<v;++p){var _=m.positions[p];for(g=0;g<2;++g)y[0][g]=Math.min(y[0][g],_[g]),y[1][g]=Math.max(y[1][g],_[g])}return d[n]=[x,m,y]};var r={}},1283:function(f,s,t){var i=t(9405),r=t(3236),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),o=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),d=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:c,attributes:u},p={vertex:o,fragment:c,attributes:u},g={vertex:l,fragment:c,attributes:u},m={vertex:n,fragment:d,attributes:u},y={vertex:o,fragment:d,attributes:u},v={vertex:l,fragment:d,attributes:u};function _(h,S){var A=i(h,S),E=A.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,A}s.createPerspective=function(h){return _(h,x)},s.createOrtho=function(h){return _(h,p)},s.createProject=function(h){return _(h,g)},s.createPickPerspective=function(h){return _(h,m)},s.createPickOrtho=function(h){return _(h,y)},s.createPickProject=function(h){return _(h,v)}},8418:function(f,s,t){"use strict";var i=t(5219),r=t(2762),n=t(8116),o=t(1888),l=t(6760),c=t(1283),d=t(9366),u=t(5964),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=ArrayBuffer,g=DataView;function m(Q){return Array.isArray(Q)||function(J){return p.isView(J)&&!(J instanceof g)}(Q)}function y(Q,J){var K=Q[0],X=Q[1],ie=Q[2],se=Q[3];return Q[0]=J[0]*K+J[4]*X+J[8]*ie+J[12]*se,Q[1]=J[1]*K+J[5]*X+J[9]*ie+J[13]*se,Q[2]=J[2]*K+J[6]*X+J[10]*ie+J[14]*se,Q[3]=J[3]*K+J[7]*X+J[11]*ie+J[15]*se,Q}function v(Q,J,K,X){return y(X,X),y(X,X),y(X,X)}function _(Q,J){this.index=Q,this.dataCoordinate=this.position=J}function h(Q){return Q===!0||Q>1?1:Q}function S(Q,J,K,X,ie,se,ae,ue,ve,ye,pe,de){this.gl=Q,this.pixelRatio=1,this.shader=J,this.orthoShader=K,this.projectShader=X,this.pointBuffer=ie,this.colorBuffer=se,this.glyphBuffer=ae,this.idBuffer=ue,this.vao=ve,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ye,this.pickOrthoShader=pe,this.pickProjectShader=de,this.points=[],this._selectResult=new _(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}f.exports=function(Q){var J=Q.gl,K=c.createPerspective(J),X=c.createOrtho(J),ie=c.createProject(J),se=c.createPickPerspective(J),ae=c.createPickOrtho(J),ue=c.createPickProject(J),ve=r(J),ye=r(J),pe=r(J),de=r(J),me=new S(J,K,X,ie,ve,ye,pe,de,n(J,[{buffer:ve,size:3,type:J.FLOAT},{buffer:ye,size:4,type:J.FLOAT},{buffer:pe,size:2,type:J.FLOAT},{buffer:de,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),se,ae,ue);return me.update(Q),me};var A=S.prototype;A.pickSlots=1,A.setPickBase=function(Q){this.pickId=Q},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],P=[0,0,0],I=[0,0,0],D=[0,0,0,1],z=[0,0,0,1],V=x.slice(),O=[0,0,0],j=[[0,0,0],[0,0,0]];function Y(Q){return Q[0]=Q[1]=Q[2]=0,Q}function B(Q,J){return Q[0]=J[0],Q[1]=J[1],Q[2]=J[2],Q[3]=1,Q}function U(Q,J,K,X){return Q[0]=J[0],Q[1]=J[1],Q[2]=J[2],Q[K]=X,Q}var q=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function te(Q,J,K,X,ie,se,ae){var ue=K.gl;if((se===K.projectHasAlpha||ae)&&function(ye,pe,de,me){var ke,Ce=pe.axesProject,ge=pe.gl,oe=ye.uniforms,re=de.model||x,fe=de.view||x,Se=de.projection||x,be=pe.axesBounds,we=function(gt){for(var yt=j,pt=0;pt<2;++pt)for(var et=0;et<3;++et)yt[pt][et]=Math.max(Math.min(gt[pt][et],1e8),-1e8);return yt}(pe.clipBounds);ke=pe.axes&&pe.axes.lastCubeProps?pe.axes.lastCubeProps.axis:[1,1,1],E[0]=2/ge.drawingBufferWidth,E[1]=2/ge.drawingBufferHeight,ye.bind(),oe.view=fe,oe.projection=Se,oe.screenSize=E,oe.highlightId=pe.highlightId,oe.highlightScale=pe.highlightScale,oe.clipBounds=we,oe.pickGroup=pe.pickId/255,oe.pixelRatio=me;for(var Me=0;Me<3;++Me)if(Ce[Me]){oe.scale=pe.projectScale[Me],oe.opacity=pe.projectOpacity[Me];for(var Pe=V,De=0;De<16;++De)Pe[De]=0;for(De=0;De<4;++De)Pe[5*De]=1;Pe[5*Me]=0,ke[Me]<0?Pe[12+Me]=be[0][Me]:Pe[12+Me]=be[1][Me],l(Pe,re,Pe),oe.model=Pe;var he=(Me+1)%3,_e=(Me+2)%3,Ae=Y(P),Oe=Y(I);Ae[he]=1,Oe[_e]=1;var Ee=v(0,0,0,B(D,Ae)),Be=v(0,0,0,B(z,Oe));if(Math.abs(Ee[1])>Math.abs(Be[1])){var Ve=Ee;Ee=Be,Be=Ve,Ve=Ae,Ae=Oe,Oe=Ve;var Ze=he;he=_e,_e=Ze}Ee[0]<0&&(Ae[he]=-1),Be[1]>0&&(Oe[_e]=-1);var it=0,at=0;for(De=0;De<4;++De)it+=Math.pow(re[4*he+De],2),at+=Math.pow(re[4*_e+De],2);Ae[he]/=Math.sqrt(it),Oe[_e]/=Math.sqrt(at),oe.axes[0]=Ae,oe.axes[1]=Oe,oe.fragClipBounds[0]=U(O,we[0],Me,-1e8),oe.fragClipBounds[1]=U(O,we[1],Me,1e8),pe.vao.bind(),pe.vao.draw(ge.TRIANGLES,pe.vertexCount),pe.lineWidth>0&&(ge.lineWidth(pe.lineWidth*me),pe.vao.draw(ge.LINES,pe.lineVertexCount,pe.vertexCount)),pe.vao.unbind()}}(J,K,X,ie),se===K.hasAlpha||ae){Q.bind();var ve=Q.uniforms;ve.model=X.model||x,ve.view=X.view||x,ve.projection=X.projection||x,E[0]=2/ue.drawingBufferWidth,E[1]=2/ue.drawingBufferHeight,ve.screenSize=E,ve.highlightId=K.highlightId,ve.highlightScale=K.highlightScale,ve.fragClipBounds=q,ve.clipBounds=K.axes.bounds,ve.opacity=K.opacity,ve.pickGroup=K.pickId/255,ve.pixelRatio=ie,K.vao.bind(),K.vao.draw(ue.TRIANGLES,K.vertexCount),K.lineWidth>0&&(ue.lineWidth(K.lineWidth*ie),K.vao.draw(ue.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}function ee(Q,J,K,X){var ie;ie=m(Q)?J<Q.length?Q[J]:void 0:Q,ie=u(ie);var se=!0;i(ie)&&(ie="\u25BC",se=!1),K||(K={});var ae=K.family;m(ae)&&(ae=ae[J]),ae||(ae="normal");var ue=K.weight;m(ue)&&(ue=ue[J]),ue||(ue="normal");var ve=K.style;m(ve)&&(ve=ve[J]),ve||(ve="normal");var ye=K.variant;m(ye)&&(ye=ye[J]),ye||(ye="normal");var pe=d(ie,{family:ae,weight:ue,style:ve,variant:ye},X);return{mesh:(pe=d(ie,K,X))[0],lines:pe[1],bounds:pe[2],visible:se}}A.draw=function(Q){te(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!1,!1)},A.drawTransparent=function(Q){te(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!0,!1)},A.drawPick=function(Q){te(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Q,1,!0,!0)},A.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;var J=Q.value[2]+(Q.value[1]<<8)+(Q.value[0]<<16);if(J>=this.pointCount||J<0)return null;var K=this.points[J],X=this._selectResult;X.index=J;for(var ie=0;ie<3;++ie)X.position[ie]=X.dataCoordinate[ie]=K[ie];return X},A.highlight=function(Q){if(Q){var J=Q.index,K=255&J,X=J>>8&255,ie=J>>16&255;this.highlightId=[K/255,X/255,ie/255,0]}else this.highlightId=[1,1,1,1]},A.update=function(Q){if("perspective"in(Q=Q||{})&&(this.useOrtho=!Q.perspective),"orthographic"in Q&&(this.useOrtho=!!Q.orthographic),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"project"in Q)if(m(Q.project))this.axesProject=Q.project;else{var J=!!Q.project;this.axesProject=[J,J,J]}if("projectScale"in Q)if(m(Q.projectScale))this.projectScale=Q.projectScale.slice();else{var K=+Q.projectScale;this.projectScale=[K,K,K]}if(this.projectHasAlpha=!1,"projectOpacity"in Q){m(Q.projectOpacity)?this.projectOpacity=Q.projectOpacity.slice():(K=+Q.projectOpacity,this.projectOpacity=[K,K,K]);for(var X=0;X<3;++X)this.projectOpacity[X]=h(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Q&&(this.opacity=h(Q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ie,se,ae=Q.position,ue={family:Q.font||"normal",style:Q.fontStyle||"normal",weight:Q.fontWeight||"normal",variant:Q.fontVariant||"normal"},ve=Q.alignment||[0,0];if(ve.length===2)ie=ve[0],se=ve[1];else for(ie=[],se=[],X=0;X<ve.length;++X)ie[X]=ve[X][0],se[X]=ve[X][1];var ye=[1/0,1/0,1/0],pe=[-1/0,-1/0,-1/0],de=Q.glyph,me=Q.color,ke=Q.size,Ce=Q.angle,ge=Q.lineColor,oe=-1,re=0,fe=0,Se=0;if(ae.length){Se=ae.length;e:for(X=0;X<Se;++X){for(var be=ae[X],we=0;we<3;++we)if(isNaN(be[we])||!isFinite(be[we]))continue e;var Me=(yt=ee(de,X,ue,this.pixelRatio)).mesh,Pe=yt.lines,De=yt.bounds;re+=3*Me.cells.length,fe+=2*Pe.edges.length}}var he=re+fe,_e=o.mallocFloat(3*he),Ae=o.mallocFloat(4*he),Oe=o.mallocFloat(2*he),Ee=o.mallocUint32(he);if(he>0){var Be=0,Ve=re,Ze=[0,0,0,1],it=[0,0,0,1],at=m(me)&&m(me[0]),gt=m(ge)&&m(ge[0]);e:for(X=0;X<Se;++X){for(oe+=1,be=ae[X],we=0;we<3;++we){if(isNaN(be[we])||!isFinite(be[we]))continue e;pe[we]=Math.max(pe[we],be[we]),ye[we]=Math.min(ye[we],be[we])}Me=(yt=ee(de,X,ue,this.pixelRatio)).mesh,Pe=yt.lines,De=yt.bounds;var yt,pt=yt.visible;if(pt)if(m(me)){if((et=at?X<me.length?me[X]:[0,0,0,0]:me).length===3){for(we=0;we<3;++we)Ze[we]=et[we];Ze[3]=1}else if(et.length===4){for(we=0;we<4;++we)Ze[we]=et[we];!this.hasAlpha&&et[3]<1&&(this.hasAlpha=!0)}}else Ze[0]=Ze[1]=Ze[2]=0,Ze[3]=1;else Ze=[1,1,1,0];if(pt)if(m(ge)){var et;if((et=gt?X<ge.length?ge[X]:[0,0,0,0]:ge).length===3){for(we=0;we<3;++we)it[we]=et[we];it[we]=1}else if(et.length===4){for(we=0;we<4;++we)it[we]=et[we];!this.hasAlpha&&et[3]<1&&(this.hasAlpha=!0)}}else it[0]=it[1]=it[2]=0,it[3]=1;else it=[1,1,1,0];var $e=.5;pt?m(ke)?$e=X<ke.length?+ke[X]:12:ke?$e=+ke:this.useOrtho&&($e=12):$e=0;var At=0;m(Ce)?At=X<Ce.length?+Ce[X]:0:Ce&&(At=+Ce);var Ot=Math.cos(At),Rt=Math.sin(At);for(be=ae[X],we=0;we<3;++we)pe[we]=Math.max(pe[we],be[we]),ye[we]=Math.min(ye[we],be[we]);var Ct=ie,Ge=se;Ct=0,m(ie)?Ct=X<ie.length?ie[X]:0:ie&&(Ct=ie),Ge=0,m(se)?Ge=X<se.length?se[X]:0:se&&(Ge=se);var Xe=[Ct*=Ct>0?1-De[0][0]:Ct<0?1+De[1][0]:1,Ge*=Ge>0?1-De[0][1]:Ge<0?1+De[1][1]:1],Ne=Me.cells||[],Ye=Me.positions||[];for(we=0;we<Ne.length;++we)for(var ot=Ne[we],nt=0;nt<3;++nt){for(var ze=0;ze<3;++ze)_e[3*Be+ze]=be[ze];for(ze=0;ze<4;++ze)Ae[4*Be+ze]=Ze[ze];Ee[Be]=oe;var Fe=Ye[ot[nt]];Oe[2*Be]=$e*(Ot*Fe[0]-Rt*Fe[1]+Xe[0]),Oe[2*Be+1]=$e*(Rt*Fe[0]+Ot*Fe[1]+Xe[1]),Be+=1}for(Ne=Pe.edges,Ye=Pe.positions,we=0;we<Ne.length;++we)for(ot=Ne[we],nt=0;nt<2;++nt){for(ze=0;ze<3;++ze)_e[3*Ve+ze]=be[ze];for(ze=0;ze<4;++ze)Ae[4*Ve+ze]=it[ze];Ee[Ve]=oe,Fe=Ye[ot[nt]],Oe[2*Ve]=$e*(Ot*Fe[0]-Rt*Fe[1]+Xe[0]),Oe[2*Ve+1]=$e*(Rt*Fe[0]+Ot*Fe[1]+Xe[1]),Ve+=1}}}this.bounds=[ye,pe],this.points=ae,this.pointCount=ae.length,this.vertexCount=re,this.lineVertexCount=fe,this.pointBuffer.update(_e),this.colorBuffer.update(Ae),this.glyphBuffer.update(Oe),this.idBuffer.update(Ee),o.free(_e),o.free(Ae),o.free(Oe),o.free(Ee)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(f,s,t){"use strict";var i=t(3236);s.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(f,s,t){"use strict";var i=t(9405),r=t(2762),n=t(4298);function o(c,d,u){this.plot=c,this.boxBuffer=d,this.boxShader=u,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}f.exports=function(c,d){var u=c.gl,x=new o(c,r(u,[0,0,0,1,1,0,1,1]),i(u,n.boxVertex,n.boxFragment));return x.update(d),c.addOverlay(x),x};var l=o.prototype;l.draw=function(){if(this.enabled){var c=this.plot,d=this.selectBox,u=this.borderWidth,x=(this.innerFill,this.innerColor),p=(this.outerFill,this.outerColor),g=this.borderColor,m=c.box,y=c.screenBox,v=c.dataBox,_=c.viewBox,h=c.pixelRatio,S=(d[0]-v[0])*(_[2]-_[0])/(v[2]-v[0])+_[0],A=(d[1]-v[1])*(_[3]-_[1])/(v[3]-v[1])+_[1],E=(d[2]-v[0])*(_[2]-_[0])/(v[2]-v[0])+_[0],P=(d[3]-v[1])*(_[3]-_[1])/(v[3]-v[1])+_[1];if(S=Math.max(S,_[0]),A=Math.max(A,_[1]),E=Math.min(E,_[2]),P=Math.min(P,_[3]),!(E<S||P<A)){m.bind();var I=y[2]-y[0],D=y[3]-y[1];if(this.outerFill&&(m.drawBox(0,0,I,A,p),m.drawBox(0,A,S,P,p),m.drawBox(0,P,I,D,p),m.drawBox(E,A,I,P,p)),this.innerFill&&m.drawBox(S,A,E,P,x),u>0){var z=u*h;m.drawBox(S-z,A-z,E+z,A+z,g),m.drawBox(S-z,P-z,E+z,P+z,g),m.drawBox(S-z,A-z,S+z,P+z,g),m.drawBox(E-z,A-z,E+z,P+z,g)}}}},l.update=function(c){c=c||{},this.innerFill=!!c.innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(f,s,t){"use strict";f.exports=function(u,x){var p=x[0],g=x[1];return new c(u,i(u,p,g,{}),r.mallocUint8(p*g*4))};var i=t(2260),r=t(1888),n=t(9618),o=t(8828).nextPow2;function l(u,x,p,g,m){this.coord=[u,x],this.id=p,this.value=g,this.distance=m}function c(u,x,p){this.gl=u,this.fbo=x,this.buffer=p,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(x.bind(),u.readPixels(0,0,x.shape[0],x.shape[1],u.RGBA,u.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var d=c.prototype;Object.defineProperty(d,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(u){if(this.gl){this.fbo.shape=u;var x=this.fbo.shape[0],p=this.fbo.shape[1];if(p*x*4>this.buffer.length){r.free(this.buffer);for(var g=this.buffer=r.mallocUint8(o(p*x*4)),m=0;m<p*x*4;++m)g[m]=255}return u}}}),d.begin=function(){var u=this.gl;this.shape,u&&(this.fbo.bind(),u.clearColor(1,1,1,1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT))},d.end=function(){var u=this.gl;u&&(u.bindFramebuffer(u.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},d.query=function(u,x,p){if(!this.gl)return null;var g=this.fbo.shape.slice();u|=0,x|=0,typeof p!="number"&&(p=1);var m=0|Math.min(Math.max(u-p,0),g[0]),y=0|Math.min(Math.max(u+p,0),g[0]),v=0|Math.min(Math.max(x-p,0),g[1]),_=0|Math.min(Math.max(x+p,0),g[1]);if(y<=m||_<=v)return null;var h=[y-m,_-v],S=n(this.buffer,[h[0],h[1],4],[4,4*g[0],1],4*(m+g[0]*v)),A=function(I,D,z){for(var V=1e8,O=-1,j=-1,Y=I.shape[0],B=I.shape[1],U=0;U<Y;U++)for(var q=0;q<B;q++){var te=I.get(U,q,0),ee=I.get(U,q,1),Q=I.get(U,q,2),J=I.get(U,q,3);if(te<255||ee<255||Q<255||J<255){var K=D-U,X=z-q,ie=K*K+X*X;ie<V&&(V=ie,O=U,j=q)}}return[O,j,V]}(S.hi(h[0],h[1],1),p,p),E=A[0],P=A[1];return E<0||Math.pow(this.radius,2)<A[2]?null:new l(E+m|0,P+v|0,S.get(E,P,0),[S.get(E,P,1),S.get(E,P,2),S.get(E,P,3)],Math.sqrt(A[2]))},d.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(f,s,t){"use strict";var i=t(3327),r=t(8731),n=t(216),o=t(5091),l=t(2145),c=t(8866);function d(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=d.prototype;function x(p,g){return p.name<g.name?-1:1}u.bind=function(){var p;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(g>m)for(p=m;p<g;p++)this.gl.enableVertexAttribArray(p);else if(m>g)for(p=g;p<m;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},u.dispose=function(){for(var p=this.gl.lastAttribCount,g=0;g<p;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(p,g,m,y){if(!g||arguments.length===1){var v=p;p=v.vertex,g=v.fragment,m=v.uniforms,y=v.attributes}var _=this,h=_.gl,S=_._vref;_._vref=o.shader(h,h.VERTEX_SHADER,p),S&&S.dispose(),_.vertShader=_._vref.shader;var A=this._fref;if(_._fref=o.shader(h,h.FRAGMENT_SHADER,g),A&&A.dispose(),_.fragShader=_._fref.shader,!m||!y){var E=h.createProgram();if(h.attachShader(E,_.fragShader),h.attachShader(E,_.vertShader),h.linkProgram(E),!h.getProgramParameter(E,h.LINK_STATUS)){var P=h.getProgramInfoLog(E);throw new c(P,"Error linking program:"+P)}m=m||l.uniforms(h,E),y=y||l.attributes(h,E),h.deleteProgram(E)}(y=y.slice()).sort(x);var I,D=[],z=[],V=[];for(I=0;I<y.length;++I){var O=y[I];if(O.type.indexOf("mat")>=0){for(var j=0|O.type.charAt(O.type.length-1),Y=new Array(j),B=0;B<j;++B)Y[B]=V.length,z.push(O.name+"["+B+"]"),typeof O.location=="number"?V.push(O.location+B):Array.isArray(O.location)&&O.location.length===j&&typeof O.location[B]=="number"?V.push(0|O.location[B]):V.push(-1);D.push({name:O.name,type:O.type,locations:Y})}else D.push({name:O.name,type:O.type,locations:[V.length]}),z.push(O.name),typeof O.location=="number"?V.push(0|O.location):V.push(-1)}var U=0;for(I=0;I<V.length;++I)if(V[I]<0){for(;V.indexOf(U)>=0;)U+=1;V[I]=U}var q=new Array(m.length);function te(){_.program=o.program(h,_._vref,_._fref,z,V);for(var ee=0;ee<m.length;++ee)q[ee]=h.getUniformLocation(_.program,m[ee].name)}te(),_._relink=te,_.types={uniforms:n(m),attributes:n(y)},_.attributes=r(h,_,D,V),Object.defineProperty(_,"uniforms",i(h,_,m,q))},f.exports=function(p,g,m,y,v){var _=new d(p);return _.update(g,m,y,v),_}},8866:function(f){function s(t,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(r?`
`+r:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,f.exports=s},8731:function(f,s,t){"use strict";f.exports=function(d,u,x,p){for(var g={},m=0,y=x.length;m<y;++m){var v=x[m],_=v.name,h=v.type,S=v.locations;switch(h){case"bool":case"int":case"float":l(d,u,S[0],p,1,g,_);break;default:if(h.indexOf("vec")>=0){if((A=h.charCodeAt(h.length-1)-48)<2||A>4)throw new i("","Invalid data type for attribute "+_+": "+h);l(d,u,S[0],p,A,g,_)}else{if(!(h.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+_+": "+h);var A;if((A=h.charCodeAt(h.length-1)-48)<2||A>4)throw new i("","Invalid data type for attribute "+_+": "+h);c(d,u,S,p,A,g,_)}}}return g};var i=t(8866);function r(d,u,x,p,g,m){this._gl=d,this._wrapper=u,this._index=x,this._locations=p,this._dimension=g,this._constFunc=m}var n=r.prototype;n.pointer=function(d,u,x,p){var g=this,m=g._gl,y=g._locations[g._index];m.vertexAttribPointer(y,g._dimension,d||m.FLOAT,!!u,x||0,p||0),m.enableVertexAttribArray(y)},n.set=function(d,u,x,p){return this._constFunc(this._locations[this._index],d,u,x,p)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(d){return d!==this._locations[this._index]&&(this._locations[this._index]=0|d,this._wrapper.program=null),0|d}});var o=[function(d,u,x){return x.length===void 0?d.vertexAttrib1f(u,x):d.vertexAttrib1fv(u,x)},function(d,u,x,p){return x.length===void 0?d.vertexAttrib2f(u,x,p):d.vertexAttrib2fv(u,x)},function(d,u,x,p,g){return x.length===void 0?d.vertexAttrib3f(u,x,p,g):d.vertexAttrib3fv(u,x)},function(d,u,x,p,g,m){return x.length===void 0?d.vertexAttrib4f(u,x,p,g,m):d.vertexAttrib4fv(u,x)}];function l(d,u,x,p,g,m,y){var v=o[g],_=new r(d,u,x,p,g,v);Object.defineProperty(m,y,{set:function(h){return d.disableVertexAttribArray(p[x]),v(d,p[x],h),h},get:function(){return _},enumerable:!0})}function c(d,u,x,p,g,m,y){for(var v=new Array(g),_=new Array(g),h=0;h<g;++h)l(d,u,x[h],p,g,v,h),_[h]=v[h];Object.defineProperty(v,"location",{set:function(E){if(Array.isArray(E))for(var P=0;P<g;++P)_[P].location=E[P];else for(P=0;P<g;++P)_[P].location=E+P;return E},get:function(){for(var E=new Array(g),P=0;P<g;++P)E[P]=p[x[P]];return E},enumerable:!0}),v.pointer=function(E,P,I,D){E=E||d.FLOAT,P=!!P,I=I||g*g,D=D||0;for(var z=0;z<g;++z){var V=p[x[z]];d.vertexAttribPointer(V,g,E,P,I,D+z*g),d.enableVertexAttribArray(V)}};var S=new Array(g),A=d["vertexAttrib"+g+"fv"];Object.defineProperty(m,y,{set:function(E){for(var P=0;P<g;++P){var I=p[x[P]];if(d.disableVertexAttribArray(I),Array.isArray(E[0]))A.call(d,I,E[P]);else{for(var D=0;D<g;++D)S[D]=E[g*P+D];A.call(d,I,S)}}return E},get:function(){return v},enumerable:!0})}},3327:function(f,s,t){"use strict";var i=t(216),r=t(8866);function n(l){return function(){return l}}function o(l,c){for(var d=new Array(l),u=0;u<l;++u)d[u]=c;return d}f.exports=function(l,c,d,u){function x(v){return function(_){for(var h=p("",v),S=0;S<h.length;++S){var A=h[S],E=A[0],P=A[1];if(u[P]){var I=_;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var D=E;if(E.indexOf(".")===0&&(D=E.slice(1)),D.indexOf("]")===D.length-1){var z=D.indexOf("["),V=D.slice(0,z),O=D.slice(z+1,D.length-1);I=V?_[V][O]:_[O]}else I=_[D]}var j,Y=d[P].type;switch(Y){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(u[P],I);break;case"float":l.uniform1f(u[P],I);break;default:var B=Y.indexOf("vec");if(!(0<=B&&B<=1&&Y.length===4+B)){if(Y.indexOf("mat")===0&&Y.length===4){if((j=Y.charCodeAt(Y.length-1)-48)<2||j>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+Y);l["uniformMatrix"+j+"fv"](u[P],!1,I);break}throw new r("","Unknown uniform data type for "+name+": "+Y)}if((j=Y.charCodeAt(Y.length-1)-48)<2||j>4)throw new r("","Invalid data type");switch(Y.charAt(0)){case"b":case"i":l["uniform"+j+"iv"](u[P],I);break;case"v":l["uniform"+j+"fv"](u[P],I);break;default:throw new r("","Unrecognized data type for vector "+name+": "+Y)}}}}}}function p(v,_){if(typeof _!="object")return[[v,_]];var h=[];for(var S in _){var A=_[S],E=v;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof A=="object"?h.push.apply(h,p(E,A)):h.push([E,A])}return h}function g(v,_,h){if(typeof h=="object"){var S=m(h);Object.defineProperty(v,_,{get:n(S),set:x(h),enumerable:!0,configurable:!1})}else u[h]?Object.defineProperty(v,_,{get:(A=h,function(E,P,I){return E.getUniform(P.program,I[A])}),set:x(h),enumerable:!0,configurable:!1}):v[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=E.indexOf("vec");if(0<=P&&P<=1&&E.length===4+P){if((I=E.charCodeAt(E.length-1)-48)<2||I>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?o(I,!1):o(I,0)}if(E.indexOf("mat")===0&&E.length===4){var I;if((I=E.charCodeAt(E.length-1)-48)<2||I>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return o(I*I,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(d[h].type);var A}function m(v){var _;if(Array.isArray(v)){_=new Array(v.length);for(var h=0;h<v.length;++h)g(_,h,v[h])}else for(var S in _={},v)g(_,S,v[S]);return _}var y=i(d,!0);return{get:n(m(y)),set:x(y),enumerable:!0,configurable:!0}}},216:function(f){"use strict";f.exports=function(s,t){for(var i={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),o=i,l=0;l<n.length;++l){var c=n[l].split("[");if(c.length>1){c[0]in o||(o[c[0]]=[]),o=o[c[0]];for(var d=1;d<c.length;++d){var u=parseInt(c[d]);d<c.length-1||l<n.length-1?(u in o||(d<c.length-1?o[u]=[]:o[u]={}),o=o[u]):o[u]=t?r:s[r].type}}else l<n.length-1?(c[0]in o||(o[c[0]]={}),o=o[c[0]]):o[c[0]]=t?r:s[r].type}return i}},2145:function(f,s){"use strict";s.uniforms=function(n,o){for(var l=n.getProgramParameter(o,n.ACTIVE_UNIFORMS),c=[],d=0;d<l;++d){var u=n.getActiveUniform(o,d);if(u){var x=r(n,u.type);if(u.size>1)for(var p=0;p<u.size;++p)c.push({name:u.name.replace("[0]","["+p+"]"),type:x});else c.push({name:u.name,type:x})}}return c},s.attributes=function(n,o){for(var l=n.getProgramParameter(o,n.ACTIVE_ATTRIBUTES),c=[],d=0;d<l;++d){var u=n.getActiveAttrib(o,d);u&&c.push({name:u.name,type:r(n,u.type)})}return c};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(n,o){if(!i){var l=Object.keys(t);i={};for(var c=0;c<l.length;++c){var d=l[c];i[n[d]]=t[d]}}return i[o]}},5091:function(f,s,t){"use strict";s.shader=function(x,p,g){return u(x).getShaderReference(p,g)},s.program=function(x,p,g,m,y){return u(x).getProgram(p,g,m,y)};var i=t(8866),r=t(2992),n=new(typeof WeakMap>"u"?t(606):WeakMap),o=0;function l(x,p,g,m,y,v,_){this.id=x,this.src=p,this.type=g,this.shader=m,this.count=v,this.programs=[],this.cache=_}function c(x){this.gl=x,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,p=x.gl,g=this.programs,m=0,y=g.length;m<y;++m){var v=x.programs[g[m]];v&&(delete x.programs[m],p.deleteProgram(v))}p.deleteShader(this.shader),delete x.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};var d=c.prototype;function u(x){var p=n.get(x);return p||(p=new c(x),n.set(x,p)),p}d.getShaderReference=function(x,p){var g=this.gl,m=this.shaders[x===g.FRAGMENT_SHADER|0],y=m[p];if(y&&g.isShader(y.shader))y.count+=1;else{var v=function(_,h,S){var A=_.createShader(h);if(_.shaderSource(A,S),_.compileShader(A),!_.getShaderParameter(A,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(A);try{var P=r(E,S,h)}catch(I){throw console.warn("Failed to format compiler error: "+I),new i(E,`Error compiling shader:
`+E)}throw new i(E,P.short,P.long)}return A}(g,x,p);y=m[p]=new l(o++,p,x,v,[],1,this)}return y},d.getProgram=function(x,p,g,m){var y=[x.id,p.id,g.join(":"),m.join(":")].join("@"),v=this.programs[y];return v&&this.gl.isProgram(v)||(this.programs[y]=v=function(_,h,S,A,E){var P=_.createProgram();_.attachShader(P,h),_.attachShader(P,S);for(var I=0;I<A.length;++I)_.bindAttribLocation(P,E[I],A[I]);if(_.linkProgram(P),!_.getProgramParameter(P,_.LINK_STATUS)){var D=_.getProgramInfoLog(P);throw new i(D,"Error linking program: "+D)}return P}(this.gl,x.shader,p.shader,g,m),x.programs.push(y),p.programs.push(y)),v}},4098:function(f){"use strict";function s(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}f.exports=function(i,r){var n=new s(i);return n.update(r),i.addOverlay(n),n};var t=s.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,r=this.width,n=this.color,o=this.center,l=this.plot,c=l.line,d=l.dataBox,u=l.viewBox;if(c.bind(),d[0]<=o[0]&&o[0]<=d[2]&&d[1]<=o[1]&&o[1]<=d[3]){var x=u[0]+(o[0]-d[0])/(d[2]-d[0])*(u[2]-u[0]),p=u[1]+(o[1]-d[1])/(d[3]-d[1])*(u[3]-u[1]);i[0]&&c.drawLine(x,p,u[0],p,r[0],n[0]),i[1]&&c.drawLine(x,p,x,u[1],r[1],n[1]),i[2]&&c.drawLine(x,p,u[2],p,r[2],n[2]),i[3]&&c.drawLine(x,p,x,u[3],r[3],n[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(f,s,t){"use strict";var i=t(3236),r=t(9405),n=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),o=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);f.exports=function(l){return r(l,n,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(f,s,t){"use strict";var i=t(2762),r=t(8116),n=t(1493);f.exports=function(p,g){var m=[];function y(A,E,P,I,D,z){var V=[A,E,P,0,0,0,1];V[I+3]=1,V[I]=D,m.push.apply(m,V),V[6]=-1,m.push.apply(m,V),V[I]=z,m.push.apply(m,V),m.push.apply(m,V),V[6]=1,m.push.apply(m,V),V[I]=D,m.push.apply(m,V)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var v=i(p,m),_=r(p,[{type:p.FLOAT,buffer:v,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:v,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:v,size:1,offset:24,stride:28}]),h=n(p);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var S=new l(p,v,_,h);return S.update(g),S};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(p,g,m,y){this.gl=p,this.buffer=g,this.vao=m,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=l.prototype,d=[0,0,0],u=[0,0,0],x=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(p){},c.draw=function(p){var g=this.gl,m=this.vao,y=this.shader;m.bind(),y.bind();var v,_=p.model||o,h=p.view||o,S=p.projection||o;this.axes&&(v=this.axes.lastCubeProps.axis);for(var A=d,E=u,P=0;P<3;++P)v&&v[P]<0?(A[P]=this.bounds[0][P],E[P]=this.bounds[1][P]):(A[P]=this.bounds[1][P],E[P]=this.bounds[0][P]);for(x[0]=g.drawingBufferWidth,x[1]=g.drawingBufferHeight,y.uniforms.model=_,y.uniforms.view=h,y.uniforms.projection=S,y.uniforms.coordinates=[this.position,A,E],y.uniforms.colors=this.colors,y.uniforms.screenShape=x,P=0;P<3;++P)y.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(m.draw(g.TRIANGLES,6,6*P),this.drawSides[P]&&m.draw(g.TRIANGLES,12,18+12*P));m.unbind()},c.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(f,s,t){var i=t(3236),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),o=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:o,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(f,s,t){"use strict";var i=t(2931),r=t(9970),n=["xyz","xzy","yxz","yzx","zxy","zyx"],o=function(x,p){var g,m=x.length;for(g=0;g<m;g++){var y=x[g];if(y===p)return g;if(y>p)return g-1}return g},l=function(x,p,g){return x<p?p:x>g?g:x},c=function(x){var p=1/0;x.sort(function(v,_){return v-_});for(var g=x.length,m=1;m<g;m++){var y=Math.abs(x[m]-x[m-1]);y<p&&(p=y)}return p};f.exports=function(x,p){var g=x.startingPositions,m=x.maxLength||1e3,y=x.tubeSize||1,v=x.absoluteTubeSize,_=x.gridFill||"+x+y+z",h={};_.indexOf("-x")!==-1&&(h.reversedX=!0),_.indexOf("-y")!==-1&&(h.reversedY=!0),_.indexOf("-z")!==-1&&(h.reversedZ=!0),h.filled=n.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(me){return function(ke,Ce,ge){var oe=Ce.vectors,re=Ce.meshgrid,fe=ke[0],Se=ke[1],be=ke[2],we=re[0].length,Me=re[1].length,Pe=re[2].length,De=o(re[0],fe),he=o(re[1],Se),_e=o(re[2],be),Ae=De+1,Oe=he+1,Ee=_e+1;if(De=l(De,0,we-1),Ae=l(Ae,0,we-1),he=l(he,0,Me-1),Oe=l(Oe,0,Me-1),_e=l(_e,0,Pe-1),Ee=l(Ee,0,Pe-1),De<0||he<0||_e<0||Ae>we-1||Oe>Me-1||Ee>Pe-1)return i.create();var Be,Ve,Ze,it,at,gt,yt=re[0][De],pt=re[0][Ae],et=re[1][he],$e=re[1][Oe],At=re[2][_e],Ot=(fe-yt)/(pt-yt),Rt=(Se-et)/($e-et),Ct=(be-At)/(re[2][Ee]-At);switch(isFinite(Ot)||(Ot=.5),isFinite(Rt)||(Rt=.5),isFinite(Ct)||(Ct=.5),ge.reversedX&&(De=we-1-De,Ae=we-1-Ae),ge.reversedY&&(he=Me-1-he,Oe=Me-1-Oe),ge.reversedZ&&(_e=Pe-1-_e,Ee=Pe-1-Ee),ge.filled){case 5:at=_e,gt=Ee,Ze=he*Pe,it=Oe*Pe,Be=De*Pe*Me,Ve=Ae*Pe*Me;break;case 4:at=_e,gt=Ee,Be=De*Pe,Ve=Ae*Pe,Ze=he*Pe*we,it=Oe*Pe*we;break;case 3:Ze=he,it=Oe,at=_e*Me,gt=Ee*Me,Be=De*Me*Pe,Ve=Ae*Me*Pe;break;case 2:Ze=he,it=Oe,Be=De*Me,Ve=Ae*Me,at=_e*Me*we,gt=Ee*Me*we;break;case 1:Be=De,Ve=Ae,at=_e*we,gt=Ee*we,Ze=he*we*Pe,it=Oe*we*Pe;break;default:Be=De,Ve=Ae,Ze=he*we,it=Oe*we,at=_e*we*Me,gt=Ee*we*Me}var Ge=oe[Be+Ze+at],Xe=oe[Be+Ze+gt],Ne=oe[Be+it+at],Ye=oe[Be+it+gt],ot=oe[Ve+Ze+at],nt=oe[Ve+Ze+gt],ze=oe[Ve+it+at],Fe=oe[Ve+it+gt],rt=i.create(),We=i.create(),ft=i.create(),mt=i.create();i.lerp(rt,Ge,ot,Ot),i.lerp(We,Xe,nt,Ot),i.lerp(ft,Ne,ze,Ot),i.lerp(mt,Ye,Fe,Ot);var vt=i.create(),ut=i.create();i.lerp(vt,rt,ft,Rt),i.lerp(ut,We,mt,Rt);var Mt=i.create();return i.lerp(Mt,vt,ut,Ct),Mt}(me,x,h)},A=x.getDivergence||function(me,ke){var Ce=i.create(),ge=1e-4;i.add(Ce,me,[ge,0,0]);var oe=S(Ce);i.subtract(oe,oe,ke),i.scale(oe,oe,1/ge),i.add(Ce,me,[0,ge,0]);var re=S(Ce);i.subtract(re,re,ke),i.scale(re,re,1/ge),i.add(Ce,me,[0,0,ge]);var fe=S(Ce);return i.subtract(fe,fe,ke),i.scale(fe,fe,1/ge),i.add(Ce,oe,re),i.add(Ce,Ce,fe),Ce},E=[],P=p[0][0],I=p[0][1],D=p[0][2],z=p[1][0],V=p[1][1],O=p[1][2],j=function(me){var ke=me[0],Ce=me[1],ge=me[2];return!(ke<P||ke>z||Ce<I||Ce>V||ge<D||ge>O)},Y=10*i.distance(p[0],p[1])/m,B=Y*Y,U=1,q=0,te=g.length;te>1&&(U=function(me){for(var ke=[],Ce=[],ge=[],oe={},re={},fe={},Se=me.length,be=0;be<Se;be++){var we=me[be],Me=we[0],Pe=we[1],De=we[2];oe[Me]||(ke.push(Me),oe[Me]=!0),re[Pe]||(Ce.push(Pe),re[Pe]=!0),fe[De]||(ge.push(De),fe[De]=!0)}var he=c(ke),_e=c(Ce),Ae=c(ge),Oe=Math.min(he,_e,Ae);return isFinite(Oe)?Oe:1}(g));for(var ee=0;ee<te;ee++){var Q=i.create();i.copy(Q,g[ee]);var J=[Q],K=[],X=S(Q),ie=Q;K.push(X);var se=[],ae=A(Q,X),ue=i.length(ae);isFinite(ue)&&ue>q&&(q=ue),se.push(ue),E.push({points:J,velocities:K,divergences:se});for(var ve=0;ve<100*m&&J.length<m&&j(Q);){ve++;var ye=i.clone(X),pe=i.squaredLength(ye);if(pe===0)break;pe>B&&i.scale(ye,ye,Y/Math.sqrt(pe)),i.add(ye,ye,Q),X=S(ye),i.squaredDistance(ie,ye)-B>-1e-4*B&&(J.push(ye),ie=ye,K.push(X),ae=A(ye,X),ue=i.length(ae),isFinite(ue)&&ue>q&&(q=ue),se.push(ue)),Q=ye}}var de=function(me,ke,Ce,ge){for(var oe=0,re=0;re<me.length;re++)for(var fe=me[re].velocities,Se=0;Se<fe.length;Se++)oe=Math.max(oe,i.length(fe[Se]));var be=me.map(function(Be){return function(Ve,Ze,it,at){for(var gt=Ve.points,yt=Ve.velocities,pt=Ve.divergences,et=[],$e=[],At=[],Ot=[],Rt=[],Ct=[],Ge=0,Xe=0,Ne=r.create(),Ye=r.create(),ot=0;ot<gt.length;ot++){var nt=gt[ot],ze=yt[ot],Fe=pt[ot];Ze===0&&(Fe=.05*it),Xe=i.length(ze)/at,Ne=r.create(),i.copy(Ne,ze),Ne[3]=Fe;for(var rt=0;rt<8;rt++)Rt[rt]=[nt[0],nt[1],nt[2],rt];if(Ot.length>0)for(rt=0;rt<8;rt++){var We=(rt+1)%8;et.push(Ot[rt],Rt[rt],Rt[We],Rt[We],Ot[We],Ot[rt]),At.push(Ye,Ne,Ne,Ne,Ye,Ye),Ct.push(Ge,Xe,Xe,Xe,Ge,Ge);var ft=et.length;$e.push([ft-6,ft-5,ft-4],[ft-3,ft-2,ft-1])}var mt=Ot;Ot=Rt,Rt=mt;var vt=Ye;Ye=Ne,Ne=vt;var ut=Ge;Ge=Xe,Xe=ut}return{positions:et,cells:$e,vectors:At,vertexIntensity:Ct}}(Be,Ce,ge,oe)}),we=[],Me=[],Pe=[],De=[];for(re=0;re<be.length;re++){var he=be[re],_e=we.length;for(we=we.concat(he.positions),Pe=Pe.concat(he.vectors),De=De.concat(he.vertexIntensity),Se=0;Se<he.cells.length;Se++){var Ae=he.cells[Se],Oe=[];Me.push(Oe);for(var Ee=0;Ee<Ae.length;Ee++)Oe.push(Ae[Ee]+_e)}}return{positions:we,cells:Me,vectors:Pe,vertexIntensity:De,colormap:ke}}(E,x.colormap,q,U);return v?de.tubeScale=v:(q===0&&(q=1),de.tubeScale=.5*y*U/q),de};var d=t(6740),u=t(6405).createMesh;f.exports.createTubeMesh=function(x,p){return u(x,p,{shaders:d,traceType:"streamtube"})}},990:function(f,s,t){var i=t(9405),r=t(3236),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),o=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(d){var u=i(d,n,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u.attributes.normal.location=2,u},s.createPickShader=function(d){var u=i(d,n,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u.attributes.normal.location=2,u},s.createContourShader=function(d){var u=i(d,l,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u},s.createPickContourShader=function(d){var u=i(d,l,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u}},9499:function(f,s,t){"use strict";f.exports=function(ae){var ue=ae.gl,ve=h(ue),ye=A(ue),pe=S(ue),de=E(ue),me=r(ue),ke=n(ue,[{buffer:me,size:4,stride:P,offset:0},{buffer:me,size:3,stride:P,offset:16},{buffer:me,size:3,stride:P,offset:28}]),Ce=r(ue),ge=n(ue,[{buffer:Ce,size:4,stride:20,offset:0},{buffer:Ce,size:1,stride:20,offset:16}]),oe=r(ue),re=n(ue,[{buffer:oe,size:2,type:ue.FLOAT}]),fe=o(ue,1,O,ue.RGBA,ue.UNSIGNED_BYTE);fe.minFilter=ue.LINEAR,fe.magFilter=ue.LINEAR;var Se=new j(ue,[0,0],[[0,0,0],[0,0,0]],ve,ye,me,ke,fe,pe,de,Ce,ge,oe,re,[0,0,0]),be={levels:[[],[],[]]};for(var we in ae)be[we]=ae[we];return be.colormap=be.colormap||"jet",Se.update(be),Se};var i=t(8828),r=t(2762),n=t(8116),o=t(7766),l=t(1888),c=t(6729),d=t(5298),u=t(9994),x=t(9618),p=t(3711),g=t(6760),m=t(7608),y=t(2478),v=t(6199),_=t(990),h=_.createShader,S=_.createContourShader,A=_.createPickShader,E=_.createPickContourShader,P=40,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],D=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function V(ae,ue,ve,ye,pe){this.position=ae,this.index=ue,this.uv=ve,this.level=ye,this.dataCoordinate=pe}(function(){for(var ae=0;ae<3;++ae){var ue=z[ae],ve=(ae+2)%3;ue[(ae+1)%3+0]=1,ue[ve+3]=1,ue[ae+6]=1}})();var O=256;function j(ae,ue,ve,ye,pe,de,me,ke,Ce,ge,oe,re,fe,Se,be){this.gl=ae,this.shape=ue,this.bounds=ve,this.objectOffset=be,this.intensityBounds=[],this._shader=ye,this._pickShader=pe,this._coordinateBuffer=de,this._vao=me,this._colorMap=ke,this._contourShader=Ce,this._contourPickShader=ge,this._contourBuffer=oe,this._contourVAO=re,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new V([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=fe,this._dynamicVAO=Se,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var Y=j.prototype;Y.genColormap=function(ae,ue){var ve=!1,ye=u([c({colormap:ae,nshades:O,format:"rgba"}).map(function(pe,de){var me=ue?function(ke,Ce){if(!Ce||!Ce.length)return 1;for(var ge=0;ge<Ce.length;++ge){if(Ce.length<2)return 1;if(Ce[ge][0]===ke)return Ce[ge][1];if(Ce[ge][0]>ke&&ge>0){var oe=(Ce[ge][0]-ke)/(Ce[ge][0]-Ce[ge-1][0]);return Ce[ge][1]*(1-oe)+oe*Ce[ge-1][1]}}return 1}(de/255,ue):pe[3];return me<1&&(ve=!0),[pe[0],pe[1],pe[2],255*me]})]);return d.divseq(ye,255),this.hasAlphaScale=ve,ye},Y.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},Y.isOpaque=function(){return!this.isTransparent()},Y.pickSlots=1,Y.setPickBase=function(ae){this.pickId=ae};var B=[0,0,0],U={showSurface:!1,showContour:!1,projections:[I.slice(),I.slice(),I.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(ae,ue){var ve,ye,pe,de=ue.axes&&ue.axes.lastCubeProps.axis||B,me=ue.showSurface,ke=ue.showContour;for(ve=0;ve<3;++ve)for(me=me||ue.surfaceProject[ve],ye=0;ye<3;++ye)ke=ke||ue.contourProject[ve][ye];for(ve=0;ve<3;++ve){var Ce=U.projections[ve];for(ye=0;ye<16;++ye)Ce[ye]=0;for(ye=0;ye<4;++ye)Ce[5*ye]=1;Ce[5*ve]=0,Ce[12+ve]=ue.axesBounds[+(de[ve]>0)][ve],g(Ce,ae.model,Ce);var ge=U.clipBounds[ve];for(pe=0;pe<2;++pe)for(ye=0;ye<3;++ye)ge[pe][ye]=ae.clipBounds[pe][ye];ge[0][ve]=-1e8,ge[1][ve]=1e8}return U.showSurface=me,U.showContour=ke,U}var te={model:I,view:I,projection:I,inverseModel:I.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ee=I.slice(),Q=[1,0,0,0,1,0,0,0,1];function J(ae,ue){ae=ae||{};var ve=this.gl;ve.disable(ve.CULL_FACE),this._colorMap.bind(0);var ye=te;ye.model=ae.model||I,ye.view=ae.view||I,ye.projection=ae.projection||I,ye.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ye.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ye.objectOffset=this.objectOffset,ye.contourColor=this.contourColor[0],ye.inverseModel=m(ye.inverseModel,ye.model);for(var pe=0;pe<2;++pe)for(var de=ye.clipBounds[pe],me=0;me<3;++me)de[me]=Math.min(Math.max(this.clipBounds[pe][me],-1e8),1e8);ye.kambient=this.ambientLight,ye.kdiffuse=this.diffuseLight,ye.kspecular=this.specularLight,ye.roughness=this.roughness,ye.fresnel=this.fresnel,ye.opacity=this.opacity,ye.height=0,ye.permutation=Q,ye.vertexColor=this.vertexColor;var ke=ee;for(g(ke,ye.view,ye.model),g(ke,ye.projection,ke),m(ke,ke),pe=0;pe<3;++pe)ye.eyePosition[pe]=ke[12+pe]/ke[15];var Ce=ke[15];for(pe=0;pe<3;++pe)Ce+=this.lightPosition[pe]*ke[4*pe+3];for(pe=0;pe<3;++pe){var ge=ke[12+pe];for(me=0;me<3;++me)ge+=ke[4*me+pe]*this.lightPosition[me];ye.lightPosition[pe]=ge/Ce}var oe=q(ye,this);if(oe.showSurface){for(this._shader.bind(),this._shader.uniforms=ye,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ve.TRIANGLES,this._vertexCount),pe=0;pe<3;++pe)this.surfaceProject[pe]&&this.vertexCount&&(this._shader.uniforms.model=oe.projections[pe],this._shader.uniforms.clipBounds=oe.clipBounds[pe],this._vao.draw(ve.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var re=this._contourShader;ye.kambient=1,ye.kdiffuse=0,ye.kspecular=0,ye.opacity=1,re.bind(),re.uniforms=ye;var fe=this._contourVAO;for(fe.bind(),pe=0;pe<3;++pe)for(re.uniforms.permutation=z[pe],ve.lineWidth(this.contourWidth[pe]*this.pixelRatio),me=0;me<this.contourLevels[pe].length;++me)me===this.highlightLevel[pe]?(re.uniforms.contourColor=this.highlightColor[pe],re.uniforms.contourTint=this.highlightTint[pe]):me!==0&&me-1!==this.highlightLevel[pe]||(re.uniforms.contourColor=this.contourColor[pe],re.uniforms.contourTint=this.contourTint[pe]),this._contourCounts[pe][me]&&(re.uniforms.height=this.contourLevels[pe][me],fe.draw(ve.LINES,this._contourCounts[pe][me],this._contourOffsets[pe][me]));for(pe=0;pe<3;++pe)for(re.uniforms.model=oe.projections[pe],re.uniforms.clipBounds=oe.clipBounds[pe],me=0;me<3;++me)if(this.contourProject[pe][me]){re.uniforms.permutation=z[me],ve.lineWidth(this.contourWidth[me]*this.pixelRatio);for(var Se=0;Se<this.contourLevels[me].length;++Se)Se===this.highlightLevel[me]?(re.uniforms.contourColor=this.highlightColor[me],re.uniforms.contourTint=this.highlightTint[me]):Se!==0&&Se-1!==this.highlightLevel[me]||(re.uniforms.contourColor=this.contourColor[me],re.uniforms.contourTint=this.contourTint[me]),this._contourCounts[me][Se]&&(re.uniforms.height=this.contourLevels[me][Se],fe.draw(ve.LINES,this._contourCounts[me][Se],this._contourOffsets[me][Se]))}for(fe.unbind(),(fe=this._dynamicVAO).bind(),pe=0;pe<3;++pe)if(this._dynamicCounts[pe]!==0)for(re.uniforms.model=ye.model,re.uniforms.clipBounds=ye.clipBounds,re.uniforms.permutation=z[pe],ve.lineWidth(this.dynamicWidth[pe]*this.pixelRatio),re.uniforms.contourColor=this.dynamicColor[pe],re.uniforms.contourTint=this.dynamicTint[pe],re.uniforms.height=this.dynamicLevel[pe],fe.draw(ve.LINES,this._dynamicCounts[pe],this._dynamicOffsets[pe]),me=0;me<3;++me)this.contourProject[me][pe]&&(re.uniforms.model=oe.projections[me],re.uniforms.clipBounds=oe.clipBounds[me],fe.draw(ve.LINES,this._dynamicCounts[pe],this._dynamicOffsets[pe]));fe.unbind()}}Y.draw=function(ae){return J.call(this,ae,!1)},Y.drawTransparent=function(ae){return J.call(this,ae,!0)};var K={model:I,view:I,projection:I,inverseModel:I,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function X(ae,ue){return Array.isArray(ae)?[ue(ae[0]),ue(ae[1]),ue(ae[2])]:[ue(ae),ue(ae),ue(ae)]}function ie(ae){return Array.isArray(ae)?ae.length===3?[ae[0],ae[1],ae[2],1]:[ae[0],ae[1],ae[2],ae[3]]:[0,0,0,1]}function se(ae){if(Array.isArray(ae)){if(Array.isArray(ae))return[ie(ae[0]),ie(ae[1]),ie(ae[2])];var ue=ie(ae);return[ue.slice(),ue.slice(),ue.slice()]}}Y.drawPick=function(ae){ae=ae||{};var ue=this.gl;ue.disable(ue.CULL_FACE);var ve=K;ve.model=ae.model||I,ve.view=ae.view||I,ve.projection=ae.projection||I,ve.shape=this._field[2].shape,ve.pickId=this.pickId/255,ve.lowerBound=this.bounds[0],ve.upperBound=this.bounds[1],ve.objectOffset=this.objectOffset,ve.permutation=Q;for(var ye=0;ye<2;++ye)for(var pe=ve.clipBounds[ye],de=0;de<3;++de)pe[de]=Math.min(Math.max(this.clipBounds[ye][de],-1e8),1e8);var me=q(ve,this);if(me.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ve,this._vao.bind(),this._vao.draw(ue.TRIANGLES,this._vertexCount),ye=0;ye<3;++ye)this.surfaceProject[ye]&&(this._pickShader.uniforms.model=me.projections[ye],this._pickShader.uniforms.clipBounds=me.clipBounds[ye],this._vao.draw(ue.TRIANGLES,this._vertexCount));this._vao.unbind()}if(me.showContour){var ke=this._contourPickShader;ke.bind(),ke.uniforms=ve;var Ce=this._contourVAO;for(Ce.bind(),de=0;de<3;++de)for(ue.lineWidth(this.contourWidth[de]*this.pixelRatio),ke.uniforms.permutation=z[de],ye=0;ye<this.contourLevels[de].length;++ye)this._contourCounts[de][ye]&&(ke.uniforms.height=this.contourLevels[de][ye],Ce.draw(ue.LINES,this._contourCounts[de][ye],this._contourOffsets[de][ye]));for(ye=0;ye<3;++ye)for(ke.uniforms.model=me.projections[ye],ke.uniforms.clipBounds=me.clipBounds[ye],de=0;de<3;++de)if(this.contourProject[ye][de]){ke.uniforms.permutation=z[de],ue.lineWidth(this.contourWidth[de]*this.pixelRatio);for(var ge=0;ge<this.contourLevels[de].length;++ge)this._contourCounts[de][ge]&&(ke.uniforms.height=this.contourLevels[de][ge],Ce.draw(ue.LINES,this._contourCounts[de][ge],this._contourOffsets[de][ge]))}Ce.unbind()}},Y.pick=function(ae){if(!ae||ae.id!==this.pickId)return null;var ue=this._field[2].shape,ve=this._pickResult,ye=ue[0]*(ae.value[0]+(ae.value[2]>>4)/16)/255,pe=Math.floor(ye),de=ye-pe,me=ue[1]*(ae.value[1]+(15&ae.value[2])/16)/255,ke=Math.floor(me),Ce=me-ke;pe+=1,ke+=1;var ge=ve.position;ge[0]=ge[1]=ge[2]=0;for(var oe=0;oe<2;++oe)for(var re=oe?de:1-de,fe=0;fe<2;++fe)for(var Se=pe+oe,be=ke+fe,we=re*(fe?Ce:1-Ce),Me=0;Me<3;++Me)ge[Me]+=this._field[Me].get(Se,be)*we;for(var Pe=this._pickResult.level,De=0;De<3;++De)if(Pe[De]=y.le(this.contourLevels[De],ge[De]),Pe[De]<0)this.contourLevels[De].length>0&&(Pe[De]=0);else if(Pe[De]<this.contourLevels[De].length-1){var he=this.contourLevels[De][Pe[De]],_e=this.contourLevels[De][Pe[De]+1];Math.abs(he-ge[De])>Math.abs(_e-ge[De])&&(Pe[De]+=1)}for(ve.index[0]=de<.5?pe:pe+1,ve.index[1]=Ce<.5?ke:ke+1,ve.uv[0]=ye/ue[0],ve.uv[1]=me/ue[1],Me=0;Me<3;++Me)ve.dataCoordinate[Me]=this._field[Me].get(ve.index[0],ve.index[1]);return ve},Y.padField=function(ae,ue){var ve=ue.shape.slice(),ye=ae.shape.slice();d.assign(ae.lo(1,1).hi(ve[0],ve[1]),ue),d.assign(ae.lo(1).hi(ve[0],1),ue.hi(ve[0],1)),d.assign(ae.lo(1,ye[1]-1).hi(ve[0],1),ue.lo(0,ve[1]-1).hi(ve[0],1)),d.assign(ae.lo(0,1).hi(1,ve[1]),ue.hi(1)),d.assign(ae.lo(ye[0]-1,1).hi(1,ve[1]),ue.lo(ve[0]-1)),ae.set(0,0,ue.get(0,0)),ae.set(0,ye[1]-1,ue.get(0,ve[1]-1)),ae.set(ye[0]-1,0,ue.get(ve[0]-1,0)),ae.set(ye[0]-1,ye[1]-1,ue.get(ve[0]-1,ve[1]-1))},Y.update=function(ae){ae=ae||{},this.objectOffset=ae.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ae&&(this.contourWidth=X(ae.contourWidth,Number)),"showContour"in ae&&(this.showContour=X(ae.showContour,Boolean)),"showSurface"in ae&&(this.showSurface=!!ae.showSurface),"contourTint"in ae&&(this.contourTint=X(ae.contourTint,Boolean)),"contourColor"in ae&&(this.contourColor=se(ae.contourColor)),"contourProject"in ae&&(this.contourProject=X(ae.contourProject,function(un){return X(un,Boolean)})),"surfaceProject"in ae&&(this.surfaceProject=ae.surfaceProject),"dynamicColor"in ae&&(this.dynamicColor=se(ae.dynamicColor)),"dynamicTint"in ae&&(this.dynamicTint=X(ae.dynamicTint,Number)),"dynamicWidth"in ae&&(this.dynamicWidth=X(ae.dynamicWidth,Number)),"opacity"in ae&&(this.opacity=ae.opacity),"opacityscale"in ae&&(this.opacityscale=ae.opacityscale),"colorBounds"in ae&&(this.colorBounds=ae.colorBounds),"vertexColor"in ae&&(this.vertexColor=ae.vertexColor?1:0),"colormap"in ae&&this._colorMap.setPixels(this.genColormap(ae.colormap,this.opacityscale));var ue=ae.field||ae.coords&&ae.coords[2]||null,ve=!1;if(ue||(ue=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ae||"coords"in ae){var ye=(ue.shape[0]+2)*(ue.shape[1]+2);ye>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(i.nextPow2(ye))),this._field[2]=x(this._field[2].data,[ue.shape[0]+2,ue.shape[1]+2]),this.padField(this._field[2],ue),this.shape=ue.shape.slice();for(var pe=this.shape,de=0;de<2;++de)this._field[2].size>this._field[de].data.length&&(l.freeFloat(this._field[de].data),this._field[de].data=l.mallocFloat(this._field[2].size)),this._field[de]=x(this._field[de].data,[pe[0]+2,pe[1]+2]);if(ae.coords){var me=ae.coords;if(!Array.isArray(me)||me.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(de=0;de<2;++de){var ke=me[de];for(fe=0;fe<2;++fe)if(ke.shape[fe]!==pe[fe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[de],ke)}}else if(ae.ticks){var Ce=ae.ticks;if(!Array.isArray(Ce)||Ce.length!==2)throw new Error("gl-surface: invalid ticks");for(de=0;de<2;++de){var ge=Ce[de];if((Array.isArray(ge)||ge.length)&&(ge=x(ge)),ge.shape[0]!==pe[de])throw new Error("gl-surface: invalid tick length");var oe=x(ge.data,pe);oe.stride[de]=ge.stride[0],oe.stride[1^de]=0,this.padField(this._field[de],oe)}}else{for(de=0;de<2;++de){var re=[0,0];re[de]=1,this._field[de]=x(this._field[de].data,[pe[0]+2,pe[1]+2],re,0)}this._field[0].set(0,0,0);for(var fe=0;fe<pe[0];++fe)this._field[0].set(fe+1,0,fe);for(this._field[0].set(pe[0]+1,0,pe[0]-1),this._field[1].set(0,0,0),fe=0;fe<pe[1];++fe)this._field[1].set(0,fe+1,fe);this._field[1].set(0,pe[1]+1,pe[1]-1)}var Se=this._field,be=x(l.mallocFloat(3*Se[2].size*2),[3,pe[0]+2,pe[1]+2,2]);for(de=0;de<3;++de)v(be.pick(de),Se[de],"mirror");var we=x(l.mallocFloat(3*Se[2].size),[pe[0]+2,pe[1]+2,3]);for(de=0;de<pe[0]+2;++de)for(fe=0;fe<pe[1]+2;++fe){var Me=be.get(0,de,fe,0),Pe=be.get(0,de,fe,1),De=be.get(1,de,fe,0),he=be.get(1,de,fe,1),_e=be.get(2,de,fe,0),Ae=be.get(2,de,fe,1),Oe=De*Ae-he*_e,Ee=_e*Pe-Ae*Me,Be=Me*he-Pe*De,Ve=Math.sqrt(Oe*Oe+Ee*Ee+Be*Be);Ve<1e-8?(Ve=Math.max(Math.abs(Oe),Math.abs(Ee),Math.abs(Be)))<1e-8?(Be=1,Ee=Oe=0,Ve=1):Ve=1/Ve:Ve=1/Math.sqrt(Ve),we.set(de,fe,0,Oe*Ve),we.set(de,fe,1,Ee*Ve),we.set(de,fe,2,Be*Ve)}l.free(be.data);var Ze=[1/0,1/0,1/0],it=[-1/0,-1/0,-1/0],at=1/0,gt=-1/0,yt=(pe[0]-1)*(pe[1]-1)*6,pt=l.mallocFloat(i.nextPow2(10*yt)),et=0,$e=0;for(de=0;de<pe[0]-1;++de)e:for(fe=0;fe<pe[1]-1;++fe){for(var At=0;At<2;++At)for(var Ot=0;Ot<2;++Ot)for(var Rt=0;Rt<3;++Rt){var Ct=this._field[Rt].get(1+de+At,1+fe+Ot);if(isNaN(Ct)||!isFinite(Ct))continue e}for(Rt=0;Rt<6;++Rt){var Ge=de+D[Rt][0],Xe=fe+D[Rt][1],Ne=this._field[0].get(Ge+1,Xe+1),Ye=this._field[1].get(Ge+1,Xe+1);Ct=this._field[2].get(Ge+1,Xe+1),Oe=we.get(Ge+1,Xe+1,0),Ee=we.get(Ge+1,Xe+1,1),Be=we.get(Ge+1,Xe+1,2),ae.intensity&&(ot=ae.intensity.get(Ge,Xe));var ot=ae.intensity?ae.intensity.get(Ge,Xe):Ct+this.objectOffset[2];pt[et++]=Ge,pt[et++]=Xe,pt[et++]=Ne,pt[et++]=Ye,pt[et++]=Ct,pt[et++]=0,pt[et++]=ot,pt[et++]=Oe,pt[et++]=Ee,pt[et++]=Be,Ze[0]=Math.min(Ze[0],Ne+this.objectOffset[0]),Ze[1]=Math.min(Ze[1],Ye+this.objectOffset[1]),Ze[2]=Math.min(Ze[2],Ct+this.objectOffset[2]),at=Math.min(at,ot),it[0]=Math.max(it[0],Ne+this.objectOffset[0]),it[1]=Math.max(it[1],Ye+this.objectOffset[1]),it[2]=Math.max(it[2],Ct+this.objectOffset[2]),gt=Math.max(gt,ot),$e+=1}}for(ae.intensityBounds&&(at=+ae.intensityBounds[0],gt=+ae.intensityBounds[1]),de=6;de<et;de+=10)pt[de]=(pt[de]-at)/(gt-at);this._vertexCount=$e,this._coordinateBuffer.update(pt.subarray(0,et)),l.freeFloat(pt),l.free(we.data),this.bounds=[Ze,it],this.intensity=ae.intensity||this._field[2],this.intensityBounds[0]===at&&this.intensityBounds[1]===gt||(ve=!0),this.intensityBounds=[at,gt]}if("levels"in ae){var nt=ae.levels;for(nt=Array.isArray(nt[0])?nt.slice():[[],[],nt],de=0;de<3;++de)nt[de]=nt[de].slice(),nt[de].sort(function(un,nn){return un-nn});for(de=0;de<3;++de)for(fe=0;fe<nt[de].length;++fe)nt[de][fe]-=this.objectOffset[de];e:for(de=0;de<3;++de){if(nt[de].length!==this.contourLevels[de].length){ve=!0;break}for(fe=0;fe<nt[de].length;++fe)if(nt[de][fe]!==this.contourLevels[de][fe]){ve=!0;break e}}this.contourLevels=nt}if(ve){Se=this._field,pe=this.shape;for(var ze=[],Fe=0;Fe<3;++Fe){var rt=this.contourLevels[Fe],We=[],ft=[],mt=[0,0,0];for(de=0;de<rt.length;++de){var vt=p(this._field[Fe],rt[de]);We.push(ze.length/5|0),$e=0;e:for(fe=0;fe<vt.cells.length;++fe){var ut=vt.cells[fe];for(Rt=0;Rt<2;++Rt){var Mt=vt.positions[ut[Rt]],bt=Mt[0],St=0|Math.floor(bt),Pt=bt-St,Dt=Mt[1],Ft=0|Math.floor(Dt),Xt=Dt-Ft,an=!1;t:for(var Ht=0;Ht<3;++Ht){mt[Ht]=0;var Zt=(Fe+Ht+1)%3;for(At=0;At<2;++At){var jt=At?Pt:1-Pt;for(Ge=0|Math.min(Math.max(St+At,0),pe[0]),Ot=0;Ot<2;++Ot){var Pn=Ot?Xt:1-Xt;if(Xe=0|Math.min(Math.max(Ft+Ot,0),pe[1]),Ct=Ht<2?this._field[Zt].get(Ge,Xe):(this.intensity.get(Ge,Xe)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ct)||isNaN(Ct)){an=!0;break t}var Tn=jt*Pn;mt[Ht]+=Tn*Ct}}}if(an){if(Rt>0){for(var mn=0;mn<5;++mn)ze.pop();$e-=1}continue e}ze.push(mt[0],mt[1],Mt[0],Mt[1],mt[2]),$e+=1}}ft.push($e)}this._contourOffsets[Fe]=We,this._contourCounts[Fe]=ft}var Qt=l.mallocFloat(ze.length);for(de=0;de<ze.length;++de)Qt[de]=ze[de];this._contourBuffer.update(Qt),l.freeFloat(Qt)}},Y.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ae=0;ae<3;++ae)l.freeFloat(this._field[ae].data)},Y.highlight=function(ae){var ue,ve;if(!ae)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ue=0;ue<3;++ue)this.enableHighlight[ue]?this.highlightLevel[ue]=ae.level[ue]:this.highlightLevel[ue]=-1;for(ve=this.snapToData?ae.dataCoordinate:ae.position,ue=0;ue<3;++ue)ve[ue]-=this.objectOffset[ue];if(this.enableDynamic[0]&&ve[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ve[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ve[2]!==this.dynamicLevel[2]){for(var ye=0,pe=this.shape,de=l.mallocFloat(12*pe[0]*pe[1]),me=0;me<3;++me)if(this.enableDynamic[me]){this.dynamicLevel[me]=ve[me];var ke=(me+1)%3,Ce=(me+2)%3,ge=this._field[me],oe=this._field[ke],re=this._field[Ce],fe=p(ge,ve[me]),Se=fe.cells,be=fe.positions;for(this._dynamicOffsets[me]=ye,ue=0;ue<Se.length;++ue)for(var we=Se[ue],Me=0;Me<2;++Me){var Pe=be[we[Me]],De=+Pe[0],he=0|De,_e=0|Math.min(he+1,pe[0]),Ae=De-he,Oe=1-Ae,Ee=+Pe[1],Be=0|Ee,Ve=0|Math.min(Be+1,pe[1]),Ze=Ee-Be,it=1-Ze,at=Oe*it,gt=Oe*Ze,yt=Ae*it,pt=Ae*Ze,et=at*oe.get(he,Be)+gt*oe.get(he,Ve)+yt*oe.get(_e,Be)+pt*oe.get(_e,Ve),$e=at*re.get(he,Be)+gt*re.get(he,Ve)+yt*re.get(_e,Be)+pt*re.get(_e,Ve);if(isNaN(et)||isNaN($e)){Me&&(ye-=1);break}de[2*ye+0]=et,de[2*ye+1]=$e,ye+=1}this._dynamicCounts[me]=ye-this._dynamicOffsets[me]}else this.dynamicLevel[me]=NaN,this._dynamicCounts[me]=0;this._dynamicBuffer.update(de.subarray(0,2*ye)),l.freeFloat(de)}}},7766:function(f,s,t){"use strict";var i=t(9618),r=t(5298),n=t(1888);f.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||function(A){o=[A.LINEAR,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_NEAREST],l=[A.NEAREST,A.LINEAR,A.NEAREST_MIPMAP_NEAREST,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_LINEAR],c=[A.REPEAT,A.CLAMP_TO_EDGE,A.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return v(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],S=d(h)?h:h.raw;if(S)return function(A,E,P,I,D,z){var V=y(A);return A.texImage2D(A.TEXTURE_2D,0,D,D,z,E),new p(A,V,P,I,D,z)}(_,S,0|h.width,0|h.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return function(A,E){var P=E.dtype,I=E.shape.slice(),D=A.getParameter(A.MAX_TEXTURE_SIZE);if(I[0]<0||I[0]>D||I[1]<0||I[1]>D)throw new Error("gl-texture2d: Invalid texture size");var z=m(I,E.stride.slice()),V=0;P==="float32"?V=A.FLOAT:P==="float64"?(V=A.FLOAT,z=!1,P="float32"):P==="uint8"?V=A.UNSIGNED_BYTE:(V=A.UNSIGNED_BYTE,z=!1,P="uint8");var O,j,Y=0;if(I.length===2)Y=A.LUMINANCE,I=[I[0],I[1],1],E=i(E.data,I,[E.stride[0],E.stride[1],1],E.offset);else{if(I.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(I[2]===1)Y=A.ALPHA;else if(I[2]===2)Y=A.LUMINANCE_ALPHA;else if(I[2]===3)Y=A.RGB;else{if(I[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");Y=A.RGBA}}V!==A.FLOAT||A.getExtension("OES_texture_float")||(V=A.UNSIGNED_BYTE,z=!1);var B=E.size;if(z)O=E.offset===0&&E.data.length===B?E.data:E.data.subarray(E.offset,E.offset+B);else{var U=[I[2],I[2]*I[0],1];j=n.malloc(B,P);var q=i(j,I,U,0);P!=="float32"&&P!=="float64"||V!==A.UNSIGNED_BYTE?r.assign(q,E):u(q,E),O=j.subarray(0,B)}var te=y(A);return A.texImage2D(A.TEXTURE_2D,0,Y,I[0],I[1],0,Y,V,O),z||n.free(j),new p(A,te,I[0],I[1],Y,V)}(_,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,l=null,c=null;function d(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var u=function(_,h){r.muls(_,h,255)};function x(_,h,S){var A=_.gl,E=A.getParameter(A.MAX_TEXTURE_SIZE);if(h<0||h>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[h,S],_.bind(),A.texImage2D(A.TEXTURE_2D,0,_.format,h,S,0,_.format,_.type,null),_._mipLevels=[0],_}function p(_,h,S,A,E,P){this.gl=_,this.handle=h,this.format=E,this.type=P,this._shape=[S,A],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var I=this,D=[this._wrapS,this._wrapT];Object.defineProperties(D,[{get:function(){return I._wrapS},set:function(V){return I.wrapS=V}},{get:function(){return I._wrapT},set:function(V){return I.wrapT=V}}]),this._wrapVector=D;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return I._shape[0]},set:function(V){return I.width=V}},{get:function(){return I._shape[1]},set:function(V){return I.height=V}}]),this._shapeVector=z}var g=p.prototype;function m(_,h){return _.length===3?h[2]===1&&h[1]===_[0]*_[2]&&h[0]===_[2]:h[0]===1&&h[1]===_[0]}function y(_){var h=_.createTexture();return _.bindTexture(_.TEXTURE_2D,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),h}function v(_,h,S,A,E){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(h<0||h>P||S<0||S>P)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var I=y(_);return _.texImage2D(_.TEXTURE_2D,0,A,h,S,0,A,E,null),new p(_,I,h,S,A,E)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&o.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&o.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var h=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),h!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(c.indexOf(_[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return x(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_}}}),g.bind=function(_){var h=this.gl;return _!==void 0&&h.activeTexture(h.TEXTURE0+(0|_)),h.bindTexture(h.TEXTURE_2D,this.handle),_!==void 0?0|_:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),h=0;_>0;++h,_>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},g.setPixels=function(_,h,S,A){var E=this.gl;this.bind(),Array.isArray(h)?(A=S,S=0|h[1],h=0|h[0]):(h=h||0,S=S||0),A=A||0;var P=d(_)?_:_.raw;if(P)this._mipLevels.indexOf(A)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(A)):E.texSubImage2D(E.TEXTURE_2D,A,h,S,this.format,this.type,P);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||h+_.shape[1]>this._shape[1]>>>A||S+_.shape[0]>this._shape[0]>>>A||h<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(I,D,z,V,O,j,Y,B){var U=B.dtype,q=B.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,ee=0,Q=m(q,B.stride.slice());if(U==="float32"?te=I.FLOAT:U==="float64"?(te=I.FLOAT,Q=!1,U="float32"):U==="uint8"?te=I.UNSIGNED_BYTE:(te=I.UNSIGNED_BYTE,Q=!1,U="uint8"),q.length===2)ee=I.LUMINANCE,q=[q[0],q[1],1],B=i(B.data,q,[B.stride[0],B.stride[1],1],B.offset);else{if(q.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(q[2]===1)ee=I.ALPHA;else if(q[2]===2)ee=I.LUMINANCE_ALPHA;else if(q[2]===3)ee=I.RGB;else{if(q[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");ee=I.RGBA}q[2]}if(ee!==I.LUMINANCE&&ee!==I.ALPHA||O!==I.LUMINANCE&&O!==I.ALPHA||(ee=O),ee!==O)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var J=B.size,K=Y.indexOf(V)<0;if(K&&Y.push(V),te===j&&Q)B.offset===0&&B.data.length===J?K?I.texImage2D(I.TEXTURE_2D,V,O,q[0],q[1],0,O,j,B.data):I.texSubImage2D(I.TEXTURE_2D,V,D,z,q[0],q[1],O,j,B.data):K?I.texImage2D(I.TEXTURE_2D,V,O,q[0],q[1],0,O,j,B.data.subarray(B.offset,B.offset+J)):I.texSubImage2D(I.TEXTURE_2D,V,D,z,q[0],q[1],O,j,B.data.subarray(B.offset,B.offset+J));else{var X;X=j===I.FLOAT?n.mallocFloat32(J):n.mallocUint8(J);var ie=i(X,q,[q[2],q[2]*q[0],1]);te===I.FLOAT&&j===I.UNSIGNED_BYTE?u(ie,B):r.assign(ie,B),K?I.texImage2D(I.TEXTURE_2D,V,O,q[0],q[1],0,O,j,X.subarray(0,J)):I.texSubImage2D(I.TEXTURE_2D,V,D,z,q[0],q[1],O,j,X.subarray(0,J)),j===I.FLOAT?n.freeFloat32(X):n.freeUint8(X)}})(E,h,S,A,this.format,this.type,this._mipLevels,_)}}},1433:function(f){"use strict";f.exports=function(s,t,i){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<i.length;++n){var o=i[n];if(o.buffer){var l=o.buffer,c=o.size||4,d=o.type||s.FLOAT,u=!!o.normalized,x=o.stride||0,p=o.offset||0;l.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,c,d,u,x,p)}else{if(typeof o=="number")s.vertexAttrib1f(n,o);else if(o.length===1)s.vertexAttrib1f(n,o[0]);else if(o.length===2)s.vertexAttrib2f(n,o[0],o[1]);else if(o.length===3)s.vertexAttrib3f(n,o[0],o[1],o[2]);else{if(o.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,o[0],o[1],o[2],o[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},870:function(f,s,t){"use strict";var i=t(1433);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,o,l){this._elements=o,this._attributes=n,this._elementsType=l||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,o,l){l=l||0;var c=this.gl;this._elements?c.drawElements(n,o,this._elementsType,l):c.drawArrays(n,l,o)},f.exports=function(n){return new r(n)}},7518:function(f,s,t){"use strict";var i=t(1433);function r(o,l,c,d,u,x){this.location=o,this.dimension=l,this.a=c,this.b=d,this.c=u,this.d=x}function n(o,l,c){this.gl=o,this._ext=l,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}r.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(o,l,c){if(this.bind(),i(this.gl,l,o),this.unbind(),this._attribs.length=0,o)for(var d=0;d<o.length;++d){var u=o[d];typeof u=="number"?this._attribs.push(new r(d,1,u)):Array.isArray(u)&&this._attribs.push(new r(d,u.length,u[0],u[1],u[2],u[3]))}this._useElements=!!l,this._elementsType=c||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(o,l,c){c=c||0;var d=this.gl;this._useElements?d.drawElements(o,l,this._elementsType,c):d.drawArrays(o,c,l)},f.exports=function(o,l){return new n(o,l,l.createVertexArrayOES())}},8116:function(f,s,t){"use strict";var i=t(7518),r=t(870);function n(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}f.exports=function(o,l,c,d){var u,x=o.createVertexArray?new n(o):o.getExtension("OES_vertex_array_object");return(u=x?i(o,x):r(o)).update(l,c,d),u}},5632:function(f){f.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s}},8192:function(f,s,t){f.exports=function(o,l){var c=i(o[0],o[1],o[2]),d=i(l[0],l[1],l[2]);r(c,c),r(d,d);var u=n(c,d);return u>1?0:Math.acos(u)};var i=t(2825),r=t(3536),n=t(244)},9226:function(f){f.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},3126:function(f){f.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},3990:function(f){f.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},1091:function(f){f.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},5911:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],l=i[0],c=i[1],d=i[2];return s[0]=n*d-o*c,s[1]=o*l-r*d,s[2]=r*c-n*l,s}},5455:function(f,s,t){f.exports=t(7056)},7056:function(f){f.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return Math.sqrt(i*i+r*r+n*n)}},4008:function(f,s,t){f.exports=t(6690)},6690:function(f){f.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s}},244:function(f){f.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},2613:function(f){f.exports=1e-6},9922:function(f,s,t){f.exports=function(r,n){var o=r[0],l=r[1],c=r[2],d=n[0],u=n[1],x=n[2];return Math.abs(o-d)<=i*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(l-u)<=i*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(c-x)<=i*Math.max(1,Math.abs(c),Math.abs(x))};var i=t(2613)},9265:function(f){f.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},2681:function(f){f.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},5137:function(f,s,t){f.exports=function(r,n,o,l,c,d){var u,x;for(n||(n=3),o||(o=0),x=l?Math.min(l*n+o,r.length):r.length,u=o;u<x;u+=n)i[0]=r[u],i[1]=r[u+1],i[2]=r[u+2],c(i,i,d),r[u]=i[0],r[u+1]=i[1],r[u+2]=i[2];return r};var i=t(1091)()},2825:function(f){f.exports=function(s,t,i){var r=new Float32Array(3);return r[0]=s,r[1]=t,r[2]=i,r}},2931:function(f,s,t){f.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(f){f.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},868:function(f,s,t){f.exports=t(1387)},1387:function(f){f.exports=function(s){var t=s[0],i=s[1],r=s[2];return Math.sqrt(t*t+i*i+r*r)}},6658:function(f){f.exports=function(s,t,i,r){var n=t[0],o=t[1],l=t[2];return s[0]=n+r*(i[0]-n),s[1]=o+r*(i[1]-o),s[2]=l+r*(i[2]-l),s}},7417:function(f){f.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s}},8107:function(f){f.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s}},4505:function(f,s,t){f.exports=t(5847)},5847:function(f){f.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s}},5093:function(f){f.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},3536:function(f){f.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),s[0]=t[0]*o,s[1]=t[1]*o,s[2]=t[2]*o),s}},7636:function(f){f.exports=function(s,t){t=t||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*t;return s[0]=Math.cos(i)*n,s[1]=Math.sin(i)*n,s[2]=r*t,s}},6894:function(f){f.exports=function(s,t,i,r){var n=i[1],o=i[2],l=t[1]-n,c=t[2]-o,d=Math.sin(r),u=Math.cos(r);return s[0]=t[0],s[1]=n+l*u-c*d,s[2]=o+l*d+c*u,s}},109:function(f){f.exports=function(s,t,i,r){var n=i[0],o=i[2],l=t[0]-n,c=t[2]-o,d=Math.sin(r),u=Math.cos(r);return s[0]=n+c*d+l*u,s[1]=t[1],s[2]=o+c*u-l*d,s}},8692:function(f){f.exports=function(s,t,i,r){var n=i[0],o=i[1],l=t[0]-n,c=t[1]-o,d=Math.sin(r),u=Math.cos(r);return s[0]=n+l*u-c*d,s[1]=o+l*d+c*u,s[2]=t[2],s}},2447:function(f){f.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},6621:function(f){f.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s}},8489:function(f){f.exports=function(s,t,i,r){return s[0]=t[0]+i[0]*r,s[1]=t[1]+i[1]*r,s[2]=t[2]+i[2]*r,s}},1463:function(f){f.exports=function(s,t,i,r){return s[0]=t,s[1]=i,s[2]=r,s}},6141:function(f,s,t){f.exports=t(2953)},5486:function(f,s,t){f.exports=t(3066)},2953:function(f){f.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2];return i*i+r*r+n*n}},3066:function(f){f.exports=function(s){var t=s[0],i=s[1],r=s[2];return t*t+i*i+r*r}},2229:function(f,s,t){f.exports=t(6843)},6843:function(f){f.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s}},492:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2];return s[0]=r*i[0]+n*i[3]+o*i[6],s[1]=r*i[1]+n*i[4]+o*i[7],s[2]=r*i[2]+n*i[5]+o*i[8],s}},5673:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],l=i[3]*r+i[7]*n+i[11]*o+i[15];return l=l||1,s[0]=(i[0]*r+i[4]*n+i[8]*o+i[12])/l,s[1]=(i[1]*r+i[5]*n+i[9]*o+i[13])/l,s[2]=(i[2]*r+i[6]*n+i[10]*o+i[14])/l,s}},264:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],l=i[0],c=i[1],d=i[2],u=i[3],x=u*r+c*o-d*n,p=u*n+d*r-l*o,g=u*o+l*n-c*r,m=-l*r-c*n-d*o;return s[0]=x*u+m*-l+p*-d-g*-c,s[1]=p*u+m*-c+g*-l-x*-d,s[2]=g*u+m*-d+x*-c-p*-l,s}},4361:function(f){f.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s[3]=t[3]+i[3],s}},2335:function(f){f.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},2933:function(f){f.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},7536:function(f){f.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},4691:function(f){f.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],o=t[3]-s[3];return Math.sqrt(i*i+r*r+n*n+o*o)}},1373:function(f){f.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s[3]=t[3]/i[3],s}},3750:function(f){f.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},3390:function(f){f.exports=function(s,t,i,r){var n=new Float32Array(4);return n[0]=s,n[1]=t,n[2]=i,n[3]=r,n}},9970:function(f,s,t){f.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(f){f.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},6808:function(f){f.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3];return Math.sqrt(t*t+i*i+r*r+n*n)}},2573:function(f){f.exports=function(s,t,i,r){var n=t[0],o=t[1],l=t[2],c=t[3];return s[0]=n+r*(i[0]-n),s[1]=o+r*(i[1]-o),s[2]=l+r*(i[2]-l),s[3]=c+r*(i[3]-c),s}},160:function(f){f.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s[3]=Math.max(t[3],i[3]),s}},2334:function(f){f.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s[3]=Math.min(t[3],i[3]),s}},3576:function(f){f.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s[3]=t[3]*i[3],s}},1498:function(f){f.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},5177:function(f){f.exports=function(s,t){var i=t[0],r=t[1],n=t[2],o=t[3],l=i*i+r*r+n*n+o*o;return l>0&&(l=1/Math.sqrt(l),s[0]=i*l,s[1]=r*l,s[2]=n*l,s[3]=o*l),s}},9131:function(f,s,t){var i=t(5177),r=t(9288);f.exports=function(n,o){return o=o||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),i(n,n),r(n,n,o),n}},9288:function(f){f.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s[3]=t[3]*i,s}},4844:function(f){f.exports=function(s,t,i,r){return s[0]=t[0]+i[0]*r,s[1]=t[1]+i[1]*r,s[2]=t[2]+i[2]*r,s[3]=t[3]+i[3]*r,s}},4578:function(f){f.exports=function(s,t,i,r,n){return s[0]=t,s[1]=i,s[2]=r,s[3]=n,s}},7960:function(f){f.exports=function(s,t){var i=t[0]-s[0],r=t[1]-s[1],n=t[2]-s[2],o=t[3]-s[3];return i*i+r*r+n*n+o*o}},483:function(f){f.exports=function(s){var t=s[0],i=s[1],r=s[2],n=s[3];return t*t+i*i+r*r+n*n}},6860:function(f){f.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s[3]=t[3]-i[3],s}},5352:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],l=t[3];return s[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*l,s[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*l,s[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*l,s[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*l,s}},4041:function(f){f.exports=function(s,t,i){var r=t[0],n=t[1],o=t[2],l=i[0],c=i[1],d=i[2],u=i[3],x=u*r+c*o-d*n,p=u*n+d*r-l*o,g=u*o+l*n-c*r,m=-l*r-c*n-d*o;return s[0]=x*u+m*-l+p*-d-g*-c,s[1]=p*u+m*-c+g*-l-x*-d,s[2]=g*u+m*-d+x*-c-p*-l,s[3]=t[3],s}},1848:function(f,s,t){var i=t(4905),r=t(6468);f.exports=function(n){for(var o=Array.isArray(n)?n:i(n),l=0;l<o.length;l++){var c=o[l];if(c.type==="preprocessor"){var d=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(d&&d[2]){var u=d[1],x=d[2];return(u?r(x):x).trim()}}}}},5874:function(f,s,t){f.exports=function(I){var D,z,V,O=0,j=0,Y=c,B=[],U=[],q=1,te=0,ee=0,Q=!1,J=!1,K="",X=n,ie=i;(I=I||{}).version==="300 es"&&(X=l,ie=o);var se={},ae={};for(O=0;O<X.length;O++)se[X[O]]=!0;for(O=0;O<ie.length;O++)ae[ie[O]]=!0;return function(fe){return U=[],fe!==null?function(Se){var be;for(O=0,Se.toString&&(Se=Se.toString()),K+=Se.replace(/\r\n/g,`
`),V=K.length;D=K[O],O<V;){switch(be=O,Y){case u:O=de();break;case x:case p:O=pe();break;case g:O=me();break;case m:O=ge();break;case E:O=Ce();break;case y:O=oe();break;case d:O=re();break;case S:O=ye();break;case c:O=ve()}be!==O&&(K[be]===`
`?(te=0,++q):++te)}return j+=O,K=K.slice(O),U}(fe):(B.length&&ue(B.join("")),Y=A,ue("(eof)"),U)};function ue(fe){fe.length&&U.push({type:P[Y],data:fe,position:ee,line:q,column:te})}function ve(){return B=B.length?[]:B,z==="/"&&D==="*"?(ee=j+O-1,Y=u,z=D,O+1):z==="/"&&D==="/"?(ee=j+O-1,Y=x,z=D,O+1):D==="#"?(Y=p,ee=j+O,O):/\s/.test(D)?(Y=S,ee=j+O,O):(Q=/\d/.test(D),J=/[^\w_]/.test(D),ee=j+O,Y=Q?m:J?g:d,O)}function ye(){return/[^\s]/g.test(D)?(ue(B.join("")),Y=c,O):(B.push(D),z=D,O+1)}function pe(){return D!=="\r"&&D!==`
`||z==="\\"?(B.push(D),z=D,O+1):(ue(B.join("")),Y=c,O)}function de(){return D==="/"&&z==="*"?(B.push(D),ue(B.join("")),Y=c,O+1):(B.push(D),z=D,O+1)}function me(){if(z==="."&&/\d/.test(D))return Y=y,O;if(z==="/"&&D==="*")return Y=u,O;if(z==="/"&&D==="/")return Y=x,O;if(D==="."&&B.length){for(;ke(B););return Y=y,O}if(D===";"||D===")"||D==="("){if(B.length)for(;ke(B););return ue(D),Y=c,O+1}var fe=B.length===2&&D!=="=";if(/[\w_\d\s]/.test(D)||fe){for(;ke(B););return Y=c,O}return B.push(D),z=D,O+1}function ke(fe){for(var Se,be,we=0;;){if(Se=r.indexOf(fe.slice(0,fe.length+we).join("")),be=r[Se],Se===-1){if(we--+fe.length>0)continue;be=fe.slice(0,1).join("")}return ue(be),ee+=be.length,(B=B.slice(be.length)).length}}function Ce(){return/[^a-fA-F0-9]/.test(D)?(ue(B.join("")),Y=c,O):(B.push(D),z=D,O+1)}function ge(){return D==="."||/[eE]/.test(D)?(B.push(D),Y=y,z=D,O+1):D==="x"&&B.length===1&&B[0]==="0"?(Y=E,B.push(D),z=D,O+1):/[^\d]/.test(D)?(ue(B.join("")),Y=c,O):(B.push(D),z=D,O+1)}function oe(){return D==="f"&&(B.push(D),z=D,O+=1),/[eE]/.test(D)?(B.push(D),z=D,O+1):(D!=="-"&&D!=="+"||!/[eE]/.test(z))&&/[^\d]/.test(D)?(ue(B.join("")),Y=c,O):(B.push(D),z=D,O+1)}function re(){if(/[^\d\w_]/.test(D)){var fe=B.join("");return Y=ae[fe]?h:se[fe]?_:v,ue(B.join("")),Y=c,O}return B.push(D),z=D,O+1}};var i=t(620),r=t(7827),n=t(6852),o=t(7932),l=t(3508),c=999,d=9999,u=0,x=1,p=2,g=3,m=4,y=5,v=6,_=7,h=8,S=9,A=10,E=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(f,s,t){var i=t(6852);i=i.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),f.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(f){f.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(f,s,t){var i=t(620);f.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(f){f.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(f){f.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(f,s,t){var i=t(5874);f.exports=function(r,n){var o=i(n),l=[];return(l=l.concat(o(r))).concat(o(null))}},3236:function(f){f.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),i=[],r=0;r<s.length-1;r++)i.push(s[r],t[r]||"");return i.push(s[r]),i.join("")}},7520:function(f,s,t){"use strict";var i=t(9507);f.exports=i&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},3778:function(f,s){s.read=function(t,i,r,n,o){var l,c,d=8*o-n-1,u=(1<<d)-1,x=u>>1,p=-7,g=r?o-1:0,m=r?-1:1,y=t[i+g];for(g+=m,l=y&(1<<-p)-1,y>>=-p,p+=d;p>0;l=256*l+t[i+g],g+=m,p-=8);for(c=l&(1<<-p)-1,l>>=-p,p+=n;p>0;c=256*c+t[i+g],g+=m,p-=8);if(l===0)l=1-x;else{if(l===u)return c?NaN:1/0*(y?-1:1);c+=Math.pow(2,n),l-=x}return(y?-1:1)*c*Math.pow(2,l-n)},s.write=function(t,i,r,n,o,l){var c,d,u,x=8*l-o-1,p=(1<<x)-1,g=p>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:l-1,v=n?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(d=isNaN(i)?1:0,c=p):(c=Math.floor(Math.log(i)/Math.LN2),i*(u=Math.pow(2,-c))<1&&(c--,u*=2),(i+=c+g>=1?m/u:m*Math.pow(2,1-g))*u>=2&&(c++,u/=2),c+g>=p?(d=0,c=p):c+g>=1?(d=(i*u-1)*Math.pow(2,o),c+=g):(d=i*Math.pow(2,g-1)*Math.pow(2,o),c=0));o>=8;t[r+y]=255&d,y+=v,d/=256,o-=8);for(c=c<<o|d,x+=o;x>0;t[r+y]=255&c,y+=v,c/=256,x-=8);t[r+y-v]|=128*_}},8954:function(f,s,t){"use strict";f.exports=function(x,p){var g=x.length;if(g===0)throw new Error("Must have at least d+1 points");var m=x[0].length;if(g<=m)throw new Error("Must input at least d+1 points");var y=x.slice(0,m+1),v=i.apply(void 0,y);if(v===0)throw new Error("Input not in general position");for(var _=new Array(m+1),h=0;h<=m;++h)_[h]=h;v<0&&(_[0]=1,_[1]=0);var S=new n(_,new Array(m+1),!1),A=S.adjacent,E=new Array(m+2);for(h=0;h<=m;++h){for(var P=_.slice(),I=0;I<=m;++I)I===h&&(P[I]=-1);var D=P[0];P[0]=P[1],P[1]=D;var z=new n(P,new Array(m+1),!0);A[h]=z,E[h]=z}for(E[m+1]=S,h=0;h<=m;++h){P=A[h].vertices;var V=A[h].adjacent;for(I=0;I<=m;++I){var O=P[I];if(O<0)V[I]=S;else for(var j=0;j<=m;++j)A[j].vertices.indexOf(O)<0&&(V[I]=A[j])}}var Y=new d(m,y,E),B=!!p;for(h=m+1;h<g;++h)Y.insert(x[h],B);return Y.boundary()};var i=t(3250),r=t(6803).Fw;function n(x,p,g){this.vertices=x,this.adjacent=p,this.boundary=g,this.lastVisited=-1}function o(x,p,g){this.vertices=x,this.cell=p,this.index=g}function l(x,p){return r(x.vertices,p.vertices)}n.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var p=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=p};var c=[];function d(x,p,g){this.dimension=x,this.vertices=p,this.simplices=g,this.interior=g.filter(function(_){return!_.boundary}),this.tuple=new Array(x+1);for(var m=0;m<=x;++m)this.tuple[m]=this.vertices[m];var y,v=c[x];v||(v=c[x]=((y=i[x+1])||(y=i),function(_){return function(){var h=this.tuple;return _.apply(this,h)}}(y))),this.orient=v}var u=d.prototype;u.handleBoundaryDegeneracy=function(x,p){var g=this.dimension,m=this.vertices.length-1,y=this.tuple,v=this.vertices,_=[x];for(x.lastVisited=-m;_.length>0;)for(var h=(x=_.pop()).adjacent,S=0;S<=g;++S){var A=h[S];if(A.boundary&&!(A.lastVisited<=-m)){for(var E=A.vertices,P=0;P<=g;++P){var I=E[P];y[P]=I<0?p:v[I]}var D=this.orient();if(D>0)return A;A.lastVisited=-m,D===0&&_.push(A)}}return null},u.walk=function(x,p){var g=this.vertices.length-1,m=this.dimension,y=this.vertices,v=this.tuple,_=p?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[_];e:for(;!h.boundary;){for(var S=h.vertices,A=h.adjacent,E=0;E<=m;++E)v[E]=y[S[E]];for(h.lastVisited=g,E=0;E<=m;++E){var P=A[E];if(!(P.lastVisited>=g)){var I=v[E];v[E]=x;var D=this.orient();if(v[E]=I,D<0){h=P;continue e}P.boundary?P.lastVisited=-g:P.lastVisited=g}}return}return h},u.addPeaks=function(x,p){var g=this.vertices.length-1,m=this.dimension,y=this.vertices,v=this.tuple,_=this.interior,h=this.simplices,S=[p];p.lastVisited=g,p.vertices[p.vertices.indexOf(-1)]=g,p.boundary=!1,_.push(p);for(var A=[];S.length>0;){var E=(p=S.pop()).vertices,P=p.adjacent,I=E.indexOf(g);if(!(I<0)){for(var D=0;D<=m;++D)if(D!==I){var z=P[D];if(z.boundary&&!(z.lastVisited>=g)){var V=z.vertices;if(z.lastVisited!==-g){for(var O=0,j=0;j<=m;++j)V[j]<0?(O=j,v[j]=x):v[j]=y[V[j]];if(this.orient()>0){V[O]=g,z.boundary=!1,_.push(z),S.push(z),z.lastVisited=g;continue}z.lastVisited=-g}var Y=z.adjacent,B=E.slice(),U=P.slice(),q=new n(B,U,!0);h.push(q);var te=Y.indexOf(p);if(!(te<0))for(Y[te]=q,U[I]=z,B[D]=-1,U[D]=p,P[D]=q,q.flip(),j=0;j<=m;++j){var ee=B[j];if(!(ee<0||ee===g)){for(var Q=new Array(m-1),J=0,K=0;K<=m;++K){var X=B[K];X<0||K===j||(Q[J++]=X)}A.push(new o(Q,q,j))}}}}}}for(A.sort(l),D=0;D+1<A.length;D+=2){var ie=A[D],se=A[D+1],ae=ie.index,ue=se.index;ae<0||ue<0||(ie.cell.adjacent[ie.index]=se.cell,se.cell.adjacent[se.index]=ie.cell)}},u.insert=function(x,p){var g=this.vertices;g.push(x);var m=this.walk(x,p);if(m){for(var y=this.dimension,v=this.tuple,_=0;_<=y;++_){var h=m.vertices[_];v[_]=h<0?x:g[h]}var S=this.orient(v);S<0||(S!==0||(m=this.handleBoundaryDegeneracy(m,x)))&&this.addPeaks(x,m)}},u.boundary=function(){for(var x=this.dimension,p=[],g=this.simplices,m=g.length,y=0;y<m;++y){var v=g[y];if(v.boundary){for(var _=new Array(x),h=v.vertices,S=0,A=0,E=0;E<=x;++E)h[E]>=0?_[S++]=h[E]:A=1&E;if(A===(1&x)){var P=_[0];_[0]=_[1],_[1]=P}p.push(_)}}return p}},3352:function(f,s,t){"use strict";var i=t(2478);function r(S,A,E,P,I){this.mid=S,this.left=A,this.right=E,this.leftPoints=P,this.rightPoints=I,this.count=(A?A.count:0)+(E?E.count:0)+P.length}f.exports=function(S){return S&&S.length!==0?new _(v(S)):new _(null)};var n=r.prototype;function o(S,A){S.mid=A.mid,S.left=A.left,S.right=A.right,S.leftPoints=A.leftPoints,S.rightPoints=A.rightPoints,S.count=A.count}function l(S,A){var E=v(A);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function c(S,A){var E=S.intervals([]);E.push(A),l(S,E)}function d(S,A){var E=S.intervals([]),P=E.indexOf(A);return P<0?0:(E.splice(P,1),l(S,E),1)}function u(S,A,E){for(var P=0;P<S.length&&S[P][0]<=A;++P){var I=E(S[P]);if(I)return I}}function x(S,A,E){for(var P=S.length-1;P>=0&&S[P][1]>=A;--P){var I=E(S[P]);if(I)return I}}function p(S,A){for(var E=0;E<S.length;++E){var P=A(S[E]);if(P)return P}}function g(S,A){return S-A}function m(S,A){return S[0]-A[0]||S[1]-A[1]}function y(S,A){return S[1]-A[1]||S[0]-A[0]}function v(S){if(S.length===0)return null;for(var A=[],E=0;E<S.length;++E)A.push(S[E][0],S[E][1]);A.sort(g);var P=A[A.length>>1],I=[],D=[],z=[];for(E=0;E<S.length;++E){var V=S[E];V[1]<P?I.push(V):P<V[0]?D.push(V):z.push(V)}var O=z,j=z.slice();return O.sort(m),j.sort(y),new r(P,v(I),v(D),O,j)}function _(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var A=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(A+1)?c(this,S):this.left.insert(S):this.left=v([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(A+1)?c(this,S):this.right.insert(S):this.right=v([S]);else{var E=i.ge(this.leftPoints,S,m),P=i.ge(this.rightPoints,S,y);this.leftPoints.splice(E,0,S),this.rightPoints.splice(P,0,S)}},n.remove=function(S){var A=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(A-1)?d(this,S):(D=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(D===1&&(this.count-=1),D):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(A-1)?d(this,S):(D=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(D===1&&(this.count-=1),D):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,P=this.left;P.right;)E=P,P=P.right;if(E===this)P.right=this.right;else{var I=this.left,D=this.right;E.count-=P.count,E.right=P.left,P.left=I,P.right=D}o(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return 1}for(I=i.ge(this.leftPoints,S,m);I<this.leftPoints.length&&this.leftPoints[I][0]===S[0];++I)if(this.leftPoints[I]===S){for(this.count-=1,this.leftPoints.splice(I,1),D=i.ge(this.rightPoints,S,y);D<this.rightPoints.length&&this.rightPoints[D][1]===S[1];++D)if(this.rightPoints[D]===S)return this.rightPoints.splice(D,1),1}return 0},n.queryPoint=function(S,A){return S<this.mid?this.left&&(E=this.left.queryPoint(S,A))?E:u(this.leftPoints,S,A):S>this.mid?this.right&&(E=this.right.queryPoint(S,A))?E:x(this.rightPoints,S,A):p(this.leftPoints,A);var E},n.queryInterval=function(S,A,E){var P;return S<this.mid&&this.left&&(P=this.left.queryInterval(S,A,E))||A>this.mid&&this.right&&(P=this.right.queryInterval(S,A,E))?P:A<this.mid?u(this.leftPoints,A,E):S>this.mid?x(this.rightPoints,S,E):p(this.leftPoints,E)};var h=_.prototype;h.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},h.remove=function(S){if(this.root){var A=this.root.remove(S);return A===2&&(this.root=null),A!==0}return!1},h.queryPoint=function(S,A){if(this.root)return this.root.queryPoint(S,A)},h.queryInterval=function(S,A,E){if(S<=A&&this.root)return this.root.queryInterval(S,A,E)},Object.defineProperty(h,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(h,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(f){"use strict";f.exports=function(s){for(var t=new Array(s),i=0;i<s;++i)t[i]=i;return t}},9507:function(f){f.exports=!0},7163:function(f){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}f.exports=function(t){return t!=null&&(s(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&s(i.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(f){"use strict";f.exports=function(s){for(var t,i=s.length,r=0;r<i;r++)if(((t=s.charCodeAt(r))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(f){f.exports=function(s,t,i){return s*(1-i)+t*i}},2652:function(f,s,t){var i=t(4335),r=t(6864),n=t(1903),o=t(9921),l=t(7608),c=t(5665),d={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},u=r(),x=r(),p=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],m=[0,0,0];function y(v,_,h,S,A){v[0]=_[0]*S+h[0]*A,v[1]=_[1]*S+h[1]*A,v[2]=_[2]*S+h[2]*A}f.exports=function(v,_,h,S,A,E){if(_||(_=[0,0,0]),h||(h=[0,0,0]),S||(S=[0,0,0]),A||(A=[0,0,0,1]),E||(E=[0,0,0,1]),!i(u,v)||(n(x,u),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(o(x)<1e-8)))return!1;var P,I,D,z,V,O,j,Y=u[3],B=u[7],U=u[11],q=u[12],te=u[13],ee=u[14],Q=u[15];if(Y!==0||B!==0||U!==0){if(p[0]=Y,p[1]=B,p[2]=U,p[3]=Q,!l(x,x))return!1;c(x,x),P=A,D=x,z=(I=p)[0],V=I[1],O=I[2],j=I[3],P[0]=D[0]*z+D[4]*V+D[8]*O+D[12]*j,P[1]=D[1]*z+D[5]*V+D[9]*O+D[13]*j,P[2]=D[2]*z+D[6]*V+D[10]*O+D[14]*j,P[3]=D[3]*z+D[7]*V+D[11]*O+D[15]*j}else A[0]=A[1]=A[2]=0,A[3]=1;if(_[0]=q,_[1]=te,_[2]=ee,function(K,X){K[0][0]=X[0],K[0][1]=X[1],K[0][2]=X[2],K[1][0]=X[4],K[1][1]=X[5],K[1][2]=X[6],K[2][0]=X[8],K[2][1]=X[9],K[2][2]=X[10]}(g,u),h[0]=d.length(g[0]),d.normalize(g[0],g[0]),S[0]=d.dot(g[0],g[1]),y(g[1],g[1],g[0],1,-S[0]),h[1]=d.length(g[1]),d.normalize(g[1],g[1]),S[0]/=h[1],S[1]=d.dot(g[0],g[2]),y(g[2],g[2],g[0],1,-S[1]),S[2]=d.dot(g[1],g[2]),y(g[2],g[2],g[1],1,-S[2]),h[2]=d.length(g[2]),d.normalize(g[2],g[2]),S[1]/=h[2],S[2]/=h[2],d.cross(m,g[1],g[2]),d.dot(g[0],m)<0)for(var J=0;J<3;J++)h[J]*=-1,g[J][0]*=-1,g[J][1]*=-1,g[J][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4335:function(f){f.exports=function(s,t){var i=t[15];if(i===0)return!1;for(var r=1/i,n=0;n<16;n++)s[n]=t[n]*r;return!0}},7442:function(f,s,t){var i=t(6658),r=t(7182),n=t(2652),o=t(9921),l=t(8648),c=x(),d=x(),u=x();function x(){return{translate:p(),scale:p(1),skew:p(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function p(g){return[g||0,g||0,g||0]}f.exports=function(g,m,y,v){if(o(m)===0||o(y)===0)return!1;var _=n(m,c.translate,c.scale,c.skew,c.perspective,c.quaternion),h=n(y,d.translate,d.scale,d.skew,d.perspective,d.quaternion);return!(!_||!h||(i(u.translate,c.translate,d.translate,v),i(u.skew,c.skew,d.skew,v),i(u.scale,c.scale,d.scale,v),i(u.perspective,c.perspective,d.perspective,v),l(u.quaternion,c.quaternion,d.quaternion,v),r(g,u.translate,u.scale,u.skew,u.perspective,u.quaternion),0))}},7182:function(f,s,t){var i={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},r=(i.create(),i.create());f.exports=function(n,o,l,c,d,u){return i.identity(n),i.fromRotationTranslation(n,u,o),n[3]=d[0],n[7]=d[1],n[11]=d[2],n[15]=d[3],i.identity(r),c[2]!==0&&(r[9]=c[2],i.multiply(n,n,r)),c[1]!==0&&(r[9]=0,r[8]=c[1],i.multiply(n,n,r)),c[0]!==0&&(r[8]=0,r[4]=c[0],i.multiply(n,n,r)),i.scale(n,n,l),n}},4192:function(f,s,t){"use strict";var i=t(2478),r=t(7442),n=t(7608),o=t(5567),l=t(2408),c=t(7089),d=t(6582),u=t(7656),x=(t(2504),t(3536)),p=[0,0,0];function g(v){this._components=v.slice(),this._time=[0],this.prevMatrix=v.slice(),this.nextMatrix=v.slice(),this.computedMatrix=v.slice(),this.computedInverse=v.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}f.exports=function(v){return new g((v=v||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var m=g.prototype;m.recalcMatrix=function(v){var _=this._time,h=i.le(_,v),S=this.computedMatrix;if(!(h<0)){var A=this._components;if(h===_.length-1)for(var E=16*h,P=0;P<16;++P)S[P]=A[E++];else{var I=_[h+1]-_[h],D=(E=16*h,this.prevMatrix),z=!0;for(P=0;P<16;++P)D[P]=A[E++];var V=this.nextMatrix;for(P=0;P<16;++P)V[P]=A[E++],z=z&&D[P]===V[P];if(I<1e-6||z)for(P=0;P<16;++P)S[P]=D[P];else r(S,D,V,(v-_[h])/I)}var O=this.computedUp;O[0]=S[1],O[1]=S[5],O[2]=S[9],x(O,O);var j=this.computedInverse;n(j,S);var Y=this.computedEye,B=j[15];Y[0]=j[12]/B,Y[1]=j[13]/B,Y[2]=j[14]/B;var U=this.computedCenter,q=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)U[P]=Y[P]-S[2+4*P]*q}},m.idle=function(v){if(!(v<this.lastT())){for(var _=this._components,h=_.length-16,S=0;S<16;++S)_.push(_[h++]);this._time.push(v)}},m.flush=function(v){var _=i.gt(this._time,v)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},m.lastT=function(){return this._time[this._time.length-1]},m.lookAt=function(v,_,h,S){this.recalcMatrix(v),_=_||this.computedEye,h=h||p,S=S||this.computedUp,this.setMatrix(v,d(this.computedMatrix,_,h,S));for(var A=0,E=0;E<3;++E)A+=Math.pow(h[E]-_[E],2);A=Math.log(Math.sqrt(A)),this.computedRadius[0]=A},m.rotate=function(v,_,h,S){this.recalcMatrix(v);var A=this.computedInverse;_&&l(A,A,_),h&&o(A,A,h),S&&c(A,A,S),this.setMatrix(v,n(this.computedMatrix,A))};var y=[0,0,0];m.pan=function(v,_,h,S){y[0]=-(_||0),y[1]=-(h||0),y[2]=-(S||0),this.recalcMatrix(v);var A=this.computedInverse;u(A,A,y),this.setMatrix(v,n(A,A))},m.translate=function(v,_,h,S){y[0]=_||0,y[1]=h||0,y[2]=S||0,this.recalcMatrix(v);var A=this.computedMatrix;u(A,A,y),this.setMatrix(v,A)},m.setMatrix=function(v,_){if(!(v<this.lastT())){this._time.push(v);for(var h=0;h<16;++h)this._components.push(_[h])}},m.setDistance=function(v,_){this.computedRadius[0]=_},m.setDistanceLimits=function(v,_){var h=this._limits;h[0]=v,h[1]=_},m.getDistanceLimits=function(v){var _=this._limits;return v?(v[0]=_[0],v[1]=_[1],v):_}},3090:function(f,s,t){"use strict";f.exports=function(r){var n=r.length;if(n<3){for(var o=new Array(n),l=0;l<n;++l)o[l]=l;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:o}var c=new Array(n);for(l=0;l<n;++l)c[l]=l;c.sort(function(_,h){return r[_][0]-r[h][0]||r[_][1]-r[h][1]});var d=[c[0],c[1]],u=[c[0],c[1]];for(l=2;l<n;++l){for(var x=c[l],p=r[x],g=d.length;g>1&&i(r[d[g-2]],r[d[g-1]],p)<=0;)g-=1,d.pop();for(d.push(x),g=u.length;g>1&&i(r[u[g-2]],r[u[g-1]],p)>=0;)g-=1,u.pop();u.push(x)}o=new Array(u.length+d.length-2);for(var m=0,y=(l=0,d.length);l<y;++l)o[m++]=d[l];for(var v=u.length-2;v>0;--v)o[m++]=u[v];return o};var i=t(3250)[3]},351:function(f,s,t){"use strict";f.exports=function(r,n){n||(n=r,r=window);var o=0,l=0,c=0,d={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function x(E){var P=!1;return"altKey"in E&&(P=P||E.altKey!==d.alt,d.alt=!!E.altKey),"shiftKey"in E&&(P=P||E.shiftKey!==d.shift,d.shift=!!E.shiftKey),"ctrlKey"in E&&(P=P||E.ctrlKey!==d.control,d.control=!!E.ctrlKey),"metaKey"in E&&(P=P||E.metaKey!==d.meta,d.meta=!!E.metaKey),P}function p(E,P){var I=i.x(P),D=i.y(P);"buttons"in P&&(E=0|P.buttons),(E!==o||I!==l||D!==c||x(P))&&(o=0|E,l=I||0,c=D||0,n&&n(o,l,c,d))}function g(E){p(0,E)}function m(){(o||l||c||d.shift||d.alt||d.meta||d.control)&&(l=c=0,o=0,d.shift=d.alt=d.control=d.meta=!1,n&&n(0,0,0,d))}function y(E){x(E)&&n&&n(o,l,c,d)}function v(E){i.buttons(E)===0?p(0,E):p(o,E)}function _(E){p(o|i.buttons(E),E)}function h(E){p(o&~i.buttons(E),E)}function S(){u||(u=!0,r.addEventListener("mousemove",v),r.addEventListener("mousedown",_),r.addEventListener("mouseup",h),r.addEventListener("mouseleave",g),r.addEventListener("mouseenter",g),r.addEventListener("mouseout",g),r.addEventListener("mouseover",g),r.addEventListener("blur",m),r.addEventListener("keyup",y),r.addEventListener("keydown",y),r.addEventListener("keypress",y),r!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}S();var A={element:r};return Object.defineProperties(A,{enabled:{get:function(){return u},set:function(E){E?S():u&&(u=!1,r.removeEventListener("mousemove",v),r.removeEventListener("mousedown",_),r.removeEventListener("mouseup",h),r.removeEventListener("mouseleave",g),r.removeEventListener("mouseenter",g),r.removeEventListener("mouseout",g),r.removeEventListener("mouseover",g),r.removeEventListener("blur",m),r.removeEventListener("keyup",y),r.removeEventListener("keydown",y),r.removeEventListener("keypress",y),r!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return d},enumerable:!0}}),A};var i=t(4687)},24:function(f){var s={left:0,top:0};f.exports=function(t,i,r){i=i||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n,o=t.clientX||0,l=t.clientY||0,c=(n=i)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=o-c.left,r[1]=l-c.top,r}},4687:function(f,s){"use strict";function t(i){return i.target||i.srcElement||window}s.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((r=i.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if((r=i.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},s.element=t,s.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var r=t(i).getBoundingClientRect();return i.clientX-r.left}return 0},s.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var r=t(i).getBoundingClientRect();return i.clientY-r.top}return 0}},8512:function(f,s,t){"use strict";var i=t(665);f.exports=function(r,n,o){typeof r=="function"&&(o=!!n,n=r,r=window);var l=i("ex",r),c=function(d){o&&d.preventDefault();var u=d.deltaX||0,x=d.deltaY||0,p=d.deltaZ||0,g=1;switch(d.deltaMode){case 1:g=l;break;case 2:g=window.innerHeight}if(x*=g,p*=g,(u*=g)||x||p)return n(u,x,p,d)};return r.addEventListener("wheel",c),c}},2640:function(f,s,t){"use strict";var i=t(1888);f.exports=function(n){function o(p){throw new Error("ndarray-extract-contour: "+p)}typeof n!="object"&&o("Must specify arguments");var l=n.order;Array.isArray(l)||o("Must specify order");var c=n.arrayArguments||1;c<1&&o("Must have at least one array argument"),(n.scalarArguments||0)<0&&o("Scalar arg count must be > 0"),typeof n.vertex!="function"&&o("Must specify vertex creation function"),typeof n.cell!="function"&&o("Must specify cell creation function"),typeof n.phase!="function"&&o("Must specify phase function");for(var d=n.getters||[],u=new Array(c),x=0;x<c;++x)d.indexOf(x)>=0?u[x]=!0:u[x]=!1;return function(p,g,m,y,v,_){var h=[_,v].join(",");return(0,r[h])(p,g,m,i.mallocUint32,i.freeUint32)}(n.vertex,n.cell,n.phase,0,l,u)};var r={"false,0,1":function(n,o,l,c,d){return function(u,x,p,g){var m,y=0|u.shape[0],v=0|u.shape[1],_=u.data,h=0|u.offset,S=0|u.stride[0],A=0|u.stride[1],E=h,P=0|-S,I=0,D=0|-A,z=0,V=-S-A|0,O=0,j=0|S,Y=A-S*y|0,B=0,U=0,q=0,te=2*y|0,ee=c(te),Q=c(te),J=0,K=0,X=-1,ie=-1,se=0,ae=0|-y,ue=0|y,ve=0,ye=-y-1|0,pe=y-1|0,de=0,me=0,ke=0;for(B=0;B<y;++B)ee[J++]=l(_[E],x,p,g),E+=j;if(E+=Y,v>0){if(U=1,ee[J++]=l(_[E],x,p,g),E+=j,y>0)for(B=1,m=_[E],K=ee[J]=l(m,x,p,g),se=ee[J+X],ve=ee[J+ae],de=ee[J+ye],K===se&&K===ve&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,se,ve,de,x,p,g),me=Q[J]=q++),J+=1,E+=j,B=2;B<y;++B)m=_[E],K=ee[J]=l(m,x,p,g),se=ee[J+X],ve=ee[J+ae],de=ee[J+ye],K===se&&K===ve&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,se,ve,de,x,p,g),me=Q[J]=q++,de!==se&&o(Q[J+X],me,O,I,de,se,x,p,g)),J+=1,E+=j;for(E+=Y,J=0,ke=X,X=ie,ie=ke,ke=ae,ae=ue,ue=ke,ke=ye,ye=pe,pe=ke,U=2;U<v;++U){if(ee[J++]=l(_[E],x,p,g),E+=j,y>0)for(B=1,m=_[E],K=ee[J]=l(m,x,p,g),se=ee[J+X],ve=ee[J+ae],de=ee[J+ye],K===se&&K===ve&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,se,ve,de,x,p,g),me=Q[J]=q++,de!==ve&&o(Q[J+ae],me,z,O,ve,de,x,p,g)),J+=1,E+=j,B=2;B<y;++B)m=_[E],K=ee[J]=l(m,x,p,g),se=ee[J+X],ve=ee[J+ae],de=ee[J+ye],K===se&&K===ve&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,se,ve,de,x,p,g),me=Q[J]=q++,de!==ve&&o(Q[J+ae],me,z,O,ve,de,x,p,g),de!==se&&o(Q[J+X],me,O,I,de,se,x,p,g)),J+=1,E+=j;1&U&&(J=0),ke=X,X=ie,ie=ke,ke=ae,ae=ue,ue=ke,ke=ye,ye=pe,pe=ke,E+=Y}}d(Q),d(ee)}},"false,1,0":function(n,o,l,c,d){return function(u,x,p,g){var m,y=0|u.shape[0],v=0|u.shape[1],_=u.data,h=0|u.offset,S=0|u.stride[0],A=0|u.stride[1],E=h,P=0|-S,I=0,D=0|-A,z=0,V=-S-A|0,O=0,j=0|A,Y=S-A*v|0,B=0,U=0,q=0,te=2*v|0,ee=c(te),Q=c(te),J=0,K=0,X=-1,ie=-1,se=0,ae=0|-v,ue=0|v,ve=0,ye=-v-1|0,pe=v-1|0,de=0,me=0,ke=0;for(U=0;U<v;++U)ee[J++]=l(_[E],x,p,g),E+=j;if(E+=Y,y>0){if(B=1,ee[J++]=l(_[E],x,p,g),E+=j,v>0)for(U=1,m=_[E],K=ee[J]=l(m,x,p,g),ve=ee[J+ae],se=ee[J+X],de=ee[J+ye],K===ve&&K===se&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,ve,se,de,x,p,g),me=Q[J]=q++),J+=1,E+=j,U=2;U<v;++U)m=_[E],K=ee[J]=l(m,x,p,g),ve=ee[J+ae],se=ee[J+X],de=ee[J+ye],K===ve&&K===se&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,ve,se,de,x,p,g),me=Q[J]=q++,de!==se&&o(Q[J+X],me,z,O,se,de,x,p,g)),J+=1,E+=j;for(E+=Y,J=0,ke=ae,ae=ue,ue=ke,ke=X,X=ie,ie=ke,ke=ye,ye=pe,pe=ke,B=2;B<y;++B){if(ee[J++]=l(_[E],x,p,g),E+=j,v>0)for(U=1,m=_[E],K=ee[J]=l(m,x,p,g),ve=ee[J+ae],se=ee[J+X],de=ee[J+ye],K===ve&&K===se&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,ve,se,de,x,p,g),me=Q[J]=q++,de!==ve&&o(Q[J+ae],me,O,I,de,ve,x,p,g)),J+=1,E+=j,U=2;U<v;++U)m=_[E],K=ee[J]=l(m,x,p,g),ve=ee[J+ae],se=ee[J+X],de=ee[J+ye],K===ve&&K===se&&K===de||(I=_[E+P],z=_[E+D],O=_[E+V],n(B,U,m,I,z,O,K,ve,se,de,x,p,g),me=Q[J]=q++,de!==se&&o(Q[J+X],me,z,O,se,de,x,p,g),de!==ve&&o(Q[J+ae],me,O,I,de,ve,x,p,g)),J+=1,E+=j;1&B&&(J=0),ke=ae,ae=ue,ue=ke,ke=X,X=ie,ie=ke,ke=ye,ye=pe,pe=ke,E+=Y}}d(Q),d(ee)}}}},6199:function(f,s,t){"use strict";var i=t(1338),r={zero:function(y,v,_,h){var S=y[0];h|=0;var A=0,E=_[0];for(A=0;A<S;++A)v[h]=0,h+=E},fdTemplate1:function(y,v,_,h,S,A,E){var P=y[0],I=_[0],D=-1*I,z=I;h|=0,E|=0;var V=0,O=I,j=A[0];for(V=0;V<P;++V)S[E]=.5*(v[h+D]-v[h+z]),h+=O,E+=j},fdTemplate2:function(y,v,_,h,S,A,E,P,I,D){var z=y[0],V=y[1],O=_[0],j=_[1],Y=A[0],B=A[1],U=I[0],q=I[1],te=-1*O,ee=O,Q=-1*j,J=j;h|=0,E|=0,D|=0;var K=0,X=0,ie=j,se=O-V*j,ae=B,ue=Y-V*B,ve=q,ye=U-V*q;for(X=0;X<z;++X){for(K=0;K<V;++K)S[E]=.5*(v[h+te]-v[h+ee]),P[D]=.5*(v[h+Q]-v[h+J]),h+=ie,E+=ae,D+=ve;h+=se,E+=ue,D+=ye}}},n={cdiff:function(y){var v={};return function(_,h,S){var A=_.dtype,E=_.order,P=h.dtype,I=h.order,D=S.dtype,z=S.order,V=[A,E.join(),P,I.join(),D,z.join()].join(),O=v[V];return O||(v[V]=O=y([A,E,P,I,D,z])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,h.data,h.stride,0|h.offset,S.data,S.stride,0|S.offset)}},zero:function(y){var v={};return function(_){var h=_.dtype,S=_.order,A=[h,S.join()].join(),E=v[A];return E||(v[A]=E=y([h,S])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(y){var v={};return function(_,h){var S=_.dtype,A=_.order,E=h.dtype,P=h.order,I=[S,A.join(),E,P.join()].join(),D=v[I];return D||(v[I]=D=y([S,A,E,P])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,h.data,h.stride,0|h.offset)}},fdTemplate2:function(y){var v={};return function(_,h,S){var A=_.dtype,E=_.order,P=h.dtype,I=h.order,D=S.dtype,z=S.order,V=[A,E.join(),P,I.join(),D,z.join()].join(),O=v[V];return O||(v[V]=O=y([A,E,P,I,D,z])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,h.data,h.stride,0|h.offset,S.data,S.stride,0|S.offset)}}};function o(y){return(0,n[y.funcName])(l.bind(void 0,y))}function l(y){return r[y.funcName]}function c(y){return o({funcName:y.funcName})}var d={},u={},x=c({funcName:"cdiff"}),p=c({funcName:"zero"});function g(y){return y in d?d[y]:d[y]=c({funcName:"fdTemplate"+y})}function m(y,v,_,h){return function(S,A){var E=A.shape.slice();return E[0]>2&&E[1]>2&&h(A.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(A.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),v(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(A.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),v(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(A.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),v(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(A.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),v(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}f.exports=function(y,v,_){return Array.isArray(_)||(_=i(v.dimension,typeof _=="string"?_:"clamp")),v.size===0?y:v.dimension===0?(y.set(0),y):function(h){var S=h.join();if(I=u[S])return I;for(var A=h.length,E=[x,p],P=1;P<=A;++P)E.push(g(P));var I=m.apply(void 0,E);return u[S]=I,I}(_)(y,v)}},4317:function(f){"use strict";function s(n,o){var l=Math.floor(o),c=o-l,d=0<=l&&l<n.shape[0],u=0<=l+1&&l+1<n.shape[0];return(1-c)*(d?+n.get(l):0)+c*(u?+n.get(l+1):0)}function t(n,o,l){var c=Math.floor(o),d=o-c,u=0<=c&&c<n.shape[0],x=0<=c+1&&c+1<n.shape[0],p=Math.floor(l),g=l-p,m=0<=p&&p<n.shape[1],y=0<=p+1&&p+1<n.shape[1],v=u&&m?n.get(c,p):0,_=u&&y?n.get(c,p+1):0;return(1-g)*((1-d)*v+d*(x&&m?n.get(c+1,p):0))+g*((1-d)*_+d*(x&&y?n.get(c+1,p+1):0))}function i(n,o,l,c){var d=Math.floor(o),u=o-d,x=0<=d&&d<n.shape[0],p=0<=d+1&&d+1<n.shape[0],g=Math.floor(l),m=l-g,y=0<=g&&g<n.shape[1],v=0<=g+1&&g+1<n.shape[1],_=Math.floor(c),h=c-_,S=0<=_&&_<n.shape[2],A=0<=_+1&&_+1<n.shape[2],E=x&&y&&S?n.get(d,g,_):0,P=x&&v&&S?n.get(d,g+1,_):0,I=p&&y&&S?n.get(d+1,g,_):0,D=p&&v&&S?n.get(d+1,g+1,_):0,z=x&&y&&A?n.get(d,g,_+1):0,V=x&&v&&A?n.get(d,g+1,_+1):0;return(1-h)*((1-m)*((1-u)*E+u*I)+m*((1-u)*P+u*D))+h*((1-m)*((1-u)*z+u*(p&&y&&A?n.get(d+1,g,_+1):0))+m*((1-u)*V+u*(p&&v&&A?n.get(d+1,g+1,_+1):0)))}function r(n){var o,l,c=0|n.shape.length,d=new Array(c),u=new Array(c),x=new Array(c),p=new Array(c);for(o=0;o<c;++o)l=+arguments[o+1],d[o]=Math.floor(l),u[o]=l-d[o],x[o]=0<=d[o]&&d[o]<n.shape[o],p[o]=0<=d[o]+1&&d[o]+1<n.shape[o];var g,m,y,v=0;e:for(o=0;o<1<<c;++o){for(m=1,y=n.offset,g=0;g<c;++g)if(o&1<<g){if(!p[g])continue e;m*=u[g],y+=n.stride[g]*(d[g]+1)}else{if(!x[g])continue e;m*=1-u[g],y+=n.stride[g]*d[g]}v+=m*n.data[y]}return v}f.exports=function(n,o,l,c){switch(n.shape.length){case 0:return 0;case 1:return s(n,o);case 2:return t(n,o,l);case 3:return i(n,o,l,c);default:return r.apply(void 0,arguments)}},f.exports.d1=s,f.exports.d2=t,f.exports.d3=i},5298:function(f,s){"use strict";var t={"float64,2,1,0":function(){return function(l,c,d,u,x){var p=l[0],g=l[1],m=l[2],y=d[0],v=d[1],_=d[2];u|=0;var h=0,S=0,A=0,E=_,P=v-m*_,I=y-g*v;for(A=0;A<p;++A){for(S=0;S<g;++S){for(h=0;h<m;++h)c[u]/=x,u+=E;u+=P}u+=I}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,c,d,u,x,p,g,m){for(var y=l[0],v=l[1],_=l[2],h=d[0],S=d[1],A=d[2],E=p[0],P=p[1],I=p[2],D=u|=0,z=g|=0,V=0|l[0];V>0;){V<64?(y=V,V=0):(y=64,V-=64);for(var O=0|l[1];O>0;){O<64?(v=O,O=0):(v=64,O-=64),u=D+V*h+O*S,g=z+V*E+O*P;var j=0,Y=0,B=0,U=A,q=h-_*A,te=S-y*h,ee=I,Q=E-_*I,J=P-y*E;for(B=0;B<v;++B){for(Y=0;Y<y;++Y){for(j=0;j<_;++j)c[u]=x[g]*m,u+=U,g+=ee;u+=q,g+=Q}u+=te,g+=J}}}}},"float32,1,0,float32,1,0":function(){return function(l,c,d,u,x,p,g){var m=l[0],y=l[1],v=d[0],_=d[1],h=p[0],S=p[1];u|=0,g|=0;var A=0,E=0,P=_,I=v-y*_,D=S,z=h-y*S;for(E=0;E<m;++E){for(A=0;A<y;++A)c[u]=x[g],u+=P,g+=D;u+=I,g+=z}}},"float32,1,0,float32,0,1":function(){return function(l,c,d,u,x,p,g){for(var m=l[0],y=l[1],v=d[0],_=d[1],h=p[0],S=p[1],A=u|=0,E=g|=0,P=0|l[1];P>0;){P<64?(y=P,P=0):(y=64,P-=64);for(var I=0|l[0];I>0;){I<64?(m=I,I=0):(m=64,I-=64),u=A+P*_+I*v,g=E+P*S+I*h;var D=0,z=0,V=_,O=v-y*_,j=S,Y=h-y*S;for(z=0;z<m;++z){for(D=0;D<y;++D)c[u]=x[g],u+=V,g+=j;u+=O,g+=Y}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,c,d,u,x,p,g){for(var m=l[0],y=l[1],v=l[2],_=d[0],h=d[1],S=d[2],A=p[0],E=p[1],P=p[2],I=u|=0,D=g|=0,z=0|l[2];z>0;){z<64?(v=z,z=0):(v=64,z-=64);for(var V=0|l[0];V>0;){V<64?(m=V,V=0):(m=64,V-=64);for(var O=0|l[1];O>0;){O<64?(y=O,O=0):(y=64,O-=64),u=I+z*S+V*_+O*h,g=D+z*P+V*A+O*E;var j=0,Y=0,B=0,U=S,q=_-v*S,te=h-m*_,ee=P,Q=A-v*P,J=E-m*A;for(B=0;B<y;++B){for(Y=0;Y<m;++Y){for(j=0;j<v;++j)c[u]=x[g],u+=U,g+=ee;u+=q,g+=Q}u+=te,g+=J}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,c,d,u,x,p,g){var m=l[0],y=l[1],v=l[2],_=d[0],h=d[1],S=d[2],A=p[0],E=p[1],P=p[2];u|=0,g|=0;var I=0,D=0,z=0,V=S,O=_-v*S,j=h-m*_,Y=P,B=A-v*P,U=E-m*A;for(z=0;z<y;++z){for(D=0;D<m;++D){for(I=0;I<v;++I)c[u]=x[g],u+=V,g+=Y;u+=O,g+=B}u+=j,g+=U}}}},i=function(l,c){var d=c.join(",");return(0,t[d])()},r={mul:function(l){var c={};return function(d,u,x){var p=d.dtype,g=d.order,m=u.dtype,y=u.order,v=x.dtype,_=x.order,h=[p,g.join(),m,y.join(),v,_.join()].join(),S=c[h];return S||(c[h]=S=l([p,g,m,y,v,_])),S(d.shape.slice(0),d.data,d.stride,0|d.offset,u.data,u.stride,0|u.offset,x.data,x.stride,0|x.offset)}},muls:function(l){var c={};return function(d,u,x){var p=d.dtype,g=d.order,m=u.dtype,y=u.order,v=[p,g.join(),m,y.join()].join(),_=c[v];return _||(c[v]=_=l([p,g,m,y])),_(d.shape.slice(0),d.data,d.stride,0|d.offset,u.data,u.stride,0|u.offset,x)}},mulseq:function(l){var c={};return function(d,u){var x=d.dtype,p=d.order,g=[x,p.join()].join(),m=c[g];return m||(c[g]=m=l([x,p])),m(d.shape.slice(0),d.data,d.stride,0|d.offset,u)}},div:function(l){var c={};return function(d,u,x){var p=d.dtype,g=d.order,m=u.dtype,y=u.order,v=x.dtype,_=x.order,h=[p,g.join(),m,y.join(),v,_.join()].join(),S=c[h];return S||(c[h]=S=l([p,g,m,y,v,_])),S(d.shape.slice(0),d.data,d.stride,0|d.offset,u.data,u.stride,0|u.offset,x.data,x.stride,0|x.offset)}},divs:function(l){var c={};return function(d,u,x){var p=d.dtype,g=d.order,m=u.dtype,y=u.order,v=[p,g.join(),m,y.join()].join(),_=c[v];return _||(c[v]=_=l([p,g,m,y])),_(d.shape.slice(0),d.data,d.stride,0|d.offset,u.data,u.stride,0|u.offset,x)}},divseq:function(l){var c={};return function(d,u){var x=d.dtype,p=d.order,g=[x,p.join()].join(),m=c[g];return m||(c[g]=m=l([x,p])),m(d.shape.slice(0),d.data,d.stride,0|d.offset,u)}},assign:function(l){var c={};return function(d,u){var x=d.dtype,p=d.order,g=u.dtype,m=u.order,y=[x,p.join(),g,m.join()].join(),v=c[y];return v||(c[y]=v=l([x,p,g,m])),v(d.shape.slice(0),d.data,d.stride,0|d.offset,u.data,u.stride,0|u.offset)}}};function n(l){return c={funcName:l.funcName},(0,r[c.funcName])(i.bind(void 0,c));var c}var o={mul:"*",div:"/"};(function(){for(var l in o)s[l]=n({funcName:l}),s[l+"s"]=n({funcName:l+"s"}),s[l+"seq"]=n({funcName:l+"seq"})})(),s.assign=n({funcName:"assign"})},9994:function(f,s,t){"use strict";var i=t(9618),r=t(8277);f.exports=function(n,o){for(var l=[],c=n,d=1;Array.isArray(c);)l.push(c.length),d*=c.length,c=c[0];return l.length===0?i():(o||(o=i(new Float64Array(d),l)),r(o,n),o)}},8277:function(f){"use strict";f.exports=function(s){var t={};return function(i,r){var n=i.dtype,o=i.order,l=[n,o.join()].join(),c=t[l];return c||(t[l]=c=s([n,o])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,r)}}((function(){return function(s,t,i,r,n){var o=s[0],l=s[1],c=s[2],d=i[0],u=i[1],x=i[2],p=[0,0,0];r|=0;var g=0,m=0,y=0,v=x,_=u-c*x,h=d-l*u;for(y=0;y<o;++y){for(m=0;m<l;++m){for(g=0;g<c;++g){var S,A=n;for(S=0;S<p.length-1;++S)A=A[p[S]];t[r]=A[p[p.length-1]],r+=v,++p[2]}r+=_,p[2]-=c,++p[1]}r+=h,p[1]-=l,++p[0]}}}).bind(void 0,{funcName:"convert"}))},7640:function(f,s,t){"use strict";var i=t(1888);function r(c){return c==="uint32"?[i.mallocUint32,i.freeUint32]:null}var n={"uint32,1,0":function(c,d){return function(u,x,p,g,m,y,v,_,h,S,A){var E,P,I,D,z,V,O,j,Y=u*m+g,B=c(_);for(E=u+1;E<=x;++E){for(P=E,I=Y+=m,z=0,V=Y,D=0;D<_;++D)B[z++]=p[V],V+=h;e:for(;P-- >u;){z=0,V=I-m;t:for(D=0;D<_;++D){if((O=p[V])<(j=B[z]))break e;if(O>j)break t;V+=S,z+=A}for(z=I,V=I-m,D=0;D<_;++D)p[z]=p[V],z+=h,V+=h;I-=m}for(z=I,V=0,D=0;D<_;++D)p[z]=B[V++],z+=h}d(B)}}},o={"uint32,1,0":function(c,d,u){return function x(p,g,m,y,v,_,h,S,A,E,P){var I,D,z,V,O,j,Y,B,U,q,te,ee,Q,J,K,X,ie,se,ae,ue,ve,ye,pe,de,me,ke=(g-p+1)/6|0,Ce=p+ke,ge=g-ke,oe=p+g>>1,re=oe-ke,fe=oe+ke,Se=Ce,be=re,we=oe,Me=fe,Pe=ge,De=p+1,he=g-1,_e=!0,Ae=0,Oe=0,Ee=0,Be=S,Ve=d(Be),Ze=d(Be);te=v*Se,ee=v*be,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=Se,Se=be,be=D;break e}if(Ee<0)break e;me+=E}te=v*Me,ee=v*Pe,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=Me,Me=Pe,Pe=D;break e}if(Ee<0)break e;me+=E}te=v*Se,ee=v*we,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=Se,Se=we,we=D;break e}if(Ee<0)break e;me+=E}te=v*be,ee=v*we,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=be,be=we,we=D;break e}if(Ee<0)break e;me+=E}te=v*Se,ee=v*Me,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=Se,Se=Me,Me=D;break e}if(Ee<0)break e;me+=E}te=v*we,ee=v*Me,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=we,we=Me,Me=D;break e}if(Ee<0)break e;me+=E}te=v*be,ee=v*Pe,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=be,be=Pe,Pe=D;break e}if(Ee<0)break e;me+=E}te=v*be,ee=v*we,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=be,be=we,we=D;break e}if(Ee<0)break e;me+=E}te=v*Me,ee=v*Pe,me=y;e:for(q=0;q<S;++q){if(B=ee+me,(Ee=m[Y=te+me]-m[B])>0){D=Me,Me=Pe,Pe=D;break e}if(Ee<0)break e;me+=E}for(te=v*Se,ee=v*be,Q=v*we,J=v*Me,K=v*Pe,X=v*Ce,ie=v*oe,se=v*ge,de=0,me=y,q=0;q<S;++q)Y=te+me,B=ee+me,U=Q+me,ae=J+me,ue=K+me,ve=X+me,ye=ie+me,pe=se+me,Ve[de]=m[B],Ze[de]=m[ae],_e=_e&&Ve[de]===Ze[de],z=m[Y],V=m[U],O=m[ue],m[ve]=z,m[ye]=V,m[pe]=O,++de,me+=A;for(te=v*re,ee=v*p,me=y,q=0;q<S;++q)B=ee+me,m[Y=te+me]=m[B],me+=A;for(te=v*fe,ee=v*g,me=y,q=0;q<S;++q)B=ee+me,m[Y=te+me]=m[B],me+=A;if(_e)for(j=De;j<=he;++j){for(Y=y+j*v,de=0,q=0;q<S&&(Ee=m[Y]-Ve[de])==0;++q)de+=P,Y+=E;if(Ee!==0)if(Ee<0){if(j!==De)for(te=v*j,ee=v*De,me=y,q=0;q<S;++q)B=ee+me,I=m[Y=te+me],m[Y]=m[B],m[B]=I,me+=A;++De}else for(;;){for(Y=y+he*v,de=0,q=0;q<S&&(Ee=m[Y]-Ve[de])==0;++q)de+=P,Y+=E;if(!(Ee>0)){if(Ee<0){for(te=v*j,ee=v*De,Q=v*he,me=y,q=0;q<S;++q)B=ee+me,U=Q+me,I=m[Y=te+me],m[Y]=m[B],m[B]=m[U],m[U]=I,me+=A;++De,--he;break}for(te=v*j,ee=v*he,me=y,q=0;q<S;++q)B=ee+me,I=m[Y=te+me],m[Y]=m[B],m[B]=I,me+=A;--he;break}he--}}else for(j=De;j<=he;++j){for(Y=y+j*v,de=0,q=0;q<S&&(Ae=m[Y]-Ve[de])==0;++q)de+=P,Y+=E;if(Ae<0){if(j!==De)for(te=v*j,ee=v*De,me=y,q=0;q<S;++q)B=ee+me,I=m[Y=te+me],m[Y]=m[B],m[B]=I,me+=A;++De}else{for(Y=y+j*v,de=0,q=0;q<S&&(Oe=m[Y]-Ze[de])==0;++q)de+=P,Y+=E;if(Oe>0)for(;;){for(Y=y+he*v,de=0,q=0;q<S&&(Ee=m[Y]-Ze[de])==0;++q)de+=P,Y+=E;if(!(Ee>0)){for(Y=y+he*v,de=0,q=0;q<S&&(Ee=m[Y]-Ve[de])==0;++q)de+=P,Y+=E;if(Ee<0){for(te=v*j,ee=v*De,Q=v*he,me=y,q=0;q<S;++q)B=ee+me,U=Q+me,I=m[Y=te+me],m[Y]=m[B],m[B]=m[U],m[U]=I,me+=A;++De,--he}else{for(te=v*j,ee=v*he,me=y,q=0;q<S;++q)B=ee+me,I=m[Y=te+me],m[Y]=m[B],m[B]=I,me+=A;--he}break}if(--he<j)break}}}for(te=v*p,ee=v*(De-1),de=0,me=y,q=0;q<S;++q)B=ee+me,m[Y=te+me]=m[B],m[B]=Ve[de],++de,me+=A;for(te=v*g,ee=v*(he+1),de=0,me=y,q=0;q<S;++q)B=ee+me,m[Y=te+me]=m[B],m[B]=Ze[de],++de,me+=A;if(De-2-p<=32?c(p,De-2,m,y,v,_,h,S,A,E,P):x(p,De-2,m,y,v,_,h,S,A,E,P),g-(he+2)<=32?c(he+2,g,m,y,v,_,h,S,A,E,P):x(he+2,g,m,y,v,_,h,S,A,E,P),_e)return u(Ve),void u(Ze);if(De<Ce&&he>ge){e:for(;;){for(Y=y+De*v,de=0,me=y,q=0;q<S;++q){if(m[Y]!==Ve[de])break e;++de,Y+=A}++De}e:for(;;){for(Y=y+he*v,de=0,me=y,q=0;q<S;++q){if(m[Y]!==Ze[de])break e;++de,Y+=A}--he}for(j=De;j<=he;++j){for(Y=y+j*v,de=0,q=0;q<S&&(Ae=m[Y]-Ve[de])==0;++q)de+=P,Y+=E;if(Ae===0){if(j!==De)for(te=v*j,ee=v*De,me=y,q=0;q<S;++q)B=ee+me,I=m[Y=te+me],m[Y]=m[B],m[B]=I,me+=A;++De}else{for(Y=y+j*v,de=0,q=0;q<S&&(Oe=m[Y]-Ze[de])==0;++q)de+=P,Y+=E;if(Oe===0)for(;;){for(Y=y+he*v,de=0,q=0;q<S&&(Ee=m[Y]-Ze[de])==0;++q)de+=P,Y+=E;if(Ee!==0){for(Y=y+he*v,de=0,q=0;q<S&&(Ee=m[Y]-Ve[de])==0;++q)de+=P,Y+=E;if(Ee<0){for(te=v*j,ee=v*De,Q=v*he,me=y,q=0;q<S;++q)B=ee+me,U=Q+me,I=m[Y=te+me],m[Y]=m[B],m[B]=m[U],m[U]=I,me+=A;++De,--he}else{for(te=v*j,ee=v*he,me=y,q=0;q<S;++q)B=ee+me,I=m[Y=te+me],m[Y]=m[B],m[B]=I,me+=A;--he}break}if(--he<j)break}}}}u(Ve),u(Ze),he-De<=32?c(De,he,m,y,v,_,h,S,A,E,P):x(De,he,m,y,v,_,h,S,A,E,P)}}},l={"uint32,1,0":function(c,d){return function(u){var x=u.data,p=0|u.offset,g=u.shape,m=u.stride,y=0|m[0],v=0|g[0],_=0|m[1],h=0|g[1],S=_,A=_;v<=32?c(0,v-1,x,p,y,_,v,h,S,A,1):d(0,v-1,x,p,y,_,v,h,S,A,1)}}};f.exports=function(c,d){var u=[d,c].join(","),x=l[u],p=function(m,y){var v=r(y),_=[y,m].join(","),h=n[_];return v?h(v[0],v[1]):h()}(c,d),g=function(m,y,v){var _=r(y),h=[y,m].join(","),S=o[h];return m.length>1&&_?S(v,_[0],_[1]):S(v)}(c,d,p);return x(p,g)}},446:function(f,s,t){"use strict";var i=t(7640),r={};f.exports=function(n){var o=n.order,l=n.dtype,c=[o,l].join(":"),d=r[c];return d||(r[c]=d=i(o,l)),d(n),n}},9618:function(f,s,t){var i=t(7163),r=typeof Float64Array<"u";function n(u,x){return u[0]-x[0]}function o(){var u,x=this.stride,p=new Array(x.length);for(u=0;u<p.length;++u)p[u]=[Math.abs(x[u]),u];p.sort(n);var g=new Array(p.length);for(u=0;u<g.length;++u)g[u]=p[u][1];return g}var l={T:function(u){function x(g){this.data=g}var p=x.prototype;return p.dtype=u,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new x(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(g){return new x(g)}},0:function(u,x){function p(m,y){this.data=m,this.offset=y}var g=p.prototype;return g.dtype=u,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new p(this.data,this.offset)},g.pick=function(){return x(this.data)},g.valueOf=g.get=function(){return u==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(m){return u==="generic"?this.data.set(this.offset,m):this.data[this.offset]=m},function(m,y,v,_){return new p(m,_)}},1:function(u,x,p){function g(y,v,_,h){this.data=y,this.shape=[v],this.stride=[_],this.offset=0|h}var m=g.prototype;return m.dtype=u,m.dimension=1,Object.defineProperty(m,"size",{get:function(){return this.shape[0]}}),m.order=[0],m.set=function(y,v){return u==="generic"?this.data.set(this.offset+this.stride[0]*y,v):this.data[this.offset+this.stride[0]*y]=v},m.get=function(y){return u==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},m.index=function(y){return this.offset+this.stride[0]*y},m.hi=function(y){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,this.stride[0],this.offset)},m.lo=function(y){var v=this.offset,_=0,h=this.shape[0],S=this.stride[0];return typeof y=="number"&&y>=0&&(v+=S*(_=0|y),h-=_),new g(this.data,h,S,v)},m.step=function(y){var v=this.shape[0],_=this.stride[0],h=this.offset,S=0,A=Math.ceil;return typeof y=="number"&&((S=0|y)<0?(h+=_*(v-1),v=A(-v/S)):v=A(v/S),_*=S),new g(this.data,v,_,h)},m.transpose=function(y){y=y===void 0?0:0|y;var v=this.shape,_=this.stride;return new g(this.data,v[y],_[y],this.offset)},m.pick=function(y){var v=[],_=[],h=this.offset;return typeof y=="number"&&y>=0?h=h+this.stride[0]*y|0:(v.push(this.shape[0]),_.push(this.stride[0])),(0,x[v.length+1])(this.data,v,_,h)},function(y,v,_,h){return new g(y,v[0],_[0],h)}},2:function(u,x,p){function g(y,v,_,h,S,A){this.data=y,this.shape=[v,_],this.stride=[h,S],this.offset=0|A}var m=g.prototype;return m.dtype=u,m.dimension=2,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(m,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),m.set=function(y,v,_){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v,_):this.data[this.offset+this.stride[0]*y+this.stride[1]*v]=_},m.get=function(y,v){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v):this.data[this.offset+this.stride[0]*y+this.stride[1]*v]},m.index=function(y,v){return this.offset+this.stride[0]*y+this.stride[1]*v},m.hi=function(y,v){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,this.stride[0],this.stride[1],this.offset)},m.lo=function(y,v){var _=this.offset,h=0,S=this.shape[0],A=this.shape[1],E=this.stride[0],P=this.stride[1];return typeof y=="number"&&y>=0&&(_+=E*(h=0|y),S-=h),typeof v=="number"&&v>=0&&(_+=P*(h=0|v),A-=h),new g(this.data,S,A,E,P,_)},m.step=function(y,v){var _=this.shape[0],h=this.shape[1],S=this.stride[0],A=this.stride[1],E=this.offset,P=0,I=Math.ceil;return typeof y=="number"&&((P=0|y)<0?(E+=S*(_-1),_=I(-_/P)):_=I(_/P),S*=P),typeof v=="number"&&((P=0|v)<0?(E+=A*(h-1),h=I(-h/P)):h=I(h/P),A*=P),new g(this.data,_,h,S,A,E)},m.transpose=function(y,v){y=y===void 0?0:0|y,v=v===void 0?1:0|v;var _=this.shape,h=this.stride;return new g(this.data,_[y],_[v],h[y],h[v],this.offset)},m.pick=function(y,v){var _=[],h=[],S=this.offset;return typeof y=="number"&&y>=0?S=S+this.stride[0]*y|0:(_.push(this.shape[0]),h.push(this.stride[0])),typeof v=="number"&&v>=0?S=S+this.stride[1]*v|0:(_.push(this.shape[1]),h.push(this.stride[1])),(0,x[_.length+1])(this.data,_,h,S)},function(y,v,_,h){return new g(y,v[0],v[1],_[0],_[1],h)}},3:function(u,x,p){function g(y,v,_,h,S,A,E,P){this.data=y,this.shape=[v,_,h],this.stride=[S,A,E],this.offset=0|P}var m=g.prototype;return m.dtype=u,m.dimension=3,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(m,"order",{get:function(){var y=Math.abs(this.stride[0]),v=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return y>v?v>_?[2,1,0]:y>_?[1,2,0]:[1,0,2]:y>_?[2,0,1]:_>v?[0,1,2]:[0,2,1]}}),m.set=function(y,v,_,h){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_,h):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_]=h},m.get=function(y,v,_){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_]},m.index=function(y,v,_){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_},m.hi=function(y,v,_){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},m.lo=function(y,v,_){var h=this.offset,S=0,A=this.shape[0],E=this.shape[1],P=this.shape[2],I=this.stride[0],D=this.stride[1],z=this.stride[2];return typeof y=="number"&&y>=0&&(h+=I*(S=0|y),A-=S),typeof v=="number"&&v>=0&&(h+=D*(S=0|v),E-=S),typeof _=="number"&&_>=0&&(h+=z*(S=0|_),P-=S),new g(this.data,A,E,P,I,D,z,h)},m.step=function(y,v,_){var h=this.shape[0],S=this.shape[1],A=this.shape[2],E=this.stride[0],P=this.stride[1],I=this.stride[2],D=this.offset,z=0,V=Math.ceil;return typeof y=="number"&&((z=0|y)<0?(D+=E*(h-1),h=V(-h/z)):h=V(h/z),E*=z),typeof v=="number"&&((z=0|v)<0?(D+=P*(S-1),S=V(-S/z)):S=V(S/z),P*=z),typeof _=="number"&&((z=0|_)<0?(D+=I*(A-1),A=V(-A/z)):A=V(A/z),I*=z),new g(this.data,h,S,A,E,P,I,D)},m.transpose=function(y,v,_){y=y===void 0?0:0|y,v=v===void 0?1:0|v,_=_===void 0?2:0|_;var h=this.shape,S=this.stride;return new g(this.data,h[y],h[v],h[_],S[y],S[v],S[_],this.offset)},m.pick=function(y,v,_){var h=[],S=[],A=this.offset;return typeof y=="number"&&y>=0?A=A+this.stride[0]*y|0:(h.push(this.shape[0]),S.push(this.stride[0])),typeof v=="number"&&v>=0?A=A+this.stride[1]*v|0:(h.push(this.shape[1]),S.push(this.stride[1])),typeof _=="number"&&_>=0?A=A+this.stride[2]*_|0:(h.push(this.shape[2]),S.push(this.stride[2])),(0,x[h.length+1])(this.data,h,S,A)},function(y,v,_,h){return new g(y,v[0],v[1],v[2],_[0],_[1],_[2],h)}},4:function(u,x,p){function g(y,v,_,h,S,A,E,P,I,D){this.data=y,this.shape=[v,_,h,S],this.stride=[A,E,P,I],this.offset=0|D}var m=g.prototype;return m.dtype=u,m.dimension=4,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(m,"order",{get:p}),m.set=function(y,v,_,h,S){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h,S):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h]=S},m.get=function(y,v,_,h){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h]},m.index=function(y,v,_,h){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h},m.hi=function(y,v,_,h){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof _!="number"||_<0?this.shape[2]:0|_,typeof h!="number"||h<0?this.shape[3]:0|h,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},m.lo=function(y,v,_,h){var S=this.offset,A=0,E=this.shape[0],P=this.shape[1],I=this.shape[2],D=this.shape[3],z=this.stride[0],V=this.stride[1],O=this.stride[2],j=this.stride[3];return typeof y=="number"&&y>=0&&(S+=z*(A=0|y),E-=A),typeof v=="number"&&v>=0&&(S+=V*(A=0|v),P-=A),typeof _=="number"&&_>=0&&(S+=O*(A=0|_),I-=A),typeof h=="number"&&h>=0&&(S+=j*(A=0|h),D-=A),new g(this.data,E,P,I,D,z,V,O,j,S)},m.step=function(y,v,_,h){var S=this.shape[0],A=this.shape[1],E=this.shape[2],P=this.shape[3],I=this.stride[0],D=this.stride[1],z=this.stride[2],V=this.stride[3],O=this.offset,j=0,Y=Math.ceil;return typeof y=="number"&&((j=0|y)<0?(O+=I*(S-1),S=Y(-S/j)):S=Y(S/j),I*=j),typeof v=="number"&&((j=0|v)<0?(O+=D*(A-1),A=Y(-A/j)):A=Y(A/j),D*=j),typeof _=="number"&&((j=0|_)<0?(O+=z*(E-1),E=Y(-E/j)):E=Y(E/j),z*=j),typeof h=="number"&&((j=0|h)<0?(O+=V*(P-1),P=Y(-P/j)):P=Y(P/j),V*=j),new g(this.data,S,A,E,P,I,D,z,V,O)},m.transpose=function(y,v,_,h){y=y===void 0?0:0|y,v=v===void 0?1:0|v,_=_===void 0?2:0|_,h=h===void 0?3:0|h;var S=this.shape,A=this.stride;return new g(this.data,S[y],S[v],S[_],S[h],A[y],A[v],A[_],A[h],this.offset)},m.pick=function(y,v,_,h){var S=[],A=[],E=this.offset;return typeof y=="number"&&y>=0?E=E+this.stride[0]*y|0:(S.push(this.shape[0]),A.push(this.stride[0])),typeof v=="number"&&v>=0?E=E+this.stride[1]*v|0:(S.push(this.shape[1]),A.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(S.push(this.shape[2]),A.push(this.stride[2])),typeof h=="number"&&h>=0?E=E+this.stride[3]*h|0:(S.push(this.shape[3]),A.push(this.stride[3])),(0,x[S.length+1])(this.data,S,A,E)},function(y,v,_,h){return new g(y,v[0],v[1],v[2],v[3],_[0],_[1],_[2],_[3],h)}},5:function(u,x,p){function g(y,v,_,h,S,A,E,P,I,D,z,V){this.data=y,this.shape=[v,_,h,S,A],this.stride=[E,P,I,D,z],this.offset=0|V}var m=g.prototype;return m.dtype=u,m.dimension=5,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(m,"order",{get:p}),m.set=function(y,v,_,h,S,A){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h+this.stride[4]*S,A):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h+this.stride[4]*S]=A},m.get=function(y,v,_,h,S){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h+this.stride[4]*S):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h+this.stride[4]*S]},m.index=function(y,v,_,h,S){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*h+this.stride[4]*S},m.hi=function(y,v,_,h,S){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof _!="number"||_<0?this.shape[2]:0|_,typeof h!="number"||h<0?this.shape[3]:0|h,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},m.lo=function(y,v,_,h,S){var A=this.offset,E=0,P=this.shape[0],I=this.shape[1],D=this.shape[2],z=this.shape[3],V=this.shape[4],O=this.stride[0],j=this.stride[1],Y=this.stride[2],B=this.stride[3],U=this.stride[4];return typeof y=="number"&&y>=0&&(A+=O*(E=0|y),P-=E),typeof v=="number"&&v>=0&&(A+=j*(E=0|v),I-=E),typeof _=="number"&&_>=0&&(A+=Y*(E=0|_),D-=E),typeof h=="number"&&h>=0&&(A+=B*(E=0|h),z-=E),typeof S=="number"&&S>=0&&(A+=U*(E=0|S),V-=E),new g(this.data,P,I,D,z,V,O,j,Y,B,U,A)},m.step=function(y,v,_,h,S){var A=this.shape[0],E=this.shape[1],P=this.shape[2],I=this.shape[3],D=this.shape[4],z=this.stride[0],V=this.stride[1],O=this.stride[2],j=this.stride[3],Y=this.stride[4],B=this.offset,U=0,q=Math.ceil;return typeof y=="number"&&((U=0|y)<0?(B+=z*(A-1),A=q(-A/U)):A=q(A/U),z*=U),typeof v=="number"&&((U=0|v)<0?(B+=V*(E-1),E=q(-E/U)):E=q(E/U),V*=U),typeof _=="number"&&((U=0|_)<0?(B+=O*(P-1),P=q(-P/U)):P=q(P/U),O*=U),typeof h=="number"&&((U=0|h)<0?(B+=j*(I-1),I=q(-I/U)):I=q(I/U),j*=U),typeof S=="number"&&((U=0|S)<0?(B+=Y*(D-1),D=q(-D/U)):D=q(D/U),Y*=U),new g(this.data,A,E,P,I,D,z,V,O,j,Y,B)},m.transpose=function(y,v,_,h,S){y=y===void 0?0:0|y,v=v===void 0?1:0|v,_=_===void 0?2:0|_,h=h===void 0?3:0|h,S=S===void 0?4:0|S;var A=this.shape,E=this.stride;return new g(this.data,A[y],A[v],A[_],A[h],A[S],E[y],E[v],E[_],E[h],E[S],this.offset)},m.pick=function(y,v,_,h,S){var A=[],E=[],P=this.offset;return typeof y=="number"&&y>=0?P=P+this.stride[0]*y|0:(A.push(this.shape[0]),E.push(this.stride[0])),typeof v=="number"&&v>=0?P=P+this.stride[1]*v|0:(A.push(this.shape[1]),E.push(this.stride[1])),typeof _=="number"&&_>=0?P=P+this.stride[2]*_|0:(A.push(this.shape[2]),E.push(this.stride[2])),typeof h=="number"&&h>=0?P=P+this.stride[3]*h|0:(A.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?P=P+this.stride[4]*S|0:(A.push(this.shape[4]),E.push(this.stride[4])),(0,x[A.length+1])(this.data,A,E,P)},function(y,v,_,h){return new g(y,v[0],v[1],v[2],v[3],v[4],_[0],_[1],_[2],_[3],_[4],h)}}};function c(u,x){var p=x===-1?"T":String(x),g=l[p];return x===-1?g(u):x===0?g(u,d[u][0]):g(u,d[u],o)}var d={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};f.exports=function(u,x,p,g){if(u===void 0)return(0,d.array[0])([]);typeof u=="number"&&(u=[u]),x===void 0&&(x=[u.length]);var m=x.length;if(p===void 0){p=new Array(m);for(var y=m-1,v=1;y>=0;--y)p[y]=v,v*=x[y]}if(g===void 0)for(g=0,y=0;y<m;++y)p[y]<0&&(g-=(x[y]-1)*p[y]);for(var _=function(S){if(i(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(u),h=d[_];h.length<=m+1;)h.push(c(_,h.length-1));return(0,h[m+1])(u,x,p,g)}},1278:function(f,s,t){"use strict";var i=t(2361),r=Math.pow(2,-1074),n=-1>>>0;f.exports=function(o,l){if(isNaN(o)||isNaN(l))return NaN;if(o===l)return o;if(o===0)return l<0?-r:r;var c=i.hi(o),d=i.lo(o);return l>o==o>0?d===n?(c+=1,d=0):d+=1:d===0?(d=n,c-=1):d-=1,i.pack(d,c)}},8406:function(f,s){s.vertexNormals=function(t,i,r){for(var n=i.length,o=new Array(n),l=r===void 0?1e-6:r,c=0;c<n;++c)o[c]=[0,0,0];for(c=0;c<t.length;++c)for(var d=t[c],u=0,x=d[d.length-1],p=d[0],g=0;g<d.length;++g){u=x,x=p,p=d[(g+1)%d.length];for(var m=i[u],y=i[x],v=i[p],_=new Array(3),h=0,S=new Array(3),A=0,E=0;E<3;++E)_[E]=m[E]-y[E],h+=_[E]*_[E],S[E]=v[E]-y[E],A+=S[E]*S[E];if(h*A>l){var P=o[x],I=1/Math.sqrt(h*A);for(E=0;E<3;++E){var D=(E+1)%3,z=(E+2)%3;P[E]+=I*(S[D]*_[z]-S[z]*_[D])}}}for(c=0;c<n;++c){P=o[c];var V=0;for(E=0;E<3;++E)V+=P[E]*P[E];if(V>l)for(I=1/Math.sqrt(V),E=0;E<3;++E)P[E]*=I;else for(E=0;E<3;++E)P[E]=0}return o},s.faceNormals=function(t,i,r){for(var n=t.length,o=new Array(n),l=r===void 0?1e-6:r,c=0;c<n;++c){for(var d=t[c],u=new Array(3),x=0;x<3;++x)u[x]=i[d[x]];var p=new Array(3),g=new Array(3);for(x=0;x<3;++x)p[x]=u[1][x]-u[0][x],g[x]=u[2][x]-u[0][x];var m=new Array(3),y=0;for(x=0;x<3;++x){var v=(x+1)%3,_=(x+2)%3;m[x]=p[v]*g[_]-p[_]*g[v],y+=m[x]*m[x]}for(y=y>l?1/Math.sqrt(y):0,x=0;x<3;++x)m[x]*=y;o[c]=m}return o}},4081:function(f){"use strict";f.exports=function(s,t,i,r,n,o,l,c,d,u){var x=t+o+u;if(p>0){var p=Math.sqrt(x+1);s[0]=.5*(l-d)/p,s[1]=.5*(c-r)/p,s[2]=.5*(i-o)/p,s[3]=.5*p}else{var g=Math.max(t,o,u);p=Math.sqrt(2*g-x+1),t>=g?(s[0]=.5*p,s[1]=.5*(n+i)/p,s[2]=.5*(c+r)/p,s[3]=.5*(l-d)/p):o>=g?(s[0]=.5*(i+n)/p,s[1]=.5*p,s[2]=.5*(d+l)/p,s[3]=.5*(c-r)/p):(s[0]=.5*(r+c)/p,s[1]=.5*(l+d)/p,s[2]=.5*p,s[3]=.5*(i-n)/p)}return s}},9977:function(f,s,t){"use strict";f.exports=function(g){var m=(g=g||{}).center||[0,0,0],y=g.rotation||[0,0,0,1],v=g.radius||1;m=[].slice.call(m,0,3),u(y=[].slice.call(y,0,4),y);var _=new x(y,m,Math.log(v));return _.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&_.lookAt(0,g.eye,g.center,g.up),_};var i=t(9215),r=t(6582),n=t(7399),o=t(7608),l=t(4081);function c(g,m,y){return Math.sqrt(Math.pow(g,2)+Math.pow(m,2)+Math.pow(y,2))}function d(g,m,y,v){return Math.sqrt(Math.pow(g,2)+Math.pow(m,2)+Math.pow(y,2)+Math.pow(v,2))}function u(g,m){var y=m[0],v=m[1],_=m[2],h=m[3],S=d(y,v,_,h);S>1e-6?(g[0]=y/S,g[1]=v/S,g[2]=_/S,g[3]=h/S):(g[0]=g[1]=g[2]=0,g[3]=1)}function x(g,m,y){this.radius=i([y]),this.center=i(m),this.rotation=i(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=x.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var m=this.computedRotation;u(m,m);var y=this.computedMatrix;n(y,m);var v=this.computedCenter,_=this.computedEye,h=this.computedUp,S=Math.exp(this.computedRadius[0]);_[0]=v[0]+S*y[2],_[1]=v[1]+S*y[6],_[2]=v[2]+S*y[10],h[0]=y[1],h[1]=y[5],h[2]=y[9];for(var A=0;A<3;++A){for(var E=0,P=0;P<3;++P)E+=y[A+4*P]*_[P];y[12+A]=-E}},p.getMatrix=function(g,m){this.recalcMatrix(g);var y=this.computedMatrix;if(m){for(var v=0;v<16;++v)m[v]=y[v];return m}return y},p.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},p.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},p.pan=function(g,m,y,v){m=m||0,y=y||0,v=v||0,this.recalcMatrix(g);var _=this.computedMatrix,h=_[1],S=_[5],A=_[9],E=c(h,S,A);h/=E,S/=E,A/=E;var P=_[0],I=_[4],D=_[8],z=P*h+I*S+D*A,V=c(P-=h*z,I-=S*z,D-=A*z);P/=V,I/=V,D/=V;var O=_[2],j=_[6],Y=_[10],B=O*h+j*S+Y*A,U=O*P+j*I+Y*D,q=c(O-=B*h+U*P,j-=B*S+U*I,Y-=B*A+U*D);O/=q,j/=q,Y/=q;var te=P*m+h*y,ee=I*m+S*y,Q=D*m+A*y;this.center.move(g,te,ee,Q);var J=Math.exp(this.computedRadius[0]);J=Math.max(1e-4,J+v),this.radius.set(g,Math.log(J))},p.rotate=function(g,m,y,v){this.recalcMatrix(g),m=m||0,y=y||0;var _=this.computedMatrix,h=_[0],S=_[4],A=_[8],E=_[1],P=_[5],I=_[9],D=_[2],z=_[6],V=_[10],O=m*h+y*E,j=m*S+y*P,Y=m*A+y*I,B=-(z*Y-V*j),U=-(V*O-D*Y),q=-(D*j-z*O),te=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(U,2)-Math.pow(q,2))),ee=d(B,U,q,te);ee>1e-6?(B/=ee,U/=ee,q/=ee,te/=ee):(B=U=q=0,te=1);var Q=this.computedRotation,J=Q[0],K=Q[1],X=Q[2],ie=Q[3],se=J*te+ie*B+K*q-X*U,ae=K*te+ie*U+X*B-J*q,ue=X*te+ie*q+J*U-K*B,ve=ie*te-J*B-K*U-X*q;if(v){B=D,U=z,q=V;var ye=Math.sin(v)/c(B,U,q);B*=ye,U*=ye,q*=ye,ve=ve*(te=Math.cos(m))-(se=se*te+ve*B+ae*q-ue*U)*B-(ae=ae*te+ve*U+ue*B-se*q)*U-(ue=ue*te+ve*q+se*U-ae*B)*q}var pe=d(se,ae,ue,ve);pe>1e-6?(se/=pe,ae/=pe,ue/=pe,ve/=pe):(se=ae=ue=0,ve=1),this.rotation.set(g,se,ae,ue,ve)},p.lookAt=function(g,m,y,v){this.recalcMatrix(g),y=y||this.computedCenter,m=m||this.computedEye,v=v||this.computedUp;var _=this.computedMatrix;r(_,m,y,v);var h=this.computedRotation;l(h,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),u(h,h),this.rotation.set(g,h[0],h[1],h[2],h[3]);for(var S=0,A=0;A<3;++A)S+=Math.pow(y[A]-m[A],2);this.radius.set(g,.5*Math.log(Math.max(S,1e-6))),this.center.set(g,y[0],y[1],y[2])},p.translate=function(g,m,y,v){this.center.move(g,m||0,y||0,v||0)},p.setMatrix=function(g,m){var y=this.computedRotation;l(y,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),u(y,y),this.rotation.set(g,y[0],y[1],y[2],y[3]);var v=this.computedMatrix;o(v,m);var _=v[15];if(Math.abs(_)>1e-6){var h=v[12]/_,S=v[13]/_,A=v[14]/_;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,h-v[2]*E,S-v[6]*E,A-v[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},p.setDistance=function(g,m){m>0&&this.radius.set(g,Math.log(m))},p.setDistanceLimits=function(g,m){g=g>0?Math.log(g):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=m},p.getDistanceLimits=function(g){var m=this.radius.bounds;return g?(g[0]=Math.exp(m[0][0]),g[1]=Math.exp(m[1][0]),g):[Math.exp(m[0][0]),Math.exp(m[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(g){var m=this.lastT(),y=g.center;y&&this.center.set(m,y[0],y[1],y[2]);var v=g.rotation;v&&this.rotation.set(m,v[0],v[1],v[2],v[3]);var _=g.distance;_&&_>0&&this.radius.set(m,Math.log(_)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},1371:function(f,s,t){"use strict";var i=t(3233);f.exports=function(r,n,o){return i(o=o!==void 0?o+"":" ",n)+r}},3202:function(f){f.exports=function(s,t){t||(t=[0,""]),s=String(s);var i=parseFloat(s,10);return t[0]=i,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(f,s,t){"use strict";f.exports=function(r,n){for(var o=0|n.length,l=r.length,c=[new Array(o),new Array(o)],d=0;d<o;++d)c[0][d]=[],c[1][d]=[];for(d=0;d<l;++d){var u=r[d];c[0][u[0]].push(u),c[1][u[1]].push(u)}var x=[];for(d=0;d<o;++d)c[0][d].length+c[1][d].length===0&&x.push([d]);function p(S,A){var E=c[A][S[A]];E.splice(E.indexOf(S),1)}function g(S,A,E){for(var P,I,D,z=0;z<2;++z)if(c[z][A].length>0){P=c[z][A][0],D=z;break}I=P[1^D];for(var V=0;V<2;++V)for(var O=c[V][A],j=0;j<O.length;++j){var Y=O[j],B=Y[1^V];i(n[S],n[A],n[I],n[B])>0&&(P=Y,I=B,D=V)}return E||P&&p(P,D),I}function m(S,A){var E=c[A][S][0],P=[S];p(E,A);for(var I=E[1^A];;){for(;I!==S;)P.push(I),I=g(P[P.length-2],I,!1);if(c[0][S].length+c[1][S].length===0)break;var D=P[P.length-1],z=S,V=P[1],O=g(D,z,!0);if(i(n[D],n[z],n[V],n[O])<0)break;P.push(S),I=g(D,z)}return P}function y(S,A){return A[1]===A[A.length-1]}for(d=0;d<o;++d)for(var v=0;v<2;++v){for(var _=[];c[v][d].length>0;){c[0][d].length;var h=m(d,v);y(0,h)?_.push.apply(_,h):(_.length>0&&x.push(_),_=h)}_.length>0&&x.push(_)}return x};var i=t(3140)},5609:function(f,s,t){"use strict";f.exports=function(r,n){for(var o=i(r,n.length),l=new Array(n.length),c=new Array(n.length),d=[],u=0;u<n.length;++u){var x=o[u].length;c[u]=x,l[u]=!0,x<=1&&d.push(u)}for(;d.length>0;){l[v=d.pop()]=!1;var p=o[v];for(u=0;u<p.length;++u){var g=p[u];--c[g]==0&&d.push(g)}}var m=new Array(n.length),y=[];for(u=0;u<n.length;++u)if(l[u]){var v=y.length;m[u]=v,y.push(n[u])}else m[u]=-1;var _=[];for(u=0;u<r.length;++u){var h=r[u];l[h[0]]&&l[h[1]]&&_.push([m[h[0]],m[h[1]]])}return[_,y]};var i=t(3134)},2095:function(f,s,t){"use strict";f.exports=function(x,p){var g=d(x,p);x=g[0];for(var m=(p=g[1]).length,y=(x.length,i(x,p.length)),v=0;v<m;++v)if(y[v].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=r(x,p),h=(_=_.filter(function(ke){for(var Ce=ke.length,ge=[0],oe=0;oe<Ce;++oe){var re=p[ke[oe]],fe=p[ke[(oe+1)%Ce]],Se=o(-re[0],re[1]),be=o(-re[0],fe[1]),we=o(fe[0],re[1]),Me=o(fe[0],fe[1]);ge=l(ge,l(l(Se,be),l(we,Me)))}return ge[ge.length-1]>0})).length,S=new Array(h),A=new Array(h);for(v=0;v<h;++v){S[v]=v;var E=new Array(h),P=_[v].map(function(ke){return p[ke]}),I=n([P]),D=0;e:for(var z=0;z<h;++z)if(E[z]=0,v!==z){for(var V=(de=_[z]).length,O=0;O<V;++O){var j=I(p[de[O]]);if(j!==0){j<0&&(E[z]=1,D+=1);continue e}}E[z]=1,D+=1}A[v]=[D,v,E]}for(A.sort(function(ke,Ce){return Ce[0]-ke[0]}),v=0;v<h;++v){var Y=(E=A[v])[1],B=E[2];for(z=0;z<h;++z)B[z]&&(S[z]=Y)}var U=function(ke){for(var Ce=new Array(ke),ge=0;ge<ke;++ge)Ce[ge]=[];return Ce}(h);for(v=0;v<h;++v)U[v].push(S[v]),U[S[v]].push(v);var q={},te=u(m,!1);for(v=0;v<h;++v)for(V=(de=_[v]).length,z=0;z<V;++z){var ee=de[z],Q=de[(z+1)%V],J=Math.min(ee,Q)+":"+Math.max(ee,Q);if(J in q){var K=q[J];U[K].push(v),U[v].push(K),te[ee]=te[Q]=!0}else q[J]=v}function X(ke){for(var Ce=ke.length,ge=0;ge<Ce;++ge)if(!te[ke[ge]])return!1;return!0}var ie=[],se=u(h,-1);for(v=0;v<h;++v)S[v]!==v||X(_[v])?se[v]=-1:(ie.push(v),se[v]=0);for(g=[];ie.length>0;){var ae=ie.pop(),ue=U[ae];c(ue,function(ke,Ce){return ke-Ce});var ve,ye=ue.length,pe=se[ae];for(pe===0&&(ve=[de=_[ae]]),v=0;v<ye;++v){var de,me=ue[v];se[me]>=0||(se[me]=1^pe,ie.push(me),pe===0&&(X(de=_[me])||(de.reverse(),ve.push(de))))}pe===0&&g.push(ve)}return g};var i=t(3134),r=t(3088),n=t(5085),o=t(5250),l=t(8210),c=t(1682),d=t(5609);function u(x,p){for(var g=new Array(x),m=0;m<x;++m)g[m]=p;return g}},5085:function(f,s,t){f.exports=function(u){for(var x=u.length,p=[],g=[],m=0;m<x;++m)for(var y=u[m],v=y.length,_=v-1,h=0;h<v;_=h++){var S=y[_],A=y[h];S[0]===A[0]?g.push([S,A]):p.push([S,A])}if(p.length===0)return g.length===0?d:(E=c(g),function(D){return E(D[0],D[1])?0:1});var E,P=r(p),I=function(D,z){return function(V){var O=o.le(z,V[0]);if(O<0)return 1;var j=D[O];if(!j){if(!(O>0&&z[O]===V[0]))return 1;j=D[O-1]}for(var Y=1;j;){var B=j.key,U=i(V,B[0],B[1]);if(B[0][0]<B[1][0])if(U<0)j=j.left;else{if(!(U>0))return 0;Y=-1,j=j.right}else if(U>0)j=j.left;else{if(!(U<0))return 0;Y=1,j=j.right}}return Y}}(P.slabs,P.coordinates);return g.length===0?I:function(D,z){return function(V){return D(V[0],V[1])?0:z(V)}}(c(g),I)};var i=t(3250)[3],r=t(4209),n=t(3352),o=t(2478);function l(){return!0}function c(u){for(var x={},p=0;p<u.length;++p){var g=u[p],m=g[0][0],y=g[0][1],v=g[1][1],_=[Math.min(y,v),Math.max(y,v)];m in x?x[m].push(_):x[m]=[_]}var h={},S=Object.keys(x);for(p=0;p<S.length;++p){var A=x[S[p]];h[S[p]]=n(A)}return function(E){return function(P,I){var D=E[P];return!!D&&!!D.queryPoint(I,l)}}(h)}function d(u){return 1}},9346:function(f){"use strict";var s=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);f.exports=function(r,n,o,l,c){s.length<l.length&&(s=new Float64Array(l.length),t=new Float64Array(l.length),i=new Float64Array(l.length));for(var d=0;d<l.length;++d)s[d]=r[d]-l[d],t[d]=n[d]-r[d],i[d]=o[d]-r[d];var u=0,x=0,p=0,g=0,m=0,y=0;for(d=0;d<l.length;++d){var v=t[d],_=i[d],h=s[d];u+=v*v,x+=v*_,p+=_*_,g+=h*v,m+=h*_,y+=h*h}var S,A,E,P,I,D=Math.abs(u*p-x*x),z=x*m-p*g,V=x*g-u*m;if(z+V<=D)if(z<0)V<0&&g<0?(V=0,-g>=u?(z=1,S=u+2*g+y):S=g*(z=-g/u)+y):(z=0,m>=0?(V=0,S=y):-m>=p?(V=1,S=p+2*m+y):S=m*(V=-m/p)+y);else if(V<0)V=0,g>=0?(z=0,S=y):-g>=u?(z=1,S=u+2*g+y):S=g*(z=-g/u)+y;else{var O=1/D;S=(z*=O)*(u*z+x*(V*=O)+2*g)+V*(x*z+p*V+2*m)+y}else z<0?(E=p+m)>(A=x+g)?(P=E-A)>=(I=u-2*x+p)?(z=1,V=0,S=u+2*g+y):S=(z=P/I)*(u*z+x*(V=1-z)+2*g)+V*(x*z+p*V+2*m)+y:(z=0,E<=0?(V=1,S=p+2*m+y):m>=0?(V=0,S=y):S=m*(V=-m/p)+y):V<0?(E=u+g)>(A=x+m)?(P=E-A)>=(I=u-2*x+p)?(V=1,z=0,S=p+2*m+y):S=(z=1-(V=P/I))*(u*z+x*V+2*g)+V*(x*z+p*V+2*m)+y:(V=0,E<=0?(z=1,S=u+2*g+y):g>=0?(z=0,S=y):S=g*(z=-g/u)+y):(P=p+m-x-g)<=0?(z=0,V=1,S=p+2*m+y):P>=(I=u-2*x+p)?(z=1,V=0,S=u+2*g+y):S=(z=P/I)*(u*z+x*(V=1-z)+2*g)+V*(x*z+p*V+2*m)+y;var j=1-z-V;for(d=0;d<l.length;++d)c[d]=j*r[d]+z*n[d]+V*o[d];return S<0?0:S}},8648:function(f,s,t){f.exports=t(783)},2653:function(f,s,t){"use strict";var i=t(3865);f.exports=function(r,n){for(var o=r.length,l=new Array(o),c=0;c<o;++c)l[c]=i(r[c],n[c]);return l}},5838:function(f,s,t){"use strict";f.exports=function(r){for(var n=new Array(r.length),o=0;o<r.length;++o)n[o]=i(r[o]);return n};var i=t(7842)},8987:function(f,s,t){"use strict";var i=t(7842),r=t(6504);f.exports=function(n,o){for(var l=i(o),c=n.length,d=new Array(c),u=0;u<c;++u)d[u]=r(n[u],l);return d}},544:function(f,s,t){"use strict";var i=t(5572);f.exports=function(r,n){for(var o=r.length,l=new Array(o),c=0;c<o;++c)l[c]=i(r[c],n[c]);return l}},5771:function(f,s,t){"use strict";var i=t(8507),r=t(3788),n=t(2419);f.exports=function(o){o.sort(r);for(var l=o.length,c=0,d=0;d<l;++d){var u=o[d],x=n(u);if(x!==0){if(c>0){var p=o[c-1];if(i(u,p)===0&&n(p)!==x){c-=1;continue}}o[c++]=u}}return o.length=c,o}},3233:function(f){"use strict";var s,t="";f.exports=function(i,r){if(typeof i!="string")throw new TypeError("expected a string");if(r===1)return i;if(r===2)return i+i;var n=i.length*r;if(s!==i||s===void 0)s=i,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&r>1;)1&r&&(t+=i),r>>=1,i+=i;return t=(t+=i).substr(0,n)}},3025:function(f,s,t){f.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(f){"use strict";f.exports=function(s){for(var t=s.length,i=s[s.length-1],r=t,n=t-2;n>=0;--n){var o=i;(d=(c=s[n])-((i=o+c)-o))&&(s[--r]=i,i=d)}var l=0;for(n=r;n<t;++n){var c,d;(d=(c=i)-((i=(o=s[n])+c)-o))&&(s[l++]=d)}return s[l++]=i,s.length=l,s}},2962:function(f,s,t){"use strict";var i=t(5250),r=t(8210),n=t(3012),o=t(7004);function l(m,y,v,_){return function(h){return _(m(v(h[0][0],h[1][1]),v(-h[0][1],h[1][0])))}}function c(m,y,v,_){return function(h){return _(m(y(m(v(h[1][1],h[2][2]),v(-h[1][2],h[2][1])),h[0][0]),m(y(m(v(h[1][0],h[2][2]),v(-h[1][2],h[2][0])),-h[0][1]),y(m(v(h[1][0],h[2][1]),v(-h[1][1],h[2][0])),h[0][2]))))}}function d(m,y,v,_){return function(h){return _(m(m(y(m(y(m(v(h[2][2],h[3][3]),v(-h[2][3],h[3][2])),h[1][1]),m(y(m(v(h[2][1],h[3][3]),v(-h[2][3],h[3][1])),-h[1][2]),y(m(v(h[2][1],h[3][2]),v(-h[2][2],h[3][1])),h[1][3]))),h[0][0]),y(m(y(m(v(h[2][2],h[3][3]),v(-h[2][3],h[3][2])),h[1][0]),m(y(m(v(h[2][0],h[3][3]),v(-h[2][3],h[3][0])),-h[1][2]),y(m(v(h[2][0],h[3][2]),v(-h[2][2],h[3][0])),h[1][3]))),-h[0][1])),m(y(m(y(m(v(h[2][1],h[3][3]),v(-h[2][3],h[3][1])),h[1][0]),m(y(m(v(h[2][0],h[3][3]),v(-h[2][3],h[3][0])),-h[1][1]),y(m(v(h[2][0],h[3][1]),v(-h[2][1],h[3][0])),h[1][3]))),h[0][2]),y(m(y(m(v(h[2][1],h[3][2]),v(-h[2][2],h[3][1])),h[1][0]),m(y(m(v(h[2][0],h[3][2]),v(-h[2][2],h[3][0])),-h[1][1]),y(m(v(h[2][0],h[3][1]),v(-h[2][1],h[3][0])),h[1][2]))),-h[0][3]))))}}function u(m,y,v,_){return function(h){return _(m(m(y(m(m(y(m(y(m(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][2]),m(y(m(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),-h[2][3]),y(m(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][4]))),h[1][1]),y(m(y(m(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][1]),m(y(m(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][3]),y(m(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][4]))),-h[1][2])),m(y(m(y(m(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][1]),m(y(m(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][2]),y(m(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][4]))),h[1][3]),y(m(y(m(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][1]),m(y(m(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),-h[2][2]),y(m(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][3]))),-h[1][4]))),h[0][0]),y(m(m(y(m(y(m(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][2]),m(y(m(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),-h[2][3]),y(m(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][4]))),h[1][0]),y(m(y(m(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][0]),m(y(m(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][3]),y(m(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),h[2][4]))),-h[1][2])),m(y(m(y(m(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][0]),m(y(m(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][2]),y(m(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][4]))),h[1][3]),y(m(y(m(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][0]),m(y(m(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][2]),y(m(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][3]))),-h[1][4]))),-h[0][1])),m(y(m(m(y(m(y(m(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][1]),m(y(m(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][3]),y(m(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][4]))),h[1][0]),y(m(y(m(v(h[3][3],h[4][4]),v(-h[3][4],h[4][3])),h[2][0]),m(y(m(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][3]),y(m(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),h[2][4]))),-h[1][1])),m(y(m(y(m(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),h[2][0]),m(y(m(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][1]),y(m(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][4]))),h[1][3]),y(m(y(m(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][0]),m(y(m(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][1]),y(m(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][3]))),-h[1][4]))),h[0][2]),m(y(m(m(y(m(y(m(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][1]),m(y(m(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),-h[2][2]),y(m(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][4]))),h[1][0]),y(m(y(m(v(h[3][2],h[4][4]),v(-h[3][4],h[4][2])),h[2][0]),m(y(m(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][2]),y(m(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][4]))),-h[1][1])),m(y(m(y(m(v(h[3][1],h[4][4]),v(-h[3][4],h[4][1])),h[2][0]),m(y(m(v(h[3][0],h[4][4]),v(-h[3][4],h[4][0])),-h[2][1]),y(m(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][4]))),h[1][2]),y(m(y(m(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][0]),m(y(m(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),-h[2][1]),y(m(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][2]))),-h[1][4]))),-h[0][3]),y(m(m(y(m(y(m(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][1]),m(y(m(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),-h[2][2]),y(m(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][3]))),h[1][0]),y(m(y(m(v(h[3][2],h[4][3]),v(-h[3][3],h[4][2])),h[2][0]),m(y(m(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][2]),y(m(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),h[2][3]))),-h[1][1])),m(y(m(y(m(v(h[3][1],h[4][3]),v(-h[3][3],h[4][1])),h[2][0]),m(y(m(v(h[3][0],h[4][3]),v(-h[3][3],h[4][0])),-h[2][1]),y(m(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][3]))),h[1][2]),y(m(y(m(v(h[3][1],h[4][2]),v(-h[3][2],h[4][1])),h[2][0]),m(y(m(v(h[3][0],h[4][2]),v(-h[3][2],h[4][0])),-h[2][1]),y(m(v(h[3][0],h[4][1]),v(-h[3][1],h[4][0])),h[2][2]))),-h[1][3]))),h[0][4])))))}}function x(m){return(m===2?l:m===3?c:m===4?d:m===5?u:void 0)(r,n,i,o)}var p=[function(){return[0]},function(m){return[m[0][0]]}];function g(m,y,v,_,h,S,A,E){return function(P){switch(P.length){case 0:return m(P);case 1:return y(P);case 2:return v(P);case 3:return _(P);case 4:return h(P);case 5:return S(P)}var I=A[P.length];return I||(I=A[P.length]=E(P.length)),I(P)}}(function(){for(;p.length<6;)p.push(x(p.length));f.exports=g.apply(void 0,p.concat([p,x]));for(var m=0;m<p.length;++m)f.exports[m]=p[m]})()},1944:function(f,s,t){"use strict";var i=t(5250),r=t(8210);f.exports=function(n,o){for(var l=i(n[0],o[0]),c=1;c<n.length;++c)l=r(l,i(n[c],o[c]));return l}},2646:function(f,s,t){"use strict";var i=t(5250),r=t(8210),n=t(8545),o=t(3012);function l(y){return(y===3?c:y===4?d:y===5?u:x)(r,n,i,o)}function c(y,v,_,h){return function(S,A,E){var P=_(S[0],S[0]),I=h(P,A[0]),D=h(P,E[0]),z=_(A[0],A[0]),V=h(z,S[0]),O=h(z,E[0]),j=_(E[0],E[0]),Y=h(j,S[0]),B=h(j,A[0]),U=y(v(B,O),v(V,I)),q=v(Y,D),te=v(U,q);return te[te.length-1]}}function d(y,v,_,h){return function(S,A,E,P){var I=y(_(S[0],S[0]),_(S[1],S[1])),D=h(I,A[0]),z=h(I,E[0]),V=h(I,P[0]),O=y(_(A[0],A[0]),_(A[1],A[1])),j=h(O,S[0]),Y=h(O,E[0]),B=h(O,P[0]),U=y(_(E[0],E[0]),_(E[1],E[1])),q=h(U,S[0]),te=h(U,A[0]),ee=h(U,P[0]),Q=y(_(P[0],P[0]),_(P[1],P[1])),J=h(Q,S[0]),K=h(Q,A[0]),X=h(Q,E[0]),ie=y(y(h(v(X,ee),A[1]),y(h(v(K,B),-E[1]),h(v(te,Y),P[1]))),y(h(v(K,B),S[1]),y(h(v(J,V),-A[1]),h(v(j,D),P[1])))),se=y(y(h(v(X,ee),S[1]),y(h(v(J,V),-E[1]),h(v(q,z),P[1]))),y(h(v(te,Y),S[1]),y(h(v(q,z),-A[1]),h(v(j,D),E[1])))),ae=v(ie,se);return ae[ae.length-1]}}function u(y,v,_,h){return function(S,A,E,P,I){var D=y(_(S[0],S[0]),y(_(S[1],S[1]),_(S[2],S[2]))),z=h(D,A[0]),V=h(D,E[0]),O=h(D,P[0]),j=h(D,I[0]),Y=y(_(A[0],A[0]),y(_(A[1],A[1]),_(A[2],A[2]))),B=h(Y,S[0]),U=h(Y,E[0]),q=h(Y,P[0]),te=h(Y,I[0]),ee=y(_(E[0],E[0]),y(_(E[1],E[1]),_(E[2],E[2]))),Q=h(ee,S[0]),J=h(ee,A[0]),K=h(ee,P[0]),X=h(ee,I[0]),ie=y(_(P[0],P[0]),y(_(P[1],P[1]),_(P[2],P[2]))),se=h(ie,S[0]),ae=h(ie,A[0]),ue=h(ie,E[0]),ve=h(ie,I[0]),ye=y(_(I[0],I[0]),y(_(I[1],I[1]),_(I[2],I[2]))),pe=h(ye,S[0]),de=h(ye,A[0]),me=h(ye,E[0]),ke=h(ye,P[0]),Ce=y(y(y(h(y(h(v(ke,ve),E[1]),y(h(v(me,X),-P[1]),h(v(ue,K),I[1]))),A[2]),y(h(y(h(v(ke,ve),A[1]),y(h(v(de,te),-P[1]),h(v(ae,q),I[1]))),-E[2]),h(y(h(v(me,X),A[1]),y(h(v(de,te),-E[1]),h(v(J,U),I[1]))),P[2]))),y(h(y(h(v(ue,K),A[1]),y(h(v(ae,q),-E[1]),h(v(J,U),P[1]))),-I[2]),y(h(y(h(v(ke,ve),A[1]),y(h(v(de,te),-P[1]),h(v(ae,q),I[1]))),S[2]),h(y(h(v(ke,ve),S[1]),y(h(v(pe,j),-P[1]),h(v(se,O),I[1]))),-A[2])))),y(y(h(y(h(v(de,te),S[1]),y(h(v(pe,j),-A[1]),h(v(B,z),I[1]))),P[2]),y(h(y(h(v(ae,q),S[1]),y(h(v(se,O),-A[1]),h(v(B,z),P[1]))),-I[2]),h(y(h(v(ue,K),A[1]),y(h(v(ae,q),-E[1]),h(v(J,U),P[1]))),S[2]))),y(h(y(h(v(ue,K),S[1]),y(h(v(se,O),-E[1]),h(v(Q,V),P[1]))),-A[2]),y(h(y(h(v(ae,q),S[1]),y(h(v(se,O),-A[1]),h(v(B,z),P[1]))),E[2]),h(y(h(v(J,U),S[1]),y(h(v(Q,V),-A[1]),h(v(B,z),E[1]))),-P[2]))))),ge=y(y(y(h(y(h(v(ke,ve),E[1]),y(h(v(me,X),-P[1]),h(v(ue,K),I[1]))),S[2]),h(y(h(v(ke,ve),S[1]),y(h(v(pe,j),-P[1]),h(v(se,O),I[1]))),-E[2])),y(h(y(h(v(me,X),S[1]),y(h(v(pe,j),-E[1]),h(v(Q,V),I[1]))),P[2]),h(y(h(v(ue,K),S[1]),y(h(v(se,O),-E[1]),h(v(Q,V),P[1]))),-I[2]))),y(y(h(y(h(v(me,X),A[1]),y(h(v(de,te),-E[1]),h(v(J,U),I[1]))),S[2]),h(y(h(v(me,X),S[1]),y(h(v(pe,j),-E[1]),h(v(Q,V),I[1]))),-A[2])),y(h(y(h(v(de,te),S[1]),y(h(v(pe,j),-A[1]),h(v(B,z),I[1]))),E[2]),h(y(h(v(J,U),S[1]),y(h(v(Q,V),-A[1]),h(v(B,z),E[1]))),-I[2])))),oe=v(Ce,ge);return oe[oe.length-1]}}function x(y,v,_,h){return function(S,A,E,P,I,D){var z=y(y(_(S[0],S[0]),_(S[1],S[1])),y(_(S[2],S[2]),_(S[3],S[3]))),V=h(z,A[0]),O=h(z,E[0]),j=h(z,P[0]),Y=h(z,I[0]),B=h(z,D[0]),U=y(y(_(A[0],A[0]),_(A[1],A[1])),y(_(A[2],A[2]),_(A[3],A[3]))),q=h(U,S[0]),te=h(U,E[0]),ee=h(U,P[0]),Q=h(U,I[0]),J=h(U,D[0]),K=y(y(_(E[0],E[0]),_(E[1],E[1])),y(_(E[2],E[2]),_(E[3],E[3]))),X=h(K,S[0]),ie=h(K,A[0]),se=h(K,P[0]),ae=h(K,I[0]),ue=h(K,D[0]),ve=y(y(_(P[0],P[0]),_(P[1],P[1])),y(_(P[2],P[2]),_(P[3],P[3]))),ye=h(ve,S[0]),pe=h(ve,A[0]),de=h(ve,E[0]),me=h(ve,I[0]),ke=h(ve,D[0]),Ce=y(y(_(I[0],I[0]),_(I[1],I[1])),y(_(I[2],I[2]),_(I[3],I[3]))),ge=h(Ce,S[0]),oe=h(Ce,A[0]),re=h(Ce,E[0]),fe=h(Ce,P[0]),Se=h(Ce,D[0]),be=y(y(_(D[0],D[0]),_(D[1],D[1])),y(_(D[2],D[2]),_(D[3],D[3]))),we=h(be,S[0]),Me=h(be,A[0]),Pe=h(be,E[0]),De=h(be,P[0]),he=h(be,I[0]),_e=y(y(y(h(y(y(h(y(h(v(he,Se),P[1]),y(h(v(De,ke),-I[1]),h(v(fe,me),D[1]))),E[2]),h(y(h(v(he,Se),E[1]),y(h(v(Pe,ue),-I[1]),h(v(re,ae),D[1]))),-P[2])),y(h(y(h(v(De,ke),E[1]),y(h(v(Pe,ue),-P[1]),h(v(de,se),D[1]))),I[2]),h(y(h(v(fe,me),E[1]),y(h(v(re,ae),-P[1]),h(v(de,se),I[1]))),-D[2]))),A[3]),y(h(y(y(h(y(h(v(he,Se),P[1]),y(h(v(De,ke),-I[1]),h(v(fe,me),D[1]))),A[2]),h(y(h(v(he,Se),A[1]),y(h(v(Me,J),-I[1]),h(v(oe,Q),D[1]))),-P[2])),y(h(y(h(v(De,ke),A[1]),y(h(v(Me,J),-P[1]),h(v(pe,ee),D[1]))),I[2]),h(y(h(v(fe,me),A[1]),y(h(v(oe,Q),-P[1]),h(v(pe,ee),I[1]))),-D[2]))),-E[3]),h(y(y(h(y(h(v(he,Se),E[1]),y(h(v(Pe,ue),-I[1]),h(v(re,ae),D[1]))),A[2]),h(y(h(v(he,Se),A[1]),y(h(v(Me,J),-I[1]),h(v(oe,Q),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),A[1]),y(h(v(Me,J),-E[1]),h(v(ie,te),D[1]))),I[2]),h(y(h(v(re,ae),A[1]),y(h(v(oe,Q),-E[1]),h(v(ie,te),I[1]))),-D[2]))),P[3]))),y(y(h(y(y(h(y(h(v(De,ke),E[1]),y(h(v(Pe,ue),-P[1]),h(v(de,se),D[1]))),A[2]),h(y(h(v(De,ke),A[1]),y(h(v(Me,J),-P[1]),h(v(pe,ee),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),A[1]),y(h(v(Me,J),-E[1]),h(v(ie,te),D[1]))),P[2]),h(y(h(v(de,se),A[1]),y(h(v(pe,ee),-E[1]),h(v(ie,te),P[1]))),-D[2]))),-I[3]),h(y(y(h(y(h(v(fe,me),E[1]),y(h(v(re,ae),-P[1]),h(v(de,se),I[1]))),A[2]),h(y(h(v(fe,me),A[1]),y(h(v(oe,Q),-P[1]),h(v(pe,ee),I[1]))),-E[2])),y(h(y(h(v(re,ae),A[1]),y(h(v(oe,Q),-E[1]),h(v(ie,te),I[1]))),P[2]),h(y(h(v(de,se),A[1]),y(h(v(pe,ee),-E[1]),h(v(ie,te),P[1]))),-I[2]))),D[3])),y(h(y(y(h(y(h(v(he,Se),P[1]),y(h(v(De,ke),-I[1]),h(v(fe,me),D[1]))),A[2]),h(y(h(v(he,Se),A[1]),y(h(v(Me,J),-I[1]),h(v(oe,Q),D[1]))),-P[2])),y(h(y(h(v(De,ke),A[1]),y(h(v(Me,J),-P[1]),h(v(pe,ee),D[1]))),I[2]),h(y(h(v(fe,me),A[1]),y(h(v(oe,Q),-P[1]),h(v(pe,ee),I[1]))),-D[2]))),S[3]),h(y(y(h(y(h(v(he,Se),P[1]),y(h(v(De,ke),-I[1]),h(v(fe,me),D[1]))),S[2]),h(y(h(v(he,Se),S[1]),y(h(v(we,B),-I[1]),h(v(ge,Y),D[1]))),-P[2])),y(h(y(h(v(De,ke),S[1]),y(h(v(we,B),-P[1]),h(v(ye,j),D[1]))),I[2]),h(y(h(v(fe,me),S[1]),y(h(v(ge,Y),-P[1]),h(v(ye,j),I[1]))),-D[2]))),-A[3])))),y(y(y(h(y(y(h(y(h(v(he,Se),A[1]),y(h(v(Me,J),-I[1]),h(v(oe,Q),D[1]))),S[2]),h(y(h(v(he,Se),S[1]),y(h(v(we,B),-I[1]),h(v(ge,Y),D[1]))),-A[2])),y(h(y(h(v(Me,J),S[1]),y(h(v(we,B),-A[1]),h(v(q,V),D[1]))),I[2]),h(y(h(v(oe,Q),S[1]),y(h(v(ge,Y),-A[1]),h(v(q,V),I[1]))),-D[2]))),P[3]),h(y(y(h(y(h(v(De,ke),A[1]),y(h(v(Me,J),-P[1]),h(v(pe,ee),D[1]))),S[2]),h(y(h(v(De,ke),S[1]),y(h(v(we,B),-P[1]),h(v(ye,j),D[1]))),-A[2])),y(h(y(h(v(Me,J),S[1]),y(h(v(we,B),-A[1]),h(v(q,V),D[1]))),P[2]),h(y(h(v(pe,ee),S[1]),y(h(v(ye,j),-A[1]),h(v(q,V),P[1]))),-D[2]))),-I[3])),y(h(y(y(h(y(h(v(fe,me),A[1]),y(h(v(oe,Q),-P[1]),h(v(pe,ee),I[1]))),S[2]),h(y(h(v(fe,me),S[1]),y(h(v(ge,Y),-P[1]),h(v(ye,j),I[1]))),-A[2])),y(h(y(h(v(oe,Q),S[1]),y(h(v(ge,Y),-A[1]),h(v(q,V),I[1]))),P[2]),h(y(h(v(pe,ee),S[1]),y(h(v(ye,j),-A[1]),h(v(q,V),P[1]))),-I[2]))),D[3]),h(y(y(h(y(h(v(De,ke),E[1]),y(h(v(Pe,ue),-P[1]),h(v(de,se),D[1]))),A[2]),h(y(h(v(De,ke),A[1]),y(h(v(Me,J),-P[1]),h(v(pe,ee),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),A[1]),y(h(v(Me,J),-E[1]),h(v(ie,te),D[1]))),P[2]),h(y(h(v(de,se),A[1]),y(h(v(pe,ee),-E[1]),h(v(ie,te),P[1]))),-D[2]))),S[3]))),y(y(h(y(y(h(y(h(v(De,ke),E[1]),y(h(v(Pe,ue),-P[1]),h(v(de,se),D[1]))),S[2]),h(y(h(v(De,ke),S[1]),y(h(v(we,B),-P[1]),h(v(ye,j),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),S[1]),y(h(v(we,B),-E[1]),h(v(X,O),D[1]))),P[2]),h(y(h(v(de,se),S[1]),y(h(v(ye,j),-E[1]),h(v(X,O),P[1]))),-D[2]))),-A[3]),h(y(y(h(y(h(v(De,ke),A[1]),y(h(v(Me,J),-P[1]),h(v(pe,ee),D[1]))),S[2]),h(y(h(v(De,ke),S[1]),y(h(v(we,B),-P[1]),h(v(ye,j),D[1]))),-A[2])),y(h(y(h(v(Me,J),S[1]),y(h(v(we,B),-A[1]),h(v(q,V),D[1]))),P[2]),h(y(h(v(pe,ee),S[1]),y(h(v(ye,j),-A[1]),h(v(q,V),P[1]))),-D[2]))),E[3])),y(h(y(y(h(y(h(v(Pe,ue),A[1]),y(h(v(Me,J),-E[1]),h(v(ie,te),D[1]))),S[2]),h(y(h(v(Pe,ue),S[1]),y(h(v(we,B),-E[1]),h(v(X,O),D[1]))),-A[2])),y(h(y(h(v(Me,J),S[1]),y(h(v(we,B),-A[1]),h(v(q,V),D[1]))),E[2]),h(y(h(v(ie,te),S[1]),y(h(v(X,O),-A[1]),h(v(q,V),E[1]))),-D[2]))),-P[3]),h(y(y(h(y(h(v(de,se),A[1]),y(h(v(pe,ee),-E[1]),h(v(ie,te),P[1]))),S[2]),h(y(h(v(de,se),S[1]),y(h(v(ye,j),-E[1]),h(v(X,O),P[1]))),-A[2])),y(h(y(h(v(pe,ee),S[1]),y(h(v(ye,j),-A[1]),h(v(q,V),P[1]))),E[2]),h(y(h(v(ie,te),S[1]),y(h(v(X,O),-A[1]),h(v(q,V),E[1]))),-P[2]))),D[3]))))),Ae=y(y(y(h(y(y(h(y(h(v(he,Se),P[1]),y(h(v(De,ke),-I[1]),h(v(fe,me),D[1]))),E[2]),h(y(h(v(he,Se),E[1]),y(h(v(Pe,ue),-I[1]),h(v(re,ae),D[1]))),-P[2])),y(h(y(h(v(De,ke),E[1]),y(h(v(Pe,ue),-P[1]),h(v(de,se),D[1]))),I[2]),h(y(h(v(fe,me),E[1]),y(h(v(re,ae),-P[1]),h(v(de,se),I[1]))),-D[2]))),S[3]),y(h(y(y(h(y(h(v(he,Se),P[1]),y(h(v(De,ke),-I[1]),h(v(fe,me),D[1]))),S[2]),h(y(h(v(he,Se),S[1]),y(h(v(we,B),-I[1]),h(v(ge,Y),D[1]))),-P[2])),y(h(y(h(v(De,ke),S[1]),y(h(v(we,B),-P[1]),h(v(ye,j),D[1]))),I[2]),h(y(h(v(fe,me),S[1]),y(h(v(ge,Y),-P[1]),h(v(ye,j),I[1]))),-D[2]))),-E[3]),h(y(y(h(y(h(v(he,Se),E[1]),y(h(v(Pe,ue),-I[1]),h(v(re,ae),D[1]))),S[2]),h(y(h(v(he,Se),S[1]),y(h(v(we,B),-I[1]),h(v(ge,Y),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),S[1]),y(h(v(we,B),-E[1]),h(v(X,O),D[1]))),I[2]),h(y(h(v(re,ae),S[1]),y(h(v(ge,Y),-E[1]),h(v(X,O),I[1]))),-D[2]))),P[3]))),y(y(h(y(y(h(y(h(v(De,ke),E[1]),y(h(v(Pe,ue),-P[1]),h(v(de,se),D[1]))),S[2]),h(y(h(v(De,ke),S[1]),y(h(v(we,B),-P[1]),h(v(ye,j),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),S[1]),y(h(v(we,B),-E[1]),h(v(X,O),D[1]))),P[2]),h(y(h(v(de,se),S[1]),y(h(v(ye,j),-E[1]),h(v(X,O),P[1]))),-D[2]))),-I[3]),h(y(y(h(y(h(v(fe,me),E[1]),y(h(v(re,ae),-P[1]),h(v(de,se),I[1]))),S[2]),h(y(h(v(fe,me),S[1]),y(h(v(ge,Y),-P[1]),h(v(ye,j),I[1]))),-E[2])),y(h(y(h(v(re,ae),S[1]),y(h(v(ge,Y),-E[1]),h(v(X,O),I[1]))),P[2]),h(y(h(v(de,se),S[1]),y(h(v(ye,j),-E[1]),h(v(X,O),P[1]))),-I[2]))),D[3])),y(h(y(y(h(y(h(v(he,Se),E[1]),y(h(v(Pe,ue),-I[1]),h(v(re,ae),D[1]))),A[2]),h(y(h(v(he,Se),A[1]),y(h(v(Me,J),-I[1]),h(v(oe,Q),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),A[1]),y(h(v(Me,J),-E[1]),h(v(ie,te),D[1]))),I[2]),h(y(h(v(re,ae),A[1]),y(h(v(oe,Q),-E[1]),h(v(ie,te),I[1]))),-D[2]))),S[3]),h(y(y(h(y(h(v(he,Se),E[1]),y(h(v(Pe,ue),-I[1]),h(v(re,ae),D[1]))),S[2]),h(y(h(v(he,Se),S[1]),y(h(v(we,B),-I[1]),h(v(ge,Y),D[1]))),-E[2])),y(h(y(h(v(Pe,ue),S[1]),y(h(v(we,B),-E[1]),h(v(X,O),D[1]))),I[2]),h(y(h(v(re,ae),S[1]),y(h(v(ge,Y),-E[1]),h(v(X,O),I[1]))),-D[2]))),-A[3])))),y(y(y(h(y(y(h(y(h(v(he,Se),A[1]),y(h(v(Me,J),-I[1]),h(v(oe,Q),D[1]))),S[2]),h(y(h(v(he,Se),S[1]),y(h(v(we,B),-I[1]),h(v(ge,Y),D[1]))),-A[2])),y(h(y(h(v(Me,J),S[1]),y(h(v(we,B),-A[1]),h(v(q,V),D[1]))),I[2]),h(y(h(v(oe,Q),S[1]),y(h(v(ge,Y),-A[1]),h(v(q,V),I[1]))),-D[2]))),E[3]),h(y(y(h(y(h(v(Pe,ue),A[1]),y(h(v(Me,J),-E[1]),h(v(ie,te),D[1]))),S[2]),h(y(h(v(Pe,ue),S[1]),y(h(v(we,B),-E[1]),h(v(X,O),D[1]))),-A[2])),y(h(y(h(v(Me,J),S[1]),y(h(v(we,B),-A[1]),h(v(q,V),D[1]))),E[2]),h(y(h(v(ie,te),S[1]),y(h(v(X,O),-A[1]),h(v(q,V),E[1]))),-D[2]))),-I[3])),y(h(y(y(h(y(h(v(re,ae),A[1]),y(h(v(oe,Q),-E[1]),h(v(ie,te),I[1]))),S[2]),h(y(h(v(re,ae),S[1]),y(h(v(ge,Y),-E[1]),h(v(X,O),I[1]))),-A[2])),y(h(y(h(v(oe,Q),S[1]),y(h(v(ge,Y),-A[1]),h(v(q,V),I[1]))),E[2]),h(y(h(v(ie,te),S[1]),y(h(v(X,O),-A[1]),h(v(q,V),E[1]))),-I[2]))),D[3]),h(y(y(h(y(h(v(fe,me),E[1]),y(h(v(re,ae),-P[1]),h(v(de,se),I[1]))),A[2]),h(y(h(v(fe,me),A[1]),y(h(v(oe,Q),-P[1]),h(v(pe,ee),I[1]))),-E[2])),y(h(y(h(v(re,ae),A[1]),y(h(v(oe,Q),-E[1]),h(v(ie,te),I[1]))),P[2]),h(y(h(v(de,se),A[1]),y(h(v(pe,ee),-E[1]),h(v(ie,te),P[1]))),-I[2]))),S[3]))),y(y(h(y(y(h(y(h(v(fe,me),E[1]),y(h(v(re,ae),-P[1]),h(v(de,se),I[1]))),S[2]),h(y(h(v(fe,me),S[1]),y(h(v(ge,Y),-P[1]),h(v(ye,j),I[1]))),-E[2])),y(h(y(h(v(re,ae),S[1]),y(h(v(ge,Y),-E[1]),h(v(X,O),I[1]))),P[2]),h(y(h(v(de,se),S[1]),y(h(v(ye,j),-E[1]),h(v(X,O),P[1]))),-I[2]))),-A[3]),h(y(y(h(y(h(v(fe,me),A[1]),y(h(v(oe,Q),-P[1]),h(v(pe,ee),I[1]))),S[2]),h(y(h(v(fe,me),S[1]),y(h(v(ge,Y),-P[1]),h(v(ye,j),I[1]))),-A[2])),y(h(y(h(v(oe,Q),S[1]),y(h(v(ge,Y),-A[1]),h(v(q,V),I[1]))),P[2]),h(y(h(v(pe,ee),S[1]),y(h(v(ye,j),-A[1]),h(v(q,V),P[1]))),-I[2]))),E[3])),y(h(y(y(h(y(h(v(re,ae),A[1]),y(h(v(oe,Q),-E[1]),h(v(ie,te),I[1]))),S[2]),h(y(h(v(re,ae),S[1]),y(h(v(ge,Y),-E[1]),h(v(X,O),I[1]))),-A[2])),y(h(y(h(v(oe,Q),S[1]),y(h(v(ge,Y),-A[1]),h(v(q,V),I[1]))),E[2]),h(y(h(v(ie,te),S[1]),y(h(v(X,O),-A[1]),h(v(q,V),E[1]))),-I[2]))),-P[3]),h(y(y(h(y(h(v(de,se),A[1]),y(h(v(pe,ee),-E[1]),h(v(ie,te),P[1]))),S[2]),h(y(h(v(de,se),S[1]),y(h(v(ye,j),-E[1]),h(v(X,O),P[1]))),-A[2])),y(h(y(h(v(pe,ee),S[1]),y(h(v(ye,j),-A[1]),h(v(q,V),P[1]))),E[2]),h(y(h(v(ie,te),S[1]),y(h(v(X,O),-A[1]),h(v(q,V),E[1]))),-P[2]))),I[3]))))),Oe=v(_e,Ae);return Oe[Oe.length-1]}}var p=[function(){return 0},function(){return 0},function(){return 0}];function g(y){var v=p[y.length];return v||(v=p[y.length]=l(y.length)),v.apply(void 0,y)}function m(y,v,_,h,S,A,E,P){return function(I,D,z,V,O,j){switch(arguments.length){case 0:case 1:return 0;case 2:return h(I,D);case 3:return S(I,D,z);case 4:return A(I,D,z,V);case 5:return E(I,D,z,V,O);case 6:return P(I,D,z,V,O,j)}for(var Y=new Array(arguments.length),B=0;B<arguments.length;++B)Y[B]=arguments[B];return y(Y)}}(function(){for(;p.length<=6;)p.push(l(p.length));f.exports=m.apply(void 0,[g].concat(p));for(var y=0;y<=6;++y)f.exports[y]=p[y]})()},727:function(f,s,t){"use strict";var i=t(2962);function r(p){return(p===2?n:p===3?o:p===4?l:p===5?c:d)(p<6?i[p]:i)}function n(p){return function(g,m){return[p([[+m[0],+g[0][1]],[+m[1],+g[1][1]]]),p([[+g[0][0],+m[0]],[+g[1][0],+m[1]]]),p(g)]}}function o(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2]],[+m[1],+g[1][1],+g[1][2]],[+m[2],+g[2][1],+g[2][2]]]),p([[+g[0][0],+m[0],+g[0][2]],[+g[1][0],+m[1],+g[1][2]],[+g[2][0],+m[2],+g[2][2]]]),p([[+g[0][0],+g[0][1],+m[0]],[+g[1][0],+g[1][1],+m[1]],[+g[2][0],+g[2][1],+m[2]]]),p(g)]}}function l(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2],+g[0][3]],[+m[1],+g[1][1],+g[1][2],+g[1][3]],[+m[2],+g[2][1],+g[2][2],+g[2][3]],[+m[3],+g[3][1],+g[3][2],+g[3][3]]]),p([[+g[0][0],+m[0],+g[0][2],+g[0][3]],[+g[1][0],+m[1],+g[1][2],+g[1][3]],[+g[2][0],+m[2],+g[2][2],+g[2][3]],[+g[3][0],+m[3],+g[3][2],+g[3][3]]]),p([[+g[0][0],+g[0][1],+m[0],+g[0][3]],[+g[1][0],+g[1][1],+m[1],+g[1][3]],[+g[2][0],+g[2][1],+m[2],+g[2][3]],[+g[3][0],+g[3][1],+m[3],+g[3][3]]]),p([[+g[0][0],+g[0][1],+g[0][2],+m[0]],[+g[1][0],+g[1][1],+g[1][2],+m[1]],[+g[2][0],+g[2][1],+g[2][2],+m[2]],[+g[3][0],+g[3][1],+g[3][2],+m[3]]]),p(g)]}}function c(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+m[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+m[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+m[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+m[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),p([[+g[0][0],+m[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+m[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+m[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+m[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+m[4],+g[4][2],+g[4][3],+g[4][4]]]),p([[+g[0][0],+g[0][1],+m[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+m[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+m[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+m[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+m[4],+g[4][3],+g[4][4]]]),p([[+g[0][0],+g[0][1],+g[0][2],+m[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+m[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+m[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+m[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+m[4],+g[4][4]]]),p([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+m[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+m[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+m[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+m[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+m[4]]]),p(g)]}}function d(p){return function(g,m){return[p([[+m[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+m[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+m[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+m[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+m[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+m[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),p([[+g[0][0],+m[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+m[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+m[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+m[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+m[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+m[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),p([[+g[0][0],+g[0][1],+m[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+m[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+m[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+m[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+m[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+m[5],+g[5][3],+g[5][4],+g[5][5]]]),p([[+g[0][0],+g[0][1],+g[0][2],+m[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+m[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+m[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+m[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+m[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+m[5],+g[5][4],+g[5][5]]]),p([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+m[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+m[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+m[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+m[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+m[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+m[5],+g[5][5]]]),p([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+m[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+m[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+m[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+m[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+m[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+m[5]]]),p(g)]}}var u=[function(){return[[0]]},function(p,g){return[[g[0]],[p[0][0]]]}];function x(p,g,m,y,v,_,h,S){return function(A,E){switch(A.length){case 0:return p(A,E);case 1:return g(A,E);case 2:return m(A,E);case 3:return y(A,E);case 4:return v(A,E);case 5:return _(A,E)}var P=h[A.length];return P||(P=h[A.length]=S(A.length)),P(A,E)}}(function(){for(;u.length<6;)u.push(r(u.length));f.exports=x.apply(void 0,u.concat([u,r]));for(var p=0;p<6;++p)f.exports[p]=u[p]})()},3250:function(f,s,t){"use strict";var i=t(5250),r=t(8210),n=t(3012),o=t(8545);function l(v,_,h,S){return function(A,E,P){var I=v(v(_(E[1],P[0]),_(-P[1],E[0])),v(_(A[1],E[0]),_(-E[1],A[0]))),D=v(_(A[1],P[0]),_(-P[1],A[0])),z=S(I,D);return z[z.length-1]}}function c(v,_,h,S){return function(A,E,P,I){var D=v(v(h(v(_(P[1],I[0]),_(-I[1],P[0])),E[2]),v(h(v(_(E[1],I[0]),_(-I[1],E[0])),-P[2]),h(v(_(E[1],P[0]),_(-P[1],E[0])),I[2]))),v(h(v(_(E[1],I[0]),_(-I[1],E[0])),A[2]),v(h(v(_(A[1],I[0]),_(-I[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),I[2])))),z=v(v(h(v(_(P[1],I[0]),_(-I[1],P[0])),A[2]),v(h(v(_(A[1],I[0]),_(-I[1],A[0])),-P[2]),h(v(_(A[1],P[0]),_(-P[1],A[0])),I[2]))),v(h(v(_(E[1],P[0]),_(-P[1],E[0])),A[2]),v(h(v(_(A[1],P[0]),_(-P[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),P[2])))),V=S(D,z);return V[V.length-1]}}function d(v,_,h,S){return function(A,E,P,I,D){var z=v(v(v(h(v(h(v(_(I[1],D[0]),_(-D[1],I[0])),P[2]),v(h(v(_(P[1],D[0]),_(-D[1],P[0])),-I[2]),h(v(_(P[1],I[0]),_(-I[1],P[0])),D[2]))),E[3]),v(h(v(h(v(_(I[1],D[0]),_(-D[1],I[0])),E[2]),v(h(v(_(E[1],D[0]),_(-D[1],E[0])),-I[2]),h(v(_(E[1],I[0]),_(-I[1],E[0])),D[2]))),-P[3]),h(v(h(v(_(P[1],D[0]),_(-D[1],P[0])),E[2]),v(h(v(_(E[1],D[0]),_(-D[1],E[0])),-P[2]),h(v(_(E[1],P[0]),_(-P[1],E[0])),D[2]))),I[3]))),v(h(v(h(v(_(P[1],I[0]),_(-I[1],P[0])),E[2]),v(h(v(_(E[1],I[0]),_(-I[1],E[0])),-P[2]),h(v(_(E[1],P[0]),_(-P[1],E[0])),I[2]))),-D[3]),v(h(v(h(v(_(I[1],D[0]),_(-D[1],I[0])),E[2]),v(h(v(_(E[1],D[0]),_(-D[1],E[0])),-I[2]),h(v(_(E[1],I[0]),_(-I[1],E[0])),D[2]))),A[3]),h(v(h(v(_(I[1],D[0]),_(-D[1],I[0])),A[2]),v(h(v(_(A[1],D[0]),_(-D[1],A[0])),-I[2]),h(v(_(A[1],I[0]),_(-I[1],A[0])),D[2]))),-E[3])))),v(v(h(v(h(v(_(E[1],D[0]),_(-D[1],E[0])),A[2]),v(h(v(_(A[1],D[0]),_(-D[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),D[2]))),I[3]),v(h(v(h(v(_(E[1],I[0]),_(-I[1],E[0])),A[2]),v(h(v(_(A[1],I[0]),_(-I[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),I[2]))),-D[3]),h(v(h(v(_(P[1],I[0]),_(-I[1],P[0])),E[2]),v(h(v(_(E[1],I[0]),_(-I[1],E[0])),-P[2]),h(v(_(E[1],P[0]),_(-P[1],E[0])),I[2]))),A[3]))),v(h(v(h(v(_(P[1],I[0]),_(-I[1],P[0])),A[2]),v(h(v(_(A[1],I[0]),_(-I[1],A[0])),-P[2]),h(v(_(A[1],P[0]),_(-P[1],A[0])),I[2]))),-E[3]),v(h(v(h(v(_(E[1],I[0]),_(-I[1],E[0])),A[2]),v(h(v(_(A[1],I[0]),_(-I[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),I[2]))),P[3]),h(v(h(v(_(E[1],P[0]),_(-P[1],E[0])),A[2]),v(h(v(_(A[1],P[0]),_(-P[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),P[2]))),-I[3]))))),V=v(v(v(h(v(h(v(_(I[1],D[0]),_(-D[1],I[0])),P[2]),v(h(v(_(P[1],D[0]),_(-D[1],P[0])),-I[2]),h(v(_(P[1],I[0]),_(-I[1],P[0])),D[2]))),A[3]),h(v(h(v(_(I[1],D[0]),_(-D[1],I[0])),A[2]),v(h(v(_(A[1],D[0]),_(-D[1],A[0])),-I[2]),h(v(_(A[1],I[0]),_(-I[1],A[0])),D[2]))),-P[3])),v(h(v(h(v(_(P[1],D[0]),_(-D[1],P[0])),A[2]),v(h(v(_(A[1],D[0]),_(-D[1],A[0])),-P[2]),h(v(_(A[1],P[0]),_(-P[1],A[0])),D[2]))),I[3]),h(v(h(v(_(P[1],I[0]),_(-I[1],P[0])),A[2]),v(h(v(_(A[1],I[0]),_(-I[1],A[0])),-P[2]),h(v(_(A[1],P[0]),_(-P[1],A[0])),I[2]))),-D[3]))),v(v(h(v(h(v(_(P[1],D[0]),_(-D[1],P[0])),E[2]),v(h(v(_(E[1],D[0]),_(-D[1],E[0])),-P[2]),h(v(_(E[1],P[0]),_(-P[1],E[0])),D[2]))),A[3]),h(v(h(v(_(P[1],D[0]),_(-D[1],P[0])),A[2]),v(h(v(_(A[1],D[0]),_(-D[1],A[0])),-P[2]),h(v(_(A[1],P[0]),_(-P[1],A[0])),D[2]))),-E[3])),v(h(v(h(v(_(E[1],D[0]),_(-D[1],E[0])),A[2]),v(h(v(_(A[1],D[0]),_(-D[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),D[2]))),P[3]),h(v(h(v(_(E[1],P[0]),_(-P[1],E[0])),A[2]),v(h(v(_(A[1],P[0]),_(-P[1],A[0])),-E[2]),h(v(_(A[1],E[0]),_(-E[1],A[0])),P[2]))),-D[3])))),O=S(z,V);return O[O.length-1]}}function u(v){return(v===3?l:v===4?c:d)(r,i,n,o)}var x=u(3),p=u(4),g=[function(){return 0},function(){return 0},function(v,_){return _[0]-v[0]},function(v,_,h){var S,A=(v[1]-h[1])*(_[0]-h[0]),E=(v[0]-h[0])*(_[1]-h[1]),P=A-E;if(A>0){if(E<=0)return P;S=A+E}else{if(!(A<0)||E>=0)return P;S=-(A+E)}var I=33306690738754716e-32*S;return P>=I||P<=-I?P:x(v,_,h)},function(v,_,h,S){var A=v[0]-S[0],E=_[0]-S[0],P=h[0]-S[0],I=v[1]-S[1],D=_[1]-S[1],z=h[1]-S[1],V=v[2]-S[2],O=_[2]-S[2],j=h[2]-S[2],Y=E*z,B=P*D,U=P*I,q=A*z,te=A*D,ee=E*I,Q=V*(Y-B)+O*(U-q)+j*(te-ee),J=7771561172376103e-31*((Math.abs(Y)+Math.abs(B))*Math.abs(V)+(Math.abs(U)+Math.abs(q))*Math.abs(O)+(Math.abs(te)+Math.abs(ee))*Math.abs(j));return Q>J||-Q>J?Q:p(v,_,h,S)}];function m(v){var _=g[v.length];return _||(_=g[v.length]=u(v.length)),_.apply(void 0,v)}function y(v,_,h,S,A,E,P){return function(I,D,z,V,O){switch(arguments.length){case 0:case 1:return 0;case 2:return S(I,D);case 3:return A(I,D,z);case 4:return E(I,D,z,V);case 5:return P(I,D,z,V,O)}for(var j=new Array(arguments.length),Y=0;Y<arguments.length;++Y)j[Y]=arguments[Y];return v(j)}}(function(){for(;g.length<=5;)g.push(u(g.length));f.exports=y.apply(void 0,[m].concat(g));for(var v=0;v<=5;++v)f.exports[v]=g[v]})()},5382:function(f,s,t){"use strict";var i=t(8210),r=t(3012);f.exports=function(n,o){if(n.length===1)return r(o,n[0]);if(o.length===1)return r(n,o[0]);if(n.length===0||o.length===0)return[0];var l=[0];if(n.length<o.length)for(var c=0;c<n.length;++c)l=i(l,r(o,n[c]));else for(c=0;c<o.length;++c)l=i(l,r(n,o[c]));return l}},3012:function(f,s,t){"use strict";var i=t(5250),r=t(9362);f.exports=function(n,o){var l=n.length;if(l===1){var c=i(n[0],o);return c[0]?c:[c[1]]}var d=new Array(2*l),u=[.1,.1],x=[.1,.1],p=0;i(n[0],o,u),u[0]&&(d[p++]=u[0]);for(var g=1;g<l;++g){i(n[g],o,x);var m=u[1];r(m,x[0],u),u[0]&&(d[p++]=u[0]);var y=x[1],v=u[1],_=y+v,h=v-(_-y);u[1]=_,h&&(d[p++]=h)}return u[1]&&(d[p++]=u[1]),p===0&&(d[p++]=0),d.length=p,d}},1125:function(f,s,t){"use strict";f.exports=function(r,n,o,l){var c=i(r,o,l),d=i(n,o,l);if(c>0&&d>0||c<0&&d<0)return!1;var u=i(o,r,n),x=i(l,r,n);return!(u>0&&x>0||u<0&&x<0)&&(c!==0||d!==0||u!==0||x!==0||function(p,g,m,y){for(var v=0;v<2;++v){var _=p[v],h=g[v],S=Math.min(_,h),A=Math.max(_,h),E=m[v],P=y[v],I=Math.min(E,P);if(Math.max(E,P)<S||A<I)return!1}return!0}(r,n,o,l))};var i=t(3250)[3]},8545:function(f){"use strict";f.exports=function(s,t){var i=0|s.length,r=0|t.length;if(i===1&&r===1)return function(I,D){var z=I+D,V=z-I,O=I-(z-V)+(D-V);return O?[O,z]:[z]}(s[0],-t[0]);var n,o,l=new Array(i+r),c=0,d=0,u=0,x=Math.abs,p=s[d],g=x(p),m=-t[u],y=x(m);g<y?(o=p,(d+=1)<i&&(g=x(p=s[d]))):(o=m,(u+=1)<r&&(y=x(m=-t[u]))),d<i&&g<y||u>=r?(n=p,(d+=1)<i&&(g=x(p=s[d]))):(n=m,(u+=1)<r&&(y=x(m=-t[u])));for(var v,_,h=n+o,S=h-n,A=o-S,E=A,P=h;d<i&&u<r;)g<y?(n=p,(d+=1)<i&&(g=x(p=s[d]))):(n=m,(u+=1)<r&&(y=x(m=-t[u]))),(A=(o=E)-(S=(h=n+o)-n))&&(l[c++]=A),E=P-((v=P+h)-(_=v-P))+(h-_),P=v;for(;d<i;)(A=(o=E)-(S=(h=(n=p)+o)-n))&&(l[c++]=A),E=P-((v=P+h)-(_=v-P))+(h-_),P=v,(d+=1)<i&&(p=s[d]);for(;u<r;)(A=(o=E)-(S=(h=(n=m)+o)-n))&&(l[c++]=A),E=P-((v=P+h)-(_=v-P))+(h-_),P=v,(u+=1)<r&&(m=-t[u]);return E&&(l[c++]=E),P&&(l[c++]=P),c||(l[c++]=0),l.length=c,l}},8210:function(f){"use strict";f.exports=function(s,t){var i=0|s.length,r=0|t.length;if(i===1&&r===1)return function(I,D){var z=I+D,V=z-I,O=I-(z-V)+(D-V);return O?[O,z]:[z]}(s[0],t[0]);var n,o,l=new Array(i+r),c=0,d=0,u=0,x=Math.abs,p=s[d],g=x(p),m=t[u],y=x(m);g<y?(o=p,(d+=1)<i&&(g=x(p=s[d]))):(o=m,(u+=1)<r&&(y=x(m=t[u]))),d<i&&g<y||u>=r?(n=p,(d+=1)<i&&(g=x(p=s[d]))):(n=m,(u+=1)<r&&(y=x(m=t[u])));for(var v,_,h=n+o,S=h-n,A=o-S,E=A,P=h;d<i&&u<r;)g<y?(n=p,(d+=1)<i&&(g=x(p=s[d]))):(n=m,(u+=1)<r&&(y=x(m=t[u]))),(A=(o=E)-(S=(h=n+o)-n))&&(l[c++]=A),E=P-((v=P+h)-(_=v-P))+(h-_),P=v;for(;d<i;)(A=(o=E)-(S=(h=(n=p)+o)-n))&&(l[c++]=A),E=P-((v=P+h)-(_=v-P))+(h-_),P=v,(d+=1)<i&&(p=s[d]);for(;u<r;)(A=(o=E)-(S=(h=(n=m)+o)-n))&&(l[c++]=A),E=P-((v=P+h)-(_=v-P))+(h-_),P=v,(u+=1)<r&&(m=t[u]);return E&&(l[c++]=E),P&&(l[c++]=P),c||(l[c++]=0),l.length=c,l}},9127:function(f,s,t){"use strict";f.exports=function(n){return r(i(n))};var i=t(6204),r=t(5771)},7765:function(f,s,t){"use strict";f.exports=function(l,c,d,u){if(d=d||0,u===void 0&&(u=function(h){for(var S=h.length,A=0,E=0;E<S;++E)A=0|Math.max(A,h[E].length);return A-1}(l)),l.length===0||u<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(h,S){for(var A=h.length,E=r.mallocUint8(A),P=0;P<A;++P)E[P]=h[P]<S|0;return E}(c,+d),p=function(h,S){for(var A=h.length,E=S*(S+1)/2*A|0,P=r.mallocUint32(2*E),I=0,D=0;D<A;++D)for(var z=h[D],V=(S=z.length,0);V<S;++V)for(var O=0;O<V;++O){var j=z[O],Y=z[V];P[I++]=0|Math.min(j,Y),P[I++]=0|Math.max(j,Y)}n(i(P,[I/2|0,2]));var B=2;for(D=2;D<I;D+=2)P[D-2]===P[D]&&P[D-1]===P[D+1]||(P[B++]=P[D],P[B++]=P[D+1]);return i(P,[B/2|0,2])}(l,u),g=function(h,S,A,E){for(var P=h.data,I=h.shape[0],D=r.mallocDouble(I),z=0,V=0;V<I;++V){var O=P[2*V],j=P[2*V+1];if(A[O]!==A[j]){var Y=S[O],B=S[j];P[2*z]=O,P[2*z+1]=j,D[z++]=(B-E)/(B-Y)}}return h.shape[0]=z,i(D,[z])}(p,c,x,+d),m=function(h,S){var A=r.mallocInt32(2*S),E=h.shape[0],P=h.data;A[0]=0;for(var I=0,D=0;D<E;++D){var z=P[2*D];if(z!==I){for(A[2*I+1]=D;++I<z;)A[2*I]=D,A[2*I+1]=D;A[2*I]=D}}for(A[2*I+1]=E;++I<S;)A[2*I]=A[2*I+1]=E;return A}(p,0|c.length),y=o(u)(l,p.data,m,x),v=function(h){for(var S=0|h.shape[0],A=h.data,E=new Array(S),P=0;P<S;++P)E[P]=[A[2*P],A[2*P+1]];return E}(p),_=[].slice.call(g.data,0,g.shape[0]);return r.free(x),r.free(p.data),r.free(g.data),r.free(m),{cells:y,vertexIds:v,vertexWeights:_}};var i=t(9618),r=t(1888),n=t(446),o=t(1570)},1570:function(f){"use strict";f.exports=function(t){return s[t]()};var s=[function(){return function(t,i,r,n){for(var o=t.length,l=0;l<o;++l)t[l].length;return[]}},function(){function t(i,r,n,o){for(var l=0|Math.min(n,o),c=0|Math.max(n,o),d=i[2*l],u=i[2*l+1];d<u;){var x=d+u>>1,p=r[2*x+1];if(p===c)return x;c<p?u=x:d=x+1}return d}return function(i,r,n,o){for(var l=i.length,c=[],d=0;d<l;++d){var u=i[d];if(u.length===2){var x=(o[u[0]]<<0)+(o[u[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:c.push([t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0])])}}}return c}},function(){function t(i,r,n,o){for(var l=0|Math.min(n,o),c=0|Math.max(n,o),d=i[2*l],u=i[2*l+1];d<u;){var x=d+u>>1,p=r[2*x+1];if(p===c)return x;c<p?u=x:d=x+1}return d}return function(i,r,n,o){for(var l=i.length,c=[],d=0;d<l;++d){var u=i[d],x=u.length;if(x===3){if((p=(o[u[0]]<<0)+(o[u[1]]<<1)+(o[u[2]]<<2))==0||p===7)continue;switch(p){case 0:case 7:break;case 1:c.push([t(n,r,u[0],u[2]),t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0]),t(n,r,u[1],u[2])]);break;case 3:c.push([t(n,r,u[0],u[2]),t(n,r,u[1],u[2])]);break;case 4:c.push([t(n,r,u[2],u[1]),t(n,r,u[2],u[0])]);break;case 5:c.push([t(n,r,u[2],u[1]),t(n,r,u[0],u[1])]);break;case 6:c.push([t(n,r,u[1],u[0]),t(n,r,u[2],u[0])])}}else if(x===2){var p;if((p=(o[u[0]]<<0)+(o[u[1]]<<1))==0||p===3)continue;switch(p){case 0:case 3:break;case 1:c.push([t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0])])}}}return c}},function(){function t(i,r,n,o){for(var l=0|Math.min(n,o),c=0|Math.max(n,o),d=i[2*l],u=i[2*l+1];d<u;){var x=d+u>>1,p=r[2*x+1];if(p===c)return x;c<p?u=x:d=x+1}return d}return function(i,r,n,o){for(var l=i.length,c=[],d=0;d<l;++d){var u=i[d],x=u.length;if(x===4){if((p=(o[u[0]]<<0)+(o[u[1]]<<1)+(o[u[2]]<<2)+(o[u[3]]<<3))==0||p===15)continue;switch(p){case 0:case 15:break;case 1:c.push([t(n,r,u[0],u[1]),t(n,r,u[0],u[2]),t(n,r,u[0],u[3])]);break;case 2:c.push([t(n,r,u[1],u[2]),t(n,r,u[1],u[0]),t(n,r,u[1],u[3])]);break;case 3:c.push([t(n,r,u[1],u[2]),t(n,r,u[0],u[2]),t(n,r,u[0],u[3])],[t(n,r,u[1],u[3]),t(n,r,u[1],u[2]),t(n,r,u[0],u[3])]);break;case 4:c.push([t(n,r,u[2],u[0]),t(n,r,u[2],u[1]),t(n,r,u[2],u[3])]);break;case 5:c.push([t(n,r,u[0],u[1]),t(n,r,u[2],u[1]),t(n,r,u[0],u[3])],[t(n,r,u[2],u[1]),t(n,r,u[2],u[3]),t(n,r,u[0],u[3])]);break;case 6:c.push([t(n,r,u[2],u[0]),t(n,r,u[1],u[0]),t(n,r,u[1],u[3])],[t(n,r,u[2],u[3]),t(n,r,u[2],u[0]),t(n,r,u[1],u[3])]);break;case 7:c.push([t(n,r,u[0],u[3]),t(n,r,u[1],u[3]),t(n,r,u[2],u[3])]);break;case 8:c.push([t(n,r,u[3],u[1]),t(n,r,u[3],u[0]),t(n,r,u[3],u[2])]);break;case 9:c.push([t(n,r,u[3],u[1]),t(n,r,u[0],u[1]),t(n,r,u[0],u[2])],[t(n,r,u[3],u[2]),t(n,r,u[3],u[1]),t(n,r,u[0],u[2])]);break;case 10:c.push([t(n,r,u[1],u[0]),t(n,r,u[3],u[0]),t(n,r,u[1],u[2])],[t(n,r,u[3],u[0]),t(n,r,u[3],u[2]),t(n,r,u[1],u[2])]);break;case 11:c.push([t(n,r,u[1],u[2]),t(n,r,u[0],u[2]),t(n,r,u[3],u[2])]);break;case 12:c.push([t(n,r,u[3],u[0]),t(n,r,u[2],u[0]),t(n,r,u[2],u[1])],[t(n,r,u[3],u[1]),t(n,r,u[3],u[0]),t(n,r,u[2],u[1])]);break;case 13:c.push([t(n,r,u[0],u[1]),t(n,r,u[2],u[1]),t(n,r,u[3],u[1])]);break;case 14:c.push([t(n,r,u[2],u[0]),t(n,r,u[1],u[0]),t(n,r,u[3],u[0])])}}else if(x===3){if((p=(o[u[0]]<<0)+(o[u[1]]<<1)+(o[u[2]]<<2))==0||p===7)continue;switch(p){case 0:case 7:break;case 1:c.push([t(n,r,u[0],u[2]),t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0]),t(n,r,u[1],u[2])]);break;case 3:c.push([t(n,r,u[0],u[2]),t(n,r,u[1],u[2])]);break;case 4:c.push([t(n,r,u[2],u[1]),t(n,r,u[2],u[0])]);break;case 5:c.push([t(n,r,u[2],u[1]),t(n,r,u[0],u[1])]);break;case 6:c.push([t(n,r,u[1],u[0]),t(n,r,u[2],u[0])])}}else if(x===2){var p;if((p=(o[u[0]]<<0)+(o[u[1]]<<1))==0||p===3)continue;switch(p){case 0:case 3:break;case 1:c.push([t(n,r,u[0],u[1])]);break;case 2:c.push([t(n,r,u[1],u[0])])}}}return c}}]},6803:function(f,s,t){"use strict";t(8828),t(1755);function i(r,n){var o=r.length,l=r.length-n.length,c=Math.min;if(l)return l;switch(o){case 0:return 0;case 1:return r[0]-n[0];case 2:return(x=r[0]+r[1]-n[0]-n[1])||c(r[0],r[1])-c(n[0],n[1]);case 3:var d=r[0]+r[1],u=n[0]+n[1];if(x=d+r[2]-(u+n[2]))return x;var x,p=c(r[0],r[1]),g=c(n[0],n[1]);return(x=c(p,r[2])-c(g,n[2]))||c(p+r[2],d)-c(g+n[2],u);default:var m=r.slice(0);m.sort();var y=n.slice(0);y.sort();for(var v=0;v<o;++v)if(l=m[v]-y[v])return l;return 0}}s.Fw=i},3105:function(f,s){"use strict";function t(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,o;return n=(r>65535)<<4,n|=o=((r>>>=n)>255)<<3,n|=o=((r>>>=o)>15)<<2,(n|=o=((r>>>=o)>3)<<1)|(r>>>=o)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var o=n,l=n,c=7;for(o>>>=1;o;o>>>=1)l<<=1,l|=1&o,--c;r[n]=l<<c&255}})(i),s.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,o){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>t(r)+1}},2014:function(f,s,t){"use strict";var i=t(3105),r=t(4623);function n(p,g){var m=p.length,y=p.length-g.length,v=Math.min;if(y)return y;switch(m){case 0:return 0;case 1:return p[0]-g[0];case 2:return(S=p[0]+p[1]-g[0]-g[1])||v(p[0],p[1])-v(g[0],g[1]);case 3:var _=p[0]+p[1],h=g[0]+g[1];if(S=_+p[2]-(h+g[2]))return S;var S,A=v(p[0],p[1]),E=v(g[0],g[1]);return(S=v(A,p[2])-v(E,g[2]))||v(A+p[2],_)-v(E+g[2],h);default:var P=p.slice(0);P.sort();var I=g.slice(0);I.sort();for(var D=0;D<m;++D)if(y=P[D]-I[D])return y;return 0}}function o(p,g){return n(p[0],g[0])}function l(p,g){if(g){for(var m=p.length,y=new Array(m),v=0;v<m;++v)y[v]=[p[v],g[v]];for(y.sort(o),v=0;v<m;++v)p[v]=y[v][0],g[v]=y[v][1];return p}return p.sort(n),p}function c(p){if(p.length===0)return[];for(var g=1,m=p.length,y=1;y<m;++y){var v=p[y];if(n(v,p[y-1])){if(y===g){g++;continue}p[g++]=v}}return p.length=g,p}function d(p,g){for(var m=0,y=p.length-1,v=-1;m<=y;){var _=m+y>>1,h=n(p[_],g);h<=0?(h===0&&(v=_),m=_+1):h>0&&(y=_-1)}return v}function u(p,g){for(var m=new Array(p.length),y=0,v=m.length;y<v;++y)m[y]=[];for(var _=[],h=(y=0,g.length);y<h;++y)for(var S=g[y],A=S.length,E=1,P=1<<A;E<P;++E){_.length=i.popCount(E);for(var I=0,D=0;D<A;++D)E&1<<D&&(_[I++]=S[D]);var z=d(p,_);if(!(z<0))for(;m[z++].push(y),!(z>=p.length||n(p[z],_)!==0););}return m}function x(p,g){if(g<0)return[];for(var m=[],y=(1<<g+1)-1,v=0;v<p.length;++v)for(var _=p[v],h=y;h<1<<_.length;h=i.nextCombination(h)){for(var S=new Array(g+1),A=0,E=0;E<_.length;++E)h&1<<E&&(S[A++]=_[E]);m.push(S)}return l(m)}s.dimension=function(p){for(var g=0,m=Math.max,y=0,v=p.length;y<v;++y)g=m(g,p[y].length);return g-1},s.countVertices=function(p){for(var g=-1,m=Math.max,y=0,v=p.length;y<v;++y)for(var _=p[y],h=0,S=_.length;h<S;++h)g=m(g,_[h]);return g+1},s.cloneCells=function(p){for(var g=new Array(p.length),m=0,y=p.length;m<y;++m)g[m]=p[m].slice(0);return g},s.compareCells=n,s.normalize=l,s.unique=c,s.findCell=d,s.incidence=u,s.dual=function(p,g){if(!g)return u(c(x(p,0)),p);for(var m=new Array(g),y=0;y<g;++y)m[y]=[];y=0;for(var v=p.length;y<v;++y)for(var _=p[y],h=0,S=_.length;h<S;++h)m[_[h]].push(y);return m},s.explode=function(p){for(var g=[],m=0,y=p.length;m<y;++m)for(var v=p[m],_=0|v.length,h=1,S=1<<_;h<S;++h){for(var A=[],E=0;E<_;++E)h>>>E&1&&A.push(v[E]);g.push(A)}return l(g)},s.skeleton=x,s.boundary=function(p){for(var g=[],m=0,y=p.length;m<y;++m)for(var v=p[m],_=0,h=v.length;_<h;++_){for(var S=new Array(v.length-1),A=0,E=0;A<h;++A)A!==_&&(S[E++]=v[A]);g.push(S)}return l(g)},s.connectedComponents=function(p,g){return g?function(m,y){for(var v=new r(y),_=0;_<m.length;++_)for(var h=m[_],S=0;S<h.length;++S)for(var A=S+1;A<h.length;++A)v.link(h[S],h[A]);var E=[],P=v.ranks;for(_=0;_<P.length;++_)P[_]=-1;for(_=0;_<m.length;++_){var I=v.find(m[_][0]);P[I]<0?(P[I]=E.length,E.push([m[_].slice(0)])):E[P[I]].push(m[_].slice(0))}return E}(p,g):function(m){for(var y=c(l(x(m,0))),v=new r(y.length),_=0;_<m.length;++_)for(var h=m[_],S=0;S<h.length;++S)for(var A=d(y,[h[S]]),E=S+1;E<h.length;++E)v.link(A,d(y,[h[E]]));var P=[],I=v.ranks;for(_=0;_<I.length;++_)I[_]=-1;for(_=0;_<m.length;++_){var D=v.find(d(y,[m[_][0]]));I[D]<0?(I[D]=P.length,P.push([m[_].slice(0)])):P[I[D]].push(m[_].slice(0))}return P}(p)}},4623:function(f){"use strict";function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}f.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var r=i[t];i[t]=i[r],t=r}return t},s.prototype.link=function(t,i){var r=this.find(t),n=this.find(i);if(r!==n){var o=this.ranks,l=this.roots,c=o[r],d=o[n];c<d?l[r]=n:d<c?l[n]=r:(l[n]=r,++o[r])}}},5878:function(f,s,t){"use strict";f.exports=function(n,o,l){for(var c=o.length,d=n.length,u=new Array(c),x=new Array(c),p=new Array(c),g=new Array(c),m=0;m<c;++m)u[m]=x[m]=-1,p[m]=1/0,g[m]=!1;for(m=0;m<d;++m){var y=n[m];if(y.length!==2)throw new Error("Input must be a graph");var v=y[1],_=y[0];x[_]!==-1?x[_]=-2:x[_]=v,u[v]!==-1?u[v]=-2:u[v]=_}function h(ee){if(g[ee])return 1/0;var Q,J,K,X=u[ee],ie=x[ee];return X<0||ie<0?1/0:(Q=o[ee],J=o[X],K=o[ie],Math.abs(i(Q,J,K))/Math.sqrt(Math.pow(J[0]-K[0],2)+Math.pow(J[1]-K[1],2)))}function S(ee,Q){var J=O[ee],K=O[Q];O[ee]=K,O[Q]=J,j[J]=Q,j[K]=ee}function A(ee){return p[O[ee]]}function E(ee){return 1&ee?ee-1>>1:(ee>>1)-1}function P(ee){for(var Q=A(ee);;){var J=Q,K=2*ee+1,X=2*(ee+1),ie=ee;if(K<Y){var se=A(K);se<J&&(ie=K,J=se)}if(X<Y&&A(X)<J&&(ie=X),ie===ee)return ee;S(ee,ie),ee=ie}}function I(ee){for(var Q=A(ee);ee>0;){var J=E(ee);if(!(J>=0&&Q<A(J)))return ee;S(ee,J),ee=J}}function D(){if(Y>0){var ee=O[0];return S(0,Y-1),Y-=1,P(0),ee}return-1}function z(ee,Q){var J=O[ee];return p[J]===Q?ee:(p[J]=-1/0,I(ee),D(),p[J]=Q,I((Y+=1)-1))}function V(ee){if(!g[ee]){g[ee]=!0;var Q=u[ee],J=x[ee];u[J]>=0&&(u[J]=Q),x[Q]>=0&&(x[Q]=J),j[Q]>=0&&z(j[Q],h(Q)),j[J]>=0&&z(j[J],h(J))}}var O=[],j=new Array(c);for(m=0;m<c;++m)(p[m]=h(m))<1/0?(j[m]=O.length,O.push(m)):j[m]=-1;var Y=O.length;for(m=Y>>1;m>=0;--m)P(m);for(;;){var B=D();if(B<0||p[B]>l)break;V(B)}var U=[];for(m=0;m<c;++m)g[m]||(j[m]=U.length,U.push(o[m].slice()));function q(ee,Q){if(ee[Q]<0)return Q;var J=Q,K=Q;do{var X=ee[K];if(!g[K]||X<0||X===K||(X=ee[K=X],!g[K]||X<0||X===K))break;K=X,J=ee[J]}while(J!==K);for(var ie=Q;ie!==K;ie=ee[ie])ee[ie]=K;return K}U.length;var te=[];return n.forEach(function(ee){var Q=q(u,ee[0]),J=q(x,ee[1]);if(Q>=0&&J>=0&&Q!==J){var K=j[Q],X=j[J];K!==X&&te.push([K,X])}}),r.unique(r.normalize(te)),{positions:U,edges:te}};var i=t(3250),r=t(2014)},1303:function(f,s,t){"use strict";f.exports=function(n,o){var l,c,d,u;if(o[0][0]<o[1][0])l=o[0],c=o[1];else{if(!(o[0][0]>o[1][0]))return r(o,n);l=o[1],c=o[0]}if(n[0][0]<n[1][0])d=n[0],u=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,o);d=n[1],u=n[0]}var x=i(l,c,u),p=i(l,c,d);if(x<0){if(p<=0)return x}else if(x>0){if(p>=0)return x}else if(p)return p;if(x=i(u,d,c),p=i(u,d,l),x<0){if(p<=0)return x}else if(x>0){if(p>=0)return x}else if(p)return p;return c[0]-u[0]};var i=t(3250);function r(n,o){var l,c,d,u;if(o[0][0]<o[1][0])l=o[0],c=o[1];else{if(!(o[0][0]>o[1][0])){var x=Math.min(n[0][1],n[1][1]),p=Math.max(n[0][1],n[1][1]),g=Math.min(o[0][1],o[1][1]),m=Math.max(o[0][1],o[1][1]);return p<g?p-g:x>m?x-m:p-m}l=o[1],c=o[0]}n[0][1]<n[1][1]?(d=n[0],u=n[1]):(d=n[1],u=n[0]);var y=i(c,l,d);return y||(y=i(c,l,u))||u-c}},4209:function(f,s,t){"use strict";f.exports=function(p){for(var g=p.length,m=2*g,y=new Array(m),v=0;v<g;++v){var _=p[v],h=_[0][0]<_[1][0];y[2*v]=new x(_[0][0],_,h,v),y[2*v+1]=new x(_[1][0],_,!h,v)}y.sort(function(V,O){var j=V.x-O.x;return j||(j=V.create-O.create)||Math.min(V.segment[0][1],V.segment[1][1])-Math.min(O.segment[0][1],O.segment[1][1])});var S=r(o),A=[],E=[],P=[];for(v=0;v<m;){for(var I=y[v].x,D=[];v<m;){var z=y[v];if(z.x!==I)break;v+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(D.push(new u(z.segment[0][1],z.index,!0,!0)),D.push(new u(z.segment[1][1],z.index,!1,!1))):(D.push(new u(z.segment[1][1],z.index,!0,!1)),D.push(new u(z.segment[0][1],z.index,!1,!0)))):S=z.create?S.insert(z.segment,z.index):S.remove(z.segment)}A.push(S.root),E.push(I),P.push(D)}return new l(A,E,P)};var i=t(2478),r=t(3840),n=t(3250),o=t(1303);function l(p,g,m){this.slabs=p,this.coordinates=g,this.horizontal=m}function c(p,g){return p.y-g}function d(p,g){for(var m=null;p;){var y,v,_=p.key;_[0][0]<_[1][0]?(y=_[0],v=_[1]):(y=_[1],v=_[0]);var h=n(y,v,g);if(h<0)p=p.left;else if(h>0)if(g[0]!==_[1][0])m=p,p=p.right;else{if(S=d(p.right,g))return S;p=p.left}else{if(g[0]!==_[1][0])return p;var S;if(S=d(p.right,g))return S;p=p.left}}return m}function u(p,g,m,y){this.y=p,this.index=g,this.start=m,this.closed=y}function x(p,g,m,y){this.x=p,this.segment=g,this.create=m,this.index=y}l.prototype.castUp=function(p){var g=i.le(this.coordinates,p[0]);if(g<0)return-1;this.slabs[g];var m=d(this.slabs[g],p),y=-1;if(m&&(y=m.value),this.coordinates[g]===p[0]){var v=null;if(m&&(v=m.key),g>0){var _=d(this.slabs[g-1],p);_&&(v?o(_.key,v)>0&&(v=_.key,y=_.value):(y=_.value,v=_.key))}var h=this.horizontal[g];if(h.length>0){var S=i.ge(h,p[1],c);if(S<h.length){var A=h[S];if(p[1]===A.y){if(A.closed)return A.index;for(;S<h.length-1&&h[S+1].y===p[1];)if((A=h[S+=1]).closed)return A.index;if(A.y===p[1]&&!A.start){if((S+=1)>=h.length)return y;A=h[S]}}if(A.start)if(v){var E=n(v[0],v[1],[p[0],A.y]);v[0][0]>v[1][0]&&(E=-E),E>0&&(y=A.index)}else y=A.index;else A.y!==p[1]&&(y=A.index)}}}return y}},5202:function(f,s,t){"use strict";var i=t(1944),r=t(8210);function n(l,c){var d=r(i(l,c),[c[c.length-1]]);return d[d.length-1]}function o(l,c,d,u){var x=-c/(u-c);x<0?x=0:x>1&&(x=1);for(var p=1-x,g=l.length,m=new Array(g),y=0;y<g;++y)m[y]=x*l[y]+p*d[y];return m}f.exports=function(l,c){for(var d=[],u=[],x=n(l[l.length-1],c),p=l[l.length-1],g=l[0],m=0;m<l.length;++m,p=g){var y=n(g=l[m],c);if(x<0&&y>0||x>0&&y<0){var v=o(p,y,g,x);d.push(v),u.push(v.slice())}y<0?u.push(g.slice()):y>0?d.push(g.slice()):(d.push(g.slice()),u.push(g.slice())),x=y}return{positive:d,negative:u}},f.exports.positive=function(l,c){for(var d=[],u=n(l[l.length-1],c),x=l[l.length-1],p=l[0],g=0;g<l.length;++g,x=p){var m=n(p=l[g],c);(u<0&&m>0||u>0&&m<0)&&d.push(o(x,m,p,u)),m>=0&&d.push(p.slice()),u=m}return d},f.exports.negative=function(l,c){for(var d=[],u=n(l[l.length-1],c),x=l[l.length-1],p=l[0],g=0;g<l.length;++g,x=p){var m=n(p=l[g],c);(u<0&&m>0||u>0&&m<0)&&d.push(o(x,m,p,u)),m<=0&&d.push(p.slice()),u=m}return d}},3387:function(f,s,t){var i;(function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(c){return function(d,u){var x,p,g,m,y,v,_,h,S,A=1,E=d.length,P="";for(p=0;p<E;p++)if(typeof d[p]=="string")P+=d[p];else if(typeof d[p]=="object"){if((m=d[p]).keys)for(x=u[A],g=0;g<m.keys.length;g++){if(x==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[g],m.keys[g-1]));x=x[m.keys[g]]}else x=m.param_no?u[m.param_no]:u[A++];if(r.not_type.test(m.type)&&r.not_primitive.test(m.type)&&x instanceof Function&&(x=x()),r.numeric_arg.test(m.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(n("[sprintf] expecting number but found %T",x));switch(r.number.test(m.type)&&(h=x>=0),m.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,m.width?parseInt(m.width):0);break;case"e":x=m.precision?parseFloat(x).toExponential(m.precision):parseFloat(x).toExponential();break;case"f":x=m.precision?parseFloat(x).toFixed(m.precision):parseFloat(x);break;case"g":x=m.precision?String(Number(x.toPrecision(m.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=m.precision?x.substring(0,m.precision):x;break;case"t":x=String(!!x),x=m.precision?x.substring(0,m.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=m.precision?x.substring(0,m.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=m.precision?x.substring(0,m.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}r.json.test(m.type)?P+=x:(!r.number.test(m.type)||h&&!m.sign?S="":(S=h?"+":"-",x=x.toString().replace(r.sign,"")),v=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",_=m.width-(S+x).length,y=m.width&&_>0?v.repeat(_):"",P+=m.align?S+x+y:v==="0"?S+y+x:y+S+x)}return P}(function(d){if(l[d])return l[d];for(var u,x=d,p=[],g=0;x;){if((u=r.text.exec(x))!==null)p.push(u[0]);else if((u=r.modulo.exec(x))!==null)p.push("%");else{if((u=r.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(u[2]){g|=1;var m=[],y=u[2],v=[];if((v=r.key.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(m.push(v[1]);(y=y.substring(v[0].length))!=="";)if((v=r.key_access.exec(y))!==null)m.push(v[1]);else{if((v=r.index_access.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");m.push(v[1])}u[2]=m}else g|=2;if(g===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}x=x.substring(u[0].length)}return l[d]=p}(c),arguments)}function o(c,d){return n.apply(null,[c].concat(d||[]))}var l=Object.create(null);s.sprintf=n,s.vsprintf=o,typeof window<"u"&&(window.sprintf=n,window.vsprintf=o,(i=(function(){return{sprintf:n,vsprintf:o}}).call(s,t,s,f))===void 0||(f.exports=i))})()},3711:function(f,s,t){"use strict";f.exports=function(l,c){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(x,p){for(var g=r(x,p),m=g.length,y=new Array(m),v=new Array(m),_=0;_<m;++_)y[_]=[g[_]],v[_]=[_];return{positions:y,cells:v}}(l,c);var d=l.order.join()+"-"+l.dtype,u=o[d];return c=+c||0,u||(u=o[d]=function(x,p){var g=x.length+"d",m=n[g];if(m)return m(i,x,p)}(l.order,l.dtype)),u(l,c)};var i=t(2640),r=t(781),n={"2d":function(l,c,d){var u=l({order:c,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(x,p,g,m){return x>m|0},vertex:function(x,p,g,m,y,v,_,h,S,A,E,P,I){var D=(_<<0)+(h<<1)+(S<<2)+(A<<3)|0;if(D!==0&&D!==15)switch(D){case 0:case 15:E.push([x-.5,p-.5]);break;case 1:E.push([x-.25-.25*(m+g-2*I)/(g-m),p-.25-.25*(y+g-2*I)/(g-y)]);break;case 2:E.push([x-.75-.25*(-m-g+2*I)/(m-g),p-.25-.25*(v+m-2*I)/(m-v)]);break;case 3:E.push([x-.5,p-.5-.5*(y+g+v+m-4*I)/(g-y+m-v)]);break;case 4:E.push([x-.25-.25*(v+y-2*I)/(y-v),p-.75-.25*(-y-g+2*I)/(y-g)]);break;case 5:E.push([x-.5-.5*(m+g+v+y-4*I)/(g-m+y-v),p-.5]);break;case 6:E.push([x-.5-.25*(-m-g+v+y)/(m-g+y-v),p-.5-.25*(-y-g+v+m)/(y-g+m-v)]);break;case 7:E.push([x-.75-.25*(v+y-2*I)/(y-v),p-.75-.25*(v+m-2*I)/(m-v)]);break;case 8:E.push([x-.75-.25*(-v-y+2*I)/(v-y),p-.75-.25*(-v-m+2*I)/(v-m)]);break;case 9:E.push([x-.5-.25*(m+g+-v-y)/(g-m+v-y),p-.5-.25*(y+g+-v-m)/(g-y+v-m)]);break;case 10:E.push([x-.5-.5*(-m-g-v-y+4*I)/(m-g+v-y),p-.5]);break;case 11:E.push([x-.25-.25*(-v-y+2*I)/(v-y),p-.75-.25*(y+g-2*I)/(g-y)]);break;case 12:E.push([x-.5,p-.5-.5*(-y-g-v-m+4*I)/(y-g+v-m)]);break;case 13:E.push([x-.75-.25*(m+g-2*I)/(g-m),p-.25-.25*(-v-m+2*I)/(v-m)]);break;case 14:E.push([x-.25-.25*(-m-g+2*I)/(m-g),p-.25-.25*(-y-g+2*I)/(y-g)])}},cell:function(x,p,g,m,y,v,_,h,S){y?h.push([x,p]):h.push([p,x])}});return function(x,p){var g=[],m=[];return u(x,g,m,p),{positions:g,cells:m}}}},o={}},529:function(f,s,t){"use strict";f.exports=function o(l,c,d){var u=(d=d||{}).fontStyle||"normal",x=d.fontWeight||"normal",p=d.fontVariant||"normal",g=[u,x,p,l].join("_"),m=n[g];m||(m=n[g]={" ":{data:new Float32Array(0),shape:.2}});var y=m[c];if(!y)if(c.length<=1||!/\d/.test(c))y=m[c]=function(V){for(var O=V.cells,j=V.positions,Y=new Float32Array(6*O.length),B=0,U=0,q=0;q<O.length;++q)for(var te=O[q],ee=0;ee<3;++ee){var Q=j[te[ee]];Y[B++]=Q[0],Y[B++]=Q[1]+1.4,U=Math.max(Q[0],U)}return{data:Y,shape:U}}(i(c,{triangles:!0,font:l,fontStyle:u,fontWeight:x,fontVariant:p,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),_=new Array(v.length),h=0,S=0,A=0;A<v.length;++A)_[A]=o(l,v[A]),h+=_[A].data.length,S+=_[A].shape,A>0&&(S+=.02);var E=new Float32Array(h),P=0,I=-.5*S;for(A=0;A<_.length;++A){for(var D=_[A].data,z=0;z<D.length;z+=2)E[P++]=D[z]+I,E[P++]=D[z+1];I+=_[A].shape+.02}y=m[c]={data:E,shape:S}}return y};var i=t(4359),r=window||T.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},665:function(f,s,t){"use strict";var i=t(3202);f.exports=o;var r=96;function n(l,c){var d=i(getComputedStyle(l).getPropertyValue(c));return d[0]*o(d[1],l)}function o(l,c){switch(c=c||document.body,l=(l||"px").trim().toLowerCase(),c!==window&&c!==document||(c=document.body),l){case"%":return c.clientHeight/100;case"ch":case"ex":return function(d,u){var x=document.createElement("div");x.style["font-size"]="128"+d,u.appendChild(x);var p=n(x,"font-size")/128;return u.removeChild(x),p}(l,c);case"em":return n(c,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},7261:function(f,s,t){"use strict";f.exports=function(y){var v=(y=y||{}).center||[0,0,0],_=y.up||[0,1,0],h=y.right||x(_),S=y.radius||1,A=y.theta||0,E=y.phi||0;if(v=[].slice.call(v,0,3),_=[].slice.call(_,0,3),l(_,_),h=[].slice.call(h,0,3),l(h,h),"eye"in y){var P=y.eye,I=[P[0]-v[0],P[1]-v[1],P[2]-v[2]];o(h,I,_),d(h[0],h[1],h[2])<1e-6?h=x(_):l(h,h),S=d(I[0],I[1],I[2]);var D=c(_,I)/S,z=c(h,I)/S;E=Math.acos(D),A=Math.acos(z)}return S=Math.log(S),new p(y.zoomMin,y.zoomMax,v,_,h,S,A,E)};var i=t(9215),r=t(7608),n=t(6079),o=t(5911),l=t(3536),c=t(244);function d(y,v,_){return Math.sqrt(Math.pow(y,2)+Math.pow(v,2)+Math.pow(_,2))}function u(y){return Math.min(1,Math.max(-1,y))}function x(y){var v=Math.abs(y[0]),_=Math.abs(y[1]),h=Math.abs(y[2]),S=[0,0,0];v>Math.max(_,h)?S[2]=1:_>Math.max(v,h)?S[0]=1:S[1]=1;for(var A=0,E=0,P=0;P<3;++P)A+=y[P]*y[P],E+=S[P]*y[P];for(P=0;P<3;++P)S[P]-=E/A*y[P];return l(S,S),S}function p(y,v,_,h,S,A,E,P){this.center=i(_),this.up=i(h),this.right=i(S),this.radius=i([A]),this.angle=i([E,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,v),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var I=0;I<16;++I)this.computedMatrix[I]=.5;this.recalcMatrix(0)}var g=p.prototype;g.setDistanceLimits=function(y,v){y=y>0?Math.log(y):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=v},g.getDistanceLimits=function(y){var v=this.radius.bounds[0];return y?(y[0]=Math.exp(v[0][0]),y[1]=Math.exp(v[1][0]),y):[Math.exp(v[0][0]),Math.exp(v[1][0])]},g.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var v=this.computedUp,_=this.computedRight,h=0,S=0,A=0;A<3;++A)S+=v[A]*_[A],h+=v[A]*v[A];var E=Math.sqrt(h),P=0;for(A=0;A<3;++A)_[A]-=v[A]*S/h,P+=_[A]*_[A],v[A]/=E;var I=Math.sqrt(P);for(A=0;A<3;++A)_[A]/=I;var D=this.computedToward;o(D,v,_),l(D,D);var z=Math.exp(this.computedRadius[0]),V=this.computedAngle[0],O=this.computedAngle[1],j=Math.cos(V),Y=Math.sin(V),B=Math.cos(O),U=Math.sin(O),q=this.computedCenter,te=j*B,ee=Y*B,Q=U,J=-j*U,K=-Y*U,X=B,ie=this.computedEye,se=this.computedMatrix;for(A=0;A<3;++A){var ae=te*_[A]+ee*D[A]+Q*v[A];se[4*A+1]=J*_[A]+K*D[A]+X*v[A],se[4*A+2]=ae,se[4*A+3]=0}var ue=se[1],ve=se[5],ye=se[9],pe=se[2],de=se[6],me=se[10],ke=ve*me-ye*de,Ce=ye*pe-ue*me,ge=ue*de-ve*pe,oe=d(ke,Ce,ge);for(ke/=oe,Ce/=oe,ge/=oe,se[0]=ke,se[4]=Ce,se[8]=ge,A=0;A<3;++A)ie[A]=q[A]+se[2+4*A]*z;for(A=0;A<3;++A){P=0;for(var re=0;re<3;++re)P+=se[A+4*re]*ie[re];se[12+A]=-P}se[15]=1},g.getMatrix=function(y,v){this.recalcMatrix(y);var _=this.computedMatrix;if(v){for(var h=0;h<16;++h)v[h]=_[h];return v}return _};var m=[0,0,0];g.rotate=function(y,v,_,h){if(this.angle.move(y,v,_),h){this.recalcMatrix(y);var S=this.computedMatrix;m[0]=S[2],m[1]=S[6],m[2]=S[10];for(var A=this.computedUp,E=this.computedRight,P=this.computedToward,I=0;I<3;++I)S[4*I]=A[I],S[4*I+1]=E[I],S[4*I+2]=P[I];for(n(S,S,h,m),I=0;I<3;++I)A[I]=S[4*I],E[I]=S[4*I+1];this.up.set(y,A[0],A[1],A[2]),this.right.set(y,E[0],E[1],E[2])}},g.pan=function(y,v,_,h){v=v||0,_=_||0,h=h||0,this.recalcMatrix(y);var S=this.computedMatrix,A=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],P=S[9],I=d(A,E,P);A/=I,E/=I,P/=I;var D=S[0],z=S[4],V=S[8],O=D*A+z*E+V*P,j=d(D-=A*O,z-=E*O,V-=P*O),Y=(D/=j)*v+A*_,B=(z/=j)*v+E*_,U=(V/=j)*v+P*_;this.center.move(y,Y,B,U);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+h),this.radius.set(y,Math.log(q))},g.translate=function(y,v,_,h){this.center.move(y,v||0,_||0,h||0)},g.setMatrix=function(y,v,_,h){var S=1;typeof _=="number"&&(S=0|_),(S<0||S>3)&&(S=1);var A=(S+2)%3;v||(this.recalcMatrix(y),v=this.computedMatrix);var E=v[S],P=v[S+4],I=v[S+8];if(h){var D=Math.abs(E),z=Math.abs(P),V=Math.abs(I),O=Math.max(D,z,V);D===O?(E=E<0?-1:1,P=I=0):V===O?(I=I<0?-1:1,E=P=0):(P=P<0?-1:1,E=I=0)}else{var j=d(E,P,I);E/=j,P/=j,I/=j}var Y,B,U=v[A],q=v[A+4],te=v[A+8],ee=U*E+q*P+te*I,Q=d(U-=E*ee,q-=P*ee,te-=I*ee),J=P*(te/=Q)-I*(q/=Q),K=I*(U/=Q)-E*te,X=E*q-P*U,ie=d(J,K,X);if(J/=ie,K/=ie,X/=ie,this.center.jump(y,we,Me,Pe),this.radius.idle(y),this.up.jump(y,E,P,I),this.right.jump(y,U,q,te),S===2){var se=v[1],ae=v[5],ue=v[9],ve=se*U+ae*q+ue*te,ye=se*J+ae*K+ue*X;Y=ke<0?-Math.PI/2:Math.PI/2,B=Math.atan2(ye,ve)}else{var pe=v[2],de=v[6],me=v[10],ke=pe*E+de*P+me*I,Ce=pe*U+de*q+me*te,ge=pe*J+de*K+me*X;Y=Math.asin(u(ke)),B=Math.atan2(ge,Ce)}this.angle.jump(y,B,Y),this.recalcMatrix(y);var oe=v[2],re=v[6],fe=v[10],Se=this.computedMatrix;r(Se,v);var be=Se[15],we=Se[12]/be,Me=Se[13]/be,Pe=Se[14]/be,De=Math.exp(this.computedRadius[0]);this.center.jump(y,we-oe*De,Me-re*De,Pe-fe*De)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},g.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},g.setDistance=function(y,v){v>0&&this.radius.set(y,Math.log(v))},g.lookAt=function(y,v,_,h){this.recalcMatrix(y),v=v||this.computedEye,_=_||this.computedCenter;var S=(h=h||this.computedUp)[0],A=h[1],E=h[2],P=d(S,A,E);if(!(P<1e-6)){S/=P,A/=P,E/=P;var I=v[0]-_[0],D=v[1]-_[1],z=v[2]-_[2],V=d(I,D,z);if(!(V<1e-6)){I/=V,D/=V,z/=V;var O=this.computedRight,j=O[0],Y=O[1],B=O[2],U=S*j+A*Y+E*B,q=d(j-=U*S,Y-=U*A,B-=U*E);if(!(q<.01&&(q=d(j=A*z-E*D,Y=E*I-S*z,B=S*D-A*I))<1e-6)){j/=q,Y/=q,B/=q,this.up.set(y,S,A,E),this.right.set(y,j,Y,B),this.center.set(y,_[0],_[1],_[2]),this.radius.set(y,Math.log(V));var te=A*B-E*Y,ee=E*j-S*B,Q=S*Y-A*j,J=d(te,ee,Q),K=S*I+A*D+E*z,X=j*I+Y*D+B*z,ie=(te/=J)*I+(ee/=J)*D+(Q/=J)*z,se=Math.asin(u(K)),ae=Math.atan2(ie,X),ue=this.angle._state,ve=ue[ue.length-1],ye=ue[ue.length-2];ve%=2*Math.PI;var pe=Math.abs(ve+2*Math.PI-ae),de=Math.abs(ve-ae),me=Math.abs(ve-2*Math.PI-ae);pe<de&&(ve+=2*Math.PI),me<de&&(ve-=2*Math.PI),this.angle.jump(this.angle.lastT(),ve,ye),this.angle.set(y,ae,se)}}}}},5250:function(f){"use strict";f.exports=function(t,i,r){var n=t*i,o=s*t,l=o-(o-t),c=t-l,d=s*i,u=d-(d-i),x=i-u,p=c*x-(n-l*u-c*u-l*x);return r?(r[0]=p,r[1]=n,r):[p,n]};var s=+(Math.pow(2,27)+1)},9362:function(f){"use strict";f.exports=function(s,t,i){var r=s+t,n=r-s,o=t-n,l=s-(r-n);return i?(i[0]=l+o,i[1]=r,i):[l+o,r]}},1888:function(f,s,t){"use strict";var i=t(8828),r=t(1338),n=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var o=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",d=t.g.__TYPEDARRAY_POOL;d.UINT8C||(d.UINT8C=r([32,0])),d.BIGUINT64||(d.BIGUINT64=r([32,0])),d.BIGINT64||(d.BIGINT64=r([32,0])),d.BUFFER||(d.BUFFER=r([32,0]));var u=d.DATA,x=d.BUFFER;function p(O){if(O){var j=O.length||O.byteLength,Y=i.log2(j);u[Y].push(O)}}function g(O){O=i.nextPow2(O);var j=i.log2(O),Y=u[j];return Y.length>0?Y.pop():new ArrayBuffer(O)}function m(O){return new Uint8Array(g(O),0,O)}function y(O){return new Uint16Array(g(2*O),0,O)}function v(O){return new Uint32Array(g(4*O),0,O)}function _(O){return new Int8Array(g(O),0,O)}function h(O){return new Int16Array(g(2*O),0,O)}function S(O){return new Int32Array(g(4*O),0,O)}function A(O){return new Float32Array(g(4*O),0,O)}function E(O){return new Float64Array(g(8*O),0,O)}function P(O){return o?new Uint8ClampedArray(g(O),0,O):m(O)}function I(O){return l?new BigUint64Array(g(8*O),0,O):null}function D(O){return c?new BigInt64Array(g(8*O),0,O):null}function z(O){return new DataView(g(O),0,O)}function V(O){O=i.nextPow2(O);var j=i.log2(O),Y=x[j];return Y.length>0?Y.pop():new n(O)}s.free=function(O){if(n.isBuffer(O))x[i.log2(O.length)].push(O);else{if(Object.prototype.toString.call(O)!=="[object ArrayBuffer]"&&(O=O.buffer),!O)return;var j=O.length||O.byteLength,Y=0|i.log2(j);u[Y].push(O)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(O){p(O.buffer)},s.freeArrayBuffer=p,s.freeBuffer=function(O){x[i.log2(O.length)].push(O)},s.malloc=function(O,j){if(j===void 0||j==="arraybuffer")return g(O);switch(j){case"uint8":return m(O);case"uint16":return y(O);case"uint32":return v(O);case"int8":return _(O);case"int16":return h(O);case"int32":return S(O);case"float":case"float32":return A(O);case"double":case"float64":return E(O);case"uint8_clamped":return P(O);case"bigint64":return D(O);case"biguint64":return I(O);case"buffer":return V(O);case"data":case"dataview":return z(O);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=m,s.mallocUint16=y,s.mallocUint32=v,s.mallocInt8=_,s.mallocInt16=h,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=A,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=P,s.mallocBigUint64=I,s.mallocBigInt64=D,s.mallocDataView=z,s.mallocBuffer=V,s.clearCache=function(){for(var O=0;O<32;++O)d.UINT8[O].length=0,d.UINT16[O].length=0,d.UINT32[O].length=0,d.INT8[O].length=0,d.INT16[O].length=0,d.INT32[O].length=0,d.FLOAT[O].length=0,d.DOUBLE[O].length=0,d.BIGUINT64[O].length=0,d.BIGINT64[O].length=0,d.UINT8C[O].length=0,u[O].length=0,x[O].length=0}},1755:function(f){"use strict";function s(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}f.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var o=n[r];n[r]=i,r=o}return i},t.link=function(i,r){var n=this.find(i),o=this.find(r);if(n!==o){var l=this.ranks,c=this.roots,d=l[n],u=l[o];d<u?c[n]=o:u<d?c[o]=n:(c[o]=n,++l[n])}}},1682:function(f){"use strict";f.exports=function(s,t,i){return s.length===0?s:t?(i||s.sort(t),function(r,n){for(var o=1,l=r.length,c=r[0],d=r[0],u=1;u<l;++u)if(d=c,n(c=r[u],d)){if(u===o){o++;continue}r[o++]=c}return r.length=o,r}(s,t)):(i||s.sort(),function(r){for(var n=1,o=r.length,l=r[0],c=r[0],d=1;d<o;++d,c=l)if(c=l,(l=r[d])!==c){if(d===n){n++;continue}r[n++]=l}return r.length=n,r}(s))}},4359:function(f,s,t){"use strict";f.exports=function(o,l){return typeof l=="object"&&l!==null||(l={}),i(o,l.canvas||r,l.context||n,l)};var i=t(7718),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},7718:function(f,s,t){f.exports=function(I,D,z,V){var O=64,j=1.25,Y={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return V&&(V.size&&V.size>0&&(O=V.size),V.lineSpacing&&V.lineSpacing>0&&(j=V.lineSpacing),V.styletags&&V.styletags.breaklines&&(Y.breaklines=!!V.styletags.breaklines),V.styletags&&V.styletags.bolds&&(Y.bolds=!!V.styletags.bolds),V.styletags&&V.styletags.italics&&(Y.italics=!!V.styletags.italics),V.styletags&&V.styletags.subscripts&&(Y.subscripts=!!V.styletags.subscripts),V.styletags&&V.styletags.superscripts&&(Y.superscripts=!!V.styletags.superscripts)),z.font=[V.fontStyle,V.fontVariant,V.fontWeight,O+"px",V.font].filter(function(B){return B}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr",P(function(B,U,q,te,ee,Q){q=q.replace(/\n/g,""),q=Q.breaklines===!0?q.replace(/\<br\>/g,`
`):q.replace(/\<br\>/g," ");var J="",K=[];for(ae=0;ae<q.length;++ae)K[ae]=J;Q.bolds===!0&&(K=S(d,u,q,K)),Q.italics===!0&&(K=S(x,p,q,K)),Q.superscripts===!0&&(K=S(g,y,q,K)),Q.subscripts===!0&&(K=S(v,h,q,K));var X=[],ie="";for(ae=0;ae<q.length;++ae)K[ae]!==null&&(ie+=q[ae],X.push(K[ae]));var se,ae,ue,ve,ye,pe=ie.split(`
`),de=pe.length,me=Math.round(ee*te),ke=te,Ce=2*te,ge=0,oe=de*me+Ce;B.height<oe&&(B.height=oe),U.fillStyle="#000",U.fillRect(0,0,B.width,B.height),U.fillStyle="#fff";var re=0,fe="";function Se(){if(fe!==""){var Ae=U.measureText(fe).width;U.fillText(fe,ke+ue,Ce+ve),ue+=Ae}}function be(){return Math.round(ye)+"px "}function we(Ae,Oe){var Ee=""+U.font;if(Q.subscripts===!0){var Be=Ae.indexOf(_),Ve=Oe.indexOf(_),Ze=Be>-1?parseInt(Ae[1+Be]):0,it=Ve>-1?parseInt(Oe[1+Ve]):0;Ze!==it&&(Ee=Ee.replace(be(),"?px "),ye*=Math.pow(.75,it-Ze),Ee=Ee.replace("?px ",be())),ve+=.25*me*(it-Ze)}if(Q.superscripts===!0){var at=Ae.indexOf(m),gt=Oe.indexOf(m),yt=at>-1?parseInt(Ae[1+at]):0,pt=gt>-1?parseInt(Oe[1+gt]):0;yt!==pt&&(Ee=Ee.replace(be(),"?px "),ye*=Math.pow(.75,pt-yt),Ee=Ee.replace("?px ",be())),ve-=.25*me*(pt-yt)}if(Q.bolds===!0){var et=Ae.indexOf(u)>-1,$e=Oe.indexOf(u)>-1;!et&&$e&&(Ee=At?Ee.replace("italic ","italic bold "):"bold "+Ee),et&&!$e&&(Ee=Ee.replace("bold ",""))}if(Q.italics===!0){var At=Ae.indexOf(p)>-1,Ot=Oe.indexOf(p)>-1;!At&&Ot&&(Ee="italic "+Ee),At&&!Ot&&(Ee=Ee.replace("italic ",""))}U.font=Ee}for(se=0;se<de;++se){var Me=pe[se]+`
`;for(ue=0,ve=se*me,ye=te,fe="",ae=0;ae<Me.length;++ae){var Pe=ae+re<X.length?X[ae+re]:X[X.length-1];J===Pe?fe+=Me[ae]:(Se(),fe=Me[ae],Pe!==void 0&&(we(J,Pe),J=Pe))}Se(),re+=Me.length;var De=0|Math.round(ue+2*ke);ge<De&&(ge=De)}var he=ge,_e=Ce+me*de;return r(U.getImageData(0,0,he,_e).data,[_e,he,4]).pick(-1,-1,0).transpose(1,0)}(D,z,I,O,j,Y),V,O)},f.exports.processPixels=P;var i=t(3711),r=t(9618),n=t(5878),o=t(332),l=t(2538),c=t(2095),d="b",u="b|",x="i",p="i|",g="sup",m="+",y="+1",v="sub",_="-",h="-1";function S(I,D,z,V){for(var O="<"+I+">",j="</"+I+">",Y=O.length,B=j.length,U=D[0]===m||D[0]===_,q=0,te=-B;q>-1&&(q=z.indexOf(O,q))!==-1&&(te=z.indexOf(j,q+Y))!==-1&&!(te<=q);){for(var ee=q;ee<te+B;++ee)if(ee<q+Y||ee>=te)V[ee]=null,z=z.substr(0,ee)+" "+z.substr(ee+1);else if(V[ee]!==null){var Q=V[ee].indexOf(D[0]);Q===-1?V[ee]+=D:U&&(V[ee]=V[ee].substr(0,Q+1)+(1+parseInt(V[ee][Q+1]))+V[ee].substr(Q+2))}var J=q+Y,K=z.substr(J,te-J).indexOf(O);q=K!==-1?K:te+B}return V}function A(I,D){var z=i(I,128);return D?n(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function E(I,D,z,V){var O=A(I,V),j=function(se,ae,ue){for(var ve=ae.textAlign||"start",ye=ae.textBaseline||"alphabetic",pe=[1<<30,1<<30],de=[0,0],me=se.length,ke=0;ke<me;++ke)for(var Ce=se[ke],ge=0;ge<2;++ge)pe[ge]=0|Math.min(pe[ge],Ce[ge]),de[ge]=0|Math.max(de[ge],Ce[ge]);var oe=0;switch(ve){case"center":oe=-.5*(pe[0]+de[0]);break;case"right":case"end":oe=-de[0];break;case"left":case"start":oe=-pe[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ve+"'")}var re=0;switch(ye){case"hanging":case"top":re=-pe[1];break;case"middle":re=-.5*(pe[1]+de[1]);break;case"alphabetic":case"ideographic":re=-3*ue;break;case"bottom":re=-de[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ye+"'")}var fe=1/ue;return"lineHeight"in ae?fe*=+ae.lineHeight:"width"in ae?fe=ae.width/(de[0]-pe[0]):"height"in ae&&(fe=ae.height/(de[1]-pe[1])),se.map(function(Se){return[fe*(Se[0]+oe),fe*(Se[1]+re)]})}(O.positions,D,z),Y=O.edges,B=D.orientation==="ccw";if(o(j,Y),D.polygons||D.polygon||D.polyline){for(var U=c(Y,j),q=new Array(U.length),te=0;te<U.length;++te){for(var ee=U[te],Q=new Array(ee.length),J=0;J<ee.length;++J){for(var K=ee[J],X=new Array(K.length),ie=0;ie<K.length;++ie)X[ie]=j[K[ie]].slice();B&&X.reverse(),Q[J]=X}q[te]=Q}return q}return D.triangles||D.triangulate||D.triangle?{cells:l(j,Y,{delaunay:!1,exterior:!1,interior:!0}),positions:j}:{edges:Y,positions:j}}function P(I,D,z){try{return E(I,D,z,!0)}catch{}try{return E(I,D,z,!1)}catch{}return D.polygons||D.polyline||D.polygon?[]:D.triangles||D.triangulate||D.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(f){(function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=v);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,r=Object.freeze({});if(i.set(r,1),i.get(r)===1)return void(f.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,o=Object.defineProperty,l=Object.isExtensible,c="weakmap:",d=c+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var u=new ArrayBuffer(25),x=new Uint8Array(u);crypto.getRandomValues(x),d=c+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(_)}}),"getPropertyNames"in Object){var p=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(E){return p(E).filter(_)}})}(function(){var E=Object.freeze;o(Object,"freeze",{value:function(D){return h(D),E(D)}});var P=Object.seal;o(Object,"seal",{value:function(D){return h(D),P(D)}});var I=Object.preventExtensions;o(Object,"preventExtensions",{value:function(D){return h(D),I(D)}})})();var g=!1,m=0,y=function(){this instanceof y||A();var E=[],P=[],I=m++;return Object.create(y.prototype,{get___:{value:S(function(D,z){var V,O=h(D);return O?I in O?O[I]:z:(V=E.indexOf(D))>=0?P[V]:z})},has___:{value:S(function(D){var z=h(D);return z?I in z:E.indexOf(D)>=0})},set___:{value:S(function(D,z){var V,O=h(D);return O?O[I]=z:(V=E.indexOf(D))>=0?P[V]=z:(V=E.length,P[V]=z,E[V]=D),this})},delete___:{value:S(function(D){var z,V,O=h(D);return O?I in O&&delete O[I]:!((z=E.indexOf(D))<0||(V=E.length-1,E[z]=void 0,P[z]=P[V],E[z]=E[V],E.length=V,P.length=V,0))})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof y||A();var P,I=new t,D=void 0,z=!1;return P=s?function(V,O){return I.set(V,O),I.has(V)||(D||(D=new y),D.set(V,O)),this}:function(V,O){if(z)try{I.set(V,O)}catch{D||(D=new y),D.set___(V,O)}else I.set(V,O);return this},Object.create(y.prototype,{get___:{value:S(function(V,O){return D?I.has(V)?I.get(V):D.get___(V,O):I.get(V,O)})},has___:{value:S(function(V){return I.has(V)||!!D&&D.has___(V)})},set___:{value:S(P)},delete___:{value:S(function(V){var O=!!I.delete(V);return D&&D.delete___(V)||O})},permitHostObjects___:{value:S(function(V){if(V!==v)throw new Error("bogus call to permitHostObjects___");z=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=y.prototype,f.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),f.exports=y)}function v(E){E.permitHostObjects___&&E.permitHostObjects___(v)}function _(E){return!(E.substr(0,8)==c&&E.substr(E.length-3)==="___")}function h(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var P=E[d];if(P&&P.key===E)return P;if(l(E)){P={key:E};try{return o(E,d,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function A(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},236:function(f,s,t){var i=t(8284);f.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var o=n.valueOf(r);return o&&o.identity===r?o:i(n,r)}}},8284:function(f){f.exports=function(s,t){var i={identity:t},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==t?r.apply(this,arguments):i},writable:!0}),i}},606:function(f,s,t){var i=t(236);f.exports=function(){var r=i();return{get:function(n,o){var l=r(n);return l.hasOwnProperty("value")?l.value:o},set:function(n,o){return r(n).value=o,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},3349:function(f){"use strict";f.exports=function(s){var t={};return function(i,r,n){var o=i.dtype,l=i.order,c=[o,l.join()].join(),d=t[c];return d||(t[c]=d=s([o,l])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,r,n)}}((function(){return function(s,t,i,r,n,o){var l=s[0],c=i[0],d=[0],u=c;r|=0;var x=0,p=c;for(x=0;x<l;++x){var g=t[r]-o,m=t[r+u]-o;g>=0!=m>=0&&n.push(d[0]+.5+.5*(g+m)/(g-m)),r+=p,++d[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},781:function(f,s,t){"use strict";f.exports=function(r,n){var o=[];return n=+n||0,i(r.hi(r.shape[0]-1),o,n),o};var i=t(3349)},7790:function(){}},a={};function w(f){var s=a[f];if(s!==void 0)return s.exports;var t=a[f]={id:f,loaded:!1,exports:{}};return k[f].call(t.exports,t,t.exports,w),t.loaded=!0,t.exports}w.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),w.nmd=function(f){return f.paths=[],f.children||(f.children=[]),f};var b=w(1964);F.exports=b})()},33576:function(F,C,e){"use strict";function T(oe,re){for(var fe=0;fe<re.length;fe++){var Se=re[fe];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(oe,(be=function(we,Me){if(b(we)!=="object"||we===null)return we;var Pe=we[Symbol.toPrimitive];if(Pe!==void 0){var De=Pe.call(we,"string");if(b(De)!=="object")return De;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(we)}(Se.key),b(be)==="symbol"?be:String(be)),Se)}var be}function k(oe){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(re){return re.__proto__||Object.getPrototypeOf(re)},k(oe)}function a(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function w(oe,re){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fe,Se){return fe.__proto__=Se,fe},w(oe,re)}function b(oe){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},b(oe)}var f=e(59968),s=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;C.Buffer=n,C.SlowBuffer=function(oe){return+oe!=oe&&(oe=0),n.alloc(+oe)},C.INSPECT_MAX_BYTES=50;var i=2147483647;function r(oe){if(oe>i)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var re=new Uint8Array(oe);return Object.setPrototypeOf(re,n.prototype),re}function n(oe,re,fe){if(typeof oe=="number"){if(typeof re=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(oe)}return o(oe,re,fe)}function o(oe,re,fe){if(typeof oe=="string")return function(we,Me){if(typeof Me=="string"&&Me!==""||(Me="utf8"),!n.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);var Pe=0|p(we,Me),De=r(Pe),he=De.write(we,Me);return he!==Pe&&(De=De.slice(0,he)),De}(oe,re);if(ArrayBuffer.isView(oe))return function(we){if(de(we,Uint8Array)){var Me=new Uint8Array(we);return u(Me.buffer,Me.byteOffset,Me.byteLength)}return d(we)}(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(oe));if(de(oe,ArrayBuffer)||oe&&de(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(oe,SharedArrayBuffer)||oe&&de(oe.buffer,SharedArrayBuffer)))return u(oe,re,fe);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=oe.valueOf&&oe.valueOf();if(Se!=null&&Se!==oe)return n.from(Se,re,fe);var be=function(we){if(n.isBuffer(we)){var Me=0|x(we.length),Pe=r(Me);return Pe.length===0||we.copy(Pe,0,0,Me),Pe}return we.length!==void 0?typeof we.length!="number"||me(we.length)?r(0):d(we):we.type==="Buffer"&&Array.isArray(we.data)?d(we.data):void 0}(oe);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return n.from(oe[Symbol.toPrimitive]("string"),re,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(oe))}function l(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function c(oe){return l(oe),r(oe<0?0:0|x(oe))}function d(oe){for(var re=oe.length<0?0:0|x(oe.length),fe=r(re),Se=0;Se<re;Se+=1)fe[Se]=255&oe[Se];return fe}function u(oe,re,fe){if(re<0||oe.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<re+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return Se=re===void 0&&fe===void 0?new Uint8Array(oe):fe===void 0?new Uint8Array(oe,re):new Uint8Array(oe,re,fe),Object.setPrototypeOf(Se,n.prototype),Se}function x(oe){if(oe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|oe}function p(oe,re){if(n.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||de(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(oe));var fe=oe.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&fe===0)return 0;for(var be=!1;;)switch(re){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return ve(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*fe;case"hex":return fe>>>1;case"base64":return ye(oe).length;default:if(be)return Se?-1:ve(oe).length;re=(""+re).toLowerCase(),be=!0}}function g(oe,re,fe){var Se=!1;if((re===void 0||re<0)&&(re=0),re>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0)<=(re>>>=0))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return O(this,re,fe);case"utf8":case"utf-8":return I(this,re,fe);case"ascii":return z(this,re,fe);case"latin1":case"binary":return V(this,re,fe);case"base64":return P(this,re,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,re,fe);default:if(Se)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),Se=!0}}function m(oe,re,fe){var Se=oe[re];oe[re]=oe[fe],oe[fe]=Se}function y(oe,re,fe,Se,be){if(oe.length===0)return-1;if(typeof fe=="string"?(Se=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),me(fe=+fe)&&(fe=be?0:oe.length-1),fe<0&&(fe=oe.length+fe),fe>=oe.length){if(be)return-1;fe=oe.length-1}else if(fe<0){if(!be)return-1;fe=0}if(typeof re=="string"&&(re=n.from(re,Se)),n.isBuffer(re))return re.length===0?-1:v(oe,re,fe,Se,be);if(typeof re=="number")return re&=255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(oe,re,fe):Uint8Array.prototype.lastIndexOf.call(oe,re,fe):v(oe,[re],fe,Se,be);throw new TypeError("val must be string, number or Buffer")}function v(oe,re,fe,Se,be){var we,Me=1,Pe=oe.length,De=re.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(oe.length<2||re.length<2)return-1;Me=2,Pe/=2,De/=2,fe/=2}function he(Ee,Be){return Me===1?Ee[Be]:Ee.readUInt16BE(Be*Me)}if(be){var _e=-1;for(we=fe;we<Pe;we++)if(he(oe,we)===he(re,_e===-1?0:we-_e)){if(_e===-1&&(_e=we),we-_e+1===De)return _e*Me}else _e!==-1&&(we-=we-_e),_e=-1}else for(fe+De>Pe&&(fe=Pe-De),we=fe;we>=0;we--){for(var Ae=!0,Oe=0;Oe<De;Oe++)if(he(oe,we+Oe)!==he(re,Oe)){Ae=!1;break}if(Ae)return we}return-1}function _(oe,re,fe,Se){fe=Number(fe)||0;var be=oe.length-fe;Se?(Se=Number(Se))>be&&(Se=be):Se=be;var we,Me=re.length;for(Se>Me/2&&(Se=Me/2),we=0;we<Se;++we){var Pe=parseInt(re.substr(2*we,2),16);if(me(Pe))return we;oe[fe+we]=Pe}return we}function h(oe,re,fe,Se){return pe(ve(re,oe.length-fe),oe,fe,Se)}function S(oe,re,fe,Se){return pe(function(be){for(var we=[],Me=0;Me<be.length;++Me)we.push(255&be.charCodeAt(Me));return we}(re),oe,fe,Se)}function A(oe,re,fe,Se){return pe(ye(re),oe,fe,Se)}function E(oe,re,fe,Se){return pe(function(be,we){for(var Me,Pe,De,he=[],_e=0;_e<be.length&&!((we-=2)<0);++_e)Pe=(Me=be.charCodeAt(_e))>>8,De=Me%256,he.push(De),he.push(Pe);return he}(re,oe.length-fe),oe,fe,Se)}function P(oe,re,fe){return re===0&&fe===oe.length?f.fromByteArray(oe):f.fromByteArray(oe.slice(re,fe))}function I(oe,re,fe){fe=Math.min(oe.length,fe);for(var Se=[],be=re;be<fe;){var we=oe[be],Me=null,Pe=we>239?4:we>223?3:we>191?2:1;if(be+Pe<=fe){var De=void 0,he=void 0,_e=void 0,Ae=void 0;switch(Pe){case 1:we<128&&(Me=we);break;case 2:(192&(De=oe[be+1]))==128&&(Ae=(31&we)<<6|63&De)>127&&(Me=Ae);break;case 3:De=oe[be+1],he=oe[be+2],(192&De)==128&&(192&he)==128&&(Ae=(15&we)<<12|(63&De)<<6|63&he)>2047&&(Ae<55296||Ae>57343)&&(Me=Ae);break;case 4:De=oe[be+1],he=oe[be+2],_e=oe[be+3],(192&De)==128&&(192&he)==128&&(192&_e)==128&&(Ae=(15&we)<<18|(63&De)<<12|(63&he)<<6|63&_e)>65535&&Ae<1114112&&(Me=Ae)}}Me===null?(Me=65533,Pe=1):Me>65535&&(Me-=65536,Se.push(Me>>>10&1023|55296),Me=56320|1023&Me),Se.push(Me),be+=Pe}return function(Oe){var Ee=Oe.length;if(Ee<=D)return String.fromCharCode.apply(String,Oe);for(var Be="",Ve=0;Ve<Ee;)Be+=String.fromCharCode.apply(String,Oe.slice(Ve,Ve+=D));return Be}(Se)}C.kMaxLength=i,n.TYPED_ARRAY_SUPPORT=function(){try{var oe=new Uint8Array(1),re={foo:function(){return 42}};return Object.setPrototypeOf(re,Uint8Array.prototype),Object.setPrototypeOf(oe,re),oe.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(oe,re,fe){return o(oe,re,fe)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(oe,re,fe){return function(Se,be,we){return l(Se),Se<=0?r(Se):be!==void 0?typeof we=="string"?r(Se).fill(be,we):r(Se).fill(be):r(Se)}(oe,re,fe)},n.allocUnsafe=function(oe){return c(oe)},n.allocUnsafeSlow=function(oe){return c(oe)},n.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==n.prototype},n.compare=function(oe,re){if(de(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),de(re,Uint8Array)&&(re=n.from(re,re.offset,re.byteLength)),!n.isBuffer(oe)||!n.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===re)return 0;for(var fe=oe.length,Se=re.length,be=0,we=Math.min(fe,Se);be<we;++be)if(oe[be]!==re[be]){fe=oe[be],Se=re[be];break}return fe<Se?-1:Se<fe?1:0},n.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(oe,re){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return n.alloc(0);var fe;if(re===void 0)for(re=0,fe=0;fe<oe.length;++fe)re+=oe[fe].length;var Se=n.allocUnsafe(re),be=0;for(fe=0;fe<oe.length;++fe){var we=oe[fe];if(de(we,Uint8Array))be+we.length>Se.length?(n.isBuffer(we)||(we=n.from(we)),we.copy(Se,be)):Uint8Array.prototype.set.call(Se,we,be);else{if(!n.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(Se,be)}be+=we.length}return Se},n.byteLength=p,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var re=0;re<oe;re+=2)m(this,re,re+1);return this},n.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var re=0;re<oe;re+=4)m(this,re,re+3),m(this,re+1,re+2);return this},n.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var re=0;re<oe;re+=8)m(this,re,re+7),m(this,re+1,re+6),m(this,re+2,re+5),m(this,re+3,re+4);return this},n.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?I(this,0,oe):g.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(oe){if(!n.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe||n.compare(this,oe)===0},n.prototype.inspect=function(){var oe="",re=C.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(oe+=" ... "),"<Buffer "+oe+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(oe,re,fe,Se,be){if(de(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),!n.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(oe));if(re===void 0&&(re=0),fe===void 0&&(fe=oe?oe.length:0),Se===void 0&&(Se=0),be===void 0&&(be=this.length),re<0||fe>oe.length||Se<0||be>this.length)throw new RangeError("out of range index");if(Se>=be&&re>=fe)return 0;if(Se>=be)return-1;if(re>=fe)return 1;if(this===oe)return 0;for(var we=(be>>>=0)-(Se>>>=0),Me=(fe>>>=0)-(re>>>=0),Pe=Math.min(we,Me),De=this.slice(Se,be),he=oe.slice(re,fe),_e=0;_e<Pe;++_e)if(De[_e]!==he[_e]){we=De[_e],Me=he[_e];break}return we<Me?-1:Me<we?1:0},n.prototype.includes=function(oe,re,fe){return this.indexOf(oe,re,fe)!==-1},n.prototype.indexOf=function(oe,re,fe){return y(this,oe,re,fe,!0)},n.prototype.lastIndexOf=function(oe,re,fe){return y(this,oe,re,fe,!1)},n.prototype.write=function(oe,re,fe,Se){if(re===void 0)Se="utf8",fe=this.length,re=0;else if(fe===void 0&&typeof re=="string")Se=re,fe=this.length,re=0;else{if(!isFinite(re))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");re>>>=0,isFinite(fe)?(fe>>>=0,Se===void 0&&(Se="utf8")):(Se=fe,fe=void 0)}var be=this.length-re;if((fe===void 0||fe>be)&&(fe=be),oe.length>0&&(fe<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var we=!1;;)switch(Se){case"hex":return _(this,oe,re,fe);case"utf8":case"utf-8":return h(this,oe,re,fe);case"ascii":case"latin1":case"binary":return S(this,oe,re,fe);case"base64":return A(this,oe,re,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,oe,re,fe);default:if(we)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),we=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function z(oe,re,fe){var Se="";fe=Math.min(oe.length,fe);for(var be=re;be<fe;++be)Se+=String.fromCharCode(127&oe[be]);return Se}function V(oe,re,fe){var Se="";fe=Math.min(oe.length,fe);for(var be=re;be<fe;++be)Se+=String.fromCharCode(oe[be]);return Se}function O(oe,re,fe){var Se=oe.length;(!re||re<0)&&(re=0),(!fe||fe<0||fe>Se)&&(fe=Se);for(var be="",we=re;we<fe;++we)be+=ke[oe[we]];return be}function j(oe,re,fe){for(var Se=oe.slice(re,fe),be="",we=0;we<Se.length-1;we+=2)be+=String.fromCharCode(Se[we]+256*Se[we+1]);return be}function Y(oe,re,fe){if(oe%1!=0||oe<0)throw new RangeError("offset is not uint");if(oe+re>fe)throw new RangeError("Trying to access beyond buffer length")}function B(oe,re,fe,Se,be,we){if(!n.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>be||re<we)throw new RangeError('"value" argument is out of bounds');if(fe+Se>oe.length)throw new RangeError("Index out of range")}function U(oe,re,fe,Se,be){ie(re,Se,be,oe,fe,7);var we=Number(re&BigInt(4294967295));oe[fe++]=we,we>>=8,oe[fe++]=we,we>>=8,oe[fe++]=we,we>>=8,oe[fe++]=we;var Me=Number(re>>BigInt(32)&BigInt(4294967295));return oe[fe++]=Me,Me>>=8,oe[fe++]=Me,Me>>=8,oe[fe++]=Me,Me>>=8,oe[fe++]=Me,fe}function q(oe,re,fe,Se,be){ie(re,Se,be,oe,fe,7);var we=Number(re&BigInt(4294967295));oe[fe+7]=we,we>>=8,oe[fe+6]=we,we>>=8,oe[fe+5]=we,we>>=8,oe[fe+4]=we;var Me=Number(re>>BigInt(32)&BigInt(4294967295));return oe[fe+3]=Me,Me>>=8,oe[fe+2]=Me,Me>>=8,oe[fe+1]=Me,Me>>=8,oe[fe]=Me,fe+8}function te(oe,re,fe,Se,be,we){if(fe+Se>oe.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function ee(oe,re,fe,Se,be){return re=+re,fe>>>=0,be||te(oe,0,fe,4),s.write(oe,re,fe,Se,23,4),fe+4}function Q(oe,re,fe,Se,be){return re=+re,fe>>>=0,be||te(oe,0,fe,8),s.write(oe,re,fe,Se,52,8),fe+8}n.prototype.slice=function(oe,re){var fe=this.length;(oe=~~oe)<0?(oe+=fe)<0&&(oe=0):oe>fe&&(oe=fe),(re=re===void 0?fe:~~re)<0?(re+=fe)<0&&(re=0):re>fe&&(re=fe),re<oe&&(re=oe);var Se=this.subarray(oe,re);return Object.setPrototypeOf(Se,n.prototype),Se},n.prototype.readUintLE=n.prototype.readUIntLE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||Y(oe,re,this.length);for(var Se=this[oe],be=1,we=0;++we<re&&(be*=256);)Se+=this[oe+we]*be;return Se},n.prototype.readUintBE=n.prototype.readUIntBE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||Y(oe,re,this.length);for(var Se=this[oe+--re],be=1;re>0&&(be*=256);)Se+=this[oe+--re]*be;return Se},n.prototype.readUint8=n.prototype.readUInt8=function(oe,re){return oe>>>=0,re||Y(oe,1,this.length),this[oe]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(oe,re){return oe>>>=0,re||Y(oe,2,this.length),this[oe]|this[oe+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(oe,re){return oe>>>=0,re||Y(oe,2,this.length),this[oe]<<8|this[oe+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(oe,re){return oe>>>=0,re||Y(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+16777216*this[oe+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(oe,re){return oe>>>=0,re||Y(oe,4,this.length),16777216*this[oe]+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},n.prototype.readBigUInt64LE=Ce(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=re+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24),be=this[++oe]+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+fe*Math.pow(2,24);return BigInt(Se)+(BigInt(be)<<BigInt(32))}),n.prototype.readBigUInt64BE=Ce(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=re*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe],be=this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+fe;return(BigInt(Se)<<BigInt(32))+BigInt(be)}),n.prototype.readIntLE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||Y(oe,re,this.length);for(var Se=this[oe],be=1,we=0;++we<re&&(be*=256);)Se+=this[oe+we]*be;return Se>=(be*=128)&&(Se-=Math.pow(2,8*re)),Se},n.prototype.readIntBE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||Y(oe,re,this.length);for(var Se=re,be=1,we=this[oe+--Se];Se>0&&(be*=256);)we+=this[oe+--Se]*be;return we>=(be*=128)&&(we-=Math.pow(2,8*re)),we},n.prototype.readInt8=function(oe,re){return oe>>>=0,re||Y(oe,1,this.length),128&this[oe]?-1*(255-this[oe]+1):this[oe]},n.prototype.readInt16LE=function(oe,re){oe>>>=0,re||Y(oe,2,this.length);var fe=this[oe]|this[oe+1]<<8;return 32768&fe?4294901760|fe:fe},n.prototype.readInt16BE=function(oe,re){oe>>>=0,re||Y(oe,2,this.length);var fe=this[oe+1]|this[oe]<<8;return 32768&fe?4294901760|fe:fe},n.prototype.readInt32LE=function(oe,re){return oe>>>=0,re||Y(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},n.prototype.readInt32BE=function(oe,re){return oe>>>=0,re||Y(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},n.prototype.readBigInt64LE=Ce(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=this[oe+4]+this[oe+5]*Math.pow(2,8)+this[oe+6]*Math.pow(2,16)+(fe<<24);return(BigInt(Se)<<BigInt(32))+BigInt(re+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24))}),n.prototype.readBigInt64BE=Ce(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=(re<<24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe];return(BigInt(Se)<<BigInt(32))+BigInt(this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+fe)}),n.prototype.readFloatLE=function(oe,re){return oe>>>=0,re||Y(oe,4,this.length),s.read(this,oe,!0,23,4)},n.prototype.readFloatBE=function(oe,re){return oe>>>=0,re||Y(oe,4,this.length),s.read(this,oe,!1,23,4)},n.prototype.readDoubleLE=function(oe,re){return oe>>>=0,re||Y(oe,8,this.length),s.read(this,oe,!0,52,8)},n.prototype.readDoubleBE=function(oe,re){return oe>>>=0,re||Y(oe,8,this.length),s.read(this,oe,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(oe,re,fe,Se){oe=+oe,re>>>=0,fe>>>=0,Se||B(this,oe,re,fe,Math.pow(2,8*fe)-1,0);var be=1,we=0;for(this[re]=255&oe;++we<fe&&(be*=256);)this[re+we]=oe/be&255;return re+fe},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(oe,re,fe,Se){oe=+oe,re>>>=0,fe>>>=0,Se||B(this,oe,re,fe,Math.pow(2,8*fe)-1,0);var be=fe-1,we=1;for(this[re+be]=255&oe;--be>=0&&(we*=256);)this[re+be]=oe/we&255;return re+fe},n.prototype.writeUint8=n.prototype.writeUInt8=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,1,255,0),this[re]=255&oe,re+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,2,65535,0),this[re]=255&oe,this[re+1]=oe>>>8,re+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,2,65535,0),this[re]=oe>>>8,this[re+1]=255&oe,re+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,4,4294967295,0),this[re+3]=oe>>>24,this[re+2]=oe>>>16,this[re+1]=oe>>>8,this[re]=255&oe,re+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,4,4294967295,0),this[re]=oe>>>24,this[re+1]=oe>>>16,this[re+2]=oe>>>8,this[re+3]=255&oe,re+4},n.prototype.writeBigUInt64LE=Ce(function(oe){return U(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Ce(function(oe){return q(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(oe,re,fe,Se){if(oe=+oe,re>>>=0,!Se){var be=Math.pow(2,8*fe-1);B(this,oe,re,fe,be-1,-be)}var we=0,Me=1,Pe=0;for(this[re]=255&oe;++we<fe&&(Me*=256);)oe<0&&Pe===0&&this[re+we-1]!==0&&(Pe=1),this[re+we]=(oe/Me>>0)-Pe&255;return re+fe},n.prototype.writeIntBE=function(oe,re,fe,Se){if(oe=+oe,re>>>=0,!Se){var be=Math.pow(2,8*fe-1);B(this,oe,re,fe,be-1,-be)}var we=fe-1,Me=1,Pe=0;for(this[re+we]=255&oe;--we>=0&&(Me*=256);)oe<0&&Pe===0&&this[re+we+1]!==0&&(Pe=1),this[re+we]=(oe/Me>>0)-Pe&255;return re+fe},n.prototype.writeInt8=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,1,127,-128),oe<0&&(oe=255+oe+1),this[re]=255&oe,re+1},n.prototype.writeInt16LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,2,32767,-32768),this[re]=255&oe,this[re+1]=oe>>>8,re+2},n.prototype.writeInt16BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,2,32767,-32768),this[re]=oe>>>8,this[re+1]=255&oe,re+2},n.prototype.writeInt32LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,4,2147483647,-2147483648),this[re]=255&oe,this[re+1]=oe>>>8,this[re+2]=oe>>>16,this[re+3]=oe>>>24,re+4},n.prototype.writeInt32BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||B(this,oe,re,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[re]=oe>>>24,this[re+1]=oe>>>16,this[re+2]=oe>>>8,this[re+3]=255&oe,re+4},n.prototype.writeBigInt64LE=Ce(function(oe){return U(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Ce(function(oe){return q(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(oe,re,fe){return ee(this,oe,re,!0,fe)},n.prototype.writeFloatBE=function(oe,re,fe){return ee(this,oe,re,!1,fe)},n.prototype.writeDoubleLE=function(oe,re,fe){return Q(this,oe,re,!0,fe)},n.prototype.writeDoubleBE=function(oe,re,fe){return Q(this,oe,re,!1,fe)},n.prototype.copy=function(oe,re,fe,Se){if(!n.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),Se||Se===0||(Se=this.length),re>=oe.length&&(re=oe.length),re||(re=0),Se>0&&Se<fe&&(Se=fe),Se===fe||oe.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),oe.length-re<Se-fe&&(Se=oe.length-re+fe);var be=Se-fe;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(re,fe,Se):Uint8Array.prototype.set.call(oe,this.subarray(fe,Se),re),be},n.prototype.fill=function(oe,re,fe,Se){if(typeof oe=="string"){if(typeof re=="string"?(Se=re,re=0,fe=this.length):typeof fe=="string"&&(Se=fe,fe=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!n.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(oe.length===1){var be=oe.charCodeAt(0);(Se==="utf8"&&be<128||Se==="latin1")&&(oe=be)}}else typeof oe=="number"?oe&=255:typeof oe=="boolean"&&(oe=Number(oe));if(re<0||this.length<re||this.length<fe)throw new RangeError("Out of range index");if(fe<=re)return this;var we;if(re>>>=0,fe=fe===void 0?this.length:fe>>>0,oe||(oe=0),typeof oe=="number")for(we=re;we<fe;++we)this[we]=oe;else{var Me=n.isBuffer(oe)?oe:n.from(oe,Se),Pe=Me.length;if(Pe===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(we=0;we<fe-re;++we)this[we+re]=Me[we%Pe]}return this};var J={};function K(oe,re,fe){J[oe]=function(Se){function be(){var Pe;return function(De,he){if(!(De instanceof he))throw new TypeError("Cannot call a class as a function")}(this,be),Pe=function(De,he,_e){return he=k(he),function(Ae,Oe){if(Oe&&(b(Oe)==="object"||typeof Oe=="function"))return Oe;if(Oe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(Ae)}(De,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(he,_e||[],k(De).constructor):he.apply(De,_e))}(this,be),Object.defineProperty(a(Pe),"message",{value:re.apply(a(Pe),arguments),writable:!0,configurable:!0}),Pe.name="".concat(Pe.name," [").concat(oe,"]"),Pe.stack,delete Pe.name,Pe}var we,Me;return function(Pe,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function");Pe.prototype=Object.create(De&&De.prototype,{constructor:{value:Pe,writable:!0,configurable:!0}}),Object.defineProperty(Pe,"prototype",{writable:!1}),De&&w(Pe,De)}(be,Se),we=be,(Me=[{key:"code",get:function(){return oe},set:function(Pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Pe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(oe,"]: ").concat(this.message)}}])&&T(we.prototype,Me),Object.defineProperty(we,"prototype",{writable:!1}),be}(fe)}function X(oe){for(var re="",fe=oe.length,Se=oe[0]==="-"?1:0;fe>=Se+4;fe-=3)re="_".concat(oe.slice(fe-3,fe)).concat(re);return"".concat(oe.slice(0,fe)).concat(re)}function ie(oe,re,fe,Se,be,we){if(oe>fe||oe<re){var Me,Pe=typeof re=="bigint"?"n":"";throw Me=we>3?re===0||re===BigInt(0)?">= 0".concat(Pe," and < 2").concat(Pe," ** ").concat(8*(we+1)).concat(Pe):">= -(2".concat(Pe," ** ").concat(8*(we+1)-1).concat(Pe,") and < 2 ** ")+"".concat(8*(we+1)-1).concat(Pe):">= ".concat(re).concat(Pe," and <= ").concat(fe).concat(Pe),new J.ERR_OUT_OF_RANGE("value",Me,oe)}(function(De,he,_e){se(he,"offset"),De[he]!==void 0&&De[he+_e]!==void 0||ae(he,De.length-(_e+1))})(Se,be,we)}function se(oe,re){if(typeof oe!="number")throw new J.ERR_INVALID_ARG_TYPE(re,"number",oe)}function ae(oe,re,fe){throw Math.floor(oe)!==oe?(se(oe,fe),new J.ERR_OUT_OF_RANGE(fe||"offset","an integer",oe)):re<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE(fe||"offset",">= ".concat(fe?1:0," and <= ").concat(re),oe)}K("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?"".concat(oe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(oe,re){return'The "'.concat(oe,'" argument must be of type number. Received type ').concat(b(re))},TypeError),K("ERR_OUT_OF_RANGE",function(oe,re,fe){var Se='The value of "'.concat(oe,'" is out of range.'),be=fe;return Number.isInteger(fe)&&Math.abs(fe)>Math.pow(2,32)?be=X(String(fe)):typeof fe=="bigint"&&(be=String(fe),(fe>Math.pow(BigInt(2),BigInt(32))||fe<-Math.pow(BigInt(2),BigInt(32)))&&(be=X(be)),be+="n"),Se+" It must be ".concat(re,". Received ").concat(be)},RangeError);var ue=/[^+/0-9A-Za-z-_]/g;function ve(oe,re){var fe;re=re||1/0;for(var Se=oe.length,be=null,we=[],Me=0;Me<Se;++Me){if((fe=oe.charCodeAt(Me))>55295&&fe<57344){if(!be){if(fe>56319){(re-=3)>-1&&we.push(239,191,189);continue}if(Me+1===Se){(re-=3)>-1&&we.push(239,191,189);continue}be=fe;continue}if(fe<56320){(re-=3)>-1&&we.push(239,191,189),be=fe;continue}fe=65536+(be-55296<<10|fe-56320)}else be&&(re-=3)>-1&&we.push(239,191,189);if(be=null,fe<128){if((re-=1)<0)break;we.push(fe)}else if(fe<2048){if((re-=2)<0)break;we.push(fe>>6|192,63&fe|128)}else if(fe<65536){if((re-=3)<0)break;we.push(fe>>12|224,fe>>6&63|128,63&fe|128)}else{if(!(fe<1114112))throw new Error("Invalid code point");if((re-=4)<0)break;we.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,63&fe|128)}}return we}function ye(oe){return f.toByteArray(function(re){if((re=(re=re.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(oe))}function pe(oe,re,fe,Se){var be;for(be=0;be<Se&&!(be+fe>=re.length||be>=oe.length);++be)re[be+fe]=oe[be];return be}function de(oe,re){return oe instanceof re||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===re.name}function me(oe){return oe!=oe}var ke=function(){for(var oe="0123456789abcdef",re=new Array(256),fe=0;fe<16;++fe)for(var Se=16*fe,be=0;be<16;++be)re[Se+be]=oe[fe]+oe[be];return re}();function Ce(oe){return typeof BigInt>"u"?ge:oe}function ge(){throw new Error("BigInt not supported")}},25928:function(F){"use strict";F.exports=k,F.exports.isMobile=k,F.exports.default=k;var C=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,T=/android|ipad|playbook|silk/i;function k(a){a||(a={});var w=a.ua;if(w||typeof navigator>"u"||(w=navigator.userAgent),w&&w.headers&&typeof w.headers["user-agent"]=="string"&&(w=w.headers["user-agent"]),typeof w!="string")return!1;var b=C.test(w)&&!e.test(w)||!!a.tablet&&T.test(w);return!b&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&w.indexOf("Macintosh")!==-1&&w.indexOf("Safari")!==-1&&(b=!0),b}},48932:function(F,C,e){"use strict";e.r(C),e.d(C,{sankeyCenter:function(){return r},sankeyCircular:function(){return P},sankeyJustify:function(){return i},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var T=e(84706),k=e(34712),a=e(10132),w=e(6688),b=e.n(w);function f(pe){return pe.target.depth}function s(pe){return pe.depth}function t(pe,de){return de-1-pe.height}function i(pe,de){return pe.sourceLinks.length?pe.depth:de-1}function r(pe){return pe.targetLinks.length?pe.depth:pe.sourceLinks.length?(0,T.SY)(pe.sourceLinks,f)-1:0}function n(pe){return function(){return pe}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe};function l(pe,de){return d(pe.source,de.source)||pe.index-de.index}function c(pe,de){return d(pe.target,de.target)||pe.index-de.index}function d(pe,de){return pe.partOfCycle===de.partOfCycle?pe.y0-de.y0:pe.circularLinkType==="top"||de.circularLinkType==="bottom"?-1:1}function u(pe){return pe.value}function x(pe){return(pe.y0+pe.y1)/2}function p(pe){return x(pe.source)}function g(pe){return x(pe.target)}function m(pe){return pe.index}function y(pe){return pe.nodes}function v(pe){return pe.links}function _(pe,de){var me=pe.get(de);if(!me)throw new Error("missing: "+de);return me}function h(pe,de){return de(pe)}var S=25,A=10,E=.3;function P(){var pe,de,me=0,ke=0,Ce=1,ge=1,oe=24,re=m,fe=i,Se=y,be=v,we=32,Me=2,Pe=null;function De(){var _e={nodes:Se.apply(null,arguments),links:be.apply(null,arguments)};(function(Oe){Oe.nodes.forEach(function(Be,Ve){Be.index=Ve,Be.sourceLinks=[],Be.targetLinks=[]});var Ee=(0,k.kH)(Oe.nodes,re);Oe.links.forEach(function(Be,Ve){Be.index=Ve;var Ze=Be.source,it=Be.target;(Ze===void 0?"undefined":o(Ze))!=="object"&&(Ze=Be.source=_(Ee,Ze)),(it===void 0?"undefined":o(it))!=="object"&&(it=Be.target=_(Ee,it)),Ze.sourceLinks.push(Be),it.targetLinks.push(Be)})})(_e),function(Oe,Ee,Be){var Ve=0;if(Be===null){for(var Ze=[],it=0;it<Oe.links.length;it++){var at=Oe.links[it],gt=at.source.index,yt=at.target.index;Ze[gt]||(Ze[gt]=[]),Ze[yt]||(Ze[yt]=[]),Ze[gt].indexOf(yt)===-1&&Ze[gt].push(yt)}var pt=b()(Ze);pt.sort(function(At,Ot){return At.length-Ot.length});var et={};for(it=0;it<pt.length;it++){var $e=pt[it].slice(-2);et[$e[0]]||(et[$e[0]]={}),et[$e[0]][$e[1]]=!0}Oe.links.forEach(function(At){var Ot=At.target.index,Rt=At.source.index;Ot===Rt||et[Rt]&&et[Rt][Ot]?(At.circular=!0,At.circularLinkID=Ve,Ve+=1):At.circular=!1})}else Oe.links.forEach(function(At){At.source[Be]<At.target[Be]?At.circular=!1:(At.circular=!0,At.circularLinkID=Ve,Ve+=1)})}(_e,0,Pe),function(Oe){Oe.nodes.forEach(function(Ee){Ee.partOfCycle=!1,Ee.value=Math.max((0,T.oh)(Ee.sourceLinks,u),(0,T.oh)(Ee.targetLinks,u)),Ee.sourceLinks.forEach(function(Be){Be.circular&&(Ee.partOfCycle=!0,Ee.circularLinkType=Be.circularLinkType)}),Ee.targetLinks.forEach(function(Be){Be.circular&&(Ee.partOfCycle=!0,Ee.circularLinkType=Be.circularLinkType)})})}(_e),function(Oe){var Ee,Be,Ve;for(Ee=Oe.nodes,Be=[],Ve=0;Ee.length;++Ve,Ee=Be,Be=[])Ee.forEach(function(Ze){Ze.depth=Ve,Ze.sourceLinks.forEach(function(it){Be.indexOf(it.target)<0&&!it.circular&&Be.push(it.target)})});for(Ee=Oe.nodes,Be=[],Ve=0;Ee.length;++Ve,Ee=Be,Be=[])Ee.forEach(function(Ze){Ze.height=Ve,Ze.targetLinks.forEach(function(it){Be.indexOf(it.source)<0&&!it.circular&&Be.push(it.source)})});Oe.nodes.forEach(function(Ze){Ze.column=Math.floor(fe.call(null,Ze,Ve))})}(_e),I(_e,re),function(Oe,Ee,Be){var Ve=(0,k.UJ)().key(function(yt){return yt.column}).sortKeys(T.XE).entries(Oe.nodes).map(function(yt){return yt.values});(function(yt){if(de){var pt=1/0;Ve.forEach(function(Ot){var Rt=ge*de/(Ot.length+1);pt=Rt<pt?Rt:pt}),pe=pt}var et=(0,T.SY)(Ve,function(Ot){return(ge-ke-(Ot.length-1)*pe)/(0,T.oh)(Ot,u)});et*=E,Oe.links.forEach(function(Ot){Ot.width=Ot.value*et});var $e=function(Ot){var Rt=0,Ct=0,Ge=0,Xe=0,Ne=(0,T.kv)(Ot.nodes,function(Ye){return Ye.column});return Ot.links.forEach(function(Ye){Ye.circular&&(Ye.circularLinkType=="top"?Rt+=Ye.width:Ct+=Ye.width,Ye.target.column==0&&(Xe+=Ye.width),Ye.source.column==Ne&&(Ge+=Ye.width))}),{top:Rt=Rt>0?Rt+S+A:Rt,bottom:Ct=Ct>0?Ct+S+A:Ct,left:Xe=Xe>0?Xe+S+A:Xe,right:Ge=Ge>0?Ge+S+A:Ge}}(Oe),At=function(Ot,Rt){var Ct=(0,T.kv)(Ot.nodes,function(ot){return ot.column}),Ge=Ce-me,Xe=ge-ke,Ne=Ge/(Ge+Rt.right+Rt.left),Ye=Xe/(Xe+Rt.top+Rt.bottom);return me=me*Ne+Rt.left,Ce=Rt.right==0?Ce:Ce*Ne,ke=ke*Ye+Rt.top,ge*=Ye,Ot.nodes.forEach(function(ot){ot.x0=me+ot.column*((Ce-me-oe)/Ct),ot.x1=ot.x0+oe}),Ye}(Oe,$e);et*=At,Oe.links.forEach(function(Ot){Ot.width=Ot.value*et}),Ve.forEach(function(Ot){var Rt=Ot.length;Ot.forEach(function(Ct,Ge){Ct.depth==Ve.length-1&&Rt==1||Ct.depth==0&&Rt==1?(Ct.y0=ge/2-Ct.value*et,Ct.y1=Ct.y0+Ct.value*et):Ct.partOfCycle?z(Ct,yt)==0?(Ct.y0=ge/2+Ge,Ct.y1=Ct.y0+Ct.value*et):Ct.circularLinkType=="top"?(Ct.y0=ke+Ge,Ct.y1=Ct.y0+Ct.value*et):(Ct.y0=ge-Ct.value*et-Ge,Ct.y1=Ct.y0+Ct.value*et):$e.top==0||$e.bottom==0?(Ct.y0=(ge-ke)/Rt*Ge,Ct.y1=Ct.y0+Ct.value*et):(Ct.y0=(ge-ke)/2-Rt/2+Ge,Ct.y1=Ct.y0+Ct.value*et)})})})(Be),gt();for(var Ze=1,it=Ee;it>0;--it)at(Ze*=.99,Be),gt();function at(yt,pt){var et=Ve.length;Ve.forEach(function($e){var At=$e.length,Ot=$e[0].depth;$e.forEach(function(Rt){var Ct;if((Rt.sourceLinks.length||Rt.targetLinks.length)&&!(Rt.partOfCycle&&z(Rt,pt)>0))if(Ot==0&&At==1)Ct=Rt.y1-Rt.y0,Rt.y0=ge/2-Ct/2,Rt.y1=ge/2+Ct/2;else if(Ot==et-1&&At==1)Ct=Rt.y1-Rt.y0,Rt.y0=ge/2-Ct/2,Rt.y1=ge/2+Ct/2;else{var Ge=(0,T.mo)(Rt.sourceLinks,g),Xe=(0,T.mo)(Rt.targetLinks,p),Ne=((Ge&&Xe?(Ge+Xe)/2:Ge||Xe)-x(Rt))*yt;Rt.y0+=Ne,Rt.y1+=Ne}})})}function gt(){Ve.forEach(function(yt){var pt,et,$e,At=ke,Ot=yt.length;for(yt.sort(d),$e=0;$e<Ot;++$e)(et=At-(pt=yt[$e]).y0)>0&&(pt.y0+=et,pt.y1+=et),At=pt.y1+pe;if((et=At-pe-ge)>0)for(At=pt.y0-=et,pt.y1-=et,$e=Ot-2;$e>=0;--$e)(et=(pt=yt[$e]).y1+pe-At)>0&&(pt.y0-=et,pt.y1-=et),At=pt.y0})}}(_e,we,re),he(_e);for(var Ae=0;Ae<4;Ae++)se(_e,ge,re),ae(_e,0,re),X(_e,ke,ge,re),se(_e,ge,re),ae(_e,0,re);return function(Oe,Ee,Be){var Ve=Oe.nodes,Ze=Oe.links,it=!1,at=!1;if(Ze.forEach(function(pt){pt.circularLinkType=="top"?it=!0:pt.circularLinkType=="bottom"&&(at=!0)}),it==0||at==0){var gt=(0,T.SY)(Ve,function(pt){return pt.y0}),yt=(Be-Ee)/((0,T.kv)(Ve,function(pt){return pt.y1})-gt);Ve.forEach(function(pt){var et=(pt.y1-pt.y0)*yt;pt.y0=(pt.y0-gt)*yt,pt.y1=pt.y0+et}),Ze.forEach(function(pt){pt.y0=(pt.y0-gt)*yt,pt.y1=(pt.y1-gt)*yt,pt.width=pt.width*yt})}}(_e,ke,ge),j(_e,Me,ge,re),_e}function he(_e){_e.nodes.forEach(function(Ae){Ae.sourceLinks.sort(c),Ae.targetLinks.sort(l)}),_e.nodes.forEach(function(Ae){var Oe=Ae.y0,Ee=Oe,Be=Ae.y1,Ve=Be;Ae.sourceLinks.forEach(function(Ze){Ze.circular?(Ze.y0=Be-Ze.width/2,Be-=Ze.width):(Ze.y0=Oe+Ze.width/2,Oe+=Ze.width)}),Ae.targetLinks.forEach(function(Ze){Ze.circular?(Ze.y1=Ve-Ze.width/2,Ve-=Ze.width):(Ze.y1=Ee+Ze.width/2,Ee+=Ze.width)})})}return De.nodeId=function(_e){return arguments.length?(re=typeof _e=="function"?_e:n(_e),De):re},De.nodeAlign=function(_e){return arguments.length?(fe=typeof _e=="function"?_e:n(_e),De):fe},De.nodeWidth=function(_e){return arguments.length?(oe=+_e,De):oe},De.nodePadding=function(_e){return arguments.length?(pe=+_e,De):pe},De.nodes=function(_e){return arguments.length?(Se=typeof _e=="function"?_e:n(_e),De):Se},De.links=function(_e){return arguments.length?(be=typeof _e=="function"?_e:n(_e),De):be},De.size=function(_e){return arguments.length?(me=ke=0,Ce=+_e[0],ge=+_e[1],De):[Ce-me,ge-ke]},De.extent=function(_e){return arguments.length?(me=+_e[0][0],Ce=+_e[1][0],ke=+_e[0][1],ge=+_e[1][1],De):[[me,ke],[Ce,ge]]},De.iterations=function(_e){return arguments.length?(we=+_e,De):we},De.circularLinkGap=function(_e){return arguments.length?(Me=+_e,De):Me},De.nodePaddingRatio=function(_e){return arguments.length?(de=+_e,De):de},De.sortNodes=function(_e){return arguments.length?(Pe=_e,De):Pe},De.update=function(_e){return I(_e,re),he(_e),_e.links.forEach(function(Ae){Ae.circular&&(Ae.circularLinkType=Ae.y0+Ae.y1<ge?"top":"bottom",Ae.source.circularLinkType=Ae.circularLinkType,Ae.target.circularLinkType=Ae.circularLinkType)}),se(_e,ge,re,!1),ae(_e,0,re),j(_e,Me,ge,re),_e},De}function I(pe,de){var me=0,ke=0;pe.links.forEach(function(Ce){Ce.circular&&(Ce.source.circularLinkType||Ce.target.circularLinkType?Ce.circularLinkType=Ce.source.circularLinkType?Ce.source.circularLinkType:Ce.target.circularLinkType:Ce.circularLinkType=me<ke?"top":"bottom",Ce.circularLinkType=="top"?me+=1:ke+=1,pe.nodes.forEach(function(ge){h(ge,de)!=h(Ce.source,de)&&h(ge,de)!=h(Ce.target,de)||(ge.circularLinkType=Ce.circularLinkType)}))}),pe.links.forEach(function(Ce){Ce.circular&&(Ce.source.circularLinkType==Ce.target.circularLinkType&&(Ce.circularLinkType=Ce.source.circularLinkType),ye(Ce,de)&&(Ce.circularLinkType=Ce.source.circularLinkType))})}function D(pe){var de=Math.abs(pe.y1-pe.y0),me=Math.abs(pe.target.x0-pe.source.x1);return Math.atan(me/de)}function z(pe,de){var me=0;pe.sourceLinks.forEach(function(Ce){me=Ce.circular&&!ye(Ce,de)?me+1:me});var ke=0;return pe.targetLinks.forEach(function(Ce){ke=Ce.circular&&!ye(Ce,de)?ke+1:ke}),me+ke}function V(pe){var de=pe.source.sourceLinks,me=0;de.forEach(function(ge){me=ge.circular?me+1:me});var ke=pe.target.targetLinks,Ce=0;return ke.forEach(function(ge){Ce=ge.circular?Ce+1:Ce}),!(me>1||Ce>1)}function O(pe,de,me){return pe.sort(Y),pe.forEach(function(ke,Ce){var ge,oe,re=0;if(ye(ke,me)&&V(ke))ke.circularPathData.verticalBuffer=re+ke.width/2;else{for(var fe=0;fe<Ce;fe++)if(ge=pe[Ce],oe=pe[fe],!(ge.source.column<oe.target.column||ge.target.column>oe.source.column)){var Se=pe[fe].circularPathData.verticalBuffer+pe[fe].width/2+de;re=Se>re?Se:re}ke.circularPathData.verticalBuffer=re+ke.width/2}}),pe}function j(pe,de,me,ke){var Ce=(0,T.SY)(pe.links,function(ge){return ge.source.y0});pe.links.forEach(function(ge){ge.circular&&(ge.circularPathData={})}),O(pe.links.filter(function(ge){return ge.circularLinkType=="top"}),de,ke),O(pe.links.filter(function(ge){return ge.circularLinkType=="bottom"}),de,ke),pe.links.forEach(function(ge){if(ge.circular){if(ge.circularPathData.arcRadius=ge.width+A,ge.circularPathData.leftNodeBuffer=5,ge.circularPathData.rightNodeBuffer=5,ge.circularPathData.sourceWidth=ge.source.x1-ge.source.x0,ge.circularPathData.sourceX=ge.source.x0+ge.circularPathData.sourceWidth,ge.circularPathData.targetX=ge.target.x0,ge.circularPathData.sourceY=ge.y0,ge.circularPathData.targetY=ge.y1,ye(ge,ke)&&V(ge))ge.circularPathData.leftSmallArcRadius=A+ge.width/2,ge.circularPathData.leftLargeArcRadius=A+ge.width/2,ge.circularPathData.rightSmallArcRadius=A+ge.width/2,ge.circularPathData.rightLargeArcRadius=A+ge.width/2,ge.circularLinkType=="bottom"?(ge.circularPathData.verticalFullExtent=ge.source.y1+S+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=ge.source.y0-S-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius);else{var oe=ge.source.column,re=ge.circularLinkType,fe=pe.links.filter(function(we){return we.source.column==oe&&we.circularLinkType==re});ge.circularLinkType=="bottom"?fe.sort(U):fe.sort(B);var Se=0;fe.forEach(function(we,Me){we.circularLinkID==ge.circularLinkID&&(ge.circularPathData.leftSmallArcRadius=A+ge.width/2+Se,ge.circularPathData.leftLargeArcRadius=A+ge.width/2+Me*de+Se),Se+=we.width}),oe=ge.target.column,fe=pe.links.filter(function(we){return we.target.column==oe&&we.circularLinkType==re}),ge.circularLinkType=="bottom"?fe.sort(te):fe.sort(q),Se=0,fe.forEach(function(we,Me){we.circularLinkID==ge.circularLinkID&&(ge.circularPathData.rightSmallArcRadius=A+ge.width/2+Se,ge.circularPathData.rightLargeArcRadius=A+ge.width/2+Me*de+Se),Se+=we.width}),ge.circularLinkType=="bottom"?(ge.circularPathData.verticalFullExtent=Math.max(me,ge.source.y1,ge.target.y1)+S+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=Ce-S-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius)}ge.circularPathData.leftInnerExtent=ge.circularPathData.sourceX+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightInnerExtent=ge.circularPathData.targetX-ge.circularPathData.rightNodeBuffer,ge.circularPathData.leftFullExtent=ge.circularPathData.sourceX+ge.circularPathData.leftLargeArcRadius+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightFullExtent=ge.circularPathData.targetX-ge.circularPathData.rightLargeArcRadius-ge.circularPathData.rightNodeBuffer}if(ge.circular)ge.path=function(we){return we.circularLinkType=="top"?"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 0 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY-we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 0 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 0 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY-we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 0 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY:"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 1 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY+we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 1 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 1 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY+we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 1 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY}(ge);else{var be=(0,a.ak)().source(function(we){return[we.source.x0+(we.source.x1-we.source.x0),we.y0]}).target(function(we){return[we.target.x0,we.y1]});ge.path=be(ge)}})}function Y(pe,de){return ee(pe)==ee(de)?pe.circularLinkType=="bottom"?U(pe,de):B(pe,de):ee(de)-ee(pe)}function B(pe,de){return pe.y0-de.y0}function U(pe,de){return de.y0-pe.y0}function q(pe,de){return pe.y1-de.y1}function te(pe,de){return de.y1-pe.y1}function ee(pe){return pe.target.column-pe.source.column}function Q(pe){return pe.target.x0-pe.source.x1}function J(pe,de){var me=D(pe),ke=Q(de)/Math.tan(me);return ve(pe)=="up"?pe.y1+ke:pe.y1-ke}function K(pe,de){var me=D(pe),ke=Q(de)/Math.tan(me);return ve(pe)=="up"?pe.y1-ke:pe.y1+ke}function X(pe,de,me,ke){pe.links.forEach(function(Ce){if(!Ce.circular&&Ce.target.column-Ce.source.column>1){var ge=Ce.source.column+1,oe=Ce.target.column-1,re=1,fe=oe-ge+1;for(re=1;ge<=oe;ge++,re++)pe.nodes.forEach(function(Se){if(Se.column==ge){var be,we=re/(fe+1),Me=Math.pow(1-we,3),Pe=3*we*Math.pow(1-we,2),De=3*Math.pow(we,2)*(1-we),he=Math.pow(we,3),_e=Me*Ce.y0+Pe*Ce.y0+De*Ce.y1+he*Ce.y1,Ae=_e-Ce.width/2,Oe=_e+Ce.width/2;Ae>Se.y0&&Ae<Se.y1?(be=Se.y1-Ae+10,be=Se.circularLinkType=="bottom"?be:-be,Se=ie(Se,be,de,me),pe.nodes.forEach(function(Ee){var Be,Ve;h(Ee,ke)!=h(Se,ke)&&Ee.column==Se.column&&(Ve=Ee,(Be=Se).y0>Ve.y0&&Be.y0<Ve.y1||Be.y1>Ve.y0&&Be.y1<Ve.y1||Be.y0<Ve.y0&&Be.y1>Ve.y1)&&ie(Ee,be,de,me)})):(Oe>Se.y0&&Oe<Se.y1||Ae<Se.y0&&Oe>Se.y1)&&(be=Oe-Se.y0+10,Se=ie(Se,be,de,me),pe.nodes.forEach(function(Ee){h(Ee,ke)!=h(Se,ke)&&Ee.column==Se.column&&Ee.y0<Se.y1&&Ee.y1>Se.y1&&ie(Ee,be,de,me)}))}})}})}function ie(pe,de,me,ke){return pe.y0+de>=me&&pe.y1+de<=ke&&(pe.y0=pe.y0+de,pe.y1=pe.y1+de,pe.targetLinks.forEach(function(Ce){Ce.y1=Ce.y1+de}),pe.sourceLinks.forEach(function(Ce){Ce.y0=Ce.y0+de})),pe}function se(pe,de,me,ke){pe.nodes.forEach(function(Ce){ke&&Ce.y+(Ce.y1-Ce.y0)>de&&(Ce.y=Ce.y-(Ce.y+(Ce.y1-Ce.y0)-de));var ge=pe.links.filter(function(fe){return h(fe.source,me)==h(Ce,me)}),oe=ge.length;oe>1&&ge.sort(function(fe,Se){if(!fe.circular&&!Se.circular){if(fe.target.column==Se.target.column||!ue(fe,Se))return fe.y1-Se.y1;if(fe.target.column>Se.target.column){var be=K(Se,fe);return fe.y1-be}if(Se.target.column>fe.target.column)return K(fe,Se)-Se.y1}return fe.circular&&!Se.circular?fe.circularLinkType=="top"?-1:1:Se.circular&&!fe.circular?Se.circularLinkType=="top"?1:-1:fe.circular&&Se.circular?fe.circularLinkType===Se.circularLinkType&&fe.circularLinkType=="top"?fe.target.column===Se.target.column?fe.target.y1-Se.target.y1:Se.target.column-fe.target.column:fe.circularLinkType===Se.circularLinkType&&fe.circularLinkType=="bottom"?fe.target.column===Se.target.column?Se.target.y1-fe.target.y1:fe.target.column-Se.target.column:fe.circularLinkType=="top"?-1:1:void 0});var re=Ce.y0;ge.forEach(function(fe){fe.y0=re+fe.width/2,re+=fe.width}),ge.forEach(function(fe,Se){if(fe.circularLinkType=="bottom"){for(var be=Se+1,we=0;be<oe;be++)we+=ge[be].width;fe.y0=Ce.y1-we-fe.width/2}})})}function ae(pe,de,me){pe.nodes.forEach(function(ke){var Ce=pe.links.filter(function(re){return h(re.target,me)==h(ke,me)}),ge=Ce.length;ge>1&&Ce.sort(function(re,fe){if(!re.circular&&!fe.circular){if(re.source.column==fe.source.column||!ue(re,fe))return re.y0-fe.y0;if(fe.source.column<re.source.column){var Se=J(fe,re);return re.y0-Se}if(re.source.column<fe.source.column)return J(re,fe)-fe.y0}return re.circular&&!fe.circular?re.circularLinkType=="top"?-1:1:fe.circular&&!re.circular?fe.circularLinkType=="top"?1:-1:re.circular&&fe.circular?re.circularLinkType===fe.circularLinkType&&re.circularLinkType=="top"?re.source.column===fe.source.column?re.source.y1-fe.source.y1:re.source.column-fe.source.column:re.circularLinkType===fe.circularLinkType&&re.circularLinkType=="bottom"?re.source.column===fe.source.column?re.source.y1-fe.source.y1:fe.source.column-re.source.column:re.circularLinkType=="top"?-1:1:void 0});var oe=ke.y0;Ce.forEach(function(re){re.y1=oe+re.width/2,oe+=re.width}),Ce.forEach(function(re,fe){if(re.circularLinkType=="bottom"){for(var Se=fe+1,be=0;Se<ge;Se++)be+=Ce[Se].width;re.y1=ke.y1-be-re.width/2}})})}function ue(pe,de){return ve(pe)==ve(de)}function ve(pe){return pe.y0-pe.y1>0?"up":"down"}function ye(pe,de){return h(pe.source,de)==h(pe.target,de)}},26800:function(F,C,e){"use strict";e.r(C),e.d(C,{sankey:function(){return m},sankeyCenter:function(){return s},sankeyJustify:function(){return f},sankeyLeft:function(){return w},sankeyLinkHorizontal:function(){return h},sankeyRight:function(){return b}});var T=e(84706),k=e(34712);function a(S){return S.target.depth}function w(S){return S.depth}function b(S,A){return A-1-S.height}function f(S,A){return S.sourceLinks.length?S.depth:A-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,T.SY)(S.sourceLinks,a)-1:0}function t(S){return function(){return S}}function i(S,A){return n(S.source,A.source)||S.index-A.index}function r(S,A){return n(S.target,A.target)||S.index-A.index}function n(S,A){return S.y0-A.y0}function o(S){return S.value}function l(S){return(S.y0+S.y1)/2}function c(S){return l(S.source)*S.value}function d(S){return l(S.target)*S.value}function u(S){return S.index}function x(S){return S.nodes}function p(S){return S.links}function g(S,A){var E=S.get(A);if(!E)throw new Error("missing: "+A);return E}function m(){var S=0,A=0,E=1,P=1,I=24,D=8,z=u,V=f,O=x,j=p,Y=32;function B(){var q={nodes:O.apply(null,arguments),links:j.apply(null,arguments)};return function(te){te.nodes.forEach(function(Q,J){Q.index=J,Q.sourceLinks=[],Q.targetLinks=[]});var ee=(0,k.kH)(te.nodes,z);te.links.forEach(function(Q,J){Q.index=J;var K=Q.source,X=Q.target;typeof K!="object"&&(K=Q.source=g(ee,K)),typeof X!="object"&&(X=Q.target=g(ee,X)),K.sourceLinks.push(Q),X.targetLinks.push(Q)})}(q),function(te){te.nodes.forEach(function(ee){ee.value=Math.max((0,T.oh)(ee.sourceLinks,o),(0,T.oh)(ee.targetLinks,o))})}(q),function(te){var ee,Q,J;for(ee=te.nodes,Q=[],J=0;ee.length;++J,ee=Q,Q=[])ee.forEach(function(X){X.depth=J,X.sourceLinks.forEach(function(ie){Q.indexOf(ie.target)<0&&Q.push(ie.target)})});for(ee=te.nodes,Q=[],J=0;ee.length;++J,ee=Q,Q=[])ee.forEach(function(X){X.height=J,X.targetLinks.forEach(function(ie){Q.indexOf(ie.source)<0&&Q.push(ie.source)})});var K=(E-S-I)/(J-1);te.nodes.forEach(function(X){X.x1=(X.x0=S+Math.max(0,Math.min(J-1,Math.floor(V.call(null,X,J))))*K)+I})}(q),function(te){var ee=(0,k.UJ)().key(function(se){return se.x0}).sortKeys(T.XE).entries(te.nodes).map(function(se){return se.values});(function(){var se=(0,T.kv)(ee,function(ve){return ve.length}),ae=.6666666666666666*(P-A)/(se-1);D>ae&&(D=ae);var ue=(0,T.SY)(ee,function(ve){return(P-A-(ve.length-1)*D)/(0,T.oh)(ve,o)});ee.forEach(function(ve){ve.forEach(function(ye,pe){ye.y1=(ye.y0=pe)+ye.value*ue})}),te.links.forEach(function(ve){ve.width=ve.value*ue})})(),ie();for(var Q=1,J=Y;J>0;--J)X(Q*=.99),ie(),K(Q),ie();function K(se){ee.forEach(function(ae){ae.forEach(function(ue){if(ue.targetLinks.length){var ve=((0,T.oh)(ue.targetLinks,c)/(0,T.oh)(ue.targetLinks,o)-l(ue))*se;ue.y0+=ve,ue.y1+=ve}})})}function X(se){ee.slice().reverse().forEach(function(ae){ae.forEach(function(ue){if(ue.sourceLinks.length){var ve=((0,T.oh)(ue.sourceLinks,d)/(0,T.oh)(ue.sourceLinks,o)-l(ue))*se;ue.y0+=ve,ue.y1+=ve}})})}function ie(){ee.forEach(function(se){var ae,ue,ve,ye=A,pe=se.length;for(se.sort(n),ve=0;ve<pe;++ve)(ue=ye-(ae=se[ve]).y0)>0&&(ae.y0+=ue,ae.y1+=ue),ye=ae.y1+D;if((ue=ye-D-P)>0)for(ye=ae.y0-=ue,ae.y1-=ue,ve=pe-2;ve>=0;--ve)(ue=(ae=se[ve]).y1+D-ye)>0&&(ae.y0-=ue,ae.y1-=ue),ye=ae.y0})}}(q),U(q),q}function U(q){q.nodes.forEach(function(te){te.sourceLinks.sort(r),te.targetLinks.sort(i)}),q.nodes.forEach(function(te){var ee=te.y0,Q=ee;te.sourceLinks.forEach(function(J){J.y0=ee+J.width/2,ee+=J.width}),te.targetLinks.forEach(function(J){J.y1=Q+J.width/2,Q+=J.width})})}return B.update=function(q){return U(q),q},B.nodeId=function(q){return arguments.length?(z=typeof q=="function"?q:t(q),B):z},B.nodeAlign=function(q){return arguments.length?(V=typeof q=="function"?q:t(q),B):V},B.nodeWidth=function(q){return arguments.length?(I=+q,B):I},B.nodePadding=function(q){return arguments.length?(D=+q,B):D},B.nodes=function(q){return arguments.length?(O=typeof q=="function"?q:t(q),B):O},B.links=function(q){return arguments.length?(j=typeof q=="function"?q:t(q),B):j},B.size=function(q){return arguments.length?(S=A=0,E=+q[0],P=+q[1],B):[E-S,P-A]},B.extent=function(q){return arguments.length?(S=+q[0][0],E=+q[1][0],A=+q[0][1],P=+q[1][1],B):[[S,A],[E,P]]},B.iterations=function(q){return arguments.length?(Y=+q,B):Y},B}var y=e(10132);function v(S){return[S.source.x1,S.y0]}function _(S){return[S.target.x0,S.y1]}function h(){return(0,y.ak)().source(v).target(_)}},33428:function(F,C,e){var T,k;(function(){var a={version:"3.8.2"},w=[].slice,b=function(L){return w.call(L)},f=self.document;function s(L){return L&&(L.ownerDocument||L.document||L).documentElement}function t(L){return L&&(L.ownerDocument&&L.ownerDocument.defaultView||L.document&&L||L.defaultView)}if(f)try{b(f.documentElement.childNodes)[0].nodeType}catch{b=function(H){for(var $=H.length,ne=new Array($);$--;)ne[$]=H[$];return ne}}if(Date.now||(Date.now=function(){return+new Date}),f)try{f.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,o=this.CSSStyleDeclaration.prototype,l=o.setProperty;i.setAttribute=function(H,$){r.call(this,H,$+"")},i.setAttributeNS=function(H,$,ne){n.call(this,H,$,ne+"")},o.setProperty=function(H,$,ne){l.call(this,H,$+"",ne)}}function c(L,H){return L<H?-1:L>H?1:L>=H?0:NaN}function d(L){return L===null?NaN:+L}function u(L){return!isNaN(L)}function x(L){return{left:function(H,$,ne,ce){for(arguments.length<3&&(ne=0),arguments.length<4&&(ce=H.length);ne<ce;){var xe=ne+ce>>>1;L(H[xe],$)<0?ne=xe+1:ce=xe}return ne},right:function(H,$,ne,ce){for(arguments.length<3&&(ne=0),arguments.length<4&&(ce=H.length);ne<ce;){var xe=ne+ce>>>1;L(H[xe],$)>0?ce=xe:ne=xe+1}return ne}}}a.ascending=c,a.descending=function(L,H){return H<L?-1:H>L?1:H>=L?0:NaN},a.min=function(L,H){var $,ne,ce=-1,xe=L.length;if(arguments.length===1){for(;++ce<xe;)if((ne=L[ce])!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=L[ce])!=null&&$>ne&&($=ne)}else{for(;++ce<xe;)if((ne=H.call(L,L[ce],ce))!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=H.call(L,L[ce],ce))!=null&&$>ne&&($=ne)}return $},a.max=function(L,H){var $,ne,ce=-1,xe=L.length;if(arguments.length===1){for(;++ce<xe;)if((ne=L[ce])!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=L[ce])!=null&&ne>$&&($=ne)}else{for(;++ce<xe;)if((ne=H.call(L,L[ce],ce))!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=H.call(L,L[ce],ce))!=null&&ne>$&&($=ne)}return $},a.extent=function(L,H){var $,ne,ce,xe=-1,Le=L.length;if(arguments.length===1){for(;++xe<Le;)if((ne=L[xe])!=null&&ne>=ne){$=ce=ne;break}for(;++xe<Le;)(ne=L[xe])!=null&&($>ne&&($=ne),ce<ne&&(ce=ne))}else{for(;++xe<Le;)if((ne=H.call(L,L[xe],xe))!=null&&ne>=ne){$=ce=ne;break}for(;++xe<Le;)(ne=H.call(L,L[xe],xe))!=null&&($>ne&&($=ne),ce<ne&&(ce=ne))}return[$,ce]},a.sum=function(L,H){var $,ne=0,ce=L.length,xe=-1;if(arguments.length===1)for(;++xe<ce;)u($=+L[xe])&&(ne+=$);else for(;++xe<ce;)u($=+H.call(L,L[xe],xe))&&(ne+=$);return ne},a.mean=function(L,H){var $,ne=0,ce=L.length,xe=-1,Le=ce;if(arguments.length===1)for(;++xe<ce;)u($=d(L[xe]))?ne+=$:--Le;else for(;++xe<ce;)u($=d(H.call(L,L[xe],xe)))?ne+=$:--Le;if(Le)return ne/Le},a.quantile=function(L,H){var $=(L.length-1)*H+1,ne=Math.floor($),ce=+L[ne-1],xe=$-ne;return xe?ce+xe*(L[ne]-ce):ce},a.median=function(L,H){var $,ne=[],ce=L.length,xe=-1;if(arguments.length===1)for(;++xe<ce;)u($=d(L[xe]))&&ne.push($);else for(;++xe<ce;)u($=d(H.call(L,L[xe],xe)))&&ne.push($);if(ne.length)return a.quantile(ne.sort(c),.5)},a.variance=function(L,H){var $,ne,ce=L.length,xe=0,Le=0,Re=-1,Ue=0;if(arguments.length===1)for(;++Re<ce;)u($=d(L[Re]))&&(Le+=(ne=$-xe)*($-(xe+=ne/++Ue)));else for(;++Re<ce;)u($=d(H.call(L,L[Re],Re)))&&(Le+=(ne=$-xe)*($-(xe+=ne/++Ue)));if(Ue>1)return Le/(Ue-1)},a.deviation=function(){var L=a.variance.apply(this,arguments);return L&&Math.sqrt(L)};var p=x(c);function g(L){return L.length}a.bisectLeft=p.left,a.bisect=a.bisectRight=p.right,a.bisector=function(L){return x(L.length===1?function(H,$){return c(L(H),$)}:L)},a.shuffle=function(L,H,$){(xe=arguments.length)<3&&($=L.length,xe<2&&(H=0));for(var ne,ce,xe=$-H;xe;)ce=Math.random()*xe--|0,ne=L[xe+H],L[xe+H]=L[ce+H],L[ce+H]=ne;return L},a.permute=function(L,H){for(var $=H.length,ne=new Array($);$--;)ne[$]=L[H[$]];return ne},a.pairs=function(L){for(var H=0,$=L.length-1,ne=L[0],ce=new Array($<0?0:$);H<$;)ce[H]=[ne,ne=L[++H]];return ce},a.transpose=function(L){if(!(ce=L.length))return[];for(var H=-1,$=a.min(L,g),ne=new Array($);++H<$;)for(var ce,xe=-1,Le=ne[H]=new Array(ce);++xe<ce;)Le[xe]=L[xe][H];return ne},a.zip=function(){return a.transpose(arguments)},a.keys=function(L){var H=[];for(var $ in L)H.push($);return H},a.values=function(L){var H=[];for(var $ in L)H.push(L[$]);return H},a.entries=function(L){var H=[];for(var $ in L)H.push({key:$,value:L[$]});return H},a.merge=function(L){for(var H,$,ne,ce=L.length,xe=-1,Le=0;++xe<ce;)Le+=L[xe].length;for($=new Array(Le);--ce>=0;)for(H=(ne=L[ce]).length;--H>=0;)$[--Le]=ne[H];return $};var m=Math.abs;function y(L,H){for(var $ in H)Object.defineProperty(L.prototype,$,{value:H[$],enumerable:!1})}function v(){this._=Object.create(null)}a.range=function(L,H,$){if(arguments.length<3&&($=1,arguments.length<2&&(H=L,L=0)),(H-L)/$==1/0)throw new Error("infinite range");var ne,ce=[],xe=function(Re){for(var Ue=1;Re*Ue%1;)Ue*=10;return Ue}(m($)),Le=-1;if(L*=xe,H*=xe,($*=xe)<0)for(;(ne=L+$*++Le)>H;)ce.push(ne/xe);else for(;(ne=L+$*++Le)<H;)ce.push(ne/xe);return ce},a.map=function(L,H){var $=new v;if(L instanceof v)L.forEach(function(Re,Ue){$.set(Re,Ue)});else if(Array.isArray(L)){var ne,ce=-1,xe=L.length;if(arguments.length===1)for(;++ce<xe;)$.set(ce,L[ce]);else for(;++ce<xe;)$.set(H.call(L,ne=L[ce],ce),ne)}else for(var Le in L)$.set(Le,L[Le]);return $};var _="__proto__",h="\0";function S(L){return(L+="")===_||L[0]===h?h+L:L}function A(L){return(L+="")[0]===h?L.slice(1):L}function E(L){return S(L)in this._}function P(L){return(L=S(L))in this._&&delete this._[L]}function I(){var L=[];for(var H in this._)L.push(A(H));return L}function D(){var L=0;for(var H in this._)++L;return L}function z(){for(var L in this._)return!1;return!0}function V(){this._=Object.create(null)}function O(L){return L}function j(L,H,$){return function(){var ne=$.apply(H,arguments);return ne===H?L:ne}}function Y(L,H){if(H in L)return H;H=H.charAt(0).toUpperCase()+H.slice(1);for(var $=0,ne=B.length;$<ne;++$){var ce=B[$]+H;if(ce in L)return ce}}y(v,{has:E,get:function(L){return this._[S(L)]},set:function(L,H){return this._[S(L)]=H},remove:P,keys:I,values:function(){var L=[];for(var H in this._)L.push(this._[H]);return L},entries:function(){var L=[];for(var H in this._)L.push({key:A(H),value:this._[H]});return L},size:D,empty:z,forEach:function(L){for(var H in this._)L.call(this,A(H),this._[H])}}),a.nest=function(){var L,H,$={},ne=[],ce=[];function xe(Re,Ue,He){if(He>=ne.length)return H?H.call($,Ue):L?Ue.sort(L):Ue;for(var tt,ct,dt,wt,Et=-1,kt=Ue.length,Bt=ne[He++],It=new v;++Et<kt;)(wt=It.get(tt=Bt(ct=Ue[Et])))?wt.push(ct):It.set(tt,[ct]);return Re?(ct=Re(),dt=function(Kt,qt){ct.set(Kt,xe(Re,qt,He))}):(ct={},dt=function(Kt,qt){ct[Kt]=xe(Re,qt,He)}),It.forEach(dt),ct}function Le(Re,Ue){if(Ue>=ne.length)return Re;var He=[],tt=ce[Ue++];return Re.forEach(function(ct,dt){He.push({key:ct,values:Le(dt,Ue)})}),tt?He.sort(function(ct,dt){return tt(ct.key,dt.key)}):He}return $.map=function(Re,Ue){return xe(Ue,Re,0)},$.entries=function(Re){return Le(xe(a.map,Re,0),0)},$.key=function(Re){return ne.push(Re),$},$.sortKeys=function(Re){return ce[ne.length-1]=Re,$},$.sortValues=function(Re){return L=Re,$},$.rollup=function(Re){return H=Re,$},$},a.set=function(L){var H=new V;if(L)for(var $=0,ne=L.length;$<ne;++$)H.add(L[$]);return H},y(V,{has:E,add:function(L){return this._[S(L+="")]=!0,L},remove:P,values:I,size:D,empty:z,forEach:function(L){for(var H in this._)L.call(this,A(H))}}),a.behavior={},a.rebind=function(L,H){for(var $,ne=1,ce=arguments.length;++ne<ce;)L[$=arguments[ne]]=j(L,H,H[$]);return L};var B=["webkit","ms","moz","Moz","o","O"];function U(){}function q(){}function te(L){var H=[],$=new v;function ne(){for(var ce,xe=H,Le=-1,Re=xe.length;++Le<Re;)(ce=xe[Le].on)&&ce.apply(this,arguments);return L}return ne.on=function(ce,xe){var Le,Re=$.get(ce);return arguments.length<2?Re&&Re.on:(Re&&(Re.on=null,H=H.slice(0,Le=H.indexOf(Re)).concat(H.slice(Le+1)),$.remove(ce)),xe&&H.push($.set(ce,{on:xe})),L)},ne}function ee(){a.event.preventDefault()}function Q(){for(var L,H=a.event;L=H.sourceEvent;)H=L;return H}function J(L){for(var H=new q,$=0,ne=arguments.length;++$<ne;)H[arguments[$]]=te(H);return H.of=function(ce,xe){return function(Le){try{var Re=Le.sourceEvent=a.event;Le.target=L,a.event=Le,H[Le.type].apply(ce,xe)}finally{a.event=Re}}},H}a.dispatch=function(){for(var L=new q,H=-1,$=arguments.length;++H<$;)L[arguments[H]]=te(L);return L},q.prototype.on=function(L,H){var $=L.indexOf("."),ne="";if($>=0&&(ne=L.slice($+1),L=L.slice(0,$)),L)return arguments.length<2?this[L].on(ne):this[L].on(ne,H);if(arguments.length===2){if(H==null)for(L in this)this.hasOwnProperty(L)&&this[L].on(ne,null);return this}},a.event=null,a.requote=function(L){return L.replace(K,"\\$&")};var K=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(L,H){L.__proto__=H}:function(L,H){for(var $ in H)L[$]=H[$]};function ie(L){return X(L,ve),L}var se=function(L,H){return H.querySelector(L)},ae=function(L,H){return H.querySelectorAll(L)},ue=function(L,H){var $=L.matches||L[Y(L,"matchesSelector")];return ue=function(ne,ce){return $.call(ne,ce)},ue(L,H)};typeof Sizzle=="function"&&(se=function(L,H){return Sizzle(L,H)[0]||null},ae=Sizzle,ue=Sizzle.matchesSelector),a.selection=function(){return a.select(f.documentElement)};var ve=a.selection.prototype=[];function ye(L){return typeof L=="function"?L:function(){return se(L,this)}}function pe(L){return typeof L=="function"?L:function(){return ae(L,this)}}ve.select=function(L){var H,$,ne,ce,xe=[];L=ye(L);for(var Le=-1,Re=this.length;++Le<Re;){xe.push(H=[]),H.parentNode=(ne=this[Le]).parentNode;for(var Ue=-1,He=ne.length;++Ue<He;)(ce=ne[Ue])?(H.push($=L.call(ce,ce.__data__,Ue,Le)),$&&"__data__"in ce&&($.__data__=ce.__data__)):H.push(null)}return ie(xe)},ve.selectAll=function(L){var H,$,ne=[];L=pe(L);for(var ce=-1,xe=this.length;++ce<xe;)for(var Le=this[ce],Re=-1,Ue=Le.length;++Re<Ue;)($=Le[Re])&&(ne.push(H=b(L.call($,$.__data__,Re,ce))),H.parentNode=$);return ie(ne)};var de="http://www.w3.org/1999/xhtml",me={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ke(L,H){return L=a.ns.qualify(L),H==null?L.local?function(){this.removeAttributeNS(L.space,L.local)}:function(){this.removeAttribute(L)}:typeof H=="function"?L.local?function(){var $=H.apply(this,arguments);$==null?this.removeAttributeNS(L.space,L.local):this.setAttributeNS(L.space,L.local,$)}:function(){var $=H.apply(this,arguments);$==null?this.removeAttribute(L):this.setAttribute(L,$)}:L.local?function(){this.setAttributeNS(L.space,L.local,H)}:function(){this.setAttribute(L,H)}}function Ce(L){return L.trim().replace(/\s+/g," ")}function ge(L){return new RegExp("(?:^|\\s+)"+a.requote(L)+"(?:\\s+|$)","g")}function oe(L){return(L+"").trim().split(/^|\s+/)}function re(L,H){var $=(L=oe(L).map(fe)).length;return typeof H=="function"?function(){for(var ne=-1,ce=H.apply(this,arguments);++ne<$;)L[ne](this,ce)}:function(){for(var ne=-1;++ne<$;)L[ne](this,H)}}function fe(L){var H=ge(L);return function($,ne){if(ce=$.classList)return ne?ce.add(L):ce.remove(L);var ce=$.getAttribute("class")||"";ne?(H.lastIndex=0,H.test(ce)||$.setAttribute("class",Ce(ce+" "+L))):$.setAttribute("class",Ce(ce.replace(H," ")))}}function Se(L,H,$){return H==null?function(){this.style.removeProperty(L)}:typeof H=="function"?function(){var ne=H.apply(this,arguments);ne==null?this.style.removeProperty(L):this.style.setProperty(L,ne,$)}:function(){this.style.setProperty(L,H,$)}}function be(L,H){return H==null?function(){delete this[L]}:typeof H=="function"?function(){var $=H.apply(this,arguments);$==null?delete this[L]:this[L]=$}:function(){this[L]=H}}function we(L){return typeof L=="function"?L:(L=a.ns.qualify(L)).local?function(){return this.ownerDocument.createElementNS(L.space,L.local)}:function(){var H=this.ownerDocument,$=this.namespaceURI;return $===de&&H.documentElement.namespaceURI===de?H.createElement(L):H.createElementNS($,L)}}function Me(){var L=this.parentNode;L&&L.removeChild(this)}function Pe(L){return{__data__:L}}function De(L){return function(){return ue(this,L)}}function he(L){return arguments.length||(L=c),function(H,$){return H&&$?L(H.__data__,$.__data__):!H-!$}}function _e(L,H){for(var $=0,ne=L.length;$<ne;$++)for(var ce,xe=L[$],Le=0,Re=xe.length;Le<Re;Le++)(ce=xe[Le])&&H(ce,Le,$);return L}function Ae(L){return X(L,Oe),L}a.ns={prefix:me,qualify:function(L){var H=L.indexOf(":"),$=L;return H>=0&&($=L.slice(0,H))!=="xmlns"&&(L=L.slice(H+1)),me.hasOwnProperty($)?{space:me[$],local:L}:L}},ve.attr=function(L,H){if(arguments.length<2){if(typeof L=="string"){var $=this.node();return(L=a.ns.qualify(L)).local?$.getAttributeNS(L.space,L.local):$.getAttribute(L)}for(H in L)this.each(ke(H,L[H]));return this}return this.each(ke(L,H))},ve.classed=function(L,H){if(arguments.length<2){if(typeof L=="string"){var $=this.node(),ne=(L=oe(L)).length,ce=-1;if(H=$.classList){for(;++ce<ne;)if(!H.contains(L[ce]))return!1}else for(H=$.getAttribute("class");++ce<ne;)if(!ge(L[ce]).test(H))return!1;return!0}for(H in L)this.each(re(H,L[H]));return this}return this.each(re(L,H))},ve.style=function(L,H,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(H=""),L)this.each(Se($,L[$],H));return this}if(ne<2){var ce=this.node();return t(ce).getComputedStyle(ce,null).getPropertyValue(L)}$=""}return this.each(Se(L,H,$))},ve.property=function(L,H){if(arguments.length<2){if(typeof L=="string")return this.node()[L];for(H in L)this.each(be(H,L[H]));return this}return this.each(be(L,H))},ve.text=function(L){return arguments.length?this.each(typeof L=="function"?function(){var H=L.apply(this,arguments);this.textContent=H??""}:L==null?function(){this.textContent=""}:function(){this.textContent=L}):this.node().textContent},ve.html=function(L){return arguments.length?this.each(typeof L=="function"?function(){var H=L.apply(this,arguments);this.innerHTML=H??""}:L==null?function(){this.innerHTML=""}:function(){this.innerHTML=L}):this.node().innerHTML},ve.append=function(L){return L=we(L),this.select(function(){return this.appendChild(L.apply(this,arguments))})},ve.insert=function(L,H){return L=we(L),H=ye(H),this.select(function(){return this.insertBefore(L.apply(this,arguments),H.apply(this,arguments)||null)})},ve.remove=function(){return this.each(Me)},ve.data=function(L,H){var $,ne,ce=-1,xe=this.length;if(!arguments.length){for(L=new Array(xe=($=this[0]).length);++ce<xe;)(ne=$[ce])&&(L[ce]=ne.__data__);return L}function Le(tt,ct){var dt,wt,Et,kt=tt.length,Bt=ct.length,It=Math.min(kt,Bt),Kt=new Array(Bt),qt=new Array(Bt),Vt=new Array(kt);if(H){var pn,yn=new v,Sn=new Array(kt);for(dt=-1;++dt<kt;)(wt=tt[dt])&&(yn.has(pn=H.call(wt,wt.__data__,dt))?Vt[dt]=wt:yn.set(pn,wt),Sn[dt]=pn);for(dt=-1;++dt<Bt;)(wt=yn.get(pn=H.call(ct,Et=ct[dt],dt)))?wt!==!0&&(Kt[dt]=wt,wt.__data__=Et):qt[dt]=Pe(Et),yn.set(pn,!0);for(dt=-1;++dt<kt;)dt in Sn&&yn.get(Sn[dt])!==!0&&(Vt[dt]=tt[dt])}else{for(dt=-1;++dt<It;)wt=tt[dt],Et=ct[dt],wt?(wt.__data__=Et,Kt[dt]=wt):qt[dt]=Pe(Et);for(;dt<Bt;++dt)qt[dt]=Pe(ct[dt]);for(;dt<kt;++dt)Vt[dt]=tt[dt]}qt.update=Kt,qt.parentNode=Kt.parentNode=Vt.parentNode=tt.parentNode,Re.push(qt),Ue.push(Kt),He.push(Vt)}var Re=Ae([]),Ue=ie([]),He=ie([]);if(typeof L=="function")for(;++ce<xe;)Le($=this[ce],L.call($,$.parentNode.__data__,ce));else for(;++ce<xe;)Le($=this[ce],L);return Ue.enter=function(){return Re},Ue.exit=function(){return He},Ue},ve.datum=function(L){return arguments.length?this.property("__data__",L):this.property("__data__")},ve.filter=function(L){var H,$,ne,ce=[];typeof L!="function"&&(L=De(L));for(var xe=0,Le=this.length;xe<Le;xe++){ce.push(H=[]),H.parentNode=($=this[xe]).parentNode;for(var Re=0,Ue=$.length;Re<Ue;Re++)(ne=$[Re])&&L.call(ne,ne.__data__,Re,xe)&&H.push(ne)}return ie(ce)},ve.order=function(){for(var L=-1,H=this.length;++L<H;)for(var $,ne=this[L],ce=ne.length-1,xe=ne[ce];--ce>=0;)($=ne[ce])&&(xe&&xe!==$.nextSibling&&xe.parentNode.insertBefore($,xe),xe=$);return this},ve.sort=function(L){L=he.apply(this,arguments);for(var H=-1,$=this.length;++H<$;)this[H].sort(L);return this.order()},ve.each=function(L){return _e(this,function(H,$,ne){L.call(H,H.__data__,$,ne)})},ve.call=function(L){var H=b(arguments);return L.apply(H[0]=this,H),this},ve.empty=function(){return!this.node()},ve.node=function(){for(var L=0,H=this.length;L<H;L++)for(var $=this[L],ne=0,ce=$.length;ne<ce;ne++){var xe=$[ne];if(xe)return xe}return null},ve.size=function(){var L=0;return _e(this,function(){++L}),L};var Oe=[];function Ee(L,H,$){var ne="__on"+L,ce=L.indexOf("."),xe=Ve;ce>0&&(L=L.slice(0,ce));var Le=Be.get(L);function Re(){var Ue=this[ne];Ue&&(this.removeEventListener(L,Ue,Ue.$),delete this[ne])}return Le&&(L=Le,xe=Ze),ce?H?function(){var Ue=xe(H,b(arguments));Re.call(this),this.addEventListener(L,this[ne]=Ue,Ue.$=$),Ue._=H}:Re:H?U:function(){var Ue,He=new RegExp("^__on([^.]+)"+a.requote(L)+"$");for(var tt in this)if(Ue=tt.match(He)){var ct=this[tt];this.removeEventListener(Ue[1],ct,ct.$),delete this[tt]}}}a.selection.enter=Ae,a.selection.enter.prototype=Oe,Oe.append=ve.append,Oe.empty=ve.empty,Oe.node=ve.node,Oe.call=ve.call,Oe.size=ve.size,Oe.select=function(L){for(var H,$,ne,ce,xe,Le=[],Re=-1,Ue=this.length;++Re<Ue;){ne=(ce=this[Re]).update,Le.push(H=[]),H.parentNode=ce.parentNode;for(var He=-1,tt=ce.length;++He<tt;)(xe=ce[He])?(H.push(ne[He]=$=L.call(ce.parentNode,xe.__data__,He,Re)),$.__data__=xe.__data__):H.push(null)}return ie(Le)},Oe.insert=function(L,H){var $,ne,ce;return arguments.length<2&&($=this,H=function(xe,Le,Re){var Ue,He=$[Re].update,tt=He.length;for(Re!=ce&&(ce=Re,ne=0),Le>=ne&&(ne=Le+1);!(Ue=He[ne])&&++ne<tt;);return Ue}),ve.insert.call(this,L,H)},a.select=function(L){var H;return typeof L=="string"?(H=[se(L,f)]).parentNode=f.documentElement:(H=[L]).parentNode=s(L),ie([H])},a.selectAll=function(L){var H;return typeof L=="string"?(H=b(ae(L,f))).parentNode=f.documentElement:(H=b(L)).parentNode=null,ie([H])},ve.on=function(L,H,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(H=!1),L)this.each(Ee($,L[$],H));return this}if(ne<2)return(ne=this.node()["__on"+L])&&ne._;$=!1}return this.each(Ee(L,H,$))};var Be=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(L,H){return function($){var ne=a.event;a.event=$,H[0]=this.__data__;try{L.apply(this,H)}finally{a.event=ne}}}function Ze(L,H){var $=Ve(L,H);return function(ne){var ce=this,xe=ne.relatedTarget;xe&&(xe===ce||8&xe.compareDocumentPosition(ce))||$.call(ce,ne)}}f&&Be.forEach(function(L){"on"+L in f&&Be.remove(L)});var it,at=0;function gt(L){var H=".dragsuppress-"+ ++at,$="click"+H,ne=a.select(t(L)).on("touchmove"+H,ee).on("dragstart"+H,ee).on("selectstart"+H,ee);if(it==null&&(it=!("onselectstart"in L)&&Y(L.style,"userSelect")),it){var ce=s(L).style,xe=ce[it];ce[it]="none"}return function(Le){if(ne.on(H,null),it&&(ce[it]=xe),Le){var Re=function(){ne.on($,null)};ne.on($,function(){ee(),Re()},!0),setTimeout(Re,0)}}}a.mouse=function(L){return pt(L,Q())};var yt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function pt(L,H){H.changedTouches&&(H=H.changedTouches[0]);var $=L.ownerSVGElement||L;if($.createSVGPoint){var ne=$.createSVGPoint();if(yt<0){var ce=t(L);if(ce.scrollX||ce.scrollY){var xe=($=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();yt=!(xe.f||xe.e),$.remove()}}return yt?(ne.x=H.pageX,ne.y=H.pageY):(ne.x=H.clientX,ne.y=H.clientY),[(ne=ne.matrixTransform(L.getScreenCTM().inverse())).x,ne.y]}var Le=L.getBoundingClientRect();return[H.clientX-Le.left-L.clientLeft,H.clientY-Le.top-L.clientTop]}function et(){return a.event.changedTouches[0].identifier}a.touch=function(L,H,$){if(arguments.length<3&&($=H,H=Q().changedTouches),H){for(var ne,ce=0,xe=H.length;ce<xe;++ce)if((ne=H[ce]).identifier===$)return pt(L,ne)}},a.behavior.drag=function(){var L=J(ce,"drag","dragstart","dragend"),H=null,$=xe(U,a.mouse,t,"mousemove","mouseup"),ne=xe(et,a.touch,O,"touchmove","touchend");function ce(){this.on("mousedown.drag",$).on("touchstart.drag",ne)}function xe(Le,Re,Ue,He,tt){return function(){var ct,dt=this,wt=a.event.target.correspondingElement||a.event.target,Et=dt.parentNode,kt=L.of(dt,arguments),Bt=0,It=Le(),Kt=".drag"+(It==null?"":"-"+It),qt=a.select(Ue(wt)).on(He+Kt,function(){var yn,Sn,On=Re(Et,It);On&&(yn=On[0]-pn[0],Sn=On[1]-pn[1],Bt|=yn|Sn,pn=On,kt({type:"drag",x:On[0]+ct[0],y:On[1]+ct[1],dx:yn,dy:Sn}))}).on(tt+Kt,function(){Re(Et,It)&&(qt.on(He+Kt,null).on(tt+Kt,null),Vt(Bt),kt({type:"dragend"}))}),Vt=gt(wt),pn=Re(Et,It);ct=H?[(ct=H.apply(dt,arguments)).x-pn[0],ct.y-pn[1]]:[0,0],kt({type:"dragstart"})}}return ce.origin=function(Le){return arguments.length?(H=Le,ce):H},a.rebind(ce,L,"on")},a.touches=function(L,H){return arguments.length<2&&(H=Q().touches),H?b(H).map(function($){var ne=pt(L,$);return ne.identifier=$.identifier,ne}):[]};var $e=1e-6,At=$e*$e,Ot=Math.PI,Rt=2*Ot,Ct=Rt-$e,Ge=Ot/2,Xe=Ot/180,Ne=180/Ot;function Ye(L){return L>1?Ge:L<-1?-Ge:Math.asin(L)}function ot(L){return((L=Math.exp(L))+1/L)/2}var nt=Math.SQRT2;a.interpolateZoom=function(L,H){var $,ne,ce=L[0],xe=L[1],Le=L[2],Re=H[0],Ue=H[1],He=H[2],tt=Re-ce,ct=Ue-xe,dt=tt*tt+ct*ct;if(dt<At)ne=Math.log(He/Le)/nt,$=function(Kt){return[ce+Kt*tt,xe+Kt*ct,Le*Math.exp(nt*Kt*ne)]};else{var wt=Math.sqrt(dt),Et=(He*He-Le*Le+4*dt)/(2*Le*2*wt),kt=(He*He-Le*Le-4*dt)/(2*He*2*wt),Bt=Math.log(Math.sqrt(Et*Et+1)-Et),It=Math.log(Math.sqrt(kt*kt+1)-kt);ne=(It-Bt)/nt,$=function(Kt){var qt,Vt=Kt*ne,pn=ot(Bt),yn=Le/(2*wt)*(pn*(qt=nt*Vt+Bt,((qt=Math.exp(2*qt))-1)/(qt+1))-function(Sn){return((Sn=Math.exp(Sn))-1/Sn)/2}(Bt));return[ce+yn*tt,xe+yn*ct,Le*pn/ot(nt*Vt+Bt)]}}return $.duration=1e3*ne,$},a.behavior.zoom=function(){var L,H,$,ne,ce,xe,Le,Re,Ue,He={x:0,y:0,k:1},tt=[960,500],ct=rt,dt=250,wt=0,Et="mousedown.zoom",kt="mousemove.zoom",Bt="mouseup.zoom",It="touchstart.zoom",Kt=J(qt,"zoomstart","zoom","zoomend");function qt(ir){ir.on(Et,Zn).on(Fe+".zoom",Ar).on("dblclick.zoom",Or).on(It,fr)}function Vt(ir){return[(ir[0]-He.x)/He.k,(ir[1]-He.y)/He.k]}function pn(ir){He.k=Math.max(ct[0],Math.min(ct[1],ir))}function yn(ir,ur){ur=function(Cr){return[Cr[0]*He.k+He.x,Cr[1]*He.k+He.y]}(ur),He.x+=ir[0]-ur[0],He.y+=ir[1]-ur[1]}function Sn(ir,ur,Cr,pr){ir.__chart__={x:He.x,y:He.y,k:He.k},pn(Math.pow(2,pr)),yn(H=ur,Cr),ir=a.select(ir),dt>0&&(ir=ir.transition().duration(dt)),ir.call(qt.event)}function On(){Le&&Le.domain(xe.range().map(function(ir){return(ir-He.x)/He.k}).map(xe.invert)),Ue&&Ue.domain(Re.range().map(function(ir){return(ir-He.y)/He.k}).map(Re.invert))}function Hn(ir){wt++||ir({type:"zoomstart"})}function sr(ir){On(),ir({type:"zoom",scale:He.k,translate:[He.x,He.y]})}function dr(ir){--wt||(ir({type:"zoomend"}),H=null)}function Zn(){var ir=this,ur=Kt.of(ir,arguments),Cr=0,pr=a.select(t(ir)).on(kt,function(){Cr=1,yn(a.mouse(ir),Ir),sr(ur)}).on(Bt,function(){pr.on(kt,null).on(Bt,null),Fr(Cr),dr(ur)}),Ir=Vt(a.mouse(ir)),Fr=gt(ir);no.call(ir),Hn(ur)}function fr(){var ir,ur=this,Cr=Kt.of(ur,arguments),pr={},Ir=0,Fr=".zoom-"+a.event.changedTouches[0].identifier,Zr="touchmove"+Fr,Kr="touchend"+Fr,ti=[],oi=a.select(ur),Ei=gt(ur);function Xi(){var Di=a.touches(ur);return ir=He.k,Di.forEach(function(li){li.identifier in pr&&(pr[li.identifier]=Vt(li))}),Di}function Oa(){var Di=a.event.target;a.select(Di).on(Zr,ma).on(Kr,Sa),ti.push(Di);for(var li=a.event.changedTouches,Ui=0,wi=li.length;Ui<wi;++Ui)pr[li[Ui].identifier]=null;var di=Xi(),Vi=Date.now();if(di.length===1){if(Vi-ce<500){var Zi=di[0];Sn(ur,Zi,pr[Zi.identifier],Math.floor(Math.log(He.k)/Math.LN2)+1),ee()}ce=Vi}else if(di.length>1){Zi=di[0];var sa=di[1],sl=Zi[0]-sa[0],ll=Zi[1]-sa[1];Ir=sl*sl+ll*ll}}function ma(){var Di,li,Ui,wi,di=a.touches(ur);no.call(ur);for(var Vi=0,Zi=di.length;Vi<Zi;++Vi,wi=null)if(Ui=di[Vi],wi=pr[Ui.identifier]){if(li)break;Di=Ui,li=wi}if(wi){var sa=(sa=Ui[0]-Di[0])*sa+(sa=Ui[1]-Di[1])*sa,sl=Ir&&Math.sqrt(sa/Ir);Di=[(Di[0]+Ui[0])/2,(Di[1]+Ui[1])/2],li=[(li[0]+wi[0])/2,(li[1]+wi[1])/2],pn(sl*ir)}ce=null,yn(Di,li),sr(Cr)}function Sa(){if(a.event.touches.length){for(var Di=a.event.changedTouches,li=0,Ui=Di.length;li<Ui;++li)delete pr[Di[li].identifier];for(var wi in pr)return void Xi()}a.selectAll(ti).on(Fr,null),oi.on(Et,Zn).on(It,fr),Ei(),dr(Cr)}Oa(),Hn(Cr),oi.on(Et,null).on(It,Oa)}function Ar(){var ir=Kt.of(this,arguments);ne?clearTimeout(ne):(no.call(this),L=Vt(H=$||a.mouse(this)),Hn(ir)),ne=setTimeout(function(){ne=null,dr(ir)},50),ee(),pn(Math.pow(2,.002*ze())*He.k),yn(H,L),sr(ir)}function Or(){var ir=a.mouse(this),ur=Math.log(He.k)/Math.LN2;Sn(this,ir,Vt(ir),a.event.shiftKey?Math.ceil(ur)-1:Math.floor(ur)+1)}return Fe||(Fe="onwheel"in f?(ze=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in f?(ze=function(){return a.event.wheelDelta},"mousewheel"):(ze=function(){return-a.event.detail},"MozMousePixelScroll")),qt.event=function(ir){ir.each(function(){var ur=Kt.of(this,arguments),Cr=He;$i?a.select(this).transition().each("start.zoom",function(){He=this.__chart__||{x:0,y:0,k:1},Hn(ur)}).tween("zoom:zoom",function(){var pr=tt[0],Ir=tt[1],Fr=H?H[0]:pr/2,Zr=H?H[1]:Ir/2,Kr=a.interpolateZoom([(Fr-He.x)/He.k,(Zr-He.y)/He.k,pr/He.k],[(Fr-Cr.x)/Cr.k,(Zr-Cr.y)/Cr.k,pr/Cr.k]);return function(ti){var oi=Kr(ti),Ei=pr/oi[2];this.__chart__=He={x:Fr-oi[0]*Ei,y:Zr-oi[1]*Ei,k:Ei},sr(ur)}}).each("interrupt.zoom",function(){dr(ur)}).each("end.zoom",function(){dr(ur)}):(this.__chart__=He,Hn(ur),sr(ur),dr(ur))})},qt.translate=function(ir){return arguments.length?(He={x:+ir[0],y:+ir[1],k:He.k},On(),qt):[He.x,He.y]},qt.scale=function(ir){return arguments.length?(He={x:He.x,y:He.y,k:null},pn(+ir),On(),qt):He.k},qt.scaleExtent=function(ir){return arguments.length?(ct=ir==null?rt:[+ir[0],+ir[1]],qt):ct},qt.center=function(ir){return arguments.length?($=ir&&[+ir[0],+ir[1]],qt):$},qt.size=function(ir){return arguments.length?(tt=ir&&[+ir[0],+ir[1]],qt):tt},qt.duration=function(ir){return arguments.length?(dt=+ir,qt):dt},qt.x=function(ir){return arguments.length?(Le=ir,xe=ir.copy(),He={x:0,y:0,k:1},qt):Le},qt.y=function(ir){return arguments.length?(Ue=ir,Re=ir.copy(),He={x:0,y:0,k:1},qt):Ue},a.rebind(qt,Kt,"on")};var ze,Fe,rt=[0,1/0];function We(){}function ft(L,H,$){return this instanceof ft?(this.h=+L,this.s=+H,void(this.l=+$)):arguments.length<2?L instanceof ft?new ft(L.h,L.s,L.l):hn(""+L,bn,ft):new ft(L,H,$)}a.color=We,We.prototype.toString=function(){return this.rgb()+""},a.hsl=ft;var mt=ft.prototype=new We;function vt(L,H,$){var ne,ce;function xe(Le){return Math.round(255*function(Re){return Re>360?Re-=360:Re<0&&(Re+=360),Re<60?ne+(ce-ne)*Re/60:Re<180?ce:Re<240?ne+(ce-ne)*(240-Re)/60:ne}(Le))}return L=isNaN(L)?0:(L%=360)<0?L+360:L,H=isNaN(H)||H<0?0:H>1?1:H,ne=2*($=$<0?0:$>1?1:$)-(ce=$<=.5?$*(1+H):$+H-$*H),new Tn(xe(L+120),xe(L),xe(L-120))}function ut(L,H,$){return this instanceof ut?(this.h=+L,this.c=+H,void(this.l=+$)):arguments.length<2?L instanceof ut?new ut(L.h,L.c,L.l):function(ne,ce,xe){return ne>0?new ut(Math.atan2(xe,ce)*Ne,Math.sqrt(ce*ce+xe*xe),ne):new ut(NaN,NaN,ne)}(L instanceof St?L.l:(L=wn((L=a.rgb(L)).r,L.g,L.b)).l,L.a,L.b):new ut(L,H,$)}mt.brighter=function(L){return L=Math.pow(.7,arguments.length?L:1),new ft(this.h,this.s,this.l/L)},mt.darker=function(L){return L=Math.pow(.7,arguments.length?L:1),new ft(this.h,this.s,L*this.l)},mt.rgb=function(){return vt(this.h,this.s,this.l)},a.hcl=ut;var Mt=ut.prototype=new We;function bt(L,H,$){return isNaN(L)&&(L=0),isNaN(H)&&(H=0),new St($,Math.cos(L*=Xe)*H,Math.sin(L)*H)}function St(L,H,$){return this instanceof St?(this.l=+L,this.a=+H,void(this.b=+$)):arguments.length<2?L instanceof St?new St(L.l,L.a,L.b):L instanceof ut?bt(L.h,L.c,L.l):wn((L=Tn(L)).r,L.g,L.b):new St(L,H,$)}Mt.brighter=function(L){return new ut(this.h,this.c,Math.min(100,this.l+Pt*(arguments.length?L:1)))},Mt.darker=function(L){return new ut(this.h,this.c,Math.max(0,this.l-Pt*(arguments.length?L:1)))},Mt.rgb=function(){return bt(this.h,this.c,this.l).rgb()},a.lab=St;var Pt=18,Dt=.95047,Ft=1,Xt=1.08883,an=St.prototype=new We;function Ht(L,H,$){var ne=(L+16)/116,ce=ne+H/500,xe=ne-$/200;return new Tn(Pn(3.2404542*(ce=Zt(ce)*Dt)-1.5371385*(ne=Zt(ne)*Ft)-.4985314*(xe=Zt(xe)*Xt)),Pn(-.969266*ce+1.8760108*ne+.041556*xe),Pn(.0556434*ce-.2040259*ne+1.0572252*xe))}function Zt(L){return L>.206893034?L*L*L:(L-.13793103448275862)/7.787037}function jt(L){return L>.008856?Math.pow(L,.3333333333333333):7.787037*L+.13793103448275862}function Pn(L){return Math.round(255*(L<=.00304?12.92*L:1.055*Math.pow(L,.4166666666666667)-.055))}function Tn(L,H,$){return this instanceof Tn?(this.r=~~L,this.g=~~H,void(this.b=~~$)):arguments.length<2?L instanceof Tn?new Tn(L.r,L.g,L.b):hn(""+L,Tn,vt):new Tn(L,H,$)}function mn(L){return new Tn(L>>16,L>>8&255,255&L)}function Qt(L){return mn(L)+""}an.brighter=function(L){return new St(Math.min(100,this.l+Pt*(arguments.length?L:1)),this.a,this.b)},an.darker=function(L){return new St(Math.max(0,this.l-Pt*(arguments.length?L:1)),this.a,this.b)},an.rgb=function(){return Ht(this.l,this.a,this.b)},a.rgb=Tn;var un=Tn.prototype=new We;function nn(L){return L<16?"0"+Math.max(0,L).toString(16):Math.min(255,L).toString(16)}function hn(L,H,$){var ne,ce,xe,Le=0,Re=0,Ue=0;if(ne=/([a-z]+)\((.*)\)/.exec(L=L.toLowerCase()))switch(ce=ne[2].split(","),ne[1]){case"hsl":return $(parseFloat(ce[0]),parseFloat(ce[1])/100,parseFloat(ce[2])/100);case"rgb":return H(Ln(ce[0]),Ln(ce[1]),Ln(ce[2]))}return(xe=Mn.get(L))?H(xe.r,xe.g,xe.b):(L==null||L.charAt(0)!=="#"||isNaN(xe=parseInt(L.slice(1),16))||(L.length===4?(Le=(3840&xe)>>4,Le|=Le>>4,Re=240&xe,Re|=Re>>4,Ue=15&xe,Ue|=Ue<<4):L.length===7&&(Le=(16711680&xe)>>16,Re=(65280&xe)>>8,Ue=255&xe)),H(Le,Re,Ue))}function bn(L,H,$){var ne,ce,xe=Math.min(L/=255,H/=255,$/=255),Le=Math.max(L,H,$),Re=Le-xe,Ue=(Le+xe)/2;return Re?(ce=Ue<.5?Re/(Le+xe):Re/(2-Le-xe),ne=L==Le?(H-$)/Re+(H<$?6:0):H==Le?($-L)/Re+2:(L-H)/Re+4,ne*=60):(ne=NaN,ce=Ue>0&&Ue<1?0:ne),new ft(ne,ce,Ue)}function wn(L,H,$){var ne=jt((.4124564*(L=Cn(L))+.3575761*(H=Cn(H))+.1804375*($=Cn($)))/Dt),ce=jt((.2126729*L+.7151522*H+.072175*$)/Ft);return St(116*ce-16,500*(ne-ce),200*(ce-jt((.0193339*L+.119192*H+.9503041*$)/Xt)))}function Cn(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function Ln(L){var H=parseFloat(L);return L.charAt(L.length-1)==="%"?Math.round(2.55*H):H}un.brighter=function(L){L=Math.pow(.7,arguments.length?L:1);var H=this.r,$=this.g,ne=this.b,ce=30;return H||$||ne?(H&&H<ce&&(H=ce),$&&$<ce&&($=ce),ne&&ne<ce&&(ne=ce),new Tn(Math.min(255,H/L),Math.min(255,$/L),Math.min(255,ne/L))):new Tn(ce,ce,ce)},un.darker=function(L){return new Tn((L=Math.pow(.7,arguments.length?L:1))*this.r,L*this.g,L*this.b)},un.hsl=function(){return bn(this.r,this.g,this.b)},un.toString=function(){return"#"+nn(this.r)+nn(this.g)+nn(this.b)};var Mn=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function jn(L){return typeof L=="function"?L:function(){return L}}function Rn(L){return function(H,$,ne){return arguments.length===2&&typeof $=="function"&&(ne=$,$=null),Qn(H,$,L,ne)}}function Qn(L,H,$,ne){var ce={},xe=a.dispatch("beforesend","progress","load","error"),Le={},Re=new XMLHttpRequest,Ue=null;function He(){var tt,ct=Re.status;if(!ct&&function(dt){var wt=dt.responseType;return wt&&wt!=="text"?dt.response:dt.responseText}(Re)||ct>=200&&ct<300||ct===304){try{tt=$.call(ce,Re)}catch(dt){return void xe.error.call(ce,dt)}xe.load.call(ce,tt)}else xe.error.call(ce,Re)}return self.XDomainRequest&&!("withCredentials"in Re)&&/^(http(s)?:)?\/\//.test(L)&&(Re=new XDomainRequest),"onload"in Re?Re.onload=Re.onerror=He:Re.onreadystatechange=function(){Re.readyState>3&&He()},Re.onprogress=function(tt){var ct=a.event;a.event=tt;try{xe.progress.call(ce,Re)}finally{a.event=ct}},ce.header=function(tt,ct){return tt=(tt+"").toLowerCase(),arguments.length<2?Le[tt]:(ct==null?delete Le[tt]:Le[tt]=ct+"",ce)},ce.mimeType=function(tt){return arguments.length?(H=tt==null?null:tt+"",ce):H},ce.responseType=function(tt){return arguments.length?(Ue=tt,ce):Ue},ce.response=function(tt){return $=tt,ce},["get","post"].forEach(function(tt){ce[tt]=function(){return ce.send.apply(ce,[tt].concat(b(arguments)))}}),ce.send=function(tt,ct,dt){if(arguments.length===2&&typeof ct=="function"&&(dt=ct,ct=null),Re.open(tt,L,!0),H==null||"accept"in Le||(Le.accept=H+",*/*"),Re.setRequestHeader)for(var wt in Le)Re.setRequestHeader(wt,Le[wt]);return H!=null&&Re.overrideMimeType&&Re.overrideMimeType(H),Ue!=null&&(Re.responseType=Ue),dt!=null&&ce.on("error",dt).on("load",function(Et){dt(null,Et)}),xe.beforesend.call(ce,Re),Re.send(ct??null),ce},ce.abort=function(){return Re.abort(),ce},a.rebind(ce,xe,"on"),ne==null?ce:ce.get(function(tt){return tt.length===1?function(ct,dt){tt(ct==null?dt:null)}:tt}(ne))}Mn.forEach(function(L,H){Mn.set(L,mn(H))}),a.functor=jn,a.xhr=Rn(O),a.dsv=function(L,H){var $=new RegExp('["'+L+`
]`),ne=L.charCodeAt(0);function ce(He,tt,ct){arguments.length<3&&(ct=tt,tt=null);var dt=Qn(He,H,tt==null?xe:Le(tt),ct);return dt.row=function(wt){return arguments.length?dt.response((tt=wt)==null?xe:Le(wt)):tt},dt}function xe(He){return ce.parse(He.responseText)}function Le(He){return function(tt){return ce.parse(tt.responseText,He)}}function Re(He){return He.map(Ue).join(L)}function Ue(He){return $.test(He)?'"'+He.replace(/\"/g,'""')+'"':He}return ce.parse=function(He,tt){var ct;return ce.parseRows(He,function(dt,wt){if(ct)return ct(dt,wt-1);var Et=function(kt){for(var Bt={},It=dt.length,Kt=0;Kt<It;++Kt)Bt[dt[Kt]]=kt[Kt];return Bt};ct=tt?function(kt,Bt){return tt(Et(kt),Bt)}:Et})},ce.parseRows=function(He,tt){var ct,dt,wt={},Et={},kt=[],Bt=He.length,It=0,Kt=0;function qt(){if(It>=Bt)return Et;if(dt)return dt=!1,wt;var pn=It;if(He.charCodeAt(pn)===34){for(var yn=pn;yn++<Bt;)if(He.charCodeAt(yn)===34){if(He.charCodeAt(yn+1)!==34)break;++yn}return It=yn+2,(Sn=He.charCodeAt(yn+1))===13?(dt=!0,He.charCodeAt(yn+2)===10&&++It):Sn===10&&(dt=!0),He.slice(pn+1,yn).replace(/""/g,'"')}for(;It<Bt;){var Sn,On=1;if((Sn=He.charCodeAt(It++))===10)dt=!0;else if(Sn===13)dt=!0,He.charCodeAt(It)===10&&(++It,++On);else if(Sn!==ne)continue;return He.slice(pn,It-On)}return He.slice(pn)}for(;(ct=qt())!==Et;){for(var Vt=[];ct!==wt&&ct!==Et;)Vt.push(ct),ct=qt();tt&&(Vt=tt(Vt,Kt++))==null||kt.push(Vt)}return kt},ce.format=function(He){if(Array.isArray(He[0]))return ce.formatRows(He);var tt=new V,ct=[];return He.forEach(function(dt){for(var wt in dt)tt.has(wt)||ct.push(tt.add(wt))}),[ct.map(Ue).join(L)].concat(He.map(function(dt){return ct.map(function(wt){return Ue(dt[wt])}).join(L)})).join(`
`)},ce.formatRows=function(He){return He.map(Re).join(`
`)},ce},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("	","text/tab-separated-values");var Yn,ar,Kn,mr,en=this[Y(this,"requestAnimationFrame")]||function(L){setTimeout(L,17)};function rn(L,H,$){var ne=arguments.length;ne<2&&(H=0),ne<3&&($=Date.now());var ce={c:L,t:$+H,n:null};return ar?ar.n=ce:Yn=ce,ar=ce,Kn||(mr=clearTimeout(mr),Kn=1,en(En)),ce}function En(){var L=gn(),H=Dn()-L;H>24?(isFinite(H)&&(clearTimeout(mr),mr=setTimeout(En,H)),Kn=0):(Kn=1,en(En))}function gn(){for(var L=Date.now(),H=Yn;H;)L>=H.t&&H.c(L-H.t)&&(H.c=null),H=H.n;return L}function Dn(){for(var L,H=Yn,$=1/0;H;)H.c?(H.t<$&&($=H.t),H=(L=H).n):H=L?L.n=H.n:Yn=H.n;return ar=L,$}function qn(L){return L[0]}function Vn(L){return L[1]}function Jn(L){for(var H,$,ne,ce=L.length,xe=[0,1],Le=2,Re=2;Re<ce;Re++){for(;Le>1&&(H=L[xe[Le-2]],$=L[xe[Le-1]],ne=L[Re],($[0]-H[0])*(ne[1]-H[1])-($[1]-H[1])*(ne[0]-H[0])<=0);)--Le;xe[Le++]=Re}return xe.slice(0,Le)}function xr(L,H){return L[0]-H[0]||L[1]-H[1]}a.timer=function(){rn.apply(this,arguments)},a.timer.flush=function(){gn(),Dn()},a.round=function(L,H){return H?Math.round(L*(H=Math.pow(10,H)))/H:Math.round(L)},a.geom={},a.geom.hull=function(L){var H=qn,$=Vn;if(arguments.length)return ne(L);function ne(ce){if(ce.length<3)return[];var xe,Le=jn(H),Re=jn($),Ue=ce.length,He=[],tt=[];for(xe=0;xe<Ue;xe++)He.push([+Le.call(this,ce[xe],xe),+Re.call(this,ce[xe],xe),xe]);for(He.sort(xr),xe=0;xe<Ue;xe++)tt.push([He[xe][0],-He[xe][1]]);var ct=Jn(He),dt=Jn(tt),wt=dt[0]===ct[0],Et=dt[dt.length-1]===ct[ct.length-1],kt=[];for(xe=ct.length-1;xe>=0;--xe)kt.push(ce[He[ct[xe]][2]]);for(xe=+wt;xe<dt.length-Et;++xe)kt.push(ce[He[dt[xe]][2]]);return kt}return ne.x=function(ce){return arguments.length?(H=ce,ne):H},ne.y=function(ce){return arguments.length?($=ce,ne):$},ne},a.geom.polygon=function(L){return X(L,Jt),L};var Jt=a.geom.polygon.prototype=[];function vn(L,H,$){return($[0]-H[0])*(L[1]-H[1])<($[1]-H[1])*(L[0]-H[0])}function Lt(L,H,$,ne){var ce=L[0],xe=$[0],Le=H[0]-ce,Re=ne[0]-xe,Ue=L[1],He=$[1],tt=H[1]-Ue,ct=ne[1]-He,dt=(Re*(Ue-He)-ct*(ce-xe))/(ct*Le-Re*tt);return[ce+dt*Le,Ue+dt*tt]}function Nt(L){var H=L[0],$=L[L.length-1];return!(H[0]-$[0]||H[1]-$[1])}Jt.area=function(){for(var L,H=-1,$=this.length,ne=this[$-1],ce=0;++H<$;)L=ne,ne=this[H],ce+=L[1]*ne[0]-L[0]*ne[1];return .5*ce},Jt.centroid=function(L){var H,$,ne=-1,ce=this.length,xe=0,Le=0,Re=this[ce-1];for(arguments.length||(L=-1/(6*this.area()));++ne<ce;)H=Re,Re=this[ne],$=H[0]*Re[1]-Re[0]*H[1],xe+=(H[0]+Re[0])*$,Le+=(H[1]+Re[1])*$;return[xe*L,Le*L]},Jt.clip=function(L){for(var H,$,ne,ce,xe,Le,Re=Nt(L),Ue=-1,He=this.length-Nt(this),tt=this[He-1];++Ue<He;){for(H=L.slice(),L.length=0,ce=this[Ue],xe=H[(ne=H.length-Re)-1],$=-1;++$<ne;)vn(Le=H[$],tt,ce)?(vn(xe,tt,ce)||L.push(Lt(xe,Le,tt,ce)),L.push(Le)):vn(xe,tt,ce)&&L.push(Lt(xe,Le,tt,ce)),xe=Le;Re&&L.push(L[0]),tt=ce}return L};var $t,fn,dn,xn,sn,Yt=[],Wt=[];function tn(){Ai(this),this.edge=this.site=this.circle=null}function ln(L){var H=Yt.pop()||new tn;return H.site=L,H}function An(L){gr(L),dn.remove(L),Yt.push(L),Ai(L)}function In(L){var H=L.circle,$=H.x,ne=H.cy,ce={x:$,y:ne},xe=L.P,Le=L.N,Re=[L];An(L);for(var Ue=xe;Ue.circle&&m($-Ue.circle.x)<$e&&m(ne-Ue.circle.cy)<$e;)xe=Ue.P,Re.unshift(Ue),An(Ue),Ue=xe;Re.unshift(Ue),gr(Ue);for(var He=Le;He.circle&&m($-He.circle.x)<$e&&m(ne-He.circle.cy)<$e;)Le=He.N,Re.push(He),An(He),He=Le;Re.push(He),gr(He);var tt,ct=Re.length;for(tt=1;tt<ct;++tt)He=Re[tt],Ue=Re[tt-1],wr(He.edge,Ue.site,He.site,ce);Ue=Re[0],(He=Re[ct-1]).edge=cr(Ue.site,He.site,null,ce),tr(Ue),tr(He)}function zn(L){for(var H,$,ne,ce,xe=L.x,Le=L.y,Re=dn._;Re;)if((ne=Un(Re,Le)-xe)>$e)Re=Re.L;else{if(!((ce=xe-rr(Re,Le))>$e)){ne>-$e?(H=Re.P,$=Re):ce>-$e?(H=Re,$=Re.N):H=$=Re;break}if(!Re.R){H=Re;break}Re=Re.R}var Ue=ln(L);if(dn.insert(H,Ue),H||$){if(H===$)return gr(H),$=ln(H.site),dn.insert(Ue,$),Ue.edge=$.edge=cr(H.site,Ue.site),tr(H),void tr($);if($){gr(H),gr($);var He=H.site,tt=He.x,ct=He.y,dt=L.x-tt,wt=L.y-ct,Et=$.site,kt=Et.x-tt,Bt=Et.y-ct,It=2*(dt*Bt-wt*kt),Kt=dt*dt+wt*wt,qt=kt*kt+Bt*Bt,Vt={x:(Bt*Kt-wt*qt)/It+tt,y:(dt*qt-kt*Kt)/It+ct};wr($.edge,He,Et,Vt),Ue.edge=cr(He,L,null,Vt),$.edge=cr(L,Et,null,Vt),tr(H),tr($)}else Ue.edge=cr(H.site,Ue.site)}}function Un(L,H){var $=L.site,ne=$.x,ce=$.y,xe=ce-H;if(!xe)return ne;var Le=L.P;if(!Le)return-1/0;var Re=($=Le.site).x,Ue=$.y,He=Ue-H;if(!He)return Re;var tt=Re-ne,ct=1/xe-1/He,dt=tt/He;return ct?(-dt+Math.sqrt(dt*dt-2*ct*(tt*tt/(-2*He)-Ue+He/2+ce-xe/2)))/ct+ne:(ne+Re)/2}function rr(L,H){var $=L.N;if($)return Un($,H);var ne=L.site;return ne.y===H?ne.x:1/0}function Xn(L){this.site=L,this.edges=[]}function er(L,H){return H.angle-L.angle}function or(){Ai(this),this.x=this.y=this.arc=this.site=this.cy=null}function tr(L){var H=L.P,$=L.N;if(H&&$){var ne=H.site,ce=L.site,xe=$.site;if(ne!==xe){var Le=ce.x,Re=ce.y,Ue=ne.x-Le,He=ne.y-Re,tt=xe.x-Le,ct=2*(Ue*(Bt=xe.y-Re)-He*tt);if(!(ct>=-At)){var dt=Ue*Ue+He*He,wt=tt*tt+Bt*Bt,Et=(Bt*dt-He*wt)/ct,kt=(Ue*wt-tt*dt)/ct,Bt=kt+Re,It=Wt.pop()||new or;It.arc=L,It.site=ce,It.x=Et+Le,It.y=Bt+Math.sqrt(Et*Et+kt*kt),It.cy=Bt,L.circle=It;for(var Kt=null,qt=sn._;qt;)if(It.y<qt.y||It.y===qt.y&&It.x<=qt.x){if(!qt.L){Kt=qt.P;break}qt=qt.L}else{if(!qt.R){Kt=qt;break}qt=qt.R}sn.insert(Kt,It),Kt||(xn=It)}}}}function gr(L){var H=L.circle;H&&(H.P||(xn=H.N),sn.remove(H),Wt.push(H),Ai(H),L.circle=null)}function Mr(L,H){var $=L.b;if($)return!0;var ne,ce,xe=L.a,Le=H[0][0],Re=H[1][0],Ue=H[0][1],He=H[1][1],tt=L.l,ct=L.r,dt=tt.x,wt=tt.y,Et=ct.x,kt=ct.y,Bt=(dt+Et)/2,It=(wt+kt)/2;if(kt===wt){if(Bt<Le||Bt>=Re)return;if(dt>Et){if(xe){if(xe.y>=He)return}else xe={x:Bt,y:Ue};$={x:Bt,y:He}}else{if(xe){if(xe.y<Ue)return}else xe={x:Bt,y:He};$={x:Bt,y:Ue}}}else if(ce=It-(ne=(dt-Et)/(kt-wt))*Bt,ne<-1||ne>1)if(dt>Et){if(xe){if(xe.y>=He)return}else xe={x:(Ue-ce)/ne,y:Ue};$={x:(He-ce)/ne,y:He}}else{if(xe){if(xe.y<Ue)return}else xe={x:(He-ce)/ne,y:He};$={x:(Ue-ce)/ne,y:Ue}}else if(wt<kt){if(xe){if(xe.x>=Re)return}else xe={x:Le,y:ne*Le+ce};$={x:Re,y:ne*Re+ce}}else{if(xe){if(xe.x<Le)return}else xe={x:Re,y:ne*Re+ce};$={x:Le,y:ne*Le+ce}}return L.a=xe,L.b=$,!0}function br(L,H){this.l=L,this.r=H,this.a=this.b=null}function cr(L,H,$,ne){var ce=new br(L,H);return $t.push(ce),$&&wr(ce,L,H,$),ne&&wr(ce,H,L,ne),fn[L.i].edges.push(new Pr(ce,L,H)),fn[H.i].edges.push(new Pr(ce,H,L)),ce}function wr(L,H,$,ne){L.a||L.b?L.l===$?L.b=ne:L.a=ne:(L.a=ne,L.l=H,L.r=$)}function Pr(L,H,$){var ne=L.a,ce=L.b;this.edge=L,this.site=H,this.angle=$?Math.atan2($.y-H.y,$.x-H.x):L.l===H?Math.atan2(ce.x-ne.x,ne.y-ce.y):Math.atan2(ne.x-ce.x,ce.y-ne.y)}function Hr(){this._=null}function Ai(L){L.U=L.C=L.L=L.R=L.P=L.N=null}function Mi(L,H){var $=H,ne=H.R,ce=$.U;ce?ce.L===$?ce.L=ne:ce.R=ne:L._=ne,ne.U=ce,$.U=ne,$.R=ne.L,$.R&&($.R.U=$),ne.L=$}function ia(L,H){var $=H,ne=H.L,ce=$.U;ce?ce.L===$?ce.L=ne:ce.R=ne:L._=ne,ne.U=ce,$.U=ne,$.L=ne.R,$.L&&($.L.U=$),ne.R=$}function Ti(L){for(;L.L;)L=L.L;return L}function ji(L,H){var $,ne,ce,xe=L.sort(Ba).pop();for($t=[],fn=new Array(L.length),dn=new Hr,sn=new Hr;;)if(ce=xn,xe&&(!ce||xe.y<ce.y||xe.y===ce.y&&xe.x<ce.x))xe.x===$&&xe.y===ne||(fn[xe.i]=new Xn(xe),zn(xe),$=xe.x,ne=xe.y),xe=L.pop();else{if(!ce)break;In(ce.arc)}H&&(function(Re){for(var Ue,He,tt,ct,dt,wt=$t,Et=(He=Re[0][0],tt=Re[0][1],ct=Re[1][0],dt=Re[1][1],function(Bt){var It,Kt=Bt.a,qt=Bt.b,Vt=Kt.x,pn=Kt.y,yn=0,Sn=1,On=qt.x-Vt,Hn=qt.y-pn;if(It=He-Vt,On||!(It>0)){if(It/=On,On<0){if(It<yn)return;It<Sn&&(Sn=It)}else if(On>0){if(It>Sn)return;It>yn&&(yn=It)}if(It=ct-Vt,On||!(It<0)){if(It/=On,On<0){if(It>Sn)return;It>yn&&(yn=It)}else if(On>0){if(It<yn)return;It<Sn&&(Sn=It)}if(It=tt-pn,Hn||!(It>0)){if(It/=Hn,Hn<0){if(It<yn)return;It<Sn&&(Sn=It)}else if(Hn>0){if(It>Sn)return;It>yn&&(yn=It)}if(It=dt-pn,Hn||!(It<0)){if(It/=Hn,Hn<0){if(It>Sn)return;It>yn&&(yn=It)}else if(Hn>0){if(It<yn)return;It<Sn&&(Sn=It)}return yn>0&&(Bt.a={x:Vt+yn*On,y:pn+yn*Hn}),Sn<1&&(Bt.b={x:Vt+Sn*On,y:pn+Sn*Hn}),Bt}}}}}),kt=wt.length;kt--;)(!Mr(Ue=wt[kt],Re)||!Et(Ue)||m(Ue.a.x-Ue.b.x)<$e&&m(Ue.a.y-Ue.b.y)<$e)&&(Ue.a=Ue.b=null,wt.splice(kt,1))}(H),function(Re){for(var Ue,He,tt,ct,dt,wt,Et,kt,Bt,It,Kt=Re[0][0],qt=Re[1][0],Vt=Re[0][1],pn=Re[1][1],yn=fn,Sn=yn.length;Sn--;)if((dt=yn[Sn])&&dt.prepare())for(kt=(Et=dt.edges).length,wt=0;wt<kt;)tt=(It=Et[wt].end()).x,ct=It.y,Ue=(Bt=Et[++wt%kt].start()).x,He=Bt.y,(m(tt-Ue)>$e||m(ct-He)>$e)&&(Et.splice(wt,0,new Pr((On=dt.site,Hn=It,sr=m(tt-Kt)<$e&&pn-ct>$e?{x:Kt,y:m(Ue-Kt)<$e?He:pn}:m(ct-pn)<$e&&qt-tt>$e?{x:m(He-pn)<$e?Ue:qt,y:pn}:m(tt-qt)<$e&&ct-Vt>$e?{x:qt,y:m(Ue-qt)<$e?He:Vt}:m(ct-Vt)<$e&&tt-Kt>$e?{x:m(He-Vt)<$e?Ue:Kt,y:Vt}:null,dr=void 0,(dr=new br(On,null)).a=Hn,dr.b=sr,$t.push(dr),dr),dt.site,null)),++kt);var On,Hn,sr,dr}(H));var Le={cells:fn,edges:$t};return dn=sn=$t=fn=null,Le}function Ba(L,H){return H.y-L.y||H.x-L.x}Xn.prototype.prepare=function(){for(var L,H=this.edges,$=H.length;$--;)(L=H[$].edge).b&&L.a||H.splice($,1);return H.sort(er),H.length},Pr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Hr.prototype={insert:function(L,H){var $,ne,ce;if(L){if(H.P=L,H.N=L.N,L.N&&(L.N.P=H),L.N=H,L.R){for(L=L.R;L.L;)L=L.L;L.L=H}else L.R=H;$=L}else this._?(L=Ti(this._),H.P=null,H.N=L,L.P=L.L=H,$=L):(H.P=H.N=null,this._=H,$=null);for(H.L=H.R=null,H.U=$,H.C=!0,L=H;$&&$.C;)$===(ne=$.U).L?(ce=ne.R)&&ce.C?($.C=ce.C=!1,ne.C=!0,L=ne):(L===$.R&&(Mi(this,$),$=(L=$).U),$.C=!1,ne.C=!0,ia(this,ne)):(ce=ne.L)&&ce.C?($.C=ce.C=!1,ne.C=!0,L=ne):(L===$.L&&(ia(this,$),$=(L=$).U),$.C=!1,ne.C=!0,Mi(this,ne)),$=L.U;this._.C=!1},remove:function(L){L.N&&(L.N.P=L.P),L.P&&(L.P.N=L.N),L.N=L.P=null;var H,$,ne,ce=L.U,xe=L.L,Le=L.R;if($=xe?Le?Ti(Le):xe:Le,ce?ce.L===L?ce.L=$:ce.R=$:this._=$,xe&&Le?(ne=$.C,$.C=L.C,$.L=xe,xe.U=$,$!==Le?(ce=$.U,$.U=L.U,L=$.R,ce.L=L,$.R=Le,Le.U=$):($.U=ce,ce=$,L=$.R)):(ne=L.C,L=$),L&&(L.U=ce),!ne)if(L&&L.C)L.C=!1;else{do{if(L===this._)break;if(L===ce.L){if((H=ce.R).C&&(H.C=!1,ce.C=!0,Mi(this,ce),H=ce.R),H.L&&H.L.C||H.R&&H.R.C){H.R&&H.R.C||(H.L.C=!1,H.C=!0,ia(this,H),H=ce.R),H.C=ce.C,ce.C=H.R.C=!1,Mi(this,ce),L=this._;break}}else if((H=ce.L).C&&(H.C=!1,ce.C=!0,ia(this,ce),H=ce.L),H.L&&H.L.C||H.R&&H.R.C){H.L&&H.L.C||(H.R.C=!1,H.C=!0,Mi(this,H),H=ce.L),H.C=ce.C,ce.C=H.L.C=!1,ia(this,ce),L=this._;break}H.C=!0,L=ce,ce=ce.U}while(!L.C);L&&(L.C=!1)}}},a.geom.voronoi=function(L){var H=qn,$=Vn,ne=H,ce=$,xe=Gr;if(L)return Le(L);function Le(Ue){var He=new Array(Ue.length),tt=xe[0][0],ct=xe[0][1],dt=xe[1][0],wt=xe[1][1];return ji(Re(Ue),xe).cells.forEach(function(Et,kt){var Bt=Et.edges,It=Et.site;(He[kt]=Bt.length?Bt.map(function(Kt){var qt=Kt.start();return[qt.x,qt.y]}):It.x>=tt&&It.x<=dt&&It.y>=ct&&It.y<=wt?[[tt,wt],[dt,wt],[dt,ct],[tt,ct]]:[]).point=Ue[kt]}),He}function Re(Ue){return Ue.map(function(He,tt){return{x:Math.round(ne(He,tt)/$e)*$e,y:Math.round(ce(He,tt)/$e)*$e,i:tt}})}return Le.links=function(Ue){return ji(Re(Ue)).edges.filter(function(He){return He.l&&He.r}).map(function(He){return{source:Ue[He.l.i],target:Ue[He.r.i]}})},Le.triangles=function(Ue){var He=[];return ji(Re(Ue)).cells.forEach(function(tt,ct){for(var dt,wt,Et,kt,Bt=tt.site,It=tt.edges.sort(er),Kt=-1,qt=It.length,Vt=It[qt-1].edge,pn=Vt.l===Bt?Vt.r:Vt.l;++Kt<qt;)dt=pn,pn=(Vt=It[Kt].edge).l===Bt?Vt.r:Vt.l,ct<dt.i&&ct<pn.i&&(Et=dt,kt=pn,((wt=Bt).x-kt.x)*(Et.y-wt.y)-(wt.x-Et.x)*(kt.y-wt.y)<0)&&He.push([Ue[ct],Ue[dt.i],Ue[pn.i]])}),He},Le.x=function(Ue){return arguments.length?(ne=jn(H=Ue),Le):H},Le.y=function(Ue){return arguments.length?(ce=jn($=Ue),Le):$},Le.clipExtent=function(Ue){return arguments.length?(xe=Ue??Gr,Le):xe===Gr?null:xe},Le.size=function(Ue){return arguments.length?Le.clipExtent(Ue&&[[0,0],Ue]):xe===Gr?null:xe&&xe[1]},Le};var Gr=[[-1e6,-1e6],[1e6,1e6]];function fa(L){return L.x}function so(L){return L.y}function oa(L,H,$,ne,ce,xe){if(!L(H,$,ne,ce,xe)){var Le=.5*($+ce),Re=.5*(ne+xe),Ue=H.nodes;Ue[0]&&oa(L,Ue[0],$,ne,Le,Re),Ue[1]&&oa(L,Ue[1],Le,ne,ce,Re),Ue[2]&&oa(L,Ue[2],$,Re,Le,xe),Ue[3]&&oa(L,Ue[3],Le,Re,ce,xe)}}function Zo(L,H){L=a.rgb(L),H=a.rgb(H);var $=L.r,ne=L.g,ce=L.b,xe=H.r-$,Le=H.g-ne,Re=H.b-ce;return function(Ue){return"#"+nn(Math.round($+xe*Ue))+nn(Math.round(ne+Le*Ue))+nn(Math.round(ce+Re*Ue))}}function fs(L,H){var $,ne={},ce={};for($ in L)$ in H?ne[$]=lo(L[$],H[$]):ce[$]=L[$];for($ in H)$ in L||(ce[$]=H[$]);return function(xe){for($ in ne)ce[$]=ne[$](xe);return ce}}function Aa(L,H){return L=+L,H=+H,function($){return L*(1-$)+H*$}}function Do(L,H){var $,ne,ce,xe=Oo.lastIndex=hs.lastIndex=0,Le=-1,Re=[],Ue=[];for(L+="",H+="";($=Oo.exec(L))&&(ne=hs.exec(H));)(ce=ne.index)>xe&&(ce=H.slice(xe,ce),Re[Le]?Re[Le]+=ce:Re[++Le]=ce),($=$[0])===(ne=ne[0])?Re[Le]?Re[Le]+=ne:Re[++Le]=ne:(Re[++Le]=null,Ue.push({i:Le,x:Aa($,ne)})),xe=hs.lastIndex;return xe<H.length&&(ce=H.slice(xe),Re[Le]?Re[Le]+=ce:Re[++Le]=ce),Re.length<2?Ue[0]?(H=Ue[0].x,function(He){return H(He)+""}):function(){return H}:(H=Ue.length,function(He){for(var tt,ct=0;ct<H;++ct)Re[(tt=Ue[ct]).i]=tt.x(He);return Re.join("")})}a.geom.delaunay=function(L){return a.geom.voronoi().triangles(L)},a.geom.quadtree=function(L,H,$,ne,ce){var xe,Le=qn,Re=Vn;if(xe=arguments.length)return Le=fa,Re=so,xe===3&&(ce=$,ne=H,$=H=0),Ue(L);function Ue(He){var tt,ct,dt,wt,Et,kt,Bt,It,Kt,qt=jn(Le),Vt=jn(Re);if(H!=null)kt=H,Bt=$,It=ne,Kt=ce;else if(It=Kt=-(kt=Bt=1/0),ct=[],dt=[],Et=He.length,xe)for(wt=0;wt<Et;++wt)(tt=He[wt]).x<kt&&(kt=tt.x),tt.y<Bt&&(Bt=tt.y),tt.x>It&&(It=tt.x),tt.y>Kt&&(Kt=tt.y),ct.push(tt.x),dt.push(tt.y);else for(wt=0;wt<Et;++wt){var pn=+qt(tt=He[wt],wt),yn=+Vt(tt,wt);pn<kt&&(kt=pn),yn<Bt&&(Bt=yn),pn>It&&(It=pn),yn>Kt&&(Kt=yn),ct.push(pn),dt.push(yn)}var Sn=It-kt,On=Kt-Bt;function Hn(Zn,fr,Ar,Or,ir,ur,Cr,pr){if(!isNaN(Ar)&&!isNaN(Or))if(Zn.leaf){var Ir=Zn.x,Fr=Zn.y;if(Ir!=null)if(m(Ir-Ar)+m(Fr-Or)<.01)sr(Zn,fr,Ar,Or,ir,ur,Cr,pr);else{var Zr=Zn.point;Zn.x=Zn.y=Zn.point=null,sr(Zn,Zr,Ir,Fr,ir,ur,Cr,pr),sr(Zn,fr,Ar,Or,ir,ur,Cr,pr)}else Zn.x=Ar,Zn.y=Or,Zn.point=fr}else sr(Zn,fr,Ar,Or,ir,ur,Cr,pr)}function sr(Zn,fr,Ar,Or,ir,ur,Cr,pr){var Ir=.5*(ir+Cr),Fr=.5*(ur+pr),Zr=Ar>=Ir,Kr=Or>=Fr,ti=Kr<<1|Zr;Zn.leaf=!1,Zr?ir=Ir:Cr=Ir,Kr?ur=Fr:pr=Fr,Hn(Zn=Zn.nodes[ti]||(Zn.nodes[ti]={leaf:!0,nodes:[],point:null,x:null,y:null}),fr,Ar,Or,ir,ur,Cr,pr)}Sn>On?Kt=Bt+Sn:It=kt+On;var dr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Zn){Hn(dr,Zn,+qt(Zn,++wt),+Vt(Zn,wt),kt,Bt,It,Kt)}};if(dr.visit=function(Zn){oa(Zn,dr,kt,Bt,It,Kt)},dr.find=function(Zn){return function(fr,Ar,Or,ir,ur,Cr,pr){var Ir,Fr=1/0;return function Zr(Kr,ti,oi,Ei,Xi){if(!(ti>Cr||oi>pr||Ei<ir||Xi<ur)){if(Oa=Kr.point){var Oa,ma=Ar-Kr.x,Sa=Or-Kr.y,Di=ma*ma+Sa*Sa;if(Di<Fr){var li=Math.sqrt(Fr=Di);ir=Ar-li,ur=Or-li,Cr=Ar+li,pr=Or+li,Ir=Oa}}for(var Ui=Kr.nodes,wi=.5*(ti+Ei),di=.5*(oi+Xi),Vi=(Or>=di)<<1|Ar>=wi,Zi=Vi+4;Vi<Zi;++Vi)if(Kr=Ui[3&Vi])switch(3&Vi){case 0:Zr(Kr,ti,oi,wi,di);break;case 1:Zr(Kr,wi,oi,Ei,di);break;case 2:Zr(Kr,ti,di,wi,Xi);break;case 3:Zr(Kr,wi,di,Ei,Xi)}}}(fr,ir,ur,Cr,pr),Ir}(dr,Zn[0],Zn[1],kt,Bt,It,Kt)},wt=-1,H==null){for(;++wt<Et;)Hn(dr,He[wt],ct[wt],dt[wt],kt,Bt,It,Kt);--wt}else He.forEach(dr.add);return ct=dt=He=tt=null,dr}return Ue.x=function(He){return arguments.length?(Le=He,Ue):Le},Ue.y=function(He){return arguments.length?(Re=He,Ue):Re},Ue.extent=function(He){return arguments.length?(He==null?H=$=ne=ce=null:(H=+He[0][0],$=+He[0][1],ne=+He[1][0],ce=+He[1][1]),Ue):H==null?null:[[H,$],[ne,ce]]},Ue.size=function(He){return arguments.length?(He==null?H=$=ne=ce=null:(H=$=0,ne=+He[0],ce=+He[1]),Ue):H==null?null:[ne-H,ce-$]},Ue},a.interpolateRgb=Zo,a.interpolateObject=fs,a.interpolateNumber=Aa,a.interpolateString=Do;var Oo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hs=new RegExp(Oo.source,"g");function lo(L,H){for(var $,ne=a.interpolators.length;--ne>=0&&!($=a.interpolators[ne](L,H)););return $}function xo(L,H){var $,ne=[],ce=[],xe=L.length,Le=H.length,Re=Math.min(L.length,H.length);for($=0;$<Re;++$)ne.push(lo(L[$],H[$]));for(;$<xe;++$)ce[$]=L[$];for(;$<Le;++$)ce[$]=H[$];return function(Ue){for($=0;$<Re;++$)ce[$]=ne[$](Ue);return ce}}a.interpolate=lo,a.interpolators=[function(L,H){var $=typeof H;return($==="string"?Mn.has(H.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(H)?Zo:Do:H instanceof We?Zo:Array.isArray(H)?xo:$==="object"&&isNaN(H)?fs:Aa)(L,H)}],a.interpolateArray=xo;var bo=function(){return O},bi=a.map({linear:bo,poly:function(L){return function(H){return Math.pow(H,L)}},quad:function(){return _o},cubic:function(){return ds},sin:function(){return ps},exp:function(){return Jo},circle:function(){return ms},elastic:function(L,H){var $;return arguments.length<2&&(H=.45),arguments.length?$=H/Rt*Math.asin(1/L):(L=1,$=H/4),function(ne){return 1+L*Math.pow(2,-10*ne)*Math.sin((ne-$)*Rt/H)}},back:function(L){return L||(L=1.70158),function(H){return H*H*((L+1)*H-L)}},bounce:function(){return Fo}}),ha=a.map({in:O,out:Ko,"in-out":Ro,"out-in":function(L){return Ro(Ko(L))}});function Ko(L){return function(H){return 1-L(1-H)}}function Ro(L){return function(H){return .5*(H<.5?L(2*H):2-L(2-2*H))}}function _o(L){return L*L}function ds(L){return L*L*L}function zo(L){if(L<=0)return 0;if(L>=1)return 1;var H=L*L,$=H*L;return 4*(L<.5?$:3*(L-H)+$-.75)}function ps(L){return 1-Math.cos(L*Ge)}function Jo(L){return Math.pow(2,10*(L-1))}function ms(L){return 1-Math.sqrt(1-L*L)}function Fo(L){return L<.36363636363636365?7.5625*L*L:L<.7272727272727273?7.5625*(L-=.5454545454545454)*L+.75:L<.9090909090909091?7.5625*(L-=.8181818181818182)*L+.9375:7.5625*(L-=.9545454545454546)*L+.984375}function fc(L,H){return H-=L,function($){return Math.round(L+H*$)}}function jl(L){var H,$,ne,ce=[L.a,L.b],xe=[L.c,L.d],Le=Tc(ce),Re=Os(ce,xe),Ue=Tc(((H=xe)[0]+=(ne=-Re)*($=ce)[0],H[1]+=ne*$[1],H))||0;ce[0]*xe[1]<xe[0]*ce[1]&&(ce[0]*=-1,ce[1]*=-1,Le*=-1,Re*=-1),this.rotate=(Le?Math.atan2(ce[1],ce[0]):Math.atan2(-xe[0],xe[1]))*Ne,this.translate=[L.e,L.f],this.scale=[Le,Ue],this.skew=Ue?Math.atan2(Re,Ue)*Ne:0}function Os(L,H){return L[0]*H[0]+L[1]*H[1]}function Tc(L){var H=Math.sqrt(Os(L,L));return H&&(L[0]/=H,L[1]/=H),H}a.ease=function(L){var H,$=L.indexOf("-"),ne=$>=0?L.slice(0,$):L,ce=$>=0?L.slice($+1):"in";return ne=bi.get(ne)||bo,ce=ha.get(ce)||O,H=ce(ne.apply(null,w.call(arguments,1))),function(xe){return xe<=0?0:xe>=1?1:H(xe)}},a.interpolateHcl=function(L,H){L=a.hcl(L),H=a.hcl(H);var $=L.h,ne=L.c,ce=L.l,xe=H.h-$,Le=H.c-ne,Re=H.l-ce;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?H.c:ne),isNaN(xe)?(xe=0,$=isNaN($)?H.h:$):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return bt($+xe*Ue,ne+Le*Ue,ce+Re*Ue)+""}},a.interpolateHsl=function(L,H){L=a.hsl(L),H=a.hsl(H);var $=L.h,ne=L.s,ce=L.l,xe=H.h-$,Le=H.s-ne,Re=H.l-ce;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?H.s:ne),isNaN(xe)?(xe=0,$=isNaN($)?H.h:$):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return vt($+xe*Ue,ne+Le*Ue,ce+Re*Ue)+""}},a.interpolateLab=function(L,H){L=a.lab(L),H=a.lab(H);var $=L.l,ne=L.a,ce=L.b,xe=H.l-$,Le=H.a-ne,Re=H.b-ce;return function(Ue){return Ht($+xe*Ue,ne+Le*Ue,ce+Re*Ue)+""}},a.interpolateRound=fc,a.transform=function(L){var H=f.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function($){if($!=null){H.setAttribute("transform",$);var ne=H.transform.baseVal.consolidate()}return new jl(ne?ne.matrix:kc)})(L)},jl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var kc={a:1,b:0,c:0,d:1,e:0,f:0};function Rs(L){return L.length?L.pop()+",":""}function Ac(L,H){var $=[],ne=[];return L=a.transform(L),H=a.transform(H),function(ce,xe,Le,Re){if(ce[0]!==xe[0]||ce[1]!==xe[1]){var Ue=Le.push("translate(",null,",",null,")");Re.push({i:Ue-4,x:Aa(ce[0],xe[0])},{i:Ue-2,x:Aa(ce[1],xe[1])})}else(xe[0]||xe[1])&&Le.push("translate("+xe+")")}(L.translate,H.translate,$,ne),function(ce,xe,Le,Re){ce!==xe?(ce-xe>180?xe+=360:xe-ce>180&&(ce+=360),Re.push({i:Le.push(Rs(Le)+"rotate(",null,")")-2,x:Aa(ce,xe)})):xe&&Le.push(Rs(Le)+"rotate("+xe+")")}(L.rotate,H.rotate,$,ne),function(ce,xe,Le,Re){ce!==xe?Re.push({i:Le.push(Rs(Le)+"skewX(",null,")")-2,x:Aa(ce,xe)}):xe&&Le.push(Rs(Le)+"skewX("+xe+")")}(L.skew,H.skew,$,ne),function(ce,xe,Le,Re){if(ce[0]!==xe[0]||ce[1]!==xe[1]){var Ue=Le.push(Rs(Le)+"scale(",null,",",null,")");Re.push({i:Ue-4,x:Aa(ce[0],xe[0])},{i:Ue-2,x:Aa(ce[1],xe[1])})}else xe[0]===1&&xe[1]===1||Le.push(Rs(Le)+"scale("+xe+")")}(L.scale,H.scale,$,ne),L=H=null,function(ce){for(var xe,Le=-1,Re=ne.length;++Le<Re;)$[(xe=ne[Le]).i]=xe.x(ce);return $.join("")}}function Zc(L,H){return H=(H-=L=+L)||1/H,function($){return($-L)/H}}function Kc(L,H){return H=(H-=L=+L)||1/H,function($){return Math.max(0,Math.min(1,($-L)/H))}}function zs(L){for(var H=L.source,$=L.target,ne=function(Le,Re){if(Le===Re)return Le;for(var Ue=Bo(Le),He=Bo(Re),tt=Ue.pop(),ct=He.pop(),dt=null;tt===ct;)dt=tt,tt=Ue.pop(),ct=He.pop();return dt}(H,$),ce=[H];H!==ne;)H=H.parent,ce.push(H);for(var xe=ce.length;$!==ne;)ce.splice(xe,0,$),$=$.parent;return ce}function Bo(L){for(var H=[],$=L.parent;$!=null;)H.push(L),L=$,$=$.parent;return H.push(L),H}function Zs(L){L.fixed|=2}function Fs(L){L.fixed&=-7}function bl(L){L.fixed|=4,L.px=L.x,L.py=L.y}function Bs(L){L.fixed&=-5}function wo(L,H,$){var ne=0,ce=0;if(L.charge=0,!L.leaf)for(var xe,Le=L.nodes,Re=Le.length,Ue=-1;++Ue<Re;)(xe=Le[Ue])!=null&&(wo(xe,H,$),L.charge+=xe.charge,ne+=xe.charge*xe.cx,ce+=xe.charge*xe.cy);if(L.point){L.leaf||(L.point.x+=Math.random()-.5,L.point.y+=Math.random()-.5);var He=H*$[L.point.index];L.charge+=L.pointCharge=He,ne+=He*L.point.x,ce+=He*L.point.y}L.cx=ne/L.charge,L.cy=ce/L.charge}a.interpolateTransform=Ac,a.layout={},a.layout.bundle=function(){return function(L){for(var H=[],$=-1,ne=L.length;++$<ne;)H.push(zs(L[$]));return H}},a.layout.chord=function(){var L,H,$,ne,ce,xe,Le,Re={},Ue=0;function He(){var ct,dt,wt,Et,kt,Bt={},It=[],Kt=a.range(ne),qt=[];for(L=[],H=[],ct=0,Et=-1;++Et<ne;){for(dt=0,kt=-1;++kt<ne;)dt+=$[Et][kt];It.push(dt),qt.push(a.range(ne)),ct+=dt}for(ce&&Kt.sort(function(dr,Zn){return ce(It[dr],It[Zn])}),xe&&qt.forEach(function(dr,Zn){dr.sort(function(fr,Ar){return xe($[Zn][fr],$[Zn][Ar])})}),ct=(Rt-Ue*ne)/ct,dt=0,Et=-1;++Et<ne;){for(wt=dt,kt=-1;++kt<ne;){var Vt=Kt[Et],pn=qt[Vt][kt],yn=$[Vt][pn],Sn=dt,On=dt+=yn*ct;Bt[Vt+"-"+pn]={index:Vt,subindex:pn,startAngle:Sn,endAngle:On,value:yn}}H[Vt]={index:Vt,startAngle:wt,endAngle:dt,value:It[Vt]},dt+=Ue}for(Et=-1;++Et<ne;)for(kt=Et-1;++kt<ne;){var Hn=Bt[Et+"-"+kt],sr=Bt[kt+"-"+Et];(Hn.value||sr.value)&&L.push(Hn.value<sr.value?{source:sr,target:Hn}:{source:Hn,target:sr})}Le&&tt()}function tt(){L.sort(function(ct,dt){return Le((ct.source.value+ct.target.value)/2,(dt.source.value+dt.target.value)/2)})}return Re.matrix=function(ct){return arguments.length?(ne=($=ct)&&$.length,L=H=null,Re):$},Re.padding=function(ct){return arguments.length?(Ue=ct,L=H=null,Re):Ue},Re.sortGroups=function(ct){return arguments.length?(ce=ct,L=H=null,Re):ce},Re.sortSubgroups=function(ct){return arguments.length?(xe=ct,L=null,Re):xe},Re.sortChords=function(ct){return arguments.length?(Le=ct,L&&tt(),Re):Le},Re.chords=function(){return L||He(),L},Re.groups=function(){return H||He(),H},Re},a.layout.force=function(){var L,H,$,ne,ce,xe,Le={},Re=a.dispatch("start","tick","end"),Ue=[1,1],He=.9,tt=hc,ct=gs,dt=-30,wt=$o,Et=.1,kt=.64,Bt=[],It=[];function Kt(Vt){return function(pn,yn,Sn,On){if(pn.point!==Vt){var Hn=pn.cx-Vt.x,sr=pn.cy-Vt.y,dr=On-yn,Zn=Hn*Hn+sr*sr;if(dr*dr/kt<Zn){if(Zn<wt){var fr=pn.charge/Zn;Vt.px-=Hn*fr,Vt.py-=sr*fr}return!0}pn.point&&Zn&&Zn<wt&&(fr=pn.pointCharge/Zn,Vt.px-=Hn*fr,Vt.py-=sr*fr)}return!pn.charge}}function qt(Vt){Vt.px=a.event.x,Vt.py=a.event.y,Le.resume()}return Le.tick=function(){if(($*=.99)<.005)return L=null,Re.end({type:"end",alpha:$=0}),!0;var Vt,pn,yn,Sn,On,Hn,sr,dr,Zn,fr=Bt.length,Ar=It.length;for(pn=0;pn<Ar;++pn)Sn=(yn=It[pn]).source,(Hn=(dr=(On=yn.target).x-Sn.x)*dr+(Zn=On.y-Sn.y)*Zn)&&(dr*=Hn=$*ce[pn]*((Hn=Math.sqrt(Hn))-ne[pn])/Hn,Zn*=Hn,On.x-=dr*(sr=Sn.weight+On.weight?Sn.weight/(Sn.weight+On.weight):.5),On.y-=Zn*sr,Sn.x+=dr*(sr=1-sr),Sn.y+=Zn*sr);if((sr=$*Et)&&(dr=Ue[0]/2,Zn=Ue[1]/2,pn=-1,sr))for(;++pn<fr;)(yn=Bt[pn]).x+=(dr-yn.x)*sr,yn.y+=(Zn-yn.y)*sr;if(dt)for(wo(Vt=a.geom.quadtree(Bt),$,xe),pn=-1;++pn<fr;)(yn=Bt[pn]).fixed||Vt.visit(Kt(yn));for(pn=-1;++pn<fr;)(yn=Bt[pn]).fixed?(yn.x=yn.px,yn.y=yn.py):(yn.x-=(yn.px-(yn.px=yn.x))*He,yn.y-=(yn.py-(yn.py=yn.y))*He);Re.tick({type:"tick",alpha:$})},Le.nodes=function(Vt){return arguments.length?(Bt=Vt,Le):Bt},Le.links=function(Vt){return arguments.length?(It=Vt,Le):It},Le.size=function(Vt){return arguments.length?(Ue=Vt,Le):Ue},Le.linkDistance=function(Vt){return arguments.length?(tt=typeof Vt=="function"?Vt:+Vt,Le):tt},Le.distance=Le.linkDistance,Le.linkStrength=function(Vt){return arguments.length?(ct=typeof Vt=="function"?Vt:+Vt,Le):ct},Le.friction=function(Vt){return arguments.length?(He=+Vt,Le):He},Le.charge=function(Vt){return arguments.length?(dt=typeof Vt=="function"?Vt:+Vt,Le):dt},Le.chargeDistance=function(Vt){return arguments.length?(wt=Vt*Vt,Le):Math.sqrt(wt)},Le.gravity=function(Vt){return arguments.length?(Et=+Vt,Le):Et},Le.theta=function(Vt){return arguments.length?(kt=Vt*Vt,Le):Math.sqrt(kt)},Le.alpha=function(Vt){return arguments.length?(Vt=+Vt,$?Vt>0?$=Vt:(L.c=null,L.t=NaN,L=null,Re.end({type:"end",alpha:$=0})):Vt>0&&(Re.start({type:"start",alpha:$=Vt}),L=rn(Le.tick)),Le):$},Le.start=function(){var Vt,pn,yn,Sn=Bt.length,On=It.length,Hn=Ue[0],sr=Ue[1];for(Vt=0;Vt<Sn;++Vt)(yn=Bt[Vt]).index=Vt,yn.weight=0;for(Vt=0;Vt<On;++Vt)typeof(yn=It[Vt]).source=="number"&&(yn.source=Bt[yn.source]),typeof yn.target=="number"&&(yn.target=Bt[yn.target]),++yn.source.weight,++yn.target.weight;for(Vt=0;Vt<Sn;++Vt)yn=Bt[Vt],isNaN(yn.x)&&(yn.x=dr("x",Hn)),isNaN(yn.y)&&(yn.y=dr("y",sr)),isNaN(yn.px)&&(yn.px=yn.x),isNaN(yn.py)&&(yn.py=yn.y);if(ne=[],typeof tt=="function")for(Vt=0;Vt<On;++Vt)ne[Vt]=+tt.call(this,It[Vt],Vt);else for(Vt=0;Vt<On;++Vt)ne[Vt]=tt;if(ce=[],typeof ct=="function")for(Vt=0;Vt<On;++Vt)ce[Vt]=+ct.call(this,It[Vt],Vt);else for(Vt=0;Vt<On;++Vt)ce[Vt]=ct;if(xe=[],typeof dt=="function")for(Vt=0;Vt<Sn;++Vt)xe[Vt]=+dt.call(this,Bt[Vt],Vt);else for(Vt=0;Vt<Sn;++Vt)xe[Vt]=dt;function dr(Zn,fr){if(!pn){for(pn=new Array(Sn),ur=0;ur<Sn;++ur)pn[ur]=[];for(ur=0;ur<On;++ur){var Ar=It[ur];pn[Ar.source.index].push(Ar.target),pn[Ar.target.index].push(Ar.source)}}for(var Or,ir=pn[Vt],ur=-1,Cr=ir.length;++ur<Cr;)if(!isNaN(Or=ir[ur][Zn]))return Or;return Math.random()*fr}return Le.resume()},Le.resume=function(){return Le.alpha(.1)},Le.stop=function(){return Le.alpha(0)},Le.drag=function(){if(H||(H=a.behavior.drag().origin(O).on("dragstart.force",Zs).on("drag.force",qt).on("dragend.force",Fs)),!arguments.length)return H;this.on("mouseover.force",bl).on("mouseout.force",Bs).call(H)},a.rebind(Le,Re,"on")};var hc=20,gs=1,$o=1/0;function Qo(L,H){return a.rebind(L,H,"sort","children","value"),L.nodes=L,L.links=Js,L}function vs(L,H){for(var $=[L];(L=$.pop())!=null;)if(H(L),(ce=L.children)&&(ne=ce.length))for(var ne,ce;--ne>=0;)$.push(ce[ne])}function ni(L,H){for(var $=[L],ne=[];(L=$.pop())!=null;)if(ne.push(L),(xe=L.children)&&(ce=xe.length))for(var ce,xe,Le=-1;++Le<ce;)$.push(xe[Le]);for(;(L=ne.pop())!=null;)H(L)}function Ks(L){return L.children}function Jc(L){return L.value}function Ul(L,H){return H.value-L.value}function Js(L){return a.merge(L.map(function(H){return(H.children||[]).map(function($){return{source:H,target:$}})}))}a.layout.hierarchy=function(){var L=Ul,H=Ks,$=Jc;function ne(ce){var xe,Le=[ce],Re=[];for(ce.depth=0;(xe=Le.pop())!=null;)if(Re.push(xe),(He=H.call(ne,xe,xe.depth))&&(Ue=He.length)){for(var Ue,He,tt;--Ue>=0;)Le.push(tt=He[Ue]),tt.parent=xe,tt.depth=xe.depth+1;$&&(xe.value=0),xe.children=He}else $&&(xe.value=+$.call(ne,xe,xe.depth)||0),delete xe.children;return ni(ce,function(ct){var dt,wt;L&&(dt=ct.children)&&dt.sort(L),$&&(wt=ct.parent)&&(wt.value+=ct.value)}),Re}return ne.sort=function(ce){return arguments.length?(L=ce,ne):L},ne.children=function(ce){return arguments.length?(H=ce,ne):H},ne.value=function(ce){return arguments.length?($=ce,ne):$},ne.revalue=function(ce){return $&&(vs(ce,function(xe){xe.children&&(xe.value=0)}),ni(ce,function(xe){var Le;xe.children||(xe.value=+$.call(ne,xe,xe.depth)||0),(Le=xe.parent)&&(Le.value+=xe.value)})),ce},ne},a.layout.partition=function(){var L=a.layout.hierarchy(),H=[1,1];function $(xe,Le,Re,Ue){var He=xe.children;if(xe.x=Le,xe.y=xe.depth*Ue,xe.dx=Re,xe.dy=Ue,He&&(tt=He.length)){var tt,ct,dt,wt=-1;for(Re=xe.value?Re/xe.value:0;++wt<tt;)$(ct=He[wt],Le,dt=ct.value*Re,Ue),Le+=dt}}function ne(xe){var Le=xe.children,Re=0;if(Le&&(Ue=Le.length))for(var Ue,He=-1;++He<Ue;)Re=Math.max(Re,ne(Le[He]));return 1+Re}function ce(xe,Le){var Re=L.call(this,xe,Le);return $(Re[0],0,H[0],H[1]/ne(Re[0])),Re}return ce.size=function(xe){return arguments.length?(H=xe,ce):H},Qo(ce,L)},a.layout.pie=function(){var L=Number,H=Mc,$=0,ne=Rt,ce=0;function xe(Le){var Re,Ue=Le.length,He=Le.map(function(Kt,qt){return+L.call(xe,Kt,qt)}),tt=+(typeof $=="function"?$.apply(this,arguments):$),ct=(typeof ne=="function"?ne.apply(this,arguments):ne)-tt,dt=Math.min(Math.abs(ct)/Ue,+(typeof ce=="function"?ce.apply(this,arguments):ce)),wt=dt*(ct<0?-1:1),Et=a.sum(He),kt=Et?(ct-Ue*wt)/Et:0,Bt=a.range(Ue),It=[];return H!=null&&Bt.sort(H===Mc?function(Kt,qt){return He[qt]-He[Kt]}:function(Kt,qt){return H(Le[Kt],Le[qt])}),Bt.forEach(function(Kt){It[Kt]={data:Le[Kt],value:Re=He[Kt],startAngle:tt,endAngle:tt+=Re*kt+wt,padAngle:dt}}),It}return xe.value=function(Le){return arguments.length?(L=Le,xe):L},xe.sort=function(Le){return arguments.length?(H=Le,xe):H},xe.startAngle=function(Le){return arguments.length?($=Le,xe):$},xe.endAngle=function(Le){return arguments.length?(ne=Le,xe):ne},xe.padAngle=function(Le){return arguments.length?(ce=Le,xe):ce},xe};var Mc={};function $c(L){return L.x}function Vl(L){return L.y}function Qc(L,H,$){L.y0=H,L.y=$}a.layout.stack=function(){var L=O,H=es,$=To,ne=Qc,ce=$c,xe=Vl;function Le(Re,Ue){if(!(dt=Re.length))return Re;var He=Re.map(function(Kt,qt){return L.call(Le,Kt,qt)}),tt=He.map(function(Kt){return Kt.map(function(qt,Vt){return[ce.call(Le,qt,Vt),xe.call(Le,qt,Vt)]})}),ct=H.call(Le,tt,Ue);He=a.permute(He,ct),tt=a.permute(tt,ct);var dt,wt,Et,kt,Bt=$.call(Le,tt,Ue),It=He[0].length;for(Et=0;Et<It;++Et)for(ne.call(Le,He[0][Et],kt=Bt[Et],tt[0][Et][1]),wt=1;wt<dt;++wt)ne.call(Le,He[wt][Et],kt+=tt[wt-1][Et][1],tt[wt][Et][1]);return Re}return Le.values=function(Re){return arguments.length?(L=Re,Le):L},Le.order=function(Re){return arguments.length?(H=typeof Re=="function"?Re:ys.get(Re)||es,Le):H},Le.offset=function(Re){return arguments.length?($=typeof Re=="function"?Re:Ns.get(Re)||To,Le):$},Le.x=function(Re){return arguments.length?(ce=Re,Le):ce},Le.y=function(Re){return arguments.length?(xe=Re,Le):xe},Le.out=function(Re){return arguments.length?(ne=Re,Le):ne},Le};var ys=a.map({"inside-out":function(L){var H,$,ne=L.length,ce=L.map($s),xe=L.map(Sc),Le=a.range(ne).sort(function(ct,dt){return ce[ct]-ce[dt]}),Re=0,Ue=0,He=[],tt=[];for(H=0;H<ne;++H)$=Le[H],Re<Ue?(Re+=xe[$],He.push($)):(Ue+=xe[$],tt.push($));return tt.reverse().concat(He)},reverse:function(L){return a.range(L.length).reverse()},default:es}),Ns=a.map({silhouette:function(L){var H,$,ne,ce=L.length,xe=L[0].length,Le=[],Re=0,Ue=[];for($=0;$<xe;++$){for(H=0,ne=0;H<ce;H++)ne+=L[H][$][1];ne>Re&&(Re=ne),Le.push(ne)}for($=0;$<xe;++$)Ue[$]=(Re-Le[$])/2;return Ue},wiggle:function(L){var H,$,ne,ce,xe,Le,Re,Ue,He,tt=L.length,ct=L[0],dt=ct.length,wt=[];for(wt[0]=Ue=He=0,$=1;$<dt;++$){for(H=0,ce=0;H<tt;++H)ce+=L[H][$][1];for(H=0,xe=0,Re=ct[$][0]-ct[$-1][0];H<tt;++H){for(ne=0,Le=(L[H][$][1]-L[H][$-1][1])/(2*Re);ne<H;++ne)Le+=(L[ne][$][1]-L[ne][$-1][1])/Re;xe+=Le*L[H][$][1]}wt[$]=Ue-=ce?xe/ce*Re:0,Ue<He&&(He=Ue)}for($=0;$<dt;++$)wt[$]-=He;return wt},expand:function(L){var H,$,ne,ce=L.length,xe=L[0].length,Le=1/ce,Re=[];for($=0;$<xe;++$){for(H=0,ne=0;H<ce;H++)ne+=L[H][$][1];if(ne)for(H=0;H<ce;H++)L[H][$][1]/=ne;else for(H=0;H<ce;H++)L[H][$][1]=Le}for($=0;$<xe;++$)Re[$]=0;return Re},zero:To});function es(L){return a.range(L.length)}function To(L){for(var H=-1,$=L[0].length,ne=[];++H<$;)ne[H]=0;return ne}function $s(L){for(var H,$=1,ne=0,ce=L[0][1],xe=L.length;$<xe;++$)(H=L[$][1])>ce&&(ne=$,ce=H);return ne}function Sc(L){return L.reduce(_l,0)}function _l(L,H){return L+H[1]}function Hl(L,H){return eo(L,Math.ceil(Math.log(H.length)/Math.LN2+1))}function eo(L,H){for(var $=-1,ne=+L[0],ce=(L[1]-ne)/H,xe=[];++$<=H;)xe[$]=ce*$+ne;return xe}function Gl(L){return[a.min(L),a.max(L)]}function Cc(L,H){return L.value-H.value}function Qs(L,H){var $=L._pack_next;L._pack_next=H,H._pack_prev=L,H._pack_next=$,$._pack_prev=H}function js(L,H){L._pack_next=H,H._pack_prev=L}function el(L,H){var $=H.x-L.x,ne=H.y-L.y,ce=L.r+H.r;return .999*ce*ce>$*$+ne*ne}function Us(L){if((H=L.children)&&(Ue=H.length)){var H,$,ne,ce,xe,Le,Re,Ue,He=1/0,tt=-1/0,ct=1/0,dt=-1/0;if(H.forEach(Vs),($=H[0]).x=-$.r,$.y=0,qt($),Ue>1&&((ne=H[1]).x=ne.r,ne.y=0,qt(ne),Ue>2))for(vi($,ne,ce=H[2]),qt(ce),Qs($,ce),$._pack_prev=ce,Qs(ce,ne),ne=$._pack_next,xe=3;xe<Ue;xe++){vi($,ne,ce=H[xe]);var wt=0,Et=1,kt=1;for(Le=ne._pack_next;Le!==ne;Le=Le._pack_next,Et++)if(el(Le,ce)){wt=1;break}if(wt==1)for(Re=$._pack_prev;Re!==Le._pack_prev&&!el(Re,ce);Re=Re._pack_prev,kt++);wt?(Et<kt||Et==kt&&ne.r<$.r?js($,ne=Le):js($=Re,ne),xe--):(Qs($,ce),ne=ce,qt(ce))}var Bt=(He+tt)/2,It=(ct+dt)/2,Kt=0;for(xe=0;xe<Ue;xe++)(ce=H[xe]).x-=Bt,ce.y-=It,Kt=Math.max(Kt,ce.r+Math.sqrt(ce.x*ce.x+ce.y*ce.y));L.r=Kt,H.forEach(wl)}function qt(Vt){He=Math.min(Vt.x-Vt.r,He),tt=Math.max(Vt.x+Vt.r,tt),ct=Math.min(Vt.y-Vt.r,ct),dt=Math.max(Vt.y+Vt.r,dt)}}function Vs(L){L._pack_next=L._pack_prev=L}function wl(L){delete L._pack_next,delete L._pack_prev}function ql(L,H,$,ne){var ce=L.children;if(L.x=H+=ne*L.x,L.y=$+=ne*L.y,L.r*=ne,ce)for(var xe=-1,Le=ce.length;++xe<Le;)ql(ce[xe],H,$,ne)}function vi(L,H,$){var ne=L.r+$.r,ce=H.x-L.x,xe=H.y-L.y;if(ne&&(ce||xe)){var Le=H.r+$.r,Re=ce*ce+xe*xe,Ue=.5+((ne*=ne)-(Le*=Le))/(2*Re),He=Math.sqrt(Math.max(0,2*Le*(ne+Re)-(ne-=Re)*ne-Le*Le))/(2*Re);$.x=L.x+Ue*ce+He*xe,$.y=L.y+Ue*xe-He*ce}else $.x=L.x+ne,$.y=L.y}function xs(L,H){return L.parent==H.parent?1:2}function Ma(L){var H=L.children;return H.length?H[0]:L.t}function ko(L){var H,$=L.children;return(H=$.length)?$[H-1]:L.t}function ci(L,H,$){var ne=$/(H.i-L.i);H.c-=ne,H.s+=$,L.c+=ne,H.z+=$,H.m+=$}function gi(L,H,$){return L.a.parent===H.parent?L.a:$}function to(L){var H=L.children;return H&&H.length?to(H[0]):L}function tl(L){var H,$=L.children;return $&&(H=$.length)?tl($[H-1]):L}function Tl(L){return{x:L.x,y:L.y,dx:L.dx,dy:L.dy}}function Wl(L,H){var $=L.x+H[3],ne=L.y+H[0],ce=L.dx-H[1]-H[3],xe=L.dy-H[0]-H[2];return ce<0&&($+=ce/2,ce=0),xe<0&&(ne+=xe/2,xe=0),{x:$,y:ne,dx:ce,dy:xe}}function kl(L){var H=L[0],$=L[L.length-1];return H<$?[H,$]:[$,H]}function Al(L){return L.rangeExtent?L.rangeExtent():kl(L.range())}function co(L,H,$,ne){var ce=$(L[0],L[1]),xe=ne(H[0],H[1]);return function(Le){return xe(ce(Le))}}function bs(L,H){var $,ne=0,ce=L.length-1,xe=L[ne],Le=L[ce];return Le<xe&&($=ne,ne=ce,ce=$,$=xe,xe=Le,Le=$),L[ne]=H.floor(xe),L[ce]=H.ceil(Le),L}function _s(L){return L?{floor:function(H){return Math.floor(H/L)*L},ceil:function(H){return Math.ceil(H/L)*L}}:Pa}a.layout.histogram=function(){var L=!0,H=Number,$=Gl,ne=Hl;function ce(xe,Le){for(var Re,Ue,He=[],tt=xe.map(H,this),ct=$.call(this,tt,Le),dt=ne.call(this,ct,tt,Le),wt=(Le=-1,tt.length),Et=dt.length-1,kt=L?1:1/wt;++Le<Et;)(Re=He[Le]=[]).dx=dt[Le+1]-(Re.x=dt[Le]),Re.y=0;if(Et>0)for(Le=-1;++Le<wt;)(Ue=tt[Le])>=ct[0]&&Ue<=ct[1]&&((Re=He[a.bisect(dt,Ue,1,Et)-1]).y+=kt,Re.push(xe[Le]));return He}return ce.value=function(xe){return arguments.length?(H=xe,ce):H},ce.range=function(xe){return arguments.length?($=jn(xe),ce):$},ce.bins=function(xe){return arguments.length?(ne=typeof xe=="number"?function(Le){return eo(Le,xe)}:jn(xe),ce):ne},ce.frequency=function(xe){return arguments.length?(L=!!xe,ce):L},ce},a.layout.pack=function(){var L,H=a.layout.hierarchy().sort(Cc),$=0,ne=[1,1];function ce(xe,Le){var Re=H.call(this,xe,Le),Ue=Re[0],He=ne[0],tt=ne[1],ct=L==null?Math.sqrt:typeof L=="function"?L:function(){return L};if(Ue.x=Ue.y=0,ni(Ue,function(wt){wt.r=+ct(wt.value)}),ni(Ue,Us),$){var dt=$*(L?1:Math.max(2*Ue.r/He,2*Ue.r/tt))/2;ni(Ue,function(wt){wt.r+=dt}),ni(Ue,Us),ni(Ue,function(wt){wt.r-=dt})}return ql(Ue,He/2,tt/2,L?1:1/Math.max(2*Ue.r/He,2*Ue.r/tt)),Re}return ce.size=function(xe){return arguments.length?(ne=xe,ce):ne},ce.radius=function(xe){return arguments.length?(L=xe==null||typeof xe=="function"?xe:+xe,ce):L},ce.padding=function(xe){return arguments.length?($=+xe,ce):$},Qo(ce,H)},a.layout.tree=function(){var L=a.layout.hierarchy().sort(null).value(null),H=xs,$=[1,1],ne=null;function ce(Ue,He){var tt=L.call(this,Ue,He),ct=tt[0],dt=function(qt){for(var Vt,pn={A:null,children:[qt]},yn=[pn];(Vt=yn.pop())!=null;)for(var Sn,On=Vt.children,Hn=0,sr=On.length;Hn<sr;++Hn)yn.push((On[Hn]=Sn={_:On[Hn],parent:Vt,children:(Sn=On[Hn].children)&&Sn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Hn}).a=Sn);return pn.children[0]}(ct);if(ni(dt,xe),dt.parent.m=-dt.z,vs(dt,Le),ne)vs(ct,Re);else{var wt=ct,Et=ct,kt=ct;vs(ct,function(qt){qt.x<wt.x&&(wt=qt),qt.x>Et.x&&(Et=qt),qt.depth>kt.depth&&(kt=qt)});var Bt=H(wt,Et)/2-wt.x,It=$[0]/(Et.x+H(Et,wt)/2+Bt),Kt=$[1]/(kt.depth||1);vs(ct,function(qt){qt.x=(qt.x+Bt)*It,qt.y=qt.depth*Kt})}return tt}function xe(Ue){var He=Ue.children,tt=Ue.parent.children,ct=Ue.i?tt[Ue.i-1]:null;if(He.length){(function(wt){for(var Et,kt=0,Bt=0,It=wt.children,Kt=It.length;--Kt>=0;)(Et=It[Kt]).z+=kt,Et.m+=kt,kt+=Et.s+(Bt+=Et.c)})(Ue);var dt=(He[0].z+He[He.length-1].z)/2;ct?(Ue.z=ct.z+H(Ue._,ct._),Ue.m=Ue.z-dt):Ue.z=dt}else ct&&(Ue.z=ct.z+H(Ue._,ct._));Ue.parent.A=function(wt,Et,kt){if(Et){for(var Bt,It=wt,Kt=wt,qt=Et,Vt=It.parent.children[0],pn=It.m,yn=Kt.m,Sn=qt.m,On=Vt.m;qt=ko(qt),It=Ma(It),qt&&It;)Vt=Ma(Vt),(Kt=ko(Kt)).a=wt,(Bt=qt.z+Sn-It.z-pn+H(qt._,It._))>0&&(ci(gi(qt,wt,kt),wt,Bt),pn+=Bt,yn+=Bt),Sn+=qt.m,pn+=It.m,On+=Vt.m,yn+=Kt.m;qt&&!ko(Kt)&&(Kt.t=qt,Kt.m+=Sn-yn),It&&!Ma(Vt)&&(Vt.t=It,Vt.m+=pn-On,kt=wt)}return kt}(Ue,ct,Ue.parent.A||tt[0])}function Le(Ue){Ue._.x=Ue.z+Ue.parent.m,Ue.m+=Ue.parent.m}function Re(Ue){Ue.x*=$[0],Ue.y=Ue.depth*$[1]}return ce.separation=function(Ue){return arguments.length?(H=Ue,ce):H},ce.size=function(Ue){return arguments.length?(ne=($=Ue)==null?Re:null,ce):ne?null:$},ce.nodeSize=function(Ue){return arguments.length?(ne=($=Ue)==null?null:Re,ce):ne?$:null},Qo(ce,L)},a.layout.cluster=function(){var L=a.layout.hierarchy().sort(null).value(null),H=xs,$=[1,1],ne=!1;function ce(xe,Le){var Re,Ue=L.call(this,xe,Le),He=Ue[0],tt=0;ni(He,function(kt){var Bt=kt.children;Bt&&Bt.length?(kt.x=function(It){return It.reduce(function(Kt,qt){return Kt+qt.x},0)/It.length}(Bt),kt.y=function(It){return 1+a.max(It,function(Kt){return Kt.y})}(Bt)):(kt.x=Re?tt+=H(kt,Re):0,kt.y=0,Re=kt)});var ct=to(He),dt=tl(He),wt=ct.x-H(ct,dt)/2,Et=dt.x+H(dt,ct)/2;return ni(He,ne?function(kt){kt.x=(kt.x-He.x)*$[0],kt.y=(He.y-kt.y)*$[1]}:function(kt){kt.x=(kt.x-wt)/(Et-wt)*$[0],kt.y=(1-(He.y?kt.y/He.y:1))*$[1]}),Ue}return ce.separation=function(xe){return arguments.length?(H=xe,ce):H},ce.size=function(xe){return arguments.length?(ne=($=xe)==null,ce):ne?null:$},ce.nodeSize=function(xe){return arguments.length?(ne=($=xe)!=null,ce):ne?$:null},Qo(ce,L)},a.layout.treemap=function(){var L,H=a.layout.hierarchy(),$=Math.round,ne=[1,1],ce=null,xe=Tl,Le=!1,Re="squarify",Ue=.5*(1+Math.sqrt(5));function He(kt,Bt){for(var It,Kt,qt=-1,Vt=kt.length;++qt<Vt;)Kt=(It=kt[qt]).value*(Bt<0?0:Bt),It.area=isNaN(Kt)||Kt<=0?0:Kt}function tt(kt){var Bt=kt.children;if(Bt&&Bt.length){var It,Kt,qt,Vt=xe(kt),pn=[],yn=Bt.slice(),Sn=1/0,On=Re==="slice"?Vt.dx:Re==="dice"?Vt.dy:Re==="slice-dice"?1&kt.depth?Vt.dy:Vt.dx:Math.min(Vt.dx,Vt.dy);for(He(yn,Vt.dx*Vt.dy/kt.value),pn.area=0;(qt=yn.length)>0;)pn.push(It=yn[qt-1]),pn.area+=It.area,Re!=="squarify"||(Kt=dt(pn,On))<=Sn?(yn.pop(),Sn=Kt):(pn.area-=pn.pop().area,wt(pn,On,Vt,!1),On=Math.min(Vt.dx,Vt.dy),pn.length=pn.area=0,Sn=1/0);pn.length&&(wt(pn,On,Vt,!0),pn.length=pn.area=0),Bt.forEach(tt)}}function ct(kt){var Bt=kt.children;if(Bt&&Bt.length){var It,Kt=xe(kt),qt=Bt.slice(),Vt=[];for(He(qt,Kt.dx*Kt.dy/kt.value),Vt.area=0;It=qt.pop();)Vt.push(It),Vt.area+=It.area,It.z!=null&&(wt(Vt,It.z?Kt.dx:Kt.dy,Kt,!qt.length),Vt.length=Vt.area=0);Bt.forEach(ct)}}function dt(kt,Bt){for(var It,Kt=kt.area,qt=0,Vt=1/0,pn=-1,yn=kt.length;++pn<yn;)(It=kt[pn].area)&&(It<Vt&&(Vt=It),It>qt&&(qt=It));return Bt*=Bt,(Kt*=Kt)?Math.max(Bt*qt*Ue/Kt,Kt/(Bt*Vt*Ue)):1/0}function wt(kt,Bt,It,Kt){var qt,Vt=-1,pn=kt.length,yn=It.x,Sn=It.y,On=Bt?$(kt.area/Bt):0;if(Bt==It.dx){for((Kt||On>It.dy)&&(On=It.dy);++Vt<pn;)(qt=kt[Vt]).x=yn,qt.y=Sn,qt.dy=On,yn+=qt.dx=Math.min(It.x+It.dx-yn,On?$(qt.area/On):0);qt.z=!0,qt.dx+=It.x+It.dx-yn,It.y+=On,It.dy-=On}else{for((Kt||On>It.dx)&&(On=It.dx);++Vt<pn;)(qt=kt[Vt]).x=yn,qt.y=Sn,qt.dx=On,Sn+=qt.dy=Math.min(It.y+It.dy-Sn,On?$(qt.area/On):0);qt.z=!1,qt.dy+=It.y+It.dy-Sn,It.x+=On,It.dx-=On}}function Et(kt){var Bt=L||H(kt),It=Bt[0];return It.x=It.y=0,It.value?(It.dx=ne[0],It.dy=ne[1]):It.dx=It.dy=0,L&&H.revalue(It),He([It],It.dx*It.dy/It.value),(L?ct:tt)(It),Le&&(L=Bt),Bt}return Et.size=function(kt){return arguments.length?(ne=kt,Et):ne},Et.padding=function(kt){if(!arguments.length)return ce;function Bt(Kt){return Wl(Kt,kt)}var It;return xe=(ce=kt)==null?Tl:(It=typeof kt)=="function"?function(Kt){var qt=kt.call(Et,Kt,Kt.depth);return qt==null?Tl(Kt):Wl(Kt,typeof qt=="number"?[qt,qt,qt,qt]:qt)}:(It==="number"&&(kt=[kt,kt,kt,kt]),Bt),Et},Et.round=function(kt){return arguments.length?($=kt?Math.round:Number,Et):$!=Number},Et.sticky=function(kt){return arguments.length?(Le=kt,L=null,Et):Le},Et.ratio=function(kt){return arguments.length?(Ue=kt,Et):Ue},Et.mode=function(kt){return arguments.length?(Re=kt+"",Et):Re},Qo(Et,H)},a.random={normal:function(L,H){var $=arguments.length;return $<2&&(H=1),$<1&&(L=0),function(){var ne,ce,xe;do xe=(ne=2*Math.random()-1)*ne+(ce=2*Math.random()-1)*ce;while(!xe||xe>1);return L+H*ne*Math.sqrt(-2*Math.log(xe)/xe)}},logNormal:function(){var L=a.random.normal.apply(a,arguments);return function(){return Math.exp(L())}},bates:function(L){var H=a.random.irwinHall(L);return function(){return H()/L}},irwinHall:function(L){return function(){for(var H=0,$=0;$<L;$++)H+=Math.random();return H}}},a.scale={};var Pa={floor:O,ceil:O};function Ml(L,H,$,ne){var ce=[],xe=[],Le=0,Re=Math.min(L.length,H.length)-1;for(L[Re]<L[0]&&(L=L.slice().reverse(),H=H.slice().reverse());++Le<=Re;)ce.push($(L[Le-1],L[Le])),xe.push(ne(H[Le-1],H[Le]));return function(Ue){var He=a.bisect(L,Ue,1,Re)-1;return xe[He](ce[He](Ue))}}function uo(L,H,$,ne){var ce,xe;function Le(){var Ue=Math.min(L.length,H.length)>2?Ml:co,He=ne?Kc:Zc;return ce=Ue(L,H,He,$),xe=Ue(H,L,He,lo),Re}function Re(Ue){return ce(Ue)}return Re.invert=function(Ue){return xe(Ue)},Re.domain=function(Ue){return arguments.length?(L=Ue.map(Number),Le()):L},Re.range=function(Ue){return arguments.length?(H=Ue,Le()):H},Re.rangeRound=function(Ue){return Re.range(Ue).interpolate(fc)},Re.clamp=function(Ue){return arguments.length?(ne=Ue,Le()):ne},Re.interpolate=function(Ue){return arguments.length?($=Ue,Le()):$},Re.ticks=function(Ue){return ba(L,Ue)},Re.tickFormat=function(Ue,He){return d3_scale_linearTickFormat(L,Ue,He)},Re.nice=function(Ue){return xa(L,Ue),Le()},Re.copy=function(){return uo(L,H,$,ne)},Le()}function da(L,H){return a.rebind(L,H,"range","rangeRound","interpolate","clamp")}function xa(L,H){return bs(L,_s(ki(L,H)[2])),bs(L,_s(ki(L,H)[2])),L}function ki(L,H){H==null&&(H=10);var $=kl(L),ne=$[1]-$[0],ce=Math.pow(10,Math.floor(Math.log(ne/H)/Math.LN10)),xe=H/ne*ce;return xe<=.15?ce*=10:xe<=.35?ce*=5:xe<=.75&&(ce*=2),$[0]=Math.ceil($[0]/ce)*ce,$[1]=Math.floor($[1]/ce)*ce+.5*ce,$[2]=ce,$}function ba(L,H){return a.range.apply(a,ki(L,H))}function No(L,H,$,ne){function ce(Re){return($?Math.log(Re<0?0:Re):-Math.log(Re>0?0:-Re))/Math.log(H)}function xe(Re){return $?Math.pow(H,Re):-Math.pow(H,-Re)}function Le(Re){return L(ce(Re))}return Le.invert=function(Re){return xe(L.invert(Re))},Le.domain=function(Re){return arguments.length?($=Re[0]>=0,L.domain((ne=Re.map(Number)).map(ce)),Le):ne},Le.base=function(Re){return arguments.length?(H=+Re,L.domain(ne.map(ce)),Le):H},Le.nice=function(){var Re=bs(ne.map(ce),$?Math:Hs);return L.domain(Re),ne=Re.map(xe),Le},Le.ticks=function(){var Re=kl(ne),Ue=[],He=Re[0],tt=Re[1],ct=Math.floor(ce(He)),dt=Math.ceil(ce(tt)),wt=H%1?2:H;if(isFinite(dt-ct)){if($){for(;ct<dt;ct++)for(var Et=1;Et<wt;Et++)Ue.push(xe(ct)*Et);Ue.push(xe(ct))}else for(Ue.push(xe(ct));ct++<dt;)for(Et=wt-1;Et>0;Et--)Ue.push(xe(ct)*Et);for(ct=0;Ue[ct]<He;ct++);for(dt=Ue.length;Ue[dt-1]>tt;dt--);Ue=Ue.slice(ct,dt)}return Ue},Le.copy=function(){return No(L.copy(),H,$,ne)},da(Le,L)}a.scale.linear=function(){return uo([0,1],[0,1],lo,!1)},a.scale.log=function(){return No(a.scale.linear().domain([0,1]),10,!0,[1,10])};var Hs={floor:function(L){return-Math.ceil(-L)},ceil:function(L){return-Math.floor(-L)}};function Ao(L,H,$){var ne=ws(H),ce=ws(1/H);function xe(Le){return L(ne(Le))}return xe.invert=function(Le){return ce(L.invert(Le))},xe.domain=function(Le){return arguments.length?(L.domain(($=Le.map(Number)).map(ne)),xe):$},xe.ticks=function(Le){return ba($,Le)},xe.tickFormat=function(Le,Re){return d3_scale_linearTickFormat($,Le,Re)},xe.nice=function(Le){return xe.domain(xa($,Le))},xe.exponent=function(Le){return arguments.length?(ne=ws(H=Le),ce=ws(1/H),L.domain($.map(ne)),xe):H},xe.copy=function(){return Ao(L.copy(),H,$)},da(xe,L)}function ws(L){return function(H){return H<0?-Math.pow(-H,L):Math.pow(H,L)}}function Na(L,H){var $,ne,ce;function xe(Re){return ne[(($.get(Re)||(H.t==="range"?$.set(Re,L.push(Re)):NaN))-1)%ne.length]}function Le(Re,Ue){return a.range(L.length).map(function(He){return Re+Ue*He})}return xe.domain=function(Re){if(!arguments.length)return L;L=[],$=new v;for(var Ue,He=-1,tt=Re.length;++He<tt;)$.has(Ue=Re[He])||$.set(Ue,L.push(Ue));return xe[H.t].apply(xe,H.a)},xe.range=function(Re){return arguments.length?(ne=Re,ce=0,H={t:"range",a:arguments},xe):ne},xe.rangePoints=function(Re,Ue){arguments.length<2&&(Ue=0);var He=Re[0],tt=Re[1],ct=L.length<2?(He=(He+tt)/2,0):(tt-He)/(L.length-1+Ue);return ne=Le(He+ct*Ue/2,ct),ce=0,H={t:"rangePoints",a:arguments},xe},xe.rangeRoundPoints=function(Re,Ue){arguments.length<2&&(Ue=0);var He=Re[0],tt=Re[1],ct=L.length<2?(He=tt=Math.round((He+tt)/2),0):(tt-He)/(L.length-1+Ue)|0;return ne=Le(He+Math.round(ct*Ue/2+(tt-He-(L.length-1+Ue)*ct)/2),ct),ce=0,H={t:"rangeRoundPoints",a:arguments},xe},xe.rangeBands=function(Re,Ue,He){arguments.length<2&&(Ue=0),arguments.length<3&&(He=Ue);var tt=Re[1]<Re[0],ct=Re[tt-0],dt=(Re[1-tt]-ct)/(L.length-Ue+2*He);return ne=Le(ct+dt*He,dt),tt&&ne.reverse(),ce=dt*(1-Ue),H={t:"rangeBands",a:arguments},xe},xe.rangeRoundBands=function(Re,Ue,He){arguments.length<2&&(Ue=0),arguments.length<3&&(He=Ue);var tt=Re[1]<Re[0],ct=Re[tt-0],dt=Re[1-tt],wt=Math.floor((dt-ct)/(L.length-Ue+2*He));return ne=Le(ct+Math.round((dt-ct-(L.length-Ue)*wt)/2),wt),tt&&ne.reverse(),ce=Math.round(wt*(1-Ue)),H={t:"rangeRoundBands",a:arguments},xe},xe.rangeBand=function(){return ce},xe.rangeExtent=function(){return kl(H.a[0])},xe.copy=function(){return Na(L,H)},xe.domain(L)}a.scale.pow=function(){return Ao(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return Na([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(Gs)},a.scale.category20=function(){return a.scale.ordinal().range(ts)},a.scale.category20b=function(){return a.scale.ordinal().range(fo)},a.scale.category20c=function(){return a.scale.ordinal().range(ho)};var Gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Qt),ts=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Qt),fo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Qt),ho=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Qt);function Si(L,H){var $;function ne(){var xe=0,Le=H.length;for($=[];++xe<Le;)$[xe-1]=a.quantile(L,xe/Le);return ce}function ce(xe){if(!isNaN(xe=+xe))return H[a.bisect($,xe)]}return ce.domain=function(xe){return arguments.length?(L=xe.map(d).filter(u).sort(c),ne()):L},ce.range=function(xe){return arguments.length?(H=xe,ne()):H},ce.quantiles=function(){return $},ce.invertExtent=function(xe){return(xe=H.indexOf(xe))<0?[NaN,NaN]:[xe>0?$[xe-1]:L[0],xe<$.length?$[xe]:L[L.length-1]]},ce.copy=function(){return Si(L,H)},ne()}function Mo(L,H,$){var ne,ce;function xe(Re){return $[Math.max(0,Math.min(ce,Math.floor(ne*(Re-L))))]}function Le(){return ne=$.length/(H-L),ce=$.length-1,xe}return xe.domain=function(Re){return arguments.length?(L=+Re[0],H=+Re[Re.length-1],Le()):[L,H]},xe.range=function(Re){return arguments.length?($=Re,Le()):$},xe.invertExtent=function(Re){return[Re=(Re=$.indexOf(Re))<0?NaN:Re/ne+L,Re+1/ne]},xe.copy=function(){return Mo(L,H,$)},Le()}function Lr(L,H){function $(ne){if(ne<=ne)return H[a.bisect(L,ne)]}return $.domain=function(ne){return arguments.length?(L=ne,$):L},$.range=function(ne){return arguments.length?(H=ne,$):H},$.invertExtent=function(ne){return ne=H.indexOf(ne),[L[ne-1],L[ne]]},$.copy=function(){return Lr(L,H)},$}function Sl(L){function H($){return+$}return H.invert=H,H.domain=H.range=function($){return arguments.length?(L=$.map(H),H):L},H.ticks=function($){return ba(L,$)},H.tickFormat=function($,ne){return d3_scale_linearTickFormat(L,$,ne)},H.copy=function(){return Sl(L)},H}function dc(){return 0}a.scale.quantile=function(){return Si([],[])},a.scale.quantize=function(){return Mo(0,1,[0,1])},a.scale.threshold=function(){return Lr([.5],[0,1])},a.scale.identity=function(){return Sl([0,1])},a.svg={},a.svg.arc=function(){var L=ks,H=qs,$=dc,ne=Ts,ce=nl,xe=kr,Le=Cl;function Re(){var He=Math.max(0,+L.apply(this,arguments)),tt=Math.max(0,+H.apply(this,arguments)),ct=ce.apply(this,arguments)-Ge,dt=xe.apply(this,arguments)-Ge,wt=Math.abs(dt-ct),Et=ct>dt?0:1;if(tt<He&&(kt=tt,tt=He,He=kt),wt>=Ct)return Ue(tt,Et)+(He?Ue(He,1-Et):"")+"Z";var kt,Bt,It,Kt,qt,Vt,pn,yn,Sn,On,Hn,sr,dr=0,Zn=0,fr=[];if((Kt=(+Le.apply(this,arguments)||0)/2)&&(It=ne===Ts?Math.sqrt(He*He+tt*tt):+ne.apply(this,arguments),Et||(Zn*=-1),tt&&(Zn=Ye(It/tt*Math.sin(Kt))),He&&(dr=Ye(It/He*Math.sin(Kt)))),tt){qt=tt*Math.cos(ct+Zn),Vt=tt*Math.sin(ct+Zn),pn=tt*Math.cos(dt-Zn),yn=tt*Math.sin(dt-Zn);var Ar=Math.abs(dt-ct-2*Zn)<=Ot?0:1;if(Zn&&ns(qt,Vt,pn,yn)===Et^Ar){var Or=(ct+dt)/2;qt=tt*Math.cos(Or),Vt=tt*Math.sin(Or),pn=yn=null}}else qt=Vt=0;if(He){Sn=He*Math.cos(dt-dr),On=He*Math.sin(dt-dr),Hn=He*Math.cos(ct+dr),sr=He*Math.sin(ct+dr);var ir=Math.abs(ct-dt+2*dr)<=Ot?0:1;if(dr&&ns(Sn,On,Hn,sr)===1-Et^ir){var ur=(ct+dt)/2;Sn=He*Math.cos(ur),On=He*Math.sin(ur),Hn=sr=null}}else Sn=On=0;if(wt>$e&&(kt=Math.min(Math.abs(tt-He)/2,+$.apply(this,arguments)))>.001){Bt=He<tt^Et?0:1;var Cr=kt,pr=kt;if(wt<Ot){var Ir=Hn==null?[Sn,On]:pn==null?[qt,Vt]:Lt([qt,Vt],[Hn,sr],[pn,yn],[Sn,On]),Fr=qt-Ir[0],Zr=Vt-Ir[1],Kr=pn-Ir[0],ti=yn-Ir[1],oi=1/Math.sin(Math.acos((Fr*Kr+Zr*ti)/(Math.sqrt(Fr*Fr+Zr*Zr)*Math.sqrt(Kr*Kr+ti*ti)))/2),Ei=Math.sqrt(Ir[0]*Ir[0]+Ir[1]*Ir[1]);pr=Math.min(kt,(He-Ei)/(oi-1)),Cr=Math.min(kt,(tt-Ei)/(oi+1))}if(pn!=null){var Xi=pa(Hn==null?[Sn,On]:[Hn,sr],[qt,Vt],tt,Cr,Et),Oa=pa([pn,yn],[Sn,On],tt,Cr,Et);kt===Cr?fr.push("M",Xi[0],"A",Cr,",",Cr," 0 0,",Bt," ",Xi[1],"A",tt,",",tt," 0 ",1-Et^ns(Xi[1][0],Xi[1][1],Oa[1][0],Oa[1][1]),",",Et," ",Oa[1],"A",Cr,",",Cr," 0 0,",Bt," ",Oa[0]):fr.push("M",Xi[0],"A",Cr,",",Cr," 0 1,",Bt," ",Oa[0])}else fr.push("M",qt,",",Vt);if(Hn!=null){var ma=pa([qt,Vt],[Hn,sr],He,-pr,Et),Sa=pa([Sn,On],pn==null?[qt,Vt]:[pn,yn],He,-pr,Et);kt===pr?fr.push("L",Sa[0],"A",pr,",",pr," 0 0,",Bt," ",Sa[1],"A",He,",",He," 0 ",Et^ns(Sa[1][0],Sa[1][1],ma[1][0],ma[1][1]),",",1-Et," ",ma[1],"A",pr,",",pr," 0 0,",Bt," ",ma[0]):fr.push("L",Sa[0],"A",pr,",",pr," 0 0,",Bt," ",ma[0])}else fr.push("L",Sn,",",On)}else fr.push("M",qt,",",Vt),pn!=null&&fr.push("A",tt,",",tt," 0 ",Ar,",",Et," ",pn,",",yn),fr.push("L",Sn,",",On),Hn!=null&&fr.push("A",He,",",He," 0 ",ir,",",1-Et," ",Hn,",",sr);return fr.push("Z"),fr.join("")}function Ue(He,tt){return"M0,"+He+"A"+He+","+He+" 0 1,"+tt+" 0,"+-He+"A"+He+","+He+" 0 1,"+tt+" 0,"+He}return Re.innerRadius=function(He){return arguments.length?(L=jn(He),Re):L},Re.outerRadius=function(He){return arguments.length?(H=jn(He),Re):H},Re.cornerRadius=function(He){return arguments.length?($=jn(He),Re):$},Re.padRadius=function(He){return arguments.length?(ne=He==Ts?Ts:jn(He),Re):ne},Re.startAngle=function(He){return arguments.length?(ce=jn(He),Re):ce},Re.endAngle=function(He){return arguments.length?(xe=jn(He),Re):xe},Re.padAngle=function(He){return arguments.length?(Le=jn(He),Re):Le},Re.centroid=function(){var He=(+L.apply(this,arguments)+ +H.apply(this,arguments))/2,tt=(+ce.apply(this,arguments)+ +xe.apply(this,arguments))/2-Ge;return[Math.cos(tt)*He,Math.sin(tt)*He]},Re};var Ts="auto";function ks(L){return L.innerRadius}function qs(L){return L.outerRadius}function nl(L){return L.startAngle}function kr(L){return L.endAngle}function Cl(L){return L&&L.padAngle}function ns(L,H,$,ne){return(L-$)*H-(H-ne)*L>0?0:1}function pa(L,H,$,ne,ce){var xe=L[0]-H[0],Le=L[1]-H[1],Re=(ce?ne:-ne)/Math.sqrt(xe*xe+Le*Le),Ue=Re*Le,He=-Re*xe,tt=L[0]+Ue,ct=L[1]+He,dt=H[0]+Ue,wt=H[1]+He,Et=(tt+dt)/2,kt=(ct+wt)/2,Bt=dt-tt,It=wt-ct,Kt=Bt*Bt+It*It,qt=$-ne,Vt=tt*wt-dt*ct,pn=(It<0?-1:1)*Math.sqrt(Math.max(0,qt*qt*Kt-Vt*Vt)),yn=(Vt*It-Bt*pn)/Kt,Sn=(-Vt*Bt-It*pn)/Kt,On=(Vt*It+Bt*pn)/Kt,Hn=(-Vt*Bt+It*pn)/Kt,sr=yn-Et,dr=Sn-kt,Zn=On-Et,fr=Hn-kt;return sr*sr+dr*dr>Zn*Zn+fr*fr&&(yn=On,Sn=Hn),[[yn-Ue,Sn-He],[yn*$/qt,Sn*$/qt]]}function As(){return!0}function So(L){var H=qn,$=Vn,ne=As,ce=Da,xe=ce.key,Le=.7;function Re(Ue){var He,tt=[],ct=[],dt=-1,wt=Ue.length,Et=jn(H),kt=jn($);function Bt(){tt.push("M",ce(L(ct),Le))}for(;++dt<wt;)ne.call(this,He=Ue[dt],dt)?ct.push([+Et.call(this,He,dt),+kt.call(this,He,dt)]):ct.length&&(Bt(),ct=[]);return ct.length&&Bt(),tt.length?tt.join(""):null}return Re.x=function(Ue){return arguments.length?(H=Ue,Re):H},Re.y=function(Ue){return arguments.length?($=Ue,Re):$},Re.defined=function(Ue){return arguments.length?(ne=Ue,Re):ne},Re.interpolate=function(Ue){return arguments.length?(xe=typeof Ue=="function"?ce=Ue:(ce=po.get(Ue)||Da).key,Re):xe},Re.tension=function(Ue){return arguments.length?(Le=Ue,Re):Le},Re}a.svg.line=function(){return So(O)};var po=a.map({linear:Da,"linear-closed":jo,step:function(L){for(var H=0,$=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++H<$;)ce.push("H",(ne[0]+(ne=L[H])[0])/2,"V",ne[1]);return $>1&&ce.push("H",ne[0]),ce.join("")},"step-before":mo,"step-after":rs,basis:si,"basis-open":function(L){if(L.length<4)return Da(L);for(var H,$=[],ne=-1,ce=L.length,xe=[0],Le=[0];++ne<3;)H=L[ne],xe.push(H[0]),Le.push(H[1]);for($.push(_a(Ua,xe)+","+_a(Ua,Le)),--ne;++ne<ce;)H=L[ne],xe.shift(),xe.push(H[0]),Le.shift(),Le.push(H[1]),rl($,xe,Le);return $.join("")},"basis-closed":function(L){for(var H,$,ne=-1,ce=L.length,xe=ce+4,Le=[],Re=[];++ne<4;)$=L[ne%ce],Le.push($[0]),Re.push($[1]);for(H=[_a(Ua,Le),",",_a(Ua,Re)],--ne;++ne<xe;)$=L[ne%ce],Le.shift(),Le.push($[0]),Re.shift(),Re.push($[1]),rl(H,Le,Re);return H.join("")},bundle:function(L,H){var $=L.length-1;if($)for(var ne,ce,xe=L[0][0],Le=L[0][1],Re=L[$][0]-xe,Ue=L[$][1]-Le,He=-1;++He<=$;)ce=He/$,(ne=L[He])[0]=H*ne[0]+(1-H)*(xe+ce*Re),ne[1]=H*ne[1]+(1-H)*(Le+ce*Ue);return si(L)},cardinal:function(L,H){return L.length<3?Da(L):L[0]+El(L,Ms(L,H))},"cardinal-open":function(L,H){return L.length<4?Da(L):L[1]+El(L.slice(1,-1),Ms(L,H))},"cardinal-closed":function(L,H){return L.length<3?jo(L):L[0]+El((L.push(L[0]),L),Ms([L[L.length-2]].concat(L,[L[1]]),H))},monotone:function(L){return L.length<3?Da(L):L[0]+El(L,function(H){for(var $,ne,ce,xe,Le=[],Re=function(tt){for(var ct=0,dt=tt.length-1,wt=[],Et=tt[0],kt=tt[1],Bt=wt[0]=il(Et,kt);++ct<dt;)wt[ct]=(Bt+(Bt=il(Et=kt,kt=tt[ct+1])))/2;return wt[ct]=Bt,wt}(H),Ue=-1,He=H.length-1;++Ue<He;)$=il(H[Ue],H[Ue+1]),m($)<$e?Re[Ue]=Re[Ue+1]=0:(xe=(ne=Re[Ue]/$)*ne+(ce=Re[Ue+1]/$)*ce)>9&&(xe=3*$/Math.sqrt(xe),Re[Ue]=xe*ne,Re[Ue+1]=xe*ce);for(Ue=-1;++Ue<=He;)xe=(H[Math.min(He,Ue+1)][0]-H[Math.max(0,Ue-1)][0])/(6*(1+Re[Ue]*Re[Ue])),Le.push([xe||0,Re[Ue]*xe||0]);return Le}(L))}});function Da(L){return L.length>1?L.join("L"):L+"Z"}function jo(L){return L.join("L")+"Z"}function mo(L){for(var H=0,$=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++H<$;)ce.push("V",(ne=L[H])[1],"H",ne[0]);return ce.join("")}function rs(L){for(var H=0,$=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++H<$;)ce.push("H",(ne=L[H])[0],"V",ne[1]);return ce.join("")}function El(L,H){if(H.length<1||L.length!=H.length&&L.length!=H.length+2)return Da(L);var $=L.length!=H.length,ne="",ce=L[0],xe=L[1],Le=H[0],Re=Le,Ue=1;if($&&(ne+="Q"+(xe[0]-2*Le[0]/3)+","+(xe[1]-2*Le[1]/3)+","+xe[0]+","+xe[1],ce=L[1],Ue=2),H.length>1){Re=H[1],xe=L[Ue],Ue++,ne+="C"+(ce[0]+Le[0])+","+(ce[1]+Le[1])+","+(xe[0]-Re[0])+","+(xe[1]-Re[1])+","+xe[0]+","+xe[1];for(var He=2;He<H.length;He++,Ue++)xe=L[Ue],Re=H[He],ne+="S"+(xe[0]-Re[0])+","+(xe[1]-Re[1])+","+xe[0]+","+xe[1]}if($){var tt=L[Ue];ne+="Q"+(xe[0]+2*Re[0]/3)+","+(xe[1]+2*Re[1]/3)+","+tt[0]+","+tt[1]}return ne}function Ms(L,H){for(var $,ne=[],ce=(1-H)/2,xe=L[0],Le=L[1],Re=1,Ue=L.length;++Re<Ue;)$=xe,xe=Le,Le=L[Re],ne.push([ce*(Le[0]-$[0]),ce*(Le[1]-$[1])]);return ne}function si(L){if(L.length<3)return Da(L);var H=1,$=L.length,ne=L[0],ce=ne[0],xe=ne[1],Le=[ce,ce,ce,(ne=L[1])[0]],Re=[xe,xe,xe,ne[1]],Ue=[ce,",",xe,"L",_a(Ua,Le),",",_a(Ua,Re)];for(L.push(L[$-1]);++H<=$;)ne=L[H],Le.shift(),Le.push(ne[0]),Re.shift(),Re.push(ne[1]),rl(Ue,Le,Re);return L.pop(),Ue.push("L",ne),Ue.join("")}function _a(L,H){return L[0]*H[0]+L[1]*H[1]+L[2]*H[2]+L[3]*H[3]}po.forEach(function(L,H){H.key=L,H.closed=/-closed$/.test(L)});var ja=[0,2/3,1/3,0],Uo=[0,1/3,2/3,0],Ua=[0,1/6,2/3,1/6];function rl(L,H,$){L.push("C",_a(ja,H),",",_a(ja,$),",",_a(Uo,H),",",_a(Uo,$),",",_a(Ua,H),",",_a(Ua,$))}function il(L,H){return(H[1]-L[1])/(H[0]-L[0])}function Va(L){for(var H,$,ne,ce=-1,xe=L.length;++ce<xe;)$=(H=L[ce])[0],ne=H[1]-Ge,H[0]=$*Math.cos(ne),H[1]=$*Math.sin(ne);return L}function ai(L){var H=qn,$=qn,ne=0,ce=Vn,xe=As,Le=Da,Re=Le.key,Ue=Le,He="L",tt=.7;function ct(dt){var wt,Et,kt,Bt=[],It=[],Kt=[],qt=-1,Vt=dt.length,pn=jn(H),yn=jn(ne),Sn=H===$?function(){return Et}:jn($),On=ne===ce?function(){return kt}:jn(ce);function Hn(){Bt.push("M",Le(L(Kt),tt),He,Ue(L(It.reverse()),tt),"Z")}for(;++qt<Vt;)xe.call(this,wt=dt[qt],qt)?(It.push([Et=+pn.call(this,wt,qt),kt=+yn.call(this,wt,qt)]),Kt.push([+Sn.call(this,wt,qt),+On.call(this,wt,qt)])):It.length&&(Hn(),It=[],Kt=[]);return It.length&&Hn(),Bt.length?Bt.join(""):null}return ct.x=function(dt){return arguments.length?(H=$=dt,ct):$},ct.x0=function(dt){return arguments.length?(H=dt,ct):H},ct.x1=function(dt){return arguments.length?($=dt,ct):$},ct.y=function(dt){return arguments.length?(ne=ce=dt,ct):ce},ct.y0=function(dt){return arguments.length?(ne=dt,ct):ne},ct.y1=function(dt){return arguments.length?(ce=dt,ct):ce},ct.defined=function(dt){return arguments.length?(xe=dt,ct):xe},ct.interpolate=function(dt){return arguments.length?(Re=typeof dt=="function"?Le=dt:(Le=po.get(dt)||Da).key,Ue=Le.reverse||Le,He=Le.closed?"M":"L",ct):Re},ct.tension=function(dt){return arguments.length?(tt=dt,ct):tt},ct}function Vo(L){return L.source}function Ws(L){return L.target}function Co(L){return L.radius}function al(L){return[L.x,L.y]}function ol(){return 64}function Eo(){return"circle"}function Ci(L){var H=Math.sqrt(L/Ot);return"M0,"+H+"A"+H+","+H+" 0 1,1 0,"+-H+"A"+H+","+H+" 0 1,1 0,"+H+"Z"}a.svg.line.radial=function(){var L=So(Va);return L.radius=L.x,delete L.x,L.angle=L.y,delete L.y,L},mo.reverse=rs,rs.reverse=mo,a.svg.area=function(){return ai(O)},a.svg.area.radial=function(){var L=ai(Va);return L.radius=L.x,delete L.x,L.innerRadius=L.x0,delete L.x0,L.outerRadius=L.x1,delete L.x1,L.angle=L.y,delete L.y,L.startAngle=L.y0,delete L.y0,L.endAngle=L.y1,delete L.y1,L},a.svg.chord=function(){var L=Vo,H=Ws,$=Co,ne=nl,ce=kr;function xe(He,tt){var ct,dt,wt=Le(this,L,He,tt),Et=Le(this,H,He,tt);return"M"+wt.p0+Re(wt.r,wt.p1,wt.a1-wt.a0)+(dt=Et,((ct=wt).a0==dt.a0&&ct.a1==dt.a1?Ue(wt.r,wt.p1,wt.r,wt.p0):Ue(wt.r,wt.p1,Et.r,Et.p0)+Re(Et.r,Et.p1,Et.a1-Et.a0)+Ue(Et.r,Et.p1,wt.r,wt.p0))+"Z")}function Le(He,tt,ct,dt){var wt=tt.call(He,ct,dt),Et=$.call(He,wt,dt),kt=ne.call(He,wt,dt)-Ge,Bt=ce.call(He,wt,dt)-Ge;return{r:Et,a0:kt,a1:Bt,p0:[Et*Math.cos(kt),Et*Math.sin(kt)],p1:[Et*Math.cos(Bt),Et*Math.sin(Bt)]}}function Re(He,tt,ct){return"A"+He+","+He+" 0 "+ +(ct>Ot)+",1 "+tt}function Ue(He,tt,ct,dt){return"Q 0,0 "+dt}return xe.radius=function(He){return arguments.length?($=jn(He),xe):$},xe.source=function(He){return arguments.length?(L=jn(He),xe):L},xe.target=function(He){return arguments.length?(H=jn(He),xe):H},xe.startAngle=function(He){return arguments.length?(ne=jn(He),xe):ne},xe.endAngle=function(He){return arguments.length?(ce=jn(He),xe):ce},xe},a.svg.diagonal=function(){var L=Vo,H=Ws,$=al;function ne(ce,xe){var Le=L.call(this,ce,xe),Re=H.call(this,ce,xe),Ue=(Le.y+Re.y)/2,He=[Le,{x:Le.x,y:Ue},{x:Re.x,y:Ue},Re];return"M"+(He=He.map($))[0]+"C"+He[1]+" "+He[2]+" "+He[3]}return ne.source=function(ce){return arguments.length?(L=jn(ce),ne):L},ne.target=function(ce){return arguments.length?(H=jn(ce),ne):H},ne.projection=function(ce){return arguments.length?($=ce,ne):$},ne},a.svg.diagonal.radial=function(){var L=a.svg.diagonal(),H=al,$=L.projection;return L.projection=function(ne){return arguments.length?$(function(ce){return function(){var xe=ce.apply(this,arguments),Le=xe[0],Re=xe[1]-Ge;return[Le*Math.cos(Re),Le*Math.sin(Re)]}}(H=ne)):H},L},a.svg.symbol=function(){var L=Eo,H=ol;function $(ne,ce){return(Ys.get(L.call(this,ne,ce))||Ci)(H.call(this,ne,ce))}return $.type=function(ne){return arguments.length?(L=jn(ne),$):L},$.size=function(ne){return arguments.length?(H=jn(ne),$):H},$};var Ys=a.map({circle:Ci,cross:function(L){var H=Math.sqrt(L/5)/2;return"M"+-3*H+","+-H+"H"+-H+"V"+-3*H+"H"+H+"V"+-H+"H"+3*H+"V"+H+"H"+H+"V"+3*H+"H"+-H+"V"+H+"H"+-3*H+"Z"},diamond:function(L){var H=Math.sqrt(L/(2*Ur)),$=H*Ur;return"M0,"+-H+"L"+$+",0 0,"+H+" "+-$+",0Z"},square:function(L){var H=Math.sqrt(L)/2;return"M"+-H+","+-H+"L"+H+","+-H+" "+H+","+H+" "+-H+","+H+"Z"},"triangle-down":function(L){var H=Math.sqrt(L/Dr),$=H*Dr/2;return"M0,"+$+"L"+H+","+-$+" "+-H+","+-$+"Z"},"triangle-up":function(L){var H=Math.sqrt(L/Dr),$=H*Dr/2;return"M0,"+-$+"L"+H+","+$+" "+-H+","+$+"Z"}});a.svg.symbolTypes=Ys.keys();var Dr=Math.sqrt(3),Ur=Math.tan(30*Xe);ve.transition=function(L){for(var H,$,ne=$i||++Ec,ce=Pi(L),xe=[],Le=Go||{time:Date.now(),ease:zo,delay:0,duration:250},Re=-1,Ue=this.length;++Re<Ue;){xe.push(H=[]);for(var He=this[Re],tt=-1,ct=He.length;++tt<ct;)($=He[tt])&&Za($,tt,ce,ne,Le),H.push($)}return is(xe,ce,ne)},ve.interrupt=function(L){return this.each(L==null?no:Ho(Pi(L)))};var no=Ho(Pi());function Ho(L){return function(){var H,$,ne;(H=this[L])&&(ne=H[$=H.active])&&(ne.timer.c=null,ne.timer.t=NaN,--H.count?delete H[$]:delete this[L],H.active+=.5,ne.event&&ne.event.interrupt.call(this,this.__data__,ne.index))}}function is(L,H,$){return X(L,yi),L.namespace=H,L.id=$,L}var $i,Go,yi=[],Ec=0;function ro(L,H,$,ne){var ce=L.id,xe=L.namespace;return _e(L,typeof $=="function"?function(Le,Re,Ue){Le[xe][ce].tween.set(H,ne($.call(Le,Le.__data__,Re,Ue)))}:($=ne($),function(Le){Le[xe][ce].tween.set(H,$)}))}function _i(L){return L==null&&(L=""),function(){this.textContent=L}}function Pi(L){return L==null?"__transition__":"__transition_"+L+"__"}function Za(L,H,$,ne,ce){var xe,Le,Re,Ue,He,tt=L[$]||(L[$]={active:0,count:0}),ct=tt[ne];function dt(Et){var kt=tt.active,Bt=tt[kt];for(var It in Bt&&(Bt.timer.c=null,Bt.timer.t=NaN,--tt.count,delete tt[kt],Bt.event&&Bt.event.interrupt.call(L,L.__data__,Bt.index)),tt)if(+It<ne){var Kt=tt[It];Kt.timer.c=null,Kt.timer.t=NaN,--tt.count,delete tt[It]}Le.c=wt,rn(function(){return Le.c&&wt(Et||1)&&(Le.c=null,Le.t=NaN),1},0,xe),tt.active=ne,ct.event&&ct.event.start.call(L,L.__data__,H),He=[],ct.tween.forEach(function(qt,Vt){(Vt=Vt.call(L,L.__data__,H))&&He.push(Vt)}),Ue=ct.ease,Re=ct.duration}function wt(Et){for(var kt=Et/Re,Bt=Ue(kt),It=He.length;It>0;)He[--It].call(L,Bt);if(kt>=1)return ct.event&&ct.event.end.call(L,L.__data__,H),--tt.count?delete tt[ne]:delete L[$],1}ct||(xe=ce.time,Le=rn(function(Et){var kt=ct.delay;if(Le.t=kt+xe,kt<=Et)return dt(Et-kt);Le.c=dt},0,xe),ct=tt[ne]={tween:new v,time:xe,timer:Le,delay:ce.delay,duration:ce.duration,ease:ce.ease,index:H},ce=null,++tt.count)}yi.call=ve.call,yi.empty=ve.empty,yi.node=ve.node,yi.size=ve.size,a.transition=function(L,H){return L&&L.transition?$i?L.transition(H):L:a.selection().transition(L)},a.transition.prototype=yi,yi.select=function(L){var H,$,ne,ce=this.id,xe=this.namespace,Le=[];L=ye(L);for(var Re=-1,Ue=this.length;++Re<Ue;){Le.push(H=[]);for(var He=this[Re],tt=-1,ct=He.length;++tt<ct;)(ne=He[tt])&&($=L.call(ne,ne.__data__,tt,Re))?("__data__"in ne&&($.__data__=ne.__data__),Za($,tt,xe,ce,ne[xe][ce]),H.push($)):H.push(null)}return is(Le,xe,ce)},yi.selectAll=function(L){var H,$,ne,ce,xe,Le=this.id,Re=this.namespace,Ue=[];L=pe(L);for(var He=-1,tt=this.length;++He<tt;)for(var ct=this[He],dt=-1,wt=ct.length;++dt<wt;)if(ne=ct[dt]){xe=ne[Re][Le],$=L.call(ne,ne.__data__,dt,He),Ue.push(H=[]);for(var Et=-1,kt=$.length;++Et<kt;)(ce=$[Et])&&Za(ce,Et,Re,Le,xe),H.push(ce)}return is(Ue,Re,Le)},yi.filter=function(L){var H,$,ne=[];typeof L!="function"&&(L=De(L));for(var ce=0,xe=this.length;ce<xe;ce++){ne.push(H=[]);for(var Le,Re=0,Ue=(Le=this[ce]).length;Re<Ue;Re++)($=Le[Re])&&L.call($,$.__data__,Re,ce)&&H.push($)}return is(ne,this.namespace,this.id)},yi.tween=function(L,H){var $=this.id,ne=this.namespace;return arguments.length<2?this.node()[ne][$].tween.get(L):_e(this,H==null?function(ce){ce[ne][$].tween.remove(L)}:function(ce){ce[ne][$].tween.set(L,H)})},yi.attr=function(L,H){if(arguments.length<2){for(H in L)this.attr(H,L[H]);return this}var $=L=="transform"?Ac:lo,ne=a.ns.qualify(L);function ce(){this.removeAttribute(ne)}function xe(){this.removeAttributeNS(ne.space,ne.local)}return ro(this,"attr."+L,H,ne.local?function(Le){return Le==null?xe:(Le+="",function(){var Re,Ue=this.getAttributeNS(ne.space,ne.local);return Ue!==Le&&(Re=$(Ue,Le),function(He){this.setAttributeNS(ne.space,ne.local,Re(He))})})}:function(Le){return Le==null?ce:(Le+="",function(){var Re,Ue=this.getAttribute(ne);return Ue!==Le&&(Re=$(Ue,Le),function(He){this.setAttribute(ne,Re(He))})})})},yi.attrTween=function(L,H){var $=a.ns.qualify(L);return this.tween("attr."+L,$.local?function(ne,ce){var xe=H.call(this,ne,ce,this.getAttributeNS($.space,$.local));return xe&&function(Le){this.setAttributeNS($.space,$.local,xe(Le))}}:function(ne,ce){var xe=H.call(this,ne,ce,this.getAttribute($));return xe&&function(Le){this.setAttribute($,xe(Le))}})},yi.style=function(L,H,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(H=""),L)this.style($,L[$],H);return this}$=""}function ce(){this.style.removeProperty(L)}return ro(this,"style."+L,H,function(xe){return xe==null?ce:(xe+="",function(){var Le,Re=t(this).getComputedStyle(this,null).getPropertyValue(L);return Re!==xe&&(Le=lo(Re,xe),function(Ue){this.style.setProperty(L,Le(Ue),$)})})})},yi.styleTween=function(L,H,$){return arguments.length<3&&($=""),this.tween("style."+L,function(ne,ce){var xe=H.call(this,ne,ce,t(this).getComputedStyle(this,null).getPropertyValue(L));return xe&&function(Le){this.style.setProperty(L,xe(Le),$)}})},yi.text=function(L){return ro(this,"text",L,_i)},yi.remove=function(){var L=this.namespace;return this.each("end.transition",function(){var H;this[L].count<2&&(H=this.parentNode)&&H.removeChild(this)})},yi.ease=function(L){var H=this.id,$=this.namespace;return arguments.length<1?this.node()[$][H].ease:(typeof L!="function"&&(L=a.ease.apply(a,arguments)),_e(this,function(ne){ne[$][H].ease=L}))},yi.delay=function(L){var H=this.id,$=this.namespace;return arguments.length<1?this.node()[$][H].delay:_e(this,typeof L=="function"?function(ne,ce,xe){ne[$][H].delay=+L.call(ne,ne.__data__,ce,xe)}:(L=+L,function(ne){ne[$][H].delay=L}))},yi.duration=function(L){var H=this.id,$=this.namespace;return arguments.length<1?this.node()[$][H].duration:_e(this,typeof L=="function"?function(ne,ce,xe){ne[$][H].duration=Math.max(1,L.call(ne,ne.__data__,ce,xe))}:(L=Math.max(1,L),function(ne){ne[$][H].duration=L}))},yi.each=function(L,H){var $=this.id,ne=this.namespace;if(arguments.length<2){var ce=Go,xe=$i;try{$i=$,_e(this,function(Le,Re,Ue){Go=Le[ne][$],L.call(Le,Le.__data__,Re,Ue)})}finally{Go=ce,$i=xe}}else _e(this,function(Le){var Re=Le[ne][$];(Re.event||(Re.event=a.dispatch("start","end","interrupt"))).on(L,H)});return this},yi.transition=function(){for(var L,H,$,ne=this.id,ce=++Ec,xe=this.namespace,Le=[],Re=0,Ue=this.length;Re<Ue;Re++){Le.push(L=[]);for(var He,tt=0,ct=(He=this[Re]).length;tt<ct;tt++)(H=He[tt])&&Za(H,tt,xe,ce,{time:($=H[xe][ne]).time,ease:$.ease,delay:$.delay+$.duration,duration:$.duration}),L.push(H)}return is(Le,xe,ce)},a.svg.axis=function(){var L,H=a.scale.linear(),$=Ss,ne=6,ce=6,xe=3,Le=[10],Re=null;function Ue(He){He.each(function(){var tt,ct=a.select(this),dt=this.__chart__||H,wt=this.__chart__=H.copy(),Et=Re??(wt.ticks?wt.ticks.apply(wt,Le):wt.domain()),kt=L??(wt.tickFormat?wt.tickFormat.apply(wt,Le):O),Bt=ct.selectAll(".tick").data(Et,wt),It=Bt.enter().insert("g",".domain").attr("class","tick").style("opacity",$e),Kt=a.transition(Bt.exit()).style("opacity",$e).remove(),qt=a.transition(Bt.order()).style("opacity",1),Vt=Math.max(ne,0)+xe,pn=Al(wt),yn=ct.selectAll(".domain").data([0]),Sn=(yn.enter().append("path").attr("class","domain"),a.transition(yn));It.append("line"),It.append("text");var On,Hn,sr,dr,Zn=It.select("line"),fr=qt.select("line"),Ar=Bt.select("text").text(kt),Or=It.select("text"),ir=qt.select("text"),ur=$==="top"||$==="left"?-1:1;if($==="bottom"||$==="top"?(tt=Ke,On="x",sr="y",Hn="x2",dr="y2",Ar.attr("dy",ur<0?"0em":".71em").style("text-anchor","middle"),Sn.attr("d","M"+pn[0]+","+ur*ce+"V0H"+pn[1]+"V"+ur*ce)):(tt=Qe,On="y",sr="x",Hn="y2",dr="x2",Ar.attr("dy",".32em").style("text-anchor",ur<0?"end":"start"),Sn.attr("d","M"+ur*ce+","+pn[0]+"H0V"+pn[1]+"H"+ur*ce)),Zn.attr(dr,ur*ne),Or.attr(sr,ur*Vt),fr.attr(Hn,0).attr(dr,ur*ne),ir.attr(On,0).attr(sr,ur*Vt),wt.rangeBand){var Cr=wt,pr=Cr.rangeBand()/2;dt=wt=function(Ir){return Cr(Ir)+pr}}else dt.rangeBand?dt=wt:Kt.call(tt,wt,dt);It.call(tt,dt,wt),qt.call(tt,wt,wt)})}return Ue.scale=function(He){return arguments.length?(H=He,Ue):H},Ue.orient=function(He){return arguments.length?($=He in pc?He+"":Ss,Ue):$},Ue.ticks=function(){return arguments.length?(Le=b(arguments),Ue):Le},Ue.tickValues=function(He){return arguments.length?(Re=He,Ue):Re},Ue.tickFormat=function(He){return arguments.length?(L=He,Ue):L},Ue.tickSize=function(He){var tt=arguments.length;return tt?(ne=+He,ce=+arguments[tt-1],Ue):ne},Ue.innerTickSize=function(He){return arguments.length?(ne=+He,Ue):ne},Ue.outerTickSize=function(He){return arguments.length?(ce=+He,Ue):ce},Ue.tickPadding=function(He){return arguments.length?(xe=+He,Ue):xe},Ue.tickSubdivide=function(){return arguments.length&&Ue},Ue};var Ss="bottom",pc={top:1,right:1,bottom:1,left:1};function Ke(L,H,$){L.attr("transform",function(ne){var ce=H(ne);return"translate("+(isFinite(ce)?ce:$(ne))+",0)"})}function Qe(L,H,$){L.attr("transform",function(ne){var ce=H(ne);return"translate(0,"+(isFinite(ce)?ce:$(ne))+")"})}a.svg.brush=function(){var L,H,$=J(tt,"brushstart","brush","brushend"),ne=null,ce=null,xe=[0,0],Le=[0,0],Re=!0,Ue=!0,He=N[0];function tt(kt){kt.each(function(){var Bt=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Et).on("touchstart.brush",Et),It=Bt.selectAll(".background").data([0]);It.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Bt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Kt=Bt.selectAll(".resize").data(He,O);Kt.exit().remove(),Kt.enter().append("g").attr("class",function(yn){return"resize "+yn}).style("cursor",function(yn){return st[yn]}).append("rect").attr("x",function(yn){return/[ew]$/.test(yn)?-3:null}).attr("y",function(yn){return/^[ns]/.test(yn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Kt.style("display",tt.empty()?"none":null);var qt,Vt=a.transition(Bt),pn=a.transition(It);ne&&(qt=Al(ne),pn.attr("x",qt[0]).attr("width",qt[1]-qt[0]),dt(Vt)),ce&&(qt=Al(ce),pn.attr("y",qt[0]).attr("height",qt[1]-qt[0]),wt(Vt)),ct(Vt)})}function ct(kt){kt.selectAll(".resize").attr("transform",function(Bt){return"translate("+xe[+/e$/.test(Bt)]+","+Le[+/^s/.test(Bt)]+")"})}function dt(kt){kt.select(".extent").attr("x",xe[0]),kt.selectAll(".extent,.n>rect,.s>rect").attr("width",xe[1]-xe[0])}function wt(kt){kt.select(".extent").attr("y",Le[0]),kt.selectAll(".extent,.e>rect,.w>rect").attr("height",Le[1]-Le[0])}function Et(){var kt,Bt,It=this,Kt=a.select(a.event.target),qt=$.of(It,arguments),Vt=a.select(It),pn=Kt.datum(),yn=!/^(n|s)$/.test(pn)&&ne,Sn=!/^(e|w)$/.test(pn)&&ce,On=Kt.classed("extent"),Hn=gt(It),sr=a.mouse(It),dr=a.select(t(It)).on("keydown.brush",function(){a.event.keyCode==32&&(On||(kt=null,sr[0]-=xe[1],sr[1]-=Le[1],On=2),ee())}).on("keyup.brush",function(){a.event.keyCode==32&&On==2&&(sr[0]+=xe[1],sr[1]+=Le[1],On=0,ee())});if(a.event.changedTouches?dr.on("touchmove.brush",Ar).on("touchend.brush",ir):dr.on("mousemove.brush",Ar).on("mouseup.brush",ir),Vt.interrupt().selectAll("*").interrupt(),On)sr[0]=xe[0]-sr[0],sr[1]=Le[0]-sr[1];else if(pn){var Zn=+/w$/.test(pn),fr=+/^n/.test(pn);Bt=[xe[1-Zn]-sr[0],Le[1-fr]-sr[1]],sr[0]=xe[Zn],sr[1]=Le[fr]}else a.event.altKey&&(kt=sr.slice());function Ar(){var ur=a.mouse(It),Cr=!1;Bt&&(ur[0]+=Bt[0],ur[1]+=Bt[1]),On||(a.event.altKey?(kt||(kt=[(xe[0]+xe[1])/2,(Le[0]+Le[1])/2]),sr[0]=xe[+(ur[0]<kt[0])],sr[1]=Le[+(ur[1]<kt[1])]):kt=null),yn&&Or(ur,ne,0)&&(dt(Vt),Cr=!0),Sn&&Or(ur,ce,1)&&(wt(Vt),Cr=!0),Cr&&(ct(Vt),qt({type:"brush",mode:On?"move":"resize"}))}function Or(ur,Cr,pr){var Ir,Fr,Zr=Al(Cr),Kr=Zr[0],ti=Zr[1],oi=sr[pr],Ei=pr?Le:xe,Xi=Ei[1]-Ei[0];if(On&&(Kr-=oi,ti-=Xi+oi),Ir=(pr?Ue:Re)?Math.max(Kr,Math.min(ti,ur[pr])):ur[pr],On?Fr=(Ir+=oi)+Xi:(kt&&(oi=Math.max(Kr,Math.min(ti,2*kt[pr]-Ir))),oi<Ir?(Fr=Ir,Ir=oi):Fr=oi),Ei[0]!=Ir||Ei[1]!=Fr)return pr?H=null:L=null,Ei[0]=Ir,Ei[1]=Fr,!0}function ir(){Ar(),Vt.style("pointer-events","all").selectAll(".resize").style("display",tt.empty()?"none":null),a.select("body").style("cursor",null),dr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Hn(),qt({type:"brushend"})}Vt.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",Kt.style("cursor")),qt({type:"brushstart"}),Ar()}return tt.event=function(kt){kt.each(function(){var Bt=$.of(this,arguments),It={x:xe,y:Le,i:L,j:H},Kt=this.__chart__||It;this.__chart__=It,$i?a.select(this).transition().each("start.brush",function(){L=Kt.i,H=Kt.j,xe=Kt.x,Le=Kt.y,Bt({type:"brushstart"})}).tween("brush:brush",function(){var qt=xo(xe,It.x),Vt=xo(Le,It.y);return L=H=null,function(pn){xe=It.x=qt(pn),Le=It.y=Vt(pn),Bt({type:"brush",mode:"resize"})}}).each("end.brush",function(){L=It.i,H=It.j,Bt({type:"brush",mode:"resize"}),Bt({type:"brushend"})}):(Bt({type:"brushstart"}),Bt({type:"brush",mode:"resize"}),Bt({type:"brushend"}))})},tt.x=function(kt){return arguments.length?(He=N[!(ne=kt)<<1|!ce],tt):ne},tt.y=function(kt){return arguments.length?(He=N[!ne<<1|!(ce=kt)],tt):ce},tt.clamp=function(kt){return arguments.length?(ne&&ce?(Re=!!kt[0],Ue=!!kt[1]):ne?Re=!!kt:ce&&(Ue=!!kt),tt):ne&&ce?[Re,Ue]:ne?Re:ce?Ue:null},tt.extent=function(kt){var Bt,It,Kt,qt,Vt;return arguments.length?(ne&&(Bt=kt[0],It=kt[1],ce&&(Bt=Bt[0],It=It[0]),L=[Bt,It],ne.invert&&(Bt=ne(Bt),It=ne(It)),It<Bt&&(Vt=Bt,Bt=It,It=Vt),Bt==xe[0]&&It==xe[1]||(xe=[Bt,It])),ce&&(Kt=kt[0],qt=kt[1],ne&&(Kt=Kt[1],qt=qt[1]),H=[Kt,qt],ce.invert&&(Kt=ce(Kt),qt=ce(qt)),qt<Kt&&(Vt=Kt,Kt=qt,qt=Vt),Kt==Le[0]&&qt==Le[1]||(Le=[Kt,qt])),tt):(ne&&(L?(Bt=L[0],It=L[1]):(Bt=xe[0],It=xe[1],ne.invert&&(Bt=ne.invert(Bt),It=ne.invert(It)),It<Bt&&(Vt=Bt,Bt=It,It=Vt))),ce&&(H?(Kt=H[0],qt=H[1]):(Kt=Le[0],qt=Le[1],ce.invert&&(Kt=ce.invert(Kt),qt=ce.invert(qt)),qt<Kt&&(Vt=Kt,Kt=qt,qt=Vt))),ne&&ce?[[Bt,Kt],[It,qt]]:ne?[Bt,It]:ce&&[Kt,qt])},tt.clear=function(){return tt.empty()||(xe=[0,0],Le=[0,0],L=H=null),tt},tt.empty=function(){return!!ne&&xe[0]==xe[1]||!!ce&&Le[0]==Le[1]},a.rebind(tt,$,"on")};var st={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},N=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function W(L){return JSON.parse(L.responseText)}function G(L){var H=f.createRange();return H.selectNode(f.body),H.createContextualFragment(L.responseText)}a.text=Rn(function(L){return L.responseText}),a.json=function(L,H){return Qn(L,"application/json",W,H)},a.html=function(L,H){return Qn(L,"text/html",G,H)},a.xml=Rn(function(L){return L.responseXML}),(k=typeof(T=a)=="function"?T.call(C,e,C,F):T)===void 0||(F.exports=k)}).apply(self)},3480:function(F){F.exports=function(){"use strict";var C,e,T;function k(a,w){if(C)if(e){var b="var sharedChunk = {}; ("+C+")(sharedChunk); ("+e+")(sharedChunk);",f={};C(f),T=w(f),typeof window<"u"&&(T.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}else e=w;else C=w}return k(0,function(a){function w(M,R){return M(R={exports:{}},R.exports),R.exports}var b="1.13.4",f=s;function s(M,R,Z,le){this.cx=3*M,this.bx=3*(Z-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*R,this.by=3*(le-R)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=le,this.p2x=Z,this.p2y=le}s.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},s.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},s.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},s.prototype.solveCurveX=function(M,R){var Z,le,Te,Ie,je;for(R===void 0&&(R=1e-6),Te=M,je=0;je<8;je++){if(Ie=this.sampleCurveX(Te)-M,Math.abs(Ie)<R)return Te;var Je=this.sampleCurveDerivativeX(Te);if(Math.abs(Je)<1e-6)break;Te-=Ie/Je}if((Te=M)<(Z=0))return Z;if(Te>(le=1))return le;for(;Z<le;){if(Ie=this.sampleCurveX(Te),Math.abs(Ie-M)<R)return Te;M>Ie?Z=Te:le=Te,Te=.5*(le-Z)+Z}return Te},s.prototype.solve=function(M,R){return this.sampleCurveY(this.solveCurveX(M,R))};var t=i;function i(M,R){this.x=M,this.y=R}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,R){return this.clone()._rotateAround(M,R)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var R=M.x-this.x,Z=M.y-this.y;return R*R+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,R){return Math.atan2(this.x*R-this.y*M,this.x*M+this.y*R)},_matMult:function(M){var R=M[0]*this.x+M[1]*this.y,Z=M[2]*this.x+M[3]*this.y;return this.x=R,this.y=Z,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var R=Math.cos(M),Z=Math.sin(M),le=R*this.x-Z*this.y,Te=Z*this.x+R*this.y;return this.x=le,this.y=Te,this},_rotateAround:function(M,R){var Z=Math.cos(M),le=Math.sin(M),Te=R.x+Z*(this.x-R.x)-le*(this.y-R.y),Ie=R.y+le*(this.x-R.x)+Z*(this.y-R.y);return this.x=Te,this.y=Ie,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(M){return M instanceof i?M:Array.isArray(M)?new i(M[0],M[1]):M};var r=typeof self<"u"?self:{},n=Math.pow(2,53)-1;function o(M,R,Z,le){var Te=new f(M,R,Z,le);return function(Ie){return Te.solve(Ie)}}var l=o(.25,.1,.25,1);function c(M,R,Z){return Math.min(Z,Math.max(R,M))}function d(M,R,Z){var le=Z-R,Te=((M-R)%le+le)%le+R;return Te===R?Z:Te}function u(M){for(var R=[],Z=arguments.length-1;Z-- >0;)R[Z]=arguments[Z+1];for(var le=0,Te=R;le<Te.length;le+=1){var Ie=Te[le];for(var je in Ie)M[je]=Ie[je]}return M}var x=1;function p(){return x++}function g(){return function M(R){return R?(R^16*Math.random()>>R/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function m(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function y(M,R){M.forEach(function(Z){R[Z]&&(R[Z]=R[Z].bind(R))})}function v(M,R){return M.indexOf(R,M.length-R.length)!==-1}function _(M,R,Z){var le={};for(var Te in M)le[Te]=R.call(Z||this,M[Te],Te,M);return le}function h(M,R,Z){var le={};for(var Te in M)R.call(Z||this,M[Te],Te,M)&&(le[Te]=M[Te]);return le}function S(M){return Array.isArray(M)?M.map(S):typeof M=="object"&&M?_(M,S):M}var A={};function E(M){A[M]||(typeof console<"u"&&console.warn(M),A[M]=!0)}function P(M,R,Z){return(Z.y-M.y)*(R.x-M.x)>(R.y-M.y)*(Z.x-M.x)}function I(M){for(var R=0,Z=0,le=M.length,Te=le-1,Ie=void 0,je=void 0;Z<le;Te=Z++)Ie=M[Z],R+=((je=M[Te]).x-Ie.x)*(Ie.y+je.y);return R}function D(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function z(M){var R={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,Te,Ie,je){var Je=Ie||je;return R[Te]=!Je||Je.toLowerCase(),""}),R["max-age"]){var Z=parseInt(R["max-age"],10);isNaN(Z)?delete R["max-age"]:R["max-age"]=Z}return R}var V=null;function O(M){if(V==null){var R=M.navigator?M.navigator.userAgent:null;V=!!M.safari||!(!R||!(/\b(iPad|iPhone|iPod)\b/.test(R)||R.match("Safari")&&!R.match("Chrome")))}return V}function j(M){try{var R=r[M];return R.setItem("_mapbox_test_",1),R.removeItem("_mapbox_test_"),!0}catch{return!1}}var Y,B,U,q,te=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),ee=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,Q=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame,J={now:te,frame:function(M){var R=ee(M);return{cancel:function(){return Q(R)}}},getImageData:function(M,R){R===void 0&&(R=0);var Z=r.document.createElement("canvas"),le=Z.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return Z.width=M.width,Z.height=M.height,le.drawImage(M,0,0,M.width,M.height),le.getImageData(-R,-R,M.width+2*R,M.height+2*R)},resolveURL:function(M){return Y||(Y=r.document.createElement("a")),Y.href=M,Y.href},hardwareConcurrency:r.navigator&&r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(B==null&&(B=r.matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}},K={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},X={supported:!1,testSupport:function(M){!ie&&q&&(se?ae(M):U=M)}},ie=!1,se=!1;function ae(M){var R=M.createTexture();M.bindTexture(M.TEXTURE_2D,R);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,q),M.isContextLost())return;X.supported=!0}catch{}M.deleteTexture(R),ie=!0}r.document&&((q=r.document.createElement("img")).onload=function(){U&&ae(U),U=null,se=!0},q.onerror=function(){ie=!0,U=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ue="01",ve=function(M,R){this._transformRequestFn=M,this._customAccessToken=R,this._createSkuToken()};function ye(M){return M.indexOf("mapbox:")===0}ve.prototype._createSkuToken=function(){var M=function(){for(var R="",Z=0;Z<10;Z++)R+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ue,R].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ve.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ve.prototype.transformRequest=function(M,R){return this._transformRequestFn&&this._transformRequestFn(M,R)||{url:M}},ve.prototype.normalizeStyleURL=function(M,R){if(!ye(M))return M;var Z=ke(M);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||R)},ve.prototype.normalizeGlyphsURL=function(M,R){if(!ye(M))return M;var Z=ke(M);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||R)},ve.prototype.normalizeSourceURL=function(M,R){if(!ye(M))return M;var Z=ke(M);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||R)},ve.prototype.normalizeSpriteURL=function(M,R,Z,le){var Te=ke(M);return ye(M)?(Te.path="/styles/v1"+Te.path+"/sprite"+R+Z,this._makeAPIURL(Te,this._customAccessToken||le)):(Te.path+=""+R+Z,Ce(Te))},ve.prototype.normalizeTileURL=function(M,R){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!ye(M))return M;var Z=ke(M),le=J.devicePixelRatio>=2||R===512?"@2x":"",Te=X.supported?".webp":"$1";Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+Te),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Ie=this._customAccessToken||function(je){for(var Je=0,lt=je;Je<lt.length;Je+=1){var _t=lt[Je].match(/^access_token=(.*)$/);if(_t)return _t[1]}return null}(Z.params)||K.ACCESS_TOKEN;return K.REQUIRE_ACCESS_TOKEN&&Ie&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Ie)},ve.prototype.canonicalizeTileURL=function(M,R){var Z=ke(M);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return M;var le="mapbox://tiles/";le+=Z.path.replace("/v4/","");var Te=Z.params;return R&&(Te=Te.filter(function(Ie){return!Ie.match(/^access_token=/)})),Te.length&&(le+="?"+Te.join("&")),le},ve.prototype.canonicalizeTileset=function(M,R){for(var Z=!!R&&ye(R),le=[],Te=0,Ie=M.tiles||[];Te<Ie.length;Te+=1){var je=Ie[Te];de(je)?le.push(this.canonicalizeTileURL(je,Z)):le.push(je)}return le},ve.prototype._makeAPIURL=function(M,R){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=ke(K.API_URL);if(M.protocol=le.protocol,M.authority=le.authority,M.protocol==="http"){var Te=M.params.indexOf("secure");Te>=0&&M.params.splice(Te,1)}if(le.path!=="/"&&(M.path=""+le.path+M.path),!K.REQUIRE_ACCESS_TOKEN)return Ce(M);if(!(R=R||K.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(R[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return M.params=M.params.filter(function(Ie){return Ie.indexOf("access_token")===-1}),M.params.push("access_token="+R),Ce(M)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function de(M){return pe.test(M)}var me=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ke(M){var R=M.match(me);if(!R)throw new Error("Unable to parse URL object");return{protocol:R[1],authority:R[2],path:R[3]||"/",params:R[4]?R[4].split("&"):[]}}function Ce(M){var R=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+R}var ge="mapbox.eventData";function oe(M){if(!M)return null;var R,Z=M.split(".");if(!Z||Z.length!==3)return null;try{return JSON.parse((R=Z[1],decodeURIComponent(r.atob(R).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var re=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};re.prototype.getStorageKey=function(M){var R,Z,le=oe(K.ACCESS_TOKEN);return R=le&&le.u?(Z=le.u,r.btoa(encodeURIComponent(Z).replace(/%([0-9A-F]{2})/g,function(Te,Ie){return String.fromCharCode(+("0x"+Ie))}))):K.ACCESS_TOKEN||"",M?ge+"."+M+":"+R:ge+":"+R},re.prototype.fetchEventData=function(){var M=j("localStorage"),R=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{var le=r.localStorage.getItem(R);le&&(this.eventData=JSON.parse(le));var Te=r.localStorage.getItem(Z);Te&&(this.anonId=Te)}catch{E("Unable to read from LocalStorage")}},re.prototype.saveEventData=function(){var M=j("localStorage"),R=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{r.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(R,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},re.prototype.processRequests=function(M){},re.prototype.postEvent=function(M,R,Z,le){var Te=this;if(K.EVENTS_URL){var Ie=ke(K.EVENTS_URL);Ie.params.push("access_token="+(le||K.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ue,userId:this.anonId},Je=R?u(je,R):je,lt={url:Ce(Ie),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Je])};this.pendingRequest=Ct(lt,function(_t){Te.pendingRequest=null,Z(_t),Te.saveEventData(),Te.processRequests(le)})}},re.prototype.queueRequest=function(M,R){this.queue.push(M),this.processRequests(R)};var fe,Se,be=function(M){function R(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.postMapLoadEvent=function(Z,le,Te,Ie){this.skuToken=Te,(K.EVENTS_URL&&Ie||K.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(je){return ye(je)||de(je)}))&&this.queueRequest({id:le,timestamp:Date.now()},Ie)},R.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var Te=this.queue.shift(),Ie=Te.id,je=Te.timestamp;Ie&&this.success[Ie]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=g()),this.postEvent(je,{skuToken:this.skuToken},function(Je){Je||Ie&&(le.success[Ie]=!0)},Z))}},R}(re),we=function(M){function R(Z){M.call(this,"appUserTurnstile"),this._customAccessToken=Z}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.postTurnstileEvent=function(Z,le){K.EVENTS_URL&&K.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(Te){return ye(Te)||de(Te)})&&this.queueRequest(Date.now(),le)},R.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Te=oe(K.ACCESS_TOKEN),Ie=Te?Te.u:K.ACCESS_TOKEN,je=Ie!==this.eventData.tokenU;m(this.anonId)||(this.anonId=g(),je=!0);var Je=this.queue.shift();if(this.eventData.lastSuccess){var lt=new Date(this.eventData.lastSuccess),_t=new Date(Je),Tt=(Je-this.eventData.lastSuccess)/864e5;je=je||Tt>=1||Tt<-1||lt.getDate()!==_t.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Je,{"enabled.telemetry":!1},function(zt){zt||(le.eventData.lastSuccess=Je,le.eventData.tokenU=Ie)},Z)}},R}(re),Me=new we,Pe=Me.postTurnstileEvent.bind(Me),De=new be,he=De.postMapLoadEvent.bind(De),_e="mapbox-tiles",Ae=500,Oe=50,Ee=42e4;function Be(){r.caches&&!fe&&(fe=r.caches.open(_e))}function Ve(M,R,Z){if(Be(),fe){var le={status:R.status,statusText:R.statusText,headers:new r.Headers};R.headers.forEach(function(Ie,je){return le.headers.set(je,Ie)});var Te=z(R.headers.get("Cache-Control")||"");Te["no-store"]||(Te["max-age"]&&le.headers.set("Expires",new Date(Z+1e3*Te["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-Z<Ee||function(Ie,je){if(Se===void 0)try{new Response(new ReadableStream),Se=!0}catch{Se=!1}Se?je(Ie.body):Ie.blob().then(je)}(R,function(Ie){var je=new r.Response(Ie,le);Be(),fe&&fe.then(function(Je){return Je.put(Ze(M.url),je)}).catch(function(Je){return E(Je.message)})}))}}function Ze(M){var R=M.indexOf("?");return R<0?M:M.slice(0,R)}function it(M,R){if(Be(),!fe)return R(null);var Z=Ze(M.url);fe.then(function(le){le.match(Z).then(function(Te){var Ie=function(je){if(!je)return!1;var Je=new Date(je.headers.get("Expires")||0),lt=z(je.headers.get("Cache-Control")||"");return Je>Date.now()&&!lt["no-cache"]}(Te);le.delete(Z),Ie&&le.put(Z,Te.clone()),R(null,Te,Ie)}).catch(R)}).catch(R)}var at,gt=1/0;function yt(){return at==null&&(at=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&typeof r.createImageBitmap=="function"),at}var pt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(pt);var et=function(M){function R(Z,le,Te){le===401&&de(Te)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,Z),this.status=le,this.url=Te,this.name=this.constructor.name,this.message=Z}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},R}(Error),$e=D()?function(){return self.worker&&self.worker.referrer}:function(){return(r.location.protocol==="blob:"?r.parent:r).location.href};function At(M,R){var Z,le=new r.AbortController,Te=new r.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:$e(),signal:le.signal}),Ie=!1,je=!1,Je=(Z=Te.url).indexOf("sku=")>0&&de(Z);M.type==="json"&&Te.headers.set("Accept","application/json");var lt=function(Tt,zt,Gt){if(!je){if(Tt&&Tt.message!=="SecurityError"&&E(Tt),zt&&Gt)return _t(zt);var Ut=Date.now();r.fetch(Te).then(function(on){if(on.ok){var cn=Je?on.clone():null;return _t(on,cn,Ut)}return R(new et(on.statusText,on.status,M.url))}).catch(function(on){on.code!==20&&R(new Error(on.message))})}},_t=function(Tt,zt,Gt){(M.type==="arrayBuffer"?Tt.arrayBuffer():M.type==="json"?Tt.json():Tt.text()).then(function(Ut){je||(zt&&Gt&&Ve(Te,zt,Gt),Ie=!0,R(null,Ut,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function(Ut){je||R(new Error(Ut.message))})};return Je?it(Te,lt):lt(null,null),{cancel:function(){je=!0,Ie||le.abort()}}}var Ot=function(M,R){if(Z=M.url,!(/^file:/.test(Z)||/^file:/.test($e())&&!/^\w+:/.test(Z))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return At(M,R);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,R,void 0,!0)}var Z;return function(le,Te){var Ie=new r.XMLHttpRequest;for(var je in Ie.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Ie.responseType="arraybuffer"),le.headers)Ie.setRequestHeader(je,le.headers[je]);return le.type==="json"&&(Ie.responseType="text",Ie.setRequestHeader("Accept","application/json")),Ie.withCredentials=le.credentials==="include",Ie.onerror=function(){Te(new Error(Ie.statusText))},Ie.onload=function(){if((Ie.status>=200&&Ie.status<300||Ie.status===0)&&Ie.response!==null){var Je=Ie.response;if(le.type==="json")try{Je=JSON.parse(Ie.response)}catch(lt){return Te(lt)}Te(null,Je,Ie.getResponseHeader("Cache-Control"),Ie.getResponseHeader("Expires"))}else Te(new et(Ie.statusText,Ie.status,le.url))},Ie.send(le.body),{cancel:function(){return Ie.abort()}}}(M,R)},Rt=function(M,R){return Ot(u(M,{type:"arrayBuffer"}),R)},Ct=function(M,R){return Ot(u(M,{method:"POST"}),R)},Ge,Xe,Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ge=[],Xe=0;var Ye=function(M,R){if(X.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Xe>=K.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:M,callback:R,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ge.push(Z),Z}Xe++;var le=!1,Te=function(){if(!le)for(le=!0,Xe--;Ge.length&&Xe<K.MAX_PARALLEL_IMAGE_REQUESTS;){var je=Ge.shift(),Je=je.requestParameters,lt=je.callback;je.cancelled||(je.cancel=Ye(Je,lt).cancel)}},Ie=Rt(M,function(je,Je,lt,_t){Te(),je?R(je):Je&&(yt()?function(Tt,zt){var Gt=new r.Blob([new Uint8Array(Tt)],{type:"image/png"});r.createImageBitmap(Gt).then(function(Ut){zt(null,Ut)}).catch(function(Ut){zt(new Error("Could not load image because of "+Ut.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Je,R):function(Tt,zt,Gt,Ut){var on=new r.Image,cn=r.URL;on.onload=function(){zt(null,on),cn.revokeObjectURL(on.src),on.onload=null,r.requestAnimationFrame(function(){on.src=Ne})},on.onerror=function(){return zt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var kn=new r.Blob([new Uint8Array(Tt)],{type:"image/png"});on.cacheControl=Gt,on.expires=Ut,on.src=Tt.byteLength?cn.createObjectURL(kn):Ne}(Je,R,lt,_t))});return{cancel:function(){Ie.cancel(),Te()}}};function ot(M,R,Z){Z[M]&&Z[M].indexOf(R)!==-1||(Z[M]=Z[M]||[],Z[M].push(R))}function nt(M,R,Z){if(Z&&Z[M]){var le=Z[M].indexOf(R);le!==-1&&Z[M].splice(le,1)}}var ze=function(M,R){R===void 0&&(R={}),u(this,R),this.type=M},Fe=function(M){function R(Z,le){le===void 0&&(le={}),M.call(this,"error",u({error:Z},le))}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R}(ze),rt=function(){};rt.prototype.on=function(M,R){return this._listeners=this._listeners||{},ot(M,R,this._listeners),this},rt.prototype.off=function(M,R){return nt(M,R,this._listeners),nt(M,R,this._oneTimeListeners),this},rt.prototype.once=function(M,R){return this._oneTimeListeners=this._oneTimeListeners||{},ot(M,R,this._oneTimeListeners),this},rt.prototype.fire=function(M,R){typeof M=="string"&&(M=new ze(M,R||{}));var Z=M.type;if(this.listens(Z)){M.target=this;for(var le=0,Te=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];le<Te.length;le+=1)Te[le].call(this,M);for(var Ie=0,je=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Ie<je.length;Ie+=1){var Je=je[Ie];nt(Z,Je,this._oneTimeListeners),Je.call(this,M)}var lt=this._eventedParent;lt&&(u(M,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),lt.fire(M))}else M instanceof Fe&&console.error(M.error);return this},rt.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},rt.prototype.setEventedParent=function(M,R){return this._eventedParent=M,this._eventedParentData=R,this};var We={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ft=function(M,R,Z,le){this.message=(M?M+": ":"")+Z,le&&(this.identifier=le),R!=null&&R.__line__&&(this.line=R.__line__)};function mt(M){var R=M.key,Z=M.value;return Z?[new ft(R,Z,"constants have been deprecated as of v8")]:[]}function vt(M){for(var R=[],Z=arguments.length-1;Z-- >0;)R[Z]=arguments[Z+1];for(var le=0,Te=R;le<Te.length;le+=1){var Ie=Te[le];for(var je in Ie)M[je]=Ie[je]}return M}function ut(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function Mt(M){if(Array.isArray(M))return M.map(Mt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var R={};for(var Z in M)R[Z]=Mt(M[Z]);return R}return ut(M)}var bt=function(M){function R(Z,le){M.call(this,le),this.message=le,this.key=Z}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R}(Error),St=function(M,R){R===void 0&&(R=[]),this.parent=M,this.bindings={};for(var Z=0,le=R;Z<le.length;Z+=1){var Te=le[Z],Ie=Te[0],je=Te[1];this.bindings[Ie]=je}};St.prototype.concat=function(M){return new St(this,M)},St.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},St.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Pt={kind:"null"},Dt={kind:"number"},Ft={kind:"string"},Xt={kind:"boolean"},an={kind:"color"},Ht={kind:"object"},Zt={kind:"value"},jt={kind:"collator"},Pn={kind:"formatted"},Tn={kind:"resolvedImage"};function mn(M,R){return{kind:"array",itemType:M,N:R}}function Qt(M){if(M.kind==="array"){var R=Qt(M.itemType);return typeof M.N=="number"?"array<"+R+", "+M.N+">":M.itemType.kind==="value"?"array":"array<"+R+">"}return M.kind}var un=[Pt,Dt,Ft,Xt,an,Pn,Ht,mn(Zt),Tn];function nn(M,R){if(R.kind==="error")return null;if(M.kind==="array"){if(R.kind==="array"&&(R.N===0&&R.itemType.kind==="value"||!nn(M.itemType,R.itemType))&&(typeof M.N!="number"||M.N===R.N))return null}else{if(M.kind===R.kind)return null;if(M.kind==="value"){for(var Z=0,le=un;Z<le.length;Z+=1)if(!nn(le[Z],R))return null}}return"Expected "+Qt(M)+" but found "+Qt(R)+" instead."}function hn(M,R){return R.some(function(Z){return Z.kind===M.kind})}function bn(M,R){return R.some(function(Z){return Z==="null"?M===null:Z==="array"?Array.isArray(M):Z==="object"?M&&!Array.isArray(M)&&typeof M=="object":Z===typeof M})}var wn=w(function(M,R){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(lt){return(lt=Math.round(lt))<0?0:lt>255?255:lt}function Te(lt){return lt<0?0:lt>1?1:lt}function Ie(lt){return lt[lt.length-1]==="%"?le(parseFloat(lt)/100*255):le(parseInt(lt))}function je(lt){return lt[lt.length-1]==="%"?Te(parseFloat(lt)/100):Te(parseFloat(lt))}function Je(lt,_t,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?lt+(_t-lt)*Tt*6:2*Tt<1?_t:3*Tt<2?lt+(_t-lt)*(2/3-Tt)*6:lt}try{R.parseCSSColor=function(lt){var _t,Tt=lt.replace(/ /g,"").toLowerCase();if(Tt in Z)return Z[Tt].slice();if(Tt[0]==="#")return Tt.length===4?(_t=parseInt(Tt.substr(1),16))>=0&&_t<=4095?[(3840&_t)>>4|(3840&_t)>>8,240&_t|(240&_t)>>4,15&_t|(15&_t)<<4,1]:null:Tt.length===7&&(_t=parseInt(Tt.substr(1),16))>=0&&_t<=16777215?[(16711680&_t)>>16,(65280&_t)>>8,255&_t,1]:null;var zt=Tt.indexOf("("),Gt=Tt.indexOf(")");if(zt!==-1&&Gt+1===Tt.length){var Ut=Tt.substr(0,zt),on=Tt.substr(zt+1,Gt-(zt+1)).split(","),cn=1;switch(Ut){case"rgba":if(on.length!==4)return null;cn=je(on.pop());case"rgb":return on.length!==3?null:[Ie(on[0]),Ie(on[1]),Ie(on[2]),cn];case"hsla":if(on.length!==4)return null;cn=je(on.pop());case"hsl":if(on.length!==3)return null;var kn=(parseFloat(on[0])%360+360)%360/360,_n=je(on[1]),Fn=je(on[2]),Bn=Fn<=.5?Fn*(_n+1):Fn+_n-Fn*_n,Wn=2*Fn-Bn;return[le(255*Je(Wn,Bn,kn+1/3)),le(255*Je(Wn,Bn,kn)),le(255*Je(Wn,Bn,kn-1/3)),cn];default:return null}}return null}}catch{}}),Cn=wn.parseCSSColor,Ln=function(M,R,Z,le){le===void 0&&(le=1),this.r=M,this.g=R,this.b=Z,this.a=le};Ln.parse=function(M){if(M){if(M instanceof Ln)return M;if(typeof M=="string"){var R=Cn(M);if(R)return new Ln(R[0]/255*R[3],R[1]/255*R[3],R[2]/255*R[3],R[3])}}},Ln.prototype.toString=function(){var M=this.toArray(),R=M[0],Z=M[1],le=M[2],Te=M[3];return"rgba("+Math.round(R)+","+Math.round(Z)+","+Math.round(le)+","+Te+")"},Ln.prototype.toArray=function(){var M=this,R=M.r,Z=M.g,le=M.b,Te=M.a;return Te===0?[0,0,0,0]:[255*R/Te,255*Z/Te,255*le/Te,Te]},Ln.black=new Ln(0,0,0,1),Ln.white=new Ln(1,1,1,1),Ln.transparent=new Ln(0,0,0,0),Ln.red=new Ln(1,0,0,1);var Mn=function(M,R,Z){this.sensitivity=M?R?"variant":"case":R?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Mn.prototype.compare=function(M,R){return this.collator.compare(M,R)},Mn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var jn=function(M,R,Z,le,Te){this.text=M,this.image=R,this.scale=Z,this.fontStack=le,this.textColor=Te},Rn=function(M){this.sections=M};Rn.fromString=function(M){return new Rn([new jn(M,null,null,null,null)])},Rn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(M){return M.text.length!==0||M.image&&M.image.name.length!==0})},Rn.factory=function(M){return M instanceof Rn?M:Rn.fromString(M)},Rn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(M){return M.text}).join("")},Rn.prototype.serialize=function(){for(var M=["format"],R=0,Z=this.sections;R<Z.length;R+=1){var le=Z[R];if(le.image)M.push(["image",le.image.name]);else{M.push(le.text);var Te={};le.fontStack&&(Te["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(Te["font-scale"]=le.scale),le.textColor&&(Te["text-color"]=["rgba"].concat(le.textColor.toArray())),M.push(Te)}}return M};var Qn=function(M){this.name=M.name,this.available=M.available};function Yn(M,R,Z,le){return typeof M=="number"&&M>=0&&M<=255&&typeof R=="number"&&R>=0&&R<=255&&typeof Z=="number"&&Z>=0&&Z<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[M,R,Z,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[M,R,Z,le]:[M,R,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ar(M){if(M===null||typeof M=="string"||typeof M=="boolean"||typeof M=="number"||M instanceof Ln||M instanceof Mn||M instanceof Rn||M instanceof Qn)return!0;if(Array.isArray(M)){for(var R=0,Z=M;R<Z.length;R+=1)if(!ar(Z[R]))return!1;return!0}if(typeof M=="object"){for(var le in M)if(!ar(M[le]))return!1;return!0}return!1}function Kn(M){if(M===null)return Pt;if(typeof M=="string")return Ft;if(typeof M=="boolean")return Xt;if(typeof M=="number")return Dt;if(M instanceof Ln)return an;if(M instanceof Mn)return jt;if(M instanceof Rn)return Pn;if(M instanceof Qn)return Tn;if(Array.isArray(M)){for(var R,Z=M.length,le=0,Te=M;le<Te.length;le+=1){var Ie=Kn(Te[le]);if(R){if(R===Ie)continue;R=Zt;break}R=Ie}return mn(R||Zt,Z)}return Ht}function mr(M){var R=typeof M;return M===null?"":R==="string"||R==="number"||R==="boolean"?String(M):M instanceof Ln||M instanceof Rn||M instanceof Qn?M.toString():JSON.stringify(M)}Qn.prototype.toString=function(){return this.name},Qn.fromString=function(M){return M?new Qn({name:M,available:!1}):null},Qn.prototype.serialize=function(){return["image",this.name]};var en=function(M,R){this.type=M,this.value=R};en.parse=function(M,R){if(M.length!==2)return R.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!ar(M[1]))return R.error("invalid value");var Z=M[1],le=Kn(Z),Te=R.expectedType;return le.kind!=="array"||le.N!==0||!Te||Te.kind!=="array"||typeof Te.N=="number"&&Te.N!==0||(le=Te),new en(le,Z)},en.prototype.evaluate=function(){return this.value},en.prototype.eachChild=function(){},en.prototype.outputDefined=function(){return!0},en.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ln?["rgba"].concat(this.value.toArray()):this.value instanceof Rn?this.value.serialize():this.value};var rn=function(M){this.name="ExpressionEvaluationError",this.message=M};rn.prototype.toJSON=function(){return this.message};var En={string:Ft,number:Dt,boolean:Xt,object:Ht},gn=function(M,R){this.type=M,this.args=R};gn.parse=function(M,R){if(M.length<2)return R.error("Expected at least one argument.");var Z,le=1,Te=M[0];if(Te==="array"){var Ie,je;if(M.length>2){var Je=M[1];if(typeof Je!="string"||!(Je in En)||Je==="object")return R.error('The item type argument of "array" must be one of string, number, boolean',1);Ie=En[Je],le++}else Ie=Zt;if(M.length>3){if(M[2]!==null&&(typeof M[2]!="number"||M[2]<0||M[2]!==Math.floor(M[2])))return R.error('The length argument to "array" must be a positive integer literal',2);je=M[2],le++}Z=mn(Ie,je)}else Z=En[Te];for(var lt=[];le<M.length;le++){var _t=R.parse(M[le],le,Zt);if(!_t)return null;lt.push(_t)}return new gn(Z,lt)},gn.prototype.evaluate=function(M){for(var R=0;R<this.args.length;R++){var Z=this.args[R].evaluate(M);if(!nn(this.type,Kn(Z)))return Z;if(R===this.args.length-1)throw new rn("Expected value to be of type "+Qt(this.type)+", but found "+Qt(Kn(Z))+" instead.")}return null},gn.prototype.eachChild=function(M){this.args.forEach(M)},gn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},gn.prototype.serialize=function(){var M=this.type,R=[M.kind];if(M.kind==="array"){var Z=M.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){R.push(Z.kind);var le=M.N;(typeof le=="number"||this.args.length>1)&&R.push(le)}}return R.concat(this.args.map(function(Te){return Te.serialize()}))};var Dn=function(M){this.type=Pn,this.sections=M};Dn.parse=function(M,R){if(M.length<2)return R.error("Expected at least one argument.");var Z=M[1];if(!Array.isArray(Z)&&typeof Z=="object")return R.error("First argument must be an image or text section.");for(var le=[],Te=!1,Ie=1;Ie<=M.length-1;++Ie){var je=M[Ie];if(Te&&typeof je=="object"&&!Array.isArray(je)){Te=!1;var Je=null;if(je["font-scale"]&&!(Je=R.parse(je["font-scale"],1,Dt)))return null;var lt=null;if(je["text-font"]&&!(lt=R.parse(je["text-font"],1,mn(Ft))))return null;var _t=null;if(je["text-color"]&&!(_t=R.parse(je["text-color"],1,an)))return null;var Tt=le[le.length-1];Tt.scale=Je,Tt.font=lt,Tt.textColor=_t}else{var zt=R.parse(M[Ie],1,Zt);if(!zt)return null;var Gt=zt.type.kind;if(Gt!=="string"&&Gt!=="value"&&Gt!=="null"&&Gt!=="resolvedImage")return R.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Te=!0,le.push({content:zt,scale:null,font:null,textColor:null})}}return new Dn(le)},Dn.prototype.evaluate=function(M){return new Rn(this.sections.map(function(R){var Z=R.content.evaluate(M);return Kn(Z)===Tn?new jn("",Z,null,null,null):new jn(mr(Z),null,R.scale?R.scale.evaluate(M):null,R.font?R.font.evaluate(M).join(","):null,R.textColor?R.textColor.evaluate(M):null)}))},Dn.prototype.eachChild=function(M){for(var R=0,Z=this.sections;R<Z.length;R+=1){var le=Z[R];M(le.content),le.scale&&M(le.scale),le.font&&M(le.font),le.textColor&&M(le.textColor)}},Dn.prototype.outputDefined=function(){return!1},Dn.prototype.serialize=function(){for(var M=["format"],R=0,Z=this.sections;R<Z.length;R+=1){var le=Z[R];M.push(le.content.serialize());var Te={};le.scale&&(Te["font-scale"]=le.scale.serialize()),le.font&&(Te["text-font"]=le.font.serialize()),le.textColor&&(Te["text-color"]=le.textColor.serialize()),M.push(Te)}return M};var qn=function(M){this.type=Tn,this.input=M};qn.parse=function(M,R){if(M.length!==2)return R.error("Expected two arguments.");var Z=R.parse(M[1],1,Ft);return Z?new qn(Z):R.error("No image name provided.")},qn.prototype.evaluate=function(M){var R=this.input.evaluate(M),Z=Qn.fromString(R);return Z&&M.availableImages&&(Z.available=M.availableImages.indexOf(R)>-1),Z},qn.prototype.eachChild=function(M){M(this.input)},qn.prototype.outputDefined=function(){return!1},qn.prototype.serialize=function(){return["image",this.input.serialize()]};var Vn={"to-boolean":Xt,"to-color":an,"to-number":Dt,"to-string":Ft},Jn=function(M,R){this.type=M,this.args=R};Jn.parse=function(M,R){if(M.length<2)return R.error("Expected at least one argument.");var Z=M[0];if((Z==="to-boolean"||Z==="to-string")&&M.length!==2)return R.error("Expected one argument.");for(var le=Vn[Z],Te=[],Ie=1;Ie<M.length;Ie++){var je=R.parse(M[Ie],Ie,Zt);if(!je)return null;Te.push(je)}return new Jn(le,Te)},Jn.prototype.evaluate=function(M){if(this.type.kind==="boolean")return!!this.args[0].evaluate(M);if(this.type.kind==="color"){for(var R,Z,le=0,Te=this.args;le<Te.length;le+=1){if(Z=null,(R=Te[le].evaluate(M))instanceof Ln)return R;if(typeof R=="string"){var Ie=M.parseColor(R);if(Ie)return Ie}else if(Array.isArray(R)&&!(Z=R.length<3||R.length>4?"Invalid rbga value "+JSON.stringify(R)+": expected an array containing either three or four numeric values.":Yn(R[0],R[1],R[2],R[3])))return new Ln(R[0]/255,R[1]/255,R[2]/255,R[3])}throw new rn(Z||"Could not parse color from value '"+(typeof R=="string"?R:String(JSON.stringify(R)))+"'")}if(this.type.kind==="number"){for(var je=null,Je=0,lt=this.args;Je<lt.length;Je+=1){if((je=lt[Je].evaluate(M))===null)return 0;var _t=Number(je);if(!isNaN(_t))return _t}throw new rn("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?Rn.fromString(mr(this.args[0].evaluate(M))):this.type.kind==="resolvedImage"?Qn.fromString(mr(this.args[0].evaluate(M))):mr(this.args[0].evaluate(M))},Jn.prototype.eachChild=function(M){this.args.forEach(M)},Jn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Jn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Dn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new qn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(R){M.push(R.serialize())}),M};var xr=["Unknown","Point","LineString","Polygon"],Jt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Jt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Jt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?xr[this.feature.type]:this.feature.type:null},Jt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Jt.prototype.canonicalID=function(){return this.canonical},Jt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Jt.prototype.parseColor=function(M){var R=this._parseColorCache[M];return R||(R=this._parseColorCache[M]=Ln.parse(M)),R};var vn=function(M,R,Z,le){this.name=M,this.type=R,this._evaluate=Z,this.args=le};vn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},vn.prototype.eachChild=function(M){this.args.forEach(M)},vn.prototype.outputDefined=function(){return!1},vn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},vn.parse=function(M,R){var Z,le=M[0],Te=vn.definitions[le];if(!Te)return R.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ie=Array.isArray(Te)?Te[0]:Te.type,je=Array.isArray(Te)?[[Te[1],Te[2]]]:Te.overloads,Je=je.filter(function(Xr){var zr=Xr[0];return!Array.isArray(zr)||zr.length===M.length-1}),lt=null,_t=0,Tt=Je;_t<Tt.length;_t+=1){var zt=Tt[_t],Gt=zt[0],Ut=zt[1];lt=new br(R.registry,R.path,null,R.scope);for(var on=[],cn=!1,kn=1;kn<M.length;kn++){var _n=M[kn],Fn=Array.isArray(Gt)?Gt[kn-1]:Gt.type,Bn=lt.parse(_n,1+on.length,Fn);if(!Bn){cn=!0;break}on.push(Bn)}if(!cn)if(Array.isArray(Gt)&&Gt.length!==on.length)lt.error("Expected "+Gt.length+" arguments, but found "+on.length+" instead.");else{for(var Wn=0;Wn<on.length;Wn++){var $n=Array.isArray(Gt)?Gt[Wn]:Gt.type,lr=on[Wn];lt.concat(Wn+1).checkSubtype($n,lr.type)}if(lt.errors.length===0)return new vn(le,Ie,Ut,on)}}if(Je.length===1)(Z=R.errors).push.apply(Z,lt.errors);else{for(var Tr=(Je.length?Je:je).map(function(Xr){return zr=Xr[0],Array.isArray(zr)?"("+zr.map(Qt).join(", ")+")":"("+Qt(zr.type)+"...)";var zr}).join(" | "),vr=[],Sr=1;Sr<M.length;Sr++){var Er=R.parse(M[Sr],1+vr.length);if(!Er)return null;vr.push(Qt(Er.type))}R.error("Expected arguments of type "+Tr+", but found ("+vr.join(", ")+") instead.")}return null},vn.register=function(M,R){for(var Z in vn.definitions=R,R)M[Z]=vn};var Lt=function(M,R,Z){this.type=jt,this.locale=Z,this.caseSensitive=M,this.diacriticSensitive=R};Lt.parse=function(M,R){if(M.length!==2)return R.error("Expected one argument.");var Z=M[1];if(typeof Z!="object"||Array.isArray(Z))return R.error("Collator options argument must be an object.");var le=R.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Xt);if(!le)return null;var Te=R.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Xt);if(!Te)return null;var Ie=null;return Z.locale&&!(Ie=R.parse(Z.locale,1,Ft))?null:new Lt(le,Te,Ie)},Lt.prototype.evaluate=function(M){return new Mn(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},Lt.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},Lt.prototype.outputDefined=function(){return!1},Lt.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var Nt=8192;function $t(M,R){M[0]=Math.min(M[0],R[0]),M[1]=Math.min(M[1],R[1]),M[2]=Math.max(M[2],R[0]),M[3]=Math.max(M[3],R[1])}function fn(M,R){return!(M[0]<=R[0]||M[2]>=R[2]||M[1]<=R[1]||M[3]>=R[3])}function dn(M,R){var Z,le=(180+M[0])/360,Te=(Z=M[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Z*Math.PI/360)))/360),Ie=Math.pow(2,R.z);return[Math.round(le*Ie*Nt),Math.round(Te*Ie*Nt)]}function xn(M,R,Z){return R[1]>M[1]!=Z[1]>M[1]&&M[0]<(Z[0]-R[0])*(M[1]-R[1])/(Z[1]-R[1])+R[0]}function sn(M,R){for(var Z=!1,le=0,Te=R.length;le<Te;le++)for(var Ie=R[le],je=0,Je=Ie.length;je<Je-1;je++){if(lt=M,_t=Ie[je],Tt=Ie[je+1],zt=void 0,Gt=void 0,Ut=void 0,on=void 0,zt=lt[0]-_t[0],Gt=lt[1]-_t[1],Ut=lt[0]-Tt[0],on=lt[1]-Tt[1],zt*on-Ut*Gt==0&&zt*Ut<=0&&Gt*on<=0)return!1;xn(M,Ie[je],Ie[je+1])&&(Z=!Z)}var lt,_t,Tt,zt,Gt,Ut,on;return Z}function Yt(M,R){for(var Z=0;Z<R.length;Z++)if(sn(M,R[Z]))return!0;return!1}function Wt(M,R,Z,le){var Te=M[0]-Z[0],Ie=M[1]-Z[1],je=R[0]-Z[0],Je=R[1]-Z[1],lt=le[0]-Z[0],_t=le[1]-Z[1],Tt=Te*_t-lt*Ie,zt=je*_t-lt*Je;return Tt>0&&zt<0||Tt<0&&zt>0}function tn(M,R,Z){for(var le=0,Te=Z;le<Te.length;le+=1)for(var Ie=Te[le],je=0;je<Ie.length-1;++je)if(Je=M,lt=R,_t=Ie[je],Tt=Ie[je+1],zt=void 0,Gt=void 0,Ut=void 0,Ut=[lt[0]-Je[0],lt[1]-Je[1]],zt=[Tt[0]-_t[0],Tt[1]-_t[1]],Gt=Ut,zt[0]*Gt[1]-zt[1]*Gt[0]!=0&&Wt(Je,lt,_t,Tt)&&Wt(_t,Tt,Je,lt))return!0;var Je,lt,_t,Tt,zt,Gt,Ut;return!1}function ln(M,R){for(var Z=0;Z<M.length;++Z)if(!sn(M[Z],R))return!1;for(var le=0;le<M.length-1;++le)if(tn(M[le],M[le+1],R))return!1;return!0}function An(M,R){for(var Z=0;Z<R.length;Z++)if(ln(M,R[Z]))return!0;return!1}function In(M,R,Z){for(var le=[],Te=0;Te<M.length;Te++){for(var Ie=[],je=0;je<M[Te].length;je++){var Je=dn(M[Te][je],Z);$t(R,Je),Ie.push(Je)}le.push(Ie)}return le}function zn(M,R,Z){for(var le=[],Te=0;Te<M.length;Te++){var Ie=In(M[Te],R,Z);le.push(Ie)}return le}function Un(M,R,Z,le){if(M[0]<Z[0]||M[0]>Z[2]){var Te=.5*le,Ie=M[0]-Z[0]>Te?-le:Z[0]-M[0]>Te?le:0;Ie===0&&(Ie=M[0]-Z[2]>Te?-le:Z[2]-M[0]>Te?le:0),M[0]+=Ie}$t(R,M)}function rr(M,R,Z,le){for(var Te=Math.pow(2,le.z)*Nt,Ie=[le.x*Nt,le.y*Nt],je=[],Je=0,lt=M;Je<lt.length;Je+=1)for(var _t=0,Tt=lt[Je];_t<Tt.length;_t+=1){var zt=Tt[_t],Gt=[zt.x+Ie[0],zt.y+Ie[1]];Un(Gt,R,Z,Te),je.push(Gt)}return je}function Xn(M,R,Z,le){for(var Te=Math.pow(2,le.z)*Nt,Ie=[le.x*Nt,le.y*Nt],je=[],Je=0,lt=M;Je<lt.length;Je+=1){for(var _t=[],Tt=0,zt=lt[Je];Tt<zt.length;Tt+=1){var Gt=zt[Tt],Ut=[Gt.x+Ie[0],Gt.y+Ie[1]];$t(R,Ut),_t.push(Ut)}je.push(_t)}if(R[2]-R[0]<=Te/2){(Fn=R)[0]=Fn[1]=1/0,Fn[2]=Fn[3]=-1/0;for(var on=0,cn=je;on<cn.length;on+=1)for(var kn=0,_n=cn[on];kn<_n.length;kn+=1)Un(_n[kn],R,Z,Te)}var Fn;return je}var er=function(M,R){this.type=Xt,this.geojson=M,this.geometries=R};function or(M){if(M instanceof vn&&(M.name==="get"&&M.args.length===1||M.name==="feature-state"||M.name==="has"&&M.args.length===1||M.name==="properties"||M.name==="geometry-type"||M.name==="id"||/^filter-/.test(M.name))||M instanceof er)return!1;var R=!0;return M.eachChild(function(Z){R&&!or(Z)&&(R=!1)}),R}function tr(M){if(M instanceof vn&&M.name==="feature-state")return!1;var R=!0;return M.eachChild(function(Z){R&&!tr(Z)&&(R=!1)}),R}function gr(M,R){if(M instanceof vn&&R.indexOf(M.name)>=0)return!1;var Z=!0;return M.eachChild(function(le){Z&&!gr(le,R)&&(Z=!1)}),Z}er.parse=function(M,R){if(M.length!==2)return R.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(ar(M[1])){var Z=M[1];if(Z.type==="FeatureCollection")for(var le=0;le<Z.features.length;++le){var Te=Z.features[le].geometry.type;if(Te==="Polygon"||Te==="MultiPolygon")return new er(Z,Z.features[le].geometry)}else if(Z.type==="Feature"){var Ie=Z.geometry.type;if(Ie==="Polygon"||Ie==="MultiPolygon")return new er(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new er(Z,Z)}return R.error("'within' expression requires valid geojson object that contains polygon geometry type.")},er.prototype.evaluate=function(M){if(M.geometry()!=null&&M.canonicalID()!=null){if(M.geometryType()==="Point")return function(R,Z){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Ie=R.canonicalID();if(Z.type==="Polygon"){var je=In(Z.coordinates,Te,Ie),Je=rr(R.geometry(),le,Te,Ie);if(!fn(le,Te))return!1;for(var lt=0,_t=Je;lt<_t.length;lt+=1)if(!sn(_t[lt],je))return!1}if(Z.type==="MultiPolygon"){var Tt=zn(Z.coordinates,Te,Ie),zt=rr(R.geometry(),le,Te,Ie);if(!fn(le,Te))return!1;for(var Gt=0,Ut=zt;Gt<Ut.length;Gt+=1)if(!Yt(Ut[Gt],Tt))return!1}return!0}(M,this.geometries);if(M.geometryType()==="LineString")return function(R,Z){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Ie=R.canonicalID();if(Z.type==="Polygon"){var je=In(Z.coordinates,Te,Ie),Je=Xn(R.geometry(),le,Te,Ie);if(!fn(le,Te))return!1;for(var lt=0,_t=Je;lt<_t.length;lt+=1)if(!ln(_t[lt],je))return!1}if(Z.type==="MultiPolygon"){var Tt=zn(Z.coordinates,Te,Ie),zt=Xn(R.geometry(),le,Te,Ie);if(!fn(le,Te))return!1;for(var Gt=0,Ut=zt;Gt<Ut.length;Gt+=1)if(!An(Ut[Gt],Tt))return!1}return!0}(M,this.geometries)}return!1},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return["within",this.geojson]};var Mr=function(M,R){this.type=R.type,this.name=M,this.boundExpression=R};Mr.parse=function(M,R){if(M.length!==2||typeof M[1]!="string")return R.error("'var' expression requires exactly one string literal argument.");var Z=M[1];return R.scope.has(Z)?new Mr(Z,R.scope.get(Z)):R.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},Mr.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},Mr.prototype.eachChild=function(){},Mr.prototype.outputDefined=function(){return!1},Mr.prototype.serialize=function(){return["var",this.name]};var br=function(M,R,Z,le,Te){R===void 0&&(R=[]),le===void 0&&(le=new St),Te===void 0&&(Te=[]),this.registry=M,this.path=R,this.key=R.map(function(Ie){return"["+Ie+"]"}).join(""),this.scope=le,this.errors=Te,this.expectedType=Z};function cr(M){if(M instanceof Mr)return cr(M.boundExpression);if(M instanceof vn&&M.name==="error"||M instanceof Lt||M instanceof er)return!1;var R=M instanceof Jn||M instanceof gn,Z=!0;return M.eachChild(function(le){Z=R?Z&&cr(le):Z&&le instanceof en}),!!Z&&or(M)&&gr(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function wr(M,R){for(var Z,le,Te=M.length-1,Ie=0,je=Te,Je=0;Ie<=je;)if(Z=M[Je=Math.floor((Ie+je)/2)],le=M[Je+1],Z<=R){if(Je===Te||R<le)return Je;Ie=Je+1}else{if(!(Z>R))throw new rn("Input is not a number.");je=Je-1}return 0}br.prototype.parse=function(M,R,Z,le,Te){return Te===void 0&&(Te={}),R?this.concat(R,Z,le)._parse(M,Te):this._parse(M,Te)},br.prototype._parse=function(M,R){function Z(_t,Tt,zt){return zt==="assert"?new gn(Tt,[_t]):zt==="coerce"?new Jn(Tt,[_t]):_t}if(M!==null&&typeof M!="string"&&typeof M!="boolean"&&typeof M!="number"||(M=["literal",M]),Array.isArray(M)){if(M.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=M[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Te=this.registry[le];if(Te){var Ie=Te.parse(M,this);if(!Ie)return null;if(this.expectedType){var je=this.expectedType,Je=Ie.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||Je.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||Je.kind!=="value"&&Je.kind!=="string"){if(this.checkSubtype(je,Je))return null}else Ie=Z(Ie,je,R.typeAnnotation||"coerce");else Ie=Z(Ie,je,R.typeAnnotation||"assert")}if(!(Ie instanceof en)&&Ie.type.kind!=="resolvedImage"&&cr(Ie)){var lt=new Jt;try{Ie=new en(Ie.type,Ie.evaluate(lt))}catch(_t){return this.error(_t.message),null}}return Ie}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return M===void 0?this.error("'undefined' value invalid. Use null instead."):typeof M=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof M+" instead.")},br.prototype.concat=function(M,R,Z){var le=typeof M=="number"?this.path.concat(M):this.path,Te=Z?this.scope.concat(Z):this.scope;return new br(this.registry,le,R||null,Te,this.errors)},br.prototype.error=function(M){for(var R=[],Z=arguments.length-1;Z-- >0;)R[Z]=arguments[Z+1];var le=""+this.key+R.map(function(Te){return"["+Te+"]"}).join("");this.errors.push(new bt(le,M))},br.prototype.checkSubtype=function(M,R){var Z=nn(M,R);return Z&&this.error(Z),Z};var Pr=function(M,R,Z){this.type=M,this.input=R,this.labels=[],this.outputs=[];for(var le=0,Te=Z;le<Te.length;le+=1){var Ie=Te[le],je=Ie[0],Je=Ie[1];this.labels.push(je),this.outputs.push(Je)}};function Hr(M,R,Z){return M*(1-Z)+R*Z}Pr.parse=function(M,R){if(M.length-1<4)return R.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return R.error("Expected an even number of arguments.");var Z=R.parse(M[1],1,Dt);if(!Z)return null;var le=[],Te=null;R.expectedType&&R.expectedType.kind!=="value"&&(Te=R.expectedType);for(var Ie=1;Ie<M.length;Ie+=2){var je=Ie===1?-1/0:M[Ie],Je=M[Ie+1],lt=Ie,_t=Ie+1;if(typeof je!="number")return R.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(le.length&&le[le.length-1][0]>=je)return R.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',lt);var Tt=R.parse(Je,_t,Te);if(!Tt)return null;Te=Te||Tt.type,le.push([je,Tt])}return new Pr(Te,Z,le)},Pr.prototype.evaluate=function(M){var R=this.labels,Z=this.outputs;if(R.length===1)return Z[0].evaluate(M);var le=this.input.evaluate(M);if(le<=R[0])return Z[0].evaluate(M);var Te=R.length;return le>=R[Te-1]?Z[Te-1].evaluate(M):Z[wr(R,le)].evaluate(M)},Pr.prototype.eachChild=function(M){M(this.input);for(var R=0,Z=this.outputs;R<Z.length;R+=1)M(Z[R])},Pr.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Pr.prototype.serialize=function(){for(var M=["step",this.input.serialize()],R=0;R<this.labels.length;R++)R>0&&M.push(this.labels[R]),M.push(this.outputs[R].serialize());return M};var Ai=Object.freeze({__proto__:null,number:Hr,color:function(M,R,Z){return new Ln(Hr(M.r,R.r,Z),Hr(M.g,R.g,Z),Hr(M.b,R.b,Z),Hr(M.a,R.a,Z))},array:function(M,R,Z){return M.map(function(le,Te){return Hr(le,R[Te],Z)})}}),Mi=.95047,ia=1,Ti=1.08883,ji=4/29,Ba=6/29,Gr=3*Ba*Ba,fa=Ba*Ba*Ba,so=Math.PI/180,oa=180/Math.PI;function Zo(M){return M>fa?Math.pow(M,.3333333333333333):M/Gr+ji}function fs(M){return M>Ba?M*M*M:Gr*(M-ji)}function Aa(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function Do(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function Oo(M){var R=Do(M.r),Z=Do(M.g),le=Do(M.b),Te=Zo((.4124564*R+.3575761*Z+.1804375*le)/Mi),Ie=Zo((.2126729*R+.7151522*Z+.072175*le)/ia);return{l:116*Ie-16,a:500*(Te-Ie),b:200*(Ie-Zo((.0193339*R+.119192*Z+.9503041*le)/Ti)),alpha:M.a}}function hs(M){var R=(M.l+16)/116,Z=isNaN(M.a)?R:R+M.a/500,le=isNaN(M.b)?R:R-M.b/200;return R=ia*fs(R),Z=Mi*fs(Z),le=Ti*fs(le),new Ln(Aa(3.2404542*Z-1.5371385*R-.4985314*le),Aa(-.969266*Z+1.8760108*R+.041556*le),Aa(.0556434*Z-.2040259*R+1.0572252*le),M.alpha)}function lo(M,R,Z){var le=R-M;return M+Z*(le>180||le<-180?le-360*Math.round(le/360):le)}var xo={forward:Oo,reverse:hs,interpolate:function(M,R,Z){return{l:Hr(M.l,R.l,Z),a:Hr(M.a,R.a,Z),b:Hr(M.b,R.b,Z),alpha:Hr(M.alpha,R.alpha,Z)}}},bo={forward:function(M){var R=Oo(M),Z=R.l,le=R.a,Te=R.b,Ie=Math.atan2(Te,le)*oa;return{h:Ie<0?Ie+360:Ie,c:Math.sqrt(le*le+Te*Te),l:Z,alpha:M.a}},reverse:function(M){var R=M.h*so,Z=M.c;return hs({l:M.l,a:Math.cos(R)*Z,b:Math.sin(R)*Z,alpha:M.alpha})},interpolate:function(M,R,Z){return{h:lo(M.h,R.h,Z),c:Hr(M.c,R.c,Z),l:Hr(M.l,R.l,Z),alpha:Hr(M.alpha,R.alpha,Z)}}},bi=Object.freeze({__proto__:null,lab:xo,hcl:bo}),ha=function(M,R,Z,le,Te){this.type=M,this.operator=R,this.interpolation=Z,this.input=le,this.labels=[],this.outputs=[];for(var Ie=0,je=Te;Ie<je.length;Ie+=1){var Je=je[Ie],lt=Je[0],_t=Je[1];this.labels.push(lt),this.outputs.push(_t)}};function Ko(M,R,Z,le){var Te=le-Z,Ie=M-Z;return Te===0?0:R===1?Ie/Te:(Math.pow(R,Ie)-1)/(Math.pow(R,Te)-1)}ha.interpolationFactor=function(M,R,Z,le){var Te=0;if(M.name==="exponential")Te=Ko(R,M.base,Z,le);else if(M.name==="linear")Te=Ko(R,1,Z,le);else if(M.name==="cubic-bezier"){var Ie=M.controlPoints;Te=new f(Ie[0],Ie[1],Ie[2],Ie[3]).solve(Ko(R,1,Z,le))}return Te},ha.parse=function(M,R){var Z=M[0],le=M[1],Te=M[2],Ie=M.slice(3);if(!Array.isArray(le)||le.length===0)return R.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var je=le[1];if(typeof je!="number")return R.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:je}}else{if(le[0]!=="cubic-bezier")return R.error("Unknown interpolation type "+String(le[0]),1,0);var Je=le.slice(1);if(Je.length!==4||Je.some(function(kn){return typeof kn!="number"||kn<0||kn>1}))return R.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:Je}}if(M.length-1<4)return R.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return R.error("Expected an even number of arguments.");if(!(Te=R.parse(Te,2,Dt)))return null;var lt=[],_t=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?_t=an:R.expectedType&&R.expectedType.kind!=="value"&&(_t=R.expectedType);for(var Tt=0;Tt<Ie.length;Tt+=2){var zt=Ie[Tt],Gt=Ie[Tt+1],Ut=Tt+3,on=Tt+4;if(typeof zt!="number")return R.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ut);if(lt.length&&lt[lt.length-1][0]>=zt)return R.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ut);var cn=R.parse(Gt,on,_t);if(!cn)return null;_t=_t||cn.type,lt.push([zt,cn])}return _t.kind==="number"||_t.kind==="color"||_t.kind==="array"&&_t.itemType.kind==="number"&&typeof _t.N=="number"?new ha(_t,Z,le,Te,lt):R.error("Type "+Qt(_t)+" is not interpolatable.")},ha.prototype.evaluate=function(M){var R=this.labels,Z=this.outputs;if(R.length===1)return Z[0].evaluate(M);var le=this.input.evaluate(M);if(le<=R[0])return Z[0].evaluate(M);var Te=R.length;if(le>=R[Te-1])return Z[Te-1].evaluate(M);var Ie=wr(R,le),je=R[Ie],Je=R[Ie+1],lt=ha.interpolationFactor(this.interpolation,le,je,Je),_t=Z[Ie].evaluate(M),Tt=Z[Ie+1].evaluate(M);return this.operator==="interpolate"?Ai[this.type.kind.toLowerCase()](_t,Tt,lt):this.operator==="interpolate-hcl"?bo.reverse(bo.interpolate(bo.forward(_t),bo.forward(Tt),lt)):xo.reverse(xo.interpolate(xo.forward(_t),xo.forward(Tt),lt))},ha.prototype.eachChild=function(M){M(this.input);for(var R=0,Z=this.outputs;R<Z.length;R+=1)M(Z[R])},ha.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},ha.prototype.serialize=function(){var M;M=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var R=[this.operator,M,this.input.serialize()],Z=0;Z<this.labels.length;Z++)R.push(this.labels[Z],this.outputs[Z].serialize());return R};var Ro=function(M,R){this.type=M,this.args=R};Ro.parse=function(M,R){if(M.length<2)return R.error("Expectected at least one argument.");var Z=null,le=R.expectedType;le&&le.kind!=="value"&&(Z=le);for(var Te=[],Ie=0,je=M.slice(1);Ie<je.length;Ie+=1){var Je=je[Ie],lt=R.parse(Je,1+Te.length,Z,void 0,{typeAnnotation:"omit"});if(!lt)return null;Z=Z||lt.type,Te.push(lt)}var _t=le&&Te.some(function(Tt){return nn(le,Tt.type)});return new Ro(_t?Zt:Z,Te)},Ro.prototype.evaluate=function(M){for(var R,Z=null,le=0,Te=0,Ie=this.args;Te<Ie.length&&(le++,(Z=Ie[Te].evaluate(M))&&Z instanceof Qn&&!Z.available&&(R||(R=Z.name),Z=null,le===this.args.length&&(Z=R)),Z===null);Te+=1);return Z},Ro.prototype.eachChild=function(M){this.args.forEach(M)},Ro.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Ro.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(R){M.push(R.serialize())}),M};var _o=function(M,R){this.type=R.type,this.bindings=[].concat(M),this.result=R};_o.prototype.evaluate=function(M){return this.result.evaluate(M)},_o.prototype.eachChild=function(M){for(var R=0,Z=this.bindings;R<Z.length;R+=1)M(Z[R][1]);M(this.result)},_o.parse=function(M,R){if(M.length<4)return R.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var Z=[],le=1;le<M.length-1;le+=2){var Te=M[le];if(typeof Te!="string")return R.error("Expected string, but found "+typeof Te+" instead.",le);if(/[^a-zA-Z0-9_]/.test(Te))return R.error("Variable names must contain only alphanumeric characters or '_'.",le);var Ie=R.parse(M[le+1],le+1);if(!Ie)return null;Z.push([Te,Ie])}var je=R.parse(M[M.length-1],M.length-1,R.expectedType,Z);return je?new _o(Z,je):null},_o.prototype.outputDefined=function(){return this.result.outputDefined()},_o.prototype.serialize=function(){for(var M=["let"],R=0,Z=this.bindings;R<Z.length;R+=1){var le=Z[R],Te=le[0],Ie=le[1];M.push(Te,Ie.serialize())}return M.push(this.result.serialize()),M};var ds=function(M,R,Z){this.type=M,this.index=R,this.input=Z};ds.parse=function(M,R){if(M.length!==3)return R.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=R.parse(M[1],1,Dt),le=R.parse(M[2],2,mn(R.expectedType||Zt));if(!Z||!le)return null;var Te=le.type;return new ds(Te.itemType,Z,le)},ds.prototype.evaluate=function(M){var R=this.index.evaluate(M),Z=this.input.evaluate(M);if(R<0)throw new rn("Array index out of bounds: "+R+" < 0.");if(R>=Z.length)throw new rn("Array index out of bounds: "+R+" > "+(Z.length-1)+".");if(R!==Math.floor(R))throw new rn("Array index must be an integer, but found "+R+" instead.");return Z[R]},ds.prototype.eachChild=function(M){M(this.index),M(this.input)},ds.prototype.outputDefined=function(){return!1},ds.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var zo=function(M,R){this.type=Xt,this.needle=M,this.haystack=R};zo.parse=function(M,R){if(M.length!==3)return R.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=R.parse(M[1],1,Zt),le=R.parse(M[2],2,Zt);return Z&&le?hn(Z.type,[Xt,Ft,Dt,Pt,Zt])?new zo(Z,le):R.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Z.type)+" instead"):null},zo.prototype.evaluate=function(M){var R=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!Z)return!1;if(!bn(R,["boolean","string","number","null"]))throw new rn("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Kn(R))+" instead.");if(!bn(Z,["string","array"]))throw new rn("Expected second argument to be of type array or string, but found "+Qt(Kn(Z))+" instead.");return Z.indexOf(R)>=0},zo.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},zo.prototype.outputDefined=function(){return!0},zo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ps=function(M,R,Z){this.type=Dt,this.needle=M,this.haystack=R,this.fromIndex=Z};ps.parse=function(M,R){if(M.length<=2||M.length>=5)return R.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=R.parse(M[1],1,Zt),le=R.parse(M[2],2,Zt);if(!Z||!le)return null;if(!hn(Z.type,[Xt,Ft,Dt,Pt,Zt]))return R.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Z.type)+" instead");if(M.length===4){var Te=R.parse(M[3],3,Dt);return Te?new ps(Z,le,Te):null}return new ps(Z,le)},ps.prototype.evaluate=function(M){var R=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!bn(R,["boolean","string","number","null"]))throw new rn("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Kn(R))+" instead.");if(!bn(Z,["string","array"]))throw new rn("Expected second argument to be of type array or string, but found "+Qt(Kn(Z))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(M);return Z.indexOf(R,le)}return Z.indexOf(R)},ps.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Jo=function(M,R,Z,le,Te,Ie){this.inputType=M,this.type=R,this.input=Z,this.cases=le,this.outputs=Te,this.otherwise=Ie};Jo.parse=function(M,R){if(M.length<5)return R.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return R.error("Expected an even number of arguments.");var Z,le;R.expectedType&&R.expectedType.kind!=="value"&&(le=R.expectedType);for(var Te={},Ie=[],je=2;je<M.length-1;je+=2){var Je=M[je],lt=M[je+1];Array.isArray(Je)||(Je=[Je]);var _t=R.concat(je);if(Je.length===0)return _t.error("Expected at least one branch label.");for(var Tt=0,zt=Je;Tt<zt.length;Tt+=1){var Gt=zt[Tt];if(typeof Gt!="number"&&typeof Gt!="string")return _t.error("Branch labels must be numbers or strings.");if(typeof Gt=="number"&&Math.abs(Gt)>Number.MAX_SAFE_INTEGER)return _t.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Gt=="number"&&Math.floor(Gt)!==Gt)return _t.error("Numeric branch labels must be integer values.");if(Z){if(_t.checkSubtype(Z,Kn(Gt)))return null}else Z=Kn(Gt);if(Te[String(Gt)]!==void 0)return _t.error("Branch labels must be unique.");Te[String(Gt)]=Ie.length}var Ut=R.parse(lt,je,le);if(!Ut)return null;le=le||Ut.type,Ie.push(Ut)}var on=R.parse(M[1],1,Zt);if(!on)return null;var cn=R.parse(M[M.length-1],M.length-1,le);return cn?on.type.kind!=="value"&&R.concat(1).checkSubtype(Z,on.type)?null:new Jo(Z,le,on,Te,Ie,cn):null},Jo.prototype.evaluate=function(M){var R=this.input.evaluate(M);return(Kn(R)===this.inputType&&this.outputs[this.cases[R]]||this.otherwise).evaluate(M)},Jo.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Jo.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Jo.prototype.serialize=function(){for(var M=this,R=["match",this.input.serialize()],Z=[],le={},Te=0,Ie=Object.keys(this.cases).sort();Te<Ie.length;Te+=1){var je=Ie[Te];(zt=le[this.cases[je]])===void 0?(le[this.cases[je]]=Z.length,Z.push([this.cases[je],[je]])):Z[zt][1].push(je)}for(var Je=function(Ut){return M.inputType.kind==="number"?Number(Ut):Ut},lt=0,_t=Z;lt<_t.length;lt+=1){var Tt=_t[lt],zt=Tt[0],Gt=Tt[1];Gt.length===1?R.push(Je(Gt[0])):R.push(Gt.map(Je)),R.push(this.outputs[outputIndex$1].serialize())}return R.push(this.otherwise.serialize()),R};var ms=function(M,R,Z){this.type=M,this.branches=R,this.otherwise=Z};ms.parse=function(M,R){if(M.length<4)return R.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return R.error("Expected an odd number of arguments.");var Z;R.expectedType&&R.expectedType.kind!=="value"&&(Z=R.expectedType);for(var le=[],Te=1;Te<M.length-1;Te+=2){var Ie=R.parse(M[Te],Te,Xt);if(!Ie)return null;var je=R.parse(M[Te+1],Te+1,Z);if(!je)return null;le.push([Ie,je]),Z=Z||je.type}var Je=R.parse(M[M.length-1],M.length-1,Z);return Je?new ms(Z,le,Je):null},ms.prototype.evaluate=function(M){for(var R=0,Z=this.branches;R<Z.length;R+=1){var le=Z[R],Te=le[0],Ie=le[1];if(Te.evaluate(M))return Ie.evaluate(M)}return this.otherwise.evaluate(M)},ms.prototype.eachChild=function(M){for(var R=0,Z=this.branches;R<Z.length;R+=1){var le=Z[R],Te=le[0],Ie=le[1];M(Te),M(Ie)}M(this.otherwise)},ms.prototype.outputDefined=function(){return this.branches.every(function(M){return M[0],M[1].outputDefined()})&&this.otherwise.outputDefined()},ms.prototype.serialize=function(){var M=["case"];return this.eachChild(function(R){M.push(R.serialize())}),M};var Fo=function(M,R,Z,le){this.type=M,this.input=R,this.beginIndex=Z,this.endIndex=le};function fc(M,R){return M==="=="||M==="!="?R.kind==="boolean"||R.kind==="string"||R.kind==="number"||R.kind==="null"||R.kind==="value":R.kind==="string"||R.kind==="number"||R.kind==="value"}function jl(M,R,Z,le){return le.compare(R,Z)===0}function Os(M,R,Z){var le=M!=="=="&&M!=="!=";return function(){function Te(Ie,je,Je){this.type=Xt,this.lhs=Ie,this.rhs=je,this.collator=Je,this.hasUntypedArgument=Ie.type.kind==="value"||je.type.kind==="value"}return Te.parse=function(Ie,je){if(Ie.length!==3&&Ie.length!==4)return je.error("Expected two or three arguments.");var Je=Ie[0],lt=je.parse(Ie[1],1,Zt);if(!lt)return null;if(!fc(Je,lt.type))return je.concat(1).error('"'+Je+`" comparisons are not supported for type '`+Qt(lt.type)+"'.");var _t=je.parse(Ie[2],2,Zt);if(!_t)return null;if(!fc(Je,_t.type))return je.concat(2).error('"'+Je+`" comparisons are not supported for type '`+Qt(_t.type)+"'.");if(lt.type.kind!==_t.type.kind&&lt.type.kind!=="value"&&_t.type.kind!=="value")return je.error("Cannot compare types '"+Qt(lt.type)+"' and '"+Qt(_t.type)+"'.");le&&(lt.type.kind==="value"&&_t.type.kind!=="value"?lt=new gn(_t.type,[lt]):lt.type.kind!=="value"&&_t.type.kind==="value"&&(_t=new gn(lt.type,[_t])));var Tt=null;if(Ie.length===4){if(lt.type.kind!=="string"&&_t.type.kind!=="string"&&lt.type.kind!=="value"&&_t.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(Tt=je.parse(Ie[3],3,jt)))return null}return new Te(lt,_t,Tt)},Te.prototype.evaluate=function(Ie){var je=this.lhs.evaluate(Ie),Je=this.rhs.evaluate(Ie);if(le&&this.hasUntypedArgument){var lt=Kn(je),_t=Kn(Je);if(lt.kind!==_t.kind||lt.kind!=="string"&&lt.kind!=="number")throw new rn('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+lt.kind+", "+_t.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var Tt=Kn(je),zt=Kn(Je);if(Tt.kind!=="string"||zt.kind!=="string")return R(Ie,je,Je)}return this.collator?Z(Ie,je,Je,this.collator.evaluate(Ie)):R(Ie,je,Je)},Te.prototype.eachChild=function(Ie){Ie(this.lhs),Ie(this.rhs),this.collator&&Ie(this.collator)},Te.prototype.outputDefined=function(){return!0},Te.prototype.serialize=function(){var Ie=[M];return this.eachChild(function(je){Ie.push(je.serialize())}),Ie},Te}()}Fo.parse=function(M,R){if(M.length<=2||M.length>=5)return R.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=R.parse(M[1],1,Zt),le=R.parse(M[2],2,Dt);if(!Z||!le)return null;if(!hn(Z.type,[mn(Zt),Ft,Zt]))return R.error("Expected first argument to be of type array or string, but found "+Qt(Z.type)+" instead");if(M.length===4){var Te=R.parse(M[3],3,Dt);return Te?new Fo(Z.type,Z,le,Te):null}return new Fo(Z.type,Z,le)},Fo.prototype.evaluate=function(M){var R=this.input.evaluate(M),Z=this.beginIndex.evaluate(M);if(!bn(R,["string","array"]))throw new rn("Expected first argument to be of type array or string, but found "+Qt(Kn(R))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(M);return R.slice(Z,le)}return R.slice(Z)},Fo.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Tc=Os("==",function(M,R,Z){return R===Z},jl),kc=Os("!=",function(M,R,Z){return R!==Z},function(M,R,Z,le){return!jl(0,R,Z,le)}),Rs=Os("<",function(M,R,Z){return R<Z},function(M,R,Z,le){return le.compare(R,Z)<0}),Ac=Os(">",function(M,R,Z){return R>Z},function(M,R,Z,le){return le.compare(R,Z)>0}),Zc=Os("<=",function(M,R,Z){return R<=Z},function(M,R,Z,le){return le.compare(R,Z)<=0}),Kc=Os(">=",function(M,R,Z){return R>=Z},function(M,R,Z,le){return le.compare(R,Z)>=0}),zs=function(M,R,Z,le,Te){this.type=Ft,this.number=M,this.locale=R,this.currency=Z,this.minFractionDigits=le,this.maxFractionDigits=Te};zs.parse=function(M,R){if(M.length!==3)return R.error("Expected two arguments.");var Z=R.parse(M[1],1,Dt);if(!Z)return null;var le=M[2];if(typeof le!="object"||Array.isArray(le))return R.error("NumberFormat options argument must be an object.");var Te=null;if(le.locale&&!(Te=R.parse(le.locale,1,Ft)))return null;var Ie=null;if(le.currency&&!(Ie=R.parse(le.currency,1,Ft)))return null;var je=null;if(le["min-fraction-digits"]&&!(je=R.parse(le["min-fraction-digits"],1,Dt)))return null;var Je=null;return le["max-fraction-digits"]&&!(Je=R.parse(le["max-fraction-digits"],1,Dt))?null:new zs(Z,Te,Ie,je,Je)},zs.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},zs.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var Bo=function(M){this.type=Dt,this.input=M};Bo.parse=function(M,R){if(M.length!==2)return R.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var Z=R.parse(M[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?R.error("Expected argument of type string or array, but found "+Qt(Z.type)+" instead."):new Bo(Z):null},Bo.prototype.evaluate=function(M){var R=this.input.evaluate(M);if(typeof R=="string"||Array.isArray(R))return R.length;throw new rn("Expected value to be of type string or array, but found "+Qt(Kn(R))+" instead.")},Bo.prototype.eachChild=function(M){M(this.input)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){var M=["length"];return this.eachChild(function(R){M.push(R.serialize())}),M};var Zs={"==":Tc,"!=":kc,">":Ac,"<":Rs,">=":Kc,"<=":Zc,array:gn,at:ds,boolean:gn,case:ms,coalesce:Ro,collator:Lt,format:Dn,image:qn,in:zo,"index-of":ps,interpolate:ha,"interpolate-hcl":ha,"interpolate-lab":ha,length:Bo,let:_o,literal:en,match:Jo,number:gn,"number-format":zs,object:gn,slice:Fo,step:Pr,string:gn,"to-boolean":Jn,"to-color":Jn,"to-number":Jn,"to-string":Jn,var:Mr,within:er};function Fs(M,R){var Z=R[0],le=R[1],Te=R[2],Ie=R[3];Z=Z.evaluate(M),le=le.evaluate(M),Te=Te.evaluate(M);var je=Ie?Ie.evaluate(M):1,Je=Yn(Z,le,Te,je);if(Je)throw new rn(Je);return new Ln(Z/255*je,le/255*je,Te/255*je,je)}function bl(M,R){return M in R}function Bs(M,R){var Z=R[M];return Z===void 0?null:Z}function wo(M){return{type:M}}function hc(M){return{result:"success",value:M}}function gs(M){return{result:"error",value:M}}function $o(M){return M["property-type"]==="data-driven"||M["property-type"]==="cross-faded-data-driven"}function Qo(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function vs(M){return!!M.expression&&M.expression.interpolated}function ni(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":M===null?"null":typeof M}function Ks(M){return typeof M=="object"&&M!==null&&!Array.isArray(M)}function Jc(M){return M}function Ul(M,R){var Z,le,Te,Ie=R.type==="color",je=M.stops&&typeof M.stops[0][0]=="object",Je=je||M.property!==void 0,lt=je||!Je,_t=M.type||(vs(R)?"exponential":"interval");if(Ie&&((M=vt({},M)).stops&&(M.stops=M.stops.map(function(vr){return[vr[0],Ln.parse(vr[1])]})),M.default?M.default=Ln.parse(M.default):M.default=Ln.parse(R.default)),M.colorSpace&&M.colorSpace!=="rgb"&&!bi[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if(_t==="exponential")Z=Vl;else if(_t==="interval")Z=$c;else if(_t==="categorical"){Z=Mc,le=Object.create(null);for(var Tt=0,zt=M.stops;Tt<zt.length;Tt+=1){var Gt=zt[Tt];le[Gt[0]]=Gt[1]}Te=typeof M.stops[0][0]}else{if(_t!=="identity")throw new Error('Unknown function type "'+_t+'"');Z=Qc}if(je){for(var Ut={},on=[],cn=0;cn<M.stops.length;cn++){var kn=M.stops[cn],_n=kn[0].zoom;Ut[_n]===void 0&&(Ut[_n]={zoom:_n,type:M.type,property:M.property,default:M.default,stops:[]},on.push(_n)),Ut[_n].stops.push([kn[0].value,kn[1]])}for(var Fn=[],Bn=0,Wn=on;Bn<Wn.length;Bn+=1){var $n=Wn[Bn];Fn.push([Ut[$n].zoom,Ul(Ut[$n],R)])}var lr={name:"linear"};return{kind:"composite",interpolationType:lr,interpolationFactor:ha.interpolationFactor.bind(void 0,lr),zoomStops:Fn.map(function(vr){return vr[0]}),evaluate:function(vr,Sr){var Er=vr.zoom;return Vl({stops:Fn,base:M.base},R,Er).evaluate(Er,Sr)}}}if(lt){var Tr=_t==="exponential"?{name:"exponential",base:M.base!==void 0?M.base:1}:null;return{kind:"camera",interpolationType:Tr,interpolationFactor:ha.interpolationFactor.bind(void 0,Tr),zoomStops:M.stops.map(function(vr){return vr[0]}),evaluate:function(vr){var Sr=vr.zoom;return Z(M,R,Sr,le,Te)}}}return{kind:"source",evaluate:function(vr,Sr){var Er=Sr&&Sr.properties?Sr.properties[M.property]:void 0;return Er===void 0?Js(M.default,R.default):Z(M,R,Er,le,Te)}}}function Js(M,R,Z){return M!==void 0?M:R!==void 0?R:Z!==void 0?Z:void 0}function Mc(M,R,Z,le,Te){return Js(typeof Z===Te?le[Z]:void 0,M.default,R.default)}function $c(M,R,Z){if(ni(Z)!=="number")return Js(M.default,R.default);var le=M.stops.length;if(le===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[le-1][0])return M.stops[le-1][1];var Te=wr(M.stops.map(function(Ie){return Ie[0]}),Z);return M.stops[Te][1]}function Vl(M,R,Z){var le=M.base!==void 0?M.base:1;if(ni(Z)!=="number")return Js(M.default,R.default);var Te=M.stops.length;if(Te===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[Te-1][0])return M.stops[Te-1][1];var Ie=wr(M.stops.map(function(zt){return zt[0]}),Z),je=function(zt,Gt,Ut,on){var cn=on-Ut,kn=zt-Ut;return cn===0?0:Gt===1?kn/cn:(Math.pow(Gt,kn)-1)/(Math.pow(Gt,cn)-1)}(Z,le,M.stops[Ie][0],M.stops[Ie+1][0]),Je=M.stops[Ie][1],lt=M.stops[Ie+1][1],_t=Ai[R.type]||Jc;if(M.colorSpace&&M.colorSpace!=="rgb"){var Tt=bi[M.colorSpace];_t=function(zt,Gt){return Tt.reverse(Tt.interpolate(Tt.forward(zt),Tt.forward(Gt),je))}}return typeof Je.evaluate=="function"?{evaluate:function(){for(var zt=[],Gt=arguments.length;Gt--;)zt[Gt]=arguments[Gt];var Ut=Je.evaluate.apply(void 0,zt),on=lt.evaluate.apply(void 0,zt);if(Ut!==void 0&&on!==void 0)return _t(Ut,on,je)}}:_t(Je,lt,je)}function Qc(M,R,Z){return R.type==="color"?Z=Ln.parse(Z):R.type==="formatted"?Z=Rn.fromString(Z.toString()):R.type==="resolvedImage"?Z=Qn.fromString(Z.toString()):ni(Z)===R.type||R.type==="enum"&&R.values[Z]||(Z=void 0),Js(Z,M.default,R.default)}vn.register(Zs,{error:[{kind:"error"},[Ft],function(M,R){var Z=R[0];throw new rn(Z.evaluate(M))}],typeof:[Ft,[Zt],function(M,R){return Qt(Kn(R[0].evaluate(M)))}],"to-rgba":[mn(Dt,4),[an],function(M,R){return R[0].evaluate(M).toArray()}],rgb:[an,[Dt,Dt,Dt],Fs],rgba:[an,[Dt,Dt,Dt,Dt],Fs],has:{type:Xt,overloads:[[[Ft],function(M,R){return bl(R[0].evaluate(M),M.properties())}],[[Ft,Ht],function(M,R){var Z=R[0],le=R[1];return bl(Z.evaluate(M),le.evaluate(M))}]]},get:{type:Zt,overloads:[[[Ft],function(M,R){return Bs(R[0].evaluate(M),M.properties())}],[[Ft,Ht],function(M,R){var Z=R[0],le=R[1];return Bs(Z.evaluate(M),le.evaluate(M))}]]},"feature-state":[Zt,[Ft],function(M,R){return Bs(R[0].evaluate(M),M.featureState||{})}],properties:[Ht,[],function(M){return M.properties()}],"geometry-type":[Ft,[],function(M){return M.geometryType()}],id:[Zt,[],function(M){return M.id()}],zoom:[Dt,[],function(M){return M.globals.zoom}],"heatmap-density":[Dt,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(M){return M.globals.lineProgress||0}],accumulated:[Zt,[],function(M){return M.globals.accumulated===void 0?null:M.globals.accumulated}],"+":[Dt,wo(Dt),function(M,R){for(var Z=0,le=0,Te=R;le<Te.length;le+=1)Z+=Te[le].evaluate(M);return Z}],"*":[Dt,wo(Dt),function(M,R){for(var Z=1,le=0,Te=R;le<Te.length;le+=1)Z*=Te[le].evaluate(M);return Z}],"-":{type:Dt,overloads:[[[Dt,Dt],function(M,R){var Z=R[0],le=R[1];return Z.evaluate(M)-le.evaluate(M)}],[[Dt],function(M,R){return-R[0].evaluate(M)}]]},"/":[Dt,[Dt,Dt],function(M,R){var Z=R[0],le=R[1];return Z.evaluate(M)/le.evaluate(M)}],"%":[Dt,[Dt,Dt],function(M,R){var Z=R[0],le=R[1];return Z.evaluate(M)%le.evaluate(M)}],ln2:[Dt,[],function(){return Math.LN2}],pi:[Dt,[],function(){return Math.PI}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(M,R){var Z=R[0],le=R[1];return Math.pow(Z.evaluate(M),le.evaluate(M))}],sqrt:[Dt,[Dt],function(M,R){var Z=R[0];return Math.sqrt(Z.evaluate(M))}],log10:[Dt,[Dt],function(M,R){var Z=R[0];return Math.log(Z.evaluate(M))/Math.LN10}],ln:[Dt,[Dt],function(M,R){var Z=R[0];return Math.log(Z.evaluate(M))}],log2:[Dt,[Dt],function(M,R){var Z=R[0];return Math.log(Z.evaluate(M))/Math.LN2}],sin:[Dt,[Dt],function(M,R){var Z=R[0];return Math.sin(Z.evaluate(M))}],cos:[Dt,[Dt],function(M,R){var Z=R[0];return Math.cos(Z.evaluate(M))}],tan:[Dt,[Dt],function(M,R){var Z=R[0];return Math.tan(Z.evaluate(M))}],asin:[Dt,[Dt],function(M,R){var Z=R[0];return Math.asin(Z.evaluate(M))}],acos:[Dt,[Dt],function(M,R){var Z=R[0];return Math.acos(Z.evaluate(M))}],atan:[Dt,[Dt],function(M,R){var Z=R[0];return Math.atan(Z.evaluate(M))}],min:[Dt,wo(Dt),function(M,R){return Math.min.apply(Math,R.map(function(Z){return Z.evaluate(M)}))}],max:[Dt,wo(Dt),function(M,R){return Math.max.apply(Math,R.map(function(Z){return Z.evaluate(M)}))}],abs:[Dt,[Dt],function(M,R){var Z=R[0];return Math.abs(Z.evaluate(M))}],round:[Dt,[Dt],function(M,R){var Z=R[0].evaluate(M);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[Dt,[Dt],function(M,R){var Z=R[0];return Math.floor(Z.evaluate(M))}],ceil:[Dt,[Dt],function(M,R){var Z=R[0];return Math.ceil(Z.evaluate(M))}],"filter-==":[Xt,[Ft,Zt],function(M,R){var Z=R[0],le=R[1];return M.properties()[Z.value]===le.value}],"filter-id-==":[Xt,[Zt],function(M,R){var Z=R[0];return M.id()===Z.value}],"filter-type-==":[Xt,[Ft],function(M,R){var Z=R[0];return M.geometryType()===Z.value}],"filter-<":[Xt,[Ft,Zt],function(M,R){var Z=R[0],le=R[1],Te=M.properties()[Z.value],Ie=le.value;return typeof Te==typeof Ie&&Te<Ie}],"filter-id-<":[Xt,[Zt],function(M,R){var Z=R[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le<Te}],"filter->":[Xt,[Ft,Zt],function(M,R){var Z=R[0],le=R[1],Te=M.properties()[Z.value],Ie=le.value;return typeof Te==typeof Ie&&Te>Ie}],"filter-id->":[Xt,[Zt],function(M,R){var Z=R[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le>Te}],"filter-<=":[Xt,[Ft,Zt],function(M,R){var Z=R[0],le=R[1],Te=M.properties()[Z.value],Ie=le.value;return typeof Te==typeof Ie&&Te<=Ie}],"filter-id-<=":[Xt,[Zt],function(M,R){var Z=R[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le<=Te}],"filter->=":[Xt,[Ft,Zt],function(M,R){var Z=R[0],le=R[1],Te=M.properties()[Z.value],Ie=le.value;return typeof Te==typeof Ie&&Te>=Ie}],"filter-id->=":[Xt,[Zt],function(M,R){var Z=R[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le>=Te}],"filter-has":[Xt,[Zt],function(M,R){return R[0].value in M.properties()}],"filter-has-id":[Xt,[],function(M){return M.id()!==null&&M.id()!==void 0}],"filter-type-in":[Xt,[mn(Ft)],function(M,R){return R[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Xt,[mn(Zt)],function(M,R){return R[0].value.indexOf(M.id())>=0}],"filter-in-small":[Xt,[Ft,mn(Zt)],function(M,R){var Z=R[0];return R[1].value.indexOf(M.properties()[Z.value])>=0}],"filter-in-large":[Xt,[Ft,mn(Zt)],function(M,R){var Z=R[0],le=R[1];return function(Te,Ie,je,Je){for(;je<=Je;){var lt=je+Je>>1;if(Ie[lt]===Te)return!0;Ie[lt]>Te?Je=lt-1:je=lt+1}return!1}(M.properties()[Z.value],le.value,0,le.value.length-1)}],all:{type:Xt,overloads:[[[Xt,Xt],function(M,R){var Z=R[0],le=R[1];return Z.evaluate(M)&&le.evaluate(M)}],[wo(Xt),function(M,R){for(var Z=0,le=R;Z<le.length;Z+=1)if(!le[Z].evaluate(M))return!1;return!0}]]},any:{type:Xt,overloads:[[[Xt,Xt],function(M,R){var Z=R[0],le=R[1];return Z.evaluate(M)||le.evaluate(M)}],[wo(Xt),function(M,R){for(var Z=0,le=R;Z<le.length;Z+=1)if(le[Z].evaluate(M))return!0;return!1}]]},"!":[Xt,[Xt],function(M,R){return!R[0].evaluate(M)}],"is-supported-script":[Xt,[Ft],function(M,R){var Z=R[0],le=M.globals&&M.globals.isSupportedScript;return!le||le(Z.evaluate(M))}],upcase:[Ft,[Ft],function(M,R){return R[0].evaluate(M).toUpperCase()}],downcase:[Ft,[Ft],function(M,R){return R[0].evaluate(M).toLowerCase()}],concat:[Ft,wo(Zt),function(M,R){return R.map(function(Z){return mr(Z.evaluate(M))}).join("")}],"resolved-locale":[Ft,[jt],function(M,R){return R[0].evaluate(M).resolvedLocale()}]});var ys=function(M,R){this.expression=M,this._warningHistory={},this._evaluator=new Jt,this._defaultValue=R?function(Z){return Z.type==="color"&&Ks(Z.default)?new Ln(0,0,0,0):Z.type==="color"?Ln.parse(Z.default)||null:Z.default===void 0?null:Z.default}(R):null,this._enumValues=R&&R.type==="enum"?R.values:null};function Ns(M){return Array.isArray(M)&&M.length>0&&typeof M[0]=="string"&&M[0]in Zs}function es(M,R){var Z=new br(Zs,[],R?function(Te){var Ie={color:an,string:Ft,number:Dt,enum:Ft,boolean:Xt,formatted:Pn,resolvedImage:Tn};return Te.type==="array"?mn(Ie[Te.value]||Zt,Te.length):Ie[Te.type]}(R):void 0),le=Z.parse(M,void 0,void 0,void 0,R&&R.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?hc(new ys(le,R)):gs(Z.errors)}ys.prototype.evaluateWithoutErrorHandling=function(M,R,Z,le,Te,Ie){return this._evaluator.globals=M,this._evaluator.feature=R,this._evaluator.featureState=Z,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Ie,this.expression.evaluate(this._evaluator)},ys.prototype.evaluate=function(M,R,Z,le,Te,Ie){this._evaluator.globals=M,this._evaluator.feature=R||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Ie||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new rn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Je){return JSON.stringify(Je)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Je){return this._warningHistory[Je.message]||(this._warningHistory[Je.message]=!0,typeof console<"u"&&console.warn(Je.message)),this._defaultValue}};var To=function(M,R){this.kind=M,this._styleExpression=R,this.isStateDependent=M!=="constant"&&!tr(R.expression)};To.prototype.evaluateWithoutErrorHandling=function(M,R,Z,le,Te,Ie){return this._styleExpression.evaluateWithoutErrorHandling(M,R,Z,le,Te,Ie)},To.prototype.evaluate=function(M,R,Z,le,Te,Ie){return this._styleExpression.evaluate(M,R,Z,le,Te,Ie)};var $s=function(M,R,Z,le){this.kind=M,this.zoomStops=Z,this._styleExpression=R,this.isStateDependent=M!=="camera"&&!tr(R.expression),this.interpolationType=le};function Sc(M,R){if((M=es(M,R)).result==="error")return M;var Z=M.value.expression,le=or(Z);if(!le&&!$o(R))return gs([new bt("","data expressions not supported")]);var Te=gr(Z,["zoom"]);if(!Te&&!Qo(R))return gs([new bt("","zoom expressions not supported")]);var Ie=Hl(Z);if(!Ie&&!Te)return gs([new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ie instanceof bt)return gs([Ie]);if(Ie instanceof ha&&!vs(R))return gs([new bt("",'"interpolate" expressions cannot be used with this property')]);if(!Ie)return hc(new To(le?"constant":"source",M.value));var je=Ie instanceof ha?Ie.interpolation:void 0;return hc(new $s(le?"camera":"composite",M.value,Ie.labels,je))}$s.prototype.evaluateWithoutErrorHandling=function(M,R,Z,le,Te,Ie){return this._styleExpression.evaluateWithoutErrorHandling(M,R,Z,le,Te,Ie)},$s.prototype.evaluate=function(M,R,Z,le,Te,Ie){return this._styleExpression.evaluate(M,R,Z,le,Te,Ie)},$s.prototype.interpolationFactor=function(M,R,Z){return this.interpolationType?ha.interpolationFactor(this.interpolationType,M,R,Z):0};var _l=function(M,R){this._parameters=M,this._specification=R,vt(this,Ul(this._parameters,this._specification))};function Hl(M){var R=null;if(M instanceof _o)R=Hl(M.result);else if(M instanceof Ro)for(var Z=0,le=M.args;Z<le.length;Z+=1){var Te=le[Z];if(R=Hl(Te))break}else(M instanceof Pr||M instanceof ha)&&M.input instanceof vn&&M.input.name==="zoom"&&(R=M);return R instanceof bt||M.eachChild(function(Ie){var je=Hl(Ie);je instanceof bt?R=je:!R&&je?R=new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):R&&je&&R!==je&&(R=new bt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),R}function eo(M){var R=M.key,Z=M.value,le=M.valueSpec||{},Te=M.objectElementValidators||{},Ie=M.style,je=M.styleSpec,Je=[],lt=ni(Z);if(lt!=="object")return[new ft(R,Z,"object expected, "+lt+" found")];for(var _t in Z){var Tt=_t.split(".")[0],zt=le[Tt]||le["*"],Gt=void 0;if(Te[Tt])Gt=Te[Tt];else if(le[Tt])Gt=uo;else if(Te["*"])Gt=Te["*"];else{if(!le["*"]){Je.push(new ft(R,Z[_t],'unknown property "'+_t+'"'));continue}Gt=uo}Je=Je.concat(Gt({key:(R&&R+".")+_t,value:Z[_t],valueSpec:zt,style:Ie,styleSpec:je,object:Z,objectKey:_t},Z))}for(var Ut in le)Te[Ut]||le[Ut].required&&le[Ut].default===void 0&&Z[Ut]===void 0&&Je.push(new ft(R,Z,'missing required property "'+Ut+'"'));return Je}function Gl(M){var R=M.value,Z=M.valueSpec,le=M.style,Te=M.styleSpec,Ie=M.key,je=M.arrayElementValidator||uo;if(ni(R)!=="array")return[new ft(Ie,R,"array expected, "+ni(R)+" found")];if(Z.length&&R.length!==Z.length)return[new ft(Ie,R,"array length "+Z.length+" expected, length "+R.length+" found")];if(Z["min-length"]&&R.length<Z["min-length"])return[new ft(Ie,R,"array length at least "+Z["min-length"]+" expected, length "+R.length+" found")];var Je={type:Z.value,values:Z.values};Te.$version<7&&(Je.function=Z.function),ni(Z.value)==="object"&&(Je=Z.value);for(var lt=[],_t=0;_t<R.length;_t++)lt=lt.concat(je({array:R,arrayIndex:_t,value:R[_t],valueSpec:Je,style:le,styleSpec:Te,key:Ie+"["+_t+"]"}));return lt}function Cc(M){var R=M.key,Z=M.value,le=M.valueSpec,Te=ni(Z);return Te==="number"&&Z!=Z&&(Te="NaN"),Te!=="number"?[new ft(R,Z,"number expected, "+Te+" found")]:"minimum"in le&&Z<le.minimum?[new ft(R,Z,Z+" is less than the minimum value "+le.minimum)]:"maximum"in le&&Z>le.maximum?[new ft(R,Z,Z+" is greater than the maximum value "+le.maximum)]:[]}function Qs(M){var R,Z,le,Te=M.valueSpec,Ie=ut(M.value.type),je={},Je=Ie!=="categorical"&&M.value.property===void 0,lt=!Je,_t=ni(M.value.stops)==="array"&&ni(M.value.stops[0])==="array"&&ni(M.value.stops[0][0])==="object",Tt=eo({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Ut){if(Ie==="identity")return[new ft(Ut.key,Ut.value,'identity function may not have a "stops" property')];var on=[],cn=Ut.value;return on=on.concat(Gl({key:Ut.key,value:cn,valueSpec:Ut.valueSpec,style:Ut.style,styleSpec:Ut.styleSpec,arrayElementValidator:zt})),ni(cn)==="array"&&cn.length===0&&on.push(new ft(Ut.key,cn,"array must have at least one stop")),on},default:function(Ut){return uo({key:Ut.key,value:Ut.value,valueSpec:Te,style:Ut.style,styleSpec:Ut.styleSpec})}}});return Ie==="identity"&&Je&&Tt.push(new ft(M.key,M.value,'missing required property "property"')),Ie==="identity"||M.value.stops||Tt.push(new ft(M.key,M.value,'missing required property "stops"')),Ie==="exponential"&&M.valueSpec.expression&&!vs(M.valueSpec)&&Tt.push(new ft(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(lt&&!$o(M.valueSpec)?Tt.push(new ft(M.key,M.value,"property functions not supported")):Je&&!Qo(M.valueSpec)&&Tt.push(new ft(M.key,M.value,"zoom functions not supported"))),Ie!=="categorical"&&!_t||M.value.property!==void 0||Tt.push(new ft(M.key,M.value,'"property" property is required')),Tt;function zt(Ut){var on=[],cn=Ut.value,kn=Ut.key;if(ni(cn)!=="array")return[new ft(kn,cn,"array expected, "+ni(cn)+" found")];if(cn.length!==2)return[new ft(kn,cn,"array length 2 expected, length "+cn.length+" found")];if(_t){if(ni(cn[0])!=="object")return[new ft(kn,cn,"object expected, "+ni(cn[0])+" found")];if(cn[0].zoom===void 0)return[new ft(kn,cn,"object stop key must have zoom")];if(cn[0].value===void 0)return[new ft(kn,cn,"object stop key must have value")];if(le&&le>ut(cn[0].zoom))return[new ft(kn,cn[0].zoom,"stop zoom values must appear in ascending order")];ut(cn[0].zoom)!==le&&(le=ut(cn[0].zoom),Z=void 0,je={}),on=on.concat(eo({key:kn+"[0]",value:cn[0],valueSpec:{zoom:{}},style:Ut.style,styleSpec:Ut.styleSpec,objectElementValidators:{zoom:Cc,value:Gt}}))}else on=on.concat(Gt({key:kn+"[0]",value:cn[0],valueSpec:{},style:Ut.style,styleSpec:Ut.styleSpec},cn));return Ns(Mt(cn[1]))?on.concat([new ft(kn+"[1]",cn[1],"expressions are not allowed in function stops.")]):on.concat(uo({key:kn+"[1]",value:cn[1],valueSpec:Te,style:Ut.style,styleSpec:Ut.styleSpec}))}function Gt(Ut,on){var cn=ni(Ut.value),kn=ut(Ut.value),_n=Ut.value!==null?Ut.value:on;if(R){if(cn!==R)return[new ft(Ut.key,_n,cn+" stop domain type must match previous stop domain type "+R)]}else R=cn;if(cn!=="number"&&cn!=="string"&&cn!=="boolean")return[new ft(Ut.key,_n,"stop domain value must be a number, string, or boolean")];if(cn!=="number"&&Ie!=="categorical"){var Fn="number expected, "+cn+" found";return $o(Te)&&Ie===void 0&&(Fn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ft(Ut.key,_n,Fn)]}return Ie!=="categorical"||cn!=="number"||isFinite(kn)&&Math.floor(kn)===kn?Ie!=="categorical"&&cn==="number"&&Z!==void 0&&kn<Z?[new ft(Ut.key,_n,"stop domain values must appear in ascending order")]:(Z=kn,Ie==="categorical"&&kn in je?[new ft(Ut.key,_n,"stop domain values must be unique")]:(je[kn]=!0,[])):[new ft(Ut.key,_n,"integer expected, found "+kn)]}}function js(M){var R=(M.expressionContext==="property"?Sc:es)(Mt(M.value),M.valueSpec);if(R.result==="error")return R.value.map(function(le){return new ft(""+M.key+le.key,M.value,le.message)});var Z=R.value.expression||R.value._styleExpression.expression;if(M.expressionContext==="property"&&M.propertyKey==="text-font"&&!Z.outputDefined())return[new ft(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if(M.expressionContext==="property"&&M.propertyType==="layout"&&!tr(Z))return[new ft(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if(M.expressionContext==="filter"&&!tr(Z))return[new ft(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&M.expressionContext.indexOf("cluster")===0){if(!gr(Z,["zoom","feature-state"]))return[new ft(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(M.expressionContext==="cluster-initial"&&!or(Z))return[new ft(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function el(M){var R=M.key,Z=M.value,le=M.valueSpec,Te=[];return Array.isArray(le.values)?le.values.indexOf(ut(Z))===-1&&Te.push(new ft(R,Z,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(le.values).indexOf(ut(Z))===-1&&Te.push(new ft(R,Z,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(Z)+" found")),Te}function Us(M){if(M===!0||M===!1)return!0;if(!Array.isArray(M)||M.length===0)return!1;switch(M[0]){case"has":return M.length>=2&&M[1]!=="$id"&&M[1]!=="$type";case"in":return M.length>=3&&(typeof M[1]!="string"||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return M.length!==3||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var R=0,Z=M.slice(1);R<Z.length;R+=1){var le=Z[R];if(!Us(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}_l.deserialize=function(M){return new _l(M._parameters,M._specification)},_l.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Vs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function wl(M){if(M==null)return{filter:function(){return!0},needGeometry:!1};Us(M)||(M=xs(M));var R=es(M,Vs);if(R.result==="error")throw new Error(R.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,le,Te){return R.value.evaluate(Z,le,{},Te)},needGeometry:vi(M)}}function ql(M,R){return M<R?-1:M>R?1:0}function vi(M){if(!Array.isArray(M))return!1;if(M[0]==="within")return!0;for(var R=1;R<M.length;R++)if(vi(M[R]))return!0;return!1}function xs(M){if(!M)return!0;var R,Z=M[0];return M.length<=1?Z!=="any":Z==="=="?Ma(M[1],M[2],"=="):Z==="!="?gi(Ma(M[1],M[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?Ma(M[1],M[2],Z):Z==="any"?(R=M.slice(1),["any"].concat(R.map(xs))):Z==="all"?["all"].concat(M.slice(1).map(xs)):Z==="none"?["all"].concat(M.slice(1).map(xs).map(gi)):Z==="in"?ko(M[1],M.slice(2)):Z==="!in"?gi(ko(M[1],M.slice(2))):Z==="has"?ci(M[1]):Z==="!has"?gi(ci(M[1])):Z!=="within"||M}function Ma(M,R,Z){switch(M){case"$type":return["filter-type-"+Z,R];case"$id":return["filter-id-"+Z,R];default:return["filter-"+Z,M,R]}}function ko(M,R){if(R.length===0)return!1;switch(M){case"$type":return["filter-type-in",["literal",R]];case"$id":return["filter-id-in",["literal",R]];default:return R.length>200&&!R.some(function(Z){return typeof Z!=typeof R[0]})?["filter-in-large",M,["literal",R.sort(ql)]]:["filter-in-small",M,["literal",R]]}}function ci(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function gi(M){return["!",M]}function to(M){return Us(Mt(M.value))?js(vt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tl(M)}function tl(M){var R=M.value,Z=M.key;if(ni(R)!=="array")return[new ft(Z,R,"array expected, "+ni(R)+" found")];var le,Te=M.styleSpec,Ie=[];if(R.length<1)return[new ft(Z,R,"filter array must have at least 1 element")];switch(Ie=Ie.concat(el({key:Z+"[0]",value:R[0],valueSpec:Te.filter_operator,style:M.style,styleSpec:M.styleSpec})),ut(R[0])){case"<":case"<=":case">":case">=":R.length>=2&&ut(R[1])==="$type"&&Ie.push(new ft(Z,R,'"$type" cannot be use with operator "'+R[0]+'"'));case"==":case"!=":R.length!==3&&Ie.push(new ft(Z,R,'filter array for operator "'+R[0]+'" must have 3 elements'));case"in":case"!in":R.length>=2&&(le=ni(R[1]))!=="string"&&Ie.push(new ft(Z+"[1]",R[1],"string expected, "+le+" found"));for(var je=2;je<R.length;je++)le=ni(R[je]),ut(R[1])==="$type"?Ie=Ie.concat(el({key:Z+"["+je+"]",value:R[je],valueSpec:Te.geometry_type,style:M.style,styleSpec:M.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Ie.push(new ft(Z+"["+je+"]",R[je],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var Je=1;Je<R.length;Je++)Ie=Ie.concat(tl({key:Z+"["+Je+"]",value:R[Je],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":le=ni(R[1]),R.length!==2?Ie.push(new ft(Z,R,'filter array for "'+R[0]+'" operator must have 2 elements')):le!=="string"&&Ie.push(new ft(Z+"[1]",R[1],"string expected, "+le+" found"));break;case"within":le=ni(R[1]),R.length!==2?Ie.push(new ft(Z,R,'filter array for "'+R[0]+'" operator must have 2 elements')):le!=="object"&&Ie.push(new ft(Z+"[1]",R[1],"object expected, "+le+" found"))}return Ie}function Tl(M,R){var Z=M.key,le=M.style,Te=M.styleSpec,Ie=M.value,je=M.objectKey,Je=Te[R+"_"+M.layerType];if(!Je)return[];var lt=je.match(/^(.*)-transition$/);if(R==="paint"&&lt&&Je[lt[1]]&&Je[lt[1]].transition)return uo({key:Z,value:Ie,valueSpec:Te.transition,style:le,styleSpec:Te});var _t,Tt=M.valueSpec||Je[je];if(!Tt)return[new ft(Z,Ie,'unknown property "'+je+'"')];if(ni(Ie)==="string"&&$o(Tt)&&!Tt.tokens&&(_t=/^{([^}]+)}$/.exec(Ie)))return[new ft(Z,Ie,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_t[1])+" }`.")];var zt=[];return M.layerType==="symbol"&&(je==="text-field"&&le&&!le.glyphs&&zt.push(new ft(Z,Ie,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&Ks(Mt(Ie))&&ut(Ie.type)==="identity"&&zt.push(new ft(Z,Ie,'"text-font" does not support identity functions'))),zt.concat(uo({key:M.key,value:Ie,valueSpec:Tt,style:le,styleSpec:Te,expressionContext:"property",propertyType:R,propertyKey:je}))}function Wl(M){return Tl(M,"paint")}function kl(M){return Tl(M,"layout")}function Al(M){var R=[],Z=M.value,le=M.key,Te=M.style,Ie=M.styleSpec;Z.type||Z.ref||R.push(new ft(le,Z,'either "type" or "ref" is required'));var je,Je=ut(Z.type),lt=ut(Z.ref);if(Z.id)for(var _t=ut(Z.id),Tt=0;Tt<M.arrayIndex;Tt++){var zt=Te.layers[Tt];ut(zt.id)===_t&&R.push(new ft(le,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+zt.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(on){on in Z&&R.push(new ft(le,Z[on],'"'+on+'" is prohibited for ref layers'))}),Te.layers.forEach(function(on){ut(on.id)===lt&&(je=on)}),je?je.ref?R.push(new ft(le,Z.ref,"ref cannot reference another ref layer")):Je=ut(je.type):R.push(new ft(le,Z.ref,'ref layer "'+lt+'" not found'));else if(Je!=="background")if(Z.source){var Gt=Te.sources&&Te.sources[Z.source],Ut=Gt&&ut(Gt.type);Gt?Ut==="vector"&&Je==="raster"?R.push(new ft(le,Z.source,'layer "'+Z.id+'" requires a raster source')):Ut==="raster"&&Je!=="raster"?R.push(new ft(le,Z.source,'layer "'+Z.id+'" requires a vector source')):Ut!=="vector"||Z["source-layer"]?Ut==="raster-dem"&&Je!=="hillshade"?R.push(new ft(le,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Je!=="line"||!Z.paint||!Z.paint["line-gradient"]||Ut==="geojson"&&Gt.lineMetrics||R.push(new ft(le,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):R.push(new ft(le,Z,'layer "'+Z.id+'" must specify a "source-layer"')):R.push(new ft(le,Z.source,'source "'+Z.source+'" not found'))}else R.push(new ft(le,Z,'missing required property "source"'));return R=R.concat(eo({key:le,value:Z,valueSpec:Ie.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return uo({key:le+".type",value:Z.type,valueSpec:Ie.layer.type,style:M.style,styleSpec:M.styleSpec,object:Z,objectKey:"type"})},filter:to,layout:function(on){return eo({layer:Z,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(cn){return kl(vt({layerType:Je},cn))}}})},paint:function(on){return eo({layer:Z,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(cn){return Wl(vt({layerType:Je},cn))}}})}}})),R}function co(M){var R=M.value,Z=M.key,le=ni(R);return le!=="string"?[new ft(Z,R,"string expected, "+le+" found")]:[]}var bs={promoteId:function(M){var R=M.key,Z=M.value;if(ni(Z)==="string")return co({key:R,value:Z});var le=[];for(var Te in Z)le.push.apply(le,co({key:R+"."+Te,value:Z[Te]}));return le}};function _s(M){var R=M.value,Z=M.key,le=M.styleSpec,Te=M.style;if(!R.type)return[new ft(Z,R,'"type" is required')];var Ie,je=ut(R.type);switch(je){case"vector":case"raster":case"raster-dem":return eo({key:Z,value:R,valueSpec:le["source_"+je.replace("-","_")],style:M.style,styleSpec:le,objectElementValidators:bs});case"geojson":if(Ie=eo({key:Z,value:R,valueSpec:le.source_geojson,style:Te,styleSpec:le,objectElementValidators:bs}),R.cluster)for(var Je in R.clusterProperties){var lt=R.clusterProperties[Je],_t=lt[0],Tt=lt[1],zt=typeof _t=="string"?[_t,["accumulated"],["get",Je]]:_t;Ie.push.apply(Ie,js({key:Z+"."+Je+".map",value:Tt,expressionContext:"cluster-map"})),Ie.push.apply(Ie,js({key:Z+"."+Je+".reduce",value:zt,expressionContext:"cluster-reduce"}))}return Ie;case"video":return eo({key:Z,value:R,valueSpec:le.source_video,style:Te,styleSpec:le});case"image":return eo({key:Z,value:R,valueSpec:le.source_image,style:Te,styleSpec:le});case"canvas":return[new ft(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return el({key:Z+".type",value:R.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Te,styleSpec:le})}}function Pa(M){var R=M.value,Z=M.styleSpec,le=Z.light,Te=M.style,Ie=[],je=ni(R);if(R===void 0)return Ie;if(je!=="object")return Ie.concat([new ft("light",R,"object expected, "+je+" found")]);for(var Je in R){var lt=Je.match(/^(.*)-transition$/);Ie=lt&&le[lt[1]]&&le[lt[1]].transition?Ie.concat(uo({key:Je,value:R[Je],valueSpec:Z.transition,style:Te,styleSpec:Z})):le[Je]?Ie.concat(uo({key:Je,value:R[Je],valueSpec:le[Je],style:Te,styleSpec:Z})):Ie.concat([new ft(Je,R[Je],'unknown property "'+Je+'"')])}return Ie}var Ml={"*":function(){return[]},array:Gl,boolean:function(M){var R=M.value,Z=M.key,le=ni(R);return le!=="boolean"?[new ft(Z,R,"boolean expected, "+le+" found")]:[]},number:Cc,color:function(M){var R=M.key,Z=M.value,le=ni(Z);return le!=="string"?[new ft(R,Z,"color expected, "+le+" found")]:Cn(Z)===null?[new ft(R,Z,'color expected, "'+Z+'" found')]:[]},constants:mt,enum:el,filter:to,function:Qs,layer:Al,object:eo,source:_s,light:Pa,string:co,formatted:function(M){return co(M).length===0?[]:js(M)},resolvedImage:function(M){return co(M).length===0?[]:js(M)}};function uo(M){var R=M.value,Z=M.valueSpec,le=M.styleSpec;return Z.expression&&Ks(ut(R))?Qs(M):Z.expression&&Ns(Mt(R))?js(M):Z.type&&Ml[Z.type]?Ml[Z.type](M):eo(vt({},M,{valueSpec:Z.type?le[Z.type]:Z}))}function da(M){var R=M.value,Z=M.key,le=co(M);return le.length||(R.indexOf("{fontstack}")===-1&&le.push(new ft(Z,R,'"glyphs" url must include a "{fontstack}" token')),R.indexOf("{range}")===-1&&le.push(new ft(Z,R,'"glyphs" url must include a "{range}" token'))),le}function xa(M,R){R===void 0&&(R=We);var Z=[];return Z=Z.concat(uo({key:"",value:M,valueSpec:R.$root,styleSpec:R,style:M,objectElementValidators:{glyphs:da,"*":function(){return[]}}})),M.constants&&(Z=Z.concat(mt({key:"constants",value:M.constants,style:M,styleSpec:R}))),ki(Z)}function ki(M){return[].concat(M).sort(function(R,Z){return R.line-Z.line})}function ba(M){return function(){for(var R=[],Z=arguments.length;Z--;)R[Z]=arguments[Z];return ki(M.apply(this,R))}}xa.source=ba(_s),xa.light=ba(Pa),xa.layer=ba(Al),xa.filter=ba(to),xa.paintProperty=ba(Wl),xa.layoutProperty=ba(kl);var No=xa,Hs=No.light,Ao=No.paintProperty,ws=No.layoutProperty;function Na(M,R){var Z=!1;if(R&&R.length)for(var le=0,Te=R;le<Te.length;le+=1){var Ie=Te[le];M.fire(new Fe(new Error(Ie.message))),Z=!0}return Z}var Gs=fo,ts=3;function fo(M,R,Z){var le=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var Te=new Int32Array(this.arrayBuffer);M=Te[0],R=Te[1],Z=Te[2],this.d=R+2*Z;for(var Ie=0;Ie<this.d*this.d;Ie++){var je=Te[ts+Ie],Je=Te[ts+Ie+1];le.push(je===Je?null:Te.subarray(je,Je))}var lt=Te[ts+le.length],_t=Te[ts+le.length+1];this.keys=Te.subarray(lt,_t),this.bboxes=Te.subarray(_t),this.insert=this._insertReadonly}else{this.d=R+2*Z;for(var Tt=0;Tt<this.d*this.d;Tt++)le.push([]);this.keys=[],this.bboxes=[]}this.n=R,this.extent=M,this.padding=Z,this.scale=R/M,this.uid=0;var zt=Z/R*M;this.min=-zt,this.max=M+zt}fo.prototype.insert=function(M,R,Z,le,Te){this._forEachCell(R,Z,le,Te,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(R),this.bboxes.push(Z),this.bboxes.push(le),this.bboxes.push(Te)},fo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},fo.prototype._insertCell=function(M,R,Z,le,Te,Ie){this.cells[Te].push(Ie)},fo.prototype.query=function(M,R,Z,le,Te){var Ie=this.min,je=this.max;if(M<=Ie&&R<=Ie&&je<=Z&&je<=le&&!Te)return Array.prototype.slice.call(this.keys);var Je=[];return this._forEachCell(M,R,Z,le,this._queryCell,Je,{},Te),Je},fo.prototype._queryCell=function(M,R,Z,le,Te,Ie,je,Je){var lt=this.cells[Te];if(lt!==null)for(var _t=this.keys,Tt=this.bboxes,zt=0;zt<lt.length;zt++){var Gt=lt[zt];if(je[Gt]===void 0){var Ut=4*Gt;(Je?Je(Tt[Ut+0],Tt[Ut+1],Tt[Ut+2],Tt[Ut+3]):M<=Tt[Ut+2]&&R<=Tt[Ut+3]&&Z>=Tt[Ut+0]&&le>=Tt[Ut+1])?(je[Gt]=!0,Ie.push(_t[Gt])):je[Gt]=!1}}},fo.prototype._forEachCell=function(M,R,Z,le,Te,Ie,je,Je){for(var lt=this._convertToCellCoord(M),_t=this._convertToCellCoord(R),Tt=this._convertToCellCoord(Z),zt=this._convertToCellCoord(le),Gt=lt;Gt<=Tt;Gt++)for(var Ut=_t;Ut<=zt;Ut++){var on=this.d*Ut+Gt;if((!Je||Je(this._convertFromCellCoord(Gt),this._convertFromCellCoord(Ut),this._convertFromCellCoord(Gt+1),this._convertFromCellCoord(Ut+1)))&&Te.call(this,M,R,Z,le,on,Ie,je,Je))return}},fo.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},fo.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},fo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,R=ts+this.cells.length+1+1,Z=0,le=0;le<this.cells.length;le++)Z+=this.cells[le].length;var Te=new Int32Array(R+Z+this.keys.length+this.bboxes.length);Te[0]=this.extent,Te[1]=this.n,Te[2]=this.padding;for(var Ie=R,je=0;je<M.length;je++){var Je=M[je];Te[ts+je]=Ie,Te.set(Je,Ie),Ie+=Je.length}return Te[ts+M.length]=Ie,Te.set(this.keys,Ie),Ie+=this.keys.length,Te[ts+M.length+1]=Ie,Te.set(this.bboxes,Ie),Ie+=this.bboxes.length,Te.buffer};var ho=r.ImageData,Si=r.ImageBitmap,Mo={};function Lr(M,R,Z){Z===void 0&&(Z={}),Object.defineProperty(R,"_classRegistryKey",{value:M,writeable:!1}),Mo[M]={klass:R,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var Sl in Lr("Object",Object),Gs.serialize=function(M,R){var Z=M.toArrayBuffer();return R&&R.push(Z),{buffer:Z}},Gs.deserialize=function(M){return new Gs(M.buffer)},Lr("Grid",Gs),Lr("Color",Ln),Lr("Error",Error),Lr("ResolvedImage",Qn),Lr("StylePropertyFunction",_l),Lr("StyleExpression",ys,{omit:["_evaluator"]}),Lr("ZoomDependentExpression",$s),Lr("ZoomConstantExpression",To),Lr("CompoundExpression",vn,{omit:["_evaluate"]}),Zs)Zs[Sl]._classRegistryKey||Lr("Expression_"+Sl,Zs[Sl]);function dc(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&M.constructor.name==="ArrayBuffer")}function Ts(M){return Si&&M instanceof Si}function ks(M,R){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(dc(M)||Ts(M))return R&&R.push(M),M;if(ArrayBuffer.isView(M)){var Z=M;return R&&R.push(Z.buffer),Z}if(M instanceof ho)return R&&R.push(M.data.buffer),M;if(Array.isArray(M)){for(var le=[],Te=0,Ie=M;Te<Ie.length;Te+=1){var je=Ie[Te];le.push(ks(je,R))}return le}if(typeof M=="object"){var Je=M.constructor,lt=Je._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var _t=Je.serialize?Je.serialize(M,R):{};if(!Je.serialize){for(var Tt in M)if(M.hasOwnProperty(Tt)&&!(Mo[lt].omit.indexOf(Tt)>=0)){var zt=M[Tt];_t[Tt]=Mo[lt].shallow.indexOf(Tt)>=0?zt:ks(zt,R)}M instanceof Error&&(_t.message=M.message)}if(_t.$name)throw new Error("$name property is reserved for worker serialization logic.");return lt!=="Object"&&(_t.$name=lt),_t}throw new Error("can't serialize object of type "+typeof M)}function qs(M){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||dc(M)||Ts(M)||ArrayBuffer.isView(M)||M instanceof ho)return M;if(Array.isArray(M))return M.map(qs);if(typeof M=="object"){var R=M.$name||"Object",Z=Mo[R].klass;if(!Z)throw new Error("can't deserialize unregistered class "+R);if(Z.deserialize)return Z.deserialize(M);for(var le=Object.create(Z.prototype),Te=0,Ie=Object.keys(M);Te<Ie.length;Te+=1){var je=Ie[Te];if(je!=="$name"){var Je=M[je];le[je]=Mo[R].shallow.indexOf(je)>=0?Je:qs(Je)}}return le}throw new Error("can't deserialize object of type "+typeof M)}var nl=function(){this.first=!0};nl.prototype.update=function(M,R){var Z=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=R):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=R),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=Z,!0))};var kr={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Cl(M){for(var R=0,Z=M;R<Z.length;R+=1)if(ns(Z[R].charCodeAt(0)))return!0;return!1}function ns(M){return!(M!==746&&M!==747&&(M<4352||!(kr["Bopomofo Extended"](M)||kr.Bopomofo(M)||kr["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||kr["CJK Compatibility Ideographs"](M)||kr["CJK Compatibility"](M)||kr["CJK Radicals Supplement"](M)||kr["CJK Strokes"](M)||!(!kr["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||M===12336)||kr["CJK Unified Ideographs Extension A"](M)||kr["CJK Unified Ideographs"](M)||kr["Enclosed CJK Letters and Months"](M)||kr["Hangul Compatibility Jamo"](M)||kr["Hangul Jamo Extended-A"](M)||kr["Hangul Jamo Extended-B"](M)||kr["Hangul Jamo"](M)||kr["Hangul Syllables"](M)||kr.Hiragana(M)||kr["Ideographic Description Characters"](M)||kr.Kanbun(M)||kr["Kangxi Radicals"](M)||kr["Katakana Phonetic Extensions"](M)||kr.Katakana(M)&&M!==12540||!(!kr["Halfwidth and Fullwidth Forms"](M)||M===65288||M===65289||M===65293||M>=65306&&M<=65310||M===65339||M===65341||M===65343||M>=65371&&M<=65503||M===65507||M>=65512&&M<=65519)||!(!kr["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||kr["Unified Canadian Aboriginal Syllabics"](M)||kr["Unified Canadian Aboriginal Syllabics Extended"](M)||kr["Vertical Forms"](M)||kr["Yijing Hexagram Symbols"](M)||kr["Yi Syllables"](M)||kr["Yi Radicals"](M))))}function pa(M){return!(ns(M)||function(R){return!!(kr["Latin-1 Supplement"](R)&&(R===167||R===169||R===174||R===177||R===188||R===189||R===190||R===215||R===247)||kr["General Punctuation"](R)&&(R===8214||R===8224||R===8225||R===8240||R===8241||R===8251||R===8252||R===8258||R===8263||R===8264||R===8265||R===8273)||kr["Letterlike Symbols"](R)||kr["Number Forms"](R)||kr["Miscellaneous Technical"](R)&&(R>=8960&&R<=8967||R>=8972&&R<=8991||R>=8996&&R<=9e3||R===9003||R>=9085&&R<=9114||R>=9150&&R<=9165||R===9167||R>=9169&&R<=9179||R>=9186&&R<=9215)||kr["Control Pictures"](R)&&R!==9251||kr["Optical Character Recognition"](R)||kr["Enclosed Alphanumerics"](R)||kr["Geometric Shapes"](R)||kr["Miscellaneous Symbols"](R)&&!(R>=9754&&R<=9759)||kr["Miscellaneous Symbols and Arrows"](R)&&(R>=11026&&R<=11055||R>=11088&&R<=11097||R>=11192&&R<=11243)||kr["CJK Symbols and Punctuation"](R)||kr.Katakana(R)||kr["Private Use Area"](R)||kr["CJK Compatibility Forms"](R)||kr["Small Form Variants"](R)||kr["Halfwidth and Fullwidth Forms"](R)||R===8734||R===8756||R===8757||R>=9984&&R<=10087||R>=10102&&R<=10131||R===65532||R===65533)}(M))}function As(M){return kr.Arabic(M)||kr["Arabic Supplement"](M)||kr["Arabic Extended-A"](M)||kr["Arabic Presentation Forms-A"](M)||kr["Arabic Presentation Forms-B"](M)}function So(M){return M>=1424&&M<=2303||kr["Arabic Presentation Forms-A"](M)||kr["Arabic Presentation Forms-B"](M)}function po(M,R){return!(!R&&So(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||kr.Khmer(M))}function Da(M){for(var R=0,Z=M;R<Z.length;R+=1)if(So(Z[R].charCodeAt(0)))return!0;return!1}var jo="deferred",mo="loading",rs="loaded",El="error",Ms=null,si="unavailable",_a=null,ja=function(M){M&&typeof M=="string"&&M.indexOf("NetworkError")>-1&&(si=El),Ms&&Ms(M)};function Uo(){Ua.fire(new ze("pluginStateChange",{pluginStatus:si,pluginURL:_a}))}var Ua=new rt,rl=function(){return si},il=function(){if(si!==jo||!_a)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");si=mo,Uo(),_a&&Rt({url:_a},function(M){M?ja(M):(si=rs,Uo())})},Va={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return si===rs||Va.applyArabicShaping!=null},isLoading:function(){return si===mo},setState:function(M){si=M.pluginStatus,_a=M.pluginURL},isParsed:function(){return Va.applyArabicShaping!=null&&Va.processBidirectionalText!=null&&Va.processStyledBidirectionalText!=null},getPluginURL:function(){return _a}},ai=function(M,R){this.zoom=M,R?(this.now=R.now,this.fadeDuration=R.fadeDuration,this.zoomHistory=R.zoomHistory,this.transition=R.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nl,this.transition={})};ai.prototype.isSupportedScript=function(M){return function(R,Z){for(var le=0,Te=R;le<Te.length;le+=1)if(!po(Te[le].charCodeAt(0),Z))return!1;return!0}(M,Va.isLoaded())},ai.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ai.prototype.getCrossfadeParameters=function(){var M=this.zoom,R=M-Math.floor(M),Z=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:R+(1-R)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*R}};var Vo=function(M,R){this.property=M,this.value=R,this.expression=function(Z,le){if(Ks(Z))return new _l(Z,le);if(Ns(Z)){var Te=Sc(Z,le);if(Te.result==="error")throw new Error(Te.value.map(function(je){return je.key+": "+je.message}).join(", "));return Te.value}var Ie=Z;return typeof Z=="string"&&le.type==="color"&&(Ie=Ln.parse(Z)),{kind:"constant",evaluate:function(){return Ie}}}(R===void 0?M.specification.default:R,M.specification)};Vo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Vo.prototype.possiblyEvaluate=function(M,R,Z){return this.property.possiblyEvaluate(this,M,R,Z)};var Ws=function(M){this.property=M,this.value=new Vo(M,void 0)};Ws.prototype.transitioned=function(M,R){return new al(this.property,this.value,R,u({},M.transition,this.transition),M.now)},Ws.prototype.untransitioned=function(){return new al(this.property,this.value,null,{},0)};var Co=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};Co.prototype.getValue=function(M){return S(this._values[M].value.value)},Co.prototype.setValue=function(M,R){this._values.hasOwnProperty(M)||(this._values[M]=new Ws(this._values[M].property)),this._values[M].value=new Vo(this._values[M].property,R===null?void 0:S(R))},Co.prototype.getTransition=function(M){return S(this._values[M].transition)},Co.prototype.setTransition=function(M,R){this._values.hasOwnProperty(M)||(this._values[M]=new Ws(this._values[M].property)),this._values[M].transition=S(R)||void 0},Co.prototype.serialize=function(){for(var M={},R=0,Z=Object.keys(this._values);R<Z.length;R+=1){var le=Z[R],Te=this.getValue(le);Te!==void 0&&(M[le]=Te);var Ie=this.getTransition(le);Ie!==void 0&&(M[le+"-transition"]=Ie)}return M},Co.prototype.transitioned=function(M,R){for(var Z=new ol(this._properties),le=0,Te=Object.keys(this._values);le<Te.length;le+=1){var Ie=Te[le];Z._values[Ie]=this._values[Ie].transitioned(M,R._values[Ie])}return Z},Co.prototype.untransitioned=function(){for(var M=new ol(this._properties),R=0,Z=Object.keys(this._values);R<Z.length;R+=1){var le=Z[R];M._values[le]=this._values[le].untransitioned()}return M};var al=function(M,R,Z,le,Te){this.property=M,this.value=R,this.begin=Te+le.delay||0,this.end=this.begin+le.duration||0,M.specification.transition&&(le.delay||le.duration)&&(this.prior=Z)};al.prototype.possiblyEvaluate=function(M,R,Z){var le=M.now||0,Te=this.value.possiblyEvaluate(M,R,Z),Ie=this.prior;if(Ie){if(le>this.end)return this.prior=null,Te;if(this.value.isDataDriven())return this.prior=null,Te;if(le<this.begin)return Ie.possiblyEvaluate(M,R,Z);var je=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Ie.possiblyEvaluate(M,R,Z),Te,function(Je){if(Je<=0)return 0;if(Je>=1)return 1;var lt=Je*Je,_t=lt*Je;return 4*(Je<.5?_t:3*(Je-lt)+_t-.75)}(je))}return Te};var ol=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};ol.prototype.possiblyEvaluate=function(M,R,Z){for(var le=new Ys(this._properties),Te=0,Ie=Object.keys(this._values);Te<Ie.length;Te+=1){var je=Ie[Te];le._values[je]=this._values[je].possiblyEvaluate(M,R,Z)}return le},ol.prototype.hasTransition=function(){for(var M=0,R=Object.keys(this._values);M<R.length;M+=1){var Z=R[M];if(this._values[Z].prior)return!0}return!1};var Eo=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};Eo.prototype.getValue=function(M){return S(this._values[M].value)},Eo.prototype.setValue=function(M,R){this._values[M]=new Vo(this._values[M].property,R===null?void 0:S(R))},Eo.prototype.serialize=function(){for(var M={},R=0,Z=Object.keys(this._values);R<Z.length;R+=1){var le=Z[R],Te=this.getValue(le);Te!==void 0&&(M[le]=Te)}return M},Eo.prototype.possiblyEvaluate=function(M,R,Z){for(var le=new Ys(this._properties),Te=0,Ie=Object.keys(this._values);Te<Ie.length;Te+=1){var je=Ie[Te];le._values[je]=this._values[je].possiblyEvaluate(M,R,Z)}return le};var Ci=function(M,R,Z){this.property=M,this.value=R,this.parameters=Z};Ci.prototype.isConstant=function(){return this.value.kind==="constant"},Ci.prototype.constantOr=function(M){return this.value.kind==="constant"?this.value.value:M},Ci.prototype.evaluate=function(M,R,Z,le){return this.property.evaluate(this.value,this.parameters,M,R,Z,le)};var Ys=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};Ys.prototype.get=function(M){return this._values[M]};var Dr=function(M){this.specification=M};Dr.prototype.possiblyEvaluate=function(M,R){return M.expression.evaluate(R)},Dr.prototype.interpolate=function(M,R,Z){var le=Ai[this.specification.type];return le?le(M,R,Z):M};var Ur=function(M,R){this.specification=M,this.overrides=R};Ur.prototype.possiblyEvaluate=function(M,R,Z,le){return M.expression.kind==="constant"||M.expression.kind==="camera"?new Ci(this,{kind:"constant",value:M.expression.evaluate(R,null,{},Z,le)},R):new Ci(this,M.expression,R)},Ur.prototype.interpolate=function(M,R,Z){if(M.value.kind!=="constant"||R.value.kind!=="constant")return M;if(M.value.value===void 0||R.value.value===void 0)return new Ci(this,{kind:"constant",value:void 0},M.parameters);var le=Ai[this.specification.type];return le?new Ci(this,{kind:"constant",value:le(M.value.value,R.value.value,Z)},M.parameters):M},Ur.prototype.evaluate=function(M,R,Z,le,Te,Ie){return M.kind==="constant"?M.value:M.evaluate(R,Z,le,Te,Ie)};var no=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.possiblyEvaluate=function(Z,le,Te,Ie){if(Z.value===void 0)return new Ci(this,{kind:"constant",value:void 0},le);if(Z.expression.kind==="constant"){var je=Z.expression.evaluate(le,null,{},Te,Ie),Je=Z.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,lt=this._calculate(Je,Je,Je,le);return new Ci(this,{kind:"constant",value:lt},le)}if(Z.expression.kind==="camera"){var _t=this._calculate(Z.expression.evaluate({zoom:le.zoom-1}),Z.expression.evaluate({zoom:le.zoom}),Z.expression.evaluate({zoom:le.zoom+1}),le);return new Ci(this,{kind:"constant",value:_t},le)}return new Ci(this,Z.expression,le)},R.prototype.evaluate=function(Z,le,Te,Ie,je,Je){if(Z.kind==="source"){var lt=Z.evaluate(le,Te,Ie,je,Je);return this._calculate(lt,lt,lt,le)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(le.zoom)-1},Te,Ie),Z.evaluate({zoom:Math.floor(le.zoom)},Te,Ie),Z.evaluate({zoom:Math.floor(le.zoom)+1},Te,Ie),le):Z.value},R.prototype._calculate=function(Z,le,Te,Ie){return Ie.zoom>Ie.zoomHistory.lastIntegerZoom?{from:Z,to:le}:{from:Te,to:le}},R.prototype.interpolate=function(Z){return Z},R}(Ur),Ho=function(M){this.specification=M};Ho.prototype.possiblyEvaluate=function(M,R,Z,le){if(M.value!==void 0){if(M.expression.kind==="constant"){var Te=M.expression.evaluate(R,null,{},Z,le);return this._calculate(Te,Te,Te,R)}return this._calculate(M.expression.evaluate(new ai(Math.floor(R.zoom-1),R)),M.expression.evaluate(new ai(Math.floor(R.zoom),R)),M.expression.evaluate(new ai(Math.floor(R.zoom+1),R)),R)}},Ho.prototype._calculate=function(M,R,Z,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:M,to:R}:{from:Z,to:R}},Ho.prototype.interpolate=function(M){return M};var is=function(M){this.specification=M};is.prototype.possiblyEvaluate=function(M,R,Z,le){return!!M.expression.evaluate(R,null,{},Z,le)},is.prototype.interpolate=function(){return!1};var $i=function(M){for(var R in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var Z=M[R];Z.specification.overridable&&this.overridableProperties.push(R);var le=this.defaultPropertyValues[R]=new Vo(Z,void 0),Te=this.defaultTransitionablePropertyValues[R]=new Ws(Z);this.defaultTransitioningPropertyValues[R]=Te.untransitioned(),this.defaultPossiblyEvaluatedValues[R]=le.possiblyEvaluate({})}};Lr("DataDrivenProperty",Ur),Lr("DataConstantProperty",Dr),Lr("CrossFadedDataDrivenProperty",no),Lr("CrossFadedProperty",Ho),Lr("ColorRampProperty",is);var Go="-transition",yi=function(M){function R(Z,le){if(M.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),le.layout&&(this._unevaluatedLayout=new Eo(le.layout)),le.paint)){for(var Te in this._transitionablePaint=new Co(le.paint),Z.paint)this.setPaintProperty(Te,Z.paint[Te],{validate:!1});for(var Ie in Z.layout)this.setLayoutProperty(Ie,Z.layout[Ie],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ys(le.paint)}}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},R.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},R.prototype.setLayoutProperty=function(Z,le,Te){if(Te===void 0&&(Te={}),le!=null){var Ie="layers."+this.id+".layout."+Z;if(this._validate(ws,Ie,Z,le,Te))return}Z!=="visibility"?this._unevaluatedLayout.setValue(Z,le):this.visibility=le},R.prototype.getPaintProperty=function(Z){return v(Z,Go)?this._transitionablePaint.getTransition(Z.slice(0,-11)):this._transitionablePaint.getValue(Z)},R.prototype.setPaintProperty=function(Z,le,Te){if(Te===void 0&&(Te={}),le!=null){var Ie="layers."+this.id+".paint."+Z;if(this._validate(Ao,Ie,Z,le,Te))return!1}if(v(Z,Go))return this._transitionablePaint.setTransition(Z.slice(0,-11),le||void 0),!1;var je=this._transitionablePaint._values[Z],Je=je.property.specification["property-type"]==="cross-faded-data-driven",lt=je.value.isDataDriven(),_t=je.value;this._transitionablePaint.setValue(Z,le),this._handleSpecialPaintPropertyUpdate(Z);var Tt=this._transitionablePaint._values[Z].value;return Tt.isDataDriven()||lt||Je||this._handleOverridablePaintPropertyUpdate(Z,_t,Tt)},R.prototype._handleSpecialPaintPropertyUpdate=function(Z){},R.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Te){return!1},R.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},R.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},R.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},R.prototype.recalculate=function(Z,le){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,le)},R.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),h(Z,function(le,Te){return!(le===void 0||Te==="layout"&&!Object.keys(le).length||Te==="paint"&&!Object.keys(le).length)})},R.prototype._validate=function(Z,le,Te,Ie,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&Na(this,Z.call(No,{key:le,layerType:this.type,objectKey:Te,value:Ie,styleSpec:We,style:{glyphs:!0,sprite:!0}}))},R.prototype.is3D=function(){return!1},R.prototype.isTileClipped=function(){return!1},R.prototype.hasOffscreenPass=function(){return!1},R.prototype.resize=function(){},R.prototype.isStateDependent=function(){for(var Z in this.paint._values){var le=this.paint.get(Z);if(le instanceof Ci&&$o(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},R}(rt),Ec={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ro=function(M,R){this._structArray=M,this._pos1=R*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},_i=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Pi(M,R){R===void 0&&(R=1);var Z=0,le=0;return{members:M.map(function(Te){var Ie,je=(Ie=Te.type,Ec[Ie].BYTES_PER_ELEMENT),Je=Z=Za(Z,Math.max(R,je)),lt=Te.components||1;return le=Math.max(le,je),Z+=je*lt,{name:Te.name,type:Te.type,components:lt,offset:Je}}),size:Za(Z,Math.max(le,R)),alignment:R}}function Za(M,R){return Math.ceil(M/R)*R}_i.serialize=function(M,R){return M._trim(),R&&(M.isTransferred=!0,R.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},_i.deserialize=function(M){var R=Object.create(this.prototype);return R.arrayBuffer=M.arrayBuffer,R.length=M.length,R.capacity=M.arrayBuffer.byteLength/R.bytesPerElement,R._refreshViews(),R},_i.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},_i.prototype.clear=function(){this.length=0},_i.prototype.resize=function(M){this.reserve(M),this.length=M},_i.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var R=this.uint8;this._refreshViews(),R&&this.uint8.set(R)}},_i.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ss=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},R.prototype.emplace=function(Z,le,Te){var Ie=2*Z;return this.int16[Ie+0]=le,this.int16[Ie+1]=Te,Z},R}(_i);Ss.prototype.bytesPerElement=4,Lr("StructArrayLayout2i4",Ss);var pc=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Ie)},R.prototype.emplace=function(Z,le,Te,Ie,je){var Je=4*Z;return this.int16[Je+0]=le,this.int16[Je+1]=Te,this.int16[Je+2]=Ie,this.int16[Je+3]=je,Z},R}(_i);pc.prototype.bytesPerElement=8,Lr("StructArrayLayout4i8",pc);var Ke=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,le,Te,Ie,je,Je)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt){var _t=6*Z;return this.int16[_t+0]=le,this.int16[_t+1]=Te,this.int16[_t+2]=Ie,this.int16[_t+3]=je,this.int16[_t+4]=Je,this.int16[_t+5]=lt,Z},R}(_i);Ke.prototype.bytesPerElement=12,Lr("StructArrayLayout2i4i12",Ke);var Qe=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,le,Te,Ie,je,Je)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt){var _t=4*Z,Tt=8*Z;return this.int16[_t+0]=le,this.int16[_t+1]=Te,this.uint8[Tt+4]=Ie,this.uint8[Tt+5]=je,this.uint8[Tt+6]=Je,this.uint8[Tt+7]=lt,Z},R}(_i);Qe.prototype.bytesPerElement=8,Lr("StructArrayLayout2i4ub8",Qe);var st=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},R.prototype.emplace=function(Z,le,Te){var Ie=2*Z;return this.float32[Ie+0]=le,this.float32[Ie+1]=Te,Z},R}(_i);st.prototype.bytesPerElement=8,Lr("StructArrayLayout2f8",st);var N=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt){var Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt){var Ut=10*Z;return this.uint16[Ut+0]=le,this.uint16[Ut+1]=Te,this.uint16[Ut+2]=Ie,this.uint16[Ut+3]=je,this.uint16[Ut+4]=Je,this.uint16[Ut+5]=lt,this.uint16[Ut+6]=_t,this.uint16[Ut+7]=Tt,this.uint16[Ut+8]=zt,this.uint16[Ut+9]=Gt,Z},R}(_i);N.prototype.bytesPerElement=20,Lr("StructArrayLayout10ui20",N);var W=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut){var on=this.length;return this.resize(on+1),this.emplace(on,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on){var cn=12*Z;return this.int16[cn+0]=le,this.int16[cn+1]=Te,this.int16[cn+2]=Ie,this.int16[cn+3]=je,this.uint16[cn+4]=Je,this.uint16[cn+5]=lt,this.uint16[cn+6]=_t,this.uint16[cn+7]=Tt,this.int16[cn+8]=zt,this.int16[cn+9]=Gt,this.int16[cn+10]=Ut,this.int16[cn+11]=on,Z},R}(_i);W.prototype.bytesPerElement=24,Lr("StructArrayLayout4i4ui4i24",W);var G=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,Z,le,Te)},R.prototype.emplace=function(Z,le,Te,Ie){var je=3*Z;return this.float32[je+0]=le,this.float32[je+1]=Te,this.float32[je+2]=Ie,Z},R}(_i);G.prototype.bytesPerElement=12,Lr("StructArrayLayout3f12",G);var L=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},R.prototype.emplace=function(Z,le){var Te=1*Z;return this.uint32[Te+0]=le,Z},R}(_i);L.prototype.bytesPerElement=4,Lr("StructArrayLayout1ul4",L);var H=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je,lt,_t,Tt){var zt=this.length;return this.resize(zt+1),this.emplace(zt,Z,le,Te,Ie,je,Je,lt,_t,Tt)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt){var Gt=10*Z,Ut=5*Z;return this.int16[Gt+0]=le,this.int16[Gt+1]=Te,this.int16[Gt+2]=Ie,this.int16[Gt+3]=je,this.int16[Gt+4]=Je,this.int16[Gt+5]=lt,this.uint32[Ut+3]=_t,this.uint16[Gt+8]=Tt,this.uint16[Gt+9]=zt,Z},R}(_i);H.prototype.bytesPerElement=20,Lr("StructArrayLayout6i1ul2ui20",H);var $=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,le,Te,Ie,je,Je)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt){var _t=6*Z;return this.int16[_t+0]=le,this.int16[_t+1]=Te,this.int16[_t+2]=Ie,this.int16[_t+3]=je,this.int16[_t+4]=Je,this.int16[_t+5]=lt,Z},R}(_i);$.prototype.bytesPerElement=12,Lr("StructArrayLayout2i2i2i12",$);var ne=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je){var Je=this.length;return this.resize(Je+1),this.emplace(Je,Z,le,Te,Ie,je)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je){var lt=4*Z,_t=8*Z;return this.float32[lt+0]=le,this.float32[lt+1]=Te,this.float32[lt+2]=Ie,this.int16[_t+6]=je,this.int16[_t+7]=Je,Z},R}(_i);ne.prototype.bytesPerElement=16,Lr("StructArrayLayout2f1f2i16",ne);var ce=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Ie)},R.prototype.emplace=function(Z,le,Te,Ie,je){var Je=12*Z,lt=3*Z;return this.uint8[Je+0]=le,this.uint8[Je+1]=Te,this.float32[lt+1]=Ie,this.float32[lt+2]=je,Z},R}(_i);ce.prototype.bytesPerElement=12,Lr("StructArrayLayout2ub2f12",ce);var xe=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,Z,le,Te)},R.prototype.emplace=function(Z,le,Te,Ie){var je=3*Z;return this.uint16[je+0]=le,this.uint16[je+1]=Te,this.uint16[je+2]=Ie,Z},R}(_i);xe.prototype.bytesPerElement=6,Lr("StructArrayLayout3ui6",xe);var Le=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn,kn,_n,Fn){var Bn=this.length;return this.resize(Bn+1),this.emplace(Bn,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn,kn,_n,Fn)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn,kn,_n,Fn,Bn){var Wn=24*Z,$n=12*Z,lr=48*Z;return this.int16[Wn+0]=le,this.int16[Wn+1]=Te,this.uint16[Wn+2]=Ie,this.uint16[Wn+3]=je,this.uint32[$n+2]=Je,this.uint32[$n+3]=lt,this.uint32[$n+4]=_t,this.uint16[Wn+10]=Tt,this.uint16[Wn+11]=zt,this.uint16[Wn+12]=Gt,this.float32[$n+7]=Ut,this.float32[$n+8]=on,this.uint8[lr+36]=cn,this.uint8[lr+37]=kn,this.uint8[lr+38]=_n,this.uint32[$n+10]=Fn,this.int16[Wn+22]=Bn,Z},R}(_i);Le.prototype.bytesPerElement=48,Lr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Le);var Re=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn,kn,_n,Fn,Bn,Wn,$n,lr,Tr,vr,Sr,Er,Xr,zr,Yr){var jr=this.length;return this.resize(jr+1),this.emplace(jr,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn,kn,_n,Fn,Bn,Wn,$n,lr,Tr,vr,Sr,Er,Xr,zr,Yr)},R.prototype.emplace=function(Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn,kn,_n,Fn,Bn,Wn,$n,lr,Tr,vr,Sr,Er,Xr,zr,Yr,jr){var Rr=34*Z,ui=17*Z;return this.int16[Rr+0]=le,this.int16[Rr+1]=Te,this.int16[Rr+2]=Ie,this.int16[Rr+3]=je,this.int16[Rr+4]=Je,this.int16[Rr+5]=lt,this.int16[Rr+6]=_t,this.int16[Rr+7]=Tt,this.uint16[Rr+8]=zt,this.uint16[Rr+9]=Gt,this.uint16[Rr+10]=Ut,this.uint16[Rr+11]=on,this.uint16[Rr+12]=cn,this.uint16[Rr+13]=kn,this.uint16[Rr+14]=_n,this.uint16[Rr+15]=Fn,this.uint16[Rr+16]=Bn,this.uint16[Rr+17]=Wn,this.uint16[Rr+18]=$n,this.uint16[Rr+19]=lr,this.uint16[Rr+20]=Tr,this.uint16[Rr+21]=vr,this.uint16[Rr+22]=Sr,this.uint32[ui+12]=Er,this.float32[ui+13]=Xr,this.float32[ui+14]=zr,this.float32[ui+15]=Yr,this.float32[ui+16]=jr,Z},R}(_i);Re.prototype.bytesPerElement=68,Lr("StructArrayLayout8i15ui1ul4f68",Re);var Ue=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},R.prototype.emplace=function(Z,le){var Te=1*Z;return this.float32[Te+0]=le,Z},R}(_i);Ue.prototype.bytesPerElement=4,Lr("StructArrayLayout1f4",Ue);var He=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,Z,le,Te)},R.prototype.emplace=function(Z,le,Te,Ie){var je=3*Z;return this.int16[je+0]=le,this.int16[je+1]=Te,this.int16[je+2]=Ie,Z},R}(_i);He.prototype.bytesPerElement=6,Lr("StructArrayLayout3i6",He);var tt=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,Z,le,Te)},R.prototype.emplace=function(Z,le,Te,Ie){var je=2*Z,Je=4*Z;return this.uint32[je+0]=le,this.uint16[Je+2]=Te,this.uint16[Je+3]=Ie,Z},R}(_i);tt.prototype.bytesPerElement=8,Lr("StructArrayLayout1ul2ui8",tt);var ct=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},R.prototype.emplace=function(Z,le,Te){var Ie=2*Z;return this.uint16[Ie+0]=le,this.uint16[Ie+1]=Te,Z},R}(_i);ct.prototype.bytesPerElement=4,Lr("StructArrayLayout2ui4",ct);var dt=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},R.prototype.emplace=function(Z,le){var Te=1*Z;return this.uint16[Te+0]=le,Z},R}(_i);dt.prototype.bytesPerElement=2,Lr("StructArrayLayout1ui2",dt);var wt=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(Z,le,Te,Ie){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Ie)},R.prototype.emplace=function(Z,le,Te,Ie,je){var Je=4*Z;return this.float32[Je+0]=le,this.float32[Je+1]=Te,this.float32[Je+2]=Ie,this.float32[Je+3]=je,Z},R}(_i);wt.prototype.bytesPerElement=16,Lr("StructArrayLayout4f16",wt);var Et=function(M){function R(){M.apply(this,arguments)}M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(R.prototype,Z),R}(ro);Et.prototype.size=20;var kt=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.get=function(Z){return new Et(this,Z)},R}(H);Lr("CollisionBoxArray",kt);var Bt=function(M){function R(){M.apply(this,arguments)}M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(R.prototype,Z),R}(ro);Bt.prototype.size=48;var It=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.get=function(Z){return new Bt(this,Z)},R}(Le);Lr("PlacedSymbolArray",It);var Kt=function(M){function R(){M.apply(this,arguments)}M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(R.prototype,Z),R}(ro);Kt.prototype.size=68;var qt=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.get=function(Z){return new Kt(this,Z)},R}(Re);Lr("SymbolInstanceArray",qt);var Vt=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},R}(Ue);Lr("GlyphOffsetArray",Vt);var pn=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.getx=function(Z){return this.int16[3*Z+0]},R.prototype.gety=function(Z){return this.int16[3*Z+1]},R.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},R}(He);Lr("SymbolLineVertexArray",pn);var yn=function(M){function R(){M.apply(this,arguments)}M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(R.prototype,Z),R}(ro);yn.prototype.size=8;var Sn=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.get=function(Z){return new yn(this,Z)},R}(tt);Lr("FeatureIndexArray",Sn);var On=Pi([{name:"a_pos",components:2,type:"Int16"}],4).members,Hn=function(M){M===void 0&&(M=[]),this.segments=M};function sr(M,R){return 256*(M=c(Math.floor(M),0,255))+c(Math.floor(R),0,255)}Hn.prototype.prepareSegment=function(M,R,Z,le){var Te=this.segments[this.segments.length-1];return M>Hn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+Hn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!Te||Te.vertexLength+M>Hn.MAX_VERTEX_ARRAY_LENGTH||Te.sortKey!==le)&&(Te={vertexOffset:R.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},le!==void 0&&(Te.sortKey=le),this.segments.push(Te)),Te},Hn.prototype.get=function(){return this.segments},Hn.prototype.destroy=function(){for(var M=0,R=this.segments;M<R.length;M+=1){var Z=R[M];for(var le in Z.vaos)Z.vaos[le].destroy()}},Hn.simpleSegment=function(M,R,Z,le){return new Hn([{vertexOffset:M,primitiveOffset:R,vertexLength:Z,primitiveLength:le,vaos:{},sortKey:0}])},Hn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lr("SegmentVector",Hn);var dr=Pi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Zn=w(function(M){M.exports=function(R,Z){var le,Te,Ie,je,Je,lt,_t,Tt;for(le=3&R.length,Te=R.length-le,Ie=Z,Je=3432918353,lt=461845907,Tt=0;Tt<Te;)_t=255&R.charCodeAt(Tt)|(255&R.charCodeAt(++Tt))<<8|(255&R.charCodeAt(++Tt))<<16|(255&R.charCodeAt(++Tt))<<24,++Tt,Ie=27492+(65535&(je=5*(65535&(Ie=(Ie^=_t=(65535&(_t=(_t=(65535&_t)*Je+(((_t>>>16)*Je&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295)<<13|Ie>>>19))+((5*(Ie>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(_t=0,le){case 3:_t^=(255&R.charCodeAt(Tt+2))<<16;case 2:_t^=(255&R.charCodeAt(Tt+1))<<8;case 1:Ie^=_t=(65535&(_t=(_t=(65535&(_t^=255&R.charCodeAt(Tt)))*Je+(((_t>>>16)*Je&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295}return Ie^=R.length,Ie=2246822507*(65535&(Ie^=Ie>>>16))+((2246822507*(Ie>>>16)&65535)<<16)&4294967295,Ie=3266489909*(65535&(Ie^=Ie>>>13))+((3266489909*(Ie>>>16)&65535)<<16)&4294967295,(Ie^=Ie>>>16)>>>0}}),fr=w(function(M){M.exports=function(R,Z){for(var le,Te=R.length,Ie=Z^Te,je=0;Te>=4;)le=1540483477*(65535&(le=255&R.charCodeAt(je)|(255&R.charCodeAt(++je))<<8|(255&R.charCodeAt(++je))<<16|(255&R.charCodeAt(++je))<<24))+((1540483477*(le>>>16)&65535)<<16),Ie=1540483477*(65535&Ie)+((1540483477*(Ie>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),Te-=4,++je;switch(Te){case 3:Ie^=(255&R.charCodeAt(je+2))<<16;case 2:Ie^=(255&R.charCodeAt(je+1))<<8;case 1:Ie=1540483477*(65535&(Ie^=255&R.charCodeAt(je)))+((1540483477*(Ie>>>16)&65535)<<16)}return Ie=1540483477*(65535&(Ie^=Ie>>>13))+((1540483477*(Ie>>>16)&65535)<<16),(Ie^=Ie>>>15)>>>0}}),Ar=Zn,Or=Zn,ir=fr;Ar.murmur3=Or,Ar.murmur2=ir;var ur=function(){this.ids=[],this.positions=[],this.indexed=!1};ur.prototype.add=function(M,R,Z,le){this.ids.push(pr(M)),this.positions.push(R,Z,le)},ur.prototype.getPositions=function(M){for(var R=pr(M),Z=0,le=this.ids.length-1;Z<le;){var Te=Z+le>>1;this.ids[Te]>=R?le=Te:Z=Te+1}for(var Ie=[];this.ids[Z]===R;){var je=this.positions[3*Z],Je=this.positions[3*Z+1],lt=this.positions[3*Z+2];Ie.push({index:je,start:Je,end:lt}),Z++}return Ie},ur.serialize=function(M,R){var Z=new Float64Array(M.ids),le=new Uint32Array(M.positions);return Ir(Z,le,0,Z.length-1),R&&R.push(Z.buffer,le.buffer),{ids:Z,positions:le}},ur.deserialize=function(M){var R=new ur;return R.ids=M.ids,R.positions=M.positions,R.indexed=!0,R};var Cr=Math.pow(2,53)-1;function pr(M){var R=+M;return!isNaN(R)&&R<=Cr?R:Ar(String(M))}function Ir(M,R,Z,le){for(;Z<le;){for(var Te=M[Z+le>>1],Ie=Z-1,je=le+1;;){do Ie++;while(M[Ie]<Te);do je--;while(M[je]>Te);if(Ie>=je)break;Fr(M,Ie,je),Fr(R,3*Ie,3*je),Fr(R,3*Ie+1,3*je+1),Fr(R,3*Ie+2,3*je+2)}je-Z<le-je?(Ir(M,R,Z,je),Z=je+1):(Ir(M,R,je+1,le),le=je)}}function Fr(M,R,Z){var le=M[R];M[R]=M[Z],M[Z]=le}Lr("FeaturePositionMap",ur);var Zr=function(M,R){this.gl=M.gl,this.location=R},Kr=function(M){function R(Z,le){M.call(this,Z,le),this.current=0}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},R}(Zr),ti=function(M){function R(Z,le){M.call(this,Z,le),this.current=0}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},R}(Zr),oi=function(M){function R(Z,le){M.call(this,Z,le),this.current=[0,0]}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},R}(Zr),Ei=function(M){function R(Z,le){M.call(this,Z,le),this.current=[0,0,0]}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},R}(Zr),Xi=function(M){function R(Z,le){M.call(this,Z,le),this.current=[0,0,0,0]}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},R}(Zr),Oa=function(M){function R(Z,le){M.call(this,Z,le),this.current=Ln.transparent}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},R}(Zr),ma=new Float32Array(16),Sa=function(M){function R(Z,le){M.call(this,Z,le),this.current=ma}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var le=1;le<16;le++)if(Z[le]!==this.current[le]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},R}(Zr);function Di(M){return[sr(255*M.r,255*M.g),sr(255*M.b,255*M.a)]}var li=function(M,R,Z){this.value=M,this.uniformNames=R.map(function(le){return"u_"+le}),this.type=Z};li.prototype.setUniform=function(M,R,Z){M.set(Z.constantOr(this.value))},li.prototype.getBinding=function(M,R,Z){return this.type==="color"?new Oa(M,R):new ti(M,R)};var Ui=function(M,R){this.uniformNames=R.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ui.prototype.setConstantPatternPositions=function(M,R){this.pixelRatioFrom=R.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=R.tlbr,this.patternTo=M.tlbr},Ui.prototype.setUniform=function(M,R,Z,le){var Te=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Te&&M.set(Te)},Ui.prototype.getBinding=function(M,R,Z){return Z.substr(0,9)==="u_pattern"?new Xi(M,R):new ti(M,R)};var wi=function(M,R,Z,le){this.expression=M,this.type=Z,this.maxValue=0,this.paintVertexAttributes=R.map(function(Te){return{name:"a_"+Te,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new le};wi.prototype.populatePaintArray=function(M,R,Z,le,Te){var Ie=this.paintVertexArray.length,je=this.expression.evaluate(new ai(0),R,{},le,[],Te);this.paintVertexArray.resize(M),this._setPaintValue(Ie,M,je)},wi.prototype.updatePaintArray=function(M,R,Z,le){var Te=this.expression.evaluate({zoom:0},Z,le);this._setPaintValue(M,R,Te)},wi.prototype._setPaintValue=function(M,R,Z){if(this.type==="color")for(var le=Di(Z),Te=M;Te<R;Te++)this.paintVertexArray.emplace(Te,le[0],le[1]);else{for(var Ie=M;Ie<R;Ie++)this.paintVertexArray.emplace(Ie,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},wi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},wi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var di=function(M,R,Z,le,Te,Ie){this.expression=M,this.uniformNames=R.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=le,this.zoom=Te,this.maxValue=0,this.paintVertexAttributes=R.map(function(je){return{name:"a_"+je,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Ie};di.prototype.populatePaintArray=function(M,R,Z,le,Te){var Ie=this.expression.evaluate(new ai(this.zoom),R,{},le,[],Te),je=this.expression.evaluate(new ai(this.zoom+1),R,{},le,[],Te),Je=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Je,M,Ie,je)},di.prototype.updatePaintArray=function(M,R,Z,le){var Te=this.expression.evaluate({zoom:this.zoom},Z,le),Ie=this.expression.evaluate({zoom:this.zoom+1},Z,le);this._setPaintValue(M,R,Te,Ie)},di.prototype._setPaintValue=function(M,R,Z,le){if(this.type==="color")for(var Te=Di(Z),Ie=Di(le),je=M;je<R;je++)this.paintVertexArray.emplace(je,Te[0],Te[1],Ie[0],Ie[1]);else{for(var Je=M;Je<R;Je++)this.paintVertexArray.emplace(Je,Z,le);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(le))}},di.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},di.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},di.prototype.setUniform=function(M,R){var Z=this.useIntegerZoom?Math.floor(R.zoom):R.zoom,le=c(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);M.set(le)},di.prototype.getBinding=function(M,R,Z){return new ti(M,R)};var Vi=function(M,R,Z,le,Te,Ie){this.expression=M,this.type=R,this.useIntegerZoom=Z,this.zoom=le,this.layerId=Ie,this.zoomInPaintVertexArray=new Te,this.zoomOutPaintVertexArray=new Te};Vi.prototype.populatePaintArray=function(M,R,Z){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(le,M,R.patterns&&R.patterns[this.layerId],Z)},Vi.prototype.updatePaintArray=function(M,R,Z,le,Te){this._setPaintValues(M,R,Z.patterns&&Z.patterns[this.layerId],Te)},Vi.prototype._setPaintValues=function(M,R,Z,le){if(le&&Z){var Te=Z.min,Ie=Z.mid,je=Z.max,Je=le[Te],lt=le[Ie],_t=le[je];if(Je&&lt&&_t)for(var Tt=M;Tt<R;Tt++)this.zoomInPaintVertexArray.emplace(Tt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Je.tl[0],Je.tl[1],Je.br[0],Je.br[1],lt.pixelRatio,Je.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],_t.tl[0],_t.tl[1],_t.br[0],_t.br[1],lt.pixelRatio,_t.pixelRatio)}},Vi.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,dr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,dr.members,this.expression.isStateDependent))},Vi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Zi=function(M,R,Z){this.binders={},this._buffers=[];var le=[];for(var Te in M.paint._values)if(Z(Te)){var Ie=M.paint.get(Te);if(Ie instanceof Ci&&$o(Ie.property.specification)){var je=sl(Te,M.type),Je=Ie.value,lt=Ie.property.specification.type,_t=Ie.property.useIntegerZoom,Tt=Ie.property.specification["property-type"],zt=Tt==="cross-faded"||Tt==="cross-faded-data-driven";if(Je.kind==="constant")this.binders[Te]=zt?new Ui(Je.value,je):new li(Je.value,je,lt),le.push("/u_"+Te);else if(Je.kind==="source"||zt){var Gt=ll(Te,lt,"source");this.binders[Te]=zt?new Vi(Je,lt,_t,R,Gt,M.id):new wi(Je,je,lt,Gt),le.push("/a_"+Te)}else{var Ut=ll(Te,lt,"composite");this.binders[Te]=new di(Je,je,lt,_t,R,Ut),le.push("/z_"+Te)}}}this.cacheKey=le.sort().join("")};Zi.prototype.getMaxValue=function(M){var R=this.binders[M];return R instanceof wi||R instanceof di?R.maxValue:0},Zi.prototype.populatePaintArrays=function(M,R,Z,le,Te){for(var Ie in this.binders){var je=this.binders[Ie];(je instanceof wi||je instanceof di||je instanceof Vi)&&je.populatePaintArray(M,R,Z,le,Te)}},Zi.prototype.setConstantPatternPositions=function(M,R){for(var Z in this.binders){var le=this.binders[Z];le instanceof Ui&&le.setConstantPatternPositions(M,R)}},Zi.prototype.updatePaintArrays=function(M,R,Z,le,Te){var Ie=!1;for(var je in M)for(var Je=0,lt=R.getPositions(je);Je<lt.length;Je+=1){var _t=lt[Je],Tt=Z.feature(_t.index);for(var zt in this.binders){var Gt=this.binders[zt];if((Gt instanceof wi||Gt instanceof di||Gt instanceof Vi)&&Gt.expression.isStateDependent===!0){var Ut=le.paint.get(zt);Gt.expression=Ut.value,Gt.updatePaintArray(_t.start,_t.end,Tt,M[je],Te),Ie=!0}}}return Ie},Zi.prototype.defines=function(){var M=[];for(var R in this.binders){var Z=this.binders[R];(Z instanceof li||Z instanceof Ui)&&M.push.apply(M,Z.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return M},Zi.prototype.getBinderAttributes=function(){var M=[];for(var R in this.binders){var Z=this.binders[R];if(Z instanceof wi||Z instanceof di)for(var le=0;le<Z.paintVertexAttributes.length;le++)M.push(Z.paintVertexAttributes[le].name);else if(Z instanceof Vi)for(var Te=0;Te<dr.members.length;Te++)M.push(dr.members[Te].name)}return M},Zi.prototype.getBinderUniforms=function(){var M=[];for(var R in this.binders){var Z=this.binders[R];if(Z instanceof li||Z instanceof Ui||Z instanceof di)for(var le=0,Te=Z.uniformNames;le<Te.length;le+=1){var Ie=Te[le];M.push(Ie)}}return M},Zi.prototype.getPaintVertexBuffers=function(){return this._buffers},Zi.prototype.getUniforms=function(M,R){var Z=[];for(var le in this.binders){var Te=this.binders[le];if(Te instanceof li||Te instanceof Ui||Te instanceof di)for(var Ie=0,je=Te.uniformNames;Ie<je.length;Ie+=1){var Je=je[Ie];if(R[Je]){var lt=Te.getBinding(M,R[Je],Je);Z.push({name:Je,property:le,binding:lt})}}}return Z},Zi.prototype.setUniforms=function(M,R,Z,le){for(var Te=0,Ie=R;Te<Ie.length;Te+=1){var je=Ie[Te],Je=je.name,lt=je.property,_t=je.binding;this.binders[lt].setUniform(_t,le,Z.get(lt),Je)}},Zi.prototype.updatePaintBuffers=function(M){for(var R in this._buffers=[],this.binders){var Z=this.binders[R];if(M&&Z instanceof Vi){var le=M.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(Z instanceof wi||Z instanceof di)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},Zi.prototype.upload=function(M){for(var R in this.binders){var Z=this.binders[R];(Z instanceof wi||Z instanceof di||Z instanceof Vi)&&Z.upload(M)}this.updatePaintBuffers()},Zi.prototype.destroy=function(){for(var M in this.binders){var R=this.binders[M];(R instanceof wi||R instanceof di||R instanceof Vi)&&R.destroy()}};var sa=function(M,R,Z){Z===void 0&&(Z=function(){return!0}),this.programConfigurations={};for(var le=0,Te=M;le<Te.length;le+=1){var Ie=Te[le];this.programConfigurations[Ie.id]=new Zi(Ie,R,Z)}this.needsUpload=!1,this._featureMap=new ur,this._bufferOffset=0};function sl(M,R){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(R+"-","").replace(/-/g,"_")]}function ll(M,R,Z){var le={color:{source:st,composite:wt},number:{source:Ue,composite:st}},Te=function(Ie){return{"line-pattern":{source:N,composite:N},"fill-pattern":{source:N,composite:N},"fill-extrusion-pattern":{source:N,composite:N}}[Ie]}(M);return Te&&Te[Z]||le[R][Z]}sa.prototype.populatePaintArrays=function(M,R,Z,le,Te,Ie){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(M,R,le,Te,Ie);R.id!==void 0&&this._featureMap.add(R.id,Z,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},sa.prototype.updatePaintArrays=function(M,R,Z,le){for(var Te=0,Ie=Z;Te<Ie.length;Te+=1){var je=Ie[Te];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(M,this._featureMap,R,je,le)||this.needsUpload}},sa.prototype.get=function(M){return this.programConfigurations[M]},sa.prototype.upload=function(M){if(this.needsUpload){for(var R in this.programConfigurations)this.programConfigurations[R].upload(M);this.needsUpload=!1}},sa.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},Lr("ConstantBinder",li),Lr("CrossFadedConstantBinder",Ui),Lr("SourceExpressionBinder",wi),Lr("CrossFadedCompositeBinder",Vi),Lr("CompositeExpressionBinder",di),Lr("ProgramConfiguration",Zi,{omit:["_buffers"]}),Lr("ProgramConfigurationSet",sa);var pi=8192,Yl=Math.pow(2,14)-1,Ll=-Yl-1;function as(M){for(var R=pi/M.extent,Z=M.loadGeometry(),le=0;le<Z.length;le++)for(var Te=Z[le],Ie=0;Ie<Te.length;Ie++){var je=Te[Ie],Je=Math.round(je.x*R),lt=Math.round(je.y*R);je.x=c(Je,Ll,Yl),je.y=c(lt,Ll,Yl),(Je<je.x||Je>je.x+1||lt<je.y||lt>je.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return Z}function Hi(M,R){return{type:M.type,id:M.id,properties:M.properties,geometry:R?as(M):[]}}function io(M,R,Z,le,Te){M.emplaceBack(2*R+(le+1)/2,2*Z+(Te+1)/2)}var wa=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Ss,this.indexArray=new xe,this.segments=new Hn,this.programConfigurations=new sa(M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};function eu(M,R){for(var Z=0;Z<M.length;Z++)if(Xl(R,M[Z]))return!0;for(var le=0;le<R.length;le++)if(Xl(M,R[le]))return!0;return!!Lc(M,R)}function ad(M,R,Z){return!!Xl(M,R)||!!Ic(R,M,Z)}function Nf(M,R){if(M.length===1)return Uf(R,M[0]);for(var Z=0;Z<R.length;Z++)for(var le=R[Z],Te=0;Te<le.length;Te++)if(Xl(M,le[Te]))return!0;for(var Ie=0;Ie<M.length;Ie++)if(Uf(R,M[Ie]))return!0;for(var je=0;je<R.length;je++)if(Lc(M,R[je]))return!0;return!1}function od(M,R,Z){if(M.length>1){if(Lc(M,R))return!0;for(var le=0;le<R.length;le++)if(Ic(R[le],M,Z))return!0}for(var Te=0;Te<M.length;Te++)if(Ic(M[Te],R,Z))return!0;return!1}function Lc(M,R){if(M.length===0||R.length===0)return!1;for(var Z=0;Z<M.length-1;Z++)for(var le=M[Z],Te=M[Z+1],Ie=0;Ie<R.length-1;Ie++)if(sd(le,Te,R[Ie],R[Ie+1]))return!0;return!1}function sd(M,R,Z,le){return P(M,Z,le)!==P(R,Z,le)&&P(M,R,Z)!==P(M,R,le)}function Ic(M,R,Z){var le=Z*Z;if(R.length===1)return M.distSqr(R[0])<le;for(var Te=1;Te<R.length;Te++)if(jf(M,R[Te-1],R[Te])<le)return!0;return!1}function jf(M,R,Z){var le=R.distSqr(Z);if(le===0)return M.distSqr(R);var Te=((M.x-R.x)*(Z.x-R.x)+(M.y-R.y)*(Z.y-R.y))/le;return Te<0?M.distSqr(R):Te>1?M.distSqr(Z):M.distSqr(Z.sub(R)._mult(Te)._add(R))}function Uf(M,R){for(var Z,le,Te,Ie=!1,je=0;je<M.length;je++)for(var Je=0,lt=(Z=M[je]).length-1;Je<Z.length;lt=Je++)le=Z[Je],Te=Z[lt],le.y>R.y!=Te.y>R.y&&R.x<(Te.x-le.x)*(R.y-le.y)/(Te.y-le.y)+le.x&&(Ie=!Ie);return Ie}function Xl(M,R){for(var Z=!1,le=0,Te=M.length-1;le<M.length;Te=le++){var Ie=M[le],je=M[Te];Ie.y>R.y!=je.y>R.y&&R.x<(je.x-Ie.x)*(R.y-Ie.y)/(je.y-Ie.y)+Ie.x&&(Z=!Z)}return Z}function Fg(M,R,Z){var le=Z[0],Te=Z[2];if(M.x<le.x&&R.x<le.x||M.x>Te.x&&R.x>Te.x||M.y<le.y&&R.y<le.y||M.y>Te.y&&R.y>Te.y)return!1;var Ie=P(M,R,Z[0]);return Ie!==P(M,R,Z[1])||Ie!==P(M,R,Z[2])||Ie!==P(M,R,Z[3])}function ef(M,R,Z){var le=R.paint.get(M).value;return le.kind==="constant"?le.value:Z.programConfigurations.get(R.id).getMaxValue(M)}function Vf(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Hf(M,R,Z,le,Te){if(!R[0]&&!R[1])return M;var Ie=t.convert(R)._mult(Te);Z==="viewport"&&Ie._rotate(-le);for(var je=[],Je=0;Je<M.length;Je++){var lt=M[Je];je.push(lt.sub(Ie))}return je}wa.prototype.populate=function(M,R,Z){var le=this.layers[0],Te=[],Ie=null;le.type==="circle"&&(Ie=le.layout.get("circle-sort-key"));for(var je=0,Je=M;je<Je.length;je+=1){var lt=Je[je],_t=lt.feature,Tt=lt.id,zt=lt.index,Gt=lt.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,on=Hi(_t,Ut);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),on,Z)){var cn=Ie?Ie.evaluate(on,{},Z):void 0,kn={id:Tt,properties:_t.properties,type:_t.type,sourceLayerIndex:Gt,index:zt,geometry:Ut?on.geometry:as(_t),patterns:{},sortKey:cn};Te.push(kn)}}Ie&&Te.sort(function(Sr,Er){return Sr.sortKey-Er.sortKey});for(var _n=0,Fn=Te;_n<Fn.length;_n+=1){var Bn=Fn[_n],Wn=Bn,$n=Wn.geometry,lr=Wn.index,Tr=Wn.sourceLayerIndex,vr=M[lr].feature;this.addFeature(Bn,$n,lr,Z),R.featureIndex.insert(vr,$n,lr,Tr,this.index)}},wa.prototype.update=function(M,R,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,R,this.stateDependentLayers,Z)},wa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wa.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,On),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},wa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wa.prototype.addFeature=function(M,R,Z,le){for(var Te=0,Ie=R;Te<Ie.length;Te+=1)for(var je=0,Je=Ie[Te];je<Je.length;je+=1){var lt=Je[je],_t=lt.x,Tt=lt.y;if(!(_t<0||_t>=pi||Tt<0||Tt>=pi)){var zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),Gt=zt.vertexLength;io(this.layoutVertexArray,_t,Tt,-1,-1),io(this.layoutVertexArray,_t,Tt,1,-1),io(this.layoutVertexArray,_t,Tt,1,1),io(this.layoutVertexArray,_t,Tt,-1,1),this.indexArray.emplaceBack(Gt,Gt+1,Gt+2),this.indexArray.emplaceBack(Gt,Gt+3,Gt+2),zt.vertexLength+=4,zt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,{},le)},Lr("CircleBucket",wa,{omit:["layers"]});var Bg=new $i({"circle-sort-key":new Ur(We.layout_circle["circle-sort-key"])}),Ng={paint:new $i({"circle-radius":new Ur(We.paint_circle["circle-radius"]),"circle-color":new Ur(We.paint_circle["circle-color"]),"circle-blur":new Ur(We.paint_circle["circle-blur"]),"circle-opacity":new Ur(We.paint_circle["circle-opacity"]),"circle-translate":new Dr(We.paint_circle["circle-translate"]),"circle-translate-anchor":new Dr(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dr(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dr(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ur(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ur(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ur(We.paint_circle["circle-stroke-opacity"])}),layout:Bg},Cs=typeof Float32Array<"u"?Float32Array:Array;function ld(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function gp(M,R,Z){var le=R[0],Te=R[1],Ie=R[2],je=R[3],Je=R[4],lt=R[5],_t=R[6],Tt=R[7],zt=R[8],Gt=R[9],Ut=R[10],on=R[11],cn=R[12],kn=R[13],_n=R[14],Fn=R[15],Bn=Z[0],Wn=Z[1],$n=Z[2],lr=Z[3];return M[0]=Bn*le+Wn*Je+$n*zt+lr*cn,M[1]=Bn*Te+Wn*lt+$n*Gt+lr*kn,M[2]=Bn*Ie+Wn*_t+$n*Ut+lr*_n,M[3]=Bn*je+Wn*Tt+$n*on+lr*Fn,Bn=Z[4],Wn=Z[5],$n=Z[6],lr=Z[7],M[4]=Bn*le+Wn*Je+$n*zt+lr*cn,M[5]=Bn*Te+Wn*lt+$n*Gt+lr*kn,M[6]=Bn*Ie+Wn*_t+$n*Ut+lr*_n,M[7]=Bn*je+Wn*Tt+$n*on+lr*Fn,Bn=Z[8],Wn=Z[9],$n=Z[10],lr=Z[11],M[8]=Bn*le+Wn*Je+$n*zt+lr*cn,M[9]=Bn*Te+Wn*lt+$n*Gt+lr*kn,M[10]=Bn*Ie+Wn*_t+$n*Ut+lr*_n,M[11]=Bn*je+Wn*Tt+$n*on+lr*Fn,Bn=Z[12],Wn=Z[13],$n=Z[14],lr=Z[15],M[12]=Bn*le+Wn*Je+$n*zt+lr*cn,M[13]=Bn*Te+Wn*lt+$n*Gt+lr*kn,M[14]=Bn*Ie+Wn*_t+$n*Ut+lr*_n,M[15]=Bn*je+Wn*Tt+$n*on+lr*Fn,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,R=0,Z=arguments.length;Z--;)R+=M[Z]*M[Z];return Math.sqrt(R)});var jg=gp,Gf,Ug=function(M,R,Z){return M[0]=R[0]-Z[0],M[1]=R[1]-Z[1],M[2]=R[2]-Z[2],M};function qf(M,R,Z){var le=R[0],Te=R[1],Ie=R[2],je=R[3];return M[0]=Z[0]*le+Z[4]*Te+Z[8]*Ie+Z[12]*je,M[1]=Z[1]*le+Z[5]*Te+Z[9]*Ie+Z[13]*je,M[2]=Z[2]*le+Z[6]*Te+Z[10]*Ie+Z[14]*je,M[3]=Z[3]*le+Z[7]*Te+Z[11]*Ie+Z[15]*je,M}Gf=new Cs(3),Cs!=Float32Array&&(Gf[0]=0,Gf[1]=0,Gf[2]=0),function(){var M=new Cs(4);Cs!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0)}();var Vg=function(M){var R=M[0],Z=M[1];return R*R+Z*Z},Hg=(function(){var M=new Cs(2);Cs!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function R(Z){M.call(this,Z,Ng)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(Z){return new wa(Z)},R.prototype.queryRadius=function(Z){var le=Z;return ef("circle-radius",this,le)+ef("circle-stroke-width",this,le)+Vf(this.paint.get("circle-translate"))},R.prototype.queryIntersectsFeature=function(Z,le,Te,Ie,je,Je,lt,_t){for(var Tt=Hf(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Je.angle,lt),zt=this.paint.get("circle-radius").evaluate(le,Te)+this.paint.get("circle-stroke-width").evaluate(le,Te),Gt=this.paint.get("circle-pitch-alignment")==="map",Ut=Gt?Tt:function(Tr,vr){return Tr.map(function(Sr){return vp(Sr,vr)})}(Tt,_t),on=Gt?zt*lt:zt,cn=0,kn=Ie;cn<kn.length;cn+=1)for(var _n=0,Fn=kn[cn];_n<Fn.length;_n+=1){var Bn=Fn[_n],Wn=Gt?Bn:vp(Bn,_t),$n=on,lr=qf([],[Bn.x,Bn.y,0,1],_t);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?$n*=lr[3]/Je.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&($n*=Je.cameraToCenterDistance/lr[3]),ad(Ut,Wn,$n))return!0}return!1},R}(yi));function vp(M,R){var Z=qf([],[M.x,M.y,0,1],R);return new t(Z[0]/Z[3],Z[1]/Z[3])}var yp=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R}(wa);function cd(M,R,Z,le){var Te=R.width,Ie=R.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==Te*Ie*Z)throw new RangeError("mismatched image size")}else le=new Uint8Array(Te*Ie*Z);return M.width=Te,M.height=Ie,M.data=le,M}function xp(M,R,Z){var le=R.width,Te=R.height;if(le!==M.width||Te!==M.height){var Ie=cd({},{width:le,height:Te},Z);ud(M,Ie,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,le),height:Math.min(M.height,Te)},Z),M.width=le,M.height=Te,M.data=Ie.data}}function ud(M,R,Z,le,Te,Ie){if(Te.width===0||Te.height===0)return R;if(Te.width>M.width||Te.height>M.height||Z.x>M.width-Te.width||Z.y>M.height-Te.height)throw new RangeError("out of range source coordinates for image copy");if(Te.width>R.width||Te.height>R.height||le.x>R.width-Te.width||le.y>R.height-Te.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=M.data,Je=R.data,lt=0;lt<Te.height;lt++)for(var _t=((Z.y+lt)*M.width+Z.x)*Ie,Tt=((le.y+lt)*R.width+le.x)*Ie,zt=0;zt<Te.width*Ie;zt++)Je[Tt+zt]=je[_t+zt];return R}Lr("HeatmapBucket",yp,{omit:["layers"]});var tu=function(M,R){cd(this,M,1,R)};tu.prototype.resize=function(M){xp(this,M,1)},tu.prototype.clone=function(){return new tu({width:this.width,height:this.height},new Uint8Array(this.data))},tu.copy=function(M,R,Z,le,Te){ud(M,R,Z,le,Te,1)};var qo=function(M,R){cd(this,M,4,R)};qo.prototype.resize=function(M){xp(this,M,4)},qo.prototype.replace=function(M,R){R?this.data.set(M):M instanceof Uint8ClampedArray?this.data=new Uint8Array(M.buffer):this.data=M},qo.prototype.clone=function(){return new qo({width:this.width,height:this.height},new Uint8Array(this.data))},qo.copy=function(M,R,Z,le,Te){ud(M,R,Z,le,Te,4)},Lr("AlphaImage",tu),Lr("RGBAImage",qo);var Gg={paint:new $i({"heatmap-radius":new Ur(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ur(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dr(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new is(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dr(We.paint_heatmap["heatmap-opacity"])})};function bp(M){var R={},Z=M.resolution||256,le=M.clips?M.clips.length:1,Te=M.image||new qo({width:Z,height:le}),Ie=function(on,cn,kn){R[M.evaluationKey]=kn;var _n=M.expression.evaluate(R);Te.data[on+cn+0]=Math.floor(255*_n.r/_n.a),Te.data[on+cn+1]=Math.floor(255*_n.g/_n.a),Te.data[on+cn+2]=Math.floor(255*_n.b/_n.a),Te.data[on+cn+3]=Math.floor(255*_n.a)};if(M.clips)for(var je=0,Je=0;je<le;++je,Je+=4*Z)for(var lt=0,_t=0;lt<Z;lt++,_t+=4){var Tt=lt/(Z-1),zt=M.clips[je];Ie(Je,_t,zt.start*(1-Tt)+zt.end*Tt)}else for(var Gt=0,Ut=0;Gt<Z;Gt++,Ut+=4)Ie(0,Ut,Gt/(Z-1));return Te}var qg=function(M){function R(Z){M.call(this,Z,Gg),this._updateColorRamp()}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(Z){return new yp(Z)},R.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},R.prototype._updateColorRamp=function(){var Z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=bp({expression:Z,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},R.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},R}(yi),Wg={paint:new $i({"hillshade-illumination-direction":new Dr(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dr(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dr(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dr(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dr(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dr(We.paint_hillshade["hillshade-accent-color"])})},Yg=function(M){function R(Z){M.call(this,Z,Wg)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},R}(yi),Xg=Pi([{name:"a_pos",components:2,type:"Int16"}],4).members,fd=Wf,Zg=Wf;function Wf(M,R,Z){Z=Z||2;var le,Te,Ie,je,Je,lt,_t,Tt=R&&R.length,zt=Tt?R[0]*Z:M.length,Gt=_p(M,0,zt,Z,!0),Ut=[];if(!Gt||Gt.next===Gt.prev)return Ut;if(Tt&&(Gt=function(cn,kn,_n,Fn){var Bn,Wn,$n,lr=[];for(Bn=0,Wn=kn.length;Bn<Wn;Bn++)($n=_p(cn,kn[Bn]*Fn,Bn<Wn-1?kn[Bn+1]*Fn:cn.length,Fn,!1))===$n.next&&($n.steiner=!0),lr.push(r1($n));for(lr.sort(e1),Bn=0;Bn<lr.length;Bn++)t1(lr[Bn],_n),_n=Pc(_n,_n.next);return _n}(M,R,Gt,Z)),M.length>80*Z){le=Ie=M[0],Te=je=M[1];for(var on=Z;on<zt;on+=Z)(Je=M[on])<le&&(le=Je),(lt=M[on+1])<Te&&(Te=lt),Je>Ie&&(Ie=Je),lt>je&&(je=lt);_t=(_t=Math.max(Ie-le,je-Te))!==0?1/_t:0}return tf(Gt,Ut,Z,le,Te,_t),Ut}function _p(M,R,Z,le,Te){var Ie,je;if(Te===pd(M,R,Z,le)>0)for(Ie=R;Ie<Z;Ie+=le)je=kp(Ie,M[Ie],M[Ie+1],je);else for(Ie=Z-le;Ie>=R;Ie-=le)je=kp(Ie,M[Ie],M[Ie+1],je);return je&&Yf(je,je.next)&&(rf(je),je=je.next),je}function Pc(M,R){if(!M)return M;R||(R=M);var Z,le=M;do if(Z=!1,le.steiner||!Yf(le,le.next)&&Ca(le.prev,le,le.next)!==0)le=le.next;else{if(rf(le),(le=R=le.prev)===le.next)break;Z=!0}while(Z||le!==R);return R}function tf(M,R,Z,le,Te,Ie,je){if(M){!je&&Ie&&function(Tt,zt,Gt,Ut){var on=Tt;do on.z===null&&(on.z=hd(on.x,on.y,zt,Gt,Ut)),on.prevZ=on.prev,on.nextZ=on.next,on=on.next;while(on!==Tt);on.prevZ.nextZ=null,on.prevZ=null,function(cn){var kn,_n,Fn,Bn,Wn,$n,lr,Tr,vr=1;do{for(_n=cn,cn=null,Wn=null,$n=0;_n;){for($n++,Fn=_n,lr=0,kn=0;kn<vr&&(lr++,Fn=Fn.nextZ);kn++);for(Tr=vr;lr>0||Tr>0&&Fn;)lr!==0&&(Tr===0||!Fn||_n.z<=Fn.z)?(Bn=_n,_n=_n.nextZ,lr--):(Bn=Fn,Fn=Fn.nextZ,Tr--),Wn?Wn.nextZ=Bn:cn=Bn,Bn.prevZ=Wn,Wn=Bn;_n=Fn}Wn.nextZ=null,vr*=2}while($n>1)}(on)}(M,le,Te,Ie);for(var Je,lt,_t=M;M.prev!==M.next;)if(Je=M.prev,lt=M.next,Ie?Jg(M,le,Te,Ie):Kg(M))R.push(Je.i/Z),R.push(M.i/Z),R.push(lt.i/Z),rf(M),M=lt.next,_t=lt.next;else if((M=lt)===_t){je?je===1?tf(M=$g(Pc(M),R,Z),R,Z,le,Te,Ie,2):je===2&&Qg(M,R,Z,le,Te,Ie):tf(Pc(M),R,Z,le,Te,Ie,1);break}}}function Kg(M){var R=M.prev,Z=M,le=M.next;if(Ca(R,Z,le)>=0)return!1;for(var Te=M.next.next;Te!==M.prev;){if(xu(R.x,R.y,Z.x,Z.y,le.x,le.y,Te.x,Te.y)&&Ca(Te.prev,Te,Te.next)>=0)return!1;Te=Te.next}return!0}function Jg(M,R,Z,le){var Te=M.prev,Ie=M,je=M.next;if(Ca(Te,Ie,je)>=0)return!1;for(var Je=Te.x<Ie.x?Te.x<je.x?Te.x:je.x:Ie.x<je.x?Ie.x:je.x,lt=Te.y<Ie.y?Te.y<je.y?Te.y:je.y:Ie.y<je.y?Ie.y:je.y,_t=Te.x>Ie.x?Te.x>je.x?Te.x:je.x:Ie.x>je.x?Ie.x:je.x,Tt=Te.y>Ie.y?Te.y>je.y?Te.y:je.y:Ie.y>je.y?Ie.y:je.y,zt=hd(Je,lt,R,Z,le),Gt=hd(_t,Tt,R,Z,le),Ut=M.prevZ,on=M.nextZ;Ut&&Ut.z>=zt&&on&&on.z<=Gt;){if(Ut!==M.prev&&Ut!==M.next&&xu(Te.x,Te.y,Ie.x,Ie.y,je.x,je.y,Ut.x,Ut.y)&&Ca(Ut.prev,Ut,Ut.next)>=0||(Ut=Ut.prevZ,on!==M.prev&&on!==M.next&&xu(Te.x,Te.y,Ie.x,Ie.y,je.x,je.y,on.x,on.y)&&Ca(on.prev,on,on.next)>=0))return!1;on=on.nextZ}for(;Ut&&Ut.z>=zt;){if(Ut!==M.prev&&Ut!==M.next&&xu(Te.x,Te.y,Ie.x,Ie.y,je.x,je.y,Ut.x,Ut.y)&&Ca(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.prevZ}for(;on&&on.z<=Gt;){if(on!==M.prev&&on!==M.next&&xu(Te.x,Te.y,Ie.x,Ie.y,je.x,je.y,on.x,on.y)&&Ca(on.prev,on,on.next)>=0)return!1;on=on.nextZ}return!0}function $g(M,R,Z){var le=M;do{var Te=le.prev,Ie=le.next.next;!Yf(Te,Ie)&&wp(Te,le,le.next,Ie)&&nf(Te,Ie)&&nf(Ie,Te)&&(R.push(Te.i/Z),R.push(le.i/Z),R.push(Ie.i/Z),rf(le),rf(le.next),le=M=Ie),le=le.next}while(le!==M);return Pc(le)}function Qg(M,R,Z,le,Te,Ie){var je=M;do{for(var Je=je.next.next;Je!==je.prev;){if(je.i!==Je.i&&i1(je,Je)){var lt=Tp(je,Je);return je=Pc(je,je.next),lt=Pc(lt,lt.next),tf(je,R,Z,le,Te,Ie),void tf(lt,R,Z,le,Te,Ie)}Je=Je.next}je=je.next}while(je!==M)}function e1(M,R){return M.x-R.x}function t1(M,R){if(R=function(le,Te){var Ie,je=Te,Je=le.x,lt=le.y,_t=-1/0;do{if(lt<=je.y&&lt>=je.next.y&&je.next.y!==je.y){var Tt=je.x+(lt-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(Tt<=Je&&Tt>_t){if(_t=Tt,Tt===Je){if(lt===je.y)return je;if(lt===je.next.y)return je.next}Ie=je.x<je.next.x?je:je.next}}je=je.next}while(je!==Te);if(!Ie)return null;if(Je===_t)return Ie;var zt,Gt=Ie,Ut=Ie.x,on=Ie.y,cn=1/0;je=Ie;do Je>=je.x&&je.x>=Ut&&Je!==je.x&&xu(lt<on?Je:_t,lt,Ut,on,lt<on?_t:Je,lt,je.x,je.y)&&(zt=Math.abs(lt-je.y)/(Je-je.x),nf(je,le)&&(zt<cn||zt===cn&&(je.x>Ie.x||je.x===Ie.x&&n1(Ie,je)))&&(Ie=je,cn=zt)),je=je.next;while(je!==Gt);return Ie}(M,R)){var Z=Tp(R,M);Pc(R,R.next),Pc(Z,Z.next)}}function n1(M,R){return Ca(M.prev,M,R.prev)<0&&Ca(R.next,M,M.next)<0}function hd(M,R,Z,le,Te){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-Z)*Te)|M<<8))|M<<4))|M<<2))|M<<1))|(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-le)*Te)|R<<8))|R<<4))|R<<2))|R<<1))<<1}function r1(M){var R=M,Z=M;do(R.x<Z.x||R.x===Z.x&&R.y<Z.y)&&(Z=R),R=R.next;while(R!==M);return Z}function xu(M,R,Z,le,Te,Ie,je,Je){return(Te-je)*(R-Je)-(M-je)*(Ie-Je)>=0&&(M-je)*(le-Je)-(Z-je)*(R-Je)>=0&&(Z-je)*(Ie-Je)-(Te-je)*(le-Je)>=0}function i1(M,R){return M.next.i!==R.i&&M.prev.i!==R.i&&!function(Z,le){var Te=Z;do{if(Te.i!==Z.i&&Te.next.i!==Z.i&&Te.i!==le.i&&Te.next.i!==le.i&&wp(Te,Te.next,Z,le))return!0;Te=Te.next}while(Te!==Z);return!1}(M,R)&&(nf(M,R)&&nf(R,M)&&function(Z,le){var Te=Z,Ie=!1,je=(Z.x+le.x)/2,Je=(Z.y+le.y)/2;do Te.y>Je!=Te.next.y>Je&&Te.next.y!==Te.y&&je<(Te.next.x-Te.x)*(Je-Te.y)/(Te.next.y-Te.y)+Te.x&&(Ie=!Ie),Te=Te.next;while(Te!==Z);return Ie}(M,R)&&(Ca(M.prev,M,R.prev)||Ca(M,R.prev,R))||Yf(M,R)&&Ca(M.prev,M,M.next)>0&&Ca(R.prev,R,R.next)>0)}function Ca(M,R,Z){return(R.y-M.y)*(Z.x-R.x)-(R.x-M.x)*(Z.y-R.y)}function Yf(M,R){return M.x===R.x&&M.y===R.y}function wp(M,R,Z,le){var Te=Zf(Ca(M,R,Z)),Ie=Zf(Ca(M,R,le)),je=Zf(Ca(Z,le,M)),Je=Zf(Ca(Z,le,R));return Te!==Ie&&je!==Je||!(Te!==0||!Xf(M,Z,R))||!(Ie!==0||!Xf(M,le,R))||!(je!==0||!Xf(Z,M,le))||!(Je!==0||!Xf(Z,R,le))}function Xf(M,R,Z){return R.x<=Math.max(M.x,Z.x)&&R.x>=Math.min(M.x,Z.x)&&R.y<=Math.max(M.y,Z.y)&&R.y>=Math.min(M.y,Z.y)}function Zf(M){return M>0?1:M<0?-1:0}function nf(M,R){return Ca(M.prev,M,M.next)<0?Ca(M,R,M.next)>=0&&Ca(M,M.prev,R)>=0:Ca(M,R,M.prev)<0||Ca(M,M.next,R)<0}function Tp(M,R){var Z=new dd(M.i,M.x,M.y),le=new dd(R.i,R.x,R.y),Te=M.next,Ie=R.prev;return M.next=R,R.prev=M,Z.next=Te,Te.prev=Z,le.next=Z,Z.prev=le,Ie.next=le,le.prev=Ie,le}function kp(M,R,Z,le){var Te=new dd(M,R,Z);return le?(Te.next=le.next,Te.prev=le,le.next.prev=Te,le.next=Te):(Te.prev=Te,Te.next=Te),Te}function rf(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function dd(M,R,Z){this.i=M,this.x=R,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pd(M,R,Z,le){for(var Te=0,Ie=R,je=Z-le;Ie<Z;Ie+=le)Te+=(M[je]-M[Ie])*(M[Ie+1]+M[je+1]),je=Ie;return Te}function a1(M,R,Z,le,Te){Ap(M,R,Z||0,le||M.length-1,Te||o1)}function Ap(M,R,Z,le,Te){for(;le>Z;){if(le-Z>600){var Ie=le-Z+1,je=R-Z+1,Je=Math.log(Ie),lt=.5*Math.exp(2*Je/3),_t=.5*Math.sqrt(Je*lt*(Ie-lt)/Ie)*(je-Ie/2<0?-1:1);Ap(M,R,Math.max(Z,Math.floor(R-je*lt/Ie+_t)),Math.min(le,Math.floor(R+(Ie-je)*lt/Ie+_t)),Te)}var Tt=M[R],zt=Z,Gt=le;for(af(M,Z,R),Te(M[le],Tt)>0&&af(M,Z,le);zt<Gt;){for(af(M,zt,Gt),zt++,Gt--;Te(M[zt],Tt)<0;)zt++;for(;Te(M[Gt],Tt)>0;)Gt--}Te(M[Z],Tt)===0?af(M,Z,Gt):af(M,++Gt,le),Gt<=R&&(Z=Gt+1),R<=Gt&&(le=Gt-1)}}function af(M,R,Z){var le=M[R];M[R]=M[Z],M[Z]=le}function o1(M,R){return M<R?-1:M>R?1:0}function md(M,R){var Z=M.length;if(Z<=1)return[M];for(var le,Te,Ie=[],je=0;je<Z;je++){var Je=I(M[je]);Je!==0&&(M[je].area=Math.abs(Je),Te===void 0&&(Te=Je<0),Te===Je<0?(le&&Ie.push(le),le=[M[je]]):le.push(M[je]))}if(le&&Ie.push(le),R>1)for(var lt=0;lt<Ie.length;lt++)Ie[lt].length<=R||(a1(Ie[lt],R,1,Ie[lt].length-1,s1),Ie[lt]=Ie[lt].slice(0,R));return Ie}function s1(M,R){return R.area-M.area}function gd(M,R,Z){for(var le=Z.patternDependencies,Te=!1,Ie=0,je=R;Ie<je.length;Ie+=1){var Je=je[Ie].paint.get(M+"-pattern");Je.isConstant()||(Te=!0);var lt=Je.constantOr(null);lt&&(Te=!0,le[lt.to]=!0,le[lt.from]=!0)}return Te}function vd(M,R,Z,le,Te){for(var Ie=Te.patternDependencies,je=0,Je=R;je<Je.length;je+=1){var lt=Je[je],_t=lt.paint.get(M+"-pattern").value;if(_t.kind!=="constant"){var Tt=_t.evaluate({zoom:le-1},Z,{},Te.availableImages),zt=_t.evaluate({zoom:le},Z,{},Te.availableImages),Gt=_t.evaluate({zoom:le+1},Z,{},Te.availableImages);Tt=Tt&&Tt.name?Tt.name:Tt,zt=zt&&zt.name?zt.name:zt,Gt=Gt&&Gt.name?Gt.name:Gt,Ie[Tt]=!0,Ie[zt]=!0,Ie[Gt]=!0,Z.patterns[lt.id]={min:Tt,mid:zt,max:Gt}}}return Z}Wf.deviation=function(M,R,Z,le){var Te=R&&R.length,Ie=Te?R[0]*Z:M.length,je=Math.abs(pd(M,0,Ie,Z));if(Te)for(var Je=0,lt=R.length;Je<lt;Je++){var _t=R[Je]*Z,Tt=Je<lt-1?R[Je+1]*Z:M.length;je-=Math.abs(pd(M,_t,Tt,Z))}var zt=0;for(Je=0;Je<le.length;Je+=3){var Gt=le[Je]*Z,Ut=le[Je+1]*Z,on=le[Je+2]*Z;zt+=Math.abs((M[Gt]-M[on])*(M[Ut+1]-M[Gt+1])-(M[Gt]-M[Ut])*(M[on+1]-M[Gt+1]))}return je===0&&zt===0?0:Math.abs((zt-je)/je)},Wf.flatten=function(M){for(var R=M[0][0].length,Z={vertices:[],holes:[],dimensions:R},le=0,Te=0;Te<M.length;Te++){for(var Ie=0;Ie<M[Te].length;Ie++)for(var je=0;je<R;je++)Z.vertices.push(M[Te][Ie][je]);Te>0&&(le+=M[Te-1].length,Z.holes.push(le))}return Z},fd.default=Zg;var Il=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ss,this.indexArray=new xe,this.indexArray2=new ct,this.programConfigurations=new sa(M.layers,M.zoom),this.segments=new Hn,this.segments2=new Hn,this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};Il.prototype.populate=function(M,R,Z){this.hasPattern=gd("fill",this.layers,R);for(var le=this.layers[0].layout.get("fill-sort-key"),Te=[],Ie=0,je=M;Ie<je.length;Ie+=1){var Je=je[Ie],lt=Je.feature,_t=Je.id,Tt=Je.index,zt=Je.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,Ut=Hi(lt,Gt);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),Ut,Z)){var on=le?le.evaluate(Ut,{},Z,R.availableImages):void 0,cn={id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:zt,index:Tt,geometry:Gt?Ut.geometry:as(lt),patterns:{},sortKey:on};Te.push(cn)}}le&&Te.sort(function(Sr,Er){return Sr.sortKey-Er.sortKey});for(var kn=0,_n=Te;kn<_n.length;kn+=1){var Fn=_n[kn],Bn=Fn,Wn=Bn.geometry,$n=Bn.index,lr=Bn.sourceLayerIndex;if(this.hasPattern){var Tr=vd("fill",this.layers,Fn,this.zoom,R);this.patternFeatures.push(Tr)}else this.addFeature(Fn,Wn,$n,Z,{});var vr=M[$n].feature;R.featureIndex.insert(vr,Wn,$n,lr,this.index)}},Il.prototype.update=function(M,R,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,R,this.stateDependentLayers,Z)},Il.prototype.addFeatures=function(M,R,Z){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Ie=Te[le];this.addFeature(Ie,Ie.geometry,Ie.index,R,Z)}},Il.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Il.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Il.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Xg),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},Il.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Il.prototype.addFeature=function(M,R,Z,le,Te){for(var Ie=0,je=md(R,500);Ie<je.length;Ie+=1){for(var Je=je[Ie],lt=0,_t=0,Tt=Je;_t<Tt.length;_t+=1)lt+=Tt[_t].length;for(var zt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray),Gt=zt.vertexLength,Ut=[],on=[],cn=0,kn=Je;cn<kn.length;cn+=1){var _n=kn[cn];if(_n.length!==0){_n!==Je[0]&&on.push(Ut.length/2);var Fn=this.segments2.prepareSegment(_n.length,this.layoutVertexArray,this.indexArray2),Bn=Fn.vertexLength;this.layoutVertexArray.emplaceBack(_n[0].x,_n[0].y),this.indexArray2.emplaceBack(Bn+_n.length-1,Bn),Ut.push(_n[0].x),Ut.push(_n[0].y);for(var Wn=1;Wn<_n.length;Wn++)this.layoutVertexArray.emplaceBack(_n[Wn].x,_n[Wn].y),this.indexArray2.emplaceBack(Bn+Wn-1,Bn+Wn),Ut.push(_n[Wn].x),Ut.push(_n[Wn].y);Fn.vertexLength+=_n.length,Fn.primitiveLength+=_n.length}}for(var $n=fd(Ut,on),lr=0;lr<$n.length;lr+=3)this.indexArray.emplaceBack(Gt+$n[lr],Gt+$n[lr+1],Gt+$n[lr+2]);zt.vertexLength+=lt,zt.primitiveLength+=$n.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,Te,le)},Lr("FillBucket",Il,{omit:["layers","patternFeatures"]});var l1=new $i({"fill-sort-key":new Ur(We.layout_fill["fill-sort-key"])}),c1={paint:new $i({"fill-antialias":new Dr(We.paint_fill["fill-antialias"]),"fill-opacity":new Ur(We.paint_fill["fill-opacity"]),"fill-color":new Ur(We.paint_fill["fill-color"]),"fill-outline-color":new Ur(We.paint_fill["fill-outline-color"]),"fill-translate":new Dr(We.paint_fill["fill-translate"]),"fill-translate-anchor":new Dr(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new no(We.paint_fill["fill-pattern"])}),layout:l1},u1=function(M){function R(Z){M.call(this,Z,c1)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.recalculate=function(Z,le){M.prototype.recalculate.call(this,Z,le);var Te=this.paint._values["fill-outline-color"];Te.value.kind==="constant"&&Te.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},R.prototype.createBucket=function(Z){return new Il(Z)},R.prototype.queryRadius=function(){return Vf(this.paint.get("fill-translate"))},R.prototype.queryIntersectsFeature=function(Z,le,Te,Ie,je,Je,lt){return Nf(Hf(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Je.angle,lt),Ie)},R.prototype.isTileClipped=function(){return!0},R}(yi),f1=Pi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Mp=bu;function bu(M,R,Z,le,Te){this.properties={},this.extent=Z,this.type=0,this._pbf=M,this._geometry=-1,this._keys=le,this._values=Te,M.readFields(h1,this,R)}function h1(M,R,Z){M==1?R.id=Z.readVarint():M==2?function(le,Te){for(var Ie=le.readVarint()+le.pos;le.pos<Ie;){var je=Te._keys[le.readVarint()],Je=Te._values[le.readVarint()];Te.properties[je]=Je}}(Z,R):M==3?R.type=Z.readVarint():M==4&&(R._geometry=Z.pos)}function d1(M){for(var R,Z,le=0,Te=0,Ie=M.length,je=Ie-1;Te<Ie;je=Te++)R=M[Te],le+=((Z=M[je]).x-R.x)*(R.y+Z.y);return le}bu.types=["Unknown","Point","LineString","Polygon"],bu.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var R,Z=M.readVarint()+M.pos,le=1,Te=0,Ie=0,je=0,Je=[];M.pos<Z;){if(Te<=0){var lt=M.readVarint();le=7&lt,Te=lt>>3}if(Te--,le===1||le===2)Ie+=M.readSVarint(),je+=M.readSVarint(),le===1&&(R&&Je.push(R),R=[]),R.push(new t(Ie,je));else{if(le!==7)throw new Error("unknown command "+le);R&&R.push(R[0].clone())}}return R&&Je.push(R),Je},bu.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var R=M.readVarint()+M.pos,Z=1,le=0,Te=0,Ie=0,je=1/0,Je=-1/0,lt=1/0,_t=-1/0;M.pos<R;){if(le<=0){var Tt=M.readVarint();Z=7&Tt,le=Tt>>3}if(le--,Z===1||Z===2)(Te+=M.readSVarint())<je&&(je=Te),Te>Je&&(Je=Te),(Ie+=M.readSVarint())<lt&&(lt=Ie),Ie>_t&&(_t=Ie);else if(Z!==7)throw new Error("unknown command "+Z)}return[je,lt,Je,_t]},bu.prototype.toGeoJSON=function(M,R,Z){var le,Te,Ie=this.extent*Math.pow(2,Z),je=this.extent*M,Je=this.extent*R,lt=this.loadGeometry(),_t=bu.types[this.type];function Tt(Ut){for(var on=0;on<Ut.length;on++){var cn=Ut[on],kn=180-360*(cn.y+Je)/Ie;Ut[on]=[360*(cn.x+je)/Ie-180,360/Math.PI*Math.atan(Math.exp(kn*Math.PI/180))-90]}}switch(this.type){case 1:var zt=[];for(le=0;le<lt.length;le++)zt[le]=lt[le][0];Tt(lt=zt);break;case 2:for(le=0;le<lt.length;le++)Tt(lt[le]);break;case 3:for(lt=function(Ut){var on=Ut.length;if(on<=1)return[Ut];for(var cn,kn,_n=[],Fn=0;Fn<on;Fn++){var Bn=d1(Ut[Fn]);Bn!==0&&(kn===void 0&&(kn=Bn<0),kn===Bn<0?(cn&&_n.push(cn),cn=[Ut[Fn]]):cn.push(Ut[Fn]))}return cn&&_n.push(cn),_n}(lt),le=0;le<lt.length;le++)for(Te=0;Te<lt[le].length;Te++)Tt(lt[le][Te])}lt.length===1?lt=lt[0]:_t="Multi"+_t;var Gt={type:"Feature",geometry:{type:_t,coordinates:lt},properties:this.properties};return"id"in this&&(Gt.id=this.id),Gt};var Sp=Cp;function Cp(M,R){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(p1,this,R),this.length=this._features.length}function p1(M,R,Z){M===15?R.version=Z.readVarint():M===1?R.name=Z.readString():M===5?R.extent=Z.readVarint():M===2?R._features.push(Z.pos):M===3?R._keys.push(Z.readString()):M===4&&R._values.push(function(le){for(var Te=null,Ie=le.readVarint()+le.pos;le.pos<Ie;){var je=le.readVarint()>>3;Te=je===1?le.readString():je===2?le.readFloat():je===3?le.readDouble():je===4?le.readVarint64():je===5?le.readVarint():je===6?le.readSVarint():je===7?le.readBoolean():null}return Te}(Z))}function m1(M,R,Z){if(M===3){var le=new Sp(Z,Z.readVarint()+Z.pos);le.length&&(R[le.name]=le)}}Cp.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var R=this._pbf.readVarint()+this._pbf.pos;return new Mp(this._pbf,R,this.extent,this._keys,this._values)};var _u={VectorTile:function(M,R){this.layers=M.readFields(m1,{},R)},VectorTileFeature:Mp,VectorTileLayer:Sp},g1=_u.VectorTileFeature.types,yd=Math.pow(2,13);function of(M,R,Z,le,Te,Ie,je,Je){M.emplaceBack(R,Z,2*Math.floor(le*yd)+je,Te*yd*2,Ie*yd*2,Math.round(Je))}var Pl=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Ke,this.indexArray=new xe,this.programConfigurations=new sa(M.layers,M.zoom),this.segments=new Hn,this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};function v1(M,R){return M.x===R.x&&(M.x<0||M.x>pi)||M.y===R.y&&(M.y<0||M.y>pi)}Pl.prototype.populate=function(M,R,Z){this.features=[],this.hasPattern=gd("fill-extrusion",this.layers,R);for(var le=0,Te=M;le<Te.length;le+=1){var Ie=Te[le],je=Ie.feature,Je=Ie.id,lt=Ie.index,_t=Ie.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,zt=Hi(je,Tt);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),zt,Z)){var Gt={id:Je,sourceLayerIndex:_t,index:lt,geometry:Tt?zt.geometry:as(je),properties:je.properties,type:je.type,patterns:{}};this.hasPattern?this.features.push(vd("fill-extrusion",this.layers,Gt,this.zoom,R)):this.addFeature(Gt,Gt.geometry,lt,Z,{}),R.featureIndex.insert(je,Gt.geometry,lt,_t,this.index,!0)}}},Pl.prototype.addFeatures=function(M,R,Z){for(var le=0,Te=this.features;le<Te.length;le+=1){var Ie=Te[le],je=Ie.geometry;this.addFeature(Ie,je,Ie.index,R,Z)}},Pl.prototype.update=function(M,R,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,R,this.stateDependentLayers,Z)},Pl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pl.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,f1),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Pl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Pl.prototype.addFeature=function(M,R,Z,le,Te){for(var Ie=0,je=md(R,500);Ie<je.length;Ie+=1){for(var Je=je[Ie],lt=0,_t=0,Tt=Je;_t<Tt.length;_t+=1)lt+=Tt[_t].length;for(var zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Gt=0,Ut=Je;Gt<Ut.length;Gt+=1){var on=Ut[Gt];if(on.length!==0&&!((ui=on).every(function(Qr){return Qr.x<0})||ui.every(function(Qr){return Qr.x>pi})||ui.every(function(Qr){return Qr.y<0})||ui.every(function(Qr){return Qr.y>pi})))for(var cn=0,kn=0;kn<on.length;kn++){var _n=on[kn];if(kn>=1){var Fn=on[kn-1];if(!v1(_n,Fn)){zt.vertexLength+4>Hn.MAX_VERTEX_ARRAY_LENGTH&&(zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Bn=_n.sub(Fn)._perp()._unit(),Wn=Fn.dist(_n);cn+Wn>32768&&(cn=0),of(this.layoutVertexArray,_n.x,_n.y,Bn.x,Bn.y,0,0,cn),of(this.layoutVertexArray,_n.x,_n.y,Bn.x,Bn.y,0,1,cn),cn+=Wn,of(this.layoutVertexArray,Fn.x,Fn.y,Bn.x,Bn.y,0,0,cn),of(this.layoutVertexArray,Fn.x,Fn.y,Bn.x,Bn.y,0,1,cn);var $n=zt.vertexLength;this.indexArray.emplaceBack($n,$n+2,$n+1),this.indexArray.emplaceBack($n+1,$n+2,$n+3),zt.vertexLength+=4,zt.primitiveLength+=2}}}}if(zt.vertexLength+lt>Hn.MAX_VERTEX_ARRAY_LENGTH&&(zt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray)),g1[M.type]==="Polygon"){for(var lr=[],Tr=[],vr=zt.vertexLength,Sr=0,Er=Je;Sr<Er.length;Sr+=1){var Xr=Er[Sr];if(Xr.length!==0){Xr!==Je[0]&&Tr.push(lr.length/2);for(var zr=0;zr<Xr.length;zr++){var Yr=Xr[zr];of(this.layoutVertexArray,Yr.x,Yr.y,0,0,1,1,0),lr.push(Yr.x),lr.push(Yr.y)}}}for(var jr=fd(lr,Tr),Rr=0;Rr<jr.length;Rr+=3)this.indexArray.emplaceBack(vr+jr[Rr],vr+jr[Rr+2],vr+jr[Rr+1]);zt.primitiveLength+=jr.length/3,zt.vertexLength+=lt}}var ui;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,Te,le)},Lr("FillExtrusionBucket",Pl,{omit:["layers","features"]});var y1={paint:new $i({"fill-extrusion-opacity":new Dr(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ur(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dr(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dr(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new no(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ur(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ur(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dr(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},x1=function(M){function R(Z){M.call(this,Z,y1)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(Z){return new Pl(Z)},R.prototype.queryRadius=function(){return Vf(this.paint.get("fill-extrusion-translate"))},R.prototype.is3D=function(){return!0},R.prototype.queryIntersectsFeature=function(Z,le,Te,Ie,je,Je,lt,_t){var Tt=Hf(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Je.angle,lt),zt=this.paint.get("fill-extrusion-height").evaluate(le,Te),Gt=this.paint.get("fill-extrusion-base").evaluate(le,Te),Ut=function(cn,kn,_n,Fn){for(var Bn=[],Wn=0,$n=cn;Wn<$n.length;Wn+=1){var lr=$n[Wn],Tr=[lr.x,lr.y,Fn,1];qf(Tr,Tr,kn),Bn.push(new t(Tr[0]/Tr[3],Tr[1]/Tr[3]))}return Bn}(Tt,_t,0,0),on=function(cn,kn,_n,Fn){for(var Bn=[],Wn=[],$n=Fn[8]*kn,lr=Fn[9]*kn,Tr=Fn[10]*kn,vr=Fn[11]*kn,Sr=Fn[8]*_n,Er=Fn[9]*_n,Xr=Fn[10]*_n,zr=Fn[11]*_n,Yr=0,jr=cn;Yr<jr.length;Yr+=1){for(var Rr=[],ui=[],Qr=0,Fi=jr[Yr];Qr<Fi.length;Qr+=1){var Wr=Fi[Qr],Ii=Wr.x,qi=Wr.y,Ki=Fn[0]*Ii+Fn[4]*qi+Fn[12],Ji=Fn[1]*Ii+Fn[5]*qi+Fn[13],Bi=Fn[2]*Ii+Fn[6]*qi+Fn[14],Ia=Fn[3]*Ii+Fn[7]*qi+Fn[15],aa=Bi+Tr,Ga=Ia+vr,ao=Ki+Sr,Ja=Ji+Er,Io=Bi+Xr,$a=Ia+zr,Ra=new t((Ki+$n)/Ga,(Ji+lr)/Ga);Ra.z=aa/Ga,Rr.push(Ra);var Qa=new t(ao/$a,Ja/$a);Qa.z=Io/$a,ui.push(Qa)}Bn.push(Rr),Wn.push(ui)}return[Bn,Wn]}(Ie,Gt,zt,_t);return function(cn,kn,_n){var Fn=1/0;Nf(_n,kn)&&(Fn=Ep(_n,kn[0]));for(var Bn=0;Bn<kn.length;Bn++)for(var Wn=kn[Bn],$n=cn[Bn],lr=0;lr<Wn.length-1;lr++){var Tr=Wn[lr],vr=Wn[lr+1],Sr=$n[lr],Er=[Tr,vr,$n[lr+1],Sr,Tr];eu(_n,Er)&&(Fn=Math.min(Fn,Ep(_n,Er)))}return Fn!==1/0&&Fn}(on[0],on[1],Ut)},R}(yi);function sf(M,R){return M.x*R.x+M.y*R.y}function Ep(M,R){if(M.length===1){for(var Z,le=0,Te=R[le++];!Z||Te.equals(Z);)if(!(Z=R[le++]))return 1/0;for(;le<R.length;le++){var Ie=R[le],je=M[0],Je=Z.sub(Te),lt=Ie.sub(Te),_t=je.sub(Te),Tt=sf(Je,Je),zt=sf(Je,lt),Gt=sf(lt,lt),Ut=sf(_t,Je),on=sf(_t,lt),cn=Tt*Gt-zt*zt,kn=(Gt*Ut-zt*on)/cn,_n=(Tt*on-zt*Ut)/cn,Fn=1-kn-_n,Bn=Te.z*Fn+Z.z*kn+Ie.z*_n;if(isFinite(Bn))return Bn}return 1/0}for(var Wn=1/0,$n=0,lr=R;$n<lr.length;$n+=1){var Tr=lr[$n];Wn=Math.min(Wn,Tr.z)}return Wn}var b1=Pi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,_1=Pi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,w1=_u.VectorTileFeature.types,T1=Math.cos(Math.PI/180*37.5),Lp=Math.pow(2,14)/.5,Lo=function(M){var R=this;this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Z){return Z.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Z){R.gradients[Z.id]={}}),this.layoutVertexArray=new Qe,this.layoutVertexArray2=new st,this.indexArray=new xe,this.programConfigurations=new sa(M.layers,M.zoom),this.segments=new Hn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Z){return Z.isStateDependent()}).map(function(Z){return Z.id})};Lo.prototype.populate=function(M,R,Z){this.hasPattern=gd("line",this.layers,R);for(var le=this.layers[0].layout.get("line-sort-key"),Te=[],Ie=0,je=M;Ie<je.length;Ie+=1){var Je=je[Ie],lt=Je.feature,_t=Je.id,Tt=Je.index,zt=Je.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,Ut=Hi(lt,Gt);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),Ut,Z)){var on=le?le.evaluate(Ut,{},Z):void 0,cn={id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:zt,index:Tt,geometry:Gt?Ut.geometry:as(lt),patterns:{},sortKey:on};Te.push(cn)}}le&&Te.sort(function(Sr,Er){return Sr.sortKey-Er.sortKey});for(var kn=0,_n=Te;kn<_n.length;kn+=1){var Fn=_n[kn],Bn=Fn,Wn=Bn.geometry,$n=Bn.index,lr=Bn.sourceLayerIndex;if(this.hasPattern){var Tr=vd("line",this.layers,Fn,this.zoom,R);this.patternFeatures.push(Tr)}else this.addFeature(Fn,Wn,$n,Z,{});var vr=M[$n].feature;R.featureIndex.insert(vr,Wn,$n,lr,this.index)}},Lo.prototype.update=function(M,R,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,R,this.stateDependentLayers,Z)},Lo.prototype.addFeatures=function(M,R,Z){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Ie=Te[le];this.addFeature(Ie,Ie.geometry,Ie.index,R,Z)}},Lo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Lo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Lo.prototype.upload=function(M){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=M.createVertexBuffer(this.layoutVertexArray2,_1)),this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,b1),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Lo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Lo.prototype.lineFeatureClips=function(M){if(M.properties&&M.properties.hasOwnProperty("mapbox_clip_start")&&M.properties.hasOwnProperty("mapbox_clip_end"))return{start:+M.properties.mapbox_clip_start,end:+M.properties.mapbox_clip_end}},Lo.prototype.addFeature=function(M,R,Z,le,Te){var Ie=this.layers[0].layout,je=Ie.get("line-join").evaluate(M,{}),Je=Ie.get("line-cap"),lt=Ie.get("line-miter-limit"),_t=Ie.get("line-round-limit");this.lineClips=this.lineFeatureClips(M);for(var Tt=0,zt=R;Tt<zt.length;Tt+=1){var Gt=zt[Tt];this.addLine(Gt,M,je,Je,lt,_t)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,Te,le)},Lo.prototype.addLine=function(M,R,Z,le,Te,Ie){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var je=0;je<M.length-1;je++)this.totalDistance+=M[je].dist(M[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Je=w1[R.type]==="Polygon",lt=M.length;lt>=2&&M[lt-1].equals(M[lt-2]);)lt--;for(var _t=0;_t<lt-1&&M[_t].equals(M[_t+1]);)_t++;if(!(lt<(Je?3:2))){Z==="bevel"&&(Te=1.05);var Tt,zt=this.overscaling<=16?15*pi/(512*this.overscaling):0,Gt=this.segments.prepareSegment(10*lt,this.layoutVertexArray,this.indexArray),Ut=void 0,on=void 0,cn=void 0,kn=void 0;this.e1=this.e2=-1,Je&&(Tt=M[lt-2],kn=M[_t].sub(Tt)._unit()._perp());for(var _n=_t;_n<lt;_n++)if(!(on=_n===lt-1?Je?M[_t+1]:void 0:M[_n+1])||!M[_n].equals(on)){kn&&(cn=kn),Tt&&(Ut=Tt),Tt=M[_n],kn=on?on.sub(Tt)._unit()._perp():cn;var Fn=(cn=cn||kn).add(kn);Fn.x===0&&Fn.y===0||Fn._unit();var Bn=cn.x*kn.x+cn.y*kn.y,Wn=Fn.x*kn.x+Fn.y*kn.y,$n=Wn!==0?1/Wn:1/0,lr=2*Math.sqrt(2-2*Wn),Tr=Wn<T1&&Ut&&on,vr=cn.x*kn.y-cn.y*kn.x>0;if(Tr&&_n>_t){var Sr=Tt.dist(Ut);if(Sr>2*zt){var Er=Tt.sub(Tt.sub(Ut)._mult(zt/Sr)._round());this.updateDistance(Ut,Er),this.addCurrentVertex(Er,cn,0,0,Gt),Ut=Er}}var Xr=Ut&&on,zr=Xr?Z:Je?"butt":le;if(Xr&&zr==="round"&&($n<Ie?zr="miter":$n<=2&&(zr="fakeround")),zr==="miter"&&$n>Te&&(zr="bevel"),zr==="bevel"&&($n>2&&(zr="flipbevel"),$n<Te&&(zr="miter")),Ut&&this.updateDistance(Ut,Tt),zr==="miter")Fn._mult($n),this.addCurrentVertex(Tt,Fn,0,0,Gt);else if(zr==="flipbevel"){if($n>100)Fn=kn.mult(-1);else{var Yr=$n*cn.add(kn).mag()/cn.sub(kn).mag();Fn._perp()._mult(Yr*(vr?-1:1))}this.addCurrentVertex(Tt,Fn,0,0,Gt),this.addCurrentVertex(Tt,Fn.mult(-1),0,0,Gt)}else if(zr==="bevel"||zr==="fakeround"){var jr=-Math.sqrt($n*$n-1),Rr=vr?jr:0,ui=vr?0:jr;if(Ut&&this.addCurrentVertex(Tt,cn,Rr,ui,Gt),zr==="fakeround")for(var Qr=Math.round(180*lr/Math.PI/20),Fi=1;Fi<Qr;Fi++){var Wr=Fi/Qr;if(Wr!==.5){var Ii=Wr-.5;Wr+=Wr*Ii*(Wr-1)*((1.0904+Bn*(Bn*(3.55645-1.43519*Bn)-3.2452))*Ii*Ii+(.848013+Bn*(.215638*Bn-1.06021)))}var qi=kn.sub(cn)._mult(Wr)._add(cn)._unit()._mult(vr?-1:1);this.addHalfVertex(Tt,qi.x,qi.y,!1,vr,0,Gt)}on&&this.addCurrentVertex(Tt,kn,-Rr,-ui,Gt)}else if(zr==="butt")this.addCurrentVertex(Tt,Fn,0,0,Gt);else if(zr==="square"){var Ki=Ut?1:-1;this.addCurrentVertex(Tt,Fn,Ki,Ki,Gt)}else zr==="round"&&(Ut&&(this.addCurrentVertex(Tt,cn,0,0,Gt),this.addCurrentVertex(Tt,cn,1,1,Gt,!0)),on&&(this.addCurrentVertex(Tt,kn,-1,-1,Gt,!0),this.addCurrentVertex(Tt,kn,0,0,Gt)));if(Tr&&_n<lt-1){var Ji=Tt.dist(on);if(Ji>2*zt){var Bi=Tt.add(on.sub(Tt)._mult(zt/Ji)._round());this.updateDistance(Tt,Bi),this.addCurrentVertex(Bi,kn,0,0,Gt),Tt=Bi}}}}},Lo.prototype.addCurrentVertex=function(M,R,Z,le,Te,Ie){Ie===void 0&&(Ie=!1);var je=R.x+R.y*Z,Je=R.y-R.x*Z,lt=-R.x+R.y*le,_t=-R.y-R.x*le;this.addHalfVertex(M,je,Je,Ie,!1,Z,Te),this.addHalfVertex(M,lt,_t,Ie,!0,-le,Te),this.distance>Lp/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(M,R,Z,le,Te,Ie))},Lo.prototype.addHalfVertex=function(M,R,Z,le,Te,Ie,je){var Je=M.x,lt=M.y,_t=.5*(this.lineClips?this.scaledDistance*(Lp-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((Je<<1)+(le?1:0),(lt<<1)+(Te?1:0),Math.round(63*R)+128,Math.round(63*Z)+128,1+(Ie===0?0:Ie<0?-1:1)|(63&_t)<<2,_t>>6),this.lineClips){var Tt=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(Tt,this.lineClipsArray.length)}var zt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,zt),je.primitiveLength++),Te?this.e2=zt:this.e1=zt},Lo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Lo.prototype.updateDistance=function(M,R){this.distance+=M.dist(R),this.updateScaledDistance()},Lr("LineBucket",Lo,{omit:["layers","patternFeatures"]});var k1=new $i({"line-cap":new Dr(We.layout_line["line-cap"]),"line-join":new Ur(We.layout_line["line-join"]),"line-miter-limit":new Dr(We.layout_line["line-miter-limit"]),"line-round-limit":new Dr(We.layout_line["line-round-limit"]),"line-sort-key":new Ur(We.layout_line["line-sort-key"])}),Ip={paint:new $i({"line-opacity":new Ur(We.paint_line["line-opacity"]),"line-color":new Ur(We.paint_line["line-color"]),"line-translate":new Dr(We.paint_line["line-translate"]),"line-translate-anchor":new Dr(We.paint_line["line-translate-anchor"]),"line-width":new Ur(We.paint_line["line-width"]),"line-gap-width":new Ur(We.paint_line["line-gap-width"]),"line-offset":new Ur(We.paint_line["line-offset"]),"line-blur":new Ur(We.paint_line["line-blur"]),"line-dasharray":new Ho(We.paint_line["line-dasharray"]),"line-pattern":new no(We.paint_line["line-pattern"]),"line-gradient":new is(We.paint_line["line-gradient"])}),layout:k1},A1=function(M){function R(){M.apply(this,arguments)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.possiblyEvaluate=function(Z,le){return le=new ai(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),M.prototype.possiblyEvaluate.call(this,Z,le)},R.prototype.evaluate=function(Z,le,Te,Ie){return le=u({},le,{zoom:Math.floor(le.zoom)}),M.prototype.evaluate.call(this,Z,le,Te,Ie)},R}(Ur),Pp=new A1(Ip.paint.properties["line-width"].specification);Pp.useIntegerZoom=!0;var M1=function(M){function R(Z){M.call(this,Z,Ip),this.gradientVersion=0}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype._handleSpecialPaintPropertyUpdate=function(Z){if(Z==="line-gradient"){var le=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=le._styleExpression.expression instanceof Pr,this.gradientVersion=(this.gradientVersion+1)%n}},R.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},R.prototype.recalculate=function(Z,le){M.prototype.recalculate.call(this,Z,le),this.paint._values["line-floorwidth"]=Pp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},R.prototype.createBucket=function(Z){return new Lo(Z)},R.prototype.queryRadius=function(Z){var le=Z,Te=Dp(ef("line-width",this,le),ef("line-gap-width",this,le)),Ie=ef("line-offset",this,le);return Te/2+Math.abs(Ie)+Vf(this.paint.get("line-translate"))},R.prototype.queryIntersectsFeature=function(Z,le,Te,Ie,je,Je,lt){var _t=Hf(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Je.angle,lt),Tt=lt/2*Dp(this.paint.get("line-width").evaluate(le,Te),this.paint.get("line-gap-width").evaluate(le,Te)),zt=this.paint.get("line-offset").evaluate(le,Te);return zt&&(Ie=function(Gt,Ut){for(var on=[],cn=new t(0,0),kn=0;kn<Gt.length;kn++){for(var _n=Gt[kn],Fn=[],Bn=0;Bn<_n.length;Bn++){var Wn=_n[Bn-1],$n=_n[Bn],lr=_n[Bn+1],Tr=Bn===0?cn:$n.sub(Wn)._unit()._perp(),vr=Bn===_n.length-1?cn:lr.sub($n)._unit()._perp(),Sr=Tr._add(vr)._unit(),Er=Sr.x*vr.x+Sr.y*vr.y;Sr._mult(1/Er),Fn.push(Sr._mult(Ut)._add($n))}on.push(Fn)}return on}(Ie,zt*lt)),function(Gt,Ut,on){for(var cn=0;cn<Ut.length;cn++){var kn=Ut[cn];if(Gt.length>=3){for(var _n=0;_n<kn.length;_n++)if(Xl(Gt,kn[_n]))return!0}if(od(Gt,kn,on))return!0}return!1}(_t,Ie,Tt)},R.prototype.isTileClipped=function(){return!0},R}(yi);function Dp(M,R){return R>0?R+2*M:M}var S1=Pi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),C1=Pi([{name:"a_projected_pos",components:3,type:"Float32"}],4),E1=(Pi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Pi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Op=(Pi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Pi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),L1=Pi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function I1(M,R,Z){return M.sections.forEach(function(le){le.text=function(Te,Ie,je){var Je=Ie.layout.get("text-transform").evaluate(je,{});return Je==="uppercase"?Te=Te.toLocaleUpperCase():Je==="lowercase"&&(Te=Te.toLocaleLowerCase()),Va.applyArabicShaping&&(Te=Va.applyArabicShaping(Te)),Te}(le.text,R,Z)}),M}Pi([{name:"triangle",components:3,type:"Uint16"}]),Pi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Pi([{type:"Float32",name:"offsetX"}]),Pi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var lf={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ka=24,Rp=function(M,R,Z,le,Te){var Ie,je,Je=8*Te-le-1,lt=(1<<Je)-1,_t=lt>>1,Tt=-7,zt=Z?Te-1:0,Gt=Z?-1:1,Ut=M[R+zt];for(zt+=Gt,Ie=Ut&(1<<-Tt)-1,Ut>>=-Tt,Tt+=Je;Tt>0;Ie=256*Ie+M[R+zt],zt+=Gt,Tt-=8);for(je=Ie&(1<<-Tt)-1,Ie>>=-Tt,Tt+=le;Tt>0;je=256*je+M[R+zt],zt+=Gt,Tt-=8);if(Ie===0)Ie=1-_t;else{if(Ie===lt)return je?NaN:1/0*(Ut?-1:1);je+=Math.pow(2,le),Ie-=_t}return(Ut?-1:1)*je*Math.pow(2,Ie-le)},zp=function(M,R,Z,le,Te,Ie){var je,Je,lt,_t=8*Ie-Te-1,Tt=(1<<_t)-1,zt=Tt>>1,Gt=Te===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ut=le?0:Ie-1,on=le?1:-1,cn=R<0||R===0&&1/R<0?1:0;for(R=Math.abs(R),isNaN(R)||R===1/0?(Je=isNaN(R)?1:0,je=Tt):(je=Math.floor(Math.log(R)/Math.LN2),R*(lt=Math.pow(2,-je))<1&&(je--,lt*=2),(R+=je+zt>=1?Gt/lt:Gt*Math.pow(2,1-zt))*lt>=2&&(je++,lt/=2),je+zt>=Tt?(Je=0,je=Tt):je+zt>=1?(Je=(R*lt-1)*Math.pow(2,Te),je+=zt):(Je=R*Math.pow(2,zt-1)*Math.pow(2,Te),je=0));Te>=8;M[Z+Ut]=255&Je,Ut+=on,Je/=256,Te-=8);for(je=je<<Te|Je,_t+=Te;_t>0;M[Z+Ut]=255&je,Ut+=on,je/=256,_t-=8);M[Z+Ut-on]|=128*cn},Kf=Gi;function Gi(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Gi.Varint=0,Gi.Fixed64=1,Gi.Bytes=2,Gi.Fixed32=5;var xd=4294967296,Fp=1/xd,Bp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function mc(M){return M.type===Gi.Bytes?M.readVarint()+M.pos:M.pos+1}function wu(M,R,Z){return Z?4294967296*R+(M>>>0):4294967296*(R>>>0)+(M>>>0)}function Np(M,R,Z){var le=R<=16383?1:R<=2097151?2:R<=268435455?3:Math.floor(Math.log(R)/(7*Math.LN2));Z.realloc(le);for(var Te=Z.pos-1;Te>=M;Te--)Z.buf[Te+le]=Z.buf[Te]}function P1(M,R){for(var Z=0;Z<M.length;Z++)R.writeVarint(M[Z])}function D1(M,R){for(var Z=0;Z<M.length;Z++)R.writeSVarint(M[Z])}function O1(M,R){for(var Z=0;Z<M.length;Z++)R.writeFloat(M[Z])}function R1(M,R){for(var Z=0;Z<M.length;Z++)R.writeDouble(M[Z])}function z1(M,R){for(var Z=0;Z<M.length;Z++)R.writeBoolean(M[Z])}function F1(M,R){for(var Z=0;Z<M.length;Z++)R.writeFixed32(M[Z])}function B1(M,R){for(var Z=0;Z<M.length;Z++)R.writeSFixed32(M[Z])}function N1(M,R){for(var Z=0;Z<M.length;Z++)R.writeFixed64(M[Z])}function j1(M,R){for(var Z=0;Z<M.length;Z++)R.writeSFixed64(M[Z])}function Jf(M,R){return(M[R]|M[R+1]<<8|M[R+2]<<16)+16777216*M[R+3]}function Tu(M,R,Z){M[Z]=R,M[Z+1]=R>>>8,M[Z+2]=R>>>16,M[Z+3]=R>>>24}function jp(M,R){return(M[R]|M[R+1]<<8|M[R+2]<<16)+(M[R+3]<<24)}Gi.prototype={destroy:function(){this.buf=null},readFields:function(M,R,Z){for(Z=Z||this.length;this.pos<Z;){var le=this.readVarint(),Te=le>>3,Ie=this.pos;this.type=7&le,M(Te,R,this),this.pos===Ie&&this.skip(le)}return R},readMessage:function(M,R){return this.readFields(M,R,this.readVarint()+this.pos)},readFixed32:function(){var M=Jf(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=jp(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Jf(this.buf,this.pos)+Jf(this.buf,this.pos+4)*xd;return this.pos+=8,M},readSFixed64:function(){var M=Jf(this.buf,this.pos)+jp(this.buf,this.pos+4)*xd;return this.pos+=8,M},readFloat:function(){var M=Rp(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=Rp(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var R,Z,le=this.buf;return R=127&(Z=le[this.pos++]),Z<128?R:(R|=(127&(Z=le[this.pos++]))<<7,Z<128?R:(R|=(127&(Z=le[this.pos++]))<<14,Z<128?R:(R|=(127&(Z=le[this.pos++]))<<21,Z<128?R:function(Te,Ie,je){var Je,lt,_t=je.buf;if(Je=(112&(lt=_t[je.pos++]))>>4,lt<128||(Je|=(127&(lt=_t[je.pos++]))<<3,lt<128)||(Je|=(127&(lt=_t[je.pos++]))<<10,lt<128)||(Je|=(127&(lt=_t[je.pos++]))<<17,lt<128)||(Je|=(127&(lt=_t[je.pos++]))<<24,lt<128)||(Je|=(1&(lt=_t[je.pos++]))<<31,lt<128))return wu(Te,Je,Ie);throw new Error("Expected varint not more than 10 bytes")}(R|=(15&(Z=le[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var M=this.readVarint()+this.pos,R=this.pos;return this.pos=M,M-R>=12&&Bp?function(Z,le,Te){return Bp.decode(Z.subarray(le,Te))}(this.buf,R,M):function(Z,le,Te){for(var Ie="",je=le;je<Te;){var Je,lt,_t,Tt=Z[je],zt=null,Gt=Tt>239?4:Tt>223?3:Tt>191?2:1;if(je+Gt>Te)break;Gt===1?Tt<128&&(zt=Tt):Gt===2?(192&(Je=Z[je+1]))==128&&(zt=(31&Tt)<<6|63&Je)<=127&&(zt=null):Gt===3?(Je=Z[je+1],lt=Z[je+2],(192&Je)==128&&(192&lt)==128&&((zt=(15&Tt)<<12|(63&Je)<<6|63&lt)<=2047||zt>=55296&&zt<=57343)&&(zt=null)):Gt===4&&(Je=Z[je+1],lt=Z[je+2],_t=Z[je+3],(192&Je)==128&&(192&lt)==128&&(192&_t)==128&&((zt=(15&Tt)<<18|(63&Je)<<12|(63&lt)<<6|63&_t)<=65535||zt>=1114112)&&(zt=null)),zt===null?(zt=65533,Gt=1):zt>65535&&(zt-=65536,Ie+=String.fromCharCode(zt>>>10&1023|55296),zt=56320|1023&zt),Ie+=String.fromCharCode(zt),je+=Gt}return Ie}(this.buf,R,M)},readBytes:function(){var M=this.readVarint()+this.pos,R=this.buf.subarray(this.pos,M);return this.pos=M,R},readPackedVarint:function(M,R){if(this.type!==Gi.Bytes)return M.push(this.readVarint(R));var Z=mc(this);for(M=M||[];this.pos<Z;)M.push(this.readVarint(R));return M},readPackedSVarint:function(M){if(this.type!==Gi.Bytes)return M.push(this.readSVarint());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Gi.Bytes)return M.push(this.readBoolean());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Gi.Bytes)return M.push(this.readFloat());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Gi.Bytes)return M.push(this.readDouble());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Gi.Bytes)return M.push(this.readFixed32());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Gi.Bytes)return M.push(this.readSFixed32());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Gi.Bytes)return M.push(this.readFixed64());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Gi.Bytes)return M.push(this.readSFixed64());var R=mc(this);for(M=M||[];this.pos<R;)M.push(this.readSFixed64());return M},skip:function(M){var R=7&M;if(R===Gi.Varint)for(;this.buf[this.pos++]>127;);else if(R===Gi.Bytes)this.pos=this.readVarint()+this.pos;else if(R===Gi.Fixed32)this.pos+=4;else{if(R!==Gi.Fixed64)throw new Error("Unimplemented type: "+R);this.pos+=8}},writeTag:function(M,R){this.writeVarint(M<<3|R)},realloc:function(M){for(var R=this.length||16;R<this.pos+M;)R*=2;if(R!==this.length){var Z=new Uint8Array(R);Z.set(this.buf),this.buf=Z,this.length=R}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Tu(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Tu(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Tu(this.buf,-1&M,this.pos),Tu(this.buf,Math.floor(M*Fp),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Tu(this.buf,-1&M,this.pos),Tu(this.buf,Math.floor(M*Fp),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(R,Z){var le,Te;if(R>=0?(le=R%4294967296|0,Te=R/4294967296|0):(Te=~(-R/4294967296),4294967295^(le=~(-R%4294967296))?le=le+1|0:(le=0,Te=Te+1|0)),R>=18446744073709552e3||R<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Ie,je,Je){Je.buf[Je.pos++]=127&Ie|128,Ie>>>=7,Je.buf[Je.pos++]=127&Ie|128,Ie>>>=7,Je.buf[Je.pos++]=127&Ie|128,Ie>>>=7,Je.buf[Je.pos++]=127&Ie|128,Ie>>>=7,Je.buf[Je.pos]=127&Ie}(le,0,Z),function(Ie,je){var Je=(7&Ie)<<4;je.buf[je.pos++]|=Je|((Ie>>>=3)?128:0),Ie&&(je.buf[je.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(je.buf[je.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(je.buf[je.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(je.buf[je.pos++]=127&Ie|((Ie>>>=7)?128:0),Ie&&(je.buf[je.pos++]=127&Ie)))))}(Te,Z)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(!!M)},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var R=this.pos;this.pos=function(le,Te,Ie){for(var je,Je,lt=0;lt<Te.length;lt++){if((je=Te.charCodeAt(lt))>55295&&je<57344){if(!Je){je>56319||lt+1===Te.length?(le[Ie++]=239,le[Ie++]=191,le[Ie++]=189):Je=je;continue}if(je<56320){le[Ie++]=239,le[Ie++]=191,le[Ie++]=189,Je=je;continue}je=Je-55296<<10|je-56320|65536,Je=null}else Je&&(le[Ie++]=239,le[Ie++]=191,le[Ie++]=189,Je=null);je<128?le[Ie++]=je:(je<2048?le[Ie++]=je>>6|192:(je<65536?le[Ie++]=je>>12|224:(le[Ie++]=je>>18|240,le[Ie++]=je>>12&63|128),le[Ie++]=je>>6&63|128),le[Ie++]=63&je|128)}return Ie}(this.buf,M,this.pos);var Z=this.pos-R;Z>=128&&Np(R,Z,this),this.pos=R-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(M){this.realloc(4),zp(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),zp(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var R=M.length;this.writeVarint(R),this.realloc(R);for(var Z=0;Z<R;Z++)this.buf[this.pos++]=M[Z]},writeRawMessage:function(M,R){this.pos++;var Z=this.pos;M(R,this);var le=this.pos-Z;le>=128&&Np(Z,le,this),this.pos=Z-1,this.writeVarint(le),this.pos+=le},writeMessage:function(M,R,Z){this.writeTag(M,Gi.Bytes),this.writeRawMessage(R,Z)},writePackedVarint:function(M,R){R.length&&this.writeMessage(M,P1,R)},writePackedSVarint:function(M,R){R.length&&this.writeMessage(M,D1,R)},writePackedBoolean:function(M,R){R.length&&this.writeMessage(M,z1,R)},writePackedFloat:function(M,R){R.length&&this.writeMessage(M,O1,R)},writePackedDouble:function(M,R){R.length&&this.writeMessage(M,R1,R)},writePackedFixed32:function(M,R){R.length&&this.writeMessage(M,F1,R)},writePackedSFixed32:function(M,R){R.length&&this.writeMessage(M,B1,R)},writePackedFixed64:function(M,R){R.length&&this.writeMessage(M,N1,R)},writePackedSFixed64:function(M,R){R.length&&this.writeMessage(M,j1,R)},writeBytesField:function(M,R){this.writeTag(M,Gi.Bytes),this.writeBytes(R)},writeFixed32Field:function(M,R){this.writeTag(M,Gi.Fixed32),this.writeFixed32(R)},writeSFixed32Field:function(M,R){this.writeTag(M,Gi.Fixed32),this.writeSFixed32(R)},writeFixed64Field:function(M,R){this.writeTag(M,Gi.Fixed64),this.writeFixed64(R)},writeSFixed64Field:function(M,R){this.writeTag(M,Gi.Fixed64),this.writeSFixed64(R)},writeVarintField:function(M,R){this.writeTag(M,Gi.Varint),this.writeVarint(R)},writeSVarintField:function(M,R){this.writeTag(M,Gi.Varint),this.writeSVarint(R)},writeStringField:function(M,R){this.writeTag(M,Gi.Bytes),this.writeString(R)},writeFloatField:function(M,R){this.writeTag(M,Gi.Fixed32),this.writeFloat(R)},writeDoubleField:function(M,R){this.writeTag(M,Gi.Fixed64),this.writeDouble(R)},writeBooleanField:function(M,R){this.writeVarintField(M,!!R)}};var bd=3;function U1(M,R,Z){M===1&&Z.readMessage(V1,R)}function V1(M,R,Z){if(M===3){var le=Z.readMessage(H1,{}),Te=le.id,Ie=le.bitmap,je=le.width,Je=le.height,lt=le.left,_t=le.top,Tt=le.advance;R.push({id:Te,bitmap:new tu({width:je+2*bd,height:Je+2*bd},Ie),metrics:{width:je,height:Je,left:lt,top:_t,advance:Tt}})}}function H1(M,R,Z){M===1?R.id=Z.readVarint():M===2?R.bitmap=Z.readBytes():M===3?R.width=Z.readVarint():M===4?R.height=Z.readVarint():M===5?R.left=Z.readSVarint():M===6?R.top=Z.readSVarint():M===7&&(R.advance=Z.readVarint())}var Up=bd;function Vp(M){for(var R=0,Z=0,le=0,Te=M;le<Te.length;le+=1){var Ie=Te[le];R+=Ie.w*Ie.h,Z=Math.max(Z,Ie.w)}M.sort(function(cn,kn){return kn.h-cn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(R/.95)),Z),h:1/0}],Je=0,lt=0,_t=0,Tt=M;_t<Tt.length;_t+=1)for(var zt=Tt[_t],Gt=je.length-1;Gt>=0;Gt--){var Ut=je[Gt];if(!(zt.w>Ut.w||zt.h>Ut.h)){if(zt.x=Ut.x,zt.y=Ut.y,lt=Math.max(lt,zt.y+zt.h),Je=Math.max(Je,zt.x+zt.w),zt.w===Ut.w&&zt.h===Ut.h){var on=je.pop();Gt<je.length&&(je[Gt]=on)}else zt.h===Ut.h?(Ut.x+=zt.w,Ut.w-=zt.w):zt.w===Ut.w?(Ut.y+=zt.h,Ut.h-=zt.h):(je.push({x:Ut.x+zt.w,y:Ut.y,w:Ut.w-zt.w,h:zt.h}),Ut.y+=zt.h,Ut.h-=zt.h);break}}return{w:Je,h:lt,fill:R/(Je*lt)||0}}var os=1,$f=function(M,R){var Z=R.pixelRatio,le=R.version,Te=R.stretchX,Ie=R.stretchY,je=R.content;this.paddedRect=M,this.pixelRatio=Z,this.stretchX=Te,this.stretchY=Ie,this.content=je,this.version=le},cf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};cf.tl.get=function(){return[this.paddedRect.x+os,this.paddedRect.y+os]},cf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-os,this.paddedRect.y+this.paddedRect.h-os]},cf.tlbr.get=function(){return this.tl.concat(this.br)},cf.displaySize.get=function(){return[(this.paddedRect.w-2*os)/this.pixelRatio,(this.paddedRect.h-2*os)/this.pixelRatio]},Object.defineProperties($f.prototype,cf);var uf=function(M,R){var Z={},le={};this.haveRenderCallbacks=[];var Te=[];this.addImages(M,Z,Te),this.addImages(R,le,Te);var Ie=Vp(Te),je=Ie.w,Je=Ie.h,lt=new qo({width:je||1,height:Je||1});for(var _t in M){var Tt=M[_t],zt=Z[_t].paddedRect;qo.copy(Tt.data,lt,{x:0,y:0},{x:zt.x+os,y:zt.y+os},Tt.data)}for(var Gt in R){var Ut=R[Gt],on=le[Gt].paddedRect,cn=on.x+os,kn=on.y+os,_n=Ut.data.width,Fn=Ut.data.height;qo.copy(Ut.data,lt,{x:0,y:0},{x:cn,y:kn},Ut.data),qo.copy(Ut.data,lt,{x:0,y:Fn-1},{x:cn,y:kn-1},{width:_n,height:1}),qo.copy(Ut.data,lt,{x:0,y:0},{x:cn,y:kn+Fn},{width:_n,height:1}),qo.copy(Ut.data,lt,{x:_n-1,y:0},{x:cn-1,y:kn},{width:1,height:Fn}),qo.copy(Ut.data,lt,{x:0,y:0},{x:cn+_n,y:kn},{width:1,height:Fn})}this.image=lt,this.iconPositions=Z,this.patternPositions=le};uf.prototype.addImages=function(M,R,Z){for(var le in M){var Te=M[le],Ie={x:0,y:0,w:Te.data.width+2*os,h:Te.data.height+2*os};Z.push(Ie),R[le]=new $f(Ie,Te),Te.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},uf.prototype.patchUpdatedImages=function(M,R){for(var Z in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],M.getImage(Z),R),this.patchUpdatedImage(this.patternPositions[Z],M.getImage(Z),R)},uf.prototype.patchUpdatedImage=function(M,R,Z){if(M&&R&&M.version!==R.version){M.version=R.version;var le=M.tl,Te=le[0],Ie=le[1];Z.update(R.data,void 0,{x:Te,y:Ie})}},Lr("ImagePosition",$f),Lr("ImageAtlas",uf);var Es={horizontal:1,vertical:2,horizontalOnly:3},ff=-17,ku=function(){this.scale=1,this.fontStack="",this.imageName=null};ku.forText=function(M,R){var Z=new ku;return Z.scale=M||1,Z.fontStack=R,Z},ku.forImage=function(M){var R=new ku;return R.imageName=M,R};var go=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Qf(M,R,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn){var kn,_n=go.fromFeature(M,Te);zt===Es.vertical&&_n.verticalizePunctuation();var Fn=Va.processBidirectionalText,Bn=Va.processStyledBidirectionalText;if(Fn&&_n.sections.length===1){kn=[];for(var Wn=0,$n=Fn(_n.toString(),_d(_n,_t,Ie,R,le,Ut,on));Wn<$n.length;Wn+=1){var lr=$n[Wn],Tr=new go;Tr.text=lr,Tr.sections=_n.sections;for(var vr=0;vr<lr.length;vr++)Tr.sectionIndex.push(0);kn.push(Tr)}}else if(Bn){kn=[];for(var Sr=0,Er=Bn(_n.text,_n.sectionIndex,_d(_n,_t,Ie,R,le,Ut,on));Sr<Er.length;Sr+=1){var Xr=Er[Sr],zr=new go;zr.text=Xr[0],zr.sectionIndex=Xr[1],zr.sections=_n.sections,kn.push(zr)}}else kn=function(Rr,ui){for(var Qr=[],Fi=Rr.text,Wr=0,Ii=0,qi=ui;Ii<qi.length;Ii+=1){var Ki=qi[Ii];Qr.push(Rr.substring(Wr,Ki)),Wr=Ki}return Wr<Fi.length&&Qr.push(Rr.substring(Wr,Fi.length)),Qr}(_n,_d(_n,_t,Ie,R,le,Ut,on));var Yr=[],jr={positionedLines:Yr,text:_n.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:zt,iconsInText:!1,verticalizable:!1};return function(Rr,ui,Qr,Fi,Wr,Ii,qi,Ki,Ji,Bi,Ia,aa){for(var Ga=0,ao=ff,Ja=0,Io=0,$a=Ki==="right"?1:Ki==="left"?0:.5,Ra=0,Qa=0,qa=Wr;Qa<qa.length;Qa+=1){var za=qa[Qa];za.trim();var ei=za.getMaxScale(),mi=(ei-1)*Ka,ga={positionedGlyphs:[],lineOffset:0};Rr.positionedLines[Ra]=ga;var Oi=ga.positionedGlyphs,la=0;if(za.length()){for(var ea=0;ea<za.length();ea++){var xi=za.getSection(ea),va=za.getSectionIndex(ea),Po=za.getCharCode(ea),ls=0,vo=null,Ol=null,yc=null,Wa=Ka,Rl=!(Ji===Es.horizontal||!Ia&&!ns(Po)||Ia&&(eh[Po]||As(Po)));if(xi.imageName){var cl=Fi[xi.imageName];if(!cl)continue;yc=xi.imageName,Rr.iconsInText=Rr.iconsInText||!0,Ol=cl.paddedRect;var ul=cl.displaySize;xi.scale=xi.scale*Ka/aa,vo={width:ul[0],height:ul[1],left:os,top:-Up,advance:Rl?ul[1]:ul[0]},ls=mi+(Ka-ul[1]*xi.scale),Wa=vo.advance;var au=Rl?ul[0]*xi.scale-Ka*ei:ul[1]*xi.scale-Ka*ei;au>0&&au>la&&(la=au)}else{var ch=Qr[xi.fontStack],ou=ch&&ch[Po];if(ou&&ou.rect)Ol=ou.rect,vo=ou.metrics;else{var uh=ui[xi.fontStack],mf=uh&&uh[Po];if(!mf)continue;vo=mf.metrics}ls=(ei-xi.scale)*Ka}Rl?(Rr.verticalizable=!0,Oi.push({glyph:Po,imageName:yc,x:Ga,y:ao+ls,vertical:Rl,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:va,metrics:vo,rect:Ol}),Ga+=Wa*xi.scale+Bi):(Oi.push({glyph:Po,imageName:yc,x:Ga,y:ao+ls,vertical:Rl,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:va,metrics:vo,rect:Ol}),Ga+=vo.advance*xi.scale+Bi)}if(Oi.length!==0){var Id=Ga-Bi;Ja=Math.max(Id,Ja),q1(Oi,0,Oi.length-1,$a,la)}Ga=0;var fh=Ii*ei+la;ga.lineOffset=Math.max(la,mi),ao+=fh,Io=Math.max(fh,Io),++Ra}else ao+=Ii,++Ra}var Ou=ao-ff,hh=wd(qi),dh=hh.horizontalAlign,gf=hh.verticalAlign;(function(Pd,vf,su,Ru,ph,mh,zu,gh,vh){var yf=(vf-su)*ph,xf=0;xf=mh!==zu?-gh*Ru-ff:(-Ru*vh+.5)*zu;for(var lu=0,bf=Pd;lu<bf.length;lu+=1)for(var cu=0,_f=bf[lu].positionedGlyphs;cu<_f.length;cu+=1){var wf=_f[cu];wf.x+=yf,wf.y+=xf}})(Rr.positionedLines,$a,dh,gf,Ja,Io,Ii,Ou,Wr.length),Rr.top+=-gf*Ou,Rr.bottom=Rr.top+Ou,Rr.left+=-dh*Ja,Rr.right=Rr.left+Ja}(jr,R,Z,le,kn,je,Je,lt,zt,_t,Gt,cn),!function(Rr){for(var ui=0,Qr=Rr;ui<Qr.length;ui+=1)if(Qr[ui].positionedGlyphs.length!==0)return!1;return!0}(Yr)&&jr}go.fromFeature=function(M,R){for(var Z=new go,le=0;le<M.sections.length;le++){var Te=M.sections[le];Te.image?Z.addImageSection(Te):Z.addTextSection(Te,R)}return Z},go.prototype.length=function(){return this.text.length},go.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},go.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},go.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},go.prototype.verticalizePunctuation=function(){this.text=function(M){for(var R="",Z=0;Z<M.length;Z++){var le=M.charCodeAt(Z+1)||null,Te=M.charCodeAt(Z-1)||null;le&&pa(le)&&!lf[M[Z+1]]||Te&&pa(Te)&&!lf[M[Z-1]]||!lf[M[Z]]?R+=M[Z]:R+=lf[M[Z]]}return R}(this.text)},go.prototype.trim=function(){for(var M=0,R=0;R<this.text.length&&eh[this.text.charCodeAt(R)];R++)M++;for(var Z=this.text.length,le=this.text.length-1;le>=0&&le>=M&&eh[this.text.charCodeAt(le)];le--)Z--;this.text=this.text.substring(M,Z),this.sectionIndex=this.sectionIndex.slice(M,Z)},go.prototype.substring=function(M,R){var Z=new go;return Z.text=this.text.substring(M,R),Z.sectionIndex=this.sectionIndex.slice(M,R),Z.sections=this.sections,Z},go.prototype.toString=function(){return this.text},go.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(R,Z){return Math.max(R,M.sections[Z].scale)},0)},go.prototype.addTextSection=function(M,R){this.text+=M.text,this.sections.push(ku.forText(M.scale,M.fontStack||R));for(var Z=this.sections.length-1,le=0;le<M.text.length;++le)this.sectionIndex.push(Z)},go.prototype.addImageSection=function(M){var R=M.image?M.image.name:"";if(R.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(ku.forImage(R)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},go.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var eh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ss={};function Hp(M,R,Z,le,Te,Ie){if(R.imageName){var je=le[R.imageName];return je?je.displaySize[0]*R.scale*Ka/Ie+Te:0}var Je=Z[R.fontStack],lt=Je&&Je[M];return lt?lt.metrics.advance*R.scale+Te:0}function Gp(M,R,Z,le){var Te=Math.pow(M-R,2);return le?M<R?Te/2:2*Te:Te+Math.abs(Z)*Z}function G1(M,R,Z){var le=0;return M===10&&(le-=1e4),Z&&(le+=150),M!==40&&M!==65288||(le+=50),R!==41&&R!==65289||(le+=50),le}function qp(M,R,Z,le,Te,Ie){for(var je=null,Je=Gp(R,Z,Te,Ie),lt=0,_t=le;lt<_t.length;lt+=1){var Tt=_t[lt],zt=Gp(R-Tt.x,Z,Te,Ie)+Tt.badness;zt<=Je&&(je=Tt,Je=zt)}return{index:M,x:R,priorBreak:je,badness:Je}}function Wp(M){return M?Wp(M.priorBreak).concat(M.index):[]}function _d(M,R,Z,le,Te,Ie,je){if(Ie!=="point")return[];if(!M)return[];for(var Je=[],lt=function(kn,_n,Fn,Bn,Wn,$n){for(var lr=0,Tr=0;Tr<kn.length();Tr++){var vr=kn.getSection(Tr);lr+=Hp(kn.getCharCode(Tr),vr,Bn,Wn,_n,$n)}return lr/Math.max(1,Math.ceil(lr/Fn))}(M,R,Z,le,Te,je),_t=M.text.indexOf("\u200B")>=0,Tt=0,zt=0;zt<M.length();zt++){var Gt=M.getSection(zt),Ut=M.getCharCode(zt);if(eh[Ut]||(Tt+=Hp(Ut,Gt,le,Te,R,je)),zt<M.length()-1){var on=!((cn=Ut)<11904||!(kr["Bopomofo Extended"](cn)||kr.Bopomofo(cn)||kr["CJK Compatibility Forms"](cn)||kr["CJK Compatibility Ideographs"](cn)||kr["CJK Compatibility"](cn)||kr["CJK Radicals Supplement"](cn)||kr["CJK Strokes"](cn)||kr["CJK Symbols and Punctuation"](cn)||kr["CJK Unified Ideographs Extension A"](cn)||kr["CJK Unified Ideographs"](cn)||kr["Enclosed CJK Letters and Months"](cn)||kr["Halfwidth and Fullwidth Forms"](cn)||kr.Hiragana(cn)||kr["Ideographic Description Characters"](cn)||kr["Kangxi Radicals"](cn)||kr["Katakana Phonetic Extensions"](cn)||kr.Katakana(cn)||kr["Vertical Forms"](cn)||kr["Yi Radicals"](cn)||kr["Yi Syllables"](cn)));(ss[Ut]||on||Gt.imageName)&&Je.push(qp(zt+1,Tt,lt,Je,G1(Ut,M.getCharCode(zt+1),on&&_t),!1))}}var cn;return Wp(qp(M.length(),Tt,lt,Je,0,!0))}function wd(M){var R=.5,Z=.5;switch(M){case"right":case"top-right":case"bottom-right":R=1;break;case"left":case"top-left":case"bottom-left":R=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:R,verticalAlign:Z}}function q1(M,R,Z,le,Te){if(le||Te)for(var Ie=M[Z],je=Ie.metrics.advance*Ie.scale,Je=(M[Z].x+je)*le,lt=R;lt<=Z;lt++)M[lt].x-=Je,M[lt].y+=Te}function Yp(M,R,Z,le,Te,Ie){var je,Je=M.image;if(Je.content){var lt=Je.content,_t=Je.pixelRatio||1;je=[lt[0]/_t,lt[1]/_t,Je.displaySize[0]-lt[2]/_t,Je.displaySize[1]-lt[3]/_t]}var Tt,zt,Gt,Ut,on=R.left*Ie,cn=R.right*Ie;Z==="width"||Z==="both"?(Ut=Te[0]+on-le[3],zt=Te[0]+cn+le[1]):zt=(Ut=Te[0]+(on+cn-Je.displaySize[0])/2)+Je.displaySize[0];var kn=R.top*Ie,_n=R.bottom*Ie;return Z==="height"||Z==="both"?(Tt=Te[1]+kn-le[0],Gt=Te[1]+_n+le[2]):Gt=(Tt=Te[1]+(kn+_n-Je.displaySize[1])/2)+Je.displaySize[1],{image:Je,top:Tt,right:zt,bottom:Gt,left:Ut,collisionPadding:je}}ss[10]=!0,ss[32]=!0,ss[38]=!0,ss[40]=!0,ss[41]=!0,ss[43]=!0,ss[45]=!0,ss[47]=!0,ss[173]=!0,ss[183]=!0,ss[8203]=!0,ss[8208]=!0,ss[8211]=!0,ss[8231]=!0;var Au=function(M){function R(Z,le,Te,Ie){M.call(this,Z,le),this.angle=Te,Ie!==void 0&&(this.segment=Ie)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.clone=function(){return new R(this.x,this.y,this.angle,this.segment)},R}(t);Lr("Anchor",Au);var Dl=128;function Td(M,R){var Z=R.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new ai(M+1))};if(Z.kind==="source")return{kind:"source"};for(var le=Z.zoomStops,Te=Z.interpolationType,Ie=0;Ie<le.length&&le[Ie]<=M;)Ie++;for(var je=Ie=Math.max(0,Ie-1);je<le.length&&le[je]<M+1;)je++;je=Math.min(le.length-1,je);var Je=le[Ie],lt=le[je];return Z.kind==="composite"?{kind:"composite",minZoom:Je,maxZoom:lt,interpolationType:Te}:{kind:"camera",minZoom:Je,maxZoom:lt,minSize:Z.evaluate(new ai(Je)),maxSize:Z.evaluate(new ai(lt)),interpolationType:Te}}function Xp(M,R,Z){var le=R.uSize,Te=R.uSizeT,Ie=Z.lowerSize,je=Z.upperSize;return M.kind==="source"?Ie/Dl:M.kind==="composite"?Hr(Ie/Dl,je/Dl,Te):le}function Zp(M,R){var Z=0,le=0;if(M.kind==="constant")le=M.layoutSize;else if(M.kind!=="source"){var Te=M.interpolationType,Ie=M.minZoom,je=M.maxZoom,Je=Te?c(ha.interpolationFactor(Te,R,Ie,je),0,1):0;M.kind==="camera"?le=Hr(M.minSize,M.maxSize,Je):Z=Je}return{uSizeT:Z,uSize:le}}var W1=Object.freeze({__proto__:null,getSizeData:Td,evaluateSizeForFeature:Xp,evaluateSizeForZoom:Zp,SIZE_PACK_FACTOR:Dl});function Kp(M,R,Z,le,Te){if(R.segment===void 0)return!0;for(var Ie=R,je=R.segment+1,Je=0;Je>-Z/2;){if(--je<0)return!1;Je-=M[je].dist(Ie),Ie=M[je]}Je+=M[je].dist(M[je+1]),je++;for(var lt=[],_t=0;Je<Z/2;){var Tt=M[je-1],zt=M[je],Gt=M[je+1];if(!Gt)return!1;var Ut=Tt.angleTo(zt)-zt.angleTo(Gt);for(Ut=Math.abs((Ut+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Je,angleDelta:Ut}),_t+=Ut;Je-lt[0].distance>le;)_t-=lt.shift().angleDelta;if(_t>Te)return!1;je++,Je+=zt.dist(Gt)}return!0}function Jp(M){for(var R=0,Z=0;Z<M.length-1;Z++)R+=M[Z].dist(M[Z+1]);return R}function $p(M,R,Z){return M?.6*R*Z:0}function Qp(M,R){return Math.max(M?M.right-M.left:0,R?R.right-R.left:0)}function Y1(M,R,Z,le,Te,Ie){for(var je=$p(Z,Te,Ie),Je=Qp(Z,le)*Ie,lt=0,_t=Jp(M)/2,Tt=0;Tt<M.length-1;Tt++){var zt=M[Tt],Gt=M[Tt+1],Ut=zt.dist(Gt);if(lt+Ut>_t){var on=(_t-lt)/Ut,cn=Hr(zt.x,Gt.x,on),kn=Hr(zt.y,Gt.y,on),_n=new Au(cn,kn,Gt.angleTo(zt),Tt);return _n._round(),!je||Kp(M,_n,Je,je,R)?_n:void 0}lt+=Ut}}function X1(M,R,Z,le,Te,Ie,je,Je,lt){var _t=$p(le,Ie,je),Tt=Qp(le,Te),zt=Tt*je,Gt=M[0].x===0||M[0].x===lt||M[0].y===0||M[0].y===lt;return R-zt<R/4&&(R=zt+R/4),e0(M,Gt?R/2*Je%R:(Tt/2+2*Ie)*je*Je%R,R,_t,Z,zt,Gt,!1,lt)}function e0(M,R,Z,le,Te,Ie,je,Je,lt){for(var _t=Ie/2,Tt=Jp(M),zt=0,Gt=R-Z,Ut=[],on=0;on<M.length-1;on++){for(var cn=M[on],kn=M[on+1],_n=cn.dist(kn),Fn=kn.angleTo(cn);Gt+Z<zt+_n;){var Bn=((Gt+=Z)-zt)/_n,Wn=Hr(cn.x,kn.x,Bn),$n=Hr(cn.y,kn.y,Bn);if(Wn>=0&&Wn<lt&&$n>=0&&$n<lt&&Gt-_t>=0&&Gt+_t<=Tt){var lr=new Au(Wn,$n,Fn,on);lr._round(),le&&!Kp(M,lr,Ie,le,Te)||Ut.push(lr)}}zt+=_n}return Je||Ut.length||je||(Ut=e0(M,zt/2,Z,le,Te,Ie,je,!0,lt)),Ut}function t0(M,R,Z,le,Te){for(var Ie=[],je=0;je<M.length;je++)for(var Je=M[je],lt=void 0,_t=0;_t<Je.length-1;_t++){var Tt=Je[_t],zt=Je[_t+1];Tt.x<R&&zt.x<R||(Tt.x<R?Tt=new t(R,Tt.y+(zt.y-Tt.y)*((R-Tt.x)/(zt.x-Tt.x)))._round():zt.x<R&&(zt=new t(R,Tt.y+(zt.y-Tt.y)*((R-Tt.x)/(zt.x-Tt.x)))._round()),Tt.y<Z&&zt.y<Z||(Tt.y<Z?Tt=new t(Tt.x+(zt.x-Tt.x)*((Z-Tt.y)/(zt.y-Tt.y)),Z)._round():zt.y<Z&&(zt=new t(Tt.x+(zt.x-Tt.x)*((Z-Tt.y)/(zt.y-Tt.y)),Z)._round()),Tt.x>=le&&zt.x>=le||(Tt.x>=le?Tt=new t(le,Tt.y+(zt.y-Tt.y)*((le-Tt.x)/(zt.x-Tt.x)))._round():zt.x>=le&&(zt=new t(le,Tt.y+(zt.y-Tt.y)*((le-Tt.x)/(zt.x-Tt.x)))._round()),Tt.y>=Te&&zt.y>=Te||(Tt.y>=Te?Tt=new t(Tt.x+(zt.x-Tt.x)*((Te-Tt.y)/(zt.y-Tt.y)),Te)._round():zt.y>=Te&&(zt=new t(Tt.x+(zt.x-Tt.x)*((Te-Tt.y)/(zt.y-Tt.y)),Te)._round()),lt&&Tt.equals(lt[lt.length-1])||(lt=[Tt],Ie.push(lt)),lt.push(zt)))))}return Ie}var Mu=os;function n0(M,R,Z,le){var Te=[],Ie=M.image,je=Ie.pixelRatio,Je=Ie.paddedRect.w-2*Mu,lt=Ie.paddedRect.h-2*Mu,_t=M.right-M.left,Tt=M.bottom-M.top,zt=Ie.stretchX||[[0,Je]],Gt=Ie.stretchY||[[0,lt]],Ut=function(Ii,qi){return Ii+qi[1]-qi[0]},on=zt.reduce(Ut,0),cn=Gt.reduce(Ut,0),kn=Je-on,_n=lt-cn,Fn=0,Bn=on,Wn=0,$n=cn,lr=0,Tr=kn,vr=0,Sr=_n;if(Ie.content&&le){var Er=Ie.content;Fn=th(zt,0,Er[0]),Wn=th(Gt,0,Er[1]),Bn=th(zt,Er[0],Er[2]),$n=th(Gt,Er[1],Er[3]),lr=Er[0]-Fn,vr=Er[1]-Wn,Tr=Er[2]-Er[0]-Bn,Sr=Er[3]-Er[1]-$n}var Xr=function(Ii,qi,Ki,Ji){var Bi=nh(Ii.stretch-Fn,Bn,_t,M.left),Ia=rh(Ii.fixed-lr,Tr,Ii.stretch,on),aa=nh(qi.stretch-Wn,$n,Tt,M.top),Ga=rh(qi.fixed-vr,Sr,qi.stretch,cn),ao=nh(Ki.stretch-Fn,Bn,_t,M.left),Ja=rh(Ki.fixed-lr,Tr,Ki.stretch,on),Io=nh(Ji.stretch-Wn,$n,Tt,M.top),$a=rh(Ji.fixed-vr,Sr,Ji.stretch,cn),Ra=new t(Bi,aa),Qa=new t(ao,aa),qa=new t(ao,Io),za=new t(Bi,Io),ei=new t(Ia/je,Ga/je),mi=new t(Ja/je,$a/je),ga=R*Math.PI/180;if(ga){var Oi=Math.sin(ga),la=Math.cos(ga),ea=[la,-Oi,Oi,la];Ra._matMult(ea),Qa._matMult(ea),za._matMult(ea),qa._matMult(ea)}var xi=Ii.stretch+Ii.fixed,va=Ki.stretch+Ki.fixed,Po=qi.stretch+qi.fixed,ls=Ji.stretch+Ji.fixed;return{tl:Ra,tr:Qa,bl:za,br:qa,tex:{x:Ie.paddedRect.x+Mu+xi,y:Ie.paddedRect.y+Mu+Po,w:va-xi,h:ls-Po},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ei,pixelOffsetBR:mi,minFontScaleX:Tr/je/_t,minFontScaleY:Sr/je/Tt,isSDF:Z}};if(le&&(Ie.stretchX||Ie.stretchY))for(var zr=r0(zt,kn,on),Yr=r0(Gt,_n,cn),jr=0;jr<zr.length-1;jr++)for(var Rr=zr[jr],ui=zr[jr+1],Qr=0;Qr<Yr.length-1;Qr++){var Fi=Yr[Qr],Wr=Yr[Qr+1];Te.push(Xr(Rr,Fi,ui,Wr))}else Te.push(Xr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Je+1},{fixed:0,stretch:lt+1}));return Te}function th(M,R,Z){for(var le=0,Te=0,Ie=M;Te<Ie.length;Te+=1){var je=Ie[Te];le+=Math.max(R,Math.min(Z,je[1]))-Math.max(R,Math.min(Z,je[0]))}return le}function r0(M,R,Z){for(var le=[{fixed:-Mu,stretch:0}],Te=0,Ie=M;Te<Ie.length;Te+=1){var je=Ie[Te],Je=je[0],lt=je[1],_t=le[le.length-1];le.push({fixed:Je-_t.stretch,stretch:_t.stretch}),le.push({fixed:Je-_t.stretch,stretch:_t.stretch+(lt-Je)})}return le.push({fixed:R+Mu,stretch:Z}),le}function nh(M,R,Z,le){return M/R*Z+le}function rh(M,R,Z,le){return M-R*Z/le}var ih=function(M,R,Z,le,Te,Ie,je,Je,lt,_t){if(this.boxStartIndex=M.length,lt){var Tt=Ie.top,zt=Ie.bottom,Gt=Ie.collisionPadding;Gt&&(Tt-=Gt[1],zt+=Gt[3]);var Ut=zt-Tt;Ut>0&&(Ut=Math.max(10,Ut),this.circleDiameter=Ut)}else{var on=Ie.top*je-Je,cn=Ie.bottom*je+Je,kn=Ie.left*je-Je,_n=Ie.right*je+Je,Fn=Ie.collisionPadding;if(Fn&&(kn-=Fn[0]*je,on-=Fn[1]*je,_n+=Fn[2]*je,cn+=Fn[3]*je),_t){var Bn=new t(kn,on),Wn=new t(_n,on),$n=new t(kn,cn),lr=new t(_n,cn),Tr=_t*Math.PI/180;Bn._rotate(Tr),Wn._rotate(Tr),$n._rotate(Tr),lr._rotate(Tr),kn=Math.min(Bn.x,Wn.x,$n.x,lr.x),_n=Math.max(Bn.x,Wn.x,$n.x,lr.x),on=Math.min(Bn.y,Wn.y,$n.y,lr.y),cn=Math.max(Bn.y,Wn.y,$n.y,lr.y)}M.emplaceBack(R.x,R.y,kn,on,_n,cn,Z,le,Te)}this.boxEndIndex=M.length},Su=function(M,R){if(M===void 0&&(M=[]),R===void 0&&(R=Z1),this.data=M,this.length=this.data.length,this.compare=R,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function Z1(M,R){return M<R?-1:M>R?1:0}function K1(M,R,Z){R===void 0&&(R=1),Z===void 0&&(Z=!1);for(var le=1/0,Te=1/0,Ie=-1/0,je=-1/0,Je=M[0],lt=0;lt<Je.length;lt++){var _t=Je[lt];(!lt||_t.x<le)&&(le=_t.x),(!lt||_t.y<Te)&&(Te=_t.y),(!lt||_t.x>Ie)&&(Ie=_t.x),(!lt||_t.y>je)&&(je=_t.y)}var Tt=Ie-le,zt=je-Te,Gt=Math.min(Tt,zt),Ut=Gt/2,on=new Su([],J1);if(Gt===0)return new t(le,Te);for(var cn=le;cn<Ie;cn+=Gt)for(var kn=Te;kn<je;kn+=Gt)on.push(new Cu(cn+Ut,kn+Ut,Ut,M));for(var _n=function(Wn){for(var $n=0,lr=0,Tr=0,vr=Wn[0],Sr=0,Er=vr.length,Xr=Er-1;Sr<Er;Xr=Sr++){var zr=vr[Sr],Yr=vr[Xr],jr=zr.x*Yr.y-Yr.x*zr.y;lr+=(zr.x+Yr.x)*jr,Tr+=(zr.y+Yr.y)*jr,$n+=3*jr}return new Cu(lr/$n,Tr/$n,0,Wn)}(M),Fn=on.length;on.length;){var Bn=on.pop();(Bn.d>_n.d||!_n.d)&&(_n=Bn,Z&&console.log("found best %d after %d probes",Math.round(1e4*Bn.d)/1e4,Fn)),Bn.max-_n.d<=R||(Ut=Bn.h/2,on.push(new Cu(Bn.p.x-Ut,Bn.p.y-Ut,Ut,M)),on.push(new Cu(Bn.p.x+Ut,Bn.p.y-Ut,Ut,M)),on.push(new Cu(Bn.p.x-Ut,Bn.p.y+Ut,Ut,M)),on.push(new Cu(Bn.p.x+Ut,Bn.p.y+Ut,Ut,M)),Fn+=4)}return Z&&(console.log("num probes: "+Fn),console.log("best distance: "+_n.d)),_n.p}function J1(M,R){return R.max-M.max}function Cu(M,R,Z,le){this.p=new t(M,R),this.h=Z,this.d=function(Te,Ie){for(var je=!1,Je=1/0,lt=0;lt<Ie.length;lt++)for(var _t=Ie[lt],Tt=0,zt=_t.length,Gt=zt-1;Tt<zt;Gt=Tt++){var Ut=_t[Tt],on=_t[Gt];Ut.y>Te.y!=on.y>Te.y&&Te.x<(on.x-Ut.x)*(Te.y-Ut.y)/(on.y-Ut.y)+Ut.x&&(je=!je),Je=Math.min(Je,jf(Te,Ut,on))}return(je?1:-1)*Math.sqrt(Je)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}Su.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Su.prototype.pop=function(){if(this.length!==0){var M=this.data[0],R=this.data.pop();return this.length--,this.length>0&&(this.data[0]=R,this._down(0)),M}},Su.prototype.peek=function(){return this.data[0]},Su.prototype._up=function(M){for(var R=this.data,Z=this.compare,le=R[M];M>0;){var Te=M-1>>1,Ie=R[Te];if(Z(le,Ie)>=0)break;R[M]=Ie,M=Te}R[M]=le},Su.prototype._down=function(M){for(var R=this.data,Z=this.compare,le=this.length>>1,Te=R[M];M<le;){var Ie=1+(M<<1),je=R[Ie],Je=Ie+1;if(Je<this.length&&Z(R[Je],je)<0&&(Ie=Je,je=R[Je]),Z(je,Te)>=0)break;R[M]=je,M=Ie}R[M]=Te};var Eu=7,kd=Number.POSITIVE_INFINITY;function i0(M,R){return R[1]!==kd?function(Z,le,Te){var Ie=0,je=0;switch(le=Math.abs(le),Te=Math.abs(Te),Z){case"top-right":case"top-left":case"top":je=Te-Eu;break;case"bottom-right":case"bottom-left":case"bottom":je=-Te+Eu}switch(Z){case"top-right":case"bottom-right":case"right":Ie=-le;break;case"top-left":case"bottom-left":case"left":Ie=le}return[Ie,je]}(M,R[0],R[1]):function(Z,le){var Te=0,Ie=0;le<0&&(le=0);var je=le/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Ie=je-Eu;break;case"bottom-right":case"bottom-left":Ie=-je+Eu;break;case"bottom":Ie=-le+Eu;break;case"top":Ie=le-Eu}switch(Z){case"top-right":case"bottom-right":Te=-je;break;case"top-left":case"bottom-left":Te=je;break;case"left":Te=le;break;case"right":Te=-le}return[Te,Ie]}(M,R[0])}function Ad(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var hf=255,Dc=hf*Dl;function a0(M,R,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on){var cn=function(Wn,$n,lr,Tr,vr,Sr,Er,Xr){for(var zr=Tr.layout.get("text-rotate").evaluate(Sr,{})*Math.PI/180,Yr=[],jr=0,Rr=$n.positionedLines;jr<Rr.length;jr+=1)for(var ui=Rr[jr],Qr=0,Fi=ui.positionedGlyphs;Qr<Fi.length;Qr+=1){var Wr=Fi[Qr];if(Wr.rect){var Ii=Wr.rect||{},qi=Up+1,Ki=!0,Ji=1,Bi=0,Ia=(vr||Xr)&&Wr.vertical,aa=Wr.metrics.advance*Wr.scale/2;if(Xr&&$n.verticalizable){var Ga=(Wr.scale-1)*Ka,ao=(Ka-Wr.metrics.width*Wr.scale)/2;Bi=ui.lineOffset/2-(Wr.imageName?-ao:Ga)}if(Wr.imageName){var Ja=Er[Wr.imageName];Ki=Ja.sdf,Ji=Ja.pixelRatio,qi=os/Ji}var Io=vr?[Wr.x+aa,Wr.y]:[0,0],$a=vr?[0,0]:[Wr.x+aa+lr[0],Wr.y+lr[1]-Bi],Ra=[0,0];Ia&&(Ra=$a,$a=[0,0]);var Qa=(Wr.metrics.left-qi)*Wr.scale-aa+$a[0],qa=(-Wr.metrics.top-qi)*Wr.scale+$a[1],za=Qa+Ii.w*Wr.scale/Ji,ei=qa+Ii.h*Wr.scale/Ji,mi=new t(Qa,qa),ga=new t(za,qa),Oi=new t(Qa,ei),la=new t(za,ei);if(Ia){var ea=new t(-aa,aa-ff),xi=-Math.PI/2,va=Ka/2-aa,Po=Wr.imageName?va:0,ls=new t(5-ff-va,-Po),vo=new(Function.prototype.bind.apply(t,[null].concat(Ra)));mi._rotateAround(xi,ea)._add(ls)._add(vo),ga._rotateAround(xi,ea)._add(ls)._add(vo),Oi._rotateAround(xi,ea)._add(ls)._add(vo),la._rotateAround(xi,ea)._add(ls)._add(vo)}if(zr){var Ol=Math.sin(zr),yc=Math.cos(zr),Wa=[yc,-Ol,Ol,yc];mi._matMult(Wa),ga._matMult(Wa),Oi._matMult(Wa),la._matMult(Wa)}var Rl=new t(0,0),cl=new t(0,0);Yr.push({tl:mi,tr:ga,bl:Oi,br:la,tex:Ii,writingMode:$n.writingMode,glyphOffset:Io,sectionIndex:Wr.sectionIndex,isSDF:Ki,pixelOffsetTL:Rl,pixelOffsetBR:cl,minFontScaleX:0,minFontScaleY:0})}}return Yr}(0,Z,Je,Te,Ie,je,le,M.allowVerticalPlacement),kn=M.textSizeData,_n=null;kn.kind==="source"?(_n=[Dl*Te.layout.get("text-size").evaluate(je,{})])[0]>Dc&&E(M.layerIds[0]+': Value for "text-size" is >= '+hf+'. Reduce your "text-size".'):kn.kind==="composite"&&((_n=[Dl*Ut.compositeTextSizes[0].evaluate(je,{},on),Dl*Ut.compositeTextSizes[1].evaluate(je,{},on)])[0]>Dc||_n[1]>Dc)&&E(M.layerIds[0]+': Value for "text-size" is >= '+hf+'. Reduce your "text-size".'),M.addSymbols(M.text,cn,_n,Je,Ie,je,_t,R,lt.lineStartIndex,lt.lineLength,Gt,on);for(var Fn=0,Bn=Tt;Fn<Bn.length;Fn+=1)zt[Bn[Fn]]=M.text.placedSymbolArray.length-1;return 4*cn.length}function o0(M){for(var R in M)return M[R];return null}function $1(M,R,Z,le){var Te=M.compareText;if(R in Te){for(var Ie=Te[R],je=Ie.length-1;je>=0;je--)if(le.dist(Ie[je])<Z)return!0}else Te[R]=[];return Te[R].push(le),!1}var Q1=_u.VectorTileFeature.types,ev=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ah(M,R,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt){var Ut=Je?Math.min(Dc,Math.round(Je[0])):0,on=Je?Math.min(Dc,Math.round(Je[1])):0;M.emplaceBack(R,Z,Math.round(32*le),Math.round(32*Te),Ie,je,(Ut<<1)+(lt?1:0),on,16*_t,16*Tt,256*zt,256*Gt)}function Md(M,R,Z){M.emplaceBack(R.x,R.y,Z),M.emplaceBack(R.x,R.y,Z),M.emplaceBack(R.x,R.y,Z),M.emplaceBack(R.x,R.y,Z)}function tv(M){for(var R=0,Z=M.sections;R<Z.length;R+=1)if(Da(Z[R].text))return!0;return!1}var Lu=function(M){this.layoutVertexArray=new W,this.indexArray=new xe,this.programConfigurations=M,this.segments=new Hn,this.dynamicLayoutVertexArray=new G,this.opacityVertexArray=new L,this.placedSymbolArray=new It};Lu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Lu.prototype.upload=function(M,R,Z,le){this.isEmpty()||(Z&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,S1.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,R),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,C1.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,ev,!0),this.opacityVertexBuffer.itemSize=1),(Z||le)&&this.programConfigurations.upload(M))},Lu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Lr("SymbolBuffers",Lu);var df=function(M,R,Z){this.layoutVertexArray=new M,this.layoutAttributes=R,this.indexArray=new Z,this.segments=new Hn,this.collisionVertexArray=new ce};df.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,E1.members,!0)},df.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Lr("CollisionBuffers",df);var Li=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ld([]),this.placementViewportMatrix=ld([]);var R=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Td(this.zoom,R["text-size"]),this.iconSizeData=Td(this.zoom,R["icon-size"]);var Z=this.layers[0].layout,le=Z.get("symbol-sort-key"),Te=Z.get("symbol-z-order");this.canOverlap=Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement"),this.sortFeaturesByKey=Te!=="viewport-y"&&le.constantOr(1)!==void 0;var Ie=Te==="viewport-y"||Te==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ie&&this.canOverlap,Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(je){return Es[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=M.sourceID};Li.prototype.createArrays=function(){this.text=new Lu(new sa(this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Lu(new sa(this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Vt,this.lineVertexArray=new pn,this.symbolInstances=new qt},Li.prototype.calculateGlyphDependencies=function(M,R,Z,le,Te){for(var Ie=0;Ie<M.length;Ie++)if(R[M.charCodeAt(Ie)]=!0,(Z||le)&&Te){var je=lf[M.charAt(Ie)];je&&(R[je.charCodeAt(0)]=!0)}},Li.prototype.populate=function(M,R,Z){var le=this.layers[0],Te=le.layout,Ie=Te.get("text-font"),je=Te.get("text-field"),Je=Te.get("icon-image"),lt=(je.value.kind!=="constant"||je.value.value instanceof Rn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Ie.value.kind!=="constant"||Ie.value.value.length>0),_t=Je.value.kind!=="constant"||!!Je.value.value||Object.keys(Je.parameters).length>0,Tt=Te.get("symbol-sort-key");if(this.features=[],lt||_t){for(var zt=R.iconDependencies,Gt=R.glyphDependencies,Ut=R.availableImages,on=new ai(this.zoom),cn=0,kn=M;cn<kn.length;cn+=1){var _n=kn[cn],Fn=_n.feature,Bn=_n.id,Wn=_n.index,$n=_n.sourceLayerIndex,lr=le._featureFilter.needGeometry,Tr=Hi(Fn,lr);if(le._featureFilter.filter(on,Tr,Z)){lr||(Tr.geometry=as(Fn));var vr=void 0;if(lt){var Sr=le.getValueAndResolveTokens("text-field",Tr,Z,Ut),Er=Rn.factory(Sr);tv(Er)&&(this.hasRTLText=!0),(!this.hasRTLText||rl()==="unavailable"||this.hasRTLText&&Va.isParsed())&&(vr=I1(Er,le,Tr))}var Xr=void 0;if(_t){var zr=le.getValueAndResolveTokens("icon-image",Tr,Z,Ut);Xr=zr instanceof Qn?zr:Qn.fromString(zr)}if(vr||Xr){var Yr=this.sortFeaturesByKey?Tt.evaluate(Tr,{},Z):void 0,jr={id:Bn,text:vr,icon:Xr,index:Wn,sourceLayerIndex:$n,geometry:Tr.geometry,properties:Fn.properties,type:Q1[Fn.type],sortKey:Yr};if(this.features.push(jr),Xr&&(zt[Xr.name]=!0),vr){var Rr=Ie.evaluate(Tr,{},Z).join(","),ui=Te.get("text-rotation-alignment")==="map"&&Te.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Es.vertical)>=0;for(var Qr=0,Fi=vr.sections;Qr<Fi.length;Qr+=1){var Wr=Fi[Qr];if(Wr.image)zt[Wr.image.name]=!0;else{var Ii=Cl(vr.toString()),qi=Wr.fontStack||Rr,Ki=Gt[qi]=Gt[qi]||{};this.calculateGlyphDependencies(Wr.text,Ki,ui,this.allowVerticalPlacement,Ii)}}}}}}Te.get("symbol-placement")==="line"&&(this.features=function(Ji){var Bi={},Ia={},aa=[],Ga=0;function ao(la){aa.push(Ji[la]),Ga++}function Ja(la,ea,xi){var va=Ia[la];return delete Ia[la],Ia[ea]=va,aa[va].geometry[0].pop(),aa[va].geometry[0]=aa[va].geometry[0].concat(xi[0]),va}function Io(la,ea,xi){var va=Bi[ea];return delete Bi[ea],Bi[la]=va,aa[va].geometry[0].shift(),aa[va].geometry[0]=xi[0].concat(aa[va].geometry[0]),va}function $a(la,ea,xi){var va=xi?ea[0][ea[0].length-1]:ea[0][0];return la+":"+va.x+":"+va.y}for(var Ra=0;Ra<Ji.length;Ra++){var Qa=Ji[Ra],qa=Qa.geometry,za=Qa.text?Qa.text.toString():null;if(za){var ei=$a(za,qa),mi=$a(za,qa,!0);if(ei in Ia&&mi in Bi&&Ia[ei]!==Bi[mi]){var ga=Io(ei,mi,qa),Oi=Ja(ei,mi,aa[ga].geometry);delete Bi[ei],delete Ia[mi],Ia[$a(za,aa[Oi].geometry,!0)]=Oi,aa[ga].geometry=null}else ei in Ia?Ja(ei,mi,qa):mi in Bi?Io(ei,mi,qa):(ao(Ra),Bi[ei]=Ga-1,Ia[mi]=Ga-1)}else ao(Ra)}return aa.filter(function(la){return la.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ji,Bi){return Ji.sortKey-Bi.sortKey})}},Li.prototype.update=function(M,R,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,R,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(M,R,this.layers,Z))},Li.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Li.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Li.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Li.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Li.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Li.prototype.addToLineVertexArray=function(M,R){var Z=this.lineVertexArray.length;if(M.segment!==void 0){for(var le=M.dist(R[M.segment+1]),Te=M.dist(R[M.segment]),Ie={},je=M.segment+1;je<R.length;je++)Ie[je]={x:R[je].x,y:R[je].y,tileUnitDistanceFromAnchor:le},je<R.length-1&&(le+=R[je+1].dist(R[je]));for(var Je=M.segment||0;Je>=0;Je--)Ie[Je]={x:R[Je].x,y:R[Je].y,tileUnitDistanceFromAnchor:Te},Je>0&&(Te+=R[Je-1].dist(R[Je]));for(var lt=0;lt<R.length;lt++){var _t=Ie[lt];this.lineVertexArray.emplaceBack(_t.x,_t.y,_t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},Li.prototype.addSymbols=function(M,R,Z,le,Te,Ie,je,Je,lt,_t,Tt,zt){for(var Gt=M.indexArray,Ut=M.layoutVertexArray,on=M.segments.prepareSegment(4*R.length,Ut,Gt,this.canOverlap?Ie.sortKey:void 0),cn=this.glyphOffsetArray.length,kn=on.vertexLength,_n=this.allowVerticalPlacement&&je===Es.vertical?Math.PI/2:0,Fn=Ie.text&&Ie.text.sections,Bn=0;Bn<R.length;Bn++){var Wn=R[Bn],$n=Wn.tl,lr=Wn.tr,Tr=Wn.bl,vr=Wn.br,Sr=Wn.tex,Er=Wn.pixelOffsetTL,Xr=Wn.pixelOffsetBR,zr=Wn.minFontScaleX,Yr=Wn.minFontScaleY,jr=Wn.glyphOffset,Rr=Wn.isSDF,ui=Wn.sectionIndex,Qr=on.vertexLength,Fi=jr[1];ah(Ut,Je.x,Je.y,$n.x,Fi+$n.y,Sr.x,Sr.y,Z,Rr,Er.x,Er.y,zr,Yr),ah(Ut,Je.x,Je.y,lr.x,Fi+lr.y,Sr.x+Sr.w,Sr.y,Z,Rr,Xr.x,Er.y,zr,Yr),ah(Ut,Je.x,Je.y,Tr.x,Fi+Tr.y,Sr.x,Sr.y+Sr.h,Z,Rr,Er.x,Xr.y,zr,Yr),ah(Ut,Je.x,Je.y,vr.x,Fi+vr.y,Sr.x+Sr.w,Sr.y+Sr.h,Z,Rr,Xr.x,Xr.y,zr,Yr),Md(M.dynamicLayoutVertexArray,Je,_n),Gt.emplaceBack(Qr,Qr+1,Qr+2),Gt.emplaceBack(Qr+1,Qr+2,Qr+3),on.vertexLength+=4,on.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(jr[0]),Bn!==R.length-1&&ui===R[Bn+1].sectionIndex||M.programConfigurations.populatePaintArrays(Ut.length,Ie,Ie.index,{},zt,Fn&&Fn[ui])}M.placedSymbolArray.emplaceBack(Je.x,Je.y,cn,this.glyphOffsetArray.length-cn,kn,lt,_t,Je.segment,Z?Z[0]:0,Z?Z[1]:0,le[0],le[1],je,0,!1,0,Tt)},Li.prototype._addCollisionDebugVertex=function(M,R,Z,le,Te,Ie){return R.emplaceBack(0,0),M.emplaceBack(Z.x,Z.y,le,Te,Math.round(Ie.x),Math.round(Ie.y))},Li.prototype.addCollisionDebugVertices=function(M,R,Z,le,Te,Ie,je){var Je=Te.segments.prepareSegment(4,Te.layoutVertexArray,Te.indexArray),lt=Je.vertexLength,_t=Te.layoutVertexArray,Tt=Te.collisionVertexArray,zt=je.anchorX,Gt=je.anchorY;this._addCollisionDebugVertex(_t,Tt,Ie,zt,Gt,new t(M,R)),this._addCollisionDebugVertex(_t,Tt,Ie,zt,Gt,new t(Z,R)),this._addCollisionDebugVertex(_t,Tt,Ie,zt,Gt,new t(Z,le)),this._addCollisionDebugVertex(_t,Tt,Ie,zt,Gt,new t(M,le)),Je.vertexLength+=4;var Ut=Te.indexArray;Ut.emplaceBack(lt,lt+1),Ut.emplaceBack(lt+1,lt+2),Ut.emplaceBack(lt+2,lt+3),Ut.emplaceBack(lt+3,lt),Je.primitiveLength+=4},Li.prototype.addDebugCollisionBoxes=function(M,R,Z,le){for(var Te=M;Te<R;Te++){var Ie=this.collisionBoxArray.get(Te),je=Ie.x1,Je=Ie.y1,lt=Ie.x2,_t=Ie.y2;this.addCollisionDebugVertices(je,Je,lt,_t,le?this.textCollisionBox:this.iconCollisionBox,Ie.anchorPoint,Z)}},Li.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new df($,Op.members,ct),this.iconCollisionBox=new df($,Op.members,ct);for(var M=0;M<this.symbolInstances.length;M++){var R=this.symbolInstances.get(M);this.addDebugCollisionBoxes(R.textBoxStartIndex,R.textBoxEndIndex,R,!0),this.addDebugCollisionBoxes(R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R,!0),this.addDebugCollisionBoxes(R.iconBoxStartIndex,R.iconBoxEndIndex,R,!1),this.addDebugCollisionBoxes(R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex,R,!1)}},Li.prototype._deserializeCollisionBoxesForSymbol=function(M,R,Z,le,Te,Ie,je,Je,lt){for(var _t={},Tt=R;Tt<Z;Tt++){var zt=M.get(Tt);_t.textBox={x1:zt.x1,y1:zt.y1,x2:zt.x2,y2:zt.y2,anchorPointX:zt.anchorPointX,anchorPointY:zt.anchorPointY},_t.textFeatureIndex=zt.featureIndex;break}for(var Gt=le;Gt<Te;Gt++){var Ut=M.get(Gt);_t.verticalTextBox={x1:Ut.x1,y1:Ut.y1,x2:Ut.x2,y2:Ut.y2,anchorPointX:Ut.anchorPointX,anchorPointY:Ut.anchorPointY},_t.verticalTextFeatureIndex=Ut.featureIndex;break}for(var on=Ie;on<je;on++){var cn=M.get(on);_t.iconBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},_t.iconFeatureIndex=cn.featureIndex;break}for(var kn=Je;kn<lt;kn++){var _n=M.get(kn);_t.verticalIconBox={x1:_n.x1,y1:_n.y1,x2:_n.x2,y2:_n.y2,anchorPointX:_n.anchorPointX,anchorPointY:_n.anchorPointY},_t.verticalIconFeatureIndex=_n.featureIndex;break}return _t},Li.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var R=0;R<this.symbolInstances.length;R++){var Z=this.symbolInstances.get(R);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},Li.prototype.hasTextData=function(){return this.text.segments.get().length>0},Li.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Li.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Li.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Li.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Li.prototype.addIndicesForPlacedSymbol=function(M,R){for(var Z=M.placedSymbolArray.get(R),le=Z.vertexStartIndex+4*Z.numGlyphs,Te=Z.vertexStartIndex;Te<le;Te+=4)M.indexArray.emplaceBack(Te,Te+1,Te+2),M.indexArray.emplaceBack(Te+1,Te+2,Te+3)},Li.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var R=Math.sin(M),Z=Math.cos(M),le=[],Te=[],Ie=[],je=0;je<this.symbolInstances.length;++je){Ie.push(je);var Je=this.symbolInstances.get(je);le.push(0|Math.round(R*Je.anchorX+Z*Je.anchorY)),Te.push(Je.featureIndex)}return Ie.sort(function(lt,_t){return le[lt]-le[_t]||Te[_t]-Te[lt]}),Ie},Li.prototype.addToSortKeyRanges=function(M,R){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===R?Z.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:R,symbolInstanceStart:M,symbolInstanceEnd:M+1})},Li.prototype.sortFeatures=function(M){var R=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,le=this.symbolInstanceIndexes;Z<le.length;Z+=1){var Te=le[Z],Ie=this.symbolInstances.get(Te);this.featureSortOrder.push(Ie.featureIndex),[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(function(je,Je,lt){je>=0&&lt.indexOf(je)===Je&&R.addIndicesForPlacedSymbol(R.text,je)}),Ie.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ie.verticalPlacedTextSymbolIndex),Ie.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ie.placedIconSymbolIndex),Ie.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ie.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Lr("SymbolBucket",Li,{omit:["layers","collisionBoxArray","features","compareText"]}),Li.MAX_GLYPHS=65535,Li.addDynamicAttributes=Md;var nv=new $i({"symbol-placement":new Dr(We.layout_symbol["symbol-placement"]),"symbol-spacing":new Dr(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dr(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ur(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dr(We.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dr(We.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Dr(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dr(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dr(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ur(We.layout_symbol["icon-size"]),"icon-text-fit":new Dr(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dr(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ur(We.layout_symbol["icon-image"]),"icon-rotate":new Ur(We.layout_symbol["icon-rotate"]),"icon-padding":new Dr(We.layout_symbol["icon-padding"]),"icon-keep-upright":new Dr(We.layout_symbol["icon-keep-upright"]),"icon-offset":new Ur(We.layout_symbol["icon-offset"]),"icon-anchor":new Ur(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dr(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dr(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dr(We.layout_symbol["text-rotation-alignment"]),"text-field":new Ur(We.layout_symbol["text-field"]),"text-font":new Ur(We.layout_symbol["text-font"]),"text-size":new Ur(We.layout_symbol["text-size"]),"text-max-width":new Ur(We.layout_symbol["text-max-width"]),"text-line-height":new Dr(We.layout_symbol["text-line-height"]),"text-letter-spacing":new Ur(We.layout_symbol["text-letter-spacing"]),"text-justify":new Ur(We.layout_symbol["text-justify"]),"text-radial-offset":new Ur(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dr(We.layout_symbol["text-variable-anchor"]),"text-anchor":new Ur(We.layout_symbol["text-anchor"]),"text-max-angle":new Dr(We.layout_symbol["text-max-angle"]),"text-writing-mode":new Dr(We.layout_symbol["text-writing-mode"]),"text-rotate":new Ur(We.layout_symbol["text-rotate"]),"text-padding":new Dr(We.layout_symbol["text-padding"]),"text-keep-upright":new Dr(We.layout_symbol["text-keep-upright"]),"text-transform":new Ur(We.layout_symbol["text-transform"]),"text-offset":new Ur(We.layout_symbol["text-offset"]),"text-allow-overlap":new Dr(We.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Dr(We.layout_symbol["text-ignore-placement"]),"text-optional":new Dr(We.layout_symbol["text-optional"])}),Sd={paint:new $i({"icon-opacity":new Ur(We.paint_symbol["icon-opacity"]),"icon-color":new Ur(We.paint_symbol["icon-color"]),"icon-halo-color":new Ur(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ur(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ur(We.paint_symbol["icon-halo-blur"]),"icon-translate":new Dr(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dr(We.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ur(We.paint_symbol["text-opacity"]),"text-color":new Ur(We.paint_symbol["text-color"],{runtimeType:an,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Ur(We.paint_symbol["text-halo-color"]),"text-halo-width":new Ur(We.paint_symbol["text-halo-width"]),"text-halo-blur":new Ur(We.paint_symbol["text-halo-blur"]),"text-translate":new Dr(We.paint_symbol["text-translate"]),"text-translate-anchor":new Dr(We.paint_symbol["text-translate-anchor"])}),layout:nv},Iu=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Pt,this.defaultValue=M};Iu.prototype.evaluate=function(M){if(M.formattedSection){var R=this.defaultValue.property.overrides;if(R&&R.hasOverride(M.formattedSection))return R.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},Iu.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},Iu.prototype.outputDefined=function(){return!1},Iu.prototype.serialize=function(){return null},Lr("FormatSectionOverride",Iu,{omit:["defaultValue"]});var rv=function(M){function R(Z){M.call(this,Z,Sd)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.recalculate=function(Z,le){if(M.prototype.recalculate.call(this,Z,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Te=this.layout.get("text-writing-mode");if(Te){for(var Ie=[],je=0,Je=Te;je<Je.length;je+=1){var lt=Je[je];Ie.indexOf(lt)<0&&Ie.push(lt)}this.layout._values["text-writing-mode"]=Ie}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},R.prototype.getValueAndResolveTokens=function(Z,le,Te,Ie){var je=this.layout.get(Z).evaluate(le,{},Te,Ie),Je=this._unevaluatedLayout._values[Z];return Je.isDataDriven()||Ns(Je.value)||!je?je:function(lt,_t){return _t.replace(/{([^{}]+)}/g,function(Tt,zt){return zt in lt?String(lt[zt]):""})}(le.properties,je)},R.prototype.createBucket=function(Z){return new Li(Z)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype._setPaintOverrides=function(){for(var Z=0,le=Sd.paint.overridableProperties;Z<le.length;Z+=1){var Te=le[Z];if(R.hasPaintOverride(this.layout,Te)){var Ie,je=this.paint.get(Te),Je=new Iu(je),lt=new ys(Je,je.property.specification);Ie=je.value.kind==="constant"||je.value.kind==="source"?new To("source",lt):new $s("composite",lt,je.value.zoomStops,je.value._interpolationType),this.paint._values[Te]=new Ci(je.property,Ie,je.parameters)}}},R.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Te){return!(!this.layout||le.isDataDriven()||Te.isDataDriven())&&R.hasPaintOverride(this.layout,Z)},R.hasPaintOverride=function(Z,le){var Te=Z.get("text-field"),Ie=Sd.paint.properties[le],je=!1,Je=function(Tt){for(var zt=0,Gt=Tt;zt<Gt.length;zt+=1){var Ut=Gt[zt];if(Ie.overrides&&Ie.overrides.hasOverride(Ut))return void(je=!0)}};if(Te.value.kind==="constant"&&Te.value.value instanceof Rn)Je(Te.value.value.sections);else if(Te.value.kind==="source"){var lt=function(Tt){if(!je)if(Tt instanceof en&&Kn(Tt.value)===Pn){var zt=Tt.value;Je(zt.sections)}else Tt instanceof Dn?Je(Tt.sections):Tt.eachChild(lt)},_t=Te.value;_t._styleExpression&&lt(_t._styleExpression.expression)}return je},R}(yi),iv={paint:new $i({"background-color":new Dr(We.paint_background["background-color"]),"background-pattern":new Ho(We.paint_background["background-pattern"]),"background-opacity":new Dr(We.paint_background["background-opacity"])})},av=function(M){function R(Z){M.call(this,Z,iv)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R}(yi),ov={paint:new $i({"raster-opacity":new Dr(We.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dr(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dr(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dr(We.paint_raster["raster-brightness-max"]),"raster-saturation":new Dr(We.paint_raster["raster-saturation"]),"raster-contrast":new Dr(We.paint_raster["raster-contrast"]),"raster-resampling":new Dr(We.paint_raster["raster-resampling"]),"raster-fade-duration":new Dr(We.paint_raster["raster-fade-duration"])})},sv=function(M){function R(Z){M.call(this,Z,ov)}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R}(yi),lv=function(M){function R(Z){M.call(this,Z,{}),this.implementation=Z}return M&&(R.__proto__=M),R.prototype=Object.create(M&&M.prototype),R.prototype.constructor=R,R.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},R.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},R.prototype.recalculate=function(){},R.prototype.updateTransitions=function(){},R.prototype.hasTransition=function(){},R.prototype.serialize=function(){},R.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},R.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},R}(yi),cv={circle:Hg,heatmap:qg,hillshade:Yg,fill:u1,"fill-extrusion":x1,line:M1,symbol:rv,background:av,raster:sv},s0=r.HTMLImageElement,l0=r.HTMLCanvasElement,c0=r.HTMLVideoElement,u0=r.ImageData,oh=r.ImageBitmap,nu=function(M,R,Z,le){this.context=M,this.format=Z,this.texture=M.gl.createTexture(),this.update(R,le)};nu.prototype.update=function(M,R,Z){var le=M.width,Te=M.height,Ie=!(this.size&&this.size[0]===le&&this.size[1]===Te||Z),je=this.context,Je=je.gl;if(this.useMipmap=!!(R&&R.useMipmap),Je.bindTexture(Je.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Je.RGBA&&(!R||R.premultiply!==!1)),Ie)this.size=[le,Te],M instanceof s0||M instanceof l0||M instanceof c0||M instanceof u0||oh&&M instanceof oh?Je.texImage2D(Je.TEXTURE_2D,0,this.format,this.format,Je.UNSIGNED_BYTE,M):Je.texImage2D(Je.TEXTURE_2D,0,this.format,le,Te,0,this.format,Je.UNSIGNED_BYTE,M.data);else{var lt=Z||{x:0,y:0},_t=lt.x,Tt=lt.y;M instanceof s0||M instanceof l0||M instanceof c0||M instanceof u0||oh&&M instanceof oh?Je.texSubImage2D(Je.TEXTURE_2D,0,_t,Tt,Je.RGBA,Je.UNSIGNED_BYTE,M):Je.texSubImage2D(Je.TEXTURE_2D,0,_t,Tt,le,Te,Je.RGBA,Je.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Je.generateMipmap(Je.TEXTURE_2D)},nu.prototype.bind=function(M,R,Z){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),Z!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=le.LINEAR),M!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,M),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,Z||M),this.filter=M),R!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,R),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,R),this.wrap=R)},nu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},nu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Cd=function(M){var R=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){R._triggered=!1,R._callback()})};Cd.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Cd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Pu=function(M,R,Z){this.target=M,this.parent=R,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new Cd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=D()?M:r};function f0(M,R,Z){var le=2*Math.PI*6378137/256/Math.pow(2,Z);return[M*le-2*Math.PI*6378137/2,R*le-2*Math.PI*6378137/2]}Pu.prototype.send=function(M,R,Z,le,Te){var Ie=this;Te===void 0&&(Te=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[je]=Z);var Je=O(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:M,hasCallback:!!Z,targetMapId:le,mustQueue:Te,sourceMapId:this.mapId,data:ks(R,Je)},Je),{cancel:function(){Z&&delete Ie.callbacks[je],Ie.target.postMessage({id:je,type:"<cancel>",targetMapId:le,sourceMapId:Ie.mapId})}}},Pu.prototype.receive=function(M){var R=M.data,Z=R.id;if(Z&&(!R.targetMapId||this.mapId===R.targetMapId))if(R.type==="<cancel>"){delete this.tasks[Z];var le=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],le&&le()}else D()||R.mustQueue?(this.tasks[Z]=R,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,R)},Pu.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),R=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),R&&this.processTask(M,R)}},Pu.prototype.processTask=function(M,R){var Z=this;if(R.type==="<response>"){var le=this.callbacks[M];delete this.callbacks[M],le&&(R.error?le(qs(R.error)):le(null,qs(R.data)))}else{var Te=!1,Ie=O(this.globalScope)?void 0:[],je=R.hasCallback?function(Tt,zt){Te=!0,delete Z.cancelCallbacks[M],Z.target.postMessage({id:M,type:"<response>",sourceMapId:Z.mapId,error:Tt?ks(Tt):null,data:ks(zt,Ie)},Ie)}:function(Tt){Te=!0},Je=null,lt=qs(R.data);if(this.parent[R.type])Je=this.parent[R.type](R.sourceMapId,lt,je);else if(this.parent.getWorkerSource){var _t=R.type.split(".");Je=this.parent.getWorkerSource(R.sourceMapId,_t[0],lt.source)[_t[1]](lt,je)}else je(new Error("Could not find function "+R.type));!Te&&Je&&Je.cancel&&(this.cancelCallbacks[M]=Je.cancel)}},Pu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ea=function(M,R){M&&(R?this.setSouthWest(M).setNorthEast(R):M.length===4?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};Ea.prototype.setNorthEast=function(M){return this._ne=M instanceof Qi?new Qi(M.lng,M.lat):Qi.convert(M),this},Ea.prototype.setSouthWest=function(M){return this._sw=M instanceof Qi?new Qi(M.lng,M.lat):Qi.convert(M),this},Ea.prototype.extend=function(M){var R,Z,le=this._sw,Te=this._ne;if(M instanceof Qi)R=M,Z=M;else{if(!(M instanceof Ea)){if(Array.isArray(M)){if(M.length===4||M.every(Array.isArray)){var Ie=M;return this.extend(Ea.convert(Ie))}var je=M;return this.extend(Qi.convert(je))}return this}if(R=M._sw,Z=M._ne,!R||!Z)return this}return le||Te?(le.lng=Math.min(R.lng,le.lng),le.lat=Math.min(R.lat,le.lat),Te.lng=Math.max(Z.lng,Te.lng),Te.lat=Math.max(Z.lat,Te.lat)):(this._sw=new Qi(R.lng,R.lat),this._ne=new Qi(Z.lng,Z.lat)),this},Ea.prototype.getCenter=function(){return new Qi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ea.prototype.getSouthWest=function(){return this._sw},Ea.prototype.getNorthEast=function(){return this._ne},Ea.prototype.getNorthWest=function(){return new Qi(this.getWest(),this.getNorth())},Ea.prototype.getSouthEast=function(){return new Qi(this.getEast(),this.getSouth())},Ea.prototype.getWest=function(){return this._sw.lng},Ea.prototype.getSouth=function(){return this._sw.lat},Ea.prototype.getEast=function(){return this._ne.lng},Ea.prototype.getNorth=function(){return this._ne.lat},Ea.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ea.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ea.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ea.prototype.contains=function(M){var R=Qi.convert(M),Z=R.lng,le=R.lat,Te=this._sw.lat<=le&&le<=this._ne.lat,Ie=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ie=this._sw.lng>=Z&&Z>=this._ne.lng),Te&&Ie},Ea.convert=function(M){return!M||M instanceof Ea?M:new Ea(M)};var h0=63710088e-1,Qi=function(M,R){if(isNaN(M)||isNaN(R))throw new Error("Invalid LngLat object: ("+M+", "+R+")");if(this.lng=+M,this.lat=+R,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Qi.prototype.wrap=function(){return new Qi(d(this.lng,-180,180),this.lat)},Qi.prototype.toArray=function(){return[this.lng,this.lat]},Qi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Qi.prototype.distanceTo=function(M){var R=Math.PI/180,Z=this.lat*R,le=M.lat*R,Te=Math.sin(Z)*Math.sin(le)+Math.cos(Z)*Math.cos(le)*Math.cos((M.lng-this.lng)*R);return h0*Math.acos(Math.min(Te,1))},Qi.prototype.toBounds=function(M){M===void 0&&(M=0);var R=360*M/40075017,Z=R/Math.cos(Math.PI/180*this.lat);return new Ea(new Qi(this.lng-Z,this.lat-R),new Qi(this.lng+Z,this.lat+R))},Qi.convert=function(M){if(M instanceof Qi)return M;if(Array.isArray(M)&&(M.length===2||M.length===3))return new Qi(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&typeof M=="object"&&M!==null)return new Qi(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var d0=2*Math.PI*h0;function p0(M){return d0*Math.cos(M*Math.PI/180)}function m0(M){return(180+M)/360}function g0(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function v0(M,R){return M/p0(R)}function Ed(M){var R=180-360*M;return 360/Math.PI*Math.atan(Math.exp(R*Math.PI/180))-90}var ru=function(M,R,Z){Z===void 0&&(Z=0),this.x=+M,this.y=+R,this.z=+Z};ru.fromLngLat=function(M,R){R===void 0&&(R=0);var Z=Qi.convert(M);return new ru(m0(Z.lng),g0(Z.lat),v0(R,Z.lat))},ru.prototype.toLngLat=function(){return new Qi(360*this.x-180,Ed(this.y))},ru.prototype.toAltitude=function(){return M=this.z,R=this.y,M*p0(Ed(R));var M,R},ru.prototype.meterInMercatorCoordinateUnits=function(){return 1/d0*(M=Ed(this.y),1/Math.cos(M*Math.PI/180));var M};var iu=function(M,R,Z){this.z=M,this.x=R,this.y=Z,this.key=pf(0,M,M,R,Z)};iu.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},iu.prototype.url=function(M,R){var Z,le,Te,Ie,je,Je=(Z=this.x,le=this.y,Te=this.z,Ie=f0(256*Z,256*(le=Math.pow(2,Te)-le-1),Te),je=f0(256*(Z+1),256*(le+1),Te),Ie[0]+","+Ie[1]+","+je[0]+","+je[1]),lt=function(_t,Tt,zt){for(var Gt,Ut="",on=_t;on>0;on--)Ut+=(Tt&(Gt=1<<on-1)?1:0)+(zt&Gt?2:0);return Ut}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(R==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",Je)},iu.prototype.getTilePoint=function(M){var R=Math.pow(2,this.z);return new t((M.x*R-this.x)*pi,(M.y*R-this.y)*pi)},iu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var y0=function(M,R){this.wrap=M,this.canonical=R,this.key=pf(M,R.z,R.z,R.x,R.y)},La=function(M,R,Z,le,Te){this.overscaledZ=M,this.wrap=R,this.canonical=new iu(Z,+le,+Te),this.key=pf(R,M,Z,le,Te)};function pf(M,R,Z,le,Te){(M*=2)<0&&(M=-1*M-1);var Ie=1<<Z;return(Ie*Ie*M+Ie*Te+le).toString(36)+Z.toString(36)+R.toString(36)}La.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},La.prototype.scaledTo=function(M){var R=this.canonical.z-M;return M>this.canonical.z?new La(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new La(M,this.wrap,M,this.canonical.x>>R,this.canonical.y>>R)},La.prototype.calculateScaledKey=function(M,R){var Z=this.canonical.z-M;return M>this.canonical.z?pf(this.wrap*+R,M,this.canonical.z,this.canonical.x,this.canonical.y):pf(this.wrap*+R,M,M,this.canonical.x>>Z,this.canonical.y>>Z)},La.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var R=this.canonical.z-M.canonical.z;return M.overscaledZ===0||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>R&&M.canonical.y===this.canonical.y>>R},La.prototype.children=function(M){if(this.overscaledZ>=M)return[new La(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var R=this.canonical.z+1,Z=2*this.canonical.x,le=2*this.canonical.y;return[new La(R,this.wrap,R,Z,le),new La(R,this.wrap,R,Z+1,le),new La(R,this.wrap,R,Z,le+1),new La(R,this.wrap,R,Z+1,le+1)]},La.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},La.prototype.wrapped=function(){return new La(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},La.prototype.unwrapTo=function(M){return new La(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},La.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},La.prototype.toUnwrapped=function(){return new y0(this.wrap,this.canonical)},La.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},La.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new ru(M.x-this.wrap,M.y))},Lr("CanonicalTileID",iu),Lr("OverscaledTileID",La,{omit:["posMatrix"]});var gc=function(M,R,Z){if(this.uid=M,R.height!==R.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return E('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=R.height;var le=this.dim=R.height-2;this.data=new Uint32Array(R.data.buffer),this.encoding=Z||"mapbox";for(var Te=0;Te<le;Te++)this.data[this._idx(-1,Te)]=this.data[this._idx(0,Te)],this.data[this._idx(le,Te)]=this.data[this._idx(le-1,Te)],this.data[this._idx(Te,-1)]=this.data[this._idx(Te,0)],this.data[this._idx(Te,le)]=this.data[this._idx(Te,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};gc.prototype.get=function(M,R){var Z=new Uint8Array(this.data.buffer),le=4*this._idx(M,R);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[le],Z[le+1],Z[le+2])},gc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},gc.prototype._idx=function(M,R){if(M<-1||M>=this.dim+1||R<-1||R>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(R+1)*this.stride+(M+1)},gc.prototype._unpackMapbox=function(M,R,Z){return(256*M*256+256*R+Z)/10-1e4},gc.prototype._unpackTerrarium=function(M,R,Z){return 256*M+R+Z/256-32768},gc.prototype.getPixels=function(){return new qo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},gc.prototype.backfillBorder=function(M,R,Z){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var le=R*this.dim,Te=R*this.dim+this.dim,Ie=Z*this.dim,je=Z*this.dim+this.dim;switch(R){case-1:le=Te-1;break;case 1:Te=le+1}switch(Z){case-1:Ie=je-1;break;case 1:je=Ie+1}for(var Je=-R*this.dim,lt=-Z*this.dim,_t=Ie;_t<je;_t++)for(var Tt=le;Tt<Te;Tt++)this.data[this._idx(Tt,_t)]=M.data[this._idx(Tt+Je,_t+lt)]},Lr("DEMData",gc);var sh=function(M){this._stringToNumber={},this._numberToString=[];for(var R=0;R<M.length;R++){var Z=M[R];this._stringToNumber[Z]=R,this._numberToString[R]=Z}};sh.prototype.encode=function(M){return this._stringToNumber[M]},sh.prototype.decode=function(M){return this._numberToString[M]};var lh=function(M,R,Z,le,Te){this.type="Feature",this._vectorTileFeature=M,M._z=R,M._x=Z,M._y=le,this.properties=M.properties,this.id=Te},Ld={geometry:{configurable:!0}};Ld.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ld.geometry.set=function(M){this._geometry=M},lh.prototype.toJSON=function(){var M={geometry:this.geometry};for(var R in this)R!=="_geometry"&&R!=="_vectorTileFeature"&&(M[R]=this[R]);return M},Object.defineProperties(lh.prototype,Ld);var Du=function(){this.state={},this.stateChanges={},this.deletedStates={}};Du.prototype.updateState=function(M,R,Z){var le=String(R);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][le]=this.stateChanges[M][le]||{},u(this.stateChanges[M][le],Z),this.deletedStates[M]===null)for(var Te in this.deletedStates[M]={},this.state[M])Te!==le&&(this.deletedStates[M][Te]=null);else if(this.deletedStates[M]&&this.deletedStates[M][le]===null)for(var Ie in this.deletedStates[M][le]={},this.state[M][le])Z[Ie]||(this.deletedStates[M][le][Ie]=null);else for(var je in Z)this.deletedStates[M]&&this.deletedStates[M][le]&&this.deletedStates[M][le][je]===null&&delete this.deletedStates[M][le][je]},Du.prototype.removeFeatureState=function(M,R,Z){if(this.deletedStates[M]!==null){var le=String(R);if(this.deletedStates[M]=this.deletedStates[M]||{},Z&&R!==void 0)this.deletedStates[M][le]!==null&&(this.deletedStates[M][le]=this.deletedStates[M][le]||{},this.deletedStates[M][le][Z]=null);else if(R!==void 0)if(this.stateChanges[M]&&this.stateChanges[M][le])for(Z in this.deletedStates[M][le]={},this.stateChanges[M][le])this.deletedStates[M][le][Z]=null;else this.deletedStates[M][le]=null;else this.deletedStates[M]=null}},Du.prototype.getState=function(M,R){var Z=String(R),le=this.state[M]||{},Te=this.stateChanges[M]||{},Ie=u({},le[Z],Te[Z]);if(this.deletedStates[M]===null)return{};if(this.deletedStates[M]){var je=this.deletedStates[M][R];if(je===null)return{};for(var Je in je)delete Ie[Je]}return Ie},Du.prototype.initializeTileState=function(M,R){M.setFeatureState(this.state,R)},Du.prototype.coalesceChanges=function(M,R){var Z={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var Te={};for(var Ie in this.stateChanges[le])this.state[le][Ie]||(this.state[le][Ie]={}),u(this.state[le][Ie],this.stateChanges[le][Ie]),Te[Ie]=this.state[le][Ie];Z[le]=Te}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Je={};if(this.deletedStates[je]===null)for(var lt in this.state[je])Je[lt]={},this.state[je][lt]={};else for(var _t in this.deletedStates[je]){if(this.deletedStates[je][_t]===null)this.state[je][_t]={};else for(var Tt=0,zt=Object.keys(this.deletedStates[je][_t]);Tt<zt.length;Tt+=1){var Gt=zt[Tt];delete this.state[je][_t][Gt]}Je[_t]=this.state[je][_t]}Z[je]=Z[je]||{},u(Z[je],Je)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var Ut in M)M[Ut].setFeatureState(Z,R)};var vc=function(M,R){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new Gs(pi,16,0),this.grid3D=new Gs(pi,16,0),this.featureIndexArray=new Sn,this.promoteId=R};function x0(M,R,Z,le,Te){return _(M,function(Ie,je){var Je=R instanceof Ys?R.get(je):null;return Je&&Je.evaluate?Je.evaluate(Z,le,Te):Je})}function b0(M){for(var R=1/0,Z=1/0,le=-1/0,Te=-1/0,Ie=0,je=M;Ie<je.length;Ie+=1){var Je=je[Ie];R=Math.min(R,Je.x),Z=Math.min(Z,Je.y),le=Math.max(le,Je.x),Te=Math.max(Te,Je.y)}return{minX:R,minY:Z,maxX:le,maxY:Te}}function uv(M,R){return R-M}vc.prototype.insert=function(M,R,Z,le,Te,Ie){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,le,Te);for(var Je=Ie?this.grid3D:this.grid,lt=0;lt<R.length;lt++){for(var _t=R[lt],Tt=[1/0,1/0,-1/0,-1/0],zt=0;zt<_t.length;zt++){var Gt=_t[zt];Tt[0]=Math.min(Tt[0],Gt.x),Tt[1]=Math.min(Tt[1],Gt.y),Tt[2]=Math.max(Tt[2],Gt.x),Tt[3]=Math.max(Tt[3],Gt.y)}Tt[0]<pi&&Tt[1]<pi&&Tt[2]>=0&&Tt[3]>=0&&Je.insert(je,Tt[0],Tt[1],Tt[2],Tt[3])}},vc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _u.VectorTile(new Kf(this.rawTileData)).layers,this.sourceLayerCoder=new sh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},vc.prototype.query=function(M,R,Z,le){var Te=this;this.loadVTLayers();for(var Ie=M.params||{},je=pi/M.tileSize/M.scale,Je=wl(Ie.filter),lt=M.queryGeometry,_t=M.queryPadding*je,Tt=b0(lt),zt=this.grid.query(Tt.minX-_t,Tt.minY-_t,Tt.maxX+_t,Tt.maxY+_t),Gt=b0(M.cameraQueryGeometry),Ut=0,on=this.grid3D.query(Gt.minX-_t,Gt.minY-_t,Gt.maxX+_t,Gt.maxY+_t,function(Wn,$n,lr,Tr){return function(vr,Sr,Er,Xr,zr){for(var Yr=0,jr=vr;Yr<jr.length;Yr+=1){var Rr=jr[Yr];if(Sr<=Rr.x&&Er<=Rr.y&&Xr>=Rr.x&&zr>=Rr.y)return!0}var ui=[new t(Sr,Er),new t(Sr,zr),new t(Xr,zr),new t(Xr,Er)];if(vr.length>2){for(var Qr=0,Fi=ui;Qr<Fi.length;Qr+=1)if(Xl(vr,Fi[Qr]))return!0}for(var Wr=0;Wr<vr.length-1;Wr++)if(Fg(vr[Wr],vr[Wr+1],ui))return!0;return!1}(M.cameraQueryGeometry,Wn-_t,$n-_t,lr+_t,Tr+_t)});Ut<on.length;Ut+=1){var cn=on[Ut];zt.push(cn)}zt.sort(uv);for(var kn,_n={},Fn=function(Wn){var $n=zt[Wn];if($n!==kn){kn=$n;var lr=Te.featureIndexArray.get($n),Tr=null;Te.loadMatchingFeature(_n,lr.bucketIndex,lr.sourceLayerIndex,lr.featureIndex,Je,Ie.layers,Ie.availableImages,R,Z,le,function(vr,Sr,Er){return Tr||(Tr=as(vr)),Sr.queryIntersectsFeature(lt,vr,Er,Tr,Te.z,M.transform,je,M.pixelPosMatrix)})}},Bn=0;Bn<zt.length;Bn++)Fn(Bn);return _n},vc.prototype.loadMatchingFeature=function(M,R,Z,le,Te,Ie,je,Je,lt,_t,Tt){var zt=this.bucketLayerIDs[R];if(!Ie||function(vr,Sr){for(var Er=0;Er<vr.length;Er++)if(Sr.indexOf(vr[Er])>=0)return!0;return!1}(Ie,zt)){var Gt=this.sourceLayerCoder.decode(Z),Ut=this.vtLayers[Gt].feature(le);if(Te.needGeometry){var on=Hi(Ut,!0);if(!Te.filter(new ai(this.tileID.overscaledZ),on,this.tileID.canonical))return}else if(!Te.filter(new ai(this.tileID.overscaledZ),Ut))return;for(var cn=this.getId(Ut,Gt),kn=0;kn<zt.length;kn++){var _n=zt[kn];if(!(Ie&&Ie.indexOf(_n)<0)){var Fn=Je[_n];if(Fn){var Bn={};cn!==void 0&&_t&&(Bn=_t.getState(Fn.sourceLayer||"_geojsonTileLayer",cn));var Wn=u({},lt[_n]);Wn.paint=x0(Wn.paint,Fn.paint,Ut,Bn,je),Wn.layout=x0(Wn.layout,Fn.layout,Ut,Bn,je);var $n=!Tt||Tt(Ut,Fn,Bn);if($n){var lr=new lh(Ut,this.z,this.x,this.y,cn);lr.layer=Wn;var Tr=M[_n];Tr===void 0&&(Tr=M[_n]=[]),Tr.push({featureIndex:le,feature:lr,intersectionZ:$n})}}}}}},vc.prototype.lookupSymbolFeatures=function(M,R,Z,le,Te,Ie,je,Je){var lt={};this.loadVTLayers();for(var _t=wl(Te),Tt=0,zt=M;Tt<zt.length;Tt+=1){var Gt=zt[Tt];this.loadMatchingFeature(lt,Z,le,Gt,_t,Ie,je,Je,R)}return lt},vc.prototype.hasLayer=function(M){for(var R=0,Z=this.bucketLayerIDs;R<Z.length;R+=1)for(var le=0,Te=Z[R];le<Te.length;le+=1)if(M===Te[le])return!0;return!1},vc.prototype.getId=function(M,R){var Z=M.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[R];typeof(Z=M.properties[le])=="boolean"&&(Z=Number(Z))}return Z},Lr("FeatureIndex",vc,{omit:["rawTileData","sourceLayerCoder"]});var Ha=function(M,R){this.tileID=M,this.uid=p(),this.uses=0,this.tileSize=R,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ha.prototype.registerFadeDuration=function(M){var R=M+this.timeAdded;R<J.now()||this.fadeEndTime&&R<this.fadeEndTime||(this.fadeEndTime=R)},Ha.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ha.prototype.loadVectorData=function(M,R,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var le in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(_t,Tt){var zt={};if(!Tt)return zt;for(var Gt=function(){var cn=on[Ut],kn=cn.layerIds.map(function(Wn){return Tt.getLayer(Wn)}).filter(Boolean);if(kn.length!==0){cn.layers=kn,cn.stateDependentLayerIds&&(cn.stateDependentLayers=cn.stateDependentLayerIds.map(function(Wn){return kn.filter(function($n){return $n.id===Wn})[0]}));for(var _n=0,Fn=kn;_n<Fn.length;_n+=1){var Bn=Fn[_n];zt[Bn.id]=cn}}},Ut=0,on=_t;Ut<on.length;Ut+=1)Gt();return zt}(M.buckets,R.style),this.hasSymbolBuckets=!1,this.buckets){var Te=this.buckets[le];if(Te instanceof Li){if(this.hasSymbolBuckets=!0,!Z)break;Te.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ie in this.buckets){var je=this.buckets[Ie];if(je instanceof Li&&je.hasRTLText){this.hasRTLText=!0,Va.isLoading()||Va.isLoaded()||rl()!=="deferred"||il();break}}for(var Je in this.queryPadding=0,this.buckets){var lt=this.buckets[Je];this.queryPadding=Math.max(this.queryPadding,R.style.getLayer(Je).queryRadius(lt))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new kt},Ha.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ha.prototype.getBucket=function(M){return this.buckets[M.id]},Ha.prototype.upload=function(M){for(var R in this.buckets){var Z=this.buckets[R];Z.uploadPending()&&Z.upload(M)}var le=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new nu(M,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new nu(M,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},Ha.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},Ha.prototype.queryRenderedFeatures=function(M,R,Z,le,Te,Ie,je,Je,lt,_t){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:Te,scale:Ie,tileSize:this.tileSize,pixelPosMatrix:_t,transform:Je,params:je,queryPadding:this.queryPadding*lt},M,R,Z):{}},Ha.prototype.querySourceFeatures=function(M,R){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var le=Z.loadVTLayers(),Te=R?R.sourceLayer:"",Ie=le._geojsonTileLayer||le[Te];if(Ie)for(var je=wl(R&&R.filter),Je=this.tileID.canonical,lt=Je.z,_t=Je.x,Tt=Je.y,zt={z:lt,x:_t,y:Tt},Gt=0;Gt<Ie.length;Gt++){var Ut=Ie.feature(Gt);if(je.needGeometry){var on=Hi(Ut,!0);if(!je.filter(new ai(this.tileID.overscaledZ),on,this.tileID.canonical))continue}else if(!je.filter(new ai(this.tileID.overscaledZ),Ut))continue;var cn=Z.getId(Ut,Te),kn=new lh(Ut,lt,_t,Tt,cn);kn.tile=zt,M.push(kn)}}},Ha.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ha.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ha.prototype.setExpiryData=function(M){var R=this.expirationTime;if(M.cacheControl){var Z=z(M.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var le=Date.now(),Te=!1;if(this.expirationTime>le)Te=!1;else if(R)if(this.expirationTime<R)Te=!0;else{var Ie=this.expirationTime-R;Ie?this.expirationTime=le+Math.max(Ie,3e4):Te=!0}else Te=!0;Te?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ha.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ha.prototype.setFeatureState=function(M,R){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(M).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(R.style.hasLayer(le)){var Te=this.buckets[le],Ie=Te.layers[0].sourceLayer||"_geojsonTileLayer",je=Z[Ie],Je=M[Ie];if(je&&Je&&Object.keys(Je).length!==0){Te.update(Je,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var lt=R&&R.style&&R.style.getLayer(le);lt&&(this.queryPadding=Math.max(this.queryPadding,lt.queryRadius(Te)))}}}},Ha.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ha.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<J.now()},Ha.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ha.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=J.now()+M},Ha.prototype.setDependencies=function(M,R){for(var Z={},le=0,Te=R;le<Te.length;le+=1)Z[Te[le]]=!0;this.dependencies[M]=Z},Ha.prototype.hasDependency=function(M,R){for(var Z=0,le=M;Z<le.length;Z+=1){var Te=le[Z],Ie=this.dependencies[Te];if(Ie){for(var je=0,Je=R;je<Je.length;je+=1)if(Ie[Je[je]])return!0}}return!1};var Oc=r.performance,_0=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},Oc.mark(this._marks.start)};_0.prototype.finish=function(){Oc.mark(this._marks.end);var M=Oc.getEntriesByName(this._marks.measure);return M.length===0&&(Oc.measure(this._marks.measure,this._marks.start,this._marks.end),M=Oc.getEntriesByName(this._marks.measure),Oc.clearMarks(this._marks.start),Oc.clearMarks(this._marks.end),Oc.clearMeasures(this._marks.measure)),M},a.Actor=Pu,a.AlphaImage=tu,a.CanonicalTileID=iu,a.CollisionBoxArray=kt,a.Color=Ln,a.DEMData=gc,a.DataConstantProperty=Dr,a.DictionaryCoder=sh,a.EXTENT=pi,a.ErrorEvent=Fe,a.EvaluationParameters=ai,a.Event=ze,a.Evented=rt,a.FeatureIndex=vc,a.FillBucket=Il,a.FillExtrusionBucket=Pl,a.ImageAtlas=uf,a.ImagePosition=$f,a.LineBucket=Lo,a.LngLat=Qi,a.LngLatBounds=Ea,a.MercatorCoordinate=ru,a.ONE_EM=Ka,a.OverscaledTileID=La,a.Point=t,a.Point$1=t,a.Properties=$i,a.Protobuf=Kf,a.RGBAImage=qo,a.RequestManager=ve,a.RequestPerformance=_0,a.ResourceType=pt,a.SegmentVector=Hn,a.SourceFeatureState=Du,a.StructArrayLayout1ui2=dt,a.StructArrayLayout2f1f2i16=ne,a.StructArrayLayout2i4=Ss,a.StructArrayLayout3ui6=xe,a.StructArrayLayout4i8=pc,a.SymbolBucket=Li,a.Texture=nu,a.Tile=Ha,a.Transitionable=Co,a.Uniform1f=ti,a.Uniform1i=Kr,a.Uniform2f=oi,a.Uniform3f=Ei,a.Uniform4f=Xi,a.UniformColor=Oa,a.UniformMatrix4f=Sa,a.UnwrappedTileID=y0,a.ValidationError=ft,a.WritingMode=Es,a.ZoomHistory=nl,a.add=function(M,R,Z){return M[0]=R[0]+Z[0],M[1]=R[1]+Z[1],M[2]=R[2]+Z[2],M},a.addDynamicAttributes=Md,a.asyncAll=function(M,R,Z){if(!M.length)return Z(null,[]);var le=M.length,Te=new Array(M.length),Ie=null;M.forEach(function(je,Je){R(je,function(lt,_t){lt&&(Ie=lt),Te[Je]=_t,--le==0&&Z(Ie,Te)})})},a.bezier=o,a.bindAll=y,a.browser=J,a.cacheEntryPossiblyAdded=function(M){++gt>Oe&&(M.getActor().send("enforceCacheSizeLimit",Ae),gt=0)},a.clamp=c,a.clearTileCache=function(M){var R=r.caches.delete(_e);M&&R.catch(M).then(function(){return M()})},a.clipLine=t0,a.clone=function(M){var R=new Cs(16);return R[0]=M[0],R[1]=M[1],R[2]=M[2],R[3]=M[3],R[4]=M[4],R[5]=M[5],R[6]=M[6],R[7]=M[7],R[8]=M[8],R[9]=M[9],R[10]=M[10],R[11]=M[11],R[12]=M[12],R[13]=M[13],R[14]=M[14],R[15]=M[15],R},a.clone$1=S,a.clone$2=function(M){var R=new Cs(3);return R[0]=M[0],R[1]=M[1],R[2]=M[2],R},a.collisionCircleLayout=L1,a.config=K,a.create=function(){var M=new Cs(16);return Cs!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},a.create$1=function(){var M=new Cs(9);return Cs!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},a.create$2=function(){var M=new Cs(4);return Cs!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},a.createCommonjsModule=w,a.createExpression=es,a.createLayout=Pi,a.createStyleLayer=function(M){return M.type==="custom"?new lv(M):new cv[M.type](M)},a.cross=function(M,R,Z){var le=R[0],Te=R[1],Ie=R[2],je=Z[0],Je=Z[1],lt=Z[2];return M[0]=Te*lt-Ie*Je,M[1]=Ie*je-le*lt,M[2]=le*Je-Te*je,M},a.deepEqual=function M(R,Z){if(Array.isArray(R)){if(!Array.isArray(Z)||R.length!==Z.length)return!1;for(var le=0;le<R.length;le++)if(!M(R[le],Z[le]))return!1;return!0}if(typeof R=="object"&&R!==null&&Z!==null){if(typeof Z!="object"||Object.keys(R).length!==Object.keys(Z).length)return!1;for(var Te in R)if(!M(R[Te],Z[Te]))return!1;return!0}return R===Z},a.dot=function(M,R){return M[0]*R[0]+M[1]*R[1]+M[2]*R[2]},a.dot$1=function(M,R){return M[0]*R[0]+M[1]*R[1]+M[2]*R[2]+M[3]*R[3]},a.ease=l,a.emitValidationErrors=Na,a.endsWith=v,a.enforceCacheSizeLimit=function(M){Be(),fe&&fe.then(function(R){R.keys().then(function(Z){for(var le=0;le<Z.length-M;le++)R.delete(Z[le])})})},a.evaluateSizeForFeature=Xp,a.evaluateSizeForZoom=Zp,a.evaluateVariableOffset=i0,a.evented=Ua,a.extend=u,a.featureFilter=wl,a.filterObject=h,a.fromRotation=function(M,R){var Z=Math.sin(R),le=Math.cos(R);return M[0]=le,M[1]=Z,M[2]=0,M[3]=-Z,M[4]=le,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},a.getAnchorAlignment=wd,a.getAnchorJustification=Ad,a.getArrayBuffer=Rt,a.getImage=Ye,a.getJSON=function(M,R){return Ot(u(M,{type:"json"}),R)},a.getRTLTextPluginStatus=rl,a.getReferrer=$e,a.getVideo=function(M,R){var Z,le,Te=r.document.createElement("video");Te.muted=!0,Te.onloadstart=function(){R(null,Te)};for(var Ie=0;Ie<M.length;Ie++){var je=r.document.createElement("source");Z=M[Ie],le=void 0,(le=r.document.createElement("a")).href=Z,le.protocol===r.document.location.protocol&&le.host===r.document.location.host||(Te.crossOrigin="Anonymous"),je.src=M[Ie],Te.appendChild(je)}return{cancel:function(){}}},a.identity=ld,a.invert=function(M,R){var Z=R[0],le=R[1],Te=R[2],Ie=R[3],je=R[4],Je=R[5],lt=R[6],_t=R[7],Tt=R[8],zt=R[9],Gt=R[10],Ut=R[11],on=R[12],cn=R[13],kn=R[14],_n=R[15],Fn=Z*Je-le*je,Bn=Z*lt-Te*je,Wn=Z*_t-Ie*je,$n=le*lt-Te*Je,lr=le*_t-Ie*Je,Tr=Te*_t-Ie*lt,vr=Tt*cn-zt*on,Sr=Tt*kn-Gt*on,Er=Tt*_n-Ut*on,Xr=zt*kn-Gt*cn,zr=zt*_n-Ut*cn,Yr=Gt*_n-Ut*kn,jr=Fn*Yr-Bn*zr+Wn*Xr+$n*Er-lr*Sr+Tr*vr;return jr?(jr=1/jr,M[0]=(Je*Yr-lt*zr+_t*Xr)*jr,M[1]=(Te*zr-le*Yr-Ie*Xr)*jr,M[2]=(cn*Tr-kn*lr+_n*$n)*jr,M[3]=(Gt*lr-zt*Tr-Ut*$n)*jr,M[4]=(lt*Er-je*Yr-_t*Sr)*jr,M[5]=(Z*Yr-Te*Er+Ie*Sr)*jr,M[6]=(kn*Wn-on*Tr-_n*Bn)*jr,M[7]=(Tt*Tr-Gt*Wn+Ut*Bn)*jr,M[8]=(je*zr-Je*Er+_t*vr)*jr,M[9]=(le*Er-Z*zr-Ie*vr)*jr,M[10]=(on*lr-cn*Wn+_n*Fn)*jr,M[11]=(zt*Wn-Tt*lr-Ut*Fn)*jr,M[12]=(Je*Sr-je*Xr-lt*vr)*jr,M[13]=(Z*Xr-le*Sr+Te*vr)*jr,M[14]=(cn*Bn-on*$n-kn*Fn)*jr,M[15]=(Tt*$n-zt*Bn+Gt*Fn)*jr,M):null},a.isChar=kr,a.isMapboxURL=ye,a.keysDifference=function(M,R){var Z=[];for(var le in M)le in R||Z.push(le);return Z},a.makeRequest=Ot,a.mapObject=_,a.mercatorXfromLng=m0,a.mercatorYfromLat=g0,a.mercatorZfromAltitude=v0,a.mul=jg,a.multiply=gp,a.mvt=_u,a.nextPowerOfTwo=function(M){return M<=1?1:Math.pow(2,Math.ceil(Math.log(M)/Math.LN2))},a.normalize=function(M,R){var Z=R[0],le=R[1],Te=R[2],Ie=Z*Z+le*le+Te*Te;return Ie>0&&(Ie=1/Math.sqrt(Ie)),M[0]=R[0]*Ie,M[1]=R[1]*Ie,M[2]=R[2]*Ie,M},a.number=Hr,a.offscreenCanvasSupported=yt,a.ortho=function(M,R,Z,le,Te,Ie,je){var Je=1/(R-Z),lt=1/(le-Te),_t=1/(Ie-je);return M[0]=-2*Je,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*lt,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*_t,M[11]=0,M[12]=(R+Z)*Je,M[13]=(Te+le)*lt,M[14]=(je+Ie)*_t,M[15]=1,M},a.parseGlyphPBF=function(M){return new Kf(M).readFields(U1,[])},a.pbf=Kf,a.performSymbolLayout=function(M,R,Z,le,Te,Ie,je){M.createArrays();var Je=512*M.overscaling;M.tilePixelRatio=pi/Je,M.compareText={},M.iconsNeedLinear=!1;var lt=M.layers[0].layout,_t=M.layers[0]._unevaluatedLayout._values,Tt={};if(M.textSizeData.kind==="composite"){var zt=M.textSizeData,Gt=zt.minZoom,Ut=zt.maxZoom;Tt.compositeTextSizes=[_t["text-size"].possiblyEvaluate(new ai(Gt),je),_t["text-size"].possiblyEvaluate(new ai(Ut),je)]}if(M.iconSizeData.kind==="composite"){var on=M.iconSizeData,cn=on.minZoom,kn=on.maxZoom;Tt.compositeIconSizes=[_t["icon-size"].possiblyEvaluate(new ai(cn),je),_t["icon-size"].possiblyEvaluate(new ai(kn),je)]}Tt.layoutTextSize=_t["text-size"].possiblyEvaluate(new ai(M.zoom+1),je),Tt.layoutIconSize=_t["icon-size"].possiblyEvaluate(new ai(M.zoom+1),je),Tt.textMaxSize=_t["text-size"].possiblyEvaluate(new ai(18));for(var _n=lt.get("text-line-height")*Ka,Fn=lt.get("text-rotation-alignment")==="map"&&lt.get("symbol-placement")!=="point",Bn=lt.get("text-keep-upright"),Wn=lt.get("text-size"),$n=function(){var vr=Tr[lr],Sr=lt.get("text-font").evaluate(vr,{},je).join(","),Er=Wn.evaluate(vr,{},je),Xr=Tt.layoutTextSize.evaluate(vr,{},je),zr=Tt.layoutIconSize.evaluate(vr,{},je),Yr={horizontal:{},vertical:void 0},jr=vr.text,Rr=[0,0];if(jr){var ui=jr.toString(),Qr=lt.get("text-letter-spacing").evaluate(vr,{},je)*Ka,Fi=function(ei){for(var mi=0,ga=ei;mi<ga.length;mi+=1)if(Oi=ga[mi].charCodeAt(0),kr.Arabic(Oi)||kr["Arabic Supplement"](Oi)||kr["Arabic Extended-A"](Oi)||kr["Arabic Presentation Forms-A"](Oi)||kr["Arabic Presentation Forms-B"](Oi))return!1;var Oi;return!0}(ui)?Qr:0,Wr=lt.get("text-anchor").evaluate(vr,{},je),Ii=lt.get("text-variable-anchor");if(!Ii){var qi=lt.get("text-radial-offset").evaluate(vr,{},je);Rr=qi?i0(Wr,[qi*Ka,kd]):lt.get("text-offset").evaluate(vr,{},je).map(function(ei){return ei*Ka})}var Ki=Fn?"center":lt.get("text-justify").evaluate(vr,{},je),Ji=lt.get("symbol-placement"),Bi=Ji==="point"?lt.get("text-max-width").evaluate(vr,{},je)*Ka:0,Ia=function(){M.allowVerticalPlacement&&Cl(ui)&&(Yr.vertical=Qf(jr,R,Z,Te,Sr,Bi,_n,Wr,"left",Fi,Rr,Es.vertical,!0,Ji,Xr,Er))};if(!Fn&&Ii){for(var aa=Ki==="auto"?Ii.map(function(ei){return Ad(ei)}):[Ki],Ga=!1,ao=0;ao<aa.length;ao++){var Ja=aa[ao];if(!Yr.horizontal[Ja])if(Ga)Yr.horizontal[Ja]=Yr.horizontal[0];else{var Io=Qf(jr,R,Z,Te,Sr,Bi,_n,"center",Ja,Fi,Rr,Es.horizontal,!1,Ji,Xr,Er);Io&&(Yr.horizontal[Ja]=Io,Ga=Io.positionedLines.length===1)}}Ia()}else{Ki==="auto"&&(Ki=Ad(Wr));var $a=Qf(jr,R,Z,Te,Sr,Bi,_n,Wr,Ki,Fi,Rr,Es.horizontal,!1,Ji,Xr,Er);$a&&(Yr.horizontal[Ki]=$a),Ia(),Cl(ui)&&Fn&&Bn&&(Yr.vertical=Qf(jr,R,Z,Te,Sr,Bi,_n,Wr,Ki,Fi,Rr,Es.vertical,!1,Ji,Xr,Er))}}var Ra=void 0,Qa=!1;if(vr.icon&&vr.icon.name){var qa=le[vr.icon.name];qa&&(Ra=function(ei,mi,ga){var Oi=wd(ga),la=Oi.horizontalAlign,ea=Oi.verticalAlign,xi=mi[0],va=mi[1],Po=xi-ei.displaySize[0]*la,ls=Po+ei.displaySize[0],vo=va-ei.displaySize[1]*ea;return{image:ei,top:vo,bottom:vo+ei.displaySize[1],left:Po,right:ls}}(Te[vr.icon.name],lt.get("icon-offset").evaluate(vr,{},je),lt.get("icon-anchor").evaluate(vr,{},je)),Qa=qa.sdf,M.sdfIcons===void 0?M.sdfIcons=qa.sdf:M.sdfIcons!==qa.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qa.pixelRatio!==M.pixelRatio||lt.get("icon-rotate").constantOr(1)!==0)&&(M.iconsNeedLinear=!0))}var za=o0(Yr.horizontal)||Yr.vertical;M.iconsInText=!!za&&za.iconsInText,(za||Ra)&&function(ei,mi,ga,Oi,la,ea,xi,va,Po,ls,vo){var Ol=ea.textMaxSize.evaluate(mi,{});Ol===void 0&&(Ol=xi);var yc,Wa=ei.layers[0].layout,Rl=Wa.get("icon-offset").evaluate(mi,{},vo),cl=o0(ga.horizontal),ul=24,au=xi/ul,ch=ei.tilePixelRatio*au,ou=ei.tilePixelRatio*Ol/ul,uh=ei.tilePixelRatio*va,mf=ei.tilePixelRatio*Wa.get("symbol-spacing"),Id=Wa.get("text-padding")*ei.tilePixelRatio,fh=Wa.get("icon-padding")*ei.tilePixelRatio,Ou=Wa.get("text-max-angle")/180*Math.PI,hh=Wa.get("text-rotation-alignment")==="map"&&Wa.get("symbol-placement")!=="point",dh=Wa.get("icon-rotation-alignment")==="map"&&Wa.get("symbol-placement")!=="point",gf=Wa.get("symbol-placement"),Pd=mf/2,vf=Wa.get("icon-text-fit");Oi&&vf!=="none"&&(ei.allowVerticalPlacement&&ga.vertical&&(yc=Yp(Oi,ga.vertical,vf,Wa.get("icon-text-fit-padding"),Rl,au)),cl&&(Oi=Yp(Oi,cl,vf,Wa.get("icon-text-fit-padding"),Rl,au)));var su=function(fv,Tf){Tf.x<0||Tf.x>=pi||Tf.y<0||Tf.y>=pi||function(Ta,zl,hv,Rc,Bd,M0,yh,Zl,xh,kf,bh,_h,Nd,S0,Af,C0,E0,L0,I0,P0,Ls,wh,D0,Kl,dv){var O0,uu,Fu,Bu,Nu,ju=Ta.addToLineVertexArray(zl,hv),R0=0,z0=0,F0=0,B0=0,jd=-1,Ud=-1,xc={},N0=Ar(""),Vd=0,Hd=0;if(Zl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Vd=(O0=Zl.layout.get("text-offset").evaluate(Ls,{},Kl).map(function(Sf){return Sf*Ka}))[0],Hd=O0[1]):(Vd=Zl.layout.get("text-radial-offset").evaluate(Ls,{},Kl)*Ka,Hd=kd),Ta.allowVerticalPlacement&&Rc.vertical){var j0=Zl.layout.get("text-rotate").evaluate(Ls,{},Kl)+90,pv=Rc.vertical;Bu=new ih(xh,zl,kf,bh,_h,pv,Nd,S0,Af,j0),yh&&(Nu=new ih(xh,zl,kf,bh,_h,yh,E0,L0,Af,j0))}if(Bd){var Gd=Zl.layout.get("icon-rotate").evaluate(Ls,{}),U0=Zl.layout.get("icon-text-fit")!=="none",V0=n0(Bd,Gd,D0,U0),qd=yh?n0(yh,Gd,D0,U0):void 0;Fu=new ih(xh,zl,kf,bh,_h,Bd,E0,L0,!1,Gd),R0=4*V0.length;var H0=Ta.iconSizeData,Mf=null;H0.kind==="source"?(Mf=[Dl*Zl.layout.get("icon-size").evaluate(Ls,{})])[0]>Dc&&E(Ta.layerIds[0]+': Value for "icon-size" is >= '+hf+'. Reduce your "icon-size".'):H0.kind==="composite"&&((Mf=[Dl*wh.compositeIconSizes[0].evaluate(Ls,{},Kl),Dl*wh.compositeIconSizes[1].evaluate(Ls,{},Kl)])[0]>Dc||Mf[1]>Dc)&&E(Ta.layerIds[0]+': Value for "icon-size" is >= '+hf+'. Reduce your "icon-size".'),Ta.addSymbols(Ta.icon,V0,Mf,P0,I0,Ls,!1,zl,ju.lineStartIndex,ju.lineLength,-1,Kl),jd=Ta.icon.placedSymbolArray.length-1,qd&&(z0=4*qd.length,Ta.addSymbols(Ta.icon,qd,Mf,P0,I0,Ls,Es.vertical,zl,ju.lineStartIndex,ju.lineLength,-1,Kl),Ud=Ta.icon.placedSymbolArray.length-1)}for(var G0 in Rc.horizontal){var Th=Rc.horizontal[G0];if(!uu){N0=Ar(Th.text);var mv=Zl.layout.get("text-rotate").evaluate(Ls,{},Kl);uu=new ih(xh,zl,kf,bh,_h,Th,Nd,S0,Af,mv)}var q0=Th.positionedLines.length===1;if(F0+=a0(Ta,zl,Th,M0,Zl,Af,Ls,C0,ju,Rc.vertical?Es.horizontal:Es.horizontalOnly,q0?Object.keys(Rc.horizontal):[G0],xc,jd,wh,Kl),q0)break}Rc.vertical&&(B0+=a0(Ta,zl,Rc.vertical,M0,Zl,Af,Ls,C0,ju,Es.vertical,["vertical"],xc,Ud,wh,Kl));var gv=uu?uu.boxStartIndex:Ta.collisionBoxArray.length,vv=uu?uu.boxEndIndex:Ta.collisionBoxArray.length,yv=Bu?Bu.boxStartIndex:Ta.collisionBoxArray.length,xv=Bu?Bu.boxEndIndex:Ta.collisionBoxArray.length,bv=Fu?Fu.boxStartIndex:Ta.collisionBoxArray.length,_v=Fu?Fu.boxEndIndex:Ta.collisionBoxArray.length,wv=Nu?Nu.boxStartIndex:Ta.collisionBoxArray.length,Tv=Nu?Nu.boxEndIndex:Ta.collisionBoxArray.length,Jl=-1,kh=function(Sf,Y0){return Sf&&Sf.circleDiameter?Math.max(Sf.circleDiameter,Y0):Y0};Jl=kh(uu,Jl),Jl=kh(Bu,Jl),Jl=kh(Fu,Jl);var W0=(Jl=kh(Nu,Jl))>-1?1:0;W0&&(Jl*=dv/Ka),Ta.glyphOffsetArray.length>=Li.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ls.sortKey!==void 0&&Ta.addToSortKeyRanges(Ta.symbolInstances.length,Ls.sortKey),Ta.symbolInstances.emplaceBack(zl.x,zl.y,xc.right>=0?xc.right:-1,xc.center>=0?xc.center:-1,xc.left>=0?xc.left:-1,xc.vertical||-1,jd,Ud,N0,gv,vv,yv,xv,bv,_v,wv,Tv,kf,F0,B0,R0,z0,W0,0,Nd,Vd,Hd,Jl)}(ei,Tf,fv,ga,Oi,la,yc,ei.layers[0],ei.collisionBoxArray,mi.index,mi.sourceLayerIndex,ei.index,ch,Id,hh,Po,uh,fh,dh,Rl,mi,ea,ls,vo,xi)};if(gf==="line")for(var Ru=0,ph=t0(mi.geometry,0,0,pi,pi);Ru<ph.length;Ru+=1)for(var mh=ph[Ru],zu=0,gh=X1(mh,mf,Ou,ga.vertical||cl,Oi,ul,ou,ei.overscaling,pi);zu<gh.length;zu+=1){var vh=gh[zu];cl&&$1(ei,cl.text,Pd,vh)||su(mh,vh)}else if(gf==="line-center")for(var yf=0,xf=mi.geometry;yf<xf.length;yf+=1){var lu=xf[yf];if(lu.length>1){var bf=Y1(lu,Ou,ga.vertical||cl,Oi,ul,ou);bf&&su(lu,bf)}}else if(mi.type==="Polygon")for(var cu=0,_f=md(mi.geometry,0);cu<_f.length;cu+=1){var wf=_f[cu],w0=K1(wf,16);su(wf[0],new Au(w0.x,w0.y,0))}else if(mi.type==="LineString")for(var Dd=0,T0=mi.geometry;Dd<T0.length;Dd+=1){var Od=T0[Dd];su(Od,new Au(Od[0].x,Od[0].y,0))}else if(mi.type==="Point")for(var Rd=0,k0=mi.geometry;Rd<k0.length;Rd+=1)for(var zd=0,A0=k0[Rd];zd<A0.length;zd+=1){var Fd=A0[zd];su([Fd],new Au(Fd.x,Fd.y,0))}}(M,vr,Yr,Ra,le,Tt,Xr,zr,Rr,Qa,je)},lr=0,Tr=M.features;lr<Tr.length;lr+=1)$n();Ie&&M.generateCollisionDebugBuffers()},a.perspective=function(M,R,Z,le,Te){var Ie,je=1/Math.tan(R/2);return M[0]=je/Z,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=je,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,Te!=null&&Te!==1/0?(Ie=1/(le-Te),M[10]=(Te+le)*Ie,M[14]=2*Te*le*Ie):(M[10]=-1,M[14]=-2*le),M},a.pick=function(M,R){for(var Z={},le=0;le<R.length;le++){var Te=R[le];Te in M&&(Z[Te]=M[Te])}return Z},a.plugin=Va,a.polygonIntersectsPolygon=eu,a.postMapLoadEvent=he,a.postTurnstileEvent=Pe,a.potpack=Vp,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=Lr,a.registerForPluginStateChange=function(M){return M({pluginStatus:si,pluginURL:_a}),Ua.on("pluginStateChange",M),M},a.renderColorRamp=bp,a.rotate=function(M,R,Z){var le=R[0],Te=R[1],Ie=R[2],je=R[3],Je=Math.sin(Z),lt=Math.cos(Z);return M[0]=le*lt+Ie*Je,M[1]=Te*lt+je*Je,M[2]=le*-Je+Ie*lt,M[3]=Te*-Je+je*lt,M},a.rotateX=function(M,R,Z){var le=Math.sin(Z),Te=Math.cos(Z),Ie=R[4],je=R[5],Je=R[6],lt=R[7],_t=R[8],Tt=R[9],zt=R[10],Gt=R[11];return R!==M&&(M[0]=R[0],M[1]=R[1],M[2]=R[2],M[3]=R[3],M[12]=R[12],M[13]=R[13],M[14]=R[14],M[15]=R[15]),M[4]=Ie*Te+_t*le,M[5]=je*Te+Tt*le,M[6]=Je*Te+zt*le,M[7]=lt*Te+Gt*le,M[8]=_t*Te-Ie*le,M[9]=Tt*Te-je*le,M[10]=zt*Te-Je*le,M[11]=Gt*Te-lt*le,M},a.rotateZ=function(M,R,Z){var le=Math.sin(Z),Te=Math.cos(Z),Ie=R[0],je=R[1],Je=R[2],lt=R[3],_t=R[4],Tt=R[5],zt=R[6],Gt=R[7];return R!==M&&(M[8]=R[8],M[9]=R[9],M[10]=R[10],M[11]=R[11],M[12]=R[12],M[13]=R[13],M[14]=R[14],M[15]=R[15]),M[0]=Ie*Te+_t*le,M[1]=je*Te+Tt*le,M[2]=Je*Te+zt*le,M[3]=lt*Te+Gt*le,M[4]=_t*Te-Ie*le,M[5]=Tt*Te-je*le,M[6]=zt*Te-Je*le,M[7]=Gt*Te-lt*le,M},a.scale=function(M,R,Z){var le=Z[0],Te=Z[1],Ie=Z[2];return M[0]=R[0]*le,M[1]=R[1]*le,M[2]=R[2]*le,M[3]=R[3]*le,M[4]=R[4]*Te,M[5]=R[5]*Te,M[6]=R[6]*Te,M[7]=R[7]*Te,M[8]=R[8]*Ie,M[9]=R[9]*Ie,M[10]=R[10]*Ie,M[11]=R[11]*Ie,M[12]=R[12],M[13]=R[13],M[14]=R[14],M[15]=R[15],M},a.scale$1=function(M,R,Z){return M[0]=R[0]*Z,M[1]=R[1]*Z,M[2]=R[2]*Z,M[3]=R[3]*Z,M},a.scale$2=function(M,R,Z){return M[0]=R[0]*Z,M[1]=R[1]*Z,M[2]=R[2]*Z,M},a.setCacheLimits=function(M,R){Ae=M,Oe=R},a.setRTLTextPlugin=function(M,R,Z){if(Z===void 0&&(Z=!1),si===jo||si===mo||si===rs)throw new Error("setRTLTextPlugin cannot be called multiple times.");_a=J.resolveURL(M),si=jo,Ms=R,Uo(),Z||il()},a.sphericalToCartesian=function(M){var R=M[0],Z=M[1],le=M[2];return Z+=90,Z*=Math.PI/180,le*=Math.PI/180,{x:R*Math.cos(Z)*Math.sin(le),y:R*Math.sin(Z)*Math.sin(le),z:R*Math.cos(le)}},a.sqrLen=Vg,a.styleSpec=We,a.sub=Ug,a.symbolSize=W1,a.transformMat3=function(M,R,Z){var le=R[0],Te=R[1],Ie=R[2];return M[0]=le*Z[0]+Te*Z[3]+Ie*Z[6],M[1]=le*Z[1]+Te*Z[4]+Ie*Z[7],M[2]=le*Z[2]+Te*Z[5]+Ie*Z[8],M},a.transformMat4=qf,a.translate=function(M,R,Z){var le,Te,Ie,je,Je,lt,_t,Tt,zt,Gt,Ut,on,cn=Z[0],kn=Z[1],_n=Z[2];return R===M?(M[12]=R[0]*cn+R[4]*kn+R[8]*_n+R[12],M[13]=R[1]*cn+R[5]*kn+R[9]*_n+R[13],M[14]=R[2]*cn+R[6]*kn+R[10]*_n+R[14],M[15]=R[3]*cn+R[7]*kn+R[11]*_n+R[15]):(le=R[0],Te=R[1],Ie=R[2],je=R[3],Je=R[4],lt=R[5],_t=R[6],Tt=R[7],zt=R[8],Gt=R[9],Ut=R[10],on=R[11],M[0]=le,M[1]=Te,M[2]=Ie,M[3]=je,M[4]=Je,M[5]=lt,M[6]=_t,M[7]=Tt,M[8]=zt,M[9]=Gt,M[10]=Ut,M[11]=on,M[12]=le*cn+Je*kn+zt*_n+R[12],M[13]=Te*cn+lt*kn+Gt*_n+R[13],M[14]=Ie*cn+_t*kn+Ut*_n+R[14],M[15]=je*cn+Tt*kn+on*_n+R[15]),M},a.triggerPluginCompletionEvent=ja,a.uniqueId=p,a.validateCustomStyleLayer=function(M){var R=[],Z=M.id;return Z===void 0&&R.push({message:"layers."+Z+': missing required property "id"'}),M.render===void 0&&R.push({message:"layers."+Z+': missing required method "render"'}),M.renderingMode&&M.renderingMode!=="2d"&&M.renderingMode!=="3d"&&R.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),R},a.validateLight=Hs,a.validateStyle=No,a.values=function(M){var R=[];for(var Z in M)R.push(M[Z]);return R},a.vectorTile=_u,a.version=b,a.warnOnce=E,a.webpSupported=X,a.window=r,a.wrap=d}),k(0,function(a){function w(Ge){var Xe=typeof Ge;if(Xe==="number"||Xe==="boolean"||Xe==="string"||Ge==null)return JSON.stringify(Ge);if(Array.isArray(Ge)){for(var Ne="[",Ye=0,ot=Ge;Ye<ot.length;Ye+=1)Ne+=w(ot[Ye])+",";return Ne+"]"}for(var nt=Object.keys(Ge).sort(),ze="{",Fe=0;Fe<nt.length;Fe++)ze+=JSON.stringify(nt[Fe])+":"+w(Ge[nt[Fe]])+",";return ze+"}"}function b(Ge){for(var Xe="",Ne=0,Ye=a.refProperties;Ne<Ye.length;Ne+=1)Xe+="/"+w(Ge[Ye[Ne]]);return Xe}var f=function(Ge){this.keyCache={},Ge&&this.replace(Ge)};f.prototype.replace=function(Ge){this._layerConfigs={},this._layers={},this.update(Ge,[])},f.prototype.update=function(Ge,Xe){for(var Ne=this,Ye=0,ot=Ge;Ye<ot.length;Ye+=1){var nt=ot[Ye];this._layerConfigs[nt.id]=nt;var ze=this._layers[nt.id]=a.createStyleLayer(nt);ze._featureFilter=a.featureFilter(ze.filter),this.keyCache[nt.id]&&delete this.keyCache[nt.id]}for(var Fe=0,rt=Xe;Fe<rt.length;Fe+=1){var We=rt[Fe];delete this.keyCache[We],delete this._layerConfigs[We],delete this._layers[We]}this.familiesBySource={};for(var ft=0,mt=function(Dt,Ft){for(var Xt={},an=0;an<Dt.length;an++){var Ht=Ft&&Ft[Dt[an].id]||b(Dt[an]);Ft&&(Ft[Dt[an].id]=Ht);var Zt=Xt[Ht];Zt||(Zt=Xt[Ht]=[]),Zt.push(Dt[an])}var jt=[];for(var Pn in Xt)jt.push(Xt[Pn]);return jt}(a.values(this._layerConfigs),this.keyCache);ft<mt.length;ft+=1){var vt=mt[ft].map(function(Dt){return Ne._layers[Dt.id]}),ut=vt[0];if(ut.visibility!=="none"){var Mt=ut.source||"",bt=this.familiesBySource[Mt];bt||(bt=this.familiesBySource[Mt]={});var St=ut.sourceLayer||"_geojsonTileLayer",Pt=bt[St];Pt||(Pt=bt[St]=[]),Pt.push(vt)}}};var s=function(Ge){var Xe={},Ne=[];for(var Ye in Ge){var ot=Ge[Ye],nt=Xe[Ye]={};for(var ze in ot){var Fe=ot[+ze];if(Fe&&Fe.bitmap.width!==0&&Fe.bitmap.height!==0){var rt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};Ne.push(rt),nt[ze]={rect:rt,metrics:Fe.metrics}}}}var We=a.potpack(Ne),ft=We.w,mt=We.h,vt=new a.AlphaImage({width:ft||1,height:mt||1});for(var ut in Ge){var Mt=Ge[ut];for(var bt in Mt){var St=Mt[+bt];if(St&&St.bitmap.width!==0&&St.bitmap.height!==0){var Pt=Xe[ut][bt].rect;a.AlphaImage.copy(St.bitmap,vt,{x:0,y:0},{x:Pt.x+1,y:Pt.y+1},St.bitmap)}}}this.image=vt,this.positions=Xe};a.register("GlyphAtlas",s);var t=function(Ge){this.tileID=new a.OverscaledTileID(Ge.tileID.overscaledZ,Ge.tileID.wrap,Ge.tileID.canonical.z,Ge.tileID.canonical.x,Ge.tileID.canonical.y),this.uid=Ge.uid,this.zoom=Ge.zoom,this.pixelRatio=Ge.pixelRatio,this.tileSize=Ge.tileSize,this.source=Ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ge.showCollisionBoxes,this.collectResourceTiming=!!Ge.collectResourceTiming,this.returnDependencies=!!Ge.returnDependencies,this.promoteId=Ge.promoteId};function i(Ge,Xe,Ne){for(var Ye=new a.EvaluationParameters(Xe),ot=0,nt=Ge;ot<nt.length;ot+=1)nt[ot].recalculate(Ye,Ne)}function r(Ge,Xe){var Ne=a.getArrayBuffer(Ge.request,function(Ye,ot,nt,ze){Ye?Xe(Ye):ot&&Xe(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(ot)),rawData:ot,cacheControl:nt,expires:ze})});return function(){Ne.cancel(),Xe()}}t.prototype.parse=function(Ge,Xe,Ne,Ye,ot){var nt=this;this.status="parsing",this.data=Ge,this.collisionBoxArray=new a.CollisionBoxArray;var ze=new a.DictionaryCoder(Object.keys(Ge.layers).sort()),Fe=new a.FeatureIndex(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];var rt,We,ft,mt,vt={},ut={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ne},Mt=Xe.familiesBySource[this.source];for(var bt in Mt){var St=Ge.layers[bt];if(St){St.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+bt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pt=ze.encode(bt),Dt=[],Ft=0;Ft<St.length;Ft++){var Xt=St.feature(Ft),an=Fe.getId(Xt,bt);Dt.push({feature:Xt,id:an,index:Ft,sourceLayerIndex:Pt})}for(var Ht=0,Zt=Mt[bt];Ht<Zt.length;Ht+=1){var jt=Zt[Ht],Pn=jt[0];Pn.minzoom&&this.zoom<Math.floor(Pn.minzoom)||Pn.maxzoom&&this.zoom>=Pn.maxzoom||Pn.visibility!=="none"&&(i(jt,this.zoom,Ne),(vt[Pn.id]=Pn.createBucket({index:Fe.bucketLayerIDs.length,layers:jt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pt,sourceID:this.source})).populate(Dt,ut,this.tileID.canonical),Fe.bucketLayerIDs.push(jt.map(function(nn){return nn.id})))}}}var Tn=a.mapObject(ut.glyphDependencies,function(nn){return Object.keys(nn).map(Number)});Object.keys(Tn).length?Ye.send("getGlyphs",{uid:this.uid,stacks:Tn},function(nn,hn){rt||(rt=nn,We=hn,un.call(nt))}):We={};var mn=Object.keys(ut.iconDependencies);mn.length?Ye.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"icons"},function(nn,hn){rt||(rt=nn,ft=hn,un.call(nt))}):ft={};var Qt=Object.keys(ut.patternDependencies);function un(){if(rt)return ot(rt);if(We&&ft&&mt){var nn=new s(We),hn=new a.ImageAtlas(ft,mt);for(var bn in vt){var wn=vt[bn];wn instanceof a.SymbolBucket?(i(wn.layers,this.zoom,Ne),a.performSymbolLayout(wn,We,nn.positions,ft,hn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wn.hasPattern&&(wn instanceof a.LineBucket||wn instanceof a.FillBucket||wn instanceof a.FillExtrusionBucket)&&(i(wn.layers,this.zoom,Ne),wn.addFeatures(ut,this.tileID.canonical,hn.patternPositions))}this.status="done",ot(null,{buckets:a.values(vt).filter(function(Cn){return!Cn.isEmpty()}),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nn.image,imageAtlas:hn,glyphMap:this.returnDependencies?We:null,iconMap:this.returnDependencies?ft:null,glyphPositions:this.returnDependencies?nn.positions:null})}}Qt.length?Ye.send("getImages",{icons:Qt,source:this.source,tileID:this.tileID,type:"patterns"},function(nn,hn){rt||(rt=nn,mt=hn,un.call(nt))}):mt={},un.call(this)};var n=function(Ge,Xe,Ne,Ye){this.actor=Ge,this.layerIndex=Xe,this.availableImages=Ne,this.loadVectorData=Ye||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ge,Xe){var Ne=this,Ye=Ge.uid;this.loading||(this.loading={});var ot=!!(Ge&&Ge.request&&Ge.request.collectResourceTiming)&&new a.RequestPerformance(Ge.request),nt=this.loading[Ye]=new t(Ge);nt.abort=this.loadVectorData(Ge,function(ze,Fe){if(delete Ne.loading[Ye],ze||!Fe)return nt.status="done",Ne.loaded[Ye]=nt,Xe(ze);var rt=Fe.rawData,We={};Fe.expires&&(We.expires=Fe.expires),Fe.cacheControl&&(We.cacheControl=Fe.cacheControl);var ft={};if(ot){var mt=ot.finish();mt&&(ft.resourceTiming=JSON.parse(JSON.stringify(mt)))}nt.vectorTile=Fe.vectorTile,nt.parse(Fe.vectorTile,Ne.layerIndex,Ne.availableImages,Ne.actor,function(vt,ut){if(vt||!ut)return Xe(vt);Xe(null,a.extend({rawTileData:rt.slice(0)},ut,We,ft))}),Ne.loaded=Ne.loaded||{},Ne.loaded[Ye]=nt})},n.prototype.reloadTile=function(Ge,Xe){var Ne=this,Ye=this.loaded,ot=Ge.uid,nt=this;if(Ye&&Ye[ot]){var ze=Ye[ot];ze.showCollisionBoxes=Ge.showCollisionBoxes;var Fe=function(rt,We){var ft=ze.reloadCallback;ft&&(delete ze.reloadCallback,ze.parse(ze.vectorTile,nt.layerIndex,Ne.availableImages,nt.actor,ft)),Xe(rt,We)};ze.status==="parsing"?ze.reloadCallback=Fe:ze.status==="done"&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,Fe):Fe())}},n.prototype.abortTile=function(Ge,Xe){var Ne=this.loading,Ye=Ge.uid;Ne&&Ne[Ye]&&Ne[Ye].abort&&(Ne[Ye].abort(),delete Ne[Ye]),Xe()},n.prototype.removeTile=function(Ge,Xe){var Ne=this.loaded,Ye=Ge.uid;Ne&&Ne[Ye]&&delete Ne[Ye],Xe()};var o=a.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(Ge,Xe){var Ne=Ge.uid,Ye=Ge.encoding,ot=Ge.rawImageData,nt=o&&ot instanceof o?this.getImageData(ot):ot,ze=new a.DEMData(Ne,nt,Ye);this.loaded=this.loaded||{},this.loaded[Ne]=ze,Xe(null,ze)},l.prototype.getImageData=function(Ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ge.width,Ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ge.width,this.offscreenCanvas.height=Ge.height,this.offscreenCanvasContext.drawImage(Ge,0,0,Ge.width,Ge.height);var Xe=this.offscreenCanvasContext.getImageData(-1,-1,Ge.width+2,Ge.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Xe.width,height:Xe.height},Xe.data)},l.prototype.removeTile=function(Ge){var Xe=this.loaded,Ne=Ge.uid;Xe&&Xe[Ne]&&delete Xe[Ne]};var c=function Ge(Xe,Ne){var Ye,ot=Xe&&Xe.type;if(ot==="FeatureCollection")for(Ye=0;Ye<Xe.features.length;Ye++)Ge(Xe.features[Ye],Ne);else if(ot==="GeometryCollection")for(Ye=0;Ye<Xe.geometries.length;Ye++)Ge(Xe.geometries[Ye],Ne);else if(ot==="Feature")Ge(Xe.geometry,Ne);else if(ot==="Polygon")d(Xe.coordinates,Ne);else if(ot==="MultiPolygon")for(Ye=0;Ye<Xe.coordinates.length;Ye++)d(Xe.coordinates[Ye],Ne);return Xe};function d(Ge,Xe){if(Ge.length!==0){u(Ge[0],Xe);for(var Ne=1;Ne<Ge.length;Ne++)u(Ge[Ne],!Xe)}}function u(Ge,Xe){for(var Ne=0,Ye=0,ot=Ge.length,nt=ot-1;Ye<ot;nt=Ye++)Ne+=(Ge[Ye][0]-Ge[nt][0])*(Ge[nt][1]+Ge[Ye][1]);Ne>=0!=!!Xe&&Ge.reverse()}var x=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(Ge){this._feature=Ge,this.extent=a.EXTENT,this.type=Ge.type,this.properties=Ge.tags,"id"in Ge&&!isNaN(Ge.id)&&(this.id=parseInt(Ge.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ge=[],Xe=0,Ne=this._feature.geometry;Xe<Ne.length;Xe+=1){var Ye=Ne[Xe];Ge.push([new a.Point$1(Ye[0],Ye[1])])}return Ge}for(var ot=[],nt=0,ze=this._feature.geometry;nt<ze.length;nt+=1){for(var Fe=[],rt=0,We=ze[nt];rt<We.length;rt+=1){var ft=We[rt];Fe.push(new a.Point$1(ft[0],ft[1]))}ot.push(Fe)}return ot},p.prototype.toGeoJSON=function(Ge,Xe,Ne){return x.call(this,Ge,Xe,Ne)};var g=function(Ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Ge.length,this._features=Ge};g.prototype.feature=function(Ge){return new p(this._features[Ge])};var m=a.vectorTile.VectorTileFeature,y=v;function v(Ge,Xe){this.options=Xe||{},this.features=Ge,this.length=Ge.length}function _(Ge,Xe){this.id=typeof Ge.id=="number"?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=Ge.type===1?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=Xe||4096}v.prototype.feature=function(Ge){return new _(this.features[Ge],this.options.extent)},_.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var Xe=0;Xe<Ge.length;Xe++){for(var Ne=Ge[Xe],Ye=[],ot=0;ot<Ne.length;ot++)Ye.push(new a.Point$1(Ne[ot][0],Ne[ot][1]));this.geometry.push(Ye)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,Xe=1/0,Ne=-1/0,Ye=1/0,ot=-1/0,nt=0;nt<Ge.length;nt++)for(var ze=Ge[nt],Fe=0;Fe<ze.length;Fe++){var rt=ze[Fe];Xe=Math.min(Xe,rt.x),Ne=Math.max(Ne,rt.x),Ye=Math.min(Ye,rt.y),ot=Math.max(ot,rt.y)}return[Xe,Ye,Ne,ot]},_.prototype.toGeoJSON=m.prototype.toGeoJSON;var h=P,S=P,A=function(Ge,Xe){Xe=Xe||{};var Ne={};for(var Ye in Ge)Ne[Ye]=new y(Ge[Ye].features,Xe),Ne[Ye].name=Ye,Ne[Ye].version=Xe.version,Ne[Ye].extent=Xe.extent;return P({layers:Ne})},E=y;function P(Ge){var Xe=new a.pbf;return function(Ne,Ye){for(var ot in Ne.layers)Ye.writeMessage(3,I,Ne.layers[ot])}(Ge,Xe),Xe.finish()}function I(Ge,Xe){var Ne;Xe.writeVarintField(15,Ge.version||1),Xe.writeStringField(1,Ge.name||""),Xe.writeVarintField(5,Ge.extent||4096);var Ye={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<Ge.length;Ne++)Ye.feature=Ge.feature(Ne),Xe.writeMessage(2,D,Ye);var ot=Ye.keys;for(Ne=0;Ne<ot.length;Ne++)Xe.writeStringField(3,ot[Ne]);var nt=Ye.values;for(Ne=0;Ne<nt.length;Ne++)Xe.writeMessage(4,Y,nt[Ne])}function D(Ge,Xe){var Ne=Ge.feature;Ne.id!==void 0&&Xe.writeVarintField(1,Ne.id),Xe.writeMessage(2,z,Ge),Xe.writeVarintField(3,Ne.type),Xe.writeMessage(4,j,Ne)}function z(Ge,Xe){var Ne=Ge.feature,Ye=Ge.keys,ot=Ge.values,nt=Ge.keycache,ze=Ge.valuecache;for(var Fe in Ne.properties){var rt=nt[Fe];rt===void 0&&(Ye.push(Fe),rt=Ye.length-1,nt[Fe]=rt),Xe.writeVarint(rt);var We=Ne.properties[Fe],ft=typeof We;ft!=="string"&&ft!=="boolean"&&ft!=="number"&&(We=JSON.stringify(We));var mt=ft+":"+We,vt=ze[mt];vt===void 0&&(ot.push(We),vt=ot.length-1,ze[mt]=vt),Xe.writeVarint(vt)}}function V(Ge,Xe){return(Xe<<3)+(7&Ge)}function O(Ge){return Ge<<1^Ge>>31}function j(Ge,Xe){for(var Ne=Ge.loadGeometry(),Ye=Ge.type,ot=0,nt=0,ze=Ne.length,Fe=0;Fe<ze;Fe++){var rt=Ne[Fe],We=1;Ye===1&&(We=rt.length),Xe.writeVarint(V(1,We));for(var ft=Ye===3?rt.length-1:rt.length,mt=0;mt<ft;mt++){mt===1&&Ye!==1&&Xe.writeVarint(V(2,ft-1));var vt=rt[mt].x-ot,ut=rt[mt].y-nt;Xe.writeVarint(O(vt)),Xe.writeVarint(O(ut)),ot+=vt,nt+=ut}Ye===3&&Xe.writeVarint(V(7,1))}}function Y(Ge,Xe){var Ne=typeof Ge;Ne==="string"?Xe.writeStringField(1,Ge):Ne==="boolean"?Xe.writeBooleanField(7,Ge):Ne==="number"&&(Ge%1!=0?Xe.writeDoubleField(3,Ge):Ge<0?Xe.writeSVarintField(6,Ge):Xe.writeVarintField(5,Ge))}function B(Ge,Xe,Ne,Ye,ot,nt){if(!(ot-Ye<=Ne)){var ze=Ye+ot>>1;U(Ge,Xe,ze,Ye,ot,nt%2),B(Ge,Xe,Ne,Ye,ze-1,nt+1),B(Ge,Xe,Ne,ze+1,ot,nt+1)}}function U(Ge,Xe,Ne,Ye,ot,nt){for(;ot>Ye;){if(ot-Ye>600){var ze=ot-Ye+1,Fe=Ne-Ye+1,rt=Math.log(ze),We=.5*Math.exp(2*rt/3),ft=.5*Math.sqrt(rt*We*(ze-We)/ze)*(Fe-ze/2<0?-1:1);U(Ge,Xe,Ne,Math.max(Ye,Math.floor(Ne-Fe*We/ze+ft)),Math.min(ot,Math.floor(Ne+(ze-Fe)*We/ze+ft)),nt)}var mt=Xe[2*Ne+nt],vt=Ye,ut=ot;for(q(Ge,Xe,Ye,Ne),Xe[2*ot+nt]>mt&&q(Ge,Xe,Ye,ot);vt<ut;){for(q(Ge,Xe,vt,ut),vt++,ut--;Xe[2*vt+nt]<mt;)vt++;for(;Xe[2*ut+nt]>mt;)ut--}Xe[2*Ye+nt]===mt?q(Ge,Xe,Ye,ut):q(Ge,Xe,++ut,ot),ut<=Ne&&(Ye=ut+1),Ne<=ut&&(ot=ut-1)}}function q(Ge,Xe,Ne,Ye){te(Ge,Ne,Ye),te(Xe,2*Ne,2*Ye),te(Xe,2*Ne+1,2*Ye+1)}function te(Ge,Xe,Ne){var Ye=Ge[Xe];Ge[Xe]=Ge[Ne],Ge[Ne]=Ye}function ee(Ge,Xe,Ne,Ye){var ot=Ge-Ne,nt=Xe-Ye;return ot*ot+nt*nt}h.fromVectorTileJs=S,h.fromGeojsonVt=A,h.GeoJSONWrapper=E;var Q=function(Ge){return Ge[0]},J=function(Ge){return Ge[1]},K=function(Ge,Xe,Ne,Ye,ot){Xe===void 0&&(Xe=Q),Ne===void 0&&(Ne=J),Ye===void 0&&(Ye=64),ot===void 0&&(ot=Float64Array),this.nodeSize=Ye,this.points=Ge;for(var nt=Ge.length<65536?Uint16Array:Uint32Array,ze=this.ids=new nt(Ge.length),Fe=this.coords=new ot(2*Ge.length),rt=0;rt<Ge.length;rt++)ze[rt]=rt,Fe[2*rt]=Xe(Ge[rt]),Fe[2*rt+1]=Ne(Ge[rt]);B(ze,Fe,Ye,0,ze.length-1,0)};K.prototype.range=function(Ge,Xe,Ne,Ye){return function(ot,nt,ze,Fe,rt,We,ft){for(var mt,vt,ut=[0,ot.length-1,0],Mt=[];ut.length;){var bt=ut.pop(),St=ut.pop(),Pt=ut.pop();if(St-Pt<=ft)for(var Dt=Pt;Dt<=St;Dt++)mt=nt[2*Dt],vt=nt[2*Dt+1],mt>=ze&&mt<=rt&&vt>=Fe&&vt<=We&&Mt.push(ot[Dt]);else{var Ft=Math.floor((Pt+St)/2);mt=nt[2*Ft],vt=nt[2*Ft+1],mt>=ze&&mt<=rt&&vt>=Fe&&vt<=We&&Mt.push(ot[Ft]);var Xt=(bt+1)%2;(bt===0?ze<=mt:Fe<=vt)&&(ut.push(Pt),ut.push(Ft-1),ut.push(Xt)),(bt===0?rt>=mt:We>=vt)&&(ut.push(Ft+1),ut.push(St),ut.push(Xt))}}return Mt}(this.ids,this.coords,Ge,Xe,Ne,Ye,this.nodeSize)},K.prototype.within=function(Ge,Xe,Ne){return function(Ye,ot,nt,ze,Fe,rt){for(var We=[0,Ye.length-1,0],ft=[],mt=Fe*Fe;We.length;){var vt=We.pop(),ut=We.pop(),Mt=We.pop();if(ut-Mt<=rt)for(var bt=Mt;bt<=ut;bt++)ee(ot[2*bt],ot[2*bt+1],nt,ze)<=mt&&ft.push(Ye[bt]);else{var St=Math.floor((Mt+ut)/2),Pt=ot[2*St],Dt=ot[2*St+1];ee(Pt,Dt,nt,ze)<=mt&&ft.push(Ye[St]);var Ft=(vt+1)%2;(vt===0?nt-Fe<=Pt:ze-Fe<=Dt)&&(We.push(Mt),We.push(St-1),We.push(Ft)),(vt===0?nt+Fe>=Pt:ze+Fe>=Dt)&&(We.push(St+1),We.push(ut),We.push(Ft))}}return ft}(this.ids,this.coords,Ge,Xe,Ne,this.nodeSize)};var X={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ge){return Ge}},ie=function(Ge){this.options=de(Object.create(X),Ge),this.trees=new Array(this.options.maxZoom+1)};function se(Ge,Xe,Ne,Ye,ot){return{x:Ge,y:Xe,zoom:1/0,id:Ne,parentId:-1,numPoints:Ye,properties:ot}}function ae(Ge,Xe){var Ne=Ge.geometry.coordinates,Ye=Ne[0],ot=Ne[1];return{x:ye(Ye),y:pe(ot),zoom:1/0,index:Xe,parentId:-1}}function ue(Ge){return{type:"Feature",id:Ge.id,properties:ve(Ge),geometry:{type:"Point",coordinates:[(Ye=Ge.x,360*(Ye-.5)),(Xe=Ge.y,Ne=(180-360*Xe)*Math.PI/180,360*Math.atan(Math.exp(Ne))/Math.PI-90)]}};var Xe,Ne,Ye}function ve(Ge){var Xe=Ge.numPoints,Ne=Xe>=1e4?Math.round(Xe/1e3)+"k":Xe>=1e3?Math.round(Xe/100)/10+"k":Xe;return de(de({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:Xe,point_count_abbreviated:Ne})}function ye(Ge){return Ge/360+.5}function pe(Ge){var Xe=Math.sin(Ge*Math.PI/180),Ne=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function de(Ge,Xe){for(var Ne in Xe)Ge[Ne]=Xe[Ne];return Ge}function me(Ge){return Ge.x}function ke(Ge){return Ge.y}function Ce(Ge,Xe,Ne,Ye){for(var ot,nt=Ye,ze=Ne-Xe>>1,Fe=Ne-Xe,rt=Ge[Xe],We=Ge[Xe+1],ft=Ge[Ne],mt=Ge[Ne+1],vt=Xe+3;vt<Ne;vt+=3){var ut=ge(Ge[vt],Ge[vt+1],rt,We,ft,mt);if(ut>nt)ot=vt,nt=ut;else if(ut===nt){var Mt=Math.abs(vt-ze);Mt<Fe&&(ot=vt,Fe=Mt)}}nt>Ye&&(ot-Xe>3&&Ce(Ge,Xe,ot,Ye),Ge[ot+2]=nt,Ne-ot>3&&Ce(Ge,ot,Ne,Ye))}function ge(Ge,Xe,Ne,Ye,ot,nt){var ze=ot-Ne,Fe=nt-Ye;if(ze!==0||Fe!==0){var rt=((Ge-Ne)*ze+(Xe-Ye)*Fe)/(ze*ze+Fe*Fe);rt>1?(Ne=ot,Ye=nt):rt>0&&(Ne+=ze*rt,Ye+=Fe*rt)}return(ze=Ge-Ne)*ze+(Fe=Xe-Ye)*Fe}function oe(Ge,Xe,Ne,Ye){var ot={id:Ge===void 0?null:Ge,type:Xe,geometry:Ne,tags:Ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(nt){var ze=nt.geometry,Fe=nt.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")re(nt,ze);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var rt=0;rt<ze.length;rt++)re(nt,ze[rt]);else if(Fe==="MultiPolygon")for(rt=0;rt<ze.length;rt++)for(var We=0;We<ze[rt].length;We++)re(nt,ze[rt][We])}(ot),ot}function re(Ge,Xe){for(var Ne=0;Ne<Xe.length;Ne+=3)Ge.minX=Math.min(Ge.minX,Xe[Ne]),Ge.minY=Math.min(Ge.minY,Xe[Ne+1]),Ge.maxX=Math.max(Ge.maxX,Xe[Ne]),Ge.maxY=Math.max(Ge.maxY,Xe[Ne+1])}function fe(Ge,Xe,Ne,Ye){if(Xe.geometry){var ot=Xe.geometry.coordinates,nt=Xe.geometry.type,ze=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),Fe=[],rt=Xe.id;if(Ne.promoteId?rt=Xe.properties[Ne.promoteId]:Ne.generateId&&(rt=Ye||0),nt==="Point")Se(ot,Fe);else if(nt==="MultiPoint")for(var We=0;We<ot.length;We++)Se(ot[We],Fe);else if(nt==="LineString")be(ot,Fe,ze,!1);else if(nt==="MultiLineString"){if(Ne.lineMetrics){for(We=0;We<ot.length;We++)Fe=[],be(ot[We],Fe,ze,!1),Ge.push(oe(rt,"LineString",Fe,Xe.properties));return}we(ot,Fe,ze,!1)}else if(nt==="Polygon")we(ot,Fe,ze,!0);else{if(nt!=="MultiPolygon"){if(nt==="GeometryCollection"){for(We=0;We<Xe.geometry.geometries.length;We++)fe(Ge,{id:rt,geometry:Xe.geometry.geometries[We],properties:Xe.properties},Ne,Ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(We=0;We<ot.length;We++){var ft=[];we(ot[We],ft,ze,!0),Fe.push(ft)}}Ge.push(oe(rt,nt,Fe,Xe.properties))}}function Se(Ge,Xe){Xe.push(Me(Ge[0])),Xe.push(Pe(Ge[1])),Xe.push(0)}function be(Ge,Xe,Ne,Ye){for(var ot,nt,ze=0,Fe=0;Fe<Ge.length;Fe++){var rt=Me(Ge[Fe][0]),We=Pe(Ge[Fe][1]);Xe.push(rt),Xe.push(We),Xe.push(0),Fe>0&&(ze+=Ye?(ot*We-rt*nt)/2:Math.sqrt(Math.pow(rt-ot,2)+Math.pow(We-nt,2))),ot=rt,nt=We}var ft=Xe.length-3;Xe[2]=1,Ce(Xe,0,ft,Ne),Xe[ft+2]=1,Xe.size=Math.abs(ze),Xe.start=0,Xe.end=Xe.size}function we(Ge,Xe,Ne,Ye){for(var ot=0;ot<Ge.length;ot++){var nt=[];be(Ge[ot],nt,Ne,Ye),Xe.push(nt)}}function Me(Ge){return Ge/360+.5}function Pe(Ge){var Xe=Math.sin(Ge*Math.PI/180),Ne=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function De(Ge,Xe,Ne,Ye,ot,nt,ze,Fe){if(Ye/=Xe,nt>=(Ne/=Xe)&&ze<Ye)return Ge;if(ze<Ne||nt>=Ye)return null;for(var rt=[],We=0;We<Ge.length;We++){var ft=Ge[We],mt=ft.geometry,vt=ft.type,ut=ot===0?ft.minX:ft.minY,Mt=ot===0?ft.maxX:ft.maxY;if(ut>=Ne&&Mt<Ye)rt.push(ft);else if(!(Mt<Ne||ut>=Ye)){var bt=[];if(vt==="Point"||vt==="MultiPoint")he(mt,bt,Ne,Ye,ot);else if(vt==="LineString")_e(mt,bt,Ne,Ye,ot,!1,Fe.lineMetrics);else if(vt==="MultiLineString")Oe(mt,bt,Ne,Ye,ot,!1);else if(vt==="Polygon")Oe(mt,bt,Ne,Ye,ot,!0);else if(vt==="MultiPolygon")for(var St=0;St<mt.length;St++){var Pt=[];Oe(mt[St],Pt,Ne,Ye,ot,!0),Pt.length&&bt.push(Pt)}if(bt.length){if(Fe.lineMetrics&&vt==="LineString"){for(St=0;St<bt.length;St++)rt.push(oe(ft.id,vt,bt[St],ft.tags));continue}vt!=="LineString"&&vt!=="MultiLineString"||(bt.length===1?(vt="LineString",bt=bt[0]):vt="MultiLineString"),vt!=="Point"&&vt!=="MultiPoint"||(vt=bt.length===3?"Point":"MultiPoint"),rt.push(oe(ft.id,vt,bt,ft.tags))}}}return rt.length?rt:null}function he(Ge,Xe,Ne,Ye,ot){for(var nt=0;nt<Ge.length;nt+=3){var ze=Ge[nt+ot];ze>=Ne&&ze<=Ye&&(Xe.push(Ge[nt]),Xe.push(Ge[nt+1]),Xe.push(Ge[nt+2]))}}function _e(Ge,Xe,Ne,Ye,ot,nt,ze){for(var Fe,rt,We=Ae(Ge),ft=ot===0?Be:Ve,mt=Ge.start,vt=0;vt<Ge.length-3;vt+=3){var ut=Ge[vt],Mt=Ge[vt+1],bt=Ge[vt+2],St=Ge[vt+3],Pt=Ge[vt+4],Dt=ot===0?ut:Mt,Ft=ot===0?St:Pt,Xt=!1;ze&&(Fe=Math.sqrt(Math.pow(ut-St,2)+Math.pow(Mt-Pt,2))),Dt<Ne?Ft>Ne&&(rt=ft(We,ut,Mt,St,Pt,Ne),ze&&(We.start=mt+Fe*rt)):Dt>Ye?Ft<Ye&&(rt=ft(We,ut,Mt,St,Pt,Ye),ze&&(We.start=mt+Fe*rt)):Ee(We,ut,Mt,bt),Ft<Ne&&Dt>=Ne&&(rt=ft(We,ut,Mt,St,Pt,Ne),Xt=!0),Ft>Ye&&Dt<=Ye&&(rt=ft(We,ut,Mt,St,Pt,Ye),Xt=!0),!nt&&Xt&&(ze&&(We.end=mt+Fe*rt),Xe.push(We),We=Ae(Ge)),ze&&(mt+=Fe)}var an=Ge.length-3;ut=Ge[an],Mt=Ge[an+1],bt=Ge[an+2],(Dt=ot===0?ut:Mt)>=Ne&&Dt<=Ye&&Ee(We,ut,Mt,bt),an=We.length-3,nt&&an>=3&&(We[an]!==We[0]||We[an+1]!==We[1])&&Ee(We,We[0],We[1],We[2]),We.length&&Xe.push(We)}function Ae(Ge){var Xe=[];return Xe.size=Ge.size,Xe.start=Ge.start,Xe.end=Ge.end,Xe}function Oe(Ge,Xe,Ne,Ye,ot,nt){for(var ze=0;ze<Ge.length;ze++)_e(Ge[ze],Xe,Ne,Ye,ot,nt,!1)}function Ee(Ge,Xe,Ne,Ye){Ge.push(Xe),Ge.push(Ne),Ge.push(Ye)}function Be(Ge,Xe,Ne,Ye,ot,nt){var ze=(nt-Xe)/(Ye-Xe);return Ge.push(nt),Ge.push(Ne+(ot-Ne)*ze),Ge.push(1),ze}function Ve(Ge,Xe,Ne,Ye,ot,nt){var ze=(nt-Ne)/(ot-Ne);return Ge.push(Xe+(Ye-Xe)*ze),Ge.push(nt),Ge.push(1),ze}function Ze(Ge,Xe){for(var Ne=[],Ye=0;Ye<Ge.length;Ye++){var ot,nt=Ge[Ye],ze=nt.type;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")ot=it(nt.geometry,Xe);else if(ze==="MultiLineString"||ze==="Polygon"){ot=[];for(var Fe=0;Fe<nt.geometry.length;Fe++)ot.push(it(nt.geometry[Fe],Xe))}else if(ze==="MultiPolygon")for(ot=[],Fe=0;Fe<nt.geometry.length;Fe++){for(var rt=[],We=0;We<nt.geometry[Fe].length;We++)rt.push(it(nt.geometry[Fe][We],Xe));ot.push(rt)}Ne.push(oe(nt.id,ze,ot,nt.tags))}return Ne}function it(Ge,Xe){var Ne=[];Ne.size=Ge.size,Ge.start!==void 0&&(Ne.start=Ge.start,Ne.end=Ge.end);for(var Ye=0;Ye<Ge.length;Ye+=3)Ne.push(Ge[Ye]+Xe,Ge[Ye+1],Ge[Ye+2]);return Ne}function at(Ge,Xe){if(Ge.transformed)return Ge;var Ne,Ye,ot,nt=1<<Ge.z,ze=Ge.x,Fe=Ge.y;for(Ne=0;Ne<Ge.features.length;Ne++){var rt=Ge.features[Ne],We=rt.geometry,ft=rt.type;if(rt.geometry=[],ft===1)for(Ye=0;Ye<We.length;Ye+=2)rt.geometry.push(gt(We[Ye],We[Ye+1],Xe,nt,ze,Fe));else for(Ye=0;Ye<We.length;Ye++){var mt=[];for(ot=0;ot<We[Ye].length;ot+=2)mt.push(gt(We[Ye][ot],We[Ye][ot+1],Xe,nt,ze,Fe));rt.geometry.push(mt)}}return Ge.transformed=!0,Ge}function gt(Ge,Xe,Ne,Ye,ot,nt){return[Math.round(Ne*(Ge*Ye-ot)),Math.round(Ne*(Xe*Ye-nt))]}function yt(Ge,Xe,Ne,Ye,ot){for(var nt=Xe===ot.maxZoom?0:ot.tolerance/((1<<Xe)*ot.extent),ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:Ye,z:Xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<Ge.length;Fe++){ze.numFeatures++,pt(ze,Ge[Fe],nt,ot);var rt=Ge[Fe].minX,We=Ge[Fe].minY,ft=Ge[Fe].maxX,mt=Ge[Fe].maxY;rt<ze.minX&&(ze.minX=rt),We<ze.minY&&(ze.minY=We),ft>ze.maxX&&(ze.maxX=ft),mt>ze.maxY&&(ze.maxY=mt)}return ze}function pt(Ge,Xe,Ne,Ye){var ot=Xe.geometry,nt=Xe.type,ze=[];if(nt==="Point"||nt==="MultiPoint")for(var Fe=0;Fe<ot.length;Fe+=3)ze.push(ot[Fe]),ze.push(ot[Fe+1]),Ge.numPoints++,Ge.numSimplified++;else if(nt==="LineString")et(ze,ot,Ge,Ne,!1,!1);else if(nt==="MultiLineString"||nt==="Polygon")for(Fe=0;Fe<ot.length;Fe++)et(ze,ot[Fe],Ge,Ne,nt==="Polygon",Fe===0);else if(nt==="MultiPolygon")for(var rt=0;rt<ot.length;rt++){var We=ot[rt];for(Fe=0;Fe<We.length;Fe++)et(ze,We[Fe],Ge,Ne,!0,Fe===0)}if(ze.length){var ft=Xe.tags||null;if(nt==="LineString"&&Ye.lineMetrics){for(var mt in ft={},Xe.tags)ft[mt]=Xe.tags[mt];ft.mapbox_clip_start=ot.start/ot.size,ft.mapbox_clip_end=ot.end/ot.size}var vt={geometry:ze,type:nt==="Polygon"||nt==="MultiPolygon"?3:nt==="LineString"||nt==="MultiLineString"?2:1,tags:ft};Xe.id!==null&&(vt.id=Xe.id),Ge.features.push(vt)}}function et(Ge,Xe,Ne,Ye,ot,nt){var ze=Ye*Ye;if(Ye>0&&Xe.size<(ot?ze:Ye))Ne.numPoints+=Xe.length/3;else{for(var Fe=[],rt=0;rt<Xe.length;rt+=3)(Ye===0||Xe[rt+2]>ze)&&(Ne.numSimplified++,Fe.push(Xe[rt]),Fe.push(Xe[rt+1])),Ne.numPoints++;ot&&function(We,ft){for(var mt=0,vt=0,ut=We.length,Mt=ut-2;vt<ut;Mt=vt,vt+=2)mt+=(We[vt]-We[Mt])*(We[vt+1]+We[Mt+1]);if(mt>0===ft)for(vt=0,ut=We.length;vt<ut/2;vt+=2){var bt=We[vt],St=We[vt+1];We[vt]=We[ut-2-vt],We[vt+1]=We[ut-1-vt],We[ut-2-vt]=bt,We[ut-1-vt]=St}}(Fe,nt),Ge.push(Fe)}}function $e(Ge,Xe){var Ne=(Xe=this.options=function(ot,nt){for(var ze in nt)ot[ze]=nt[ze];return ot}(Object.create(this.options),Xe)).debug;if(Ne&&console.time("preprocess data"),Xe.maxZoom<0||Xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Xe.promoteId&&Xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ye=function(ot,nt){var ze=[];if(ot.type==="FeatureCollection")for(var Fe=0;Fe<ot.features.length;Fe++)fe(ze,ot.features[Fe],nt,Fe);else ot.type==="Feature"?fe(ze,ot,nt):fe(ze,{geometry:ot},nt);return ze}(Ge,Xe);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Xe.indexMaxZoom,Xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ye=function(ot,nt){var ze=nt.buffer/nt.extent,Fe=ot,rt=De(ot,1,-1-ze,ze,0,-1,2,nt),We=De(ot,1,1-ze,2+ze,0,-1,2,nt);return(rt||We)&&(Fe=De(ot,1,-ze,1+ze,0,-1,2,nt)||[],rt&&(Fe=Ze(rt,1).concat(Fe)),We&&(Fe=Fe.concat(Ze(We,-1)))),Fe}(Ye,Xe)).length&&this.splitTile(Ye,0,0,0),Ne&&(Ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function At(Ge,Xe,Ne){return 32*((1<<Ge)*Ne+Xe)+Ge}function Ot(Ge,Xe){var Ne=Ge.tileID.canonical;if(!this._geoJSONIndex)return Xe(null,null);var Ye=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!Ye)return Xe(null,null);var ot=new g(Ye.features),nt=h(ot);nt.byteOffset===0&&nt.byteLength===nt.buffer.byteLength||(nt=new Uint8Array(nt)),Xe(null,{vectorTile:ot,rawData:nt.buffer})}ie.prototype.load=function(Ge){var Xe=this.options,Ne=Xe.log,Ye=Xe.minZoom,ot=Xe.maxZoom,nt=Xe.nodeSize;Ne&&console.time("total time");var ze="prepare "+Ge.length+" points";Ne&&console.time(ze),this.points=Ge;for(var Fe=[],rt=0;rt<Ge.length;rt++)Ge[rt].geometry&&Fe.push(ae(Ge[rt],rt));this.trees[ot+1]=new K(Fe,me,ke,nt,Float32Array),Ne&&console.timeEnd(ze);for(var We=ot;We>=Ye;We--){var ft=+Date.now();Fe=this._cluster(Fe,We),this.trees[We]=new K(Fe,me,ke,nt,Float32Array),Ne&&console.log("z%d: %d clusters in %dms",We,Fe.length,+Date.now()-ft)}return Ne&&console.timeEnd("total time"),this},ie.prototype.getClusters=function(Ge,Xe){var Ne=((Ge[0]+180)%360+360)%360-180,Ye=Math.max(-90,Math.min(90,Ge[1])),ot=Ge[2]===180?180:((Ge[2]+180)%360+360)%360-180,nt=Math.max(-90,Math.min(90,Ge[3]));if(Ge[2]-Ge[0]>=360)Ne=-180,ot=180;else if(Ne>ot){var ze=this.getClusters([Ne,Ye,180,nt],Xe),Fe=this.getClusters([-180,Ye,ot,nt],Xe);return ze.concat(Fe)}for(var rt=this.trees[this._limitZoom(Xe)],We=[],ft=0,mt=rt.range(ye(Ne),pe(nt),ye(ot),pe(Ye));ft<mt.length;ft+=1){var vt=mt[ft],ut=rt.points[vt];We.push(ut.numPoints?ue(ut):this.points[ut.index])}return We},ie.prototype.getChildren=function(Ge){var Xe=this._getOriginId(Ge),Ne=this._getOriginZoom(Ge),Ye="No cluster with the specified id.",ot=this.trees[Ne];if(!ot)throw new Error(Ye);var nt=ot.points[Xe];if(!nt)throw new Error(Ye);for(var ze=this.options.radius/(this.options.extent*Math.pow(2,Ne-1)),Fe=[],rt=0,We=ot.within(nt.x,nt.y,ze);rt<We.length;rt+=1){var ft=We[rt],mt=ot.points[ft];mt.parentId===Ge&&Fe.push(mt.numPoints?ue(mt):this.points[mt.index])}if(Fe.length===0)throw new Error(Ye);return Fe},ie.prototype.getLeaves=function(Ge,Xe,Ne){Xe=Xe||10,Ne=Ne||0;var Ye=[];return this._appendLeaves(Ye,Ge,Xe,Ne,0),Ye},ie.prototype.getTile=function(Ge,Xe,Ne){var Ye=this.trees[this._limitZoom(Ge)],ot=Math.pow(2,Ge),nt=this.options,ze=nt.extent,Fe=nt.radius/ze,rt=(Ne-Fe)/ot,We=(Ne+1+Fe)/ot,ft={features:[]};return this._addTileFeatures(Ye.range((Xe-Fe)/ot,rt,(Xe+1+Fe)/ot,We),Ye.points,Xe,Ne,ot,ft),Xe===0&&this._addTileFeatures(Ye.range(1-Fe/ot,rt,1,We),Ye.points,ot,Ne,ot,ft),Xe===ot-1&&this._addTileFeatures(Ye.range(0,rt,Fe/ot,We),Ye.points,-1,Ne,ot,ft),ft.features.length?ft:null},ie.prototype.getClusterExpansionZoom=function(Ge){for(var Xe=this._getOriginZoom(Ge)-1;Xe<=this.options.maxZoom;){var Ne=this.getChildren(Ge);if(Xe++,Ne.length!==1)break;Ge=Ne[0].properties.cluster_id}return Xe},ie.prototype._appendLeaves=function(Ge,Xe,Ne,Ye,ot){for(var nt=0,ze=this.getChildren(Xe);nt<ze.length;nt+=1){var Fe=ze[nt],rt=Fe.properties;if(rt&&rt.cluster?ot+rt.point_count<=Ye?ot+=rt.point_count:ot=this._appendLeaves(Ge,rt.cluster_id,Ne,Ye,ot):ot<Ye?ot++:Ge.push(Fe),Ge.length===Ne)break}return ot},ie.prototype._addTileFeatures=function(Ge,Xe,Ne,Ye,ot,nt){for(var ze=0,Fe=Ge;ze<Fe.length;ze+=1){var rt=Xe[Fe[ze]],We=rt.numPoints,ft={type:1,geometry:[[Math.round(this.options.extent*(rt.x*ot-Ne)),Math.round(this.options.extent*(rt.y*ot-Ye))]],tags:We?ve(rt):this.points[rt.index].properties},mt=void 0;We?mt=rt.id:this.options.generateId?mt=rt.index:this.points[rt.index].id&&(mt=this.points[rt.index].id),mt!==void 0&&(ft.id=mt),nt.features.push(ft)}},ie.prototype._limitZoom=function(Ge){return Math.max(this.options.minZoom,Math.min(+Ge,this.options.maxZoom+1))},ie.prototype._cluster=function(Ge,Xe){for(var Ne=[],Ye=this.options,ot=Ye.radius,nt=Ye.extent,ze=Ye.reduce,Fe=Ye.minPoints,rt=ot/(nt*Math.pow(2,Xe)),We=0;We<Ge.length;We++){var ft=Ge[We];if(!(ft.zoom<=Xe)){ft.zoom=Xe;for(var mt=this.trees[Xe+1],vt=mt.within(ft.x,ft.y,rt),ut=ft.numPoints||1,Mt=ut,bt=0,St=vt;bt<St.length;bt+=1){var Pt=St[bt],Dt=mt.points[Pt];Dt.zoom>Xe&&(Mt+=Dt.numPoints||1)}if(Mt>=Fe){for(var Ft=ft.x*ut,Xt=ft.y*ut,an=ze&&ut>1?this._map(ft,!0):null,Ht=(We<<5)+(Xe+1)+this.points.length,Zt=0,jt=vt;Zt<jt.length;Zt+=1){var Pn=jt[Zt],Tn=mt.points[Pn];if(!(Tn.zoom<=Xe)){Tn.zoom=Xe;var mn=Tn.numPoints||1;Ft+=Tn.x*mn,Xt+=Tn.y*mn,Tn.parentId=Ht,ze&&(an||(an=this._map(ft,!0)),ze(an,this._map(Tn)))}}ft.parentId=Ht,Ne.push(se(Ft/Mt,Xt/Mt,Ht,Mt,an))}else if(Ne.push(ft),Mt>1)for(var Qt=0,un=vt;Qt<un.length;Qt+=1){var nn=un[Qt],hn=mt.points[nn];hn.zoom<=Xe||(hn.zoom=Xe,Ne.push(hn))}}}return Ne},ie.prototype._getOriginId=function(Ge){return Ge-this.points.length>>5},ie.prototype._getOriginZoom=function(Ge){return(Ge-this.points.length)%32},ie.prototype._map=function(Ge,Xe){if(Ge.numPoints)return Xe?de({},Ge.properties):Ge.properties;var Ne=this.points[Ge.index].properties,Ye=this.options.map(Ne);return Xe&&Ye===Ne?de({},Ye):Ye},$e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$e.prototype.splitTile=function(Ge,Xe,Ne,Ye,ot,nt,ze){for(var Fe=[Ge,Xe,Ne,Ye],rt=this.options,We=rt.debug;Fe.length;){Ye=Fe.pop(),Ne=Fe.pop(),Xe=Fe.pop(),Ge=Fe.pop();var ft=1<<Xe,mt=At(Xe,Ne,Ye),vt=this.tiles[mt];if(!vt&&(We>1&&console.time("creation"),vt=this.tiles[mt]=yt(Ge,Xe,Ne,Ye,rt),this.tileCoords.push({z:Xe,x:Ne,y:Ye}),We)){We>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Xe,Ne,Ye,vt.numFeatures,vt.numPoints,vt.numSimplified),console.timeEnd("creation"));var ut="z"+Xe;this.stats[ut]=(this.stats[ut]||0)+1,this.total++}if(vt.source=Ge,ot){if(Xe===rt.maxZoom||Xe===ot)continue;var Mt=1<<ot-Xe;if(Ne!==Math.floor(nt/Mt)||Ye!==Math.floor(ze/Mt))continue}else if(Xe===rt.indexMaxZoom||vt.numPoints<=rt.indexMaxPoints)continue;if(vt.source=null,Ge.length!==0){We>1&&console.time("clipping");var bt,St,Pt,Dt,Ft,Xt,an=.5*rt.buffer/rt.extent,Ht=.5-an,Zt=.5+an,jt=1+an;bt=St=Pt=Dt=null,Ft=De(Ge,ft,Ne-an,Ne+Zt,0,vt.minX,vt.maxX,rt),Xt=De(Ge,ft,Ne+Ht,Ne+jt,0,vt.minX,vt.maxX,rt),Ge=null,Ft&&(bt=De(Ft,ft,Ye-an,Ye+Zt,1,vt.minY,vt.maxY,rt),St=De(Ft,ft,Ye+Ht,Ye+jt,1,vt.minY,vt.maxY,rt),Ft=null),Xt&&(Pt=De(Xt,ft,Ye-an,Ye+Zt,1,vt.minY,vt.maxY,rt),Dt=De(Xt,ft,Ye+Ht,Ye+jt,1,vt.minY,vt.maxY,rt),Xt=null),We>1&&console.timeEnd("clipping"),Fe.push(bt||[],Xe+1,2*Ne,2*Ye),Fe.push(St||[],Xe+1,2*Ne,2*Ye+1),Fe.push(Pt||[],Xe+1,2*Ne+1,2*Ye),Fe.push(Dt||[],Xe+1,2*Ne+1,2*Ye+1)}}},$e.prototype.getTile=function(Ge,Xe,Ne){var Ye=this.options,ot=Ye.extent,nt=Ye.debug;if(Ge<0||Ge>24)return null;var ze=1<<Ge,Fe=At(Ge,Xe=(Xe%ze+ze)%ze,Ne);if(this.tiles[Fe])return at(this.tiles[Fe],ot);nt>1&&console.log("drilling down to z%d-%d-%d",Ge,Xe,Ne);for(var rt,We=Ge,ft=Xe,mt=Ne;!rt&&We>0;)We--,ft=Math.floor(ft/2),mt=Math.floor(mt/2),rt=this.tiles[At(We,ft,mt)];return rt&&rt.source?(nt>1&&console.log("found parent tile z%d-%d-%d",We,ft,mt),nt>1&&console.time("drilling down"),this.splitTile(rt.source,We,ft,mt,Ge,Xe,Ne),nt>1&&console.timeEnd("drilling down"),this.tiles[Fe]?at(this.tiles[Fe],ot):null):null};var Rt=function(Ge){function Xe(Ne,Ye,ot,nt){Ge.call(this,Ne,Ye,ot,Ot),nt&&(this.loadGeoJSON=nt)}return Ge&&(Xe.__proto__=Ge),Xe.prototype=Object.create(Ge&&Ge.prototype),Xe.prototype.constructor=Xe,Xe.prototype.loadData=function(Ne,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ye,this._pendingLoadDataParams=Ne,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Xe.prototype._loadData=function(){var Ne=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ye=this._pendingCallback,ot=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var nt=!!(ot&&ot.request&&ot.request.collectResourceTiming)&&new a.RequestPerformance(ot.request);this.loadGeoJSON(ot,function(ze,Fe){if(ze||!Fe)return Ye(ze);if(typeof Fe!="object")return Ye(new Error("Input data given to '"+ot.source+"' is not a valid GeoJSON object."));c(Fe,!0);try{if(ot.filter){var rt=a.createExpression(ot.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map(function(vt){return vt.key+": "+vt.message}).join(", "));var We=Fe.features.filter(function(vt){return rt.value.evaluate({zoom:0},vt)});Fe={type:"FeatureCollection",features:We}}Ne._geoJSONIndex=ot.cluster?new ie(function(vt){var ut=vt.superclusterOptions,Mt=vt.clusterProperties;if(!Mt||!ut)return ut;for(var bt={},St={},Pt={accumulated:null,zoom:0},Dt={properties:null},Ft=Object.keys(Mt),Xt=0,an=Ft;Xt<an.length;Xt+=1){var Ht=an[Xt],Zt=Mt[Ht],jt=Zt[0],Pn=Zt[1],Tn=a.createExpression(Pn),mn=a.createExpression(typeof jt=="string"?[jt,["accumulated"],["get",Ht]]:jt);bt[Ht]=Tn.value,St[Ht]=mn.value}return ut.map=function(Qt){Dt.properties=Qt;for(var un={},nn=0,hn=Ft;nn<hn.length;nn+=1){var bn=hn[nn];un[bn]=bt[bn].evaluate(Pt,Dt)}return un},ut.reduce=function(Qt,un){Dt.properties=un;for(var nn=0,hn=Ft;nn<hn.length;nn+=1){var bn=hn[nn];Pt.accumulated=Qt[bn],Qt[bn]=St[bn].evaluate(Pt,Dt)}},ut}(ot)).load(Fe.features):function(vt,ut){return new $e(vt,ut)}(Fe,ot.geojsonVtOptions)}catch(vt){return Ye(vt)}Ne.loaded={};var ft={};if(nt){var mt=nt.finish();mt&&(ft.resourceTiming={},ft.resourceTiming[ot.source]=JSON.parse(JSON.stringify(mt)))}Ye(null,ft)})}},Xe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Xe.prototype.reloadTile=function(Ne,Ye){var ot=this.loaded,nt=Ne.uid;return ot&&ot[nt]?Ge.prototype.reloadTile.call(this,Ne,Ye):this.loadTile(Ne,Ye)},Xe.prototype.loadGeoJSON=function(Ne,Ye){if(Ne.request)a.getJSON(Ne.request,Ye);else{if(typeof Ne.data!="string")return Ye(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));try{return Ye(null,JSON.parse(Ne.data))}catch{return Ye(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."))}}},Xe.prototype.removeSource=function(Ne,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ye()},Xe.prototype.getClusterExpansionZoom=function(Ne,Ye){try{Ye(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(ot){Ye(ot)}},Xe.prototype.getClusterChildren=function(Ne,Ye){try{Ye(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(ot){Ye(ot)}},Xe.prototype.getClusterLeaves=function(Ne,Ye){try{Ye(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(ot){Ye(ot)}},Xe}(n),Ct=function(Ge){var Xe=this;this.self=Ge,this.actor=new a.Actor(Ge,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Rt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ne,Ye){if(Xe.workerSourceTypes[Ne])throw new Error('Worker source with name "'+Ne+'" already registered.');Xe.workerSourceTypes[Ne]=Ye},this.self.registerRTLTextPlugin=function(Ne){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ne.applyArabicShaping,a.plugin.processBidirectionalText=Ne.processBidirectionalText,a.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}};return Ct.prototype.setReferrer=function(Ge,Xe){this.referrer=Xe},Ct.prototype.setImages=function(Ge,Xe,Ne){for(var Ye in this.availableImages[Ge]=Xe,this.workerSources[Ge]){var ot=this.workerSources[Ge][Ye];for(var nt in ot)ot[nt].availableImages=Xe}Ne()},Ct.prototype.setLayers=function(Ge,Xe,Ne){this.getLayerIndex(Ge).replace(Xe),Ne()},Ct.prototype.updateLayers=function(Ge,Xe,Ne){this.getLayerIndex(Ge).update(Xe.layers,Xe.removedIds),Ne()},Ct.prototype.loadTile=function(Ge,Xe,Ne){this.getWorkerSource(Ge,Xe.type,Xe.source).loadTile(Xe,Ne)},Ct.prototype.loadDEMTile=function(Ge,Xe,Ne){this.getDEMWorkerSource(Ge,Xe.source).loadTile(Xe,Ne)},Ct.prototype.reloadTile=function(Ge,Xe,Ne){this.getWorkerSource(Ge,Xe.type,Xe.source).reloadTile(Xe,Ne)},Ct.prototype.abortTile=function(Ge,Xe,Ne){this.getWorkerSource(Ge,Xe.type,Xe.source).abortTile(Xe,Ne)},Ct.prototype.removeTile=function(Ge,Xe,Ne){this.getWorkerSource(Ge,Xe.type,Xe.source).removeTile(Xe,Ne)},Ct.prototype.removeDEMTile=function(Ge,Xe){this.getDEMWorkerSource(Ge,Xe.source).removeTile(Xe)},Ct.prototype.removeSource=function(Ge,Xe,Ne){if(this.workerSources[Ge]&&this.workerSources[Ge][Xe.type]&&this.workerSources[Ge][Xe.type][Xe.source]){var Ye=this.workerSources[Ge][Xe.type][Xe.source];delete this.workerSources[Ge][Xe.type][Xe.source],Ye.removeSource!==void 0?Ye.removeSource(Xe,Ne):Ne()}},Ct.prototype.loadWorkerSource=function(Ge,Xe,Ne){try{this.self.importScripts(Xe.url),Ne()}catch(Ye){Ne(Ye.toString())}},Ct.prototype.syncRTLPluginState=function(Ge,Xe,Ne){try{a.plugin.setState(Xe);var Ye=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Ye!=null){this.self.importScripts(Ye);var ot=a.plugin.isParsed();Ne(ot?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ye),ot)}}catch(nt){Ne(nt.toString())}},Ct.prototype.getAvailableImages=function(Ge){var Xe=this.availableImages[Ge];return Xe||(Xe=[]),Xe},Ct.prototype.getLayerIndex=function(Ge){var Xe=this.layerIndexes[Ge];return Xe||(Xe=this.layerIndexes[Ge]=new f),Xe},Ct.prototype.getWorkerSource=function(Ge,Xe,Ne){var Ye=this;if(this.workerSources[Ge]||(this.workerSources[Ge]={}),this.workerSources[Ge][Xe]||(this.workerSources[Ge][Xe]={}),!this.workerSources[Ge][Xe][Ne]){var ot={send:function(nt,ze,Fe){Ye.actor.send(nt,ze,Fe,Ge)}};this.workerSources[Ge][Xe][Ne]=new this.workerSourceTypes[Xe](ot,this.getLayerIndex(Ge),this.getAvailableImages(Ge))}return this.workerSources[Ge][Xe][Ne]},Ct.prototype.getDEMWorkerSource=function(Ge,Xe){return this.demWorkerSources[Ge]||(this.demWorkerSources[Ge]={}),this.demWorkerSources[Ge][Xe]||(this.demWorkerSources[Ge][Xe]=new l),this.demWorkerSources[Ge][Xe]},Ct.prototype.enforceCacheSizeLimit=function(Ge,Xe){a.enforceCacheSizeLimit(Xe)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ct(self)),Ct}),k(0,function(a){var w=a.createCommonjsModule(function(N){function W(H){return!G(H)}function G(H){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ne,ce,xe=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(xe);try{ce=new Worker(Le),ne=!0}catch{ne=!1}return ce&&ce.terminate(),URL.revokeObjectURL(Le),ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ne=document.createElement("canvas");ne.width=ne.height=1;var ce=ne.getContext("2d");if(!ce)return!1;var xe=ce.getImageData(0,0,1,1);return xe&&xe.width===ne.width}()?($=H&&H.failIfMajorPerformanceCaveat,L[$]===void 0&&(L[$]=function(ne){var ce=function(Le){var Re=document.createElement("canvas"),Ue=Object.create(W.webGLContextAttributes);return Ue.failIfMajorPerformanceCaveat=Le,Re.probablySupportsContext?Re.probablySupportsContext("webgl",Ue)||Re.probablySupportsContext("experimental-webgl",Ue):Re.supportsContext?Re.supportsContext("webgl",Ue)||Re.supportsContext("experimental-webgl",Ue):Re.getContext("webgl",Ue)||Re.getContext("experimental-webgl",Ue)}(ne);if(!ce)return!1;var xe=ce.createShader(ce.VERTEX_SHADER);return!(!xe||ce.isContextLost())&&(ce.shaderSource(xe,"void main() {}"),ce.compileShader(xe),ce.getShaderParameter(xe,ce.COMPILE_STATUS)===!0)}($)),L[$]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var $}N.exports?N.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=G);var L={};W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(N,W,G){var L=a.window.document.createElement(N);return W!==void 0&&(L.className=W),G&&G.appendChild(L),L},createNS:function(N,W){return a.window.document.createElementNS(N,W)}},f=a.window.document&&a.window.document.documentElement.style;function s(N){if(!f)return N[0];for(var W=0;W<N.length;W++)if(N[W]in f)return N[W];return N[0]}var t,i=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){f&&i&&(t=f[i],f[i]="none")},b.enableDrag=function(){f&&i&&(f[i]=t)};var r=s(["transform","WebkitTransform"]);b.setTransform=function(N,W){N.style[r]=W};var n=!1;try{var o=Object.defineProperty({},"passive",{get:function(){n=!0}});a.window.addEventListener("test",o,o),a.window.removeEventListener("test",o,o)}catch{n=!1}b.addEventListener=function(N,W,G,L){L===void 0&&(L={}),"passive"in L&&n?N.addEventListener(W,G,L):N.addEventListener(W,G,L.capture)},b.removeEventListener=function(N,W,G,L){L===void 0&&(L={}),"passive"in L&&n?N.removeEventListener(W,G,L):N.removeEventListener(W,G,L.capture)};var l=function(N){N.preventDefault(),N.stopPropagation(),a.window.removeEventListener("click",l,!0)};function c(N){var W=N.userImage;return!!(W&&W.render&&W.render())&&(N.data.replace(new Uint8Array(W.data.buffer)),!0)}b.suppressClick=function(){a.window.addEventListener("click",l,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",l,!0)},0)},b.mousePos=function(N,W){var G=N.getBoundingClientRect();return new a.Point(W.clientX-G.left-N.clientLeft,W.clientY-G.top-N.clientTop)},b.touchPos=function(N,W){for(var G=N.getBoundingClientRect(),L=[],H=0;H<W.length;H++)L.push(new a.Point(W[H].clientX-G.left-N.clientLeft,W[H].clientY-G.top-N.clientTop));return L},b.mouseButton=function(N){return a.window.InstallTrigger!==void 0&&N.button===2&&N.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:N.button},b.remove=function(N){N.parentNode&&N.parentNode.removeChild(N)};var d=function(N){function W(){N.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(G){if(this.loaded!==G&&(this.loaded=G,G)){for(var L=0,H=this.requestors;L<H.length;L+=1){var $=H[L],ne=$.ids,ce=$.callback;this._notify(ne,ce)}this.requestors=[]}},W.prototype.getImage=function(G){return this.images[G]},W.prototype.addImage=function(G,L){this._validate(G,L)&&(this.images[G]=L)},W.prototype._validate=function(G,L){var H=!0;return this._validateStretch(L.stretchX,L.data&&L.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchX" value'))),H=!1),this._validateStretch(L.stretchY,L.data&&L.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchY" value'))),H=!1),this._validateContent(L.content,L)||(this.fire(new a.ErrorEvent(new Error('Image "'+G+'" has invalid "content" value'))),H=!1),H},W.prototype._validateStretch=function(G,L){if(!G)return!0;for(var H=0,$=0,ne=G;$<ne.length;$+=1){var ce=ne[$];if(ce[0]<H||ce[1]<ce[0]||L<ce[1])return!1;H=ce[1]}return!0},W.prototype._validateContent=function(G,L){return!(G&&(G.length!==4||G[0]<0||L.data.width<G[0]||G[1]<0||L.data.height<G[1]||G[2]<0||L.data.width<G[2]||G[3]<0||L.data.height<G[3]||G[2]<G[0]||G[3]<G[1]))},W.prototype.updateImage=function(G,L){var H=this.images[G];L.version=H.version+1,this.images[G]=L,this.updatedImages[G]=!0},W.prototype.removeImage=function(G){var L=this.images[G];delete this.images[G],delete this.patterns[G],L.userImage&&L.userImage.onRemove&&L.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(G,L){var H=!0;if(!this.isLoaded())for(var $=0,ne=G;$<ne.length;$+=1){var ce=ne[$];this.images[ce]||(H=!1)}this.isLoaded()||H?this._notify(G,L):this.requestors.push({ids:G,callback:L})},W.prototype._notify=function(G,L){for(var H={},$=0,ne=G;$<ne.length;$+=1){var ce=ne[$];this.images[ce]||this.fire(new a.Event("styleimagemissing",{id:ce}));var xe=this.images[ce];xe?H[ce]={data:xe.data.clone(),pixelRatio:xe.pixelRatio,sdf:xe.sdf,version:xe.version,stretchX:xe.stretchX,stretchY:xe.stretchY,content:xe.content,hasRenderCallback:!!(xe.userImage&&xe.userImage.render)}:a.warnOnce('Image "'+ce+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}L(null,H)},W.prototype.getPixelSize=function(){var G=this.atlasImage;return{width:G.width,height:G.height}},W.prototype.getPattern=function(G){var L=this.patterns[G],H=this.getImage(G);if(!H)return null;if(L&&L.position.version===H.version)return L.position;if(L)L.position.version=H.version;else{var $={w:H.data.width+2,h:H.data.height+2,x:0,y:0},ne=new a.ImagePosition($,H);this.patterns[G]={bin:$,position:ne}}return this._updatePatternAtlas(),this.patterns[G].position},W.prototype.bind=function(G){var L=G.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(G,this.atlasImage,L.RGBA),this.atlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var G=[];for(var L in this.patterns)G.push(this.patterns[L].bin);var H=a.potpack(G),$=H.w,ne=H.h,ce=this.atlasImage;for(var xe in ce.resize({width:$||1,height:ne||1}),this.patterns){var Le=this.patterns[xe].bin,Re=Le.x+1,Ue=Le.y+1,He=this.images[xe].data,tt=He.width,ct=He.height;a.RGBAImage.copy(He,ce,{x:0,y:0},{x:Re,y:Ue},{width:tt,height:ct}),a.RGBAImage.copy(He,ce,{x:0,y:ct-1},{x:Re,y:Ue-1},{width:tt,height:1}),a.RGBAImage.copy(He,ce,{x:0,y:0},{x:Re,y:Ue+ct},{width:tt,height:1}),a.RGBAImage.copy(He,ce,{x:tt-1,y:0},{x:Re-1,y:Ue},{width:1,height:ct}),a.RGBAImage.copy(He,ce,{x:0,y:0},{x:Re+tt,y:Ue},{width:1,height:ct})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(G){for(var L=0,H=G;L<H.length;L+=1){var $=H[L];if(!this.callbackDispatchedThisFrame[$]){this.callbackDispatchedThisFrame[$]=!0;var ne=this.images[$];c(ne)&&this.updateImage($,ne)}}},W}(a.Evented),u=g,x=g,p=1e20;function g(N,W,G,L,H,$){this.fontSize=N||24,this.buffer=W===void 0?3:W,this.cutoff=L||.25,this.fontFamily=H||"sans-serif",this.fontWeight=$||"normal",this.radius=G||8;var ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ne*ne),this.gridInner=new Float64Array(ne*ne),this.f=new Float64Array(ne),this.d=new Float64Array(ne),this.z=new Float64Array(ne+1),this.v=new Int16Array(ne),this.middle=Math.round(ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(N,W,G,L,H,$,ne){for(var ce=0;ce<W;ce++){for(var xe=0;xe<G;xe++)L[xe]=N[xe*W+ce];for(y(L,H,$,ne,G),xe=0;xe<G;xe++)N[xe*W+ce]=H[xe]}for(xe=0;xe<G;xe++){for(ce=0;ce<W;ce++)L[ce]=N[xe*W+ce];for(y(L,H,$,ne,W),ce=0;ce<W;ce++)N[xe*W+ce]=Math.sqrt(H[ce])}}function y(N,W,G,L,H){G[0]=0,L[0]=-p,L[1]=+p;for(var $=1,ne=0;$<H;$++){for(var ce=(N[$]+$*$-(N[G[ne]]+G[ne]*G[ne]))/(2*$-2*G[ne]);ce<=L[ne];)ne--,ce=(N[$]+$*$-(N[G[ne]]+G[ne]*G[ne]))/(2*$-2*G[ne]);G[++ne]=$,L[ne]=ce,L[ne+1]=+p}for($=0,ne=0;$<H;$++){for(;L[ne+1]<$;)ne++;W[$]=($-G[ne])*($-G[ne])+N[G[ne]]}}g.prototype.draw=function(N){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(N,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),G=new Uint8ClampedArray(this.size*this.size),L=0;L<this.size*this.size;L++){var H=W.data[4*L+3]/255;this.gridOuter[L]=H===1?0:H===0?p:Math.pow(Math.max(0,.5-H),2),this.gridInner[L]=H===1?p:H===0?0:Math.pow(Math.max(0,H-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),L=0;L<this.size*this.size;L++){var $=this.gridOuter[L]-this.gridInner[L];G[L]=Math.max(0,Math.min(255,Math.round(255-255*($/this.radius+this.cutoff))))}return G},u.default=x;var v=function(N,W){this.requestManager=N,this.localIdeographFontFamily=W,this.entries={}};v.prototype.setURL=function(N){this.url=N},v.prototype.getGlyphs=function(N,W){var G=this,L=[];for(var H in N)for(var $=0,ne=N[H];$<ne.length;$+=1){var ce=ne[$];L.push({stack:H,id:ce})}a.asyncAll(L,function(xe,Le){var Re=xe.stack,Ue=xe.id,He=G.entries[Re];He||(He=G.entries[Re]={glyphs:{},requests:{},ranges:{}});var tt=He.glyphs[Ue];if(tt===void 0){if(tt=G._tinySDF(He,Re,Ue))return He.glyphs[Ue]=tt,void Le(null,{stack:Re,id:Ue,glyph:tt});var ct=Math.floor(Ue/256);if(256*ct>65535)Le(new Error("glyphs > 65535 not supported"));else if(He.ranges[ct])Le(null,{stack:Re,id:Ue,glyph:tt});else{var dt=He.requests[ct];dt||(dt=He.requests[ct]=[],v.loadGlyphRange(Re,ct,G.url,G.requestManager,function(wt,Et){if(Et){for(var kt in Et)G._doesCharSupportLocalGlyph(+kt)||(He.glyphs[+kt]=Et[+kt]);He.ranges[ct]=!0}for(var Bt=0,It=dt;Bt<It.length;Bt+=1)(0,It[Bt])(wt,Et);delete He.requests[ct]})),dt.push(function(wt,Et){wt?Le(wt):Et&&Le(null,{stack:Re,id:Ue,glyph:Et[Ue]||null})})}}else Le(null,{stack:Re,id:Ue,glyph:tt})},function(xe,Le){if(xe)W(xe);else if(Le){for(var Re={},Ue=0,He=Le;Ue<He.length;Ue+=1){var tt=He[Ue],ct=tt.stack,dt=tt.id,wt=tt.glyph;(Re[ct]||(Re[ct]={}))[dt]=wt&&{id:wt.id,bitmap:wt.bitmap.clone(),metrics:wt.metrics}}W(null,Re)}})},v.prototype._doesCharSupportLocalGlyph=function(N){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](N)||a.isChar["Hangul Syllables"](N)||a.isChar.Hiragana(N)||a.isChar.Katakana(N))},v.prototype._tinySDF=function(N,W,G){var L=this.localIdeographFontFamily;if(L&&this._doesCharSupportLocalGlyph(G)){var H=N.tinySDF;if(!H){var $="400";/bold/i.test(W)?$="900":/medium/i.test(W)?$="500":/light/i.test(W)&&($="200"),H=N.tinySDF=new v.TinySDF(24,3,8,.25,L,$)}return{id:G,bitmap:new a.AlphaImage({width:30,height:30},H.draw(String.fromCharCode(G))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(N,W,G,L,H){var $=256*W,ne=$+255,ce=L.transformRequest(L.normalizeGlyphsURL(G).replace("{fontstack}",N).replace("{range}",$+"-"+ne),a.ResourceType.Glyphs);a.getArrayBuffer(ce,function(xe,Le){if(xe)H(xe);else if(Le){for(var Re={},Ue=0,He=a.parseGlyphPBF(Le);Ue<He.length;Ue+=1){var tt=He[Ue];Re[tt.id]=tt}H(null,Re)}})},v.TinySDF=u;var _=function(){this.specification=a.styleSpec.light.position};_.prototype.possiblyEvaluate=function(N,W){return a.sphericalToCartesian(N.expression.evaluate(W))},_.prototype.interpolate=function(N,W,G){return{x:a.number(N.x,W.x,G),y:a.number(N.y,W.y,G),z:a.number(N.z,W.z,G)}};var h=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new _,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),S="-transition",A=function(N){function W(G){N.call(this),this._transitionable=new a.Transitionable(h),this.setLight(G),this._transitioning=this._transitionable.untransitioned()}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(G,L){if(L===void 0&&(L={}),!this._validate(a.validateLight,G,L))for(var H in G){var $=G[H];a.endsWith(H,S)?this._transitionable.setTransition(H.slice(0,-11),$):this._transitionable.setValue(H,$)}},W.prototype.updateTransitions=function(G){this._transitioning=this._transitionable.transitioned(G,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(G){this.properties=this._transitioning.possiblyEvaluate(G)},W.prototype._validate=function(G,L,H){return(!H||H.validate!==!1)&&a.emitValidationErrors(this,G.call(a.validateStyle,a.extend({value:L,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},W}(a.Evented),E=function(N,W){this.width=N,this.height=W,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(N,W){var G=N.join(",")+String(W);return this.dashEntry[G]||(this.dashEntry[G]=this.addDash(N,W)),this.dashEntry[G]},E.prototype.getDashRanges=function(N,W,G){var L=[],H=N.length%2==1?-N[N.length-1]*G:0,$=N[0]*G,ne=!0;L.push({left:H,right:$,isDash:ne,zeroLength:N[0]===0});for(var ce=N[0],xe=1;xe<N.length;xe++){ne=!ne;var Le=N[xe];H=ce*G,$=(ce+=Le)*G,L.push({left:H,right:$,isDash:ne,zeroLength:Le===0})}return L},E.prototype.addRoundDash=function(N,W,G){for(var L=W/2,H=-G;H<=G;H++)for(var $=this.nextRow+G+H,ne=this.width*$,ce=0,xe=N[ce],Le=0;Le<this.width;Le++){Le/xe.right>1&&(xe=N[++ce]);var Re=Math.abs(Le-xe.left),Ue=Math.abs(Le-xe.right),He=Math.min(Re,Ue),tt=void 0,ct=H/G*(L+1);if(xe.isDash){var dt=L-Math.abs(ct);tt=Math.sqrt(He*He+dt*dt)}else tt=L-Math.sqrt(He*He+ct*ct);this.data[ne+Le]=Math.max(0,Math.min(255,tt+128))}},E.prototype.addRegularDash=function(N){for(var W=N.length-1;W>=0;--W){var G=N[W],L=N[W+1];G.zeroLength?N.splice(W,1):L&&L.isDash===G.isDash&&(L.left=G.left,N.splice(W,1))}var H=N[0],$=N[N.length-1];H.isDash===$.isDash&&(H.left=$.left-this.width,$.right=H.right+this.width);for(var ne=this.width*this.nextRow,ce=0,xe=N[ce],Le=0;Le<this.width;Le++){Le/xe.right>1&&(xe=N[++ce]);var Re=Math.abs(Le-xe.left),Ue=Math.abs(Le-xe.right),He=Math.min(Re,Ue),tt=xe.isDash?He:-He;this.data[ne+Le]=Math.max(0,Math.min(255,tt+128))}},E.prototype.addDash=function(N,W){var G=W?7:0,L=2*G+1;if(this.nextRow+L>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var H=0,$=0;$<N.length;$++)H+=N[$];if(H!==0){var ne=this.width/H,ce=this.getDashRanges(N,this.width,ne);W?this.addRoundDash(ce,ne,G):this.addRegularDash(ce)}var xe={y:(this.nextRow+G+.5)/this.height,height:2*G/this.height,width:H};return this.nextRow+=L,this.dirty=!0,xe},E.prototype.bind=function(N){var W=N.gl;this.texture?(W.bindTexture(W.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,W.texSubImage2D(W.TEXTURE_2D,0,0,0,this.width,this.height,W.ALPHA,W.UNSIGNED_BYTE,this.data))):(this.texture=W.createTexture(),W.bindTexture(W.TEXTURE_2D,this.texture),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),W.texImage2D(W.TEXTURE_2D,0,W.ALPHA,this.width,this.height,0,W.ALPHA,W.UNSIGNED_BYTE,this.data))};var P=function N(W,G){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var L=this.workerPool.acquire(this.id),H=0;H<L.length;H++){var $=L[H],ne=new N.Actor($,G,this.id);ne.name="Worker "+H,this.actors.push(ne)}};function I(N,W,G){var L=function(H,$){if(H)return G(H);if($){var ne=a.pick(a.extend($,N),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);$.vector_layers&&(ne.vectorLayers=$.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(function(ce){return ce.id})),ne.tiles=W.canonicalizeTileset(ne,N.url),G(null,ne)}};return N.url?a.getJSON(W.transformRequest(W.normalizeSourceURL(N.url),a.ResourceType.Source),L):a.browser.frame(function(){return L(null,N)})}P.prototype.broadcast=function(N,W,G){G=G||function(){},a.asyncAll(this.actors,function(L,H){L.send(N,W,H)},G)},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(N){N.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=a.Actor;var D=function(N,W,G){this.bounds=a.LngLatBounds.convert(this.validateBounds(N)),this.minzoom=W||0,this.maxzoom=G||24};D.prototype.validateBounds=function(N){return Array.isArray(N)&&N.length===4?[Math.max(-180,N[0]),Math.max(-90,N[1]),Math.min(180,N[2]),Math.min(90,N[3])]:[-180,-90,180,90]},D.prototype.contains=function(N){var W=Math.pow(2,N.z),G=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*W),L=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*W),H=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*W),$=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*W);return N.x>=G&&N.x<H&&N.y>=L&&N.y<$};var z=function(N){function W(G,L,H,$){if(N.call(this),this.id=G,this.dispatcher=H,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(L,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},L),this._collectResourceTiming=L.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent($)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(L,H){G._tileJSONRequest=null,G._loaded=!0,L?G.fire(new a.ErrorEvent(L)):H&&(a.extend(G,H),H.bounds&&(G.tileBounds=new D(H.bounds,G.minzoom,G.maxzoom)),a.postTurnstileEvent(H.tiles,G.map._requestManager._customAccessToken),a.postMapLoadEvent(H.tiles,G.map._getMapId(),G.map._requestManager._skuToken,G.map._requestManager._customAccessToken),G.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setSourceProperty=function(G){this._tileJSONRequest&&this._tileJSONRequest.cancel(),G(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},W.prototype.setTiles=function(G){var L=this;return this.setSourceProperty(function(){L._options.tiles=G}),this},W.prototype.setUrl=function(G){var L=this;return this.setSourceProperty(function(){L.url=G,L._options.url=G}),this},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return a.extend({},this._options)},W.prototype.loadTile=function(G,L){var H=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme)),$={request:this.map._requestManager.transformRequest(H,a.ResourceType.Tile),uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,tileSize:this.tileSize*G.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ne(ce,xe){return delete G.request,G.aborted?L(null):ce&&ce.status!==404?L(ce):(xe&&xe.resourceTiming&&(G.resourceTiming=xe.resourceTiming),this.map._refreshExpiredTiles&&xe&&G.setExpiryData(xe),G.loadVectorData(xe,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),L(null),void(G.reloadCallback&&(this.loadTile(G,G.reloadCallback),G.reloadCallback=null)))}$.request.collectResourceTiming=this._collectResourceTiming,G.actor&&G.state!=="expired"?G.state==="loading"?G.reloadCallback=L:G.request=G.actor.send("reloadTile",$,ne.bind(this)):(G.actor=this.dispatcher.getActor(),G.request=G.actor.send("loadTile",$,ne.bind(this)))},W.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.actor&&G.actor.send("abortTile",{uid:G.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(G){G.unloadVectorData(),G.actor&&G.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(a.Evented),V=function(N){function W(G,L,H,$){N.call(this),this.id=G,this.dispatcher=H,this.setEventedParent($),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},L),a.extend(this,a.pick(L,["url","scheme","tileSize"]))}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(L,H){G._tileJSONRequest=null,G._loaded=!0,L?G.fire(new a.ErrorEvent(L)):H&&(a.extend(G,H),H.bounds&&(G.tileBounds=new D(H.bounds,G.minzoom,G.maxzoom)),a.postTurnstileEvent(H.tiles),a.postMapLoadEvent(H.tiles,G.map._getMapId(),G.map._requestManager._skuToken),G.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return a.extend({},this._options)},W.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},W.prototype.loadTile=function(G,L){var H=this,$=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);G.request=a.getImage(this.map._requestManager.transformRequest($,a.ResourceType.Tile),function(ne,ce){if(delete G.request,G.aborted)G.state="unloaded",L(null);else if(ne)G.state="errored",L(ne);else if(ce){H.map._refreshExpiredTiles&&G.setExpiryData(ce),delete ce.cacheControl,delete ce.expires;var xe=H.map.painter.context,Le=xe.gl;G.texture=H.map.painter.getTileTexture(ce.width),G.texture?G.texture.update(ce,{useMipmap:!0}):(G.texture=new a.Texture(xe,ce,Le.RGBA,{useMipmap:!0}),G.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),xe.extTextureFilterAnisotropic&&Le.texParameterf(Le.TEXTURE_2D,xe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,xe.extTextureFilterAnisotropicMax)),G.state="loaded",a.cacheEntryPossiblyAdded(H.dispatcher),L(null)}})},W.prototype.abortTile=function(G,L){G.request&&(G.request.cancel(),delete G.request),L()},W.prototype.unloadTile=function(G,L){G.texture&&this.map.painter.saveTileTexture(G.texture),L()},W.prototype.hasTransition=function(){return!1},W}(a.Evented),O=function(N){function W(G,L,H,$){N.call(this,G,L,H,$),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},L),this.encoding=L.encoding||"mapbox"}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(G,L){var H=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function $(ne,ce){ne&&(G.state="errored",L(ne)),ce&&(G.dem=ce,G.needsHillshadePrepare=!0,G.state="loaded",L(null))}G.request=a.getImage(this.map._requestManager.transformRequest(H,a.ResourceType.Tile),(function(ne,ce){if(delete G.request,G.aborted)G.state="unloaded",L(null);else if(ne)G.state="errored",L(ne);else if(ce){this.map._refreshExpiredTiles&&G.setExpiryData(ce),delete ce.cacheControl,delete ce.expires;var xe=a.window.ImageBitmap&&ce instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?ce:a.browser.getImageData(ce,1),Le={uid:G.uid,coord:G.tileID,source:this.id,rawImageData:xe,encoding:this.encoding};G.actor&&G.state!=="expired"||(G.actor=this.dispatcher.getActor(),G.actor.send("loadDEMTile",Le,$.bind(this)))}}).bind(this)),G.neighboringTiles=this._getNeighboringTiles(G.tileID)},W.prototype._getNeighboringTiles=function(G){var L=G.canonical,H=Math.pow(2,L.z),$=(L.x-1+H)%H,ne=L.x===0?G.wrap-1:G.wrap,ce=(L.x+1+H)%H,xe=L.x+1===H?G.wrap+1:G.wrap,Le={};return Le[new a.OverscaledTileID(G.overscaledZ,ne,L.z,$,L.y).key]={backfilled:!1},Le[new a.OverscaledTileID(G.overscaledZ,xe,L.z,ce,L.y).key]={backfilled:!1},L.y>0&&(Le[new a.OverscaledTileID(G.overscaledZ,ne,L.z,$,L.y-1).key]={backfilled:!1},Le[new a.OverscaledTileID(G.overscaledZ,G.wrap,L.z,L.x,L.y-1).key]={backfilled:!1},Le[new a.OverscaledTileID(G.overscaledZ,xe,L.z,ce,L.y-1).key]={backfilled:!1}),L.y+1<H&&(Le[new a.OverscaledTileID(G.overscaledZ,ne,L.z,$,L.y+1).key]={backfilled:!1},Le[new a.OverscaledTileID(G.overscaledZ,G.wrap,L.z,L.x,L.y+1).key]={backfilled:!1},Le[new a.OverscaledTileID(G.overscaledZ,xe,L.z,ce,L.y+1).key]={backfilled:!1}),Le},W.prototype.unloadTile=function(G){G.demTexture&&this.map.painter.saveTileTexture(G.demTexture),G.fbo&&(G.fbo.destroy(),delete G.fbo),G.dem&&delete G.dem,delete G.neighboringTiles,G.state="unloaded",G.actor&&G.actor.send("removeDEMTile",{uid:G.uid,source:this.id})},W}(V),j=function(N){function W(G,L,H,$){N.call(this),this.id=G,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=H.getActor(),this.setEventedParent($),this._data=L.data,this._options=a.extend({},L),this._collectResourceTiming=L.collectResourceTiming,this._resourceTiming=[],L.maxzoom!==void 0&&(this.maxzoom=L.maxzoom),L.type&&(this.type=L.type),L.attribution&&(this.attribution=L.attribution),this.promoteId=L.promoteId;var ne=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:L.cluster||!1,geojsonVtOptions:{buffer:(L.buffer!==void 0?L.buffer:128)*ne,tolerance:(L.tolerance!==void 0?L.tolerance:.375)*ne,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:L.lineMetrics||!1,generateId:L.generateId||!1},superclusterOptions:{maxZoom:L.clusterMaxZoom!==void 0?Math.min(L.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,L.clusterMinPoints||2),extent:a.EXTENT,radius:(L.clusterRadius||50)*ne,log:!1,generateId:L.generateId||!1},clusterProperties:L.clusterProperties,filter:L.filter},L.workerOptions)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L)G.fire(new a.ErrorEvent(L));else{var H={dataType:"source",sourceDataType:"metadata"};G._collectResourceTiming&&G._resourceTiming&&G._resourceTiming.length>0&&(H.resourceTiming=G._resourceTiming,G._resourceTiming=[]),G.fire(new a.Event("data",H))}})},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setData=function(G){var L=this;return this._data=G,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(H){if(H)L.fire(new a.ErrorEvent(H));else{var $={dataType:"source",sourceDataType:"content"};L._collectResourceTiming&&L._resourceTiming&&L._resourceTiming.length>0&&($.resourceTiming=L._resourceTiming,L._resourceTiming=[]),L.fire(new a.Event("data",$))}}),this},W.prototype.getClusterExpansionZoom=function(G,L){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:G,source:this.id},L),this},W.prototype.getClusterChildren=function(G,L){return this.actor.send("geojson.getClusterChildren",{clusterId:G,source:this.id},L),this},W.prototype.getClusterLeaves=function(G,L,H,$){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:G,limit:L,offset:H},$),this},W.prototype._updateWorkerData=function(G){var L=this;this._loaded=!1;var H=a.extend({},this.workerOptions),$=this._data;typeof $=="string"?(H.request=this.map._requestManager.transformRequest(a.browser.resolveURL($),a.ResourceType.Source),H.request.collectResourceTiming=this._collectResourceTiming):H.data=JSON.stringify($),this.actor.send(this.type+".loadData",H,function(ne,ce){L._removed||ce&&ce.abandoned||(L._loaded=!0,ce&&ce.resourceTiming&&ce.resourceTiming[L.id]&&(L._resourceTiming=ce.resourceTiming[L.id].slice(0)),L.actor.send(L.type+".coalesce",{source:H.source},null),G(ne))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(G,L){var H=this,$=G.actor?"reloadTile":"loadTile";G.actor=this.actor;var ne={type:this.type,uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};G.request=this.actor.send($,ne,function(ce,xe){return delete G.request,G.unloadVectorData(),G.aborted?L(null):ce?L(ce):(G.loadVectorData(xe,H.map.painter,$==="reloadTile"),L(null))})},W.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.aborted=!0},W.prototype.unloadTile=function(G){G.unloadVectorData(),this.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(a.Evented),Y=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(N){function W(G,L,H,$){N.call(this),this.id=G,this.dispatcher=H,this.coordinates=L.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent($),this.options=L}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(G,L){var H=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function($,ne){H._loaded=!0,$?H.fire(new a.ErrorEvent($)):ne&&(H.image=ne,G&&(H.coordinates=G),L&&L(),H._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(G){var L=this;return this.image&&G.url?(this.options.url=G.url,this.load(G.coordinates,function(){L.texture=null}),this):this},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setCoordinates=function(G){var L=this;this.coordinates=G;var H=G.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(ne){for(var ce=1/0,xe=1/0,Le=-1/0,Re=-1/0,Ue=0,He=ne;Ue<He.length;Ue+=1){var tt=He[Ue];ce=Math.min(ce,tt.x),xe=Math.min(xe,tt.y),Le=Math.max(Le,tt.x),Re=Math.max(Re,tt.y)}var ct=Le-ce,dt=Re-xe,wt=Math.max(ct,dt),Et=Math.max(0,Math.floor(-Math.log(wt)/Math.LN2)),kt=Math.pow(2,Et);return new a.CanonicalTileID(Et,Math.floor((ce+Le)/2*kt),Math.floor((xe+Re)/2*kt))}(H),this.minzoom=this.maxzoom=this.tileID.z;var $=H.map(function(ne){return L.tileID.getTilePoint(ne)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack($[0].x,$[0].y,0,0),this._boundsArray.emplaceBack($[1].x,$[1].y,a.EXTENT,0),this._boundsArray.emplaceBack($[3].x,$[3].y,0,a.EXTENT),this._boundsArray.emplaceBack($[2].x,$[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var G=this.map.painter.context,L=G.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(G,this.image,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var $=this.tiles[H];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},W.prototype.loadTile=function(G,L){this.tileID&&this.tileID.equals(G.tileID.canonical)?(this.tiles[String(G.tileID.wrap)]=G,G.buckets={},L(null)):(G.state="errored",L(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(a.Evented),U=function(N){function W(G,L,H,$){N.call(this,G,L,H,$),this.roundZoom=!0,this.type="video",this.options=L}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1;var L=this.options;this.urls=[];for(var H=0,$=L.urls;H<$.length;H+=1){var ne=$[H];this.urls.push(this.map._requestManager.transformRequest(ne,a.ResourceType.Source).url)}a.getVideo(this.urls,function(ce,xe){G._loaded=!0,ce?G.fire(new a.ErrorEvent(ce)):xe&&(G.video=xe,G.video.loop=!0,G.video.addEventListener("playing",function(){G.map.triggerRepaint()}),G.map&&G.video.play(),G._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(G){if(this.video){var L=this.video.seekable;G<L.start(0)||G>L.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+L.start(0)+" and "+L.end(0)+"-second mark."))):this.video.currentTime=G}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(G){this.map||(this.map=G,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var G=this.map.painter.context,L=G.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE),L.texSubImage2D(L.TEXTURE_2D,0,0,0,L.RGBA,L.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(G,this.video,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var $=this.tiles[H];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(B),q=function(N){function W(G,L,H,$){N.call(this,G,L,H,$),L.coordinates?Array.isArray(L.coordinates)&&L.coordinates.length===4&&!L.coordinates.some(function(ne){return!Array.isArray(ne)||ne.length!==2||ne.some(function(ce){return typeof ce!="number"})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+G,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+G,null,'missing required property "coordinates"'))),L.animate&&typeof L.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+G,null,'optional "animate" property must be a boolean value'))),L.canvas?typeof L.canvas=="string"||L.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+G,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+G,null,'missing required property "canvas"'))),this.options=L,this.animate=L.animate===void 0||L.animate}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(G){this.map=G,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var G=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,G=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,G=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var L=this.map.painter.context,H=L.gl;for(var $ in this.boundsBuffer||(this.boundsBuffer=L.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(G||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(L,this.canvas,H.RGBA,{premultiply:!0}),this.tiles){var ne=this.tiles[$];ne.state!=="loaded"&&(ne.state="loaded",ne.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var G=0,L=[this.canvas.width,this.canvas.height];G<L.length;G+=1){var H=L[G];if(isNaN(H)||H<=0)return!0}return!1},W}(B),te={vector:z,raster:V,"raster-dem":O,geojson:j,video:U,image:B,canvas:q};function ee(N,W){var G=a.identity([]);return a.translate(G,G,[1,1,0]),a.scale(G,G,[.5*N.width,.5*N.height,1]),a.multiply(G,G,N.calculatePosMatrix(W.toUnwrapped()))}function Q(N,W,G,L,H,$){var ne=function(dt,wt,Et){if(dt)for(var kt=0,Bt=dt;kt<Bt.length;kt+=1){var It=wt[Bt[kt]];if(It&&It.source===Et&&It.type==="fill-extrusion")return!0}else for(var Kt in wt){var qt=wt[Kt];if(qt.source===Et&&qt.type==="fill-extrusion")return!0}return!1}(H&&H.layers,W,N.id),ce=$.maxPitchScaleFactor(),xe=N.tilesIn(L,ce,ne);xe.sort(J);for(var Le=[],Re=0,Ue=xe;Re<Ue.length;Re+=1){var He=Ue[Re];Le.push({wrappedTileID:He.tileID.wrapped().key,queryResults:He.tile.queryRenderedFeatures(W,G,N._state,He.queryGeometry,He.cameraQueryGeometry,He.scale,H,$,ce,ee(N.transform,He.tileID))})}var tt=function(dt){for(var wt={},Et={},kt=0,Bt=dt;kt<Bt.length;kt+=1){var It=Bt[kt],Kt=It.queryResults,qt=It.wrappedTileID,Vt=Et[qt]=Et[qt]||{};for(var pn in Kt)for(var yn=Kt[pn],Sn=Vt[pn]=Vt[pn]||{},On=wt[pn]=wt[pn]||[],Hn=0,sr=yn;Hn<sr.length;Hn+=1){var dr=sr[Hn];Sn[dr.featureIndex]||(Sn[dr.featureIndex]=!0,On.push(dr))}}return wt}(Le);for(var ct in tt)tt[ct].forEach(function(dt){var wt=dt.feature,Et=N.getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=Et});return tt}function J(N,W){var G=N.tileID,L=W.tileID;return G.overscaledZ-L.overscaledZ||G.canonical.y-L.canonical.y||G.wrap-L.wrap||G.canonical.x-L.canonical.x}var K=function(N,W){this.max=N,this.onRemove=W,this.reset()};K.prototype.reset=function(){for(var N in this.data)for(var W=0,G=this.data[N];W<G.length;W+=1){var L=G[W];L.timeout&&clearTimeout(L.timeout),this.onRemove(L.value)}return this.data={},this.order=[],this},K.prototype.add=function(N,W,G){var L=this,H=N.wrapped().key;this.data[H]===void 0&&(this.data[H]=[]);var $={value:W,timeout:void 0};if(G!==void 0&&($.timeout=setTimeout(function(){L.remove(N,$)},G)),this.data[H].push($),this.order.push(H),this.order.length>this.max){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},K.prototype.has=function(N){return N.wrapped().key in this.data},K.prototype.getAndRemove=function(N){return this.has(N)?this._getAndRemoveByKey(N.wrapped().key):null},K.prototype._getAndRemoveByKey=function(N){var W=this.data[N].shift();return W.timeout&&clearTimeout(W.timeout),this.data[N].length===0&&delete this.data[N],this.order.splice(this.order.indexOf(N),1),W.value},K.prototype.getByKey=function(N){var W=this.data[N];return W?W[0].value:null},K.prototype.get=function(N){return this.has(N)?this.data[N.wrapped().key][0].value:null},K.prototype.remove=function(N,W){if(!this.has(N))return this;var G=N.wrapped().key,L=W===void 0?0:this.data[G].indexOf(W),H=this.data[G][L];return this.data[G].splice(L,1),H.timeout&&clearTimeout(H.timeout),this.data[G].length===0&&delete this.data[G],this.onRemove(H.value),this.order.splice(this.order.indexOf(G),1),this},K.prototype.setMaxSize=function(N){for(this.max=N;this.order.length>this.max;){var W=this._getAndRemoveByKey(this.order[0]);W&&this.onRemove(W)}return this},K.prototype.filter=function(N){var W=[];for(var G in this.data)for(var L=0,H=this.data[G];L<H.length;L+=1){var $=H[L];N($.value)||W.push($)}for(var ne=0,ce=W;ne<ce.length;ne+=1){var xe=ce[ne];this.remove(xe.value.tileID,xe)}};var X=function(N,W,G){this.context=N;var L=N.gl;this.buffer=L.createBuffer(),this.dynamicDraw=!!G,this.context.unbindVAO(),N.bindElementBuffer.set(this.buffer),L.bufferData(L.ELEMENT_ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};X.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},X.prototype.updateData=function(N){var W=this.context.gl;this.context.unbindVAO(),this.bind(),W.bufferSubData(W.ELEMENT_ARRAY_BUFFER,0,N.arrayBuffer)},X.prototype.destroy=function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)};var ie={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},se=function(N,W,G,L){this.length=W.length,this.attributes=G,this.itemSize=W.bytesPerElement,this.dynamicDraw=L,this.context=N;var H=N.gl;this.buffer=H.createBuffer(),N.bindVertexBuffer.set(this.buffer),H.bufferData(H.ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?H.DYNAMIC_DRAW:H.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};se.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},se.prototype.updateData=function(N){var W=this.context.gl;this.bind(),W.bufferSubData(W.ARRAY_BUFFER,0,N.arrayBuffer)},se.prototype.enableAttributes=function(N,W){for(var G=0;G<this.attributes.length;G++){var L=this.attributes[G],H=W.attributes[L.name];H!==void 0&&N.enableVertexAttribArray(H)}},se.prototype.setVertexAttribPointers=function(N,W,G){for(var L=0;L<this.attributes.length;L++){var H=this.attributes[L],$=W.attributes[H.name];$!==void 0&&N.vertexAttribPointer($,H.components,N[ie[H.type]],!1,this.itemSize,H.offset+this.itemSize*(G||0))}},se.prototype.destroy=function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(N){this.gl=N.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(N){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var ue=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return a.Color.transparent},W.prototype.set=function(G){var L=this.current;(G.r!==L.r||G.g!==L.g||G.b!==L.b||G.a!==L.a||this.dirty)&&(this.gl.clearColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},W}(ae),ve=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearDepth(G),this.current=G,this.dirty=!1)},W}(ae),ye=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearStencil(G),this.current=G,this.dirty=!1)},W}(ae),pe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(G){var L=this.current;(G[0]!==L[0]||G[1]!==L[1]||G[2]!==L[2]||G[3]!==L[3]||this.dirty)&&(this.gl.colorMask(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},W}(ae),de=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthMask(G),this.current=G,this.dirty=!1)},W}(ae),me=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.stencilMask(G),this.current=G,this.dirty=!1)},W}(ae),ke=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(G){var L=this.current;(G.func!==L.func||G.ref!==L.ref||G.mask!==L.mask||this.dirty)&&(this.gl.stencilFunc(G.func,G.ref,G.mask),this.current=G,this.dirty=!1)},W}(ae),Ce=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[G.KEEP,G.KEEP,G.KEEP]},W.prototype.set=function(G){var L=this.current;(G[0]!==L[0]||G[1]!==L[1]||G[2]!==L[2]||this.dirty)&&(this.gl.stencilOp(G[0],G[1],G[2]),this.current=G,this.dirty=!1)},W}(ae),ge=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;G?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this.current=G,this.dirty=!1}},W}(ae),oe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(G){var L=this.current;(G[0]!==L[0]||G[1]!==L[1]||this.dirty)&&(this.gl.depthRange(G[0],G[1]),this.current=G,this.dirty=!1)},W}(ae),re=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;G?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this.current=G,this.dirty=!1}},W}(ae),fe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthFunc(G),this.current=G,this.dirty=!1)},W}(ae),Se=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;G?L.enable(L.BLEND):L.disable(L.BLEND),this.current=G,this.dirty=!1}},W}(ae),be=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[G.ONE,G.ZERO]},W.prototype.set=function(G){var L=this.current;(G[0]!==L[0]||G[1]!==L[1]||this.dirty)&&(this.gl.blendFunc(G[0],G[1]),this.current=G,this.dirty=!1)},W}(ae),we=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return a.Color.transparent},W.prototype.set=function(G){var L=this.current;(G.r!==L.r||G.g!==L.g||G.b!==L.b||G.a!==L.a||this.dirty)&&(this.gl.blendColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},W}(ae),Me=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.blendEquation(G),this.current=G,this.dirty=!1)},W}(ae),Pe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;G?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this.current=G,this.dirty=!1}},W}(ae),De=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.cullFace(G),this.current=G,this.dirty=!1)},W}(ae),he=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.frontFace(G),this.current=G,this.dirty=!1)},W}(ae),_e=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.useProgram(G),this.current=G,this.dirty=!1)},W}(ae),Ae=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.activeTexture(G),this.current=G,this.dirty=!1)},W}(ae),Oe=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[0,0,G.drawingBufferWidth,G.drawingBufferHeight]},W.prototype.set=function(G){var L=this.current;(G[0]!==L[0]||G[1]!==L[1]||G[2]!==L[2]||G[3]!==L[3]||this.dirty)&&(this.gl.viewport(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},W}(ae),Ee=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,G),this.current=G,this.dirty=!1}},W}(ae),Be=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;L.bindRenderbuffer(L.RENDERBUFFER,G),this.current=G,this.dirty=!1}},W}(ae),Ve=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;L.bindTexture(L.TEXTURE_2D,G),this.current=G,this.dirty=!1}},W}(ae),Ze=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;L.bindBuffer(L.ARRAY_BUFFER,G),this.current=G,this.dirty=!1}},W}(ae),it=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){var L=this.gl;L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,G),this.current=G,this.dirty=!1},W}(ae),at=function(N){function W(G){N.call(this,G),this.vao=G.extVertexArrayObject}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){this.vao&&(G!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(G),this.current=G,this.dirty=!1)},W}(ae),gt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_ALIGNMENT,G),this.current=G,this.dirty=!1}},W}(ae),yt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G),this.current=G,this.dirty=!1}},W}(ae),pt=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,G),this.current=G,this.dirty=!1}},W}(ae),et=function(N){function W(G,L){N.call(this,G),this.context=G,this.parent=L}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(ae),$e=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,G,0),this.current=G,this.dirty=!1}},W}(et),At=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,G),this.current=G,this.dirty=!1}},W}(et),Ot=function(N,W,G,L){this.context=N,this.width=W,this.height=G;var H=N.gl,$=this.framebuffer=H.createFramebuffer();this.colorAttachment=new $e(N,$),L&&(this.depthAttachment=new At(N,$))};Ot.prototype.destroy=function(){var N=this.context.gl,W=this.colorAttachment.get();if(W&&N.deleteTexture(W),this.depthAttachment){var G=this.depthAttachment.get();G&&N.deleteRenderbuffer(G)}N.deleteFramebuffer(this.framebuffer)};var Rt=function(N,W,G){this.func=N,this.mask=W,this.range=G};Rt.ReadOnly=!1,Rt.ReadWrite=!0,Rt.disabled=new Rt(519,Rt.ReadOnly,[0,1]);var Ct=7680,Ge=function(N,W,G,L,H,$){this.test=N,this.ref=W,this.mask=G,this.fail=L,this.depthFail=H,this.pass=$};Ge.disabled=new Ge({func:519,mask:0},0,0,Ct,Ct,Ct);var Xe=function(N,W,G){this.blendFunction=N,this.blendColor=W,this.mask=G};Xe.Replace=[1,0],Xe.disabled=new Xe(Xe.Replace,a.Color.transparent,[!1,!1,!1,!1]),Xe.unblended=new Xe(Xe.Replace,a.Color.transparent,[!0,!0,!0,!0]),Xe.alphaBlended=new Xe([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Ne=function(N,W,G){this.enable=N,this.mode=W,this.frontFace=G};Ne.disabled=new Ne(!1,1029,2305),Ne.backCCW=new Ne(!0,1029,2305);var Ye=function(N){this.gl=N,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ue(this),this.clearDepth=new ve(this),this.clearStencil=new ye(this),this.colorMask=new pe(this),this.depthMask=new de(this),this.stencilMask=new me(this),this.stencilFunc=new ke(this),this.stencilOp=new Ce(this),this.stencilTest=new ge(this),this.depthRange=new oe(this),this.depthTest=new re(this),this.depthFunc=new fe(this),this.blend=new Se(this),this.blendFunc=new be(this),this.blendColor=new we(this),this.blendEquation=new Me(this),this.cullFace=new Pe(this),this.cullFaceSide=new De(this),this.frontFace=new he(this),this.program=new _e(this),this.activeTexture=new Ae(this),this.viewport=new Oe(this),this.bindFramebuffer=new Ee(this),this.bindRenderbuffer=new Be(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new Ze(this),this.bindElementBuffer=new it(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new at(this),this.pixelStoreUnpack=new gt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new pt(this),this.extTextureFilterAnisotropic=N.getExtension("EXT_texture_filter_anisotropic")||N.getExtension("MOZ_EXT_texture_filter_anisotropic")||N.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=N.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=N.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(N.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=N.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=N.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=N.getParameter(N.MAX_TEXTURE_SIZE)};Ye.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ye.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ye.prototype.createIndexBuffer=function(N,W){return new X(this,N,W)},Ye.prototype.createVertexBuffer=function(N,W,G){return new se(this,N,W,G)},Ye.prototype.createRenderbuffer=function(N,W,G){var L=this.gl,H=L.createRenderbuffer();return this.bindRenderbuffer.set(H),L.renderbufferStorage(L.RENDERBUFFER,N,W,G),this.bindRenderbuffer.set(null),H},Ye.prototype.createFramebuffer=function(N,W,G){return new Ot(this,N,W,G)},Ye.prototype.clear=function(N){var W=N.color,G=N.depth,L=this.gl,H=0;W&&(H|=L.COLOR_BUFFER_BIT,this.clearColor.set(W),this.colorMask.set([!0,!0,!0,!0])),G!==void 0&&(H|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(G),this.depthMask.set(!0)),L.clear(H)},Ye.prototype.setCullFace=function(N){N.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(N.mode),this.frontFace.set(N.frontFace))},Ye.prototype.setDepthMode=function(N){N.func!==this.gl.ALWAYS||N.mask?(this.depthTest.set(!0),this.depthFunc.set(N.func),this.depthMask.set(N.mask),this.depthRange.set(N.range)):this.depthTest.set(!1)},Ye.prototype.setStencilMode=function(N){N.test.func!==this.gl.ALWAYS||N.mask?(this.stencilTest.set(!0),this.stencilMask.set(N.mask),this.stencilOp.set([N.fail,N.depthFail,N.pass]),this.stencilFunc.set({func:N.test.func,ref:N.ref,mask:N.test.mask})):this.stencilTest.set(!1)},Ye.prototype.setColorMode=function(N){a.deepEqual(N.blendFunction,Xe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(N.blendFunction),this.blendColor.set(N.blendColor)),this.colorMask.set(N.mask)},Ye.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(N){function W(G,L,H){var $=this;N.call(this),this.id=G,this.dispatcher=H,this.on("data",function(ne){ne.dataType==="source"&&ne.sourceDataType==="metadata"&&($._sourceLoaded=!0),$._sourceLoaded&&!$._paused&&ne.dataType==="source"&&ne.sourceDataType==="content"&&($.reload(),$.transform&&$.update($.transform))}),this.on("error",function(){$._sourceErrored=!0}),this._source=function(ne,ce,xe,Le){var Re=new te[ce.type](ne,ce,xe,Le);if(Re.id!==ne)throw new Error("Expected Source id to be "+ne+" instead of "+Re.id);return a.bindAll(["load","abort","unload","serialize","prepare"],Re),Re}(G,L,H,this),this._tiles={},this._cache=new K(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(G){this.map=G,this._maxTileCacheSize=G?G._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(G)},W.prototype.onRemove=function(G){this._source&&this._source.onRemove&&this._source.onRemove(G)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var G in this._tiles){var L=this._tiles[G];if(L.state!=="loaded"&&L.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(this._paused){var G=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,G&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(G,L){return this._source.loadTile(G,L)},W.prototype._unloadTile=function(G){if(this._source.unloadTile)return this._source.unloadTile(G,function(){})},W.prototype._abortTile=function(G){if(this._source.abortTile)return this._source.abortTile(G,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(G){for(var L in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var H=this._tiles[L];H.upload(G),H.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return a.values(this._tiles).map(function(G){return G.tileID}).sort(nt).map(function(G){return G.key})},W.prototype.getRenderableIds=function(G){var L=this,H=[];for(var $ in this._tiles)this._isIdRenderable($,G)&&H.push(this._tiles[$]);return G?H.sort(function(ne,ce){var xe=ne.tileID,Le=ce.tileID,Re=new a.Point(xe.canonical.x,xe.canonical.y)._rotate(L.transform.angle),Ue=new a.Point(Le.canonical.x,Le.canonical.y)._rotate(L.transform.angle);return xe.overscaledZ-Le.overscaledZ||Ue.y-Re.y||Ue.x-Re.x}).map(function(ne){return ne.tileID.key}):H.map(function(ne){return ne.tileID}).sort(nt).map(function(ne){return ne.key})},W.prototype.hasRenderableParent=function(G){var L=this.findLoadedParent(G,0);return!!L&&this._isIdRenderable(L.tileID.key)},W.prototype._isIdRenderable=function(G,L){return this._tiles[G]&&this._tiles[G].hasData()&&!this._coveredTiles[G]&&(L||!this._tiles[G].holdingForFade())},W.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var G in this._cache.reset(),this._tiles)this._tiles[G].state!=="errored"&&this._reloadTile(G,"reloading")},W.prototype._reloadTile=function(G,L){var H=this._tiles[G];H&&(H.state!=="loading"&&(H.state=L),this._loadTile(H,this._tileLoaded.bind(this,H,G,L)))},W.prototype._tileLoaded=function(G,L,H,$){if($)return G.state="errored",void($.status!==404?this._source.fire(new a.ErrorEvent($,{tile:G})):this.update(this.transform));G.timeAdded=a.browser.now(),H==="expired"&&(G.refreshedUponExpiration=!0),this._setTileReloadTimer(L,G),this.getSource().type==="raster-dem"&&G.dem&&this._backfillDEM(G),this._state.initializeTileState(G,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:G,coord:G.tileID}))},W.prototype._backfillDEM=function(G){for(var L=this.getRenderableIds(),H=0;H<L.length;H++){var $=L[H];if(G.neighboringTiles&&G.neighboringTiles[$]){var ne=this.getTileByID($);ce(G,ne),ce(ne,G)}}function ce(xe,Le){xe.needsHillshadePrepare=!0;var Re=Le.tileID.canonical.x-xe.tileID.canonical.x,Ue=Le.tileID.canonical.y-xe.tileID.canonical.y,He=Math.pow(2,xe.tileID.canonical.z),tt=Le.tileID.key;Re===0&&Ue===0||Math.abs(Ue)>1||(Math.abs(Re)>1&&(Math.abs(Re+He)===1?Re+=He:Math.abs(Re-He)===1&&(Re-=He)),Le.dem&&xe.dem&&(xe.dem.backfillBorder(Le.dem,Re,Ue),xe.neighboringTiles&&xe.neighboringTiles[tt]&&(xe.neighboringTiles[tt].backfilled=!0)))}},W.prototype.getTile=function(G){return this.getTileByID(G.key)},W.prototype.getTileByID=function(G){return this._tiles[G]},W.prototype._retainLoadedChildren=function(G,L,H,$){for(var ne in this._tiles){var ce=this._tiles[ne];if(!($[ne]||!ce.hasData()||ce.tileID.overscaledZ<=L||ce.tileID.overscaledZ>H)){for(var xe=ce.tileID;ce&&ce.tileID.overscaledZ>L+1;){var Le=ce.tileID.scaledTo(ce.tileID.overscaledZ-1);(ce=this._tiles[Le.key])&&ce.hasData()&&(xe=Le)}for(var Re=xe;Re.overscaledZ>L;)if(G[(Re=Re.scaledTo(Re.overscaledZ-1)).key]){$[xe.key]=xe;break}}}},W.prototype.findLoadedParent=function(G,L){if(G.key in this._loadedParentTiles){var H=this._loadedParentTiles[G.key];return H&&H.tileID.overscaledZ>=L?H:null}for(var $=G.overscaledZ-1;$>=L;$--){var ne=G.scaledTo($),ce=this._getLoadedTile(ne);if(ce)return ce}},W.prototype._getLoadedTile=function(G){var L=this._tiles[G.key];return L&&L.hasData()?L:this._cache.getByKey(G.wrapped().key)},W.prototype.updateCacheSize=function(G){var L=(Math.ceil(G.width/this._source.tileSize)+1)*(Math.ceil(G.height/this._source.tileSize)+1),H=Math.floor(5*L),$=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,H):H;this._cache.setMaxSize($)},W.prototype.handleWrapJump=function(G){var L=(G-(this._prevLng===void 0?G:this._prevLng))/360,H=Math.round(L);if(this._prevLng=G,H){var $={};for(var ne in this._tiles){var ce=this._tiles[ne];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+H),$[ce.tileID.key]=ce}for(var xe in this._tiles=$,this._timers)clearTimeout(this._timers[xe]),delete this._timers[xe];for(var Le in this._tiles){var Re=this._tiles[Le];this._setTileReloadTimer(Le,Re)}}},W.prototype.update=function(G){var L=this;if(this.transform=G,this._sourceLoaded&&!this._paused){var H;this.updateCacheSize(G),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?H=G.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Vt){return new a.OverscaledTileID(Vt.canonical.z,Vt.wrap,Vt.canonical.z,Vt.canonical.x,Vt.canonical.y)}):(H=G.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(H=H.filter(function(Vt){return L._source.hasTile(Vt)}))):H=[];var $=G.coveringZoomLevel(this._source),ne=Math.max($-W.maxOverzooming,this._source.minzoom),ce=Math.max($+W.maxUnderzooming,this._source.minzoom),xe=this._updateRetainedTiles(H,$);if(ze(this._source.type)){for(var Le={},Re={},Ue=0,He=Object.keys(xe);Ue<He.length;Ue+=1){var tt=He[Ue],ct=xe[tt],dt=this._tiles[tt];if(dt&&!(dt.fadeEndTime&&dt.fadeEndTime<=a.browser.now())){var wt=this.findLoadedParent(ct,ne);wt&&(this._addTile(wt.tileID),Le[wt.tileID.key]=wt.tileID),Re[tt]=ct}}for(var Et in this._retainLoadedChildren(Re,$,ce,xe),Le)xe[Et]||(this._coveredTiles[Et]=!0,xe[Et]=Le[Et])}for(var kt in xe)this._tiles[kt].clearFadeHold();for(var Bt=0,It=a.keysDifference(this._tiles,xe);Bt<It.length;Bt+=1){var Kt=It[Bt],qt=this._tiles[Kt];qt.hasSymbolBuckets&&!qt.holdingForFade()?qt.setHoldDuration(this.map._fadeDuration):qt.hasSymbolBuckets&&!qt.symbolFadeFinished()||this._removeTile(Kt)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var G in this._tiles)this._tiles[G].holdingForFade()&&this._removeTile(G)},W.prototype._updateRetainedTiles=function(G,L){for(var H={},$={},ne=Math.max(L-W.maxOverzooming,this._source.minzoom),ce=Math.max(L+W.maxUnderzooming,this._source.minzoom),xe={},Le=0,Re=G;Le<Re.length;Le+=1){var Ue=Re[Le],He=this._addTile(Ue);H[Ue.key]=Ue,He.hasData()||L<this._source.maxzoom&&(xe[Ue.key]=Ue)}this._retainLoadedChildren(xe,L,ce,H);for(var tt=0,ct=G;tt<ct.length;tt+=1){var dt=ct[tt],wt=this._tiles[dt.key];if(!wt.hasData()){if(L+1>this._source.maxzoom){var Et=dt.children(this._source.maxzoom)[0],kt=this.getTile(Et);if(kt&&kt.hasData()){H[Et.key]=Et;continue}}else{var Bt=dt.children(this._source.maxzoom);if(H[Bt[0].key]&&H[Bt[1].key]&&H[Bt[2].key]&&H[Bt[3].key])continue}for(var It=wt.wasRequested(),Kt=dt.overscaledZ-1;Kt>=ne;--Kt){var qt=dt.scaledTo(Kt);if($[qt.key]||($[qt.key]=!0,!(wt=this.getTile(qt))&&It&&(wt=this._addTile(qt)),wt&&(H[qt.key]=qt,It=wt.wasRequested(),wt.hasData())))break}}}return H},W.prototype._updateLoadedParentTileCache=function(){for(var G in this._loadedParentTiles={},this._tiles){for(var L=[],H=void 0,$=this._tiles[G].tileID;$.overscaledZ>0;){if($.key in this._loadedParentTiles){H=this._loadedParentTiles[$.key];break}L.push($.key);var ne=$.scaledTo($.overscaledZ-1);if(H=this._getLoadedTile(ne))break;$=ne}for(var ce=0,xe=L;ce<xe.length;ce+=1){var Le=xe[ce];this._loadedParentTiles[Le]=H}}},W.prototype._addTile=function(G){var L=this._tiles[G.key];if(L)return L;(L=this._cache.getAndRemove(G))&&(this._setTileReloadTimer(G.key,L),L.tileID=G,this._state.initializeTileState(L,this.map?this.map.painter:null),this._cacheTimers[G.key]&&(clearTimeout(this._cacheTimers[G.key]),delete this._cacheTimers[G.key],this._setTileReloadTimer(G.key,L)));var H=!!L;return H||(L=new a.Tile(G,this._source.tileSize*G.overscaleFactor()),this._loadTile(L,this._tileLoaded.bind(this,L,G.key,L.state))),L?(L.uses++,this._tiles[G.key]=L,H||this._source.fire(new a.Event("dataloading",{tile:L,coord:L.tileID,dataType:"source"})),L):null},W.prototype._setTileReloadTimer=function(G,L){var H=this;G in this._timers&&(clearTimeout(this._timers[G]),delete this._timers[G]);var $=L.getExpiryTimeout();$&&(this._timers[G]=setTimeout(function(){H._reloadTile(G,"expired"),delete H._timers[G]},$))},W.prototype._removeTile=function(G){var L=this._tiles[G];L&&(L.uses--,delete this._tiles[G],this._timers[G]&&(clearTimeout(this._timers[G]),delete this._timers[G]),L.uses>0||(L.hasData()&&L.state!=="reloading"?this._cache.add(L.tileID,L,L.getExpiryTimeout()):(L.aborted=!0,this._abortTile(L),this._unloadTile(L))))},W.prototype.clearTiles=function(){for(var G in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(G);this._cache.reset()},W.prototype.tilesIn=function(G,L,H){var $=this,ne=[],ce=this.transform;if(!ce)return ne;for(var xe=H?ce.getCameraQueryGeometry(G):G,Le=G.map(function(Kt){return ce.pointCoordinate(Kt)}),Re=xe.map(function(Kt){return ce.pointCoordinate(Kt)}),Ue=this.getIds(),He=1/0,tt=1/0,ct=-1/0,dt=-1/0,wt=0,Et=Re;wt<Et.length;wt+=1){var kt=Et[wt];He=Math.min(He,kt.x),tt=Math.min(tt,kt.y),ct=Math.max(ct,kt.x),dt=Math.max(dt,kt.y)}for(var Bt=function(Kt){var qt=$._tiles[Ue[Kt]];if(!qt.holdingForFade()){var Vt=qt.tileID,pn=Math.pow(2,ce.zoom-qt.tileID.overscaledZ),yn=L*qt.queryPadding*a.EXTENT/qt.tileSize/pn,Sn=[Vt.getTilePoint(new a.MercatorCoordinate(He,tt)),Vt.getTilePoint(new a.MercatorCoordinate(ct,dt))];if(Sn[0].x-yn<a.EXTENT&&Sn[0].y-yn<a.EXTENT&&Sn[1].x+yn>=0&&Sn[1].y+yn>=0){var On=Le.map(function(sr){return Vt.getTilePoint(sr)}),Hn=Re.map(function(sr){return Vt.getTilePoint(sr)});ne.push({tile:qt,tileID:Vt,queryGeometry:On,cameraQueryGeometry:Hn,scale:pn})}}},It=0;It<Ue.length;It++)Bt(It);return ne},W.prototype.getVisibleCoordinates=function(G){for(var L=this,H=this.getRenderableIds(G).map(function(xe){return L._tiles[xe].tileID}),$=0,ne=H;$<ne.length;$+=1){var ce=ne[$];ce.posMatrix=this.transform.calculatePosMatrix(ce.toUnwrapped())}return H},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ze(this._source.type))for(var G in this._tiles){var L=this._tiles[G];if(L.fadeEndTime!==void 0&&L.fadeEndTime>=a.browser.now())return!0}return!1},W.prototype.setFeatureState=function(G,L,H){G=G||"_geojsonTileLayer",this._state.updateState(G,L,H)},W.prototype.removeFeatureState=function(G,L,H){G=G||"_geojsonTileLayer",this._state.removeFeatureState(G,L,H)},W.prototype.getFeatureState=function(G,L){return G=G||"_geojsonTileLayer",this._state.getState(G,L)},W.prototype.setDependencies=function(G,L,H){var $=this._tiles[G];$&&$.setDependencies(L,H)},W.prototype.reloadTilesForDependencies=function(G,L){for(var H in this._tiles)this._tiles[H].hasDependency(G,L)&&this._reloadTile(H,"reloading");this._cache.filter(function($){return!$.hasDependency(G,L)})},W}(a.Evented);function nt(N,W){var G=Math.abs(2*N.wrap)-+(N.wrap<0),L=Math.abs(2*W.wrap)-+(W.wrap<0);return N.overscaledZ-W.overscaledZ||L-G||W.canonical.y-N.canonical.y||W.canonical.x-N.canonical.x}function ze(N){return N==="raster"||N==="image"||N==="video"}function Fe(){return new a.window.Worker(st.workerUrl)}ot.maxOverzooming=10,ot.maxUnderzooming=3;var rt="mapboxgl_preloaded_worker_pool",We=function(){this.active={}};We.prototype.acquire=function(N){if(!this.workers)for(this.workers=[];this.workers.length<We.workerCount;)this.workers.push(new Fe);return this.active[N]=!0,this.workers.slice()},We.prototype.release=function(N){delete this.active[N],this.numActive()===0&&(this.workers.forEach(function(W){W.terminate()}),this.workers=null)},We.prototype.isPreloaded=function(){return!!this.active[rt]},We.prototype.numActive=function(){return Object.keys(this.active).length};var ft,mt=Math.floor(a.browser.hardwareConcurrency/2);function vt(){return ft||(ft=new We),ft}function ut(N,W){var G={};for(var L in N)L!=="ref"&&(G[L]=N[L]);return a.refProperties.forEach(function(H){H in W&&(G[H]=W[H])}),G}function Mt(N){N=N.slice();for(var W=Object.create(null),G=0;G<N.length;G++)W[N[G].id]=N[G];for(var L=0;L<N.length;L++)"ref"in N[L]&&(N[L]=ut(N[L],W[N[L].ref]));return N}We.workerCount=Math.max(Math.min(mt,6),1);var bt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function St(N,W,G){G.push({command:bt.addSource,args:[N,W[N]]})}function Pt(N,W,G){W.push({command:bt.removeSource,args:[N]}),G[N]=!0}function Dt(N,W,G,L){Pt(N,G,L),St(N,W,G)}function Ft(N,W,G){var L;for(L in N[G])if(N[G].hasOwnProperty(L)&&L!=="data"&&!a.deepEqual(N[G][L],W[G][L]))return!1;for(L in W[G])if(W[G].hasOwnProperty(L)&&L!=="data"&&!a.deepEqual(N[G][L],W[G][L]))return!1;return!0}function Xt(N,W,G,L,H,$){var ne;for(ne in W=W||{},N=N||{})N.hasOwnProperty(ne)&&(a.deepEqual(N[ne],W[ne])||G.push({command:$,args:[L,ne,W[ne],H]}));for(ne in W)W.hasOwnProperty(ne)&&!N.hasOwnProperty(ne)&&(a.deepEqual(N[ne],W[ne])||G.push({command:$,args:[L,ne,W[ne],H]}))}function an(N){return N.id}function Ht(N,W){return N[W.id]=W,N}function Zt(N,W){if(!N)return[{command:bt.setStyle,args:[W]}];var G=[];try{if(!a.deepEqual(N.version,W.version))return[{command:bt.setStyle,args:[W]}];a.deepEqual(N.center,W.center)||G.push({command:bt.setCenter,args:[W.center]}),a.deepEqual(N.zoom,W.zoom)||G.push({command:bt.setZoom,args:[W.zoom]}),a.deepEqual(N.bearing,W.bearing)||G.push({command:bt.setBearing,args:[W.bearing]}),a.deepEqual(N.pitch,W.pitch)||G.push({command:bt.setPitch,args:[W.pitch]}),a.deepEqual(N.sprite,W.sprite)||G.push({command:bt.setSprite,args:[W.sprite]}),a.deepEqual(N.glyphs,W.glyphs)||G.push({command:bt.setGlyphs,args:[W.glyphs]}),a.deepEqual(N.transition,W.transition)||G.push({command:bt.setTransition,args:[W.transition]}),a.deepEqual(N.light,W.light)||G.push({command:bt.setLight,args:[W.light]});var L={},H=[];(function(ne,ce,xe,Le){var Re;for(Re in ce=ce||{},ne=ne||{})ne.hasOwnProperty(Re)&&(ce.hasOwnProperty(Re)||Pt(Re,xe,Le));for(Re in ce)ce.hasOwnProperty(Re)&&(ne.hasOwnProperty(Re)?a.deepEqual(ne[Re],ce[Re])||(ne[Re].type==="geojson"&&ce[Re].type==="geojson"&&Ft(ne,ce,Re)?xe.push({command:bt.setGeoJSONSourceData,args:[Re,ce[Re].data]}):Dt(Re,ce,xe,Le)):St(Re,ce,xe))})(N.sources,W.sources,H,L);var $=[];N.layers&&N.layers.forEach(function(ne){L[ne.source]?G.push({command:bt.removeLayer,args:[ne.id]}):$.push(ne)}),G=G.concat(H),function(ne,ce,xe){ce=ce||[];var Le,Re,Ue,He,tt,ct,dt,wt=(ne=ne||[]).map(an),Et=ce.map(an),kt=ne.reduce(Ht,{}),Bt=ce.reduce(Ht,{}),It=wt.slice(),Kt=Object.create(null);for(Le=0,Re=0;Le<wt.length;Le++)Ue=wt[Le],Bt.hasOwnProperty(Ue)?Re++:(xe.push({command:bt.removeLayer,args:[Ue]}),It.splice(It.indexOf(Ue,Re),1));for(Le=0,Re=0;Le<Et.length;Le++)Ue=Et[Et.length-1-Le],It[It.length-1-Le]!==Ue&&(kt.hasOwnProperty(Ue)?(xe.push({command:bt.removeLayer,args:[Ue]}),It.splice(It.lastIndexOf(Ue,It.length-Re),1)):Re++,ct=It[It.length-Le],xe.push({command:bt.addLayer,args:[Bt[Ue],ct]}),It.splice(It.length-Le,0,Ue),Kt[Ue]=!0);for(Le=0;Le<Et.length;Le++)if(He=kt[Ue=Et[Le]],tt=Bt[Ue],!Kt[Ue]&&!a.deepEqual(He,tt))if(a.deepEqual(He.source,tt.source)&&a.deepEqual(He["source-layer"],tt["source-layer"])&&a.deepEqual(He.type,tt.type)){for(dt in Xt(He.layout,tt.layout,xe,Ue,null,bt.setLayoutProperty),Xt(He.paint,tt.paint,xe,Ue,null,bt.setPaintProperty),a.deepEqual(He.filter,tt.filter)||xe.push({command:bt.setFilter,args:[Ue,tt.filter]}),a.deepEqual(He.minzoom,tt.minzoom)&&a.deepEqual(He.maxzoom,tt.maxzoom)||xe.push({command:bt.setLayerZoomRange,args:[Ue,tt.minzoom,tt.maxzoom]}),He)He.hasOwnProperty(dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?Xt(He[dt],tt[dt],xe,Ue,dt.slice(6),bt.setPaintProperty):a.deepEqual(He[dt],tt[dt])||xe.push({command:bt.setLayerProperty,args:[Ue,dt,tt[dt]]}));for(dt in tt)tt.hasOwnProperty(dt)&&!He.hasOwnProperty(dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?Xt(He[dt],tt[dt],xe,Ue,dt.slice(6),bt.setPaintProperty):a.deepEqual(He[dt],tt[dt])||xe.push({command:bt.setLayerProperty,args:[Ue,dt,tt[dt]]}))}else xe.push({command:bt.removeLayer,args:[Ue]}),ct=It[It.lastIndexOf(Ue)+1],xe.push({command:bt.addLayer,args:[tt,ct]})}($,W.layers,G)}catch(ne){console.warn("Unable to compute style diff:",ne),G=[{command:bt.setStyle,args:[W]}]}return G}var jt=function(N,W){this.reset(N,W)};jt.prototype.reset=function(N,W){this.points=N||[],this._distances=[0];for(var G=1;G<this.points.length;G++)this._distances[G]=this._distances[G-1]+this.points[G].dist(this.points[G-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(W||0,.5*this.length),this.paddedLength=this.length-2*this.padding},jt.prototype.lerp=function(N){if(this.points.length===1)return this.points[0];N=a.clamp(N,0,1);for(var W=1,G=this._distances[W],L=N*this.paddedLength+this.padding;G<L&&W<this._distances.length;)G=this._distances[++W];var H=W-1,$=this._distances[H],ne=G-$,ce=ne>0?(L-$)/ne:0;return this.points[H].mult(1-ce).add(this.points[W].mult(ce))};var Pn=function(N,W,G){var L=this.boxCells=[],H=this.circleCells=[];this.xCellCount=Math.ceil(N/G),this.yCellCount=Math.ceil(W/G);for(var $=0;$<this.xCellCount*this.yCellCount;$++)L.push([]),H.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=N,this.height=W,this.xScale=this.xCellCount/N,this.yScale=this.yCellCount/W,this.boxUid=0,this.circleUid=0};function Tn(N,W,G,L,H){var $=a.create();return W?(a.scale($,$,[1/H,1/H,1]),G||a.rotateZ($,$,L.angle)):a.multiply($,L.labelPlaneMatrix,N),$}function mn(N,W,G,L,H){if(W){var $=a.clone(N);return a.scale($,$,[H,H,1]),G||a.rotateZ($,$,-L.angle),$}return L.glCoordMatrix}function Qt(N,W){var G=[N.x,N.y,0,1];Qn(G,G,W);var L=G[3];return{point:new a.Point(G[0]/L,G[1]/L),signedDistanceFromCamera:L}}function un(N,W){return .5+N/W*.5}function nn(N,W){var G=N[0]/N[3],L=N[1]/N[3];return G>=-W[0]&&G<=W[0]&&L>=-W[1]&&L<=W[1]}function hn(N,W,G,L,H,$,ne,ce){var xe=L?N.textSizeData:N.iconSizeData,Le=a.evaluateSizeForZoom(xe,G.transform.zoom),Re=[256/G.width*2+1,256/G.height*2+1],Ue=L?N.text.dynamicLayoutVertexArray:N.icon.dynamicLayoutVertexArray;Ue.clear();for(var He=N.lineVertexArray,tt=L?N.text.placedSymbolArray:N.icon.placedSymbolArray,ct=G.transform.width/G.transform.height,dt=!1,wt=0;wt<tt.length;wt++){var Et=tt.get(wt);if(Et.hidden||Et.writingMode===a.WritingMode.vertical&&!dt)Rn(Et.numGlyphs,Ue);else{dt=!1;var kt=[Et.anchorX,Et.anchorY,0,1];if(a.transformMat4(kt,kt,W),nn(kt,Re)){var Bt=kt[3],It=un(G.transform.cameraToCenterDistance,Bt),Kt=a.evaluateSizeForFeature(xe,Le,Et),qt=ne?Kt/It:Kt*It,Vt=new a.Point(Et.anchorX,Et.anchorY),pn=Qt(Vt,H).point,yn={},Sn=Cn(Et,qt,!1,ce,W,H,$,N.glyphOffsetArray,He,Ue,pn,Vt,yn,ct);dt=Sn.useVertical,(Sn.notEnoughRoom||dt||Sn.needsFlipping&&Cn(Et,qt,!0,ce,W,H,$,N.glyphOffsetArray,He,Ue,pn,Vt,yn,ct).notEnoughRoom)&&Rn(Et.numGlyphs,Ue)}else Rn(Et.numGlyphs,Ue)}}L?N.text.dynamicLayoutVertexBuffer.updateData(Ue):N.icon.dynamicLayoutVertexBuffer.updateData(Ue)}function bn(N,W,G,L,H,$,ne,ce,xe,Le,Re){var Ue=ce.glyphStartIndex+ce.numGlyphs,He=ce.lineStartIndex,tt=ce.lineStartIndex+ce.lineLength,ct=W.getoffsetX(ce.glyphStartIndex),dt=W.getoffsetX(Ue-1),wt=Mn(N*ct,G,L,H,$,ne,ce.segment,He,tt,xe,Le,Re);if(!wt)return null;var Et=Mn(N*dt,G,L,H,$,ne,ce.segment,He,tt,xe,Le,Re);return Et?{first:wt,last:Et}:null}function wn(N,W,G,L){return N===a.WritingMode.horizontal&&Math.abs(G.y-W.y)>Math.abs(G.x-W.x)*L?{useVertical:!0}:(N===a.WritingMode.vertical?W.y<G.y:W.x>G.x)?{needsFlipping:!0}:null}function Cn(N,W,G,L,H,$,ne,ce,xe,Le,Re,Ue,He,tt){var ct,dt=W/24,wt=N.lineOffsetX*dt,Et=N.lineOffsetY*dt;if(N.numGlyphs>1){var kt=N.glyphStartIndex+N.numGlyphs,Bt=N.lineStartIndex,It=N.lineStartIndex+N.lineLength,Kt=bn(dt,ce,wt,Et,G,Re,Ue,N,xe,$,He);if(!Kt)return{notEnoughRoom:!0};var qt=Qt(Kt.first.point,ne).point,Vt=Qt(Kt.last.point,ne).point;if(L&&!G){var pn=wn(N.writingMode,qt,Vt,tt);if(pn)return pn}ct=[Kt.first];for(var yn=N.glyphStartIndex+1;yn<kt-1;yn++)ct.push(Mn(dt*ce.getoffsetX(yn),wt,Et,G,Re,Ue,N.segment,Bt,It,xe,$,He));ct.push(Kt.last)}else{if(L&&!G){var Sn=Qt(Ue,H).point,On=N.lineStartIndex+N.segment+1,Hn=new a.Point(xe.getx(On),xe.gety(On)),sr=Qt(Hn,H),dr=sr.signedDistanceFromCamera>0?sr.point:Ln(Ue,Hn,Sn,1,H),Zn=wn(N.writingMode,Sn,dr,tt);if(Zn)return Zn}var fr=Mn(dt*ce.getoffsetX(N.glyphStartIndex),wt,Et,G,Re,Ue,N.segment,N.lineStartIndex,N.lineStartIndex+N.lineLength,xe,$,He);if(!fr)return{notEnoughRoom:!0};ct=[fr]}for(var Ar=0,Or=ct;Ar<Or.length;Ar+=1){var ir=Or[Ar];a.addDynamicAttributes(Le,ir.point,ir.angle)}return{}}function Ln(N,W,G,L,H){var $=Qt(N.add(N.sub(W)._unit()),H).point,ne=G.sub($);return G.add(ne._mult(L/ne.mag()))}function Mn(N,W,G,L,H,$,ne,ce,xe,Le,Re,Ue){var He=L?N-W:N+W,tt=He>0?1:-1,ct=0;L&&(tt*=-1,ct=Math.PI),tt<0&&(ct+=Math.PI);for(var dt=tt>0?ce+ne:ce+ne+1,wt=H,Et=H,kt=0,Bt=0,It=Math.abs(He),Kt=[];kt+Bt<=It;){if((dt+=tt)<ce||dt>=xe)return null;if(Et=wt,Kt.push(wt),(wt=Ue[dt])===void 0){var qt=new a.Point(Le.getx(dt),Le.gety(dt)),Vt=Qt(qt,Re);if(Vt.signedDistanceFromCamera>0)wt=Ue[dt]=Vt.point;else{var pn=dt-tt;wt=Ln(kt===0?$:new a.Point(Le.getx(pn),Le.gety(pn)),qt,Et,It-kt+1,Re)}}kt+=Bt,Bt=Et.dist(wt)}var yn=(It-kt)/Bt,Sn=wt.sub(Et),On=Sn.mult(yn)._add(Et);On._add(Sn._unit()._perp()._mult(G*tt));var Hn=ct+Math.atan2(wt.y-Et.y,wt.x-Et.x);return Kt.push(On),{point:On,angle:Hn,path:Kt}}Pn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Pn.prototype.insert=function(N,W,G,L,H){this._forEachCell(W,G,L,H,this._insertBoxCell,this.boxUid++),this.boxKeys.push(N),this.bboxes.push(W),this.bboxes.push(G),this.bboxes.push(L),this.bboxes.push(H)},Pn.prototype.insertCircle=function(N,W,G,L){this._forEachCell(W-L,G-L,W+L,G+L,this._insertCircleCell,this.circleUid++),this.circleKeys.push(N),this.circles.push(W),this.circles.push(G),this.circles.push(L)},Pn.prototype._insertBoxCell=function(N,W,G,L,H,$){this.boxCells[H].push($)},Pn.prototype._insertCircleCell=function(N,W,G,L,H,$){this.circleCells[H].push($)},Pn.prototype._query=function(N,W,G,L,H,$){if(G<0||N>this.width||L<0||W>this.height)return!H&&[];var ne=[];if(N<=0&&W<=0&&this.width<=G&&this.height<=L){if(H)return!0;for(var ce=0;ce<this.boxKeys.length;ce++)ne.push({key:this.boxKeys[ce],x1:this.bboxes[4*ce],y1:this.bboxes[4*ce+1],x2:this.bboxes[4*ce+2],y2:this.bboxes[4*ce+3]});for(var xe=0;xe<this.circleKeys.length;xe++){var Le=this.circles[3*xe],Re=this.circles[3*xe+1],Ue=this.circles[3*xe+2];ne.push({key:this.circleKeys[xe],x1:Le-Ue,y1:Re-Ue,x2:Le+Ue,y2:Re+Ue})}return $?ne.filter($):ne}var He={hitTest:H,seenUids:{box:{},circle:{}}};return this._forEachCell(N,W,G,L,this._queryCell,ne,He,$),H?ne.length>0:ne},Pn.prototype._queryCircle=function(N,W,G,L,H){var $=N-G,ne=N+G,ce=W-G,xe=W+G;if(ne<0||$>this.width||xe<0||ce>this.height)return!L&&[];var Le=[],Re={hitTest:L,circle:{x:N,y:W,radius:G},seenUids:{box:{},circle:{}}};return this._forEachCell($,ce,ne,xe,this._queryCellCircle,Le,Re,H),L?Le.length>0:Le},Pn.prototype.query=function(N,W,G,L,H){return this._query(N,W,G,L,!1,H)},Pn.prototype.hitTest=function(N,W,G,L,H){return this._query(N,W,G,L,!0,H)},Pn.prototype.hitTestCircle=function(N,W,G,L){return this._queryCircle(N,W,G,!0,L)},Pn.prototype._queryCell=function(N,W,G,L,H,$,ne,ce){var xe=ne.seenUids,Le=this.boxCells[H];if(Le!==null)for(var Re=this.bboxes,Ue=0,He=Le;Ue<He.length;Ue+=1){var tt=He[Ue];if(!xe.box[tt]){xe.box[tt]=!0;var ct=4*tt;if(N<=Re[ct+2]&&W<=Re[ct+3]&&G>=Re[ct+0]&&L>=Re[ct+1]&&(!ce||ce(this.boxKeys[tt]))){if(ne.hitTest)return $.push(!0),!0;$.push({key:this.boxKeys[tt],x1:Re[ct],y1:Re[ct+1],x2:Re[ct+2],y2:Re[ct+3]})}}}var dt=this.circleCells[H];if(dt!==null)for(var wt=this.circles,Et=0,kt=dt;Et<kt.length;Et+=1){var Bt=kt[Et];if(!xe.circle[Bt]){xe.circle[Bt]=!0;var It=3*Bt;if(this._circleAndRectCollide(wt[It],wt[It+1],wt[It+2],N,W,G,L)&&(!ce||ce(this.circleKeys[Bt]))){if(ne.hitTest)return $.push(!0),!0;var Kt=wt[It],qt=wt[It+1],Vt=wt[It+2];$.push({key:this.circleKeys[Bt],x1:Kt-Vt,y1:qt-Vt,x2:Kt+Vt,y2:qt+Vt})}}}},Pn.prototype._queryCellCircle=function(N,W,G,L,H,$,ne,ce){var xe=ne.circle,Le=ne.seenUids,Re=this.boxCells[H];if(Re!==null)for(var Ue=this.bboxes,He=0,tt=Re;He<tt.length;He+=1){var ct=tt[He];if(!Le.box[ct]){Le.box[ct]=!0;var dt=4*ct;if(this._circleAndRectCollide(xe.x,xe.y,xe.radius,Ue[dt+0],Ue[dt+1],Ue[dt+2],Ue[dt+3])&&(!ce||ce(this.boxKeys[ct])))return $.push(!0),!0}}var wt=this.circleCells[H];if(wt!==null)for(var Et=this.circles,kt=0,Bt=wt;kt<Bt.length;kt+=1){var It=Bt[kt];if(!Le.circle[It]){Le.circle[It]=!0;var Kt=3*It;if(this._circlesCollide(Et[Kt],Et[Kt+1],Et[Kt+2],xe.x,xe.y,xe.radius)&&(!ce||ce(this.circleKeys[It])))return $.push(!0),!0}}},Pn.prototype._forEachCell=function(N,W,G,L,H,$,ne,ce){for(var xe=this._convertToXCellCoord(N),Le=this._convertToYCellCoord(W),Re=this._convertToXCellCoord(G),Ue=this._convertToYCellCoord(L),He=xe;He<=Re;He++)for(var tt=Le;tt<=Ue;tt++){var ct=this.xCellCount*tt+He;if(H.call(this,N,W,G,L,ct,$,ne,ce))return}},Pn.prototype._convertToXCellCoord=function(N){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(N*this.xScale)))},Pn.prototype._convertToYCellCoord=function(N){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(N*this.yScale)))},Pn.prototype._circlesCollide=function(N,W,G,L,H,$){var ne=L-N,ce=H-W,xe=G+$;return xe*xe>ne*ne+ce*ce},Pn.prototype._circleAndRectCollide=function(N,W,G,L,H,$,ne){var ce=($-L)/2,xe=Math.abs(N-(L+ce));if(xe>ce+G)return!1;var Le=(ne-H)/2,Re=Math.abs(W-(H+Le));if(Re>Le+G)return!1;if(xe<=ce||Re<=Le)return!0;var Ue=xe-ce,He=Re-Le;return Ue*Ue+He*He<=G*G};var jn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Rn(N,W){for(var G=0;G<N;G++){var L=W.length;W.resize(L+4),W.float32.set(jn,3*L)}}function Qn(N,W,G){var L=W[0],H=W[1];return N[0]=G[0]*L+G[4]*H+G[12],N[1]=G[1]*L+G[5]*H+G[13],N[3]=G[3]*L+G[7]*H+G[15],N}var Yn=100,ar=function(N,W,G){W===void 0&&(W=new Pn(N.width+200,N.height+200,25)),G===void 0&&(G=new Pn(N.width+200,N.height+200,25)),this.transform=N,this.grid=W,this.ignoredGrid=G,this.pitchfactor=Math.cos(N._pitch)*N.cameraToCenterDistance,this.screenRightBoundary=N.width+Yn,this.screenBottomBoundary=N.height+Yn,this.gridRightBoundary=N.width+200,this.gridBottomBoundary=N.height+200};function Kn(N,W,G){return W*(a.EXTENT/(N.tileSize*Math.pow(2,G-N.tileID.overscaledZ)))}ar.prototype.placeCollisionBox=function(N,W,G,L,H){var $=this.projectAndGetPerspectiveRatio(L,N.anchorPointX,N.anchorPointY),ne=G*$.perspectiveRatio,ce=N.x1*ne+$.point.x,xe=N.y1*ne+$.point.y,Le=N.x2*ne+$.point.x,Re=N.y2*ne+$.point.y;return!this.isInsideGrid(ce,xe,Le,Re)||!W&&this.grid.hitTest(ce,xe,Le,Re,H)?{box:[],offscreen:!1}:{box:[ce,xe,Le,Re],offscreen:this.isOffscreen(ce,xe,Le,Re)}},ar.prototype.placeCollisionCircles=function(N,W,G,L,H,$,ne,ce,xe,Le,Re,Ue,He){var tt=[],ct=new a.Point(W.anchorX,W.anchorY),dt=Qt(ct,$),wt=un(this.transform.cameraToCenterDistance,dt.signedDistanceFromCamera),Et=(Le?H/wt:H*wt)/a.ONE_EM,kt=Qt(ct,ne).point,Bt=bn(Et,L,W.lineOffsetX*Et,W.lineOffsetY*Et,!1,kt,ct,W,G,ne,{}),It=!1,Kt=!1,qt=!0;if(Bt){for(var Vt=.5*Ue*wt+He,pn=new a.Point(-100,-100),yn=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),Sn=new jt,On=Bt.first,Hn=Bt.last,sr=[],dr=On.path.length-1;dr>=1;dr--)sr.push(On.path[dr]);for(var Zn=1;Zn<Hn.path.length;Zn++)sr.push(Hn.path[Zn]);var fr=2.5*Vt;if(ce){var Ar=sr.map(function(li){return Qt(li,ce)});sr=Ar.some(function(li){return li.signedDistanceFromCamera<=0})?[]:Ar.map(function(li){return li.point})}var Or=[];if(sr.length>0){for(var ir=sr[0].clone(),ur=sr[0].clone(),Cr=1;Cr<sr.length;Cr++)ir.x=Math.min(ir.x,sr[Cr].x),ir.y=Math.min(ir.y,sr[Cr].y),ur.x=Math.max(ur.x,sr[Cr].x),ur.y=Math.max(ur.y,sr[Cr].y);Or=ir.x>=pn.x&&ur.x<=yn.x&&ir.y>=pn.y&&ur.y<=yn.y?[sr]:ur.x<pn.x||ir.x>yn.x||ur.y<pn.y||ir.y>yn.y?[]:a.clipLine([sr],pn.x,pn.y,yn.x,yn.y)}for(var pr=0,Ir=Or;pr<Ir.length;pr+=1){var Fr=Ir[pr];Sn.reset(Fr,.25*Vt);var Zr;Zr=Sn.length<=.5*Vt?1:Math.ceil(Sn.paddedLength/fr)+1;for(var Kr=0;Kr<Zr;Kr++){var ti=Kr/Math.max(Zr-1,1),oi=Sn.lerp(ti),Ei=oi.x+Yn,Xi=oi.y+Yn;tt.push(Ei,Xi,Vt,0);var Oa=Ei-Vt,ma=Xi-Vt,Sa=Ei+Vt,Di=Xi+Vt;if(qt=qt&&this.isOffscreen(Oa,ma,Sa,Di),Kt=Kt||this.isInsideGrid(Oa,ma,Sa,Di),!N&&this.grid.hitTestCircle(Ei,Xi,Vt,Re)&&(It=!0,!xe))return{circles:[],offscreen:!1,collisionDetected:It}}}}return{circles:!xe&&It||!Kt?[]:tt,offscreen:qt,collisionDetected:It}},ar.prototype.queryRenderedSymbols=function(N){if(N.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var W=[],G=1/0,L=1/0,H=-1/0,$=-1/0,ne=0,ce=N;ne<ce.length;ne+=1){var xe=ce[ne],Le=new a.Point(xe.x+Yn,xe.y+Yn);G=Math.min(G,Le.x),L=Math.min(L,Le.y),H=Math.max(H,Le.x),$=Math.max($,Le.y),W.push(Le)}for(var Re={},Ue={},He=0,tt=this.grid.query(G,L,H,$).concat(this.ignoredGrid.query(G,L,H,$));He<tt.length;He+=1){var ct=tt[He],dt=ct.key;if(Re[dt.bucketInstanceId]===void 0&&(Re[dt.bucketInstanceId]={}),!Re[dt.bucketInstanceId][dt.featureIndex]){var wt=[new a.Point(ct.x1,ct.y1),new a.Point(ct.x2,ct.y1),new a.Point(ct.x2,ct.y2),new a.Point(ct.x1,ct.y2)];a.polygonIntersectsPolygon(W,wt)&&(Re[dt.bucketInstanceId][dt.featureIndex]=!0,Ue[dt.bucketInstanceId]===void 0&&(Ue[dt.bucketInstanceId]=[]),Ue[dt.bucketInstanceId].push(dt.featureIndex))}}return Ue},ar.prototype.insertCollisionBox=function(N,W,G,L,H){var $={bucketInstanceId:G,featureIndex:L,collisionGroupID:H};(W?this.ignoredGrid:this.grid).insert($,N[0],N[1],N[2],N[3])},ar.prototype.insertCollisionCircles=function(N,W,G,L,H){for(var $=W?this.ignoredGrid:this.grid,ne={bucketInstanceId:G,featureIndex:L,collisionGroupID:H},ce=0;ce<N.length;ce+=4)$.insertCircle(ne,N[ce],N[ce+1],N[ce+2])},ar.prototype.projectAndGetPerspectiveRatio=function(N,W,G){var L=[W,G,0,1];return Qn(L,L,N),{point:new a.Point((L[0]/L[3]+1)/2*this.transform.width+Yn,(-L[1]/L[3]+1)/2*this.transform.height+Yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/L[3]*.5}},ar.prototype.isOffscreen=function(N,W,G,L){return G<Yn||N>=this.screenRightBoundary||L<Yn||W>this.screenBottomBoundary},ar.prototype.isInsideGrid=function(N,W,G,L){return G>=0&&N<this.gridRightBoundary&&L>=0&&W<this.gridBottomBoundary},ar.prototype.getViewportMatrix=function(){var N=a.identity([]);return a.translate(N,N,[-100,-100,0]),N};var mr=function(N,W,G,L){this.opacity=N?Math.max(0,Math.min(1,N.opacity+(N.placed?W:-W))):L&&G?1:0,this.placed=G};mr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var en=function(N,W,G,L,H){this.text=new mr(N?N.text:null,W,G,H),this.icon=new mr(N?N.icon:null,W,L,H)};en.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var rn=function(N,W,G){this.text=N,this.icon=W,this.skipFade=G},En=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},gn=function(N,W,G,L,H){this.bucketInstanceId=N,this.featureIndex=W,this.sourceLayerIndex=G,this.bucketIndex=L,this.tileID=H},Dn=function(N){this.crossSourceCollisions=N,this.maxGroupID=0,this.collisionGroups={}};function qn(N,W,G,L,H){var $=a.getAnchorAlignment(N),ne=-($.horizontalAlign-.5)*W,ce=-($.verticalAlign-.5)*G,xe=a.evaluateVariableOffset(N,L);return new a.Point(ne+xe[0]*H,ce+xe[1]*H)}function Vn(N,W,G,L,H,$){var ne=N.x1,ce=N.x2,xe=N.y1,Le=N.y2,Re=N.anchorPointX,Ue=N.anchorPointY,He=new a.Point(W,G);return L&&He._rotate(H?$:-$),{x1:ne+He.x,y1:xe+He.y,x2:ce+He.x,y2:Le+He.y,anchorPointX:Re,anchorPointY:Ue}}Dn.prototype.get=function(N){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[N]){var W=++this.maxGroupID;this.collisionGroups[N]={ID:W,predicate:function(G){return G.collisionGroupID===W}}}return this.collisionGroups[N]};var Jn=function(N,W,G,L){this.transform=N.clone(),this.collisionIndex=new ar(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=W,this.retainedQueryData={},this.collisionGroups=new Dn(G),this.collisionCircleArrays={},this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}};function xr(N,W,G,L,H){N.emplaceBack(W?1:0,G?1:0,L||0,H||0),N.emplaceBack(W?1:0,G?1:0,L||0,H||0),N.emplaceBack(W?1:0,G?1:0,L||0,H||0),N.emplaceBack(W?1:0,G?1:0,L||0,H||0)}Jn.prototype.getBucketParts=function(N,W,G,L){var H=G.getBucket(W),$=G.latestFeatureIndex;if(H&&$&&W.id===H.layerIds[0]){var ne=G.collisionBoxArray,ce=H.layers[0].layout,xe=Math.pow(2,this.transform.zoom-G.tileID.overscaledZ),Le=G.tileSize/a.EXTENT,Re=this.transform.calculatePosMatrix(G.tileID.toUnwrapped()),Ue=ce.get("text-pitch-alignment")==="map",He=ce.get("text-rotation-alignment")==="map",tt=Kn(G,1,this.transform.zoom),ct=Tn(Re,Ue,He,this.transform,tt),dt=null;if(Ue){var wt=mn(Re,Ue,He,this.transform,tt);dt=a.multiply([],this.transform.labelPlaneMatrix,wt)}this.retainedQueryData[H.bucketInstanceId]=new gn(H.bucketInstanceId,$,H.sourceLayerIndex,H.index,G.tileID);var Et={bucket:H,layout:ce,posMatrix:Re,textLabelPlaneMatrix:ct,labelToScreenMatrix:dt,scale:xe,textPixelRatio:Le,holdingForFade:G.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(H.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(H.sourceID)};if(L)for(var kt=0,Bt=H.sortKeyRanges;kt<Bt.length;kt+=1){var It=Bt[kt],Kt=It.sortKey,qt=It.symbolInstanceStart,Vt=It.symbolInstanceEnd;N.push({sortKey:Kt,symbolInstanceStart:qt,symbolInstanceEnd:Vt,parameters:Et})}else N.push({symbolInstanceStart:0,symbolInstanceEnd:H.symbolInstances.length,parameters:Et})}},Jn.prototype.attemptAnchorPlacement=function(N,W,G,L,H,$,ne,ce,xe,Le,Re,Ue,He,tt,ct){var dt,wt=[Ue.textOffset0,Ue.textOffset1],Et=qn(N,G,L,wt,H),kt=this.collisionIndex.placeCollisionBox(Vn(W,Et.x,Et.y,$,ne,this.transform.angle),Re,ce,xe,Le.predicate);if(!ct||this.collisionIndex.placeCollisionBox(Vn(ct,Et.x,Et.y,$,ne,this.transform.angle),Re,ce,xe,Le.predicate).box.length!==0)return kt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(dt=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),this.variableOffsets[Ue.crossTileID]={textOffset:wt,width:G,height:L,anchor:N,textBoxScale:H,prevAnchor:dt},this.markUsedJustification(He,N,Ue,tt),He.allowVerticalPlacement&&(this.markUsedOrientation(He,tt,Ue),this.placedOrientations[Ue.crossTileID]=tt),{shift:Et,placedGlyphBoxes:kt}):void 0},Jn.prototype.placeLayerBucketPart=function(N,W,G){var L=this,H=N.parameters,$=H.bucket,ne=H.layout,ce=H.posMatrix,xe=H.textLabelPlaneMatrix,Le=H.labelToScreenMatrix,Re=H.textPixelRatio,Ue=H.holdingForFade,He=H.collisionBoxArray,tt=H.partiallyEvaluatedTextSize,ct=H.collisionGroup,dt=ne.get("text-optional"),wt=ne.get("icon-optional"),Et=ne.get("text-allow-overlap"),kt=ne.get("icon-allow-overlap"),Bt=ne.get("text-rotation-alignment")==="map",It=ne.get("text-pitch-alignment")==="map",Kt=ne.get("icon-text-fit")!=="none",qt=ne.get("symbol-z-order")==="viewport-y",Vt=Et&&(kt||!$.hasIconData()||wt),pn=kt&&(Et||!$.hasTextData()||dt);!$.collisionArrays&&He&&$.deserializeCollisionBoxes(He);var yn=function(Zn,fr){if(!W[Zn.crossTileID])if(Ue)L.placements[Zn.crossTileID]=new rn(!1,!1,!1);else{var Ar,Or=!1,ir=!1,ur=!0,Cr=null,pr={box:null,offscreen:null},Ir={box:null,offscreen:null},Fr=null,Zr=null,Kr=0,ti=0,oi=0;fr.textFeatureIndex?Kr=fr.textFeatureIndex:Zn.useRuntimeCollisionCircles&&(Kr=Zn.featureIndex),fr.verticalTextFeatureIndex&&(ti=fr.verticalTextFeatureIndex);var Ei=fr.textBox;if(Ei){var Xi=function(Hi){var io=a.WritingMode.horizontal;if($.allowVerticalPlacement&&!Hi&&L.prevPlacement){var wa=L.prevPlacement.placedOrientations[Zn.crossTileID];wa&&(L.placedOrientations[Zn.crossTileID]=wa,io=wa,L.markUsedOrientation($,io,Zn))}return io},Oa=function(Hi,io){if($.allowVerticalPlacement&&Zn.numVerticalGlyphVertices>0&&fr.verticalTextBox)for(var wa=0,eu=$.writingModes;wa<eu.length&&(eu[wa]===a.WritingMode.vertical?(pr=io(),Ir=pr):pr=Hi(),!(pr&&pr.box&&pr.box.length));wa+=1);else pr=Hi()};if(ne.get("text-variable-anchor")){var ma=ne.get("text-variable-anchor");if(L.prevPlacement&&L.prevPlacement.variableOffsets[Zn.crossTileID]){var Sa=L.prevPlacement.variableOffsets[Zn.crossTileID];ma.indexOf(Sa.anchor)>0&&(ma=ma.filter(function(Hi){return Hi!==Sa.anchor})).unshift(Sa.anchor)}var Di=function(Hi,io,wa){for(var eu=Hi.x2-Hi.x1,ad=Hi.y2-Hi.y1,Nf=Zn.textBoxScale,od=Kt&&!kt?io:null,Lc={box:[],offscreen:!1},sd=Et?2*ma.length:ma.length,Ic=0;Ic<sd;++Ic){var jf=ma[Ic%ma.length],Uf=Ic>=ma.length,Xl=L.attemptAnchorPlacement(jf,Hi,eu,ad,Nf,Bt,It,Re,ce,ct,Uf,Zn,$,wa,od);if(Xl&&(Lc=Xl.placedGlyphBoxes)&&Lc.box&&Lc.box.length){Or=!0,Cr=Xl.shift;break}}return Lc};Oa(function(){return Di(Ei,fr.iconBox,a.WritingMode.horizontal)},function(){var Hi=fr.verticalTextBox,io=pr&&pr.box&&pr.box.length;return $.allowVerticalPlacement&&!io&&Zn.numVerticalGlyphVertices>0&&Hi?Di(Hi,fr.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),pr&&(Or=pr.box,ur=pr.offscreen);var li=Xi(pr&&pr.box);if(!Or&&L.prevPlacement){var Ui=L.prevPlacement.variableOffsets[Zn.crossTileID];Ui&&(L.variableOffsets[Zn.crossTileID]=Ui,L.markUsedJustification($,Ui.anchor,Zn,li))}}else{var wi=function(Hi,io){var wa=L.collisionIndex.placeCollisionBox(Hi,Et,Re,ce,ct.predicate);return wa&&wa.box&&wa.box.length&&(L.markUsedOrientation($,io,Zn),L.placedOrientations[Zn.crossTileID]=io),wa};Oa(function(){return wi(Ei,a.WritingMode.horizontal)},function(){var Hi=fr.verticalTextBox;return $.allowVerticalPlacement&&Zn.numVerticalGlyphVertices>0&&Hi?wi(Hi,a.WritingMode.vertical):{box:null,offscreen:null}}),Xi(pr&&pr.box&&pr.box.length)}}if(Or=(Ar=pr)&&Ar.box&&Ar.box.length>0,ur=Ar&&Ar.offscreen,Zn.useRuntimeCollisionCircles){var di=$.text.placedSymbolArray.get(Zn.centerJustifiedTextSymbolIndex),Vi=a.evaluateSizeForFeature($.textSizeData,tt,di),Zi=ne.get("text-padding"),sa=Zn.collisionCircleDiameter;Fr=L.collisionIndex.placeCollisionCircles(Et,di,$.lineVertexArray,$.glyphOffsetArray,Vi,ce,xe,Le,G,It,ct.predicate,sa,Zi),Or=Et||Fr.circles.length>0&&!Fr.collisionDetected,ur=ur&&Fr.offscreen}if(fr.iconFeatureIndex&&(oi=fr.iconFeatureIndex),fr.iconBox){var sl=function(Hi){var io=Kt&&Cr?Vn(Hi,Cr.x,Cr.y,Bt,It,L.transform.angle):Hi;return L.collisionIndex.placeCollisionBox(io,kt,Re,ce,ct.predicate)};ir=Ir&&Ir.box&&Ir.box.length&&fr.verticalIconBox?(Zr=sl(fr.verticalIconBox)).box.length>0:(Zr=sl(fr.iconBox)).box.length>0,ur=ur&&Zr.offscreen}var ll=dt||Zn.numHorizontalGlyphVertices===0&&Zn.numVerticalGlyphVertices===0,pi=wt||Zn.numIconVertices===0;if(ll||pi?pi?ll||(ir=ir&&Or):Or=ir&&Or:ir=Or=ir&&Or,Or&&Ar&&Ar.box&&(Ir&&Ir.box&&ti?L.collisionIndex.insertCollisionBox(Ar.box,ne.get("text-ignore-placement"),$.bucketInstanceId,ti,ct.ID):L.collisionIndex.insertCollisionBox(Ar.box,ne.get("text-ignore-placement"),$.bucketInstanceId,Kr,ct.ID)),ir&&Zr&&L.collisionIndex.insertCollisionBox(Zr.box,ne.get("icon-ignore-placement"),$.bucketInstanceId,oi,ct.ID),Fr&&(Or&&L.collisionIndex.insertCollisionCircles(Fr.circles,ne.get("text-ignore-placement"),$.bucketInstanceId,Kr,ct.ID),G)){var Yl=$.bucketInstanceId,Ll=L.collisionCircleArrays[Yl];Ll===void 0&&(Ll=L.collisionCircleArrays[Yl]=new En);for(var as=0;as<Fr.circles.length;as+=4)Ll.circles.push(Fr.circles[as+0]),Ll.circles.push(Fr.circles[as+1]),Ll.circles.push(Fr.circles[as+2]),Ll.circles.push(Fr.collisionDetected?1:0)}L.placements[Zn.crossTileID]=new rn(Or||Vt,ir||pn,ur||$.justReloaded),W[Zn.crossTileID]=!0}};if(qt)for(var Sn=$.getSortedSymbolIndexes(this.transform.angle),On=Sn.length-1;On>=0;--On){var Hn=Sn[On];yn($.symbolInstances.get(Hn),$.collisionArrays[Hn])}else for(var sr=N.symbolInstanceStart;sr<N.symbolInstanceEnd;sr++)yn($.symbolInstances.get(sr),$.collisionArrays[sr]);if(G&&$.bucketInstanceId in this.collisionCircleArrays){var dr=this.collisionCircleArrays[$.bucketInstanceId];a.invert(dr.invProjMatrix,ce),dr.viewportMatrix=this.collisionIndex.getViewportMatrix()}$.justReloaded=!1},Jn.prototype.markUsedJustification=function(N,W,G,L){var H,$={left:G.leftJustifiedTextSymbolIndex,center:G.centerJustifiedTextSymbolIndex,right:G.rightJustifiedTextSymbolIndex};H=L===a.WritingMode.vertical?G.verticalPlacedTextSymbolIndex:$[a.getAnchorJustification(W)];for(var ne=0,ce=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex,G.verticalPlacedTextSymbolIndex];ne<ce.length;ne+=1){var xe=ce[ne];xe>=0&&(N.text.placedSymbolArray.get(xe).crossTileID=H>=0&&xe!==H?0:G.crossTileID)}},Jn.prototype.markUsedOrientation=function(N,W,G){for(var L=W===a.WritingMode.horizontal||W===a.WritingMode.horizontalOnly?W:0,H=W===a.WritingMode.vertical?W:0,$=0,ne=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex];$<ne.length;$+=1){var ce=ne[$];N.text.placedSymbolArray.get(ce).placedOrientation=L}G.verticalPlacedTextSymbolIndex&&(N.text.placedSymbolArray.get(G.verticalPlacedTextSymbolIndex).placedOrientation=H)},Jn.prototype.commit=function(N){this.commitTime=N,this.zoomAtLastRecencyCheck=this.transform.zoom;var W=this.prevPlacement,G=!1;this.prevZoomAdjustment=W?W.zoomAdjustment(this.transform.zoom):0;var L=W?W.symbolFadeChange(N):1,H=W?W.opacities:{},$=W?W.variableOffsets:{},ne=W?W.placedOrientations:{};for(var ce in this.placements){var xe=this.placements[ce],Le=H[ce];Le?(this.opacities[ce]=new en(Le,L,xe.text,xe.icon),G=G||xe.text!==Le.text.placed||xe.icon!==Le.icon.placed):(this.opacities[ce]=new en(null,L,xe.text,xe.icon,xe.skipFade),G=G||xe.text||xe.icon)}for(var Re in H){var Ue=H[Re];if(!this.opacities[Re]){var He=new en(Ue,L,!1,!1);He.isHidden()||(this.opacities[Re]=He,G=G||Ue.text.placed||Ue.icon.placed)}}for(var tt in $)this.variableOffsets[tt]||!this.opacities[tt]||this.opacities[tt].isHidden()||(this.variableOffsets[tt]=$[tt]);for(var ct in ne)this.placedOrientations[ct]||!this.opacities[ct]||this.opacities[ct].isHidden()||(this.placedOrientations[ct]=ne[ct]);G?this.lastPlacementChangeTime=N:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=W?W.lastPlacementChangeTime:N)},Jn.prototype.updateLayerOpacities=function(N,W){for(var G={},L=0,H=W;L<H.length;L+=1){var $=H[L],ne=$.getBucket(N);ne&&$.latestFeatureIndex&&N.id===ne.layerIds[0]&&this.updateBucketOpacities(ne,G,$.collisionBoxArray)}},Jn.prototype.updateBucketOpacities=function(N,W,G){var L=this;N.hasTextData()&&N.text.opacityVertexArray.clear(),N.hasIconData()&&N.icon.opacityVertexArray.clear(),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexArray.clear(),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexArray.clear();var H=N.layers[0].layout,$=new en(null,0,!1,!1,!0),ne=H.get("text-allow-overlap"),ce=H.get("icon-allow-overlap"),xe=H.get("text-variable-anchor"),Le=H.get("text-rotation-alignment")==="map",Re=H.get("text-pitch-alignment")==="map",Ue=H.get("icon-text-fit")!=="none",He=new en(null,0,ne&&(ce||!N.hasIconData()||H.get("icon-optional")),ce&&(ne||!N.hasTextData()||H.get("text-optional")),!0);!N.collisionArrays&&G&&(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData())&&N.deserializeCollisionBoxes(G);for(var tt=function(Et,kt,Bt){for(var It=0;It<kt/4;It++)Et.opacityVertexArray.emplaceBack(Bt)},ct=function(Et){var kt=N.symbolInstances.get(Et),Bt=kt.numHorizontalGlyphVertices,It=kt.numVerticalGlyphVertices,Kt=kt.crossTileID,qt=W[Kt],Vt=L.opacities[Kt];qt?Vt=$:Vt||(Vt=He,L.opacities[Kt]=Vt),W[Kt]=!0;var pn=Bt>0||It>0,yn=kt.numIconVertices>0,Sn=L.placedOrientations[kt.crossTileID],On=Sn===a.WritingMode.vertical,Hn=Sn===a.WritingMode.horizontal||Sn===a.WritingMode.horizontalOnly;if(pn){var sr=xn(Vt.text),dr=On?sn:sr;tt(N.text,Bt,dr);var Zn=Hn?sn:sr;tt(N.text,It,Zn);var fr=Vt.text.isHidden();[kt.rightJustifiedTextSymbolIndex,kt.centerJustifiedTextSymbolIndex,kt.leftJustifiedTextSymbolIndex].forEach(function(oi){oi>=0&&(N.text.placedSymbolArray.get(oi).hidden=fr||On?1:0)}),kt.verticalPlacedTextSymbolIndex>=0&&(N.text.placedSymbolArray.get(kt.verticalPlacedTextSymbolIndex).hidden=fr||Hn?1:0);var Ar=L.variableOffsets[kt.crossTileID];Ar&&L.markUsedJustification(N,Ar.anchor,kt,Sn);var Or=L.placedOrientations[kt.crossTileID];Or&&(L.markUsedJustification(N,"left",kt,Or),L.markUsedOrientation(N,Or,kt))}if(yn){var ir=xn(Vt.icon),ur=!(Ue&&kt.verticalPlacedIconSymbolIndex&&On);if(kt.placedIconSymbolIndex>=0){var Cr=ur?ir:sn;tt(N.icon,kt.numIconVertices,Cr),N.icon.placedSymbolArray.get(kt.placedIconSymbolIndex).hidden=Vt.icon.isHidden()}if(kt.verticalPlacedIconSymbolIndex>=0){var pr=ur?sn:ir;tt(N.icon,kt.numVerticalIconVertices,pr),N.icon.placedSymbolArray.get(kt.verticalPlacedIconSymbolIndex).hidden=Vt.icon.isHidden()}}if(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData()){var Ir=N.collisionArrays[Et];if(Ir){var Fr=new a.Point(0,0);if(Ir.textBox||Ir.verticalTextBox){var Zr=!0;if(xe){var Kr=L.variableOffsets[Kt];Kr?(Fr=qn(Kr.anchor,Kr.width,Kr.height,Kr.textOffset,Kr.textBoxScale),Le&&Fr._rotate(Re?L.transform.angle:-L.transform.angle)):Zr=!1}Ir.textBox&&xr(N.textCollisionBox.collisionVertexArray,Vt.text.placed,!Zr||On,Fr.x,Fr.y),Ir.verticalTextBox&&xr(N.textCollisionBox.collisionVertexArray,Vt.text.placed,!Zr||Hn,Fr.x,Fr.y)}var ti=!!(!Hn&&Ir.verticalIconBox);Ir.iconBox&&xr(N.iconCollisionBox.collisionVertexArray,Vt.icon.placed,ti,Ue?Fr.x:0,Ue?Fr.y:0),Ir.verticalIconBox&&xr(N.iconCollisionBox.collisionVertexArray,Vt.icon.placed,!ti,Ue?Fr.x:0,Ue?Fr.y:0)}}},dt=0;dt<N.symbolInstances.length;dt++)ct(dt);if(N.sortFeatures(this.transform.angle),this.retainedQueryData[N.bucketInstanceId]&&(this.retainedQueryData[N.bucketInstanceId].featureSortOrder=N.featureSortOrder),N.hasTextData()&&N.text.opacityVertexBuffer&&N.text.opacityVertexBuffer.updateData(N.text.opacityVertexArray),N.hasIconData()&&N.icon.opacityVertexBuffer&&N.icon.opacityVertexBuffer.updateData(N.icon.opacityVertexArray),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexBuffer&&N.iconCollisionBox.collisionVertexBuffer.updateData(N.iconCollisionBox.collisionVertexArray),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexBuffer&&N.textCollisionBox.collisionVertexBuffer.updateData(N.textCollisionBox.collisionVertexArray),N.bucketInstanceId in this.collisionCircleArrays){var wt=this.collisionCircleArrays[N.bucketInstanceId];N.placementInvProjMatrix=wt.invProjMatrix,N.placementViewportMatrix=wt.viewportMatrix,N.collisionCircleArray=wt.circles,delete this.collisionCircleArrays[N.bucketInstanceId]}},Jn.prototype.symbolFadeChange=function(N){return this.fadeDuration===0?1:(N-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Jn.prototype.zoomAdjustment=function(N){return Math.max(0,(this.transform.zoom-N)/1.5)},Jn.prototype.hasTransitions=function(N){return this.stale||N-this.lastPlacementChangeTime<this.fadeDuration},Jn.prototype.stillRecent=function(N,W){var G=this.zoomAtLastRecencyCheck===W?1-this.zoomAdjustment(W):1;return this.zoomAtLastRecencyCheck=W,this.commitTime+this.fadeDuration*G>N},Jn.prototype.setStale=function(){this.stale=!0};var Jt=Math.pow(2,25),vn=Math.pow(2,24),Lt=Math.pow(2,17),Nt=Math.pow(2,16),$t=Math.pow(2,9),fn=Math.pow(2,8),dn=Math.pow(2,1);function xn(N){if(N.opacity===0&&!N.placed)return 0;if(N.opacity===1&&N.placed)return 4294967295;var W=N.placed?1:0,G=Math.floor(127*N.opacity);return G*Jt+W*vn+G*Lt+W*Nt+G*$t+W*fn+G*dn+W}var sn=0,Yt=function(N){this._sortAcrossTiles=N.layout.get("symbol-z-order")!=="viewport-y"&&N.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yt.prototype.continuePlacement=function(N,W,G,L,H){for(var $=this._bucketParts;this._currentTileIndex<N.length;){var ne=N[this._currentTileIndex];if(W.getBucketParts($,L,ne,this._sortAcrossTiles),this._currentTileIndex++,H())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,$.sort(function(xe,Le){return xe.sortKey-Le.sortKey}));this._currentPartIndex<$.length;){var ce=$[this._currentPartIndex];if(W.placeLayerBucketPart(ce,this._seenCrossTileIDs,G),this._currentPartIndex++,H())return!0}return!1};var Wt=function(N,W,G,L,H,$,ne){this.placement=new Jn(N,H,$,ne),this._currentPlacementIndex=W.length-1,this._forceFullPlacement=G,this._showCollisionBoxes=L,this._done=!1};Wt.prototype.isDone=function(){return this._done},Wt.prototype.continuePlacement=function(N,W,G){for(var L=this,H=a.browser.now(),$=function(){var xe=a.browser.now()-H;return!L._forceFullPlacement&&xe>2};this._currentPlacementIndex>=0;){var ne=W[N[this._currentPlacementIndex]],ce=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=ce)&&(!ne.maxzoom||ne.maxzoom>ce)){if(this._inProgressLayer||(this._inProgressLayer=new Yt(ne)),this._inProgressLayer.continuePlacement(G[ne.source],this.placement,this._showCollisionBoxes,ne,$))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Wt.prototype.commit=function(N){return this.placement.commit(N),this.placement};var tn=512/a.EXTENT/2,ln=function(N,W,G){this.tileID=N,this.indexedSymbolInstances={},this.bucketInstanceId=G;for(var L=0;L<W.length;L++){var H=W.get(L),$=H.key;this.indexedSymbolInstances[$]||(this.indexedSymbolInstances[$]=[]),this.indexedSymbolInstances[$].push({crossTileID:H.crossTileID,coord:this.getScaledCoordinates(H,N)})}};ln.prototype.getScaledCoordinates=function(N,W){var G=W.canonical.z-this.tileID.canonical.z,L=tn/Math.pow(2,G);return{x:Math.floor((W.canonical.x*a.EXTENT+N.anchorX)*L),y:Math.floor((W.canonical.y*a.EXTENT+N.anchorY)*L)}},ln.prototype.findMatches=function(N,W,G){for(var L=this.tileID.canonical.z<W.canonical.z?1:Math.pow(2,this.tileID.canonical.z-W.canonical.z),H=0;H<N.length;H++){var $=N.get(H);if(!$.crossTileID){var ne=this.indexedSymbolInstances[$.key];if(ne)for(var ce=this.getScaledCoordinates($,W),xe=0,Le=ne;xe<Le.length;xe+=1){var Re=Le[xe];if(Math.abs(Re.coord.x-ce.x)<=L&&Math.abs(Re.coord.y-ce.y)<=L&&!G[Re.crossTileID]){G[Re.crossTileID]=!0,$.crossTileID=Re.crossTileID;break}}}}};var An=function(){this.maxCrossTileID=0};An.prototype.generate=function(){return++this.maxCrossTileID};var In=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};In.prototype.handleWrapJump=function(N){var W=Math.round((N-this.lng)/360);if(W!==0)for(var G in this.indexes){var L=this.indexes[G],H={};for(var $ in L){var ne=L[$];ne.tileID=ne.tileID.unwrapTo(ne.tileID.wrap+W),H[ne.tileID.key]=ne}this.indexes[G]=H}this.lng=N},In.prototype.addBucket=function(N,W,G){if(this.indexes[N.overscaledZ]&&this.indexes[N.overscaledZ][N.key]){if(this.indexes[N.overscaledZ][N.key].bucketInstanceId===W.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(N.overscaledZ,this.indexes[N.overscaledZ][N.key])}for(var L=0;L<W.symbolInstances.length;L++)W.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[N.overscaledZ]||(this.usedCrossTileIDs[N.overscaledZ]={});var H=this.usedCrossTileIDs[N.overscaledZ];for(var $ in this.indexes){var ne=this.indexes[$];if(Number($)>N.overscaledZ)for(var ce in ne){var xe=ne[ce];xe.tileID.isChildOf(N)&&xe.findMatches(W.symbolInstances,N,H)}else{var Le=ne[N.scaledTo(Number($)).key];Le&&Le.findMatches(W.symbolInstances,N,H)}}for(var Re=0;Re<W.symbolInstances.length;Re++){var Ue=W.symbolInstances.get(Re);Ue.crossTileID||(Ue.crossTileID=G.generate(),H[Ue.crossTileID]=!0)}return this.indexes[N.overscaledZ]===void 0&&(this.indexes[N.overscaledZ]={}),this.indexes[N.overscaledZ][N.key]=new ln(N,W.symbolInstances,W.bucketInstanceId),!0},In.prototype.removeBucketCrossTileIDs=function(N,W){for(var G in W.indexedSymbolInstances)for(var L=0,H=W.indexedSymbolInstances[G];L<H.length;L+=1){var $=H[L];delete this.usedCrossTileIDs[N][$.crossTileID]}},In.prototype.removeStaleBuckets=function(N){var W=!1;for(var G in this.indexes){var L=this.indexes[G];for(var H in L)N[L[H].bucketInstanceId]||(this.removeBucketCrossTileIDs(G,L[H]),delete L[H],W=!0)}return W};var zn=function(){this.layerIndexes={},this.crossTileIDs=new An,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};zn.prototype.addLayer=function(N,W,G){var L=this.layerIndexes[N.id];L===void 0&&(L=this.layerIndexes[N.id]=new In);var H=!1,$={};L.handleWrapJump(G);for(var ne=0,ce=W;ne<ce.length;ne+=1){var xe=ce[ne],Le=xe.getBucket(N);Le&&N.id===Le.layerIds[0]&&(Le.bucketInstanceId||(Le.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(xe.tileID,Le,this.crossTileIDs)&&(H=!0),$[Le.bucketInstanceId]=!0)}return L.removeStaleBuckets($)&&(H=!0),H},zn.prototype.pruneUnusedLayers=function(N){var W={};for(var G in N.forEach(function(L){W[L]=!0}),this.layerIndexes)W[G]||delete this.layerIndexes[G]};var Un=function(N,W){return a.emitValidationErrors(N,W&&W.filter(function(G){return G.identifier!=="source.canvas"}))},rr=a.pick(bt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Xn=a.pick(bt,["setCenter","setZoom","setBearing","setPitch"]),er=function(){var N={},W=a.styleSpec.$version;for(var G in a.styleSpec.$root){var L=a.styleSpec.$root[G];if(L.required){var H;(H=G==="version"?W:L.type==="array"?[]:{})!=null&&(N[G]=H)}}return N}(),or=function(N){function W(G,L){var H=this;L===void 0&&(L={}),N.call(this),this.map=G,this.dispatcher=new P(vt(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new v(G._requestManager,L.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new zn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var $=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(ne){var ce={pluginStatus:ne.pluginStatus,pluginURL:ne.pluginURL};$.dispatcher.broadcast("syncRTLPluginState",ce,function(xe,Le){if(a.triggerPluginCompletionEvent(xe),Le&&Le.every(function(Ue){return Ue}))for(var Re in $.sourceCaches)$.sourceCaches[Re].reload()})}),this.on("data",function(ne){if(ne.dataType==="source"&&ne.sourceDataType==="metadata"){var ce=H.sourceCaches[ne.sourceId];if(ce){var xe=ce.getSource();if(xe&&xe.vectorLayerIds)for(var Le in H._layers){var Re=H._layers[Le];Re.source===xe.id&&H._validateLayer(Re)}}}})}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.loadURL=function(G,L){var H=this;L===void 0&&(L={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var $=typeof L.validate=="boolean"?L.validate:!a.isMapboxURL(G);G=this.map._requestManager.normalizeStyleURL(G,L.accessToken);var ne=this.map._requestManager.transformRequest(G,a.ResourceType.Style);this._request=a.getJSON(ne,function(ce,xe){H._request=null,ce?H.fire(new a.ErrorEvent(ce)):xe&&H._load(xe,$)})},W.prototype.loadJSON=function(G,L){var H=this;L===void 0&&(L={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){H._request=null,H._load(G,L.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(er,!1)},W.prototype._load=function(G,L){if(!L||!Un(this,a.validateStyle(G))){for(var H in this._loaded=!0,this.stylesheet=G,G.sources)this.addSource(H,G.sources[H],{validate:!1});G.sprite?this._loadSprite(G.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(G.glyphs);var $=Mt(this.stylesheet.layers);this._order=$.map(function(Le){return Le.id}),this._layers={},this._serializedLayers={};for(var ne=0,ce=$;ne<ce.length;ne+=1){var xe=ce[ne];(xe=a.createStyleLayer(xe)).setEventedParent(this,{layer:{id:xe.id}}),this._layers[xe.id]=xe,this._serializedLayers[xe.id]=xe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},W.prototype._loadSprite=function(G){var L=this;this._spriteRequest=function(H,$,ne){var ce,xe,Le,Re=a.browser.devicePixelRatio>1?"@2x":"",Ue=a.getJSON($.transformRequest($.normalizeSpriteURL(H,Re,".json"),a.ResourceType.SpriteJSON),function(ct,dt){Ue=null,Le||(Le=ct,ce=dt,tt())}),He=a.getImage($.transformRequest($.normalizeSpriteURL(H,Re,".png"),a.ResourceType.SpriteImage),function(ct,dt){He=null,Le||(Le=ct,xe=dt,tt())});function tt(){if(Le)ne(Le);else if(ce&&xe){var ct=a.browser.getImageData(xe),dt={};for(var wt in ce){var Et=ce[wt],kt=Et.width,Bt=Et.height,It=Et.x,Kt=Et.y,qt=Et.sdf,Vt=Et.pixelRatio,pn=Et.stretchX,yn=Et.stretchY,Sn=Et.content,On=new a.RGBAImage({width:kt,height:Bt});a.RGBAImage.copy(ct,On,{x:It,y:Kt},{x:0,y:0},{width:kt,height:Bt}),dt[wt]={data:On,pixelRatio:Vt,sdf:qt,stretchX:pn,stretchY:yn,content:Sn}}ne(null,dt)}}return{cancel:function(){Ue&&(Ue.cancel(),Ue=null),He&&(He.cancel(),He=null)}}}(G,this.map._requestManager,function(H,$){if(L._spriteRequest=null,H)L.fire(new a.ErrorEvent(H));else if($)for(var ne in $)L.imageManager.addImage(ne,$[ne]);L.imageManager.setLoaded(!0),L._availableImages=L.imageManager.listImages(),L.dispatcher.broadcast("setImages",L._availableImages),L.fire(new a.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(G){var L=this.sourceCaches[G.source];if(L){var H=G.sourceLayer;if(H){var $=L.getSource();($.type==="geojson"||$.vectorLayerIds&&$.vectorLayerIds.indexOf(H)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+H+'" does not exist on source "'+$.id+'" as specified by style layer "'+G.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var G in this.sourceCaches)if(!this.sourceCaches[G].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(G){for(var L=[],H=0,$=G;H<$.length;H+=1){var ne=$[H],ce=this._layers[ne];ce.type!=="custom"&&L.push(ce.serialize())}return L},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var G in this.sourceCaches)if(this.sourceCaches[G].hasTransition())return!0;for(var L in this._layers)if(this._layers[L].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(G){if(this._loaded){var L=this._changed;if(this._changed){var H=Object.keys(this._updatedLayers),$=Object.keys(this._removedLayers);for(var ne in(H.length||$.length)&&this._updateWorkerLayers(H,$),this._updatedSources){var ce=this._updatedSources[ne];ce==="reload"?this._reloadSource(ne):ce==="clear"&&this._clearSource(ne)}for(var xe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[xe].updateTransitions(G);this.light.updateTransitions(G),this._resetUpdates()}var Le={};for(var Re in this.sourceCaches){var Ue=this.sourceCaches[Re];Le[Re]=Ue.used,Ue.used=!1}for(var He=0,tt=this._order;He<tt.length;He+=1){var ct=tt[He],dt=this._layers[ct];dt.recalculate(G,this._availableImages),!dt.isHidden(G.zoom)&&dt.source&&(this.sourceCaches[dt.source].used=!0)}for(var wt in Le){var Et=this.sourceCaches[wt];Le[wt]!==Et.used&&Et.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:wt}))}this.light.recalculate(G),this.z=G.zoom,L&&this.fire(new a.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var G=Object.keys(this._changedImages);if(G.length){for(var L in this.sourceCaches)this.sourceCaches[L].reloadTilesForDependencies(["icons","patterns"],G);this._changedImages={}}},W.prototype._updateWorkerLayers=function(G,L){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(G),removedIds:L})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(G){var L=this;if(this._checkLoaded(),Un(this,a.validateStyle(G)))return!1;(G=a.clone$1(G)).layers=Mt(G.layers);var H=Zt(this.serialize(),G).filter(function(ne){return!(ne.command in Xn)});if(H.length===0)return!1;var $=H.filter(function(ne){return!(ne.command in rr)});if($.length>0)throw new Error("Unimplemented: "+$.map(function(ne){return ne.command}).join(", ")+".");return H.forEach(function(ne){ne.command!=="setTransition"&&L[ne.command].apply(L,ne.args)}),this.stylesheet=G,!0},W.prototype.addImage=function(G,L){if(this.getImage(G))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(G,L),this._afterImageUpdated(G)},W.prototype.updateImage=function(G,L){this.imageManager.updateImage(G,L)},W.prototype.getImage=function(G){return this.imageManager.getImage(G)},W.prototype.removeImage=function(G){if(!this.getImage(G))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(G),this._afterImageUpdated(G)},W.prototype._afterImageUpdated=function(G){this._availableImages=this.imageManager.listImages(),this._changedImages[G]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(G,L,H){var $=this;if(H===void 0&&(H={}),this._checkLoaded(),this.sourceCaches[G]!==void 0)throw new Error("There is already a source with this ID");if(!L.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(L).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(L.type)>=0&&this._validate(a.validateStyle.source,"sources."+G,L,null,H))){this.map&&this.map._collectResourceTiming&&(L.collectResourceTiming=!0);var ne=this.sourceCaches[G]=new ot(G,L,this.dispatcher);ne.style=this,ne.setEventedParent(this,function(){return{isSourceLoaded:$.loaded(),source:ne.serialize(),sourceId:G}}),ne.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(G){if(this._checkLoaded(),this.sourceCaches[G]===void 0)throw new Error("There is no source with this ID");for(var L in this._layers)if(this._layers[L].source===G)return this.fire(new a.ErrorEvent(new Error('Source "'+G+'" cannot be removed while layer "'+L+'" is using it.')));var H=this.sourceCaches[G];delete this.sourceCaches[G],delete this._updatedSources[G],H.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:G})),H.setEventedParent(null),H.clearTiles(),H.onRemove&&H.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(G,L){this._checkLoaded(),this.sourceCaches[G].getSource().setData(L),this._changed=!0},W.prototype.getSource=function(G){return this.sourceCaches[G]&&this.sourceCaches[G].getSource()},W.prototype.addLayer=function(G,L,H){H===void 0&&(H={}),this._checkLoaded();var $=G.id;if(this.getLayer($))this.fire(new a.ErrorEvent(new Error('Layer with id "'+$+'" already exists on this map')));else{var ne;if(G.type==="custom"){if(Un(this,a.validateCustomStyleLayer(G)))return;ne=a.createStyleLayer(G)}else{if(typeof G.source=="object"&&(this.addSource($,G.source),G=a.clone$1(G),G=a.extend(G,{source:$})),this._validate(a.validateStyle.layer,"layers."+$,G,{arrayIndex:-1},H))return;ne=a.createStyleLayer(G),this._validateLayer(ne),ne.setEventedParent(this,{layer:{id:$}}),this._serializedLayers[ne.id]=ne.serialize()}var ce=L?this._order.indexOf(L):this._order.length;if(L&&ce===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.')));else{if(this._order.splice(ce,0,$),this._layerOrderChanged=!0,this._layers[$]=ne,this._removedLayers[$]&&ne.source&&ne.type!=="custom"){var xe=this._removedLayers[$];delete this._removedLayers[$],xe.type!==ne.type?this._updatedSources[ne.source]="clear":(this._updatedSources[ne.source]="reload",this.sourceCaches[ne.source].pause())}this._updateLayer(ne),ne.onAdd&&ne.onAdd(this.map)}}},W.prototype.moveLayer=function(G,L){if(this._checkLoaded(),this._changed=!0,this._layers[G]){if(G!==L){var H=this._order.indexOf(G);this._order.splice(H,1);var $=L?this._order.indexOf(L):this._order.length;L&&$===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.'))):(this._order.splice($,0,G),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be moved.")))},W.prototype.removeLayer=function(G){this._checkLoaded();var L=this._layers[G];if(L){L.setEventedParent(null);var H=this._order.indexOf(G);this._order.splice(H,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[G]=L,delete this._layers[G],delete this._serializedLayers[G],delete this._updatedLayers[G],delete this._updatedPaintProps[G],L.onRemove&&L.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be removed.")))},W.prototype.getLayer=function(G){return this._layers[G]},W.prototype.hasLayer=function(G){return G in this._layers},W.prototype.setLayerZoomRange=function(G,L,H){this._checkLoaded();var $=this.getLayer(G);$?$.minzoom===L&&$.maxzoom===H||(L!=null&&($.minzoom=L),H!=null&&($.maxzoom=H),this._updateLayer($)):this.fire(new a.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot have zoom extent.")))},W.prototype.setFilter=function(G,L,H){H===void 0&&(H={}),this._checkLoaded();var $=this.getLayer(G);if($){if(!a.deepEqual($.filter,L))return L==null?($.filter=void 0,void this._updateLayer($)):void(this._validate(a.validateStyle.filter,"layers."+$.id+".filter",L,null,H)||($.filter=a.clone$1(L),this._updateLayer($)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be filtered.")))},W.prototype.getFilter=function(G){return a.clone$1(this.getLayer(G).filter)},W.prototype.setLayoutProperty=function(G,L,H,$){$===void 0&&($={}),this._checkLoaded();var ne=this.getLayer(G);ne?a.deepEqual(ne.getLayoutProperty(L),H)||(ne.setLayoutProperty(L,H,$),this._updateLayer(ne)):this.fire(new a.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getLayoutProperty=function(G,L){var H=this.getLayer(G);if(H)return H.getLayoutProperty(L);this.fire(new a.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style.")))},W.prototype.setPaintProperty=function(G,L,H,$){$===void 0&&($={}),this._checkLoaded();var ne=this.getLayer(G);ne?a.deepEqual(ne.getPaintProperty(L),H)||(ne.setPaintProperty(L,H,$)&&this._updateLayer(ne),this._changed=!0,this._updatedPaintProps[G]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getPaintProperty=function(G,L){return this.getLayer(G).getPaintProperty(L)},W.prototype.setFeatureState=function(G,L){this._checkLoaded();var H=G.source,$=G.sourceLayer,ne=this.sourceCaches[H];if(ne!==void 0){var ce=ne.getSource().type;ce==="geojson"&&$?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ce!=="vector"||$?(G.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),ne.setFeatureState($,G.id,L)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},W.prototype.removeFeatureState=function(G,L){this._checkLoaded();var H=G.source,$=this.sourceCaches[H];if($!==void 0){var ne=$.getSource().type,ce=ne==="vector"?G.sourceLayer:void 0;ne!=="vector"||ce?L&&typeof G.id!="string"&&typeof G.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):$.removeFeatureState(ce,G.id,L):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},W.prototype.getFeatureState=function(G){this._checkLoaded();var L=G.source,H=G.sourceLayer,$=this.sourceCaches[L];if($!==void 0){if($.getSource().type!=="vector"||H)return G.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),$.getFeatureState(H,G.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},W.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(G){return G.serialize()}),layers:this._serializeLayers(this._order)},function(G){return G!==void 0})},W.prototype._updateLayer=function(G){this._updatedLayers[G.id]=!0,G.source&&!this._updatedSources[G.source]&&this.sourceCaches[G.source].getSource().type!=="raster"&&(this._updatedSources[G.source]="reload",this.sourceCaches[G.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(G){for(var L=this,H=function(Sn){return L._layers[Sn].type==="fill-extrusion"},$={},ne=[],ce=this._order.length-1;ce>=0;ce--){var xe=this._order[ce];if(H(xe)){$[xe]=ce;for(var Le=0,Re=G;Le<Re.length;Le+=1){var Ue=Re[Le][xe];if(Ue)for(var He=0,tt=Ue;He<tt.length;He+=1){var ct=tt[He];ne.push(ct)}}}}ne.sort(function(Sn,On){return On.intersectionZ-Sn.intersectionZ});for(var dt=[],wt=this._order.length-1;wt>=0;wt--){var Et=this._order[wt];if(H(Et))for(var kt=ne.length-1;kt>=0;kt--){var Bt=ne[kt].feature;if($[Bt.layer.id]<wt)break;dt.push(Bt),ne.pop()}else for(var It=0,Kt=G;It<Kt.length;It+=1){var qt=Kt[It][Et];if(qt)for(var Vt=0,pn=qt;Vt<pn.length;Vt+=1){var yn=pn[Vt];dt.push(yn.feature)}}}return dt},W.prototype.queryRenderedFeatures=function(G,L,H){L&&L.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",L.filter,null,L);var $={};if(L&&L.layers){if(!Array.isArray(L.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ne=0,ce=L.layers;ne<ce.length;ne+=1){var xe=ce[ne],Le=this._layers[xe];if(!Le)return this.fire(new a.ErrorEvent(new Error("The layer '"+xe+"' does not exist in the map's style and cannot be queried for features."))),[];$[Le.source]=!0}}var Re=[];for(var Ue in L.availableImages=this._availableImages,this.sourceCaches)L.layers&&!$[Ue]||Re.push(Q(this.sourceCaches[Ue],this._layers,this._serializedLayers,G,L,H));return this.placement&&Re.push(function(He,tt,ct,dt,wt,Et,kt){for(var Bt={},It=Et.queryRenderedSymbols(dt),Kt=[],qt=0,Vt=Object.keys(It).map(Number);qt<Vt.length;qt+=1){var pn=Vt[qt];Kt.push(kt[pn])}Kt.sort(J);for(var yn=function(){var dr=On[Sn],Zn=dr.featureIndex.lookupSymbolFeatures(It[dr.bucketInstanceId],tt,dr.bucketIndex,dr.sourceLayerIndex,wt.filter,wt.layers,wt.availableImages,He);for(var fr in Zn){var Ar=Bt[fr]=Bt[fr]||[],Or=Zn[fr];Or.sort(function(pr,Ir){var Fr=dr.featureSortOrder;if(Fr){var Zr=Fr.indexOf(pr.featureIndex);return Fr.indexOf(Ir.featureIndex)-Zr}return Ir.featureIndex-pr.featureIndex});for(var ir=0,ur=Or;ir<ur.length;ir+=1){var Cr=ur[ir];Ar.push(Cr)}}},Sn=0,On=Kt;Sn<On.length;Sn+=1)yn();var Hn=function(dr){Bt[dr].forEach(function(Zn){var fr=Zn.feature,Ar=He[dr],Or=ct[Ar.source].getFeatureState(fr.layer["source-layer"],fr.id);fr.source=fr.layer.source,fr.layer["source-layer"]&&(fr.sourceLayer=fr.layer["source-layer"]),fr.state=Or})};for(var sr in Bt)Hn(sr);return Bt}(this._layers,this._serializedLayers,this.sourceCaches,G,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Re)},W.prototype.querySourceFeatures=function(G,L){L&&L.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",L.filter,null,L);var H=this.sourceCaches[G];return H?function($,ne){for(var ce=$.getRenderableIds().map(function(tt){return $.getTileByID(tt)}),xe=[],Le={},Re=0;Re<ce.length;Re++){var Ue=ce[Re],He=Ue.tileID.canonical.key;Le[He]||(Le[He]=!0,Ue.querySourceFeatures(xe,ne))}return xe}(H,L):[]},W.prototype.addSourceType=function(G,L,H){return W.getSourceType(G)?H(new Error('A source type called "'+G+'" already exists.')):(W.setSourceType(G,L),L.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:G,url:L.workerSourceURL},H):H(null,null))},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(G,L){L===void 0&&(L={}),this._checkLoaded();var H=this.light.getLight(),$=!1;for(var ne in G)if(!a.deepEqual(G[ne],H[ne])){$=!0;break}if($){var ce={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(G,L),this.light.updateTransitions(ce)}},W.prototype._validate=function(G,L,H,$,ne){return ne===void 0&&(ne={}),(!ne||ne.validate!==!1)&&Un(this,G.call(a.validateStyle,a.extend({key:L,style:this.serialize(),value:H,styleSpec:a.styleSpec},$)))},W.prototype._remove=function(){for(var G in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[G].setEventedParent(null);for(var L in this.sourceCaches)this.sourceCaches[L].clearTiles(),this.sourceCaches[L].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(G){this.sourceCaches[G].clearTiles()},W.prototype._reloadSource=function(G){this.sourceCaches[G].resume(),this.sourceCaches[G].reload()},W.prototype._updateSources=function(G){for(var L in this.sourceCaches)this.sourceCaches[L].update(G)},W.prototype._generateCollisionBoxes=function(){for(var G in this.sourceCaches)this._reloadSource(G)},W.prototype._updatePlacement=function(G,L,H,$,ne){ne===void 0&&(ne=!1);for(var ce=!1,xe=!1,Le={},Re=0,Ue=this._order;Re<Ue.length;Re+=1){var He=Ue[Re],tt=this._layers[He];if(tt.type==="symbol"){if(!Le[tt.source]){var ct=this.sourceCaches[tt.source];Le[tt.source]=ct.getRenderableIds(!0).map(function(It){return ct.getTileByID(It)}).sort(function(It,Kt){return Kt.tileID.overscaledZ-It.tileID.overscaledZ||(It.tileID.isLessThan(Kt.tileID)?-1:1)})}var dt=this.crossTileSymbolIndex.addLayer(tt,Le[tt.source],G.center.lng);ce=ce||dt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ne=ne||this._layerOrderChanged||H===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),G.zoom))&&(this.pauseablePlacement=new Wt(G,this._order,ne,L,H,$,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),xe=!0),ce&&this.pauseablePlacement.placement.setStale()),xe||ce)for(var wt=0,Et=this._order;wt<Et.length;wt+=1){var kt=Et[wt],Bt=this._layers[kt];Bt.type==="symbol"&&this.placement.updateLayerOpacities(Bt,Le[Bt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},W.prototype._releaseSymbolFadeTiles=function(){for(var G in this.sourceCaches)this.sourceCaches[G].releaseSymbolFadeTiles()},W.prototype.getImages=function(G,L,H){this.imageManager.getImages(L.icons,H),this._updateTilesForChangedImages();var $=this.sourceCaches[L.source];$&&$.setDependencies(L.tileID.key,L.type,L.icons)},W.prototype.getGlyphs=function(G,L,H){this.glyphManager.getGlyphs(L.stacks,H)},W.prototype.getResource=function(G,L,H){return a.makeRequest(L,H)},W}(a.Evented);or.getSourceType=function(N){return te[N]},or.setSourceType=function(N,W){te[N]=W},or.registerForPluginStateChange=a.registerForPluginStateChange;var tr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),gr=bi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Mr=bi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),br=bi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),cr=bi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),wr=bi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Pr=bi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Hr=bi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ai=bi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Mi=bi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ia=bi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ti=bi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),ji=bi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ba=bi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Gr=bi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fa=bi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),so=bi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),oa=bi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Zo=bi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),fs=bi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Aa=bi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Do=bi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Oo=bi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),hs=bi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),lo=bi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),xo=bi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),bo=bi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function bi(N,W){var G=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,L=W.match(/attribute ([\w]+) ([\w]+)/g),H=N.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=W.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=$?$.concat(H):H,ce={};return{fragmentSource:N=N.replace(G,function(xe,Le,Re,Ue,He){return ce[He]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
varying `+Re+" "+Ue+" "+He+`;
#else
uniform `+Re+" "+Ue+" u_"+He+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+He+`
    `+Re+" "+Ue+" "+He+" = u_"+He+`;
#endif
`}),vertexSource:W=W.replace(G,function(xe,Le,Re,Ue,He){var tt=Ue==="float"?"vec2":"vec4",ct=He.match(/color/)?"color":tt;return ce[He]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
uniform lowp float u_`+He+`_t;
attribute `+Re+" "+tt+" a_"+He+`;
varying `+Re+" "+Ue+" "+He+`;
#else
uniform `+Re+" "+Ue+" u_"+He+`;
#endif
`:ct==="vec4"?`
#ifndef HAS_UNIFORM_u_`+He+`
    `+He+" = a_"+He+`;
#else
    `+Re+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+He+`
    `+He+" = unpack_mix_"+ct+"(a_"+He+", u_"+He+`_t);
#else
    `+Re+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
uniform lowp float u_`+He+`_t;
attribute `+Re+" "+tt+" a_"+He+`;
#else
uniform `+Re+" "+Ue+" u_"+He+`;
#endif
`:ct==="vec4"?`
#ifndef HAS_UNIFORM_u_`+He+`
    `+Re+" "+Ue+" "+He+" = a_"+He+`;
#else
    `+Re+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+He+`
    `+Re+" "+Ue+" "+He+" = unpack_mix_"+ct+"(a_"+He+", u_"+He+`_t);
#else
    `+Re+" "+Ue+" "+He+" = u_"+He+`;
#endif
`}),staticAttributes:L,staticUniforms:ne}}var ha=Object.freeze({__proto__:null,prelude:gr,background:Mr,backgroundPattern:br,circle:cr,clippingMask:wr,heatmap:Pr,heatmapTexture:Hr,collisionBox:Ai,collisionCircle:Mi,debug:ia,fill:Ti,fillOutline:ji,fillOutlinePattern:Ba,fillPattern:Gr,fillExtrusion:fa,fillExtrusionPattern:so,hillshadePrepare:oa,hillshade:Zo,line:fs,lineGradient:Aa,linePattern:Do,lineSDF:Oo,raster:hs,symbolIcon:lo,symbolSDF:xo,symbolTextAndIcon:bo}),Ko=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ro(N){for(var W=[],G=0;G<N.length;G++)if(N[G]!==null){var L=N[G].split(" ");W.push(L.pop())}return W}Ko.prototype.bind=function(N,W,G,L,H,$,ne,ce){this.context=N;for(var xe=this.boundPaintVertexBuffers.length!==L.length,Le=0;!xe&&Le<L.length;Le++)this.boundPaintVertexBuffers[Le]!==L[Le]&&(xe=!0);var Re=!this.vao||this.boundProgram!==W||this.boundLayoutVertexBuffer!==G||xe||this.boundIndexBuffer!==H||this.boundVertexOffset!==$||this.boundDynamicVertexBuffer!==ne||this.boundDynamicVertexBuffer2!==ce;!N.extVertexArrayObject||Re?this.freshBind(W,G,L,H,$,ne,ce):(N.bindVertexArrayOES.set(this.vao),ne&&ne.bind(),H&&H.dynamicDraw&&H.bind(),ce&&ce.bind())},Ko.prototype.freshBind=function(N,W,G,L,H,$,ne){var ce,xe=N.numAttributes,Le=this.context,Re=Le.gl;if(Le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Le.extVertexArrayObject.createVertexArrayOES(),Le.bindVertexArrayOES.set(this.vao),ce=0,this.boundProgram=N,this.boundLayoutVertexBuffer=W,this.boundPaintVertexBuffers=G,this.boundIndexBuffer=L,this.boundVertexOffset=H,this.boundDynamicVertexBuffer=$,this.boundDynamicVertexBuffer2=ne;else{ce=Le.currentNumAttributes||0;for(var Ue=xe;Ue<ce;Ue++)Re.disableVertexAttribArray(Ue)}W.enableAttributes(Re,N);for(var He=0,tt=G;He<tt.length;He+=1)tt[He].enableAttributes(Re,N);$&&$.enableAttributes(Re,N),ne&&ne.enableAttributes(Re,N),W.bind(),W.setVertexAttribPointers(Re,N,H);for(var ct=0,dt=G;ct<dt.length;ct+=1){var wt=dt[ct];wt.bind(),wt.setVertexAttribPointers(Re,N,H)}$&&($.bind(),$.setVertexAttribPointers(Re,N,H)),L&&L.bind(),ne&&(ne.bind(),ne.setVertexAttribPointers(Re,N,H)),Le.currentNumAttributes=xe},Ko.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var _o=function(N,W,G,L,H,$){var ne=N.gl;this.program=ne.createProgram();for(var ce=Ro(G.staticAttributes),xe=L?L.getBinderAttributes():[],Le=ce.concat(xe),Re=G.staticUniforms?Ro(G.staticUniforms):[],Ue=L?L.getBinderUniforms():[],He=[],tt=0,ct=Re.concat(Ue);tt<ct.length;tt+=1){var dt=ct[tt];He.indexOf(dt)<0&&He.push(dt)}var wt=L?L.defines():[];$&&wt.push("#define OVERDRAW_INSPECTOR;");var Et=wt.concat(gr.fragmentSource,G.fragmentSource).join(`
`),kt=wt.concat(gr.vertexSource,G.vertexSource).join(`
`),Bt=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(Bt,Et),ne.compileShader(Bt),ne.attachShader(this.program,Bt);var It=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(It,kt),ne.compileShader(It),ne.attachShader(this.program,It),this.attributes={};var Kt={};this.numAttributes=Le.length;for(var qt=0;qt<this.numAttributes;qt++)Le[qt]&&(ne.bindAttribLocation(this.program,qt,Le[qt]),this.attributes[Le[qt]]=qt);ne.linkProgram(this.program),ne.deleteShader(It),ne.deleteShader(Bt);for(var Vt=0;Vt<He.length;Vt++){var pn=He[Vt];if(pn&&!Kt[pn]){var yn=ne.getUniformLocation(this.program,pn);yn&&(Kt[pn]=yn)}}this.fixedUniforms=H(N,Kt),this.binderUniforms=L?L.getUniforms(N,Kt):[]}}};function ds(N,W,G){var L=1/Kn(G,1,W.transform.tileZoom),H=Math.pow(2,G.tileID.overscaledZ),$=G.tileSize*Math.pow(2,W.transform.tileZoom)/H,ne=$*(G.tileID.canonical.x+G.tileID.wrap*H),ce=$*G.tileID.canonical.y;return{u_image:0,u_texsize:G.imageAtlasTexture.size,u_scale:[L,N.fromScale,N.toScale],u_fade:N.t,u_pixel_coord_upper:[ne>>16,ce>>16],u_pixel_coord_lower:[65535&ne,65535&ce]}}_o.prototype.draw=function(N,W,G,L,H,$,ne,ce,xe,Le,Re,Ue,He,tt,ct,dt){var wt,Et=N.gl;if(!this.failedToCreate){for(var kt in N.program.set(this.program),N.setDepthMode(G),N.setStencilMode(L),N.setColorMode(H),N.setCullFace($),this.fixedUniforms)this.fixedUniforms[kt].set(ne[kt]);tt&&tt.setUniforms(N,this.binderUniforms,Ue,{zoom:He});for(var Bt=(wt={},wt[Et.LINES]=2,wt[Et.TRIANGLES]=3,wt[Et.LINE_STRIP]=1,wt)[W],It=0,Kt=Re.get();It<Kt.length;It+=1){var qt=Kt[It],Vt=qt.vaos||(qt.vaos={});(Vt[ce]||(Vt[ce]=new Ko)).bind(N,this,xe,tt?tt.getPaintVertexBuffers():[],Le,qt.vertexOffset,ct,dt),Et.drawElements(W,qt.primitiveLength*Bt,Et.UNSIGNED_SHORT,qt.primitiveOffset*Bt*2)}}};var zo=function(N,W,G,L){var H=W.style.light,$=H.properties.get("position"),ne=[$.x,$.y,$.z],ce=a.create$1();H.properties.get("anchor")==="viewport"&&a.fromRotation(ce,-W.transform.angle),a.transformMat3(ne,ne,ce);var xe=H.properties.get("color");return{u_matrix:N,u_lightpos:ne,u_lightintensity:H.properties.get("intensity"),u_lightcolor:[xe.r,xe.g,xe.b],u_vertical_gradient:+G,u_opacity:L}},ps=function(N,W,G,L,H,$,ne){return a.extend(zo(N,W,G,L),ds($,W,ne),{u_height_factor:-Math.pow(2,H.overscaledZ)/ne.tileSize/8})},Jo=function(N){return{u_matrix:N}},ms=function(N,W,G,L){return a.extend(Jo(N),ds(G,W,L))},Fo=function(N,W){return{u_matrix:N,u_world:W}},fc=function(N,W,G,L,H){return a.extend(ms(N,W,G,L),{u_world:H})},jl=function(N,W,G,L){var H,$,ne=N.transform;if(L.paint.get("circle-pitch-alignment")==="map"){var ce=Kn(G,1,ne.zoom);H=!0,$=[ce,ce]}else H=!1,$=ne.pixelsToGLUnits;return{u_camera_to_center_distance:ne.cameraToCenterDistance,u_scale_with_map:+(L.paint.get("circle-pitch-scale")==="map"),u_matrix:N.translatePosMatrix(W.posMatrix,G,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_pitch_with_map:+H,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:$}},Os=function(N,W,G){var L=Kn(G,1,W.zoom),H=Math.pow(2,W.zoom-G.tileID.overscaledZ),$=G.tileID.overscaleFactor();return{u_matrix:N,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:L,u_extrude_scale:[W.pixelsToGLUnits[0]/(L*H),W.pixelsToGLUnits[1]/(L*H)],u_overscale_factor:$}},Tc=function(N,W,G){return{u_matrix:N,u_inv_matrix:W,u_camera_to_center_distance:G.cameraToCenterDistance,u_viewport_size:[G.width,G.height]}},kc=function(N,W,G){return G===void 0&&(G=1),{u_matrix:N,u_color:W,u_overlay:0,u_overlay_scale:G}},Rs=function(N){return{u_matrix:N}},Ac=function(N,W,G,L){return{u_matrix:N,u_extrude_scale:Kn(W,1,G),u_intensity:L}},Zc=function(N,W,G,L){var H=a.create();a.ortho(H,0,N.width,N.height,0,0,1);var $=N.context.gl;return{u_matrix:H,u_world:[$.drawingBufferWidth,$.drawingBufferHeight],u_image:G,u_color_ramp:L,u_opacity:W.paint.get("heatmap-opacity")}},Kc=function(N,W,G){var L=G.paint.get("hillshade-shadow-color"),H=G.paint.get("hillshade-highlight-color"),$=G.paint.get("hillshade-accent-color"),ne=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=N.transform.angle);var ce,xe,Le,Re=!N.options.moving;return{u_matrix:N.transform.calculatePosMatrix(W.tileID.toUnwrapped(),Re),u_image:0,u_latrange:(ce=W.tileID,xe=Math.pow(2,ce.canonical.z),Le=ce.canonical.y,[new a.MercatorCoordinate(0,Le/xe).toLngLat().lat,new a.MercatorCoordinate(0,(Le+1)/xe).toLngLat().lat]),u_light:[G.paint.get("hillshade-exaggeration"),ne],u_shadow:L,u_highlight:H,u_accent:$}},zs=function(N,W){var G=W.stride,L=a.create();return a.ortho(L,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(L,L,[0,-a.EXTENT,0]),{u_matrix:L,u_image:1,u_dimension:[G,G],u_zoom:N.overscaledZ,u_unpack:W.getUnpackVector()}},Bo=function(N,W,G){var L=N.transform;return{u_matrix:wo(N,W,G),u_ratio:1/Kn(W,1,L.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},Zs=function(N,W,G,L){return a.extend(Bo(N,W,G),{u_image:0,u_image_height:L})},Fs=function(N,W,G,L){var H=N.transform,$=Bs(W,H);return{u_matrix:wo(N,W,G),u_texsize:W.imageAtlasTexture.size,u_ratio:1/Kn(W,1,H.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[$,L.fromScale,L.toScale],u_fade:L.t,u_units_to_pixels:[1/H.pixelsToGLUnits[0],1/H.pixelsToGLUnits[1]]}},bl=function(N,W,G,L,H){var $=N.transform,ne=N.lineAtlas,ce=Bs(W,$),xe=G.layout.get("line-cap")==="round",Le=ne.getDash(L.from,xe),Re=ne.getDash(L.to,xe),Ue=Le.width*H.fromScale,He=Re.width*H.toScale;return a.extend(Bo(N,W,G),{u_patternscale_a:[ce/Ue,-Le.height/2],u_patternscale_b:[ce/He,-Re.height/2],u_sdfgamma:ne.width/(256*Math.min(Ue,He)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Le.y,u_tex_y_b:Re.y,u_mix:H.t})};function Bs(N,W){return 1/Kn(N,1,W.tileZoom)}function wo(N,W,G){return N.translatePosMatrix(W.tileID.posMatrix,W,G.paint.get("line-translate"),G.paint.get("line-translate-anchor"))}var hc=function(N,W,G,L,H){return{u_matrix:N,u_tl_parent:W,u_scale_parent:G,u_buffer_scale:1,u_fade_t:L.mix,u_opacity:L.opacity*H.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:H.paint.get("raster-brightness-min"),u_brightness_high:H.paint.get("raster-brightness-max"),u_saturation_factor:(ne=H.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:($=H.paint.get("raster-contrast"),$>0?1/(1-$):1+$),u_spin_weights:gs(H.paint.get("raster-hue-rotate"))};var $,ne};function gs(N){N*=Math.PI/180;var W=Math.sin(N),G=Math.cos(N);return[(2*G+1)/3,(-Math.sqrt(3)*W-G+1)/3,(Math.sqrt(3)*W-G+1)/3]}var $o,Qo=function(N,W,G,L,H,$,ne,ce,xe,Le){var Re=H.transform;return{u_is_size_zoom_constant:+(N==="constant"||N==="source"),u_is_size_feature_constant:+(N==="constant"||N==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:Re.cameraToCenterDistance,u_pitch:Re.pitch/360*2*Math.PI,u_rotate_symbol:+G,u_aspect_ratio:Re.width/Re.height,u_fade_change:H.options.fadeDuration?H.symbolFadeChange:1,u_matrix:$,u_label_plane_matrix:ne,u_coord_matrix:ce,u_is_text:+xe,u_pitch_with_map:+L,u_texsize:Le,u_texture:0}},vs=function(N,W,G,L,H,$,ne,ce,xe,Le,Re){var Ue=H.transform;return a.extend(Qo(N,W,G,L,H,$,ne,ce,xe,Le),{u_gamma_scale:L?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+Re})},ni=function(N,W,G,L,H,$,ne,ce,xe,Le){return a.extend(vs(N,W,G,L,H,$,ne,ce,!0,xe,!0),{u_texsize_icon:Le,u_texture_icon:1})},Ks=function(N,W,G){return{u_matrix:N,u_opacity:W,u_color:G}},Jc=function(N,W,G,L,H,$){return a.extend(function(ne,ce,xe,Le){var Re=xe.imageManager.getPattern(ne.from.toString()),Ue=xe.imageManager.getPattern(ne.to.toString()),He=xe.imageManager.getPixelSize(),tt=He.width,ct=He.height,dt=Math.pow(2,Le.tileID.overscaledZ),wt=Le.tileSize*Math.pow(2,xe.transform.tileZoom)/dt,Et=wt*(Le.tileID.canonical.x+Le.tileID.wrap*dt),kt=wt*Le.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Re.tl,u_pattern_br_a:Re.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[tt,ct],u_mix:ce.t,u_pattern_size_a:Re.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ce.fromScale,u_scale_b:ce.toScale,u_tile_units_to_pixels:1/Kn(Le,1,xe.transform.tileZoom),u_pixel_coord_upper:[Et>>16,kt>>16],u_pixel_coord_lower:[65535&Et,65535&kt]}}(L,$,G,H),{u_matrix:N,u_opacity:W})},Ul={fillExtrusion:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_lightpos:new a.Uniform3f(N,W.u_lightpos),u_lightintensity:new a.Uniform1f(N,W.u_lightintensity),u_lightcolor:new a.Uniform3f(N,W.u_lightcolor),u_vertical_gradient:new a.Uniform1f(N,W.u_vertical_gradient),u_opacity:new a.Uniform1f(N,W.u_opacity)}},fillExtrusionPattern:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_lightpos:new a.Uniform3f(N,W.u_lightpos),u_lightintensity:new a.Uniform1f(N,W.u_lightintensity),u_lightcolor:new a.Uniform3f(N,W.u_lightcolor),u_vertical_gradient:new a.Uniform1f(N,W.u_vertical_gradient),u_height_factor:new a.Uniform1f(N,W.u_height_factor),u_image:new a.Uniform1i(N,W.u_image),u_texsize:new a.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new a.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new a.Uniform3f(N,W.u_scale),u_fade:new a.Uniform1f(N,W.u_fade),u_opacity:new a.Uniform1f(N,W.u_opacity)}},fill:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix)}},fillPattern:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_image:new a.Uniform1i(N,W.u_image),u_texsize:new a.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new a.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new a.Uniform3f(N,W.u_scale),u_fade:new a.Uniform1f(N,W.u_fade)}},fillOutline:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_world:new a.Uniform2f(N,W.u_world)}},fillOutlinePattern:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_world:new a.Uniform2f(N,W.u_world),u_image:new a.Uniform1i(N,W.u_image),u_texsize:new a.Uniform2f(N,W.u_texsize),u_pixel_coord_upper:new a.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,W.u_pixel_coord_lower),u_scale:new a.Uniform3f(N,W.u_scale),u_fade:new a.Uniform1f(N,W.u_fade)}},circle:function(N,W){return{u_camera_to_center_distance:new a.Uniform1f(N,W.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(N,W.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(N,W.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(N,W.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(N,W.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(N,W.u_matrix)}},collisionBox:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_camera_to_center_distance:new a.Uniform1f(N,W.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(N,W.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(N,W.u_extrude_scale),u_overscale_factor:new a.Uniform1f(N,W.u_overscale_factor)}},collisionCircle:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_inv_matrix:new a.UniformMatrix4f(N,W.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(N,W.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(N,W.u_viewport_size)}},debug:function(N,W){return{u_color:new a.UniformColor(N,W.u_color),u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_overlay:new a.Uniform1i(N,W.u_overlay),u_overlay_scale:new a.Uniform1f(N,W.u_overlay_scale)}},clippingMask:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix)}},heatmap:function(N,W){return{u_extrude_scale:new a.Uniform1f(N,W.u_extrude_scale),u_intensity:new a.Uniform1f(N,W.u_intensity),u_matrix:new a.UniformMatrix4f(N,W.u_matrix)}},heatmapTexture:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_world:new a.Uniform2f(N,W.u_world),u_image:new a.Uniform1i(N,W.u_image),u_color_ramp:new a.Uniform1i(N,W.u_color_ramp),u_opacity:new a.Uniform1f(N,W.u_opacity)}},hillshade:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_image:new a.Uniform1i(N,W.u_image),u_latrange:new a.Uniform2f(N,W.u_latrange),u_light:new a.Uniform2f(N,W.u_light),u_shadow:new a.UniformColor(N,W.u_shadow),u_highlight:new a.UniformColor(N,W.u_highlight),u_accent:new a.UniformColor(N,W.u_accent)}},hillshadePrepare:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_image:new a.Uniform1i(N,W.u_image),u_dimension:new a.Uniform2f(N,W.u_dimension),u_zoom:new a.Uniform1f(N,W.u_zoom),u_unpack:new a.Uniform4f(N,W.u_unpack)}},line:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_ratio:new a.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(N,W.u_units_to_pixels)}},lineGradient:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_ratio:new a.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(N,W.u_units_to_pixels),u_image:new a.Uniform1i(N,W.u_image),u_image_height:new a.Uniform1f(N,W.u_image_height)}},linePattern:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_texsize:new a.Uniform2f(N,W.u_texsize),u_ratio:new a.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,W.u_device_pixel_ratio),u_image:new a.Uniform1i(N,W.u_image),u_units_to_pixels:new a.Uniform2f(N,W.u_units_to_pixels),u_scale:new a.Uniform3f(N,W.u_scale),u_fade:new a.Uniform1f(N,W.u_fade)}},lineSDF:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_ratio:new a.Uniform1f(N,W.u_ratio),u_device_pixel_ratio:new a.Uniform1f(N,W.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(N,W.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(N,W.u_patternscale_a),u_patternscale_b:new a.Uniform2f(N,W.u_patternscale_b),u_sdfgamma:new a.Uniform1f(N,W.u_sdfgamma),u_image:new a.Uniform1i(N,W.u_image),u_tex_y_a:new a.Uniform1f(N,W.u_tex_y_a),u_tex_y_b:new a.Uniform1f(N,W.u_tex_y_b),u_mix:new a.Uniform1f(N,W.u_mix)}},raster:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_tl_parent:new a.Uniform2f(N,W.u_tl_parent),u_scale_parent:new a.Uniform1f(N,W.u_scale_parent),u_buffer_scale:new a.Uniform1f(N,W.u_buffer_scale),u_fade_t:new a.Uniform1f(N,W.u_fade_t),u_opacity:new a.Uniform1f(N,W.u_opacity),u_image0:new a.Uniform1i(N,W.u_image0),u_image1:new a.Uniform1i(N,W.u_image1),u_brightness_low:new a.Uniform1f(N,W.u_brightness_low),u_brightness_high:new a.Uniform1f(N,W.u_brightness_high),u_saturation_factor:new a.Uniform1f(N,W.u_saturation_factor),u_contrast_factor:new a.Uniform1f(N,W.u_contrast_factor),u_spin_weights:new a.Uniform3f(N,W.u_spin_weights)}},symbolIcon:function(N,W){return{u_is_size_zoom_constant:new a.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new a.Uniform1f(N,W.u_size_t),u_size:new a.Uniform1f(N,W.u_size),u_camera_to_center_distance:new a.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new a.Uniform1f(N,W.u_pitch),u_rotate_symbol:new a.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new a.Uniform1f(N,W.u_fade_change),u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new a.Uniform1i(N,W.u_is_text),u_pitch_with_map:new a.Uniform1i(N,W.u_pitch_with_map),u_texsize:new a.Uniform2f(N,W.u_texsize),u_texture:new a.Uniform1i(N,W.u_texture)}},symbolSDF:function(N,W){return{u_is_size_zoom_constant:new a.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new a.Uniform1f(N,W.u_size_t),u_size:new a.Uniform1f(N,W.u_size),u_camera_to_center_distance:new a.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new a.Uniform1f(N,W.u_pitch),u_rotate_symbol:new a.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new a.Uniform1f(N,W.u_fade_change),u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new a.Uniform1i(N,W.u_is_text),u_pitch_with_map:new a.Uniform1i(N,W.u_pitch_with_map),u_texsize:new a.Uniform2f(N,W.u_texsize),u_texture:new a.Uniform1i(N,W.u_texture),u_gamma_scale:new a.Uniform1f(N,W.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(N,W.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(N,W.u_is_halo)}},symbolTextAndIcon:function(N,W){return{u_is_size_zoom_constant:new a.Uniform1i(N,W.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(N,W.u_is_size_feature_constant),u_size_t:new a.Uniform1f(N,W.u_size_t),u_size:new a.Uniform1f(N,W.u_size),u_camera_to_center_distance:new a.Uniform1f(N,W.u_camera_to_center_distance),u_pitch:new a.Uniform1f(N,W.u_pitch),u_rotate_symbol:new a.Uniform1i(N,W.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(N,W.u_aspect_ratio),u_fade_change:new a.Uniform1f(N,W.u_fade_change),u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(N,W.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(N,W.u_coord_matrix),u_is_text:new a.Uniform1i(N,W.u_is_text),u_pitch_with_map:new a.Uniform1i(N,W.u_pitch_with_map),u_texsize:new a.Uniform2f(N,W.u_texsize),u_texsize_icon:new a.Uniform2f(N,W.u_texsize_icon),u_texture:new a.Uniform1i(N,W.u_texture),u_texture_icon:new a.Uniform1i(N,W.u_texture_icon),u_gamma_scale:new a.Uniform1f(N,W.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(N,W.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(N,W.u_is_halo)}},background:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_opacity:new a.Uniform1f(N,W.u_opacity),u_color:new a.UniformColor(N,W.u_color)}},backgroundPattern:function(N,W){return{u_matrix:new a.UniformMatrix4f(N,W.u_matrix),u_opacity:new a.Uniform1f(N,W.u_opacity),u_image:new a.Uniform1i(N,W.u_image),u_pattern_tl_a:new a.Uniform2f(N,W.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(N,W.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(N,W.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(N,W.u_pattern_br_b),u_texsize:new a.Uniform2f(N,W.u_texsize),u_mix:new a.Uniform1f(N,W.u_mix),u_pattern_size_a:new a.Uniform2f(N,W.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(N,W.u_pattern_size_b),u_scale_a:new a.Uniform1f(N,W.u_scale_a),u_scale_b:new a.Uniform1f(N,W.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(N,W.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(N,W.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(N,W.u_tile_units_to_pixels)}}};function Js(N,W,G,L,H,$,ne){for(var ce=N.context,xe=ce.gl,Le=N.useProgram("collisionBox"),Re=[],Ue=0,He=0,tt=0;tt<L.length;tt++){var ct=L[tt],dt=W.getTile(ct),wt=dt.getBucket(G);if(wt){var Et=ct.posMatrix;H[0]===0&&H[1]===0||(Et=N.translatePosMatrix(ct.posMatrix,dt,H,$));var kt=ne?wt.textCollisionBox:wt.iconCollisionBox,Bt=wt.collisionCircleArray;if(Bt.length>0){var It=a.create(),Kt=Et;a.mul(It,wt.placementInvProjMatrix,N.transform.glCoordMatrix),a.mul(It,It,wt.placementViewportMatrix),Re.push({circleArray:Bt,circleOffset:He,transform:Kt,invTransform:It}),He=Ue+=Bt.length/4}kt&&Le.draw(ce,xe.LINES,Rt.disabled,Ge.disabled,N.colorModeForRenderPass(),Ne.disabled,Os(Et,N.transform,dt),G.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,N.transform.zoom,null,null,kt.collisionVertexBuffer)}}if(ne&&Re.length){var qt=N.useProgram("collisionCircle"),Vt=new a.StructArrayLayout2f1f2i16;Vt.resize(4*Ue),Vt._trim();for(var pn=0,yn=0,Sn=Re;yn<Sn.length;yn+=1)for(var On=Sn[yn],Hn=0;Hn<On.circleArray.length/4;Hn++){var sr=4*Hn,dr=On.circleArray[sr+0],Zn=On.circleArray[sr+1],fr=On.circleArray[sr+2],Ar=On.circleArray[sr+3];Vt.emplace(pn++,dr,Zn,fr,Ar,0),Vt.emplace(pn++,dr,Zn,fr,Ar,1),Vt.emplace(pn++,dr,Zn,fr,Ar,2),Vt.emplace(pn++,dr,Zn,fr,Ar,3)}(!$o||$o.length<2*Ue)&&($o=function(Fr){var Zr=2*Fr,Kr=new a.StructArrayLayout3ui6;Kr.resize(Zr),Kr._trim();for(var ti=0;ti<Zr;ti++){var oi=6*ti;Kr.uint16[oi+0]=4*ti+0,Kr.uint16[oi+1]=4*ti+1,Kr.uint16[oi+2]=4*ti+2,Kr.uint16[oi+3]=4*ti+2,Kr.uint16[oi+4]=4*ti+3,Kr.uint16[oi+5]=4*ti+0}return Kr}(Ue));for(var Or=ce.createIndexBuffer($o,!0),ir=ce.createVertexBuffer(Vt,a.collisionCircleLayout.members,!0),ur=0,Cr=Re;ur<Cr.length;ur+=1){var pr=Cr[ur],Ir=Tc(pr.transform,pr.invTransform,N.transform);qt.draw(ce,xe.TRIANGLES,Rt.disabled,Ge.disabled,N.colorModeForRenderPass(),Ne.disabled,Ir,G.id,ir,Or,a.SegmentVector.simpleSegment(0,2*pr.circleOffset,pr.circleArray.length,pr.circleArray.length/2),null,N.transform.zoom,null,null,null)}ir.destroy(),Or.destroy()}}var Mc=a.identity(new Float32Array(16));function $c(N,W,G,L,H,$){var ne=a.getAnchorAlignment(N),ce=-(ne.horizontalAlign-.5)*W,xe=-(ne.verticalAlign-.5)*G,Le=a.evaluateVariableOffset(N,L);return new a.Point((ce/H+Le[0])*$,(xe/H+Le[1])*$)}function Vl(N,W,G,L,H,$,ne,ce,xe,Le,Re){var Ue=N.text.placedSymbolArray,He=N.text.dynamicLayoutVertexArray,tt=N.icon.dynamicLayoutVertexArray,ct={};He.clear();for(var dt=0;dt<Ue.length;dt++){var wt=Ue.get(dt),Et=N.allowVerticalPlacement&&!wt.placedOrientation,kt=wt.hidden||!wt.crossTileID||Et?null:L[wt.crossTileID];if(kt){var Bt=new a.Point(wt.anchorX,wt.anchorY),It=Qt(Bt,G?ce:ne),Kt=un($.cameraToCenterDistance,It.signedDistanceFromCamera),qt=H.evaluateSizeForFeature(N.textSizeData,Le,wt)*Kt/a.ONE_EM;G&&(qt*=N.tilePixelRatio/xe);for(var Vt=kt.width,pn=kt.height,yn=$c(kt.anchor,Vt,pn,kt.textOffset,kt.textBoxScale,qt),Sn=G?Qt(Bt.add(yn),ne).point:It.point.add(W?yn.rotate(-$.angle):yn),On=N.allowVerticalPlacement&&wt.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,Hn=0;Hn<wt.numGlyphs;Hn++)a.addDynamicAttributes(He,Sn,On);Re&&wt.associatedIconIndex>=0&&(ct[wt.associatedIconIndex]={shiftedAnchor:Sn,angle:On})}else Rn(wt.numGlyphs,He)}if(Re){tt.clear();for(var sr=N.icon.placedSymbolArray,dr=0;dr<sr.length;dr++){var Zn=sr.get(dr);if(Zn.hidden)Rn(Zn.numGlyphs,tt);else{var fr=ct[dr];if(fr)for(var Ar=0;Ar<Zn.numGlyphs;Ar++)a.addDynamicAttributes(tt,fr.shiftedAnchor,fr.angle);else Rn(Zn.numGlyphs,tt)}}N.icon.dynamicLayoutVertexBuffer.updateData(tt)}N.text.dynamicLayoutVertexBuffer.updateData(He)}function Qc(N,W,G){return G.iconsInText&&W?"symbolTextAndIcon":N?"symbolSDF":"symbolIcon"}function ys(N,W,G,L,H,$,ne,ce,xe,Le,Re,Ue){for(var He=N.context,tt=He.gl,ct=N.transform,dt=ce==="map",wt=xe==="map",Et=dt&&G.layout.get("symbol-placement")!=="point",kt=dt&&!wt&&!Et,Bt=G.layout.get("symbol-sort-key").constantOr(1)!==void 0,It=!1,Kt=N.depthModeForSublayer(0,Rt.ReadOnly),qt=G.layout.get("text-variable-anchor"),Vt=[],pn=0,yn=L;pn<yn.length;pn+=1){var Sn=yn[pn],On=W.getTile(Sn),Hn=On.getBucket(G);if(Hn){var sr=H?Hn.text:Hn.icon;if(sr&&sr.segments.get().length){var dr=sr.programConfigurations.get(G.id),Zn=H||Hn.sdfIcons,fr=H?Hn.textSizeData:Hn.iconSizeData,Ar=wt||ct.pitch!==0,Or=N.useProgram(Qc(Zn,H,Hn),dr),ir=a.evaluateSizeForZoom(fr,ct.zoom),ur=void 0,Cr=[0,0],pr=void 0,Ir=void 0,Fr=null,Zr=void 0;if(H){if(pr=On.glyphAtlasTexture,Ir=tt.LINEAR,ur=On.glyphAtlasTexture.size,Hn.iconsInText){Cr=On.imageAtlasTexture.size,Fr=On.imageAtlasTexture;var Kr=fr.kind==="composite"||fr.kind==="camera";Zr=Ar||N.options.rotating||N.options.zooming||Kr?tt.LINEAR:tt.NEAREST}}else{var ti=G.layout.get("icon-size").constantOr(0)!==1||Hn.iconsNeedLinear;pr=On.imageAtlasTexture,Ir=Zn||N.options.rotating||N.options.zooming||ti||Ar?tt.LINEAR:tt.NEAREST,ur=On.imageAtlasTexture.size}var oi=Kn(On,1,N.transform.zoom),Ei=Tn(Sn.posMatrix,wt,dt,N.transform,oi),Xi=mn(Sn.posMatrix,wt,dt,N.transform,oi),Oa=qt&&Hn.hasTextData(),ma=G.layout.get("icon-text-fit")!=="none"&&Oa&&Hn.hasIconData();Et&&hn(Hn,Sn.posMatrix,N,H,Ei,Xi,wt,Le);var Sa=N.translatePosMatrix(Sn.posMatrix,On,$,ne),Di=Et||H&&qt||ma?Mc:Ei,li=N.translatePosMatrix(Xi,On,$,ne,!0),Ui=Zn&&G.paint.get(H?"text-halo-width":"icon-halo-width").constantOr(1)!==0,wi={program:Or,buffers:sr,uniformValues:Zn?Hn.iconsInText?ni(fr.kind,ir,kt,wt,N,Sa,Di,li,ur,Cr):vs(fr.kind,ir,kt,wt,N,Sa,Di,li,H,ur,!0):Qo(fr.kind,ir,kt,wt,N,Sa,Di,li,H,ur),atlasTexture:pr,atlasTextureIcon:Fr,atlasInterpolation:Ir,atlasInterpolationIcon:Zr,isSDF:Zn,hasHalo:Ui};if(Bt&&Hn.canOverlap){It=!0;for(var di=0,Vi=sr.segments.get();di<Vi.length;di+=1){var Zi=Vi[di];Vt.push({segments:new a.SegmentVector([Zi]),sortKey:Zi.sortKey,state:wi})}}else Vt.push({segments:sr.segments,sortKey:0,state:wi})}}}It&&Vt.sort(function(Ll,as){return Ll.sortKey-as.sortKey});for(var sa=0,sl=Vt;sa<sl.length;sa+=1){var ll=sl[sa],pi=ll.state;if(He.activeTexture.set(tt.TEXTURE0),pi.atlasTexture.bind(pi.atlasInterpolation,tt.CLAMP_TO_EDGE),pi.atlasTextureIcon&&(He.activeTexture.set(tt.TEXTURE1),pi.atlasTextureIcon&&pi.atlasTextureIcon.bind(pi.atlasInterpolationIcon,tt.CLAMP_TO_EDGE)),pi.isSDF){var Yl=pi.uniformValues;pi.hasHalo&&(Yl.u_is_halo=1,Ns(pi.buffers,ll.segments,G,N,pi.program,Kt,Re,Ue,Yl)),Yl.u_is_halo=0}Ns(pi.buffers,ll.segments,G,N,pi.program,Kt,Re,Ue,pi.uniformValues)}}function Ns(N,W,G,L,H,$,ne,ce,xe){var Le=L.context,Re=Le.gl;H.draw(Le,Re.TRIANGLES,$,ne,ce,Ne.disabled,xe,G.id,N.layoutVertexBuffer,N.indexBuffer,W,G.paint,L.transform.zoom,N.programConfigurations.get(G.id),N.dynamicLayoutVertexBuffer,N.opacityVertexBuffer)}function es(N,W,G,L,H,$,ne){var ce,xe,Le,Re,Ue,He=N.context.gl,tt=G.paint.get("fill-pattern"),ct=tt&&tt.constantOr(1),dt=G.getCrossfadeParameters();ne?(xe=ct&&!G.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=He.LINES):(xe=ct?"fillPattern":"fill",ce=He.TRIANGLES);for(var wt=0,Et=L;wt<Et.length;wt+=1){var kt=Et[wt],Bt=W.getTile(kt);if(!ct||Bt.patternsLoaded()){var It=Bt.getBucket(G);if(It){var Kt=It.programConfigurations.get(G.id),qt=N.useProgram(xe,Kt);ct&&(N.context.activeTexture.set(He.TEXTURE0),Bt.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),Kt.updatePaintBuffers(dt));var Vt=tt.constantOr(null);if(Vt&&Bt.imageAtlas){var pn=Bt.imageAtlas,yn=pn.patternPositions[Vt.to.toString()],Sn=pn.patternPositions[Vt.from.toString()];yn&&Sn&&Kt.setConstantPatternPositions(yn,Sn)}var On=N.translatePosMatrix(kt.posMatrix,Bt,G.paint.get("fill-translate"),G.paint.get("fill-translate-anchor"));if(ne){Re=It.indexBuffer2,Ue=It.segments2;var Hn=[He.drawingBufferWidth,He.drawingBufferHeight];Le=xe==="fillOutlinePattern"&&ct?fc(On,N,dt,Bt,Hn):Fo(On,Hn)}else Re=It.indexBuffer,Ue=It.segments,Le=ct?ms(On,N,dt,Bt):Jo(On);qt.draw(N.context,ce,H,N.stencilModeForClipping(kt),$,Ne.disabled,Le,G.id,It.layoutVertexBuffer,Re,Ue,G.paint,N.transform.zoom,Kt)}}}}function To(N,W,G,L,H,$,ne){for(var ce=N.context,xe=ce.gl,Le=G.paint.get("fill-extrusion-pattern"),Re=Le.constantOr(1),Ue=G.getCrossfadeParameters(),He=G.paint.get("fill-extrusion-opacity"),tt=0,ct=L;tt<ct.length;tt+=1){var dt=ct[tt],wt=W.getTile(dt),Et=wt.getBucket(G);if(Et){var kt=Et.programConfigurations.get(G.id),Bt=N.useProgram(Re?"fillExtrusionPattern":"fillExtrusion",kt);Re&&(N.context.activeTexture.set(xe.TEXTURE0),wt.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),kt.updatePaintBuffers(Ue));var It=Le.constantOr(null);if(It&&wt.imageAtlas){var Kt=wt.imageAtlas,qt=Kt.patternPositions[It.to.toString()],Vt=Kt.patternPositions[It.from.toString()];qt&&Vt&&kt.setConstantPatternPositions(qt,Vt)}var pn=N.translatePosMatrix(dt.posMatrix,wt,G.paint.get("fill-extrusion-translate"),G.paint.get("fill-extrusion-translate-anchor")),yn=G.paint.get("fill-extrusion-vertical-gradient"),Sn=Re?ps(pn,N,yn,He,dt,Ue,wt):zo(pn,N,yn,He);Bt.draw(ce,ce.gl.TRIANGLES,H,$,ne,Ne.backCCW,Sn,G.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,G.paint,N.transform.zoom,kt)}}}function $s(N,W,G,L,H,$){var ne=N.context,ce=ne.gl,xe=W.fbo;if(xe){var Le=N.useProgram("hillshade");ne.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,xe.colorAttachment.get());var Re=Kc(N,W,G);Le.draw(ne,ce.TRIANGLES,L,H,$,Ne.disabled,Re,G.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}}function Sc(N,W,G,L,H,$){var ne=N.context,ce=ne.gl,xe=W.dem;if(xe&&xe.data){var Le=xe.dim,Re=xe.stride,Ue=xe.getPixels();if(ne.activeTexture.set(ce.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||N.getTileTexture(Re),W.demTexture){var He=W.demTexture;He.update(Ue,{premultiply:!1}),He.bind(ce.NEAREST,ce.CLAMP_TO_EDGE)}else W.demTexture=new a.Texture(ne,Ue,ce.RGBA,{premultiply:!1}),W.demTexture.bind(ce.NEAREST,ce.CLAMP_TO_EDGE);ne.activeTexture.set(ce.TEXTURE0);var tt=W.fbo;if(!tt){var ct=new a.Texture(ne,{width:Le,height:Le,data:null},ce.RGBA);ct.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),(tt=W.fbo=ne.createFramebuffer(Le,Le,!0)).colorAttachment.set(ct.texture)}ne.bindFramebuffer.set(tt.framebuffer),ne.viewport.set([0,0,Le,Le]),N.useProgram("hillshadePrepare").draw(ne,ce.TRIANGLES,L,H,$,Ne.disabled,zs(W.tileID,xe),G.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function _l(N,W,G,L,H){var $=L.paint.get("raster-fade-duration");if($>0){var ne=a.browser.now(),ce=(ne-N.timeAdded)/$,xe=W?(ne-W.timeAdded)/$:-1,Le=G.getSource(),Re=H.coveringZoomLevel({tileSize:Le.tileSize,roundZoom:Le.roundZoom}),Ue=!W||Math.abs(W.tileID.overscaledZ-Re)>Math.abs(N.tileID.overscaledZ-Re),He=Ue&&N.refreshedUponExpiration?1:a.clamp(Ue?ce:1-xe,0,1);return N.refreshedUponExpiration&&ce>=1&&(N.refreshedUponExpiration=!1),W?{opacity:1,mix:1-He}:{opacity:He,mix:0}}return{opacity:1,mix:0}}var Hl=new a.Color(1,0,0,1),eo=new a.Color(0,1,0,1),Gl=new a.Color(0,0,1,1),Cc=new a.Color(1,0,1,1),Qs=new a.Color(0,1,1,1);function js(N){var W=N.transform.padding;el(N,N.transform.height-(W.top||0),3,Hl),el(N,W.bottom||0,3,eo),Us(N,W.left||0,3,Gl),Us(N,N.transform.width-(W.right||0),3,Cc);var G=N.transform.centerPoint;(function(L,H,$,ne){var ce=20,xe=2;Vs(L,H-xe/2,$-ce/2,xe,ce,ne),Vs(L,H-ce/2,$-xe/2,ce,xe,ne)})(N,G.x,N.transform.height-G.y,Qs)}function el(N,W,G,L){Vs(N,0,W+G/2,N.transform.width,G,L)}function Us(N,W,G,L){Vs(N,W-G/2,0,G,N.transform.height,L)}function Vs(N,W,G,L,H,$){var ne=N.context,ce=ne.gl;ce.enable(ce.SCISSOR_TEST),ce.scissor(W*a.browser.devicePixelRatio,G*a.browser.devicePixelRatio,L*a.browser.devicePixelRatio,H*a.browser.devicePixelRatio),ne.clear({color:$}),ce.disable(ce.SCISSOR_TEST)}function wl(N,W,G){var L=N.context,H=L.gl,$=G.posMatrix,ne=N.useProgram("debug"),ce=Rt.disabled,xe=Ge.disabled,Le=N.colorModeForRenderPass(),Re="$debug";L.activeTexture.set(H.TEXTURE0),N.emptyTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),ne.draw(L,H.LINE_STRIP,ce,xe,Le,Ne.disabled,kc($,a.Color.red),Re,N.debugBuffer,N.tileBorderIndexBuffer,N.debugSegments);var Ue=W.getTileByID(G.key).latestRawTileData,He=Ue&&Ue.byteLength||0,tt=Math.floor(He/1024),ct=W.getTile(G).tileSize,dt=512/Math.min(ct,512)*(G.overscaledZ/N.transform.zoom)*.5,wt=G.canonical.toString();G.overscaledZ!==G.canonical.z&&(wt+=" => "+G.overscaledZ),function(Et,kt){Et.initDebugOverlayCanvas();var Bt=Et.debugOverlayCanvas,It=Et.context.gl,Kt=Et.debugOverlayCanvas.getContext("2d");Kt.clearRect(0,0,Bt.width,Bt.height),Kt.shadowColor="white",Kt.shadowBlur=2,Kt.lineWidth=1.5,Kt.strokeStyle="white",Kt.textBaseline="top",Kt.font="bold 36px Open Sans, sans-serif",Kt.fillText(kt,5,5),Kt.strokeText(kt,5,5),Et.debugOverlayTexture.update(Bt),Et.debugOverlayTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE)}(N,wt+" "+tt+"kb"),ne.draw(L,H.TRIANGLES,ce,xe,Xe.alphaBlended,Ne.disabled,kc($,a.Color.transparent,dt),Re,N.debugBuffer,N.quadTriangleIndexBuffer,N.debugSegments)}var ql={symbol:function(N,W,G,L,H){if(N.renderPass==="translucent"){var $=Ge.disabled,ne=N.colorModeForRenderPass();G.layout.get("text-variable-anchor")&&function(ce,xe,Le,Re,Ue,He,tt){for(var ct=xe.transform,dt=Ue==="map",wt=He==="map",Et=0,kt=ce;Et<kt.length;Et+=1){var Bt=kt[Et],It=Re.getTile(Bt),Kt=It.getBucket(Le);if(Kt&&Kt.text&&Kt.text.segments.get().length){var qt=Kt.textSizeData,Vt=a.evaluateSizeForZoom(qt,ct.zoom),pn=Kn(It,1,xe.transform.zoom),yn=Tn(Bt.posMatrix,wt,dt,xe.transform,pn),Sn=Le.layout.get("icon-text-fit")!=="none"&&Kt.hasIconData();if(Vt){var On=Math.pow(2,ct.zoom-It.tileID.overscaledZ);Vl(Kt,dt,wt,tt,a.symbolSize,ct,yn,Bt.posMatrix,On,Vt,Sn)}}}}(L,N,G,W,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),H),G.paint.get("icon-opacity").constantOr(1)!==0&&ys(N,W,G,L,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),$,ne),G.paint.get("text-opacity").constantOr(1)!==0&&ys(N,W,G,L,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),$,ne),W.map.showCollisionBoxes&&(Js(N,W,G,L,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),Js(N,W,G,L,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))}},circle:function(N,W,G,L){if(N.renderPass==="translucent"){var H=G.paint.get("circle-opacity"),$=G.paint.get("circle-stroke-width"),ne=G.paint.get("circle-stroke-opacity"),ce=G.layout.get("circle-sort-key").constantOr(1)!==void 0;if(H.constantOr(1)!==0||$.constantOr(1)!==0&&ne.constantOr(1)!==0){for(var xe=N.context,Le=xe.gl,Re=N.depthModeForSublayer(0,Rt.ReadOnly),Ue=Ge.disabled,He=N.colorModeForRenderPass(),tt=[],ct=0;ct<L.length;ct++){var dt=L[ct],wt=W.getTile(dt),Et=wt.getBucket(G);if(Et){var kt=Et.programConfigurations.get(G.id),Bt={programConfiguration:kt,program:N.useProgram("circle",kt),layoutVertexBuffer:Et.layoutVertexBuffer,indexBuffer:Et.indexBuffer,uniformValues:jl(N,dt,wt,G)};if(ce)for(var It=0,Kt=Et.segments.get();It<Kt.length;It+=1){var qt=Kt[It];tt.push({segments:new a.SegmentVector([qt]),sortKey:qt.sortKey,state:Bt})}else tt.push({segments:Et.segments,sortKey:0,state:Bt})}}ce&&tt.sort(function(Ar,Or){return Ar.sortKey-Or.sortKey});for(var Vt=0,pn=tt;Vt<pn.length;Vt+=1){var yn=pn[Vt],Sn=yn.state,On=Sn.programConfiguration,Hn=Sn.program,sr=Sn.layoutVertexBuffer,dr=Sn.indexBuffer,Zn=Sn.uniformValues,fr=yn.segments;Hn.draw(xe,Le.TRIANGLES,Re,Ue,He,Ne.disabled,Zn,G.id,sr,dr,fr,G.paint,N.transform.zoom,On)}}}},heatmap:function(N,W,G,L){if(G.paint.get("heatmap-opacity")!==0)if(N.renderPass==="offscreen"){var H=N.context,$=H.gl,ne=Ge.disabled,ce=new Xe([$.ONE,$.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(dt,wt,Et){var kt=dt.gl;dt.activeTexture.set(kt.TEXTURE1),dt.viewport.set([0,0,wt.width/4,wt.height/4]);var Bt=Et.heatmapFbo;if(Bt)kt.bindTexture(kt.TEXTURE_2D,Bt.colorAttachment.get()),dt.bindFramebuffer.set(Bt.framebuffer);else{var It=kt.createTexture();kt.bindTexture(kt.TEXTURE_2D,It),kt.texParameteri(kt.TEXTURE_2D,kt.TEXTURE_WRAP_S,kt.CLAMP_TO_EDGE),kt.texParameteri(kt.TEXTURE_2D,kt.TEXTURE_WRAP_T,kt.CLAMP_TO_EDGE),kt.texParameteri(kt.TEXTURE_2D,kt.TEXTURE_MIN_FILTER,kt.LINEAR),kt.texParameteri(kt.TEXTURE_2D,kt.TEXTURE_MAG_FILTER,kt.LINEAR),Bt=Et.heatmapFbo=dt.createFramebuffer(wt.width/4,wt.height/4,!1),function(Kt,qt,Vt,pn){var yn=Kt.gl,Sn=Kt.extRenderToTextureHalfFloat?Kt.extTextureHalfFloat.HALF_FLOAT_OES:yn.UNSIGNED_BYTE;yn.texImage2D(yn.TEXTURE_2D,0,yn.RGBA,qt.width/4,qt.height/4,0,yn.RGBA,Sn,null),pn.colorAttachment.set(Vt)}(dt,wt,It,Bt)}})(H,N,G),H.clear({color:a.Color.transparent});for(var xe=0;xe<L.length;xe++){var Le=L[xe];if(!W.hasRenderableParent(Le)){var Re=W.getTile(Le),Ue=Re.getBucket(G);if(Ue){var He=Ue.programConfigurations.get(G.id),tt=N.useProgram("heatmap",He),ct=N.transform.zoom;tt.draw(H,$.TRIANGLES,Rt.disabled,ne,ce,Ne.disabled,Ac(Le.posMatrix,Re,ct,G.paint.get("heatmap-intensity")),G.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,G.paint,N.transform.zoom,He)}}}H.viewport.set([0,0,N.width,N.height])}else N.renderPass==="translucent"&&(N.context.setColorMode(N.colorModeForRenderPass()),function(dt,wt){var Et=dt.context,kt=Et.gl,Bt=wt.heatmapFbo;if(Bt){Et.activeTexture.set(kt.TEXTURE0),kt.bindTexture(kt.TEXTURE_2D,Bt.colorAttachment.get()),Et.activeTexture.set(kt.TEXTURE1);var It=wt.colorRampTexture;It||(It=wt.colorRampTexture=new a.Texture(Et,wt.colorRamp,kt.RGBA)),It.bind(kt.LINEAR,kt.CLAMP_TO_EDGE),dt.useProgram("heatmapTexture").draw(Et,kt.TRIANGLES,Rt.disabled,Ge.disabled,dt.colorModeForRenderPass(),Ne.disabled,Zc(dt,wt,0,1),wt.id,dt.viewportBuffer,dt.quadTriangleIndexBuffer,dt.viewportSegments,wt.paint,dt.transform.zoom)}}(N,G))},line:function(N,W,G,L){if(N.renderPass==="translucent"){var H=G.paint.get("line-opacity"),$=G.paint.get("line-width");if(H.constantOr(1)!==0&&$.constantOr(1)!==0)for(var ne=N.depthModeForSublayer(0,Rt.ReadOnly),ce=N.colorModeForRenderPass(),xe=G.paint.get("line-dasharray"),Le=G.paint.get("line-pattern"),Re=Le.constantOr(1),Ue=G.paint.get("line-gradient"),He=G.getCrossfadeParameters(),tt=Re?"linePattern":xe?"lineSDF":Ue?"lineGradient":"line",ct=N.context,dt=ct.gl,wt=!0,Et=0,kt=L;Et<kt.length;Et+=1){var Bt=kt[Et],It=W.getTile(Bt);if(!Re||It.patternsLoaded()){var Kt=It.getBucket(G);if(Kt){var qt=Kt.programConfigurations.get(G.id),Vt=N.context.program.get(),pn=N.useProgram(tt,qt),yn=wt||pn.program!==Vt,Sn=Le.constantOr(null);if(Sn&&It.imageAtlas){var On=It.imageAtlas,Hn=On.patternPositions[Sn.to.toString()],sr=On.patternPositions[Sn.from.toString()];Hn&&sr&&qt.setConstantPatternPositions(Hn,sr)}var dr=Re?Fs(N,It,G,He):xe?bl(N,It,G,xe,He):Ue?Zs(N,It,G,Kt.lineClipsArray.length):Bo(N,It,G);if(Re)ct.activeTexture.set(dt.TEXTURE0),It.imageAtlasTexture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),qt.updatePaintBuffers(He);else if(xe&&(yn||N.lineAtlas.dirty))ct.activeTexture.set(dt.TEXTURE0),N.lineAtlas.bind(ct);else if(Ue){var Zn=Kt.gradients[G.id],fr=Zn.texture;if(G.gradientVersion!==Zn.version){var Ar=256;if(G.stepInterpolant){var Or=W.getSource().maxzoom,ir=Bt.canonical.z===Or?Math.ceil(1<<N.transform.maxZoom-Bt.canonical.z):1,ur=Kt.maxLineLength/a.EXTENT*1024*ir;Ar=a.clamp(a.nextPowerOfTwo(ur),256,ct.maxTextureSize)}Zn.gradient=a.renderColorRamp({expression:G.gradientExpression(),evaluationKey:"lineProgress",resolution:Ar,image:Zn.gradient||void 0,clips:Kt.lineClipsArray}),Zn.texture?Zn.texture.update(Zn.gradient):Zn.texture=new a.Texture(ct,Zn.gradient,dt.RGBA),Zn.version=G.gradientVersion,fr=Zn.texture}ct.activeTexture.set(dt.TEXTURE0),fr.bind(G.stepInterpolant?dt.NEAREST:dt.LINEAR,dt.CLAMP_TO_EDGE)}pn.draw(ct,dt.TRIANGLES,ne,N.stencilModeForClipping(Bt),ce,Ne.disabled,dr,G.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,G.paint,N.transform.zoom,qt,Kt.layoutVertexBuffer2),wt=!1}}}}},fill:function(N,W,G,L){var H=G.paint.get("fill-color"),$=G.paint.get("fill-opacity");if($.constantOr(1)!==0){var ne=N.colorModeForRenderPass(),ce=G.paint.get("fill-pattern"),xe=N.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&H.constantOr(a.Color.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(N.renderPass===xe){var Le=N.depthModeForSublayer(1,N.renderPass==="opaque"?Rt.ReadWrite:Rt.ReadOnly);es(N,W,G,L,Le,ne,!1)}if(N.renderPass==="translucent"&&G.paint.get("fill-antialias")){var Re=N.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,Rt.ReadOnly);es(N,W,G,L,Re,ne,!0)}}},"fill-extrusion":function(N,W,G,L){var H=G.paint.get("fill-extrusion-opacity");if(H!==0&&N.renderPass==="translucent"){var $=new Rt(N.context.gl.LEQUAL,Rt.ReadWrite,N.depthRangeFor3D);if(H!==1||G.paint.get("fill-extrusion-pattern").constantOr(1))To(N,W,G,L,$,Ge.disabled,Xe.disabled),To(N,W,G,L,$,N.stencilModeFor3D(),N.colorModeForRenderPass());else{var ne=N.colorModeForRenderPass();To(N,W,G,L,$,Ge.disabled,ne)}}},hillshade:function(N,W,G,L){if(N.renderPass==="offscreen"||N.renderPass==="translucent"){for(var H=N.context,$=N.depthModeForSublayer(0,Rt.ReadOnly),ne=N.colorModeForRenderPass(),ce=N.renderPass==="translucent"?N.stencilConfigForOverlap(L):[{},L],xe=ce[0],Le=0,Re=ce[1];Le<Re.length;Le+=1){var Ue=Re[Le],He=W.getTile(Ue);He.needsHillshadePrepare&&N.renderPass==="offscreen"?Sc(N,He,G,$,Ge.disabled,ne):N.renderPass==="translucent"&&$s(N,He,G,$,xe[Ue.overscaledZ],ne)}H.viewport.set([0,0,N.width,N.height])}},raster:function(N,W,G,L){if(N.renderPass==="translucent"&&G.paint.get("raster-opacity")!==0&&L.length)for(var H=N.context,$=H.gl,ne=W.getSource(),ce=N.useProgram("raster"),xe=N.colorModeForRenderPass(),Le=ne instanceof B?[{},L]:N.stencilConfigForOverlap(L),Re=Le[0],Ue=Le[1],He=Ue[Ue.length-1].overscaledZ,tt=!N.options.moving,ct=0,dt=Ue;ct<dt.length;ct+=1){var wt=dt[ct],Et=N.depthModeForSublayer(wt.overscaledZ-He,G.paint.get("raster-opacity")===1?Rt.ReadWrite:Rt.ReadOnly,$.LESS),kt=W.getTile(wt),Bt=N.transform.calculatePosMatrix(wt.toUnwrapped(),tt);kt.registerFadeDuration(G.paint.get("raster-fade-duration"));var It=W.findLoadedParent(wt,0),Kt=_l(kt,It,W,G,N.transform),qt=void 0,Vt=void 0,pn=G.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;H.activeTexture.set($.TEXTURE0),kt.texture.bind(pn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),H.activeTexture.set($.TEXTURE1),It?(It.texture.bind(pn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),qt=Math.pow(2,It.tileID.overscaledZ-kt.tileID.overscaledZ),Vt=[kt.tileID.canonical.x*qt%1,kt.tileID.canonical.y*qt%1]):kt.texture.bind(pn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST);var yn=hc(Bt,Vt||[0,0],qt||1,Kt,G);ne instanceof B?ce.draw(H,$.TRIANGLES,Et,Ge.disabled,xe,Ne.disabled,yn,G.id,ne.boundsBuffer,N.quadTriangleIndexBuffer,ne.boundsSegments):ce.draw(H,$.TRIANGLES,Et,Re[wt.overscaledZ],xe,Ne.disabled,yn,G.id,N.rasterBoundsBuffer,N.quadTriangleIndexBuffer,N.rasterBoundsSegments)}},background:function(N,W,G){var L=G.paint.get("background-color"),H=G.paint.get("background-opacity");if(H!==0){var $=N.context,ne=$.gl,ce=N.transform,xe=ce.tileSize,Le=G.paint.get("background-pattern");if(!N.isPatternMissing(Le)){var Re=!Le&&L.a===1&&H===1&&N.opaquePassEnabledForLayer()?"opaque":"translucent";if(N.renderPass===Re){var Ue=Ge.disabled,He=N.depthModeForSublayer(0,Re==="opaque"?Rt.ReadWrite:Rt.ReadOnly),tt=N.colorModeForRenderPass(),ct=N.useProgram(Le?"backgroundPattern":"background"),dt=ce.coveringTiles({tileSize:xe});Le&&($.activeTexture.set(ne.TEXTURE0),N.imageManager.bind(N.context));for(var wt=G.getCrossfadeParameters(),Et=0,kt=dt;Et<kt.length;Et+=1){var Bt=kt[Et],It=N.transform.calculatePosMatrix(Bt.toUnwrapped()),Kt=Le?Jc(It,H,N,Le,{tileID:Bt,tileSize:xe},wt):Ks(It,H,L);ct.draw($,ne.TRIANGLES,He,Ue,tt,Ne.disabled,Kt,G.id,N.tileExtentBuffer,N.quadTriangleIndexBuffer,N.tileExtentSegments)}}}}},debug:function(N,W,G){for(var L=0;L<G.length;L++)wl(N,W,G[L])},custom:function(N,W,G){var L=N.context,H=G.implementation;if(N.renderPass==="offscreen"){var $=H.prerender;$&&(N.setCustomLayerDefaults(),L.setColorMode(N.colorModeForRenderPass()),$.call(H,L.gl,N.transform.customLayerMatrix()),L.setDirty(),N.setBaseState())}else if(N.renderPass==="translucent"){N.setCustomLayerDefaults(),L.setColorMode(N.colorModeForRenderPass()),L.setStencilMode(Ge.disabled);var ne=H.renderingMode==="3d"?new Rt(N.context.gl.LEQUAL,Rt.ReadWrite,N.depthRangeFor3D):N.depthModeForSublayer(0,Rt.ReadOnly);L.setDepthMode(ne),H.render(L.gl,N.transform.customLayerMatrix()),L.setDirty(),N.setBaseState(),L.bindFramebuffer.set(null)}}},vi=function(N,W){this.context=new Ye(N),this.transform=W,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zn,this.gpuTimers={}};vi.prototype.resize=function(N,W){if(this.width=N*a.browser.devicePixelRatio,this.height=W*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var G=0,L=this.style._order;G<L.length;G+=1){var H=L[G];this.style._layers[H].resize()}},vi.prototype.setup=function(){var N=this.context,W=new a.StructArrayLayout2i4;W.emplaceBack(0,0),W.emplaceBack(a.EXTENT,0),W.emplaceBack(0,a.EXTENT),W.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=N.createVertexBuffer(W,tr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var G=new a.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(a.EXTENT,0),G.emplaceBack(0,a.EXTENT),G.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=N.createVertexBuffer(G,tr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var L=new a.StructArrayLayout4i8;L.emplaceBack(0,0,0,0),L.emplaceBack(a.EXTENT,0,a.EXTENT,0),L.emplaceBack(0,a.EXTENT,0,a.EXTENT),L.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=N.createVertexBuffer(L,Y.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var H=new a.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(1,0),H.emplaceBack(0,1),H.emplaceBack(1,1),this.viewportBuffer=N.createVertexBuffer(H,tr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var $=new a.StructArrayLayout1ui2;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=N.createIndexBuffer($);var ne=new a.StructArrayLayout3ui6;ne.emplaceBack(0,1,2),ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=N.createIndexBuffer(ne),this.emptyTexture=new a.Texture(N,{width:1,height:1,data:new Uint8Array([0,0,0,0])},N.gl.RGBA);var ce=this.context.gl;this.stencilClearMode=new Ge({func:ce.ALWAYS,mask:0},0,255,ce.ZERO,ce.ZERO,ce.ZERO)},vi.prototype.clearStencil=function(){var N=this.context,W=N.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var G=a.create();a.ortho(G,0,this.width,this.height,0,0,1),a.scale(G,G,[W.drawingBufferWidth,W.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(N,W.TRIANGLES,Rt.disabled,this.stencilClearMode,Xe.disabled,Ne.disabled,Rs(G),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vi.prototype._renderTileClippingMasks=function(N,W){if(this.currentStencilSource!==N.source&&N.isTileClipped()&&W&&W.length){this.currentStencilSource=N.source;var G=this.context,L=G.gl;this.nextStencilID+W.length>256&&this.clearStencil(),G.setColorMode(Xe.disabled),G.setDepthMode(Rt.disabled);var H=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var $=0,ne=W;$<ne.length;$+=1){var ce=ne[$],xe=this._tileClippingMaskIDs[ce.key]=this.nextStencilID++;H.draw(G,L.TRIANGLES,Rt.disabled,new Ge({func:L.ALWAYS,mask:0},xe,255,L.KEEP,L.KEEP,L.REPLACE),Xe.disabled,Ne.disabled,Rs(ce.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var N=this.nextStencilID++,W=this.context.gl;return new Ge({func:W.NOTEQUAL,mask:255},N,255,W.KEEP,W.KEEP,W.REPLACE)},vi.prototype.stencilModeForClipping=function(N){var W=this.context.gl;return new Ge({func:W.EQUAL,mask:255},this._tileClippingMaskIDs[N.key],0,W.KEEP,W.KEEP,W.REPLACE)},vi.prototype.stencilConfigForOverlap=function(N){var W,G=this.context.gl,L=N.sort(function(xe,Le){return Le.overscaledZ-xe.overscaledZ}),H=L[L.length-1].overscaledZ,$=L[0].overscaledZ-H+1;if($>1){this.currentStencilSource=void 0,this.nextStencilID+$>256&&this.clearStencil();for(var ne={},ce=0;ce<$;ce++)ne[ce+H]=new Ge({func:G.GEQUAL,mask:255},ce+this.nextStencilID,255,G.KEEP,G.KEEP,G.REPLACE);return this.nextStencilID+=$,[ne,L]}return[(W={},W[H]=Ge.disabled,W),L]},vi.prototype.colorModeForRenderPass=function(){var N=this.context.gl;if(this._showOverdrawInspector){var W=.125;return new Xe([N.CONSTANT_COLOR,N.ONE],new a.Color(W,W,W,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Xe.unblended:Xe.alphaBlended},vi.prototype.depthModeForSublayer=function(N,W,G){if(!this.opaquePassEnabledForLayer())return Rt.disabled;var L=1-((1+this.currentLayer)*this.numSublayers+N)*this.depthEpsilon;return new Rt(G||this.context.gl.LEQUAL,W,[L,L])},vi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vi.prototype.render=function(N,W){var G=this;this.style=N,this.options=W,this.lineAtlas=N.lineAtlas,this.imageManager=N.imageManager,this.glyphManager=N.glyphManager,this.symbolFadeChange=N.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var L=this.style._order,H=this.style.sourceCaches;for(var $ in H){var ne=H[$];ne.used&&ne.prepare(this.context)}var ce,xe,Le={},Re={},Ue={};for(var He in H){var tt=H[He];Le[He]=tt.getVisibleCoordinates(),Re[He]=Le[He].slice().reverse(),Ue[He]=tt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ct=0;ct<L.length;ct++){var dt=L[ct];if(this.style._layers[dt].is3D()){this.opaquePassCutoff=ct;break}}this.renderPass="offscreen";for(var wt=0,Et=L;wt<Et.length;wt+=1){var kt=Et[wt],Bt=this.style._layers[kt];if(Bt.hasOffscreenPass()&&!Bt.isHidden(this.transform.zoom)){var It=Re[Bt.source];(Bt.type==="custom"||It.length)&&this.renderLayer(this,H[Bt.source],Bt,It)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:W.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=W.showOverdrawInspector,this.depthRangeFor3D=[0,1-(N._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){var Kt=this.style._layers[L[this.currentLayer]],qt=H[Kt.source],Vt=Le[Kt.source];this._renderTileClippingMasks(Kt,Vt),this.renderLayer(this,qt,Kt,Vt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){var pn=this.style._layers[L[this.currentLayer]],yn=H[pn.source],Sn=(pn.type==="symbol"?Ue:Re)[pn.source];this._renderTileClippingMasks(pn,Le[pn.source]),this.renderLayer(this,yn,pn,Sn)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(On){On.source&&!On.isHidden(G.transform.zoom)&&(On.source!==(xe&&xe.id)&&(xe=G.style.sourceCaches[On.source]),(!ce||ce.getSource().maxzoom<xe.getSource().maxzoom)&&(ce=xe))}),ce&&ql.debug(this,ce,ce.getVisibleCoordinates())),this.options.showPadding&&js(this),this.context.setDefault()},vi.prototype.renderLayer=function(N,W,G,L){G.isHidden(this.transform.zoom)||(G.type==="background"||G.type==="custom"||L.length)&&(this.id=G.id,this.gpuTimingStart(G),ql[G.type](N,W,G,L,this.style.placement.variableOffsets),this.gpuTimingEnd())},vi.prototype.gpuTimingStart=function(N){if(this.options.gpuTiming){var W=this.context.extTimerQuery,G=this.gpuTimers[N.id];G||(G=this.gpuTimers[N.id]={calls:0,cpuTime:0,query:W.createQueryEXT()}),G.calls++,W.beginQueryEXT(W.TIME_ELAPSED_EXT,G.query)}},vi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var N=this.context.extTimerQuery;N.endQueryEXT(N.TIME_ELAPSED_EXT)}},vi.prototype.collectGpuTimers=function(){var N=this.gpuTimers;return this.gpuTimers={},N},vi.prototype.queryGpuTimers=function(N){var W={};for(var G in N){var L=N[G],H=this.context.extTimerQuery,$=H.getQueryObjectEXT(L.query,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(L.query),W[G]=$}return W},vi.prototype.translatePosMatrix=function(N,W,G,L,H){if(!G[0]&&!G[1])return N;var $=H?L==="map"?this.transform.angle:0:L==="viewport"?-this.transform.angle:0;if($){var ne=Math.sin($),ce=Math.cos($);G=[G[0]*ce-G[1]*ne,G[0]*ne+G[1]*ce]}var xe=[H?G[0]:Kn(W,G[0],this.transform.zoom),H?G[1]:Kn(W,G[1],this.transform.zoom),0],Le=new Float32Array(16);return a.translate(Le,N,xe),Le},vi.prototype.saveTileTexture=function(N){var W=this._tileTextures[N.size[0]];W?W.push(N):this._tileTextures[N.size[0]]=[N]},vi.prototype.getTileTexture=function(N){var W=this._tileTextures[N];return W&&W.length>0?W.pop():null},vi.prototype.isPatternMissing=function(N){if(!N)return!1;if(!N.from||!N.to)return!0;var W=this.imageManager.getPattern(N.from.toString()),G=this.imageManager.getPattern(N.to.toString());return!W||!G},vi.prototype.useProgram=function(N,W){this.cache=this.cache||{};var G=""+N+(W?W.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[G]||(this.cache[G]=new _o(this.context,N,ha[N],W,Ul[N],this._showOverdrawInspector)),this.cache[G]},vi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vi.prototype.setBaseState=function(){var N=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(N.FUNC_ADD)},vi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var N=this.context.gl;this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,N.RGBA)}},vi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xs=function(N,W){this.points=N,this.planes=W};xs.fromInvProjectionMatrix=function(N,W,G){var L=Math.pow(2,G),H=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ne){return a.transformMat4([],ne,N)}).map(function(ne){return a.scale$1([],ne,1/ne[3]/W*L)}),$=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ne){var ce=a.sub([],H[ne[0]],H[ne[1]]),xe=a.sub([],H[ne[2]],H[ne[1]]),Le=a.normalize([],a.cross([],ce,xe)),Re=-a.dot(Le,H[ne[1]]);return Le.concat(Re)});return new xs(H,$)};var Ma=function(N,W){this.min=N,this.max=W,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Ma.prototype.quadrant=function(N){for(var W=[N%2==0,N<2],G=a.clone$2(this.min),L=a.clone$2(this.max),H=0;H<W.length;H++)G[H]=W[H]?this.min[H]:this.center[H],L[H]=W[H]?this.center[H]:this.max[H];return L[2]=this.max[2],new Ma(G,L)},Ma.prototype.distanceX=function(N){return Math.max(Math.min(this.max[0],N[0]),this.min[0])-N[0]},Ma.prototype.distanceY=function(N){return Math.max(Math.min(this.max[1],N[1]),this.min[1])-N[1]},Ma.prototype.intersects=function(N){for(var W=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],G=!0,L=0;L<N.planes.length;L++){for(var H=N.planes[L],$=0,ne=0;ne<W.length;ne++)$+=a.dot$1(H,W[ne])>=0;if($===0)return 0;$!==W.length&&(G=!1)}if(G)return 2;for(var ce=0;ce<3;ce++){for(var xe=Number.MAX_VALUE,Le=-Number.MAX_VALUE,Re=0;Re<N.points.length;Re++){var Ue=N.points[Re][ce]-this.min[ce];xe=Math.min(xe,Ue),Le=Math.max(Le,Ue)}if(Le<0||xe>this.max[ce]-this.min[ce])return 0}return 1};var ko=function(N,W,G,L){if(N===void 0&&(N=0),W===void 0&&(W=0),G===void 0&&(G=0),L===void 0&&(L=0),isNaN(N)||N<0||isNaN(W)||W<0||isNaN(G)||G<0||isNaN(L)||L<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=N,this.bottom=W,this.left=G,this.right=L};ko.prototype.interpolate=function(N,W,G){return W.top!=null&&N.top!=null&&(this.top=a.number(N.top,W.top,G)),W.bottom!=null&&N.bottom!=null&&(this.bottom=a.number(N.bottom,W.bottom,G)),W.left!=null&&N.left!=null&&(this.left=a.number(N.left,W.left,G)),W.right!=null&&N.right!=null&&(this.right=a.number(N.right,W.right,G)),this},ko.prototype.getCenter=function(N,W){var G=a.clamp((this.left+N-this.right)/2,0,N),L=a.clamp((this.top+W-this.bottom)/2,0,W);return new a.Point(G,L)},ko.prototype.equals=function(N){return this.top===N.top&&this.bottom===N.bottom&&this.left===N.left&&this.right===N.right},ko.prototype.clone=function(){return new ko(this.top,this.bottom,this.left,this.right)},ko.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ci=function(N,W,G,L,H){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=H===void 0||H,this._minZoom=N||0,this._maxZoom=W||22,this._minPitch=G??0,this._maxPitch=L??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ko,this._posMatrixCache={},this._alignedPosMatrixCache={}},gi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ci.prototype.clone=function(){var N=new ci(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return N.tileSize=this.tileSize,N.latRange=this.latRange,N.width=this.width,N.height=this.height,N._center=this._center,N.zoom=this.zoom,N.angle=this.angle,N._fov=this._fov,N._pitch=this._pitch,N._unmodified=this._unmodified,N._edgeInsets=this._edgeInsets.clone(),N._calcMatrices(),N},gi.minZoom.get=function(){return this._minZoom},gi.minZoom.set=function(N){this._minZoom!==N&&(this._minZoom=N,this.zoom=Math.max(this.zoom,N))},gi.maxZoom.get=function(){return this._maxZoom},gi.maxZoom.set=function(N){this._maxZoom!==N&&(this._maxZoom=N,this.zoom=Math.min(this.zoom,N))},gi.minPitch.get=function(){return this._minPitch},gi.minPitch.set=function(N){this._minPitch!==N&&(this._minPitch=N,this.pitch=Math.max(this.pitch,N))},gi.maxPitch.get=function(){return this._maxPitch},gi.maxPitch.set=function(N){this._maxPitch!==N&&(this._maxPitch=N,this.pitch=Math.min(this.pitch,N))},gi.renderWorldCopies.get=function(){return this._renderWorldCopies},gi.renderWorldCopies.set=function(N){N===void 0?N=!0:N===null&&(N=!1),this._renderWorldCopies=N},gi.worldSize.get=function(){return this.tileSize*this.scale},gi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},gi.size.get=function(){return new a.Point(this.width,this.height)},gi.bearing.get=function(){return-this.angle/Math.PI*180},gi.bearing.set=function(N){var W=-a.wrap(N,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},gi.pitch.get=function(){return this._pitch/Math.PI*180},gi.pitch.set=function(N){var W=a.clamp(N,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},gi.fov.get=function(){return this._fov/Math.PI*180},gi.fov.set=function(N){N=Math.max(.01,Math.min(60,N)),this._fov!==N&&(this._unmodified=!1,this._fov=N/180*Math.PI,this._calcMatrices())},gi.zoom.get=function(){return this._zoom},gi.zoom.set=function(N){var W=Math.min(Math.max(N,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},gi.center.get=function(){return this._center},gi.center.set=function(N){N.lat===this._center.lat&&N.lng===this._center.lng||(this._unmodified=!1,this._center=N,this._constrain(),this._calcMatrices())},gi.padding.get=function(){return this._edgeInsets.toJSON()},gi.padding.set=function(N){this._edgeInsets.equals(N)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,N,1),this._calcMatrices())},gi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ci.prototype.isPaddingEqual=function(N){return this._edgeInsets.equals(N)},ci.prototype.interpolatePadding=function(N,W,G){this._unmodified=!1,this._edgeInsets.interpolate(N,W,G),this._constrain(),this._calcMatrices()},ci.prototype.coveringZoomLevel=function(N){var W=(N.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/N.tileSize));return Math.max(0,W)},ci.prototype.getVisibleUnwrappedCoordinates=function(N){var W=[new a.UnwrappedTileID(0,N)];if(this._renderWorldCopies)for(var G=this.pointCoordinate(new a.Point(0,0)),L=this.pointCoordinate(new a.Point(this.width,0)),H=this.pointCoordinate(new a.Point(this.width,this.height)),$=this.pointCoordinate(new a.Point(0,this.height)),ne=Math.floor(Math.min(G.x,L.x,H.x,$.x)),ce=Math.floor(Math.max(G.x,L.x,H.x,$.x)),xe=ne-1;xe<=ce+1;xe++)xe!==0&&W.push(new a.UnwrappedTileID(xe,N));return W},ci.prototype.coveringTiles=function(N){var W=this.coveringZoomLevel(N),G=W;if(N.minzoom!==void 0&&W<N.minzoom)return[];N.maxzoom!==void 0&&W>N.maxzoom&&(W=N.maxzoom);var L=a.MercatorCoordinate.fromLngLat(this.center),H=Math.pow(2,W),$=[H*L.x,H*L.y,0],ne=xs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,W),ce=N.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ce=W);var xe=function(Sn){return{aabb:new Ma([Sn*H,0,0],[(Sn+1)*H,H,0]),zoom:0,x:0,y:0,wrap:Sn,fullyVisible:!1}},Le=[],Re=[],Ue=W,He=N.reparseOverscaled?G:W;if(this._renderWorldCopies)for(var tt=1;tt<=3;tt++)Le.push(xe(-tt)),Le.push(xe(tt));for(Le.push(xe(0));Le.length>0;){var ct=Le.pop(),dt=ct.x,wt=ct.y,Et=ct.fullyVisible;if(!Et){var kt=ct.aabb.intersects(ne);if(kt===0)continue;Et=kt===2}var Bt=ct.aabb.distanceX($),It=ct.aabb.distanceY($),Kt=Math.max(Math.abs(Bt),Math.abs(It)),qt=3+(1<<Ue-ct.zoom)-2;if(ct.zoom===Ue||Kt>qt&&ct.zoom>=ce)Re.push({tileID:new a.OverscaledTileID(ct.zoom===Ue?He:ct.zoom,ct.wrap,ct.zoom,dt,wt),distanceSq:a.sqrLen([$[0]-.5-dt,$[1]-.5-wt])});else for(var Vt=0;Vt<4;Vt++){var pn=(dt<<1)+Vt%2,yn=(wt<<1)+(Vt>>1);Le.push({aabb:ct.aabb.quadrant(Vt),zoom:ct.zoom+1,x:pn,y:yn,wrap:ct.wrap,fullyVisible:Et})}}return Re.sort(function(Sn,On){return Sn.distanceSq-On.distanceSq}).map(function(Sn){return Sn.tileID})},ci.prototype.resize=function(N,W){this.width=N,this.height=W,this.pixelsToGLUnits=[2/N,-2/W],this._constrain(),this._calcMatrices()},gi.unmodified.get=function(){return this._unmodified},ci.prototype.zoomScale=function(N){return Math.pow(2,N)},ci.prototype.scaleZoom=function(N){return Math.log(N)/Math.LN2},ci.prototype.project=function(N){var W=a.clamp(N.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(N.lng)*this.worldSize,a.mercatorYfromLat(W)*this.worldSize)},ci.prototype.unproject=function(N){return new a.MercatorCoordinate(N.x/this.worldSize,N.y/this.worldSize).toLngLat()},gi.point.get=function(){return this.project(this.center)},ci.prototype.setLocationAtPoint=function(N,W){var G=this.pointCoordinate(W),L=this.pointCoordinate(this.centerPoint),H=this.locationCoordinate(N),$=new a.MercatorCoordinate(H.x-(G.x-L.x),H.y-(G.y-L.y));this.center=this.coordinateLocation($),this._renderWorldCopies&&(this.center=this.center.wrap())},ci.prototype.locationPoint=function(N){return this.coordinatePoint(this.locationCoordinate(N))},ci.prototype.pointLocation=function(N){return this.coordinateLocation(this.pointCoordinate(N))},ci.prototype.locationCoordinate=function(N){return a.MercatorCoordinate.fromLngLat(N)},ci.prototype.coordinateLocation=function(N){return N.toLngLat()},ci.prototype.pointCoordinate=function(N){var W=[N.x,N.y,0,1],G=[N.x,N.y,1,1];a.transformMat4(W,W,this.pixelMatrixInverse),a.transformMat4(G,G,this.pixelMatrixInverse);var L=W[3],H=G[3],$=W[0]/L,ne=G[0]/H,ce=W[1]/L,xe=G[1]/H,Le=W[2]/L,Re=G[2]/H,Ue=Le===Re?0:(0-Le)/(Re-Le);return new a.MercatorCoordinate(a.number($,ne,Ue)/this.worldSize,a.number(ce,xe,Ue)/this.worldSize)},ci.prototype.coordinatePoint=function(N){var W=[N.x*this.worldSize,N.y*this.worldSize,0,1];return a.transformMat4(W,W,this.pixelMatrix),new a.Point(W[0]/W[3],W[1]/W[3])},ci.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},ci.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ci.prototype.setMaxBounds=function(N){N?(this.lngRange=[N.getWest(),N.getEast()],this.latRange=[N.getSouth(),N.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ci.prototype.calculatePosMatrix=function(N,W){W===void 0&&(W=!1);var G=N.key,L=W?this._alignedPosMatrixCache:this._posMatrixCache;if(L[G])return L[G];var H=N.canonical,$=this.worldSize/this.zoomScale(H.z),ne=H.x+Math.pow(2,H.z)*N.wrap,ce=a.identity(new Float64Array(16));return a.translate(ce,ce,[ne*$,H.y*$,0]),a.scale(ce,ce,[$/a.EXTENT,$/a.EXTENT,1]),a.multiply(ce,W?this.alignedProjMatrix:this.projMatrix,ce),L[G]=new Float32Array(ce),L[G]},ci.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ci.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var N,W,G,L,H=-90,$=90,ne=-180,ce=180,xe=this.size,Le=this._unmodified;if(this.latRange){var Re=this.latRange;H=a.mercatorYfromLat(Re[1])*this.worldSize,N=($=a.mercatorYfromLat(Re[0])*this.worldSize)-H<xe.y?xe.y/($-H):0}if(this.lngRange){var Ue=this.lngRange;ne=a.mercatorXfromLng(Ue[0])*this.worldSize,W=(ce=a.mercatorXfromLng(Ue[1])*this.worldSize)-ne<xe.x?xe.x/(ce-ne):0}var He=this.point,tt=Math.max(W||0,N||0);if(tt)return this.center=this.unproject(new a.Point(W?(ce+ne)/2:He.x,N?($+H)/2:He.y)),this.zoom+=this.scaleZoom(tt),this._unmodified=Le,void(this._constraining=!1);if(this.latRange){var ct=He.y,dt=xe.y/2;ct-dt<H&&(L=H+dt),ct+dt>$&&(L=$-dt)}if(this.lngRange){var wt=He.x,Et=xe.x/2;wt-Et<ne&&(G=ne+Et),wt+Et>ce&&(G=ce-Et)}G===void 0&&L===void 0||(this.center=this.unproject(new a.Point(G!==void 0?G:He.x,L!==void 0?L:He.y))),this._unmodified=Le,this._constraining=!1}},ci.prototype._calcMatrices=function(){if(this.height){var N=this._fov/2,W=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(N)*this.height;var G=Math.PI/2+this._pitch,L=this._fov*(.5+W.y/this.height),H=Math.sin(L)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-G-L,.01,Math.PI-.01)),$=this.point,ne=$.x,ce=$.y,xe=1.01*(Math.cos(Math.PI/2-this._pitch)*H+this.cameraToCenterDistance),Le=this.height/50,Re=new Float64Array(16);a.perspective(Re,this._fov,this.width/this.height,Le,xe),Re[8]=2*-W.x/this.width,Re[9]=2*W.y/this.height,a.scale(Re,Re,[1,-1,1]),a.translate(Re,Re,[0,0,-this.cameraToCenterDistance]),a.rotateX(Re,Re,this._pitch),a.rotateZ(Re,Re,this.angle),a.translate(Re,Re,[-ne,-ce,0]),this.mercatorMatrix=a.scale([],Re,[this.worldSize,this.worldSize,this.worldSize]),a.scale(Re,Re,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Re,this.invProjMatrix=a.invert([],this.projMatrix);var Ue=this.width%2/2,He=this.height%2/2,tt=Math.cos(this.angle),ct=Math.sin(this.angle),dt=ne-Math.round(ne)+tt*Ue+ct*He,wt=ce-Math.round(ce)+tt*He+ct*Ue,Et=new Float64Array(Re);if(a.translate(Et,Et,[dt>.5?dt-1:dt,wt>.5?wt-1:wt,0]),this.alignedProjMatrix=Et,Re=a.create(),a.scale(Re,Re,[this.width/2,-this.height/2,1]),a.translate(Re,Re,[1,-1,0]),this.labelPlaneMatrix=Re,Re=a.create(),a.scale(Re,Re,[1,-1,1]),a.translate(Re,Re,[-1,-1,0]),a.scale(Re,Re,[2/this.width,2/this.height,1]),this.glCoordMatrix=Re,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Re=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Re,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ci.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var N=this.pointCoordinate(new a.Point(0,0)),W=[N.x*this.worldSize,N.y*this.worldSize,0,1];return a.transformMat4(W,W,this.pixelMatrix)[3]/this.cameraToCenterDistance},ci.prototype.getCameraPoint=function(){var N=this._pitch,W=Math.tan(N)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,W))},ci.prototype.getCameraQueryGeometry=function(N){var W=this.getCameraPoint();if(N.length===1)return[N[0],W];for(var G=W.x,L=W.y,H=W.x,$=W.y,ne=0,ce=N;ne<ce.length;ne+=1){var xe=ce[ne];G=Math.min(G,xe.x),L=Math.min(L,xe.y),H=Math.max(H,xe.x),$=Math.max($,xe.y)}return[new a.Point(G,L),new a.Point(H,L),new a.Point(H,$),new a.Point(G,$),new a.Point(G,L)]},Object.defineProperties(ci.prototype,gi);var to=function(N){var W,G,L,H,$;this._hashName=N&&encodeURIComponent(N),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(W=this._updateHashUnthrottled.bind(this),G=300,L=!1,H=null,$=function(){H=null,L&&(W(),H=setTimeout($,G),L=!1)},function(){return L=!0,H||$(),H})};to.prototype.addTo=function(N){return this._map=N,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},to.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},to.prototype.getHashString=function(N){var W=this._map.getCenter(),G=Math.round(100*this._map.getZoom())/100,L=Math.ceil((G*Math.LN2+Math.log(512/360/.5))/Math.LN10),H=Math.pow(10,L),$=Math.round(W.lng*H)/H,ne=Math.round(W.lat*H)/H,ce=this._map.getBearing(),xe=this._map.getPitch(),Le="";if(Le+=N?"/"+$+"/"+ne+"/"+G:G+"/"+ne+"/"+$,(ce||xe)&&(Le+="/"+Math.round(10*ce)/10),xe&&(Le+="/"+Math.round(xe)),this._hashName){var Re=this._hashName,Ue=!1,He=a.window.location.hash.slice(1).split("&").map(function(tt){var ct=tt.split("=")[0];return ct===Re?(Ue=!0,ct+"="+Le):tt}).filter(function(tt){return tt});return Ue||He.push(Re+"="+Le),"#"+He.join("&")}return"#"+Le},to.prototype._getCurrentHash=function(){var N,W=this,G=a.window.location.hash.replace("#","");return this._hashName?(G.split("&").map(function(L){return L.split("=")}).forEach(function(L){L[0]===W._hashName&&(N=L)}),(N&&N[1]||"").split("/")):G.split("/")},to.prototype._onHashChange=function(){var N=this._getCurrentHash();if(N.length>=3&&!N.some(function(G){return isNaN(G)})){var W=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(N[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+N[2],+N[1]],zoom:+N[0],bearing:W,pitch:+(N[4]||0)}),!0}return!1},to.prototype._updateHashUnthrottled=function(){var N=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,N)}catch{}};var tl={linearity:.3,easing:a.bezier(0,0,.3,1)},Tl=a.extend({deceleration:2500,maxSpeed:1400},tl),Wl=a.extend({deceleration:20,maxSpeed:1400},tl),kl=a.extend({deceleration:1e3,maxSpeed:360},tl),Al=a.extend({deceleration:1e3,maxSpeed:90},tl),co=function(N){this._map=N,this.clear()};function bs(N,W){(!N.duration||N.duration<W.duration)&&(N.duration=W.duration,N.easing=W.easing)}function _s(N,W,G){var L=G.maxSpeed,H=G.linearity,$=G.deceleration,ne=a.clamp(N*H/(W/1e3),-L,L),ce=Math.abs(ne)/($*H);return{easing:G.easing,duration:1e3*ce,amount:ne*(ce/2)}}co.prototype.clear=function(){this._inertiaBuffer=[]},co.prototype.record=function(N){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:N})},co.prototype._drainInertiaBuffer=function(){for(var N=this._inertiaBuffer,W=a.browser.now();N.length>0&&W-N[0].time>160;)N.shift()},co.prototype._onMoveEnd=function(N){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var W={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},G=0,L=this._inertiaBuffer;G<L.length;G+=1){var H=L[G].settings;W.zoom+=H.zoomDelta||0,W.bearing+=H.bearingDelta||0,W.pitch+=H.pitchDelta||0,H.panDelta&&W.pan._add(H.panDelta),H.around&&(W.around=H.around),H.pinchAround&&(W.pinchAround=H.pinchAround)}var $=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ne={};if(W.pan.mag()){var ce=_s(W.pan.mag(),$,a.extend({},Tl,N||{}));ne.offset=W.pan.mult(ce.amount/W.pan.mag()),ne.center=this._map.transform.center,bs(ne,ce)}if(W.zoom){var xe=_s(W.zoom,$,Wl);ne.zoom=this._map.transform.zoom+xe.amount,bs(ne,xe)}if(W.bearing){var Le=_s(W.bearing,$,kl);ne.bearing=this._map.transform.bearing+a.clamp(Le.amount,-179,179),bs(ne,Le)}if(W.pitch){var Re=_s(W.pitch,$,Al);ne.pitch=this._map.transform.pitch+Re.amount,bs(ne,Re)}if(ne.zoom||ne.bearing){var Ue=W.pinchAround===void 0?W.around:W.pinchAround;ne.around=Ue?this._map.unproject(Ue):this._map.getCenter()}return this.clear(),a.extend(ne,{noMoveStart:!0})}};var Pa=function(N){function W(L,H,$,ne){ne===void 0&&(ne={});var ce=b.mousePos(H.getCanvasContainer(),$),xe=H.unproject(ce);N.call(this,L,a.extend({point:ce,lngLat:xe,originalEvent:$},ne)),this._defaultPrevented=!1,this.target=H}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(a.Event),Ml=function(N){function W(L,H,$){var ne=L==="touchend"?$.changedTouches:$.touches,ce=b.touchPos(H.getCanvasContainer(),ne),xe=ce.map(function(Ue){return H.unproject(Ue)}),Le=ce.reduce(function(Ue,He,tt,ct){return Ue.add(He.div(ct.length))},new a.Point(0,0)),Re=H.unproject(Le);N.call(this,L,{points:ce,point:Le,lngLats:xe,lngLat:Re,originalEvent:$}),this._defaultPrevented=!1}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(a.Event),uo=function(N){function W(L,H,$){N.call(this,L,{originalEvent:$}),this._defaultPrevented=!1}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(a.Event),da=function(N,W){this._map=N,this._clickTolerance=W.clickTolerance};da.prototype.reset=function(){delete this._mousedownPos},da.prototype.wheel=function(N){return this._firePreventable(new uo(N.type,this._map,N))},da.prototype.mousedown=function(N,W){return this._mousedownPos=W,this._firePreventable(new Pa(N.type,this._map,N))},da.prototype.mouseup=function(N){this._map.fire(new Pa(N.type,this._map,N))},da.prototype.click=function(N,W){this._mousedownPos&&this._mousedownPos.dist(W)>=this._clickTolerance||this._map.fire(new Pa(N.type,this._map,N))},da.prototype.dblclick=function(N){return this._firePreventable(new Pa(N.type,this._map,N))},da.prototype.mouseover=function(N){this._map.fire(new Pa(N.type,this._map,N))},da.prototype.mouseout=function(N){this._map.fire(new Pa(N.type,this._map,N))},da.prototype.touchstart=function(N){return this._firePreventable(new Ml(N.type,this._map,N))},da.prototype.touchmove=function(N){this._map.fire(new Ml(N.type,this._map,N))},da.prototype.touchend=function(N){this._map.fire(new Ml(N.type,this._map,N))},da.prototype.touchcancel=function(N){this._map.fire(new Ml(N.type,this._map,N))},da.prototype._firePreventable=function(N){if(this._map.fire(N),N.defaultPrevented)return{}},da.prototype.isEnabled=function(){return!0},da.prototype.isActive=function(){return!1},da.prototype.enable=function(){},da.prototype.disable=function(){};var xa=function(N){this._map=N};xa.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},xa.prototype.mousemove=function(N){this._map.fire(new Pa(N.type,this._map,N))},xa.prototype.mousedown=function(){this._delayContextMenu=!0},xa.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Pa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},xa.prototype.contextmenu=function(N){this._delayContextMenu?this._contextMenuEvent=N:this._map.fire(new Pa(N.type,this._map,N)),this._map.listens("contextmenu")&&N.preventDefault()},xa.prototype.isEnabled=function(){return!0},xa.prototype.isActive=function(){return!1},xa.prototype.enable=function(){},xa.prototype.disable=function(){};var ki=function(N,W){this._map=N,this._el=N.getCanvasContainer(),this._container=N.getContainer(),this._clickTolerance=W.clickTolerance||1};function ba(N,W){for(var G={},L=0;L<N.length;L++)G[N[L].identifier]=W[L];return G}ki.prototype.isEnabled=function(){return!!this._enabled},ki.prototype.isActive=function(){return!!this._active},ki.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ki.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ki.prototype.mousedown=function(N,W){this.isEnabled()&&N.shiftKey&&N.button===0&&(b.disableDrag(),this._startPos=this._lastPos=W,this._active=!0)},ki.prototype.mousemoveWindow=function(N,W){if(this._active){var G=W;if(!(this._lastPos.equals(G)||!this._box&&G.dist(this._startPos)<this._clickTolerance)){var L=this._startPos;this._lastPos=G,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",N));var H=Math.min(L.x,G.x),$=Math.max(L.x,G.x),ne=Math.min(L.y,G.y),ce=Math.max(L.y,G.y);b.setTransform(this._box,"translate("+H+"px,"+ne+"px)"),this._box.style.width=$-H+"px",this._box.style.height=ce-ne+"px"}}},ki.prototype.mouseupWindow=function(N,W){var G=this;if(this._active&&N.button===0){var L=this._startPos,H=W;if(this.reset(),b.suppressClick(),L.x!==H.x||L.y!==H.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:N})),{cameraAnimation:function($){return $.fitScreenCoordinates(L,H,G._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",N)}},ki.prototype.keydown=function(N){this._active&&N.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",N))},ki.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},ki.prototype._fireEvent=function(N,W){return this._map.fire(new a.Event(N,{originalEvent:W}))};var No=function(N){this.reset(),this.numTouches=N.numTouches};No.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},No.prototype.touchstart=function(N,W,G){(this.centroid||G.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=N.timeStamp),G.length===this.numTouches&&(this.centroid=function(L){for(var H=new a.Point(0,0),$=0,ne=L;$<ne.length;$+=1){var ce=ne[$];H._add(ce)}return H.div(L.length)}(W),this.touches=ba(G,W)))},No.prototype.touchmove=function(N,W,G){if(!this.aborted&&this.centroid){var L=ba(G,W);for(var H in this.touches){var $=this.touches[H],ne=L[H];(!ne||ne.dist($)>30)&&(this.aborted=!0)}}},No.prototype.touchend=function(N,W,G){if((!this.centroid||N.timeStamp-this.startTime>500)&&(this.aborted=!0),G.length===0){var L=!this.aborted&&this.centroid;if(this.reset(),L)return L}};var Hs=function(N){this.singleTap=new No(N),this.numTaps=N.numTaps,this.reset()};Hs.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Hs.prototype.touchstart=function(N,W,G){this.singleTap.touchstart(N,W,G)},Hs.prototype.touchmove=function(N,W,G){this.singleTap.touchmove(N,W,G)},Hs.prototype.touchend=function(N,W,G){var L=this.singleTap.touchend(N,W,G);if(L){var H=N.timeStamp-this.lastTime<500,$=!this.lastTap||this.lastTap.dist(L)<30;if(H&&$||this.reset(),this.count++,this.lastTime=N.timeStamp,this.lastTap=L,this.count===this.numTaps)return this.reset(),L}};var Ao=function(){this._zoomIn=new Hs({numTouches:1,numTaps:2}),this._zoomOut=new Hs({numTouches:2,numTaps:1}),this.reset()};Ao.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ao.prototype.touchstart=function(N,W,G){this._zoomIn.touchstart(N,W,G),this._zoomOut.touchstart(N,W,G)},Ao.prototype.touchmove=function(N,W,G){this._zoomIn.touchmove(N,W,G),this._zoomOut.touchmove(N,W,G)},Ao.prototype.touchend=function(N,W,G){var L=this,H=this._zoomIn.touchend(N,W,G),$=this._zoomOut.touchend(N,W,G);return H?(this._active=!0,N.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(H)},{originalEvent:N})}}):$?(this._active=!0,N.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject($)},{originalEvent:N})}}):void 0},Ao.prototype.touchcancel=function(){this.reset()},Ao.prototype.enable=function(){this._enabled=!0},Ao.prototype.disable=function(){this._enabled=!1,this.reset()},Ao.prototype.isEnabled=function(){return this._enabled},Ao.prototype.isActive=function(){return this._active};var ws={};ws[0]=1,ws[2]=2;var Na=function(N){this.reset(),this._clickTolerance=N.clickTolerance||1};Na.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Na.prototype._correctButton=function(N,W){return!1},Na.prototype._move=function(N,W){return{}},Na.prototype.mousedown=function(N,W){if(!this._lastPoint){var G=b.mouseButton(N);this._correctButton(N,G)&&(this._lastPoint=W,this._eventButton=G)}},Na.prototype.mousemoveWindow=function(N,W){var G=this._lastPoint;if(G){if(N.preventDefault(),function(L,H){var $=ws[H];return L.buttons===void 0||(L.buttons&$)!==$}(N,this._eventButton))this.reset();else if(this._moved||!(W.dist(G)<this._clickTolerance))return this._moved=!0,this._lastPoint=W,this._move(G,W)}},Na.prototype.mouseupWindow=function(N){this._lastPoint&&b.mouseButton(N)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},Na.prototype.enable=function(){this._enabled=!0},Na.prototype.disable=function(){this._enabled=!1,this.reset()},Na.prototype.isEnabled=function(){return this._enabled},Na.prototype.isActive=function(){return this._active};var Gs=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.mousedown=function(G,L){N.prototype.mousedown.call(this,G,L),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(G,L){return L===0&&!G.ctrlKey},W.prototype._move=function(G,L){return{around:L,panDelta:L.sub(G)}},W}(Na),ts=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(G,L){return L===0&&G.ctrlKey||L===2},W.prototype._move=function(G,L){var H=.8*(L.x-G.x);if(H)return this._active=!0,{bearingDelta:H}},W.prototype.contextmenu=function(G){G.preventDefault()},W}(Na),fo=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(G,L){return L===0&&G.ctrlKey||L===2},W.prototype._move=function(G,L){var H=-.5*(L.y-G.y);if(H)return this._active=!0,{pitchDelta:H}},W.prototype.contextmenu=function(G){G.preventDefault()},W}(Na),ho=function(N){this._minTouches=1,this._clickTolerance=N.clickTolerance||1,this.reset()};ho.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},ho.prototype.touchstart=function(N,W,G){return this._calculateTransform(N,W,G)},ho.prototype.touchmove=function(N,W,G){if(this._active&&!(G.length<this._minTouches))return N.preventDefault(),this._calculateTransform(N,W,G)},ho.prototype.touchend=function(N,W,G){this._calculateTransform(N,W,G),this._active&&G.length<this._minTouches&&this.reset()},ho.prototype.touchcancel=function(){this.reset()},ho.prototype._calculateTransform=function(N,W,G){G.length>0&&(this._active=!0);var L=ba(G,W),H=new a.Point(0,0),$=new a.Point(0,0),ne=0;for(var ce in L){var xe=L[ce],Le=this._touches[ce];Le&&(H._add(xe),$._add(xe.sub(Le)),ne++,L[ce]=xe)}if(this._touches=L,!(ne<this._minTouches)&&$.mag()){var Re=$.div(ne);if(this._sum._add(Re),!(this._sum.mag()<this._clickTolerance))return{around:H.div(ne),panDelta:Re}}},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var Si=function(){this.reset()};function Mo(N,W,G){for(var L=0;L<N.length;L++)if(N[L].identifier===G)return W[L]}Si.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Si.prototype._start=function(N){},Si.prototype._move=function(N,W,G){return{}},Si.prototype.touchstart=function(N,W,G){this._firstTwoTouches||G.length<2||(this._firstTwoTouches=[G[0].identifier,G[1].identifier],this._start([W[0],W[1]]))},Si.prototype.touchmove=function(N,W,G){if(this._firstTwoTouches){N.preventDefault();var L=this._firstTwoTouches,H=L[0],$=L[1],ne=Mo(G,W,H),ce=Mo(G,W,$);if(ne&&ce){var xe=this._aroundCenter?null:ne.add(ce).div(2);return this._move([ne,ce],xe,N)}}},Si.prototype.touchend=function(N,W,G){if(this._firstTwoTouches){var L=this._firstTwoTouches,H=L[0],$=L[1],ne=Mo(G,W,H),ce=Mo(G,W,$);ne&&ce||(this._active&&b.suppressClick(),this.reset())}},Si.prototype.touchcancel=function(){this.reset()},Si.prototype.enable=function(N){this._enabled=!0,this._aroundCenter=!!N&&N.around==="center"},Si.prototype.disable=function(){this._enabled=!1,this.reset()},Si.prototype.isEnabled=function(){return this._enabled},Si.prototype.isActive=function(){return this._active};function Lr(N,W){return Math.log(N/W)/Math.LN2}var Sl=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(G){this._startDistance=this._distance=G[0].dist(G[1])},W.prototype._move=function(G,L){var H=this._distance;if(this._distance=G[0].dist(G[1]),this._active||!(Math.abs(Lr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Lr(this._distance,H),pinchAround:L}},W}(Si);function dc(N,W){return 180*N.angleWith(W)/Math.PI}var Ts=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(G){this._startVector=this._vector=G[0].sub(G[1]),this._minDiameter=G[0].dist(G[1])},W.prototype._move=function(G,L){var H=this._vector;if(this._vector=G[0].sub(G[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:dc(this._vector,H),pinchAround:L}},W.prototype._isBelowThreshold=function(G){this._minDiameter=Math.min(this._minDiameter,G.mag());var L=25/(Math.PI*this._minDiameter)*360,H=dc(G,this._startVector);return Math.abs(H)<L},W}(Si);function ks(N){return Math.abs(N.y)>Math.abs(N.x)}var qs=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.reset=function(){N.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(G){this._lastPoints=G,ks(G[0].sub(G[1]))&&(this._valid=!1)},W.prototype._move=function(G,L,H){var $=G[0].sub(this._lastPoints[0]),ne=G[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically($,ne,H.timeStamp),this._valid)return this._lastPoints=G,this._active=!0,{pitchDelta:($.y+ne.y)/2*-.5}},W.prototype.gestureBeginsVertically=function(G,L,H){if(this._valid!==void 0)return this._valid;var $=G.mag()>=2,ne=L.mag()>=2;if($||ne){if(!$||!ne)return this._firstMove===void 0&&(this._firstMove=H),H-this._firstMove<100&&void 0;var ce=G.y>0==L.y>0;return ks(G)&&ks(L)&&ce}},W}(Si),nl={panStep:100,bearingStep:15,pitchStep:10},kr=function(){var N=nl;this._panStep=N.panStep,this._bearingStep=N.bearingStep,this._pitchStep=N.pitchStep,this._rotationDisabled=!1};function Cl(N){return N*(2-N)}kr.prototype.reset=function(){this._active=!1},kr.prototype.keydown=function(N){var W=this;if(!(N.altKey||N.ctrlKey||N.metaKey)){var G=0,L=0,H=0,$=0,ne=0;switch(N.keyCode){case 61:case 107:case 171:case 187:G=1;break;case 189:case 109:case 173:G=-1;break;case 37:N.shiftKey?L=-1:(N.preventDefault(),$=-1);break;case 39:N.shiftKey?L=1:(N.preventDefault(),$=1);break;case 38:N.shiftKey?H=1:(N.preventDefault(),ne=-1);break;case 40:N.shiftKey?H=-1:(N.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(L=0,H=0),{cameraAnimation:function(ce){var xe=ce.getZoom();ce.easeTo({duration:300,easeId:"keyboardHandler",easing:Cl,zoom:G?Math.round(xe)+G*(N.shiftKey?2:1):xe,bearing:ce.getBearing()+L*W._bearingStep,pitch:ce.getPitch()+H*W._pitchStep,offset:[-$*W._panStep,-ne*W._panStep],center:ce.getCenter()},{originalEvent:N})}}}},kr.prototype.enable=function(){this._enabled=!0},kr.prototype.disable=function(){this._enabled=!1,this.reset()},kr.prototype.isEnabled=function(){return this._enabled},kr.prototype.isActive=function(){return this._active},kr.prototype.disableRotation=function(){this._rotationDisabled=!0},kr.prototype.enableRotation=function(){this._rotationDisabled=!1};var ns=4.000244140625,pa=function(N,W){this._map=N,this._el=N.getCanvasContainer(),this._handler=W,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)};pa.prototype.setZoomRate=function(N){this._defaultZoomRate=N},pa.prototype.setWheelZoomRate=function(N){this._wheelZoomRate=N},pa.prototype.isEnabled=function(){return!!this._enabled},pa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},pa.prototype.isZooming=function(){return!!this._zooming},pa.prototype.enable=function(N){this.isEnabled()||(this._enabled=!0,this._aroundCenter=N&&N.around==="center")},pa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pa.prototype.wheel=function(N){if(this.isEnabled()){var W=N.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*N.deltaY:N.deltaY,G=a.browser.now(),L=G-(this._lastWheelEventTime||0);this._lastWheelEventTime=G,W!==0&&W%ns==0?this._type="wheel":W!==0&&Math.abs(W)<4?this._type="trackpad":L>400?(this._type=null,this._lastValue=W,this._timeout=setTimeout(this._onTimeout,40,N)):this._type||(this._type=Math.abs(L*W)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,W+=this._lastValue)),N.shiftKey&&W&&(W/=4),this._type&&(this._lastWheelEvent=N,this._delta-=W,this._active||this._start(N)),N.preventDefault()}},pa.prototype._onTimeout=function(N){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(N)},pa.prototype._start=function(N){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var W=b.mousePos(this._el,N);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(W)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},pa.prototype.renderFrame=function(){var N=this;if(this._frameId&&(this._frameId=null,this.isActive())){var W=this._map.transform;if(this._delta!==0){var G=this._type==="wheel"&&Math.abs(this._delta)>ns?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&L!==0&&(L=1/L);var H=typeof this._targetZoom=="number"?W.zoomScale(this._targetZoom):W.scale;this._targetZoom=Math.min(W.maxZoom,Math.max(W.minZoom,W.scaleZoom(H*L))),this._type==="wheel"&&(this._startZoom=W.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var $,ne=typeof this._targetZoom=="number"?this._targetZoom:W.zoom,ce=this._startZoom,xe=this._easing,Le=!1;if(this._type==="wheel"&&ce&&xe){var Re=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Ue=xe(Re);$=a.number(ce,ne,Ue),Re<1?this._frameId||(this._frameId=!0):Le=!0}else $=ne,Le=!0;return this._active=!0,Le&&(this._active=!1,this._finishTimeout=setTimeout(function(){N._zooming=!1,N._handler._triggerRenderFrame(),delete N._targetZoom,delete N._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Le,zoomDelta:$-W.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},pa.prototype._smoothOutEasing=function(N){var W=a.ease;if(this._prevEase){var G=this._prevEase,L=(a.browser.now()-G.start)/G.duration,H=G.easing(L+.01)-G.easing(L),$=.27/Math.sqrt(H*H+1e-4)*.01,ne=Math.sqrt(.0729-$*$);W=a.bezier($,ne,.25,1)}return this._prevEase={start:a.browser.now(),duration:N,easing:W},W},pa.prototype.reset=function(){this._active=!1};var As=function(N,W){this._clickZoom=N,this._tapZoom=W};As.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},As.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},As.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},As.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var So=function(){this.reset()};So.prototype.reset=function(){this._active=!1},So.prototype.dblclick=function(N,W){return N.preventDefault(),{cameraAnimation:function(G){G.easeTo({duration:300,zoom:G.getZoom()+(N.shiftKey?-1:1),around:G.unproject(W)},{originalEvent:N})}}},So.prototype.enable=function(){this._enabled=!0},So.prototype.disable=function(){this._enabled=!1,this.reset()},So.prototype.isEnabled=function(){return this._enabled},So.prototype.isActive=function(){return this._active};var po=function(){this._tap=new Hs({numTouches:1,numTaps:1}),this.reset()};po.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},po.prototype.touchstart=function(N,W,G){this._swipePoint||(this._tapTime&&N.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?G.length>0&&(this._swipePoint=W[0],this._swipeTouch=G[0].identifier):this._tap.touchstart(N,W,G))},po.prototype.touchmove=function(N,W,G){if(this._tapTime){if(this._swipePoint){if(G[0].identifier!==this._swipeTouch)return;var L=W[0],H=L.y-this._swipePoint.y;return this._swipePoint=L,N.preventDefault(),this._active=!0,{zoomDelta:H/128}}}else this._tap.touchmove(N,W,G)},po.prototype.touchend=function(N,W,G){this._tapTime?this._swipePoint&&G.length===0&&this.reset():this._tap.touchend(N,W,G)&&(this._tapTime=N.timeStamp)},po.prototype.touchcancel=function(){this.reset()},po.prototype.enable=function(){this._enabled=!0},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};var Da=function(N,W,G){this._el=N,this._mousePan=W,this._touchPan=G};Da.prototype.enable=function(N){this._inertiaOptions=N||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Da.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Da.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Da.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var jo=function(N,W,G){this._pitchWithRotate=N.pitchWithRotate,this._mouseRotate=W,this._mousePitch=G};jo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},jo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},jo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},jo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var mo=function(N,W,G,L){this._el=N,this._touchZoom=W,this._touchRotate=G,this._tapDragZoom=L,this._rotationDisabled=!1,this._enabled=!0};mo.prototype.enable=function(N){this._touchZoom.enable(N),this._rotationDisabled||this._touchRotate.enable(N),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},mo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},mo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},mo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},mo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},mo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rs=function(N){return N.zoom||N.drag||N.pitch||N.rotate},El=function(N){function W(){N.apply(this,arguments)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W}(a.Event);function Ms(N){return N.panDelta&&N.panDelta.mag()||N.zoomDelta||N.bearingDelta||N.pitchDelta}var si=function(N,W){this._map=N,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new co(N),this._bearingSnap=W.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(W),a.bindAll(["handleEvent","handleWindowEvent"],this);var G=this._el;this._listeners=[[G,"touchstart",{passive:!0}],[G,"touchmove",{passive:!1}],[G,"touchend",void 0],[G,"touchcancel",void 0],[G,"mousedown",void 0],[G,"mousemove",void 0],[G,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[G,"mouseover",void 0],[G,"mouseout",void 0],[G,"dblclick",void 0],[G,"click",void 0],[G,"keydown",{capture:!1}],[G,"keyup",void 0],[G,"wheel",{passive:!1}],[G,"contextmenu",void 0],[a.window,"blur",void 0]];for(var L=0,H=this._listeners;L<H.length;L+=1){var $=H[L],ne=$[0],ce=$[1],xe=$[2];b.addEventListener(ne,ce,ne===a.window.document?this.handleWindowEvent:this.handleEvent,xe)}};si.prototype.destroy=function(){for(var N=0,W=this._listeners;N<W.length;N+=1){var G=W[N],L=G[0],H=G[1],$=G[2];b.removeEventListener(L,H,L===a.window.document?this.handleWindowEvent:this.handleEvent,$)}},si.prototype._addDefaultHandlers=function(N){var W=this._map,G=W.getCanvasContainer();this._add("mapEvent",new da(W,N));var L=W.boxZoom=new ki(W,N);this._add("boxZoom",L);var H=new Ao,$=new So;W.doubleClickZoom=new As($,H),this._add("tapZoom",H),this._add("clickZoom",$);var ne=new po;this._add("tapDragZoom",ne);var ce=W.touchPitch=new qs;this._add("touchPitch",ce);var xe=new ts(N),Le=new fo(N);W.dragRotate=new jo(N,xe,Le),this._add("mouseRotate",xe,["mousePitch"]),this._add("mousePitch",Le,["mouseRotate"]);var Re=new Gs(N),Ue=new ho(N);W.dragPan=new Da(G,Re,Ue),this._add("mousePan",Re),this._add("touchPan",Ue,["touchZoom","touchRotate"]);var He=new Ts,tt=new Sl;W.touchZoomRotate=new mo(G,tt,He,ne),this._add("touchRotate",He,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]);var ct=W.scrollZoom=new pa(W,this);this._add("scrollZoom",ct,["mousePan"]);var dt=W.keyboard=new kr;this._add("keyboard",dt),this._add("blockableMapEvent",new xa(W));for(var wt=0,Et=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];wt<Et.length;wt+=1){var kt=Et[wt];N.interactive&&N[kt]&&W[kt].enable(N[kt])}},si.prototype._add=function(N,W,G){this._handlers.push({handlerName:N,handler:W,allowed:G}),this._handlersById[N]=W},si.prototype.stop=function(N){if(!this._updatingCamera){for(var W=0,G=this._handlers;W<G.length;W+=1)G[W].handler.reset();this._inertia.clear(),this._fireEvents({},{},N),this._changes=[]}},si.prototype.isActive=function(){for(var N=0,W=this._handlers;N<W.length;N+=1)if(W[N].handler.isActive())return!0;return!1},si.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},si.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},si.prototype.isMoving=function(){return!!rs(this._eventsInProgress)||this.isZooming()},si.prototype._blockedByActive=function(N,W,G){for(var L in N)if(L!==G&&(!W||W.indexOf(L)<0))return!0;return!1},si.prototype.handleWindowEvent=function(N){this.handleEvent(N,N.type+"Window")},si.prototype._getMapTouches=function(N){for(var W=[],G=0,L=N;G<L.length;G+=1){var H=L[G],$=H.target;this._el.contains($)&&W.push(H)}return W},si.prototype.handleEvent=function(N,W){if(N.type!=="blur"){this._updatingCamera=!0;for(var G=N.type==="renderFrame"?void 0:N,L={needsRenderFrame:!1},H={},$={},ne=N.touches?this._getMapTouches(N.touches):void 0,ce=ne?b.touchPos(this._el,ne):b.mousePos(this._el,N),xe=0,Le=this._handlers;xe<Le.length;xe+=1){var Re=Le[xe],Ue=Re.handlerName,He=Re.handler,tt=Re.allowed;if(He.isEnabled()){var ct=void 0;this._blockedByActive($,tt,Ue)?He.reset():He[W||N.type]&&(ct=He[W||N.type](N,ce,ne),this.mergeHandlerResult(L,H,ct,Ue,G),ct&&ct.needsRenderFrame&&this._triggerRenderFrame()),(ct||He.isActive())&&($[Ue]=He)}}var dt={};for(var wt in this._previousActiveHandlers)$[wt]||(dt[wt]=G);this._previousActiveHandlers=$,(Object.keys(dt).length||Ms(L))&&(this._changes.push([L,H,dt]),this._triggerRenderFrame()),(Object.keys($).length||Ms(L))&&this._map._stop(!0),this._updatingCamera=!1;var Et=L.cameraAnimation;Et&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Et(this._map))}else this.stop(!0)},si.prototype.mergeHandlerResult=function(N,W,G,L,H){if(G){a.extend(N,G);var $={handlerName:L,originalEvent:G.originalEvent||H};G.zoomDelta!==void 0&&(W.zoom=$),G.panDelta!==void 0&&(W.drag=$),G.pitchDelta!==void 0&&(W.pitch=$),G.bearingDelta!==void 0&&(W.rotate=$)}},si.prototype._applyChanges=function(){for(var N={},W={},G={},L=0,H=this._changes;L<H.length;L+=1){var $=H[L],ne=$[0],ce=$[1],xe=$[2];ne.panDelta&&(N.panDelta=(N.panDelta||new a.Point(0,0))._add(ne.panDelta)),ne.zoomDelta&&(N.zoomDelta=(N.zoomDelta||0)+ne.zoomDelta),ne.bearingDelta&&(N.bearingDelta=(N.bearingDelta||0)+ne.bearingDelta),ne.pitchDelta&&(N.pitchDelta=(N.pitchDelta||0)+ne.pitchDelta),ne.around!==void 0&&(N.around=ne.around),ne.pinchAround!==void 0&&(N.pinchAround=ne.pinchAround),ne.noInertia&&(N.noInertia=ne.noInertia),a.extend(W,ce),a.extend(G,xe)}this._updateMapTransform(N,W,G),this._changes=[]},si.prototype._updateMapTransform=function(N,W,G){var L=this._map,H=L.transform;if(!Ms(N))return this._fireEvents(W,G,!0);var $=N.panDelta,ne=N.zoomDelta,ce=N.bearingDelta,xe=N.pitchDelta,Le=N.around,Re=N.pinchAround;Re!==void 0&&(Le=Re),L._stop(!0),Le=Le||L.transform.centerPoint;var Ue=H.pointLocation($?Le.sub($):Le);ce&&(H.bearing+=ce),xe&&(H.pitch+=xe),ne&&(H.zoom+=ne),H.setLocationAtPoint(Ue,Le),this._map._update(),N.noInertia||this._inertia.record(N),this._fireEvents(W,G,!0)},si.prototype._fireEvents=function(N,W,G){var L=this,H=rs(this._eventsInProgress),$=rs(N),ne={};for(var ce in N){var xe=N[ce].originalEvent;this._eventsInProgress[ce]||(ne[ce+"start"]=xe),this._eventsInProgress[ce]=N[ce]}for(var Le in!H&&$&&this._fireEvent("movestart",$.originalEvent),ne)this._fireEvent(Le,ne[Le]);for(var Re in $&&this._fireEvent("move",$.originalEvent),N){var Ue=N[Re].originalEvent;this._fireEvent(Re,Ue)}var He,tt={};for(var ct in this._eventsInProgress){var dt=this._eventsInProgress[ct],wt=dt.handlerName,Et=dt.originalEvent;this._handlersById[wt].isActive()||(delete this._eventsInProgress[ct],He=W[wt]||Et,tt[ct+"end"]=He)}for(var kt in tt)this._fireEvent(kt,tt[kt]);var Bt=rs(this._eventsInProgress);if(G&&(H||$)&&!Bt){this._updatingCamera=!0;var It=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Kt=function(qt){return qt!==0&&-L._bearingSnap<qt&&qt<L._bearingSnap};It?(Kt(It.bearing||this._map.getBearing())&&(It.bearing=0),this._map.easeTo(It,{originalEvent:He})):(this._map.fire(new a.Event("moveend",{originalEvent:He})),Kt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},si.prototype._fireEvent=function(N,W){this._map.fire(new a.Event(N,W?{originalEvent:W}:{}))},si.prototype._requestFrame=function(){var N=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(W){delete N._frameId,N.handleEvent(new El("renderFrame",{timeStamp:W})),N._applyChanges()})},si.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var _a=function(N){function W(G,L){N.call(this),this._moving=!1,this._zooming=!1,this.transform=G,this._bearingSnap=L.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(G,L){return this.jumpTo({center:G},L)},W.prototype.panBy=function(G,L,H){return G=a.Point.convert(G).mult(-1),this.panTo(this.transform.center,a.extend({offset:G},L),H)},W.prototype.panTo=function(G,L,H){return this.easeTo(a.extend({center:G},L),H)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(G,L){return this.jumpTo({zoom:G},L),this},W.prototype.zoomTo=function(G,L,H){return this.easeTo(a.extend({zoom:G},L),H)},W.prototype.zoomIn=function(G,L){return this.zoomTo(this.getZoom()+1,G,L),this},W.prototype.zoomOut=function(G,L){return this.zoomTo(this.getZoom()-1,G,L),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(G,L){return this.jumpTo({bearing:G},L),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(G,L){return this.jumpTo({padding:G},L),this},W.prototype.rotateTo=function(G,L,H){return this.easeTo(a.extend({bearing:G},L),H)},W.prototype.resetNorth=function(G,L){return this.rotateTo(0,a.extend({duration:1e3},G),L),this},W.prototype.resetNorthPitch=function(G,L){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},G),L),this},W.prototype.snapToNorth=function(G,L){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(G,L):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(G,L){return this.jumpTo({pitch:G},L),this},W.prototype.cameraForBounds=function(G,L){G=a.LngLatBounds.convert(G);var H=L&&L.bearing||0;return this._cameraForBoxAndBearing(G.getNorthWest(),G.getSouthEast(),H,L)},W.prototype._cameraForBoxAndBearing=function(G,L,H,$){var ne={top:0,bottom:0,right:0,left:0};if(typeof($=a.extend({padding:ne,offset:[0,0],maxZoom:this.transform.maxZoom},$)).padding=="number"){var ce=$.padding;$.padding={top:ce,bottom:ce,right:ce,left:ce}}$.padding=a.extend(ne,$.padding);var xe=this.transform,Le=xe.padding,Re=xe.project(a.LngLat.convert(G)),Ue=xe.project(a.LngLat.convert(L)),He=Re.rotate(-H*Math.PI/180),tt=Ue.rotate(-H*Math.PI/180),ct=new a.Point(Math.max(He.x,tt.x),Math.max(He.y,tt.y)),dt=new a.Point(Math.min(He.x,tt.x),Math.min(He.y,tt.y)),wt=ct.sub(dt),Et=(xe.width-(Le.left+Le.right+$.padding.left+$.padding.right))/wt.x,kt=(xe.height-(Le.top+Le.bottom+$.padding.top+$.padding.bottom))/wt.y;if(!(kt<0||Et<0)){var Bt=Math.min(xe.scaleZoom(xe.scale*Math.min(Et,kt)),$.maxZoom),It=typeof $.offset.x=="number"?new a.Point($.offset.x,$.offset.y):a.Point.convert($.offset),Kt=($.padding.left-$.padding.right)/2,qt=($.padding.top-$.padding.bottom)/2,Vt=new a.Point(Kt,qt).rotate(H*Math.PI/180),pn=It.add(Vt).mult(xe.scale/xe.zoomScale(Bt));return{center:xe.unproject(Re.add(Ue).div(2).sub(pn)),zoom:Bt,bearing:H}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},W.prototype.fitBounds=function(G,L,H){return this._fitInternal(this.cameraForBounds(G,L),L,H)},W.prototype.fitScreenCoordinates=function(G,L,H,$,ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(G)),this.transform.pointLocation(a.Point.convert(L)),H,$),$,ne)},W.prototype._fitInternal=function(G,L,H){return G?(delete(L=a.extend(G,L)).padding,L.linear?this.easeTo(L,H):this.flyTo(L,H)):this},W.prototype.jumpTo=function(G,L){this.stop();var H=this.transform,$=!1,ne=!1,ce=!1;return"zoom"in G&&H.zoom!==+G.zoom&&($=!0,H.zoom=+G.zoom),G.center!==void 0&&(H.center=a.LngLat.convert(G.center)),"bearing"in G&&H.bearing!==+G.bearing&&(ne=!0,H.bearing=+G.bearing),"pitch"in G&&H.pitch!==+G.pitch&&(ce=!0,H.pitch=+G.pitch),G.padding==null||H.isPaddingEqual(G.padding)||(H.padding=G.padding),this.fire(new a.Event("movestart",L)).fire(new a.Event("move",L)),$&&this.fire(new a.Event("zoomstart",L)).fire(new a.Event("zoom",L)).fire(new a.Event("zoomend",L)),ne&&this.fire(new a.Event("rotatestart",L)).fire(new a.Event("rotate",L)).fire(new a.Event("rotateend",L)),ce&&this.fire(new a.Event("pitchstart",L)).fire(new a.Event("pitch",L)).fire(new a.Event("pitchend",L)),this.fire(new a.Event("moveend",L))},W.prototype.easeTo=function(G,L){var H=this;this._stop(!1,G.easeId),((G=a.extend({offset:[0,0],duration:500,easing:a.ease},G)).animate===!1||!G.essential&&a.browser.prefersReducedMotion)&&(G.duration=0);var $=this.transform,ne=this.getZoom(),ce=this.getBearing(),xe=this.getPitch(),Le=this.getPadding(),Re="zoom"in G?+G.zoom:ne,Ue="bearing"in G?this._normalizeBearing(G.bearing,ce):ce,He="pitch"in G?+G.pitch:xe,tt="padding"in G?G.padding:$.padding,ct=a.Point.convert(G.offset),dt=$.centerPoint.add(ct),wt=$.pointLocation(dt),Et=a.LngLat.convert(G.center||wt);this._normalizeCenter(Et);var kt,Bt,It=$.project(wt),Kt=$.project(Et).sub(It),qt=$.zoomScale(Re-ne);G.around&&(kt=a.LngLat.convert(G.around),Bt=$.locationPoint(kt));var Vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Re!==ne,this._rotating=this._rotating||ce!==Ue,this._pitching=this._pitching||He!==xe,this._padding=!$.isPaddingEqual(tt),this._easeId=G.easeId,this._prepareEase(L,G.noMoveStart,Vt),this._ease(function(pn){if(H._zooming&&($.zoom=a.number(ne,Re,pn)),H._rotating&&($.bearing=a.number(ce,Ue,pn)),H._pitching&&($.pitch=a.number(xe,He,pn)),H._padding&&($.interpolatePadding(Le,tt,pn),dt=$.centerPoint.add(ct)),kt)$.setLocationAtPoint(kt,Bt);else{var yn=$.zoomScale($.zoom-ne),Sn=Re>ne?Math.min(2,qt):Math.max(.5,qt),On=Math.pow(Sn,1-pn),Hn=$.unproject(It.add(Kt.mult(pn*On)).mult(yn));$.setLocationAtPoint($.renderWorldCopies?Hn.wrap():Hn,dt)}H._fireMoveEvents(L)},function(pn){H._afterEase(L,pn)},G),this},W.prototype._prepareEase=function(G,L,H){H===void 0&&(H={}),this._moving=!0,L||H.moving||this.fire(new a.Event("movestart",G)),this._zooming&&!H.zooming&&this.fire(new a.Event("zoomstart",G)),this._rotating&&!H.rotating&&this.fire(new a.Event("rotatestart",G)),this._pitching&&!H.pitching&&this.fire(new a.Event("pitchstart",G))},W.prototype._fireMoveEvents=function(G){this.fire(new a.Event("move",G)),this._zooming&&this.fire(new a.Event("zoom",G)),this._rotating&&this.fire(new a.Event("rotate",G)),this._pitching&&this.fire(new a.Event("pitch",G))},W.prototype._afterEase=function(G,L){if(!this._easeId||!L||this._easeId!==L){delete this._easeId;var H=this._zooming,$=this._rotating,ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,H&&this.fire(new a.Event("zoomend",G)),$&&this.fire(new a.Event("rotateend",G)),ne&&this.fire(new a.Event("pitchend",G)),this.fire(new a.Event("moveend",G))}},W.prototype.flyTo=function(G,L){var H=this;if(!G.essential&&a.browser.prefersReducedMotion){var $=a.pick(G,["center","zoom","bearing","pitch","around"]);return this.jumpTo($,L)}this.stop(),G=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},G);var ne=this.transform,ce=this.getZoom(),xe=this.getBearing(),Le=this.getPitch(),Re=this.getPadding(),Ue="zoom"in G?a.clamp(+G.zoom,ne.minZoom,ne.maxZoom):ce,He="bearing"in G?this._normalizeBearing(G.bearing,xe):xe,tt="pitch"in G?+G.pitch:Le,ct="padding"in G?G.padding:ne.padding,dt=ne.zoomScale(Ue-ce),wt=a.Point.convert(G.offset),Et=ne.centerPoint.add(wt),kt=ne.pointLocation(Et),Bt=a.LngLat.convert(G.center||kt);this._normalizeCenter(Bt);var It=ne.project(kt),Kt=ne.project(Bt).sub(It),qt=G.curve,Vt=Math.max(ne.width,ne.height),pn=Vt/dt,yn=Kt.mag();if("minZoom"in G){var Sn=a.clamp(Math.min(G.minZoom,ce,Ue),ne.minZoom,ne.maxZoom),On=Vt/ne.zoomScale(Sn-ce);qt=Math.sqrt(On/yn*2)}var Hn=qt*qt;function sr(pr){var Ir=(pn*pn-Vt*Vt+(pr?-1:1)*Hn*Hn*yn*yn)/(2*(pr?pn:Vt)*Hn*yn);return Math.log(Math.sqrt(Ir*Ir+1)-Ir)}function dr(pr){return(Math.exp(pr)-Math.exp(-pr))/2}function Zn(pr){return(Math.exp(pr)+Math.exp(-pr))/2}var fr=sr(0),Ar=function(pr){return Zn(fr)/Zn(fr+qt*pr)},Or=function(pr){return Vt*((Zn(fr)*(dr(Ir=fr+qt*pr)/Zn(Ir))-dr(fr))/Hn)/yn;var Ir},ir=(sr(1)-fr)/qt;if(Math.abs(yn)<1e-6||!isFinite(ir)){if(Math.abs(Vt-pn)<1e-6)return this.easeTo(G,L);var ur=pn<Vt?-1:1;ir=Math.abs(Math.log(pn/Vt))/qt,Or=function(){return 0},Ar=function(pr){return Math.exp(ur*qt*pr)}}if("duration"in G)G.duration=+G.duration;else{var Cr="screenSpeed"in G?+G.screenSpeed/qt:+G.speed;G.duration=1e3*ir/Cr}return G.maxDuration&&G.duration>G.maxDuration&&(G.duration=0),this._zooming=!0,this._rotating=xe!==He,this._pitching=tt!==Le,this._padding=!ne.isPaddingEqual(ct),this._prepareEase(L,!1),this._ease(function(pr){var Ir=pr*ir,Fr=1/Ar(Ir);ne.zoom=pr===1?Ue:ce+ne.scaleZoom(Fr),H._rotating&&(ne.bearing=a.number(xe,He,pr)),H._pitching&&(ne.pitch=a.number(Le,tt,pr)),H._padding&&(ne.interpolatePadding(Re,ct,pr),Et=ne.centerPoint.add(wt));var Zr=pr===1?Bt:ne.unproject(It.add(Kt.mult(Or(Ir))).mult(Fr));ne.setLocationAtPoint(ne.renderWorldCopies?Zr.wrap():Zr,Et),H._fireMoveEvents(L)},function(){return H._afterEase(L)},G),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(G,L){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var H=this._onEaseEnd;delete this._onEaseEnd,H.call(this,L)}if(!G){var $=this.handlers;$&&$.stop(!1)}return this},W.prototype._ease=function(G,L,H){H.animate===!1||H.duration===0?(G(1),L()):(this._easeStart=a.browser.now(),this._easeOptions=H,this._onEaseFrame=G,this._onEaseEnd=L,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var G=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(G)),G<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(G,L){G=a.wrap(G,-180,180);var H=Math.abs(G-L);return Math.abs(G-360-L)<H&&(G-=360),Math.abs(G+360-L)<H&&(G+=360),G},W.prototype._normalizeCenter=function(G){var L=this.transform;if(L.renderWorldCopies&&!L.lngRange){var H=G.lng-L.center.lng;G.lng+=H>180?-360:H<-180?360:0}},W}(a.Evented),ja=function(N){N===void 0&&(N={}),this.options=N,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ja.prototype.getDefaultPosition=function(){return"bottom-right"},ja.prototype.onAdd=function(N){var W=this.options&&this.options.compact;return this._map=N,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),W&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),W===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ja.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ja.prototype._setElementTitle=function(N,W){var G=this._map._getUIString("AttributionControl."+W);N.title=G,N.setAttribute("aria-label",G)},ja.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ja.prototype._updateEditLink=function(){var N=this._editLink;N||(N=this._editLink=this._container.querySelector(".mapbox-improve-map"));var W=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(N){var G=W.reduce(function(L,H,$){return H.value&&(L+=H.key+"="+H.value+($<W.length-1?"&":"")),L},"?");N.href=a.config.FEEDBACK_URL+"/"+G+(this._map._hash?this._map._hash.getHashString(!0):""),N.rel="noopener nofollow",this._setElementTitle(N,"MapFeedback")}},ja.prototype._updateData=function(N){!N||N.sourceDataType!=="metadata"&&N.sourceDataType!=="visibility"&&N.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},ja.prototype._updateAttributions=function(){if(this._map.style){var N=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?N=N.concat(this.options.customAttribution.map(function(ce){return typeof ce!="string"?"":ce})):typeof this.options.customAttribution=="string"&&N.push(this.options.customAttribution)),this._map.style.stylesheet){var W=this._map.style.stylesheet;this.styleOwner=W.owner,this.styleId=W.id}var G=this._map.style.sourceCaches;for(var L in G){var H=G[L];if(H.used){var $=H.getSource();$.attribution&&N.indexOf($.attribution)<0&&N.push($.attribution)}}N.sort(function(ce,xe){return ce.length-xe.length});var ne=(N=N.filter(function(ce,xe){for(var Le=xe+1;Le<N.length;Le++)if(N[Le].indexOf(ce)>=0)return!1;return!0})).join(" | ");ne!==this._attribHTML&&(this._attribHTML=ne,N.length?(this._innerContainer.innerHTML=ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ja.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Uo=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};Uo.prototype.onAdd=function(N){this._map=N,this._container=b.create("div","mapboxgl-ctrl");var W=b.create("a","mapboxgl-ctrl-logo");return W.target="_blank",W.rel="noopener nofollow",W.href="https://www.mapbox.com/",W.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),W.setAttribute("rel","noopener nofollow"),this._container.appendChild(W),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Uo.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Uo.prototype.getDefaultPosition=function(){return"bottom-left"},Uo.prototype._updateLogo=function(N){N&&N.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Uo.prototype._logoRequired=function(){if(this._map.style){var N=this._map.style.sourceCaches;for(var W in N)if(N[W].getSource().mapbox_logo)return!0;return!1}},Uo.prototype._updateCompact=function(){var N=this._container.children;if(N.length){var W=N[0];this._map.getCanvasContainer().offsetWidth<250?W.classList.add("mapboxgl-compact"):W.classList.remove("mapboxgl-compact")}};var Ua=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ua.prototype.add=function(N){var W=++this._id;return this._queue.push({callback:N,id:W,cancelled:!1}),W},Ua.prototype.remove=function(N){for(var W=this._currentlyRunning,G=0,L=W?this._queue.concat(W):this._queue;G<L.length;G+=1){var H=L[G];if(H.id===N)return void(H.cancelled=!0)}},Ua.prototype.run=function(N){N===void 0&&(N=0);var W=this._currentlyRunning=this._queue;this._queue=[];for(var G=0,L=W;G<L.length;G+=1){var H=L[G];if(!H.cancelled&&(H.callback(N),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ua.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var rl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},il=a.window.HTMLImageElement,Va=a.window.HTMLElement,ai=a.window.ImageBitmap,Vo=60,Ws={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Vo,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Co=function(N){function W(L){var H=this;if((L=a.extend({},Ws,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>Vo)throw new Error("maxPitch must be less than or equal to 60");var $=new ci(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies);if(N.call(this,$,L),this._interactive=L.interactive,this._maxTileCacheSize=L.maxTileCacheSize,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new Ua,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},rl,L.locale),this._clickTolerance=L.clickTolerance,this._requestManager=new a.RequestManager(L.transformRequest,L.accessToken),typeof L.container=="string"){if(this._container=a.window.document.getElementById(L.container),!this._container)throw new Error("Container '"+L.container+"' not found.")}else{if(!(L.container instanceof Va))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return H._update(!1)}),this.on("moveend",function(){return H._update(!1)}),this.on("zoom",function(){return H._update(!0)}),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new si(this,L);var ne=typeof L.hash=="string"&&L.hash||void 0;this._hash=L.hash&&new to(ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,a.extend({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new ja({customAttribution:L.customAttribution})),this.addControl(new Uo,L.logoPosition),this.on("style.load",function(){H.transform.unmodified&&H.jumpTo(H.style.stylesheet)}),this.on("data",function(ce){H._update(ce.dataType==="style"),H.fire(new a.Event(ce.dataType+"data",ce))}),this.on("dataloading",function(ce){H.fire(new a.Event(ce.dataType+"dataloading",ce))})}N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W;var G={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(L,H){if(H===void 0&&(H=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var $=L.onAdd(this);this._controls.push(L);var ne=this._controlPositions[H];return H.indexOf("bottom")!==-1?ne.insertBefore($,ne.firstChild):ne.appendChild($),this},W.prototype.removeControl=function(L){if(!L||!L.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var H=this._controls.indexOf(L);return H>-1&&this._controls.splice(H,1),L.onRemove(this),this},W.prototype.hasControl=function(L){return this._controls.indexOf(L)>-1},W.prototype.resize=function(L){var H=this._containerDimensions(),$=H[0],ne=H[1];this._resizeCanvas($,ne),this.transform.resize($,ne),this.painter.resize($,ne);var ce=!this._moving;return ce&&(this.stop(),this.fire(new a.Event("movestart",L)).fire(new a.Event("move",L))),this.fire(new a.Event("resize",L)),ce&&this.fire(new a.Event("moveend",L)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(L){return this.transform.setMaxBounds(a.LngLatBounds.convert(L)),this._update()},W.prototype.setMinZoom=function(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(L){if((L=L??Vo)>Vo)throw new Error("maxPitch must be less than or equal to 60");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(L){return this.transform.renderWorldCopies=L,this._update()},W.prototype.project=function(L){return this.transform.locationPoint(a.LngLat.convert(L))},W.prototype.unproject=function(L){return this.transform.pointLocation(a.Point.convert(L))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(L,H,$){var ne,ce=this;if(L==="mouseenter"||L==="mouseover"){var xe=!1;return{layer:H,listener:$,delegates:{mousemove:function(Re){var Ue=ce.getLayer(H)?ce.queryRenderedFeatures(Re.point,{layers:[H]}):[];Ue.length?xe||(xe=!0,$.call(ce,new Pa(L,ce,Re.originalEvent,{features:Ue}))):xe=!1},mouseout:function(){xe=!1}}}}if(L==="mouseleave"||L==="mouseout"){var Le=!1;return{layer:H,listener:$,delegates:{mousemove:function(Re){(ce.getLayer(H)?ce.queryRenderedFeatures(Re.point,{layers:[H]}):[]).length?Le=!0:Le&&(Le=!1,$.call(ce,new Pa(L,ce,Re.originalEvent)))},mouseout:function(Re){Le&&(Le=!1,$.call(ce,new Pa(L,ce,Re.originalEvent)))}}}}return{layer:H,listener:$,delegates:(ne={},ne[L]=function(Re){var Ue=ce.getLayer(H)?ce.queryRenderedFeatures(Re.point,{layers:[H]}):[];Ue.length&&(Re.features=Ue,$.call(ce,Re),delete Re.features)},ne)}},W.prototype.on=function(L,H,$){if($===void 0)return N.prototype.on.call(this,L,H);var ne=this._createDelegatedListener(L,H,$);for(var ce in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(ne),ne.delegates)this.on(ce,ne.delegates[ce]);return this},W.prototype.once=function(L,H,$){if($===void 0)return N.prototype.once.call(this,L,H);var ne=this._createDelegatedListener(L,H,$);for(var ce in ne.delegates)this.once(ce,ne.delegates[ce]);return this},W.prototype.off=function(L,H,$){var ne=this;return $===void 0?N.prototype.off.call(this,L,H):(this._delegatedListeners&&this._delegatedListeners[L]&&function(ce){for(var xe=ce[L],Le=0;Le<xe.length;Le++){var Re=xe[Le];if(Re.layer===H&&Re.listener===$){for(var Ue in Re.delegates)ne.off(Ue,Re.delegates[Ue]);return xe.splice(Le,1),ne}}}(this._delegatedListeners),this)},W.prototype.queryRenderedFeatures=function(L,H){if(!this.style)return[];var $;if(H!==void 0||L===void 0||L instanceof a.Point||Array.isArray(L)||(H=L,L=void 0),H=H||{},(L=L||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof L[0]=="number")$=[a.Point.convert(L)];else{var ne=a.Point.convert(L[0]),ce=a.Point.convert(L[1]);$=[ne,new a.Point(ce.x,ne.y),ce,new a.Point(ne.x,ce.y),ne]}return this.style.queryRenderedFeatures($,H,this.transform)},W.prototype.querySourceFeatures=function(L,H){return this.style.querySourceFeatures(L,H)},W.prototype.setStyle=function(L,H){return(H=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},H)).diff!==!1&&H.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,H),this):(this._localIdeographFontFamily=H.localIdeographFontFamily,this._updateStyle(L,H))},W.prototype._getUIString=function(L){var H=this._locale[L];if(H==null)throw new Error("Missing UI string '"+L+"'");return H},W.prototype._updateStyle=function(L,H){return this.style&&(this.style.setEventedParent(null),this.style._remove()),L?(this.style=new or(this,H||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L):this.style.loadJSON(L),this):(delete this.style,this)},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new or(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(L,H){var $=this;if(typeof L=="string"){var ne=this._requestManager.normalizeStyleURL(L),ce=this._requestManager.transformRequest(ne,a.ResourceType.Style);a.getJSON(ce,function(xe,Le){xe?$.fire(new a.ErrorEvent(xe)):Le&&$._updateDiff(Le,H)})}else typeof L=="object"&&this._updateDiff(L,H)},W.prototype._updateDiff=function(L,H){try{this.style.setState(L)&&this._update(!0)}catch($){a.warnOnce("Unable to perform style diff: "+($.message||$.error||$)+".  Rebuilding the style from scratch."),this._updateStyle(L,H)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(L,H){return this._lazyInitEmptyStyle(),this.style.addSource(L,H),this._update(!0)},W.prototype.isSourceLoaded=function(L){var H=this.style&&this.style.sourceCaches[L];if(H!==void 0)return H.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+L+"'")))},W.prototype.areTilesLoaded=function(){var L=this.style&&this.style.sourceCaches;for(var H in L){var $=L[H]._tiles;for(var ne in $){var ce=$[ne];if(ce.state!=="loaded"&&ce.state!=="errored")return!1}}return!0},W.prototype.addSourceType=function(L,H,$){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,H,$)},W.prototype.removeSource=function(L){return this.style.removeSource(L),this._update(!0)},W.prototype.getSource=function(L){return this.style.getSource(L)},W.prototype.addImage=function(L,H,$){$===void 0&&($={});var ne=$.pixelRatio;ne===void 0&&(ne=1);var ce=$.sdf;ce===void 0&&(ce=!1);var xe=$.stretchX,Le=$.stretchY,Re=$.content;if(this._lazyInitEmptyStyle(),H instanceof il||ai&&H instanceof ai){var Ue=a.browser.getImageData(H),He=Ue.width,tt=Ue.height,ct=Ue.data;this.style.addImage(L,{data:new a.RGBAImage({width:He,height:tt},ct),pixelRatio:ne,stretchX:xe,stretchY:Le,content:Re,sdf:ce,version:0})}else{if(H.width===void 0||H.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var dt=H.width,wt=H.height,Et=H.data,kt=H;this.style.addImage(L,{data:new a.RGBAImage({width:dt,height:wt},new Uint8Array(Et)),pixelRatio:ne,stretchX:xe,stretchY:Le,content:Re,sdf:ce,version:0,userImage:kt}),kt.onAdd&&kt.onAdd(this,L)}},W.prototype.updateImage=function(L,H){var $=this.style.getImage(L);if(!$)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ne=H instanceof il||ai&&H instanceof ai?a.browser.getImageData(H):H,ce=ne.width,xe=ne.height,Le=ne.data;if(ce===void 0||xe===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ce!==$.data.width||xe!==$.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var Re=!(H instanceof il||ai&&H instanceof ai);$.data.replace(Le,Re),this.style.updateImage(L,$)},W.prototype.hasImage=function(L){return L?!!this.style.getImage(L):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(L){this.style.removeImage(L)},W.prototype.loadImage=function(L,H){a.getImage(this._requestManager.transformRequest(L,a.ResourceType.Image),H)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(L,H){return this._lazyInitEmptyStyle(),this.style.addLayer(L,H),this._update(!0)},W.prototype.moveLayer=function(L,H){return this.style.moveLayer(L,H),this._update(!0)},W.prototype.removeLayer=function(L){return this.style.removeLayer(L),this._update(!0)},W.prototype.getLayer=function(L){return this.style.getLayer(L)},W.prototype.setLayerZoomRange=function(L,H,$){return this.style.setLayerZoomRange(L,H,$),this._update(!0)},W.prototype.setFilter=function(L,H,$){return $===void 0&&($={}),this.style.setFilter(L,H,$),this._update(!0)},W.prototype.getFilter=function(L){return this.style.getFilter(L)},W.prototype.setPaintProperty=function(L,H,$,ne){return ne===void 0&&(ne={}),this.style.setPaintProperty(L,H,$,ne),this._update(!0)},W.prototype.getPaintProperty=function(L,H){return this.style.getPaintProperty(L,H)},W.prototype.setLayoutProperty=function(L,H,$,ne){return ne===void 0&&(ne={}),this.style.setLayoutProperty(L,H,$,ne),this._update(!0)},W.prototype.getLayoutProperty=function(L,H){return this.style.getLayoutProperty(L,H)},W.prototype.setLight=function(L,H){return H===void 0&&(H={}),this._lazyInitEmptyStyle(),this.style.setLight(L,H),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(L,H){return this.style.setFeatureState(L,H),this._update()},W.prototype.removeFeatureState=function(L,H){return this.style.removeFeatureState(L,H),this._update()},W.prototype.getFeatureState=function(L){return this.style.getFeatureState(L)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var L=0,H=0;return this._container&&(L=this._container.clientWidth||400,H=this._container.clientHeight||300),[L,H]},W.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var L=this._container;L.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",L)).style.visibility="hidden",this._detectMissingCSS();var H=this._canvasContainer=b.create("div","mapboxgl-canvas-container",L);this._interactive&&H.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",H),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var $=this._containerDimensions();this._resizeCanvas($[0],$[1]);var ne=this._controlContainer=b.create("div","mapboxgl-control-container",L),ce=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(xe){ce[xe]=b.create("div","mapboxgl-ctrl-"+xe,ne)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},W.prototype._resizeCanvas=function(L,H){var $=a.browser.devicePixelRatio||1;this._canvas.width=$*L,this._canvas.height=$*H,this._canvas.style.width=L+"px",this._canvas.style.height=H+"px"},W.prototype._setupPainter=function(){var L=a.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),H=this._canvas.getContext("webgl",L)||this._canvas.getContext("experimental-webgl",L);H?(this.painter=new vi(H,this.transform),a.webpSupported.testSupport(H)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},W.prototype._contextLost=function(L){L.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:L}))},W.prototype._contextRestored=function(L){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:L}))},W.prototype._onMapScroll=function(L){if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(L){return this.style?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(L){return this._update(),this._renderTaskQueue.add(L)},W.prototype._cancelRenderFrame=function(L){this._renderTaskQueue.remove(L)},W.prototype._render=function(L){var H,$=this,ne=0,ce=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(H=ce.createQueryEXT(),ce.beginQueryEXT(ce.TIME_ELAPSED_EXT,H),ne=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),!this._removed){var xe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Le=this.transform.zoom,Re=a.browser.now();this.style.zoomHistory.update(Le,Re);var Ue=new a.EvaluationParameters(Le,{now:Re,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),He=Ue.crossFadingFactor();He===1&&He===this._crossFadingFactor||(xe=!0,this._crossFadingFactor=He),this.style.update(Ue)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||xe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var tt=a.browser.now()-ne;ce.endQueryEXT(ce.TIME_ELAPSED_EXT,H),setTimeout(function(){var wt=ce.getQueryObjectEXT(H,ce.QUERY_RESULT_EXT)/1e6;ce.deleteQueryEXT(H),$.fire(new a.Event("gpu-timing-frame",{cpuTime:tt,gpuTime:wt}))},50)}if(this.listens("gpu-timing-layer")){var ct=this.painter.collectGpuTimers();setTimeout(function(){var wt=$.painter.queryGpuTimers(ct);$.fire(new a.Event("gpu-timing-layer",{layerTimes:wt}))},50)}var dt=this._sourcesDirty||this._styleDirty||this._placementDirty;return dt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||dt||(this._fullyLoaded=!0),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var L=0,H=this._controls;L<H.length;L+=1)H[L].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var $=this.painter.context.gl.getExtension("WEBGL_lose_context");$&&$.loseContext&&$.loseContext(),al(this._canvasContainer),al(this._controlContainer),al(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},W.prototype.triggerRepaint=function(){var L=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(H){L._frame=null,L._render(H)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(L){this._trackResize&&this.resize({originalEvent:L})._update()},G.showTileBoundaries.get=function(){return!!this._showTileBoundaries},G.showTileBoundaries.set=function(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())},G.showPadding.get=function(){return!!this._showPadding},G.showPadding.set=function(L){this._showPadding!==L&&(this._showPadding=L,this._update())},G.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},G.showCollisionBoxes.set=function(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())},G.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},G.showOverdrawInspector.set=function(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())},G.repaint.get=function(){return!!this._repaint},G.repaint.set=function(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())},G.vertices.get=function(){return!!this._vertices},G.vertices.set=function(L){this._vertices=L,this._update()},W.prototype._setCacheLimits=function(L,H){a.setCacheLimits(L,H)},G.version.get=function(){return a.version},Object.defineProperties(W.prototype,G),W}(_a);function al(N){N.parentNode&&N.parentNode.removeChild(N)}var ol={showCompass:!0,showZoom:!0,visualizePitch:!1},Eo=function(N){var W=this;this.options=a.extend({},ol,N),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(G){return G.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(G){return W._map.zoomIn({},{originalEvent:G})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(G){return W._map.zoomOut({},{originalEvent:G})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(G){W.options.visualizePitch?W._map.resetNorthPitch({},{originalEvent:G}):W._map.resetNorth({},{originalEvent:G})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Eo.prototype._updateZoomButtons=function(){var N=this._map.getZoom(),W=N===this._map.getMaxZoom(),G=N===this._map.getMinZoom();this._zoomInButton.disabled=W,this._zoomOutButton.disabled=G,this._zoomInButton.setAttribute("aria-disabled",W.toString()),this._zoomOutButton.setAttribute("aria-disabled",G.toString())},Eo.prototype._rotateCompassArrow=function(){var N=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=N},Eo.prototype.onAdd=function(N){return this._map=N,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ci(this._map,this._compass,this.options.visualizePitch)),this._container},Eo.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Eo.prototype._createButton=function(N,W){var G=b.create("button",N,this._container);return G.type="button",G.addEventListener("click",W),G},Eo.prototype._setButtonTitle=function(N,W){var G=this._map._getUIString("NavigationControl."+W);N.title=G,N.setAttribute("aria-label",G)};var Ci=function(N,W,G){G===void 0&&(G=!1),this._clickTolerance=10,this.element=W,this.mouseRotate=new ts({clickTolerance:N.dragRotate._mouseRotate._clickTolerance}),this.map=N,G&&(this.mousePitch=new fo({clickTolerance:N.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(W,"mousedown",this.mousedown),b.addEventListener(W,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(W,"touchmove",this.touchmove),b.addEventListener(W,"touchend",this.touchend),b.addEventListener(W,"touchcancel",this.reset)};function Ys(N,W,G){if(N=new a.LngLat(N.lng,N.lat),W){var L=new a.LngLat(N.lng-360,N.lat),H=new a.LngLat(N.lng+360,N.lat),$=G.locationPoint(N).distSqr(W);G.locationPoint(L).distSqr(W)<$?N=L:G.locationPoint(H).distSqr(W)<$&&(N=H)}for(;Math.abs(N.lng-G.center.lng)>180;){var ne=G.locationPoint(N);if(ne.x>=0&&ne.y>=0&&ne.x<=G.width&&ne.y<=G.height)break;N.lng>G.center.lng?N.lng-=360:N.lng+=360}return N}Ci.prototype.down=function(N,W){this.mouseRotate.mousedown(N,W),this.mousePitch&&this.mousePitch.mousedown(N,W),b.disableDrag()},Ci.prototype.move=function(N,W){var G=this.map,L=this.mouseRotate.mousemoveWindow(N,W);if(L&&L.bearingDelta&&G.setBearing(G.getBearing()+L.bearingDelta),this.mousePitch){var H=this.mousePitch.mousemoveWindow(N,W);H&&H.pitchDelta&&G.setPitch(G.getPitch()+H.pitchDelta)}},Ci.prototype.off=function(){var N=this.element;b.removeEventListener(N,"mousedown",this.mousedown),b.removeEventListener(N,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(N,"touchmove",this.touchmove),b.removeEventListener(N,"touchend",this.touchend),b.removeEventListener(N,"touchcancel",this.reset),this.offTemp()},Ci.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(a.window,"mousemove",this.mousemove),b.removeEventListener(a.window,"mouseup",this.mouseup)},Ci.prototype.mousedown=function(N){this.down(a.extend({},N,{ctrlKey:!0,preventDefault:function(){return N.preventDefault()}}),b.mousePos(this.element,N)),b.addEventListener(a.window,"mousemove",this.mousemove),b.addEventListener(a.window,"mouseup",this.mouseup)},Ci.prototype.mousemove=function(N){this.move(N,b.mousePos(this.element,N))},Ci.prototype.mouseup=function(N){this.mouseRotate.mouseupWindow(N),this.mousePitch&&this.mousePitch.mouseupWindow(N),this.offTemp()},Ci.prototype.touchstart=function(N){N.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,N.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return N.preventDefault()}},this._startPos))},Ci.prototype.touchmove=function(N){N.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,N.targetTouches)[0],this.move({preventDefault:function(){return N.preventDefault()}},this._lastPos))},Ci.prototype.touchend=function(N){N.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ci.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Dr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ur(N,W,G){var L=N.classList;for(var H in Dr)L.remove("mapboxgl-"+G+"-anchor-"+H);L.add("mapboxgl-"+G+"-anchor-"+W)}var no,Ho=function(N){function W(G,L){if(N.call(this),(G instanceof a.window.HTMLElement||L)&&(G=a.extend({element:G},L)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=G&&G.anchor||"center",this._color=G&&G.color||"#3FB1CE",this._scale=G&&G.scale||1,this._draggable=G&&G.draggable||!1,this._clickTolerance=G&&G.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=G&&G.rotation||0,this._rotationAlignment=G&&G.rotationAlignment||"auto",this._pitchAlignment=G&&G.pitchAlignment&&G.pitchAlignment!=="auto"?G.pitchAlignment:this._rotationAlignment,G&&G.element)this._element=G.element,this._offset=a.Point.convert(G&&G.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var H=b.createNS("http://www.w3.org/2000/svg","svg");H.setAttributeNS(null,"display","block"),H.setAttributeNS(null,"height","41px"),H.setAttributeNS(null,"width","27px"),H.setAttributeNS(null,"viewBox","0 0 27 41");var $=b.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"stroke","none"),$.setAttributeNS(null,"stroke-width","1"),$.setAttributeNS(null,"fill","none"),$.setAttributeNS(null,"fill-rule","evenodd");var ne=b.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill-rule","nonzero");var ce=b.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ce.setAttributeNS(null,"fill","#000000");for(var xe=0,Le=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];xe<Le.length;xe+=1){var Re=Le[xe],Ue=b.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",Re.rx),Ue.setAttributeNS(null,"ry",Re.ry),ce.appendChild(Ue)}var He=b.createNS("http://www.w3.org/2000/svg","g");He.setAttributeNS(null,"fill",this._color);var tt=b.createNS("http://www.w3.org/2000/svg","path");tt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),He.appendChild(tt);var ct=b.createNS("http://www.w3.org/2000/svg","g");ct.setAttributeNS(null,"opacity","0.25"),ct.setAttributeNS(null,"fill","#000000");var dt=b.createNS("http://www.w3.org/2000/svg","path");dt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ct.appendChild(dt);var wt=b.createNS("http://www.w3.org/2000/svg","g");wt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),wt.setAttributeNS(null,"fill","#FFFFFF");var Et=b.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"transform","translate(8.0, 8.0)");var kt=b.createNS("http://www.w3.org/2000/svg","circle");kt.setAttributeNS(null,"fill","#000000"),kt.setAttributeNS(null,"opacity","0.25"),kt.setAttributeNS(null,"cx","5.5"),kt.setAttributeNS(null,"cy","5.5"),kt.setAttributeNS(null,"r","5.4999962");var Bt=b.createNS("http://www.w3.org/2000/svg","circle");Bt.setAttributeNS(null,"fill","#FFFFFF"),Bt.setAttributeNS(null,"cx","5.5"),Bt.setAttributeNS(null,"cy","5.5"),Bt.setAttributeNS(null,"r","5.4999962"),Et.appendChild(kt),Et.appendChild(Bt),ne.appendChild(ce),ne.appendChild(He),ne.appendChild(ct),ne.appendChild(wt),ne.appendChild(Et),H.appendChild(ne),H.setAttributeNS(null,"height",41*this._scale+"px"),H.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(H),this._offset=a.Point.convert(G&&G.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(It){It.preventDefault()}),this._element.addEventListener("mousedown",function(It){It.preventDefault()}),Ur(this._element,this._anchor,"marker"),this._popup=null}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.addTo=function(G){return this.remove(),this._map=G,G.getCanvasContainer().appendChild(this._element),G.on("move",this._update),G.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(G){return this._lngLat=a.LngLat.convert(G),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(G){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),G){if(!("offset"in G.options)){var L=13.5,H=Math.sqrt(Math.pow(L,2)/2);G.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[H,-1*(24.6+H)],"bottom-right":[-H,-1*(24.6+H)],left:[L,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=G,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(G){var L=G.code,H=G.charCode||G.keyCode;L!=="Space"&&L!=="Enter"&&H!==32&&H!==13||this.togglePopup()},W.prototype._onMapClick=function(G){var L=G.originalEvent.target,H=this._element;this._popup&&(L===H||H.contains(L))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var G=this._popup;return G?(G.isOpen()?G.remove():G.addTo(this._map),this):this},W.prototype._update=function(G){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ys(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(L="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var H="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?H="rotateX(0deg)":this._pitchAlignment==="map"&&(H="rotateX("+this._map.getPitch()+"deg)"),G&&G.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,Dr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+H+" "+L)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(G){return this._offset=a.Point.convert(G),this._update(),this},W.prototype._onMove=function(G){if(!this._isDragging){var L=this._clickTolerance||this._map._clickTolerance;this._isDragging=G.point.dist(this._pointerdownPos)>=L}this._isDragging&&(this._pos=G.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(G){this._element.contains(G.originalEvent.target)&&(G.preventDefault(),this._positionDelta=G.point.sub(this._pos).add(this._offset),this._pointerdownPos=G.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(G){return this._draggable=!!G,this._map&&(G?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(G){return this._rotation=G||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(G){return this._rotationAlignment=G||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(G){return this._pitchAlignment=G&&G!=="auto"?G:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(a.Evented),is={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},$i=0,Go=!1,yi=function(N){function W(G){N.call(this),this.options=a.extend({},is,G),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(G){return this._map=G,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),L=this._setupUI,no!==void 0?L(no):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(H){no=H.state!=="denied",L(no)}):(no=!!a.window.navigator.geolocation,L(no)),this._container;var L},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$i=0,Go=!1},W.prototype._isOutOfMapMaxBounds=function(G){var L=this._map.getMaxBounds(),H=G.coords;return L&&(H.longitude<L.getWest()||H.longitude>L.getEast()||H.latitude<L.getSouth()||H.latitude>L.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},W.prototype._onSuccess=function(G){if(this._map){if(this._isOutOfMapMaxBounds(G))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",G)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=G,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(G),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(G),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",G)),this._finish()}},W.prototype._updateCamera=function(G){var L=new a.LngLat(G.coords.longitude,G.coords.latitude),H=G.coords.accuracy,$=this._map.getBearing(),ne=a.extend({bearing:$},this.options.fitBoundsOptions);this._map.fitBounds(L.toBounds(H),ne,{geolocateSource:!0})},W.prototype._updateMarker=function(G){if(G){var L=new a.LngLat(G.coords.longitude,G.coords.latitude);this._accuracyCircleMarker.setLngLat(L).addTo(this._map),this._userLocationDotMarker.setLngLat(L).addTo(this._map),this._accuracy=G.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var G=this._map._container.clientHeight/2,L=this._map.unproject([0,G]),H=this._map.unproject([1,G]),$=L.distanceTo(H),ne=Math.ceil(2*this._accuracy/$);this._circleElement.style.width=ne+"px",this._circleElement.style.height=ne+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(G){if(this._map){if(this.options.trackUserLocation)if(G.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(G.code===3&&Go)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",G)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(G){var L=this;if(this._container.addEventListener("contextmenu",function(ne){return ne.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",G===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var H=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=H,this._geolocateButton.setAttribute("aria-label",H)}else{var $=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=$,this._geolocateButton.setAttribute("aria-label",$)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ho(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ho({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ne){var ce=ne.originalEvent&&ne.originalEvent.type==="resize";ne.geolocateSource||L._watchState!=="ACTIVE_LOCK"||ce||(L._watchState="BACKGROUND",L._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),L._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),L.fire(new a.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$i--,Go=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var G;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++$i>1?(G={maximumAge:6e5,timeout:0},Go=!0):(G=this.options.positionOptions,Go=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,G)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(a.Evented),Ec={maxWidth:100,unit:"metric"},ro=function(N){this.options=a.extend({},Ec,N),a.bindAll(["_onMove","setUnit"],this)};function _i(N,W,G){var L=G&&G.maxWidth||100,H=N._container.clientHeight/2,$=N.unproject([0,H]),ne=N.unproject([L,H]),ce=$.distanceTo(ne);if(G&&G.unit==="imperial"){var xe=3.2808*ce;xe>5280?Pi(W,L,xe/5280,N._getUIString("ScaleControl.Miles")):Pi(W,L,xe,N._getUIString("ScaleControl.Feet"))}else G&&G.unit==="nautical"?Pi(W,L,ce/1852,N._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?Pi(W,L,ce/1e3,N._getUIString("ScaleControl.Kilometers")):Pi(W,L,ce,N._getUIString("ScaleControl.Meters"))}function Pi(N,W,G,L){var H,$,ne,ce=(H=G,($=Math.pow(10,(""+Math.floor(H)).length-1))*((ne=H/$)>=10?10:ne>=5?5:ne>=3?3:ne>=2?2:ne>=1?1:function(Le){var Re=Math.pow(10,Math.ceil(-Math.log(Le)/Math.LN10));return Math.round(Le*Re)/Re}(ne))),xe=ce/G;N.style.width=W*xe+"px",N.innerHTML=ce+"&nbsp;"+L}ro.prototype.getDefaultPosition=function(){return"bottom-left"},ro.prototype._onMove=function(){_i(this._map,this._container,this.options)},ro.prototype.onAdd=function(N){return this._map=N,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",N.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ro.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ro.prototype.setUnit=function(N){this.options.unit=N,_i(this._map,this._container,this.options)};var Za=function(N){this._fullscreen=!1,N&&N.container&&(N.container instanceof a.window.HTMLElement?this._container=N.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Za.prototype.onAdd=function(N){return this._map=N,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Za.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Za.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Za.prototype._setupUI=function(){var N=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",N).setAttribute("aria-hidden",!0),N.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Za.prototype._updateTitle=function(){var N=this._getTitle();this._fullscreenButton.setAttribute("aria-label",N),this._fullscreenButton.title=N},Za.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Za.prototype._isFullscreen=function(){return this._fullscreen},Za.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Za.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ss={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},pc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ke=function(N){function W(G){N.call(this),this.options=a.extend(Object.create(Ss),G),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return N&&(W.__proto__=N),W.prototype=Object.create(N&&N.prototype),W.prototype.constructor=W,W.prototype.addTo=function(G){return this._map&&this.remove(),this._map=G,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(G){return this._lngLat=a.LngLat.convert(G),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(G){return this.setDOMContent(a.window.document.createTextNode(G))},W.prototype.setHTML=function(G){var L,H=a.window.document.createDocumentFragment(),$=a.window.document.createElement("body");for($.innerHTML=G;L=$.firstChild;)H.appendChild(L);return this.setDOMContent(H)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(G){return this.options.maxWidth=G,this._update(),this},W.prototype.setDOMContent=function(G){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(G),this._createCloseButton(),this._update(),this._focusFirstElement(),this},W.prototype.addClassName=function(G){this._container&&this._container.classList.add(G)},W.prototype.removeClassName=function(G){this._container&&this._container.classList.remove(G)},W.prototype.setOffset=function(G){return this.options.offset=G,this._update(),this},W.prototype.toggleClassName=function(G){if(this._container)return this._container.classList.toggle(G)},W.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(G){this._update(G.point)},W.prototype._onMouseMove=function(G){this._update(G.point)},W.prototype._onDrag=function(G){this._update(G.point)},W.prototype._update=function(G){var L=this,H=this._lngLat||this._trackPointer;if(this._map&&H&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(He){return L._container.classList.add(He)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ys(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||G)){var $=this._pos=this._trackPointer&&G?G:this._map.project(this._lngLat),ne=this.options.anchor,ce=Qe(this.options.offset);if(!ne){var xe,Le=this._container.offsetWidth,Re=this._container.offsetHeight;xe=$.y+ce.bottom.y<Re?["top"]:$.y>this._map.transform.height-Re?["bottom"]:[],$.x<Le/2?xe.push("left"):$.x>this._map.transform.width-Le/2&&xe.push("right"),ne=xe.length===0?"bottom":xe.join("-")}var Ue=$.add(ce[ne]).round();b.setTransform(this._container,Dr[ne]+" translate("+Ue.x+"px,"+Ue.y+"px)"),Ur(this._container,ne,"popup")}},W.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var G=this._container.querySelector(pc);G&&G.focus()}},W.prototype._onClose=function(){this.remove()},W}(a.Evented);function Qe(N){if(N){if(typeof N=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(N,2)));return{center:new a.Point(0,0),top:new a.Point(0,N),"top-left":new a.Point(W,W),"top-right":new a.Point(-W,W),bottom:new a.Point(0,-N),"bottom-left":new a.Point(W,-W),"bottom-right":new a.Point(-W,-W),left:new a.Point(N,0),right:new a.Point(-N,0)}}if(N instanceof a.Point||Array.isArray(N)){var G=a.Point.convert(N);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}return{center:a.Point.convert(N.center||[0,0]),top:a.Point.convert(N.top||[0,0]),"top-left":a.Point.convert(N["top-left"]||[0,0]),"top-right":a.Point.convert(N["top-right"]||[0,0]),bottom:a.Point.convert(N.bottom||[0,0]),"bottom-left":a.Point.convert(N["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(N["bottom-right"]||[0,0]),left:a.Point.convert(N.left||[0,0]),right:a.Point.convert(N.right||[0,0])}}return Qe(new a.Point(0,0))}var st={version:a.version,supported:w,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Co,NavigationControl:Eo,GeolocateControl:yi,AttributionControl:ja,ScaleControl:ro,FullscreenControl:Za,Popup:Ke,Marker:Ho,Style:or,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){vt().acquire(rt)},clearPrewarmedResources:function(){var N=ft;N&&(N.isPreloaded()&&N.numActive()===1?(N.release(rt),ft=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(N){a.config.ACCESS_TOKEN=N},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(N){a.config.API_URL=N},get workerCount(){return We.workerCount},set workerCount(N){We.workerCount=N},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(N){a.config.MAX_PARALLEL_IMAGE_REQUESTS=N},clearStorage:function(N){a.clearTileCache(N)},workerUrl:""};return st}),T}()},3108:function(F,C,e){"use strict";F.exports=e(26099)},26099:function(F,C,e){"use strict";var T=e(64928),k=e(32420),a=e(51160),w=e(76752),b=e(55616),f=e(31264),s=e(47520),t=e(18400),i=e(72512),r=e(76244);function n(o,l){for(var c=l[0],d=l[1],u=1/(l[2]-c),x=1/(l[3]-d),p=new Array(o.length),g=0,m=o.length/2;g<m;g++)p[2*g]=k((o[2*g]-c)*u,0,1),p[2*g+1]=k((o[2*g+1]-d)*x,0,1);return p}F.exports=function(o,l){l||(l={}),o=s(o,"float64"),l=b(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=f(l.maxDepth,255),d=f(l.bounds,w(o,2));d[0]===d[2]&&d[2]++,d[1]===d[3]&&d[3]++;var u,x=n(o,d),p=o.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?u=new(i(l.dtype))(p):l.dtype&&(u=l.dtype,Array.isArray(u)&&(u.length=p));for(var g=0;g<p;++g)u[g]=g;var m=[],y=[],v=[],_=[];(function z(V,O,j,Y,B,U){if(!Y.length)return null;var q=m[B]||(m[B]=[]),te=v[B]||(v[B]=[]),ee=y[B]||(y[B]=[]),Q=q.length;if(++B>c||U>1073741824){for(var J=0;J<Y.length;J++)q.push(Y[J]),te.push(U),ee.push(null,null,null,null);return Q}if(q.push(Y[0]),te.push(U),Y.length<=1)return ee.push(null,null,null,null),Q;for(var K=.5*j,X=V+K,ie=O+K,se=[],ae=[],ue=[],ve=[],ye=1,pe=Y.length;ye<pe;ye++){var de=Y[ye],me=x[2*de],ke=x[2*de+1];me<X?ke<ie?se.push(de):ae.push(de):ke<ie?ue.push(de):ve.push(de)}return U<<=2,ee.push(z(V,O,K,se,B,U),z(V,ie,K,ae,B,U+1),z(X,O,K,ue,B,U+2),z(X,ie,K,ve,B,U+3)),Q})(0,0,1,u,0,1);for(var h=0,S=0;S<m.length;S++){var A=m[S];if(u.set)u.set(A,h);else for(var E=0,P=A.length;E<P;E++)u[E+h]=A[E];var I=h+m[S].length;_[S]=[h,I],h=I}return u.range=function(){for(var z,V=[],O=arguments.length;O--;)V[O]=arguments[O];if(t(V[V.length-1])){var j=V.pop();V.length||j.x==null&&j.l==null&&j.left==null||(V=[j],z={}),z=b(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};V.length||(V=d);var Y,B=a.apply(void 0,V),U=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],q=U[0],te=U[1],ee=U[2],Q=U[3],J=n([q,te,ee,Q],d),K=J[0],X=J[1],ie=J[2],se=J[3],ae=f(z.level,m.length);if(z.d!=null&&(typeof z.d=="number"?Y=[z.d,z.d]:z.d.length&&(Y=z.d),ae=Math.min(Math.max(Math.ceil(-r(Math.abs(Y[0])/(d[2]-d[0]))),Math.ceil(-r(Math.abs(Y[1])/(d[3]-d[1])))),ae)),ae=Math.min(ae,m.length),z.lod)return function(ve,ye,pe,de,me){for(var ke=[],Ce=0;Ce<me;Ce++){var ge=v[Ce],oe=_[Ce][0],re=D(ve,ye,Ce),fe=D(pe,de,Ce),Se=T.ge(ge,re),be=T.gt(ge,fe,Se,ge.length-1);ke[Ce]=[Se+oe,be+oe]}return ke}(K,X,ie,se,ae);var ue=[];return function ve(ye,pe,de,me,ke,Ce){if(ke!==null&&Ce!==null&&!(K>ye+de||X>pe+de||ie<ye||se<pe||me>=ae||ke===Ce)){var ge=m[me];Ce===void 0&&(Ce=ge.length);for(var oe=ke;oe<Ce;oe++){var re=ge[oe],fe=o[2*re],Se=o[2*re+1];fe>=q&&fe<=ee&&Se>=te&&Se<=Q&&ue.push(re)}var be=y[me],we=be[4*ke+0],Me=be[4*ke+1],Pe=be[4*ke+2],De=be[4*ke+3],he=function(Oe,Ee){for(var Be=null,Ve=0;Be===null;)if(Be=Oe[4*Ee+Ve],++Ve>Oe.length)return null;return Be}(be,ke+1),_e=.5*de,Ae=me+1;ve(ye,pe,_e,Ae,we,Me||Pe||De||he),ve(ye,pe+_e,_e,Ae,Me,Pe||De||he),ve(ye+_e,pe,_e,Ae,Pe,De||he),ve(ye+_e,pe+_e,_e,Ae,De,he)}}(0,0,1,0,0,1),ue},u;function D(z,V,O){for(var j=1,Y=.5,B=.5,U=.5,q=0;q<O;q++)j<<=2,j+=z<Y?V<B?0:1:V<B?2:3,U*=.5,Y+=z<Y?-U:U,B+=V<B?-U:U;return j}}},40440:function(F,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var T=e(3256),k=6378137;function a(f){var s=0;if(f&&f.length>0){s+=Math.abs(w(f[0]));for(var t=1;t<f.length;t++)s-=Math.abs(w(f[t]))}return s}function w(f){var s,t,i,r,n,o,l=0,c=f.length;if(c>2){for(o=0;o<c;o++)o===c-2?(i=c-2,r=c-1,n=0):o===c-1?(i=c-1,r=0,n=1):(i=o,r=o+1,n=o+2),s=f[i],t=f[r],l+=(b(f[n][0])-b(s[0]))*Math.sin(b(t[1]));l=l*k*k/2}return l}function b(f){return f*Math.PI/180}C.default=function(f){return T.geomReduce(f,function(s,t){return s+function(i){var r,n=0;switch(i.type){case"Polygon":return a(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)n+=a(i.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(F,C){"use strict";function e(o,l,c){c===void 0&&(c={});var d={type:"Feature"};return(c.id===0||c.id)&&(d.id=c.id),c.bbox&&(d.bbox=c.bbox),d.properties=l||{},d.geometry=o,d}function T(o,l,c){if(c===void 0&&(c={}),!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(o[0])||!n(o[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:o},l,c)}function k(o,l,c){c===void 0&&(c={});for(var d=0,u=o;d<u.length;d++){var x=u[d];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<x[x.length-1].length;p++)if(x[x.length-1][p]!==x[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:o},l,c)}function a(o,l,c){if(c===void 0&&(c={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:o},l,c)}function w(o,l){l===void 0&&(l={});var c={type:"FeatureCollection"};return l.id&&(c.id=l.id),l.bbox&&(c.bbox=l.bbox),c.features=o,c}function b(o,l,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:o},l,c)}function f(o,l,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:o},l,c)}function s(o,l,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:o},l,c)}function t(o,l){l===void 0&&(l="kilometers");var c=C.factors[l];if(!c)throw new Error(l+" units is invalid");return o*c}function i(o,l){l===void 0&&(l="kilometers");var c=C.factors[l];if(!c)throw new Error(l+" units is invalid");return o/c}function r(o){return o%(2*Math.PI)*180/Math.PI}function n(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)}Object.defineProperty(C,"__esModule",{value:!0}),C.earthRadius=63710088e-1,C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1e3,kilometres:C.earthRadius/1e3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1e3*C.earthRadius,millimetres:1e3*C.earthRadius,nauticalmiles:C.earthRadius/1852,radians:1,yards:1.0936*C.earthRadius},C.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/C.earthRadius,yards:1.0936133},C.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},C.feature=e,C.geometry=function(o,l,c){switch(c===void 0&&(c={}),o){case"Point":return T(l).geometry;case"LineString":return a(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return f(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(o+" is invalid")}},C.point=T,C.points=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return T(d,l)}),c)},C.polygon=k,C.polygons=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return k(d,l)}),c)},C.lineString=a,C.lineStrings=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return a(d,l)}),c)},C.featureCollection=w,C.multiLineString=b,C.multiPoint=f,C.multiPolygon=s,C.geometryCollection=function(o,l,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:o},l,c)},C.round=function(o,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,l||0);return Math.round(o*c)/c},C.radiansToLength=t,C.lengthToRadians=i,C.lengthToDegrees=function(o,l){return r(i(o,l))},C.bearingToAzimuth=function(o){var l=o%360;return l<0&&(l+=360),l},C.radiansToDegrees=r,C.degreesToRadians=function(o){return o%360*Math.PI/180},C.convertLength=function(o,l,c){if(l===void 0&&(l="kilometers"),c===void 0&&(c="kilometers"),!(o>=0))throw new Error("length must be a positive number");return t(i(o,l),c)},C.convertArea=function(o,l,c){if(l===void 0&&(l="meters"),c===void 0&&(c="kilometers"),!(o>=0))throw new Error("area must be a positive number");var d=C.areaFactors[l];if(!d)throw new Error("invalid original units");var u=C.areaFactors[c];if(!u)throw new Error("invalid final units");return o/d*u},C.isNumber=n,C.isObject=function(o){return!!o&&o.constructor===Object},C.validateBBox=function(o){if(!o)throw new Error("bbox is required");if(!Array.isArray(o))throw new Error("bbox must be an Array");if(o.length!==4&&o.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");o.forEach(function(l){if(!n(l))throw new Error("bbox must only contain numbers")})},C.validateId=function(o){if(!o)throw new Error("id is required");if(["string","number"].indexOf(typeof o)===-1)throw new Error("id must be a number or a string")}},3256:function(F,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var T=e(46284);function k(i,r,n){if(i!==null)for(var o,l,c,d,u,x,p,g,m=0,y=0,v=i.type,_=v==="FeatureCollection",h=v==="Feature",S=_?i.features.length:1,A=0;A<S;A++){u=(g=!!(p=_?i.features[A].geometry:h?i.geometry:i)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var E=0;E<u;E++){var P=0,I=0;if((d=g?p.geometries[E]:p)!==null){x=d.coordinates;var D=d.type;switch(m=!n||D!=="Polygon"&&D!=="MultiPolygon"?0:1,D){case null:break;case"Point":if(r(x,y,A,P,I)===!1)return!1;y++,P++;break;case"LineString":case"MultiPoint":for(o=0;o<x.length;o++){if(r(x[o],y,A,P,I)===!1)return!1;y++,D==="MultiPoint"&&P++}D==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(o=0;o<x.length;o++){for(l=0;l<x[o].length-m;l++){if(r(x[o][l],y,A,P,I)===!1)return!1;y++}D==="MultiLineString"&&P++,D==="Polygon"&&I++}D==="Polygon"&&P++;break;case"MultiPolygon":for(o=0;o<x.length;o++){for(I=0,l=0;l<x[o].length;l++){for(c=0;c<x[o][l].length-m;c++){if(r(x[o][l][c],y,A,P,I)===!1)return!1;y++}I++}P++}break;case"GeometryCollection":for(o=0;o<d.geometries.length;o++)if(k(d.geometries[o],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function w(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,o,l,c,d,u,x,p,g,m,y=0,v=i.type==="FeatureCollection",_=i.type==="Feature",h=v?i.features.length:1;for(n=0;n<h;n++){for(u=v?i.features[n].geometry:_?i.geometry:i,p=v?i.features[n].properties:_?i.properties:{},g=v?i.features[n].bbox:_?i.bbox:void 0,m=v?i.features[n].id:_?i.id:void 0,d=(x=!!u&&u.type==="GeometryCollection")?u.geometries.length:1,l=0;l<d;l++)if((c=x?u.geometries[l]:u)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,y,p,g,m)===!1)return!1;break;case"GeometryCollection":for(o=0;o<c.geometries.length;o++)if(r(c.geometries[o],y,p,g,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,y,p,g,m)===!1)return!1;y++}}function f(i,r){b(i,function(n,o,l,c,d){var u,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(T.feature(n,l,{bbox:c,id:d}),o,0)!==!1&&void 0}switch(x){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var p=0;p<n.coordinates.length;p++){var g={type:u,coordinates:n.coordinates[p]};if(r(T.feature(g,l),o,p)===!1)return!1}})}function s(i,r){f(i,function(n,o,l){var c=0;if(n.geometry){var d=n.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var u,x=0,p=0,g=0;return k(n,function(m,y,v,_,h){if(u===void 0||o>x||_>p||h>g)return u=m,x=o,p=_,g=h,void(c=0);var S=T.lineString([u,m],n.properties);if(r(S,o,l,h,c)===!1)return!1;c++,u=m})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");f(i,function(n,o,l){if(n.geometry!==null){var c=n.geometry.type,d=n.geometry.coordinates;switch(c){case"LineString":if(r(n,o,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<d.length;u++)if(r(T.lineString(d[u],n.properties),o,l,u)===!1)return!1}}})}C.coordEach=k,C.coordReduce=function(i,r,n,o){var l=n;return k(i,function(c,d,u,x,p){l=d===0&&n===void 0?c:r(l,c,d,u,x,p)},o),l},C.propEach=a,C.propReduce=function(i,r,n){var o=n;return a(i,function(l,c){o=c===0&&n===void 0?l:r(o,l,c)}),o},C.featureEach=w,C.featureReduce=function(i,r,n){var o=n;return w(i,function(l,c){o=c===0&&n===void 0?l:r(o,l,c)}),o},C.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},C.geomEach=b,C.geomReduce=function(i,r,n){var o=n;return b(i,function(l,c,d,u,x){o=c===0&&n===void 0?l:r(o,l,c,d,u,x)}),o},C.flattenEach=f,C.flattenReduce=function(i,r,n){var o=n;return f(i,function(l,c,d){o=c===0&&d===0&&n===void 0?l:r(o,l,c,d)}),o},C.segmentEach=s,C.segmentReduce=function(i,r,n){var o=n,l=!1;return s(i,function(c,d,u,x,p){o=l===!1&&n===void 0?c:r(o,c,d,u,x,p),l=!0}),o},C.lineEach=t,C.lineReduce=function(i,r,n){var o=n;return t(i,function(l,c,d,u){o=c===0&&n===void 0?l:r(o,l,c,d,u)}),o},C.findSegment=function(i,r){if(r=r||{},!T.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,l=r.multiFeatureIndex||0,c=r.geometryIndex||0,d=r.segmentIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),u=u||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=x.length+d-1),T.lineString([x[d],x[d+1]],u,r);case"Polygon":return c<0&&(c=x.length+c),d<0&&(d=x[c].length+d-1),T.lineString([x[c][d],x[c][d+1]],u,r);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d-1),T.lineString([x[l][d],x[l][d+1]],u,r);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),d<0&&(d=x[l][c].length-d-1),T.lineString([x[l][c][d],x[l][c][d+1]],u,r)}throw new Error("geojson is invalid")},C.findPoint=function(i,r){if(r=r||{},!T.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,l=r.multiFeatureIndex||0,c=r.geometryIndex||0,d=r.coordIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),u=u||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return T.point(x,u,r);case"MultiPoint":return l<0&&(l=x.length+l),T.point(x[l],u,r);case"LineString":return d<0&&(d=x.length+d),T.point(x[d],u,r);case"Polygon":return c<0&&(c=x.length+c),d<0&&(d=x[c].length+d),T.point(x[c][d],u,r);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d),T.point(x[l][d],u,r);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),d<0&&(d=x[l][c].length-d),T.point(x[l][c][d],u,r)}throw new Error("geojson is invalid")}},42428:function(F,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var T=e(84880);function k(a){var w=[1/0,1/0,-1/0,-1/0];return T.coordEach(a,function(b){w[0]>b[0]&&(w[0]=b[0]),w[1]>b[1]&&(w[1]=b[1]),w[2]<b[0]&&(w[2]=b[0]),w[3]<b[1]&&(w[3]=b[1])}),w}k.default=k,C.default=k},76796:function(F,C){"use strict";function e(o,l,c){c===void 0&&(c={});var d={type:"Feature"};return(c.id===0||c.id)&&(d.id=c.id),c.bbox&&(d.bbox=c.bbox),d.properties=l||{},d.geometry=o,d}function T(o,l,c){if(c===void 0&&(c={}),!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(o[0])||!n(o[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:o},l,c)}function k(o,l,c){c===void 0&&(c={});for(var d=0,u=o;d<u.length;d++){var x=u[d];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<x[x.length-1].length;p++)if(x[x.length-1][p]!==x[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:o},l,c)}function a(o,l,c){if(c===void 0&&(c={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:o},l,c)}function w(o,l){l===void 0&&(l={});var c={type:"FeatureCollection"};return l.id&&(c.id=l.id),l.bbox&&(c.bbox=l.bbox),c.features=o,c}function b(o,l,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:o},l,c)}function f(o,l,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:o},l,c)}function s(o,l,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:o},l,c)}function t(o,l){l===void 0&&(l="kilometers");var c=C.factors[l];if(!c)throw new Error(l+" units is invalid");return o*c}function i(o,l){l===void 0&&(l="kilometers");var c=C.factors[l];if(!c)throw new Error(l+" units is invalid");return o/c}function r(o){return o%(2*Math.PI)*180/Math.PI}function n(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)}Object.defineProperty(C,"__esModule",{value:!0}),C.earthRadius=63710088e-1,C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1e3,kilometres:C.earthRadius/1e3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1e3*C.earthRadius,millimetres:1e3*C.earthRadius,nauticalmiles:C.earthRadius/1852,radians:1,yards:1.0936*C.earthRadius},C.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/C.earthRadius,yards:1.0936133},C.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},C.feature=e,C.geometry=function(o,l,c){switch(c===void 0&&(c={}),o){case"Point":return T(l).geometry;case"LineString":return a(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return f(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(o+" is invalid")}},C.point=T,C.points=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return T(d,l)}),c)},C.polygon=k,C.polygons=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return k(d,l)}),c)},C.lineString=a,C.lineStrings=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return a(d,l)}),c)},C.featureCollection=w,C.multiLineString=b,C.multiPoint=f,C.multiPolygon=s,C.geometryCollection=function(o,l,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:o},l,c)},C.round=function(o,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,l||0);return Math.round(o*c)/c},C.radiansToLength=t,C.lengthToRadians=i,C.lengthToDegrees=function(o,l){return r(i(o,l))},C.bearingToAzimuth=function(o){var l=o%360;return l<0&&(l+=360),l},C.radiansToDegrees=r,C.degreesToRadians=function(o){return o%360*Math.PI/180},C.convertLength=function(o,l,c){if(l===void 0&&(l="kilometers"),c===void 0&&(c="kilometers"),!(o>=0))throw new Error("length must be a positive number");return t(i(o,l),c)},C.convertArea=function(o,l,c){if(l===void 0&&(l="meters"),c===void 0&&(c="kilometers"),!(o>=0))throw new Error("area must be a positive number");var d=C.areaFactors[l];if(!d)throw new Error("invalid original units");var u=C.areaFactors[c];if(!u)throw new Error("invalid final units");return o/d*u},C.isNumber=n,C.isObject=function(o){return!!o&&o.constructor===Object},C.validateBBox=function(o){if(!o)throw new Error("bbox is required");if(!Array.isArray(o))throw new Error("bbox must be an Array");if(o.length!==4&&o.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");o.forEach(function(l){if(!n(l))throw new Error("bbox must only contain numbers")})},C.validateId=function(o){if(!o)throw new Error("id is required");if(["string","number"].indexOf(typeof o)===-1)throw new Error("id must be a number or a string")}},84880:function(F,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var T=e(76796);function k(i,r,n){if(i!==null)for(var o,l,c,d,u,x,p,g,m=0,y=0,v=i.type,_=v==="FeatureCollection",h=v==="Feature",S=_?i.features.length:1,A=0;A<S;A++){u=(g=!!(p=_?i.features[A].geometry:h?i.geometry:i)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var E=0;E<u;E++){var P=0,I=0;if((d=g?p.geometries[E]:p)!==null){x=d.coordinates;var D=d.type;switch(m=!n||D!=="Polygon"&&D!=="MultiPolygon"?0:1,D){case null:break;case"Point":if(r(x,y,A,P,I)===!1)return!1;y++,P++;break;case"LineString":case"MultiPoint":for(o=0;o<x.length;o++){if(r(x[o],y,A,P,I)===!1)return!1;y++,D==="MultiPoint"&&P++}D==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(o=0;o<x.length;o++){for(l=0;l<x[o].length-m;l++){if(r(x[o][l],y,A,P,I)===!1)return!1;y++}D==="MultiLineString"&&P++,D==="Polygon"&&I++}D==="Polygon"&&P++;break;case"MultiPolygon":for(o=0;o<x.length;o++){for(I=0,l=0;l<x[o].length;l++){for(c=0;c<x[o][l].length-m;c++){if(r(x[o][l][c],y,A,P,I)===!1)return!1;y++}I++}P++}break;case"GeometryCollection":for(o=0;o<d.geometries.length;o++)if(k(d.geometries[o],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function w(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,o,l,c,d,u,x,p,g,m,y=0,v=i.type==="FeatureCollection",_=i.type==="Feature",h=v?i.features.length:1;for(n=0;n<h;n++){for(u=v?i.features[n].geometry:_?i.geometry:i,p=v?i.features[n].properties:_?i.properties:{},g=v?i.features[n].bbox:_?i.bbox:void 0,m=v?i.features[n].id:_?i.id:void 0,d=(x=!!u&&u.type==="GeometryCollection")?u.geometries.length:1,l=0;l<d;l++)if((c=x?u.geometries[l]:u)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,y,p,g,m)===!1)return!1;break;case"GeometryCollection":for(o=0;o<c.geometries.length;o++)if(r(c.geometries[o],y,p,g,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,y,p,g,m)===!1)return!1;y++}}function f(i,r){b(i,function(n,o,l,c,d){var u,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(T.feature(n,l,{bbox:c,id:d}),o,0)!==!1&&void 0}switch(x){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var p=0;p<n.coordinates.length;p++){var g={type:u,coordinates:n.coordinates[p]};if(r(T.feature(g,l),o,p)===!1)return!1}})}function s(i,r){f(i,function(n,o,l){var c=0;if(n.geometry){var d=n.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var u,x=0,p=0,g=0;return k(n,function(m,y,v,_,h){if(u===void 0||o>x||_>p||h>g)return u=m,x=o,p=_,g=h,void(c=0);var S=T.lineString([u,m],n.properties);if(r(S,o,l,h,c)===!1)return!1;c++,u=m})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");f(i,function(n,o,l){if(n.geometry!==null){var c=n.geometry.type,d=n.geometry.coordinates;switch(c){case"LineString":if(r(n,o,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<d.length;u++)if(r(T.lineString(d[u],n.properties),o,l,u)===!1)return!1}}})}C.coordEach=k,C.coordReduce=function(i,r,n,o){var l=n;return k(i,function(c,d,u,x,p){l=d===0&&n===void 0?c:r(l,c,d,u,x,p)},o),l},C.propEach=a,C.propReduce=function(i,r,n){var o=n;return a(i,function(l,c){o=c===0&&n===void 0?l:r(o,l,c)}),o},C.featureEach=w,C.featureReduce=function(i,r,n){var o=n;return w(i,function(l,c){o=c===0&&n===void 0?l:r(o,l,c)}),o},C.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},C.geomEach=b,C.geomReduce=function(i,r,n){var o=n;return b(i,function(l,c,d,u,x){o=c===0&&n===void 0?l:r(o,l,c,d,u,x)}),o},C.flattenEach=f,C.flattenReduce=function(i,r,n){var o=n;return f(i,function(l,c,d){o=c===0&&d===0&&n===void 0?l:r(o,l,c,d)}),o},C.segmentEach=s,C.segmentReduce=function(i,r,n){var o=n,l=!1;return s(i,function(c,d,u,x,p){o=l===!1&&n===void 0?c:r(o,c,d,u,x,p),l=!0}),o},C.lineEach=t,C.lineReduce=function(i,r,n){var o=n;return t(i,function(l,c,d,u){o=c===0&&n===void 0?l:r(o,l,c,d,u)}),o},C.findSegment=function(i,r){if(r=r||{},!T.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,l=r.multiFeatureIndex||0,c=r.geometryIndex||0,d=r.segmentIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),u=u||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=x.length+d-1),T.lineString([x[d],x[d+1]],u,r);case"Polygon":return c<0&&(c=x.length+c),d<0&&(d=x[c].length+d-1),T.lineString([x[c][d],x[c][d+1]],u,r);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d-1),T.lineString([x[l][d],x[l][d+1]],u,r);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),d<0&&(d=x[l][c].length-d-1),T.lineString([x[l][c][d],x[l][c][d+1]],u,r)}throw new Error("geojson is invalid")},C.findPoint=function(i,r){if(r=r||{},!T.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,l=r.multiFeatureIndex||0,c=r.geometryIndex||0,d=r.coordIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),u=u||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return T.point(x,u,r);case"MultiPoint":return l<0&&(l=x.length+l),T.point(x[l],u,r);case"LineString":return d<0&&(d=x.length+d),T.point(x[d],u,r);case"Polygon":return c<0&&(c=x.length+c),d<0&&(d=x[c].length+d),T.point(x[c][d],u,r);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d),T.point(x[l][d],u,r);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),d<0&&(d=x[l][c].length-d),T.point(x[l][c][d],u,r)}throw new Error("geojson is invalid")}},77844:function(F,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var T=e(43752),k=e(49840);C.default=function(a,w){w===void 0&&(w={});var b=0,f=0,s=0;return T.coordEach(a,function(t){b+=t[0],f+=t[1],s++}),k.point([b/s,f/s],w.properties)}},49840:function(F,C){"use strict";function e(o,l,c){c===void 0&&(c={});var d={type:"Feature"};return(c.id===0||c.id)&&(d.id=c.id),c.bbox&&(d.bbox=c.bbox),d.properties=l||{},d.geometry=o,d}function T(o,l,c){return c===void 0&&(c={}),e({type:"Point",coordinates:o},l,c)}function k(o,l,c){c===void 0&&(c={});for(var d=0,u=o;d<u.length;d++){var x=u[d];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<x[x.length-1].length;p++)if(x[x.length-1][p]!==x[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:o},l,c)}function a(o,l,c){if(c===void 0&&(c={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:o},l,c)}function w(o,l){l===void 0&&(l={});var c={type:"FeatureCollection"};return l.id&&(c.id=l.id),l.bbox&&(c.bbox=l.bbox),c.features=o,c}function b(o,l,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:o},l,c)}function f(o,l,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:o},l,c)}function s(o,l,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:o},l,c)}function t(o,l){l===void 0&&(l="kilometers");var c=C.factors[l];if(!c)throw new Error(l+" units is invalid");return o*c}function i(o,l){l===void 0&&(l="kilometers");var c=C.factors[l];if(!c)throw new Error(l+" units is invalid");return o/c}function r(o){return o%(2*Math.PI)*180/Math.PI}function n(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)&&!/^\s*$/.test(o)}Object.defineProperty(C,"__esModule",{value:!0}),C.earthRadius=63710088e-1,C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1e3,kilometres:C.earthRadius/1e3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1e3*C.earthRadius,millimetres:1e3*C.earthRadius,nauticalmiles:C.earthRadius/1852,radians:1,yards:C.earthRadius/1.0936},C.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/C.earthRadius,yards:.91441111923921},C.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},C.feature=e,C.geometry=function(o,l,c){switch(c===void 0&&(c={}),o){case"Point":return T(l).geometry;case"LineString":return a(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return f(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(o+" is invalid")}},C.point=T,C.points=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return T(d,l)}),c)},C.polygon=k,C.polygons=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return k(d,l)}),c)},C.lineString=a,C.lineStrings=function(o,l,c){return c===void 0&&(c={}),w(o.map(function(d){return a(d,l)}),c)},C.featureCollection=w,C.multiLineString=b,C.multiPoint=f,C.multiPolygon=s,C.geometryCollection=function(o,l,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:o},l,c)},C.round=function(o,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,l||0);return Math.round(o*c)/c},C.radiansToLength=t,C.lengthToRadians=i,C.lengthToDegrees=function(o,l){return r(i(o,l))},C.bearingToAzimuth=function(o){var l=o%360;return l<0&&(l+=360),l},C.radiansToDegrees=r,C.degreesToRadians=function(o){return o%360*Math.PI/180},C.convertLength=function(o,l,c){if(l===void 0&&(l="kilometers"),c===void 0&&(c="kilometers"),!(o>=0))throw new Error("length must be a positive number");return t(i(o,l),c)},C.convertArea=function(o,l,c){if(l===void 0&&(l="meters"),c===void 0&&(c="kilometers"),!(o>=0))throw new Error("area must be a positive number");var d=C.areaFactors[l];if(!d)throw new Error("invalid original units");var u=C.areaFactors[c];if(!u)throw new Error("invalid final units");return o/d*u},C.isNumber=n,C.isObject=function(o){return!!o&&o.constructor===Object},C.validateBBox=function(o){if(!o)throw new Error("bbox is required");if(!Array.isArray(o))throw new Error("bbox must be an Array");if(o.length!==4&&o.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");o.forEach(function(l){if(!n(l))throw new Error("bbox must only contain numbers")})},C.validateId=function(o){if(!o)throw new Error("id is required");if(["string","number"].indexOf(typeof o)===-1)throw new Error("id must be a number or a string")},C.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},C.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},C.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},C.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},C.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},C.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},C.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(F,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var T=e(49840);function k(i,r,n){if(i!==null)for(var o,l,c,d,u,x,p,g,m=0,y=0,v=i.type,_=v==="FeatureCollection",h=v==="Feature",S=_?i.features.length:1,A=0;A<S;A++){u=(g=!!(p=_?i.features[A].geometry:h?i.geometry:i)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var E=0;E<u;E++){var P=0,I=0;if((d=g?p.geometries[E]:p)!==null){x=d.coordinates;var D=d.type;switch(m=!n||D!=="Polygon"&&D!=="MultiPolygon"?0:1,D){case null:break;case"Point":if(r(x,y,A,P,I)===!1)return!1;y++,P++;break;case"LineString":case"MultiPoint":for(o=0;o<x.length;o++){if(r(x[o],y,A,P,I)===!1)return!1;y++,D==="MultiPoint"&&P++}D==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(o=0;o<x.length;o++){for(l=0;l<x[o].length-m;l++){if(r(x[o][l],y,A,P,I)===!1)return!1;y++}D==="MultiLineString"&&P++,D==="Polygon"&&I++}D==="Polygon"&&P++;break;case"MultiPolygon":for(o=0;o<x.length;o++){for(I=0,l=0;l<x[o].length;l++){for(c=0;c<x[o][l].length-m;c++){if(r(x[o][l][c],y,A,P,I)===!1)return!1;y++}I++}P++}break;case"GeometryCollection":for(o=0;o<d.geometries.length;o++)if(k(d.geometries[o],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function w(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function b(i,r){var n,o,l,c,d,u,x,p,g,m,y=0,v=i.type==="FeatureCollection",_=i.type==="Feature",h=v?i.features.length:1;for(n=0;n<h;n++){for(u=v?i.features[n].geometry:_?i.geometry:i,p=v?i.features[n].properties:_?i.properties:{},g=v?i.features[n].bbox:_?i.bbox:void 0,m=v?i.features[n].id:_?i.id:void 0,d=(x=!!u&&u.type==="GeometryCollection")?u.geometries.length:1,l=0;l<d;l++)if((c=x?u.geometries[l]:u)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(c,y,p,g,m)===!1)return!1;break;case"GeometryCollection":for(o=0;o<c.geometries.length;o++)if(r(c.geometries[o],y,p,g,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,y,p,g,m)===!1)return!1;y++}}function f(i,r){b(i,function(n,o,l,c,d){var u,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(T.feature(n,l,{bbox:c,id:d}),o,0)!==!1&&void 0}switch(x){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var p=0;p<n.coordinates.length;p++){var g={type:u,coordinates:n.coordinates[p]};if(r(T.feature(g,l),o,p)===!1)return!1}})}function s(i,r){f(i,function(n,o,l){var c=0;if(n.geometry){var d=n.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var u,x=0,p=0,g=0;return k(n,function(m,y,v,_,h){if(u===void 0||o>x||_>p||h>g)return u=m,x=o,p=_,g=h,void(c=0);var S=T.lineString([u,m],n.properties);if(r(S,o,l,h,c)===!1)return!1;c++,u=m})!==!1&&void 0}}})}function t(i,r){if(!i)throw new Error("geojson is required");f(i,function(n,o,l){if(n.geometry!==null){var c=n.geometry.type,d=n.geometry.coordinates;switch(c){case"LineString":if(r(n,o,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<d.length;u++)if(r(T.lineString(d[u],n.properties),o,l,u)===!1)return!1}}})}C.coordEach=k,C.coordReduce=function(i,r,n,o){var l=n;return k(i,function(c,d,u,x,p){l=d===0&&n===void 0?c:r(l,c,d,u,x,p)},o),l},C.propEach=a,C.propReduce=function(i,r,n){var o=n;return a(i,function(l,c){o=c===0&&n===void 0?l:r(o,l,c)}),o},C.featureEach=w,C.featureReduce=function(i,r,n){var o=n;return w(i,function(l,c){o=c===0&&n===void 0?l:r(o,l,c)}),o},C.coordAll=function(i){var r=[];return k(i,function(n){r.push(n)}),r},C.geomEach=b,C.geomReduce=function(i,r,n){var o=n;return b(i,function(l,c,d,u,x){o=c===0&&n===void 0?l:r(o,l,c,d,u,x)}),o},C.flattenEach=f,C.flattenReduce=function(i,r,n){var o=n;return f(i,function(l,c,d){o=c===0&&d===0&&n===void 0?l:r(o,l,c,d)}),o},C.segmentEach=s,C.segmentReduce=function(i,r,n){var o=n,l=!1;return s(i,function(c,d,u,x,p){o=l===!1&&n===void 0?c:r(o,c,d,u,x,p),l=!0}),o},C.lineEach=t,C.lineReduce=function(i,r,n){var o=n;return t(i,function(l,c,d,u){o=c===0&&n===void 0?l:r(o,l,c,d,u)}),o},C.findSegment=function(i,r){if(r=r||{},!T.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,l=r.multiFeatureIndex||0,c=r.geometryIndex||0,d=r.segmentIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),u=u||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=x.length+d-1),T.lineString([x[d],x[d+1]],u,r);case"Polygon":return c<0&&(c=x.length+c),d<0&&(d=x[c].length+d-1),T.lineString([x[c][d],x[c][d+1]],u,r);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d-1),T.lineString([x[l][d],x[l][d+1]],u,r);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),d<0&&(d=x[l][c].length-d-1),T.lineString([x[l][c][d],x[l][c][d+1]],u,r)}throw new Error("geojson is invalid")},C.findPoint=function(i,r){if(r=r||{},!T.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,l=r.multiFeatureIndex||0,c=r.geometryIndex||0,d=r.coordIndex||0,u=r.properties;switch(i.type){case"FeatureCollection":o<0&&(o=i.features.length+o),u=u||i.features[o].properties,n=i.features[o].geometry;break;case"Feature":u=u||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return T.point(x,u,r);case"MultiPoint":return l<0&&(l=x.length+l),T.point(x[l],u,r);case"LineString":return d<0&&(d=x.length+d),T.point(x[d],u,r);case"Polygon":return c<0&&(c=x.length+c),d<0&&(d=x[c].length+d),T.point(x[c][d],u,r);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d),T.point(x[l][d],u,r);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),d<0&&(d=x[l][c].length-d),T.point(x[l][c][d],u,r)}throw new Error("geojson is invalid")}},49972:function(F){F.exports=function(C){var e=0,T=0,k=0,a=0;return C.map(function(w){var b=(w=w.slice())[0],f=b.toUpperCase();if(b!=f)switch(w[0]=f,b){case"a":w[6]+=k,w[7]+=a;break;case"v":w[1]+=a;break;case"h":w[1]+=k;break;default:for(var s=1;s<w.length;)w[s++]+=k,w[s++]+=a}switch(f){case"Z":k=e,a=T;break;case"H":k=w[1];break;case"V":a=w[1];break;case"M":k=e=w[1],a=T=w[2];break;default:k=w[w.length-2],a=w[w.length-1]}return w})}},76752:function(F){"use strict";F.exports=function(C,e){if(!C||C.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var T=Array(2*e),k=0;k<e;k++){for(var a=-1/0,w=1/0,b=k,f=C.length;b<f;b+=e)C[b]>a&&(a=C[b]),C[b]<w&&(w=C[b]);T[k]=w,T[e+k]=a}return T}},10272:function(F){"use strict";F.exports=function(C,e,T){if(typeof Array.prototype.findIndex=="function")return C.findIndex(e,T);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(C),a=k.length;if(a===0)return-1;for(var w=0;w<a;w++)if(e.call(T,k[w],w,k))return w;return-1}},71152:function(F,C,e){"use strict";var T=e(76752);F.exports=function(k,a,w){if(!k||k.length==null)throw Error("Argument should be an array");a==null&&(a=1),w==null&&(w=T(k,a));for(var b=0;b<a;b++){var f=w[a+b],s=w[b],t=b,i=k.length;if(f===1/0&&s===-1/0)for(t=b;t<i;t+=a)k[t]=k[t]===f?1:k[t]===s?0:.5;else if(f===1/0)for(t=b;t<i;t+=a)k[t]=k[t]===f?1:0;else if(s===-1/0)for(t=b;t<i;t+=a)k[t]=k[t]===s?0:1;else{var r=f-s;for(t=b;t<i;t+=a)isNaN(k[t])||(k[t]=r===0?.5:(k[t]-s)/r)}}return k}},67752:function(F){F.exports=function(C,e){var T=typeof C=="number",k=typeof e=="number";T&&!k?(e=C,C=0):T||k||(C=0,e=0);var a=(e|=0)-(C|=0);if(a<0)throw new Error("array length must be positive");for(var w=new Array(a),b=0,f=C;b<a;b++,f++)w[b]=f;return w}},45408:function(F,C,e){"use strict";var T=e(4168);function k(O){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},k(O)}var a,w,b=e(86832).codes,f=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,r=b.ERR_MISSING_ARGS,n=e(26144),o=e(35840).inspect,l=e(35840).types,c=l.isPromise,d=l.isRegExp,u=Object.assign?Object.assign:e(60964).assign,x=Object.is?Object.is:e(39896);function p(){var O=e(25116);a=O.isDeepEqual,w=O.isDeepStrictEqual}var g=!1,m=F.exports=h,y={};function v(O){throw O.message instanceof Error?O.message:new n(O)}function _(O,j,Y,B){if(!Y){var U=!1;if(j===0)U=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var q=new n({actual:Y,expected:!0,message:B,operator:"==",stackStartFn:O});throw q.generatedMessage=U,q}}function h(){for(var O=arguments.length,j=new Array(O),Y=0;Y<O;Y++)j[Y]=arguments[Y];_.apply(void 0,[h,j.length].concat(j))}m.fail=function O(j,Y,B,U,q){var te,ee=arguments.length;if(ee===0?te="Failed":ee===1?(B=j,j=void 0):(g===!1&&(g=!0,(T.emitWarning?T.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),ee===2&&(U="!=")),B instanceof Error)throw B;var Q={actual:j,expected:Y,operator:U===void 0?"fail":U,stackStartFn:q||O};B!==void 0&&(Q.message=B);var J=new n(Q);throw te&&(J.message=te,J.generatedMessage=!0),J},m.AssertionError=n,m.ok=h,m.equal=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");j!=Y&&v({actual:j,expected:Y,message:B,operator:"==",stackStartFn:O})},m.notEqual=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");j==Y&&v({actual:j,expected:Y,message:B,operator:"!=",stackStartFn:O})},m.deepEqual=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");a===void 0&&p(),a(j,Y)||v({actual:j,expected:Y,message:B,operator:"deepEqual",stackStartFn:O})},m.notDeepEqual=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");a===void 0&&p(),a(j,Y)&&v({actual:j,expected:Y,message:B,operator:"notDeepEqual",stackStartFn:O})},m.deepStrictEqual=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");a===void 0&&p(),w(j,Y)||v({actual:j,expected:Y,message:B,operator:"deepStrictEqual",stackStartFn:O})},m.notDeepStrictEqual=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");a===void 0&&p(),w(j,Y)&&v({actual:j,expected:Y,message:B,operator:"notDeepStrictEqual",stackStartFn:O})},m.strictEqual=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");x(j,Y)||v({actual:j,expected:Y,message:B,operator:"strictEqual",stackStartFn:O})},m.notStrictEqual=function O(j,Y,B){if(arguments.length<2)throw new r("actual","expected");x(j,Y)&&v({actual:j,expected:Y,message:B,operator:"notStrictEqual",stackStartFn:O})};var S=function O(j,Y,B){var U=this;(function(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")})(this,O),Y.forEach(function(q){q in j&&(B!==void 0&&typeof B[q]=="string"&&d(j[q])&&j[q].test(B[q])?U[q]=B[q]:U[q]=j[q])})};function A(O,j,Y,B){if(typeof j!="function"){if(d(j))return j.test(O);if(arguments.length===2)throw new s("expected",["Function","RegExp"],j);if(k(O)!=="object"||O===null){var U=new n({actual:O,expected:j,message:Y,operator:"deepStrictEqual",stackStartFn:B});throw U.operator=B.name,U}var q=Object.keys(j);if(j instanceof Error)q.push("name","message");else if(q.length===0)throw new t("error",j,"may not be an empty object");return a===void 0&&p(),q.forEach(function(te){typeof O[te]=="string"&&d(j[te])&&j[te].test(O[te])||function(ee,Q,J,K,X,ie){if(!(J in ee)||!w(ee[J],Q[J])){if(!K){var se=new S(ee,X),ae=new S(Q,X,ee),ue=new n({actual:se,expected:ae,operator:"deepStrictEqual",stackStartFn:ie});throw ue.actual=ee,ue.expected=Q,ue.operator=ie.name,ue}v({actual:ee,expected:Q,message:K,operator:ie.name,stackStartFn:ie})}}(O,j,te,Y,q,B)}),!0}return j.prototype!==void 0&&O instanceof j||!Error.isPrototypeOf(j)&&j.call({},O)===!0}function E(O){if(typeof O!="function")throw new s("fn","Function",O);try{O()}catch(j){return j}return y}function P(O){return c(O)||O!==null&&k(O)==="object"&&typeof O.then=="function"&&typeof O.catch=="function"}function I(O){return Promise.resolve().then(function(){var j;if(typeof O=="function"){if(!P(j=O()))throw new i("instance of Promise","promiseFn",j)}else{if(!P(O))throw new s("promiseFn",["Function","Promise"],O);j=O}return Promise.resolve().then(function(){return j}).then(function(){return y}).catch(function(Y){return Y})})}function D(O,j,Y,B){if(typeof Y=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],Y);if(k(j)==="object"&&j!==null){if(j.message===Y)throw new f("error/message",'The error message "'.concat(j.message,'" is identical to the message.'))}else if(j===Y)throw new f("error/message",'The error "'.concat(j,'" is identical to the message.'));B=Y,Y=void 0}else if(Y!=null&&k(Y)!=="object"&&typeof Y!="function")throw new s("error",["Object","Error","Function","RegExp"],Y);if(j===y){var U="";Y&&Y.name&&(U+=" (".concat(Y.name,")")),U+=B?": ".concat(B):".";var q=O.name==="rejects"?"rejection":"exception";v({actual:void 0,expected:Y,operator:O.name,message:"Missing expected ".concat(q).concat(U),stackStartFn:O})}if(Y&&!A(j,Y,B,O))throw j}function z(O,j,Y,B){if(j!==y){if(typeof Y=="string"&&(B=Y,Y=void 0),!Y||A(j,Y)){var U=B?": ".concat(B):".",q=O.name==="doesNotReject"?"rejection":"exception";v({actual:j,expected:Y,operator:O.name,message:"Got unwanted ".concat(q).concat(U,`
`)+'Actual message: "'.concat(j&&j.message,'"'),stackStartFn:O})}throw j}}function V(){for(var O=arguments.length,j=new Array(O),Y=0;Y<O;Y++)j[Y]=arguments[Y];_.apply(void 0,[V,j.length].concat(j))}m.throws=function O(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),U=1;U<Y;U++)B[U-1]=arguments[U];D.apply(void 0,[O,E(j)].concat(B))},m.rejects=function O(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),U=1;U<Y;U++)B[U-1]=arguments[U];return I(j).then(function(q){return D.apply(void 0,[O,q].concat(B))})},m.doesNotThrow=function O(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),U=1;U<Y;U++)B[U-1]=arguments[U];z.apply(void 0,[O,E(j)].concat(B))},m.doesNotReject=function O(j){for(var Y=arguments.length,B=new Array(Y>1?Y-1:0),U=1;U<Y;U++)B[U-1]=arguments[U];return I(j).then(function(q){return z.apply(void 0,[O,q].concat(B))})},m.ifError=function O(j){if(j!=null){var Y="ifError got unwanted exception: ";k(j)==="object"&&typeof j.message=="string"?j.message.length===0&&j.constructor?Y+=j.constructor.name:Y+=j.message:Y+=o(j);var B=new n({actual:j,expected:null,operator:"ifError",message:Y,stackStartFn:O}),U=j.stack;if(typeof U=="string"){var q=U.split(`
`);q.shift();for(var te=B.stack.split(`
`),ee=0;ee<q.length;ee++){var Q=te.indexOf(q[ee]);if(Q!==-1){te=te.slice(0,Q);break}}B.stack="".concat(te.join(`
`),`
`).concat(q.join(`
`))}throw B}},m.strict=u(V,m,{equal:m.strictEqual,deepEqual:m.deepStrictEqual,notEqual:m.notStrictEqual,notDeepEqual:m.notDeepStrictEqual}),m.strict.strict=m.strict},26144:function(F,C,e){"use strict";var T=e(4168);function k(v,_,h){return _ in v?Object.defineProperty(v,_,{value:h,enumerable:!0,configurable:!0,writable:!0}):v[_]=h,v}function a(v,_){for(var h=0;h<_.length;h++){var S=_[h];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function w(v,_){return!_||r(_)!=="object"&&typeof _!="function"?b(v):_}function b(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function f(v){var _=typeof Map=="function"?new Map:void 0;return f=function(h){if(h===null||(S=h,Function.toString.call(S).indexOf("[native code]")===-1))return h;var S;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(h))return _.get(h);_.set(h,A)}function A(){return s(h,arguments,i(this).constructor)}return A.prototype=Object.create(h.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),t(A,h)},f(v)}function s(v,_,h){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,A,E){var P=[null];P.push.apply(P,A);var I=new(Function.bind.apply(S,P));return E&&t(I,E.prototype),I},s.apply(null,arguments)}function t(v,_){return t=Object.setPrototypeOf||function(h,S){return h.__proto__=S,h},t(v,_)}function i(v){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},i(v)}function r(v){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},r(v)}var n=e(35840).inspect,o=e(86832).codes.ERR_INVALID_ARG_TYPE;function l(v,_,h){return(h===void 0||h>v.length)&&(h=v.length),v.substring(h-_.length,h)===_}var c="",d="",u="",x="",p={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function g(v){var _=Object.keys(v),h=Object.create(Object.getPrototypeOf(v));return _.forEach(function(S){h[S]=v[S]}),Object.defineProperty(h,"message",{value:v.message}),h}function m(v){return n(v,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var y=function(v){function _(A){var E;if(function(te,ee){if(!(te instanceof ee))throw new TypeError("Cannot call a class as a function")}(this,_),r(A)!=="object"||A===null)throw new o("options","Object",A);var P=A.message,I=A.operator,D=A.stackStartFn,z=A.actual,V=A.expected,O=Error.stackTraceLimit;if(Error.stackTraceLimit=0,P!=null)E=w(this,i(_).call(this,String(P)));else if(T.stderr&&T.stderr.isTTY&&(T.stderr&&T.stderr.getColorDepth&&T.stderr.getColorDepth()!==1?(c="\x1B[34m",d="\x1B[32m",x="\x1B[39m",u="\x1B[31m"):(c="",d="",x="",u="")),r(z)==="object"&&z!==null&&r(V)==="object"&&V!==null&&"stack"in z&&z instanceof Error&&"stack"in V&&V instanceof Error&&(z=g(z),V=g(V)),I==="deepStrictEqual"||I==="strictEqual")E=w(this,i(_).call(this,function(te,ee,Q){var J="",K="",X=0,ie="",se=!1,ae=m(te),ue=ae.split(`
`),ve=m(ee).split(`
`),ye=0,pe="";if(Q==="strictEqual"&&r(te)==="object"&&r(ee)==="object"&&te!==null&&ee!==null&&(Q="strictEqualObject"),ue.length===1&&ve.length===1&&ue[0]!==ve[0]){var de=ue[0].length+ve[0].length;if(de<=10){if(!(r(te)==="object"&&te!==null||r(ee)==="object"&&ee!==null||te===0&&ee===0))return"".concat(p[Q],`

`)+"".concat(ue[0]," !== ").concat(ve[0],`
`)}else if(Q!=="strictEqualObject"&&de<(T.stderr&&T.stderr.isTTY?T.stderr.columns:80)){for(;ue[0][ye]===ve[0][ye];)ye++;ye>2&&(pe=`
  `.concat(function(Pe,De){if(De=Math.floor(De),Pe.length==0||De==0)return"";var he=Pe.length*De;for(De=Math.floor(Math.log(De)/Math.log(2));De;)Pe+=Pe,De--;return Pe+Pe.substring(0,he-Pe.length)}(" ",ye),"^"),ye=0)}}for(var me=ue[ue.length-1],ke=ve[ve.length-1];me===ke&&(ye++<2?ie=`
  `.concat(me).concat(ie):J=me,ue.pop(),ve.pop(),ue.length!==0&&ve.length!==0);)me=ue[ue.length-1],ke=ve[ve.length-1];var Ce=Math.max(ue.length,ve.length);if(Ce===0){var ge=ae.split(`
`);if(ge.length>30)for(ge[26]="".concat(c,"...").concat(x);ge.length>27;)ge.pop();return"".concat(p.notIdentical,`

`).concat(ge.join(`
`),`
`)}ye>3&&(ie=`
`.concat(c,"...").concat(x).concat(ie),se=!0),J!==""&&(ie=`
  `.concat(J).concat(ie),J="");var oe=0,re=p[Q]+`
`.concat(d,"+ actual").concat(x," ").concat(u,"- expected").concat(x),fe=" ".concat(c,"...").concat(x," Lines skipped");for(ye=0;ye<Ce;ye++){var Se=ye-X;if(ue.length<ye+1)Se>1&&ye>2&&(Se>4?(K+=`
`.concat(c,"...").concat(x),se=!0):Se>3&&(K+=`
  `.concat(ve[ye-2]),oe++),K+=`
  `.concat(ve[ye-1]),oe++),X=ye,J+=`
`.concat(u,"-").concat(x," ").concat(ve[ye]),oe++;else if(ve.length<ye+1)Se>1&&ye>2&&(Se>4?(K+=`
`.concat(c,"...").concat(x),se=!0):Se>3&&(K+=`
  `.concat(ue[ye-2]),oe++),K+=`
  `.concat(ue[ye-1]),oe++),X=ye,K+=`
`.concat(d,"+").concat(x," ").concat(ue[ye]),oe++;else{var be=ve[ye],we=ue[ye],Me=we!==be&&(!l(we,",")||we.slice(0,-1)!==be);Me&&l(be,",")&&be.slice(0,-1)===we&&(Me=!1,we+=","),Me?(Se>1&&ye>2&&(Se>4?(K+=`
`.concat(c,"...").concat(x),se=!0):Se>3&&(K+=`
  `.concat(ue[ye-2]),oe++),K+=`
  `.concat(ue[ye-1]),oe++),X=ye,K+=`
`.concat(d,"+").concat(x," ").concat(we),J+=`
`.concat(u,"-").concat(x," ").concat(be),oe+=2):(K+=J,J="",Se!==1&&ye!==0||(K+=`
  `.concat(we),oe++))}if(oe>20&&ye<Ce-2)return"".concat(re).concat(fe,`
`).concat(K,`
`).concat(c,"...").concat(x).concat(J,`
`)+"".concat(c,"...").concat(x)}return"".concat(re).concat(se?fe:"",`
`).concat(K).concat(J).concat(ie).concat(pe)}(z,V,I)));else if(I==="notDeepStrictEqual"||I==="notStrictEqual"){var j=p[I],Y=m(z).split(`
`);if(I==="notStrictEqual"&&r(z)==="object"&&z!==null&&(j=p.notStrictEqualObject),Y.length>30)for(Y[26]="".concat(c,"...").concat(x);Y.length>27;)Y.pop();E=Y.length===1?w(this,i(_).call(this,"".concat(j," ").concat(Y[0]))):w(this,i(_).call(this,"".concat(j,`

`).concat(Y.join(`
`),`
`)))}else{var B=m(z),U="",q=p[I];I==="notDeepEqual"||I==="notEqual"?(B="".concat(p[I],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(U="".concat(m(V)),B.length>512&&(B="".concat(B.slice(0,509),"...")),U.length>512&&(U="".concat(U.slice(0,509),"...")),I==="deepEqual"||I==="equal"?B="".concat(q,`

`).concat(B,`

should equal

`):U=" ".concat(I," ").concat(U)),E=w(this,i(_).call(this,"".concat(B).concat(U)))}return Error.stackTraceLimit=O,E.generatedMessage=!P,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=z,E.expected=V,E.operator=I,Error.captureStackTrace&&Error.captureStackTrace(b(E),D),E.stack,E.name="AssertionError",w(E)}var h,S;return function(A,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(E&&E.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),E&&t(A,E)}(_,v),h=_,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:n.custom,value:function(A,E){return n(this,function(P){for(var I=1;I<arguments.length;I++){var D=arguments[I]!=null?arguments[I]:{},z=Object.keys(D);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols(D).filter(function(V){return Object.getOwnPropertyDescriptor(D,V).enumerable}))),z.forEach(function(V){k(P,V,D[V])})}return P}({},E,{customInspect:!1,depth:0}))}}],S&&a(h.prototype,S),_}(f(Error));F.exports=y},86832:function(F,C,e){"use strict";function T(i){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},T(i)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},k(i)}function a(i,r){return a=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},a(i,r)}var w,b,f={};function s(i,r,n){n||(n=Error);var o=function(l){function c(d,u,x){var p;return function(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}(this,c),p=function(g,m){return!m||T(m)!=="object"&&typeof m!="function"?function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(g):m}(this,k(c).call(this,function(g,m,y){return typeof r=="string"?r:r(g,m,y)}(d,u,x))),p.code=i,p}return function(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(u&&u.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),u&&a(d,u)}(c,l),c}(n);f[i]=o}function t(i,r){if(Array.isArray(i)){var n=i.length;return i=i.map(function(o){return String(o)}),n>2?"one of ".concat(r," ").concat(i.slice(0,n-1).join(", "),", or ")+i[n-1]:n===2?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(i,r,n){var o,l,c,d,u;if(w===void 0&&(w=e(45408)),w(typeof i=="string","'name' must be a string"),typeof r=="string"&&(l="not ",r.substr(0,4)===l)?(o="must not be",r=r.replace(/^not /,"")):o="must be",function(p,g,m){return(m===void 0||m>p.length)&&(m=p.length),p.substring(m-9,m)===g}(i," argument"))c="The ".concat(i," ").concat(o," ").concat(t(r,"type"));else{var x=(typeof u!="number"&&(u=0),u+1>(d=i).length||d.indexOf(".",u)===-1?"argument":"property");c='The "'.concat(i,'" ').concat(x," ").concat(o," ").concat(t(r,"type"))}return c+". Received type ".concat(T(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(35840));var o=b.inspect(r);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(n,". Received ").concat(o)},TypeError,RangeError),s("ERR_INVALID_RETURN_VALUE",function(i,r,n){var o;return o=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(T(n)),"Expected ".concat(i,' to be returned from the "').concat(r,'"')+" function but got ".concat(o,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];w===void 0&&(w=e(45408)),w(r.length>0,"At least one arg needs to be specified");var o="The ",l=r.length;switch(r=r.map(function(c){return'"'.concat(c,'"')}),l){case 1:o+="".concat(r[0]," argument");break;case 2:o+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:o+=r.slice(0,l-1).join(", "),o+=", and ".concat(r[l-1]," arguments")}return"".concat(o," must be specified")},TypeError),F.exports.codes=f},25116:function(F,C,e){"use strict";function T(X,ie){return function(se){if(Array.isArray(se))return se}(X)||function(se,ae){var ue=[],ve=!0,ye=!1,pe=void 0;try{for(var de,me=se[Symbol.iterator]();!(ve=(de=me.next()).done)&&(ue.push(de.value),!ae||ue.length!==ae);ve=!0);}catch(ke){ye=!0,pe=ke}finally{try{ve||me.return==null||me.return()}finally{if(ye)throw pe}}return ue}(X,ie)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(X){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},k(X)}var a=/a/g.flags!==void 0,w=function(X){var ie=[];return X.forEach(function(se){return ie.push(se)}),ie},b=function(X){var ie=[];return X.forEach(function(se,ae){return ie.push([ae,se])}),ie},f=Object.is?Object.is:e(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i(X){return X.call.bind(X)}var r=i(Object.prototype.hasOwnProperty),n=i(Object.prototype.propertyIsEnumerable),o=i(Object.prototype.toString),l=e(35840).types,c=l.isAnyArrayBuffer,d=l.isArrayBufferView,u=l.isDate,x=l.isMap,p=l.isRegExp,g=l.isSet,m=l.isNativeError,y=l.isBoxedPrimitive,v=l.isNumberObject,_=l.isStringObject,h=l.isBooleanObject,S=l.isBigIntObject,A=l.isSymbolObject,E=l.isFloat32Array,P=l.isFloat64Array;function I(X){if(X.length===0||X.length>10)return!0;for(var ie=0;ie<X.length;ie++){var se=X.charCodeAt(ie);if(se<48||se>57)return!0}return X.length===10&&X>=Math.pow(2,32)}function D(X){return Object.keys(X).filter(I).concat(s(X).filter(Object.prototype.propertyIsEnumerable.bind(X)))}function z(X,ie){if(X===ie)return 0;for(var se=X.length,ae=ie.length,ue=0,ve=Math.min(se,ae);ue<ve;++ue)if(X[ue]!==ie[ue]){se=X[ue],ae=ie[ue];break}return se<ae?-1:ae<se?1:0}var V=0,O=1,j=2,Y=3;function B(X,ie,se,ae){if(X===ie)return X!==0||!se||f(X,ie);if(se){if(k(X)!=="object")return typeof X=="number"&&t(X)&&t(ie);if(k(ie)!=="object"||X===null||ie===null||Object.getPrototypeOf(X)!==Object.getPrototypeOf(ie))return!1}else{if(X===null||k(X)!=="object")return(ie===null||k(ie)!=="object")&&X==ie;if(ie===null||k(ie)!=="object")return!1}var ue,ve,ye,pe,de=o(X);if(de!==o(ie))return!1;if(Array.isArray(X)){if(X.length!==ie.length)return!1;var me=D(X),ke=D(ie);return me.length===ke.length&&q(X,ie,se,ae,O,me)}if(de==="[object Object]"&&(!x(X)&&x(ie)||!g(X)&&g(ie)))return!1;if(u(X)){if(!u(ie)||Date.prototype.getTime.call(X)!==Date.prototype.getTime.call(ie))return!1}else if(p(X)){if(!p(ie)||(ye=X,pe=ie,!(a?ye.source===pe.source&&ye.flags===pe.flags:RegExp.prototype.toString.call(ye)===RegExp.prototype.toString.call(pe))))return!1}else if(m(X)||X instanceof Error){if(X.message!==ie.message||X.name!==ie.name)return!1}else{if(d(X)){if(se||!E(X)&&!P(X)){if(!function(oe,re){return oe.byteLength===re.byteLength&&z(new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength),new Uint8Array(re.buffer,re.byteOffset,re.byteLength))===0}(X,ie))return!1}else if(!function(oe,re){if(oe.byteLength!==re.byteLength)return!1;for(var fe=0;fe<oe.byteLength;fe++)if(oe[fe]!==re[fe])return!1;return!0}(X,ie))return!1;var Ce=D(X),ge=D(ie);return Ce.length===ge.length&&q(X,ie,se,ae,V,Ce)}if(g(X))return!(!g(ie)||X.size!==ie.size)&&q(X,ie,se,ae,j);if(x(X))return!(!x(ie)||X.size!==ie.size)&&q(X,ie,se,ae,Y);if(c(X)){if(ve=ie,(ue=X).byteLength!==ve.byteLength||z(new Uint8Array(ue),new Uint8Array(ve))!==0)return!1}else if(y(X)&&!function(oe,re){return v(oe)?v(re)&&f(Number.prototype.valueOf.call(oe),Number.prototype.valueOf.call(re)):_(oe)?_(re)&&String.prototype.valueOf.call(oe)===String.prototype.valueOf.call(re):h(oe)?h(re)&&Boolean.prototype.valueOf.call(oe)===Boolean.prototype.valueOf.call(re):S(oe)?S(re)&&BigInt.prototype.valueOf.call(oe)===BigInt.prototype.valueOf.call(re):A(re)&&Symbol.prototype.valueOf.call(oe)===Symbol.prototype.valueOf.call(re)}(X,ie))return!1}return q(X,ie,se,ae,V)}function U(X,ie){return ie.filter(function(se){return n(X,se)})}function q(X,ie,se,ae,ue,ve){if(arguments.length===5){ve=Object.keys(X);var ye=Object.keys(ie);if(ve.length!==ye.length)return!1}for(var pe=0;pe<ve.length;pe++)if(!r(ie,ve[pe]))return!1;if(se&&arguments.length===5){var de=s(X);if(de.length!==0){var me=0;for(pe=0;pe<de.length;pe++){var ke=de[pe];if(n(X,ke)){if(!n(ie,ke))return!1;ve.push(ke),me++}else if(n(ie,ke))return!1}var Ce=s(ie);if(de.length!==Ce.length&&U(ie,Ce).length!==me)return!1}else{var ge=s(ie);if(ge.length!==0&&U(ie,ge).length!==0)return!1}}if(ve.length===0&&(ue===V||ue===O&&X.length===0||X.size===0))return!0;if(ae===void 0)ae={val1:new Map,val2:new Map,position:0};else{var oe=ae.val1.get(X);if(oe!==void 0){var re=ae.val2.get(ie);if(re!==void 0)return oe===re}ae.position++}ae.val1.set(X,ae.position),ae.val2.set(ie,ae.position);var fe=function(Se,be,we,Me,Pe,De){var he=0;if(De===j){if(!function(Ee,Be,Ve,Ze){for(var it=null,at=w(Ee),gt=0;gt<at.length;gt++){var yt=at[gt];if(k(yt)==="object"&&yt!==null)it===null&&(it=new Set),it.add(yt);else if(!Be.has(yt)){if(Ve||!Q(Ee,Be,yt))return!1;it===null&&(it=new Set),it.add(yt)}}if(it!==null){for(var pt=w(Be),et=0;et<pt.length;et++){var $e=pt[et];if(k($e)==="object"&&$e!==null){if(!te(it,$e,Ve,Ze))return!1}else if(!Ve&&!Ee.has($e)&&!te(it,$e,Ve,Ze))return!1}return it.size===0}return!0}(Se,be,we,Pe))return!1}else if(De===Y){if(!function(Ee,Be,Ve,Ze){for(var it=null,at=b(Ee),gt=0;gt<at.length;gt++){var yt=T(at[gt],2),pt=yt[0],et=yt[1];if(k(pt)==="object"&&pt!==null)it===null&&(it=new Set),it.add(pt);else{var $e=Be.get(pt);if($e===void 0&&!Be.has(pt)||!B(et,$e,Ve,Ze)){if(Ve||!J(Ee,Be,pt,et,Ze))return!1;it===null&&(it=new Set),it.add(pt)}}}if(it!==null){for(var At=b(Be),Ot=0;Ot<At.length;Ot++){var Rt=T(At[Ot],2),Ct=(pt=Rt[0],Rt[1]);if(k(pt)==="object"&&pt!==null){if(!K(it,Ee,pt,Ct,Ve,Ze))return!1}else if(!(Ve||Ee.has(pt)&&B(Ee.get(pt),Ct,!1,Ze)||K(it,Ee,pt,Ct,!1,Ze)))return!1}return it.size===0}return!0}(Se,be,we,Pe))return!1}else if(De===O)for(;he<Se.length;he++){if(!r(Se,he)){if(r(be,he))return!1;for(var _e=Object.keys(Se);he<_e.length;he++){var Ae=_e[he];if(!r(be,Ae)||!B(Se[Ae],be[Ae],we,Pe))return!1}return _e.length===Object.keys(be).length}if(!r(be,he)||!B(Se[he],be[he],we,Pe))return!1}for(he=0;he<Me.length;he++){var Oe=Me[he];if(!B(Se[Oe],be[Oe],we,Pe))return!1}return!0}(X,ie,se,ve,ae,ue);return ae.val1.delete(X),ae.val2.delete(ie),fe}function te(X,ie,se,ae){for(var ue=w(X),ve=0;ve<ue.length;ve++){var ye=ue[ve];if(B(ie,ye,se,ae))return X.delete(ye),!0}return!1}function ee(X){switch(k(X)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":X=+X;case"number":if(t(X))return!1}return!0}function Q(X,ie,se){var ae=ee(se);return ae??(ie.has(ae)&&!X.has(ae))}function J(X,ie,se,ae,ue){var ve=ee(se);if(ve!=null)return ve;var ye=ie.get(ve);return!(ye===void 0&&!ie.has(ve)||!B(ae,ye,!1,ue))&&!X.has(ve)&&B(ae,ye,!1,ue)}function K(X,ie,se,ae,ue,ve){for(var ye=w(X),pe=0;pe<ye.length;pe++){var de=ye[pe];if(B(se,de,ue,ve)&&B(ae,ie.get(de),ue,ve))return X.delete(de),!0}return!1}F.exports={isDeepEqual:function(X,ie){return B(X,ie,!1)},isDeepStrictEqual:function(X,ie){return B(X,ie,!0)}}},83160:function(F,C,e){"use strict";e.r(C),e.d(C,{decode:function(){return b},encode:function(){return w}});for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),a=0;a<64;a++)k[T.charCodeAt(a)]=a;var w=function(f){var s,t=new Uint8Array(f),i=t.length,r="";for(s=0;s<i;s+=3)r+=T[t[s]>>2],r+=T[(3&t[s])<<4|t[s+1]>>4],r+=T[(15&t[s+1])<<2|t[s+2]>>6],r+=T[63&t[s+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},b=function(f){var s,t,i,r,n,o=.75*f.length,l=f.length,c=0;f[f.length-1]==="="&&(o--,f[f.length-2]==="="&&o--);var d=new ArrayBuffer(o),u=new Uint8Array(d);for(s=0;s<l;s+=4)t=k[f.charCodeAt(s)],i=k[f.charCodeAt(s+1)],r=k[f.charCodeAt(s+2)],n=k[f.charCodeAt(s+3)],u[c++]=t<<2|i>>4,u[c++]=(15&i)<<4|r>>2,u[c++]=(3&r)<<6|63&n;return d}},59968:function(F,C){"use strict";C.byteLength=function(s){var t=b(s),i=t[0],r=t[1];return 3*(i+r)/4-r},C.toByteArray=function(s){var t,i,r=b(s),n=r[0],o=r[1],l=new k(function(u,x,p){return 3*(x+p)/4-p}(0,n,o)),c=0,d=o>0?n-4:n;for(i=0;i<d;i+=4)t=T[s.charCodeAt(i)]<<18|T[s.charCodeAt(i+1)]<<12|T[s.charCodeAt(i+2)]<<6|T[s.charCodeAt(i+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return o===2&&(t=T[s.charCodeAt(i)]<<2|T[s.charCodeAt(i+1)]>>4,l[c++]=255&t),o===1&&(t=T[s.charCodeAt(i)]<<10|T[s.charCodeAt(i+1)]<<4|T[s.charCodeAt(i+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},C.fromByteArray=function(s){for(var t,i=s.length,r=i%3,n=[],o=16383,l=0,c=i-r;l<c;l+=o)n.push(f(s,l,l+o>c?c:l+o));return r===1?(t=s[i-1],n.push(e[t>>2]+e[t<<4&63]+"==")):r===2&&(t=(s[i-2]<<8)+s[i-1],n.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),n.join("")};for(var e=[],T=[],k=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0;w<64;++w)e[w]=a[w],T[a.charCodeAt(w)]=w;function b(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=s.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function f(s,t,i){for(var r,n,o=[],l=t;l<i;l+=3)r=(s[l]<<16&16711680)+(s[l+1]<<8&65280)+(255&s[l+2]),o.push(e[(n=r)>>18&63]+e[n>>12&63]+e[n>>6&63]+e[63&n]);return o.join("")}T[45]=62,T[95]=63},64928:function(F){"use strict";function C(b,f,s,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,f):o-f)>=0?(r=n,i=n-1):t=n+1}return r}function e(b,f,s,t,i){for(var r=i+1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,f):o-f)>0?(r=n,i=n-1):t=n+1}return r}function T(b,f,s,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,f):o-f)<0?(r=n,t=n+1):i=n-1}return r}function k(b,f,s,t,i){for(var r=t-1;t<=i;){var n=t+i>>>1,o=b[n];(s!==void 0?s(o,f):o-f)<=0?(r=n,t=n+1):i=n-1}return r}function a(b,f,s,t,i){for(;t<=i;){var r=t+i>>>1,n=b[r],o=s!==void 0?s(n,f):n-f;if(o===0)return r;o<=0?t=r+1:i=r-1}return-1}function w(b,f,s,t,i,r){return typeof s=="function"?r(b,f,s,t===void 0?0:0|t,i===void 0?b.length-1:0|i):r(b,f,void 0,s===void 0?0:0|s,t===void 0?b.length-1:0|t)}F.exports={ge:function(b,f,s,t,i){return w(b,f,s,t,i,C)},gt:function(b,f,s,t,i){return w(b,f,s,t,i,e)},lt:function(b,f,s,t,i){return w(b,f,s,t,i,T)},le:function(b,f,s,t,i){return w(b,f,s,t,i,k)},eq:function(b,f,s,t,i){return w(b,f,s,t,i,a)}}},308:function(F,C){"use strict";function e(k){var a=32;return(k&=-k)&&a--,65535&k&&(a-=16),16711935&k&&(a-=8),252645135&k&&(a-=4),858993459&k&&(a-=2),1431655765&k&&(a-=1),a}C.INT_BITS=32,C.INT_MAX=2147483647,C.INT_MIN=-2147483648,C.sign=function(k){return(k>0)-(k<0)},C.abs=function(k){var a=k>>31;return(k^a)-a},C.min=function(k,a){return a^(k^a)&-(k<a)},C.max=function(k,a){return k^(k^a)&-(k<a)},C.isPow2=function(k){return!(k&k-1||!k)},C.log2=function(k){var a,w;return a=(k>65535)<<4,a|=w=((k>>>=a)>255)<<3,a|=w=((k>>>=w)>15)<<2,(a|=w=((k>>>=w)>3)<<1)|(k>>>=w)>>1},C.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},C.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},C.countTrailingZeros=e,C.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},C.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},C.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var T=new Array(256);(function(k){for(var a=0;a<256;++a){var w=a,b=a,f=7;for(w>>>=1;w;w>>>=1)b<<=1,b|=1&w,--f;k[a]=b<<f&255}})(T),C.reverse=function(k){return T[255&k]<<24|T[k>>>8&255]<<16|T[k>>>16&255]<<8|T[k>>>24&255]},C.interleave2=function(k,a){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},C.deinterleave2=function(k,a){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>a&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},C.interleave3=function(k,a,w){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(w=1227133513&((w=3272356035&((w=251719695&((w=4278190335&((w&=1023)|w<<16))|w<<8))|w<<4))|w<<2))<<2},C.deinterleave3=function(k,a){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>a&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},C.nextCombination=function(k){var a=k|k-1;return a+1|(~a&-~a)-1>>>e(k)+1}},29620:function(F,C,e){"use strict";var T=e(32420);F.exports=function(b,f){f||(f={});var s,t,i,r,n,o,l,c,d,u,x,p=f.cutoff==null?.25:f.cutoff,g=f.radius==null?8:f.radius,m=f.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!f.width||!f.height)throw Error("For raw data width and height should be provided by options");s=f.width,t=f.height,r=b,o=f.stride?f.stride:Math.floor(b.length/s/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(l=(c=b).getContext("2d"),s=c.width,t=c.height,r=(d=l.getImageData(0,0,s,t)).data,o=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(l=b,s=(c=b.canvas).width,t=c.height,r=(d=l.getImageData(0,0,s,t)).data,o=4):window.ImageData&&b instanceof window.ImageData&&(d=b,s=b.width,t=b.height,r=d.data,o=4);if(i=Math.max(s,t),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*t),u=0,x=n.length;u<x;u++)r[u]=n[u*o+m]/255;else if(o!==1)throw Error("Raw data can have only 1 value per pixel");var y=Array(s*t),v=Array(s*t),_=Array(i),h=Array(i),S=Array(i+1),A=Array(i);for(u=0,x=s*t;u<x;u++){var E=r[u];y[u]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),v[u]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}a(y,s,t,_,h,A,S),a(v,s,t,_,h,A,S);var P=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(u=0,x=s*t;u<x;u++)P[u]=T(1-((y[u]-v[u])/g+p),0,1);return P};var k=1e20;function a(b,f,s,t,i,r,n){for(var o=0;o<f;o++){for(var l=0;l<s;l++)t[l]=b[l*f+o];for(w(t,i,r,n,s),l=0;l<s;l++)b[l*f+o]=i[l]}for(l=0;l<s;l++){for(o=0;o<f;o++)t[o]=b[l*f+o];for(w(t,i,r,n,f),o=0;o<f;o++)b[l*f+o]=Math.sqrt(i[o])}}function w(b,f,s,t,i){s[0]=0,t[0]=-k,t[1]=+k;for(var r=1,n=0;r<i;r++){for(var o=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);o<=t[n];)n--,o=(b[r]+r*r-(b[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,t[n]=o,t[n+1]=+k}for(r=0,n=0;r<i;r++){for(;t[n+1]<r;)n++;f[r]=(r-s[n])*(r-s[n])+b[s[n]]}}},99676:function(F,C,e){"use strict";var T=e(53664),k=e(57916),a=k(T("String.prototype.indexOf"));F.exports=function(w,b){var f=T(w,!!b);return typeof f=="function"&&a(w,".prototype.")>-1?k(f):f}},57916:function(F,C,e){"use strict";var T=e(8844),k=e(53664),a=e(14500),w=k("%TypeError%"),b=k("%Function.prototype.apply%"),f=k("%Function.prototype.call%"),s=k("%Reflect.apply%",!0)||T.call(f,b),t=k("%Object.defineProperty%",!0),i=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}F.exports=function(n){if(typeof n!="function")throw new w("a function is required");var o=s(T,f,arguments);return a(o,1+i(0,n.length-(arguments.length-1)),!0)};var r=function(){return s(T,b,arguments)};t?t(F.exports,"apply",{value:r}):F.exports.apply=r},32420:function(F){F.exports=function(C,e,T){return e<T?C<e?e:C>T?T:C:C<T?T:C>e?e:C}},3808:function(F,C,e){"use strict";var T=e(32420);function k(a,w){w==null&&(w=!0);var b=a[0],f=a[1],s=a[2],t=a[3];return t==null&&(t=w?1:255),w&&(b*=255,f*=255,s*=255,t*=255),16777216*(b=255&T(b,0,255))+((f=255&T(f,0,255))<<16)+((s=255&T(s,0,255))<<8)+(255&T(t,0,255))}F.exports=k,F.exports.to=k,F.exports.from=function(a,w){var b=(a=+a)>>>24,f=(16711680&a)>>>16,s=(65280&a)>>>8,t=255&a;return w===!1?[b,f,s,t]:[b/255,f/255,s/255,t/255]}},17592:function(F){"use strict";F.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(F,C,e){"use strict";var T=e(96824),k=e(32420),a=e(72512);F.exports=function(w,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var f=new(a(b))(4),s=b!=="uint8"&&b!=="uint8_clamped";return w.length&&typeof w!="string"||((w=T(w))[0]/=255,w[1]/=255,w[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(w)?(f[0]=w[0],f[1]=w[1],f[2]=w[2],f[3]=w[3]!=null?w[3]:255,s&&(f[0]/=255,f[1]/=255,f[2]/=255,f[3]/=255),f):(s?(f[0]=w[0],f[1]=w[1],f[2]=w[2],f[3]=w[3]!=null?w[3]:1):(f[0]=k(Math.floor(255*w[0]),0,255),f[1]=k(Math.floor(255*w[1]),0,255),f[2]=k(Math.floor(255*w[2]),0,255),f[3]=w[3]==null?255:k(Math.floor(255*w[3]),0,255)),f)}},96824:function(F,C,e){"use strict";var T=e(95532),k=e(53576),a=e(32420);F.exports=function(w){var b,f=T(w);return f.space?((b=Array(3))[0]=a(f.values[0],0,255),b[1]=a(f.values[1],0,255),b[2]=a(f.values[2],0,255),f.space[0]==="h"&&(b=k.rgb(b)),b.push(a(f.alpha,0,1)),b):[]}},95532:function(F,C,e){"use strict";var T=e(17592);F.exports=function(a){var w,b,f=[],s=1;if(typeof a=="string")if(a=a.toLowerCase(),T[a])f=T[a].slice(),b="rgb";else if(a==="transparent")s=0,b="rgb",f=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var t=a.slice(1);s=1,(n=t.length)<=4?(f=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],n===4&&(s=parseInt(t[3]+t[3],16)/255)):(f=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],n===8&&(s=parseInt(t[6]+t[7],16)/255)),f[0]||(f[0]=0),f[1]||(f[1]=0),f[2]||(f[2]=0),b="rgb"}else if(w=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var i=w[1],r=i==="rgb";b=t=i.replace(/a$/,"");var n=t==="cmyk"?4:t==="gray"?1:3;f=w[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(o,l){if(/%$/.test(o))return l===n?parseFloat(o)/100:t==="rgb"?255*parseFloat(o)/100:parseFloat(o);if(t[l]==="h"){if(/deg$/.test(o))return parseFloat(o);if(k[o]!==void 0)return k[o]}return parseFloat(o)}),i===t&&f.push(1),s=r||f[n]===void 0?1:f[n],f=f.slice(0,n)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(f=a.match(/([0-9]+)/g).map(function(o){return parseFloat(o)}),b=a.match(/([a-z])/gi).join("").toLowerCase());else isNaN(a)?Array.isArray(a)||a.length?(f=[a[0],a[1],a[2]],b="rgb",s=a.length===4?a[3]:1):a instanceof Object&&(a.r!=null||a.red!=null||a.R!=null?(b="rgb",f=[a.r||a.red||a.R||0,a.g||a.green||a.G||0,a.b||a.blue||a.B||0]):(b="hsl",f=[a.h||a.hue||a.H||0,a.s||a.saturation||a.S||0,a.l||a.lightness||a.L||a.b||a.brightness]),s=a.a||a.alpha||a.opacity||1,a.opacity!=null&&(s/=100)):(b="rgb",f=[a>>>16,(65280&a)>>>8,255&a]);return{space:b,values:f,alpha:s}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(F,C,e){"use strict";var T=e(19336);F.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var a,w,b,f,s,t=k[0]/360,i=k[1]/100,r=k[2]/100;if(i===0)return[s=255*r,s,s];a=2*r-(w=r<.5?r*(1+i):r+i-r*i),f=[0,0,0];for(var n=0;n<3;n++)(b=t+.3333333333333333*-(n-1))<0?b++:b>1&&b--,s=6*b<1?a+6*(w-a)*b:2*b<1?w:3*b<2?a+(w-a)*(.6666666666666666-b)*6:a,f[n]=255*s;return f}},T.hsl=function(k){var a,w,b=k[0]/255,f=k[1]/255,s=k[2]/255,t=Math.min(b,f,s),i=Math.max(b,f,s),r=i-t;return i===t?a=0:b===i?a=(f-s)/r:f===i?a=2+(s-b)/r:s===i&&(a=4+(b-f)/r),(a=Math.min(60*a,360))<0&&(a+=360),w=(t+i)/2,[a,100*(i===t?0:w<=.5?r/(i+t):r/(2-i-t)),100*w]}},19336:function(F){"use strict";F.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(F){F.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(F,C,e){"use strict";F.exports={parse:e(46416),stringify:e(49395)}},8744:function(F,C,e){"use strict";var T=e(30584);F.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||T.indexOf(k)!==-1}}},46416:function(F,C,e){"use strict";var T=e(92384),k=e(68194),a=e(3748),w=e(2904),b=e(47916),f=e(7294),s=e(39956),t=e(8744).isSize;F.exports=r;var i=r.cache={};function r(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(i[o])return i[o];if(o==="")throw new Error("Cannot parse an empty string.");if(a.indexOf(o)!==-1)return i[o]={system:o};for(var l,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=s(o,/\s+/);l=d.shift();){if(k.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(x){c[x]=l}),i[o]=c;if(b.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(f.indexOf(l)===-1){if(w.indexOf(l)===-1){if(t(l)){var u=s(l,"/");if(c.size=u[0],u[1]!=null?c.lineHeight=n(u[1]):d[0]==="/"&&(d.shift(),c.lineHeight=n(d.shift())),!d.length)throw new Error("Missing required font-family.");return c.family=s(d.join(" "),/\s*,\s*/).map(T),i[o]=c}throw new Error("Unknown or unsupported font token: "+l)}c.weight=l}else c.stretch=l;else c.variant=l;else c.style=l}throw new Error("Missing required font-size.")}function n(o){var l=parseFloat(o);return l.toString()===o?l:o}},49395:function(F,C,e){"use strict";var T=e(55616),k=e(8744).isSize,a=o(e(68194)),w=o(e(3748)),b=o(e(2904)),f=o(e(47916)),s=o(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(l,c){if(l&&!c[l]&&!a[l])throw Error("Unknown keyword `"+l+"`");return l}function o(l){for(var c={},d=0;d<l.length;d++)c[l[d]]=1;return c}F.exports=function(l){if((l=T(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&n(l.system,w),l.system;if(n(l.style,f),n(l.variant,t),n(l.weight,b),n(l.stretch,s),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!k)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=r),Array.isArray(l.family)&&(l.family.length||(l.family=[r]),l.family=l.family.map(function(d){return i[d]?d:'"'+d+'"'}).join(", "));var c=[];return c.push(l.style),l.variant!==l.style&&c.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&c.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&c.push(l.stretch),c.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),c.push(l.family),c.filter(Boolean).join(" ")}},27940:function(F,C,e){"use strict";var T,k=e(81680),a=e(18496),w=e(87396),b=e(95920),f=e(50868),s=e(84323),t=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty;T=function(n,o,l){var c,d=a(o)&&w(o.value);return delete(c=b(o)).writable,delete c.value,c.get=function(){return!l.overwriteDefinition&&r.call(this,n)?d:(o.value=t.call(d,l.resolveContext?l.resolveContext(this):this),i(this,n,o),this[n])},c},F.exports=function(n){var o=f(arguments[1]);return k(o.resolveContext)&&w(o.resolveContext),s(n,function(l,c){return T(c,l,o)})}},21092:function(F,C,e){"use strict";var T=e(81680),k=e(85488),a=e(38452),w=e(50868),b=e(71056),f=F.exports=function(s,t){var i,r,n,o,l;return arguments.length<2||typeof s!="string"?(o=t,t=s,s=null):o=arguments[2],T(s)?(i=b.call(s,"c"),r=b.call(s,"e"),n=b.call(s,"w")):(i=n=!0,r=!1),l={value:t,configurable:i,enumerable:r,writable:n},o?a(w(o),l):l};f.gs=function(s,t,i){var r,n,o,l;return typeof s!="string"?(o=i,i=t,t=s,s=null):o=arguments[3],T(t)?k(t)?T(i)?k(i)||(o=i,i=void 0):i=void 0:(o=t,t=i=void 0):t=void 0,T(s)?(r=b.call(s,"c"),n=b.call(s,"e")):(r=!0,n=!1),l={get:t,set:i,configurable:r,enumerable:n},o?a(w(o),l):l}},84706:function(F,C,e){"use strict";function T(o,l){return o<l?-1:o>l?1:o>=l?0:NaN}e.d(C,{XE:function(){return T},kv:function(){return b},mo:function(){return s},Uf:function(){return t},SY:function(){return i},ik:function(){return r},oh:function(){return n}}),(k=T).length===1&&(a=k,k=function(o,l){return T(a(o),l)});var k,a,w=Array.prototype;function b(o,l){var c,d,u=o.length,x=-1;if(l==null){for(;++x<u;)if((c=o[x])!=null&&c>=c)for(d=c;++x<u;)(c=o[x])!=null&&c>d&&(d=c)}else for(;++x<u;)if((c=l(o[x],x,o))!=null&&c>=c)for(d=c;++x<u;)(c=l(o[x],x,o))!=null&&c>d&&(d=c);return d}function f(o){return o===null?NaN:+o}function s(o,l){var c,d=o.length,u=d,x=-1,p=0;if(l==null)for(;++x<d;)isNaN(c=f(o[x]))?--u:p+=c;else for(;++x<d;)isNaN(c=f(l(o[x],x,o)))?--u:p+=c;if(u)return p/u}function t(o){for(var l,c,d,u=o.length,x=-1,p=0;++x<u;)p+=o[x].length;for(c=new Array(p);--u>=0;)for(l=(d=o[u]).length;--l>=0;)c[--p]=d[l];return c}function i(o,l){var c,d,u=o.length,x=-1;if(l==null){for(;++x<u;)if((c=o[x])!=null&&c>=c)for(d=c;++x<u;)(c=o[x])!=null&&d>c&&(d=c)}else for(;++x<u;)if((c=l(o[x],x,o))!=null&&c>=c)for(d=c;++x<u;)(c=l(o[x],x,o))!=null&&d>c&&(d=c);return d}function r(o,l,c){o=+o,l=+l,c=(u=arguments.length)<2?(l=o,o=0,1):u<3?1:+c;for(var d=-1,u=0|Math.max(0,Math.ceil((l-o)/c)),x=new Array(u);++d<u;)x[d]=o+d*c;return x}function n(o,l){var c,d=o.length,u=-1,x=0;if(l==null)for(;++u<d;)(c=+o[u])&&(x+=c);else for(;++u<d;)(c=+l(o[u],u,o))&&(x+=c);return x}w.slice,w.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(F,C,e){"use strict";e.d(C,{kH:function(){return w},UJ:function(){return b}});var T="$";function k(){}function a(o,l){var c=new k;if(o instanceof k)o.each(function(g,m){c.set(m,g)});else if(Array.isArray(o)){var d,u=-1,x=o.length;if(l==null)for(;++u<x;)c.set(u,o[u]);else for(;++u<x;)c.set(l(d=o[u],u,o),d)}else if(o)for(var p in o)c.set(p,o[p]);return c}k.prototype=a.prototype={constructor:k,has:function(o){return T+o in this},get:function(o){return this[T+o]},set:function(o,l){return this[T+o]=l,this},remove:function(o){var l=T+o;return l in this&&delete this[l]},clear:function(){for(var o in this)o[0]===T&&delete this[o]},keys:function(){var o=[];for(var l in this)l[0]===T&&o.push(l.slice(1));return o},values:function(){var o=[];for(var l in this)l[0]===T&&o.push(this[l]);return o},entries:function(){var o=[];for(var l in this)l[0]===T&&o.push({key:l.slice(1),value:this[l]});return o},size:function(){var o=0;for(var l in this)l[0]===T&&++o;return o},empty:function(){for(var o in this)if(o[0]===T)return!1;return!0},each:function(o){for(var l in this)l[0]===T&&o(this[l],l.slice(1),this)}};var w=a;function b(){var o,l,c,d=[],u=[];function x(g,m,y,v){if(m>=d.length)return o!=null&&g.sort(o),l!=null?l(g):g;for(var _,h,S,A=-1,E=g.length,P=d[m++],I=w(),D=y();++A<E;)(S=I.get(_=P(h=g[A])+""))?S.push(h):I.set(_,[h]);return I.each(function(z,V){v(D,V,x(z,m,y,v))}),D}function p(g,m){if(++m>d.length)return g;var y,v=u[m-1];return l!=null&&m>=d.length?y=g.entries():(y=[],g.each(function(_,h){y.push({key:h,values:p(_,m)})})),v!=null?y.sort(function(_,h){return v(_.key,h.key)}):y}return c={object:function(g){return x(g,0,f,s)},map:function(g){return x(g,0,t,i)},entries:function(g){return p(x(g,0,t,i),0)},key:function(g){return d.push(g),c},sortKeys:function(g){return u[d.length-1]=g,c},sortValues:function(g){return o=g,c},rollup:function(g){return l=g,c}}}function f(){return{}}function s(o,l,c){o[l]=c}function t(){return w()}function i(o,l,c){o.set(l,c)}function r(){}var n=w.prototype;r.prototype=(function(o,l){var c=new r;if(o instanceof r)o.each(function(x){c.add(x)});else if(o){var d=-1,u=o.length;if(l==null)for(;++d<u;)c.add(o[d]);else for(;++d<u;)c.add(l(o[d],d,o))}return c}).prototype={constructor:r,has:n.has,add:function(o){return this[T+(o+="")]=o,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49812:function(F,C,e){"use strict";function T(de,me){var ke;function Ce(){var ge,oe,re=ke.length,fe=0,Se=0;for(ge=0;ge<re;++ge)fe+=(oe=ke[ge]).x,Se+=oe.y;for(fe=fe/re-de,Se=Se/re-me,ge=0;ge<re;++ge)(oe=ke[ge]).x-=fe,oe.y-=Se}return de==null&&(de=0),me==null&&(me=0),Ce.initialize=function(ge){ke=ge},Ce.x=function(ge){return arguments.length?(de=+ge,Ce):de},Ce.y=function(ge){return arguments.length?(me=+ge,Ce):me},Ce}function k(de){return function(){return de}}function a(){return 1e-6*(Math.random()-.5)}function w(de,me,ke,Ce){if(isNaN(me)||isNaN(ke))return de;var ge,oe,re,fe,Se,be,we,Me,Pe,De=de._root,he={data:Ce},_e=de._x0,Ae=de._y0,Oe=de._x1,Ee=de._y1;if(!De)return de._root=he,de;for(;De.length;)if((be=me>=(oe=(_e+Oe)/2))?_e=oe:Oe=oe,(we=ke>=(re=(Ae+Ee)/2))?Ae=re:Ee=re,ge=De,!(De=De[Me=we<<1|be]))return ge[Me]=he,de;if(fe=+de._x.call(null,De.data),Se=+de._y.call(null,De.data),me===fe&&ke===Se)return he.next=De,ge?ge[Me]=he:de._root=he,de;do ge=ge?ge[Me]=new Array(4):de._root=new Array(4),(be=me>=(oe=(_e+Oe)/2))?_e=oe:Oe=oe,(we=ke>=(re=(Ae+Ee)/2))?Ae=re:Ee=re;while((Me=we<<1|be)==(Pe=(Se>=re)<<1|fe>=oe));return ge[Pe]=De,ge[Me]=he,de}function b(de,me,ke,Ce,ge){this.node=de,this.x0=me,this.y0=ke,this.x1=Ce,this.y1=ge}function f(de){return de[0]}function s(de){return de[1]}function t(de,me,ke){var Ce=new i(me??f,ke??s,NaN,NaN,NaN,NaN);return de==null?Ce:Ce.addAll(de)}function i(de,me,ke,Ce,ge,oe){this._x=de,this._y=me,this._x0=ke,this._y0=Ce,this._x1=ge,this._y1=oe,this._root=void 0}function r(de){for(var me={data:de.data},ke=me;de=de.next;)ke=ke.next={data:de.data};return me}e.r(C),e.d(C,{forceCenter:function(){return T},forceCollide:function(){return c},forceLink:function(){return p},forceManyBody:function(){return ue},forceRadial:function(){return ve},forceSimulation:function(){return ae},forceX:function(){return ye},forceY:function(){return pe}});var n=t.prototype=i.prototype;function o(de){return de.x+de.vx}function l(de){return de.y+de.vy}function c(de){var me,ke,Ce=1,ge=1;function oe(){for(var Se,be,we,Me,Pe,De,he,_e=me.length,Ae=0;Ae<ge;++Ae)for(be=t(me,o,l).visitAfter(re),Se=0;Se<_e;++Se)we=me[Se],De=ke[we.index],he=De*De,Me=we.x+we.vx,Pe=we.y+we.vy,be.visit(Oe);function Oe(Ee,Be,Ve,Ze,it){var at=Ee.data,gt=Ee.r,yt=De+gt;if(!at)return Be>Me+yt||Ze<Me-yt||Ve>Pe+yt||it<Pe-yt;if(at.index>we.index){var pt=Me-at.x-at.vx,et=Pe-at.y-at.vy,$e=pt*pt+et*et;$e<yt*yt&&(pt===0&&($e+=(pt=a())*pt),et===0&&($e+=(et=a())*et),$e=(yt-($e=Math.sqrt($e)))/$e*Ce,we.vx+=(pt*=$e)*(yt=(gt*=gt)/(he+gt)),we.vy+=(et*=$e)*yt,at.vx-=pt*(yt=1-yt),at.vy-=et*yt)}}}function re(Se){if(Se.data)return Se.r=ke[Se.data.index];for(var be=Se.r=0;be<4;++be)Se[be]&&Se[be].r>Se.r&&(Se.r=Se[be].r)}function fe(){if(me){var Se,be,we=me.length;for(ke=new Array(we),Se=0;Se<we;++Se)be=me[Se],ke[be.index]=+de(be,Se,me)}}return typeof de!="function"&&(de=k(de==null?1:+de)),oe.initialize=function(Se){me=Se,fe()},oe.iterations=function(Se){return arguments.length?(ge=+Se,oe):ge},oe.strength=function(Se){return arguments.length?(Ce=+Se,oe):Ce},oe.radius=function(Se){return arguments.length?(de=typeof Se=="function"?Se:k(+Se),fe(),oe):de},oe}n.copy=function(){var de,me,ke=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ce=this._root;if(!Ce)return ke;if(!Ce.length)return ke._root=r(Ce),ke;for(de=[{source:Ce,target:ke._root=new Array(4)}];Ce=de.pop();)for(var ge=0;ge<4;++ge)(me=Ce.source[ge])&&(me.length?de.push({source:me,target:Ce.target[ge]=new Array(4)}):Ce.target[ge]=r(me));return ke},n.add=function(de){var me=+this._x.call(null,de),ke=+this._y.call(null,de);return w(this.cover(me,ke),me,ke,de)},n.addAll=function(de){var me,ke,Ce,ge,oe=de.length,re=new Array(oe),fe=new Array(oe),Se=1/0,be=1/0,we=-1/0,Me=-1/0;for(ke=0;ke<oe;++ke)isNaN(Ce=+this._x.call(null,me=de[ke]))||isNaN(ge=+this._y.call(null,me))||(re[ke]=Ce,fe[ke]=ge,Ce<Se&&(Se=Ce),Ce>we&&(we=Ce),ge<be&&(be=ge),ge>Me&&(Me=ge));if(Se>we||be>Me)return this;for(this.cover(Se,be).cover(we,Me),ke=0;ke<oe;++ke)w(this,re[ke],fe[ke],de[ke]);return this},n.cover=function(de,me){if(isNaN(de=+de)||isNaN(me=+me))return this;var ke=this._x0,Ce=this._y0,ge=this._x1,oe=this._y1;if(isNaN(ke))ge=(ke=Math.floor(de))+1,oe=(Ce=Math.floor(me))+1;else{for(var re,fe,Se=ge-ke,be=this._root;ke>de||de>=ge||Ce>me||me>=oe;)switch(fe=(me<Ce)<<1|de<ke,(re=new Array(4))[fe]=be,be=re,Se*=2,fe){case 0:ge=ke+Se,oe=Ce+Se;break;case 1:ke=ge-Se,oe=Ce+Se;break;case 2:ge=ke+Se,Ce=oe-Se;break;case 3:ke=ge-Se,Ce=oe-Se}this._root&&this._root.length&&(this._root=be)}return this._x0=ke,this._y0=Ce,this._x1=ge,this._y1=oe,this},n.data=function(){var de=[];return this.visit(function(me){if(!me.length)do de.push(me.data);while(me=me.next)}),de},n.extent=function(de){return arguments.length?this.cover(+de[0][0],+de[0][1]).cover(+de[1][0],+de[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(de,me,ke){var Ce,ge,oe,re,fe,Se,be,we=this._x0,Me=this._y0,Pe=this._x1,De=this._y1,he=[],_e=this._root;for(_e&&he.push(new b(_e,we,Me,Pe,De)),ke==null?ke=1/0:(we=de-ke,Me=me-ke,Pe=de+ke,De=me+ke,ke*=ke);Se=he.pop();)if(!(!(_e=Se.node)||(ge=Se.x0)>Pe||(oe=Se.y0)>De||(re=Se.x1)<we||(fe=Se.y1)<Me))if(_e.length){var Ae=(ge+re)/2,Oe=(oe+fe)/2;he.push(new b(_e[3],Ae,Oe,re,fe),new b(_e[2],ge,Oe,Ae,fe),new b(_e[1],Ae,oe,re,Oe),new b(_e[0],ge,oe,Ae,Oe)),(be=(me>=Oe)<<1|de>=Ae)&&(Se=he[he.length-1],he[he.length-1]=he[he.length-1-be],he[he.length-1-be]=Se)}else{var Ee=de-+this._x.call(null,_e.data),Be=me-+this._y.call(null,_e.data),Ve=Ee*Ee+Be*Be;if(Ve<ke){var Ze=Math.sqrt(ke=Ve);we=de-Ze,Me=me-Ze,Pe=de+Ze,De=me+Ze,Ce=_e.data}}return Ce},n.remove=function(de){if(isNaN(oe=+this._x.call(null,de))||isNaN(re=+this._y.call(null,de)))return this;var me,ke,Ce,ge,oe,re,fe,Se,be,we,Me,Pe,De=this._root,he=this._x0,_e=this._y0,Ae=this._x1,Oe=this._y1;if(!De)return this;if(De.length)for(;;){if((be=oe>=(fe=(he+Ae)/2))?he=fe:Ae=fe,(we=re>=(Se=(_e+Oe)/2))?_e=Se:Oe=Se,me=De,!(De=De[Me=we<<1|be]))return this;if(!De.length)break;(me[Me+1&3]||me[Me+2&3]||me[Me+3&3])&&(ke=me,Pe=Me)}for(;De.data!==de;)if(Ce=De,!(De=De.next))return this;return(ge=De.next)&&delete De.next,Ce?(ge?Ce.next=ge:delete Ce.next,this):me?(ge?me[Me]=ge:delete me[Me],(De=me[0]||me[1]||me[2]||me[3])&&De===(me[3]||me[2]||me[1]||me[0])&&!De.length&&(ke?ke[Pe]=De:this._root=De),this):(this._root=ge,this)},n.removeAll=function(de){for(var me=0,ke=de.length;me<ke;++me)this.remove(de[me]);return this},n.root=function(){return this._root},n.size=function(){var de=0;return this.visit(function(me){if(!me.length)do++de;while(me=me.next)}),de},n.visit=function(de){var me,ke,Ce,ge,oe,re,fe=[],Se=this._root;for(Se&&fe.push(new b(Se,this._x0,this._y0,this._x1,this._y1));me=fe.pop();)if(!de(Se=me.node,Ce=me.x0,ge=me.y0,oe=me.x1,re=me.y1)&&Se.length){var be=(Ce+oe)/2,we=(ge+re)/2;(ke=Se[3])&&fe.push(new b(ke,be,we,oe,re)),(ke=Se[2])&&fe.push(new b(ke,Ce,we,be,re)),(ke=Se[1])&&fe.push(new b(ke,be,ge,oe,we)),(ke=Se[0])&&fe.push(new b(ke,Ce,ge,be,we))}return this},n.visitAfter=function(de){var me,ke=[],Ce=[];for(this._root&&ke.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));me=ke.pop();){var ge=me.node;if(ge.length){var oe,re=me.x0,fe=me.y0,Se=me.x1,be=me.y1,we=(re+Se)/2,Me=(fe+be)/2;(oe=ge[0])&&ke.push(new b(oe,re,fe,we,Me)),(oe=ge[1])&&ke.push(new b(oe,we,fe,Se,Me)),(oe=ge[2])&&ke.push(new b(oe,re,Me,we,be)),(oe=ge[3])&&ke.push(new b(oe,we,Me,Se,be))}Ce.push(me)}for(;me=Ce.pop();)de(me.node,me.x0,me.y0,me.x1,me.y1);return this},n.x=function(de){return arguments.length?(this._x=de,this):this._x},n.y=function(de){return arguments.length?(this._y=de,this):this._y};var d=e(34712);function u(de){return de.index}function x(de,me){var ke=de.get(me);if(!ke)throw new Error("missing: "+me);return ke}function p(de){var me,ke,Ce,ge,oe,re=u,fe=function(he){return 1/Math.min(ge[he.source.index],ge[he.target.index])},Se=k(30),be=1;function we(he){for(var _e=0,Ae=de.length;_e<be;++_e)for(var Oe,Ee,Be,Ve,Ze,it,at,gt=0;gt<Ae;++gt)Ee=(Oe=de[gt]).source,Ve=(Be=Oe.target).x+Be.vx-Ee.x-Ee.vx||a(),Ze=Be.y+Be.vy-Ee.y-Ee.vy||a(),Ve*=it=((it=Math.sqrt(Ve*Ve+Ze*Ze))-ke[gt])/it*he*me[gt],Ze*=it,Be.vx-=Ve*(at=oe[gt]),Be.vy-=Ze*at,Ee.vx+=Ve*(at=1-at),Ee.vy+=Ze*at}function Me(){if(Ce){var he,_e,Ae=Ce.length,Oe=de.length,Ee=(0,d.kH)(Ce,re);for(he=0,ge=new Array(Ae);he<Oe;++he)(_e=de[he]).index=he,typeof _e.source!="object"&&(_e.source=x(Ee,_e.source)),typeof _e.target!="object"&&(_e.target=x(Ee,_e.target)),ge[_e.source.index]=(ge[_e.source.index]||0)+1,ge[_e.target.index]=(ge[_e.target.index]||0)+1;for(he=0,oe=new Array(Oe);he<Oe;++he)_e=de[he],oe[he]=ge[_e.source.index]/(ge[_e.source.index]+ge[_e.target.index]);me=new Array(Oe),Pe(),ke=new Array(Oe),De()}}function Pe(){if(Ce)for(var he=0,_e=de.length;he<_e;++he)me[he]=+fe(de[he],he,de)}function De(){if(Ce)for(var he=0,_e=de.length;he<_e;++he)ke[he]=+Se(de[he],he,de)}return de==null&&(de=[]),we.initialize=function(he){Ce=he,Me()},we.links=function(he){return arguments.length?(de=he,Me(),we):de},we.id=function(he){return arguments.length?(re=he,we):re},we.iterations=function(he){return arguments.length?(be=+he,we):be},we.strength=function(he){return arguments.length?(fe=typeof he=="function"?he:k(+he),Pe(),we):fe},we.distance=function(he){return arguments.length?(Se=typeof he=="function"?he:k(+he),De(),we):Se},we}var g={value:function(){}};function m(){for(var de,me=0,ke=arguments.length,Ce={};me<ke;++me){if(!(de=arguments[me]+"")||de in Ce||/[\s.]/.test(de))throw new Error("illegal type: "+de);Ce[de]=[]}return new y(Ce)}function y(de){this._=de}function v(de,me){for(var ke,Ce=0,ge=de.length;Ce<ge;++Ce)if((ke=de[Ce]).name===me)return ke.value}function _(de,me,ke){for(var Ce=0,ge=de.length;Ce<ge;++Ce)if(de[Ce].name===me){de[Ce]=g,de=de.slice(0,Ce).concat(de.slice(Ce+1));break}return ke!=null&&de.push({name:me,value:ke}),de}y.prototype=m.prototype={constructor:y,on:function(de,me){var ke,Ce,ge=this._,oe=(Ce=ge,(de+"").trim().split(/^|\s+/).map(function(Se){var be="",we=Se.indexOf(".");if(we>=0&&(be=Se.slice(we+1),Se=Se.slice(0,we)),Se&&!Ce.hasOwnProperty(Se))throw new Error("unknown type: "+Se);return{type:Se,name:be}})),re=-1,fe=oe.length;if(!(arguments.length<2)){if(me!=null&&typeof me!="function")throw new Error("invalid callback: "+me);for(;++re<fe;)if(ke=(de=oe[re]).type)ge[ke]=_(ge[ke],de.name,me);else if(me==null)for(ke in ge)ge[ke]=_(ge[ke],de.name,null);return this}for(;++re<fe;)if((ke=(de=oe[re]).type)&&(ke=v(ge[ke],de.name)))return ke},copy:function(){var de={},me=this._;for(var ke in me)de[ke]=me[ke].slice();return new y(de)},call:function(de,me){if((ke=arguments.length-2)>0)for(var ke,Ce,ge=new Array(ke),oe=0;oe<ke;++oe)ge[oe]=arguments[oe+2];if(!this._.hasOwnProperty(de))throw new Error("unknown type: "+de);for(oe=0,ke=(Ce=this._[de]).length;oe<ke;++oe)Ce[oe].value.apply(me,ge)},apply:function(de,me,ke){if(!this._.hasOwnProperty(de))throw new Error("unknown type: "+de);for(var Ce=this._[de],ge=0,oe=Ce.length;ge<oe;++ge)Ce[ge].value.apply(me,ke)}};var h,S,A=m,E=0,P=0,I=0,D=1e3,z=0,V=0,O=0,j=typeof performance=="object"&&performance.now?performance:Date,Y=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(de){setTimeout(de,17)};function B(){return V||(Y(U),V=j.now()+O)}function U(){V=0}function q(){this._call=this._time=this._next=null}function te(de,me,ke){var Ce=new q;return Ce.restart(de,me,ke),Ce}function ee(){V=(z=j.now())+O,E=P=0;try{(function(){B(),++E;for(var de,me=h;me;)(de=V-me._time)>=0&&me._call.call(null,de),me=me._next;--E})()}finally{E=0,function(){for(var de,me,ke=h,Ce=1/0;ke;)ke._call?(Ce>ke._time&&(Ce=ke._time),de=ke,ke=ke._next):(me=ke._next,ke._next=null,ke=de?de._next=me:h=me);S=de,J(Ce)}(),V=0}}function Q(){var de=j.now(),me=de-z;me>D&&(O-=me,z=de)}function J(de){E||(P&&(P=clearTimeout(P)),de-V>24?(de<1/0&&(P=setTimeout(ee,de-j.now()-O)),I&&(I=clearInterval(I))):(I||(z=j.now(),I=setInterval(Q,D)),E=1,Y(ee)))}function K(de){return de.x}function X(de){return de.y}q.prototype=te.prototype={constructor:q,restart:function(de,me,ke){if(typeof de!="function")throw new TypeError("callback is not a function");ke=(ke==null?B():+ke)+(me==null?0:+me),this._next||S===this||(S?S._next=this:h=this,S=this),this._call=de,this._time=ke,J()},stop:function(){this._call&&(this._call=null,this._time=1/0,J())}};var ie=10,se=Math.PI*(3-Math.sqrt(5));function ae(de){var me,ke=1,Ce=.001,ge=1-Math.pow(Ce,1/300),oe=0,re=.6,fe=(0,d.kH)(),Se=te(we),be=A("tick","end");function we(){Me(),be.call("tick",me),ke<Ce&&(Se.stop(),be.call("end",me))}function Me(he){var _e,Ae,Oe=de.length;he===void 0&&(he=1);for(var Ee=0;Ee<he;++Ee)for(ke+=(oe-ke)*ge,fe.each(function(Be){Be(ke)}),_e=0;_e<Oe;++_e)(Ae=de[_e]).fx==null?Ae.x+=Ae.vx*=re:(Ae.x=Ae.fx,Ae.vx=0),Ae.fy==null?Ae.y+=Ae.vy*=re:(Ae.y=Ae.fy,Ae.vy=0);return me}function Pe(){for(var he,_e=0,Ae=de.length;_e<Ae;++_e){if((he=de[_e]).index=_e,he.fx!=null&&(he.x=he.fx),he.fy!=null&&(he.y=he.fy),isNaN(he.x)||isNaN(he.y)){var Oe=ie*Math.sqrt(_e),Ee=_e*se;he.x=Oe*Math.cos(Ee),he.y=Oe*Math.sin(Ee)}(isNaN(he.vx)||isNaN(he.vy))&&(he.vx=he.vy=0)}}function De(he){return he.initialize&&he.initialize(de),he}return de==null&&(de=[]),Pe(),me={tick:Me,restart:function(){return Se.restart(we),me},stop:function(){return Se.stop(),me},nodes:function(he){return arguments.length?(de=he,Pe(),fe.each(De),me):de},alpha:function(he){return arguments.length?(ke=+he,me):ke},alphaMin:function(he){return arguments.length?(Ce=+he,me):Ce},alphaDecay:function(he){return arguments.length?(ge=+he,me):+ge},alphaTarget:function(he){return arguments.length?(oe=+he,me):oe},velocityDecay:function(he){return arguments.length?(re=1-he,me):1-re},force:function(he,_e){return arguments.length>1?(_e==null?fe.remove(he):fe.set(he,De(_e)),me):fe.get(he)},find:function(he,_e,Ae){var Oe,Ee,Be,Ve,Ze,it=0,at=de.length;for(Ae==null?Ae=1/0:Ae*=Ae,it=0;it<at;++it)(Be=(Oe=he-(Ve=de[it]).x)*Oe+(Ee=_e-Ve.y)*Ee)<Ae&&(Ze=Ve,Ae=Be);return Ze},on:function(he,_e){return arguments.length>1?(be.on(he,_e),me):be.on(he)}}}function ue(){var de,me,ke,Ce,ge=k(-30),oe=1,re=1/0,fe=.81;function Se(Pe){var De,he=de.length,_e=t(de,K,X).visitAfter(we);for(ke=Pe,De=0;De<he;++De)me=de[De],_e.visit(Me)}function be(){if(de){var Pe,De,he=de.length;for(Ce=new Array(he),Pe=0;Pe<he;++Pe)De=de[Pe],Ce[De.index]=+ge(De,Pe,de)}}function we(Pe){var De,he,_e,Ae,Oe,Ee=0,Be=0;if(Pe.length){for(_e=Ae=Oe=0;Oe<4;++Oe)(De=Pe[Oe])&&(he=Math.abs(De.value))&&(Ee+=De.value,Be+=he,_e+=he*De.x,Ae+=he*De.y);Pe.x=_e/Be,Pe.y=Ae/Be}else{(De=Pe).x=De.data.x,De.y=De.data.y;do Ee+=Ce[De.data.index];while(De=De.next)}Pe.value=Ee}function Me(Pe,De,he,_e){if(!Pe.value)return!0;var Ae=Pe.x-me.x,Oe=Pe.y-me.y,Ee=_e-De,Be=Ae*Ae+Oe*Oe;if(Ee*Ee/fe<Be)return Be<re&&(Ae===0&&(Be+=(Ae=a())*Ae),Oe===0&&(Be+=(Oe=a())*Oe),Be<oe&&(Be=Math.sqrt(oe*Be)),me.vx+=Ae*Pe.value*ke/Be,me.vy+=Oe*Pe.value*ke/Be),!0;if(!(Pe.length||Be>=re)){(Pe.data!==me||Pe.next)&&(Ae===0&&(Be+=(Ae=a())*Ae),Oe===0&&(Be+=(Oe=a())*Oe),Be<oe&&(Be=Math.sqrt(oe*Be)));do Pe.data!==me&&(Ee=Ce[Pe.data.index]*ke/Be,me.vx+=Ae*Ee,me.vy+=Oe*Ee);while(Pe=Pe.next)}}return Se.initialize=function(Pe){de=Pe,be()},Se.strength=function(Pe){return arguments.length?(ge=typeof Pe=="function"?Pe:k(+Pe),be(),Se):ge},Se.distanceMin=function(Pe){return arguments.length?(oe=Pe*Pe,Se):Math.sqrt(oe)},Se.distanceMax=function(Pe){return arguments.length?(re=Pe*Pe,Se):Math.sqrt(re)},Se.theta=function(Pe){return arguments.length?(fe=Pe*Pe,Se):Math.sqrt(fe)},Se}function ve(de,me,ke){var Ce,ge,oe,re=k(.1);function fe(be){for(var we=0,Me=Ce.length;we<Me;++we){var Pe=Ce[we],De=Pe.x-me||1e-6,he=Pe.y-ke||1e-6,_e=Math.sqrt(De*De+he*he),Ae=(oe[we]-_e)*ge[we]*be/_e;Pe.vx+=De*Ae,Pe.vy+=he*Ae}}function Se(){if(Ce){var be,we=Ce.length;for(ge=new Array(we),oe=new Array(we),be=0;be<we;++be)oe[be]=+de(Ce[be],be,Ce),ge[be]=isNaN(oe[be])?0:+re(Ce[be],be,Ce)}}return typeof de!="function"&&(de=k(+de)),me==null&&(me=0),ke==null&&(ke=0),fe.initialize=function(be){Ce=be,Se()},fe.strength=function(be){return arguments.length?(re=typeof be=="function"?be:k(+be),Se(),fe):re},fe.radius=function(be){return arguments.length?(de=typeof be=="function"?be:k(+be),Se(),fe):de},fe.x=function(be){return arguments.length?(me=+be,fe):me},fe.y=function(be){return arguments.length?(ke=+be,fe):ke},fe}function ye(de){var me,ke,Ce,ge=k(.1);function oe(fe){for(var Se,be=0,we=me.length;be<we;++be)(Se=me[be]).vx+=(Ce[be]-Se.x)*ke[be]*fe}function re(){if(me){var fe,Se=me.length;for(ke=new Array(Se),Ce=new Array(Se),fe=0;fe<Se;++fe)ke[fe]=isNaN(Ce[fe]=+de(me[fe],fe,me))?0:+ge(me[fe],fe,me)}}return typeof de!="function"&&(de=k(de==null?0:+de)),oe.initialize=function(fe){me=fe,re()},oe.strength=function(fe){return arguments.length?(ge=typeof fe=="function"?fe:k(+fe),re(),oe):ge},oe.x=function(fe){return arguments.length?(de=typeof fe=="function"?fe:k(+fe),re(),oe):de},oe}function pe(de){var me,ke,Ce,ge=k(.1);function oe(fe){for(var Se,be=0,we=me.length;be<we;++be)(Se=me[be]).vy+=(Ce[be]-Se.y)*ke[be]*fe}function re(){if(me){var fe,Se=me.length;for(ke=new Array(Se),Ce=new Array(Se),fe=0;fe<Se;++fe)ke[fe]=isNaN(Ce[fe]=+de(me[fe],fe,me))?0:+ge(me[fe],fe,me)}}return typeof de!="function"&&(de=k(de==null?0:+de)),oe.initialize=function(fe){me=fe,re()},oe.strength=function(fe){return arguments.length?(ge=typeof fe=="function"?fe:k(+fe),re(),oe):ge},oe.y=function(fe){return arguments.length?(de=typeof fe=="function"?fe:k(+fe),re(),oe):de},oe}},57624:function(F,C,e){"use strict";function T(c,d){if((u=(c=d?c.toExponential(d-1):c.toExponential()).indexOf("e"))<0)return null;var u,x=c.slice(0,u);return[x.length>1?x[0]+x.slice(2):x,+c.slice(u+1)]}e.d(C,{E9:function(){return r},SO:function(){return l}});var k,a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w(c){if(!(d=a.exec(c)))throw new Error("invalid format: "+c);var d;return new b({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function b(c){this.fill=c.fill===void 0?" ":c.fill+"",this.align=c.align===void 0?">":c.align+"",this.sign=c.sign===void 0?"-":c.sign+"",this.symbol=c.symbol===void 0?"":c.symbol+"",this.zero=!!c.zero,this.width=c.width===void 0?void 0:+c.width,this.comma=!!c.comma,this.precision=c.precision===void 0?void 0:+c.precision,this.trim=!!c.trim,this.type=c.type===void 0?"":c.type+""}function f(c,d){var u=T(c,d);if(!u)return c+"";var x=u[0],p=u[1];return p<0?"0."+new Array(-p).join("0")+x:x.length>p+1?x.slice(0,p+1)+"."+x.slice(p+1):x+new Array(p-x.length+2).join("0")}w.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(c,d){return(100*c).toFixed(d)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,d){return c.toExponential(d)},f:function(c,d){return c.toFixed(d)},g:function(c,d){return c.toPrecision(d)},o:function(c){return Math.round(c).toString(8)},p:function(c,d){return f(100*c,d)},r:f,s:function(c,d){var u=T(c,d);if(!u)return c+"";var x=u[0],p=u[1],g=p-(k=3*Math.max(-8,Math.min(8,Math.floor(p/3))))+1,m=x.length;return g===m?x:g>m?x+new Array(g-m+1).join("0"):g>0?x.slice(0,g)+"."+x.slice(g):"0."+new Array(1-g).join("0")+T(c,Math.max(0,d+g-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function t(c){return c}var i,r,n=Array.prototype.map,o=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(c){var d,u,x=c.grouping===void 0||c.thousands===void 0?t:(d=n.call(c.grouping,Number),u=c.thousands+"",function(A,E){for(var P=A.length,I=[],D=0,z=d[0],V=0;P>0&&z>0&&(V+z+1>E&&(z=Math.max(1,E-V)),I.push(A.substring(P-=z,P+z)),!((V+=z+1)>E));)z=d[D=(D+1)%d.length];return I.reverse().join(u)}),p=c.currency===void 0?"":c.currency[0]+"",g=c.currency===void 0?"":c.currency[1]+"",m=c.decimal===void 0?".":c.decimal+"",y=c.numerals===void 0?t:function(A){return function(E){return E.replace(/[0-9]/g,function(P){return A[+P]})}}(n.call(c.numerals,String)),v=c.percent===void 0?"%":c.percent+"",_=c.minus===void 0?"-":c.minus+"",h=c.nan===void 0?"NaN":c.nan+"";function S(A){var E=(A=w(A)).fill,P=A.align,I=A.sign,D=A.symbol,z=A.zero,V=A.width,O=A.comma,j=A.precision,Y=A.trim,B=A.type;B==="n"?(O=!0,B="g"):s[B]||(j===void 0&&(j=12),Y=!0,B="g"),(z||E==="0"&&P==="=")&&(z=!0,E="0",P="=");var U=D==="$"?p:D==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",q=D==="$"?g:/[%p]/.test(B)?v:"",te=s[B],ee=/[defgprs%]/.test(B);function Q(J){var K,X,ie,se=U,ae=q;if(B==="c")ae=te(J)+ae,J="";else{var ue=(J=+J)<0||1/J<0;if(J=isNaN(J)?h:te(Math.abs(J),j),Y&&(J=function(pe){e:for(var de,me=pe.length,ke=1,Ce=-1;ke<me;++ke)switch(pe[ke]){case".":Ce=de=ke;break;case"0":Ce===0&&(Ce=ke),de=ke;break;default:if(!+pe[ke])break e;Ce>0&&(Ce=0)}return Ce>0?pe.slice(0,Ce)+pe.slice(de+1):pe}(J)),ue&&+J==0&&I!=="+"&&(ue=!1),se=(ue?I==="("?I:_:I==="-"||I==="("?"":I)+se,ae=(B==="s"?o[8+k/3]:"")+ae+(ue&&I==="("?")":""),ee){for(K=-1,X=J.length;++K<X;)if(48>(ie=J.charCodeAt(K))||ie>57){ae=(ie===46?m+J.slice(K+1):J.slice(K))+ae,J=J.slice(0,K);break}}}O&&!z&&(J=x(J,1/0));var ve=se.length+J.length+ae.length,ye=ve<V?new Array(V-ve+1).join(E):"";switch(O&&z&&(J=x(ye+J,ye.length?V-ae.length:1/0),ye=""),P){case"<":J=se+J+ae+ye;break;case"=":J=se+ye+J+ae;break;case"^":J=ye.slice(0,ve=ye.length>>1)+se+J+ae+ye.slice(ve);break;default:J=ye+se+J+ae}return y(J)}return j=j===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),Q.toString=function(){return A+""},Q}return{format:S,formatPrefix:function(A,E){var P,I=S(((A=w(A)).type="f",A)),D=3*Math.max(-8,Math.min(8,Math.floor((P=E,((P=T(Math.abs(P)))?P[1]:NaN)/3)))),z=Math.pow(10,-D),V=o[8+D/3];return function(O){return I(z*O)+V}}}}i=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=i.format,i.formatPrefix},87108:function(F,C,e){"use strict";e.r(C),e.d(C,{geoAiry:function(){return O},geoAiryRaw:function(){return V},geoAitoff:function(){return Y},geoAitoffRaw:function(){return j},geoArmadillo:function(){return U},geoArmadilloRaw:function(){return B},geoAugust:function(){return te},geoAugustRaw:function(){return q},geoBaker:function(){return K},geoBakerRaw:function(){return J},geoBerghaus:function(){return se},geoBerghausRaw:function(){return ie},geoBertin1953:function(){return ke},geoBertin1953Raw:function(){return me},geoBoggs:function(){return we},geoBoggsRaw:function(){return be},geoBonne:function(){return _e},geoBonneRaw:function(){return he},geoBottomley:function(){return Oe},geoBottomleyRaw:function(){return Ae},geoBromley:function(){return Be},geoBromleyRaw:function(){return Ee},geoChamberlin:function(){return $e},geoChamberlinAfrica:function(){return et},geoChamberlinRaw:function(){return yt},geoCollignon:function(){return Ot},geoCollignonRaw:function(){return At},geoCraig:function(){return Ct},geoCraigRaw:function(){return Rt},geoCraster:function(){return Ne},geoCrasterRaw:function(){return Xe},geoCylindricalEqualArea:function(){return ot},geoCylindricalEqualAreaRaw:function(){return Ye},geoCylindricalStereographic:function(){return ze},geoCylindricalStereographicRaw:function(){return nt},geoEckert1:function(){return rt},geoEckert1Raw:function(){return Fe},geoEckert2:function(){return ft},geoEckert2Raw:function(){return We},geoEckert3:function(){return vt},geoEckert3Raw:function(){return mt},geoEckert4:function(){return Mt},geoEckert4Raw:function(){return ut},geoEckert5:function(){return St},geoEckert5Raw:function(){return bt},geoEckert6:function(){return Dt},geoEckert6Raw:function(){return Pt},geoEisenlohr:function(){return an},geoEisenlohrRaw:function(){return Xt},geoFahey:function(){return jt},geoFaheyRaw:function(){return Zt},geoFoucaut:function(){return Tn},geoFoucautRaw:function(){return Pn},geoFoucautSinusoidal:function(){return Qt},geoFoucautSinusoidalRaw:function(){return mn},geoGilbert:function(){return wn},geoGingery:function(){return jn},geoGingeryRaw:function(){return Cn},geoGinzburg4:function(){return Yn},geoGinzburg4Raw:function(){return Qn},geoGinzburg5:function(){return Kn},geoGinzburg5Raw:function(){return ar},geoGinzburg6:function(){return en},geoGinzburg6Raw:function(){return mr},geoGinzburg8:function(){return En},geoGinzburg8Raw:function(){return rn},geoGinzburg9:function(){return Dn},geoGinzburg9Raw:function(){return gn},geoGringorten:function(){return Jn},geoGringortenQuincuncial:function(){return Na},geoGringortenRaw:function(){return Vn},geoGuyou:function(){return Lt},geoGuyouRaw:function(){return vn},geoHammer:function(){return ye},geoHammerRaw:function(){return ue},geoHammerRetroazimuthal:function(){return dn},geoHammerRetroazimuthalRaw:function(){return $t},geoHealpix:function(){return zn},geoHealpixRaw:function(){return tn},geoHill:function(){return rr},geoHillRaw:function(){return Un},geoHomolosine:function(){return Mr},geoHomolosineRaw:function(){return gr},geoHufnagel:function(){return cr},geoHufnagelRaw:function(){return br},geoHyperelliptical:function(){return Ai},geoHyperellipticalRaw:function(){return Hr},geoInterrupt:function(){return Ti},geoInterruptedBoggs:function(){return Ba},geoInterruptedHomolosine:function(){return fa},geoInterruptedMollweide:function(){return oa},geoInterruptedMollweideHemispheres:function(){return fs},geoInterruptedQuarticAuthalic:function(){return $c},geoInterruptedSinuMollweide:function(){return Do},geoInterruptedSinusoidal:function(){return hs},geoKavrayskiy7:function(){return xo},geoKavrayskiy7Raw:function(){return lo},geoLagrange:function(){return bi},geoLagrangeRaw:function(){return bo},geoLarrivee:function(){return Ro},geoLarriveeRaw:function(){return Ko},geoLaskowski:function(){return ds},geoLaskowskiRaw:function(){return _o},geoLittrow:function(){return ps},geoLittrowRaw:function(){return zo},geoLoximuthal:function(){return ms},geoLoximuthalRaw:function(){return Jo},geoMiller:function(){return fc},geoMillerRaw:function(){return Fo},geoModifiedStereographic:function(){return Fs},geoModifiedStereographicAlaska:function(){return Zc},geoModifiedStereographicGs48:function(){return Kc},geoModifiedStereographicGs50:function(){return zs},geoModifiedStereographicLee:function(){return Zs},geoModifiedStereographicMiller:function(){return Bo},geoModifiedStereographicRaw:function(){return jl},geoMollweide:function(){return re},geoMollweideRaw:function(){return oe},geoMtFlatPolarParabolic:function(){return hc},geoMtFlatPolarParabolicRaw:function(){return wo},geoMtFlatPolarQuartic:function(){return $o},geoMtFlatPolarQuarticRaw:function(){return gs},geoMtFlatPolarSinusoidal:function(){return vs},geoMtFlatPolarSinusoidalRaw:function(){return Qo},geoNaturalEarth:function(){return ni.c},geoNaturalEarth2:function(){return Jc},geoNaturalEarth2Raw:function(){return Ks},geoNaturalEarthRaw:function(){return ni.g},geoNellHammer:function(){return Js},geoNellHammerRaw:function(){return Ul},geoNicolosi:function(){return Qc},geoNicolosiRaw:function(){return Vl},geoPatterson:function(){return Cc},geoPattersonRaw:function(){return Gl},geoPeirceQuincuncial:function(){return Gs},geoPierceQuincuncial:function(){return Gs},geoPolyconic:function(){return js},geoPolyconicRaw:function(){return Qs},geoPolyhedral:function(){return vi},geoPolyhedralButterfly:function(){return tl},geoPolyhedralCollignon:function(){return kl},geoPolyhedralWaterman:function(){return Al},geoProject:function(){return Ml},geoQuantize:function(){return ts},geoQuincuncial:function(){return ws},geoRectangularPolyconic:function(){return ho},geoRectangularPolyconicRaw:function(){return fo},geoRobinson:function(){return Lr},geoRobinsonRaw:function(){return Mo},geoSatellite:function(){return dc},geoSatelliteRaw:function(){return Sl},geoSinuMollweide:function(){return tr},geoSinuMollweideRaw:function(){return or},geoSinusoidal:function(){return De},geoSinusoidalRaw:function(){return Pe},geoStitch:function(){return _a},geoTimes:function(){return Uo},geoTimesRaw:function(){return ja},geoTwoPointAzimuthal:function(){return Va},geoTwoPointAzimuthalRaw:function(){return rl},geoTwoPointAzimuthalUsa:function(){return il},geoTwoPointEquidistant:function(){return Ws},geoTwoPointEquidistantRaw:function(){return ai},geoTwoPointEquidistantUsa:function(){return Vo},geoVanDerGrinten:function(){return al},geoVanDerGrinten2:function(){return Eo},geoVanDerGrinten2Raw:function(){return ol},geoVanDerGrinten3:function(){return Ys},geoVanDerGrinten3Raw:function(){return Ci},geoVanDerGrinten4:function(){return Ur},geoVanDerGrinten4Raw:function(){return Dr},geoVanDerGrintenRaw:function(){return Co},geoWagner:function(){return Ho},geoWagner4:function(){return Ec},geoWagner4Raw:function(){return yi},geoWagner6:function(){return _i},geoWagner6Raw:function(){return ro},geoWagner7:function(){return is},geoWagnerRaw:function(){return no},geoWiechel:function(){return Za},geoWiechelRaw:function(){return Pi},geoWinkel3:function(){return pc},geoWinkel3Raw:function(){return Ss}});var T=e(87952),k=Math.abs,a=Math.atan,w=Math.atan2,b=Math.cos,f=Math.exp,s=Math.floor,t=Math.log,i=Math.max,r=Math.min,n=Math.pow,o=Math.round,l=Math.sign||function(Ke){return Ke>0?1:Ke<0?-1:0},c=Math.sin,d=Math.tan,u=1e-6,x=1e-12,p=Math.PI,g=p/2,m=p/4,y=Math.SQRT1_2,v=I(2),_=I(p),h=2*p,S=180/p,A=p/180;function E(Ke){return Ke>1?g:Ke<-1?-g:Math.asin(Ke)}function P(Ke){return Ke>1?0:Ke<-1?p:Math.acos(Ke)}function I(Ke){return Ke>0?Math.sqrt(Ke):0}function D(Ke){return(f(Ke)-f(-Ke))/2}function z(Ke){return(f(Ke)+f(-Ke))/2}function V(Ke){var Qe=d(Ke/2),st=2*t(b(Ke/2))/(Qe*Qe);function N(W,G){var L=b(W),H=b(G),$=c(G),ne=H*L,ce=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+st/(1+ne));return[ce*H*c(W),ce*$]}return N.invert=function(W,G){var L,H=I(W*W+G*G),$=-Ke/2,ne=50;if(!H)return[0,0];do{var ce=$/2,xe=b(ce),Le=c(ce),Re=Le/xe,Ue=-t(k(xe));$-=L=(2/Re*Ue-st*Re-H)/(-Ue/(Le*Le)+1-st/(2*xe*xe))*(xe<0?.7:1)}while(k(L)>u&&--ne>0);var He=c($);return[w(W*He,H*b($)),E(G*He/H)]},N}function O(){var Ke=g,Qe=(0,T.U)(V),st=Qe(Ke);return st.radius=function(N){return arguments.length?Qe(Ke=N*A):Ke*S},st.scale(179.976).clipAngle(147)}function j(Ke,Qe){var st=b(Qe),N=function(W){return W?W/Math.sin(W):1}(P(st*b(Ke/=2)));return[2*st*c(Ke)*N,c(Qe)*N]}function Y(){return(0,T.c)(j).scale(152.63)}function B(Ke){var Qe=c(Ke),st=b(Ke),N=Ke>=0?1:-1,W=d(N*Ke),G=(1+Qe-st)/2;function L(H,$){var ne=b($),ce=b(H/=2);return[(1+ne)*c(H),(N*$>-w(ce,W)-.001?0:10*-N)+G+c($)*st-(1+ne)*Qe*ce]}return L.invert=function(H,$){var ne=0,ce=0,xe=50;do{var Le=b(ne),Re=c(ne),Ue=b(ce),He=c(ce),tt=1+Ue,ct=tt*Re-H,dt=G+He*st-tt*Qe*Le-$,wt=tt*Le/2,Et=-Re*He,kt=Qe*tt*Re/2,Bt=st*Ue+Qe*Le*He,It=Et*kt-Bt*wt,Kt=(dt*Et-ct*Bt)/It/2,qt=(ct*kt-dt*wt)/It;k(qt)>2&&(qt/=2),ne-=Kt,ce-=qt}while((k(Kt)>u||k(qt)>u)&&--xe>0);return N*ce>-w(b(ne),W)-.001?[2*ne,ce]:null},L}function U(){var Ke=20*A,Qe=Ke>=0?1:-1,st=d(Qe*Ke),N=(0,T.U)(B),W=N(Ke),G=W.stream;return W.parallel=function(L){return arguments.length?(st=d((Qe=(Ke=L*A)>=0?1:-1)*Ke),N(Ke)):Ke*S},W.stream=function(L){var H=W.rotate(),$=G(L),ne=(W.rotate([0,0]),G(L)),ce=W.precision();return W.rotate(H),$.sphere=function(){ne.polygonStart(),ne.lineStart();for(var xe=-180*Qe;Qe*xe<180;xe+=90*Qe)ne.point(xe,90*Qe);if(Ke)for(;Qe*(xe-=3*Qe*ce)>=-180;)ne.point(xe,Qe*-w(b(xe*A/2),st)*S);ne.lineEnd(),ne.polygonEnd()},$},W.scale(218.695).center([0,28.0974])}function q(Ke,Qe){var st=d(Qe/2),N=I(1-st*st),W=1+N*b(Ke/=2),G=c(Ke)*N/W,L=st/W,H=G*G,$=L*L;return[1.3333333333333333*G*(3+H-3*$),1.3333333333333333*L*(3+3*H-$)]}function te(){return(0,T.c)(q).scale(66.1603)}j.invert=function(Ke,Qe){if(!(Ke*Ke+4*Qe*Qe>p*p+u)){var st=Ke,N=Qe,W=25;do{var G,L=c(st),H=c(st/2),$=b(st/2),ne=c(N),ce=b(N),xe=c(2*N),Le=ne*ne,Re=ce*ce,Ue=H*H,He=1-Re*$*$,tt=He?P(ce*$)*I(G=1/He):G=0,ct=2*tt*ce*H-Ke,dt=tt*ne-Qe,wt=G*(Re*Ue+tt*ce*$*Le),Et=G*(.5*L*xe-2*tt*ne*H),kt=.25*G*(xe*H-tt*ne*Re*L),Bt=G*(Le*$+tt*Ue*ce),It=Et*kt-Bt*wt;if(!It)break;var Kt=(dt*Et-ct*Bt)/It,qt=(ct*kt-dt*wt)/It;st-=Kt,N-=qt}while((k(Kt)>u||k(qt)>u)&&--W>0);return[st,N]}},q.invert=function(Ke,Qe){if(Qe*=.375,!(Ke*=.375)&&k(Qe)>1)return null;var st=1+Ke*Ke+Qe*Qe,N=I((st-I(st*st-4*Qe*Qe))/2),W=E(N)/3,G=N?function(ne){return t(ne+I(ne*ne-1))}(k(Qe/N))/3:function(ne){return t(ne+I(ne*ne+1))}(k(Ke))/3,L=b(W),H=z(G),$=H*H-L*L;return[2*l(Ke)*w(D(G)*L,.25-$),2*l(Qe)*w(H*c(W),.25+$)]};var ee=I(8),Q=t(1+v);function J(Ke,Qe){var st=k(Qe);return st<m?[Ke,t(d(m+Qe/2))]:[Ke*b(st)*(2*v-1/c(st)),l(Qe)*(2*v*(st-m)-t(d(st/2)))]}function K(){return(0,T.c)(J).scale(112.314)}J.invert=function(Ke,Qe){if((N=k(Qe))<Q)return[Ke,2*a(f(Qe))-g];var st,N,W=m,G=25;do{var L=b(W/2),H=d(W/2);W-=st=(ee*(W-m)-t(H)-N)/(ee-L*L/(2*H))}while(k(st)>x&&--G>0);return[Ke/(b(W)*(ee-1/c(W))),l(Qe)*W]};var X=e(69020);function ie(Ke){var Qe=2*p/Ke;function st(N,W){var G=(0,X.O)(N,W);if(k(N)>g){var L=w(G[1],G[0]),H=I(G[0]*G[0]+G[1]*G[1]),$=Qe*o((L-g)/Qe)+g,ne=w(c(L-=$),2-b(L));L=$+E(p/H*c(ne))-ne,G[0]=H*b(L),G[1]=H*c(L)}return G}return st.invert=function(N,W){var G=I(N*N+W*W);if(G>g){var L=w(W,N),H=Qe*o((L-g)/Qe)+g,$=L>H?-1:1,ne=G*b(H-L),ce=1/d($*P((ne-p)/I(p*(p-2*ne)+G*G)));L=H+2*a((ce+$*I(ce*ce-3))/3),N=G*b(L),W=G*c(L)}return X.O.invert(N,W)},st}function se(){var Ke=5,Qe=(0,T.U)(ie),st=Qe(Ke),N=st.stream,W=.01,G=-b(W*A),L=c(W*A);return st.lobes=function(H){return arguments.length?Qe(Ke=+H):Ke},st.stream=function(H){var $=st.rotate(),ne=N(H),ce=(st.rotate([0,0]),N(H));return st.rotate($),ne.sphere=function(){ce.polygonStart(),ce.lineStart();for(var xe=0,Le=360/Ke,Re=2*p/Ke,Ue=90-180/Ke,He=g;xe<Ke;++xe,Ue-=Le,He-=Re)ce.point(w(L*b(He),G)*S,E(L*c(He))*S),Ue<-90?(ce.point(-90,-180-Ue-W),ce.point(-90,-180-Ue+W)):(ce.point(90,Ue+W),ce.point(90,Ue-W));ce.lineEnd(),ce.polygonEnd()},ne},st.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=e(54724);function ue(Ke,Qe){if(arguments.length<2&&(Qe=Ke),Qe===1)return ae.y;if(Qe===1/0)return ve;function st(N,W){var G=(0,ae.y)(N/Qe,W);return G[0]*=Ke,G}return st.invert=function(N,W){var G=ae.y.invert(N/Ke,W);return G[0]*=Qe,G},st}function ve(Ke,Qe){return[Ke*b(Qe)/b(Qe/=2),2*c(Qe)]}function ye(){var Ke=2,Qe=(0,T.U)(ue),st=Qe(Ke);return st.coefficient=function(N){return arguments.length?Qe(Ke=+N):Ke},st.scale(169.529)}function pe(Ke,Qe,st){var N,W,G,L=100;st=st===void 0?0:+st,Qe=+Qe;do(W=Ke(st))===(G=Ke(st+u))&&(G=W+u),st-=N=-1*u*(W-Qe)/(W-G);while(L-- >0&&k(N)>u);return L<0?NaN:st}function de(Ke,Qe,st){return Qe===void 0&&(Qe=40),st===void 0&&(st=x),function(N,W,G,L){var H,$,ne;G=G===void 0?0:+G,L=L===void 0?0:+L;for(var ce=0;ce<Qe;ce++){var xe=Ke(G,L),Le=xe[0]-N,Re=xe[1]-W;if(k(Le)<st&&k(Re)<st)break;var Ue=Le*Le+Re*Re;if(Ue>H)G-=$/=2,L-=ne/=2;else{H=Ue;var He=(G>0?-1:1)*st,tt=(L>0?-1:1)*st,ct=Ke(G+He,L),dt=Ke(G,L+tt),wt=(ct[0]-xe[0])/He,Et=(ct[1]-xe[1])/He,kt=(dt[0]-xe[0])/tt,Bt=(dt[1]-xe[1])/tt,It=Bt*wt-Et*kt,Kt=(k(It)<.5?.5:1)/It;if(G+=$=(Re*kt-Le*Bt)*Kt,L+=ne=(Le*Et-Re*wt)*Kt,k($)<st&&k(ne)<st)break}}return[G,L]}}function me(){var Ke=ue(1.68,2);function Qe(st,N){if(st+N<-1.4){var W=(st-N+1.6)*(st+N+1.4)/8;st+=W,N-=.8*W*c(N+p/2)}var G=Ke(st,N),L=(1-b(st*N))/12;return G[1]<0&&(G[0]*=1+L),G[1]>0&&(G[1]*=1+L/1.5*G[0]*G[0]),G}return Qe.invert=de(Qe),Qe}function ke(){return(0,T.c)(me()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ce(Ke,Qe){var st,N=Ke*c(Qe),W=30;do Qe-=st=(Qe+c(Qe)-N)/(1+b(Qe));while(k(st)>u&&--W>0);return Qe/2}function ge(Ke,Qe,st){function N(W,G){return[Ke*W*b(G=Ce(st,G)),Qe*c(G)]}return N.invert=function(W,G){return G=E(G/Qe),[W/(Ke*b(G)),E((2*G+c(2*G))/st)]},N}ve.invert=function(Ke,Qe){var st=2*E(Qe/2);return[Ke*b(st/2)/b(st),st]};var oe=ge(v/g,v,p);function re(){return(0,T.c)(oe).scale(169.529)}var fe=2.00276,Se=1.11072;function be(Ke,Qe){var st=Ce(p,Qe);return[fe*Ke/(1/b(Qe)+Se/b(st)),(Qe+v*c(st))/fe]}function we(){return(0,T.c)(be).scale(160.857)}function Me(Ke){var Qe=0,st=(0,T.U)(Ke),N=st(Qe);return N.parallel=function(W){return arguments.length?st(Qe=W*A):Qe*S},N}function Pe(Ke,Qe){return[Ke*b(Qe),Qe]}function De(){return(0,T.c)(Pe).scale(152.63)}function he(Ke){if(!Ke)return Pe;var Qe=1/d(Ke);function st(N,W){var G=Qe+Ke-W,L=G&&N*b(W)/G;return[G*c(L),Qe-G*b(L)]}return st.invert=function(N,W){var G=I(N*N+(W=Qe-W)*W),L=Qe+Ke-G;return[G/b(L)*w(N,W),L]},st}function _e(){return Me(he).scale(123.082).center([0,26.1441]).parallel(45)}function Ae(Ke){function Qe(st,N){var W=g-N,G=W&&st*Ke*c(W)/W;return[W*c(G)/Ke,g-W*b(G)]}return Qe.invert=function(st,N){var W=st*Ke,G=g-N,L=I(W*W+G*G),H=w(W,G);return[(L?L/c(L):1)*H/Ke,g-L]},Qe}function Oe(){var Ke=.5,Qe=(0,T.U)(Ae),st=Qe(Ke);return st.fraction=function(N){return arguments.length?Qe(Ke=+N):Ke},st.scale(158.837)}be.invert=function(Ke,Qe){var st,N,W=fe*Qe,G=Qe<0?-m:m,L=25;do N=W-v*c(G),G-=st=(c(2*G)+2*G-p*c(N))/(2*b(2*G)+2+p*b(N)*v*b(G));while(k(st)>u&&--L>0);return N=W-v*c(G),[Ke*(1/b(N)+Se/b(G))/fe,N]},Pe.invert=function(Ke,Qe){return[Ke/b(Qe),Qe]};var Ee=ge(1,4/p,p);function Be(){return(0,T.c)(Ee).scale(152.63)}var Ve=e(24052),Ze=e(92992);function it(Ke,Qe,st,N,W,G){var L,H=b(G);if(k(Ke)>1||k(G)>1)L=P(st*W+Qe*N*H);else{var $=c(Ke/2),ne=c(G/2);L=2*E(I($*$+Qe*N*ne*ne))}return k(L)>u?[L,w(N*c(G),Qe*W-st*N*H)]:[0,0]}function at(Ke,Qe,st){return P((Ke*Ke+Qe*Qe-st*st)/(2*Ke*Qe))}function gt(Ke){return Ke-2*p*s((Ke+p)/(2*p))}function yt(Ke,Qe,st){for(var N,W=[[Ke[0],Ke[1],c(Ke[1]),b(Ke[1])],[Qe[0],Qe[1],c(Qe[1]),b(Qe[1])],[st[0],st[1],c(st[1]),b(st[1])]],G=W[2],L=0;L<3;++L,G=N)N=W[L],G.v=it(N[1]-G[1],G[3],G[2],N[3],N[2],N[0]-G[0]),G.point=[0,0];var H=at(W[0].v[0],W[2].v[0],W[1].v[0]),$=at(W[0].v[0],W[1].v[0],W[2].v[0]),ne=p-H;W[2].point[1]=0,W[0].point[0]=-(W[1].point[0]=W[0].v[0]/2);var ce=[W[2].point[0]=W[0].point[0]+W[2].v[0]*b(H),2*(W[0].point[1]=W[1].point[1]=W[2].v[0]*c(H))];return function(xe,Le){var Re,Ue=c(Le),He=b(Le),tt=new Array(3);for(Re=0;Re<3;++Re){var ct=W[Re];if(tt[Re]=it(Le-ct[1],ct[3],ct[2],He,Ue,xe-ct[0]),!tt[Re][0])return ct.point;tt[Re][1]=gt(tt[Re][1]-ct.v[1])}var dt=ce.slice();for(Re=0;Re<3;++Re){var wt=Re==2?0:Re+1,Et=at(W[Re].v[0],tt[Re][0],tt[wt][0]);tt[Re][1]<0&&(Et=-Et),Re?Re==1?(Et=$-Et,dt[0]-=tt[Re][0]*b(Et),dt[1]-=tt[Re][0]*c(Et)):(Et=ne-Et,dt[0]+=tt[Re][0]*b(Et),dt[1]+=tt[Re][0]*c(Et)):(dt[0]+=tt[Re][0]*b(Et),dt[1]-=tt[Re][0]*c(Et))}return dt[0]/=3,dt[1]/=3,dt}}function pt(Ke){return Ke[0]*=A,Ke[1]*=A,Ke}function et(){return $e([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function $e(Ke,Qe,st){var N=(0,Ve.c)({type:"MultiPoint",coordinates:[Ke,Qe,st]}),W=[-N[0],-N[1]],G=(0,Ze.c)(W),L=yt(pt(G(Ke)),pt(G(Qe)),pt(G(st)));L.invert=de(L);var H=(0,T.c)(L).rotate(W),$=H.center;return delete H.rotate,H.center=function(ne){return arguments.length?$(G(ne)):G.invert($())},H.clipAngle(90)}function At(Ke,Qe){var st=I(1-c(Qe));return[2/_*Ke*st,_*(1-st)]}function Ot(){return(0,T.c)(At).scale(95.6464).center([0,30])}function Rt(Ke){var Qe=d(Ke);function st(N,W){return[N,(N?N/c(N):1)*(c(W)*b(N)-Qe*b(W))]}return st.invert=Qe?function(N,W){N&&(W*=c(N)/N);var G=b(N);return[N,2*w(I(G*G+Qe*Qe-W*W)-G,Qe-W)]}:function(N,W){return[N,E(N?W*d(N)/N:W)]},st}function Ct(){return Me(Rt).scale(249.828).clipAngle(90)}At.invert=function(Ke,Qe){var st=(st=Qe/_-1)*st;return[st>0?Ke*I(p/st)/2:0,E(1-st)]};var Ge=I(3);function Xe(Ke,Qe){return[Ge*Ke*(2*b(2*Qe/3)-1)/_,Ge*_*c(Qe/3)]}function Ne(){return(0,T.c)(Xe).scale(156.19)}function Ye(Ke){var Qe=b(Ke);function st(N,W){return[N*Qe,c(W)/Qe]}return st.invert=function(N,W){return[N/Qe,E(W*Qe)]},st}function ot(){return Me(Ye).parallel(38.58).scale(195.044)}function nt(Ke){var Qe=b(Ke);function st(N,W){return[N*Qe,(1+Qe)*d(W/2)]}return st.invert=function(N,W){return[N/Qe,2*a(W/(1+Qe))]},st}function ze(){return Me(nt).scale(124.75)}function Fe(Ke,Qe){var st=I(8/(3*p));return[st*Ke*(1-k(Qe)/p),st*Qe]}function rt(){return(0,T.c)(Fe).scale(165.664)}function We(Ke,Qe){var st=I(4-3*c(k(Qe)));return[2/I(6*p)*Ke*st,l(Qe)*I(2*p/3)*(2-st)]}function ft(){return(0,T.c)(We).scale(165.664)}function mt(Ke,Qe){var st=I(p*(4+p));return[2/st*Ke*(1+I(1-4*Qe*Qe/(p*p))),4/st*Qe]}function vt(){return(0,T.c)(mt).scale(180.739)}function ut(Ke,Qe){var st=(2+g)*c(Qe);Qe/=2;for(var N=0,W=1/0;N<10&&k(W)>u;N++){var G=b(Qe);Qe-=W=(Qe+c(Qe)*(G+2)-st)/(2*G*(1+G))}return[2/I(p*(4+p))*Ke*(1+b(Qe)),2*I(p/(4+p))*c(Qe)]}function Mt(){return(0,T.c)(ut).scale(180.739)}function bt(Ke,Qe){return[Ke*(1+b(Qe))/I(2+p),2*Qe/I(2+p)]}function St(){return(0,T.c)(bt).scale(173.044)}function Pt(Ke,Qe){for(var st=(1+g)*c(Qe),N=0,W=1/0;N<10&&k(W)>u;N++)Qe-=W=(Qe+c(Qe)-st)/(1+b(Qe));return st=I(2+p),[Ke*(1+b(Qe))/st,2*Qe/st]}function Dt(){return(0,T.c)(Pt).scale(173.044)}Xe.invert=function(Ke,Qe){var st=3*E(Qe/(Ge*_));return[_*Ke/(Ge*(2*b(2*st/3)-1)),st]},Fe.invert=function(Ke,Qe){var st=I(8/(3*p)),N=Qe/st;return[Ke/(st*(1-k(N)/p)),N]},We.invert=function(Ke,Qe){var st=2-k(Qe)/I(2*p/3);return[Ke*I(6*p)/(2*st),l(Qe)*E((4-st*st)/3)]},mt.invert=function(Ke,Qe){var st=I(p*(4+p))/2;return[Ke*st/(1+I(1-Qe*Qe*(4+p)/(4*p))),Qe*st/2]},ut.invert=function(Ke,Qe){var st=Qe*I((4+p)/p)/2,N=E(st),W=b(N);return[Ke/(2/I(p*(4+p))*(1+W)),E((N+st*(W+2))/(2+g))]},bt.invert=function(Ke,Qe){var st=I(2+p),N=Qe*st/2;return[st*Ke/(1+b(N)),N]},Pt.invert=function(Ke,Qe){var st=1+g,N=I(st/2);return[2*Ke*N/(1+b(Qe*=N)),E((Qe+c(Qe))/st)]};var Ft=3+2*v;function Xt(Ke,Qe){var st=c(Ke/=2),N=b(Ke),W=I(b(Qe)),G=b(Qe/=2),L=c(Qe)/(G+v*N*W),H=I(2/(1+L*L)),$=I((v*G+(N+st)*W)/(v*G+(N-st)*W));return[Ft*(H*($-1/$)-2*t($)),Ft*(H*L*($+1/$)-2*a(L))]}function an(){return(0,T.c)(Xt).scale(62.5271)}Xt.invert=function(Ke,Qe){if(!(st=q.invert(Ke/1.2,1.065*Qe)))return null;var st,N=st[0],W=st[1],G=20;Ke/=Ft,Qe/=Ft;do{var L=N/2,H=W/2,$=c(L),ne=b(L),ce=c(H),xe=b(H),Le=b(W),Re=I(Le),Ue=ce/(xe+v*ne*Re),He=Ue*Ue,tt=I(2/(1+He)),ct=(v*xe+(ne+$)*Re)/(v*xe+(ne-$)*Re),dt=I(ct),wt=dt-1/dt,Et=dt+1/dt,kt=tt*wt-2*t(dt)-Ke,Bt=tt*Ue*Et-2*a(Ue)-Qe,It=ce&&y*Re*$*He/ce,Kt=(v*ne*xe+Re)/(2*(xe+v*ne*Re)*(xe+v*ne*Re)*Re),qt=-.5*Ue*tt*tt*tt,Vt=qt*It,pn=qt*Kt,yn=(yn=2*xe+v*Re*(ne-$))*yn*dt,Sn=(v*ne*xe*Re+Le)/yn,On=-v*$*ce/(Re*yn),Hn=wt*Vt-2*Sn/dt+tt*(Sn+Sn/ct),sr=wt*pn-2*On/dt+tt*(On+On/ct),dr=Ue*Et*Vt-2*It/(1+He)+tt*Et*It+tt*Ue*(Sn-Sn/ct),Zn=Ue*Et*pn-2*Kt/(1+He)+tt*Et*Kt+tt*Ue*(On-On/ct),fr=sr*dr-Zn*Hn;if(!fr)break;var Ar=(Bt*sr-kt*Zn)/fr,Or=(kt*dr-Bt*Hn)/fr;N-=Ar,W=i(-g,r(g,W-Or))}while((k(Ar)>u||k(Or)>u)&&--G>0);return k(k(W)-g)<u?[0,W]:G&&[N,W]};var Ht=b(35*A);function Zt(Ke,Qe){var st=d(Qe/2);return[Ke*Ht*I(1-st*st),(1+Ht)*st]}function jt(){return(0,T.c)(Zt).scale(137.152)}function Pn(Ke,Qe){var st=Qe/2,N=b(st);return[2*Ke/_*b(Qe)*N*N,_*d(st)]}function Tn(){return(0,T.c)(Pn).scale(135.264)}function mn(Ke){var Qe=1-Ke,st=W(p,0)[0]-W(-p,0)[0],N=I(2*(W(0,g)[1]-W(0,-g)[1])/st);function W(H,$){var ne=b($),ce=c($);return[ne/(Qe+Ke*ne)*H,Qe*$+Ke*ce]}function G(H,$){var ne=W(H,$);return[ne[0]*N,ne[1]/N]}function L(H){return G(0,H)[1]}return G.invert=function(H,$){var ne=pe(L,$);return[H/N*(Ke+Qe/b(ne)),ne]},G}function Qt(){var Ke=.5,Qe=(0,T.U)(mn),st=Qe(Ke);return st.alpha=function(N){return arguments.length?Qe(Ke=+N):Ke},st.scale(168.725)}Zt.invert=function(Ke,Qe){var st=Qe/(1+Ht);return[Ke&&Ke/(Ht*I(1-st*st)),2*a(st)]},Pn.invert=function(Ke,Qe){var st=a(Qe/_),N=b(st),W=2*st;return[Ke*_/2/(b(W)*N*N),W]};var un=e(4888),nn=e(69604);function hn(Ke){return[Ke[0]/2,E(d(Ke[1]/2*A))*S]}function bn(Ke){return[2*Ke[0],2*a(c(Ke[1]*A))*S]}function wn(Ke){Ke==null&&(Ke=un.c);var Qe=Ke(),st=(0,nn.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function N(G){return Qe(hn(G))}function W(G){N[G]=function(){return arguments.length?(Qe[G].apply(Qe,arguments),N):Qe[G]()}}return Qe.invert&&(N.invert=function(G){return bn(Qe.invert(G))}),N.stream=function(G){var L=Qe.stream(G),H=st.stream({point:function($,ne){L.point($/2,E(d(-ne/2*A))*S)},lineStart:function(){L.lineStart()},lineEnd:function(){L.lineEnd()},polygonStart:function(){L.polygonStart()},polygonEnd:function(){L.polygonEnd()}});return H.sphere=L.sphere,H},N.rotate=function(G){return arguments.length?(st.rotate(G),N):st.rotate()},N.center=function(G){return arguments.length?(Qe.center(hn(G)),N):bn(Qe.center())},W("angle"),W("clipAngle"),W("clipExtent"),W("fitExtent"),W("fitHeight"),W("fitSize"),W("fitWidth"),W("scale"),W("translate"),W("precision"),N.scale(249.5)}function Cn(Ke,Qe){var st=2*p/Qe,N=Ke*Ke;function W(G,L){var H=(0,X.O)(G,L),$=H[0],ne=H[1],ce=$*$+ne*ne;if(ce>N){var xe=I(ce),Le=w(ne,$),Re=st*o(Le/st),Ue=Le-Re,He=Ke*b(Ue),tt=(Ke*c(Ue)-Ue*c(He))/(g-He),ct=Ln(Ue,tt),dt=(p-Ke)/Mn(ct,He,p);$=xe;var wt,Et=50;do $-=wt=(Ke+Mn(ct,He,$)*dt-xe)/(ct($)*dt);while(k(wt)>u&&--Et>0);ne=Ue*c($),$<g&&(ne-=tt*($-g));var kt=c(Re),Bt=b(Re);H[0]=$*Bt-ne*kt,H[1]=$*kt+ne*Bt}return H}return W.invert=function(G,L){var H=G*G+L*L;if(H>N){var $=I(H),ne=w(L,G),ce=st*o(ne/st),xe=ne-ce;G=$*b(xe),L=$*c(xe);for(var Le=G-g,Re=c(G),Ue=L/Re,He=G<g?1/0:0,tt=10;;){var ct=Ke*c(Ue),dt=Ke*b(Ue),wt=c(dt),Et=g-dt,kt=(ct-Ue*wt)/Et,Bt=Ln(Ue,kt);if(k(He)<x||!--tt)break;Ue-=He=(Ue*Re-kt*Le-L)/(Re-2*Le*(Et*(dt+Ue*ct*b(dt)-wt)-ct*(ct-Ue*wt))/(Et*Et))}G=($=Ke+Mn(Bt,dt,G)*(p-Ke)/Mn(Bt,dt,p))*b(ne=ce+Ue),L=$*c(ne)}return X.O.invert(G,L)},W}function Ln(Ke,Qe){return function(st){var N=Ke*b(st);return st<g&&(N-=Qe),I(1+N*N)}}function Mn(Ke,Qe,st){for(var N=(st-Qe)/50,W=Ke(Qe)+Ke(st),G=1,L=Qe;G<50;++G)W+=2*Ke(L+=N);return .5*W*N}function jn(){var Ke=6,Qe=30*A,st=b(Qe),N=c(Qe),W=(0,T.U)(Cn),G=W(Qe,Ke),L=G.stream,H=-b(.01*A),$=c(.01*A);return G.radius=function(ne){return arguments.length?(st=b(Qe=ne*A),N=c(Qe),W(Qe,Ke)):Qe*S},G.lobes=function(ne){return arguments.length?W(Qe,Ke=+ne):Ke},G.stream=function(ne){var ce=G.rotate(),xe=L(ne),Le=(G.rotate([0,0]),L(ne));return G.rotate(ce),xe.sphere=function(){Le.polygonStart(),Le.lineStart();for(var Re=0,Ue=2*p/Ke,He=0;Re<Ke;++Re,He-=Ue)Le.point(w($*b(He),H)*S,E($*c(He))*S),Le.point(w(N*b(He-Ue/2),st)*S,E(N*c(He-Ue/2))*S);Le.lineEnd(),Le.polygonEnd()},xe},G.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Rn(Ke,Qe,st,N,W,G,L,H){function $(ne,ce){if(!ce)return[Ke*ne/p,0];var xe=ce*ce,Le=Ke+xe*(Qe+xe*(st+xe*N)),Re=ce*(W-1+xe*(G-H+xe*L)),Ue=(Le*Le+Re*Re)/(2*Re),He=ne*E(Le/Ue)/p;return[Ue*c(He),ce*(1+xe*H)+Ue*(1-b(He))]}return arguments.length<8&&(H=0),$.invert=function(ne,ce){var xe,Le,Re=p*ne/Ke,Ue=ce,He=50;do{var tt=Ue*Ue,ct=Ke+tt*(Qe+tt*(st+tt*N)),dt=Ue*(W-1+tt*(G-H+tt*L)),wt=ct*ct+dt*dt,Et=2*dt,kt=wt/Et,Bt=kt*kt,It=E(ct/kt)/p,Kt=Re*It,qt=ct*ct,Vt=(2*Qe+tt*(4*st+6*tt*N))*Ue,pn=W+tt*(3*G+5*tt*L),yn=(2*(ct*Vt+dt*(pn-1))*Et-wt*(2*(pn-1)))/(Et*Et),Sn=b(Kt),On=c(Kt),Hn=kt*Sn,sr=kt*On,dr=Re/p*(1/I(1-qt/Bt))*(Vt*kt-ct*yn)/Bt,Zn=sr-ne,fr=Ue*(1+tt*H)+kt-Hn-ce,Ar=yn*On+Hn*dr,Or=Hn*It,ir=1+yn-(yn*Sn-sr*dr),ur=sr*It,Cr=Ar*ur-ir*Or;if(!Cr)break;Re-=xe=(fr*Ar-Zn*ir)/Cr,Ue-=Le=(Zn*ur-fr*Or)/Cr}while((k(xe)>u||k(Le)>u)&&--He>0);return[Re,Ue]},$}var Qn=Rn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Yn(){return(0,T.c)(Qn).scale(149.995)}var ar=Rn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Kn(){return(0,T.c)(ar).scale(153.93)}var mr=Rn(5/6*p,-.62636,-.0344,0,1.3493,-.05524,0,.045);function en(){return(0,T.c)(mr).scale(130.945)}function rn(Ke,Qe){var st=Ke*Ke,N=Qe*Qe;return[Ke*(1-.162388*N)*(.87-952426e-9*st*st),Qe*(1+N/12)]}function En(){return(0,T.c)(rn).scale(131.747)}rn.invert=function(Ke,Qe){var st,N=Ke,W=Qe,G=50;do{var L=W*W;W-=st=(W*(1+L/12)-Qe)/(1+L/4)}while(k(st)>u&&--G>0);G=50,Ke/=1-.162388*L;do{var H=(H=N*N)*H;N-=st=(N*(.87-952426e-9*H)-Ke)/(.87-.00476213*H)}while(k(st)>u&&--G>0);return[N,W]};var gn=Rn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Dn(){return(0,T.c)(gn).scale(131.087)}function qn(Ke){var Qe=Ke(g,0)[0]-Ke(-g,0)[0];function st(N,W){var G=N>0?-.5:.5,L=Ke(N+G*p,W);return L[0]-=G*Qe,L}return Ke.invert&&(st.invert=function(N,W){var G=N>0?-.5:.5,L=Ke.invert(N+G*Qe,W),H=L[0]-G*p;return H<-p?H+=2*p:H>p&&(H-=2*p),L[0]=H,L}),st}function Vn(Ke,Qe){var st=l(Ke),N=l(Qe),W=b(Qe),G=b(Ke)*W,L=c(Ke)*W,H=c(N*Qe);Ke=k(w(L,H)),Qe=E(G),k(Ke-g)>u&&(Ke%=g);var $=function(ne,ce){if(ce===g)return[0,0];var xe,Le,Re=c(ce),Ue=Re*Re,He=Ue*Ue,tt=1+He,ct=1+3*He,dt=1-He,wt=E(1/I(tt)),Et=dt+Ue*tt*wt,kt=(1-Re)/Et,Bt=I(kt),It=kt*tt,Kt=I(It),qt=Bt*dt;if(ne===0)return[0,-(qt+Ue*Kt)];var Vt,pn=b(ce),yn=1/pn,Sn=2*Re*pn,On=(-Et*pn-(1-Re)*((-3*Ue+wt*ct)*Sn))/(Et*Et),Hn=-yn*Sn,sr=-yn*(Ue*tt*On+kt*ct*Sn),dr=-2*yn*(dt*(.5*On/Bt)-2*Ue*Bt*Sn),Zn=4*ne/p;if(ne>.222*p||ce<p/4&&ne>.175*p){if(xe=(qt+Ue*I(It*(1+He)-qt*qt))/(1+He),ne>p/4)return[xe,xe];var fr=xe,Ar=.5*xe;xe=.5*(Ar+fr),Le=50;do{var Or=xe*(dr+Hn*I(It-xe*xe))+sr*E(xe/Kt)-Zn;if(!Or)break;Or<0?Ar=xe:fr=xe,xe=.5*(Ar+fr)}while(k(fr-Ar)>u&&--Le>0)}else{xe=u,Le=25;do{var ir=xe*xe,ur=I(It-ir),Cr=dr+Hn*ur,pr=xe*Cr+sr*E(xe/Kt)-Zn;xe-=Vt=ur?pr/(Cr+(sr-Hn*ir)/ur):0}while(k(Vt)>u&&--Le>0)}return[xe,-qt-Ue*I(It-xe*xe)]}(Ke>p/4?g-Ke:Ke,Qe);return Ke>p/4&&(H=$[0],$[0]=-$[1],$[1]=-H),$[0]*=st,$[1]*=-N,$}function Jn(){return(0,T.c)(qn(Vn)).scale(239.75)}function xr(Ke,Qe){var st,N,W,G,L,H;if(Qe<u)return[(G=c(Ke))-(st=Qe*(Ke-G*(N=b(Ke)))/4)*N,N+st*G,1-Qe*G*G/2,Ke-st];if(Qe>=1-u)return st=(1-Qe)/4,W=1/(N=z(Ke)),[(G=((H=f(2*(H=Ke)))-1)/(H+1))+st*((L=N*D(Ke))-Ke)/(N*N),W-st*G*W*(L-Ke),W+st*G*W*(L+Ke),2*a(f(Ke))-g+st*(L-Ke)/N];var $=[1,0,0,0,0,0,0,0,0],ne=[I(Qe),0,0,0,0,0,0,0,0],ce=0;for(N=I(1-Qe),L=1;k(ne[ce]/$[ce])>u&&ce<8;)st=$[ce++],ne[ce]=(st-N)/2,$[ce]=(st+N)/2,N=I(st*N),L*=2;W=L*$[ce]*Ke;do W=(E(G=ne[ce]*c(N=W)/$[ce])+W)/2;while(--ce);return[c(W),G=b(W),G/b(W-N),W]}function Jt(Ke,Qe){if(!Qe)return Ke;if(Qe===1)return t(d(Ke/2+m));for(var st=1,N=I(1-Qe),W=I(Qe),G=0;k(W)>u;G++){if(Ke%p){var L=a(N*d(Ke)/st);L<0&&(L+=p),Ke+=L+~~(Ke/p)*p}else Ke+=Ke;W=(st+N)/2,N=I(st*N),W=((st=W)-N)/2}return Ke/(n(2,G)*st)}function vn(Ke,Qe){var st=(v-1)/(v+1),N=I(1-st*st),W=Jt(g,N*N),G=t(d(p/4+k(Qe)/2)),L=f(-1*G)/I(st),H=function(ne,ce){var xe=ne*ne,Le=ce+1,Re=1-xe-ce*ce;return[.5*((ne>=0?g:-g)-w(Re,2*ne)),-.25*t(Re*Re+4*xe)+.5*t(Le*Le+xe)]}(L*b(-1*Ke),L*c(-1*Ke)),$=function(ne,ce,xe){var Le=k(ne),Re=D(k(ce));if(Le){var Ue=1/c(Le),He=1/(d(Le)*d(Le)),tt=-(He+xe*(Re*Re*Ue*Ue)-1+xe),ct=(-tt+I(tt*tt-(xe-1)*He*4))/2;return[Jt(a(1/I(ct)),xe)*l(ne),Jt(a(I((ct/He-1)/xe)),1-xe)*l(ce)]}return[0,Jt(a(Re),1-xe)*l(ce)]}(H[0],H[1],N*N);return[-$[1],(Qe>=0?1:-1)*(.5*W-$[0])]}function Lt(){return(0,T.c)(qn(vn)).scale(151.496)}Vn.invert=function(Ke,Qe){k(Ke)>1&&(Ke=2*l(Ke)-Ke),k(Qe)>1&&(Qe=2*l(Qe)-Qe);var st=l(Ke),N=l(Qe),W=-st*Ke,G=-N*Qe,L=G/W<1,H=function(xe,Le){for(var Re=0,Ue=1,He=.5,tt=50;;){var ct=He*He,dt=I(He),wt=E(1/I(1+ct)),Et=1-ct+He*(1+ct)*wt,kt=(1-dt)/Et,Bt=I(kt),It=kt*(1+ct),Kt=Bt*(1-ct),qt=I(It-xe*xe),Vt=Le+Kt+He*qt;if(k(Ue-Re)<x||--tt==0||Vt===0)break;Vt>0?Re=He:Ue=He,He=.5*(Re+Ue)}if(!tt)return null;var pn=E(dt),yn=b(pn),Sn=1/yn,On=2*dt*yn,Hn=(-Et*yn-(-3*He+wt*(1+3*ct))*On*(1-dt))/(Et*Et);return[p/4*(xe*(-2*Sn*((1-ct)*(.5*Hn/Bt)-2*He*Bt*On)+-Sn*On*qt)+-Sn*(He*(1+ct)*Hn+kt*(1+3*ct)*On)*E(xe/I(It))),pn]}(L?G:W,L?W:G),$=H[0],ne=H[1],ce=b(ne);return L&&($=-g-$),[st*(w(c($)*ce,-c(ne))+p),N*E(b($)*ce)]},vn.invert=function(Ke,Qe){var st,N,W,G,L,H,$=(v-1)/(v+1),ne=I(1-$*$),ce=(N=-Ke,W=ne*ne,(st=.5*Jt(g,ne*ne)-Qe)?(G=xr(st,W),N?(H=(L=xr(N,1-W))[1]*L[1]+W*G[0]*G[0]*L[0]*L[0],[[G[0]*L[2]/H,G[1]*G[2]*L[0]*L[1]/H],[G[1]*L[1]/H,-G[0]*G[2]*L[0]*L[2]/H],[G[2]*L[1]*L[2]/H,-W*G[0]*G[1]*L[0]/H]]):[[G[0],0],[G[1],0],[G[2],0]]):[[0,(L=xr(N,1-W))[0]/L[1]],[1/L[1],0],[L[2]/L[1],0]]),xe=function(Le,Re){var Ue=Re[0]*Re[0]+Re[1]*Re[1];return[(Le[0]*Re[0]+Le[1]*Re[1])/Ue,(Le[1]*Re[0]-Le[0]*Re[1])/Ue]}(ce[0],ce[1]);return[w(xe[1],xe[0])/-1,2*a(f(-.5*t($*xe[0]*xe[0]+$*xe[1]*xe[1])))-g]};var Nt=e(61780);function $t(Ke){var Qe=c(Ke),st=b(Ke),N=fn(Ke);function W(G,L){var H=N(G,L);G=H[0],L=H[1];var $=c(L),ne=b(L),ce=b(G),xe=P(Qe*$+st*ne*ce),Le=c(xe),Re=k(Le)>u?xe/Le:1;return[Re*st*c(G),(k(G)>g?Re:-Re)*(Qe*ne-st*$*ce)]}return N.invert=fn(-Ke),W.invert=function(G,L){var H=I(G*G+L*L),$=-c(H),ne=b(H),ce=H*ne,xe=-L*$,Le=H*Qe,Re=I(ce*ce+xe*xe-Le*Le),Ue=w(ce*Le+xe*Re,xe*Le-ce*Re),He=(H>g?-1:1)*w(G*$,H*b(Ue)*ne+L*c(Ue)*$);return N.invert(He,Ue)},W}function fn(Ke){var Qe=c(Ke),st=b(Ke);return function(N,W){var G=b(W),L=b(N)*G,H=c(N)*G,$=c(W);return[w(H,L*st-$*Qe),E($*st+L*Qe)]}}function dn(){var Ke=0,Qe=(0,T.U)($t),st=Qe(Ke),N=st.rotate,W=st.stream,G=(0,Nt.c)();return st.parallel=function(L){if(!arguments.length)return Ke*S;var H=st.rotate();return Qe(Ke=L*A).rotate(H)},st.rotate=function(L){return arguments.length?(N.call(st,[L[0],L[1]-Ke*S]),G.center([-L[0],-L[1]]),st):((L=N.call(st))[1]+=Ke*S,L)},st.stream=function(L){return(L=W(L)).sphere=function(){L.polygonStart();var H,$=G.radius(89.99)().coordinates[0],ne=$.length-1,ce=-1;for(L.lineStart();++ce<ne;)L.point((H=$[ce])[0],H[1]);for(L.lineEnd(),ne=($=G.radius(90.01)().coordinates[0]).length-1,L.lineStart();--ce>=0;)L.point((H=$[ce])[0],H[1]);L.lineEnd(),L.polygonEnd()},L},st.scale(79.4187).parallel(45).clipAngle(179.999)}var xn=e(84706),sn=e(16016),Yt=E(1-1/3)*S,Wt=Ye(0);function tn(Ke){var Qe=Yt*A,st=At(p,Qe)[0]-At(-p,Qe)[0],N=Wt(0,Qe)[1],W=At(0,Qe)[1],G=_-W,L=h/Ke,H=4/h,$=N+G*G*4/h;function ne(ce,xe){var Le,Re=k(xe);if(Re>Qe){var Ue=r(Ke-1,i(0,s((ce+p)/L)));(Le=At(ce+=p*(Ke-1)/Ke-Ue*L,Re))[0]=Le[0]*h/st-h*(Ke-1)/(2*Ke)+Ue*h/Ke,Le[1]=N+4*(Le[1]-W)*G/h,xe<0&&(Le[1]=-Le[1])}else Le=Wt(ce,xe);return Le[0]*=H,Le[1]/=$,Le}return ne.invert=function(ce,xe){ce/=H;var Le=k(xe*=$);if(Le>N){var Re=r(Ke-1,i(0,s((ce+p)/L)));ce=(ce+p*(Ke-1)/Ke-Re*L)*st/h;var Ue=At.invert(ce,.25*(Le-N)*h/G+W);return Ue[0]-=p*(Ke-1)/Ke-Re*L,xe<0&&(Ue[1]=-Ue[1]),Ue}return Wt.invert(ce,xe)},ne}function ln(Ke,Qe){return[Ke,1&Qe?90-u:Yt]}function An(Ke,Qe){return[Ke,1&Qe?-90+u:-Yt]}function In(Ke){return[Ke[0]*(1-u),Ke[1]]}function zn(){var Ke=4,Qe=(0,T.U)(tn),st=Qe(Ke),N=st.stream;return st.lobes=function(W){return arguments.length?Qe(Ke=+W):Ke},st.stream=function(W){var G=st.rotate(),L=N(W),H=(st.rotate([0,0]),N(W));return st.rotate(G),L.sphere=function(){var $,ne;(0,sn.c)(($=180/Ke,ne=[].concat((0,xn.ik)(-180,180+$/2,$).map(ln),(0,xn.ik)(180,-180-$/2,-$).map(An)),{type:"Polygon",coordinates:[$===180?ne.map(In):ne]}),H)},L},st.scale(239.75)}function Un(Ke){var Qe,st=1+Ke,N=E(c(1/st)),W=2*I(p/(Qe=p+4*N*st)),G=.5*W*(st+I(Ke*(2+Ke))),L=Ke*Ke,H=st*st;function $(ne,ce){var xe,Le,Re=1-c(ce);if(Re&&Re<2){var Ue,He=g-ce,tt=25;do{var ct=c(He),dt=b(He),wt=N+w(ct,st-dt),Et=1+H-2*st*dt;He-=Ue=(He-L*N-st*ct+Et*wt-.5*Re*Qe)/(2*st*ct*wt)}while(k(Ue)>x&&--tt>0);xe=W*I(Et),Le=ne*wt/p}else xe=W*(Ke+Re),Le=ne*N/p;return[xe*c(Le),G-xe*b(Le)]}return $.invert=function(ne,ce){var xe=ne*ne+(ce-=G)*ce,Le=(1+H-xe/(W*W))/(2*st),Re=P(Le),Ue=c(Re),He=N+w(Ue,st-Le);return[E(ne/I(xe))*p/He,E(1-2*(Re-L*N-st*Ue+(1+H-2*st*Le)*He)/Qe)]},$}function rr(){var Ke=1,Qe=(0,T.U)(Un),st=Qe(Ke);return st.ratio=function(N){return arguments.length?Qe(Ke=+N):Ke},st.scale(167.774).center([0,18.67])}var Xn=.7109889596207567,er=.0528035274542;function or(Ke,Qe){return Qe>-Xn?((Ke=oe(Ke,Qe))[1]+=er,Ke):Pe(Ke,Qe)}function tr(){return(0,T.c)(or).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function gr(Ke,Qe){return k(Qe)>Xn?((Ke=oe(Ke,Qe))[1]-=Qe>0?er:-er,Ke):Pe(Ke,Qe)}function Mr(){return(0,T.c)(gr).scale(152.63)}function br(Ke,Qe,st,N){var W=I(4*p/(2*st+(1+Ke-Qe/2)*c(2*st)+(Ke+Qe)/2*c(4*st)+Qe/2*c(6*st))),G=I(N*c(st)*I((1+Ke*b(2*st)+Qe*b(4*st))/(1+Ke+Qe))),L=st*$(1);function H(xe){return I(1+Ke*b(2*xe)+Qe*b(4*xe))}function $(xe){var Le=xe*st;return(2*Le+(1+Ke-Qe/2)*c(2*Le)+(Ke+Qe)/2*c(4*Le)+Qe/2*c(6*Le))/st}function ne(xe){return H(xe)*c(xe)}var ce=function(xe,Le){var Re=st*pe($,L*c(Le)/st,Le/p);isNaN(Re)&&(Re=st*l(Le));var Ue=W*H(Re);return[Ue*G*xe/p*b(Re),Ue/G*c(Re)]};return ce.invert=function(xe,Le){var Re=pe(ne,Le*G/W);return[xe*p/(b(Re)*W*G*H(Re)),E(st*$(Re/st)/L)]},st===0&&(W=I(N/p),(ce=function(xe,Le){return[xe*W,c(Le)/W]}).invert=function(xe,Le){return[xe/W,E(Le*W)]}),ce}function cr(){var Ke=1,Qe=0,st=45*A,N=2,W=(0,T.U)(br),G=W(Ke,Qe,st,N);return G.a=function(L){return arguments.length?W(Ke=+L,Qe,st,N):Ke},G.b=function(L){return arguments.length?W(Ke,Qe=+L,st,N):Qe},G.psiMax=function(L){return arguments.length?W(Ke,Qe,st=+L*A,N):st*S},G.ratio=function(L){return arguments.length?W(Ke,Qe,st,N=+L):N},G.scale(180.739)}function wr(Ke,Qe,st,N,W,G,L,H,$,ne,ce){if(ce.nanEncountered)return NaN;var xe,Le,Re,Ue,He,tt,ct,dt,wt,Et;if(Le=Ke(Qe+.25*(xe=st-Qe)),Re=Ke(st-.25*xe),isNaN(Le))ce.nanEncountered=!0;else{if(!isNaN(Re))return Et=((tt=(Ue=xe*(N+4*Le+W)/12)+(He=xe*(W+4*Re+G)/12))-L)/15,ne>$?(ce.maxDepthCount++,tt+Et):Math.abs(Et)<H?tt+Et:(dt=wr(Ke,Qe,ct=Qe+.5*xe,N,Le,W,Ue,.5*H,$,ne+1,ce),isNaN(dt)?(ce.nanEncountered=!0,NaN):(wt=wr(Ke,ct,st,W,Re,G,He,.5*H,$,ne+1,ce),isNaN(wt)?(ce.nanEncountered=!0,NaN):dt+wt));ce.nanEncountered=!0}}function Pr(Ke,Qe,st,N,W){N===void 0&&(N=1e-8),W===void 0&&(W=20);var G=Ke(Qe),L=Ke(.5*(Qe+st)),H=Ke(st);return wr(Ke,Qe,st,G,L,H,(G+4*L+H)*(st-Qe)/6,N,W,1,{maxDepthCount:0,nanEncountered:!1})}function Hr(Ke,Qe,st){function N(Re){return Ke+(1-Ke)*n(1-n(Re,Qe),1/Qe)}function W(Re){return Pr(N,0,Re,1e-4)}for(var G=1/W(1),L=1e3,H=1.00000001*G,$=[],ne=0;ne<=L;ne++)$.push(W(ne/L)*H);function ce(Re){var Ue=0,He=L,tt=500;do $[tt]>Re?He=tt:Ue=tt,tt=Ue+He>>1;while(tt>Ue);var ct=$[tt+1]-$[tt];return ct&&(ct=(Re-$[tt+1])/ct),(tt+1+ct)/L}var xe=2*ce(1)/p*G/st,Le=function(Re,Ue){var He=ce(k(c(Ue))),tt=N(He)*Re;return He/=xe,[tt,Ue>=0?He:-He]};return Le.invert=function(Re,Ue){var He;return k(Ue*=xe)<1&&(He=l(Ue)*E(W(k(Ue))*G)),[Re/N(k(Ue)),He]},Le}function Ai(){var Ke=0,Qe=2.5,st=1.183136,N=(0,T.U)(Hr),W=N(Ke,Qe,st);return W.alpha=function(G){return arguments.length?N(Ke=+G,Qe,st):Ke},W.k=function(G){return arguments.length?N(Ke,Qe=+G,st):Qe},W.gamma=function(G){return arguments.length?N(Ke,Qe,st=+G):st},W.scale(152.63)}function Mi(Ke,Qe){return k(Ke[0]-Qe[0])<u&&k(Ke[1]-Qe[1])<u}function ia(Ke,Qe){for(var st,N,W,G=-1,L=Ke.length,H=Ke[0],$=[];++G<L;){N=((st=Ke[G])[0]-H[0])/Qe,W=(st[1]-H[1])/Qe;for(var ne=0;ne<Qe;++ne)$.push([H[0]+ne*N,H[1]+ne*W]);H=st}return $.push(st),$}function Ti(Ke,Qe,st){var N,W;function G($,ne){for(var ce=ne<0?-1:1,xe=Qe[+(ne<0)],Le=0,Re=xe.length-1;Le<Re&&$>xe[Le][2][0];++Le);var Ue=Ke($-xe[Le][1][0],ne);return Ue[0]+=Ke(xe[Le][1][0],ce*ne>ce*xe[Le][0][1]?xe[Le][0][1]:ne)[0],Ue}st?G.invert=st(G):Ke.invert&&(G.invert=function($,ne){for(var ce=W[+(ne<0)],xe=Qe[+(ne<0)],Le=0,Re=ce.length;Le<Re;++Le){var Ue=ce[Le];if(Ue[0][0]<=$&&$<Ue[1][0]&&Ue[0][1]<=ne&&ne<Ue[1][1]){var He=Ke.invert($-Ke(xe[Le][1][0],0)[0],ne);return He[0]+=xe[Le][1][0],Mi(G(He[0],He[1]),[$,ne])?He:null}}});var L=(0,T.c)(G),H=L.stream;return L.stream=function($){var ne=L.rotate(),ce=H($),xe=(L.rotate([0,0]),H($));return L.rotate(ne),ce.sphere=function(){(0,sn.c)(N,xe)},ce},L.lobes=function($){return arguments.length?(N=function(ne){var ce,xe,Le,Re,Ue,He,tt,ct=[],dt=ne[0].length;for(tt=0;tt<dt;++tt)xe=(ce=ne[0][tt])[0][0],Le=ce[0][1],Re=ce[1][1],Ue=ce[2][0],He=ce[2][1],ct.push(ia([[xe+u,Le+u],[xe+u,Re-u],[Ue-u,Re-u],[Ue-u,He+u]],30));for(tt=ne[1].length-1;tt>=0;--tt)xe=(ce=ne[1][tt])[0][0],Le=ce[0][1],Re=ce[1][1],Ue=ce[2][0],He=ce[2][1],ct.push(ia([[Ue-u,He-u],[Ue-u,Re+u],[xe+u,Re+u],[xe+u,Le-u]],30));return{type:"Polygon",coordinates:[(0,xn.Uf)(ct)]}}($),Qe=$.map(function(ne){return ne.map(function(ce){return[[ce[0][0]*A,ce[0][1]*A],[ce[1][0]*A,ce[1][1]*A],[ce[2][0]*A,ce[2][1]*A]]})}),W=Qe.map(function(ne){return ne.map(function(ce){var xe,Le=Ke(ce[0][0],ce[0][1])[0],Re=Ke(ce[2][0],ce[2][1])[0],Ue=Ke(ce[1][0],ce[0][1])[1],He=Ke(ce[1][0],ce[1][1])[1];return Ue>He&&(xe=Ue,Ue=He,He=xe),[[Le,Ue],[Re,He]]})}),L):Qe.map(function(ne){return ne.map(function(ce){return[[ce[0][0]*S,ce[0][1]*S],[ce[1][0]*S,ce[1][1]*S],[ce[2][0]*S,ce[2][1]*S]]})})},Qe!=null&&L.lobes(Qe),L}or.invert=function(Ke,Qe){return Qe>-Xn?oe.invert(Ke,Qe-er):Pe.invert(Ke,Qe)},gr.invert=function(Ke,Qe){return k(Qe)>Xn?oe.invert(Ke,Qe+(Qe>0?er:-er)):Pe.invert(Ke,Qe)};var ji=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ba(){return Ti(be,ji).scale(160.857)}var Gr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function fa(){return Ti(gr,Gr).scale(152.63)}var so=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function oa(){return Ti(oe,so).scale(169.529)}var Zo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function fs(){return Ti(oe,Zo).scale(169.529).rotate([20,0])}var Aa=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Do(){return Ti(or,Aa,de).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Oo=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function hs(){return Ti(Pe,Oo).scale(152.63).rotate([-20,0])}function lo(Ke,Qe){return[3/h*Ke*I(p*p/3-Qe*Qe),Qe]}function xo(){return(0,T.c)(lo).scale(158.837)}function bo(Ke){function Qe(st,N){if(k(k(N)-g)<u)return[0,N<0?-2:2];var W=c(N),G=n((1+W)/(1-W),Ke/2),L=.5*(G+1/G)+b(st*=Ke);return[2*c(st)/L,(G-1/G)/L]}return Qe.invert=function(st,N){var W=k(N);if(k(W-2)<u)return st?null:[0,l(N)*g];if(W>2)return null;var G=(st/=2)*st,L=(N/=2)*N,H=2*N/(1+G+L);return H=n((1+H)/(1-H),1/Ke),[w(2*st,1-G-L)/Ke,E((H-1)/(H+1))]},Qe}function bi(){var Ke=.5,Qe=(0,T.U)(bo),st=Qe(Ke);return st.spacing=function(N){return arguments.length?Qe(Ke=+N):Ke},st.scale(124.75)}lo.invert=function(Ke,Qe){return[h/3*Ke/I(p*p/3-Qe*Qe),Qe]};var ha=p/v;function Ko(Ke,Qe){return[Ke*(1+I(b(Qe)))/2,Qe/(b(Qe/2)*b(Ke/6))]}function Ro(){return(0,T.c)(Ko).scale(97.2672)}function _o(Ke,Qe){var st=Ke*Ke,N=Qe*Qe;return[Ke*(.975534+N*(-.0143059*st-.119161+-.0547009*N)),Qe*(1.00384+st*(.0802894+-.02855*N+199025e-9*st)+N*(.0998909+-.0491032*N))]}function ds(){return(0,T.c)(_o).scale(139.98)}function zo(Ke,Qe){return[c(Ke)/b(Qe),d(Qe)*b(Ke)]}function ps(){return(0,T.c)(zo).scale(144.049).clipAngle(89.999)}function Jo(Ke){var Qe=b(Ke),st=d(m+Ke/2);function N(W,G){var L=G-Ke,H=k(L)<u?W*Qe:k(H=m+G/2)<u||k(k(H)-g)<u?0:W*L/t(d(H)/st);return[H,L]}return N.invert=function(W,G){var L,H=G+Ke;return[k(G)<u?W/Qe:k(L=m+H/2)<u||k(k(L)-g)<u?0:W*t(d(L)/st)/G,H]},N}function ms(){return Me(Jo).parallel(40).scale(158.837)}function Fo(Ke,Qe){return[Ke,1.25*t(d(m+.4*Qe))]}function fc(){return(0,T.c)(Fo).scale(108.318)}function jl(Ke){var Qe=Ke.length-1;function st(N,W){for(var G,L=b(W),H=2/(1+L*b(N)),$=H*L*c(N),ne=H*c(W),ce=Qe,xe=Ke[ce],Le=xe[0],Re=xe[1];--ce>=0;)Le=(xe=Ke[ce])[0]+$*(G=Le)-ne*Re,Re=xe[1]+$*Re+ne*G;return[Le=$*(G=Le)-ne*Re,Re=$*Re+ne*G]}return st.invert=function(N,W){var G=20,L=N,H=W;do{for(var $,ne=Qe,ce=Ke[ne],xe=ce[0],Le=ce[1],Re=0,Ue=0;--ne>=0;)Re=xe+L*($=Re)-H*Ue,Ue=Le+L*Ue+H*$,xe=(ce=Ke[ne])[0]+L*($=xe)-H*Le,Le=ce[1]+L*Le+H*$;var He,tt,ct=(Re=xe+L*($=Re)-H*Ue)*Re+(Ue=Le+L*Ue+H*$)*Ue;L-=He=((xe=L*($=xe)-H*Le-N)*Re+(Le=L*Le+H*$-W)*Ue)/ct,H-=tt=(Le*Re-xe*Ue)/ct}while(k(He)+k(tt)>u*u&&--G>0);if(G){var dt=I(L*L+H*H),wt=2*a(.5*dt),Et=c(wt);return[w(L*Et,dt*b(wt)),dt?E(H*Et/dt):0]}},st}Ko.invert=function(Ke,Qe){var st=k(Ke),N=k(Qe),W=u,G=g;N<ha?G*=N/ha:W+=6*P(ha/N);for(var L=0;L<25;L++){var H=c(G),$=I(b(G)),ne=c(G/2),ce=b(G/2),xe=c(W/6),Le=b(W/6),Re=.5*W*(1+$)-st,Ue=G/(ce*Le)-N,He=$?-.25*W*H/$:0,tt=.5*(1+$),ct=(1+.5*G*ne/ce)/(ce*Le),dt=G/ce*(xe/6)/(Le*Le),wt=He*dt-ct*tt,Et=(Re*dt-Ue*tt)/wt,kt=(Ue*He-Re*ct)/wt;if(G-=Et,W-=kt,k(Et)<u&&k(kt)<u)break}return[Ke<0?-W:W,Qe<0?-G:G]},_o.invert=function(Ke,Qe){var st=l(Ke)*p,N=Qe/2,W=50;do{var G=st*st,L=N*N,H=st*N,$=st*(.975534+L*(-.0143059*G-.119161+-.0547009*L))-Ke,ne=N*(1.00384+G*(.0802894+-.02855*L+199025e-9*G)+L*(.0998909+-.0491032*L))-Qe,ce=.975534-L*(.119161+3*G*.0143059+.0547009*L),xe=-H*(.238322+.2188036*L+.0286118*G),Le=H*(.1605788+7961e-7*G+-.0571*L),Re=1.00384+G*(.0802894+199025e-9*G)+L*(3*(.0998909-.02855*G)-.245516*L),Ue=xe*Le-Re*ce,He=(ne*xe-$*Re)/Ue,tt=($*Le-ne*ce)/Ue;st-=He,N-=tt}while((k(He)>u||k(tt)>u)&&--W>0);return W&&[st,N]},zo.invert=function(Ke,Qe){var st=Ke*Ke,N=Qe*Qe+1,W=st+N,G=Ke?y*I((W-I(W*W-4*st))/st):1/I(N);return[E(Ke*G),l(Qe)*P(G)]},Fo.invert=function(Ke,Qe){return[Ke,2.5*a(f(.8*Qe))-.625*p]};var Os=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Tc=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],kc=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Rs=[[.9245,0],[0,0],[.01943,0]],Ac=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Zc(){return Fs(Os,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Kc(){return Fs(Tc,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function zs(){return Fs(kc,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Bo(){return Fs(Rs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Zs(){return Fs(Ac,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Fs(Ke,Qe){var st=(0,T.c)(jl(Ke)).rotate(Qe).clipAngle(90),N=(0,Ze.c)(Qe),W=st.center;return delete st.rotate,st.center=function(G){return arguments.length?W(N(G)):N.invert(W())},st}var bl=I(6),Bs=I(7);function wo(Ke,Qe){var st=E(7*c(Qe)/(3*bl));return[bl*Ke*(2*b(2*st/3)-1)/Bs,9*c(st/3)/Bs]}function hc(){return(0,T.c)(wo).scale(164.859)}function gs(Ke,Qe){for(var st,N=(1+y)*c(Qe),W=Qe,G=0;G<25&&(W-=st=(c(W/2)+c(W)-N)/(.5*b(W/2)+b(W)),!(k(st)<u));G++);return[Ke*(1+2*b(W)/b(W/2))/(3*v),2*I(3)*c(W/2)/I(2+v)]}function $o(){return(0,T.c)(gs).scale(188.209)}function Qo(Ke,Qe){for(var st,N=I(6/(4+p)),W=(1+p/4)*c(Qe),G=Qe/2,L=0;L<25&&(G-=st=(G/2+c(G)-W)/(.5+b(G)),!(k(st)<u));L++);return[N*(.5+b(G))*Ke/1.5,N*G]}function vs(){return(0,T.c)(Qo).scale(166.518)}wo.invert=function(Ke,Qe){var st=3*E(Qe*Bs/9);return[Ke*Bs/(bl*(2*b(2*st/3)-1)),E(3*c(st)*bl/7)]},gs.invert=function(Ke,Qe){var st=Qe*I(2+v)/(2*I(3)),N=2*E(st);return[3*v*Ke/(1+2*b(N)/b(N/2)),E((st+c(N))/(1+y))]},Qo.invert=function(Ke,Qe){var st=I(6/(4+p)),N=Qe/st;return k(k(N)-g)<u&&(N=N<0?-g:g),[1.5*Ke/(st*(.5+b(N))),E((N/2+c(N))/(1+p/4))]};var ni=e(47984);function Ks(Ke,Qe){var st=Qe*Qe,N=st*st,W=st*N;return[Ke*(.84719-.13063*st+W*W*(.05494*st-.04515-.02326*N+.00331*W)),Qe*(1.01183+N*N*(.01926*st-.02625-.00396*N))]}function Jc(){return(0,T.c)(Ks).scale(175.295)}function Ul(Ke,Qe){return[Ke*(1+b(Qe))/2,2*(Qe-d(Qe/2))]}function Js(){return(0,T.c)(Ul).scale(152.63)}Ks.invert=function(Ke,Qe){var st,N,W,G,L=Qe,H=25;do L-=st=(L*(1.01183+(W=(N=L*L)*N)*W*(.01926*N-.02625-.00396*W))-Qe)/(1.01183+W*W*(.21186*N-.23625+-.05148*W));while(k(st)>x&&--H>0);return[Ke/(.84719-.13063*(N=L*L)+(G=N*(W=N*N))*G*(.05494*N-.04515-.02326*W+.00331*G)),L]},Ul.invert=function(Ke,Qe){for(var st=Qe/2,N=0,W=1/0;N<10&&k(W)>u;++N){var G=b(Qe/2);Qe-=W=(Qe-d(Qe/2)-st)/(1-.5/(G*G))}return[2*Ke/(1+b(Qe)),Qe]};var Mc=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function $c(){return Ti(ue(1/0),Mc).rotate([20,0]).scale(152.63)}function Vl(Ke,Qe){var st=c(Qe),N=b(Qe),W=l(Ke);if(Ke===0||k(Qe)===g)return[0,Qe];if(Qe===0)return[Ke,0];if(k(Ke)===g)return[Ke*N,g*st];var G=p/(2*Ke)-2*Ke/p,L=2*Qe/p,H=(1-L*L)/(st-L),$=G*G,ne=H*H,ce=1+$/ne,xe=1+ne/$,Le=(G*st/H-G/2)/ce,Re=(ne*st/$+H/2)/xe,Ue=Re*Re-(ne*st*st/$+H*st-1)/xe;return[g*(Le+I(Le*Le+N*N/ce)*W),g*(Re+I(Ue<0?0:Ue)*l(-Qe*G)*W)]}function Qc(){return(0,T.c)(Vl).scale(127.267)}Vl.invert=function(Ke,Qe){var st=(Ke/=g)*Ke,N=st+(Qe/=g)*Qe,W=p*p;return[Ke?(N-1+I((1-N)*(1-N)+4*st))/(2*Ke)*g:0,pe(function(G){return N*(p*c(G)-2*G)*p+4*G*G*(Qe-c(G))+2*p*G-W*Qe},0)]};var ys=1.0148,Ns=.23185,es=-.14499,To=.02406,$s=ys,Sc=5*Ns,_l=7*es,Hl=9*To,eo=1.790857183;function Gl(Ke,Qe){var st=Qe*Qe;return[Ke,Qe*(ys+st*st*(Ns+st*(es+To*st)))]}function Cc(){return(0,T.c)(Gl).scale(139.319)}function Qs(Ke,Qe){if(k(Qe)<u)return[Ke,0];var st=d(Qe),N=Ke*c(Qe);return[c(N)/st,Qe+(1-b(N))/st]}function js(){return(0,T.c)(Qs).scale(103.74)}Gl.invert=function(Ke,Qe){Qe>eo?Qe=eo:Qe<-1.790857183&&(Qe=-1.790857183);var st,N=Qe;do{var W=N*N;N-=st=(N*(ys+W*W*(Ns+W*(es+To*W)))-Qe)/($s+W*W*(Sc+W*(_l+Hl*W)))}while(k(st)>u);return[Ke,N]},Qs.invert=function(Ke,Qe){if(k(Qe)<u)return[Ke,0];var st,N=Ke*Ke+Qe*Qe,W=.5*Qe,G=10;do{var L=d(W),H=1/b(W),$=N-2*Qe*W+W*W;W-=st=(L*$+2*(W-Qe))/(2+$*H*H+2*(W-Qe)*L)}while(k(st)>u&&--G>0);return L=d(W),[(k(Qe)<k(W+1/L)?E(Ke*L):l(Qe)*l(Ke)*(P(k(Ke*L))+g))/c(W),W]};var el=e(13696),Us=e(27284);function Vs(Ke,Qe){return[Ke[0]*Qe[0]+Ke[1]*Qe[3],Ke[0]*Qe[1]+Ke[1]*Qe[4],Ke[0]*Qe[2]+Ke[1]*Qe[5]+Ke[2],Ke[3]*Qe[0]+Ke[4]*Qe[3],Ke[3]*Qe[1]+Ke[4]*Qe[4],Ke[3]*Qe[2]+Ke[4]*Qe[5]+Ke[5]]}function wl(Ke,Qe){return[Ke[0]-Qe[0],Ke[1]-Qe[1]]}function ql(Ke){return I(Ke[0]*Ke[0]+Ke[1]*Ke[1])}function vi(Ke,Qe,st){function N(H,$){var ne,ce=Qe(H,$),xe=ce.project([H*S,$*S]);return(ne=ce.transform)?[ne[0]*xe[0]+ne[1]*xe[1]+ne[2],-(ne[3]*xe[0]+ne[4]*xe[1]+ne[5])]:(xe[1]=-xe[1],xe)}function W(H,$){var ne=H.project.invert,ce=H.transform,xe=$;if(ce&&(ce=function(tt){var ct=1/(tt[0]*tt[4]-tt[1]*tt[3]);return[ct*tt[4],-ct*tt[1],ct*(tt[1]*tt[5]-tt[2]*tt[4]),-ct*tt[3],ct*tt[0],ct*(tt[2]*tt[3]-tt[0]*tt[5])]}(ce),xe=[ce[0]*xe[0]+ce[1]*xe[1]+ce[2],ce[3]*xe[0]+ce[4]*xe[1]+ce[5]]),ne&&H===function(tt){return Qe(tt[0]*A,tt[1]*A)}(Le=ne(xe)))return Le;for(var Le,Re=H.children,Ue=0,He=Re&&Re.length;Ue<He;++Ue)if(Le=W(Re[Ue],$))return Le}(function H($,ne){if($.edges=function(kt){for(var Bt=kt.length,It=[],Kt=kt[Bt-1],qt=0;qt<Bt;++qt)It.push([Kt,Kt=kt[qt]]);return It}($.face),ne.face){var ce=$.shared=function(kt,Bt){for(var It,Kt,qt=kt.length,Vt=null,pn=0;pn<qt;++pn){It=kt[pn];for(var yn=Bt.length;--yn>=0;)if(Kt=Bt[yn],It[0]===Kt[0]&&It[1]===Kt[1]){if(Vt)return[Vt,It];Vt=It}}}($.face,ne.face),xe=(He=ce.map(ne.project),tt=ce.map($.project),ct=wl(He[1],He[0]),dt=wl(tt[1],tt[0]),wt=function(kt,Bt){return w(kt[0]*Bt[1]-kt[1]*Bt[0],kt[0]*Bt[0]+kt[1]*Bt[1])}(ct,dt),Et=ql(ct)/ql(dt),Vs([1,0,He[0][0],0,1,He[0][1]],Vs([Et,0,0,0,Et,0],Vs([b(wt),c(wt),0,-c(wt),b(wt),0],[1,0,-tt[0][0],0,1,-tt[0][1]]))));$.transform=ne.transform?Vs(ne.transform,xe):xe;for(var Le=ne.edges,Re=0,Ue=Le.length;Re<Ue;++Re)Ma(ce[0],Le[Re][1])&&Ma(ce[1],Le[Re][0])&&(Le[Re]=$),Ma(ce[0],Le[Re][0])&&Ma(ce[1],Le[Re][1])&&(Le[Re]=$);for(Re=0,Ue=(Le=$.edges).length;Re<Ue;++Re)Ma(ce[0],Le[Re][0])&&Ma(ce[1],Le[Re][1])&&(Le[Re]=ne),Ma(ce[0],Le[Re][1])&&Ma(ce[1],Le[Re][0])&&(Le[Re]=ne)}else $.transform=ne.transform;var He,tt,ct,dt,wt,Et;return $.children&&$.children.forEach(function(kt){H(kt,$)}),$})(Ke,{transform:null}),ko(Ke)&&(N.invert=function(H,$){var ne=W(Ke,[H,-$]);return ne&&(ne[0]*=A,ne[1]*=A,ne)});var G=(0,T.c)(N),L=G.stream;return G.stream=function(H){var $=G.rotate(),ne=L(H),ce=(G.rotate([0,0]),L(H));return G.rotate($),ne.sphere=function(){ce.polygonStart(),ce.lineStart(),xs(ce,Ke),ce.lineEnd(),ce.polygonEnd()},ne},G.angle(st==null?-30:st*S)}function xs(Ke,Qe,st){var N,W,G=Qe.edges,L=G.length,H={type:"MultiPoint",coordinates:Qe.face},$=Qe.face.filter(function(He){return k(He[1])!==90}),ne=(0,el.c)({type:"MultiPoint",coordinates:$}),ce=!1,xe=-1,Le=ne[1][0]-ne[0][0],Re=Le===180||Le===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,Ve.c)(H);if(st)for(;++xe<L&&G[xe]!==st;);++xe;for(var Ue=0;Ue<L;++Ue)W=G[(Ue+xe)%L],Array.isArray(W)?(ce||(Ke.point((N=(0,Us.c)(W[0],Re)(u))[0],N[1]),ce=!0),Ke.point((N=(0,Us.c)(W[1],Re)(u))[0],N[1])):(ce=!1,W!==st&&xs(Ke,W,Qe))}function Ma(Ke,Qe){return Ke&&Qe&&Ke[0]===Qe[0]&&Ke[1]===Qe[1]}function ko(Ke){return Ke.project.invert||Ke.children&&Ke.children.some(ko)}var ci=e(53285),gi=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],to=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ke){return Ke.map(function(Qe){return gi[Qe]})});function tl(Ke){Ke=Ke||function(st){var N=(0,Ve.c)({type:"MultiPoint",coordinates:st});return(0,ci.c)().scale(1).translate([0,0]).rotate([-N[0],-N[1]])};var Qe=to.map(function(st){return{face:st,project:Ke(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,N){var W=Qe[st];W&&(W.children||(W.children=[])).push(Qe[N])}),vi(Qe[0],function(st,N){return Qe[st<-p/2?N<0?6:4:st<0?N<0?2:0:st<p/2?N<0?3:1:N<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Tl=2/I(3);function Wl(Ke,Qe){var st=At(Ke,Qe);return[st[0]*Tl,st[1]]}function kl(Ke){Ke=Ke||function(st){var N=(0,Ve.c)({type:"MultiPoint",coordinates:st});return(0,T.c)(Wl).translate([0,0]).scale(1).rotate(N[1]>0?[-N[0],0]:[180-N[0],180])};var Qe=to.map(function(st){return{face:st,project:Ke(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,N){var W=Qe[st];W&&(W.children||(W.children=[])).push(Qe[N])}),vi(Qe[0],function(st,N){return Qe[st<-p/2?N<0?6:4:st<0?N<0?2:0:st<p/2?N<0?3:1:N<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Al(Ke){Ke=Ke||function(G){var L=G.length===6?(0,Ve.c)({type:"MultiPoint",coordinates:G}):G[0];return(0,ci.c)().scale(1).translate([0,0]).rotate([-L[0],-L[1]])};var Qe=to.map(function(G){for(var L,H=G.map(_s),$=H.length,ne=H[$-1],ce=[],xe=0;xe<$;++xe)L=H[xe],ce.push(bs([.9486832980505138*ne[0]+.31622776601683794*L[0],.9486832980505138*ne[1]+.31622776601683794*L[1],.9486832980505138*ne[2]+.31622776601683794*L[2]]),bs([.9486832980505138*L[0]+.31622776601683794*ne[0],.9486832980505138*L[1]+.31622776601683794*ne[1],.9486832980505138*L[2]+.31622776601683794*ne[2]])),ne=L;return ce}),st=[],N=[-1,0,0,1,0,1,4,5];Qe.forEach(function(G,L){for(var H,$,ne=to[L],ce=ne.length,xe=st[L]=[],Le=0;Le<ce;++Le)Qe.push([ne[Le],G[(2*Le+2)%(2*ce)],G[(2*Le+1)%(2*ce)]]),N.push(L),xe.push((H=_s(G[(2*Le+2)%(2*ce)]),$=_s(G[(2*Le+1)%(2*ce)]),[H[1]*$[2]-H[2]*$[1],H[2]*$[0]-H[0]*$[2],H[0]*$[1]-H[1]*$[0]]))});var W=Qe.map(function(G){return{project:Ke(G),face:G}});return N.forEach(function(G,L){var H=W[G];H&&(H.children||(H.children=[])).push(W[L])}),vi(W[0],function(G,L){var H=b(L),$=[H*b(G),H*c(G),c(L)],ne=G<-p/2?L<0?6:4:G<0?L<0?2:0:G<p/2?L<0?3:1:L<0?7:5,ce=st[ne];return W[co(ce[0],$)<0?8+3*ne:co(ce[1],$)<0?8+3*ne+1:co(ce[2],$)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function co(Ke,Qe){for(var st=0,N=Ke.length,W=0;st<N;++st)W+=Ke[st]*Qe[st];return W}function bs(Ke){return[w(Ke[1],Ke[0])*S,E(i(-1,r(1,Ke[2])))*S]}function _s(Ke){var Qe=Ke[0]*A,st=Ke[1]*A,N=b(st);return[N*b(Qe),N*c(Qe),c(st)]}function Pa(){}function Ml(Ke,Qe){var st,N=Qe.stream;if(!N)throw new Error("invalid projection");switch(Ke&&Ke.type){case"Feature":st=da;break;case"FeatureCollection":st=uo;break;default:st=xa}return st(Ke,N)}function uo(Ke,Qe){return{type:"FeatureCollection",features:Ke.features.map(function(st){return da(st,Qe)})}}function da(Ke,Qe){return{type:"Feature",id:Ke.id,properties:Ke.properties,geometry:xa(Ke.geometry,Qe)}}function xa(Ke,Qe){if(!Ke)return null;if(Ke.type==="GeometryCollection")return function(N,W){return{type:"GeometryCollection",geometries:N.geometries.map(function(G){return xa(G,W)})}}(Ke,Qe);var st;switch(Ke.type){case"Point":case"MultiPoint":st=No;break;case"LineString":case"MultiLineString":st=Hs;break;case"Polygon":case"MultiPolygon":case"Sphere":st=Ao;break;default:return null}return(0,sn.c)(Ke,Qe(st)),st.result()}Wl.invert=function(Ke,Qe){return At.invert(Ke/Tl,Qe)};var ki=[],ba=[],No={point:function(Ke,Qe){ki.push([Ke,Qe])},result:function(){var Ke=ki.length?ki.length<2?{type:"Point",coordinates:ki[0]}:{type:"MultiPoint",coordinates:ki}:null;return ki=[],Ke}},Hs={lineStart:Pa,point:function(Ke,Qe){ki.push([Ke,Qe])},lineEnd:function(){ki.length&&(ba.push(ki),ki=[])},result:function(){var Ke=ba.length?ba.length<2?{type:"LineString",coordinates:ba[0]}:{type:"MultiLineString",coordinates:ba}:null;return ba=[],Ke}},Ao={polygonStart:Pa,lineStart:Pa,point:function(Ke,Qe){ki.push([Ke,Qe])},lineEnd:function(){var Ke=ki.length;if(Ke){do ki.push(ki[0].slice());while(++Ke<4);ba.push(ki),ki=[]}},polygonEnd:Pa,result:function(){if(!ba.length)return null;var Ke=[],Qe=[];return ba.forEach(function(st){(function(N){if((W=N.length)<4)return!1;for(var W,G=0,L=N[W-1][1]*N[0][0]-N[W-1][0]*N[0][1];++G<W;)L+=N[G-1][1]*N[G][0]-N[G-1][0]*N[G][1];return L<=0})(st)?Ke.push([st]):Qe.push(st)}),Qe.forEach(function(st){var N=st[0];Ke.some(function(W){if(function(G,L){for(var H=L[0],$=L[1],ne=!1,ce=0,xe=G.length,Le=xe-1;ce<xe;Le=ce++){var Re=G[ce],Ue=Re[0],He=Re[1],tt=G[Le],ct=tt[0],dt=tt[1];He>$^dt>$&&H<(ct-Ue)*($-He)/(dt-He)+Ue&&(ne=!ne)}return ne}(W[0],N))return W.push(st),!0})||Ke.push([st])}),ba=[],Ke.length?Ke.length>1?{type:"MultiPolygon",coordinates:Ke}:{type:"Polygon",coordinates:Ke[0]}:null}};function ws(Ke){var Qe=Ke(g,0)[0]-Ke(-g,0)[0];function st(N,W){var G=k(N)<g,L=Ke(G?N:N>0?N-p:N+p,W),H=(L[0]-L[1])*y,$=(L[0]+L[1])*y;if(G)return[H,$];var ne=Qe*y,ce=H>0^$>0?-1:1;return[ce*H-l($)*ne,ce*$-l(H)*ne]}return Ke.invert&&(st.invert=function(N,W){var G=(N+W)*y,L=(W-N)*y,H=k(G)<.5*Qe&&k(L)<.5*Qe;if(!H){var $=Qe*y,ne=G>0^L>0?-1:1,ce=-ne*N+(L>0?1:-1)*$,xe=-ne*W+(G>0?1:-1)*$;G=(-ce-xe)*y,L=(ce-xe)*y}var Le=Ke.invert(G,L);return H||(Le[0]+=G>0?p:-p),Le}),(0,T.c)(st).rotate([-90,-90,45]).clipAngle(179.999)}function Na(){return ws(Vn).scale(176.423)}function Gs(){return ws(vn).scale(111.48)}function ts(Ke,Qe){if(!(0<=(Qe=+Qe)&&Qe<=20))throw new Error("invalid digits");function st(ne){var ce=ne.length,xe=2,Le=new Array(ce);for(Le[0]=+ne[0].toFixed(Qe),Le[1]=+ne[1].toFixed(Qe);xe<ce;)Le[xe]=ne[xe],++xe;return Le}function N(ne){return ne.map(st)}function W(ne){for(var ce=st(ne[0]),xe=[ce],Le=1;Le<ne.length;Le++){var Re=st(ne[Le]);(Re.length>2||Re[0]!=ce[0]||Re[1]!=ce[1])&&(xe.push(Re),ce=Re)}return xe.length===1&&ne.length>1&&xe.push(st(ne[ne.length-1])),xe}function G(ne){return ne.map(W)}function L(ne){if(ne==null)return ne;var ce;switch(ne.type){case"GeometryCollection":ce={type:"GeometryCollection",geometries:ne.geometries.map(L)};break;case"Point":ce={type:"Point",coordinates:st(ne.coordinates)};break;case"MultiPoint":ce={type:ne.type,coordinates:N(ne.coordinates)};break;case"LineString":ce={type:ne.type,coordinates:W(ne.coordinates)};break;case"MultiLineString":case"Polygon":ce={type:ne.type,coordinates:G(ne.coordinates)};break;case"MultiPolygon":ce={type:"MultiPolygon",coordinates:ne.coordinates.map(G)};break;default:return ne}return ne.bbox!=null&&(ce.bbox=ne.bbox),ce}function H(ne){var ce={type:"Feature",properties:ne.properties,geometry:L(ne.geometry)};return ne.id!=null&&(ce.id=ne.id),ne.bbox!=null&&(ce.bbox=ne.bbox),ce}if(Ke!=null)switch(Ke.type){case"Feature":return H(Ke);case"FeatureCollection":var $={type:"FeatureCollection",features:Ke.features.map(H)};return Ke.bbox!=null&&($.bbox=Ke.bbox),$;default:return L(Ke)}return Ke}function fo(Ke){var Qe=c(Ke);function st(N,W){var G=Qe?d(N*Qe/2)/Qe:N/2;if(!W)return[2*G,-Ke];var L=2*a(G*c(W)),H=1/d(W);return[c(L)*H,W+(1-b(L))*H-Ke]}return st.invert=function(N,W){if(k(W+=Ke)<u)return[Qe?2*a(Qe*N/2)/Qe:N,0];var G,L=N*N+W*W,H=0,$=10;do{var ne=d(H),ce=1/b(H),xe=L-2*W*H+H*H;H-=G=(ne*xe+2*(H-W))/(2+xe*ce*ce+2*(H-W)*ne)}while(k(G)>u&&--$>0);var Le=N*(ne=d(H)),Re=d(k(W)<k(H+1/ne)?.5*E(Le):.5*P(Le)+p/4)/c(H);return[Qe?2*a(Qe*Re)/Qe:2*Re,H]},st}function ho(){return Me(fo).scale(131.215)}var Si=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Mo(Ke,Qe){var st,N=r(18,36*k(Qe)/p),W=s(N),G=N-W,L=(st=Si[W])[0],H=st[1],$=(st=Si[++W])[0],ne=st[1],ce=(st=Si[r(19,++W)])[0],xe=st[1];return[Ke*($+G*(ce-L)/2+G*G*(ce-2*$+L)/2),(Qe>0?g:-g)*(ne+G*(xe-H)/2+G*G*(xe-2*ne+H)/2)]}function Lr(){return(0,T.c)(Mo).scale(152.63)}function Sl(Ke,Qe){var st=function(L){function H($,ne){var ce=b(ne),xe=(L-1)/(L-ce*b($));return[xe*ce*c($),xe*c(ne)]}return H.invert=function($,ne){var ce=$*$+ne*ne,xe=I(ce),Le=(L-I(1-ce*(L+1)/(L-1)))/((L-1)/xe+xe/(L-1));return[w($*Le,xe*I(1-Le*Le)),xe?E(ne*Le/xe):0]},H}(Ke);if(!Qe)return st;var N=b(Qe),W=c(Qe);function G(L,H){var $=st(L,H),ne=$[1],ce=ne*W/(Ke-1)+N;return[$[0]*N/ce,ne/ce]}return G.invert=function(L,H){var $=(Ke-1)/(Ke-1-H*W);return st.invert($*L,$*H*N)},G}function dc(){var Ke=2,Qe=0,st=(0,T.U)(Sl),N=st(Ke,Qe);return N.distance=function(W){return arguments.length?st(Ke=+W,Qe):Ke},N.tilt=function(W){return arguments.length?st(Ke,Qe=W*A):Qe*S},N.scale(432.147).clipAngle(P(1/Ke)*S-1e-6)}Si.forEach(function(Ke){Ke[1]*=1.0144}),Mo.invert=function(Ke,Qe){var st=Qe/g,N=90*st,W=r(18,k(N/5)),G=i(0,s(W));do{var L=Si[G][1],H=Si[G+1][1],$=Si[r(19,G+2)][1],ne=$-L,ce=$-2*H+L,xe=2*(k(st)-H)/ne,Le=ce/ne,Re=xe*(1-Le*xe*(1-2*Le*xe));if(Re>=0||G===1){N=(Qe>=0?5:-5)*(Re+W);var Ue,He=50;do Re=(W=r(18,k(N)/5))-(G=s(W)),L=Si[G][1],H=Si[G+1][1],$=Si[r(19,G+2)][1],N-=(Ue=(Qe>=0?g:-g)*(H+Re*($-L)/2+Re*Re*($-2*H+L)/2)-Qe)*S;while(k(Ue)>x&&--He>0);break}}while(--G>=0);var tt=Si[G][0],ct=Si[G+1][0],dt=Si[r(19,G+2)][0];return[Ke/(ct+Re*(dt-tt)/2+Re*Re*(dt-2*ct+tt)/2),N*A]};var Ts=1e-4,ks=1e4,qs=-180,nl=qs+Ts,kr=180,Cl=kr-Ts,ns=-90,pa=ns+Ts,As=90,So=As-Ts;function po(Ke){return Ke.length>0}function Da(Ke){return Ke===ns||Ke===As?[0,Ke]:[qs,(Qe=Ke,Math.floor(Qe*ks)/ks)];var Qe}function jo(Ke){var Qe=Ke[0],st=Ke[1],N=!1;return Qe<=nl?(Qe=qs,N=!0):Qe>=Cl&&(Qe=kr,N=!0),st<=pa?(st=ns,N=!0):st>=So&&(st=As,N=!0),N?[Qe,st]:Ke}function mo(Ke){return Ke.map(jo)}function rs(Ke,Qe,st){for(var N=0,W=Ke.length;N<W;++N){var G=Ke[N].slice();st.push({index:-1,polygon:Qe,ring:G});for(var L=0,H=G.length;L<H;++L){var $=G[L],ne=$[0],ce=$[1];if(ne<=nl||ne>=Cl||ce<=pa||ce>=So){G[L]=jo($);for(var xe=L+1;xe<H;++xe){var Le=G[xe],Re=Le[0],Ue=Le[1];if(Re>nl&&Re<Cl&&Ue>pa&&Ue<So)break}if(xe===L+1)continue;if(L){var He={index:-1,polygon:Qe,ring:G.slice(0,L+1)};He.ring[He.ring.length-1]=Da(ce),st[st.length-1]=He}else st.pop();if(xe>=H)break;st.push({index:-1,polygon:Qe,ring:G=G.slice(xe-1)}),G[0]=Da(G[0][1]),L=-1,H=G.length}}}}function El(Ke){var Qe,st,N,W,G,L,H=Ke.length,$={},ne={};for(Qe=0;Qe<H;++Qe)N=(st=Ke[Qe]).ring[0],G=st.ring[st.ring.length-1],N[0]!==G[0]||N[1]!==G[1]?(st.index=Qe,$[N]=ne[G]=st):(st.polygon.push(st.ring),Ke[Qe]=null);for(Qe=0;Qe<H;++Qe)if(st=Ke[Qe]){if(N=st.ring[0],G=st.ring[st.ring.length-1],W=ne[N],L=$[G],delete $[N],delete ne[G],N[0]===G[0]&&N[1]===G[1]){st.polygon.push(st.ring);continue}W?(delete ne[N],delete $[W.ring[0]],W.ring.pop(),Ke[W.index]=null,st={index:-1,polygon:W.polygon,ring:W.ring.concat(st.ring)},W===L?st.polygon.push(st.ring):(st.index=H++,Ke.push($[st.ring[0]]=ne[st.ring[st.ring.length-1]]=st))):L?(delete $[G],delete ne[L.ring[L.ring.length-1]],st.ring.pop(),st={index:H++,polygon:L.polygon,ring:st.ring.concat(L.ring)},Ke[L.index]=null,Ke.push($[st.ring[0]]=ne[st.ring[st.ring.length-1]]=st)):(st.ring.push(st.ring[0]),st.polygon.push(st.ring))}}function Ms(Ke){var Qe={type:"Feature",geometry:si(Ke.geometry)};return Ke.id!=null&&(Qe.id=Ke.id),Ke.bbox!=null&&(Qe.bbox=Ke.bbox),Ke.properties!=null&&(Qe.properties=Ke.properties),Qe}function si(Ke){if(Ke==null)return Ke;var Qe,st,N,W;switch(Ke.type){case"GeometryCollection":Qe={type:"GeometryCollection",geometries:Ke.geometries.map(si)};break;case"Point":Qe={type:"Point",coordinates:jo(Ke.coordinates)};break;case"MultiPoint":case"LineString":Qe={type:Ke.type,coordinates:mo(Ke.coordinates)};break;case"MultiLineString":Qe={type:"MultiLineString",coordinates:Ke.coordinates.map(mo)};break;case"Polygon":var G=[];rs(Ke.coordinates,G,st=[]),El(st),Qe={type:"Polygon",coordinates:G};break;case"MultiPolygon":st=[],N=-1,W=Ke.coordinates.length;for(var L=new Array(W);++N<W;)rs(Ke.coordinates[N],L[N]=[],st);El(st),Qe={type:"MultiPolygon",coordinates:L.filter(po)};break;default:return Ke}return Ke.bbox!=null&&(Qe.bbox=Ke.bbox),Qe}function _a(Ke){if(Ke==null)return Ke;switch(Ke.type){case"Feature":return Ms(Ke);case"FeatureCollection":var Qe={type:"FeatureCollection",features:Ke.features.map(Ms)};return Ke.bbox!=null&&(Qe.bbox=Ke.bbox),Qe;default:return si(Ke)}}function ja(Ke,Qe){var st=d(Qe/2),N=c(m*st);return[Ke*(.74482-.34588*N*N),1.70711*st]}function Uo(){return(0,T.c)(ja).scale(146.153)}function Ua(Ke,Qe,st){var N=(0,Us.c)(Qe,st),W=N(.5),G=(0,Ze.c)([-W[0],-W[1]])(Qe),L=N.distance/2,H=-E(c(G[1]*A)/c(L)),$=[-W[0],-W[1],-(G[0]>0?p-H:H)*S],ne=(0,T.c)(Ke(L)).rotate($),ce=(0,Ze.c)($),xe=ne.center;return delete ne.rotate,ne.center=function(Le){return arguments.length?xe(ce(Le)):ce.invert(xe())},ne.clipAngle(90)}function rl(Ke){var Qe=b(Ke);function st(N,W){var G=(0,ci.Y)(N,W);return G[0]*=Qe,G}return st.invert=function(N,W){return ci.Y.invert(N/Qe,W)},st}function il(){return Va([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Va(Ke,Qe){return Ua(rl,Ke,Qe)}function ai(Ke){if(!(Ke*=2))return X.O;var Qe=-Ke/2,st=-Qe,N=Ke*Ke,W=d(st),G=.5/c(st);function L(H,$){var ne=P(b($)*b(H-Qe)),ce=P(b($)*b(H-st));return[((ne*=ne)-(ce*=ce))/(2*Ke),($<0?-1:1)*I(4*N*ce-(N-ne+ce)*(N-ne+ce))/(2*Ke)]}return L.invert=function(H,$){var ne,ce,xe=$*$,Le=b(I(xe+(ne=H+Qe)*ne)),Re=b(I(xe+(ne=H+st)*ne));return[w(ce=Le-Re,ne=(Le+Re)*W),($<0?-1:1)*P(I(ne*ne+ce*ce)*G)]},L}function Vo(){return Ws([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ws(Ke,Qe){return Ua(ai,Ke,Qe)}function Co(Ke,Qe){if(k(Qe)<u)return[Ke,0];var st=k(Qe/g),N=E(st);if(k(Ke)<u||k(k(Qe)-g)<u)return[0,l(Qe)*p*d(N/2)];var W=b(N),G=k(p/Ke-Ke/p)/2,L=G*G,H=W/(st+W-1),$=H*(2/st-1),ne=$*$,ce=ne+L,xe=H-ne,Le=L+H;return[l(Ke)*p*(G*xe+I(L*xe*xe-ce*(H*H-ne)))/ce,l(Qe)*p*($*Le-G*I((L+1)*ce-Le*Le))/ce]}function al(){return(0,T.c)(Co).scale(79.4183)}function ol(Ke,Qe){if(k(Qe)<u)return[Ke,0];var st=k(Qe/g),N=E(st);if(k(Ke)<u||k(k(Qe)-g)<u)return[0,l(Qe)*p*d(N/2)];var W=b(N),G=k(p/Ke-Ke/p)/2,L=G*G,H=W*(I(1+L)-G*W)/(1+L*st*st);return[l(Ke)*p*H,l(Qe)*p*I(1-H*(2*G+H))]}function Eo(){return(0,T.c)(ol).scale(79.4183)}function Ci(Ke,Qe){if(k(Qe)<u)return[Ke,0];var st=Qe/g,N=E(st);if(k(Ke)<u||k(k(Qe)-g)<u)return[0,p*d(N/2)];var W=(p/Ke-Ke/p)/2,G=st/(1+b(N));return[p*(l(Ke)*I(W*W+1-G*G)-W),p*G]}function Ys(){return(0,T.c)(Ci).scale(79.4183)}function Dr(Ke,Qe){if(!Qe)return[Ke,0];var st=k(Qe);if(!Ke||st===g)return[0,Qe];var N=st/g,W=N*N,G=(8*N-W*(W+2)-5)/(2*W*(N-1)),L=G*G,H=N*G,$=W+L+2*H,ne=N+3*G,ce=Ke/g,xe=ce+1/ce,Le=l(k(Ke)-g)*I(xe*xe-4),Re=Le*Le,Ue=(Le*($+L-1)+2*I($*(W+L*Re-1)+(1-W)*(W*(ne*ne+4*L)+12*H*L+4*L*L)))/(4*$+Re);return[l(Ke)*g*Ue,l(Qe)*g*I(1+Le*k(Ue)-Ue*Ue)]}function Ur(){return(0,T.c)(Dr).scale(127.16)}function no(Ke,Qe,st,N){var W=p/3;Ke=i(Ke,u),Qe=i(Qe,u),Ke=r(Ke,g),Qe=r(Qe,p-u),st=i(st,0),st=r(st,100-u);var G=(N=i(N,u))/100,L=P((st/100+1)*b(W))/W,H=c(Ke)/c(L*g),$=Qe/p,ne=I(G*c(Ke/2)/c(Qe/2));return function(ce,xe,Le,Re,Ue){function He(tt,ct){var dt=Le*c(Re*ct),wt=I(1-dt*dt),Et=I(2/(1+wt*b(tt*=Ue)));return[ce*wt*Et*c(tt),xe*dt*Et]}return He.invert=function(tt,ct){var dt=tt/ce,wt=ct/xe,Et=I(dt*dt+wt*wt),kt=2*E(Et/2);return[w(tt*d(kt),ce*Et)/Ue,Et&&E(ct*c(kt)/(xe*Le*Et))/Re]},He}(ne/I($*H*L),1/(ne*I($*H*L)),H,L,$)}function Ho(){var Ke=65*A,Qe=60*A,st=20,N=200,W=(0,T.U)(no),G=W(Ke,Qe,st,N);return G.poleline=function(L){return arguments.length?W(Ke=+L*A,Qe,st,N):Ke*S},G.parallels=function(L){return arguments.length?W(Ke,Qe=+L*A,st,N):Qe*S},G.inflation=function(L){return arguments.length?W(Ke,Qe,st=+L,N):st},G.ratio=function(L){return arguments.length?W(Ke,Qe,st,N=+L):N},G.scale(163.775)}function is(){return Ho().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}ja.invert=function(Ke,Qe){var st=Qe/1.70711,N=c(m*st);return[Ke/(.74482-.34588*N*N),2*a(st)]},Co.invert=function(Ke,Qe){if(k(Qe)<u)return[Ke,0];if(k(Ke)<u)return[0,g*c(2*a(Qe/p))];var st=(Ke/=p)*Ke,N=(Qe/=p)*Qe,W=st+N,G=W*W,L=-k(Qe)*(1+W),H=L-2*N+st,$=-2*L+1+2*N+G,ne=N/$+(2*H*H*H/($*$*$)-9*L*H/($*$))/27,ce=(L-H*H/(3*$))/$,xe=2*I(-ce/3),Le=P(3*ne/(ce*xe))/3;return[p*(W-1+I(1+2*(st-N)+G))/(2*Ke),l(Qe)*p*(-xe*b(Le+p/3)-H/(3*$))]},ol.invert=function(Ke,Qe){if(!Ke)return[0,g*c(2*a(Qe/p))];var st=k(Ke/p),N=(1-st*st-(Qe/=p)*Qe)/(2*st),W=I(N*N+1);return[l(Ke)*p*(W-N),l(Qe)*g*c(2*w(I((1-2*N*st)*(N+W)-st),I(W+N+st)))]},Ci.invert=function(Ke,Qe){if(!Qe)return[Ke,0];var st=Qe/p,N=(p*p*(1-st*st)-Ke*Ke)/(2*p*Ke);return[Ke?p*(l(Ke)*I(N*N+1)-N):0,g*c(2*a(st))]},Dr.invert=function(Ke,Qe){var st;if(!Ke||!Qe)return[Ke,Qe];Qe/=p;var N=l(Ke)*Ke/g,W=(N*N-1+4*Qe*Qe)/k(N),G=W*W,L=2*Qe,H=50;do{var $=L*L,ne=(8*L-$*($+2)-5)/(2*$*(L-1)),ce=(3*L-$*L-10)/(2*$*L),xe=ne*ne,Le=L*ne,Re=L+ne,Ue=Re*Re,He=L+3*ne,tt=-2*Re*(4*Le*xe+(1-4*$+3*$*$)*(1+ce)+xe*(14*$-6-G+(8*$-8-2*G)*ce)+Le*(12*$-8+(10*$-10-G)*ce)),ct=I(Ue*($+xe*G-1)+(1-$)*($*(He*He+4*xe)+xe*(12*Le+4*xe)));L-=st=(W*(Ue+xe-1)+2*ct-N*(4*Ue+G))/(W*(2*ne*ce+2*Re*(1+ce))+tt/ct-8*Re*(W*(-1+xe+Ue)+2*ct)*(1+ce)/(G+4*Ue))}while(st>u&&--H>0);return[l(Ke)*(I(W*W+4)+W)*p/4,g*L]};var $i=4*p+3*I(3),Go=2*I(2*p*I(3)/$i),yi=ge(Go*I(3)/p,Go,$i/6);function Ec(){return(0,T.c)(yi).scale(176.84)}function ro(Ke,Qe){return[Ke*I(1-3*Qe*Qe/(p*p)),Qe]}function _i(){return(0,T.c)(ro).scale(152.63)}function Pi(Ke,Qe){var st=b(Qe),N=b(Ke)*st,W=1-N,G=b(Ke=w(c(Ke)*st,-c(Qe))),L=c(Ke);return[L*(st=I(1-N*N))-G*W,-G*st-L*W]}function Za(){return(0,T.c)(Pi).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Ss(Ke,Qe){var st=j(Ke,Qe);return[(st[0]+Ke/g)/2,(st[1]+Qe)/2]}function pc(){return(0,T.c)(Ss).scale(158.837)}ro.invert=function(Ke,Qe){return[Ke/I(1-3*Qe*Qe/(p*p)),Qe]},Pi.invert=function(Ke,Qe){var st=(Ke*Ke+Qe*Qe)/-2,N=I(-st*(2+st)),W=Qe*st+Ke*N,G=Ke*st-Qe*N,L=I(G*G+W*W);return[w(N*W,L*(1+st)),L?-E(N*G/L):0]},Ss.invert=function(Ke,Qe){var st=Ke,N=Qe,W=25;do{var G,L=b(N),H=c(N),$=c(2*N),ne=H*H,ce=L*L,xe=c(st),Le=b(st/2),Re=c(st/2),Ue=Re*Re,He=1-ce*Le*Le,tt=He?P(L*Le)*I(G=1/He):G=0,ct=.5*(2*tt*L*Re+st/g)-Ke,dt=.5*(tt*H+N)-Qe,wt=.5*G*(ce*Ue+tt*L*Le*ne)+.5/g,Et=G*(xe*$/4-tt*H*Re),kt=.125*G*($*Re-tt*H*ce*xe),Bt=.5*G*(ne*Le+tt*Ue*L)+.5,It=Et*kt-Bt*wt,Kt=(dt*Et-ct*Bt)/It,qt=(ct*kt-dt*wt)/It;st-=Kt,N-=qt}while((k(Kt)>u||k(qt)>u)&&--W>0);return[st,N]}},88728:function(F,C,e){"use strict";function T(){return new k}function k(){this.reset()}e.d(C,{c:function(){return T}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){w(a,b,this.t),w(this,a.s,this.s),this.s?this.t+=a.t:this.s=a.t},valueOf:function(){return this.s}};var a=new k;function w(b,f,s){var t=b.s=f+s,i=t-f,r=t-i;b.t=f-r+(s-i)}},95384:function(F,C,e){"use strict";e.d(C,{cp:function(){return x},mQ:function(){return r},oB:function(){return o}});var T,k,a,w,b,f=e(88728),s=e(64528),t=e(70932),i=e(16016),r=(0,f.c)(),n=(0,f.c)(),o={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){r.reset(),o.lineStart=l,o.lineEnd=c},polygonEnd:function(){var p=+r;n.add(p<0?s.kD+p:p),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){n.add(s.kD)}};function l(){o.point=d}function c(){u(T,k)}function d(p,g){o.point=u,T=p,k=g,p*=s.qw,g*=s.qw,a=p,w=(0,s.W8)(g=g/2+s.wL),b=(0,s.g$)(g)}function u(p,g){p*=s.qw,g=(g*=s.qw)/2+s.wL;var m=p-a,y=m>=0?1:-1,v=y*m,_=(0,s.W8)(g),h=(0,s.g$)(g),S=b*h,A=w*_+S*(0,s.W8)(v),E=S*y*(0,s.g$)(v);r.add((0,s.WE)(E,A)),a=p,w=_,b=h}function x(p){return n.reset(),(0,i.c)(p,o),2*n}},13696:function(F,C,e){"use strict";e.d(C,{c:function(){return P}});var T,k,a,w,b,f,s,t,i,r,n=e(88728),o=e(95384),l=e(84220),c=e(64528),d=e(16016),u=(0,n.c)(),x={point:p,lineStart:m,lineEnd:y,polygonStart:function(){x.point=v,x.lineStart=_,x.lineEnd=h,u.reset(),o.oB.polygonStart()},polygonEnd:function(){o.oB.polygonEnd(),x.point=p,x.lineStart=m,x.lineEnd=y,o.mQ<0?(T=-(a=180),k=-(w=90)):u>c.Gg?w=90:u<-c.Gg&&(k=-90),r[0]=T,r[1]=a},sphere:function(){T=-(a=180),k=-(w=90)}};function p(I,D){i.push(r=[T=I,a=I]),D<k&&(k=D),D>w&&(w=D)}function g(I,D){var z=(0,l.ux)([I*c.qw,D*c.qw]);if(t){var V=(0,l.CW)(t,z),O=[V[1],-V[0],0],j=(0,l.CW)(O,V);(0,l.cJ)(j),j=(0,l.G)(j);var Y,B=I-b,U=B>0?1:-1,q=j[0]*c.oh*U,te=(0,c.a2)(B)>180;te^(U*b<q&&q<U*I)?(Y=j[1]*c.oh)>w&&(w=Y):te^(U*b<(q=(q+360)%360-180)&&q<U*I)?(Y=-j[1]*c.oh)<k&&(k=Y):(D<k&&(k=D),D>w&&(w=D)),te?I<b?S(T,I)>S(T,a)&&(a=I):S(I,a)>S(T,a)&&(T=I):a>=T?(I<T&&(T=I),I>a&&(a=I)):I>b?S(T,I)>S(T,a)&&(a=I):S(I,a)>S(T,a)&&(T=I)}else i.push(r=[T=I,a=I]);D<k&&(k=D),D>w&&(w=D),t=z,b=I}function m(){x.point=g}function y(){r[0]=T,r[1]=a,x.point=p,t=null}function v(I,D){if(t){var z=I-b;u.add((0,c.a2)(z)>180?z+(z>0?360:-360):z)}else f=I,s=D;o.oB.point(I,D),g(I,D)}function _(){o.oB.lineStart()}function h(){v(f,s),o.oB.lineEnd(),(0,c.a2)(u)>c.Gg&&(T=-(a=180)),r[0]=T,r[1]=a,t=null}function S(I,D){return(D-=I)<0?D+360:D}function A(I,D){return I[0]-D[0]}function E(I,D){return I[0]<=I[1]?I[0]<=D&&D<=I[1]:D<I[0]||I[1]<D}function P(I){var D,z,V,O,j,Y,B;if(w=a=-(T=k=1/0),i=[],(0,d.c)(I,x),z=i.length){for(i.sort(A),D=1,j=[V=i[0]];D<z;++D)E(V,(O=i[D])[0])||E(V,O[1])?(S(V[0],O[1])>S(V[0],V[1])&&(V[1]=O[1]),S(O[0],V[1])>S(V[0],V[1])&&(V[0]=O[0])):j.push(V=O);for(Y=-1/0,D=0,V=j[z=j.length-1];D<=z;V=O,++D)O=j[D],(B=S(V[1],O[0]))>Y&&(Y=B,T=O[0],a=V[1])}return i=r=null,T===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[T,k],[a,w]]}},84220:function(F,C,e){"use strict";e.d(C,{CW:function(){return b},Ez:function(){return w},G:function(){return k},cJ:function(){return t},mg:function(){return f},ux:function(){return a},wx:function(){return s}});var T=e(64528);function k(i){return[(0,T.WE)(i[1],i[0]),(0,T.qR)(i[2])]}function a(i){var r=i[0],n=i[1],o=(0,T.W8)(n);return[o*(0,T.W8)(r),o*(0,T.g$)(r),(0,T.g$)(n)]}function w(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]}function b(i,r){return[i[1]*r[2]-i[2]*r[1],i[2]*r[0]-i[0]*r[2],i[0]*r[1]-i[1]*r[0]]}function f(i,r){i[0]+=r[0],i[1]+=r[1],i[2]+=r[2]}function s(i,r){return[i[0]*r,i[1]*r,i[2]*r]}function t(i){var r=(0,T._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=r,i[1]/=r,i[2]/=r}},24052:function(F,C,e){"use strict";e.d(C,{c:function(){return z}});var T,k,a,w,b,f,s,t,i,r,n,o,l,c,d,u,x=e(64528),p=e(70932),g=e(16016),m={sphere:p.c,point:y,lineStart:_,lineEnd:A,polygonStart:function(){m.lineStart=E,m.lineEnd=P},polygonEnd:function(){m.lineStart=_,m.lineEnd=A}};function y(V,O){V*=x.qw,O*=x.qw;var j=(0,x.W8)(O);v(j*(0,x.W8)(V),j*(0,x.g$)(V),(0,x.g$)(O))}function v(V,O,j){++T,a+=(V-a)/T,w+=(O-w)/T,b+=(j-b)/T}function _(){m.point=h}function h(V,O){V*=x.qw,O*=x.qw;var j=(0,x.W8)(O);c=j*(0,x.W8)(V),d=j*(0,x.g$)(V),u=(0,x.g$)(O),m.point=S,v(c,d,u)}function S(V,O){V*=x.qw,O*=x.qw;var j=(0,x.W8)(O),Y=j*(0,x.W8)(V),B=j*(0,x.g$)(V),U=(0,x.g$)(O),q=(0,x.WE)((0,x._I)((q=d*U-u*B)*q+(q=u*Y-c*U)*q+(q=c*B-d*Y)*q),c*Y+d*B+u*U);k+=q,f+=q*(c+(c=Y)),s+=q*(d+(d=B)),t+=q*(u+(u=U)),v(c,d,u)}function A(){m.point=y}function E(){m.point=I}function P(){D(o,l),m.point=y}function I(V,O){o=V,l=O,V*=x.qw,O*=x.qw,m.point=D;var j=(0,x.W8)(O);c=j*(0,x.W8)(V),d=j*(0,x.g$)(V),u=(0,x.g$)(O),v(c,d,u)}function D(V,O){V*=x.qw,O*=x.qw;var j=(0,x.W8)(O),Y=j*(0,x.W8)(V),B=j*(0,x.g$)(V),U=(0,x.g$)(O),q=d*U-u*B,te=u*Y-c*U,ee=c*B-d*Y,Q=(0,x._I)(q*q+te*te+ee*ee),J=(0,x.qR)(Q),K=Q&&-J/Q;i+=K*q,r+=K*te,n+=K*ee,k+=J,f+=J*(c+(c=Y)),s+=J*(d+(d=B)),t+=J*(u+(u=U)),v(c,d,u)}function z(V){T=k=a=w=b=f=s=t=i=r=n=0,(0,g.c)(V,m);var O=i,j=r,Y=n,B=O*O+j*j+Y*Y;return B<x.a8&&(O=f,j=s,Y=t,k<x.Gg&&(O=a,j=w,Y=b),(B=O*O+j*j+Y*Y)<x.a8)?[NaN,NaN]:[(0,x.WE)(j,O)*x.oh,(0,x.qR)(Y/(0,x._I)(B))*x.oh]}},61780:function(F,C,e){"use strict";e.d(C,{Q:function(){return b},c:function(){return s}});var T=e(84220);function k(t){return function(){return t}}var a=e(64528),w=e(92992);function b(t,i,r,n,o,l){if(r){var c=(0,a.W8)(i),d=(0,a.g$)(i),u=n*r;o==null?(o=i+n*a.kD,l=i-u/2):(o=f(c,o),l=f(c,l),(n>0?o<l:o>l)&&(o+=n*a.kD));for(var x,p=o;n>0?p>l:p<l;p-=u)x=(0,T.G)([c,-d*(0,a.W8)(p),-d*(0,a.g$)(p)]),t.point(x[0],x[1])}}function f(t,i){(i=(0,T.ux)(i))[0]-=t,(0,T.cJ)(i);var r=(0,a.mE)(-i[1]);return((-i[2]<0?-r:r)+a.kD-a.Gg)%a.kD}function s(){var t,i,r=k([0,0]),n=k(90),o=k(6),l={point:function(d,u){t.push(d=i(d,u)),d[0]*=a.oh,d[1]*=a.oh}};function c(){var d=r.apply(this,arguments),u=n.apply(this,arguments)*a.qw,x=o.apply(this,arguments)*a.qw;return t=[],i=(0,w.O)(-d[0]*a.qw,-d[1]*a.qw,0).invert,b(l,u,x,1),d={type:"Polygon",coordinates:[t]},t=i=null,d}return c.center=function(d){return arguments.length?(r=typeof d=="function"?d:k([+d[0],+d[1]]),c):r},c.radius=function(d){return arguments.length?(n=typeof d=="function"?d:k(+d),c):n},c.precision=function(d){return arguments.length?(o=typeof d=="function"?d:k(+d),c):o},c}},78284:function(F,C,e){"use strict";var T=e(14229),k=e(64528);C.c=(0,T.c)(function(){return!0},function(a){var w,b=NaN,f=NaN,s=NaN;return{lineStart:function(){a.lineStart(),w=1},point:function(t,i){var r=t>0?k.pi:-k.pi,n=(0,k.a2)(t-b);(0,k.a2)(n-k.pi)<k.Gg?(a.point(b,f=(f+i)/2>0?k.or:-k.or),a.point(s,f),a.lineEnd(),a.lineStart(),a.point(r,f),a.point(t,f),w=0):s!==r&&n>=k.pi&&((0,k.a2)(b-s)<k.Gg&&(b-=s*k.Gg),(0,k.a2)(t-r)<k.Gg&&(t-=r*k.Gg),f=function(o,l,c,d){var u,x,p=(0,k.g$)(o-c);return(0,k.a2)(p)>k.Gg?(0,k.MQ)(((0,k.g$)(l)*(x=(0,k.W8)(d))*(0,k.g$)(c)-(0,k.g$)(d)*(u=(0,k.W8)(l))*(0,k.g$)(o))/(u*x*p)):(l+d)/2}(b,f,t,i),a.point(s,f),a.lineEnd(),a.lineStart(),a.point(r,f),w=0),a.point(b=t,f=i),s=r},lineEnd:function(){a.lineEnd(),b=f=NaN},clean:function(){return 2-w}}},function(a,w,b,f){var s;if(a==null)s=b*k.or,f.point(-k.pi,s),f.point(0,s),f.point(k.pi,s),f.point(k.pi,0),f.point(k.pi,-s),f.point(0,-s),f.point(-k.pi,-s),f.point(-k.pi,0),f.point(-k.pi,s);else if((0,k.a2)(a[0]-w[0])>k.Gg){var t=a[0]<w[0]?k.pi:-k.pi;s=b*t/2,f.point(-t,s),f.point(0,s),f.point(t,s)}else f.point(w[0],w[1])},[-k.pi,-k.or])},97208:function(F,C,e){"use strict";e.d(C,{c:function(){return k}});var T=e(70932);function k(){var a,w=[];return{point:function(b,f,s){a.push([b,f,s])},lineStart:function(){w.push(a=[])},lineEnd:T.c,rejoin:function(){w.length>1&&w.push(w.pop().concat(w.shift()))},result:function(){var b=w;return w=[],a=null,b}}}},2728:function(F,C,e){"use strict";e.d(C,{c:function(){return f}});var T=e(84220),k=e(61780),a=e(64528),w=e(41860),b=e(14229);function f(s){var t=(0,a.W8)(s),i=6*a.qw,r=t>0,n=(0,a.a2)(t)>a.Gg;function o(d,u){return(0,a.W8)(d)*(0,a.W8)(u)>t}function l(d,u,x){var p=(0,T.ux)(d),g=(0,T.ux)(u),m=[1,0,0],y=(0,T.CW)(p,g),v=(0,T.Ez)(y,y),_=y[0],h=v-_*_;if(!h)return!x&&d;var S=t*v/h,A=-t*_/h,E=(0,T.CW)(m,y),P=(0,T.wx)(m,S),I=(0,T.wx)(y,A);(0,T.mg)(P,I);var D=E,z=(0,T.Ez)(P,D),V=(0,T.Ez)(D,D),O=z*z-V*((0,T.Ez)(P,P)-1);if(!(O<0)){var j=(0,a._I)(O),Y=(0,T.wx)(D,(-z-j)/V);if((0,T.mg)(Y,P),Y=(0,T.G)(Y),!x)return Y;var B,U=d[0],q=u[0],te=d[1],ee=u[1];q<U&&(B=U,U=q,q=B);var Q=q-U,J=(0,a.a2)(Q-a.pi)<a.Gg;if(!J&&ee<te&&(B=te,te=ee,ee=B),J||Q<a.Gg?J?te+ee>0^Y[1]<((0,a.a2)(Y[0]-U)<a.Gg?te:ee):te<=Y[1]&&Y[1]<=ee:Q>a.pi^(U<=Y[0]&&Y[0]<=q)){var K=(0,T.wx)(D,(-z+j)/V);return(0,T.mg)(K,P),[Y,(0,T.G)(K)]}}}function c(d,u){var x=r?s:a.pi-s,p=0;return d<-x?p|=1:d>x&&(p|=2),u<-x?p|=4:u>x&&(p|=8),p}return(0,b.c)(o,function(d){var u,x,p,g,m;return{lineStart:function(){g=p=!1,m=1},point:function(y,v){var _,h=[y,v],S=o(y,v),A=r?S?0:c(y,v):S?c(y+(y<0?a.pi:-a.pi),v):0;if(!u&&(g=p=S)&&d.lineStart(),S!==p&&(!(_=l(u,h))||(0,w.c)(u,_)||(0,w.c)(h,_))&&(h[2]=1),S!==p)m=0,S?(d.lineStart(),_=l(h,u),d.point(_[0],_[1])):(_=l(u,h),d.point(_[0],_[1],2),d.lineEnd()),u=_;else if(n&&u&&r^S){var E;A&x||!(E=l(h,u,!0))||(m=0,r?(d.lineStart(),d.point(E[0][0],E[0][1]),d.point(E[1][0],E[1][1]),d.lineEnd()):(d.point(E[1][0],E[1][1]),d.lineEnd(),d.lineStart(),d.point(E[0][0],E[0][1],3)))}!S||u&&(0,w.c)(u,h)||d.point(h[0],h[1]),u=h,p=S,x=A},lineEnd:function(){p&&d.lineEnd(),u=null},clean:function(){return m|(g&&p)<<1}}},function(d,u,x,p){(0,k.Q)(p,s,i,x,d,u)},r?[0,-s]:[-a.pi,s-a.pi])}},14229:function(F,C,e){"use strict";e.d(C,{c:function(){return f}});var T=e(97208),k=e(32232),a=e(64528),w=e(58196),b=e(84706);function f(i,r,n,o){return function(l){var c,d,u,x=r(l),p=(0,T.c)(),g=r(p),m=!1,y={point:v,lineStart:h,lineEnd:S,polygonStart:function(){y.point=A,y.lineStart=E,y.lineEnd=P,d=[],c=[]},polygonEnd:function(){y.point=v,y.lineStart=h,y.lineEnd=S,d=(0,b.Uf)(d);var I=(0,w.c)(c,o);d.length?(m||(l.polygonStart(),m=!0),(0,k.c)(d,t,I,n,l)):I&&(m||(l.polygonStart(),m=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),m&&(l.polygonEnd(),m=!1),d=c=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function v(I,D){i(I,D)&&l.point(I,D)}function _(I,D){x.point(I,D)}function h(){y.point=_,x.lineStart()}function S(){y.point=v,x.lineEnd()}function A(I,D){u.push([I,D]),g.point(I,D)}function E(){g.lineStart(),u=[]}function P(){A(u[0][0],u[0][1]),g.lineEnd();var I,D,z,V,O=g.clean(),j=p.result(),Y=j.length;if(u.pop(),c.push(u),u=null,Y)if(1&O){if((D=(z=j[0]).length-1)>0){for(m||(l.polygonStart(),m=!0),l.lineStart(),I=0;I<D;++I)l.point((V=z[I])[0],V[1]);l.lineEnd()}}else Y>1&&2&O&&j.push(j.pop().concat(j.shift())),d.push(j.filter(s))}return y}}function s(i){return i.length>1}function t(i,r){return((i=i.x)[0]<0?i[1]-a.or-a.Gg:a.or-i[1])-((r=r.x)[0]<0?r[1]-a.or-a.Gg:a.or-r[1])}},21676:function(F,C,e){"use strict";e.d(C,{c:function(){return s}});var T=e(64528),k=e(97208),a=e(32232),w=e(84706),b=1e9,f=-b;function s(t,i,r,n){function o(x,p){return t<=x&&x<=r&&i<=p&&p<=n}function l(x,p,g,m){var y=0,v=0;if(x==null||(y=c(x,g))!==(v=c(p,g))||u(x,p)<0^g>0)do m.point(y===0||y===3?t:r,y>1?n:i);while((y=(y+g+4)%4)!==v);else m.point(p[0],p[1])}function c(x,p){return(0,T.a2)(x[0]-t)<T.Gg?p>0?0:3:(0,T.a2)(x[0]-r)<T.Gg?p>0?2:1:(0,T.a2)(x[1]-i)<T.Gg?p>0?1:0:p>0?3:2}function d(x,p){return u(x.x,p.x)}function u(x,p){var g=c(x,1),m=c(p,1);return g!==m?g-m:g===0?p[1]-x[1]:g===1?x[0]-p[0]:g===2?x[1]-p[1]:p[0]-x[0]}return function(x){var p,g,m,y,v,_,h,S,A,E,P,I=x,D=(0,k.c)(),z={point:V,lineStart:function(){z.point=O,g&&g.push(m=[]),E=!0,A=!1,h=S=NaN},lineEnd:function(){p&&(O(y,v),_&&A&&D.rejoin(),p.push(D.result())),z.point=V,A&&I.lineEnd()},polygonStart:function(){I=D,p=[],g=[],P=!0},polygonEnd:function(){var j=function(){for(var U=0,q=0,te=g.length;q<te;++q)for(var ee,Q,J=g[q],K=1,X=J.length,ie=J[0],se=ie[0],ae=ie[1];K<X;++K)ee=se,Q=ae,se=(ie=J[K])[0],ae=ie[1],Q<=n?ae>n&&(se-ee)*(n-Q)>(ae-Q)*(t-ee)&&++U:ae<=n&&(se-ee)*(n-Q)<(ae-Q)*(t-ee)&&--U;return U}(),Y=P&&j,B=(p=(0,w.Uf)(p)).length;(Y||B)&&(x.polygonStart(),Y&&(x.lineStart(),l(null,null,1,x),x.lineEnd()),B&&(0,a.c)(p,d,j,l,x),x.polygonEnd()),I=x,p=g=m=null}};function V(j,Y){o(j,Y)&&I.point(j,Y)}function O(j,Y){var B=o(j,Y);if(g&&m.push([j,Y]),E)y=j,v=Y,_=B,E=!1,B&&(I.lineStart(),I.point(j,Y));else if(B&&A)I.point(j,Y);else{var U=[h=Math.max(f,Math.min(b,h)),S=Math.max(f,Math.min(b,S))],q=[j=Math.max(f,Math.min(b,j)),Y=Math.max(f,Math.min(b,Y))];(function(te,ee,Q,J,K,X){var ie,se=te[0],ae=te[1],ue=0,ve=1,ye=ee[0]-se,pe=ee[1]-ae;if(ie=Q-se,ye||!(ie>0)){if(ie/=ye,ye<0){if(ie<ue)return;ie<ve&&(ve=ie)}else if(ye>0){if(ie>ve)return;ie>ue&&(ue=ie)}if(ie=K-se,ye||!(ie<0)){if(ie/=ye,ye<0){if(ie>ve)return;ie>ue&&(ue=ie)}else if(ye>0){if(ie<ue)return;ie<ve&&(ve=ie)}if(ie=J-ae,pe||!(ie>0)){if(ie/=pe,pe<0){if(ie<ue)return;ie<ve&&(ve=ie)}else if(pe>0){if(ie>ve)return;ie>ue&&(ue=ie)}if(ie=X-ae,pe||!(ie<0)){if(ie/=pe,pe<0){if(ie>ve)return;ie>ue&&(ue=ie)}else if(pe>0){if(ie<ue)return;ie<ve&&(ve=ie)}return ue>0&&(te[0]=se+ue*ye,te[1]=ae+ue*pe),ve<1&&(ee[0]=se+ve*ye,ee[1]=ae+ve*pe),!0}}}}})(U,q,t,i,r,n)?(A||(I.lineStart(),I.point(U[0],U[1])),I.point(q[0],q[1]),B||I.lineEnd(),P=!1):B&&(I.lineStart(),I.point(j,Y),P=!1)}h=j,S=Y,A=B}return z}}},32232:function(F,C,e){"use strict";e.d(C,{c:function(){return w}});var T=e(41860),k=e(64528);function a(f,s,t,i){this.x=f,this.z=s,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function w(f,s,t,i,r){var n,o,l=[],c=[];if(f.forEach(function(m){if(!((y=m.length-1)<=0)){var y,v,_=m[0],h=m[y];if((0,T.c)(_,h)){if(!_[2]&&!h[2]){for(r.lineStart(),n=0;n<y;++n)r.point((_=m[n])[0],_[1]);return void r.lineEnd()}h[0]+=2*k.Gg}l.push(v=new a(_,m,null,!0)),c.push(v.o=new a(_,null,v,!1)),l.push(v=new a(h,m,null,!1)),c.push(v.o=new a(h,null,v,!0))}}),l.length){for(c.sort(s),b(l),b(c),n=0,o=c.length;n<o;++n)c[n].e=t=!t;for(var d,u,x=l[0];;){for(var p=x,g=!0;p.v;)if((p=p.n)===x)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(n=0,o=d.length;n<o;++n)r.point((u=d[n])[0],u[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(g)for(d=p.p.z,n=d.length-1;n>=0;--n)r.point((u=d[n])[0],u[1]);else i(p.x,p.p.x,-1,r);p=p.p}d=(p=p.o).z,g=!g}while(!p.v);r.lineEnd()}}}function b(f){if(s=f.length){for(var s,t,i=0,r=f[0];++i<s;)r.n=t=f[i],t.p=r,r=t;r.n=t=f[0],t.p=r}}},68120:function(F,C,e){"use strict";function T(k,a){function w(b,f){return b=k(b,f),a(b[0],b[1])}return k.invert&&a.invert&&(w.invert=function(b,f){return(b=a.invert(b,f))&&k.invert(b[0],b[1])}),w}e.d(C,{c:function(){return T}})},7376:function(F,C,e){"use strict";function T(k){return k}e.d(C,{c:function(){return T}})},83356:function(F,C,e){"use strict";e.r(C),e.d(C,{geoAlbers:function(){return vt},geoAlbersUsa:function(){return Mt},geoArea:function(){return T.cp},geoAzimuthalEqualArea:function(){return bt.c},geoAzimuthalEqualAreaRaw:function(){return bt.y},geoAzimuthalEquidistant:function(){return St.c},geoAzimuthalEquidistantRaw:function(){return St.O},geoBounds:function(){return k.c},geoCentroid:function(){return a.c},geoCircle:function(){return w.c},geoClipAntimeridian:function(){return b.c},geoClipCircle:function(){return f.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.c},geoConicConformal:function(){return Zt},geoConicConformalRaw:function(){return Ht},geoConicEqualArea:function(){return mt},geoConicEqualAreaRaw:function(){return ft},geoConicEquidistant:function(){return Tn},geoConicEquidistantRaw:function(){return Pn},geoContains:function(){return j},geoDistance:function(){return S},geoEqualEarth:function(){return wn},geoEqualEarthRaw:function(){return bn},geoEquirectangular:function(){return jt.c},geoEquirectangularRaw:function(){return jt.u},geoGnomonic:function(){return Cn.c},geoGnomonicRaw:function(){return Cn.Y},geoGraticule:function(){return q},geoGraticule10:function(){return te},geoIdentity:function(){return Mn},geoInterpolate:function(){return X.c},geoLength:function(){return v},geoMercator:function(){return Ft},geoMercatorRaw:function(){return Dt},geoNaturalEarth1:function(){return jn.c},geoNaturalEarth1Raw:function(){return jn.g},geoOrthographic:function(){return Rn.c},geoOrthographicRaw:function(){return Rn.t},geoPath:function(){return Fe},geoProjection:function(){return rt.c},geoProjectionMutator:function(){return rt.U},geoRotation:function(){return Pt.c},geoStereographic:function(){return ar},geoStereographicRaw:function(){return Yn},geoStream:function(){return u.c},geoTransform:function(){return Ln.c},geoTransverseMercator:function(){return mr},geoTransverseMercatorRaw:function(){return Kn}});var T=e(95384),k=e(13696),a=e(24052),w=e(61780),b=e(78284),f=e(2728),s=e(21676);function t(){var en,rn,En,gn=0,Dn=0,qn=960,Vn=500;return En={stream:function(Jn){return en&&rn===Jn?en:en=(0,s.c)(gn,Dn,qn,Vn)(rn=Jn)},extent:function(Jn){return arguments.length?(gn=+Jn[0][0],Dn=+Jn[0][1],qn=+Jn[1][0],Vn=+Jn[1][1],en=rn=null,En):[[gn,Dn],[qn,Vn]]}}}var i,r,n,o=e(58196),l=e(88728),c=e(64528),d=e(70932),u=e(16016),x=(0,l.c)(),p={sphere:d.c,point:d.c,lineStart:function(){p.point=m,p.lineEnd=g},lineEnd:d.c,polygonStart:d.c,polygonEnd:d.c};function g(){p.point=p.lineEnd=d.c}function m(en,rn){en*=c.qw,rn*=c.qw,i=en,r=(0,c.g$)(rn),n=(0,c.W8)(rn),p.point=y}function y(en,rn){en*=c.qw,rn*=c.qw;var En=(0,c.g$)(rn),gn=(0,c.W8)(rn),Dn=(0,c.a2)(en-i),qn=(0,c.W8)(Dn),Vn=gn*(0,c.g$)(Dn),Jn=n*En-r*gn*qn,xr=r*En+n*gn*qn;x.add((0,c.WE)((0,c._I)(Vn*Vn+Jn*Jn),xr)),i=en,r=En,n=gn}function v(en){return x.reset(),(0,u.c)(en,p),+x}var _=[null,null],h={type:"LineString",coordinates:_};function S(en,rn){return _[0]=en,_[1]=rn,v(h)}var A={Feature:function(en,rn){return P(en.geometry,rn)},FeatureCollection:function(en,rn){for(var En=en.features,gn=-1,Dn=En.length;++gn<Dn;)if(P(En[gn].geometry,rn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(en,rn){return I(en.coordinates,rn)},MultiPoint:function(en,rn){for(var En=en.coordinates,gn=-1,Dn=En.length;++gn<Dn;)if(I(En[gn],rn))return!0;return!1},LineString:function(en,rn){return D(en.coordinates,rn)},MultiLineString:function(en,rn){for(var En=en.coordinates,gn=-1,Dn=En.length;++gn<Dn;)if(D(En[gn],rn))return!0;return!1},Polygon:function(en,rn){return z(en.coordinates,rn)},MultiPolygon:function(en,rn){for(var En=en.coordinates,gn=-1,Dn=En.length;++gn<Dn;)if(z(En[gn],rn))return!0;return!1},GeometryCollection:function(en,rn){for(var En=en.geometries,gn=-1,Dn=En.length;++gn<Dn;)if(P(En[gn],rn))return!0;return!1}};function P(en,rn){return!(!en||!E.hasOwnProperty(en.type))&&E[en.type](en,rn)}function I(en,rn){return S(en,rn)===0}function D(en,rn){for(var En,gn,Dn,qn=0,Vn=en.length;qn<Vn;qn++){if((gn=S(en[qn],rn))===0||qn>0&&(Dn=S(en[qn],en[qn-1]))>0&&En<=Dn&&gn<=Dn&&(En+gn-Dn)*(1-Math.pow((En-gn)/Dn,2))<c.a8*Dn)return!0;En=gn}return!1}function z(en,rn){return!!(0,o.c)(en.map(V),O(rn))}function V(en){return(en=en.map(O)).pop(),en}function O(en){return[en[0]*c.qw,en[1]*c.qw]}function j(en,rn){return(en&&A.hasOwnProperty(en.type)?A[en.type]:P)(en,rn)}var Y=e(84706);function B(en,rn,En){var gn=(0,Y.ik)(en,rn-c.Gg,En).concat(rn);return function(Dn){return gn.map(function(qn){return[Dn,qn]})}}function U(en,rn,En){var gn=(0,Y.ik)(en,rn-c.Gg,En).concat(rn);return function(Dn){return gn.map(function(qn){return[qn,Dn]})}}function q(){var en,rn,En,gn,Dn,qn,Vn,Jn,xr,Jt,vn,Lt,Nt=10,$t=Nt,fn=90,dn=360,xn=2.5;function sn(){return{type:"MultiLineString",coordinates:Yt()}}function Yt(){return(0,Y.ik)((0,c.Km)(gn/fn)*fn,En,fn).map(vn).concat((0,Y.ik)((0,c.Km)(Jn/dn)*dn,Vn,dn).map(Lt)).concat((0,Y.ik)((0,c.Km)(rn/Nt)*Nt,en,Nt).filter(function(Wt){return(0,c.a2)(Wt%fn)>c.Gg}).map(xr)).concat((0,Y.ik)((0,c.Km)(qn/$t)*$t,Dn,$t).filter(function(Wt){return(0,c.a2)(Wt%dn)>c.Gg}).map(Jt))}return sn.lines=function(){return Yt().map(function(Wt){return{type:"LineString",coordinates:Wt}})},sn.outline=function(){return{type:"Polygon",coordinates:[vn(gn).concat(Lt(Vn).slice(1),vn(En).reverse().slice(1),Lt(Jn).reverse().slice(1))]}},sn.extent=function(Wt){return arguments.length?sn.extentMajor(Wt).extentMinor(Wt):sn.extentMinor()},sn.extentMajor=function(Wt){return arguments.length?(gn=+Wt[0][0],En=+Wt[1][0],Jn=+Wt[0][1],Vn=+Wt[1][1],gn>En&&(Wt=gn,gn=En,En=Wt),Jn>Vn&&(Wt=Jn,Jn=Vn,Vn=Wt),sn.precision(xn)):[[gn,Jn],[En,Vn]]},sn.extentMinor=function(Wt){return arguments.length?(rn=+Wt[0][0],en=+Wt[1][0],qn=+Wt[0][1],Dn=+Wt[1][1],rn>en&&(Wt=rn,rn=en,en=Wt),qn>Dn&&(Wt=qn,qn=Dn,Dn=Wt),sn.precision(xn)):[[rn,qn],[en,Dn]]},sn.step=function(Wt){return arguments.length?sn.stepMajor(Wt).stepMinor(Wt):sn.stepMinor()},sn.stepMajor=function(Wt){return arguments.length?(fn=+Wt[0],dn=+Wt[1],sn):[fn,dn]},sn.stepMinor=function(Wt){return arguments.length?(Nt=+Wt[0],$t=+Wt[1],sn):[Nt,$t]},sn.precision=function(Wt){return arguments.length?(xn=+Wt,xr=B(qn,Dn,90),Jt=U(rn,en,xn),vn=B(Jn,Vn,90),Lt=U(gn,En,xn),sn):xn},sn.extentMajor([[-180,-90+c.Gg],[180,90-c.Gg]]).extentMinor([[-180,-80-c.Gg],[180,80+c.Gg]])}function te(){return q()()}var ee,Q,J,K,X=e(27284),ie=e(7376),se=(0,l.c)(),ae=(0,l.c)(),ue={point:d.c,lineStart:d.c,lineEnd:d.c,polygonStart:function(){ue.lineStart=ve,ue.lineEnd=de},polygonEnd:function(){ue.lineStart=ue.lineEnd=ue.point=d.c,se.add((0,c.a2)(ae)),ae.reset()},result:function(){var en=se/2;return se.reset(),en}};function ve(){ue.point=ye}function ye(en,rn){ue.point=pe,ee=J=en,Q=K=rn}function pe(en,rn){ae.add(K*en-J*rn),J=en,K=rn}function de(){pe(ee,Q)}var me,ke,Ce,ge,oe=ue,re=e(73784),fe=0,Se=0,be=0,we=0,Me=0,Pe=0,De=0,he=0,_e=0,Ae={point:Oe,lineStart:Ee,lineEnd:Ze,polygonStart:function(){Ae.lineStart=it,Ae.lineEnd=at},polygonEnd:function(){Ae.point=Oe,Ae.lineStart=Ee,Ae.lineEnd=Ze},result:function(){var en=_e?[De/_e,he/_e]:Pe?[we/Pe,Me/Pe]:be?[fe/be,Se/be]:[NaN,NaN];return fe=Se=be=we=Me=Pe=De=he=_e=0,en}};function Oe(en,rn){fe+=en,Se+=rn,++be}function Ee(){Ae.point=Be}function Be(en,rn){Ae.point=Ve,Oe(Ce=en,ge=rn)}function Ve(en,rn){var En=en-Ce,gn=rn-ge,Dn=(0,c._I)(En*En+gn*gn);we+=Dn*(Ce+en)/2,Me+=Dn*(ge+rn)/2,Pe+=Dn,Oe(Ce=en,ge=rn)}function Ze(){Ae.point=Oe}function it(){Ae.point=gt}function at(){yt(me,ke)}function gt(en,rn){Ae.point=yt,Oe(me=Ce=en,ke=ge=rn)}function yt(en,rn){var En=en-Ce,gn=rn-ge,Dn=(0,c._I)(En*En+gn*gn);we+=Dn*(Ce+en)/2,Me+=Dn*(ge+rn)/2,Pe+=Dn,De+=(Dn=ge*en-Ce*rn)*(Ce+en),he+=Dn*(ge+rn),_e+=3*Dn,Oe(Ce=en,ge=rn)}var pt=Ae;function et(en){this._context=en}et.prototype={_radius:4.5,pointRadius:function(en){return this._radius=en,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(en,rn){switch(this._point){case 0:this._context.moveTo(en,rn),this._point=1;break;case 1:this._context.lineTo(en,rn);break;default:this._context.moveTo(en+this._radius,rn),this._context.arc(en,rn,this._radius,0,c.kD)}},result:d.c};var $e,At,Ot,Rt,Ct,Ge=(0,l.c)(),Xe={point:d.c,lineStart:function(){Xe.point=Ne},lineEnd:function(){$e&&Ye(At,Ot),Xe.point=d.c},polygonStart:function(){$e=!0},polygonEnd:function(){$e=null},result:function(){var en=+Ge;return Ge.reset(),en}};function Ne(en,rn){Xe.point=Ye,At=Rt=en,Ot=Ct=rn}function Ye(en,rn){Rt-=en,Ct-=rn,Ge.add((0,c._I)(Rt*Rt+Ct*Ct)),Rt=en,Ct=rn}var ot=Xe;function nt(){this._string=[]}function ze(en){return"m0,"+en+"a"+en+","+en+" 0 1,1 0,"+-2*en+"a"+en+","+en+" 0 1,1 0,"+2*en+"z"}function Fe(en,rn){var En,gn,Dn=4.5;function qn(Vn){return Vn&&(typeof Dn=="function"&&gn.pointRadius(+Dn.apply(this,arguments)),(0,u.c)(Vn,En(gn))),gn.result()}return qn.area=function(Vn){return(0,u.c)(Vn,En(oe)),oe.result()},qn.measure=function(Vn){return(0,u.c)(Vn,En(ot)),ot.result()},qn.bounds=function(Vn){return(0,u.c)(Vn,En(re.c)),re.c.result()},qn.centroid=function(Vn){return(0,u.c)(Vn,En(pt)),pt.result()},qn.projection=function(Vn){return arguments.length?(En=Vn==null?(en=null,ie.c):(en=Vn).stream,qn):en},qn.context=function(Vn){return arguments.length?(gn=Vn==null?(rn=null,new nt):new et(rn=Vn),typeof Dn!="function"&&gn.pointRadius(Dn),qn):rn},qn.pointRadius=function(Vn){return arguments.length?(Dn=typeof Vn=="function"?Vn:(gn.pointRadius(+Vn),+Vn),qn):Dn},qn.projection(en).context(rn)}nt.prototype={_radius:4.5,_circle:ze(4.5),pointRadius:function(en){return(en=+en)!==this._radius&&(this._radius=en,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(en,rn){switch(this._point){case 0:this._string.push("M",en,",",rn),this._point=1;break;case 1:this._string.push("L",en,",",rn);break;default:this._circle==null&&(this._circle=ze(this._radius)),this._string.push("M",en,",",rn,this._circle)}},result:function(){if(this._string.length){var en=this._string.join("");return this._string=[],en}return null}};var rt=e(87952);function We(en){var rn=0,En=c.pi/3,gn=(0,rt.U)(en),Dn=gn(rn,En);return Dn.parallels=function(qn){return arguments.length?gn(rn=qn[0]*c.qw,En=qn[1]*c.qw):[rn*c.oh,En*c.oh]},Dn}function ft(en,rn){var En=(0,c.g$)(en),gn=(En+(0,c.g$)(rn))/2;if((0,c.a2)(gn)<c.Gg)return function(Jn){var xr=(0,c.W8)(Jn);function Jt(vn,Lt){return[vn*xr,(0,c.g$)(Lt)/xr]}return Jt.invert=function(vn,Lt){return[vn/xr,(0,c.qR)(Lt*xr)]},Jt}(en);var Dn=1+En*(2*gn-En),qn=(0,c._I)(Dn)/gn;function Vn(Jn,xr){var Jt=(0,c._I)(Dn-2*gn*(0,c.g$)(xr))/gn;return[Jt*(0,c.g$)(Jn*=gn),qn-Jt*(0,c.W8)(Jn)]}return Vn.invert=function(Jn,xr){var Jt=qn-xr,vn=(0,c.WE)(Jn,(0,c.a2)(Jt))*(0,c.kq)(Jt);return Jt*gn<0&&(vn-=c.pi*(0,c.kq)(Jn)*(0,c.kq)(Jt)),[vn/gn,(0,c.qR)((Dn-(Jn*Jn+Jt*Jt)*gn*gn)/(2*gn))]},Vn}function mt(){return We(ft).scale(155.424).center([0,33.6442])}function vt(){return mt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ut=e(86420);function Mt(){var en,rn,En,gn,Dn,qn,Vn=vt(),Jn=mt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),xr=mt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Jt={point:function(Nt,$t){qn=[Nt,$t]}};function vn(Nt){var $t=Nt[0],fn=Nt[1];return qn=null,En.point($t,fn),qn||(gn.point($t,fn),qn)||(Dn.point($t,fn),qn)}function Lt(){return en=rn=null,vn}return vn.invert=function(Nt){var $t=Vn.scale(),fn=Vn.translate(),dn=(Nt[0]-fn[0])/$t,xn=(Nt[1]-fn[1])/$t;return(xn>=.12&&xn<.234&&dn>=-.425&&dn<-.214?Jn:xn>=.166&&xn<.234&&dn>=-.214&&dn<-.115?xr:Vn).invert(Nt)},vn.stream=function(Nt){return en&&rn===Nt?en:($t=[Vn.stream(rn=Nt),Jn.stream(Nt),xr.stream(Nt)],fn=$t.length,en={point:function(dn,xn){for(var sn=-1;++sn<fn;)$t[sn].point(dn,xn)},sphere:function(){for(var dn=-1;++dn<fn;)$t[dn].sphere()},lineStart:function(){for(var dn=-1;++dn<fn;)$t[dn].lineStart()},lineEnd:function(){for(var dn=-1;++dn<fn;)$t[dn].lineEnd()},polygonStart:function(){for(var dn=-1;++dn<fn;)$t[dn].polygonStart()},polygonEnd:function(){for(var dn=-1;++dn<fn;)$t[dn].polygonEnd()}});var $t,fn},vn.precision=function(Nt){return arguments.length?(Vn.precision(Nt),Jn.precision(Nt),xr.precision(Nt),Lt()):Vn.precision()},vn.scale=function(Nt){return arguments.length?(Vn.scale(Nt),Jn.scale(.35*Nt),xr.scale(Nt),vn.translate(Vn.translate())):Vn.scale()},vn.translate=function(Nt){if(!arguments.length)return Vn.translate();var $t=Vn.scale(),fn=+Nt[0],dn=+Nt[1];return En=Vn.translate(Nt).clipExtent([[fn-.455*$t,dn-.238*$t],[fn+.455*$t,dn+.238*$t]]).stream(Jt),gn=Jn.translate([fn-.307*$t,dn+.201*$t]).clipExtent([[fn-.425*$t+c.Gg,dn+.12*$t+c.Gg],[fn-.214*$t-c.Gg,dn+.234*$t-c.Gg]]).stream(Jt),Dn=xr.translate([fn-.205*$t,dn+.212*$t]).clipExtent([[fn-.214*$t+c.Gg,dn+.166*$t+c.Gg],[fn-.115*$t-c.Gg,dn+.234*$t-c.Gg]]).stream(Jt),Lt()},vn.fitExtent=function(Nt,$t){return(0,ut.QX)(vn,Nt,$t)},vn.fitSize=function(Nt,$t){return(0,ut.UV)(vn,Nt,$t)},vn.fitWidth=function(Nt,$t){return(0,ut.Qx)(vn,Nt,$t)},vn.fitHeight=function(Nt,$t){return(0,ut.OW)(vn,Nt,$t)},vn.scale(1070)}var bt=e(54724),St=e(69020),Pt=e(92992);function Dt(en,rn){return[en,(0,c.Yz)((0,c.a6)((c.or+rn)/2))]}function Ft(){return Xt(Dt).scale(961/c.kD)}function Xt(en){var rn,En,gn,Dn=(0,rt.c)(en),qn=Dn.center,Vn=Dn.scale,Jn=Dn.translate,xr=Dn.clipExtent,Jt=null;function vn(){var Lt=c.pi*Vn(),Nt=Dn((0,Pt.c)(Dn.rotate()).invert([0,0]));return xr(Jt==null?[[Nt[0]-Lt,Nt[1]-Lt],[Nt[0]+Lt,Nt[1]+Lt]]:en===Dt?[[Math.max(Nt[0]-Lt,Jt),rn],[Math.min(Nt[0]+Lt,En),gn]]:[[Jt,Math.max(Nt[1]-Lt,rn)],[En,Math.min(Nt[1]+Lt,gn)]])}return Dn.scale=function(Lt){return arguments.length?(Vn(Lt),vn()):Vn()},Dn.translate=function(Lt){return arguments.length?(Jn(Lt),vn()):Jn()},Dn.center=function(Lt){return arguments.length?(qn(Lt),vn()):qn()},Dn.clipExtent=function(Lt){return arguments.length?(Lt==null?Jt=rn=En=gn=null:(Jt=+Lt[0][0],rn=+Lt[0][1],En=+Lt[1][0],gn=+Lt[1][1]),vn()):Jt==null?null:[[Jt,rn],[En,gn]]},vn()}function an(en){return(0,c.a6)((c.or+en)/2)}function Ht(en,rn){var En=(0,c.W8)(en),gn=en===rn?(0,c.g$)(en):(0,c.Yz)(En/(0,c.W8)(rn))/(0,c.Yz)(an(rn)/an(en)),Dn=En*(0,c.g3)(an(en),gn)/gn;if(!gn)return Dt;function qn(Vn,Jn){Dn>0?Jn<-c.or+c.Gg&&(Jn=-c.or+c.Gg):Jn>c.or-c.Gg&&(Jn=c.or-c.Gg);var xr=Dn/(0,c.g3)(an(Jn),gn);return[xr*(0,c.g$)(gn*Vn),Dn-xr*(0,c.W8)(gn*Vn)]}return qn.invert=function(Vn,Jn){var xr=Dn-Jn,Jt=(0,c.kq)(gn)*(0,c._I)(Vn*Vn+xr*xr),vn=(0,c.WE)(Vn,(0,c.a2)(xr))*(0,c.kq)(xr);return xr*gn<0&&(vn-=c.pi*(0,c.kq)(Vn)*(0,c.kq)(xr)),[vn/gn,2*(0,c.MQ)((0,c.g3)(Dn/Jt,1/gn))-c.or]},qn}function Zt(){return We(Ht).scale(109.5).parallels([30,30])}Dt.invert=function(en,rn){return[en,2*(0,c.MQ)((0,c.oN)(rn))-c.or]};var jt=e(69604);function Pn(en,rn){var En=(0,c.W8)(en),gn=en===rn?(0,c.g$)(en):(En-(0,c.W8)(rn))/(rn-en),Dn=En/gn+en;if((0,c.a2)(gn)<c.Gg)return jt.u;function qn(Vn,Jn){var xr=Dn-Jn,Jt=gn*Vn;return[xr*(0,c.g$)(Jt),Dn-xr*(0,c.W8)(Jt)]}return qn.invert=function(Vn,Jn){var xr=Dn-Jn,Jt=(0,c.WE)(Vn,(0,c.a2)(xr))*(0,c.kq)(xr);return xr*gn<0&&(Jt-=c.pi*(0,c.kq)(Vn)*(0,c.kq)(xr)),[Jt/gn,Dn-(0,c.kq)(gn)*(0,c._I)(Vn*Vn+xr*xr)]},qn}function Tn(){return We(Pn).scale(131.154).center([0,13.9389])}var mn=1.340264,Qt=-.081106,un=893e-6,nn=.003796,hn=(0,c._I)(3)/2;function bn(en,rn){var En=(0,c.qR)(hn*(0,c.g$)(rn)),gn=En*En,Dn=gn*gn*gn;return[en*(0,c.W8)(En)/(hn*(mn+3*Qt*gn+Dn*(7*un+9*nn*gn))),En*(mn+Qt*gn+Dn*(un+nn*gn))]}function wn(){return(0,rt.c)(bn).scale(177.158)}bn.invert=function(en,rn){for(var En,gn=rn,Dn=gn*gn,qn=Dn*Dn*Dn,Vn=0;Vn<12&&(qn=(Dn=(gn-=En=(gn*(mn+Qt*Dn+qn*(un+nn*Dn))-rn)/(mn+3*Qt*Dn+qn*(7*un+9*nn*Dn)))*gn)*Dn*Dn,!((0,c.a2)(En)<c.a8));++Vn);return[hn*en*(mn+3*Qt*Dn+qn*(7*un+9*nn*Dn))/(0,c.W8)(gn),(0,c.qR)((0,c.g$)(gn)/hn)]};var Cn=e(53285),Ln=e(15196);function Mn(){var en,rn,En,gn,Dn,qn,Vn,Jn=1,xr=0,Jt=0,vn=1,Lt=1,Nt=0,$t=null,fn=1,dn=1,xn=(0,Ln.s)({point:function(tn,ln){var An=Wt([tn,ln]);this.stream.point(An[0],An[1])}}),sn=ie.c;function Yt(){return fn=Jn*vn,dn=Jn*Lt,qn=Vn=null,Wt}function Wt(tn){var ln=tn[0]*fn,An=tn[1]*dn;if(Nt){var In=An*en-ln*rn;ln=ln*en+An*rn,An=In}return[ln+xr,An+Jt]}return Wt.invert=function(tn){var ln=tn[0]-xr,An=tn[1]-Jt;if(Nt){var In=An*en+ln*rn;ln=ln*en-An*rn,An=In}return[ln/fn,An/dn]},Wt.stream=function(tn){return qn&&Vn===tn?qn:qn=xn(sn(Vn=tn))},Wt.postclip=function(tn){return arguments.length?(sn=tn,$t=En=gn=Dn=null,Yt()):sn},Wt.clipExtent=function(tn){return arguments.length?(sn=tn==null?($t=En=gn=Dn=null,ie.c):(0,s.c)($t=+tn[0][0],En=+tn[0][1],gn=+tn[1][0],Dn=+tn[1][1]),Yt()):$t==null?null:[[$t,En],[gn,Dn]]},Wt.scale=function(tn){return arguments.length?(Jn=+tn,Yt()):Jn},Wt.translate=function(tn){return arguments.length?(xr=+tn[0],Jt=+tn[1],Yt()):[xr,Jt]},Wt.angle=function(tn){return arguments.length?(Nt=tn%360*c.qw,rn=(0,c.g$)(Nt),en=(0,c.W8)(Nt),Yt()):Nt*c.oh},Wt.reflectX=function(tn){return arguments.length?(vn=tn?-1:1,Yt()):vn<0},Wt.reflectY=function(tn){return arguments.length?(Lt=tn?-1:1,Yt()):Lt<0},Wt.fitExtent=function(tn,ln){return(0,ut.QX)(Wt,tn,ln)},Wt.fitSize=function(tn,ln){return(0,ut.UV)(Wt,tn,ln)},Wt.fitWidth=function(tn,ln){return(0,ut.Qx)(Wt,tn,ln)},Wt.fitHeight=function(tn,ln){return(0,ut.OW)(Wt,tn,ln)},Wt}var jn=e(47984),Rn=e(4888),Qn=e(62280);function Yn(en,rn){var En=(0,c.W8)(rn),gn=1+(0,c.W8)(en)*En;return[En*(0,c.g$)(en)/gn,(0,c.g$)(rn)/gn]}function ar(){return(0,rt.c)(Yn).scale(250).clipAngle(142)}function Kn(en,rn){return[(0,c.Yz)((0,c.a6)((c.or+rn)/2)),-en]}function mr(){var en=Xt(Kn),rn=en.center,En=en.rotate;return en.center=function(gn){return arguments.length?rn([-gn[1],gn[0]]):[(gn=rn())[1],-gn[0]]},en.rotate=function(gn){return arguments.length?En([gn[0],gn[1],gn.length>2?gn[2]+90:90]):[(gn=En())[0],gn[1],gn[2]-90]},En([0,0,90]).scale(159.155)}Yn.invert=(0,Qn.g)(function(en){return 2*(0,c.MQ)(en)}),Kn.invert=function(en,rn){return[-rn,2*(0,c.MQ)((0,c.oN)(en))-c.or]}},27284:function(F,C,e){"use strict";e.d(C,{c:function(){return k}});var T=e(64528);function k(a,w){var b=a[0]*T.qw,f=a[1]*T.qw,s=w[0]*T.qw,t=w[1]*T.qw,i=(0,T.W8)(f),r=(0,T.g$)(f),n=(0,T.W8)(t),o=(0,T.g$)(t),l=i*(0,T.W8)(b),c=i*(0,T.g$)(b),d=n*(0,T.W8)(s),u=n*(0,T.g$)(s),x=2*(0,T.qR)((0,T._I)((0,T.SD)(t-f)+i*n*(0,T.SD)(s-b))),p=(0,T.g$)(x),g=x?function(m){var y=(0,T.g$)(m*=x)/p,v=(0,T.g$)(x-m)/p,_=v*l+y*d,h=v*c+y*u,S=v*r+y*o;return[(0,T.WE)(h,_)*T.oh,(0,T.WE)(S,(0,T._I)(_*_+h*h))*T.oh]}:function(){return[b*T.oh,f*T.oh]};return g.distance=x,g}},64528:function(F,C,e){"use strict";e.d(C,{Gg:function(){return T},Km:function(){return l},MQ:function(){return r},SD:function(){return _},W8:function(){return o},WE:function(){return n},Yz:function(){return d},_I:function(){return g},a2:function(){return i},a6:function(){return m},a8:function(){return k},g$:function(){return x},g3:function(){return u},kD:function(){return f},kq:function(){return p},mE:function(){return y},oN:function(){return c},oh:function(){return s},or:function(){return w},pi:function(){return a},qR:function(){return v},qw:function(){return t},wL:function(){return b}});var T=1e-6,k=1e-12,a=Math.PI,w=a/2,b=a/4,f=2*a,s=180/a,t=a/180,i=Math.abs,r=Math.atan,n=Math.atan2,o=Math.cos,l=Math.ceil,c=Math.exp,d=Math.log,u=Math.pow,x=Math.sin,p=Math.sign||function(h){return h>0?1:h<0?-1:0},g=Math.sqrt,m=Math.tan;function y(h){return h>1?0:h<-1?a:Math.acos(h)}function v(h){return h>1?w:h<-1?-w:Math.asin(h)}function _(h){return(h=x(h/2))*h}},70932:function(F,C,e){"use strict";function T(){}e.d(C,{c:function(){return T}})},73784:function(F,C,e){"use strict";var T=e(70932),k=1/0,a=k,w=-k,b=w,f={point:function(s,t){s<k&&(k=s),s>w&&(w=s),t<a&&(a=t),t>b&&(b=t)},lineStart:T.c,lineEnd:T.c,polygonStart:T.c,polygonEnd:T.c,result:function(){var s=[[k,a],[w,b]];return w=b=-(a=k=1/0),s}};C.c=f},41860:function(F,C,e){"use strict";e.d(C,{c:function(){return k}});var T=e(64528);function k(a,w){return(0,T.a2)(a[0]-w[0])<T.Gg&&(0,T.a2)(a[1]-w[1])<T.Gg}},58196:function(F,C,e){"use strict";e.d(C,{c:function(){return f}});var T=e(88728),k=e(84220),a=e(64528),w=(0,T.c)();function b(s){return(0,a.a2)(s[0])<=a.pi?s[0]:(0,a.kq)(s[0])*(((0,a.a2)(s[0])+a.pi)%a.kD-a.pi)}function f(s,t){var i=b(t),r=t[1],n=(0,a.g$)(r),o=[(0,a.g$)(i),-(0,a.W8)(i),0],l=0,c=0;w.reset(),n===1?r=a.or+a.Gg:n===-1&&(r=-a.or-a.Gg);for(var d=0,u=s.length;d<u;++d)if(p=(x=s[d]).length)for(var x,p,g=x[p-1],m=b(g),y=g[1]/2+a.wL,v=(0,a.g$)(y),_=(0,a.W8)(y),h=0;h<p;++h,m=A,v=P,_=I,g=S){var S=x[h],A=b(S),E=S[1]/2+a.wL,P=(0,a.g$)(E),I=(0,a.W8)(E),D=A-m,z=D>=0?1:-1,V=z*D,O=V>a.pi,j=v*P;if(w.add((0,a.WE)(j*z*(0,a.g$)(V),_*I+j*(0,a.W8)(V))),l+=O?D+z*a.kD:D,O^m>=i^A>=i){var Y=(0,k.CW)((0,k.ux)(g),(0,k.ux)(S));(0,k.cJ)(Y);var B=(0,k.CW)(o,Y);(0,k.cJ)(B);var U=(O^D>=0?-1:1)*(0,a.qR)(B[2]);(r>U||r===U&&(Y[0]||Y[1]))&&(c+=O^D>=0?1:-1)}}return(l<-a.Gg||l<a.Gg&&w<-a.Gg)^1&c}},62280:function(F,C,e){"use strict";e.d(C,{a:function(){return k},g:function(){return a}});var T=e(64528);function k(w){return function(b,f){var s=(0,T.W8)(b),t=(0,T.W8)(f),i=w(s*t);return[i*t*(0,T.g$)(b),i*(0,T.g$)(f)]}}function a(w){return function(b,f){var s=(0,T._I)(b*b+f*f),t=w(s),i=(0,T.g$)(t),r=(0,T.W8)(t);return[(0,T.WE)(b*i,s*r),(0,T.qR)(s&&f*i/s)]}}},54724:function(F,C,e){"use strict";e.d(C,{c:function(){return b},y:function(){return w}});var T=e(64528),k=e(62280),a=e(87952),w=(0,k.a)(function(f){return(0,T._I)(2/(1+f))});function b(){return(0,a.c)(w).scale(124.75).clipAngle(179.999)}w.invert=(0,k.g)(function(f){return 2*(0,T.qR)(f/2)})},69020:function(F,C,e){"use strict";e.d(C,{O:function(){return w},c:function(){return b}});var T=e(64528),k=e(62280),a=e(87952),w=(0,k.a)(function(f){return(f=(0,T.mE)(f))&&f/(0,T.g$)(f)});function b(){return(0,a.c)(w).scale(79.4188).clipAngle(179.999)}w.invert=(0,k.g)(function(f){return f})},69604:function(F,C,e){"use strict";e.d(C,{c:function(){return a},u:function(){return k}});var T=e(87952);function k(w,b){return[w,b]}function a(){return(0,T.c)(k).scale(152.63)}k.invert=k},86420:function(F,C,e){"use strict";e.d(C,{OW:function(){return s},QX:function(){return w},Qx:function(){return f},UV:function(){return b}});var T=e(16016),k=e(73784);function a(t,i,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),(0,T.c)(r,t.stream(k.c)),i(k.c.result()),n!=null&&t.clipExtent(n),t}function w(t,i,r){return a(t,function(n){var o=i[1][0]-i[0][0],l=i[1][1]-i[0][1],c=Math.min(o/(n[1][0]-n[0][0]),l/(n[1][1]-n[0][1])),d=+i[0][0]+(o-c*(n[1][0]+n[0][0]))/2,u=+i[0][1]+(l-c*(n[1][1]+n[0][1]))/2;t.scale(150*c).translate([d,u])},r)}function b(t,i,r){return w(t,[[0,0],i],r)}function f(t,i,r){return a(t,function(n){var o=+i,l=o/(n[1][0]-n[0][0]),c=(o-l*(n[1][0]+n[0][0]))/2,d=-l*n[0][1];t.scale(150*l).translate([c,d])},r)}function s(t,i,r){return a(t,function(n){var o=+i,l=o/(n[1][1]-n[0][1]),c=-l*n[0][0],d=(o-l*(n[1][1]+n[0][1]))/2;t.scale(150*l).translate([c,d])},r)}},53285:function(F,C,e){"use strict";e.d(C,{Y:function(){return w},c:function(){return b}});var T=e(64528),k=e(62280),a=e(87952);function w(f,s){var t=(0,T.W8)(s),i=(0,T.W8)(f)*t;return[t*(0,T.g$)(f)/i,(0,T.g$)(s)/i]}function b(){return(0,a.c)(w).scale(144.049).clipAngle(60)}w.invert=(0,k.g)(T.MQ)},87952:function(F,C,e){"use strict";e.d(C,{c:function(){return x},U:function(){return p}});var T=e(78284),k=e(2728),a=e(21676),w=e(68120),b=e(7376),f=e(64528),s=e(92992),t=e(15196),i=e(86420),r=e(84220),n=16,o=(0,f.W8)(30*f.qw);function l(g,m){return+m?function(y,v){function _(h,S,A,E,P,I,D,z,V,O,j,Y,B,U){var q=D-h,te=z-S,ee=q*q+te*te;if(ee>4*v&&B--){var Q=E+O,J=P+j,K=I+Y,X=(0,f._I)(Q*Q+J*J+K*K),ie=(0,f.qR)(K/=X),se=(0,f.a2)((0,f.a2)(K)-1)<f.Gg||(0,f.a2)(A-V)<f.Gg?(A+V)/2:(0,f.WE)(J,Q),ae=y(se,ie),ue=ae[0],ve=ae[1],ye=ue-h,pe=ve-S,de=te*ye-q*pe;(de*de/ee>v||(0,f.a2)((q*ye+te*pe)/ee-.5)>.3||E*O+P*j+I*Y<o)&&(_(h,S,A,E,P,I,ue,ve,se,Q/=X,J/=X,K,B,U),U.point(ue,ve),_(ue,ve,se,Q,J,K,D,z,V,O,j,Y,B,U))}}return function(h){var S,A,E,P,I,D,z,V,O,j,Y,B,U={point:q,lineStart:te,lineEnd:Q,polygonStart:function(){h.polygonStart(),U.lineStart=J},polygonEnd:function(){h.polygonEnd(),U.lineStart=te}};function q(ie,se){ie=y(ie,se),h.point(ie[0],ie[1])}function te(){V=NaN,U.point=ee,h.lineStart()}function ee(ie,se){var ae=(0,r.ux)([ie,se]),ue=y(ie,se);_(V,O,z,j,Y,B,V=ue[0],O=ue[1],z=ie,j=ae[0],Y=ae[1],B=ae[2],n,h),h.point(V,O)}function Q(){U.point=q,h.lineEnd()}function J(){te(),U.point=K,U.lineEnd=X}function K(ie,se){ee(S=ie,se),A=V,E=O,P=j,I=Y,D=B,U.point=ee}function X(){_(V,O,z,j,Y,B,A,E,S,P,I,D,n,h),U.lineEnd=Q,Q()}return U}}(g,m):function(y){return(0,t.s)({point:function(v,_){v=y(v,_),this.stream.point(v[0],v[1])}})}(g)}var c=(0,t.s)({point:function(g,m){this.stream.point(g*f.qw,m*f.qw)}});function d(g,m,y,v,_){function h(S,A){return[m+g*(S*=v),y-g*(A*=_)]}return h.invert=function(S,A){return[(S-m)/g*v,(y-A)/g*_]},h}function u(g,m,y,v,_,h){var S=(0,f.W8)(h),A=(0,f.g$)(h),E=S*g,P=A*g,I=S/g,D=A/g,z=(A*y-S*m)/g,V=(A*m+S*y)/g;function O(j,Y){return[E*(j*=v)-P*(Y*=_)+m,y-P*j-E*Y]}return O.invert=function(j,Y){return[v*(I*j-D*Y+z),_*(V-D*j-I*Y)]},O}function x(g){return p(function(){return g})()}function p(g){var m,y,v,_,h,S,A,E,P,I,D=150,z=480,V=250,O=0,j=0,Y=0,B=0,U=0,q=0,te=1,ee=1,Q=null,J=T.c,K=null,X=b.c,ie=.5;function se(ye){return E(ye[0]*f.qw,ye[1]*f.qw)}function ae(ye){return(ye=E.invert(ye[0],ye[1]))&&[ye[0]*f.oh,ye[1]*f.oh]}function ue(){var ye=u(D,0,0,te,ee,q).apply(null,m(O,j)),pe=(q?u:d)(D,z-ye[0],V-ye[1],te,ee,q);return y=(0,s.O)(Y,B,U),A=(0,w.c)(m,pe),E=(0,w.c)(y,A),S=l(A,ie),ve()}function ve(){return P=I=null,se}return se.stream=function(ye){return P&&I===ye?P:P=c(function(pe){return(0,t.s)({point:function(de,me){var ke=pe(de,me);return this.stream.point(ke[0],ke[1])}})}(y)(J(S(X(I=ye)))))},se.preclip=function(ye){return arguments.length?(J=ye,Q=void 0,ve()):J},se.postclip=function(ye){return arguments.length?(X=ye,K=v=_=h=null,ve()):X},se.clipAngle=function(ye){return arguments.length?(J=+ye?(0,k.c)(Q=ye*f.qw):(Q=null,T.c),ve()):Q*f.oh},se.clipExtent=function(ye){return arguments.length?(X=ye==null?(K=v=_=h=null,b.c):(0,a.c)(K=+ye[0][0],v=+ye[0][1],_=+ye[1][0],h=+ye[1][1]),ve()):K==null?null:[[K,v],[_,h]]},se.scale=function(ye){return arguments.length?(D=+ye,ue()):D},se.translate=function(ye){return arguments.length?(z=+ye[0],V=+ye[1],ue()):[z,V]},se.center=function(ye){return arguments.length?(O=ye[0]%360*f.qw,j=ye[1]%360*f.qw,ue()):[O*f.oh,j*f.oh]},se.rotate=function(ye){return arguments.length?(Y=ye[0]%360*f.qw,B=ye[1]%360*f.qw,U=ye.length>2?ye[2]%360*f.qw:0,ue()):[Y*f.oh,B*f.oh,U*f.oh]},se.angle=function(ye){return arguments.length?(q=ye%360*f.qw,ue()):q*f.oh},se.reflectX=function(ye){return arguments.length?(te=ye?-1:1,ue()):te<0},se.reflectY=function(ye){return arguments.length?(ee=ye?-1:1,ue()):ee<0},se.precision=function(ye){return arguments.length?(S=l(A,ie=ye*ye),ve()):(0,f._I)(ie)},se.fitExtent=function(ye,pe){return(0,i.QX)(se,ye,pe)},se.fitSize=function(ye,pe){return(0,i.UV)(se,ye,pe)},se.fitWidth=function(ye,pe){return(0,i.Qx)(se,ye,pe)},se.fitHeight=function(ye,pe){return(0,i.OW)(se,ye,pe)},function(){return m=g.apply(this,arguments),se.invert=m.invert&&ae,ue()}}},47984:function(F,C,e){"use strict";e.d(C,{c:function(){return w},g:function(){return a}});var T=e(87952),k=e(64528);function a(b,f){var s=f*f,t=s*s;return[b*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),f*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function w(){return(0,T.c)(a).scale(175.295)}a.invert=function(b,f){var s,t=f,i=25;do{var r=t*t,n=r*r;t-=s=(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-f)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.a2)(s)>k.Gg&&--i>0);return[b/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]}},4888:function(F,C,e){"use strict";e.d(C,{c:function(){return b},t:function(){return w}});var T=e(64528),k=e(62280),a=e(87952);function w(f,s){return[(0,T.W8)(s)*(0,T.g$)(f),(0,T.g$)(s)]}function b(){return(0,a.c)(w).scale(249.5).clipAngle(90+T.Gg)}w.invert=(0,k.g)(T.qR)},92992:function(F,C,e){"use strict";e.d(C,{O:function(){return w},c:function(){return t}});var T=e(68120),k=e(64528);function a(i,r){return[(0,k.a2)(i)>k.pi?i+Math.round(-i/k.kD)*k.kD:i,r]}function w(i,r,n){return(i%=k.kD)?r||n?(0,T.c)(f(i),s(r,n)):f(i):r||n?s(r,n):a}function b(i){return function(r,n){return[(r+=i)>k.pi?r-k.kD:r<-k.pi?r+k.kD:r,n]}}function f(i){var r=b(i);return r.invert=b(-i),r}function s(i,r){var n=(0,k.W8)(i),o=(0,k.g$)(i),l=(0,k.W8)(r),c=(0,k.g$)(r);function d(u,x){var p=(0,k.W8)(x),g=(0,k.W8)(u)*p,m=(0,k.g$)(u)*p,y=(0,k.g$)(x),v=y*n+g*o;return[(0,k.WE)(m*l-v*c,g*n-y*o),(0,k.qR)(v*l+m*c)]}return d.invert=function(u,x){var p=(0,k.W8)(x),g=(0,k.W8)(u)*p,m=(0,k.g$)(u)*p,y=(0,k.g$)(x),v=y*l-m*c;return[(0,k.WE)(m*l+y*c,g*n+v*o),(0,k.qR)(v*n-g*o)]},d}function t(i){function r(n){return(n=i(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n}return i=w(i[0]*k.qw,i[1]*k.qw,i.length>2?i[2]*k.qw:0),r.invert=function(n){return(n=i.invert(n[0]*k.qw,n[1]*k.qw))[0]*=k.oh,n[1]*=k.oh,n},r}a.invert=a},16016:function(F,C,e){"use strict";function T(s,t){s&&a.hasOwnProperty(s.type)&&a[s.type](s,t)}e.d(C,{c:function(){return f}});var k={Feature:function(s,t){T(s.geometry,t)},FeatureCollection:function(s,t){for(var i=s.features,r=-1,n=i.length;++r<n;)T(i[r].geometry,t)}},a={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)s=i[r],t.point(s[0],s[1],s[2])},LineString:function(s,t){w(s.coordinates,t,0)},MultiLineString:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)w(i[r],t,0)},Polygon:function(s,t){b(s.coordinates,t)},MultiPolygon:function(s,t){for(var i=s.coordinates,r=-1,n=i.length;++r<n;)b(i[r],t)},GeometryCollection:function(s,t){for(var i=s.geometries,r=-1,n=i.length;++r<n;)T(i[r],t)}};function w(s,t,i){var r,n=-1,o=s.length-i;for(t.lineStart();++n<o;)r=s[n],t.point(r[0],r[1],r[2]);t.lineEnd()}function b(s,t){var i=-1,r=s.length;for(t.polygonStart();++i<r;)w(s[i],t,1);t.polygonEnd()}function f(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):T(s,t)}},15196:function(F,C,e){"use strict";function T(w){return{stream:k(w)}}function k(w){return function(b){var f=new a;for(var s in w)f[s]=w[s];return f.stream=b,f}}function a(){}e.d(C,{c:function(){return T},s:function(){return k}}),a.prototype={constructor:a,point:function(w,b){this.stream.point(w,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(F,C,e){"use strict";function T(re,fe){return re.parent===fe.parent?1:2}function k(re,fe){return re+fe.x}function a(re,fe){return Math.max(re,fe.y)}function w(){var re=T,fe=1,Se=1,be=!1;function we(Me){var Pe,De=0;Me.eachAfter(function(Ee){var Be=Ee.children;Be?(Ee.x=function(Ve){return Ve.reduce(k,0)/Ve.length}(Be),Ee.y=function(Ve){return 1+Ve.reduce(a,0)}(Be)):(Ee.x=Pe?De+=re(Ee,Pe):0,Ee.y=0,Pe=Ee)});var he=function(Ee){for(var Be;Be=Ee.children;)Ee=Be[0];return Ee}(Me),_e=function(Ee){for(var Be;Be=Ee.children;)Ee=Be[Be.length-1];return Ee}(Me),Ae=he.x-re(he,_e)/2,Oe=_e.x+re(_e,he)/2;return Me.eachAfter(be?function(Ee){Ee.x=(Ee.x-Me.x)*fe,Ee.y=(Me.y-Ee.y)*Se}:function(Ee){Ee.x=(Ee.x-Ae)/(Oe-Ae)*fe,Ee.y=(1-(Me.y?Ee.y/Me.y:1))*Se})}return we.separation=function(Me){return arguments.length?(re=Me,we):re},we.size=function(Me){return arguments.length?(be=!1,fe=+Me[0],Se=+Me[1],we):be?null:[fe,Se]},we.nodeSize=function(Me){return arguments.length?(be=!0,fe=+Me[0],Se=+Me[1],we):be?[fe,Se]:null},we}function b(re){var fe=0,Se=re.children,be=Se&&Se.length;if(be)for(;--be>=0;)fe+=Se[be].value;else fe=1;re.value=fe}function f(re,fe){var Se,be,we,Me,Pe,De=new r(re),he=+re.value&&(De.value=re.value),_e=[De];for(fe==null&&(fe=s);Se=_e.pop();)if(he&&(Se.value=+Se.data.value),(we=fe(Se.data))&&(Pe=we.length))for(Se.children=new Array(Pe),Me=Pe-1;Me>=0;--Me)_e.push(be=Se.children[Me]=new r(we[Me])),be.parent=Se,be.depth=Se.depth+1;return De.eachBefore(i)}function s(re){return re.children}function t(re){re.data=re.data.data}function i(re){var fe=0;do re.height=fe;while((re=re.parent)&&re.height<++fe)}function r(re){this.data=re,this.depth=this.height=0,this.parent=null}e.r(C),e.d(C,{cluster:function(){return w},hierarchy:function(){return f},pack:function(){return D},packEnclose:function(){return o},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return J},tree:function(){return ve},treemap:function(){return ke},treemapBinary:function(){return Ce},treemapDice:function(){return Y},treemapResquarify:function(){return oe},treemapSlice:function(){return ye},treemapSliceDice:function(){return ge},treemapSquarify:function(){return me}}),r.prototype=f.prototype={constructor:r,count:function(){return this.eachAfter(b)},each:function(re){var fe,Se,be,we,Me=this,Pe=[Me];do for(fe=Pe.reverse(),Pe=[];Me=fe.pop();)if(re(Me),Se=Me.children)for(be=0,we=Se.length;be<we;++be)Pe.push(Se[be]);while(Pe.length);return this},eachAfter:function(re){for(var fe,Se,be,we=this,Me=[we],Pe=[];we=Me.pop();)if(Pe.push(we),fe=we.children)for(Se=0,be=fe.length;Se<be;++Se)Me.push(fe[Se]);for(;we=Pe.pop();)re(we);return this},eachBefore:function(re){for(var fe,Se,be=this,we=[be];be=we.pop();)if(re(be),fe=be.children)for(Se=fe.length-1;Se>=0;--Se)we.push(fe[Se]);return this},sum:function(re){return this.eachAfter(function(fe){for(var Se=+re(fe.data)||0,be=fe.children,we=be&&be.length;--we>=0;)Se+=be[we].value;fe.value=Se})},sort:function(re){return this.eachBefore(function(fe){fe.children&&fe.children.sort(re)})},path:function(re){for(var fe=this,Se=function(Me,Pe){if(Me===Pe)return Me;var De=Me.ancestors(),he=Pe.ancestors(),_e=null;for(Me=De.pop(),Pe=he.pop();Me===Pe;)_e=Me,Me=De.pop(),Pe=he.pop();return _e}(fe,re),be=[fe];fe!==Se;)fe=fe.parent,be.push(fe);for(var we=be.length;re!==Se;)be.splice(we,0,re),re=re.parent;return be},ancestors:function(){for(var re=this,fe=[re];re=re.parent;)fe.push(re);return fe},descendants:function(){var re=[];return this.each(function(fe){re.push(fe)}),re},leaves:function(){var re=[];return this.eachBefore(function(fe){fe.children||re.push(fe)}),re},links:function(){var re=this,fe=[];return re.each(function(Se){Se!==re&&fe.push({source:Se.parent,target:Se})}),fe},copy:function(){return f(this).eachBefore(t)}};var n=Array.prototype.slice;function o(re){for(var fe,Se,be=0,we=(re=function(Pe){for(var De,he,_e=Pe.length;_e;)he=Math.random()*_e--|0,De=Pe[_e],Pe[_e]=Pe[he],Pe[he]=De;return Pe}(n.call(re))).length,Me=[];be<we;)fe=re[be],Se&&d(Se,fe)?++be:(Se=x(Me=l(Me,fe)),be=0);return Se}function l(re,fe){var Se,be;if(u(fe,re))return[fe];for(Se=0;Se<re.length;++Se)if(c(fe,re[Se])&&u(p(re[Se],fe),re))return[re[Se],fe];for(Se=0;Se<re.length-1;++Se)for(be=Se+1;be<re.length;++be)if(c(p(re[Se],re[be]),fe)&&c(p(re[Se],fe),re[be])&&c(p(re[be],fe),re[Se])&&u(g(re[Se],re[be],fe),re))return[re[Se],re[be],fe];throw new Error}function c(re,fe){var Se=re.r-fe.r,be=fe.x-re.x,we=fe.y-re.y;return Se<0||Se*Se<be*be+we*we}function d(re,fe){var Se=re.r-fe.r+1e-6,be=fe.x-re.x,we=fe.y-re.y;return Se>0&&Se*Se>be*be+we*we}function u(re,fe){for(var Se=0;Se<fe.length;++Se)if(!d(re,fe[Se]))return!1;return!0}function x(re){switch(re.length){case 1:return{x:(fe=re[0]).x,y:fe.y,r:fe.r};case 2:return p(re[0],re[1]);case 3:return g(re[0],re[1],re[2])}var fe}function p(re,fe){var Se=re.x,be=re.y,we=re.r,Me=fe.x,Pe=fe.y,De=fe.r,he=Me-Se,_e=Pe-be,Ae=De-we,Oe=Math.sqrt(he*he+_e*_e);return{x:(Se+Me+he/Oe*Ae)/2,y:(be+Pe+_e/Oe*Ae)/2,r:(Oe+we+De)/2}}function g(re,fe,Se){var be=re.x,we=re.y,Me=re.r,Pe=fe.x,De=fe.y,he=fe.r,_e=Se.x,Ae=Se.y,Oe=Se.r,Ee=be-Pe,Be=be-_e,Ve=we-De,Ze=we-Ae,it=he-Me,at=Oe-Me,gt=be*be+we*we-Me*Me,yt=gt-Pe*Pe-De*De+he*he,pt=gt-_e*_e-Ae*Ae+Oe*Oe,et=Be*Ve-Ee*Ze,$e=(Ve*pt-Ze*yt)/(2*et)-be,At=(Ze*it-Ve*at)/et,Ot=(Be*yt-Ee*pt)/(2*et)-we,Rt=(Ee*at-Be*it)/et,Ct=At*At+Rt*Rt-1,Ge=2*(Me+$e*At+Ot*Rt),Xe=$e*$e+Ot*Ot-Me*Me,Ne=-(Ct?(Ge+Math.sqrt(Ge*Ge-4*Ct*Xe))/(2*Ct):Xe/Ge);return{x:be+$e+At*Ne,y:we+Ot+Rt*Ne,r:Ne}}function m(re,fe,Se){var be,we,Me,Pe,De=re.x-fe.x,he=re.y-fe.y,_e=De*De+he*he;_e?(we=fe.r+Se.r,we*=we,Pe=re.r+Se.r,we>(Pe*=Pe)?(be=(_e+Pe-we)/(2*_e),Me=Math.sqrt(Math.max(0,Pe/_e-be*be)),Se.x=re.x-be*De-Me*he,Se.y=re.y-be*he+Me*De):(be=(_e+we-Pe)/(2*_e),Me=Math.sqrt(Math.max(0,we/_e-be*be)),Se.x=fe.x+be*De-Me*he,Se.y=fe.y+be*he+Me*De)):(Se.x=fe.x+Se.r,Se.y=fe.y)}function y(re,fe){var Se=re.r+fe.r-1e-6,be=fe.x-re.x,we=fe.y-re.y;return Se>0&&Se*Se>be*be+we*we}function v(re){var fe=re._,Se=re.next._,be=fe.r+Se.r,we=(fe.x*Se.r+Se.x*fe.r)/be,Me=(fe.y*Se.r+Se.y*fe.r)/be;return we*we+Me*Me}function _(re){this._=re,this.next=null,this.previous=null}function h(re){if(!(we=re.length))return 0;var fe,Se,be,we,Me,Pe,De,he,_e,Ae,Oe;if((fe=re[0]).x=0,fe.y=0,!(we>1))return fe.r;if(Se=re[1],fe.x=-Se.r,Se.x=fe.r,Se.y=0,!(we>2))return fe.r+Se.r;m(Se,fe,be=re[2]),fe=new _(fe),Se=new _(Se),be=new _(be),fe.next=be.previous=Se,Se.next=fe.previous=be,be.next=Se.previous=fe;e:for(De=3;De<we;++De){m(fe._,Se._,be=re[De]),be=new _(be),he=Se.next,_e=fe.previous,Ae=Se._.r,Oe=fe._.r;do if(Ae<=Oe){if(y(he._,be._)){Se=he,fe.next=Se,Se.previous=fe,--De;continue e}Ae+=he._.r,he=he.next}else{if(y(_e._,be._)){(fe=_e).next=Se,Se.previous=fe,--De;continue e}Oe+=_e._.r,_e=_e.previous}while(he!==_e.next);for(be.previous=fe,be.next=Se,fe.next=Se.previous=Se=be,Me=v(fe);(be=be.next)!==Se;)(Pe=v(be))<Me&&(fe=be,Me=Pe);Se=fe.next}for(fe=[Se._],be=Se;(be=be.next)!==Se;)fe.push(be._);for(be=o(fe),De=0;De<we;++De)(fe=re[De]).x-=be.x,fe.y-=be.y;return be.r}function S(re){return h(re),re}function A(re){if(typeof re!="function")throw new Error;return re}function E(){return 0}function P(re){return function(){return re}}function I(re){return Math.sqrt(re.value)}function D(){var re=null,fe=1,Se=1,be=E;function we(Me){return Me.x=fe/2,Me.y=Se/2,re?Me.eachBefore(z(re)).eachAfter(V(be,.5)).eachBefore(O(1)):Me.eachBefore(z(I)).eachAfter(V(E,1)).eachAfter(V(be,Me.r/Math.min(fe,Se))).eachBefore(O(Math.min(fe,Se)/(2*Me.r))),Me}return we.radius=function(Me){return arguments.length?(re=(Pe=Me)==null?null:A(Pe),we):re;var Pe},we.size=function(Me){return arguments.length?(fe=+Me[0],Se=+Me[1],we):[fe,Se]},we.padding=function(Me){return arguments.length?(be=typeof Me=="function"?Me:P(+Me),we):be},we}function z(re){return function(fe){fe.children||(fe.r=Math.max(0,+re(fe)||0))}}function V(re,fe){return function(Se){if(be=Se.children){var be,we,Me,Pe=be.length,De=re(Se)*fe||0;if(De)for(we=0;we<Pe;++we)be[we].r+=De;if(Me=h(be),De)for(we=0;we<Pe;++we)be[we].r-=De;Se.r=Me+De}}}function O(re){return function(fe){var Se=fe.parent;fe.r*=re,Se&&(fe.x=Se.x+re*fe.x,fe.y=Se.y+re*fe.y)}}function j(re){re.x0=Math.round(re.x0),re.y0=Math.round(re.y0),re.x1=Math.round(re.x1),re.y1=Math.round(re.y1)}function Y(re,fe,Se,be,we){for(var Me,Pe=re.children,De=-1,he=Pe.length,_e=re.value&&(be-fe)/re.value;++De<he;)(Me=Pe[De]).y0=Se,Me.y1=we,Me.x0=fe,Me.x1=fe+=Me.value*_e}function B(){var re=1,fe=1,Se=0,be=!1;function we(Me){var Pe=Me.height+1;return Me.x0=Me.y0=Se,Me.x1=re,Me.y1=fe/Pe,Me.eachBefore(function(De,he){return function(_e){_e.children&&Y(_e,_e.x0,De*(_e.depth+1)/he,_e.x1,De*(_e.depth+2)/he);var Ae=_e.x0,Oe=_e.y0,Ee=_e.x1-Se,Be=_e.y1-Se;Ee<Ae&&(Ae=Ee=(Ae+Ee)/2),Be<Oe&&(Oe=Be=(Oe+Be)/2),_e.x0=Ae,_e.y0=Oe,_e.x1=Ee,_e.y1=Be}}(fe,Pe)),be&&Me.eachBefore(j),Me}return we.round=function(Me){return arguments.length?(be=!!Me,we):be},we.size=function(Me){return arguments.length?(re=+Me[0],fe=+Me[1],we):[re,fe]},we.padding=function(Me){return arguments.length?(Se=+Me,we):Se},we}var U="$",q={depth:-1},te={};function ee(re){return re.id}function Q(re){return re.parentId}function J(){var re=ee,fe=Q;function Se(be){var we,Me,Pe,De,he,_e,Ae,Oe=be.length,Ee=new Array(Oe),Be={};for(Me=0;Me<Oe;++Me)we=be[Me],he=Ee[Me]=new r(we),(_e=re(we,Me,be))!=null&&(_e+="")&&(Be[Ae=U+(he.id=_e)]=Ae in Be?te:he);for(Me=0;Me<Oe;++Me)if(he=Ee[Me],(_e=fe(be[Me],Me,be))!=null&&(_e+="")){if(!(De=Be[U+_e]))throw new Error("missing: "+_e);if(De===te)throw new Error("ambiguous: "+_e);De.children?De.children.push(he):De.children=[he],he.parent=De}else{if(Pe)throw new Error("multiple roots");Pe=he}if(!Pe)throw new Error("no root");if(Pe.parent=q,Pe.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--Oe}).eachBefore(i),Pe.parent=null,Oe>0)throw new Error("cycle");return Pe}return Se.id=function(be){return arguments.length?(re=A(be),Se):re},Se.parentId=function(be){return arguments.length?(fe=A(be),Se):fe},Se}function K(re,fe){return re.parent===fe.parent?1:2}function X(re){var fe=re.children;return fe?fe[0]:re.t}function ie(re){var fe=re.children;return fe?fe[fe.length-1]:re.t}function se(re,fe,Se){var be=Se/(fe.i-re.i);fe.c-=be,fe.s+=Se,re.c+=be,fe.z+=Se,fe.m+=Se}function ae(re,fe,Se){return re.a.parent===fe.parent?re.a:Se}function ue(re,fe){this._=re,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=fe}function ve(){var re=K,fe=1,Se=1,be=null;function we(he){var _e=function(at){for(var gt,yt,pt,et,$e,At=new ue(at,0),Ot=[At];gt=Ot.pop();)if(pt=gt._.children)for(gt.children=new Array($e=pt.length),et=$e-1;et>=0;--et)Ot.push(yt=gt.children[et]=new ue(pt[et],et)),yt.parent=gt;return(At.parent=new ue(null,0)).children=[At],At}(he);if(_e.eachAfter(Me),_e.parent.m=-_e.z,_e.eachBefore(Pe),be)he.eachBefore(De);else{var Ae=he,Oe=he,Ee=he;he.eachBefore(function(at){at.x<Ae.x&&(Ae=at),at.x>Oe.x&&(Oe=at),at.depth>Ee.depth&&(Ee=at)});var Be=Ae===Oe?1:re(Ae,Oe)/2,Ve=Be-Ae.x,Ze=fe/(Oe.x+Be+Ve),it=Se/(Ee.depth||1);he.eachBefore(function(at){at.x=(at.x+Ve)*Ze,at.y=at.depth*it})}return he}function Me(he){var _e=he.children,Ae=he.parent.children,Oe=he.i?Ae[he.i-1]:null;if(_e){(function(Be){for(var Ve,Ze=0,it=0,at=Be.children,gt=at.length;--gt>=0;)(Ve=at[gt]).z+=Ze,Ve.m+=Ze,Ze+=Ve.s+(it+=Ve.c)})(he);var Ee=(_e[0].z+_e[_e.length-1].z)/2;Oe?(he.z=Oe.z+re(he._,Oe._),he.m=he.z-Ee):he.z=Ee}else Oe&&(he.z=Oe.z+re(he._,Oe._));he.parent.A=function(Be,Ve,Ze){if(Ve){for(var it,at=Be,gt=Be,yt=Ve,pt=at.parent.children[0],et=at.m,$e=gt.m,At=yt.m,Ot=pt.m;yt=ie(yt),at=X(at),yt&&at;)pt=X(pt),(gt=ie(gt)).a=Be,(it=yt.z+At-at.z-et+re(yt._,at._))>0&&(se(ae(yt,Be,Ze),Be,it),et+=it,$e+=it),At+=yt.m,et+=at.m,Ot+=pt.m,$e+=gt.m;yt&&!ie(gt)&&(gt.t=yt,gt.m+=At-$e),at&&!X(pt)&&(pt.t=at,pt.m+=et-Ot,Ze=Be)}return Ze}(he,Oe,he.parent.A||Ae[0])}function Pe(he){he._.x=he.z+he.parent.m,he.m+=he.parent.m}function De(he){he.x*=fe,he.y=he.depth*Se}return we.separation=function(he){return arguments.length?(re=he,we):re},we.size=function(he){return arguments.length?(be=!1,fe=+he[0],Se=+he[1],we):be?null:[fe,Se]},we.nodeSize=function(he){return arguments.length?(be=!0,fe=+he[0],Se=+he[1],we):be?[fe,Se]:null},we}function ye(re,fe,Se,be,we){for(var Me,Pe=re.children,De=-1,he=Pe.length,_e=re.value&&(we-Se)/re.value;++De<he;)(Me=Pe[De]).x0=fe,Me.x1=be,Me.y0=Se,Me.y1=Se+=Me.value*_e}ue.prototype=Object.create(r.prototype);var pe=(1+Math.sqrt(5))/2;function de(re,fe,Se,be,we,Me){for(var Pe,De,he,_e,Ae,Oe,Ee,Be,Ve,Ze,it,at=[],gt=fe.children,yt=0,pt=0,et=gt.length,$e=fe.value;yt<et;){he=we-Se,_e=Me-be;do Ae=gt[pt++].value;while(!Ae&&pt<et);for(Oe=Ee=Ae,it=Ae*Ae*(Ze=Math.max(_e/he,he/_e)/($e*re)),Ve=Math.max(Ee/it,it/Oe);pt<et;++pt){if(Ae+=De=gt[pt].value,De<Oe&&(Oe=De),De>Ee&&(Ee=De),it=Ae*Ae*Ze,(Be=Math.max(Ee/it,it/Oe))>Ve){Ae-=De;break}Ve=Be}at.push(Pe={value:Ae,dice:he<_e,children:gt.slice(yt,pt)}),Pe.dice?Y(Pe,Se,be,we,$e?be+=_e*Ae/$e:Me):ye(Pe,Se,be,$e?Se+=he*Ae/$e:we,Me),$e-=Ae,yt=pt}return at}var me=function re(fe){function Se(be,we,Me,Pe,De){de(fe,be,we,Me,Pe,De)}return Se.ratio=function(be){return re((be=+be)>1?be:1)},Se}(pe);function ke(){var re=me,fe=!1,Se=1,be=1,we=[0],Me=E,Pe=E,De=E,he=E,_e=E;function Ae(Ee){return Ee.x0=Ee.y0=0,Ee.x1=Se,Ee.y1=be,Ee.eachBefore(Oe),we=[0],fe&&Ee.eachBefore(j),Ee}function Oe(Ee){var Be=we[Ee.depth],Ve=Ee.x0+Be,Ze=Ee.y0+Be,it=Ee.x1-Be,at=Ee.y1-Be;it<Ve&&(Ve=it=(Ve+it)/2),at<Ze&&(Ze=at=(Ze+at)/2),Ee.x0=Ve,Ee.y0=Ze,Ee.x1=it,Ee.y1=at,Ee.children&&(Be=we[Ee.depth+1]=Me(Ee)/2,Ve+=_e(Ee)-Be,Ze+=Pe(Ee)-Be,(it-=De(Ee)-Be)<Ve&&(Ve=it=(Ve+it)/2),(at-=he(Ee)-Be)<Ze&&(Ze=at=(Ze+at)/2),re(Ee,Ve,Ze,it,at))}return Ae.round=function(Ee){return arguments.length?(fe=!!Ee,Ae):fe},Ae.size=function(Ee){return arguments.length?(Se=+Ee[0],be=+Ee[1],Ae):[Se,be]},Ae.tile=function(Ee){return arguments.length?(re=A(Ee),Ae):re},Ae.padding=function(Ee){return arguments.length?Ae.paddingInner(Ee).paddingOuter(Ee):Ae.paddingInner()},Ae.paddingInner=function(Ee){return arguments.length?(Me=typeof Ee=="function"?Ee:P(+Ee),Ae):Me},Ae.paddingOuter=function(Ee){return arguments.length?Ae.paddingTop(Ee).paddingRight(Ee).paddingBottom(Ee).paddingLeft(Ee):Ae.paddingTop()},Ae.paddingTop=function(Ee){return arguments.length?(Pe=typeof Ee=="function"?Ee:P(+Ee),Ae):Pe},Ae.paddingRight=function(Ee){return arguments.length?(De=typeof Ee=="function"?Ee:P(+Ee),Ae):De},Ae.paddingBottom=function(Ee){return arguments.length?(he=typeof Ee=="function"?Ee:P(+Ee),Ae):he},Ae.paddingLeft=function(Ee){return arguments.length?(_e=typeof Ee=="function"?Ee:P(+Ee),Ae):_e},Ae}function Ce(re,fe,Se,be,we){var Me,Pe,De=re.children,he=De.length,_e=new Array(he+1);for(_e[0]=Pe=Me=0;Me<he;++Me)_e[Me+1]=Pe+=De[Me].value;(function Ae(Oe,Ee,Be,Ve,Ze,it,at){if(Oe>=Ee-1){var gt=De[Oe];return gt.x0=Ve,gt.y0=Ze,gt.x1=it,void(gt.y1=at)}for(var yt=_e[Oe],pt=Be/2+yt,et=Oe+1,$e=Ee-1;et<$e;){var At=et+$e>>>1;_e[At]<pt?et=At+1:$e=At}pt-_e[et-1]<_e[et]-pt&&Oe+1<et&&--et;var Ot=_e[et]-yt,Rt=Be-Ot;if(it-Ve>at-Ze){var Ct=(Ve*Rt+it*Ot)/Be;Ae(Oe,et,Ot,Ve,Ze,Ct,at),Ae(et,Ee,Rt,Ct,Ze,it,at)}else{var Ge=(Ze*Rt+at*Ot)/Be;Ae(Oe,et,Ot,Ve,Ze,it,Ge),Ae(et,Ee,Rt,Ve,Ge,it,at)}})(0,he,re.value,fe,Se,be,we)}function ge(re,fe,Se,be,we){(1&re.depth?ye:Y)(re,fe,Se,be,we)}var oe=function re(fe){function Se(be,we,Me,Pe,De){if((he=be._squarify)&&he.ratio===fe)for(var he,_e,Ae,Oe,Ee,Be=-1,Ve=he.length,Ze=be.value;++Be<Ve;){for(Ae=(_e=he[Be]).children,Oe=_e.value=0,Ee=Ae.length;Oe<Ee;++Oe)_e.value+=Ae[Oe].value;_e.dice?Y(_e,we,Me,Pe,Me+=(De-Me)*_e.value/Ze):ye(_e,we,Me,we+=(Pe-we)*_e.value/Ze,De),Ze-=_e.value}else be._squarify=he=de(fe,be,we,Me,Pe,De),he.ratio=fe}return Se.ratio=function(be){return re((be=+be)>1?be:1)},Se}(pe)},10132:function(F,C,e){"use strict";e.d(C,{ak:function(){return d}});var T=Math.PI,k=2*T,a=1e-6,w=k-a;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function f(){return new b}b.prototype=f.prototype={constructor:b,moveTo:function(u,x){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(u,x){this._+="L"+(this._x1=+u)+","+(this._y1=+x)},quadraticCurveTo:function(u,x,p,g){this._+="Q"+ +u+","+ +x+","+(this._x1=+p)+","+(this._y1=+g)},bezierCurveTo:function(u,x,p,g,m,y){this._+="C"+ +u+","+ +x+","+ +p+","+ +g+","+(this._x1=+m)+","+(this._y1=+y)},arcTo:function(u,x,p,g,m){u=+u,x=+x,p=+p,g=+g,m=+m;var y=this._x1,v=this._y1,_=p-u,h=g-x,S=y-u,A=v-x,E=S*S+A*A;if(m<0)throw new Error("negative radius: "+m);if(this._x1===null)this._+="M"+(this._x1=u)+","+(this._y1=x);else if(E>a)if(Math.abs(A*_-h*S)>a&&m){var P=p-y,I=g-v,D=_*_+h*h,z=P*P+I*I,V=Math.sqrt(D),O=Math.sqrt(E),j=m*Math.tan((T-Math.acos((D+E-z)/(2*V*O)))/2),Y=j/O,B=j/V;Math.abs(Y-1)>a&&(this._+="L"+(u+Y*S)+","+(x+Y*A)),this._+="A"+m+","+m+",0,0,"+ +(A*P>S*I)+","+(this._x1=u+B*_)+","+(this._y1=x+B*h)}else this._+="L"+(this._x1=u)+","+(this._y1=x)},arc:function(u,x,p,g,m,y){u=+u,x=+x,y=!!y;var v=(p=+p)*Math.cos(g),_=p*Math.sin(g),h=u+v,S=x+_,A=1^y,E=y?g-m:m-g;if(p<0)throw new Error("negative radius: "+p);this._x1===null?this._+="M"+h+","+S:(Math.abs(this._x1-h)>a||Math.abs(this._y1-S)>a)&&(this._+="L"+h+","+S),p&&(E<0&&(E=E%k+k),E>w?this._+="A"+p+","+p+",0,1,"+A+","+(u-v)+","+(x-_)+"A"+p+","+p+",0,1,"+A+","+(this._x1=h)+","+(this._y1=S):E>a&&(this._+="A"+p+","+p+",0,"+ +(E>=T)+","+A+","+(this._x1=u+p*Math.cos(m))+","+(this._y1=x+p*Math.sin(m))))},rect:function(u,x,p,g){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+x)+"h"+ +p+"v"+ +g+"h"+-p+"Z"},toString:function(){return this._}};var s=f,t=Array.prototype.slice;function i(u){return function(){return u}}function r(u){return u[0]}function n(u){return u[1]}function o(u){return u.source}function l(u){return u.target}function c(u,x,p,g,m){u.moveTo(x,p),u.bezierCurveTo(x=(x+g)/2,p,x,m,g,m)}function d(){return function(u){var x=o,p=l,g=r,m=n,y=null;function v(){var _,h=t.call(arguments),S=x.apply(this,h),A=p.apply(this,h);if(y||(y=_=s()),u(y,+g.apply(this,(h[0]=S,h)),+m.apply(this,h),+g.apply(this,(h[0]=A,h)),+m.apply(this,h)),_)return y=null,_+""||null}return v.source=function(_){return arguments.length?(x=_,v):x},v.target=function(_){return arguments.length?(p=_,v):p},v.x=function(_){return arguments.length?(g=typeof _=="function"?_:i(+_),v):g},v.y=function(_){return arguments.length?(m=typeof _=="function"?_:i(+_),v):m},v.context=function(_){return arguments.length?(y=_??null,v):y},v}(c)}},94336:function(F,C,e){"use strict";e.d(C,{Yn:function(){return o},m_:function(){return r},E9:function(){return l}});var T=e(8208),k=e(58931),a=e(46192),w=e(68936),b=e(32171),f=e(53528);function s(et){if(0<=et.y&&et.y<100){var $e=new Date(-1,et.m,et.d,et.H,et.M,et.S,et.L);return $e.setFullYear(et.y),$e}return new Date(et.y,et.m,et.d,et.H,et.M,et.S,et.L)}function t(et){if(0<=et.y&&et.y<100){var $e=new Date(Date.UTC(-1,et.m,et.d,et.H,et.M,et.S,et.L));return $e.setUTCFullYear(et.y),$e}return new Date(Date.UTC(et.y,et.m,et.d,et.H,et.M,et.S,et.L))}function i(et,$e,At){return{y:et,m:$e,d:At,H:0,M:0,S:0,L:0}}function r(et){var $e=et.dateTime,At=et.date,Ot=et.time,Rt=et.periods,Ct=et.days,Ge=et.shortDays,Xe=et.months,Ne=et.shortMonths,Ye=m(Rt),ot=y(Rt),nt=m(Ct),ze=y(Ct),Fe=m(Ge),rt=y(Ge),We=m(Xe),ft=y(Xe),mt=m(Ne),vt=y(Ne),ut={a:function(Ft){return Ge[Ft.getDay()]},A:function(Ft){return Ct[Ft.getDay()]},b:function(Ft){return Ne[Ft.getMonth()]},B:function(Ft){return Xe[Ft.getMonth()]},c:null,d:J,e:J,f:ae,H:K,I:X,j:ie,L:se,m:ue,M:ve,p:function(Ft){return Rt[+(Ft.getHours()>=12)]},q:function(Ft){return 1+~~(Ft.getMonth()/3)},Q:yt,s:pt,S:ye,u:pe,U:de,V:me,w:ke,W:Ce,x:null,X:null,y:ge,Y:oe,Z:re,"%":gt},Mt={a:function(Ft){return Ge[Ft.getUTCDay()]},A:function(Ft){return Ct[Ft.getUTCDay()]},b:function(Ft){return Ne[Ft.getUTCMonth()]},B:function(Ft){return Xe[Ft.getUTCMonth()]},c:null,d:fe,e:fe,f:Pe,H:Se,I:be,j:we,L:Me,m:De,M:he,p:function(Ft){return Rt[+(Ft.getUTCHours()>=12)]},q:function(Ft){return 1+~~(Ft.getUTCMonth()/3)},Q:yt,s:pt,S:_e,u:Ae,U:Oe,V:Ee,w:Be,W:Ve,x:null,X:null,y:Ze,Y:it,Z:at,"%":gt},bt={a:function(Ft,Xt,an){var Ht=Fe.exec(Xt.slice(an));return Ht?(Ft.w=rt[Ht[0].toLowerCase()],an+Ht[0].length):-1},A:function(Ft,Xt,an){var Ht=nt.exec(Xt.slice(an));return Ht?(Ft.w=ze[Ht[0].toLowerCase()],an+Ht[0].length):-1},b:function(Ft,Xt,an){var Ht=mt.exec(Xt.slice(an));return Ht?(Ft.m=vt[Ht[0].toLowerCase()],an+Ht[0].length):-1},B:function(Ft,Xt,an){var Ht=We.exec(Xt.slice(an));return Ht?(Ft.m=ft[Ht[0].toLowerCase()],an+Ht[0].length):-1},c:function(Ft,Xt,an){return Dt(Ft,$e,Xt,an)},d:V,e:V,f:q,H:j,I:j,j:O,L:U,m:z,M:Y,p:function(Ft,Xt,an){var Ht=Ye.exec(Xt.slice(an));return Ht?(Ft.p=ot[Ht[0].toLowerCase()],an+Ht[0].length):-1},q:D,Q:ee,s:Q,S:B,u:_,U:h,V:S,w:v,W:A,x:function(Ft,Xt,an){return Dt(Ft,At,Xt,an)},X:function(Ft,Xt,an){return Dt(Ft,Ot,Xt,an)},y:P,Y:E,Z:I,"%":te};function St(Ft,Xt){return function(an){var Ht,Zt,jt,Pn=[],Tn=-1,mn=0,Qt=Ft.length;for(an instanceof Date||(an=new Date(+an));++Tn<Qt;)Ft.charCodeAt(Tn)===37&&(Pn.push(Ft.slice(mn,Tn)),(Zt=c[Ht=Ft.charAt(++Tn)])!=null?Ht=Ft.charAt(++Tn):Zt=Ht==="e"?" ":"0",(jt=Xt[Ht])&&(Ht=jt(an,Zt)),Pn.push(Ht),mn=Tn+1);return Pn.push(Ft.slice(mn,Tn)),Pn.join("")}}function Pt(Ft,Xt){return function(an){var Ht,Zt,jt=i(1900,void 0,1);if(Dt(jt,Ft,an+="",0)!=an.length)return null;if("Q"in jt)return new Date(jt.Q);if("s"in jt)return new Date(1e3*jt.s+("L"in jt?jt.L:0));if(Xt&&!("Z"in jt)&&(jt.Z=0),"p"in jt&&(jt.H=jt.H%12+12*jt.p),jt.m===void 0&&(jt.m="q"in jt?jt.q:0),"V"in jt){if(jt.V<1||jt.V>53)return null;"w"in jt||(jt.w=1),"Z"in jt?(Zt=(Ht=t(i(jt.y,0,1))).getUTCDay(),Ht=Zt>4||Zt===0?T.ot.ceil(Ht):(0,T.ot)(Ht),Ht=k.c.offset(Ht,7*(jt.V-1)),jt.y=Ht.getUTCFullYear(),jt.m=Ht.getUTCMonth(),jt.d=Ht.getUTCDate()+(jt.w+6)%7):(Zt=(Ht=s(i(jt.y,0,1))).getDay(),Ht=Zt>4||Zt===0?a.qT.ceil(Ht):(0,a.qT)(Ht),Ht=w.c.offset(Ht,7*(jt.V-1)),jt.y=Ht.getFullYear(),jt.m=Ht.getMonth(),jt.d=Ht.getDate()+(jt.w+6)%7)}else("W"in jt||"U"in jt)&&("w"in jt||(jt.w="u"in jt?jt.u%7:"W"in jt?1:0),Zt="Z"in jt?t(i(jt.y,0,1)).getUTCDay():s(i(jt.y,0,1)).getDay(),jt.m=0,jt.d="W"in jt?(jt.w+6)%7+7*jt.W-(Zt+5)%7:jt.w+7*jt.U-(Zt+6)%7);return"Z"in jt?(jt.H+=jt.Z/100|0,jt.M+=jt.Z%100,t(jt)):s(jt)}}function Dt(Ft,Xt,an,Ht){for(var Zt,jt,Pn=0,Tn=Xt.length,mn=an.length;Pn<Tn;){if(Ht>=mn)return-1;if((Zt=Xt.charCodeAt(Pn++))===37){if(Zt=Xt.charAt(Pn++),!(jt=bt[Zt in c?Xt.charAt(Pn++):Zt])||(Ht=jt(Ft,an,Ht))<0)return-1}else if(Zt!=an.charCodeAt(Ht++))return-1}return Ht}return ut.x=St(At,ut),ut.X=St(Ot,ut),ut.c=St($e,ut),Mt.x=St(At,Mt),Mt.X=St(Ot,Mt),Mt.c=St($e,Mt),{format:function(Ft){var Xt=St(Ft+="",ut);return Xt.toString=function(){return Ft},Xt},parse:function(Ft){var Xt=Pt(Ft+="",!1);return Xt.toString=function(){return Ft},Xt},utcFormat:function(Ft){var Xt=St(Ft+="",Mt);return Xt.toString=function(){return Ft},Xt},utcParse:function(Ft){var Xt=Pt(Ft+="",!0);return Xt.toString=function(){return Ft},Xt}}}var n,o,l,c={"-":"",_:" ",0:"0"},d=/^\s*\d+/,u=/^%/,x=/[\\^$*+?|[\]().{}]/g;function p(et,$e,At){var Ot=et<0?"-":"",Rt=(Ot?-et:et)+"",Ct=Rt.length;return Ot+(Ct<At?new Array(At-Ct+1).join($e)+Rt:Rt)}function g(et){return et.replace(x,"\\$&")}function m(et){return new RegExp("^(?:"+et.map(g).join("|")+")","i")}function y(et){for(var $e={},At=-1,Ot=et.length;++At<Ot;)$e[et[At].toLowerCase()]=At;return $e}function v(et,$e,At){var Ot=d.exec($e.slice(At,At+1));return Ot?(et.w=+Ot[0],At+Ot[0].length):-1}function _(et,$e,At){var Ot=d.exec($e.slice(At,At+1));return Ot?(et.u=+Ot[0],At+Ot[0].length):-1}function h(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.U=+Ot[0],At+Ot[0].length):-1}function S(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.V=+Ot[0],At+Ot[0].length):-1}function A(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.W=+Ot[0],At+Ot[0].length):-1}function E(et,$e,At){var Ot=d.exec($e.slice(At,At+4));return Ot?(et.y=+Ot[0],At+Ot[0].length):-1}function P(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.y=+Ot[0]+(+Ot[0]>68?1900:2e3),At+Ot[0].length):-1}function I(et,$e,At){var Ot=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec($e.slice(At,At+6));return Ot?(et.Z=Ot[1]?0:-(Ot[2]+(Ot[3]||"00")),At+Ot[0].length):-1}function D(et,$e,At){var Ot=d.exec($e.slice(At,At+1));return Ot?(et.q=3*Ot[0]-3,At+Ot[0].length):-1}function z(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.m=Ot[0]-1,At+Ot[0].length):-1}function V(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.d=+Ot[0],At+Ot[0].length):-1}function O(et,$e,At){var Ot=d.exec($e.slice(At,At+3));return Ot?(et.m=0,et.d=+Ot[0],At+Ot[0].length):-1}function j(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.H=+Ot[0],At+Ot[0].length):-1}function Y(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.M=+Ot[0],At+Ot[0].length):-1}function B(et,$e,At){var Ot=d.exec($e.slice(At,At+2));return Ot?(et.S=+Ot[0],At+Ot[0].length):-1}function U(et,$e,At){var Ot=d.exec($e.slice(At,At+3));return Ot?(et.L=+Ot[0],At+Ot[0].length):-1}function q(et,$e,At){var Ot=d.exec($e.slice(At,At+6));return Ot?(et.L=Math.floor(Ot[0]/1e3),At+Ot[0].length):-1}function te(et,$e,At){var Ot=u.exec($e.slice(At,At+1));return Ot?At+Ot[0].length:-1}function ee(et,$e,At){var Ot=d.exec($e.slice(At));return Ot?(et.Q=+Ot[0],At+Ot[0].length):-1}function Q(et,$e,At){var Ot=d.exec($e.slice(At));return Ot?(et.s=+Ot[0],At+Ot[0].length):-1}function J(et,$e){return p(et.getDate(),$e,2)}function K(et,$e){return p(et.getHours(),$e,2)}function X(et,$e){return p(et.getHours()%12||12,$e,2)}function ie(et,$e){return p(1+w.c.count((0,b.c)(et),et),$e,3)}function se(et,$e){return p(et.getMilliseconds(),$e,3)}function ae(et,$e){return se(et,$e)+"000"}function ue(et,$e){return p(et.getMonth()+1,$e,2)}function ve(et,$e){return p(et.getMinutes(),$e,2)}function ye(et,$e){return p(et.getSeconds(),$e,2)}function pe(et){var $e=et.getDay();return $e===0?7:$e}function de(et,$e){return p(a.uU.count((0,b.c)(et)-1,et),$e,2)}function me(et,$e){var At=et.getDay();return et=At>=4||At===0?(0,a.kD)(et):a.kD.ceil(et),p(a.kD.count((0,b.c)(et),et)+((0,b.c)(et).getDay()===4),$e,2)}function ke(et){return et.getDay()}function Ce(et,$e){return p(a.qT.count((0,b.c)(et)-1,et),$e,2)}function ge(et,$e){return p(et.getFullYear()%100,$e,2)}function oe(et,$e){return p(et.getFullYear()%1e4,$e,4)}function re(et){var $e=et.getTimezoneOffset();return($e>0?"-":($e*=-1,"+"))+p($e/60|0,"0",2)+p($e%60,"0",2)}function fe(et,$e){return p(et.getUTCDate(),$e,2)}function Se(et,$e){return p(et.getUTCHours(),$e,2)}function be(et,$e){return p(et.getUTCHours()%12||12,$e,2)}function we(et,$e){return p(1+k.c.count((0,f.c)(et),et),$e,3)}function Me(et,$e){return p(et.getUTCMilliseconds(),$e,3)}function Pe(et,$e){return Me(et,$e)+"000"}function De(et,$e){return p(et.getUTCMonth()+1,$e,2)}function he(et,$e){return p(et.getUTCMinutes(),$e,2)}function _e(et,$e){return p(et.getUTCSeconds(),$e,2)}function Ae(et){var $e=et.getUTCDay();return $e===0?7:$e}function Oe(et,$e){return p(T.EV.count((0,f.c)(et)-1,et),$e,2)}function Ee(et,$e){var At=et.getUTCDay();return et=At>=4||At===0?(0,T.yA)(et):T.yA.ceil(et),p(T.yA.count((0,f.c)(et),et)+((0,f.c)(et).getUTCDay()===4),$e,2)}function Be(et){return et.getUTCDay()}function Ve(et,$e){return p(T.ot.count((0,f.c)(et)-1,et),$e,2)}function Ze(et,$e){return p(et.getUTCFullYear()%100,$e,2)}function it(et,$e){return p(et.getUTCFullYear()%1e4,$e,4)}function at(){return"+0000"}function gt(){return"%"}function yt(et){return+et}function pt(et){return Math.floor(+et/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),o=n.format,n.parse,l=n.utcFormat,n.utcParse},68936:function(F,C,e){"use strict";e.d(C,{m:function(){return w}});var T=e(81628),k=e(69792),a=(0,T.c)(function(b){b.setHours(0,0,0,0)},function(b,f){b.setDate(b.getDate()+f)},function(b,f){return(f-b-(f.getTimezoneOffset()-b.getTimezoneOffset())*k.iy)/k.SK},function(b){return b.getDate()-1});C.c=a;var w=a.range},69792:function(F,C,e){"use strict";e.d(C,{KK:function(){return b},SK:function(){return w},cg:function(){return a},iy:function(){return k},yc:function(){return T}});var T=1e3,k=6e4,a=36e5,w=864e5,b=6048e5},73220:function(F,C,e){"use strict";e.r(C),e.d(C,{timeDay:function(){return d.c},timeDays:function(){return d.m},timeFriday:function(){return u.iB},timeFridays:function(){return u.sJ},timeHour:function(){return l},timeHours:function(){return c},timeInterval:function(){return T.c},timeMillisecond:function(){return a},timeMilliseconds:function(){return w},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return u.qT},timeMondays:function(){return u.QP},timeMonth:function(){return p},timeMonths:function(){return g},timeSaturday:function(){return u.Wc},timeSaturdays:function(){return u.aI},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return u.uU},timeSundays:function(){return u.Ab},timeThursday:function(){return u.kD},timeThursdays:function(){return u.eC},timeTuesday:function(){return u.Mf},timeTuesdays:function(){return u.Oc},timeWednesday:function(){return u.eg},timeWednesdays:function(){return u.sn},timeWeek:function(){return u.uU},timeWeeks:function(){return u.Ab},timeYear:function(){return m.c},timeYears:function(){return m.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return P.od},utcFridays:function(){return P.iG},utcHour:function(){return S},utcHours:function(){return A},utcMillisecond:function(){return a},utcMilliseconds:function(){return w},utcMinute:function(){return v},utcMinutes:function(){return _},utcMonday:function(){return P.ot},utcMondays:function(){return P.iO},utcMonth:function(){return D},utcMonths:function(){return z},utcSaturday:function(){return P.Ad},utcSaturdays:function(){return P.K8},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return P.EV},utcSundays:function(){return P.Wq},utcThursday:function(){return P.yA},utcThursdays:function(){return P.ob},utcTuesday:function(){return P.sG},utcTuesdays:function(){return P.kl},utcWednesday:function(){return P._6},utcWednesdays:function(){return P.W_},utcWeek:function(){return P.EV},utcWeeks:function(){return P.Wq},utcYear:function(){return V.c},utcYears:function(){return V.i}});var T=e(81628),k=(0,T.c)(function(){},function(O,j){O.setTime(+O+j)},function(O,j){return j-O});k.every=function(O){return O=Math.floor(O),isFinite(O)&&O>0?O>1?(0,T.c)(function(j){j.setTime(Math.floor(j/O)*O)},function(j,Y){j.setTime(+j+Y*O)},function(j,Y){return(Y-j)/O}):k:null};var a=k,w=k.range,b=e(69792),f=(0,T.c)(function(O){O.setTime(O-O.getMilliseconds())},function(O,j){O.setTime(+O+j*b.yc)},function(O,j){return(j-O)/b.yc},function(O){return O.getUTCSeconds()}),s=f,t=f.range,i=(0,T.c)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*b.yc)},function(O,j){O.setTime(+O+j*b.iy)},function(O,j){return(j-O)/b.iy},function(O){return O.getMinutes()}),r=i,n=i.range,o=(0,T.c)(function(O){O.setTime(O-O.getMilliseconds()-O.getSeconds()*b.yc-O.getMinutes()*b.iy)},function(O,j){O.setTime(+O+j*b.cg)},function(O,j){return(j-O)/b.cg},function(O){return O.getHours()}),l=o,c=o.range,d=e(68936),u=e(46192),x=(0,T.c)(function(O){O.setDate(1),O.setHours(0,0,0,0)},function(O,j){O.setMonth(O.getMonth()+j)},function(O,j){return j.getMonth()-O.getMonth()+12*(j.getFullYear()-O.getFullYear())},function(O){return O.getMonth()}),p=x,g=x.range,m=e(32171),y=(0,T.c)(function(O){O.setUTCSeconds(0,0)},function(O,j){O.setTime(+O+j*b.iy)},function(O,j){return(j-O)/b.iy},function(O){return O.getUTCMinutes()}),v=y,_=y.range,h=(0,T.c)(function(O){O.setUTCMinutes(0,0,0)},function(O,j){O.setTime(+O+j*b.cg)},function(O,j){return(j-O)/b.cg},function(O){return O.getUTCHours()}),S=h,A=h.range,E=e(58931),P=e(8208),I=(0,T.c)(function(O){O.setUTCDate(1),O.setUTCHours(0,0,0,0)},function(O,j){O.setUTCMonth(O.getUTCMonth()+j)},function(O,j){return j.getUTCMonth()-O.getUTCMonth()+12*(j.getUTCFullYear()-O.getUTCFullYear())},function(O){return O.getUTCMonth()}),D=I,z=I.range,V=e(53528)},81628:function(F,C,e){"use strict";e.d(C,{c:function(){return a}});var T=new Date,k=new Date;function a(w,b,f,s){function t(i){return w(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return w(i=new Date(+i)),i},t.ceil=function(i){return w(i=new Date(i-1)),b(i,1),w(i),i},t.round=function(i){var r=t(i),n=t.ceil(i);return i-r<n-i?r:n},t.offset=function(i,r){return b(i=new Date(+i),r==null?1:Math.floor(r)),i},t.range=function(i,r,n){var o,l=[];if(i=t.ceil(i),n=n==null?1:Math.floor(n),!(i<r&&n>0))return l;do l.push(o=new Date(+i)),b(i,n),w(i);while(o<i&&i<r);return l},t.filter=function(i){return a(function(r){if(r>=r)for(;w(r),!i(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;b(r,-1),!i(r););else for(;--n>=0;)for(;b(r,1),!i(r););})},f&&(t.count=function(i,r){return T.setTime(+i),k.setTime(+r),w(T),w(k),Math.floor(f(T,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(s?function(r){return s(r)%i==0}:function(r){return t.count(0,r)%i==0}):t:null}),t}},58931:function(F,C,e){"use strict";e.d(C,{o:function(){return w}});var T=e(81628),k=e(69792),a=(0,T.c)(function(b){b.setUTCHours(0,0,0,0)},function(b,f){b.setUTCDate(b.getUTCDate()+f)},function(b,f){return(f-b)/k.SK},function(b){return b.getUTCDate()-1});C.c=a;var w=a.range},8208:function(F,C,e){"use strict";e.d(C,{Ad:function(){return r},EV:function(){return w},K8:function(){return x},W_:function(){return c},Wq:function(){return n},_6:function(){return s},iG:function(){return u},iO:function(){return o},kl:function(){return l},ob:function(){return d},od:function(){return i},ot:function(){return b},sG:function(){return f},yA:function(){return t}});var T=e(81628),k=e(69792);function a(p){return(0,T.c)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-p)%7),g.setUTCHours(0,0,0,0)},function(g,m){g.setUTCDate(g.getUTCDate()+7*m)},function(g,m){return(m-g)/k.KK})}var w=a(0),b=a(1),f=a(2),s=a(3),t=a(4),i=a(5),r=a(6),n=w.range,o=b.range,l=f.range,c=s.range,d=t.range,u=i.range,x=r.range},53528:function(F,C,e){"use strict";e.d(C,{i:function(){return a}});var T=e(81628),k=(0,T.c)(function(w){w.setUTCMonth(0,1),w.setUTCHours(0,0,0,0)},function(w,b){w.setUTCFullYear(w.getUTCFullYear()+b)},function(w,b){return b.getUTCFullYear()-w.getUTCFullYear()},function(w){return w.getUTCFullYear()});k.every=function(w){return isFinite(w=Math.floor(w))&&w>0?(0,T.c)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/w)*w),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,f){b.setUTCFullYear(b.getUTCFullYear()+f*w)}):null},C.c=k;var a=k.range},46192:function(F,C,e){"use strict";e.d(C,{Ab:function(){return n},Mf:function(){return f},Oc:function(){return l},QP:function(){return o},Wc:function(){return r},aI:function(){return x},eC:function(){return d},eg:function(){return s},iB:function(){return i},kD:function(){return t},qT:function(){return b},sJ:function(){return u},sn:function(){return c},uU:function(){return w}});var T=e(81628),k=e(69792);function a(p){return(0,T.c)(function(g){g.setDate(g.getDate()-(g.getDay()+7-p)%7),g.setHours(0,0,0,0)},function(g,m){g.setDate(g.getDate()+7*m)},function(g,m){return(m-g-(m.getTimezoneOffset()-g.getTimezoneOffset())*k.iy)/k.KK})}var w=a(0),b=a(1),f=a(2),s=a(3),t=a(4),i=a(5),r=a(6),n=w.range,o=b.range,l=f.range,c=s.range,d=t.range,u=i.range,x=r.range},32171:function(F,C,e){"use strict";e.d(C,{Q:function(){return a}});var T=e(81628),k=(0,T.c)(function(w){w.setMonth(0,1),w.setHours(0,0,0,0)},function(w,b){w.setFullYear(w.getFullYear()+b)},function(w,b){return b.getFullYear()-w.getFullYear()},function(w){return w.getFullYear()});k.every=function(w){return isFinite(w=Math.floor(w))&&w>0?(0,T.c)(function(b){b.setFullYear(Math.floor(b.getFullYear()/w)*w),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,f){b.setFullYear(b.getFullYear()+f*w)}):null},C.c=k;var a=k.range},64348:function(F,C,e){"use strict";var T=e(39640)(),k=e(53664),a=T&&k("%Object.defineProperty%",!0);if(a)try{a({},"a",{value:1})}catch{a=!1}var w=k("%SyntaxError%"),b=k("%TypeError%"),f=e(2304);F.exports=function(s,t,i){if(!s||typeof s!="object"&&typeof s!="function")throw new b("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new b("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new b("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new b("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new b("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new b("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],c=!!f&&f(s,t);if(a)a(s,t,{configurable:o===null&&c?c.configurable:!o,enumerable:r===null&&c?c.enumerable:!r,value:i,writable:n===null&&c?c.writable:!n});else{if(!l&&(r||n||o))throw new w("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");s[t]=i}}},81288:function(F,C,e){"use strict";var T=e(41820),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",a=Object.prototype.toString,w=Array.prototype.concat,b=Object.defineProperty,f=e(39640)(),s=b&&f,t=function(r,n,o,l){if(n in r){if(l===!0){if(r[n]===o)return}else if(typeof(c=l)!="function"||a.call(c)!=="[object Function]"||!l())return}var c;s?b(r,n,{configurable:!0,enumerable:!1,value:o,writable:!0}):r[n]=o},i=function(r,n){var o=arguments.length>2?arguments[2]:{},l=T(n);k&&(l=w.call(l,Object.getOwnPropertySymbols(n)));for(var c=0;c<l.length;c+=1)t(r,l[c],n[l[c]],o[l[c]])};i.supportsDescriptors=!!s,F.exports=i},31264:function(F){F.exports=function(){for(var C=0;C<arguments.length;C++)if(arguments[C]!==void 0)return arguments[C]}},63768:function(F){"use strict";F.exports=T;var C=(T.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function T(a,w){Array.isArray(a)&&(a=a.join(", "));var b,f={},s=16,t=.05;w&&(w.length===2&&typeof w[0]=="number"?b=k(w):Array.isArray(w)?b=w:(w.o?b=k(w.o):w.pairs&&(b=w.pairs),w.fontSize&&(s=w.fontSize),w.threshold!=null&&(t=w.threshold))),b||(b=e),C.font=s+"px "+a;for(var i=0;i<b.length;i++){var r=b[i],n=C.measureText(r[0]).width+C.measureText(r[1]).width,o=C.measureText(r).width;if(Math.abs(n-o)>s*t){var l=(o-n)/s;f[r]=1e3*l}}return f}function k(a){for(var w=[],b=a[0];b<=a[1];b++)for(var f=String.fromCharCode(b),s=a[0];s<a[1];s++){var t=f+String.fromCharCode(s);w.push(t)}return w}T.createPairs=k,T.ascii=e},22235:function(F,C,e){var T=e(49972),k=e(48816),a={M:"moveTo",C:"bezierCurveTo"};F.exports=function(w,b){w.beginPath(),k(T(b)).forEach(function(f){var s=f[0],t=f.slice(1);w[a[s]].apply(w,t)}),w.closePath()}},72512:function(F){F.exports=function(C){switch(C){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(F){"use strict";function C(e,T,k){var a=0|e[k];if(a<=0)return[];var w,b=new Array(a);if(k===e.length-1)for(w=0;w<a;++w)b[w]=T;else for(w=0;w<a;++w)b[w]=C(e,T,k+1);return b}F.exports=function(e,T){switch(T===void 0&&(T=0),typeof e){case"number":if(e>0)return function(k,a){var w,b;for(w=new Array(k),b=0;b<k;++b)w[b]=a;return w}(0|e,T);break;case"object":if(typeof e.length=="number")return C(e,T,0)}return[]}},28912:function(F){"use strict";function C(S,A,E){E=E||2;var P,I,D,z,V,O,j,Y=A&&A.length,B=Y?A[0]*E:S.length,U=e(S,0,B,E,!0),q=[];if(!U||U.next===U.prev)return q;if(Y&&(U=function(ee,Q,J,K){var X,ie,se,ae=[];for(X=0,ie=Q.length;X<ie;X++)(se=e(ee,Q[X]*K,X<ie-1?Q[X+1]*K:ee.length,K,!1))===se.next&&(se.steiner=!0),ae.push(n(se));for(ae.sort(s),X=0;X<ae.length;X++)t(ae[X],J),J=T(J,J.next);return J}(S,A,U,E)),S.length>80*E){P=D=S[0],I=z=S[1];for(var te=E;te<B;te+=E)(V=S[te])<P&&(P=V),(O=S[te+1])<I&&(I=O),V>D&&(D=V),O>z&&(z=O);j=(j=Math.max(D-P,z-I))!==0?1/j:0}return k(U,q,E,P,I,j),q}function e(S,A,E,P,I){var D,z;if(I===h(S,A,E,P)>0)for(D=A;D<E;D+=P)z=y(D,S[D],S[D+1],z);else for(D=E-P;D>=A;D-=P)z=y(D,S[D],S[D+1],z);return z&&d(z,z.next)&&(v(z),z=z.next),z}function T(S,A){if(!S)return S;A||(A=S);var E,P=S;do if(E=!1,P.steiner||!d(P,P.next)&&c(P.prev,P,P.next)!==0)P=P.next;else{if(v(P),(P=A=P.prev)===P.next)break;E=!0}while(E||P!==A);return A}function k(S,A,E,P,I,D,z){if(S){!z&&D&&function(Y,B,U,q){var te=Y;do te.z===null&&(te.z=r(te.x,te.y,B,U,q)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==Y);te.prevZ.nextZ=null,te.prevZ=null,function(ee){var Q,J,K,X,ie,se,ae,ue,ve=1;do{for(J=ee,ee=null,ie=null,se=0;J;){for(se++,K=J,ae=0,Q=0;Q<ve&&(ae++,K=K.nextZ);Q++);for(ue=ve;ae>0||ue>0&&K;)ae!==0&&(ue===0||!K||J.z<=K.z)?(X=J,J=J.nextZ,ae--):(X=K,K=K.nextZ,ue--),ie?ie.nextZ=X:ee=X,X.prevZ=ie,ie=X;J=K}ie.nextZ=null,ve*=2}while(se>1)}(te)}(S,P,I,D);for(var V,O,j=S;S.prev!==S.next;)if(V=S.prev,O=S.next,D?w(S,P,I,D):a(S))A.push(V.i/E),A.push(S.i/E),A.push(O.i/E),v(S),S=O.next,j=O.next;else if((S=O)===j){z?z===1?k(S=b(T(S),A,E),A,E,P,I,D,2):z===2&&f(S,A,E,P,I,D):k(T(S),A,E,P,I,D,1);break}}}function a(S){var A=S.prev,E=S,P=S.next;if(c(A,E,P)>=0)return!1;for(var I=S.next.next;I!==S.prev;){if(o(A.x,A.y,E.x,E.y,P.x,P.y,I.x,I.y)&&c(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function w(S,A,E,P){var I=S.prev,D=S,z=S.next;if(c(I,D,z)>=0)return!1;for(var V=I.x<D.x?I.x<z.x?I.x:z.x:D.x<z.x?D.x:z.x,O=I.y<D.y?I.y<z.y?I.y:z.y:D.y<z.y?D.y:z.y,j=I.x>D.x?I.x>z.x?I.x:z.x:D.x>z.x?D.x:z.x,Y=I.y>D.y?I.y>z.y?I.y:z.y:D.y>z.y?D.y:z.y,B=r(V,O,A,E,P),U=r(j,Y,A,E,P),q=S.prevZ,te=S.nextZ;q&&q.z>=B&&te&&te.z<=U;){if(q!==S.prev&&q!==S.next&&o(I.x,I.y,D.x,D.y,z.x,z.y,q.x,q.y)&&c(q.prev,q,q.next)>=0||(q=q.prevZ,te!==S.prev&&te!==S.next&&o(I.x,I.y,D.x,D.y,z.x,z.y,te.x,te.y)&&c(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;q&&q.z>=B;){if(q!==S.prev&&q!==S.next&&o(I.x,I.y,D.x,D.y,z.x,z.y,q.x,q.y)&&c(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;te&&te.z<=U;){if(te!==S.prev&&te!==S.next&&o(I.x,I.y,D.x,D.y,z.x,z.y,te.x,te.y)&&c(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function b(S,A,E){var P=S;do{var I=P.prev,D=P.next.next;!d(I,D)&&u(I,P,P.next,D)&&g(I,D)&&g(D,I)&&(A.push(I.i/E),A.push(P.i/E),A.push(D.i/E),v(P),v(P.next),P=S=D),P=P.next}while(P!==S);return T(P)}function f(S,A,E,P,I,D){var z=S;do{for(var V=z.next.next;V!==z.prev;){if(z.i!==V.i&&l(z,V)){var O=m(z,V);return z=T(z,z.next),O=T(O,O.next),k(z,A,E,P,I,D),void k(O,A,E,P,I,D)}V=V.next}z=z.next}while(z!==S)}function s(S,A){return S.x-A.x}function t(S,A){if(A=function(P,I){var D,z=I,V=P.x,O=P.y,j=-1/0;do{if(O<=z.y&&O>=z.next.y&&z.next.y!==z.y){var Y=z.x+(O-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(Y<=V&&Y>j){if(j=Y,Y===V){if(O===z.y)return z;if(O===z.next.y)return z.next}D=z.x<z.next.x?z:z.next}}z=z.next}while(z!==I);if(!D)return null;if(V===j)return D;var B,U=D,q=D.x,te=D.y,ee=1/0;z=D;do V>=z.x&&z.x>=q&&V!==z.x&&o(O<te?V:j,O,q,te,O<te?j:V,O,z.x,z.y)&&(B=Math.abs(O-z.y)/(V-z.x),g(z,P)&&(B<ee||B===ee&&(z.x>D.x||z.x===D.x&&i(D,z)))&&(D=z,ee=B)),z=z.next;while(z!==U);return D}(S,A),A){var E=m(A,S);T(A,A.next),T(E,E.next)}}function i(S,A){return c(S.prev,S,A.prev)<0&&c(A.next,S,S.next)<0}function r(S,A,E,P,I){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*I)|S<<8))|S<<4))|S<<2))|S<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-P)*I)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function n(S){var A=S,E=S;do(A.x<E.x||A.x===E.x&&A.y<E.y)&&(E=A),A=A.next;while(A!==S);return E}function o(S,A,E,P,I,D,z,V){return(I-z)*(A-V)-(S-z)*(D-V)>=0&&(S-z)*(P-V)-(E-z)*(A-V)>=0&&(E-z)*(D-V)-(I-z)*(P-V)>=0}function l(S,A){return S.next.i!==A.i&&S.prev.i!==A.i&&!function(E,P){var I=E;do{if(I.i!==E.i&&I.next.i!==E.i&&I.i!==P.i&&I.next.i!==P.i&&u(I,I.next,E,P))return!0;I=I.next}while(I!==E);return!1}(S,A)&&(g(S,A)&&g(A,S)&&function(E,P){var I=E,D=!1,z=(E.x+P.x)/2,V=(E.y+P.y)/2;do I.y>V!=I.next.y>V&&I.next.y!==I.y&&z<(I.next.x-I.x)*(V-I.y)/(I.next.y-I.y)+I.x&&(D=!D),I=I.next;while(I!==E);return D}(S,A)&&(c(S.prev,S,A.prev)||c(S,A.prev,A))||d(S,A)&&c(S.prev,S,S.next)>0&&c(A.prev,A,A.next)>0)}function c(S,A,E){return(A.y-S.y)*(E.x-A.x)-(A.x-S.x)*(E.y-A.y)}function d(S,A){return S.x===A.x&&S.y===A.y}function u(S,A,E,P){var I=p(c(S,A,E)),D=p(c(S,A,P)),z=p(c(E,P,S)),V=p(c(E,P,A));return I!==D&&z!==V||!(I!==0||!x(S,E,A))||!(D!==0||!x(S,P,A))||!(z!==0||!x(E,S,P))||!(V!==0||!x(E,A,P))}function x(S,A,E){return A.x<=Math.max(S.x,E.x)&&A.x>=Math.min(S.x,E.x)&&A.y<=Math.max(S.y,E.y)&&A.y>=Math.min(S.y,E.y)}function p(S){return S>0?1:S<0?-1:0}function g(S,A){return c(S.prev,S,S.next)<0?c(S,A,S.next)>=0&&c(S,S.prev,A)>=0:c(S,A,S.prev)<0||c(S,S.next,A)<0}function m(S,A){var E=new _(S.i,S.x,S.y),P=new _(A.i,A.x,A.y),I=S.next,D=A.prev;return S.next=A,A.prev=S,E.next=I,I.prev=E,P.next=E,E.prev=P,D.next=P,P.prev=D,P}function y(S,A,E,P){var I=new _(S,A,E);return P?(I.next=P.next,I.prev=P,P.next.prev=I,P.next=I):(I.prev=I,I.next=I),I}function v(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function _(S,A,E){this.i=S,this.x=A,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function h(S,A,E,P){for(var I=0,D=A,z=E-P;D<E;D+=P)I+=(S[z]-S[D])*(S[D+1]+S[z+1]),z=D;return I}F.exports=C,F.exports.default=C,C.deviation=function(S,A,E,P){var I=A&&A.length,D=I?A[0]*E:S.length,z=Math.abs(h(S,0,D,E));if(I)for(var V=0,O=A.length;V<O;V++){var j=A[V]*E,Y=V<O-1?A[V+1]*E:S.length;z-=Math.abs(h(S,j,Y,E))}var B=0;for(V=0;V<P.length;V+=3){var U=P[V]*E,q=P[V+1]*E,te=P[V+2]*E;B+=Math.abs((S[U]-S[te])*(S[q+1]-S[U+1])-(S[U]-S[q])*(S[te+1]-S[U+1]))}return z===0&&B===0?0:Math.abs((B-z)/z)},C.flatten=function(S){for(var A=S[0][0].length,E={vertices:[],holes:[],dimensions:A},P=0,I=0;I<S.length;I++){for(var D=0;D<S[I].length;D++)for(var z=0;z<A;z++)E.vertices.push(S[I][D][z]);I>0&&(P+=S[I-1].length,E.holes.push(P))}return E}},6688:function(F,C,e){var T=e(78484);F.exports=function(k,a){var w,b=[],f=[],s=[],t={},i=[];function r(g){s[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(m){delete t[g][m],s[m]&&r(m)})}function n(g){var m,y,v=!1;for(f.push(g),s[g]=!0,m=0;m<i[g].length;m++)(y=i[g][m])===w?(o(w,f),v=!0):s[y]||(v=n(y));if(v)r(g);else for(m=0;m<i[g].length;m++){y=i[g][m];var _=t[y];_||(_={},t[y]=_),_[y]=!0}return f.pop(),v}function o(g,m){var y=[].concat(m).concat(g);a?a(n):b.push(y)}function l(g){(function(E){for(var P=0;P<k.length;P++)P<E&&(k[P]=[]),k[P]=k[P].filter(function(I){return I>=E})})(g);for(var m,y=T(k).components.filter(function(E){return E.length>1}),v=1/0,_=0;_<y.length;_++)for(var h=0;h<y[_].length;h++)y[_][h]<v&&(v=y[_][h],m=_);var S=y[m];if(!S)return!1;var A=k.map(function(E,P){return S.indexOf(P)===-1?[]:E.filter(function(I){return S.indexOf(I)!==-1})});return{leastVertex:v,adjList:A}}w=0;for(var c=k.length;w<c;){var d=l(w);if(w=d.leastVertex,i=d.adjList){for(var u=0;u<i.length;u++)for(var x=0;x<i[u].length;x++){var p=i[u][x];s[+p]=!1,t[p]={}}n(w),w+=1}else w=c}return a?void 0:b}},41476:function(F,C,e){"use strict";var T=e(9252);F.exports=function(){return T(this).length=0,this}},74772:function(F,C,e){"use strict";F.exports=e(44716)()?Array.from:e(80816)},44716:function(F){"use strict";F.exports=function(){var C,e,T=Array.from;return typeof T=="function"&&(e=T(C=["raz","dwa"]),!!(e&&e!==C&&e[1]==="dwa"))}},80816:function(F,C,e){"use strict";var T=e(92664).iterator,k=e(60948),a=e(17024),w=e(81304),b=e(34044),f=e(9252),s=e(42584),t=e(29768),i=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;F.exports=function(l){var c,d,u,x,p,g,m,y,v,_,h=arguments[1],S=arguments[2];if(l=Object(f(l)),s(h)&&b(h),this&&this!==Array&&a(this))c=this;else{if(!h){if(k(l))return(p=l.length)!==1?Array.apply(null,l):((x=new Array(1))[0]=l[0],x);if(i(l)){for(x=new Array(p=l.length),d=0;d<p;++d)x[d]=l[d];return x}}x=[]}if(!i(l)){if((v=l[T])!==void 0){for(m=b(v).call(l),c&&(x=new c),y=m.next(),d=0;!y.done;)_=h?r.call(h,S,y.value,d):y.value,c?(n.value=_,o(x,d,n)):x[d]=_,y=m.next(),++d;p=d}else if(t(l)){for(p=l.length,c&&(x=new c),d=0,u=0;d<p;++d)_=l[d],d+1<p&&(g=_.charCodeAt(0))>=55296&&g<=56319&&(_+=l[++d]),_=h?r.call(h,S,_,u):_,c?(n.value=_,o(x,u,n)):x[u]=_,++u;p=u}}if(p===void 0)for(p=w(l.length),c&&(x=new c(p)),d=0;d<p;++d)_=h?r.call(h,S,l[d],d):l[d],c?(n.value=_,o(x,d,n)):x[d]=_;return c&&(n.value=null,x.length=p),x}},60948:function(F){"use strict";var C=Object.prototype.toString,e=C.call(function(){return arguments}());F.exports=function(T){return C.call(T)===e}},17024:function(F){"use strict";var C=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);F.exports=function(T){return typeof T=="function"&&e(C.call(T))}},33208:function(F){"use strict";F.exports=function(){}},85608:function(F,C,e){"use strict";F.exports=e(37328)()?Math.sign:e(92928)},37328:function(F){"use strict";F.exports=function(){var C=Math.sign;return typeof C=="function"&&C(10)===1&&C(-20)===-1}},92928:function(F){"use strict";F.exports=function(C){return C=Number(C),isNaN(C)||C===0?C:C>0?1:-1}},96936:function(F,C,e){"use strict";var T=e(85608),k=Math.abs,a=Math.floor;F.exports=function(w){return isNaN(w)?0:(w=Number(w))!==0&&isFinite(w)?T(w)*a(k(w)):w}},81304:function(F,C,e){"use strict";var T=e(96936),k=Math.max;F.exports=function(a){return k(0,T(a))}},14428:function(F,C,e){"use strict";var T=e(34044),k=e(9252),a=Function.prototype.bind,w=Function.prototype.call,b=Object.keys,f=Object.prototype.propertyIsEnumerable;F.exports=function(s,t){return function(i,r){var n,o=arguments[2],l=arguments[3];return i=Object(k(i)),T(r),n=b(i),l&&n.sort(typeof l=="function"?a.call(l,i):void 0),typeof s!="function"&&(s=n[s]),w.call(s,n,function(c,d){return f.call(i,c)?w.call(r,o,i[c],c,i,d):t})}}},38452:function(F,C,e){"use strict";F.exports=e(96276)()?Object.assign:e(81892)},96276:function(F){"use strict";F.exports=function(){var C,e=Object.assign;return typeof e=="function"&&(e(C={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),C.foo+C.bar+C.trzy==="razdwatrzy")}},81892:function(F,C,e){"use strict";var T=e(54768),k=e(9252),a=Math.max;F.exports=function(w,b){var f,s,t,i=a(arguments.length,2);for(w=Object(k(w)),t=function(r){try{w[r]=b[r]}catch(n){f||(f=n)}},s=1;s<i;++s)T(b=arguments[s]).forEach(t);if(f!==void 0)throw f;return w}},95920:function(F,C,e){"use strict";var T=e(74772),k=e(38452),a=e(9252);F.exports=function(w){var b=Object(a(w)),f=arguments[1],s=Object(arguments[2]);if(b!==w&&!f)return b;var t={};return f?T(f,function(i){(s.ensure||i in w)&&(t[i]=w[i])}):k(t,w),t}},14452:function(F,C,e){"use strict";var T,k,a,w,b=Object.create;e(63092)()||(T=e(8672)),F.exports=T?T.level!==1?b:(k={},a={},w={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(f){a[f]=f!=="__proto__"?w:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,a),Object.defineProperty(T,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(f,s){return b(f===null?k:f,s)}):b},42748:function(F,C,e){"use strict";F.exports=e(14428)("forEach")},69127:function(F,C,e){"use strict";var T=e(42584),k={function:!0,object:!0};F.exports=function(a){return T(a)&&k[typeof a]||!1}},42584:function(F,C,e){"use strict";var T=e(33208)();F.exports=function(k){return k!==T&&k!==null}},54768:function(F,C,e){"use strict";F.exports=e(87888)()?Object.keys:e(89592)},87888:function(F){"use strict";F.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(F,C,e){"use strict";var T=e(42584),k=Object.keys;F.exports=function(a){return k(T(a)?Object(a):a)}},84323:function(F,C,e){"use strict";var T=e(34044),k=e(42748),a=Function.prototype.call;F.exports=function(w,b){var f={},s=arguments[2];return T(b),k(w,function(t,i,r,n){f[i]=a.call(b,s,t,i,r,n)}),f}},50868:function(F,C,e){"use strict";var T=e(42584),k=Array.prototype.forEach,a=Object.create;F.exports=function(w){var b=a(null);return k.call(arguments,function(f){T(f)&&function(s,t){var i;for(i in s)t[i]=s[i]}(Object(f),b)}),b}},69932:function(F,C,e){"use strict";F.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(F){"use strict";var C=Object.create,e=Object.getPrototypeOf,T={};F.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&e(k((arguments[0]||C)(null),T))===T}},8672:function(F,C,e){"use strict";var T,k,a,w,b=e(69127),f=e(9252),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};T=function(r,n){if(f(r),n===null||b(n))return r;throw new TypeError("Prototype must be null or an object")},F.exports=(k=function(){var r,n=Object.create(null),o={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(r=l.set).call(n,o)}catch{}if(Object.getPrototypeOf(n)===o)return{set:r,level:2}}return n.__proto__=o,Object.getPrototypeOf(n)===o?{level:2}:((n={}).__proto__=o,Object.getPrototypeOf(n)===o&&{level:1})}(),k?(k.level===2?k.set?(w=k.set,a=function(r,n){return w.call(T(r,n),n),r}):a=function(r,n){return T(r,n).__proto__=n,r}:a=function r(n,o){var l;return T(n,o),(l=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,o===null&&(o=r.nullPolyfill),n.__proto__=o,l&&t(r.nullPolyfill,"__proto__",i),n},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(14452)},34044:function(F){"use strict";F.exports=function(C){if(typeof C!="function")throw new TypeError(C+" is not a function");return C}},92584:function(F,C,e){"use strict";var T=e(69127);F.exports=function(k){if(!T(k))throw new TypeError(k+" is not an Object");return k}},9252:function(F,C,e){"use strict";var T=e(42584);F.exports=function(k){if(!T(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(F,C,e){"use strict";F.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(F){"use strict";var C="razdwatrzy";F.exports=function(){return typeof C.contains=="function"&&C.contains("dwa")===!0&&C.contains("foo")===!1}},93040:function(F){"use strict";var C=String.prototype.indexOf;F.exports=function(e){return C.call(this,e,arguments[1])>-1}},29768:function(F){"use strict";var C=Object.prototype.toString,e=C.call("");F.exports=function(T){return typeof T=="string"||T&&typeof T=="object"&&(T instanceof String||C.call(T)===e)||!1}},82252:function(F){"use strict";var C=Object.create(null),e=Math.random;F.exports=function(){var T;do T=e().toString(36).slice(2);while(C[T]);return T}},52104:function(F,C,e){"use strict";var T,k=e(69932),a=e(71056),w=e(21092),b=e(92664),f=e(85512),s=Object.defineProperty;T=F.exports=function(t,i){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");f.call(this,t),i=i?a.call(i,"key+value")?"key+value":a.call(i,"key")?"key":"value":"value",s(this,"__kind__",w("",i))},k&&k(T,f),delete T.prototype.constructor,T.prototype=Object.create(f.prototype,{_resolve:w(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(T.prototype,b.toStringTag,w("c","Array Iterator"))},76024:function(F,C,e){"use strict";var T=e(60948),k=e(34044),a=e(29768),w=e(76252),b=Array.isArray,f=Function.prototype.call,s=Array.prototype.some;F.exports=function(t,i){var r,n,o,l,c,d,u,x,p=arguments[2];if(b(t)||T(t)?r="array":a(t)?r="string":t=w(t),k(i),o=function(){l=!0},r!=="array")if(r!=="string")for(n=t.next();!n.done;){if(f.call(i,p,n.value,o),l)return;n=t.next()}else for(d=t.length,c=0;c<d&&(u=t[c],c+1<d&&(x=u.charCodeAt(0))>=55296&&x<=56319&&(u+=t[++c]),f.call(i,p,u,o),!l);++c);else s.call(t,function(g){return f.call(i,p,g,o),l})}},76252:function(F,C,e){"use strict";var T=e(60948),k=e(29768),a=e(52104),w=e(80940),b=e(52891),f=e(92664).iterator;F.exports=function(s){return typeof b(s)[f]=="function"?s[f]():T(s)?new a(s):k(s)?new w(s):new a(s)}},85512:function(F,C,e){"use strict";var T,k=e(41476),a=e(38452),w=e(34044),b=e(9252),f=e(21092),s=e(27940),t=e(92664),i=Object.defineProperty,r=Object.defineProperties;F.exports=T=function(n,o){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");r(this,{__list__:f("w",b(n)),__context__:f("w",o),__nextIndex__:f("w",0)}),o&&(w(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete T.prototype.constructor,r(T.prototype,a({_next:f(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:f(function(){return this._createResult(this._next())}),_createResult:f(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:f(function(n){return this.__list__[n]}),_unBind:f(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:f(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:f(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(o,l){o>=n&&(this.__redo__[l]=++o)},this),this.__redo__.push(n)):i(this,"__redo__",f("c",[n])))}),_onDelete:f(function(n){var o;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((o=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(l,c){l>n&&(this.__redo__[c]=--l)},this)))}),_onClear:f(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(T.prototype,t.iterator,f(function(){return this}))},76368:function(F,C,e){"use strict";var T=e(60948),k=e(42584),a=e(29768),w=e(92664).iterator,b=Array.isArray;F.exports=function(f){return!(!k(f)||!b(f)&&!a(f)&&!T(f)&&typeof f[w]!="function")}},80940:function(F,C,e){"use strict";var T,k=e(69932),a=e(21092),w=e(92664),b=e(85512),f=Object.defineProperty;T=F.exports=function(s){if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),f(this,"__length__",a("",s.length))},k&&k(T,b),delete T.prototype.constructor,T.prototype=Object.create(b.prototype,{_next:a(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:a(function(s){var t,i=this.__list__[s];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),f(T.prototype,w.toStringTag,a("c","String Iterator"))},52891:function(F,C,e){"use strict";var T=e(76368);F.exports=function(k){if(!T(k))throw new TypeError(k+" is not iterable");return k}},60964:function(F){"use strict";function C(e,T){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),a=1;a<arguments.length;a++){var w=arguments[a];if(w!=null)for(var b=Object.keys(Object(w)),f=0,s=b.length;f<s;f++){var t=b[f],i=Object.getOwnPropertyDescriptor(w,t);i!==void 0&&i.enumerable&&(k[t]=w[t])}}return k}F.exports={assign:C,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:C})}}},92664:function(F,C,e){"use strict";F.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(F,C,e){"use strict";var T=e(12296),k={object:!0,symbol:!0};F.exports=function(){var a,w=T.Symbol;if(typeof w!="function")return!1;a=w("test symbol");try{String(a)}catch{return!1}return!!k[typeof w.iterator]&&!!k[typeof w.toPrimitive]&&!!k[typeof w.toStringTag]}},53908:function(F){"use strict";F.exports=function(C){return!!C&&(typeof C=="symbol"||!!C.constructor&&C.constructor.name==="Symbol"&&C[C.constructor.toStringTag]==="Symbol")}},96863:function(F,C,e){"use strict";var T=e(21092),k=Object.create,a=Object.defineProperty,w=Object.prototype,b=k(null);F.exports=function(f){for(var s,t,i=0;b[f+(i||"")];)++i;return b[f+=i||""]=!0,a(w,s="@@"+f,T.gs(null,function(r){t||(t=!0,a(this,s,T(r)),t=!1)})),s}},53540:function(F,C,e){"use strict";var T=e(21092),k=e(12296).Symbol;F.exports=function(a){return Object.defineProperties(a,{hasInstance:T("",k&&k.hasInstance||a("hasInstance")),isConcatSpreadable:T("",k&&k.isConcatSpreadable||a("isConcatSpreadable")),iterator:T("",k&&k.iterator||a("iterator")),match:T("",k&&k.match||a("match")),replace:T("",k&&k.replace||a("replace")),search:T("",k&&k.search||a("search")),species:T("",k&&k.species||a("species")),split:T("",k&&k.split||a("split")),toPrimitive:T("",k&&k.toPrimitive||a("toPrimitive")),toStringTag:T("",k&&k.toStringTag||a("toStringTag")),unscopables:T("",k&&k.unscopables||a("unscopables"))})}},73852:function(F,C,e){"use strict";var T=e(21092),k=e(63948),a=Object.create(null);F.exports=function(w){return Object.defineProperties(w,{for:T(function(b){return a[b]?a[b]:a[b]=w(String(b))}),keyFor:T(function(b){var f;for(f in k(b),a)if(a[f]===b)return f})})}},18376:function(F,C,e){"use strict";var T,k,a,w=e(21092),b=e(63948),f=e(12296).Symbol,s=e(96863),t=e(53540),i=e(73852),r=Object.create,n=Object.defineProperties,o=Object.defineProperty;if(typeof f=="function")try{String(f()),a=!0}catch{}else f=null;k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return T(l)},F.exports=T=function l(c){var d;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return a?f(c):(d=r(k.prototype),c=c===void 0?"":String(c),n(d,{__description__:w("",c),__name__:w("",s(c))}))},t(T),i(T),n(k.prototype,{constructor:w(T),toString:w("",function(){return this.__name__})}),n(T.prototype,{toString:w(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:w(function(){return b(this)})}),o(T.prototype,T.toPrimitive,w("",function(){var l=b(this);return typeof l=="symbol"?l:l.toString()})),o(T.prototype,T.toStringTag,w("c","Symbol")),o(k.prototype,T.toStringTag,w("c",T.prototype[T.toStringTag])),o(k.prototype,T.toPrimitive,w("c",T.prototype[T.toPrimitive]))},63948:function(F,C,e){"use strict";var T=e(53908);F.exports=function(k){if(!T(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(F,C,e){"use strict";F.exports=e(96979)()?WeakMap:e(64864)},96979:function(F){"use strict";F.exports=function(){var C,e;if(typeof WeakMap!="function")return!1;try{C=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(C)==="[object WeakMap]"&&typeof C.set=="function"&&C.set({},1)===C&&typeof C.delete=="function"&&typeof C.has=="function"&&C.get(e)==="one"}},69876:function(F){"use strict";F.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(F,C,e){"use strict";var T,k=e(42584),a=e(69932),w=e(92584),b=e(9252),f=e(82252),s=e(21092),t=e(76252),i=e(76024),r=e(92664).toStringTag,n=e(69876),o=Array.isArray,l=Object.defineProperty,c=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf;F.exports=T=function(){var u,x=arguments[0];if(!(this instanceof T))throw new TypeError("Constructor requires 'new'");return u=n&&a&&WeakMap!==T?a(new WeakMap,d(this)):this,k(x)&&(o(x)||(x=t(x))),l(u,"__weakMapData__",s("c","$weakMap$"+f())),x&&i(x,function(p){b(p),u.set(p[0],p[1])}),u},n&&(a&&a(T,WeakMap),T.prototype=Object.create(WeakMap.prototype,{constructor:s(T)})),Object.defineProperties(T.prototype,{delete:s(function(u){return!!c.call(w(u),this.__weakMapData__)&&(delete u[this.__weakMapData__],!0)}),get:s(function(u){if(c.call(w(u),this.__weakMapData__))return u[this.__weakMapData__]}),has:s(function(u){return c.call(w(u),this.__weakMapData__)}),set:s(function(u,x){return l(w(u),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),l(T.prototype,r,s("c","WeakMap"))},61252:function(F){"use strict";var C,e=typeof Reflect=="object"?Reflect:null,T=e&&typeof e.apply=="function"?e.apply:function(c,d,u){return Function.prototype.apply.call(c,d,u)};C=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var k=Number.isNaN||function(c){return c!=c};function a(){a.init.call(this)}F.exports=a,F.exports.once=function(c,d){return new Promise(function(u,x){function p(m){c.removeListener(d,g),x(m)}function g(){typeof c.removeListener=="function"&&c.removeListener("error",p),u([].slice.call(arguments))}l(c,d,g,{once:!0}),d!=="error"&&function(m,y,v){typeof m.on=="function"&&l(m,"error",y,{once:!0})}(c,p)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var w=10;function b(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function f(c){return c._maxListeners===void 0?a.defaultMaxListeners:c._maxListeners}function s(c,d,u,x){var p,g,m,y;if(b(u),(g=c._events)===void 0?(g=c._events=Object.create(null),c._eventsCount=0):(g.newListener!==void 0&&(c.emit("newListener",d,u.listener?u.listener:u),g=c._events),m=g[d]),m===void 0)m=g[d]=u,++c._eventsCount;else if(typeof m=="function"?m=g[d]=x?[u,m]:[m,u]:x?m.unshift(u):m.push(u),(p=f(c))>0&&m.length>p&&!m.warned){m.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=c,v.type=d,v.count=m.length,y=v,console&&console.warn&&console.warn(y)}return c}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(c,d,u){var x={fired:!1,wrapFn:void 0,target:c,type:d,listener:u},p=t.bind(x);return p.listener=u,x.wrapFn=p,p}function r(c,d,u){var x=c._events;if(x===void 0)return[];var p=x[d];return p===void 0?[]:typeof p=="function"?u?[p.listener||p]:[p]:u?function(g){for(var m=new Array(g.length),y=0;y<m.length;++y)m[y]=g[y].listener||g[y];return m}(p):o(p,p.length)}function n(c){var d=this._events;if(d!==void 0){var u=d[c];if(typeof u=="function")return 1;if(u!==void 0)return u.length}return 0}function o(c,d){for(var u=new Array(d),x=0;x<d;++x)u[x]=c[x];return u}function l(c,d,u,x){if(typeof c.on=="function")x.once?c.once(d,u):c.on(d,u);else{if(typeof c.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(d,function p(g){x.once&&c.removeEventListener(d,p),u(g)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(c){if(typeof c!="number"||c<0||k(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");w=c}}),a.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||k(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(c){for(var d=[],u=1;u<arguments.length;u++)d.push(arguments[u]);var x=c==="error",p=this._events;if(p!==void 0)x=x&&p.error===void 0;else if(!x)return!1;if(x){var g;if(d.length>0&&(g=d[0]),g instanceof Error)throw g;var m=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw m.context=g,m}var y=p[c];if(y===void 0)return!1;if(typeof y=="function")T(y,this,d);else{var v=y.length,_=o(y,v);for(u=0;u<v;++u)T(_[u],this,d)}return!0},a.prototype.addListener=function(c,d){return s(this,c,d,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(c,d){return s(this,c,d,!0)},a.prototype.once=function(c,d){return b(d),this.on(c,i(this,c,d)),this},a.prototype.prependOnceListener=function(c,d){return b(d),this.prependListener(c,i(this,c,d)),this},a.prototype.removeListener=function(c,d){var u,x,p,g,m;if(b(d),(x=this._events)===void 0)return this;if((u=x[c])===void 0)return this;if(u===d||u.listener===d)--this._eventsCount==0?this._events=Object.create(null):(delete x[c],x.removeListener&&this.emit("removeListener",c,u.listener||d));else if(typeof u!="function"){for(p=-1,g=u.length-1;g>=0;g--)if(u[g]===d||u[g].listener===d){m=u[g].listener,p=g;break}if(p<0)return this;p===0?u.shift():function(y,v){for(;v+1<y.length;v++)y[v]=y[v+1];y.pop()}(u,p),u.length===1&&(x[c]=u[0]),x.removeListener!==void 0&&this.emit("removeListener",c,m||d)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(c){var d,u,x;if((u=this._events)===void 0)return this;if(u.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):u[c]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete u[c]),this;if(arguments.length===0){var p,g=Object.keys(u);for(x=0;x<g.length;++x)(p=g[x])!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(d=u[c])=="function")this.removeListener(c,d);else if(d!==void 0)for(x=d.length-1;x>=0;x--)this.removeListener(c,d[x]);return this},a.prototype.listeners=function(c){return r(this,c,!0)},a.prototype.rawListeners=function(c){return r(this,c,!1)},a.listenerCount=function(c,d){return typeof c.listenerCount=="function"?c.listenerCount(d):n.call(c,d)},a.prototype.listenerCount=n,a.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]}},39072:function(F){var C=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};F.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return C()}try{return __global__||C()}finally{delete Object.prototype.__global__}}()},12296:function(F,C,e){"use strict";F.exports=e(45072)()?globalThis:e(39072)},45072:function(F){"use strict";F.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(F,C,e){"use strict";var T=e(94576);F.exports=function(k){var a=typeof k;if(a==="string"){var w=k;if((k=+k)==0&&T(w))return!1}else if(a!=="number")return!1;return k-k<1}},47520:function(F,C,e){var T=e(72512);F.exports=function(k,a,w){if(!k)throw new TypeError("must specify data as first parameter");if(w=0|+(w||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,f,s,t,i=k[0].length,r=k.length*i;a&&typeof a!="string"||(a=new(T(a||"float32"))(r+w));var n=a.length-w;if(r!==n)throw new Error("source length "+r+" ("+i+"x"+k.length+") does not match destination length "+n);for(b=0,s=w;b<k.length;b++)for(f=0;f<i;f++)a[s++]=k[b][f]===null?NaN:k[b][f]}else if(a&&typeof a!="string")a.set(k,w);else{var o=T(a||"float32");if(Array.isArray(k)||a==="array")for(b=0,s=w,t=(a=new o(k.length+w)).length;s<t;s++,b++)a[s]=k[b]===null?NaN:k[b];else w===0?a=new o(k):(a=new o(k.length+w)).set(k,w)}return a}},33888:function(F,C,e){"use strict";var T=e(49395),k=[32,126];F.exports=function(a){var w=(a=a||{}).shape?a.shape:a.canvas?[a.canvas.width,a.canvas.height]:[512,512],b=a.canvas||document.createElement("canvas"),f=a.font,s=typeof a.step=="number"?[a.step,a.step]:a.step||[32,32],t=a.chars||k;if(f&&typeof f!="string"&&(f=T(f)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],r=t[0],n=0;r<=t[1];r++)i[n++]=String.fromCharCode(r);t=i}}else t=String(t).split("");w=w.slice(),b.width=w[0],b.height=w[1];var o=b.getContext("2d");o.fillStyle="#000",o.fillRect(0,0,b.width,b.height),o.font=f,o.textAlign="center",o.textBaseline="middle",o.fillStyle="#fff";var l=s[0]/2,c=s[1]/2;for(r=0;r<t.length;r++)o.fillText(t[r],l,c),(l+=s[0])>w[0]-s[0]/2&&(l=s[0]/2,c+=s[1]);return b}},71920:function(F){"use strict";function C(a,w){w||(w={}),(typeof a=="string"||Array.isArray(a))&&(w.family=a);var b=Array.isArray(w.family)?w.family.join(", "):w.family;if(!b)throw Error("`family` must be defined");var f=w.size||w.fontSize||w.em||48,s=w.weight||w.fontWeight||"",t=(a=[w.style||w.fontStyle||"",s,f].join(" ")+"px "+b,w.origin||"top");if(C.cache[b]&&f<=C.cache[b].em)return e(C.cache[b],t);var i=w.canvas||C.canvas,r=i.getContext("2d"),n={upper:w.upper!==void 0?w.upper:"H",lower:w.lower!==void 0?w.lower:"x",descent:w.descent!==void 0?w.descent:"p",ascent:w.ascent!==void 0?w.ascent:"h",tittle:w.tittle!==void 0?w.tittle:"i",overshoot:w.overshoot!==void 0?w.overshoot:"O"},o=Math.ceil(1.5*f);i.height=o,i.width=.5*o,r.font=a;var l="H",c={top:0};r.clearRect(0,0,o,o),r.textBaseline="top",r.fillStyle="black",r.fillText(l,0,0);var d=T(r.getImageData(0,0,o,o));r.clearRect(0,0,o,o),r.textBaseline="bottom",r.fillText(l,0,o);var u=T(r.getImageData(0,0,o,o));c.lineHeight=c.bottom=o-u+d,r.clearRect(0,0,o,o),r.textBaseline="alphabetic",r.fillText(l,0,o);var x=o-T(r.getImageData(0,0,o,o))-1+d;c.baseline=c.alphabetic=x,r.clearRect(0,0,o,o),r.textBaseline="middle",r.fillText(l,0,.5*o);var p=T(r.getImageData(0,0,o,o));c.median=c.middle=o-p-1+d-.5*o,r.clearRect(0,0,o,o),r.textBaseline="hanging",r.fillText(l,0,.5*o);var g=T(r.getImageData(0,0,o,o));c.hanging=o-g-1+d-.5*o,r.clearRect(0,0,o,o),r.textBaseline="ideographic",r.fillText(l,0,o);var m=T(r.getImageData(0,0,o,o));if(c.ideographic=o-m-1+d,n.upper&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.upper,0,0),c.upper=T(r.getImageData(0,0,o,o)),c.capHeight=c.baseline-c.upper),n.lower&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.lower,0,0),c.lower=T(r.getImageData(0,0,o,o)),c.xHeight=c.baseline-c.lower),n.tittle&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.tittle,0,0),c.tittle=T(r.getImageData(0,0,o,o))),n.ascent&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.ascent,0,0),c.ascent=T(r.getImageData(0,0,o,o))),n.descent&&(r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.descent,0,0),c.descent=k(r.getImageData(0,0,o,o))),n.overshoot){r.clearRect(0,0,o,o),r.textBaseline="top",r.fillText(n.overshoot,0,0);var y=k(r.getImageData(0,0,o,o));c.overshoot=y-x}for(var v in c)c[v]/=f;return c.em=f,C.cache[b]=c,e(c,t)}function e(a,w){var b={};for(var f in typeof w=="string"&&(w=a[w]),a)f!=="em"&&(b[f]=a[f]-w);return b}function T(a){for(var w=a.height,b=a.data,f=3;f<b.length;f+=4)if(b[f]!==0)return Math.floor(.25*(f-3)/w)}function k(a){for(var w=a.height,b=a.data,f=b.length-1;f>0;f-=4)if(b[f]!==0)return Math.floor(.25*(f-3)/w)}F.exports=C,C.canvas=document.createElement("canvas"),C.cache={}},46492:function(F,C,e){"use strict";var T=e(90720),k=Object.prototype.toString,a=Object.prototype.hasOwnProperty;F.exports=function(w,b,f){if(!T(b))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=f),k.call(w)==="[object Array]"?function(t,i,r){for(var n=0,o=t.length;n<o;n++)a.call(t,n)&&(r==null?i(t[n],n,t):i.call(r,t[n],n,t))}(w,b,s):typeof w=="string"?function(t,i,r){for(var n=0,o=t.length;n<o;n++)r==null?i(t.charAt(n),n,t):i.call(r,t.charAt(n),n,t)}(w,b,s):function(t,i,r){for(var n in t)a.call(t,n)&&(r==null?i(t[n],n,t):i.call(r,t[n],n,t))}(w,b,s)}},74336:function(F){"use strict";var C=Object.prototype.toString,e=Math.max,T=function(k,a){for(var w=[],b=0;b<k.length;b+=1)w[b]=k[b];for(var f=0;f<a.length;f+=1)w[f+k.length]=a[f];return w};F.exports=function(k){var a=this;if(typeof a!="function"||C.apply(a)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+a);for(var w,b=function(r,n){for(var o=[],l=1,c=0;l<r.length;l+=1,c+=1)o[c]=r[l];return o}(arguments),f=e(0,a.length-b.length),s=[],t=0;t<f;t++)s[t]="$"+t;if(w=Function("binder","return function ("+function(r,n){for(var o="",l=0;l<r.length;l+=1)o+=r[l],l+1<r.length&&(o+=",");return o}(s)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof w){var r=a.apply(this,T(b,arguments));return Object(r)===r?r:this}return a.apply(k,T(b,arguments))}),a.prototype){var i=function(){};i.prototype=a.prototype,w.prototype=new i,i.prototype=null}return w}},8844:function(F,C,e){"use strict";var T=e(74336);F.exports=Function.prototype.bind||T},13380:function(F){F.exports=function(C,e){if(typeof C!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var T=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(T.width=e.width),typeof e.height=="number"&&(T.height=e.height);var k,a=e;try{var w=[C];C.indexOf("webgl")===0&&w.push("experimental-"+C);for(var b=0;b<w.length;b++)if(k=T.getContext(w[b],a))return k}catch{k=null}return k||null}},53664:function(F,C,e){"use strict";var T,k=SyntaxError,a=Function,w=TypeError,b=function(P){try{return a('"use strict"; return ('+P+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var s=function(){throw new w},t=f?function(){try{return s}catch{try{return f(arguments,"callee").get}catch{return s}}}():s,i=e(71080)(),r=e(69572)(),n=Object.getPrototypeOf||(r?function(P){return P.__proto__}:null),o={},l=typeof Uint8Array<"u"&&n?n(Uint8Array):T,c={"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":i&&n?n([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":o,"%AsyncGenerator%":o,"%AsyncGeneratorFunction%":o,"%AsyncIteratorPrototype%":o,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":o,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&n?n(n([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i&&n?n(new Map()[Symbol.iterator]()):T,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i&&n?n(new Set()[Symbol.iterator]()):T,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&n?n(""[Symbol.iterator]()):T,"%Symbol%":i?Symbol:T,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":w,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet};if(n)try{null.error}catch(P){var d=n(n(P));c["%Error.prototype%"]=d}var u=function P(I){var D;if(I==="%AsyncFunction%")D=b("async function () {}");else if(I==="%GeneratorFunction%")D=b("function* () {}");else if(I==="%AsyncGeneratorFunction%")D=b("async function* () {}");else if(I==="%AsyncGenerator%"){var z=P("%AsyncGeneratorFunction%");z&&(D=z.prototype)}else if(I==="%AsyncIteratorPrototype%"){var V=P("%AsyncGenerator%");V&&n&&(D=n(V.prototype))}return c[I]=D,D},x={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},p=e(8844),g=e(92064),m=p.call(Function.call,Array.prototype.concat),y=p.call(Function.apply,Array.prototype.splice),v=p.call(Function.call,String.prototype.replace),_=p.call(Function.call,String.prototype.slice),h=p.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,E=function(P,I){var D,z=P;if(g(x,z)&&(z="%"+(D=x[z])[0]+"%"),g(c,z)){var V=c[z];if(V===o&&(V=u(z)),V===void 0&&!I)throw new w("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:D,name:z,value:V}}throw new k("intrinsic "+P+" does not exist!")};F.exports=function(P,I){if(typeof P!="string"||P.length===0)throw new w("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof I!="boolean")throw new w('"allowMissing" argument must be a boolean');if(h(/^%?[^%]*%?$/,P)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var D=function(K){var X=_(K,0,1),ie=_(K,-1);if(X==="%"&&ie!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(ie==="%"&&X!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var se=[];return v(K,S,function(ae,ue,ve,ye){se[se.length]=ve?v(ye,A,"$1"):ue||ae}),se}(P),z=D.length>0?D[0]:"",V=E("%"+z+"%",I),O=V.name,j=V.value,Y=!1,B=V.alias;B&&(z=B[0],y(D,m([0,1],B)));for(var U=1,q=!0;U<D.length;U+=1){var te=D[U],ee=_(te,0,1),Q=_(te,-1);if((ee==='"'||ee==="'"||ee==="`"||Q==='"'||Q==="'"||Q==="`")&&ee!==Q)throw new k("property names with quotes must have matching quotes");if(te!=="constructor"&&q||(Y=!0),g(c,O="%"+(z+="."+te)+"%"))j=c[O];else if(j!=null){if(!(te in j)){if(!I)throw new w("base intrinsic for "+P+" exists, but the property is not available.");return}if(f&&U+1>=D.length){var J=f(j,te);j=(q=!!J)&&"get"in J&&!("originalValue"in J.get)?J.get:j[te]}else q=g(j,te),j=j[te];q&&!Y&&(c[O]=j)}}return j}},12408:function(F){F.exports=function(C,e){var T=e[0],k=e[1],a=e[2],w=e[3],b=e[4],f=e[5],s=e[6],t=e[7],i=e[8],r=e[9],n=e[10],o=e[11],l=e[12],c=e[13],d=e[14],u=e[15];return C[0]=f*(n*u-o*d)-r*(s*u-t*d)+c*(s*o-t*n),C[1]=-(k*(n*u-o*d)-r*(a*u-w*d)+c*(a*o-w*n)),C[2]=k*(s*u-t*d)-f*(a*u-w*d)+c*(a*t-w*s),C[3]=-(k*(s*o-t*n)-f*(a*o-w*n)+r*(a*t-w*s)),C[4]=-(b*(n*u-o*d)-i*(s*u-t*d)+l*(s*o-t*n)),C[5]=T*(n*u-o*d)-i*(a*u-w*d)+l*(a*o-w*n),C[6]=-(T*(s*u-t*d)-b*(a*u-w*d)+l*(a*t-w*s)),C[7]=T*(s*o-t*n)-b*(a*o-w*n)+i*(a*t-w*s),C[8]=b*(r*u-o*c)-i*(f*u-t*c)+l*(f*o-t*r),C[9]=-(T*(r*u-o*c)-i*(k*u-w*c)+l*(k*o-w*r)),C[10]=T*(f*u-t*c)-b*(k*u-w*c)+l*(k*t-w*f),C[11]=-(T*(f*o-t*r)-b*(k*o-w*r)+i*(k*t-w*f)),C[12]=-(b*(r*d-n*c)-i*(f*d-s*c)+l*(f*n-s*r)),C[13]=T*(r*d-n*c)-i*(k*d-a*c)+l*(k*n-a*r),C[14]=-(T*(f*d-s*c)-b*(k*d-a*c)+l*(k*s-a*f)),C[15]=T*(f*n-s*r)-b*(k*n-a*r)+i*(k*s-a*f),C}},76860:function(F){F.exports=function(C){var e=new Float32Array(16);return e[0]=C[0],e[1]=C[1],e[2]=C[2],e[3]=C[3],e[4]=C[4],e[5]=C[5],e[6]=C[6],e[7]=C[7],e[8]=C[8],e[9]=C[9],e[10]=C[10],e[11]=C[11],e[12]=C[12],e[13]=C[13],e[14]=C[14],e[15]=C[15],e}},64492:function(F){F.exports=function(C,e){return C[0]=e[0],C[1]=e[1],C[2]=e[2],C[3]=e[3],C[4]=e[4],C[5]=e[5],C[6]=e[6],C[7]=e[7],C[8]=e[8],C[9]=e[9],C[10]=e[10],C[11]=e[11],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15],C}},54212:function(F){F.exports=function(){var C=new Float32Array(16);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},70800:function(F){F.exports=function(C){var e=C[0],T=C[1],k=C[2],a=C[3],w=C[4],b=C[5],f=C[6],s=C[7],t=C[8],i=C[9],r=C[10],n=C[11],o=C[12],l=C[13],c=C[14],d=C[15];return(e*b-T*w)*(r*d-n*c)-(e*f-k*w)*(i*d-n*l)+(e*s-a*w)*(i*c-r*l)+(T*f-k*b)*(t*d-n*o)-(T*s-a*b)*(t*c-r*o)+(k*s-a*f)*(t*l-i*o)}},61784:function(F){F.exports=function(C,e){var T=e[0],k=e[1],a=e[2],w=e[3],b=T+T,f=k+k,s=a+a,t=T*b,i=k*b,r=k*f,n=a*b,o=a*f,l=a*s,c=w*b,d=w*f,u=w*s;return C[0]=1-r-l,C[1]=i+u,C[2]=n-d,C[3]=0,C[4]=i-u,C[5]=1-t-l,C[6]=o+c,C[7]=0,C[8]=n+d,C[9]=o-c,C[10]=1-t-r,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},91616:function(F){F.exports=function(C,e,T){var k,a,w,b=T[0],f=T[1],s=T[2],t=Math.sqrt(b*b+f*f+s*s);return Math.abs(t)<1e-6?null:(b*=t=1/t,f*=t,s*=t,k=Math.sin(e),w=1-(a=Math.cos(e)),C[0]=b*b*w+a,C[1]=f*b*w+s*k,C[2]=s*b*w-f*k,C[3]=0,C[4]=b*f*w-s*k,C[5]=f*f*w+a,C[6]=s*f*w+b*k,C[7]=0,C[8]=b*s*w+f*k,C[9]=f*s*w-b*k,C[10]=s*s*w+a,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C)}},51944:function(F){F.exports=function(C,e,T){var k=e[0],a=e[1],w=e[2],b=e[3],f=k+k,s=a+a,t=w+w,i=k*f,r=k*s,n=k*t,o=a*s,l=a*t,c=w*t,d=b*f,u=b*s,x=b*t;return C[0]=1-(o+c),C[1]=r+x,C[2]=n-u,C[3]=0,C[4]=r-x,C[5]=1-(i+c),C[6]=l+d,C[7]=0,C[8]=n+u,C[9]=l-d,C[10]=1-(i+o),C[11]=0,C[12]=T[0],C[13]=T[1],C[14]=T[2],C[15]=1,C}},69444:function(F){F.exports=function(C,e){return C[0]=e[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=e[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=e[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},48268:function(F){F.exports=function(C,e){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=e[0],C[13]=e[1],C[14]=e[2],C[15]=1,C}},21856:function(F){F.exports=function(C,e){var T=Math.sin(e),k=Math.cos(e);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=k,C[6]=T,C[7]=0,C[8]=0,C[9]=-T,C[10]=k,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},79216:function(F){F.exports=function(C,e){var T=Math.sin(e),k=Math.cos(e);return C[0]=k,C[1]=0,C[2]=-T,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=T,C[9]=0,C[10]=k,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},57736:function(F){F.exports=function(C,e){var T=Math.sin(e),k=Math.cos(e);return C[0]=k,C[1]=T,C[2]=0,C[3]=0,C[4]=-T,C[5]=k,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},38848:function(F){F.exports=function(C,e,T,k,a,w,b){var f=1/(T-e),s=1/(a-k),t=1/(w-b);return C[0]=2*w*f,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=2*w*s,C[6]=0,C[7]=0,C[8]=(T+e)*f,C[9]=(a+k)*s,C[10]=(b+w)*t,C[11]=-1,C[12]=0,C[13]=0,C[14]=b*w*2*t,C[15]=0,C}},36635:function(F){F.exports=function(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},36524:function(F,C,e){F.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(F){F.exports=function(C,e){var T=e[0],k=e[1],a=e[2],w=e[3],b=e[4],f=e[5],s=e[6],t=e[7],i=e[8],r=e[9],n=e[10],o=e[11],l=e[12],c=e[13],d=e[14],u=e[15],x=T*f-k*b,p=T*s-a*b,g=T*t-w*b,m=k*s-a*f,y=k*t-w*f,v=a*t-w*s,_=i*c-r*l,h=i*d-n*l,S=i*u-o*l,A=r*d-n*c,E=r*u-o*c,P=n*u-o*d,I=x*P-p*E+g*A+m*S-y*h+v*_;return I?(I=1/I,C[0]=(f*P-s*E+t*A)*I,C[1]=(a*E-k*P-w*A)*I,C[2]=(c*v-d*y+u*m)*I,C[3]=(n*y-r*v-o*m)*I,C[4]=(s*S-b*P-t*h)*I,C[5]=(T*P-a*S+w*h)*I,C[6]=(d*g-l*v-u*p)*I,C[7]=(i*v-n*g+o*p)*I,C[8]=(b*E-f*S+t*_)*I,C[9]=(k*S-T*E-w*_)*I,C[10]=(l*y-c*g+u*x)*I,C[11]=(r*g-i*y-o*x)*I,C[12]=(f*h-b*A-s*_)*I,C[13]=(T*A-k*h+a*_)*I,C[14]=(c*p-l*m-d*x)*I,C[15]=(i*m-r*p+n*x)*I,C):null}},56508:function(F,C,e){var T=e(36635);F.exports=function(k,a,w,b){var f,s,t,i,r,n,o,l,c,d,u=a[0],x=a[1],p=a[2],g=b[0],m=b[1],y=b[2],v=w[0],_=w[1],h=w[2];return Math.abs(u-v)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(p-h)<1e-6?T(k):(o=u-v,l=x-_,c=p-h,f=m*(c*=d=1/Math.sqrt(o*o+l*l+c*c))-y*(l*=d),s=y*(o*=d)-g*c,t=g*l-m*o,(d=Math.sqrt(f*f+s*s+t*t))?(f*=d=1/d,s*=d,t*=d):(f=0,s=0,t=0),i=l*t-c*s,r=c*f-o*t,n=o*s-l*f,(d=Math.sqrt(i*i+r*r+n*n))?(i*=d=1/d,r*=d,n*=d):(i=0,r=0,n=0),k[0]=f,k[1]=i,k[2]=o,k[3]=0,k[4]=s,k[5]=r,k[6]=l,k[7]=0,k[8]=t,k[9]=n,k[10]=c,k[11]=0,k[12]=-(f*u+s*x+t*p),k[13]=-(i*u+r*x+n*p),k[14]=-(o*u+l*x+c*p),k[15]=1,k)}},80944:function(F){F.exports=function(C,e,T){var k=e[0],a=e[1],w=e[2],b=e[3],f=e[4],s=e[5],t=e[6],i=e[7],r=e[8],n=e[9],o=e[10],l=e[11],c=e[12],d=e[13],u=e[14],x=e[15],p=T[0],g=T[1],m=T[2],y=T[3];return C[0]=p*k+g*f+m*r+y*c,C[1]=p*a+g*s+m*n+y*d,C[2]=p*w+g*t+m*o+y*u,C[3]=p*b+g*i+m*l+y*x,p=T[4],g=T[5],m=T[6],y=T[7],C[4]=p*k+g*f+m*r+y*c,C[5]=p*a+g*s+m*n+y*d,C[6]=p*w+g*t+m*o+y*u,C[7]=p*b+g*i+m*l+y*x,p=T[8],g=T[9],m=T[10],y=T[11],C[8]=p*k+g*f+m*r+y*c,C[9]=p*a+g*s+m*n+y*d,C[10]=p*w+g*t+m*o+y*u,C[11]=p*b+g*i+m*l+y*x,p=T[12],g=T[13],m=T[14],y=T[15],C[12]=p*k+g*f+m*r+y*c,C[13]=p*a+g*s+m*n+y*d,C[14]=p*w+g*t+m*o+y*u,C[15]=p*b+g*i+m*l+y*x,C}},97688:function(F){F.exports=function(C,e,T,k,a,w,b){var f=1/(e-T),s=1/(k-a),t=1/(w-b);return C[0]=-2*f,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*s,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*t,C[11]=0,C[12]=(e+T)*f,C[13]=(a+k)*s,C[14]=(b+w)*t,C[15]=1,C}},51296:function(F){F.exports=function(C,e,T,k,a){var w=1/Math.tan(e/2),b=1/(k-a);return C[0]=w/T,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=w,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=(a+k)*b,C[11]=-1,C[12]=0,C[13]=0,C[14]=2*a*k*b,C[15]=0,C}},63688:function(F){F.exports=function(C,e,T,k){var a=Math.tan(e.upDegrees*Math.PI/180),w=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),f=Math.tan(e.rightDegrees*Math.PI/180),s=2/(b+f),t=2/(a+w);return C[0]=s,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=t,C[6]=0,C[7]=0,C[8]=-(b-f)*s*.5,C[9]=(a-w)*t*.5,C[10]=k/(T-k),C[11]=-1,C[12]=0,C[13]=0,C[14]=k*T/(T-k),C[15]=0,C}},30016:function(F){F.exports=function(C,e,T,k){var a,w,b,f,s,t,i,r,n,o,l,c,d,u,x,p,g,m,y,v,_,h,S,A,E=k[0],P=k[1],I=k[2],D=Math.sqrt(E*E+P*P+I*I);return Math.abs(D)<1e-6?null:(E*=D=1/D,P*=D,I*=D,a=Math.sin(T),b=1-(w=Math.cos(T)),f=e[0],s=e[1],t=e[2],i=e[3],r=e[4],n=e[5],o=e[6],l=e[7],c=e[8],d=e[9],u=e[10],x=e[11],p=E*E*b+w,g=P*E*b+I*a,m=I*E*b-P*a,y=E*P*b-I*a,v=P*P*b+w,_=I*P*b+E*a,h=E*I*b+P*a,S=P*I*b-E*a,A=I*I*b+w,C[0]=f*p+r*g+c*m,C[1]=s*p+n*g+d*m,C[2]=t*p+o*g+u*m,C[3]=i*p+l*g+x*m,C[4]=f*y+r*v+c*_,C[5]=s*y+n*v+d*_,C[6]=t*y+o*v+u*_,C[7]=i*y+l*v+x*_,C[8]=f*h+r*S+c*A,C[9]=s*h+n*S+d*A,C[10]=t*h+o*S+u*A,C[11]=i*h+l*S+x*A,e!==C&&(C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C)}},15456:function(F){F.exports=function(C,e,T){var k=Math.sin(T),a=Math.cos(T),w=e[4],b=e[5],f=e[6],s=e[7],t=e[8],i=e[9],r=e[10],n=e[11];return e!==C&&(C[0]=e[0],C[1]=e[1],C[2]=e[2],C[3]=e[3],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C[4]=w*a+t*k,C[5]=b*a+i*k,C[6]=f*a+r*k,C[7]=s*a+n*k,C[8]=t*a-w*k,C[9]=i*a-b*k,C[10]=r*a-f*k,C[11]=n*a-s*k,C}},64840:function(F){F.exports=function(C,e,T){var k=Math.sin(T),a=Math.cos(T),w=e[0],b=e[1],f=e[2],s=e[3],t=e[8],i=e[9],r=e[10],n=e[11];return e!==C&&(C[4]=e[4],C[5]=e[5],C[6]=e[6],C[7]=e[7],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C[0]=w*a-t*k,C[1]=b*a-i*k,C[2]=f*a-r*k,C[3]=s*a-n*k,C[8]=w*k+t*a,C[9]=b*k+i*a,C[10]=f*k+r*a,C[11]=s*k+n*a,C}},4192:function(F){F.exports=function(C,e,T){var k=Math.sin(T),a=Math.cos(T),w=e[0],b=e[1],f=e[2],s=e[3],t=e[4],i=e[5],r=e[6],n=e[7];return e!==C&&(C[8]=e[8],C[9]=e[9],C[10]=e[10],C[11]=e[11],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C[0]=w*a+t*k,C[1]=b*a+i*k,C[2]=f*a+r*k,C[3]=s*a+n*k,C[4]=t*a-w*k,C[5]=i*a-b*k,C[6]=r*a-f*k,C[7]=n*a-s*k,C}},68152:function(F){F.exports=function(C,e,T){var k=T[0],a=T[1],w=T[2];return C[0]=e[0]*k,C[1]=e[1]*k,C[2]=e[2]*k,C[3]=e[3]*k,C[4]=e[4]*a,C[5]=e[5]*a,C[6]=e[6]*a,C[7]=e[7]*a,C[8]=e[8]*w,C[9]=e[9]*w,C[10]=e[10]*w,C[11]=e[11]*w,C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15],C}},89412:function(F){F.exports=function(C){return"mat4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+", "+C[9]+", "+C[10]+", "+C[11]+", "+C[12]+", "+C[13]+", "+C[14]+", "+C[15]+")"}},35176:function(F){F.exports=function(C,e,T){var k,a,w,b,f,s,t,i,r,n,o,l,c=T[0],d=T[1],u=T[2];return e===C?(C[12]=e[0]*c+e[4]*d+e[8]*u+e[12],C[13]=e[1]*c+e[5]*d+e[9]*u+e[13],C[14]=e[2]*c+e[6]*d+e[10]*u+e[14],C[15]=e[3]*c+e[7]*d+e[11]*u+e[15]):(k=e[0],a=e[1],w=e[2],b=e[3],f=e[4],s=e[5],t=e[6],i=e[7],r=e[8],n=e[9],o=e[10],l=e[11],C[0]=k,C[1]=a,C[2]=w,C[3]=b,C[4]=f,C[5]=s,C[6]=t,C[7]=i,C[8]=r,C[9]=n,C[10]=o,C[11]=l,C[12]=k*c+f*d+r*u+e[12],C[13]=a*c+s*d+n*u+e[13],C[14]=w*c+t*d+o*u+e[14],C[15]=b*c+i*d+l*u+e[15]),C}},86520:function(F){F.exports=function(C,e){if(C===e){var T=e[1],k=e[2],a=e[3],w=e[6],b=e[7],f=e[11];C[1]=e[4],C[2]=e[8],C[3]=e[12],C[4]=T,C[6]=e[9],C[7]=e[13],C[8]=k,C[9]=w,C[11]=e[14],C[12]=a,C[13]=b,C[14]=f}else C[0]=e[0],C[1]=e[4],C[2]=e[8],C[3]=e[12],C[4]=e[1],C[5]=e[5],C[6]=e[9],C[7]=e[13],C[8]=e[2],C[9]=e[6],C[10]=e[10],C[11]=e[14],C[12]=e[3],C[13]=e[7],C[14]=e[11],C[15]=e[15];return C}},23352:function(F,C,e){"use strict";var T=e(42771),k=e(55616),a=e(28624),w=e(55212),b=e(60463),f=e(72160),s=e(33888),t=e(14144),i=e(51160),r=e(58908),n=e(65819),o=e(23464),l=e(63768),c=e(50896),d=e(71920),u=e(47520),x=e(308).nextPow2,p=new b,g=!1;if(document.body){var m=document.body.appendChild(document.createElement("div"));m.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(m).fontStretch&&(g=!0),document.body.removeChild(m)}var y=function(v){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=w(v),this.shader=p.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||a({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),p.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(v)?v:{})};y.prototype.createShader=function(){var v=this.regl,_=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(h,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(h,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(h,S){return S.atlas.texture},charStep:function(h,S){return S.atlas.step},em:function(h,S){return S.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:v,draw:_,atlas:{}}},y.prototype.update=function(v){var _=this;if(typeof v=="string")v={text:v};else if(!v)return;(v=k(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(fe){return parseFloat(fe)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=i(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=u(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||v.font||(v.font=y.baseFontSize+"px sans-serif");var h,S=!1,A=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(fe,Se){if(typeof fe=="string")try{fe=T.parse(fe)}catch{fe=T.parse(y.baseFontSize+"px "+fe)}else{var be=fe.style,we=fe.weight,Me=fe.stretch,Pe=fe.variant;fe=T.parse(T.stringify(fe)),be&&(fe.style=be),we&&(fe.weight=we),Me&&(fe.stretch=Me),Pe&&(fe.variant=Pe)}var De=T.stringify({size:y.baseFontSize,family:fe.family,stretch:g?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style}),he=n(fe.size),_e=Math.round(he[0]*o(he[1]));if(_e!==_.fontSize[Se]&&(A=!0,_.fontSize[Se]=_e),!(_.font[Se]&&De==_.font[Se].baseString||(S=!0,_.font[Se]=y.fonts[De],_.font[Se]))){var Ae=fe.family.join(", "),Oe=[fe.style];fe.style!=fe.variant&&Oe.push(fe.variant),fe.variant!=fe.weight&&Oe.push(fe.weight),g&&fe.weight!=fe.stretch&&Oe.push(fe.stretch),_.font[Se]={baseString:De,family:Ae,weight:fe.weight,stretch:fe.stretch,style:fe.style,variant:fe.variant,width:{},kerning:{},metrics:d(Ae,{origin:"top",fontSize:y.baseFontSize,fontStyle:Oe.join(" ")})},y.fonts[De]=_.font[Se]}}),(S||A)&&this.font.forEach(function(fe,Se){var be=T.stringify({size:_.fontSize[Se],family:fe.family,stretch:g?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style});if(_.fontAtlas[Se]=_.shader.atlas[be],!_.fontAtlas[Se]){var we=fe.metrics;_.shader.atlas[be]=_.fontAtlas[Se]={fontString:be,step:2*Math.ceil(_.fontSize[Se]*we.bottom*.5),em:_.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}v.text==null&&(v.text=_.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var E=Array(.5*v.position.length),P=0;P<E.length;P++)E[P]=v.text;v.text=E}if(v.text!=null||S){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var I=1;I<v.text.length;I++)this.textOffsets[I]=this.textOffsets[I-1]+v.text[I-1].length,this.count+=v.text[I].length,this.counts.push(v.text[I].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];h=[],this.font.forEach(function(fe,Se){y.atlasContext.font=fe.baseString;for(var be=_.fontAtlas[Se],we=0;we<_.text.length;we++){var Me=_.text.charAt(we);if(be.ids[Me]==null&&(be.ids[Me]=be.chars.length,be.chars.push(Me),h.push(Me)),fe.width[Me]==null&&(fe.width[Me]=y.atlasContext.measureText(Me).width/y.baseFontSize,_.kerning)){var Pe=[];for(var De in fe.width)Pe.push(De+Me,Me+De);c(fe.kerning,l(fe.family,{pairs:Pe}))}}})}if(v.position)if(v.position.length>2){for(var D=!v.position[0].length,z=t.mallocFloat(2*this.count),V=0,O=0;V<this.counts.length;V++){var j=this.counts[V];if(D)for(var Y=0;Y<j;Y++)z[O++]=v.position[2*V],z[O++]=v.position[2*V+1];else for(var B=0;B<j;B++)z[O++]=v.position[V][0],z[O++]=v.position[V][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),t.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||S){var U=t.mallocUint8(this.count),q=t.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,ee=0;te<this.counts.length;te++){for(var Q=this.counts[te],J=this.font[te]||this.font[0],K=this.fontAtlas[te]||this.fontAtlas[0],X=0;X<Q;X++){var ie=this.text.charAt(ee),se=this.text.charAt(ee-1);if(U[ee]=K.ids[ie],q[2*ee]=J.width[ie],X){var ae=q[2*ee-2],ue=q[2*ee],ve=q[2*ee-1]+.5*ae+.5*ue;if(this.kerning){var ye=J.kerning[se+ie];ye&&(ve+=.001*ye)}q[2*ee+1]=ve}else q[2*ee+1]=.5*q[2*ee];ee++}this.textWidth.push(q.length?.5*q[2*ee-2]+q[2*ee-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:U,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),t.freeUint8(U),t.freeFloat(q),h.length&&this.font.forEach(function(fe,Se){var be=_.fontAtlas[Se],we=be.step,Me=Math.floor(y.maxAtlasSize/we),Pe=Math.min(Me,be.chars.length),De=Math.ceil(be.chars.length/Pe),he=x(Pe*we),_e=x(De*we);be.width=he,be.height=_e,be.rows=De,be.cols=Pe,be.em&&be.texture({data:s({canvas:y.atlasCanvas,font:be.fontString,chars:be.chars,shape:[he,_e],step:[we,we]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(fe,Se){var be=Array.isArray(_.align)?_.align.length>1?_.align[Se]:_.align[0]:_.align;if(typeof be=="number")return be;switch(be){case"right":case"end":return-fe;case"center":case"centre":case"middle":return .5*-fe}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(fe,Se){var be=(_.font[Se]||_.font[0]).metrics,we=0;return we+=.5*be.bottom,-1*(we+=typeof fe=="number"?fe-be.baseline:-be[fe])})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color!="string"&&isNaN(v.color)){var pe;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var de=v.color.length;pe=t.mallocUint8(de);for(var me=(v.color.subarray||v.color.slice).bind(v.color),ke=0;ke<de;ke+=4)pe.set(f(me(ke,ke+4),"uint8"),ke)}else{var Ce=v.color.length;pe=t.mallocUint8(4*Ce);for(var ge=0;ge<Ce;ge++)pe.set(f(v.color[ge]||0,"uint8"),4*ge)}this.color=pe}else this.color=f(v.color,"uint8");if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var oe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(oe);for(var re=0;re<this.batch.length;re++)this.batch[re]={count:this.counts.length>1?this.counts[re]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[re]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*re,4*re+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[re]:this.opacity,baseline:this.baselineOffset[re]!=null?this.baselineOffset[re]:this.baselineOffset[0],align:this.align?this.alignOffset[re]!=null?this.alignOffset[re]:this.alignOffset[0]:0,atlas:this.fontAtlas[re]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*re,2*re+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},y.prototype.destroy=function(){},y.prototype.kerning=!0,y.prototype.position={constant:new Float32Array(2)},y.prototype.translate=null,y.prototype.scale=null,y.prototype.font=null,y.prototype.text="",y.prototype.positionOffset=[0,0],y.prototype.opacity=1,y.prototype.color=new Uint8Array([0,0,0,255]),y.prototype.alignOffset=[0,0],y.maxAtlasSize=1024,y.atlasCanvas=document.createElement("canvas"),y.atlasContext=y.atlasCanvas.getContext("2d",{alpha:!1}),y.baseFontSize=64,y.fonts={},F.exports=y},55212:function(F,C,e){"use strict";var T=e(55616);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var f=b.container.getBoundingClientRect();b.canvas.width=b.width||f.right-f.left,b.canvas.height=b.height||f.bottom-f.top}}function a(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function w(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}F.exports=function(b){var f;if(b?typeof b=="string"&&(b={container:b}):b={},(b=a(b)||typeof(f=b).nodeName=="string"&&typeof f.appendChild=="function"&&typeof f.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:T(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}a(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=w(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=w(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},26444:function(F){F.exports=function(C){typeof C=="string"&&(C=[C]);for(var e=[].slice.call(arguments,1),T=[],k=0;k<C.length-1;k++)T.push(C[k],e[k]||"");return T.push(C[k]),T.join("")}},2304:function(F,C,e){"use strict";var T=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(T)try{T([],"length")}catch{T=null}F.exports=T},52264:function(F,C,e){"use strict";var T,k=e(24200);T=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,F.exports=T},89184:function(F,C,e){"use strict";var T=e(24200);F.exports=T&&function(){var k=!1;try{var a=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch{k=!1}return k}()},39640:function(F,C,e){"use strict";var T=e(53664)("%Object.defineProperty%",!0),k=function(){if(T)try{return T({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return T([],"length",{value:1}).length!==1}catch{return!0}},F.exports=k},69572:function(F){"use strict";var C={foo:{}},e=Object;F.exports=function(){return{__proto__:C}.foo===C.foo&&!({__proto__:null}instanceof e)}},71080:function(F,C,e){"use strict";var T=typeof Symbol<"u"&&Symbol,k=e(89320);F.exports=function(){return typeof T=="function"&&typeof Symbol=="function"&&typeof T("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},89320:function(F){"use strict";F.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var C={},e=Symbol("test"),T=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(T)!=="[object Symbol]")return!1;for(e in C[e]=42,C)return!1;if(typeof Object.keys=="function"&&Object.keys(C).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(C).length!==0)return!1;var k=Object.getOwnPropertySymbols(C);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(C,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(C,e);if(a.value!==42||a.enumerable!==!0)return!1}return!0}},46672:function(F,C,e){"use strict";var T=e(89320);F.exports=function(){return T()&&!!Symbol.toStringTag}},92064:function(F,C,e){"use strict";var T=Function.prototype.call,k=Object.prototype.hasOwnProperty,a=e(8844);F.exports=a.call(T,k)},35984:function(F,C){C.read=function(e,T,k,a,w){var b,f,s=8*w-a-1,t=(1<<s)-1,i=t>>1,r=-7,n=k?w-1:0,o=k?-1:1,l=e[T+n];for(n+=o,b=l&(1<<-r)-1,l>>=-r,r+=s;r>0;b=256*b+e[T+n],n+=o,r-=8);for(f=b&(1<<-r)-1,b>>=-r,r+=a;r>0;f=256*f+e[T+n],n+=o,r-=8);if(b===0)b=1-i;else{if(b===t)return f?NaN:1/0*(l?-1:1);f+=Math.pow(2,a),b-=i}return(l?-1:1)*f*Math.pow(2,b-a)},C.write=function(e,T,k,a,w,b){var f,s,t,i=8*b-w-1,r=(1<<i)-1,n=r>>1,o=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=a?0:b-1,c=a?1:-1,d=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(s=isNaN(T)?1:0,f=r):(f=Math.floor(Math.log(T)/Math.LN2),T*(t=Math.pow(2,-f))<1&&(f--,t*=2),(T+=f+n>=1?o/t:o*Math.pow(2,1-n))*t>=2&&(f++,t/=2),f+n>=r?(s=0,f=r):f+n>=1?(s=(T*t-1)*Math.pow(2,w),f+=n):(s=T*Math.pow(2,n-1)*Math.pow(2,w),f=0));w>=8;e[k+l]=255&s,l+=c,s/=256,w-=8);for(f=f<<w|s,i+=w;i>0;e[k+l]=255&f,l+=c,f/=256,i-=8);e[k+l-c]|=128*d}},6768:function(F){typeof Object.create=="function"?F.exports=function(C,e){e&&(C.super_=e,C.prototype=Object.create(e.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}))}:F.exports=function(C,e){if(e){C.super_=e;var T=function(){};T.prototype=e.prototype,C.prototype=new T,C.prototype.constructor=C}}},91148:function(F,C,e){"use strict";var T=e(46672)(),k=e(99676)("Object.prototype.toString"),a=function(f){return!(T&&f&&typeof f=="object"&&Symbol.toStringTag in f)&&k(f)==="[object Arguments]"},w=function(f){return!!a(f)||f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&k(f)!=="[object Array]"&&k(f.callee)==="[object Function]"},b=function(){return a(arguments)}();a.isLegacyArguments=w,F.exports=b?a:w},24200:function(F){F.exports=!0},90720:function(F){"use strict";var C,e,T=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{C=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,C)}catch(n){n!==e&&(k=null)}else k=null;var a=/^\s*class\b/,w=function(n){try{var o=T.call(n);return a.test(o)}catch{return!1}},b=function(n){try{return!w(n)&&(T.call(n),!0)}catch{return!1}},f=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var r=document.all;f.call(r)===f.call(document.all)&&(i=function(n){if((t||!n)&&(n===void 0||typeof n=="object"))try{var o=f.call(n);return(o==="[object HTMLAllCollection]"||o==="[object HTML document.all class]"||o==="[object HTMLCollection]"||o==="[object Object]")&&n("")==null}catch{}return!1})}F.exports=k?function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{k(n,null,C)}catch(o){if(o!==e)return!1}return!w(n)&&b(n)}:function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(s)return b(n);if(w(n))return!1;var o=f.call(n);return!(o!=="[object Function]"&&o!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(o))&&b(n)}},84420:function(F,C,e){"use strict";var T,k=Object.prototype.toString,a=Function.prototype.toString,w=/^\s*(?:function)?\*/,b=e(46672)(),f=Object.getPrototypeOf;F.exports=function(s){if(typeof s!="function")return!1;if(w.test(a.call(s)))return!0;if(!b)return k.call(s)==="[object GeneratorFunction]";if(!f)return!1;if(T===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();T=!!t&&f(t)}return f(s)===T}},96604:function(F){"use strict";F.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(F){"use strict";F.exports=function(C){return C!=C}},1560:function(F,C,e){"use strict";var T=e(57916),k=e(81288),a=e(85992),w=e(57740),b=e(59736),f=T(w(),Number);k(f,{getPolyfill:w,implementation:a,shim:b}),F.exports=f},57740:function(F,C,e){"use strict";var T=e(85992);F.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:T}},59736:function(F,C,e){"use strict";var T=e(81288),k=e(57740);F.exports=function(){var a=k();return T(Number,{isNaN:a},{isNaN:function(){return Number.isNaN!==a}}),a}},18400:function(F){"use strict";F.exports=function(C){var e=typeof C;return C!==null&&(e==="object"||e==="function")}},58908:function(F){"use strict";var C=Object.prototype.toString;F.exports=function(e){var T;return C.call(e)==="[object Object]"&&((T=Object.getPrototypeOf(e))===null||T===Object.getPrototypeOf({}))}},94576:function(F){"use strict";F.exports=function(C){for(var e,T=C.length,k=0;k<T;k++)if(((e=C.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(F){"use strict";F.exports=function(C){return typeof C=="string"&&(C=C.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(C)&&/[\dz]$/i.test(C)&&C.length>4))}},7728:function(F,C,e){"use strict";var T=e(46492),k=e(63436),a=e(99676),w=a("Object.prototype.toString"),b=e(46672)(),f=e(2304),s=typeof globalThis>"u"?e.g:globalThis,t=k(),i=a("Array.prototype.indexOf",!0)||function(l,c){for(var d=0;d<l.length;d+=1)if(l[d]===c)return d;return-1},r=a("String.prototype.slice"),n={},o=Object.getPrototypeOf;b&&f&&o&&T(t,function(l){var c=new s[l];if(Symbol.toStringTag in c){var d=o(c),u=f(d,Symbol.toStringTag);if(!u){var x=o(d);u=f(x,Symbol.toStringTag)}n[l]=u.get}}),F.exports=function(l){if(!l||typeof l!="object")return!1;if(!b||!(Symbol.toStringTag in l)){var c=r(w(l),8,-1);return i(t,c)>-1}return!!f&&function(d){var u=!1;return T(n,function(x,p){if(!u)try{u=x.call(d)===p}catch{}}),u}(l)}},76244:function(F){"use strict";F.exports=Math.log2||function(C){return Math.log(C)*Math.LOG2E}},62644:function(F,C,e){"use strict";F.exports=function(k,a){a||(a=k,k=window);var w=0,b=0,f=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(g){var m=!1;return"altKey"in g&&(m=m||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(m=m||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(m=m||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(m=m||g.metaKey!==s.meta,s.meta=!!g.metaKey),m}function r(g,m){var y=T.x(m),v=T.y(m);"buttons"in m&&(g=0|m.buttons),(g!==w||y!==b||v!==f||i(m))&&(w=0|g,b=y||0,f=v||0,a&&a(w,b,f,s))}function n(g){r(0,g)}function o(){(w||b||f||s.shift||s.alt||s.meta||s.control)&&(b=f=0,w=0,s.shift=s.alt=s.control=s.meta=!1,a&&a(0,0,0,s))}function l(g){i(g)&&a&&a(w,b,f,s)}function c(g){T.buttons(g)===0?r(0,g):r(w,g)}function d(g){r(w|T.buttons(g),g)}function u(g){r(w&~T.buttons(g),g)}function x(){t||(t=!0,k.addEventListener("mousemove",c),k.addEventListener("mousedown",d),k.addEventListener("mouseup",u),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",o),k.addEventListener("keyup",l),k.addEventListener("keydown",l),k.addEventListener("keypress",l),k!==window&&(window.addEventListener("blur",o),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}x();var p={element:k};return Object.defineProperties(p,{enabled:{get:function(){return t},set:function(g){g?x():t&&(t=!1,k.removeEventListener("mousemove",c),k.removeEventListener("mousedown",d),k.removeEventListener("mouseup",u),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",o),k.removeEventListener("keyup",l),k.removeEventListener("keydown",l),k.removeEventListener("keypress",l),k!==window&&(window.removeEventListener("blur",o),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return w},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return f},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),p};var T=e(93784)},29128:function(F){var C={left:0,top:0};F.exports=function(e,T,k){T=T||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var a,w=e.clientX||0,b=e.clientY||0,f=(a=T)===window||a===document||a===document.body?C:a.getBoundingClientRect();return k[0]=w-f.left,k[1]=b-f.top,k}},93784:function(F,C){"use strict";function e(T){return T.target||T.srcElement||window}C.buttons=function(T){if(typeof T=="object"){if("buttons"in T)return T.buttons;if("which"in T){if((k=T.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in T){var k;if((k=T.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},C.element=e,C.x=function(T){if(typeof T=="object"){if("offsetX"in T)return T.offsetX;var k=e(T).getBoundingClientRect();return T.clientX-k.left}return 0},C.y=function(T){if(typeof T=="object"){if("offsetY"in T)return T.offsetY;var k=e(T).getBoundingClientRect();return T.clientY-k.top}return 0}},97264:function(F,C,e){"use strict";var T=e(23464);F.exports=function(k,a,w){typeof k=="function"&&(w=!!a,a=k,k=window);var b=T("ex",k),f=function(s){w&&s.preventDefault();var t=s.deltaX||0,i=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=b;break;case 2:n=window.innerHeight}if(i*=n,r*=n,(t*=n)||i||r)return a(t,i,r,s)};return k.addEventListener("wheel",f),f}},88324:function(F,C,e){var T;(function(k,a,w){a[k]=a[k]||function(){"use strict";var b,f,s,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(y){return setImmediate(y)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(y,v,_,h){return Object.defineProperty(y,v,{value:_,writable:!0,configurable:h!==!1})}}catch{b=function(v,_,h){return v[_]=h,v}}function r(y,v){s.add(y,v),f||(f=i(s.drain))}function n(y){var v,_=typeof y;return y==null||_!="object"&&_!="function"||(v=y.then),typeof v=="function"&&v}function o(){for(var y=0;y<this.chain.length;y++)l(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function l(y,v,_){var h,S;try{v===!1?_.reject(y.msg):(h=v===!0?y.msg:v.call(void 0,y.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(S=n(h))?S.call(h,_.resolve,_.reject):_.resolve(h)}catch(A){_.reject(A)}}function c(y){var v,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(v=n(y))?r(function(){var h=new x(_);try{v.call(y,function(){c.apply(h,arguments)},function(){d.apply(h,arguments)})}catch(S){d.call(h,S)}}):(_.msg=y,_.state=1,_.chain.length>0&&r(o,_))}catch(h){d.call(new x(_),h)}}}function d(y){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=y,v.state=2,v.chain.length>0&&r(o,v))}function u(y,v,_,h){for(var S=0;S<v.length;S++)(function(A){y.resolve(v[A]).then(function(E){_(A,E)},h)})(S)}function x(y){this.def=y,this.triggered=!1}function p(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var v=new p(this);this.then=function(_,h){var S={success:typeof _!="function"||_,failure:typeof h=="function"&&h};return S.promise=new this.constructor(function(A,E){if(typeof A!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=A,S.reject=E}),v.chain.push(S),v.state!==0&&r(o,v),S.promise},this.catch=function(_){return this.then(void 0,_)};try{y.call(void 0,function(_){c.call(v,_)},function(_){d.call(v,_)})}catch(_){d.call(v,_)}}s=function(){var y,v,_;function h(S,A){this.fn=S,this.self=A,this.next=void 0}return{add:function(S,A){_=new h(S,A),v?v.next=_:y=_,v=_,_=void 0},drain:function(){var S=y;for(y=v=f=void 0;S;)S.fn.call(S.self),S=S.next}}}();var m=b({},"constructor",g,!1);return g.prototype=m,b(m,"__NPO__",0,!1),b(g,"resolve",function(y){return y&&typeof y=="object"&&y.__NPO__===1?y:new this(function(v,_){if(typeof v!="function"||typeof _!="function")throw TypeError("Not a function");v(y)})}),b(g,"reject",function(y){return new this(function(v,_){if(typeof v!="function"||typeof _!="function")throw TypeError("Not a function");_(y)})}),b(g,"all",function(y){var v=this;return t.call(y)!="[object Array]"?v.reject(TypeError("Not an array")):y.length===0?v.resolve([]):new v(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");var S=y.length,A=Array(S),E=0;u(v,y,function(P,I){A[P]=I,++E===S&&_(A)},h)})}),b(g,"race",function(y){var v=this;return t.call(y)!="[object Array]"?v.reject(TypeError("Not an array")):new v(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");u(v,y,function(S,A){_(A)},h)})}),g}(),F.exports?F.exports=a[k]:(T=(function(){return a[k]}).call(C,e,C,F))===void 0||(F.exports=T)})("Promise",e.g!==void 0?e.g:this)},48816:function(F){var C=Math.PI,e=b(120);function T(f,s,t,i){return["C",f,s,t,i,t,i]}function k(f,s,t,i,r,n){return["C",f/3+.6666666666666666*t,s/3+.6666666666666666*i,r/3+.6666666666666666*t,n/3+.6666666666666666*i,r,n]}function a(f,s,t,i,r,n,o,l,c,d){if(d)S=d[0],A=d[1],_=d[2],h=d[3];else{var u=w(f,s,-r);f=u.x,s=u.y;var x=(f-(l=(u=w(l,c,-r)).x))/2,p=(s-(c=u.y))/2,g=x*x/(t*t)+p*p/(i*i);g>1&&(t*=g=Math.sqrt(g),i*=g);var m=t*t,y=i*i,v=(n==o?-1:1)*Math.sqrt(Math.abs((m*y-m*p*p-y*x*x)/(m*p*p+y*x*x)));v==1/0&&(v=1);var _=v*t*p/i+(f+l)/2,h=v*-i*x/t+(s+c)/2,S=Math.asin(((s-h)/i).toFixed(9)),A=Math.asin(((c-h)/i).toFixed(9));(S=f<_?C-S:S)<0&&(S=2*C+S),(A=l<_?C-A:A)<0&&(A=2*C+A),o&&S>A&&(S-=2*C),!o&&A>S&&(A-=2*C)}if(Math.abs(A-S)>e){var E=A,P=l,I=c;A=S+e*(o&&A>S?1:-1);var D=a(l=_+t*Math.cos(A),c=h+i*Math.sin(A),t,i,r,0,o,P,I,[A,E,_,h])}var z=Math.tan((A-S)/4),V=4/3*t*z,O=4/3*i*z,j=[2*f-(f+V*Math.sin(S)),2*s-(s-O*Math.cos(S)),l+V*Math.sin(A),c-O*Math.cos(A),l,c];if(d)return j;D&&(j=j.concat(D));for(var Y=0;Y<j.length;){var B=w(j[Y],j[Y+1],r);j[Y++]=B.x,j[Y++]=B.y}return j}function w(f,s,t){return{x:f*Math.cos(t)-s*Math.sin(t),y:f*Math.sin(t)+s*Math.cos(t)}}function b(f){return f*(C/180)}F.exports=function(f){for(var s,t=[],i=0,r=0,n=0,o=0,l=null,c=null,d=0,u=0,x=0,p=f.length;x<p;x++){var g=f[x],m=g[0];switch(m){case"M":n=g[1],o=g[2];break;case"A":(g=a(d,u,g[1],g[2],b(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var y=d,v=u;s!="C"&&s!="S"||(y+=y-i,v+=v-r),g=["C",y,v,g[1],g[2],g[3],g[4]];break;case"T":s=="Q"||s=="T"?(l=2*d-l,c=2*u-c):(l=d,c=u),g=k(d,u,l,c,g[1],g[2]);break;case"Q":l=g[1],c=g[2],g=k(d,u,g[1],g[2],g[3],g[4]);break;case"L":g=T(d,u,g[1],g[2]);break;case"H":g=T(d,u,g[1],u);break;case"V":g=T(d,u,d,g[1]);break;case"Z":g=T(d,u,n,o)}s=m,d=g[g.length-2],u=g[g.length-1],g.length>4?(i=g[g.length-4],r=g[g.length-3]):(i=d,r=u),t.push(g)}return t}},50896:function(F){"use strict";var C=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;F.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var a={},w=0;w<10;w++)a["_"+String.fromCharCode(w)]=w;if(Object.getOwnPropertyNames(a).map(function(f){return a[f]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(f){b[f]=f}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,a){for(var w,b,f=function(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(k),s=1;s<arguments.length;s++){for(var t in w=Object(arguments[s]))e.call(w,t)&&(f[t]=w[t]);if(C){b=C(w);for(var i=0;i<b.length;i++)T.call(w,b[i])&&(f[b[i]]=w[b[i]])}}return f}},76835:function(F){"use strict";var C=function(e){return e!=e};F.exports=function(e,T){return e===0&&T===0?1/e==1/T:e===T||!(!C(e)||!C(T))}},39896:function(F,C,e){"use strict";var T=e(81288),k=e(57916),a=e(76835),w=e(66148),b=e(16408),f=k(w(),Object);T(f,{getPolyfill:w,implementation:a,shim:b}),F.exports=f},66148:function(F,C,e){"use strict";var T=e(76835);F.exports=function(){return typeof Object.is=="function"?Object.is:T}},16408:function(F,C,e){"use strict";var T=e(66148),k=e(81288);F.exports=function(){var a=T();return k(Object,{is:a},{is:function(){return Object.is!==a}}),a}},32764:function(F,C,e){"use strict";var T;if(!Object.keys){var k=Object.prototype.hasOwnProperty,a=Object.prototype.toString,w=e(97344),b=Object.prototype.propertyIsEnumerable,f=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(o){var l=o.constructor;return l&&l.prototype===o},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var o in window)try{if(!r["$"+o]&&k.call(window,o)&&window[o]!==null&&typeof window[o]=="object")try{i(window[o])}catch{return!0}}catch{return!0}return!1}();T=function(o){var l=o!==null&&typeof o=="object",c=a.call(o)==="[object Function]",d=w(o),u=l&&a.call(o)==="[object String]",x=[];if(!l&&!c&&!d)throw new TypeError("Object.keys called on a non-object");var p=s&&c;if(u&&o.length>0&&!k.call(o,0))for(var g=0;g<o.length;++g)x.push(String(g));if(d&&o.length>0)for(var m=0;m<o.length;++m)x.push(String(m));else for(var y in o)p&&y==="prototype"||!k.call(o,y)||x.push(String(y));if(f)for(var v=function(h){if(typeof window>"u"||!n)return i(h);try{return i(h)}catch{return!1}}(o),_=0;_<t.length;++_)v&&t[_]==="constructor"||!k.call(o,t[_])||x.push(t[_]);return x}}F.exports=T},41820:function(F,C,e){"use strict";var T=Array.prototype.slice,k=e(97344),a=Object.keys,w=a?function(f){return a(f)}:e(32764),b=Object.keys;w.shim=function(){if(Object.keys){var f=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);f||(Object.keys=function(s){return k(s)?b(T.call(s)):b(s)})}else Object.keys=w;return Object.keys||w},F.exports=w},97344:function(F){"use strict";var C=Object.prototype.toString;F.exports=function(e){var T=C.call(e),k=T==="[object Arguments]";return k||(k=T!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&C.call(e.callee)==="[object Function]"),k}},32868:function(F){"use strict";function C(k,a){if(typeof k!="string")return[k];var w=[k];typeof a=="string"||Array.isArray(a)?a={brackets:a}:a||(a={});var b=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"],f=a.escape||"___",s=!!a.flat;b.forEach(function(i){var r=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),n=[];function o(l,c,d){var u=w.push(l.slice(i[0].length,-i[1].length))-1;return n.push(u),f+u+f}w.forEach(function(l,c){for(var d,u=0;l!=d;)if(d=l,l=l.replace(r,o),u++>1e4)throw Error("References have circular dependency. Please, check them.");w[c]=l}),n=n.reverse(),w=w.map(function(l){return n.forEach(function(c){l=l.replace(new RegExp("(\\"+f+c+"\\"+f+")","g"),i[0]+"$1"+i[1])}),l})});var t=new RegExp("\\"+f+"([0-9]+)\\"+f);return s?w:function i(r,n,o){for(var l,c=[],d=0;l=t.exec(r);){if(d++>1e4)throw Error("Circular references in parenthesis");c.push(r.slice(0,l.index)),c.push(i(n[l[1]],n)),r=r.slice(l.index+l[0].length)}return c.push(r),c}(w[0],w)}function e(k,a){if(a&&a.flat){var w,b=a&&a.escape||"___",f=k[0];if(!f)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;f!=w;){if(t++>1e4)throw Error("Circular references in "+k);w=f,f=f.replace(s,i)}return f}return k.reduce(function r(n,o){return Array.isArray(o)&&(o=o.reduce(r,"")),n+o},"");function i(r,n){if(k[n]==null)throw Error("Reference "+n+"is undefined");return k[n]}}function T(k,a){return Array.isArray(k)?e(k,a):C(k,a)}T.parse=C,T.stringify=e,F.exports=T},51160:function(F,C,e){"use strict";var T=e(55616);F.exports=function(k){var a;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?a=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(a={x:(k=T(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?a.width=k.right-a.x:a.width=0:a.width=k.width,k.height==null?k.bottom?a.height=k.bottom-a.y:a.height=0:a.height=k.height),a}},21984:function(F){F.exports=function(k){var a=[];return k.replace(e,function(w,b,f){var s=b.toLowerCase();for(f=function(t){var i=t.match(T);return i?i.map(Number):[]}(f),s=="m"&&f.length>2&&(a.push([b].concat(f.splice(0,2))),s="l",b=b=="m"?"l":"L");;){if(f.length==C[s])return f.unshift(b),a.push(f);if(f.length<C[s])throw new Error("malformed path data");a.push([b].concat(f.splice(0,C[s])))}}),a};var C={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(F){F.exports=function(C,e){e||(e=[0,""]),C=String(C);var T=parseFloat(C,10);return e[0]=T,e[1]=C.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(F,C,e){var T=e(4168);(function(){var k,a,w,b,f,s;typeof performance<"u"&&performance!==null&&performance.now?F.exports=function(){return performance.now()}:T!=null&&T.hrtime?(F.exports=function(){return(k()-f)/1e6},a=T.hrtime,b=(k=function(){var t;return 1e9*(t=a())[0]+t[1]})(),s=1e9*T.uptime(),f=b-s):Date.now?(F.exports=function(){return Date.now()-w},w=Date.now()):(F.exports=function(){return new Date().getTime()-w},w=new Date().getTime())}).call(this)},55616:function(F){"use strict";F.exports=function(T,k,a){var w,b,f={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(b=0;b<k.length;b++)s[k[b]]=!0;k=s}for(w in k)k[w]=e(k[w]);var t={};for(w in k){var i=k[w];if(Array.isArray(i))for(b=0;b<i.length;b++){var r=i[b];if(a&&(t[r]=!0),r in T){if(f[w]=T[r],a)for(var n=b;n<i.length;n++)t[i[n]]=!0;break}}else w in T&&(k[w]&&(f[w]=T[w]),a&&(t[w]=!0))}if(a)for(w in T)t[w]||(f[w]=T[w]);return f};var C={};function e(T){return C[T]?C[T]:(typeof T=="string"&&(T=C[T]=T.split(/\s*,\s*|\s+/)),T)}},61456:function(F){F.exports=function(C,e,T,k){var a=C[0],w=C[1],b=!1;T===void 0&&(T=0),k===void 0&&(k=e.length);for(var f=k-T,s=0,t=f-1;s<f;t=s++){var i=e[s+T][0],r=e[s+T][1],n=e[t+T][0],o=e[t+T][1];r>w!=o>w&&a<(n-i)*(w-r)/(o-r)+i&&(b=!b)}return b}},14756:function(F,C,e){var T,k=e(7688),a=e(28648),w=e(72200),b=e(11403),f=e(82368),s=e(17792),t=!1,i=a();function r(n,o,l){var c=T.segments(n),d=T.segments(o),u=l(T.combine(c,d));return T.polygon(u)}T={buildLog:function(n){return n===!0?t=k():n===!1&&(t=!1),t!==!1&&t.list},epsilon:function(n){return i.epsilon(n)},segments:function(n){var o=w(!0,i,t);return n.regions.forEach(o.addRegion),{segments:o.calculate(n.inverted),inverted:n.inverted}},combine:function(n,o){return{combined:w(!1,i,t).calculate(n.segments,n.inverted,o.segments,o.inverted),inverted1:n.inverted,inverted2:o.inverted}},selectUnion:function(n){return{segments:f.union(n.combined,t),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:f.intersect(n.combined,t),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:f.difference(n.combined,t),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:f.differenceRev(n.combined,t),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:f.xor(n.combined,t),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:b(n.segments,i,t),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(T,n)},polygonToGeoJSON:function(n){return s.fromPolygon(T,i,n)},union:function(n,o){return r(n,o,T.selectUnion)},intersect:function(n,o){return r(n,o,T.selectIntersect)},difference:function(n,o){return r(n,o,T.selectDifference)},differenceRev:function(n,o){return r(n,o,T.selectDifferenceRev)},xor:function(n,o){return r(n,o,T.selectXor)}},typeof window=="object"&&(window.PolyBool=T),F.exports=T},7688:function(F){F.exports=function(){var C,e=0,T=!1;function k(a,w){return C.list.push({type:a,data:w?JSON.parse(JSON.stringify(w)):void 0}),C}return C={list:[],segmentId:function(){return e++},checkIntersection:function(a,w){return k("check",{seg1:a,seg2:w})},segmentChop:function(a,w){return k("div_seg",{seg:a,pt:w}),k("chop",{seg:a,pt:w})},statusRemove:function(a){return k("pop_seg",{seg:a})},segmentUpdate:function(a){return k("seg_update",{seg:a})},segmentNew:function(a,w){return k("new_seg",{seg:a,primary:w})},segmentRemove:function(a){return k("rem_seg",{seg:a})},tempStatus:function(a,w,b){return k("temp_status",{seg:a,above:w,below:b})},rewind:function(a){return k("rewind",{seg:a})},status:function(a,w,b){return k("status",{seg:a,above:w,below:b})},vert:function(a){return a===T?C:(T=a,k("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),k("log",{txt:a})},reset:function(){return k("reset")},selected:function(a){return k("selected",{segs:a})},chainStart:function(a){return k("chain_start",{seg:a})},chainRemoveHead:function(a,w){return k("chain_rem_head",{index:a,pt:w})},chainRemoveTail:function(a,w){return k("chain_rem_tail",{index:a,pt:w})},chainNew:function(a,w){return k("chain_new",{pt1:a,pt2:w})},chainMatch:function(a){return k("chain_match",{index:a})},chainClose:function(a){return k("chain_close",{index:a})},chainAddHead:function(a,w){return k("chain_add_head",{index:a,pt:w})},chainAddTail:function(a,w){return k("chain_add_tail",{index:a,pt:w})},chainConnect:function(a,w){return k("chain_con",{index1:a,index2:w})},chainReverse:function(a){return k("chain_rev",{index:a})},chainJoin:function(a,w){return k("chain_join",{index1:a,index2:w})},done:function(){return k("done")}}}},28648:function(F){F.exports=function(C){typeof C!="number"&&(C=1e-10);var e={epsilon:function(T){return typeof T=="number"&&(C=T),C},pointAboveOrOnLine:function(T,k,a){var w=k[0],b=k[1],f=a[0],s=a[1],t=T[0];return(f-w)*(T[1]-b)-(s-b)*(t-w)>=-C},pointBetween:function(T,k,a){var w=T[1]-k[1],b=a[0]-k[0],f=T[0]-k[0],s=a[1]-k[1],t=f*b+w*s;return!(t<C||t-(b*b+s*s)>-C)},pointsSameX:function(T,k){return Math.abs(T[0]-k[0])<C},pointsSameY:function(T,k){return Math.abs(T[1]-k[1])<C},pointsSame:function(T,k){return e.pointsSameX(T,k)&&e.pointsSameY(T,k)},pointsCompare:function(T,k){return e.pointsSameX(T,k)?e.pointsSameY(T,k)?0:T[1]<k[1]?-1:1:T[0]<k[0]?-1:1},pointsCollinear:function(T,k,a){var w=T[0]-k[0],b=T[1]-k[1],f=k[0]-a[0],s=k[1]-a[1];return Math.abs(w*s-f*b)<C},linesIntersect:function(T,k,a,w){var b=k[0]-T[0],f=k[1]-T[1],s=w[0]-a[0],t=w[1]-a[1],i=b*t-f*s;if(Math.abs(i)<C)return!1;var r=T[0]-a[0],n=T[1]-a[1],o=(s*n-t*r)/i,l=(b*n-f*r)/i,c={alongA:0,alongB:0,pt:[T[0]+o*b,T[1]+o*f]};return c.alongA=o<=-C?-2:o<C?-1:o-1<=-C?0:o-1<C?1:2,c.alongB=l<=-C?-2:l<C?-1:l-1<=-C?0:l-1<C?1:2,c},pointInsideRegion:function(T,k){for(var a=T[0],w=T[1],b=k[k.length-1][0],f=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var i=k[t][0],r=k[t][1];r-w>C!=f-w>C&&(b-i)*(w-r)/(f-r)+i-a>C&&(s=!s),b=i,f=r}return s}};return e}},17792:function(F){var C={toPolygon:function(e,T){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function f(i){var r=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[r]})}for(var s=f(b[0]),t=1;t<b.length;t++)s=e.selectDifference(e.combine(s,f(b[t])));return s}if(T.type==="Polygon")return e.polygon(k(T.coordinates));if(T.type==="MultiPolygon"){for(var a=e.segments({inverted:!1,regions:[]}),w=0;w<T.coordinates.length;w++)a=e.selectUnion(e.combine(a,k(T.coordinates[w])));return e.polygon(a)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,T,k){function a(l,c){return T.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],c)}function w(l){return{region:l,children:[]}}k=e.polygon(e.segments(k));var b=w(null);function f(l,c){for(var d=0;d<l.children.length;d++)if(a(c,(x=l.children[d]).region))return void f(x,c);var u=w(c);for(d=0;d<l.children.length;d++){var x;a((x=l.children[d]).region,c)&&(u.children.push(x),l.children.splice(d,1),d--)}l.children.push(u)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||f(b,t)}function i(l,c){for(var d=0,u=l[l.length-1][0],x=l[l.length-1][1],p=[],g=0;g<l.length;g++){var m=l[g][0],y=l[g][1];p.push([m,y]),d+=y*u-m*x,u=m,x=y}return d<0!==c&&p.reverse(),p.push([p[0][0],p[0][1]]),p}var r=[];function n(l){var c=[i(l.region,!1)];r.push(c);for(var d=0;d<l.children.length;d++)c.push(o(l.children[d]))}function o(l){for(var c=0;c<l.children.length;c++)n(l.children[c]);return i(l.region,!0)}for(s=0;s<b.children.length;s++)n(b.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};F.exports=C},72200:function(F,C,e){var T=e(48088);F.exports=function(k,a,w){function b(n,o,l){return{id:w?w.segmentId():-1,start:n,end:o,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var f=T.create();function s(n,o){f.insertBefore(n,function(l){return c=n.isStart,d=n.pt,u=o,x=l.isStart,p=l.pt,g=l.other.pt,((m=a.pointsCompare(d,p))!==0?m:a.pointsSame(u,g)?0:c!==x?c?1:-1:a.pointAboveOrOnLine(u,x?p:g,x?g:p)?1:-1)<0;var c,d,u,x,p,g,m})}function t(n,o){var l=function(c,d){var u=T.node({isStart:!0,pt:c.start,seg:c,primary:d,other:null,status:null});return s(u,c.end),u}(n,o);return function(c,d,u){var x=T.node({isStart:!1,pt:d.end,seg:d,primary:u,other:c,status:null});c.other=x,s(x,c.pt)}(l,n,o),l}function i(n,o){var l=b(o,n.seg.end,n.seg);return function(c,d){w&&w.segmentChop(c.seg,d),c.other.remove(),c.seg.end=d,c.other.pt=d,s(c.other,c.pt)}(n,o),t(l,n.primary)}function r(n,o){var l=T.create();function c(E){return l.findTransition(function(P){var I,D,z,V,O,j;return I=E,D=P.ev,z=I.seg.start,V=I.seg.end,O=D.seg.start,j=D.seg.end,(a.pointsCollinear(z,O,j)?a.pointsCollinear(V,O,j)||a.pointAboveOrOnLine(V,O,j)?1:-1:a.pointAboveOrOnLine(z,O,j)?1:-1)>0})}function d(E,P){var I=E.seg,D=P.seg,z=I.start,V=I.end,O=D.start,j=D.end;w&&w.checkIntersection(I,D);var Y=a.linesIntersect(z,V,O,j);if(Y===!1){if(!a.pointsCollinear(z,V,O)||a.pointsSame(z,j)||a.pointsSame(V,O))return!1;var B=a.pointsSame(z,O),U=a.pointsSame(V,j);if(B&&U)return P;var q=!B&&a.pointBetween(z,O,j),te=!U&&a.pointBetween(V,O,j);if(B)return te?i(P,V):i(E,j),P;q&&(U||(te?i(P,V):i(E,j)),i(P,z))}else Y.alongA===0&&(Y.alongB===-1?i(E,O):Y.alongB===0?i(E,Y.pt):Y.alongB===1&&i(E,j)),Y.alongB===0&&(Y.alongA===-1?i(P,z):Y.alongA===0?i(P,Y.pt):Y.alongA===1&&i(P,V));return!1}for(var u=[];!f.isEmpty();){var x=f.getHead();if(w&&w.vert(x.pt[0]),x.isStart){let E=function(){if(g){var P=d(x,g);if(P)return P}return!!m&&d(x,m)};var A=E;w&&w.segmentNew(x.seg,x.primary);var p=c(x),g=p.before?p.before.ev:null,m=p.after?p.after.ev:null;w&&w.tempStatus(x.seg,!!g&&g.seg,!!m&&m.seg);var y,v,_=E();if(_&&(k?(v=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=x.seg.myFill,w&&w.segmentUpdate(_.seg),x.other.remove(),x.remove()),f.getHead()!==x){w&&w.rewind(x.seg);continue}k?(v=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=m?m.seg.myFill.above:n,x.seg.myFill.above=v?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(y=m?x.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:x.primary?o:n,x.seg.otherFill={above:y,below:y}),w&&w.status(x.seg,!!g&&g.seg,!!m&&m.seg),x.other.status=p.insert(T.node({ev:x}))}else{var h=x.status;if(h===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(h.prev)&&l.exists(h.next)&&d(h.prev.ev,h.next.ev),w&&w.statusRemove(h.ev.seg),h.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}u.push(x.seg)}f.getHead().remove()}return w&&w.done(),u}return k?{addRegion:function(n){for(var o,l,c,d=n[n.length-1],u=0;u<n.length;u++){o=d,d=n[u];var x=a.pointsCompare(o,d);x!==0&&t((l=x<0?o:d,c=x<0?d:o,{id:w?w.segmentId():-1,start:l,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,o,l,c){return n.forEach(function(d){t(b(d.start,d.end,d),!0)}),l.forEach(function(d){t(b(d.start,d.end,d),!1)}),r(o,c)}}}},48088:function(F){F.exports={create:function(){var C={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==C.root},isEmpty:function(){return C.root.next===null},getHead:function(){return C.root.next},insertBefore:function(e,T){for(var k=C.root,a=C.root.next;a!==null;){if(T(a))return e.prev=a.prev,e.next=a,a.prev.next=e,void(a.prev=e);k=a,a=a.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var T=C.root,k=C.root.next;k!==null&&!e(k);)T=k,k=k.next;return{before:T===C.root?null:T,after:k,insert:function(a){return a.prev=T,a.next=k,T.next=a,k!==null&&(k.prev=a),a}}}};return C},node:function(C){return C.prev=null,C.next=null,C.remove=function(){C.prev.next=C.next,C.next&&(C.next.prev=C.prev),C.prev=null,C.next=null},C}}},11403:function(F){F.exports=function(C,e,T){var k=[],a=[];return C.forEach(function(w){var b=w.start,f=w.end;if(e.pointsSame(b,f))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(w);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=s,r=0;r<k.length;r++){var n=(u=k[r])[0],o=(u[1],u[u.length-1]);if(u[u.length-2],e.pointsSame(n,b)){if(h(r,!0,!0))break}else if(e.pointsSame(n,f)){if(h(r,!0,!1))break}else if(e.pointsSame(o,b)){if(h(r,!1,!0))break}else if(e.pointsSame(o,f)&&h(r,!1,!1))break}if(i===s)return k.push([b,f]),void(T&&T.chainNew(b,f));if(i===t){T&&T.chainMatch(s.index);var l=s.index,c=s.matches_pt1?f:b,d=s.matches_head,u=k[l],x=d?u[0]:u[u.length-1],p=d?u[1]:u[u.length-2],g=d?u[u.length-1]:u[0],m=d?u[u.length-2]:u[1];return e.pointsCollinear(p,x,c)&&(d?(T&&T.chainRemoveHead(s.index,c),u.shift()):(T&&T.chainRemoveTail(s.index,c),u.pop()),x=p),e.pointsSame(g,c)?(k.splice(l,1),e.pointsCollinear(m,g,x)&&(d?(T&&T.chainRemoveTail(s.index,x),u.pop()):(T&&T.chainRemoveHead(s.index,x),u.shift())),T&&T.chainClose(s.index),void a.push(u)):void(d?(T&&T.chainAddHead(s.index,c),u.unshift(c)):(T&&T.chainAddTail(s.index,c),u.push(c)))}var y=s.index,v=t.index;T&&T.chainConnect(y,v);var _=k[y].length<k[v].length;s.matches_head?t.matches_head?_?(S(y),A(y,v)):(S(v),A(v,y)):A(v,y):t.matches_head?A(y,v):_?(S(y),A(v,y)):(S(v),A(y,v))}function h(E,P,I){return i.index=E,i.matches_head=P,i.matches_pt1=I,i===s?(i=t,!1):(i=null,!0)}function S(E){T&&T.chainReverse(E),k[E].reverse()}function A(E,P){var I=k[E],D=k[P],z=I[I.length-1],V=I[I.length-2],O=D[0],j=D[1];e.pointsCollinear(V,z,O)&&(T&&T.chainRemoveTail(E,z),I.pop(),z=V),e.pointsCollinear(z,O,j)&&(T&&T.chainRemoveHead(P,O),D.shift()),T&&T.chainJoin(E,P),k[E]=I.concat(D),k.splice(P,1)}}),a}},82368:function(F){function C(T,k,a){var w=[];return T.forEach(function(b){var f=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[f]!==0&&w.push({id:a?a.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[f]===1,below:k[f]===2},otherFill:null})}),a&&a.selected(w),w}var e={union:function(T,k){return C(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(T,k){return C(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(T,k){return C(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(T,k){return C(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(T,k){return C(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};F.exports=e},9696:function(F,C,e){"use strict";var T=e(29936).Transform,k=e(55619);function a(){T.call(this,{readableObjectMode:!0})}function w(b,f,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,f&&(this.code=f),s&&(this.statusCode=s)}a.prototype=Object.create(T.prototype),a.prototype.constructor=a,k(a.prototype),C.gS=function(b,f,s){for(var t=f,i=0;i<s.length;)if(b[t++]!==s[i++])return!1;return!0},C.wR=function(b,f){var s=[],t=0;if(f&&f==="hex")for(;t<b.length;)s.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)s.push(255&b.charCodeAt(t));return s},C.Bz=function(b,f){return b[f]|b[f+1]<<8},C.eW=function(b,f){return b[f+1]|b[f]<<8},C.st=function(b,f){return b[f]|b[f+1]<<8|b[f+2]<<16|16777216*b[f+3]},C.eI=function(b,f){return b[f+3]|b[f+2]<<8|b[f+1]<<16|16777216*b[f]},w.prototype=Object.create(Error.prototype),w.prototype.constructor=w},11688:function(F){"use strict";function C(k,a){var w=new Error(k);return w.code=a,w}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function T(k,a,w){this.input=k.subarray(a,w),this.start=a;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw C("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}T.prototype.each=function(k){this.aborted=!1;var a=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:a}];this.ifds_to_read.length>0&&!this.aborted;){var w=this.ifds_to_read.shift();w.offset&&this.scan_ifd(w.id,w.offset,k)}},T.prototype.read_uint16=function(k){var a=this.input;if(k+2>a.length)throw C("unexpected EOF","EBADDATA");return this.big_endian?256*a[k]+a[k+1]:a[k]+256*a[k+1]},T.prototype.read_uint32=function(k){var a=this.input;if(k+4>a.length)throw C("unexpected EOF","EBADDATA");return this.big_endian?16777216*a[k]+65536*a[k+1]+256*a[k+2]+a[k+3]:a[k]+256*a[k+1]+65536*a[k+2]+16777216*a[k+3]},T.prototype.is_subifd_link=function(k,a){return k===0&&a===34665||k===0&&a===34853||k===34665&&a===40965},T.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(k,a){var w;switch(k){case 1:case 2:return this.input[a];case 6:return(w=this.input[a])|33554430*(128&w);case 3:return this.read_uint16(a);case 8:return(w=this.read_uint16(a))|131070*(32768&w);case 4:return this.read_uint32(a);case 9:return 0|this.read_uint32(a);default:return null}},T.prototype.scan_ifd=function(k,a,w){var b=this.read_uint16(a);a+=2;for(var f=0;f<b;f++){var s=this.read_uint16(a),t=this.read_uint16(a+2),i=this.read_uint32(a+4),r=this.exif_format_length(t),n=i*r,o=n<=4?a+8:this.read_uint32(a+8),l=!1;if(o+n>this.input.length)throw C("unexpected EOF","EBADDATA");for(var c=[],d=o,u=0;u<i;u++,d+=r){var x=this.exif_format_read(t,d);if(x===null){c=null;break}c.push(x)}if(Array.isArray(c)&&t===2&&(c=e(String.fromCharCode.apply(null,c)))&&c[c.length-1]==="\0"&&(c=c.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:s,offset:c[0]}),l=!0),w({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:i,entry_offset:a+this.start,data_length:n,data_offset:o+this.start,value:c,is_subifd_link:l})===!1)return void(this.aborted=!0);a+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(a)})},F.exports.ExifParser=T,F.exports.get_orientation=function(k){var a=0;try{return new T(k,0,k.length).each(function(w){if(w.ifd===0&&w.tag===274&&Array.isArray(w.value))return a=w.value[0],!1}),a}catch{return-1}}},44600:function(F,C,e){"use strict";var T=e(9696).eW,k=e(9696).eI;function a(i,r){if(i.length<4+r)return null;var n=k(i,r);return i.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(r+4,r+8)),data:i.slice(r+8,r+n),end:r+n}}function w(i,r){for(var n=0;;){var o=a(i,n);if(!o)break;switch(o.boxtype){case"ispe":r.sizes.push({width:k(o.data,4),height:k(o.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&o.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&o.data[0]})}n=o.end}}function b(i,r,n){for(var o=0,l=0;l<n;l++)o=256*o+(i[r+l]||0);return o}function f(i,r){for(var n=i[4]>>4&15,o=15&i[4],l=i[5]>>4&15,c=T(i,6),d=8,u=0;u<c;u++){var x=T(i,d),p=T(i,d+=2),g=b(i,d+=2,l),m=T(i,d+=l);if(d+=2,p===0&&m===1){var y=b(i,d,n),v=b(i,d+n,o);r.item_loc[x]={length:v,offset:y+g}}d+=m*(n+o)}}function s(i,r){for(var n=T(i,4),o=6,l=0;l<n;l++){var c=a(i,o);if(!c)break;if(c.boxtype==="infe"){for(var d=T(c.data,4),u="",x=8;x<c.data.length&&c.data[x];x++)u+=String.fromCharCode(c.data[x]);r.item_inf[u]=d}o=c.end}}function t(i,r){for(var n=0;;){var o=a(i,n);if(!o)break;o.boxtype==="ipco"&&w(o.data,r),n=o.end}}F.exports.unbox=a,F.exports.readSizeFromMeta=function(i){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,p){for(var g=4;;){var m=a(x,g);if(!m)break;m.boxtype==="iprp"&&t(m.data,p),m.boxtype==="iloc"&&f(m.data,p),m.boxtype==="iinf"&&s(m.data,p),g=m.end}}(i,r),r.sizes.length){var n,o,l,c=(o=(n=r.sizes).reduce(function(x,p){return x.width>p.width||x.width===p.width&&x.height>p.height?x:p}),l=n.reduce(function(x,p){return x.height>p.height||x.height===p.height&&x.width>p.width?x:p}),o.width>l.height||o.width===l.height&&o.height>l.width?o:l),d=1;r.transforms.forEach(function(x){var p={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(d=x.value===0?g[d]:p[d=p[d=g[d]]]),x.type==="irot")for(var m=0;m<x.value;m++)d=p[d]});var u=null;return r.item_inf.Exif&&(u=r.item_loc[r.item_inf.Exif]),{width:c.width,height:c.height,orientation:r.transforms.length?d:null,variants:r.sizes,exif_location:u}}},F.exports.getMimeType=function(i){var r=String.fromCharCode.apply(null,i.slice(0,4)),n={};n[r]=!0;for(var o=8;o<i.length;o+=4)n[String.fromCharCode.apply(null,i.slice(o,o+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(F,C,e){"use strict";var T=e(9696).wR,k=e(9696).gS,a=e(9696).eI,w=e(44600),b=e(11688),f=T("ftyp");F.exports=function(s){if(k(s,4,f)){var t=w.unbox(s,0);if(t){var i=w.getMimeType(t.data);if(i){for(var r,n=t.end;;){var o=w.unbox(s,n);if(!o)break;if(n=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){r=o.data;break}}if(r){var l=w.readSizeFromMeta(r);if(l){var c={width:l.width,height:l.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(c.variants=l.variants),l.orientation&&(c.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=s.length){var d=a(s,l.exif_location.offset),u=s.slice(l.exif_location.offset+d+4,l.exif_location.offset+l.exif_location.length),x=b.get_orientation(u);x>0&&(c.orientation=x)}return c}}}}}}},38728:function(F,C,e){"use strict";var T=e(9696).wR,k=e(9696).gS,a=e(9696).Bz,w=T("BM");F.exports=function(b){if(!(b.length<26)&&k(b,0,w))return{width:a(b,18),height:a(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(F,C,e){"use strict";var T=e(9696).wR,k=e(9696).gS,a=e(9696).Bz,w=T("GIF87a"),b=T("GIF89a");F.exports=function(f){if(!(f.length<10)&&(k(f,0,w)||k(f,0,b)))return{width:a(f,6),height:a(f,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(F,C,e){"use strict";var T=e(9696).Bz;F.exports=function(k){var a=T(k,0),w=T(k,2),b=T(k,4);if(a===0&&w===1&&b){for(var f=[],s={width:0,height:0},t=0;t<b;t++){var i=k[6+16*t]||256,r=k[6+16*t+1]||256,n={width:i,height:r};f.push(n),(i>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:f,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(F,C,e){"use strict";var T=e(9696).eW,k=e(9696).wR,a=e(9696).gS,w=e(11688),b=k("Exif\0\0");F.exports=function(f){if(!(f.length<2)&&f[0]===255&&f[1]===216&&f[2]===255)for(var s=2;;){for(;;){if(f.length-s<2)return;if(f[s++]===255)break}for(var t,i,r=f[s++];r===255;)r=f[s++];if(208<=r&&r<=217||r===1)t=0;else{if(!(192<=r&&r<=254)||f.length-s<2)return;t=T(f,s)-2,s+=2}if(r===217||r===218)return;if(r===225&&t>=10&&a(f,s,b)&&(i=w.get_orientation(f.slice(s+6,s+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(f.length-s<t)return;var n={width:T(f,s+3),height:T(f,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(n.orientation=i),n}s+=t}}},37276:function(F,C,e){"use strict";var T=e(9696).wR,k=e(9696).gS,a=e(9696).eI,w=T(`\x89PNG\r

`),b=T("IHDR");F.exports=function(f){if(!(f.length<24)&&k(f,0,w)&&k(f,12,b))return{width:a(f,16),height:a(f,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(F,C,e){"use strict";var T=e(9696).wR,k=e(9696).gS,a=e(9696).eI,w=T("8BPS\0");F.exports=function(b){if(!(b.length<22)&&k(b,0,w))return{width:a(b,18),height:a(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(F){"use strict";function C(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,w=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(s){return b.test(s)?s.match(b)[0]:"px"}F.exports=function(s){if(function(g){var m,y=0,v=g.length;for(g[0]===239&&g[1]===187&&g[2]===191&&(y=3);y<v&&((m=g[y])===32||m===9||m===13||m===10);)y++;return y!==v&&g[y]===60}(s)){for(var t="",i=0;i<s.length;i++)t+=String.fromCharCode(s[i]);var r=(t.match(e)||[""])[0];if(T.test(r)){var n=function(g){var m=g.match(k),y=g.match(a),v=g.match(w);return{width:m&&(m[1]||m[2]),height:y&&(y[1]||y[2]),viewbox:v&&(v[1]||v[2])}}(r),o=parseFloat(n.width),l=parseFloat(n.height);if(n.width&&n.height)return!C(o)||!C(l)?void 0:{width:o,height:l,type:"svg",mime:"image/svg+xml",wUnits:f(n.width),hUnits:f(n.height)};var c=(n.viewbox||"").split(" "),d={width:c[2],height:c[3]},u=parseFloat(d.width),x=parseFloat(d.height);if(C(u)&&C(x)&&f(d.width)===f(d.height)){var p=u/x;return n.width?C(o)?{width:o,height:o/p,type:"svg",mime:"image/svg+xml",wUnits:f(n.width),hUnits:f(n.width)}:void 0:n.height?C(l)?{width:l*p,height:l,type:"svg",mime:"image/svg+xml",wUnits:f(n.height),hUnits:f(n.height)}:void 0:{width:u,height:x,type:"svg",mime:"image/svg+xml",wUnits:f(d.width),hUnits:f(d.height)}}}}}},98792:function(F,C,e){"use strict";var T=e(9696).wR,k=e(9696).gS,a=e(9696).Bz,w=e(9696).eW,b=e(9696).st,f=e(9696).eI,s=T("II*\0"),t=T("MM\0*");function i(o,l,c){return c?w(o,l):a(o,l)}function r(o,l,c){return c?f(o,l):b(o,l)}function n(o,l,c){var d=i(o,l+2,c);return r(o,l+4,c)!==1||d!==3&&d!==4?null:d===3?i(o,l+8,c):r(o,l+8,c)}F.exports=function(o){if(!(o.length<8)&&(k(o,0,s)||k(o,0,t))){var l=o[0]===77,c=r(o,4,l)-8;if(!(c<0)){var d=c+8;if(!(o.length-d<2)){var u=12*i(o,d+0,l);if(!(u<=0||(d+=2,o.length-d<u))){var x,p,g,m;for(x=0;x<u;x+=12)(m=i(o,d+x,l))===256?p=n(o,d+x,l):m===257&&(g=n(o,d+x,l));return p&&g?{width:p,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(F,C,e){"use strict";var T=e(9696).wR,k=e(9696).gS,a=e(9696).Bz,w=e(9696).st,b=e(11688),f=T("RIFF"),s=T("WEBP");function t(n,o){if(n[o+3]===157&&n[o+4]===1&&n[o+5]===42)return{width:16383&a(n,o+6),height:16383&a(n,o+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(n,o){if(n[o]===47){var l=w(n,o+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,o){return{width:1+(n[o+6]<<16|n[o+5]<<8|n[o+4]),height:1+(n[o+9]<<o|n[o+8]<<8|n[o+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}F.exports=function(n){if(!(n.length<16)&&(k(n,0,f)||k(n,8,s))){var o=12,l=null,c=0,d=w(n,4)+8;if(!(d>n.length)){for(;o+8<d;)if(n[o]!==0){var u=String.fromCharCode.apply(null,n.slice(o,o+4)),x=w(n,o+4);u==="VP8 "&&x>=10?l=l||t(n,o+8):u==="VP8L"&&x>=9?l=l||i(n,o+8):u==="VP8X"&&x>=10?l=l||r(n,o+8):u==="EXIF"&&(c=b.get_orientation(n.slice(o+8,o+8+x)),o=1/0),o+=8+x}else o++;if(l)return c>0&&(l.orientation=c),l}}}},87480:function(F,C,e){"use strict";F.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(F,C,e){"use strict";var T=e(87480);F.exports=function(k){return function(a){for(var w=Object.keys(T),b=0;b<w.length;b++){var f=T[w[b]](a);if(f)return f}return null}(k)},F.exports.parsers=T},4168:function(F){var C,e,T=F.exports={};function k(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function w(l){if(C===setTimeout)return setTimeout(l,0);if((C===k||!C)&&setTimeout)return C=setTimeout,setTimeout(l,0);try{return C(l,0)}catch{try{return C.call(null,l,0)}catch{return C.call(this,l,0)}}}(function(){try{C=typeof setTimeout=="function"?setTimeout:k}catch{C=k}try{e=typeof clearTimeout=="function"?clearTimeout:a}catch{e=a}})();var b,f=[],s=!1,t=-1;function i(){s&&b&&(s=!1,b.length?f=b.concat(f):t=-1,f.length&&r())}function r(){if(!s){var l=w(i);s=!0;for(var c=f.length;c;){for(b=f,f=[];++t<c;)b&&b[t].run();t=-1,c=f.length}b=null,s=!1,function(d){if(e===clearTimeout)return clearTimeout(d);if((e===a||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(d);try{return e(d)}catch{try{return e.call(null,d)}catch{return e.call(this,d)}}}(l)}}function n(l,c){this.fun=l,this.array=c}function o(){}T.nextTick=function(l){var c=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];f.push(new n(l,c)),f.length!==1||s||w(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=o,T.addListener=o,T.once=o,T.off=o,T.removeListener=o,T.removeAllListeners=o,T.emit=o,T.prependListener=o,T.prependOnceListener=o,T.listeners=function(l){return[]},T.binding=function(l){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(l){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},3951:function(F,C,e){for(var T=e(41984),k=typeof window>"u"?e.g:window,a=["moz","webkit"],w="AnimationFrame",b=k["request"+w],f=k["cancel"+w]||k["cancelRequest"+w],s=0;!b&&s<a.length;s++)b=k[a[s]+"Request"+w],f=k[a[s]+"Cancel"+w]||k[a[s]+"CancelRequest"+w];if(!b||!f){var t=0,i=0,r=[];b=function(n){if(r.length===0){var o=T(),l=Math.max(0,16.666666666666668-(o-t));t=l+o,setTimeout(function(){var c=r.slice(0);r.length=0;for(var d=0;d<c.length;d++)if(!c[d].cancelled)try{c[d].callback(t)}catch(u){setTimeout(function(){throw u},0)}},Math.round(l))}return r.push({handle:++i,callback:n,cancelled:!1}),i},f=function(n){for(var o=0;o<r.length;o++)r[o].handle===n&&(r[o].cancelled=!0)}}F.exports=function(n){return b.call(k,n)},F.exports.cancel=function(){f.apply(k,arguments)},F.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=b,n.cancelAnimationFrame=f}},24544:function(F,C,e){"use strict";var T=e(76752),k=e(72160),a=e(45223),w=e(55616),b=e(50896),f=e(47520),s=e(37816),t=s.float32,i=s.fract32;F.exports=function(n,o){if(typeof n=="function"?(o||(o={}),o.regl=n):o=n,o.length&&(o.positions=o),!(n=o.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,c,d,u,x,p,g=n._gl,m={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},y=[];return u=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=n.buffer({usage:"static",type:"float",data:r}),S(o),l=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,P){return[P.viewport.x,P.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:u,offset:function(E,P){return 4*P.offset},divisor:1},position:{buffer:c,offset:function(E,P){return 8*P.offset},divisor:1},positionFract:{buffer:d,offset:function(E,P){return 8*P.offset},divisor:1},error:{buffer:x,offset:function(E,P){return 16*P.offset},divisor:1},direction:{buffer:p,stride:24,offset:0},lineOffset:{buffer:p,stride:24,offset:8},capOffset:{buffer:p,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),b(v,{update:S,draw:_,destroy:A,regl:n,gl:g,canvas:g.canvas,groups:y}),v;function v(E){E?S(E):E===null&&A(),_()}function _(E){if(typeof E=="number")return h(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),y.forEach(function(P,I){P&&(E&&(E[I]?P.draw=!0:P.draw=!1),P.draw?h(I):P.draw=!0)})}function h(E){typeof E=="number"&&(E=y[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var P=0,I=0;if(v.groups=y=E.map(function(B,U){var q=y[U];return B&&(typeof B=="function"?B={after:B}:typeof B[0]=="number"&&(B={positions:B}),B=w(B,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(y[U]=q={id:U,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},B=b({},m,B)),a(q,B,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=f(te),I+=te.length,te},positions:function(te,ee){return te=f(te,"float64"),ee.count=Math.floor(te.length/2),ee.bounds=T(te,2),ee.offset=P,P+=ee.count,te}},{color:function(te,ee){var Q=ee.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var J=te;te=Array(Q);for(var K=0;K<Q;K++)te[K]=J}if(te.length<Q)throw Error("Not enough colors");for(var X=new Uint8Array(4*Q),ie=0;ie<Q;ie++){var se=k(te[ie],"uint8");X.set(se,4*ie)}return X},range:function(te,ee,Q){var J=ee.bounds;return te||(te=J),ee.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],ee.translate=[-te[0],-te[1]],ee.scaleFract=i(ee.scale),ee.translateFract=i(ee.translate),te},viewport:function(te){var ee;return Array.isArray(te)?ee={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?(ee={x:te.x||te.left||0,y:te.y||te.top||0},te.right?ee.width=te.right-ee.x:ee.width=te.w||te.width||0,te.bottom?ee.height=te.bottom-ee.y:ee.height=te.h||te.height||0):ee={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},ee}}])),q}),P||I){var D=y.reduce(function(B,U,q){return B+(U?U.count:0)},0),z=new Float64Array(2*D),V=new Uint8Array(4*D),O=new Float32Array(4*D);y.forEach(function(B,U){if(B){var q=B.positions,te=B.count,ee=B.offset,Q=B.color,J=B.errors;te&&(V.set(Q,4*ee),O.set(J,4*ee),z.set(q,2*ee))}});var j=t(z);c(j);var Y=i(z,j);d(Y),u(V),x(O)}}}function A(){c.destroy(),d.destroy(),u.destroy(),x.destroy(),p.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(F,C,e){"use strict";var T=e(72160),k=e(76752),a=e(50896),w=e(55616),b=e(47520),f=e(28912),s=e(71152),t=e(37816),i=t.float32,r=t.fract32,n=e(60463),o=e(51160),l=e(10272);function c(d,u){if(!(this instanceof c))return new c(d,u);if(typeof d=="function"?(u||(u={}),u.regl=d):u=d,u.length&&(u.positions=u),!(d=u.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=d._gl,this.regl=d,this.passes=[],this.shaders=c.shaders.has(d)?c.shaders.get(d):c.shaders.set(d,c.createShaders(d)).get(d),this.update(u)}F.exports=c,c.dashMult=2,c.maxPatternLength=256,c.precisionThreshold=3e6,c.maxPoints=1e4,c.maxLines=2048,c.shaders=new n,c.createShaders=function(d){var u,x=d.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:d.prop("count"),count:4,offset:0,uniforms:{miterMode:function(m,y){return y.join==="round"?2:1},miterLimit:d.prop("miterLimit"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),thickness:d.prop("thickness"),dashTexture:d.prop("dashTexture"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),dashLength:d.prop("dashLength"),viewport:function(m,y){return[y.viewport.x,y.viewport.y,m.viewportWidth,m.viewportHeight]},depth:d.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(m,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport")},g=d(a({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p));try{u=d(a({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:d.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch{u=g}return{fill:d({primitive:"triangle",elements:function(m,y){return y.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:d.prop("scale"),color:d.prop("fill"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),viewport:function(m,y){return[y.viewport.x,y.viewport.y,m.viewportWidth,m.viewportHeight]}},attributes:{position:{buffer:d.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport}),rect:g,miter:u}},c.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},c.prototype.render=function(){for(var d,u=[],x=arguments.length;x--;)u[x]=arguments[x];u.length&&(d=this).update.apply(d,u),this.draw()},c.prototype.draw=function(){for(var d=this,u=[],x=arguments.length;x--;)u[x]=arguments[x];return(u.length?u:this.passes).forEach(function(p,g){var m;if(p&&Array.isArray(p))return(m=d).draw.apply(m,p);typeof p=="number"&&(p=d.passes[p]),p&&p.count>1&&p.opacity&&(d.regl._refresh(),p.fill&&p.triangles&&p.triangles.length>2&&d.shaders.fill(p),p.thickness&&(p.scale[0]*p.viewport.width>c.precisionThreshold||p.scale[1]*p.viewport.height>c.precisionThreshold||p.join==="rect"||!p.join&&(p.thickness<=2||p.count>=c.maxPoints)?d.shaders.rect(p):d.shaders.miter(p)))}),this},c.prototype.update=function(d){var u=this;if(d){d.length!=null?typeof d[0]=="number"&&(d=[{positions:d}]):Array.isArray(d)||(d=[d]);var x=this.regl,p=this.gl;if(d.forEach(function(_,h){var S=u.passes[h];if(_!==void 0)if(_!==null){if(typeof _[0]=="number"&&(_={positions:_}),_=w(_,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(u.passes[h]=S={id:h,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},_=a({},c.defaults,_)),_.thickness!=null&&(S.thickness=parseFloat(_.thickness)),_.opacity!=null&&(S.opacity=parseFloat(_.opacity)),_.miterLimit!=null&&(S.miterLimit=parseFloat(_.miterLimit)),_.overlay!=null&&(S.overlay=!!_.overlay,h<c.maxLines&&(S.depth=2*(c.maxLines-1-h%c.maxLines)/c.maxLines-1)),_.join!=null&&(S.join=_.join),_.hole!=null&&(S.hole=_.hole),_.fill!=null&&(S.fill=_.fill?T(_.fill,"uint8"):null),_.viewport!=null&&(S.viewport=o(_.viewport)),S.viewport||(S.viewport=o([p.drawingBufferWidth,p.drawingBufferHeight])),_.close!=null&&(S.close=_.close),_.positions===null&&(_.positions=[]),_.positions){var A,E;if(_.positions.x&&_.positions.y){var P=_.positions.x,I=_.positions.y;E=S.count=Math.max(P.length,I.length),A=new Float64Array(2*E);for(var D=0;D<E;D++)A[2*D]=P[D],A[2*D+1]=I[D]}else A=b(_.positions,"float64"),E=S.count=Math.floor(A.length/2);var z=S.bounds=k(A,2);if(S.fill){for(var V=[],O={},j=0,Y=0,B=0,U=S.count;Y<U;Y++){var q=A[2*Y],te=A[2*Y+1];isNaN(q)||isNaN(te)||q==null||te==null?(q=A[2*j],te=A[2*j+1],O[Y]=j):j=Y,V[B++]=q,V[B++]=te}if(_.splitNull){S.count-1 in O||(O[S.count]=S.count-1);var ee=Object.keys(O).map(Number).sort(function(yt,pt){return yt-pt}),Q=[],J=0,K=S.hole!=null?S.hole[0]:null;if(K!=null){var X=l(ee,function(yt){return yt>=K});(ee=ee.slice(0,X)).push(K)}for(var ie=function(yt){var pt=V.slice(2*J,2*ee[yt]).concat(K?V.slice(2*K):[]),et=(S.hole||[]).map(function(At){return At-K+(ee[yt]-J)}),$e=f(pt,et);$e=$e.map(function(At){return At+J+(At+J<ee[yt]?0:K-ee[yt])}),Q.push.apply(Q,$e),J=ee[yt]+1},se=0;se<ee.length;se++)ie(se);for(var ae=0,ue=Q.length;ae<ue;ae++)O[Q[ae]]!=null&&(Q[ae]=O[Q[ae]]);S.triangles=Q}else{for(var ve=f(V,S.hole||[]),ye=0,pe=ve.length;ye<pe;ye++)O[ve[ye]]!=null&&(ve[ye]=O[ve[ye]]);S.triangles=ve}}var de=new Float64Array(A);s(de,2,z);var me=new Float64Array(2*E+6);S.close?A[0]===A[2*E-2]&&A[1]===A[2*E-1]?(me[0]=de[2*E-4],me[1]=de[2*E-3]):(me[0]=de[2*E-2],me[1]=de[2*E-1]):(me[0]=de[0],me[1]=de[1]),me.set(de,2),S.close?A[0]===A[2*E-2]&&A[1]===A[2*E-1]?(me[2*E+2]=de[2],me[2*E+3]=de[3],S.count-=1):(me[2*E+2]=de[0],me[2*E+3]=de[1],me[2*E+4]=de[2],me[2*E+5]=de[3]):(me[2*E+2]=de[2*E-2],me[2*E+3]=de[2*E-1],me[2*E+4]=de[2*E-2],me[2*E+5]=de[2*E-1]);var ke=i(me);S.positionBuffer(ke);var Ce=r(me,ke);S.positionFractBuffer(Ce)}if(_.range?S.range=_.range:S.range||(S.range=S.bounds),(_.range||_.positions)&&S.count){var ge=S.bounds,oe=ge[2]-ge[0],re=ge[3]-ge[1],fe=S.range[2]-S.range[0],Se=S.range[3]-S.range[1];S.scale=[oe/fe,re/Se],S.translate=[-S.range[0]/fe+ge[0]/fe||0,-S.range[1]/Se+ge[1]/Se||0],S.scaleFract=r(S.scale),S.translateFract=r(S.translate)}if(_.dashes){var be,we=0;if(!_.dashes||_.dashes.length<2)we=1,be=new Uint8Array([255,255,255,255,255,255,255,255]);else{we=0;for(var Me=0;Me<_.dashes.length;++Me)we+=_.dashes[Me];be=new Uint8Array(we*c.dashMult);for(var Pe=0,De=255,he=0;he<2;he++)for(var _e=0;_e<_.dashes.length;++_e){for(var Ae=0,Oe=_.dashes[_e]*c.dashMult*.5;Ae<Oe;++Ae)be[Pe++]=De;De^=255}}S.dashLength=we,S.dashTexture({channels:1,data:be,width:be.length,height:1,mag:"linear",min:"linear"},0,0)}if(_.color){var Ee=S.count,Be=_.color;Be||(Be="transparent");var Ve=new Uint8Array(4*Ee+4);if(Array.isArray(Be)&&typeof Be[0]!="number"){for(var Ze=0;Ze<Ee;Ze++){var it=T(Be[Ze],"uint8");Ve.set(it,4*Ze)}Ve.set(T(Be[0],"uint8"),4*Ee)}else for(var at=T(Be,"uint8"),gt=0;gt<Ee+1;gt++)Ve.set(at,4*gt);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ve})}}else u.passes[h]=null}),d.length<this.passes.length){for(var g=d.length;g<this.passes.length;g++){var m=this.passes[g];m&&(m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy())}this.passes.length=d.length}for(var y=[],v=0;v<this.passes.length;v++)this.passes[v]!==null&&y.push(this.passes[v]);return this.passes=y,this}},c.prototype.destroy=function(){return this.passes.forEach(function(d){d.colorBuffer.destroy(),d.positionBuffer.destroy(),d.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(F,C,e){"use strict";function T(g,m){return function(y){if(Array.isArray(y))return y}(g)||function(y,v){var _=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(_!=null){var h,S,A,E,P=[],I=!0,D=!1;try{if(A=(_=_.call(y)).next,v===0){if(Object(_)!==_)return;I=!1}else for(;!(I=(h=A.call(_)).done)&&(P.push(h.value),P.length!==v);I=!0);}catch(z){D=!0,S=z}finally{try{if(!I&&_.return!=null&&(E=_.return(),Object(E)!==E))return}finally{if(D)throw S}}return P}}(g,m)||k(g,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(g,m){if(g){if(typeof g=="string")return a(g,m);var y=Object.prototype.toString.call(g).slice(8,-1);return y==="Object"&&g.constructor&&(y=g.constructor.name),y==="Map"||y==="Set"?Array.from(g):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?a(g,m):void 0}}function a(g,m){(m==null||m>g.length)&&(m=g.length);for(var y=0,v=new Array(m);y<m;y++)v[y]=g[y];return v}var w=e(72160),b=e(76752),f=e(3808),s=e(3108),t=e(50896),i=e(26444),r=e(55616),n=e(45223),o=e(47520),l=e(96604),c=e(37816),d=e(51160),u=x;function x(g,m){var y=this;if(!(this instanceof x))return new x(g,m);typeof g=="function"?(m||(m={}),m.regl=g):(m=g,g=null),m&&m.length&&(m.positions=m);var v,_=(g=m.regl)._gl,h=[];this.tooManyColors=l,v=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:h,paletteIds:{},paletteTexture:v,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(m);var S={uniforms:{constPointSize:!!m.constPointSize,opacity:g.prop("opacity"),paletteSize:function(P,I){return[y.tooManyColors?0:255,v.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:v},attributes:{x:function(P,I){return I.xAttr||{buffer:I.positionBuffer,stride:8,offset:0}},y:function(P,I){return I.yAttr||{buffer:I.positionBuffer,stride:8,offset:4}},xFract:function(P,I){return I.xAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:0}},yFract:function(P,I){return I.yAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:4}},size:function(P,I){return I.size.length?{buffer:I.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*I.size/y.maxSize)]}},borderSize:function(P,I){return I.borderSize.length?{buffer:I.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*I.borderSize/y.maxSize)]}},colorId:function(P,I){return I.color.length?{buffer:I.colorBuffer,stride:y.tooManyColors?8:4,offset:0}:{constant:y.tooManyColors?h.slice(4*I.color,4*I.color+4):[I.color]}},borderColorId:function(P,I){return I.borderColor.length?{buffer:I.colorBuffer,stride:y.tooManyColors?8:4,offset:y.tooManyColors?4:2}:{constant:y.tooManyColors?h.slice(4*I.borderColor,4*I.borderColor+4):[I.borderColor]}},isActive:function(P,I){return I.activation===!0?{constant:[1]}:I.activation?I.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},A=t({},S);A.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),A.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=g(A);var E=t({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(E.frag=E.frag.replace("smoothstep","smoothStep"),A.frag=A.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var g=this,m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];var _=this.groups;if(y.length===1&&Array.isArray(y[0])&&(y[0][0]===null||Array.isArray(y[0][0]))&&(y=y[0]),this.regl._refresh(),y.length)for(var h=0;h<y.length;h++)this.drawItem(h,y[h]);else _.forEach(function(S,A){g.drawItem(A)});return this},x.prototype.drawItem=function(g,m){var y,v=this.groups,_=v[g];if(typeof m=="number"&&(g=m,_=v[m],m=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,m));for(var h=[],S=1;S<_.activation.length;S++)_.activation[S]&&(_.activation[S]===!0||_.activation[S].data.length)&&h.push.apply(h,function(A){if(Array.isArray(A))return a(A)}(y=this.getMarkerDrawOptions(S,_,m))||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(y)||k(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());h.length&&this.drawMarker(h)}},x.prototype.getMarkerDrawOptions=function(g,m,y){var v=m.range,_=m.tree,h=m.viewport,S=m.activation,A=m.selectionBuffer,E=m.count;if(this.regl,!_)return y?[t({},m,{markerTexture:this.markerTextures[g],activation:S[g],count:y.length,elements:y,offset:0})]:[t({},m,{markerTexture:this.markerTextures[g],activation:S[g],offset:0})];var P=[],I=_.range(v,{lod:!0,px:[(v[2]-v[0])/h.width,(v[3]-v[1])/h.height]});if(y){for(var D=S[g].data,z=new Uint8Array(E),V=0;V<y.length;V++){var O=y[V];z[O]=D?D[O]:1}A.subdata(z)}for(var j=I.length;j--;){var Y=T(I[j],2),B=Y[0],U=Y[1];P.push(t({},m,{markerTexture:this.markerTextures[g],activation:y?A:S[g],offset:B,count:U-B}))}return P},x.prototype.update=function(){for(var g=this,m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];if(y.length){y.length===1&&Array.isArray(y[0])&&(y=y[0]);var _=this.groups,h=this.gl,S=this.regl,A=this.maxSize,E=this.maxColors,P=this.palette;this.groups=_=y.map(function(I,D){var z=_[D];if(I===void 0)return z;I===null?I={positions:null}:typeof I=="function"?I={ondraw:I}:typeof I[0]=="number"&&(I={positions:I}),(I=r(I,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(I.positions=[]),I.tooManyColors!=null&&(g.tooManyColors=I.tooManyColors),z||(_[D]=z={id:D,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},I=t({},x.defaults,I)),I.positions&&!("marker"in I)&&(I.marker=z.marker,delete z.marker),I.marker&&!("positions"in I)&&(I.positions=z.positions,delete z.positions);var V=0,O=0;if(n(z,I,[{snap:!0,size:function(pe,de){return pe==null&&(pe=x.defaults.size),V+=pe&&pe.length?1:0,pe},borderSize:function(pe,de){return pe==null&&(pe=x.defaults.borderSize),V+=pe&&pe.length?1:0,pe},opacity:parseFloat,color:function(pe,de){return pe==null&&(pe=x.defaults.color),pe=g.updateColor(pe),O++,pe},borderColor:function(pe,de){return pe==null&&(pe=x.defaults.borderColor),pe=g.updateColor(pe),O++,pe},bounds:function(pe,de,me){return"range"in me||(me.range=null),pe},positions:function(pe,de,me){var ke=de.snap,Ce=de.positionBuffer,ge=de.positionFractBuffer,oe=de.selectionBuffer;if(pe.x||pe.y)return pe.x.length?de.xAttr={buffer:S.buffer(pe.x),offset:0,stride:4,count:pe.x.length}:de.xAttr={buffer:pe.x.buffer,offset:4*pe.x.offset||0,stride:4*(pe.x.stride||1),count:pe.x.count},pe.y.length?de.yAttr={buffer:S.buffer(pe.y),offset:0,stride:4,count:pe.y.length}:de.yAttr={buffer:pe.y.buffer,offset:4*pe.y.offset||0,stride:4*(pe.y.stride||1),count:pe.y.count},de.count=Math.max(de.xAttr.count,de.yAttr.count),pe;pe=o(pe,"float64");var re=de.count=Math.floor(pe.length/2),fe=de.bounds=re?b(pe,2):null;if(me.range||de.range||(delete de.range,me.range=fe),me.marker||de.marker||(delete de.marker,me.marker=null),ke&&(ke===!0||re>ke)?de.tree=s(pe,{bounds:fe}):ke&&ke.length&&(de.tree=ke),de.tree){var Se={primitive:"points",usage:"static",data:de.tree,type:"uint32"};de.elements?de.elements(Se):de.elements=S.elements(Se)}var be=c.float32(pe);return Ce({data:be,usage:"dynamic"}),ge({data:c.fract32(pe,be),usage:"dynamic"}),oe({data:new Uint8Array(re),type:"uint8",usage:"stream"}),pe}},{marker:function(pe,de,me){var ke=de.activation;if(ke.forEach(function(be){return be&&be.destroy&&be.destroy()}),ke.length=0,pe&&typeof pe[0]!="number"){for(var Ce=[],ge=0,oe=Math.min(pe.length,de.count);ge<oe;ge++){var re=g.addMarker(pe[ge]);Ce[re]||(Ce[re]=new Uint8Array(de.count)),Ce[re][ge]=1}for(var fe=0;fe<Ce.length;fe++)if(Ce[fe]){var Se={data:Ce[fe],type:"uint8",usage:"static"};ke[fe]?ke[fe](Se):ke[fe]=S.buffer(Se),ke[fe].data=Ce[fe]}}else ke[g.addMarker(pe)]=!0;return pe},range:function(pe,de,me){var ke=de.bounds;if(ke)return pe||(pe=ke),de.scale=[1/(pe[2]-pe[0]),1/(pe[3]-pe[1])],de.translate=[-pe[0],-pe[1]],de.scaleFract=c.fract(de.scale),de.translateFract=c.fract(de.translate),pe},viewport:function(pe){return d(pe||[h.drawingBufferWidth,h.drawingBufferHeight])}}]),V){var j=z,Y=j.count,B=j.size,U=j.borderSize,q=j.sizeBuffer,te=new Uint8Array(2*Y);if(B.length||U.length)for(var ee=0;ee<Y;ee++)te[2*ee]=Math.round(255*(B[ee]==null?B:B[ee])/A),te[2*ee+1]=Math.round(255*(U[ee]==null?U:U[ee])/A);q({data:te,usage:"dynamic"})}if(O){var Q,J=z,K=J.count,X=J.color,ie=J.borderColor,se=J.colorBuffer;if(g.tooManyColors){if(X.length||ie.length){Q=new Uint8Array(8*K);for(var ae=0;ae<K;ae++){var ue=X[ae];Q[8*ae]=P[4*ue],Q[8*ae+1]=P[4*ue+1],Q[8*ae+2]=P[4*ue+2],Q[8*ae+3]=P[4*ue+3];var ve=ie[ae];Q[8*ae+4]=P[4*ve],Q[8*ae+5]=P[4*ve+1],Q[8*ae+6]=P[4*ve+2],Q[8*ae+7]=P[4*ve+3]}}}else if(X.length||ie.length){Q=new Uint8Array(4*K+2);for(var ye=0;ye<K;ye++)X[ye]!=null&&(Q[4*ye]=X[ye]%E,Q[4*ye+1]=Math.floor(X[ye]/E)),ie[ye]!=null&&(Q[4*ye+2]=ie[ye]%E,Q[4*ye+3]=Math.floor(ie[ye]/E))}se({data:Q||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},x.prototype.addMarker=function(g){var m,y=this.markerTextures,v=this.regl,_=this.markerCache,h=g==null?0:_.indexOf(g);if(h>=0)return h;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)m=g;else{m=new Uint8Array(g.length);for(var S=0,A=g.length;S<A;S++)m[S]=255*g[S]}var E=Math.floor(Math.sqrt(m.length));return h=y.length,_.push(g),y.push(v.texture({channels:1,data:m,radius:E,mag:"linear",min:"linear"})),h},x.prototype.updateColor=function(g){var m=this.paletteIds,y=this.palette,v=this.maxColors;Array.isArray(g)||(g=[g]);var _=[];if(typeof g[0]=="number"){var h=[];if(Array.isArray(g))for(var S=0;S<g.length;S+=4)h.push(g.slice(S,S+4));else for(var A=0;A<g.length;A+=4)h.push(g.subarray(A,A+4));g=h}for(var E=0;E<g.length;E++){var P=g[E];P=w(P,"uint8");var I=f(P,!1);if(m[I]==null){var D=y.length;m[I]=Math.floor(D/4),y[D]=P[0],y[D+1]=P[1],y[D+2]=P[2],y[D+3]=P[3]}_[E]=m[I]}return!this.tooManyColors&&y.length>4*v&&(this.tooManyColors=!0),this.updatePalette(y),_.length===1?_[0]:_},x.prototype.updatePalette=function(g){if(!this.tooManyColors){var m=this.maxColors,y=this.paletteTexture,v=Math.ceil(.25*g.length/m);if(v>1)for(var _=.25*(g=g.slice()).length%m;_<v*m;_++)g.push(0,0,0,0);y.height<v&&y.resize(m,v),y.subimage({width:Math.min(.25*g.length,m),height:v,data:g},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(m){return m&&m.destroy&&m.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var p=e(50896);F.exports=function(g,m){var y=new u(g,m),v=y.render.bind(y);return p(v,{render:v,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette}),v}},55795:function(F,C,e){"use strict";var T=e(38540),k=e(55616),a=e(76752),w=e(3951),b=e(67752),f=e(51160),s=e(47520);function t(o,l){if(!(this instanceof t))return new t(o,l);this.traces=[],this.passes={},this.regl=o,this.scatter=T(o),this.canvas=this.scatter.canvas}function i(o,l,c){return(o.id!=null?o.id:o)<<16|(255&l)<<8|255&c}function r(o,l,c){var d,u,x,p,g=o[l],m=o[c];return g.length>2?(g[0],g[2],d=g[1],u=g[3]):g.length?(d=g[0],u=g[1]):(g.x,d=g.y,g.x,g.width,u=g.y+g.height),m.length>2?(x=m[0],p=m[2],m[1],m[3]):m.length?(x=m[0],p=m[1]):(x=m.x,m.y,p=m.x+m.width,m.y,m.height),[x,d,p,u]}function n(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var l=f(o);return[l.x,l.y,l.x+l.width,l.y+l.height]}F.exports=t,t.prototype.render=function(){for(var o,l=this,c=[],d=arguments.length;d--;)c[d]=arguments[d];return c.length&&(o=this).update.apply(o,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=w(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,w(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var o,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var d=0;d<l.length;d++)this.updateItem(d,l[d]);this.traces=this.traces.filter(Boolean);for(var u=[],x=0,p=0;p<this.traces.length;p++){for(var g=this.traces[p],m=this.traces[p].passes,y=0;y<m.length;y++)u.push(this.passes[m[y]]);g.passOffset=x,x+=g.passes.length}return(o=this.scatter).update.apply(o,u),this}},t.prototype.updateItem=function(o,l){var c=this.regl;if(l===null)return this.traces[o]=null,this;if(!l)return this;var d,u=k(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[o]||(this.traces[o]={id:o,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:f([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(u.color!=null&&(x.color=u.color),u.size!=null&&(x.size=u.size),u.marker!=null&&(x.marker=u.marker),u.borderColor!=null&&(x.borderColor=u.borderColor),u.borderSize!=null&&(x.borderSize=u.borderSize),u.opacity!=null&&(x.opacity=u.opacity),u.viewport&&(x.viewport=f(u.viewport)),u.diagonal!=null&&(x.diagonal=u.diagonal),u.upper!=null&&(x.upper=u.upper),u.lower!=null&&(x.lower=u.lower),u.data){x.buffer(s(u.data)),x.columns=u.data.length,x.count=u.data[0].length,x.bounds=[];for(var p=0;p<x.columns;p++)x.bounds[p]=a(u.data[p],1)}u.range&&(x.range=u.range,d=x.range&&typeof x.range[0]!="number"),u.domain&&(x.domain=u.domain);var g=!1;u.padding!=null&&(Array.isArray(u.padding)&&u.padding.length===x.columns&&typeof u.padding[u.padding.length-1]=="number"?(x.padding=u.padding.map(n),g=!0):x.padding=n(u.padding));var m=x.columns,y=x.count,v=x.viewport.width,_=x.viewport.height,h=x.viewport.x,S=x.viewport.y,A=v/m,E=_/m;x.passes=[];for(var P=0;P<m;P++)for(var I=0;I<m;I++)if((x.diagonal||I!==P)&&(x.upper||!(P>I))&&(x.lower||!(P<I))){var D=i(x.id,P,I),z=this.passes[D]||(this.passes[D]={});if(u.data&&(u.transpose?z.positions={x:{buffer:x.buffer,offset:I,count:y,stride:m},y:{buffer:x.buffer,offset:P,count:y,stride:m}}:z.positions={x:{buffer:x.buffer,offset:I*y,count:y},y:{buffer:x.buffer,offset:P*y,count:y}},z.bounds=r(x.bounds,P,I)),u.domain||u.viewport||u.data){var V=g?r(x.padding,P,I):x.padding;if(x.domain){var O=r(x.domain,P,I),j=O[0],Y=O[1],B=O[2],U=O[3];z.viewport=[h+j*v+V[0],S+Y*_+V[1],h+B*v-V[2],S+U*_-V[3]]}else z.viewport=[h+I*A+A*V[0],S+P*E+E*V[1],h+(I+1)*A-A*V[2],S+(P+1)*E-E*V[3]]}u.color&&(z.color=x.color),u.size&&(z.size=x.size),u.marker&&(z.marker=x.marker),u.borderSize&&(z.borderSize=x.borderSize),u.borderColor&&(z.borderColor=x.borderColor),u.opacity&&(z.opacity=x.opacity),u.range&&(z.range=d?r(x.range,P,I):x.range||z.bounds),x.passes.push(D)}return this},t.prototype.draw=function(){for(var o,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var d=[],u=0;u<l.length;u++)if(typeof l[u]=="number"){var x=this.traces[l[u]],p=x.passes,g=x.passOffset;d.push.apply(d,b(g,g+p.length))}else if(l[u].length){var m=l[u],y=this.traces[u],v=y.passes,_=y.passOffset;v=v.map(function(h,S){d[_+S]=m})}(o=this.scatter).draw.apply(o,d)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(F){F.exports=function(){function C(Ne,Ye){this.id=ie++,this.type=Ne,this.data=Ye}function e(Ne){if(Ne.length===0)return[];var Ye=Ne.charAt(0),ot=Ne.charAt(Ne.length-1);if(1<Ne.length&&Ye===ot&&(Ye==='"'||Ye==="'"))return['"'+Ne.substr(1,Ne.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ye=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ne))return e(Ne.substr(0,Ye.index)).concat(e(Ye[1])).concat(e(Ne.substr(Ye.index+Ye[0].length)));if((Ye=Ne.split(".")).length===1)return['"'+Ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ne=[],ot=0;ot<Ye.length;++ot)Ne=Ne.concat(e(Ye[ot]));return Ne}function T(Ne){return"["+e(Ne).join("][")+"]"}function k(Ne){return typeof Ne=="string"?Ne.split():Ne}function a(Ne){return typeof Ne=="string"?document.querySelector(Ne):Ne}function w(Ne){var Ye,ot,nt,ze,Fe=Ne||{};Ne={};var rt=[],We=[],ft=typeof window>"u"?1:window.devicePixelRatio,mt=!1,vt={},ut=function(bt){},Mt=function(){};if(typeof Fe=="string"?Ye=document.querySelector(Fe):typeof Fe=="object"&&(typeof Fe.nodeName=="string"&&typeof Fe.appendChild=="function"&&typeof Fe.getBoundingClientRect=="function"?Ye=Fe:typeof Fe.drawArrays=="function"||typeof Fe.drawElements=="function"?nt=(ze=Fe).canvas:("gl"in Fe?ze=Fe.gl:"canvas"in Fe?nt=a(Fe.canvas):"container"in Fe&&(ot=a(Fe.container)),"attributes"in Fe&&(Ne=Fe.attributes),"extensions"in Fe&&(rt=k(Fe.extensions)),"optionalExtensions"in Fe&&(We=k(Fe.optionalExtensions)),"onDone"in Fe&&(ut=Fe.onDone),"profile"in Fe&&(mt=!!Fe.profile),"pixelRatio"in Fe&&(ft=+Fe.pixelRatio),"cachedCode"in Fe&&(vt=Fe.cachedCode))),Ye&&(Ye.nodeName.toLowerCase()==="canvas"?nt=Ye:ot=Ye),!ze){if(!nt){if(!(Ye=function(bt,St,Pt){function Dt(){var an=window.innerWidth,Ht=window.innerHeight;bt!==document.body&&(an=(Ht=Xt.getBoundingClientRect()).right-Ht.left,Ht=Ht.bottom-Ht.top),Xt.width=Pt*an,Xt.height=Pt*Ht}var Ft,Xt=document.createElement("canvas");return X(Xt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),bt.appendChild(Xt),bt===document.body&&(Xt.style.position="absolute",X(bt.style,{margin:0,padding:0})),bt!==document.body&&typeof ResizeObserver=="function"?(Ft=new ResizeObserver(function(){setTimeout(Dt)})).observe(bt):window.addEventListener("resize",Dt,!1),Dt(),{canvas:Xt,onDestroy:function(){Ft?Ft.disconnect():window.removeEventListener("resize",Dt),bt.removeChild(Xt)}}}(ot||document.body,0,ft)))return null;nt=Ye.canvas,Mt=Ye.onDestroy}Ne.premultipliedAlpha===void 0&&(Ne.premultipliedAlpha=!0),ze=function(bt,St){function Pt(Dt){try{return bt.getContext(Dt,St)}catch{return null}}return Pt("webgl")||Pt("experimental-webgl")||Pt("webgl-experimental")}(nt,Ne)}return ze?{gl:ze,canvas:nt,container:ot,extensions:rt,optionalExtensions:We,pixelRatio:ft,profile:mt,cachedCode:vt,onDone:ut,onDestroy:Mt}:(Mt(),ut("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Ne,Ye){for(var ot=Array(Ne),nt=0;nt<Ne;++nt)ot[nt]=Ye(nt);return ot}function f(Ne){var Ye,ot;return Ye=(65535<Ne)<<4,Ye|=ot=(255<(Ne>>>=Ye))<<3,(Ye|=ot=(15<(Ne>>>=ot))<<2)|(ot=(3<(Ne>>>=ot))<<1)|Ne>>>ot>>1}function s(){function Ne(nt){e:{for(var ze=16;268435456>=ze;ze*=16)if(nt<=ze){nt=ze;break e}nt=0}return 0<(ze=ot[f(nt)>>2]).length?ze.pop():new ArrayBuffer(nt)}function Ye(nt){ot[f(nt.byteLength)>>2].push(nt)}var ot=b(8,function(){return[]});return{alloc:Ne,free:Ye,allocType:function(nt,ze){var Fe=null;switch(nt){case 5120:Fe=new Int8Array(Ne(ze),0,ze);break;case 5121:Fe=new Uint8Array(Ne(ze),0,ze);break;case 5122:Fe=new Int16Array(Ne(2*ze),0,ze);break;case 5123:Fe=new Uint16Array(Ne(2*ze),0,ze);break;case 5124:Fe=new Int32Array(Ne(4*ze),0,ze);break;case 5125:Fe=new Uint32Array(Ne(4*ze),0,ze);break;case 5126:Fe=new Float32Array(Ne(4*ze),0,ze);break;default:return null}return Fe.length!==ze?Fe.subarray(0,ze):Fe},freeType:function(nt){Ye(nt.buffer)}}}function t(Ne){return!!Ne&&typeof Ne=="object"&&Array.isArray(Ne.shape)&&Array.isArray(Ne.stride)&&typeof Ne.offset=="number"&&Ne.shape.length===Ne.stride.length&&(Array.isArray(Ne.data)||pe(Ne.data))}function i(Ne,Ye,ot,nt,ze,Fe){for(var rt=0;rt<Ye;++rt)for(var We=Ne[rt],ft=0;ft<ot;++ft)for(var mt=We[ft],vt=0;vt<nt;++vt)ze[Fe++]=mt[vt]}function r(Ne,Ye,ot,nt,ze){for(var Fe=1,rt=ot+1;rt<Ye.length;++rt)Fe*=Ye[rt];var We=Ye[ot];if(Ye.length-ot==4){var ft=Ye[ot+1],mt=Ye[ot+2];for(Ye=Ye[ot+3],rt=0;rt<We;++rt)i(Ne[rt],ft,mt,Ye,nt,ze),ze+=Fe}else for(rt=0;rt<We;++rt)r(Ne[rt],Ye,ot+1,nt,ze),ze+=Fe}function n(Ne){return 0|ke[Object.prototype.toString.call(Ne)]}function o(Ne,Ye){for(var ot=0;ot<Ye.length;++ot)Ne[ot]=Ye[ot]}function l(Ne,Ye,ot,nt,ze,Fe,rt){for(var We=0,ft=0;ft<ot;++ft)for(var mt=0;mt<nt;++mt)Ne[We++]=Ye[ze*ft+Fe*mt+rt]}function c(Ne,Ye,ot,nt){function ze(ut){this.id=ft++,this.buffer=Ne.createBuffer(),this.type=ut,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ot.profile&&(this.stats={size:0})}function Fe(ut,Mt,bt){ut.byteLength=Mt.byteLength,Ne.bufferData(ut.type,Mt,bt)}function rt(ut,Mt,bt,St,Pt,Dt){if(ut.usage=bt,Array.isArray(Mt)){if(ut.dtype=St||5126,0<Mt.length)if(Array.isArray(Mt[0])){Pt=re(Mt);for(var Ft=St=1;Ft<Pt.length;++Ft)St*=Pt[Ft];ut.dimension=St,Fe(ut,Mt=oe(Mt,Pt,ut.dtype),bt),Dt?ut.persistentData=Mt:ve.freeType(Mt)}else typeof Mt[0]=="number"?(ut.dimension=Pt,o(Pt=ve.allocType(ut.dtype,Mt.length),Mt),Fe(ut,Pt,bt),Dt?ut.persistentData=Pt:ve.freeType(Pt)):pe(Mt[0])&&(ut.dimension=Mt[0].length,ut.dtype=St||n(Mt[0])||5126,Fe(ut,Mt=oe(Mt,[Mt.length,Mt[0].length],ut.dtype),bt),Dt?ut.persistentData=Mt:ve.freeType(Mt))}else if(pe(Mt))ut.dtype=St||n(Mt),ut.dimension=Pt,Fe(ut,Mt,bt),Dt&&(ut.persistentData=new Uint8Array(new Uint8Array(Mt.buffer)));else if(t(Mt)){Pt=Mt.shape;var Xt=Mt.stride,an=(Ft=Mt.offset,0),Ht=0,Zt=0,jt=0;Pt.length===1?(an=Pt[0],Ht=1,Zt=Xt[0],jt=0):Pt.length===2&&(an=Pt[0],Ht=Pt[1],Zt=Xt[0],jt=Xt[1]),ut.dtype=St||n(Mt.data)||5126,ut.dimension=Ht,l(Pt=ve.allocType(ut.dtype,an*Ht),Mt.data,an,Ht,Zt,jt,Ft),Fe(ut,Pt,bt),Dt?ut.persistentData=Pt:ve.freeType(Pt)}else Mt instanceof ArrayBuffer&&(ut.dtype=5121,ut.dimension=Pt,Fe(ut,Mt,bt),Dt&&(ut.persistentData=new Uint8Array(new Uint8Array(Mt))))}function We(ut){Ye.bufferCount--,nt(ut),Ne.deleteBuffer(ut.buffer),ut.buffer=null,delete mt[ut.id]}var ft=0,mt={};ze.prototype.bind=function(){Ne.bindBuffer(this.type,this.buffer)},ze.prototype.destroy=function(){We(this)};var vt=[];return ot.profile&&(Ye.getTotalBufferSize=function(){var ut=0;return Object.keys(mt).forEach(function(Mt){ut+=mt[Mt].stats.size}),ut}),{create:function(ut,Mt,bt,St){function Pt(Ft){var Xt=35044,an=null,Ht=0,Zt=0,jt=1;return Array.isArray(Ft)||pe(Ft)||t(Ft)||Ft instanceof ArrayBuffer?an=Ft:typeof Ft=="number"?Ht=0|Ft:Ft&&("data"in Ft&&(an=Ft.data),"usage"in Ft&&(Xt=ge[Ft.usage]),"type"in Ft&&(Zt=Ce[Ft.type]),"dimension"in Ft&&(jt=0|Ft.dimension),"length"in Ft&&(Ht=0|Ft.length)),Dt.bind(),an?rt(Dt,an,Xt,Zt,jt,St):(Ht&&Ne.bufferData(Dt.type,Ht,Xt),Dt.dtype=Zt||5121,Dt.usage=Xt,Dt.dimension=jt,Dt.byteLength=Ht),ot.profile&&(Dt.stats.size=Dt.byteLength*fe[Dt.dtype]),Pt}Ye.bufferCount++;var Dt=new ze(Mt);return mt[Dt.id]=Dt,bt||Pt(ut),Pt._reglType="buffer",Pt._buffer=Dt,Pt.subdata=function(Ft,Xt){var an,Ht=0|(Xt||0);if(Dt.bind(),pe(Ft)||Ft instanceof ArrayBuffer)Ne.bufferSubData(Dt.type,Ht,Ft);else if(Array.isArray(Ft)){if(0<Ft.length)if(typeof Ft[0]=="number"){var Zt=ve.allocType(Dt.dtype,Ft.length);o(Zt,Ft),Ne.bufferSubData(Dt.type,Ht,Zt),ve.freeType(Zt)}else(Array.isArray(Ft[0])||pe(Ft[0]))&&(an=re(Ft),Zt=oe(Ft,an,Dt.dtype),Ne.bufferSubData(Dt.type,Ht,Zt),ve.freeType(Zt))}else if(t(Ft)){an=Ft.shape;var jt=Ft.stride,Pn=Zt=0,Tn=0,mn=0;an.length===1?(Zt=an[0],Pn=1,Tn=jt[0],mn=0):an.length===2&&(Zt=an[0],Pn=an[1],Tn=jt[0],mn=jt[1]),an=Array.isArray(Ft.data)?Dt.dtype:n(Ft.data),l(an=ve.allocType(an,Zt*Pn),Ft.data,Zt,Pn,Tn,mn,Ft.offset),Ne.bufferSubData(Dt.type,Ht,an),ve.freeType(an)}return Pt},ot.profile&&(Pt.stats=Dt.stats),Pt.destroy=function(){We(Dt)},Pt},createStream:function(ut,Mt){var bt=vt.pop();return bt||(bt=new ze(ut)),bt.bind(),rt(bt,Mt,35040,0,1,!1),bt},destroyStream:function(ut){vt.push(ut)},clear:function(){de(mt).forEach(We),vt.forEach(We)},getBuffer:function(ut){return ut&&ut._buffer instanceof ze?ut._buffer:null},restore:function(){de(mt).forEach(function(ut){ut.buffer=Ne.createBuffer(),Ne.bindBuffer(ut.type,ut.buffer),Ne.bufferData(ut.type,ut.persistentData||ut.byteLength,ut.usage)})},_initBuffer:rt}}function d(Ne,Ye,ot,nt){function ze(ut){this.id=ft++,We[this.id]=this,this.buffer=ut,this.primType=4,this.type=this.vertCount=0}function Fe(ut,Mt,bt,St,Pt,Dt,Ft){var Xt;if(ut.buffer.bind(),Mt?((Xt=Ft)||pe(Mt)&&(!t(Mt)||pe(Mt.data))||(Xt=Ye.oes_element_index_uint?5125:5123),ot._initBuffer(ut.buffer,Mt,bt,Xt,3)):(Ne.bufferData(34963,Dt,bt),ut.buffer.dtype=Xt||5121,ut.buffer.usage=bt,ut.buffer.dimension=3,ut.buffer.byteLength=Dt),Xt=Ft,!Ft){switch(ut.buffer.dtype){case 5121:case 5120:Xt=5121;break;case 5123:case 5122:Xt=5123;break;case 5125:case 5124:Xt=5125}ut.buffer.dtype=Xt}ut.type=Xt,0>(Mt=Pt)&&(Mt=ut.buffer.byteLength,Xt===5123?Mt>>=1:Xt===5125&&(Mt>>=2)),ut.vertCount=Mt,Mt=St,0>St&&(Mt=4,(St=ut.buffer.dimension)===1&&(Mt=0),St===2&&(Mt=1),St===3&&(Mt=4)),ut.primType=Mt}function rt(ut){nt.elementsCount--,delete We[ut.id],ut.buffer.destroy(),ut.buffer=null}var We={},ft=0,mt={uint8:5121,uint16:5123};Ye.oes_element_index_uint&&(mt.uint32=5125),ze.prototype.bind=function(){this.buffer.bind()};var vt=[];return{create:function(ut,Mt){function bt(Dt){if(Dt)if(typeof Dt=="number")St(Dt),Pt.primType=4,Pt.vertCount=0|Dt,Pt.type=5121;else{var Ft=null,Xt=35044,an=-1,Ht=-1,Zt=0,jt=0;Array.isArray(Dt)||pe(Dt)||t(Dt)?Ft=Dt:("data"in Dt&&(Ft=Dt.data),"usage"in Dt&&(Xt=ge[Dt.usage]),"primitive"in Dt&&(an=Se[Dt.primitive]),"count"in Dt&&(Ht=0|Dt.count),"type"in Dt&&(jt=mt[Dt.type]),"length"in Dt?Zt=0|Dt.length:(Zt=Ht,jt===5123||jt===5122?Zt*=2:jt!==5125&&jt!==5124||(Zt*=4))),Fe(Pt,Ft,Xt,an,Ht,Zt,jt)}else St(),Pt.primType=4,Pt.vertCount=0,Pt.type=5121;return bt}var St=ot.create(null,34963,!0),Pt=new ze(St._buffer);return nt.elementsCount++,bt(ut),bt._reglType="elements",bt._elements=Pt,bt.subdata=function(Dt,Ft){return St.subdata(Dt,Ft),bt},bt.destroy=function(){rt(Pt)},bt},createStream:function(ut){var Mt=vt.pop();return Mt||(Mt=new ze(ot.create(null,34963,!0,!1)._buffer)),Fe(Mt,ut,35040,-1,-1,0,0),Mt},destroyStream:function(ut){vt.push(ut)},getElements:function(ut){return typeof ut=="function"&&ut._elements instanceof ze?ut._elements:null},clear:function(){de(We).forEach(rt)}}}function u(Ne){for(var Ye=ve.allocType(5123,Ne.length),ot=0;ot<Ne.length;++ot)if(isNaN(Ne[ot]))Ye[ot]=65535;else if(Ne[ot]===1/0)Ye[ot]=31744;else if(Ne[ot]===-1/0)Ye[ot]=64512;else{be[0]=Ne[ot];var nt=(Fe=we[0])>>>31<<15,ze=(Fe<<1>>>24)-127,Fe=Fe>>13&1023;Ye[ot]=-24>ze?nt:-14>ze?nt+(Fe+1024>>-14-ze):15<ze?nt+31744:nt+(ze+15<<10)+Fe}return Ye}function x(Ne){return Array.isArray(Ne)||pe(Ne)}function p(Ne){return"[object "+Ne+"]"}function g(Ne){return Array.isArray(Ne)&&(Ne.length===0||typeof Ne[0]=="number")}function m(Ne){return!(!Array.isArray(Ne)||Ne.length===0||!x(Ne[0]))}function y(Ne){return Object.prototype.toString.call(Ne)}function v(Ne){if(!Ne)return!1;var Ye=y(Ne);return 0<=Ve.indexOf(Ye)||g(Ne)||m(Ne)||t(Ne)}function _(Ne,Ye){Ne.type===36193?(Ne.data=u(Ye),ve.freeType(Ye)):Ne.data=Ye}function h(Ne,Ye,ot,nt,ze,Fe){if(Ne=it[Ne]!==void 0?it[Ne]:De[Ne]*Ze[Ye],Fe&&(Ne*=6),ze){for(nt=0;1<=ot;)nt+=Ne*ot*ot,ot/=2;return nt}return Ne*ot*nt}function S(Ne,Ye,ot,nt,ze,Fe,rt){function We(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ft(Jt,vn){Jt.internalformat=vn.internalformat,Jt.format=vn.format,Jt.type=vn.type,Jt.compressed=vn.compressed,Jt.premultiplyAlpha=vn.premultiplyAlpha,Jt.flipY=vn.flipY,Jt.unpackAlignment=vn.unpackAlignment,Jt.colorSpace=vn.colorSpace,Jt.width=vn.width,Jt.height=vn.height,Jt.channels=vn.channels}function mt(Jt,vn){if(typeof vn=="object"&&vn){"premultiplyAlpha"in vn&&(Jt.premultiplyAlpha=vn.premultiplyAlpha),"flipY"in vn&&(Jt.flipY=vn.flipY),"alignment"in vn&&(Jt.unpackAlignment=vn.alignment),"colorSpace"in vn&&(Jt.colorSpace=Ln[vn.colorSpace]),"type"in vn&&(Jt.type=Mn[vn.type]);var Lt=Jt.width,Nt=Jt.height,$t=Jt.channels,fn=!1;"shape"in vn?(Lt=vn.shape[0],Nt=vn.shape[1],vn.shape.length===3&&($t=vn.shape[2],fn=!0)):("radius"in vn&&(Lt=Nt=vn.radius),"width"in vn&&(Lt=vn.width),"height"in vn&&(Nt=vn.height),"channels"in vn&&($t=vn.channels,fn=!0)),Jt.width=0|Lt,Jt.height=0|Nt,Jt.channels=0|$t,Lt=!1,"format"in vn&&(Lt=vn.format,Nt=Jt.internalformat=jn[Lt],Jt.format=En[Nt],Lt in Mn&&!("type"in vn)&&(Jt.type=Mn[Lt]),Lt in Rn&&(Jt.compressed=!0),Lt=!0),!fn&&Lt?Jt.channels=De[Jt.format]:fn&&!Lt&&Jt.channels!==Pe[Jt.format]&&(Jt.format=Jt.internalformat=Pe[Jt.channels])}}function vt(Jt){Ne.pixelStorei(37440,Jt.flipY),Ne.pixelStorei(37441,Jt.premultiplyAlpha),Ne.pixelStorei(37443,Jt.colorSpace),Ne.pixelStorei(3317,Jt.unpackAlignment)}function ut(){We.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Mt(Jt,vn){var Lt=null;if(v(vn)?Lt=vn:vn&&(mt(Jt,vn),"x"in vn&&(Jt.xOffset=0|vn.x),"y"in vn&&(Jt.yOffset=0|vn.y),v(vn.data)&&(Lt=vn.data)),vn.copy){var Nt=ze.viewportWidth,$t=ze.viewportHeight;Jt.width=Jt.width||Nt-Jt.xOffset,Jt.height=Jt.height||$t-Jt.yOffset,Jt.needsCopy=!0}else if(Lt){if(pe(Lt))Jt.channels=Jt.channels||4,Jt.data=Lt,"type"in vn||Jt.type!==5121||(Jt.type=0|ke[Object.prototype.toString.call(Lt)]);else if(g(Lt)){switch(Jt.channels=Jt.channels||4,$t=(Nt=Lt).length,Jt.type){case 5121:case 5123:case 5125:case 5126:($t=ve.allocType(Jt.type,$t)).set(Nt),Jt.data=$t;break;case 36193:Jt.data=u(Nt)}Jt.alignment=1,Jt.needsFree=!0}else if(t(Lt)){Nt=Lt.data,Array.isArray(Nt)||Jt.type!==5121||(Jt.type=0|ke[Object.prototype.toString.call(Nt)]),$t=Lt.shape;var fn,dn,xn,sn,Yt=Lt.stride;$t.length===3?(xn=$t[2],sn=Yt[2]):sn=xn=1,fn=$t[0],dn=$t[1],$t=Yt[0],Yt=Yt[1],Jt.alignment=1,Jt.width=fn,Jt.height=dn,Jt.channels=xn,Jt.format=Jt.internalformat=Pe[xn],Jt.needsFree=!0,fn=sn,Lt=Lt.offset,xn=Jt.width,sn=Jt.height,dn=Jt.channels;for(var Wt=ve.allocType(Jt.type===36193?5126:Jt.type,xn*sn*dn),tn=0,ln=0;ln<sn;++ln)for(var An=0;An<xn;++An)for(var In=0;In<dn;++In)Wt[tn++]=Nt[$t*An+Yt*ln+fn*In+Lt];_(Jt,Wt)}else if(y(Lt)===he||y(Lt)===_e||y(Lt)===Ae)y(Lt)===he||y(Lt)===_e?Jt.element=Lt:Jt.element=Lt.canvas,Jt.width=Jt.element.width,Jt.height=Jt.element.height,Jt.channels=4;else if(y(Lt)===Oe)Jt.element=Lt,Jt.width=Lt.width,Jt.height=Lt.height,Jt.channels=4;else if(y(Lt)===Ee)Jt.element=Lt,Jt.width=Lt.naturalWidth,Jt.height=Lt.naturalHeight,Jt.channels=4;else if(y(Lt)===Be)Jt.element=Lt,Jt.width=Lt.videoWidth,Jt.height=Lt.videoHeight,Jt.channels=4;else if(m(Lt)){for(Nt=Jt.width||Lt[0].length,$t=Jt.height||Lt.length,Yt=Jt.channels,Yt=x(Lt[0][0])?Yt||Lt[0][0].length:Yt||1,fn=me.shape(Lt),xn=1,sn=0;sn<fn.length;++sn)xn*=fn[sn];xn=ve.allocType(Jt.type===36193?5126:Jt.type,xn),me.flatten(Lt,fn,"",xn),_(Jt,xn),Jt.alignment=1,Jt.width=Nt,Jt.height=$t,Jt.channels=Yt,Jt.format=Jt.internalformat=Pe[Yt],Jt.needsFree=!0}}else Jt.width=Jt.width||1,Jt.height=Jt.height||1,Jt.channels=Jt.channels||4}function bt(Jt,vn,Lt,Nt,$t){var fn=Jt.element,dn=Jt.data,xn=Jt.internalformat,sn=Jt.format,Yt=Jt.type,Wt=Jt.width,tn=Jt.height;vt(Jt),fn?Ne.texSubImage2D(vn,$t,Lt,Nt,sn,Yt,fn):Jt.compressed?Ne.compressedTexSubImage2D(vn,$t,Lt,Nt,xn,Wt,tn,dn):Jt.needsCopy?(nt(),Ne.copyTexSubImage2D(vn,$t,Lt,Nt,Jt.xOffset,Jt.yOffset,Wt,tn)):Ne.texSubImage2D(vn,$t,Lt,Nt,Wt,tn,sn,Yt,dn)}function St(){return gn.pop()||new ut}function Pt(Jt){Jt.needsFree&&ve.freeType(Jt.data),ut.call(Jt),gn.push(Jt)}function Dt(){We.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Ft(Jt,vn,Lt){var Nt=Jt.images[0]=St();Jt.mipmask=1,Nt.width=Jt.width=vn,Nt.height=Jt.height=Lt,Nt.channels=Jt.channels=4}function Xt(Jt,vn){var Lt=null;if(v(vn))ft(Lt=Jt.images[0]=St(),Jt),Mt(Lt,vn),Jt.mipmask=1;else if(mt(Jt,vn),Array.isArray(vn.mipmap))for(var Nt=vn.mipmap,$t=0;$t<Nt.length;++$t)ft(Lt=Jt.images[$t]=St(),Jt),Lt.width>>=$t,Lt.height>>=$t,Mt(Lt,Nt[$t]),Jt.mipmask|=1<<$t;else ft(Lt=Jt.images[0]=St(),Jt),Mt(Lt,vn),Jt.mipmask=1;ft(Jt,Jt.images[0])}function an(Jt,vn){for(var Lt=Jt.images,Nt=0;Nt<Lt.length&&Lt[Nt];++Nt){var $t=Lt[Nt],fn=vn,dn=Nt,xn=$t.element,sn=$t.data,Yt=$t.internalformat,Wt=$t.format,tn=$t.type,ln=$t.width,An=$t.height;vt($t),xn?Ne.texImage2D(fn,dn,Wt,Wt,tn,xn):$t.compressed?Ne.compressedTexImage2D(fn,dn,Yt,ln,An,0,sn):$t.needsCopy?(nt(),Ne.copyTexImage2D(fn,dn,Wt,$t.xOffset,$t.yOffset,ln,An,0)):Ne.texImage2D(fn,dn,Wt,ln,An,0,Wt,tn,sn||null)}}function Ht(){var Jt=Dn.pop()||new Dt;We.call(Jt);for(var vn=Jt.mipmask=0;16>vn;++vn)Jt.images[vn]=null;return Jt}function Zt(Jt){for(var vn=Jt.images,Lt=0;Lt<vn.length;++Lt)vn[Lt]&&Pt(vn[Lt]),vn[Lt]=null;Dn.push(Jt)}function jt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Pn(Jt,vn){"min"in vn&&(Jt.minFilter=Cn[vn.min],0<=Me.indexOf(Jt.minFilter)&&!("faces"in vn)&&(Jt.genMipmaps=!0)),"mag"in vn&&(Jt.magFilter=wn[vn.mag]);var Lt=Jt.wrapS,Nt=Jt.wrapT;if("wrap"in vn){var $t=vn.wrap;typeof $t=="string"?Lt=Nt=bn[$t]:Array.isArray($t)&&(Lt=bn[$t[0]],Nt=bn[$t[1]])}else"wrapS"in vn&&(Lt=bn[vn.wrapS]),"wrapT"in vn&&(Nt=bn[vn.wrapT]);if(Jt.wrapS=Lt,Jt.wrapT=Nt,"anisotropic"in vn&&(Jt.anisotropic=vn.anisotropic),"mipmap"in vn){switch(Lt=!1,typeof vn.mipmap){case"string":Jt.mipmapHint=hn[vn.mipmap],Lt=Jt.genMipmaps=!0;break;case"boolean":Lt=Jt.genMipmaps=vn.mipmap;break;case"object":Jt.genMipmaps=!1,Lt=!0}!Lt||"min"in vn||(Jt.minFilter=9984)}}function Tn(Jt,vn){Ne.texParameteri(vn,10241,Jt.minFilter),Ne.texParameteri(vn,10240,Jt.magFilter),Ne.texParameteri(vn,10242,Jt.wrapS),Ne.texParameteri(vn,10243,Jt.wrapT),Ye.ext_texture_filter_anisotropic&&Ne.texParameteri(vn,34046,Jt.anisotropic),Jt.genMipmaps&&(Ne.hint(33170,Jt.mipmapHint),Ne.generateMipmap(vn))}function mn(Jt){We.call(this),this.mipmask=0,this.internalformat=6408,this.id=qn++,this.refCount=1,this.target=Jt,this.texture=Ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new jt,rt.profile&&(this.stats={size:0})}function Qt(Jt){Ne.activeTexture(33984),Ne.bindTexture(Jt.target,Jt.texture)}function un(){var Jt=xr[0];Jt?Ne.bindTexture(Jt.target,Jt.texture):Ne.bindTexture(3553,null)}function nn(Jt){var vn=Jt.texture,Lt=Jt.unit,Nt=Jt.target;0<=Lt&&(Ne.activeTexture(33984+Lt),Ne.bindTexture(Nt,null),xr[Lt]=null),Ne.deleteTexture(vn),Jt.texture=null,Jt.params=null,Jt.pixels=null,Jt.refCount=0,delete Vn[Jt.id],Fe.textureCount--}var hn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},bn={repeat:10497,clamp:33071,mirror:33648},wn={nearest:9728,linear:9729},Cn=X({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wn),Ln={none:0,browser:37444},Mn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},jn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Rn={};Ye.ext_srgb&&(jn.srgb=35904,jn.srgba=35906),Ye.oes_texture_float&&(Mn.float32=Mn.float=5126),Ye.oes_texture_half_float&&(Mn.float16=Mn["half float"]=36193),Ye.webgl_depth_texture&&(X(jn,{depth:6402,"depth stencil":34041}),X(Mn,{uint16:5123,uint32:5125,"depth stencil":34042})),Ye.webgl_compressed_texture_s3tc&&X(Rn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ye.webgl_compressed_texture_atc&&X(Rn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ye.webgl_compressed_texture_pvrtc&&X(Rn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ye.webgl_compressed_texture_etc1&&(Rn["rgb etc1"]=36196);var Qn=Array.prototype.slice.call(Ne.getParameter(34467));Object.keys(Rn).forEach(function(Jt){var vn=Rn[Jt];0<=Qn.indexOf(vn)&&(jn[Jt]=vn)});var Yn=Object.keys(jn);ot.textureFormats=Yn;var ar=[];Object.keys(jn).forEach(function(Jt){ar[jn[Jt]]=Jt});var Kn=[];Object.keys(Mn).forEach(function(Jt){Kn[Mn[Jt]]=Jt});var mr=[];Object.keys(wn).forEach(function(Jt){mr[wn[Jt]]=Jt});var en=[];Object.keys(Cn).forEach(function(Jt){en[Cn[Jt]]=Jt});var rn=[];Object.keys(bn).forEach(function(Jt){rn[bn[Jt]]=Jt});var En=Yn.reduce(function(Jt,vn){var Lt=jn[vn];return Lt===6409||Lt===6406||Lt===6409||Lt===6410||Lt===6402||Lt===34041||Ye.ext_srgb&&(Lt===35904||Lt===35906)?Jt[Lt]=Lt:Lt===32855||0<=vn.indexOf("rgba")?Jt[Lt]=6408:Jt[Lt]=6407,Jt},{}),gn=[],Dn=[],qn=0,Vn={},Jn=ot.maxTextureUnits,xr=Array(Jn).map(function(){return null});return X(mn.prototype,{bind:function(){this.bindCount+=1;var Jt=this.unit;if(0>Jt){for(var vn=0;vn<Jn;++vn){var Lt=xr[vn];if(Lt){if(0<Lt.bindCount)continue;Lt.unit=-1}xr[vn]=this,Jt=vn;break}rt.profile&&Fe.maxTextureUnits<Jt+1&&(Fe.maxTextureUnits=Jt+1),this.unit=Jt,Ne.activeTexture(33984+Jt),Ne.bindTexture(this.target,this.texture)}return Jt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&nn(this)}}),rt.profile&&(Fe.getTotalTextureSize=function(){var Jt=0;return Object.keys(Vn).forEach(function(vn){Jt+=Vn[vn].stats.size}),Jt}),{create2D:function(Jt,vn){function Lt($t,fn){var dn=Nt.texInfo;jt.call(dn);var xn=Ht();return typeof $t=="number"?Ft(xn,0|$t,typeof fn=="number"?0|fn:0|$t):$t?(Pn(dn,$t),Xt(xn,$t)):Ft(xn,1,1),dn.genMipmaps&&(xn.mipmask=(xn.width<<1)-1),Nt.mipmask=xn.mipmask,ft(Nt,xn),Nt.internalformat=xn.internalformat,Lt.width=xn.width,Lt.height=xn.height,Qt(Nt),an(xn,3553),Tn(dn,3553),un(),Zt(xn),rt.profile&&(Nt.stats.size=h(Nt.internalformat,Nt.type,xn.width,xn.height,dn.genMipmaps,!1)),Lt.format=ar[Nt.internalformat],Lt.type=Kn[Nt.type],Lt.mag=mr[dn.magFilter],Lt.min=en[dn.minFilter],Lt.wrapS=rn[dn.wrapS],Lt.wrapT=rn[dn.wrapT],Lt}var Nt=new mn(3553);return Vn[Nt.id]=Nt,Fe.textureCount++,Lt(Jt,vn),Lt.subimage=function($t,fn,dn,xn){fn|=0,dn|=0,xn|=0;var sn=St();return ft(sn,Nt),sn.width=0,sn.height=0,Mt(sn,$t),sn.width=sn.width||(Nt.width>>xn)-fn,sn.height=sn.height||(Nt.height>>xn)-dn,Qt(Nt),bt(sn,3553,fn,dn,xn),un(),Pt(sn),Lt},Lt.resize=function($t,fn){var dn=0|$t,xn=0|fn||dn;if(dn===Nt.width&&xn===Nt.height)return Lt;Lt.width=Nt.width=dn,Lt.height=Nt.height=xn,Qt(Nt);for(var sn=0;Nt.mipmask>>sn;++sn){var Yt=dn>>sn,Wt=xn>>sn;if(!Yt||!Wt)break;Ne.texImage2D(3553,sn,Nt.format,Yt,Wt,0,Nt.format,Nt.type,null)}return un(),rt.profile&&(Nt.stats.size=h(Nt.internalformat,Nt.type,dn,xn,!1,!1)),Lt},Lt._reglType="texture2d",Lt._texture=Nt,rt.profile&&(Lt.stats=Nt.stats),Lt.destroy=function(){Nt.decRef()},Lt},createCube:function(Jt,vn,Lt,Nt,$t,fn){function dn(Yt,Wt,tn,ln,An,In){var zn,Un=xn.texInfo;for(jt.call(Un),zn=0;6>zn;++zn)sn[zn]=Ht();if(typeof Yt!="number"&&Yt){if(typeof Yt=="object")if(Wt)Xt(sn[0],Yt),Xt(sn[1],Wt),Xt(sn[2],tn),Xt(sn[3],ln),Xt(sn[4],An),Xt(sn[5],In);else if(Pn(Un,Yt),mt(xn,Yt),"faces"in Yt)for(Yt=Yt.faces,zn=0;6>zn;++zn)ft(sn[zn],xn),Xt(sn[zn],Yt[zn]);else for(zn=0;6>zn;++zn)Xt(sn[zn],Yt)}else for(Yt=0|Yt||1,zn=0;6>zn;++zn)Ft(sn[zn],Yt,Yt);for(ft(xn,sn[0]),xn.mipmask=Un.genMipmaps?(sn[0].width<<1)-1:sn[0].mipmask,xn.internalformat=sn[0].internalformat,dn.width=sn[0].width,dn.height=sn[0].height,Qt(xn),zn=0;6>zn;++zn)an(sn[zn],34069+zn);for(Tn(Un,34067),un(),rt.profile&&(xn.stats.size=h(xn.internalformat,xn.type,dn.width,dn.height,Un.genMipmaps,!0)),dn.format=ar[xn.internalformat],dn.type=Kn[xn.type],dn.mag=mr[Un.magFilter],dn.min=en[Un.minFilter],dn.wrapS=rn[Un.wrapS],dn.wrapT=rn[Un.wrapT],zn=0;6>zn;++zn)Zt(sn[zn]);return dn}var xn=new mn(34067);Vn[xn.id]=xn,Fe.cubeCount++;var sn=Array(6);return dn(Jt,vn,Lt,Nt,$t,fn),dn.subimage=function(Yt,Wt,tn,ln,An){tn|=0,ln|=0,An|=0;var In=St();return ft(In,xn),In.width=0,In.height=0,Mt(In,Wt),In.width=In.width||(xn.width>>An)-tn,In.height=In.height||(xn.height>>An)-ln,Qt(xn),bt(In,34069+Yt,tn,ln,An),un(),Pt(In),dn},dn.resize=function(Yt){if((Yt|=0)!==xn.width){dn.width=xn.width=Yt,dn.height=xn.height=Yt,Qt(xn);for(var Wt=0;6>Wt;++Wt)for(var tn=0;xn.mipmask>>tn;++tn)Ne.texImage2D(34069+Wt,tn,xn.format,Yt>>tn,Yt>>tn,0,xn.format,xn.type,null);return un(),rt.profile&&(xn.stats.size=h(xn.internalformat,xn.type,dn.width,dn.height,!1,!0)),dn}},dn._reglType="textureCube",dn._texture=xn,rt.profile&&(dn.stats=xn.stats),dn.destroy=function(){xn.decRef()},dn},clear:function(){for(var Jt=0;Jt<Jn;++Jt)Ne.activeTexture(33984+Jt),Ne.bindTexture(3553,null),xr[Jt]=null;de(Vn).forEach(nn),Fe.cubeCount=0,Fe.textureCount=0},getTexture:function(Jt){return null},restore:function(){for(var Jt=0;Jt<Jn;++Jt){var vn=xr[Jt];vn&&(vn.bindCount=0,vn.unit=-1,xr[Jt]=null)}de(Vn).forEach(function(Lt){Lt.texture=Ne.createTexture(),Ne.bindTexture(Lt.target,Lt.texture);for(var Nt=0;32>Nt;++Nt)if(Lt.mipmask&1<<Nt)if(Lt.target===3553)Ne.texImage2D(3553,Nt,Lt.internalformat,Lt.width>>Nt,Lt.height>>Nt,0,Lt.internalformat,Lt.type,null);else for(var $t=0;6>$t;++$t)Ne.texImage2D(34069+$t,Nt,Lt.internalformat,Lt.width>>Nt,Lt.height>>Nt,0,Lt.internalformat,Lt.type,null);Tn(Lt.texInfo,Lt.target)})},refresh:function(){for(var Jt=0;Jt<Jn;++Jt){var vn=xr[Jt];vn&&(vn.bindCount=0,vn.unit=-1,xr[Jt]=null),Ne.activeTexture(33984+Jt),Ne.bindTexture(3553,null),Ne.bindTexture(34067,null)}}}}function A(Ne,Ye,ot,nt,ze,Fe){function rt(mn,Qt,un){this.target=mn,this.texture=Qt,this.renderbuffer=un;var nn=mn=0;Qt?(mn=Qt.width,nn=Qt.height):un&&(mn=un.width,nn=un.height),this.width=mn,this.height=nn}function We(mn){mn&&(mn.texture&&mn.texture._texture.decRef(),mn.renderbuffer&&mn.renderbuffer._renderbuffer.decRef())}function ft(mn,Qt,un){mn&&(mn.texture?mn.texture._texture.refCount+=1:mn.renderbuffer._renderbuffer.refCount+=1)}function mt(mn,Qt){Qt&&(Qt.texture?Ne.framebufferTexture2D(36160,mn,Qt.target,Qt.texture._texture.texture,0):Ne.framebufferRenderbuffer(36160,mn,36161,Qt.renderbuffer._renderbuffer.renderbuffer))}function vt(mn){var Qt=3553,un=null,nn=null,hn=mn;return typeof mn=="object"&&(hn=mn.data,"target"in mn&&(Qt=0|mn.target)),(mn=hn._reglType)==="texture2d"||mn==="textureCube"?un=hn:mn==="renderbuffer"&&(nn=hn,Qt=36161),new rt(Qt,un,nn)}function ut(mn,Qt,un,nn,hn){return un?((mn=nt.create2D({width:mn,height:Qt,format:nn,type:hn}))._texture.refCount=0,new rt(3553,mn,null)):((mn=ze.create({width:mn,height:Qt,format:nn}))._renderbuffer.refCount=0,new rt(36161,null,mn))}function Mt(mn){return mn&&(mn.texture||mn.renderbuffer)}function bt(mn,Qt,un){mn&&(mn.texture?mn.texture.resize(Qt,un):mn.renderbuffer&&mn.renderbuffer.resize(Qt,un),mn.width=Qt,mn.height=un)}function St(){this.id=Pn++,Tn[this.id]=this,this.framebuffer=Ne.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Pt(mn){mn.colorAttachments.forEach(We),We(mn.depthAttachment),We(mn.stencilAttachment),We(mn.depthStencilAttachment)}function Dt(mn){Ne.deleteFramebuffer(mn.framebuffer),mn.framebuffer=null,Fe.framebufferCount--,delete Tn[mn.id]}function Ft(mn){var Qt;Ne.bindFramebuffer(36160,mn.framebuffer);var un=mn.colorAttachments;for(Qt=0;Qt<un.length;++Qt)mt(36064+Qt,un[Qt]);for(Qt=un.length;Qt<ot.maxColorAttachments;++Qt)Ne.framebufferTexture2D(36160,36064+Qt,3553,null,0);Ne.framebufferTexture2D(36160,33306,3553,null,0),Ne.framebufferTexture2D(36160,36096,3553,null,0),Ne.framebufferTexture2D(36160,36128,3553,null,0),mt(36096,mn.depthAttachment),mt(36128,mn.stencilAttachment),mt(33306,mn.depthStencilAttachment),Ne.checkFramebufferStatus(36160),Ne.isContextLost(),Ne.bindFramebuffer(36160,an.next?an.next.framebuffer:null),an.cur=an.next,Ne.getError()}function Xt(mn,Qt){function un(hn,bn){var wn,Cn=0,Ln=0,Mn=!0,jn=!0;wn=null;var Rn=!0,Qn="rgba",Yn="uint8",ar=1,Kn=null,mr=null,en=null,rn=!1;typeof hn=="number"?(Cn=0|hn,Ln=0|bn||Cn):hn?("shape"in hn?(Cn=(Ln=hn.shape)[0],Ln=Ln[1]):("radius"in hn&&(Cn=Ln=hn.radius),"width"in hn&&(Cn=hn.width),"height"in hn&&(Ln=hn.height)),("color"in hn||"colors"in hn)&&(wn=hn.color||hn.colors,Array.isArray(wn)),wn||("colorCount"in hn&&(ar=0|hn.colorCount),"colorTexture"in hn&&(Rn=!!hn.colorTexture,Qn="rgba4"),"colorType"in hn&&(Yn=hn.colorType,!Rn)&&(Yn==="half float"||Yn==="float16"?Qn="rgba16f":Yn!=="float"&&Yn!=="float32"||(Qn="rgba32f")),"colorFormat"in hn&&(Qn=hn.colorFormat,0<=Ht.indexOf(Qn)?Rn=!0:0<=Zt.indexOf(Qn)&&(Rn=!1))),("depthTexture"in hn||"depthStencilTexture"in hn)&&(rn=!(!hn.depthTexture&&!hn.depthStencilTexture)),"depth"in hn&&(typeof hn.depth=="boolean"?Mn=hn.depth:(Kn=hn.depth,jn=!1)),"stencil"in hn&&(typeof hn.stencil=="boolean"?jn=hn.stencil:(mr=hn.stencil,Mn=!1)),"depthStencil"in hn&&(typeof hn.depthStencil=="boolean"?Mn=jn=hn.depthStencil:(en=hn.depthStencil,jn=Mn=!1))):Cn=Ln=1;var En=null,gn=null,Dn=null,qn=null;if(Array.isArray(wn))En=wn.map(vt);else if(wn)En=[vt(wn)];else for(En=Array(ar),wn=0;wn<ar;++wn)En[wn]=ut(Cn,Ln,Rn,Qn,Yn);for(Cn=Cn||En[0].width,Ln=Ln||En[0].height,Kn?gn=vt(Kn):Mn&&!jn&&(gn=ut(Cn,Ln,rn,"depth","uint32")),mr?Dn=vt(mr):jn&&!Mn&&(Dn=ut(Cn,Ln,!1,"stencil","uint8")),en?qn=vt(en):!Kn&&!mr&&jn&&Mn&&(qn=ut(Cn,Ln,rn,"depth stencil","depth stencil")),Mn=null,wn=0;wn<En.length;++wn)ft(En[wn]),En[wn]&&En[wn].texture&&(jn=yt[En[wn].texture._texture.format]*pt[En[wn].texture._texture.type],Mn===null&&(Mn=jn));return ft(gn),ft(Dn),ft(qn),Pt(nn),nn.width=Cn,nn.height=Ln,nn.colorAttachments=En,nn.depthAttachment=gn,nn.stencilAttachment=Dn,nn.depthStencilAttachment=qn,un.color=En.map(Mt),un.depth=Mt(gn),un.stencil=Mt(Dn),un.depthStencil=Mt(qn),un.width=nn.width,un.height=nn.height,Ft(nn),un}var nn=new St;return Fe.framebufferCount++,un(mn,Qt),X(un,{resize:function(hn,bn){var wn=Math.max(0|hn,1),Cn=Math.max(0|bn||wn,1);if(wn===nn.width&&Cn===nn.height)return un;for(var Ln=nn.colorAttachments,Mn=0;Mn<Ln.length;++Mn)bt(Ln[Mn],wn,Cn);return bt(nn.depthAttachment,wn,Cn),bt(nn.stencilAttachment,wn,Cn),bt(nn.depthStencilAttachment,wn,Cn),nn.width=un.width=wn,nn.height=un.height=Cn,Ft(nn),un},_reglType:"framebuffer",_framebuffer:nn,destroy:function(){Dt(nn),Pt(nn)},use:function(hn){an.setFBO({framebuffer:un},hn)}})}var an={cur:null,next:null,dirty:!1,setFBO:null},Ht=["rgba"],Zt=["rgba4","rgb565","rgb5 a1"];Ye.ext_srgb&&Zt.push("srgba"),Ye.ext_color_buffer_half_float&&Zt.push("rgba16f","rgb16f"),Ye.webgl_color_buffer_float&&Zt.push("rgba32f");var jt=["uint8"];Ye.oes_texture_half_float&&jt.push("half float","float16"),Ye.oes_texture_float&&jt.push("float","float32");var Pn=0,Tn={};return X(an,{getFramebuffer:function(mn){return typeof mn=="function"&&mn._reglType==="framebuffer"&&(mn=mn._framebuffer)instanceof St?mn:null},create:Xt,createCube:function(mn){function Qt(nn){var hn,bn={color:null},wn=0,Cn=null;hn="rgba";var Ln="uint8",Mn=1;if(typeof nn=="number"?wn=0|nn:nn?("shape"in nn?wn=nn.shape[0]:("radius"in nn&&(wn=0|nn.radius),"width"in nn?wn=0|nn.width:"height"in nn&&(wn=0|nn.height)),("color"in nn||"colors"in nn)&&(Cn=nn.color||nn.colors,Array.isArray(Cn)),Cn||("colorCount"in nn&&(Mn=0|nn.colorCount),"colorType"in nn&&(Ln=nn.colorType),"colorFormat"in nn&&(hn=nn.colorFormat)),"depth"in nn&&(bn.depth=nn.depth),"stencil"in nn&&(bn.stencil=nn.stencil),"depthStencil"in nn&&(bn.depthStencil=nn.depthStencil)):wn=1,Cn)if(Array.isArray(Cn))for(nn=[],hn=0;hn<Cn.length;++hn)nn[hn]=Cn[hn];else nn=[Cn];else for(nn=Array(Mn),Cn={radius:wn,format:hn,type:Ln},hn=0;hn<Mn;++hn)nn[hn]=nt.createCube(Cn);for(bn.color=Array(nn.length),hn=0;hn<nn.length;++hn)Mn=nn[hn],wn=wn||Mn.width,bn.color[hn]={target:34069,data:nn[hn]};for(hn=0;6>hn;++hn){for(Mn=0;Mn<nn.length;++Mn)bn.color[Mn].target=34069+hn;0<hn&&(bn.depth=un[0].depth,bn.stencil=un[0].stencil,bn.depthStencil=un[0].depthStencil),un[hn]?un[hn](bn):un[hn]=Xt(bn)}return X(Qt,{width:wn,height:wn,color:nn})}var un=Array(6);return Qt(mn),X(Qt,{faces:un,resize:function(nn){var hn=0|nn;if(hn===Qt.width)return Qt;var bn=Qt.color;for(nn=0;nn<bn.length;++nn)bn[nn].resize(hn);for(nn=0;6>nn;++nn)un[nn].resize(hn);return Qt.width=Qt.height=hn,Qt},_reglType:"framebufferCube",destroy:function(){un.forEach(function(nn){nn.destroy()})}})},clear:function(){de(Tn).forEach(Dt)},restore:function(){an.cur=null,an.next=null,an.dirty=!0,de(Tn).forEach(function(mn){mn.framebuffer=Ne.createFramebuffer(),Ft(mn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(Ne,Ye,ot,nt,ze,Fe,rt){function We(){this.id=++vt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var bt=Ye.oes_vertex_array_object;this.vao=bt?bt.createVertexArrayOES():null,ut[this.id]=this,this.buffers=[]}var ft=ot.maxAttributes,mt=Array(ft);for(ot=0;ot<ft;++ot)mt[ot]=new E;var vt=0,ut={},Mt={Record:E,scope:{},state:mt,currentVAO:null,targetVAO:null,restore:Ye.oes_vertex_array_object?function(){Ye.oes_vertex_array_object&&de(ut).forEach(function(bt){bt.refresh()})}:function(){},createVAO:function(bt){function St(Dt){var Ft;Array.isArray(Dt)?(Ft=Dt,Pt.elements&&Pt.ownsElements&&Pt.elements.destroy(),Pt.elements=null,Pt.ownsElements=!1,Pt.offset=0,Pt.count=0,Pt.instances=-1,Pt.primitive=4):(Dt.elements?(Ft=Dt.elements,Pt.ownsElements?(typeof Ft=="function"&&Ft._reglType==="elements"?Pt.elements.destroy():Pt.elements(Ft),Pt.ownsElements=!1):Fe.getElements(Dt.elements)?(Pt.elements=Dt.elements,Pt.ownsElements=!1):(Pt.elements=Fe.create(Dt.elements),Pt.ownsElements=!0)):(Pt.elements=null,Pt.ownsElements=!1),Ft=Dt.attributes,Pt.offset=0,Pt.count=-1,Pt.instances=-1,Pt.primitive=4,Pt.elements&&(Pt.count=Pt.elements._elements.vertCount,Pt.primitive=Pt.elements._elements.primType),"offset"in Dt&&(Pt.offset=0|Dt.offset),"count"in Dt&&(Pt.count=0|Dt.count),"instances"in Dt&&(Pt.instances=0|Dt.instances),"primitive"in Dt&&(Pt.primitive=Se[Dt.primitive])),Dt={};var Xt=Pt.attributes;Xt.length=Ft.length;for(var an=0;an<Ft.length;++an){var Ht,Zt=Ft[an],jt=Xt[an]=new E,Pn=Zt.data||Zt;Array.isArray(Pn)||pe(Pn)||t(Pn)?(Pt.buffers[an]&&(Ht=Pt.buffers[an],pe(Pn)&&Ht._buffer.byteLength>=Pn.byteLength?Ht.subdata(Pn):(Ht.destroy(),Pt.buffers[an]=null)),Pt.buffers[an]||(Ht=Pt.buffers[an]=ze.create(Zt,34962,!1,!0)),jt.buffer=ze.getBuffer(Ht),jt.size=0|jt.buffer.dimension,jt.normalized=!1,jt.type=jt.buffer.dtype,jt.offset=0,jt.stride=0,jt.divisor=0,jt.state=1,Dt[an]=1):ze.getBuffer(Zt)?(jt.buffer=ze.getBuffer(Zt),jt.size=0|jt.buffer.dimension,jt.normalized=!1,jt.type=jt.buffer.dtype,jt.offset=0,jt.stride=0,jt.divisor=0,jt.state=1):ze.getBuffer(Zt.buffer)?(jt.buffer=ze.getBuffer(Zt.buffer),jt.size=0|(+Zt.size||jt.buffer.dimension),jt.normalized=!!Zt.normalized||!1,jt.type="type"in Zt?Ce[Zt.type]:jt.buffer.dtype,jt.offset=0|(Zt.offset||0),jt.stride=0|(Zt.stride||0),jt.divisor=0|(Zt.divisor||0),jt.state=1):"x"in Zt&&(jt.x=+Zt.x||0,jt.y=+Zt.y||0,jt.z=+Zt.z||0,jt.w=+Zt.w||0,jt.state=2)}for(Ht=0;Ht<Pt.buffers.length;++Ht)!Dt[Ht]&&Pt.buffers[Ht]&&(Pt.buffers[Ht].destroy(),Pt.buffers[Ht]=null);return Pt.refresh(),St}var Pt=new We;return nt.vaoCount+=1,St.destroy=function(){for(var Dt=0;Dt<Pt.buffers.length;++Dt)Pt.buffers[Dt]&&Pt.buffers[Dt].destroy();Pt.buffers.length=0,Pt.ownsElements&&(Pt.elements.destroy(),Pt.elements=null,Pt.ownsElements=!1),Pt.destroy()},St._vao=Pt,St._reglType="vao",St(bt)},getVAO:function(bt){return typeof bt=="function"&&bt._vao?bt._vao:null},destroyBuffer:function(bt){for(var St=0;St<mt.length;++St){var Pt=mt[St];Pt.buffer===bt&&(Ne.disableVertexAttribArray(St),Pt.buffer=null)}},setVAO:Ye.oes_vertex_array_object?function(bt){if(bt!==Mt.currentVAO){var St=Ye.oes_vertex_array_object;bt?St.bindVertexArrayOES(bt.vao):St.bindVertexArrayOES(null),Mt.currentVAO=bt}}:function(bt){if(bt!==Mt.currentVAO){if(bt)bt.bindAttrs();else{for(var St=Ye.angle_instanced_arrays,Pt=0;Pt<mt.length;++Pt){var Dt=mt[Pt];Dt.buffer?(Ne.enableVertexAttribArray(Pt),Dt.buffer.bind(),Ne.vertexAttribPointer(Pt,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offfset),St&&Dt.divisor&&St.vertexAttribDivisorANGLE(Pt,Dt.divisor)):(Ne.disableVertexAttribArray(Pt),Ne.vertexAttrib4f(Pt,Dt.x,Dt.y,Dt.z,Dt.w))}rt.elements?Ne.bindBuffer(34963,rt.elements.buffer.buffer):Ne.bindBuffer(34963,null)}Mt.currentVAO=bt}},clear:Ye.oes_vertex_array_object?function(){de(ut).forEach(function(bt){bt.destroy()})}:function(){}};return We.prototype.bindAttrs=function(){for(var bt=Ye.angle_instanced_arrays,St=this.attributes,Pt=0;Pt<St.length;++Pt){var Dt=St[Pt];Dt.buffer?(Ne.enableVertexAttribArray(Pt),Ne.bindBuffer(34962,Dt.buffer.buffer),Ne.vertexAttribPointer(Pt,Dt.size,Dt.type,Dt.normalized,Dt.stride,Dt.offset),bt&&Dt.divisor&&bt.vertexAttribDivisorANGLE(Pt,Dt.divisor)):(Ne.disableVertexAttribArray(Pt),Ne.vertexAttrib4f(Pt,Dt.x,Dt.y,Dt.z,Dt.w))}for(bt=St.length;bt<ft;++bt)Ne.disableVertexAttribArray(bt);(bt=Fe.getElements(this.elements))?Ne.bindBuffer(34963,bt.buffer.buffer):Ne.bindBuffer(34963,null)},We.prototype.refresh=function(){var bt=Ye.oes_vertex_array_object;bt&&(bt.bindVertexArrayOES(this.vao),this.bindAttrs(),Mt.currentVAO=null,bt.bindVertexArrayOES(null))},We.prototype.destroy=function(){if(this.vao){var bt=Ye.oes_vertex_array_object;this===Mt.currentVAO&&(Mt.currentVAO=null,bt.bindVertexArrayOES(null)),bt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ut[this.id]&&(delete ut[this.id],--nt.vaoCount)},Mt}function I(Ne,Ye,ot,nt){function ze(St,Pt,Dt,Ft){this.name=St,this.id=Pt,this.location=Dt,this.info=Ft}function Fe(St,Pt){for(var Dt=0;Dt<St.length;++Dt)if(St[Dt].id===Pt.id)return void(St[Dt].location=Pt.location);St.push(Pt)}function rt(St,Pt,Dt){if(!(Xt=(Dt=St===35632?mt:vt)[Pt])){var Ft=Ye.str(Pt),Xt=Ne.createShader(St);Ne.shaderSource(Xt,Ft),Ne.compileShader(Xt),Dt[Pt]=Xt}return Xt}function We(St,Pt){this.id=bt++,this.fragId=St,this.vertId=Pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,nt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ft(St,Pt,Dt){var Ft;Ft=rt(35632,St.fragId);var Xt=rt(35633,St.vertId);if(Pt=St.program=Ne.createProgram(),Ne.attachShader(Pt,Ft),Ne.attachShader(Pt,Xt),Dt)for(Ft=0;Ft<Dt.length;++Ft)Xt=Dt[Ft],Ne.bindAttribLocation(Pt,Xt[0],Xt[1]);Ne.linkProgram(Pt),Xt=Ne.getProgramParameter(Pt,35718),nt.profile&&(St.stats.uniformsCount=Xt);var an=St.uniforms;for(Ft=0;Ft<Xt;++Ft)if(Dt=Ne.getActiveUniform(Pt,Ft))if(1<Dt.size)for(var Ht=0;Ht<Dt.size;++Ht){var Zt=Dt.name.replace("[0]","["+Ht+"]");Fe(an,new ze(Zt,Ye.id(Zt),Ne.getUniformLocation(Pt,Zt),Dt))}else Fe(an,new ze(Dt.name,Ye.id(Dt.name),Ne.getUniformLocation(Pt,Dt.name),Dt));for(Xt=Ne.getProgramParameter(Pt,35721),nt.profile&&(St.stats.attributesCount=Xt),St=St.attributes,Ft=0;Ft<Xt;++Ft)(Dt=Ne.getActiveAttrib(Pt,Ft))&&Fe(St,new ze(Dt.name,Ye.id(Dt.name),Ne.getAttribLocation(Pt,Dt.name),Dt))}var mt={},vt={},ut={},Mt=[],bt=0;return nt.profile&&(ot.getMaxUniformsCount=function(){var St=0;return Mt.forEach(function(Pt){Pt.stats.uniformsCount>St&&(St=Pt.stats.uniformsCount)}),St},ot.getMaxAttributesCount=function(){var St=0;return Mt.forEach(function(Pt){Pt.stats.attributesCount>St&&(St=Pt.stats.attributesCount)}),St}),{clear:function(){var St=Ne.deleteShader.bind(Ne);de(mt).forEach(St),mt={},de(vt).forEach(St),vt={},Mt.forEach(function(Pt){Ne.deleteProgram(Pt.program)}),Mt.length=0,ut={},ot.shaderCount=0},program:function(St,Pt,Dt,Ft){var Xt=ut[Pt];Xt||(Xt=ut[Pt]={});var an=Xt[St];if(an&&(an.refCount++,!Ft))return an;var Ht=new We(Pt,St);return ot.shaderCount++,ft(Ht,Dt,Ft),an||(Xt[St]=Ht),Mt.push(Ht),X(Ht,{destroy:function(){if(Ht.refCount--,0>=Ht.refCount){Ne.deleteProgram(Ht.program);var Zt=Mt.indexOf(Ht);Mt.splice(Zt,1),ot.shaderCount--}0>=Xt[Ht.vertId].refCount&&(Ne.deleteShader(vt[Ht.vertId]),delete vt[Ht.vertId],delete ut[Ht.fragId][Ht.vertId]),Object.keys(ut[Ht.fragId]).length||(Ne.deleteShader(mt[Ht.fragId]),delete mt[Ht.fragId],delete ut[Ht.fragId])}})},restore:function(){mt={},vt={};for(var St=0;St<Mt.length;++St)ft(Mt[St],null,Mt[St].attributes.map(function(Pt){return[Pt.location,Pt.name]}))},shader:rt,frag:-1,vert:-1}}function D(Ne,Ye,ot,nt,ze,Fe,rt){function We(ft){var mt;mt=Ye.next===null?5121:Ye.next.colorAttachments[0].texture._texture.type;var vt=0,ut=0,Mt=nt.framebufferWidth,bt=nt.framebufferHeight,St=null;return pe(ft)?St=ft:ft&&(vt=0|ft.x,ut=0|ft.y,Mt=0|(ft.width||nt.framebufferWidth-vt),bt=0|(ft.height||nt.framebufferHeight-ut),St=ft.data||null),ot(),ft=Mt*bt*4,St||(mt===5121?St=new Uint8Array(ft):mt===5126&&(St=St||new Float32Array(ft))),Ne.pixelStorei(3333,4),Ne.readPixels(vt,ut,Mt,bt,6408,mt,St),St}return function(ft){return ft&&"framebuffer"in ft?function(mt){var vt;return Ye.setFBO({framebuffer:mt.framebuffer},function(){vt=We(mt)}),vt}(ft):We(ft)}}function z(Ne,Ye){return Ne>>>Ye|Ne<<32-Ye}function V(Ne,Ye){var ot=(65535&Ne)+(65535&Ye);return(Ne>>16)+(Ye>>16)+(ot>>16)<<16|65535&ot}function O(Ne){return Array.prototype.slice.call(Ne)}function j(Ne){return O(Ne).join("")}function Y(Ne){function Ye(){var vt=[],ut=[];return X(function(){vt.push.apply(vt,O(arguments))},{def:function(){var Mt="v"+ze++;return ut.push(Mt),0<arguments.length&&(vt.push(Mt,"="),vt.push.apply(vt,O(arguments)),vt.push(";")),Mt},toString:function(){return j([0<ut.length?"var "+ut.join(",")+";":"",j(vt)])}})}function ot(){function vt(Pt,Dt){Mt(Pt,Dt,"=",ut.def(Pt,Dt),";")}var ut=Ye(),Mt=Ye(),bt=ut.toString,St=Mt.toString;return X(function(){ut.apply(ut,O(arguments))},{def:ut.def,entry:ut,exit:Mt,save:vt,set:function(Pt,Dt,Ft){vt(Pt,Dt),ut(Pt,Dt,"=",Ft,";")},toString:function(){return bt()+St()}})}var nt=Ne&&Ne.cache,ze=0,Fe=[],rt=[],We=[],ft=Ye(),mt={};return{global:ft,link:function(vt,ut){var Mt=ut&&ut.stable;if(!Mt){for(var bt=0;bt<rt.length;++bt)if(rt[bt]===vt&&!We[bt])return Fe[bt]}return bt="g"+ze++,Fe.push(bt),rt.push(vt),We.push(Mt),bt},block:Ye,proc:function(vt,ut){function Mt(){var Dt="a"+bt.length;return bt.push(Dt),Dt}var bt=[];ut=ut||0;for(var St=0;St<ut;++St)Mt();var Pt=(St=ot()).toString;return mt[vt]=X(St,{arg:Mt,toString:function(){return j(["function(",bt.join(),"){",Pt(),"}"])}})},scope:ot,cond:function(){var vt=j(arguments),ut=ot(),Mt=ot(),bt=ut.toString,St=Mt.toString;return X(ut,{then:function(){return ut.apply(ut,O(arguments)),this},else:function(){return Mt.apply(Mt,O(arguments)),this},toString:function(){var Pt=St();return Pt&&(Pt="else{"+Pt+"}"),j(["if(",vt,"){",bt(),"}",Pt])}})},compile:function(){var vt=['"use strict";',ft,"return {"];Object.keys(mt).forEach(function(bt){vt.push('"',bt,'":',mt[bt].toString(),",")}),vt.push("}");var ut,Mt=j(vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return nt&&(ut=function(bt){for(var St,Pt="",Dt=0;Dt<bt.length;Dt++)St=bt.charCodeAt(Dt),Pt+="0123456789abcdef".charAt(St>>>4&15)+"0123456789abcdef".charAt(15&St);return Pt}(function(bt){for(var St=Array(bt.length>>2),Pt=0;Pt<St.length;Pt++)St[Pt]=0;for(Pt=0;Pt<8*bt.length;Pt+=8)St[Pt>>5]|=(255&bt.charCodeAt(Pt/8))<<24-Pt%32;var Dt,Ft,Xt,an,Ht,Zt,jt,Pn,Tn,mn,Qt,un=8*bt.length;for(bt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Pt=Array(64),St[un>>5]|=128<<24-un%32,St[15+(un+64>>9<<4)]=un,Pn=0;Pn<St.length;Pn+=16){for(un=bt[0],Dt=bt[1],Ft=bt[2],Xt=bt[3],an=bt[4],Ht=bt[5],Zt=bt[6],jt=bt[7],Tn=0;64>Tn;Tn++){var nn;16>Tn?Pt[Tn]=St[Tn+Pn]:(mn=Tn,Qt=V(Qt=z(Qt=Pt[Tn-2],17)^z(Qt,19)^Qt>>>10,Pt[Tn-7]),nn=z(nn=Pt[Tn-15],7)^z(nn,18)^nn>>>3,Pt[mn]=V(V(Qt,nn),Pt[Tn-16])),mn=V(V(V(V(jt,mn=z(mn=an,6)^z(mn,11)^z(mn,25)),an&Ht^~an&Zt),et[Tn]),Pt[Tn]),Qt=V(jt=z(jt=un,2)^z(jt,13)^z(jt,22),un&Dt^un&Ft^Dt&Ft),jt=Zt,Zt=Ht,Ht=an,an=V(Xt,mn),Xt=Ft,Ft=Dt,Dt=un,un=V(mn,Qt)}bt[0]=V(un,bt[0]),bt[1]=V(Dt,bt[1]),bt[2]=V(Ft,bt[2]),bt[3]=V(Xt,bt[3]),bt[4]=V(an,bt[4]),bt[5]=V(Ht,bt[5]),bt[6]=V(Zt,bt[6]),bt[7]=V(jt,bt[7])}for(St="",Pt=0;Pt<32*bt.length;Pt+=8)St+=String.fromCharCode(bt[Pt>>5]>>>24-Pt%32&255);return St}(function(bt){for(var St,Pt,Dt="",Ft=-1;++Ft<bt.length;)St=bt.charCodeAt(Ft),Pt=Ft+1<bt.length?bt.charCodeAt(Ft+1):0,55296<=St&&56319>=St&&56320<=Pt&&57343>=Pt&&(St=65536+((1023&St)<<10)+(1023&Pt),Ft++),127>=St?Dt+=String.fromCharCode(St):2047>=St?Dt+=String.fromCharCode(192|St>>>6&31,128|63&St):65535>=St?Dt+=String.fromCharCode(224|St>>>12&15,128|St>>>6&63,128|63&St):2097151>=St&&(Dt+=String.fromCharCode(240|St>>>18&7,128|St>>>12&63,128|St>>>6&63,128|63&St));return Dt}(Mt))),nt[ut])?nt[ut].apply(null,rt):(Mt=Function.apply(null,Fe.concat(Mt)),nt&&(nt[ut]=Mt),Mt.apply(null,rt))}}}function B(Ne){return Array.isArray(Ne)||pe(Ne)||t(Ne)}function U(Ne){return Ne.sort(function(Ye,ot){return Ye==="viewport"?-1:ot==="viewport"?1:Ye<ot?-1:1})}function q(Ne,Ye,ot,nt){this.thisDep=Ne,this.contextDep=Ye,this.propDep=ot,this.append=nt}function te(Ne){return Ne&&!(Ne.thisDep||Ne.contextDep||Ne.propDep)}function ee(Ne){return new q(!1,!1,!1,Ne)}function Q(Ne,Ye){var ot=Ne.type;if(ot===0)return new q(!0,1<=(ot=Ne.data.length),2<=ot,Ye);if(ot===4)return new q((ot=Ne.data).thisDep,ot.contextDep,ot.propDep,Ye);if(ot===5)return new q(!1,!1,!1,Ye);if(ot===6){for(var nt=ot=!1,ze=!1,Fe=0;Fe<Ne.data.length;++Fe){var rt=Ne.data[Fe];rt.type===1?ze=!0:rt.type===2?nt=!0:rt.type===3?ot=!0:rt.type===0?(ot=!0,1<=(rt=rt.data)&&(nt=!0),2<=rt&&(ze=!0)):rt.type===4&&(ot=ot||rt.data.thisDep,nt=nt||rt.data.contextDep,ze=ze||rt.data.propDep)}return new q(ot,nt,ze,Ye)}return new q(ot===3,ot===2,ot===1,Ye)}function J(Ne,Ye,ot,nt,ze,Fe,rt,We,ft,mt,vt,ut,Mt,bt,St,Pt){function Dt(Lt){return Lt.replace(".","_")}function Ft(Lt,Nt,$t){var fn=Dt(Lt);qn.push(Lt),Dn[fn]=gn[fn]=!!$t,Vn[fn]=Nt}function Xt(Lt,Nt,$t){var fn=Dt(Lt);qn.push(Lt),Array.isArray($t)?(gn[fn]=$t.slice(),Dn[fn]=$t.slice()):gn[fn]=Dn[fn]=$t,Jn[fn]=Nt}function an(){var Lt=Y({cache:St}),Nt=Lt.link,$t=Lt.global;Lt.id=vn++,Lt.batchId="0";var fn=Nt(xr),dn=Lt.shared={props:"a0"};Object.keys(xr).forEach(function(tn){dn[tn]=$t.def(fn,".",tn)});var xn=Lt.next={},sn=Lt.current={};Object.keys(Jn).forEach(function(tn){Array.isArray(gn[tn])&&(xn[tn]=$t.def(dn.next,".",tn),sn[tn]=$t.def(dn.current,".",tn))});var Yt=Lt.constants={};Object.keys(Jt).forEach(function(tn){Yt[tn]=$t.def(JSON.stringify(Jt[tn]))}),Lt.invoke=function(tn,ln){switch(ln.type){case 0:var An=["this",dn.context,dn.props,Lt.batchId];return tn.def(Nt(ln.data),".call(",An.slice(0,Math.max(ln.data.length+1,4)),")");case 1:return tn.def(dn.props,ln.data);case 2:return tn.def(dn.context,ln.data);case 3:return tn.def("this",ln.data);case 4:return ln.data.append(Lt,tn),ln.data.ref;case 5:return ln.data.toString();case 6:return ln.data.map(function(In){return Lt.invoke(tn,In)})}},Lt.attribCache={};var Wt={};return Lt.scopeAttrib=function(tn){if((tn=Ye.id(tn))in Wt)return Wt[tn];var ln=mt.scope[tn];return ln||(ln=mt.scope[tn]=new Kn),Wt[tn]=Nt(ln)},Lt}function Ht(Lt,Nt){var $t=Lt.static,fn=Lt.dynamic;if("framebuffer"in $t){var dn=$t.framebuffer;return dn?(dn=We.getFramebuffer(dn),ee(function(sn,Yt){var Wt=sn.link(dn),tn=sn.shared;return Yt.set(tn.framebuffer,".next",Wt),tn=tn.context,Yt.set(tn,".framebufferWidth",Wt+".width"),Yt.set(tn,".framebufferHeight",Wt+".height"),Wt})):ee(function(sn,Yt){var Wt=sn.shared;return Yt.set(Wt.framebuffer,".next","null"),Wt=Wt.context,Yt.set(Wt,".framebufferWidth",Wt+".drawingBufferWidth"),Yt.set(Wt,".framebufferHeight",Wt+".drawingBufferHeight"),"null"})}if("framebuffer"in fn){var xn=fn.framebuffer;return Q(xn,function(sn,Yt){var Wt=sn.invoke(Yt,xn),tn=sn.shared,ln=tn.framebuffer;return Wt=Yt.def(ln,".getFramebuffer(",Wt,")"),Yt.set(ln,".next",Wt),tn=tn.context,Yt.set(tn,".framebufferWidth",Wt+"?"+Wt+".width:"+tn+".drawingBufferWidth"),Yt.set(tn,".framebufferHeight",Wt+"?"+Wt+".height:"+tn+".drawingBufferHeight"),Wt})}return null}function Zt(Lt,Nt,$t){function fn(tn){if(tn in dn){var ln=Ye.id(dn[tn]);return(tn=ee(function(){return ln})).id=ln,tn}if(tn in xn){var An=xn[tn];return Q(An,function(In,zn){var Un=In.invoke(zn,An);return zn.def(In.shared.strings,".id(",Un,")")})}return null}var dn=Lt.static,xn=Lt.dynamic,sn=fn("frag"),Yt=fn("vert"),Wt=null;return te(sn)&&te(Yt)?(Wt=vt.program(Yt.id,sn.id,null,$t),Lt=ee(function(tn,ln){return tn.link(Wt)})):Lt=new q(sn&&sn.thisDep||Yt&&Yt.thisDep,sn&&sn.contextDep||Yt&&Yt.contextDep,sn&&sn.propDep||Yt&&Yt.propDep,function(tn,ln){var An,In,zn=tn.shared.shader;return An=sn?sn.append(tn,ln):ln.def(zn,".","frag"),In=Yt?Yt.append(tn,ln):ln.def(zn,".","vert"),ln.def(zn+".program("+In+","+An+")")}),{frag:sn,vert:Yt,progVar:Lt,program:Wt}}function jt(Lt,Nt){function $t(Un,rr){if(Un in fn){var Xn=0|fn[Un];return rr?xn.offset=Xn:xn.instances=Xn,ee(function(or,tr){return rr&&(or.OFFSET=Xn),Xn})}if(Un in dn){var er=dn[Un];return Q(er,function(or,tr){var gr=or.invoke(tr,er);return rr&&(or.OFFSET=gr),gr})}if(rr){if(Wt)return ee(function(or,tr){return or.OFFSET=0});if(sn)return new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(or,tr){return tr.def(or.shared.vao+".currentVAO?"+or.shared.vao+".currentVAO.offset:0")})}else if(sn)return new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(or,tr){return tr.def(or.shared.vao+".currentVAO?"+or.shared.vao+".currentVAO.instances:-1")});return null}var fn=Lt.static,dn=Lt.dynamic,xn={},sn=!1,Yt=function(){if("vao"in fn){var Un=fn.vao;return Un!==null&&mt.getVAO(Un)===null&&(Un=mt.createVAO(Un)),sn=!0,xn.vao=Un,ee(function(Xn){var er=mt.getVAO(Un);return er?Xn.link(er):"null"})}if("vao"in dn){sn=!0;var rr=dn.vao;return Q(rr,function(Xn,er){var or=Xn.invoke(er,rr);return er.def(Xn.shared.vao+".getVAO("+or+")")})}return null}(),Wt=!1,tn=function(){if("elements"in fn){var Un=fn.elements;if(xn.elements=Un,B(Un)){var rr=xn.elements=Fe.create(Un,!0);Un=Fe.getElements(rr),Wt=!0}else Un&&(Un=Fe.getElements(Un),Wt=!0);return rr=ee(function(er,or){if(Un){var tr=er.link(Un);return er.ELEMENTS=tr}return er.ELEMENTS=null}),rr.value=Un,rr}if("elements"in dn){Wt=!0;var Xn=dn.elements;return Q(Xn,function(er,or){var tr=(gr=er.shared).isBufferArgs,gr=gr.elements,Mr=er.invoke(or,Xn),br=or.def("null");return tr=or.def(tr,"(",Mr,")"),Mr=er.cond(tr).then(br,"=",gr,".createStream(",Mr,");").else(br,"=",gr,".getElements(",Mr,");"),or.entry(Mr),or.exit(er.cond(tr).then(gr,".destroyStream(",br,");")),er.ELEMENTS=br})}return sn?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(er,or){return or.def(er.shared.vao+".currentVAO?"+er.shared.elements+".getElements("+er.shared.vao+".currentVAO.elements):null")}):null}(),ln=$t("offset",!0),An=function(){if("primitive"in fn){var Un=fn.primitive;return xn.primitive=Un,ee(function(Xn,er){return Se[Un]})}if("primitive"in dn){var rr=dn.primitive;return Q(rr,function(Xn,er){var or=Xn.constants.primTypes,tr=Xn.invoke(er,rr);return er.def(or,"[",tr,"]")})}return Wt?te(tn)?tn.value?ee(function(Xn,er){return er.def(Xn.ELEMENTS,".primType")}):ee(function(){return 4}):new q(tn.thisDep,tn.contextDep,tn.propDep,function(Xn,er){var or=Xn.ELEMENTS;return er.def(or,"?",or,".primType:",4)}):sn?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(Xn,er){return er.def(Xn.shared.vao+".currentVAO?"+Xn.shared.vao+".currentVAO.primitive:4")}):null}(),In=function(){if("count"in fn){var Un=0|fn.count;return xn.count=Un,ee(function(){return Un})}if("count"in dn){var rr=dn.count;return Q(rr,function(Xn,er){return Xn.invoke(er,rr)})}return Wt?te(tn)?tn?ln?new q(ln.thisDep,ln.contextDep,ln.propDep,function(Xn,er){return er.def(Xn.ELEMENTS,".vertCount-",Xn.OFFSET)}):ee(function(Xn,er){return er.def(Xn.ELEMENTS,".vertCount")}):ee(function(){return-1}):new q(tn.thisDep||ln.thisDep,tn.contextDep||ln.contextDep,tn.propDep||ln.propDep,function(Xn,er){var or=Xn.ELEMENTS;return Xn.OFFSET?er.def(or,"?",or,".vertCount-",Xn.OFFSET,":-1"):er.def(or,"?",or,".vertCount:-1")}):sn?new q(Yt.thisDep,Yt.contextDep,Yt.propDep,function(Xn,er){return er.def(Xn.shared.vao,".currentVAO?",Xn.shared.vao,".currentVAO.count:-1")}):null}(),zn=$t("instances",!1);return{elements:tn,primitive:An,count:In,instances:zn,offset:ln,vao:Yt,vaoActive:sn,elementsActive:Wt,static:xn}}function Pn(Lt,Nt){var $t=Lt.static,fn=Lt.dynamic,dn={};return Object.keys($t).forEach(function(xn){var sn=$t[xn],Yt=Ye.id(xn),Wt=new Kn;if(B(sn))Wt.state=1,Wt.buffer=ze.getBuffer(ze.create(sn,34962,!1,!0)),Wt.type=0;else if(ln=ze.getBuffer(sn))Wt.state=1,Wt.buffer=ln,Wt.type=0;else if("constant"in sn){var tn=sn.constant;Wt.buffer="null",Wt.state=2,typeof tn=="number"?Wt.x=tn:$e.forEach(function(Xn,er){er<tn.length&&(Wt[Xn]=tn[er])})}else{var ln=B(sn.buffer)?ze.getBuffer(ze.create(sn.buffer,34962,!1,!0)):ze.getBuffer(sn.buffer),An=0|sn.offset,In=0|sn.stride,zn=0|sn.size,Un=!!sn.normalized,rr=0;"type"in sn&&(rr=Ce[sn.type]),sn=0|sn.divisor,Wt.buffer=ln,Wt.state=1,Wt.size=zn,Wt.normalized=Un,Wt.type=rr||ln.dtype,Wt.offset=An,Wt.stride=In,Wt.divisor=sn}dn[xn]=ee(function(Xn,er){var or=Xn.attribCache;if(Yt in or)return or[Yt];var tr={isStream:!1};return Object.keys(Wt).forEach(function(gr){tr[gr]=Wt[gr]}),Wt.buffer&&(tr.buffer=Xn.link(Wt.buffer),tr.type=tr.type||tr.buffer+".dtype"),or[Yt]=tr})}),Object.keys(fn).forEach(function(xn){var sn=fn[xn];dn[xn]=Q(sn,function(Yt,Wt){function tn(or){Wt(Un[or],"=",ln,".",or,"|0;")}var ln=Yt.invoke(Wt,sn),An=Yt.shared,In=Yt.constants,zn=An.isBufferArgs,Un=(An=An.buffer,{isStream:Wt.def(!1)}),rr=new Kn;rr.state=1,Object.keys(rr).forEach(function(or){Un[or]=Wt.def(""+rr[or])});var Xn=Un.buffer,er=Un.type;return Wt("if(",zn,"(",ln,")){",Un.isStream,"=true;",Xn,"=",An,".createStream(",34962,",",ln,");",er,"=",Xn,".dtype;","}else{",Xn,"=",An,".getBuffer(",ln,");","if(",Xn,"){",er,"=",Xn,".dtype;",'}else if("constant" in ',ln,"){",Un.state,"=",2,";","if(typeof "+ln+'.constant === "number"){',Un[$e[0]],"=",ln,".constant;",$e.slice(1).map(function(or){return Un[or]}).join("="),"=0;","}else{",$e.map(function(or,tr){return Un[or]+"="+ln+".constant.length>"+tr+"?"+ln+".constant["+tr+"]:0;"}).join(""),"}}else{","if(",zn,"(",ln,".buffer)){",Xn,"=",An,".createStream(",34962,",",ln,".buffer);","}else{",Xn,"=",An,".getBuffer(",ln,".buffer);","}",er,'="type" in ',ln,"?",In.glTypes,"[",ln,".type]:",Xn,".dtype;",Un.normalized,"=!!",ln,".normalized;"),tn("size"),tn("offset"),tn("stride"),tn("divisor"),Wt("}}"),Wt.exit("if(",Un.isStream,"){",An,".destroyStream(",Xn,");","}"),Un})}),dn}function Tn(Lt,Nt,$t,fn,dn){function xn(rr){var Xn=Yt[rr];Xn&&(tn[rr]=Xn)}var sn=function(rr,Xn){if(typeof(er=rr.static).frag=="string"&&typeof er.vert=="string"){if(0<Object.keys(Xn.dynamic).length)return null;var er=Xn.static,or=Object.keys(er);if(0<or.length&&typeof er[or[0]]=="number"){for(var tr=[],gr=0;gr<or.length;++gr)tr.push([0|er[or[gr]],or[gr]]);return tr}}return null}(Lt,Nt),Yt=function(rr,Xn,er){function or(br){if(br in tr){var cr=tr[br];br=!0;var wr,Pr,Hr=0|cr.x,Ai=0|cr.y;return"width"in cr?wr=0|cr.width:br=!1,"height"in cr?Pr=0|cr.height:br=!1,new q(!br&&Xn&&Xn.thisDep,!br&&Xn&&Xn.contextDep,!br&&Xn&&Xn.propDep,function(ia,Ti){var ji=ia.shared.context,Ba=wr;"width"in cr||(Ba=Ti.def(ji,".","framebufferWidth","-",Hr));var Gr=Pr;return"height"in cr||(Gr=Ti.def(ji,".","framebufferHeight","-",Ai)),[Hr,Ai,Ba,Gr]})}if(br in gr){var Mi=gr[br];return br=Q(Mi,function(ia,Ti){var ji=ia.invoke(Ti,Mi),Ba=ia.shared.context,Gr=Ti.def(ji,".x|0"),fa=Ti.def(ji,".y|0");return[Gr,fa,Ti.def('"width" in ',ji,"?",ji,".width|0:","(",Ba,".","framebufferWidth","-",Gr,")"),ji=Ti.def('"height" in ',ji,"?",ji,".height|0:","(",Ba,".","framebufferHeight","-",fa,")")]}),Xn&&(br.thisDep=br.thisDep||Xn.thisDep,br.contextDep=br.contextDep||Xn.contextDep,br.propDep=br.propDep||Xn.propDep),br}return Xn?new q(Xn.thisDep,Xn.contextDep,Xn.propDep,function(ia,Ti){var ji=ia.shared.context;return[0,0,Ti.def(ji,".","framebufferWidth"),Ti.def(ji,".","framebufferHeight")]}):null}var tr=rr.static,gr=rr.dynamic;if(rr=or("viewport")){var Mr=rr;rr=new q(rr.thisDep,rr.contextDep,rr.propDep,function(br,cr){var wr=Mr.append(br,cr),Pr=br.shared.context;return cr.set(Pr,".viewportWidth",wr[2]),cr.set(Pr,".viewportHeight",wr[3]),wr})}return{viewport:rr,scissor_box:or("scissor.box")}}(Lt,An=Ht(Lt)),Wt=jt(Lt),tn=function(rr,Xn){var er=rr.static,or=rr.dynamic,tr={};return qn.forEach(function(gr){function Mr(cr,wr){if(gr in er){var Pr=cr(er[gr]);tr[br]=ee(function(){return Pr})}else if(gr in or){var Hr=or[gr];tr[br]=Q(Hr,function(Ai,Mi){return wr(Ai,Mi,Ai.invoke(Mi,Hr))})}}var br=Dt(gr);switch(gr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Mr(function(cr){return cr},function(cr,wr,Pr){return Pr});case"depth.func":return Mr(function(cr){return Rt[cr]},function(cr,wr,Pr){return wr.def(cr.constants.compareFuncs,"[",Pr,"]")});case"depth.range":return Mr(function(cr){return cr},function(cr,wr,Pr){return[wr.def("+",Pr,"[0]"),wr=wr.def("+",Pr,"[1]")]});case"blend.func":return Mr(function(cr){return[Ot["srcRGB"in cr?cr.srcRGB:cr.src],Ot["dstRGB"in cr?cr.dstRGB:cr.dst],Ot["srcAlpha"in cr?cr.srcAlpha:cr.src],Ot["dstAlpha"in cr?cr.dstAlpha:cr.dst]]},function(cr,wr,Pr){function Hr(Ti,ji){return wr.def('"',Ti,ji,'" in ',Pr,"?",Pr,".",Ti,ji,":",Pr,".",Ti)}cr=cr.constants.blendFuncs;var Ai=Hr("src","RGB"),Mi=Hr("dst","RGB"),ia=(Ai=wr.def(cr,"[",Ai,"]"),wr.def(cr,"[",Hr("src","Alpha"),"]"));return[Ai,Mi=wr.def(cr,"[",Mi,"]"),ia,cr=wr.def(cr,"[",Hr("dst","Alpha"),"]")]});case"blend.equation":return Mr(function(cr){return typeof cr=="string"?[mr[cr],mr[cr]]:typeof cr=="object"?[mr[cr.rgb],mr[cr.alpha]]:void 0},function(cr,wr,Pr){var Hr=cr.constants.blendEquations,Ai=wr.def(),Mi=wr.def();return(cr=cr.cond("typeof ",Pr,'==="string"')).then(Ai,"=",Mi,"=",Hr,"[",Pr,"];"),cr.else(Ai,"=",Hr,"[",Pr,".rgb];",Mi,"=",Hr,"[",Pr,".alpha];"),wr(cr),[Ai,Mi]});case"blend.color":return Mr(function(cr){return b(4,function(wr){return+cr[wr]})},function(cr,wr,Pr){return b(4,function(Hr){return wr.def("+",Pr,"[",Hr,"]")})});case"stencil.mask":return Mr(function(cr){return 0|cr},function(cr,wr,Pr){return wr.def(Pr,"|0")});case"stencil.func":return Mr(function(cr){return[Rt[cr.cmp||"keep"],cr.ref||0,"mask"in cr?cr.mask:-1]},function(cr,wr,Pr){return[cr=wr.def('"cmp" in ',Pr,"?",cr.constants.compareFuncs,"[",Pr,".cmp]",":",7680),wr.def(Pr,".ref|0"),wr=wr.def('"mask" in ',Pr,"?",Pr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Mr(function(cr){return[gr==="stencil.opBack"?1029:1028,Ct[cr.fail||"keep"],Ct[cr.zfail||"keep"],Ct[cr.zpass||"keep"]]},function(cr,wr,Pr){function Hr(Mi){return wr.def('"',Mi,'" in ',Pr,"?",Ai,"[",Pr,".",Mi,"]:",7680)}var Ai=cr.constants.stencilOps;return[gr==="stencil.opBack"?1029:1028,Hr("fail"),Hr("zfail"),Hr("zpass")]});case"polygonOffset.offset":return Mr(function(cr){return[0|cr.factor,0|cr.units]},function(cr,wr,Pr){return[wr.def(Pr,".factor|0"),wr=wr.def(Pr,".units|0")]});case"cull.face":return Mr(function(cr){var wr=0;return cr==="front"?wr=1028:cr==="back"&&(wr=1029),wr},function(cr,wr,Pr){return wr.def(Pr,'==="front"?',1028,":",1029)});case"frontFace":return Mr(function(cr){return Ge[cr]},function(cr,wr,Pr){return wr.def(Pr+'==="cw"?2304:2305')});case"colorMask":return Mr(function(cr){return cr.map(function(wr){return!!wr})},function(cr,wr,Pr){return b(4,function(Hr){return"!!"+Pr+"["+Hr+"]"})});case"sample.coverage":return Mr(function(cr){return["value"in cr?cr.value:1,!!cr.invert]},function(cr,wr,Pr){return[wr.def('"value" in ',Pr,"?+",Pr,".value:1"),wr=wr.def("!!",Pr,".invert")]})}}),tr}(Lt),ln=Zt(Lt,0,sn);xn("viewport"),xn(Dt("scissor.box"));var An,In=0<Object.keys(tn).length;if((An={framebuffer:An,draw:Wt,shader:ln,state:tn,dirty:In,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(rr){var Xn,er=rr.static;if(rr=rr.dynamic,"profile"in er){var or=!!er.profile;(Xn=ee(function(gr,Mr){return or})).enable=or}else if("profile"in rr){var tr=rr.profile;Xn=Q(tr,function(gr,Mr){return gr.invoke(Mr,tr)})}return Xn}(Lt),An.uniforms=function(rr,Xn){var er=rr.static,or=rr.dynamic,tr={};return Object.keys(er).forEach(function(gr){var Mr,br=er[gr];if(typeof br=="number"||typeof br=="boolean")Mr=ee(function(){return br});else if(typeof br=="function"){var cr=br._reglType;cr==="texture2d"||cr==="textureCube"?Mr=ee(function(wr){return wr.link(br)}):cr!=="framebuffer"&&cr!=="framebufferCube"||(Mr=ee(function(wr){return wr.link(br.color[0])}))}else x(br)&&(Mr=ee(function(wr){return wr.global.def("[",b(br.length,function(Pr){return br[Pr]}),"]")}));Mr.value=br,tr[gr]=Mr}),Object.keys(or).forEach(function(gr){var Mr=or[gr];tr[gr]=Q(Mr,function(br,cr){return br.invoke(cr,Mr)})}),tr}($t),An.drawVAO=An.scopeVAO=Wt.vao,!An.drawVAO&&ln.program&&!sn&&ot.angle_instanced_arrays&&Wt.static.elements){var zn=!0;if(Lt=ln.program.attributes.map(function(rr){return rr=Nt.static[rr],zn=zn&&!!rr,rr}),zn&&0<Lt.length){var Un=mt.getVAO(mt.createVAO({attributes:Lt,elements:Wt.static.elements}));An.drawVAO=new q(null,null,null,function(rr,Xn){return rr.link(Un)}),An.useVAO=!0}}return sn?An.useVAO=!0:An.attributes=Pn(Nt),An.context=function(rr){var Xn=rr.static,er=rr.dynamic,or={};return Object.keys(Xn).forEach(function(tr){var gr=Xn[tr];or[tr]=ee(function(Mr,br){return typeof gr=="number"||typeof gr=="boolean"?""+gr:Mr.link(gr)})}),Object.keys(er).forEach(function(tr){var gr=er[tr];or[tr]=Q(gr,function(Mr,br){return Mr.invoke(br,gr)})}),or}(fn),An}function mn(Lt,Nt,$t){var fn=Lt.shared.context,dn=Lt.scope();Object.keys($t).forEach(function(xn){Nt.save(fn,"."+xn);var sn=$t[xn].append(Lt,Nt);Array.isArray(sn)?dn(fn,".",xn,"=[",sn.join(),"];"):dn(fn,".",xn,"=",sn,";")}),Nt(dn)}function Qt(Lt,Nt,$t,fn){var dn,xn=(Yt=Lt.shared).gl,sn=Yt.framebuffer;rn&&(dn=Nt.def(Yt.extensions,".webgl_draw_buffers"));var Yt=(Wt=Lt.constants).drawBuffer,Wt=Wt.backBuffer;Lt=$t?$t.append(Lt,Nt):Nt.def(sn,".next"),fn||Nt("if(",Lt,"!==",sn,".cur){"),Nt("if(",Lt,"){",xn,".bindFramebuffer(",36160,",",Lt,".framebuffer);"),rn&&Nt(dn,".drawBuffersWEBGL(",Yt,"[",Lt,".colorAttachments.length]);"),Nt("}else{",xn,".bindFramebuffer(",36160,",null);"),rn&&Nt(dn,".drawBuffersWEBGL(",Wt,");"),Nt("}",sn,".cur=",Lt,";"),fn||Nt("}")}function un(Lt,Nt,$t){var fn=Lt.shared,dn=fn.gl,xn=Lt.current,sn=Lt.next,Yt=fn.current,Wt=fn.next,tn=Lt.cond(Yt,".dirty");qn.forEach(function(ln){var An,In;if(!((ln=Dt(ln))in $t.state))if(ln in sn){An=sn[ln],In=xn[ln];var zn=b(gn[ln].length,function(Un){return tn.def(An,"[",Un,"]")});tn(Lt.cond(zn.map(function(Un,rr){return Un+"!=="+In+"["+rr+"]"}).join("||")).then(dn,".",Jn[ln],"(",zn,");",zn.map(function(Un,rr){return In+"["+rr+"]="+Un}).join(";"),";"))}else An=tn.def(Wt,".",ln),zn=Lt.cond(An,"!==",Yt,".",ln),tn(zn),ln in Vn?zn(Lt.cond(An).then(dn,".enable(",Vn[ln],");").else(dn,".disable(",Vn[ln],");"),Yt,".",ln,"=",An,";"):zn(dn,".",Jn[ln],"(",An,");",Yt,".",ln,"=",An,";")}),Object.keys($t.state).length===0&&tn(Yt,".dirty=false;"),Nt(tn)}function nn(Lt,Nt,$t,fn){var dn,xn=Lt.shared,sn=Lt.current,Yt=xn.current,Wt=xn.gl;U(Object.keys($t)).forEach(function(tn){var ln=$t[tn];if(!fn||fn(ln)){var An=ln.append(Lt,Nt);if(Vn[tn]){var In=Vn[tn];te(ln)?(dn=Lt.link(An,{stable:!0}),Nt(Lt.cond(dn).then(Wt,".enable(",In,");").else(Wt,".disable(",In,");")),Nt(Yt,".",tn,"=",dn,";")):(Nt(Lt.cond(An).then(Wt,".enable(",In,");").else(Wt,".disable(",In,");")),Nt(Yt,".",tn,"=",An,";"))}else if(x(An)){var zn=sn[tn];Nt(Wt,".",Jn[tn],"(",An,");",An.map(function(Un,rr){return zn+"["+rr+"]="+Un}).join(";"),";")}else te(ln)?(dn=Lt.link(An,{stable:!0}),Nt(Wt,".",Jn[tn],"(",dn,");",Yt,".",tn,"=",dn,";")):Nt(Wt,".",Jn[tn],"(",An,");",Yt,".",tn,"=",An,";")}})}function hn(Lt,Nt){en&&(Lt.instancing=Nt.def(Lt.shared.extensions,".angle_instanced_arrays"))}function bn(Lt,Nt,$t,fn,dn){function xn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function sn(rr){rr(tn=Nt.def(),"=",xn(),";"),typeof dn=="string"?rr(In,".count+=",dn,";"):rr(In,".count++;"),bt&&(fn?rr(ln=Nt.def(),"=",Un,".getNumPendingQueries();"):rr(Un,".beginQuery(",In,");"))}function Yt(rr){rr(In,".cpuTime+=",xn(),"-",tn,";"),bt&&(fn?rr(Un,".pushScopeStats(",ln,",",Un,".getNumPendingQueries(),",In,");"):rr(Un,".endQuery();"))}function Wt(rr){var Xn=Nt.def(zn,".profile");Nt(zn,".profile=",rr,";"),Nt.exit(zn,".profile=",Xn,";")}var tn,ln,An=Lt.shared,In=Lt.stats,zn=An.current,Un=An.timer;if($t=$t.profile){if(te($t))return void($t.enable?(sn(Nt),Yt(Nt.exit),Wt("true")):Wt("false"));Wt($t=$t.append(Lt,Nt))}else $t=Nt.def(zn,".profile");sn(An=Lt.block()),Nt("if(",$t,"){",An,"}"),Yt(Lt=Lt.block()),Nt.exit("if(",$t,"){",Lt,"}")}function wn(Lt,Nt,$t,fn,dn){function xn(Yt,Wt,tn){function ln(){Nt("if(!",Un,".buffer){",In,".enableVertexAttribArray(",zn,");}");var or,tr=tn.type;or=tn.size?Nt.def(tn.size,"||",Wt):Wt,Nt("if(",Un,".type!==",tr,"||",Un,".size!==",or,"||",er.map(function(gr){return Un+"."+gr+"!=="+tn[gr]}).join("||"),"){",In,".bindBuffer(",34962,",",rr,".buffer);",In,".vertexAttribPointer(",[zn,or,tr,tn.normalized,tn.stride,tn.offset],");",Un,".type=",tr,";",Un,".size=",or,";",er.map(function(gr){return Un+"."+gr+"="+tn[gr]+";"}).join(""),"}"),en&&(tr=tn.divisor,Nt("if(",Un,".divisor!==",tr,"){",Lt.instancing,".vertexAttribDivisorANGLE(",[zn,tr],");",Un,".divisor=",tr,";}"))}function An(){Nt("if(",Un,".buffer){",In,".disableVertexAttribArray(",zn,");",Un,".buffer=null;","}if(",$e.map(function(or,tr){return Un+"."+or+"!=="+Xn[tr]}).join("||"),"){",In,".vertexAttrib4f(",zn,",",Xn,");",$e.map(function(or,tr){return Un+"."+or+"="+Xn[tr]+";"}).join(""),"}")}var In=sn.gl,zn=Nt.def(Yt,".location"),Un=Nt.def(sn.attributes,"[",zn,"]");Yt=tn.state;var rr=tn.buffer,Xn=[tn.x,tn.y,tn.z,tn.w],er=["buffer","normalized","offset","stride"];Yt===1?ln():Yt===2?An():(Nt("if(",Yt,"===",1,"){"),ln(),Nt("}else{"),An(),Nt("}"))}var sn=Lt.shared;fn.forEach(function(Yt){var Wt,tn=Yt.name,ln=$t.attributes[tn];if(ln){if(!dn(ln))return;Wt=ln.append(Lt,Nt)}else{if(!dn(Xe))return;var An=Lt.scopeAttrib(tn);Wt={},Object.keys(new Kn).forEach(function(In){Wt[In]=Nt.def(An,".",In)})}xn(Lt.link(Yt),function(In){switch(In){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Yt.info.type),Wt)})}function Cn(Lt,Nt,$t,fn,dn,xn){for(var sn,Yt=Lt.shared,Wt=Yt.gl,tn=0;tn<fn.length;++tn){var ln,An=(Un=fn[tn]).name,In=Un.info.type,zn=$t.uniforms[An],Un=Lt.link(Un)+".location";if(zn){if(!dn(zn))continue;if(te(zn)){if(An=zn.value,In===35678||In===35680)Nt(Wt,".uniform1i(",Un,",",(In=Lt.link(An._texture||An.color[0]._texture))+".bind());"),Nt.exit(In,".unbind();");else if(In===35674||In===35675||In===35676)zn=2,In===35675?zn=3:In===35676&&(zn=4),Nt(Wt,".uniformMatrix",zn,"fv(",Un,",false,",An=Lt.global.def("new Float32Array(["+Array.prototype.slice.call(An)+"])"),");");else{switch(In){case 5126:sn="1f";break;case 35664:sn="2f";break;case 35665:sn="3f";break;case 35666:sn="4f";break;case 35670:case 5124:sn="1i";break;case 35671:case 35667:sn="2i";break;case 35672:case 35668:sn="3i";break;case 35673:case 35669:sn="4i"}Nt(Wt,".uniform",sn,"(",Un,",",x(An)?Array.prototype.slice.call(An):An,");")}continue}ln=zn.append(Lt,Nt)}else{if(!dn(Xe))continue;ln=Nt.def(Yt.uniforms,"[",Ye.id(An),"]")}switch(In===35678?Nt("if(",ln,"&&",ln,'._reglType==="framebuffer"){',ln,"=",ln,".color[0];","}"):In===35680&&Nt("if(",ln,"&&",ln,'._reglType==="framebufferCube"){',ln,"=",ln,".color[0];","}"),An=1,In){case 35678:case 35680:In=Nt.def(ln,"._texture"),Nt(Wt,".uniform1i(",Un,",",In,".bind());"),Nt.exit(In,".unbind();");continue;case 5124:case 35670:sn="1i";break;case 35667:case 35671:sn="2i",An=2;break;case 35668:case 35672:sn="3i",An=3;break;case 35669:case 35673:sn="4i",An=4;break;case 5126:sn="1f";break;case 35664:sn="2f",An=2;break;case 35665:sn="3f",An=3;break;case 35666:sn="4f",An=4;break;case 35674:sn="Matrix2fv";break;case 35675:sn="Matrix3fv";break;case 35676:sn="Matrix4fv"}if(sn.charAt(0)==="M"){Nt(Wt,".uniform",sn,"(",Un,","),Un=Math.pow(In-35674+2,2);var rr=Lt.global.def("new Float32Array(",Un,")");Array.isArray(ln)?Nt("false,(",b(Un,function(er){return rr+"["+er+"]="+ln[er]}),",",rr,")"):Nt("false,(Array.isArray(",ln,")||",ln," instanceof Float32Array)?",ln,":(",b(Un,function(er){return rr+"["+er+"]="+ln+"["+er+"]"}),",",rr,")"),Nt(");")}else{if(1<An){In=[];var Xn=[];for(zn=0;zn<An;++zn)Array.isArray(ln)?Xn.push(ln[zn]):Xn.push(Nt.def(ln+"["+zn+"]")),xn&&In.push(Nt.def());xn&&Nt("if(!",Lt.batchId,"||",In.map(function(er,or){return er+"!=="+Xn[or]}).join("||"),"){",In.map(function(er,or){return er+"="+Xn[or]+";"}).join("")),Nt(Wt,".uniform",sn,"(",Un,",",Xn.join(","),");")}else xn&&(In=Nt.def(),Nt("if(!",Lt.batchId,"||",In,"!==",ln,"){",In,"=",ln,";")),Nt(Wt,".uniform",sn,"(",Un,",",ln,");");xn&&Nt("}")}}}function Ln(Lt,Nt,$t,fn){function dn(tr){var gr=In[tr];return gr?gr.contextDep&&fn.contextDynamic||gr.propDep?gr.append(Lt,$t):gr.append(Lt,Nt):Nt.def(An,".",tr)}function xn(){function tr(){$t(Wt,".drawElementsInstancedANGLE(",[Un,Xn,er,rr+"<<(("+er+"-5121)>>1)",Yt],");")}function gr(){$t(Wt,".drawArraysInstancedANGLE(",[Un,rr,Xn,Yt],");")}zn&&zn!=="null"?or?tr():($t("if(",zn,"){"),tr(),$t("}else{"),gr(),$t("}")):gr()}function sn(){function tr(){$t(ln+".drawElements("+[Un,Xn,er,rr+"<<(("+er+"-5121)>>1)"]+");")}function gr(){$t(ln+".drawArrays("+[Un,rr,Xn]+");")}zn&&zn!=="null"?or?tr():($t("if(",zn,"){"),tr(),$t("}else{"),gr(),$t("}")):gr()}var Yt,Wt,tn=Lt.shared,ln=tn.gl,An=tn.draw,In=fn.draw,zn=function(){var tr=In.elements,gr=Nt;return tr?((tr.contextDep&&fn.contextDynamic||tr.propDep)&&(gr=$t),tr=tr.append(Lt,gr),In.elementsActive&&gr("if("+tr+")"+ln+".bindBuffer(34963,"+tr+".buffer.buffer);")):(tr=gr.def(),gr(tr,"=",An,".","elements",";","if(",tr,"){",ln,".bindBuffer(",34963,",",tr,".buffer.buffer);}","else if(",tn.vao,".currentVAO){",tr,"=",Lt.shared.elements+".getElements("+tn.vao,".currentVAO.elements);",En?"":"if("+tr+")"+ln+".bindBuffer(34963,"+tr+".buffer.buffer);","}")),tr}(),Un=dn("primitive"),rr=dn("offset"),Xn=function(){var tr=In.count,gr=Nt;return tr?((tr.contextDep&&fn.contextDynamic||tr.propDep)&&(gr=$t),tr=tr.append(Lt,gr)):tr=gr.def(An,".","count"),tr}();if(typeof Xn=="number"){if(Xn===0)return}else $t("if(",Xn,"){"),$t.exit("}");en&&(Yt=dn("instances"),Wt=Lt.instancing);var er=zn+".type",or=In.elements&&te(In.elements)&&!In.vaoActive;en&&(typeof Yt!="number"||0<=Yt)?typeof Yt=="string"?($t("if(",Yt,">0){"),xn(),$t("}else if(",Yt,"<0){"),sn(),$t("}")):xn():sn()}function Mn(Lt,Nt,$t,fn,dn){return dn=(Nt=an()).proc("body",dn),en&&(Nt.instancing=dn.def(Nt.shared.extensions,".angle_instanced_arrays")),Lt(Nt,dn,$t,fn),Nt.compile().body}function jn(Lt,Nt,$t,fn){hn(Lt,Nt),$t.useVAO?$t.drawVAO?Nt(Lt.shared.vao,".setVAO(",$t.drawVAO.append(Lt,Nt),");"):Nt(Lt.shared.vao,".setVAO(",Lt.shared.vao,".targetVAO);"):(Nt(Lt.shared.vao,".setVAO(null);"),wn(Lt,Nt,$t,fn.attributes,function(){return!0})),Cn(Lt,Nt,$t,fn.uniforms,function(){return!0},!1),Ln(Lt,Nt,Nt,$t)}function Rn(Lt,Nt,$t,fn){function dn(){return!0}Lt.batchId="a1",hn(Lt,Nt),wn(Lt,Nt,$t,fn.attributes,dn),Cn(Lt,Nt,$t,fn.uniforms,dn,!1),Ln(Lt,Nt,Nt,$t)}function Qn(Lt,Nt,$t,fn){function dn(An){return An.contextDep&&sn||An.propDep}function xn(An){return!dn(An)}hn(Lt,Nt);var sn=$t.contextDep,Yt=Nt.def(),Wt=Nt.def();Lt.shared.props=Wt,Lt.batchId=Yt;var tn=Lt.scope(),ln=Lt.scope();Nt(tn.entry,"for(",Yt,"=0;",Yt,"<","a1",";++",Yt,"){",Wt,"=","a0","[",Yt,"];",ln,"}",tn.exit),$t.needsContext&&mn(Lt,ln,$t.context),$t.needsFramebuffer&&Qt(Lt,ln,$t.framebuffer),nn(Lt,ln,$t.state,dn),$t.profile&&dn($t.profile)&&bn(Lt,ln,$t,!1,!0),fn?($t.useVAO?$t.drawVAO?dn($t.drawVAO)?ln(Lt.shared.vao,".setVAO(",$t.drawVAO.append(Lt,ln),");"):tn(Lt.shared.vao,".setVAO(",$t.drawVAO.append(Lt,tn),");"):tn(Lt.shared.vao,".setVAO(",Lt.shared.vao,".targetVAO);"):(tn(Lt.shared.vao,".setVAO(null);"),wn(Lt,tn,$t,fn.attributes,xn),wn(Lt,ln,$t,fn.attributes,dn)),Cn(Lt,tn,$t,fn.uniforms,xn,!1),Cn(Lt,ln,$t,fn.uniforms,dn,!0),Ln(Lt,tn,ln,$t)):(Nt=Lt.global.def("{}"),fn=$t.shader.progVar.append(Lt,ln),Wt=ln.def(fn,".id"),tn=ln.def(Nt,"[",Wt,"]"),ln(Lt.shared.gl,".useProgram(",fn,".program);","if(!",tn,"){",tn,"=",Nt,"[",Wt,"]=",Lt.link(function(An){return Mn(Rn,Lt,$t,An,2)}),"(",fn,");}",tn,".call(this,a0[",Yt,"],",Yt,");"))}function Yn(Lt,Nt){function $t(Yt){var Wt=Nt.shader[Yt];Wt&&(Wt=Wt.append(Lt,fn),isNaN(Wt)?fn.set(dn.shader,"."+Yt,Wt):fn.set(dn.shader,"."+Yt,Lt.link(Wt,{stable:!0})))}var fn=Lt.proc("scope",3);Lt.batchId="a2";var dn=Lt.shared,xn=dn.current;if(mn(Lt,fn,Nt.context),Nt.framebuffer&&Nt.framebuffer.append(Lt,fn),U(Object.keys(Nt.state)).forEach(function(Yt){var Wt=Nt.state[Yt],tn=Wt.append(Lt,fn);x(tn)?tn.forEach(function(ln,An){isNaN(ln)?fn.set(Lt.next[Yt],"["+An+"]",ln):fn.set(Lt.next[Yt],"["+An+"]",Lt.link(ln,{stable:!0}))}):te(Wt)?fn.set(dn.next,"."+Yt,Lt.link(tn,{stable:!0})):fn.set(dn.next,"."+Yt,tn)}),bn(Lt,fn,Nt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Yt){var Wt=Nt.draw[Yt];Wt&&(Wt=Wt.append(Lt,fn),isNaN(Wt)?fn.set(dn.draw,"."+Yt,Wt):fn.set(dn.draw,"."+Yt,Lt.link(Wt),{stable:!0}))}),Object.keys(Nt.uniforms).forEach(function(Yt){var Wt=Nt.uniforms[Yt].append(Lt,fn);Array.isArray(Wt)&&(Wt="["+Wt.map(function(tn){return isNaN(tn)?tn:Lt.link(tn,{stable:!0})})+"]"),fn.set(dn.uniforms,"["+Lt.link(Ye.id(Yt),{stable:!0})+"]",Wt)}),Object.keys(Nt.attributes).forEach(function(Yt){var Wt=Nt.attributes[Yt].append(Lt,fn),tn=Lt.scopeAttrib(Yt);Object.keys(new Kn).forEach(function(ln){fn.set(tn,"."+ln,Wt[ln])})}),Nt.scopeVAO){var sn=Nt.scopeVAO.append(Lt,fn);isNaN(sn)?fn.set(dn.vao,".targetVAO",sn):fn.set(dn.vao,".targetVAO",Lt.link(sn,{stable:!0}))}$t("vert"),$t("frag"),0<Object.keys(Nt.state).length&&(fn(xn,".dirty=true;"),fn.exit(xn,".dirty=true;")),fn("a1(",Lt.shared.context,",a0,",Lt.batchId,");")}function ar(Lt,Nt,$t){var fn=Nt.static[$t];if(fn&&function(ln){if(typeof ln=="object"&&!x(ln)){for(var An=Object.keys(ln),In=0;In<An.length;++In)if(se.isDynamic(ln[An[In]]))return!0;return!1}}(fn)){var dn=Lt.global,xn=Object.keys(fn),sn=!1,Yt=!1,Wt=!1,tn=Lt.global.def("{}");xn.forEach(function(ln){var An=fn[ln];if(se.isDynamic(An))typeof An=="function"&&(An=fn[ln]=se.unbox(An)),ln=Q(An,null),sn=sn||ln.thisDep,Wt=Wt||ln.propDep,Yt=Yt||ln.contextDep;else{switch(dn(tn,".",ln,"="),typeof An){case"number":dn(An);break;case"string":dn('"',An,'"');break;case"object":Array.isArray(An)&&dn("[",An.join(),"]");break;default:dn(Lt.link(An))}dn(";")}}),Nt.dynamic[$t]=new se.DynamicVariable(4,{thisDep:sn,contextDep:Yt,propDep:Wt,ref:tn,append:function(ln,An){xn.forEach(function(In){var zn=fn[In];se.isDynamic(zn)&&(zn=ln.invoke(An,zn),An(tn,".",In,"=",zn,";"))})}}),delete Nt.static[$t]}}var Kn=mt.Record,mr={add:32774,subtract:32778,"reverse subtract":32779};ot.ext_blend_minmax&&(mr.min=32775,mr.max=32776);var en=ot.angle_instanced_arrays,rn=ot.webgl_draw_buffers,En=ot.oes_vertex_array_object,gn={dirty:!0,profile:Pt.profile},Dn={},qn=[],Vn={},Jn={};Ft("dither",3024),Ft("blend.enable",3042),Xt("blend.color","blendColor",[0,0,0,0]),Xt("blend.equation","blendEquationSeparate",[32774,32774]),Xt("blend.func","blendFuncSeparate",[1,0,1,0]),Ft("depth.enable",2929,!0),Xt("depth.func","depthFunc",513),Xt("depth.range","depthRange",[0,1]),Xt("depth.mask","depthMask",!0),Xt("colorMask","colorMask",[!0,!0,!0,!0]),Ft("cull.enable",2884),Xt("cull.face","cullFace",1029),Xt("frontFace","frontFace",2305),Xt("lineWidth","lineWidth",1),Ft("polygonOffset.enable",32823),Xt("polygonOffset.offset","polygonOffset",[0,0]),Ft("sample.alpha",32926),Ft("sample.enable",32928),Xt("sample.coverage","sampleCoverage",[1,!1]),Ft("stencil.enable",2960),Xt("stencil.mask","stencilMask",-1),Xt("stencil.func","stencilFunc",[519,0,-1]),Xt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Xt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Ft("scissor.enable",3089),Xt("scissor.box","scissor",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]),Xt("viewport","viewport",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]);var xr={gl:Ne,context:Mt,strings:Ye,next:Dn,current:gn,draw:ut,elements:Fe,buffer:ze,shader:vt,attributes:mt.state,vao:mt,uniforms:ft,framebuffer:We,extensions:ot,timer:bt,isBufferArgs:B},Jt={primTypes:Se,compareFuncs:Rt,blendFuncs:Ot,blendEquations:mr,stencilOps:Ct,glTypes:Ce,orientationType:Ge};rn&&(Jt.backBuffer=[1029],Jt.drawBuffer=b(nt.maxDrawbuffers,function(Lt){return Lt===0?[0]:b(Lt,function(Nt){return 36064+Nt})}));var vn=0;return{next:Dn,current:gn,procs:function(){var Lt=an(),Nt=Lt.proc("poll"),$t=Lt.proc("refresh"),fn=Lt.block();Nt(fn),$t(fn);var dn,xn=(Wt=Lt.shared).gl,sn=Wt.next,Yt=Wt.current;fn(Yt,".dirty=false;"),Qt(Lt,Nt),Qt(Lt,$t,null,!0),en&&(dn=Lt.link(en)),ot.oes_vertex_array_object&&$t(Lt.link(ot.oes_vertex_array_object),".bindVertexArrayOES(null);");var Wt=$t.def(Wt.attributes),tn=$t.def(0),ln=Lt.cond(tn,".buffer");ln.then(xn,".enableVertexAttribArray(i);",xn,".bindBuffer(",34962,",",tn,".buffer.buffer);",xn,".vertexAttribPointer(i,",tn,".size,",tn,".type,",tn,".normalized,",tn,".stride,",tn,".offset);").else(xn,".disableVertexAttribArray(i);",xn,".vertexAttrib4f(i,",tn,".x,",tn,".y,",tn,".z,",tn,".w);",tn,".buffer=null;");var An=Lt.link(nt.maxAttributes,{stable:!0});return $t("for(var i=0;i<",An,";++i){",tn,"=",Wt,"[i];",ln,"}"),en&&$t("for(var i=0;i<",An,";++i){",dn,".vertexAttribDivisorANGLE(i,",Wt,"[i].divisor);","}"),$t(Lt.shared.vao,".currentVAO=null;",Lt.shared.vao,".setVAO(",Lt.shared.vao,".targetVAO);"),Object.keys(Vn).forEach(function(In){var zn=Vn[In],Un=fn.def(sn,".",In),rr=Lt.block();rr("if(",Un,"){",xn,".enable(",zn,")}else{",xn,".disable(",zn,")}",Yt,".",In,"=",Un,";"),$t(rr),Nt("if(",Un,"!==",Yt,".",In,"){",rr,"}")}),Object.keys(Jn).forEach(function(In){var zn,Un,rr=Jn[In],Xn=gn[In],er=Lt.block();er(xn,".",rr,"("),x(Xn)?(rr=Xn.length,zn=Lt.global.def(sn,".",In),Un=Lt.global.def(Yt,".",In),er(b(rr,function(or){return zn+"["+or+"]"}),");",b(rr,function(or){return Un+"["+or+"]="+zn+"["+or+"];"}).join("")),Nt("if(",b(rr,function(or){return zn+"["+or+"]!=="+Un+"["+or+"]"}).join("||"),"){",er,"}")):(zn=fn.def(sn,".",In),Un=fn.def(Yt,".",In),er(zn,");",Yt,".",In,"=",zn,";"),Nt("if(",zn,"!==",Un,"){",er,"}")),$t(er)}),Lt.compile()}(),compile:function(Lt,Nt,$t,fn,dn){var xn=an();xn.stats=xn.link(dn),Object.keys(Nt.static).forEach(function(Yt){ar(xn,Nt,Yt)}),At.forEach(function(Yt){ar(xn,Lt,Yt)});var sn=Tn(Lt,Nt,$t,fn);return sn.shader.program&&(sn.shader.program.attributes.sort(function(Yt,Wt){return Yt.name<Wt.name?-1:1}),sn.shader.program.uniforms.sort(function(Yt,Wt){return Yt.name<Wt.name?-1:1})),function(Yt,Wt){var tn=Yt.proc("draw",1);hn(Yt,tn),mn(Yt,tn,Wt.context),Qt(Yt,tn,Wt.framebuffer),un(Yt,tn,Wt),nn(Yt,tn,Wt.state),bn(Yt,tn,Wt,!1,!0);var ln=Wt.shader.progVar.append(Yt,tn);if(tn(Yt.shared.gl,".useProgram(",ln,".program);"),Wt.shader.program)jn(Yt,tn,Wt,Wt.shader.program);else{tn(Yt.shared.vao,".setVAO(null);");var An=Yt.global.def("{}"),In=tn.def(ln,".id"),zn=tn.def(An,"[",In,"]");tn(Yt.cond(zn).then(zn,".call(this,a0);").else(zn,"=",An,"[",In,"]=",Yt.link(function(Un){return Mn(jn,Yt,Wt,Un,1)}),"(",ln,");",zn,".call(this,a0);"))}0<Object.keys(Wt.state).length&&tn(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&tn(Yt.shared.vao,".setVAO(null);")}(xn,sn),Yn(xn,sn),function(Yt,Wt){function tn(Xn){return Xn.contextDep&&An||Xn.propDep}var ln=Yt.proc("batch",2);Yt.batchId="0",hn(Yt,ln);var An=!1,In=!0;Object.keys(Wt.context).forEach(function(Xn){An=An||Wt.context[Xn].propDep}),An||(mn(Yt,ln,Wt.context),In=!1);var zn=!1;if((Un=Wt.framebuffer)?(Un.propDep?An=zn=!0:Un.contextDep&&An&&(zn=!0),zn||Qt(Yt,ln,Un)):Qt(Yt,ln,null),Wt.state.viewport&&Wt.state.viewport.propDep&&(An=!0),un(Yt,ln,Wt),nn(Yt,ln,Wt.state,function(Xn){return!tn(Xn)}),Wt.profile&&tn(Wt.profile)||bn(Yt,ln,Wt,!1,"a1"),Wt.contextDep=An,Wt.needsContext=In,Wt.needsFramebuffer=zn,(In=Wt.shader.progVar).contextDep&&An||In.propDep)Qn(Yt,ln,Wt,null);else if(In=In.append(Yt,ln),ln(Yt.shared.gl,".useProgram(",In,".program);"),Wt.shader.program)Qn(Yt,ln,Wt,Wt.shader.program);else{ln(Yt.shared.vao,".setVAO(null);");var Un=Yt.global.def("{}"),rr=(zn=ln.def(In,".id"),ln.def(Un,"[",zn,"]"));ln(Yt.cond(rr).then(rr,".call(this,a0,a1);").else(rr,"=",Un,"[",zn,"]=",Yt.link(function(Xn){return Mn(Qn,Yt,Wt,Xn,2)}),"(",In,");",rr,".call(this,a0,a1);"))}0<Object.keys(Wt.state).length&&ln(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&ln(Yt.shared.vao,".setVAO(null);")}(xn,sn),X(xn.compile(),{destroy:function(){sn.shader.program.destroy()}})}}}function K(Ne,Ye){for(var ot=0;ot<Ne.length;++ot)if(Ne[ot]===Ye)return ot;return-1}var X=function(Ne,Ye){for(var ot=Object.keys(Ye),nt=0;nt<ot.length;++nt)Ne[ot[nt]]=Ye[ot[nt]];return Ne},ie=0,se={DynamicVariable:C,define:function(Ne,Ye){return new C(Ne,T(Ye+""))},isDynamic:function(Ne){return typeof Ne=="function"&&!Ne._reglType||Ne instanceof C},unbox:function Ne(Ye,ot){return typeof Ye=="function"?new C(0,Ye):typeof Ye=="number"||typeof Ye=="boolean"?new C(5,Ye):Array.isArray(Ye)?new C(6,Ye.map(function(nt,ze){return Ne(nt,ot+"["+ze+"]")})):Ye instanceof C?Ye:void 0},accessor:T},ae={next:typeof requestAnimationFrame=="function"?function(Ne){return requestAnimationFrame(Ne)}:function(Ne){return setTimeout(Ne,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ne){return cancelAnimationFrame(Ne)}:clearTimeout},ue=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ve=s();ve.zero=s();var ye=function(Ne,Ye){var ot=1;Ye.ext_texture_filter_anisotropic&&(ot=Ne.getParameter(34047));var nt=1,ze=1;Ye.webgl_draw_buffers&&(nt=Ne.getParameter(34852),ze=Ne.getParameter(36063));var Fe=!!Ye.oes_texture_float;if(Fe){Fe=Ne.createTexture(),Ne.bindTexture(3553,Fe),Ne.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var rt=Ne.createFramebuffer();if(Ne.bindFramebuffer(36160,rt),Ne.framebufferTexture2D(36160,36064,3553,Fe,0),Ne.bindTexture(3553,null),Ne.checkFramebufferStatus(36160)!==36053)Fe=!1;else{Ne.viewport(0,0,1,1),Ne.clearColor(1,0,0,1),Ne.clear(16384);var We=ve.allocType(5126,4);Ne.readPixels(0,0,1,1,6408,5126,We),Ne.getError()?Fe=!1:(Ne.deleteFramebuffer(rt),Ne.deleteTexture(Fe),Fe=We[0]===1),ve.freeType(We)}}return We=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(We=Ne.createTexture(),rt=ve.allocType(5121,36),Ne.activeTexture(33984),Ne.bindTexture(34067,We),Ne.texImage2D(34069,0,6408,3,3,0,6408,5121,rt),ve.freeType(rt),Ne.bindTexture(34067,null),Ne.deleteTexture(We),We=!Ne.getError()),{colorBits:[Ne.getParameter(3410),Ne.getParameter(3411),Ne.getParameter(3412),Ne.getParameter(3413)],depthBits:Ne.getParameter(3414),stencilBits:Ne.getParameter(3415),subpixelBits:Ne.getParameter(3408),extensions:Object.keys(Ye).filter(function(ft){return!!Ye[ft]}),maxAnisotropic:ot,maxDrawbuffers:nt,maxColorAttachments:ze,pointSizeDims:Ne.getParameter(33901),lineWidthDims:Ne.getParameter(33902),maxViewportDims:Ne.getParameter(3386),maxCombinedTextureUnits:Ne.getParameter(35661),maxCubeMapSize:Ne.getParameter(34076),maxRenderbufferSize:Ne.getParameter(34024),maxTextureUnits:Ne.getParameter(34930),maxTextureSize:Ne.getParameter(3379),maxAttributes:Ne.getParameter(34921),maxVertexUniforms:Ne.getParameter(36347),maxVertexTextureUnits:Ne.getParameter(35660),maxVaryingVectors:Ne.getParameter(36348),maxFragmentUniforms:Ne.getParameter(36349),glsl:Ne.getParameter(35724),renderer:Ne.getParameter(7937),vendor:Ne.getParameter(7936),version:Ne.getParameter(7938),readFloat:Fe,npotTextureCube:We}},pe=function(Ne){return Ne instanceof Uint8Array||Ne instanceof Uint16Array||Ne instanceof Uint32Array||Ne instanceof Int8Array||Ne instanceof Int16Array||Ne instanceof Int32Array||Ne instanceof Float32Array||Ne instanceof Float64Array||Ne instanceof Uint8ClampedArray},de=function(Ne){return Object.keys(Ne).map(function(Ye){return Ne[Ye]})},me={shape:function(Ne){for(var Ye=[];Ne.length;Ne=Ne[0])Ye.push(Ne.length);return Ye},flatten:function(Ne,Ye,ot,nt){var ze=1;if(Ye.length)for(var Fe=0;Fe<Ye.length;++Fe)ze*=Ye[Fe];else ze=0;switch(ot=nt||ve.allocType(ot,ze),Ye.length){case 0:break;case 1:for(nt=Ye[0],Ye=0;Ye<nt;++Ye)ot[Ye]=Ne[Ye];break;case 2:for(nt=Ye[0],Ye=Ye[1],Fe=ze=0;Fe<nt;++Fe)for(var rt=Ne[Fe],We=0;We<Ye;++We)ot[ze++]=rt[We];break;case 3:i(Ne,Ye[0],Ye[1],Ye[2],ot,0);break;default:r(Ne,Ye,0,ot,0)}return ot}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ce={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ge={dynamic:35048,stream:35040,static:35044},oe=me.flatten,re=me.shape,fe=[];fe[5120]=1,fe[5122]=2,fe[5124]=4,fe[5121]=1,fe[5123]=2,fe[5125]=4,fe[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},be=new Float32Array(1),we=new Uint32Array(be.buffer),Me=[9984,9986,9985,9987],Pe=[0,6409,6410,6407,6408],De={};De[6409]=De[6406]=De[6402]=1,De[34041]=De[6410]=2,De[6407]=De[35904]=3,De[6408]=De[35906]=4;var he=p("HTMLCanvasElement"),_e=p("OffscreenCanvas"),Ae=p("CanvasRenderingContext2D"),Oe=p("ImageBitmap"),Ee=p("HTMLImageElement"),Be=p("HTMLVideoElement"),Ve=Object.keys(ke).concat([he,_e,Ae,Oe,Ee,Be]),Ze=[];Ze[5121]=1,Ze[5126]=4,Ze[36193]=2,Ze[5123]=2,Ze[5125]=4;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[34041]=4,it[33776]=.5,it[33777]=.5,it[33778]=1,it[33779]=1,it[35986]=.5,it[35987]=1,it[34798]=1,it[35840]=.5,it[35841]=.25,it[35842]=.5,it[35843]=.25,it[36196]=.5;var at=[];at[32854]=2,at[32855]=2,at[36194]=2,at[33189]=2,at[36168]=1,at[34041]=4,at[35907]=4,at[34836]=16,at[34842]=8,at[34843]=6;var gt=function(Ne,Ye,ot,nt,ze){function Fe(ut){this.id=mt++,this.refCount=1,this.renderbuffer=ut,this.format=32854,this.height=this.width=0,ze.profile&&(this.stats={size:0})}function rt(ut){var Mt=ut.renderbuffer;Ne.bindRenderbuffer(36161,null),Ne.deleteRenderbuffer(Mt),ut.renderbuffer=null,ut.refCount=0,delete vt[ut.id],nt.renderbufferCount--}var We={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ye.ext_srgb&&(We.srgba=35907),Ye.ext_color_buffer_half_float&&(We.rgba16f=34842,We.rgb16f=34843),Ye.webgl_color_buffer_float&&(We.rgba32f=34836);var ft=[];Object.keys(We).forEach(function(ut){ft[We[ut]]=ut});var mt=0,vt={};return Fe.prototype.decRef=function(){0>=--this.refCount&&rt(this)},ze.profile&&(nt.getTotalRenderbufferSize=function(){var ut=0;return Object.keys(vt).forEach(function(Mt){ut+=vt[Mt].stats.size}),ut}),{create:function(ut,Mt){function bt(Pt,Dt){var Ft=0,Xt=0,an=32854;if(typeof Pt=="object"&&Pt?("shape"in Pt?(Ft=0|(Xt=Pt.shape)[0],Xt=0|Xt[1]):("radius"in Pt&&(Ft=Xt=0|Pt.radius),"width"in Pt&&(Ft=0|Pt.width),"height"in Pt&&(Xt=0|Pt.height)),"format"in Pt&&(an=We[Pt.format])):typeof Pt=="number"?(Ft=0|Pt,Xt=typeof Dt=="number"?0|Dt:Ft):Pt||(Ft=Xt=1),Ft!==St.width||Xt!==St.height||an!==St.format)return bt.width=St.width=Ft,bt.height=St.height=Xt,St.format=an,Ne.bindRenderbuffer(36161,St.renderbuffer),Ne.renderbufferStorage(36161,an,Ft,Xt),ze.profile&&(St.stats.size=at[St.format]*St.width*St.height),bt.format=ft[St.format],bt}var St=new Fe(Ne.createRenderbuffer());return vt[St.id]=St,nt.renderbufferCount++,bt(ut,Mt),bt.resize=function(Pt,Dt){var Ft=0|Pt,Xt=0|Dt||Ft;return Ft===St.width&&Xt===St.height||(bt.width=St.width=Ft,bt.height=St.height=Xt,Ne.bindRenderbuffer(36161,St.renderbuffer),Ne.renderbufferStorage(36161,St.format,Ft,Xt),ze.profile&&(St.stats.size=at[St.format]*St.width*St.height)),bt},bt._reglType="renderbuffer",bt._renderbuffer=St,ze.profile&&(bt.stats=St.stats),bt.destroy=function(){St.decRef()},bt},clear:function(){de(vt).forEach(rt)},restore:function(){de(vt).forEach(function(ut){ut.renderbuffer=Ne.createRenderbuffer(),Ne.bindRenderbuffer(36161,ut.renderbuffer),Ne.renderbufferStorage(36161,ut.format,ut.width,ut.height)}),Ne.bindRenderbuffer(36161,null)}}},yt=[];yt[6408]=4,yt[6407]=3;var pt=[];pt[5121]=1,pt[5126]=4,pt[36193]=2;var et=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],$e=["x","y","z","w"],At="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ot={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Rt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ct={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ge={cw:2304,ccw:2305},Xe=new q(!1,!1,!1,function(){});return function(Ne){function Ye(){if(Rn.length===0)Ht&&Ht.update(),Kn=null;else{Kn=ae.next(Ye),vt();for(var en=Rn.length-1;0<=en;--en){var rn=Rn[en];rn&&rn(Tn,null,0)}bt.flush(),Ht&&Ht.update()}}function ot(){!Kn&&0<Rn.length&&(Kn=ae.next(Ye))}function nt(){Kn&&(ae.cancel(Ye),Kn=null)}function ze(en){en.preventDefault(),nt(),Qn.forEach(function(rn){rn()})}function Fe(en){bt.getError(),Pt.restore(),hn.restore(),Qt.restore(),bn.restore(),wn.restore(),Cn.restore(),nn.restore(),Ht&&Ht.restore(),Ln.procs.refresh(),ot(),Yn.forEach(function(rn){rn()})}function rt(en){function rn(Lt,Nt){var $t={},fn={};return Object.keys(Lt).forEach(function(dn){var xn=Lt[dn];if(se.isDynamic(xn))fn[dn]=se.unbox(xn,dn);else{if(Nt&&Array.isArray(xn)){for(var sn=0;sn<xn.length;++sn)if(se.isDynamic(xn[sn]))return void(fn[dn]=se.unbox(xn,dn))}$t[dn]=xn}}),{dynamic:fn,static:$t}}var En=rn(en.context||{},!0),gn=rn(en.uniforms||{},!0),Dn=rn(en.attributes||{},!1);en=rn(function(Lt){function Nt(fn){if(fn in $t){var dn=$t[fn];delete $t[fn],Object.keys(dn).forEach(function(xn){$t[fn+"."+xn]=dn[xn]})}}var $t=X({},Lt);return delete $t.uniforms,delete $t.attributes,delete $t.context,delete $t.vao,"stencil"in $t&&$t.stencil.op&&($t.stencil.opBack=$t.stencil.opFront=$t.stencil.op,delete $t.stencil.op),Nt("blend"),Nt("depth"),Nt("cull"),Nt("stencil"),Nt("polygonOffset"),Nt("scissor"),Nt("sample"),"vao"in Lt&&($t.vao=Lt.vao),$t}(en),!1);var qn={gpuTime:0,cpuTime:0,count:0},Vn=Ln.compile(en,Dn,gn,En,qn),Jn=Vn.draw,xr=Vn.batch,Jt=Vn.scope,vn=[];return X(function(Lt,Nt){var $t;if(typeof Lt=="function")return Jt.call(this,null,Lt,0);if(typeof Nt=="function")if(typeof Lt=="number")for($t=0;$t<Lt;++$t)Jt.call(this,null,Nt,$t);else{if(!Array.isArray(Lt))return Jt.call(this,Lt,Nt,0);for($t=0;$t<Lt.length;++$t)Jt.call(this,Lt[$t],Nt,$t)}else if(typeof Lt=="number"){if(0<Lt)return xr.call(this,function(fn){for(;vn.length<fn;)vn.push(null);return vn}(0|Lt),0|Lt)}else{if(!Array.isArray(Lt))return Jn.call(this,Lt);if(Lt.length)return xr.call(this,Lt,Lt.length)}},{stats:qn,destroy:function(){Vn.destroy()}})}function We(en,rn){var En=0;Ln.procs.poll();var gn=rn.color;gn&&(bt.clearColor(+gn[0]||0,+gn[1]||0,+gn[2]||0,+gn[3]||0),En|=16384),"depth"in rn&&(bt.clearDepth(+rn.depth),En|=256),"stencil"in rn&&(bt.clearStencil(0|rn.stencil),En|=1024),bt.clear(En)}function ft(en){return Rn.push(en),ot(),{cancel:function(){var rn=K(Rn,en);Rn[rn]=function En(){var gn=K(Rn,En);Rn[gn]=Rn[Rn.length-1],--Rn.length,0>=Rn.length&&nt()}}}}function mt(){var en=Mn.viewport,rn=Mn.scissor_box;en[0]=en[1]=rn[0]=rn[1]=0,Tn.viewportWidth=Tn.framebufferWidth=Tn.drawingBufferWidth=en[2]=rn[2]=bt.drawingBufferWidth,Tn.viewportHeight=Tn.framebufferHeight=Tn.drawingBufferHeight=en[3]=rn[3]=bt.drawingBufferHeight}function vt(){Tn.tick+=1,Tn.time=Mt(),mt(),Ln.procs.poll()}function ut(){bn.refresh(),mt(),Ln.procs.refresh(),Ht&&Ht.update()}function Mt(){return(ue()-Zt)/1e3}if(!(Ne=w(Ne)))return null;var bt=Ne.gl,St=bt.getContextAttributes();bt.isContextLost();var Pt=function(en,rn){function En(Vn){var Jn;Vn=Vn.toLowerCase();try{Jn=gn[Vn]=en.getExtension(Vn)}catch{}return!!Jn}for(var gn={},Dn=0;Dn<rn.extensions.length;++Dn){var qn=rn.extensions[Dn];if(!En(qn))return rn.onDestroy(),rn.onDone('"'+qn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return rn.optionalExtensions.forEach(En),{extensions:gn,restore:function(){Object.keys(gn).forEach(function(Vn){if(gn[Vn]&&!En(Vn))throw Error("(regl): error restoring extension "+Vn)})}}}(bt,Ne);if(!Pt)return null;var Dt=function(){var en={"":0},rn=[""];return{id:function(En){var gn=en[En];return gn||(gn=en[En]=rn.length,rn.push(En),gn)},str:function(En){return rn[En]}}}(),Ft={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Xt=Ne.cachedCode||{},an=Pt.extensions,Ht=function(en,rn){function En(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function gn(vn,Lt,Nt){var $t=Vn.pop()||new En;$t.startQueryIndex=vn,$t.endQueryIndex=Lt,$t.sum=0,$t.stats=Nt,Jn.push($t)}if(!rn.ext_disjoint_timer_query)return null;var Dn=[],qn=[],Vn=[],Jn=[],xr=[],Jt=[];return{beginQuery:function(vn){var Lt=Dn.pop()||rn.ext_disjoint_timer_query.createQueryEXT();rn.ext_disjoint_timer_query.beginQueryEXT(35007,Lt),qn.push(Lt),gn(qn.length-1,qn.length,vn)},endQuery:function(){rn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:gn,update:function(){var vn,Lt;if((vn=qn.length)!==0){Jt.length=Math.max(Jt.length,vn+1),xr.length=Math.max(xr.length,vn+1),xr[0]=0;var Nt=Jt[0]=0;for(Lt=vn=0;Lt<qn.length;++Lt){var $t=qn[Lt];rn.ext_disjoint_timer_query.getQueryObjectEXT($t,34919)?(Nt+=rn.ext_disjoint_timer_query.getQueryObjectEXT($t,34918),Dn.push($t)):qn[vn++]=$t,xr[Lt+1]=Nt,Jt[Lt+1]=vn}for(qn.length=vn,Lt=vn=0;Lt<Jn.length;++Lt){var fn=(Nt=Jn[Lt]).startQueryIndex;$t=Nt.endQueryIndex,Nt.sum+=xr[$t]-xr[fn],fn=Jt[fn],($t=Jt[$t])===fn?(Nt.stats.gpuTime+=Nt.sum/1e6,Vn.push(Nt)):(Nt.startQueryIndex=fn,Nt.endQueryIndex=$t,Jn[vn++]=Nt)}Jn.length=vn}},getNumPendingQueries:function(){return qn.length},clear:function(){Dn.push.apply(Dn,qn);for(var vn=0;vn<Dn.length;vn++)rn.ext_disjoint_timer_query.deleteQueryEXT(Dn[vn]);qn.length=0,Dn.length=0},restore:function(){qn.length=0,Dn.length=0}}}(0,an),Zt=ue(),jt=bt.drawingBufferWidth,Pn=bt.drawingBufferHeight,Tn={tick:0,time:0,viewportWidth:jt,viewportHeight:Pn,framebufferWidth:jt,framebufferHeight:Pn,drawingBufferWidth:jt,drawingBufferHeight:Pn,pixelRatio:Ne.pixelRatio},mn=(jt={elements:null,primitive:4,count:-1,offset:0,instances:-1},ye(bt,an)),Qt=c(bt,Ft,Ne,function(en){return nn.destroyBuffer(en)}),un=d(bt,an,Qt,Ft),nn=P(bt,an,mn,Ft,Qt,un,jt),hn=I(bt,Dt,Ft,Ne),bn=S(bt,an,mn,function(){Ln.procs.poll()},Tn,Ft,Ne),wn=gt(bt,an,0,Ft,Ne),Cn=A(bt,an,mn,bn,wn,Ft),Ln=J(bt,Dt,an,mn,Qt,un,0,Cn,{},nn,hn,jt,Tn,Ht,Xt,Ne),Mn=(Dt=D(bt,Cn,Ln.procs.poll,Tn),Ln.next),jn=bt.canvas,Rn=[],Qn=[],Yn=[],ar=[Ne.onDestroy],Kn=null;jn&&(jn.addEventListener("webglcontextlost",ze,!1),jn.addEventListener("webglcontextrestored",Fe,!1));var mr=Cn.setFBO=rt({framebuffer:se.define.call(null,1,"framebuffer")});return ut(),St=X(rt,{clear:function(en){if("framebuffer"in en)if(en.framebuffer&&en.framebuffer_reglType==="framebufferCube")for(var rn=0;6>rn;++rn)mr(X({framebuffer:en.framebuffer.faces[rn]},en),We);else mr(en,We);else We(0,en)},prop:se.define.bind(null,1),context:se.define.bind(null,2),this:se.define.bind(null,3),draw:rt({}),buffer:function(en){return Qt.create(en,34962,!1,!1)},elements:function(en){return un.create(en,!1)},texture:bn.create2D,cube:bn.createCube,renderbuffer:wn.create,framebuffer:Cn.create,framebufferCube:Cn.createCube,vao:nn.createVAO,attributes:St,frame:ft,on:function(en,rn){var En;switch(en){case"frame":return ft(rn);case"lost":En=Qn;break;case"restore":En=Yn;break;case"destroy":En=ar}return En.push(rn),{cancel:function(){for(var gn=0;gn<En.length;++gn)if(En[gn]===rn){En[gn]=En[En.length-1],En.pop();break}}}},limits:mn,hasExtension:function(en){return 0<=mn.extensions.indexOf(en.toLowerCase())},read:Dt,destroy:function(){Rn.length=0,nt(),jn&&(jn.removeEventListener("webglcontextlost",ze),jn.removeEventListener("webglcontextrestored",Fe)),hn.clear(),Cn.clear(),wn.clear(),nn.clear(),bn.clear(),un.clear(),Qt.clear(),Ht&&Ht.clear(),ar.forEach(function(en){en()})},_gl:bt,_refresh:ut,poll:function(){vt(),Ht&&Ht.update()},now:Mt,stats:Ft,getCachedCode:function(){return Xt},preloadCachedCode:function(en){Object.entries(en).forEach(function(rn){Xt[rn[0]]=rn[1]})}}),Ne.onDone(null,St),St}}()},30456:function(F,C,e){var T=e(33576),k=T.Buffer;function a(b,f){for(var s in b)f[s]=b[s]}function w(b,f,s){return k(b,f,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?F.exports=T:(a(T,C),C.Buffer=w),w.prototype=Object.create(k.prototype),a(k,w),w.from=function(b,f,s){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,f,s)},w.alloc=function(b,f,s){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=k(b);return f!==void 0?typeof s=="string"?t.fill(f,s):t.fill(f):t.fill(0),t},w.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},w.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return T.SlowBuffer(b)}},14500:function(F,C,e){"use strict";var T=e(53664),k=e(64348),a=e(39640)(),w=e(2304),b=T("%TypeError%"),f=T("%Math.floor%");F.exports=function(s,t){if(typeof s!="function")throw new b("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||f(t)!==t)throw new b("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,n=!0;if("length"in s&&w){var o=w(s,"length");o&&!o.configurable&&(r=!1),o&&!o.writable&&(n=!1)}return(r||n||!i)&&(a?k(s,"length",t,!0,!0):k(s,"length",t)),s}},29936:function(F,C,e){F.exports=k;var T=e(61252).EventEmitter;function k(){T.call(this)}e(6768)(k,T),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(a,w){var b=this;function f(l){a.writable&&a.write(l)===!1&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",f),a.on("drain",s),a._isStdio||w&&w.end===!1||(b.on("end",i),b.on("close",r));var t=!1;function i(){t||(t=!0,a.end())}function r(){t||(t=!0,typeof a.destroy=="function"&&a.destroy())}function n(l){if(o(),T.listenerCount(this,"error")===0)throw l}function o(){b.removeListener("data",f),a.removeListener("drain",s),b.removeListener("end",i),b.removeListener("close",r),b.removeListener("error",n),a.removeListener("error",n),b.removeListener("end",o),b.removeListener("close",o),a.removeListener("close",o)}return b.on("error",n),a.on("error",n),b.on("end",o),b.on("close",o),a.on("close",o),a.emit("pipe",b),a}},92784:function(F){"use strict";var C={};function e(k,a,w){w||(w=Error);var b=function(f){var s,t;function i(r,n,o){return f.call(this,function(l,c,d){return typeof a=="string"?a:a(l,c,d)}(r,n,o))||this}return t=f,(s=i).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,i}(w);b.prototype.name=w.name,b.prototype.code=k,C[k]=b}function T(k,a){if(Array.isArray(k)){var w=k.length;return k=k.map(function(b){return String(b)}),w>2?"one of ".concat(a," ").concat(k.slice(0,w-1).join(", "),", or ")+k[w-1]:w===2?"one of ".concat(a," ").concat(k[0]," or ").concat(k[1]):"of ".concat(a," ").concat(k[0])}return"of ".concat(a," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,a){return'The value "'+a+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,a,w){var b,f,s,t,i;if(typeof a=="string"&&(f="not ",a.substr(0,4)===f)?(b="must not be",a=a.replace(/^not /,"")):b="must be",function(n,o,l){return(l===void 0||l>n.length)&&(l=n.length),n.substring(l-9,l)===o}(k," argument"))s="The ".concat(k," ").concat(b," ").concat(T(a,"type"));else{var r=(typeof i!="number"&&(i=0),i+1>(t=k).length||t.indexOf(".",i)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(r," ").concat(b," ").concat(T(a,"type"))}return s+". Received type ".concat(typeof w)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),F.exports.i=C},15316:function(F,C,e){"use strict";var T=e(4168),k=Object.keys||function(n){var o=[];for(var l in n)o.push(l);return o};F.exports=t;var a=e(12348),w=e(11288);e(6768)(t,a);for(var b=k(w.prototype),f=0;f<b.length;f++){var s=b[f];t.prototype[s]||(t.prototype[s]=w.prototype[s])}function t(n){if(!(this instanceof t))return new t(n);a.call(this,n),w.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||T.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},27136:function(F,C,e){"use strict";F.exports=k;var T=e(22477);function k(a){if(!(this instanceof k))return new k(a);T.call(this,a)}e(6768)(k,T),k.prototype._transform=function(a,w,b){b(null,a)}},12348:function(F,C,e){"use strict";var T,k=e(4168);F.exports=_,_.ReadableState=v,e(61252).EventEmitter;var a,w=function(ee,Q){return ee.listeners(Q).length},b=e(4776),f=e(33576).Buffer,s=e.g.Uint8Array||function(){},t=e(19768);a=t&&t.debuglog?t.debuglog("stream"):function(){};var i,r,n,o=e(47264),l=e(55324),c=e(24888).getHighWaterMark,d=e(92784).i,u=d.ERR_INVALID_ARG_TYPE,x=d.ERR_STREAM_PUSH_AFTER_EOF,p=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(_,b);var m=l.errorOrDestroy,y=["error","close","destroy","pause","resume"];function v(ee,Q,J){T=T||e(15316),ee=ee||{},typeof J!="boolean"&&(J=Q instanceof T),this.objectMode=!!ee.objectMode,J&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=c(this,ee,"readableHighWaterMark",J),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&(i||(i=e(86032).o),this.decoder=new i(ee.encoding),this.encoding=ee.encoding)}function _(ee){if(T=T||e(15316),!(this instanceof _))return new _(ee);var Q=this instanceof T;this._readableState=new v(ee,this,Q),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),b.call(this)}function h(ee,Q,J,K,X){a("readableAddChunk",Q);var ie,se=ee._readableState;if(Q===null)se.reading=!1,function(ae,ue){if(a("onEofChunk"),!ue.ended){if(ue.decoder){var ve=ue.decoder.end();ve&&ve.length&&(ue.buffer.push(ve),ue.length+=ue.objectMode?1:ve.length)}ue.ended=!0,ue.sync?P(ae):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,I(ae)))}}(ee,se);else if(X||(ie=function(ae,ue){var ve,ye;return ye=ue,f.isBuffer(ye)||ye instanceof s||typeof ue=="string"||ue===void 0||ae.objectMode||(ve=new u("chunk",["string","Buffer","Uint8Array"],ue)),ve}(se,Q)),ie)m(ee,ie);else if(se.objectMode||Q&&Q.length>0)if(typeof Q=="string"||se.objectMode||Object.getPrototypeOf(Q)===f.prototype||(Q=function(ae){return f.from(ae)}(Q)),K)se.endEmitted?m(ee,new g):S(ee,se,Q,!0);else if(se.ended)m(ee,new x);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!J?(Q=se.decoder.write(Q),se.objectMode||Q.length!==0?S(ee,se,Q,!1):D(ee,se)):S(ee,se,Q,!1)}else K||(se.reading=!1,D(ee,se));return!se.ended&&(se.length<se.highWaterMark||se.length===0)}function S(ee,Q,J,K){Q.flowing&&Q.length===0&&!Q.sync?(Q.awaitDrain=0,ee.emit("data",J)):(Q.length+=Q.objectMode?1:J.length,K?Q.buffer.unshift(J):Q.buffer.push(J),Q.needReadable&&P(ee)),D(ee,Q)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function(ee,Q){Q(ee)},_.prototype.push=function(ee,Q){var J,K=this._readableState;return K.objectMode?J=!0:typeof ee=="string"&&((Q=Q||K.defaultEncoding)!==K.encoding&&(ee=f.from(ee,Q),Q=""),J=!0),h(this,ee,Q,!1,J)},_.prototype.unshift=function(ee){return h(this,ee,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(ee){i||(i=e(86032).o);var Q=new i(ee);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var J=this._readableState.buffer.head,K="";J!==null;)K+=Q.write(J.data),J=J.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};var A=1073741824;function E(ee,Q){return ee<=0||Q.length===0&&Q.ended?0:Q.objectMode?1:ee!=ee?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(ee>Q.highWaterMark&&(Q.highWaterMark=function(J){return J>=A?J=A:(J--,J|=J>>>1,J|=J>>>2,J|=J>>>4,J|=J>>>8,J|=J>>>16,J++),J}(ee)),ee<=Q.length?ee:Q.ended?Q.length:(Q.needReadable=!0,0))}function P(ee){var Q=ee._readableState;a("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(a("emitReadable",Q.flowing),Q.emittedReadable=!0,k.nextTick(I,ee))}function I(ee){var Q=ee._readableState;a("emitReadable_",Q.destroyed,Q.length,Q.ended),Q.destroyed||!Q.length&&!Q.ended||(ee.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,Y(ee)}function D(ee,Q){Q.readingMore||(Q.readingMore=!0,k.nextTick(z,ee,Q))}function z(ee,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&Q.length===0);){var J=Q.length;if(a("maybeReadMore read 0"),ee.read(0),J===Q.length)break}Q.readingMore=!1}function V(ee){var Q=ee._readableState;Q.readableListening=ee.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function O(ee){a("readable nexttick read 0"),ee.read(0)}function j(ee,Q){a("resume",Q.reading),Q.reading||ee.read(0),Q.resumeScheduled=!1,ee.emit("resume"),Y(ee),Q.flowing&&!Q.reading&&ee.read(0)}function Y(ee){var Q=ee._readableState;for(a("flow",Q.flowing);Q.flowing&&ee.read()!==null;);}function B(ee,Q){return Q.length===0?null:(Q.objectMode?J=Q.buffer.shift():!ee||ee>=Q.length?(J=Q.decoder?Q.buffer.join(""):Q.buffer.length===1?Q.buffer.first():Q.buffer.concat(Q.length),Q.buffer.clear()):J=Q.buffer.consume(ee,Q.decoder),J);var J}function U(ee){var Q=ee._readableState;a("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,k.nextTick(q,Q,ee))}function q(ee,Q){if(a("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,Q.readable=!1,Q.emit("end"),ee.autoDestroy)){var J=Q._writableState;(!J||J.autoDestroy&&J.finished)&&Q.destroy()}}function te(ee,Q){for(var J=0,K=ee.length;J<K;J++)if(ee[J]===Q)return J;return-1}_.prototype.read=function(ee){a("read",ee),ee=parseInt(ee,10);var Q=this._readableState,J=ee;if(ee!==0&&(Q.emittedReadable=!1),ee===0&&Q.needReadable&&((Q.highWaterMark!==0?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return a("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended?U(this):P(this),null;if((ee=E(ee,Q))===0&&Q.ended)return Q.length===0&&U(this),null;var K,X=Q.needReadable;return a("need readable",X),(Q.length===0||Q.length-ee<Q.highWaterMark)&&a("length less than watermark",X=!0),Q.ended||Q.reading?a("reading or ended",X=!1):X&&(a("do read"),Q.reading=!0,Q.sync=!0,Q.length===0&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(ee=E(J,Q))),(K=ee>0?B(ee,Q):null)===null?(Q.needReadable=Q.length<=Q.highWaterMark,ee=0):(Q.length-=ee,Q.awaitDrain=0),Q.length===0&&(Q.ended||(Q.needReadable=!0),J!==ee&&Q.ended&&U(this)),K!==null&&this.emit("data",K),K},_.prototype._read=function(ee){m(this,new p("_read()"))},_.prototype.pipe=function(ee,Q){var J=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=ee;break;case 1:K.pipes=[K.pipes,ee];break;default:K.pipes.push(ee)}K.pipesCount+=1,a("pipe count=%d opts=%j",K.pipesCount,Q);var X=Q&&Q.end===!1||ee===k.stdout||ee===k.stderr?de:ie;function ie(){a("onend"),ee.end()}K.endEmitted?k.nextTick(X):J.once("end",X),ee.on("unpipe",function me(ke,Ce){a("onunpipe"),ke===J&&Ce&&Ce.hasUnpiped===!1&&(Ce.hasUnpiped=!0,a("cleanup"),ee.removeListener("close",ye),ee.removeListener("finish",pe),ee.removeListener("drain",se),ee.removeListener("error",ve),ee.removeListener("unpipe",me),J.removeListener("end",ie),J.removeListener("end",de),J.removeListener("data",ue),ae=!0,!K.awaitDrain||ee._writableState&&!ee._writableState.needDrain||se())});var se=function(me){return function(){var ke=me._readableState;a("pipeOnDrain",ke.awaitDrain),ke.awaitDrain&&ke.awaitDrain--,ke.awaitDrain===0&&w(me,"data")&&(ke.flowing=!0,Y(me))}}(J);ee.on("drain",se);var ae=!1;function ue(me){a("ondata");var ke=ee.write(me);a("dest.write",ke),ke===!1&&((K.pipesCount===1&&K.pipes===ee||K.pipesCount>1&&te(K.pipes,ee)!==-1)&&!ae&&(a("false write response, pause",K.awaitDrain),K.awaitDrain++),J.pause())}function ve(me){a("onerror",me),de(),ee.removeListener("error",ve),w(ee,"error")===0&&m(ee,me)}function ye(){ee.removeListener("finish",pe),de()}function pe(){a("onfinish"),ee.removeListener("close",ye),de()}function de(){a("unpipe"),J.unpipe(ee)}return J.on("data",ue),function(me,ke,Ce){if(typeof me.prependListener=="function")return me.prependListener(ke,Ce);me._events&&me._events[ke]?Array.isArray(me._events[ke])?me._events[ke].unshift(Ce):me._events[ke]=[Ce,me._events[ke]]:me.on(ke,Ce)}(ee,"error",ve),ee.once("close",ye),ee.once("finish",pe),ee.emit("pipe",J),K.flowing||(a("pipe resume"),J.resume()),ee},_.prototype.unpipe=function(ee){var Q=this._readableState,J={hasUnpiped:!1};if(Q.pipesCount===0)return this;if(Q.pipesCount===1)return ee&&ee!==Q.pipes||(ee||(ee=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,ee&&ee.emit("unpipe",this,J)),this;if(!ee){var K=Q.pipes,X=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var ie=0;ie<X;ie++)K[ie].emit("unpipe",this,{hasUnpiped:!1});return this}var se=te(Q.pipes,ee);return se===-1||(Q.pipes.splice(se,1),Q.pipesCount-=1,Q.pipesCount===1&&(Q.pipes=Q.pipes[0]),ee.emit("unpipe",this,J)),this},_.prototype.on=function(ee,Q){var J=b.prototype.on.call(this,ee,Q),K=this._readableState;return ee==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):ee==="readable"&&(K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,a("on readable",K.length,K.reading),K.length?P(this):K.reading||k.nextTick(O,this))),J},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(ee,Q){var J=b.prototype.removeListener.call(this,ee,Q);return ee==="readable"&&k.nextTick(V,this),J},_.prototype.removeAllListeners=function(ee){var Q=b.prototype.removeAllListeners.apply(this,arguments);return ee!=="readable"&&ee!==void 0||k.nextTick(V,this),Q},_.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(a("resume"),ee.flowing=!ee.readableListening,function(Q,J){J.resumeScheduled||(J.resumeScheduled=!0,k.nextTick(j,Q,J))}(this,ee)),ee.paused=!1,this},_.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(ee){var Q=this,J=this._readableState,K=!1;for(var X in ee.on("end",function(){if(a("wrapped end"),J.decoder&&!J.ended){var se=J.decoder.end();se&&se.length&&Q.push(se)}Q.push(null)}),ee.on("data",function(se){a("wrapped data"),J.decoder&&(se=J.decoder.write(se)),J.objectMode&&se==null||(J.objectMode||se&&se.length)&&(Q.push(se)||(K=!0,ee.pause()))}),ee)this[X]===void 0&&typeof ee[X]=="function"&&(this[X]=function(se){return function(){return ee[se].apply(ee,arguments)}}(X));for(var ie=0;ie<y.length;ie++)ee.on(y[ie],this.emit.bind(this,y[ie]));return this._read=function(se){a("wrapped _read",se),K&&(K=!1,ee.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=e(60328)),r(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),_._fromList=B,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function(ee,Q){return n===void 0&&(n=e(90555)),n(_,ee,Q)})},22477:function(F,C,e){"use strict";F.exports=t;var T=e(92784).i,k=T.ERR_METHOD_NOT_IMPLEMENTED,a=T.ERR_MULTIPLE_CALLBACK,w=T.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=T.ERR_TRANSFORM_WITH_LENGTH_0,f=e(15316);function s(n,o){var l=this._transformState;l.transforming=!1;var c=l.writecb;if(c===null)return this.emit("error",new a);l.writechunk=null,l.writecb=null,o!=null&&this.push(o),c(n);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function t(n){if(!(this instanceof t))return new t(n);f.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",i)}function i(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(o,l){r(n,o,l)})}function r(n,o,l){if(o)return n.emit("error",o);if(l!=null&&n.push(l),n._writableState.length)throw new b;if(n._transformState.transforming)throw new w;return n.push(null)}e(6768)(t,f),t.prototype.push=function(n,o){return this._transformState.needTransform=!1,f.prototype.push.call(this,n,o)},t.prototype._transform=function(n,o,l){l(new k("_transform()"))},t.prototype._write=function(n,o,l){var c=this._transformState;if(c.writecb=l,c.writechunk=n,c.writeencoding=o,!c.transforming){var d=this._readableState;(c.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},t.prototype._read=function(n){var o=this._transformState;o.writechunk===null||o.transforming?o.needTransform=!0:(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform))},t.prototype._destroy=function(n,o){f.prototype._destroy.call(this,n,function(l){o(l)})}},11288:function(F,C,e){"use strict";var T,k=e(4168);function a(D){var z=this;this.next=null,this.entry=null,this.finish=function(){(function(V,O,j){var Y=V.entry;for(V.entry=null;Y;){var B=Y.callback;O.pendingcb--,B(void 0),Y=Y.next}O.corkedRequestsFree.next=V})(z,D)}}F.exports=_,_.WritableState=v;var w,b={deprecate:e(96656)},f=e(4776),s=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),r=e(24888).getHighWaterMark,n=e(92784).i,o=n.ERR_INVALID_ARG_TYPE,l=n.ERR_METHOD_NOT_IMPLEMENTED,c=n.ERR_MULTIPLE_CALLBACK,d=n.ERR_STREAM_CANNOT_PIPE,u=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,p=n.ERR_STREAM_WRITE_AFTER_END,g=n.ERR_UNKNOWN_ENCODING,m=i.errorOrDestroy;function y(){}function v(D,z,V){T=T||e(15316),D=D||{},typeof V!="boolean"&&(V=z instanceof T),this.objectMode=!!D.objectMode,V&&(this.objectMode=this.objectMode||!!D.writableObjectMode),this.highWaterMark=r(this,D,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=D.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){(function(Y,B){var U=Y._writableState,q=U.sync,te=U.writecb;if(typeof te!="function")throw new c;if(function(Q){Q.writing=!1,Q.writecb=null,Q.length-=Q.writelen,Q.writelen=0}(U),B)(function(Q,J,K,X,ie){--J.pendingcb,K?(k.nextTick(ie,X),k.nextTick(I,Q,J),Q._writableState.errorEmitted=!0,m(Q,X)):(ie(X),Q._writableState.errorEmitted=!0,m(Q,X),I(Q,J))})(Y,U,q,B,te);else{var ee=E(U)||Y.destroyed;ee||U.corked||U.bufferProcessing||!U.bufferedRequest||A(Y,U),q?k.nextTick(S,Y,U,ee,te):S(Y,U,ee,te)}})(z,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function _(D){var z=this instanceof(T=T||e(15316));if(!z&&!w.call(_,this))return new _(D);this._writableState=new v(D,this,z),this.writable=!0,D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final)),f.call(this)}function h(D,z,V,O,j,Y,B){z.writelen=O,z.writecb=B,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new u("write")):V?D._writev(j,z.onwrite):D._write(j,Y,z.onwrite),z.sync=!1}function S(D,z,V,O){V||function(j,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,j.emit("drain"))}(D,z),z.pendingcb--,O(),I(D,z)}function A(D,z){z.bufferProcessing=!0;var V=z.bufferedRequest;if(D._writev&&V&&V.next){var O=z.bufferedRequestCount,j=new Array(O),Y=z.corkedRequestsFree;Y.entry=V;for(var B=0,U=!0;V;)j[B]=V,V.isBuf||(U=!1),V=V.next,B+=1;j.allBuffers=U,h(D,z,!0,z.length,j,"",Y.finish),z.pendingcb++,z.lastBufferedRequest=null,Y.next?(z.corkedRequestsFree=Y.next,Y.next=null):z.corkedRequestsFree=new a(z),z.bufferedRequestCount=0}else{for(;V;){var q=V.chunk,te=V.encoding,ee=V.callback;if(h(D,z,!1,z.objectMode?1:q.length,q,te,ee),V=V.next,z.bufferedRequestCount--,z.writing)break}V===null&&(z.lastBufferedRequest=null)}z.bufferedRequest=V,z.bufferProcessing=!1}function E(D){return D.ending&&D.length===0&&D.bufferedRequest===null&&!D.finished&&!D.writing}function P(D,z){D._final(function(V){z.pendingcb--,V&&m(D,V),z.prefinished=!0,D.emit("prefinish"),I(D,z)})}function I(D,z){var V=E(z);if(V&&(function(j,Y){Y.prefinished||Y.finalCalled||(typeof j._final!="function"||Y.destroyed?(Y.prefinished=!0,j.emit("prefinish")):(Y.pendingcb++,Y.finalCalled=!0,k.nextTick(P,j,Y)))}(D,z),z.pendingcb===0&&(z.finished=!0,D.emit("finish"),z.autoDestroy))){var O=D._readableState;(!O||O.autoDestroy&&O.endEmitted)&&D.destroy()}return V}e(6768)(_,f),v.prototype.getBuffer=function(){for(var D=this.bufferedRequest,z=[];D;)z.push(D),D=D.next;return z},function(){try{Object.defineProperty(v.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(D){return!!w.call(this,D)||this===_&&D&&D._writableState instanceof v}})):w=function(D){return D instanceof this},_.prototype.pipe=function(){m(this,new d)},_.prototype.write=function(D,z,V){var O,j=this._writableState,Y=!1,B=!j.objectMode&&(O=D,s.isBuffer(O)||O instanceof t);return B&&!s.isBuffer(D)&&(D=function(U){return s.from(U)}(D)),typeof z=="function"&&(V=z,z=null),B?z="buffer":z||(z=j.defaultEncoding),typeof V!="function"&&(V=y),j.ending?function(U,q){var te=new p;m(U,te),k.nextTick(q,te)}(this,V):(B||function(U,q,te,ee){var Q;return te===null?Q=new x:typeof te=="string"||q.objectMode||(Q=new o("chunk",["string","Buffer"],te)),!Q||(m(U,Q),k.nextTick(ee,Q),!1)}(this,j,D,V))&&(j.pendingcb++,Y=function(U,q,te,ee,Q,J){if(!te){var K=function(ae,ue,ve){return ae.objectMode||ae.decodeStrings===!1||typeof ue!="string"||(ue=s.from(ue,ve)),ue}(q,ee,Q);ee!==K&&(te=!0,Q="buffer",ee=K)}var X=q.objectMode?1:ee.length;q.length+=X;var ie=q.length<q.highWaterMark;if(ie||(q.needDrain=!0),q.writing||q.corked){var se=q.lastBufferedRequest;q.lastBufferedRequest={chunk:ee,encoding:Q,isBuf:te,callback:J,next:null},se?se.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else h(U,q,!1,X,ee,Q,J);return ie}(this,j,B,D,z,V)),Y},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var D=this._writableState;D.corked&&(D.corked--,D.writing||D.corked||D.bufferProcessing||!D.bufferedRequest||A(this,D))},_.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new g(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(D,z,V){V(new l("_write()"))},_.prototype._writev=null,_.prototype.end=function(D,z,V){var O=this._writableState;return typeof D=="function"?(V=D,D=null,z=null):typeof z=="function"&&(V=z,z=null),D!=null&&this.write(D,z),O.corked&&(O.corked=1,this.uncork()),O.ending||function(j,Y,B){Y.ending=!0,I(j,Y),B&&(Y.finished?k.nextTick(B):j.once("finish",B)),Y.ended=!0,j.writable=!1}(this,O,V),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),_.prototype.destroy=i.destroy,_.prototype._undestroy=i.undestroy,_.prototype._destroy=function(D,z){z(D)}},60328:function(F,C,e){"use strict";var T,k=e(4168);function a(x,p,g){return p in x?Object.defineProperty(x,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[p]=g,x}var w=e(15932),b=Symbol("lastResolve"),f=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function o(x,p){return{value:x,done:p}}function l(x){var p=x[b];if(p!==null){var g=x[n].read();g!==null&&(x[i]=null,x[b]=null,x[f]=null,p(o(g,!1)))}}function c(x){k.nextTick(l,x)}var d=Object.getPrototypeOf(function(){}),u=Object.setPrototypeOf((a(T={get stream(){return this[n]},next:function(){var x=this,p=this[s];if(p!==null)return Promise.reject(p);if(this[t])return Promise.resolve(o(void 0,!0));if(this[n].destroyed)return new Promise(function(v,_){k.nextTick(function(){x[s]?_(x[s]):v(o(void 0,!0))})});var g,m=this[i];if(m)g=new Promise(function(v,_){return function(h,S){v.then(function(){_[t]?h(o(void 0,!0)):_[r](h,S)},S)}}(m,this));else{var y=this[n].read();if(y!==null)return Promise.resolve(o(y,!1));g=new Promise(this[r])}return this[i]=g,g}},Symbol.asyncIterator,function(){return this}),a(T,"return",function(){var x=this;return new Promise(function(p,g){x[n].destroy(null,function(m){m?g(m):p(o(void 0,!0))})})}),T),d);F.exports=function(x){var p,g=Object.create(u,(a(p={},n,{value:x,writable:!0}),a(p,b,{value:null,writable:!0}),a(p,f,{value:null,writable:!0}),a(p,s,{value:null,writable:!0}),a(p,t,{value:x._readableState.endEmitted,writable:!0}),a(p,r,{value:function(m,y){var v=g[n].read();v?(g[i]=null,g[b]=null,g[f]=null,m(o(v,!1))):(g[b]=m,g[f]=y)},writable:!0}),p));return g[i]=null,w(x,function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=g[f];return y!==null&&(g[i]=null,g[b]=null,g[f]=null,y(m)),void(g[s]=m)}var v=g[b];v!==null&&(g[i]=null,g[b]=null,g[f]=null,v(o(void 0,!0))),g[t]=!0}),x.on("readable",c.bind(null,g)),g}},47264:function(F,C,e){"use strict";function T(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),i.push.apply(i,r)}return i}function k(s,t,i){return t in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function a(s,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}var w=e(33576).Buffer,b=e(21576).inspect,f=b&&b.custom||"inspect";F.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,i;return t=s,i=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o}},{key:"concat",value:function(r){if(this.length===0)return w.alloc(0);for(var n,o,l,c=w.allocUnsafe(r>>>0),d=this.head,u=0;d;)n=d.data,o=c,l=u,w.prototype.copy.call(n,o,l),u+=d.data.length,d=d.next;return c}},{key:"consume",value:function(r,n){var o;return r<this.head.data.length?(o=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):o=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),o}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,o=1,l=n.data;for(r-=l.length;n=n.next;){var c=n.data,d=r>c.length?c.length:r;if(d===c.length?l+=c:l+=c.slice(0,r),(r-=d)==0){d===c.length?(++o,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=c.slice(d));break}++o}return this.length-=o,l}},{key:"_getBuffer",value:function(r){var n=w.allocUnsafe(r),o=this.head,l=1;for(o.data.copy(n),r-=o.data.length;o=o.next;){var c=o.data,d=r>c.length?c.length:r;if(c.copy(n,n.length-r,0,d),(r-=d)==0){d===c.length?(++l,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=c.slice(d));break}++l}return this.length-=l,n}},{key:f,value:function(r,n){return b(this,function(o){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?T(Object(c),!0).forEach(function(d){k(o,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(c)):T(Object(c)).forEach(function(d){Object.defineProperty(o,d,Object.getOwnPropertyDescriptor(c,d))})}return o}({},n,{depth:0,customInspect:!1}))}}],i&&a(t.prototype,i),s}()},55324:function(F,C,e){"use strict";var T=e(4168);function k(b,f){w(b,f),a(b)}function a(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function w(b,f){b.emit("error",f)}F.exports={destroy:function(b,f){var s=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(f?f(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,T.nextTick(w,this,b)):T.nextTick(w,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(r){!f&&r?s._writableState?s._writableState.errorEmitted?T.nextTick(a,s):(s._writableState.errorEmitted=!0,T.nextTick(k,s,r)):T.nextTick(k,s,r):f?(T.nextTick(a,s),f(r)):T.nextTick(a,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,f){var s=b._readableState,t=b._writableState;s&&s.autoDestroy||t&&t.autoDestroy?b.destroy(f):b.emit("error",f)}}},15932:function(F,C,e){"use strict";var T=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}F.exports=function a(w,b,f){if(typeof b=="function")return a(w,null,b);b||(b={}),f=function(x){var p=!1;return function(){if(!p){p=!0;for(var g=arguments.length,m=new Array(g),y=0;y<g;y++)m[y]=arguments[y];x.apply(this,m)}}}(f||k);var s=b.readable||b.readable!==!1&&w.readable,t=b.writable||b.writable!==!1&&w.writable,i=function(){w.writable||n()},r=w._writableState&&w._writableState.finished,n=function(){t=!1,r=!0,s||f.call(w)},o=w._readableState&&w._readableState.endEmitted,l=function(){s=!1,o=!0,t||f.call(w)},c=function(x){f.call(w,x)},d=function(){var x;return s&&!o?(w._readableState&&w._readableState.ended||(x=new T),f.call(w,x)):t&&!r?(w._writableState&&w._writableState.ended||(x=new T),f.call(w,x)):void 0},u=function(){w.req.on("finish",n)};return function(x){return x.setHeader&&typeof x.abort=="function"}(w)?(w.on("complete",n),w.on("abort",d),w.req?u():w.on("request",u)):t&&!w._writableState&&(w.on("end",i),w.on("close",i)),w.on("end",l),w.on("finish",n),b.error!==!1&&w.on("error",c),w.on("close",d),function(){w.removeListener("complete",n),w.removeListener("abort",d),w.removeListener("request",u),w.req&&w.req.removeListener("finish",n),w.removeListener("end",i),w.removeListener("close",i),w.removeListener("finish",n),w.removeListener("end",l),w.removeListener("error",c),w.removeListener("close",d)}}},90555:function(F){F.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(F,C,e){"use strict";var T,k=e(92784).i,a=k.ERR_MISSING_ARGS,w=k.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function f(t){t()}function s(t,i){return t.pipe(i)}F.exports=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var n,o=function(c){return c.length?typeof c[c.length-1]!="function"?b:c.pop():b}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new a("streams");var l=i.map(function(c,d){var u=d<i.length-1;return function(x,p,g,m){m=function(_){var h=!1;return function(){h||(h=!0,_.apply(void 0,arguments))}}(m);var y=!1;x.on("close",function(){y=!0}),T===void 0&&(T=e(15932)),T(x,{readable:p,writable:g},function(_){if(_)return m(_);y=!0,m()});var v=!1;return function(_){if(!y&&!v)return v=!0,function(h){return h.setHeader&&typeof h.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void m(_||new w("pipe"))}}(c,u,d>0,function(x){n||(n=x),x&&l.forEach(f),u||(l.forEach(f),o(n))})});return i.reduce(s)}},24888:function(F,C,e){"use strict";var T=e(92784).i.ERR_INVALID_OPT_VALUE;F.exports={getHighWaterMark:function(k,a,w,b){var f=function(s,t,i){return s.highWaterMark!=null?s.highWaterMark:t?s[i]:null}(a,b,w);if(f!=null){if(!isFinite(f)||Math.floor(f)!==f||f<0)throw new T(b?w:"highWaterMark",f);return Math.floor(f)}return k.objectMode?16:16384}}},4776:function(F,C,e){F.exports=e(61252).EventEmitter},86032:function(F,C,e){"use strict";var T=e(30456).Buffer,k=T.isEncoding||function(o){switch((o=""+o)&&o.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(o){var l;switch(this.encoding=function(c){var d=function(u){if(!u)return"utf8";for(var x;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(x)return;u=(""+u).toLowerCase(),x=!0}}(c);if(typeof d!="string"&&(T.isEncoding===k||!k(c)))throw new Error("Unknown encoding: "+c);return d||c}(o),this.encoding){case"utf16le":this.text=f,this.end=s,l=4;break;case"utf8":this.fillLast=b,l=4;break;case"base64":this.text=t,this.end=i,l=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=T.allocUnsafe(l)}function w(o){return o<=127?0:o>>5==6?2:o>>4==14?3:o>>3==30?4:o>>6==2?-1:-2}function b(o){var l=this.lastTotal-this.lastNeed,c=function(d,u,x){if((192&u[0])!=128)return d.lastNeed=0,"\uFFFD";if(d.lastNeed>1&&u.length>1){if((192&u[1])!=128)return d.lastNeed=1,"\uFFFD";if(d.lastNeed>2&&u.length>2&&(192&u[2])!=128)return d.lastNeed=2,"\uFFFD"}}(this,o);return c!==void 0?c:this.lastNeed<=o.length?(o.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(o.copy(this.lastChar,l,0,o.length),void(this.lastNeed-=o.length))}function f(o,l){if((o.length-l)%2==0){var c=o.toString("utf16le",l);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=o[o.length-1],o.toString("utf16le",l,o.length-1)}function s(o){var l=o&&o.length?this.write(o):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,c)}return l}function t(o,l){var c=(o.length-l)%3;return c===0?o.toString("base64",l):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=o[o.length-1]:(this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1]),o.toString("base64",l,o.length-c))}function i(o){var l=o&&o.length?this.write(o):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function r(o){return o.toString(this.encoding)}function n(o){return o&&o.length?this.write(o):""}C.o=a,a.prototype.write=function(o){if(o.length===0)return"";var l,c;if(this.lastNeed){if((l=this.fillLast(o))===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<o.length?l?l+this.text(o,c):this.text(o,c):l||""},a.prototype.end=function(o){var l=o&&o.length?this.write(o):"";return this.lastNeed?l+"\uFFFD":l},a.prototype.text=function(o,l){var c=function(u,x,p){var g=x.length-1;if(g<p)return 0;var m=w(x[g]);return m>=0?(m>0&&(u.lastNeed=m-1),m):--g<p||m===-2?0:(m=w(x[g]))>=0?(m>0&&(u.lastNeed=m-2),m):--g<p||m===-2?0:(m=w(x[g]))>=0?(m>0&&(m===2?m=0:u.lastNeed=m-3),m):0}(this,o,l);if(!this.lastNeed)return o.toString("utf8",l);this.lastTotal=c;var d=o.length-(c-this.lastNeed);return o.copy(this.lastChar,0,d),o.toString("utf8",l,d)},a.prototype.fillLast=function(o){if(this.lastNeed<=o.length)return o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,o.length),this.lastNeed-=o.length}},55619:function(F,C,e){var T=e(45408),k=e(86844)("stream-parser");F.exports=function(u){var x=u&&typeof u._transform=="function",p=u&&typeof u._write=="function";if(!x&&!p)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),u._bytes=t,u._skipBytes=i,x&&(u._passthrough=r),x?u._transform=o:u._write=n};var a=-1,w=0,b=1,f=2;function s(u){k("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=a,u._parserCallback=null,typeof u.push=="function"&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function t(u,x){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||s(this),k("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=x,this._parserState=w}function i(u,x){T(!this._parserCallback,'there is already a "callback" set!'),T(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||s(this),k("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=x,this._parserState=b}function r(u,x){T(!this._parserCallback,'There is already a "callback" set!'),T(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||s(this),k("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=x,this._parserState=f}function n(u,x,p){this._parserInit||s(this),k("write(%o bytes)",u.length),typeof x=="function"&&(p=x),c(this,u,null,p)}function o(u,x,p){this._parserInit||s(this),k("transform(%o bytes)",u.length),typeof x!="function"&&(x=this._parserOutput),c(this,u,x,p)}function l(u,x,p,g){if(u._parserBytesLeft-=x.length,k("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===w?(u._parserBuffers.push(x),u._parserBuffered+=x.length):u._parserState===f&&p(x),u._parserBytesLeft!==0)return g;var m=u._parserCallback;if(m&&u._parserState===w&&u._parserBuffers.length>1&&(x=Buffer.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==w&&(x=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=a,u._parserBuffers.splice(0),m){var y=[];x&&y.push(x),p&&y.push(p);var v=m.length>y.length;v&&y.push(d(g));var _=m.apply(u,y);if(!v||g===_)return g}}var c=d(function u(x,p,g,m){return x._parserBytesLeft<=0?m(new Error("got data but not currently parsing anything")):p.length<=x._parserBytesLeft?function(){return l(x,p,g,m)}:function(){var y=p.slice(0,x._parserBytesLeft);return l(x,y,g,function(v){return v?m(v):p.length>y.length?function(){return u(x,p.slice(y.length),g,m)}:void 0})}});function d(u){return function(){for(var x=u.apply(this,arguments);typeof x=="function";)x=x();return x}}},86844:function(F,C,e){var T=e(4168);function k(){var a;try{a=C.storage.debug}catch{}return!a&&T!==void 0&&"env"in T&&(a=T.env.DEBUG),a}(C=F.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},C.formatArgs=function(a){var w=this.useColors;if(a[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+a[0]+(w?"%c ":" ")+"+"+C.humanize(this.diff),w){var b="color: "+this.color;a.splice(1,0,b,"color: inherit");var f=0,s=0;a[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(f++,t==="%c"&&(s=f))}),a.splice(s,0,b)}},C.save=function(a){try{a==null?C.storage.removeItem("debug"):C.storage.debug=a}catch{}},C.load=k,C.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},C.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),C.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],C.formatters.j=function(a){try{return JSON.stringify(a)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}},C.enable(k())},89416:function(F,C,e){var T;function k(a){function w(){if(w.enabled){var b=w,f=+new Date,s=f-(T||f);b.diff=s,b.prev=T,b.curr=f,T=f;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=C.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var r=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(n,o){if(n==="%%")return n;r++;var l=C.formatters[o];if(typeof l=="function"){var c=t[r];n=l.call(b,c),t.splice(r,1),r--}return n}),C.formatArgs.call(b,t),(w.log||C.log||console.log.bind(console)).apply(b,t)}}return w.namespace=a,w.enabled=C.enabled(a),w.useColors=C.useColors(),w.color=function(b){var f,s=0;for(f in b)s=(s<<5)-s+b.charCodeAt(f),s|=0;return C.colors[Math.abs(s)%C.colors.length]}(a),typeof C.init=="function"&&C.init(w),w}(C=F.exports=k.debug=k.default=k).coerce=function(a){return a instanceof Error?a.stack||a.message:a},C.disable=function(){C.enable("")},C.enable=function(a){C.save(a),C.names=[],C.skips=[];for(var w=(typeof a=="string"?a:"").split(/[\s,]+/),b=w.length,f=0;f<b;f++)w[f]&&((a=w[f].replace(/\*/g,".*?"))[0]==="-"?C.skips.push(new RegExp("^"+a.substr(1)+"$")):C.names.push(new RegExp("^"+a+"$")))},C.enabled=function(a){var w,b;for(w=0,b=C.skips.length;w<b;w++)if(C.skips[w].test(a))return!1;for(w=0,b=C.names.length;w<b;w++)if(C.names[w].test(a))return!0;return!1},C.humanize=e(93744),C.names=[],C.skips=[],C.formatters={}},93744:function(F){var C=1e3,e=60*C,T=60*e,k=24*T;function a(w,b,f){if(!(w<b))return w<1.5*b?Math.floor(w/b)+" "+f:Math.ceil(w/b)+" "+f+"s"}F.exports=function(w,b){b=b||{};var f,s=typeof w;if(s==="string"&&w.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var r=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*T;case"minutes":case"minute":case"mins":case"min":case"m":return r*e;case"seconds":case"second":case"secs":case"sec":case"s":return r*C;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(w);if(s==="number"&&isNaN(w)===!1)return b.long?a(f=w,k,"day")||a(f,T,"hour")||a(f,e,"minute")||a(f,C,"second")||f+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=T?Math.round(t/T)+"h":t>=e?Math.round(t/e)+"m":t>=C?Math.round(t/C)+"s":t+"ms"}(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))}},39956:function(F,C,e){"use strict";var T=e(32868);F.exports=function(k,a,w){if(k==null)throw Error("First argument should be a string");if(a==null)throw Error("Separator should be a string or a RegExp");w?(typeof w=="string"||Array.isArray(w))&&(w={ignore:w}):w={},w.escape==null&&(w.escape=!0),w.ignore==null?w.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof w.ignore=="string"&&(w.ignore=[w.ignore]),w.ignore=w.ignore.map(function(n){return n.length===1&&(n+=n),n}));var b=T.parse(k,{flat:!0,brackets:w.ignore}),f=b[0].split(a);if(w.escape){for(var s=[],t=0;t<f.length;t++){var i=f[t],r=f[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(s.push(i+a+r),t++):s.push(i)}f=s}for(t=0;t<f.length;t++)b[0]=f[t],f[t]=T.stringify(b,{flat:!0});return f}},78484:function(F){"use strict";F.exports=function(C){for(var e=C.length,T=new Array(e),k=new Array(e),a=new Array(e),w=new Array(e),b=new Array(e),f=new Array(e),s=0;s<e;++s)T[s]=-1,k[s]=0,a[s]=!1,w[s]=0,b[s]=-1,f[s]=[];var t,i=0,r=[],n=[];function o(d){var u=[d],x=[d];for(T[d]=k[d]=i,a[d]=!0,i+=1;x.length>0;){d=x[x.length-1];var p=C[d];if(w[d]<p.length){for(var g=w[d];g<p.length;++g){var m=p[g];if(T[m]<0){T[m]=k[m]=i,a[m]=!0,i+=1,u.push(m),x.push(m);break}a[m]&&(k[d]=0|Math.min(k[d],k[m])),b[m]>=0&&f[d].push(b[m])}w[d]=g}else{if(k[d]===T[d]){var y=[],v=[],_=0;for(g=u.length-1;g>=0;--g){var h=u[g];if(a[h]=!1,y.push(h),v.push(f[h]),_+=f[h].length,b[h]=r.length,h===d){u.length=g;break}}r.push(y);var S=new Array(_);for(g=0;g<v.length;g++)for(var A=0;A<v[g].length;A++)S[--_]=v[g][A];n.push(S)}x.pop()}}}for(s=0;s<e;++s)T[s]<0&&o(s);for(s=0;s<n.length;s++){var l=n[s];if(l.length!==0){l.sort(function(d,u){return d-u}),t=[l[0]];for(var c=1;c<l.length;c++)l[c]!==l[c-1]&&t.push(l[c]);n[s]=t}}return{components:r,adjacencyList:n}}},92848:function(F,C,e){"use strict";e.r(C);var T=2*Math.PI,k=function(b,f,s,t,i,r,n){var o=b.x,l=b.y;return{x:t*(o*=f)-i*(l*=s)+r,y:i*o+t*l+n}},a=function(b,f){var s=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(f/4),t=Math.cos(b),i=Math.sin(b),r=Math.cos(b+f),n=Math.sin(b+f);return[{x:t-i*s,y:i+t*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},w=function(b,f,s,t){var i=b*s+f*t;return i>1&&(i=1),i<-1&&(i=-1),(b*t-f*s<0?-1:1)*Math.acos(i)};C.default=function(b){var f=b.px,s=b.py,t=b.cx,i=b.cy,r=b.rx,n=b.ry,o=b.xAxisRotation,l=o===void 0?0:o,c=b.largeArcFlag,d=c===void 0?0:c,u=b.sweepFlag,x=u===void 0?0:u,p=[];if(r===0||n===0)return[];var g=Math.sin(l*T/360),m=Math.cos(l*T/360),y=m*(f-t)/2+g*(s-i)/2,v=-g*(f-t)/2+m*(s-i)/2;if(y===0&&v===0)return[];r=Math.abs(r),n=Math.abs(n);var _=Math.pow(y,2)/Math.pow(r,2)+Math.pow(v,2)/Math.pow(n,2);_>1&&(r*=Math.sqrt(_),n*=Math.sqrt(_));var h=function(O,j,Y,B,U,q,te,ee,Q,J,K,X){var ie=Math.pow(U,2),se=Math.pow(q,2),ae=Math.pow(K,2),ue=Math.pow(X,2),ve=ie*se-ie*ue-se*ae;ve<0&&(ve=0),ve/=ie*ue+se*ae;var ye=(ve=Math.sqrt(ve)*(te===ee?-1:1))*U/q*X,pe=ve*-q/U*K,de=J*ye-Q*pe+(O+Y)/2,me=Q*ye+J*pe+(j+B)/2,ke=(K-ye)/U,Ce=(X-pe)/q,ge=(-K-ye)/U,oe=(-X-pe)/q,re=w(1,0,ke,Ce),fe=w(ke,Ce,ge,oe);return ee===0&&fe>0&&(fe-=T),ee===1&&fe<0&&(fe+=T),[de,me,re,fe]}(f,s,t,i,r,n,d,x,g,m,y,v),S=function(O,j){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return function(Y,B){var U=[],q=!0,te=!1,ee=void 0;try{for(var Q,J=Y[Symbol.iterator]();!(q=(Q=J.next()).done)&&(U.push(Q.value),!B||U.length!==B);q=!0);}catch(K){te=!0,ee=K}finally{try{!q&&J.return&&J.return()}finally{if(te)throw ee}}return U}(O,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(h,4),A=S[0],E=S[1],P=S[2],I=S[3],D=Math.abs(I)/(T/4);Math.abs(1-D)<1e-7&&(D=1);var z=Math.max(Math.ceil(D),1);I/=z;for(var V=0;V<z;V++)p.push(a(P,I)),P+=I;return p.map(function(O){var j=k(O[0],r,n,m,g,A,E),Y=j.x,B=j.y,U=k(O[1],r,n,m,g,A,E),q=U.x,te=U.y,ee=k(O[2],r,n,m,g,A,E);return{x1:Y,y1:B,x2:q,y2:te,x:ee.x,y:ee.y}})}},74840:function(F,C,e){"use strict";var T=e(21984),k=e(49972),a=e(41976),w=e(53520),b=e(45408);F.exports=function(f){if(Array.isArray(f)&&f.length===1&&typeof f[0]=="string"&&(f=f[0]),typeof f=="string"&&(b(w(f),"String is not an SVG path."),f=T(f)),b(Array.isArray(f),"Argument should be a string or an array of path segments."),f=k(f),!(f=a(f)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,i=f.length;t<i;t++)for(var r=f[t].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},41976:function(F,C,e){"use strict";F.exports=function(w){for(var b,f=[],s=0,t=0,i=0,r=0,n=null,o=null,l=0,c=0,d=0,u=w.length;d<u;d++){var x=w[d],p=x[0];switch(p){case"M":i=x[1],r=x[2];break;case"A":var g=T({px:l,py:c,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!g.length)continue;for(var m,y=0;y<g.length;y++)x=["C",(m=g[y]).x1,m.y1,m.x2,m.y2,m.x,m.y],y<g.length-1&&f.push(x);break;case"S":var v=l,_=c;b!="C"&&b!="S"||(v+=v-s,_+=_-t),x=["C",v,_,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(n=2*l-n,o=2*c-o):(n=l,o=c),x=a(l,c,n,o,x[1],x[2]);break;case"Q":n=x[1],o=x[2],x=a(l,c,x[1],x[2],x[3],x[4]);break;case"L":x=k(l,c,x[1],x[2]);break;case"H":x=k(l,c,x[1],c);break;case"V":x=k(l,c,l,x[1]);break;case"Z":x=k(l,c,i,r)}b=p,l=x[x.length-2],c=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=l,t=c),f.push(x)}return f};var T=e(92848);function k(w,b,f,s){return["C",w,b,f,s,f,s]}function a(w,b,f,s,t,i){return["C",w/3+.6666666666666666*f,b/3+.6666666666666666*s,t/3+.6666666666666666*f,i/3+.6666666666666666*s,t,i]}},20472:function(F,C,e){"use strict";var T,k=e(74840),a=e(21984),w=e(22235),b=e(53520),f=e(29620),s=document.createElement("canvas"),t=s.getContext("2d");F.exports=function(i,r){if(!b(i))throw Error("Argument should be valid svg path string");var n,o;r||(r={}),r.shape?(n=r.shape[0],o=r.shape[1]):(n=s.width=r.w||r.width||200,o=s.height=r.h||r.height||200);var l=Math.min(n,o),c=r.stroke||0,d=r.viewbox||r.viewBox||k(i),u=[n/(d[2]-d[0]),o/(d[3]-d[1])],x=Math.min(u[0]||0,u[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,n,o),t.fillStyle="white",c&&(typeof c!="number"&&(c=1),t.strokeStyle=c>0?"white":"black",t.lineWidth=Math.abs(c)),t.translate(.5*n,.5*o),t.scale(x,x),function(){if(T!=null)return T;var m=document.createElement("canvas").getContext("2d");if(m.canvas.width=m.canvas.height=1,!window.Path2D)return T=!1;var y=new Path2D("M0,0h1v1h-1v-1Z");m.fillStyle="black",m.fill(y);var v=m.getImageData(0,0,1,1);return T=v&&v.data&&v.data[3]===255}()){var p=new Path2D(i);t.fill(p),c&&t.stroke(p)}else{var g=a(i);w(t,g),t.fill(),c&&t.stroke()}return t.setTransform(1,0,0,1,0,0),f(t,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*l})}},49760:function(F,C,e){var T;(function(k){var a=/^\s+/,w=/\s+$/,b=0,f=k.round,s=k.min,t=k.max,i=k.random;function r(K,X){if(X=X||{},(K=K||"")instanceof r)return K;if(!(this instanceof r))return new r(K,X);var ie=function(se){var ae,ue,ve,ye={r:0,g:0,b:0},pe=1,de=null,me=null,ke=null,Ce=!1,ge=!1;return typeof se=="string"&&(se=function(oe){oe=oe.replace(a,"").replace(w,"").toLowerCase();var re,fe=!1;if(P[oe])oe=P[oe],fe=!0;else if(oe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(re=Q.rgb.exec(oe))?{r:re[1],g:re[2],b:re[3]}:(re=Q.rgba.exec(oe))?{r:re[1],g:re[2],b:re[3],a:re[4]}:(re=Q.hsl.exec(oe))?{h:re[1],s:re[2],l:re[3]}:(re=Q.hsla.exec(oe))?{h:re[1],s:re[2],l:re[3],a:re[4]}:(re=Q.hsv.exec(oe))?{h:re[1],s:re[2],v:re[3]}:(re=Q.hsva.exec(oe))?{h:re[1],s:re[2],v:re[3],a:re[4]}:(re=Q.hex8.exec(oe))?{r:O(re[1]),g:O(re[2]),b:O(re[3]),a:U(re[4]),format:fe?"name":"hex8"}:(re=Q.hex6.exec(oe))?{r:O(re[1]),g:O(re[2]),b:O(re[3]),format:fe?"name":"hex"}:(re=Q.hex4.exec(oe))?{r:O(re[1]+""+re[1]),g:O(re[2]+""+re[2]),b:O(re[3]+""+re[3]),a:U(re[4]+""+re[4]),format:fe?"name":"hex8"}:!!(re=Q.hex3.exec(oe))&&{r:O(re[1]+""+re[1]),g:O(re[2]+""+re[2]),b:O(re[3]+""+re[3]),format:fe?"name":"hex"}}(se)),typeof se=="object"&&(J(se.r)&&J(se.g)&&J(se.b)?(ae=se.r,ue=se.g,ve=se.b,ye={r:255*z(ae,255),g:255*z(ue,255),b:255*z(ve,255)},Ce=!0,ge=String(se.r).substr(-1)==="%"?"prgb":"rgb"):J(se.h)&&J(se.s)&&J(se.v)?(de=Y(se.s),me=Y(se.v),ye=function(oe,re,fe){oe=6*z(oe,360),re=z(re,100),fe=z(fe,100);var Se=k.floor(oe),be=oe-Se,we=fe*(1-re),Me=fe*(1-be*re),Pe=fe*(1-(1-be)*re),De=Se%6;return{r:255*[fe,Me,we,we,Pe,fe][De],g:255*[Pe,fe,fe,Me,we,we][De],b:255*[we,we,Pe,fe,fe,Me][De]}}(se.h,de,me),Ce=!0,ge="hsv"):J(se.h)&&J(se.s)&&J(se.l)&&(de=Y(se.s),ke=Y(se.l),ye=function(oe,re,fe){var Se,be,we;function Me(he,_e,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?he+6*(_e-he)*Ae:Ae<.5?_e:Ae<2/3?he+(_e-he)*(2/3-Ae)*6:he}if(oe=z(oe,360),re=z(re,100),fe=z(fe,100),re===0)Se=be=we=fe;else{var Pe=fe<.5?fe*(1+re):fe+re-fe*re,De=2*fe-Pe;Se=Me(De,Pe,oe+1/3),be=Me(De,Pe,oe),we=Me(De,Pe,oe-1/3)}return{r:255*Se,g:255*be,b:255*we}}(se.h,de,ke),Ce=!0,ge="hsl"),se.hasOwnProperty("a")&&(pe=se.a)),pe=D(pe),{ok:Ce,format:se.format||ge,r:s(255,t(ye.r,0)),g:s(255,t(ye.g,0)),b:s(255,t(ye.b,0)),a:pe}}(K);this._originalInput=K,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=f(100*this._a)/100,this._format=X.format||ie.format,this._gradientType=X.gradientType,this._r<1&&(this._r=f(this._r)),this._g<1&&(this._g=f(this._g)),this._b<1&&(this._b=f(this._b)),this._ok=ie.ok,this._tc_id=b++}function n(K,X,ie){K=z(K,255),X=z(X,255),ie=z(ie,255);var se,ae,ue=t(K,X,ie),ve=s(K,X,ie),ye=(ue+ve)/2;if(ue==ve)se=ae=0;else{var pe=ue-ve;switch(ae=ye>.5?pe/(2-ue-ve):pe/(ue+ve),ue){case K:se=(X-ie)/pe+(X<ie?6:0);break;case X:se=(ie-K)/pe+2;break;case ie:se=(K-X)/pe+4}se/=6}return{h:se,s:ae,l:ye}}function o(K,X,ie){K=z(K,255),X=z(X,255),ie=z(ie,255);var se,ae,ue=t(K,X,ie),ve=s(K,X,ie),ye=ue,pe=ue-ve;if(ae=ue===0?0:pe/ue,ue==ve)se=0;else{switch(ue){case K:se=(X-ie)/pe+(X<ie?6:0);break;case X:se=(ie-K)/pe+2;break;case ie:se=(K-X)/pe+4}se/=6}return{h:se,s:ae,v:ye}}function l(K,X,ie,se){var ae=[j(f(K).toString(16)),j(f(X).toString(16)),j(f(ie).toString(16))];return se&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function c(K,X,ie,se){return[j(B(se)),j(f(K).toString(16)),j(f(X).toString(16)),j(f(ie).toString(16))].join("")}function d(K,X){X=X===0?0:X||10;var ie=r(K).toHsl();return ie.s-=X/100,ie.s=V(ie.s),r(ie)}function u(K,X){X=X===0?0:X||10;var ie=r(K).toHsl();return ie.s+=X/100,ie.s=V(ie.s),r(ie)}function x(K){return r(K).desaturate(100)}function p(K,X){X=X===0?0:X||10;var ie=r(K).toHsl();return ie.l+=X/100,ie.l=V(ie.l),r(ie)}function g(K,X){X=X===0?0:X||10;var ie=r(K).toRgb();return ie.r=t(0,s(255,ie.r-f(-X/100*255))),ie.g=t(0,s(255,ie.g-f(-X/100*255))),ie.b=t(0,s(255,ie.b-f(-X/100*255))),r(ie)}function m(K,X){X=X===0?0:X||10;var ie=r(K).toHsl();return ie.l-=X/100,ie.l=V(ie.l),r(ie)}function y(K,X){var ie=r(K).toHsl(),se=(ie.h+X)%360;return ie.h=se<0?360+se:se,r(ie)}function v(K){var X=r(K).toHsl();return X.h=(X.h+180)%360,r(X)}function _(K){var X=r(K).toHsl(),ie=X.h;return[r(K),r({h:(ie+120)%360,s:X.s,l:X.l}),r({h:(ie+240)%360,s:X.s,l:X.l})]}function h(K){var X=r(K).toHsl(),ie=X.h;return[r(K),r({h:(ie+90)%360,s:X.s,l:X.l}),r({h:(ie+180)%360,s:X.s,l:X.l}),r({h:(ie+270)%360,s:X.s,l:X.l})]}function S(K){var X=r(K).toHsl(),ie=X.h;return[r(K),r({h:(ie+72)%360,s:X.s,l:X.l}),r({h:(ie+216)%360,s:X.s,l:X.l})]}function A(K,X,ie){X=X||6,ie=ie||30;var se=r(K).toHsl(),ae=360/ie,ue=[r(K)];for(se.h=(se.h-(ae*X>>1)+720)%360;--X;)se.h=(se.h+ae)%360,ue.push(r(se));return ue}function E(K,X){X=X||6;for(var ie=r(K).toHsv(),se=ie.h,ae=ie.s,ue=ie.v,ve=[],ye=1/X;X--;)ve.push(r({h:se,s:ae,v:ue})),ue=(ue+ye)%1;return ve}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var K=this.toRgb();return(299*K.r+587*K.g+114*K.b)/1e3},getLuminance:function(){var K,X,ie,se=this.toRgb();return K=se.r/255,X=se.g/255,ie=se.b/255,.2126*(K<=.03928?K/12.92:k.pow((K+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:k.pow((X+.055)/1.055,2.4))+.0722*(ie<=.03928?ie/12.92:k.pow((ie+.055)/1.055,2.4))},setAlpha:function(K){return this._a=D(K),this._roundA=f(100*this._a)/100,this},toHsv:function(){var K=o(this._r,this._g,this._b);return{h:360*K.h,s:K.s,v:K.v,a:this._a}},toHsvString:function(){var K=o(this._r,this._g,this._b),X=f(360*K.h),ie=f(100*K.s),se=f(100*K.v);return this._a==1?"hsv("+X+", "+ie+"%, "+se+"%)":"hsva("+X+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHsl:function(){var K=n(this._r,this._g,this._b);return{h:360*K.h,s:K.s,l:K.l,a:this._a}},toHslString:function(){var K=n(this._r,this._g,this._b),X=f(360*K.h),ie=f(100*K.s),se=f(100*K.l);return this._a==1?"hsl("+X+", "+ie+"%, "+se+"%)":"hsla("+X+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHex:function(K){return l(this._r,this._g,this._b,K)},toHexString:function(K){return"#"+this.toHex(K)},toHex8:function(K){return function(X,ie,se,ae,ue){var ve=[j(f(X).toString(16)),j(f(ie).toString(16)),j(f(se).toString(16)),j(B(ae))];return ue&&ve[0].charAt(0)==ve[0].charAt(1)&&ve[1].charAt(0)==ve[1].charAt(1)&&ve[2].charAt(0)==ve[2].charAt(1)&&ve[3].charAt(0)==ve[3].charAt(1)?ve[0].charAt(0)+ve[1].charAt(0)+ve[2].charAt(0)+ve[3].charAt(0):ve.join("")}(this._r,this._g,this._b,this._a,K)},toHex8String:function(K){return"#"+this.toHex8(K)},toRgb:function(){return{r:f(this._r),g:f(this._g),b:f(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+f(this._r)+", "+f(this._g)+", "+f(this._b)+")":"rgba("+f(this._r)+", "+f(this._g)+", "+f(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:f(100*z(this._r,255))+"%",g:f(100*z(this._g,255))+"%",b:f(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+f(100*z(this._r,255))+"%, "+f(100*z(this._g,255))+"%, "+f(100*z(this._b,255))+"%)":"rgba("+f(100*z(this._r,255))+"%, "+f(100*z(this._g,255))+"%, "+f(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(I[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(K){var X="#"+c(this._r,this._g,this._b,this._a),ie=X,se=this._gradientType?"GradientType = 1, ":"";if(K){var ae=r(K);ie="#"+c(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+se+"startColorstr="+X+",endColorstr="+ie+")"},toString:function(K){var X=!!K;K=K||this._format;var ie=!1,se=this._a<1&&this._a>=0;return X||!se||K!=="hex"&&K!=="hex6"&&K!=="hex3"&&K!=="hex4"&&K!=="hex8"&&K!=="name"?(K==="rgb"&&(ie=this.toRgbString()),K==="prgb"&&(ie=this.toPercentageRgbString()),K!=="hex"&&K!=="hex6"||(ie=this.toHexString()),K==="hex3"&&(ie=this.toHexString(!0)),K==="hex4"&&(ie=this.toHex8String(!0)),K==="hex8"&&(ie=this.toHex8String()),K==="name"&&(ie=this.toName()),K==="hsl"&&(ie=this.toHslString()),K==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString()):K==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(K,X){var ie=K.apply(null,[this].concat([].slice.call(X)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(p,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(K,X){return K.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(h,arguments)}},r.fromRatio=function(K,X){if(typeof K=="object"){var ie={};for(var se in K)K.hasOwnProperty(se)&&(ie[se]=se==="a"?K[se]:Y(K[se]));K=ie}return r(K,X)},r.equals=function(K,X){return!(!K||!X)&&r(K).toRgbString()==r(X).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})},r.mix=function(K,X,ie){ie=ie===0?0:ie||50;var se=r(K).toRgb(),ae=r(X).toRgb(),ue=ie/100;return r({r:(ae.r-se.r)*ue+se.r,g:(ae.g-se.g)*ue+se.g,b:(ae.b-se.b)*ue+se.b,a:(ae.a-se.a)*ue+se.a})},r.readability=function(K,X){var ie=r(K),se=r(X);return(k.max(ie.getLuminance(),se.getLuminance())+.05)/(k.min(ie.getLuminance(),se.getLuminance())+.05)},r.isReadable=function(K,X,ie){var se,ae,ue,ve,ye,pe=r.readability(K,X);switch(ae=!1,(ue=ie,(ve=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ve!=="AAA"&&(ve="AA"),(ye=(ue.size||"small").toLowerCase())!=="small"&&ye!=="large"&&(ye="small"),se={level:ve,size:ye}).level+se.size){case"AAsmall":case"AAAlarge":ae=pe>=4.5;break;case"AAlarge":ae=pe>=3;break;case"AAAsmall":ae=pe>=7}return ae},r.mostReadable=function(K,X,ie){var se,ae,ue,ve,ye=null,pe=0;ae=(ie=ie||{}).includeFallbackColors,ue=ie.level,ve=ie.size;for(var de=0;de<X.length;de++)(se=r.readability(K,X[de]))>pe&&(pe=se,ye=r(X[de]));return r.isReadable(K,ye,{level:ue,size:ve})||!ae?ye:(ie.includeFallbackColors=!1,r.mostReadable(K,["#fff","#000"],ie))};var P=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=r.hexNames=function(K){var X={};for(var ie in K)K.hasOwnProperty(ie)&&(X[K[ie]]=ie);return X}(P);function D(K){return K=parseFloat(K),(isNaN(K)||K<0||K>1)&&(K=1),K}function z(K,X){(function(se){return typeof se=="string"&&se.indexOf(".")!=-1&&parseFloat(se)===1})(K)&&(K="100%");var ie=function(se){return typeof se=="string"&&se.indexOf("%")!=-1}(K);return K=s(X,t(0,parseFloat(K))),ie&&(K=parseInt(K*X,10)/100),k.abs(K-X)<1e-6?1:K%X/parseFloat(X)}function V(K){return s(1,t(0,K))}function O(K){return parseInt(K,16)}function j(K){return K.length==1?"0"+K:""+K}function Y(K){return K<=1&&(K=100*K+"%"),K}function B(K){return k.round(255*parseFloat(K)).toString(16)}function U(K){return O(K)/255}var q,te,ee,Q=(te="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",ee="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+ee),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+ee),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+ee),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function J(K){return!!Q.CSS_UNIT.exec(K)}F.exports?F.exports=r:(T=(function(){return r}).call(C,e,C,F))===void 0||(F.exports=T)})(Math)},37816:function(F){"use strict";F.exports=e,F.exports.float32=F.exports.float=e,F.exports.fract32=F.exports.fract=function(T,k){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);k instanceof Float32Array||(k=e(T));for(var a=0,w=k.length;a<w;a++)k[a]=T[a]-k[a];return k}return e(T-e(T))};var C=new Float32Array(1);function e(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(C[0]=T,C[0])}},23464:function(F,C,e){"use strict";var T=e(65819);F.exports=w;var k=96;function a(b,f){var s=T(getComputedStyle(b).getPropertyValue(f));return s[0]*w(s[1],b)}function w(b,f){switch(f=f||document.body,b=(b||"px").trim().toLowerCase(),f!==window&&f!==document||(f=document.body),b){case"%":return f.clientHeight/100;case"ch":case"ex":return function(s,t){var i=document.createElement("div");i.style["font-size"]="128"+s,t.appendChild(i);var r=a(i,"font-size")/128;return t.removeChild(i),r}(b,f);case"em":return a(f,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(F,C,e){"use strict";function T(w){return w}function k(w,b){return typeof b=="string"&&(b=w.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(f){return a(w,f)})}:a(w,b)}function a(w,b){var f=b.id,s=b.bbox,t=b.properties==null?{}:b.properties,i=function(r,n){var o=function(g){if(g==null)return T;var m,y,v=g.scale[0],_=g.scale[1],h=g.translate[0],S=g.translate[1];return function(A,E){E||(m=y=0);var P=2,I=A.length,D=new Array(I);for(D[0]=(m+=A[0])*v+h,D[1]=(y+=A[1])*_+S;P<I;)D[P]=A[P],++P;return D}}(r.transform),l=r.arcs;function c(g,m){m.length&&m.pop();for(var y=l[g<0?~g:g],v=0,_=y.length;v<_;++v)m.push(o(y[v],v));g<0&&function(h,S){for(var A,E=h.length,P=E-S;P<--E;)A=h[P],h[P++]=h[E],h[E]=A}(m,_)}function d(g){return o(g)}function u(g){for(var m=[],y=0,v=g.length;y<v;++y)c(g[y],m);return m.length<2&&m.push(m[0]),m}function x(g){for(var m=u(g);m.length<4;)m.push(m[0]);return m}function p(g){return g.map(x)}return function g(m){var y,v=m.type;switch(v){case"GeometryCollection":return{type:v,geometries:m.geometries.map(g)};case"Point":y=d(m.coordinates);break;case"MultiPoint":y=m.coordinates.map(d);break;case"LineString":y=u(m.arcs);break;case"MultiLineString":y=m.arcs.map(u);break;case"Polygon":y=p(m.arcs);break;case"MultiPolygon":y=m.arcs.map(p);break;default:return null}return{type:v,coordinates:y}}(n)}(w,b);return f==null&&s==null?{type:"Feature",properties:t,geometry:i}:s==null?{type:"Feature",id:f,properties:t,geometry:i}:{type:"Feature",id:f,bbox:s,properties:t,geometry:i}}e.d(C,{NO:function(){return k}})},73384:function(F,C,e){"use strict";var T=e(54612);F.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!T(k)}},57980:function(F,C,e){"use strict";var T=e(81680),k=e(7328),a=e(33940),w=e(18856),b=function(f,s){return f.replace("%v",w(s))};F.exports=function(f,s,t){if(!k(t))throw new TypeError(b(s,f));if(!T(f)){if("default"in t)return t.default;if(t.isOptional)return null}var i=a(t.errorMessage);throw T(i)||(i=s),new TypeError(b(i,f))}},32336:function(F){"use strict";F.exports=function(C){try{return C.toString()}catch{try{return String(C)}catch{return null}}}},18856:function(F,C,e){"use strict";var T=e(32336),k=/[\n\r\u2028\u2029]/g;F.exports=function(a){var w=T(a);return w===null?"<Non-coercible to string value>":(w.length>100&&(w=w.slice(0,99)+"\u2026"),w=w.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(F,C,e){"use strict";var T=e(81680),k={object:!0,function:!0,undefined:!0};F.exports=function(a){return!!T(a)&&hasOwnProperty.call(k,typeof a)}},87396:function(F,C,e){"use strict";var T=e(57980),k=e(85488);F.exports=function(a){return k(a)?a:T(a,"%v is not a plain function",arguments[1])}},85488:function(F,C,e){"use strict";var T=e(73384),k=/^\s*class[\s{/}]/,a=Function.prototype.toString;F.exports=function(w){return!!T(w)&&!k.test(a.call(w))}},54612:function(F,C,e){"use strict";var T=e(7328);F.exports=function(k){if(!T(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},33940:function(F,C,e){"use strict";var T=e(81680),k=e(7328),a=Object.prototype.toString;F.exports=function(w){if(!T(w))return null;if(k(w)){var b=w.toString;if(typeof b!="function"||b===a)return null}try{return""+w}catch{return null}}},18496:function(F,C,e){"use strict";var T=e(57980),k=e(81680);F.exports=function(a){return k(a)?a:T(a,"Cannot use %v",arguments[1])}},81680:function(F){"use strict";F.exports=function(C){return C!=null}},14144:function(F,C,e){"use strict";var T=e(308),k=e(10352),a=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var w=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",f=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,i=s.BUFFER;function r(S){if(S){var A=S.length||S.byteLength,E=T.log2(A);t[E].push(S)}}function n(S){S=T.nextPow2(S);var A=T.log2(S),E=t[A];return E.length>0?E.pop():new ArrayBuffer(S)}function o(S){return new Uint8Array(n(S),0,S)}function l(S){return new Uint16Array(n(2*S),0,S)}function c(S){return new Uint32Array(n(4*S),0,S)}function d(S){return new Int8Array(n(S),0,S)}function u(S){return new Int16Array(n(2*S),0,S)}function x(S){return new Int32Array(n(4*S),0,S)}function p(S){return new Float32Array(n(4*S),0,S)}function g(S){return new Float64Array(n(8*S),0,S)}function m(S){return w?new Uint8ClampedArray(n(S),0,S):o(S)}function y(S){return b?new BigUint64Array(n(8*S),0,S):null}function v(S){return f?new BigInt64Array(n(8*S),0,S):null}function _(S){return new DataView(n(S),0,S)}function h(S){S=T.nextPow2(S);var A=T.log2(S),E=i[A];return E.length>0?E.pop():new a(S)}C.free=function(S){if(a.isBuffer(S))i[T.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var A=S.length||S.byteLength,E=0|T.log2(A);t[E].push(S)}},C.freeUint8=C.freeUint16=C.freeUint32=C.freeBigUint64=C.freeInt8=C.freeInt16=C.freeInt32=C.freeBigInt64=C.freeFloat32=C.freeFloat=C.freeFloat64=C.freeDouble=C.freeUint8Clamped=C.freeDataView=function(S){r(S.buffer)},C.freeArrayBuffer=r,C.freeBuffer=function(S){i[T.log2(S.length)].push(S)},C.malloc=function(S,A){if(A===void 0||A==="arraybuffer")return n(S);switch(A){case"uint8":return o(S);case"uint16":return l(S);case"uint32":return c(S);case"int8":return d(S);case"int16":return u(S);case"int32":return x(S);case"float":case"float32":return p(S);case"double":case"float64":return g(S);case"uint8_clamped":return m(S);case"bigint64":return v(S);case"biguint64":return y(S);case"buffer":return h(S);case"data":case"dataview":return _(S);default:return null}return null},C.mallocArrayBuffer=n,C.mallocUint8=o,C.mallocUint16=l,C.mallocUint32=c,C.mallocInt8=d,C.mallocInt16=u,C.mallocInt32=x,C.mallocFloat32=C.mallocFloat=p,C.mallocFloat64=C.mallocDouble=g,C.mallocUint8Clamped=m,C.mallocBigUint64=y,C.mallocBigInt64=v,C.mallocDataView=_,C.mallocBuffer=h,C.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},92384:function(F){var C=/[\'\"]/;F.exports=function(e){return e?(C.test(e.charAt(0))&&(e=e.substr(1)),C.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(F){"use strict";F.exports=function(C,e,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var k=0,a=T.length;k<a;k++){var w=T[k];for(var b in w)if((e[b]===void 0||Array.isArray(e[b])||C[b]!==e[b])&&b in e){var f;if(w[b]===!0)f=e[b];else if(w[b]===!1||typeof w[b]=="function"&&(f=w[b](e[b],C,e))===void 0)continue;C[b]=f}}return C}},96656:function(F,C,e){function T(k){try{if(!e.g.localStorage)return!1}catch{return!1}var a=e.g.localStorage[k];return a!=null&&String(a).toLowerCase()==="true"}F.exports=function(k,a){if(T("noDeprecation"))return k;var w=!1;return function(){if(!w){if(T("throwDeprecation"))throw new Error(a);T("traceDeprecation")?console.trace(a):console.warn(a),w=!0}return k.apply(this,arguments)}}},75272:function(F){F.exports=function(C){return C&&typeof C=="object"&&typeof C.copy=="function"&&typeof C.fill=="function"&&typeof C.readUInt8=="function"}},41088:function(F,C,e){"use strict";var T=e(91148),k=e(84420),a=e(96632),w=e(7728);function b(z){return z.call.bind(z)}var f=typeof BigInt<"u",s=typeof Symbol<"u",t=b(Object.prototype.toString),i=b(Number.prototype.valueOf),r=b(String.prototype.valueOf),n=b(Boolean.prototype.valueOf);if(f)var o=b(BigInt.prototype.valueOf);if(s)var l=b(Symbol.prototype.valueOf);function c(z,V){if(typeof z!="object")return!1;try{return V(z),!0}catch{return!1}}function d(z){return t(z)==="[object Map]"}function u(z){return t(z)==="[object Set]"}function x(z){return t(z)==="[object WeakMap]"}function p(z){return t(z)==="[object WeakSet]"}function g(z){return t(z)==="[object ArrayBuffer]"}function m(z){return typeof ArrayBuffer<"u"&&(g.working?g(z):z instanceof ArrayBuffer)}function y(z){return t(z)==="[object DataView]"}function v(z){return typeof DataView<"u"&&(y.working?y(z):z instanceof DataView)}C.isArgumentsObject=T,C.isGeneratorFunction=k,C.isTypedArray=w,C.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||z!==null&&typeof z=="object"&&typeof z.then=="function"&&typeof z.catch=="function"},C.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):w(z)||v(z)},C.isUint8Array=function(z){return a(z)==="Uint8Array"},C.isUint8ClampedArray=function(z){return a(z)==="Uint8ClampedArray"},C.isUint16Array=function(z){return a(z)==="Uint16Array"},C.isUint32Array=function(z){return a(z)==="Uint32Array"},C.isInt8Array=function(z){return a(z)==="Int8Array"},C.isInt16Array=function(z){return a(z)==="Int16Array"},C.isInt32Array=function(z){return a(z)==="Int32Array"},C.isFloat32Array=function(z){return a(z)==="Float32Array"},C.isFloat64Array=function(z){return a(z)==="Float64Array"},C.isBigInt64Array=function(z){return a(z)==="BigInt64Array"},C.isBigUint64Array=function(z){return a(z)==="BigUint64Array"},d.working=typeof Map<"u"&&d(new Map),C.isMap=function(z){return typeof Map<"u"&&(d.working?d(z):z instanceof Map)},u.working=typeof Set<"u"&&u(new Set),C.isSet=function(z){return typeof Set<"u"&&(u.working?u(z):z instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),C.isWeakMap=function(z){return typeof WeakMap<"u"&&(x.working?x(z):z instanceof WeakMap)},p.working=typeof WeakSet<"u"&&p(new WeakSet),C.isWeakSet=function(z){return p(z)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),C.isArrayBuffer=m,y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&y(new DataView(new ArrayBuffer(1),0,1)),C.isDataView=v;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function h(z){return t(z)==="[object SharedArrayBuffer]"}function S(z){return _!==void 0&&(h.working===void 0&&(h.working=h(new _)),h.working?h(z):z instanceof _)}function A(z){return c(z,i)}function E(z){return c(z,r)}function P(z){return c(z,n)}function I(z){return f&&c(z,o)}function D(z){return s&&c(z,l)}C.isSharedArrayBuffer=S,C.isAsyncFunction=function(z){return t(z)==="[object AsyncFunction]"},C.isMapIterator=function(z){return t(z)==="[object Map Iterator]"},C.isSetIterator=function(z){return t(z)==="[object Set Iterator]"},C.isGeneratorObject=function(z){return t(z)==="[object Generator]"},C.isWebAssemblyCompiledModule=function(z){return t(z)==="[object WebAssembly.Module]"},C.isNumberObject=A,C.isStringObject=E,C.isBooleanObject=P,C.isBigIntObject=I,C.isSymbolObject=D,C.isBoxedPrimitive=function(z){return A(z)||E(z)||P(z)||I(z)||D(z)},C.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(m(z)||S(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(C,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},35840:function(F,C,e){var T=e(4168),k=Object.getOwnPropertyDescriptors||function(D){for(var z=Object.keys(D),V={},O=0;O<z.length;O++)V[z[O]]=Object.getOwnPropertyDescriptor(D,z[O]);return V},a=/%[sdj%]/g;C.format=function(D){if(!x(D)){for(var z=[],V=0;V<arguments.length;V++)z.push(s(arguments[V]));return z.join(" ")}V=1;for(var O=arguments,j=O.length,Y=String(D).replace(a,function(U){if(U==="%%")return"%";if(V>=j)return U;switch(U){case"%s":return String(O[V++]);case"%d":return Number(O[V++]);case"%j":try{return JSON.stringify(O[V++])}catch{return"[Circular]"}default:return U}}),B=O[V];V<j;B=O[++V])d(B)||!m(B)?Y+=" "+B:Y+=" "+s(B);return Y},C.deprecate=function(D,z){if(T!==void 0&&T.noDeprecation===!0)return D;if(T===void 0)return function(){return C.deprecate(D,z).apply(this,arguments)};var V=!1;return function(){if(!V){if(T.throwDeprecation)throw new Error(z);T.traceDeprecation?console.trace(z):console.error(z),V=!0}return D.apply(this,arguments)}};var w={},b=/^$/;if(T.env.NODE_DEBUG){var f=T.env.NODE_DEBUG;f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+f+"$","i")}function s(D,z){var V={seen:[],stylize:i};return arguments.length>=3&&(V.depth=arguments[2]),arguments.length>=4&&(V.colors=arguments[3]),c(z)?V.showHidden=z:z&&C._extend(V,z),p(V.showHidden)&&(V.showHidden=!1),p(V.depth)&&(V.depth=2),p(V.colors)&&(V.colors=!1),p(V.customInspect)&&(V.customInspect=!0),V.colors&&(V.stylize=t),r(V,D,V.depth)}function t(D,z){var V=s.styles[z];return V?"\x1B["+s.colors[V][0]+"m"+D+"\x1B["+s.colors[V][1]+"m":D}function i(D,z){return D}function r(D,z,V){if(D.customInspect&&z&&_(z.inspect)&&z.inspect!==C.inspect&&(!z.constructor||z.constructor.prototype!==z)){var O=z.inspect(V,D);return x(O)||(O=r(D,O,V)),O}var j=function(J,K){if(p(K))return J.stylize("undefined","undefined");if(x(K)){var X="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(X,"string")}return u(K)?J.stylize(""+K,"number"):c(K)?J.stylize(""+K,"boolean"):d(K)?J.stylize("null","null"):void 0}(D,z);if(j)return j;var Y=Object.keys(z),B=function(J){var K={};return J.forEach(function(X,ie){K[X]=!0}),K}(Y);if(D.showHidden&&(Y=Object.getOwnPropertyNames(z)),v(z)&&(Y.indexOf("message")>=0||Y.indexOf("description")>=0))return n(z);if(Y.length===0){if(_(z)){var U=z.name?": "+z.name:"";return D.stylize("[Function"+U+"]","special")}if(g(z))return D.stylize(RegExp.prototype.toString.call(z),"regexp");if(y(z))return D.stylize(Date.prototype.toString.call(z),"date");if(v(z))return n(z)}var q,te="",ee=!1,Q=["{","}"];return l(z)&&(ee=!0,Q=["[","]"]),_(z)&&(te=" [Function"+(z.name?": "+z.name:"")+"]"),g(z)&&(te=" "+RegExp.prototype.toString.call(z)),y(z)&&(te=" "+Date.prototype.toUTCString.call(z)),v(z)&&(te=" "+n(z)),Y.length!==0||ee&&z.length!=0?V<0?g(z)?D.stylize(RegExp.prototype.toString.call(z),"regexp"):D.stylize("[Object]","special"):(D.seen.push(z),q=ee?function(J,K,X,ie,se){for(var ae=[],ue=0,ve=K.length;ue<ve;++ue)E(K,String(ue))?ae.push(o(J,K,X,ie,String(ue),!0)):ae.push("");return se.forEach(function(ye){ye.match(/^\d+$/)||ae.push(o(J,K,X,ie,ye,!0))}),ae}(D,z,V,B,Y):Y.map(function(J){return o(D,z,V,B,J,ee)}),D.seen.pop(),function(J,K,X){return J.reduce(function(ie,se){return se.indexOf(`
`),ie+se.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?X[0]+(K===""?"":K+`
 `)+" "+J.join(`,
  `)+" "+X[1]:X[0]+K+" "+J.join(", ")+" "+X[1]}(q,te,Q)):Q[0]+te+Q[1]}function n(D){return"["+Error.prototype.toString.call(D)+"]"}function o(D,z,V,O,j,Y){var B,U,q;if((q=Object.getOwnPropertyDescriptor(z,j)||{value:z[j]}).get?U=q.set?D.stylize("[Getter/Setter]","special"):D.stylize("[Getter]","special"):q.set&&(U=D.stylize("[Setter]","special")),E(O,j)||(B="["+j+"]"),U||(D.seen.indexOf(q.value)<0?(U=d(V)?r(D,q.value,null):r(D,q.value,V-1)).indexOf(`
`)>-1&&(U=Y?U.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+U.split(`
`).map(function(te){return"   "+te}).join(`
`)):U=D.stylize("[Circular]","special")),p(B)){if(Y&&j.match(/^\d+$/))return U;(B=JSON.stringify(""+j)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=D.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=D.stylize(B,"string"))}return B+": "+U}function l(D){return Array.isArray(D)}function c(D){return typeof D=="boolean"}function d(D){return D===null}function u(D){return typeof D=="number"}function x(D){return typeof D=="string"}function p(D){return D===void 0}function g(D){return m(D)&&h(D)==="[object RegExp]"}function m(D){return typeof D=="object"&&D!==null}function y(D){return m(D)&&h(D)==="[object Date]"}function v(D){return m(D)&&(h(D)==="[object Error]"||D instanceof Error)}function _(D){return typeof D=="function"}function h(D){return Object.prototype.toString.call(D)}function S(D){return D<10?"0"+D.toString(10):D.toString(10)}C.debuglog=function(D){if(D=D.toUpperCase(),!w[D])if(b.test(D)){var z=T.pid;w[D]=function(){var V=C.format.apply(C,arguments);console.error("%s %d: %s",D,z,V)}}else w[D]=function(){};return w[D]},C.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},C.types=e(41088),C.isArray=l,C.isBoolean=c,C.isNull=d,C.isNullOrUndefined=function(D){return D==null},C.isNumber=u,C.isString=x,C.isSymbol=function(D){return typeof D=="symbol"},C.isUndefined=p,C.isRegExp=g,C.types.isRegExp=g,C.isObject=m,C.isDate=y,C.types.isDate=y,C.isError=v,C.types.isNativeError=v,C.isFunction=_,C.isPrimitive=function(D){return D===null||typeof D=="boolean"||typeof D=="number"||typeof D=="string"||typeof D=="symbol"||D===void 0},C.isBuffer=e(75272);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(D,z){return Object.prototype.hasOwnProperty.call(D,z)}C.log=function(){var D,z;console.log("%s - %s",(z=[S((D=new Date).getHours()),S(D.getMinutes()),S(D.getSeconds())].join(":"),[D.getDate(),A[D.getMonth()],z].join(" ")),C.format.apply(C,arguments))},C.inherits=e(6768),C._extend=function(D,z){if(!z||!m(z))return D;for(var V=Object.keys(z),O=V.length;O--;)D[V[O]]=z[V[O]];return D};var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function I(D,z){if(!D){var V=new Error("Promise was rejected with a falsy value");V.reason=D,D=V}return z(D)}C.promisify=function(D){if(typeof D!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&D[P]){var z;if(typeof(z=D[P])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,P,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var V,O,j=new Promise(function(U,q){V=U,O=q}),Y=[],B=0;B<arguments.length;B++)Y.push(arguments[B]);Y.push(function(U,q){U?O(U):V(q)});try{D.apply(this,Y)}catch(U){O(U)}return j}return Object.setPrototypeOf(z,Object.getPrototypeOf(D)),P&&Object.defineProperty(z,P,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,k(D))},C.promisify.custom=P,C.callbackify=function(D){if(typeof D!="function")throw new TypeError('The "original" argument must be of type Function');function z(){for(var V=[],O=0;O<arguments.length;O++)V.push(arguments[O]);var j=V.pop();if(typeof j!="function")throw new TypeError("The last argument must be of type Function");var Y=this,B=function(){return j.apply(Y,arguments)};D.apply(this,V).then(function(U){T.nextTick(B.bind(null,null,U))},function(U){T.nextTick(I.bind(null,U,B))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(D)),Object.defineProperties(z,k(D)),z}},5408:function(F,C,e){var T=e(13380);F.exports=function(k){return T("webgl",k)}},96632:function(F,C,e){"use strict";var T=e(46492),k=e(63436),a=e(57916),w=e(99676),b=e(2304),f=w("Object.prototype.toString"),s=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,i=k(),r=w("String.prototype.slice"),n=Object.getPrototypeOf,o=w("Array.prototype.indexOf",!0)||function(c,d){for(var u=0;u<c.length;u+=1)if(c[u]===d)return u;return-1},l={__proto__:null};T(i,s&&b&&n?function(c){var d=new t[c];if(Symbol.toStringTag in d){var u=n(d),x=b(u,Symbol.toStringTag);if(!x){var p=n(u);x=b(p,Symbol.toStringTag)}l["$"+c]=a(x.get)}}:function(c){var d=new t[c],u=d.slice||d.set;u&&(l["$"+c]=a(u))}),F.exports=function(c){if(!c||typeof c!="object")return!1;if(!s){var d=r(f(c),8,-1);return o(i,d)>-1?d:d==="Object"&&function(u){var x=!1;return T(l,function(p,g){if(!x)try{p(u),x=r(g,1)}catch{}}),x}(c)}return b?function(u){var x=!1;return T(l,function(p,g){if(!x)try{"$"+p(u)===g&&(x=r(g,1))}catch{}}),x}(c):null}},67020:function(F,C,e){var T=e(38700),k=e(50896),a=T.instance();function w(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}w.prototype=new T.baseCalendar,k(w.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,o){if(typeof n=="string"){var l=n.match(f);return l?l[0]:""}var c=this._validateYear(n),d=n.month(),u=""+this.toChineseMonth(c,d);return o&&u.length<2&&(u="0"+u),this.isIntercalaryMonth(c,d)&&(u+="i"),u},monthNames:function(n){if(typeof n=="string"){var o=n.match(s);return o?o[0]:""}var l=this._validateYear(n),c=n.month(),d=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(d="\u95F0"+d),d},monthNamesShort:function(n){if(typeof n=="string"){var o=n.match(t);return o?o[0]:""}var l=this._validateYear(n),c=n.month(),d=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(d="\u95F0"+d),d},parseMonth:function(n,o){n=this._validateYear(n);var l,c=parseInt(o);if(isNaN(c))o[0]==="\u95F0"&&(l=!0,o=o.substring(1)),o[o.length-1]==="\u6708"&&(o=o.substring(0,o.length-1)),c=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(o);else{var d=o[o.length-1];l=d==="i"||d==="I"}return this.toMonthIndex(n,c,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,o){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw o.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,o,l){var c=this.intercalaryMonth(n);if(l&&o!==c||o<1||o>12)throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!l&&o<=c?o-1:o:o-1},toChineseMonth:function(n,o){n.year&&(o=(n=n.year()).month());var l=this.intercalaryMonth(n);if(o<0||o>(l?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?o<l?o+1:o:o+1},intercalaryMonth:function(n){return n=this._validateYear(n),i[n-i[0]]>>13},isIntercalaryMonth:function(n,o){n.year&&(o=(n=n.year()).month());var l=this.intercalaryMonth(n);return!!l&&l===o},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,o,l){var c,d=this._validateYear(n,T.local.invalidyear),u=r[d-r[0]],x=u>>9&4095,p=u>>5&15,g=31&u;(c=a.newDate(x,p,g)).add(4-(c.dayOfWeek()||7),"d");var m=this.toJD(n,o,l)-c.toJD();return 1+Math.floor(m/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,o){n.year&&(o=n.month(),n=n.year()),n=this._validateYear(n);var l=i[n-i[0]];if(o>(l>>13?12:11))throw T.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-o?30:29},weekDay:function(n,o,l){return(this.dayOfWeek(n,o,l)||7)<6},toJD:function(n,o,l){var c=this._validate(n,u,l,T.local.invalidDate);n=this._validateYear(c.year()),o=c.month(),l=c.day();var d=this.isIntercalaryMonth(n,o),u=this.toChineseMonth(n,o),x=function(p,g,m,y,v){var _,h,S;if(typeof p=="object")h=p,_=g||{};else{var A;if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof g=="number"&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof m=="number"&&m>=1&&m<=30))throw new Error("Lunar day outside range 1 - 30");typeof y=="object"?(A=!1,_=y):(A=!!y,_={}),h={year:p,month:g,day:m,isIntercalary:A}}S=h.day-1;var E,P=i[h.year-i[0]],I=P>>13;E=I&&(h.month>I||h.isIntercalary)?h.month:h.month-1;for(var D=0;D<E;D++)S+=P&1<<12-D?30:29;var z=r[h.year-r[0]],V=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+S);return _.year=V.getFullYear(),_.month=1+V.getMonth(),_.day=V.getDate(),_}(n,u,l,d);return a.toJD(x.year,x.month,x.day)},fromJD:function(n){var o=a.fromJD(n),l=function(d,u,x,p){var g,m;if(typeof d=="object")g=d,m=u||{};else{if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof u=="number"&&u>=1&&u<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");g={year:d,month:u,day:x},m={}}var y=r[g.year-r[0]],v=g.year<<9|g.month<<5|g.day;m.year=v>=y?g.year:g.year-1,y=r[m.year-r[0]];var _,h=new Date(y>>9&4095,(y>>5&15)-1,31&y),S=new Date(g.year,g.month-1,g.day);_=Math.round((S-h)/864e5);var A,E=i[m.year-i[0]];for(A=0;A<13;A++){var P=E&1<<12-A?30:29;if(_<P)break;_-=P}var I=E>>13;return!I||A<I?(m.isIntercalary=!1,m.month=1+A):A===I?(m.isIntercalary=!0,m.month=A):(m.isIntercalary=!1,m.month=A),m.day=1+_,m}(o.year(),o.month(),o.day()),c=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,c,l.day)},fromString:function(n){var o=n.match(b),l=this._validateYear(+o[1]),c=+o[2],d=!!o[3],u=this.toMonthIndex(l,c,d),x=+o[4];return this.newDate(l,u,x)},add:function(n,o,l){var c=n.year(),d=n.month(),u=this.isIntercalaryMonth(c,d),x=this.toChineseMonth(c,d),p=Object.getPrototypeOf(w.prototype).add.call(this,n,o,l);if(l==="y"){var g=p.year(),m=p.month(),y=this.isIntercalaryMonth(g,x),v=u&&y?this.toMonthIndex(g,x,!0):this.toMonthIndex(g,x,!1);v!==m&&p.month(v)}return p}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,s=/^??[]?/m,t=/^??[]?/m;T.calendars.chinese=w;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(F,C,e){var T=e(38700),k=e(50896);function a(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var b=this._validate(w,this.minMonth,this.minDay,T.local.invalidYear);return(w=b.year()+(b.year()<0?1:0))%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(w,b,f){var s=this.newDate(w,b,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(w,b){var f=this._validate(w,b,this.minDay,T.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(w,b,f){return(this.dayOfWeek(w,b,f)||7)<6},toJD:function(w,b,f){var s=this._validate(w,b,f,T.local.invalidDate);return(w=s.year())<0&&w++,s.day()+30*(s.month()-1)+365*(w-1)+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var b=Math.floor(w)+.5-this.jdEpoch,f=Math.floor((b-Math.floor((b+366)/1461))/365)+1;f<=0&&f--,b=Math.floor(w)+.5-this.newDate(f,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(f,s,t)}}),T.calendars.coptic=a},55668:function(F,C,e){var T=e(38700),k=e(50896);function a(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,T.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,T.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,T.local.invalidYear),400},weekOfYear:function(b,f,s){var t=this.newDate(b,f,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,f){var s=this._validate(b,f,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,f,s){return(this._validate(b,f,s,T.local.invalidDate).day()+1)%8},weekDay:function(b,f,s){var t=this.dayOfWeek(b,f,s);return t>=2&&t<=6},extraInfo:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate);return{century:w[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate);return b=t.year()+(t.year()<0?1:0),f=t.month(),(s=t.day())+(f>1?16:0)+(f>2?32*(f-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var f=Math.floor(b/400)+1;b-=400*(f-1),b+=b>15?16:0;var s=Math.floor(b/32)+1,t=b-32*(s-1)+1;return this.newDate(f<=0?f-1:f,s,t)}});var w={20:"Fruitbat",21:"Anchovy"};T.calendars.discworld=a},65168:function(F,C,e){var T=e(38700),k=e(50896);function a(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var b=this._validate(w,this.minMonth,this.minDay,T.local.invalidYear);return(w=b.year()+(b.year()<0?1:0))%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear),13},weekOfYear:function(w,b,f){var s=this.newDate(w,b,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(w,b){var f=this._validate(w,b,this.minDay,T.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(w,b,f){return(this.dayOfWeek(w,b,f)||7)<6},toJD:function(w,b,f){var s=this._validate(w,b,f,T.local.invalidDate);return(w=s.year())<0&&w++,s.day()+30*(s.month()-1)+365*(w-1)+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var b=Math.floor(w)+.5-this.jdEpoch,f=Math.floor((b-Math.floor((b+366)/1461))/365)+1;f<=0&&f--,b=Math.floor(w)+.5-this.newDate(f,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(f,s,t)}}),T.calendars.ethiopian=a},2084:function(F,C,e){var T=e(38700),k=e(50896);function a(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function w(b,f){return b-f*Math.floor(b/f)}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(b){return w(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,T.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,f,s){var t=this.newDate(b,f,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,f){return b.year&&(f=b.month(),b=b.year()),this._validate(b,f,this.minDay,T.local.invalidMonth),f===12&&this.leapYear(b)||f===8&&w(this.daysInYear(b),10)===5?30:f===9&&w(this.daysInYear(b),10)===3?29:this.daysPerMonth[f-1]},weekDay:function(b,f,s){return this.dayOfWeek(b,f,s)!==6},extraInfo:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate);b=t.year(),f=t.month(),s=t.day();var i=b<=0?b+1:b,r=this.jdEpoch+this._delay1(i)+this._delay2(i)+s+1;if(f<7){for(var n=7;n<=this.monthsInYear(b);n++)r+=this.daysInMonth(b,n);for(n=1;n<f;n++)r+=this.daysInMonth(b,n)}else for(n=7;n<f;n++)r+=this.daysInMonth(b,n);return r},_delay1:function(b){var f=Math.floor((235*b-234)/19),s=12084+13753*f,t=29*f+Math.floor(s/25920);return w(3*(t+1),7)<3&&t++,t},_delay2:function(b){var f=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-f==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var f=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(f===-1?1:f+1,7,1);)f++;for(var s=b<this.toJD(f,1,1)?7:1;b>this.toJD(f,s,this.daysInMonth(f,s));)s++;var t=b-this.toJD(f,s,1)+1;return this.newDate(f,s,t)}}),T.calendars.hebrew=a},26368:function(F,C,e){var T=e(38700),k=e(50896);function a(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(w){return(11*this._validate(w,this.minMonth,this.minDay,T.local.invalidYear).year()+14)%30<11},weekOfYear:function(w,b,f){var s=this.newDate(w,b,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(w){return this.leapYear(w)?355:354},daysInMonth:function(w,b){var f=this._validate(w,b,this.minDay,T.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===12&&this.leapYear(f.year())?1:0)},weekDay:function(w,b,f){return this.dayOfWeek(w,b,f)!==5},toJD:function(w,b,f){var s=this._validate(w,b,f,T.local.invalidDate);return w=s.year(),b=s.month(),w=w<=0?w+1:w,(f=s.day())+Math.ceil(29.5*(b-1))+354*(w-1)+Math.floor((3+11*w)/30)+this.jdEpoch-1},fromJD:function(w){w=Math.floor(w)+.5;var b=Math.floor((30*(w-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var f=Math.min(12,Math.ceil((w-29-this.toJD(b,1,1))/29.5)+1),s=w-this.toJD(b,f,1)+1;return this.newDate(b,f,s)}}),T.calendars.islamic=a},24747:function(F,C,e){var T=e(38700),k=e(50896);function a(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var b=this._validate(w,this.minMonth,this.minDay,T.local.invalidYear);return(w=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(w,b,f){var s=this.newDate(w,b,f);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(w,b){var f=this._validate(w,b,this.minDay,T.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(w,b,f){return(this.dayOfWeek(w,b,f)||7)<6},toJD:function(w,b,f){var s=this._validate(w,b,f,T.local.invalidDate);return w=s.year(),b=s.month(),f=s.day(),w<0&&w++,b<=2&&(w--,b+=12),Math.floor(365.25*(w+4716))+Math.floor(30.6001*(b+1))+f-1524.5},fromJD:function(w){var b=Math.floor(w+.5)+1524,f=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*f),t=Math.floor((b-s)/30.6001),i=t-Math.floor(t<14?1:13),r=f-Math.floor(i>2?4716:4715),n=b-s-Math.floor(30.6001*t);return r<=0&&r--,this.newDate(r,i,n)}}),T.calendars.julian=a},65616:function(F,C,e){var T=e(38700),k=e(50896);function a(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}function w(f,s){return f-s*Math.floor(f/s)}function b(f,s){return w(f-1,s)+1}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(f){return this._validate(f,this.minMonth,this.minDay,T.local.invalidYear),!1},formatYear:function(f){f=this._validate(f,this.minMonth,this.minDay,T.local.invalidYear).year();var s=Math.floor(f/400);return f%=400,f+=f<0?400:0,s+"."+Math.floor(f/20)+"."+f%20},forYear:function(f){if((f=f.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<f.length;t++){var i=parseInt(f[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";s=20*s+i}return s},monthsInYear:function(f){return this._validate(f,this.minMonth,this.minDay,T.local.invalidYear),18},weekOfYear:function(f,s,t){return this._validate(f,s,t,T.local.invalidDate),0},daysInYear:function(f){return this._validate(f,this.minMonth,this.minDay,T.local.invalidYear),360},daysInMonth:function(f,s){return this._validate(f,s,this.minDay,T.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(f,s,t){return this._validate(f,s,t,T.local.invalidDate).day()},weekDay:function(f,s,t){return this._validate(f,s,t,T.local.invalidDate),!0},extraInfo:function(f,s,t){var i=this._validate(f,s,t,T.local.invalidDate).toJD(),r=this._toHaab(i),n=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(f){var s=w(8+(f-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,w(s,20)]},_toTzolkin:function(f){return[b(20+(f-=this.jdEpoch),20),b(f+4,13)]},toJD:function(f,s,t){var i=this._validate(f,s,t,T.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var s=Math.floor(f/360);f%=360,f+=f<0?360:0;var t=Math.floor(f/20),i=f%20;return this.newDate(s,t,i)}}),T.calendars.mayan=a},30632:function(F,C,e){var T=e(38700),k=e(50896);function a(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar;var w=T.instance("gregorian");k(a.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear||T.regionalOptions[""].invalidYear);return w.leapYear(f.year()+(f.year()<1?1:0)+1469)},weekOfYear:function(b,f,s){var t=this.newDate(b,f,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,f){var s=this._validate(b,f,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,f,s){return(this.dayOfWeek(b,f,s)||7)<6},toJD:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidMonth);(b=t.year())<0&&b++;for(var i=t.day(),r=1;r<t.month();r++)i+=this.daysPerMonth[r-1];return i+w.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var f=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(f+1,1,1);)f++;for(var s=b-Math.floor(this.toJD(f,1,1)+.5)+1,t=1;s>this.daysInMonth(f,t);)s-=this.daysInMonth(f,t),t++;return this.newDate(f,t,s)}}),T.calendars.nanakshahi=a},73040:function(F,C,e){var T=e(38700),k=e(50896);function a(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(w){return this.daysInYear(w)!==this.daysPerYear},weekOfYear:function(w,b,f){var s=this.newDate(w,b,f);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(w){if(w=this._validate(w,this.minMonth,this.minDay,T.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[w]===void 0)return this.daysPerYear;for(var b=0,f=this.minMonth;f<=12;f++)b+=this.NEPALI_CALENDAR_DATA[w][f];return b},daysInMonth:function(w,b){return w.year&&(b=w.month(),w=w.year()),this._validate(w,b,this.minDay,T.local.invalidMonth),this.NEPALI_CALENDAR_DATA[w]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[w][b]},weekDay:function(w,b,f){return this.dayOfWeek(w,b,f)!==6},toJD:function(w,b,f){var s=this._validate(w,b,f,T.local.invalidDate);w=s.year(),b=s.month(),f=s.day();var t=T.instance(),i=0,r=b,n=w;this._createMissingCalendarData(w);var o=w-(r>9||r===9&&f>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(b!==9&&(i=f,r--);r!==9;)r<=0&&(r=12,n--),i+=this.NEPALI_CALENDAR_DATA[n][r],r--;return b===9?(i+=f-this.NEPALI_CALENDAR_DATA[n][0])<0&&(i+=t.daysInYear(o)):i+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],t.newDate(o,1,1).add(i,"d").toJD()},fromJD:function(w){var b=T.instance().fromJD(w),f=b.year(),s=b.dayOfYear(),t=f+56;this._createMissingCalendarData(t);for(var i=9,r=this.NEPALI_CALENDAR_DATA[t][0],n=this.NEPALI_CALENDAR_DATA[t][i]-r+1;s>n;)++i>12&&(i=1,t++),n+=this.NEPALI_CALENDAR_DATA[t][i];var o=this.NEPALI_CALENDAR_DATA[t][i]-(n-s);return this.newDate(t,i,o)},_createMissingCalendarData:function(w){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var f=w-1;f<w+2;f++)this.NEPALI_CALENDAR_DATA[f]===void 0&&(this.NEPALI_CALENDAR_DATA[f]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),T.calendars.nepali=a},1104:function(F,C,e){var T=e(38700),k=e(50896);function a(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function w(b,f){return b-f*Math.floor(b/f)}a.prototype=new T.baseCalendar,k(a.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear);return 682*((f.year()-(f.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,f,s){var t=this.newDate(b,f,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,f){var s=this._validate(b,f,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,f,s){return this.dayOfWeek(b,f,s)!==5},toJD:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate);b=t.year(),f=t.month(),s=t.day();var i=b-(b>=0?474:473),r=474+w(i,2820);return s+(f<=7?31*(f-1):30*(f-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var f=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(f/1029983),t=w(f,1029983),i=2820;if(t!==1029982){var r=Math.floor(t/366),n=w(t,366);i=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var o=i+2820*s+474;o=o<=0?o-1:o;var l=b-this.toJD(o,1,1)+1,c=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),d=b-this.toJD(o,c,1)+1;return this.newDate(o,c,d)}}),T.calendars.persian=a,T.calendars.jalali=a},51456:function(F,C,e){var T=e(38700),k=e(50896),a=T.instance();function w(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}w.prototype=new T.baseCalendar,k(w.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear);return b=this._t2gYear(f.year()),a.leapYear(b)},weekOfYear:function(b,f,s){var t=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear);return b=this._t2gYear(t.year()),a.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,f){var s=this._validate(b,f,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,f,s){return(this.dayOfWeek(b,f,s)||7)<6},toJD:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate);return b=this._t2gYear(t.year()),a.toJD(b,t.month(),t.day())},fromJD:function(b){var f=a.fromJD(b),s=this._g2tYear(f.year());return this.newDate(s,f.month(),f.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),T.calendars.taiwan=w},4592:function(F,C,e){var T=e(38700),k=e(50896),a=T.instance();function w(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}w.prototype=new T.baseCalendar,k(w.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear);return b=this._t2gYear(f.year()),a.leapYear(b)},weekOfYear:function(b,f,s){var t=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear);return b=this._t2gYear(t.year()),a.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,f){var s=this._validate(b,f,this.minDay,T.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,f,s){return(this.dayOfWeek(b,f,s)||7)<6},toJD:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate);return b=this._t2gYear(t.year()),a.toJD(b,t.month(),t.day())},fromJD:function(b){var f=a.fromJD(b),s=this._g2tYear(f.year());return this.newDate(s,f.month(),f.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),T.calendars.thai=w},45348:function(F,C,e){var T=e(38700),k=e(50896);function a(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}a.prototype=new T.baseCalendar,k(a.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,T.local.invalidYear);return this.daysInYear(f.year())===355},weekOfYear:function(b,f,s){var t=this.newDate(b,f,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var f=0,s=1;s<=12;s++)f+=this.daysInMonth(b,s);return f},daysInMonth:function(b,f){for(var s=this._validate(b,f,this.minDay,T.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<w.length;i++){if(w[i]>s)return w[t]-w[t-1];t++}return 30},weekDay:function(b,f,s){return this.dayOfWeek(b,f,s)!==5},toJD:function(b,f,s){var t=this._validate(b,f,s,T.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+w[i-1]-1+24e5-.5},fromJD:function(b){for(var f=b-24e5+.5,s=0,t=0;t<w.length&&!(w[t]>f);t++)s++;var i=s+15292,r=Math.floor((i-1)/12),n=r+1,o=i-12*r,l=f-w[s-1]+1;return this.newDate(n,o,l)},isValid:function(b,f,s){var t=T.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,f,s,t){var i=T.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),T.calendars.ummalqura=a;var w=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(F,C,e){var T=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function a(t,i,r,n){if(this._calendar=t,this._year=i,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function w(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function f(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}T(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var r=this._localCals[t+"-"+i];if(!r&&this.calendars[t]&&(r=new this.calendars[t](i),this._localCals[t+"-"+i]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return r},newDate:function(t,i,r,n,o){return(n=(t!=null&&t.year?t.calendar():typeof n=="string"?this.instance(n,o):n)||this.instance()).newDate(t,i,r)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(r){return t[r]})}},substituteChineseDigits:function(t,i){return function(r){for(var n="",o=0;r>0;){var l=r%10;n=(l===0?"":t[l]+i[o])+n,o++,r=Math.floor(r/10)}return n.indexOf(t[1]+i[1])===0&&(n=n.substr(1)),n||t[0]}}}),T(a.prototype,{newDate:function(t,i,r){return this._calendar.newDate(t??this,i,r)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,r){if(!this._calendar.isValid(t,i,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+w(Math.abs(this.year()),4)+"-"+w(this.month(),2)+"-"+w(this.day(),2)}}),T(b.prototype,{_validateLevel:0,newDate:function(t,i,r){return t==null?this.today():(t.year&&(this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=t.day(),i=t.month(),t=t.year()),new a(this,t,i,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+w(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var r=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(t,i){var r=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(t,i,r){return this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,i,r){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,r),i,r)},_add:function(t,i,r){if(this._validateLevel++,r==="d"||r==="w"){var n=t.toJD()+i*(r==="w"?this.daysInWeek():1),o=t.calendar().fromJD(n);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var l=t.year()+(r==="y"?i:0),c=t.monthOfYear()+(r==="m"?i:0);o=t.day(),r==="y"?(t.month()!==this.fromMonthOfYear(l,c)&&(c=this.newDate(l,t.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(l)),o=Math.min(o,this.daysInMonth(l,this.fromMonthOfYear(l,c)))):r==="m"&&(function(u){for(;c<u.minMonth;)l--,c+=u.monthsInYear(l);for(var x=u.monthsInYear(l);c>x-1+u.minMonth;)l++,c-=x,x=u.monthsInYear(l)}(this),o=Math.min(o,this.daysInMonth(l,this.fromMonthOfYear(l,c))));var d=[l,this.fromMonthOfYear(l,c),o];return this._validateLevel--,d}catch(u){throw this._validateLevel--,u}},_correctAdd:function(t,i,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],l=r<0?-1:1;i=this._add(t,r*o[0]+l*o[1],o[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,r){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n=r==="y"?i:t.year(),o=r==="m"?i:t.month(),l=r==="d"?i:t.day();return r!=="y"&&r!=="m"||(l=Math.min(l,this.daysInMonth(n,o))),t.date(n,o,l)},isValid:function(t,i,r){this._validateLevel++;var n=this.hasYearZero||t!==0;if(n){var o=this.newDate(t,i,this.minDay);n=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(o)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(o)}return this._validateLevel--,n},toJSDate:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,i,r,n){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,r))throw n.replace(/\{0\}/,this.local.name);var o=this.newDate(t,i,r);return this._validateLevel--,o}catch(l){throw this._validateLevel--,l}}}),f.prototype=new b,T(f.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,r){var n=this.newDate(t,i,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var r=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(t,i,r){return(this.dayOfWeek(t,i,r)||7)<6},toJD:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=n.year(),i=n.month(),r=n.day(),t<0&&t++,i<3&&(i+=12,t--);var o=Math.floor(t/100),l=2-o+Math.floor(o/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+r+l-1524.5},fromJD:function(t){var i=Math.floor(t+.5),r=Math.floor((i-186721625e-2)/36524.25),n=1524+(r=i+1+r-Math.floor(r/4)),o=Math.floor((n-122.1)/365.25),l=Math.floor(365.25*o),c=Math.floor((n-l)/30.6001),d=n-l-Math.floor(30.6001*c),u=c-(c>13.5?13:1),x=o-(u>2.5?4716:4715);return x<=0&&x--,this.newDate(x,u,d)},toJSDate:function(t,i,r){var n=this._validate(t,i,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),o=new Date(n.year(),n.month()-1,n.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=F.exports=new k;s.cdate=a,s.baseCalendar=b,s.calendars.gregorian=f},15168:function(F,C,e){var T=e(50896),k=e(38700);T(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],T(k.cdate.prototype,{formatDate:function(a,w){return typeof a!="string"&&(w=a,a=""),this._calendar.formatDate(a||"",this,w)}}),T(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,w,b){if(typeof a!="string"&&(b=w,w=a,a=""),!w)return"";if(w.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat;for(var f,s,t,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,r=b.dayNames||this.local.dayNames,n=b.monthNumbers||this.local.monthNumbers,o=b.monthNamesShort||this.local.monthNamesShort,l=b.monthNames||this.local.monthNames,c=(b.calculateWeek||this.local.calculateWeek,function(h,S){for(var A=1;_+A<a.length&&a.charAt(_+A)===h;)A++;return _+=A-1,Math.floor(A/(S||1))>1}),d=function(h,S,A,E){var P=""+S;if(c(h,E))for(;P.length<A;)P="0"+P;return P},u=this,x=function(h){return typeof n=="function"?n.call(u,h,c("m")):m(d("m",h.month(),2))},p=function(h,S){return S?typeof l=="function"?l.call(u,h):l[h.month()-u.minMonth]:typeof o=="function"?o.call(u,h):o[h.month()-u.minMonth]},g=this.local.digits,m=function(h){return b.localNumbers&&g?g(h):h},y="",v=!1,_=0;_<a.length;_++)if(v)a.charAt(_)!=="'"||c("'")?y+=a.charAt(_):v=!1;else switch(a.charAt(_)){case"d":y+=m(d("d",w.day(),2));break;case"D":y+=(f=w.dayOfWeek(),s=i,t=r,c("D")?t[f]:s[f]);break;case"o":y+=d("o",w.dayOfYear(),3);break;case"w":y+=d("w",w.weekOfYear(),2);break;case"m":y+=x(w);break;case"M":y+=p(w,c("M"));break;case"y":y+=c("y",2)?w.year():(w.year()%100<10?"0":"")+w.year()%100;break;case"Y":c("Y",2),y+=w.formatYear();break;case"J":y+=w.toJD();break;case"@":y+=(w.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(w.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?y+="'":v=!0;break;default:y+=a.charAt(_)}return y},parseDate:function(a,w,b){if(w==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((w=typeof w=="object"?w.toString():w+"")==="")return null;a=a||this.local.dateFormat;var f=(b=b||{}).shortYearCutoff||this.shortYearCutoff;f=typeof f!="string"?f:this.today().year()%100+parseInt(f,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,r=b.monthNumbers||this.local.monthNumbers,n=b.monthNamesShort||this.local.monthNamesShort,o=b.monthNames||this.local.monthNames,l=-1,c=-1,d=-1,u=-1,x=-1,p=!1,g=!1,m=function(z,V){for(var O=1;P+O<a.length&&a.charAt(P+O)===z;)O++;return P+=O-1,Math.floor(O/(V||1))>1},y=function(z,V){var O=m(z,V),j=[2,3,O?4:2,O?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],Y=new RegExp("^-?\\d{1,"+j+"}"),B=w.substring(E).match(Y);if(!B)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=B[0].length,parseInt(B[0],10)},v=this,_=function(){if(typeof r=="function"){m("m");var z=r.call(v,w.substring(E));return E+=z.length,z}return y("m")},h=function(z,V,O,j){for(var Y=m(z,j)?O:V,B=0;B<Y.length;B++)if(w.substr(E,Y[B].length).toLowerCase()===Y[B].toLowerCase())return E+=Y[B].length,B+v.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof o=="function"){var z=m("M")?o.call(v,w.substring(E)):n.call(v,w.substring(E));return E+=z.length,z}return h("M",n,o)},A=function(){if(w.charAt(E)!==a.charAt(P))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,P=0;P<a.length;P++)if(g)a.charAt(P)!=="'"||m("'")?A():g=!1;else switch(a.charAt(P)){case"d":u=y("d");break;case"D":h("D",s,t);break;case"o":x=y("o");break;case"w":y("w");break;case"m":d=_();break;case"M":d=S();break;case"y":var I=P;p=!m("y",2),P=I,c=y("y",2);break;case"Y":c=y("Y",2);break;case"J":l=y("J")+.5,w.charAt(E)==="."&&(E++,y("J"));break;case"@":l=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=w.length;break;case"'":m("'")?A():g=!0;break;default:A()}if(E<w.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&p&&(c+=f===-1?1900:this.today().year()-this.today().year()%100-(c<=f?0:100)),typeof d=="string"&&(d=i.call(this,c,d)),x>-1){d=1,u=x;for(var D=this.daysInMonth(c,d);u>D;D=this.daysInMonth(c,d))d++,u-=D}return l>-1?this.fromJD(l):this.newDate(c,d,u)},determineDate:function(a,w,b,f,s){b&&typeof b!="object"&&(s=f,f=b,b=null),typeof f!="string"&&(s=f,f="");var t=this;return w=w?w.newDate():null,a==null?w:typeof a=="string"?function(i){try{return t.parseDate(f,i,s)}catch{}for(var r=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,o=n.exec(i);o;)r.add(parseInt(o[1],10),o[2]||"d"),o=n.exec(i);return r}(a):typeof a=="number"?isNaN(a)||a===1/0||a===-1/0?w:t.today().add(a,"d"):t.newDate(a)}})},21576:function(){},19768:function(){},63436:function(F,C,e){"use strict";var T=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;F.exports=function(){for(var a=[],w=0;w<T.length;w++)typeof k[T[w]]=="function"&&(a[a.length]=T[w]);return a}},67756:function(F,C,e){"use strict";function T(pe,de,me){pe.prototype=de.prototype=me,me.constructor=pe}function k(pe,de){var me=Object.create(pe.prototype);for(var ke in de)me[ke]=de[ke];return me}function a(){}e.d(C,{qy:function(){return ye},Gz:function(){return J}});var w=.7,b=1/w,f="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(f,",").concat(f,",").concat(f,"\\)$")),n=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),o=new RegExp("^rgba\\(".concat(f,",").concat(f,",").concat(f,",").concat(s,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),d=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function p(){return this.rgb().formatRgb()}function g(pe){var de,me;return pe=(pe+"").trim().toLowerCase(),(de=i.exec(pe))?(me=de[1].length,de=parseInt(de[1],16),me===6?m(de):me===3?new _(de>>8&15|de>>4&240,de>>4&15|240&de,(15&de)<<4|15&de,1):me===8?y(de>>24&255,de>>16&255,de>>8&255,(255&de)/255):me===4?y(de>>12&15|de>>8&240,de>>8&15|de>>4&240,de>>4&15|240&de,((15&de)<<4|15&de)/255):null):(de=r.exec(pe))?new _(de[1],de[2],de[3],1):(de=n.exec(pe))?new _(255*de[1]/100,255*de[2]/100,255*de[3]/100,1):(de=o.exec(pe))?y(de[1],de[2],de[3],de[4]):(de=l.exec(pe))?y(255*de[1]/100,255*de[2]/100,255*de[3]/100,de[4]):(de=c.exec(pe))?I(de[1],de[2]/100,de[3]/100,1):(de=d.exec(pe))?I(de[1],de[2]/100,de[3]/100,de[4]):u.hasOwnProperty(pe)?m(u[pe]):pe==="transparent"?new _(NaN,NaN,NaN,0):null}function m(pe){return new _(pe>>16&255,pe>>8&255,255&pe,1)}function y(pe,de,me,ke){return ke<=0&&(pe=de=me=NaN),new _(pe,de,me,ke)}function v(pe,de,me,ke){return arguments.length===1?((Ce=pe)instanceof a||(Ce=g(Ce)),Ce?new _((Ce=Ce.rgb()).r,Ce.g,Ce.b,Ce.opacity):new _):new _(pe,de,me,ke??1);var Ce}function _(pe,de,me,ke){this.r=+pe,this.g=+de,this.b=+me,this.opacity=+ke}function h(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function S(){var pe=A(this.opacity);return"".concat(pe===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(pe===1?")":", ".concat(pe,")"))}function A(pe){return isNaN(pe)?1:Math.max(0,Math.min(1,pe))}function E(pe){return Math.max(0,Math.min(255,Math.round(pe)||0))}function P(pe){return((pe=E(pe))<16?"0":"")+pe.toString(16)}function I(pe,de,me,ke){return ke<=0?pe=de=me=NaN:me<=0||me>=1?pe=de=NaN:de<=0&&(pe=NaN),new z(pe,de,me,ke)}function D(pe){if(pe instanceof z)return new z(pe.h,pe.s,pe.l,pe.opacity);if(pe instanceof a||(pe=g(pe)),!pe)return new z;if(pe instanceof z)return pe;var de=(pe=pe.rgb()).r/255,me=pe.g/255,ke=pe.b/255,Ce=Math.min(de,me,ke),ge=Math.max(de,me,ke),oe=NaN,re=ge-Ce,fe=(ge+Ce)/2;return re?(oe=de===ge?(me-ke)/re+6*(me<ke):me===ge?(ke-de)/re+2:(de-me)/re+4,re/=fe<.5?ge+Ce:2-ge-Ce,oe*=60):re=fe>0&&fe<1?0:oe,new z(oe,re,fe,pe.opacity)}function z(pe,de,me,ke){this.h=+pe,this.s=+de,this.l=+me,this.opacity=+ke}function V(pe){return(pe=(pe||0)%360)<0?pe+360:pe}function O(pe){return Math.max(0,Math.min(1,pe||0))}function j(pe,de,me){return 255*(pe<60?de+(me-de)*pe/60:pe<180?me:pe<240?de+(me-de)*(240-pe)/60:de)}function Y(pe,de,me,ke,Ce){var ge=pe*pe,oe=ge*pe;return((1-3*pe+3*ge-oe)*de+(4-6*ge+3*oe)*me+(1+3*pe+3*ge-3*oe)*ke+oe*Ce)/6}T(a,g,{copy:function(pe){return Object.assign(new this.constructor,this,pe)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return D(this).formatHsl()},formatRgb:p,toString:p}),T(_,v,k(a,{brighter:function(pe){return pe=pe==null?b:Math.pow(b,pe),new _(this.r*pe,this.g*pe,this.b*pe,this.opacity)},darker:function(pe){return pe=pe==null?w:Math.pow(w,pe),new _(this.r*pe,this.g*pe,this.b*pe,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),A(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),T(z,function(pe,de,me,ke){return arguments.length===1?D(pe):new z(pe,de,me,ke??1)},k(a,{brighter:function(pe){return pe=pe==null?b:Math.pow(b,pe),new z(this.h,this.s,this.l*pe,this.opacity)},darker:function(pe){return pe=pe==null?w:Math.pow(w,pe),new z(this.h,this.s,this.l*pe,this.opacity)},rgb:function(){var pe=this.h%360+360*(this.h<0),de=isNaN(pe)||isNaN(this.s)?0:this.s,me=this.l,ke=me+(me<.5?me:1-me)*de,Ce=2*me-ke;return new _(j(pe>=240?pe-240:pe+120,Ce,ke),j(pe,Ce,ke),j(pe<120?pe+240:pe-120,Ce,ke),this.opacity)},clamp:function(){return new z(V(this.h),O(this.s),O(this.l),A(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var pe=A(this.opacity);return"".concat(pe===1?"hsl(":"hsla(").concat(V(this.h),", ").concat(100*O(this.s),"%, ").concat(100*O(this.l),"%").concat(pe===1?")":", ".concat(pe,")"))}}));var B=function(pe){return function(){return pe}};function U(pe,de){var me=de-pe;return me?function(ke,Ce){return function(ge){return ke+ge*Ce}}(pe,me):B(isNaN(pe)?de:pe)}var q=function pe(de){var me=function(Ce){return(Ce=+Ce)==1?U:function(ge,oe){return oe-ge?function(re,fe,Se){return re=Math.pow(re,Se),fe=Math.pow(fe,Se)-re,Se=1/Se,function(be){return Math.pow(re+be*fe,Se)}}(ge,oe,Ce):B(isNaN(ge)?oe:ge)}}(de);function ke(Ce,ge){var oe=me((Ce=v(Ce)).r,(ge=v(ge)).r),re=me(Ce.g,ge.g),fe=me(Ce.b,ge.b),Se=U(Ce.opacity,ge.opacity);return function(be){return Ce.r=oe(be),Ce.g=re(be),Ce.b=fe(be),Ce.opacity=Se(be),Ce+""}}return ke.gamma=pe,ke}(1);function te(pe){return function(de){var me,ke,Ce=de.length,ge=new Array(Ce),oe=new Array(Ce),re=new Array(Ce);for(me=0;me<Ce;++me)ke=v(de[me]),ge[me]=ke.r||0,oe[me]=ke.g||0,re[me]=ke.b||0;return ge=pe(ge),oe=pe(oe),re=pe(re),ke.opacity=1,function(fe){return ke.r=ge(fe),ke.g=oe(fe),ke.b=re(fe),ke+""}}}function ee(pe,de){var me,ke=de?de.length:0,Ce=pe?Math.min(ke,pe.length):0,ge=new Array(Ce),oe=new Array(ke);for(me=0;me<Ce;++me)ge[me]=ye(pe[me],de[me]);for(;me<ke;++me)oe[me]=de[me];return function(re){for(me=0;me<Ce;++me)oe[me]=ge[me](re);return oe}}function Q(pe,de){var me=new Date;return pe=+pe,de=+de,function(ke){return me.setTime(pe*(1-ke)+de*ke),me}}function J(pe,de){return pe=+pe,de=+de,function(me){return pe*(1-me)+de*me}}function K(pe){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},K(pe)}function X(pe,de){var me,ke={},Ce={};for(me in pe!==null&&K(pe)==="object"||(pe={}),de!==null&&K(de)==="object"||(de={}),de)me in pe?ke[me]=ye(pe[me],de[me]):Ce[me]=de[me];return function(ge){for(me in ke)Ce[me]=ke[me](ge);return Ce}}te(function(pe){var de=pe.length-1;return function(me){var ke=me<=0?me=0:me>=1?(me=1,de-1):Math.floor(me*de),Ce=pe[ke],ge=pe[ke+1],oe=ke>0?pe[ke-1]:2*Ce-ge,re=ke<de-1?pe[ke+2]:2*ge-Ce;return Y((me-ke/de)*de,oe,Ce,ge,re)}}),te(function(pe){var de=pe.length;return function(me){var ke=Math.floor(((me%=1)<0?++me:me)*de),Ce=pe[(ke+de-1)%de],ge=pe[ke%de],oe=pe[(ke+1)%de],re=pe[(ke+2)%de];return Y((me-ke/de)*de,Ce,ge,oe,re)}});var ie=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,se=new RegExp(ie.source,"g");function ae(pe,de){var me,ke,Ce,ge=ie.lastIndex=se.lastIndex=0,oe=-1,re=[],fe=[];for(pe+="",de+="";(me=ie.exec(pe))&&(ke=se.exec(de));)(Ce=ke.index)>ge&&(Ce=de.slice(ge,Ce),re[oe]?re[oe]+=Ce:re[++oe]=Ce),(me=me[0])===(ke=ke[0])?re[oe]?re[oe]+=ke:re[++oe]=ke:(re[++oe]=null,fe.push({i:oe,x:J(me,ke)})),ge=se.lastIndex;return ge<de.length&&(Ce=de.slice(ge),re[oe]?re[oe]+=Ce:re[++oe]=Ce),re.length<2?fe[0]?function(Se){return function(be){return Se(be)+""}}(fe[0].x):function(Se){return function(){return Se}}(de):(de=fe.length,function(Se){for(var be,we=0;we<de;++we)re[(be=fe[we]).i]=be.x(Se);return re.join("")})}function ue(pe,de){de||(de=[]);var me,ke=pe?Math.min(de.length,pe.length):0,Ce=de.slice();return function(ge){for(me=0;me<ke;++me)Ce[me]=pe[me]*(1-ge)+de[me]*ge;return Ce}}function ve(pe){return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},ve(pe)}function ye(pe,de){var me,ke,Ce=ve(de);return de==null||Ce==="boolean"?B(de):(Ce==="number"?J:Ce==="string"?(me=g(de))?(de=me,q):ae:de instanceof g?q:de instanceof Date?Q:(ke=de,!ArrayBuffer.isView(ke)||ke instanceof DataView?Array.isArray(de)?ee:typeof de.valueOf!="function"&&typeof de.toString!="function"||isNaN(de)?X:J:ue))(pe,de)}},30584:function(F){"use strict";F.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(F){"use strict";F.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(F){"use strict";F.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(F){"use strict";F.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(F){"use strict";F.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(F){"use strict";F.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},qe={};function xt(F){var C=qe[F];if(C!==void 0)return C.exports;var e=qe[F]={exports:{}};return ht[F].call(e.exports,e,e.exports,xt),e.exports}return xt.n=function(F){var C=F&&F.__esModule?function(){return F.default}:function(){return F};return xt.d(C,{a:C}),C},xt.d=function(F,C){for(var e in C)xt.o(C,e)&&!xt.o(F,e)&&Object.defineProperty(F,e,{enumerable:!0,get:C[e]})},xt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),xt.o=function(F,C){return Object.prototype.hasOwnProperty.call(F,C)},xt.r=function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})},xt(13792)}()})});var Sv=(ht,qe)=>qe.id;function Cv(ht,qe){if(ht&1){let xt=ya();Nn(0,"mat-list-option",1),Jr("click",function(){let C=ri(xt).$implicit,e=Br(2);return ii(e.selectAnalysisGroup(C))}),Nn(1,"b"),yr(2),Gn(),Nn(3,"span",2),yr(4),Gn()(),Wi(5,"mat-divider")}if(ht&2){let xt=qe.$implicit,F=Br(2);Nr("value",xt),_r(2),ra(xt.name),_r(2),dl(" ",F.dataService.getAnalysisGroupTypeLabel(xt.analysis_group_type)," ")}}function Ev(ht,qe){if(ht&1&&(Nn(0,"mat-selection-list",0),ta(1,Cv,6,3,null,null,Sv),Gn()),ht&2){let xt=Br();Nr("multiple",!1),_r(),na(xt.analysisGroupQuery.results)}}var s2=(()=>{let qe=class qe{constructor(F){this.dataService=F,this.selectedAnalysisGroup=new qr}selectAnalysisGroup(F){this.selectedAnalysisGroup.emit(F)}};qe.\u0275fac=function(C){return new(C||qe)(hr(jh))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-analysis-group-list"]],inputs:{analysisGroupQuery:"analysisGroupQuery"},outputs:{selectedAnalysisGroup:"selectedAnalysisGroup"},standalone:!0,features:[Yi],decls:1,vars:1,consts:[[3,"multiple"],[3,"click","value"],["matListItemLine",""]],template:function(C,e){C&1&&fi(0,Ev,3,1,"mat-selection-list",0),C&2&&hi(e.analysisGroupQuery?0:-1)},dependencies:[Cm,Lm,Im,Em]});let ht=qe;return ht})();var Zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Km="ARRAYBUFFER not supported by this environment",Jm="UINT8ARRAY not supported by this environment";function Nm(ht,qe,xt,F){let C,e,T,k=qe||[0],a=(xt=xt||0)>>>3,w=F===-1?3:0;for(C=0;C<ht.length;C+=1)T=C+a,e=T>>>2,k.length<=e&&k.push(0),k[e]|=ht[C]<<8*(w+F*(T%4));return{value:k,binLen:8*ht.length+xt}}function $u(ht,qe,xt){switch(qe){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(ht){case"HEX":return function(F,C,e){return function(T,k,a,w){let b,f,s,t;if(T.length%2!=0)throw new Error("String of HEX type must be in byte increments");let i=k||[0],r=(a=a||0)>>>3,n=w===-1?3:0;for(b=0;b<T.length;b+=2){if(f=parseInt(T.substr(b,2),16),isNaN(f))throw new Error("String of HEX type contains invalid characters");for(t=(b>>>1)+r,s=t>>>2;i.length<=s;)i.push(0);i[s]|=f<<8*(n+w*(t%4))}return{value:i,binLen:4*T.length+a}}(F,C,e,xt)};case"TEXT":return function(F,C,e){return function(T,k,a,w,b){let f,s,t,i,r,n,o,l,c=0,d=a||[0],u=(w=w||0)>>>3;if(k==="UTF8")for(o=b===-1?3:0,t=0;t<T.length;t+=1)for(f=T.charCodeAt(t),s=[],128>f?s.push(f):2048>f?(s.push(192|f>>>6),s.push(128|63&f)):55296>f||57344<=f?s.push(224|f>>>12,128|f>>>6&63,128|63&f):(t+=1,f=65536+((1023&f)<<10|1023&T.charCodeAt(t)),s.push(240|f>>>18,128|f>>>12&63,128|f>>>6&63,128|63&f)),i=0;i<s.length;i+=1){for(n=c+u,r=n>>>2;d.length<=r;)d.push(0);d[r]|=s[i]<<8*(o+b*(n%4)),c+=1}else for(o=b===-1?2:0,l=k==="UTF16LE"&&b!==1||k!=="UTF16LE"&&b===1,t=0;t<T.length;t+=1){for(f=T.charCodeAt(t),l===!0&&(i=255&f,f=i<<8|f>>>8),n=c+u,r=n>>>2;d.length<=r;)d.push(0);d[r]|=f<<8*(o+b*(n%4)),c+=2}return{value:d,binLen:8*c+w}}(F,qe,C,e,xt)};case"B64":return function(F,C,e){return function(T,k,a,w){let b,f,s,t,i,r,n,o=0,l=k||[0],c=(a=a||0)>>>3,d=w===-1?3:0,u=T.indexOf("=");if(T.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(T=T.replace(/=/g,""),u!==-1&&u<T.length)throw new Error("Invalid '=' found in base-64 string");for(f=0;f<T.length;f+=4){for(i=T.substr(f,4),t=0,s=0;s<i.length;s+=1)b=Zm.indexOf(i.charAt(s)),t|=b<<18-6*s;for(s=0;s<i.length-1;s+=1){for(n=o+c,r=n>>>2;l.length<=r;)l.push(0);l[r]|=(t>>>16-8*s&255)<<8*(d+w*(n%4)),o+=1}}return{value:l,binLen:8*o+a}}(F,C,e,xt)};case"BYTES":return function(F,C,e){return function(T,k,a,w){let b,f,s,t,i=k||[0],r=(a=a||0)>>>3,n=w===-1?3:0;for(f=0;f<T.length;f+=1)b=T.charCodeAt(f),t=f+r,s=t>>>2,i.length<=s&&i.push(0),i[s]|=b<<8*(n+w*(t%4));return{value:i,binLen:8*T.length+a}}(F,C,e,xt)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(Km)}return function(F,C,e){return function(T,k,a,w){return Nm(new Uint8Array(T),k,a,w)}(F,C,e,xt)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(Jm)}return function(F,C,e){return Nm(F,C,e,xt)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function jm(ht,qe,xt,F){switch(ht){case"HEX":return function(C){return function(e,T,k,a){let w="0123456789abcdef",b,f,s="",t=T/8,i=k===-1?3:0;for(b=0;b<t;b+=1)f=e[b>>>2]>>>8*(i+k*(b%4)),s+=w.charAt(f>>>4&15)+w.charAt(15&f);return a.outputUpper?s.toUpperCase():s}(C,qe,xt,F)};case"B64":return function(C){return function(e,T,k,a){let w,b,f,s,t,i="",r=T/8,n=k===-1?3:0;for(w=0;w<r;w+=3)for(s=w+1<r?e[w+1>>>2]:0,t=w+2<r?e[w+2>>>2]:0,f=(e[w>>>2]>>>8*(n+k*(w%4))&255)<<16|(s>>>8*(n+k*((w+1)%4))&255)<<8|t>>>8*(n+k*((w+2)%4))&255,b=0;b<4;b+=1)i+=8*w+6*b<=T?Zm.charAt(f>>>6*(3-b)&63):a.b64Pad;return i}(C,qe,xt,F)};case"BYTES":return function(C){return function(e,T,k){let a,w,b="",f=T/8,s=k===-1?3:0;for(a=0;a<f;a+=1)w=e[a>>>2]>>>8*(s+k*(a%4))&255,b+=String.fromCharCode(w);return b}(C,qe,xt)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(Km)}return function(C){return function(e,T,k){let a,w=T/8,b=new ArrayBuffer(w),f=new Uint8Array(b),s=k===-1?3:0;for(a=0;a<w;a+=1)f[a]=e[a>>>2]>>>8*(s+k*(a%4))&255;return b}(C,qe,xt)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(Jm)}return function(C){return function(e,T,k){let a,w=T/8,b=k===-1?3:0,f=new Uint8Array(w);for(a=0;a<w;a+=1)f[a]=e[a>>>2]>>>8*(b+k*(a%4))&255;return f}(C,qe,xt)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var Of=4294967296,Vr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_c=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Rf="Chosen SHA variant is not supported",$m="Cannot set numRounds with MAC";function qh(ht,qe){let xt,F,C=ht.binLen>>>3,e=qe.binLen>>>3,T=C<<3,k=4-C<<3;if(C%4!=0){for(xt=0;xt<e;xt+=4)F=C+xt>>>2,ht.value[F]|=qe.value[xt>>>2]<<T,ht.value.push(0),ht.value[F+1]|=qe.value[xt>>>2]>>>k;return(ht.value.length<<2)-4>=e+C&&ht.value.pop(),{value:ht.value,binLen:ht.binLen+qe.binLen}}return{value:ht.value.concat(qe.value),binLen:ht.binLen+qe.binLen}}function Um(ht){let qe={outputUpper:!1,b64Pad:"=",outputLen:-1},xt=ht||{},F="Output length must be a multiple of 8";if(qe.outputUpper=xt.outputUpper||!1,xt.b64Pad&&(qe.b64Pad=xt.b64Pad),xt.outputLen){if(xt.outputLen%8!=0)throw new Error(F);qe.outputLen=xt.outputLen}else if(xt.shakeLen){if(xt.shakeLen%8!=0)throw new Error(F);qe.outputLen=xt.shakeLen}if(typeof qe.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof qe.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return qe}function Xc(ht,qe,xt,F){let C=ht+" must include a value and format";if(!qe){if(!F)throw new Error(C);return F}if(qe.value===void 0||!qe.format)throw new Error(C);return $u(qe.format,qe.encoding||"UTF8",xt)(qe.value)}var Ju=class{constructor(qe,xt,F){let C=F||{};if(this.t=xt,this.i=C.encoding||"UTF8",this.numRounds=C.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=qe,this.h=[],this.u=0,this.l=!1,this.A=0,this.H=!1,this.S=[],this.p=[]}update(qe){let xt,F=0,C=this.m>>>5,e=this.C(qe,this.h,this.u),T=e.binLen,k=e.value,a=T>>>5;for(xt=0;xt<a;xt+=C)F+this.m<=T&&(this.U=this.v(k.slice(xt,xt+C),this.U),F+=this.m);return this.A+=F,this.h=k.slice(F>>>5),this.u=T%this.m,this.l=!0,this}getHash(qe,xt){let F,C,e=this.R,T=Um(xt);if(this.K){if(T.outputLen===-1)throw new Error("Output length must be specified in options");e=T.outputLen}let k=jm(qe,e,this.T,T);if(this.H&&this.g)return k(this.g(T));for(C=this.F(this.h.slice(),this.u,this.A,this.L(this.U),e),F=1;F<this.numRounds;F+=1)this.K&&e%32!=0&&(C[C.length-1]&=16777215>>>24-e%32),C=this.F(C,e,0,this.B(this.o),e);return k(C)}setHMACKey(qe,xt,F){if(!this.M)throw new Error("Variant does not support HMAC");if(this.l)throw new Error("Cannot set MAC key after calling update");let C=$u(xt,(F||{}).encoding||"UTF8",this.T);this.k(C(qe))}k(qe){let xt=this.m>>>3,F=xt/4-1,C;if(this.numRounds!==1)throw new Error($m);if(this.H)throw new Error("MAC key already set");for(xt<qe.binLen/8&&(qe.value=this.F(qe.value,qe.binLen,0,this.B(this.o),this.R));qe.value.length<=F;)qe.value.push(0);for(C=0;C<=F;C+=1)this.S[C]=909522486^qe.value[C],this.p[C]=1549556828^qe.value[C];this.U=this.v(this.S,this.U),this.A=this.m,this.H=!0}getHMAC(qe,xt){let F=Um(xt);return jm(qe,this.R,this.T,F)(this.Y())}Y(){let qe;if(!this.H)throw new Error("Cannot call getHMAC without first setting MAC key");let xt=this.F(this.h.slice(),this.u,this.A,this.L(this.U),this.R);return qe=this.v(this.p,this.B(this.o)),qe=this.F(xt,this.R,this.m,qe,this.R),qe}};function Ku(ht,qe){return ht<<qe|ht>>>32-qe}function lc(ht,qe){return ht>>>qe|ht<<32-qe}function Qm(ht,qe){return ht>>>qe}function Vm(ht,qe,xt){return ht^qe^xt}function eg(ht,qe,xt){return ht&qe^~ht&xt}function tg(ht,qe,xt){return ht&qe^ht&xt^qe&xt}function Lv(ht){return lc(ht,2)^lc(ht,13)^lc(ht,22)}function Xo(ht,qe){let xt=(65535&ht)+(65535&qe);return(65535&(ht>>>16)+(qe>>>16)+(xt>>>16))<<16|65535&xt}function Iv(ht,qe,xt,F){let C=(65535&ht)+(65535&qe)+(65535&xt)+(65535&F);return(65535&(ht>>>16)+(qe>>>16)+(xt>>>16)+(F>>>16)+(C>>>16))<<16|65535&C}function Df(ht,qe,xt,F,C){let e=(65535&ht)+(65535&qe)+(65535&xt)+(65535&F)+(65535&C);return(65535&(ht>>>16)+(qe>>>16)+(xt>>>16)+(F>>>16)+(C>>>16)+(e>>>16))<<16|65535&e}function Pv(ht){return lc(ht,7)^lc(ht,18)^Qm(ht,3)}function Dv(ht){return lc(ht,6)^lc(ht,11)^lc(ht,25)}function Ov(ht){return[1732584193,4023233417,2562383102,271733878,3285377520]}function ng(ht,qe){let xt,F,C,e,T,k,a,w=[];for(xt=qe[0],F=qe[1],C=qe[2],e=qe[3],T=qe[4],a=0;a<80;a+=1)w[a]=a<16?ht[a]:Ku(w[a-3]^w[a-8]^w[a-14]^w[a-16],1),k=a<20?Df(Ku(xt,5),eg(F,C,e),T,1518500249,w[a]):a<40?Df(Ku(xt,5),Vm(F,C,e),T,1859775393,w[a]):a<60?Df(Ku(xt,5),tg(F,C,e),T,2400959708,w[a]):Df(Ku(xt,5),Vm(F,C,e),T,3395469782,w[a]),T=e,e=C,C=Ku(F,30),F=xt,xt=k;return qe[0]=Xo(xt,qe[0]),qe[1]=Xo(F,qe[1]),qe[2]=Xo(C,qe[2]),qe[3]=Xo(e,qe[3]),qe[4]=Xo(T,qe[4]),qe}function Rv(ht,qe,xt,F){let C,e=15+(qe+65>>>9<<4),T=qe+xt;for(;ht.length<=e;)ht.push(0);for(ht[qe>>>5]|=128<<24-qe%32,ht[e]=4294967295&T,ht[e-1]=T/Of|0,C=0;C<ht.length;C+=16)F=ng(ht.slice(C,C+16),F);return F}var zv=class extends Ju{constructor(ht,qe,xt){if(ht!=="SHA-1")throw new Error(Rf);super(ht,qe,xt);let F=xt||{};this.M=!0,this.g=this.Y,this.T=-1,this.C=$u(this.t,this.i,this.T),this.v=ng,this.L=function(C){return C.slice()},this.B=Ov,this.F=Rv,this.U=[1732584193,4023233417,2562383102,271733878,3285377520],this.m=512,this.R=160,this.K=!1,F.hmacKey&&this.k(Xc("hmacKey",F.hmacKey,this.T))}};function Hm(ht){let qe;return qe=ht=="SHA-224"?_c.slice():wc.slice(),qe}function Gm(ht,qe){let xt,F,C,e,T,k,a,w,b,f,s,t=[];for(xt=qe[0],F=qe[1],C=qe[2],e=qe[3],T=qe[4],k=qe[5],a=qe[6],w=qe[7],s=0;s<64;s+=1)t[s]=s<16?ht[s]:Iv(lc(i=t[s-2],17)^lc(i,19)^Qm(i,10),t[s-7],Pv(t[s-15]),t[s-16]),b=Df(w,Dv(T),eg(T,k,a),Vr[s],t[s]),f=Xo(Lv(xt),tg(xt,F,C)),w=a,a=k,k=T,T=Xo(e,b),e=C,C=F,F=xt,xt=Xo(b,f);var i;return qe[0]=Xo(xt,qe[0]),qe[1]=Xo(F,qe[1]),qe[2]=Xo(C,qe[2]),qe[3]=Xo(e,qe[3]),qe[4]=Xo(T,qe[4]),qe[5]=Xo(k,qe[5]),qe[6]=Xo(a,qe[6]),qe[7]=Xo(w,qe[7]),qe}var Fv=class extends Ju{constructor(ht,qe,xt){if(ht!=="SHA-224"&&ht!=="SHA-256")throw new Error(Rf);super(ht,qe,xt);let F=xt||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=$u(this.t,this.i,this.T),this.v=Gm,this.L=function(C){return C.slice()},this.B=Hm,this.F=function(C,e,T,k){return function(a,w,b,f,s){let t,i,r=15+(w+65>>>9<<4),n=w+b;for(;a.length<=r;)a.push(0);for(a[w>>>5]|=128<<24-w%32,a[r]=4294967295&n,a[r-1]=n/Of|0,t=0;t<a.length;t+=16)f=Gm(a.slice(t,t+16),f);return i=s==="SHA-224"?[f[0],f[1],f[2],f[3],f[4],f[5],f[6]]:f,i}(C,e,T,k,ht)},this.U=Hm(ht),this.m=512,this.R=ht==="SHA-224"?224:256,this.K=!1,F.hmacKey&&this.k(Xc("hmacKey",F.hmacKey,this.T))}},nr=class{constructor(qe,xt){this.N=qe,this.I=xt}};function qm(ht,qe){let xt;return qe>32?(xt=64-qe,new nr(ht.I<<qe|ht.N>>>xt,ht.N<<qe|ht.I>>>xt)):qe!==0?(xt=32-qe,new nr(ht.N<<qe|ht.I>>>xt,ht.I<<qe|ht.N>>>xt)):ht}function cc(ht,qe){let xt;return qe<32?(xt=32-qe,new nr(ht.N>>>qe|ht.I<<xt,ht.I>>>qe|ht.N<<xt)):(xt=64-qe,new nr(ht.I>>>qe|ht.N<<xt,ht.N>>>qe|ht.I<<xt))}function rg(ht,qe){return new nr(ht.N>>>qe,ht.I>>>qe|ht.N<<32-qe)}function Bv(ht,qe,xt){return new nr(ht.N&qe.N^ht.N&xt.N^qe.N&xt.N,ht.I&qe.I^ht.I&xt.I^qe.I&xt.I)}function Nv(ht){let qe=cc(ht,28),xt=cc(ht,34),F=cc(ht,39);return new nr(qe.N^xt.N^F.N,qe.I^xt.I^F.I)}function Bl(ht,qe){let xt,F;xt=(65535&ht.I)+(65535&qe.I),F=(ht.I>>>16)+(qe.I>>>16)+(xt>>>16);let C=(65535&F)<<16|65535&xt;return xt=(65535&ht.N)+(65535&qe.N)+(F>>>16),F=(ht.N>>>16)+(qe.N>>>16)+(xt>>>16),new nr((65535&F)<<16|65535&xt,C)}function jv(ht,qe,xt,F){let C,e;C=(65535&ht.I)+(65535&qe.I)+(65535&xt.I)+(65535&F.I),e=(ht.I>>>16)+(qe.I>>>16)+(xt.I>>>16)+(F.I>>>16)+(C>>>16);let T=(65535&e)<<16|65535&C;return C=(65535&ht.N)+(65535&qe.N)+(65535&xt.N)+(65535&F.N)+(e>>>16),e=(ht.N>>>16)+(qe.N>>>16)+(xt.N>>>16)+(F.N>>>16)+(C>>>16),new nr((65535&e)<<16|65535&C,T)}function Uv(ht,qe,xt,F,C){let e,T;e=(65535&ht.I)+(65535&qe.I)+(65535&xt.I)+(65535&F.I)+(65535&C.I),T=(ht.I>>>16)+(qe.I>>>16)+(xt.I>>>16)+(F.I>>>16)+(C.I>>>16)+(e>>>16);let k=(65535&T)<<16|65535&e;return e=(65535&ht.N)+(65535&qe.N)+(65535&xt.N)+(65535&F.N)+(65535&C.N)+(T>>>16),T=(ht.N>>>16)+(qe.N>>>16)+(xt.N>>>16)+(F.N>>>16)+(C.N>>>16)+(e>>>16),new nr((65535&T)<<16|65535&e,k)}function Pf(ht,qe){return new nr(ht.N^qe.N,ht.I^qe.I)}function Vv(ht){let qe=cc(ht,19),xt=cc(ht,61),F=rg(ht,6);return new nr(qe.N^xt.N^F.N,qe.I^xt.I^F.I)}function Hv(ht){let qe=cc(ht,1),xt=cc(ht,8),F=rg(ht,7);return new nr(qe.N^xt.N^F.N,qe.I^xt.I^F.I)}function Gv(ht){let qe=cc(ht,14),xt=cc(ht,18),F=cc(ht,41);return new nr(qe.N^xt.N^F.N,qe.I^xt.I^F.I)}var qv=[new nr(Vr[0],3609767458),new nr(Vr[1],602891725),new nr(Vr[2],3964484399),new nr(Vr[3],2173295548),new nr(Vr[4],4081628472),new nr(Vr[5],3053834265),new nr(Vr[6],2937671579),new nr(Vr[7],3664609560),new nr(Vr[8],2734883394),new nr(Vr[9],1164996542),new nr(Vr[10],1323610764),new nr(Vr[11],3590304994),new nr(Vr[12],4068182383),new nr(Vr[13],991336113),new nr(Vr[14],633803317),new nr(Vr[15],3479774868),new nr(Vr[16],2666613458),new nr(Vr[17],944711139),new nr(Vr[18],2341262773),new nr(Vr[19],2007800933),new nr(Vr[20],1495990901),new nr(Vr[21],1856431235),new nr(Vr[22],3175218132),new nr(Vr[23],2198950837),new nr(Vr[24],3999719339),new nr(Vr[25],766784016),new nr(Vr[26],2566594879),new nr(Vr[27],3203337956),new nr(Vr[28],1034457026),new nr(Vr[29],2466948901),new nr(Vr[30],3758326383),new nr(Vr[31],168717936),new nr(Vr[32],1188179964),new nr(Vr[33],1546045734),new nr(Vr[34],1522805485),new nr(Vr[35],2643833823),new nr(Vr[36],2343527390),new nr(Vr[37],1014477480),new nr(Vr[38],1206759142),new nr(Vr[39],344077627),new nr(Vr[40],1290863460),new nr(Vr[41],3158454273),new nr(Vr[42],3505952657),new nr(Vr[43],106217008),new nr(Vr[44],3606008344),new nr(Vr[45],1432725776),new nr(Vr[46],1467031594),new nr(Vr[47],851169720),new nr(Vr[48],3100823752),new nr(Vr[49],1363258195),new nr(Vr[50],3750685593),new nr(Vr[51],3785050280),new nr(Vr[52],3318307427),new nr(Vr[53],3812723403),new nr(Vr[54],2003034995),new nr(Vr[55],3602036899),new nr(Vr[56],1575990012),new nr(Vr[57],1125592928),new nr(Vr[58],2716904306),new nr(Vr[59],442776044),new nr(Vr[60],593698344),new nr(Vr[61],3733110249),new nr(Vr[62],2999351573),new nr(Vr[63],3815920427),new nr(3391569614,3928383900),new nr(3515267271,566280711),new nr(3940187606,3454069534),new nr(4118630271,4000239992),new nr(116418474,1914138554),new nr(174292421,2731055270),new nr(289380356,3203993006),new nr(460393269,320620315),new nr(685471733,587496836),new nr(852142971,1086792851),new nr(1017036298,365543100),new nr(1126000580,2618297676),new nr(1288033470,3409855158),new nr(1501505948,4234509866),new nr(1607167915,987167468),new nr(1816402316,1246189591)];function Wm(ht){return ht==="SHA-384"?[new nr(3418070365,_c[0]),new nr(1654270250,_c[1]),new nr(2438529370,_c[2]),new nr(355462360,_c[3]),new nr(1731405415,_c[4]),new nr(41048885895,_c[5]),new nr(3675008525,_c[6]),new nr(1203062813,_c[7])]:[new nr(wc[0],4089235720),new nr(wc[1],2227873595),new nr(wc[2],4271175723),new nr(wc[3],1595750129),new nr(wc[4],2917565137),new nr(wc[5],725511199),new nr(wc[6],4215389547),new nr(wc[7],327033209)]}function Ym(ht,qe){let xt,F,C,e,T,k,a,w,b,f,s,t,i=[];for(xt=qe[0],F=qe[1],C=qe[2],e=qe[3],T=qe[4],k=qe[5],a=qe[6],w=qe[7],s=0;s<80;s+=1)s<16?(t=2*s,i[s]=new nr(ht[t],ht[t+1])):i[s]=jv(Vv(i[s-2]),i[s-7],Hv(i[s-15]),i[s-16]),b=Uv(w,Gv(T),(n=k,o=a,new nr((r=T).N&n.N^~r.N&o.N,r.I&n.I^~r.I&o.I)),qv[s],i[s]),f=Bl(Nv(xt),Bv(xt,F,C)),w=a,a=k,k=T,T=Bl(e,b),e=C,C=F,F=xt,xt=Bl(b,f);var r,n,o;return qe[0]=Bl(xt,qe[0]),qe[1]=Bl(F,qe[1]),qe[2]=Bl(C,qe[2]),qe[3]=Bl(e,qe[3]),qe[4]=Bl(T,qe[4]),qe[5]=Bl(k,qe[5]),qe[6]=Bl(a,qe[6]),qe[7]=Bl(w,qe[7]),qe}var Wv=class extends Ju{constructor(ht,qe,xt){if(ht!=="SHA-384"&&ht!=="SHA-512")throw new Error(Rf);super(ht,qe,xt);let F=xt||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=$u(this.t,this.i,this.T),this.v=Ym,this.L=function(C){return C.slice()},this.B=Wm,this.F=function(C,e,T,k){return function(a,w,b,f,s){let t,i,r=31+(w+129>>>10<<5),n=w+b;for(;a.length<=r;)a.push(0);for(a[w>>>5]|=128<<24-w%32,a[r]=4294967295&n,a[r-1]=n/Of|0,t=0;t<a.length;t+=32)f=Ym(a.slice(t,t+32),f);return i=s==="SHA-384"?[f[0].N,f[0].I,f[1].N,f[1].I,f[2].N,f[2].I,f[3].N,f[3].I,f[4].N,f[4].I,f[5].N,f[5].I]:[f[0].N,f[0].I,f[1].N,f[1].I,f[2].N,f[2].I,f[3].N,f[3].I,f[4].N,f[4].I,f[5].N,f[5].I,f[6].N,f[6].I,f[7].N,f[7].I],i}(C,e,T,k,ht)},this.U=Wm(ht),this.m=1024,this.R=ht==="SHA-384"?384:512,this.K=!1,F.hmacKey&&this.k(Xc("hmacKey",F.hmacKey,this.T))}},Yv=[new nr(0,1),new nr(0,32898),new nr(2147483648,32906),new nr(2147483648,2147516416),new nr(0,32907),new nr(0,2147483649),new nr(2147483648,2147516545),new nr(2147483648,32777),new nr(0,138),new nr(0,136),new nr(0,2147516425),new nr(0,2147483658),new nr(0,2147516555),new nr(2147483648,139),new nr(2147483648,32905),new nr(2147483648,32771),new nr(2147483648,32770),new nr(2147483648,128),new nr(0,32778),new nr(2147483648,2147483658),new nr(2147483648,2147516545),new nr(2147483648,32896),new nr(0,2147483649),new nr(2147483648,2147516424)],Xv=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function Jd(ht){let qe,xt=[];for(qe=0;qe<5;qe+=1)xt[qe]=[new nr(0,0),new nr(0,0),new nr(0,0),new nr(0,0),new nr(0,0)];return xt}function Zv(ht){let qe,xt=[];for(qe=0;qe<5;qe+=1)xt[qe]=ht[qe].slice();return xt}function Gh(ht,qe){let xt,F,C,e,T=[],k=[];if(ht!==null)for(F=0;F<ht.length;F+=2)qe[(F>>>1)%5][(F>>>1)/5|0]=Pf(qe[(F>>>1)%5][(F>>>1)/5|0],new nr(ht[F+1],ht[F]));for(xt=0;xt<24;xt+=1){for(e=Jd(),F=0;F<5;F+=1)T[F]=(a=qe[F][0],w=qe[F][1],b=qe[F][2],f=qe[F][3],s=qe[F][4],new nr(a.N^w.N^b.N^f.N^s.N,a.I^w.I^b.I^f.I^s.I));for(F=0;F<5;F+=1)k[F]=Pf(T[(F+4)%5],qm(T[(F+1)%5],1));for(F=0;F<5;F+=1)for(C=0;C<5;C+=1)qe[F][C]=Pf(qe[F][C],k[F]);for(F=0;F<5;F+=1)for(C=0;C<5;C+=1)e[C][(2*F+3*C)%5]=qm(qe[F][C],Xv[F][C]);for(F=0;F<5;F+=1)for(C=0;C<5;C+=1)qe[F][C]=Pf(e[F][C],new nr(~e[(F+1)%5][C].N&e[(F+2)%5][C].N,~e[(F+1)%5][C].I&e[(F+2)%5][C].I));qe[0][0]=Pf(qe[0][0],Yv[xt])}var a,w,b,f,s;return qe}function ig(ht){let qe,xt,F=0,C=[0,0],e=[4294967295&ht,ht/Of&2097151];for(qe=6;qe>=0;qe--)xt=e[qe>>2]>>>8*qe&255,xt===0&&F===0||(C[F+1>>2]|=xt<<8*(F+1),F+=1);return F=F!==0?F:1,C[0]|=F,{value:F+1>4?C:[C[0]],binLen:8+8*F}}function Kd(ht){return qh(ig(ht.binLen),ht)}function Xm(ht,qe){let xt,F=ig(qe);F=qh(F,ht);let C=qe>>>2,e=(C-F.value.length%C)%C;for(xt=0;xt<e;xt++)F.value.push(0);return F.value}var Kv=class extends Ju{constructor(ht,qe,xt){let F=6,C=0;super(ht,qe,xt);let e=xt||{};if(this.numRounds!==1){if(e.kmacKey||e.hmacKey)throw new Error($m);if(this.o==="CSHAKE128"||this.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.T=1,this.C=$u(this.t,this.i,this.T),this.v=Gh,this.L=Zv,this.B=Jd,this.U=Jd(),this.K=!1,ht){case"SHA3-224":this.m=C=1152,this.R=224,this.M=!0,this.g=this.Y;break;case"SHA3-256":this.m=C=1088,this.R=256,this.M=!0,this.g=this.Y;break;case"SHA3-384":this.m=C=832,this.R=384,this.M=!0,this.g=this.Y;break;case"SHA3-512":this.m=C=576,this.R=512,this.M=!0,this.g=this.Y;break;case"SHAKE128":F=31,this.m=C=1344,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"SHAKE256":F=31,this.m=C=1088,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"KMAC128":F=4,this.m=C=1344,this.X(xt),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"KMAC256":F=4,this.m=C=1088,this.X(xt),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"CSHAKE128":this.m=C=1344,F=this.O(xt),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"CSHAKE256":this.m=C=1088,F=this.O(xt),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;default:throw new Error(Rf)}this.F=function(T,k,a,w,b){return function(f,s,t,i,r,n,o){let l,c,d=0,u=[],x=r>>>5,p=s>>>5;for(l=0;l<p&&s>=r;l+=x)i=Gh(f.slice(l,l+x),i),s-=r;for(f=f.slice(l),s%=r;f.length<x;)f.push(0);for(l=s>>>3,f[l>>2]^=n<<l%4*8,f[x-1]^=2147483648,i=Gh(f,i);32*u.length<o&&(c=i[d%5][d/5|0],u.push(c.I),!(32*u.length>=o));)u.push(c.N),d+=1,64*d%r==0&&(Gh(null,i),d=0);return u}(T,k,0,w,C,F,b)},e.hmacKey&&this.k(Xc("hmacKey",e.hmacKey,this.T))}O(ht,qe){let xt=function(C){let e=C||{};return{funcName:Xc("funcName",e.funcName,1,{value:[],binLen:0}),customization:Xc("Customization",e.customization,1,{value:[],binLen:0})}}(ht||{});qe&&(xt.funcName=qe);let F=qh(Kd(xt.funcName),Kd(xt.customization));if(xt.customization.binLen!==0||xt.funcName.binLen!==0){let C=Xm(F,this.m>>>3);for(let e=0;e<C.length;e+=this.m>>>5)this.U=this.v(C.slice(e,e+(this.m>>>5)),this.U),this.A+=this.m;return 4}return 31}X(ht){let qe=function(F){let C=F||{};return{kmacKey:Xc("kmacKey",C.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:Xc("Customization",C.customization,1,{value:[],binLen:0})}}(ht||{});this.O(ht,qe.funcName);let xt=Xm(Kd(qe.kmacKey),this.m>>>3);for(let F=0;F<xt.length;F+=this.m>>>5)this.U=this.v(xt.slice(F,F+(this.m>>>5)),this.U),this.A+=this.m;this.H=!0}_(ht){let qe=qh({value:this.h.slice(),binLen:this.u},function(xt){let F,C,e=0,T=[0,0],k=[4294967295&xt,xt/Of&2097151];for(F=6;F>=0;F--)C=k[F>>2]>>>8*F&255,C===0&&e===0||(T[e>>2]|=C<<8*e,e+=1);return e=e!==0?e:1,T[e>>2]|=e<<8*e,{value:e+1>4?T:[T[0]],binLen:8+8*e}}(ht.outputLen));return this.F(qe.value,qe.binLen,this.A,this.L(this.U),ht.outputLen)}},Wh=class{constructor(qe,xt,F){if(qe=="SHA-1")this.P=new zv(qe,xt,F);else if(qe=="SHA-224"||qe=="SHA-256")this.P=new Fv(qe,xt,F);else if(qe=="SHA-384"||qe=="SHA-512")this.P=new Wv(qe,xt,F);else{if(qe!="SHA3-224"&&qe!="SHA3-256"&&qe!="SHA3-384"&&qe!="SHA3-512"&&qe!="SHAKE128"&&qe!="SHAKE256"&&qe!="CSHAKE128"&&qe!="CSHAKE256"&&qe!="KMAC128"&&qe!="KMAC256")throw new Error(Rf);this.P=new Kv(qe,xt,F)}}update(qe){return this.P.update(qe),this}getHash(qe,xt){return this.P.getHash(qe,xt)}setHMACKey(qe,xt,F){this.P.setHMACKey(qe,xt,F)}getHMAC(qe,xt){return this.P.getHMAC(qe,xt)}};function Jv(ht,qe){ht&1&&Wi(0,"div",2)}var $v=new hl("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Yh=(()=>{let qe=class qe{constructor(F,C,e,T,k){this._elementRef=F,this._ngZone=C,this._changeDetectorRef=e,this._animationMode=T,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new qr,this._mode="determinate",this._transitionendHandler=a=>{this.animationEnd.observers.length===0||!a.target||!a.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=T==="NoopAnimations",k&&(k.color&&(this.color=this._defaultColor=k.color),this.mode=k.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(F){this._color=F}get value(){return this._value}set value(F){this._value=ag(F||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(F){this._bufferValue=ag(F||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(F){this._mode=F,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}};qe.\u0275fac=function(C){return new(C||qe)(hr(yo),hr($l),hr(bc),hr(Hu,8),hr($v,8))},qe.\u0275cmp=Ri({type:qe,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(C,e){C&2&&(Nc("aria-valuenow",e._isIndeterminate()?null:e.value)("mode",e.mode),Gu("mat-"+e.color),Yo("_mat-animation-noopable",e._isNoopAnimation)("mdc-linear-progress--animation-ready",!e._isNoopAnimation)("mdc-linear-progress--indeterminate",e._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",gu],bufferValue:[2,"bufferValue","bufferValue",gu],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[Wo,Yi],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(C,e){C&1&&(Nn(0,"div",0),Wi(1,"div",1),fi(2,Jv,1,0,"div",2),Gn(),Nn(3,"div",3),Wi(4,"span",4),Gn(),Nn(5,"div",5),Wi(6,"span",4),Gn()),C&2&&(_r(),hu("flex-basis",e._getBufferBarFlexBasis()),_r(),hi(e.mode==="buffer"?2:-1),_r(),hu("transform",e._getPrimaryBarTransform()))},styles:[`@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half))}100%{transform:translateX(var(--mdc-linear-progress-primary-full))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color)}.mdc-linear-progress__buffer-dots{background-color:var(--mdc-linear-progress-track-color)}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-color:rgba(0,0,0,0);background-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='rgba(244, 67, 54, 0.25)'/%3E%3C/svg%3E")}}.mdc-linear-progress__buffer-bar{background-color:var(--mdc-linear-progress-track-color)}.mdc-linear-progress{height:max(var(--mdc-linear-progress-track-height), var(--mdc-linear-progress-active-indicator-height))}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress{height:4px}}.mdc-linear-progress__bar{height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{height:var(--mdc-linear-progress-track-height)}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height)}}.mdc-linear-progress__buffer{border-radius:var(--mdc-linear-progress-track-shape)}.mat-mdc-progress-bar{display:block;text-align:start;--mdc-linear-progress-primary-half: 83.67142%;--mdc-linear-progress-primary-full: 200.611057%;--mdc-linear-progress-secondary-quarter: 37.651913%;--mdc-linear-progress-secondary-half: 84.386165%;--mdc-linear-progress-secondary-full: 160.277782%;--mdc-linear-progress-primary-half-neg: -83.67142%;--mdc-linear-progress-primary-full-neg: -200.611057%;--mdc-linear-progress-secondary-quarter-neg: -37.651913%;--mdc-linear-progress-secondary-half-neg: -84.386165%;--mdc-linear-progress-secondary-full-neg: -160.277782%}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}`],encapsulation:2,changeDetection:0});let ht=qe;return ht})();function ag(ht,qe=0,xt=100){return Math.max(qe,Math.min(xt,ht))}var Qv=(ht,qe)=>qe.name;function ey(ht,qe){if(ht&1&&Wi(0,"mat-progress-bar",3),ht&2){let xt=qe.$implicit,F=Br();Nr("value",F.fileProgressMap[xt.name].progress/F.fileProgressMap[xt.name].total*100)("mode","determinate")}}var og=(()=>{let qe=class qe{constructor(F){this.web=F,this.fileProgressMap={},this.fileList=[],this.fileType="",this.fileCategory="",this.analysisGroupId=0,this.fileUploaded=new qr,this.allowFileType=["csv","tsv","txt"]}uploadData(F){return Uu(this,null,function*(){let C=F.target.files;if(C){this.fileList=[];for(let e=0;e<C.length;e++)this.fileList.push(C[e]),this.fileProgressMap[C[e].name]={progress:0,total:C[e].size};for(let e=0;e<C.length;e++)yield this.uploadFile(C[e])}})}getFileExntension(F){let C=F.name.split(".");return C.length>1?C[C.length-1]:""}uploadFile(F){return Uu(this,null,function*(){let e=F.size,T=new Wh("SHA-256","ARRAYBUFFER");if(this.fileType=this.getFileExntension(F),this.allowFileType.indexOf(this.fileType)!==-1)if(1048576>e){let k=yield F.arrayBuffer();T.update(k);let a=T.getHash("HEX"),w=yield this.web.uploadDataChunkComplete("",a,F,F.name).toPromise();this.fileProgressMap[F.name].progress=e,w?.completed_at&&this.web.bindUploadedFile(this.analysisGroupId,this.fileType,this.fileCategory,F.name,w?.id).subscribe(b=>{this.fileUploaded.emit(b)})}else{let k="",a=0;for(;e>a;){let w=a+1048576;w>=e&&(w=e);let b=yield F.slice(a,w).arrayBuffer();T.update(b);let f=new File([b],F.name,{type:F.type});console.log(f.size);let s=`bytes ${a}-${w-1}/${e}`;console.log(s);let t=yield this.web.uploadDataChunk(k,f,F.name,s).toPromise();t&&(k=t.url,a=t.offset,this.fileProgressMap[F.name].progress=a)}if(k!==""){let w=T.getHash("HEX"),b=yield this.web.uploadDataChunkComplete(k,w).toPromise();b?.completed_at&&this.web.bindUploadedFile(this.analysisGroupId,this.fileType,this.fileCategory,F.name,b?.id).subscribe(f=>{this.fileProgressMap[F.name].progress=e,this.fileUploaded.emit(f)})}}})}};qe.\u0275fac=function(C){return new(C||qe)(hr(yl))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-upload-file"]],inputs:{fileType:"fileType",fileCategory:"fileCategory",analysisGroupId:"analysisGroupId"},outputs:{fileUploaded:"fileUploaded"},standalone:!0,features:[Yi],decls:8,vars:0,consts:[["file",""],["mat-icon-button","","type","button",3,"click"],["type","file","hidden","",3,"change"],[3,"value","mode"]],template:function(C,e){if(C&1){let T=ya();Nn(0,"form")(1,"button",1),Jr("click",function(){ri(T);let a=mu(5);return ii(a.click())}),Nn(2,"mat-icon"),yr(3,"upload"),Gn()(),Nn(4,"input",2,0),Jr("change",function(a){return ri(T),ii(e.uploadData(a))}),Gn()(),ta(6,ey,1,2,"mat-progress-bar",3,Qv)}C&2&&(_r(6),na(e.fileList))},dependencies:[Yu,Wu,Yh,vl,ml,pl]});let ht=qe;return ht})();var ay=[[["caption"]],[["colgroup"],["col"]],"*"],oy=["caption","colgroup, col","*"];function sy(ht,qe){ht&1&&Ps(0,2)}function ly(ht,qe){ht&1&&(Nn(0,"thead",0),Is(1,1),Gn(),Nn(2,"tbody",0),Is(3,2)(4,3),Gn(),Nn(5,"tfoot",0),Is(6,4),Gn())}function cy(ht,qe){ht&1&&Is(0,1)(1,2)(2,3)(3,4)}var Nl=new hl("CDK_TABLE");var Qh=(()=>{let qe=class qe{constructor(F){this.template=F}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkCellDef",""]],standalone:!0});let ht=qe;return ht})(),ed=(()=>{let qe=class qe{constructor(F){this.template=F}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkHeaderCellDef",""]],standalone:!0});let ht=qe;return ht})(),cg=(()=>{let qe=class qe{constructor(F){this.template=F}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkFooterCellDef",""]],standalone:!0});let ht=qe;return ht})(),Qu=(()=>{let qe=class qe{get name(){return this._name}set name(F){this._setNameInput(F)}get sticky(){return this._sticky}set sticky(F){F!==this._sticky&&(this._sticky=F,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(F){F!==this._stickyEnd&&(this._stickyEnd=F,this._hasStickyChanged=!0)}constructor(F){this._table=F,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){let F=this._hasStickyChanged;return this.resetStickyChanged(),F}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(F){F&&(this._name=F,this.cssClassFriendlyName=F.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}};qe.\u0275fac=function(C){return new(C||qe)(hr(Nl,8))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkColumnDef",""]],contentQueries:function(C,e,T){if(C&1&&(Ds(T,Qh,5),Ds(T,ed,5),Ds(T,cg,5)),C&2){let k;ca(k=ua())&&(e.cell=k.first),ca(k=ua())&&(e.headerCell=k.first),ca(k=ua())&&(e.footerCell=k.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",Ya],stickyEnd:[2,"stickyEnd","stickyEnd",Ya]},standalone:!0,features:[oo([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:qe}]),Wo]});let ht=qe;return ht})(),Zh=class{constructor(qe,xt){xt.nativeElement.classList.add(...qe._columnCssClassName)}},ug=(()=>{let qe=class qe extends Zh{constructor(F,C){super(F,C)}};qe.\u0275fac=function(C){return new(C||qe)(hr(Qu),hr(yo))},qe.\u0275dir=Ni({type:qe,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[Fa]});let ht=qe;return ht})();var fg=(()=>{let qe=class qe extends Zh{constructor(F,C){super(F,C);let e=F._table?._getCellRole();e&&C.nativeElement.setAttribute("role",e)}};qe.\u0275fac=function(C){return new(C||qe)(hr(Qu),hr(yo))},qe.\u0275dir=Ni({type:qe,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[Fa]});let ht=qe;return ht})(),Kh=class{constructor(){this.tasks=[],this.endTasks=[]}},Jh=new hl("_COALESCED_STYLE_SCHEDULER"),Qd=(()=>{let qe=class qe{constructor(F){this._currentSchedule=null,this._ngZone=Xs($l)}schedule(F){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(F)}scheduleEnd(F){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(F)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Kh,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let F=this._currentSchedule;this._currentSchedule=new Kh;for(let C of F.tasks)C();for(let C of F.endTasks)C()}this._currentSchedule=null})))}};qe.\u0275fac=function(C){return new(C||qe)(Ch($l))},qe.\u0275prov=Ef({token:qe,factory:qe.\u0275fac});let ht=qe;return ht})();var ep=(()=>{let qe=class qe{constructor(F,C){this.template=F,this._differs=C}ngOnChanges(F){if(!this._columnsDiffer){let C=F.columns&&F.columns.currentValue||[];this._columnsDiffer=this._differs.find(C).create(),this._columnsDiffer.diff(C)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(F){return this instanceof Bf?F.headerCell.template:this instanceof tp?F.footerCell.template:F.cell.template}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs),hr(jc))},qe.\u0275dir=Ni({type:qe,features:[Bc]});let ht=qe;return ht})(),Bf=(()=>{let qe=class qe extends ep{get sticky(){return this._sticky}set sticky(F){F!==this._sticky&&(this._sticky=F,this._hasStickyChanged=!0)}constructor(F,C,e){super(F,C),this._table=e,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(F){super.ngOnChanges(F)}hasStickyChanged(){let F=this._hasStickyChanged;return this.resetStickyChanged(),F}resetStickyChanged(){this._hasStickyChanged=!1}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs),hr(jc),hr(Nl,8))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",Ya]},standalone:!0,features:[Wo,Fa,Bc]});let ht=qe;return ht})(),tp=(()=>{let qe=class qe extends ep{get sticky(){return this._sticky}set sticky(F){F!==this._sticky&&(this._sticky=F,this._hasStickyChanged=!0)}constructor(F,C,e){super(F,C),this._table=e,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(F){super.ngOnChanges(F)}hasStickyChanged(){let F=this._hasStickyChanged;return this.resetStickyChanged(),F}resetStickyChanged(){this._hasStickyChanged=!1}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs),hr(jc),hr(Nl,8))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",Ya]},standalone:!0,features:[Wo,Fa,Bc]});let ht=qe;return ht})(),td=(()=>{let qe=class qe extends ep{constructor(F,C,e){super(F,C),this._table=e}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs),hr(jc),hr(Nl,8))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},standalone:!0,features:[Fa]});let ht=qe;return ht})(),yu=(()=>{let qe=class qe{constructor(F){this._viewContainer=F,qe.mostRecentCellOutlet=this}ngOnDestroy(){qe.mostRecentCellOutlet===this&&(qe.mostRecentCellOutlet=null)}};qe.mostRecentCellOutlet=null,qe.\u0275fac=function(C){return new(C||qe)(hr(Ql))},qe.\u0275dir=Ni({type:qe,selectors:[["","cdkCellOutlet",""]],standalone:!0});let ht=qe;return ht})(),np=(()=>{let qe=class qe{};qe.\u0275fac=function(C){return new(C||qe)},qe.\u0275cmp=Ri({type:qe,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[Yi],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(C,e){C&1&&Is(0,0)},dependencies:[yu],encapsulation:2});let ht=qe;return ht})();var rp=(()=>{let qe=class qe{};qe.\u0275fac=function(C){return new(C||qe)},qe.\u0275cmp=Ri({type:qe,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[Yi],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(C,e){C&1&&Is(0,0)},dependencies:[yu],encapsulation:2});let ht=qe;return ht})(),hg=(()=>{let qe=class qe{constructor(F){this.templateRef=F,this._contentClassName="cdk-no-data-row"}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs))},qe.\u0275dir=Ni({type:qe,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0});let ht=qe;return ht})(),sg=["top","bottom","left","right"],$d=class{constructor(qe,xt,F,C,e=!0,T=!0,k){this._isNativeHtmlTable=qe,this._stickCellCss=xt,this.direction=F,this._coalescedStyleScheduler=C,this._isBrowser=e,this._needsPositionStickyOnElement=T,this._positionListener=k,this._cachedCellWidths=[],this._borderCellCss={top:`${xt}-border-elem-top`,bottom:`${xt}-border-elem-bottom`,left:`${xt}-border-elem-left`,right:`${xt}-border-elem-right`}}clearStickyPositioning(qe,xt){let F=[];for(let C of qe)if(C.nodeType===C.ELEMENT_NODE){F.push(C);for(let e=0;e<C.children.length;e++)F.push(C.children[e])}this._coalescedStyleScheduler.schedule(()=>{for(let C of F)this._removeStickyStyle(C,xt)})}updateStickyColumns(qe,xt,F,C=!0){if(!qe.length||!this._isBrowser||!(xt.some(e=>e)||F.some(e=>e))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let e=qe[0],T=e.children.length,k=this._getCellWidths(e,C),a=this._getStickyStartColumnPositions(k,xt),w=this._getStickyEndColumnPositions(k,F),b=xt.lastIndexOf(!0),f=F.indexOf(!0),s=this.direction==="rtl",t=s?"right":"left",i=s?"left":"right";for(let r of qe)for(let n=0;n<T;n++){let o=r.children[n];xt[n]&&this._addStickyStyle(o,t,a[n],n===b),F[n]&&this._addStickyStyle(o,i,w[n],n===f)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:b===-1?[]:k.slice(0,b+1).map((r,n)=>xt[n]?r:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:f===-1?[]:k.slice(f).map((r,n)=>F[n+f]?r:null).reverse()}))})}stickRows(qe,xt,F){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let C=F==="bottom"?qe.slice().reverse():qe,e=F==="bottom"?xt.slice().reverse():xt,T=[],k=[],a=[];for(let b=0,f=0;b<C.length;b++){if(!e[b])continue;T[b]=f;let s=C[b];a[b]=this._isNativeHtmlTable?Array.from(s.children):[s];let t=s.getBoundingClientRect().height;f+=t,k[b]=t}let w=e.lastIndexOf(!0);for(let b=0;b<C.length;b++){if(!e[b])continue;let f=T[b],s=b===w;for(let t of a[b])this._addStickyStyle(t,F,f,s)}F==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:k,offsets:T,elements:a}):this._positionListener?.stickyFooterRowsUpdated({sizes:k,offsets:T,elements:a})})}updateStickyFooterContainer(qe,xt){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let F=qe.querySelector("tfoot");F&&(xt.some(C=>!C)?this._removeStickyStyle(F,["bottom"]):this._addStickyStyle(F,"bottom",0,!1))})}_removeStickyStyle(qe,xt){for(let C of xt)qe.style[C]="",qe.classList.remove(this._borderCellCss[C]);sg.some(C=>xt.indexOf(C)===-1&&qe.style[C])?qe.style.zIndex=this._getCalculatedZIndex(qe):(qe.style.zIndex="",this._needsPositionStickyOnElement&&(qe.style.position=""),qe.classList.remove(this._stickCellCss))}_addStickyStyle(qe,xt,F,C){qe.classList.add(this._stickCellCss),C&&qe.classList.add(this._borderCellCss[xt]),qe.style[xt]=`${F}px`,qe.style.zIndex=this._getCalculatedZIndex(qe),this._needsPositionStickyOnElement&&(qe.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(qe){let xt={top:100,bottom:10,left:1,right:1},F=0;for(let C of sg)qe.style[C]&&(F+=xt[C]);return F?`${F}`:""}_getCellWidths(qe,xt=!0){if(!xt&&this._cachedCellWidths.length)return this._cachedCellWidths;let F=[],C=qe.children;for(let e=0;e<C.length;e++){let T=C[e];F.push(T.getBoundingClientRect().width)}return this._cachedCellWidths=F,F}_getStickyStartColumnPositions(qe,xt){let F=[],C=0;for(let e=0;e<qe.length;e++)xt[e]&&(F[e]=C,C+=qe[e]);return F}_getStickyEndColumnPositions(qe,xt){let F=[],C=0;for(let e=qe.length;e>0;e--)xt[e]&&(F[e]=C,C+=qe[e]);return F}};var $h=new hl("CDK_SPL");var ip=(()=>{let qe=class qe{constructor(F,C){this.viewContainer=F,this.elementRef=C;let e=Xs(Nl);e._rowOutlet=this,e._outletAssigned()}};qe.\u0275fac=function(C){return new(C||qe)(hr(Ql),hr(yo))},qe.\u0275dir=Ni({type:qe,selectors:[["","rowOutlet",""]],standalone:!0});let ht=qe;return ht})(),ap=(()=>{let qe=class qe{constructor(F,C){this.viewContainer=F,this.elementRef=C;let e=Xs(Nl);e._headerRowOutlet=this,e._outletAssigned()}};qe.\u0275fac=function(C){return new(C||qe)(hr(Ql),hr(yo))},qe.\u0275dir=Ni({type:qe,selectors:[["","headerRowOutlet",""]],standalone:!0});let ht=qe;return ht})(),op=(()=>{let qe=class qe{constructor(F,C){this.viewContainer=F,this.elementRef=C;let e=Xs(Nl);e._footerRowOutlet=this,e._outletAssigned()}};qe.\u0275fac=function(C){return new(C||qe)(hr(Ql),hr(yo))},qe.\u0275dir=Ni({type:qe,selectors:[["","footerRowOutlet",""]],standalone:!0});let ht=qe;return ht})(),sp=(()=>{let qe=class qe{constructor(F,C){this.viewContainer=F,this.elementRef=C;let e=Xs(Nl);e._noDataRowOutlet=this,e._outletAssigned()}};qe.\u0275fac=function(C){return new(C||qe)(hr(Ql),hr(yo))},qe.\u0275dir=Ni({type:qe,selectors:[["","noDataRowOutlet",""]],standalone:!0});let ht=qe;return ht})();var lp=(()=>{let qe=class qe{_getCellRole(){if(this._cellRoleInternal===void 0){let F=this._elementRef.nativeElement.getAttribute("role"),C=F==="grid"||F==="treegrid"?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&C==="cell"?null:C}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(F){this._trackByFn=F}get dataSource(){return this._dataSource}set dataSource(F){this._dataSource!==F&&this._switchDataSource(F)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(F){this._multiTemplateDataRows=F,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(F){this._fixedLayout=F,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(F,C,e,T,k,a,w,b,f,s,t,i){this._differs=F,this._changeDetectorRef=C,this._elementRef=e,this._dir=k,this._platform=w,this._viewRepeater=b,this._coalescedStyleScheduler=f,this._viewportRuler=s,this._stickyPositioningListener=t,this._onDestroy=new fu,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new qr,this.viewChange=new Wd({start:0,end:Number.MAX_VALUE}),this._injector=Xs(Eh),T||e.nativeElement.setAttribute("role","table"),this._document=a,this._isServer=!w.isBrowser,this._isNativeHtmlTable=e.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((F,C)=>this.trackBy?this.trackBy(C.dataIndex,C.data):C),this._viewportRuler.change().pipe(fl(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(F=>{F?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Dh(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let F=this._dataDiffer.diff(this._renderRows);if(!F){this._updateNoDataRow(),this.contentChanged.next();return}let C=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(F,C,(e,T,k)=>this._getEmbeddedViewArgs(e.item,k),e=>e.item.data,e=>{e.operation===bm.INSERTED&&e.context&&this._renderCellTemplateForItem(e.record.item.rowDef,e.context)}),this._updateRowIndexContext(),F.forEachIdentityChange(e=>{let T=C.get(e.currentIndex);T.context.$implicit=e.item.data}),this._updateNoDataRow(),Lh(()=>{this.updateStickyColumnStyles()},{injector:this._injector}),this.contentChanged.next()}addColumnDef(F){this._customColumnDefs.add(F)}removeColumnDef(F){this._customColumnDefs.delete(F)}addRowDef(F){this._customRowDefs.add(F)}removeRowDef(F){this._customRowDefs.delete(F)}addHeaderRowDef(F){this._customHeaderRowDefs.add(F),this._headerRowDefChanged=!0}removeHeaderRowDef(F){this._customHeaderRowDefs.delete(F),this._headerRowDefChanged=!0}addFooterRowDef(F){this._customFooterRowDefs.add(F),this._footerRowDefChanged=!0}removeFooterRowDef(F){this._customFooterRowDefs.delete(F),this._footerRowDefChanged=!0}setNoDataRow(F){this._customNoDataRow=F}updateStickyHeaderRowStyles(){let F=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let e=lg(this._headerRowOutlet,"thead");e&&(e.style.display=F.length?"":"none")}let C=this._headerRowDefs.map(e=>e.sticky);this._stickyStyler.clearStickyPositioning(F,["top"]),this._stickyStyler.stickRows(F,C,"top"),this._headerRowDefs.forEach(e=>e.resetStickyChanged())}updateStickyFooterRowStyles(){let F=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let e=lg(this._footerRowOutlet,"tfoot");e&&(e.style.display=F.length?"":"none")}let C=this._footerRowDefs.map(e=>e.sticky);this._stickyStyler.clearStickyPositioning(F,["bottom"]),this._stickyStyler.stickRows(F,C,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,C),this._footerRowDefs.forEach(e=>e.resetStickyChanged())}updateStickyColumnStyles(){let F=this._getRenderedRows(this._headerRowOutlet),C=this._getRenderedRows(this._rowOutlet),e=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...F,...C,...e],["left","right"]),this._stickyColumnStylesNeedReset=!1),F.forEach((T,k)=>{this._addStickyColumnStyles([T],this._headerRowDefs[k])}),this._rowDefs.forEach(T=>{let k=[];for(let a=0;a<C.length;a++)this._renderRows[a].rowDef===T&&k.push(C[a]);this._addStickyColumnStyles(k,T)}),e.forEach((T,k)=>{this._addStickyColumnStyles([T],this._footerRowDefs[k])}),Array.from(this._columnDefsByName.values()).forEach(T=>T.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let C=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||C,this._forceRecalculateCellWidths=C,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let F=[],C=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let e=0;e<this._data.length;e++){let T=this._data[e],k=this._getRenderRowsForData(T,e,C.get(T));this._cachedRenderRowsMap.has(T)||this._cachedRenderRowsMap.set(T,new WeakMap);for(let a=0;a<k.length;a++){let w=k[a],b=this._cachedRenderRowsMap.get(w.data);b.has(w.rowDef)?b.get(w.rowDef).push(w):b.set(w.rowDef,[w]),F.push(w)}}return F}_getRenderRowsForData(F,C,e){return this._getRowDefs(F,C).map(k=>{let a=e&&e.has(k)?e.get(k):[];if(a.length){let w=a.shift();return w.dataIndex=C,w}else return{data:F,rowDef:k,dataIndex:C}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Xh(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(C=>{this._columnDefsByName.has(C.name),this._columnDefsByName.set(C.name,C)})}_cacheRowDefs(){this._headerRowDefs=Xh(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Xh(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Xh(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let F=this._rowDefs.filter(C=>!C.when);!this.multiTemplateDataRows&&F.length>1,this._defaultRowDef=F[0]}_renderUpdatedColumns(){let F=(k,a)=>k||!!a.getColumnsDiff(),C=this._rowDefs.reduce(F,!1);C&&this._forceRenderDataRows();let e=this._headerRowDefs.reduce(F,!1);e&&this._forceRenderHeaderRows();let T=this._footerRowDefs.reduce(F,!1);return T&&this._forceRenderFooterRows(),C||e||T}_switchDataSource(F){this._data=[],Dh(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),F||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=F}_observeRenderChanges(){if(!this.dataSource)return;let F;Dh(this.dataSource)?F=this.dataSource.connect(this):J0(this.dataSource)?F=this.dataSource:Array.isArray(this.dataSource)&&(F=Cf(this.dataSource)),this._renderChangeSubscription=F.pipe(fl(this._onDestroy)).subscribe(C=>{this._data=C||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((F,C)=>this._renderRow(this._headerRowOutlet,F,C)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((F,C)=>this._renderRow(this._footerRowOutlet,F,C)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(F,C){let e=Array.from(C.columns||[]).map(a=>{let w=this._columnDefsByName.get(a);return w}),T=e.map(a=>a.sticky),k=e.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(F,T,k,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(F){let C=[];for(let e=0;e<F.viewContainer.length;e++){let T=F.viewContainer.get(e);C.push(T.rootNodes[0])}return C}_getRowDefs(F,C){if(this._rowDefs.length==1)return[this._rowDefs[0]];let e=[];if(this.multiTemplateDataRows)e=this._rowDefs.filter(T=>!T.when||T.when(C,F));else{let T=this._rowDefs.find(k=>k.when&&k.when(C,F))||this._defaultRowDef;T&&e.push(T)}return e.length,e}_getEmbeddedViewArgs(F,C){let e=F.rowDef,T={$implicit:F.data};return{templateRef:e.template,context:T,index:C}}_renderRow(F,C,e,T={}){let k=F.viewContainer.createEmbeddedView(C.template,T,e);return this._renderCellTemplateForItem(C,T),k}_renderCellTemplateForItem(F,C){for(let e of this._getCellTemplates(F))yu.mostRecentCellOutlet&&yu.mostRecentCellOutlet._viewContainer.createEmbeddedView(e,C);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let F=this._rowOutlet.viewContainer;for(let C=0,e=F.length;C<e;C++){let k=F.get(C).context;k.count=e,k.first=C===0,k.last=C===e-1,k.even=C%2===0,k.odd=!k.even,this.multiTemplateDataRows?(k.dataIndex=this._renderRows[C].dataIndex,k.renderIndex=C):k.index=this._renderRows[C].dataIndex}}_getCellTemplates(F){return!F||!F.columns?[]:Array.from(F.columns,C=>{let e=this._columnDefsByName.get(C);return F.extractCellTemplate(e)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let F=(C,e)=>C||e.hasStickyChanged();this._headerRowDefs.reduce(F,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(F,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(F,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let F=this._dir?this._dir.value:"ltr";this._stickyStyler=new $d(this._isNativeHtmlTable,this.stickyCssClass,F,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Cf()).pipe(fl(this._onDestroy)).subscribe(C=>{this._stickyStyler.direction=C,this.updateStickyColumnStyles()})}_getOwnDefs(F){return F.filter(C=>!C._table||C._table===this)}_updateNoDataRow(){let F=this._customNoDataRow||this._noDataRow;if(!F)return;let C=this._rowOutlet.viewContainer.length===0;if(C===this._isShowingNoDataRow)return;let e=this._noDataRowOutlet.viewContainer;if(C){let T=e.createEmbeddedView(F.templateRef),k=T.rootNodes[0];T.rootNodes.length===1&&k?.nodeType===this._document.ELEMENT_NODE&&(k.setAttribute("role","row"),k.classList.add(F._contentClassName))}else e.clear();this._isShowingNoDataRow=C,this._changeDetectorRef.markForCheck()}};qe.\u0275fac=function(C){return new(C||qe)(hr(jc),hr(bc),hr(yo),Yd("role"),hr(qu,8),hr(Ih),hr(vu),hr(Lf),hr(Jh),hr(If),hr($h,12),hr($l,8))},qe.\u0275cmp=Ri({type:qe,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(C,e,T){if(C&1&&(Ds(T,hg,5),Ds(T,Qu,5),Ds(T,td,5),Ds(T,Bf,5),Ds(T,tp,5)),C&2){let k;ca(k=ua())&&(e._noDataRow=k.first),ca(k=ua())&&(e._contentColumnDefs=k),ca(k=ua())&&(e._contentRowDefs=k),ca(k=ua())&&(e._contentHeaderRowDefs=k),ca(k=ua())&&(e._contentFooterRowDefs=k)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(C,e){C&2&&Yo("cdk-table-fixed-layout",e.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",Ya],fixedLayout:[2,"fixedLayout","fixedLayout",Ya]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[oo([{provide:Nl,useExisting:qe},{provide:Lf,useClass:Oh},{provide:Jh,useClass:Qd},{provide:$h,useValue:null}]),Wo,Yi],ngContentSelectors:oy,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(C,e){C&1&&(ec(ay),Ps(0),Ps(1,1),fi(2,sy,1,0)(3,ly,7,0)(4,cy,4,0)),C&2&&(_r(2),hi(e._isServer?2:-1),_r(),hi(e._isNativeHtmlTable?3:4))},dependencies:[ap,ip,sp,op],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2});let ht=qe;return ht})();function Xh(ht,qe){return ht.concat(Array.from(qe))}function lg(ht,qe){let xt=qe.toUpperCase(),F=ht.viewContainer.element.nativeElement;for(;F;){let C=F.nodeType===1?F.nodeName:null;if(C===xt)return F;if(C==="TABLE")break;F=F.parentNode}return null}var uy=[[["caption"]],[["colgroup"],["col"]],"*"],fy=["caption","colgroup, col","*"];function hy(ht,qe){ht&1&&Ps(0,2)}function dy(ht,qe){ht&1&&(Nn(0,"thead",0),Is(1,1),Gn(),Nn(2,"tbody",2),Is(3,3)(4,4),Gn(),Nn(5,"tfoot",0),Is(6,5),Gn())}function py(ht,qe){ht&1&&Is(0,1)(1,3)(2,4)(3,5)}var dg=(()=>{let qe=class qe extends lp{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275cmp=Ri({type:qe,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(C,e){C&2&&Yo("mdc-table-fixed-layout",e.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[oo([{provide:lp,useExisting:qe},{provide:Nl,useExisting:qe},{provide:Jh,useClass:Qd},{provide:Lf,useClass:Oh},{provide:$h,useValue:null}]),Fa,Yi],ngContentSelectors:fy,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(C,e){C&1&&(ec(uy),Ps(0),Ps(1,1),fi(2,hy,1,0)(3,dy,7,0)(4,py,4,0)),C&2&&(_r(2),hi(e._isServer?2:-1),_r(),hi(e._isNativeHtmlTable?3:4))},dependencies:[ap,ip,sp,op],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2});let ht=qe;return ht})(),pg=(()=>{let qe=class qe extends Qh{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275dir=Ni({type:qe,selectors:[["","matCellDef",""]],standalone:!0,features:[oo([{provide:Qh,useExisting:qe}]),Fa]});let ht=qe;return ht})(),mg=(()=>{let qe=class qe extends ed{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275dir=Ni({type:qe,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[oo([{provide:ed,useExisting:qe}]),Fa]});let ht=qe;return ht})();var gg=(()=>{let qe=class qe extends Qu{get name(){return this._name}set name(F){this._setNameInput(F)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275dir=Ni({type:qe,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},standalone:!0,features:[oo([{provide:Qu,useExisting:qe},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:qe}]),Fa]});let ht=qe;return ht})(),vg=(()=>{let qe=class qe extends ug{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275dir=Ni({type:qe,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[Fa]});let ht=qe;return ht})();var yg=(()=>{let qe=class qe extends fg{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275dir=Ni({type:qe,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[Fa]});let ht=qe;return ht})();var xg=(()=>{let qe=class qe extends Bf{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275dir=Ni({type:qe,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",Ya]},standalone:!0,features:[oo([{provide:Bf,useExisting:qe}]),Wo,Fa]});let ht=qe;return ht})();var bg=(()=>{let qe=class qe extends td{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275dir=Ni({type:qe,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},standalone:!0,features:[oo([{provide:td,useExisting:qe}]),Fa]});let ht=qe;return ht})(),_g=(()=>{let qe=class qe extends np{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275cmp=Ri({type:qe,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[oo([{provide:np,useExisting:qe}]),Fa,Yi],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(C,e){C&1&&Is(0,0)},dependencies:[yu],encapsulation:2});let ht=qe;return ht})();var wg=(()=>{let qe=class qe extends rp{};qe.\u0275fac=(()=>{let F;return function(e){return(F||(F=Fl(qe)))(e||qe)}})(),qe.\u0275cmp=Ri({type:qe,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[oo([{provide:rp,useExisting:qe}]),Fa,Yi],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(C,e){C&1&&Is(0,0)},dependencies:[yu],encapsulation:2});let ht=qe;return ht})();var my=["table"];function gy(ht,qe){if(ht&1&&(Nn(0,"mat-option",7),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function vy(ht,qe){ht&1&&(Nn(0,"th",16),yr(1," Sample "),Gn())}function yy(ht,qe){if(ht&1&&(Nn(0,"td",17),yr(1),Gn()),ht&2){let xt=qe.$implicit;_r(),dl(" ",xt.value.Sample," ")}}function xy(ht,qe){ht&1&&(Nn(0,"th",16),yr(1," Condition "),Gn())}function by(ht,qe){if(ht&1){let xt=ya();Nn(0,"td",17)(1,"mat-form-field")(2,"input",18,1),Jr("change",function(C){ri(xt);let e=mu(3),T=Br(2);return ii(T.handleAutoCompleteChange(C,e.value))}),Gn(),Nn(4,"mat-label"),yr(5),Gn()()()}if(ht&2){let xt=qe.$implicit;_r(2),Xd("placeholder",xt.value.Sample),Xd("value",xt.value.Condition),_r(3),ra(xt.value.Sample)}}function _y(ht,qe){ht&1&&Wi(0,"tr",19)}function wy(ht,qe){ht&1&&Wi(0,"tr",20)}function Ty(ht,qe){if(ht&1&&(Nn(0,"table",8,0),du(2,10),fi(3,vy,2,0,"th",11)(4,yy,2,1,"td",12),pu(),du(5,13),fi(6,xy,2,0,"th",11)(7,by,6,3,"td",12),pu(),fi(8,_y,1,0,"tr",14)(9,wy,1,0,"tr",15),Gn()),ht&2){let xt=Br();Nr("dataSource",xt.annotationData),_r(8),Nr("matHeaderRowDef",xt.displayedColumns),_r(),Nr("matRowDefColumns",xt.displayedColumns)}}var Tg=(()=>{let qe=class qe{set annotation(F){F&&(this._annotation=F,this.annotationData=F.annotations.map(C=>this.fb.group({Sample:new $r(C.Sample,zi.required),Condition:new $r(C.Condition,zi.required)})),this.form.patchValue({columns:this.annotationData.map(C=>C.value.Sample)}))}get annotation(){return this._annotation}set projectFile(F){this._projectFile=F,this.web.getProjectFileColumns(F.id).subscribe(C=>{let e=[];C.forEach(T=>{e.includes(T)||e.push(T)}),this.columns=e})}get projectFile(){return this._projectFile}onSelectionChange(F){let C=F.source,e=-1,T=C.selected,k;for(let w=0;w<T.length;w++)if(!this.lastSelection.find(b=>b===T[w].value)){k=T[w];break}let a=C.options.toArray();e=a.indexOf(k),this.shiftPressed&&this.lastSelectedIndex>-1&&a.forEach((w,b)=>{this.isBetween(b,this.lastSelectedIndex,e)&&(console.log(w),w.select())}),this.lastSelection=this.form.value.columns?.slice(),this.lastSelectedIndex=e,this.table?.renderRows()}constructor(F,C,e){this.fb=F,this.web=C,this.dialogRef=e,this.columns=[],this.shiftPressed=!1,this.displayedColumns=["Sample","Condition"],this.form=this.fb.group({columns:new $r([])}),this.annotationData=[],this.lastSelectedIndex=-1,this.lastSelection=[],window.addEventListener("keydown",T=>{T.key==="Shift"&&(this.shiftPressed=!0)}),window.addEventListener("keyup",T=>{T.key==="Shift"&&(this.shiftPressed=!1)}),this.form.controls.columns.valueChanges.subscribe(T=>{if(T){let k=T.map(a=>{let w=a.split(/\./g);return console.log(w),w.length>2?{Sample:a,Condition:w.slice(0,w.length-1).join(".")}:w.length===2?{Sample:a,Condition:w[0]}:{Sample:a,Condition:""}});for(let a=0;a<k.length;a++)this.annotationData.find(w=>w.value.Sample===k[a].Sample)||this.annotationData.push(this.fb.group({Sample:new $r(k[a].Sample,zi.required),Condition:new $r(k[a].Condition,zi.required)}));for(let a=0;a<this.annotationData.length;a++)this.annotationData[a].value.Sample&&(T.includes(this.annotationData[a].value.Sample)||this.annotationData.splice(a,1))}})}cancel(){this.dialogRef.close()}save(){let F=!0,C=this.annotationData.map(e=>(e.valid||(F=!1),e.value));F&&this.dialogRef.close(C)}handleAutoCompleteChange(F,C){console.log(F,C)}isBetween(F,C,e){return C<e?F>=C&&F<=e:F>=e&&F<=C}};qe.\u0275fac=function(C){return new(C||qe)(hr(ac),hr(yl),hr(Vc))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-analysis-group-sample-annotation-modal"]],viewQuery:function(C,e){if(C&1&&us(my,5),C&2){let T;ca(T=ua())&&(e.table=T.first)}},inputs:{annotation:"annotation",projectFile:"projectFile"},standalone:!0,features:[Yi],decls:16,vars:3,consts:[["table",""],["optionCondition",""],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[2,"width","300px"],["formControlName","columns",3,"selectionChange","multiple"],[3,"value"],["mat-table","",3,"dataSource"],["mat-button","",3,"click"],["matColumnDef","Sample"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Condition"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matInput","",2,"border-radius","0",3,"change","placeholder","value"],["mat-header-row",""],["mat-row",""]],template:function(C,e){C&1&&(Nn(0,"h2",2),yr(1,"Sample Annotation"),Gn(),Nn(2,"div",3)(3,"form",4)(4,"mat-form-field",5)(5,"mat-select",6),Jr("selectionChange",function(k){return e.onSelectionChange(k)}),ta(6,gy,2,2,"mat-option",7,ka),Gn(),Nn(8,"mat-label"),yr(9,"Columns"),Gn()()(),fi(10,Ty,10,3,"table",8),Gn(),Nn(11,"mat-dialog-actions")(12,"button",9),Jr("click",function(){return e.save()}),yr(13,"Submit"),Gn(),Nn(14,"button",9),Jr("click",function(){return e.cancel()}),yr(15,"Close"),Gn()()),C&2&&(_r(3),Nr("formGroup",e.form),_r(2),Nr("multiple",!0),_r(),na(e.columns),_r(4),hi(e.annotationData.length>0?10:-1))},dependencies:[Hc,Gc,vl,ml,nc,pl,rc,ic,sc,Yc,Uc,oc,Wc,Nh,qc,tc,dg,gg,vg,yg,_g,wg,bg,xg,pg,mg]});let ht=qe;return ht})();var hp=["*"];function My(ht,qe){ht&1&&Ps(0)}var Sy=["tabListContainer"],Cy=["tabList"],Ey=["tabListInner"],Ly=["nextPaginator"],Iy=["previousPaginator"],Py=ht=>({animationDuration:ht}),Dy=(ht,qe)=>({value:ht,params:qe});function Oy(ht,qe){}var Ry=["tabBodyWrapper"],zy=["tabHeader"];function Fy(ht,qe){}function By(ht,qe){if(ht&1&&fi(0,Fy,0,0,"ng-template",12),ht&2){let xt=Br().$implicit;Nr("cdkPortalOutlet",xt.templateLabel)}}function Ny(ht,qe){if(ht&1&&yr(0),ht&2){let xt=Br().$implicit;ra(xt.textLabel)}}function jy(ht,qe){if(ht&1){let xt=ya();Nn(0,"div",7,2),Jr("click",function(){let C=ri(xt),e=C.$implicit,T=C.$index,k=Br(),a=mu(1);return ii(k._handleClick(e,a,T))})("cdkFocusChange",function(C){let e=ri(xt).$index,T=Br();return ii(T._tabFocusChanged(C,e))}),Wi(2,"span",8)(3,"div",9),Nn(4,"span",10)(5,"span",11),fi(6,By,1,1,null,12)(7,Ny,1,1),Gn()()()}if(ht&2){let xt=qe.$implicit,F=qe.$index,C=mu(1),e=Br();Gu(xt.labelClass),Yo("mdc-tab--active",e.selectedIndex===F),Nr("id",e._getTabLabelId(F))("disabled",xt.disabled)("fitInkBarToContent",e.fitInkBarToContent),Nc("tabIndex",e._getTabIndex(F))("aria-posinset",F+1)("aria-setsize",e._tabs.length)("aria-controls",e._getTabContentId(F))("aria-selected",e.selectedIndex===F)("aria-label",xt.ariaLabel||null)("aria-labelledby",!xt.ariaLabel&&xt.ariaLabelledby?xt.ariaLabelledby:null),_r(3),Nr("matRippleTrigger",C)("matRippleDisabled",xt.disabled||e.disableRipple),_r(3),hi(xt.templateLabel?6:7)}}function Uy(ht,qe){ht&1&&Ps(0)}function Vy(ht,qe){if(ht&1){let xt=ya();Nn(0,"mat-tab-body",13),Jr("_onCentered",function(){ri(xt);let C=Br();return ii(C._removeTabBodyWrapperHeight())})("_onCentering",function(C){ri(xt);let e=Br();return ii(e._setTabBodyWrapperHeight(C))}),Gn()}if(ht&2){let xt=qe.$implicit,F=qe.$index,C=Br();Gu(xt.bodyClass),Yo("mat-mdc-tab-body-active",C.selectedIndex===F),Nr("id",C._getTabContentId(F))("content",xt.content)("position",xt.position)("origin",xt.origin)("animationDuration",C.animationDuration)("preserveContent",C.preserveContent),Nc("tabindex",C.contentTabIndex!=null&&C.selectedIndex===F?C.contentTabIndex:null)("aria-labelledby",C._getTabLabelId(F))("aria-hidden",C.selectedIndex!==F)}}var Hy=new hl("MatTabContent"),Gy=(()=>{let qe=class qe{constructor(F){this.template=F}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs))},qe.\u0275dir=Ni({type:qe,selectors:[["","matTabContent",""]],standalone:!0,features:[oo([{provide:Hy,useExisting:qe}])]});let ht=qe;return ht})(),qy=new hl("MatTabLabel"),Mg=new hl("MAT_TAB"),Wy=(()=>{let qe=class qe extends Tm{constructor(F,C,e){super(F,C),this._closestTab=e}};qe.\u0275fac=function(C){return new(C||qe)(hr(cs),hr(Ql),hr(Mg,8))},qe.\u0275dir=Ni({type:qe,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[oo([{provide:qy,useExisting:qe}]),Fa]});let ht=qe;return ht})(),Sg=new hl("MAT_TAB_GROUP"),dp=(()=>{let qe=class qe{get templateLabel(){return this._templateLabel}set templateLabel(F){this._setTemplateLabelInput(F)}get content(){return this._contentPortal}constructor(F,C){this._viewContainerRef=F,this._closestTabGroup=C,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new fu,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(F){(F.hasOwnProperty("textLabel")||F.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new wm(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(F){F&&F._closestTab===this&&(this._templateLabel=F)}};qe.\u0275fac=function(C){return new(C||qe)(hr(Ql),hr(Sg,8))},qe.\u0275cmp=Ri({type:qe,selectors:[["mat-tab"]],contentQueries:function(C,e,T){if(C&1&&(Ds(T,Wy,5),Ds(T,Gy,7,cs)),C&2){let k;ca(k=ua())&&(e.templateLabel=k.first),ca(k=ua())&&(e._explicitContent=k.first)}},viewQuery:function(C,e){if(C&1&&us(cs,7),C&2){let T;ca(T=ua())&&(e._implicitContent=T.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",Ya],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[oo([{provide:Mg,useExisting:qe}]),Wo,Bc,Yi],ngContentSelectors:hp,decls:1,vars:0,template:function(C,e){C&1&&(ec(),fi(0,My,1,0,"ng-template"))},encapsulation:2});let ht=qe;return ht})(),cp="mdc-tab-indicator--active",kg="mdc-tab-indicator--no-transition",up=class{constructor(qe){this._items=qe}hide(){this._items.forEach(qe=>qe.deactivateInkBar())}alignToElement(qe){let xt=this._items.find(C=>C.elementRef.nativeElement===qe),F=this._currentItem;if(xt!==F&&(F?.deactivateInkBar(),xt)){let C=F?.elementRef.nativeElement.getBoundingClientRect?.();xt.activateInkBar(C),this._currentItem=xt}}},Yy=(()=>{let qe=class qe{constructor(){this._elementRef=Xs(yo),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(F){this._fitToContent!==F&&(this._fitToContent=F,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(F){let C=this._elementRef.nativeElement;if(!F||!C.getBoundingClientRect||!this._inkBarContentElement){C.classList.add(cp);return}let e=C.getBoundingClientRect(),T=F.width/e.width,k=F.left-e.left;C.classList.add(kg),this._inkBarContentElement.style.setProperty("transform",`translateX(${k}px) scaleX(${T})`),C.getBoundingClientRect(),C.classList.remove(kg),C.classList.add(cp),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(cp)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let F=this._elementRef.nativeElement.ownerDocument||document,C=this._inkBarElement=F.createElement("span"),e=this._inkBarContentElement=F.createElement("span");C.className="mdc-tab-indicator",e.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",C.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let F=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;F.appendChild(this._inkBarElement)}};qe.\u0275fac=function(C){return new(C||qe)},qe.\u0275dir=Ni({type:qe,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Ya]},features:[Wo]});let ht=qe;return ht})();var Cg=(()=>{let qe=class qe extends Yy{constructor(F){super(),this.elementRef=F,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};qe.\u0275fac=function(C){return new(C||qe)(hr(yo))},qe.\u0275dir=Ni({type:qe,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(C,e){C&2&&(Nc("aria-disabled",!!e.disabled),Yo("mat-mdc-tab-disabled",e.disabled))},inputs:{disabled:[2,"disabled","disabled",Ya]},standalone:!0,features:[Wo,Fa]});let ht=qe;return ht})(),Ag=mm({passive:!0}),Xy=650,Zy=100,Ky=(()=>{let qe=class qe{get selectedIndex(){return this._selectedIndex}set selectedIndex(F){let C=isNaN(F)?0:F;this._selectedIndex!=C&&(this._selectedIndexChanged=!0,this._selectedIndex=C,this._keyManager&&this._keyManager.updateActiveItem(C))}constructor(F,C,e,T,k,a,w){this._elementRef=F,this._changeDetectorRef=C,this._viewportRuler=e,this._dir=T,this._ngZone=k,this._platform=a,this._animationMode=w,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new fu,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new fu,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new qr,this.indexFocused=new qr,this._sharedResizeObserver=Xs(Sm),this._injector=Xs(Eh),k.runOutsideAngular(()=>{Ah(F.nativeElement,"mouseleave").pipe(fl(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Ah(this._previousPaginator.nativeElement,"touchstart",Ag).pipe(fl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Ah(this._nextPaginator.nativeElement,"touchstart",Ag).pipe(fl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let F=this._dir?this._dir.change:Cf("ltr"),C=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(em(32),fl(this._destroyed)),e=this._viewportRuler.change(150).pipe(fl(this._destroyed)),T=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new ym(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),Lh(T,{injector:this._injector}),Mh(F,e,C,this._items.changes,this._itemsResized()).pipe(fl(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),T()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(k=>{this.indexFocused.emit(k),this._setTabFocus(k)})}_itemsResized(){return typeof ResizeObserver!="function"?K0:this._items.changes.pipe(Sh(this._items),rm(F=>new Z0(C=>this._ngZone.runOutsideAngular(()=>{let e=new ResizeObserver(T=>C.next(T));return F.forEach(T=>e.observe(T.elementRef.nativeElement)),()=>{e.disconnect()}}))),nm(1),Q0(F=>F.some(C=>C.contentRect.width>0&&C.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(F){if(!gm(F))switch(F.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let C=this._items.get(this.focusIndex);C&&!C.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(F))}break;default:this._keyManager.onKeydown(F)}}_onContentChanges(){let F=this._elementRef.nativeElement.textContent;F!==this._currentTextContent&&(this._currentTextContent=F||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(F){!this._isValidIndex(F)||this.focusIndex===F||!this._keyManager||this._keyManager.setActiveItem(F)}_isValidIndex(F){return this._items?!!this._items.toArray()[F]:!0}_setTabFocus(F){if(this._showPaginationControls&&this._scrollToLabel(F),this._items&&this._items.length){this._items.toArray()[F].focus();let C=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?C.scrollLeft=0:C.scrollLeft=C.scrollWidth-C.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let F=this.scrollDistance,C=this._getLayoutDirection()==="ltr"?-F:F;this._tabList.nativeElement.style.transform=`translateX(${Math.round(C)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(F){this._scrollTo(F)}_scrollHeader(F){let C=this._tabListContainer.nativeElement.offsetWidth,e=(F=="before"?-1:1)*C/3;return this._scrollTo(this._scrollDistance+e)}_handlePaginatorClick(F){this._stopInterval(),this._scrollHeader(F)}_scrollToLabel(F){if(this.disablePagination)return;let C=this._items?this._items.toArray()[F]:null;if(!C)return;let e=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:T,offsetWidth:k}=C.elementRef.nativeElement,a,w;this._getLayoutDirection()=="ltr"?(a=T,w=a+k):(w=this._tabListInner.nativeElement.offsetWidth-T,a=w-k);let b=this.scrollDistance,f=this.scrollDistance+e;a<b?this.scrollDistance-=b-a:w>f&&(this.scrollDistance+=Math.min(w-f,a-b))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let F=this._tabListInner.nativeElement.scrollWidth,C=this._elementRef.nativeElement.offsetWidth,e=F-C>=5;e||(this.scrollDistance=0),e!==this._showPaginationControls&&(this._showPaginationControls=e,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let F=this._tabListInner.nativeElement.scrollWidth,C=this._tabListContainer.nativeElement.offsetWidth;return F-C||0}_alignInkBarToSelectedTab(){let F=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,C=F?F.elementRef.nativeElement:null;C?this._inkBar.alignToElement(C):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(F,C){C&&C.button!=null&&C.button!==0||(this._stopInterval(),$0(Xy,Zy).pipe(fl(Mh(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:e,distance:T}=this._scrollHeader(F);(T===0||T>=e)&&this._stopInterval()}))}_scrollTo(F){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let C=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(C,F)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:C,distance:this._scrollDistance}}};qe.\u0275fac=function(C){return new(C||qe)(hr(yo),hr(bc),hr(If),hr(qu,8),hr($l),hr(vu),hr(Hu,8))},qe.\u0275dir=Ni({type:qe,inputs:{disablePagination:[2,"disablePagination","disablePagination",Ya],selectedIndex:[2,"selectedIndex","selectedIndex",gu]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[Wo]});let ht=qe;return ht})(),Jy=(()=>{let qe=class qe extends Ky{constructor(F,C,e,T,k,a,w){super(F,C,e,T,k,a,w),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new up(this._items),super.ngAfterContentInit()}_itemSelected(F){F.preventDefault()}};qe.\u0275fac=function(C){return new(C||qe)(hr(yo),hr(bc),hr(If),hr(qu,8),hr($l),hr(vu),hr(Hu,8))},qe.\u0275cmp=Ri({type:qe,selectors:[["mat-tab-header"]],contentQueries:function(C,e,T){if(C&1&&Ds(T,Cg,4),C&2){let k;ca(k=ua())&&(e._items=k)}},viewQuery:function(C,e){if(C&1&&(us(Sy,7),us(Cy,7),us(Ey,7),us(Ly,5),us(Iy,5)),C&2){let T;ca(T=ua())&&(e._tabListContainer=T.first),ca(T=ua())&&(e._tabList=T.first),ca(T=ua())&&(e._tabListInner=T.first),ca(T=ua())&&(e._nextPaginator=T.first),ca(T=ua())&&(e._previousPaginator=T.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(C,e){C&2&&Yo("mat-mdc-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-mdc-tab-header-rtl",e._getLayoutDirection()=="rtl")},inputs:{disableRipple:[2,"disableRipple","disableRipple",Ya]},standalone:!0,features:[Wo,Fa,Yi],ngContentSelectors:hp,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(C,e){if(C&1){let T=ya();ec(),Nn(0,"button",5,0),Jr("click",function(){return ri(T),ii(e._handlePaginatorClick("before"))})("mousedown",function(a){return ri(T),ii(e._handlePaginatorPress("before",a))})("touchend",function(){return ri(T),ii(e._stopInterval())}),Wi(2,"div",6),Gn(),Nn(3,"div",7,1),Jr("keydown",function(a){return ri(T),ii(e._handleKeydown(a))}),Nn(5,"div",8,2),Jr("cdkObserveContent",function(){return ri(T),ii(e._onContentChanges())}),Nn(7,"div",9,3),Ps(9),Gn()()(),Nn(10,"button",10,4),Jr("mousedown",function(a){return ri(T),ii(e._handlePaginatorPress("after",a))})("click",function(){return ri(T),ii(e._handlePaginatorClick("after"))})("touchend",function(){return ri(T),ii(e._stopInterval())}),Wi(12,"div",6),Gn()}C&2&&(Yo("mat-mdc-tab-header-pagination-disabled",e._disableScrollBefore),Nr("matRippleDisabled",e._disableScrollBefore||e.disableRipple)("disabled",e._disableScrollBefore||null),_r(3),Yo("_mat-animation-noopable",e._animationMode==="NoopAnimations"),_r(7),Yo("mat-mdc-tab-header-pagination-disabled",e._disableScrollAfter),Nr("matRippleDisabled",e._disableScrollAfter||e.disableRipple)("disabled",e._disableScrollAfter||null))},dependencies:[Zd,vm],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let ht=qe;return ht})(),$y=new hl("MAT_TABS_CONFIG"),Qy={translateTab:km("translateTab",[Fh("center, void, left-origin-center, right-origin-center",Xu({transform:"none"})),Fh("left",Xu({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Fh("right",Xu({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Bh("* => left, * => right, left => center, right => center",zh("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Bh("void => left-origin-center",[Xu({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),zh("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Bh("void => right-origin-center",[Xu({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),zh("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},ex=(()=>{let qe=class qe extends Rh{constructor(F,C,e,T){super(F,C,T),this._host=e,this._centeringSub=Vu.EMPTY,this._leavingSub=Vu.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Sh(this._host._isCenterPosition(this._host._position))).subscribe(F=>{F&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};qe.\u0275fac=function(C){return new(C||qe)(hr(sm),hr(Ql),hr(im(()=>Eg)),hr(Ih))},qe.\u0275dir=Ni({type:qe,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[Fa]});let ht=qe;return ht})(),Eg=(()=>{let qe=class qe{set position(F){this._positionIndex=F,this._computePositionAnimationState()}constructor(F,C,e){this._elementRef=F,this._dir=C,this._dirChangeSubscription=Vu.EMPTY,this._translateTabComplete=new fu,this._onCentering=new qr,this._beforeCentering=new qr,this._afterLeavingCenter=new qr,this._onCentered=new qr(!0),this.animationDuration="500ms",this.preserveContent=!1,C&&(this._dirChangeSubscription=C.change.subscribe(T=>{this._computePositionAnimationState(T),e.markForCheck()})),this._translateTabComplete.pipe(tm((T,k)=>T.fromState===k.fromState&&T.toState===k.toState)).subscribe(T=>{this._isCenterPosition(T.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(T.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(F){let C=this._isCenterPosition(F.toState);this._beforeCentering.emit(C),C&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(F){return F=="center"||F=="left-origin-center"||F=="right-origin-center"}_computePositionAnimationState(F=this._getLayoutDirection()){this._positionIndex<0?this._position=F=="ltr"?"left":"right":this._positionIndex>0?this._position=F=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(F){let C=this._getLayoutDirection();return C=="ltr"&&F<=0||C=="rtl"&&F>0?"left-origin-center":"right-origin-center"}};qe.\u0275fac=function(C){return new(C||qe)(hr(yo),hr(qu,8),hr(bc))},qe.\u0275cmp=Ri({type:qe,selectors:[["mat-tab-body"]],viewQuery:function(C,e){if(C&1&&us(Rh,5),C&2){let T;ca(T=ua())&&(e._portalHost=T.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[Yi],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(C,e){if(C&1){let T=ya();Nn(0,"div",1,0),Jr("@translateTab.start",function(a){return ri(T),ii(e._onTranslateTabStarted(a))})("@translateTab.done",function(a){return ri(T),ii(e._translateTabComplete.next(a))}),fi(2,Oy,0,0,"ng-template",2),Gn()}C&2&&Nr("@translateTab",um(3,Dy,e._position,cm(1,Py,e.animationDuration)))},dependencies:[ex,_m],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[Qy.translateTab]}});let ht=qe;return ht})(),tx=0,nx=!0,Lg=(()=>{let qe=class qe{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(F){this._fitInkBarToContent=F,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(F){this._indexToSelect=isNaN(F)?null:F}get animationDuration(){return this._animationDuration}set animationDuration(F){let C=F+"";this._animationDuration=/^\d+$/.test(C)?F+"ms":C}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(F){this._contentTabIndex=isNaN(F)?null:F}get backgroundColor(){return this._backgroundColor}set backgroundColor(F){if(!nx)throw new Error("mat-tab-group background color must be set through the Sass theming API");let C=this._elementRef.nativeElement.classList;C.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),F&&C.add("mat-tabs-with-background",`mat-background-${F}`),this._backgroundColor=F}constructor(F,C,e,T){this._elementRef=F,this._changeDetectorRef=C,this._animationMode=T,this._tabs=new am,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Vu.EMPTY,this._tabLabelSubscription=Vu.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new qr,this.focusChange=new qr,this.animationDone=new qr,this.selectedTabChange=new qr(!0),this._isServer=!Xs(vu).isBrowser,this._groupId=tx++,this.animationDuration=e&&e.animationDuration?e.animationDuration:"500ms",this.disablePagination=e&&e.disablePagination!=null?e.disablePagination:!1,this.dynamicHeight=e&&e.dynamicHeight!=null?e.dynamicHeight:!1,e?.contentTabIndex!=null&&(this.contentTabIndex=e.contentTabIndex),this.preserveContent=!!e?.preserveContent,this.fitInkBarToContent=e&&e.fitInkBarToContent!=null?e.fitInkBarToContent:!1,this.stretchTabs=e&&e.stretchTabs!=null?e.stretchTabs:!0}ngAfterContentChecked(){let F=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=F){let C=this._selectedIndex==null;if(!C){this.selectedTabChange.emit(this._createChangeEvent(F));let e=this._tabBodyWrapper.nativeElement;e.style.minHeight=e.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((e,T)=>e.isActive=T===F),C||(this.selectedIndexChange.emit(F),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((C,e)=>{C.position=e-F,this._selectedIndex!=null&&C.position==0&&!C.origin&&(C.origin=F-this._selectedIndex)}),this._selectedIndex!==F&&(this._selectedIndex=F,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let F=this._clampTabIndex(this._indexToSelect);if(F===this._selectedIndex){let C=this._tabs.toArray(),e;for(let T=0;T<C.length;T++)if(C[T].isActive){this._indexToSelect=this._selectedIndex=T,this._lastFocusedTabIndex=null,e=C[T];break}!e&&C[F]&&Promise.resolve().then(()=>{C[F].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(F))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Sh(this._allTabs)).subscribe(F=>{this._tabs.reset(F.filter(C=>C._closestTabGroup===this||!C._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(F){let C=this._tabHeader;C&&(C.focusIndex=F)}_focusChanged(F){this._lastFocusedTabIndex=F,this.focusChange.emit(this._createChangeEvent(F))}_createChangeEvent(F){let C=new fp;return C.index=F,this._tabs&&this._tabs.length&&(C.tab=this._tabs.toArray()[F]),C}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Mh(...this._tabs.map(F=>F._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(F){return Math.min(this._tabs.length-1,Math.max(F||0,0))}_getTabLabelId(F){return`mat-tab-label-${this._groupId}-${F}`}_getTabContentId(F){return`mat-tab-content-${this._groupId}-${F}`}_setTabBodyWrapperHeight(F){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let C=this._tabBodyWrapper.nativeElement;C.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(C.style.height=F+"px")}_removeTabBodyWrapperHeight(){let F=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=F.clientHeight,F.style.height="",this.animationDone.emit()}_handleClick(F,C,e){C.focusIndex=e,F.disabled||(this.selectedIndex=e)}_getTabIndex(F){let C=this._lastFocusedTabIndex??this.selectedIndex;return F===C?0:-1}_tabFocusChanged(F,C){F&&F!=="mouse"&&F!=="touch"&&(this._tabHeader.focusIndex=C)}};qe.\u0275fac=function(C){return new(C||qe)(hr(yo),hr(bc),hr($y,8),hr(Hu,8))},qe.\u0275cmp=Ri({type:qe,selectors:[["mat-tab-group"]],contentQueries:function(C,e,T){if(C&1&&Ds(T,dp,5),C&2){let k;ca(k=ua())&&(e._allTabs=k)}},viewQuery:function(C,e){if(C&1&&(us(Ry,5),us(zy,5)),C&2){let T;ca(T=ua())&&(e._tabBodyWrapper=T.first),ca(T=ua())&&(e._tabHeader=T.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(C,e){C&2&&(Gu("mat-"+(e.color||"primary")),hu("--mat-tab-animation-duration",e.animationDuration),Yo("mat-mdc-tab-group-dynamic-height",e.dynamicHeight)("mat-mdc-tab-group-inverted-header",e.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",e.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Ya],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",Ya],dynamicHeight:[2,"dynamicHeight","dynamicHeight",Ya],selectedIndex:[2,"selectedIndex","selectedIndex",gu],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",gu],disablePagination:[2,"disablePagination","disablePagination",Ya],disableRipple:[2,"disableRipple","disableRipple",Ya],preserveContent:[2,"preserveContent","preserveContent",Ya],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[oo([{provide:Sg,useExisting:qe}]),Wo,Yi],ngContentSelectors:hp,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(C,e){if(C&1){let T=ya();ec(),Nn(0,"mat-tab-header",3,0),Jr("indexFocused",function(a){return ri(T),ii(e._focusChanged(a))})("selectFocusedIndex",function(a){return ri(T),ii(e.selectedIndex=a)}),ta(2,jy,8,17,"div",4,ka),Gn(),fi(4,Uy,1,0),Nn(5,"div",5,1),ta(7,Vy,1,13,"mat-tab-body",6,ka),Gn()}C&2&&(Nr("selectedIndex",e.selectedIndex||0)("disableRipple",e.disableRipple)("disablePagination",e.disablePagination),_r(2),na(e._tabs),_r(2),hi(e._isServer?4:-1),_r(),Yo("_mat-animation-noopable",e._animationMode==="NoopAnimations"),_r(2),na(e._tabs))},dependencies:[Jy,Cg,xm,Zd,Rh,Eg],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let ht=qe;return ht})(),fp=class{};function rx(ht,qe){if(ht&1&&(Nn(0,"mat-option",7),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function ix(ht,qe){if(ht&1&&(Nn(0,"mat-option",7),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function ax(ht,qe){if(ht&1&&(Nn(0,"mat-option",7),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function ox(ht,qe){if(ht&1&&(Nn(0,"mat-option",7),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function sx(ht,qe){if(ht&1&&(Nn(0,"mat-option",7),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function lx(ht,qe){if(ht&1&&(Nn(0,"mat-option",7),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function cx(ht,qe){if(ht&1&&(Nn(0,"mat-form-field")(1,"mat-select",14),ta(2,lx,2,2,"mat-option",7,ka),Gn(),Nn(4,"mat-label"),yr(5,"Comparison Label"),Gn()()),ht&2){let xt=Br(4);_r(2),na(xt.comparison_labels)}}function ux(ht,qe){ht&1&&(Nn(0,"mat-form-field"),Wi(1,"input",15),Nn(2,"mat-label"),yr(3,"Comparison Label"),Gn()())}function fx(ht,qe){if(ht&1){let xt=ya();Nn(0,"mat-tab",4),du(1),Nn(2,"div")(3,"form",5)(4,"div")(5,"mat-form-field")(6,"mat-select",6),ta(7,rx,2,2,"mat-option",7,ka),Gn(),Nn(9,"mat-label"),yr(10,"Condition A"),Gn()()(),Nn(11,"div")(12,"mat-form-field")(13,"mat-select",8),ta(14,ix,2,2,"mat-option",7,ka),Gn(),Nn(16,"mat-label"),yr(17,"Condition B"),Gn()()(),Nn(18,"div")(19,"mat-form-field")(20,"mat-select",9),ta(21,ax,2,2,"mat-option",7,ka),Gn(),Nn(23,"mat-label"),yr(24,"Fold Change Column"),Gn()()(),Nn(25,"div")(26,"mat-form-field")(27,"mat-select",10),ta(28,ox,2,2,"mat-option",7,ka),Gn(),Nn(30,"mat-label"),yr(31,"P-Value Column"),Gn()()(),Nn(32,"div")(33,"mat-form-field")(34,"mat-select",11),ta(35,sx,2,2,"mat-option",7,ka),Gn(),Nn(37,"mat-label"),yr(38,"Comparison Column"),Gn()()(),yr(39," If the comparison column has been selected, please select the comparison label column below. If not, please write the comparison label in the text box below. "),Nn(40,"div"),fi(41,cx,6,0,"mat-form-field")(42,ux,4,0,"mat-form-field"),Gn()()(),Nn(43,"div",12)(44,"button",13),Jr("click",function(){ri(xt);let C=Br().$implicit,e=Br(2);return ii(e.copyComparison(C))}),Nn(45,"mat-icon"),yr(46,"content_copy"),Gn()(),Nn(47,"button",13),Jr("click",function(){ri(xt);let C=Br().$index,e=Br(2);return ii(e.removeComparison(C))}),Nn(48,"mat-icon"),yr(49,"remove"),Gn()()(),pu(),Gn()}if(ht&2){let xt=Br().$implicit,F=Br(2);Nr("label",xt.value.comparison_label),_r(3),Nr("formGroup",xt),_r(4),na(F.conditions),_r(7),na(F.conditions),_r(7),na(F.columns),_r(7),na(F.columns),_r(7),na(F.columns),_r(6),hi(xt.value.comparison_col?41:42)}}function hx(ht,qe){if(ht&1&&fi(0,fx,50,3,"mat-tab",4),ht&2){let xt=qe.$implicit;hi(xt.value.comparison_label?0:-1)}}function dx(ht,qe){if(ht&1&&(Nn(0,"mat-tab-group",2),ta(1,hx,1,1,null,null,ka),Gn()),ht&2){let xt=Br();_r(),na(xt.form)}}var Ig=(()=>{let qe=class qe{set comparisonMatrix(F){this._comparisonMatrix=F,this.form=F.matrix.map(C=>this.fb.group({condition_A:new $r(C.condition_A,zi.required),condition_B:new $r(C.condition_B,zi.required),fold_change_col:new $r(C.fold_change_col,zi.required),p_value_col:new $r(C.p_value_col,zi.required),comparison_label:new $r(C.comparison_label,zi.required),comparison_col:new $r(C.comparison_col)}));for(let C of this.form)C.controls.comparison_col.value&&this.web.getUniqueComparisonLabel(F.file,C.controls.comparison_col.value).subscribe(e=>{this.comparison_labels=e}),C.controls.comparison_col.valueChanges.subscribe(e=>{e&&this.web.getUniqueComparisonLabel(F.file,e).subscribe(T=>{this.comparison_labels=T})}),C.controls.comparison_label.valueChanges.subscribe(e=>{e||C.controls.comparison_label.setValue("temp_title")})}set projectFile(F){this._projectFile=F,this.web.getProjectFileColumns(F.id).subscribe(C=>{let e=[];C.forEach(T=>{e.includes(T)||e.push(T)}),this.columns=e})}get projectFile(){return this._projectFile}set sampleAnnotations(F){this._sampleAnnotations=F,F&&(this.conditions=[],F.annotations.forEach(C=>{console.log(C.Condition),this.conditions.includes(C.Condition)||this.conditions.push(C.Condition)}))}get sampleAnnotations(){return this._sampleAnnotations}constructor(F,C,e){this.web=F,this.fb=C,this.dialogRef=e,this.comparison_labels=[],this.columns=[],this.conditions=[],this.form=[]}addComparison(){let F=this.fb.group({condition_A:new $r(null,zi.required),condition_B:new $r(null,zi.required),fold_change_col:new $r(null,zi.required),p_value_col:new $r(null,zi.required),comparison_label:new $r(`comparison_${this.form.length+1}`,zi.required),comparison_col:new $r(null)});this.form.push(F),F.controls.comparison_col.valueChanges.subscribe(C=>{C&&this.web.getUniqueComparisonLabel(this.comparisonMatrix.file,C).subscribe(e=>{this.comparison_labels=e})}),F.controls.comparison_label.valueChanges.subscribe(C=>{C||F.controls.comparison_label.setValue("temp_title")})}removeComparison(F){this.form.splice(F,1)}copyComparison(F){let C=this.fb.group({condition_A:new $r(F.value.condition_A,zi.required),condition_B:new $r(F.value.condition_B,zi.required),fold_change_col:new $r(F.value.fold_change_col,zi.required),p_value_col:new $r(F.value.p_value_col,zi.required),comparison_label:new $r(`comparison_${this.form.length+1}`,zi.required),comparison_col:new $r(F.value.comparison_col)});this.form.push(C),C.controls.comparison_col.valueChanges.subscribe(e=>{e&&this.web.getUniqueComparisonLabel(this.comparisonMatrix.file,e).subscribe(T=>{this.comparison_labels=T})}),C.controls.comparison_label.valueChanges.subscribe(e=>{e||C.controls.comparison_label.setValue("temp_title")})}save(){let F=!0;this.form.forEach(C=>{C.valid||(F=!1)}),F&&this.dialogRef.close(this.form.map(C=>C.value))}cancel(){this.dialogRef.close()}};qe.\u0275fac=function(C){return new(C||qe)(hr(yl),hr(ac),hr(Vc))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-analysis-group-comparison-matrix-modal"]],inputs:{comparisonMatrix:"comparisonMatrix",projectFile:"projectFile",sampleAnnotations:"sampleAnnotations"},standalone:!0,features:[Yi],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-stretch-tabs","false"],["mat-button","",3,"click"],[3,"label"],[2,"display","flex","flex-direction","column","gap","10px","overflow-y","hidden",3,"formGroup"],["formControlName","condition_A"],[3,"value"],["formControlName","condition_B"],["formControlName","fold_change_col"],["formControlName","p_value_col"],["formControlName","comparison_col"],[2,"display","flex","flex-direction","row","gap","10px"],["mat-icon-button","","color","warn",3,"click"],["formControlName","comparison_label"],["matInput","","type","text","formControlName","comparison_label"]],template:function(C,e){C&1&&(Nn(0,"h2",0),yr(1,"Analysis Group Comparison Matrix"),Gn(),Nn(2,"div",1),fi(3,dx,3,0,"mat-tab-group",2),Gn(),Nn(4,"mat-dialog-actions")(5,"button",3),Jr("click",function(){return e.addComparison()}),yr(6," Add Comparison "),Gn(),Nn(7,"button",3),Jr("click",function(){return e.save()}),yr(8," Submit "),Gn(),Nn(9,"button",3),Jr("click",function(){return e.cancel()}),yr(10," Close "),Gn()()),C&2&&(_r(3),hi(e.form.length>0?3:-1))},dependencies:[Hc,Gc,Yu,Wu,vl,ml,Zu,nc,pl,rc,ic,sc,Yc,Uc,oc,Wc,Lg,dp,qc,tc],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]});let ht=qe;return ht})();var Pg=(()=>{let qe=class qe{constructor(F,C,e,T,k){this.fb=F,this.dialogRef=C,this.web=e,this.ws=T,this.sb=k,this.analysisGroupIDs=[],this.form=this.fb.group({search:new $r("",zi.required),searchMode:new $r("full",zi.required),foldChange:new $r(.6,zi.required),pValue:new $r(1.31,zi.required)}),this.selectedProjects=[],this.ws.searchWSConnection?.subscribe(a=>{if(a&&a.type==="search_status")switch(a.status){case"complete":this.sb.open(`${location.host}/#/search-session/${a.id}`,"Dismiss",{duration:1e4}),this.dialogRef.close(a.id);break}})}search(){this.form.invalid||(this.selectedProjects.length===0?this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(this.analysisGroupIDs,this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode).subscribe(F=>{this.sb.open("Search queued","Dismiss",{duration:2e3})}):this.web.getAnalysisGroupsFromProjects(this.selectedProjects).subscribe(F=>{F&&this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(F.map(C=>C.id),this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode).subscribe(C=>{this.sb.open("Search queued","Dismiss",{duration:2e3})})}))}cancel(){this.dialogRef.close()}handleMultipleProjectSelection(F){this.selectedProjects=F}};qe.\u0275fac=function(C){return new(C||qe)(hr(ac),hr(Vc),hr(yl),hr(Hh),hr(Vh))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-search-modal"]],inputs:{analysisGroupIDs:"analysisGroupIDs"},standalone:!0,features:[Yi],decls:56,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","1px",3,"formGroup"],["matInput","","formControlName","search","id","search","type","text","placeholder","Search Term"],["formControlName","searchMode"],["value","gene"],["value","uniprot"],["value","pi"],["value","full"],["matInput","","type","number","formControlName","foldChange","placeholder","Log2 Fold Change"],["matInput","","type","number","formControlName","pValue","placeholder","P-Value"],[3,"selectedProjects","multipleSelection"],["mat-button","",3,"click"]],template:function(C,e){C&1&&(Nn(0,"h2",0),yr(1,"Data Search"),Gn(),Nn(2,"div",1)(3,"form",2)(4,"mat-form-field"),Wi(5,"input",3),Nn(6,"mat-label"),yr(7,"Search Term"),Gn()(),Nn(8,"p")(9,"b"),yr(10,"Search Multiple Terms"),Gn(),Wi(11,"br"),yr(12," In order to search with multiple terms, enclose each term in single quotes and separate them with "),Nn(13,"b"),yr(14,"OR"),Gn(),yr(15,". "),Gn(),Nn(16,"mat-form-field")(17,"mat-select",4)(18,"mat-option",5),yr(19,"Gene Name"),Gn(),Nn(20,"mat-option",6),yr(21,"UniProt Accession ID"),Gn(),Nn(22,"mat-option",7),yr(23,"Primary IDs"),Gn(),Nn(24,"mat-option",8),yr(25,"Full Text"),Gn()(),Nn(26,"mat-label"),yr(27,"Search Mode"),Gn()(),Nn(28,"mat-form-field"),Wi(29,"input",9),Nn(30,"mat-label"),yr(31,"Log2 Fold Change"),Gn()(),Nn(32,"mat-form-field"),Wi(33,"input",10),Nn(34,"mat-label"),yr(35,"-Log10(P-Value)"),Gn()()(),Wi(36,"hr"),Nn(37,"p")(38,"b"),yr(39,"Search by currently selected analysis groups or by selected projects below"),Gn(),Wi(40,"br"),yr(41," By selecting the one or more projects below, the currently selected analysis groups will be ignored. "),Gn(),Nn(42,"mat-accordion")(43,"mat-expansion-panel")(44,"mat-expansion-panel-header")(45,"mat-panel-title"),yr(46," Filter by Project "),Gn(),Nn(47,"mat-panel-description"),yr(48," Optional "),Gn()(),Nn(49,"app-project-search",11),Jr("selectedProjects",function(k){return e.handleMultipleProjectSelection(k)}),Gn()()(),Wi(50,"hr"),Gn(),Nn(51,"mat-dialog-actions")(52,"button",12),Jr("click",function(){return e.search()}),yr(53,"Search"),Gn(),Nn(54,"button",12),Jr("click",function(){return e.cancel()}),yr(55,"Close"),Gn()()),C&2&&(_r(3),Nr("formGroup",e.form),_r(46),Nr("multipleSelection",!0))},dependencies:[Hc,Gc,oc,Wc,sc,vl,ml,Zu,Mm,nc,pl,rc,ic,qc,tc,Yc,Uc,Fm,Dm,Rm,Om,zm,Pm]});let ht=qe;return ht})();function gx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function vx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function yx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function xx(ht,qe){if(ht&1&&(Nn(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),ta(3,gx,2,2,"mat-option",5,ka),Gn(),Nn(5,"mat-label"),yr(6,"Primary ID Column"),Gn()(),Nn(7,"mat-form-field")(8,"mat-select",6),ta(9,vx,2,2,"mat-option",5,ka),Gn(),Nn(11,"mat-label"),yr(12,"Gene Name Column"),Gn()(),Nn(13,"mat-form-field")(14,"mat-select",7),ta(15,yx,2,2,"mat-option",5,ka),Gn(),Nn(17,"mat-label"),yr(18,"UniProt Accession ID Column"),Gn()()()),ht&2){let xt=Br(2);Nr("formGroup",xt.formDFColumn),_r(3),na(xt.columns),_r(6),na(xt.columns),_r(6),na(xt.columns)}}function bx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function _x(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function wx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function Tx(ht,qe){if(ht&1&&(Nn(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),ta(3,bx,2,2,"mat-option",5,ka),Gn(),Nn(5,"mat-label"),yr(6,"Primary ID Column"),Gn()(),Nn(7,"mat-form-field")(8,"mat-select",6),ta(9,_x,2,2,"mat-option",5,ka),Gn(),Nn(11,"mat-label"),yr(12,"Gene Name Column"),Gn()(),Nn(13,"mat-form-field")(14,"mat-select",7),ta(15,wx,2,2,"mat-option",5,ka),Gn(),Nn(17,"mat-label"),yr(18,"UniProt Accession ID Column"),Gn()()()),ht&2){let xt=Br(2);Nr("formGroup",xt.formSearchedColumn),_r(3),na(xt.columns),_r(6),na(xt.columns),_r(6),na(xt.columns)}}function kx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function Ax(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function Mx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function Sx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function Cx(ht,qe){if(ht&1&&(Nn(0,"mat-option",5),yr(1),Gn()),ht&2){let xt=qe.$implicit;Nr("value",xt),_r(),ra(xt)}}function Ex(ht,qe){if(ht&1&&(Nn(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),ta(3,kx,2,2,"mat-option",5,ka),Gn(),Nn(5,"mat-label"),yr(6,"Primary ID Column"),Gn()(),Nn(7,"mat-form-field")(8,"mat-select",6),ta(9,Ax,2,2,"mat-option",5,ka),Gn(),Nn(11,"mat-label"),yr(12,"Gene Name Column"),Gn()(),Nn(13,"mat-form-field")(14,"mat-select",7),ta(15,Mx,2,2,"mat-option",5,ka),Gn(),Nn(17,"mat-label"),yr(18,"UniProt Accession ID Column"),Gn()(),Nn(19,"mat-form-field")(20,"mat-select",8),ta(21,Sx,2,2,"mat-option",5,ka),Gn(),Nn(23,"mat-label"),yr(24,"Copy Number Rank Column"),Gn()(),Nn(25,"mat-form-field")(26,"mat-select",9),ta(27,Cx,2,2,"mat-option",5,ka),Gn(),Nn(29,"mat-label"),yr(30,"Copy Number Column"),Gn()()()),ht&2){let xt=Br(2);Nr("formGroup",xt.formSearchedColumn),_r(3),na(xt.columns),_r(6),na(xt.columns),_r(6),na(xt.columns),_r(6),na(xt.columns),_r(6),na(xt.columns)}}function Lx(ht,qe){if(ht&1&&fi(0,xx,19,1,"form",3)(1,Tx,19,1,"form",3)(2,Ex,31,1,"form",3),ht&2){let xt=Br();hi(xt.file.file_category==="df"?0:xt.file.file_category==="searched"?1:xt.file.file_category==="copy_number"?2:-1)}}var Dg=(()=>{let qe=class qe{set file(F){this._file=F,F.extra_data&&(console.log(F.extra_data),F.file_category==="df"?(this.formDFColumn.controls.primary_id_col.setValue(F.extra_data.primary_id_col),this.formDFColumn.controls.gene_name_col.setValue(F.extra_data.gene_name_col),this.formDFColumn.controls.uniprot_id_col.setValue(F.extra_data.uniprot_id_col),this.formDFColumn.controls.peptide_seq_col.setValue(F.extra_data.peptide_seq_col),this.formDFColumn.controls.modification_position_in_peptide_col.setValue(F.extra_data.modification_position_in_peptide_col),this.formDFColumn.controls.modification_position_in_protein_col.setValue(F.extra_data.modification_position_in_protein_col),this.formDFColumn.controls.localization_prob_col.setValue(F.extra_data.localization_prob_col),console.log(this.formDFColumn.value)):F.file_category==="searched"?(this.formSearchedColumn.controls.primary_id_col.setValue(F.extra_data.primary_id_col),this.formSearchedColumn.controls.gene_name_col.setValue(F.extra_data.gene_name_col),this.formSearchedColumn.controls.uniprot_id_col.setValue(F.extra_data.uniprot_id_col)):F.file_category==="copy_number"&&(this.formCopyNumberColumn.controls.primary_id_col.setValue(F.extra_data.primary_id_col),this.formCopyNumberColumn.controls.gene_name_col.setValue(F.extra_data.gene_name_col),this.formCopyNumberColumn.controls.uniprot_id_col.setValue(F.extra_data.uniprot_id_col),this.formCopyNumberColumn.controls.rank_col.setValue(F.extra_data.rank_col),this.formCopyNumberColumn.controls.copy_number_col.setValue(F.extra_data.copy_number_col))),this.web.getProjectFileColumns(F.id).subscribe(C=>{this.columns=C})}get file(){return this._file}constructor(F,C,e){this.fb=F,this.matDialogRef=C,this.web=e,this._file=void 0,this.formDFColumn=this.fb.group({primary_id_col:new $r("",zi.required),gene_name_col:new $r(""),uniprot_id_col:new $r(""),peptide_seq_col:new $r(""),modification_position_in_peptide_col:new $r(""),modification_position_in_protein_col:new $r(""),localization_prob_col:new $r("")}),this.formSearchedColumn=this.fb.group({primary_id_col:new $r("",zi.required),gene_name_col:new $r(""),uniprot_id_col:new $r("")}),this.formCopyNumberColumn=this.fb.group({primary_id_col:new $r("",zi.required),gene_name_col:new $r(""),uniprot_id_col:new $r(""),rank_col:new $r(""),copy_number_col:new $r("")}),this.columns=[]}save(){let F={file_category:this.file.file_category,extra_data:{}};this.file.file_category==="df"?(this.formDFColumn.controls.uniprot_id_col.value&&(F.extra_data.uniprot_id_col=this.formDFColumn.controls.uniprot_id_col.value),this.formDFColumn.controls.primary_id_col.value&&(F.extra_data.primary_id_col=this.formDFColumn.controls.primary_id_col.value),this.formDFColumn.controls.gene_name_col.value&&(F.extra_data.gene_name_col=this.formDFColumn.controls.gene_name_col.value)):this.file.file_category==="searched"&&(this.formSearchedColumn.controls.uniprot_id_col.value&&(F.extra_data.uniprot_id_col=this.formSearchedColumn.controls.uniprot_id_col.value),this.formSearchedColumn.controls.primary_id_col.value&&(F.extra_data.primary_id_col=this.formSearchedColumn.controls.primary_id_col.value),this.formSearchedColumn.controls.gene_name_col.value&&(F.extra_data.gene_name_col=this.formSearchedColumn.controls.gene_name_col.value)),this.matDialogRef.close(F)}cancel(){this.matDialogRef.close()}};qe.\u0275fac=function(C){return new(C||qe)(hr(ac),hr(Vc),hr(yl))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-file-extra-data-modal"]],inputs:{file:"file"},standalone:!0,features:[Yi],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-button","",3,"click"],[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["formControlName","primary_id_col"],[3,"value"],["formControlName","gene_name_col"],["formControlName","uniprot_id_col"],["formControlName","rank_col"],["formControlName","copy_number_col"]],template:function(C,e){C&1&&(Nn(0,"h2",0),yr(1,"File Extra Data"),Gn(),Nn(2,"div",1),fi(3,Lx,3,1),Gn(),Nn(4,"mat-dialog-actions")(5,"button",2),Jr("click",function(){return e.save()}),yr(6,"Submit"),Gn(),Nn(7,"button",2),Jr("click",function(){return e.cancel()}),yr(8,"Close"),Gn()()),C&2&&(_r(3),hi(e.file?3:-1))},dependencies:[Hc,Gc,vl,ml,nc,pl,rc,ic,oc,Uc,Yc,sc,qc,tc]});let ht=qe;return ht})();var zx=Av(Og());var Ix=["plot"],Px=["*"],Xa=class ht{static setModuleName(qe){ht.moduleName=qe}static getModuleName(){return ht.moduleName}static setPlotly(qe){if(typeof qe=="object"&&typeof qe.react!="function")throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");ht.plotly=qe}static insert(qe){return ht.instances.indexOf(qe)===-1&&ht.instances.push(qe),qe}static remove(qe){let xt=ht.instances.indexOf(qe);xt>=0&&(ht.instances.splice(xt,1),ht.plotly.purge(qe))}getInstanceByDivId(qe){for(let xt of ht.instances)if(xt&&xt.id===qe)return xt}getPlotly(){return Uu(this,null,function*(){return yield this.waitFor(()=>this._getPlotly()!=="waiting"),this._getPlotly()})}_getPlotly(){if(typeof ht.plotly>"u"){let qe=ht.moduleName==="ViaCDN"?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed";throw new Error(qe)}return ht.plotly}waitFor(qe){return new Promise(xt=>{let F=()=>{qe()?xt():setTimeout(F,10)};F()})}newPlot(qe,xt,F,C,e){return Uu(this,null,function*(){if(yield this.waitFor(()=>this._getPlotly()!=="waiting"),e){let T={data:xt,layout:F,config:C,frames:e};return this._getPlotly().newPlot(qe,T).then(()=>ht.insert(qe))}return this._getPlotly().newPlot(qe,xt,F,C).then(()=>ht.insert(qe))})}plot(qe,xt,F,C,e){if(e){let T={data:xt,layout:F,config:C,frames:e};return this._getPlotly().newPlot(qe,T)}return this._getPlotly().newPlot(qe,xt,F,C)}update(qe,xt,F,C,e){if(e){let T={data:xt,layout:F,config:C,frames:e};return this._getPlotly().react(qe,T)}return this._getPlotly().react(qe,xt,F,C)}resize(qe){return this._getPlotly().Plots.resize(qe)}};Xa.instances=[];Xa.plotly=void 0;Xa.moduleName=void 0;Xa.\u0275fac=function(qe){return new(qe||Xa)};Xa.\u0275prov=Ef({token:Xa,factory:Xa.\u0275fac,providedIn:"root"});var Dx=(()=>{class ht{constructor(){this._isLoading=!1}get isLoading(){return this._isLoading}load(xt){return this._isLoading=!0,new Promise(F=>{F(!0)})}}return ht.\u0275fac=function(xt){return new(xt||ht)},ht.\u0275prov=Ef({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})(),Rg=(()=>{class ht{constructor(xt,F,C,e){this.plotly=xt,this.themeLoader=F,this.iterableDiffers=C,this.keyValueDiffers=e,this.defaultClassName="js-plotly-plot",this.theme="none",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new qr,this.update=new qr,this.purge=new qr,this.error=new qr,this.afterExport=new qr,this.afterPlot=new qr,this.animated=new qr,this.animatingFrame=new qr,this.animationInterrupted=new qr,this.autoSize=new qr,this.beforeExport=new qr,this.beforeHover=new qr,this.buttonClicked=new qr,this.click=new qr,this.plotlyClick=new qr,this.clickAnnotation=new qr,this.deselect=new qr,this.doubleClick=new qr,this.framework=new qr,this.hover=new qr,this.legendClick=new qr,this.legendDoubleClick=new qr,this.react=new qr,this.relayout=new qr,this.relayouting=new qr,this.restyle=new qr,this.redraw=new qr,this.selected=new qr,this.selecting=new qr,this.sliderChange=new qr,this.sliderEnd=new qr,this.sliderStart=new qr,this.sunburstclick=new qr,this.transitioning=new qr,this.transitionInterrupted=new qr,this.unhover=new qr,this.treemapclick=new qr,this.webglcontextlost=new qr,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","beforeHover","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","relayouting","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","sunburstclick","transitioning","transitionInterrupted","unhover","treemapclick","webglcontextlost"]}ngOnInit(){this.createPlot().then(()=>{let xt=this.createFigure();this.initialized.emit(xt)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){if(typeof this.resizeHandler=="function"&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0),this.plotlyInstance){let xt=this.createFigure();this.purge.emit(xt),Xa.remove(this.plotlyInstance)}}ngOnChanges(xt){let F=!1,C=xt.revision;C&&!C.isFirstChange()&&(F=!0);let e=xt.debug;e&&!e.isFirstChange()&&(F=!0),F&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let xt=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(xt=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(xt=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=void 0),xt&&this.plotlyInstance&&this.updatePlot()}getData(){return this.data??[]}getWindow(){return window}getClassName(){let xt=[this.defaultClassName];return Array.isArray(this.className)?xt=xt.concat(this.className):this.className&&xt.push(this.className),xt.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.getData(),this.layout,this.config,this.frames).then(xt=>{this.plotlyInstance=xt,this.getWindow().gd=this.debug?xt:void 0,this.eventNames.forEach(F=>{let C=`plotly_${F.toLowerCase()}`,e=this[F];xt.on(C,T=>e.emit(T))}),xt.on("plotly_click",F=>{this.plotlyClick.emit(F)}),this.updateWindowResizeHandler()},xt=>{console.error("Error while plotting:",xt),this.error.emit(xt)})}createFigure(){let xt=this.plotlyInstance;return{data:xt.data,layout:xt.layout,frames:xt._transitionData?xt._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){let F=new Error("Plotly component wasn't initialized");throw this.error.emit(F),F}let xt=X0({},this.layout);return this.plotly.update(this.plotlyInstance,this.getData(),xt,this.config,this.frames).then(()=>{let F=this.createFigure();this.update.emit(F)},F=>{console.error("Error while updating plot:",F),this.error.emit(F)})}updateWindowResizeHandler(){this.useResizeHandler?this.resizeHandler===void 0&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):typeof this.resizeHandler=="function"&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(xt,F){let C=Object.assign({},F,{uid:""});return JSON.stringify(C)}loadTheme(){this.layout!==void 0&&console.warn("You fulfill both `theme` and `layout` properties. This will overwrite the `layout` data with the `theme` data."),this.themeLoader.load(this.theme).then(xt=>this.layout=xt)}}return ht.\u0275fac=function(xt){return new(xt||ht)(hr(Xa),hr(Dx),hr(jc),hr(fm))},ht.\u0275cmp=Ri({type:ht,selectors:[["plotly-plot"]],viewQuery:function(xt,F){if(xt&1&&us(Ix,7),xt&2){let C;ca(C=ua())&&(F.plotEl=C.first)}},inputs:{data:"data",layout:"layout",config:"config",frames:"frames",style:"style",theme:"theme",divId:"divId",revision:"revision",className:"className",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",beforeHover:"beforeHover",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",relayouting:"relayouting",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",sunburstclick:"sunburstclick",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",treemapclick:"treemapclick",webglcontextlost:"webglcontextlost"},features:[oo([Xa]),Bc],ngContentSelectors:Px,decls:3,vars:3,consts:[["plot",""],[3,"ngClass","ngStyle"]],template:function(xt,F){xt&1&&(ec(),Nn(0,"div",1,0),Ps(2),Gn()),xt&2&&(Nr("ngClass",F.getClassName())("ngStyle",F.style),Nc("id",F.divId))},dependencies:[hm,dm],encapsulation:2}),ht})(),id=(()=>{class ht{constructor(){}}return ht.\u0275fac=function(xt){return new(xt||ht)},ht.\u0275mod=Fc({type:ht}),ht.\u0275inj=zc({providers:[Xa],imports:[Ph]}),ht})(),mp=(()=>{class ht{constructor(){if(!this.isValid()){let xt="Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.";throw new Error(xt)}Xa.setPlotly(ht.plotlyjs)}isValid(){return ht.plotlyjs!==void 0&&(typeof ht.plotlyjs.plot=="function"||typeof ht.plotlyjs.newPlot=="function")}}return ht.plotlyjs={},ht.\u0275fac=function(xt){return new(xt||ht)},ht.\u0275mod=Fc({type:ht}),ht.\u0275inj=zc({providers:[Xa],imports:[Ph,id,id]}),ht})(),uc=class ht{constructor(qe){this.plotlyService=qe,Xa.setModuleName("ViaCDN")}static setPlotlyVersion(qe,xt="plotly",F=""){if(!(qe==="latest"||/^(strict-)?\d\.\d{1,2}\.\d{1,2}$/.test(qe)))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3) or strict version number (i.e.: strict-1.4.3)");ht.loadViaCDN(xt,F),ht.plotlyVersion=qe}static setPlotlyBundle(qe){if(!(qe===null||ht.plotlyBundleNames.indexOf(qe)>=0)){let F=ht.plotlyBundleNames.map(C=>`"${C}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${F} for a partial bundle.`)}ht.plotlyBundle=qe}static loadViaCDN(qe="plotly",xt=""){Xa.setPlotly("waiting"),setTimeout(()=>{let C="";switch(qe){case"cloudflare":if(ht.plotlyVersion=="latest")throw new Error("As cloudflare hosts version specific files, 'latest' as a version is not supported. Please specify a version or you can choose 'plotly' as a CDN provider.");C=ht.plotlyBundle==null?`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${ht.plotlyVersion}/plotly.min.js`:`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${ht.plotlyVersion}/plotly-${ht.plotlyBundle}.min.js`;break;case"custom":if(!(xt&&typeof xt=="string"))throw new Error("Invalid or missing CDN URL. Please provide a CDN URL in case of custom provider. Alternatively, you can choose from 'plotly' or 'cloudflare'.");C=xt;break;default:C=ht.plotlyBundle==null?`https://cdn.plot.ly/plotly-${ht.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${ht.plotlyBundle}-${ht.plotlyVersion}.min.js`;break}let e=document.createElement("script");e.type="text/javascript",e.src=C,e.onerror=()=>console.error(`Error loading plotly.js library from ${C}`),document.getElementsByTagName("head")[0].appendChild(e);let k=200,a=()=>{let w=window.Plotly;if(w)Xa.setPlotly(w);else if(k>0)k--,setTimeout(a,50);else throw new Error(`Error loading plotly.js library from ${C}. Timeout.`)};a()})}};uc.plotlyBundle=void 0;uc.plotlyVersion="latest";uc.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"];uc.\u0275fac=function(qe){return new(qe||uc)(Ch(Xa))};uc.\u0275mod=Fc({type:uc});uc.\u0275inj=zc({providers:[Xa],imports:[Ph,id,id]});mp.plotlyjs=zx;var zg=(()=>{let qe=class qe{set curtainData(F){this._curtainData=F,this.drawVolcanoPlot()}get curtainData(){return this._curtainData}constructor(F,C){this.accounts=F,this.graph=C,this.selected=new qr,this._curtainData=void 0,this.graphData=[],this.graphLayout={height:700,width:700,margin:{r:null,l:null,b:null,t:null},xaxis:{title:"<b>Log2FC</b>",tickmode:"linear",ticklen:5,showgrid:!1,visible:!0,tickfont:{size:14,color:"black"}},yaxis:{title:"<b>-log10(p-value)</b>",tickmode:"linear",ticklen:5,showgrid:!1,visible:!0,showticklabels:!0,zeroline:!0,tickfont:{size:14,color:"black"}},annotations:[],showlegend:!0,legend:{orientation:"h"},title:{text:"",font:{size:24,family:"Arial, sans-serif",color:"black"}}},this.revision=0,this.config={toImageButtonOptions:{format:"svg",filename:this.graphLayout.title.text,height:this.graphLayout.height,width:this.graphLayout.width,scale:1}},this.colorMap={},this.graph.redrawTrigger.subscribe(()=>{this.drawVolcanoPlot()})}drawVolcanoPlot(){if(!this.curtainData&&!this.curtainData.settings)return;this.graphLayout.title.text=this.curtainData.settings.title,this.colorMap=this.curtainData.settings.colorMap;let F=Object.keys(this.colorMap),C=Math.min(...this.curtainData.data.map(n=>n["Fold Change"])),e=Math.max(...this.curtainData.data.map(n=>n["Fold Change"])),T=0,k=Math.max(...this.curtainData.data.map(n=>n["P-value"]));this.graphLayout.xaxis.range=[C-.5,e+.5],this.graphLayout.yaxis.range=[T,k-T*.5];let a=this.curtainData.settings.volcanoAxis;a.minX&&(this.graphLayout.xaxis.range[0]=a.minX),a.maxX&&(this.graphLayout.xaxis.range[1]=a.maxX),a.minY&&(this.graphLayout.yaxis.range[0]=a.minY),a.maxY&&(this.graphLayout.yaxis.range[1]=a.maxY),a.x&&(this.graphLayout.xaxis.title=`<b>${a.x}</b>`),a.y&&(this.graphLayout.yaxis.title=`<b>${a.y}</b>`);let w={};w.Background={x:[],y:[],mode:"markers",type:"scatter",name:"Background",text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:"#a4a2a2",opacity:.3}};for(let n of this.curtainData.selections)w[n]={x:[],y:[],mode:"markers",type:"scatter",name:n,text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:this.curtainData.settings.colorMap[n]}};this.curtainData.data.forEach(n=>{if(n["Primary ID"]in this.curtainData.selection_map){let o=this.curtainData.selection_map[n["Primary ID"]];for(let l of this.curtainData.selections)o[l]&&(w[l].x.push(n["Fold Change"]),w[l].y.push(n["P-value"]),w[l].text.push(`${n["Gene Names"]}(${n["Primary ID"]})`),w[l].data.push(n))}else if(this.curtainData.settings.backGroundColorGrey)w.Background.x.push(n["Fold Change"]),w.Background.y.push(n["P-value"]),w.Background.text.push(`${n["Gene Names"]}(${n["Primary ID"]})`),w.Background.data.push(n);else{let o=this.significantGroup(n["Fold Change"],n["P-value"]),l=F.find(c=>c.startsWith(o[0]));l&&(w[l]||(w[l]={x:[],y:[],mode:"markers",type:"scatter",name:l,text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:this.curtainData.settings.colorMap[l]}}),w[l].x.push(n["Fold Change"]),w[l].y.push(n["P-value"]),w[l].text.push(`${n["Gene Names"]}(${n["Primary ID"]})`),w[l].data.push(n))}}),this.graphData=[];for(let n in w)this.graphData.push(w[n]);this.graphData=this.graphData.reverse();let b=[];b.push({type:"line",x0:-this.curtainData.settings.log2FCCutoff,y0:0,x1:-this.curtainData.settings.log2FCCutoff,y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1,dash:"dot"}}),b.push({type:"line",x0:this.curtainData.settings.log2FCCutoff,x1:this.curtainData.settings.log2FCCutoff,y0:0,y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1,dash:"dot"}});let f=this.graphLayout.xaxis.range[0]-1;this.curtainData.settings.volcanoAxis.minX&&(f=this.curtainData.settings.volcanoAxis.minX-1);let s=this.graphLayout.xaxis.range[1]+1;if(this.curtainData.settings.volcanoAxis.maxX&&(s=this.curtainData.settings.volcanoAxis.maxX+1),b.push({type:"line",x0:f,x1:s,y0:-Math.log10(this.curtainData.settings.pCutoff),y1:-Math.log10(this.curtainData.settings.pCutoff),line:{color:"rgb(21,4,4)",width:1,dash:"dot"}}),this.graphLayout.shapes=b,this.curtainData.settings.volcanoPlotGrid&&(this.graphLayout.yaxis.showgrid=this.curtainData.settings.volcanoPlotGrid.y,this.graphLayout.xaxis.showgrid=this.curtainData.settings.volcanoPlotGrid.x),this.curtainData.settings.volcanoPlotDimension&&(this.curtainData.settings.volcanoPlotDimension.height&&(this.graphLayout.height=this.curtainData.settings.volcanoPlotDimension.height),this.curtainData.settings.volcanoPlotDimension.width&&(this.graphLayout.width=this.curtainData.settings.volcanoPlotDimension.width),this.curtainData.settings.volcanoPlotDimension.margin))for(let n in this.curtainData.settings.volcanoPlotDimension.margin)this.curtainData.settings.volcanoPlotDimension.margin[n]&&(this.graphLayout.margin[n]=this.curtainData.settings.volcanoPlotDimension.margin[n]);if(this.curtainData.settings.volcanoPlotYaxisPosition&&(this.curtainData.settings.volcanoPlotYaxisPosition.includes("left")&&this.graphLayout.shapes.push({type:"line",x0:this.graphLayout.xaxis.range[0],x1:this.graphLayout.xaxis.range[0],y0:this.graphLayout.yaxis.range[0],y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1}}),this.curtainData.settings.volcanoPlotYaxisPosition.includes("middle")?this.graphLayout.xaxis.zerolinecolor="#000000":this.graphLayout.xaxis.zerolinecolor="#ffffff"),this.graphLayout.annotations=[],this.curtainData.settings.textAnnotation)for(let n in this.curtainData.settings.textAnnotation)this.curtainData.settings.textAnnotation[n].data.showannotation===!0&&this.graphLayout.annotations.push(this.curtainData.settings.textAnnotation[n].data);this.config={toImageButtonOptions:{format:"svg",filename:this.graphLayout.title.text,height:this.graphLayout.height,width:this.graphLayout.width,scale:1,margin:this.graphLayout.margin}};let t=document.getElementsByTagName("body")[0],r=window.getComputedStyle(t).backgroundColor;if(this.accounts.userAccount.darkMode){this.graphLayout.plot_bgcolor=r,this.graphLayout.paper_bgcolor=r,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white";for(let n of this.graphLayout.shapes)n.line.color="white";this.graphLayout.yaxis.showgrid&&(this.graphLayout.yaxis.gridcolor="white"),this.graphLayout.xaxis.showgrid&&(this.graphLayout.xaxis.gridcolor="white");for(let n of this.graphLayout.annotations)n.font.color="white",n.arrowcolor="white"}else this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14};this.revision+=1,console.log("cutoff",b)}significantGroup(F,C){let e=-Math.log10(this.curtainData.settings.pCutoff),T=[],k="";return e>C?(T.push("P-value > "+this.curtainData.settings.pCutoff),k="P-value > "):(T.push("P-value <= "+this.curtainData.settings.pCutoff),k="P-value <= "),Math.abs(F)>this.curtainData.settings.log2FCCutoff?(T.push("FC > "+this.curtainData.settings.log2FCCutoff),k+="FC > "):(T.push("FC <= "+this.curtainData.settings.log2FCCutoff),k+="FC <= "),[T.join(";"),k]}selectData(F){if("points"in F){let C=[];for(let e of F.points)C.push(e.data.data[e.pointIndex]);this.selected.emit(C)}}};qe.\u0275fac=function(C){return new(C||qe)(hr(Uh),hr(Bm))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-volcano-plot"]],inputs:{curtainData:"curtainData"},outputs:{selected:"selected"},standalone:!0,features:[Yi],decls:1,vars:5,consts:[[3,"selected","plotlyClick","data","config","layout","revision","updateOnlyWithRevision"]],template:function(C,e){C&1&&(Nn(0,"plotly-plot",0),Jr("selected",function(k){return e.selectData(k)})("plotlyClick",function(k){return e.selectData(k)}),Gn()),C&2&&Nr("data",e.graphData)("config",e.config)("layout",e.graphLayout)("revision",e.revision)("updateOnlyWithRevision",!0)},dependencies:[mp,Rg]});let ht=qe;return ht})();function Fx(ht,qe){if(ht&1){let xt=ya();Nn(0,"div",0)(1,"app-volcano-plot",3),Jr("selected",function(C){ri(xt);let e=Br();return ii(e.handleVolcanoSelection(C))}),Gn()()}if(ht&2){let xt=Br();_r(),Nr("curtainData",xt.curtainData)}}function Bx(ht,qe){if(ht&1&&(Nn(0,"p"),yr(1," Associated Project: "),Nn(2,"a",18),yr(3),Gn()()),ht&2){let xt=Br(2);_r(2),lm("href","/#/project/",xt.analysisGroup.project,"",om),_r(),ra(xt.associatedProject.name)}}function Nx(ht,qe){if(ht&1&&(Nn(0,"p"),yr(1),Gn(),Wi(2,"mat-progress-bar",19)),ht&2){let xt=Br(2);_r(),ra(xt.composingCurtainProgress.message),_r(),Nr("value",xt.composingCurtainProgress.progress)("mode","determinate")("color","primary")}}function jx(ht,qe){if(ht&1){let xt=ya();Nn(0,"button",20),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.composeDataFromCurtain())}),yr(1,"Use Curtain Link For Data"),Gn()}if(ht&2){let xt=Br(2);Nr("disabled",!xt.accounts.loggedIn)}}function Ux(ht,qe){if(ht&1&&yr(0),ht&2){let xt=Br(2);dl(": ",xt.analysisGroupDF.name,"")}}function Vx(ht,qe){if(ht&1){let xt=ya();Nn(0,"app-upload-file",21),Jr("fileUploaded",function(C){ri(xt);let e=Br(2);return ii(e.handleFileUploaded(C,"df"))}),Gn()}if(ht&2){let xt=Br(2);Nr("analysisGroupId",xt.analysisGroup.id)("fileCategory","df")}}function Hx(ht,qe){if(ht&1){let xt=ya();Nn(0,"button",22),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.deleteFile(C.analysisGroupDF))}),Nn(1,"mat-icon"),yr(2,"delete"),Gn()(),Nn(3,"button",23),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.openExtraDataModal(C.analysisGroupDF))}),yr(4,"Extra Data"),Gn()}if(ht&2){let xt=Br(2);_r(3),Nr("disabled",!xt.accounts.loggedIn)}}function Gx(ht,qe){if(ht&1&&yr(0),ht&2){let xt=Br(2);dl(": ",xt.analysisGroupSearched.name,"")}}function qx(ht,qe){if(ht&1){let xt=ya();Nn(0,"app-upload-file",21),Jr("fileUploaded",function(C){ri(xt);let e=Br(2);return ii(e.handleFileUploaded(C,"searched"))}),Gn()}if(ht&2){let xt=Br(2);Nr("analysisGroupId",xt.analysisGroup.id)("fileCategory","searched")}}function Wx(ht,qe){if(ht&1){let xt=ya();Nn(0,"button",22),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.deleteFile(C.analysisGroupSearched))}),Nn(1,"mat-icon"),yr(2,"delete"),Gn()(),Nn(3,"button",23),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.openExtraDataModal(C.analysisGroupSearched))}),yr(4,"Extra Data"),Gn()}if(ht&2){let xt=Br(2);_r(3),Nr("disabled",!xt.accounts.loggedIn)}}function Yx(ht,qe){if(ht&1&&yr(0),ht&2){let xt=Br(2);dl(": ",xt.analysisGroupCopyNumber.name,"")}}function Xx(ht,qe){if(ht&1){let xt=ya();Nn(0,"app-upload-file",21),Jr("fileUploaded",function(C){ri(xt);let e=Br(2);return ii(e.handleFileUploaded(C,"copy_number"))}),Gn()}if(ht&2){let xt=Br(2);Nr("analysisGroupId",xt.analysisGroup.id)("fileCategory","copy_number")}}function Zx(ht,qe){if(ht&1){let xt=ya();Nn(0,"button",22),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.deleteFile(C.analysisGroupCopyNumber))}),Nn(1,"mat-icon"),yr(2,"delete"),Gn()(),Nn(3,"button",23),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.openExtraDataModal(C.analysisGroupCopyNumber))}),yr(4,"Extra Data"),Gn()}if(ht&2){let xt=Br(2);_r(3),Nr("disabled",!xt.accounts.loggedIn)}}function Kx(ht,qe){if(ht&1&&yr(0),ht&2){let xt=Br(3);dl("(",xt.sampleAnnotations.annotations.length,")")}}function Jx(ht,qe){if(ht&1){let xt=ya();Nn(0,"button",23),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.setAnnotationModal(C.analysisGroupSearched))}),yr(1,"Sample Annotation "),fi(2,Kx,1,1),Gn()}if(ht&2){let xt=Br(2);Nr("disabled",!xt.accounts.loggedIn),_r(2),hi(xt.sampleAnnotations?2:-1)}}function $x(ht,qe){if(ht&1&&yr(0),ht&2){let xt=Br(3);dl("(",xt.comparisonMatrix.matrix.length,")")}}function Qx(ht,qe){if(ht&1){let xt=ya();Nn(0,"button",23),Jr("click",function(){ri(xt);let C=Br(2);return ii(C.setComparisonMatrixModal(C.sampleAnnotations,C.analysisGroupSearched,C.analysisGroupDF))}),yr(1,"Comparison Matrix "),fi(2,$x,1,1),Gn()}if(ht&2){let xt=Br(2);Nr("disabled",!xt.accounts.loggedIn),_r(2),hi(xt.comparisonMatrix?2:-1)}}function e2(ht,qe){if(ht&1){let xt=ya();fi(0,Bx,4,3,"p"),Nn(1,"form",4),Jr("ngSubmit",function(){ri(xt);let C=Br();return ii(C.updateAnalysisGroup())}),Nn(2,"mat-form-field",2),Wi(3,"input",5),Nn(4,"mat-label"),yr(5,"Analysis Group Name"),Gn()(),Nn(6,"mat-form-field",2),Wi(7,"textarea",6),Nn(8,"mat-label"),yr(9,"Analysis Group Description"),Gn()(),Nn(10,"div",7)(11,"mat-form-field",2),Wi(12,"input",8),Nn(13,"mat-label"),yr(14,"Curtain Link"),Gn()(),Nn(15,"button",9),Jr("click",function(){ri(xt);let C=Br();return ii(C.refreshCurtainLink())}),Nn(16,"mat-icon"),yr(17,"refresh"),Gn()()(),fi(18,Nx,3,4),Nn(19,"div",7)(20,"button",10),yr(21,"Update Analysis Group"),Gn(),fi(22,jx,2,1,"button",11),Gn()(),Nn(23,"div",12)(24,"div")(25,"p"),yr(26,"Differential Analysis File "),fi(27,Ux,1,1),Gn()(),fi(28,Vx,1,2,"app-upload-file",13)(29,Hx,5,1),Gn(),Nn(30,"div",12)(31,"div")(32,"p"),yr(33,"Searched File "),fi(34,Gx,1,1),Gn()(),fi(35,qx,1,2,"app-upload-file",13)(36,Wx,5,1),Gn(),Nn(37,"div",12)(38,"div")(39,"p"),yr(40,"Copy Number File "),fi(41,Yx,1,1),Gn()(),fi(42,Xx,1,2,"app-upload-file",13)(43,Zx,5,1),Gn(),Nn(44,"div",14),fi(45,Jx,3,2,"button",15)(46,Qx,3,2,"button",15),Nn(47,"button",16),Jr("click",function(){ri(xt);let C=Br();return ii(C.openSearchModal())}),Nn(48,"mat-icon"),yr(49,"search"),Gn()(),Nn(50,"button",17),Jr("click",function(){ri(xt);let C=Br();return ii(C.deleteAnalysisGroup())}),Nn(51,"mat-icon"),yr(52,"delete"),Gn()()()}if(ht&2){let xt=Br();hi(xt.associatedProject?0:-1),_r(),Nr("formGroup",xt.form),_r(14),Nr("disabled",!xt.accounts.loggedIn),_r(3),hi(xt.composingCurtainProgress.started?18:-1),_r(2),Nr("disabled",!xt.accounts.loggedIn),_r(2),hi(xt.analysisGroup.curtain_link?22:-1),_r(5),hi(xt.analysisGroupDF?27:-1),_r(),hi(xt.accounts.loggedIn?28:-1),_r(),hi(xt.analysisGroupDF?29:-1),_r(5),hi(xt.analysisGroupSearched?34:-1),_r(),hi(xt.accounts.loggedIn?35:-1),_r(),hi(xt.analysisGroupSearched?36:-1),_r(5),hi(xt.analysisGroupCopyNumber?41:-1),_r(),hi(xt.accounts.loggedIn?42:-1),_r(),hi(xt.analysisGroupCopyNumber?43:-1),_r(2),hi(xt.analysisGroupSearched?45:-1),_r(),hi(xt.sampleAnnotations&&xt.analysisGroupSearched&&xt.analysisGroupDF?46:-1),_r(4),Nr("disabled",!xt.accounts.loggedIn)}}var o3=(()=>{let qe=class qe{set analysisGroup(F){this._analysisGroup=F,this.curtainData=void 0,F&&(F.curtain_link&&this.getCurtainData(),this.dataService.analysisGroupChoices.forEach(C=>{C.value===F.analysis_group_type&&(this.analysisType=C.label)}),this.titleService.setTitle(`AG - ${F.name}`),this.web.getProject(F.project).subscribe(C=>{this.associatedProject=C}),this.form.controls.name.setValue(F.name),this.form.controls.description.setValue(F.description),this.form.controls.curtain_link.setValue(F.curtain_link),this.getFiles(F))}getFiles(F){this.web.getAnalysisGroupFiles(F.id).subscribe(C=>{this.analysisGroupDF=C.find(e=>e.file_category==="df"),this.analysisGroupSearched=C.find(e=>e.file_category==="searched"),this.analysisGroupSearched&&this.web.getProjectFileSampleAnnotations(this.analysisGroupSearched.id).subscribe(e=>{this.sampleAnnotations=e}),this.analysisGroupDF&&this.web.getProjectFileComparisonMatrix(this.analysisGroupDF.id).subscribe(e=>{this.comparisonMatrix=e})})}get analysisGroup(){return this._analysisGroup}constructor(F,C,e,T,k,a,w,b){this.sb=F,this.dataService=C,this.titleService=e,this.fb=T,this.web=k,this.matDialog=a,this.accounts=w,this.ws=b,this.analysisType="proteomics",this.composingCurtainProgress={progress:0,message:"",completed:!1,error:!1,started:!1},this.deleted=new qr,this.updated=new qr,this.form=this.fb.group({name:new $r({value:"",disabled:!this.accounts.loggedIn},{validators:[zi.required]}),description:new $r({value:"",disabled:!this.accounts.loggedIn},{validators:[zi.required]}),curtain_link:new $r({value:"",disabled:!this.accounts.loggedIn})}),this.ws.curtainWSConnection?.subscribe(f=>{if(f.analysis_group_id===this.analysisGroup?.id){if(f.type==="curtain_status")switch(f.status){case"started":this.sb.open("Curtain link retrieval started","Dismiss",{duration:5e3});break;case"complete":this.sb.open("Curtain link retrieval complete","Dismiss",{duration:5e3}),this.getCurtainData();break}else if(f.type==="curtain_compose_status")switch(f.status){case"started":this.sb.open("Composing data from Curtain started","Dismiss",{duration:5e3}),this.composingCurtainProgress.progress=30,this.composingCurtainProgress.message="Removed analysis group associated data if exist";break;case"complete":this.sb.open("Composing data from Curtain completed. Please manually set Condition A and Condition B in Comparison Matrix.","Dismiss"),this.composingCurtainProgress.progress=100,this.composingCurtainProgress.message="Composing data from Curtain completed. Please manually set Condition A and Condition B in Comparison Matrix.",this.composingCurtainProgress.completed=!0,this.web.getAnalysisGroup(this.analysisGroup.id).subscribe(s=>{this.analysisGroup=s});break;case"error":this.sb.open("Error composing data from Curtain","Dismiss",{duration:5e3}),this.composingCurtainProgress.error=!0;break}}})}updateAnalysisGroup(){this.form.invalid||this.web.updateAnalysisGroup(this.analysisGroup.id,this.form.value.name,this.form.value.description,this.form.value.curtain_link,this.web.searchSessionID).subscribe(F=>{this.updated.emit(F)})}getCurtainData(){this.analysisGroup&&(this.sb.open("Retrieving curtain visualization","Dismiss",{duration:5e3}),this.web.getCurtainLinkData(this.analysisGroup.id).subscribe(F=>{this.curtainData=F,this.sb.open("Curtain visualization retrieved","Dismiss",{duration:5e3})},F=>{this.sb.open("Error retrieving curtain visualization","Dismiss",{duration:5e3}),this.curtainData=void 0}))}handleFileUploaded(F,C){C==="searched"?(this.analysisGroupSearched=F,this.sb.open("Searched File uploaded","Dismiss",{duration:5e3})):C==="df"?(this.analysisGroupDF=F,this.sb.open("Differential Analysis File uploaded","Dismiss",{duration:5e3})):C==="copy_number"&&(this.analysisGroupCopyNumber=F,this.sb.open("Copy Number Analysis File uploaded","Dismiss",{duration:5e3}))}setAnnotationModal(F){let C=this.matDialog.open(Tg);C.componentInstance.projectFile=F,this.sampleAnnotations&&(C.componentInstance.annotation=this.sampleAnnotations),C.afterClosed().subscribe(e=>{e&&(console.log(this.sampleAnnotations),this.sampleAnnotations?this.web.updateSampleAnnotation(this.sampleAnnotations.id,this.sampleAnnotations.name,e).subscribe(T=>{this.sampleAnnotations=T,this.sb.open("Sample annotation updated","Dismiss",{duration:5e3})}):this.web.createSampleAnnotation(this.analysisGroup.id,this.analysisGroup?.name+" sample annotation",e,this.analysisGroupSearched.id).subscribe(T=>{this.sampleAnnotations=T,this.sb.open("Sample annotation created","Dismiss",{duration:5e3})}))})}setComparisonMatrixModal(F,C,e){let T=this.matDialog.open(Ig);T.componentInstance.sampleAnnotations=F,T.componentInstance.projectFile=e,this.comparisonMatrix&&(T.componentInstance.comparisonMatrix=this.comparisonMatrix),T.afterClosed().subscribe(k=>{k&&(this.comparisonMatrix?this.web.updateComparisonMatrix(this.comparisonMatrix.id,this.comparisonMatrix.name,k).subscribe(a=>{this.comparisonMatrix=a,this.sb.open("Comparison matrix updated","Dismiss",{duration:5e3})}):this.web.createComparisonMatrix(this.analysisGroup.id,this.analysisGroup?.name+" comparison matrix",k,e.id).subscribe(a=>{this.comparisonMatrix=a,this.sb.open("Comparison matrix created","Dismiss",{duration:5e3})}))})}deleteAnalysisGroup(){this.web.deleteAnalysisGroup(this.analysisGroup.id).subscribe(()=>{this.deleted.emit(!0),this.sb.open("Analysis Group deleted","Dismiss",{duration:5e3})})}openSearchModal(){let F=this.matDialog.open(Pg);F.componentInstance.analysisGroupIDs=[this.analysisGroup.id],F.afterClosed().subscribe(C=>{C&&window.open(`/#/search-session/${C}`,"_blank")})}openExtraDataModal(F){let C=this.matDialog.open(Dg);C.componentInstance.file=F,C.afterClosed().subscribe(e=>{e&&(console.log(e),this.web.updateProjectFileExtraData(F.id,e.extra_data).subscribe(T=>{F.file_category==="df"?(this.analysisGroupDF=T,this.sb.open("Differential Analysis extra data updated","Dismiss",{duration:5e3})):F.file_category==="searched"?(this.analysisGroupSearched=T,this.sb.open("Searched extra data updated","Dismiss",{duration:5e3})):F.file_category==="copy_number"&&(this.analysisGroupCopyNumber=T,this.sb.open("Copy Number extra data updated","Dismiss",{duration:5e3}))}))})}refreshCurtainLink(){this.analysisGroup&&this.web.searchSessionID&&this.web.refreshCurtainLink(this.analysisGroup.id,this.web.searchSessionID).subscribe(F=>{this.analysisGroup=F,this.sb.open("Curtain data content refreshed","Dismiss",{duration:5e3})})}handleVolcanoSelection(F){console.log(F)}composeDataFromCurtain(){this.composingCurtainProgress={progress:0,message:"",completed:!1,error:!1},this.analysisGroup&&this.web.searchSessionID&&(this.composingCurtainProgress.started=!0,this.web.composeAnalysisGroupFilesFromCurtainData(this.analysisGroup.id,this.web.searchSessionID).subscribe(F=>{this.composingCurtainProgress.progress=10,this.composingCurtainProgress.message="Data composition started",this.sb.open("Data composition started","Dismiss",{duration:5e3})}))}deleteFile(F){this.web.deleteProjectFile(F.id).subscribe(()=>{F.file_category==="df"?(this.analysisGroupDF=void 0,this.sb.open("Differential Analysis File deleted","Dismiss",{duration:5e3})):F.file_category==="searched"?(this.analysisGroupSearched=void 0,this.sb.open("Searched File deleted","Dismiss",{duration:5e3})):F.file_category==="copy_number"&&(this.analysisGroupCopyNumber=void 0,this.sb.open("Copy Number Analysis File deleted","Dismiss",{duration:5e3}))})}};qe.\u0275fac=function(C){return new(C||qe)(hr(Vh),hr(jh),hr(pm),hr(ac),hr(yl),hr(Am),hr(Uh),hr(Hh))},qe.\u0275cmp=Ri({type:qe,selectors:[["app-analysis-group-view"]],inputs:{analysisGroup:"analysisGroup"},outputs:{deleted:"deleted",updated:"updated"},standalone:!0,features:[Yi],decls:4,vars:2,consts:[[2,"display","flex","flex-direction","row","justify-content","center","flex-wrap","wrap"],[2,"display","flex","flex-direction","row","justify-content","center","padding","50px"],[2,"width","100%"],[3,"selected","curtainData"],[2,"display","flex","flex-direction","column","gap","20px","padding","20px",3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text","placeholder","Analysis Group Name"],["matInput","","formControlName","description","placeholder","Analysis Group Description"],[2,"display","flex","flex-direction","row","gap","10px"],["matInput","","formControlName","curtain_link","type","text","placeholder","Curtain Link"],["mat-icon-button","","type","button",3,"click","disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-flat-button","","color","primary","type","button",3,"disabled"],[2,"display","flex","flex-direction","row","gap","20px","align-items","center"],[3,"analysisGroupId","fileCategory"],[2,"display","flex","flex-direction","row","gap","20px","padding","20px"],["mat-flat-button","","color","primary",3,"disabled"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","",3,"click","disabled"],["target","_blank",3,"href"],[3,"value","mode","color"],["mat-flat-button","","color","primary","type","button",3,"click","disabled"],[3,"fileUploaded","analysisGroupId","fileCategory"],["mat-icon-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(C,e){C&1&&(fi(0,Fx,2,1,"div",0),Nn(1,"div",1)(2,"div",2),fi(3,e2,53,18),Gn()()),C&2&&(hi(e.curtainData?0:-1),_r(3),hi(e.analysisGroup?3:-1))},dependencies:[Nh,ml,Zu,nc,pl,tc,sc,Wu,Wc,oc,vl,rc,ic,og,Yu,zg,Yh]});let ht=qe;return ht})();export{s2 as a,dg as b,pg as c,mg as d,gg as e,vg as f,yg as g,xg as h,bg as i,_g as j,wg as k,Og as l,Rg as m,mp as n,o3 as o};
