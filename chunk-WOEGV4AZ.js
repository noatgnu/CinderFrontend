import{a as ve}from"./chunk-W7TZ24ZB.js";import{a as we}from"./chunk-VR42HVXH.js";import{a as Me,b as Ge,c as je,d as Ee,e as Pe,f as Ie}from"./chunk-V75HX4JS.js";import"./chunk-E7WCFS4V.js";import{a as Y,b as Ae}from"./chunk-6K6JJAA5.js";import"./chunk-PJBW2GU7.js";import"./chunk-RXVNUSO6.js";import{a as De}from"./chunk-FETLSXL2.js";import{e as L,g as R}from"./chunk-HFZSANZE.js";import{a as ue,b as fe,c as he,d as Ce,e as ge,f as Se}from"./chunk-TSMHSBKG.js";import{a as X}from"./chunk-26ZFRSQG.js";import{b as xe,c as K}from"./chunk-IAQYASUB.js";import{c as J,g as Fe}from"./chunk-NIVJTLF2.js";import{Aa as V,Ca as k,Ea as B,Ja as O,Ka as z,L as de,Ma as $,Q as ye,R as _e,ma as I,oa as G,qa as A,ra as F,ta as C,va as D,wa as be,ya as T,za as N}from"./chunk-KVGTURXN.js";import"./chunk-4N6BO7AP.js";import{l as U,p as pe}from"./chunk-KCCSOALX.js";import{Aa as x,Ba as w,Bb as m,Hb as v,Ia as oe,Jb as E,Kb as P,Lb as t,Mb as i,Nb as u,Rb as M,Ub as h,Wb as y,cd as ce,ed as me,f as ee,fb as c,gb as p,gc as s,hc as ae,ic as q,ja as ie,jc as re,oc as _,p as te,sa as S,sc as se,ta as ne,tc as le,xb as b}from"./chunk-QNTGE4BG.js";var Le=(a,e)=>e.id;function Re(a,e){if(a&1&&(t(0,"mat-list-option",5),s(1),i()),a&2){let l=e.$implicit;m("value",l),c(),ae(l.name)}}function $e(a,e){if(a&1&&(t(0,"mat-selection-list",3),E(1,Re,2,2,"mat-list-option",5,Le),i()),a&2){let l=y(2);m("multiple",!1),c(),P(l.analysisGroupQuery.results)}}function Qe(a,e){if(a&1){let l=M();b(0,$e,3,1,"mat-selection-list",3),t(1,"mat-paginator",4),h("page",function(n){x(l);let r=y();return w(r.handlePageEvent(n))}),i()}if(a&2){let l=y();v(l.analysisGroupQuery.results.length>0?0:-1),c(),m("pageSize",l.analysisGroupPageSize)("length",l.analysisGroupQuery.count)("pageIndex",l.analysisGroupPageIndex)}}var Ve=(()=>{let e=class e{constructor(o,n){this.fb=o,this.web=n,this.formAnalysisGroupSearch=this.fb.group({searchTerm:new C("",G.required),selectedAnalysisGroups:new C([])}),this.analysisGroupPageSize=5,this.analysisGroupPageIndex=0,this.analysisGroupQuery=void 0,this.selectedAnalysisGroups=new oe,this.formAnalysisGroupSearch.controls.searchTerm.valueChanges.subscribe(r=>{r&&this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0,r).subscribe(d=>{this.analysisGroupQuery=d})}),this.formAnalysisGroupSearch.controls.selectedAnalysisGroups.valueChanges.subscribe(r=>{r&&this.selectedAnalysisGroups.emit(r)}),this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0).subscribe(r=>{this.analysisGroupQuery=r})}handlePageEvent(o){let n=o.pageIndex*o.pageSize;this.analysisGroupPageIndex=o.pageIndex,this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,n,this.formAnalysisGroupSearch.value.searchTerm).subscribe(r=>{this.analysisGroupQuery=r})}};e.\u0275fac=function(n){return new(n||e)(p(V),p($))},e.\u0275cmp=S({type:e,selectors:[["app-analysis-search"]],outputs:{selectedAnalysisGroups:"selectedAnalysisGroups"},standalone:!0,features:[_],decls:6,vars:2,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Analysis Group Name","type","search"],[3,"pageSize","length","pageIndex"],["formControlName","selectedAnalysisGroups",3,"multiple"],[3,"page","pageSize","length","pageIndex"],[3,"value"]],template:function(n,r){n&1&&(t(0,"form",0)(1,"mat-form-field"),u(2,"input",1),t(3,"mat-label"),s(4,"Search For Specific Analysis Groups"),i()(),b(5,Qe,2,4,"mat-paginator",2),i()),n&2&&(m("formGroup",r.formAnalysisGroupSearch),c(5),v(r.analysisGroupQuery?5:-1))},dependencies:[k,D,I,A,F,T,N,R,L,K,B,O,z]});let a=e;return a})();var Je=(a,e)=>e.id;function Ke(a,e){if(a&1&&(t(0,"mat-list-option",3),s(1),i()),a&2){let l=e.$implicit;m("value",l),c(),q(" ",l.title," ")}}var ke=(()=>{let e=class e{constructor(o,n,r,d,g,Z){this.web=o,this.fb=n,this.snackBar=r,this.router=d,this.collateService=g,this.dialog=Z,this.collates=[],this.selectedCollate=null,this.limit=5,this.offset=0,this.totalCount=0,this.loading=!1,this.form=this.fb.group({query:[""],selected:new C(null)}),this.form.controls.selected.valueChanges.subscribe(j=>{j&&this.router.navigate([`/collate/view/${j[0].id}`]).then()}),this.web.updateFromLabGroupSelection.subscribe(j=>{j&&this.collateService.getCollates(this.limit,this.offset,this.form.controls.query.value,[]).subscribe(H=>{this.collates=H.results,this.totalCount=H.count})})}ngOnInit(){this.searchCollates()}searchCollates(){this.loading=!0,this.collateService.getCollates(this.limit,this.offset,"",[]).subscribe({next:o=>{this.collates=o.results,this.totalCount=o.count,this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Error loading collates","Dismiss")}})}onSearchResults(o){this.collates=o.results,this.totalCount=o.count}onCollateSelect(o){this.selectedCollate=o.options[0].value}handlePageEvent(o){this.limit=o.pageSize,this.offset=o.pageIndex*this.limit,this.searchCollates()}};e.\u0275fac=function(n){return new(n||e)(p($),p(V),p(X),p(U),p(Y),p(J))},e.\u0275cmp=S({type:e,selectors:[["app-collate-search-main"]],standalone:!0,features:[_],decls:9,vars:4,consts:[[2,"display","flex","flex-direction","column",3,"formGroup"],["matInput","","placeholder","Search","type","search","formControlName","query"],["formControlName","selected",3,"multiple"],[3,"value"],[3,"page","length","pageSize"]],template:function(n,r){n&1&&(t(0,"form",0)(1,"mat-form-field"),u(2,"input",1),t(3,"mat-label"),s(4,"Search Term"),i()(),t(5,"mat-selection-list",2),E(6,Ke,2,2,"mat-list-option",3,Je),i(),t(8,"mat-paginator",4),h("page",function(g){return r.handlePageEvent(g)}),i()()),n&2&&(m("formGroup",r.form),c(5),m("multiple",!1),c(),P(r.collates),c(2),m("length",r.totalCount)("pageSize",r.limit))},dependencies:[L,R,K,O,k,D,I,A,F,T,N,z,B]});let a=e;return a})();var Xe=(a,e)=>e.id;function Ye(a,e){if(a&1){let l=M();t(0,"mat-card-actions")(1,"button",20),h("click",function(){x(l);let n=y();return w(n.openCreateCollateDialog())}),s(2,"Create Collate"),i()()}}function Ze(a,e){if(a&1){let l=M();t(0,"mat-card-actions")(1,"button",20),h("click",function(){x(l);let n=y();return w(n.openProjectCreateDialog())}),s(2,"Create Project"),i()()}}function et(a,e){if(a&1){let l=M();t(0,"mat-card-actions")(1,"button",20),h("click",function(){x(l);let n=y();return w(n.openAnalysisGroupCreateDialog())}),s(2,"Create Analysis Group"),i()()}}function tt(a,e){if(a&1){let l=M();t(0,"mat-list-option",22),h("click",function(){let n=x(l).$implicit,r=y(3);return w(r.selectSpecies(n))}),s(1),i()}if(a&2){let l=e.$implicit;m("value",l),c(),re(" ",l.official_name," (",l.code,") ")}}function it(a,e){if(a&1&&(t(0,"p"),s(1," Select an option from below: "),i(),t(2,"mat-selection-list",21),E(3,tt,2,3,"mat-list-option",15,Xe),i()),a&2){let l=y();c(2),m("multiple",!1),c(),P(l)}}function nt(a,e){a&1&&b(0,it,5,1),a&2&&v(e.length>0?0:-1)}var Be=(()=>{let e=class e{constructor(o,n,r,d,g,Z,j,H){this.collateService=o,this.router=n,this.accounts=r,this.web=d,this.dialog=g,this.fb=Z,this.sb=j,this.ws=H,this.projectCount=0,this.analysisGroupCount=0,this.form=this.fb.group({search:new C("",G.required),searchMode:new C("gene",G.required),foldChange:new C(.6,G.required),pValue:new C(1.31,G.required),projects:new C([]),species_name:new C("")}),this.pageSize=10,this.currentPage=0,this.speciesQueryBehaviorSubject=new te([]),this.selectedSpecies=void 0,this.web.getProjectCount().subscribe(f=>{this.projectCount=f.count}),this.web.getAnalysisGroupCount().subscribe(f=>{this.analysisGroupCount=f.count}),this.form.controls.species_name.valueChanges.subscribe(f=>{f&&this.web.getSpecies(void 0,20,0,f).subscribe(Q=>{this.speciesQueryBehaviorSubject.next(Q.results)})}),this.ws.searchWSConnection?.subscribe(f=>{if(f&&f.type==="search_status")switch(f.status){case"complete":if(this.router.url.includes("collate"))return;this.router.navigate([`/search-session/${f.id}`]).then();break}}),this.web.updateFromLabGroupSelection.subscribe(f=>{f&&(this.web.getProjectCount().subscribe(Q=>{this.projectCount=Q.count}),this.web.getAnalysisGroupCount().subscribe(Q=>{this.analysisGroupCount=Q.count}))})}openProjectCreateDialog(){this.dialog.open(ve).afterClosed().subscribe(n=>{n&&this.web.createProject(n.name,n.description).subscribe(r=>{this.web.getProjectCount().subscribe(d=>{this.projectCount=d.count}),window.open(`/#/project/${r.id}`,"_blank")})})}openAnalysisGroupCreateDialog(){let o=this.dialog.open(we);o.componentInstance.enableProjectSelection=!0,o.afterClosed().subscribe(n=>{n&&(this.web.getAnalysisGroupCount().subscribe(r=>{this.analysisGroupCount=r.count}),window.open(`/#/analysis-group/${n.id}`,"_blank"))})}handleProjectSelection(o){o.length!==0&&this.router.navigate([`/project/${o[0].id}`]).then()}handleMultipleProjectSelection(o){this.form.controls.projects.setValue(o)}searchDatabase(){return ee(this,null,function*(){if(this.form.invalid)return;let o=[];if(this.form.value.projects){let n=yield this.web.getAnalysisGroupsFromProjects(this.form.value.projects).toPromise();if(n)for(let r of n)o.push(r.id)}this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(o,this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode,this.selectedSpecies).subscribe(n=>{this.sb.open("Search queued","Dismiss",{duration:2e3})})})}handleAGSelection(o){o.length>0&&this.router.navigate([`/analysis-group/${o[0].id}`]).then()}selectSpecies(o){if(this.selectedSpecies===o){this.selectedSpecies=void 0;return}this.selectedSpecies=o}openCreateCollateDialog(){this.dialog.open(Ae).afterClosed().subscribe(n=>{n&&this.collateService.createCollate(n.title,n.greeting).subscribe(r=>{this.router.navigate([`/collate/edit/${r.id}`]).then(d=>console.log(d))})})}};e.\u0275fac=function(n){return new(n||e)(p(Y),p(U),p(Fe),p($),p(J),p(V),p(X),p(De))},e.\u0275cmp=S({type:e,selectors:[["app-banner"]],standalone:!0,features:[_],decls:112,vars:16,consts:[[2,"display","flex","flex-direction","row","justify-content","center","gap","20px","padding","20px","flex-wrap","wrap"],[2,"display","flex","flex-direction","column","gap","20px"],["appearance","outlined",2,"width","350px"],[2,"color","#ba0000"],["href","/#/collate"],["href","/#/project"],[3,"selectedProjects","multipleSelection"],["href","/#/analysis-group"],[3,"selectedAnalysisGroups"],[2,"display","flex","flex-direction","row","justify-content","center"],["appearance","outlined",2,"min-width","350px","width","100%"],["href","/#/search-session"],[2,"display","flex","flex-direction","column","gap","5px",3,"formGroup"],["matInput","","formControlName","search","placeholder","Search","type","search"],["formControlName","searchMode"],[3,"value"],["matInput","","formControlName","foldChange","type","number","placeholder","Log2 Fold Change"],["matInput","","formControlName","pValue","type","number","placeholder","P-Value"],["matInput","","type","search","formControlName","species_name","placeholder","Species Name"],[3,"selectedProjects","species","multipleSelection"],["mat-button","","type","button",3,"click"],[3,"multiple"],[3,"click","value"]],template:function(n,r){if(n&1&&(t(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title")(5,"span",3)(6,"mat-icon"),s(7,"lock"),i()(),t(8,"a",4)(9,"span",3),s(10,"Collate"),i()()(),t(11,"mat-card-subtitle"),s(12," Cinder Data Collate "),i()(),t(13,"mat-card-content"),u(14,"app-collate-search-main"),i(),b(15,Ye,3,0,"mat-card-actions"),i(),t(16,"mat-card",2)(17,"mat-card-header")(18,"mat-card-title")(19,"span",3)(20,"mat-icon"),s(21,"lock"),i()(),t(22,"a",5)(23,"span",3),s(24,"Project"),i()()(),t(25,"mat-card-subtitle"),s(26," Cinder Project Data "),i()(),t(27,"mat-card-content")(28,"p"),s(29),i(),t(30,"app-project-search",6),h("selectedProjects",function(g){return r.handleProjectSelection(g)}),i()(),b(31,Ze,3,0,"mat-card-actions"),i(),t(32,"mat-card",2)(33,"mat-card-header")(34,"mat-card-title")(35,"span",3)(36,"mat-icon"),s(37,"lock"),i()(),t(38,"a",7)(39,"span",3),s(40,"Analysis Groups"),i()()(),t(41,"mat-card-subtitle"),s(42," Project Assigned Analysis Groups "),i()(),t(43,"mat-card-content")(44,"p"),s(45),i(),t(46,"app-analysis-search",8),h("selectedAnalysisGroups",function(g){return r.handleAGSelection(g)}),i()(),b(47,et,3,0,"mat-card-actions"),i()(),t(48,"div",9)(49,"div")(50,"mat-card",10)(51,"mat-card-header")(52,"mat-card-title")(53,"span",3)(54,"mat-icon"),s(55,"lock_open"),i()(),t(56,"a",11)(57,"span",3),s(58,"Search"),i()()(),t(59,"mat-card-subtitle"),s(60," Search through the Cinder Database "),i()(),t(61,"mat-card-content")(62,"form",12)(63,"mat-form-field"),u(64,"input",13),t(65,"mat-label"),s(66,"Database Search Term"),i()(),t(67,"p")(68,"b"),s(69,"Search Multiple Terms"),i(),u(70,"br"),s(71," In order to search with multiple terms, enclose each term in single quotes and separate them with "),t(72,"b"),s(73,"OR"),i(),s(74,". "),i(),t(75,"mat-form-field")(76,"mat-select",14)(77,"mat-option",15),s(78," Full Text "),i(),t(79,"mat-option",15),s(80," UniProt Accession ID "),i(),t(81,"mat-option",15),s(82," Gene Names "),i(),t(83,"mat-option",15),s(84," Primary IDs "),i()(),t(85,"mat-label"),s(86,"Search Mode"),i()(),t(87,"mat-form-field"),u(88,"input",16),t(89,"mat-label"),s(90,"Log2 Fold Change Cutoff"),i()(),t(91,"mat-form-field"),u(92,"input",17),t(93,"mat-label"),s(94,"-Log10(P-Value) Cutoff"),i()(),t(95,"mat-form-field"),u(96,"input",18),t(97,"mat-label"),s(98,"Species Name Search"),i()(),b(99,nt,1,1),se(100,"async"),i(),t(101,"mat-accordion")(102,"mat-expansion-panel")(103,"mat-expansion-panel-header")(104,"mat-panel-title"),s(105," Filter by Project "),i(),t(106,"mat-panel-description"),s(107," Optional "),i()(),t(108,"app-project-search",19),h("selectedProjects",function(g){return r.handleMultipleProjectSelection(g)}),i()()()(),t(109,"mat-card-actions")(110,"button",20),h("click",function(){return r.searchDatabase()}),s(111,"Search"),i()()()()()()),n&2){let d;c(15),v(r.accounts.loggedIn?15:-1),c(14),q(" # of Projects: ",r.projectCount," "),c(),m("multipleSelection",!1),c(),v(r.accounts.loggedIn?31:-1),c(14),q(" # of Analysis Groups: ",r.analysisGroupCount," "),c(2),v(r.accounts.loggedIn?47:-1),c(15),m("formGroup",r.form),c(15),m("value","full"),c(2),m("value","uniprot"),c(2),m("value","gene"),c(2),m("value","pi"),c(16),v((d=le(100,14,r.speciesQueryBehaviorSubject.asObservable()))?99:-1,d),c(9),m("species",r.selectedSpecies)("multipleSelection",!0)}},dependencies:[ue,Ce,fe,Se,he,ye,ge,_e,Me,k,D,I,be,A,F,T,N,O,z,xe,B,de,Ie,Ge,Pe,Ee,je,Ve,ce,R,L,ke],styles:[".banner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:wrap;gap:20px;padding:20px}"]});let a=e;return a})();var Oe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=S({type:e,selectors:[["app-footer"]],standalone:!0,features:[_],decls:4,vars:0,consts:[[1,"footer",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","20px"]],template:function(n,r){n&1&&(t(0,"div",0)(1,"div",1)(2,"p",2),s(3," MRC-PPU, University of Dundee. ASAP. "),i()()())}});let a=e;return a})();var ze=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=S({type:e,selectors:[["app-home"]],standalone:!0,features:[_],decls:9,vars:0,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"]],template:function(n,r){n&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),s(3,"C|nder"),i(),u(4,"br"),t(5,"div",2),s(6,"Proteomics Data Indexer"),i()()(),u(7,"app-banner")(8,"app-footer"))},dependencies:[Be,Oe],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]});let a=e;return a})();var ot=[{path:"",component:ze}],Jt=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ne({type:e}),e.\u0275inj=ie({imports:[me,pe.forChild(ot)]});let a=e;return a})();export{Jt as HomeModule};
