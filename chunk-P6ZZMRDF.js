import{a as ve}from"./chunk-QKUZD6O4.js";import{a as we}from"./chunk-DKXFOS5R.js";import{a as Me,b as Ee,c as je,d as Ge,e as Ie,f as Pe}from"./chunk-37ZPZKNV.js";import"./chunk-ZDUQ6FEO.js";import{a as Ae}from"./chunk-SDMFZ6JW.js";import{a as De}from"./chunk-EJJM2NX2.js";import{a as ue,b as fe,c as he,d as Ce,e as ge,f as Se,g as X}from"./chunk-JGCRZDXM.js";import"./chunk-BUUY5TMC.js";import"./chunk-I2H2BG2T.js";import{a as K}from"./chunk-7WFIHXNU.js";import{f as $,h as R}from"./chunk-P4K3MXG5.js";import{c as U,g as Fe}from"./chunk-JL2KKP6K.js";import{Aa as k,Ca as O,Ha as z,Ia as L,Ja as xe,L as de,La as J,Na as v,Q as _e,R as ye,ka as A,ma as j,oa as F,pa as D,ra as h,ta as T,ua as be,wa as N,xa as V,ya as B}from"./chunk-IO7LM37A.js";import"./chunk-HX3ESI56.js";import{l as W,p as pe}from"./chunk-QJ2HU2ZW.js";import{Aa as x,Ba as w,Bb as l,Hb as b,Ia as oe,Jb as I,Kb as P,Lb as t,Mb as i,Nb as d,Rb as M,Ub as f,Wb as S,cd as ce,ed as me,f as ee,fb as s,gb as m,gc as r,hc as ae,ic as E,ja as ie,jc as re,oc as _,p as te,sa as g,sc as se,ta as ne,tc as le,xb as y}from"./chunk-TUTLJQZA.js";var ze=(n,p)=>p.id;function Le(n,p){if(n&1&&(t(0,"mat-list-option",5),r(1),i()),n&2){let e=p.$implicit;l("value",e),s(),ae(e.name)}}function $e(n,p){if(n&1&&(t(0,"mat-selection-list",3),I(1,Le,2,2,"mat-list-option",5,ze),i()),n&2){let e=S(2);l("multiple",!1),s(),P(e.analysisGroupQuery.results)}}function Re(n,p){if(n&1){let e=M();y(0,$e,3,1,"mat-selection-list",3),t(1,"mat-paginator",4),f("page",function(o){x(e);let c=S();return w(c.handlePageEvent(o))}),i()}if(n&2){let e=S();b(e.analysisGroupQuery.results.length>0?0:-1),s(),l("pageSize",e.analysisGroupPageSize)("length",e.analysisGroupQuery.count)("pageIndex",e.analysisGroupPageIndex)}}var Ne=(()=>{class n{constructor(e,a){this.fb=e,this.web=a,this.formAnalysisGroupSearch=this.fb.group({searchTerm:new h("",j.required),selectedAnalysisGroups:new h([])}),this.analysisGroupPageSize=5,this.analysisGroupPageIndex=0,this.analysisGroupQuery=void 0,this.selectedAnalysisGroups=new oe,this.formAnalysisGroupSearch.controls.searchTerm.valueChanges.subscribe(o=>{o&&this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0,o).subscribe(c=>{this.analysisGroupQuery=c})}),this.formAnalysisGroupSearch.controls.selectedAnalysisGroups.valueChanges.subscribe(o=>{o&&this.selectedAnalysisGroups.emit(o)}),this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,0).subscribe(o=>{this.analysisGroupQuery=o})}handlePageEvent(e){let a=e.pageIndex*e.pageSize;this.analysisGroupPageIndex=e.pageIndex,this.web.getAnalysisGroups(void 0,this.analysisGroupPageSize,a,this.formAnalysisGroupSearch.value.searchTerm).subscribe(o=>{this.analysisGroupQuery=o})}static{this.\u0275fac=function(a){return new(a||n)(m(B),m(v))}}static{this.\u0275cmp=g({type:n,selectors:[["app-analysis-search"]],outputs:{selectedAnalysisGroups:"selectedAnalysisGroups"},standalone:!0,features:[_],decls:6,vars:2,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Analysis Group Name","type","search"],[3,"pageSize","length","pageIndex"],["formControlName","selectedAnalysisGroups",3,"multiple"],[3,"page","pageSize","length","pageIndex"],[3,"value"]],template:function(a,o){a&1&&(t(0,"form",0)(1,"mat-form-field"),d(2,"input",1),t(3,"mat-label"),r(4,"Search For Specific Analysis Groups"),i()(),y(5,Re,2,4,"mat-paginator",2),i()),a&2&&(l("formGroup",o.formAnalysisGroupSearch),s(5),b(o.analysisGroupQuery?5:-1))},dependencies:[k,T,A,F,D,N,V,R,$,J,O,z,L]})}}return n})();var Ue=(n,p)=>p.id;function Je(n,p){if(n&1&&(t(0,"mat-list-option",3),r(1),i()),n&2){let e=p.$implicit;l("value",e),s(),E(" ",e.title," ")}}var Ve=(()=>{class n{constructor(e,a,o,c,C,Y){this.web=e,this.fb=a,this.snackBar=o,this.router=c,this.collateService=C,this.dialog=Y,this.collates=[],this.selectedCollate=null,this.limit=5,this.offset=0,this.totalCount=0,this.loading=!1,this.form=this.fb.group({query:[""],selected:new h(null)}),this.form.controls.selected.valueChanges.subscribe(G=>{G&&this.router.navigate([`/collate/view/${G[0].id}`]).then()}),this.web.updateFromLabGroupSelection.subscribe(G=>{G&&this.collateService.getCollates(this.limit,this.offset,this.form.controls.query.value,[]).subscribe(H=>{this.collates=H.results,this.totalCount=H.count})})}ngOnInit(){this.searchCollates()}searchCollates(){this.loading=!0,this.collateService.getCollates(this.limit,this.offset,"",[]).subscribe({next:e=>{this.collates=e.results,this.totalCount=e.count,this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Error loading collates","Dismiss")}})}onSearchResults(e){this.collates=e.results,this.totalCount=e.count}onCollateSelect(e){this.selectedCollate=e.options[0].value}handlePageEvent(e){this.limit=e.pageSize,this.offset=e.pageIndex*this.limit,this.searchCollates()}static{this.\u0275fac=function(a){return new(a||n)(m(v),m(B),m(K),m(W),m(X),m(U))}}static{this.\u0275cmp=g({type:n,selectors:[["app-collate-search-main"]],standalone:!0,features:[_],decls:9,vars:4,consts:[[2,"display","flex","flex-direction","column",3,"formGroup"],["matInput","","placeholder","Search","type","search","formControlName","query"],["formControlName","selected",3,"multiple"],[3,"value"],[3,"page","length","pageSize"]],template:function(a,o){a&1&&(t(0,"form",0)(1,"mat-form-field"),d(2,"input",1),t(3,"mat-label"),r(4,"Search Term"),i()(),t(5,"mat-selection-list",2),I(6,Je,2,2,"mat-list-option",3,Ue),i(),t(8,"mat-paginator",4),f("page",function(C){return o.handlePageEvent(C)}),i()()),a&2&&(l("formGroup",o.form),s(5),l("multiple",!1),s(),P(o.collates),s(2),l("length",o.totalCount)("pageSize",o.limit))},dependencies:[$,R,J,z,k,T,A,F,D,N,V,L,O]})}}return n})();var Ke=(n,p)=>p.id;function Xe(n,p){if(n&1){let e=M();t(0,"mat-card-actions")(1,"button",20),f("click",function(){x(e);let o=S();return w(o.openCreateCollateDialog())}),r(2,"Create Collate"),i()()}}function Ye(n,p){if(n&1){let e=M();t(0,"mat-card-actions")(1,"button",20),f("click",function(){x(e);let o=S();return w(o.openProjectCreateDialog())}),r(2,"Create Project"),i()()}}function Ze(n,p){if(n&1){let e=M();t(0,"mat-card-actions")(1,"button",20),f("click",function(){x(e);let o=S();return w(o.openAnalysisGroupCreateDialog())}),r(2,"Create Analysis Group"),i()()}}function et(n,p){if(n&1){let e=M();t(0,"mat-list-option",22),f("click",function(){let o=x(e).$implicit,c=S(3);return w(c.selectSpecies(o))}),r(1),i()}if(n&2){let e=p.$implicit;l("value",e),s(),re(" ",e.official_name," (",e.code,") ")}}function tt(n,p){if(n&1&&(t(0,"p"),r(1," Select an option from below: "),i(),t(2,"mat-selection-list",21),I(3,et,2,3,"mat-list-option",15,Ke),i()),n&2){let e=S();s(2),l("multiple",!1),s(),P(e)}}function it(n,p){n&1&&y(0,tt,5,1),n&2&&b(p.length>0?0:-1)}var Be=(()=>{class n{constructor(e,a,o,c,C,Y,G,H){this.collateService=e,this.router=a,this.accounts=o,this.web=c,this.dialog=C,this.fb=Y,this.sb=G,this.ws=H,this.projectCount=0,this.analysisGroupCount=0,this.form=this.fb.group({search:new h("",j.required),searchMode:new h("gene",j.required),foldChange:new h(.6,j.required),pValue:new h(1.31,j.required),projects:new h([]),species_name:new h("")}),this.pageSize=10,this.currentPage=0,this.speciesQueryBehaviorSubject=new te([]),this.selectedSpecies=void 0,this.web.getProjectCount().subscribe(u=>{this.projectCount=u.count}),this.web.getAnalysisGroupCount().subscribe(u=>{this.analysisGroupCount=u.count}),this.form.controls.species_name.valueChanges.subscribe(u=>{u&&this.web.getSpecies(void 0,20,0,u).subscribe(Q=>{this.speciesQueryBehaviorSubject.next(Q.results)})}),this.ws.searchWSConnection?.subscribe(u=>{if(u&&u.type==="search_status")switch(u.status){case"complete":if(this.router.url.includes("collate"))return;this.router.navigate([`/search-session/${u.id}`]).then();break}}),this.web.updateFromLabGroupSelection.subscribe(u=>{u&&(this.web.getProjectCount().subscribe(Q=>{this.projectCount=Q.count}),this.web.getAnalysisGroupCount().subscribe(Q=>{this.analysisGroupCount=Q.count}))})}openProjectCreateDialog(){this.dialog.open(ve).afterClosed().subscribe(a=>{a&&this.web.createProject(a.name,a.description).subscribe(o=>{this.web.getProjectCount().subscribe(c=>{this.projectCount=c.count}),window.open(`/#/project/${o.id}`,"_blank")})})}openAnalysisGroupCreateDialog(){let e=this.dialog.open(we);e.componentInstance.enableProjectSelection=!0,e.afterClosed().subscribe(a=>{a&&(this.web.getAnalysisGroupCount().subscribe(o=>{this.analysisGroupCount=o.count}),window.open(`/#/analysis-group/${a.id}`,"_blank"))})}handleProjectSelection(e){e.length!==0&&this.router.navigate([`/project/${e[0].id}`]).then()}handleMultipleProjectSelection(e){this.form.controls.projects.setValue(e)}searchDatabase(){return ee(this,null,function*(){if(this.form.invalid)return;let e=[];if(this.form.value.projects){let a=yield this.web.getAnalysisGroupsFromProjects(this.form.value.projects).toPromise();if(a)for(let o of a)e.push(o.id)}this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(e,this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode,this.selectedSpecies).subscribe(a=>{this.sb.open("Search queued","Dismiss",{duration:2e3})})})}handleAGSelection(e){e.length>0&&this.router.navigate([`/analysis-group/${e[0].id}`]).then()}selectSpecies(e){if(this.selectedSpecies===e){this.selectedSpecies=void 0;return}this.selectedSpecies=e}openCreateCollateDialog(){this.dialog.open(Ae).afterClosed().subscribe(a=>{a&&this.collateService.createCollate(a.title,a.greeting).subscribe(o=>{this.router.navigate([`/collate/edit/${o.id}`]).then(c=>console.log(c))})})}static{this.\u0275fac=function(a){return new(a||n)(m(X),m(W),m(Fe),m(v),m(U),m(B),m(K),m(De))}}static{this.\u0275cmp=g({type:n,selectors:[["app-banner"]],standalone:!0,features:[_],decls:112,vars:16,consts:[[2,"display","flex","flex-direction","row","justify-content","center","gap","20px","padding","20px","flex-wrap","wrap"],[2,"display","flex","flex-direction","column","gap","20px"],["appearance","outlined",2,"width","350px"],[2,"color","#ba0000"],["href","/#/collate"],["href","/#/project"],[3,"selectedProjects","multipleSelection"],["href","/#/analysis-group"],[3,"selectedAnalysisGroups"],[2,"display","flex","flex-direction","row","justify-content","center"],["appearance","outlined",2,"min-width","350px","width","100%"],["href","/#/search-session"],[2,"display","flex","flex-direction","column","gap","5px",3,"formGroup"],["matInput","","formControlName","search","placeholder","Search","type","search"],["formControlName","searchMode"],[3,"value"],["matInput","","formControlName","foldChange","type","number","placeholder","Log2 Fold Change"],["matInput","","formControlName","pValue","type","number","placeholder","P-Value"],["matInput","","type","search","formControlName","species_name","placeholder","Species Name"],[3,"selectedProjects","species","multipleSelection"],["mat-button","","type","button",3,"click"],[3,"multiple"],[3,"click","value"]],template:function(a,o){if(a&1&&(t(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title")(5,"span",3)(6,"mat-icon"),r(7,"lock"),i()(),t(8,"a",4)(9,"span",3),r(10,"Collate"),i()()(),t(11,"mat-card-subtitle"),r(12," Cinder Data Collate "),i()(),t(13,"mat-card-content"),d(14,"app-collate-search-main"),i(),y(15,Xe,3,0,"mat-card-actions"),i(),t(16,"mat-card",2)(17,"mat-card-header")(18,"mat-card-title")(19,"span",3)(20,"mat-icon"),r(21,"lock"),i()(),t(22,"a",5)(23,"span",3),r(24,"Project"),i()()(),t(25,"mat-card-subtitle"),r(26," Cinder Project Data "),i()(),t(27,"mat-card-content")(28,"p"),r(29),i(),t(30,"app-project-search",6),f("selectedProjects",function(C){return o.handleProjectSelection(C)}),i()(),y(31,Ye,3,0,"mat-card-actions"),i(),t(32,"mat-card",2)(33,"mat-card-header")(34,"mat-card-title")(35,"span",3)(36,"mat-icon"),r(37,"lock"),i()(),t(38,"a",7)(39,"span",3),r(40,"Analysis Groups"),i()()(),t(41,"mat-card-subtitle"),r(42," Project Assigned Analysis Groups "),i()(),t(43,"mat-card-content")(44,"p"),r(45),i(),t(46,"app-analysis-search",8),f("selectedAnalysisGroups",function(C){return o.handleAGSelection(C)}),i()(),y(47,Ze,3,0,"mat-card-actions"),i()(),t(48,"div",9)(49,"div")(50,"mat-card",10)(51,"mat-card-header")(52,"mat-card-title")(53,"span",3)(54,"mat-icon"),r(55,"lock_open"),i()(),t(56,"a",11)(57,"span",3),r(58,"Search"),i()()(),t(59,"mat-card-subtitle"),r(60," Search through the Cinder Database "),i()(),t(61,"mat-card-content")(62,"form",12)(63,"mat-form-field"),d(64,"input",13),t(65,"mat-label"),r(66,"Database Search Term"),i()(),t(67,"p")(68,"b"),r(69,"Search Multiple Terms"),i(),d(70,"br"),r(71," In order to search with multiple terms, enclose each term in single quotes and separate them with "),t(72,"b"),r(73,"OR"),i(),r(74,". "),i(),t(75,"mat-form-field")(76,"mat-select",14)(77,"mat-option",15),r(78," Full Text "),i(),t(79,"mat-option",15),r(80," UniProt Accession ID "),i(),t(81,"mat-option",15),r(82," Gene Names "),i(),t(83,"mat-option",15),r(84," Primary IDs "),i()(),t(85,"mat-label"),r(86,"Search Mode"),i()(),t(87,"mat-form-field"),d(88,"input",16),t(89,"mat-label"),r(90,"Log2 Fold Change Cutoff"),i()(),t(91,"mat-form-field"),d(92,"input",17),t(93,"mat-label"),r(94,"-Log10(P-Value) Cutoff"),i()(),t(95,"mat-form-field"),d(96,"input",18),t(97,"mat-label"),r(98,"Species Name Search"),i()(),y(99,it,1,1),se(100,"async"),i(),t(101,"mat-accordion")(102,"mat-expansion-panel")(103,"mat-expansion-panel-header")(104,"mat-panel-title"),r(105," Filter by Project "),i(),t(106,"mat-panel-description"),r(107," Optional "),i()(),t(108,"app-project-search",19),f("selectedProjects",function(C){return o.handleMultipleProjectSelection(C)}),i()()()(),t(109,"mat-card-actions")(110,"button",20),f("click",function(){return o.searchDatabase()}),r(111,"Search"),i()()()()()()),a&2){let c;s(15),b(o.accounts.loggedIn?15:-1),s(14),E(" # of Projects: ",o.projectCount," "),s(),l("multipleSelection",!1),s(),b(o.accounts.loggedIn?31:-1),s(14),E(" # of Analysis Groups: ",o.analysisGroupCount," "),s(2),b(o.accounts.loggedIn?47:-1),s(15),l("formGroup",o.form),s(15),l("value","full"),s(2),l("value","uniprot"),s(2),l("value","gene"),s(2),l("value","pi"),s(16),b((c=le(100,14,o.speciesQueryBehaviorSubject.asObservable()))?99:-1,c),s(9),l("species",o.selectedSpecies)("multipleSelection",!0)}},dependencies:[ue,Ce,fe,Se,he,_e,ge,ye,Me,k,T,A,be,F,D,N,V,z,L,xe,O,de,Pe,Ee,Ie,Ge,je,Ne,ce,R,$,Ve],styles:[".banner[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:wrap;gap:20px;padding:20px}"]})}}return n})();var ke=(()=>{class n{constructor(){this.text=""}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=g({type:n,selectors:[["app-footer"]],inputs:{text:"text"},standalone:!0,features:[_],decls:4,vars:1,consts:[[1,"footer",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","20px"]],template:function(a,o){a&1&&(t(0,"div",0)(1,"div",1)(2,"p",2),r(3),i()()()),a&2&&(s(3),E(" ",o.text," "))}})}}return n})();var Oe=(()=>{class n{constructor(e){this.web=e,this.frontEndData=null}ngOnInit(){this.web.getFrontEndTemplateData().subscribe(e=>{this.frontEndData=e})}static{this.\u0275fac=function(a){return new(a||n)(m(v))}}static{this.\u0275cmp=g({type:n,selectors:[["app-home"]],standalone:!0,features:[_],decls:9,vars:1,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"],[3,"text"]],template:function(a,o){a&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),r(3,"C|nder"),i(),d(4,"br"),t(5,"div",2),r(6,"Proteomics Data Indexer"),i()()(),d(7,"app-banner")(8,"app-footer",3)),a&2&&(s(8),l("text",o.frontEndData==null?null:o.frontEndData.footer))},dependencies:[Be,ke],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return n})();var nt=[{path:"",component:Oe}],Ut=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=ne({type:n})}static{this.\u0275inj=ie({imports:[me,pe.forChild(nt)]})}}return n})();export{Ut as HomeModule};
