import{a as me,b as pe,c as ue,d as de,e as he,f as fe}from"./chunk-IRQCCJII.js";import{a as Pt}from"./chunk-ZDUQ6FEO.js";import{a as jt,b as oi,c as Ee,d as Xt}from"./chunk-AO6VYA3B.js";import{a as Fe}from"./chunk-HZFMELAP.js";import{a as Ut}from"./chunk-V5RE6BFB.js";import{a as _e,b as Ce,c as ye,d as ge,e as xe,f as we,g as be,h as ve,i as Se,j as De}from"./chunk-CF2TBK2L.js";import{a as Yt}from"./chunk-PRCX7VDN.js";import{a as Ae,b as Me}from"./chunk-P2FFHIGI.js";import{a as Rt}from"./chunk-5BQX5E3H.js";import{a as re,c as se,f as le,h as ce}from"./chunk-3ZRSVP4T.js";import{a as ut,c as oe,d as dt,e as ht,f as ft,g as Bt}from"./chunk-LUNVEN3K.js";import{Aa as Y,Ca as ot,Ha as at,Ia as _t,Ja as Ct,L as pt,Ma as X,Q as xt,R as Z,S as wt,ka as bt,ma as G,oa as tt,pa as z,ra as S,ta as O,ua as ae,wa as et,xa as it,ya as nt,za as Lt}from"./chunk-QJNOXFLF.js";import{h as ne}from"./chunk-QJ2HU2ZW.js";import{Aa as T,Ba as k,Bb as w,Hb as E,Ia as lt,Ib as R,Jb as V,Kb as L,Lb as r,Mb as s,Nb as U,Ob as At,Pb as Mt,Rb as B,Ub as D,Wb as g,Zb as Ot,_b as Zt,ac as te,bb as Jt,bc as ee,cc as ie,e as ni,f as zt,fb as f,fc as Vt,gb as M,gc as u,hc as N,ic as J,oc as K,sa as $,xb as I}from"./chunk-TUTLJQZA.js";var ri=(e,n)=>n.id;function si(e,n){if(e&1){let t=B();r(0,"mat-list-option",1),D("click",function(){let o=T(t).$implicit,a=g(2);return k(a.selectAnalysisGroup(o))}),r(1,"b"),u(2),s(),r(3,"span",2),u(4),s()(),U(5,"mat-divider")}if(e&2){let t=n.$implicit,i=g(2);w("value",t),f(2),N(t.name),f(2),J(" ",i.dataService.getAnalysisGroupTypeLabel(t.analysis_group_type)," ")}}function li(e,n){if(e&1&&(r(0,"mat-selection-list",0),V(1,si,6,3,null,null,ri),s()),e&2){let t=g();w("multiple",!1),f(),L(t.analysisGroupQuery.results)}}var Wn=(()=>{class e{constructor(t){this.dataService=t,this.selectedAnalysisGroup=new lt}selectAnalysisGroup(t){this.selectedAnalysisGroup.emit(t)}static{this.\u0275fac=function(i){return new(i||e)(M(Pt))}}static{this.\u0275cmp=$({type:e,selectors:[["app-analysis-group-list"]],inputs:{analysisGroupQuery:"analysisGroupQuery"},outputs:{selectedAnalysisGroup:"selectedAnalysisGroup"},standalone:!0,features:[K],decls:1,vars:1,consts:[[3,"multiple"],[3,"click","value"],["matListItemLine",""]],template:function(i,o){i&1&&I(0,li,3,1,"mat-selection-list",0),i&2&&E(o.analysisGroupQuery?0:-1)},dependencies:[re,le,ce,se]})}}return e})();var Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",je="ARRAYBUFFER not supported by this environment",He="UINT8ARRAY not supported by this environment";function Ie(e,n,t,i){let o,a,c,d=n||[0],m=(t=t||0)>>>3,h=i===-1?3:0;for(o=0;o<e.length;o+=1)c=o+m,a=c>>>2,d.length<=a&&d.push(0),d[a]|=e[o]<<8*(h+i*(c%4));return{value:d,binLen:8*e.length+t}}function Dt(e,n,t){switch(n){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":return function(i,o,a){return function(c,d,m,h){let _,p,C,b;if(c.length%2!=0)throw new Error("String of HEX type must be in byte increments");let v=d||[0],A=(m=m||0)>>>3,F=h===-1?3:0;for(_=0;_<c.length;_+=2){if(p=parseInt(c.substr(_,2),16),isNaN(p))throw new Error("String of HEX type contains invalid characters");for(b=(_>>>1)+A,C=b>>>2;v.length<=C;)v.push(0);v[C]|=p<<8*(F+h*(b%4))}return{value:v,binLen:4*c.length+m}}(i,o,a,t)};case"TEXT":return function(i,o,a){return function(c,d,m,h,_){let p,C,b,v,A,F,y,j,P=0,H=m||[0],W=(h=h||0)>>>3;if(d==="UTF8")for(y=_===-1?3:0,b=0;b<c.length;b+=1)for(p=c.charCodeAt(b),C=[],128>p?C.push(p):2048>p?(C.push(192|p>>>6),C.push(128|63&p)):55296>p||57344<=p?C.push(224|p>>>12,128|p>>>6&63,128|63&p):(b+=1,p=65536+((1023&p)<<10|1023&c.charCodeAt(b)),C.push(240|p>>>18,128|p>>>12&63,128|p>>>6&63,128|63&p)),v=0;v<C.length;v+=1){for(F=P+W,A=F>>>2;H.length<=A;)H.push(0);H[A]|=C[v]<<8*(y+_*(F%4)),P+=1}else for(y=_===-1?2:0,j=d==="UTF16LE"&&_!==1||d!=="UTF16LE"&&_===1,b=0;b<c.length;b+=1){for(p=c.charCodeAt(b),j===!0&&(v=255&p,p=v<<8|p>>>8),F=P+W,A=F>>>2;H.length<=A;)H.push(0);H[A]|=p<<8*(y+_*(F%4)),P+=2}return{value:H,binLen:8*P+h}}(i,n,o,a,t)};case"B64":return function(i,o,a){return function(c,d,m,h){let _,p,C,b,v,A,F,y=0,j=d||[0],P=(m=m||0)>>>3,H=h===-1?3:0,W=c.indexOf("=");if(c.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(c=c.replace(/=/g,""),W!==-1&&W<c.length)throw new Error("Invalid '=' found in base-64 string");for(p=0;p<c.length;p+=4){for(v=c.substr(p,4),b=0,C=0;C<v.length;C+=1)_=Ue.indexOf(v.charAt(C)),b|=_<<18-6*C;for(C=0;C<v.length-1;C+=1){for(F=y+P,A=F>>>2;j.length<=A;)j.push(0);j[A]|=(b>>>16-8*C&255)<<8*(H+h*(F%4)),y+=1}}return{value:j,binLen:8*y+m}}(i,o,a,t)};case"BYTES":return function(i,o,a){return function(c,d,m,h){let _,p,C,b,v=d||[0],A=(m=m||0)>>>3,F=h===-1?3:0;for(p=0;p<c.length;p+=1)_=c.charCodeAt(p),b=p+A,C=b>>>2,v.length<=C&&v.push(0),v[C]|=_<<8*(F+h*(b%4));return{value:v,binLen:8*c.length+m}}(i,o,a,t)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(je)}return function(i,o,a){return function(c,d,m,h){return Ie(new Uint8Array(c),d,m,h)}(i,o,a,t)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(He)}return function(i,o,a){return Ie(i,o,a,t)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function Ge(e,n,t,i){switch(e){case"HEX":return function(o){return function(a,c,d,m){let h="0123456789abcdef",_,p,C="",b=c/8,v=d===-1?3:0;for(_=0;_<b;_+=1)p=a[_>>>2]>>>8*(v+d*(_%4)),C+=h.charAt(p>>>4&15)+h.charAt(15&p);return m.outputUpper?C.toUpperCase():C}(o,n,t,i)};case"B64":return function(o){return function(a,c,d,m){let h,_,p,C,b,v="",A=c/8,F=d===-1?3:0;for(h=0;h<A;h+=3)for(C=h+1<A?a[h+1>>>2]:0,b=h+2<A?a[h+2>>>2]:0,p=(a[h>>>2]>>>8*(F+d*(h%4))&255)<<16|(C>>>8*(F+d*((h+1)%4))&255)<<8|b>>>8*(F+d*((h+2)%4))&255,_=0;_<4;_+=1)v+=8*h+6*_<=c?Ue.charAt(p>>>6*(3-_)&63):m.b64Pad;return v}(o,n,t,i)};case"BYTES":return function(o){return function(a,c,d){let m,h,_="",p=c/8,C=d===-1?3:0;for(m=0;m<p;m+=1)h=a[m>>>2]>>>8*(C+d*(m%4))&255,_+=String.fromCharCode(h);return _}(o,n,t)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(je)}return function(o){return function(a,c,d){let m,h=c/8,_=new ArrayBuffer(h),p=new Uint8Array(_),C=d===-1?3:0;for(m=0;m<h;m+=1)p[m]=a[m>>>2]>>>8*(C+d*(m%4))&255;return _}(o,n,t)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(He)}return function(o){return function(a,c,d){let m,h=c/8,_=d===-1?3:0,p=new Uint8Array(h);for(m=0;m<h;m+=1)p[m]=a[m>>>2]>>>8*(_+d*(m%4))&255;return p}(o,n,t)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var It=4294967296,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ct=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],mt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Gt="Chosen SHA variant is not supported",$e="Cannot set numRounds with MAC";function $t(e,n){let t,i,o=e.binLen>>>3,a=n.binLen>>>3,c=o<<3,d=4-o<<3;if(o%4!=0){for(t=0;t<a;t+=4)i=o+t>>>2,e.value[i]|=n.value[t>>>2]<<c,e.value.push(0),e.value[i+1]|=n.value[t>>>2]>>>d;return(e.value.length<<2)-4>=a+o&&e.value.pop(),{value:e.value,binLen:e.binLen+n.binLen}}return{value:e.value.concat(n.value),binLen:e.binLen+n.binLen}}function Te(e){let n={outputUpper:!1,b64Pad:"=",outputLen:-1},t=e||{},i="Output length must be a multiple of 8";if(n.outputUpper=t.outputUpper||!1,t.b64Pad&&(n.b64Pad=t.b64Pad),t.outputLen){if(t.outputLen%8!=0)throw new Error(i);n.outputLen=t.outputLen}else if(t.shakeLen){if(t.shakeLen%8!=0)throw new Error(i);n.outputLen=t.shakeLen}if(typeof n.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof n.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return n}function yt(e,n,t,i){let o=e+" must include a value and format";if(!n){if(!i)throw new Error(o);return i}if(n.value===void 0||!n.format)throw new Error(o);return Dt(n.format,n.encoding||"UTF8",t)(n.value)}var St=class{constructor(n,t,i){let o=i||{};if(this.t=t,this.i=o.encoding||"UTF8",this.numRounds=o.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=n,this.h=[],this.u=0,this.l=!1,this.A=0,this.H=!1,this.S=[],this.p=[]}update(n){let t,i=0,o=this.m>>>5,a=this.C(n,this.h,this.u),c=a.binLen,d=a.value,m=c>>>5;for(t=0;t<m;t+=o)i+this.m<=c&&(this.U=this.v(d.slice(t,t+o),this.U),i+=this.m);return this.A+=i,this.h=d.slice(i>>>5),this.u=c%this.m,this.l=!0,this}getHash(n,t){let i,o,a=this.R,c=Te(t);if(this.K){if(c.outputLen===-1)throw new Error("Output length must be specified in options");a=c.outputLen}let d=Ge(n,a,this.T,c);if(this.H&&this.g)return d(this.g(c));for(o=this.F(this.h.slice(),this.u,this.A,this.L(this.U),a),i=1;i<this.numRounds;i+=1)this.K&&a%32!=0&&(o[o.length-1]&=16777215>>>24-a%32),o=this.F(o,a,0,this.B(this.o),a);return d(o)}setHMACKey(n,t,i){if(!this.M)throw new Error("Variant does not support HMAC");if(this.l)throw new Error("Cannot set MAC key after calling update");let o=Dt(t,(i||{}).encoding||"UTF8",this.T);this.k(o(n))}k(n){let t=this.m>>>3,i=t/4-1,o;if(this.numRounds!==1)throw new Error($e);if(this.H)throw new Error("MAC key already set");for(t<n.binLen/8&&(n.value=this.F(n.value,n.binLen,0,this.B(this.o),this.R));n.value.length<=i;)n.value.push(0);for(o=0;o<=i;o+=1)this.S[o]=909522486^n.value[o],this.p[o]=1549556828^n.value[o];this.U=this.v(this.S,this.U),this.A=this.m,this.H=!0}getHMAC(n,t){let i=Te(t);return Ge(n,this.R,this.T,i)(this.Y())}Y(){let n;if(!this.H)throw new Error("Cannot call getHMAC without first setting MAC key");let t=this.F(this.h.slice(),this.u,this.A,this.L(this.U),this.R);return n=this.v(this.p,this.B(this.o)),n=this.F(t,this.R,this.m,n,this.R),n}};function vt(e,n){return e<<n|e>>>32-n}function rt(e,n){return e>>>n|e<<32-n}function Ke(e,n){return e>>>n}function ke(e,n,t){return e^n^t}function qe(e,n,t){return e&n^~e&t}function ze(e,n,t){return e&n^e&t^n&t}function ci(e){return rt(e,2)^rt(e,13)^rt(e,22)}function q(e,n){let t=(65535&e)+(65535&n);return(65535&(e>>>16)+(n>>>16)+(t>>>16))<<16|65535&t}function mi(e,n,t,i){let o=(65535&e)+(65535&n)+(65535&t)+(65535&i);return(65535&(e>>>16)+(n>>>16)+(t>>>16)+(i>>>16)+(o>>>16))<<16|65535&o}function Ft(e,n,t,i,o){let a=(65535&e)+(65535&n)+(65535&t)+(65535&i)+(65535&o);return(65535&(e>>>16)+(n>>>16)+(t>>>16)+(i>>>16)+(o>>>16)+(a>>>16))<<16|65535&a}function pi(e){return rt(e,7)^rt(e,18)^Ke(e,3)}function ui(e){return rt(e,6)^rt(e,11)^rt(e,25)}function di(e){return[1732584193,4023233417,2562383102,271733878,3285377520]}function Oe(e,n){let t,i,o,a,c,d,m,h=[];for(t=n[0],i=n[1],o=n[2],a=n[3],c=n[4],m=0;m<80;m+=1)h[m]=m<16?e[m]:vt(h[m-3]^h[m-8]^h[m-14]^h[m-16],1),d=m<20?Ft(vt(t,5),qe(i,o,a),c,1518500249,h[m]):m<40?Ft(vt(t,5),ke(i,o,a),c,1859775393,h[m]):m<60?Ft(vt(t,5),ze(i,o,a),c,2400959708,h[m]):Ft(vt(t,5),ke(i,o,a),c,3395469782,h[m]),c=a,a=o,o=vt(i,30),i=t,t=d;return n[0]=q(t,n[0]),n[1]=q(i,n[1]),n[2]=q(o,n[2]),n[3]=q(a,n[3]),n[4]=q(c,n[4]),n}function hi(e,n,t,i){let o,a=15+(n+65>>>9<<4),c=n+t;for(;e.length<=a;)e.push(0);for(e[n>>>5]|=128<<24-n%32,e[a]=4294967295&c,e[a-1]=c/It|0,o=0;o<e.length;o+=16)i=Oe(e.slice(o,o+16),i);return i}var fi=class extends St{constructor(e,n,t){if(e!=="SHA-1")throw new Error(Gt);super(e,n,t);let i=t||{};this.M=!0,this.g=this.Y,this.T=-1,this.C=Dt(this.t,this.i,this.T),this.v=Oe,this.L=function(o){return o.slice()},this.B=di,this.F=hi,this.U=[1732584193,4023233417,2562383102,271733878,3285377520],this.m=512,this.R=160,this.K=!1,i.hmacKey&&this.k(yt("hmacKey",i.hmacKey,this.T))}};function Ne(e){let n;return n=e=="SHA-224"?ct.slice():mt.slice(),n}function Ve(e,n){let t,i,o,a,c,d,m,h,_,p,C,b=[];for(t=n[0],i=n[1],o=n[2],a=n[3],c=n[4],d=n[5],m=n[6],h=n[7],C=0;C<64;C+=1)b[C]=C<16?e[C]:mi(rt(v=b[C-2],17)^rt(v,19)^Ke(v,10),b[C-7],pi(b[C-15]),b[C-16]),_=Ft(h,ui(c),qe(c,d,m),x[C],b[C]),p=q(ci(t),ze(t,i,o)),h=m,m=d,d=c,c=q(a,_),a=o,o=i,i=t,t=q(_,p);var v;return n[0]=q(t,n[0]),n[1]=q(i,n[1]),n[2]=q(o,n[2]),n[3]=q(a,n[3]),n[4]=q(c,n[4]),n[5]=q(d,n[5]),n[6]=q(m,n[6]),n[7]=q(h,n[7]),n}var _i=class extends St{constructor(e,n,t){if(e!=="SHA-224"&&e!=="SHA-256")throw new Error(Gt);super(e,n,t);let i=t||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=Dt(this.t,this.i,this.T),this.v=Ve,this.L=function(o){return o.slice()},this.B=Ne,this.F=function(o,a,c,d){return function(m,h,_,p,C){let b,v,A=15+(h+65>>>9<<4),F=h+_;for(;m.length<=A;)m.push(0);for(m[h>>>5]|=128<<24-h%32,m[A]=4294967295&F,m[A-1]=F/It|0,b=0;b<m.length;b+=16)p=Ve(m.slice(b,b+16),p);return v=C==="SHA-224"?[p[0],p[1],p[2],p[3],p[4],p[5],p[6]]:p,v}(o,a,c,d,e)},this.U=Ne(e),this.m=512,this.R=e==="SHA-224"?224:256,this.K=!1,i.hmacKey&&this.k(yt("hmacKey",i.hmacKey,this.T))}},l=class{constructor(n,t){this.N=n,this.I=t}};function Le(e,n){let t;return n>32?(t=64-n,new l(e.I<<n|e.N>>>t,e.N<<n|e.I>>>t)):n!==0?(t=32-n,new l(e.N<<n|e.I>>>t,e.I<<n|e.N>>>t)):e}function st(e,n){let t;return n<32?(t=32-n,new l(e.N>>>n|e.I<<t,e.I>>>n|e.N<<t)):(t=64-n,new l(e.I>>>n|e.N<<t,e.N>>>n|e.I<<t))}function Ye(e,n){return new l(e.N>>>n,e.I>>>n|e.N<<32-n)}function Ci(e,n,t){return new l(e.N&n.N^e.N&t.N^n.N&t.N,e.I&n.I^e.I&t.I^n.I&t.I)}function yi(e){let n=st(e,28),t=st(e,34),i=st(e,39);return new l(n.N^t.N^i.N,n.I^t.I^i.I)}function Q(e,n){let t,i;t=(65535&e.I)+(65535&n.I),i=(e.I>>>16)+(n.I>>>16)+(t>>>16);let o=(65535&i)<<16|65535&t;return t=(65535&e.N)+(65535&n.N)+(i>>>16),i=(e.N>>>16)+(n.N>>>16)+(t>>>16),new l((65535&i)<<16|65535&t,o)}function gi(e,n,t,i){let o,a;o=(65535&e.I)+(65535&n.I)+(65535&t.I)+(65535&i.I),a=(e.I>>>16)+(n.I>>>16)+(t.I>>>16)+(i.I>>>16)+(o>>>16);let c=(65535&a)<<16|65535&o;return o=(65535&e.N)+(65535&n.N)+(65535&t.N)+(65535&i.N)+(a>>>16),a=(e.N>>>16)+(n.N>>>16)+(t.N>>>16)+(i.N>>>16)+(o>>>16),new l((65535&a)<<16|65535&o,c)}function xi(e,n,t,i,o){let a,c;a=(65535&e.I)+(65535&n.I)+(65535&t.I)+(65535&i.I)+(65535&o.I),c=(e.I>>>16)+(n.I>>>16)+(t.I>>>16)+(i.I>>>16)+(o.I>>>16)+(a>>>16);let d=(65535&c)<<16|65535&a;return a=(65535&e.N)+(65535&n.N)+(65535&t.N)+(65535&i.N)+(65535&o.N)+(c>>>16),c=(e.N>>>16)+(n.N>>>16)+(t.N>>>16)+(i.N>>>16)+(o.N>>>16)+(a>>>16),new l((65535&c)<<16|65535&a,d)}function Et(e,n){return new l(e.N^n.N,e.I^n.I)}function wi(e){let n=st(e,19),t=st(e,61),i=Ye(e,6);return new l(n.N^t.N^i.N,n.I^t.I^i.I)}function bi(e){let n=st(e,1),t=st(e,8),i=Ye(e,7);return new l(n.N^t.N^i.N,n.I^t.I^i.I)}function vi(e){let n=st(e,14),t=st(e,18),i=st(e,41);return new l(n.N^t.N^i.N,n.I^t.I^i.I)}var Si=[new l(x[0],3609767458),new l(x[1],602891725),new l(x[2],3964484399),new l(x[3],2173295548),new l(x[4],4081628472),new l(x[5],3053834265),new l(x[6],2937671579),new l(x[7],3664609560),new l(x[8],2734883394),new l(x[9],1164996542),new l(x[10],1323610764),new l(x[11],3590304994),new l(x[12],4068182383),new l(x[13],991336113),new l(x[14],633803317),new l(x[15],3479774868),new l(x[16],2666613458),new l(x[17],944711139),new l(x[18],2341262773),new l(x[19],2007800933),new l(x[20],1495990901),new l(x[21],1856431235),new l(x[22],3175218132),new l(x[23],2198950837),new l(x[24],3999719339),new l(x[25],766784016),new l(x[26],2566594879),new l(x[27],3203337956),new l(x[28],1034457026),new l(x[29],2466948901),new l(x[30],3758326383),new l(x[31],168717936),new l(x[32],1188179964),new l(x[33],1546045734),new l(x[34],1522805485),new l(x[35],2643833823),new l(x[36],2343527390),new l(x[37],1014477480),new l(x[38],1206759142),new l(x[39],344077627),new l(x[40],1290863460),new l(x[41],3158454273),new l(x[42],3505952657),new l(x[43],106217008),new l(x[44],3606008344),new l(x[45],1432725776),new l(x[46],1467031594),new l(x[47],851169720),new l(x[48],3100823752),new l(x[49],1363258195),new l(x[50],3750685593),new l(x[51],3785050280),new l(x[52],3318307427),new l(x[53],3812723403),new l(x[54],2003034995),new l(x[55],3602036899),new l(x[56],1575990012),new l(x[57],1125592928),new l(x[58],2716904306),new l(x[59],442776044),new l(x[60],593698344),new l(x[61],3733110249),new l(x[62],2999351573),new l(x[63],3815920427),new l(3391569614,3928383900),new l(3515267271,566280711),new l(3940187606,3454069534),new l(4118630271,4000239992),new l(116418474,1914138554),new l(174292421,2731055270),new l(289380356,3203993006),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,2618297676),new l(1288033470,3409855158),new l(1501505948,4234509866),new l(1607167915,987167468),new l(1816402316,1246189591)];function Pe(e){return e==="SHA-384"?[new l(3418070365,ct[0]),new l(1654270250,ct[1]),new l(2438529370,ct[2]),new l(355462360,ct[3]),new l(1731405415,ct[4]),new l(41048885895,ct[5]),new l(3675008525,ct[6]),new l(1203062813,ct[7])]:[new l(mt[0],4089235720),new l(mt[1],2227873595),new l(mt[2],4271175723),new l(mt[3],1595750129),new l(mt[4],2917565137),new l(mt[5],725511199),new l(mt[6],4215389547),new l(mt[7],327033209)]}function Re(e,n){let t,i,o,a,c,d,m,h,_,p,C,b,v=[];for(t=n[0],i=n[1],o=n[2],a=n[3],c=n[4],d=n[5],m=n[6],h=n[7],C=0;C<80;C+=1)C<16?(b=2*C,v[C]=new l(e[b],e[b+1])):v[C]=gi(wi(v[C-2]),v[C-7],bi(v[C-15]),v[C-16]),_=xi(h,vi(c),(F=d,y=m,new l((A=c).N&F.N^~A.N&y.N,A.I&F.I^~A.I&y.I)),Si[C],v[C]),p=Q(yi(t),Ci(t,i,o)),h=m,m=d,d=c,c=Q(a,_),a=o,o=i,i=t,t=Q(_,p);var A,F,y;return n[0]=Q(t,n[0]),n[1]=Q(i,n[1]),n[2]=Q(o,n[2]),n[3]=Q(a,n[3]),n[4]=Q(c,n[4]),n[5]=Q(d,n[5]),n[6]=Q(m,n[6]),n[7]=Q(h,n[7]),n}var Di=class extends St{constructor(e,n,t){if(e!=="SHA-384"&&e!=="SHA-512")throw new Error(Gt);super(e,n,t);let i=t||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=Dt(this.t,this.i,this.T),this.v=Re,this.L=function(o){return o.slice()},this.B=Pe,this.F=function(o,a,c,d){return function(m,h,_,p,C){let b,v,A=31+(h+129>>>10<<5),F=h+_;for(;m.length<=A;)m.push(0);for(m[h>>>5]|=128<<24-h%32,m[A]=4294967295&F,m[A-1]=F/It|0,b=0;b<m.length;b+=32)p=Re(m.slice(b,b+32),p);return v=C==="SHA-384"?[p[0].N,p[0].I,p[1].N,p[1].I,p[2].N,p[2].I,p[3].N,p[3].I,p[4].N,p[4].I,p[5].N,p[5].I]:[p[0].N,p[0].I,p[1].N,p[1].I,p[2].N,p[2].I,p[3].N,p[3].I,p[4].N,p[4].I,p[5].N,p[5].I,p[6].N,p[6].I,p[7].N,p[7].I],v}(o,a,c,d,e)},this.U=Pe(e),this.m=1024,this.R=e==="SHA-384"?384:512,this.K=!1,i.hmacKey&&this.k(yt("hmacKey",i.hmacKey,this.T))}},Ai=[new l(0,1),new l(0,32898),new l(2147483648,32906),new l(2147483648,2147516416),new l(0,32907),new l(0,2147483649),new l(2147483648,2147516545),new l(2147483648,32777),new l(0,138),new l(0,136),new l(0,2147516425),new l(0,2147483658),new l(0,2147516555),new l(2147483648,139),new l(2147483648,32905),new l(2147483648,32771),new l(2147483648,32770),new l(2147483648,128),new l(0,32778),new l(2147483648,2147483658),new l(2147483648,2147516545),new l(2147483648,32896),new l(0,2147483649),new l(2147483648,2147516424)],Mi=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function Qt(e){let n,t=[];for(n=0;n<5;n+=1)t[n]=[new l(0,0),new l(0,0),new l(0,0),new l(0,0),new l(0,0)];return t}function Ei(e){let n,t=[];for(n=0;n<5;n+=1)t[n]=e[n].slice();return t}function Ht(e,n){let t,i,o,a,c=[],d=[];if(e!==null)for(i=0;i<e.length;i+=2)n[(i>>>1)%5][(i>>>1)/5|0]=Et(n[(i>>>1)%5][(i>>>1)/5|0],new l(e[i+1],e[i]));for(t=0;t<24;t+=1){for(a=Qt(),i=0;i<5;i+=1)c[i]=(m=n[i][0],h=n[i][1],_=n[i][2],p=n[i][3],C=n[i][4],new l(m.N^h.N^_.N^p.N^C.N,m.I^h.I^_.I^p.I^C.I));for(i=0;i<5;i+=1)d[i]=Et(c[(i+4)%5],Le(c[(i+1)%5],1));for(i=0;i<5;i+=1)for(o=0;o<5;o+=1)n[i][o]=Et(n[i][o],d[i]);for(i=0;i<5;i+=1)for(o=0;o<5;o+=1)a[o][(2*i+3*o)%5]=Le(n[i][o],Mi[i][o]);for(i=0;i<5;i+=1)for(o=0;o<5;o+=1)n[i][o]=Et(a[i][o],new l(~a[(i+1)%5][o].N&a[(i+2)%5][o].N,~a[(i+1)%5][o].I&a[(i+2)%5][o].I));n[0][0]=Et(n[0][0],Ai[t])}var m,h,_,p,C;return n}function Xe(e){let n,t,i=0,o=[0,0],a=[4294967295&e,e/It&2097151];for(n=6;n>=0;n--)t=a[n>>2]>>>8*n&255,t===0&&i===0||(o[i+1>>2]|=t<<8*(i+1),i+=1);return i=i!==0?i:1,o[0]|=i,{value:i+1>4?o:[o[0]],binLen:8+8*i}}function Wt(e){return $t(Xe(e.binLen),e)}function Be(e,n){let t,i=Xe(n);i=$t(i,e);let o=n>>>2,a=(o-i.value.length%o)%o;for(t=0;t<a;t++)i.value.push(0);return i.value}var Fi=class extends St{constructor(e,n,t){let i=6,o=0;super(e,n,t);let a=t||{};if(this.numRounds!==1){if(a.kmacKey||a.hmacKey)throw new Error($e);if(this.o==="CSHAKE128"||this.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.T=1,this.C=Dt(this.t,this.i,this.T),this.v=Ht,this.L=Ei,this.B=Qt,this.U=Qt(),this.K=!1,e){case"SHA3-224":this.m=o=1152,this.R=224,this.M=!0,this.g=this.Y;break;case"SHA3-256":this.m=o=1088,this.R=256,this.M=!0,this.g=this.Y;break;case"SHA3-384":this.m=o=832,this.R=384,this.M=!0,this.g=this.Y;break;case"SHA3-512":this.m=o=576,this.R=512,this.M=!0,this.g=this.Y;break;case"SHAKE128":i=31,this.m=o=1344,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"SHAKE256":i=31,this.m=o=1088,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"KMAC128":i=4,this.m=o=1344,this.X(t),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"KMAC256":i=4,this.m=o=1088,this.X(t),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"CSHAKE128":this.m=o=1344,i=this.O(t),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"CSHAKE256":this.m=o=1088,i=this.O(t),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;default:throw new Error(Gt)}this.F=function(c,d,m,h,_){return function(p,C,b,v,A,F,y){let j,P,H=0,W=[],Nt=A>>>5,ii=C>>>5;for(j=0;j<ii&&C>=A;j+=Nt)v=Ht(p.slice(j,j+Nt),v),C-=A;for(p=p.slice(j),C%=A;p.length<Nt;)p.push(0);for(j=C>>>3,p[j>>2]^=F<<j%4*8,p[Nt-1]^=2147483648,v=Ht(p,v);32*W.length<y&&(P=v[H%5][H/5|0],W.push(P.I),!(32*W.length>=y));)W.push(P.N),H+=1,64*H%A==0&&(Ht(null,v),H=0);return W}(c,d,0,h,o,i,_)},a.hmacKey&&this.k(yt("hmacKey",a.hmacKey,this.T))}O(e,n){let t=function(o){let a=o||{};return{funcName:yt("funcName",a.funcName,1,{value:[],binLen:0}),customization:yt("Customization",a.customization,1,{value:[],binLen:0})}}(e||{});n&&(t.funcName=n);let i=$t(Wt(t.funcName),Wt(t.customization));if(t.customization.binLen!==0||t.funcName.binLen!==0){let o=Be(i,this.m>>>3);for(let a=0;a<o.length;a+=this.m>>>5)this.U=this.v(o.slice(a,a+(this.m>>>5)),this.U),this.A+=this.m;return 4}return 31}X(e){let n=function(i){let o=i||{};return{kmacKey:yt("kmacKey",o.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:yt("Customization",o.customization,1,{value:[],binLen:0})}}(e||{});this.O(e,n.funcName);let t=Be(Wt(n.kmacKey),this.m>>>3);for(let i=0;i<t.length;i+=this.m>>>5)this.U=this.v(t.slice(i,i+(this.m>>>5)),this.U),this.A+=this.m;this.H=!0}_(e){let n=$t({value:this.h.slice(),binLen:this.u},function(t){let i,o,a=0,c=[0,0],d=[4294967295&t,t/It&2097151];for(i=6;i>=0;i--)o=d[i>>2]>>>8*i&255,o===0&&a===0||(c[a>>2]|=o<<8*a,a+=1);return a=a!==0?a:1,c[a>>2]|=a<<8*a,{value:a+1>4?c:[c[0]],binLen:8+8*a}}(e.outputLen));return this.F(n.value,n.binLen,this.A,this.L(this.U),e.outputLen)}},Kt=class{constructor(n,t,i){if(n=="SHA-1")this.P=new fi(n,t,i);else if(n=="SHA-224"||n=="SHA-256")this.P=new _i(n,t,i);else if(n=="SHA-384"||n=="SHA-512")this.P=new Di(n,t,i);else{if(n!="SHA3-224"&&n!="SHA3-256"&&n!="SHA3-384"&&n!="SHA3-512"&&n!="SHAKE128"&&n!="SHAKE256"&&n!="CSHAKE128"&&n!="CSHAKE256"&&n!="KMAC128"&&n!="KMAC256")throw new Error(Gt);this.P=new Fi(n,t,i)}}update(n){return this.P.update(n),this}getHash(n,t){return this.P.getHash(n,t)}setHMACKey(n,t,i){this.P.setHMACKey(n,t,i)}getHMAC(n,t){return this.P.getHMAC(n,t)}};var Ii=(e,n)=>n.name;function Gi(e,n){if(e&1&&U(0,"mat-progress-bar",3),e&2){let t=n.$implicit,i=g();w("value",i.fileProgressMap[t.name].progress/i.fileProgressMap[t.name].total*100)("mode","determinate")}}var We=(()=>{class e{constructor(t){this.web=t,this.fileProgressMap={},this.fileList=[],this.fileType="",this.fileCategory="",this.analysisGroupId=0,this.fileUploaded=new lt,this.allowFileType=["csv","tsv","txt"]}uploadData(t){return zt(this,null,function*(){let i=t.target.files;if(i){this.fileList=[];for(let o=0;o<i.length;o++)this.fileList.push(i[o]),this.fileProgressMap[i[o].name]={progress:0,total:i[o].size};for(let o=0;o<i.length;o++)yield this.uploadFile(i[o])}})}getFileExntension(t){let i=t.name.split(".");return i.length>1?i[i.length-1]:""}uploadFile(t){return zt(this,null,function*(){let o=t.size,a=new Kt("SHA-256","ARRAYBUFFER");if(this.fileType=this.getFileExntension(t),this.allowFileType.indexOf(this.fileType)!==-1)if(1048576>o){let c=yield t.arrayBuffer();a.update(c);let d=a.getHash("HEX"),m=yield this.web.uploadDataChunkComplete("",d,t,t.name).toPromise();this.fileProgressMap[t.name].progress=o,m?.completed_at&&this.web.bindUploadedFile(this.analysisGroupId,this.fileType,this.fileCategory,t.name,m?.id).subscribe(h=>{this.fileUploaded.emit(h)})}else{let c="",d=0;for(;o>d;){let m=d+1048576;m>=o&&(m=o);let h=yield t.slice(d,m).arrayBuffer();a.update(h);let _=new File([h],t.name,{type:t.type});console.log(_.size);let p=`bytes ${d}-${m-1}/${o}`;console.log(p);let C=yield this.web.uploadDataChunk(c,_,t.name,p).toPromise();C&&(c=C.url,d=C.offset,this.fileProgressMap[t.name].progress=d)}if(c!==""){let m=a.getHash("HEX"),h=yield this.web.uploadDataChunkComplete(c,m).toPromise();h?.completed_at&&this.web.bindUploadedFile(this.analysisGroupId,this.fileType,this.fileCategory,t.name,h?.id).subscribe(_=>{this.fileProgressMap[t.name].progress=o,this.fileUploaded.emit(_)})}}})}static{this.\u0275fac=function(i){return new(i||e)(M(X))}}static{this.\u0275cmp=$({type:e,selectors:[["app-upload-file"]],inputs:{fileType:"fileType",fileCategory:"fileCategory",analysisGroupId:"analysisGroupId"},outputs:{fileUploaded:"fileUploaded"},standalone:!0,features:[K],decls:8,vars:0,consts:[["file",""],["mat-icon-button","","type","button",3,"click"],["type","file","hidden","",3,"change"],[3,"value","mode"]],template:function(i,o){if(i&1){let a=B();r(0,"form")(1,"button",1),D("click",function(){T(a);let d=Vt(5);return k(d.click())}),r(2,"mat-icon"),u(3,"upload"),s()(),r(4,"input",2,0),D("change",function(d){return T(a),k(o.uploadData(d))}),s()(),V(6,Gi,1,2,"mat-progress-bar",3,Ii)}i&2&&(f(6),L(o.fileList))},dependencies:[wt,xt,jt,Y,O,z]})}}return e})();var Ti=["table"];function ki(e,n){if(e&1&&(r(0,"mat-option",7),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function Ni(e,n){e&1&&(r(0,"th",16),u(1," Sample "),s())}function Vi(e,n){if(e&1&&(r(0,"td",17),u(1),s()),e&2){let t=n.$implicit;f(),J(" ",t.value.Sample," ")}}function Li(e,n){e&1&&(r(0,"th",16),u(1," Condition "),s())}function Pi(e,n){if(e&1){let t=B();r(0,"td",17)(1,"mat-form-field")(2,"input",18,1),D("change",function(o){T(t);let a=Vt(3),c=g(2);return k(c.handleAutoCompleteChange(o,a.value))}),s(),r(4,"mat-label"),u(5),s()()()}if(e&2){let t=n.$implicit;f(2),Ot("placeholder",t.value.Sample),Ot("value",t.value.Condition),f(3),N(t.value.Sample)}}function Ri(e,n){e&1&&U(0,"tr",19)}function Bi(e,n){e&1&&U(0,"tr",20)}function Ui(e,n){if(e&1&&(r(0,"table",8,0),At(2,10),I(3,Ni,2,0,"th",11)(4,Vi,2,1,"td",12),Mt(),At(5,13),I(6,Li,2,0,"th",11)(7,Pi,6,3,"td",12),Mt(),I(8,Ri,1,0,"tr",14)(9,Bi,1,0,"tr",15),s()),e&2){let t=g();w("dataSource",t.annotationData),f(8),w("matHeaderRowDef",t.displayedColumns),f(),w("matRowDefColumns",t.displayedColumns)}}var Qe=(()=>{class e{set annotation(t){t&&(this._annotation=t,this.annotationData=t.annotations.map(i=>this.fb.group({Sample:new S(i.Sample,G.required),Condition:new S(i.Condition,G.required)})),this.form.patchValue({columns:this.annotationData.map(i=>i.value.Sample)}))}get annotation(){return this._annotation}set projectFile(t){this._projectFile=t,this.web.getProjectFileColumns(t.id).subscribe(i=>{let o=[];i.forEach(a=>{o.includes(a)||o.push(a)}),this.columns=o})}get projectFile(){return this._projectFile}onSelectionChange(t){let i=t.source,o=-1,a=i.selected,c;for(let m=0;m<a.length;m++)if(!this.lastSelection.find(h=>h===a[m].value)){c=a[m];break}let d=i.options.toArray();o=d.indexOf(c),this.shiftPressed&&this.lastSelectedIndex>-1&&d.forEach((m,h)=>{this.isBetween(h,this.lastSelectedIndex,o)&&(console.log(m),m.select())}),this.lastSelection=this.form.value.columns?.slice(),this.lastSelectedIndex=o,this.table?.renderRows()}constructor(t,i,o){this.fb=t,this.web=i,this.dialogRef=o,this.columns=[],this.shiftPressed=!1,this.displayedColumns=["Sample","Condition"],this.form=this.fb.group({columns:new S([])}),this.annotationData=[],this.lastSelectedIndex=-1,this.lastSelection=[],window.addEventListener("keydown",a=>{a.key==="Shift"&&(this.shiftPressed=!0)}),window.addEventListener("keyup",a=>{a.key==="Shift"&&(this.shiftPressed=!1)}),this.form.controls.columns.valueChanges.subscribe(a=>{if(a){let c=a.map(d=>{let m=d.split(/\./g);return console.log(m),m.length>2?{Sample:d,Condition:m.slice(0,m.length-1).join(".")}:m.length===2?{Sample:d,Condition:m[0]}:{Sample:d,Condition:""}});for(let d=0;d<c.length;d++)this.annotationData.find(m=>m.value.Sample===c[d].Sample)||this.annotationData.push(this.fb.group({Sample:new S(c[d].Sample,G.required),Condition:new S(c[d].Condition,G.required)}));for(let d=0;d<this.annotationData.length;d++)this.annotationData[d].value.Sample&&(a.includes(this.annotationData[d].value.Sample)||this.annotationData.splice(d,1))}})}cancel(){this.dialogRef.close()}save(){let t=!0,i=this.annotationData.map(o=>(o.valid||(t=!1),o.value));t&&this.dialogRef.close(i)}handleAutoCompleteChange(t,i){console.log(t,i)}isBetween(t,i,o){return i<o?t>=i&&t<=o:t>=o&&t<=i}static{this.\u0275fac=function(i){return new(i||e)(M(nt),M(X),M(ut))}}static{this.\u0275cmp=$({type:e,selectors:[["app-analysis-group-sample-annotation-modal"]],viewQuery:function(i,o){if(i&1&&te(Ti,5),i&2){let a;ee(a=ie())&&(o.table=a.first)}},inputs:{annotation:"annotation",projectFile:"projectFile"},standalone:!0,features:[K],decls:16,vars:3,consts:[["table",""],["optionCondition",""],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[2,"width","300px"],["formControlName","columns",3,"selectionChange","multiple"],[3,"value"],["mat-table","",3,"dataSource"],["mat-button","",3,"click"],["matColumnDef","Sample"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Condition"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matInput","",2,"border-radius","0",3,"change","placeholder","value"],["mat-header-row",""],["mat-row",""]],template:function(i,o){i&1&&(r(0,"h2",2),u(1,"Sample Annotation"),s(),r(2,"div",3)(3,"form",4)(4,"mat-form-field",5)(5,"mat-select",6),D("selectionChange",function(c){return o.onSelectionChange(c)}),V(6,ki,2,2,"mat-option",7,R),s(),r(8,"mat-label"),u(9,"Columns"),s()()(),I(10,Ui,10,3,"table",8),s(),r(11,"mat-dialog-actions")(12,"button",9),D("click",function(){return o.save()}),u(13,"Submit"),s(),r(14,"button",9),D("click",function(){return o.cancel()}),u(15,"Close"),s()()),i&2&&(f(3),w("formGroup",o.form),f(2),w("multiple",!0),f(),L(o.columns),f(4),E(o.annotationData.length>0?10:-1))},dependencies:[dt,ht,Y,O,tt,z,et,it,at,Ct,pt,ot,_t,Lt,ft,Z,_e,ge,xe,we,Se,De,ve,be,Ce,ye]})}}return e})();function ji(e,n){if(e&1&&(r(0,"mat-option",7),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function Hi(e,n){if(e&1&&(r(0,"mat-option",7),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function $i(e,n){if(e&1&&(r(0,"mat-option",7),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function Ki(e,n){if(e&1&&(r(0,"mat-option",7),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function qi(e,n){if(e&1&&(r(0,"mat-option",7),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function zi(e,n){if(e&1&&(r(0,"mat-option",7),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function Oi(e,n){if(e&1&&(r(0,"mat-form-field")(1,"mat-select",14),V(2,zi,2,2,"mat-option",7,R),s(),r(4,"mat-label"),u(5,"Comparison Label"),s()()),e&2){let t=g(4);f(2),L(t.comparison_labels)}}function Yi(e,n){e&1&&(r(0,"mat-form-field"),U(1,"input",15),r(2,"mat-label"),u(3,"Comparison Label"),s()())}function Xi(e,n){if(e&1){let t=B();r(0,"mat-tab",4),At(1),r(2,"div")(3,"form",5)(4,"div")(5,"mat-form-field")(6,"mat-select",6),V(7,ji,2,2,"mat-option",7,R),s(),r(9,"mat-label"),u(10,"Condition A"),s()()(),r(11,"div")(12,"mat-form-field")(13,"mat-select",8),V(14,Hi,2,2,"mat-option",7,R),s(),r(16,"mat-label"),u(17,"Condition B"),s()()(),r(18,"div")(19,"mat-form-field")(20,"mat-select",9),V(21,$i,2,2,"mat-option",7,R),s(),r(23,"mat-label"),u(24,"Fold Change Column"),s()()(),r(25,"div")(26,"mat-form-field")(27,"mat-select",10),V(28,Ki,2,2,"mat-option",7,R),s(),r(30,"mat-label"),u(31,"P-Value Column"),s()()(),r(32,"div")(33,"mat-form-field")(34,"mat-select",11),V(35,qi,2,2,"mat-option",7,R),s(),r(37,"mat-label"),u(38,"Comparison Column"),s()()(),u(39," If the comparison column has been selected, please select the comparison label column below. If not, please write the comparison label in the text box below. "),r(40,"div"),I(41,Oi,6,0,"mat-form-field")(42,Yi,4,0,"mat-form-field"),s()()(),r(43,"div",12)(44,"button",13),D("click",function(){T(t);let o=g().$implicit,a=g(2);return k(a.copyComparison(o))}),r(45,"mat-icon"),u(46,"content_copy"),s()(),r(47,"button",13),D("click",function(){T(t);let o=g().$index,a=g(2);return k(a.removeComparison(o))}),r(48,"mat-icon"),u(49,"remove"),s()()(),Mt(),s()}if(e&2){let t=g().$implicit,i=g(2);w("label",t.value.comparison_label),f(3),w("formGroup",t),f(4),L(i.conditions),f(7),L(i.conditions),f(7),L(i.columns),f(7),L(i.columns),f(7),L(i.columns),f(6),E(t.value.comparison_col?41:42)}}function Wi(e,n){if(e&1&&I(0,Xi,50,3,"mat-tab",4),e&2){let t=n.$implicit;E(t.value.comparison_label?0:-1)}}function Qi(e,n){if(e&1&&(r(0,"mat-tab-group",2),V(1,Wi,1,1,null,null,R),s()),e&2){let t=g();f(),L(t.form)}}var Je=(()=>{class e{set comparisonMatrix(t){this._comparisonMatrix=t,this.form=t.matrix.map(i=>this.fb.group({condition_A:new S(i.condition_A,G.required),condition_B:new S(i.condition_B,G.required),fold_change_col:new S(i.fold_change_col,G.required),p_value_col:new S(i.p_value_col,G.required),comparison_label:new S(i.comparison_label,G.required),comparison_col:new S(i.comparison_col)}));for(let i of this.form)i.controls.comparison_col.value&&this.web.getUniqueComparisonLabel(t.file,i.controls.comparison_col.value).subscribe(o=>{this.comparison_labels=o}),i.controls.comparison_col.valueChanges.subscribe(o=>{o&&this.web.getUniqueComparisonLabel(t.file,o).subscribe(a=>{this.comparison_labels=a})}),i.controls.comparison_label.valueChanges.subscribe(o=>{o||i.controls.comparison_label.setValue("temp_title")})}set projectFile(t){this._projectFile=t,this.web.getProjectFileColumns(t.id).subscribe(i=>{let o=[];i.forEach(a=>{o.includes(a)||o.push(a)}),this.columns=o})}get projectFile(){return this._projectFile}set sampleAnnotations(t){this._sampleAnnotations=t,t&&(this.conditions=[],t.annotations.forEach(i=>{console.log(i.Condition),this.conditions.includes(i.Condition)||this.conditions.push(i.Condition)}))}get sampleAnnotations(){return this._sampleAnnotations}constructor(t,i,o){this.web=t,this.fb=i,this.dialogRef=o,this.comparison_labels=[],this.columns=[],this.conditions=[],this.form=[]}addComparison(){let t=this.fb.group({condition_A:new S(null,G.required),condition_B:new S(null,G.required),fold_change_col:new S(null,G.required),p_value_col:new S(null,G.required),comparison_label:new S(`comparison_${this.form.length+1}`,G.required),comparison_col:new S(null)});this.form.push(t),t.controls.comparison_col.valueChanges.subscribe(i=>{i&&this.web.getUniqueComparisonLabel(this.comparisonMatrix.file,i).subscribe(o=>{this.comparison_labels=o})}),t.controls.comparison_label.valueChanges.subscribe(i=>{i||t.controls.comparison_label.setValue("temp_title")})}removeComparison(t){this.form.splice(t,1)}copyComparison(t){let i=this.fb.group({condition_A:new S(t.value.condition_A,G.required),condition_B:new S(t.value.condition_B,G.required),fold_change_col:new S(t.value.fold_change_col,G.required),p_value_col:new S(t.value.p_value_col,G.required),comparison_label:new S(`comparison_${this.form.length+1}`,G.required),comparison_col:new S(t.value.comparison_col)});this.form.push(i),i.controls.comparison_col.valueChanges.subscribe(o=>{o&&this.web.getUniqueComparisonLabel(this.comparisonMatrix.file,o).subscribe(a=>{this.comparison_labels=a})}),i.controls.comparison_label.valueChanges.subscribe(o=>{o||i.controls.comparison_label.setValue("temp_title")})}save(){let t=!0;this.form.forEach(i=>{i.valid||(t=!1)}),t&&this.dialogRef.close(this.form.map(i=>i.value))}cancel(){this.dialogRef.close()}static{this.\u0275fac=function(i){return new(i||e)(M(X),M(nt),M(ut))}}static{this.\u0275cmp=$({type:e,selectors:[["app-analysis-group-comparison-matrix-modal"]],inputs:{comparisonMatrix:"comparisonMatrix",projectFile:"projectFile",sampleAnnotations:"sampleAnnotations"},standalone:!0,features:[K],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-stretch-tabs","false"],["mat-button","",3,"click"],[3,"label"],[2,"display","flex","flex-direction","column","gap","10px","overflow-y","hidden",3,"formGroup"],["formControlName","condition_A"],[3,"value"],["formControlName","condition_B"],["formControlName","fold_change_col"],["formControlName","p_value_col"],["formControlName","comparison_col"],[2,"display","flex","flex-direction","row","gap","10px"],["mat-icon-button","","color","warn",3,"click"],["formControlName","comparison_label"],["matInput","","type","text","formControlName","comparison_label"]],template:function(i,o){i&1&&(r(0,"h2",0),u(1,"Analysis Group Comparison Matrix"),s(),r(2,"div",1),I(3,Qi,3,0,"mat-tab-group",2),s(),r(4,"mat-dialog-actions")(5,"button",3),D("click",function(){return o.addComparison()}),u(6," Add Comparison "),s(),r(7,"button",3),D("click",function(){return o.save()}),u(8," Submit "),s(),r(9,"button",3),D("click",function(){return o.cancel()}),u(10," Close "),s()()),i&2&&(f(3),E(o.form.length>0?3:-1))},dependencies:[dt,ht,wt,xt,Y,O,bt,tt,z,et,it,at,Ct,pt,ot,_t,Me,Ae,ft,Z],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return e})();var Ze=(()=>{class e{constructor(t,i,o,a,c){this.fb=t,this.dialogRef=i,this.web=o,this.ws=a,this.sb=c,this.analysisGroupIDs=[],this.form=this.fb.group({search:new S("",G.required),searchMode:new S("full",G.required),foldChange:new S(.6,G.required),pValue:new S(1.31,G.required)}),this.selectedProjects=[],this.ws.searchWSConnection?.subscribe(d=>{if(d&&d.type==="search_status")switch(d.status){case"complete":this.sb.open(`${location.host}/#/search-session/${d.id}`,"Dismiss",{duration:1e4}),this.dialogRef.close(d.id);break}})}search(){this.form.invalid||(this.selectedProjects.length===0?this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(this.analysisGroupIDs,this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode).subscribe(t=>{this.sb.open("Search queued","Dismiss",{duration:2e3})}):this.web.getAnalysisGroupsFromProjects(this.selectedProjects).subscribe(t=>{t&&this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(t.map(i=>i.id),this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode).subscribe(i=>{this.sb.open("Search queued","Dismiss",{duration:2e3})})}))}cancel(){this.dialogRef.close()}handleMultipleProjectSelection(t){this.selectedProjects=t}static{this.\u0275fac=function(i){return new(i||e)(M(nt),M(ut),M(X),M(Ut),M(Rt))}}static{this.\u0275cmp=$({type:e,selectors:[["app-search-modal"]],inputs:{analysisGroupIDs:"analysisGroupIDs"},standalone:!0,features:[K],decls:56,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","1px",3,"formGroup"],["matInput","","formControlName","search","id","search","type","text","placeholder","Search Term"],["formControlName","searchMode"],["value","gene"],["value","uniprot"],["value","pi"],["value","full"],["matInput","","type","number","formControlName","foldChange","placeholder","Log2 Fold Change"],["matInput","","type","number","formControlName","pValue","placeholder","P-Value"],[3,"selectedProjects","multipleSelection"],["mat-button","",3,"click"]],template:function(i,o){i&1&&(r(0,"h2",0),u(1,"Data Search"),s(),r(2,"div",1)(3,"form",2)(4,"mat-form-field"),U(5,"input",3),r(6,"mat-label"),u(7,"Search Term"),s()(),r(8,"p")(9,"b"),u(10,"Search Multiple Terms"),s(),U(11,"br"),u(12," In order to search with multiple terms, enclose each term in single quotes and separate them with "),r(13,"b"),u(14,"OR"),s(),u(15,". "),s(),r(16,"mat-form-field")(17,"mat-select",4)(18,"mat-option",5),u(19,"Gene Name"),s(),r(20,"mat-option",6),u(21,"UniProt Accession ID"),s(),r(22,"mat-option",7),u(23,"Primary IDs"),s(),r(24,"mat-option",8),u(25,"Full Text"),s()(),r(26,"mat-label"),u(27,"Search Mode"),s()(),r(28,"mat-form-field"),U(29,"input",9),r(30,"mat-label"),u(31,"Log2 Fold Change"),s()(),r(32,"mat-form-field"),U(33,"input",10),r(34,"mat-label"),u(35,"-Log10(P-Value)"),s()()(),U(36,"hr"),r(37,"p")(38,"b"),u(39,"Search by currently selected analysis groups or by selected projects below"),s(),U(40,"br"),u(41," By selecting the one or more projects below, the currently selected analysis groups will be ignored. "),s(),r(42,"mat-accordion")(43,"mat-expansion-panel")(44,"mat-expansion-panel-header")(45,"mat-panel-title"),u(46," Filter by Project "),s(),r(47,"mat-panel-description"),u(48," Optional "),s()(),r(49,"app-project-search",11),D("selectedProjects",function(c){return o.handleMultipleProjectSelection(c)}),s()()(),U(50,"hr"),s(),r(51,"mat-dialog-actions")(52,"button",12),D("click",function(){return o.search()}),u(53,"Search"),s(),r(54,"button",12),D("click",function(){return o.cancel()}),u(55,"Close"),s()()),i&2&&(f(3),w("formGroup",o.form),f(46),w("multipleSelection",!0))},dependencies:[dt,ht,ot,_t,at,Y,O,bt,ae,tt,z,et,it,ft,Z,Ct,pt,fe,pe,de,ue,he,me]})}}return e})();function tn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function en(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function nn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function on(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function an(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function rn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function sn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function ln(e,n){if(e&1&&(r(0,"mat-form-field")(1,"mat-select",8),V(2,on,2,2,"mat-option",5,R),s(),r(4,"mat-label"),u(5,"Mod Position in Peptide Column"),s()(),r(6,"mat-form-field")(7,"mat-select",9),V(8,an,2,2,"mat-option",5,R),s(),r(10,"mat-label"),u(11,"Mod Position in Protein Column"),s()(),r(12,"mat-form-field")(13,"mat-select",10),V(14,rn,2,2,"mat-option",5,R),s(),r(16,"mat-label"),u(17,"Localization Probability Column"),s()(),r(18,"mat-form-field")(19,"mat-select",11),V(20,sn,2,2,"mat-option",5,R),s(),r(22,"mat-label"),u(23,"Peptide Sequence Column"),s()()),e&2){let t=g(3);f(2),L(t.columns),f(6),L(t.columns),f(6),L(t.columns),f(6),L(t.columns)}}function cn(e,n){if(e&1&&(r(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),V(3,tn,2,2,"mat-option",5,R),s(),r(5,"mat-label"),u(6,"Primary ID Column"),s()(),r(7,"mat-form-field")(8,"mat-select",6),V(9,en,2,2,"mat-option",5,R),s(),r(11,"mat-label"),u(12,"Gene Name Column"),s()(),r(13,"mat-form-field")(14,"mat-select",7),V(15,nn,2,2,"mat-option",5,R),s(),r(17,"mat-label"),u(18,"UniProt Accession ID Column"),s()(),I(19,ln,24,0),s()),e&2){let t=g(2);w("formGroup",t.formDFColumn),f(3),L(t.columns),f(6),L(t.columns),f(6),L(t.columns),f(4),E(t.analysisGroupType&&t.analysisGroupType==="ptm"?19:-1)}}function mn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function pn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function un(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function dn(e,n){if(e&1&&(r(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),V(3,mn,2,2,"mat-option",5,R),s(),r(5,"mat-label"),u(6,"Primary ID Column"),s()(),r(7,"mat-form-field")(8,"mat-select",6),V(9,pn,2,2,"mat-option",5,R),s(),r(11,"mat-label"),u(12,"Gene Name Column"),s()(),r(13,"mat-form-field")(14,"mat-select",7),V(15,un,2,2,"mat-option",5,R),s(),r(17,"mat-label"),u(18,"UniProt Accession ID Column"),s()()()),e&2){let t=g(2);w("formGroup",t.formSearchedColumn),f(3),L(t.columns),f(6),L(t.columns),f(6),L(t.columns)}}function hn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function fn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function _n(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function Cn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function yn(e,n){if(e&1&&(r(0,"mat-option",5),u(1),s()),e&2){let t=n.$implicit;w("value",t),f(),N(t)}}function gn(e,n){if(e&1&&(r(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),V(3,hn,2,2,"mat-option",5,R),s(),r(5,"mat-label"),u(6,"Primary ID Column"),s()(),r(7,"mat-form-field")(8,"mat-select",6),V(9,fn,2,2,"mat-option",5,R),s(),r(11,"mat-label"),u(12,"Gene Name Column"),s()(),r(13,"mat-form-field")(14,"mat-select",7),V(15,_n,2,2,"mat-option",5,R),s(),r(17,"mat-label"),u(18,"UniProt Accession ID Column"),s()(),r(19,"mat-form-field")(20,"mat-select",12),V(21,Cn,2,2,"mat-option",5,R),s(),r(23,"mat-label"),u(24,"Copy Number Rank Column"),s()(),r(25,"mat-form-field")(26,"mat-select",13),V(27,yn,2,2,"mat-option",5,R),s(),r(29,"mat-label"),u(30,"Copy Number Column"),s()()()),e&2){let t=g(2);w("formGroup",t.formSearchedColumn),f(3),L(t.columns),f(6),L(t.columns),f(6),L(t.columns),f(6),L(t.columns),f(6),L(t.columns)}}function xn(e,n){if(e&1&&I(0,cn,20,2,"form",3)(1,dn,19,1,"form",3)(2,gn,31,1,"form",3),e&2){let t=g();E(t.file.file_category==="df"?0:t.file.file_category==="searched"?1:t.file.file_category==="copy_number"?2:-1)}}var ti=(()=>{class e{set file(t){this._file=t,t.extra_data&&(t.file_category==="df"?(this.formDFColumn.controls.primary_id_col.setValue(t.extra_data.primary_id_col),this.formDFColumn.controls.gene_name_col.setValue(t.extra_data.gene_name_col),this.formDFColumn.controls.uniprot_id_col.setValue(t.extra_data.uniprot_id_col),this.formDFColumn.controls.peptide_seq_col.setValue(t.extra_data.peptide_seq_col),this.formDFColumn.controls.modification_position_in_peptide_col.setValue(t.extra_data.modification_position_in_peptide_col),this.formDFColumn.controls.modification_position_in_protein_col.setValue(t.extra_data.modification_position_in_protein_col),this.formDFColumn.controls.localization_prob_col.setValue(t.extra_data.localization_prob_col)):t.file_category==="searched"?(this.formSearchedColumn.controls.primary_id_col.setValue(t.extra_data.primary_id_col),this.formSearchedColumn.controls.gene_name_col.setValue(t.extra_data.gene_name_col),this.formSearchedColumn.controls.uniprot_id_col.setValue(t.extra_data.uniprot_id_col)):t.file_category==="copy_number"&&(this.formCopyNumberColumn.controls.primary_id_col.setValue(t.extra_data.primary_id_col),this.formCopyNumberColumn.controls.gene_name_col.setValue(t.extra_data.gene_name_col),this.formCopyNumberColumn.controls.uniprot_id_col.setValue(t.extra_data.uniprot_id_col),this.formCopyNumberColumn.controls.rank_col.setValue(t.extra_data.rank_col),this.formCopyNumberColumn.controls.copy_number_col.setValue(t.extra_data.copy_number_col))),this.web.getProjectFileColumns(t.id).subscribe(i=>{this.columns=i})}get file(){return this._file}constructor(t,i,o){this.fb=t,this.matDialogRef=i,this.web=o,this._file=void 0,this.analysisGroupType=void 0,this.formDFColumn=this.fb.group({primary_id_col:new S("",G.required),gene_name_col:new S(""),uniprot_id_col:new S(""),peptide_seq_col:new S(""),modification_position_in_peptide_col:new S(""),modification_position_in_protein_col:new S(""),localization_prob_col:new S("")}),this.formSearchedColumn=this.fb.group({primary_id_col:new S("",G.required),gene_name_col:new S(""),uniprot_id_col:new S("")}),this.formCopyNumberColumn=this.fb.group({primary_id_col:new S("",G.required),gene_name_col:new S(""),uniprot_id_col:new S(""),rank_col:new S(""),copy_number_col:new S("")}),this.columns=[]}save(){let t={file_category:this.file.file_category,extra_data:{}};this.file.file_category==="df"?(this.formDFColumn.controls.uniprot_id_col.value&&(t.extra_data.uniprot_id_col=this.formDFColumn.controls.uniprot_id_col.value),this.formDFColumn.controls.primary_id_col.value&&(t.extra_data.primary_id_col=this.formDFColumn.controls.primary_id_col.value),this.formDFColumn.controls.gene_name_col.value&&(t.extra_data.gene_name_col=this.formDFColumn.controls.gene_name_col.value),this.formDFColumn.controls.modification_position_in_peptide_col.value&&(t.extra_data.modification_position_in_peptide_col=this.formDFColumn.controls.modification_position_in_peptide_col.value),this.formDFColumn.controls.modification_position_in_protein_col.value&&(t.extra_data.modification_position_in_protein_col=this.formDFColumn.controls.modification_position_in_protein_col.value),this.formDFColumn.controls.localization_prob_col.value&&(t.extra_data.localization_prob_col=this.formDFColumn.controls.localization_prob_col.value),this.formDFColumn.controls.peptide_seq_col.value&&(t.extra_data.peptide_seq_col=this.formDFColumn.controls.peptide_seq_col.value)):this.file.file_category==="searched"&&(this.formSearchedColumn.controls.uniprot_id_col.value&&(t.extra_data.uniprot_id_col=this.formSearchedColumn.controls.uniprot_id_col.value),this.formSearchedColumn.controls.primary_id_col.value&&(t.extra_data.primary_id_col=this.formSearchedColumn.controls.primary_id_col.value),this.formSearchedColumn.controls.gene_name_col.value&&(t.extra_data.gene_name_col=this.formSearchedColumn.controls.gene_name_col.value)),this.matDialogRef.close(t)}cancel(){this.matDialogRef.close()}static{this.\u0275fac=function(i){return new(i||e)(M(nt),M(ut),M(X))}}static{this.\u0275cmp=$({type:e,selectors:[["app-file-extra-data-modal"]],inputs:{analysisGroupType:"analysisGroupType",file:"file"},standalone:!0,features:[K],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-button","",3,"click"],[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["formControlName","primary_id_col"],[3,"value"],["formControlName","gene_name_col"],["formControlName","uniprot_id_col"],["formControlName","modification_position_in_peptide_col"],["formControlName","modification_position_in_protein_col"],["formControlName","localization_prob_col"],["formControlName","peptide_seq_col"],["formControlName","rank_col"],["formControlName","copy_number_col"]],template:function(i,o){i&1&&(r(0,"h2",0),u(1,"File Extra Data"),s(),r(2,"div",1),I(3,xn,3,1),s(),r(4,"mat-dialog-actions")(5,"button",2),D("click",function(){return o.save()}),u(6,"Submit"),s(),r(7,"button",2),D("click",function(){return o.cancel()}),u(8,"Close"),s()()),i&2&&(f(3),E(o.file?3:-1))},dependencies:[dt,ht,Y,O,tt,z,et,it,ot,pt,Ct,at,ft,Z]})}}return e})();var bn=ni(oi());Xt.plotlyjs=bn;var ei=(()=>{class e{set curtainData(t){this._curtainData=t,this.drawVolcanoPlot()}get curtainData(){return this._curtainData}constructor(t,i){this.accounts=t,this.graph=i,this.selected=new lt,this._curtainData=void 0,this.graphData=[],this.graphLayout={height:700,width:700,margin:{r:null,l:null,b:null,t:null},xaxis:{title:"<b>Log2FC</b>",tickmode:"linear",ticklen:5,showgrid:!1,visible:!0,tickfont:{size:14,color:"black"}},yaxis:{title:"<b>-log10(p-value)</b>",tickmode:"linear",ticklen:5,showgrid:!1,visible:!0,showticklabels:!0,zeroline:!0,tickfont:{size:14,color:"black"}},annotations:[],showlegend:!0,legend:{orientation:"h"},title:{text:"",font:{size:24,family:"Arial, sans-serif",color:"black"}}},this.revision=0,this.config={toImageButtonOptions:{format:"svg",filename:this.graphLayout.title.text,height:this.graphLayout.height,width:this.graphLayout.width,scale:1}},this.colorMap={},this.graph.redrawTrigger.subscribe(()=>{this.drawVolcanoPlot()})}drawVolcanoPlot(){if(!this.curtainData&&!this.curtainData.settings)return;console.log(this.curtainData),this.graphLayout.title.text=this.curtainData.settings.title,this.colorMap=this.curtainData.settings.colorMap;let t=Object.keys(this.colorMap),i=this.curtainData.data.filter(y=>y["Fold Change"]!==null&&y["Fold Change"]!==void 0&&!isNaN(y["Fold Change"])),o=this.curtainData.data.filter(y=>y["P-value"]!==null&&y["P-value"]!==void 0&&!isNaN(y["P-value"])),a=Math.min(...i.map(y=>y["Fold Change"])),c=Math.max(...i.map(y=>y["Fold Change"])),d=0,m=Math.max(...o.map(y=>y["P-value"]));this.graphLayout.xaxis.range=[a-.5,c+.5],this.graphLayout.yaxis.range=[d,m-d*.5];let h=this.curtainData.settings.volcanoAxis;h.minX&&(this.graphLayout.xaxis.range[0]=h.minX),h.maxX&&(this.graphLayout.xaxis.range[1]=h.maxX),h.minY&&(this.graphLayout.yaxis.range[0]=h.minY),h.maxY&&(this.graphLayout.yaxis.range[1]=h.maxY),h.x&&(this.graphLayout.xaxis.title=`<b>${h.x}</b>`),h.y&&(this.graphLayout.yaxis.title=`<b>${h.y}</b>`);let _={};_.Background={x:[],y:[],mode:"markers",type:"scatter",name:"Background",text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:"#a4a2a2",opacity:.3}};for(let y of this.curtainData.selections)_[y]={x:[],y:[],mode:"markers",type:"scattergl",name:y,text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:this.curtainData.settings.colorMap[y]}};this.curtainData.data.forEach(y=>{if(y["Primary ID"]in this.curtainData.selection_map){let j=this.curtainData.selection_map[y["Primary ID"]];for(let P of this.curtainData.selections)j[P]&&(_[P].x.push(y["Fold Change"]),_[P].y.push(y["P-value"]),_[P].text.push(`${y["Gene Names"]}(${y["Primary ID"]})`),_[P].data.push(y))}else if(this.curtainData.settings.backGroundColorGrey)_.Background.x.push(y["Fold Change"]),_.Background.y.push(y["P-value"]),_.Background.text.push(`${y["Gene Names"]}(${y["Primary ID"]})`),_.Background.data.push(y);else{let j=this.significantGroup(y["Fold Change"],y["P-value"]),P=t.find(H=>H.startsWith(`${j[0]} (${y.Comparison})`));P&&(_[P]||(_[P]={x:[],y:[],mode:"markers",type:"scatter",name:P,text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:this.curtainData.settings.colorMap[P]}}),_[P].x.push(y["Fold Change"]),_[P].y.push(y["P-value"]),_[P].text.push(`${y["Gene Names"]}(${y["Primary ID"]})`),_[P].data.push(y))}}),this.graphData=[];for(let y in _)this.graphData.push(_[y]);this.graphData=this.graphData.reverse();let p=[];p.push({type:"line",x0:-this.curtainData.settings.log2FCCutoff,y0:0,x1:-this.curtainData.settings.log2FCCutoff,y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1,dash:"dot"}}),p.push({type:"line",x0:this.curtainData.settings.log2FCCutoff,x1:this.curtainData.settings.log2FCCutoff,y0:0,y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1,dash:"dot"}});let C=this.graphLayout.xaxis.range[0]-1;this.curtainData.settings.volcanoAxis.minX&&(C=this.curtainData.settings.volcanoAxis.minX-1);let b=this.graphLayout.xaxis.range[1]+1;if(this.curtainData.settings.volcanoAxis.maxX&&(b=this.curtainData.settings.volcanoAxis.maxX+1),p.push({type:"line",x0:C,x1:b,y0:-Math.log10(this.curtainData.settings.pCutoff),y1:-Math.log10(this.curtainData.settings.pCutoff),line:{color:"rgb(21,4,4)",width:1,dash:"dot"}}),this.graphLayout.shapes=p,this.curtainData.settings.volcanoPlotGrid&&(this.graphLayout.yaxis.showgrid=this.curtainData.settings.volcanoPlotGrid.y,this.graphLayout.xaxis.showgrid=this.curtainData.settings.volcanoPlotGrid.x),this.curtainData.settings.volcanoPlotDimension&&(this.curtainData.settings.volcanoPlotDimension.height&&(this.graphLayout.height=this.curtainData.settings.volcanoPlotDimension.height),this.curtainData.settings.volcanoPlotDimension.width&&(this.graphLayout.width=this.curtainData.settings.volcanoPlotDimension.width),this.curtainData.settings.volcanoPlotDimension.margin))for(let y in this.curtainData.settings.volcanoPlotDimension.margin)this.curtainData.settings.volcanoPlotDimension.margin[y]&&(this.graphLayout.margin[y]=this.curtainData.settings.volcanoPlotDimension.margin[y]);if(this.curtainData.settings.volcanoPlotYaxisPosition&&(this.curtainData.settings.volcanoPlotYaxisPosition.includes("left")&&this.graphLayout.shapes.push({type:"line",x0:this.graphLayout.xaxis.range[0],x1:this.graphLayout.xaxis.range[0],y0:this.graphLayout.yaxis.range[0],y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1}}),this.curtainData.settings.volcanoPlotYaxisPosition.includes("middle")?this.graphLayout.xaxis.zerolinecolor="#000000":this.graphLayout.xaxis.zerolinecolor="#ffffff"),this.graphLayout.annotations=[],this.curtainData.settings.textAnnotation)for(let y in this.curtainData.settings.textAnnotation)this.curtainData.settings.textAnnotation[y].data.showannotation===!0&&this.graphLayout.annotations.push(this.curtainData.settings.textAnnotation[y].data);this.config={toImageButtonOptions:{format:"svg",filename:this.graphLayout.title.text,height:this.graphLayout.height,width:this.graphLayout.width,scale:1,margin:this.graphLayout.margin}};let v=document.getElementsByTagName("body")[0],F=window.getComputedStyle(v).backgroundColor;if(this.accounts.userAccount.darkMode){this.graphLayout.plot_bgcolor=F,this.graphLayout.paper_bgcolor=F,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white";for(let y of this.graphLayout.shapes)y.line.color="white";this.graphLayout.yaxis.showgrid&&(this.graphLayout.yaxis.gridcolor="white"),this.graphLayout.xaxis.showgrid&&(this.graphLayout.xaxis.gridcolor="white");for(let y of this.graphLayout.annotations)y.font.color="white",y.arrowcolor="white"}else this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14};if(this.curtainData.settings.volcanoAdditionalShapes)for(let y of this.curtainData.settings.volcanoAdditionalShapes)this.graphLayout.shapes.push(y);this.revision+=1,console.log("cutoff",p),console.log(this.graphData)}significantGroup(t,i){let o=-Math.log10(this.curtainData.settings.pCutoff),a=[],c="";return o>i?(a.push("P-value > "+this.curtainData.settings.pCutoff),c="P-value > "):(a.push("P-value <= "+this.curtainData.settings.pCutoff),c="P-value <= "),Math.abs(t)>this.curtainData.settings.log2FCCutoff?(a.push("FC > "+this.curtainData.settings.log2FCCutoff),c+="FC > "):(a.push("FC <= "+this.curtainData.settings.log2FCCutoff),c+="FC <= "),[a.join(";"),c]}selectData(t){if("points"in t){let i=[];for(let o of t.points)i.push(o.data.data[o.pointIndex]);this.selected.emit(i)}}static{this.\u0275fac=function(i){return new(i||e)(M(Bt),M(Fe))}}static{this.\u0275cmp=$({type:e,selectors:[["app-volcano-plot"]],inputs:{curtainData:"curtainData"},outputs:{selected:"selected"},standalone:!0,features:[K],decls:1,vars:5,consts:[[3,"selected","plotlyClick","data","config","layout","revision","updateOnlyWithRevision"]],template:function(i,o){i&1&&(r(0,"plotly-plot",0),D("selected",function(c){return o.selectData(c)})("plotlyClick",function(c){return o.selectData(c)}),s()),i&2&&w("data",o.graphData)("config",o.config)("layout",o.graphLayout)("revision",o.revision)("updateOnlyWithRevision",!0)},dependencies:[Xt,Ee]})}}return e})();function vn(e,n){if(e&1){let t=B();r(0,"div",0)(1,"app-volcano-plot",3),D("selected",function(o){T(t);let a=g();return k(a.handleVolcanoSelection(o))}),s()()}if(e&2){let t=g();f(),w("curtainData",t.curtainData)}}function Sn(e,n){if(e&1&&(r(0,"p"),u(1," Associated Project: "),r(2,"a",18),u(3),s()()),e&2){let t=g(2);f(2),Zt("href","/#/project/",t.analysisGroup.project,"",Jt),f(),N(t.associatedProject.name)}}function Dn(e,n){if(e&1&&(r(0,"p"),u(1),s(),U(2,"mat-progress-bar",19)),e&2){let t=g(2);f(),N(t.composingCurtainProgress.message),f(),w("value",t.composingCurtainProgress.progress)("mode","determinate")("color","primary")}}function An(e,n){if(e&1){let t=B();r(0,"button",20),D("click",function(){T(t);let o=g(2);return k(o.composeDataFromCurtain())}),u(1,"Use Curtain Link For Data"),s()}if(e&2){let t=g(2);w("disabled",!t.accounts.loggedIn)}}function Mn(e,n){if(e&1&&u(0),e&2){let t=g(2);J(": ",t.analysisGroupDF.name,"")}}function En(e,n){if(e&1){let t=B();r(0,"app-upload-file",21),D("fileUploaded",function(o){T(t);let a=g(2);return k(a.handleFileUploaded(o,"df"))}),s()}if(e&2){let t=g(2);w("analysisGroupId",t.analysisGroup.id)("fileCategory","df")}}function Fn(e,n){if(e&1){let t=B();r(0,"button",22),D("click",function(){T(t);let o=g(3);return k(o.deleteFile(o.analysisGroupDF))}),r(1,"mat-icon"),u(2,"delete"),s()(),r(3,"button",23),D("click",function(){T(t);let o=g(3);return k(o.openExtraDataModal(o.analysisGroupDF))}),u(4,"Extra Data"),s()}if(e&2){let t=g(3);f(3),w("disabled",!t.accounts.loggedIn)}}function In(e,n){if(e&1){let t=B();r(0,"button",22),D("click",function(){T(t);let o=g(2);return k(o.downloadFile(o.analysisGroupDF))}),r(1,"mat-icon"),u(2,"download"),s()(),I(3,Fn,5,1)}if(e&2){let t=g(2);f(3),E(t.canEdit?3:-1)}}function Gn(e,n){if(e&1&&u(0),e&2){let t=g(2);J(": ",t.analysisGroupSearched.name,"")}}function Tn(e,n){if(e&1){let t=B();r(0,"app-upload-file",21),D("fileUploaded",function(o){T(t);let a=g(2);return k(a.handleFileUploaded(o,"searched"))}),s()}if(e&2){let t=g(2);w("analysisGroupId",t.analysisGroup.id)("fileCategory","searched")}}function kn(e,n){if(e&1){let t=B();r(0,"button",22),D("click",function(){T(t);let o=g(3);return k(o.deleteFile(o.analysisGroupSearched))}),r(1,"mat-icon"),u(2,"delete"),s()(),r(3,"button",23),D("click",function(){T(t);let o=g(3);return k(o.openExtraDataModal(o.analysisGroupSearched))}),u(4,"Extra Data"),s()}if(e&2){let t=g(3);f(3),w("disabled",!t.accounts.loggedIn)}}function Nn(e,n){if(e&1){let t=B();r(0,"button",22),D("click",function(){T(t);let o=g(2);return k(o.downloadFile(o.analysisGroupSearched))}),r(1,"mat-icon"),u(2,"download"),s()(),I(3,kn,5,1)}if(e&2){let t=g(2);f(3),E(t.canEdit?3:-1)}}function Vn(e,n){if(e&1&&u(0),e&2){let t=g(2);J(": ",t.analysisGroupCopyNumber.name,"")}}function Ln(e,n){if(e&1){let t=B();r(0,"app-upload-file",21),D("fileUploaded",function(o){T(t);let a=g(2);return k(a.handleFileUploaded(o,"copy_number"))}),s()}if(e&2){let t=g(2);w("analysisGroupId",t.analysisGroup.id)("fileCategory","copy_number")}}function Pn(e,n){if(e&1){let t=B();r(0,"button",22),D("click",function(){T(t);let o=g(3);return k(o.deleteFile(o.analysisGroupCopyNumber))}),r(1,"mat-icon"),u(2,"delete"),s()(),r(3,"button",23),D("click",function(){T(t);let o=g(3);return k(o.openExtraDataModal(o.analysisGroupCopyNumber))}),u(4,"Extra Data"),s()}if(e&2){let t=g(3);f(3),w("disabled",!t.accounts.loggedIn)}}function Rn(e,n){if(e&1){let t=B();r(0,"button",22),D("click",function(){T(t);let o=g(2);return k(o.downloadFile(o.analysisGroupCopyNumber))}),r(1,"mat-icon"),u(2,"download"),s()(),I(3,Pn,5,1)}if(e&2){let t=g(2);f(3),E(t.canEdit?3:-1)}}function Bn(e,n){if(e&1&&u(0),e&2){let t=g(3);J("(",t.sampleAnnotations.annotations.length,")")}}function Un(e,n){if(e&1){let t=B();r(0,"button",23),D("click",function(){T(t);let o=g(2);return k(o.setAnnotationModal(o.analysisGroupSearched))}),u(1,"Sample Annotation "),I(2,Bn,1,1),s()}if(e&2){let t=g(2);w("disabled",!t.canEdit),f(2),E(t.sampleAnnotations?2:-1)}}function jn(e,n){if(e&1&&u(0),e&2){let t=g(3);J("(",t.comparisonMatrix.matrix.length,")")}}function Hn(e,n){if(e&1){let t=B();r(0,"button",23),D("click",function(){T(t);let o=g(2);return k(o.setComparisonMatrixModal(o.sampleAnnotations,o.analysisGroupSearched,o.analysisGroupDF))}),u(1,"Comparison Matrix "),I(2,jn,1,1),s()}if(e&2){let t=g(2);w("disabled",!t.canEdit),f(2),E(t.comparisonMatrix?2:-1)}}function $n(e,n){if(e&1){let t=B();I(0,Sn,4,3,"p"),r(1,"form",4),D("ngSubmit",function(){T(t);let o=g();return k(o.updateAnalysisGroup())}),r(2,"mat-form-field",2),U(3,"input",5),r(4,"mat-label"),u(5,"Analysis Group Name"),s()(),r(6,"mat-form-field",2),U(7,"textarea",6),r(8,"mat-label"),u(9,"Analysis Group Description"),s()(),r(10,"div",7)(11,"mat-form-field",2),U(12,"input",8),r(13,"mat-label"),u(14,"Curtain Link"),s()(),r(15,"button",9),D("click",function(){T(t);let o=g();return k(o.refreshCurtainLink())}),r(16,"mat-icon"),u(17,"refresh"),s()()(),I(18,Dn,3,4),r(19,"div",7)(20,"button",10),u(21,"Update Analysis Group"),s(),I(22,An,2,1,"button",11),s()(),r(23,"div",12)(24,"div")(25,"p"),u(26,"Differential Analysis File "),I(27,Mn,1,1),s()(),I(28,En,1,2,"app-upload-file",13)(29,In,4,1),s(),r(30,"div",12)(31,"div")(32,"p"),u(33,"Searched File "),I(34,Gn,1,1),s()(),I(35,Tn,1,2,"app-upload-file",13)(36,Nn,4,1),s(),r(37,"div",12)(38,"div")(39,"p"),u(40,"Copy Number File "),I(41,Vn,1,1),s()(),I(42,Ln,1,2,"app-upload-file",13)(43,Rn,4,1),s(),r(44,"div",14),I(45,Un,3,2,"button",15)(46,Hn,3,2,"button",15),r(47,"button",16),D("click",function(){T(t);let o=g();return k(o.openSearchModal())}),r(48,"mat-icon"),u(49,"search"),s()(),r(50,"button",17),D("click",function(){T(t);let o=g();return k(o.deleteAnalysisGroup())}),r(51,"mat-icon"),u(52,"delete"),s()()()}if(e&2){let t=g();E(t.associatedProject?0:-1),f(),w("formGroup",t.form),f(14),w("disabled",!t.canEdit),f(3),E(t.composingCurtainProgress.started?18:-1),f(2),w("disabled",!t.canEdit),f(2),E(t.analysisGroup.curtain_link?22:-1),f(5),E(t.analysisGroupDF?27:-1),f(),E(t.canEdit?28:-1),f(),E(t.analysisGroupDF?29:-1),f(5),E(t.analysisGroupSearched?34:-1),f(),E(t.canEdit?35:-1),f(),E(t.analysisGroupSearched?36:-1),f(5),E(t.analysisGroupCopyNumber?41:-1),f(),E(t.canEdit?42:-1),f(),E(t.analysisGroupCopyNumber?43:-1),f(2),E(t.analysisGroupSearched?45:-1),f(),E(t.sampleAnnotations&&t.analysisGroupSearched&&t.analysisGroupDF?46:-1),f(4),w("disabled",!t.canEdit)}}var xa=(()=>{class e{set analysisGroup(t){this._analysisGroup=t,t&&this.accounts.getAnalysisGroupPermissions(t.id).subscribe(i=>{this.canEdit=i.edit}),this.curtainData=void 0,t&&(t.curtain_link&&this.getCurtainData(),this.dataService.analysisGroupChoices.forEach(i=>{i.value===t.analysis_group_type&&(this.analysisType=i.label)}),this.titleService.setTitle(`AG - ${t.name}`),this.web.getProject(t.project).subscribe(i=>{this.associatedProject=i}),this.form.controls.name.setValue(t.name),this.form.controls.description.setValue(t.description),this.form.controls.curtain_link.setValue(t.curtain_link),this.getFiles(t))}getFiles(t){this.web.getAnalysisGroupFiles(t.id).subscribe(i=>{this.analysisGroupDF=i.find(o=>o.file_category==="df"),this.analysisGroupSearched=i.find(o=>o.file_category==="searched"),this.analysisGroupSearched&&this.web.getProjectFileSampleAnnotations(this.analysisGroupSearched.id).subscribe(o=>{this.sampleAnnotations=o}),this.analysisGroupDF&&this.web.getProjectFileComparisonMatrix(this.analysisGroupDF.id).subscribe(o=>{this.comparisonMatrix=o})})}get analysisGroup(){return this._analysisGroup}constructor(t,i,o,a,c,d,m,h){this.sb=t,this.dataService=i,this.titleService=o,this.fb=a,this.web=c,this.matDialog=d,this.accounts=m,this.ws=h,this.analysisType="proteomics",this.canEdit=!1,this.composingCurtainProgress={progress:0,message:"",completed:!1,error:!1,started:!1},this.deleted=new lt,this.updated=new lt,this.form=this.fb.group({name:new S({value:"",disabled:!this.accounts.loggedIn},{validators:[G.required]}),description:new S({value:"",disabled:!this.accounts.loggedIn},{validators:[G.required]}),curtain_link:new S({value:"",disabled:!this.accounts.loggedIn})}),this.ws.curtainWSConnection?.subscribe(_=>{if(_.analysis_group_id===this.analysisGroup?.id){if(_.type==="curtain_status")switch(_.status){case"started":this.sb.open("Curtain link retrieval started","Dismiss",{duration:5e3});break;case"complete":this.sb.open("Curtain link retrieval complete","Dismiss",{duration:5e3}),this.getCurtainData();break}else if(_.type==="curtain_compose_status")switch(_.status){case"started":this.sb.open("Composing data from Curtain started","Dismiss",{duration:5e3}),this.composingCurtainProgress.progress=30,this.composingCurtainProgress.message="Removed analysis group associated data if exist";break;case"complete":this.sb.open("Composing data from Curtain completed. Please manually set Condition A and Condition B in Comparison Matrix.","Dismiss"),this.composingCurtainProgress.progress=100,this.composingCurtainProgress.message="Composing data from Curtain completed. Please manually set Condition A and Condition B in Comparison Matrix.",this.composingCurtainProgress.completed=!0,this.web.getAnalysisGroup(this.analysisGroup.id).subscribe(p=>{this.analysisGroup=p});break;case"error":this.sb.open("Error composing data from Curtain","Dismiss",{duration:5e3}),this.composingCurtainProgress.error=!0;break}}})}updateAnalysisGroup(){this.form.invalid||this.web.updateAnalysisGroup(this.analysisGroup.id,this.form.value.name,this.form.value.description,this.form.value.curtain_link,this.web.searchSessionID).subscribe(t=>{this.updated.emit(t)})}getCurtainData(){this.analysisGroup&&(this.sb.open("Retrieving curtain visualization","Dismiss",{duration:5e3}),this.web.getCurtainLinkData(this.analysisGroup.id).subscribe(t=>{this.curtainData=t,this.sb.open("Curtain visualization retrieved","Dismiss",{duration:5e3})},t=>{this.sb.open("Error retrieving curtain visualization","Dismiss",{duration:5e3}),this.curtainData=void 0}))}handleFileUploaded(t,i){i==="searched"?(this.analysisGroupSearched=t,this.sb.open("Searched File uploaded","Dismiss",{duration:5e3})):i==="df"?(this.analysisGroupDF=t,this.sb.open("Differential Analysis File uploaded","Dismiss",{duration:5e3})):i==="copy_number"&&(this.analysisGroupCopyNumber=t,this.sb.open("Copy Number Analysis File uploaded","Dismiss",{duration:5e3}))}setAnnotationModal(t){let i=this.matDialog.open(Qe);i.componentInstance.projectFile=t,this.sampleAnnotations&&(i.componentInstance.annotation=this.sampleAnnotations),i.afterClosed().subscribe(o=>{o&&(console.log(this.sampleAnnotations),this.sampleAnnotations?this.web.updateSampleAnnotation(this.sampleAnnotations.id,this.sampleAnnotations.name,o).subscribe(a=>{this.sampleAnnotations=a,this.sb.open("Sample annotation updated","Dismiss",{duration:5e3})}):this.web.createSampleAnnotation(this.analysisGroup.id,this.analysisGroup?.name+" sample annotation",o,this.analysisGroupSearched.id).subscribe(a=>{this.sampleAnnotations=a,this.sb.open("Sample annotation created","Dismiss",{duration:5e3})}))})}setComparisonMatrixModal(t,i,o){let a=this.matDialog.open(Je);a.componentInstance.sampleAnnotations=t,a.componentInstance.projectFile=o,this.comparisonMatrix&&(a.componentInstance.comparisonMatrix=this.comparisonMatrix),a.afterClosed().subscribe(c=>{c&&(this.comparisonMatrix?this.web.updateComparisonMatrix(this.comparisonMatrix.id,this.comparisonMatrix.name,c).subscribe(d=>{this.comparisonMatrix=d,this.sb.open("Comparison matrix updated","Dismiss",{duration:5e3})}):this.web.createComparisonMatrix(this.analysisGroup.id,this.analysisGroup?.name+" comparison matrix",c,o.id).subscribe(d=>{this.comparisonMatrix=d,this.sb.open("Comparison matrix created","Dismiss",{duration:5e3})}))})}deleteAnalysisGroup(){this.matDialog.open(Yt).afterClosed().subscribe(t=>{t&&this.web.deleteAnalysisGroup(this.analysisGroup.id).subscribe(()=>{this.deleted.emit(!0),this.sb.open("Analysis Group deleted","Dismiss",{duration:5e3})})})}openSearchModal(){let t=this.matDialog.open(Ze);t.componentInstance.analysisGroupIDs=[this.analysisGroup.id],t.afterClosed().subscribe(i=>{i&&window.open(`/#/search-session/${i}`,"_blank")})}openExtraDataModal(t){let i=this.matDialog.open(ti);i.componentInstance.analysisGroupType=this.analysisGroup?.analysis_group_type,i.componentInstance.file=t,i.afterClosed().subscribe(o=>{o&&(console.log(o),this.web.updateProjectFileExtraData(t.id,o.extra_data).subscribe(a=>{t.file_category==="df"?(this.analysisGroupDF=a,this.sb.open("Differential Analysis extra data updated","Dismiss",{duration:5e3})):t.file_category==="searched"?(this.analysisGroupSearched=a,this.sb.open("Searched extra data updated","Dismiss",{duration:5e3})):t.file_category==="copy_number"&&(this.analysisGroupCopyNumber=a,this.sb.open("Copy Number extra data updated","Dismiss",{duration:5e3}))}))})}refreshCurtainLink(){this.analysisGroup&&this.web.searchSessionID&&this.web.refreshCurtainLink(this.analysisGroup.id,this.web.searchSessionID).subscribe(t=>{this.analysisGroup=t,this.sb.open("Curtain data content refreshed","Dismiss",{duration:5e3})})}handleVolcanoSelection(t){console.log(t)}composeDataFromCurtain(){this.composingCurtainProgress={progress:0,message:"",completed:!1,error:!1},this.analysisGroup&&this.web.searchSessionID&&(this.composingCurtainProgress.started=!0,this.web.composeAnalysisGroupFilesFromCurtainData(this.analysisGroup.id,this.web.searchSessionID).subscribe(t=>{this.composingCurtainProgress.progress=10,this.composingCurtainProgress.message="Data composition started",this.sb.open("Data composition started","Dismiss",{duration:5e3})}))}deleteFile(t){this.matDialog.open(Yt).afterClosed().subscribe(i=>{i&&this.web.deleteProjectFile(t.id).subscribe(()=>{t.file_category==="df"?(this.analysisGroupDF=void 0,this.sb.open("Differential Analysis File deleted","Dismiss",{duration:5e3})):t.file_category==="searched"?(this.analysisGroupSearched=void 0,this.sb.open("Searched File deleted","Dismiss",{duration:5e3})):t.file_category==="copy_number"&&(this.analysisGroupCopyNumber=void 0,this.sb.open("Copy Number Analysis File deleted","Dismiss",{duration:5e3}))})})}downloadFile(t){this.web.getFileDownloadToken(t.id).subscribe(i=>{window.open(`${this.web.baseURL}/api/project_files/download/?token=${i.token}`)})}static{this.\u0275fac=function(i){return new(i||e)(M(Rt),M(Pt),M(ne),M(nt),M(X),M(oe),M(Bt),M(Ut))}}static{this.\u0275cmp=$({type:e,selectors:[["app-analysis-group-view"]],inputs:{analysisGroup:"analysisGroup"},outputs:{deleted:"deleted",updated:"updated"},standalone:!0,features:[K],decls:4,vars:2,consts:[[2,"display","flex","flex-direction","row","justify-content","center","flex-wrap","wrap"],[2,"display","flex","flex-direction","row","justify-content","center","padding","50px"],[2,"width","100%"],[3,"selected","curtainData"],[2,"display","flex","flex-direction","column","gap","20px","padding","20px",3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text","placeholder","Analysis Group Name"],["matInput","","formControlName","description","placeholder","Analysis Group Description"],[2,"display","flex","flex-direction","row","gap","10px"],["matInput","","formControlName","curtain_link","type","text","placeholder","Curtain Link"],["mat-icon-button","","type","button",3,"click","disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-flat-button","","color","primary","type","button",3,"disabled"],[2,"display","flex","flex-direction","row","gap","20px","align-items","center"],[3,"analysisGroupId","fileCategory"],[2,"display","flex","flex-direction","row","gap","20px","padding","20px"],["mat-flat-button","","color","primary",3,"disabled"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","",3,"click","disabled"],["target","_blank",3,"href"],[3,"value","mode","color"],["mat-flat-button","","color","primary","type","button",3,"click","disabled"],[3,"fileUploaded","analysisGroupId","fileCategory"],["mat-icon-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(i,o){i&1&&(I(0,vn,2,1,"div",0),r(1,"div",1)(2,"div",2),I(3,$n,53,18),s()()),i&2&&(E(o.curtainData?0:-1),f(3),E(o.analysisGroup?3:-1))},dependencies:[Lt,O,bt,tt,z,Z,at,xt,_t,ot,Y,et,it,We,wt,ei,jt]})}}return e})();export{Wn as a,xa as b};
