import{wa as m}from"./chunk-2IGXES36.js";import{a as l,c}from"./chunk-ZOIK2NCC.js";import{ca as n,ha as r,k as a}from"./chunk-EU3335TE.js";var u=(()=>{let s=class s{constructor(e){this.http=e,this.token="",this.loggedIn=!1,this.baseURL=m.baseURL,this.username="",this.lastVisited=new Date,this.triggerLoginSubject=new a,this.is_staff=!1}login(e,t){this.loggedIn=!1;let i=new l;return i.append("Content-Type","application/json"),i.append("Accept","application/json"),this.http.post(`${this.baseURL}/api/token-auth/`,{username:e,password:t},{responseType:"json",observe:"body"})}logout(){this.loggedIn=!1,this.token="",localStorage.removeItem("cinderToken"),localStorage.removeItem("cinderUsername")}loadLastVisited(){let e=new Date,t=localStorage.getItem("cinderLastVisited");t?(this.lastVisited=new Date(JSON.parse(t)),this.saveDate(e)):(this.lastVisited=e,this.saveDate(e))}loadAuthFromStorage(){let e=localStorage.getItem("cinderToken"),t=localStorage.getItem("cinderUsername");e&&t&&(this.token=e,this.username=t,this.loggedIn=!0)}saveToStorage(){localStorage.setItem("cinderToken",this.token),localStorage.setItem("cinderUsername",this.username)}saveDate(e){localStorage.setItem("cinderLastVisited",JSON.stringify(e))}};s.\u0275fac=function(t){return new(t||s)(r(c))},s.\u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"});let o=s;return o})();export{u as a};
