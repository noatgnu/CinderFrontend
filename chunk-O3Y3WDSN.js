import{a as gi,b as yi,c as Ci,d as wi,e as vi,f as bi}from"./chunk-N7JLAJBQ.js";import{a as Tt}from"./chunk-O2VZXNLJ.js";import{a as mt}from"./chunk-E7WCFS4V.js";import{a as _t,b as yn,c as Si,d as Nt}from"./chunk-WICPPB3Y.js";import{a as ki}from"./chunk-OUGMZIKZ.js";import{a as ft}from"./chunk-LQYREIAK.js";import{a as hi,c as pi,f as fi,h as _i,i as Ie}from"./chunk-OZBYPAFL.js";import{a as ke,b as ui,c as Re,d as Ee,e as Fe}from"./chunk-V5VFZZ6S.js";import{a as te}from"./chunk-QMSCXWF6.js";import{a as xi,b as Di}from"./chunk-D25H7K5U.js";import{a as ht}from"./chunk-HQFSCXZS.js";import{a as pt}from"./chunk-5VOMNKAQ.js";import{$ as di,Aa as me,Ba as ut,Ca as ee,Ea as he,Ja as pe,Ka as Me,L as Se,Q as je,R as le,S as Be,T as ct,U as ci,V as Ye,W as dt,a as si,ma as He,oa as I,qa as ce,ra as Z,ta as S,va as J,wa as mi,ya as de,z as li,za as ue}from"./chunk-RBHTY4FE.js";import{h as ri}from"./chunk-KCCSOALX.js";import{$b as ye,Aa as T,Ba as N,Bb as D,Db as rt,Dc as oi,Ea as ie,Ec as Oe,Fa as Jt,Ga as ei,Hb as F,Ia as ne,Ib as H,Ic as Ce,Ja as qe,Jb as L,Kb as P,La as xe,Lb as c,Mb as u,Nb as U,Ob as Ge,Pb as Le,Qb as Y,Rb as B,Sc as ai,Ub as k,Wb as v,Xb as st,Yb as De,Zb as It,_b as ni,ac as At,bb as ti,bc as oe,cc as ae,da as nt,e as gn,f as Ft,fb as g,fc as lt,gb as y,gc as p,hc as G,ia as Xt,ib as ge,ic as W,la as ot,n as Yt,na as Zt,nb as Ve,nc as X,oa as Te,oc as j,p as Qt,sa as O,sb as $,ua as V,ub as Ne,w as Mt,xb as M,y as Wt,za as at,zb as ii}from"./chunk-QNTGE4BG.js";var wn=(n,t)=>t.id;function vn(n,t){if(n&1){let o=B();c(0,"mat-list-option",1),k("click",function(){let i=T(o).$implicit,a=v(2);return N(a.selectAnalysisGroup(i))}),c(1,"b"),p(2),u(),c(3,"span",2),p(4),u()(),U(5,"mat-divider")}if(n&2){let o=t.$implicit,e=v(2);D("value",o),g(2),G(o.name),g(2),W(" ",e.dataService.getAnalysisGroupTypeLabel(o.analysis_group_type)," ")}}function bn(n,t){if(n&1&&(c(0,"mat-selection-list",0),L(1,vn,6,3,null,null,wn),u()),n&2){let o=v();D("multiple",!1),g(),P(o.analysisGroupQuery.results)}}var Ca=(()=>{let t=class t{constructor(e){this.dataService=e,this.selectedAnalysisGroup=new ne}selectAnalysisGroup(e){this.selectedAnalysisGroup.emit(e)}};t.\u0275fac=function(i){return new(i||t)(y(mt))},t.\u0275cmp=O({type:t,selectors:[["app-analysis-group-list"]],inputs:{analysisGroupQuery:"analysisGroupQuery"},outputs:{selectedAnalysisGroup:"selectedAnalysisGroup"},standalone:!0,features:[j],decls:1,vars:1,consts:[[3,"multiple"],[3,"click","value"],["matListItemLine",""]],template:function(i,a){i&1&&M(0,bn,3,1,"mat-selection-list",0),i&2&&F(a.analysisGroupQuery?0:-1)},dependencies:[hi,fi,_i,pi]});let n=t;return n})();var Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vi="ARRAYBUFFER not supported by this environment",Oi="UINT8ARRAY not supported by this environment";function Ri(n,t,o,e){let i,a,r,s=t||[0],l=(o=o||0)>>>3,h=e===-1?3:0;for(i=0;i<n.length;i+=1)r=i+l,a=r>>>2,s.length<=a&&s.push(0),s[a]|=n[i]<<8*(h+e*(r%4));return{value:s,binLen:8*n.length+o}}function $e(n,t,o){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(n){case"HEX":return function(e,i,a){return function(r,s,l,h){let f,d,_,w;if(r.length%2!=0)throw new Error("String of HEX type must be in byte increments");let x=s||[0],R=(l=l||0)>>>3,E=h===-1?3:0;for(f=0;f<r.length;f+=2){if(d=parseInt(r.substr(f,2),16),isNaN(d))throw new Error("String of HEX type contains invalid characters");for(w=(f>>>1)+R,_=w>>>2;x.length<=_;)x.push(0);x[_]|=d<<8*(E+h*(w%4))}return{value:x,binLen:4*r.length+l}}(e,i,a,o)};case"TEXT":return function(e,i,a){return function(r,s,l,h,f){let d,_,w,x,R,E,z,C,q=0,A=l||[0],Q=(h=h||0)>>>3;if(s==="UTF8")for(z=f===-1?3:0,w=0;w<r.length;w+=1)for(d=r.charCodeAt(w),_=[],128>d?_.push(d):2048>d?(_.push(192|d>>>6),_.push(128|63&d)):55296>d||57344<=d?_.push(224|d>>>12,128|d>>>6&63,128|63&d):(w+=1,d=65536+((1023&d)<<10|1023&r.charCodeAt(w)),_.push(240|d>>>18,128|d>>>12&63,128|d>>>6&63,128|63&d)),x=0;x<_.length;x+=1){for(E=q+Q,R=E>>>2;A.length<=R;)A.push(0);A[R]|=_[x]<<8*(z+f*(E%4)),q+=1}else for(z=f===-1?2:0,C=s==="UTF16LE"&&f!==1||s!=="UTF16LE"&&f===1,w=0;w<r.length;w+=1){for(d=r.charCodeAt(w),C===!0&&(x=255&d,d=x<<8|d>>>8),E=q+Q,R=E>>>2;A.length<=R;)A.push(0);A[R]|=d<<8*(z+f*(E%4)),q+=2}return{value:A,binLen:8*q+h}}(e,t,i,a,o)};case"B64":return function(e,i,a){return function(r,s,l,h){let f,d,_,w,x,R,E,z=0,C=s||[0],q=(l=l||0)>>>3,A=h===-1?3:0,Q=r.indexOf("=");if(r.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(r=r.replace(/=/g,""),Q!==-1&&Q<r.length)throw new Error("Invalid '=' found in base-64 string");for(d=0;d<r.length;d+=4){for(x=r.substr(d,4),w=0,_=0;_<x.length;_+=1)f=Pi.indexOf(x.charAt(_)),w|=f<<18-6*_;for(_=0;_<x.length-1;_+=1){for(E=z+q,R=E>>>2;C.length<=R;)C.push(0);C[R]|=(w>>>16-8*_&255)<<8*(A+h*(E%4)),z+=1}}return{value:C,binLen:8*z+l}}(e,i,a,o)};case"BYTES":return function(e,i,a){return function(r,s,l,h){let f,d,_,w,x=s||[0],R=(l=l||0)>>>3,E=h===-1?3:0;for(d=0;d<r.length;d+=1)f=r.charCodeAt(d),w=d+R,_=w>>>2,x.length<=_&&x.push(0),x[_]|=f<<8*(E+h*(w%4));return{value:x,binLen:8*r.length+l}}(e,i,a,o)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(Vi)}return function(e,i,a){return function(r,s,l,h){return Ri(new Uint8Array(r),s,l,h)}(e,i,a,o)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(Oi)}return function(e,i,a){return Ri(e,i,a,o)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function Ei(n,t,o,e){switch(n){case"HEX":return function(i){return function(a,r,s,l){let h="0123456789abcdef",f,d,_="",w=r/8,x=s===-1?3:0;for(f=0;f<w;f+=1)d=a[f>>>2]>>>8*(x+s*(f%4)),_+=h.charAt(d>>>4&15)+h.charAt(15&d);return l.outputUpper?_.toUpperCase():_}(i,t,o,e)};case"B64":return function(i){return function(a,r,s,l){let h,f,d,_,w,x="",R=r/8,E=s===-1?3:0;for(h=0;h<R;h+=3)for(_=h+1<R?a[h+1>>>2]:0,w=h+2<R?a[h+2>>>2]:0,d=(a[h>>>2]>>>8*(E+s*(h%4))&255)<<16|(_>>>8*(E+s*((h+1)%4))&255)<<8|w>>>8*(E+s*((h+2)%4))&255,f=0;f<4;f+=1)x+=8*h+6*f<=r?Pi.charAt(d>>>6*(3-f)&63):l.b64Pad;return x}(i,t,o,e)};case"BYTES":return function(i){return function(a,r,s){let l,h,f="",d=r/8,_=s===-1?3:0;for(l=0;l<d;l+=1)h=a[l>>>2]>>>8*(_+s*(l%4))&255,f+=String.fromCharCode(h);return f}(i,t,o)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(Vi)}return function(i){return function(a,r,s){let l,h=r/8,f=new ArrayBuffer(h),d=new Uint8Array(f),_=s===-1?3:0;for(l=0;l<h;l+=1)d[l]=a[l>>>2]>>>8*(_+s*(l%4))&255;return f}(i,t,o)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(Oi)}return function(i){return function(a,r,s){let l,h=r/8,f=s===-1?3:0,d=new Uint8Array(h);for(l=0;l<h;l+=1)d[l]=a[l>>>2]>>>8*(f+s*(l%4))&255;return d}(i,t,o)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var Xe=4294967296,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ve=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],be=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ze="Chosen SHA variant is not supported",ji="Cannot set numRounds with MAC";function yt(n,t){let o,e,i=n.binLen>>>3,a=t.binLen>>>3,r=i<<3,s=4-i<<3;if(i%4!=0){for(o=0;o<a;o+=4)e=i+o>>>2,n.value[e]|=t.value[o>>>2]<<r,n.value.push(0),n.value[e+1]|=t.value[o>>>2]>>>s;return(n.value.length<<2)-4>=a+i&&n.value.pop(),{value:n.value,binLen:n.binLen+t.binLen}}return{value:n.value.concat(t.value),binLen:n.binLen+t.binLen}}function Fi(n){let t={outputUpper:!1,b64Pad:"=",outputLen:-1},o=n||{},e="Output length must be a multiple of 8";if(t.outputUpper=o.outputUpper||!1,o.b64Pad&&(t.b64Pad=o.b64Pad),o.outputLen){if(o.outputLen%8!=0)throw new Error(e);t.outputLen=o.outputLen}else if(o.shakeLen){if(o.shakeLen%8!=0)throw new Error(e);t.outputLen=o.shakeLen}if(typeof t.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof t.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return t}function Ae(n,t,o,e){let i=n+" must include a value and format";if(!t){if(!e)throw new Error(i);return e}if(t.value===void 0||!t.format)throw new Error(i);return $e(t.format,t.encoding||"UTF8",o)(t.value)}var ze=class{constructor(t,o,e){let i=e||{};if(this.t=o,this.i=i.encoding||"UTF8",this.numRounds=i.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=t,this.h=[],this.u=0,this.l=!1,this.A=0,this.H=!1,this.S=[],this.p=[]}update(t){let o,e=0,i=this.m>>>5,a=this.C(t,this.h,this.u),r=a.binLen,s=a.value,l=r>>>5;for(o=0;o<l;o+=i)e+this.m<=r&&(this.U=this.v(s.slice(o,o+i),this.U),e+=this.m);return this.A+=e,this.h=s.slice(e>>>5),this.u=r%this.m,this.l=!0,this}getHash(t,o){let e,i,a=this.R,r=Fi(o);if(this.K){if(r.outputLen===-1)throw new Error("Output length must be specified in options");a=r.outputLen}let s=Ei(t,a,this.T,r);if(this.H&&this.g)return s(this.g(r));for(i=this.F(this.h.slice(),this.u,this.A,this.L(this.U),a),e=1;e<this.numRounds;e+=1)this.K&&a%32!=0&&(i[i.length-1]&=16777215>>>24-a%32),i=this.F(i,a,0,this.B(this.o),a);return s(i)}setHMACKey(t,o,e){if(!this.M)throw new Error("Variant does not support HMAC");if(this.l)throw new Error("Cannot set MAC key after calling update");let i=$e(o,(e||{}).encoding||"UTF8",this.T);this.k(i(t))}k(t){let o=this.m>>>3,e=o/4-1,i;if(this.numRounds!==1)throw new Error(ji);if(this.H)throw new Error("MAC key already set");for(o<t.binLen/8&&(t.value=this.F(t.value,t.binLen,0,this.B(this.o),this.R));t.value.length<=e;)t.value.push(0);for(i=0;i<=e;i+=1)this.S[i]=909522486^t.value[i],this.p[i]=1549556828^t.value[i];this.U=this.v(this.S,this.U),this.A=this.m,this.H=!0}getHMAC(t,o){let e=Fi(o);return Ei(t,this.R,this.T,e)(this.Y())}Y(){let t;if(!this.H)throw new Error("Cannot call getHMAC without first setting MAC key");let o=this.F(this.h.slice(),this.u,this.A,this.L(this.U),this.R);return t=this.v(this.p,this.B(this.o)),t=this.F(o,this.R,this.m,t,this.R),t}};function Ue(n,t){return n<<t|n>>>32-t}function fe(n,t){return n>>>t|n<<32-t}function Bi(n,t){return n>>>t}function Mi(n,t,o){return n^t^o}function Hi(n,t,o){return n&t^~n&o}function Ui(n,t,o){return n&t^n&o^t&o}function xn(n){return fe(n,2)^fe(n,13)^fe(n,22)}function K(n,t){let o=(65535&n)+(65535&t);return(65535&(n>>>16)+(t>>>16)+(o>>>16))<<16|65535&o}function Dn(n,t,o,e){let i=(65535&n)+(65535&t)+(65535&o)+(65535&e);return(65535&(n>>>16)+(t>>>16)+(o>>>16)+(e>>>16)+(i>>>16))<<16|65535&i}function We(n,t,o,e,i){let a=(65535&n)+(65535&t)+(65535&o)+(65535&e)+(65535&i);return(65535&(n>>>16)+(t>>>16)+(o>>>16)+(e>>>16)+(i>>>16)+(a>>>16))<<16|65535&a}function Sn(n){return fe(n,7)^fe(n,18)^Bi(n,3)}function kn(n){return fe(n,6)^fe(n,11)^fe(n,25)}function Rn(n){return[1732584193,4023233417,2562383102,271733878,3285377520]}function zi(n,t){let o,e,i,a,r,s,l,h=[];for(o=t[0],e=t[1],i=t[2],a=t[3],r=t[4],l=0;l<80;l+=1)h[l]=l<16?n[l]:Ue(h[l-3]^h[l-8]^h[l-14]^h[l-16],1),s=l<20?We(Ue(o,5),Hi(e,i,a),r,1518500249,h[l]):l<40?We(Ue(o,5),Mi(e,i,a),r,1859775393,h[l]):l<60?We(Ue(o,5),Ui(e,i,a),r,2400959708,h[l]):We(Ue(o,5),Mi(e,i,a),r,3395469782,h[l]),r=a,a=i,i=Ue(e,30),e=o,o=s;return t[0]=K(o,t[0]),t[1]=K(e,t[1]),t[2]=K(i,t[2]),t[3]=K(a,t[3]),t[4]=K(r,t[4]),t}function En(n,t,o,e){let i,a=15+(t+65>>>9<<4),r=t+o;for(;n.length<=a;)n.push(0);for(n[t>>>5]|=128<<24-t%32,n[a]=4294967295&r,n[a-1]=r/Xe|0,i=0;i<n.length;i+=16)e=zi(n.slice(i,i+16),e);return e}var Fn=class extends ze{constructor(n,t,o){if(n!=="SHA-1")throw new Error(Ze);super(n,t,o);let e=o||{};this.M=!0,this.g=this.Y,this.T=-1,this.C=$e(this.t,this.i,this.T),this.v=zi,this.L=function(i){return i.slice()},this.B=Rn,this.F=En,this.U=[1732584193,4023233417,2562383102,271733878,3285377520],this.m=512,this.R=160,this.K=!1,e.hmacKey&&this.k(Ae("hmacKey",e.hmacKey,this.T))}};function Ii(n){let t;return t=n=="SHA-224"?ve.slice():be.slice(),t}function Ai(n,t){let o,e,i,a,r,s,l,h,f,d,_,w=[];for(o=t[0],e=t[1],i=t[2],a=t[3],r=t[4],s=t[5],l=t[6],h=t[7],_=0;_<64;_+=1)w[_]=_<16?n[_]:Dn(fe(x=w[_-2],17)^fe(x,19)^Bi(x,10),w[_-7],Sn(w[_-15]),w[_-16]),f=We(h,kn(r),Hi(r,s,l),b[_],w[_]),d=K(xn(o),Ui(o,e,i)),h=l,l=s,s=r,r=K(a,f),a=i,i=e,e=o,o=K(f,d);var x;return t[0]=K(o,t[0]),t[1]=K(e,t[1]),t[2]=K(i,t[2]),t[3]=K(a,t[3]),t[4]=K(r,t[4]),t[5]=K(s,t[5]),t[6]=K(l,t[6]),t[7]=K(h,t[7]),t}var Mn=class extends ze{constructor(n,t,o){if(n!=="SHA-224"&&n!=="SHA-256")throw new Error(Ze);super(n,t,o);let e=o||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=$e(this.t,this.i,this.T),this.v=Ai,this.L=function(i){return i.slice()},this.B=Ii,this.F=function(i,a,r,s){return function(l,h,f,d,_){let w,x,R=15+(h+65>>>9<<4),E=h+f;for(;l.length<=R;)l.push(0);for(l[h>>>5]|=128<<24-h%32,l[R]=4294967295&E,l[R-1]=E/Xe|0,w=0;w<l.length;w+=16)d=Ai(l.slice(w,w+16),d);return x=_==="SHA-224"?[d[0],d[1],d[2],d[3],d[4],d[5],d[6]]:d,x}(i,a,r,s,n)},this.U=Ii(n),this.m=512,this.R=n==="SHA-224"?224:256,this.K=!1,e.hmacKey&&this.k(Ae("hmacKey",e.hmacKey,this.T))}},m=class{constructor(t,o){this.N=t,this.I=o}};function Ti(n,t){let o;return t>32?(o=64-t,new m(n.I<<t|n.N>>>o,n.N<<t|n.I>>>o)):t!==0?(o=32-t,new m(n.N<<t|n.I>>>o,n.I<<t|n.N>>>o)):n}function _e(n,t){let o;return t<32?(o=32-t,new m(n.N>>>t|n.I<<o,n.I>>>t|n.N<<o)):(o=64-t,new m(n.I>>>t|n.N<<o,n.N>>>t|n.I<<o))}function $i(n,t){return new m(n.N>>>t,n.I>>>t|n.N<<32-t)}function In(n,t,o){return new m(n.N&t.N^n.N&o.N^t.N&o.N,n.I&t.I^n.I&o.I^t.I&o.I)}function An(n){let t=_e(n,28),o=_e(n,34),e=_e(n,39);return new m(t.N^o.N^e.N,t.I^o.I^e.I)}function re(n,t){let o,e;o=(65535&n.I)+(65535&t.I),e=(n.I>>>16)+(t.I>>>16)+(o>>>16);let i=(65535&e)<<16|65535&o;return o=(65535&n.N)+(65535&t.N)+(e>>>16),e=(n.N>>>16)+(t.N>>>16)+(o>>>16),new m((65535&e)<<16|65535&o,i)}function Tn(n,t,o,e){let i,a;i=(65535&n.I)+(65535&t.I)+(65535&o.I)+(65535&e.I),a=(n.I>>>16)+(t.I>>>16)+(o.I>>>16)+(e.I>>>16)+(i>>>16);let r=(65535&a)<<16|65535&i;return i=(65535&n.N)+(65535&t.N)+(65535&o.N)+(65535&e.N)+(a>>>16),a=(n.N>>>16)+(t.N>>>16)+(o.N>>>16)+(e.N>>>16)+(i>>>16),new m((65535&a)<<16|65535&i,r)}function Nn(n,t,o,e,i){let a,r;a=(65535&n.I)+(65535&t.I)+(65535&o.I)+(65535&e.I)+(65535&i.I),r=(n.I>>>16)+(t.I>>>16)+(o.I>>>16)+(e.I>>>16)+(i.I>>>16)+(a>>>16);let s=(65535&r)<<16|65535&a;return a=(65535&n.N)+(65535&t.N)+(65535&o.N)+(65535&e.N)+(65535&i.N)+(r>>>16),r=(n.N>>>16)+(t.N>>>16)+(o.N>>>16)+(e.N>>>16)+(i.N>>>16)+(a>>>16),new m((65535&r)<<16|65535&a,s)}function Qe(n,t){return new m(n.N^t.N,n.I^t.I)}function Gn(n){let t=_e(n,19),o=_e(n,61),e=$i(n,6);return new m(t.N^o.N^e.N,t.I^o.I^e.I)}function Ln(n){let t=_e(n,1),o=_e(n,8),e=$i(n,7);return new m(t.N^o.N^e.N,t.I^o.I^e.I)}function Pn(n){let t=_e(n,14),o=_e(n,18),e=_e(n,41);return new m(t.N^o.N^e.N,t.I^o.I^e.I)}var Vn=[new m(b[0],3609767458),new m(b[1],602891725),new m(b[2],3964484399),new m(b[3],2173295548),new m(b[4],4081628472),new m(b[5],3053834265),new m(b[6],2937671579),new m(b[7],3664609560),new m(b[8],2734883394),new m(b[9],1164996542),new m(b[10],1323610764),new m(b[11],3590304994),new m(b[12],4068182383),new m(b[13],991336113),new m(b[14],633803317),new m(b[15],3479774868),new m(b[16],2666613458),new m(b[17],944711139),new m(b[18],2341262773),new m(b[19],2007800933),new m(b[20],1495990901),new m(b[21],1856431235),new m(b[22],3175218132),new m(b[23],2198950837),new m(b[24],3999719339),new m(b[25],766784016),new m(b[26],2566594879),new m(b[27],3203337956),new m(b[28],1034457026),new m(b[29],2466948901),new m(b[30],3758326383),new m(b[31],168717936),new m(b[32],1188179964),new m(b[33],1546045734),new m(b[34],1522805485),new m(b[35],2643833823),new m(b[36],2343527390),new m(b[37],1014477480),new m(b[38],1206759142),new m(b[39],344077627),new m(b[40],1290863460),new m(b[41],3158454273),new m(b[42],3505952657),new m(b[43],106217008),new m(b[44],3606008344),new m(b[45],1432725776),new m(b[46],1467031594),new m(b[47],851169720),new m(b[48],3100823752),new m(b[49],1363258195),new m(b[50],3750685593),new m(b[51],3785050280),new m(b[52],3318307427),new m(b[53],3812723403),new m(b[54],2003034995),new m(b[55],3602036899),new m(b[56],1575990012),new m(b[57],1125592928),new m(b[58],2716904306),new m(b[59],442776044),new m(b[60],593698344),new m(b[61],3733110249),new m(b[62],2999351573),new m(b[63],3815920427),new m(3391569614,3928383900),new m(3515267271,566280711),new m(3940187606,3454069534),new m(4118630271,4000239992),new m(116418474,1914138554),new m(174292421,2731055270),new m(289380356,3203993006),new m(460393269,320620315),new m(685471733,587496836),new m(852142971,1086792851),new m(1017036298,365543100),new m(1126000580,2618297676),new m(1288033470,3409855158),new m(1501505948,4234509866),new m(1607167915,987167468),new m(1816402316,1246189591)];function Ni(n){return n==="SHA-384"?[new m(3418070365,ve[0]),new m(1654270250,ve[1]),new m(2438529370,ve[2]),new m(355462360,ve[3]),new m(1731405415,ve[4]),new m(41048885895,ve[5]),new m(3675008525,ve[6]),new m(1203062813,ve[7])]:[new m(be[0],4089235720),new m(be[1],2227873595),new m(be[2],4271175723),new m(be[3],1595750129),new m(be[4],2917565137),new m(be[5],725511199),new m(be[6],4215389547),new m(be[7],327033209)]}function Gi(n,t){let o,e,i,a,r,s,l,h,f,d,_,w,x=[];for(o=t[0],e=t[1],i=t[2],a=t[3],r=t[4],s=t[5],l=t[6],h=t[7],_=0;_<80;_+=1)_<16?(w=2*_,x[_]=new m(n[w],n[w+1])):x[_]=Tn(Gn(x[_-2]),x[_-7],Ln(x[_-15]),x[_-16]),f=Nn(h,Pn(r),(E=s,z=l,new m((R=r).N&E.N^~R.N&z.N,R.I&E.I^~R.I&z.I)),Vn[_],x[_]),d=re(An(o),In(o,e,i)),h=l,l=s,s=r,r=re(a,f),a=i,i=e,e=o,o=re(f,d);var R,E,z;return t[0]=re(o,t[0]),t[1]=re(e,t[1]),t[2]=re(i,t[2]),t[3]=re(a,t[3]),t[4]=re(r,t[4]),t[5]=re(s,t[5]),t[6]=re(l,t[6]),t[7]=re(h,t[7]),t}var On=class extends ze{constructor(n,t,o){if(n!=="SHA-384"&&n!=="SHA-512")throw new Error(Ze);super(n,t,o);let e=o||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=$e(this.t,this.i,this.T),this.v=Gi,this.L=function(i){return i.slice()},this.B=Ni,this.F=function(i,a,r,s){return function(l,h,f,d,_){let w,x,R=31+(h+129>>>10<<5),E=h+f;for(;l.length<=R;)l.push(0);for(l[h>>>5]|=128<<24-h%32,l[R]=4294967295&E,l[R-1]=E/Xe|0,w=0;w<l.length;w+=32)d=Gi(l.slice(w,w+32),d);return x=_==="SHA-384"?[d[0].N,d[0].I,d[1].N,d[1].I,d[2].N,d[2].I,d[3].N,d[3].I,d[4].N,d[4].I,d[5].N,d[5].I]:[d[0].N,d[0].I,d[1].N,d[1].I,d[2].N,d[2].I,d[3].N,d[3].I,d[4].N,d[4].I,d[5].N,d[5].I,d[6].N,d[6].I,d[7].N,d[7].I],x}(i,a,r,s,n)},this.U=Ni(n),this.m=1024,this.R=n==="SHA-384"?384:512,this.K=!1,e.hmacKey&&this.k(Ae("hmacKey",e.hmacKey,this.T))}},jn=[new m(0,1),new m(0,32898),new m(2147483648,32906),new m(2147483648,2147516416),new m(0,32907),new m(0,2147483649),new m(2147483648,2147516545),new m(2147483648,32777),new m(0,138),new m(0,136),new m(0,2147516425),new m(0,2147483658),new m(0,2147516555),new m(2147483648,139),new m(2147483648,32905),new m(2147483648,32771),new m(2147483648,32770),new m(2147483648,128),new m(0,32778),new m(2147483648,2147483658),new m(2147483648,2147516545),new m(2147483648,32896),new m(0,2147483649),new m(2147483648,2147516424)],Bn=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function Lt(n){let t,o=[];for(t=0;t<5;t+=1)o[t]=[new m(0,0),new m(0,0),new m(0,0),new m(0,0),new m(0,0)];return o}function Hn(n){let t,o=[];for(t=0;t<5;t+=1)o[t]=n[t].slice();return o}function gt(n,t){let o,e,i,a,r=[],s=[];if(n!==null)for(e=0;e<n.length;e+=2)t[(e>>>1)%5][(e>>>1)/5|0]=Qe(t[(e>>>1)%5][(e>>>1)/5|0],new m(n[e+1],n[e]));for(o=0;o<24;o+=1){for(a=Lt(),e=0;e<5;e+=1)r[e]=(l=t[e][0],h=t[e][1],f=t[e][2],d=t[e][3],_=t[e][4],new m(l.N^h.N^f.N^d.N^_.N,l.I^h.I^f.I^d.I^_.I));for(e=0;e<5;e+=1)s[e]=Qe(r[(e+4)%5],Ti(r[(e+1)%5],1));for(e=0;e<5;e+=1)for(i=0;i<5;i+=1)t[e][i]=Qe(t[e][i],s[e]);for(e=0;e<5;e+=1)for(i=0;i<5;i+=1)a[i][(2*e+3*i)%5]=Ti(t[e][i],Bn[e][i]);for(e=0;e<5;e+=1)for(i=0;i<5;i+=1)t[e][i]=Qe(a[e][i],new m(~a[(e+1)%5][i].N&a[(e+2)%5][i].N,~a[(e+1)%5][i].I&a[(e+2)%5][i].I));t[0][0]=Qe(t[0][0],jn[o])}var l,h,f,d,_;return t}function Ki(n){let t,o,e=0,i=[0,0],a=[4294967295&n,n/Xe&2097151];for(t=6;t>=0;t--)o=a[t>>2]>>>8*t&255,o===0&&e===0||(i[e+1>>2]|=o<<8*(e+1),e+=1);return e=e!==0?e:1,i[0]|=e,{value:e+1>4?i:[i[0]],binLen:8+8*e}}function Gt(n){return yt(Ki(n.binLen),n)}function Li(n,t){let o,e=Ki(t);e=yt(e,n);let i=t>>>2,a=(i-e.value.length%i)%i;for(o=0;o<a;o++)e.value.push(0);return e.value}var Un=class extends ze{constructor(n,t,o){let e=6,i=0;super(n,t,o);let a=o||{};if(this.numRounds!==1){if(a.kmacKey||a.hmacKey)throw new Error(ji);if(this.o==="CSHAKE128"||this.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.T=1,this.C=$e(this.t,this.i,this.T),this.v=gt,this.L=Hn,this.B=Lt,this.U=Lt(),this.K=!1,n){case"SHA3-224":this.m=i=1152,this.R=224,this.M=!0,this.g=this.Y;break;case"SHA3-256":this.m=i=1088,this.R=256,this.M=!0,this.g=this.Y;break;case"SHA3-384":this.m=i=832,this.R=384,this.M=!0,this.g=this.Y;break;case"SHA3-512":this.m=i=576,this.R=512,this.M=!0,this.g=this.Y;break;case"SHAKE128":e=31,this.m=i=1344,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"SHAKE256":e=31,this.m=i=1088,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"KMAC128":e=4,this.m=i=1344,this.X(o),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"KMAC256":e=4,this.m=i=1088,this.X(o),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"CSHAKE128":this.m=i=1344,e=this.O(o),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"CSHAKE256":this.m=i=1088,e=this.O(o),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;default:throw new Error(Ze)}this.F=function(r,s,l,h,f){return function(d,_,w,x,R,E,z){let C,q,A=0,Q=[],it=R>>>5,_n=_>>>5;for(C=0;C<_n&&_>=R;C+=it)x=gt(d.slice(C,C+it),x),_-=R;for(d=d.slice(C),_%=R;d.length<it;)d.push(0);for(C=_>>>3,d[C>>2]^=E<<C%4*8,d[it-1]^=2147483648,x=gt(d,x);32*Q.length<z&&(q=x[A%5][A/5|0],Q.push(q.I),!(32*Q.length>=z));)Q.push(q.N),A+=1,64*A%R==0&&(gt(null,x),A=0);return Q}(r,s,0,h,i,e,f)},a.hmacKey&&this.k(Ae("hmacKey",a.hmacKey,this.T))}O(n,t){let o=function(i){let a=i||{};return{funcName:Ae("funcName",a.funcName,1,{value:[],binLen:0}),customization:Ae("Customization",a.customization,1,{value:[],binLen:0})}}(n||{});t&&(o.funcName=t);let e=yt(Gt(o.funcName),Gt(o.customization));if(o.customization.binLen!==0||o.funcName.binLen!==0){let i=Li(e,this.m>>>3);for(let a=0;a<i.length;a+=this.m>>>5)this.U=this.v(i.slice(a,a+(this.m>>>5)),this.U),this.A+=this.m;return 4}return 31}X(n){let t=function(e){let i=e||{};return{kmacKey:Ae("kmacKey",i.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:Ae("Customization",i.customization,1,{value:[],binLen:0})}}(n||{});this.O(n,t.funcName);let o=Li(Gt(t.kmacKey),this.m>>>3);for(let e=0;e<o.length;e+=this.m>>>5)this.U=this.v(o.slice(e,e+(this.m>>>5)),this.U),this.A+=this.m;this.H=!0}_(n){let t=yt({value:this.h.slice(),binLen:this.u},function(o){let e,i,a=0,r=[0,0],s=[4294967295&o,o/Xe&2097151];for(e=6;e>=0;e--)i=s[e>>2]>>>8*e&255,i===0&&a===0||(r[a>>2]|=i<<8*a,a+=1);return a=a!==0?a:1,r[a>>2]|=a<<8*a,{value:a+1>4?r:[r[0]],binLen:8+8*a}}(n.outputLen));return this.F(t.value,t.binLen,this.A,this.L(this.U),n.outputLen)}},Ct=class{constructor(t,o,e){if(t=="SHA-1")this.P=new Fn(t,o,e);else if(t=="SHA-224"||t=="SHA-256")this.P=new Mn(t,o,e);else if(t=="SHA-384"||t=="SHA-512")this.P=new On(t,o,e);else{if(t!="SHA3-224"&&t!="SHA3-256"&&t!="SHA3-384"&&t!="SHA3-512"&&t!="SHAKE128"&&t!="SHAKE256"&&t!="CSHAKE128"&&t!="CSHAKE256"&&t!="KMAC128"&&t!="KMAC256")throw new Error(Ze);this.P=new Un(t,o,e)}}update(t){return this.P.update(t),this}getHash(t,o){return this.P.getHash(t,o)}setHMACKey(t,o,e){this.P.setHMACKey(t,o,e)}getHMAC(t,o){return this.P.getHMAC(t,o)}};var zn=(n,t)=>t.name;function $n(n,t){if(n&1&&U(0,"mat-progress-bar",3),n&2){let o=t.$implicit,e=v();D("value",e.fileProgressMap[o.name].progress/e.fileProgressMap[o.name].total*100)("mode","determinate")}}var qi=(()=>{let t=class t{constructor(e){this.web=e,this.fileProgressMap={},this.fileList=[],this.fileType="",this.fileCategory="",this.analysisGroupId=0,this.fileUploaded=new ne,this.allowFileType=["csv","tsv","txt"]}uploadData(e){return Ft(this,null,function*(){let i=e.target.files;if(i){this.fileList=[];for(let a=0;a<i.length;a++)this.fileList.push(i[a]),this.fileProgressMap[i[a].name]={progress:0,total:i[a].size};for(let a=0;a<i.length;a++)yield this.uploadFile(i[a])}})}getFileExntension(e){let i=e.name.split(".");return i.length>1?i[i.length-1]:""}uploadFile(e){return Ft(this,null,function*(){let a=e.size,r=new Ct("SHA-256","ARRAYBUFFER");if(this.fileType=this.getFileExntension(e),this.allowFileType.indexOf(this.fileType)!==-1)if(1048576>a){let s=yield e.arrayBuffer();r.update(s);let l=r.getHash("HEX"),h=yield this.web.uploadDataChunkComplete("",l,e,e.name).toPromise();this.fileProgressMap[e.name].progress=a,h?.completed_at&&this.web.bindUploadedFile(this.analysisGroupId,this.fileType,this.fileCategory,e.name,h?.id).subscribe(f=>{this.fileUploaded.emit(f)})}else{let s="",l=0;for(;a>l;){let h=l+1048576;h>=a&&(h=a);let f=yield e.slice(l,h).arrayBuffer();r.update(f);let d=new File([f],e.name,{type:e.type});console.log(d.size);let _=`bytes ${l}-${h-1}/${a}`;console.log(_);let w=yield this.web.uploadDataChunk(s,d,e.name,_).toPromise();w&&(s=w.url,l=w.offset,this.fileProgressMap[e.name].progress=l)}if(s!==""){let h=r.getHash("HEX"),f=yield this.web.uploadDataChunkComplete(s,h).toPromise();f?.completed_at&&this.web.bindUploadedFile(this.analysisGroupId,this.fileType,this.fileCategory,e.name,f?.id).subscribe(d=>{this.fileProgressMap[e.name].progress=a,this.fileUploaded.emit(d)})}}})}};t.\u0275fac=function(i){return new(i||t)(y(te))},t.\u0275cmp=O({type:t,selectors:[["app-upload-file"]],inputs:{fileType:"fileType",fileCategory:"fileCategory",analysisGroupId:"analysisGroupId"},outputs:{fileUploaded:"fileUploaded"},standalone:!0,features:[j],decls:8,vars:0,consts:[["file",""],["mat-icon-button","","type","button",3,"click"],["type","file","hidden","",3,"change"],[3,"value","mode"]],template:function(i,a){if(i&1){let r=B();c(0,"form")(1,"button",1),k("click",function(){T(r);let l=lt(5);return N(l.click())}),c(2,"mat-icon"),p(3,"upload"),u()(),c(4,"input",2,0),k("change",function(l){return T(r),N(a.uploadData(l))}),u()(),L(6,$n,1,2,"mat-progress-bar",3,zn)}i&2&&(g(6),P(a.fileList))},dependencies:[Be,je,_t,ee,J,Z]});let n=t;return n})();var Wn=[[["caption"]],[["colgroup"],["col"]],"*"],Xn=["caption","colgroup, col","*"];function Zn(n,t){n&1&&De(0,2)}function Jn(n,t){n&1&&(c(0,"thead",0),Y(1,1),u(),c(2,"tbody",0),Y(3,2)(4,3),u(),c(5,"tfoot",0),Y(6,4),u())}function eo(n,t){n&1&&Y(0,1)(1,2)(2,3)(3,4)}var se=new ot("CDK_TABLE");var St=(()=>{let t=class t{constructor(e){this.template=e}};t.\u0275fac=function(i){return new(i||t)(y(ge))},t.\u0275dir=V({type:t,selectors:[["","cdkCellDef",""]],standalone:!0});let n=t;return n})(),kt=(()=>{let t=class t{constructor(e){this.template=e}};t.\u0275fac=function(i){return new(i||t)(y(ge))},t.\u0275dir=V({type:t,selectors:[["","cdkHeaderCellDef",""]],standalone:!0});let n=t;return n})(),Wi=(()=>{let t=class t{constructor(e){this.template=e}};t.\u0275fac=function(i){return new(i||t)(y(ge))},t.\u0275dir=V({type:t,selectors:[["","cdkFooterCellDef",""]],standalone:!0});let n=t;return n})(),Ke=(()=>{let t=class t{get name(){return this._name}set name(e){this._setNameInput(e)}get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}constructor(e){this._table=e,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}};t.\u0275fac=function(i){return new(i||t)(y(se,8))},t.\u0275dir=V({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(i,a,r){if(i&1&&(ye(r,St,5),ye(r,kt,5),ye(r,Wi,5)),i&2){let s;oe(s=ae())&&(a.cell=s.first),oe(s=ae())&&(a.headerCell=s.first),oe(s=ae())&&(a.footerCell=s.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",Ce],stickyEnd:[2,"stickyEnd","stickyEnd",Ce]},standalone:!0,features:[X([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),Ne]});let n=t;return n})(),vt=class{constructor(t,o){o.nativeElement.classList.add(...t._columnCssClassName)}},Xi=(()=>{let t=class t extends vt{constructor(e,i){super(e,i)}};t.\u0275fac=function(i){return new(i||t)(y(Ke),y(xe))},t.\u0275dir=V({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[$]});let n=t;return n})();var Zi=(()=>{let t=class t extends vt{constructor(e,i){super(e,i);let a=e._table?._getCellRole();a&&i.nativeElement.setAttribute("role",a)}};t.\u0275fac=function(i){return new(i||t)(y(Ke),y(xe))},t.\u0275dir=V({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[$]});let n=t;return n})(),bt=class{constructor(){this.tasks=[],this.endTasks=[]}},xt=new ot("_COALESCED_STYLE_SCHEDULER"),Vt=(()=>{let t=class t{constructor(e){this._currentSchedule=null,this._ngZone=Te(qe)}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new bt,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new bt;for(let i of e.tasks)i();for(let i of e.endTasks)i()}this._currentSchedule=null})))}};t.\u0275fac=function(i){return new(i||t)(Zt(qe))},t.\u0275prov=Xt({token:t,factory:t.\u0275fac});let n=t;return n})();var Ot=(()=>{let t=class t{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){let i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof tt?e.headerCell.template:this instanceof jt?e.footerCell.template:e.cell.template}};t.\u0275fac=function(i){return new(i||t)(y(ge),y(Oe))},t.\u0275dir=V({type:t,features:[at]});let n=t;return n})(),tt=(()=>{let t=class t extends Ot{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,i,a){super(e,i),this._table=a,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}};t.\u0275fac=function(i){return new(i||t)(y(ge),y(Oe),y(se,8))},t.\u0275dir=V({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",Ce]},standalone:!0,features:[Ne,$,at]});let n=t;return n})(),jt=(()=>{let t=class t extends Ot{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,i,a){super(e,i),this._table=a,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}};t.\u0275fac=function(i){return new(i||t)(y(ge),y(Oe),y(se,8))},t.\u0275dir=V({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",Ce]},standalone:!0,features:[Ne,$,at]});let n=t;return n})(),Rt=(()=>{let t=class t extends Ot{constructor(e,i,a){super(e,i),this._table=a}};t.\u0275fac=function(i){return new(i||t)(y(ge),y(Oe),y(se,8))},t.\u0275dir=V({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},standalone:!0,features:[$]});let n=t;return n})(),Pe=(()=>{let t=class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}};t.mostRecentCellOutlet=null,t.\u0275fac=function(i){return new(i||t)(y(Ve))},t.\u0275dir=V({type:t,selectors:[["","cdkCellOutlet",""]],standalone:!0});let n=t;return n})(),Bt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=O({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[j],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&Y(0,0)},dependencies:[Pe],encapsulation:2});let n=t;return n})();var Ht=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=O({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[j],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&Y(0,0)},dependencies:[Pe],encapsulation:2});let n=t;return n})(),Ji=(()=>{let t=class t{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}};t.\u0275fac=function(i){return new(i||t)(y(ge))},t.\u0275dir=V({type:t,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0});let n=t;return n})(),Yi=["top","bottom","left","right"],Pt=class{constructor(t,o,e,i,a=!0,r=!0,s){this._isNativeHtmlTable=t,this._stickCellCss=o,this.direction=e,this._coalescedStyleScheduler=i,this._isBrowser=a,this._needsPositionStickyOnElement=r,this._positionListener=s,this._cachedCellWidths=[],this._borderCellCss={top:`${o}-border-elem-top`,bottom:`${o}-border-elem-bottom`,left:`${o}-border-elem-left`,right:`${o}-border-elem-right`}}clearStickyPositioning(t,o){let e=[];for(let i of t)if(i.nodeType===i.ELEMENT_NODE){e.push(i);for(let a=0;a<i.children.length;a++)e.push(i.children[a])}this._coalescedStyleScheduler.schedule(()=>{for(let i of e)this._removeStickyStyle(i,o)})}updateStickyColumns(t,o,e,i=!0){if(!t.length||!this._isBrowser||!(o.some(a=>a)||e.some(a=>a))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let a=t[0],r=a.children.length,s=this._getCellWidths(a,i),l=this._getStickyStartColumnPositions(s,o),h=this._getStickyEndColumnPositions(s,e),f=o.lastIndexOf(!0),d=e.indexOf(!0),_=this.direction==="rtl",w=_?"right":"left",x=_?"left":"right";for(let R of t)for(let E=0;E<r;E++){let z=R.children[E];o[E]&&this._addStickyStyle(z,w,l[E],E===f),e[E]&&this._addStickyStyle(z,x,h[E],E===d)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:f===-1?[]:s.slice(0,f+1).map((R,E)=>o[E]?R:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:d===-1?[]:s.slice(d).map((R,E)=>e[E+d]?R:null).reverse()}))})}stickRows(t,o,e){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let i=e==="bottom"?t.slice().reverse():t,a=e==="bottom"?o.slice().reverse():o,r=[],s=[],l=[];for(let f=0,d=0;f<i.length;f++){if(!a[f])continue;r[f]=d;let _=i[f];l[f]=this._isNativeHtmlTable?Array.from(_.children):[_];let w=_.getBoundingClientRect().height;d+=w,s[f]=w}let h=a.lastIndexOf(!0);for(let f=0;f<i.length;f++){if(!a[f])continue;let d=r[f],_=f===h;for(let w of l[f])this._addStickyStyle(w,e,d,_)}e==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:s,offsets:r,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:s,offsets:r,elements:l})})}updateStickyFooterContainer(t,o){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let e=t.querySelector("tfoot");e&&(o.some(i=>!i)?this._removeStickyStyle(e,["bottom"]):this._addStickyStyle(e,"bottom",0,!1))})}_removeStickyStyle(t,o){for(let i of o)t.style[i]="",t.classList.remove(this._borderCellCss[i]);Yi.some(i=>o.indexOf(i)===-1&&t.style[i])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,o,e,i){t.classList.add(this._stickCellCss),i&&t.classList.add(this._borderCellCss[o]),t.style[o]=`${e}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){let o={top:100,bottom:10,left:1,right:1},e=0;for(let i of Yi)t.style[i]&&(e+=o[i]);return e?`${e}`:""}_getCellWidths(t,o=!0){if(!o&&this._cachedCellWidths.length)return this._cachedCellWidths;let e=[],i=t.children;for(let a=0;a<i.length;a++){let r=i[a];e.push(r.getBoundingClientRect().width)}return this._cachedCellWidths=e,e}_getStickyStartColumnPositions(t,o){let e=[],i=0;for(let a=0;a<t.length;a++)o[a]&&(e[a]=i,i+=t[a]);return e}_getStickyEndColumnPositions(t,o){let e=[],i=0;for(let a=t.length;a>0;a--)o[a]&&(e[a]=i,i+=t[a]);return e}};var Dt=new ot("CDK_SPL");var Ut=(()=>{let t=class t{constructor(e,i){this.viewContainer=e,this.elementRef=i;let a=Te(se);a._rowOutlet=this,a._outletAssigned()}};t.\u0275fac=function(i){return new(i||t)(y(Ve),y(xe))},t.\u0275dir=V({type:t,selectors:[["","rowOutlet",""]],standalone:!0});let n=t;return n})(),zt=(()=>{let t=class t{constructor(e,i){this.viewContainer=e,this.elementRef=i;let a=Te(se);a._headerRowOutlet=this,a._outletAssigned()}};t.\u0275fac=function(i){return new(i||t)(y(Ve),y(xe))},t.\u0275dir=V({type:t,selectors:[["","headerRowOutlet",""]],standalone:!0});let n=t;return n})(),$t=(()=>{let t=class t{constructor(e,i){this.viewContainer=e,this.elementRef=i;let a=Te(se);a._footerRowOutlet=this,a._outletAssigned()}};t.\u0275fac=function(i){return new(i||t)(y(Ve),y(xe))},t.\u0275dir=V({type:t,selectors:[["","footerRowOutlet",""]],standalone:!0});let n=t;return n})(),Kt=(()=>{let t=class t{constructor(e,i){this.viewContainer=e,this.elementRef=i;let a=Te(se);a._noDataRowOutlet=this,a._outletAssigned()}};t.\u0275fac=function(i){return new(i||t)(y(Ve),y(xe))},t.\u0275dir=V({type:t,selectors:[["","noDataRowOutlet",""]],standalone:!0});let n=t;return n})();var qt=(()=>{let t=class t{_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role"),i=e==="grid"||e==="treegrid"?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&i==="cell"?null:i}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,i,a,r,s,l,h,f,d,_,w,x){this._differs=e,this._changeDetectorRef=i,this._elementRef=a,this._dir=s,this._platform=h,this._viewRepeater=f,this._coalescedStyleScheduler=d,this._viewportRuler=_,this._stickyPositioningListener=w,this._onDestroy=new Yt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new ne,this.viewChange=new Qt({start:0,end:Number.MAX_VALUE}),this._injector=Te(ei),r||a.nativeElement.setAttribute("role","table"),this._document=l,this._isServer=!h.isBrowser,this._isNativeHtmlTable=a.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(nt(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),ct(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(a,r,s)=>this._getEmbeddedViewArgs(a.item,s),a=>a.item.data,a=>{a.operation===ci.INSERTED&&a.context&&this._renderCellTemplateForItem(a.record.item.rowDef,a.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(a=>{let r=i.get(a.currentIndex);r.context.$implicit=a.item.data}),this._updateNoDataRow(),ii(()=>{this.updateStickyColumnStyles()},{injector:this._injector}),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let a=Qi(this._headerRowOutlet,"thead");a&&(a.style.display=e.length?"":"none")}let i=this._headerRowDefs.map(a=>a.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,i,"top"),this._headerRowDefs.forEach(a=>a.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let a=Qi(this._footerRowOutlet,"tfoot");a&&(a.style.display=e.length?"":"none")}let i=this._footerRowDefs.map(a=>a.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,i,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,i),this._footerRowDefs.forEach(a=>a.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),a=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...a],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((r,s)=>{this._addStickyColumnStyles([r],this._headerRowDefs[s])}),this._rowDefs.forEach(r=>{let s=[];for(let l=0;l<i.length;l++)this._renderRows[l].rowDef===r&&s.push(i[l]);this._addStickyColumnStyles(s,r)}),a.forEach((r,s)=>{this._addStickyColumnStyles([r],this._footerRowDefs[s])}),Array.from(this._columnDefsByName.values()).forEach(r=>r.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let a=0;a<this._data.length;a++){let r=this._data[a],s=this._getRenderRowsForData(r,a,i.get(r));this._cachedRenderRowsMap.has(r)||this._cachedRenderRowsMap.set(r,new WeakMap);for(let l=0;l<s.length;l++){let h=s[l],f=this._cachedRenderRowsMap.get(h.data);f.has(h.rowDef)?f.get(h.rowDef).push(h):f.set(h.rowDef,[h]),e.push(h)}}return e}_getRenderRowsForData(e,i,a){return this._getRowDefs(e,i).map(s=>{let l=a&&a.has(s)?a.get(s):[];if(l.length){let h=l.shift();return h.dataIndex=i,h}else return{data:e,rowDef:s,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),wt(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=wt(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=wt(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=wt(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(i=>!i.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(s,l)=>s||!!l.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();let a=this._headerRowDefs.reduce(e,!1);a&&this._forceRenderHeaderRows();let r=this._footerRowDefs.reduce(e,!1);return r&&this._forceRenderFooterRows(),i||a||r}_switchDataSource(e){this._data=[],ct(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;ct(this.dataSource)?e=this.dataSource.connect(this):Wt(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=Mt(this.dataSource)),this._renderChangeSubscription=e.pipe(nt(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){let a=Array.from(i.columns||[]).map(l=>{let h=this._columnDefsByName.get(l);return h}),r=a.map(l=>l.sticky),s=a.map(l=>l.stickyEnd);this._stickyStyler.updateStickyColumns(e,r,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let i=[];for(let a=0;a<e.viewContainer.length;a++){let r=e.viewContainer.get(a);i.push(r.rootNodes[0])}return i}_getRowDefs(e,i){if(this._rowDefs.length==1)return[this._rowDefs[0]];let a=[];if(this.multiTemplateDataRows)a=this._rowDefs.filter(r=>!r.when||r.when(i,e));else{let r=this._rowDefs.find(s=>s.when&&s.when(i,e))||this._defaultRowDef;r&&a.push(r)}return a.length,a}_getEmbeddedViewArgs(e,i){let a=e.rowDef,r={$implicit:e.data};return{templateRef:a.template,context:r,index:i}}_renderRow(e,i,a,r={}){let s=e.viewContainer.createEmbeddedView(i.template,r,a);return this._renderCellTemplateForItem(i,r),s}_renderCellTemplateForItem(e,i){for(let a of this._getCellTemplates(e))Pe.mostRecentCellOutlet&&Pe.mostRecentCellOutlet._viewContainer.createEmbeddedView(a,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let i=0,a=e.length;i<a;i++){let s=e.get(i).context;s.count=a,s.first=i===0,s.last=i===a-1,s.even=i%2===0,s.odd=!s.even,this.multiTemplateDataRows?(s.dataIndex=this._renderRows[i].dataIndex,s.renderIndex=i):s.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,i=>{let a=this._columnDefsByName.get(i);return e.extractCellTemplate(a)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(i,a)=>i||a.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new Pt(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Mt()).pipe(nt(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let i=this._rowOutlet.viewContainer.length===0;if(i===this._isShowingNoDataRow)return;let a=this._noDataRowOutlet.viewContainer;if(i){let r=a.createEmbeddedView(e.templateRef),s=r.rootNodes[0];r.rootNodes.length===1&&s?.nodeType===this._document.ELEMENT_NODE&&(s.setAttribute("role","row"),s.classList.add(e._contentClassName))}else a.clear();this._isShowingNoDataRow=i,this._changeDetectorRef.markForCheck()}};t.\u0275fac=function(i){return new(i||t)(y(Oe),y(oi),y(xe),Jt("role"),y(li,8),y(ai),y(si),y(Ye),y(xt),y(di),y(Dt,12),y(qe,8))},t.\u0275cmp=O({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(i,a,r){if(i&1&&(ye(r,Ji,5),ye(r,Ke,5),ye(r,Rt,5),ye(r,tt,5),ye(r,jt,5)),i&2){let s;oe(s=ae())&&(a._noDataRow=s.first),oe(s=ae())&&(a._contentColumnDefs=s),oe(s=ae())&&(a._contentRowDefs=s),oe(s=ae())&&(a._contentHeaderRowDefs=s),oe(s=ae())&&(a._contentFooterRowDefs=s)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(i,a){i&2&&rt("cdk-table-fixed-layout",a.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",Ce],fixedLayout:[2,"fixedLayout","fixedLayout",Ce]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[X([{provide:se,useExisting:t},{provide:Ye,useClass:dt},{provide:xt,useClass:Vt},{provide:Dt,useValue:null}]),Ne,j],ngContentSelectors:Xn,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,a){i&1&&(st(Wn),De(0),De(1,1),M(2,Zn,1,0)(3,Jn,7,0)(4,eo,4,0)),i&2&&(g(2),F(a._isServer?2:-1),g(),F(a._isNativeHtmlTable?3:4))},dependencies:[zt,Ut,Kt,$t],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2});let n=t;return n})();function wt(n,t){return n.concat(Array.from(t))}function Qi(n,t){let o=t.toUpperCase(),e=n.viewContainer.element.nativeElement;for(;e;){let i=e.nodeType===1?e.nodeName:null;if(i===o)return e;if(i==="TABLE")break;e=e.parentNode}return null}var to=[[["caption"]],[["colgroup"],["col"]],"*"],io=["caption","colgroup, col","*"];function no(n,t){n&1&&De(0,2)}function oo(n,t){n&1&&(c(0,"thead",0),Y(1,1),u(),c(2,"tbody",2),Y(3,3)(4,4),u(),c(5,"tfoot",0),Y(6,5),u())}function ao(n,t){n&1&&Y(0,1)(1,3)(2,4)(3,5)}var en=(()=>{let t=class t extends qt{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275cmp=O({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(i,a){i&2&&rt("mdc-table-fixed-layout",a.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[X([{provide:qt,useExisting:t},{provide:se,useExisting:t},{provide:xt,useClass:Vt},{provide:Ye,useClass:dt},{provide:Dt,useValue:null}]),$,j],ngContentSelectors:io,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,a){i&1&&(st(to),De(0),De(1,1),M(2,no,1,0)(3,oo,7,0)(4,ao,4,0)),i&2&&(g(2),F(a._isServer?2:-1),g(),F(a._isNativeHtmlTable?3:4))},dependencies:[zt,Ut,Kt,$t],styles:[".mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-app-surface))}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell{text-align:right}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-app-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-app-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-app-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-app-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-app-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-app-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-app-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-app-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-app-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-app-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-app-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-app-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mat-mdc-header-cell{text-align:right}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-app-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-app-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-app-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2});let n=t;return n})(),tn=(()=>{let t=class t extends St{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275dir=V({type:t,selectors:[["","matCellDef",""]],standalone:!0,features:[X([{provide:St,useExisting:t}]),$]});let n=t;return n})(),nn=(()=>{let t=class t extends kt{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275dir=V({type:t,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[X([{provide:kt,useExisting:t}]),$]});let n=t;return n})();var on=(()=>{let t=class t extends Ke{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275dir=V({type:t,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},standalone:!0,features:[X([{provide:Ke,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),$]});let n=t;return n})(),an=(()=>{let t=class t extends Xi{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275dir=V({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[$]});let n=t;return n})();var rn=(()=>{let t=class t extends Zi{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275dir=V({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[$]});let n=t;return n})();var sn=(()=>{let t=class t extends tt{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275dir=V({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",Ce]},standalone:!0,features:[X([{provide:tt,useExisting:t}]),Ne,$]});let n=t;return n})();var ln=(()=>{let t=class t extends Rt{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275dir=V({type:t,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},standalone:!0,features:[X([{provide:Rt,useExisting:t}]),$]});let n=t;return n})(),cn=(()=>{let t=class t extends Bt{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275cmp=O({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[X([{provide:Bt,useExisting:t}]),$,j],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&Y(0,0)},dependencies:[Pe],encapsulation:2});let n=t;return n})();var dn=(()=>{let t=class t extends Ht{};t.\u0275fac=(()=>{let e;return function(a){return(e||(e=ie(t)))(a||t)}})(),t.\u0275cmp=O({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[X([{provide:Ht,useExisting:t}]),$,j],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,a){i&1&&Y(0,0)},dependencies:[Pe],encapsulation:2});let n=t;return n})();var ro=["table"];function so(n,t){if(n&1&&(c(0,"mat-option",7),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function lo(n,t){n&1&&(c(0,"th",16),p(1," Sample "),u())}function co(n,t){if(n&1&&(c(0,"td",17),p(1),u()),n&2){let o=t.$implicit;g(),W(" ",o.value.Sample," ")}}function uo(n,t){n&1&&(c(0,"th",16),p(1," Condition "),u())}function mo(n,t){if(n&1){let o=B();c(0,"td",17)(1,"mat-form-field")(2,"input",18,1),k("change",function(i){T(o);let a=lt(3),r=v(2);return N(r.handleAutoCompleteChange(i,a.value))}),u(),c(4,"mat-label"),p(5),u()()()}if(n&2){let o=t.$implicit;g(2),It("placeholder",o.value.Sample),It("value",o.value.Condition),g(3),G(o.value.Sample)}}function ho(n,t){n&1&&U(0,"tr",19)}function po(n,t){n&1&&U(0,"tr",20)}function fo(n,t){if(n&1&&(c(0,"table",8,0),Ge(2,10),M(3,lo,2,0,"th",11)(4,co,2,1,"td",12),Le(),Ge(5,13),M(6,uo,2,0,"th",11)(7,mo,6,3,"td",12),Le(),M(8,ho,1,0,"tr",14)(9,po,1,0,"tr",15),u()),n&2){let o=v();D("dataSource",o.annotationData),g(8),D("matHeaderRowDef",o.displayedColumns),g(),D("matRowDefColumns",o.displayedColumns)}}var un=(()=>{let t=class t{set annotation(e){e&&(this._annotation=e,this.annotationData=e.annotations.map(i=>this.fb.group({Sample:new S(i.Sample,I.required),Condition:new S(i.Condition,I.required)})),this.form.patchValue({columns:this.annotationData.map(i=>i.value.Sample)}))}get annotation(){return this._annotation}set projectFile(e){this._projectFile=e,this.web.getProjectFileColumns(e.id).subscribe(i=>{let a=[];i.forEach(r=>{a.includes(r)||a.push(r)}),this.columns=a})}get projectFile(){return this._projectFile}onSelectionChange(e){let i=e.source,a=-1,r=i.selected,s;for(let h=0;h<r.length;h++)if(!this.lastSelection.find(f=>f===r[h].value)){s=r[h];break}let l=i.options.toArray();a=l.indexOf(s),this.shiftPressed&&this.lastSelectedIndex>-1&&l.forEach((h,f)=>{this.isBetween(f,this.lastSelectedIndex,a)&&(console.log(h),h.select())}),this.lastSelection=this.form.value.columns?.slice(),this.lastSelectedIndex=a,this.table?.renderRows()}constructor(e,i,a){this.fb=e,this.web=i,this.dialogRef=a,this.columns=[],this.shiftPressed=!1,this.displayedColumns=["Sample","Condition"],this.form=this.fb.group({columns:new S([])}),this.annotationData=[],this.lastSelectedIndex=-1,this.lastSelection=[],window.addEventListener("keydown",r=>{r.key==="Shift"&&(this.shiftPressed=!0)}),window.addEventListener("keyup",r=>{r.key==="Shift"&&(this.shiftPressed=!1)}),this.form.controls.columns.valueChanges.subscribe(r=>{if(r){let s=r.map(l=>{let h=l.split(/\./g);return console.log(h),h.length>2?{Sample:l,Condition:h.slice(0,h.length-1).join(".")}:h.length===2?{Sample:l,Condition:h[0]}:{Sample:l,Condition:""}});for(let l=0;l<s.length;l++)this.annotationData.find(h=>h.value.Sample===s[l].Sample)||this.annotationData.push(this.fb.group({Sample:new S(s[l].Sample,I.required),Condition:new S(s[l].Condition,I.required)}));for(let l=0;l<this.annotationData.length;l++)this.annotationData[l].value.Sample&&(r.includes(this.annotationData[l].value.Sample)||this.annotationData.splice(l,1))}})}cancel(){this.dialogRef.close()}save(){let e=!0,i=this.annotationData.map(a=>(a.valid||(e=!1),a.value));e&&this.dialogRef.close(i)}handleAutoCompleteChange(e,i){console.log(e,i)}isBetween(e,i,a){return i<a?e>=i&&e<=a:e>=a&&e<=i}};t.\u0275fac=function(i){return new(i||t)(y(me),y(te),y(ke))},t.\u0275cmp=O({type:t,selectors:[["app-analysis-group-sample-annotation-modal"]],viewQuery:function(i,a){if(i&1&&At(ro,5),i&2){let r;oe(r=ae())&&(a.table=r.first)}},inputs:{annotation:"annotation",projectFile:"projectFile"},standalone:!0,features:[j],decls:16,vars:3,consts:[["table",""],["optionCondition",""],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[2,"width","300px"],["formControlName","columns",3,"selectionChange","multiple"],[3,"value"],["mat-table","",3,"dataSource"],["mat-button","",3,"click"],["matColumnDef","Sample"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Condition"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matInput","",2,"border-radius","0",3,"change","placeholder","value"],["mat-header-row",""],["mat-row",""]],template:function(i,a){i&1&&(c(0,"h2",2),p(1,"Sample Annotation"),u(),c(2,"div",3)(3,"form",4)(4,"mat-form-field",5)(5,"mat-select",6),k("selectionChange",function(s){return a.onSelectionChange(s)}),L(6,so,2,2,"mat-option",7,H),u(),c(8,"mat-label"),p(9,"Columns"),u()()(),M(10,fo,10,3,"table",8),u(),c(11,"mat-dialog-actions")(12,"button",9),k("click",function(){return a.save()}),p(13,"Submit"),u(),c(14,"button",9),k("click",function(){return a.cancel()}),p(15,"Close"),u()()),i&2&&(g(3),D("formGroup",a.form),g(2),D("multiple",!0),g(),P(a.columns),g(4),F(a.annotationData.length>0?10:-1))},dependencies:[Re,Ee,ee,J,ce,Z,de,ue,pe,Ie,Se,he,Me,ut,Fe,le,en,on,an,rn,cn,dn,ln,sn,tn,nn]});let n=t;return n})();function _o(n,t){if(n&1&&(c(0,"mat-option",7),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function go(n,t){if(n&1&&(c(0,"mat-option",7),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function yo(n,t){if(n&1&&(c(0,"mat-option",7),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Co(n,t){if(n&1&&(c(0,"mat-option",7),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function wo(n,t){if(n&1&&(c(0,"mat-option",7),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function vo(n,t){if(n&1&&(c(0,"mat-option",7),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function bo(n,t){if(n&1&&(c(0,"mat-form-field")(1,"mat-select",14),L(2,vo,2,2,"mat-option",7,H),u(),c(4,"mat-label"),p(5,"Comparison Label"),u()()),n&2){let o=v(4);g(2),P(o.comparison_labels)}}function xo(n,t){n&1&&(c(0,"mat-form-field"),U(1,"input",15),c(2,"mat-label"),p(3,"Comparison Label"),u()())}function Do(n,t){if(n&1){let o=B();c(0,"mat-tab",4),Ge(1),c(2,"div")(3,"form",5)(4,"div")(5,"mat-form-field")(6,"mat-select",6),L(7,_o,2,2,"mat-option",7,H),u(),c(9,"mat-label"),p(10,"Condition A"),u()()(),c(11,"div")(12,"mat-form-field")(13,"mat-select",8),L(14,go,2,2,"mat-option",7,H),u(),c(16,"mat-label"),p(17,"Condition B"),u()()(),c(18,"div")(19,"mat-form-field")(20,"mat-select",9),L(21,yo,2,2,"mat-option",7,H),u(),c(23,"mat-label"),p(24,"Fold Change Column"),u()()(),c(25,"div")(26,"mat-form-field")(27,"mat-select",10),L(28,Co,2,2,"mat-option",7,H),u(),c(30,"mat-label"),p(31,"P-Value Column"),u()()(),c(32,"div")(33,"mat-form-field")(34,"mat-select",11),L(35,wo,2,2,"mat-option",7,H),u(),c(37,"mat-label"),p(38,"Comparison Column"),u()()(),p(39," If the comparison column has been selected, please select the comparison label column below. If not, please write the comparison label in the text box below. "),c(40,"div"),M(41,bo,6,0,"mat-form-field")(42,xo,4,0,"mat-form-field"),u()()(),c(43,"div",12)(44,"button",13),k("click",function(){T(o);let i=v().$implicit,a=v(2);return N(a.copyComparison(i))}),c(45,"mat-icon"),p(46,"content_copy"),u()(),c(47,"button",13),k("click",function(){T(o);let i=v().$index,a=v(2);return N(a.removeComparison(i))}),c(48,"mat-icon"),p(49,"remove"),u()()(),Le(),u()}if(n&2){let o=v().$implicit,e=v(2);D("label",o.value.comparison_label),g(3),D("formGroup",o),g(4),P(e.conditions),g(7),P(e.conditions),g(7),P(e.columns),g(7),P(e.columns),g(7),P(e.columns),g(6),F(o.value.comparison_col?41:42)}}function So(n,t){if(n&1&&M(0,Do,50,3,"mat-tab",4),n&2){let o=t.$implicit;F(o.value.comparison_label?0:-1)}}function ko(n,t){if(n&1&&(c(0,"mat-tab-group",2),L(1,So,1,1,null,null,H),u()),n&2){let o=v();g(),P(o.form)}}var mn=(()=>{let t=class t{set comparisonMatrix(e){this._comparisonMatrix=e,this.form=e.matrix.map(i=>this.fb.group({condition_A:new S(i.condition_A,I.required),condition_B:new S(i.condition_B,I.required),fold_change_col:new S(i.fold_change_col,I.required),p_value_col:new S(i.p_value_col,I.required),comparison_label:new S(i.comparison_label,I.required),comparison_col:new S(i.comparison_col)}));for(let i of this.form)i.controls.comparison_col.value&&this.web.getUniqueComparisonLabel(e.file,i.controls.comparison_col.value).subscribe(a=>{this.comparison_labels=a}),i.controls.comparison_col.valueChanges.subscribe(a=>{a&&this.web.getUniqueComparisonLabel(e.file,a).subscribe(r=>{this.comparison_labels=r})}),i.controls.comparison_label.valueChanges.subscribe(a=>{a||i.controls.comparison_label.setValue("temp_title")})}set projectFile(e){this._projectFile=e,this.web.getProjectFileColumns(e.id).subscribe(i=>{let a=[];i.forEach(r=>{a.includes(r)||a.push(r)}),this.columns=a})}get projectFile(){return this._projectFile}set sampleAnnotations(e){this._sampleAnnotations=e,e&&(this.conditions=[],e.annotations.forEach(i=>{console.log(i.Condition),this.conditions.includes(i.Condition)||this.conditions.push(i.Condition)}))}get sampleAnnotations(){return this._sampleAnnotations}constructor(e,i,a){this.web=e,this.fb=i,this.dialogRef=a,this.comparison_labels=[],this.columns=[],this.conditions=[],this.form=[]}addComparison(){let e=this.fb.group({condition_A:new S(null,I.required),condition_B:new S(null,I.required),fold_change_col:new S(null,I.required),p_value_col:new S(null,I.required),comparison_label:new S(`comparison_${this.form.length+1}`,I.required),comparison_col:new S(null)});this.form.push(e),e.controls.comparison_col.valueChanges.subscribe(i=>{i&&this.web.getUniqueComparisonLabel(this.comparisonMatrix.file,i).subscribe(a=>{this.comparison_labels=a})}),e.controls.comparison_label.valueChanges.subscribe(i=>{i||e.controls.comparison_label.setValue("temp_title")})}removeComparison(e){this.form.splice(e,1)}copyComparison(e){let i=this.fb.group({condition_A:new S(e.value.condition_A,I.required),condition_B:new S(e.value.condition_B,I.required),fold_change_col:new S(e.value.fold_change_col,I.required),p_value_col:new S(e.value.p_value_col,I.required),comparison_label:new S(`comparison_${this.form.length+1}`,I.required),comparison_col:new S(e.value.comparison_col)});this.form.push(i),i.controls.comparison_col.valueChanges.subscribe(a=>{a&&this.web.getUniqueComparisonLabel(this.comparisonMatrix.file,a).subscribe(r=>{this.comparison_labels=r})}),i.controls.comparison_label.valueChanges.subscribe(a=>{a||i.controls.comparison_label.setValue("temp_title")})}save(){let e=!0;this.form.forEach(i=>{i.valid||(e=!1)}),e&&this.dialogRef.close(this.form.map(i=>i.value))}cancel(){this.dialogRef.close()}};t.\u0275fac=function(i){return new(i||t)(y(te),y(me),y(ke))},t.\u0275cmp=O({type:t,selectors:[["app-analysis-group-comparison-matrix-modal"]],inputs:{comparisonMatrix:"comparisonMatrix",projectFile:"projectFile",sampleAnnotations:"sampleAnnotations"},standalone:!0,features:[j],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-stretch-tabs","false"],["mat-button","",3,"click"],[3,"label"],[2,"display","flex","flex-direction","column","gap","10px","overflow-y","hidden",3,"formGroup"],["formControlName","condition_A"],[3,"value"],["formControlName","condition_B"],["formControlName","fold_change_col"],["formControlName","p_value_col"],["formControlName","comparison_col"],[2,"display","flex","flex-direction","row","gap","10px"],["mat-icon-button","","color","warn",3,"click"],["formControlName","comparison_label"],["matInput","","type","text","formControlName","comparison_label"]],template:function(i,a){i&1&&(c(0,"h2",0),p(1,"Analysis Group Comparison Matrix"),u(),c(2,"div",1),M(3,ko,3,0,"mat-tab-group",2),u(),c(4,"mat-dialog-actions")(5,"button",3),k("click",function(){return a.addComparison()}),p(6," Add Comparison "),u(),c(7,"button",3),k("click",function(){return a.save()}),p(8," Submit "),u(),c(9,"button",3),k("click",function(){return a.cancel()}),p(10," Close "),u()()),i&2&&(g(3),F(a.form.length>0?3:-1))},dependencies:[Re,Ee,Be,je,ee,J,He,ce,Z,de,ue,pe,Ie,Se,he,Me,Di,xi,Fe,le],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]});let n=t;return n})();var hn=(()=>{let t=class t{constructor(e,i,a,r,s){this.fb=e,this.dialogRef=i,this.web=a,this.ws=r,this.sb=s,this.analysisGroupIDs=[],this.form=this.fb.group({search:new S("",I.required),searchMode:new S("full",I.required),foldChange:new S(.6,I.required),pValue:new S(1.31,I.required)}),this.selectedProjects=[],this.ws.searchWSConnection?.subscribe(l=>{if(l&&l.type==="search_status")switch(l.status){case"complete":this.sb.open(`${location.host}/#/search-session/${l.id}`,"Dismiss",{duration:1e4}),this.dialogRef.close(l.id);break}})}search(){this.form.invalid||(this.selectedProjects.length===0?this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(this.analysisGroupIDs,this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode).subscribe(e=>{this.sb.open("Search queued","Dismiss",{duration:2e3})}):this.web.getAnalysisGroupsFromProjects(this.selectedProjects).subscribe(e=>{e&&this.form.value.search&&this.form.value.foldChange&&this.form.value.pValue&&this.form.value.searchMode&&this.web.createSearch(e.map(i=>i.id),this.form.value.search,this.web.searchSessionID,this.form.value.foldChange,this.form.value.pValue,this.form.value.searchMode).subscribe(i=>{this.sb.open("Search queued","Dismiss",{duration:2e3})})}))}cancel(){this.dialogRef.close()}handleMultipleProjectSelection(e){this.selectedProjects=e}};t.\u0275fac=function(i){return new(i||t)(y(me),y(ke),y(te),y(ft),y(ht))},t.\u0275cmp=O({type:t,selectors:[["app-search-modal"]],inputs:{analysisGroupIDs:"analysisGroupIDs"},standalone:!0,features:[j],decls:56,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","1px",3,"formGroup"],["matInput","","formControlName","search","id","search","type","text","placeholder","Search Term"],["formControlName","searchMode"],["value","gene"],["value","uniprot"],["value","pi"],["value","full"],["matInput","","type","number","formControlName","foldChange","placeholder","Log2 Fold Change"],["matInput","","type","number","formControlName","pValue","placeholder","P-Value"],[3,"selectedProjects","multipleSelection"],["mat-button","",3,"click"]],template:function(i,a){i&1&&(c(0,"h2",0),p(1,"Data Search"),u(),c(2,"div",1)(3,"form",2)(4,"mat-form-field"),U(5,"input",3),c(6,"mat-label"),p(7,"Search Term"),u()(),c(8,"p")(9,"b"),p(10,"Search Multiple Terms"),u(),U(11,"br"),p(12," In order to search with multiple terms, enclose each term in single quotes and separate them with "),c(13,"b"),p(14,"OR"),u(),p(15,". "),u(),c(16,"mat-form-field")(17,"mat-select",4)(18,"mat-option",5),p(19,"Gene Name"),u(),c(20,"mat-option",6),p(21,"UniProt Accession ID"),u(),c(22,"mat-option",7),p(23,"Primary IDs"),u(),c(24,"mat-option",8),p(25,"Full Text"),u()(),c(26,"mat-label"),p(27,"Search Mode"),u()(),c(28,"mat-form-field"),U(29,"input",9),c(30,"mat-label"),p(31,"Log2 Fold Change"),u()(),c(32,"mat-form-field"),U(33,"input",10),c(34,"mat-label"),p(35,"-Log10(P-Value)"),u()()(),U(36,"hr"),c(37,"p")(38,"b"),p(39,"Search by currently selected analysis groups or by selected projects below"),u(),U(40,"br"),p(41," By selecting the one or more projects below, the currently selected analysis groups will be ignored. "),u(),c(42,"mat-accordion")(43,"mat-expansion-panel")(44,"mat-expansion-panel-header")(45,"mat-panel-title"),p(46," Filter by Project "),u(),c(47,"mat-panel-description"),p(48," Optional "),u()(),c(49,"app-project-search",11),k("selectedProjects",function(s){return a.handleMultipleProjectSelection(s)}),u()()(),U(50,"hr"),u(),c(51,"mat-dialog-actions")(52,"button",12),k("click",function(){return a.search()}),p(53,"Search"),u(),c(54,"button",12),k("click",function(){return a.cancel()}),p(55,"Close"),u()()),i&2&&(g(3),D("formGroup",a.form),g(46),D("multipleSelection",!0))},dependencies:[Re,Ee,he,Me,pe,ee,J,He,mi,ce,Z,de,ue,Fe,le,Ie,Se,bi,yi,wi,Ci,vi,gi]});let n=t;return n})();function Fo(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Mo(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Io(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Ao(n,t){if(n&1&&(c(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),L(3,Fo,2,2,"mat-option",5,H),u(),c(5,"mat-label"),p(6,"Primary ID Column"),u()(),c(7,"mat-form-field")(8,"mat-select",6),L(9,Mo,2,2,"mat-option",5,H),u(),c(11,"mat-label"),p(12,"Gene Name Column"),u()(),c(13,"mat-form-field")(14,"mat-select",7),L(15,Io,2,2,"mat-option",5,H),u(),c(17,"mat-label"),p(18,"UniProt Accession ID Column"),u()()()),n&2){let o=v(2);D("formGroup",o.formDFColumn),g(3),P(o.columns),g(6),P(o.columns),g(6),P(o.columns)}}function To(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function No(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Go(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Lo(n,t){if(n&1&&(c(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),L(3,To,2,2,"mat-option",5,H),u(),c(5,"mat-label"),p(6,"Primary ID Column"),u()(),c(7,"mat-form-field")(8,"mat-select",6),L(9,No,2,2,"mat-option",5,H),u(),c(11,"mat-label"),p(12,"Gene Name Column"),u()(),c(13,"mat-form-field")(14,"mat-select",7),L(15,Go,2,2,"mat-option",5,H),u(),c(17,"mat-label"),p(18,"UniProt Accession ID Column"),u()()()),n&2){let o=v(2);D("formGroup",o.formSearchedColumn),g(3),P(o.columns),g(6),P(o.columns),g(6),P(o.columns)}}function Po(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Vo(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Oo(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function jo(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Bo(n,t){if(n&1&&(c(0,"mat-option",5),p(1),u()),n&2){let o=t.$implicit;D("value",o),g(),G(o)}}function Ho(n,t){if(n&1&&(c(0,"form",3)(1,"mat-form-field")(2,"mat-select",4),L(3,Po,2,2,"mat-option",5,H),u(),c(5,"mat-label"),p(6,"Primary ID Column"),u()(),c(7,"mat-form-field")(8,"mat-select",6),L(9,Vo,2,2,"mat-option",5,H),u(),c(11,"mat-label"),p(12,"Gene Name Column"),u()(),c(13,"mat-form-field")(14,"mat-select",7),L(15,Oo,2,2,"mat-option",5,H),u(),c(17,"mat-label"),p(18,"UniProt Accession ID Column"),u()(),c(19,"mat-form-field")(20,"mat-select",8),L(21,jo,2,2,"mat-option",5,H),u(),c(23,"mat-label"),p(24,"Copy Number Rank Column"),u()(),c(25,"mat-form-field")(26,"mat-select",9),L(27,Bo,2,2,"mat-option",5,H),u(),c(29,"mat-label"),p(30,"Copy Number Column"),u()()()),n&2){let o=v(2);D("formGroup",o.formSearchedColumn),g(3),P(o.columns),g(6),P(o.columns),g(6),P(o.columns),g(6),P(o.columns),g(6),P(o.columns)}}function Uo(n,t){if(n&1&&M(0,Ao,19,1,"form",3)(1,Lo,19,1,"form",3)(2,Ho,31,1,"form",3),n&2){let o=v();F(o.file.file_category==="df"?0:o.file.file_category==="searched"?1:o.file.file_category==="copy_number"?2:-1)}}var pn=(()=>{let t=class t{set file(e){this._file=e,e.extra_data&&(console.log(e.extra_data),e.file_category==="df"?(this.formDFColumn.controls.primary_id_col.setValue(e.extra_data.primary_id_col),this.formDFColumn.controls.gene_name_col.setValue(e.extra_data.gene_name_col),this.formDFColumn.controls.uniprot_id_col.setValue(e.extra_data.uniprot_id_col),this.formDFColumn.controls.peptide_seq_col.setValue(e.extra_data.peptide_seq_col),this.formDFColumn.controls.modification_position_in_peptide_col.setValue(e.extra_data.modification_position_in_peptide_col),this.formDFColumn.controls.modification_position_in_protein_col.setValue(e.extra_data.modification_position_in_protein_col),this.formDFColumn.controls.localization_prob_col.setValue(e.extra_data.localization_prob_col),console.log(this.formDFColumn.value)):e.file_category==="searched"?(this.formSearchedColumn.controls.primary_id_col.setValue(e.extra_data.primary_id_col),this.formSearchedColumn.controls.gene_name_col.setValue(e.extra_data.gene_name_col),this.formSearchedColumn.controls.uniprot_id_col.setValue(e.extra_data.uniprot_id_col)):e.file_category==="copy_number"&&(this.formCopyNumberColumn.controls.primary_id_col.setValue(e.extra_data.primary_id_col),this.formCopyNumberColumn.controls.gene_name_col.setValue(e.extra_data.gene_name_col),this.formCopyNumberColumn.controls.uniprot_id_col.setValue(e.extra_data.uniprot_id_col),this.formCopyNumberColumn.controls.rank_col.setValue(e.extra_data.rank_col),this.formCopyNumberColumn.controls.copy_number_col.setValue(e.extra_data.copy_number_col))),this.web.getProjectFileColumns(e.id).subscribe(i=>{this.columns=i})}get file(){return this._file}constructor(e,i,a){this.fb=e,this.matDialogRef=i,this.web=a,this._file=void 0,this.formDFColumn=this.fb.group({primary_id_col:new S("",I.required),gene_name_col:new S(""),uniprot_id_col:new S(""),peptide_seq_col:new S(""),modification_position_in_peptide_col:new S(""),modification_position_in_protein_col:new S(""),localization_prob_col:new S("")}),this.formSearchedColumn=this.fb.group({primary_id_col:new S("",I.required),gene_name_col:new S(""),uniprot_id_col:new S("")}),this.formCopyNumberColumn=this.fb.group({primary_id_col:new S("",I.required),gene_name_col:new S(""),uniprot_id_col:new S(""),rank_col:new S(""),copy_number_col:new S("")}),this.columns=[]}save(){let e={file_category:this.file.file_category,extra_data:{}};this.file.file_category==="df"?(this.formDFColumn.controls.uniprot_id_col.value&&(e.extra_data.uniprot_id_col=this.formDFColumn.controls.uniprot_id_col.value),this.formDFColumn.controls.primary_id_col.value&&(e.extra_data.primary_id_col=this.formDFColumn.controls.primary_id_col.value),this.formDFColumn.controls.gene_name_col.value&&(e.extra_data.gene_name_col=this.formDFColumn.controls.gene_name_col.value)):this.file.file_category==="searched"&&(this.formSearchedColumn.controls.uniprot_id_col.value&&(e.extra_data.uniprot_id_col=this.formSearchedColumn.controls.uniprot_id_col.value),this.formSearchedColumn.controls.primary_id_col.value&&(e.extra_data.primary_id_col=this.formSearchedColumn.controls.primary_id_col.value),this.formSearchedColumn.controls.gene_name_col.value&&(e.extra_data.gene_name_col=this.formSearchedColumn.controls.gene_name_col.value)),this.matDialogRef.close(e)}cancel(){this.matDialogRef.close()}};t.\u0275fac=function(i){return new(i||t)(y(me),y(ke),y(te))},t.\u0275cmp=O({type:t,selectors:[["app-file-extra-data-modal"]],inputs:{file:"file"},standalone:!0,features:[j],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-button","",3,"click"],[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["formControlName","primary_id_col"],[3,"value"],["formControlName","gene_name_col"],["formControlName","uniprot_id_col"],["formControlName","rank_col"],["formControlName","copy_number_col"]],template:function(i,a){i&1&&(c(0,"h2",0),p(1,"File Extra Data"),u(),c(2,"div",1),M(3,Uo,3,1),u(),c(4,"mat-dialog-actions")(5,"button",2),k("click",function(){return a.save()}),p(6,"Submit"),u(),c(7,"button",2),k("click",function(){return a.cancel()}),p(8,"Close"),u()()),i&2&&(g(3),F(a.file?3:-1))},dependencies:[Re,Ee,ee,J,ce,Z,de,ue,he,Se,Ie,pe,Fe,le]});let n=t;return n})();var $o=gn(yn());Nt.plotlyjs=$o;var fn=(()=>{let t=class t{set curtainData(e){this._curtainData=e,this.drawVolcanoPlot()}get curtainData(){return this._curtainData}constructor(e,i){this.accounts=e,this.graph=i,this.selected=new ne,this._curtainData=void 0,this.graphData=[],this.graphLayout={height:700,width:700,margin:{r:null,l:null,b:null,t:null},xaxis:{title:"<b>Log2FC</b>",tickmode:"linear",ticklen:5,showgrid:!1,visible:!0,tickfont:{size:14,color:"black"}},yaxis:{title:"<b>-log10(p-value)</b>",tickmode:"linear",ticklen:5,showgrid:!1,visible:!0,showticklabels:!0,zeroline:!0,tickfont:{size:14,color:"black"}},annotations:[],showlegend:!0,legend:{orientation:"h"},title:{text:"",font:{size:24,family:"Arial, sans-serif",color:"black"}}},this.revision=0,this.config={toImageButtonOptions:{format:"svg",filename:this.graphLayout.title.text,height:this.graphLayout.height,width:this.graphLayout.width,scale:1}},this.colorMap={},this.graph.redrawTrigger.subscribe(()=>{this.drawVolcanoPlot()})}drawVolcanoPlot(){if(!this.curtainData&&!this.curtainData.settings)return;console.log(this.curtainData),this.graphLayout.title.text=this.curtainData.settings.title,this.colorMap=this.curtainData.settings.colorMap;let e=Object.keys(this.colorMap),i=this.curtainData.data.filter(C=>C["Fold Change"]!==null&&C["Fold Change"]!==void 0&&!isNaN(C["Fold Change"])),a=this.curtainData.data.filter(C=>C["P-value"]!==null&&C["P-value"]!==void 0&&!isNaN(C["P-value"])),r=Math.min(...i.map(C=>C["Fold Change"])),s=Math.max(...i.map(C=>C["Fold Change"])),l=0,h=Math.max(...a.map(C=>C["P-value"]));this.graphLayout.xaxis.range=[r-.5,s+.5],this.graphLayout.yaxis.range=[l,h-l*.5];let f=this.curtainData.settings.volcanoAxis;f.minX&&(this.graphLayout.xaxis.range[0]=f.minX),f.maxX&&(this.graphLayout.xaxis.range[1]=f.maxX),f.minY&&(this.graphLayout.yaxis.range[0]=f.minY),f.maxY&&(this.graphLayout.yaxis.range[1]=f.maxY),f.x&&(this.graphLayout.xaxis.title=`<b>${f.x}</b>`),f.y&&(this.graphLayout.yaxis.title=`<b>${f.y}</b>`);let d={};d.Background={x:[],y:[],mode:"markers",type:"scatter",name:"Background",text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:"#a4a2a2",opacity:.3}};for(let C of this.curtainData.selections)d[C]={x:[],y:[],mode:"markers",type:"scattergl",name:C,text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:this.curtainData.settings.colorMap[C]}};this.curtainData.data.forEach(C=>{if(C["Primary ID"]in this.curtainData.selection_map){let q=this.curtainData.selection_map[C["Primary ID"]];for(let A of this.curtainData.selections)q[A]&&(d[A].x.push(C["Fold Change"]),d[A].y.push(C["P-value"]),d[A].text.push(`${C["Gene Names"]}(${C["Primary ID"]})`),d[A].data.push(C))}else if(this.curtainData.settings.backGroundColorGrey)d.Background.x.push(C["Fold Change"]),d.Background.y.push(C["P-value"]),d.Background.text.push(`${C["Gene Names"]}(${C["Primary ID"]})`),d.Background.data.push(C);else{let q=this.significantGroup(C["Fold Change"],C["P-value"]),A=e.find(Q=>Q.startsWith(`${q[0]} (${C.Comparison})`));A&&(d[A]||(d[A]={x:[],y:[],mode:"markers",type:"scatter",name:A,text:[],data:[],marker:{size:this.curtainData.settings.scatterPlotMarkerSize,color:this.curtainData.settings.colorMap[A]}}),d[A].x.push(C["Fold Change"]),d[A].y.push(C["P-value"]),d[A].text.push(`${C["Gene Names"]}(${C["Primary ID"]})`),d[A].data.push(C))}}),this.graphData=[];for(let C in d)this.graphData.push(d[C]);this.graphData=this.graphData.reverse();let _=[];_.push({type:"line",x0:-this.curtainData.settings.log2FCCutoff,y0:0,x1:-this.curtainData.settings.log2FCCutoff,y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1,dash:"dot"}}),_.push({type:"line",x0:this.curtainData.settings.log2FCCutoff,x1:this.curtainData.settings.log2FCCutoff,y0:0,y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1,dash:"dot"}});let w=this.graphLayout.xaxis.range[0]-1;this.curtainData.settings.volcanoAxis.minX&&(w=this.curtainData.settings.volcanoAxis.minX-1);let x=this.graphLayout.xaxis.range[1]+1;if(this.curtainData.settings.volcanoAxis.maxX&&(x=this.curtainData.settings.volcanoAxis.maxX+1),_.push({type:"line",x0:w,x1:x,y0:-Math.log10(this.curtainData.settings.pCutoff),y1:-Math.log10(this.curtainData.settings.pCutoff),line:{color:"rgb(21,4,4)",width:1,dash:"dot"}}),this.graphLayout.shapes=_,this.curtainData.settings.volcanoPlotGrid&&(this.graphLayout.yaxis.showgrid=this.curtainData.settings.volcanoPlotGrid.y,this.graphLayout.xaxis.showgrid=this.curtainData.settings.volcanoPlotGrid.x),this.curtainData.settings.volcanoPlotDimension&&(this.curtainData.settings.volcanoPlotDimension.height&&(this.graphLayout.height=this.curtainData.settings.volcanoPlotDimension.height),this.curtainData.settings.volcanoPlotDimension.width&&(this.graphLayout.width=this.curtainData.settings.volcanoPlotDimension.width),this.curtainData.settings.volcanoPlotDimension.margin))for(let C in this.curtainData.settings.volcanoPlotDimension.margin)this.curtainData.settings.volcanoPlotDimension.margin[C]&&(this.graphLayout.margin[C]=this.curtainData.settings.volcanoPlotDimension.margin[C]);if(this.curtainData.settings.volcanoPlotYaxisPosition&&(this.curtainData.settings.volcanoPlotYaxisPosition.includes("left")&&this.graphLayout.shapes.push({type:"line",x0:this.graphLayout.xaxis.range[0],x1:this.graphLayout.xaxis.range[0],y0:this.graphLayout.yaxis.range[0],y1:this.graphLayout.yaxis.range[1],line:{color:"rgb(21,4,4)",width:1}}),this.curtainData.settings.volcanoPlotYaxisPosition.includes("middle")?this.graphLayout.xaxis.zerolinecolor="#000000":this.graphLayout.xaxis.zerolinecolor="#ffffff"),this.graphLayout.annotations=[],this.curtainData.settings.textAnnotation)for(let C in this.curtainData.settings.textAnnotation)this.curtainData.settings.textAnnotation[C].data.showannotation===!0&&this.graphLayout.annotations.push(this.curtainData.settings.textAnnotation[C].data);this.config={toImageButtonOptions:{format:"svg",filename:this.graphLayout.title.text,height:this.graphLayout.height,width:this.graphLayout.width,scale:1,margin:this.graphLayout.margin}};let R=document.getElementsByTagName("body")[0],z=window.getComputedStyle(R).backgroundColor;if(this.accounts.userAccount.darkMode){this.graphLayout.plot_bgcolor=z,this.graphLayout.paper_bgcolor=z,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white";for(let C of this.graphLayout.shapes)C.line.color="white";this.graphLayout.yaxis.showgrid&&(this.graphLayout.yaxis.gridcolor="white"),this.graphLayout.xaxis.showgrid&&(this.graphLayout.xaxis.gridcolor="white");for(let C of this.graphLayout.annotations)C.font.color="white",C.arrowcolor="white"}else this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14};if(this.curtainData.settings.volcanoAdditionalShapes)for(let C of this.curtainData.settings.volcanoAdditionalShapes)this.graphLayout.shapes.push(C);this.revision+=1,console.log("cutoff",_),console.log(this.graphData)}significantGroup(e,i){let a=-Math.log10(this.curtainData.settings.pCutoff),r=[],s="";return a>i?(r.push("P-value > "+this.curtainData.settings.pCutoff),s="P-value > "):(r.push("P-value <= "+this.curtainData.settings.pCutoff),s="P-value <= "),Math.abs(e)>this.curtainData.settings.log2FCCutoff?(r.push("FC > "+this.curtainData.settings.log2FCCutoff),s+="FC > "):(r.push("FC <= "+this.curtainData.settings.log2FCCutoff),s+="FC <= "),[r.join(";"),s]}selectData(e){if("points"in e){let i=[];for(let a of e.points)i.push(a.data.data[a.pointIndex]);this.selected.emit(i)}}};t.\u0275fac=function(i){return new(i||t)(y(pt),y(ki))},t.\u0275cmp=O({type:t,selectors:[["app-volcano-plot"]],inputs:{curtainData:"curtainData"},outputs:{selected:"selected"},standalone:!0,features:[j],decls:1,vars:5,consts:[[3,"selected","plotlyClick","data","config","layout","revision","updateOnlyWithRevision"]],template:function(i,a){i&1&&(c(0,"plotly-plot",0),k("selected",function(s){return a.selectData(s)})("plotlyClick",function(s){return a.selectData(s)}),u()),i&2&&D("data",a.graphData)("config",a.config)("layout",a.graphLayout)("revision",a.revision)("updateOnlyWithRevision",!0)},dependencies:[Nt,Si]});let n=t;return n})();function Ko(n,t){if(n&1){let o=B();c(0,"div",0)(1,"app-volcano-plot",3),k("selected",function(i){T(o);let a=v();return N(a.handleVolcanoSelection(i))}),u()()}if(n&2){let o=v();g(),D("curtainData",o.curtainData)}}function qo(n,t){if(n&1&&(c(0,"p"),p(1," Associated Project: "),c(2,"a",18),p(3),u()()),n&2){let o=v(2);g(2),ni("href","/#/project/",o.analysisGroup.project,"",ti),g(),G(o.associatedProject.name)}}function Yo(n,t){if(n&1&&(c(0,"p"),p(1),u(),U(2,"mat-progress-bar",19)),n&2){let o=v(2);g(),G(o.composingCurtainProgress.message),g(),D("value",o.composingCurtainProgress.progress)("mode","determinate")("color","primary")}}function Qo(n,t){if(n&1){let o=B();c(0,"button",20),k("click",function(){T(o);let i=v(2);return N(i.composeDataFromCurtain())}),p(1,"Use Curtain Link For Data"),u()}if(n&2){let o=v(2);D("disabled",!o.accounts.loggedIn)}}function Wo(n,t){if(n&1&&p(0),n&2){let o=v(2);W(": ",o.analysisGroupDF.name,"")}}function Xo(n,t){if(n&1){let o=B();c(0,"app-upload-file",21),k("fileUploaded",function(i){T(o);let a=v(2);return N(a.handleFileUploaded(i,"df"))}),u()}if(n&2){let o=v(2);D("analysisGroupId",o.analysisGroup.id)("fileCategory","df")}}function Zo(n,t){if(n&1){let o=B();c(0,"button",22),k("click",function(){T(o);let i=v(3);return N(i.deleteFile(i.analysisGroupDF))}),c(1,"mat-icon"),p(2,"delete"),u()(),c(3,"button",23),k("click",function(){T(o);let i=v(3);return N(i.openExtraDataModal(i.analysisGroupDF))}),p(4,"Extra Data"),u()}if(n&2){let o=v(3);g(3),D("disabled",!o.accounts.loggedIn)}}function Jo(n,t){if(n&1){let o=B();c(0,"button",22),k("click",function(){T(o);let i=v(2);return N(i.downloadFile(i.analysisGroupDF))}),c(1,"mat-icon"),p(2,"download"),u()(),M(3,Zo,5,1)}if(n&2){let o=v(2);g(3),F(o.canEdit?3:-1)}}function ea(n,t){if(n&1&&p(0),n&2){let o=v(2);W(": ",o.analysisGroupSearched.name,"")}}function ta(n,t){if(n&1){let o=B();c(0,"app-upload-file",21),k("fileUploaded",function(i){T(o);let a=v(2);return N(a.handleFileUploaded(i,"searched"))}),u()}if(n&2){let o=v(2);D("analysisGroupId",o.analysisGroup.id)("fileCategory","searched")}}function ia(n,t){if(n&1){let o=B();c(0,"button",22),k("click",function(){T(o);let i=v(3);return N(i.deleteFile(i.analysisGroupSearched))}),c(1,"mat-icon"),p(2,"delete"),u()(),c(3,"button",23),k("click",function(){T(o);let i=v(3);return N(i.openExtraDataModal(i.analysisGroupSearched))}),p(4,"Extra Data"),u()}if(n&2){let o=v(3);g(3),D("disabled",!o.accounts.loggedIn)}}function na(n,t){if(n&1){let o=B();c(0,"button",22),k("click",function(){T(o);let i=v(2);return N(i.downloadFile(i.analysisGroupSearched))}),c(1,"mat-icon"),p(2,"download"),u()(),M(3,ia,5,1)}if(n&2){let o=v(2);g(3),F(o.canEdit?3:-1)}}function oa(n,t){if(n&1&&p(0),n&2){let o=v(2);W(": ",o.analysisGroupCopyNumber.name,"")}}function aa(n,t){if(n&1){let o=B();c(0,"app-upload-file",21),k("fileUploaded",function(i){T(o);let a=v(2);return N(a.handleFileUploaded(i,"copy_number"))}),u()}if(n&2){let o=v(2);D("analysisGroupId",o.analysisGroup.id)("fileCategory","copy_number")}}function ra(n,t){if(n&1){let o=B();c(0,"button",22),k("click",function(){T(o);let i=v(3);return N(i.deleteFile(i.analysisGroupCopyNumber))}),c(1,"mat-icon"),p(2,"delete"),u()(),c(3,"button",23),k("click",function(){T(o);let i=v(3);return N(i.openExtraDataModal(i.analysisGroupCopyNumber))}),p(4,"Extra Data"),u()}if(n&2){let o=v(3);g(3),D("disabled",!o.accounts.loggedIn)}}function sa(n,t){if(n&1){let o=B();c(0,"button",22),k("click",function(){T(o);let i=v(2);return N(i.downloadFile(i.analysisGroupCopyNumber))}),c(1,"mat-icon"),p(2,"download"),u()(),M(3,ra,5,1)}if(n&2){let o=v(2);g(3),F(o.canEdit?3:-1)}}function la(n,t){if(n&1&&p(0),n&2){let o=v(3);W("(",o.sampleAnnotations.annotations.length,")")}}function ca(n,t){if(n&1){let o=B();c(0,"button",23),k("click",function(){T(o);let i=v(2);return N(i.setAnnotationModal(i.analysisGroupSearched))}),p(1,"Sample Annotation "),M(2,la,1,1),u()}if(n&2){let o=v(2);D("disabled",!o.canEdit),g(2),F(o.sampleAnnotations?2:-1)}}function da(n,t){if(n&1&&p(0),n&2){let o=v(3);W("(",o.comparisonMatrix.matrix.length,")")}}function ua(n,t){if(n&1){let o=B();c(0,"button",23),k("click",function(){T(o);let i=v(2);return N(i.setComparisonMatrixModal(i.sampleAnnotations,i.analysisGroupSearched,i.analysisGroupDF))}),p(1,"Comparison Matrix "),M(2,da,1,1),u()}if(n&2){let o=v(2);D("disabled",!o.canEdit),g(2),F(o.comparisonMatrix?2:-1)}}function ma(n,t){if(n&1){let o=B();M(0,qo,4,3,"p"),c(1,"form",4),k("ngSubmit",function(){T(o);let i=v();return N(i.updateAnalysisGroup())}),c(2,"mat-form-field",2),U(3,"input",5),c(4,"mat-label"),p(5,"Analysis Group Name"),u()(),c(6,"mat-form-field",2),U(7,"textarea",6),c(8,"mat-label"),p(9,"Analysis Group Description"),u()(),c(10,"div",7)(11,"mat-form-field",2),U(12,"input",8),c(13,"mat-label"),p(14,"Curtain Link"),u()(),c(15,"button",9),k("click",function(){T(o);let i=v();return N(i.refreshCurtainLink())}),c(16,"mat-icon"),p(17,"refresh"),u()()(),M(18,Yo,3,4),c(19,"div",7)(20,"button",10),p(21,"Update Analysis Group"),u(),M(22,Qo,2,1,"button",11),u()(),c(23,"div",12)(24,"div")(25,"p"),p(26,"Differential Analysis File "),M(27,Wo,1,1),u()(),M(28,Xo,1,2,"app-upload-file",13)(29,Jo,4,1),u(),c(30,"div",12)(31,"div")(32,"p"),p(33,"Searched File "),M(34,ea,1,1),u()(),M(35,ta,1,2,"app-upload-file",13)(36,na,4,1),u(),c(37,"div",12)(38,"div")(39,"p"),p(40,"Copy Number File "),M(41,oa,1,1),u()(),M(42,aa,1,2,"app-upload-file",13)(43,sa,4,1),u(),c(44,"div",14),M(45,ca,3,2,"button",15)(46,ua,3,2,"button",15),c(47,"button",16),k("click",function(){T(o);let i=v();return N(i.openSearchModal())}),c(48,"mat-icon"),p(49,"search"),u()(),c(50,"button",17),k("click",function(){T(o);let i=v();return N(i.deleteAnalysisGroup())}),c(51,"mat-icon"),p(52,"delete"),u()()()}if(n&2){let o=v();F(o.associatedProject?0:-1),g(),D("formGroup",o.form),g(14),D("disabled",!o.canEdit),g(3),F(o.composingCurtainProgress.started?18:-1),g(2),D("disabled",!o.canEdit),g(2),F(o.analysisGroup.curtain_link?22:-1),g(5),F(o.analysisGroupDF?27:-1),g(),F(o.canEdit?28:-1),g(),F(o.analysisGroupDF?29:-1),g(5),F(o.analysisGroupSearched?34:-1),g(),F(o.canEdit?35:-1),g(),F(o.analysisGroupSearched?36:-1),g(5),F(o.analysisGroupCopyNumber?41:-1),g(),F(o.canEdit?42:-1),g(),F(o.analysisGroupCopyNumber?43:-1),g(2),F(o.analysisGroupSearched?45:-1),g(),F(o.sampleAnnotations&&o.analysisGroupSearched&&o.analysisGroupDF?46:-1),g(4),D("disabled",!o.canEdit)}}var Es=(()=>{let t=class t{set analysisGroup(e){this._analysisGroup=e,e&&this.accounts.getAnalysisGroupPermissions(e.id).subscribe(i=>{this.canEdit=i.edit}),this.curtainData=void 0,e&&(e.curtain_link&&this.getCurtainData(),this.dataService.analysisGroupChoices.forEach(i=>{i.value===e.analysis_group_type&&(this.analysisType=i.label)}),this.titleService.setTitle(`AG - ${e.name}`),this.web.getProject(e.project).subscribe(i=>{this.associatedProject=i}),this.form.controls.name.setValue(e.name),this.form.controls.description.setValue(e.description),this.form.controls.curtain_link.setValue(e.curtain_link),this.getFiles(e))}getFiles(e){this.web.getAnalysisGroupFiles(e.id).subscribe(i=>{this.analysisGroupDF=i.find(a=>a.file_category==="df"),this.analysisGroupSearched=i.find(a=>a.file_category==="searched"),this.analysisGroupSearched&&this.web.getProjectFileSampleAnnotations(this.analysisGroupSearched.id).subscribe(a=>{this.sampleAnnotations=a}),this.analysisGroupDF&&this.web.getProjectFileComparisonMatrix(this.analysisGroupDF.id).subscribe(a=>{this.comparisonMatrix=a})})}get analysisGroup(){return this._analysisGroup}constructor(e,i,a,r,s,l,h,f){this.sb=e,this.dataService=i,this.titleService=a,this.fb=r,this.web=s,this.matDialog=l,this.accounts=h,this.ws=f,this.analysisType="proteomics",this.canEdit=!1,this.composingCurtainProgress={progress:0,message:"",completed:!1,error:!1,started:!1},this.deleted=new ne,this.updated=new ne,this.form=this.fb.group({name:new S({value:"",disabled:!this.accounts.loggedIn},{validators:[I.required]}),description:new S({value:"",disabled:!this.accounts.loggedIn},{validators:[I.required]}),curtain_link:new S({value:"",disabled:!this.accounts.loggedIn})}),this.ws.curtainWSConnection?.subscribe(d=>{if(d.analysis_group_id===this.analysisGroup?.id){if(d.type==="curtain_status")switch(d.status){case"started":this.sb.open("Curtain link retrieval started","Dismiss",{duration:5e3});break;case"complete":this.sb.open("Curtain link retrieval complete","Dismiss",{duration:5e3}),this.getCurtainData();break}else if(d.type==="curtain_compose_status")switch(d.status){case"started":this.sb.open("Composing data from Curtain started","Dismiss",{duration:5e3}),this.composingCurtainProgress.progress=30,this.composingCurtainProgress.message="Removed analysis group associated data if exist";break;case"complete":this.sb.open("Composing data from Curtain completed. Please manually set Condition A and Condition B in Comparison Matrix.","Dismiss"),this.composingCurtainProgress.progress=100,this.composingCurtainProgress.message="Composing data from Curtain completed. Please manually set Condition A and Condition B in Comparison Matrix.",this.composingCurtainProgress.completed=!0,this.web.getAnalysisGroup(this.analysisGroup.id).subscribe(_=>{this.analysisGroup=_});break;case"error":this.sb.open("Error composing data from Curtain","Dismiss",{duration:5e3}),this.composingCurtainProgress.error=!0;break}}})}updateAnalysisGroup(){this.form.invalid||this.web.updateAnalysisGroup(this.analysisGroup.id,this.form.value.name,this.form.value.description,this.form.value.curtain_link,this.web.searchSessionID).subscribe(e=>{this.updated.emit(e)})}getCurtainData(){this.analysisGroup&&(this.sb.open("Retrieving curtain visualization","Dismiss",{duration:5e3}),this.web.getCurtainLinkData(this.analysisGroup.id).subscribe(e=>{this.curtainData=e,this.sb.open("Curtain visualization retrieved","Dismiss",{duration:5e3})},e=>{this.sb.open("Error retrieving curtain visualization","Dismiss",{duration:5e3}),this.curtainData=void 0}))}handleFileUploaded(e,i){i==="searched"?(this.analysisGroupSearched=e,this.sb.open("Searched File uploaded","Dismiss",{duration:5e3})):i==="df"?(this.analysisGroupDF=e,this.sb.open("Differential Analysis File uploaded","Dismiss",{duration:5e3})):i==="copy_number"&&(this.analysisGroupCopyNumber=e,this.sb.open("Copy Number Analysis File uploaded","Dismiss",{duration:5e3}))}setAnnotationModal(e){let i=this.matDialog.open(un);i.componentInstance.projectFile=e,this.sampleAnnotations&&(i.componentInstance.annotation=this.sampleAnnotations),i.afterClosed().subscribe(a=>{a&&(console.log(this.sampleAnnotations),this.sampleAnnotations?this.web.updateSampleAnnotation(this.sampleAnnotations.id,this.sampleAnnotations.name,a).subscribe(r=>{this.sampleAnnotations=r,this.sb.open("Sample annotation updated","Dismiss",{duration:5e3})}):this.web.createSampleAnnotation(this.analysisGroup.id,this.analysisGroup?.name+" sample annotation",a,this.analysisGroupSearched.id).subscribe(r=>{this.sampleAnnotations=r,this.sb.open("Sample annotation created","Dismiss",{duration:5e3})}))})}setComparisonMatrixModal(e,i,a){let r=this.matDialog.open(mn);r.componentInstance.sampleAnnotations=e,r.componentInstance.projectFile=a,this.comparisonMatrix&&(r.componentInstance.comparisonMatrix=this.comparisonMatrix),r.afterClosed().subscribe(s=>{s&&(this.comparisonMatrix?this.web.updateComparisonMatrix(this.comparisonMatrix.id,this.comparisonMatrix.name,s).subscribe(l=>{this.comparisonMatrix=l,this.sb.open("Comparison matrix updated","Dismiss",{duration:5e3})}):this.web.createComparisonMatrix(this.analysisGroup.id,this.analysisGroup?.name+" comparison matrix",s,a.id).subscribe(l=>{this.comparisonMatrix=l,this.sb.open("Comparison matrix created","Dismiss",{duration:5e3})}))})}deleteAnalysisGroup(){this.matDialog.open(Tt).afterClosed().subscribe(e=>{e&&this.web.deleteAnalysisGroup(this.analysisGroup.id).subscribe(()=>{this.deleted.emit(!0),this.sb.open("Analysis Group deleted","Dismiss",{duration:5e3})})})}openSearchModal(){let e=this.matDialog.open(hn);e.componentInstance.analysisGroupIDs=[this.analysisGroup.id],e.afterClosed().subscribe(i=>{i&&window.open(`/#/search-session/${i}`,"_blank")})}openExtraDataModal(e){let i=this.matDialog.open(pn);i.componentInstance.file=e,i.afterClosed().subscribe(a=>{a&&(console.log(a),this.web.updateProjectFileExtraData(e.id,a.extra_data).subscribe(r=>{e.file_category==="df"?(this.analysisGroupDF=r,this.sb.open("Differential Analysis extra data updated","Dismiss",{duration:5e3})):e.file_category==="searched"?(this.analysisGroupSearched=r,this.sb.open("Searched extra data updated","Dismiss",{duration:5e3})):e.file_category==="copy_number"&&(this.analysisGroupCopyNumber=r,this.sb.open("Copy Number extra data updated","Dismiss",{duration:5e3}))}))})}refreshCurtainLink(){this.analysisGroup&&this.web.searchSessionID&&this.web.refreshCurtainLink(this.analysisGroup.id,this.web.searchSessionID).subscribe(e=>{this.analysisGroup=e,this.sb.open("Curtain data content refreshed","Dismiss",{duration:5e3})})}handleVolcanoSelection(e){console.log(e)}composeDataFromCurtain(){this.composingCurtainProgress={progress:0,message:"",completed:!1,error:!1},this.analysisGroup&&this.web.searchSessionID&&(this.composingCurtainProgress.started=!0,this.web.composeAnalysisGroupFilesFromCurtainData(this.analysisGroup.id,this.web.searchSessionID).subscribe(e=>{this.composingCurtainProgress.progress=10,this.composingCurtainProgress.message="Data composition started",this.sb.open("Data composition started","Dismiss",{duration:5e3})}))}deleteFile(e){this.matDialog.open(Tt).afterClosed().subscribe(i=>{i&&this.web.deleteProjectFile(e.id).subscribe(()=>{e.file_category==="df"?(this.analysisGroupDF=void 0,this.sb.open("Differential Analysis File deleted","Dismiss",{duration:5e3})):e.file_category==="searched"?(this.analysisGroupSearched=void 0,this.sb.open("Searched File deleted","Dismiss",{duration:5e3})):e.file_category==="copy_number"&&(this.analysisGroupCopyNumber=void 0,this.sb.open("Copy Number Analysis File deleted","Dismiss",{duration:5e3}))})})}downloadFile(e){this.web.getFileDownloadToken(e.id).subscribe(i=>{window.open(`${this.web.baseURL}/api/project_files/download/?token=${i.token}`)})}};t.\u0275fac=function(i){return new(i||t)(y(ht),y(mt),y(ri),y(me),y(te),y(ui),y(pt),y(ft))},t.\u0275cmp=O({type:t,selectors:[["app-analysis-group-view"]],inputs:{analysisGroup:"analysisGroup"},outputs:{deleted:"deleted",updated:"updated"},standalone:!0,features:[j],decls:4,vars:2,consts:[[2,"display","flex","flex-direction","row","justify-content","center","flex-wrap","wrap"],[2,"display","flex","flex-direction","row","justify-content","center","padding","50px"],[2,"width","100%"],[3,"selected","curtainData"],[2,"display","flex","flex-direction","column","gap","20px","padding","20px",3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text","placeholder","Analysis Group Name"],["matInput","","formControlName","description","placeholder","Analysis Group Description"],[2,"display","flex","flex-direction","row","gap","10px"],["matInput","","formControlName","curtain_link","type","text","placeholder","Curtain Link"],["mat-icon-button","","type","button",3,"click","disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-flat-button","","color","primary","type","button",3,"disabled"],[2,"display","flex","flex-direction","row","gap","20px","align-items","center"],[3,"analysisGroupId","fileCategory"],[2,"display","flex","flex-direction","row","gap","20px","padding","20px"],["mat-flat-button","","color","primary",3,"disabled"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","",3,"click","disabled"],["target","_blank",3,"href"],[3,"value","mode","color"],["mat-flat-button","","color","primary","type","button",3,"click","disabled"],[3,"fileUploaded","analysisGroupId","fileCategory"],["mat-icon-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(i,a){i&1&&(M(0,Ko,2,1,"div",0),c(1,"div",1)(2,"div",2),M(3,ma,53,18),u()()),i&2&&(F(a.curtainData?0:-1),g(3),F(a.analysisGroup?3:-1))},dependencies:[ut,J,He,ce,Z,le,pe,je,Me,he,ee,de,ue,qi,Be,fn,_t]});let n=t;return n})();export{Ca as a,en as b,tn as c,nn as d,on as e,an as f,rn as g,sn as h,ln as i,cn as j,dn as k,Es as l};
