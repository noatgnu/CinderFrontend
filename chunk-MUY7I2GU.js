import{a as Z}from"./chunk-E7WCFS4V.js";import{b as W,d as H,e as J,f as K,h as U,i as X,j as Y}from"./chunk-MSVFRO7K.js";import{Aa as R,Ba as q,Da as $,Fa as z,Ia as B,J as T,Ja as O,La as ee,P as M,ha as A,ja as w,ka as E,la as N,na as F,pa as d,ra as L,sa as V,ua as c,wa as k,za as Q}from"./chunk-D4LI6TAZ.js";import{Aa as P,Ba as D,Bb as p,Hb as h,Jb as S,Kb as v,Lb as i,Mb as a,Nb as C,Rb as G,Ub as j,Wb as u,fb as s,gb as f,gc as m,ic as y,oc as I,sa as b,xb as _}from"./chunk-QNTGE4BG.js";var ie=(e,o)=>o.value,oe=(e,o)=>o.id;function re(e,o){if(e&1&&(i(0,"mat-list-option",6),m(1),a()),e&2){let t=o.$implicit;p("value",t),s(),y(" ",t.name," ")}}function ae(e,o){if(e&1){let t=G();i(0,"mat-selection-list",10),S(1,re,2,2,"mat-list-option",6,oe),a(),i(3,"mat-paginator",11),j("page",function(n){P(t);let l=u(3);return D(l.handlePageEvent(n))}),a()}if(e&2){let t=u(3);p("multiple",!1),s(),v(t.projectQuery.results),s(2),p("pageSize",t.projectPageLimit)("length",t.projectQuery.count)("pageIndex",t.projectPageIndex)}}function ne(e,o){if(e&1&&_(0,ae,4,4),e&2){let t=u(2);h(t.projectQuery.results.length>0?0:-1)}}function le(e,o){if(e&1&&(i(0,"form",1)(1,"mat-form-field",8),C(2,"input",9),i(3,"mat-label"),m(4,"Project Search Term"),a()(),_(5,ne,1,1),a()),e&2){let t=u();p("formGroup",t.formProjectSearch),s(5),h(t.projectQuery?5:-1)}}function se(e,o){if(e&1&&(i(0,"mat-list")(1,"mat-list-item")(2,"span",12)(3,"b"),m(4),a()()()()),e&2){let t=u();s(4),y("Selected project: ",t.project.name,"")}}function me(e,o){if(e&1&&(i(0,"mat-option",6),m(1),a()),e&2){let t=o.$implicit;p("value",t.value),s(),y(" ",t.label," ")}}var ve=(()=>{let o=class o{set project(r){this._project=r,this.form.controls.project_id.setValue(r.id),this.form.controls.project_name.setValue(r.name)}get project(){return this._project}constructor(r,n,l,x){this.dataService=r,this.web=n,this.fb=l,this.matDialogRef=x,this.enableProjectSelection=!1,this.form=this.fb.group({name:new c("",d.required),description:new c("",d.required),project_name:new c("",d.required),project_id:new c(0,d.required),analysis_group_type:new c("proteomics",d.required)}),this.formProjectSearch=this.fb.group({searchTerm:new c(""),selectedProject:new c(void 0)}),this.projectPageLimit=5,this.projectPageIndex=0,this.projectQuery=void 0,this.analysisGroupTypeChoices=[""],this.formProjectSearch.controls.selectedProject.valueChanges.subscribe(g=>{g&&(this.project=g[0])}),this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(g=>{this.web.getProjects(void 0,this.projectPageLimit,0,g).subscribe(te=>{this.projectQuery=te})})}close(){this.matDialogRef.close()}submit(){this.form.valid&&this.project&&this.form.value.name&&this.form.value.description&&this.form.value.project_id&&this.form.value.analysis_group_type&&this.web.createAnalysisGroup(this.form.value.name,this.form.value.description,this.form.value.project_id,this.form.value.analysis_group_type).subscribe(r=>{this.matDialogRef.close(r)},r=>{this.matDialogRef.close(r)})}getProjects(r,n){this.web.getProjects(void 0,n,r,this.formProjectSearch.value.searchTerm).subscribe(l=>{this.projectQuery=l})}handlePageEvent(r){this.projectPageIndex=r.pageIndex;let n=r.pageIndex*r.pageSize;this.getProjects(n,this.projectPageLimit)}};o.\u0275fac=function(n){return new(n||o)(f(Z),f(ee),f(q),f(A))},o.\u0275cmp=b({type:o,selectors:[["app-create-analysis-group-dialog"]],inputs:{enableProjectSelection:"enableProjectSelection",project:"project"},standalone:!0,features:[I],decls:25,vars:3,consts:[["mat-dialog-title",""],[3,"formGroup"],[2,"display","flex","flex-direction","column","gap","1px",3,"formGroup"],["matInput","","formControlName","name","type","text","placeholder","Analysis Group Name"],["matInput","","formControlName","description","placeholder","Analysis Group Description"],["formControlName","analysis_group_type"],[3,"value"],["mat-button","",3,"click"],[2,"width","100%"],["matInput","","formControlName","searchTerm","placeholder","Project Search","type","search"],["formControlName","selectedProject",3,"multiple"],[3,"page","pageSize","length","pageIndex"],["matListItemTitle",""]],template:function(n,l){n&1&&(i(0,"h2",0),m(1,"Create Analysis Group"),a(),i(2,"mat-dialog-content"),_(3,le,6,2,"form",1),i(4,"form",2),_(5,se,5,1,"mat-list"),i(6,"mat-form-field"),C(7,"input",3),i(8,"mat-label"),m(9,"Analysis Group Name"),a()(),i(10,"mat-form-field"),C(11,"textarea",4),i(12,"mat-label"),m(13,"Analysis Group Description"),a()(),i(14,"mat-form-field")(15,"mat-select",5),S(16,me,2,2,"mat-option",6,ie),a(),i(18,"mat-label"),m(19,"Analysis Group Type"),a()()()(),i(20,"mat-dialog-actions")(21,"button",7),j("click",function(){return l.submit()}),m(22,"Create"),a(),i(23,"button",7),j("click",function(){return l.close()}),m(24,"Close"),a()()),n&2&&(s(3),h(l.enableProjectSelection?3:-1),s(),p("formGroup",l.form),s(),h(l.project?5:-1),s(11),v(l.dataService.analysisGroupChoices))},dependencies:[w,E,$,k,F,L,V,Q,R,B,O,N,M,U,K,H,J,z,W,X,Y,T]});let e=o;return e})();export{ve as a};
