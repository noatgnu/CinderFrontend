import{a as Qe,b as Xe,c as Ye,d as Ze}from"./chunk-437H6VWS.js";import{a as ze}from"./chunk-HZFMELAP.js";import{a as ke}from"./chunk-V5RE6BFB.js";import{a as Ee,b as Ne,c as Fe}from"./chunk-YLNQ6YAN.js";import{a as Re,b as Ue,c as Ve,d as je,e as Pe,f as Be,g as Oe,h as We,i as He,j as $e}from"./chunk-CF2TBK2L.js";import{a as J}from"./chunk-5BQX5E3H.js";import{a as G,c as Ge,d as T,e as A,f as k,g as L}from"./chunk-LUNVEN3K.js";import{Aa as P,Ca as B,Ea as Te,Ha as O,Ia as W,Ka as Ae,Ma as C,Q as Y,R as y,S as Z,ka as E,ma as z,oa as N,pa as F,ra as q,ta as R,wa as U,xa as V,ya as j}from"./chunk-QJNOXFLF.js";import"./chunk-HX3ESI56.js";import{d as Ce,e as Se,f as ve,g as xe,j as we,k as Me,l as De,m as ye,n as Le,o as Ie}from"./chunk-QJ2HU2ZW.js";import{Aa as S,Ba as v,Bb as h,Cc as _e,Hb as _,Ja as ae,Jb as pe,Kb as de,Lb as r,Mb as a,Nb as g,Ob as H,Pb as $,Ra as se,Rb as w,Sc as ge,Ub as p,Wb as f,fb as l,fc as X,ga as ie,gb as u,gc as s,hb as le,hc as fe,ia as ne,ic as D,jb as ce,jc as he,kd as be,la as oe,lb as me,oa as I,ob as ue,oc as M,sa as x,va as re,xb as d}from"./chunk-TUTLJQZA.js";var Je=[{path:"accounts",loadChildren:()=>import("./chunk-TG24LLZF.js").then(t=>t.AccountsModule)},{path:"home",loadChildren:()=>import("./chunk-O5SGKZMD.js").then(t=>t.HomeModule)},{path:"project",loadChildren:()=>import("./chunk-DPWORSQB.js").then(t=>t.ProjectModule)},{path:"analysis-group",loadChildren:()=>import("./chunk-BLPSYGM7.js").then(t=>t.AnalysisGroupModule)},{path:"search-session",loadChildren:()=>import("./chunk-DHSVVQLQ.js").then(t=>t.SearchSessionModule)},{path:"collate",loadChildren:()=>import("./chunk-6HYBLIWO.js").then(t=>t.CollateModule)},{path:"admin",loadChildren:()=>import("./chunk-ZNZ6WC7D.js").then(t=>t.AdminModule)},{path:"user",loadChildren:()=>import("./chunk-BPPOYGNT.js").then(t=>t.UserModule)},{path:"**",redirectTo:"home"}];var lt="@",ct=(()=>{class t{constructor(e,i,n,c,m){this.doc=e,this.delegate=i,this.zone=n,this.animationType=c,this.moduleImpl=m,this._rendererFactoryPromise=null,this.scheduler=I(ce,{optional:!0}),this.loadingSchedulerFn=I(mt,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-KJSKG4J4.js").then(n=>n),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(n=>{throw new ie(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:c})=>{this._engine=n(this.animationType,this.doc);let m=new c(this.delegate,this._engine,this.zone);return this.delegate=m,m})}createRenderer(e,i){let n=this.delegate.createRenderer(e,i);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let c=new ee(n);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(m=>{let b=m.createRenderer(e,i);c.use(b),this.scheduler?.notify(10)}).catch(m=>{c.use(n)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){le()}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})(),ee=class{constructor(o){this.delegate=o,this.replay=[],this.\u0275type=1}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,i,n){this.delegate.insertBefore(o,e,i,n)}removeChild(o,e,i){this.delegate.removeChild(o,e,i)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,i,n){this.delegate.setAttribute(o,e,i,n)}removeAttribute(o,e,i){this.delegate.removeAttribute(o,e,i)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,i,n){this.delegate.setStyle(o,e,i,n)}removeStyle(o,e,i){this.delegate.removeStyle(o,e,i)}setProperty(o,e,i){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(o,e,i)),this.delegate.setProperty(o,e,i)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,i){return this.shouldReplay(e)&&this.replay.push(n=>n.listen(o,e,i)),this.delegate.listen(o,e,i)}shouldReplay(o){return this.replay!==null&&o.startsWith(lt)}},mt=new oe("");function Ke(t="animations"){return ue("NgAsyncAnimations"),re([{provide:me,useFactory:(o,e,i)=>new ct(o,e,i,t),deps:[ge,ve,ae]},{provide:se,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var qe=(t,o)=>{let e=I(L),i=I(C);return t=t.clone({setHeaders:{"X-Cinder-Instance-Id":i.cinderInstanceID}}),e.userAccount.token&&(t=t.clone({setHeaders:{Authorization:`Token ${e.userAccount.token}`}})),o(t)};var et={providers:[_e({eventCoalescing:!0}),ye(Je,Le(),Ie()),Ce(Se([qe])),Ke()]};var nt=(()=>{class t{constructor(e,i,n,c){this.accounts=e,this.fb=i,this.dialogRef=n,this.web=c,this.form=this.fb.group({username:new q("",z.required),password:new q("",z.required)})}close(){this.dialogRef.close()}login(){this.form.invalid||this.form.value.username&&this.form.value.password&&this.accounts.login(this.form.value.username,this.form.value.password).subscribe(e=>{this.accounts.loggedIn=!0,this.accounts.userAccount.token=e.token,this.accounts.userAccount.username=this.form.value.username,this.accounts.saveToStorage(),this.dialogRef.close(),this.web.getCurrentUser().subscribe(i=>{i&&(this.accounts.currentUser=i)})},e=>{console.log(e)})}static{this.\u0275fac=function(i){return new(i||t)(u(L),u(j),u(G),u(C))}}static{this.\u0275cmp=x({type:t,selectors:[["app-login-dialog"]],standalone:!0,features:[M],decls:17,vars:1,consts:[["mat-dialog-title",""],[2,"display","flex","flex-direction","column",3,"formGroup"],["matInput","","type","text","formControlName","username","id","username",1,"form-control"],["matInput","","type","password","formControlName","password","id","password",1,"form-control"],["mat-button","",3,"click"]],template:function(i,n){i&1&&(r(0,"h2",0),s(1,"Login"),a(),r(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field"),g(5,"input",2),r(6,"mat-label"),s(7,"Username"),a()(),r(8,"mat-form-field"),g(9,"input",3),r(10,"mat-label"),s(11,"Password"),a()()()(),r(12,"mat-dialog-actions")(13,"button",4),p("click",function(){return n.login()}),s(14,"Login"),a(),r(15,"button",4),p("click",function(){return n.close()}),s(16,"Close"),a()()),i&2&&(l(3),h("formGroup",n.form))},dependencies:[T,A,P,R,E,N,F,U,V,O,W,k,y,B]})}}return t})();var ot=(()=>{class t{constructor(e,i,n,c){this.snackBar=e,this.dialogRef=i,this.web=n,this.fb=c,this.form=this.fb.group({name:["",z.required]})}submit(){if(this.form.invalid)return;let e=this.form.value.name;e&&this.web.getLabGroups(e).subscribe({next:i=>{i.results.length>0?this.snackBar.open("Lab group with this name already exists","Close",{duration:3e3}):this.web.createLabGroup(e).subscribe({next:()=>{this.snackBar.open("Lab group created successfully","Close",{duration:3e3}),this.dialogRef.close(!0)},error:()=>{this.snackBar.open("Error creating lab group","Close",{duration:3e3})}})},error:()=>{this.snackBar.open("Error checking lab group name","Close",{duration:3e3})}})}close(){this.dialogRef.close()}static{this.\u0275fac=function(i){return new(i||t)(u(J),u(G),u(C),u(j))}}static{this.\u0275cmp=x({type:t,selectors:[["app-lab-group-create-dialog"]],standalone:!0,features:[M],decls:13,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngSubmit","formGroup"],["matInput","","formControlName","name"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(i,n){i&1&&(r(0,"h1",0),s(1,"Add Lab Group"),a(),r(2,"div",1)(3,"form",2),p("ngSubmit",function(){return n.submit()}),r(4,"mat-form-field")(5,"mat-label"),s(6,"Lab Group Name"),a(),g(7,"input",3),a()()(),r(8,"div",4)(9,"button",5),p("click",function(){return n.submit()}),s(10,"Submit"),a(),r(11,"button",5),p("click",function(){return n.close()}),s(12,"Cancel"),a()()),i&2&&(l(3),h("formGroup",n.form))},dependencies:[T,A,P,R,E,N,F,U,V,B,W,O,k,y]})}}return t})();function pt(t,o){t&1&&(r(0,"th",17),s(1," ID "),a())}function dt(t,o){if(t&1&&(r(0,"td",18),s(1),a()),t&2){let e=o.$implicit;l(),D(" ",e.id," ")}}function ft(t,o){t&1&&(r(0,"th",17),s(1," Username "),a())}function ht(t,o){if(t&1&&(r(0,"td",18),s(1),a()),t&2){let e=o.$implicit;l(),D(" ",e.username," ")}}function _t(t,o){t&1&&(r(0,"th",17),s(1," First Name "),a())}function gt(t,o){if(t&1&&(r(0,"td",18),s(1),a()),t&2){let e=o.$implicit;l(),D(" ",e.first_name," ")}}function bt(t,o){t&1&&(r(0,"th",17),s(1," Last Name "),a())}function Ct(t,o){if(t&1&&(r(0,"td",18),s(1),a()),t&2){let e=o.$implicit;l(),D(" ",e.last_name," ")}}function St(t,o){t&1&&g(0,"tr",19)}function vt(t,o){if(t&1){let e=w();r(0,"tr",20),p("click",function(){let n=S(e).$implicit,c=f(2);return v(c.submit(n))}),a()}}function xt(t,o){if(t&1){let e=w();r(0,"table",7),H(1,8),d(2,pt,2,0,"th",9)(3,dt,2,1,"td",10),$(),H(4,11),d(5,ft,2,0,"th",9)(6,ht,2,1,"td",10),$(),H(7,12),d(8,_t,2,0,"th",9)(9,gt,2,1,"td",10),$(),H(10,13),d(11,bt,2,0,"th",9)(12,Ct,2,1,"td",10),$(),d(13,St,1,0,"tr",14)(14,vt,1,0,"tr",15),a(),r(15,"mat-paginator",16),p("page",function(n){S(e);let c=f();return v(c.onPageChange(n))}),a()}if(t&2){let e=f();h("dataSource",e.memberQuery.results),l(13),h("matHeaderRowDef",e.displayedColumns),l(),h("matRowDefColumns",e.displayedColumns),l(),h("length",e.memberQuery.count)("pageSize",e.limit)("pageIndex",e.offset)}}var rt=(()=>{class t{set labGroupID(e){this._labGroupID=e,this.fetchMembers()}get labGroupID(){return this._labGroupID}constructor(e,i,n){this.dialogRef=e,this.web=i,this.fb=n,this._labGroupID=0,this.memberQuery=null,this.limit=10,this.offset=0,this.form=this.fb.group({selectedUser:[null],searchTerm:[""]}),this.displayedColumns=["id","username","first_name","last_name"],this.fetchMembers()}close(){this.dialogRef.close()}submit(e){this.dialogRef.close(e)}fetchMembers(){this.web.getUsers(this.form.value.searchTerm,this.limit,this.offset,this.labGroupID).subscribe(e=>{this.memberQuery=e})}onPageChange(e){this.limit=e.pageSize,this.offset=e.pageIndex*e.pageSize,this.fetchMembers()}selectAll(){this.dialogRef.close({all:!0})}static{this.\u0275fac=function(i){return new(i||t)(u(G),u(C),u(j))}}static{this.\u0275cmp=x({type:t,selectors:[["app-lab-group-user-list-dialog"]],inputs:{labGroupID:"labGroupID"},standalone:!0,features:[M],decls:17,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","20px",3,"ngSubmit","formGroup"],["matInput","","formControlName","searchTerm"],["mat-icon-button","","matSuffix","",3,"click"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","first_name"],["matColumnDef","last_name"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,n){i&1&&(r(0,"h1",0),s(1,"Select Lab Member"),a(),r(2,"div",1)(3,"form",2),p("ngSubmit",function(){return n.fetchMembers()}),r(4,"mat-form-field"),g(5,"input",3),r(6,"mat-label"),s(7,"Search Term"),a(),r(8,"button",4),p("click",function(){return n.fetchMembers()}),r(9,"mat-icon"),s(10,"search"),a()()()(),d(11,xt,16,6),a(),r(12,"div",5)(13,"button",6),p("click",function(){return n.close()}),s(14,"Cancel"),a(),r(15,"button",6),p("click",function(){return n.selectAll()}),s(16,"Revert Default"),a()()),i&2&&(l(3),h("formGroup",n.form),l(8),_(n.memberQuery?11:-1))},dependencies:[T,A,P,R,E,N,F,U,V,B,W,O,Be,Ue,je,Pe,He,Oe,$e,We,Re,Ae,k,y,Ve,Y,Z,Te],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.highlighted-row[_ngcontent-%COMP%]{background-color:#009dff}"]})}}return t})();var wt=(t,o)=>o.id;function Mt(t,o){if(t&1&&s(0),t&2){let e=f(2);he(" (",e.currentUser.first_name," ",e.currentUser.last_name,")")}}function Dt(t,o){if(t&1&&s(0),t&2){let e=f(2);D(" ",e.currentLabGroup.name," ")}}function yt(t,o){t&1&&s(0,"All Lab Group Selected")}function Lt(t,o){t&1&&(r(0,"mat-icon"),s(1,"shield_person"),a())}function It(t,o){t&1&&(r(0,"mat-icon"),s(1,"person"),a())}function Gt(t,o){if(t&1&&(r(0,"button",9),s(1),d(2,Lt,2,0,"mat-icon")(3,It,2,0,"mat-icon"),a()),t&2){f();let e=X(45),i=f();h("matMenuTriggerFor",e),l(),D("Logged in as: ",i.accounts.currentUser.username," "),l(),_(i.accounts.currentUser.is_staff?2:3)}}function Tt(t,o){if(t&1){let e=w();r(0,"button",22),p("click",function(){S(e);let n=f(2);return v(n.accounts.logout())}),r(1,"mat-icon"),s(2,"logout"),a()()}}function At(t,o){if(t&1){let e=w();r(0,"button",23),p("click",function(){S(e);let n=f(2);return v(n.openLoginDialog())}),r(1,"mat-icon"),s(2,"login"),a()()}}function kt(t,o){if(t&1){let e=w();r(0,"a",24),p("click",function(){let n=S(e).$implicit,c=f(2);return v(c.selectLabGroup(n))}),r(1,"span"),s(2),a()()}if(t&2){let e=o.$implicit;l(2),fe(e.name)}}function Et(t,o){if(t&1){let e=w();r(0,"a",24),p("click",function(){S(e);let n=f(2);return v(n.selectAllLabGroups())}),r(1,"span"),s(2,"All Lab Group"),a()()}}function Nt(t,o){if(t&1){let e=w();r(0,"a",24),p("click",function(){S(e);let n=f(3);return v(n.openLabGroupCreateDialog())}),s(1," + Create New Lab Group "),a()}}function Ft(t,o){if(t&1&&d(0,Nt,2,0,"a",18),t&2){let e=f(2);_(e.accounts.currentUser.is_staff?0:-1)}}function Rt(t,o){t&1&&(r(0,"a",21),s(1," Administration "),a())}function Ut(t,o){if(t&1){let e=w();r(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"div",3),g(3,"img",4),r(4,"a",5)(5,"span",6)(6,"b"),s(7,"C|nder"),a()()()(),g(8,"span",7),r(9,"button",8),p("click",function(){S(e);let n=f();return v(n.openLabMemberDialog())}),s(10,"Filter By Lab Member "),d(11,Mt,1,2),a(),r(12,"button",9),d(13,Dt,1,1)(14,yt,1,0),a(),d(15,Gt,4,3,"button",9),r(16,"mat-slide-toggle",10),p("change",function(){S(e);let n=f();return v(n.switchDarkMode())}),r(17,"mat-icon"),s(18,"lightbulb"),a()(),r(19,"button",11)(20,"mat-icon"),s(21,"view_list"),a()(),d(22,Tt,3,0,"button",12)(23,At,3,0,"button",13),a()(),r(24,"mat-menu",null,0)(26,"a",14)(27,"span"),s(28,"Project"),a()(),r(29,"a",15)(30,"span"),s(31,"Analysis Group"),a()(),r(32,"a",16)(33,"span"),s(34,"Search Session"),a()(),r(35,"a",17)(36,"span"),s(37,"Collate"),a()()(),r(38,"mat-menu",null,1),pe(40,kt,3,1,"a",18,wt),d(42,Et,3,0,"a",18)(43,Ft,1,1),a(),r(44,"mat-menu",null,2)(46,"a",19)(47,"span"),s(48,"Profile"),a()(),r(49,"a",20)(50,"span"),s(51,"Change Password"),a()(),d(52,Rt,2,0,"a",21),a()}if(t&2){let e=X(25),i=X(39),n=f();l(3),h("width",25)("height",25)("ngSrc","/assets/logo.png"),l(8),_(n.currentUser?11:-1),l(),h("matMenuTriggerFor",i),l(),_(n.currentLabGroup?13:14),l(2),_(n.accounts.loggedIn&&n.accounts.currentUser?15:-1),l(),h("color","primary")("checked",n.accounts.userAccount.darkMode),l(3),h("matMenuTriggerFor",e),l(3),_(n.accounts.loggedIn?22:23),l(18),de(n.labGroups),l(2),_(n.currentLabGroup?42:-1),l(),_(n.accounts.loggedIn&&n.accounts.currentUser?43:-1),l(9),_(n.accounts.currentUser!=null&&n.accounts.currentUser.is_staff?52:-1)}}var at=(()=>{class t{constructor(e,i,n,c,m){this.webService=e,this.router=i,this.accounts=n,this.dialog=c,this.graphService=m,this.labGroups=[],this.isCollateView=!1,this.accounts.userAccount.currentUser&&this.webService.getUser(this.accounts.userAccount.currentUser).subscribe({next:b=>{this.currentUser=b},error:b=>{console.error("Error fetching user:",b)}})}ngOnInit(){this.fetchLabGroups(),this.router.events.subscribe(e=>{e instanceof we&&(this.isCollateView=e.urlAfterRedirects.includes("/collate/view"))})}openLoginDialog(){let e=this.dialog.open(nt)}switchDarkMode(){let e=document.getElementsByTagName("body")[0];console.log(this.accounts.userAccount.darkMode),this.accounts.userAccount.darkMode?(e.classList.remove("dark-theme"),e.classList.add("light-theme")):(e.classList.add("dark-theme"),e.classList.remove("light-theme")),this.accounts.userAccount.darkMode=!this.accounts.userAccount.darkMode,this.accounts.saveToStorage(),this.graphService.redrawTrigger.next(!0)}fetchLabGroups(){this.webService.getLabGroups().subscribe({next:e=>{this.labGroups=e.results,this.accounts.userAccount.currentLabGroup&&(this.currentLabGroup=this.labGroups.find(i=>i.id===this.accounts.userAccount.currentLabGroup))},error:e=>{console.error("Error fetching lab groups:",e)}})}selectLabGroup(e){this.currentLabGroup=e,this.accounts.userAccount.currentLabGroup=e.id,this.accounts.saveToStorage(),this.webService.updateFromLabGroupSelection.next(!0)}selectAllLabGroups(){this.currentLabGroup=void 0,this.accounts.userAccount.currentLabGroup=null,this.accounts.saveToStorage(),this.webService.updateFromLabGroupSelection.next(!0)}openLabGroupCreateDialog(){this.dialog.open(ot).afterClosed().subscribe(i=>{i&&this.fetchLabGroups()})}openLabMemberDialog(){let e=this.dialog.open(rt);this.currentLabGroup&&(e.componentInstance.labGroupID=this.currentLabGroup.id),e.afterClosed().subscribe(i=>{"all"in i?(this.currentUser=void 0,this.accounts.userAccount.currentUser=null):(this.currentUser=i,this.accounts.userAccount.currentUser=i.id),this.accounts.saveToStorage(),this.webService.updateFromLabGroupSelection.next(!0)})}static{this.\u0275fac=function(i){return new(i||t)(u(C),u(De),u(L),u(Ge),u(ze))}}static{this.\u0275cmp=x({type:t,selectors:[["app-navbar"]],standalone:!0,features:[M],decls:1,vars:1,consts:[["menu","matMenu"],["labGroupMenu","matMenu"],["userMenu","matMenu"],[2,"display","flex","justify-content","center","align-items","center"],[3,"width","height","ngSrc"],["href","/#/home"],[2,"color","#ba0000"],[1,"spacer"],["mat-button","",3,"click"],["mat-button","",3,"matMenuTriggerFor"],[1,"example-margin",3,"change","color","checked"],["mat-icon-button","","aria-label","View Project or Analysis Group",2,"color","rgb(172,110,110)",3,"matMenuTriggerFor"],["mat-icon-button","","aria-label","Logout",2,"color","rgb(186,104,166)"],["mat-icon-button","","aria-label","Login",2,"color","rgb(172,110,110)"],["mat-menu-item","","href","/#/project"],["mat-menu-item","","href","/#/analysis-group"],["mat-menu-item","","href","/#/search-session"],["mat-menu-item","","href","/#/collate"],["mat-menu-item",""],["mat-menu-item","","href","/#/user"],["mat-menu-item","","href","/#/user/change-password"],["mat-menu-item","","href","/#/admin"],["mat-icon-button","","aria-label","Logout",2,"color","rgb(186,104,166)",3,"click"],["mat-icon-button","","aria-label","Login",2,"color","rgb(172,110,110)",3,"click"],["mat-menu-item","",3,"click"]],template:function(i,n){i&1&&d(0,Ut,53,14),i&2&&_(n.isCollateView?-1:0)},dependencies:[Fe,Ne,Ee,Z,Y,Ye,Xe,Ze,be,Qe,y]})}}return t})();function Vt(t,o){t&1&&g(0,"router-outlet")}var st=(()=>{class t{constructor(e,i,n,c){this.web=e,this.accounts=i,this.ws=n,this.sb=c,this.title="CinderNG",this.ready=!1,this.ws.lostConnectionSubject.subscribe(m=>{m&&this.sb.open("Lost push notification connection to server. Refresh to restore.","Dismiss")}),this.accounts.loadAuthFromStorage(),this.web.getCurrentUser().subscribe(m=>{m&&(this.accounts.currentUser=m)}),this.web.searchSessionID=localStorage.getItem("cinderSearchSessionID"),console.log(this.web.searchSessionID),this.web.searchSessionID?(this.ws.connectSearchWS(this.web.searchSessionID),this.ws.searchWSConnection?.subscribe(m=>{m&&(console.log(m),m.type==="logout"&&this.accounts.logout())}),this.ws.connectCurtainWS(this.web.searchSessionID),this.ws.curtainWSConnection?.subscribe(m=>{})):this.web.getSearchSessionID().subscribe(m=>{this.ws.connectSearchWS(m),localStorage.setItem("cinderSearchSessionID",m),this.web.searchSessionID=m,this.ws.searchWSConnection?.subscribe(b=>{if(b&&b.type==="search_status")switch(b.status){case"error":this.sb.open("Search failed","Dismiss",{duration:2e3});break;case"started":this.sb.open("Search started","Dismiss",{duration:2e3});break;case"in_progress":this.sb.open(`Search in progress: ${b.current_progress}/${b.found_files}`,"Dismiss",{duration:2e3})}}),this.ws.connectSearchWS(m),this.ws.curtainWSConnection?.subscribe(b=>{})}),this.ready=!0}static{this.\u0275fac=function(i){return new(i||t)(u(C),u(L),u(ke),u(J))}}static{this.\u0275cmp=x({type:t,selectors:[["app-root"]],standalone:!0,features:[M],decls:3,vars:1,consts:[[1,"container"]],template:function(i,n){i&1&&(g(0,"app-navbar"),r(1,"div",0),d(2,Vt,1,0,"router-outlet"),a()),i&2&&(l(2),_(n.ready?2:-1))},dependencies:[Me,at],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 64px)}"]})}}return t})();xe(st,et).catch(t=>console.error(t));
