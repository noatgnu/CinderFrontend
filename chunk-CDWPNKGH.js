import{Ca as Bd,F as yh,X as Dd,Y as xh,_ as zd,a as yu,aa as Rd,b as Ld,ba as vf,f as Cd,k as Pd,r as Id,w as Od,x as mf}from"./chunk-IHNP6RTA.js";import{c as Fd,d as yf,f as Rc,g as xf,i as bf}from"./chunk-AESYL7IM.js";import{$ as lf,$a as wl,$b as _d,Ac as df,Bb as ph,Cb as dh,Db as gh,Ea as gd,Eb as mh,F as of,Fb as es,G as sd,Ga as Nl,Gb as Js,Ha as Ur,Hb as pf,I as sf,Ia as md,Ic as Md,J as ld,Lb as Oc,N as cd,Na as uf,Ob as Tl,Pc as Sd,Qb as kl,Qc as Ed,Rb as Dc,S as ud,Sb as zc,Uc as gf,Vb as gu,Wb as Ps,Xb as yo,Yb as xo,Zb as vh,_ as fd,_b as bd,a as rd,aa as hd,ab as ni,ba as Bl,cb as Cc,d as Ig,eb as vd,f as uh,fa as pd,fc as ac,g as Ec,ga as fh,gc as mu,ha as fu,ib as hh,ic as wd,j as id,ja as Lc,jc as Td,kb as yd,la as dd,lb as ff,m as uu,ma as hu,ob as du,qa as nc,qb as ic,ra as pu,s as ad,sa as rc,u as od,ub as Pc,vb as Ic,vc as vu,wb as Ks,wc as kd,xa as cf,xb as xd,xc as Ad,ya as no,yb as ul,za as ro,zb as hf,zc as Is}from"./chunk-QIAB43MT.js";var dm=Ig((_f,kh)=>{"use strict";(function(ir,Gn){typeof _f=="object"&&typeof kh=="object"?kh.exports=Gn():typeof define=="function"&&define.amd?define([],Gn):typeof _f=="object"?_f.Plotly=Gn():ir.Plotly=Gn()})(self,function(){return function(){var ir={79288:function(X,I,e){"use strict";var A=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in k){var T=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");A.addStyleRule(T,k[o])}},86712:function(X,I,e){"use strict";X.exports=e(84224)},37240:function(X,I,e){"use strict";X.exports=e(51132)},29744:function(X,I,e){"use strict";X.exports=e(94456)},29352:function(X,I,e){"use strict";X.exports=e(67244)},96144:function(X,I,e){"use strict";X.exports=e(97776)},53219:function(X,I,e){"use strict";X.exports=e(61712)},4624:function(X,I,e){"use strict";X.exports=e(95856)},54543:function(X,I,e){"use strict";X.exports=e(54272)},45e3:function(X,I,e){"use strict";X.exports=e(85404)},62300:function(X,I,e){"use strict";X.exports=e(26048)},6920:function(X,I,e){"use strict";X.exports=e(66240)},10264:function(X,I,e){"use strict";X.exports=e(40448)},32016:function(X,I,e){"use strict";X.exports=e(64884)},27528:function(X,I,e){"use strict";X.exports=e(15088)},75556:function(X,I,e){"use strict";X.exports=e(76744)},39204:function(X,I,e){"use strict";X.exports=e(94704)},73996:function(X,I,e){"use strict";X.exports=e(62396)},16489:function(X,I,e){"use strict";X.exports=e(32028)},5e3:function(X,I,e){"use strict";X.exports=e(81932)},77280:function(X,I,e){"use strict";X.exports=e(45536)},33992:function(X,I,e){"use strict";X.exports=e(42600)},17600:function(X,I,e){"use strict";X.exports=e(21536)},49116:function(X,I,e){"use strict";X.exports=e(65664)},46808:function(X,I,e){"use strict";X.exports=e(29044)},36168:function(X,I,e){"use strict";X.exports=e(48928)},13792:function(X,I,e){"use strict";var A=e(32016);A.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),X.exports=A},3920:function(X,I,e){"use strict";X.exports=e(43480)},25120:function(X,I,e){"use strict";X.exports=e(6296)},4340:function(X,I,e){"use strict";X.exports=e(7404)},86152:function(X,I,e){"use strict";X.exports=e(65456)},56816:function(X,I,e){"use strict";X.exports=e(22020)},89296:function(X,I,e){"use strict";X.exports=e(29928)},20260:function(X,I,e){"use strict";X.exports=e(75792)},32140:function(X,I,e){"use strict";X.exports=e(156)},84764:function(X,I,e){"use strict";X.exports=e(45499)},48824:function(X,I,e){"use strict";X.exports=e(3296)},69967:function(X,I,e){"use strict";X.exports=e(4184)},8363:function(X,I,e){"use strict";X.exports=e(36952)},86636:function(X,I,e){"use strict";X.exports=e(38983)},70192:function(X,I,e){"use strict";X.exports=e(11572)},81604:function(X,I,e){"use strict";X.exports=e(76924)},63796:function(X,I,e){"use strict";X.exports=e(62944)},89336:function(X,I,e){"use strict";X.exports=e(95443)},67484:function(X,I,e){"use strict";X.exports=e(34864)},97312:function(X,I,e){"use strict";X.exports=e(76272)},42192:function(X,I,e){"use strict";X.exports=e(97924)},29800:function(X,I,e){"use strict";X.exports=e(15436)},63560:function(X,I,e){"use strict";X.exports=e(5621)},89904:function(X,I,e){"use strict";X.exports=e(91304)},50248:function(X,I,e){"use strict";X.exports=e(41724)},65832:function(X,I,e){"use strict";X.exports=e(31991)},79440:function(X,I,e){"use strict";X.exports=e(22869)},13752:function(X,I,e){"use strict";X.exports=e(67776)},83096:function(X,I,e){"use strict";X.exports=e(95952)},72196:function(X){"use strict";X.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(X,I,e){"use strict";var A=e(72196),k=e(25376),o=e(33816),T=e(31780).templatedArray;e(36208),X.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(23816).draw;function T(p){var s=p._fullLayout;A.filterVisible(s.annotations).forEach(function(t){var i=k.getFromId(p,t.xref),n=k.getFromId(p,t.yref),r=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},r==="range"&&b(t,i),a==="range"&&b(t,n)})}function b(p,s){var t,i=s._id,n=i.charAt(0),r=p[n],a=p["a"+n],l=p[n+"ref"],c=p["a"+n+"ref"],h=p["_"+n+"padplus"],u=p["_"+n+"padminus"],x={x:1,y:-1}[n]*p[n+"shift"],d=3*p.arrowsize*p.arrowwidth||0,m=d+x,g=d-x,y=3*p.startarrowsize*p.arrowwidth||0,v=y+x,_=y-x;if(c===l){var f=k.findExtremes(s,[s.r2c(r)],{ppadplus:m,ppadminus:g}),S=k.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(h,v),ppadminus:Math.max(u,_)});t={min:[f.min[0],S.min[0]],max:[f.max[0],S.max[0]]}}else v=a?v+a:v,_=a?_-a:_,t=k.findExtremes(s,[s.r2c(r)],{ppadplus:Math.max(h,m,v),ppadminus:Math.max(u,g,_)});p._extremes[i]=t}X.exports=function(p){var s=p._fullLayout;if(A.filterVisible(s.annotations).length&&p._fullData.length)return A.syncOrAsync([o,T],p)}},42300:function(X,I,e){"use strict";var A=e(3400),k=e(24040),o=e(31780).arrayEditor;function T(p,s){var t,i,n,r,a,l,c,h=p._fullLayout.annotations,u=[],x=[],d=[],m=(s||[]).length;for(t=0;t<h.length;t++)if(r=(n=h[t]).clicktoshow){for(i=0;i<m;i++)if(l=(a=s[i]).xaxis,c=a.yaxis,l._id===n.xref&&c._id===n.yref&&l.d2r(a.x)===b(n._xclick,l)&&c.d2r(a.y)===b(n._yclick,c)){(n.visible?r==="onout"?x:d:u).push(t);break}i===m&&n.visible&&r==="onout"&&x.push(t)}return{on:u,off:x,explicitOff:d}}function b(p,s){return s.type==="log"?s.l2r(p):s.d2r(p)}X.exports={hasClickToShow:function(p,s){var t=T(p,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(p,s){var t,i,n=T(p,s),r=n.on,a=n.off.concat(n.explicitOff),l={},c=p._fullLayout.annotations;if(r.length||a.length){for(t=0;t<r.length;t++)(i=o(p.layout,"annotations",c[r[t]])).modifyItem("visible",!0),A.extendFlat(l,i.getUpdateObj());for(t=0;t<a.length;t++)(i=o(p.layout,"annotations",c[a[t]])).modifyItem("visible",!1),A.extendFlat(l,i.getUpdateObj());return k.call("update",p,{},l)}}}},87192:function(X,I,e){"use strict";var A=e(3400),k=e(76308);X.exports=function(o,T,b,p){p("opacity");var s=p("bgcolor"),t=p("bordercolor"),i=k.opacity(t);p("borderpad");var n=p("borderwidth"),r=p("showarrow");if(p("text",r?" ":b._dfltTitle.annotation),p("textangle"),A.coerceFont(p,"font",b.font),p("width"),p("align"),p("height")&&p("valign"),r){var a,l,c=p("arrowside");c.indexOf("end")!==-1&&(a=p("arrowhead"),l=p("arrowsize")),c.indexOf("start")!==-1&&(p("startarrowhead",a),p("startarrowsize",l)),p("arrowcolor",i?T.bordercolor:k.defaultLine),p("arrowwidth",2*(i&&n||1)),p("standoff"),p("startstandoff")}var h=p("hovertext"),u=b.hoverlabel||{};if(h){var x=p("hoverlabel.bgcolor",u.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),d=p("hoverlabel.bordercolor",u.bordercolor||k.contrast(x)),m=A.extendFlat({},u.font);m.color||(m.color=d),A.coerceFont(p,"hoverlabel.font",m)}p("captureevents",!!h)}},26828:function(X,I,e){"use strict";var A=e(38248),k=e(36896);X.exports=function(o,T,b,p){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t)for(var i,n,r=o._fullLayout.annotations,a=T._id.charAt(0),l=0;l<r.length;l++)i=r[l],n="annotations["+l+"].",i[a+"ref"]===T._id&&c(a),i["a"+a+"ref"]===T._id&&c("a"+a);function c(h){var u=i[h],x=null;x=s?k(u,T.range):Math.pow(10,u),A(x)||(x=null),p(n+h,x)}}},45216:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(13916);function p(s,t,i){function n(S,w){return A.coerce(s,t,b,S,w)}var r=n("visible"),a=n("clicktoshow");if(r||a){T(s,t,i,n);for(var l=t.showarrow,c=["x","y"],h=[-10,-30],u={_fullLayout:i},x=0;x<2;x++){var d=c[x],m=k.coerceRef(s,t,u,d,"","paper");if(m!=="paper"&&k.getFromId(u,m)._annIndices.push(t._index),k.coercePosition(t,u,n,m,d,.5),l){var g="a"+d,y=k.coerceRef(s,t,u,g,"pixel",["pixel","paper"]);y!=="pixel"&&y!==m&&(y=t[g]="pixel");var v=y==="pixel"?h[x]:.4;k.coercePosition(t,u,n,y,g,v)}n(d+"anchor"),n(d+"shift")}if(A.noneOrAll(s,t,["x","y"]),l&&A.noneOrAll(s,t,["ax","ay"]),a){var _=n("xclick"),f=n("yclick");t._xclick=_===void 0?t.x:k.cleanPosition(_,u,t.xref),t._yclick=f===void 0?t.y:k.cleanPosition(f,u,t.yref)}}}X.exports=function(s,t){o(s,t,{name:"annotations",handleItemDefaults:p})}},23816:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,p=e(54460),s=e(76308),t=e(43616),i=e(93024),n=e(72736),r=e(93972),a=e(86476),l=e(31780).arrayEditor,c=e(33652);function h(d,m){var g=d._fullLayout.annotations[m]||{},y=p.getFromId(d,g.xref),v=p.getFromId(d,g.yref);y&&y.setScale(),v&&v.setScale(),x(d,g,m,!1,y,v)}function u(d,m,g,y,v){var _=v[g],f=v[g+"ref"],S=g.indexOf("y")!==-1,w=p.getRefType(f)==="domain",E=S?y.h:y.w;return d?w?_+(S?-m:m)/d._length:d.p2r(d.r2p(_)+m):_+(S?-m:m)/E}function x(d,m,g,y,v,_){var f,S,w=d._fullLayout,E=d._fullLayout._size,P=d._context.edits;y?(f="annotation-"+y,S=y+".annotations"):(f="annotation",S="annotations");var C=l(d.layout,S,m),O=C.modifyBase,R=C.modifyItem,U=C.getUpdateObj;w._infolayer.selectAll("."+f+'[data-index="'+g+'"]').remove();var D="clip"+w._uid+"_ann"+g;if(m._input&&m.visible!==!1){var N={x:{},y:{}},W=+m.textangle||0,F=w._infolayer.append("g").classed(f,!0).attr("data-index",String(g)).style("opacity",m.opacity),j=F.append("g").classed("annotation-text-g",!0),q=P[m.showarrow?"annotationTail":"annotationPosition"],te=m.captureevents||P.annotationText||q,ee=j.append("g").style("pointer-events",te?"all":null).call(r,"pointer").on("click",function(){d._dragging=!1,d.emit("plotly_clickannotation",ye(A.event))});m.hovertext&&ee.on("mouseover",function(){var ge=m.hoverlabel,ke=ge.font,Ee=this.getBoundingClientRect(),me=d.getBoundingClientRect();i.loneHover({x0:Ee.left-me.left,x1:Ee.right-me.left,y:(Ee.top+Ee.bottom)/2-me.top,text:m.hovertext,color:ge.bgcolor,borderColor:ge.bordercolor,fontFamily:ke.family,fontSize:ke.size,fontColor:ke.color,fontWeight:ke.weight,fontStyle:ke.style,fontVariant:ke.variant,fontShadow:ke.fontShadow,fontLineposition:ke.fontLineposition,fontTextcase:ke.fontTextcase},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:d})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var Q=m.borderwidth,J=m.borderpad,K=Q+J,Y=ee.append("rect").attr("class","bg").style("stroke-width",Q+"px").call(s.stroke,m.bordercolor).call(s.fill,m.bgcolor),ie=m.width||m.height,se=w._topclips.selectAll("#"+D).data(ie?[0]:[]);se.enter().append("clipPath").classed("annclip",!0).attr("id",D).append("rect"),se.exit().remove();var ae=m.font,ue=w._meta?T.templateString(m.text,w._meta):m.text,ve=ee.append("text").classed("annotation-text",!0).text(ue);P.annotationText?ve.call(n.makeEditable,{delegate:ee,gd:d}).call(de).on("edit",function(ge){m.text=ge,this.call(de),R("text",ge),v&&v.autorange&&O(v._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0),k.call("_guiRelayout",d,U())}):ve.call(de)}else A.selectAll("#"+D).remove();function ye(ge){var ke={index:g,annotation:m._input,fullAnnotation:m,event:ge};return y&&(ke.subplotId=y),ke}function de(ge){return ge.call(t.font,ae).attr({"text-anchor":{left:"start",right:"end"}[m.align]||"middle"}),n.convertToTspans(ge,d,pe),ge}function pe(){var ge=ve.selectAll("a");ge.size()===1&&ge.text()===ve.text()&&ee.insert("a",":first-child").attr({"xlink:xlink:href":ge.attr("xlink:href"),"xlink:xlink:show":ge.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Y.node());var ke=ee.select(".annotation-text-math-group"),Ee=!ke.empty(),me=t.bBox((Ee?ke:ve).node()),oe=me.width,re=me.height,fe=m.width||oe,Se=m.height||re,be=Math.round(fe+2*K),we=Math.round(Se+2*K);function Me(gt,ct){return ct==="auto"&&(ct=gt<.3333333333333333?"left":gt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ct]}for(var Ie=!1,Oe=["x","y"],he=0;he<Oe.length;he++){var _e,Ae,De,Le,Be,Ve=Oe[he],Ze=m[Ve+"ref"]||Ve,rt=m["a"+Ve+"ref"],it={x:v,y:_}[Ve],dt=(W+(Ve==="x"?0:-90))*Math.PI/180,mt=be*Math.cos(dt),ht=we*Math.sin(dt),Qe=Math.abs(mt)+Math.abs(ht),Je=m[Ve+"anchor"],wt=m[Ve+"shift"]*(Ve==="x"?1:-1),Pt=N[Ve],It=p.getRefType(Ze);if(it&&It!=="domain"){var At=it.r2fraction(m[Ve]);(At<0||At>1)&&(rt===Ze?((At=it.r2fraction(m["a"+Ve]))<0||At>1)&&(Ie=!0):Ie=!0),_e=it._offset+it.r2p(m[Ve]),Le=.5}else{var qe=It==="domain";Ve==="x"?(De=m[Ve],_e=qe?it._offset+it._length*De:_e=E.l+E.w*De):(De=1-m[Ve],_e=qe?it._offset+it._length*De:_e=E.t+E.h*De),Le=m.showarrow?.5:De}if(m.showarrow){Pt.head=_e;var Ye=m["a"+Ve];if(Be=mt*Me(.5,m.xanchor)-ht*Me(.5,m.yanchor),rt===Ze){var Ne=p.getRefType(rt);Ne==="domain"?(Ve==="y"&&(Ye=1-Ye),Pt.tail=it._offset+it._length*Ye):Ne==="paper"?Ve==="y"?(Ye=1-Ye,Pt.tail=E.t+E.h*Ye):Pt.tail=E.l+E.w*Ye:Pt.tail=it._offset+it.r2p(Ye),Ae=Be}else Pt.tail=_e+Ye,Ae=Be+Ye;Pt.text=Pt.tail+Be;var We=w[Ve==="x"?"width":"height"];if(Ze==="paper"&&(Pt.head=T.constrain(Pt.head,1,We-1)),rt==="pixel"){var at=-Math.max(Pt.tail-3,Pt.text),tt=Math.min(Pt.tail+3,Pt.text)-We;at>0?(Pt.tail+=at,Pt.text+=at):tt>0&&(Pt.tail-=tt,Pt.text-=tt)}Pt.tail+=wt,Pt.head+=wt}else Ae=Be=Qe*Me(Le,Je),Pt.text=_e+Be;Pt.text+=wt,Be+=wt,Ae+=wt,m["_"+Ve+"padplus"]=Qe/2+Ae,m["_"+Ve+"padminus"]=Qe/2-Ae,m["_"+Ve+"size"]=Qe,m["_"+Ve+"shift"]=Be}if(Ie)ee.remove();else{var Re=0,Fe=0;if(m.align!=="left"&&(Re=(fe-oe)*(m.align==="center"?.5:1)),m.valign!=="top"&&(Fe=(Se-re)*(m.valign==="middle"?.5:1)),Ee)ke.select("svg").attr({x:K+Re-1,y:K+Fe}).call(t.setClipUrl,ie?D:null,d);else{var nt=K+Fe-me.top,Ge=K+Re-me.left;ve.call(n.positionText,Ge,nt).call(t.setClipUrl,ie?D:null,d)}se.select("rect").call(t.setRect,K,K,fe,Se),Y.call(t.setRect,Q/2,Q/2,be-Q,we-Q),ee.call(t.setTranslate,Math.round(N.x.text-be/2),Math.round(N.y.text-we/2)),j.attr({transform:"rotate("+W+","+N.x.text+","+N.y.text+")"});var ut,pt=function(gt,ct){F.selectAll(".annotation-arrow-g").remove();var Tt=N.x.head,vt=N.y.head,kt=N.x.tail+gt,Lt=N.y.tail+ct,Ct=N.x.text+gt,Dt=N.y.text+ct,Gt=T.rotationXYMatrix(W,Ct,Dt),tn=T.apply2DTransform(Gt),jt=T.apply2DTransform2(Gt),Wt=+Y.attr("width"),Ft=+Y.attr("height"),Ln=Ct-.5*Wt,bn=Ln+Wt,hn=Dt-.5*Ft,Kt=hn+Ft,sn=[[Ln,hn,Ln,Kt],[Ln,Kt,bn,Kt],[bn,Kt,bn,hn],[bn,hn,Ln,hn]].map(jt);if(!sn.reduce(function(er,Wn){return er^!!T.segmentsIntersect(Tt,vt,Tt+1e6,vt+1e6,Wn[0],Wn[1],Wn[2],Wn[3])},!1)){sn.forEach(function(er){var Wn=T.segmentsIntersect(kt,Lt,Tt,vt,er[0],er[1],er[2],er[3]);Wn&&(kt=Wn.x,Lt=Wn.y)});var Qt=m.arrowwidth,cn=m.arrowcolor,vn=m.arrowside,xn=F.append("g").style({opacity:s.opacity(cn)}).classed("annotation-arrow-g",!0),An=xn.append("path").attr("d","M"+kt+","+Lt+"L"+Tt+","+vt).style("stroke-width",Qt+"px").call(s.stroke,s.rgb(cn));if(c(An,vn,m),P.annotationPosition&&An.node().parentNode&&!y){var Sn=Tt,Tn=vt;if(m.standoff){var Rn=Math.sqrt(Math.pow(Tt-kt,2)+Math.pow(vt-Lt,2));Sn+=m.standoff*(kt-Tt)/Rn,Tn+=m.standoff*(Lt-vt)/Rn}var In,Xn,Vn=xn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(kt-Sn)+","+(Lt-Tn),transform:b(Sn,Tn)}).style("stroke-width",Qt+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:Vn.node(),gd:d,prepFn:function(){var er=t.getTranslate(ee);In=er.x,Xn=er.y,v&&v.autorange&&O(v._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0)},moveFn:function(er,Wn){var fr=tn(In,Xn),Jt=fr[0]+er,en=fr[1]+Wn;ee.call(t.setTranslate,Jt,en),R("x",u(v,er,"x",E,m)),R("y",u(_,Wn,"y",E,m)),m.axref===m.xref&&R("ax",u(v,er,"ax",E,m)),m.ayref===m.yref&&R("ay",u(_,Wn,"ay",E,m)),xn.attr("transform",b(er,Wn)),j.attr({transform:"rotate("+W+","+Jt+","+en+")"})},doneFn:function(){k.call("_guiRelayout",d,U());var er=document.querySelector(".js-notes-box-panel");er&&er.redraw(er.selectedObj)}})}}};m.showarrow&&pt(0,0),q&&a.init({element:ee.node(),gd:d,prepFn:function(){ut=j.attr("transform")},moveFn:function(gt,ct){var Tt="pointer";if(m.showarrow)m.axref===m.xref?R("ax",u(v,gt,"ax",E,m)):R("ax",m.ax+gt),m.ayref===m.yref?R("ay",u(_,ct,"ay",E.w,m)):R("ay",m.ay+ct),pt(gt,ct);else{if(y)return;var vt,kt;if(v)vt=u(v,gt,"x",E,m);else{var Lt=m._xsize/E.w,Ct=m.x+(m._xshift-m.xshift)/E.w-Lt/2;vt=a.align(Ct+gt/E.w,Lt,0,1,m.xanchor)}if(_)kt=u(_,ct,"y",E,m);else{var Dt=m._ysize/E.h,Gt=m.y-(m._yshift+m.yshift)/E.h-Dt/2;kt=a.align(Gt-ct/E.h,Dt,0,1,m.yanchor)}R("x",vt),R("y",kt),v&&_||(Tt=a.getCursor(v?.5:vt,_?.5:kt,m.xanchor,m.yanchor))}j.attr({transform:b(gt,ct)+ut}),r(ee,Tt)},clickFn:function(gt,ct){m.captureevents&&d.emit("plotly_clickannotation",ye(ct))},doneFn:function(){r(ee),k.call("_guiRelayout",d,U());var gt=document.querySelector(".js-notes-box-panel");gt&&gt.redraw(gt.selectedObj)}})}}}X.exports={draw:function(d){var m=d._fullLayout;m._infolayer.selectAll(".annotation").remove();for(var g=0;g<m.annotations.length;g++)m.annotations[g].visible&&h(d,g);return o.previousPromises(d)},drawOne:h,drawRaw:x}},33652:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(72196),T=e(3400),b=T.strScale,p=T.strRotate,s=T.strTranslate;X.exports=function(t,i,n){var r,a,l,c,h=t.node(),u=o[n.arrowhead||0],x=o[n.startarrowhead||0],d=(n.arrowwidth||1)*(n.arrowsize||1),m=(n.arrowwidth||1)*(n.startarrowsize||1),g=i.indexOf("start")>=0,y=i.indexOf("end")>=0,v=u.backoff*d+n.standoff,_=x.backoff*m+n.startstandoff;if(h.nodeName==="line"){r={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var f=r.x-a.x,S=r.y-a.y;if(c=(l=Math.atan2(S,f))+Math.PI,v&&_&&v+_>Math.sqrt(f*f+S*S))return void F();if(v){if(v*v>f*f+S*S)return void F();var w=v*Math.cos(l),E=v*Math.sin(l);a.x+=w,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(_){if(_*_>f*f+S*S)return void F();var P=_*Math.cos(l),C=_*Math.sin(l);r.x-=P,r.y-=C,t.attr({x1:r.x,y1:r.y})}}else if(h.nodeName==="path"){var O=h.getTotalLength(),R="";if(O<v+_)return void F();var U=h.getPointAtLength(0),D=h.getPointAtLength(.1);l=Math.atan2(U.y-D.y,U.x-D.x),r=h.getPointAtLength(Math.min(_,O)),R="0px,"+_+"px,";var N=h.getPointAtLength(O),W=h.getPointAtLength(O-.1);c=Math.atan2(N.y-W.y,N.x-W.x),a=h.getPointAtLength(Math.max(0,O-v)),R+=O-(R?_+v:v)+"px,"+O+"px",t.style("stroke-dasharray",R)}function F(){t.style("stroke-dasharray","0px,100px")}function j(q,te,ee,Q){q.path&&(q.noRotate&&(ee=0),A.select(h.parentNode).append("path").attr({class:t.attr("class"),d:q.path,transform:s(te.x,te.y)+p(180*ee/Math.PI)+b(Q)}).style({fill:k.rgb(n.arrowcolor),"stroke-width":0}))}g&&j(x,r,l,m),y&&j(u,a,c,d)}},79180:function(X,I,e){"use strict";var A=e(23816),k=e(42300);X.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:A.draw,drawOne:A.drawOne,drawRaw:A.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(X,I,e){"use strict";var A=e(13916),k=e(67824).overrideAll,o=e(31780).templatedArray;X.exports=k(o("annotation",{visible:A.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:A.xanchor,xshift:A.xshift,yanchor:A.yanchor,yshift:A.yshift,text:A.text,textangle:A.textangle,font:A.font,width:A.width,height:A.height,opacity:A.opacity,align:A.align,valign:A.valign,bgcolor:A.bgcolor,bordercolor:A.bordercolor,borderpad:A.borderpad,borderwidth:A.borderwidth,showarrow:A.showarrow,arrowcolor:A.arrowcolor,arrowhead:A.arrowhead,startarrowhead:A.startarrowhead,arrowside:A.arrowside,arrowsize:A.arrowsize,startarrowsize:A.startarrowsize,arrowwidth:A.arrowwidth,standoff:A.standoff,startstandoff:A.startstandoff,hovertext:A.hovertext,hoverlabel:A.hoverlabel,captureevents:A.captureevents}),"calc","from-root")},42456:function(X,I,e){"use strict";var A=e(3400),k=e(54460);function o(T,b){var p=b.fullSceneLayout.domain,s=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},A.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=s.l+p.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(p.x[1]-p.x[0])},T._ya={},A.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=s.t+(1-p.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(p.y[1]-p.y[0])}}X.exports=function(T){for(var b=T.fullSceneLayout.annotations,p=0;p<b.length;p++)o(b[p],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(45899);function p(s,t,i,n){function r(l,c){return A.coerce(s,t,b,l,c)}function a(l){var c=l+"axis",h={_fullLayout:{}};return h._fullLayout[c]=i[c],k.coercePosition(t,h,r,l,l,.5)}r("visible")&&(T(s,t,n.fullLayout,r),a("x"),a("y"),a("z"),A.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",r("ax",-10),r("ay",-30),A.noneOrAll(s,t,["ax","ay"])))}X.exports=function(s,t,i){o(s,t,{name:"annotations",handleItemDefaults:p,fullLayout:i.fullLayout})}},71836:function(X,I,e){"use strict";var A=e(23816).drawRaw,k=e(94424),o=["x","y","z"];X.exports=function(T){for(var b=T.fullSceneLayout,p=T.dataScale,s=b.annotations,t=0;t<s.length;t++){for(var i=s[t],n=!1,r=0;r<3;r++){var a=o[r],l=i[a],c=b[a+"axis"].r2fraction(l);if(c<0||c>1){n=!0;break}}n?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(i.x)*p[0],b.yaxis.r2l(i.y)*p[1],b.zaxis.r2l(i.z)*p[2]]),A(T.graphDiv,i,t,T.id,i._xa,i._ya))}}},56864:function(X,I,e){"use strict";var A=e(24040),k=e(3400);X.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(o,T){var b=A.subplotsRegistry.gl3d;if(b)for(var p=b.attrRegex,s=Object.keys(o),t=0;t<s.length;t++){var i=s[t];p.test(i)&&(o[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(X,I,e){"use strict";X.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(X,I,e){"use strict";var A=e(54976),k=e(3400),o=e(39032),T=o.EPOCHJD,b=o.ONEDAY,p={valType:"enumerated",values:k.sortObjectKeys(A.calendars),editType:"calc",dflt:"gregorian"},s=function(d,m,g,y){var v={};return v[g]=p,k.coerce(d,m,v,g,y)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function r(d){var m=n[d];return m||(n[d]=A.instance(d))}function a(d){return k.extendFlat({},p,{description:d})}function l(d){return"Sets the calendar system to use with `"+d+"` date data."}var c={xcalendar:a(l("x"))},h=k.extendFlat({},c,{ycalendar:a(l("y"))}),u=k.extendFlat({},h,{zcalendar:a(l("z"))}),x=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));X.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:u,surface:u,mesh3d:u,scattergl:h,ohlc:c,candlestick:c},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:p,handleDefaults:s,handleTraceDefaults:function(d,m,g,y){for(var v=0;v<g.length;v++)s(d,m,g[v]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(d,m,g){for(var y,v,_,f,S,w=Math.floor((m+.05)/b)+T,E=r(g).fromJD(w),P=0;(P=d.indexOf("%",P))!==-1;)(y=d.charAt(P+1))==="0"||y==="-"||y==="_"?(_=3,v=d.charAt(P+2),y==="_"&&(y="-")):(v=y,y="0",_=2),(f=i[v])?(S=f===t?t:E.formatDate(f[y]),d=d.substr(0,P)+S+d.substr(P+_),P+=S.length):P+=_;return d}}},22548:function(X,I){"use strict";I.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],I.defaultLine="#444",I.lightLine="#eee",I.background="#fff",I.borderLine="#BEC8D9",I.lightFraction=90.9090909090909},76308:function(X,I,e){"use strict";var A=e(49760),k=e(38248),o=e(38116).isTypedArray,T=X.exports={},b=e(22548);T.defaults=b.defaults;var p=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var s=T.background=b.background;function t(i){if(k(i)||typeof i!="string")return i;var n=i.trim();if(n.substr(0,3)!=="rgb")return i;var r=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return i;var a=r[1].trim().split(/\s*[\s,]\s*/),l=n.charAt(3)==="a"&&a.length===4;if(!l&&a.length!==3)return i;for(var c=0;c<a.length;c++){if(!a[c].length||(a[c]=Number(a[c]),!(a[c]>=0)))return i;if(c===3)a[c]>1&&(a[c]=1);else if(a[c]>=1)return i}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return l?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(i){var n=i.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},T.rgb=function(i){return T.tinyRGB(A(i))},T.opacity=function(i){return i?A(i).getAlpha():0},T.addOpacity=function(i,n){var r=A(i).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+n+")"},T.combine=function(i,n){var r=A(i).toRgb();if(r.a===1)return A(i).toRgbString();var a=A(n||s).toRgb(),l=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},c={r:l.r*(1-r.a)+r.r*r.a,g:l.g*(1-r.a)+r.g*r.a,b:l.b*(1-r.a)+r.b*r.a};return A(c).toRgbString()},T.interpolate=function(i,n,r){var a=A(i).toRgb(),l=A(n).toRgb(),c={r:r*a.r+(1-r)*l.r,g:r*a.g+(1-r)*l.g,b:r*a.b+(1-r)*l.b};return A(c).toRgbString()},T.contrast=function(i,n,r){var a=A(i);return a.getAlpha()!==1&&(a=A(T.combine(i,s))),(a.isDark()?n?a.lighten(n):s:r?a.darken(r):p).toString()},T.stroke=function(i,n){var r=A(n);i.style({stroke:T.tinyRGB(r),"stroke-opacity":r.getAlpha()})},T.fill=function(i,n){var r=A(n);i.style({fill:T.tinyRGB(r),"fill-opacity":r.getAlpha()})},T.clean=function(i){if(i&&typeof i=="object"){var n,r,a,l,c=Object.keys(i);for(n=0;n<c.length;n++)if(l=i[a=c[n]],a.substr(a.length-5)==="color")if(Array.isArray(l))for(r=0;r<l.length;r++)l[r]=t(l[r]);else i[a]=t(l);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(l))for(r=0;r<l.length;r++)Array.isArray(l[r])&&(l[r][1]=t(l[r][1]));else if(Array.isArray(l)){var h=l[0];if(!Array.isArray(h)&&h&&typeof h=="object")for(r=0;r<l.length;r++)T.clean(l[r])}else l&&typeof l=="object"&&!o(l)&&T.clean(l)}}},42996:function(X,I,e){"use strict";var A=e(94724),k=e(25376),o=e(92880).extendFlat,T=e(67824).overrideAll;X.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:A.linecolor,outlinewidth:A.linewidth,bordercolor:A.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:o({},A.ticks,{dflt:""}),ticklabeloverflow:o({},A.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,labelalias:A.labelalias,tickfont:k({}),tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,tickprefix:A.tickprefix,showtickprefix:A.showtickprefix,ticksuffix:A.ticksuffix,showticksuffix:A.showticksuffix,separatethousands:A.separatethousands,exponentformat:A.exponentformat,minexponent:A.minexponent,showexponent:A.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(X){"use strict";X.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(X,I,e){"use strict";var A=e(3400),k=e(31780),o=e(26332),T=e(25404),b=e(95936),p=e(42568),s=e(42996);X.exports=function(t,i,n){var r=k.newContainer(i,"colorbar"),a=t.colorbar||{};function l(R,U){return A.coerce(a,r,s,R,U)}var c=n.margin||{t:0,b:0,l:0,r:0},h=n.width-c.l-c.r,u=n.height-c.t-c.b,x=l("orientation")==="v",d=l("thicknessmode");l("thickness",d==="fraction"?30/(x?h:u):30);var m=l("lenmode");l("len",m==="fraction"?1:x?u:h);var g,y,v,_=l("yref")==="paper",f=l("xref")==="paper",S="left";x?(v="middle",S=f?"left":"right",g=f?1.02:1,y=.5):(v=_?"bottom":"top",S="center",g=.5,y=_?1.02:1),A.coerce(a,r,{x:{valType:"number",min:f?-2:0,max:f?3:1,dflt:g}},"x"),A.coerce(a,r,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:y}},"y"),l("xanchor",S),l("xpad"),l("yanchor",v),l("ypad"),A.noneOrAll(a,r,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var w=A.coerce(a,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),o(a,r,l,"linear");var E=n.font,P={noAutotickangles:!0,outerTicks:!1,font:E};w.indexOf("inside")!==-1&&(P.bgColor="black"),p(a,r,l,"linear",P),b(a,r,l,"linear",P),T(a,r,l,"linear",P),l("title.text",n._dfltTitle.colorbar);var C=r.showticklabels?r.tickfont:E,O=A.extendFlat({},E,{family:C.family,size:A.bigFont(C.size)});A.coerceFont(l,"title.font",O),l("title.side",x?"top":"right")}},37848:function(X,I,e){"use strict";var A=e(33428),k=e(49760),o=e(7316),T=e(24040),b=e(54460),p=e(86476),s=e(3400),t=s.strTranslate,i=e(92880).extendFlat,n=e(93972),r=e(43616),a=e(76308),l=e(81668),c=e(72736),h=e(94288).flipScale,u=e(28336),x=e(37668),d=e(94724),m=e(84284),g=m.LINE_SPACING,y=m.FROM_TL,v=m.FROM_BR,_=e(63964).cn;X.exports={draw:function(f){var S=f._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(w){var E,P,C,O,R=w._fullLayout,U=w.calcdata,D=[];function N(ie){return i(ie,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function W(){typeof O.calc=="function"?O.calc(w,C,E):(E._fillgradient=P.reversescale?h(P.colorscale):P.colorscale,E._zrange=[P[O.min],P[O.max]])}for(var F=0;F<U.length;F++){var j=U[F];if((C=j[0].trace)._module){var q=C._module.colorbar;if(C.visible===!0&&q)for(var te=Array.isArray(q),ee=te?q:[q],Q=0;Q<ee.length;Q++){var J=(O=ee[Q]).container;(P=J?C[J]:C)&&P.showscale&&((E=N(P.colorbar))._id="cb"+C.uid+(te&&J?"-"+J:""),E._traceIndex=C.index,E._propPrefix=(J?J+".":"")+"colorbar.",E._meta=C._meta,W(),D.push(E))}}}for(var K in R._colorAxes)if((P=R[K]).showscale){var Y=R._colorAxes[K];(E=N(P.colorbar))._id="cb"+K,E._propPrefix=K+".colorbar.",E._meta=R._meta,O={min:"cmin",max:"cmax"},Y[0]!=="heatmap"&&(C=Y[1],O.calc=C._module.colorbar.calc),W(),D.push(E)}return D}(f),function(w){return w._id});S.enter().append("g").attr("class",function(w){return w._id}).classed(_.colorbar,!0),S.each(function(w){var E=A.select(this);s.ensureSingle(E,"rect",_.cbbg),s.ensureSingle(E,"g",_.cbfills),s.ensureSingle(E,"g",_.cblines),s.ensureSingle(E,"g",_.cbaxis,function(C){C.classed(_.crisp,!0)}),s.ensureSingle(E,"g",_.cbtitleunshift,function(C){C.append("g").classed(_.cbtitle,!0)}),s.ensureSingle(E,"rect",_.cboutline);var P=function(C,O,R){var U=O.orientation==="v",D=O.len,N=O.lenmode,W=O.thickness,F=O.thicknessmode,j=O.outlinewidth,q=O.borderwidth,te=O.bgcolor,ee=O.xanchor,Q=O.yanchor,J=O.xpad,K=O.ypad,Y=O.x,ie=U?O.y:1-O.y,se=O.yref==="paper",ae=O.xref==="paper",ue=R._fullLayout,ve=ue._size,ye=O._fillcolor,de=O._line,pe=O.title,ge=pe.side,ke=O._zrange||A.extent((typeof ye=="function"?ye:de.color).domain()),Ee=typeof de.color=="function"?de.color:function(){return de.color},me=typeof ye=="function"?ye:function(){return ye},oe=O._levels,re=function(Ne,We,at){var tt,Re,Fe=We._levels,nt=[],Ge=[],ut=Fe.end+Fe.size/100,pt=Fe.size,gt=1.001*at[0]-.001*at[1],ct=1.001*at[1]-.001*at[0];for(Re=0;Re<1e5&&(tt=Fe.start+Re*pt,!(pt>0?tt>=ut:tt<=ut));Re++)tt>gt&&tt<ct&&nt.push(tt);if(We._fillgradient)Ge=[0];else if(typeof We._fillcolor=="function"){var Tt=We._filllevels;if(Tt)for(ut=Tt.end+Tt.size/100,pt=Tt.size,Re=0;Re<1e5&&(tt=Tt.start+Re*pt,!(pt>0?tt>=ut:tt<=ut));Re++)tt>at[0]&&tt<at[1]&&Ge.push(tt);else(Ge=nt.map(function(vt){return vt-Fe.size/2})).push(Ge[Ge.length-1]+Fe.size)}else We._fillcolor&&typeof We._fillcolor=="string"&&(Ge=[0]);return Fe.size<0&&(nt.reverse(),Ge.reverse()),{line:nt,fill:Ge}}(0,O,ke),fe=re.fill,Se=re.line,be=Math.round(W*(F==="fraction"?U?ve.w:ve.h:1)),we=be/(U?ve.w:ve.h),Me=Math.round(D*(N==="fraction"?U?ve.h:ve.w:1)),Ie=Me/(U?ve.h:ve.w),Oe=ae?ve.w:R._fullLayout.width,he=se?ve.h:R._fullLayout.height,_e=Math.round(U?Y*Oe+J:ie*he+K),Ae={center:.5,right:1}[ee]||0,De={top:1,middle:.5}[Q]||0,Le=U?Y-Ae*we:ie-De*we,Be=U?ie-De*Ie:Y-Ae*Ie,Ve=Math.round(U?he*(1-Be):Oe*Be);O._lenFrac=Ie,O._thickFrac=we,O._uFrac=Le,O._vFrac=Be;var Ze=O._axis=function(Ne,We,at){var tt=Ne._fullLayout,Re=We.orientation==="v",Fe={type:"linear",range:at,tickmode:We.tickmode,nticks:We.nticks,tick0:We.tick0,dtick:We.dtick,tickvals:We.tickvals,ticktext:We.ticktext,ticks:We.ticks,ticklen:We.ticklen,tickwidth:We.tickwidth,tickcolor:We.tickcolor,showticklabels:We.showticklabels,labelalias:We.labelalias,ticklabelposition:We.ticklabelposition,ticklabeloverflow:We.ticklabeloverflow,ticklabelstep:We.ticklabelstep,tickfont:We.tickfont,tickangle:We.tickangle,tickformat:We.tickformat,exponentformat:We.exponentformat,minexponent:We.minexponent,separatethousands:We.separatethousands,showexponent:We.showexponent,showtickprefix:We.showtickprefix,tickprefix:We.tickprefix,showticksuffix:We.showticksuffix,ticksuffix:We.ticksuffix,title:We.title,showline:!0,anchor:"free",side:Re?"right":"bottom",position:1},nt=Re?"y":"x",Ge={type:"linear",_id:nt+We._id},ut={letter:nt,font:tt.font,noAutotickangles:nt==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:tt.calendar};function pt(gt,ct){return s.coerce(Fe,Ge,d,gt,ct)}return u(Fe,Ge,pt,ut,tt),x(Fe,Ge,pt,ut),Ge}(R,O,ke);Ze.position=we+(U?Y+J/ve.w:ie+K/ve.h);var rt=["top","bottom"].indexOf(ge)!==-1;if(U&&rt&&(Ze.title.side=ge,Ze.titlex=Y+J/ve.w,Ze.titley=Be+(pe.side==="top"?Ie-K/ve.h:K/ve.h)),U||rt||(Ze.title.side=ge,Ze.titley=ie+K/ve.h,Ze.titlex=Be+J/ve.w),de.color&&O.tickmode==="auto"){Ze.tickmode="linear",Ze.tick0=oe.start;var it=oe.size,dt=s.constrain(Me/50,4,15)+1,mt=(ke[1]-ke[0])/((O.nticks||dt)*it);if(mt>1){var ht=Math.pow(10,Math.floor(Math.log(mt)/Math.LN10));it*=ht*s.roundUp(mt/ht,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(Ze.tick0=0)}Ze.dtick=it}Ze.domain=U?[Be+K/ve.h,Be+Ie-K/ve.h]:[Be+J/ve.w,Be+Ie-J/ve.w],Ze.setScale(),C.attr("transform",t(Math.round(ve.l),Math.round(ve.t)));var Qe,Je=C.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(ve.l),-Math.round(ve.t))),wt=Ze.ticklabelposition,Pt=Ze.title.font.size,It=C.select("."+_.cbaxis),At=0,qe=0;function Ye(Ne,We){var at={propContainer:Ze,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:ue._dfltTitle.colorbar,containerGroup:C.select("."+_.cbtitle)},tt=Ne.charAt(0)==="h"?Ne.substr(1):"h"+Ne;C.selectAll("."+tt+",."+tt+"-math-group").remove(),l.draw(R,Ne,i(at,We||{}))}return s.syncOrAsync([o.previousPromises,function(){var Ne,We;(U&&rt||!U&&!rt)&&(ge==="top"&&(Ne=J+ve.l+Oe*Y,We=K+ve.t+he*(1-Be-Ie)+3+.75*Pt),ge==="bottom"&&(Ne=J+ve.l+Oe*Y,We=K+ve.t+he*(1-Be)-3-.25*Pt),ge==="right"&&(We=K+ve.t+he*ie+3+.75*Pt,Ne=J+ve.l+Oe*Be),Ye(Ze._id+"title",{attributes:{x:Ne,y:We,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!rt||U&&rt){var Ne,We=C.select("."+_.cbtitle),at=We.select("text"),tt=[-j/2,j/2],Re=We.select(".h"+Ze._id+"title-math-group").node(),Fe=15.6;if(at.node()&&(Fe=parseInt(at.node().style.fontSize,10)*g),Re?(Ne=r.bBox(Re),qe=Ne.width,(At=Ne.height)>Fe&&(tt[1]-=(At-Fe)/2)):at.node()&&!at.classed(_.jsPlaceholder)&&(Ne=r.bBox(at.node()),qe=Ne.width,At=Ne.height),U){if(At){if(At+=5,ge==="top")Ze.domain[1]-=At/ve.h,tt[1]*=-1;else{Ze.domain[0]+=At/ve.h;var nt=c.lineCount(at);tt[1]+=(1-nt)*Fe}We.attr("transform",t(tt[0],tt[1])),Ze.setScale()}}else qe&&(ge==="right"&&(Ze.domain[0]+=(qe+Pt/2)/ve.w),We.attr("transform",t(tt[0],tt[1])),Ze.setScale())}C.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",U?t(0,Math.round(ve.h*(1-Ze.domain[1]))):t(Math.round(ve.w*Ze.domain[0]),0)),It.attr("transform",U?t(0,Math.round(-ve.t)):t(Math.round(-ve.l),0));var Ge=C.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(fe);Ge.enter().append("rect").classed(_.cbfill,!0).attr("style",""),Ge.exit().remove();var ut=ke.map(Ze.c2p).map(Math.round).sort(function(vt,kt){return vt-kt});Ge.each(function(vt,kt){var Lt=[kt===0?ke[0]:(fe[kt]+fe[kt-1])/2,kt===fe.length-1?ke[1]:(fe[kt]+fe[kt+1])/2].map(Ze.c2p).map(Math.round);U&&(Lt[1]=s.constrain(Lt[1]+(Lt[1]>Lt[0])?1:-1,ut[0],ut[1]));var Ct=A.select(this).attr(U?"x":"y",_e).attr(U?"y":"x",A.min(Lt)).attr(U?"width":"height",Math.max(be,2)).attr(U?"height":"width",Math.max(A.max(Lt)-A.min(Lt),2));if(O._fillgradient)r.gradient(Ct,R,O._id,U?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var Dt=me(vt).replace("e-","");Ct.attr("fill",k(Dt).toHexString())}});var pt=C.select("."+_.cblines).selectAll("path."+_.cbline).data(de.color&&de.width?Se:[]);pt.enter().append("path").classed(_.cbline,!0),pt.exit().remove(),pt.each(function(vt){var kt=_e,Lt=Math.round(Ze.c2p(vt))+de.width/2%1;A.select(this).attr("d","M"+(U?kt+","+Lt:Lt+","+kt)+(U?"h":"v")+be).call(r.lineGroupStyle,de.width,Ee(vt),de.dash)}),It.selectAll("g."+Ze._id+"tick,path").remove();var gt=_e+be+(j||0)/2-(O.ticks==="outside"?1:0),ct=b.calcTicks(Ze),Tt=b.getTickSigns(Ze)[2];return b.drawTicks(R,Ze,{vals:Ze.ticks==="inside"?b.clipEnds(Ze,ct):ct,layer:It,path:b.makeTickPath(Ze,gt,Tt),transFn:b.makeTransTickFn(Ze)}),b.drawLabels(R,Ze,{vals:ct,layer:It,transFn:b.makeTransTickLabelFn(Ze),labelFns:b.makeLabelFns(Ze,gt)})},function(){if(U&&!rt||!U&&rt){var Ne,We,at=Ze.position||0,tt=Ze._offset+Ze._length/2;if(ge==="right")We=tt,Ne=ve.l+Oe*at+10+Pt*(Ze.showticklabels?1:.5);else if(Ne=tt,ge==="bottom"&&(We=ve.t+he*at+10+(wt.indexOf("inside")===-1?Ze.tickfont.size:0)+(Ze.ticks!=="intside"&&O.ticklen||0)),ge==="top"){var Re=pe.text.split("<br>").length;We=ve.t+he*at+10-be-g*Pt*Re}Ye((U?"h":"v")+Ze._id+"title",{avoid:{selection:A.select(R).selectAll("g."+Ze._id+"tick"),side:ge,offsetTop:U?0:ve.t,offsetLeft:U?ve.l:0,maxShift:U?ue.width:ue.height},attributes:{x:Ne,y:We,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},o.previousPromises,function(){var Ne,We=be+j/2;wt.indexOf("inside")===-1&&(Ne=r.bBox(It.node()),We+=U?Ne.width:Ne.height),Qe=Je.select("text");var at=0,tt=U&&ge==="top",Re=!U&&ge==="right",Fe=0;if(Qe.node()&&!Qe.classed(_.jsPlaceholder)){var nt,Ge=Je.select(".h"+Ze._id+"title-math-group").node();Ge&&(U&&rt||!U&&!rt)?(at=(Ne=r.bBox(Ge)).width,nt=Ne.height):(at=(Ne=r.bBox(Je.node())).right-ve.l-(U?_e:Ve),nt=Ne.bottom-ve.t-(U?Ve:_e),U||ge!=="top"||(We+=Ne.height,Fe=Ne.height)),Re&&(Qe.attr("transform",t(at/2+Pt/2,0)),at*=2),We=Math.max(We,U?at:nt)}var ut=2*(U?J:K)+We+q+j/2,pt=0;!U&&pe.text&&Q==="bottom"&&ie<=0&&(ut+=pt=ut/2,Fe+=pt),ue._hColorbarMoveTitle=pt,ue._hColorbarMoveCBTitle=Fe;var gt=q+j,ct=(U?_e:Ve)-gt/2-(U?J:0),Tt=(U?Ve:_e)-(U?Me:K+Fe-pt);C.select("."+_.cbbg).attr("x",ct).attr("y",Tt).attr(U?"width":"height",Math.max(ut-pt,2)).attr(U?"height":"width",Math.max(Me+gt,2)).call(a.fill,te).call(a.stroke,O.bordercolor).style("stroke-width",q);var vt=Re?Math.max(at-10,0):0;C.selectAll("."+_.cboutline).attr("x",(U?_e:Ve+J)+vt).attr("y",(U?Ve+K-Me:_e)+(tt?At:0)).attr(U?"width":"height",Math.max(be,2)).attr(U?"height":"width",Math.max(Me-(U?2*K+At:2*J+vt),2)).call(a.stroke,O.outlinecolor).style({fill:"none","stroke-width":j});var kt=U?Ae*ut:0,Lt=U?0:(1-De)*ut-Fe;if(kt=ae?ve.l-kt:-kt,Lt=se?ve.t-Lt:-Lt,C.attr("transform",t(kt,Lt)),!U&&(q||k(te).getAlpha()&&!k.equals(ue.paper_bgcolor,te))){var Ct=It.selectAll("text"),Dt=Ct[0].length,Gt=C.select("."+_.cbbg).node(),tn=r.bBox(Gt),jt=r.getTranslate(C);Ct.each(function(vn,xn){var An=Dt-1;if(xn===0||xn===An){var Sn,Tn=r.bBox(this),Rn=r.getTranslate(this);if(xn===An){var In=Tn.right+Rn.x;(Sn=tn.right+jt.x+Ve-q-2+Y-In)>0&&(Sn=0)}else if(xn===0){var Xn=Tn.left+Rn.x;(Sn=tn.left+jt.x+Ve+q+2-Xn)<0&&(Sn=0)}Sn&&(Dt<3?this.setAttribute("transform","translate("+Sn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Wt={},Ft=y[ee],Ln=v[ee],bn=y[Q],hn=v[Q],Kt=ut-be;U?(N==="pixels"?(Wt.y=ie,Wt.t=Me*bn,Wt.b=Me*hn):(Wt.t=Wt.b=0,Wt.yt=ie+D*bn,Wt.yb=ie-D*hn),F==="pixels"?(Wt.x=Y,Wt.l=ut*Ft,Wt.r=ut*Ln):(Wt.l=Kt*Ft,Wt.r=Kt*Ln,Wt.xl=Y-W*Ft,Wt.xr=Y+W*Ln)):(N==="pixels"?(Wt.x=Y,Wt.l=Me*Ft,Wt.r=Me*Ln):(Wt.l=Wt.r=0,Wt.xl=Y+D*Ft,Wt.xr=Y-D*Ln),F==="pixels"?(Wt.y=1-ie,Wt.t=ut*bn,Wt.b=ut*hn):(Wt.t=Kt*bn,Wt.b=Kt*hn,Wt.yt=ie-W*bn,Wt.yb=ie+W*hn));var sn=O.y<.5?"b":"t",Qt=O.x<.5?"l":"r";R._fullLayout._reservedMargin[O._id]={};var cn={r:ue.width-ct-kt,l:ct+Wt.r,b:ue.height-Tt-Lt,t:Tt+Wt.b};ae&&se?o.autoMargin(R,O._id,Wt):ae?R._fullLayout._reservedMargin[O._id][sn]=cn[sn]:se||U?R._fullLayout._reservedMargin[O._id][Qt]=cn[Qt]:R._fullLayout._reservedMargin[O._id][sn]=cn[sn]}],R)}(E,w,f);P&&P.then&&(f._promises||[]).push(P),f._context.edits.colorbarPosition&&function(C,O,R){var U,D,N,W=O.orientation==="v",F=R._fullLayout._size;p.init({element:C.node(),gd:R,prepFn:function(){U=C.attr("transform"),n(C)},moveFn:function(j,q){C.attr("transform",U+t(j,q)),D=p.align((W?O._uFrac:O._vFrac)+j/F.w,W?O._thickFrac:O._lenFrac,0,1,O.xanchor),N=p.align((W?O._vFrac:1-O._uFrac)-q/F.h,W?O._lenFrac:O._thickFrac,0,1,O.yanchor);var te=p.getCursor(D,N,O.xanchor,O.yanchor);n(C,te)},doneFn:function(){if(n(C),D!==void 0&&N!==void 0){var j={};j[O._propPrefix+"x"]=D,j[O._propPrefix+"y"]=N,O._traceIndex!==void 0?T.call("_guiRestyle",R,j,O._traceIndex):T.call("_guiRelayout",R,j)}}})}(E,w,f)}),S.exit().each(function(w){o.autoMargin(f,w._id)}).remove(),S.order()}}},90553:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k){return A.isPlainObject(k.colorbar)}},55080:function(X,I,e){"use strict";X.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(X,I,e){"use strict";var A=e(42996),k=e(53756).counter,o=e(95376),T=e(88304).scales;function b(p){return"`"+p+"`"}o(T),X.exports=function(p,s){p=p||"";var t,i=(s=s||{}).cLetter||"c",n=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:p==="marker.line"),r="showScaleDflt"in s?s.showScaleDflt:i==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,l=s.editTypeOverride||"",c=p?p+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):b(c+(t={z:"z",c:"color"}[i]));var h=i+"auto",u=i+"min",x=i+"max",d=i+"mid",m=(b(c+h),b(c+u),b(c+x),{});m[u]=m[x]=void 0;var g={};g[h]=!1;var y={};return t==="color"&&(y.color={valType:"color",arrayOk:!0,editType:l||"style"},s.anim&&(y.color.anim=!0)),y[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},y[u]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},y[x]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},y[d]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},y.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},y.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},y.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(y.showscale={valType:"boolean",dflt:r,editType:"calc"},y.colorbar=A),s.noColorAxis||(y.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),y}},47128:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(94288).extractOpts;X.exports=function(T,b,p){var s,t=T._fullLayout,i=p.vals,n=p.containerStr,r=n?k.nestedProperty(b,n).get():b,a=o(r),l=a.auto!==!1,c=a.min,h=a.max,u=a.mid,x=function(){return k.aggNums(Math.min,null,i)},d=function(){return k.aggNums(Math.max,null,i)};c===void 0?c=x():l&&(c=r._colorAx&&A(c)?Math.min(c,x()):x()),h===void 0?h=d():l&&(h=r._colorAx&&A(h)?Math.max(h,d()):d()),l&&u!==void 0&&(h-u>u-c?c=u-(h-u):h-u<u-c&&(h=u+(u-c))),c===h&&(c-=.5,h+=.5),a._sync("min",c),a._sync("max",h),a.autocolorscale&&(s=c*h<0?t.colorscale.diverging:c>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",s))}},95504:function(X,I,e){"use strict";var A=e(3400),k=e(94288).hasColorscale,o=e(94288).extractOpts;X.exports=function(T,b){function p(l,c){var h=l["_"+c];h!==void 0&&(l[c]=h)}function s(l,c){var h=c.container?A.nestedProperty(l,c.container).get():l;if(h)if(h.coloraxis)h._colorAx=b[h.coloraxis];else{var u=o(h),x=u.auto;(x||u.min===void 0)&&p(h,c.min),(x||u.max===void 0)&&p(h,c.max),u.autocolorscale&&p(h,"colorscale")}}for(var t=0;t<T.length;t++){var i=T[t],n=i._module.colorbar;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)s(i,n[r]);else s(i,n);k(i,"marker.line")&&s(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in b._colorAxes)s(b[a],{min:"cmin",max:"cmax"})}},27260:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(90553),T=e(64013),b=e(88304).isValid,p=e(24040).traceIs;function s(t,i){var n=i.slice(0,i.length-1);return i?k.nestedProperty(t,n).get()||{}:t}X.exports=function t(i,n,r,a,l){var c=l.prefix,h=l.cLetter,u="_module"in n,x=s(i,c),d=s(n,c),m=s(n._template||{},c)||{},g=function(){return delete i.coloraxis,delete n.coloraxis,t(i,n,r,a,l)};if(u){var y=r._colorAxes||{},v=a(c+"coloraxis");if(v){var _=p(n,"contour")&&k.nestedProperty(n,"contours.coloring").get()||"heatmap",f=y[v];return void(f?(f[2].push(g),f[0]!==_&&(f[0]=!1,k.warn(["Ignoring coloraxis:",v,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[v]=[_,n,[g]])}}var S=x[h+"min"],w=x[h+"max"],E=A(S)&&A(w)&&S<w;a(c+h+"auto",!E)?a(c+h+"mid"):(a(c+h+"min"),a(c+h+"max"));var P,C,O=x.colorscale,R=m.colorscale;O!==void 0&&(P=!b(O)),R!==void 0&&(P=!b(R)),a(c+"autocolorscale",P),a(c+"colorscale"),a(c+"reversescale"),c!=="marker.line."&&(c&&u&&(C=o(x)),a(c+"showscale",C)&&(c&&m&&(d._template=m),T(x,d,r)))}},94288:function(X,I,e){"use strict";var A=e(33428),k=e(49760),o=e(38248),T=e(3400),b=e(76308),p=e(88304).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(c){var h,u,x,d=c._colorAx,m=d||c,g={};for(u=0;u<s.length;u++)g[x=s[u]]=m[x];if(d)for(h="c",u=0;u<t.length;u++)g[x=t[u]]=m["c"+x];else{var y;for(u=0;u<t.length;u++)((y="c"+(x=t[u]))in m||(y="z"+x)in m)&&(g[x]=m[y]);h=y.charAt(0)}return g._sync=function(v,_){var f=t.indexOf(v)!==-1?h+v:v;m[f]=m["_"+f]=_},g}function n(c){for(var h=i(c),u=h.min,x=h.max,d=h.reversescale?r(h.colorscale):h.colorscale,m=d.length,g=new Array(m),y=new Array(m),v=0;v<m;v++){var _=d[v];g[v]=u+_[0]*(x-u),y[v]=_[1]}return{domain:g,range:y}}function r(c){for(var h=c.length,u=new Array(h),x=h-1,d=0;x>=0;x--,d++){var m=c[x];u[d]=[1-m[0],m[1]]}return u}function a(c,h){h=h||{};for(var u=c.domain,x=c.range,d=x.length,m=new Array(d),g=0;g<d;g++){var y=k(x[g]).toRgb();m[g]=[y.r,y.g,y.b,y.a]}var v,_=A.scale.linear().domain(u).range(m).clamp(!0),f=h.noNumericCheck,S=h.returnArray;return(v=f&&S?_:f?function(w){return l(_(w))}:S?function(w){return o(w)?_(w):k(w).isValid()?w:b.defaultLine}:function(w){return o(w)?l(_(w)):k(w).isValid()?w:b.defaultLine}).domain=_.domain,v.range=function(){return x},v}function l(c){var h={r:c[0],g:c[1],b:c[2],a:c[3]};return k(h).toRgbString()}X.exports={hasColorscale:function(c,h,u){var x=h?T.nestedProperty(c,h).get()||{}:c,d=x[u||"color"];d&&d._inputArray&&(d=d._inputArray);var m=!1;if(T.isArrayOrTypedArray(d)){for(var g=0;g<d.length;g++)if(o(d[g])){m=!0;break}}return T.isPlainObject(x)&&(m||x.showscale===!0||o(x.cmin)&&o(x.cmax)||p(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:i,extractScale:n,flipScale:r,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(c,h){return a(n(c),h)}}},8932:function(X,I,e){"use strict";var A=e(88304),k=e(94288);X.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:A.scales,defaultScale:A.defaultScale,getScale:A.get,isValidScale:A.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(X,I,e){"use strict";var A=e(92880).extendFlat,k=e(49084),o=e(88304).scales;X.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:A({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(X,I,e){"use strict";var A=e(3400),k=e(31780),o=e(92332),T=e(27260);X.exports=function(b,p){function s(h,u){return A.coerce(b,p,o,h,u)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,i,n=p._colorAxes;function r(h,u){return A.coerce(t,i,o.coloraxis,h,u)}for(var a in n){var l=n[a];if(l[0])t=b[a]||{},(i=k.newContainer(p,a,"coloraxis"))._name=a,T(t,i,p,r,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete p._colorAxes[a]}}}},88304:function(X,I,e){"use strict";var A=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=k.RdBu;function T(b){var p=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var s=0;s<b.length;s++){var t=b[s];if(t.length!==2||+t[0]<p||!A(t[1]).isValid())return!1;p=+t[0]}return!0}X.exports={scales:k,defaultScale:o,get:function(b,p){if(p||(p=o),!b)return p;function s(){try{b=k[b]||JSON.parse(b)}catch{b=p}}return typeof b=="string"&&(s(),typeof b=="string"&&s()),T(b)?b:p},isValid:function(b){return k[b]!==void 0||T(b)}}},78316:function(X){"use strict";X.exports=function(I,e,A,k,o){var T=(I-A)/(k-A),b=T+e/(k-A),p=(T+b)/2;return o==="left"||o==="bottom"?T:o==="center"||o==="middle"?p:o==="right"||o==="top"?b:T<.6666666666666666-p?T:b>1.3333333333333333-p?b:p}},67416:function(X,I,e){"use strict";var A=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];X.exports=function(o,T,b,p){return o=b==="left"?0:b==="center"?1:b==="right"?2:A.constrain(Math.floor(3*o),0,2),T=p==="bottom"?0:p==="middle"?1:p==="top"?2:A.constrain(Math.floor(3*T),0,2),k[T][o]}},72760:function(X,I){"use strict";I.selectMode=function(e){return e==="lasso"||e==="select"},I.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},I.openMode=function(e){return e==="drawline"||e==="drawopenpath"},I.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},I.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},I.selectingOrDrawing=function(e){return I.freeMode(e)||I.rectMode(e)}},86476:function(X,I,e){"use strict";var A=e(29128),k=e(52264),o=e(89184),T=e(3400).removeElement,b=e(33816),p=X.exports={};p.align=e(78316),p.getCursor=e(67416);var s=e(2616);function t(){var n=document.createElement("div");n.className="dragcover";var r=n.style;return r.position="fixed",r.left=0,r.right=0,r.top=0,r.bottom=0,r.zIndex=999999999,r.background="none",document.body.appendChild(n),n}function i(n){return A(n.changedTouches?n.changedTouches[0]:n,document.body)}p.unhover=s.wrapped,p.unhoverRaw=s.raw,p.init=function(n){var r,a,l,c,h,u,x,d,m=n.gd,g=1,y=m._context.doubleClickDelay,v=n.element;m._mouseDownTime||(m._mouseDownTime=0),v.style.pointerEvents="all",v.onmousedown=f,o?(v._ontouchstart&&v.removeEventListener("touchstart",v._ontouchstart),v._ontouchstart=f,v.addEventListener("touchstart",f,{passive:!1})):v.ontouchstart=f;var _=n.clampFn||function(E,P,C){return Math.abs(E)<C&&(E=0),Math.abs(P)<C&&(P=0),[E,P]};function f(E){m._dragged=!1,m._dragging=!0;var P=i(E);r=P[0],a=P[1],x=E.target,u=E,d=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=r,E.clientY=a),(l=new Date().getTime())-m._mouseDownTime<y?g+=1:(g=1,m._mouseDownTime=l),n.prepFn&&n.prepFn(E,r,a),k&&!d?(h=t()).style.cursor=window.getComputedStyle(v).cursor:k||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(v).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),n.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var P=i(E),C=n.minDrag||b.MINDRAG,O=_(P[0]-r,P[1]-a,C),R=O[0],U=O[1];(R||U)&&(m._dragged=!0,p.unhover(m,E)),m._dragged&&n.moveFn&&!d&&(m._dragdata={element:v,dx:R,dy:U},n.moveFn(R,U))}function w(E){if(delete m._dragdata,n.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(h):c&&(h.documentElement.style.cursor=c,c=null),m._dragging){if(m._dragging=!1,new Date().getTime()-m._mouseDownTime>y&&(g=Math.max(g-1,1)),m._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(g,u),!d){var P;try{P=new MouseEvent("click",E)}catch{var C=i(E);(P=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(P)}m._dragging=!1,m._dragged=!1}else m._dragged=!1}},p.coverSlip=t},2616:function(X,I,e){"use strict";var A=e(95924),k=e(91200),o=e(52200).getGraphDiv,T=e(92456),b=X.exports={};b.wrapped=function(p,s,t){(p=o(p))._fullLayout&&k.clear(p._fullLayout._uid+T.HOVERID),b.raw(p,s,t)},b.raw=function(p,s){var t=p._fullLayout,i=p._hoverdata;s||(s={}),s.target&&!p._dragged&&A.triggerHandler(p,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),p._hoverdata=void 0,s.target&&i&&p.emit("plotly_unhover",{event:s,points:i}))}},98192:function(X,I){"use strict";I.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},I.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=k.numberFormat,T=e(38248),b=e(49760),p=e(24040),s=e(76308),t=e(8932),i=k.strTranslate,n=e(72736),r=e(9616),a=e(84284).LINE_SPACING,l=e(13448).DESELECTDIM,c=e(43028),h=e(7152),u=e(10624).appendArrayPointValue,x=X.exports={};function d(me){return me==="none"?void 0:me}x.font=function(me,oe){var re=oe.variant,fe=oe.style,Se=oe.weight,be=oe.color,we=oe.size,Me=oe.family,Ie=oe.shadow,Oe=oe.lineposition,he=oe.textcase;Me&&me.style("font-family",Me),we+1&&me.style("font-size",we+"px"),be&&me.call(s.fill,be),Se&&me.style("font-weight",Se),fe&&me.style("font-style",fe),re&&me.style("font-variant",re),he&&me.style("text-transform",d(function(_e){return m[_e]}(he))),Ie&&me.style("text-shadow",Ie==="auto"?n.makeTextShadow(s.contrast(be)):d(Ie)),Oe&&me.style("text-decoration-line",d(function(_e){return _e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}(Oe)))};var m={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function g(me,oe,re,fe){var Se=oe.fillpattern,be=oe.fillgradient,we=Se&&x.getPatternAttr(Se.shape,0,"");if(we){var Me=x.getPatternAttr(Se.bgcolor,0,null),Ie=x.getPatternAttr(Se.fgcolor,0,null),Oe=Se.fgopacity,he=x.getPatternAttr(Se.size,0,8),_e=x.getPatternAttr(Se.solidity,0,.3),Ae=oe.uid;x.pattern(me,"point",re,Ae,we,he,_e,void 0,Se.fillmode,Me,Ie,Oe)}else if(be&&be.type!=="none"){var De,Le,Be=be.type,Ve="scatterfill-"+oe.uid;fe&&(Ve="legendfill-"+oe.uid),fe||be.start===void 0&&be.stop===void 0?(Be==="horizontal"&&(Be+="reversed"),me.call(x.gradient,re,Ve,Be,be.colorscale,"fill")):(Be==="horizontal"?(De={x:be.start,y:0},Le={x:be.stop,y:0}):Be==="vertical"&&(De={x:0,y:be.start},Le={x:0,y:be.stop}),De.x=oe._xA.c2p(De.x===void 0?oe._extremes.x.min[0].val:De.x,!0),De.y=oe._yA.c2p(De.y===void 0?oe._extremes.y.min[0].val:De.y,!0),Le.x=oe._xA.c2p(Le.x===void 0?oe._extremes.x.max[0].val:Le.x,!0),Le.y=oe._yA.c2p(Le.y===void 0?oe._extremes.y.max[0].val:Le.y,!0),me.call(w,re,Ve,"linear",be.colorscale,"fill",De,Le,!0,!1))}else oe.fillcolor&&me.call(s.fill,oe.fillcolor)}x.setPosition=function(me,oe,re){me.attr("x",oe).attr("y",re)},x.setSize=function(me,oe,re){me.attr("width",oe).attr("height",re)},x.setRect=function(me,oe,re,fe,Se){me.call(x.setPosition,oe,re).call(x.setSize,fe,Se)},x.translatePoint=function(me,oe,re,fe){var Se=re.c2p(me.x),be=fe.c2p(me.y);return!!(T(Se)&&T(be)&&oe.node())&&(oe.node().nodeName==="text"?oe.attr("x",Se).attr("y",be):oe.attr("transform",i(Se,be)),!0)},x.translatePoints=function(me,oe,re){me.each(function(fe){var Se=A.select(this);x.translatePoint(fe,Se,oe,re)})},x.hideOutsideRangePoint=function(me,oe,re,fe,Se,be){oe.attr("display",re.isPtWithinRange(me,Se)&&fe.isPtWithinRange(me,be)?null:"none")},x.hideOutsideRangePoints=function(me,oe){if(oe._hasClipOnAxisFalse){var re=oe.xaxis,fe=oe.yaxis;me.each(function(Se){var be=Se[0].trace,we=be.xcalendar,Me=be.ycalendar,Ie=p.traceIs(be,"bar-like")?".bartext":".point,.textpoint";me.selectAll(Ie).each(function(Oe){x.hideOutsideRangePoint(Oe,A.select(this),re,fe,we,Me)})})}},x.crispRound=function(me,oe,re){return oe&&T(oe)?me._context.staticPlot?oe:oe<1?1:Math.round(oe):re||0},x.singleLineStyle=function(me,oe,re,fe,Se){oe.style("fill","none");var be=(((me||[])[0]||{}).trace||{}).line||{},we=re||be.width||0,Me=Se||be.dash||"";s.stroke(oe,fe||be.color),x.dashLine(oe,Me,we)},x.lineGroupStyle=function(me,oe,re,fe){me.style("fill","none").each(function(Se){var be=(((Se||[])[0]||{}).trace||{}).line||{},we=oe||be.width||0,Me=fe||be.dash||"";A.select(this).call(s.stroke,re||be.color).call(x.dashLine,Me,we)})},x.dashLine=function(me,oe,re){re=+re||0,oe=x.dashStyle(oe,re),me.style({"stroke-dasharray":oe,"stroke-width":re+"px"})},x.dashStyle=function(me,oe){oe=+oe||1;var re=Math.max(oe,3);return me==="solid"?me="":me==="dot"?me=re+"px,"+re+"px":me==="dash"?me=3*re+"px,"+3*re+"px":me==="longdash"?me=5*re+"px,"+5*re+"px":me==="dashdot"?me=3*re+"px,"+re+"px,"+re+"px,"+re+"px":me==="longdashdot"&&(me=5*re+"px,"+2*re+"px,"+re+"px,"+2*re+"px"),me},x.singleFillStyle=function(me,oe){var re=A.select(me.node());g(me,((re.data()[0]||[])[0]||{}).trace||{},oe,!1)},x.fillGroupStyle=function(me,oe,re){me.style("stroke-width",0).each(function(fe){var Se=A.select(this);fe[0].trace&&g(Se,fe[0].trace,oe,re)})};var y=e(71984);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(y).forEach(function(me){var oe=y[me],re=oe.n;x.symbolList.push(re,String(re),me,re+100,String(re+100),me+"-open"),x.symbolNames[re]=me,x.symbolFuncs[re]=oe.f,x.symbolBackOffs[re]=oe.backoff||0,oe.needLine&&(x.symbolNeedLines[re]=!0),oe.noDot?x.symbolNoDot[re]=!0:x.symbolList.push(re+200,String(re+200),me+"-dot",re+300,String(re+300),me+"-open-dot"),oe.noFill&&(x.symbolNoFill[re]=!0)});var v=x.symbolNames.length;function _(me,oe,re,fe){var Se=me%100;return x.symbolFuncs[Se](oe,re,fe)+(me>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(me){if(T(me))me=+me;else if(typeof me=="string"){var oe=0;me.indexOf("-open")>0&&(oe=100,me=me.replace("-open","")),me.indexOf("-dot")>0&&(oe+=200,me=me.replace("-dot","")),(me=x.symbolNames.indexOf(me))>=0&&(me+=oe)}return me%100>=v||me>=400?0:Math.floor(Math.max(me,0))};var f=o("~f"),S={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function w(me,oe,re,fe,Se,be,we,Me,Ie,Oe){var he,_e=Se.length;fe==="linear"?he={node:"linearGradient",attrs:{x1:we.x,y1:we.y,x2:Me.x,y2:Me.y,gradientUnits:Ie?"userSpaceOnUse":"objectBoundingBox"},reversed:Oe}:fe==="radial"&&(he={node:"radialGradient",reversed:Oe});for(var Ae=new Array(_e),De=0;De<_e;De++)he.reversed?Ae[_e-1-De]=[f(100*(1-Se[De][0])),Se[De][1]]:Ae[De]=[f(100*Se[De][0]),Se[De][1]];var Le=oe._fullLayout,Be="g"+Le._uid+"-"+re,Ve=Le._defs.select(".gradients").selectAll("#"+Be).data([fe+Ae.join(";")],k.identity);Ve.exit().remove(),Ve.enter().append(he.node).each(function(){var Ze=A.select(this);he.attrs&&Ze.attr(he.attrs),Ze.attr("id",Be);var rt=Ze.selectAll("stop").data(Ae);rt.exit().remove(),rt.enter().append("stop"),rt.each(function(it){var dt=b(it[1]);A.select(this).attr({offset:it[0]+"%","stop-color":s.tinyRGB(dt),"stop-opacity":dt.getAlpha()})})}),me.style(be,Q(Be,oe)).style(be+"-opacity",null),me.classed("gradient_filled",!0)}x.gradient=function(me,oe,re,fe,Se,be){var we=S[fe];return w(me,oe,re,we.type,Se,be,we.start,we.stop,!1,we.reversed)},x.pattern=function(me,oe,re,fe,Se,be,we,Me,Ie,Oe,he,_e){var Ae=oe==="legend";Me&&(Ie==="overlay"?(Oe=Me,he=s.contrast(Oe)):(Oe=void 0,he=Me));var De,Le,Be,Ve,Ze,rt,it,dt,mt,ht=re._fullLayout,Qe="p"+ht._uid+"-"+fe,Je={},wt=b(he),Pt=s.tinyRGB(wt),It=_e*wt.getAlpha();switch(Se){case"/":De=be*Math.sqrt(2),Le=be*Math.sqrt(2),rt="path",Je={d:Be="M-"+De/4+","+Le/4+"l"+De/2+",-"+Le/2+"M0,"+Le+"L"+De+",0M"+De/4*3+","+Le/4*5+"l"+De/2+",-"+Le/2,opacity:It,stroke:Pt,"stroke-width":(Ve=we*be)+"px"};break;case"\\":De=be*Math.sqrt(2),Le=be*Math.sqrt(2),rt="path",Je={d:Be="M"+De/4*3+",-"+Le/4+"l"+De/2+","+Le/2+"M0,0L"+De+","+Le+"M-"+De/4+","+Le/4*3+"l"+De/2+","+Le/2,opacity:It,stroke:Pt,"stroke-width":(Ve=we*be)+"px"};break;case"x":De=be*Math.sqrt(2),Le=be*Math.sqrt(2),Be="M-"+De/4+","+Le/4+"l"+De/2+",-"+Le/2+"M0,"+Le+"L"+De+",0M"+De/4*3+","+Le/4*5+"l"+De/2+",-"+Le/2+"M"+De/4*3+",-"+Le/4+"l"+De/2+","+Le/2+"M0,0L"+De+","+Le+"M-"+De/4+","+Le/4*3+"l"+De/2+","+Le/2,Ve=be-be*Math.sqrt(1-we),rt="path",Je={d:Be,opacity:It,stroke:Pt,"stroke-width":Ve+"px"};break;case"|":rt="path",rt="path",Je={d:Be="M"+(De=be)/2+",0L"+De/2+","+(Le=be),opacity:It,stroke:Pt,"stroke-width":(Ve=we*be)+"px"};break;case"-":rt="path",rt="path",Je={d:Be="M0,"+(Le=be)/2+"L"+(De=be)+","+Le/2,opacity:It,stroke:Pt,"stroke-width":(Ve=we*be)+"px"};break;case"+":rt="path",Be="M"+(De=be)/2+",0L"+De/2+","+(Le=be)+"M0,"+Le/2+"L"+De+","+Le/2,Ve=be-be*Math.sqrt(1-we),rt="path",Je={d:Be,opacity:It,stroke:Pt,"stroke-width":Ve+"px"};break;case".":De=be,Le=be,we<Math.PI/4?Ze=Math.sqrt(we*be*be/Math.PI):(it=we,dt=Math.PI/4,Ze=(mt=be/2)+(be/Math.sqrt(2)-mt)*(it-dt)/(1-dt)),rt="circle",Je={cx:De/2,cy:Le/2,r:Ze,opacity:It,fill:Pt}}var At=[Se||"noSh",Oe||"noBg",he||"noFg",be,we].join(";"),qe=ht._defs.select(".patterns").selectAll("#"+Qe).data([At],k.identity);qe.exit().remove(),qe.enter().append("pattern").each(function(){var Ye=A.select(this);if(Ye.attr({id:Qe,width:De+"px",height:Le+"px",patternUnits:"userSpaceOnUse",patternTransform:Ae?"scale(0.8)":""}),Oe){var Ne=b(Oe),We=s.tinyRGB(Ne),at=Ne.getAlpha(),tt=Ye.selectAll("rect").data([0]);tt.exit().remove(),tt.enter().append("rect").attr({width:De+"px",height:Le+"px",fill:We,"fill-opacity":at})}var Re=Ye.selectAll(rt).data([0]);Re.exit().remove(),Re.enter().append(rt).attr(Je)}),me.style("fill",Q(Qe,re)).style("fill-opacity",null),me.classed("pattern_filled",!0)},x.initGradients=function(me){var oe=me._fullLayout;k.ensureSingle(oe._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),A.select(me).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(me){var oe=me._fullLayout;k.ensureSingle(oe._defs,"g","patterns").selectAll("pattern").remove(),A.select(me).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(me,oe,re){return me&&k.isArrayOrTypedArray(me)?oe<me.length?me[oe]:re:me},x.pointStyle=function(me,oe,re,fe){if(me.size()){var Se=x.makePointStyleFns(oe);me.each(function(be){x.singlePointStyle(be,A.select(this),oe,Se,re,fe)})}},x.singlePointStyle=function(me,oe,re,fe,Se,be){var we=re.marker,Me=we.line;if(be&&be.i>=0&&me.i===void 0&&(me.i=be.i),oe.style("opacity",fe.selectedOpacityFn?fe.selectedOpacityFn(me):me.mo===void 0?we.opacity:me.mo),fe.ms2mrc){var Ie;Ie=me.ms==="various"||we.size==="various"?3:fe.ms2mrc(me.ms),me.mrc=Ie,fe.selectedSizeFn&&(Ie=me.mrc=fe.selectedSizeFn(me));var Oe=x.symbolNumber(me.mx||we.symbol)||0;me.om=Oe%200>=100;var he=Ee(me,re),_e=Y(me,re);oe.attr("d",_(Oe,Ie,he,_e))}var Ae,De,Le,Be=!1;if(me.so)Le=Me.outlierwidth,De=Me.outliercolor,Ae=we.outliercolor;else{var Ve=(Me||{}).width;Le=(me.mlw+1||Ve+1||(me.trace?(me.trace.marker.line||{}).width:0)+1)-1||0,De="mlc"in me?me.mlcc=fe.lineScale(me.mlc):k.isArrayOrTypedArray(Me.color)?s.defaultLine:Me.color,k.isArrayOrTypedArray(we.color)&&(Ae=s.defaultLine,Be=!0),Ae="mc"in me?me.mcc=fe.markerScale(me.mc):we.color||we.colors||"rgba(0,0,0,0)",fe.selectedColorFn&&(Ae=fe.selectedColorFn(me))}if(me.om)oe.call(s.stroke,Ae).style({"stroke-width":(Le||1)+"px",fill:"none"});else{oe.style("stroke-width",(me.isBlank?0:Le)+"px");var Ze=we.gradient,rt=me.mgt;rt?Be=!0:rt=Ze&&Ze.type,k.isArrayOrTypedArray(rt)&&(rt=rt[0],S[rt]||(rt=0));var it=we.pattern,dt=it&&x.getPatternAttr(it.shape,me.i,"");if(rt&&rt!=="none"){var mt=me.mgc;mt?Be=!0:mt=Ze.color;var ht=re.uid;Be&&(ht+="-"+me.i),x.gradient(oe,Se,ht,rt,[[0,mt],[1,Ae]],"fill")}else if(dt){var Qe=!1,Je=it.fgcolor;!Je&&be&&be.color&&(Je=be.color,Qe=!0);var wt=x.getPatternAttr(Je,me.i,be&&be.color||null),Pt=x.getPatternAttr(it.bgcolor,me.i,null),It=it.fgopacity,At=x.getPatternAttr(it.size,me.i,8),qe=x.getPatternAttr(it.solidity,me.i,.3);Qe=Qe||me.mcc||k.isArrayOrTypedArray(it.shape)||k.isArrayOrTypedArray(it.bgcolor)||k.isArrayOrTypedArray(it.fgcolor)||k.isArrayOrTypedArray(it.size)||k.isArrayOrTypedArray(it.solidity);var Ye=re.uid;Qe&&(Ye+="-"+me.i),x.pattern(oe,"point",Se,Ye,dt,At,qe,me.mcc,it.fillmode,Pt,wt,It)}else k.isArrayOrTypedArray(Ae)?s.fill(oe,Ae[me.i]):s.fill(oe,Ae);Le&&s.stroke(oe,De)}},x.makePointStyleFns=function(me){var oe={},re=me.marker;return oe.markerScale=x.tryColorscale(re,""),oe.lineScale=x.tryColorscale(re,"line"),p.traceIs(me,"symbols")&&(oe.ms2mrc=c.isBubble(me)?h(me):function(){return(re.size||6)/2}),me.selectedpoints&&k.extendFlat(oe,x.makeSelectedPointStyleFns(me)),oe},x.makeSelectedPointStyleFns=function(me){var oe={},re=me.selected||{},fe=me.unselected||{},Se=me.marker||{},be=re.marker||{},we=fe.marker||{},Me=Se.opacity,Ie=be.opacity,Oe=we.opacity,he=Ie!==void 0,_e=Oe!==void 0;(k.isArrayOrTypedArray(Me)||he||_e)&&(oe.selectedOpacityFn=function(dt){var mt=dt.mo===void 0?Se.opacity:dt.mo;return dt.selected?he?Ie:mt:_e?Oe:l*mt});var Ae=Se.color,De=be.color,Le=we.color;(De||Le)&&(oe.selectedColorFn=function(dt){var mt=dt.mcc||Ae;return dt.selected?De||mt:Le||mt});var Be=Se.size,Ve=be.size,Ze=we.size,rt=Ve!==void 0,it=Ze!==void 0;return p.traceIs(me,"symbols")&&(rt||it)&&(oe.selectedSizeFn=function(dt){var mt=dt.mrc||Be/2;return dt.selected?rt?Ve/2:mt:it?Ze/2:mt}),oe},x.makeSelectedTextStyleFns=function(me){var oe={},re=me.selected||{},fe=me.unselected||{},Se=me.textfont||{},be=re.textfont||{},we=fe.textfont||{},Me=Se.color,Ie=be.color,Oe=we.color;return oe.selectedTextColorFn=function(he){var _e=he.tc||Me;return he.selected?Ie||_e:Oe||(Ie?_e:s.addOpacity(_e,l))},oe},x.selectedPointStyle=function(me,oe){if(me.size()&&oe.selectedpoints){var re=x.makeSelectedPointStyleFns(oe),fe=oe.marker||{},Se=[];re.selectedOpacityFn&&Se.push(function(be,we){be.style("opacity",re.selectedOpacityFn(we))}),re.selectedColorFn&&Se.push(function(be,we){s.fill(be,re.selectedColorFn(we))}),re.selectedSizeFn&&Se.push(function(be,we){var Me=we.mx||fe.symbol||0,Ie=re.selectedSizeFn(we);be.attr("d",_(x.symbolNumber(Me),Ie,Ee(we,oe),Y(we,oe))),we.mrc2=Ie}),Se.length&&me.each(function(be){for(var we=A.select(this),Me=0;Me<Se.length;Me++)Se[Me](we,be)})}},x.tryColorscale=function(me,oe){var re=oe?k.nestedProperty(me,oe).get():me;if(re){var fe=re.color;if((re.colorscale||re._colorAx)&&k.isArrayOrTypedArray(fe))return t.makeColorScaleFuncFromTrace(re)}return k.identity};var E,P,C={start:1,end:-1,middle:0,bottom:1,top:-1};function O(me,oe,re,fe,Se){var be=A.select(me.node().parentNode),we=oe.indexOf("top")!==-1?"top":oe.indexOf("bottom")!==-1?"bottom":"middle",Me=oe.indexOf("left")!==-1?"end":oe.indexOf("right")!==-1?"start":"middle",Ie=fe?fe/.8+1:0,Oe=(n.lineCount(me)-1)*a+1,he=C[Me]*Ie,_e=.75*re+C[we]*Ie+(C[we]-1)*Oe*re/2;me.attr("text-anchor",Me),Se||be.attr("transform",i(he,_e))}function R(me,oe){var re=me.ts||oe.textfont.size;return T(re)&&re>0?re:0}function U(me,oe,re){return re&&(me=q(me)),oe?N(me[1]):D(me[0])}function D(me){var oe=A.round(me,2);return E=oe,oe}function N(me){var oe=A.round(me,2);return P=oe,oe}function W(me,oe,re,fe){var Se=me[0]-oe[0],be=me[1]-oe[1],we=re[0]-oe[0],Me=re[1]-oe[1],Ie=Math.pow(Se*Se+be*be,.25),Oe=Math.pow(we*we+Me*Me,.25),he=(Oe*Oe*Se-Ie*Ie*we)*fe,_e=(Oe*Oe*be-Ie*Ie*Me)*fe,Ae=3*Oe*(Ie+Oe),De=3*Ie*(Ie+Oe);return[[D(oe[0]+(Ae&&he/Ae)),N(oe[1]+(Ae&&_e/Ae))],[D(oe[0]-(De&&he/De)),N(oe[1]-(De&&_e/De))]]}x.textPointStyle=function(me,oe,re){if(me.size()){var fe;if(oe.selectedpoints){var Se=x.makeSelectedTextStyleFns(oe);fe=Se.selectedTextColorFn}var be=oe.texttemplate,we=re._fullLayout;me.each(function(Me){var Ie=A.select(this),Oe=be?k.extractOption(Me,oe,"txt","texttemplate"):k.extractOption(Me,oe,"tx","text");if(Oe||Oe===0){if(be){var he=oe._module.formatLabels,_e=he?he(Me,oe,we):{},Ae={};u(Ae,oe,Me.i);var De=oe._meta||{};Oe=k.texttemplateString(Oe,_e,we._d3locale,Ae,Me,De)}var Le=Me.tp||oe.textposition,Be=R(Me,oe),Ve=fe?fe(Me):Me.tc||oe.textfont.color;Ie.call(x.font,{family:Me.tf||oe.textfont.family,weight:Me.tw||oe.textfont.weight,style:Me.ty||oe.textfont.style,variant:Me.tv||oe.textfont.variant,textcase:Me.tC||oe.textfont.textcase,lineposition:Me.tE||oe.textfont.lineposition,shadow:Me.tS||oe.textfont.shadow,size:Be,color:Ve}).text(Oe).call(n.convertToTspans,re).call(O,Le,Be,Me.mrc)}else Ie.remove()})}},x.selectedTextStyle=function(me,oe){if(me.size()&&oe.selectedpoints){var re=x.makeSelectedTextStyleFns(oe);me.each(function(fe){var Se=A.select(this),be=re.selectedTextColorFn(fe),we=fe.tp||oe.textposition,Me=R(fe,oe);s.fill(Se,be);var Ie=p.traceIs(oe,"bar-like");O(Se,we,Me,fe.mrc2||fe.mrc,Ie)})}},x.smoothopen=function(me,oe){if(me.length<3)return"M"+me.join("L");var re,fe="M"+me[0],Se=[];for(re=1;re<me.length-1;re++)Se.push(W(me[re-1],me[re],me[re+1],oe));for(fe+="Q"+Se[0][0]+" "+me[1],re=2;re<me.length-1;re++)fe+="C"+Se[re-2][1]+" "+Se[re-1][0]+" "+me[re];return fe+"Q"+Se[me.length-3][1]+" "+me[me.length-1]},x.smoothclosed=function(me,oe){if(me.length<3)return"M"+me.join("L")+"Z";var re,fe="M"+me[0],Se=me.length-1,be=[W(me[Se],me[0],me[1],oe)];for(re=1;re<Se;re++)be.push(W(me[re-1],me[re],me[re+1],oe));for(be.push(W(me[Se-1],me[Se],me[0],oe)),re=1;re<=Se;re++)fe+="C"+be[re-1][1]+" "+be[re][0]+" "+me[re];return fe+"C"+be[Se][1]+" "+be[0][0]+" "+me[0]+"Z"};var F={hv:function(me,oe,re){return"H"+D(oe[0])+"V"+U(oe,1,re)},vh:function(me,oe,re){return"V"+N(oe[1])+"H"+U(oe,0,re)},hvh:function(me,oe,re){return"H"+D((me[0]+oe[0])/2)+"V"+N(oe[1])+"H"+U(oe,0,re)},vhv:function(me,oe,re){return"V"+N((me[1]+oe[1])/2)+"H"+D(oe[0])+"V"+U(oe,1,re)}},j=function(me,oe,re){return"L"+U(oe,0,re)+","+U(oe,1,re)};function q(me,oe){var re=me.backoff,fe=me.trace,Se=me.d,be=me.i;if(re&&fe&&fe.marker&&fe.marker.angle%360==0&&fe.line&&fe.line.shape!=="spline"){var we=k.isArrayOrTypedArray(re),Me=me,Ie=oe?oe[0]:E||0,Oe=oe?oe[1]:P||0,he=Me[0],_e=Me[1],Ae=he-Ie,De=_e-Oe,Le=Math.atan2(De,Ae),Be=we?re[be]:re;if(Be==="auto"){var Ve=Me.i;fe.type==="scatter"&&Ve--;var Ze=Me.marker,rt=Ze.symbol;k.isArrayOrTypedArray(rt)&&(rt=rt[Ve]);var it=Ze.size;k.isArrayOrTypedArray(it)&&(it=it[Ve]),Be=Ze?x.symbolBackOffs[x.symbolNumber(rt)]*it:0,Be+=x.getMarkerStandoff(Se[Ve],fe)||0}var dt=he-Be*Math.cos(Le),mt=_e-Be*Math.sin(Le);(dt<=he&&dt>=Ie||dt>=he&&dt<=Ie)&&(mt<=_e&&mt>=Oe||mt>=_e&&mt<=Oe)&&(me=[dt,mt])}return me}x.steps=function(me){var oe=F[me]||j;return function(re){for(var fe="M"+D(re[0][0])+","+N(re[0][1]),Se=re.length,be=1;be<Se;be++)fe+=oe(re[be-1],re[be],be===Se-1);return fe}},x.applyBackoff=q,x.makeTester=function(){var me=k.ensureSingleById(A.select("body"),"svg","js-plotly-tester",function(re){re.attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),oe=k.ensureSingle(me,"path","js-reference-point",function(re){re.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=me,x.testref=oe},x.savedBBoxes={};var te=0;function ee(me){var oe=me.getAttribute("data-unformatted");if(oe!==null)return oe+me.getAttribute("data-math")+me.getAttribute("text-anchor")+me.getAttribute("style")}function Q(me,oe){if(!me)return null;var re=oe._context,fe=re._exportedPlot?"":re._baseUrl||"";return fe?"url('"+fe+"#"+me+"')":"url(#"+me+")"}x.bBox=function(me,oe,re){var fe,Se,be;if(re||(re=ee(me)),re){if(fe=x.savedBBoxes[re])return k.extendFlat({},fe)}else if(me.childNodes.length===1){var we=me.childNodes[0];if(re=ee(we)){var Me=+we.getAttribute("x")||0,Ie=+we.getAttribute("y")||0,Oe=we.getAttribute("transform");if(!Oe){var he=x.bBox(we,!1,re);return Me&&(he.left+=Me,he.right+=Me),Ie&&(he.top+=Ie,he.bottom+=Ie),he}if(re+="~"+Me+"~"+Ie+"~"+Oe,fe=x.savedBBoxes[re])return k.extendFlat({},fe)}}oe?Se=me:(be=x.tester.node(),Se=me.cloneNode(!0),be.appendChild(Se)),A.select(Se).attr("transform",null).call(n.positionText,0,0);var _e=Se.getBoundingClientRect(),Ae=x.testref.node().getBoundingClientRect();oe||be.removeChild(Se);var De={height:_e.height,width:_e.width,left:_e.left-Ae.left,top:_e.top-Ae.top,right:_e.right-Ae.left,bottom:_e.bottom-Ae.top};return te>=1e4&&(x.savedBBoxes={},te=0),re&&(x.savedBBoxes[re]=De),te++,k.extendFlat({},De)},x.setClipUrl=function(me,oe,re){me.attr("clip-path",Q(oe,re))},x.getTranslate=function(me){var oe=(me[me.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(re,fe,Se){return[fe,Se].join(" ")}).split(" ");return{x:+oe[0]||0,y:+oe[1]||0}},x.setTranslate=function(me,oe,re){var fe=me.attr?"attr":"getAttribute",Se=me.attr?"attr":"setAttribute",be=me[fe]("transform")||"";return oe=oe||0,re=re||0,be=be.replace(/(\btranslate\(.*?\);?)/,"").trim(),be=(be+=i(oe,re)).trim(),me[Se]("transform",be),be},x.getScale=function(me){var oe=(me[me.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(re,fe,Se){return[fe,Se].join(" ")}).split(" ");return{x:+oe[0]||1,y:+oe[1]||1}},x.setScale=function(me,oe,re){var fe=me.attr?"attr":"getAttribute",Se=me.attr?"attr":"setAttribute",be=me[fe]("transform")||"";return oe=oe||1,re=re||1,be=be.replace(/(\bscale\(.*?\);?)/,"").trim(),be=(be+="scale("+oe+","+re+")").trim(),me[Se]("transform",be),be};var J=/\s*sc.*/;x.setPointGroupScale=function(me,oe,re){if(oe=oe||1,re=re||1,me){var fe=oe===1&&re===1?"":"scale("+oe+","+re+")";me.each(function(){var Se=(this.getAttribute("transform")||"").replace(J,"");Se=(Se+=fe).trim(),this.setAttribute("transform",Se)})}};var K=/translate\([^)]*\)\s*$/;function Y(me,oe){var re;return me&&(re=me.mf),re===void 0&&(re=oe.marker&&oe.marker.standoff||0),oe._geo||oe._xA?re:-re}x.setTextPointsScale=function(me,oe,re){me&&me.each(function(){var fe,Se=A.select(this),be=Se.select("text");if(be.node()){var we=parseFloat(be.attr("x")||0),Me=parseFloat(be.attr("y")||0),Ie=(Se.attr("transform")||"").match(K);fe=oe===1&&re===1?[]:[i(we,Me),"scale("+oe+","+re+")",i(-we,-Me)],Ie&&fe.push(Ie),Se.attr("transform",fe.join(""))}})},x.getMarkerStandoff=Y;var ie,se,ae,ue,ve,ye,de=Math.atan2,pe=Math.cos,ge=Math.sin;function ke(me,oe){var re=oe[0],fe=oe[1];return[re*pe(me)-fe*ge(me),re*ge(me)+fe*pe(me)]}function Ee(me,oe){var re,fe,Se=me.ma;Se===void 0&&((Se=oe.marker.angle)&&!k.isArrayOrTypedArray(Se)||(Se=0));var be=oe.marker.angleref;if(be==="previous"||be==="north"){if(oe._geo){var we=oe._geo.project(me.lonlat);re=we[0],fe=we[1]}else{var Me=oe._xA,Ie=oe._yA;if(!Me||!Ie)return 90;re=Me.c2p(me.x),fe=Ie.c2p(me.y)}if(oe._geo){var Oe,he=me.lonlat[0],_e=me.lonlat[1],Ae=oe._geo.project([he,_e+1e-5]),De=oe._geo.project([he+1e-5,_e]),Le=de(De[1]-fe,De[0]-re),Be=de(Ae[1]-fe,Ae[0]-re);if(be==="north")Oe=Se/180*Math.PI;else if(be==="previous"){var Ve=he/180*Math.PI,Ze=_e/180*Math.PI,rt=ie/180*Math.PI,it=se/180*Math.PI,dt=rt-Ve,mt=pe(it)*ge(dt),ht=ge(it)*pe(Ze)-pe(it)*ge(Ze)*pe(dt);Oe=-de(mt,ht)-Math.PI,ie=he,se=_e}var Qe=ke(Le,[pe(Oe),0]),Je=ke(Be,[ge(Oe),0]);Se=de(Qe[1]+Je[1],Qe[0]+Je[0])/Math.PI*180,be!=="previous"||ye===oe.uid&&me.i===ve+1||(Se=null)}if(be==="previous"&&!oe._geo)if(ye===oe.uid&&me.i===ve+1&&T(re)&&T(fe)){var wt=re-ae,Pt=fe-ue,It=oe.line&&oe.line.shape||"",At=It.slice(It.length-1);At==="h"&&(Pt=0),At==="v"&&(wt=0),Se+=de(Pt,wt)/Math.PI*180+90}else Se=null}return ae=re,ue=fe,ve=me.i,ye=oe.uid,Se}x.getMarkerAngle=Ee},71984:function(X,I,e){"use strict";var A,k,o,T,b=e(21984),p=e(33428).round,s="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),n=Math.PI,r=Math.cos,a=Math.sin;function l(h){return h===null}function c(h,u,x){if(!(h&&h%360!=0||u))return x;if(o===h&&T===u&&A===x)return k;function d(R,U){var D=r(R),N=a(R),W=U[0],F=U[1]+(u||0);return[W*D-F*N,W*N+F*D]}o=h,T=u,A=x;for(var m=h/180*n,g=0,y=0,v=b(x),_="",f=0;f<v.length;f++){var S=v[f],w=S[0],E=g,P=y;if(w==="M"||w==="L")g=+S[1],y=+S[2];else if(w==="m"||w==="l")g+=+S[1],y+=+S[2];else if(w==="H")g=+S[1];else if(w==="h")g+=+S[1];else if(w==="V")y=+S[1];else if(w==="v")y+=+S[1];else if(w==="A"){g=+S[1],y=+S[2];var C=d(m,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+h}w!=="H"&&w!=="V"||(w="L"),w!=="h"&&w!=="v"||(w="l"),w!=="m"&&w!=="l"||(g-=E,y-=P);var O=d(m,[g,y]);w!=="H"&&w!=="V"||(w="L"),w!=="M"&&w!=="L"&&w!=="m"&&w!=="l"||(S[1]=O[0],S[2]=O[1]),S[0]=w,_+=S[0]+S.slice(1).join(",")}return k=_,_}X.exports={circle:{n:0,f:function(h,u,x){if(l(u))return s;var d=p(h,2),m="M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z";return x?c(u,x,m):m}},square:{n:1,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")}},diamond:{n:2,f:function(h,u,x){if(l(u))return s;var d=p(1.3*h,2);return c(u,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"Z")}},cross:{n:3,f:function(h,u,x){if(l(u))return s;var d=p(.4*h,2),m=p(1.2*h,2);return c(u,x,"M"+m+","+d+"H"+d+"V"+m+"H-"+d+"V"+d+"H-"+m+"V-"+d+"H-"+d+"V-"+m+"H"+d+"V-"+d+"H"+m+"Z")}},x:{n:4,f:function(h,u,x){if(l(u))return s;var d=p(.8*h/t,2),m="l"+d+","+d,g="l"+d+",-"+d,y="l-"+d+",-"+d,v="l-"+d+","+d;return c(u,x,"M0,"+d+m+g+y+g+y+v+y+v+m+v+m+"Z")}},"triangle-up":{n:5,f:function(h,u,x){if(l(u))return s;var d=p(2*h/i,2);return c(u,x,"M-"+d+","+p(h/2,2)+"H"+d+"L0,-"+p(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,u,x){if(l(u))return s;var d=p(2*h/i,2);return c(u,x,"M-"+d+",-"+p(h/2,2)+"H"+d+"L0,"+p(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,u,x){if(l(u))return s;var d=p(2*h/i,2);return c(u,x,"M"+p(h/2,2)+",-"+d+"V"+d+"L-"+p(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,u,x){if(l(u))return s;var d=p(2*h/i,2);return c(u,x,"M-"+p(h/2,2)+",-"+d+"V"+d+"L"+p(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,u,x){if(l(u))return s;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,x,"M-"+m+",-"+d+"H"+d+"V"+m+"Z")}},"triangle-se":{n:10,f:function(h,u,x){if(l(u))return s;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,x,"M"+d+",-"+m+"V"+d+"H-"+m+"Z")}},"triangle-sw":{n:11,f:function(h,u,x){if(l(u))return s;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,x,"M"+m+","+d+"H-"+d+"V-"+m+"Z")}},"triangle-nw":{n:12,f:function(h,u,x){if(l(u))return s;var d=p(.6*h,2),m=p(1.2*h,2);return c(u,x,"M-"+d+","+m+"V-"+d+"H"+m+"Z")}},pentagon:{n:13,f:function(h,u,x){if(l(u))return s;var d=p(.951*h,2),m=p(.588*h,2),g=p(-h,2),y=p(-.309*h,2);return c(u,x,"M"+d+","+y+"L"+m+","+p(.809*h,2)+"H-"+m+"L-"+d+","+y+"L0,"+g+"Z")}},hexagon:{n:14,f:function(h,u,x){if(l(u))return s;var d=p(h,2),m=p(h/2,2),g=p(h*i/2,2);return c(u,x,"M"+g+",-"+m+"V"+m+"L0,"+d+"L-"+g+","+m+"V-"+m+"L0,-"+d+"Z")}},hexagon2:{n:15,f:function(h,u,x){if(l(u))return s;var d=p(h,2),m=p(h/2,2),g=p(h*i/2,2);return c(u,x,"M-"+m+","+g+"H"+m+"L"+d+",0L"+m+",-"+g+"H-"+m+"L-"+d+",0Z")}},octagon:{n:16,f:function(h,u,x){if(l(u))return s;var d=p(.924*h,2),m=p(.383*h,2);return c(u,x,"M-"+m+",-"+d+"H"+m+"L"+d+",-"+m+"V"+m+"L"+m+","+d+"H-"+m+"L-"+d+","+m+"V-"+m+"Z")}},star:{n:17,f:function(h,u,x){if(l(u))return s;var d=1.4*h,m=p(.225*d,2),g=p(.951*d,2),y=p(.363*d,2),v=p(.588*d,2),_=p(-d,2),f=p(-.309*d,2),S=p(.118*d,2),w=p(.809*d,2);return c(u,x,"M"+m+","+f+"H"+g+"L"+y+","+S+"L"+v+","+w+"L0,"+p(.382*d,2)+"L-"+v+","+w+"L-"+y+","+S+"L-"+g+","+f+"H-"+m+"L0,"+_+"Z")}},hexagram:{n:18,f:function(h,u,x){if(l(u))return s;var d=p(.66*h,2),m=p(.38*h,2),g=p(.76*h,2);return c(u,x,"M-"+g+",0l-"+m+",-"+d+"h"+g+"l"+m+",-"+d+"l"+m+","+d+"h"+g+"l-"+m+","+d+"l"+m+","+d+"h-"+g+"l-"+m+","+d+"l-"+m+",-"+d+"h-"+g+"Z")}},"star-triangle-up":{n:19,f:function(h,u,x){if(l(u))return s;var d=p(h*i*.8,2),m=p(.8*h,2),g=p(1.6*h,2),y=p(4*h,2),v="A "+y+","+y+" 0 0 1 ";return c(u,x,"M-"+d+","+m+v+d+","+m+v+"0,-"+g+v+"-"+d+","+m+"Z")}},"star-triangle-down":{n:20,f:function(h,u,x){if(l(u))return s;var d=p(h*i*.8,2),m=p(.8*h,2),g=p(1.6*h,2),y=p(4*h,2),v="A "+y+","+y+" 0 0 1 ";return c(u,x,"M"+d+",-"+m+v+"-"+d+",-"+m+v+"0,"+g+v+d+",-"+m+"Z")}},"star-square":{n:21,f:function(h,u,x){if(l(u))return s;var d=p(1.1*h,2),m=p(2*h,2),g="A "+m+","+m+" 0 0 1 ";return c(u,x,"M-"+d+",-"+d+g+"-"+d+","+d+g+d+","+d+g+d+",-"+d+g+"-"+d+",-"+d+"Z")}},"star-diamond":{n:22,f:function(h,u,x){if(l(u))return s;var d=p(1.4*h,2),m=p(1.9*h,2),g="A "+m+","+m+" 0 0 1 ";return c(u,x,"M-"+d+",0"+g+"0,"+d+g+d+",0"+g+"0,-"+d+g+"-"+d+",0Z")}},"diamond-tall":{n:23,f:function(h,u,x){if(l(u))return s;var d=p(.7*h,2),m=p(1.4*h,2);return c(u,x,"M0,"+m+"L"+d+",0L0,-"+m+"L-"+d+",0Z")}},"diamond-wide":{n:24,f:function(h,u,x){if(l(u))return s;var d=p(1.4*h,2),m=p(.7*h,2);return c(u,x,"M0,"+m+"L"+d+",0L0,-"+m+"L-"+d+",0Z")}},hourglass:{n:25,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M"+d+","+d+"H-"+d+"L"+d+",-"+d+"H-"+d+"Z")},noDot:!0},bowtie:{n:26,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M"+d+","+d+"V-"+d+"L-"+d+","+d+"V-"+d+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,u,x){if(l(u))return s;var d=p(h,2),m=p(h/t,2);return c(u,x,"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,u,x){if(l(u))return s;var d=p(1.3*h,2);return c(u,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM0,-"+d+"V"+d+"M-"+d+",0H"+d)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,u,x){if(l(u))return s;var d=p(1.3*h,2),m=p(.65*h,2);return c(u,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM-"+m+",-"+m+"L"+m+","+m+"M-"+m+","+m+"L"+m+",-"+m)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,u,x){if(l(u))return s;var d=p(1.4*h,2);return c(u,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,u,x){if(l(u))return s;var d=p(1.2*h,2),m=p(.85*h,2);return c(u,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,u,x){if(l(u))return s;var d=p(h/2,2),m=p(h,2);return c(u,x,"M"+d+","+m+"V-"+m+"M"+(d-m)+",-"+m+"V"+m+"M"+m+","+d+"H-"+m+"M-"+m+","+(d-m)+"H"+m)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,u,x){if(l(u))return s;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,x,"M-"+d+","+g+"L0,0M"+d+","+g+"L0,0M0,-"+m+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,u,x){if(l(u))return s;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,x,"M-"+d+",-"+g+"L0,0M"+d+",-"+g+"L0,0M0,"+m+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,u,x){if(l(u))return s;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,x,"M"+g+","+d+"L0,0M"+g+",-"+d+"L0,0M-"+m+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,u,x){if(l(u))return s;var d=p(1.2*h,2),m=p(1.6*h,2),g=p(.8*h,2);return c(u,x,"M-"+g+","+d+"L0,0M-"+g+",-"+d+"L0,0M"+m+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,u,x){if(l(u))return s;var d=p(1.4*h,2);return c(u,x,"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,u,x){if(l(u))return s;var d=p(1.4*h,2);return c(u,x,"M0,"+d+"V-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M"+d+","+d+"L-"+d+",-"+d)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M0,0L-"+d+","+p(2*h,2)+"H"+d+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M0,0L-"+d+",-"+p(2*h,2)+"H"+d+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,u,x){if(l(u))return s;var d=p(2*h,2),m=p(h,2);return c(u,x,"M0,0L"+d+",-"+m+"V"+m+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,u,x){if(l(u))return s;var d=p(2*h,2),m=p(h,2);return c(u,x,"M0,0L-"+d+",-"+m+"V"+m+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M-"+d+",0H"+d+"M0,0L-"+d+","+p(2*h,2)+"H"+d+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,u,x){if(l(u))return s;var d=p(h,2);return c(u,x,"M-"+d+",0H"+d+"M0,0L-"+d+",-"+p(2*h,2)+"H"+d+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,u,x){if(l(u))return s;var d=p(2*h,2),m=p(h,2);return c(u,x,"M0,-"+m+"V"+m+"M0,0L"+d+",-"+m+"V"+m+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,u,x){if(l(u))return s;var d=p(2*h,2),m=p(h,2);return c(u,x,"M0,-"+m+"V"+m+"M0,0L-"+d+",-"+m+"V"+m+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,u,x){if(l(u))return s;var d=n/2.5,m=2*h*r(d),g=2*h*a(d);return c(u,x,"M0,0L"+-m+","+g+"L"+m+","+g+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,u,x){if(l(u))return s;var d=n/4,m=2*h*r(d),g=2*h*a(d);return c(u,x,"M0,0L"+-m+","+g+"A "+2*h+","+2*h+" 0 0 1 "+m+","+g+"Z")},backoff:.4,noDot:!0}}},97644:function(X){"use strict";X.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(X,I,e){"use strict";var A=e(38248),k=e(24040),o=e(54460),T=e(3400),b=e(93792);function p(s,t,i,n){var r=t["error_"+n]||{},a=[];if(r.visible&&["linear","log"].indexOf(i.type)!==-1){for(var l=b(r),c=0;c<s.length;c++){var h=s[c],u=h.i;if(u===void 0)u=c;else if(u===null)continue;var x=h[n];if(A(i.c2l(x))){var d=l(x,u);if(A(d[0])&&A(d[1])){var m=h[n+"s"]=x-d[0],g=h[n+"h"]=x+d[1];a.push(m,g)}}}var y=i._id,v=t._extremes[y],_=o.findExtremes(i,a,T.extendFlat({tozero:v.opts.tozero},{padded:!0}));v.min=v.min.concat(_.min),v.max=v.max.concat(_.max)}}X.exports=function(s){for(var t=s.calcdata,i=0;i<t.length;i++){var n=t[i],r=n[0].trace;if(r.visible===!0&&k.traceIs(r,"errorBarsOK")){var a=o.getFromId(s,r.xaxis),l=o.getFromId(s,r.yaxis);p(n,r,a,"x"),p(n,r,l,"y")}}}},93792:function(X){"use strict";function I(e,A){return e==="percent"?function(k){return Math.abs(k*A/100)}:e==="constant"?function(){return Math.abs(A)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}X.exports=function(e){var A=e.type,k=e.symmetric;if(A==="data"){var o=e.array||[];if(k)return function(s,t){var i=+o[t];return[i,i]};var T=e.arrayminus||[];return function(s,t){var i=+o[t],n=+T[t];return isNaN(i)&&isNaN(n)?[NaN,NaN]:[n||0,i||0]}}var b=I(A,e.value),p=I(A,e.valueminus);return k||e.valueminus===void 0?function(s){var t=b(s);return[t,t]}:function(s){return[p(s),b(s)]}}},65200:function(X,I,e){"use strict";var A=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(97644);X.exports=function(p,s,t,i){var n="error_"+i.axis,r=T.newContainer(s,n),a=p[n]||{};function l(x,d){return o.coerce(a,r,b,x,d)}if(l("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var c=l("type","array"in a?"data":"percent"),h=!0;c!=="sqrt"&&(h=l("symmetric",!((c==="data"?"arrayminus":"valueminus")in a))),c==="data"?(l("array"),l("traceref"),h||(l("arrayminus"),l("tracerefminus"))):c!=="percent"&&c!=="constant"||(l("value"),h||l("valueminus"));var u="copy_"+i.inherit+"style";i.inherit&&(s["error_"+i.inherit]||{}).visible&&l(u,!(a.color||A(a.thickness)||A(a.width))),i.inherit&&r[u]||(l("color",t),l("thickness"),l("width",k.traceIs(s,"gl3d")?0:4))}}},64968:function(X,I,e){"use strict";var A=e(3400),k=e(67824).overrideAll,o=e(97644),T={error_x:A.extendFlat({},o),error_y:A.extendFlat({},o)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:A.extendFlat({},o),error_y:A.extendFlat({},o),error_z:A.extendFlat({},o)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,X.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(p,s,t){(s.error_y||{}).visible&&(t.yerr=p.yh-p.y,s.error_y.symmetric||(t.yerrneg=p.y-p.ys)),(s.error_x||{}).visible&&(t.xerr=p.xh-p.x,s.error_x.symmetric||(t.xerrneg=p.x-p.xs))}}},78512:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(43616),T=e(43028);X.exports=function(b,p,s,t){var i=s.xaxis,n=s.yaxis,r=t&&t.duration>0,a=b._context.staticPlot;p.each(function(l){var c,h=l[0].trace,u=h.error_x||{},x=h.error_y||{};h.ids&&(c=function(y){return y.id});var d=T.hasMarkers(h)&&h.marker.maxdisplayed>0;x.visible||u.visible||(l=[]);var m=A.select(this).selectAll("g.errorbar").data(l,c);if(m.exit().remove(),l.length){u.visible||m.selectAll("path.xerror").remove(),x.visible||m.selectAll("path.yerror").remove(),m.style("opacity",1);var g=m.enter().append("g").classed("errorbar",!0);r&&g.style("opacity",0).transition().duration(t.duration).style("opacity",1),o.setClipUrl(m,s.layerClipId,b),m.each(function(y){var v=A.select(this),_=function(C,O,R){var U={x:O.c2p(C.x),y:R.c2p(C.y)};return C.yh!==void 0&&(U.yh=R.c2p(C.yh),U.ys=R.c2p(C.ys),k(U.ys)||(U.noYS=!0,U.ys=R.c2p(C.ys,!0))),C.xh!==void 0&&(U.xh=O.c2p(C.xh),U.xs=O.c2p(C.xs),k(U.xs)||(U.noXS=!0,U.xs=O.c2p(C.xs,!0))),U}(y,i,n);if(!d||y.vis){var f,S=v.select("path.yerror");if(x.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var w=x.width;f="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(f+="m-"+w+",0h"+2*w),S.size()?r&&(S=S.transition().duration(t.duration).ease(t.easing)):S=v.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",f)}else S.remove();var E=v.select("path.xerror");if(u.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var P=(u.copy_ystyle?x:u).width;f="M"+_.xh+","+(_.y-P)+"v"+2*P+"m0,-"+P+"H"+_.xs,_.noXS||(f+="m0,-"+P+"v"+2*P),E.size()?r&&(E=E.transition().duration(t.duration).ease(t.easing)):E=v.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",f)}else E.remove()}})}})}},92036:function(X,I,e){"use strict";var A=e(33428),k=e(76308);X.exports=function(o){o.each(function(T){var b=T[0].trace,p=b.error_y||{},s=b.error_x||{},t=A.select(this);t.selectAll("path.yerror").style("stroke-width",p.thickness+"px").call(k.stroke,p.color),s.copy_ystyle&&(s=p),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},55756:function(X,I,e){"use strict";var A=e(25376),k=e(65460).hoverlabel,o=e(92880).extendFlat;X.exports={hoverlabel:{bgcolor:o({},k.bgcolor,{arrayOk:!0}),bordercolor:o({},k.bordercolor,{arrayOk:!0}),font:A({arrayOk:!0,editType:"none"}),align:o({},k.align,{arrayOk:!0}),namelength:o({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(X,I,e){"use strict";var A=e(3400),k=e(24040);function o(T,b,p,s){s=s||A.identity,Array.isArray(T)&&(b[0][p]=s(T))}X.exports=function(T){var b=T.calcdata,p=T._fullLayout;function s(a){return function(l){return A.coerceHoverinfo({hoverinfo:l},{_module:a._module},p)}}for(var t=0;t<b.length;t++){var i=b[t],n=i[0].trace;if(!k.traceIs(n,"pie-like")){var r=k.traceIs(n,"2dMap")?o:A.fillArray;r(n.hoverinfo,i,"hi",s(n)),n.hovertemplate&&r(n.hovertemplate,i,"ht"),n.hoverlabel&&(r(n.hoverlabel.bgcolor,i,"hbg"),r(n.hoverlabel.bordercolor,i,"hbc"),r(n.hoverlabel.font.size,i,"hts"),r(n.hoverlabel.font.color,i,"htc"),r(n.hoverlabel.font.family,i,"htf"),r(n.hoverlabel.font.weight,i,"htw"),r(n.hoverlabel.font.style,i,"hty"),r(n.hoverlabel.font.variant,i,"htv"),r(n.hoverlabel.namelength,i,"hnl"),r(n.hoverlabel.align,i,"hta"))}}}},62376:function(X,I,e){"use strict";var A=e(24040),k=e(83292).hover;X.exports=function(o,T,b){var p=A.getComponentMethod("annotations","onClick")(o,o._hoverdata);function s(){o.emit("plotly_click",{points:o._hoverdata,event:T})}b!==void 0&&k(o,T,b,!0),o._hoverdata&&T&&T.target&&(p&&p.then?p.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(X){"use strict";X.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(X,I,e){"use strict";var A=e(3400),k=e(55756),o=e(16132);X.exports=function(T,b,p,s){var t=A.extendFlat({},s.hoverlabel);b.hovertemplate&&(t.namelength=-1),o(T,b,function(i,n){return A.coerce(T,b,k,i,n)},t)}},10624:function(X,I,e){"use strict";var A=e(3400);I.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},I.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var i=s.xaxes||[],n=s.yaxes||[],r=0;r<i.length;r++)for(var a=0;a<n.length;a++)if(t.indexOf(i[r]+n[a])!==-1)return!0;return!1}return t.indexOf(I.getSubplot(s))!==-1},I.flat=function(s,t){for(var i=new Array(s.length),n=0;n<s.length;n++)i[n]=t;return i},I.p2c=function(s,t){for(var i=new Array(s.length),n=0;n<s.length;n++)i[n]=s[n].p2c(t);return i},I.getDistanceFunction=function(s,t,i,n){return s==="closest"?n||I.quadrature(t,i):s.charAt(0)==="x"?t:i},I.getClosest=function(s,t,i){if(i.index!==!1)i.index>=0&&i.index<s.length?i.distance=0:i.index=!1;else for(var n=0;n<s.length;n++){var r=t(s[n]);r<=i.distance&&(i.index=n,i.distance=r)}return i},I.inbox=function(s,t,i){return s*t<0||s===0?i:1/0},I.quadrature=function(s,t){return function(i){var n=s(i),r=t(i);return Math.sqrt(n*n+r*r)}},I.makeEventData=function(s,t,i){var n="index"in s?s.index:s.pointNumber,r={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var a=t._indexToPoints[n];a.length===1?r.pointIndex=a[0]:r.pointIndices=a}else r.pointIndex=n;return t._module.eventData?r=t._module.eventData(r,s,t,i,n):("xVal"in s?r.x=s.xVal:"x"in s&&(r.x=s.x),"yVal"in s?r.y=s.yVal:"y"in s&&(r.y=s.y),s.xa&&(r.xaxis=s.xa),s.ya&&(r.yaxis=s.ya),s.zLabelVal!==void 0&&(r.z=s.zLabelVal)),I.appendArrayPointValue(r,t,n),r},I.appendArrayPointValue=function(s,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var a=n[r],l=o(a);if(s[l]===void 0){var c=T(A.nestedProperty(t,a).get(),i);c!==void 0&&(s[l]=c)}}},I.appendArrayMultiPointValues=function(s,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var a=n[r],l=o(a);if(s[l]===void 0){for(var c=A.nestedProperty(t,a).get(),h=new Array(i.length),u=0;u<i.length;u++)h[u]=T(c,i[u]);s[l]=h}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(s){return k[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var b={x:!0,y:!0},p={"x unified":!0,"y unified":!0};I.isUnifiedHover=function(s){return typeof s=="string"&&!!p[s]},I.isXYhover=function(s){return typeof s=="string"&&!!b[s]}},83292:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(49760),T=e(3400),b=T.pushUnique,p=T.strTranslate,s=T.strRotate,t=e(95924),i=e(72736),n=e(72213),r=e(43616),a=e(76308),l=e(86476),c=e(54460),h=e(24040),u=e(10624),x=e(92456),d=e(77864),m=e(31140),g=x.YANGLE,y=Math.PI*g/180,v=1/Math.sin(y),_=Math.cos(y),f=Math.sin(y),S=x.HOVERARROWSIZE,w=x.HOVERTEXTPAD,E={box:!0,ohlc:!0,violin:!0,candlestick:!0},P={scatter:!0,scattergl:!0,splom:!0};function C(Y,ie){return Y.distance-ie.distance}function O(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}I.hover=function(Y,ie,se,ae){Y=T.getGraphDiv(Y);var ue=ie.target;T.throttle(Y._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,function(){(function(ve,ye,de,pe,ge){de||(de="xy");var ke,Ee,me,oe=Array.isArray(de)?de:[de],re=ve._fullLayout,fe=re.hoversubplots,Se=re._plots||[],be=Se[de],we=re._has("cartesian"),Me=ye.hovermode||re.hovermode,Ie=(Me||"").charAt(0)==="x",Oe=(Me||"").charAt(0)==="y";if(we&&(Ie||Oe)&&fe==="axis"){for(var he=oe.length,_e=0;_e<he;_e++)if(Se[ke=oe[_e]]){Ee=c.getFromId(ve,ke,"x"),me=c.getFromId(ve,ke,"y");var Ae=(Ie?Ee:me)._subplotsWith;if(Ae&&Ae.length)for(var De=0;De<Ae.length;De++)b(oe,Ae[De])}}if(be&&fe!=="single"){var Le=be.overlays.map(function(Rt){return Rt.id});oe=oe.concat(Le)}for(var Be=oe.length,Ve=new Array(Be),Ze=new Array(Be),rt=!1,it=0;it<Be;it++)if(Se[ke=oe[it]])rt=!0,Ve[it]=Se[ke].xaxis,Ze[it]=Se[ke].yaxis;else{if(!re[ke]||!re[ke]._subplot)return void T.warn("Unrecognized subplot: "+ke);var dt=re[ke]._subplot;Ve[it]=dt.xaxis,Ze[it]=dt.yaxis}if(Me&&!rt&&(Me="closest"),["x","y","closest","x unified","y unified"].indexOf(Me)===-1||!ve.calcdata||ve.querySelector(".zoombox")||ve._dragging)return l.unhoverRaw(ve,ye);var mt=re.hoverdistance;mt===-1&&(mt=1/0);var ht=re.spikedistance;ht===-1&&(ht=1/0);var Qe,Je,wt,Pt,It,At,qe,Ye,Ne,We,at,tt,Re,Fe=[],nt=[],Ge={hLinePoint:null,vLinePoint:null},ut=!1;if(Array.isArray(ye))for(Me="array",wt=0;wt<ye.length;wt++)(It=ve.calcdata[ye[wt].curveNumber||0])&&(At=It[0].trace,It[0].trace.hoverinfo!=="skip"&&(nt.push(It),At.orientation==="h"&&(ut=!0)));else{var pt,gt,ct=ve.calcdata.slice();for(ct.sort(function(Rt,Xt){return(Rt[0].trace.zorder||0)-(Xt[0].trace.zorder||0)}),Pt=0;Pt<ct.length;Pt++)It=ct[Pt],(At=It[0].trace).hoverinfo!=="skip"&&u.isTraceInSubplots(At,oe)&&(nt.push(It),At.orientation==="h"&&(ut=!0));if(ge){if(t.triggerHandler(ve,"plotly_beforehover",ye)===!1)return;var Tt=ge.getBoundingClientRect();pt=ye.clientX-Tt.left,gt=ye.clientY-Tt.top,re._calcInverseTransform(ve);var vt=T.apply3DTransform(re._invTransform)(pt,gt);if(pt=vt[0],gt=vt[1],pt<0||pt>Ve[0]._length||gt<0||gt>Ze[0]._length)return l.unhoverRaw(ve,ye)}else pt="xpx"in ye?ye.xpx:Ve[0]._length/2,gt="ypx"in ye?ye.ypx:Ze[0]._length/2;if(ye.pointerX=pt+Ve[0]._offset,ye.pointerY=gt+Ze[0]._offset,Qe="xval"in ye?u.flat(oe,ye.xval):u.p2c(Ve,pt),Je="yval"in ye?u.flat(oe,ye.yval):u.p2c(Ze,gt),!k(Qe[0])||!k(Je[0]))return T.warn("Fx.hover failed",ye,ve),l.unhoverRaw(ve,ye)}var kt=1/0;function Lt(Rt,Xt){for(Pt=0;Pt<nt.length;Pt++)if((It=nt[Pt])&&It[0]&&It[0].trace&&(At=It[0].trace).visible===!0&&At._length!==0&&["carpet","contourcarpet"].indexOf(At._module.name)===-1){if(Ne=Me,u.isUnifiedHover(Ne)&&(Ne=Ne.charAt(0)),At.type==="splom"?qe=oe[Ye=0]:(qe=u.getSubplot(At),Ye=oe.indexOf(qe)),tt={cd:It,trace:At,xa:Ve[Ye],ya:Ze[Ye],maxHoverDistance:mt,maxSpikeDistance:ht,index:!1,distance:Math.min(kt,mt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:At.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},re[qe]&&(tt.subplot=re[qe]._subplot),re._splomScenes&&re._splomScenes[At.uid]&&(tt.scene=re._splomScenes[At.uid]),Ne==="array"){var ln=ye[Pt];"pointNumber"in ln?(tt.index=ln.pointNumber,Ne="closest"):(Ne="","xval"in ln&&(We=ln.xval,Ne="x"),"yval"in ln&&(at=ln.yval,Ne=Ne?"closest":"y"))}else Rt!==void 0&&Xt!==void 0?(We=Rt,at=Xt):(We=Qe[Ye],at=Je[Ye]);if(Re=Fe.length,mt!==0)if(At._module&&At._module.hoverPoints){var un=At._module.hoverPoints(tt,We,at,Ne,{finiteRange:!0,hoverLayer:re._hoverlayer,hoversubplots:fe,gd:ve});if(un)for(var mn,rn=0;rn<un.length;rn++)mn=un[rn],k(mn.x0)&&k(mn.y0)&&Fe.push(F(mn,Me))}else T.log("Unrecognized trace type in hover:",At);if(Me==="closest"&&Fe.length>Re&&(Fe.splice(0,Re),kt=Fe[0].distance),we&&ht!==0&&Fe.length===0){tt.distance=ht,tt.index=!1;var qt=At._module.hoverPoints(tt,We,at,"closest",{hoverLayer:re._hoverlayer});if(qt&&(qt=qt.filter(function(On){return On.spikeDistance<=ht})),qt&&qt.length){var Ht,$t=qt.filter(function(On){return On.xa.showspikes&&On.xa.spikesnap!=="hovered data"});if($t.length){var an=$t[0];k(an.x0)&&k(an.y0)&&(Ht=Dt(an),(!Ge.vLinePoint||Ge.vLinePoint.spikeDistance>Ht.spikeDistance)&&(Ge.vLinePoint=Ht))}var wn=qt.filter(function(On){return On.ya.showspikes&&On.ya.spikesnap!=="hovered data"});if(wn.length){var En=wn[0];k(En.x0)&&k(En.y0)&&(Ht=Dt(En),(!Ge.hLinePoint||Ge.hLinePoint.spikeDistance>Ht.spikeDistance)&&(Ge.hLinePoint=Ht))}}}}}function Ct(Rt,Xt,ln){for(var un,mn=null,rn=1/0,qt=0;qt<Rt.length;qt++)Ee&&Ee._id!==Rt[qt].xa._id||me&&me._id!==Rt[qt].ya._id||(un=Rt[qt].spikeDistance,ln&&qt===0&&(un=-1/0),un<=rn&&un<=Xt&&(mn=Rt[qt],rn=un));return mn}function Dt(Rt){return Rt?{xa:Rt.xa,ya:Rt.ya,x:Rt.xSpike!==void 0?Rt.xSpike:(Rt.x0+Rt.x1)/2,y:Rt.ySpike!==void 0?Rt.ySpike:(Rt.y0+Rt.y1)/2,distance:Rt.distance,spikeDistance:Rt.spikeDistance,curveNumber:Rt.trace.index,color:Rt.color,pointNumber:Rt.index}:null}Lt();var Gt={fullLayout:re,container:re._hoverlayer,event:ye},tn=ve._spikepoints,jt={vLinePoint:Ge.vLinePoint,hLinePoint:Ge.hLinePoint};ve._spikepoints=jt;var Wt=function(){var Rt=Fe.filter(function(ln){return Ee&&Ee._id===ln.xa._id&&me&&me._id===ln.ya._id}),Xt=Fe.filter(function(ln){return!(Ee&&Ee._id===ln.xa._id&&me&&me._id===ln.ya._id)});Rt.sort(C),Xt.sort(C),Fe=function(ln,un){for(var mn=un.charAt(0),rn=[],qt=[],Ht=[],$t=0;$t<ln.length;$t++){var an=ln[$t];h.traceIs(an.trace,"bar-like")||h.traceIs(an.trace,"box-violin")?Ht.push(an):an.trace[mn+"period"]?qt.push(an):rn.push(an)}return rn.concat(qt).concat(Ht)}(Fe=Rt.concat(Xt),Me)};Wt();var Ft=Me.charAt(0),Ln=(Ft==="x"||Ft==="y")&&Fe[0]&&P[Fe[0].trace.type];if(we&&ht!==0&&Fe.length!==0){var bn=Ct(Fe.filter(function(Rt){return Rt.ya.showspikes}),ht,Ln);Ge.hLinePoint=Dt(bn);var hn=Ct(Fe.filter(function(Rt){return Rt.xa.showspikes}),ht,Ln);Ge.vLinePoint=Dt(hn)}if(Fe.length===0){var Kt=l.unhoverRaw(ve,ye);return!we||Ge.hLinePoint===null&&Ge.vLinePoint===null||q(tn)&&j(ve,Ge,Gt),Kt}if(we&&q(tn)&&j(ve,Ge,Gt),u.isXYhover(Ne)&&Fe[0].length!==0&&Fe[0].trace.type!=="splom"){var sn=Fe[0],Qt=(Fe=E[sn.trace.type]?Fe.filter(function(Rt){return Rt.trace.index===sn.trace.index}):[sn]).length;Lt(ee("x",sn,re),ee("y",sn,re));var cn,vn=[],xn={},An=0,Sn=function(Rt){var Xt=E[Rt.trace.type]?O(Rt):Rt.trace.index;if(xn[Xt]){var ln=xn[Xt]-1,un=vn[ln];ln>0&&Math.abs(Rt.distance)<Math.abs(un.distance)&&(vn[ln]=Rt)}else An++,xn[Xt]=An,vn.push(Rt)};for(cn=0;cn<Qt;cn++)Sn(Fe[cn]);for(cn=Fe.length-1;cn>Qt-1;cn--)Sn(Fe[cn]);Fe=vn,Wt()}var Tn=ve._hoverdata,Rn=[],In=Q(ve),Xn=J(ve);for(wt=0;wt<Fe.length;wt++){var Vn=Fe[wt],er=u.makeEventData(Vn,Vn.trace,Vn.cd);if(Vn.hovertemplate!==!1){var Wn=!1;Vn.cd[Vn.index]&&Vn.cd[Vn.index].ht&&(Wn=Vn.cd[Vn.index].ht),Vn.hovertemplate=Wn||Vn.trace.hovertemplate||!1}if(Vn.xa&&Vn.ya){var fr=Vn.x0+Vn.xa._offset,Jt=Vn.x1+Vn.xa._offset,en=Vn.y0+Vn.ya._offset,Mn=Vn.y1+Vn.ya._offset,pn=Math.min(fr,Jt),Cn=Math.max(fr,Jt),jn=Math.min(en,Mn),Bn=Math.max(en,Mn);er.bbox={x0:pn+Xn,x1:Cn+Xn,y0:jn+In,y1:Bn+In}}Vn.eventData=[er],Rn.push(er)}ve._hoverdata=Rn;var Yn=Me==="y"&&(nt.length>1||Fe.length>1)||Me==="closest"&&ut&&Fe.length>1,dr=a.combine(re.plot_bgcolor||a.background,re.paper_bgcolor),Zt=U(Fe,{gd:ve,hovermode:Me,rotateLabels:Yn,bgColor:dr,container:re._hoverlayer,outerContainer:re._paper.node(),commonLabelOpts:re.hoverlabel,hoverdistance:re.hoverdistance}),dn=Zt.hoverLabels;if(u.isUnifiedHover(Me)||(function(Rt,Xt,ln,un){var mn,rn,qt,Ht,$t,an,wn,En=Xt?"xa":"ya",On=Xt?"ya":"xa",Fn=0,$n=1,Hn=Rt.size(),Kn=new Array(Hn),tr=0,Jn=un.minX,hr=un.maxX,br=un.minY,gr=un.maxY,ar=function(zr){return zr*ln._invScaleX},mr=function(zr){return zr*ln._invScaleY};function Mr(zr){var Ui=zr[0],Ia=zr[zr.length-1];if(rn=Ui.pmin-Ui.pos-Ui.dp+Ui.size,qt=Ia.pos+Ia.dp+Ia.size-Ui.pmax,rn>.01){for($t=zr.length-1;$t>=0;$t--)zr[$t].dp+=rn;mn=!1}if(!(qt<.01)){if(rn<-.01){for($t=zr.length-1;$t>=0;$t--)zr[$t].dp-=qt;mn=!1}if(mn){var Bi=0;for(Ht=0;Ht<zr.length;Ht++)(an=zr[Ht]).pos+an.dp+an.size>Ui.pmax&&Bi++;for(Ht=zr.length-1;Ht>=0&&!(Bi<=0);Ht--)(an=zr[Ht]).pos>Ui.pmax-1&&(an.del=!0,Bi--);for(Ht=0;Ht<zr.length&&!(Bi<=0);Ht++)if((an=zr[Ht]).pos<Ui.pmin+1)for(an.del=!0,Bi--,qt=2*an.size,$t=zr.length-1;$t>=0;$t--)zr[$t].dp-=qt;for(Ht=zr.length-1;Ht>=0&&!(Bi<=0);Ht--)(an=zr[Ht]).pos+an.dp+an.size>Ui.pmax&&(an.del=!0,Bi--)}}}for(Rt.each(function(zr){var Ui=zr[En],Ia=zr[On],Bi=Ui._id.charAt(0)==="x",bo=Ui.range;tr===0&&bo&&bo[0]>bo[1]!==Bi&&($n=-1);var Do=0,Qi=Bi?ln.width:ln.height;if(ln.hovermode==="x"||ln.hovermode==="y"){var io,ao,zo=N(zr,Xt),Oa=zr.anchor,Va=Oa==="end"?-1:1;if(Oa==="middle")ao=(io=zr.crossPos+(Bi?mr(zo.y-zr.by/2):ar(zr.bx/2+zr.tx2width/2)))+(Bi?mr(zr.by):ar(zr.bx));else if(Bi)ao=(io=zr.crossPos+mr(S+zo.y)-mr(zr.by/2-S))+mr(zr.by);else{var Ha=ar(Va*S+zo.x),oi=Ha+ar(Va*zr.bx);io=zr.crossPos+Math.min(Ha,oi),ao=zr.crossPos+Math.max(Ha,oi)}Bi?br!==void 0&&gr!==void 0&&Math.min(ao,gr)-Math.max(io,br)>1&&(Ia.side==="left"?(Do=Ia._mainLinePosition,Qi=ln.width):Qi=Ia._mainLinePosition):Jn!==void 0&&hr!==void 0&&Math.min(ao,hr)-Math.max(io,Jn)>1&&(Ia.side==="top"?(Do=Ia._mainLinePosition,Qi=ln.height):Qi=Ia._mainLinePosition)}Kn[tr++]=[{datum:zr,traceIndex:zr.trace.index,dp:0,pos:zr.pos,posref:zr.posref,size:zr.by*(Bi?v:1)/2,pmin:Do,pmax:Qi}]}),Kn.sort(function(zr,Ui){return zr[0].posref-Ui[0].posref||$n*(Ui[0].traceIndex-zr[0].traceIndex)});!mn&&Fn<=Hn;){for(Fn++,mn=!0,Ht=0;Ht<Kn.length-1;){var Dr=Kn[Ht],fi=Kn[Ht+1],hi=Dr[Dr.length-1],Ri=fi[0];if((rn=hi.pos+hi.dp+hi.size-Ri.pos-Ri.dp+Ri.size)>.01&&hi.pmin===Ri.pmin&&hi.pmax===Ri.pmax){for($t=fi.length-1;$t>=0;$t--)fi[$t].dp+=rn;for(Dr.push.apply(Dr,fi),Kn.splice(Ht+1,1),wn=0,$t=Dr.length-1;$t>=0;$t--)wn+=Dr[$t].dp;for(qt=wn/Dr.length,$t=Dr.length-1;$t>=0;$t--)Dr[$t].dp-=qt;mn=!1}else Ht++}Kn.forEach(Mr)}for(Ht=Kn.length-1;Ht>=0;Ht--){var ci=Kn[Ht];for($t=ci.length-1;$t>=0;$t--){var Ti=ci[$t],fa=Ti.datum;fa.offset=Ti.dp,fa.del=Ti.del}}}(dn,Yn,re,Zt.commonLabelBoundingBox),W(dn,Yn,re._invScaleX,re._invScaleY)),ge&&ge.tagName){var St=h.getComponentMethod("annotations","hasClickToShow")(ve,Rn);n(A.select(ge),St?"pointer":"")}ge&&!pe&&function(Rt,Xt,ln){if(!ln||ln.length!==Rt._hoverdata.length)return!0;for(var un=ln.length-1;un>=0;un--){var mn=ln[un],rn=Rt._hoverdata[un];if(mn.curveNumber!==rn.curveNumber||String(mn.pointNumber)!==String(rn.pointNumber)||String(mn.pointNumbers)!==String(rn.pointNumbers))return!0}return!1}(ve,0,Tn)&&(Tn&&ve.emit("plotly_unhover",{event:ye,points:Tn}),ve.emit("plotly_hover",{event:ye,points:ve._hoverdata,xaxes:Ve,yaxes:Ze,xvals:Qe,yvals:Je}))})(Y,ie,se,ae,ue)})},I.loneHover=function(Y,ie){var se=!0;Array.isArray(Y)||(se=!1,Y=[Y]);var ae=ie.gd,ue=Q(ae),ve=J(ae),ye=U(Y.map(function(ge){var ke=ge._x0||ge.x0||ge.x||0,Ee=ge._x1||ge.x1||ge.x||0,me=ge._y0||ge.y0||ge.y||0,oe=ge._y1||ge.y1||ge.y||0,re=ge.eventData;if(re){var fe=Math.min(ke,Ee),Se=Math.max(ke,Ee),be=Math.min(me,oe),we=Math.max(me,oe),Me=ge.trace;if(h.traceIs(Me,"gl3d")){var Ie=ae._fullLayout[Me.scene]._scene.container,Oe=Ie.offsetLeft,he=Ie.offsetTop;fe+=Oe,Se+=Oe,be+=he,we+=he}re.bbox={x0:fe+ve,x1:Se+ve,y0:be+ue,y1:we+ue},ie.inOut_bbox&&ie.inOut_bbox.push(re.bbox)}else re=!1;return{color:ge.color||a.defaultLine,x0:ge.x0||ge.x||0,x1:ge.x1||ge.x||0,y0:ge.y0||ge.y||0,y1:ge.y1||ge.y||0,xLabel:ge.xLabel,yLabel:ge.yLabel,zLabel:ge.zLabel,text:ge.text,name:ge.name,idealAlign:ge.idealAlign,borderColor:ge.borderColor,fontFamily:ge.fontFamily,fontSize:ge.fontSize,fontColor:ge.fontColor,fontWeight:ge.fontWeight,fontStyle:ge.fontStyle,fontVariant:ge.fontVariant,nameLength:ge.nameLength,textAlign:ge.textAlign,trace:ge.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ge.hovertemplate||!1,hovertemplateLabels:ge.hovertemplateLabels||!1,eventData:re}}),{gd:ae,hovermode:"closest",rotateLabels:!1,bgColor:ie.bgColor||a.background,container:A.select(ie.container),outerContainer:ie.outerContainer||ie.container}).hoverLabels,de=0,pe=0;return ye.sort(function(ge,ke){return ge.y0-ke.y0}).each(function(ge,ke){var Ee=ge.y0-ge.by/2;ge.offset=Ee-5<de?de-Ee+5:0,de=Ee+ge.by+ge.offset,ke===ie.anchorIndex&&(pe=ge.offset)}).each(function(ge){ge.offset-=pe}),W(ye,!1,ae._fullLayout._invScaleX,ae._fullLayout._invScaleY),se?ye:ye.node()};var R=/<extra>([\s\S]*)<\/extra>/;function U(Y,ie){var se=ie.gd,ae=se._fullLayout,ue=ie.hovermode,ve=ie.rotateLabels,ye=ie.bgColor,de=ie.container,pe=ie.outerContainer,ge=ie.commonLabelOpts||{};if(Y.length===0)return[[]];var ke=ie.fontFamily||x.HOVERFONT,Ee=ie.fontSize||x.HOVERFONTSIZE,me=ie.fontWeight||ae.font.weight,oe=ie.fontStyle||ae.font.style,re=ie.fontVariant||ae.font.variant,fe=ie.fontTextcase||ae.font.textcase,Se=ie.fontLineposition||ae.font.lineposition,be=ie.fontShadow||ae.font.shadow,we=Y[0],Me=we.xa,Ie=we.ya,Oe=ue.charAt(0),he=Oe+"Label",_e=we[he];if(_e===void 0&&Me.type==="multicategory")for(var Ae=0;Ae<Y.length&&(_e=Y[Ae][he])===void 0;Ae++);var De=K(se,pe),Le=De.top,Be=De.width,Ve=De.height,Ze=_e!==void 0&&we.distance<=ie.hoverdistance&&(ue==="x"||ue==="y");if(Ze){var rt,it,dt=!0;for(rt=0;rt<Y.length;rt++)if(dt&&Y[rt].zLabel===void 0&&(dt=!1),it=Y[rt].hoverinfo||Y[rt].trace.hoverinfo){var mt=Array.isArray(it)?it:it.split("+");if(mt.indexOf("all")===-1&&mt.indexOf(ue)===-1){Ze=!1;break}}dt&&(Ze=!1)}var ht=de.selectAll("g.axistext").data(Ze?[0]:[]);ht.enter().append("g").classed("axistext",!0),ht.exit().remove();var Qe={minX:0,maxX:0,minY:0,maxY:0};if(ht.each(function(){var Ft=A.select(this),Ln=T.ensureSingle(Ft,"path","",function(pn){pn.style({"stroke-width":"1px"})}),bn=T.ensureSingle(Ft,"text","",function(pn){pn.attr("data-notex",1)}),hn=ge.bgcolor||a.defaultLine,Kt=ge.bordercolor||a.contrast(hn),sn=a.contrast(hn),Qt=ge.font,cn={weight:Qt.weight||me,style:Qt.style||oe,variant:Qt.variant||re,textcase:Qt.textcase||fe,lineposition:Qt.lineposition||Se,shadow:Qt.shadow||be,family:Qt.family||ke,size:Qt.size||Ee,color:Qt.color||sn};Ln.style({fill:hn,stroke:Kt}),bn.text(_e).call(r.font,cn).call(i.positionText,0,0).call(i.convertToTspans,se),Ft.attr("transform","");var vn,xn,An=K(se,bn.node());if(ue==="x"){var Sn=Me.side==="top"?"-":"";bn.attr("text-anchor","middle").call(i.positionText,0,Me.side==="top"?Le-An.bottom-S-w:Le-An.top+S+w),vn=Me._offset+(we.x0+we.x1)/2,xn=Ie._offset+(Me.side==="top"?0:Ie._length);var Tn=An.width/2+w,Rn=vn;vn<Tn?Rn=Tn:vn>ae.width-Tn&&(Rn=ae.width-Tn),Ln.attr("d","M"+(vn-Rn)+",0L"+(vn-Rn+S)+","+Sn+S+"H"+Tn+"v"+Sn+(2*w+An.height)+"H"+-Tn+"V"+Sn+S+"H"+(vn-Rn-S)+"Z"),vn=Rn,Qe.minX=vn-Tn,Qe.maxX=vn+Tn,Me.side==="top"?(Qe.minY=xn-(2*w+An.height),Qe.maxY=xn-w):(Qe.minY=xn+w,Qe.maxY=xn+(2*w+An.height))}else{var In,Xn,Vn;Ie.side==="right"?(In="start",Xn=1,Vn="",vn=Me._offset+Me._length):(In="end",Xn=-1,Vn="-",vn=Me._offset),xn=Ie._offset+(we.y0+we.y1)/2,bn.attr("text-anchor",In),Ln.attr("d","M0,0L"+Vn+S+","+S+"V"+(w+An.height/2)+"h"+Vn+(2*w+An.width)+"V-"+(w+An.height/2)+"H"+Vn+S+"V-"+S+"Z"),Qe.minY=xn-(w+An.height/2),Qe.maxY=xn+(w+An.height/2),Ie.side==="right"?(Qe.minX=vn+S,Qe.maxX=vn+S+(2*w+An.width)):(Qe.minX=vn-S-(2*w+An.width),Qe.maxX=vn-S);var er,Wn=An.height/2,fr=Le-An.top-Wn,Jt="clip"+ae._uid+"commonlabel"+Ie._id;if(vn<An.width+2*w+S){er="M-"+(S+w)+"-"+Wn+"h-"+(An.width-w)+"V"+Wn+"h"+(An.width-w)+"Z";var en=An.width-vn+w;i.positionText(bn,en,fr),In==="end"&&bn.selectAll("tspan").each(function(){var pn=A.select(this),Cn=r.tester.append("text").text(pn.text()).call(r.font,cn),jn=K(se,Cn.node());Math.round(jn.width)<Math.round(An.width)&&pn.attr("x",en-jn.width),Cn.remove()})}else i.positionText(bn,Xn*(w+S),fr),er=null;var Mn=ae._topclips.selectAll("#"+Jt).data(er?[0]:[]);Mn.enter().append("clipPath").attr("id",Jt).append("path"),Mn.exit().remove(),Mn.select("path").attr("d",er),r.setClipUrl(bn,er?Jt:null,se)}Ft.attr("transform",p(vn,xn))}),u.isUnifiedHover(ue)){de.selectAll("g.hovertext").remove();var Je=Y.filter(function(Ft){return Ft.hoverinfo!=="none"});if(Je.length===0)return[];var wt=ae.hoverlabel,Pt=wt.font,It={showlegend:!0,legend:{title:{text:_e,font:Pt},font:Pt,bgcolor:wt.bgcolor,bordercolor:wt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ae.legend?ae.legend.traceorder:void 0,orientation:"v"}},At={font:Pt};d(It,At,se._fullData);var qe=At.legend;qe.entries=[];for(var Ye=0;Ye<Je.length;Ye++){var Ne=Je[Ye];if(Ne.hoverinfo!=="none"){var We=D(Ne,!0,ue,ae,_e),at=We[0],tt=We[1];Ne.name=tt,Ne.text=tt!==""?tt+" : "+at:at;var Re=Ne.cd[Ne.index];Re&&(Re.mc&&(Ne.mc=Re.mc),Re.mcc&&(Ne.mc=Re.mcc),Re.mlc&&(Ne.mlc=Re.mlc),Re.mlcc&&(Ne.mlc=Re.mlcc),Re.mlw&&(Ne.mlw=Re.mlw),Re.mrc&&(Ne.mrc=Re.mrc),Re.dir&&(Ne.dir=Re.dir)),Ne._distinct=!0,qe.entries.push([Ne])}}qe.entries.sort(function(Ft,Ln){return Ft[0].trace.index-Ln[0].trace.index}),qe.layer=de,qe._inHover=!0,qe._groupTitleFont=wt.grouptitlefont,m(se,qe);var Fe,nt,Ge,ut,pt=de.select("g.legend"),gt=K(se,pt.node()),ct=gt.width+2*w,Tt=gt.height+2*w,vt=Je[0],kt=(vt.x0+vt.x1)/2,Lt=(vt.y0+vt.y1)/2,Ct=!(h.traceIs(vt.trace,"bar-like")||h.traceIs(vt.trace,"box-violin"));Oe==="y"?Ct?(nt=Lt-w,Fe=Lt+w):(nt=Math.min.apply(null,Je.map(function(Ft){return Math.min(Ft.y0,Ft.y1)})),Fe=Math.max.apply(null,Je.map(function(Ft){return Math.max(Ft.y0,Ft.y1)}))):nt=Fe=T.mean(Je.map(function(Ft){return(Ft.y0+Ft.y1)/2}))-Tt/2,Oe==="x"?Ct?(Ge=kt+w,ut=kt-w):(Ge=Math.max.apply(null,Je.map(function(Ft){return Math.max(Ft.x0,Ft.x1)})),ut=Math.min.apply(null,Je.map(function(Ft){return Math.min(Ft.x0,Ft.x1)}))):Ge=ut=T.mean(Je.map(function(Ft){return(Ft.x0+Ft.x1)/2}))-ct/2;var Dt,Gt,tn=Me._offset,jt=Ie._offset;return ut+=tn-ct,nt+=jt-Tt,Dt=(Ge+=tn)+ct<Be&&Ge>=0?Ge:ut+ct<Be&&ut>=0?ut:tn+ct<Be?tn:Ge-kt<kt-ut+ct?Be-ct:0,Dt+=w,Gt=(Fe+=jt)+Tt<Ve&&Fe>=0?Fe:nt+Tt<Ve&&nt>=0?nt:jt+Tt<Ve?jt:Fe-Lt<Lt-nt+Tt?Ve-Tt:0,Gt+=w,pt.attr("transform",p(Dt-1,Gt-1)),pt}var Wt=de.selectAll("g.hovertext").data(Y,function(Ft){return O(Ft)});return Wt.enter().append("g").classed("hovertext",!0).each(function(){var Ft=A.select(this);Ft.append("rect").call(a.fill,a.addOpacity(ye,.8)),Ft.append("text").classed("name",!0),Ft.append("path").style("stroke-width","1px"),Ft.append("text").classed("nums",!0).call(r.font,{weight:me,style:oe,variant:re,textcase:fe,lineposition:Se,shadow:be,family:ke,size:Ee})}),Wt.exit().remove(),Wt.each(function(Ft){var Ln=A.select(this).attr("transform",""),bn=Ft.color;Array.isArray(bn)&&(bn=bn[Ft.eventData[0].pointNumber]);var hn=Ft.bgcolor||bn,Kt=a.combine(a.opacity(hn)?hn:a.defaultLine,ye),sn=a.combine(a.opacity(bn)?bn:a.defaultLine,ye),Qt=Ft.borderColor||a.contrast(Kt),cn=D(Ft,Ze,ue,ae,_e,Ln),vn=cn[0],xn=cn[1],An=Ln.select("text.nums").call(r.font,{family:Ft.fontFamily||ke,size:Ft.fontSize||Ee,color:Ft.fontColor||Qt,weight:Ft.fontWeight||me,style:Ft.fontStyle||oe,variant:Ft.fontVariant||re,textcase:Ft.fontTextcase||fe,lineposition:Ft.fontLineposition||Se,shadow:Ft.fontShadow||be}).text(vn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se),Sn=Ln.select("text.name"),Tn=0,Rn=0;if(xn&&xn!==vn){Sn.call(r.font,{family:Ft.fontFamily||ke,size:Ft.fontSize||Ee,color:sn,weight:Ft.fontWeight||me,style:Ft.fontStyle||oe,variant:Ft.fontVariant||re,textcase:Ft.fontTextcase||fe,lineposition:Ft.fontLineposition||Se,shadow:Ft.fontShadow||be}).text(xn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se);var In=K(se,Sn.node());Tn=In.width+2*w,Rn=In.height+2*w}else Sn.remove(),Ln.select("rect").remove();Ln.select("path").style({fill:Kt,stroke:Qt});var Xn=Ft.xa._offset+(Ft.x0+Ft.x1)/2,Vn=Ft.ya._offset+(Ft.y0+Ft.y1)/2,er=Math.abs(Ft.x1-Ft.x0),Wn=Math.abs(Ft.y1-Ft.y0),fr=K(se,An.node()),Jt=fr.width/ae._invScaleX,en=fr.height/ae._invScaleY;Ft.ty0=(Le-fr.top)/ae._invScaleY,Ft.bx=Jt+2*w,Ft.by=Math.max(en+2*w,Rn),Ft.anchor="start",Ft.txwidth=Jt,Ft.tx2width=Tn,Ft.offset=0;var Mn,pn,Cn=(Jt+S+w+Tn)*ae._invScaleX;if(ve)Ft.pos=Xn,Mn=Vn+Wn/2+Cn<=Ve,pn=Vn-Wn/2-Cn>=0,Ft.idealAlign!=="top"&&Mn||!pn?Mn?(Vn+=Wn/2,Ft.anchor="start"):Ft.anchor="middle":(Vn-=Wn/2,Ft.anchor="end"),Ft.crossPos=Vn;else{if(Ft.pos=Vn,Mn=Xn+er/2+Cn<=Be,pn=Xn-er/2-Cn>=0,Ft.idealAlign!=="left"&&Mn||!pn)if(Mn)Xn+=er/2,Ft.anchor="start";else{Ft.anchor="middle";var jn=Cn/2,Bn=Xn+jn-Be,Yn=Xn-jn;Bn>0&&(Xn-=Bn),Yn<0&&(Xn+=-Yn)}else Xn-=er/2,Ft.anchor="end";Ft.crossPos=Xn}An.attr("text-anchor",Ft.anchor),Tn&&Sn.attr("text-anchor",Ft.anchor),Ln.attr("transform",p(Xn,Vn)+(ve?s(g):""))}),{hoverLabels:Wt,commonLabelBoundingBox:Qe}}function D(Y,ie,se,ae,ue,ve){var ye="",de="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=T.templateString(Y.name,Y.trace._meta)),ye=te(Y.name,Y.nameLength));var pe=se.charAt(0),ge=pe==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(de+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(de+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(de+=(de?"z: ":"")+Y.zLabel)):ie&&Y[pe+"Label"]===ue?de=Y[ge+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(de=Y.yLabel):de=Y.yLabel===void 0?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")",!Y.text&&Y.text!==0||Array.isArray(Y.text)||(de+=(de?"<br>":"")+Y.text),Y.extraText!==void 0&&(de+=(de?"<br>":"")+Y.extraText),ve&&de===""&&!Y.hovertemplate&&(ye===""&&ve.remove(),de=ye);var ke=Y.hovertemplate||!1;if(ke){var Ee=Y.hovertemplateLabels||Y;Y[pe+"Label"]!==ue&&(Ee[pe+"other"]=Ee[pe+"Val"],Ee[pe+"otherLabel"]=Ee[pe+"Label"]),de=(de=T.hovertemplateString(ke,Ee,ae._d3locale,Y.eventData[0]||{},Y.trace._meta)).replace(R,function(me,oe){return ye=te(oe,Y.nameLength),""})}return[de,ye]}function N(Y,ie){var se=0,ae=Y.offset;return ie&&(ae*=-f,se=Y.offset*_),{x:se,y:ae}}function W(Y,ie,se,ae){var ue=function(ye){return ye*se},ve=function(ye){return ye*ae};Y.each(function(ye){var de=A.select(this);if(ye.del)return de.remove();var pe,ge,ke,Ee,me=de.select("text.nums"),oe=ye.anchor,re=oe==="end"?-1:1,fe=(Ee=(ke=(ge={start:1,end:-1,middle:0}[(pe=ye).anchor])*(S+w))+ge*(pe.txwidth+w),pe.anchor==="middle"&&(ke-=pe.tx2width/2,Ee+=pe.txwidth/2+w),{alignShift:ge,textShiftX:ke,text2ShiftX:Ee}),Se=N(ye,ie),be=Se.x,we=Se.y,Me=oe==="middle";de.select("path").attr("d",Me?"M-"+ue(ye.bx/2+ye.tx2width/2)+","+ve(we-ye.by/2)+"h"+ue(ye.bx)+"v"+ve(ye.by)+"h-"+ue(ye.bx)+"Z":"M0,0L"+ue(re*S+be)+","+ve(S+we)+"v"+ve(ye.by/2-S)+"h"+ue(re*ye.bx)+"v-"+ve(ye.by)+"H"+ue(re*S+be)+"V"+ve(we-S)+"Z");var Ie=be+fe.textShiftX,Oe=we+ye.ty0-ye.by/2+w,he=ye.textAlign||"auto";he!=="auto"&&(he==="left"&&oe!=="start"?(me.attr("text-anchor","start"),Ie=Me?-ye.bx/2-ye.tx2width/2+w:-ye.bx-w):he==="right"&&oe!=="end"&&(me.attr("text-anchor","end"),Ie=Me?ye.bx/2-ye.tx2width/2-w:ye.bx+w)),me.call(i.positionText,ue(Ie),ve(Oe)),ye.tx2width&&(de.select("text.name").call(i.positionText,ue(fe.text2ShiftX+fe.alignShift*w+be),ve(we+ye.ty0-ye.by/2+w)),de.select("rect").call(r.setRect,ue(fe.text2ShiftX+(fe.alignShift-1)*ye.tx2width/2+be),ve(we-ye.by/2-1),ue(ye.tx2width),ve(ye.by+2)))})}function F(Y,ie){var se=Y.index,ae=Y.trace||{},ue=Y.cd[0],ve=Y.cd[se]||{};function ye(me){return me||k(me)&&me===0}var de=Array.isArray(se)?function(me,oe){var re=T.castOption(ue,se,me);return ye(re)?re:T.extractOption({},ae,"",oe)}:function(me,oe){return T.extractOption(ve,ae,me,oe)};function pe(me,oe,re){var fe=de(oe,re);ye(fe)&&(Y[me]=fe)}if(pe("hoverinfo","hi","hoverinfo"),pe("bgcolor","hbg","hoverlabel.bgcolor"),pe("borderColor","hbc","hoverlabel.bordercolor"),pe("fontFamily","htf","hoverlabel.font.family"),pe("fontSize","hts","hoverlabel.font.size"),pe("fontColor","htc","hoverlabel.font.color"),pe("fontWeight","htw","hoverlabel.font.weight"),pe("fontStyle","hty","hoverlabel.font.style"),pe("fontVariant","htv","hoverlabel.font.variant"),pe("nameLength","hnl","hoverlabel.namelength"),pe("textAlign","hta","hoverlabel.align"),Y.posref=ie==="y"||ie==="closest"&&ae.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=T.constrain(Y.x0,0,Y.xa._length),Y.x1=T.constrain(Y.x1,0,Y.xa._length),Y.y0=T.constrain(Y.y0,0,Y.ya._length),Y.y1=T.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:c.hoverLabelText(Y.xa,Y.xLabelVal,ae.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:c.hoverLabelText(Y.ya,Y.yLabelVal,ae.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!(isNaN(Y.xerr)||Y.xa.type==="log"&&Y.xerr<=0)){var ge=c.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+ge+" / -"+c.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+=" \xB1 "+ge,ie==="x"&&(Y.distance+=1)}if(!(isNaN(Y.yerr)||Y.ya.type==="log"&&Y.yerr<=0)){var ke=c.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+ke+" / -"+c.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+=" \xB1 "+ke,ie==="y"&&(Y.distance+=1)}var Ee=Y.hoverinfo||Y.trace.hoverinfo;return Ee&&Ee!=="all"&&((Ee=Array.isArray(Ee)?Ee:Ee.split("+")).indexOf("x")===-1&&(Y.xLabel=void 0),Ee.indexOf("y")===-1&&(Y.yLabel=void 0),Ee.indexOf("z")===-1&&(Y.zLabel=void 0),Ee.indexOf("text")===-1&&(Y.text=void 0),Ee.indexOf("name")===-1&&(Y.name=void 0)),Y}function j(Y,ie,se){var ae,ue,ve=se.container,ye=se.fullLayout,de=ye._size,pe=se.event,ge=!!ie.hLinePoint,ke=!!ie.vLinePoint;if(ve.selectAll(".spikeline").remove(),ke||ge){var Ee=a.combine(ye.plot_bgcolor,ye.paper_bgcolor);if(ge){var me,oe,re=ie.hLinePoint;ae=re&&re.xa,(ue=re&&re.ya).spikesnap==="cursor"?(me=pe.pointerX,oe=pe.pointerY):(me=ae._offset+re.x,oe=ue._offset+re.y);var fe,Se,be=o.readability(re.color,Ee)<1.5?a.contrast(Ee):re.color,we=ue.spikemode,Me=ue.spikethickness,Ie=ue.spikecolor||be,Oe=c.getPxPosition(Y,ue);if(we.indexOf("toaxis")!==-1||we.indexOf("across")!==-1){if(we.indexOf("toaxis")!==-1&&(fe=Oe,Se=me),we.indexOf("across")!==-1){var he=ue._counterDomainMin,_e=ue._counterDomainMax;ue.anchor==="free"&&(he=Math.min(he,ue.position),_e=Math.max(_e,ue.position)),fe=de.l+he*de.w,Se=de.l+_e*de.w}ve.insert("line",":first-child").attr({x1:fe,x2:Se,y1:oe,y2:oe,"stroke-width":Me,stroke:Ie,"stroke-dasharray":r.dashStyle(ue.spikedash,Me)}).classed("spikeline",!0).classed("crisp",!0),ve.insert("line",":first-child").attr({x1:fe,x2:Se,y1:oe,y2:oe,"stroke-width":Me+2,stroke:Ee}).classed("spikeline",!0).classed("crisp",!0)}we.indexOf("marker")!==-1&&ve.insert("circle",":first-child").attr({cx:Oe+(ue.side!=="right"?Me:-Me),cy:oe,r:Me,fill:Ie}).classed("spikeline",!0)}if(ke){var Ae,De,Le=ie.vLinePoint;ae=Le&&Le.xa,ue=Le&&Le.ya,ae.spikesnap==="cursor"?(Ae=pe.pointerX,De=pe.pointerY):(Ae=ae._offset+Le.x,De=ue._offset+Le.y);var Be,Ve,Ze=o.readability(Le.color,Ee)<1.5?a.contrast(Ee):Le.color,rt=ae.spikemode,it=ae.spikethickness,dt=ae.spikecolor||Ze,mt=c.getPxPosition(Y,ae);if(rt.indexOf("toaxis")!==-1||rt.indexOf("across")!==-1){if(rt.indexOf("toaxis")!==-1&&(Be=mt,Ve=De),rt.indexOf("across")!==-1){var ht=ae._counterDomainMin,Qe=ae._counterDomainMax;ae.anchor==="free"&&(ht=Math.min(ht,ae.position),Qe=Math.max(Qe,ae.position)),Be=de.t+(1-Qe)*de.h,Ve=de.t+(1-ht)*de.h}ve.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Be,y2:Ve,"stroke-width":it,stroke:dt,"stroke-dasharray":r.dashStyle(ae.spikedash,it)}).classed("spikeline",!0).classed("crisp",!0),ve.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Be,y2:Ve,"stroke-width":it+2,stroke:Ee}).classed("spikeline",!0).classed("crisp",!0)}rt.indexOf("marker")!==-1&&ve.insert("circle",":first-child").attr({cx:Ae,cy:mt-(ae.side!=="top"?it:-it),r:it,fill:dt}).classed("spikeline",!0)}}}function q(Y,ie){return!ie||ie.vLinePoint!==Y._spikepoints.vLinePoint||ie.hLinePoint!==Y._spikepoints.hLinePoint}function te(Y,ie){return i.plainText(Y||"",{len:ie,allowedTags:["br","sub","sup","b","i","em"]})}function ee(Y,ie,se){var ae=ie[Y+"a"],ue=ie[Y+"Val"],ve=ie.cd[0];if(ae.type==="category"||ae.type==="multicategory")ue=ae._categoriesMap[ue];else if(ae.type==="date"){var ye=ie.trace[Y+"periodalignment"];if(ye){var de=ie.cd[ie.index],pe=de[Y+"Start"];pe===void 0&&(pe=de[Y]);var ge=de[Y+"End"];ge===void 0&&(ge=de[Y]);var ke=ge-pe;ye==="end"?ue+=ke:ye==="middle"&&(ue+=ke/2)}ue=ae.d2c(ue)}return ve&&ve.t&&ve.t.posLetter===ae._id&&(se.boxmode!=="group"&&se.violinmode!=="group"||(ue+=ve.t.dPos)),ue}function Q(Y){return Y.offsetTop+Y.clientTop}function J(Y){return Y.offsetLeft+Y.clientLeft}function K(Y,ie){var se=Y._fullLayout,ae=ie.getBoundingClientRect(),ue=ae.left,ve=ae.top,ye=ue+ae.width,de=ve+ae.height,pe=T.apply3DTransform(se._invTransform)(ue,ve),ge=T.apply3DTransform(se._invTransform)(ye,de),ke=pe[0],Ee=pe[1],me=ge[0],oe=ge[1];return{x:ke,y:Ee,width:me-ke,height:oe-Ee,top:Math.min(Ee,oe),left:Math.min(ke,me),right:Math.max(ke,me),bottom:Math.max(Ee,oe)}}},16132:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(10624).isUnifiedHover;X.exports=function(T,b,p,s){s=s||{};var t=b.legend;function i(n){s.font[n]||(s.font[n]=t?b.legend.font[n]:b.font[n])}b&&o(b.hovermode)&&(s.font||(s.font={}),i("size"),i("family"),i("color"),i("weight"),i("style"),i("variant"),t?(s.bgcolor||(s.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),p("hoverlabel.bgcolor",s.bgcolor),p("hoverlabel.bordercolor",s.bordercolor),p("hoverlabel.namelength",s.namelength),A.coerceFont(p,"hoverlabel.font",s.font),p("hoverlabel.align",s.align)}},41008:function(X,I,e){"use strict";var A=e(3400),k=e(65460);X.exports=function(o,T){function b(p,s){return T[p]!==void 0?T[p]:A.coerce(o,T,k,p,s)}return b("clickmode"),b("hoversubplots"),b("hovermode")}},93024:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(86476),T=e(10624),b=e(65460),p=e(83292);X.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:b},attributes:e(55756),layoutAttributes:b,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,i){return k.castOption(s,t,"hoverlabel."+i)},castHoverinfo:function(s,t,i){return k.castOption(s,i,"hoverinfo",function(n){return k.coerceHoverinfo({hoverinfo:n},{_module:s._module},t)})},hover:p.hover,unhover:o.unhover,loneHover:p.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:A.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(X,I,e){"use strict";var A=e(92456),k=e(25376),o=k({editType:"none"});o.family.dflt=A.HOVERFONT,o.size.dflt=A.HOVERFONTSIZE,X.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(X,I,e){"use strict";var A=e(3400),k=e(65460),o=e(41008),T=e(16132);X.exports=function(b,p){function s(r,a){return A.coerce(b,p,k,r,a)}o(b,p)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=p._has("mapbox"),i=p._has("geo"),n=p._basePlotModules.length;p.dragmode==="zoom"&&((t||i)&&n===1||t&&i&&n===2)&&(p.dragmode="pan"),T(b,p,s),A.coerceFont(s,"hoverlabel.grouptitlefont",p.hoverlabel.font)}},81976:function(X,I,e){"use strict";var A=e(3400),k=e(16132),o=e(65460);X.exports=function(T,b){k(T,b,function(p,s){return A.coerce(T,b,o,p,s)})}},12704:function(X,I,e){"use strict";var A=e(3400),k=e(53756).counter,o=e(86968).u,T=e(33816).idRegex,b=e(31780),p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(n,r,a){var l=r[a+"axes"],c=Object.keys((n._splomAxes||{})[a]||{});return Array.isArray(l)?l:c.length?c:void 0}function t(n,r,a,l,c,h){var u=r(n+"gap",a),x=r("domain."+n);r(n+"side",l);for(var d=new Array(c),m=x[0],g=(x[1]-m)/(c-u),y=g*(1-u),v=0;v<c;v++){var _=m+g*v;d[h?c-1-v:v]=[_,_+y]}return d}function i(n,r,a,l,c){var h,u=new Array(a);function x(d,m){r.indexOf(m)!==-1&&l[m]===void 0?(u[d]=m,l[m]=d):u[d]=""}if(Array.isArray(n))for(h=0;h<a;h++)x(h,n[h]);else for(x(0,c),h=1;h<a;h++)x(h,c+(h+1));return u}X.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(n,r){var a=n.grid||{},l=s(r,a,"x"),c=s(r,a,"y");if(n.grid||l||c){var h,u,x=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),d=Array.isArray(l),m=Array.isArray(c),g=d&&l!==a.xaxes&&m&&c!==a.yaxes;x?(h=a.subplots.length,u=a.subplots[0].length):(m&&(h=c.length),d&&(u=l.length));var y=b.newContainer(r,"grid"),v=C("rows",h),_=C("columns",u);if(v*_>1){x||d||m||C("pattern")==="independent"&&(x=!0),y._hasSubplotGrid=x;var f,S,w=C("roworder")==="top to bottom",E=x?.2:.1,P=x?.3:.1;g&&r._splomGridDflt&&(f=r._splomGridDflt.xside,S=r._splomGridDflt.yside),y._domains={x:t("x",C,E,f,_),y:t("y",C,P,S,v,w)}}else delete r.grid}function C(O,R){return A.coerce(a,y,p,O,R)}},contentDefaults:function(n,r){var a=r.grid;if(a&&a._domains){var l,c,h,u,x,d,m,g=n.grid||{},y=r._subplots,v=a._hasSubplotGrid,_=a.rows,f=a.columns,S=a.pattern==="independent",w=a._axisMap={};if(v){var E=g.subplots||[];d=a.subplots=new Array(_);var P=1;for(l=0;l<_;l++){var C=d[l]=new Array(f),O=E[l]||[];for(c=0;c<f;c++)if(S?(x=P===1?"xy":"x"+P+"y"+P,P++):x=O[c],C[c]="",y.cartesian.indexOf(x)!==-1){if(m=x.indexOf("y"),h=x.slice(0,m),u=x.slice(m),w[h]!==void 0&&w[h]!==c||w[u]!==void 0&&w[u]!==l)continue;C[c]=x,w[h]=c,w[u]=l}}}else{var R=s(r,g,"x"),U=s(r,g,"y");a.xaxes=i(R,y.xaxis,f,w,"x"),a.yaxes=i(U,y.yaxis,_,w,"y")}var D=a._anchors={},N=a.roworder==="top to bottom";for(var W in w){var F,j,q,te=W.charAt(0),ee=a[te+"side"];if(ee.length<8)D[W]="free";else if(te==="x"){if(ee.charAt(0)==="t"===N?(F=0,j=1,q=_):(F=_-1,j=-1,q=-1),v){var Q=w[W];for(l=F;l!==q;l+=j)if((x=d[l][Q])&&(m=x.indexOf("y"),x.slice(0,m)===W)){D[W]=x.slice(m);break}}else for(l=F;l!==q;l+=j)if(u=a.yaxes[l],y.cartesian.indexOf(W+u)!==-1){D[W]=u;break}}else if(ee.charAt(0)==="l"?(F=0,j=1,q=f):(F=f-1,j=-1,q=-1),v){var J=w[W];for(l=F;l!==q;l+=j)if((x=d[J][l])&&(m=x.indexOf("y"),x.slice(m)===W)){D[W]=x.slice(0,m);break}}else for(l=F;l!==q;l+=j)if(h=a.xaxes[l],y.cartesian.indexOf(h+W)!==-1){D[W]=h;break}}}}}},65760:function(X,I,e){"use strict";var A=e(33816),k=e(31780).templatedArray;e(36208),X.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",A.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",A.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(X,I,e){"use strict";var A=e(38248),k=e(36896);X.exports=function(o,T,b,p){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t){for(var i,n,r=o._fullLayout.images,a=T._id.charAt(0),l=0;l<r.length;l++)if(n="images["+l+"].",(i=r[l])[a+"ref"]===T._id){var c=i[a],h=i["size"+a],u=null,x=null;if(s){u=k(c,T.range);var d=h/Math.pow(10,u)/2;x=2*Math.log(d+Math.sqrt(1+d*d))/Math.LN10}else x=(u=Math.pow(10,c))*(Math.pow(10,h/2)-Math.pow(10,-h/2));A(u)?A(x)||(x=null):(u=null,x=null),p(n+a,u),p(n+"size"+a,x)}}}},25024:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(51272),T=e(65760);function b(p,s,t){function i(u,x){return A.coerce(p,s,T,u,x)}var n=i("source");if(!i("visible",!!n))return s;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var r={_fullLayout:t},a=["x","y"],l=0;l<2;l++){var c=a[l],h=k.coerceRef(p,s,r,c,"paper",void 0);h!=="paper"&&k.getFromId(r,h)._imgIndices.push(s._index),k.coercePosition(s,r,i,h,c,0)}return s}X.exports=function(p,s){o(p,s,{name:"images",handleItemDefaults:b})}},60963:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(54460),T=e(79811),b=e(9616);X.exports=function(p){var s,t,i=p._fullLayout,n=[],r={},a=[];for(t=0;t<i.images.length;t++){var l=i.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){s=T.ref2id(l.xref)+T.ref2id(l.yref);var c=i._plots[s];if(!c){a.push(l);continue}c.mainplot&&(s=c.mainplot.id),r[s]||(r[s]=[]),r[s].push(l)}else l.layer==="above"?n.push(l):a.push(l)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},u={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(f){var S=A.select(this);if(this._imgSrc!==f.source)if(S.attr("xmlns",b.svg),f.source&&f.source.slice(0,5)==="data:")S.attr("xlink:href",f.source),this._imgSrc=f.source;else{var w=new Promise((function(E){var P=new Image;function C(){S.remove(),E()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=C,P.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var R=O.toDataURL("image/png");S.attr("xlink:href",R),E()},S.on("error",C),P.src=f.source,this._imgSrc=f.source}).bind(this));p._promises.push(w)}}function d(f){var S,w,E=A.select(this),P=o.getFromId(p,f.xref),C=o.getFromId(p,f.yref),O=o.getRefType(f.xref)==="domain",R=o.getRefType(f.yref)==="domain",U=i._size;S=P!==void 0?typeof f.xref=="string"&&O?P._length*f.sizex:Math.abs(P.l2p(f.sizex)-P.l2p(0)):f.sizex*U.w,w=C!==void 0?typeof f.yref=="string"&&R?C._length*f.sizey:Math.abs(C.l2p(f.sizey)-C.l2p(0)):f.sizey*U.h;var D,N,W=S*h[f.xanchor].offset,F=w*u[f.yanchor].offset,j=h[f.xanchor].sizing+u[f.yanchor].sizing;switch(D=P!==void 0?typeof f.xref=="string"&&O?P._length*f.x+P._offset:P.r2p(f.x)+P._offset:f.x*U.w+U.l,D+=W,N=C!==void 0?typeof f.yref=="string"&&R?C._length*(1-f.y)+C._offset:C.r2p(f.y)+C._offset:U.h-f.y*U.h+U.t,N+=F,f.sizing){case"fill":j+=" slice";break;case"stretch":j="none"}E.attr({x:D,y:N,width:S,height:w,preserveAspectRatio:j,opacity:f.opacity});var q=(P&&o.getRefType(f.xref)!=="domain"?P._id:"")+(C&&o.getRefType(f.yref)!=="domain"?C._id:"");k.setClipUrl(E,q?"clip"+i._uid+q:null,p)}var m=i._imageLowerLayer.selectAll("image").data(a),g=i._imageUpperLayer.selectAll("image").data(n);m.enter().append("image"),g.enter().append("image"),m.exit().remove(),g.exit().remove(),m.each(function(f){x.bind(this)(f),d.bind(this)(f)}),g.each(function(f){x.bind(this)(f),d.bind(this)(f)});var y=Object.keys(i._plots);for(t=0;t<y.length;t++){s=y[t];var v=i._plots[s];if(v.imagelayer){var _=v.imagelayer.selectAll("image").data(r[s]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(f){x.bind(this)(f),d.bind(this)(f)})}}}},7402:function(X,I,e){"use strict";X.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(X,I,e){"use strict";var A=e(25376),k=e(22548);X.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:A({editType:"legend"}),grouptitlefont:A({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:A({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(X){"use strict";X.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(31780),T=e(45464),b=e(3800),p=e(64859),s=e(42451);function t(i,n,r,a){var l=n[i]||{},c=o.newContainer(r,i);function h(j,q){return k.coerce(l,c,b,j,q)}var u=k.coerceFont(h,"font",r.font);if(h("bgcolor",r.paper_bgcolor),h("bordercolor"),h("visible")){for(var x,d=function(j,q){var te=x._input,ee=x;return k.coerce(te,ee,T,j,q)},m=r.font||{},g=k.coerceFont(h,"grouptitlefont",m,{overrideDflt:{size:Math.round(1.1*m.size)}}),y=0,v=!1,_="normal",f=(r.shapes||[]).filter(function(j){return j.showlegend}),S=a.concat(f).filter(function(j){return i===(j.legend||"legend")}),w=0;w<S.length;w++)if((x=S[w]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(y++,x.showlegend&&(v=!0,(!E&&A.traceIs(x,"pie-like")||x._input.showlegend===!0)&&y++),k.coerceFont(d,"legendgrouptitle.font",g)),(!E&&A.traceIs(x,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(_=s.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(_=s.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var P=k.coerce(n,r,p,"showlegend",v&&y>(i==="legend"?1:0));if(P===!1&&(r[i]=void 0),(P!==!1||l.uirevision)&&(h("uirevision",r.uirevision),P!==!1)){h("borderwidth");var C,O,R,U=h("orientation")==="h",D=h("yref")==="paper",N=h("xref")==="paper",W="left";if(U?(C=0,A.getComponentMethod("rangeslider","isVisible")(n.xaxis)?D?(O=1.1,R="bottom"):(O=1,R="top"):D?(O=-.1,R="top"):(O=0,R="bottom")):(O=1,R="auto",N?C=1.02:(C=1,W="right")),k.coerce(l,c,{x:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:C}},"x"),k.coerce(l,c,{y:{valType:"number",editType:"legend",min:D?-2:0,max:D?3:1,dflt:O}},"y"),h("traceorder",_),s.isGrouped(r[i])&&h("tracegroupgap"),h("entrywidth"),h("entrywidthmode"),h("indentation"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("xanchor",W),h("yanchor",R),h("valign"),k.noneOrAll(l,c,["x","y"]),h("title.text")){h("title.side",U?"left":"top");var F=k.extendFlat({},u,{size:k.bigFont(u.size)});k.coerceFont(h,"title.font",F)}}}}X.exports=function(i,n,r){var a,l=r.slice(),c=n.shapes;if(c)for(a=0;a<c.length;a++){var h=c[a];if(h.showlegend){var u={_input:h._input,visible:h.visible,showlegend:h.showlegend,legend:h.legend};l.push(u)}}var x=["legend"];for(a=0;a<l.length;a++)k.pushUnique(x,l[a].legend);for(n._legends=[],a=0;a<x.length;a++){var d=x[a];t(d,i,n,l),n[d]&&n[d].visible&&(n[d]._id=d),n._legends.push(d)}}},31140:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(7316),T=e(24040),b=e(95924),p=e(86476),s=e(43616),t=e(76308),i=e(72736),n=e(33048),r=e(65196),a=e(84284),l=a.LINE_SPACING,c=a.FROM_TL,h=a.FROM_BR,u=e(35456),x=e(2012),d=e(42451),m=1,g=/^legend[0-9]*$/;function y(R,U){var D,N,W=U||{},F=R._fullLayout,j=O(W),q=W._inHover;if(q?(N=W.layer,D="hover"):(N=F._infolayer,D=j),N){var te;if(D+=F._uid,R._legendMouseDownTime||(R._legendMouseDownTime=0),q){if(!W.entries)return;te=u(W.entries,W)}else{for(var ee=(R.calcdata||[]).slice(),Q=F.shapes,J=0;J<Q.length;J++){var K=Q[J];if(K.showlegend){var Y={_isShape:!0,_fullInput:K,index:K._index,name:K.name||K.label.text||"shape "+K._index,legend:K.legend,legendgroup:K.legendgroup,legendgrouptitle:K.legendgrouptitle,legendrank:K.legendrank,legendwidth:K.legendwidth,showlegend:K.showlegend,visible:K.visible,opacity:K.opacity,mode:K.type==="line"?"lines":"markers",line:K.line,marker:{line:K.line,color:K.fillcolor,size:12,symbol:K.type==="rect"?"square":K.type==="circle"?"circle":"hexagon2"}};ee.push([{trace:Y}])}}te=F.showlegend&&u(ee,W,F._legends.length>1)}var ie=F.hiddenlabels||[];if(!(q||F.showlegend&&te.length))return N.selectAll("."+j).remove(),F._topdefs.select("#"+D).remove(),o.autoMargin(R,j);var se=k.ensureSingle(N,"g",j,function(Ee){q||Ee.attr("pointer-events","all")}),ae=k.ensureSingleById(F._topdefs,"clipPath",D,function(Ee){Ee.append("rect")}),ue=k.ensureSingle(se,"rect","bg",function(Ee){Ee.attr("shape-rendering","crispEdges")});ue.call(t.stroke,W.bordercolor).call(t.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px");var ve,ye=k.ensureSingle(se,"g","scrollbox"),de=W.title;W._titleWidth=0,W._titleHeight=0,de.text?((ve=k.ensureSingle(ye,"text",j+"titletext")).attr("text-anchor","start").call(s.font,de.font).text(de.text),E(ve,ye,R,W,m)):ye.selectAll("."+j+"titletext").remove();var pe=k.ensureSingle(se,"rect","scrollbar",function(Ee){Ee.attr(r.scrollBarEnterAttrs).call(t.fill,r.scrollBarColor)}),ge=ye.selectAll("g.groups").data(te);ge.enter().append("g").attr("class","groups"),ge.exit().remove();var ke=ge.selectAll("g.traces").data(k.identity);ke.enter().append("g").attr("class","traces"),ke.exit().remove(),ke.style("opacity",function(Ee){var me=Ee[0].trace;return T.traceIs(me,"pie-like")?ie.indexOf(Ee[0].label)!==-1?.5:1:me.visible==="legendonly"?.5:1}).each(function(){A.select(this).call(f,R,W)}).call(x,R,W).each(function(){q||A.select(this).call(w,R,j)}),k.syncOrAsync([o.previousPromises,function(){return function(Ee,me,oe,re){var fe=Ee._fullLayout,Se=O(re);re||(re=fe[Se]);var be=fe._size,we=d.isVertical(re),Me=d.isGrouped(re),Ie=re.entrywidthmode==="fraction",Oe=re.borderwidth,he=2*Oe,_e=r.itemGap,Ae=re.indentation+re.itemwidth+2*_e,De=2*(Oe+_e),Le=C(re),Be=re.y<0||re.y===0&&Le==="top",Ve=re.y>1||re.y===1&&Le==="bottom",Ze=re.tracegroupgap,rt={};re._maxHeight=Math.max(Be||Ve?fe.height/2:be.h,30);var it=0;re._width=0,re._height=0;var dt=function(pt){var gt=0,ct=0,Tt=pt.title.side;return Tt&&(Tt.indexOf("left")!==-1&&(gt=pt._titleWidth),Tt.indexOf("top")!==-1&&(ct=pt._titleHeight)),[gt,ct]}(re);if(we)oe.each(function(pt){var gt=pt[0].height;s.setTranslate(this,Oe+dt[0],Oe+dt[1]+re._height+gt/2+_e),re._height+=gt,re._width=Math.max(re._width,pt[0].width)}),it=Ae+re._width,re._width+=_e+Ae+he,re._height+=De,Me&&(me.each(function(pt,gt){s.setTranslate(this,0,gt*re.tracegroupgap)}),re._height+=(re._lgroupsLength-1)*re.tracegroupgap);else{var mt=P(re),ht=re.x<0||re.x===0&&mt==="right",Qe=re.x>1||re.x===1&&mt==="left",Je=Ve||Be,wt=fe.width/2;re._maxWidth=Math.max(ht?Je&&mt==="left"?be.l+be.w:wt:Qe?Je&&mt==="right"?be.r+be.w:wt:be.w,2*Ae);var Pt=0,It=0;oe.each(function(pt){var gt=v(pt,re,Ae);Pt=Math.max(Pt,gt),It+=gt}),it=null;var At=0;if(Me){var qe=0,Ye=0,Ne=0;me.each(function(){var pt=0,gt=0;A.select(this).selectAll("g.traces").each(function(Tt){var vt=v(Tt,re,Ae),kt=Tt[0].height;s.setTranslate(this,dt[0],dt[1]+Oe+_e+kt/2+gt),gt+=kt,pt=Math.max(pt,vt),rt[Tt[0].trace.legendgroup]=pt});var ct=pt+_e;Ye>0&&ct+Oe+Ye>re._maxWidth?(At=Math.max(At,Ye),Ye=0,Ne+=qe+Ze,qe=gt):qe=Math.max(qe,gt),s.setTranslate(this,Ye,Ne),Ye+=ct}),re._width=Math.max(At,Ye)+Oe,re._height=Ne+qe+De}else{var We=oe.size(),at=It+he+(We-1)*_e<re._maxWidth,tt=0,Re=0,Fe=0,nt=0;oe.each(function(pt){var gt=pt[0].height,ct=v(pt,re,Ae),Tt=at?ct:Pt;Ie||(Tt+=_e),Tt+Oe+Re-_e>=re._maxWidth&&(At=Math.max(At,nt),Re=0,Fe+=tt,re._height+=tt,tt=0),s.setTranslate(this,dt[0]+Oe+Re,dt[1]+Oe+Fe+gt/2+_e),nt=Re+ct+_e,Re+=Tt,tt=Math.max(tt,gt)}),at?(re._width=Re+he,re._height=tt+De):(re._width=Math.max(At,nt)+he,re._height+=tt+De)}}re._width=Math.ceil(Math.max(re._width+dt[0],re._titleWidth+2*(Oe+r.titlePad))),re._height=Math.ceil(Math.max(re._height+dt[1],re._titleHeight+2*(Oe+r.itemGap))),re._effHeight=Math.min(re._height,re._maxHeight);var Ge=Ee._context.edits,ut=Ge.legendText||Ge.legendPosition;oe.each(function(pt){var gt=A.select(this).select("."+Se+"toggle"),ct=pt[0].height,Tt=pt[0].trace.legendgroup,vt=v(pt,re,Ae);Me&&Tt!==""&&(vt=rt[Tt]);var kt=ut?Ae:it||vt;we||Ie||(kt+=_e/2),s.setRect(gt,0,-ct/2,kt,ct)})}(R,ge,ke,W)},function(){var Ee,me,oe,re,fe=F._size,Se=W.borderwidth,be=W.xref==="paper",we=W.yref==="paper";if(de.text&&function(Je,wt,Pt){if(wt.title.side==="top center"||wt.title.side==="top right"){var It=wt.title.font.size*l,At=0,qe=Je.node(),Ye=s.bBox(qe).width;wt.title.side==="top center"?At=.5*(wt._width-2*Pt-2*r.titlePad-Ye):wt.title.side==="top right"&&(At=wt._width-2*Pt-2*r.titlePad-Ye),i.positionText(Je,Pt+r.titlePad+At,Pt+It)}}(ve,W,Se),!q){var Me,Ie;Me=be?fe.l+fe.w*W.x-c[P(W)]*W._width:F.width*W.x-c[P(W)]*W._width,Ie=we?fe.t+fe.h*(1-W.y)-c[C(W)]*W._effHeight:F.height*(1-W.y)-c[C(W)]*W._effHeight;var Oe=function(Je,wt,Pt,It){var At=Je._fullLayout,qe=At[wt],Ye=P(qe),Ne=C(qe),We=qe.xref==="paper",at=qe.yref==="paper";Je._fullLayout._reservedMargin[wt]={};var tt=qe.y<.5?"b":"t",Re=qe.x<.5?"l":"r",Fe={r:At.width-Pt,l:Pt+qe._width,b:At.height-It,t:It+qe._effHeight};if(We&&at)return o.autoMargin(Je,wt,{x:qe.x,y:qe.y,l:qe._width*c[Ye],r:qe._width*h[Ye],b:qe._effHeight*h[Ne],t:qe._effHeight*c[Ne]});We?Je._fullLayout._reservedMargin[wt][tt]=Fe[tt]:at||qe.orientation==="v"?Je._fullLayout._reservedMargin[wt][Re]=Fe[Re]:Je._fullLayout._reservedMargin[wt][tt]=Fe[tt]}(R,j,Me,Ie);if(Oe)return;if(F.margin.autoexpand){var he=Me,_e=Ie;Me=be?k.constrain(Me,0,F.width-W._width):he,Ie=we?k.constrain(Ie,0,F.height-W._effHeight):_e,Me!==he&&k.log("Constrain "+j+".x to make legend fit inside graph"),Ie!==_e&&k.log("Constrain "+j+".y to make legend fit inside graph")}s.setTranslate(se,Me,Ie)}if(pe.on(".drag",null),se.on("wheel",null),q||W._height<=W._maxHeight||R._context.staticPlot){var Ae=W._effHeight;q&&(Ae=W._height),ue.attr({width:W._width-Se,height:Ae-Se,x:Se/2,y:Se/2}),s.setTranslate(ye,0,0),ae.select("rect").attr({width:W._width-2*Se,height:Ae-2*Se,x:Se,y:Se}),s.setClipUrl(ye,D,R),s.setRect(pe,0,0,0,0),delete W._scrollY}else{var De,Le,Be,Ve=Math.max(r.scrollBarMinHeight,W._effHeight*W._effHeight/W._height),Ze=W._effHeight-Ve-2*r.scrollBarMargin,rt=W._height-W._effHeight,it=Ze/rt,dt=Math.min(W._scrollY||0,rt);ue.attr({width:W._width-2*Se+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-Se,x:Se/2,y:Se/2}),ae.select("rect").attr({width:W._width-2*Se+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-2*Se,x:Se,y:Se+dt}),s.setClipUrl(ye,D,R),Qe(dt,Ve,it),se.on("wheel",function(){Qe(dt=k.constrain(W._scrollY+A.event.deltaY/Ze*rt,0,rt),Ve,it),dt!==0&&dt!==rt&&A.event.preventDefault()});var mt=A.behavior.drag().on("dragstart",function(){var Je=A.event.sourceEvent;De=Je.type==="touchstart"?Je.changedTouches[0].clientY:Je.clientY,Be=dt}).on("drag",function(){var Je=A.event.sourceEvent;Je.buttons===2||Je.ctrlKey||(Le=Je.type==="touchmove"?Je.changedTouches[0].clientY:Je.clientY,dt=function(wt,Pt,It){var At=(It-Pt)/it+wt;return k.constrain(At,0,rt)}(Be,De,Le),Qe(dt,Ve,it))});pe.call(mt);var ht=A.behavior.drag().on("dragstart",function(){var Je=A.event.sourceEvent;Je.type==="touchstart"&&(De=Je.changedTouches[0].clientY,Be=dt)}).on("drag",function(){var Je=A.event.sourceEvent;Je.type==="touchmove"&&(Le=Je.changedTouches[0].clientY,dt=function(wt,Pt,It){var At=(Pt-It)/it+wt;return k.constrain(At,0,rt)}(Be,De,Le),Qe(dt,Ve,it))});ye.call(ht)}function Qe(Je,wt,Pt){W._scrollY=R._fullLayout[j]._scrollY=Je,s.setTranslate(ye,0,-Je),s.setRect(pe,W._width,r.scrollBarMargin+Je*Pt,r.scrollBarWidth,wt),ae.select("rect").attr("y",Se+Je)}R._context.edits.legendPosition&&(se.classed("cursor-move",!0),p.init({element:se.node(),gd:R,prepFn:function(Je){if(Je.target!==pe.node()){var wt=s.getTranslate(se);oe=wt.x,re=wt.y}},moveFn:function(Je,wt){if(oe!==void 0&&re!==void 0){var Pt=oe+Je,It=re+wt;s.setTranslate(se,Pt,It),Ee=p.align(Pt,W._width,fe.l,fe.l+fe.w,W.xanchor),me=p.align(It+W._height,-W._height,fe.t+fe.h,fe.t,W.yanchor)}},doneFn:function(){if(Ee!==void 0&&me!==void 0){var Je={};Je[j+".x"]=Ee,Je[j+".y"]=me,T.call("_guiRelayout",R,Je)}},clickFn:function(Je,wt){var Pt=N.selectAll("g.traces").filter(function(){var It=this.getBoundingClientRect();return wt.clientX>=It.left&&wt.clientX<=It.right&&wt.clientY>=It.top&&wt.clientY<=It.bottom});Pt.size()>0&&_(R,se,Pt,Je,wt)}}))}],R)}}function v(R,U,D){var N=R[0],W=N.width,F=U.entrywidthmode,j=N.trace.legendwidth||U.entrywidth;return F==="fraction"?U._maxWidth*j:D+(j||W)}function _(R,U,D,N,W){var F=D.data()[0][0].trace,j={event:W,node:D.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};F._group&&(j.group=F._group),T.traceIs(F,"pie-like")&&(j.label=D.datum()[0].label);var q=b.triggerHandler(R,"plotly_legendclick",j);if(N===1){if(q===!1)return;U._clickTimeout=setTimeout(function(){R._fullLayout&&n(D,R,N)},R._context.doubleClickDelay)}else N===2&&(U._clickTimeout&&clearTimeout(U._clickTimeout),R._legendMouseDownTime=0,b.triggerHandler(R,"plotly_legenddoubleclick",j)!==!1&&q!==!1&&n(D,R,N))}function f(R,U,D){var N,W,F=O(D),j=R.data()[0][0],q=j.trace,te=T.traceIs(q,"pie-like"),ee=!D._inHover&&U._context.edits.legendText&&!te,Q=D._maxNameLength;j.groupTitle?(N=j.groupTitle.text,W=j.groupTitle.font):(W=D.font,D.entries?N=j.text:(N=te?j.label:q.name,q._meta&&(N=k.templateString(N,q._meta))));var J=k.ensureSingle(R,"text",F+"text");J.attr("text-anchor","start").call(s.font,W).text(ee?S(N,Q):N);var K=D.indentation+D.itemwidth+2*r.itemGap;i.positionText(J,K,0),ee?J.call(i.makeEditable,{gd:U,text:N}).call(E,R,U,D).on("edit",function(Y){this.text(S(Y,Q)).call(E,R,U,D);var ie=j.trace._fullInput||{},se={};if(T.hasTransform(ie,"groupby")){var ae=T.getTransformIndices(ie,"groupby"),ue=ae[ae.length-1],ve=k.keyedContainer(ie,"transforms["+ue+"].styles","target","value.name");ve.set(j.trace._group,Y),se=ve.constructUpdate()}else se.name=Y;return ie._isShape?T.call("_guiRelayout",U,"shapes["+q.index+"].name",se.name):T.call("_guiRestyle",U,se,q.index)}):E(J,R,U,D)}function S(R,U){var D=Math.max(4,U);if(R&&R.trim().length>=D/2)return R;for(var N=D-(R=R||"").length;N>0;N--)R+=" ";return R}function w(R,U,D){var N,W=U._context.doubleClickDelay,F=1,j=k.ensureSingle(R,"rect",D+"toggle",function(q){U._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(t.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(j.on("mousedown",function(){(N=new Date().getTime())-U._legendMouseDownTime<W?F+=1:(F=1,U._legendMouseDownTime=N)}),j.on("mouseup",function(){if(!U._dragged&&!U._editing){var q=U._fullLayout[D];new Date().getTime()-U._legendMouseDownTime>W&&(F=Math.max(F-1,1)),_(U,q,R,F,A.event)}}))}function E(R,U,D,N,W){N._inHover&&R.attr("data-notex",!0),i.convertToTspans(R,D,function(){(function(F,j,q,te){var ee=F.data()[0][0];if(q._inHover||!ee||ee.trace.showlegend){var Q=F.select("g[class*=math-group]"),J=Q.node(),K=O(q);q||(q=j._fullLayout[K]);var Y,ie,se=q.borderwidth,ae=(te===m?q.title.font:ee.groupTitle?ee.groupTitle.font:q.font).size*l;if(J){var ue=s.bBox(J);Y=ue.height,ie=ue.width,te===m?s.setTranslate(Q,se,se+.75*Y):s.setTranslate(Q,0,.25*Y)}else{var ve="."+K+(te===m?"title":"")+"text",ye=F.select(ve),de=i.lineCount(ye),pe=ye.node();if(Y=ae*de,ie=pe?s.bBox(pe).width:0,te===m)q.title.side==="left"&&(ie+=2*r.itemGap),i.positionText(ye,se+r.titlePad,se+ae);else{var ge=2*r.itemGap+q.indentation+q.itemwidth;ee.groupTitle&&(ge=r.itemGap,ie-=q.indentation+q.itemwidth),i.positionText(ye,ge,-ae*((de-1)/2-.3))}}te===m?(q._titleWidth=ie,q._titleHeight=Y):(ee.lineHeight=ae,ee.height=Math.max(Y,16)+3,ee.width=ie)}else F.remove()})(U,D,N,W)})}function P(R){return k.isRightAnchor(R)?"right":k.isCenterAnchor(R)?"center":"left"}function C(R){return k.isBottomAnchor(R)?"bottom":k.isMiddleAnchor(R)?"middle":"top"}function O(R){return R._id||"legend"}X.exports=function(R,U){if(U)y(R,U);else{var D=R._fullLayout,N=D._legends;D._infolayer.selectAll('[class^="legend"]').each(function(){var j=A.select(this),q=j.attr("class").split(" ")[0];q.match(g)&&N.indexOf(q)===-1&&j.remove()});for(var W=0;W<N.length;W++){var F=N[W];y(R,R._fullLayout[F])}}}},35456:function(X,I,e){"use strict";var A=e(24040),k=e(42451);X.exports=function(o,T,b){var p,s,t=T._inHover,i=k.isGrouped(T),n=k.isReversed(T),r={},a=[],l=!1,c={},h=0,u=0;function x(N,W,F){if(T.visible!==!1&&(!b||N===T._id))if(W!==""&&k.isGrouped(T))a.indexOf(W)===-1?(a.push(W),l=!0,r[W]=[F]):r[W].push(F);else{var j="~~i"+h;a.push(j),r[j]=[F],h++}}for(p=0;p<o.length;p++){var d=o[p],m=d[0],g=m.trace,y=g.legend,v=g.legendgroup;if(t||g.visible&&g.showlegend)if(A.traceIs(g,"pie-like"))for(c[v]||(c[v]={}),s=0;s<d.length;s++){var _=d[s].label;c[v][_]||(x(y,v,{label:_,color:d[s].color,i:d[s].i,trace:g,pts:d[s].pts}),c[v][_]=!0,u=Math.max(u,(_||"").length))}else x(y,v,m),u=Math.max(u,(g.name||"").length)}if(!a.length)return[];var f=!l||!i,S=[];for(p=0;p<a.length;p++){var w=r[a[p]];f?S.push(w[0]):S.push(w)}for(f&&(S=[S]),p=0;p<S.length;p++){var E=1/0;for(s=0;s<S[p].length;s++){var P=S[p][s].trace.legendrank;E>P&&(E=P)}S[p][0]._groupMinRank=E,S[p][0]._preGroupSort=p}var C=function(N,W){return N.trace.legendrank-W.trace.legendrank||N._preSort-W._preSort};for(S.forEach(function(N,W){N[0]._preGroupSort=W}),S.sort(function(N,W){return N[0]._groupMinRank-W[0]._groupMinRank||N[0]._preGroupSort-W[0]._preGroupSort}),p=0;p<S.length;p++){S[p].forEach(function(N,W){N._preSort=W}),S[p].sort(C);var O=S[p][0].trace,R=null;for(s=0;s<S[p].length;s++){var U=S[p][s].trace.legendgrouptitle;if(U&&U.text){R=U,t&&(U.font=T._groupTitleFont);break}}if(n&&S[p].reverse(),R){var D=!1;for(s=0;s<S[p].length;s++)if(A.traceIs(S[p][s].trace,"pie-like")){D=!0;break}S[p].unshift({i:-1,groupTitle:R,noClick:D,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:T.groupclick==="toggleitem"||O.visible}})}for(s=0;s<S[p].length;s++)S[p][s]=[S[p][s]]}return T._lgroupsLength=S.length,T._maxNameLength=u,S}},33048:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=k.pushUnique,T=!0;X.exports=function(b,p,s){var t=p._fullLayout;if(!p._dragged&&!p._editing){var i,n=t.legend.itemclick,r=t.legend.itemdoubleclick,a=t.legend.groupclick;if(s===1&&n==="toggle"&&r==="toggleothers"&&T&&p.data&&p._context.showTips&&k.notifier(k._(p,"Double-click on legend to isolate one trace"),"long"),T=!1,s===1?i=n:s===2&&(i=r),i){var l=a==="togglegroup",c=t.hiddenlabels?t.hiddenlabels.slice():[],h=b.data()[0][0];if(!h.groupTitle||!h.noClick){var u=p._fullData,x=(t.shapes||[]).filter(function(me){return me.showlegend}),d=u.concat(x),m=h.trace;m._isShape&&(m=m._fullInput);var g,y,v,_,f,S=m.legendgroup,w={},E=[],P=[],C=[],O=(t.shapes||[]).map(function(me){return me._input}),R=!1,U=m.legend,D=m._fullInput;if(D&&D._isShape||!A.traceIs(m,"pie-like")){var N,W=S&&S.length,F=[];if(W)for(g=0;g<d.length;g++)(N=d[g]).visible&&N.legendgroup===S&&F.push(g);if(i==="toggle"){var j;switch(m.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0}if(W)if(l)for(g=0;g<d.length;g++){var q=d[g];q.visible!==!1&&q.legendgroup===S&&Ee(q,j)}else Ee(m,j);else Ee(m,j)}else if(i==="toggleothers"){var te,ee,Q,J,K=!0;for(g=0;g<d.length;g++)if(te=(J=d[g])===m,ee=J.showlegend!==!0,!(te||ee||W&&J.legendgroup===S||J.legend!==U||J.visible!==!0||A.traceIs(J,"notLegendIsolatable"))){K=!1;break}for(g=0;g<d.length;g++)if((J=d[g]).visible!==!1&&J.legend===U&&!A.traceIs(J,"notLegendIsolatable"))switch(m.visible){case"legendonly":Ee(J,!0);break;case!0:Q=!!K||"legendonly",te=J===m,ee=J.showlegend!==!0&&!J.legendgroup,Ee(J,!!(te||W&&J.legendgroup===S||ee)||Q)}}for(g=0;g<P.length;g++)if(v=P[g]){var Y=v.constructUpdate(),ie=Object.keys(Y);for(y=0;y<ie.length;y++)_=ie[y],(w[_]=w[_]||[])[C[g]]=Y[_]}for(f=Object.keys(w),g=0;g<f.length;g++)for(_=f[g],y=0;y<E.length;y++)w[_].hasOwnProperty(y)||(w[_][y]=void 0);R?A.call("_guiUpdate",p,w,{shapes:O},E):A.call("_guiRestyle",p,w,E)}else{var se=h.label,ae=c.indexOf(se);if(i==="toggle")ae===-1?c.push(se):c.splice(ae,1);else if(i==="toggleothers"){var ue=ae!==-1,ve=[];for(g=0;g<p.calcdata.length;g++){var ye=p.calcdata[g];for(y=0;y<ye.length;y++){var de=ye[y].label;U===ye[0].trace.legend&&se!==de&&(c.indexOf(de)===-1&&(ue=!0),o(c,de),ve.push(de))}}if(!ue)for(var pe=0;pe<ve.length;pe++){var ge=c.indexOf(ve[pe]);ge!==-1&&c.splice(ge,1)}}A.call("_guiRelayout",p,"hiddenlabels",c)}}}}function ke(me,oe){var re=E.indexOf(me),fe=w.visible;return fe||(fe=w.visible=[]),E.indexOf(me)===-1&&(E.push(me),re=E.length-1),fe[re]=oe,re}function Ee(me,oe){if(!h.groupTitle||l){var re,fe=me._fullInput||me,Se=fe._isShape,be=fe.index;if(be===void 0&&(be=fe._index),A.hasTransform(fe,"groupby")){var we=P[be];if(!we){var Me=A.getTransformIndices(fe,"groupby"),Ie=Me[Me.length-1];we=k.keyedContainer(fe,"transforms["+Ie+"].styles","target","value.visible"),P[be]=we}var Oe=we.get(me._group);Oe===void 0&&(Oe=!0),Oe!==!1&&we.set(me._group,oe),C[be]=ke(be,fe.visible!==!1)}else{var he=fe.visible!==!1&&oe;Se?(re=he,O[be].visible=re,R=!0):ke(be,he)}}}}},42451:function(X,I){"use strict";I.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},I.isVertical=function(e){return e.orientation!=="h"},I.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(X,I,e){"use strict";X.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(3400),T=o.strTranslate,b=e(43616),p=e(76308),s=e(94288).extractOpts,t=e(43028),i=e(10528),n=e(69656).castOption,r=e(65196);function a(h,u){return(u?"radial":"horizontal")+(h?"":"reversed")}function l(h){var u=h[0].trace,x=u.contours,d=t.hasLines(u),m=t.hasMarkers(u),g=u.visible&&u.fill&&u.fill!=="none",y=!1,v=!1;if(x){var _=x.coloring;_==="lines"?y=!0:d=_==="none"||_==="heatmap"||x.showlines,x.type==="constraint"?g=x._operation!=="=":_!=="fill"&&_!=="heatmap"||(v=!0)}return{showMarker:m,showLine:d,showFill:g,showGradientLine:y,showGradientFill:v,anyLine:d||y,anyFill:g||v}}function c(h,u,x){return h&&o.isArrayOrTypedArray(h)?u:h>x?x:h}X.exports=function(h,u,x){var d=u._fullLayout;x||(x=d.legend);var m=x.itemsizing==="constant",g=x.itemwidth,y=(g+2*r.itemGap)/2,v=T(y,0),_=function(w,E,P,C){var O;if(w+1)O=w;else{if(!(E&&E.width>0))return 0;O=E.width}return m?C:Math.min(O,P)};function f(w,E,P){var C=w[0].trace,O=C.marker||{},R=O.line||{},U=O.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",D=P?C.visible&&C.type===P:k.traceIs(C,"bar"),N=A.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(D?[w]:[]);N.enter().append("path").classed("legend"+P,!0).attr("d",U).attr("transform",v),N.exit().remove(),N.each(function(W){var F=A.select(this),j=W[0],q=_(j.mlw,O.line,5,2);F.style("stroke-width",q+"px");var te=j.mcc;if(!x._inHover&&"mc"in j){var ee=s(O),Q=ee.mid;Q===void 0&&(Q=(ee.max+ee.min)/2),te=b.tryColorscale(O,"")(Q)}var J=te||j.mc||O.color,K=O.pattern,Y=K&&b.getPatternAttr(K.shape,0,"");if(Y){var ie=b.getPatternAttr(K.bgcolor,0,null),se=b.getPatternAttr(K.fgcolor,0,null),ae=K.fgopacity,ue=c(K.size,8,10),ve=c(K.solidity,.5,1),ye="legend-"+C.uid;F.call(b.pattern,"legend",u,ye,Y,ue,ve,te,K.fillmode,ie,se,ae)}else F.call(p.fill,J);q&&p.stroke(F,j.mlc||R.color)})}function S(w,E,P){var C=w[0],O=C.trace,R=P?O.visible&&O.type===P:k.traceIs(O,P),U=A.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(R?[w]:[]);if(U.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),U.exit().remove(),U.size()){var D=O.marker||{},N=_(n(D.line.width,C.pts),D.line,5,2),W="pieLike",F=o.minExtend(O,{marker:{line:{width:N}}},W),j=o.minExtend(C,{trace:F},W);i(U,j,F,u)}}h.each(function(w){var E=A.select(this),P=o.ensureSingle(E,"g","layers");P.style("opacity",w[0].trace.opacity);var C=x.indentation,O=x.valign,R=w[0].lineHeight,U=w[0].height;if(O==="middle"&&C===0||!R||!U)P.attr("transform",null);else{var D={top:1,bottom:-1}[O]*(.5*(R-U+3))||0,N=x.indentation;P.attr("transform",T(N,D))}P.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var W=P.selectAll("g.legendsymbols").data([w]);W.enter().append("g").classed("legendsymbols",!0),W.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,P=w[0].trace,C=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var O=A.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",v).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(R,U){var D,N=A.select(this),W=s(P),F=W.colorscale,j=W.reversescale;if(F){if(!E){var q=F.length;D=U===0?F[j?q-1:0][1]:U===1?F[j?0:q-1][1]:F[Math.floor((q-1)/2)][1]}}else{var te=P.vertexcolor||P.facecolor||P.color;D=o.isArrayOrTypedArray(te)?te[U]||te[0]:te}N.attr("d",R[0]),D?N.call(p.fill,D):N.call(function(ee){if(ee.size()){var Q="legendfill-"+P.uid;b.gradient(ee,u,Q,a(j,E==="radial"),F,"fill")}})})}).each(function(w){var E=w[0].trace,P=E.type==="waterfall";if(w[0]._distinct&&P){var C=w[0].trace[w[0].dir].marker;return w[0].mc=C.color,w[0].mlw=C.line.width,w[0].mlc=C.line.color,f(w,this,"waterfall")}var O=[];E.visible&&P&&(O=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var R=A.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);R.enter().append("path").classed("legendwaterfall",!0).attr("transform",v).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(U){var D=A.select(this),N=E[U[0]].marker,W=_(void 0,N.line,5,2);D.attr("d",U[1]).style("stroke-width",W+"px").call(p.fill,N.color),W&&D.call(p.stroke,N.line.color)})}).each(function(w){f(w,this,"funnel")}).each(function(w){f(w,this)}).each(function(w){var E=w[0].trace,P=A.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",v),P.exit().remove(),P.each(function(){var C=A.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||p.opacity(E.fillcolor)!==0||p.opacity((E.line||{}).color)!==0){var O=_(void 0,E.line,5,2);C.style("stroke-width",O+"px").call(p.fill,E.fillcolor),O&&p.stroke(C,E.line.color)}else{var R=o.minExtend(E,{marker:{size:m?12:o.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(b.pointStyle,R,u)}})}).each(function(w){S(w,this,"funnelarea")}).each(function(w){S(w,this,"pie")}).each(function(w){var E,P,C=l(w),O=C.showFill,R=C.showLine,U=C.showGradientLine,D=C.showGradientFill,N=C.anyFill,W=C.anyLine,F=w[0],j=F.trace,q=s(j),te=q.colorscale,ee=q.reversescale,Q=t.hasMarkers(j)||!N?"M5,0":W?"M5,-2":"M5,-3",J=A.select(this),K=J.select(".legendfill").selectAll("path").data(O||D?[w]:[]);if(K.enter().append("path").classed("js-fill",!0),K.exit().remove(),K.attr("d",Q+"h"+g+"v6h-"+g+"z").call(function(se){if(se.size())if(O)b.fillGroupStyle(se,u,!0);else{var ae="legendfill-"+j.uid;b.gradient(se,u,ae,a(ee),te,"fill")}}),R||U){var Y=_(void 0,j.line,10,5);P=o.minExtend(j,{line:{width:Y}}),E=[o.minExtend(F,{trace:P})]}var ie=J.select(".legendlines").selectAll("path").data(R||U?[E]:[]);ie.enter().append("path").classed("js-line",!0),ie.exit().remove(),ie.attr("d",Q+(U?"l"+g+",0.0001":"h"+g)).call(R?b.lineGroupStyle:function(se){if(se.size()){var ae="legendline-"+j.uid;b.lineGroupStyle(se),b.gradient(se,u,ae,a(ee),te,"stroke")}})}).each(function(w){var E,P,C=l(w),O=C.anyFill,R=C.anyLine,U=C.showLine,D=C.showMarker,N=w[0],W=N.trace,F=!D&&!R&&!O&&t.hasText(W);function j(ie,se,ae,ue){var ve=o.nestedProperty(W,ie).get(),ye=o.isArrayOrTypedArray(ve)&&se?se(ve):ve;if(m&&ye&&ue!==void 0&&(ye=ue),ae){if(ye<ae[0])return ae[0];if(ye>ae[1])return ae[1]}return ye}function q(ie){return N._distinct&&N.index&&ie[N.index]?ie[N.index]:ie[0]}if(D||F||U){var te={},ee={};if(D){te.mc=j("marker.color",q),te.mx=j("marker.symbol",q),te.mo=j("marker.opacity",o.mean,[.2,1]),te.mlc=j("marker.line.color",q),te.mlw=j("marker.line.width",o.mean,[0,5],2),ee.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Q=j("marker.size",o.mean,[2,16],12);te.ms=Q,ee.marker.size=Q}U&&(ee.line={width:j("line.width",q,[0,10],5)}),F&&(te.tx="Aa",te.tp=j("textposition",q),te.ts=10,te.tc=j("textfont.color",q),te.tf=j("textfont.family",q),te.tw=j("textfont.weight",q),te.ty=j("textfont.style",q),te.tv=j("textfont.variant",q),te.tC=j("textfont.textcase",q),te.tE=j("textfont.lineposition",q),te.tS=j("textfont.shadow",q)),E=[o.minExtend(N,te)],(P=o.minExtend(W,ee)).selectedpoints=null,P.texttemplate=null}var J=A.select(this).select("g.legendpoints"),K=J.selectAll("path.scatterpts").data(D?E:[]);K.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",v),K.exit().remove(),K.call(b.pointStyle,P,u),D&&(E[0].mrc=3);var Y=J.selectAll("g.pointtext").data(F?E:[]);Y.enter().append("g").classed("pointtext",!0).append("text").attr("transform",v),Y.exit().remove(),Y.selectAll("text").call(b.textPointStyle,P,u)}).each(function(w){var E=w[0].trace,P=A.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[w,w]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(C,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(C,O){var R=A.select(this),U=E[O?"increasing":"decreasing"],D=_(void 0,U.line,5,2);R.style("stroke-width",D+"px").call(p.fill,U.fillcolor),D&&p.stroke(R,U.line.color)})}).each(function(w){var E=w[0].trace,P=A.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[w,w]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(C,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",v).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(C,O){var R=A.select(this),U=E[O?"increasing":"decreasing"],D=_(void 0,U.line,5,2);R.style("fill","none").call(b.dashLine,U.line.dash,D),D&&p.stroke(R,U.line.color)})})}},66540:function(X,I,e){"use strict";e(76052),X.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(X,I,e){"use strict";var A=e(24040),k=e(7316),o=e(79811),T=e(9224),b=e(4016).eraseActiveShape,p=e(3400),s=p._,t=X.exports={};function i(d,m){var g,y,v=m.currentTarget,_=v.getAttribute("data-attr"),f=v.getAttribute("data-val")||!0,S=d._fullLayout,w={},E=o.list(d,null,!0),P=S._cartesianSpikesEnabled;if(_==="zoom"){var C,O=f==="in"?.5:2,R=(1+O)/2,U=(1-O)/2;for(y=0;y<E.length;y++)if(!(g=E[y]).fixedrange)if(C=g._name,f==="auto")w[C+".autorange"]=!0;else if(f==="reset")g._rangeInitial0===void 0&&g._rangeInitial1===void 0?w[C+".autorange"]=!0:g._rangeInitial0===void 0?(w[C+".autorange"]=g._autorangeInitial,w[C+".range"]=[null,g._rangeInitial1]):g._rangeInitial1===void 0?(w[C+".range"]=[g._rangeInitial0,null],w[C+".autorange"]=g._autorangeInitial):w[C+".range"]=[g._rangeInitial0,g._rangeInitial1],g._showSpikeInitial!==void 0&&(w[C+".showspikes"]=g._showSpikeInitial,P!=="on"||g._showSpikeInitial||(P="off"));else{var D=[g.r2l(g.range[0]),g.r2l(g.range[1])],N=[R*D[0]+U*D[1],R*D[1]+U*D[0]];w[C+".range[0]"]=g.l2r(N[0]),w[C+".range[1]"]=g.l2r(N[1])}}else _!=="hovermode"||f!=="x"&&f!=="y"||(f=S._isHoriz?"y":"x",v.setAttribute("data-val",f)),w[_]=f;S._cartesianSpikesEnabled=P,A.call("_guiRelayout",d,w)}function n(d,m){for(var g=m.currentTarget,y=g.getAttribute("data-attr"),v=g.getAttribute("data-val")||!0,_=d._fullLayout._subplots.gl3d||[],f={},S=y.split("."),w=0;w<_.length;w++)f[_[w]+"."+S[1]]=v;var E=v==="pan"?v:"zoom";f.dragmode=E,A.call("_guiRelayout",d,f)}function r(d,m){for(var g=m.currentTarget.getAttribute("data-attr"),y=g==="resetLastSave",v=g==="resetDefault",_=d._fullLayout,f=_._subplots.gl3d||[],S={},w=0;w<f.length;w++){var E,P=f[w],C=P+".camera",O=P+".aspectratio",R=P+".aspectmode",U=_[P]._scene;y?(S[C+".up"]=U.viewInitial.up,S[C+".eye"]=U.viewInitial.eye,S[C+".center"]=U.viewInitial.center,E=!0):v&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[O+".x"]=U.viewInitial.aspectratio.x,S[O+".y"]=U.viewInitial.aspectratio.y,S[O+".z"]=U.viewInitial.aspectratio.z,S[R]=U.viewInitial.aspectmode)}A.call("_guiRelayout",d,S)}function a(d,m){var g=m.currentTarget,y=g._previousVal,v=d._fullLayout,_=v._subplots.gl3d||[],f=["xaxis","yaxis","zaxis"],S={},w={};if(y)w=y,g._previousVal=null;else{for(var E=0;E<_.length;E++){var P=_[E],C=v[P],O=P+".hovermode";S[O]=C.hovermode,w[O]=!1;for(var R=0;R<3;R++){var U=f[R],D=P+"."+U+".showspikes";w[D]=!1,S[D]=C[U].showspikes}}g._previousVal=S}return w}function l(d,m){for(var g=m.currentTarget,y=g.getAttribute("data-attr"),v=g.getAttribute("data-val")||!0,_=d._fullLayout,f=_._subplots.geo||[],S=0;S<f.length;S++){var w=f[S],E=_[w];if(y==="zoom"){var P=E.projection.scale,C=v==="in"?2*P:.5*P;A.call("_guiRelayout",d,w+".projection.scale",C)}}y==="reset"&&x(d,"geo")}function c(d){var m=d._fullLayout;return!m.hovermode&&(m._has("cartesian")?m._isHoriz?"y":"x":"closest")}function h(d){var m=c(d);A.call("_guiRelayout",d,"hovermode",m)}function u(d,m){for(var g=m.currentTarget.getAttribute("data-val"),y=d._fullLayout,v=y._subplots.mapbox||[],_={},f=0;f<v.length;f++){var S=v[f],w=y[S].zoom,E=g==="in"?1.05*w:w/1.05;_[S+".zoom"]=E}A.call("_guiRelayout",d,_)}function x(d,m){for(var g=d._fullLayout,y=g._subplots[m]||[],v={},_=0;_<y.length;_++)for(var f=y[_],S=g[f]._subplot.viewInitial,w=Object.keys(S),E=0;E<w.length;E++){var P=w[E];v[f+"."+P]=S[P]}A.call("_guiRelayout",d,v)}t.toImage={name:"toImage",title:function(d){var m=(d._context.toImageButtonOptions||{}).format||"png";return s(d,m==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(d){var m=d._context.toImageButtonOptions,g={format:m.format||"png"};p.notifier(s(d,"Taking snapshot - this may take a few seconds"),"long"),g.format!=="svg"&&p.isIE()&&(p.notifier(s(d,"IE only supports svg.  Changing format to svg."),"long"),g.format="svg"),["filename","width","height","scale"].forEach(function(y){y in m&&(g[y]=m[y])}),A.call("downloadImage",d,g).then(function(y){p.notifier(s(d,"Snapshot succeeded")+" - "+y,"long")}).catch(function(){p.notifier(s(d,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(d){return s(d,"Edit in Chart Studio")},icon:T.disk,click:function(d){k.sendDataToCloud(d)}},t.editInChartStudio={name:"editInChartStudio",title:function(d){return s(d,"Edit in Chart Studio")},icon:T.pencil,click:function(d){k.sendDataToCloud(d)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(d){return s(d,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(d){return s(d,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(d){return s(d,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(d){return s(d,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(d){return s(d,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(d){return s(d,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},t.drawline={name:"drawline",title:function(d){return s(d,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},t.drawrect={name:"drawrect",title:function(d){return s(d,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(d){return s(d,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(d){return s(d,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(d){return s(d,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(d){return s(d,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(d){return s(d,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(d){return s(d,"Compare data on hover")},attr:"hovermode",val:function(d){return d._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(d){return s(d,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:n},t.pan3d={name:"pan3d",_cat:"pan",title:function(d){return s(d,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:n},t.orbitRotation={name:"orbitRotation",title:function(d){return s(d,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:n},t.tableRotation={name:"tableRotation",title:function(d){return s(d,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:n},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(d){return s(d,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:r},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(d){return s(d,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:r},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,m){var g=a(d,m);A.call("_guiRelayout",d,g)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(d){return s(d,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(d){return s(d,"Reset view")},icon:T.home,click:function(d){for(var m={"node.groups":[],"node.x":[],"node.y":[]},g=0;g<d._fullData.length;g++){var y=d._fullData[g]._viewInitial;m["node.groups"].push(y.node.groups.slice()),m["node.x"].push(y.node.x.slice()),m["node.y"].push(y.node.y.slice())}A.call("restyle",d,m)}},t.toggleHover={name:"toggleHover",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,m){var g=a(d,m);g.hovermode=c(d),A.call("_guiRelayout",d,g)}},t.resetViews={name:"resetViews",title:function(d){return s(d,"Reset views")},icon:T.home,click:function(d,m){var g=m.currentTarget;g.setAttribute("data-attr","zoom"),g.setAttribute("data-val","reset"),i(d,m),g.setAttribute("data-attr","resetLastSave"),r(d,m),x(d,"geo"),x(d,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(d){return s(d,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(d){var m=d._fullLayout,g=m._cartesianSpikesEnabled;m._cartesianSpikesEnabled=g==="on"?"off":"on",A.call("_guiRelayout",d,function(y){for(var v=y._fullLayout._cartesianSpikesEnabled==="on",_=o.list(y,null,!0),f={},S=0;S<_.length;S++){var w=_[S];f[w._name+".showspikes"]=!!v||w._showSpikeInitial}return f}(d))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(d){return s(d,"Reset view")},attr:"reset",icon:T.home,click:function(d){x(d,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:u},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:u}},76052:function(X,I,e){"use strict";var A=e(44248),k=Object.keys(A),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),b=[];k.forEach(function(p){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,i=(s._cat||s.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(i)===-1&&b.push(i)}})(A[p])}),b.sort(),X.exports={DRAW_MODES:o,backButtons:T,foreButtons:b}},90824:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(31780),T=e(66540);X.exports=function(b,p){var s=b.modebar||{},t=o.newContainer(p,"modebar");function i(r,a){return A.coerce(s,t,T,r,a)}i("orientation"),i("bgcolor",k.addOpacity(p.paper_bgcolor,.5));var n=k.contrast(k.rgb(p.modebar.bgcolor));i("color",k.addOpacity(n,.3)),i("activecolor",k.addOpacity(n,.7)),i("uirevision",p.uirevision),i("add"),i("remove")}},45460:function(X,I,e){"use strict";X.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(X,I,e){"use strict";var A=e(79811),k=e(43028),o=e(24040),T=e(10624).isUnifiedHover,b=e(66400),p=e(44248),s=e(76052).DRAW_MODES,t=e(3400).extendDeep;X.exports=function(i){var n=i._fullLayout,r=i._context,a=n._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,c=r.modeBarButtons;l=Array.isArray(c)&&c.length?function(h){for(var u=t([],h),x=0;x<u.length;x++)for(var d=u[x],m=0;m<d.length;m++){var g=d[m];if(typeof g=="string"){if(p[g]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));u[x][m]=p[g]}}return u}(c):!r.displayModeBar&&r.watermark?[]:function(h){var u=h._fullLayout,x=h._fullData,d=h._context;function m(ve,ye){if(typeof ye=="string"){if(ye.toLowerCase()===ve.toLowerCase())return!0}else{var de=ye.name,pe=ye._cat||ye.name;if(de===ve||pe===ve.toLowerCase())return!0}return!1}var g=u.modebar.add;typeof g=="string"&&(g=[g]);var y=u.modebar.remove;typeof y=="string"&&(y=[y]);var v=d.modeBarButtonsToAdd.concat(g.filter(function(ve){for(var ye=0;ye<d.modeBarButtonsToRemove.length;ye++)if(m(ve,d.modeBarButtonsToRemove[ye]))return!1;return!0})),_=d.modeBarButtonsToRemove.concat(y.filter(function(ve){for(var ye=0;ye<d.modeBarButtonsToAdd.length;ye++)if(m(ve,d.modeBarButtonsToAdd[ye]))return!1;return!0})),f=u._has("cartesian"),S=u._has("gl3d"),w=u._has("geo"),E=u._has("pie"),P=u._has("funnelarea"),C=u._has("gl2d"),O=u._has("ternary"),R=u._has("mapbox"),U=u._has("polar"),D=u._has("smith"),N=u._has("sankey"),W=function(ve){for(var ye=A.list({_fullLayout:ve},null,!0),de=0;de<ye.length;de++)if(!ye[de].fixedrange)return!1;return!0}(u),F=T(u.hovermode),j=[];function q(ve){if(ve.length){for(var ye=[],de=0;de<ve.length;de++){for(var pe=ve[de],ge=p[pe],ke=ge.name.toLowerCase(),Ee=(ge._cat||ge.name).toLowerCase(),me=!1,oe=0;oe<_.length;oe++){var re=_[oe].toLowerCase();if(re===ke||re===Ee){me=!0;break}}me||ye.push(p[pe])}j.push(ye)}}var te=["toImage"];d.showEditInChartStudio?te.push("editInChartStudio"):d.showSendToCloud&&te.push("sendDataToCloud"),q(te);var ee=[],Q=[],J=[],K=[];(f||C||E||P||O)+w+S+R+U+D>1?(Q=["toggleHover"],J=["resetViews"]):w?(ee=["zoomInGeo","zoomOutGeo"],Q=["hoverClosestGeo"],J=["resetGeo"]):S?(Q=["hoverClosest3d"],J=["resetCameraDefault3d","resetCameraLastSave3d"]):R?(ee=["zoomInMapbox","zoomOutMapbox"],Q=["toggleHover"],J=["resetViewMapbox"]):C?Q=["hoverClosestGl2d"]:E?Q=["hoverClosestPie"]:N?(Q=["hoverClosestCartesian","hoverCompareCartesian"],J=["resetViewSankey"]):Q=["toggleHover"],f&&(Q=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ve){for(var ye=0;ye<ve.length;ye++)if(!o.traceIs(ve[ye],"noHover"))return!1;return!0}(x)||F)&&(Q=[]),!f&&!C||W||(ee=["zoomIn2d","zoomOut2d","autoScale2d"],J[0]!=="resetViews"&&(J=["resetScale2d"])),S?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||C)&&!W||O?K=["zoom2d","pan2d"]:R||w?K=["pan2d"]:U&&(K=["zoom2d"]),function(ve){for(var ye=!1,de=0;de<ve.length&&!ye;de++){var pe=ve[de];pe._module&&pe._module.selectPoints&&(o.traceIs(pe,"scatter-like")?(k.hasMarkers(pe)||k.hasText(pe))&&(ye=!0):o.traceIs(pe,"box-violin")&&pe.boxpoints!=="all"&&pe.points!=="all"||(ye=!0))}return ye}(x)&&K.push("select2d","lasso2d");var Y=[],ie=function(ve){Y.indexOf(ve)===-1&&Q.indexOf(ve)!==-1&&Y.push(ve)};if(Array.isArray(v)){for(var se=[],ae=0;ae<v.length;ae++){var ue=v[ae];typeof ue=="string"?(ue=ue.toLowerCase(),s.indexOf(ue)!==-1?(u._has("mapbox")||u._has("cartesian"))&&K.push(ue):ue==="togglespikelines"?ie("toggleSpikelines"):ue==="togglehover"?ie("toggleHover"):ue==="hovercompare"?ie("hoverCompareCartesian"):ue==="hoverclosest"?(ie("hoverClosestCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie")):ue==="v1hovermode"&&(ie("toggleHover"),ie("hoverClosestCartesian"),ie("hoverCompareCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie"))):se.push(ue)}v=se}return q(K),q(ee.concat(J)),q(Y),function(ve,ye){if(ye.length)if(Array.isArray(ye[0]))for(var de=0;de<ye.length;de++)ve.push(ye[de]);else ve.push(ye);return ve}(j,v)}(i),a?a.update(i,l):n._modeBar=b(i,l)}else a&&(a.destroy(),delete n._modeBar)}},66400:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(3400),T=e(9224),b=e(25788).version,p=new DOMParser;function s(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(i,n){this.graphInfo=i;var r=this.graphInfo._context,a=this.graphInfo._fullLayout,l="modebar-"+a._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var c=a.modebar,h=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(l),o.addRelatedStyleRule(l,h+"#"+l+" .modebar-group","background-color: "+c.bgcolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+c.color),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+c.activecolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+c.activecolor);var u=!this.hasButtons(n),x=this.hasLogo!==r.displaylogo,d=this.locale!==r.locale;if(this.locale=r.locale,(u||x||d)&&(this.removeAllButtons(),this.updateButtons(n),r.watermark||r.displaylogo)){var m=this.getLogo();r.watermark&&(m.className=m.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(m,this.element.childNodes[0]):this.element.appendChild(m),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var n=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var a=n.createGroup();r.forEach(function(l){var c=l.name;if(!c)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");n.buttonsNames.push(c);var h=n.createButton(l);n.buttonElements.push(h),a.appendChild(h)}),n.element.appendChild(a)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var n=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var a=i.title;a===void 0?a=i.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&r.setAttribute("data-title",a),i.attr!==void 0&&r.setAttribute("data-attr",i.attr);var l=i.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),r.setAttribute("data-val",l)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(h){i.click(n.graphInfo,h),n.updateActiveButton(h.currentTarget)}),r.setAttribute("data-toggle",i.toggle||!1),i.toggle&&A.select(r).classed("active",!0);var c=i.icon;return typeof c=="function"?r.appendChild(c()):r.appendChild(this.createIcon(c||T.question)),r.setAttribute("data-gravity",i.gravity||"n"),r},t.createIcon=function(i){var n,r=k(i.height)?Number(i.height):i.ascent-i.descent,a="http://www.w3.org/2000/svg";if(i.path){(n=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,i.width,r].join(" ")),n.setAttribute("class","icon");var l=document.createElementNS(a,"path");l.setAttribute("d",i.path),i.transform?l.setAttribute("transform",i.transform):i.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),n.appendChild(l)}return i.svg&&(n=p.parseFromString(i.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(i){var n=this.graphInfo._fullLayout,r=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var l=a.getAttribute("data-val")||!0,c=a.getAttribute("data-attr"),h=a.getAttribute("data-toggle")==="true",u=A.select(a);if(h)c===r&&u.classed("active",!u.classed("active"));else{var x=c===null?c:o.nestedProperty(n,c).get();u.classed("active",x===l)}})},t.hasButtons=function(i){var n=this.buttons;if(!n||i.length!==n.length)return!1;for(var r=0;r<i.length;++r){if(i[r].length!==n[r].length)return!1;for(var a=0;a<i[r].length;a++)if(i[r][a].name!==n[r][a].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(n),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},X.exports=function(i,n){var r=i._fullLayout,a=new s({graphInfo:i,container:r._modebardiv.node(),buttons:n});return r._privateplot&&A.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},26680:function(X,I,e){"use strict";var A=e(25376),k=e(22548),o=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});X.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:A({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(X){"use strict";X.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(31780),T=e(51272),b=e(26680),p=e(85984);function s(t,i,n,r){var a=r.calendar;function l(h,u){return A.coerce(t,i,b.buttons,h,u)}if(l("visible")){var c=l("step");c!=="all"&&(!a||a==="gregorian"||c!=="month"&&c!=="year"?l("stepmode"):i.stepmode="backward",l("count")),l("label")}}X.exports=function(t,i,n,r,a){var l=t.rangeselector||{},c=o.newContainer(i,"rangeselector");function h(d,m){return A.coerce(l,c,b,d,m)}if(h("visible",T(l,c,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var u=function(d,m,g){for(var y=g.filter(function(S){return m[S].anchor===d._id}),v=0,_=0;_<y.length;_++){var f=m[y[_]].domain;f&&(v=Math.max(f[1],v))}return[d.domain[0],v+p.yPad]}(i,n,r);h("x",u[0]),h("y",u[1]),A.noneOrAll(t,i,["x","y"]),h("xanchor"),h("yanchor"),A.coerceFont(h,"font",n.font);var x=h("bgcolor");h("activecolor",k.contrast(x,p.lightAmount,p.darkAmount)),h("bordercolor"),h("borderwidth")}}},50216:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(7316),T=e(76308),b=e(43616),p=e(3400),s=p.strTranslate,t=e(72736),i=e(79811),n=e(84284),r=n.LINE_SPACING,a=n.FROM_TL,l=n.FROM_BR,c=e(85984),h=e(48040);function u(m){return m._id}function x(m,g,y){var v=p.ensureSingle(m,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});v.attr({rx:c.rx,ry:c.ry}),v.call(T.stroke,g.bordercolor).call(T.fill,function(_,f){return f._isActive||f._isHovered?_.activecolor:_.bgcolor}(g,y)).style("stroke-width",g.borderwidth+"px")}function d(m,g,y,v){var _,f;p.ensureSingle(m,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,g.font).text((_=y,f=v._fullLayout._meta,_.label?f?p.templateString(_.label,f):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(S){t.convertToTspans(S,v)})}X.exports=function(m){var g=m._fullLayout._infolayer.selectAll(".rangeselector").data(function(y){for(var v=i.list(y,"x",!0),_=[],f=0;f<v.length;f++){var S=v[f];S.rangeselector&&S.rangeselector.visible&&_.push(S)}return _}(m),u);g.enter().append("g").classed("rangeselector",!0),g.exit().remove(),g.style({cursor:"pointer","pointer-events":"all"}),g.each(function(y){var v=A.select(this),_=y,f=_.rangeselector,S=v.selectAll("g.button").data(p.filterVisible(f.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(w){var E=A.select(this),P=h(_,w);w._isActive=function(C,O,R){if(O.step==="all")return C.autorange===!0;var U=Object.keys(R);return C.range[0]===R[U[0]]&&C.range[1]===R[U[1]]}(_,w,P),E.call(x,f,w),E.call(d,f,w,m),E.on("click",function(){m._dragged||k.call("_guiRelayout",m,P)}),E.on("mouseover",function(){w._isHovered=!0,E.call(x,f,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(x,f,w)})}),function(w,E,P,C,O){var R=0,U=0,D=P.borderwidth;E.each(function(){var te=A.select(this).select(".selector-text"),ee=P.font.size*r,Q=Math.max(ee*t.lineCount(te),16)+3;U=Math.max(U,Q)}),E.each(function(){var te=A.select(this),ee=te.select(".selector-rect"),Q=te.select(".selector-text"),J=Q.node()&&b.bBox(Q.node()).width,K=P.font.size*r,Y=t.lineCount(Q),ie=Math.max(J+10,c.minButtonWidth);te.attr("transform",s(D+R,D)),ee.attr({x:0,y:0,width:ie,height:U}),t.positionText(Q,ie/2,U/2-(Y-1)*K/2+3),R+=ie+5});var N=w._fullLayout._size,W=N.l+N.w*P.x,F=N.t+N.h*(1-P.y),j="left";p.isRightAnchor(P)&&(W-=R,j="right"),p.isCenterAnchor(P)&&(W-=R/2,j="center");var q="top";p.isBottomAnchor(P)&&(F-=U,q="bottom"),p.isMiddleAnchor(P)&&(F-=U/2,q="middle"),R=Math.ceil(R),U=Math.ceil(U),W=Math.round(W),F=Math.round(F),o.autoMargin(w,C+"-range-selector",{x:P.x,y:P.y,l:R*a[j],r:R*l[j],b:U*l[q],t:U*a[q]}),O.attr("transform",s(W,F))}(m,S,f,_._name,v)})}},48040:function(X,I,e){"use strict";var A=e(73220),k=e(3400).titleCase;X.exports=function(o,T){var b=o._name,p={};if(T.step==="all")p[b+".autorange"]=!0;else{var s=function(t,i){var n,r=t.range,a=new Date(t.r2l(r[1])),l=i.step,c=A["utc"+k(l)],h=i.count;switch(i.stepmode){case"backward":n=t.l2r(+c.offset(a,-h));break;case"todate":var u=c.offset(a,-h);n=t.l2r(+c.ceil(u))}return[n,r[1]]}(o,T);p[b+".range[0]"]=s[0],p[b+".range[1]"]=s[1]}return p}},41152:function(X,I,e){"use strict";X.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(X,I,e){"use strict";var A=e(22548);X.exports={bgcolor:{valType:"color",dflt:A.background,editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(X,I,e){"use strict";var A=e(79811).list,k=e(19280).getAutoRange,o=e(74636);X.exports=function(T){for(var b=A(T,"x",!0),p=0;p<b.length;p++){var s=b[p],t=s[o.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,s))}}},74636:function(X){"use strict";X.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(X,I,e){"use strict";var A=e(3400),k=e(31780),o=e(79811),T=e(11200),b=e(10936);X.exports=function(p,s,t){var i=p[t],n=s[t];if(i.rangeslider||s._requestRangeslider[n._id]){A.isPlainObject(i.rangeslider)||(i.rangeslider={});var r,a,l=i.rangeslider,c=k.newContainer(n,"rangeslider");if(v("visible")){v("bgcolor",s.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!n.isValidRange(l.range)),v("range");var h=s._subplots;if(h)for(var u=h.cartesian.filter(function(f){return f.substr(0,f.indexOf("y"))===o.name2id(t)}).map(function(f){return f.substr(f.indexOf("y"),f.length)}),x=A.simpleMap(u,o.id2name),d=0;d<x.length;d++){var m=x[d];r=l[m]||{},a=k.newContainer(c,m,"yaxis");var g,y=s[m];r.range&&y.isValidRange(r.range)&&(g="fixed"),_("rangemode",g)!=="match"&&_("range",y.range.slice())}c._input=l}}function v(f,S){return A.coerce(l,c,T,f,S)}function _(f,S){return A.coerce(r,a,b,f,S)}}},20060:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,p=e(43616),s=e(76308),t=e(81668),i=e(57952),n=e(79811),r=e(86476),a=e(93972),l=e(74636);function c(y){return typeof y.clientX=="number"?y.clientX:y.touches&&y.touches.length>0?y.touches[0].clientX:0}function h(y,v,_,f){var S=T.ensureSingle(y,"rect",l.bgClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=f.borderwidth%2==0?f.borderwidth:f.borderwidth-1,E=-f._offsetShift,P=p.crispRound(v,f.borderwidth);S.attr({width:f._width+w,height:f._height+w,transform:b(E,E),"stroke-width":P}).call(s.stroke,f.bordercolor).call(s.fill,f.bgcolor)}function u(y,v,_,f){var S=v._fullLayout;T.ensureSingleById(S._topdefs,"clipPath",f._clipId,function(w){w.append("rect").attr({x:0,y:0})}).select("rect").attr({width:f._width,height:f._height})}function x(y,v,_,f){var S,w=v.calcdata,E=y.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,T.identity);E.enter().append("g").attr("class",function(P){return l.rangePlotClassName+" "+P}).call(p.setClipUrl,f._clipId,v),E.order(),E.exit().remove(),E.each(function(P,C){var O=A.select(this),R=C===0,U=n.getFromId(v,P,"y"),D=U._name,N=f[D],W={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:f.range.slice(),calendar:_.calendar},width:f._width,height:f._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};_.rangebreaks&&(W.layout.xaxis.rangebreaks=_.rangebreaks),W.layout[D]={type:U.type,domain:[0,1],range:N.rangemode!=="match"?N.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(W.layout[D].rangebreaks=U.rangebreaks),o.supplyDefaults(W);var F=W._fullLayout.xaxis,j=W._fullLayout[D];F.clearCalc(),F.setScale(),j.clearCalc(),j.setScale();var q={id:P,plotgroup:O,xaxis:F,yaxis:j,isRangePlot:!0};R?S=q:(q.mainplot="xy",q.mainplotinfo=S),i.rangePlot(v,q,function(te,ee){for(var Q=[],J=0;J<te.length;J++){var K=te[J],Y=K[0].trace;Y.xaxis+Y.yaxis===ee&&Q.push(K)}return Q}(w,P))})}function d(y,v,_,f,S){T.ensureSingle(y,"rect",l.maskMinClassName,function(w){w.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),T.ensureSingle(y,"rect",l.maskMaxClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),S.rangemode!=="match"&&(T.ensureSingle(y,"rect",l.maskMinOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).call(s.fill,l.maskOppAxisColor),T.ensureSingle(y,"rect",l.maskMaxOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).style("border-top",l.maskOppBorder).call(s.fill,l.maskOppAxisColor))}function m(y,v,_,f){v._context.staticPlot||T.ensureSingle(y,"rect",l.slideBoxClassName,function(S){S.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:f._height,fill:l.slideBoxFill})}function g(y,v,_,f){var S=T.ensureSingle(y,"g",l.grabberMinClassName),w=T.ensureSingle(y,"g",l.grabberMaxClassName),E={x:0,width:l.handleWidth,rx:l.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(f._height/4),height:Math.round(f._height/2)};T.ensureSingle(S,"rect",l.handleMinClassName,function(O){O.attr(E)}).attr(P),T.ensureSingle(w,"rect",l.handleMaxClassName,function(O){O.attr(E)}).attr(P);var C={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:v._context.staticPlot?void 0:l.grabAreaCursor};T.ensureSingle(S,"rect",l.grabAreaMinClassName,function(O){O.attr(C)}).attr("height",f._height),T.ensureSingle(w,"rect",l.grabAreaMaxClassName,function(O){O.attr(C)}).attr("height",f._height)}X.exports=function(y){for(var v=y._fullLayout,_=v._rangeSliderData,f=0;f<_.length;f++){var S=_[f][l.name];S._clipId=S._id+"-"+v._uid}var w=v._infolayer.selectAll("g."+l.containerClassName).data(_,function(E){return E._name});w.exit().each(function(E){var P=E[l.name];v._topdefs.select("#"+P._clipId).remove()}).remove(),_.length!==0&&(w.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),w.each(function(E){var P=A.select(this),C=E[l.name],O=v[n.id2name(E.anchor)],R=C[n.id2name(E.anchor)];if(C.range){var U,D=T.simpleMap(C.range,E.r2l),N=T.simpleMap(E.range,E.r2l);U=N[0]<N[1]?[Math.min(D[0],N[0]),Math.max(D[1],N[1])]:[Math.max(D[0],N[0]),Math.min(D[1],N[1])],C.range=C._input.range=T.simpleMap(U,E.l2r)}E.cleanRange("rangeslider.range");var W=v._size,F=E.domain;C._width=W.w*(F[1]-F[0]);var j=Math.round(W.l+W.w*F[0]),q=Math.round(W.t+W.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+C._offsetShift+l.extraPad);P.attr("transform",b(j,q)),C._rl=T.simpleMap(C.range,E.r2l);var te=C._rl[0],ee=C._rl[1],Q=ee-te;if(C.p2d=function(ye){return ye/C._width*Q+te},C.d2p=function(ye){return(ye-te)/Q*C._width},E.rangebreaks){var J=E.locateBreaks(te,ee);if(J.length){var K,Y,ie=0;for(K=0;K<J.length;K++)ie+=(Y=J[K]).max-Y.min;var se=C._width/(ee-te-ie),ae=[-se*te];for(K=0;K<J.length;K++)Y=J[K],ae.push(ae[ae.length-1]-se*(Y.max-Y.min));for(C.d2p=function(ye){for(var de=ae[0],pe=0;pe<J.length;pe++){var ge=J[pe];if(ye>=ge.max)de=ae[pe+1];else if(ye<ge.min)break}return de+se*ye},K=0;K<J.length;K++)(Y=J[K]).pmin=C.d2p(Y.min),Y.pmax=C.d2p(Y.max);C.p2d=function(ye){for(var de=ae[0],pe=0;pe<J.length;pe++){var ge=J[pe];if(ye>=ge.pmax)de=ae[pe+1];else if(ye<ge.pmin)break}return(ye-de)/se}}}if(R.rangemode!=="match"){var ue=O.r2l(R.range[0]),ve=O.r2l(R.range[1])-ue;C.d2pOppAxis=function(ye){return(ye-ue)/ve*C._height}}P.call(h,y,E,C).call(u,y,E,C).call(x,y,E,C).call(d,y,E,C,R).call(m,y,E,C).call(g,y,E,C),function(ye,de,pe,ge){if(!de._context.staticPlot){var ke=ye.select("rect."+l.slideBoxClassName).node(),Ee=ye.select("rect."+l.grabAreaMinClassName).node(),me=ye.select("rect."+l.grabAreaMaxClassName).node();ye.on("mousedown",oe),ye.on("touchstart",oe)}function oe(){var re=A.event,fe=re.target,Se=c(re),be=Se-ye.node().getBoundingClientRect().left,we=ge.d2p(pe._rl[0]),Me=ge.d2p(pe._rl[1]),Ie=r.coverSlip();function Oe(_e){var Ae,De,Le,Be=+c(_e)-Se;switch(fe){case ke:if(Le="ew-resize",we+Be>pe._length||Me+Be<0)return;Ae=we+Be,De=Me+Be;break;case Ee:if(Le="col-resize",we+Be>pe._length)return;Ae=we+Be,De=Me;break;case me:if(Le="col-resize",Me+Be<0)return;Ae=we,De=Me+Be;break;default:Le="ew-resize",Ae=be,De=be+Be}if(De<Ae){var Ve=De;De=Ae,Ae=Ve}ge._pixelMin=Ae,ge._pixelMax=De,a(A.select(Ie),Le),function(Ze,rt,it,dt){function mt(Je){return it.l2r(T.constrain(Je,dt._rl[0],dt._rl[1]))}var ht=mt(dt.p2d(dt._pixelMin)),Qe=mt(dt.p2d(dt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",rt,it._name+".range",[ht,Qe])})}(0,de,pe,ge)}function he(){Ie.removeEventListener("mousemove",Oe),Ie.removeEventListener("mouseup",he),this.removeEventListener("touchmove",Oe),this.removeEventListener("touchend",he),T.removeElement(Ie)}this.addEventListener("touchmove",Oe),this.addEventListener("touchend",he),Ie.addEventListener("mousemove",Oe),Ie.addEventListener("mouseup",he)}}(P,y,E,C),function(ye,de,pe,ge,ke,Ee){var me=l.handleWidth/2;function oe(_e){return T.constrain(_e,0,ge._width)}function re(_e){return T.constrain(_e,0,ge._height)}function fe(_e){return T.constrain(_e,-me,ge._width+me)}var Se=oe(ge.d2p(pe._rl[0])),be=oe(ge.d2p(pe._rl[1]));if(ye.select("rect."+l.slideBoxClassName).attr("x",Se).attr("width",be-Se),ye.select("rect."+l.maskMinClassName).attr("width",Se),ye.select("rect."+l.maskMaxClassName).attr("x",be).attr("width",ge._width-be),Ee.rangemode!=="match"){var we=ge._height-re(ge.d2pOppAxis(ke._rl[1])),Me=ge._height-re(ge.d2pOppAxis(ke._rl[0]));ye.select("rect."+l.maskMinOppAxisClassName).attr("x",Se).attr("height",we).attr("width",be-Se),ye.select("rect."+l.maskMaxOppAxisClassName).attr("x",Se).attr("y",Me).attr("height",ge._height-Me).attr("width",be-Se),ye.select("rect."+l.slideBoxClassName).attr("y",we).attr("height",Me-we)}var Ie=.5,Oe=Math.round(fe(Se-me))-Ie,he=Math.round(fe(be-me))+Ie;ye.select("g."+l.grabberMinClassName).attr("transform",b(Oe,Ie)),ye.select("g."+l.grabberMaxClassName).attr("transform",b(he,Ie))}(P,0,E,C,O,R),E.side==="bottom"&&t.draw(y,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:v._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:q+C._height+C._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(X,I,e){"use strict";var A=e(79811),k=e(72736),o=e(74636),T=e(84284).LINE_SPACING,b=o.name;function p(s){var t=s&&s[b];return t&&t.visible}I.isVisible=p,I.makeData=function(s){var t=A.list({_fullLayout:s},"x",!0),i=s.margin,n=[];if(!s._has("gl2d"))for(var r=0;r<t.length;r++){var a=t[r];if(p(a)){n.push(a);var l=a[b];l._id=b+a._id,l._height=(s.height-i.b-i.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}s._rangeSliderData=n},I.autoMarginOpts=function(s,t){var i=s._fullLayout,n=t[b],r=t._id.charAt(0),a=0,l=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==i._dfltTitle[r]&&(l=1.5*t.title.font.size+10+n._offsetShift,l+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+a+Math.max(i.margin.b,l),pad:o.extraPad+2*n._offsetShift}}},49692:function(X,I,e){"use strict";var A=e(3400),k=e(11200),o=e(10936),T=e(97944);X.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:A.extendFlat({},k,{yaxis:o})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(X){"use strict";X.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(X,I,e){"use strict";var A=e(13916),k=e(52904).line,o=e(98192).u,T=e(92880).extendFlat,b=e(67824).overrideAll,p=e(31780).templatedArray;e(36208),X.exports=b(p("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},A.xref,{}),yref:T({},A.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(X){"use strict";X.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(51272),T=e(93956),b=e(65152);function p(s,t,i){function n(E,P){return A.coerce(s,t,T,E,P)}var r=n("path"),a=n("type",r?"path":"rect")!=="path";a&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var l=["x","y"],c=0;c<2;c++){var h,u,x,d=l[c],m={_fullLayout:i},g=k.coerceRef(s,t,m,d);if((h=k.getFromId(m,g))._selectionIndices.push(t._index),x=b.rangeToShapePosition(h),u=b.shapePositionToRange(h),a){var y=d+"0",v=d+"1",_=s[y],f=s[v];s[y]=u(s[y],!0),s[v]=u(s[v],!0),k.coercePosition(t,m,n,g,y),k.coercePosition(t,m,n,g,v);var S=t[y],w=t[v];S!==void 0&&w!==void 0&&(t[y]=x(S),t[v]=x(w),s[y]=_,s[v]=f)}}a&&A.noneOrAll(s,t,["x0","x1","y0","y1"])}X.exports=function(s,t){o(s,t,{name:"selections",handleItemDefaults:p});for(var i=t.selections,n=0;n<i.length;n++){var r=i[n];r&&r.path===void 0&&(r.x0!==void 0&&r.x1!==void 0&&r.y0!==void 0&&r.y1!==void 0||(t.selections[n]=null))}}},23640:function(X,I,e){"use strict";var A=e(9856).readPaths,k=e(55496),o=e(1936).clearOutlineControllers,T=e(76308),b=e(43616),p=e(31780).arrayEditor,s=e(65152),t=s.getPathString;function i(c){var h=c._fullLayout;for(var u in o(c),h._selectionLayer.selectAll("path").remove(),h._plots){var x=h._plots[u].selectionLayer;x&&x.selectAll("path").remove()}for(var d=0;d<h.selections.length;d++)r(c,d)}function n(c){return c._context.editSelection}function r(c,h){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var u=s.makeSelectionsOptionsAndPlotinfo(c,h),x=u.options,d=u.plotinfo;x._input&&function(m){var g=t(c,x),y={"data-index":h,"fill-rule":"evenodd",d:g},v=x.opacity,_="rgba(0,0,0,0)",f=x.line.color||T.contrast(c._fullLayout.plot_bgcolor),S=x.line.width,w=x.line.dash;S||(S=5,w="solid");var E=n(c)&&c._fullLayout._activeSelectionIndex===h;E&&(_=c._fullLayout.activeselection.fillcolor,v=c._fullLayout.activeselection.opacity);for(var P=[],C=1;C>=0;C--){var O=m.append("path").attr(y).style("opacity",C?.1:v).call(T.stroke,f).call(T.fill,_).call(b.dashLine,C?"solid":w,C?4+S:S);if(a(O,c,x),E){var R=p(c.layout,"selections",x);O.style({cursor:"move"});var U={element:O.node(),plotinfo:d,gd:c,editHelpers:R,isActiveSelection:!0},D=A(g,c);k(D,O,U)}else O.style("pointer-events",C?"all":"none");P[C]=O}var N=P[0];P[1].node().addEventListener("click",function(){return function(W,F){if(n(W)){var j=+F.node().getAttribute("data-index");if(j>=0){if(j===W._fullLayout._activeSelectionIndex)return void l(W);W._fullLayout._activeSelectionIndex=j,W._fullLayout._deactivateSelection=l,i(W)}}}(c,N)})}(c._fullLayout._selectionLayer)}function a(c,h,u){var x=u.xref+u.yref;b.setClipUrl(c,"clip"+h._fullLayout._uid+x,h)}function l(c){n(c)&&c._fullLayout._activeSelectionIndex>=0&&(o(c),delete c._fullLayout._activeSelectionIndex,i(c))}X.exports={draw:i,drawOne:r,activateLastSelection:function(c){if(n(c)){var h=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=h,c._fullLayout._deactivateSelection=l,i(c)}}}},34200:function(X,I,e){"use strict";var A=e(98192).u,k=e(92880).extendFlat;X.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},A,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(X){"use strict";X.exports=function(I,e,A){A("newselection.mode"),A("newselection.line.width")&&(A("newselection.line.color"),A("newselection.line.dash")),A("activeselection.fillcolor"),A("activeselection.opacity")}},5968:function(X,I,e){"use strict";var A=e(72760).selectMode,k=e(1936).clearOutline,o=e(9856),T=o.readPaths,b=o.writePaths,p=o.fixDatesForPaths;X.exports=function(s,t){if(s.length){var i=s[0][0];if(i){var n=i.getAttribute("d"),r=t.gd,a=r._fullLayout.newselection,l=t.plotinfo,c=l.xaxis,h=l.yaxis,u=t.isActiveSelection,x=t.dragmode,d=(r.layout||{}).selections||[];if(!A(x)&&u!==void 0){var m=r._fullLayout._activeSelectionIndex;if(m<d.length)switch(r._fullLayout.selections[m].type){case"rect":x="select";break;case"path":x="lasso"}}var g,y=T(n,r,l,u),v={xref:c._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};y.length===1&&(g=y[0]),g&&g.length===5&&x==="select"?(v.type="rect",v.x0=g[0][1],v.y0=g[0][2],v.x1=g[2][1],v.y1=g[2][2]):(v.type="path",c&&h&&p(y,c,h),v.path=b(y),g=null),k(r);for(var _=t.editHelpers,f=(_||{}).modifyItem,S=[],w=0;w<d.length;w++){var E=r._fullLayout.selections[w];if(E){if(S[w]=E._input,u!==void 0&&w===r._fullLayout._activeSelectionIndex){var P=v;switch(E.type){case"rect":f("x0",P.x0),f("x1",P.x1),f("y0",P.y0),f("y1",P.y1);break;case"path":f("path",P.path)}}}else S[w]=E}return u===void 0?(S.push(v),S):_?_.getUpdateObj():{}}}}},5840:function(X,I,e){"use strict";var A=e(3400).strTranslate;function k(o,T){switch(o.type){case"log":return o.p2d(T);case"date":return o.p2r(T,0,o.calendar);default:return o.p2r(T)}}X.exports={p2r:k,r2p:function(o,T){switch(o.type){case"log":return o.d2p(T);case"date":return o.r2p(T,0,o.calendar);default:return o.r2p(T)}},axValue:function(o){var T=o._id.charAt(0)==="y"?1:0;return function(b){return k(o,b[T])}},getTransform:function(o){return A(o.xaxis._offset,o.yaxis._offset)}}},22676:function(X,I,e){"use strict";var A=e(23640),k=e(43156);X.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:A.draw,drawOne:A.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(X,I,e){"use strict";var A=e(14756),k=e(61456),o=e(24040),T=e(43616).dashStyle,b=e(76308),p=e(93024),s=e(10624).makeEventData,t=e(72760),i=t.freeMode,n=t.rectMode,r=t.drawMode,a=t.openMode,l=t.selectMode,c=e(65152),h=e(85448),u=e(55496),x=e(1936).clearOutline,d=e(9856),m=d.handleEllipse,g=d.readPaths,y=e(93940).newShapes,v=e(5968),_=e(23640).activateLastSelection,f=e(3400),S=f.sorterAsc,w=e(92065),E=e(91200),P=e(79811).getFromId,C=e(73696),O=e(39172).redrawReglTraces,R=e(83280),U=R.MINSELECT,D=w.filter,N=w.tester,W=e(5840),F=W.p2r,j=W.axValue,q=W.getTransform;function te(Oe){return Oe.subplot!==void 0}function ee(Oe,he,_e,Ae,De,Le,Be){var Ve,Ze,rt,it,dt,mt,ht,Qe,Je,wt=he._hoverdata,Pt=he._fullLayout.clickmode.indexOf("event")>-1,It=[];if(function(We){return We&&Array.isArray(We)&&We[0].hoverOnBox!==!0}(wt)){Y(Oe,he,Le);var At=function(We,at){var tt,Re,Fe=We[0],nt=-1,Ge=[];for(Re=0;Re<at.length;Re++)if(tt=at[Re],Fe.fullData._expandedIndex===tt.cd[0].trace._expandedIndex){if(Fe.hoverOnBox===!0)break;Fe.pointNumber!==void 0?nt=Fe.pointNumber:Fe.binNumber!==void 0&&(nt=Fe.binNumber,Ge=Fe.pointNumbers);break}return{pointNumber:nt,pointNumbers:Ge,searchInfo:tt}}(wt,Ve=ae(he,_e,Ae,De));if(At.pointNumbers.length>0?function(We,at){var tt,Re,Fe,nt=[];for(Fe=0;Fe<We.length;Fe++)(tt=We[Fe]).cd[0].trace.selectedpoints&&tt.cd[0].trace.selectedpoints.length>0&&nt.push(tt);if(nt.length===1&&nt[0]===at.searchInfo&&(Re=at.searchInfo.cd[0].trace).selectedpoints.length===at.pointNumbers.length){for(Fe=0;Fe<at.pointNumbers.length;Fe++)if(Re.selectedpoints.indexOf(at.pointNumbers[Fe])<0)return!1;return!0}return!1}(Ve,At):function(We){var at,tt,Re=0;for(tt=0;tt<We.length;tt++)if((at=We[tt].cd[0].trace).selectedpoints&&(at.selectedpoints.length>1||(Re+=at.selectedpoints.length)>1))return!1;return Re===1}(Ve)&&(mt=ve(At))){for(Be&&Be.remove(),Je=0;Je<Ve.length;Je++)(Ze=Ve[Je])._module.selectPoints(Ze,!1);ye(he,Ve),ie(Le),Pt&&Ie(he)}else{for(ht=Oe.shiftKey&&(mt!==void 0?mt:ve(At)),rt=function(We,at,tt){return{pointNumber:We,searchInfo:at,subtract:!!tt}}(At.pointNumber,At.searchInfo,ht),it=K(Le.selectionDefs.concat([rt])),Je=0;Je<Ve.length;Je++)if(dt=pe(Ve[Je]._module.selectPoints(Ve[Je],it),Ve[Je]),It.length)for(var qe=0;qe<dt.length;qe++)It.push(dt[qe]);else It=dt;if(ye(he,Ve,Qe={points:It}),rt&&Le&&Le.selectionDefs.push(rt),Be){var Ye=Le.mergedPolygons,Ne=a(Le.dragmode);u(ge(Ye,Ne),Be,Le)}Pt&&Me(he,Qe)}}}function Q(Oe){return"pointNumber"in Oe&&"searchInfo"in Oe}function J(Oe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(he,_e,Ae,De){var Le=Oe.searchInfo.cd[0].trace._expandedIndex;return De.cd[0].trace._expandedIndex===Le&&Ae===Oe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Oe.subtract}}function K(Oe){if(Oe.length){for(var he=[],_e=Q(Oe[0])?0:Oe[0][0][0],Ae=_e,De=Q(Oe[0])?0:Oe[0][0][1],Le=De,Be=0;Be<Oe.length;Be++)if(Q(Oe[Be]))he.push(J(Oe[Be]));else{var Ve=N(Oe[Be]);Ve.subtract=!!Oe[Be].subtract,he.push(Ve),_e=Math.min(_e,Ve.xmin),Ae=Math.max(Ae,Ve.xmax),De=Math.min(De,Ve.ymin),Le=Math.max(Le,Ve.ymax)}return{xmin:_e,xmax:Ae,ymin:De,ymax:Le,pts:[],contains:function(Ze,rt,it,dt){for(var mt=!1,ht=0;ht<he.length;ht++)he[ht].contains(Ze,rt,it,dt)&&(mt=!he[ht].subtract);return mt},isRect:!1,degenerate:!1}}}function Y(Oe,he,_e){var Ae=he._fullLayout,De=_e.plotinfo,Le=_e.dragmode,Be=Ae._lastSelectedSubplot&&Ae._lastSelectedSubplot===De.id,Ve=(Oe.shiftKey||Oe.altKey)&&!(r(Le)&&a(Le));Be&&Ve&&De.selection&&De.selection.selectionDefs&&!_e.selectionDefs?(_e.selectionDefs=De.selection.selectionDefs,_e.mergedPolygons=De.selection.mergedPolygons):Ve&&De.selection||ie(_e),Be||(x(he),Ae._lastSelectedSubplot=De.id)}function ie(Oe,he){var _e=Oe.dragmode,Ae=Oe.plotinfo,De=Oe.gd;(function(dt){return dt._fullLayout._activeShapeIndex>=0})(De)&&De._fullLayout._deactivateShape(De),function(dt){return dt._fullLayout._activeSelectionIndex>=0}(De)&&De._fullLayout._deactivateSelection(De);var Le=De._fullLayout._zoomlayer,Be=r(_e),Ve=l(_e);if(Be||Ve){var Ze,rt,it=Le.selectAll(".select-outline-"+Ae.id);it&&De._fullLayout._outlining&&(Be&&(Ze=y(it,Oe)),Ze&&o.call("_guiRelayout",De,{shapes:Ze}),Ve&&!te(Oe)&&(rt=v(it,Oe)),rt&&(De._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",De,{selections:rt}).then(function(){he&&_(De)})),De._fullLayout._outlining=!1)}Ae.selection={},Ae.selection.selectionDefs=Oe.selectionDefs=[],Ae.selection.mergedPolygons=Oe.mergedPolygons=[]}function se(Oe){return Oe._id}function ae(Oe,he,_e,Ae){if(!Oe.calcdata)return[];var De,Le,Be,Ve=[],Ze=he.map(se),rt=_e.map(se);for(Be=0;Be<Oe.calcdata.length;Be++)if((Le=(De=Oe.calcdata[Be])[0].trace).visible===!0&&Le._module&&Le._module.selectPoints)if(!te({subplot:Ae})||Le.subplot!==Ae&&Le.geo!==Ae)if(Le.type==="splom"){if(Le._xaxes[Ze[0]]&&Le._yaxes[rt[0]]){var it=ue(Le._module,De,he[0],_e[0]);it.scene=Oe._fullLayout._splomScenes[Le.uid],Ve.push(it)}}else if(Le.type==="sankey"){var dt=ue(Le._module,De,he[0],_e[0]);Ve.push(dt)}else{if(!(Ze.indexOf(Le.xaxis)!==-1||Le._xA&&Le._xA.overlaying)||!(rt.indexOf(Le.yaxis)!==-1||Le._yA&&Le._yA.overlaying))continue;Ve.push(ue(Le._module,De,P(Oe,Le.xaxis),P(Oe,Le.yaxis)))}else Ve.push(ue(Le._module,De,he[0],_e[0]));return Ve}function ue(Oe,he,_e,Ae){return{_module:Oe,cd:he,xaxis:_e,yaxis:Ae}}function ve(Oe){var he=Oe.searchInfo.cd[0].trace,_e=Oe.pointNumber,Ae=Oe.pointNumbers,De=Ae.length>0?Ae[0]:_e;return!!he.selectedpoints&&he.selectedpoints.indexOf(De)>-1}function ye(Oe,he,_e){var Ae,De;for(Ae=0;Ae<he.length;Ae++){var Le=he[Ae].cd[0].trace._fullInput,Be=Oe._fullLayout._tracePreGUI[Le.uid]||{};Be.selectedpoints===void 0&&(Be.selectedpoints=Le._input.selectedpoints||null)}if(_e){var Ve=_e.points||[];for(Ae=0;Ae<he.length;Ae++)(De=he[Ae].cd[0].trace)._input.selectedpoints=De._fullInput.selectedpoints=[],De._fullInput!==De&&(De.selectedpoints=[]);for(var Ze=0;Ze<Ve.length;Ze++){var rt=Ve[Ze],it=rt.data,dt=rt.fullData,mt=rt.pointIndex,ht=rt.pointIndices;ht?([].push.apply(it.selectedpoints,ht),De._fullInput!==De&&[].push.apply(dt.selectedpoints,ht)):(it.selectedpoints.push(mt),De._fullInput!==De&&dt.selectedpoints.push(mt))}}else for(Ae=0;Ae<he.length;Ae++)delete(De=he[Ae].cd[0].trace).selectedpoints,delete De._input.selectedpoints,De._fullInput!==De&&delete De._fullInput.selectedpoints;(function(Qe,Je){for(var wt=!1,Pt=0;Pt<Je.length;Pt++){var It=Je[Pt],At=It.cd;o.traceIs(At[0].trace,"regl")&&(wt=!0);var qe=It._module,Ye=qe.styleOnSelect||qe.style;Ye&&(Ye(Qe,At,At[0].node3),At[0].nodeRangePlot3&&Ye(Qe,At,At[0].nodeRangePlot3))}wt&&(C(Qe),O(Qe))})(Oe,he)}function de(Oe,he,_e){for(var Ae=(_e?A.difference:A.union)({regions:Oe},{regions:[he]}).regions.reverse(),De=0;De<Ae.length;De++){var Le=Ae[De];Le.subtract=fe(Le,Ae.slice(0,De))}return Ae}function pe(Oe,he){if(Array.isArray(Oe))for(var _e=he.cd,Ae=he.cd[0].trace,De=0;De<Oe.length;De++)Oe[De]=s(Oe[De],Ae,_e);return Oe}function ge(Oe,he){for(var _e=[],Ae=0;Ae<Oe.length;Ae++){_e[Ae]=[];for(var De=0;De<Oe[Ae].length;De++){_e[Ae][De]=[],_e[Ae][De][0]=De?"L":"M";for(var Le=0;Le<Oe[Ae][De].length;Le++)_e[Ae][De].push(Oe[Ae][De][Le])}he||_e[Ae].push(["Z",_e[Ae][0][1],_e[Ae][0][2]])}return _e}function ke(Oe,he){for(var _e,Ae,De=[],Le=[],Be=0;Be<he.length;Be++){var Ve=he[Be];Ae=Ve._module.selectPoints(Ve,Oe),Le.push(Ae),_e=pe(Ae,Ve),De=De.concat(_e)}return De}function Ee(Oe,he,_e,Ae,De){var Le,Be,Ve,Ze=!!Ae;De&&(Le=De.plotinfo,Be=De.xaxes[0]._id,Ve=De.yaxes[0]._id);var rt=[],it=[],dt=re(Oe),mt=Oe._fullLayout;if(Le){var ht=mt._zoomlayer,Qe=mt.dragmode,Je=r(Qe),wt=l(Qe);if(Je||wt){var Pt=P(Oe,Be,"x"),It=P(Oe,Ve,"y");if(Pt&&It){var At=ht.selectAll(".select-outline-"+Le.id);if(At&&Oe._fullLayout._outlining&&At.length){for(var qe=At[0][0].getAttribute("d"),Ye=g(qe,Oe,Le),Ne=[],We=0;We<Ye.length;We++){for(var at=Ye[We],tt=[],Re=0;Re<at.length;Re++)tt.push([Se(Pt,at[Re][1]),Se(It,at[Re][2])]);tt.xref=Be,tt.yref=Ve,tt.subtract=fe(tt,Ne),Ne.push(tt)}dt=dt.concat(Ne)}}}}var Fe=Be&&Ve?[Be+Ve]:mt._subplots.cartesian;(function(An){var Sn=An.calcdata;if(Sn)for(var Tn=0;Tn<Sn.length;Tn++){var Rn=Sn[Tn][0].trace,In=An._fullLayout._splomScenes;if(In){var Xn=In[Rn.uid];Xn&&(Xn.selectBatch=[])}}})(Oe);for(var nt={},Ge=0;Ge<Fe.length;Ge++){var ut=Fe[Ge],pt=ut.indexOf("y"),gt=ut.slice(0,pt),ct=ut.slice(pt),Tt=Be&&Ve?_e:void 0;if(Tt=oe(dt,gt,ct,Tt)){var vt=Ae;if(!Ze){var kt=P(Oe,gt,"x"),Lt=P(Oe,ct,"y");vt=ae(Oe,[kt],[Lt],ut);for(var Ct=0;Ct<vt.length;Ct++){var Dt=vt[Ct],Gt=Dt.cd[0],tn=Gt.trace;if(Dt._module.name==="scattergl"&&!Gt.t.xpx){var jt=tn.x,Wt=tn.y,Ft=tn._length;Gt.t.xpx=[],Gt.t.ypx=[];for(var Ln=0;Ln<Ft;Ln++)Gt.t.xpx[Ln]=kt.c2p(jt[Ln]),Gt.t.ypx[Ln]=Lt.c2p(Wt[Ln])}Dt._module.name==="splom"&&(nt[tn.uid]||(nt[tn.uid]=!0))}}var bn=ke(Tt,vt);rt=rt.concat(bn),it=it.concat(vt)}}var hn={points:rt};ye(Oe,it,hn);var Kt=mt.clickmode.indexOf("event")>-1&&he;if(!Le&&he){var sn=re(Oe,!0);if(sn.length){var Qt=sn[0].xref,cn=sn[0].yref;if(Qt&&cn){var vn=be(sn);we([P(Oe,Qt,"x"),P(Oe,cn,"y")])(hn,vn)}}Oe._fullLayout._noEmitSelectedAtStart?Oe._fullLayout._noEmitSelectedAtStart=!1:Kt&&Me(Oe,hn),mt._reselect=!1}if(!Le&&mt._deselect){var xn=mt._deselect;(function(An,Sn,Tn){for(var Rn=0;Rn<Tn.length;Rn++){var In=Tn[Rn];if(In.xaxis&&In.xaxis._id===An&&In.yaxis&&In.yaxis._id===Sn)return!0}return!1})(Be=xn.xref,Ve=xn.yref,it)||me(Oe,Be,Ve,Ae),Kt&&(hn.points.length?Me(Oe,hn):Ie(Oe)),mt._deselect=!1}return{eventData:hn,selectionTesters:_e}}function me(Oe,he,_e,Ae){Ae=ae(Oe,[P(Oe,he,"x")],[P(Oe,_e,"y")],he+_e);for(var De=0;De<Ae.length;De++){var Le=Ae[De];Le._module.selectPoints(Le,!1)}ye(Oe,Ae)}function oe(Oe,he,_e,Ae){for(var De,Le=0;Le<Oe.length;Le++){var Be=Oe[Le];he===Be.xref&&_e===Be.yref&&(De?Ae=K(De=de(De,Be,!!Be.subtract)):(De=[Be],Ae=N(Be)))}return Ae}function re(Oe,he){for(var _e=[],Ae=Oe._fullLayout,De=Ae.selections,Le=De.length,Be=0;Be<Le;Be++)if(!he||Be===Ae._activeSelectionIndex){var Ve=De[Be];if(Ve){var Ze,rt,it,dt,mt,ht=Ve.xref,Qe=Ve.yref,Je=P(Oe,ht,"x"),wt=P(Oe,Qe,"y");if(Ve.type==="rect"){mt=[];var Pt=Se(Je,Ve.x0),It=Se(Je,Ve.x1),At=Se(wt,Ve.y0),qe=Se(wt,Ve.y1);mt=[[Pt,At],[Pt,qe],[It,qe],[It,At]],Ze=Math.min(Pt,It),rt=Math.max(Pt,It),it=Math.min(At,qe),dt=Math.max(At,qe),mt.xmin=Ze,mt.xmax=rt,mt.ymin=it,mt.ymax=dt,mt.xref=ht,mt.yref=Qe,mt.subtract=!1,mt.isRect=!0,_e.push(mt)}else if(Ve.type==="path")for(var Ye=Ve.path.split("Z"),Ne=[],We=0;We<Ye.length;We++){var at=Ye[We];if(at){at+="Z";var tt=c.extractPathCoords(at,h.paramIsX,"raw"),Re=c.extractPathCoords(at,h.paramIsY,"raw");Ze=1/0,rt=-1/0,it=1/0,dt=-1/0,mt=[];for(var Fe=0;Fe<tt.length;Fe++){var nt=Se(Je,tt[Fe]),Ge=Se(wt,Re[Fe]);mt.push([nt,Ge]),Ze=Math.min(nt,Ze),rt=Math.max(nt,rt),it=Math.min(Ge,it),dt=Math.max(Ge,dt)}mt.xmin=Ze,mt.xmax=rt,mt.ymin=it,mt.ymax=dt,mt.xref=ht,mt.yref=Qe,mt.subtract=fe(mt,Ne),Ne.push(mt),_e.push(mt)}}}}return _e}function fe(Oe,he){for(var _e=!1,Ae=0;Ae<he.length;Ae++)for(var De=he[Ae],Le=0;Le<Oe.length;Le++)if(k(Oe[Le],De)){_e=!_e;break}return _e}function Se(Oe,he){return Oe.type==="date"&&(he=he.replace("_"," ")),Oe.type==="log"?Oe.c2p(he):Oe.r2p(he,null,Oe.calendar)}function be(Oe){for(var he=Oe.length,_e=[],Ae=0;Ae<he;Ae++){var De=Oe[Ae];_e=(_e=_e.concat(De)).concat([De[0]])}return(Le=_e).isRect=Le.length===5&&Le[0][0]===Le[4][0]&&Le[0][1]===Le[4][1]&&Le[0][0]===Le[1][0]&&Le[2][0]===Le[3][0]&&Le[0][1]===Le[3][1]&&Le[1][1]===Le[2][1]||Le[0][1]===Le[1][1]&&Le[2][1]===Le[3][1]&&Le[0][0]===Le[3][0]&&Le[1][0]===Le[2][0],Le.isRect&&(Le.xmin=Math.min(Le[0][0],Le[2][0]),Le.xmax=Math.max(Le[0][0],Le[2][0]),Le.ymin=Math.min(Le[0][1],Le[2][1]),Le.ymax=Math.max(Le[0][1],Le[2][1])),Le;var Le}function we(Oe){return function(he,_e){for(var Ae,De,Le=0;Le<Oe.length;Le++){var Be=Oe[Le],Ve=Be._id,Ze=Ve.charAt(0);if(_e.isRect){Ae||(Ae={});var rt=_e[Ze+"min"],it=_e[Ze+"max"];rt!==void 0&&it!==void 0&&(Ae[Ve]=[F(Be,rt),F(Be,it)].sort(S))}else De||(De={}),De[Ve]=_e.map(j(Be))}Ae&&(he.range=Ae),De&&(he.lassoPoints=De)}}function Me(Oe,he){he&&(he.selections=(Oe.layout||{}).selections||[]),Oe.emit("plotly_selected",he)}function Ie(Oe){Oe.emit("plotly_deselect",null)}X.exports={reselect:Ee,prepSelect:function(Oe,he,_e,Ae,De){var Le=!te(Ae),Be=i(De),Ve=n(De),Ze=a(De),rt=r(De),it=l(De),dt=De==="drawcircle",mt=De==="drawline"||dt,ht=Ae.gd,Qe=ht._fullLayout,Je=it&&Qe.newselection.mode==="immediate"&&Le,wt=Qe._zoomlayer,Pt=Ae.element.getBoundingClientRect(),It=Ae.plotinfo,At=q(It),qe=he-Pt.left,Ye=_e-Pt.top;Qe._calcInverseTransform(ht);var Ne=f.apply3DTransform(Qe._invTransform)(qe,Ye);qe=Ne[0],Ye=Ne[1];var We,at,tt,Re,Fe,nt,Ge,ut=Qe._invScaleX,pt=Qe._invScaleY,gt=qe,ct=Ye,Tt="M"+qe+","+Ye,vt=Ae.xaxes[0],kt=Ae.yaxes[0],Lt=vt._length,Ct=kt._length,Dt=Oe.altKey&&!(r(De)&&Ze);Y(Oe,ht,Ae),Be&&(We=D([[qe,Ye]],R.BENDPX));var Gt=wt.selectAll("path.select-outline-"+It.id).data([1]),tn=rt?Qe.newshape:Qe.newselection;rt&&(Ae.hasText=tn.label.text||tn.label.texttemplate);var jt=rt&&!Ze?tn.fillcolor:"rgba(0,0,0,0)",Wt=tn.line.color||(Le?b.contrast(ht._fullLayout.plot_bgcolor):"#7f7f7f");Gt.enter().append("path").attr("class","select-outline select-outline-"+It.id).style({opacity:rt?tn.opacity/2:1,"stroke-dasharray":T(tn.line.dash,tn.line.width),"stroke-width":tn.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,Wt).call(b.fill,jt).attr("fill-rule","evenodd").classed("cursor-move",!!rt).attr("transform",At).attr("d",Tt+"Z");var Ft=wt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",At).attr("d","M0,0Z");if(rt&&Ae.hasText){var Ln=wt.select(".label-temp");Ln.empty()&&(Ln=wt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var bn=Qe._uid+R.SELECTID,hn=[],Kt=ae(ht,Ae.xaxes,Ae.yaxes,Ae.subplot);Je&&!Oe.shiftKey&&(Ae._clearSubplotSelections=function(){if(Le){var Qt=vt._id,cn=kt._id;me(ht,Qt,cn,Kt);for(var vn=(ht.layout||{}).selections||[],xn=[],An=!1,Sn=0;Sn<vn.length;Sn++){var Tn=Qe.selections[Sn];Tn.xref!==Qt||Tn.yref!==cn?xn.push(vn[Sn]):An=!0}An&&(ht._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ht,{selections:xn}))}});var sn=function(Qt){return Qt.plotinfo.fillRangeItems||we(Qt.xaxes.concat(Qt.yaxes))}(Ae);Ae.moveFn=function(Qt,cn){Ae._clearSubplotSelections&&(Ae._clearSubplotSelections(),Ae._clearSubplotSelections=void 0),gt=Math.max(0,Math.min(Lt,ut*Qt+qe)),ct=Math.max(0,Math.min(Ct,pt*cn+Ye));var vn=Math.abs(gt-qe),xn=Math.abs(ct-Ye);if(Ve){var An,Sn,Tn;if(it){var Rn=Qe.selectdirection;switch(An=Rn==="any"?xn<Math.min(.6*vn,U)?"h":vn<Math.min(.6*xn,U)?"v":"d":Rn){case"h":Sn=dt?Ct/2:0,Tn=Ct;break;case"v":Sn=dt?Lt/2:0,Tn=Lt}}if(rt)switch(Qe.newshape.drawdirection){case"vertical":An="h",Sn=dt?Ct/2:0,Tn=Ct;break;case"horizontal":An="v",Sn=dt?Lt/2:0,Tn=Lt;break;case"ortho":vn<xn?(An="h",Sn=Ye,Tn=ct):(An="v",Sn=qe,Tn=gt);break;default:An="d"}An==="h"?((Re=mt?m(dt,[gt,Sn],[gt,Tn]):[[qe,Sn],[qe,Tn],[gt,Tn],[gt,Sn]]).xmin=mt?gt:Math.min(qe,gt),Re.xmax=mt?gt:Math.max(qe,gt),Re.ymin=Math.min(Sn,Tn),Re.ymax=Math.max(Sn,Tn),Ft.attr("d","M"+Re.xmin+","+(Ye-U)+"h-4v"+2*U+"h4ZM"+(Re.xmax-1)+","+(Ye-U)+"h4v"+2*U+"h-4Z")):An==="v"?((Re=mt?m(dt,[Sn,ct],[Tn,ct]):[[Sn,Ye],[Sn,ct],[Tn,ct],[Tn,Ye]]).xmin=Math.min(Sn,Tn),Re.xmax=Math.max(Sn,Tn),Re.ymin=mt?ct:Math.min(Ye,ct),Re.ymax=mt?ct:Math.max(Ye,ct),Ft.attr("d","M"+(qe-U)+","+Re.ymin+"v-4h"+2*U+"v4ZM"+(qe-U)+","+(Re.ymax-1)+"v4h"+2*U+"v-4Z")):An==="d"&&((Re=mt?m(dt,[qe,Ye],[gt,ct]):[[qe,Ye],[qe,ct],[gt,ct],[gt,Ye]]).xmin=Math.min(qe,gt),Re.xmax=Math.max(qe,gt),Re.ymin=Math.min(Ye,ct),Re.ymax=Math.max(Ye,ct),Ft.attr("d","M0,0Z"))}else Be&&(We.addPt([gt,ct]),Re=We.filtered);if(Ae.selectionDefs&&Ae.selectionDefs.length?(tt=de(Ae.mergedPolygons,Re,Dt),Re.subtract=Dt,at=K(Ae.selectionDefs.concat([Re]))):(tt=[Re],at=N(Re)),u(ge(tt,Ze),Gt,Ae),it){var In,Xn=Ee(ht,!1),Vn=Xn.eventData?Xn.eventData.points.slice():[];Xn=Ee(ht,!1,at,Kt,Ae),at=Xn.selectionTesters,Ge=Xn.eventData,In=We?We.filtered:be(tt),E.throttle(bn,R.SELECTDELAY,function(){for(var er=(hn=ke(at,Kt)).slice(),Wn=0;Wn<Vn.length;Wn++){for(var fr=Vn[Wn],Jt=!1,en=0;en<er.length;en++)if(er[en].curveNumber===fr.curveNumber&&er[en].pointNumber===fr.pointNumber){Jt=!0;break}Jt||er.push(fr)}er.length&&(Ge||(Ge={}),Ge.points=er),sn(Ge,In),function(Mn,pn){Mn.emit("plotly_selecting",pn)}(ht,Ge)})}},Ae.clickFn=function(Qt,cn){if(Ft.remove(),ht._fullLayout._activeShapeIndex>=0)ht._fullLayout._deactivateShape(ht);else if(!rt){var vn=Qe.clickmode;E.done(bn).then(function(){if(E.clear(bn),Qt===2){for(Gt.remove(),Fe=0;Fe<Kt.length;Fe++)(nt=Kt[Fe])._module.selectPoints(nt,!1);if(ye(ht,Kt),ie(Ae),Ie(ht),Kt.length){var xn=Kt[0].xaxis,An=Kt[0].yaxis;if(xn&&An){for(var Sn=[],Tn=ht._fullLayout.selections,Rn=0;Rn<Tn.length;Rn++){var In=Tn[Rn];In&&(In.xref===xn._id&&In.yref===An._id||Sn.push(In))}Sn.length<Tn.length&&(ht._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ht,{selections:Sn}))}}}else vn.indexOf("select")>-1&&ee(cn,ht,Ae.xaxes,Ae.yaxes,Ae.subplot,Ae,Gt),vn==="event"&&Me(ht,void 0);p.click(ht,cn,It.id)}).catch(f.error)}},Ae.doneFn=function(){Ft.remove(),E.done(bn).then(function(){E.clear(bn),!Je&&Re&&Ae.selectionDefs&&(Re.subtract=Dt,Ae.selectionDefs.push(Re),Ae.mergedPolygons.length=0,[].push.apply(Ae.mergedPolygons,tt)),(Je||rt)&&ie(Ae,Je),Ae.doneFnCompleted&&Ae.doneFnCompleted(hn),it&&Me(ht,Ge)}).catch(f.error)}},clearOutline:x,clearSelectionsCache:ie,selectOnClick:ee}},46056:function(X,I,e){"use strict";var A=e(13916),k=e(25376),o=e(52904).line,T=e(98192).u,b=e(92880).extendFlat,p=e(31780).templatedArray,s=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);X.exports=p("shape",{visible:b({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},s.legend,{editType:"calc+arraydraw"}),legendgroup:b({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:b({},A.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},A.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},o.color,{editType:"arraydraw"}),width:b({},o.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(85448),T=e(65152);function b(i){return s(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function p(i){return s(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function s(i,n,r,a,l,c){var h=i/2,u=c;if(n==="pixel"){var x=l?T.extractPathCoords(l,c?o.paramIsY:o.paramIsX):[r,a],d=A.aggNums(Math.max,null,x),m=A.aggNums(Math.min,null,x),g=m<0?Math.abs(m)+h:h,y=d>0?d+h:h;return{ppad:h,ppadplus:u?g:y,ppadminus:u?y:g}}return{ppad:h}}function t(i,n,r,a,l){var c=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(n!==void 0)return[c(n),c(r)];if(a){var h,u,x,d,m=1/0,g=-1/0,y=a.match(o.segmentRE);for(i.type==="date"&&(c=T.decodeDate(c)),h=0;h<y.length;h++)(u=l[y[h].charAt(0)].drawn)!==void 0&&(!(x=y[h].substr(1).match(o.paramRE))||x.length<u||((d=c(x[u]))<m&&(m=d),d>g&&(g=d)));return g>=m?[m,g]:void 0}}X.exports=function(i){var n=i._fullLayout,r=A.filterVisible(n.shapes);if(r.length&&i._fullData.length)for(var a=0;a<r.length;a++){var l,c,h=r[a];h._extremes={};var u=k.getRefType(h.xref),x=k.getRefType(h.yref);if(h.xref!=="paper"&&u!=="domain"){var d=h.xsizemode==="pixel"?h.xanchor:h.x0,m=h.xsizemode==="pixel"?h.xanchor:h.x1;(c=t(l=k.getFromId(i,h.xref),d,m,h.path,o.paramIsX))&&(h._extremes[l._id]=k.findExtremes(l,c,b(h)))}if(h.yref!=="paper"&&x!=="domain"){var g=h.ysizemode==="pixel"?h.yanchor:h.y0,y=h.ysizemode==="pixel"?h.yanchor:h.y1;(c=t(l=k.getFromId(i,h.yref),g,y,h.path,o.paramIsY))&&(h._extremes[l._id]=k.findExtremes(l,c,p(h)))}}}},85448:function(X){"use strict";X.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(51272),T=e(46056),b=e(65152);function p(s,t,i){function n(W,F){return A.coerce(s,t,T,W,F)}if(t._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),A.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var r=n("path"),a=n("type",r?"path":"rect"),l=a!=="path";l&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var c=n("xsizemode"),h=n("ysizemode"),u=["x","y"],x=0;x<2;x++){var d,m,g,y=u[x],v=y+"anchor",_=y==="x"?c:h,f={_fullLayout:i},S=k.coerceRef(s,t,f,y,void 0,"paper");if(k.getRefType(S)==="range"?((d=k.getFromId(f,S))._shapeIndices.push(t._index),g=b.rangeToShapePosition(d),m=b.shapePositionToRange(d)):m=g=A.identity,l){var w=y+"0",E=y+"1",P=s[w],C=s[E];s[w]=m(s[w],!0),s[E]=m(s[E],!0),_==="pixel"?(n(w,0),n(E,10)):(k.coercePosition(t,f,n,S,w,.25),k.coercePosition(t,f,n,S,E,.75)),t[w]=g(t[w]),t[E]=g(t[E]),s[w]=P,s[E]=C}if(_==="pixel"){var O=s[v];s[v]=m(s[v],!0),k.coercePosition(t,f,n,S,v,.25),t[v]=g(t[v]),s[v]=O}}l&&A.noneOrAll(s,t,["x0","x1","y0","y1"]);var R,U,D=a==="line";if(l&&(R=n("label.texttemplate")),R||(U=n("label.text")),U||R){n("label.textangle");var N=n("label.textposition",D?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(W,F){return W?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(D,N)),n("label.padding"),A.coerceFont(n,"label.font",i.font)}}}X.exports=function(s,t){o(s,t,{name:"shapes",handleItemDefaults:p})}},60728:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(72736),T=e(43616),b=e(9856).readPaths,p=e(65152),s=p.getPathString,t=e(97728),i=e(84284).FROM_TL;X.exports=function(n,r,a,l){if(l.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var c;if(a.label.texttemplate){var h={};if(a.type!=="path"){var u=k.getFromId(n,a.xref),x=k.getFromId(n,a.yref);for(var d in t){var m=t[d](a,u,x);m!==void 0&&(h[d]=m)}}c=A.texttemplateStringForShapes(a.label.texttemplate,{},n._fullLayout._d3locale,h)}else c=a.label.text;var g,y,v,_,f={"data-index":r},S=a.label.font,w=l.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(c);if(a.path){var E=s(n,a),P=b(E,n);g=1/0,v=1/0,y=-1/0,_=-1/0;for(var C=0;C<P.length;C++)for(var O=0;O<P[C].length;O++)for(var R=P[C][O],U=1;U<R.length;U+=2){var D=R[U],N=R[U+1];g=Math.min(g,D),y=Math.max(y,D),v=Math.min(v,N),_=Math.max(_,N)}}else{var W=k.getFromId(n,a.xref),F=k.getRefType(a.xref),j=k.getFromId(n,a.yref),q=k.getRefType(a.yref),te=p.getDataToPixel(n,W,!1,F),ee=p.getDataToPixel(n,j,!0,q);g=te(a.x0),y=te(a.x1),v=ee(a.y0),_=ee(a.y1)}var Q=a.label.textangle;Q==="auto"&&(Q=a.type==="line"?function(se,ae,ue,ve){var ye,de;return de=Math.abs(ue-se),ye=ue>=se?ae-ve:ve-ae,-180/Math.PI*Math.atan2(ye,de)}(g,v,y,_):0),w.call(function(se){return se.call(T.font,S).attr({}),o.convertToTspans(se,n),se});var J=function(se,ae,ue,ve,ye,de,pe){var ge,ke,Ee,me,oe=ye.label.textposition,re=ye.label.textangle,fe=ye.label.padding,Se=ye.type,be=Math.PI/180*de,we=Math.sin(be),Me=Math.cos(be),Ie=ye.label.xanchor,Oe=ye.label.yanchor;if(Se==="line"){oe==="start"?(ge=se,ke=ae):oe==="end"?(ge=ue,ke=ve):(ge=(se+ue)/2,ke=(ae+ve)/2),Ie==="auto"&&(Ie=oe==="start"?re==="auto"?ue>se?"left":ue<se?"right":"center":ue>se?"right":ue<se?"left":"center":oe==="end"?re==="auto"?ue>se?"right":ue<se?"left":"center":ue>se?"left":ue<se?"right":"center":"center");var he={bottom:-1,middle:0,top:1};if(re==="auto"){var _e=he[Oe];Ee=-fe*we*_e,me=fe*Me*_e}else Ee=fe*{left:1,center:0,right:-1}[Ie],me=fe*he[Oe];ge+=Ee,ke+=me}else Ee=fe+3,oe.indexOf("right")!==-1?(ge=Math.max(se,ue)-Ee,Ie==="auto"&&(Ie="right")):oe.indexOf("left")!==-1?(ge=Math.min(se,ue)+Ee,Ie==="auto"&&(Ie="left")):(ge=(se+ue)/2,Ie==="auto"&&(Ie="center")),ke=oe.indexOf("top")!==-1?Math.min(ae,ve):oe.indexOf("bottom")!==-1?Math.max(ae,ve):(ae+ve)/2,me=fe,Oe==="bottom"?ke-=me:Oe==="top"&&(ke+=me);var Ae=i[Oe],De=ye.label.font.size,Le=pe.height;return{textx:ge+(Le*Ae-De)*we,texty:ke+-(Le*Ae-De)*Me,xanchor:Ie}}(g,v,y,_,a,Q,T.bBox(w.node())),K=J.textx,Y=J.texty,ie=J.xanchor;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ie],y:Y,x:K,transform:"rotate("+Q+","+K+","+Y+")"}).call(o.positionText,K,Y)}}},55496:function(X,I,e){"use strict";var A=e(3400).strTranslate,k=e(86476),o=e(72760),T=o.drawMode,b=o.selectMode,p=e(24040),s=e(76308),t=e(7e3),i=t.i000,n=t.i090,r=t.i180,a=t.i270,l=e(1936).clearOutlineControllers,c=e(9856),h=c.pointsOnRectangle,u=c.pointsOnEllipse,x=c.writePaths,d=e(93940).newShapes,m=e(93940).createShapeObj,g=e(5968),y=e(60728);function v(_,f){var S,w,E,P=_[f][1],C=_[f][2],O=_.length;return w=_[S=(f+1)%O][1],E=_[S][2],w===P&&E===C&&(w=_[S=(f+2)%O][1],E=_[S][2]),[S,w,E]}X.exports=function _(f,S,w,E){E||(E=0);var P=w.gd;function C(){_(f,S,w,E++),(u(f[0])||w.hasText)&&O({redrawing:!0})}function O(ye){var de={};w.isActiveShape!==void 0&&(w.isActiveShape=!1,de=d(S,w)),w.isActiveSelection!==void 0&&(w.isActiveSelection=!1,de=g(S,w),P._fullLayout._reselect=!0),Object.keys(de).length&&p.call((ye||{}).redrawing?"relayout":"_guiRelayout",P,de)}var R,U,D,N,W,F=P._fullLayout._zoomlayer,j=w.dragmode,q=T(j),te=b(j);if((q||te)&&(P._fullLayout._outlining=!0),l(P),S.attr("d",x(f)),E||!w.isActiveShape&&!w.isActiveSelection||(W=function(ye,de){for(var pe=0;pe<de.length;pe++){var ge=de[pe];ye[pe]=[];for(var ke=0;ke<ge.length;ke++){ye[pe][ke]=[];for(var Ee=0;Ee<ge[ke].length;Ee++)ye[pe][ke][Ee]=ge[ke][Ee]}}return ye}([],f),function(ye){R=[];for(var de=0;de<f.length;de++){var pe=f[de],ge=h(pe),ke=!ge&&u(pe);R[de]=[];for(var Ee=pe.length,me=0;me<Ee;me++)if(pe[me][0]!=="Z"&&(!ke||me===i||me===n||me===r||me===a)){var oe,re=ge&&w.isActiveSelection;re&&(oe=v(pe,me));var fe=pe[me][1],Se=pe[me][2],be=ye.append(re?"rect":"circle").attr("data-i",de).attr("data-j",me).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(re){var we=oe[1]-fe,Me=oe[2]-Se,Ie=Me?5:Math.max(Math.min(25,Math.abs(we)-5),5),Oe=we?5:Math.max(Math.min(25,Math.abs(Me)-5),5);be.classed(Me?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ie).attr("height",Oe).attr("x",fe-Ie/2).attr("y",Se-Oe/2).attr("transform",A(we/2,Me/2))}else be.classed("cursor-grab",!0).attr("r",5).attr("cx",fe).attr("cy",Se);R[de][me]={element:be.node(),gd:P,prepFn:J,doneFn:Y,clickFn:ie},k.init(R[de][me])}}}(F.append("g").attr("class","outline-controllers")),function(){U=[],f.length&&(U[0]={element:S[0][0],gd:P,prepFn:ae,doneFn:ue,clickFn:ve},k.init(U[0]))}()),q&&w.hasText){var ee=F.select(".label-temp"),Q=m(S,w,w.dragmode);y(P,"label-temp",Q,ee)}function J(ye){D=+ye.srcElement.getAttribute("data-i"),N=+ye.srcElement.getAttribute("data-j"),R[D][N].moveFn=K}function K(ye,de){if(f.length){var pe=W[D][N][1],ge=W[D][N][2],ke=f[D],Ee=ke.length;if(h(ke)){var me=ye,oe=de;w.isActiveSelection&&(v(ke,N)[1]===ke[N][1]?oe=0:me=0);for(var re=0;re<Ee;re++)if(re!==N){var fe=ke[re];fe[1]===ke[N][1]&&(fe[1]=pe+me),fe[2]===ke[N][2]&&(fe[2]=ge+oe)}if(ke[N][1]=pe+me,ke[N][2]=ge+oe,!h(ke))for(var Se=0;Se<Ee;Se++)for(var be=0;be<ke[Se].length;be++)ke[Se][be]=W[D][Se][be]}else ke[N][1]=pe+ye,ke[N][2]=ge+de;C()}}function Y(){O()}function ie(ye,de){if(ye===2){D=+de.srcElement.getAttribute("data-i"),N=+de.srcElement.getAttribute("data-j");var pe=f[D];h(pe)||u(pe)||function(){if(f.length&&f[D]&&f[D].length){for(var ge=[],ke=0;ke<f[D].length;ke++)ke!==N&&ge.push(f[D][ke]);ge.length>1&&(ge.length!==2||ge[1][0]!=="Z")&&(N===0&&(ge[0][0]="M"),f[D]=ge,C(),O())}}()}}function se(ye,de){(function(pe,ge){if(f.length)for(var ke=0;ke<f.length;ke++)for(var Ee=0;Ee<f[ke].length;Ee++)for(var me=0;me+2<f[ke][Ee].length;me+=2)f[ke][Ee][me+1]=W[ke][Ee][me+1]+pe,f[ke][Ee][me+2]=W[ke][Ee][me+2]+ge})(ye,de),C()}function ae(ye){(D=+ye.srcElement.getAttribute("data-i"))||(D=0),U[D].moveFn=se}function ue(){O()}function ve(ye){ye===2&&function(de){if(b(de._fullLayout.dragmode)){l(de);var pe=de._fullLayout._activeSelectionIndex,ge=(de.layout||{}).selections||[];if(pe<ge.length){for(var ke=[],Ee=0;Ee<ge.length;Ee++)Ee!==pe&&ke.push(ge[Ee]);delete de._fullLayout._activeSelectionIndex;var me=de._fullLayout.selections[pe];de._fullLayout._deselect={xref:me.xref,yref:me.yref},p.call("_guiRelayout",de,{selections:ke})}}}(P)}}},4016:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(3400),T=e(54460),b=e(9856).readPaths,p=e(55496),s=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),n=e(43616),r=e(31780).arrayEditor,a=e(86476),l=e(93972),c=e(85448),h=e(65152),u=h.getPathString;function x(f){var S=f._fullLayout;for(var w in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var P=0;P<S.shapes.length;P++)S.shapes[P].visible===!0&&g(f,P)}function d(f){return!!f._fullLayout._outlining}function m(f){return!f._context.edits.shapePosition}function g(f,S){f._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=h.makeShapesOptionsAndPlotinfo(f,S),E=w.options,P=w.plotinfo;function C(O){var R=u(f,E),U={"data-index":S,"fill-rule":E.fillrule,d:R},D=E.opacity,N=E.fillcolor,W=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,j=E.line.dash;F||E.editable!==!0||(F=5,j="solid");var q=R[R.length-1]!=="Z",te=m(f)&&E.editable&&f._fullLayout._activeShapeIndex===S;te&&(N=q?"rgba(0,0,0,0)":f._fullLayout.activeshape.fillcolor,D=f._fullLayout.activeshape.opacity);var ee,Q=O.append("g").classed("shape-group",!0).attr({"data-index":S}),J=Q.append("path").attr(U).style("opacity",D).call(i.stroke,W).call(i.fill,N).call(n.dashLine,j,F);if(y(Q,f,E),s(f,S,E,Q),(te||f._context.edits.shapePosition)&&(ee=r(f.layout,"shapes",E)),te){J.style({cursor:"move"});var K={element:J.node(),plotinfo:P,gd:f,editHelpers:ee,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},Y=b(R,f);p(Y,J,K)}else f._context.edits.shapePosition?function(ie,se,ae,ue,ve,ye){var de,pe,ge,ke,Ee,me,oe,re,fe,Se,be,we,Me,Ie,Oe,he,_e=10,Ae=10,De=ae.xsizemode==="pixel",Le=ae.ysizemode==="pixel",Be=ae.type==="line",Ve=ae.type==="path",Ze=ye.modifyItem,rt=A.select(se.node().parentNode),it=T.getFromId(ie,ae.xref),dt=T.getRefType(ae.xref),mt=T.getFromId(ie,ae.yref),ht=T.getRefType(ae.yref),Qe=h.getDataToPixel(ie,it,!1,dt),Je=h.getDataToPixel(ie,mt,!0,ht),wt=h.getPixelToData(ie,it,!1,dt),Pt=h.getPixelToData(ie,mt,!0,ht),It=Be?function(){var tt=10,Re=Math.max(ae.line.width,tt),Fe=ve.append("g").attr("data-index",ue).attr("drag-helper",!0);Fe.append("path").attr("d",se.attr("d")).style({cursor:"move","stroke-width":Re,"stroke-opacity":"0"});var nt={"fill-opacity":"0"},Ge=Math.max(Re/2,tt);return Fe.append("circle").attr({"data-line-point":"start-point",cx:De?Qe(ae.xanchor)+ae.x0:Qe(ae.x0),cy:Le?Je(ae.yanchor)-ae.y0:Je(ae.y0),r:Ge}).style(nt).classed("cursor-grab",!0),Fe.append("circle").attr({"data-line-point":"end-point",cx:De?Qe(ae.xanchor)+ae.x1:Qe(ae.x1),cy:Le?Je(ae.yanchor)-ae.y1:Je(ae.y1),r:Ge}).style(nt).classed("cursor-grab",!0),Fe}():se,At={element:It.node(),gd:ie,prepFn:function(tt){d(ie)||(De&&(Ee=Qe(ae.xanchor)),Le&&(me=Je(ae.yanchor)),ae.type==="path"?Oe=ae.path:(de=De?ae.x0:Qe(ae.x0),pe=Le?ae.y0:Je(ae.y0),ge=De?ae.x1:Qe(ae.x1),ke=Le?ae.y1:Je(ae.y1)),de<ge?(fe=de,Me="x0",Se=ge,Ie="x1"):(fe=ge,Me="x1",Se=de,Ie="x0"),!Le&&pe<ke||Le&&pe>ke?(oe=pe,be="y0",re=ke,we="y1"):(oe=ke,be="y1",re=pe,we="y0"),qe(tt),We(ve,ae),function(Re,Fe,nt){var Ge=Fe.xref,ut=Fe.yref,pt=T.getFromId(nt,Ge),gt=T.getFromId(nt,ut),ct="";Ge==="paper"||pt.autorange||(ct+=Ge),ut==="paper"||gt.autorange||(ct+=ut),n.setClipUrl(Re,ct?"clip"+nt._fullLayout._uid+ct:null,nt)}(se,ae,ie),At.moveFn=he==="move"?Ye:Ne,At.altKey=tt.altKey)},doneFn:function(){d(ie)||(l(se),at(ve),y(se,ie,ae),k.call("_guiRelayout",ie,ye.getUpdateObj()))},clickFn:function(){d(ie)||at(ve)}};function qe(tt){if(d(ie))he=null;else if(Be)he=tt.target.tagName==="path"?"move":tt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Re=At.element.getBoundingClientRect(),Fe=Re.right-Re.left,nt=Re.bottom-Re.top,Ge=tt.clientX-Re.left,ut=tt.clientY-Re.top,pt=!Ve&&Fe>_e&&nt>Ae&&!tt.shiftKey?a.getCursor(Ge/Fe,1-ut/nt):"move";l(se,pt),he=pt.split("-")[0]}}function Ye(tt,Re){if(ae.type==="path"){var Fe=function(ut){return ut},nt=Fe,Ge=Fe;De?Ze("xanchor",ae.xanchor=wt(Ee+tt)):(nt=function(ut){return wt(Qe(ut)+tt)},it&&it.type==="date"&&(nt=h.encodeDate(nt))),Le?Ze("yanchor",ae.yanchor=Pt(me+Re)):(Ge=function(ut){return Pt(Je(ut)+Re)},mt&&mt.type==="date"&&(Ge=h.encodeDate(Ge))),Ze("path",ae.path=v(Oe,nt,Ge))}else De?Ze("xanchor",ae.xanchor=wt(Ee+tt)):(Ze("x0",ae.x0=wt(de+tt)),Ze("x1",ae.x1=wt(ge+tt))),Le?Ze("yanchor",ae.yanchor=Pt(me+Re)):(Ze("y0",ae.y0=Pt(pe+Re)),Ze("y1",ae.y1=Pt(ke+Re)));se.attr("d",u(ie,ae)),We(ve,ae),s(ie,ue,ae,rt)}function Ne(tt,Re){if(Ve){var Fe=function(Wt){return Wt},nt=Fe,Ge=Fe;De?Ze("xanchor",ae.xanchor=wt(Ee+tt)):(nt=function(Wt){return wt(Qe(Wt)+tt)},it&&it.type==="date"&&(nt=h.encodeDate(nt))),Le?Ze("yanchor",ae.yanchor=Pt(me+Re)):(Ge=function(Wt){return Pt(Je(Wt)+Re)},mt&&mt.type==="date"&&(Ge=h.encodeDate(Ge))),Ze("path",ae.path=v(Oe,nt,Ge))}else if(Be){if(he==="resize-over-start-point"){var ut=de+tt,pt=Le?pe-Re:pe+Re;Ze("x0",ae.x0=De?ut:wt(ut)),Ze("y0",ae.y0=Le?pt:Pt(pt))}else if(he==="resize-over-end-point"){var gt=ge+tt,ct=Le?ke-Re:ke+Re;Ze("x1",ae.x1=De?gt:wt(gt)),Ze("y1",ae.y1=Le?ct:Pt(ct))}}else{var Tt=function(Wt){return he.indexOf(Wt)!==-1},vt=Tt("n"),kt=Tt("s"),Lt=Tt("w"),Ct=Tt("e"),Dt=vt?oe+Re:oe,Gt=kt?re+Re:re,tn=Lt?fe+tt:fe,jt=Ct?Se+tt:Se;Le&&(vt&&(Dt=oe-Re),kt&&(Gt=re-Re)),(!Le&&Gt-Dt>Ae||Le&&Dt-Gt>Ae)&&(Ze(be,ae[be]=Le?Dt:Pt(Dt)),Ze(we,ae[we]=Le?Gt:Pt(Gt))),jt-tn>_e&&(Ze(Me,ae[Me]=De?tn:wt(tn)),Ze(Ie,ae[Ie]=De?jt:wt(jt)))}se.attr("d",u(ie,ae)),We(ve,ae),s(ie,ue,ae,rt)}function We(tt,Re){(De||Le)&&function(){var Fe=Re.type!=="path",nt=tt.selectAll(".visual-cue").data([0]);nt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ge=Qe(De?Re.xanchor:o.midRange(Fe?[Re.x0,Re.x1]:h.extractPathCoords(Re.path,c.paramIsX))),ut=Je(Le?Re.yanchor:o.midRange(Fe?[Re.y0,Re.y1]:h.extractPathCoords(Re.path,c.paramIsY)));if(Ge=h.roundPositionForSharpStrokeRendering(Ge,1),ut=h.roundPositionForSharpStrokeRendering(ut,1),De&&Le){var pt="M"+(Ge-1-1)+","+(ut-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";nt.attr("d",pt)}else if(De){var gt="M"+(Ge-1-1)+","+(ut-9-1)+"v18 h2 v-18 Z";nt.attr("d",gt)}else{var ct="M"+(Ge-9-1)+","+(ut-1-1)+"h18 v2 h-18 Z";nt.attr("d",ct)}}()}function at(tt){tt.selectAll(".visual-cue").remove()}a.init(At),It.node().onmousemove=qe}(f,J,E,S,O,ee):E.editable===!0&&J.style("pointer-events",q||i.opacity(N)*D<=.5?"stroke":"all");J.node().addEventListener("click",function(){return function(ie,se){if(m(ie)){var ae=+se.node().getAttribute("data-index");if(ae>=0){if(ae===ie._fullLayout._activeShapeIndex)return void _(ie);ie._fullLayout._activeShapeIndex=ae,ie._fullLayout._deactivateShape=_,x(ie)}}}(f,J)})}E._input&&E.visible===!0&&(E.layer==="above"?C(f._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?C(f._fullLayout._shapeLowerLayer):E.layer==="between"?C(P.shapelayerBetween):P._hadPlotinfo?C((P.mainplotinfo||P).shapelayer):C(f._fullLayout._shapeLowerLayer))}function y(f,S,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(f,E?"clip"+S._fullLayout._uid+E:null,S)}function v(f,S,w){return f.replace(c.segmentRE,function(E){var P=0,C=E.charAt(0),O=c.paramIsX[C],R=c.paramIsY[C],U=c.numParams[C];return C+E.substr(1).replace(c.paramRE,function(D){return P>=U||(O[P]?D=S(D):R[P]&&(D=w(D)),P++),D})})}function _(f){m(f)&&f._fullLayout._activeShapeIndex>=0&&(t(f),delete f._fullLayout._activeShapeIndex,x(f))}X.exports={draw:x,drawOne:g,eraseActiveShape:function(f){if(m(f)){t(f);var S=f._fullLayout._activeShapeIndex,w=(f.layout||{}).shapes||[];if(S<w.length){for(var E=[],P=0;P<w.length;P++)P!==S&&E.push(w[P]);return delete f._fullLayout._activeShapeIndex,k.call("_guiRelayout",f,{shapes:E})}}},drawLabel:s}},92872:function(X,I,e){"use strict";var A=e(67824).overrideAll,k=e(45464),o=e(25376),T=e(98192).u,b=e(92880).extendFlat,p=e(21776).ye,s=e(97728);X.exports=A({newshape:{visible:b({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},k.legend,{}),legendgroup:b({},k.legendgroup,{}),legendgrouptitle:{text:b({},k.legendgrouptitle.text,{}),font:o({})},legendrank:b({},k.legendrank,{}),legendwidth:b({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:p({newshape:!0},{keys:Object.keys(s)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(X){"use strict";X.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(X,I,e){"use strict";var A=e(76308),k=e(3400);X.exports=function(o,T,b){if(b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),k.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var p=(o||{}).plot_bgcolor||"#FFF";b("newshape.line.color",A.contrast(p)),b("newshape.line.dash")}var s=o.dragmode==="drawline",t=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(t||i){b("newshape.label.textangle");var n=b("newshape.label.textposition",s?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(r,a){return r?"bottom":a.indexOf("top")!==-1?"top":a.indexOf("bottom")!==-1?"bottom":"middle"}(s,n)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},9856:function(X,I,e){"use strict";var A=e(21984),k=e(7e3),o=k.CIRCLE_SIDES,T=k.SQRT2,b=e(5840),p=b.p2r,s=b.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function n(a,l){return Math.abs(a-l)<=1e-6}function r(a,l){var c=l[1]-a[1],h=l[2]-a[2];return Math.sqrt(c*c+h*h)}I.writePaths=function(a){var l=a.length;if(!l)return"M0,0Z";for(var c="",h=0;h<l;h++)for(var u=a[h].length,x=0;x<u;x++){var d=a[h][x][0];if(d==="Z")c+="Z";else for(var m=a[h][x].length,g=0;g<m;g++){var y=g;d==="Q"||d==="S"?y=i[g]:d==="C"&&(y=t[g]),c+=a[h][x][y],g>0&&g<m-1&&(c+=",")}}return c},I.readPaths=function(a,l,c,h){var u,x,d,m=A(a),g=[],y=-1,v=0,_=0,f=function(){x=v,d=_};f();for(var S=0;S<m.length;S++){var w,E,P,C,O=[],R=m[S][0],U=R;switch(R){case"M":g[++y]=[],v=+m[S][1],_=+m[S][2],O.push([U,v,_]),f();break;case"Q":case"S":w=+m[S][1],P=+m[S][2],v=+m[S][3],_=+m[S][4],O.push([U,v,_,w,P]);break;case"C":w=+m[S][1],P=+m[S][2],E=+m[S][3],C=+m[S][4],v=+m[S][5],_=+m[S][6],O.push([U,v,_,w,P,E,C]);break;case"T":case"L":v=+m[S][1],_=+m[S][2],O.push([U,v,_]);break;case"H":U="L",v=+m[S][1],O.push([U,v,_]);break;case"V":U="L",_=+m[S][1],O.push([U,v,_]);break;case"A":U="L";var D=+m[S][1],N=+m[S][2];+m[S][4]||(D=-D,N=-N);var W=v-D,F=_;for(u=1;u<=o/2;u++){var j=2*Math.PI*u/o;O.push([U,W+D*Math.cos(j),F+N*Math.sin(j)])}break;case"Z":v===x&&_===d||(v=x,_=d,O.push([U,v,_]))}for(var q=(c||{}).domain,te=l._fullLayout._size,ee=c&&c.xsizemode==="pixel",Q=c&&c.ysizemode==="pixel",J=h===!1,K=0;K<O.length;K++){for(u=0;u+2<7;u+=2){var Y=O[K][u+1],ie=O[K][u+2];Y!==void 0&&ie!==void 0&&(v=Y,_=ie,c&&(c.xaxis&&c.xaxis.p2r?(J&&(Y-=c.xaxis._offset),Y=ee?s(c.xaxis,c.xanchor)+Y:p(c.xaxis,Y)):(J&&(Y-=te.l),q?Y=q.x[0]+Y/te.w:Y/=te.w),c.yaxis&&c.yaxis.p2r?(J&&(ie-=c.yaxis._offset),ie=Q?s(c.yaxis,c.yanchor)-ie:p(c.yaxis,ie)):(J&&(ie-=te.t),ie=q?q.y[1]-ie/te.h:1-ie/te.h)),O[K][u+1]=Y,O[K][u+2]=ie)}g[y].push(O[K].slice())}}return g},I.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var l=1;l<3;l++)if(!n(a[0][l]-a[1][l],a[3][l]-a[2][l])||!n(a[0][l]-a[3][l],a[1][l]-a[2][l]))return!1;return!(!n(a[0][1],a[1][1])&&!n(a[0][1],a[3][1])||!(r(a[0],a[1])*r(a[0],a[3])))},I.pointsOnEllipse=function(a){var l=a.length;if(l!==o+1)return!1;l=o;for(var c=0;c<l;c++){var h=(2*l-c)%l,u=(l/2+h)%l,x=(l/2+c)%l;if(!n(r(a[c],a[x]),r(a[h],a[u])))return!1}return!0},I.handleEllipse=function(a,l,c){if(!a)return[l,c];var h=I.ellipseOver({x0:l[0],y0:l[1],x1:c[0],y1:c[1]}),u=(h.x1+h.x0)/2,x=(h.y1+h.y0)/2,d=(h.x1-h.x0)/2,m=(h.y1-h.y0)/2;d||(d=m/=T),m||(m=d/=T);for(var g=[],y=0;y<o;y++){var v=2*y*Math.PI/o;g.push([u+d*Math.cos(v),x+m*Math.sin(v)])}return g},I.ellipseOver=function(a){var l=a.x0,c=a.y0,h=a.x1,u=a.y1,x=h-l,d=u-c,m=((l-=x)+h)/2,g=((c-=d)+u)/2;return{x0:m-(x*=T),y0:g-(d*=T),x1:m+x,y1:g+d}},I.fixDatesForPaths=function(a,l,c){var h=l.type==="date",u=c.type==="date";if(!h&&!u)return a;for(var x=0;x<a.length;x++)for(var d=0;d<a[x].length;d++)for(var m=0;m+2<a[x][d].length;m+=2)h&&(a[x][d][m+1]=a[x][d][m+1].replace(" ","_")),u&&(a[x][d][m+2]=a[x][d][m+2].replace(" ","_"));return a}},93940:function(X,I,e){"use strict";var A=e(72760),k=A.drawMode,o=A.openMode,T=e(7e3),b=T.i000,p=T.i090,s=T.i180,t=T.i270,i=T.cos45,n=T.sin45,r=e(5840),a=r.p2r,l=r.r2p,c=e(1936).clearOutline,h=e(9856),u=h.readPaths,x=h.writePaths,d=h.ellipseOver,m=h.fixDatesForPaths;function g(y,v,_){var f,S=y[0][0],w=v.gd,E=S.getAttribute("d"),P=w._fullLayout.newshape,C=v.plotinfo,O=v.isActiveShape,R=C.xaxis,U=C.yaxis,D=!!C.domain||!C.xaxis,N=!!C.domain||!C.yaxis,W=o(_),F=u(E,w,C,O),j={editable:!0,visible:P.visible,name:P.name,showlegend:P.showlegend,legend:P.legend,legendwidth:P.legendwidth,legendgroup:P.legendgroup,legendgrouptitle:{text:P.legendgrouptitle.text,font:P.legendgrouptitle.font},legendrank:P.legendrank,label:P.label,xref:D?"paper":R._id,yref:N?"paper":U._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(W||(j.fillcolor=P.fillcolor,j.fillrule=P.fillrule),F.length===1&&(f=F[0]),f&&f.length===5&&_==="drawrect")j.type="rect",j.x0=f[0][1],j.y0=f[0][2],j.x1=f[2][1],j.y1=f[2][2];else if(f&&_==="drawline")j.type="line",j.x0=f[0][1],j.y0=f[0][2],j.x1=f[1][1],j.y1=f[1][2];else if(f&&_==="drawcircle"){j.type="circle";var q=f[b][1],te=f[p][1],ee=f[s][1],Q=f[t][1],J=f[b][2],K=f[p][2],Y=f[s][2],ie=f[t][2],se=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),ae=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");se&&(q=l(C.xaxis,q),te=l(C.xaxis,te),ee=l(C.xaxis,ee),Q=l(C.xaxis,Q)),ae&&(J=l(C.yaxis,J),K=l(C.yaxis,K),Y=l(C.yaxis,Y),ie=l(C.yaxis,ie));var ue=(te+Q)/2,ve=(J+Y)/2,ye=d({x0:ue,y0:ve,x1:ue+(Q-te+ee-q)/2*i,y1:ve+(ie-K+Y-J)/2*n});se&&(ye.x0=a(C.xaxis,ye.x0),ye.x1=a(C.xaxis,ye.x1)),ae&&(ye.y0=a(C.yaxis,ye.y0),ye.y1=a(C.yaxis,ye.y1)),j.x0=ye.x0,j.y0=ye.y0,j.x1=ye.x1,j.y1=ye.y1}else j.type="path",R&&U&&m(F,R,U),j.path=x(F),f=null;return j}X.exports={newShapes:function(y,v){if(y.length&&y[0][0]){var _=v.gd,f=v.isActiveShape,S=v.dragmode,w=(_.layout||{}).shapes||[];if(!k(S)&&f!==void 0){var E=_._fullLayout._activeShapeIndex;if(E<w.length)switch(_._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var P=w[E].path||"";S=P[P.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var C=g(y,v,S);c(_);for(var O=v.editHelpers,R=(O||{}).modifyItem,U=[],D=0;D<w.length;D++){var N=_._fullLayout.shapes[D];if(U[D]=N._input,f!==void 0&&D===_._fullLayout._activeShapeIndex){var W=C;switch(N.type){case"line":case"rect":case"circle":R("x0",W.x0),R("x1",W.x1),R("y0",W.y0),R("y1",W.y1);break;case"path":R("path",W.path)}}}return f===void 0?(U.push(C),U):O?O.getUpdateObj():{}}},createShapeObj:g}},1936:function(X){"use strict";X.exports={clearOutlineControllers:function(I){var e=I._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(I){var e=I._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),I._fullLayout._outlining=!1}}},65152:function(X,I,e){"use strict";var A=e(85448),k=e(3400),o=e(54460);I.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(b){return b}},I.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(b){return b}},I.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},I.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},I.extractPathCoords=function(T,b,p){var s=[];return T.match(A.segmentRE).forEach(function(t){var i=b[t.charAt(0)].drawn;if(i!==void 0){var n=t.substr(1).match(A.paramRE);if(n&&!(n.length<i)){var r=n[i],a=p?r:k.cleanNumber(r);s.push(a)}}}),s},I.getDataToPixel=function(T,b,p,s){var t,i=T._fullLayout._size;if(b)if(s==="domain")t=function(r){return b._length*(p?1-r:r)+b._offset};else{var n=I.shapePositionToRange(b);t=function(r){return b._offset+b.r2p(n(r,!0))},b.type==="date"&&(t=I.decodeDate(t))}else t=p?function(r){return i.t+i.h*(1-r)}:function(r){return i.l+i.w*r};return t},I.getPixelToData=function(T,b,p,s){var t,i=T._fullLayout._size;if(b)if(s==="domain")t=function(r){var a=(r-b._offset)/b._length;return p?1-a:a};else{var n=I.rangeToShapePosition(b);t=function(r){return n(b.p2r(r-b._offset))}}else t=p?function(r){return 1-(r-i.t)/i.h}:function(r){return(r-i.l)/i.w};return t},I.roundPositionForSharpStrokeRendering=function(T,b){var p=Math.round(b%2)===1,s=Math.round(T);return p?s+.5:s},I.makeShapesOptionsAndPlotinfo=function(T,b){var p=T._fullLayout.shapes[b]||{},s=T._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&p.xref!=="paper"&&(s.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&p.yref!=="paper"&&(s.yaxis=T._fullLayout[p.yref+"axis"])),s.xsizemode=p.xsizemode,s.ysizemode=p.ysizemode,s.xanchor=p.xanchor,s.yanchor=p.yanchor,{options:p,plotinfo:s}},I.makeSelectionsOptionsAndPlotinfo=function(T,b){var p=T._fullLayout.selections[b]||{},s=T._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&(s.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&(s.yaxis=T._fullLayout[p.yref+"axis"])),{options:p,plotinfo:s}},I.getPathString=function(T,b){var p,s,t,i,n,r,a,l,c=b.type,h=o.getRefType(b.xref),u=o.getRefType(b.yref),x=o.getFromId(T,b.xref),d=o.getFromId(T,b.yref),m=T._fullLayout._size;if(x?h==="domain"?s=function(P){return x._offset+x._length*P}:(p=I.shapePositionToRange(x),s=function(P){return x._offset+x.r2p(p(P,!0))}):s=function(P){return m.l+m.w*P},d?u==="domain"?i=function(P){return d._offset+d._length*(1-P)}:(t=I.shapePositionToRange(d),i=function(P){return d._offset+d.r2p(t(P,!0))}):i=function(P){return m.t+m.h*(1-P)},c==="path")return x&&x.type==="date"&&(s=I.decodeDate(s)),d&&d.type==="date"&&(i=I.decodeDate(i)),function(P,C,O){var R=P.path,U=P.xsizemode,D=P.ysizemode,N=P.xanchor,W=P.yanchor;return R.replace(A.segmentRE,function(F){var j=0,q=F.charAt(0),te=A.paramIsX[q],ee=A.paramIsY[q],Q=A.numParams[q],J=F.substr(1).replace(A.paramRE,function(K){return te[j]?K=U==="pixel"?C(N)+Number(K):C(K):ee[j]&&(K=D==="pixel"?O(W)-Number(K):O(K)),++j>Q&&(K="X"),K});return j>Q&&(J=J.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+F)),q+J})}(b,s,i);if(b.xsizemode==="pixel"){var g=s(b.xanchor);n=g+b.x0,r=g+b.x1}else n=s(b.x0),r=s(b.x1);if(b.ysizemode==="pixel"){var y=i(b.yanchor);a=y-b.y0,l=y-b.y1}else a=i(b.y0),l=i(b.y1);if(c==="line")return"M"+n+","+a+"L"+r+","+l;if(c==="rect")return"M"+n+","+a+"H"+r+"V"+l+"H"+n+"Z";var v=(n+r)/2,_=(a+l)/2,f=Math.abs(v-n),S=Math.abs(_-a),w="A"+f+","+S,E=v+f+","+_;return"M"+E+w+" 0 1,1 "+v+","+(_-S)+w+" 0 0,1 "+E+"Z"}},41592:function(X,I,e){"use strict";var A=e(4016);X.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:A.draw,drawOne:A.drawOne}},97728:function(X){"use strict";function I(o,T){return T?T.d2l(o):o}function e(o,T){return T?T.l2d(o):o}function A(o,T){return I(o.x1,T)-I(o.x0,T)}function k(o,T,b){return I(o.y1,b)-I(o.y0,b)}X.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,T,b){return o.type!=="line"?void 0:k(o,0,b)/A(o,T)},dx:A,dy:k,width:function(o,T){return Math.abs(A(o,T))},height:function(o,T,b){return Math.abs(k(o,0,b))},length:function(o,T,b){return o.type!=="line"?void 0:Math.sqrt(Math.pow(A(o,T),2)+Math.pow(k(o,0,b),2))},xcenter:function(o,T){return e((I(o.x1,T)+I(o.x0,T))/2,T)},ycenter:function(o,T,b){return e((I(o.y1,b)+I(o.y0,b))/2,b)}}},89861:function(X,I,e){"use strict";var A=e(25376),k=e(66741),o=e(92880).extendDeepAll,T=e(67824).overrideAll,b=e(85656),p=e(31780).templatedArray,s=e(60876),t=p("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});X.exports=T(p("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:A({})},font:A({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(X){"use strict";X.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(X,I,e){"use strict";var A=e(3400),k=e(51272),o=e(89861),T=e(60876).name,b=o.steps;function p(t,i,n){function r(u,x){return A.coerce(t,i,o,u,x)}for(var a=k(t,i,{name:"steps",handleItemDefaults:s}),l=0,c=0;c<a.length;c++)a[c].visible&&l++;if(l<2?i.visible=!1:r("visible")){i._stepCount=l;var h=i._visibleSteps=A.filterVisible(a);(a[r("active")]||{}).visible||(i.active=h[0]._index),r("x"),r("y"),A.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),A.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),A.coerceFont(r,"currentvalue.font",i.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function s(t,i){function n(a,l){return A.coerce(t,i,b,a,l)}if(t.method==="skip"||Array.isArray(t.args)?n("visible"):i.visible=!1){n("method"),n("args");var r=n("label","step-"+i._index);n("value",r),n("execute")}}X.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},79664:function(X,I,e){"use strict";var A=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),p=b.strTranslate,s=e(72736),t=e(31780).arrayEditor,i=e(60876),n=e(84284),r=n.LINE_SPACING,a=n.FROM_TL,l=n.FROM_BR;function c(O){return i.autoMarginIdRoot+O._index}function h(O){return O._index}function u(O,R){var U=T.tester.selectAll("g."+i.labelGroupClass).data(R._visibleSteps);U.enter().append("g").classed(i.labelGroupClass,!0);var D=0,N=0;U.each(function(K){var Y=m(A.select(this),{step:K},R).node();if(Y){var ie=T.bBox(Y);N=Math.max(N,ie.height),D=Math.max(D,ie.width)}}),U.remove();var W=R._dims={};W.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var F=O._fullLayout._size;W.lx=F.l+F.w*R.x,W.ly=F.t+F.h*(1-R.y),R.lenmode==="fraction"?W.outerLength=Math.round(F.w*R.len):W.outerLength=R.len,W.inputAreaStart=0,W.inputAreaLength=Math.round(W.outerLength-R.pad.l-R.pad.r);var j=(W.inputAreaLength-2*i.stepInset)/(R._stepCount-1),q=D+i.labelPadding;if(W.labelStride=Math.max(1,Math.ceil(q/j)),W.labelHeight=N,W.currentValueMaxWidth=0,W.currentValueHeight=0,W.currentValueTotalHeight=0,W.currentValueMaxLines=1,R.currentvalue.visible){var te=T.tester.append("g");U.each(function(K){var Y=x(te,R,K.label),ie=Y.node()&&T.bBox(Y.node())||{width:0,height:0},se=s.lineCount(Y);W.currentValueMaxWidth=Math.max(W.currentValueMaxWidth,Math.ceil(ie.width)),W.currentValueHeight=Math.max(W.currentValueHeight,Math.ceil(ie.height)),W.currentValueMaxLines=Math.max(W.currentValueMaxLines,se)}),W.currentValueTotalHeight=W.currentValueHeight+R.currentvalue.offset,te.remove()}W.height=W.currentValueTotalHeight+i.tickOffset+R.ticklen+i.labelOffset+W.labelHeight+R.pad.t+R.pad.b;var ee="left";b.isRightAnchor(R)&&(W.lx-=W.outerLength,ee="right"),b.isCenterAnchor(R)&&(W.lx-=W.outerLength/2,ee="center");var Q="top";b.isBottomAnchor(R)&&(W.ly-=W.height,Q="bottom"),b.isMiddleAnchor(R)&&(W.ly-=W.height/2,Q="middle"),W.outerLength=Math.ceil(W.outerLength),W.height=Math.ceil(W.height),W.lx=Math.round(W.lx),W.ly=Math.round(W.ly);var J={y:R.y,b:W.height*l[Q],t:W.height*a[Q]};R.lenmode==="fraction"?(J.l=0,J.xl=R.x-R.len*a[ee],J.r=0,J.xr=R.x+R.len*l[ee]):(J.x=R.x,J.l=W.outerLength*a[ee],J.r=W.outerLength*l[ee]),k.autoMargin(O,c(R),J)}function x(O,R,U){if(R.currentvalue.visible){var D,N,W=R._dims;switch(R.currentvalue.xanchor){case"right":D=W.inputAreaLength-i.currentValueInset-W.currentValueMaxWidth,N="left";break;case"center":D=.5*W.inputAreaLength,N="middle";break;default:D=i.currentValueInset,N="left"}var F=b.ensureSingle(O,"text",i.labelClass,function(J){J.attr({"text-anchor":N,"data-notex":1})}),j=R.currentvalue.prefix?R.currentvalue.prefix:"";if(typeof U=="string")j+=U;else{var q=R.steps[R.active].label,te=R._gd._fullLayout._meta;te&&(q=b.templateString(q,te)),j+=q}R.currentvalue.suffix&&(j+=R.currentvalue.suffix),F.call(T.font,R.currentvalue.font).text(j).call(s.convertToTspans,R._gd);var ee=s.lineCount(F),Q=(W.currentValueMaxLines+1-ee)*R.currentvalue.font.size*r;return s.positionText(F,D,Q),F}}function d(O,R,U){b.ensureSingle(O,"rect",i.gripRectClass,function(D){D.call(_,R,O,U).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(o.stroke,U.bordercolor).call(o.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function m(O,R,U){var D=b.ensureSingle(O,"text",i.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),N=R.step.label,W=U._gd._fullLayout._meta;return W&&(N=b.templateString(N,W)),D.call(T.font,U.font).text(N).call(s.convertToTspans,U._gd),D}function g(O,R){var U=b.ensureSingle(O,"g",i.labelsClass),D=R._dims,N=U.selectAll("g."+i.labelGroupClass).data(D.labelSteps);N.enter().append("g").classed(i.labelGroupClass,!0),N.exit().remove(),N.each(function(W){var F=A.select(this);F.call(m,W,R),T.setTranslate(F,w(R,W.fraction),i.tickOffset+R.ticklen+R.font.size*r+i.labelOffset+D.currentValueTotalHeight)})}function y(O,R,U,D,N){var W=Math.round(D*(U._stepCount-1)),F=U._visibleSteps[W]._index;F!==U.active&&v(O,R,U,F,!0,N)}function v(O,R,U,D,N,W){var F=U.active;U.active=D,t(O.layout,i.name,U).applyUpdate("active",D);var j=U.steps[U.active];R.call(S,U,W),R.call(x,U),O.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:N,previousActive:F}),j&&j.method&&N&&(R._nextMethod?(R._nextMethod.step=j,R._nextMethod.doCallback=N,R._nextMethod.doTransition=W):(R._nextMethod={step:j,doCallback:N,doTransition:W},R._nextMethodRaf=window.requestAnimationFrame(function(){var q=R._nextMethod.step;q.method&&(q.execute&&k.executeAPICommand(O,q.method,q.args),R._nextMethod=null,R._nextMethodRaf=null)})))}function _(O,R,U){if(!R._context.staticPlot){var D=U.node(),N=A.select(R);O.on("mousedown",F),O.on("touchstart",F)}function W(){return U.data()[0]}function F(){var j=W();R.emit("plotly_sliderstart",{slider:j});var q=U.select("."+i.gripRectClass);A.event.stopPropagation(),A.event.preventDefault(),q.call(o.fill,j.activebgcolor);var te=E(j,A.mouse(D)[0]);function ee(){var J=W(),K=E(J,A.mouse(D)[0]);y(R,U,J,K,!1)}function Q(){var J=W();J._dragging=!1,q.call(o.fill,J.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),R.emit("plotly_sliderend",{slider:J,step:J.steps[J.active]})}y(R,U,j,te,!0),j._dragging=!0,N.on("mousemove",ee),N.on("touchmove",ee),N.on("mouseup",Q),N.on("touchend",Q)}}function f(O,R){var U=O.selectAll("rect."+i.tickRectClass).data(R._visibleSteps),D=R._dims;U.enter().append("rect").classed(i.tickRectClass,!0),U.exit().remove(),U.attr({width:R.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(N,W){var F=W%D.labelStride==0,j=A.select(this);j.attr({height:F?R.ticklen:R.minorticklen}).call(o.fill,R.tickcolor),T.setTranslate(j,w(R,W/(R._stepCount-1))-.5*R.tickwidth,(F?i.tickOffset:i.minorTickOffset)+D.currentValueTotalHeight)})}function S(O,R,U){for(var D=O.select("rect."+i.gripRectClass),N=0,W=0;W<R._stepCount;W++)if(R._visibleSteps[W]._index===R.active){N=W;break}var F=w(R,N/(R._stepCount-1));if(!R._invokingCommand){var j=D;U&&R.transition.duration>0&&(j=j.transition().duration(R.transition.duration).ease(R.transition.easing)),j.attr("transform",p(F-.5*i.gripWidth,R._dims.currentValueTotalHeight))}}function w(O,R){var U=O._dims;return U.inputAreaStart+i.stepInset+(U.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,R))}function E(O,R){var U=O._dims;return Math.min(1,Math.max(0,(R-i.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*i.stepInset-2*U.inputAreaStart)))}function P(O,R,U){var D=U._dims,N=b.ensureSingle(O,"rect",i.railTouchRectClass,function(W){W.call(_,R,O,U).style("pointer-events","all")});N.attr({width:D.inputAreaLength,height:Math.max(D.inputAreaWidth,i.tickOffset+U.ticklen+D.labelHeight)}).call(o.fill,U.bgcolor).attr("opacity",0),T.setTranslate(N,0,D.currentValueTotalHeight)}function C(O,R){var U=R._dims,D=U.inputAreaLength-2*i.railInset,N=b.ensureSingle(O,"rect",i.railRectClass);N.attr({width:D,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,R.bordercolor).call(o.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),T.setTranslate(N,i.railInset,.5*(U.inputAreaWidth-i.railWidth)+U.currentValueTotalHeight)}X.exports=function(O){var R=O._context.staticPlot,U=O._fullLayout,D=function(te,ee){for(var Q=te[i.name],J=[],K=0;K<Q.length;K++){var Y=Q[K];Y.visible&&(Y._gd=ee,J.push(Y))}return J}(U,O),N=U._infolayer.selectAll("g."+i.containerClassName).data(D.length>0?[0]:[]);function W(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),k.autoMargin(O,c(te))}if(N.enter().append("g").classed(i.containerClassName,!0).style("cursor",R?null:"ew-resize"),N.exit().each(function(){A.select(this).selectAll("g."+i.groupClassName).each(W)}).remove(),D.length!==0){var F=N.selectAll("g."+i.groupClassName).data(D,h);F.enter().append("g").classed(i.groupClassName,!0),F.exit().each(W).remove();for(var j=0;j<D.length;j++){var q=D[j];u(O,q)}F.each(function(te){var ee=A.select(this);(function(Q){var J=Q._dims;J.labelSteps=[];for(var K=Q._stepCount,Y=0;Y<K;Y+=J.labelStride)J.labelSteps.push({fraction:Y/(K-1),step:Q._visibleSteps[Y]})})(te),k.manageCommandObserver(O,te,te._visibleSteps,function(Q){var J=ee.data()[0];J.active!==Q.index&&(J._dragging||v(O,ee,J,Q.index,!1,!0))}),function(Q,J,K){(K.steps[K.active]||{}).visible||(K.active=K._visibleSteps[0]._index),J.call(x,K).call(C,K).call(g,K).call(f,K).call(P,Q,K).call(d,Q,K);var Y=K._dims;T.setTranslate(J,Y.lx+K.pad.l,Y.ly+K.pad.t),J.call(S,K,!1),J.call(x,K)}(O,A.select(this),te)})}}},97544:function(X,I,e){"use strict";var A=e(60876);X.exports={moduleType:"component",name:A.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),p=b.strTranslate,s=e(43616),t=e(76308),i=e(72736),n=e(13448),r=e(84284).OPPOSITE_SIDE,a=/ [XY][0-9]* /;X.exports={draw:function(l,c,h){var u,x=h.propContainer,d=h.propName,m=h.placeholder,g=h.traceIndex,y=h.avoid||{},v=h.attributes,_=h.transform,f=h.containerGroup,S=l._fullLayout,w=1,E=!1,P=x.title,C=(P&&P.text?P.text:"").trim(),O=P&&P.font?P.font:{},R=O.family,U=O.size,D=O.color,N=O.weight,W=O.style,F=O.variant,j=O.textcase,q=O.lineposition,te=O.shadow;d==="title.text"?u="titleText":d.indexOf("axis")!==-1?u="axisTitleText":d.indexOf(!0)&&(u="colorbarTitleText");var ee=l._context.edits[u];C===""?w=0:C.replace(a," % ")===m.replace(a," % ")&&(w=.2,E=!0,ee||(C="")),h._meta?C=b.templateString(C,h._meta):S._meta&&(C=b.templateString(C,S._meta));var Q,J=C||ee;f||(f=b.ensureSingle(S._infolayer,"g","g-"+c),Q=S._hColorbarMoveTitle);var K=f.selectAll("text").data(J?[0]:[]);if(K.enter().append("text"),K.text(C).attr("class",c),K.exit().remove(),!J)return f;function Y(ae){b.syncOrAsync([ie,se],ae)}function ie(ae){var ue;return!_&&Q&&(_={}),_?(ue="",_.rotate&&(ue+="rotate("+[_.rotate,v.x,v.y]+")"),(_.offset||Q)&&(ue+=p(0,(_.offset||0)-(Q||0)))):ue=null,ae.attr("transform",ue),ae.style("opacity",w*t.opacity(D)).call(s.font,{color:t.rgb(D),size:A.round(U,2),family:R,weight:N,style:W,variant:F,textcase:j,shadow:te,lineposition:q}).attr(v).call(i.convertToTspans,l),o.previousPromises(l)}function se(ae){var ue=A.select(ae.node().parentNode);if(y&&y.selection&&y.side&&C){ue.attr("transform",null);var ve=r[y.side],ye=y.side==="left"||y.side==="top"?-1:1,de=k(y.pad)?y.pad:2,pe=s.bBox(ue.node()),ge={t:0,b:0,l:0,r:0},ke=l._fullLayout._reservedMargin;for(var Ee in ke)for(var me in ke[Ee]){var oe=ke[Ee][me];ge[me]=Math.max(ge[me],oe)}var re={left:ge.l,top:ge.t,right:S.width-ge.r,bottom:S.height-ge.b},fe=y.maxShift||ye*(re[y.side]-pe[y.side]),Se=0;if(fe<0)Se=fe;else{var be=y.offsetLeft||0,we=y.offsetTop||0;pe.left-=be,pe.right-=be,pe.top-=we,pe.bottom-=we,y.selection.each(function(){var Ie=s.bBox(this);b.bBoxIntersect(pe,Ie,de)&&(Se=Math.max(Se,ye*(Ie[y.side]-pe[ve])+de))}),Se=Math.min(fe,Se),x._titleScoot=Math.abs(Se)}if(Se>0||fe<0){var Me={left:[-Se,0],right:[Se,0],top:[0,-Se],bottom:[0,Se]}[y.side];ue.attr("transform",p(Me[0],Me[1]))}}}return K.call(Y),ee&&(C?K.on(".opacity",null):(w=0,E=!0,K.text(m).on("mouseover.opacity",function(){A.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){A.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})),K.call(i.makeEditable,{gd:l}).on("edit",function(ae){g!==void 0?T.call("_guiRestyle",l,d,ae,g):T.call("_guiRelayout",l,d,ae)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Y)}).on("input",function(ae){this.text(ae||" ").call(i.positionText,v.x,v.y)})),K.classed("js-placeholder",E),f}}},88444:function(X,I,e){"use strict";var A=e(25376),k=e(22548),o=e(92880).extendFlat,T=e(67824).overrideAll,b=e(66741),p=e(31780).templatedArray,s=p("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});X.exports=T(p("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(b({editType:"arraydraw"}),{}),font:A({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(X){"use strict";X.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},91384:function(X,I,e){"use strict";var A=e(3400),k=e(51272),o=e(88444),T=e(73712).name,b=o.buttons;function p(t,i,n){function r(a,l){return A.coerce(t,i,o,a,l)}r("visible",k(t,i,{name:"buttons",handleItemDefaults:s}).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),A.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),A.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function s(t,i){function n(r,a){return A.coerce(t,i,b,r,a)}n("visible",t.method==="skip"||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}X.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:p})}},14420:function(X,I,e){"use strict";var A=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),p=e(72736),s=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),n=e(37400);function r(w){return w._index}function a(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function l(w,E,P,C,O,R,U,D){E.active=U,s(w.layout,i.name,E).applyUpdate("active",U),E.type==="buttons"?h(w,C,null,null,E):E.type==="dropdown"&&(O.attr(i.menuIndexAttrName,"-1"),c(w,C,O,R,E),D||h(w,C,O,R,E))}function c(w,E,P,C,O){var R=b.ensureSingle(E,"g",i.headerClassName,function(j){j.style("pointer-events","all")}),U=O._dims,D=O.active,N=O.buttons[D]||i.blankHeaderOpts,W={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},F={width:U.headerWidth,height:U.headerHeight};R.call(u,O,N,w).call(f,O,W,F),b.ensureSingle(E,"text",i.headerArrowClassName,function(j){j.attr("text-anchor","end").call(T.font,O.font).text(i.arrowSymbol[O.direction])}).attr({x:U.headerWidth-i.arrowOffsetX+O.pad.l,y:U.headerHeight/2+i.textOffsetY+O.pad.t}),R.on("click",function(){P.call(S,String(a(P,O)?-1:O._index)),h(w,E,P,C,O)}),R.on("mouseover",function(){R.call(g)}),R.on("mouseout",function(){R.call(y,O)}),T.setTranslate(E,U.lx,U.ly)}function h(w,E,P,C,O){P||(P=E).attr("pointer-events","all");var R=function(J){return+J.attr(i.menuIndexAttrName)==-1}(P)&&O.type!=="buttons"?[]:O.buttons,U=O.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,D=P.selectAll("g."+U).data(b.filterVisible(R)),N=D.enter().append("g").classed(U,!0),W=D.exit();O.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),W.transition().attr("opacity","0").remove()):W.remove();var F=0,j=0,q=O._dims,te=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(te?j=q.headerHeight+i.gapButtonHeader:F=q.headerWidth+i.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(j=-i.gapButtonHeader+i.gapButton-q.openHeight),O.type==="dropdown"&&O.direction==="left"&&(F=-i.gapButtonHeader+i.gapButton-q.openWidth);var ee={x:q.lx+F+O.pad.l,y:q.ly+j+O.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},Q={l:ee.x+O.borderwidth,t:ee.y+O.borderwidth};D.each(function(J,K){var Y=A.select(this);Y.call(u,O,J,w).call(f,O,ee),Y.on("click",function(){A.event.defaultPrevented||(J.execute&&(J.args2&&O.active===K?(l(w,O,0,E,P,C,-1),k.executeAPICommand(w,J.method,J.args2)):(l(w,O,0,E,P,C,K),k.executeAPICommand(w,J.method,J.args))),w.emit("plotly_buttonclicked",{menu:O,button:J,active:O.active}))}),Y.on("mouseover",function(){Y.call(g)}),Y.on("mouseout",function(){Y.call(y,O),D.call(m,O)})}),D.call(m,O),te?(Q.w=Math.max(q.openWidth,q.headerWidth),Q.h=ee.y-Q.t):(Q.w=ee.x-Q.l,Q.h=Math.max(q.openHeight,q.headerHeight)),Q.direction=O.direction,C&&(D.size()?function(J,K,Y,ie,se,ae){var ue,ve,ye,de=se.direction,pe=de==="up"||de==="down",ge=se._dims,ke=se.active;if(pe)for(ve=0,ye=0;ye<ke;ye++)ve+=ge.heights[ye]+i.gapButton;else for(ue=0,ye=0;ye<ke;ye++)ue+=ge.widths[ye]+i.gapButton;ie.enable(ae,ue,ve),ie.hbar&&ie.hbar.attr("opacity","0").transition().attr("opacity","1"),ie.vbar&&ie.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,O,Q):function(J){var K=!!J.hbar,Y=!!J.vbar;K&&J.hbar.transition().attr("opacity","0").each("end",function(){K=!1,Y||J.disable()}),Y&&J.vbar.transition().attr("opacity","0").each("end",function(){Y=!1,K||J.disable()})}(C))}function u(w,E,P,C){w.call(x,E).call(d,E,P,C)}function x(w,E){b.ensureSingle(w,"rect",i.itemRectClassName,function(P){P.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,E.bordercolor).call(o.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function d(w,E,P,C){var O=b.ensureSingle(w,"text",i.itemTextClassName,function(D){D.attr({"text-anchor":"start","data-notex":1})}),R=P.label,U=C._fullLayout._meta;U&&(R=b.templateString(R,U)),O.call(T.font,E.font).text(R).call(p.convertToTspans,C)}function m(w,E){var P=E.active;w.each(function(C,O){var R=A.select(this);O===P&&E.showactive&&R.select("rect."+i.itemRectClassName).call(o.fill,i.activeColor)})}function g(w){w.select("rect."+i.itemRectClassName).call(o.fill,i.hoverColor)}function y(w,E){w.select("rect."+i.itemRectClassName).call(o.fill,E.bgcolor)}function v(w,E){var P=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));C.enter().append("g").classed(i.dropdownButtonClassName,!0);var O=["up","down"].indexOf(E.direction)!==-1;C.each(function(F,j){var q=A.select(this);q.call(u,E,F,w);var te=q.select("."+i.itemTextClassName),ee=te.node()&&T.bBox(te.node()).width,Q=Math.max(ee+i.textPadX,i.minWidth),J=E.font.size*t,K=p.lineCount(te),Y=Math.max(J*K,i.minHeight)+i.textOffsetY;Y=Math.ceil(Y),Q=Math.ceil(Q),P.widths[j]=Q,P.heights[j]=Y,P.height1=Math.max(P.height1,Y),P.width1=Math.max(P.width1,Q),O?(P.totalWidth=Math.max(P.totalWidth,Q),P.openWidth=P.totalWidth,P.totalHeight+=Y+i.gapButton,P.openHeight+=Y+i.gapButton):(P.totalWidth+=Q+i.gapButton,P.openWidth+=Q+i.gapButton,P.totalHeight=Math.max(P.totalHeight,Y),P.openHeight=P.totalHeight)}),O?P.totalHeight-=i.gapButton:P.totalWidth-=i.gapButton,P.headerWidth=P.width1+i.arrowPadX,P.headerHeight=P.height1,E.type==="dropdown"&&(O?(P.width1+=i.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=i.arrowPadX),C.remove();var R=P.totalWidth+E.pad.l+E.pad.r,U=P.totalHeight+E.pad.t+E.pad.b,D=w._fullLayout._size;P.lx=D.l+D.w*E.x,P.ly=D.t+D.h*(1-E.y);var N="left";b.isRightAnchor(E)&&(P.lx-=R,N="right"),b.isCenterAnchor(E)&&(P.lx-=R/2,N="center");var W="top";b.isBottomAnchor(E)&&(P.ly-=U,W="bottom"),b.isMiddleAnchor(E)&&(P.ly-=U/2,W="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),k.autoMargin(w,_(E),{x:E.x,y:E.y,l:R*({right:1,center:.5}[N]||0),r:R*({left:1,center:.5}[N]||0),b:U*({top:1,middle:.5}[W]||0),t:U*({bottom:1,middle:.5}[W]||0)})}function _(w){return i.autoMarginIdRoot+w._index}function f(w,E,P,C){C=C||{};var O=w.select("."+i.itemRectClassName),R=w.select("."+i.itemTextClassName),U=E.borderwidth,D=P.index,N=E._dims;T.setTranslate(w,U+P.x,U+P.y);var W=["up","down"].indexOf(E.direction)!==-1,F=C.height||(W?N.heights[D]:N.height1);O.attr({x:0,y:0,width:C.width||(W?N.width1:N.widths[D]),height:F});var j=E.font.size*t,q=(p.lineCount(R)-1)*j/2;p.positionText(R,i.textOffsetX,F/2-q+i.textOffsetY),W?P.y+=N.heights[D]+P.yPad:P.x+=N.widths[D]+P.xPad,P.index++}function S(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}X.exports=function(w){var E=w._fullLayout,P=b.filterVisible(E[i.name]);function C(j){k.autoMargin(w,_(j))}var O=E._menulayer.selectAll("g."+i.containerClassName).data(P.length>0?[0]:[]);if(O.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){A.select(this).selectAll("g."+i.headerGroupClassName).each(C)}).remove(),P.length!==0){var R=O.selectAll("g."+i.headerGroupClassName).data(P,r);R.enter().append("g").classed(i.headerGroupClassName,!0);for(var U=b.ensureSingle(O,"g",i.dropdownButtonGroupClassName,function(j){j.style("pointer-events","all")}),D=0;D<P.length;D++){var N=P[D];v(w,N)}var W="updatemenus"+E._uid,F=new n(w,U,W);R.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(S)),R.exit().each(function(j){U.call(S),C(j)}).remove(),R.each(function(j){var q=A.select(this),te=j.type==="dropdown"?U:null;k.manageCommandObserver(w,j,j.buttons,function(ee){l(w,j,j.buttons[ee.index],q,te,F,ee.index,!0)}),j.type==="dropdown"?(c(w,q,U,F,j),a(U,j)&&h(w,q,U,F,j)):h(w,q,null,null,j)})}}},76908:function(X,I,e){"use strict";var A=e(73712);X.exports={moduleType:"component",name:A.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(X,I,e){"use strict";X.exports=b;var A=e(33428),k=e(76308),o=e(43616),T=e(3400);function b(p,s,t){this.gd=p,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(p,s,t){var i=this.gd._fullLayout,n=i.width,r=i.height;this.position=p;var a,l,c,h,u=this.position.l,x=this.position.w,d=this.position.t,m=this.position.h,g=this.position.direction,y=g==="down",v=g==="left",_=g==="up",f=x,S=m;y||v||g==="right"||_||(this.position.direction="down",y=!0),y||_?(l=(a=u)+f,y?(c=d,S=(h=Math.min(c+S,r))-c):S=(h=d+S)-(c=Math.max(h-S,0))):(h=(c=d)+S,v?f=(l=u+f)-(a=Math.max(l-f,0)):(a=u,f=(l=Math.min(a+f,n))-a)),this._box={l:a,t:c,w:f,h:S};var w=x>f,E=b.barLength+2*b.barPad,P=b.barWidth+2*b.barPad,C=u,O=d+m;O+P>r&&(O=r-P);var R=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),w?(this.hbar=R.attr({rx:b.barRadius,ry:b.barRadius,x:C,y:O,width:E,height:P}),this._hbarXMin=C+E/2,this._hbarTranslateMax=f-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=m>S,D=b.barWidth+2*b.barPad,N=b.barLength+2*b.barPad,W=u+x,F=d;W+D>n&&(W=n-D);var j=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);j.exit().on(".drag",null).remove(),j.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),U?(this.vbar=j.attr({rx:b.barRadius,ry:b.barRadius,x:W,y:F,width:D,height:N}),this._vbarYMin=F+N/2,this._vbarTranslateMax=S-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,te=a-.5,ee=U?l+D+.5:l+.5,Q=c-.5,J=w?h+P+.5:h+.5,K=i._topdefs.selectAll("#"+q).data(w||U?[0]:[]);if(K.exit().remove(),K.enter().append("clipPath").attr("id",q).append("rect"),w||U?(this._clipRect=K.select("rect").attr({x:Math.floor(te),y:Math.floor(Q),width:Math.ceil(ee)-Math.floor(te),height:Math.ceil(J)-Math.floor(Q)}),this.container.call(o.setClipUrl,q,this.gd),this.bg.attr({x:u,y:d,width:x,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),w||U){var Y=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Y);var ie=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault(),A.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(ie),U&&this.vbar.on(".drag",null).call(ie)}this.setTranslate(s,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p-=A.event.dx),this.vbar&&(s-=A.event.dy),this.setTranslate(p,s)},b.prototype._onBoxWheel=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p+=A.event.deltaY),this.vbar&&(s+=A.event.deltaY),this.setTranslate(p,s)},b.prototype._onBarDrag=function(){var p=this.translateX,s=this.translateY;if(this.hbar){var t=p+this._hbarXMin,i=t+this._hbarTranslateMax;p=(T.constrain(A.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var n=s+this._vbarYMin,r=n+this._vbarTranslateMax;s=(T.constrain(A.event.y,n,r)-n)/(r-n)*(this.position.h-this._box.h)}this.setTranslate(p,s)},b.prototype.setTranslate=function(p,s){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(p=T.constrain(p||0,0,t),s=T.constrain(s||0,0,i),this.translateX=p,this.translateY=s,this.container.call(o.setTranslate,this._box.l-this.position.l-p,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+p-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var n=p/t;this.hbar.call(o.setTranslate,p+n*this._hbarTranslateMax,s)}if(this.vbar){var r=s/i;this.vbar.call(o.setTranslate,p,s+r*this._vbarTranslateMax)}}},84284:function(X){"use strict";X.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(X){"use strict";X.exports={axisRefDescription:function(I,e,A){return["If set to a",I,"axis id (e.g. *"+I+"* or","*"+I+"2*), the `"+I+"` position refers to a",I,"coordinate. If set to *paper*, the `"+I+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+A+"). If set to a",I,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+I+"2 domain* refers to the domain of the second",I," axis and a",I,"position of 0.5 refers to the","point between the",e,"and the",A,"of the domain of the","second",I,"axis."].join(" ")}}},48164:function(X){"use strict";X.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},26880:function(X){"use strict";X.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(X){"use strict";X.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(X){"use strict";X.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(X){"use strict";X.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},13448:function(X){"use strict";X.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(X){"use strict";X.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(X,I){"use strict";I.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],I.STYLE=I.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(X,I){"use strict";I.xmlns="http://www.w3.org/2000/xmlns/",I.svg="http://www.w3.org/2000/svg",I.xlink="http://www.w3.org/1999/xlink",I.svgAttrs={xmlns:I.svg,"xmlns:xlink":I.xlink}},64884:function(X,I,e){"use strict";I.version=e(25788).version,e(88324),e(79288);for(var A=e(24040),k=I.register=A.register,o=e(22448),T=Object.keys(o),b=0;b<T.length;b++){var p=T[b];p.charAt(0)!=="_"&&(I[p]=o[p]),k({moduleType:"apiMethod",name:p,fn:o[p]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),I.Icons=e(9224);var s=e(93024),t=e(7316);I.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},I.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},I.Snapshot=e(78904),I.PlotSchema=e(73060)},9224:function(X){"use strict";X.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(X,I){"use strict";I.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},I.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},I.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},I.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},I.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},I.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(X,I,e){"use strict";var A=e(20435),k=A.mod,o=A.modHalf,T=Math.PI,b=2*T;function p(n){return Math.abs(n[1]-n[0])>b-1e-14}function s(n,r){return o(r-n,b)}function t(n,r){if(p(r))return!0;var a,l;r[0]<r[1]?(a=r[0],l=r[1]):(a=r[1],l=r[0]),(a=k(a,b))>(l=k(l,b))&&(l+=b);var c=k(n,b),h=c+b;return c>=a&&c<=l||h>=a&&h<=l}function i(n,r,a,l,c,h,u){c=c||0,h=h||0;var x,d,m,g,y,v=p([a,l]);function _(E,P){return[E*Math.cos(P)+c,h-E*Math.sin(P)]}v?(x=0,d=T,m=b):a<l?(x=a,m=l):(x=l,m=a),n<r?(g=n,y=r):(g=r,y=n);var f,S=Math.abs(m-x)<=T?0:1;function w(E,P,C){return"A"+[E,E]+" "+[0,S,C]+" "+_(E,P)}return v?f=g===null?"M"+_(y,x)+w(y,d,0)+w(y,m,0)+"Z":"M"+_(g,x)+w(g,d,0)+w(g,m,0)+"ZM"+_(y,x)+w(y,d,1)+w(y,m,1)+"Z":g===null?(f="M"+_(y,x)+w(y,m,0),u&&(f+="L0,0Z")):f="M"+_(g,x)+"L"+_(y,x)+w(y,m,0)+"L"+_(g,m)+w(g,x,1)+"Z",f}X.exports={deg2rad:function(n){return n/180*T},rad2deg:function(n){return n/T*180},angleDelta:s,angleDist:function(n,r){return Math.abs(s(n,r))},isFullCircle:p,isAngleInsideSector:t,isPtInsideSector:function(n,r,a,l){return!!t(r,l)&&(a[0]<a[1]?(c=a[0],h=a[1]):(c=a[1],h=a[0]),n>=c&&n<=h);var c,h},pathArc:function(n,r,a,l,c){return i(null,n,r,a,l,c,0)},pathSector:function(n,r,a,l,c){return i(null,n,r,a,l,c,1)},pathAnnulus:function(n,r,a,l,c,h){return i(n,r,a,l,c,h,1)}}},38116:function(X,I,e){"use strict";var A=e(83160).decode,k=e(63620),o=Array.isArray,T=ArrayBuffer,b=DataView;function p(r){return T.isView(r)&&!(r instanceof b)}function s(r){return o(r)||p(r)}I.isTypedArray=p,I.isArrayOrTypedArray=s,I.isArray1D=function(r){return!s(r[0])},I.ensureArray=function(r,a){return o(r)||(r=[]),r.length=a,r};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function i(r){return r.constructor===ArrayBuffer}function n(r,a,l){if(s(r)){if(s(r[0])){for(var c=l,h=0;h<r.length;h++)c=a(c,r[h].length);return c}return r.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,I.isArrayBuffer=i,I.decodeTypedArraySpec=function(r){var a=[],l=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(r),c=l.dtype,h=t[c];if(!h)throw new Error('Error in dtype: "'+c+'"');var u=h.BYTES_PER_ELEMENT,x=l.bdata;i(x)||(x=A(x));var d=l.shape===void 0?[x.byteLength/u]:(""+l.shape).split(",");d.reverse();var m,g,y=d.length,v=+d[0],_=u*v,f=0;if(y===1)a=new h(x);else if(y===2)for(m=+d[1],g=0;g<m;g++)a[g]=new h(x,f,v),f+=_;else{if(y!==3)throw new Error("ndim: "+y+'is not supported with the shape:"'+l.shape+'"');m=+d[1];for(var S=+d[2],w=0;w<S;w++)for(a[w]=[],g=0;g<m;g++)a[w][g]=new h(x,f,v),f+=_}return a.bdata=l.bdata,a.dtype=l.dtype,a.shape=d.reverse().join(","),r._inputArray=a,a},I.isTypedArraySpec=function(r){return k(r)&&r.hasOwnProperty("dtype")&&typeof r.dtype=="string"&&r.hasOwnProperty("bdata")&&(typeof r.bdata=="string"||i(r.bdata))&&(r.shape===void 0||r.hasOwnProperty("shape")&&(typeof r.shape=="string"||typeof r.shape=="number"))},I.concat=function(){var r,a,l,c,h,u,x,d,m=[],g=!0,y=0;for(l=0;l<arguments.length;l++)(u=(c=arguments[l]).length)&&(a?m.push(c):(a=c,h=u),o(c)?r=!1:(g=!1,y?r!==c.constructor&&(r=!1):r=c.constructor),y+=u);if(!y)return[];if(!m.length)return a;if(g)return a.concat.apply(a,m);if(r){for((x=new r(y)).set(a),l=0;l<m.length;l++)c=m[l],x.set(c,h),h+=c.length;return x}for(x=new Array(y),d=0;d<a.length;d++)x[d]=a[d];for(l=0;l<m.length;l++){for(c=m[l],d=0;d<c.length;d++)x[h+d]=c[d];h+=d}return x},I.maxRowLength=function(r){return n(r,Math.max,0)},I.minRowLength=function(r){return n(r,Math.min,1/0)}},54037:function(X,I,e){"use strict";var A=e(38248),k=e(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;X.exports=function(T){return typeof T=="string"&&(T=T.replace(o,"")),A(T)?Number(T):k}},73696:function(X){"use strict";X.exports=function(I){var e=I._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(A){A.regl&&A.regl.clear({color:!0,depth:!0})})}},75352:function(X){"use strict";X.exports=function(I){I._responsiveChartHandler&&(window.removeEventListener("resize",I._responsiveChartHandler),delete I._responsiveChartHandler)}},63064:function(X,I,e){"use strict";var A=e(38248),k=e(49760),o=e(92880).extendFlat,T=e(45464),b=e(88304),p=e(76308),s=e(13448).DESELECTDIM,t=e(22296),i=e(53756).counter,n=e(20435).modHalf,r=e(38116).isArrayOrTypedArray,a=e(38116).isTypedArraySpec,l=e(38116).decodeTypedArraySpec;function c(h,u){var x=I.valObjectMeta[u.valType];if(u.arrayOk&&r(h))return!0;if(x.validateFunction)return x.validateFunction(h,u);var d={},m=d,g={set:function(y){m=y}};return x.coerceFunction(h,g,d,u),m!==d}I.valObjectMeta={data_array:{coerceFunction:function(h,u,x){u.set(r(h)?h:a(h)?l(h):x)}},enumerated:{coerceFunction:function(h,u,x,d){d.coerceNumber&&(h=+h),d.values.indexOf(h)===-1?u.set(x):u.set(h)},validateFunction:function(h,u){u.coerceNumber&&(h=+h);for(var x=u.values,d=0;d<x.length;d++){var m=String(x[d]);if(m.charAt(0)==="/"&&m.charAt(m.length-1)==="/"){if(new RegExp(m.substr(1,m.length-2)).test(h))return!0}else if(h===x[d])return!0}return!1}},boolean:{coerceFunction:function(h,u,x){h===!0||h===!1?u.set(h):u.set(x)}},number:{coerceFunction:function(h,u,x,d){a(h)&&(h=l(h)),!A(h)||d.min!==void 0&&h<d.min||d.max!==void 0&&h>d.max?u.set(x):u.set(+h)}},integer:{coerceFunction:function(h,u,x,d){(d.extras||[]).indexOf(h)===-1?(a(h)&&(h=l(h)),h%1||!A(h)||d.min!==void 0&&h<d.min||d.max!==void 0&&h>d.max?u.set(x):u.set(+h)):u.set(h)}},string:{coerceFunction:function(h,u,x,d){if(typeof h!="string"){var m=typeof h=="number";d.strict!==!0&&m?u.set(String(h)):u.set(x)}else d.noBlank&&!h?u.set(x):u.set(h)}},color:{coerceFunction:function(h,u,x){a(h)&&(h=l(h)),k(h).isValid()?u.set(h):u.set(x)}},colorlist:{coerceFunction:function(h,u,x){Array.isArray(h)&&h.length&&h.every(function(d){return k(d).isValid()})?u.set(h):u.set(x)}},colorscale:{coerceFunction:function(h,u,x){u.set(b.get(h,x))}},angle:{coerceFunction:function(h,u,x){a(h)&&(h=l(h)),h==="auto"?u.set("auto"):A(h)?u.set(n(+h,360)):u.set(x)}},subplotid:{coerceFunction:function(h,u,x,d){var m=d.regex||i(x);typeof h=="string"&&m.test(h)?u.set(h):u.set(x)},validateFunction:function(h,u){var x=u.dflt;return h===x||typeof h=="string"&&!!i(x).test(h)}},flaglist:{coerceFunction:function(h,u,x,d){if((d.extras||[]).indexOf(h)===-1)if(typeof h=="string"){for(var m=h.split("+"),g=0;g<m.length;){var y=m[g];d.flags.indexOf(y)===-1||m.indexOf(y)<g?m.splice(g,1):g++}m.length?u.set(m.join("+")):u.set(x)}else u.set(x);else u.set(h)}},any:{coerceFunction:function(h,u,x){h===void 0?u.set(x):u.set(a(h)?l(h):h)}},info_array:{coerceFunction:function(h,u,x,d){function m(D,N,W){var F,j={set:function(q){F=q}};return W===void 0&&(W=N.dflt),I.valObjectMeta[N.valType].coerceFunction(D,j,W,N),F}if(a(h)&&(h=l(h)),r(h)){var g,y,v,_,f,S,w=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(h)&&r(h[0]),E=d.items,P=[],C=Array.isArray(E),O=C&&w&&r(E[0]),R=w&&C&&!O,U=C&&!R?E.length:h.length;if(x=Array.isArray(x)?x:[],w)for(g=0;g<U;g++)for(P[g]=[],v=r(h[g])?h[g]:[],f=R?E.length:C?E[g].length:v.length,y=0;y<f;y++)_=R?E[y]:C?E[g][y]:E,(S=m(v[y],_,(x[g]||[])[y]))!==void 0&&(P[g][y]=S);else for(g=0;g<U;g++)(S=m(h[g],C?E[g]:E,x[g]))!==void 0&&(P[g]=S);u.set(P)}else u.set(x)},validateFunction:function(h,u){if(!r(h))return!1;var x=u.items,d=Array.isArray(x),m=u.dimensions===2;if(!u.freeLength&&h.length!==x.length)return!1;for(var g=0;g<h.length;g++)if(m){if(!r(h[g])||!u.freeLength&&h[g].length!==x[g].length)return!1;for(var y=0;y<h[g].length;y++)if(!c(h[g][y],d?x[g][y]:x))return!1}else if(!c(h[g],d?x[g]:x))return!1;return!0}}},I.coerce=function(h,u,x,d,m){var g=t(x,d).get(),y=t(h,d),v=t(u,d),_=y.get(),f=u._template;if(_===void 0&&f&&(_=t(f,d).get(),f=0),m===void 0&&(m=g.dflt),g.arrayOk){if(r(_))return v.set(_),_;if(a(_))return _=l(_),v.set(_),_}var S=I.valObjectMeta[g.valType].coerceFunction;S(_,v,m,g);var w=v.get();return f&&w===m&&!c(_,g)&&(S(_=t(f,d).get(),v,m,g),w=v.get()),w},I.coerce2=function(h,u,x,d,m){var g=t(h,d),y=I.coerce(h,u,x,d,m);return g.get()!=null&&y},I.coerceFont=function(h,u,x,d){d||(d={}),x=o({},x);var m={family:h(u+".family",(x=o(x,d.overrideDflt||{})).family),size:h(u+".size",x.size),color:h(u+".color",x.color),weight:h(u+".weight",x.weight),style:h(u+".style",x.style)};if(d.noFontVariant||(m.variant=h(u+".variant",x.variant)),d.noFontLineposition||(m.lineposition=h(u+".lineposition",x.lineposition)),d.noFontTextcase||(m.textcase=h(u+".textcase",x.textcase)),!d.noFontShadow){var g=x.shadow;g==="none"&&d.autoShadowDflt&&(g="auto"),m.shadow=h(u+".shadow",g)}return m},I.coercePattern=function(h,u,x,d){if(h(u+".shape")){h(u+".solidity"),h(u+".size");var m=h(u+".fillmode")==="overlay";if(!d){var g=h(u+".bgcolor",m?x:void 0);h(u+".fgcolor",m?p.contrast(g):x)}h(u+".fgopacity",m?.5:1)}},I.coerceHoverinfo=function(h,u,x){var d,m=u._module.attributes,g=m.hoverinfo?m:T,y=g.hoverinfo;if(x._dataLength===1){var v=y.dflt==="all"?y.flags.slice():y.dflt.split("+");v.splice(v.indexOf("name"),1),d=v.join("+")}return I.coerce(h,u,g,"hoverinfo",d)},I.coerceSelectionMarkerOpacity=function(h,u){if(h.marker){var x,d,m=h.marker.opacity;m!==void 0&&(r(m)||h.selected||h.unselected||(x=m,d=s*m),u("selected.marker.opacity",x),u("unselected.marker.opacity",d))}},I.validate=c},67555:function(X,I,e){"use strict";var A,k,o=e(94336).Yn,T=e(38248),b=e(24248),p=e(20435).mod,s=e(39032),t=s.BADNUM,i=s.ONEDAY,n=s.ONEHOUR,r=s.ONEMIN,a=s.ONESEC,l=s.EPOCHJD,c=e(24040),h=e(94336).E9,u=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=new Date().getFullYear()-70;function m(R){return R&&c.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}function g(R,U){return String(R+Math.pow(10,U)).substr(1)}I.dateTick0=function(R,U){var D=function(W,F){return m(W)?F?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[W]:c.getComponentMethod("calendars","CANONICAL_TICK")[W]:F?"2000-01-02":"2000-01-01"}(R,!!U);if(U<2)return D;var N=I.dateTime2ms(D,R);return N+=i*(U-1),I.ms2DateTime(N,0,R)},I.dfltRange=function(R){return m(R)?c.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},I.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"},I.dateTime2ms=function(R,U){if(I.isJSDate(R)){var D=R.getTimezoneOffset()*r,N=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*a+(R.getUTCMilliseconds()-R.getMilliseconds());if(N){var W=3*r;D=D-W/2+p(N-D+W/2,W)}return(R=Number(R)-D)>=A&&R<=k?R:t}if(typeof R!="string"&&typeof R!="number")return t;R=String(R);var F=m(U),j=R.charAt(0);!F||j!=="G"&&j!=="g"||(R=R.substr(1),U="");var q=F&&U.substr(0,7)==="chinese",te=R.match(q?x:u);if(!te)return t;var ee=te[1],Q=te[3]||"1",J=Number(te[5]||1),K=Number(te[7]||0),Y=Number(te[9]||0),ie=Number(te[11]||0);if(F){if(ee.length===2)return t;var se;ee=Number(ee);try{var ae=c.getComponentMethod("calendars","getCal")(U);if(q){var ue=Q.charAt(Q.length-1)==="i";Q=parseInt(Q,10),se=ae.newDate(ee,ae.toMonthIndex(ee,Q,ue),J)}else se=ae.newDate(ee,Number(Q),J)}catch{return t}return se?(se.toJD()-l)*i+K*n+Y*r+ie*a:t}ee=ee.length===2?(Number(ee)+2e3-d)%100+d:Number(ee),Q-=1;var ve=new Date(Date.UTC(2e3,Q,J,K,Y));return ve.setUTCFullYear(ee),ve.getUTCMonth()!==Q||ve.getUTCDate()!==J?t:ve.getTime()+ie*a},A=I.MIN_MS=I.dateTime2ms("-9999"),k=I.MAX_MS=I.dateTime2ms("9999-12-31 23:59:59.9999"),I.isDateTime=function(R,U){return I.dateTime2ms(R,U)!==t};var y=90*i,v=3*n,_=5*r;function f(R,U,D,N,W){if((U||D||N||W)&&(R+=" "+g(U,2)+":"+g(D,2),(N||W)&&(R+=":"+g(N,2),W))){for(var F=4;W%10==0;)F-=1,W/=10;R+="."+g(W,F)}return R}I.ms2DateTime=function(R,U,D){if(typeof R!="number"||!(R>=A&&R<=k))return t;U||(U=0);var N,W,F,j,q,te,ee=Math.floor(10*p(R+.05,1)),Q=Math.round(R-ee/10);if(m(D)){var J=Math.floor(Q/i)+l,K=Math.floor(p(R,i));try{N=c.getComponentMethod("calendars","getCal")(D).fromJD(J).formatDate("yyyy-mm-dd")}catch{N=h("G%Y-%m-%d")(new Date(Q))}if(N.charAt(0)==="-")for(;N.length<11;)N="-0"+N.substr(1);else for(;N.length<10;)N="0"+N;W=U<y?Math.floor(K/n):0,F=U<y?Math.floor(K%n/r):0,j=U<v?Math.floor(K%r/a):0,q=U<_?K%a*10+ee:0}else te=new Date(Q),N=h("%Y-%m-%d")(te),W=U<y?te.getUTCHours():0,F=U<y?te.getUTCMinutes():0,j=U<v?te.getUTCSeconds():0,q=U<_?10*te.getUTCMilliseconds()+ee:0;return f(N,W,F,j,q)},I.ms2DateTimeLocal=function(R){if(!(R>=A+i&&R<=k-i))return t;var U=Math.floor(10*p(R+.05,1)),D=new Date(Math.round(R-U/10));return f(o("%Y-%m-%d")(D),D.getHours(),D.getMinutes(),D.getSeconds(),10*D.getUTCMilliseconds()+U)},I.cleanDate=function(R,U,D){if(R===t)return U;if(I.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(m(D))return b.error("JS Dates and milliseconds are incompatible with world calendars",R),U;if(!(R=I.ms2DateTimeLocal(+R))&&U!==void 0)return U}else if(!I.isDateTime(R,D))return b.error("unrecognized date",R),U;return R};var S=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function P(R,U,D,N){R=R.replace(S,function(F){var j=Math.min(+F.charAt(1)||6,6);return(U/1e3%1+2).toFixed(j).substr(2).replace(/0+$/,"")||"0"});var W=new Date(Math.floor(U+.05));if(R=R.replace(w,function(){return E[D("%q")(W)]}),m(N))try{R=c.getComponentMethod("calendars","worldCalFmt")(R,U,N)}catch{return"Invalid"}return D(R)(W)}var C=[59,59.9,59.99,59.999,59.9999];I.formatDate=function(R,U,D,N,W,F){if(W=m(W)&&W,!U)if(D==="y")U=F.year;else if(D==="m")U=F.month;else{if(D!=="d")return function(j,q){var te=p(j+.05,i),ee=g(Math.floor(te/n),2)+":"+g(p(Math.floor(te/r),60),2);if(q!=="M"){T(q)||(q=0);var Q=(100+Math.min(p(j/a,60),C[q])).toFixed(q).substr(1);q>0&&(Q=Q.replace(/0+$/,"").replace(/[\.]$/,"")),ee+=":"+Q}return ee}(R,D)+`
`+P(F.dayMonthYear,R,N,W);U=F.dayMonth+`
`+F.year}return P(U,R,N,W)};var O=3*i;I.incrementMonth=function(R,U,D){D=m(D)&&D;var N=p(R,i);if(R=Math.round(R-N),D)try{var W=Math.round(R/i)+l,F=c.getComponentMethod("calendars","getCal")(D),j=F.fromJD(W);return U%12?F.add(j,U,"m"):F.add(j,U/12,"y"),(j.toJD()-l)*i+N}catch{b.error("invalid ms "+R+" in calendar "+D)}var q=new Date(R+O);return q.setUTCMonth(q.getUTCMonth()+U)+N-O},I.findExactDates=function(R,U){for(var D,N,W=0,F=0,j=0,q=0,te=m(U)&&c.getComponentMethod("calendars","getCal")(U),ee=0;ee<R.length;ee++)if(N=R[ee],T(N)){if(!(N%i))if(te)try{(D=te.fromJD(N/i+l)).day()===1?D.month()===1?W++:F++:j++}catch{}else(D=new Date(N)).getUTCDate()===1?D.getUTCMonth()===0?W++:F++:j++}else q++;j+=F+=W;var Q=R.length-q;return{exactYears:W/Q,exactMonths:F/Q,exactDays:j/Q}}},52200:function(X,I,e){"use strict";var A=e(33428),k=e(24248),o=e(52248),T=e(36524);function b(n){var r=n&&n.parentNode;r&&r.removeChild(n)}function p(n,r,a){var l="plotly.js-style-"+n,c=document.getElementById(l);c||((c=document.createElement("style")).setAttribute("id",l),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var h=c.sheet;h.insertRule?h.insertRule(r+"{"+a+"}",0):h.addRule?h.addRule(r,a,0):k.warn("addStyleRule failed")}function s(n){var r=window.getComputedStyle(n,null),a=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(n){for(var r=[];i(n);)r.push(n),n=n.parentNode,typeof ShadowRoot=="function"&&n instanceof ShadowRoot&&(n=n.host);return r}function i(n){return n&&(n instanceof Element||n instanceof HTMLElement)}X.exports={getGraphDiv:function(n){var r;if(typeof n=="string"){if((r=document.getElementById(n))===null)throw new Error("No DOM element with id '"+n+"' exists on the page.");return r}if(n==null)throw new Error("DOM element provided is null or undefined");return n},isPlotDiv:function(n){var r=A.select(n);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(n,r){p("global",n,r)},addRelatedStyleRule:p,deleteRelatedStyleRule:function(n){var r="plotly.js-style-"+n,a=document.getElementById(r);a&&b(a)},getFullTransformMatrix:function(n){var r=t(n),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return r.forEach(function(l){var c=s(l);if(c){var h=o.convertCssMatrix(c);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(n,r){return n&&r&&n.top===r.top&&n.left===r.left&&n.right===r.right&&n.bottom===r.bottom}}},95924:function(X,I,e){"use strict";var A=e(61252).EventEmitter,k={init:function(o){if(o._ev instanceof A)return o;var T=new A,b=new A;return o._ev=T,o._internalEv=b,o.on=T.on.bind(T),o.once=T.once.bind(T),o.removeListener=T.removeListener.bind(T),o.removeAllListeners=T.removeAllListeners.bind(T),o._internalOn=b.on.bind(b),o._internalOnce=b.once.bind(b),o._removeInternalListener=b.removeListener.bind(b),o._removeAllInternalListeners=b.removeAllListeners.bind(b),o.emit=function(p,s){typeof jQuery<"u"&&jQuery(o).trigger(p,s),T.emit(p,s),b.emit(p,s)},o},triggerHandler:function(o,T,b){var p,s;typeof jQuery<"u"&&(p=jQuery(o).triggerHandler(T,b));var t=o._ev;if(!t)return p;var i,n=t._events[T];if(!n)return p;function r(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[b]))):a.apply(t,[b])}for(n=Array.isArray(n)?n:[n],i=0;i<n.length-1;i++)r(n[i]);return s=r(n[i]),p!==void 0?p:s},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}};X.exports=k},92880:function(X,I,e){"use strict";var A=e(63620),k=Array.isArray;function o(T,b,p,s){var t,i,n,r,a,l,c,h=T[0],u=T.length;if(u===2&&k(h)&&k(T[1])&&h.length===0){if(c=function(d,m){var g,y;for(g=0;g<d.length;g++){if((y=d[g])!==null&&typeof y=="object")return!1;y!==void 0&&(m[g]=y)}return!0}(T[1],h),c)return h;h.splice(0,h.length)}for(var x=1;x<u;x++)for(i in t=T[x])n=h[i],r=t[i],s&&k(r)?h[i]=r:b&&r&&(A(r)||(a=k(r)))?(a?(a=!1,l=n&&k(n)?n:[]):l=n&&A(n)?n:{},h[i]=o([l,r],b,p,s)):(r!==void 0||p)&&(h[i]=r);return h}I.extendFlat=function(){return o(arguments,!1,!1,!1)},I.extendDeep=function(){return o(arguments,!0,!1,!1)},I.extendDeepAll=function(){return o(arguments,!0,!0,!1)},I.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(X){"use strict";X.exports=function(I){for(var e={},A=[],k=0,o=0;o<I.length;o++){var T=I[o];e[T]!==1&&(e[T]=1,A[k++]=T)}return A}},43880:function(X){"use strict";function I(A){return A.visible===!0}function e(A){var k=A[0].trace;return k.visible===!0&&k._length!==0}X.exports=function(A){for(var k,o=(k=A,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:I),T=[],b=0;b<A.length;b++){var p=A[b];o(p)&&T.push(p)}return T}},27144:function(X,I,e){"use strict";var A=e(33428),k=e(36116),o=e(40440),T=e(77844),b=e(42428),p=e(35536),s=e(24248),t=e(63620),i=e(22296),n=e(92065),r=Object.keys(k),a={"ISO-3":p,"USA-states":p,"country names":function(c){for(var h=0;h<r.length;h++){var u=r[h];if(new RegExp(k[u]).test(c.trim().toLowerCase()))return u}return s.log("Unrecognized country name: "+c+"."),!1}};function l(c){var h=c.geojson,u=window.PlotlyGeoAssets||{},x=typeof h=="string"?u[h]:h;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+h),!1)}X.exports={locationToFeature:function(c,h,u){if(!h||typeof h!="string")return!1;var x,d,m,g=a[c](h);if(g){if(c==="USA-states")for(x=[],m=0;m<u.length;m++)(d=u[m]).properties&&d.properties.gu&&d.properties.gu==="USA"&&x.push(d);else x=u;for(m=0;m<x.length;m++)if((d=x[m]).id===g)return d;s.log(["Location with id",g,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var h,u,x,d,m=c.geometry,g=m.coordinates,y=c.id,v=[];function _(f){for(var S=0;S<f.length-1;S++)if(f[S][0]>0&&f[S+1][0]<0)return S;return null}switch(h=y==="RUS"||y==="FJI"?function(f){var S;if(_(f)===null)S=f;else for(S=new Array(f.length),d=0;d<f.length;d++)S[d]=[f[d][0]<0?f[d][0]+360:f[d][0],f[d][1]];v.push(n.tester(S))}:y==="ATA"?function(f){var S=_(f);if(S===null)return v.push(n.tester(f));var w=new Array(f.length+1),E=0;for(d=0;d<f.length;d++)d>S?w[E++]=[f[d][0]+360,f[d][1]]:d===S?(w[E++]=f[d],w[E++]=[f[d][0],-90]):w[E++]=f[d];var P=n.tester(w);P.pts.pop(),v.push(P)}:function(f){v.push(n.tester(f))},m.type){case"MultiPolygon":for(u=0;u<g.length;u++)for(x=0;x<g[u].length;x++)h(g[u][x]);break;case"Polygon":for(u=0;u<g.length;u++)h(g[u])}return v},getTraceGeojson:l,extractTraceFeature:function(c){var h=c[0].trace,u=l(h);if(!u)return!1;var x,d={},m=[];for(x=0;x<h._length;x++){var g=c[x];(g.loc||g.loc===0)&&(d[g.loc]=g)}function y(f){var S=i(f,h.featureidkey||"id").get(),w=d[S];if(w){var E=f.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var P={type:"Feature",id:S,geometry:E,properties:{}};P.properties.ct=function(C){var O,R=C.geometry;if(R.type==="MultiPolygon")for(var U=R.coordinates,D=0,N=0;N<U.length;N++){var W={type:"Polygon",coordinates:U[N]},F=o.default(W);F>D&&(D=F,O=W)}else O=R;return T.default(O).geometry.coordinates}(P),w.fIn=f,w.fOut=P,m.push(P)}else s.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete d[S]}switch(u.type){case"FeatureCollection":var v=u.features;for(x=0;x<v.length;x++)y(v[x]);break;case"Feature":y(u);break;default:return s.warn(["Invalid GeoJSON type",(u.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in d)s.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return m},fetchTraceGeoData:function(c){var h=window.PlotlyGeoAssets||{},u=[];function x(y){return new Promise(function(v,_){A.json(y,function(f,S){if(f){delete h[y];var w=f.status===404?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y;return _(new Error(w))}return h[y]=S,v(S)})})}function d(y){return new Promise(function(v,_){var f=0,S=setInterval(function(){return h[y]&&h[y]!=="pending"?(clearInterval(S),v(h[y])):f>100?(clearInterval(S),_("Unexpected error while fetching from "+y)):void f++},50)})}for(var m=0;m<c.length;m++){var g=c[m][0].trace.geojson;typeof g=="string"&&(h[g]?h[g]==="pending"&&u.push(d(g)):(h[g]="pending",u.push(x(g))))}return u},computeBbox:function(c){return b.default(c)}}},44808:function(X,I,e){"use strict";var A=e(39032).BADNUM;I.calcTraceToLineCoords=function(k){for(var o=k[0].trace.connectgaps,T=[],b=[],p=0;p<k.length;p++){var s=k[p].lonlat;s[0]!==A?b.push(s):!o&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},I.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},I.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var o=new Array(k.length),T=0;T<k.length;T++)o[T]=[k[T]];return{type:"MultiPolygon",coordinates:o}},I.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(X,I,e){"use strict";var A,k,o,T=e(20435).mod;function b(s,t,i,n,r,a,l,c){var h=i-s,u=r-s,x=l-r,d=n-t,m=a-t,g=c-a,y=h*g-x*d;if(y===0)return null;var v=(u*g-x*m)/y,_=(u*d-h*m)/y;return _<0||_>1||v<0||v>1?null:{x:s+h*v,y:t+d*v}}function p(s,t,i,n,r){var a=n*s+r*t;if(a<0)return n*n+r*r;if(a>i){var l=n-s,c=r-t;return l*l+c*c}var h=n*t-r*s;return h*h/i}I.segmentsIntersect=b,I.segmentDistance=function(s,t,i,n,r,a,l,c){if(b(s,t,i,n,r,a,l,c))return 0;var h=i-s,u=n-t,x=l-r,d=c-a,m=h*h+u*u,g=x*x+d*d,y=Math.min(p(h,u,m,r-s,a-t),p(h,u,m,l-s,c-t),p(x,d,g,s-r,t-a),p(x,d,g,i-r,n-a));return Math.sqrt(y)},I.getTextLocation=function(s,t,i,n){if(s===k&&n===o||(A={},k=s,o=n),A[i])return A[i];var r=s.getPointAtLength(T(i-n/2,t)),a=s.getPointAtLength(T(i+n/2,t)),l=Math.atan((a.y-r.y)/(a.x-r.x)),c=s.getPointAtLength(T(i,t)),h={x:(4*c.x+r.x+a.x)/6,y:(4*c.y+r.y+a.y)/6,theta:l};return A[i]=h,h},I.clearLocationCache=function(){k=null},I.getVisibleSegment=function(s,t,i){var n,r,a=t.left,l=t.right,c=t.top,h=t.bottom,u=0,x=s.getTotalLength(),d=x;function m(y){var v=s.getPointAtLength(y);y===0?n=v:y===x&&(r=v);var _=v.x<a?a-v.x:v.x>l?v.x-l:0,f=v.y<c?c-v.y:v.y>h?v.y-h:0;return Math.sqrt(_*_+f*f)}for(var g=m(u);g;){if((u+=g+i)>d)return;g=m(u)}for(g=m(d);g;){if(u>(d-=g+i))return;g=m(d)}return{min:u,max:d,len:d-u,total:x,isClosed:u===0&&d===x&&Math.abs(n.x-r.x)<.1&&Math.abs(n.y-r.y)<.1}},I.findPointOnPath=function(s,t,i,n){for(var r,a,l,c=(n=n||{}).pathLength||s.getTotalLength(),h=n.tolerance||.001,u=n.iterationLimit||30,x=s.getPointAtLength(0)[i]>s.getPointAtLength(c)[i]?-1:1,d=0,m=0,g=c;d<u;){if(r=(m+g)/2,l=(a=s.getPointAtLength(r))[i]-t,Math.abs(l)<h)return a;x*l>0?g=r:m=r,d++}return a}},33040:function(X,I,e){"use strict";var A=e(38248),k=e(49760),o=e(72160),T=e(8932),b=e(22548).defaultLine,p=e(38116).isArrayOrTypedArray,s=o(b);function t(r,a){var l=r;return l[3]*=a,l}function i(r){if(A(r))return s;var a=o(r);return a.length?a:s}function n(r){return A(r)?r:1}X.exports={formatColor:function(r,a,l){var c=r.color;c&&c._inputArray&&(c=c._inputArray);var h,u,x,d,m,g=p(c),y=p(a),v=T.extractOpts(r),_=[];if(h=v.colorscale!==void 0?T.makeColorScaleFuncFromTrace(r):i,u=g?function(S,w){return S[w]===void 0?s:o(h(S[w]))}:i,x=y?function(S,w){return S[w]===void 0?1:n(S[w])}:n,g||y)for(var f=0;f<l;f++)d=u(c,f),m=x(a,f),_[f]=t(d,m);else _=t(o(c),a);return _},parseColorScale:function(r){var a=T.extractOpts(r),l=a.colorscale;return a.reversescale&&(l=T.flipScale(a.colorscale)),l.map(function(c){var h=c[0],u=k(c[1]).toRgb();return{index:h,rgb:[u.r,u.g,u.b,u.a]}})}}},71688:function(X,I,e){"use strict";var A=e(35536);function k(o){return[o]}X.exports={keyFun:function(o){return o.key},repeat:k,descend:A,wrap:k,unwrap:function(o){return o[0]}}},35536:function(X){"use strict";X.exports=function(I){return I}},1396:function(X){"use strict";X.exports=function(I,e){if(!e)return I;var A=1/Math.abs(e),k=A>1?(A*I+A*e)/A:I+e,o=String(k).length;if(o>16){var T=String(e).length;if(o>=String(I).length+T){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},3400:function(X,I,e){"use strict";var A=e(33428),k=e(94336).E9,o=e(57624).E9,T=e(38248),b=e(39032),p=b.FP_SAFE,s=-p,t=b.BADNUM,i=X.exports={};i.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var n={};i.warnBadFormat=function(K){var Y=String(K);n[Y]||(n[Y]=1,i.warn('encountered bad format: "'+Y+'"'))},i.noFormat=function(K){return String(K)},i.numberFormat=function(K){var Y;try{Y=o(i.adjustFormat(K))}catch{return i.warnBadFormat(K),i.noFormat}return Y},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var r=e(38116);i.isArrayBuffer=r.isArrayBuffer,i.isTypedArray=r.isTypedArray,i.isArrayOrTypedArray=r.isArrayOrTypedArray,i.isArray1D=r.isArray1D,i.ensureArray=r.ensureArray,i.concat=r.concat,i.maxRowLength=r.maxRowLength,i.minRowLength=r.minRowLength;var a=e(20435);i.mod=a.mod,i.modHalf=a.modHalf;var l=e(63064);i.valObjectMeta=l.valObjectMeta,i.coerce=l.coerce,i.coerce2=l.coerce2,i.coerceFont=l.coerceFont,i.coercePattern=l.coercePattern,i.coerceHoverinfo=l.coerceHoverinfo,i.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,i.validate=l.validate;var c=e(67555);i.dateTime2ms=c.dateTime2ms,i.isDateTime=c.isDateTime,i.ms2DateTime=c.ms2DateTime,i.ms2DateTimeLocal=c.ms2DateTimeLocal,i.cleanDate=c.cleanDate,i.isJSDate=c.isJSDate,i.formatDate=c.formatDate,i.incrementMonth=c.incrementMonth,i.dateTick0=c.dateTick0,i.dfltRange=c.dfltRange,i.findExactDates=c.findExactDates,i.MIN_MS=c.MIN_MS,i.MAX_MS=c.MAX_MS;var h=e(14952);i.findBin=h.findBin,i.sorterAsc=h.sorterAsc,i.sorterDes=h.sorterDes,i.distinctVals=h.distinctVals,i.roundUp=h.roundUp,i.sort=h.sort,i.findIndexOfMin=h.findIndexOfMin,i.sortObjectKeys=e(95376);var u=e(63084);i.aggNums=u.aggNums,i.len=u.len,i.mean=u.mean,i.median=u.median,i.midRange=u.midRange,i.variance=u.variance,i.stdev=u.stdev,i.interp=u.interp;var x=e(52248);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var d=e(11864);i.deg2rad=d.deg2rad,i.rad2deg=d.rad2deg,i.angleDelta=d.angleDelta,i.angleDist=d.angleDist,i.isFullCircle=d.isFullCircle,i.isAngleInsideSector=d.isAngleInsideSector,i.isPtInsideSector=d.isPtInsideSector,i.pathArc=d.pathArc,i.pathSector=d.pathSector,i.pathAnnulus=d.pathAnnulus;var m=e(98308);i.isLeftAnchor=m.isLeftAnchor,i.isCenterAnchor=m.isCenterAnchor,i.isRightAnchor=m.isRightAnchor,i.isTopAnchor=m.isTopAnchor,i.isMiddleAnchor=m.isMiddleAnchor,i.isBottomAnchor=m.isBottomAnchor;var g=e(92348);i.segmentsIntersect=g.segmentsIntersect,i.segmentDistance=g.segmentDistance,i.getTextLocation=g.getTextLocation,i.clearLocationCache=g.clearLocationCache,i.getVisibleSegment=g.getVisibleSegment,i.findPointOnPath=g.findPointOnPath;var y=e(92880);i.extendFlat=y.extendFlat,i.extendDeep=y.extendDeep,i.extendDeepAll=y.extendDeepAll,i.extendDeepNoArrays=y.extendDeepNoArrays;var v=e(24248);i.log=v.log,i.warn=v.warn,i.error=v.error;var _=e(53756);i.counterRegex=_.counter;var f=e(91200);i.throttle=f.throttle,i.throttleDone=f.done,i.clearThrottle=f.clear;var S=e(52200);function w(K){var Y={};for(var ie in K)for(var se=K[ie],ae=0;ae<se.length;ae++)Y[se[ae]]=+ie;return Y}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function(K){return T(K)?(K=Number(K))>p||K<s?t:K:t},i.isIndex=function(K,Y){return!(Y!==void 0&&K>=Y)&&T(K)&&K>=0&&K%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function(K,Y){for(var ie=new Array(Y),se=0;se<Y;se++)ie[se]=K;return ie},i.swapAttrs=function(K,Y,ie,se){ie||(ie="x"),se||(se="y");for(var ae=0;ae<Y.length;ae++){var ue=Y[ae],ve=i.nestedProperty(K,ue.replace("?",ie)),ye=i.nestedProperty(K,ue.replace("?",se)),de=ve.get();ve.set(ye.get()),ye.set(de)}},i.raiseToTop=function(K){K.parentNode.appendChild(K)},i.cancelTransition=function(K){return K.transition().duration(0)},i.constrain=function(K,Y,ie){return Y>ie?Math.max(ie,Math.min(Y,K)):Math.max(Y,Math.min(ie,K))},i.bBoxIntersect=function(K,Y,ie){return ie=ie||0,K.left<=Y.right+ie&&Y.left<=K.right+ie&&K.top<=Y.bottom+ie&&Y.top<=K.bottom+ie},i.simpleMap=function(K,Y,ie,se,ae){for(var ue=K.length,ve=new Array(ue),ye=0;ye<ue;ye++)ve[ye]=Y(K[ye],ie,se,ae);return ve},i.randstr=function K(Y,ie,se,ae){if(se||(se=16),ie===void 0&&(ie=24),ie<=0)return"0";var ue,ve,ye=Math.log(Math.pow(2,ie))/Math.log(se),de="";for(ue=2;ye===1/0;ue*=2)ye=Math.log(Math.pow(2,ie/ue))/Math.log(se)*ue;var pe=ye-Math.floor(ye);for(ue=0;ue<Math.floor(ye);ue++)de=Math.floor(Math.random()*se).toString(se)+de;pe&&(ve=Math.pow(se,pe),de=Math.floor(Math.random()*ve).toString(se)+de);var ge=parseInt(de,se);return Y&&Y[de]||ge!==1/0&&ge>=Math.pow(2,ie)?ae>10?(i.warn("randstr failed uniqueness"),de):K(Y,ie,se,(ae||0)+1):de},i.OptionControl=function(K,Y){K||(K={}),Y||(Y="opt");var ie={optionList:[],_newoption:function(se){se[Y]=K,ie[se.name]=se,ie.optionList.push(se)}};return ie["_"+Y]=K,ie},i.smooth=function(K,Y){if((Y=Math.round(Y)||0)<2)return K;var ie,se,ae,ue,ve=K.length,ye=2*ve,de=2*Y-1,pe=new Array(de),ge=new Array(ve);for(ie=0;ie<de;ie++)pe[ie]=(1-Math.cos(Math.PI*(ie+1)/Y))/(2*Y);for(ie=0;ie<ve;ie++){for(ue=0,se=0;se<de;se++)(ae=ie+se+1-Y)<-ve?ae-=ye*Math.round(ae/ye):ae>=ye&&(ae-=ye*Math.floor(ae/ye)),ae<0?ae=-1-ae:ae>=ve&&(ae=ye-1-ae),ue+=K[ae]*pe[se];ge[ie]=ue}return ge},i.syncOrAsync=function(K,Y,ie){var se;function ae(){return i.syncOrAsync(K,Y,ie)}for(;K.length;)if((se=(0,K.splice(0,1)[0])(Y))&&se.then)return se.then(ae);return ie&&ie(Y)},i.stripTrailingSlash=function(K){return K.substr(-1)==="/"?K.substr(0,K.length-1):K},i.noneOrAll=function(K,Y,ie){if(K){var se,ae=!1,ue=!0;for(se=0;se<ie.length;se++)K[ie[se]]!=null?ae=!0:ue=!1;if(ae&&!ue)for(se=0;se<ie.length;se++)K[ie[se]]=Y[ie[se]]}},i.mergeArray=function(K,Y,ie,se){var ae=typeof se=="function";if(i.isArrayOrTypedArray(K))for(var ue=Math.min(K.length,Y.length),ve=0;ve<ue;ve++){var ye=K[ve];Y[ve][ie]=ae?se(ye):ye}},i.mergeArrayCastPositive=function(K,Y,ie){return i.mergeArray(K,Y,ie,function(se){var ae=+se;return isFinite(ae)&&ae>0?ae:0})},i.fillArray=function(K,Y,ie,se){if(se=se||i.identity,i.isArrayOrTypedArray(K))for(var ae=0;ae<Y.length;ae++)Y[ae][ie]=se(K[ae])},i.castOption=function(K,Y,ie,se){se=se||i.identity;var ae=i.nestedProperty(K,ie).get();return i.isArrayOrTypedArray(ae)?Array.isArray(Y)&&i.isArrayOrTypedArray(ae[Y[0]])?se(ae[Y[0]][Y[1]]):se(ae[Y]):ae},i.extractOption=function(K,Y,ie,se){if(ie in K)return K[ie];var ae=i.nestedProperty(Y,se).get();return Array.isArray(ae)?void 0:ae},i.tagSelected=function(K,Y,ie){var se,ae,ue=Y.selectedpoints,ve=Y._indexToPoints;ve&&(se=w(ve));for(var ye=0;ye<ue.length;ye++){var de=ue[ye];if(i.isIndex(de)||i.isArrayOrTypedArray(de)&&i.isIndex(de[0])&&i.isIndex(de[1])){var pe=se?se[de]:de,ge=ie?ie[pe]:pe;(ae=ge)!==void 0&&ae<K.length&&(K[ge].selected=1)}}},i.selIndices2selPoints=function(K){var Y=K.selectedpoints,ie=K._indexToPoints;if(ie){for(var se=w(ie),ae=[],ue=0;ue<Y.length;ue++){var ve=Y[ue];if(i.isIndex(ve)){var ye=se[ve];i.isIndex(ye)&&ae.push(ye)}}return ae}return Y},i.getTargetArray=function(K,Y){var ie=Y.target;if(typeof ie=="string"&&ie){var se=i.nestedProperty(K,ie).get();return!!i.isArrayOrTypedArray(se)&&se}return!!i.isArrayOrTypedArray(ie)&&ie},i.minExtend=function K(Y,ie,se){var ae={};typeof ie!="object"&&(ie={});var ue,ve,ye,de=se==="pieLike"?-1:3,pe=Object.keys(Y);for(ue=0;ue<pe.length;ue++)ye=Y[ve=pe[ue]],ve.charAt(0)!=="_"&&typeof ye!="function"&&(ve==="module"?ae[ve]=ye:Array.isArray(ye)?ae[ve]=ve==="colorscale"||de===-1?ye.slice():ye.slice(0,de):i.isTypedArray(ye)?ae[ve]=de===-1?ye.subarray():ye.subarray(0,de):ae[ve]=ye&&typeof ye=="object"?K(Y[ve],ie[ve],se):ye);for(pe=Object.keys(ie),ue=0;ue<pe.length;ue++)typeof(ye=ie[ve=pe[ue]])=="object"&&ve in ae&&typeof ae[ve]=="object"||(ae[ve]=ye);return ae},i.titleCase=function(K){return K.charAt(0).toUpperCase()+K.substr(1)},i.containsAny=function(K,Y){for(var ie=0;ie<Y.length;ie++)if(K.indexOf(Y[ie])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;i.isIOS=function(){return P.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var K=C.exec(window.navigator.userAgent);if(K&&K.length===2){var Y=parseInt(K[1]);if(!isNaN(Y))return Y}return null},i.isD3Selection=function(K){return K instanceof A.selection},i.ensureSingle=function(K,Y,ie,se){var ae=K.select(Y+(ie?"."+ie:""));if(ae.size())return ae;var ue=K.append(Y);return ie&&ue.classed(ie,!0),se&&ue.call(se),ue},i.ensureSingleById=function(K,Y,ie,se){var ae=K.select(Y+"#"+ie);if(ae.size())return ae;var ue=K.append(Y).attr("id",ie);return se&&ue.call(se),ue},i.objectFromPath=function(K,Y){for(var ie,se=K.split("."),ae=ie={},ue=0;ue<se.length;ue++){var ve=se[ue],ye=null,de=se[ue].match(/(.*)\[([0-9]+)\]/);de?(ve=de[1],ye=de[2],ie=ie[ve]=[],ue===se.length-1?ie[ye]=Y:ie[ye]={},ie=ie[ye]):(ue===se.length-1?ie[ve]=Y:ie[ve]={},ie=ie[ve])}return ae};var O=/^([^\[\.]+)\.(.+)?/,R=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function U(K){return K.slice(0,2)==="__"}i.expandObjectPaths=function(K){var Y,ie,se,ae,ue,ve,ye;if(typeof K=="object"&&!Array.isArray(K)){for(ie in K)if(K.hasOwnProperty(ie))if(Y=ie.match(O)){if(ae=K[ie],U(se=Y[1]))continue;delete K[ie],K[se]=i.extendDeepNoArrays(K[se]||{},i.objectFromPath(ie,i.expandObjectPaths(ae))[se])}else if(Y=ie.match(R)){if(ae=K[ie],U(se=Y[1]))continue;if(ue=parseInt(Y[2]),delete K[ie],K[se]=K[se]||[],Y[3]===".")ye=Y[4],ve=K[se][ue]=K[se][ue]||{},i.extendDeepNoArrays(ve,i.objectFromPath(ye,i.expandObjectPaths(ae)));else{if(U(se))continue;K[se][ue]=i.expandObjectPaths(ae)}}else{if(U(ie))continue;K[ie]=i.expandObjectPaths(K[ie])}}return K},i.numSeparate=function(K,Y,ie){if(ie||(ie=!1),typeof Y!="string"||Y.length===0)throw new Error("Separator string required for formatting!");typeof K=="number"&&(K=String(K));var se=/(\d+)(\d{3})/,ae=Y.charAt(0),ue=Y.charAt(1),ve=K.split("."),ye=ve[0],de=ve.length>1?ae+ve[1]:"";if(ue&&(ve.length>1||ye.length>4||ie))for(;se.test(ye);)ye=ye.replace(se,"$1"+ue+"$2");return ye+de},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;i.templateString=function(K,Y){var ie={};return K.replace(i.TEMPLATE_STRING_REGEX,function(se,ae){var ue;return D.test(ae)?ue=Y[ae]:(ie[ae]=ie[ae]||i.nestedProperty(Y,ae).get,ue=ie[ae]()),i.isValidTextValue(ue)?ue:""})};var N={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return te.apply(N,arguments)};var W={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return te.apply(W,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,j={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return te.apply(j,arguments)};var q=/^[:|\|]/;function te(K,Y,ie){var se=this,ae=arguments;Y||(Y={});var ue={};return K.replace(i.TEMPLATE_STRING_REGEX,function(ve,ye,de){var pe=ye==="_xother"||ye==="_yother",ge=ye==="_xother_"||ye==="_yother_",ke=ye==="xother_"||ye==="yother_",Ee=ye==="xother"||ye==="yother"||pe||ke||ge,me=ye;(pe||ge)&&(me=me.substring(1)),(ke||ge)&&(me=me.substring(0,me.length-1));var oe,re,fe,Se=null,be=null;if(se.parseMultDiv){var we=function(he){var _e=he.match(F);return _e?{key:_e[1],op:_e[2],number:Number(_e[3])}:{key:he,op:null,number:null}}(me);me=we.key,Se=we.op,be=we.number}if(Ee){if((oe=Y[me])===void 0)return""}else for(fe=3;fe<ae.length;fe++)if(re=ae[fe]){if(re.hasOwnProperty(me)){oe=re[me];break}if(D.test(me)||(oe=i.nestedProperty(re,me).get(),(oe=ue[me]||i.nestedProperty(re,me).get())&&(ue[me]=oe)),oe!==void 0)break}if(oe!==void 0&&(Se==="*"&&(oe*=be),Se==="/"&&(oe/=be)),oe===void 0&&se)return se.count<se.max&&(i.warn("Variable '"+me+"' in "+se.name+" could not be found!"),oe=ve),se.count===se.max&&i.warn("Too many "+se.name+" warnings - additional warnings will be suppressed"),se.count++,ve;if(de){var Me;if(de[0]===":"&&(Me=ie?ie.numberFormat:i.numberFormat,oe!==""&&(oe=Me(de.replace(q,""))(oe))),de[0]==="|"){Me=ie?ie.timeFormat:k;var Ie=i.dateTime2ms(oe);oe=i.formatDate(Ie,de.replace(q,""),!1,Me)}}else{var Oe=me+"Label";Y.hasOwnProperty(Oe)&&(oe=Y[Oe])}return Ee&&(oe="("+oe+")",(pe||ge)&&(oe=" "+oe),(ke||ge)&&(oe+=" ")),oe})}i.subplotSort=function(K,Y){for(var ie=Math.min(K.length,Y.length)+1,se=0,ae=0,ue=0;ue<ie;ue++){var ve=K.charCodeAt(ue)||0,ye=Y.charCodeAt(ue)||0,de=ve>=48&&ve<=57,pe=ye>=48&&ye<=57;if(de&&(se=10*se+ve-48),pe&&(ae=10*ae+ye-48),!de||!pe){if(se!==ae)return se-ae;if(ve!==ye)return ve-ye}}return ae-se};var ee=2e9;i.seedPseudoRandom=function(){ee=2e9},i.pseudoRandom=function(){var K=ee;return ee=(69069*ee+1)%4294967296,Math.abs(ee-K)<429496729?i.pseudoRandom():ee/4294967296},i.fillText=function(K,Y,ie){var se=Array.isArray(ie)?function(ve){ie.push(ve)}:function(ve){ie.text=ve},ae=i.extractOption(K,Y,"htx","hovertext");if(i.isValidTextValue(ae))return se(ae);var ue=i.extractOption(K,Y,"tx","text");return i.isValidTextValue(ue)?se(ue):void 0},i.isValidTextValue=function(K){return K||K===0},i.formatPercent=function(K,Y){Y=Y||0;for(var ie=(Math.round(100*K*Math.pow(10,Y))*Math.pow(.1,Y)).toFixed(Y)+"%",se=0;se<Y;se++)ie.indexOf(".")!==-1&&(ie=(ie=ie.replace("0%","%")).replace(".%","%"));return ie},i.isHidden=function(K){var Y=window.getComputedStyle(K).display;return!Y||Y==="none"},i.strTranslate=function(K,Y){return K||Y?"translate("+K+","+Y+")":""},i.strRotate=function(K){return K?"rotate("+K+")":""},i.strScale=function(K){return K!==1?"scale("+K+")":""},i.getTextTransform=function(K){var Y=K.noCenter,ie=K.textX,se=K.textY,ae=K.targetX,ue=K.targetY,ve=K.anchorX||0,ye=K.anchorY||0,de=K.rotate,pe=K.scale;return pe?pe>1&&(pe=1):pe=0,i.strTranslate(ae-pe*(ie+ve),ue-pe*(se+ye))+i.strScale(pe)+(de?"rotate("+de+(Y?"":" "+ie+" "+se)+")":"")},i.setTransormAndDisplay=function(K,Y){K.attr("transform",i.getTextTransform(Y)),K.style("display",Y.scale?null:"none")},i.ensureUniformFontSize=function(K,Y){var ie=i.extendFlat({},Y);return ie.size=Math.max(Y.size,K._fullLayout.uniformtext.minsize||0),ie},i.join2=function(K,Y,ie){var se=K.length;return se>1?K.slice(0,-1).join(Y)+ie+K[se-1]:K.join(Y)},i.bigFont=function(K){return Math.round(1.2*K)};var Q=i.getFirefoxVersion(),J=Q!==null&&Q<86;i.getPositionFromD3Event=function(){return J?[A.event.layerX,A.event.layerY]:[A.event.offsetX,A.event.offsetY]}},63620:function(X){"use strict";X.exports=function(I){return window&&window.process&&window.process.versions?Object.prototype.toString.call(I)==="[object Object]":Object.prototype.toString.call(I)==="[object Object]"&&Object.getPrototypeOf(I).hasOwnProperty("hasOwnProperty")}},37804:function(X,I,e){"use strict";var A=e(22296),k=/^\w*$/;X.exports=function(o,T,b,p){var s,t,i;b=b||"name",p=p||"value";var n={};T&&T.length?(i=A(o,T),t=i.get()):t=o,T=T||"";var r={};if(t)for(s=0;s<t.length;s++)r[t[s][b]]=s;var a=k.test(p),l={set:function(c,h){var u=h===null?4:0;if(!t){if(!i||u===4)return;t=[],i.set(t)}var x=r[c];if(x===void 0){if(u===4)return;u|=3,x=t.length,r[c]=x}else h!==(a?t[x][p]:A(t[x],p).get())&&(u|=2);var d=t[x]=t[x]||{};return d[b]=c,a?d[p]=h:A(d,p).set(h),h!==null&&(u&=-5),n[x]=n[x]|u,l},get:function(c){if(t){var h=r[c];return h===void 0?void 0:a?t[h][p]:A(t[h],p).get()}},rename:function(c,h){var u=r[c];return u===void 0||(n[u]=1|n[u],r[h]=u,delete r[c],t[u][b]=h),l},remove:function(c){var h=r[c];if(h===void 0)return l;var u=t[h];if(Object.keys(u).length>2)return n[h]=2|n[h],l.set(c,null);if(a){for(s=h;s<t.length;s++)n[s]=3|n[s];for(s=h;s<t.length;s++)r[t[s][b]]--;t.splice(h,1),delete r[c]}else A(u,p).set(null),n[h]=6|n[h];return l},constructUpdate:function(){for(var c,h,u={},x=Object.keys(n),d=0;d<x.length;d++)h=x[d],c=T+"["+h+"]",t[h]?(1&n[h]&&(u[c+"."+b]=t[h][b]),2&n[h]&&(u[c+"."+p]=a?4&n[h]?null:t[h][p]:4&n[h]?null:A(t[h],p).get())):u[c]=null;return u}};return l}},98356:function(X,I,e){"use strict";var A=e(24040);X.exports=function(k,o){for(var T=k._context.locale,b=0;b<2;b++){for(var p=k._context.locales,s=0;s<2;s++){var t=(p[T]||{}).dictionary;if(t){var i=t[o];if(i)return i}p=A.localeRegistry}var n=T.split("-")[0];if(n===T)break;T=n}return o}},24248:function(X,I,e){"use strict";var A=e(20556).dfltConfig,k=e(41792),o=X.exports={};o.log=function(){var T;if(A.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(A.notifyOnLogging>1){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"long")}},o.warn=function(){var T;if(A.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(A.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}},o.error=function(){var T;if(A.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(A.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}}},30988:function(X,I,e){"use strict";var A=e(33428);X.exports=function(k,o,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(o,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var p=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][p]=A.select(this)}),b}},52248:function(X,I,e){"use strict";var A=e(36524);I.init2dArray=function(k,o){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(o);return T},I.transposeRagged=function(k){var o,T,b=0,p=k.length;for(o=0;o<p;o++)b=Math.max(b,k[o].length);var s=new Array(b);for(o=0;o<b;o++)for(s[o]=new Array(p),T=0;T<p;T++)s[o][T]=k[T][o];return s},I.dot=function(k,o){if(!k.length||!o.length||k.length!==o.length)return null;var T,b,p=k.length;if(k[0].length)for(T=new Array(p),b=0;b<p;b++)T[b]=I.dot(k[b],o);else if(o[0].length){var s=I.transposeRagged(o);for(T=new Array(s.length),b=0;b<s.length;b++)T[b]=I.dot(k,s[b])}else for(T=0,b=0;b<p;b++)T+=k[b]*o[b];return T},I.translationMatrix=function(k,o){return[[1,0,k],[0,1,o],[0,0,1]]},I.rotationMatrix=function(k){var o=k*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},I.rotationXYMatrix=function(k,o,T){return I.dot(I.dot(I.translationMatrix(o,T),I.rotationMatrix(k)),I.translationMatrix(-o,-T))},I.apply3DTransform=function(k){return function(){var o=arguments,T=arguments.length===1?o[0]:[o[0],o[1],o[2]||0];return I.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},I.apply2DTransform=function(k){return function(){var o=arguments;o.length===3&&(o=o[0]);var T=arguments.length===1?o[0]:[o[0],o[1]];return I.dot(k,[T[0],T[1],1]).slice(0,2)}},I.apply2DTransform2=function(k){var o=I.apply2DTransform(k);return function(T){return o(T.slice(0,2)).concat(o(T.slice(2,4)))}},I.convertCssMatrix=function(k){if(k){var o=k.length;if(o===16)return k;if(o===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},I.inverseTransformMatrix=function(k){var o=[];return A.invert(o,k),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(X){"use strict";X.exports={mod:function(I,e){var A=I%e;return A<0?A+e:A},modHalf:function(I,e){return Math.abs(I)>e/2?I-Math.round(I/e)*e:I}}},22296:function(X,I,e){"use strict";var A=e(38248),k=e(38116).isArrayOrTypedArray;function o(n,r){return function(){var a,l,c,h,u,x=n;for(h=0;h<r.length-1;h++){if((a=r[h])===-1){for(l=!0,c=[],u=0;u<x.length;u++)c[u]=o(x[u],r.slice(h+1))(),c[u]!==c[0]&&(l=!1);return l?c[0]:c}if(typeof a=="number"&&!k(x)||typeof(x=x[a])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(c=x[r[h]])!==null)return c}}X.exports=function(n,r){if(A(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var a,l,c,h,u=r.split(".");for(h=0;h<u.length;h++)if(String(u[h]).slice(0,2)==="__")throw"bad property string";for(h=0;h<u.length;){if(a=String(u[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])u[h]=a[1];else{if(h!==0)throw"bad property string";u.splice(0,1)}for(l=a[2].substr(1,a[2].length-2).split("]["),c=0;c<l.length;c++)h++,u.splice(h,0,Number(l[c]))}h++}return typeof n!="object"?function(x,d,m){return{set:function(){throw"bad container"},get:function(){},astr:d,parts:m,obj:x}}(n,r,u):{set:p(n,u,r),get:o(n,u),astr:r,parts:u,obj:n}};var T=/(^|\.)args\[/;function b(n,r){return n===void 0||n===null&&!r.match(T)}function p(n,r,a){return function(l){var c,h,u=n,x="",d=[[n,x]],m=b(l,a);for(h=0;h<r.length-1;h++){if(typeof(c=r[h])=="number"&&!k(u))throw"array index but container is not an array";if(c===-1){if(m=!t(u,r.slice(h+1),l,a))break;return}if(!i(u,c,r[h+1],m))break;if(typeof(u=u[c])!="object"||u===null)throw"container is not an object";x=s(x,c),d.push([u,x])}if(m){if(h===r.length-1&&(delete u[r[h]],Array.isArray(u)&&+r[h]==u.length-1))for(;u.length&&u[u.length-1]===void 0;)u.pop()}else u[r[h]]=l}}function s(n,r){var a=r;return A(r)?a="["+r+"]":n&&(a="."+r),n+a}function t(n,r,a,l){var c,h=k(a),u=!0,x=a,d=l.replace("-1",0),m=!h&&b(a,d),g=r[0];for(c=0;c<n.length;c++)d=l.replace("-1",c),h&&(m=b(x=a[c%a.length],d)),m&&(u=!1),i(n,c,g,m)&&p(n[c],r,l.replace("-1",c))(x);return u}function i(n,r,a,l){if(n[r]===void 0){if(l)return!1;n[r]=typeof a=="number"?[]:{}}return!0}},16628:function(X){"use strict";X.exports=function(){}},41792:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=[];X.exports=function(T,b){if(o.indexOf(T)===-1){o.push(T);var p=1e3;k(b)?p=b:b==="long"&&(p=3e3);var s=A.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var n=A.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(t)});for(var r=n.append("p"),a=i.split(/<br\s*\/?>/g),l=0;l<a.length;l++)l&&r.append("br"),r.append("span").text(a[l]);b==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(p).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(n){var r=o.indexOf(n);r!==-1&&o.splice(r,1),A.select(this).remove()})}}},72213:function(X,I,e){"use strict";var A=e(93972),k="data-savedcursor";X.exports=function(o,T){var b=o.attr(k);if(T){if(!b){for(var p=(o.attr("class")||"").split(" "),s=0;s<p.length;s++){var t=p[s];t.indexOf("cursor-")===0&&o.attr(k,t.substr(7)).classed(t,!1)}o.attr(k)||o.attr(k,"!!")}A(o,T)}else b&&(o.attr(k,null),b==="!!"?A(o):A(o,b))}},92065:function(X,I,e){"use strict";var A=e(52248).dot,k=e(39032).BADNUM,o=X.exports={};o.tester=function(T){var b,p=T.slice(),s=p[0][0],t=s,i=p[0][1],n=i;for(p[p.length-1][0]===p[0][0]&&p[p.length-1][1]===p[0][1]||p.push(p[0]),b=1;b<p.length;b++)s=Math.min(s,p[b][0]),t=Math.max(t,p[b][0]),i=Math.min(i,p[b][1]),n=Math.max(n,p[b][1]);var r,a=!1;p.length===5&&(p[0][0]===p[1][0]?p[2][0]===p[3][0]&&p[0][1]===p[3][1]&&p[1][1]===p[2][1]&&(a=!0,r=function(h){return h[0]===p[0][0]}):p[0][1]===p[1][1]&&p[2][1]===p[3][1]&&p[0][0]===p[3][0]&&p[1][0]===p[2][0]&&(a=!0,r=function(h){return h[1]===p[0][1]}));var l=!0,c=p[0];for(b=1;b<p.length;b++)if(c[0]!==p[b][0]||c[1]!==p[b][1]){l=!1;break}return{xmin:s,xmax:t,ymin:i,ymax:n,pts:p,contains:a?function(h,u){var x=h[0],d=h[1];return!(x===k||x<s||x>t||d===k||d<i||d>n||u&&r(h))}:function(h,u){var x=h[0],d=h[1];if(x===k||x<s||x>t||d===k||d<i||d>n)return!1;var m,g,y,v,_,f=p.length,S=p[0][0],w=p[0][1],E=0;for(m=1;m<f;m++)if(g=S,y=w,S=p[m][0],w=p[m][1],!(x<(v=Math.min(g,S))||x>Math.max(g,S)||d>Math.max(y,w)))if(d<Math.min(y,w))x!==v&&E++;else{if(d===(_=S===g?d:y+(x-g)*(w-y)/(S-g)))return m!==1||!u;d<=_&&x!==v&&E++}return E%2==1},isRect:a,degenerate:l}},o.isSegmentBent=function(T,b,p,s){var t,i,n,r=T[b],a=[T[p][0]-r[0],T[p][1]-r[1]],l=A(a,a),c=Math.sqrt(l),h=[-a[1]/c,a[0]/c];for(t=b+1;t<p;t++)if(i=[T[t][0]-r[0],T[t][1]-r[1]],(n=A(i,a))<0||n>l||Math.abs(A(i,h))>s)return!0;return!1},o.filter=function(T,b){var p=[T[0]],s=0,t=0;function i(n){T.push(n);var r=p.length,a=s;p.splice(t+1);for(var l=a+1;l<T.length;l++)(l===T.length-1||o.isSegmentBent(T,a,l+1,b))&&(p.push(T[l]),p.length<r-2&&(s=l,t=p.length-1),a=l)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:p}}},5048:function(X,I,e){"use strict";var A=e(16576),k=e(28624);X.exports=function(o,T,b){var p=o._fullLayout,s=!0;return p._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||p._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:o._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(i){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),s||A({container:p._glcontainer.node()}),s}},34296:function(X,I,e){"use strict";var A=e(38248),k=e(25928);X.exports=function(o){var T;if(typeof(T=o&&o.hasOwnProperty("userAgent")?o.userAgent:function(){var r;return typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),r}())!="string")return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b){for(var p=T.split(" "),s=1;s<p.length;s++)if(p[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var i=p[t];if(i.substr(0,8)==="Version/"){var n=i.substr(8).split(".")[0];if(A(n)&&(n=+n),n>=13)return!0}}}return b}},52416:function(X){"use strict";X.exports=function(I,e){if(e instanceof RegExp){for(var A=e.toString(),k=0;k<I.length;k++)if(I[k]instanceof RegExp&&I[k].toString()===A)return I;I.push(e)}else!e&&e!==0||I.indexOf(e)!==-1||I.push(e);return I}},94552:function(X,I,e){"use strict";var A=e(3400),k=e(20556).dfltConfig,o={add:function(T,b,p,s,t){var i,n;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},n=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(n,T.undoQueue.queue.length-n,i),T.undoQueue.index+=1):i=T.undoQueue.queue[n-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(p),i.redo.calls.push(s),i.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,p;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<b.undo.calls.length;p++)o.plotDo(T,b.undo.calls[p],b.undo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,p;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<b.redo.calls.length;p++)o.plotDo(T,b.redo.calls[p],b.redo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,p){T.autoplay=!0,p=function(s,t){for(var i,n=[],r=0;r<t.length;r++)i=t[r],n[r]=i===s?i:typeof i=="object"?Array.isArray(i)?A.extendDeep([],i):A.extendDeepAll({},i):i;return n}(T,p),b.apply(null,p)}};X.exports=o},53756:function(X,I){"use strict";I.counter=function(e,A,k,o){var T=(A||"")+(k?"":"$"),b=o===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(X){"use strict";var I=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;X.exports=function(A,k){for(;k;){var o=A.match(I);if(o)A=o[1];else{if(!A.match(e))throw new Error("bad relativeAttr call:"+[A,k]);A=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return A&&k.charAt(0)!=="["?A+"."+k:A+k}},51528:function(X,I,e){"use strict";var A=e(38116).isArrayOrTypedArray,k=e(63620);X.exports=function o(T,b){for(var p in b){var s=b[p],t=T[p];if(t!==s)if(p.charAt(0)==="_"||typeof s=="function"){if(p in T)continue;T[p]=s}else if(A(s)&&A(t)&&k(s[0])){if(p==="customdata"||p==="ids")continue;for(var i=Math.min(s.length,t.length),n=0;n<i;n++)t[n]!==s[n]&&k(s[n])&&k(t[n])&&o(t[n],s[n])}else k(s)&&k(t)&&(o(t,s),Object.keys(t).length||delete T[p])}}},14952:function(X,I,e){"use strict";var A=e(38248),k=e(24248),o=e(35536),T=e(39032).BADNUM,b=1e-9;function p(n,r){return n<r}function s(n,r){return n<=r}function t(n,r){return n>r}function i(n,r){return n>=r}I.findBin=function(n,r,a){if(A(r.start))return a?Math.ceil((n-r.start)/r.size-b)-1:Math.floor((n-r.start)/r.size+b);var l,c,h=0,u=r.length,x=0,d=u>1?(r[u-1]-r[0])/(u-1):1;for(c=d>=0?a?p:s:a?i:t,n+=d*b*(a?-1:1)*(d>=0?1:-1);h<u&&x++<100;)c(r[l=Math.floor((h+u)/2)],n)?h=l+1:u=l;return x>90&&k.log("Long binary search..."),h-1},I.sorterAsc=function(n,r){return n-r},I.sorterDes=function(n,r){return r-n},I.distinctVals=function(n){var r,a=n.slice();for(a.sort(I.sorterAsc),r=a.length-1;r>-1&&a[r]===T;r--);for(var l,c=a[r]-a[0]||1,h=c/(r||1)/1e4,u=[],x=0;x<=r;x++){var d=a[x],m=d-l;l===void 0?(u.push(d),l=d):m>h&&(c=Math.min(c,m),u.push(d),l=d)}return{vals:u,minDiff:c}},I.roundUp=function(n,r,a){for(var l,c=0,h=r.length-1,u=0,x=a?0:1,d=a?1:0,m=a?Math.ceil:Math.floor;c<h&&u++<100;)r[l=m((c+h)/2)]<=n?c=l+x:h=l-d;return r[c]},I.sort=function(n,r){for(var a=0,l=0,c=1;c<n.length;c++){var h=r(n[c],n[c-1]);if(h<0?a=1:h>0&&(l=1),a&&l)return n.sort(r)}return l?n:n.reverse()},I.findIndexOfMin=function(n,r){r=r||o;for(var a,l=1/0,c=0;c<n.length;c++){var h=r(n[c]);h<l&&(l=h,a=c)}return a}},93972:function(X){"use strict";X.exports=function(I,e){(I.attr("class")||"").split(" ").forEach(function(A){A.indexOf("cursor-")===0&&I.classed(A,!1)}),e&&I.classed("cursor-"+e,!0)}},16576:function(X,I,e){"use strict";var A=e(76308),k=function(){};X.exports=function(o){for(var T in o)typeof o[T]=="function"&&(o[T]=k);o.destroy=function(){o.container.parentNode.removeChild(o.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=A.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=A.lightLine,b.style["z-index"]=30;var p=document.createElement("p");return p.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",p.style.position="relative",p.style.top="50%",p.style.left="50%",p.style.height="30%",p.style.width="50%",p.style.margin="-15% 0 0 -25%",b.appendChild(p),o.container.appendChild(b),o.container.style.background="#FFFFFF",o.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(X){"use strict";X.exports=function(I){return Object.keys(I).sort()}},63084:function(X,I,e){"use strict";var A=e(38248),k=e(38116).isArrayOrTypedArray;I.aggNums=function(o,T,b,p){var s,t;if((!p||p>b.length)&&(p=b.length),A(T)||(T=!1),k(b[0])){for(t=new Array(p),s=0;s<p;s++)t[s]=I.aggNums(o,T,b[s]);b=t}for(s=0;s<p;s++)A(T)?A(b[s])&&(T=o(+T,+b[s])):T=b[s];return T},I.len=function(o){return I.aggNums(function(T){return T+1},0,o)},I.mean=function(o,T){return T||(T=I.len(o)),I.aggNums(function(b,p){return b+p},0,o)/T},I.midRange=function(o){if(o!==void 0&&o.length!==0)return(I.aggNums(Math.max,null,o)+I.aggNums(Math.min,null,o))/2},I.variance=function(o,T,b){return T||(T=I.len(o)),A(b)||(b=I.mean(o,T)),I.aggNums(function(p,s){return p+Math.pow(s-b,2)},0,o)/T},I.stdev=function(o,T,b){return Math.sqrt(I.variance(o,T,b))},I.median=function(o){var T=o.slice().sort();return I.interp(T,.5)},I.interp=function(o,T){if(!A(T))throw"n should be a finite number";if((T=T*o.length-.5)<0)return o[0];if(T>o.length-1)return o[o.length-1];var b=T%1;return b*o[Math.ceil(T)]+(1-b)*o[Math.floor(T)]}},43080:function(X,I,e){"use strict";var A=e(72160);X.exports=function(k){return k?A(k):[0,0,0,1]}},9188:function(X,I,e){"use strict";var A=e(2264),k=e(43616),o=e(3400),T=null;X.exports=function(){if(T!==null)return T;T=!1;var b=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!b){var p=Array.from(A.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")T=p.some(function(n){return s.apply(null,n)});else{var t=k.tester.append("image").attr("style",A.STYLE),i=window.getComputedStyle(t.node()).imageRendering;T=p.some(function(n){var r=n[1];return i===r||i===r.toLowerCase()}),t.remove()}}return T}},72736:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(84284).LINE_SPACING,p=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;I.convertToTspans=function(R,U,D){var N=R.text(),W=!R.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&N.match(p),F=A.select(R.node().parentNode);if(!F.empty()){var j=R.attr("class")?R.attr("class").split(" ")[0]:"text";return j+="-math",F.selectAll("svg."+j).remove(),F.selectAll("g."+j+"-group").remove(),R.style("display",null).attr({"data-unformatted":N,"data-math":"N"}),W?(U&&U._promises||[]).push(new Promise(function(te){R.style("display","none");var ee=parseInt(R.node().style.fontSize,10),Q={fontSize:ee};(function(J,K,Y){var ie,se,ae,ue,ve=parseInt((MathJax.version||"").split(".")[0]);if(ve===2||ve===3){var ye=function(){var pe="math-output-"+k.randstr({},64),ge=(ue=A.select("body").append("div").attr({id:pe}).style({visibility:"hidden",position:"absolute","font-size":K.fontSize+"px"}).text(J.replace(s,"\\lt ").replace(t,"\\gt "))).node();return ve===2?MathJax.Hub.Typeset(ge):MathJax.typeset([ge])},de=function(){var pe=ue.select(ve===2?".MathJax_SVG":".MathJax"),ge=!pe.empty()&&ue.select("svg").node();if(ge){var ke,Ee=ge.getBoundingClientRect();ke=ve===2?A.select("body").select("#MathJax_SVG_glyphs"):pe.select("defs"),Y(pe,ke,Ee)}else k.log("There was an error in the tex syntax.",J),Y();ue.remove()};ve===2?MathJax.Hub.Queue(function(){return se=k.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((ie=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},ye,de,function(){if(ie!=="SVG")return MathJax.Hub.setRenderer(ie)},function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(se)}):ve===3&&(se=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(ie=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ye(),de(),ie!=="svg"&&(MathJax.config.startup.output=ie),MathJax.config=se}))}else k.warn("No MathJax version:",MathJax.version)})(W[2],Q,function(J,K,Y){F.selectAll("svg."+j).remove(),F.selectAll("g."+j+"-group").remove();var ie=J&&J.select("svg");if(!ie||!ie.node())return q(),void te();var se=F.append("g").classed(j+"-group",!0).attr({"pointer-events":"none","data-unformatted":N,"data-math":"Y"});se.node().appendChild(ie.node()),K&&K.node()&&ie.node().insertBefore(K.node().cloneNode(!0),ie.node().firstChild);var ae=Y.width,ue=Y.height;ie.attr({class:j,height:ue,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ve=R.node().style.fill||"black",ye=ie.select("g");ye.attr({fill:ve,stroke:ve});var de=ye.node().getBoundingClientRect(),pe=de.width,ge=de.height;(pe>ae||ge>ue)&&(ie.style("overflow","hidden"),pe=(de=ie.node().getBoundingClientRect()).width,ge=de.height);var ke=+R.attr("x"),Ee=+R.attr("y"),me=-(ee||R.node().getBoundingClientRect().height)/4;if(j[0]==="y")se.attr({transform:"rotate("+[-90,ke,Ee]+")"+o(-pe/2,me-ge/2)});else if(j[0]==="l")Ee=me-ge/2;else if(j[0]==="a"&&j.indexOf("atitle")!==0)ke=0,Ee=me;else{var oe=R.attr("text-anchor");ke-=pe*(oe==="middle"?.5:oe==="end"?1:0),Ee=Ee+me-ge/2}ie.attr({x:ke,y:Ee}),D&&D.call(R,se),te(se)})})):q(),R}function q(){F.empty()||(j=R.attr("class")+"-math",F.select("svg."+j).remove()),R.text("").style("white-space","pre");var te=function(ee,Q){Q=Q.replace(h," ");var J,K=!1,Y=[],ie=-1;function se(){ie++;var be=document.createElementNS(T.svg,"tspan");A.select(be).attr({class:"line",dy:ie*b+"em"}),ee.appendChild(be),J=be;var we=Y;if(Y=[{node:be}],we.length>1)for(var Me=1;Me<we.length;Me++)ae(we[Me])}function ae(be){var we,Me=be.type,Ie={};if(Me==="a"){we="a";var Oe=be.target,he=be.href,_e=be.popup;he&&(Ie={"xlink:xlink:show":Oe==="_blank"||Oe.charAt(0)!=="_"?"new":"replace",target:Oe,"xlink:xlink:href":he},_e&&(Ie.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+_e+'");return false;'))}else we="tspan";be.style&&(Ie.style=be.style);var Ae=document.createElementNS(T.svg,we);if(Me==="sup"||Me==="sub"){ue(J,l),J.appendChild(Ae);var De=document.createElementNS(T.svg,"tspan");ue(De,l),A.select(De).attr("dy",a[Me]),Ie.dy=r[Me],J.appendChild(Ae),J.appendChild(De)}else J.appendChild(Ae);A.select(Ae).attr(Ie),J=be.node=Ae,Y.push(be)}function ue(be,we){be.appendChild(document.createTextNode(we))}function ve(be){if(Y.length!==1){var we=Y.pop();be!==we.type&&k.log("Start tag <"+we.type+"> doesnt match end tag <"+be+">. Pretending it did match.",Q),J=Y[Y.length-1].node}else k.log("Ignoring unexpected end tag </"+be+">.",Q)}d.test(Q)?se():(J=ee,Y=[{node:ee}]);for(var ye=Q.split(u),de=0;de<ye.length;de++){var pe=ye[de],ge=pe.match(x),ke=ge&&ge[2].toLowerCase(),Ee=n[ke];if(ke==="br")se();else if(Ee===void 0)ue(J,E(pe));else if(ge[1])ve(ke);else{var me=ge[4],oe={type:ke},re=_(me,m);if(re?(re=re.replace(f,"$1 fill:"),Ee&&(re+=";"+Ee)):Ee&&(re=Ee),re&&(oe.style=re),ke==="a"){K=!0;var fe=_(me,g);if(fe){var Se=P(fe);Se&&(oe.href=Se,oe.target=_(me,y)||"_blank",oe.popup=_(me,v))}}ae(oe)}}return K}(R.node(),N);te&&R.style("pointer-events","all"),I.positionText(R),D&&D.call(R)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},l="\u200B",c=["http:","https:","mailto:","",void 0,":"],h=I.NEWLINES=/(\r\n?|\n)/g,u=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;I.BR_TAG_ALL=/<br(\s+.*)?>/gi;var m=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,g=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,v=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(R,U){if(!R)return null;var D=R.match(U),N=D&&(D[3]||D[4]);return N&&E(N)}var f=/(^|;)\s*color:/;I.plainText=function(R,U){for(var D=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,N=U.allowedTags!==void 0?U.allowedTags:["br"],W=R.split(u),F=[],j="",q=0,te=0;te<W.length;te++){var ee=W[te],Q=ee.match(x),J=Q&&Q[2].toLowerCase();if(J)N.indexOf(J)!==-1&&(F.push(ee),j=J);else{var K=ee.length;if(q+K<D)F.push(ee),q+=K;else if(q<D){var Y=D-q;j&&(j!=="br"||Y<=3||K<=3)&&F.pop(),D>3?F.push(ee.substr(0,Y-3)+"..."):F.push(ee.substr(0,Y));break}j=""}}return F.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(R){return R.replace(w,function(U,D){return(D.charAt(0)==="#"?function(N){if(!(N>1114111)){var W=String.fromCodePoint;if(W)return W(N);var F=String.fromCharCode;return N<=65535?F(N):F(55232+(N>>10),N%1024+56320)}}(D.charAt(1)==="x"?parseInt(D.substr(2),16):parseInt(D.substr(1),10)):S[D])||U})}function P(R){var U=encodeURI(decodeURI(R)),D=document.createElement("a"),N=document.createElement("a");D.href=R,N.href=U;var W=D.protocol,F=N.protocol;return c.indexOf(W)!==-1&&c.indexOf(F)!==-1?U:""}function C(R,U,D){var N,W,F,j=D.horizontalAlign,q=D.verticalAlign||"top",te=R.node().getBoundingClientRect(),ee=U.node().getBoundingClientRect();return W=q==="bottom"?function(){return te.bottom-N.height}:q==="middle"?function(){return te.top+(te.height-N.height)/2}:function(){return te.top},F=j==="right"?function(){return te.right-N.width}:j==="center"?function(){return te.left+(te.width-N.width)/2}:function(){return te.left},function(){N=this.node().getBoundingClientRect();var Q=F()-ee.left,J=W()-ee.top,K=D.gd||{};if(D.gd){K._fullLayout._calcInverseTransform(K);var Y=k.apply3DTransform(K._fullLayout._invTransform)(Q,J);Q=Y[0],J=Y[1]}return this.style({top:J+"px",left:Q+"px","z-index":1e3}),this}}I.convertEntities=E,I.sanitizeHTML=function(R){R=R.replace(h," ");for(var U=document.createElement("p"),D=U,N=[],W=R.split(u),F=0;F<W.length;F++){var j=W[F],q=j.match(x),te=q&&q[2].toLowerCase();if(te in n)if(q[1])N.length&&(D=N.pop());else{var ee=q[4],Q=_(ee,m),J=Q?{style:Q}:{};if(te==="a"){var K=_(ee,g);if(K){var Y=P(K);if(Y){J.href=Y;var ie=_(ee,y);ie&&(J.target=ie)}}}var se=document.createElement(te);D.appendChild(se),A.select(se).attr(J),D=se,N.push(se)}else D.appendChild(document.createTextNode(E(j)))}return U.innerHTML},I.lineCount=function(R){return R.selectAll("tspan.line").size()||1},I.positionText=function(R,U,D){return R.each(function(){var N=A.select(this);function W(q,te){return te===void 0?(te=N.attr(q))===null&&(N.attr(q,0),te=0):N.attr(q,te),te}var F=W("x",U),j=W("y",D);this.nodeName==="text"&&N.selectAll("tspan.line").attr({x:F,y:j})})};var O="1px ";I.makeTextShadow=function(R){return O+O+O+R+", -"+O+"-"+O+O+R+", "+O+"-"+O+O+R+", -"+O+O+O+R},I.makeEditable=function(R,U){var D=U.gd,N=U.delegate,W=A.dispatch("edit","input","cancel"),F=N||R;if(R.style({"pointer-events":N?"none":"all"}),R.size()!==1)throw new Error("boo");function j(){var te,ee,Q,J,K;te=A.select(D).select(".svg-container"),ee=te.append("div"),Q=R.node().style,J=parseFloat(Q.fontSize||12),(K=U.text)===void 0&&(K=R.attr("data-unformatted")),ee.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Q.fontFamily||"Arial","font-size":J,color:U.fill||Q.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-J/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(K).call(C(R,te,U)).on("blur",function(){D._editing=!1,R.text(this.textContent).style({opacity:1});var se,ae=A.select(this).attr("class");(se=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(R.node().parentNode).select(se).style({opacity:0});var ue=this.textContent;A.select(this).transition().duration(0).remove(),A.select(document).on("mouseup",null),W.edit.call(R,ue)}).on("focus",function(){var se=this;D._editing=!0,A.select(document).on("mouseup",function(){if(A.event.target===se)return!1;document.activeElement===ee.node()&&ee.node().blur()})}).on("keyup",function(){A.event.which===27?(D._editing=!1,R.style({opacity:1}),A.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),W.cancel.call(R,this.textContent)):(W.input.call(R,this.textContent),A.select(this).call(C(R,te,U)))}).on("keydown",function(){A.event.which===13&&this.blur()}).call(q),R.style({opacity:0});var Y,ie=F.attr("class");(Y=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(R.node().parentNode).select(Y).style({opacity:0})}function q(te){var ee=te.node(),Q=document.createRange();Q.selectNodeContents(ee);var J=window.getSelection();J.removeAllRanges(),J.addRange(Q),ee.focus()}return U.immediate?j():F.on("click",j),A.rebind(R,W,"on")}},91200:function(X,I){"use strict";var e={};function A(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}I.throttle=function(k,o,T){var b=e[k],p=Date.now();if(!b){for(var s in e)e[s].ts<p-6e4&&delete e[s];b=e[k]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}A(b),p>b.ts+o?t():b.timer=setTimeout(function(){t(),b.timer=null},o)},I.done=function(k){var o=e[k];return o&&o.timer?new Promise(function(T){var b=o.onDone;o.onDone=function(){b&&b(),T(),o.onDone=null}}):Promise.resolve()},I.clear=function(k){if(k)A(e[k]),delete e[k];else for(var o in e)I.clear(o)}},36896:function(X,I,e){"use strict";var A=e(38248);X.exports=function(k,o){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(o[0],o[1]))/Math.LN10;return A(T)||(T=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),T}},59972:function(X,I,e){"use strict";var A=X.exports={},k=e(79552).locationmodeToLayer,o=e(55712).NO;A.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},A.getTopojsonPath=function(T,b){return T+b+".json"},A.getTopojsonFeatures=function(T,b){var p=k[T.locationmode],s=b.objects[p];return o(b,s).features}},11680:function(X){"use strict";X.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(X){"use strict";X.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(X,I,e){"use strict";var A=e(24040);X.exports=function(k){for(var o,T,b=A.layoutArrayContainers,p=A.layoutArrayRegexes,s=k.split("[")[0],t=0;t<p.length;t++)if((T=k.match(p[t]))&&T.index===0){o=T[0];break}if(o||(o=b[b.indexOf(s)]),!o)return!1;var i=k.substr(o.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(T[1]),property:T[3]||""}:{array:o,index:"",property:""}}},67824:function(X,I,e){"use strict";var A=e(92880).extendFlat,k=e(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=o.flags.slice().concat(["fullReplot"]),p=T.flags.slice().concat("layoutReplot");function s(n){for(var r={},a=0;a<n.length;a++)r[n[a]]=!1;return r}function t(n,r,a){var l=A({},n);for(var c in l){var h=l[c];k(h)&&(l[c]=i(h,r,0,c))}return a==="from-root"&&(l.editType=r),l}function i(n,r,a,l){if(n.valType){var c=A({},n);if(c.editType=r,Array.isArray(n.items)){c.items=new Array(n.items.length);for(var h=0;h<n.items.length;h++)c.items[h]=i(n.items[h],r)}return c}return t(n,r,l.charAt(0)==="_"?"nested":"from-root")}X.exports={traces:o,layout:T,traceFlags:function(){return s(b)},layoutFlags:function(){return s(p)},update:function(n,r){var a=r.editType;if(a&&a!=="none")for(var l=a.split("+"),c=0;c<l.length;c++)n[l[c]]=!0},overrideAll:t}},93404:function(X,I,e){"use strict";var A=e(38248),k=e(61784),o=e(24040),T=e(3400),b=e(7316),p=e(79811),s=e(76308),t=p.cleanId,i=p.getFromTrace,n=o.traceIs;function r(g,y){var v=g[y],_=y.charAt(0);v&&v!=="paper"&&(g[y]=t(v,_,!0))}function a(g){function y(v,_){var f=g[v],S=g.title&&g.title[_];f&&!S&&(g.title||(g.title={}),g.title[_]=g[v],delete g[v])}g&&(typeof g.title!="string"&&typeof g.title!="number"||(g.title={text:g.title}),y("titlefont","font"),y("titleposition","position"),y("titleside","side"),y("titleoffset","offset"))}function l(g){if(!T.isPlainObject(g))return!1;var y=g.name;return delete g.name,delete g.showlegend,(typeof y=="string"||typeof y=="number")&&String(y)}function c(g,y,v,_){if(v&&!_)return g;if(_&&!v||!g.trim())return y;if(!y.trim())return g;var f,S=Math.min(g.length,y.length);for(f=0;f<S&&g.charAt(f)===y.charAt(f);f++);return g.substr(0,f).trim()}function h(g){var y="middle",v="center";return typeof g=="string"&&(g.indexOf("top")!==-1?y="top":g.indexOf("bottom")!==-1&&(y="bottom"),g.indexOf("left")!==-1?v="left":g.indexOf("right")!==-1&&(v="right")),y+" "+v}function u(g,y){return y in g&&typeof g[y]=="object"&&Object.keys(g[y]).length===0}I.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&T.log("Clearing previous rejected promises from queue."),g._promises=[]},I.cleanLayout=function(g){var y,v;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,f=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,w=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(g);for(y=0;y<E.length;y++){var P=E[y];if(_&&_.test(P)){var C=g[P];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),C.insiderange&&delete C.range,delete C.islog,delete C.isdate,delete C.categories,u(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(f&&f.test(P))a(g[P].radialaxis);else if(S&&S.test(P)){var O=g[P];a(O.aaxis),a(O.baxis),a(O.caxis)}else if(w&&w.test(P)){var R=g[P],U=R.cameraposition;if(Array.isArray(U)&&U[0].length===4){var D=U[0],N=U[1],W=U[2],F=k([],D),j=[];for(v=0;v<3;++v)j[v]=N[v]+W*F[2+4*v];R.camera={eye:{x:j[0],y:j[1],z:j[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}a(R.xaxis),a(R.yaxis),a(R.zaxis)}}var q=Array.isArray(g.annotations)?g.annotations.length:0;for(y=0;y<q;y++){var te=g.annotations[y];T.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),r(te,"xref"),r(te,"yref"))}var ee=Array.isArray(g.shapes)?g.shapes.length:0;for(y=0;y<ee;y++){var Q=g.shapes[y];T.isPlainObject(Q)&&(r(Q,"xref"),r(Q,"yref"))}var J=Array.isArray(g.images)?g.images.length:0;for(y=0;y<J;y++){var K=g.images[y];T.isPlainObject(K)&&(r(K,"xref"),r(K,"yref"))}var Y=g.legend;return Y&&(Y.x>3?(Y.x=1.02,Y.xanchor="left"):Y.x<-2&&(Y.x=-.02,Y.xanchor="right"),Y.y>3?(Y.y=1.02,Y.yanchor="bottom"):Y.y<-2&&(Y.y=-.02,Y.yanchor="top")),a(g),g.dragmode==="rotate"&&(g.dragmode="orbit"),s.clean(g),g.template&&g.template.layout&&I.cleanLayout(g.template.layout),g},I.cleanData=function(g){for(var y=0;y<g.length;y++){var v,_=g[y];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var f=s.defaults,S=_.error_y.color||(n(_,"bar")?s.defaultLine:f[y%f.length]);_.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!n(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",I.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&I.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),n(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!n(_,"pie-like")&&!n(_,"bar-like"))if(Array.isArray(_.textposition))for(v=0;v<_.textposition.length;v++)_.textposition[v]=h(_.textposition[v]);else _.textposition&&(_.textposition=h(_.textposition));var w=o.getModule(_);if(w&&w.colorbar){var E=w.colorbar.container,P=E?_[E]:_;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var C=["x","y","z"];for(v=0;v<C.length;v++){var O=_.contours[C[v]];T.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var R=(_.increasing||{}).showlegend!==!1,U=(_.decreasing||{}).showlegend!==!1,D=l(_.increasing),N=l(_.decreasing);if(D!==!1&&N!==!1){var W=c(D,N,R,U);W&&(_.name=W)}else!D&&!N||_.name||(_.name=D||N)}if(Array.isArray(_.transforms)){var F=_.transforms;for(v=0;v<F.length;v++){var j=F[v];if(T.isPlainObject(j))switch(j.type){case"filter":j.filtersrc&&(j.target=j.filtersrc,delete j.filtersrc),j.calendar&&(j.valuecalendar||(j.valuecalendar=j.calendar),delete j.calendar);break;case"groupby":if(j.styles=j.styles||j.style,j.styles&&!Array.isArray(j.styles)){var q=j.styles,te=Object.keys(q);j.styles=[];for(var ee=0;ee<te.length;ee++)j.styles.push({target:te[ee],value:q[te[ee]]})}}}}u(_,"line")&&delete _.line,"marker"in _&&(u(_.marker,"line")&&delete _.marker.line,u(_,"marker")&&delete _.marker),s.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),a(_),_.colorbar&&a(_.colorbar),_.marker&&_.marker.colorbar&&a(_.marker.colorbar),_.line&&_.line.colorbar&&a(_.line.colorbar),_.aaxis&&a(_.aaxis),_.baxis&&a(_.baxis)}},I.swapXYData=function(g){var y;if(T.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var v=g.error_y,_="copy_ystyle"in v?v.copy_ystyle:!(v.color||v.thickness||v.width);T.swapAttrs(g,["error_?.copy_ystyle"]),_&&T.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if(typeof g.hoverinfo=="string"){var f=g.hoverinfo.split("+");for(y=0;y<f.length;y++)f[y]==="x"?f[y]="y":f[y]==="y"&&(f[y]="x");g.hoverinfo=f.join("+")}},I.coerceTraceIndices=function(g,y){if(A(y))return[y];if(!Array.isArray(y)||!y.length)return g.data.map(function(f,S){return S});if(Array.isArray(y)){for(var v=[],_=0;_<y.length;_++)T.isIndex(y[_],g.data.length)?v.push(y[_]):T.warn("trace index (",y[_],") is not a number or is out of bounds");return v}return y},I.manageArrayContainers=function(g,y,v){var _=g.obj,f=g.parts,S=f.length,w=f[S-1],E=A(w);if(E&&y===null){var P=f.slice(0,S-1).join(".");T.nestedProperty(_,P).get().splice(w,1)}else E&&g.get()===void 0&&g.get()===void 0&&(v[g.astr]=null),g.set(y)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function d(g){var y=g.search(x);if(y>0)return g.substr(0,y)}I.hasParent=function(g,y){for(var v=d(y);v;){if(v in g)return!0;v=d(v)}return!1};var m=["x","y","z"];I.clearAxisTypes=function(g,y,v){for(var _=0;_<y.length;_++)for(var f=g._fullData[_],S=0;S<3;S++){var w=i(g,f,m[S]);if(w&&w.type!=="log"){var E=w._name,P=w._id.substr(1);if(P.substr(0,5)==="scene"){if(v[P]!==void 0)continue;E=P+"."+E}var C=E+".type";v[E]===void 0&&v[C]===void 0&&T.nestedProperty(g.layout,C).set(null)}}}},22448:function(X,I,e){"use strict";var A=e(36424);I._doPlot=A._doPlot,I.newPlot=A.newPlot,I.restyle=A.restyle,I.relayout=A.relayout,I.redraw=A.redraw,I.update=A.update,I._guiRestyle=A._guiRestyle,I._guiRelayout=A._guiRelayout,I._guiUpdate=A._guiUpdate,I._storeDirectGUIEdit=A._storeDirectGUIEdit,I.react=A.react,I.extendTraces=A.extendTraces,I.prependTraces=A.prependTraces,I.addTraces=A.addTraces,I.deleteTraces=A.deleteTraces,I.moveTraces=A.moveTraces,I.purge=A.purge,I.addFrames=A.addFrames,I.deleteFrames=A.deleteFrames,I.animate=A.animate,I.setPlotConfig=A.setPlotConfig;var k=e(52200).getGraphDiv,o=e(4016).eraseActiveShape;I.deleteActiveShape=function(b){return o(k(b))},I.toImage=e(67024),I.validate=e(21480),I.downloadImage=e(39792);var T=e(94828);I.makeTemplate=T.makeTemplate,I.validateTemplate=T.validateTemplate},17680:function(X,I,e){"use strict";var A=e(63620),k=e(16628),o=e(24248),T=e(14952).sorterAsc,b=e(24040);I.containerArrayMatch=e(69820);var p=I.isAddVal=function(t){return t==="add"||A(t)},s=I.isRemoveVal=function(t){return t===null||t==="remove"};I.applyContainerArrayChanges=function(t,i,n,r,a){var l=i.astr,c=b.getComponentMethod(l,"supplyLayoutDefaults"),h=b.getComponentMethod(l,"draw"),u=b.getComponentMethod(l,"drawOne"),x=r.replot||r.recalc||c===k||h===k,d=t.layout,m=t._fullLayout;if(n[""]){Object.keys(n).length>1&&o.warn("Full array edits are incompatible with other edits",l);var g=n[""][""];if(s(g))i.set(null);else{if(!Array.isArray(g))return o.warn("Unrecognized full array edit value",l,g),!0;i.set(g)}return!x&&(c(d,m),h(t),!0)}var y,v,_,f,S,w,E,P,C=Object.keys(n).map(Number).sort(T),O=i.get(),R=O||[],U=a(m,l).get(),D=[],N=-1,W=R.length;for(y=0;y<C.length;y++)if(f=n[_=C[y]],S=Object.keys(f),w=f[""],E=p(w),_<0||_>R.length-(E?0:1))o.warn("index out of range",l,_);else if(w!==void 0)S.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",l,_),s(w)?D.push(_):E?(w==="add"&&(w={}),R.splice(_,0,w),U&&U.splice(_,0,{})):o.warn("Unrecognized full object edit value",l,_,w),N===-1&&(N=_);else for(v=0;v<S.length;v++)P=l+"["+_+"].",a(R[_],S[v],P).set(f[S[v]]);for(y=D.length-1;y>=0;y--)R.splice(D[y],1),U&&U.splice(D[y],1);if(R.length?O||i.set(R):i.set(null),x)return!1;if(c(d,m),u!==k){var F;if(N===-1)F=C;else{for(W=Math.max(R.length,W),F=[],y=0;y<C.length&&!((_=C[y])>=N);y++)F.push(_);for(y=N;y<W;y++)F.push(y)}for(y=0;y<F.length;y++)u(t,F[y])}else h(t);return!0}},36424:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(52264),T=e(3400),b=T.nestedProperty,p=e(95924),s=e(94552),t=e(24040),i=e(73060),n=e(7316),r=e(54460),a=e(96312),l=e(94724),c=e(43616),h=e(76308),u=e(42464).initInteractions,x=e(9616),d=e(22676).clearOutline,m=e(20556).dfltConfig,g=e(17680),y=e(93404),v=e(39172),_=e(67824),f=e(33816).AX_NAME_PATTERN,S=0;function w(be){var we=be._fullLayout;we._redrawFromAutoMarginCount?we._redrawFromAutoMarginCount--:be.emit("plotly_afterplot")}function E(be,we){try{be._fullLayout._paper.style("background",we)}catch(Me){T.error(Me)}}function P(be,we){E(be,h.combine(we,"white"))}function C(be,we){if(!be._context){be._context=T.extendDeep({},m);var Me=A.select("base");be._context._baseUrl=Me.size()&&Me.attr("href")?window.location.href.split("#")[0]:""}var Ie,Oe,he,_e=be._context;if(we){for(Oe=Object.keys(we),Ie=0;Ie<Oe.length;Ie++)(he=Oe[Ie])!=="editable"&&he!=="edits"&&he in _e&&(he==="setBackground"&&we[he]==="opaque"?_e[he]=P:_e[he]=we[he]);we.plot3dPixelRatio&&!_e.plotGlPixelRatio&&(_e.plotGlPixelRatio=_e.plot3dPixelRatio);var Ae=we.editable;if(Ae!==void 0)for(_e.editable=Ae,Oe=Object.keys(_e.edits),Ie=0;Ie<Oe.length;Ie++)_e.edits[Oe[Ie]]=Ae;if(we.edits)for(Oe=Object.keys(we.edits),Ie=0;Ie<Oe.length;Ie++)(he=Oe[Ie])in _e.edits&&(_e.edits[he]=we.edits[he]);_e._exportedPlot=we._exportedPlot}_e.staticPlot&&(_e.editable=!1,_e.edits={},_e.autosizable=!1,_e.scrollZoom=!1,_e.doubleClick=!1,_e.showTips=!1,_e.showLink=!1,_e.displayModeBar=!1),_e.displayModeBar!=="hover"||o||(_e.displayModeBar=!0),_e.setBackground!=="transparent"&&typeof _e.setBackground=="function"||(_e.setBackground=E),_e._hasZeroHeight=_e._hasZeroHeight||be.clientHeight===0,_e._hasZeroWidth=_e._hasZeroWidth||be.clientWidth===0;var De=_e.scrollZoom,Le=_e._scrollZoom={};if(De===!0)Le.cartesian=1,Le.gl3d=1,Le.geo=1,Le.mapbox=1;else if(typeof De=="string"){var Be=De.split("+");for(Ie=0;Ie<Be.length;Ie++)Le[Be[Ie]]=1}else De!==!1&&(Le.gl3d=1,Le.geo=1,Le.mapbox=1)}function O(be,we){var Me,Ie,Oe=we+1,he=[];for(Me=0;Me<be.length;Me++)(Ie=be[Me])<0?he.push(Oe+Ie):he.push(Ie);return he}function R(be,we,Me){var Ie,Oe;for(Ie=0;Ie<we.length;Ie++){if((Oe=we[Ie])!==parseInt(Oe,10))throw new Error("all values in "+Me+" must be integers");if(Oe>=be.data.length||Oe<-be.data.length)throw new Error(Me+" must be valid indices for gd.data.");if(we.indexOf(Oe,Ie+1)>-1||Oe>=0&&we.indexOf(-be.data.length+Oe)>-1||Oe<0&&we.indexOf(be.data.length+Oe)>-1)throw new Error("each index in "+Me+" must be unique.")}}function U(be,we,Me){if(!Array.isArray(be.data))throw new Error("gd.data must be an array.");if(we===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(we)||(we=[we]),R(be,we,"currentIndices"),Me===void 0||Array.isArray(Me)||(Me=[Me]),Me!==void 0&&R(be,Me,"newIndices"),Me!==void 0&&we.length!==Me.length)throw new Error("current and new indices must be of equal length.")}function D(be,we,Me,Ie,Oe){(function(Ze,rt,it,dt){var mt=T.isPlainObject(dt);if(!Array.isArray(Ze.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(rt))throw new Error("update must be a key:value object");if(it===void 0)throw new Error("indices must be an integer or array of integers");for(var ht in R(Ze,it,"indices"),rt){if(!Array.isArray(rt[ht])||rt[ht].length!==it.length)throw new Error("attribute "+ht+" must be an array of length equal to indices array length");if(mt&&(!(ht in dt)||!Array.isArray(dt[ht])||dt[ht].length!==rt[ht].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(be,we,Me,Ie);for(var he=function(Ze,rt,it,dt){var mt,ht,Qe,Je,wt,Pt=T.isPlainObject(dt),It=[];for(var At in Array.isArray(it)||(it=[it]),it=O(it,Ze.data.length-1),rt)for(var qe=0;qe<it.length;qe++){if(mt=Ze.data[it[qe]],ht=(Qe=b(mt,At)).get(),Je=rt[At][qe],!T.isArrayOrTypedArray(Je))throw new Error("attribute: "+At+" index: "+qe+" must be an array");if(!T.isArrayOrTypedArray(ht))throw new Error("cannot extend missing or non-array attribute: "+At);if(ht.constructor!==Je.constructor)throw new Error("cannot extend array with an array of a different type: "+At);wt=Pt?dt[At][qe]:dt,k(wt)||(wt=-1),It.push({prop:Qe,target:ht,insert:Je,maxp:Math.floor(wt)})}return It}(be,we,Me,Ie),_e={},Ae={},De=0;De<he.length;De++){var Le=he[De].prop,Be=he[De].maxp,Ve=Oe(he[De].target,he[De].insert,Be);Le.set(Ve[0]),Array.isArray(_e[Le.astr])||(_e[Le.astr]=[]),_e[Le.astr].push(Ve[1]),Array.isArray(Ae[Le.astr])||(Ae[Le.astr]=[]),Ae[Le.astr].push(he[De].target.length)}return{update:_e,maxPoints:Ae}}function N(be,we){var Me=new be.constructor(be.length+we.length);return Me.set(be),Me.set(we,be.length),Me}function W(be,we,Me,Ie){be=T.getGraphDiv(be),y.clearPromiseQueue(be);var Oe={};if(typeof we=="string")Oe[we]=Me;else{if(!T.isPlainObject(we))return T.warn("Restyle fail.",we,Me,Ie),Promise.reject();Oe=T.extendFlat({},we),Ie===void 0&&(Ie=Me)}Object.keys(Oe).length&&(be.changed=!0);var he=y.coerceTraceIndices(be,Ie),_e=te(be,Oe,he),Ae=_e.flags;Ae.calc&&(be.calcdata=void 0),Ae.clearAxisTypes&&y.clearAxisTypes(be,he,{});var De=[];Ae.fullReplot?De.push(I._doPlot):(De.push(n.previousPromises),n.supplyDefaults(be),Ae.markerSize&&(n.doCalcdata(be),K(De)),Ae.style&&De.push(v.doTraceStyle),Ae.colorbars&&De.push(v.doColorBars),De.push(w)),De.push(n.rehover,n.redrag,n.reselect),s.add(be,W,[be,_e.undoit,_e.traces],W,[be,_e.redoit,_e.traces]);var Le=T.syncOrAsync(De,be);return Le&&Le.then||(Le=Promise.resolve()),Le.then(function(){return be.emit("plotly_restyle",_e.eventData),be})}function F(be){return be===void 0?null:be}function j(be,we){return we?function(Me,Ie,Oe){var he=b(Me,Ie),_e=he.set;return he.set=function(Ae){q((Oe||"")+Ie,he.get(),Ae,be),_e(Ae)},he}:b}function q(be,we,Me,Ie){if(Array.isArray(we)||Array.isArray(Me))for(var Oe=Array.isArray(we)?we:[],he=Array.isArray(Me)?Me:[],_e=Math.max(Oe.length,he.length),Ae=0;Ae<_e;Ae++)q(be+"["+Ae+"]",Oe[Ae],he[Ae],Ie);else if(T.isPlainObject(we)||T.isPlainObject(Me)){var De=T.isPlainObject(we)?we:{},Le=T.isPlainObject(Me)?Me:{},Be=T.extendFlat({},De,Le);for(var Ve in Be)q(be+"."+Ve,De[Ve],Le[Ve],Ie)}else Ie[be]===void 0&&(Ie[be]=F(we))}function te(be,we,Me){var Ie,Oe=be._fullLayout,he=be._fullData,_e=be.data,Ae=Oe._guiEditing,De=j(Oe._preGUI,Ae),Le=T.extendDeepAll({},we);ee(we);var Be,Ve=_.traceFlags(),Ze={},rt={};function it(){return Me.map(function(){})}function dt(jt){var Wt=r.id2name(jt);Be.indexOf(Wt)===-1&&Be.push(Wt)}function mt(jt){return"LAYOUT"+jt+".autorange"}function ht(jt){return"LAYOUT"+jt+".range"}function Qe(jt){for(var Wt=jt;Wt<he.length;Wt++)if(he[Wt]._input===_e[jt])return he[Wt]}function Je(jt,Wt,Ft){if(Array.isArray(jt))jt.forEach(function(hn){Je(hn,Wt,Ft)});else if(!(jt in we)&&!y.hasParent(we,jt)){var Ln;if(jt.substr(0,6)==="LAYOUT")Ln=De(be.layout,jt.replace("LAYOUT",""));else{var bn=Me[Ft];Ln=j(Oe._tracePreGUI[Qe(bn)._fullInput.uid],Ae)(_e[bn],jt)}jt in rt||(rt[jt]=it()),rt[jt][Ft]===void 0&&(rt[jt][Ft]=F(Ln.get())),Wt!==void 0&&Ln.set(Wt)}}function wt(jt){return function(Wt){return he[Wt][jt]}}function Pt(jt){return function(Wt,Ft){return Wt===!1?he[Me[Ft]][jt]:null}}for(var It in we){if(y.hasParent(we,It))throw new Error("cannot set "+It+" and a parent attribute simultaneously");var At,qe,Ye,Ne,We,at,tt=we[It];if(It!=="autobinx"&&It!=="autobiny"||(It=It.charAt(It.length-1)+"bins",tt=Array.isArray(tt)?tt.map(Pt(It)):tt===!1?Me.map(wt(It)):null),Ze[It]=tt,It.substr(0,6)!=="LAYOUT"){for(rt[It]=it(),Ie=0;Ie<Me.length;Ie++)if(At=_e[Me[Ie]],qe=Qe(Me[Ie]),Ne=(Ye=j(Oe._tracePreGUI[qe._fullInput.uid],Ae)(At,It)).get(),(We=Array.isArray(tt)?tt[Ie%tt.length]:tt)!==void 0){var Re=Ye.parts[Ye.parts.length-1],Fe=It.substr(0,It.length-Re.length-1),nt=Fe?Fe+".":"",Ge=Fe?b(qe,Fe).get():qe;if((at=i.getTraceValObject(qe,Ye.parts))&&at.impliedEdits&&We!==null)for(var ut in at.impliedEdits)Je(T.relativeAttr(It,ut),at.impliedEdits[ut],Ie);else if(Re!=="thicknessmode"&&Re!=="lenmode"||Ne===We||We!=="fraction"&&We!=="pixels"||!Ge){if(It==="type"&&(We==="pie"!=(Ne==="pie")||We==="funnelarea"!=(Ne==="funnelarea"))){var pt="x",gt="y";We!=="bar"&&Ne!=="bar"||At.orientation!=="h"||(pt="y",gt="x"),T.swapAttrs(At,["?","?src"],"labels",pt),T.swapAttrs(At,["d?","?0"],"label",pt),T.swapAttrs(At,["?","?src"],"values",gt),Ne==="pie"||Ne==="funnelarea"?(b(At,"marker.color").set(b(At,"marker.colors").get()),Oe._pielayer.selectAll("g.trace").remove()):t.traceIs(At,"cartesian")&&b(At,"marker.colors").set(b(At,"marker.color").get())}}else{var ct=Oe._size,Tt=Ge.orient,vt=Tt==="top"||Tt==="bottom";if(Re==="thicknessmode"){var kt=vt?ct.h:ct.w;Je(nt+"thickness",Ge.thickness*(We==="fraction"?1/kt:kt),Ie)}else{var Lt=vt?ct.w:ct.h;Je(nt+"len",Ge.len*(We==="fraction"?1/Lt:Lt),Ie)}}if(rt[It][Ie]=F(Ne),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(It)!==-1){if(It==="orientation"){Ye.set(We);var Ct=At.x&&!At.y?"h":"v";if((Ye.get()||Ct)===qe.orientation)continue}else It==="orientationaxes"&&(At.orientation={v:"h",h:"v"}[qe.orientation]);y.swapXYData(At),Ve.calc=Ve.clearAxisTypes=!0}else n.dataArrayContainers.indexOf(Ye.parts[0])!==-1?(y.manageArrayContainers(Ye,We,rt),Ve.calc=!0):(at?at.arrayOk&&!t.traceIs(qe,"regl")&&(T.isArrayOrTypedArray(We)||T.isArrayOrTypedArray(Ne))?Ve.calc=!0:_.update(Ve,at):Ve.calc=!0,Ye.set(We))}if(["swapxyaxes","orientationaxes"].indexOf(It)!==-1&&r.swap(be,Me),It==="orientationaxes"){var Dt=b(be.layout,"hovermode"),Gt=Dt.get();Gt==="x"?Dt.set("y"):Gt==="y"?Dt.set("x"):Gt==="x unified"?Dt.set("y unified"):Gt==="y unified"&&Dt.set("x unified")}if(["orientation","type"].indexOf(It)!==-1){for(Be=[],Ie=0;Ie<Me.length;Ie++){var tn=_e[Me[Ie]];t.traceIs(tn,"cartesian")&&(dt(tn.xaxis||"x"),dt(tn.yaxis||"y"))}Je(Be.map(mt),!0,0),Je(Be.map(ht),[0,1],0)}}else Ye=De(be.layout,It.replace("LAYOUT","")),rt[It]=[F(Ye.get())],Ye.set(Array.isArray(tt)?tt[0]:tt),Ve.calc=!0}return(Ve.calc||Ve.plot)&&(Ve.fullReplot=!0),{flags:Ve,undoit:rt,redoit:Ze,traces:Me,eventData:T.extendDeepNoArrays([],[Le,Me])}}function ee(be){var we,Me,Ie,Oe=T.counterRegex("axis",".title",!1,!1),he=/colorbar\.title$/,_e=Object.keys(be);for(we=0;we<_e.length;we++)Me=_e[we],Ie=be[Me],Me!=="title"&&!Oe.test(Me)&&!he.test(Me)||typeof Ie!="string"&&typeof Ie!="number"?Me.indexOf("titlefont")>-1&&Me.indexOf("grouptitlefont")===-1?Ae(Me,Me.replace("titlefont","title.font")):Me.indexOf("titleposition")>-1?Ae(Me,Me.replace("titleposition","title.position")):Me.indexOf("titleside")>-1?Ae(Me,Me.replace("titleside","title.side")):Me.indexOf("titleoffset")>-1&&Ae(Me,Me.replace("titleoffset","title.offset")):Ae(Me,Me.replace("title","title.text"));function Ae(De,Le){be[Le]=be[De],delete be[De]}}function Q(be,we,Me){be=T.getGraphDiv(be),y.clearPromiseQueue(be);var Ie={};if(typeof we=="string")Ie[we]=Me;else{if(!T.isPlainObject(we))return T.warn("Relayout fail.",we,Me),Promise.reject();Ie=T.extendFlat({},we)}Object.keys(Ie).length&&(be.changed=!0);var Oe=ae(be,Ie),he=Oe.flags;he.calc&&(be.calcdata=void 0);var _e=[n.previousPromises];he.layoutReplot?_e.push(v.layoutReplot):Object.keys(Ie).length&&(J(be,he,Oe)||n.supplyDefaults(be),he.legend&&_e.push(v.doLegend),he.layoutstyle&&_e.push(v.layoutStyles),he.axrange&&K(_e,Oe.rangesAltered),he.ticks&&_e.push(v.doTicksRelayout),he.modebar&&_e.push(v.doModeBar),he.camera&&_e.push(v.doCamera),he.colorbars&&_e.push(v.doColorBars),_e.push(w)),_e.push(n.rehover,n.redrag,n.reselect),s.add(be,Q,[be,Oe.undoit],Q,[be,Oe.redoit]);var Ae=T.syncOrAsync(_e,be);return Ae&&Ae.then||(Ae=Promise.resolve(be)),Ae.then(function(){return be.emit("plotly_relayout",Oe.eventData),be})}function J(be,we,Me){var Ie,Oe,he=be._fullLayout;if(!we.axrange)return!1;for(var _e in we)if(_e!=="axrange"&&we[_e])return!1;var Ae=function(rt,it){return T.coerce(Ie,Oe,l,rt,it)},De={};for(var Le in Me.rangesAltered){var Be=r.id2name(Le);if(Ie=be.layout[Be],Oe=he[Be],a(Ie,Oe,Ae,De),Oe._matchGroup){for(var Ve in Oe._matchGroup)if(Ve!==Le){var Ze=he[r.id2name(Ve)];Ze.autorange=Oe.autorange,Ze.range=Oe.range.slice(),Ze._input.range=Oe.range.slice()}}}return!0}function K(be,we){var Me=we?function(Ie){var Oe=[];for(var he in we){var _e=r.getFromId(Ie,he);if(Oe.push(he),(_e.ticklabelposition||"").indexOf("inside")!==-1&&_e._anchorAxis&&Oe.push(_e._anchorAxis._id),_e._matchGroup)for(var Ae in _e._matchGroup)we[Ae]||Oe.push(Ae)}return r.draw(Ie,Oe,{skipTitle:!0})}:function(Ie){return r.draw(Ie,"redraw")};be.push(d,v.doAutoRangeAndConstraints,Me,v.drawData,v.finalDraw)}var Y=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,se=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ae(be,we){var Me,Ie,Oe,he=be.layout,_e=be._fullLayout,Ae=_e._guiEditing,De=j(_e._preGUI,Ae),Le=Object.keys(we),Be=r.list(be),Ve=T.extendDeepAll({},we),Ze={};for(ee(we),Le=Object.keys(we),Ie=0;Ie<Le.length;Ie++)if(Le[Ie].indexOf("allaxes")===0){for(Oe=0;Oe<Be.length;Oe++){var rt=Be[Oe]._id.substr(1),it=rt.indexOf("scene")!==-1?rt+".":"",dt=Le[Ie].replace("allaxes",it+Be[Oe]._name);we[dt]||(we[dt]=we[Le[Ie]])}delete we[Le[Ie]]}var mt=_.layoutFlags(),ht={},Qe={};function Je(hn,Kt){if(Array.isArray(hn))hn.forEach(function(Qt){Je(Qt,Kt)});else if(!(hn in we)&&!y.hasParent(we,hn)){var sn=De(he,hn);hn in Qe||(Qe[hn]=F(sn.get())),Kt!==void 0&&sn.set(Kt)}}var wt,Pt={};function It(hn){var Kt=r.name2id(hn.split(".")[0]);return Pt[Kt]=1,Kt}for(var At in we){if(y.hasParent(we,At))throw new Error("cannot set "+At+" and a parent attribute simultaneously");for(var qe=De(he,At),Ye=we[At],Ne=qe.parts.length-1;Ne>0&&typeof qe.parts[Ne]!="string";)Ne--;var We=qe.parts[Ne],at=qe.parts[Ne-1]+"."+We,tt=qe.parts.slice(0,Ne).join("."),Re=b(be.layout,tt).get(),Fe=b(_e,tt).get(),nt=qe.get();if(Ye!==void 0){ht[At]=Ye,Qe[At]=We==="reverse"?Ye:F(nt);var Ge=i.getLayoutValObject(_e,qe.parts);if(Ge&&Ge.impliedEdits&&Ye!==null)for(var ut in Ge.impliedEdits)Je(T.relativeAttr(At,ut),Ge.impliedEdits[ut]);if(["width","height"].indexOf(At)!==-1)if(Ye){Je("autosize",null);var pt=At==="height"?"width":"height";Je(pt,_e[pt])}else _e[At]=be._initialAutoSize[At];else if(At==="autosize")Je("width",Ye?null:_e.width),Je("height",Ye?null:_e.height);else if(at.match(Y))It(at),b(_e,tt+"._inputRange").set(null);else if(at.match(ie)){It(at),b(_e,tt+"._inputRange").set(null);var gt=b(_e,tt).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else at.match(se)&&b(_e,tt+"._inputDomain").set(null);if(We==="type"){wt=Re;var ct=Fe.type==="linear"&&Ye==="log",Tt=Fe.type==="log"&&Ye==="linear";if(ct||Tt){if(wt&&wt.range)if(Fe.autorange)ct&&(wt.range=wt.range[1]>wt.range[0]?[1,2]:[2,1]);else{var vt=wt.range[0],kt=wt.range[1];ct?(vt<=0&&kt<=0&&Je(tt+".autorange",!0),vt<=0?vt=kt/1e6:kt<=0&&(kt=vt/1e6),Je(tt+".range[0]",Math.log(vt)/Math.LN10),Je(tt+".range[1]",Math.log(kt)/Math.LN10)):(Je(tt+".range[0]",Math.pow(10,vt)),Je(tt+".range[1]",Math.pow(10,kt)))}else Je(tt+".autorange",!0);Array.isArray(_e._subplots.polar)&&_e._subplots.polar.length&&_e[qe.parts[0]]&&qe.parts[1]==="radialaxis"&&delete _e[qe.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(be,Fe,Ye,Je),t.getComponentMethod("images","convertCoords")(be,Fe,Ye,Je)}else Je(tt+".autorange",!0),Je(tt+".range",null);b(_e,tt+"._inputRange").set(null)}else if(We.match(f)){var Lt=b(_e,At).get(),Ct=(Ye||{}).type;Ct&&Ct!=="-"||(Ct="linear"),t.getComponentMethod("annotations","convertCoords")(be,Lt,Ct,Je),t.getComponentMethod("images","convertCoords")(be,Lt,Ct,Je)}var Dt=g.containerArrayMatch(At);if(Dt){Me=Dt.array,Ie=Dt.index;var Gt=Dt.property,tn=Ge||{editType:"calc"};Ie!==""&&Gt===""&&(g.isAddVal(Ye)?Qe[At]=null:g.isRemoveVal(Ye)?Qe[At]=(b(he,Me).get()||[])[Ie]:T.warn("unrecognized full object value",we)),_.update(mt,tn),Ze[Me]||(Ze[Me]={});var jt=Ze[Me][Ie];jt||(jt=Ze[Me][Ie]={}),jt[Gt]=Ye,delete we[At]}else We==="reverse"?(Re.range?Re.range.reverse():(Je(tt+".autorange",!0),Re.range=[1,0]),Fe.autorange?mt.calc=!0:mt.plot=!0):(At==="dragmode"&&(Ye===!1&&nt!==!1||Ye!==!1&&nt===!1)||_e._has("scatter-like")&&_e._has("regl")&&At==="dragmode"&&(Ye==="lasso"||Ye==="select")&&nt!=="lasso"&&nt!=="select"||_e._has("gl2d")?mt.plot=!0:Ge?_.update(mt,Ge):mt.calc=!0,qe.set(Ye))}}for(Me in Ze)g.applyContainerArrayChanges(be,De(he,Me),Ze[Me],mt,De)||(mt.plot=!0);for(var Wt in Pt){var Ft=(wt=r.getFromId(be,Wt))&&wt._constraintGroup;if(Ft)for(var Ln in mt.calc=!0,Ft)Pt[Ln]||(r.getFromId(be,Ln)._constraintShrinkable=!0)}(ue(be)||we.height||we.width)&&(mt.plot=!0);var bn=_e.shapes;for(Ie=0;Ie<bn.length;Ie++)if(bn[Ie].showlegend){mt.calc=!0;break}return(mt.plot||mt.calc)&&(mt.layoutReplot=!0),{flags:mt,rangesAltered:Pt,undoit:Qe,redoit:ht,eventData:Ve}}function ue(be){var we=be._fullLayout,Me=we.width,Ie=we.height;return be.layout.autosize&&n.plotAutoSize(be,be.layout,we),we.width!==Me||we.height!==Ie}function ve(be,we,Me,Ie){be=T.getGraphDiv(be),y.clearPromiseQueue(be),T.isPlainObject(we)||(we={}),T.isPlainObject(Me)||(Me={}),Object.keys(we).length&&(be.changed=!0),Object.keys(Me).length&&(be.changed=!0);var Oe=y.coerceTraceIndices(be,Ie),he=te(be,T.extendFlat({},we),Oe),_e=he.flags,Ae=ae(be,T.extendFlat({},Me)),De=Ae.flags;(_e.calc||De.calc)&&(be.calcdata=void 0),_e.clearAxisTypes&&y.clearAxisTypes(be,Oe,Me);var Le=[];De.layoutReplot?Le.push(v.layoutReplot):_e.fullReplot?Le.push(I._doPlot):(Le.push(n.previousPromises),J(be,De,Ae)||n.supplyDefaults(be),_e.style&&Le.push(v.doTraceStyle),(_e.colorbars||De.colorbars)&&Le.push(v.doColorBars),De.legend&&Le.push(v.doLegend),De.layoutstyle&&Le.push(v.layoutStyles),De.axrange&&K(Le,Ae.rangesAltered),De.ticks&&Le.push(v.doTicksRelayout),De.modebar&&Le.push(v.doModeBar),De.camera&&Le.push(v.doCamera),Le.push(w)),Le.push(n.rehover,n.redrag,n.reselect),s.add(be,ve,[be,he.undoit,Ae.undoit,he.traces],ve,[be,he.redoit,Ae.redoit,he.traces]);var Be=T.syncOrAsync(Le,be);return Be&&Be.then||(Be=Promise.resolve(be)),Be.then(function(){return be.emit("plotly_update",{data:he.eventData,layout:Ae.eventData}),be})}function ye(be){return function(we){we._fullLayout._guiEditing=!0;var Me=be.apply(null,arguments);return we._fullLayout._guiEditing=!1,Me}}var de=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],pe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ge(be,we){for(var Me=0;Me<we.length;Me++){var Ie=we[Me],Oe=be.match(Ie.pattern);if(Oe){var he=Oe[1]||"";return{head:he,tail:be.substr(he.length+1),attr:Ie.attr}}}}function ke(be,we){var Me=b(we,be).get();if(Me!==void 0)return Me;var Ie=be.split(".");for(Ie.pop();Ie.length>1;)if(Ie.pop(),(Me=b(we,Ie.join(".")+".uirevision").get())!==void 0)return Me;return we.uirevision}function Ee(be,we){for(var Me=0;Me<we.length;Me++)if(we[Me]._fullInput.uid===be)return Me;return-1}function me(be,we,Me){for(var Ie=0;Ie<we.length;Ie++)if(we[Ie].uid===be)return Ie;return!we[Me]||we[Me].uid?-1:Me}function oe(be,we){var Me=T.isPlainObject(be),Ie=Array.isArray(be);return Me||Ie?(Me&&T.isPlainObject(we)||Ie&&Array.isArray(we))&&JSON.stringify(be)===JSON.stringify(we):be===we}function re(be,we,Me,Ie){var Oe,he,_e,Ae=Ie.getValObject,De=Ie.flags,Le=Ie.immutable,Be=Ie.inArray,Ve=Ie.arrayIndex;function Ze(){var Re=Oe.editType;Be&&Re.indexOf("arraydraw")!==-1?T.pushUnique(De.arrays[Be],Ve):(_.update(De,Oe),Re!=="none"&&De.nChanges++,Ie.transition&&Oe.anim&&De.nChangesAnim++,(Y.test(_e)||ie.test(_e))&&(De.rangesAltered[Me[0]]=1),se.test(_e)&&b(we,"_inputDomain").set(null),he==="datarevision"&&(De.newDataRevision=1))}function rt(Re){return Re.valType==="data_array"||Re.arrayOk}for(he in be){if(De.calc&&!Ie.transition)return;var it=be[he],dt=we[he],mt=Me.concat(he);if(_e=mt.join("."),he.charAt(0)!=="_"&&typeof it!="function"&&it!==dt){if((he==="tick0"||he==="dtick")&&Me[0]!=="geo"){var ht=we.tickmode;if(ht==="auto"||ht==="array"||!ht)continue}if((he!=="range"||!we.autorange)&&(he!=="zmin"&&he!=="zmax"||we.type!=="contourcarpet")&&(Oe=Ae(mt))&&(!Oe._compareAsJSON||JSON.stringify(it)!==JSON.stringify(dt))){var Qe,Je=Oe.valType,wt=rt(Oe),Pt=Array.isArray(it),It=Array.isArray(dt);if(Pt&&It){var At="_input_"+he,qe=be[At],Ye=we[At];if(Array.isArray(qe)&&qe===Ye)continue}if(dt===void 0)wt&&Pt?De.calc=!0:Ze();else if(Oe._isLinkedToArray){var Ne=[],We=!1;Be||(De.arrays[he]=Ne);var at=Math.min(it.length,dt.length),tt=Math.max(it.length,dt.length);if(at!==tt){if(Oe.editType!=="arraydraw"){Ze();continue}We=!0}for(Qe=0;Qe<at;Qe++)re(it[Qe],dt[Qe],mt.concat(Qe),T.extendFlat({inArray:he,arrayIndex:Qe},Ie));if(We)for(Qe=at;Qe<tt;Qe++)Ne.push(Qe)}else!Je&&T.isPlainObject(it)?re(it,dt,mt,Ie):wt?Pt&&It?(Le&&(De.calc=!0),(Le||Ie.newDataRevision)&&Ze()):Pt!==It?De.calc=!0:Ze():Pt&&It&&it.length===dt.length&&String(it)===String(dt)||Ze()}}}for(he in we)if(!(he in be)&&he.charAt(0)!=="_"&&typeof we[he]!="function"){if(rt(Oe=Ae(Me.concat(he)))&&Array.isArray(we[he]))return void(De.calc=!0);Ze()}}function fe(be,we){var Me;for(Me in be)if(Me.charAt(0)!=="_"){var Ie=be[Me],Oe=we[Me];if(Ie!==Oe)if(T.isPlainObject(Ie)&&T.isPlainObject(Oe)){if(fe(Ie,Oe))return!0}else{if(!Array.isArray(Ie)||!Array.isArray(Oe)||Ie.length!==Oe.length)return!0;for(var he=0;he<Ie.length;he++)if(Ie[he]!==Oe[he]&&(!T.isPlainObject(Ie[he])||!T.isPlainObject(Oe[he])||fe(Ie[he],Oe[he])))return!0}}}function Se(be){var we=be._fullLayout,Me=be.getBoundingClientRect();if(!T.equalDomRects(Me,we._lastBBox)){var Ie=we._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(be));we._invScaleX=Math.sqrt(Ie[0][0]*Ie[0][0]+Ie[0][1]*Ie[0][1]+Ie[0][2]*Ie[0][2]),we._invScaleY=Math.sqrt(Ie[1][0]*Ie[1][0]+Ie[1][1]*Ie[1][1]+Ie[1][2]*Ie[1][2]),we._lastBBox=Me}}I.animate=function(be,we,Me){if(be=T.getGraphDiv(be),!T.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ie=be._transitionData;Ie._frameQueue||(Ie._frameQueue=[]);var Oe=(Me=n.supplyAnimationDefaults(Me)).transition,he=Me.frame;function _e(Le){return Array.isArray(Oe)?Le>=Oe.length?Oe[0]:Oe[Le]:Oe}function Ae(Le){return Array.isArray(he)?Le>=he.length?he[0]:he[Le]:he}function De(Le,Be){var Ve=0;return function(){if(Le&&++Ve===Be)return Le()}}return Ie._frameWaitingCnt===void 0&&(Ie._frameWaitingCnt=0),new Promise(function(Le,Be){function Ve(){be.emit("plotly_animating"),Ie._lastFrameAt=-1/0,Ie._timeToNext=0,Ie._runningTransitions=0,Ie._currentFrame=null;var At=function(){Ie._animationRaf=window.requestAnimationFrame(At),Date.now()-Ie._lastFrameAt>Ie._timeToNext&&function(){Ie._currentFrame&&Ie._currentFrame.onComplete&&Ie._currentFrame.onComplete();var qe=Ie._currentFrame=Ie._frameQueue.shift();if(qe){var Ye=qe.name?qe.name.toString():null;be._fullLayout._currentFrame=Ye,Ie._lastFrameAt=Date.now(),Ie._timeToNext=qe.frameOpts.duration,n.transition(be,qe.frame.data,qe.frame.layout,y.coerceTraceIndices(be,qe.frame.traces),qe.frameOpts,qe.transitionOpts).then(function(){qe.onComplete&&qe.onComplete()}),be.emit("plotly_animatingframe",{name:Ye,frame:qe.frame,animation:{frame:qe.frameOpts,transition:qe.transitionOpts}})}else be.emit("plotly_animated"),window.cancelAnimationFrame(Ie._animationRaf),Ie._animationRaf=null}()};At()}var Ze,rt,it=0;function dt(At){return Array.isArray(Oe)?it>=Oe.length?At.transitionOpts=Oe[it]:At.transitionOpts=Oe[0]:At.transitionOpts=Oe,it++,At}var mt=[],ht=we==null,Qe=Array.isArray(we);if(ht||Qe||!T.isPlainObject(we)){if(ht||["string","number"].indexOf(typeof we)!==-1)for(Ze=0;Ze<Ie._frames.length;Ze++)(rt=Ie._frames[Ze])&&(ht||String(rt.group)===String(we))&&mt.push({type:"byname",name:String(rt.name),data:dt({name:rt.name})});else if(Qe)for(Ze=0;Ze<we.length;Ze++){var Je=we[Ze];["number","string"].indexOf(typeof Je)!==-1?(Je=String(Je),mt.push({type:"byname",name:Je,data:dt({name:Je})})):T.isPlainObject(Je)&&mt.push({type:"object",data:dt(T.extendFlat({},Je))})}}else mt.push({type:"object",data:dt(T.extendFlat({},we))});for(Ze=0;Ze<mt.length;Ze++)if((rt=mt[Ze]).type==="byname"&&!Ie._frameHash[rt.data.name])return T.warn('animate failure: frame not found: "'+rt.data.name+'"'),void Be();["next","immediate"].indexOf(Me.mode)!==-1&&function(){if(Ie._frameQueue.length!==0){for(;Ie._frameQueue.length;){var At=Ie._frameQueue.pop();At.onInterrupt&&At.onInterrupt()}be.emit("plotly_animationinterrupted",[])}}(),Me.direction==="reverse"&&mt.reverse();var wt=be._fullLayout._currentFrame;if(wt&&Me.fromcurrent){var Pt=-1;for(Ze=0;Ze<mt.length;Ze++)if((rt=mt[Ze]).type==="byname"&&rt.name===wt){Pt=Ze;break}if(Pt>0&&Pt<mt.length-1){var It=[];for(Ze=0;Ze<mt.length;Ze++)rt=mt[Ze],(mt[Ze].type!=="byname"||Ze>Pt)&&It.push(rt);mt=It}}mt.length>0?function(At){if(At.length!==0){for(var qe=0;qe<At.length;qe++){var Ye;Ye=At[qe].type==="byname"?n.computeFrame(be,At[qe].name):At[qe].data;var Ne=Ae(qe),We=_e(qe);We.duration=Math.min(We.duration,Ne.duration);var at={frame:Ye,name:At[qe].name,frameOpts:Ne,transitionOpts:We};qe===At.length-1&&(at.onComplete=De(Le,2),at.onInterrupt=Be),Ie._frameQueue.push(at)}Me.mode==="immediate"&&(Ie._lastFrameAt=-1/0),Ie._animationRaf||Ve()}}(mt):(be.emit("plotly_animated"),Le())})},I.addFrames=function(be,we,Me){if(be=T.getGraphDiv(be),we==null)return Promise.resolve();if(!T.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ie,Oe,he,_e,Ae=be._transitionData._frames,De=be._transitionData._frameHash;if(!Array.isArray(we))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+we);var Le=Ae.length+2*we.length,Be=[],Ve={};for(Ie=we.length-1;Ie>=0;Ie--)if(T.isPlainObject(we[Ie])){var Ze=we[Ie].name,rt=(De[Ze]||Ve[Ze]||{}).name,it=we[Ie].name,dt=De[rt]||Ve[rt];rt&&it&&typeof it=="number"&&dt&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(De[rt]||Ve[rt]).name+'" with a frame whose name of type "number" also equates to "'+rt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ve[Ze]={name:Ze},Be.push({frame:n.supplyFrameDefaults(we[Ie]),index:Me&&Me[Ie]!==void 0&&Me[Ie]!==null?Me[Ie]:Le+Ie})}Be.sort(function(At,qe){return At.index>qe.index?-1:At.index<qe.index?1:0});var mt=[],ht=[],Qe=Ae.length;for(Ie=Be.length-1;Ie>=0;Ie--){if(typeof(Oe=Be[Ie].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Oe.name)for(;De[Oe.name="frame "+be._transitionData._counter++];);if(De[Oe.name]){for(he=0;he<Ae.length&&(Ae[he]||{}).name!==Oe.name;he++);mt.push({type:"replace",index:he,value:Oe}),ht.unshift({type:"replace",index:he,value:Ae[he]})}else _e=Math.max(0,Math.min(Be[Ie].index,Qe)),mt.push({type:"insert",index:_e,value:Oe}),ht.unshift({type:"delete",index:_e}),Qe++}var Je=n.modifyFrames,wt=n.modifyFrames,Pt=[be,ht],It=[be,mt];return s&&s.add(be,Je,Pt,wt,It),n.modifyFrames(be,mt)},I.deleteFrames=function(be,we){if(be=T.getGraphDiv(be),!T.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be);var Me,Ie,Oe=be._transitionData._frames,he=[],_e=[];if(!we)for(we=[],Me=0;Me<Oe.length;Me++)we.push(Me);for((we=we.slice()).sort(),Me=we.length-1;Me>=0;Me--)Ie=we[Me],he.push({type:"delete",index:Ie}),_e.unshift({type:"insert",index:Ie,value:Oe[Ie]});var Ae=n.modifyFrames,De=n.modifyFrames,Le=[be,_e],Be=[be,he];return s&&s.add(be,Ae,Le,De,Be),n.modifyFrames(be,he)},I.addTraces=function be(we,Me,Ie){we=T.getGraphDiv(we);var Oe,he,_e=[],Ae=I.deleteTraces,De=be,Le=[we,_e],Be=[we,Me];for(function(Ve,Ze,rt){var it,dt;if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(Ze===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ze)||(Ze=[Ze]),it=0;it<Ze.length;it++)if(typeof(dt=Ze[it])!="object"||Array.isArray(dt)||dt===null)throw new Error("all values in traces array must be non-array objects");if(rt===void 0||Array.isArray(rt)||(rt=[rt]),rt!==void 0&&rt.length!==Ze.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(we,Me,Ie),Array.isArray(Me)||(Me=[Me]),Me=Me.map(function(Ve){return T.extendFlat({},Ve)}),y.cleanData(Me),Oe=0;Oe<Me.length;Oe++)we.data.push(Me[Oe]);for(Oe=0;Oe<Me.length;Oe++)_e.push(-Me.length+Oe);if(Ie===void 0)return he=I.redraw(we),s.add(we,Ae,Le,De,Be),he;Array.isArray(Ie)||(Ie=[Ie]);try{U(we,_e,Ie)}catch(Ve){throw we.data.splice(we.data.length-Me.length,Me.length),Ve}return s.startSequence(we),s.add(we,Ae,Le,De,Be),he=I.moveTraces(we,_e,Ie),s.stopSequence(we),he},I.deleteTraces=function be(we,Me){we=T.getGraphDiv(we);var Ie,Oe,he=[],_e=I.addTraces,Ae=be,De=[we,he,Me],Le=[we,Me];if(Me===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Me)||(Me=[Me]),R(we,Me,"indices"),(Me=O(Me,we.data.length-1)).sort(T.sorterDes),Ie=0;Ie<Me.length;Ie+=1)Oe=we.data.splice(Me[Ie],1)[0],he.push(Oe);var Be=I.redraw(we);return s.add(we,_e,De,Ae,Le),Be},I.extendTraces=function be(we,Me,Ie,Oe){var he=D(we=T.getGraphDiv(we),Me,Ie,Oe,function(De,Le,Be){var Ve,Ze;if(T.isTypedArray(De))if(Be<0){var rt=new De.constructor(0),it=N(De,Le);Be<0?(Ve=it,Ze=rt):(Ve=rt,Ze=it)}else if(Ve=new De.constructor(Be),Ze=new De.constructor(De.length+Le.length-Be),Be===Le.length)Ve.set(Le),Ze.set(De);else if(Be<Le.length){var dt=Le.length-Be;Ve.set(Le.subarray(dt)),Ze.set(De),Ze.set(Le.subarray(0,dt),De.length)}else{var mt=Be-Le.length,ht=De.length-mt;Ve.set(De.subarray(ht)),Ve.set(Le,mt),Ze.set(De.subarray(0,ht))}else Ve=De.concat(Le),Ze=Be>=0&&Be<Ve.length?Ve.splice(0,Ve.length-Be):[];return[Ve,Ze]}),_e=I.redraw(we),Ae=[we,he.update,Ie,he.maxPoints];return s.add(we,I.prependTraces,Ae,be,arguments),_e},I.moveTraces=function be(we,Me,Ie){var Oe,he=[],_e=[],Ae=be,De=be,Le=[we=T.getGraphDiv(we),Ie,Me],Be=[we,Me,Ie];if(U(we,Me,Ie),Me=Array.isArray(Me)?Me:[Me],Ie===void 0)for(Ie=[],Oe=0;Oe<Me.length;Oe++)Ie.push(-Me.length+Oe);for(Ie=Array.isArray(Ie)?Ie:[Ie],Me=O(Me,we.data.length-1),Ie=O(Ie,we.data.length-1),Oe=0;Oe<we.data.length;Oe++)Me.indexOf(Oe)===-1&&he.push(we.data[Oe]);for(Oe=0;Oe<Me.length;Oe++)_e.push({newIndex:Ie[Oe],trace:we.data[Me[Oe]]});for(_e.sort(function(Ze,rt){return Ze.newIndex-rt.newIndex}),Oe=0;Oe<_e.length;Oe+=1)he.splice(_e[Oe].newIndex,0,_e[Oe].trace);we.data=he;var Ve=I.redraw(we);return s.add(we,Ae,Le,De,Be),Ve},I.prependTraces=function be(we,Me,Ie,Oe){var he=D(we=T.getGraphDiv(we),Me,Ie,Oe,function(De,Le,Be){var Ve,Ze;if(T.isTypedArray(De))if(Be<=0){var rt=new De.constructor(0),it=N(Le,De);Be<0?(Ve=it,Ze=rt):(Ve=rt,Ze=it)}else if(Ve=new De.constructor(Be),Ze=new De.constructor(De.length+Le.length-Be),Be===Le.length)Ve.set(Le),Ze.set(De);else if(Be<Le.length){var dt=Le.length-Be;Ve.set(Le.subarray(0,dt)),Ze.set(Le.subarray(dt)),Ze.set(De,dt)}else{var mt=Be-Le.length;Ve.set(Le),Ve.set(De.subarray(0,mt),Le.length),Ze.set(De.subarray(mt))}else Ve=Le.concat(De),Ze=Be>=0&&Be<Ve.length?Ve.splice(Be,Ve.length):[];return[Ve,Ze]}),_e=I.redraw(we),Ae=[we,he.update,Ie,he.maxPoints];return s.add(we,I.extendTraces,Ae,be,arguments),_e},I.newPlot=function(be,we,Me,Ie){return be=T.getGraphDiv(be),n.cleanPlot([],{},be._fullData||[],be._fullLayout||{}),n.purge(be),I._doPlot(be,we,Me,Ie)},I._doPlot=function(be,we,Me,Ie){var Oe;if(be=T.getGraphDiv(be),p.init(be),T.isPlainObject(we)){var he=we;we=he.data,Me=he.layout,Ie=he.config,Oe=he.frames}if(p.triggerHandler(be,"plotly_beforeplot",[we,Me,Ie])===!1)return Promise.reject();we||Me||T.isPlotDiv(be)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",be),C(be,Ie),Me||(Me={}),A.select(be).classed("js-plotly-plot",!0),c.makeTester(),Array.isArray(be._promises)||(be._promises=[]);var _e=(be.data||[]).length===0&&Array.isArray(we);Array.isArray(we)&&(y.cleanData(we),_e?be.data=we:be.data.push.apply(be.data,we),be.empty=!1),be.layout&&!_e||(be.layout=y.cleanLayout(Me)),n.supplyDefaults(be);var Ae=be._fullLayout,De=Ae._has("cartesian");Ae._replotting=!0,(_e||Ae._shouldCreateBgLayer)&&(function(ht){var Qe=A.select(ht),Je=ht._fullLayout;if(Je._calcInverseTransform=Se,Je._calcInverseTransform(ht),Je._container=Qe.selectAll(".plot-container").data([0]),Je._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Je._paperdiv=Je._container.selectAll(".svg-container").data([0]),Je._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Je._glcontainer=Je._paperdiv.selectAll(".gl-container").data([{}]),Je._glcontainer.enter().append("div").classed("gl-container",!0),Je._paperdiv.selectAll(".main-svg").remove(),Je._paperdiv.select(".modebar-container").remove(),Je._paper=Je._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Je._toppaper=Je._paperdiv.append("svg").classed("main-svg",!0),Je._modebardiv=Je._paperdiv.append("div"),delete Je._modeBar,Je._hoverpaper=Je._paperdiv.append("svg").classed("main-svg",!0),!Je._uid){var wt={};A.selectAll("defs").each(function(){this.id&&(wt[this.id.split("-")[1]]=1)}),Je._uid=T.randstr(wt)}Je._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),Je._defs=Je._paper.append("defs").attr("id","defs-"+Je._uid),Je._clips=Je._defs.append("g").classed("clips",!0),Je._topdefs=Je._toppaper.append("defs").attr("id","topdefs-"+Je._uid),Je._topclips=Je._topdefs.append("g").classed("clips",!0),Je._bgLayer=Je._paper.append("g").classed("bglayer",!0),Je._draggers=Je._paper.append("g").classed("draglayer",!0);var Pt=Je._paper.append("g").classed("layer-below",!0);Je._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),Je._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),Je._cartesianlayer=Je._paper.append("g").classed("cartesianlayer",!0),Je._polarlayer=Je._paper.append("g").classed("polarlayer",!0),Je._smithlayer=Je._paper.append("g").classed("smithlayer",!0),Je._ternarylayer=Je._paper.append("g").classed("ternarylayer",!0),Je._geolayer=Je._paper.append("g").classed("geolayer",!0),Je._funnelarealayer=Je._paper.append("g").classed("funnelarealayer",!0),Je._pielayer=Je._paper.append("g").classed("pielayer",!0),Je._iciclelayer=Je._paper.append("g").classed("iciclelayer",!0),Je._treemaplayer=Je._paper.append("g").classed("treemaplayer",!0),Je._sunburstlayer=Je._paper.append("g").classed("sunburstlayer",!0),Je._indicatorlayer=Je._toppaper.append("g").classed("indicatorlayer",!0),Je._glimages=Je._paper.append("g").classed("glimages",!0);var It=Je._toppaper.append("g").classed("layer-above",!0);Je._imageUpperLayer=It.append("g").classed("imagelayer",!0),Je._shapeUpperLayer=It.append("g").classed("shapelayer",!0),Je._selectionLayer=Je._toppaper.append("g").classed("selectionlayer",!0),Je._infolayer=Je._toppaper.append("g").classed("infolayer",!0),Je._menulayer=Je._toppaper.append("g").classed("menulayer",!0),Je._zoomlayer=Je._toppaper.append("g").classed("zoomlayer",!0),Je._hoverlayer=Je._hoverpaper.append("g").classed("hoverlayer",!0),Je._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ht.emit("plotly_framework")}(be),Ae._shouldCreateBgLayer&&delete Ae._shouldCreateBgLayer),c.initGradients(be),c.initPatterns(be),_e&&r.saveShowSpikeInitial(be);var Le=!be.calcdata||be.calcdata.length!==(be._fullData||[]).length;Le&&n.doCalcdata(be);for(var Be=0;Be<be.calcdata.length;Be++)be.calcdata[Be][0].trace=be._fullData[Be];be._context.responsive?be._responsiveChartHandler||(be._responsiveChartHandler=function(){T.isHidden(be)||n.resize(be)},window.addEventListener("resize",be._responsiveChartHandler)):T.clearResponsive(be);var Ve=T.extendFlat({},Ae._size),Ze=0;function rt(){if(n.clearAutoMarginIds(be),v.drawMarginPushers(be),r.allowAutoMargin(be),be._fullLayout.title.text&&be._fullLayout.title.automargin&&n.allowAutoMargin(be,"title.automargin"),Ae._has("pie"))for(var ht=be._fullData,Qe=0;Qe<ht.length;Qe++){var Je=ht[Qe];Je.type==="pie"&&Je.automargin&&n.allowAutoMargin(be,"pie."+Je.uid+".automargin")}return n.doAutoMargin(be),n.previousPromises(be)}function it(){be._transitioning||(v.doAutoRangeAndConstraints(be),_e&&r.saveRangeInitial(be),t.getComponentMethod("rangeslider","calcAutorange")(be))}var dt=[n.previousPromises,function(){if(Oe)return I.addFrames(be,Oe)},function ht(){for(var Qe=Ae._basePlotModules,Je=0;Je<Qe.length;Je++)Qe[Je].drawFramework&&Qe[Je].drawFramework(be);!Ae._glcanvas&&Ae._has("gl")&&(Ae._glcanvas=Ae._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(At){return At.key}),Ae._glcanvas.enter().append("canvas").attr("class",function(At){return"gl-canvas gl-canvas-"+At.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var wt=be._context.plotGlPixelRatio;if(Ae._glcanvas){Ae._glcanvas.attr("width",Ae.width*wt).attr("height",Ae.height*wt).style("width",Ae.width+"px").style("height",Ae.height+"px");var Pt=Ae._glcanvas.data()[0].regl;if(Pt&&(Math.floor(Ae.width*wt)!==Pt._gl.drawingBufferWidth||Math.floor(Ae.height*wt)!==Pt._gl.drawingBufferHeight)){var It="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ze)return T.log(It+" Clearing graph and plotting again."),n.cleanPlot([],{},be._fullData,Ae),n.supplyDefaults(be),Ae=be._fullLayout,n.doCalcdata(be),Ze++,ht();T.error(It)}}return Ae.modebar.orientation==="h"?Ae._modebardiv.style("height",null).style("width","100%"):Ae._modebardiv.style("width",null).style("height",Ae.height+"px"),n.previousPromises(be)},rt,function(){if(n.didMarginChange(Ve,Ae._size))return T.syncOrAsync([rt,v.layoutStyles],be)}];De&&dt.push(function(){if(Le)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),it],be);it()}),dt.push(v.layoutStyles),De&&dt.push(function(){return r.draw(be,_e?"":"redraw")},function(ht){var Qe=ht._fullLayout._insideTickLabelsUpdaterange;if(Qe)return ht._fullLayout._insideTickLabelsUpdaterange=void 0,Q(ht,Qe).then(function(){r.saveRangeInitial(ht,!0)})}),dt.push(v.drawData,v.finalDraw,u,n.addLinks,n.rehover,n.redrag,n.reselect,n.doAutoMargin,n.previousPromises);var mt=T.syncOrAsync(dt,be);return mt&&mt.then||(mt=Promise.resolve()),mt.then(function(){return w(be),be})},I.purge=function(be){var we=(be=T.getGraphDiv(be))._fullLayout||{},Me=be._fullData||[];return n.cleanPlot([],{},Me,we),n.purge(be),p.purge(be),we._container&&we._container.remove(),delete be._context,be},I.react=function(be,we,Me,Ie){var Oe,he;be=T.getGraphDiv(be),y.clearPromiseQueue(be);var _e=be._fullData,Ae=be._fullLayout;if(T.isPlotDiv(be)&&_e&&Ae){if(T.isPlainObject(we)){var De=we;we=De.data,Me=De.layout,Ie=De.config,Oe=De.frames}var Le=!1;if(Ie){var Be=T.extendDeep({},be._context);be._context=void 0,C(be,Ie),Le=fe(Be,be._context)}be.data=we||[],y.cleanData(be.data),be.layout=Me||{},y.cleanLayout(be.layout),function(tt,Re,Fe,nt){var Ge,ut,pt,gt,ct,Tt,vt,kt,Lt,Ct,Dt=nt._preGUI,Gt=[],tn={},jt={};for(Ge in Dt){if(ct=ge(Ge,de)){if(Lt=ct.head,Ct=ct.tail,ut=ct.attr||Lt+".uirevision",(gt=(pt=b(nt,ut).get())&&ke(ut,Re))&&gt===pt){if((Tt=Dt[Ge])===null&&(Tt=void 0),oe(kt=(vt=b(Re,Ge)).get(),Tt)){kt===void 0&&Ct==="autorange"&&Gt.push(Lt),vt.set(F(b(nt,Ge).get()));continue}if(Ct==="autorange"||Ct.substr(0,6)==="range["){var Wt=Dt[Lt+".range[0]"],Ft=Dt[Lt+".range[1]"],Ln=Dt[Lt+".autorange"];if(Ln||Ln===null&&Wt===null&&Ft===null){if(!(Lt in tn)){var bn=b(Re,Lt).get();tn[Lt]=bn&&(bn.autorange||bn.autorange!==!1&&(!bn.range||bn.range.length!==2))}if(tn[Lt]){vt.set(F(b(nt,Ge).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Ge);delete Dt[Ge],ct&&ct.tail.substr(0,6)==="range["&&(jt[ct.head]=1)}for(var hn=0;hn<Gt.length;hn++){var Kt=Gt[hn];if(jt[Kt]){var sn=b(Re,Kt).get();sn&&delete sn.autorange}}var Qt=nt._tracePreGUI;for(var cn in Qt){var vn,xn=Qt[cn],An=null;for(Ge in xn){if(!An){var Sn=Ee(cn,Fe);if(Sn<0){delete Qt[cn];break}var Tn=me(cn,tt,(vn=Fe[Sn]._fullInput).index);if(Tn<0){delete Qt[cn];break}An=tt[Tn]}if(ct=ge(Ge,pe)){if(ct.attr?gt=(pt=b(nt,ct.attr).get())&&ke(ct.attr,Re):(pt=vn.uirevision,(gt=An.uirevision)===void 0&&(gt=Re.uirevision)),gt&&gt===pt&&((Tt=xn[Ge])===null&&(Tt=void 0),oe(kt=(vt=b(An,Ge)).get(),Tt))){vt.set(F(b(vn,Ge).get()));continue}}else T.warn("unrecognized GUI edit: "+Ge+" in trace uid "+cn);delete xn[Ge]}}}(be.data,be.layout,_e,Ae),n.supplyDefaults(be,{skipUpdateCalc:!0});var Ve=be._fullData,Ze=be._fullLayout,rt=Ze.datarevision===void 0,it=Ze.transition,dt=function(tt,Re,Fe,nt,Ge){var ut=_.layoutFlags();return ut.arrays={},ut.rangesAltered={},ut.nChanges=0,ut.nChangesAnim=0,re(Re,Fe,[],{getValObject:function(pt){return i.getLayoutValObject(Fe,pt)},flags:ut,immutable:nt,transition:Ge,gd:tt}),(ut.plot||ut.calc)&&(ut.layoutReplot=!0),Ge&&ut.nChanges&&ut.nChangesAnim&&(ut.anim=ut.nChanges===ut.nChangesAnim?"all":"some"),ut}(be,Ae,Ze,rt,it),mt=dt.newDataRevision,ht=function(tt,Re,Fe,nt,Ge,ut){var pt=Re.length===Fe.length;if(!Ge&&!pt)return{fullReplot:!0,calc:!0};var gt,ct,Tt=_.traceFlags();Tt.arrays={},Tt.nChanges=0,Tt.nChangesAnim=0;var vt={getValObject:function(Lt){var Ct=i.getTraceValObject(ct,Lt);return!ct._module.animatable&&Ct.anim&&(Ct.anim=!1),Ct},flags:Tt,immutable:nt,transition:Ge,newDataRevision:ut,gd:tt},kt={};for(gt=0;gt<Re.length;gt++)if(Fe[gt]){if(ct=Fe[gt]._fullInput,n.hasMakesDataTransform(ct)&&(ct=Fe[gt]),kt[ct.uid])continue;kt[ct.uid]=1,re(Re[gt]._fullInput,ct,[],vt)}return(Tt.calc||Tt.plot)&&(Tt.fullReplot=!0),Ge&&Tt.nChanges&&Tt.nChangesAnim&&(Tt.anim=Tt.nChanges===Tt.nChangesAnim&&pt?"all":"some"),Tt}(be,_e,Ve,rt,it,mt);if(ue(be)&&(dt.layoutReplot=!0),ht.calc||dt.calc){be.calcdata=void 0;for(var Qe=Object.getOwnPropertyNames(Ze),Je=0;Je<Qe.length;Je++){var wt=Qe[Je],Pt=wt.substring(0,5);if(Pt==="xaxis"||Pt==="yaxis"){var It=Ze[wt]._emptyCategories;It&&It()}}}else n.supplyDefaultsUpdateCalc(be.calcdata,Ve);var At=[];if(Oe&&(be._transitionData={},n.createTransitionData(be),At.push(function(){return I.addFrames(be,Oe)})),Ze.transition&&!Le&&(ht.anim||dt.anim))dt.ticks&&At.push(v.doTicksRelayout),n.doCalcdata(be),v.doAutoRangeAndConstraints(be),At.push(function(){return n.transitionFromReact(be,ht,dt,Ae)});else if(ht.fullReplot||dt.layoutReplot||Le)be._fullLayout._skipDefaults=!0,At.push(I._doPlot);else{for(var qe in dt.arrays){var Ye=dt.arrays[qe];if(Ye.length){var Ne=t.getComponentMethod(qe,"drawOne");if(Ne!==T.noop)for(var We=0;We<Ye.length;We++)Ne(be,Ye[We]);else{var at=t.getComponentMethod(qe,"draw");if(at===T.noop)throw new Error("cannot draw components: "+qe);at(be)}}}At.push(n.previousPromises),ht.style&&At.push(v.doTraceStyle),(ht.colorbars||dt.colorbars)&&At.push(v.doColorBars),dt.legend&&At.push(v.doLegend),dt.layoutstyle&&At.push(v.layoutStyles),dt.axrange&&K(At),dt.ticks&&At.push(v.doTicksRelayout),dt.modebar&&At.push(v.doModeBar),dt.camera&&At.push(v.doCamera),At.push(w)}At.push(n.rehover,n.redrag,n.reselect),(he=T.syncOrAsync(At,be))&&he.then||(he=Promise.resolve(be))}else he=I.newPlot(be,we,Me,Ie);return he.then(function(){return be.emit("plotly_react",{data:we,layout:Me}),be})},I.redraw=function(be){if(be=T.getGraphDiv(be),!T.isPlotDiv(be))throw new Error("This element is not a Plotly plot: "+be);return y.cleanData(be.data),y.cleanLayout(be.layout),be.calcdata=void 0,I._doPlot(be).then(function(){return be.emit("plotly_redraw"),be})},I.relayout=Q,I.restyle=W,I.setPlotConfig=function(be){return T.extendFlat(m,be)},I.update=ve,I._guiRelayout=ye(Q),I._guiRestyle=ye(W),I._guiUpdate=ye(ve),I._storeDirectGUIEdit=function(be,we,Me){for(var Ie in Me)q(Ie,b(be,Ie).get(),Me[Ie],we)}},20556:function(X){"use strict";var I={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function A(k,o){for(var T in k){var b=k[T];b.valType?o[T]=b.dflt:(o[T]||(o[T]={}),A(b,o[T]))}})(I,e),X.exports={configAttributes:I,dfltConfig:e}},73060:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(45464),T=e(64859),b=e(16672),p=e(85656),s=e(20556).configAttributes,t=e(67824),i=k.extendDeepAll,n=k.isPlainObject,r=k.isArrayOrTypedArray,a=k.nestedProperty,l=k.valObjectMeta,c="_isSubplotObj",h="_isLinkedToArray",u="_deprecated",x=[c,h,"_arrayAttrRegexps",u];function d(f,S,w){if(!f)return!1;if(f._isLinkedToArray){if(m(S[w]))w++;else if(w<S.length)return!1}for(;w<S.length;w++){var E=f[S[w]];if(!n(E)||(f=E,w===S.length-1))break;if(f._isLinkedToArray){if(!m(S[++w]))return!1}else if(f.valType==="info_array"){var P=S[++w];if(!m(P))return!1;var C=f.items;if(Array.isArray(C)){if(P>=C.length)return!1;if(f.dimensions===2){if(w++,S.length===w)return f;var O=S[w];if(!m(O))return!1;f=C[P][O]}else f=C[P]}else f=C}}return f}function m(f){return f===Math.round(f)&&f>=0}function g(){var f,S,w={};for(f in i(w,T),A.subplotsRegistry)if((S=A.subplotsRegistry[f]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)v(w,S,S.attr[E]);else v(w,S,S.attr==="subplot"?S.name:S.attr);for(f in A.componentsRegistry){var P=(S=A.componentsRegistry[f]).schema;if(P&&(P.subplots||P.layout)){var C=P.subplots;if(C&&C.xaxis&&!C.yaxis)for(var O in C.xaxis)delete w.yaxis[O];delete w.xaxis.shift,delete w.xaxis.autoshift}else S.name==="colorscale"?i(w,S.layoutAttributes):S.layoutAttributes&&_(w,S.layoutAttributes,S.name)}return{layoutAttributes:y(w)}}function y(f){return function(S){I.crawl(S,function(w,E,P){I.isValObject(w)?w.arrayOk!==!0&&w.valType!=="data_array"||(P[E+"src"]={valType:"string",editType:"none"}):n(w)&&(w.role="object")})}(f),function(S){I.crawl(S,function(w,E,P){if(w){var C=w[h];C&&(delete w[h],P[E]={items:{}},P[E].items[C]=w,P[E].role="object")}})}(f),function(S){(function w(E){for(var P in E)if(n(E[P]))w(E[P]);else if(Array.isArray(E[P]))for(var C=0;C<E[P].length;C++)w(E[P][C]);else E[P]instanceof RegExp&&(E[P]=E[P].toString())})(S)}(f),f}function v(f,S,w){var E=a(f,w),P=i({},S.layoutAttributes);P[c]=!0,E.set(P)}function _(f,S,w){var E=a(f,w);E.set(i(E.get()||{},S))}I.IS_SUBPLOT_OBJ=c,I.IS_LINKED_TO_ARRAY=h,I.DEPRECATED=u,I.UNDERSCORE_ATTRS=x,I.get=function(){var f={};A.allTypes.forEach(function(E){f[E]=function(P){var C,O;O=(C=A.modules[P]._module).basePlotModule;var R={type:null},U=i({},o),D=i({},C.attributes);I.crawl(D,function(F,j,q,te,ee){a(U,ee).set(void 0),F===void 0&&a(D,ee).set(void 0)}),i(R,U),A.traceIs(P,"noOpacity")&&delete R.opacity,A.traceIs(P,"showLegend")||(delete R.showlegend,delete R.legendgroup),A.traceIs(P,"noHover")&&(delete R.hoverinfo,delete R.hoverlabel),C.selectPoints||delete R.selectedpoints,i(R,D),O.attributes&&i(R,O.attributes),R.type=P;var N={meta:C.meta||{},categories:C.categories||{},animatable:!!C.animatable,type:P,attributes:y(R)};if(C.layoutAttributes){var W={};i(W,C.layoutAttributes),N.layoutAttributes=y(W)}return C.animatable||I.crawl(N,function(F){I.isValObject(F)&&"anim"in F&&delete F.anim}),N}(E)});var S,w={};return Object.keys(A.transformsRegistry).forEach(function(E){w[E]=function(P){var C=A.transformsRegistry[P],O=i({},C.attributes);return Object.keys(A.componentsRegistry).forEach(function(R){var U=A.componentsRegistry[R];U.schema&&U.schema.transforms&&U.schema.transforms[P]&&Object.keys(U.schema.transforms[P]).forEach(function(D){_(O,U.schema.transforms[P][D],D)})}),{attributes:y(O)}}(E)}),{defs:{valObjects:l,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:f,layout:g(),transforms:w,frames:(S={frames:i({},b)},y(S),S.frames),animation:y(p),config:y(s)}},I.crawl=function(f,S,w,E){var P=w||0;E=E||"",Object.keys(f).forEach(function(C){var O=f[C];if(x.indexOf(C)===-1){var R=(E?E+".":"")+C;S(O,C,f,P,R),I.isValObject(O)||n(O)&&C!=="impliedEdits"&&I.crawl(O,S,P+1,R)}})},I.isValObject=function(f){return f&&f.valType!==void 0},I.findArrayAttributes=function(f){var S,w,E=[],P=[],C=[];function O(F,j,q,te){P=P.slice(0,te).concat([j]),C=C.slice(0,te).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(P[te-1]!=="colorbar"||j!=="ticktext"&&j!=="tickvals")&&R(S,0,"")}function R(F,j,q){var te=F[P[j]],ee=q+P[j];if(j===P.length-1)r(te)&&E.push(w+ee);else if(C[j]){if(Array.isArray(te))for(var Q=0;Q<te.length;Q++)n(te[Q])&&R(te[Q],j+1,ee+"["+Q+"].")}else n(te)&&R(te,j+1,ee+".")}S=f,w="",I.crawl(o,O),f._module&&f._module.attributes&&I.crawl(f._module.attributes,O);var U=f.transforms;if(U)for(var D=0;D<U.length;D++){var N=U[D],W=N._module;W&&(w="transforms["+D+"].",S=N,I.crawl(W.attributes,O))}return E},I.getTraceValObject=function(f,S){var w,E,P=S[0],C=1;if(P==="transforms"){if(S.length===1)return o.transforms;var O=f.transforms;if(!Array.isArray(O)||!O.length)return!1;var R=S[1];if(!m(R)||R>=O.length)return!1;E=(w=(A.transformsRegistry[O[R].type]||{}).attributes)&&w[S[2]],C=3}else{var U=f._module;if(U||(U=(A.modules[f.type||o.type.dflt]||{})._module),!U)return!1;if(!(E=(w=U.attributes)&&w[P])){var D=U.basePlotModule;D&&D.attributes&&(E=D.attributes[P])}E||(E=o[P])}return d(E,S,C)},I.getLayoutValObject=function(f,S){var w=function(E,P){var C,O,R,U,D=E._basePlotModules;if(D){var N;for(C=0;C<D.length;C++){if((R=D[C]).attrRegex&&R.attrRegex.test(P)){if(R.layoutAttrOverrides)return R.layoutAttrOverrides;!N&&R.layoutAttributes&&(N=R.layoutAttributes)}var W=R.baseLayoutAttrOverrides;if(W&&P in W)return W[P]}if(N)return N}var F=E._modules;if(F){for(C=0;C<F.length;C++)if((U=F[C].layoutAttributes)&&P in U)return U[P]}for(O in A.componentsRegistry){if((R=A.componentsRegistry[O]).name==="colorscale"&&P.indexOf("coloraxis")===0)return R.layoutAttributes[P];if(!R.schema&&P===R.name)return R.layoutAttributes}return P in T&&T[P]}(f,S[0]);return d(w,S,1)}},31780:function(X,I,e){"use strict";var A=e(3400),k=e(45464),o="templateitemname",T={name:{valType:"string",editType:"none"}};function b(s){return s&&typeof s=="string"}function p(s){var t=s.length-1;return s.charAt(t)!=="s"&&A.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}T[o]={valType:"string",editType:"calc"},I.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=T.name,t[o]=T[o],t},I.traceTemplater=function(s){var t,i,n={};for(t in s)i=s[t],Array.isArray(i)&&i.length&&(n[t]=0);return{newTrace:function(r){var a={type:t=A.coerce(r,{},k,"type"),_template:null};if(t in n){i=s[t];var l=n[t]%i.length;n[t]++,a._template=i[l]}return a}}},I.newContainer=function(s,t,i){var n=s._template,r=n&&(n[t]||i&&n[i]);return A.isPlainObject(r)||(r=null),s[t]={_template:r}},I.arrayTemplater=function(s,t,i){var n=s._template,r=n&&n[p(t)],a=n&&n[t];Array.isArray(a)&&a.length||(a=[]);var l={};return{newItem:function(c){var h={name:c.name,_input:c},u=h[o]=c[o];if(!b(u))return h._template=r,h;for(var x=0;x<a.length;x++){var d=a[x];if(d.name===u)return l[u]=1,h._template=d,h}return h[i]=c[i]||!1,h._template=!1,h},defaultItems:function(){for(var c=[],h=0;h<a.length;h++){var u=a[h],x=u.name;if(b(x)&&!l[x]){var d={_template:u,name:x,_input:{_templateitemname:x}};d[o]=u[o],c.push(d),l[x]=1}}return c}}},I.arrayDefaultKey=p,I.arrayEditor=function(s,t,i){var n=(A.nestedProperty(s,t).get()||[]).length,r=i._index,a=r>=n&&(i._input||{})._templateitemname;a&&(r=n);var l,c=t+"["+r+"]";function h(){l={},a&&(l[c]={},l[c][o]=a)}function u(d,m){a?A.nestedProperty(l[c],d).set(m):l[c+"."+d]=m}function x(){var d=l;return h(),d}return h(),{modifyBase:function(d,m){l[d]=m},modifyItem:u,getUpdateObj:x,applyUpdate:function(d,m){d&&u(d,m);var g=x();for(var y in g)A.nestedProperty(s,y).set(g[y])}}}},39172:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(7316),T=e(3400),b=e(72736),p=e(73696),s=e(76308),t=e(43616),i=e(81668),n=e(45460),r=e(54460),a=e(84284),l=e(71888),c=l.enforce,h=l.clean,u=e(19280).doAutoRange,x="start";function d(_,f,S){for(var w=0;w<S.length;w++){var E=S[w][0],P=S[w][1];if(!(E[0]>=_[1]||E[1]<=_[0])&&P[0]<f[1]&&P[1]>f[0])return!0}return!1}function m(_){var f,S,w,E,P,C,O=_._fullLayout,R=O._size,U=R.p,D=r.list(_,"",!0);if(O._paperdiv.style({width:_._context.responsive&&O.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":O.width+"px",height:_._context.responsive&&O.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(t.setSize,O.width,O.height),_._context.setBackground(_,O.paper_bgcolor),I.drawMainTitle(_),n.manage(_),!O._has("cartesian"))return o.previousPromises(_);function N(Le,Be,Ve){var Ze=Le._lw/2;return Le._id.charAt(0)==="x"?Be?Ve==="top"?Be._offset-U-Ze:Be._offset+Be._length+U+Ze:R.t+R.h*(1-(Le.position||0))+Ze%1:Be?Ve==="right"?Be._offset+Be._length+U+Ze:Be._offset-U-Ze:R.l+R.w*(Le.position||0)+Ze%1}for(f=0;f<D.length;f++){var W=(E=D[f])._anchorAxis;E._linepositions={},E._lw=t.crispRound(_,E.linewidth,1),E._mainLinePosition=N(E,W,E.side),E._mainMirrorPosition=E.mirror&&W?N(E,W,a.OPPOSITE_SIDE[E.side]):null}var F=[],j=[],q=[],te=s.opacity(O.paper_bgcolor)===1&&s.opacity(O.plot_bgcolor)===1&&O.paper_bgcolor===O.plot_bgcolor;for(S in O._plots)if((w=O._plots[S]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var ee=w.xaxis.domain,Q=w.yaxis.domain,J=w.plotgroup;if(d(ee,Q,q)){var K=J.node(),Y=w.bg=T.ensureSingle(J,"rect","bg");K.insertBefore(Y.node(),K.childNodes[0]),j.push(S)}else J.select("rect.bg").remove(),q.push([ee,Q]),te||(F.push(S),j.push(S))}var ie,se,ae,ue,ve,ye,de,pe,ge,ke,Ee,me,oe,re=O._bgLayer.selectAll(".bg").data(F);for(re.enter().append("rect").classed("bg",!0),re.exit().remove(),re.each(function(Le){O._plots[Le].bg=A.select(this)}),f=0;f<j.length;f++)w=O._plots[j[f]],P=w.xaxis,C=w.yaxis,w.bg&&P._offset!==void 0&&C._offset!==void 0&&w.bg.call(t.setRect,P._offset-U,C._offset-U,P._length+2*U,C._length+2*U).call(s.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(S in O._plots){w=O._plots[S],P=w.xaxis,C=w.yaxis;var fe,Se,be=w.clipId="clip"+O._uid+S+"plot",we=T.ensureSingleById(O._clips,"clipPath",be,function(Le){Le.classed("plotclip",!0).append("rect")});w.clipRect=we.select("rect").attr({width:P._length,height:C._length}),t.setTranslate(w.plot,P._offset,C._offset),w._hasClipOnAxisFalse?(fe=null,Se=be):(fe=be,Se=null),t.setClipUrl(w.plot,fe,_),w.layerClipId=Se}function Me(Le){return"M"+ie+","+Le+"H"+se}function Ie(Le){return"M"+P._offset+","+Le+"h"+P._length}function Oe(Le){return"M"+Le+","+pe+"V"+de}function he(Le){return C._shift!==void 0&&(Le+=C._shift),"M"+Le+","+C._offset+"v"+C._length}function _e(Le,Be,Ve){if(!Le.showline||S!==Le._mainSubplot)return"";if(!Le._anchorAxis)return Ve(Le._mainLinePosition);var Ze=Be(Le._mainLinePosition);return Le.mirror&&(Ze+=Be(Le._mainMirrorPosition)),Ze}for(S in O._plots){w=O._plots[S],P=w.xaxis,C=w.yaxis;var Ae="M0,0";g(P,S)&&(ve=v(P,"left",C,D),ie=P._offset-(ve?U+ve:0),ye=v(P,"right",C,D),se=P._offset+P._length+(ye?U+ye:0),ae=N(P,C,"bottom"),ue=N(P,C,"top"),!(oe=!P._anchorAxis||S!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[S]=[ae,ue]),Ae=_e(P,Me,Ie),oe&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Ae+=Me(ae)+Me(ue)),w.xlines.style("stroke-width",P._lw+"px").call(s.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",Ae);var De="M0,0";g(C,S)&&(Ee=v(C,"bottom",P,D),de=C._offset+C._length+(Ee?U:0),me=v(C,"top",P,D),pe=C._offset-(me?U:0),ge=N(C,P,"left"),ke=N(C,P,"right"),!(oe=!C._anchorAxis||S!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[S]=[ge,ke]),De=_e(C,Oe,he),oe&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(De+=Oe(ge)+Oe(ke)),w.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",De)}return r.makeClipPaths(_),o.previousPromises(_)}function g(_,f){return(_.ticks||_.showline)&&(f===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function y(_,f,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var w=S._anchorAxis;if(!w)return!1;var E=a.FROM_BL[f];return S.side===f?w.domain[E]===_.domain[E]:S.mirror&&w.domain[1-E]===_.domain[1-E]}function v(_,f,S,w){if(y(_,f,S))return S._lw;for(var E=0;E<w.length;E++){var P=w[E];if(P._mainAxis===S._mainAxis&&y(_,f,P))return P._lw}return 0}I.layoutStyles=function(_){return T.syncOrAsync([o.doAutoMargin,m],_)},I.drawMainTitle=function(_){var f,S=_._fullLayout.title,w=_._fullLayout,E=function(F){var j=F.title,q="middle";return T.isRightAnchor(j)?q="end":T.isLeftAnchor(j)&&(q=x),q}(w),P=function(F){var j=F.title,q="0em";return T.isTopAnchor(j)?q=a.CAP_SHIFT+"em":T.isMiddleAnchor(j)&&(q=a.MID_SHIFT+"em"),q}(w),C=function(F,j){var q=F.title,te=F._size,ee=0;return j!=="0em"&&j?j===a.CAP_SHIFT+"em"&&(ee=q.pad.t):ee=-q.pad.b,q.y==="auto"?te.t/2:q.yref==="paper"?te.t+te.h-te.h*q.y+ee:F.height-F.height*q.y+ee}(w,P),O=function(F,j){var q=F.title,te=F._size,ee=0;return j===x?ee=q.pad.l:j==="end"&&(ee=-q.pad.r),q.xref==="paper"?te.l+te.w*q.x+ee:F.width*q.x+ee}(w,E);if(i.draw(_,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:O,y:C,"text-anchor":E,dy:P}}),S.text&&S.automargin){var R=A.selectAll(".gtitle"),U=t.bBox(R.node()).height,D=function(F,j,q){var te=j.y,ee=j.yanchor,Q=te>.5?"t":"b",J=F._fullLayout.margin[Q],K=0;return j.yref==="paper"?K=q+j.pad.t+j.pad.b:j.yref==="container"&&(K=function(Y,ie,se,ae,ue){var ve=0;return se==="middle"&&(ve+=ue/2),Y==="t"?(se==="top"&&(ve+=ue),ve+=ae-ie*ae):(se==="bottom"&&(ve+=ue),ve+=ie*ae),ve}(Q,te,ee,F._fullLayout.height,q)+j.pad.t+j.pad.b),K>J?K:0}(_,S,U);if(D>0){(function(F,j,q,te){var ee="title.automargin",Q=F._fullLayout.title,J=Q.y>.5?"t":"b",K={x:Q.x,y:Q.y,t:0,b:0},Y={};Q.yref==="paper"&&function(ie,se,ae,ue,ve){var ye=se.yref==="paper"?ie._fullLayout._size.h:ie._fullLayout.height,de=T.isTopAnchor(se)?ue:ue-ve,pe=ae==="b"?ye-de:de;return!(T.isTopAnchor(se)&&ae==="t"||T.isBottomAnchor(se)&&ae==="b")&&pe<ve}(F,Q,J,j,te)?K[J]=q:Q.yref==="container"&&(Y[J]=q,F._fullLayout._reservedMargin[ee]=Y),o.allowAutoMargin(F,ee),o.autoMargin(F,ee,K)})(_,C,D,U),R.attr({x:O,y:C,"text-anchor":E,dy:(f=S.yanchor,f==="top"?a.CAP_SHIFT+.3+"em":f==="bottom"?"-0.3em":a.MID_SHIFT+"em")}).call(b.positionText,O,C);var N=(S.text.match(b.BR_TAG_ALL)||[]).length;if(N){var W=a.LINE_SPACING*N+a.MID_SHIFT;S.y===0&&(W=-W),R.selectAll(".line").each(function(){var F=+this.getAttribute("dy").slice(0,-2)-W+"em";this.setAttribute("dy",F)})}}}},I.doTraceStyle=function(_){var f,S=_.calcdata,w=[];for(f=0;f<S.length;f++){var E=S[f],P=E[0]||{},C=P.trace||{},O=C._module||{},R=O.arraysToCalcdata;R&&R(E,C);var U=O.editStyle;U&&w.push({fn:U,cd0:P})}if(w.length){for(f=0;f<w.length;f++){var D=w[f];D.fn(_,D.cd0)}p(_),I.redrawReglTraces(_)}return o.style(_),k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},I.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),o.previousPromises(_)},I.layoutReplot=function(_){var f=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",f)},I.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},I.doTicksRelayout=function(_){return r.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),p(_),I.redrawReglTraces(_)),I.drawMainTitle(_),o.previousPromises(_)},I.doModeBar=function(_){var f=_._fullLayout;n.manage(_);for(var S=0;S<f._basePlotModules.length;S++){var w=f._basePlotModules[S].updateFx;w&&w(_)}return o.previousPromises(_)},I.doCamera=function(_){for(var f=_._fullLayout,S=f._subplots.gl3d,w=0;w<S.length;w++){var E=f[S[w]];E._scene.setViewport(E)}},I.drawData=function(_){var f=_._fullLayout;p(_);for(var S=f._basePlotModules,w=0;w<S.length;w++)S[w].plot(_);return I.redrawReglTraces(_),o.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),f._replotting=!1,o.previousPromises(_)},I.redrawReglTraces=function(_){var f=_._fullLayout;if(f._has("regl")){var S,w,E=_._fullData,P=[],C=[];for(f._hasOnlyLargeSploms&&f._splomGrid.draw(),S=0;S<E.length;S++){var O=E[S];O.visible===!0&&O._length!==0&&(O.type==="splom"?f._splomScenes[O.uid].draw():O.type==="scattergl"?T.pushUnique(P,O.xaxis+O.yaxis):O.type==="scatterpolargl"&&T.pushUnique(C,O.subplot))}for(S=0;S<P.length;S++)(w=f._plots[P[S]])._scene&&w._scene.draw();for(S=0;S<C.length;S++)(w=f[C[S]]._subplot)._scene&&w._scene.draw()}},I.doAutoRangeAndConstraints=function(_){for(var f,S=r.list(_,"",!0),w={},E=0;E<S.length;E++)if(!w[(f=S[E])._id]){w[f._id]=1,h(_,f),u(_,f);var P=f._matchGroup;if(P)for(var C in P){var O=r.getFromId(_,C);u(_,O,f.range),w[C]=1}}c(_)},I.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},I.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},94828:function(X,I,e){"use strict";var A=e(3400),k=A.isPlainObject,o=e(73060),T=e(7316),b=e(45464),p=e(31780),s=e(20556).dfltConfig;function t(u,x){u=A.extendDeep({},u);var d,m,g=Object.keys(u).sort();function y(w,E,P){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var C=p.arrayTemplater({_template:u},P);for(m=0;m<E.length;m++){var O=E[m],R=C.newItem(O)._template;R&&t(R,O)}var U=C.defaultItems();for(m=0;m<U.length;m++)E.push(U[m]._template);for(m=0;m<E.length;m++)delete E[m].templateitemname}}for(d=0;d<g.length;d++){var v=g[d],_=u[v];if(v in x?y(_,x[v],v):x[v]=_,i(v)===v)for(var f in x){var S=i(f);f===S||S!==v||f in u||y(_,x[f],v)}}}function i(u){return u.replace(/[0-9]+$/,"")}function n(u,x,d,m,g){var y=g&&d(g);for(var v in u){var _=u[v],f=l(u,v,m),S=l(u,v,g),w=d(S);if(!w){var E=i(v);E!==v&&(w=d(S=l(u,E,g)))}if(!(y&&y===w||!w||w._noTemplating||w.valType==="data_array"||w.arrayOk&&Array.isArray(_)))if(!w.valType&&k(_))n(_,x,d,f,S);else if(w._isLinkedToArray&&Array.isArray(_))for(var P=!1,C=0,O={},R=0;R<_.length;R++){var U=_[R];if(k(U)){var D=U.name;if(D)O[D]||(n(U,x,d,l(_,C,f),l(_,C,S)),C++,O[D]=1);else if(!P){var N=l(u,p.arrayDefaultKey(v),m),W=l(_,C,f);n(U,x,d,W,l(_,C,S));var F=A.nestedProperty(x,W);A.nestedProperty(x,N).set(F.get()),F.set(null),P=!0}}}else A.nestedProperty(x,f).set(_)}}function r(u,x){return o.getLayoutValObject(u,A.nestedProperty({},x).parts)}function a(u,x){return o.getTraceValObject(u,A.nestedProperty({},x).parts)}function l(u,x,d){return d?Array.isArray(u)?d+"["+x+"]":d+"."+x:x}function c(u){for(var x=0;x<u.length;x++)if(k(u[x]))return!0}function h(u){var x;switch(u.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=u.path?"There are no templates for item "+u.path+" with name "+u.templateitemname:"There are no templates for trace "+u.index+", of type "+u.traceType+".";break;case"unused":x=u.path?"The template item at "+u.path+" was not used in constructing the plot.":u.dataCount?"Some of the templates of type "+u.traceType+" were not used. The template has "+u.templateCount+" traces, the data only has "+u.dataCount+" of this type.":"The template has "+u.templateCount+" traces of type "+u.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+u.traceType+" were used more than once. The template has "+u.templateCount+" traces, the data has "+u.dataCount+" of this type."}return u.msg=x,u}I.makeTemplate=function(u){u=A.isPlainObject(u)?u:A.getGraphDiv(u),u=A.extendDeep({_context:s},{data:u.data,layout:u.layout}),T.supplyDefaults(u);var x=u.data||[],d=u.layout||{};d._basePlotModules=u._fullLayout._basePlotModules,d._modules=u._fullLayout._modules;var m={data:{},layout:{}};x.forEach(function(C){var O={};n(C,O,a.bind(null,C));var R=A.coerce(C,{},b,"type"),U=m.data[R];U||(U=m.data[R]=[]),U.push(O)}),n(d,m.layout,r.bind(null,d)),delete m.layout.template;var g=d.template;if(k(g)){var y,v,_,f,S,w,E=g.layout;k(E)&&t(E,m.layout);var P=g.data;if(k(P)){for(v in m.data)if(_=P[v],Array.isArray(_)){for(w=(S=m.data[v]).length,f=_.length,y=0;y<w;y++)t(_[y%f],S[y]);for(y=w;y<f;y++)S.push(A.extendDeep({},_[y]))}for(v in P)v in m.data||(m.data[v]=A.extendDeep([],P[v]))}}return m},I.validateTemplate=function(u,x){var d=A.extendDeep({},{_context:s,data:u.data,layout:u.layout}),m=d.layout||{};k(x)||(x=m.template||{});var g=x.layout,y=x.data,v=[];d.layout=m,d.layout.template=x,T.supplyDefaults(d);var _=d._fullLayout,f=d._fullData,S={};if(k(g)?(function U(D,N){for(var W in D)if(W.charAt(0)!=="_"&&k(D[W])){var F,j=i(W),q=[];for(F=0;F<N.length;F++)q.push(l(D,W,N[F])),j!==W&&q.push(l(D,j,N[F]));for(F=0;F<q.length;F++)S[q[F]]=1;U(D[W],q)}}(_,["layout"]),function U(D,N){for(var W in D)if(W.indexOf("defaults")===-1&&k(D[W])){var F=l(D,W,N);S[F]?U(D[W],F):v.push({code:"unused",path:F})}}(g,"layout")):v.push({code:"layout"}),k(y)){for(var w,E={},P=0;P<f.length;P++){var C=f[P];E[w=C.type]=(E[w]||0)+1,C._fullInput._template||v.push({code:"missing",index:C._fullInput.index,traceType:w})}for(w in y){var O=y[w].length,R=E[w]||0;O>R?v.push({code:"unused",traceType:w,templateCount:O,dataCount:R}):R>O&&v.push({code:"reused",traceType:w,templateCount:O,dataCount:R})}}else v.push({code:"data"});if(function U(D,N){for(var W in D)if(W.charAt(0)!=="_"){var F=D[W],j=l(D,W,N);k(F)?(Array.isArray(D)&&F._template===!1&&F.templateitemname&&v.push({code:"missing",path:j,templateitemname:F.templateitemname}),U(F,j)):Array.isArray(F)&&c(F)&&U(F,j)}}({data:f,layout:_},""),v.length)return v.map(h)}},67024:function(X,I,e){"use strict";var A=e(38248),k=e(36424),o=e(7316),T=e(3400),b=e(81792),p=e(37164),s=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};X.exports=function(n,r){var a,l,c,h;function u(R){return!(R in r)||T.validate(r[R],i[R])}if(r=r||{},T.isPlainObject(n)?(a=n.data||[],l=n.layout||{},c=n.config||{},h={}):(n=T.getGraphDiv(n),a=T.extendDeep([],n.data),l=T.extendDeep({},n.layout),c=n._context,h=n._fullLayout||{}),!u("width")&&r.width!==null||!u("height")&&r.height!==null)throw new Error("Height and width should be pixel values.");if(!u("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var x={};function d(R,U){return T.coerce(r,x,i,R,U)}var m=d("format"),g=d("width"),y=d("height"),v=d("scale"),_=d("setBackground"),f=d("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var w=T.extendFlat({},l);g?w.width=g:r.width===null&&A(h.width)&&(w.width=h.width),y?w.height=y:r.height===null&&A(h.height)&&(w.height=h.height);var E=T.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=b.getRedrawFunc(S);function C(){return new Promise(function(R){setTimeout(R,b.getDelay(S._fullLayout))})}function O(){return new Promise(function(R,U){var D=p(S,m,v),N=S._fullLayout.width,W=S._fullLayout.height;function F(){k.purge(S),document.body.removeChild(S)}if(m==="full-json"){var j=o.graphJson(S,!1,"keepdata","object",!0,!0);return j.version=t,j=JSON.stringify(j),F(),R(f?j:b.encodeJSON(j))}if(F(),m==="svg")return R(f?D:b.encodeSVG(D));var q=document.createElement("canvas");q.id=T.randstr(),s({format:m,width:N,height:W,scale:v,canvas:q,svg:D,promise:!0}).then(R).catch(U)})}return new Promise(function(R,U){k.newPlot(S,a,w,E).then(P).then(C).then(O).then(function(D){R(function(N){return f?N.replace(b.IMAGE_URL_PREFIX,""):N}(D))}).catch(function(D){U(D)})})}},21480:function(X,I,e){"use strict";var A=e(3400),k=e(7316),o=e(73060),T=e(20556).dfltConfig,b=A.isPlainObject,p=Array.isArray,s=A.isArrayOrTypedArray;function t(u,x,d,m,g,y){y=y||[];for(var v=Object.keys(u),_=0;_<v.length;_++){var f=v[_];if(f!=="transforms"){var S=y.slice();S.push(f);var w=u[f],E=x[f],P=l(d,f),C=(P||{}).valType,O=C==="info_array",R=C==="colorscale",U=(P||{}).items;if(a(d,f))if(b(w)&&b(E)&&C!=="any")t(w,E,P,m,g,S);else if(O&&p(w)){w.length>E.length&&m.push(r("unused",g,S.concat(E.length)));var D,N,W,F,j,q=E.length,te=Array.isArray(U);if(te&&(q=Math.min(q,U.length)),P.dimensions===2)for(N=0;N<q;N++)if(p(w[N])){w[N].length>E[N].length&&m.push(r("unused",g,S.concat(N,E[N].length)));var ee=E[N].length;for(D=0;D<(te?Math.min(ee,U[N].length):ee);D++)W=te?U[N][D]:U,F=w[N][D],j=E[N][D],A.validate(F,W)?j!==F&&j!==+F&&m.push(r("dynamic",g,S.concat(N,D),F,j)):m.push(r("value",g,S.concat(N,D),F))}else m.push(r("array",g,S.concat(N),w[N]));else for(N=0;N<q;N++)W=te?U[N]:U,F=w[N],j=E[N],A.validate(F,W)?j!==F&&j!==+F&&m.push(r("dynamic",g,S.concat(N),F,j)):m.push(r("value",g,S.concat(N),F))}else if(P.items&&!O&&p(w)){var Q,J,K=U[Object.keys(U)[0]],Y=[];for(Q=0;Q<E.length;Q++){var ie=E[Q]._index||Q;if((J=S.slice()).push(ie),b(w[ie])&&b(E[Q])){Y.push(ie);var se=w[ie],ae=E[Q];b(se)&&se.visible!==!1&&ae.visible===!1?m.push(r("invisible",g,J)):t(se,ae,K,m,g,J)}}for(Q=0;Q<w.length;Q++)(J=S.slice()).push(Q),b(w[Q])?Y.indexOf(Q)===-1&&m.push(r("unused",g,J)):m.push(r("object",g,J,w[Q]))}else!b(w)&&b(E)?m.push(r("object",g,S,w)):s(w)||!s(E)||O||R?f in x?A.validate(w,P)?P.valType==="enumerated"&&(P.coerceNumber&&w!==+E||w!==E)&&m.push(r("dynamic",g,S,w,E)):m.push(r("value",g,S,w)):m.push(r("unused",g,S,w)):m.push(r("array",g,S,w));else m.push(r("schema",g,S))}}return m}X.exports=function(u,x){u===void 0&&(u=[]),x===void 0&&(x={});var d,m,g=o.get(),y=[],v={_context:A.extendFlat({},T)};p(u)?(v.data=A.extendDeep([],u),d=u):(v.data=[],d=[],y.push(r("array","data"))),b(x)?(v.layout=A.extendDeep({},x),m=x):(v.layout={},m={},arguments.length>1&&y.push(r("object","layout"))),k.supplyDefaults(v);for(var _=v._fullData,f=d.length,S=0;S<f;S++){var w=d[S],E=["data",S];if(b(w)){var P=_[S],C=P.type,O=g.traces[C].attributes;O.type={valType:"enumerated",values:[C]},P.visible===!1&&w.visible!==!1&&y.push(r("invisible",E)),t(w,P,O,y,E);var R=w.transforms,U=P.transforms;if(R){p(R)||y.push(r("array",E,["transforms"])),E.push("transforms");for(var D=0;D<R.length;D++){var N=["transforms",D],W=R[D].type;if(b(R[D])){var F=g.transforms[W]?g.transforms[W].attributes:{};F.type={valType:"enumerated",values:Object.keys(g.transforms)},t(R[D],U[D],F,y,E,N)}else y.push(r("object",E,N))}}}else y.push(r("object",E))}var j=v._fullLayout,q=function(te,ee){for(var Q=te.layout.layoutAttributes,J=0;J<ee.length;J++){var K=ee[J],Y=te.traces[K.type],ie=Y.layoutAttributes;ie&&(K.subplot?A.extendFlat(Q[Y.attributes.subplot.dflt],ie):A.extendFlat(Q,ie))}return Q}(g,_);return t(m,j,q,y,"layout"),y.length===0?void 0:y};var i={object:function(u,x){return(u==="layout"&&x===""?"The layout argument":u[0]==="data"&&x===""?"Trace "+u[1]+" in the data argument":n(u)+"key "+x)+" must be linked to an object container"},array:function(u,x){return(u==="data"?"The data argument":n(u)+"key "+x)+" must be linked to an array container"},schema:function(u,x){return n(u)+"key "+x+" is not part of the schema"},unused:function(u,x,d){var m=b(d)?"container":"key";return n(u)+m+" "+x+" did not get coerced"},dynamic:function(u,x,d,m){return[n(u)+"key",x,"(set to '"+d+"')","got reset to","'"+m+"'","during defaults."].join(" ")},invisible:function(u,x){return(x?n(u)+"item "+x:"Trace "+u[1])+" got defaulted to be not visible"},value:function(u,x,d){return[n(u)+"key "+x,"is set to an invalid value ("+d+")"].join(" ")}};function n(u){return p(u)?"In data trace "+u[1]+", ":"In "+u+", "}function r(u,x,d,m,g){var y,v;d=d||"",p(x)?(y=x[0],v=x[1]):(y=x,v=null);var _=function(S){if(!p(S))return String(S);for(var w="",E=0;E<S.length;E++){var P=S[E];typeof P=="number"?w=w.substr(0,w.length-1)+"["+P+"]":w+=P,E<S.length-1&&(w+=".")}return w}(d),f=i[u](x,_,m,g);return A.log(f),{code:u,container:y,trace:v,path:d,astr:_,msg:f}}function a(u,x){var d=h(x),m=d.keyMinusId,g=d.id;return!!(m in u&&u[m]._isSubplotObj&&g)||x in u}function l(u,x){return x in u?u[x]:u[h(x).keyMinusId]}var c=A.counterRegex("([a-z]+)");function h(u){var x=u.match(c);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85656:function(X){"use strict";X.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(X,I,e){"use strict";var A=e(3400),k=e(31780);X.exports=function(o,T,b){var p,s,t=b.name,i=b.inclusionAttr||"visible",n=T[t],r=A.isArrayOrTypedArray(o[t])?o[t]:[],a=T[t]=[],l=k.arrayTemplater(T,t,i);for(p=0;p<r.length;p++){var c=r[p];A.isPlainObject(c)?s=l.newItem(c):(s=l.newItem({}))[i]=!1,s._index=p,s[i]!==!1&&b.handleItemDefaults(c,s,T,b),a.push(s)}var h=l.defaultItems();for(p=0;p<h.length;p++)(s=h[p])._index=a.length,b.handleItemDefaults({},s,T,b,{}),a.push(s);if(A.isArrayOrTypedArray(n)){var u=Math.min(n.length,a.length);for(p=0;p<u;p++)A.relinkPrivateKeys(a[p],n[p])}return a}},45464:function(X,I,e){"use strict";var A=e(25376),k=e(55756);X.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:A({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=k.dateTime2ms,T=k.incrementMonth,b=e(39032).ONEAVGMONTH;X.exports=function(p,s,t,i){if(s.type!=="date")return{vals:i};var n=p[t+"periodalignment"];if(!n)return{vals:i};var r,a=p[t+"period"];if(A(a)){if((a=+a)<=0)return{vals:i}}else if(typeof a=="string"&&a.charAt(0)==="M"){var l=+a.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:i};r=l}for(var c=s.calendar,h=n==="start",u=n==="end",x=p[t+"period0"],d=o(x,c)||0,m=[],g=[],y=[],v=i.length,_=0;_<v;_++){var f,S,w,E=i[_];if(r){for(f=Math.round((E-d)/(r*b)),w=T(d,r*f,c);w>E;)w=T(w,-r,c);for(;w<=E;)w=T(w,r,c);S=T(w,-r,c)}else{for(w=d+(f=Math.round((E-d)/a))*a;w>E;)w-=a;for(;w<=E;)w+=a;S=w-a}m[_]=h?S:u?w:(S+w)/2,g[_]=S,y[_]=w}return{vals:m,starts:g,ends:y}}},26720:function(X){"use strict";X.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(3400),T=e(39032).FP_SAFE,b=e(24040),p=e(43616),s=e(79811),t=s.getFromId,i=s.isLinked;function n(_,f){var S,w,E=[],P=_._fullLayout,C=a(P,f,0),O=a(P,f,1),R=c(_,f),U=R.min,D=R.max;if(U.length===0||D.length===0)return o.simpleMap(f.range,f.r2l);var N=U[0].val,W=D[0].val;for(S=1;S<U.length&&N===W;S++)N=Math.min(N,U[S].val);for(S=1;S<D.length&&N===W;S++)W=Math.max(W,D[S].val);var F=f.autorange,j=F==="reversed"||F==="min reversed"||F==="max reversed";if(!j&&f.range){var q=o.simpleMap(f.range,f.r2l);j=q[1]<q[0]}f.autorange==="reversed"&&(f.autorange=!0);var te,ee,Q,J,K,Y,ie=f.rangemode,se=ie==="tozero",ae=ie==="nonnegative",ue=f._length,ve=ue/10,ye=0;for(S=0;S<U.length;S++)for(te=U[S],w=0;w<D.length;w++)(Y=(ee=D[w]).val-te.val-r(f,te.val,ee.val))>0&&((K=ue-C(te)-O(ee))>ve?Y/K>ye&&(Q=te,J=ee,ye=Y/K):Y/ue>ye&&(Q={val:te.val,nopad:1},J={val:ee.val,nopad:1},ye=Y/ue));if(N===W){var de=N-1,pe=N+1;if(se)if(N===0)E=[0,1];else{var ge=(N>0?D:U).reduce(function(Ee,me){return Math.max(Ee,O(me))},0),ke=N/(1-Math.min(.5,ge/ue));E=N>0?[0,ke]:[ke,0]}else E=ae?[Math.max(0,de),Math.max(1,pe)]:[de,pe]}else se?(Q.val>=0&&(Q={val:0,nopad:1}),J.val<=0&&(J={val:0,nopad:1})):ae&&(Q.val-ye*C(Q)<0&&(Q={val:0,nopad:1}),J.val<=0&&(J={val:1,nopad:1})),ye=(J.val-Q.val-r(f,te.val,ee.val))/(ue-C(Q)-O(J)),E=[Q.val-ye*C(Q),J.val+ye*O(J)];return E=v(E,f),f.limitRange&&f.limitRange(),j&&E.reverse(),o.simpleMap(E,f.l2r||Number)}function r(_,f,S){var w=0;if(_.rangebreaks)for(var E=_.locateBreaks(f,S),P=0;P<E.length;P++){var C=E[P];w+=C.max-C.min}return w}function a(_,f,S){var w=.05*f._length,E=f._anchorAxis||{};if((f.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var P=f.isReversed();if(!P){var C=o.simpleMap(f.range,f.r2l);P=C[1]<C[0]}P&&(S=!S)}var O=0;return i(_,f._id)||(O=function(R,U,D){var N=0,W=U._id.charAt(0)==="x";for(var F in R._plots){var j=R._plots[F];if(U._id===j.xaxis._id||U._id===j.yaxis._id){var q=(W?j.yaxis:j.xaxis)||{};if((q.ticklabelposition||"").indexOf("inside")!==-1&&(!D&&(q.side==="left"||q.side==="bottom")||D&&(q.side==="top"||q.side==="right"))){if(q._vals){var te=o.deg2rad(q._tickAngles[q._id+"tick"]||0),ee=Math.abs(Math.cos(te)),Q=Math.abs(Math.sin(te));if(!q._vals[0].bb){var J=q._id+"tick";q._selections[J].each(function(ae){var ue=A.select(this);ue.select(".text-math-group").empty()&&(ae.bb=p.bBox(ue.node()))})}for(var K=0;K<q._vals.length;K++){var Y=q._vals[K].bb;if(Y){var ie=2*l+Y.width,se=2*l+Y.height;N=Math.max(N,W?Math.max(ie*ee,se*Q):Math.max(se*ee,ie*Q))}}}q.ticks==="inside"&&q.ticklabelposition==="inside"&&(N+=q.ticklen||0)}}}return N}(_,f,S)),w=Math.max(O,w),f.constrain==="domain"&&f._inputDomain&&(w*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?w:O)}}X.exports={applyAutorangeOptions:v,getAutoRange:n,makePadFn:a,doAutoRange:function(_,f,S){if(f.setScale(),f.autorange){f.range=S?S.slice():n(_,f),f._r=f.range.slice(),f._rl=o.simpleMap(f._r,f.r2l);var w=f._input,E={};E[f._attr+".range"]=f.range,E[f._attr+".autorange"]=f.autorange,b.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),w.range=f.range.slice(),w.autorange=f.autorange}var P=f._anchorAxis;if(P&&P.rangeslider){var C=P.rangeslider[f._name];C&&C.rangemode==="auto"&&(C.range=n(_,f)),P._input.rangeslider[f._name]=o.extendFlat({},C)}},findExtremes:function(_,f,S){S||(S={}),_._m||_.setScale();var w,E,P,C,O,R,U,D,N,W=[],F=[],j=f.length,q=S.padded||!1,te=S.tozero&&(_.type==="linear"||_.type==="-"),ee=_.type==="log",Q=!1,J=S.vpadLinearized||!1;function K(de){if(Array.isArray(de))return Q=!0,function(ge){return Math.max(Number(de[ge]||0),0)};var pe=Math.max(Number(de||0),0);return function(){return pe}}var Y=K((_._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),ie=K((_._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),se=K(S.vpadplus||S.vpad),ae=K(S.vpadminus||S.vpad);if(!Q){if(D=1/0,N=-1/0,ee)for(w=0;w<j;w++)(E=f[w])<D&&E>0&&(D=E),E>N&&E<T&&(N=E);else for(w=0;w<j;w++)(E=f[w])<D&&E>-T&&(D=E),E>N&&E<T&&(N=E);f=[D,N],j=2}var ue={tozero:te,extrapad:q};function ve(de){P=f[de],k(P)&&(R=Y(de),U=ie(de),J?(C=_.c2l(P)-ae(de),O=_.c2l(P)+se(de)):(D=P-ae(de),N=P+se(de),ee&&D<N/10&&(D=N/10),C=_.c2l(D),O=_.c2l(N)),te&&(C=Math.min(0,C),O=Math.max(0,O)),d(C)&&h(W,C,U,ue),d(O)&&u(F,O,R,ue))}var ye=Math.min(6,j);for(w=0;w<ye;w++)ve(w);for(w=j-1;w>=ye;w--)ve(w);return{min:W,max:F,opts:S}},concatExtremes:c};var l=3;function c(_,f,S){var w,E,P,C=f._id,O=_._fullData,R=_._fullLayout,U=[],D=[];function N(te,ee){for(w=0;w<ee.length;w++){var Q=te[ee[w]],J=(Q._extremes||{})[C];if(Q.visible===!0&&J){for(E=0;E<J.min.length;E++)P=J.min[E],h(U,P.val,P.pad,{extrapad:P.extrapad});for(E=0;E<J.max.length;E++)P=J.max[E],u(D,P.val,P.pad,{extrapad:P.extrapad})}}}if(N(O,f._traceIndices),N(R.annotations||[],f._annIndices||[]),N(R.shapes||[],f._shapeIndices||[]),f._matchGroup&&!S){for(var W in f._matchGroup)if(W!==f._id){var F=t(_,W),j=c(_,F,!0),q=f._length/F._length;for(E=0;E<j.min.length;E++)P=j.min[E],h(U,P.val,P.pad*q,{extrapad:P.extrapad});for(E=0;E<j.max.length;E++)P=j.max[E],u(D,P.val,P.pad*q,{extrapad:P.extrapad})}}return{min:U,max:D}}function h(_,f,S,w){x(_,f,S,w,m)}function u(_,f,S,w){x(_,f,S,w,g)}function x(_,f,S,w,E){for(var P=w.tozero,C=w.extrapad,O=!0,R=0;R<_.length&&O;R++){var U=_[R];if(E(U.val,f)&&U.pad>=S&&(U.extrapad||!C)){O=!1;break}E(f,U.val)&&U.pad<=S&&(C||!U.extrapad)&&(_.splice(R,1),R--)}if(O){var D=P&&f===0;_.push({val:f,pad:D?0:S,extrapad:!D&&C})}}function d(_){return k(_)&&Math.abs(_)<T}function m(_,f){return _<=f}function g(_,f){return _>=f}function y(_,f,S){return f===void 0||S===void 0||(f=_.d2l(f))<_.d2l(S)}function v(_,f){if(!f||!f.autorangeoptions)return _;var S=_[0],w=_[1],E=f.autorangeoptions.include;if(E!==void 0){var P=f.d2l(S),C=f.d2l(w);o.isArrayOrTypedArray(E)||(E=[E]);for(var O=0;O<E.length;O++){var R=f.d2l(E[O]);P>=R&&(P=R,S=R),C<=R&&(C=R,w=R)}}return S=function(U,D){var N=D.autorangeoptions;return N&&N.minallowed!==void 0&&y(D,N.minallowed,N.maxallowed)?N.minallowed:N&&N.clipmin!==void 0&&y(D,N.clipmin,N.clipmax)?Math.max(U,D.d2l(N.clipmin)):U}(S,f),w=function(U,D){var N=D.autorangeoptions;return N&&N.maxallowed!==void 0&&y(D,N.minallowed,N.maxallowed)?N.maxallowed:N&&N.clipmax!==void 0&&y(D,N.clipmin,N.clipmax)?Math.min(U,D.d2l(N.clipmax)):U}(w,f),[S,w]}},76808:function(X){"use strict";X.exports=function(I,e,A){var k,o;if(A){var T=e==="reversed"||e==="min reversed"||e==="max reversed";k=A[T?1:0],o=A[T?0:1]}var b=I("autorangeoptions.minallowed",o===null?k:void 0),p=I("autorangeoptions.maxallowed",k===null?o:void 0);b===void 0&&I("autorangeoptions.clipmin"),p===void 0&&I("autorangeoptions.clipmax"),I("autorangeoptions.include")}},54460:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),p=b.strTranslate,s=e(72736),t=e(81668),i=e(76308),n=e(43616),r=e(94724),a=e(98728),l=e(39032),c=l.ONEMAXYEAR,h=l.ONEAVGYEAR,u=l.ONEMINYEAR,x=l.ONEMAXQUARTER,d=l.ONEAVGQUARTER,m=l.ONEMINQUARTER,g=l.ONEMAXMONTH,y=l.ONEAVGMONTH,v=l.ONEMINMONTH,_=l.ONEWEEK,f=l.ONEDAY,S=f/2,w=l.ONEHOUR,E=l.ONEMIN,P=l.ONESEC,C=l.MINUS_SIGN,O=l.BADNUM,R={K:"zeroline"},U={K:"gridline",L:"path"},D={K:"minor-gridline",L:"path"},N={K:"tick",L:"path"},W={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},j=e(84284),q=j.MID_SHIFT,te=j.CAP_SHIFT,ee=j.LINE_SPACING,Q=j.OPPOSITE_SIDE,J=X.exports={};J.setConvert=e(78344);var K=e(52976),Y=e(79811),ie=Y.idSort,se=Y.isLinked;J.id2name=Y.id2name,J.name2id=Y.name2id,J.cleanId=Y.cleanId,J.list=Y.list,J.listIds=Y.listIds,J.getFromId=Y.getFromId,J.getFromTrace=Y.getFromTrace;var ae=e(19280);J.getAutoRange=ae.getAutoRange,J.findExtremes=ae.findExtremes;var ue=1e-4;function ve(Re){var Fe=(Re[1]-Re[0])*ue;return[Re[0]-Fe,Re[1]+Fe]}J.coerceRef=function(Re,Fe,nt,Ge,ut,pt){var gt=Ge.charAt(Ge.length-1),ct=nt._fullLayout._subplots[gt+"axis"],Tt=Ge+"ref",vt={};return ut||(ut=ct[0]||(typeof pt=="string"?pt:pt[0])),pt||(pt=ut),ct=ct.concat(ct.map(function(kt){return kt+" domain"})),vt[Tt]={valType:"enumerated",values:ct.concat(pt?typeof pt=="string"?[pt]:pt:[]),dflt:ut},b.coerce(Re,Fe,vt,Tt)},J.getRefType=function(Re){return Re===void 0?Re:Re==="paper"?"paper":Re==="pixel"?"pixel":/( domain)$/.test(Re)?"domain":"range"},J.coercePosition=function(Re,Fe,nt,Ge,ut,pt){var gt,ct;if(J.getRefType(Ge)!=="range")gt=b.ensureNumber,ct=nt(ut,pt);else{var Tt=J.getFromId(Fe,Ge);ct=nt(ut,pt=Tt.fraction2r(pt)),gt=Tt.cleanPos}Re[ut]=gt(ct)},J.cleanPosition=function(Re,Fe,nt){return(nt==="paper"||nt==="pixel"?b.ensureNumber:J.getFromId(Fe,nt).cleanPos)(Re)},J.redrawComponents=function(Re,Fe){Fe=Fe||J.listIds(Re);var nt=Re._fullLayout;function Ge(ut,pt,gt,ct){for(var Tt=T.getComponentMethod(ut,pt),vt={},kt=0;kt<Fe.length;kt++)for(var Lt=nt[J.id2name(Fe[kt])][gt],Ct=0;Ct<Lt.length;Ct++){var Dt=Lt[Ct];if(!vt[Dt]&&(Tt(Re,Dt),vt[Dt]=1,ct))return}}Ge("annotations","drawOne","_annIndices"),Ge("shapes","drawOne","_shapeIndices"),Ge("images","draw","_imgIndices",!0),Ge("selections","drawOne","_selectionIndices")};var ye=J.getDataConversions=function(Re,Fe,nt,Ge){var ut,pt=nt==="x"||nt==="y"||nt==="z"?nt:Ge;if(b.isArrayOrTypedArray(pt)){if(ut={type:K(Ge,void 0,{autotypenumbers:Re._fullLayout.autotypenumbers}),_categories:[]},J.setConvert(ut),ut.type==="category")for(var gt=0;gt<Ge.length;gt++)ut.d2c(Ge[gt])}else ut=J.getFromTrace(Re,Fe,pt);return ut?{d2c:ut.d2c,c2d:ut.c2d}:pt==="ids"?{d2c:pe,c2d:pe}:{d2c:de,c2d:de}};function de(Re){return+Re}function pe(Re){return String(Re)}function ge(Re,Fe){return Math.abs((Re/Fe+.5)%1-.5)<.001}function ke(Re,Fe){return Math.abs(Re/Fe-1)<.001}function Ee(Re){return+Re.substring(1)}function me(Re,Fe){return Re.rangebreaks&&(Fe=Fe.filter(function(nt){return Re.maskBreaks(nt.x)!==O})),Fe}function oe(Re){var Fe=Re._mainAxis,nt=[];if(Fe._vals){for(var Ge=0;Ge<Fe._vals.length;Ge++)if(!Fe._vals[Ge].noTick){var ut=Fe.l2p(Fe._vals[Ge].x),pt=Re.p2l(ut),gt=J.tickText(Re,pt);Fe._vals[Ge].minor&&(gt.minor=!0,gt.text=""),nt.push(gt)}}return me(Re,nt)}function re(Re,Fe){var nt=ve(b.simpleMap(Re.range,Re.r2l)),Ge=Math.min(nt[0],nt[1]),ut=Math.max(nt[0],nt[1]),pt=Re.type==="category"?Re.d2l_noadd:Re.d2l;Re.type==="log"&&String(Re.dtick).charAt(0)!=="L"&&(Re.dtick="L"+Math.pow(10,Math.floor(Math.min(Re.range[0],Re.range[1]))-1));for(var gt=[],ct=0;ct<=1;ct++)if((Fe===void 0||!(Fe&&ct||Fe===!1&&!ct))&&(!ct||Re.minor)){var Tt=ct?Re.minor.tickvals:Re.tickvals,vt=ct?[]:Re.ticktext;if(Tt){b.isArrayOrTypedArray(vt)||(vt=[]);for(var kt=0;kt<Tt.length;kt++){var Lt=pt(Tt[kt]);if(Lt>Ge&&Lt<ut){var Ct=J.tickText(Re,Lt,!1,String(vt[kt]));ct&&(Ct.minor=!0,Ct.text=""),gt.push(Ct)}}}}return me(Re,gt)}J.getDataToCoordFunc=function(Re,Fe,nt,Ge){return ye(Re,Fe,nt,Ge).d2c},J.counterLetter=function(Re){var Fe=Re.charAt(0);return Fe==="x"?"y":Fe==="y"?"x":void 0},J.minDtick=function(Re,Fe,nt,Ge){["log","category","multicategory"].indexOf(Re.type)===-1&&Ge?Re._minDtick===void 0?(Re._minDtick=Fe,Re._forceTick0=nt):Re._minDtick&&((Re._minDtick/Fe+1e-6)%1<2e-6&&((nt-Re._forceTick0)/Fe%1+1.000001)%1<2e-6?(Re._minDtick=Fe,Re._forceTick0=nt):((Fe/Re._minDtick+1e-6)%1>2e-6||((nt-Re._forceTick0)/Re._minDtick%1+1.000001)%1>2e-6)&&(Re._minDtick=0)):Re._minDtick=0},J.saveRangeInitial=function(Re,Fe){for(var nt=J.list(Re,"",!0),Ge=!1,ut=0;ut<nt.length;ut++){var pt=nt[ut],gt=pt._rangeInitial0===void 0&&pt._rangeInitial1===void 0,ct=gt||pt.range[0]!==pt._rangeInitial0||pt.range[1]!==pt._rangeInitial1,Tt=pt.autorange;(gt&&Tt!==!0||Fe&&ct)&&(pt._rangeInitial0=Tt==="min"||Tt==="max reversed"?void 0:pt.range[0],pt._rangeInitial1=Tt==="max"||Tt==="min reversed"?void 0:pt.range[1],pt._autorangeInitial=Tt,Ge=!0)}return Ge},J.saveShowSpikeInitial=function(Re,Fe){for(var nt=J.list(Re,"",!0),Ge=!1,ut="on",pt=0;pt<nt.length;pt++){var gt=nt[pt],ct=gt._showSpikeInitial===void 0,Tt=ct||gt.showspikes!==gt._showspikes;(ct||Fe&&Tt)&&(gt._showSpikeInitial=gt.showspikes,Ge=!0),ut!=="on"||gt.showspikes||(ut="off")}return Re._fullLayout._cartesianSpikesEnabled=ut,Ge},J.autoBin=function(Re,Fe,nt,Ge,ut,pt){var gt,ct=b.aggNums(Math.min,null,Re),Tt=b.aggNums(Math.max,null,Re);if(Fe.type==="category"||Fe.type==="multicategory")return{start:ct-.5,end:Tt+.5,size:Math.max(1,Math.round(pt)||1),_dataSpan:Tt-ct};if(ut||(ut=Fe.calendar),gt=Fe.type==="log"?{type:"linear",range:[ct,Tt]}:{type:Fe.type,range:b.simpleMap([ct,Tt],Fe.c2r,0,ut),calendar:ut},J.setConvert(gt),pt=pt&&a.dtick(pt,gt.type))gt.dtick=pt,gt.tick0=a.tick0(void 0,gt.type,ut);else{var vt;if(nt)vt=(Tt-ct)/nt;else{var kt=b.distinctVals(Re),Lt=Math.pow(10,Math.floor(Math.log(kt.minDiff)/Math.LN10)),Ct=Lt*b.roundUp(kt.minDiff/Lt,[.9,1.9,4.9,9.9],!0);vt=Math.max(Ct,2*b.stdev(Re)/Math.pow(Re.length,Ge?.25:.4)),k(vt)||(vt=1)}J.autoTicks(gt,vt)}var Dt,Gt=gt.dtick,tn=J.tickIncrement(J.tickFirst(gt),Gt,"reverse",ut);if(typeof Gt=="number")tn=function(jt,Wt,Ft,Ln,bn){var hn=0,Kt=0,sn=0,Qt=0;function cn(Sn){return(1+100*(Sn-jt)/Ft.dtick)%100<2}for(var vn=0;vn<Wt.length;vn++)Wt[vn]%1==0?sn++:k(Wt[vn])||Qt++,cn(Wt[vn])&&hn++,cn(Wt[vn]+Ft.dtick/2)&&Kt++;var xn=Wt.length-Qt;if(sn===xn&&Ft.type!=="date")Ft.dtick<1?jt=Ln-.5*Ft.dtick:(jt-=.5)+Ft.dtick<Ln&&(jt+=Ft.dtick);else if(Kt<.1*xn&&(hn>.3*xn||cn(Ln)||cn(bn))){var An=Ft.dtick/2;jt+=jt+An<Ln?An:-An}return jt}(tn,Re,gt,ct,Tt),Dt=tn+(1+Math.floor((Tt-tn)/Gt))*Gt;else for(gt.dtick.charAt(0)==="M"&&(tn=function(jt,Wt,Ft,Ln,bn){var hn=b.findExactDates(Wt,bn);if(hn.exactDays>.8){var Kt=Number(Ft.substr(1));hn.exactYears>.8&&Kt%12==0?jt=J.tickIncrement(jt,"M6","reverse")+1.5*f:hn.exactMonths>.8?jt=J.tickIncrement(jt,"M1","reverse")+15.5*f:jt-=S;var sn=J.tickIncrement(jt,Ft);if(sn<=Ln)return sn}return jt}(tn,Re,Gt,ct,ut)),Dt=tn;Dt<=Tt;)Dt=J.tickIncrement(Dt,Gt,!1,ut);return{start:Fe.c2r(tn,0,ut),end:Fe.c2r(Dt,0,ut),size:Gt,_dataSpan:Tt-ct}},J.prepMinorTicks=function(Re,Fe,nt){if(!Fe.minor.dtick){delete Re.dtick;var Ge,ut=Fe.dtick&&k(Fe._tmin);if(ut){var pt=J.tickIncrement(Fe._tmin,Fe.dtick,!0);Ge=[Fe._tmin,.99*pt+.01*Fe._tmin]}else{var gt=b.simpleMap(Fe.range,Fe.r2l);Ge=[gt[0],.8*gt[0]+.2*gt[1]]}if(Re.range=b.simpleMap(Ge,Fe.l2r),Re._isMinor=!0,J.prepTicks(Re,nt),ut){var ct=k(Fe.dtick),Tt=k(Re.dtick),vt=ct?Fe.dtick:+Fe.dtick.substring(1),kt=Tt?Re.dtick:+Re.dtick.substring(1);ct&&Tt?ge(vt,kt)?vt===2*_&&kt===2*f&&(Re.dtick=_):vt===2*_&&kt===3*f?Re.dtick=_:vt!==_||(Fe._input.minor||{}).nticks?ke(vt/kt,2.5)?Re.dtick=vt/2:Re.dtick=vt:Re.dtick=f:String(Fe.dtick).charAt(0)==="M"?Tt?Re.dtick="M1":ge(vt,kt)?vt>=12&&kt===2&&(Re.dtick="M3"):Re.dtick=Fe.dtick:String(Re.dtick).charAt(0)==="L"?String(Fe.dtick).charAt(0)==="L"?ge(vt,kt)||(Re.dtick=ke(vt/kt,2.5)?Fe.dtick/2:Fe.dtick):Re.dtick="D1":Re.dtick==="D2"&&+Fe.dtick>1&&(Re.dtick=1)}Re.range=Fe.range}Fe.minor._tick0Init===void 0&&(Re.tick0=Fe.tick0)},J.prepTicks=function(Re,Fe){var nt=b.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe);if(Re.tickmode==="auto"||!Re.dtick){var Ge,ut=Re.nticks;ut||(Re.type==="category"||Re.type==="multicategory"?(Ge=Re.tickfont?b.bigFont(Re.tickfont.size||12):15,ut=Re._length/Ge):(Ge=Re._id.charAt(0)==="y"?40:80,ut=b.constrain(Re._length/Ge,4,9)+1),Re._name==="radialaxis"&&(ut*=2)),Re.minor&&Re.minor.tickmode!=="array"||Re.tickmode==="array"&&(ut*=100),Re._roughDTick=Math.abs(nt[1]-nt[0])/ut,J.autoTicks(Re,Re._roughDTick),Re._minDtick>0&&Re.dtick<2*Re._minDtick&&(Re.dtick=Re._minDtick,Re.tick0=Re.l2r(Re._forceTick0))}Re.ticklabelmode==="period"&&function(pt){var gt;function ct(){return!(k(pt.dtick)||pt.dtick.charAt(0)!=="M")}var Tt=ct(),vt=J.getTickFormat(pt);if(vt){var kt=pt._dtickInit!==pt.dtick;/%[fLQsSMX]/.test(vt)||(/%[HI]/.test(vt)?(gt=w,kt&&!Tt&&pt.dtick<w&&(pt.dtick=w)):/%p/.test(vt)?(gt=S,kt&&!Tt&&pt.dtick<S&&(pt.dtick=S)):/%[Aadejuwx]/.test(vt)?(gt=f,kt&&!Tt&&pt.dtick<f&&(pt.dtick=f)):/%[UVW]/.test(vt)?(gt=_,kt&&!Tt&&pt.dtick<_&&(pt.dtick=_)):/%[Bbm]/.test(vt)?(gt=y,kt&&(Tt?Ee(pt.dtick)<1:pt.dtick<v)&&(pt.dtick="M1")):/%[q]/.test(vt)?(gt=d,kt&&(Tt?Ee(pt.dtick)<3:pt.dtick<m)&&(pt.dtick="M3")):/%[Yy]/.test(vt)&&(gt=h,kt&&(Tt?Ee(pt.dtick)<12:pt.dtick<u)&&(pt.dtick="M12")))}(Tt=ct())&&pt.tick0===pt._dowTick0&&(pt.tick0=pt._rawTick0),pt._definedDelta=gt}(Re),Re.tick0||(Re.tick0=Re.type==="date"?"2000-01-01":0),Re.type==="date"&&Re.dtick<.1&&(Re.dtick=.1),_e(Re)},J.calcTicks=function(Re,Fe){for(var nt,Ge,ut=Re.type,pt=Re.calendar,gt=Re.ticklabelstep,ct=Re.ticklabelmode==="period",Tt=b.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe),vt=Tt[1]<Tt[0],kt=Math.min(Tt[0],Tt[1]),Lt=Math.max(Tt[0],Tt[1]),Ct=Math.max(1e3,Re._length||0),Dt=[],Gt=[],tn=[],jt=[],Wt=Re.minor&&(Re.minor.ticks||Re.minor.showgrid),Ft=1;Ft>=(Wt?0:1);Ft--){var Ln=!Ft;Ft?(Re._dtickInit=Re.dtick,Re._tick0Init=Re.tick0):(Re.minor._dtickInit=Re.minor.dtick,Re.minor._tick0Init=Re.minor.tick0);var bn=Ft?Re:b.extendFlat({},Re,Re.minor);if(Ln?J.prepMinorTicks(bn,Re,Fe):J.prepTicks(bn,Fe),bn.tickmode!=="array")if(bn.tickmode!=="sync"){var hn=ve(Tt),Kt=hn[0],sn=hn[1],Qt=k(bn.dtick),cn=ut==="log"&&!(Qt||bn.dtick.charAt(0)==="L"),vn=J.tickFirst(bn,Fe);if(Ft){if(Re._tmin=vn,vn<Kt!==vt)break;ut!=="category"&&ut!=="multicategory"||(sn=vt?Math.max(-.5,sn):Math.min(Re._categories.length-.5,sn))}var xn,An,Sn=null,Tn=vn;Ft&&(Qt?An=Re.dtick:ut==="date"?typeof Re.dtick=="string"&&Re.dtick.charAt(0)==="M"&&(An=y*Re.dtick.substring(1)):An=Re._roughDTick,xn=Math.round((Re.r2l(Tn)-Re.r2l(Re.tick0))/An)-1);var Rn=bn.dtick;for(bn.rangebreaks&&bn._tick0Init!==bn.tick0&&(Tn=Ne(Tn,Re),vt||(Tn=J.tickIncrement(Tn,Rn,!vt,pt))),Ft&&ct&&(Tn=J.tickIncrement(Tn,Rn,!vt,pt),xn--);vt?Tn>=sn:Tn<=sn;Tn=J.tickIncrement(Tn,Rn,vt,pt)){if(Ft&&xn++,bn.rangebreaks&&!vt){if(Tn<Kt)continue;if(bn.maskBreaks(Tn)===O&&Ne(Tn,bn)>=Lt)break}if(tn.length>Ct||Tn===Sn)break;Sn=Tn;var In={value:Tn};Ft?(cn&&Tn!==(0|Tn)&&(In.simpleLabel=!0),gt>1&&xn%gt&&(In.skipLabel=!0),tn.push(In)):(In.minor=!0,jt.push(In))}}else tn=[],Dt=oe(Re);else Ft?(tn=[],Dt=re(Re,!Ln)):(jt=[],Gt=re(Re,!Ln))}if(Wt&&!(Re.minor.ticks==="inside"&&Re.ticks==="outside"||Re.minor.ticks==="outside"&&Re.ticks==="inside")){for(var Xn=tn.map(function(St){return St.value}),Vn=[],er=0;er<jt.length;er++){var Wn=jt[er],fr=Wn.value;if(Xn.indexOf(fr)===-1){for(var Jt=!1,en=0;!Jt&&en<tn.length;en++)1e7+tn[en].value===1e7+fr&&(Jt=!0);Jt||Vn.push(Wn)}}jt=Vn}if(ct&&function(St,Rt,Xt){for(var ln=0;ln<St.length;ln++){var un=St[ln].value,mn=ln,rn=ln+1;ln<St.length-1?(mn=ln,rn=ln+1):ln>0?(mn=ln-1,rn=ln):(mn=ln,rn=ln);var qt,Ht=St[mn].value,$t=St[rn].value,an=Math.abs($t-Ht),wn=Xt||an,En=0;wn>=u?En=an>=u&&an<=c?an:h:Xt===d&&wn>=m?En=an>=m&&an<=x?an:d:wn>=v?En=an>=v&&an<=g?an:y:Xt===_&&wn>=_?En=_:wn>=f?En=f:Xt===S&&wn>=S?En=S:Xt===w&&wn>=w&&(En=w),En>=an&&(En=an,qt=!0);var On=un+En;if(Rt.rangebreaks&&En>0){for(var Fn=0,$n=0;$n<84;$n++){var Hn=($n+.5)/84;Rt.maskBreaks(un*(1-Hn)+Hn*On)!==O&&Fn++}(En*=Fn/84)||(St[ln].drop=!0),qt&&an>_&&(En=an)}(En>0||ln===0)&&(St[ln].periodX=un+En/2)}}(tn,Re,Re._definedDelta),Re.rangebreaks){var Mn=Re._id.charAt(0)==="y",pn=1;Re.tickmode==="auto"&&(pn=Re.tickfont?Re.tickfont.size:12);var Cn=NaN;for(nt=tn.length-1;nt>-1;nt--)if(tn[nt].drop)tn.splice(nt,1);else{tn[nt].value=Ne(tn[nt].value,Re);var jn=Re.c2p(tn[nt].value);(Mn?Cn>jn-pn:Cn<jn+pn)?tn.splice(vt?nt+1:nt,1):Cn=jn}}Ye(Re)&&Math.abs(Tt[1]-Tt[0])===360&&tn.pop(),Re._tmax=(tn[tn.length-1]||{}).value,Re._prevDateHead="",Re._inCalcTicks=!0;var Bn,Yn,dr=function(St){St.text="",Re._prevDateHead=Ge};for(tn=tn.concat(jt),nt=0;nt<tn.length;nt++){var Zt=tn[nt].minor,dn=tn[nt].value;Zt?Gt.push({x:dn,minor:!0}):(Ge=Re._prevDateHead,Bn=J.tickText(Re,dn,!1,tn[nt].simpleLabel),(Yn=tn[nt].periodX)!==void 0&&(Bn.periodX=Yn,(Yn>Lt||Yn<kt)&&(Yn>Lt&&(Bn.periodX=Lt),Yn<kt&&(Bn.periodX=kt),dr(Bn))),tn[nt].skipLabel&&dr(Bn),Dt.push(Bn))}return Dt=Dt.concat(Gt),Re._inCalcTicks=!1,ct&&Dt.length&&(Dt[0].noTick=!0),Dt};var fe=[2,5,10],Se=[1,2,3,6,12],be=[1,2,5,10,15,30],we=[1,2,3,7,14],Me=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ie=[-.301,0,.301,.699,1],Oe=[15,30,45,90,180];function he(Re,Fe,nt){return Fe*b.roundUp(Re/Fe,nt)}function _e(Re){var Fe=Re.dtick;if(Re._tickexponent=0,k(Fe)||typeof Fe=="string"||(Fe=1),Re.type!=="category"&&Re.type!=="multicategory"||(Re._tickround=null),Re.type==="date"){var nt=Re.r2l(Re.tick0),Ge=Re.l2r(nt).replace(/(^-|i)/g,""),ut=Ge.length;if(String(Fe).charAt(0)==="M")ut>10||Ge.substr(5)!=="01-01"?Re._tickround="d":Re._tickround=+Fe.substr(1)%12==0?"y":"m";else if(Fe>=f&&ut<=10||Fe>=15*f)Re._tickround="d";else if(Fe>=E&&ut<=16||Fe>=w)Re._tickround="M";else if(Fe>=P&&ut<=19||Fe>=E)Re._tickround="S";else{var pt=Re.l2r(nt+Fe).replace(/^-/,"").length;Re._tickround=Math.max(ut,pt)-20,Re._tickround<0&&(Re._tickround=4)}}else if(k(Fe)||Fe.charAt(0)==="L"){var gt=Re.range.map(Re.r2d||Number);k(Fe)||(Fe=Number(Fe.substr(1))),Re._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var ct=Math.max(Math.abs(gt[0]),Math.abs(gt[1])),Tt=Math.floor(Math.log(ct)/Math.LN10+.01),vt=Re.minexponent===void 0?3:Re.minexponent;Math.abs(Tt)>vt&&(Le(Re.exponentformat)&&!Be(Tt)?Re._tickexponent=3*Math.round((Tt-1)/3):Re._tickexponent=Tt)}else Re._tickround=null}function Ae(Re,Fe,nt){var Ge=Re.tickfont||{};return{x:Fe,dx:0,dy:0,text:nt||"",fontSize:Ge.size,font:Ge.family,fontWeight:Ge.weight,fontStyle:Ge.style,fontVariant:Ge.variant,fontTextcase:Ge.textcase,fontLineposition:Ge.lineposition,fontShadow:Ge.shadow,fontColor:Ge.color}}J.autoTicks=function(Re,Fe,nt){var Ge;function ut(Lt){return Math.pow(Lt,Math.floor(Math.log(Fe)/Math.LN10))}if(Re.type==="date"){Re.tick0=b.dateTick0(Re.calendar,0);var pt=2*Fe;if(pt>h)Fe/=h,Ge=ut(10),Re.dtick="M"+12*he(Fe,Ge,fe);else if(pt>y)Fe/=y,Re.dtick="M"+he(Fe,1,Se);else if(pt>f){if(Re.dtick=he(Fe,f,Re._hasDayOfWeekBreaks?[1,2,7,14]:we),!nt){var gt=J.getTickFormat(Re),ct=Re.ticklabelmode==="period";ct&&(Re._rawTick0=Re.tick0),/%[uVW]/.test(gt)?Re.tick0=b.dateTick0(Re.calendar,2):Re.tick0=b.dateTick0(Re.calendar,1),ct&&(Re._dowTick0=Re.tick0)}}else pt>w?Re.dtick=he(Fe,w,Se):pt>E?Re.dtick=he(Fe,E,be):pt>P?Re.dtick=he(Fe,P,be):(Ge=ut(10),Re.dtick=he(Fe,Ge,fe))}else if(Re.type==="log"){Re.tick0=0;var Tt=b.simpleMap(Re.range,Re.r2l);if(Re._isMinor&&(Fe*=1.5),Fe>.7)Re.dtick=Math.ceil(Fe);else if(Math.abs(Tt[1]-Tt[0])<1){var vt=1.5*Math.abs((Tt[1]-Tt[0])/Fe);Fe=Math.abs(Math.pow(10,Tt[1])-Math.pow(10,Tt[0]))/vt,Ge=ut(10),Re.dtick="L"+he(Fe,Ge,fe)}else Re.dtick=Fe>.3?"D2":"D1"}else Re.type==="category"||Re.type==="multicategory"?(Re.tick0=0,Re.dtick=Math.ceil(Math.max(Fe,1))):Ye(Re)?(Re.tick0=0,Ge=1,Re.dtick=he(Fe,Ge,Oe)):(Re.tick0=0,Ge=ut(10),Re.dtick=he(Fe,Ge,fe));if(Re.dtick===0&&(Re.dtick=1),!k(Re.dtick)&&typeof Re.dtick!="string"){var kt=Re.dtick;throw Re.dtick=1,"ax.dtick error: "+String(kt)}},J.tickIncrement=function(Re,Fe,nt,Ge){var ut=nt?-1:1;if(k(Fe))return b.increment(Re,ut*Fe);var pt=Fe.charAt(0),gt=ut*Number(Fe.substr(1));if(pt==="M")return b.incrementMonth(Re,gt,Ge);if(pt==="L")return Math.log(Math.pow(10,Re)+gt)/Math.LN10;if(pt==="D"){var ct=Fe==="D2"?Ie:Me,Tt=Re+.01*ut,vt=b.roundUp(b.mod(Tt,1),ct,nt);return Math.floor(Tt)+Math.log(A.round(Math.pow(10,vt),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},J.tickFirst=function(Re,Fe){var nt=Re.r2l||Number,Ge=b.simpleMap(Re.range,nt,void 0,void 0,Fe),ut=Ge[1]<Ge[0],pt=ut?Math.floor:Math.ceil,gt=ve(Ge)[0],ct=Re.dtick,Tt=nt(Re.tick0);if(k(ct)){var vt=pt((gt-Tt)/ct)*ct+Tt;return Re.type!=="category"&&Re.type!=="multicategory"||(vt=b.constrain(vt,0,Re._categories.length-1)),vt}var kt=ct.charAt(0),Lt=Number(ct.substr(1));if(kt==="M"){for(var Ct,Dt,Gt,tn=0,jt=Tt;tn<10;){if(((Ct=J.tickIncrement(jt,ct,ut,Re.calendar))-gt)*(jt-gt)<=0)return ut?Math.min(jt,Ct):Math.max(jt,Ct);Dt=(gt-(jt+Ct)/2)/(Ct-jt),Gt=kt+(Math.abs(Math.round(Dt))||1)*Lt,jt=J.tickIncrement(jt,Gt,Dt<0?!ut:ut,Re.calendar),tn++}return b.error("tickFirst did not converge",Re),jt}if(kt==="L")return Math.log(pt((Math.pow(10,gt)-Tt)/Lt)*Lt+Tt)/Math.LN10;if(kt==="D"){var Wt=ct==="D2"?Ie:Me,Ft=b.roundUp(b.mod(gt,1),Wt,ut);return Math.floor(gt)+Math.log(A.round(Math.pow(10,Ft),1))/Math.LN10}throw"unrecognized dtick "+String(ct)},J.tickText=function(Re,Fe,nt,Ge){var ut,pt=Ae(Re,Fe),gt=Re.tickmode==="array",ct=nt||gt,Tt=Re.type,vt=Tt==="category"?Re.d2l_noadd:Re.d2l,kt=function(jt){var Wt=Re.l2p(jt);return Wt>=0&&Wt<=Re._length?jt:null};if(gt&&b.isArrayOrTypedArray(Re.ticktext)){var Lt=b.simpleMap(Re.range,Re.r2l),Ct=(Math.abs(Lt[1]-Lt[0])-(Re._lBreaks||0))/1e4;for(ut=0;ut<Re.ticktext.length&&!(Math.abs(Fe-vt(Re.tickvals[ut]))<Ct);ut++);if(ut<Re.ticktext.length)return pt.text=String(Re.ticktext[ut]),pt.xbnd=[kt(pt.x-.5),kt(pt.x+Re.dtick-.5)],pt}function Dt(jt){if(jt===void 0)return!0;if(nt)return jt==="none";var Wt={first:Re._tmin,last:Re._tmax}[jt];return jt!=="all"&&Fe!==Wt}var Gt=nt?"never":Re.exponentformat!=="none"&&Dt(Re.showexponent)?"hide":"";if(Tt==="date"?function(jt,Wt,Ft,Ln){var bn=jt._tickround,hn=Ft&&jt.hoverformat||J.getTickFormat(jt);(Ln=!hn&&Ln)&&(bn=k(bn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[bn]);var Kt,sn=b.formatDate(Wt.x,hn,bn,jt._dateFormat,jt.calendar,jt._extraFormat),Qt=sn.indexOf(`
`);if(Qt!==-1&&(Kt=sn.substr(Qt+1),sn=sn.substr(0,Qt)),Ln&&(Kt===void 0||sn!=="00:00:00"&&sn!=="00:00"?sn.length===8&&(sn=sn.replace(/:00$/,"")):(sn=Kt,Kt="")),Kt)if(Ft)bn==="d"?sn+=", "+Kt:sn=Kt+(sn?", "+sn:"");else if(jt._inCalcTicks&&jt._prevDateHead===Kt){var cn=We(jt),vn=jt._trueSide||jt.side;(!cn&&vn==="top"||cn&&vn==="bottom")&&(sn+="<br> ")}else jt._prevDateHead=Kt,sn+="<br>"+Kt;Wt.text=sn}(Re,pt,nt,ct):Tt==="log"?function(jt,Wt,Ft,Ln,bn){var hn=jt.dtick,Kt=Wt.x,sn=jt.tickformat,Qt=typeof hn=="string"&&hn.charAt(0);if(bn==="never"&&(bn=""),Ln&&Qt!=="L"&&(hn="L3",Qt="L"),sn||Qt==="L")Wt.text=Ve(Math.pow(10,Kt),jt,bn,Ln);else if(k(hn)||Qt==="D"&&b.mod(Kt+.01,1)<.1){var cn=Math.round(Kt),vn=Math.abs(cn),xn=jt.exponentformat;xn==="power"||Le(xn)&&Be(cn)?(Wt.text=cn===0?1:cn===1?"10":"10<sup>"+(cn>1?"":C)+vn+"</sup>",Wt.fontSize*=1.25):(xn==="e"||xn==="E")&&vn>2?Wt.text="1"+xn+(cn>0?"+":C)+vn:(Wt.text=Ve(Math.pow(10,Kt),jt,"","fakehover"),hn==="D1"&&jt._id.charAt(0)==="y"&&(Wt.dy-=Wt.fontSize/6))}else{if(Qt!=="D")throw"unrecognized dtick "+String(hn);Wt.text=String(Math.round(Math.pow(10,b.mod(Kt,1)))),Wt.fontSize*=.75}if(jt.dtick==="D1"){var An=String(Wt.text).charAt(0);An!=="0"&&An!=="1"||(jt._id.charAt(0)==="y"?Wt.dx-=Wt.fontSize/4:(Wt.dy+=Wt.fontSize/2,Wt.dx+=(jt.range[1]>jt.range[0]?1:-1)*Wt.fontSize*(Kt<0?.5:.25)))}}(Re,pt,0,ct,Gt):Tt==="category"?function(jt,Wt){var Ft=jt._categories[Math.round(Wt.x)];Ft===void 0&&(Ft=""),Wt.text=String(Ft)}(Re,pt):Tt==="multicategory"?function(jt,Wt,Ft){var Ln=Math.round(Wt.x),bn=jt._categories[Ln]||[],hn=bn[1]===void 0?"":String(bn[1]),Kt=bn[0]===void 0?"":String(bn[0]);Ft?Wt.text=Kt+" - "+hn:(Wt.text=hn,Wt.text2=Kt)}(Re,pt,nt):Ye(Re)?function(jt,Wt,Ft,Ln,bn){if(jt.thetaunit!=="radians"||Ft)Wt.text=Ve(Wt.x,jt,bn,Ln);else{var hn=Wt.x/180;if(hn===0)Wt.text="0";else{var Kt=function(Qt){function cn(Sn,Tn){return Math.abs(Sn-Tn)<=1e-6}var vn=function(Sn){for(var Tn=1;!cn(Math.round(Sn*Tn)/Tn,Sn);)Tn*=10;return Tn}(Qt),xn=Qt*vn,An=Math.abs(function Sn(Tn,Rn){return cn(Rn,0)?Tn:Sn(Rn,Tn%Rn)}(xn,vn));return[Math.round(xn/An),Math.round(vn/An)]}(hn);if(Kt[1]>=100)Wt.text=Ve(b.deg2rad(Wt.x),jt,bn,Ln);else{var sn=Wt.x<0;Kt[1]===1?Kt[0]===1?Wt.text="\u03C0":Wt.text=Kt[0]+"\u03C0":Wt.text=["<sup>",Kt[0],"</sup>","\u2044","<sub>",Kt[1],"</sub>","\u03C0"].join(""),sn&&(Wt.text=C+Wt.text)}}}}(Re,pt,nt,ct,Gt):function(jt,Wt,Ft,Ln,bn){bn==="never"?bn="":jt.showexponent==="all"&&Math.abs(Wt.x/jt.dtick)<1e-6&&(bn="hide"),Wt.text=Ve(Wt.x,jt,bn,Ln)}(Re,pt,0,ct,Gt),Ge||(Re.tickprefix&&!Dt(Re.showtickprefix)&&(pt.text=Re.tickprefix+pt.text),Re.ticksuffix&&!Dt(Re.showticksuffix)&&(pt.text+=Re.ticksuffix)),Re.labelalias&&Re.labelalias.hasOwnProperty(pt.text)){var tn=Re.labelalias[pt.text];typeof tn=="string"&&(pt.text=tn)}return(Re.tickson==="boundaries"||Re.showdividers)&&(pt.xbnd=[kt(pt.x-.5),kt(pt.x+Re.dtick-.5)]),pt},J.hoverLabelText=function(Re,Fe,nt){nt&&(Re=b.extendFlat({},Re,{hoverformat:nt}));var Ge=b.isArrayOrTypedArray(Fe)?Fe[0]:Fe,ut=b.isArrayOrTypedArray(Fe)?Fe[1]:void 0;if(ut!==void 0&&ut!==Ge)return J.hoverLabelText(Re,Ge,nt)+" - "+J.hoverLabelText(Re,ut,nt);var pt=Re.type==="log"&&Ge<=0,gt=J.tickText(Re,Re.c2l(pt?-Ge:Ge),"hover").text;return pt?Ge===0?"0":C+gt:gt};var De=["f","p","n","\u03BC","m","","k","M","G","T"];function Le(Re){return Re==="SI"||Re==="B"}function Be(Re){return Re>14||Re<-15}function Ve(Re,Fe,nt,Ge){var ut=Re<0,pt=Fe._tickround,gt=nt||Fe.exponentformat||"B",ct=Fe._tickexponent,Tt=J.getTickFormat(Fe),vt=Fe.separatethousands;if(Ge){var kt={exponentformat:gt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:k(Re)&&Math.abs(Re)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,Re||1]};_e(kt),pt=(Number(kt._tickround)||0)+4,ct=kt._tickexponent,Fe.hoverformat&&(Tt=Fe.hoverformat)}if(Tt)return Fe._numFormat(Tt)(Re).replace(/-/g,C);var Lt,Ct=Math.pow(10,-pt)/2;if(gt==="none"&&(ct=0),(Re=Math.abs(Re))<Ct)Re="0",ut=!1;else{if(Re+=Ct,ct&&(Re*=Math.pow(10,-ct),pt+=ct),pt===0)Re=String(Math.floor(Re));else if(pt<0){Re=(Re=String(Math.round(Re))).substr(0,Re.length+pt);for(var Dt=pt;Dt<0;Dt++)Re+="0"}else{var Gt=(Re=String(Re)).indexOf(".")+1;Gt&&(Re=Re.substr(0,Gt+pt).replace(/\.?0+$/,""))}Re=b.numSeparate(Re,Fe._separators,vt)}return ct&&gt!=="hide"&&(Le(gt)&&Be(ct)&&(gt="power"),Lt=ct<0?C+-ct:gt!=="power"?"+"+ct:String(ct),gt==="e"||gt==="E"?Re+=gt+Lt:gt==="power"?Re+="\xD710<sup>"+Lt+"</sup>":gt==="B"&&ct===9?Re+="B":Le(gt)&&(Re+=De[ct/3+5])),ut?C+Re:Re}function Ze(Re,Fe){if(Re){var nt=Object.keys(F).reduce(function(Ge,ut){return Fe.indexOf(ut)!==-1&&F[ut].forEach(function(pt){Ge[pt]=1}),Ge},{});Object.keys(Re).forEach(function(Ge){nt[Ge]||(Ge.length===1?Re[Ge]=0:delete Re[Ge])})}}function rt(Re,Fe){for(var nt=[],Ge={},ut=0;ut<Fe.length;ut++){var pt=Fe[ut];Ge[pt.text2]?Ge[pt.text2].push(pt.x):Ge[pt.text2]=[pt.x]}for(var gt in Ge)nt.push(Ae(Re,b.interp(Ge[gt],.5),gt));return nt}function it(Re){return Re.periodX!==void 0?Re.periodX:Re.x}function dt(Re){return[Re.text,Re.x,Re.axInfo,Re.font,Re.fontSize,Re.fontColor].join("_")}function mt(Re){var Fe=Re.title.font.size,nt=(Re.title.text.match(s.BR_TAG_ALL)||[]).length;return Re.title.hasOwnProperty("standoff")?Fe*(te+nt*ee):nt?Fe*(nt+1)*ee:Fe}function ht(Re,Fe){var nt=Re.l2p(Fe);return nt>1&&nt<Re._length-1}function Qe(Re){var Fe=A.select(Re),nt=Fe.select(".text-math-group");return nt.empty()?Fe.select("text"):nt}function Je(Re){return Re._id+".automargin"}function wt(Re){return Je(Re)+".mirror"}function Pt(Re){return Re._id+".rangeslider"}function It(Re,Fe){for(var nt=0;nt<Fe.length;nt++)Re.indexOf(Fe[nt])===-1&&Re.push(Fe[nt])}function At(Re,Fe,nt){var Ge,ut,pt=[],gt=[],ct=Re.layout;for(Ge=0;Ge<Fe.length;Ge++)pt.push(J.getFromId(Re,Fe[Ge]));for(Ge=0;Ge<nt.length;Ge++)gt.push(J.getFromId(Re,nt[Ge]));var Tt=Object.keys(r),vt=["anchor","domain","overlaying","position","side","tickangle","editType"],kt=["linear","log"];for(Ge=0;Ge<Tt.length;Ge++){var Lt=Tt[Ge],Ct=pt[0][Lt],Dt=gt[0][Lt],Gt=!0,tn=!1,jt=!1;if(Lt.charAt(0)!=="_"&&typeof Ct!="function"&&vt.indexOf(Lt)===-1){for(ut=1;ut<pt.length&&Gt;ut++){var Wt=pt[ut][Lt];Lt==="type"&&kt.indexOf(Ct)!==-1&&kt.indexOf(Wt)!==-1&&Ct!==Wt?tn=!0:Wt!==Ct&&(Gt=!1)}for(ut=1;ut<gt.length&&Gt;ut++){var Ft=gt[ut][Lt];Lt==="type"&&kt.indexOf(Dt)!==-1&&kt.indexOf(Ft)!==-1&&Dt!==Ft?jt=!0:gt[ut][Lt]!==Dt&&(Gt=!1)}Gt&&(tn&&(ct[pt[0]._name].type="linear"),jt&&(ct[gt[0]._name].type="linear"),qe(ct,Lt,pt,gt,Re._fullLayout._dfltTitle))}}for(Ge=0;Ge<Re._fullLayout.annotations.length;Ge++){var Ln=Re._fullLayout.annotations[Ge];Fe.indexOf(Ln.xref)!==-1&&nt.indexOf(Ln.yref)!==-1&&b.swapAttrs(ct.annotations[Ge],["?"])}}function qe(Re,Fe,nt,Ge,ut){var pt,gt=b.nestedProperty,ct=gt(Re[nt[0]._name],Fe).get(),Tt=gt(Re[Ge[0]._name],Fe).get();for(Fe==="title"&&(ct&&ct.text===ut.x&&(ct.text=ut.y),Tt&&Tt.text===ut.y&&(Tt.text=ut.x)),pt=0;pt<nt.length;pt++)gt(Re,nt[pt]._name+"."+Fe).set(Tt);for(pt=0;pt<Ge.length;pt++)gt(Re,Ge[pt]._name+"."+Fe).set(ct)}function Ye(Re){return Re._id==="angularaxis"}function Ne(Re,Fe){for(var nt=Fe._rangebreaks.length,Ge=0;Ge<nt;Ge++){var ut=Fe._rangebreaks[Ge];if(Re>=ut.min&&Re<ut.max)return ut.max}return Re}function We(Re){return(Re.ticklabelposition||"").indexOf("inside")!==-1}function at(Re,Fe){We(Re._anchorAxis||{})&&Re._hideCounterAxisInsideTickLabels&&Re._hideCounterAxisInsideTickLabels(Fe)}function tt(Re,Fe,nt,Ge){var ut,pt=Re.anchor==="free"||Re.overlaying!==void 0&&Re.overlaying!==!1?Re.overlaying:Re._id;ut=Ge?Re.side==="right"?Fe:-Fe:Fe,pt in nt||(nt[pt]={}),Re.side in nt[pt]||(nt[pt][Re.side]=0),nt[pt][Re.side]+=ut}J.getTickFormat=function(Re){var Fe,nt,Ge,ut,pt,gt,ct,Tt;function vt(Ct){return typeof Ct!="string"?Ct:Number(Ct.replace("M",""))*y}function kt(Ct,Dt){var Gt=["L","D"];if(typeof Ct==typeof Dt){if(typeof Ct=="number")return Ct-Dt;var tn=Gt.indexOf(Ct.charAt(0)),jt=Gt.indexOf(Dt.charAt(0));return tn===jt?Number(Ct.replace(/(L|D)/g,""))-Number(Dt.replace(/(L|D)/g,"")):tn-jt}return typeof Ct=="number"?1:-1}function Lt(Ct,Dt){var Gt=Dt[0]===null,tn=Dt[1]===null,jt=kt(Ct,Dt[0])>=0,Wt=kt(Ct,Dt[1])<=0;return(Gt||jt)&&(tn||Wt)}if(Re.tickformatstops&&Re.tickformatstops.length>0)switch(Re.type){case"date":case"linear":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((Ge=Re.tickformatstops[Fe]).enabled&&(ut=Re.dtick,pt=Ge.dtickrange,gt=void 0,ct=void 0,Tt=void 0,gt=vt||function(Ct){return Ct},ct=pt[0],Tt=pt[1],(!ct&&typeof ct!="number"||gt(ct)<=gt(ut))&&(!Tt&&typeof Tt!="number"||gt(Tt)>=gt(ut)))){nt=Ge;break}break;case"log":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((Ge=Re.tickformatstops[Fe]).enabled&&Lt(Re.dtick,Ge.dtickrange)){nt=Ge;break}}return nt?nt.value:Re.tickformat},J.getSubplots=function(Re,Fe){var nt=Re._fullLayout._subplots,Ge=nt.cartesian.concat(nt.gl2d||[]),ut=Fe?J.findSubplotsWithAxis(Ge,Fe):Ge;return ut.sort(function(pt,gt){var ct=pt.substr(1).split("y"),Tt=gt.substr(1).split("y");return ct[0]===Tt[0]?+ct[1]-+Tt[1]:+ct[0]-+Tt[0]}),ut},J.findSubplotsWithAxis=function(Re,Fe){for(var nt=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),Ge=[],ut=0;ut<Re.length;ut++){var pt=Re[ut];nt.test(pt)&&Ge.push(pt)}return Ge},J.makeClipPaths=function(Re){var Fe=Re._fullLayout;if(!Fe._hasOnlyLargeSploms){var nt,Ge,ut={_offset:0,_length:Fe.width,_id:""},pt={_offset:0,_length:Fe.height,_id:""},gt=J.list(Re,"x",!0),ct=J.list(Re,"y",!0),Tt=[];for(nt=0;nt<gt.length;nt++)for(Tt.push({x:gt[nt],y:pt}),Ge=0;Ge<ct.length;Ge++)nt===0&&Tt.push({x:ut,y:ct[Ge]}),Tt.push({x:gt[nt],y:ct[Ge]});var vt=Fe._clips.selectAll(".axesclip").data(Tt,function(kt){return kt.x._id+kt.y._id});vt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(kt){return"clip"+Fe._uid+kt.x._id+kt.y._id}).append("rect"),vt.exit().remove(),vt.each(function(kt){A.select(this).select("rect").attr({x:kt.x._offset||0,y:kt.y._offset||0,width:kt.x._length||1,height:kt.y._length||1})})}},J.draw=function(Re,Fe,nt){var Ge=Re._fullLayout;Fe==="redraw"&&Ge._paper.selectAll("g.subplot").each(function(ct){var Tt=ct[0],vt=Ge._plots[Tt];if(vt){var kt=vt.xaxis,Lt=vt.yaxis;vt.xaxislayer.selectAll("."+kt._id+"tick").remove(),vt.yaxislayer.selectAll("."+Lt._id+"tick").remove(),vt.xaxislayer.selectAll("."+kt._id+"tick2").remove(),vt.yaxislayer.selectAll("."+Lt._id+"tick2").remove(),vt.xaxislayer.selectAll("."+kt._id+"divider").remove(),vt.yaxislayer.selectAll("."+Lt._id+"divider").remove(),vt.minorGridlayer&&vt.minorGridlayer.selectAll("path").remove(),vt.gridlayer&&vt.gridlayer.selectAll("path").remove(),vt.zerolinelayer&&vt.zerolinelayer.selectAll("path").remove(),Ge._infolayer.select(".g-"+kt._id+"title").remove(),Ge._infolayer.select(".g-"+Lt._id+"title").remove()}});var ut=Fe&&Fe!=="redraw"?Fe:J.listIds(Re),pt=J.list(Re).filter(function(ct){return ct.autoshift}).map(function(ct){return ct.overlaying});ut.map(function(ct){var Tt=J.getFromId(Re,ct);if(Tt.tickmode==="sync"&&Tt.overlaying){var vt=ut.findIndex(function(kt){return kt===Tt.overlaying});vt>=0&&ut.unshift(ut.splice(vt,1).shift())}});var gt={false:{left:0,right:0}};return b.syncOrAsync(ut.map(function(ct){return function(){if(ct){var Tt=J.getFromId(Re,ct);nt||(nt={}),nt.axShifts=gt,nt.overlayingShiftedAx=pt;var vt=J.drawOne(Re,Tt,nt);return Tt._shiftPusher&&tt(Tt,Tt._fullDepth||0,gt,!0),Tt._r=Tt.range.slice(),Tt._rl=b.simpleMap(Tt._r,Tt.r2l),vt}}}))},J.drawOne=function(Re,Fe,nt){var Ge,ut,pt,gt=(nt=nt||{}).axShifts||{},ct=nt.overlayingShiftedAx||[];Fe.setScale();var Tt=Re._fullLayout,vt=Fe._id,kt=vt.charAt(0),Lt=J.counterLetter(vt),Ct=Tt._plots[Fe._mainSubplot];if(Ct){if(Fe._shiftPusher=Fe.autoshift||ct.indexOf(Fe._id)!==-1||ct.indexOf(Fe.overlaying)!==-1,Fe._shiftPusher&Fe.anchor==="free"){var Dt=Fe.linewidth/2||0;Fe.ticks==="inside"&&(Dt+=Fe.ticklen),tt(Fe,Dt,gt,!0),tt(Fe,Fe.shift||0,gt,!1)}nt.skipTitle===!0&&Fe._shift!==void 0||(Fe._shift=function(rn,qt){return rn.autoshift?qt[rn.overlaying][rn.side]:rn.shift||0}(Fe,gt));var Gt=Ct[kt+"axislayer"],tn=Fe._mainLinePosition,jt=tn+=Fe._shift,Wt=Fe._mainMirrorPosition,Ft=Fe._vals=J.calcTicks(Fe),Ln=[Fe.mirror,jt,Wt].join("_");for(Ge=0;Ge<Ft.length;Ge++)Ft[Ge].axInfo=Ln;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var bn={};if(Fe.visible){var hn,Kt,sn=J.makeTransTickFn(Fe),Qt=J.makeTransTickLabelFn(Fe),cn=Fe.ticks==="inside",vn=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var xn=function(rn,qt){var Ht,$t=[],an=function(wn,En){var On=wn.xbnd[En];On!==null&&$t.push(b.extendFlat({},wn,{x:On}))};if(qt.length){for(Ht=0;Ht<qt.length;Ht++)an(qt[Ht],0);an(qt[Ht-1],1)}return $t}(0,Ft);Kt=J.clipEnds(Fe,xn),hn=cn?Kt:xn}else Kt=J.clipEnds(Fe,Ft),hn=cn&&Fe.ticklabelmode!=="period"?Kt:Ft;var An,Sn=Fe._gridVals=Kt,Tn=function(rn,qt){var Ht,$t,an=[],wn=qt.length&&qt[qt.length-1].x<qt[0].x,En=function(Fn,$n){var Hn=Fn.xbnd[$n];Hn!==null&&an.push(b.extendFlat({},Fn,{x:Hn}))};if(rn.showdividers&&qt.length){for(Ht=0;Ht<qt.length;Ht++){var On=qt[Ht];On.text2!==$t&&En(On,wn?1:0),$t=On.text2}En(qt[Ht-1],wn?0:1)}return an}(Fe,Ft);if(!Tt._hasOnlyLargeSploms){var Rn=Fe._subplotsWith,In={};for(Ge=0;Ge<Rn.length;Ge++){ut=Rn[Ge];var Xn=(pt=Tt._plots[ut])[Lt+"axis"],Vn=Xn._mainAxis._id;if(!In[Vn]){In[Vn]=1;var er=kt==="x"?"M0,"+Xn._offset+"v"+Xn._length:"M"+Xn._offset+",0h"+Xn._length;J.drawGrid(Re,Fe,{vals:Sn,counterAxis:Xn,layer:pt.gridlayer.select("."+vt),minorLayer:pt.minorGridlayer.select("."+vt),path:er,transFn:sn}),J.drawZeroLine(Re,Fe,{counterAxis:Xn,layer:pt.zerolinelayer,path:er,transFn:sn})}}}var Wn=J.getTickSigns(Fe),fr=J.getTickSigns(Fe,"minor");if(Fe.ticks||Fe.minor&&Fe.minor.ticks){var Jt,en,Mn,pn,Cn=J.makeTickPath(Fe,jt,Wn[2]),jn=J.makeTickPath(Fe,jt,fr[2],{minor:!0});if(Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(Jt=J.makeTickPath(Fe,Wt,Wn[3]),en=J.makeTickPath(Fe,Wt,fr[3],{minor:!0}),Mn=Cn+Jt,pn=jn+en):(Jt="",en="",Mn=Cn,pn=jn),Fe.showdividers&&vn&&Fe.tickson==="boundaries"){var Bn={};for(Ge=0;Ge<Tn.length;Ge++)Bn[Tn[Ge].x]=1;An=function(rn){return Bn[rn.x]?Jt:Mn}}else An=function(rn){return rn.minor?pn:Mn}}if(J.drawTicks(Re,Fe,{vals:hn,layer:Gt,path:An,transFn:sn}),Fe.mirror==="allticks"){var Yn=Object.keys(Fe._linepositions||{});for(Ge=0;Ge<Yn.length;Ge++){ut=Yn[Ge],pt=Tt._plots[ut];var dr=Fe._linepositions[ut]||[],Zt=dr[0],dn=dr[1],St=dr[2],Rt=J.makeTickPath(Fe,Zt,St?Wn[0]:fr[0],{minor:St})+J.makeTickPath(Fe,dn,St?Wn[1]:fr[1],{minor:St});J.drawTicks(Re,Fe,{vals:hn,layer:pt[kt+"axislayer"],path:Rt,transFn:sn})}}var Xt=[];if(Xt.push(function(){return J.drawLabels(Re,Fe,{vals:Ft,layer:Gt,plotinfo:pt,transFn:Qt,labelFns:J.makeLabelFns(Fe,jt)})}),Fe.type==="multicategory"){var ln={x:2,y:10}[kt];Xt.push(function(){var rn={x:"height",y:"width"}[kt],qt=mn()[rn]+ln+(Fe._tickAngles[vt+"tick"]?Fe.tickfont.size*ee:0);return J.drawLabels(Re,Fe,{vals:rt(Fe,Ft),layer:Gt,cls:vt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:sn,labelFns:J.makeLabelFns(Fe,jt+qt*Wn[4])})}),Xt.push(function(){return Fe._depth=Wn[4]*(mn("tick2")[Fe.side]-jt),function(rn,qt,Ht){var $t=qt._id+"divider",an=Ht.vals,wn=Ht.layer.selectAll("path."+$t).data(an,dt);wn.exit().remove(),wn.enter().insert("path",":first-child").classed($t,1).classed("crisp",1).call(i.stroke,qt.dividercolor).style("stroke-width",n.crispRound(rn,qt.dividerwidth,1)+"px"),wn.attr("transform",Ht.transFn).attr("d",Ht.path)}(Re,Fe,{vals:Tn,layer:Gt,path:J.makeTickPath(Fe,jt,Wn[4],{len:Fe._depth}),transFn:sn})})}else Fe.title.hasOwnProperty("standoff")&&Xt.push(function(){Fe._depth=Wn[4]*(mn()[Fe.side]-jt)});var un=T.getComponentMethod("rangeslider","isVisible")(Fe);return nt.skipTitle||un&&Fe.side==="bottom"||Xt.push(function(){return function(rn,qt){var Ht,$t=rn._fullLayout,an=qt._id,wn=an.charAt(0),En=qt.title.font.size,On=(qt.title.text.match(s.BR_TAG_ALL)||[]).length;if(qt.title.hasOwnProperty("standoff"))qt.side==="bottom"||qt.side==="right"?Ht=qt._depth+qt.title.standoff+En*te:qt.side!=="top"&&qt.side!=="left"||(Ht=qt._depth+qt.title.standoff+En*(q+On*ee));else{var Fn=We(qt);if(qt.type==="multicategory")Ht=qt._depth;else{var $n=1.5*En;Fn&&($n=.5*En,qt.ticks==="outside"&&($n+=qt.ticklen)),Ht=10+$n+(qt.linewidth?qt.linewidth-1:0)}Fn||(Ht+=wn==="x"?qt.side==="top"?En*(qt.showticklabels?1:0):En*(qt.showticklabels?1.5:.5):qt.side==="right"?En*(qt.showticklabels?1:.5):En*(qt.showticklabels?.5:0))}var Hn,Kn,tr,Jn,hr=J.getPxPosition(rn,qt);if(wn==="x"?(Kn=qt._offset+qt._length/2,tr=qt.side==="top"?hr-Ht:hr+Ht):(tr=qt._offset+qt._length/2,Kn=qt.side==="right"?hr+Ht:hr-Ht,Hn={rotate:"-90",offset:0}),qt.type!=="multicategory"){var br=qt._selections[qt._id+"tick"];if(Jn={selection:br,side:qt.side},br&&br.node()&&br.node().parentNode){var gr=n.getTranslate(br.node().parentNode);Jn.offsetLeft=gr.x,Jn.offsetTop=gr.y}qt.title.hasOwnProperty("standoff")&&(Jn.pad=0)}return qt._titleStandoff=Ht,t.draw(rn,an+"title",{propContainer:qt,propName:qt._name+".title.text",placeholder:$t._dfltTitle[wn],avoid:Jn,transform:Hn,attributes:{x:Kn,y:tr,"text-anchor":"middle"}})}(Re,Fe)}),Xt.push(function(){var rn,qt,Ht,$t,an=Fe.side.charAt(0),wn=Q[Fe.side].charAt(0),En=J.getPxPosition(Re,Fe),On=vn?Fe.ticklen:0;(Fe.automargin||un||Fe._shiftPusher)&&(Fe.type==="multicategory"?rn=mn("tick2"):(rn=mn(),kt==="x"&&an==="b"&&(Fe._depth=Math.max(rn.width>0?rn.bottom-En:0,On))));var Fn=0,$n=0;if(Fe._shiftPusher&&(Fn=Math.max(On,rn.height>0?an==="l"?En-rn.left:rn.right-En:0),Fe.title.text!==Tt._dfltTitle[kt]&&($n=(Fe._titleStandoff||0)+(Fe._titleScoot||0),an==="l"&&($n+=mt(Fe))),Fe._fullDepth=Math.max(Fn,$n)),Fe.automargin){qt={x:0,y:0,r:0,l:0,t:0,b:0};var Hn=[0,1],Kn=typeof Fe._shift=="number"?Fe._shift:0;if(kt==="x"){if(an==="b"?qt[an]=Fe._depth:(qt[an]=Fe._depth=Math.max(rn.width>0?En-rn.top:0,On),Hn.reverse()),rn.width>0){var tr=rn.right-(Fe._offset+Fe._length);tr>0&&(qt.xr=1,qt.r=tr);var Jn=Fe._offset-rn.left;Jn>0&&(qt.xl=0,qt.l=Jn)}}else if(an==="l"?(Fe._depth=Math.max(rn.height>0?En-rn.left:0,On),qt[an]=Fe._depth-Kn):(Fe._depth=Math.max(rn.height>0?rn.right-En:0,On),qt[an]=Fe._depth+Kn,Hn.reverse()),rn.height>0){var hr=rn.bottom-(Fe._offset+Fe._length);hr>0&&(qt.yb=0,qt.b=hr);var br=Fe._offset-rn.top;br>0&&(qt.yt=1,qt.t=br)}qt[Lt]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[Hn[0]],Fe.title.text!==Tt._dfltTitle[kt]&&(qt[an]+=mt(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&((Ht={x:0,y:0,r:0,l:0,t:0,b:0})[wn]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(Ht[wn]+=On),Fe.mirror===!0||Fe.mirror==="ticks"?Ht[Lt]=Fe._anchorAxis.domain[Hn[1]]:Fe.mirror!=="all"&&Fe.mirror!=="allticks"||(Ht[Lt]=[Fe._counterDomainMin,Fe._counterDomainMax][Hn[1]]))}un&&($t=T.getComponentMethod("rangeslider","autoMarginOpts")(Re,Fe)),typeof Fe.automargin=="string"&&(Ze(qt,Fe.automargin),Ze(Ht,Fe.automargin)),o.autoMargin(Re,Je(Fe),qt),o.autoMargin(Re,wt(Fe),Ht),o.autoMargin(Re,Pt(Fe),$t)}),b.syncOrAsync(Xt)}}function mn(rn){var qt=vt+(rn||"tick");return bn[qt]||(bn[qt]=function(Ht,$t,an){var wn,En,On,Fn;if(Ht._selections[$t].size())wn=1/0,En=-1/0,On=1/0,Fn=-1/0,Ht._selections[$t].each(function(){var Hn=Qe(this),Kn=n.bBox(Hn.node().parentNode);wn=Math.min(wn,Kn.top),En=Math.max(En,Kn.bottom),On=Math.min(On,Kn.left),Fn=Math.max(Fn,Kn.right)});else{var $n=J.makeLabelFns(Ht,an);wn=En=$n.yFn({dx:0,dy:0,fontSize:0}),On=Fn=$n.xFn({dx:0,dy:0,fontSize:0})}return{top:wn,bottom:En,left:On,right:Fn,height:En-wn,width:Fn-On}}(Fe,qt,jt)),bn[qt]}},J.getTickSigns=function(Re,Fe){var nt=Re._id.charAt(0),Ge={x:"top",y:"right"}[nt],ut=Re.side===Ge?1:-1,pt=[-1,1,ut,-ut];return(Fe?(Re.minor||{}).ticks:Re.ticks)!=="inside"==(nt==="x")&&(pt=pt.map(function(gt){return-gt})),Re.side&&pt.push({l:-1,t:-1,r:1,b:1}[Re.side.charAt(0)]),pt},J.makeTransTickFn=function(Re){return Re._id.charAt(0)==="x"?function(Fe){return p(Re._offset+Re.l2p(Fe.x),0)}:function(Fe){return p(0,Re._offset+Re.l2p(Fe.x))}},J.makeTransTickLabelFn=function(Re){var Fe=function(ut){var pt=ut.ticklabelposition||"",gt=function(Wt){return pt.indexOf(Wt)!==-1},ct=gt("top"),Tt=gt("left"),vt=gt("right"),kt=gt("bottom"),Lt=gt("inside"),Ct=kt||Tt||ct||vt;if(!Ct&&!Lt)return[0,0];var Dt=ut.side,Gt=Ct?(ut.tickwidth||0)/2:0,tn=3,jt=ut.tickfont?ut.tickfont.size:12;return(kt||ct)&&(Gt+=jt*te,tn+=(ut.linewidth||0)/2),(Tt||vt)&&(Gt+=(ut.linewidth||0)/2,tn+=3),Lt&&Dt==="top"&&(tn-=jt*(1-te)),(Tt||ct)&&(Gt=-Gt),Dt!=="bottom"&&Dt!=="right"||(tn=-tn),[Ct?Gt:0,Lt?tn:0]}(Re),nt=Fe[0],Ge=Fe[1];return Re._id.charAt(0)==="x"?function(ut){return p(nt+Re._offset+Re.l2p(it(ut)),Ge)}:function(ut){return p(Ge,nt+Re._offset+Re.l2p(it(ut)))}},J.makeTickPath=function(Re,Fe,nt,Ge){Ge||(Ge={});var ut=Ge.minor;if(ut&&!Re.minor)return"";var pt=Ge.len!==void 0?Ge.len:ut?Re.minor.ticklen:Re.ticklen,gt=Re._id.charAt(0),ct=(Re.linewidth||1)/2;return gt==="x"?"M0,"+(Fe+ct*nt)+"v"+pt*nt:"M"+(Fe+ct*nt)+",0h"+pt*nt},J.makeLabelFns=function(Re,Fe,nt){var Ge=Re.ticklabelposition||"",ut=function(xn){return Ge.indexOf(xn)!==-1},pt=ut("top"),gt=ut("left"),ct=ut("right"),Tt=ut("bottom")||gt||pt||ct,vt=ut("inside"),kt=Ge==="inside"&&Re.ticks==="inside"||!vt&&Re.ticks==="outside"&&Re.tickson!=="boundaries",Lt=0,Ct=0,Dt=kt?Re.ticklen:0;if(vt?Dt*=-1:Tt&&(Dt=0),kt&&(Lt+=Dt,nt)){var Gt=b.deg2rad(nt);Lt=Dt*Math.cos(Gt)+1,Ct=Dt*Math.sin(Gt)}Re.showticklabels&&(kt||Re.showline)&&(Lt+=.2*Re.tickfont.size);var tn,jt,Wt,Ft,Ln,bn={labelStandoff:Lt+=(Re.linewidth||1)/2*(vt?-1:1),labelShift:Ct},hn=0,Kt=Re.side,sn=Re._id.charAt(0),Qt=Re.tickangle;if(sn==="x")Ft=(Ln=!vt&&Kt==="bottom"||vt&&Kt==="top")?1:-1,vt&&(Ft*=-1),tn=Ct*Ft,jt=Fe+Lt*Ft,Wt=Ln?1:-.2,Math.abs(Qt)===90&&(vt?Wt+=q:Wt=Qt===-90&&Kt==="bottom"?te:Qt===90&&Kt==="top"?q:.5,hn=q/2*(Qt/90)),bn.xFn=function(xn){return xn.dx+tn+hn*xn.fontSize},bn.yFn=function(xn){return xn.dy+jt+xn.fontSize*Wt},bn.anchorFn=function(xn,An){if(Tt){if(gt)return"end";if(ct)return"start"}return k(An)&&An!==0&&An!==180?An*Ft<0!==vt?"end":"start":"middle"},bn.heightFn=function(xn,An,Sn){return An<-60||An>60?-.5*Sn:Re.side==="top"!==vt?-Sn:0};else if(sn==="y"){if(Ft=(Ln=!vt&&Kt==="left"||vt&&Kt==="right")?1:-1,vt&&(Ft*=-1),tn=Lt,jt=Ct*Ft,Wt=0,vt||Math.abs(Qt)!==90||(Wt=Qt===-90&&Kt==="left"||Qt===90&&Kt==="right"?te:.5),vt){var cn=k(Qt)?+Qt:0;if(cn!==0){var vn=b.deg2rad(cn);hn=Math.abs(Math.sin(vn))*te*Ft,Wt=0}}bn.xFn=function(xn){return xn.dx+Fe-(tn+xn.fontSize*Wt)*Ft+hn*xn.fontSize},bn.yFn=function(xn){return xn.dy+jt+xn.fontSize*q},bn.anchorFn=function(xn,An){return k(An)&&Math.abs(An)===90?"middle":Ln?"end":"start"},bn.heightFn=function(xn,An,Sn){return Re.side==="right"&&(An*=-1),An<-30?-Sn:An<30?-.5*Sn:0}}return bn},J.drawTicks=function(Re,Fe,nt){nt=nt||{};var Ge=Fe._id+"tick",ut=[].concat(Fe.minor&&Fe.minor.ticks?nt.vals.filter(function(gt){return gt.minor&&!gt.noTick}):[]).concat(Fe.ticks?nt.vals.filter(function(gt){return!gt.minor&&!gt.noTick}):[]),pt=nt.layer.selectAll("path."+Ge).data(ut,dt);pt.exit().remove(),pt.enter().append("path").classed(Ge,1).classed("ticks",1).classed("crisp",nt.crisp!==!1).each(function(gt){return i.stroke(A.select(this),gt.minor?Fe.minor.tickcolor:Fe.tickcolor)}).style("stroke-width",function(gt){return n.crispRound(Re,gt.minor?Fe.minor.tickwidth:Fe.tickwidth,1)+"px"}).attr("d",nt.path).style("display",null),at(Fe,[N]),pt.attr("transform",nt.transFn)},J.drawGrid=function(Re,Fe,nt){if(nt=nt||{},Fe.tickmode!=="sync"){var Ge=Fe._id+"grid",ut=Fe.minor&&Fe.minor.showgrid,pt=ut?nt.vals.filter(function(Wt){return Wt.minor}):[],gt=Fe.showgrid?nt.vals.filter(function(Wt){return!Wt.minor}):[],ct=nt.counterAxis;if(ct&&J.shouldShowZeroLine(Re,Fe,ct))for(var Tt=Fe.tickmode==="array",vt=0;vt<gt.length;vt++){var kt=gt[vt].x;if(Tt?!kt:Math.abs(kt)<Fe.dtick/100){if(gt=gt.slice(0,vt).concat(gt.slice(vt+1)),!Tt)break;vt--}}Fe._gw=n.crispRound(Re,Fe.gridwidth,1);for(var Lt=ut?n.crispRound(Re,Fe.minor.gridwidth,1):0,Ct=nt.layer,Dt=nt.minorLayer,Gt=1;Gt>=0;Gt--){var tn=Gt?Ct:Dt;if(tn){var jt=tn.selectAll("path."+Ge).data(Gt?gt:pt,dt);jt.exit().remove(),jt.enter().append("path").classed(Ge,1).classed("crisp",nt.crisp!==!1),jt.attr("transform",nt.transFn).attr("d",nt.path).each(function(Wt){return i.stroke(A.select(this),Wt.minor?Fe.minor.gridcolor:Fe.gridcolor||"#ddd")}).style("stroke-dasharray",function(Wt){return n.dashStyle(Wt.minor?Fe.minor.griddash:Fe.griddash,Wt.minor?Fe.minor.gridwidth:Fe.gridwidth)}).style("stroke-width",function(Wt){return(Wt.minor?Lt:Fe._gw)+"px"}).style("display",null),typeof nt.path=="function"&&jt.attr("d",nt.path)}}at(Fe,[U,D])}},J.drawZeroLine=function(Re,Fe,nt){nt=nt||nt;var Ge=Fe._id+"zl",ut=J.shouldShowZeroLine(Re,Fe,nt.counterAxis),pt=nt.layer.selectAll("path."+Ge).data(ut?[{x:0,id:Fe._id}]:[]);pt.exit().remove(),pt.enter().append("path").classed(Ge,1).classed("zl",1).classed("crisp",nt.crisp!==!1).each(function(){nt.layer.selectAll("path").sort(function(gt,ct){return ie(gt.id,ct.id)})}),pt.attr("transform",nt.transFn).attr("d",nt.path).call(i.stroke,Fe.zerolinecolor||i.defaultLine).style("stroke-width",n.crispRound(Re,Fe.zerolinewidth,Fe._gw||1)+"px").style("display",null),at(Fe,[R])},J.drawLabels=function(Re,Fe,nt){nt=nt||{};var Ge=Re._fullLayout,ut=Fe._id,pt=nt.cls||ut+"tick",gt=nt.vals.filter(function(In){return In.text}),ct=nt.labelFns,Tt=nt.secondary?0:Fe.tickangle,vt=(Fe._prevTickAngles||{})[pt],kt=nt.layer.selectAll("g."+pt).data(Fe.showticklabels?gt:[],dt),Lt=[];function Ct(In,Xn){In.each(function(Vn){var er=A.select(this),Wn=er.select(".text-math-group"),fr=ct.anchorFn(Vn,Xn),Jt=nt.transFn.call(er.node(),Vn)+(k(Xn)&&+Xn!=0?" rotate("+Xn+","+ct.xFn(Vn)+","+(ct.yFn(Vn)-Vn.fontSize/2)+")":""),en=s.lineCount(er),Mn=ee*Vn.fontSize,pn=ct.heightFn(Vn,k(Xn)?+Xn:0,(en-1)*Mn);if(pn&&(Jt+=p(0,pn)),Wn.empty()){var Cn=er.select("text");Cn.attr({transform:Jt,"text-anchor":fr}),Cn.style("opacity",1),Fe._adjustTickLabelsOverflow&&Fe._adjustTickLabelsOverflow()}else{var jn=n.bBox(Wn.node()).width*{end:-.5,start:.5}[fr];Wn.attr("transform",Jt+p(jn,0))}})}kt.enter().append("g").classed(pt,1).append("text").attr("text-anchor","middle").each(function(In){var Xn=A.select(this),Vn=Re._promises.length;Xn.call(s.positionText,ct.xFn(In),ct.yFn(In)).call(n.font,{family:In.font,size:In.fontSize,color:In.fontColor,weight:In.fontWeight,style:In.fontStyle,variant:In.fontVariant,textcase:In.fontTextcase,lineposition:In.fontLineposition,shadow:In.fontShadow}).text(In.text).call(s.convertToTspans,Re),Re._promises[Vn]?Lt.push(Re._promises.pop().then(function(){Ct(Xn,Tt)})):Ct(Xn,Tt)}),at(Fe,[W]),kt.exit().remove(),nt.repositionOnUpdate&&kt.each(function(In){A.select(this).select("text").call(s.positionText,ct.xFn(In),ct.yFn(In))}),Fe._adjustTickLabelsOverflow=function(){var In=Fe.ticklabeloverflow;if(In&&In!=="allow"){var Xn=In.indexOf("hide")!==-1,Vn=Fe._id.charAt(0)==="x",er=0,Wn=Vn?Re._fullLayout.width:Re._fullLayout.height;if(In.indexOf("domain")!==-1){var fr=b.simpleMap(Fe.range,Fe.r2l);er=Fe.l2p(fr[0])+Fe._offset,Wn=Fe.l2p(fr[1])+Fe._offset}var Jt=Math.min(er,Wn),en=Math.max(er,Wn),Mn=Fe.side,pn=1/0,Cn=-1/0;for(var jn in kt.each(function(dr){var Zt=A.select(this);if(Zt.select(".text-math-group").empty()){var dn=n.bBox(Zt.node()),St=0;Vn?(dn.right>en||dn.left<Jt)&&(St=1):(dn.bottom>en||dn.top+(Fe.tickangle?0:dr.fontSize/4)<Jt)&&(St=1);var Rt=Zt.select("text");St?Xn&&Rt.style("opacity",0):(Rt.style("opacity",1),pn=Mn==="bottom"||Mn==="right"?Math.min(pn,Vn?dn.top:dn.left):-1/0,Cn=Mn==="top"||Mn==="left"?Math.max(Cn,Vn?dn.bottom:dn.right):1/0)}}),Ge._plots){var Bn=Ge._plots[jn];if(Fe._id===Bn.xaxis._id||Fe._id===Bn.yaxis._id){var Yn=Vn?Bn.yaxis:Bn.xaxis;Yn&&(Yn["_visibleLabelMin_"+Fe._id]=pn,Yn["_visibleLabelMax_"+Fe._id]=Cn)}}}},Fe._hideCounterAxisInsideTickLabels=function(In){var Xn=Fe._id.charAt(0)==="x",Vn=[];for(var er in Ge._plots){var Wn=Ge._plots[er];Fe._id!==Wn.xaxis._id&&Fe._id!==Wn.yaxis._id||Vn.push(Xn?Wn.yaxis:Wn.xaxis)}Vn.forEach(function(fr,Jt){fr&&We(fr)&&(In||[R,D,U,N,W]).forEach(function(en){var Mn=en.K==="tick"&&en.L==="text"&&Fe.ticklabelmode==="period",pn=Ge._plots[Fe._mainSubplot];(en.K===R.K?pn.zerolinelayer.selectAll("."+Fe._id+"zl"):en.K===D.K?pn.minorGridlayer.selectAll("."+Fe._id):en.K===U.K?pn.gridlayer.selectAll("."+Fe._id):pn[Fe._id.charAt(0)+"axislayer"]).each(function(){var Cn=A.select(this);en.L&&(Cn=Cn.selectAll(en.L)),Cn.each(function(jn){var Bn=Fe.l2p(Mn?it(jn):jn.x)+Fe._offset,Yn=A.select(this);Bn<Fe["_visibleLabelMax_"+fr._id]&&Bn>Fe["_visibleLabelMin_"+fr._id]?Yn.style("display","none"):en.K!=="tick"||Jt||Yn.style("display",null)})})})})},Ct(kt,vt+1?vt:Tt);var Dt=null;Fe._selections&&(Fe._selections[pt]=kt);var Gt=[function(){return Lt.length&&Promise.all(Lt)}];Fe.automargin&&Ge._redrawFromAutoMarginCount&&vt===90?(Dt=vt,Gt.push(function(){Ct(kt,vt)})):Gt.push(function(){if(Ct(kt,Tt),gt.length&&Fe.autotickangles&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){Dt=Fe.autotickangles[0];var In,Xn=0,Vn=[],er=1;kt.each(function(mn){Xn=Math.max(Xn,mn.fontSize);var rn=Fe.l2p(mn.x),qt=Qe(this),Ht=n.bBox(qt.node());er=Math.max(er,s.lineCount(qt)),Vn.push({top:0,bottom:10,height:10,left:rn-Ht.width/2,right:rn+Ht.width/2+2,width:Ht.width+2})});var Wn=(Fe.tickson==="boundaries"||Fe.showdividers)&&!nt.secondary,fr=gt.length,Jt=Math.abs((gt[fr-1].x-gt[0].x)*Fe._m)/(fr-1),en=Wn?Jt/2:Jt,Mn=Wn?Fe.ticklen:1.25*Xn*er,pn=en/Math.sqrt(Math.pow(en,2)+Math.pow(Mn,2)),Cn=Fe.autotickangles.map(function(mn){return mn*Math.PI/180}),jn=Cn.find(function(mn){return Math.abs(Math.cos(mn))<=pn});jn===void 0&&(jn=Cn.reduce(function(mn,rn){return Math.abs(Math.cos(mn))<Math.abs(Math.cos(rn))?mn:rn},Cn[0]));var Bn=jn*(180/Math.PI);if(Wn){var Yn=2;for(Fe.ticks&&(Yn+=Fe.tickwidth/2),In=0;In<Vn.length;In++){var dr=gt[In].xbnd,Zt=Vn[In];if(dr[0]!==null&&Zt.left-Fe.l2p(dr[0])<Yn||dr[1]!==null&&Fe.l2p(dr[1])-Zt.right<Yn){Dt=Bn;break}}}else{var dn=Fe.ticklabelposition||"",St=function(mn){return dn.indexOf(mn)!==-1},Rt=St("top"),Xt=St("left"),ln=St("right"),un=St("bottom")||Xt||Rt||ln?(Fe.tickwidth||0)+6:0;for(In=0;In<Vn.length-1;In++)if(b.bBoxIntersect(Vn[In],Vn[In+1],un)){Dt=Bn;break}}Dt&&Ct(kt,Dt)}}),Fe._tickAngles&&Gt.push(function(){Fe._tickAngles[pt]=Dt===null?k(Tt)?Tt:0:Dt});var tn=function(){var In=0,Xn=0;return kt.each(function(Vn,er){var Wn,fr=Qe(this);fr.select(".text-math-group").empty()&&(Fe._vals[er]&&(Wn=Fe._vals[er].bb||n.bBox(fr.node()),Fe._vals[er].bb=Wn),In=Math.max(In,Wn.width),Xn=Math.max(Xn,Wn.height))}),{labelsMaxW:In,labelsMaxH:Xn}},jt=Fe._anchorAxis;if(jt&&(jt.autorange||jt.insiderange)&&We(Fe)&&!se(Ge,Fe._id)&&(Ge._insideTickLabelsUpdaterange||(Ge._insideTickLabelsUpdaterange={}),jt.autorange&&(Ge._insideTickLabelsUpdaterange[jt._name+".autorange"]=jt.autorange,Gt.push(tn)),jt.insiderange)){var Wt=tn(),Ft=Fe._id.charAt(0)==="y"?Wt.labelsMaxW:Wt.labelsMaxH;Ft+=6,Fe.ticklabelposition==="inside"&&(Ft+=Fe.ticklen||0);var Ln=Fe.side==="right"||Fe.side==="top"?1:-1,bn=Ln===1?1:0,hn=Ln===1?0:1,Kt=[];Kt[hn]=jt.range[hn];var sn=jt.range,Qt=jt.r2p(sn[bn]),cn=jt.r2p(sn[hn]),vn=Ge._insideTickLabelsUpdaterange[jt._name+".range"];if(vn){var xn=jt.r2p(vn[bn]),An=jt.r2p(vn[hn]),Sn=Ln*(Fe._id.charAt(0)==="y"?1:-1);Sn*Qt<Sn*xn&&(Qt=xn,Kt[bn]=sn[bn]=vn[bn]),Sn*cn>Sn*An&&(cn=An,Kt[hn]=sn[hn]=vn[hn])}var Tn=Math.abs(cn-Qt);Tn-Ft>0?Ft*=1+Ft/(Tn-=Ft):Ft=0,Fe._id.charAt(0)!=="y"&&(Ft=-Ft),Kt[bn]=jt.p2r(jt.r2p(sn[bn])+Ln*Ft),jt.autorange==="min"||jt.autorange==="max reversed"?(Kt[0]=null,jt._rangeInitial0=void 0,jt._rangeInitial1=void 0):jt.autorange!=="max"&&jt.autorange!=="min reversed"||(Kt[1]=null,jt._rangeInitial0=void 0,jt._rangeInitial1=void 0),Ge._insideTickLabelsUpdaterange[jt._name+".range"]=Kt}var Rn=b.syncOrAsync(Gt);return Rn&&Rn.then&&Re._promises.push(Rn),Rn},J.getPxPosition=function(Re,Fe){var nt,Ge=Re._fullLayout._size,ut=Fe._id.charAt(0),pt=Fe.side;return Fe.anchor!=="free"?nt=Fe._anchorAxis:ut==="x"?nt={_offset:Ge.t+(1-(Fe.position||0))*Ge.h,_length:0}:ut==="y"&&(nt={_offset:Ge.l+(Fe.position||0)*Ge.w+Fe._shift,_length:0}),pt==="top"||pt==="left"?nt._offset:pt==="bottom"||pt==="right"?nt._offset+nt._length:void 0},J.shouldShowZeroLine=function(Re,Fe,nt){var Ge=b.simpleMap(Fe.range,Fe.r2l);return Ge[0]*Ge[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===O)&&(ht(Fe,0)||!function(ut,pt,gt,ct){var Tt=gt._mainAxis;if(Tt){var vt=ut._fullLayout,kt=pt._id.charAt(0),Lt=J.counterLetter(pt._id),Ct=pt._offset+(Math.abs(ct[0])<Math.abs(ct[1])==(kt==="x")?0:pt._length),Dt=vt._plots[gt._mainSubplot];if(!(Dt.mainplotinfo||Dt).overlays.length)return Wt(gt);for(var Gt=J.list(ut,Lt),tn=0;tn<Gt.length;tn++){var jt=Gt[tn];if(jt._mainAxis===Tt&&Wt(jt))return!0}}function Wt(Ft){if(!Ft.showline||!Ft.linewidth)return!1;var Ln=Math.max((Ft.linewidth+pt.zerolinewidth)/2,1);function bn(sn){return typeof sn=="number"&&Math.abs(sn-Ct)<Ln}if(bn(Ft._mainLinePosition)||bn(Ft._mainMirrorPosition))return!0;var hn=Ft._linepositions||{};for(var Kt in hn)if(bn(hn[Kt][0])||bn(hn[Kt][1]))return!0}}(Re,Fe,nt,Ge)||function(ut,pt){for(var gt=ut._fullData,ct=pt._mainSubplot,Tt=pt._id.charAt(0),vt=0;vt<gt.length;vt++){var kt=gt[vt];if(kt.visible===!0&&kt.xaxis+kt.yaxis===ct&&(T.traceIs(kt,"bar-like")&&kt.orientation==={x:"h",y:"v"}[Tt]||kt.fill&&kt.fill.charAt(kt.fill.length-1)===Tt))return!0}return!1}(Re,Fe))},J.clipEnds=function(Re,Fe){return Fe.filter(function(nt){return ht(Re,nt.x)})},J.allowAutoMargin=function(Re){for(var Fe=J.list(Re,"",!0),nt=0;nt<Fe.length;nt++){var Ge=Fe[nt];Ge.automargin&&(o.allowAutoMargin(Re,Je(Ge)),Ge.mirror&&o.allowAutoMargin(Re,wt(Ge))),T.getComponentMethod("rangeslider","isVisible")(Ge)&&o.allowAutoMargin(Re,Pt(Ge))}},J.swap=function(Re,Fe){for(var nt=function(ut,pt){var gt,ct,Tt=[];for(gt=0;gt<pt.length;gt++){var vt=[],kt=ut._fullData[pt[gt]].xaxis,Lt=ut._fullData[pt[gt]].yaxis;if(kt&&Lt){for(ct=0;ct<Tt.length;ct++)Tt[ct].x.indexOf(kt)===-1&&Tt[ct].y.indexOf(Lt)===-1||vt.push(ct);if(vt.length){var Ct,Dt=Tt[vt[0]];if(vt.length>1)for(ct=1;ct<vt.length;ct++)Ct=Tt[vt[ct]],It(Dt.x,Ct.x),It(Dt.y,Ct.y);It(Dt.x,[kt]),It(Dt.y,[Lt])}else Tt.push({x:[kt],y:[Lt]})}}return Tt}(Re,Fe),Ge=0;Ge<nt.length;Ge++)At(Re,nt[Ge].x,nt[Ge].y)}},52976:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(39032).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,p=k.cleanNumber,s=Math.round;function t(n,r){return r?A(n):typeof n=="number"}function i(n){return Math.max(1,(n-1)/1e3)}X.exports=function(n,r,a){var l=n,c=a.noMultiCategory;if(T(l)&&!l.length)return"-";if(!c&&function(m){return T(m[0])&&T(m[1])}(l))return"multicategory";if(c&&Array.isArray(l[0])){for(var h=[],u=0;u<l.length;u++)if(T(l[u]))for(var x=0;x<l[u].length;x++)h.push(l[u][x]);l=h}if(function(m,g){for(var y=m.length,v=i(y),_=0,f=0,S={},w=0;w<y;w+=v){var E=m[s(w)],P=String(E);S[P]||(S[P]=1,b(E,g)&&_++,A(E)&&f++)}return _>2*f}(l,r))return"date";var d=a.autotypenumbers!=="strict";return function(m,g){for(var y=m.length,v=i(y),_=0,f=0,S={},w=0;w<y;w+=v){var E=m[s(w)],P=String(E);if(!S[P]){S[P]=1;var C=typeof E;C==="boolean"?f++:(g?p(E)!==o:C==="number")?_++:C==="string"&&f++}}return f>2*_}(l,d)?"category":function(m,g){for(var y=m.length,v=0;v<y;v++)if(t(m[v],g))return!0;return!1}(l,d)?"linear":"-"}},28336:function(X,I,e){"use strict";var A=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(51272),p=e(94724),s=e(26332),t=e(25404),i=e(95936),n=e(42568),r=e(22416),a=e(42136),l=e(96312),c=e(78344),h=e(33816).WEEKDAY_PATTERN,u=e(33816).HOUR_PATTERN;function x(g,y,v){function _(R,U){return o.coerce(g,y,p.rangebreaks,R,U)}if(_("enabled")){var f=_("bounds");if(f&&f.length>=2){var S,w,E="";if(f.length===2){for(S=0;S<2;S++)if(w=m(f[S])){E=h;break}}var P=_("pattern",E);if(P===h)for(S=0;S<2;S++)(w=m(f[S]))&&(y.bounds[S]=f[S]=w-1);if(P)for(S=0;S<2;S++)switch(w=f[S],P){case h:if(!A(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(y.enabled=!1);y.bounds[S]=f[S]=w;break;case u:if(!A(w)||(w=+w)<0||w>24)return void(y.enabled=!1);y.bounds[S]=f[S]=w}if(v.autorange===!1){var C=v.range;if(C[0]<C[1]){if(f[0]<C[0]&&f[1]>C[1])return void(y.enabled=!1)}else if(f[0]>C[0]&&f[1]<C[1])return void(y.enabled=!1)}}else{var O=_("values");if(!O||!O.length)return void(y.enabled=!1);_("dvalue")}}}X.exports=function(g,y,v,_,f){var S,w=_.letter,E=_.font||{},P=_.splomStash||{},C=v("visible",!_.visibleDflt),O=y._template||{},R=y.type||O.type||"-";R==="date"&&(k.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",_.calendar),_.noTicklabelmode||(S=v("ticklabelmode")));var U="";_.noTicklabelposition&&R!=="multicategory"||(U=o.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||v("ticklabeloverflow",U.indexOf("inside")!==-1?"hide past domain":R==="category"||R==="multicategory"?"allow":"hide past div"),c(y,f),l(g,y,v,_),r(g,y,v,_),R==="category"||_.noHover||v("hoverformat");var D=v("color"),N=D!==p.color.dflt?D:E.color,W=P.label||f._dfltTitle[w];if(n(g,y,v,R,_),!C)return y;v("title.text",W),o.coerceFont(v,"title.font",E,{overrideDflt:{size:o.bigFont(E.size),color:N}}),s(g,y,v,R);var F=_.hasMinor;if(F&&(T.newContainer(y,"minor"),s(g,y,v,R,{isMinor:!0})),i(g,y,v,R,_),t(g,y,v,_),F){var j=_.isMinor;_.isMinor=!0,t(g,y,v,_),_.isMinor=j}a(g,y,v,{dfltColor:D,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:F,attributes:p}),!F||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&v("mirror");var q,te=R==="multicategory";if(_.noTickson||R!=="category"&&!te||!y.ticks&&!y.showgrid||(te&&(q="boundaries"),v("tickson",q)==="boundaries"&&delete y.ticklabelposition),te&&v("showdividers")&&(v("dividercolor"),v("dividerwidth")),R==="date")if(b(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),y.rangebreaks.length){for(var ee=0;ee<y.rangebreaks.length;ee++)if(y.rangebreaks[ee].pattern===h){y._hasDayOfWeekBreaks=!0;break}if(c(y,f),f._has("scattergl")||f._has("splom"))for(var Q=0;Q<_.data.length;Q++){var J=_.data[Q];J.type!=="scattergl"&&J.type!=="splom"||(J.visible=!1,o.warn(J.type+" traces do not work on axes with rangebreaks. Setting trace "+J.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var d={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function m(g){if(typeof g=="string")return d[g.substr(0,3).toLowerCase()]}},29736:function(X,I,e){"use strict";var A=e(26880),k=A.FORMAT_LINK,o=A.DATE_FORMAT_LINK;function T(p,s){return["Sets the "+p+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(p,s){return T(p,s)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}X.exports={axisHoverFormat:function(p,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:b)("hover text",p)+["By default the values are formatted using "+(s?"generic number format":"`"+p+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},79811:function(X,I,e){"use strict";var A=e(24040),k=e(33816);function o(T,b){if(b&&b.length){for(var p=0;p<b.length;p++)if(b[p][T])return!0}return!1}I.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return b==="1"&&(b=""),T.charAt(0)+"axis"+b}},I.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return b==="1"&&(b=""),T.charAt(0)+b}},I.cleanId=function(T,b,p){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!s||p)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&p?" domain":"")}},I.list=function(T,b,p){var s=T._fullLayout;if(!s)return[];var t,i=I.listIds(T,b),n=new Array(i.length);for(t=0;t<i.length;t++){var r=i[t];n[t]=s[r.charAt(0)+"axis"+r.substr(1)]}if(!p){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var l=s[a[t]];b?n.push(l[b+"axis"]):n.push(l.xaxis,l.yaxis,l.zaxis)}}return n},I.listIds=function(T,b){var p=T._fullLayout;if(!p)return[];var s=p._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},I.getFromId=function(T,b,p){var s=T._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),p==="x"?b=b.replace(/y[0-9]*/,""):p==="y"&&(b=b.replace(/x[0-9]*/,"")),s[I.id2name(b)]},I.getFromTrace=function(T,b,p){var s=T._fullLayout,t=null;if(A.traceIs(b,"gl3d")){var i=b.scene;i.substr(0,5)==="scene"&&(t=s[i][p+"axis"])}else t=I.getFromId(T,b[p+"axis"]||p);return t},I.idSort=function(T,b){var p=T.charAt(0),s=b.charAt(0);return p!==s?p>s?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},I.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},I.isLinked=function(T,b){return o(b,T._axisMatchGroups)||o(b,T._axisConstraintGroups)}},22416:function(X,I,e){"use strict";var A=e(38116).isTypedArraySpec;X.exports=function(k,o,T,b){if(o.type==="category"){var p,s=k.categoryarray,t=Array.isArray(s)&&s.length>0||A(s);t&&(p="array");var i,n=T("categoryorder",p);n==="array"&&(i=T("categoryarray")),t||n!=="array"||(n=o.categoryorder="trace"),n==="trace"?o._initialCategories=[]:n==="array"?o._initialCategories=i.slice():(i=function(r,a){var l,c,h,u=a.dataAttr||r._id.charAt(0),x={};if(a.axData)l=a.axData;else for(l=[],c=0;c<a.data.length;c++){var d=a.data[c];d[u+"axis"]===r._id&&l.push(d)}for(c=0;c<l.length;c++){var m=l[c][u];for(h=0;h<m.length;h++){var g=m[h];g!=null&&(x[g]=1)}}return Object.keys(x)}(o,b).sort(),n==="category ascending"?o._initialCategories=i:n==="category descending"&&(o._initialCategories=i.reverse()))}}},98728:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(39032),T=o.ONEDAY,b=o.ONEWEEK;I.dtick=function(p,s){var t=s==="log",i=s==="date",n=s==="category",r=i?T:1;if(!p)return r;if(A(p))return(p=Number(p))<=0?r:n?Math.max(1,Math.round(p)):i?Math.max(.1,p):p;if(typeof p!="string"||!i&&!t)return r;var a=p.charAt(0),l=p.substr(1);return(l=A(l)?Number(l):0)<=0||!(i&&a==="M"&&l===Math.round(l)||t&&a==="L"||t&&a==="D"&&(l===1||l===2))?r:p},I.tick0=function(p,s,t,i){return s==="date"?k.cleanDate(p,k.dateTick0(t,i%b==0?1:0)):i!=="D1"&&i!=="D2"?A(p)?Number(p):0:void 0}},33816:function(X,I,e){"use strict";var A=e(53756).counter;X.exports={idRegex:{x:A("x","( domain)?"),y:A("y","( domain)?")},attrRegex:A("[xy]axis"),xAxisMatch:A("xaxis"),yAxisMatch:A("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(X,I,e){"use strict";var A=e(3400),k=e(19280),o=e(79811).id2name,T=e(94724),b=e(21160),p=e(78344),s=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(u,x,d){var m=d.axIds,g=d.layoutOut,y=d.hasImage,v=g._axisConstraintGroups,_=g._axisMatchGroups,f=x._id,S=f.charAt(0),w=((g._splomAxes||{})[S]||{})[f]||{},E=x._id,P=E.charAt(0)==="x";function C(K,Y){return A.coerce(u,x,T,K,Y)}x._matchGroup=null,x._constraintGroup=null,C("constrain",y?"domain":"range"),A.coerce(u,x,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var O,R,U=x.type,D=[];for(O=0;O<m.length;O++)(R=m[O])!==E&&g[o(R)].type===U&&D.push(R);var N=r(v,E);if(N){var W=[];for(O=0;O<D.length;O++)N[R=D[O]]||W.push(R);D=W}var F,j,q=D.length;q&&(u.matches||w.matches)&&(F=A.coerce(u,x,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(w.matches)!==-1?w.matches:void 0}},"matches"));var te=y&&!P?x.anchor:void 0;if(q&&!F&&(u.scaleanchor||te)&&(j=A.coerce(u,x,{scaleanchor:{valType:"enumerated",values:D.concat([!1])}},"scaleanchor",te)),F){x._matchGroup=a(_,E,F,1);var ee=g[o(F)],Q=n(g,x)/n(g,ee);P!==(F.charAt(0)==="x")&&(Q=(P?"x":"y")+Q),a(v,E,F,Q)}else u.matches&&m.indexOf(u.matches)!==-1&&A.warn("ignored "+x._name+'.matches: "'+u.matches+'" to avoid an infinite loop');if(j){var J=C("scaleratio");J||(J=x.scaleratio=1),a(v,E,j,J)}else u.scaleanchor&&m.indexOf(u.scaleanchor)!==-1&&A.warn("ignored "+x._name+'.scaleanchor: "'+u.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(u,x){var d=x.domain;return d||(d=u[o(x.overlaying)].domain),d[1]-d[0]}function r(u,x){for(var d=0;d<u.length;d++)if(u[d][x])return u[d];return null}function a(u,x,d,m){var g,y,v,_,f,S=r(u,x);S===null?((S={})[x]=1,f=u.length,u.push(S)):f=u.indexOf(S);var w=Object.keys(S);for(g=0;g<u.length;g++)if(v=u[g],g!==f&&v[d]){var E=v[d];for(y=0;y<w.length;y++)v[_=w[y]]=l(E,l(m,S[_]));return void u.splice(f,1)}if(m!==1)for(y=0;y<w.length;y++){var P=w[y];S[P]=l(m,S[P])}S[d]=1}function l(u,x){var d,m,g="",y="";typeof u=="string"&&(d=(g=u.match(/^[xy]*/)[0]).length,u=+u.substr(d)),typeof x=="string"&&(m=(y=x.match(/^[xy]*/)[0]).length,x=+x.substr(m));var v=u*x;return d||m?d&&m&&g.charAt(0)!==y.charAt(0)?d===m?v:(d>m?g.substr(m):y.substr(d))+v:g+y+u*x:v}function c(u,x){for(var d=x._size,m=d.h/d.w,g={},y=Object.keys(u),v=0;v<y.length;v++){var _=y[v],f=u[_];if(typeof f=="string"){var S=f.match(/^[xy]*/)[0],w=S.length;f=+f.substr(w);for(var E=S.charAt(0)==="y"?m:1/m,P=0;P<w;P++)f*=E}g[_]=f}return g}function h(u,x){var d=u._inputDomain,m=t[u.constraintoward],g=d[0]+(d[1]-d[0])*m;u.domain=u._input.domain=[g+(d[0]-g)/x,g+(d[1]-g)/x],u.setScale()}I.handleDefaults=function(u,x,d){var m,g,y,v,_,f,S,w,E=d.axIds,P=d.axHasImage,C=x._axisConstraintGroups=[],O=x._axisMatchGroups=[];for(m=0;m<E.length;m++)i(_=u[v=o(E[m])],f=x[v],{axIds:E,layoutOut:x,hasImage:P[v]});function R(ee,Q){for(m=0;m<ee.length;m++)for(y in g=ee[m])x[o(y)][Q]=g}for(R(O,"_matchGroup"),m=0;m<C.length;m++)for(y in g=C[m])if((f=x[o(y)]).fixedrange){for(var U in g){var D=o(U);(u[D]||{}).fixedrange===!1&&A.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),x[D].fixedrange=!0}break}for(m=0;m<C.length;){for(y in g=C[m]){(f=x[o(y)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(g).length&&(C.splice(m,1),m--);break}m++}R(C,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,F=!1;function j(){w=f[S],S==="rangebreaks"&&(F=f._hasDayOfWeekBreaks)}for(m=0;m<O.length;m++){g=O[m];for(var q=0;q<N.length;q++){var te;for(y in S=N[q],w=null,g)if(_=u[v=o(y)],f=x[v],S in f){if(!f.matches&&(te=f,S in _)){j();break}w===null&&S in _&&j()}if(S==="range"&&w&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(W=!0),S==="autorange"&&w===null&&W&&(w=!1),w===null&&S in te&&(w=te[S]),w!==null)for(y in g)(f=x[o(y)])[S]=S==="range"?w.slice():w,S==="rangebreaks"&&(f._hasDayOfWeekBreaks=F,p(f,x))}}},I.enforce=function(u){var x,d,m,g,y,v,_,f,S=u._fullLayout,w=S._axisConstraintGroups||[];for(x=0;x<w.length;x++){m=c(w[x],S);var E=Object.keys(m),P=1/0,C=0,O=1/0,R={},U={},D=!1;for(d=0;d<E.length;d++)U[g=E[d]]=y=S[o(g)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),R[g]=v=Math.abs(y._m)/m[g],P=Math.min(P,v),y.constrain!=="domain"&&y._constraintShrinkable||(O=Math.min(O,v)),delete y._constraintShrinkable,C=Math.max(C,v),y.constrain==="domain"&&(D=!0);if(!(P>s*C)||D){for(d=0;d<E.length;d++)if(v=R[g=E[d]],_=(y=U[g]).constrain,v!==O||_==="domain")if(f=v/O,_==="range")b(y,f);else{var N=y._inputDomain,W=(y.domain[1]-y.domain[0])/(N[1]-N[0]),F=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if((f/=W)*F<1){y.domain=y._input.domain=N.slice(),b(y,f);continue}if(F<1&&(y.range=y._input.range=y._inputRange.slice(),f*=F),y.autorange){var j=y.r2l(y.range[0]),q=y.r2l(y.range[1]),te=(j+q)/2,ee=te,Q=te,J=Math.abs(q-te),K=te-J*f*1.0001,Y=te+J*f*1.0001,ie=k.makePadFn(S,y,0),se=k.makePadFn(S,y,1);h(y,f);var ae,ue,ve=Math.abs(y._m),ye=k.concatExtremes(u,y),de=ye.min,pe=ye.max;for(ue=0;ue<de.length;ue++)(ae=de[ue].val-ie(de[ue])/ve)>K&&ae<ee&&(ee=ae);for(ue=0;ue<pe.length;ue++)(ae=pe[ue].val+se(pe[ue])/ve)<Y&&ae>Q&&(Q=ae);f/=(Q-ee)/(2*J),ee=y.l2r(ee),Q=y.l2r(Q),y.range=y._input.range=j<q?[ee,Q]:[Q,ee]}h(y,f)}}}},I.getAxisGroup=function(u,x){for(var d=u._axisMatchGroups,m=0;m<d.length;m++)if(d[m][x])return"g"+m;return x},I.clean=function(u,x){if(x._inputDomain){for(var d=!1,m=x._id,g=u._fullLayout._axisConstraintGroups,y=0;y<g.length;y++)if(g[y][m]){d=!0;break}d&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},51184:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=k.numberFormat,T=e(49760),b=e(89184),p=e(24040),s=k.strTranslate,t=e(72736),i=e(76308),n=e(43616),r=e(93024),a=e(54460),l=e(93972),c=e(86476),h=e(72760),u=h.selectingOrDrawing,x=h.freeMode,d=e(84284).FROM_TL,m=e(73696),g=e(39172).redrawReglTraces,y=e(7316),v=e(79811).getFromId,_=e(22676).prepSelect,f=e(22676).clearOutline,S=e(22676).selectOnClick,w=e(21160),E=e(33816),P=E.MINDRAG,C=E.MINZOOM,O=!0;function R(ae,ue,ve,ye){var de=k.ensureSingle(ae.draglayer,ue,ve,function(pe){pe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return de.call(l,ye),de.node()}function U(ae,ue,ve,ye,de,pe,ge){var ke=R(ae,"rect",ue,ve);return A.select(ke).call(n.setRect,ye,de,pe,ge),ke}function D(ae,ue){for(var ve=0;ve<ae.length;ve++)if(!ae[ve].fixedrange)return ue;return""}function N(ae,ue,ve,ye,de){for(var pe=0;pe<ae.length;pe++){var ge=ae[pe];if(!ge.fixedrange)if(ge.rangebreaks){var ke=ge._id.charAt(0)==="y",Ee=ke?1-ue:ue,me=ke?1-ve:ve;ye[ge._name+".range[0]"]=ge.l2r(ge.p2l(Ee*ge._length)),ye[ge._name+".range[1]"]=ge.l2r(ge.p2l(me*ge._length))}else{var oe=ge._rl[0],re=ge._rl[1]-oe;ye[ge._name+".range[0]"]=ge.l2r(oe+re*ue),ye[ge._name+".range[1]"]=ge.l2r(oe+re*ve)}}if(de&&de.length){var fe=(ue+(1-ve))/2;N(de,fe,1-fe,ye,[])}}function W(ae,ue){for(var ve=0;ve<ae.length;ve++){var ye=ae[ve];if(!ye.fixedrange){if(ye.rangebreaks){var de=ye._length,pe=(ye.p2l(0+ue)-ye.p2l(0)+(ye.p2l(de+ue)-ye.p2l(de)))/2;ye.range=[ye.l2r(ye._rl[0]-pe),ye.l2r(ye._rl[1]-pe)]}else ye.range=[ye.l2r(ye._rl[0]-ue/ye._m),ye.l2r(ye._rl[1]-ue/ye._m)];ye.limitRange&&ye.limitRange()}}}function F(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function j(ae,ue,ve,ye,de){return ae.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(ve,ye)).attr("d",de+"Z")}function q(ae,ue,ve){return ae.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ue,ve)).attr("d","M0,0Z")}function te(ae,ue,ve,ye,de,pe){ae.attr("d",ye+"M"+ve.l+","+ve.t+"v"+ve.h+"h"+ve.w+"v-"+ve.h+"h-"+ve.w+"Z"),ee(ae,ue,de,pe)}function ee(ae,ue,ve,ye){ve||(ae.transition().style("fill",ye>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function Q(ae){A.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function J(ae){O&&ae.data&&ae._context.showTips&&(k.notifier(k._(ae,"Double-click to zoom back out"),"long"),O=!1)}function K(ae){var ue=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,C)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function Y(ae,ue,ve,ye,de){for(var pe,ge,ke,Ee,me=!1,oe={},re={},fe=(de||{}).xaHash,Se=(de||{}).yaHash,be=0;be<ue.length;be++){var we=ue[be];for(pe in ve)if(we[pe]){for(ke in we)de&&(fe[ke]||Se[ke])||(ke.charAt(0)==="x"?ve:ye)[ke]||(oe[ke]=pe);for(ge in ye)de&&(fe[ge]||Se[ge])||!we[ge]||(me=!0)}for(ge in ye)if(we[ge])for(Ee in we)de&&(fe[Ee]||Se[Ee])||(Ee.charAt(0)==="x"?ve:ye)[Ee]||(re[Ee]=ge)}me&&(k.extendFlat(oe,re),re={});var Me={},Ie=[];for(ke in oe){var Oe=v(ae,ke);Ie.push(Oe),Me[Oe._id]=Oe}var he={},_e=[];for(Ee in re){var Ae=v(ae,Ee);_e.push(Ae),he[Ae._id]=Ae}return{xaHash:Me,yaHash:he,xaxes:Ie,yaxes:_e,xLinks:oe,yLinks:re,isSubplotConstrained:me}}function ie(ae,ue){if(b){var ve=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(ve,ae._onwheel),ae._onwheel=ue,ae.addEventListener(ve,ue,{passive:!1})}else ae.onwheel!==void 0?ae.onwheel=ue:ae.onmousewheel!==void 0?ae.onmousewheel=ue:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ue,{passive:!1}))}function se(ae){var ue=[];for(var ve in ae)ue.push(ae[ve]);return ue}X.exports={makeDragBox:function(ae,ue,ve,ye,de,pe,ge,ke){var Ee,me,oe,re,fe,Se,be,we,Me,Ie,Oe,he,_e,Ae,De,Le,Be,Ve,Ze,rt,it,dt,mt,ht=ae._fullLayout._zoomlayer,Qe=ge+ke==="nsew",Je=(ge+ke).length===1;function wt(){if(Ee=ue.xaxis,me=ue.yaxis,Me=Ee._length,Ie=me._length,be=Ee._offset,we=me._offset,(oe={})[Ee._id]=Ee,(re={})[me._id]=me,ge&&ke)for(var Kt=ue.overlays,sn=0;sn<Kt.length;sn++){var Qt=Kt[sn].xaxis;oe[Qt._id]=Qt;var cn=Kt[sn].yaxis;re[cn._id]=cn}fe=se(oe),Se=se(re),_e=D(fe,ke),Ae=D(Se,ge),De=!Ae&&!_e,he=Y(ae,ae._fullLayout._axisMatchGroups,oe,re);var vn=(Oe=Y(ae,ae._fullLayout._axisConstraintGroups,oe,re,he)).isSubplotConstrained||he.isSubplotConstrained;Le=ke||vn,Be=ge||vn;var xn=ae._fullLayout;Ve=xn._has("scattergl"),Ze=xn._has("splom"),rt=xn._has("svg")}ve+=ue.yaxis._shift,wt();var Pt=function(Kt,sn,Qt){return Kt?Kt==="nsew"?Qt?"":sn==="pan"?"move":"crosshair":Kt.toLowerCase()+"-resize":"pointer"}(Ae+_e,ae._fullLayout.dragmode,Qe),It=U(ue,ge+ke+"drag",Pt,ve,ye,de,pe);if(De&&!Qe)return It.onmousedown=null,It.style.pointerEvents="none",It;var At,qe,Ye,Ne,We,at,tt,Re,Fe,nt,Ge={element:It,gd:ae,plotinfo:ue};function ut(){Ge.plotinfo.selection=!1,f(ae)}function pt(Kt,sn){var Qt=Ge.gd;if(Qt._fullLayout._activeShapeIndex>=0)Qt._fullLayout._deactivateShape(Qt);else{var cn=Qt._fullLayout.clickmode;if(Q(Qt),Kt!==2||Je||jt(),Qe)cn.indexOf("select")>-1&&S(sn,Qt,fe,Se,ue.id,Ge),cn.indexOf("event")>-1&&r.click(Qt,sn,ue.id);else if(Kt===1&&Je){var vn=ge?me:Ee,xn=ge==="s"||ke==="w"?0:1,An=vn._name+".range["+xn+"]",Sn=function(In,Xn){var Vn,er=In.range[Xn],Wn=Math.abs(er-In.range[1-Xn]);return In.type==="date"?er:In.type==="log"?(Vn=Math.ceil(Math.max(0,-Math.log(Wn)/Math.LN10))+3,o("."+Vn+"g")(Math.pow(10,er))):(Vn=Math.floor(Math.log(Math.abs(er))/Math.LN10)-Math.floor(Math.log(Wn)/Math.LN10)+4,o("."+String(Vn)+"g")(er))}(vn,xn),Tn="left",Rn="middle";if(vn.fixedrange)return;ge?(Rn=ge==="n"?"top":"bottom",vn.side==="right"&&(Tn="right")):ke==="e"&&(Tn="right"),Qt._context.showAxisRangeEntryBoxes&&A.select(It).call(t.makeEditable,{gd:Qt,immediate:!0,background:Qt._fullLayout.paper_bgcolor,text:String(Sn),fill:vn.tickfont?vn.tickfont.color:"#444",horizontalAlign:Tn,verticalAlign:Rn}).on("edit",function(In){var Xn=vn.d2r(In);Xn!==void 0&&p.call("_guiRelayout",Qt,An,Xn)})}}}function gt(Kt,sn){if(ae._transitioningWithDuration)return!1;var Qt=Math.max(0,Math.min(Me,dt*Kt+At)),cn=Math.max(0,Math.min(Ie,mt*sn+qe)),vn=Math.abs(Qt-At),xn=Math.abs(cn-qe);function An(){tt="",Ye.r=Ye.l,Ye.t=Ye.b,Fe.attr("d","M0,0Z")}if(Ye.l=Math.min(At,Qt),Ye.r=Math.max(At,Qt),Ye.t=Math.min(qe,cn),Ye.b=Math.max(qe,cn),Oe.isSubplotConstrained)vn>C||xn>C?(tt="xy",vn/Me>xn/Ie?(xn=vn*Ie/Me,qe>cn?Ye.t=qe-xn:Ye.b=qe+xn):(vn=xn*Me/Ie,At>Qt?Ye.l=At-vn:Ye.r=At+vn),Fe.attr("d",K(Ye))):An();else if(he.isSubplotConstrained)if(vn>C||xn>C){tt="xy";var Sn=Math.min(Ye.l/Me,(Ie-Ye.b)/Ie),Tn=Math.max(Ye.r/Me,(Ie-Ye.t)/Ie);Ye.l=Sn*Me,Ye.r=Tn*Me,Ye.b=(1-Sn)*Ie,Ye.t=(1-Tn)*Ie,Fe.attr("d",K(Ye))}else An();else!Ae||xn<Math.min(Math.max(.6*vn,P),C)?vn<P||!_e?An():(Ye.t=0,Ye.b=Ie,tt="x",Fe.attr("d",function(Rn,In){return"M"+(Rn.l-.5)+","+(In-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(Rn.r+.5)+","+(In-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(Ye,qe))):!_e||vn<Math.min(.6*xn,C)?(Ye.l=0,Ye.r=Me,tt="y",Fe.attr("d",function(Rn,In){return"M"+(In-C-.5)+","+(Rn.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(In-C-.5)+","+(Rn.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Ye,At))):(tt="xy",Fe.attr("d",K(Ye)));Ye.w=Ye.r-Ye.l,Ye.h=Ye.b-Ye.t,tt&&(nt=!0),ae._dragged=nt,te(Re,Fe,Ye,We,at,Ne),ct(),ae.emit("plotly_relayouting",it),at=!0}function ct(){it={},tt!=="xy"&&tt!=="x"||(N(fe,Ye.l/Me,Ye.r/Me,it,Oe.xaxes),Gt("x",it)),tt!=="xy"&&tt!=="y"||(N(Se,(Ie-Ye.b)/Ie,(Ie-Ye.t)/Ie,it,Oe.yaxes),Gt("y",it))}function Tt(){ct(),Q(ae),Wt(),J(ae)}Ge.prepFn=function(Kt,sn,Qt){var cn=Ge.dragmode,vn=ae._fullLayout.dragmode;vn!==cn&&(Ge.dragmode=vn),wt(),dt=ae._fullLayout._invScaleX,mt=ae._fullLayout._invScaleY,De||(Qe?Kt.shiftKey?vn==="pan"?vn="zoom":u(vn)||(vn="pan"):Kt.ctrlKey&&(vn="pan"):vn="pan"),x(vn)?Ge.minDrag=1:Ge.minDrag=void 0,u(vn)?(Ge.xaxes=fe,Ge.yaxes=Se,_(Kt,sn,Qt,Ge,vn)):(Ge.clickFn=pt,u(cn)&&ut(),De||(vn==="zoom"?(Ge.moveFn=gt,Ge.doneFn=Tt,Ge.minDrag=1,function(xn,An,Sn){var Tn=It.getBoundingClientRect();At=An-Tn.left,qe=Sn-Tn.top,ae._fullLayout._calcInverseTransform(ae);var Rn=k.apply3DTransform(ae._fullLayout._invTransform)(At,qe);At=Rn[0],qe=Rn[1],Ye={l:At,r:At,w:0,t:qe,b:qe,h:0},Ne=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:T(ae._fullLayout.plot_bgcolor).getLuminance(),at=!1,tt="xy",nt=!1,Re=j(ht,Ne,be,we,We="M0,0H"+Me+"V"+Ie+"H0V0"),Fe=q(ht,be,we)}(0,sn,Qt)):vn==="pan"&&(Ge.moveFn=Dt,Ge.doneFn=Wt))),ae._fullLayout._redrag=function(){var xn=ae._dragdata;if(xn&&xn.element===It){var An=ae._fullLayout.dragmode;u(An)||(wt(),Ft([0,0,Me,Ie]),Ge.moveFn(xn.dx,xn.dy))}}},c.init(Ge);var vt=[0,0,Me,Ie],kt=null,Lt=E.REDRAWDELAY,Ct=ue.mainplot?ae._fullLayout._plots[ue.mainplot]:ue;function Dt(Kt,sn){if(Kt*=dt,sn*=mt,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,_e==="ew"||Ae==="ns"){var Qt=_e?-Kt:0,cn=Ae?-sn:0;if(he.isSubplotConstrained){if(_e&&Ae){var vn=(Kt/Me-sn/Ie)/2;Qt=-(Kt=vn*Me),cn=-(sn=-vn*Ie)}Ae?Qt=-cn*Me/Ie:cn=-Qt*Ie/Me}return _e&&(W(fe,Kt),Gt("x")),Ae&&(W(Se,sn),Gt("y")),Ft([Qt,cn,Me,Ie]),tn(),void ae.emit("plotly_relayouting",it)}var xn,An,Sn=_e==="w"==(Ae==="n")?1:-1;if(_e&&Ae&&(Oe.isSubplotConstrained||he.isSubplotConstrained)){var Tn=(Kt/Me+Sn*sn/Ie)/2;Kt=Tn*Me,sn=Sn*Tn*Ie}if(_e==="w"?Kt=Vn(fe,0,Kt):_e==="e"?Kt=Vn(fe,1,-Kt):_e||(Kt=0),Ae==="n"?sn=Vn(Se,1,sn):Ae==="s"?sn=Vn(Se,0,-sn):Ae||(sn=0),xn=_e==="w"?Kt:0,An=Ae==="n"?sn:0,Oe.isSubplotConstrained&&!he.isSubplotConstrained||he.isSubplotConstrained&&_e&&Ae&&Sn>0){var Rn;if(he.isSubplotConstrained||!_e&&Ae.length===1){for(Rn=0;Rn<fe.length;Rn++)fe[Rn].range=fe[Rn]._r.slice(),w(fe[Rn],1-sn/Ie);xn=(Kt=sn*Me/Ie)/2}if(he.isSubplotConstrained||!Ae&&_e.length===1){for(Rn=0;Rn<Se.length;Rn++)Se[Rn].range=Se[Rn]._r.slice(),w(Se[Rn],1-Kt/Me);An=(sn=Kt*Ie/Me)/2}}he.isSubplotConstrained&&Ae||Gt("x"),he.isSubplotConstrained&&_e||Gt("y");var In=Me-Kt,Xn=Ie-sn;!he.isSubplotConstrained||_e&&Ae||(_e?(An=xn?0:Kt*Ie/Me,Xn=In*Ie/Me):(xn=An?0:sn*Me/Ie,In=Xn*Me/Ie)),Ft([xn,An,In,Xn]),tn(),ae.emit("plotly_relayouting",it)}function Vn(er,Wn,fr){for(var Jt,en,Mn=1-Wn,pn=0;pn<er.length;pn++){var Cn=er[pn];if(!Cn.fixedrange){Jt=Cn,en=Cn._rl[Mn]+(Cn._rl[Wn]-Cn._rl[Mn])/F(fr/Cn._length);var jn=Cn.l2r(en);jn!==!1&&jn!==void 0&&(Cn.range[Wn]=jn)}}return Jt._length*(Jt._rl[Wn]-en)/(Jt._rl[Wn]-Jt._rl[Mn])}}function Gt(Kt,sn){for(var Qt=he.isSubplotConstrained?{x:Se,y:fe}[Kt]:he[Kt+"axes"],cn=he.isSubplotConstrained?{x:fe,y:Se}[Kt]:[],vn=0;vn<Qt.length;vn++){var xn=Qt[vn],An=xn._id,Sn=he.xLinks[An]||he.yLinks[An],Tn=cn[0]||oe[Sn]||re[Sn];Tn&&(sn?(sn[xn._name+".range[0]"]=sn[Tn._name+".range[0]"],sn[xn._name+".range[1]"]=sn[Tn._name+".range[1]"]):xn.range=Tn.range.slice())}}function tn(){var Kt,sn=[];function Qt(An){for(Kt=0;Kt<An.length;Kt++)An[Kt].fixedrange||sn.push(An[Kt]._id)}function cn(An,Sn){for(Kt=0;Kt<An.length;Kt++){var Tn=An[Kt],Rn=Tn[Sn];Tn.fixedrange||Rn.tickmode!=="sync"||sn.push(Rn._id)}}for(Le&&(Qt(fe),Qt(Oe.xaxes),Qt(he.xaxes),cn(ue.overlays,"xaxis")),Be&&(Qt(Se),Qt(Oe.yaxes),Qt(he.yaxes),cn(ue.overlays,"yaxis")),it={},Kt=0;Kt<sn.length;Kt++){var vn=sn[Kt],xn=v(ae,vn);a.drawOne(ae,xn,{skipTitle:!0}),it[xn._name+".range[0]"]=xn.range[0],it[xn._name+".range[1]"]=xn.range[1]}a.redrawComponents(ae,sn)}function jt(){if(!ae._transitioningWithDuration){var Kt=ae._context.doubleClick,sn=[];_e&&(sn=sn.concat(fe)),Ae&&(sn=sn.concat(Se)),he.xaxes&&(sn=sn.concat(he.xaxes)),he.yaxes&&(sn=sn.concat(he.yaxes));var Qt,cn,vn={};if(Kt==="reset+autosize")for(Kt="autosize",cn=0;cn<sn.length;cn++){var xn=(Qt=sn[cn])._rangeInitial0,An=Qt._rangeInitial1,Sn=xn!==void 0||An!==void 0;if(Sn&&(xn!==void 0&&xn!==Qt.range[0]||An!==void 0&&An!==Qt.range[1])||!Sn&&Qt.autorange!==!0){Kt="reset";break}}if(Kt==="autosize")for(cn=0;cn<sn.length;cn++)(Qt=sn[cn]).fixedrange||(vn[Qt._name+".autorange"]=!0);else if(Kt==="reset"){for((_e||Oe.isSubplotConstrained)&&(sn=sn.concat(Oe.xaxes)),Ae&&!Oe.isSubplotConstrained&&(sn=sn.concat(Oe.yaxes)),Oe.isSubplotConstrained&&(_e?Ae||(sn=sn.concat(Se)):sn=sn.concat(fe)),cn=0;cn<sn.length;cn++)if(!(Qt=sn[cn]).fixedrange){var Tn=Qt._name,Rn=Qt._autorangeInitial;Qt._rangeInitial0===void 0&&Qt._rangeInitial1===void 0?vn[Tn+".autorange"]=!0:Qt._rangeInitial0===void 0?(vn[Tn+".autorange"]=Rn,vn[Tn+".range"]=[null,Qt._rangeInitial1]):Qt._rangeInitial1===void 0?(vn[Tn+".range"]=[Qt._rangeInitial0,null],vn[Tn+".autorange"]=Rn):vn[Tn+".range"]=[Qt._rangeInitial0,Qt._rangeInitial1]}}ae.emit("plotly_doubleclick",null),p.call("_guiRelayout",ae,vn)}}function Wt(){Ft([0,0,Me,Ie]),k.syncOrAsync([y.previousPromises,function(){ae._fullLayout._replotting=!1,p.call("_guiRelayout",ae,it)}],ae)}function Ft(Kt){var sn,Qt,cn,vn,xn=ae._fullLayout,An=xn._plots,Sn=xn._subplots.cartesian;if(Ze&&p.subplotsRegistry.splom.drag(ae),Ve){for(sn=0;sn<Sn.length;sn++)if(cn=(Qt=An[Sn[sn]]).xaxis,vn=Qt.yaxis,Qt._scene){var Tn=k.simpleMap(cn.range,cn.r2l),Rn=k.simpleMap(vn.range,vn.r2l);cn.limitRange&&cn.limitRange(),vn.limitRange&&vn.limitRange(),Tn=cn.range,Rn=vn.range,Qt._scene.update({range:[Tn[0],Rn[0],Tn[1],Rn[1]]})}}if((Ze||Ve)&&(m(ae),g(ae)),rt){var In=Kt[2]/Ee._length,Xn=Kt[3]/me._length;for(sn=0;sn<Sn.length;sn++){cn=(Qt=An[Sn[sn]]).xaxis,vn=Qt.yaxis;var Vn,er,Wn,fr,Jt=(Le||he.isSubplotConstrained)&&!cn.fixedrange&&oe[cn._id],en=(Be||he.isSubplotConstrained)&&!vn.fixedrange&&re[vn._id];if(Jt?(Vn=In,Wn=ke||he.isSubplotConstrained?Kt[0]:hn(cn,Vn)):he.xaHash[cn._id]?(Vn=In,Wn=Kt[0]*cn._length/Ee._length):he.yaHash[cn._id]?(Vn=Xn,Wn=Ae==="ns"?-Kt[1]*cn._length/me._length:hn(cn,Vn,{n:"top",s:"bottom"}[Ae])):Wn=bn(cn,Vn=Ln(cn,In,Xn)),Vn>1&&(cn.maxallowed!==void 0&&Le===(cn.range[0]<cn.range[1]?"e":"w")||cn.minallowed!==void 0&&Le===(cn.range[0]<cn.range[1]?"w":"e"))&&(Vn=1,Wn=0),en?(er=Xn,fr=ge||he.isSubplotConstrained?Kt[1]:hn(vn,er)):he.yaHash[vn._id]?(er=Xn,fr=Kt[1]*vn._length/me._length):he.xaHash[vn._id]?(er=In,fr=_e==="ew"?-Kt[0]*vn._length/Ee._length:hn(vn,er,{e:"right",w:"left"}[_e])):fr=bn(vn,er=Ln(vn,In,Xn)),er>1&&(vn.maxallowed!==void 0&&Be===(vn.range[0]<vn.range[1]?"n":"s")||vn.minallowed!==void 0&&Be===(vn.range[0]<vn.range[1]?"s":"n"))&&(er=1,fr=0),Vn||er){Vn||(Vn=1),er||(er=1);var Mn=cn._offset-Wn/Vn,pn=vn._offset-fr/er;Qt.clipRect.call(n.setTranslate,Wn,fr).call(n.setScale,Vn,er),Qt.plot.call(n.setTranslate,Mn,pn).call(n.setScale,1/Vn,1/er),Vn===Qt.xScaleFactor&&er===Qt.yScaleFactor||(n.setPointGroupScale(Qt.zoomScalePts,Vn,er),n.setTextPointsScale(Qt.zoomScaleTxt,Vn,er)),n.hideOutsideRangePoints(Qt.clipOnAxisFalseTraces,Qt),Qt.xScaleFactor=Vn,Qt.yScaleFactor=er}}}}function Ln(Kt,sn,Qt){return Kt.fixedrange?0:Le&&Oe.xaHash[Kt._id]?sn:Be&&(Oe.isSubplotConstrained?Oe.xaHash:Oe.yaHash)[Kt._id]?Qt:0}function bn(Kt,sn){return sn?(Kt.range=Kt._r.slice(),w(Kt,sn),hn(Kt,sn)):0}function hn(Kt,sn,Qt){return Kt._length*(1-sn)*d[Qt||Kt.constraintoward||"middle"]}return ge.length*ke.length!=1&&ie(It,function(Kt){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(ut(),ae._transitioningWithDuration)return Kt.preventDefault(),void Kt.stopPropagation();wt(),clearTimeout(kt);var sn=-Kt.deltaY;if(isFinite(sn)||(sn=Kt.wheelDelta/10),isFinite(sn)){var Qt,cn=Math.exp(-Math.min(Math.max(sn,-20),20)/200),vn=Ct.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xn=(Kt.clientX-vn.left)/vn.width,An=(vn.bottom-Kt.clientY)/vn.height;if(Le){for(ke||(xn=.5),Qt=0;Qt<fe.length;Qt++)Sn(fe[Qt],xn,cn);Gt("x"),vt[2]*=cn,vt[0]+=vt[2]*xn*(1/cn-1)}if(Be){for(ge||(An=.5),Qt=0;Qt<Se.length;Qt++)Sn(Se[Qt],An,cn);Gt("y"),vt[3]*=cn,vt[1]+=vt[3]*(1-An)*(1/cn-1)}Ft(vt),tn(),ae.emit("plotly_relayouting",it),kt=setTimeout(function(){ae._fullLayout&&(vt=[0,0,Me,Ie],Wt())},Lt),Kt.preventDefault()}else k.log("Did not find wheel motion attributes: ",Kt)}function Sn(Tn,Rn,In){if(!Tn.fixedrange){var Xn=k.simpleMap(Tn.range,Tn.r2l),Vn=Xn[0]+(Xn[1]-Xn[0])*Rn;Tn.range=Xn.map(function(er){return Tn.l2r(Vn+(er-Vn)*In)})}}}),It},makeDragger:R,makeRectDragger:U,makeZoombox:j,makeCorners:q,updateZoombox:te,xyCorners:K,transitionZoombox:ee,removeZoombox:Q,showDoubleClickNotifier:J,attachWheelEventHandler:ie}},42464:function(X,I,e){"use strict";var A=e(33428),k=e(93024),o=e(86476),T=e(93972),b=e(51184).makeDragBox,p=e(33816).DRAGGERSIZE;I.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)A.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(n,r){if((t._plots[n].mainplot&&!0)===(t._plots[r].mainplot&&!0)){var a=n.split("y"),l=r.split("y");return a[0]===l[0]?Number(a[1]||1)-Number(l[1]||1):Number(a[0]||1)-Number(l[0]||1)}return t._plots[n].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],a=r.xaxis,l=r.yaxis;if(!r.mainplot){var c=b(s,r,a._offset,l._offset,a._length,l._length,"ns","ew");c.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===n&&s._fullLayout._plots[n]&&k.hover(s,x,n)},k.hover(s,x,n),s._fullLayout._lasthover=c,s._fullLayout._hoversubplot=n},c.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,o.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,r,a._offset-p,l._offset-p,p,p,"n","w"),b(s,r,a._offset+a._length,l._offset-p,p,p,"n","e"),b(s,r,a._offset-p,l._offset+l._length,p,p,"s","w"),b(s,r,a._offset+a._length,l._offset+l._length,p,p,"s","e"))}if(s._context.showAxisDragHandles){if(n===a._mainSubplot){var h=a._mainLinePosition;a.side==="top"&&(h-=p),b(s,r,a._offset+.1*a._length,h,.8*a._length,p,"","ew"),b(s,r,a._offset,h,.1*a._length,p,"","w"),b(s,r,a._offset+.9*a._length,h,.1*a._length,p,"","e")}if(n===l._mainSubplot){var u=l._mainLinePosition;l.side!=="right"&&(u-=p),b(s,r,u,l._offset+.1*l._length,p,.8*l._length,"ns",""),b(s,r,u,l._offset+.9*l._length,p,.1*l._length,"s",""),b(s,r,u,l._offset,p,.1*l._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(n){n.target=s._fullLayout._lasthover,k.hover(s,n,t._hoversubplot)},i.onclick=function(n){n.target=s._fullLayout._lasthover,k.click(s,n)},i.onmousedown=function(n){s._fullLayout._lasthover.onmousedown(n)},I.updateFx(s)}},I.updateFx=function(s){var t=s._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,i)}},36632:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(79811);X.exports=function(T){return function(b,p){var s=b[T];if(Array.isArray(s))for(var t=A.subplotsRegistry.cartesian,i=t.idRegex,n=p._subplots,r=n.xaxis,a=n.yaxis,l=n.cartesian,c=p._has("cartesian")||p._has("gl2d"),h=0;h<s.length;h++){var u=s[h];if(k.isPlainObject(u)){var x=o.cleanId(u.xref,"x",!1),d=o.cleanId(u.yref,"y",!1),m=i.x.test(x),g=i.y.test(d);if(m||g){c||k.pushUnique(p._basePlotModules,t);var y=!1;m&&r.indexOf(x)===-1&&(r.push(x),y=!0),g&&a.indexOf(d)===-1&&(a.push(d),y=!0),y&&m&&g&&l.push(x+d)}}}}}},57952:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(3400),T=e(7316),b=e(43616),p=e(84888)._M,s=e(79811),t=e(33816),i=e(9616),n=o.ensureSingle;function r(u,x,d){return o.ensureSingle(u,x,d,function(m){m.datum(d)})}function a(u,x,d,m,g){for(var y,v,_,f=t.traceLayerClasses,S=u._fullLayout,w=S._modules,E={},P=0;P<d.length;P++){var C=d[P][0].trace.zorder||0;E[C]||(E[C]=[]),E[C].push(d[P])}for(var O=[],R=[],U=Object.keys(E).map(Number).sort(o.sorterAsc),D=0;D<U.length;D++)for(var N=U[D],W=0;W<w.length;W++){var F=(y=w[W]).name,j=k.modules[F].categories;if(j.svg){var q=y.layerName||F+"layer",te=q+(D?Number(D)+1:""),ee=y.plot;_=(v=p(d,ee,N))[0],d=v[1],_.length&&O.push({i:f.indexOf(q),zorder:D,className:te,plotMethod:ee,cdModule:_}),j.zoomScale&&R.push("."+te)}}O.sort(function(K,Y){return(K.zorder||0)-(Y.zorder||0)||K.i-Y.i});var Q=x.plot.selectAll("g.mlayer").data(O,function(K){return K.className});if(Q.enter().append("g").attr("class",function(K){return K.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),Q.exit().remove(),Q.order(),Q.each(function(K){var Y=A.select(this),ie=K.className;K.plotMethod(u,x,K.cdModule,Y,m,g),t.clipOnAxisFalseQuery.indexOf("."+ie)===-1&&b.setClipUrl(Y,x.layerClipId,u)}),S._has("scattergl")&&(y=k.getModule("scattergl"),_=p(d,y)[0],y.plot(u,x,_)),!u._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),R.length)){var J=x.plot.selectAll(R.join(",")).selectAll(".trace");x.zoomScalePts=J.selectAll("path.point"),x.zoomScaleTxt=J.selectAll(".textpoint")}}function l(u,x){var d=x.plotgroup,m=x.id,g=t.layerValue2layerClass[x.xaxis.layer],y=t.layerValue2layerClass[x.yaxis.layer],v=u._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var _=x.mainplotinfo,f=_.plotgroup,S=m+"-x",w=m+"-y";x.minorGridlayer=_.minorGridlayer,x.gridlayer=_.gridlayer,x.zerolinelayer=_.zerolinelayer,n(_.overlinesBelow,"path",S),n(_.overlinesBelow,"path",w),n(_.overaxesBelow,"g",S),n(_.overaxesBelow,"g",w),x.plot=n(_.overplot,"g",m),n(_.overlinesAbove,"path",S),n(_.overlinesAbove,"path",w),n(_.overaxesAbove,"g",S),n(_.overaxesAbove,"g",w),x.xlines=f.select(".overlines-"+g).select("."+S),x.ylines=f.select(".overlines-"+y).select("."+w),x.xaxislayer=f.select(".overaxes-"+g).select("."+S),x.yaxislayer=f.select(".overaxes-"+y).select("."+w)}else if(v)x.xlines=n(d,"path","xlines-above"),x.ylines=n(d,"path","ylines-above"),x.xaxislayer=n(d,"g","xaxislayer-above"),x.yaxislayer=n(d,"g","yaxislayer-above");else{var E=n(d,"g","layer-subplot");x.shapelayer=n(E,"g","shapelayer"),x.imagelayer=n(E,"g","imagelayer"),x.minorGridlayer=n(d,"g","minor-gridlayer"),x.gridlayer=n(d,"g","gridlayer"),x.zerolinelayer=n(d,"g","zerolinelayer");var P=n(d,"g","layer-between");x.shapelayerBetween=n(P,"g","shapelayer"),x.imagelayerBetween=n(P,"g","imagelayer"),n(d,"path","xlines-below"),n(d,"path","ylines-below"),x.overlinesBelow=n(d,"g","overlines-below"),n(d,"g","xaxislayer-below"),n(d,"g","yaxislayer-below"),x.overaxesBelow=n(d,"g","overaxes-below"),x.plot=n(d,"g","plot"),x.overplot=n(d,"g","overplot"),x.xlines=n(d,"path","xlines-above"),x.ylines=n(d,"path","ylines-above"),x.overlinesAbove=n(d,"g","overlines-above"),n(d,"g","xaxislayer-above"),n(d,"g","yaxislayer-above"),x.overaxesAbove=n(d,"g","overaxes-above"),x.xlines=d.select(".xlines-"+g),x.ylines=d.select(".ylines-"+y),x.xaxislayer=d.select(".xaxislayer-"+g),x.yaxislayer=d.select(".yaxislayer-"+y)}v||(r(x.minorGridlayer,"g",x.xaxis._id),r(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(C){return C[0]}).sort(s.idSort),r(x.gridlayer,"g",x.xaxis._id),r(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(C){return C[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function c(u,x){if(u){var d={};for(var m in u.each(function(_){var f=_[0];A.select(this).remove(),h(f,x),d[f]=!0}),x._plots)for(var g=x._plots[m].overlays||[],y=0;y<g.length;y++){var v=g[y];d[v.id]&&v.plot.selectAll(".trace").remove()}}}function h(u,x){x._draggers.selectAll("g."+u).remove(),x._defs.select("#clip"+x._uid+u+"plot").remove()}I.name="cartesian",I.attr=["xaxis","yaxis"],I.idRoot=["x","y"],I.idRegex=t.idRegex,I.attrRegex=t.attrRegex,I.attributes=e(26720),I.layoutAttributes=e(94724),I.supplyLayoutDefaults=e(67352),I.transitionAxes=e(73736),I.finalizeSubplots=function(u,x){var d,m,g,y=x._subplots,v=y.xaxis,_=y.yaxis,f=y.cartesian,S=f.concat(y.gl2d||[]),w={},E={};for(d=0;d<S.length;d++){var P=S[d].split("y");w[P[0]]=1,E["y"+P[1]]=1}for(d=0;d<v.length;d++)w[m=v[d]]||(g=(u[s.id2name(m)]||{}).anchor,t.idRegex.y.test(g)||(g="y"),f.push(m+g),S.push(m+g),E[g]||(E[g]=1,o.pushUnique(_,g)));for(d=0;d<_.length;d++)E[g=_[d]]||(m=(u[s.id2name(g)]||{}).anchor,t.idRegex.x.test(m)||(m="x"),f.push(m+g),S.push(m+g),w[m]||(w[m]=1,o.pushUnique(v,m)));if(!S.length){for(var C in m="",g="",u)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!m||+C.substr(5)<+m.substr(5))&&(m=C):(!g||+C.substr(5)<+g.substr(5))&&(g=C));m=m?s.name2id(m):"x",g=g?s.name2id(g):"y",v.push(m),_.push(g),f.push(m+g)}},I.plot=function(u,x,d,m){var g,y=u._fullLayout,v=y._subplots.cartesian,_=u.calcdata;if(!Array.isArray(x))for(x=[],g=0;g<_.length;g++)x.push(g);for(g=0;g<v.length;g++){for(var f,S=v[g],w=y._plots[S],E=[],P=0;P<_.length;P++){var C=_[P],O=C[0].trace;O.xaxis+O.yaxis===S&&((x.indexOf(O.index)!==-1||O.carpet)&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&E.indexOf(f)===-1&&E.push(f),E.push(C)),f=C)}a(u,w,E,d,m)}},I.clean=function(u,x,d,m){var g,y,v,_=m._plots||{},f=x._plots||{},S=m._subplots||{};if(m._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(v in _)(g=_[v]).plotgroup&&g.plotgroup.remove();var w=m._has&&m._has("gl"),E=x._has&&x._has("gl");if(w&&!E)for(v in _)(g=_[v])._scene&&g._scene.destroy();if(S.xaxis&&S.yaxis){var P=s.listIds({_fullLayout:m});for(y=0;y<P.length;y++){var C=P[y];x[s.id2name(C)]||m._infolayer.selectAll(".g-"+C+"title").remove()}}var O=m._has&&m._has("cartesian"),R=x._has&&x._has("cartesian");if(O&&!R)c(m._cartesianlayer.selectAll(".subplot"),m),m._defs.selectAll(".axesclip").remove(),delete m._axisConstraintGroups,delete m._axisMatchGroups;else if(S.cartesian)for(y=0;y<S.cartesian.length;y++){var U=S.cartesian[y];if(!f[U]){var D="."+U+",."+U+"-x,."+U+"-y";m._cartesianlayer.selectAll(D).remove(),h(U,m)}}},I.drawFramework=function(u){var x=u._fullLayout,d=function(g){var y,v,_,f,S,w,E=g._fullLayout,P=E._subplots.cartesian,C=P.length,O=[],R=[];for(y=0;y<C;y++){_=P[y],S=(f=E._plots[_]).xaxis,w=f.yaxis;var U=S._mainAxis,D=w._mainAxis,N=U._id+D._id,W=E._plots[N];f.overlays=[],N!==_&&W?(f.mainplot=N,f.mainplotinfo=W,R.push(_)):(f.mainplot=void 0,f.mainplotinfo=void 0,O.push(_))}for(y=0;y<R.length;y++)_=R[y],(f=E._plots[_]).mainplotinfo.overlays.push(f);var F=O.concat(R),j=new Array(C);for(y=0;y<C;y++){_=F[y],S=(f=E._plots[_]).xaxis,w=f.yaxis;var q=[_,S.layer,w.layer,S.overlaying||"",w.overlaying||""];for(v=0;v<f.overlays.length;v++)q.push(f.overlays[v].id);j[y]=q}return j}(u),m=x._cartesianlayer.selectAll(".subplot").data(d,String);m.enter().append("g").attr("class",function(g){return"subplot "+g[0]}),m.order(),m.exit().call(c,x),m.each(function(g){var y=g[0],v=x._plots[y];v.plotgroup=A.select(this),l(u,v),v.draglayer=n(x._draggers,"g",y)})},I.rangePlot=function(u,x,d){l(u,x),a(u,x,d),T.style(u)},I.toSVG=function(u){var x=u._fullLayout._glimages,d=A.select(u).selectAll(".svg-container");d.filter(function(m,g){return g===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var m=this,g=m.toDataURL("image/png");x.append("svg:image").attr({xmlns:i.svg,"xlink:href":g,preserveAspectRatio:"none",x:0,y:0,width:m.style.width,height:m.style.height})})},I.updateFx=e(42464).updateFx},94724:function(X,I,e){"use strict";var A=e(25376),k=e(22548),o=e(98192).u,T=e(92880).extendFlat,b=e(31780).templatedArray,p=e(29736).descriptionWithDates,s=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,n=t.WEEKDAY_PATTERN,r={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},r,{values:r.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},u={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function d(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=5),w}function m(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var g={valType:"color",dflt:k.defaultLine,editType:"ticks"},y={valType:"color",dflt:k.lightLine,editType:"ticks"};function v(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var _=T({},o,{editType:"ticks"}),f={valType:"boolean",editType:"ticks"};X.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:A({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[n,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:l(),tick0:c,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:u,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:d(),tickwidth:m(),tickcolor:g,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:A({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:p("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:p("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:f,gridcolor:y,gridwidth:v(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:r,nticks:l("minor"),tick0:c,dtick:h,tickvals:u,ticks:x,ticklen:d("minor"),tickwidth:m("minor"),tickcolor:g,gridcolor:y,gridwidth:v("minor"),griddash:_,showgrid:f,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:A({editType:"ticks"})}}},67352:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(10624).isUnifiedHover,T=e(41008),b=e(31780),p=e(64859),s=e(94724),t=e(14944),i=e(28336),n=e(71888),r=e(37668),a=e(79811),l=a.id2name,c=a.name2id,h=e(33816).AX_ID_PATTERN,u=e(24040),x=u.traceIs,d=u.getComponentMethod;function m(g,y,v){Array.isArray(g[y])?g[y].push(v):g[y]=[v]}X.exports=function(g,y,v){var _,f,S=y.autotypenumbers,w={},E={},P={},C={},O={},R={},U={},D={},N={},W={};for(_=0;_<v.length;_++){var F=v[_];if(x(F,"cartesian")||x(F,"gl2d")){var j,q;if(F.xaxis)j=l(F.xaxis),m(w,j,F);else if(F.xaxes)for(f=0;f<F.xaxes.length;f++)m(w,l(F.xaxes[f]),F);if(F.yaxis)q=l(F.yaxis),m(w,q,F);else if(F.yaxes)for(f=0;f<F.yaxes.length;f++)m(w,l(F.yaxes[f]),F);F.type==="funnel"?F.orientation==="h"?(j&&(E[j]=!0),q&&(U[q]=!0)):q&&(P[q]=!0):F.type==="image"?(q&&(D[q]=!0),j&&(D[j]=!0)):(q&&(O[q]=!0,R[q]=!0),x(F,"carpet")&&(F.type!=="carpet"||F._cheater)||j&&(C[j]=!0)),F.type==="carpet"&&F._cheater&&j&&(E[j]=!0),x(F,"2dMap")&&(N[j]=!0,N[q]=!0),x(F,"oriented")&&(W[F.orientation==="h"?q:j]=!0)}}var te=y._subplots,ee=te.xaxis,Q=te.yaxis,J=A.simpleMap(ee,l),K=A.simpleMap(Q,l),Y=J.concat(K),ie=k.background;ee.length&&Q.length&&(ie=A.coerce(g,y,p,"plot_bgcolor"));var se,ae,ue,ve,ye,de=k.combine(ie,y.paper_bgcolor);function pe(){var Je=w[se]||[];ye._traceIndices=Je.map(function(wt){return wt._expandedIndex}),ye._annIndices=[],ye._shapeIndices=[],ye._selectionIndices=[],ye._imgIndices=[],ye._subplotsWith=[],ye._counterAxes=[],ye._name=ye._attr=se,ye._id=ae}function ge(Je,wt){return A.coerce(ve,ye,s,Je,wt)}function ke(Je,wt){return A.coerce2(ve,ye,s,Je,wt)}function Ee(Je){return Je==="x"?Q:ee}function me(Je,wt){for(var Pt=Je==="x"?J:K,It=[],At=0;At<Pt.length;At++){var qe=Pt[At];qe===wt||(g[qe]||{}).overlaying||It.push(c(qe))}return It}var oe={x:Ee("x"),y:Ee("y")},re=oe.x.concat(oe.y),fe={},Se=[];function be(){var Je=ve.matches;h.test(Je)&&re.indexOf(Je)===-1&&(fe[Je]=ve.type,Se=Object.keys(fe))}var we=T(g,y),Me=o(we);for(_=0;_<Y.length;_++){se=Y[_],ae=c(se),ue=se.charAt(0),A.isPlainObject(g[se])||(g[se]={}),ve=g[se],ye=b.newContainer(y,se,ue+"axis"),pe();var Ie=ue==="x"&&!C[se]&&E[se]||ue==="y"&&!O[se]&&P[se],Oe=ue==="y"&&(!R[se]&&U[se]||D[se]),he={hasMinor:!0,letter:ue,font:y.font,outerTicks:N[se],showGrid:!W[se],data:w[se]||[],bgColor:de,calendar:y.calendar,automargin:!0,visibleDflt:Ie,reverseDflt:Oe,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ue]||{})[ae],noAutotickangles:ue==="y"};ge("uirevision",y.uirevision),t(ve,ye,ge,he),i(ve,ye,ge,he,y);var _e=Me&&ue===we.charAt(0),Ae=ke("spikecolor",Me?ye.color:void 0),De=ke("spikethickness",Me?1.5:void 0),Le=ke("spikedash",Me?"dot":void 0),Be=ke("spikemode",Me?"across":void 0),Ve=ke("spikesnap");ge("showspikes",!!(_e||Ae||De||Le||Be||Ve))||(delete ye.spikecolor,delete ye.spikethickness,delete ye.spikedash,delete ye.spikemode,delete ye.spikesnap);var Ze=l(ve.overlaying),rt=[0,1];if(y[Ze]!==void 0){var it=l(y[Ze].anchor);y[it]!==void 0&&(rt=y[it].domain)}r(ve,ye,ge,{letter:ue,counterAxes:oe[ue],overlayableAxes:me(ue,se),grid:y.grid,overlayingDomain:rt}),ge("title.standoff"),be(),ye._input=ve}for(_=0;_<Se.length;){ae=Se[_++],ue=(se=l(ae)).charAt(0),A.isPlainObject(g[se])||(g[se]={}),ve=g[se],ye=b.newContainer(y,se,ue+"axis"),pe();var dt={letter:ue,font:y.font,outerTicks:N[se],showGrid:!W[se],data:[],bgColor:de,calendar:y.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ue]||{})[ae]};ge("uirevision",y.uirevision),ye.type=fe[ae]||"linear",i(ve,ye,ge,dt,y),r(ve,ye,ge,{letter:ue,counterAxes:oe[ue],overlayableAxes:me(ue,se),grid:y.grid}),ge("fixedrange"),be(),ye._input=ve}var mt=d("rangeslider","handleDefaults"),ht=d("rangeselector","handleDefaults");for(_=0;_<J.length;_++)se=J[_],ve=g[se],ye=y[se],mt(g,y,se),ye.type==="date"&&ht(ve,ye,y,K,ye.calendar),ge("fixedrange");for(_=0;_<K.length;_++){se=K[_],ve=g[se],ye=y[se];var Qe=y[l(ye.anchor)];ge("fixedrange",d("rangeslider","isVisible")(Qe))}n.handleDefaults(g,y,{axIds:re.concat(Se).sort(a.idSort),axHasImage:D})}},42136:function(X,I,e){"use strict";var A=e(49760).mix,k=e(22548),o=e(3400);X.exports=function(T,b,p,s){var t=(s=s||{}).dfltColor;function i(g,y){return o.coerce2(T,b,s.attributes,g,y)}var n=i("linecolor",t),r=i("linewidth");p("showline",s.showLine||!!n||!!r)||(delete b.linecolor,delete b.linewidth);var a=i("gridcolor",A(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),l=i("gridwidth"),c=i("griddash");if(p("showgrid",s.showGrid||!!a||!!l||!!c)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var h=i("minor.gridcolor",A(b.gridcolor,s.bgColor,67).toRgbString()),u=i("minor.gridwidth",b.gridwidth||1),x=i("minor.griddash",b.griddash||"solid");p("minor.showgrid",!!h||!!u||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var d=i("zerolinecolor",t),m=i("zerolinewidth");p("zeroline",s.showGrid||!!d||!!m)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},37668:function(X,I,e){"use strict";var A=e(38248),k=e(3400);X.exports=function(o,T,b,p){var s,t,i,n,r,a,l=p.counterAxes||[],c=p.overlayableAxes||[],h=p.letter,u=p.grid,x=p.overlayingDomain;u&&(t=u._domains[h][u._axisMap[T._id]],s=u._anchors[T._id],t&&(i=u[h+"side"].split(" ")[0],n=u.domain[h][i==="right"||i==="top"?1:0])),t=t||[0,1],s=s||(A(o.position)?"free":l[0]||"free"),i=i||(h==="x"?"bottom":"left"),n=n||0,r=0,a=!1;var d=k.coerce(o,T,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:s}},"anchor"),m=k.coerce(o,T,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");d==="free"&&(h==="y"&&(b("autoshift")&&(n=m==="left"?x[0]:x[1],a=!T.automargin||T.automargin,r=m==="left"?-3:3),b("shift",r)),b("position",n)),b("automargin",a);var g=!1;if(c.length&&(g=k.coerce(o,T,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!g){var y=b("domain",t);y[0]>y[1]-.000244140625&&(T.domain=t),k.noneOrAll(o.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return b("layer"),T}},42568:function(X,I,e){"use strict";var A=e(85024);X.exports=function(k,o,T,b,p){p||(p={});var s=p.tickSuffixDflt,t=A(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},96312:function(X,I,e){"use strict";var A=e(76808);X.exports=function(k,o,T,b){var p=o._template||{},s=o.type||p.type||"-";T("minallowed"),T("maxallowed");var t,i=T("range");i||b.noInsiderange||s==="log"||(!(t=T("insiderange"))||t[0]!==null&&t[1]!==null||(o.insiderange=!1,t=void 0),t&&(i=T("range",t)));var n,r=o.getAutorangeDflt(i,b),a=T("autorange",r);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||a!=="reversed"&&a!==!0)&&(i[0]===null||a!=="min"&&a!=="max reversed")&&(i[1]===null||a!=="max"&&a!=="min reversed")||(i=void 0,delete o.range,o.autorange=!0,n=!0),n||(a=T("autorange",r=o.getAutorangeDflt(i,b))),a&&(A(T,a,i),s!=="linear"&&s!=="-"||T("rangemode")),o.cleanRange()}},21160:function(X,I,e){"use strict";var A=e(84284).FROM_BL;X.exports=function(k,o,T){T===void 0&&(T=A[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],p=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(p+(b[0]-p)*o),k.l2r(p+(b[1]-p)*o)],k.setScale()}},78344:function(X,I,e){"use strict";var A=e(33428),k=e(94336).E9,o=e(3400),T=o.numberFormat,b=e(38248),p=o.cleanNumber,s=o.ms2DateTime,t=o.dateTime2ms,i=o.ensureNumber,n=o.isArrayOrTypedArray,r=e(39032),a=r.FP_SAFE,l=r.BADNUM,c=r.LOG_CLIP,h=r.ONEWEEK,u=r.ONEDAY,x=r.ONEHOUR,d=r.ONEMIN,m=r.ONESEC,g=e(79811),y=e(33816),v=y.HOUR_PATTERN,_=y.WEEKDAY_PATTERN;function f(w){return Math.pow(10,w)}function S(w){return w!=null}X.exports=function(w,E){E=E||{};var P=w._id||"x",C=P.charAt(0);function O(Y,ie){if(Y>0)return Math.log(Y)/Math.LN10;if(Y<=0&&ie&&w.range&&w.range.length===2){var se=w.range[0],ae=w.range[1];return .5*(se+ae-2*c*Math.abs(se-ae))}return l}function R(Y,ie,se,ae){if((ae||{}).msUTC&&b(Y))return+Y;var ue=t(Y,se||w.calendar);if(ue===l){if(!b(Y))return l;Y=+Y;var ve=Math.floor(10*o.mod(Y+.05,1)),ye=Math.round(Y-ve/10);ue=t(new Date(ye))+ve/10}return ue}function U(Y,ie,se){return s(Y,ie,se||w.calendar)}function D(Y){return w._categories[Math.round(Y)]}function N(Y){if(S(Y)){if(w._categoriesMap===void 0&&(w._categoriesMap={}),w._categoriesMap[Y]!==void 0)return w._categoriesMap[Y];w._categories.push(typeof Y=="number"?String(Y):Y);var ie=w._categories.length-1;return w._categoriesMap[Y]=ie,ie}return l}function W(Y){if(w._categoriesMap)return w._categoriesMap[Y]}function F(Y){var ie=W(Y);return ie!==void 0?ie:b(Y)?+Y:void 0}function j(Y){return b(Y)?+Y:W(Y)}function q(Y,ie,se){return A.round(se+ie*Y,2)}function te(Y,ie,se){return(Y-se)/ie}var ee=function(Y){return b(Y)?q(Y,w._m,w._b):l},Q=function(Y){return te(Y,w._m,w._b)};if(w.rangebreaks){var J=C==="y";ee=function(Y){if(!b(Y))return l;var ie=w._rangebreaks.length;if(!ie)return q(Y,w._m,w._b);var se=J;w.range[0]>w.range[1]&&(se=!se);for(var ae=se?-1:1,ue=ae*Y,ve=0,ye=0;ye<ie;ye++){var de=ae*w._rangebreaks[ye].min,pe=ae*w._rangebreaks[ye].max;if(ue<de)break;if(!(ue>pe)){ve=ue<(de+pe)/2?ye:ye+1;break}ve=ye+1}var ge=w._B[ve]||0;return isFinite(ge)?q(Y,w._m2,ge):0},Q=function(Y){var ie=w._rangebreaks.length;if(!ie)return te(Y,w._m,w._b);for(var se=0,ae=0;ae<ie&&!(Y<w._rangebreaks[ae].pmin);ae++)Y>w._rangebreaks[ae].pmax&&(se=ae+1);return te(Y,w._m2,w._B[se])}}w.c2l=w.type==="log"?O:i,w.l2c=w.type==="log"?f:i,w.l2p=ee,w.p2l=Q,w.c2p=w.type==="log"?function(Y,ie){return ee(O(Y,ie))}:ee,w.p2c=w.type==="log"?function(Y){return f(Q(Y))}:Q,["linear","-"].indexOf(w.type)!==-1?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=p,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function(Y){return w.l2p(p(Y))},w.p2d=w.p2r=Q,w.cleanPos=i):w.type==="log"?(w.d2r=w.d2l=function(Y,ie){return O(p(Y),ie)},w.r2d=w.r2c=function(Y){return f(p(Y))},w.d2c=w.r2l=p,w.c2d=w.l2r=i,w.c2r=O,w.l2d=f,w.d2p=function(Y,ie){return w.l2p(w.d2r(Y,ie))},w.p2d=function(Y){return f(Q(Y))},w.r2p=function(Y){return w.l2p(p(Y))},w.p2r=Q,w.cleanPos=i):w.type==="date"?(w.d2r=w.r2d=o.identity,w.d2c=w.r2c=w.d2l=w.r2l=R,w.c2d=w.c2r=w.l2d=w.l2r=U,w.d2p=w.r2p=function(Y,ie,se){return w.l2p(R(Y,0,se))},w.p2d=w.p2r=function(Y,ie,se){return U(Q(Y),ie,se)},w.cleanPos=function(Y){return o.cleanDate(Y,l,w.calendar)}):w.type==="category"?(w.d2c=w.d2l=N,w.r2d=w.c2d=w.l2d=D,w.d2r=w.d2l_noadd=F,w.r2c=function(Y){var ie=j(Y);return ie!==void 0?ie:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=j,w.d2p=function(Y){return w.l2p(w.r2c(Y))},w.p2d=function(Y){return D(Q(Y))},w.r2p=w.d2p,w.p2r=Q,w.cleanPos=function(Y){return typeof Y=="string"&&Y!==""?Y:i(Y)}):w.type==="multicategory"&&(w.r2d=w.c2d=w.l2d=D,w.d2r=w.d2l_noadd=F,w.r2c=function(Y){var ie=F(Y);return ie!==void 0?ie:w.fraction2r(.5)},w.r2c_just_indices=W,w.l2r=w.c2r=i,w.r2l=F,w.d2p=function(Y){return w.l2p(w.r2c(Y))},w.p2d=function(Y){return D(Q(Y))},w.r2p=w.d2p,w.p2r=Q,w.cleanPos=function(Y){return Array.isArray(Y)||typeof Y=="string"&&Y!==""?Y:i(Y)},w.setupMultiCategory=function(Y){var ie,se,ae=w._traceIndices,ue=w._matchGroup;if(ue&&w._categories.length===0){for(var ve in ue)if(ve!==P){var ye=E[g.id2name(ve)];ae=ae.concat(ye._traceIndices)}}var de=[[0,{}],[0,{}]],pe=[];for(ie=0;ie<ae.length;ie++){var ge=Y[ae[ie]];if(C in ge){var ke=ge[C],Ee=ge._length||o.minRowLength(ke);if(n(ke[0])&&n(ke[1]))for(se=0;se<Ee;se++){var me=ke[0][se],oe=ke[1][se];S(me)&&S(oe)&&(pe.push([me,oe]),me in de[0][1]||(de[0][1][me]=de[0][0]++),oe in de[1][1]||(de[1][1][oe]=de[1][0]++))}}}for(pe.sort(function(re,fe){var Se=de[0][1],be=Se[re[0]]-Se[fe[0]];if(be)return be;var we=de[1][1];return we[re[1]]-we[fe[1]]}),ie=0;ie<pe.length;ie++)N(pe[ie])}),w.fraction2r=function(Y){var ie=w.r2l(w.range[0]),se=w.r2l(w.range[1]);return w.l2r(ie+Y*(se-ie))},w.r2fraction=function(Y){var ie=w.r2l(w.range[0]),se=w.r2l(w.range[1]);return(w.r2l(Y)-ie)/(se-ie)},w.limitRange=function(Y){var ie=w.minallowed,se=w.maxallowed;if(ie!==void 0||se!==void 0){Y||(Y="range");var ae=o.nestedProperty(w,Y).get(),ue=o.simpleMap(ae,w.r2l),ve=ue[1]<ue[0];ve&&ue.reverse();var ye=o.simpleMap([ie,se],w.r2l);if(ie!==void 0&&ue[0]<ye[0]&&(ae[ve?1:0]=ie),se!==void 0&&ue[1]>ye[1]&&(ae[ve?0:1]=se),ae[0]===ae[1]){var de=w.l2r(ie),pe=w.l2r(se);if(ie!==void 0){var ge=de+1;se!==void 0&&(ge=Math.min(ge,pe)),ae[ve?1:0]=ge}if(se!==void 0){var ke=pe+1;ie!==void 0&&(ke=Math.max(ke,de)),ae[ve?0:1]=ke}}}},w.cleanRange=function(Y,ie){w._cleanRange(Y,ie),w.limitRange(Y)},w._cleanRange=function(Y,ie){ie||(ie={}),Y||(Y="range");var se,ae,ue=o.nestedProperty(w,Y).get();if(ae=(ae=w.type==="date"?o.dfltRange(w.calendar):C==="y"?y.DFLTRANGEY:w._name==="realaxis"?[0,1]:ie.dfltRange||y.DFLTRANGEX).slice(),w.rangemode!=="tozero"&&w.rangemode!=="nonnegative"||(ae[0]=0),ue&&ue.length===2){var ve=ue[0]===null,ye=ue[1]===null;for(w.type!=="date"||w.autorange||(ue[0]=o.cleanDate(ue[0],l,w.calendar),ue[1]=o.cleanDate(ue[1],l,w.calendar)),se=0;se<2;se++)if(w.type==="date"){if(!o.isDateTime(ue[se],w.calendar)){w[Y]=ae;break}if(w.r2l(ue[0])===w.r2l(ue[1])){var de=o.constrain(w.r2l(ue[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);ue[0]=w.l2r(de-1e3),ue[1]=w.l2r(de+1e3);break}}else{if(!b(ue[se])){if(ve||ye||!b(ue[1-se])){w[Y]=ae;break}ue[se]=ue[1-se]*(se?10:.1)}if(ue[se]<-a?ue[se]=-a:ue[se]>a&&(ue[se]=a),ue[0]===ue[1]){var pe=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=pe,ue[1]+=pe}}}else o.nestedProperty(w,Y).set(ae)},w.setScale=function(Y){var ie=E._size;if(w.overlaying){var se=g.getFromId({_fullLayout:E},w.overlaying);w.domain=se.domain}var ae=Y&&w._r?"_r":"range",ue=w.calendar;w.cleanRange(ae);var ve,ye,de=w.r2l(w[ae][0],ue),pe=w.r2l(w[ae][1],ue),ge=C==="y";if(ge?(w._offset=ie.t+(1-w.domain[1])*ie.h,w._length=ie.h*(w.domain[1]-w.domain[0]),w._m=w._length/(de-pe),w._b=-w._m*pe):(w._offset=ie.l+w.domain[0]*ie.w,w._length=ie.w*(w.domain[1]-w.domain[0]),w._m=w._length/(pe-de),w._b=-w._m*de),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(de,pe),Math.max(de,pe)),w._rangebreaks.length)){for(ve=0;ve<w._rangebreaks.length;ve++)ye=w._rangebreaks[ve],w._lBreaks+=Math.abs(ye.max-ye.min);var ke=ge;de>pe&&(ke=!ke),ke&&w._rangebreaks.reverse();var Ee=ke?-1:1;for(w._m2=Ee*w._length/(Math.abs(pe-de)-w._lBreaks),w._B.push(-w._m2*(ge?pe:de)),ve=0;ve<w._rangebreaks.length;ve++)ye=w._rangebreaks[ve],w._B.push(w._B[w._B.length-1]-Ee*w._m2*(ye.max-ye.min));for(ve=0;ve<w._rangebreaks.length;ve++)(ye=w._rangebreaks[ve]).pmin=ee(ye.min),ye.pmax=ee(ye.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(Y){var ie,se,ae,ue,ve,ye=w.rangebreaks||[];ye._cachedPatterns||(ye._cachedPatterns=ye.map(function(me){return me.enabled&&me.bounds?o.simpleMap(me.bounds,me.pattern?p:w.d2c):null})),ye._cachedValues||(ye._cachedValues=ye.map(function(me){return me.enabled&&me.values?o.simpleMap(me.values,w.d2c).sort(o.sorterAsc):null}));for(var de=0;de<ye.length;de++){var pe=ye[de];if(pe.enabled){if(pe.bounds){var ge=pe.pattern;switch(se=(ie=ye._cachedPatterns[de])[0],ae=ie[1],ge){case _:ue=(ve=new Date(Y)).getUTCDay(),se>ae&&(ae+=7,ue<se&&(ue+=7));break;case v:ue=(ve=new Date(Y)).getUTCHours()+(ve.getUTCMinutes()/60+ve.getUTCSeconds()/3600+ve.getUTCMilliseconds()/36e5),se>ae&&(ae+=24,ue<se&&(ue+=24));break;case"":ue=Y}if(ue>=se&&ue<ae)return l}else for(var ke=ye._cachedValues[de],Ee=0;Ee<ke.length;Ee++)if(ae=(se=ke[Ee])+pe.dvalue,Y>=se&&Y<ae)return l}}return Y},w.locateBreaks=function(Y,ie){var se,ae,ue,ve,ye=[];if(!w.rangebreaks)return ye;var de=w.rangebreaks.slice().sort(function(we,Me){return we.pattern===_&&Me.pattern===v?-1:Me.pattern===_&&we.pattern===v?1:0}),pe=function(we,Me){if((we=o.constrain(we,Y,ie))!==(Me=o.constrain(Me,Y,ie))){for(var Ie=!0,Oe=0;Oe<ye.length;Oe++){var he=ye[Oe];we<he.max&&Me>=he.min&&(we<he.min&&(he.min=we),Me>he.max&&(he.max=Me),Ie=!1)}Ie&&ye.push({min:we,max:Me})}};for(se=0;se<de.length;se++){var ge=de[se];if(ge.enabled)if(ge.bounds){var ke=Y,Ee=ie;ge.pattern&&(ke=Math.floor(ke)),ue=(ae=o.simpleMap(ge.bounds,ge.pattern?p:w.r2l))[0],ve=ae[1];var me,oe,re=new Date(ke);switch(ge.pattern){case _:oe=h,me=(ve-ue+(ve<ue?7:0))*u,ke+=ue*u-(re.getUTCDay()*u+re.getUTCHours()*x+re.getUTCMinutes()*d+re.getUTCSeconds()*m+re.getUTCMilliseconds());break;case v:oe=u,me=(ve-ue+(ve<ue?24:0))*x,ke+=ue*x-(re.getUTCHours()*x+re.getUTCMinutes()*d+re.getUTCSeconds()*m+re.getUTCMilliseconds());break;default:ke=Math.min(ae[0],ae[1]),me=oe=(Ee=Math.max(ae[0],ae[1]))-ke}for(var fe=ke;fe<Ee;fe+=oe)pe(fe,fe+me)}else for(var Se=o.simpleMap(ge.values,w.d2c),be=0;be<Se.length;be++)pe(ue=Se[be],ve=ue+ge.dvalue)}return ye.sort(function(we,Me){return we.min-Me.min}),ye},w.makeCalcdata=function(Y,ie,se){var ae,ue,ve,ye,de=w.type,pe=de==="date"&&Y[ie+"calendar"];if(ie in Y){if(ae=Y[ie],ye=Y._length||o.minRowLength(ae),o.isTypedArray(ae)&&(de==="linear"||de==="log")){if(ye===ae.length)return ae;if(ae.subarray)return ae.subarray(0,ye)}if(de==="multicategory")return function(Ee,me){for(var oe=new Array(me),re=0;re<me;re++){var fe=(Ee[0]||[])[re],Se=(Ee[1]||[])[re];oe[re]=W([fe,Se])}return oe}(ae,ye);for(ue=new Array(ye),ve=0;ve<ye;ve++)ue[ve]=w.d2c(ae[ve],0,pe,se)}else{var ge=ie+"0"in Y?w.d2c(Y[ie+"0"],0,pe):0,ke=Y["d"+ie]?Number(Y["d"+ie]):1;for(ae=Y[{x:"y",y:"x"}[ie]],ye=Y._length||ae.length,ue=new Array(ye),ve=0;ve<ye;ve++)ue[ve]=ge+ve*ke}if(w.rangebreaks)for(ve=0;ve<ye;ve++)ue[ve]=w.maskBreaks(ue[ve]);return ue},w.isValidRange=function(Y,ie){return Array.isArray(Y)&&Y.length===2&&(ie&&Y[0]===null||b(w.r2l(Y[0])))&&(ie&&Y[1]===null||b(w.r2l(Y[1])))},w.getAutorangeDflt=function(Y,ie){var se=!w.isValidRange(Y,"nullOk");return se&&ie&&ie.reverseDflt?se="reversed":Y&&(Y[0]===null&&Y[1]===null?se=!0:Y[0]===null&&Y[1]!==null?se="min":Y[0]!==null&&Y[1]===null&&(se="max")),se},w.isReversed=function(){var Y=w.autorange;return Y==="reversed"||Y==="min reversed"||Y==="max reversed"},w.isPtWithinRange=function(Y,ie){var se=w.c2l(Y[C],null,ie),ae=w.r2l(w.range[0]),ue=w.r2l(w.range[1]);return ae<ue?ae<=se&&se<=ue:ue<=se&&se<=ae},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var Y=w._matchGroup;if(Y){var ie=null,se=null;for(var ae in Y){var ue=E[g.id2name(ae)];if(ue._categories){ie=ue._categories,se=ue._categoriesMap;break}}ie&&se?(w._categories=ie,w._categoriesMap=se):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var ve=0;ve<w._initialCategories.length;ve++)N(w._initialCategories[ve])},w.sortByInitialCategories=function(){var Y=[];if(w._emptyCategories(),w._initialCategories)for(var ie=0;ie<w._initialCategories.length;ie++)N(w._initialCategories[ie]);Y=Y.concat(w._traceIndices);var se=w._matchGroup;for(var ae in se)if(P!==ae){var ue=E[g.id2name(ae)];ue._categories=w._categories,ue._categoriesMap=w._categoriesMap,Y=Y.concat(ue._traceIndices)}return Y};var K=E._d3locale;w.type==="date"&&(w._dateFormat=K?K.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=K?K.numberFormat:T,delete w._minDtick,delete w._forceTick0}},85024:function(X){"use strict";X.exports=function(I){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(A){return I[A]!==void 0});if(e.every(function(A){return I[A]===I[e[0]]})||e.length===1)return I[e[0]]}},95936:function(X,I,e){"use strict";var A=e(3400),k=e(76308).contrast,o=e(94724),T=e(85024),b=e(51272);function p(s,t){function i(n,r){return A.coerce(s,t,o.tickformatstops,n,r)}i("enabled")&&(i("dtickrange"),i("value"))}X.exports=function(s,t,i,n,r){r||(r={});var a=i("labelalias");A.isPlainObject(a)||delete t.labelalias;var l=T(s);if(i("showticklabels")){var c=r.font||{},h=t.color,u=(t.ticklabelposition||"").indexOf("inside")!==-1?k(r.bgColor):h&&h!==o.color.dflt?h:c.color;if(A.coerceFont(i,"tickfont",c,{overrideDflt:{color:u}}),r.noTicklabelstep||n==="multicategory"||n==="log"||i("ticklabelstep"),!r.noAng){var x=i("tickangle");r.noAutotickangles||x!=="auto"||i("autotickangles")}if(n!=="category"){var d=i("tickformat");b(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),t.tickformatstops.length||delete t.tickformatstops,r.noExp||d||n==="date"||(i("showexponent",l),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(X,I,e){"use strict";var A=e(3400),k=e(94724);X.exports=function(o,T,b,p){var s=p.isMinor,t=s?o.minor||{}:o,i=s?T.minor:T,n=s?k.minor:k,r=s?"minor.":"",a=A.coerce2(t,i,n,"ticklen",s?.6*(T.ticklen||5):void 0),l=A.coerce2(t,i,n,"tickwidth",s?T.tickwidth||1:void 0),c=A.coerce2(t,i,n,"tickcolor",(s?T.tickcolor:void 0)||i.color);b(r+"ticks",!s&&p.outerTicks||a||l||c?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(X,I,e){"use strict";var A=e(98728),k=e(3400).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;X.exports=function(b,p,s,t,i){i||(i={});var n=i.isMinor,r=n?b.minor||{}:b,a=n?p.minor:p,l=n?"minor.":"";function c(g){var y=r[g];return o(y)&&(y=T(y)),y!==void 0?y:(a._template||{})[g]}var h=c("tick0"),u=c("dtick"),x=c("tickvals"),d=s(l+"tickmode",k(x)?"array":u?"linear":"auto");if(d==="auto"||d==="sync")s(l+"nticks");else if(d==="linear"){var m=a.dtick=A.dtick(u,t);a.tick0=A.tick0(h,t,p.calendar,m)}else t!=="multicategory"&&(s(l+"tickvals")===void 0?a.tickmode="auto":n||s("ticktext"))}},73736:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(3400),T=e(43616),b=e(54460);X.exports=function(p,s,t,i){var n=p._fullLayout;if(s.length!==0){var r,a,l,c;i&&(r=i());var h=A.ease(t.easing);return p._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var d={},m=0;m<s.length;m++){var g=s[m],y=g.plotinfo.xaxis,v=g.plotinfo.yaxis;g.xr0&&(d[y._name+".range"]=g.xr0.slice()),g.yr0&&(d[v._name+".range"]=g.yr0.slice())}return k.call("relayout",p,d).then(function(){for(var _=0;_<s.length;_++)u(s[_].plotinfo)})}()}),a=Date.now(),c=window.requestAnimationFrame(function d(){l=Date.now();for(var m=Math.min(1,(l-a)/t.duration),g=h(m),y=0;y<s.length;y++)x(s[y],g);l-a>t.duration?(function(){for(var v={},_=0;_<s.length;_++){var f=s[_],S=f.plotinfo.xaxis,w=f.plotinfo.yaxis;f.xr1&&(v[S._name+".range"]=f.xr1.slice()),f.yr1&&(v[w._name+".range"]=f.yr1.slice())}r&&r(),k.call("relayout",p,v).then(function(){for(var E=0;E<s.length;E++)u(s[E].plotinfo)})}(),c=window.cancelAnimationFrame(d)):c=window.requestAnimationFrame(d)}),Promise.resolve()}function u(d){var m=d.xaxis,g=d.yaxis;n._defs.select("#"+d.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),d.plot.call(T.setTranslate,m._offset,g._offset).call(T.setScale,1,1);var y=d.plot.selectAll(".scatterlayer .trace");y.selectAll(".point").call(T.setPointGroupScale,1,1),y.selectAll(".textpoint").call(T.setTextPointsScale,1,1),y.call(T.hideOutsideRangePoints,d)}function x(d,m){var g=d.plotinfo,y=g.xaxis,v=g.yaxis,_=y._length,f=v._length,S=!!d.xr1,w=!!d.yr1,E=[];if(S){var P=o.simpleMap(d.xr0,y.r2l),C=o.simpleMap(d.xr1,y.r2l),O=P[1]-P[0],R=C[1]-C[0];E[0]=(P[0]*(1-m)+m*C[0]-P[0])/(P[1]-P[0])*_,E[2]=_*(1-m+m*R/O),y.range[0]=y.l2r(P[0]*(1-m)+m*C[0]),y.range[1]=y.l2r(P[1]*(1-m)+m*C[1])}else E[0]=0,E[2]=_;if(w){var U=o.simpleMap(d.yr0,v.r2l),D=o.simpleMap(d.yr1,v.r2l),N=U[1]-U[0],W=D[1]-D[0];E[1]=(U[1]*(1-m)+m*D[1]-U[1])/(U[0]-U[1])*f,E[3]=f*(1-m+m*W/N),v.range[0]=y.l2r(U[0]*(1-m)+m*D[0]),v.range[1]=v.l2r(U[1]*(1-m)+m*D[1])}else E[1]=0,E[3]=f;b.drawOne(p,y,{skipTitle:!0}),b.drawOne(p,v,{skipTitle:!0}),b.redrawComponents(p,[y._id,v._id]);var F=S?_/E[2]:1,j=w?f/E[3]:1,q=S?E[0]:0,te=w?E[1]:0,ee=S?E[0]/E[2]*_:0,Q=w?E[1]/E[3]*f:0,J=y._offset-ee,K=v._offset-Q;g.clipRect.call(T.setTranslate,q,te).call(T.setScale,1/F,1/j),g.plot.call(T.setTranslate,J,K).call(T.setScale,F,j),T.setPointGroupScale(g.zoomScalePts,1/F,1/j),T.setTextPointsScale(g.zoomScaleTxt,1/F,1/j)}b.redrawComponents(p)}},14944:function(X,I,e){"use strict";var A=e(24040).traceIs,k=e(52976);function o(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,p){var s=o(b),t=A(b,"box-violin"),i=A(b._fullInput||{},"candlestick");return t&&!i&&p===s&&b[s]===void 0&&b[s+"0"]===void 0}X.exports=function(b,p,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(i,n){if(i.type==="-"){var r,a=i._id,l=a.charAt(0);a.indexOf("scene")!==-1&&(a=l);var c=function(v,_,f){for(var S=0;S<v.length;S++){var w=v[S];if(w.type==="splom"&&w._length>0&&(w["_"+f+"axes"]||{})[_]||(w[f+"axis"]||f)===_&&(T(w,f)||(w[f]||[]).length||w[f+"0"]))return w}}(n,a,l);if(c)if(c.type!=="histogram"||l!=={v:"y",h:"x"}[c.orientation||"v"]){var h=l+"calendar",u=c[h],x={noMultiCategory:!A(c,"cartesian")||A(c,"noMultiCategory")};if(c.type==="box"&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,T(c,l)){var d=o(c),m=[];for(r=0;r<n.length;r++){var g=n[r];A(g,"box-violin")&&(g[l+"axis"]||l)===a&&(g[d]!==void 0?m.push(g[d][0]):g.name!==void 0?m.push(g.name):m.push("text"),g[h]!==u&&(u=void 0))}i.type=k(m,u,x)}else if(c.type==="splom"){var y=c.dimensions[c._axesDim[a]];y.visible&&(i.type=k(y.values,u,x))}else i.type=k(c[l]||[c[l+"0"]],u,x)}else i.type="linear"}}(p,t.data),p.type==="-"?p.type="linear":b.type=p.type)}},62460:function(X,I,e){"use strict";var A=e(24040),k=e(3400);function o(s,t,i){var n,r,a,l=!1;if(t.type==="data")n=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;n=s._fullLayout}return r=k.nestedProperty(n,t.prop).get(),(a=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==r&&(l=!0),a[t.prop]=r,{changed:l,value:r}}function T(s,t){var i=[],n=t[0],r={};if(typeof n=="string")r[n]=t[1];else{if(!k.isPlainObject(n))return i;r=n}return p(r,function(a,l,c){i.push({type:"layout",prop:a,value:c})},"",0),i}function b(s,t){var i,n,r,a,l=[];if(n=t[0],r=t[1],i=t[2],a={},typeof n=="string")a[n]=r;else{if(!k.isPlainObject(n))return l;a=n,i===void 0&&(i=r)}return i===void 0&&(i=null),p(a,function(c,h,u){var x,d;if(Array.isArray(u)){d=u.slice();var m=Math.min(d.length,s.data.length);i&&(m=Math.min(m,i.length)),x=[];for(var g=0;g<m;g++)x[g]=i?i[g]:g}else d=u,x=i?i.slice():null;if(x===null)Array.isArray(d)&&(d=d[0]);else if(Array.isArray(x)){if(!Array.isArray(d)){var y=d;d=[];for(var v=0;v<x.length;v++)d[v]=y}d.length=Math.min(x.length,d.length)}l.push({type:"data",prop:c,traces:x,value:d})},"",0),l}function p(s,t,i,n){Object.keys(s).forEach(function(r){var a=s[r];if(r[0]!=="_"){var l=i+(n>0?".":"")+r;k.isPlainObject(a)?p(a,t,l,n+1):t(l,r,a)}})}I.manageCommandObserver=function(s,t,i,n){var r={},a=!0;t&&t._commandObserver&&(r=t._commandObserver),r.cache||(r.cache={}),r.lookupTable={};var l=I.hasSimpleAPICommandBindings(s,i,r.lookupTable);if(t&&t._commandObserver){if(l)return r;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,r}if(l){o(s,l,r.cache),r.check=function(){if(a){var u=o(s,l,r.cache);return u.changed&&n&&r.lookupTable[u.value]!==void 0&&(r.disable(),Promise.resolve(n({value:u.value,type:l.type,prop:l.prop,traces:l.traces,index:r.lookupTable[u.value]})).then(r.enable,r.enable)),u.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<c.length;h++)s._internalOn(c[h],r.check);r.remove=function(){for(var u=0;u<c.length;u++)s._removeInternalListener(c[u],r.check)}}else k.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){a=!1},r.enable=function(){a=!0},t&&(t._commandObserver=r),r},I.hasSimpleAPICommandBindings=function(s,t,i){var n,r,a=t.length;for(n=0;n<a;n++){var l,c=t[n],h=c.method,u=c.args;if(Array.isArray(u)||(u=[]),!h)return!1;var x=I.computeAPICommandBindings(s,h,u);if(x.length!==1)return!1;if(r){if((l=x[0]).type!==r.type||l.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var d=0;d<r.traces.length;d++)if(r.traces[d]!==l.traces[d])return!1}else if(l.prop!==r.prop)return!1}else r=x[0],Array.isArray(r.traces)&&r.traces.sort();var m=(l=x[0]).value;if(Array.isArray(m)){if(m.length!==1)return!1;m=m[0]}i&&(i[m]=n)}return r},I.executeAPICommand=function(s,t,i){if(t==="skip")return Promise.resolve();var n=A.apiMethodRegistry[t],r=[s];Array.isArray(i)||(i=[]);for(var a=0;a<i.length;a++)r.push(i[a]);return n.apply(null,r).catch(function(l){return k.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},I.computeAPICommandBindings=function(s,t,i){var n;switch(Array.isArray(i)||(i=[]),t){case"restyle":n=b(s,i);break;case"relayout":n=T(0,i);break;case"update":n=b(s,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":n=function(r,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,i);break;default:n=[]}return n}},86968:function(X,I,e){"use strict";var A=e(92880).extendFlat;I.u=function(k,o){o=o||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,o.description&&o.description,{x:A({},T,{}),y:A({},T,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},I.Q=function(k,o,T,b){var p=b&&b.x||[0,1],s=b&&b.y||[0,1],t=o.grid;if(t){var i=T("domain.column");i!==void 0&&(i<t.columns?p=t._domains.x[i]:delete k.domain.column);var n=T("domain.row");n!==void 0&&(n<t.rows?s=t._domains.y[n]:delete k.domain.row)}var r=T("domain.x",p),a=T("domain.y",s);r[0]<r[1]||(k.domain.x=p.slice()),a[0]<a[1]||(k.domain.y=s.slice())}},25376:function(X){"use strict";X.exports=function(I){var e=I.variantValues,A=I.editType,k=I.colorEditType;k===void 0&&(k=A);var o={editType:A,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};I.noNumericWeightValues&&(o.valType="enumerated",o.values=o.extras,o.extras=void 0,o.min=void 0,o.max=void 0);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:A},size:{valType:"number",min:1,editType:A},color:{valType:"color",editType:k},weight:o,style:{editType:A,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:I.noFontVariant?void 0:{editType:A,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:I.noFontTextcase?void 0:{editType:A,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:I.noFontLineposition?void 0:{editType:A,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:I.noFontShadow?void 0:{editType:A,valType:"string",dflt:I.autoShadowDflt?"auto":"none"},editType:A};return I.autoSize&&(T.size.dflt="auto"),I.autoColor&&(T.color.dflt="auto"),I.arrayOk&&(T.family.arrayOk=!0,T.weight.arrayOk=!0,T.style.arrayOk=!0,I.noFontVariant||(T.variant.arrayOk=!0),I.noFontTextcase||(T.textcase.arrayOk=!0),I.noFontLineposition||(T.lineposition.arrayOk=!0),I.noFontShadow||(T.shadow.arrayOk=!0),T.size.arrayOk=!0,T.color.arrayOk=!0),T}},16672:function(X){"use strict";X.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(X,I){"use strict";I.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},I.axesNames=["lonaxis","lataxis"],I.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},I.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},I.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},I.clipPad=.001,I.precision=.1,I.landColor="#F0DC82",I.waterColor="#3399FF",I.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},I.sphereSVG={type:"Sphere"},I.fillLayers={ocean:1,land:1,lakes:1},I.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},I.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],I.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],I.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(X,I,e){"use strict";var A=e(33428),k=e(83356),o=k.geoPath,T=k.geoDistance,b=e(87108),p=e(24040),s=e(3400),t=s.strTranslate,i=e(76308),n=e(43616),r=e(93024),a=e(7316),l=e(54460),c=e(19280).getAutoRange,h=e(86476),u=e(22676).prepSelect,x=e(22676).clearOutline,d=e(22676).selectOnClick,m=e(79248),g=e(79552),y=e(27144),v=e(59972),_=e(55712).NO;function f(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=f.prototype;function w(E,P){var C=g.clipPad,O=E[0]+C,R=E[1]-C,U=P[0]+C,D=P[1]-C;O>0&&R<0&&(R+=360);var N=(R-O)/4;return{type:"Polygon",coordinates:[[[O,U],[O,D],[O+N,D],[O+2*N,D],[O+3*N,D],[R,D],[R,U],[R-N,U],[R-2*N,U],[R-3*N,U],[O,U]]]}}X.exports=function(E){return new f(E)},S.plot=function(E,P,C,O){var R=this;if(O)return R.update(E,P,!0);R._geoCalcData=E,R._fullLayout=P;var U=P[this.id],D=[],N=!1;for(var W in g.layerNameToAdjective)if(W!=="frame"&&U["show"+W]){N=!0;break}for(var F=!1,j=0;j<E.length;j++){var q=E[0][0].trace;q._geo=R,q.locationmode&&(N=!0);var te=q.marker;if(te){var ee=te.angle,Q=te.angleref;(ee||Q==="north"||Q==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,N){var J=v.getTopojsonName(U);R.topojson!==null&&J===R.topojsonName||(R.topojsonName=J,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&D.push(R.fetchTopojson()))}D=D.concat(y.fetchTraceGeoData(E)),C.push(new Promise(function(K,Y){Promise.all(D).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(E,P),K()}).catch(Y)}))},S.fetchTopojson=function(){var E=this,P=v.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,O){A.json(P,function(R,U){if(R)return R.status===404?O(new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):O(new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=U,C()})})},S.update=function(E,P,C){var O=P[this.id];this.hasChoropleth=!1;for(var R=0;R<E.length;R++){var U=E[R],D=U[0].trace;D.type==="choropleth"&&(this.hasChoropleth=!0),D.visible===!0&&D._length>0&&D._module.calcGeoJSON(U,P)}if(!C){if(this.updateProjection(E,P))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(P,O),this.updateDims(P,O),this.updateFx(P,O),a.generalUpdatePerTraceModule(this.graphDiv,this,E,O);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this._render()},S.updateProjection=function(E,P){var C=this.graphDiv,O=P[this.id],R=P._size,U=O.domain,D=O.projection,N=O.lonaxis,W=O.lataxis,F=N._ax,j=W._ax,q=this.projection=function(re){var fe=re.projection,Se=fe.type,be=g.projNames[Se];be="geo"+s.titleCase(be);for(var we=(k[be]||b[be])(),Me=re._isSatellite?180*Math.acos(1/fe.distance)/Math.PI:re._isClipped?g.lonaxisSpan[Se]/2:null,Ie=["center","rotate","parallels","clipExtent"],Oe=function(Ae){return Ae?we:[]},he=0;he<Ie.length;he++){var _e=Ie[he];typeof we[_e]!="function"&&(we[_e]=Oe)}return we.isLonLatOverEdges=function(Ae){if(we(Ae)===null)return!0;if(Me){var De=we.rotate();return T(Ae,[-De[0],-De[1]])>Me*Math.PI/180}return!1},we.getPath=function(){return o().projection(we)},we.getBounds=function(Ae){return we.getPath().bounds(Ae)},we.precision(g.precision),re._isSatellite&&we.tilt(fe.tilt).distance(fe.distance),Me&&we.clipAngle(Me-g.clipPad),we}(O),te=[[R.l+R.w*U.x[0],R.t+R.h*(1-U.y[1])],[R.l+R.w*U.x[1],R.t+R.h*(1-U.y[0])]],ee=O.center||{},Q=D.rotation||{},J=N.range||[],K=W.range||[];if(O.fitbounds){F._length=te[1][0]-te[0][0],j._length=te[1][1]-te[0][1],F.range=c(C,F),j.range=c(C,j);var Y=(F.range[0]+F.range[1])/2,ie=(j.range[0]+j.range[1])/2;if(O._isScoped)ee={lon:Y,lat:ie};else if(O._isClipped){ee={lon:Y,lat:ie},Q={lon:Y,lat:ie,roll:Q.roll};var se=D.type,ae=g.lonaxisSpan[se]/2||180,ue=g.lataxisSpan[se]/2||90;J=[Y-ae,Y+ae],K=[ie-ue,ie+ue]}else ee={lon:Y,lat:ie},Q={lon:Y,lat:Q.lat,roll:Q.roll}}q.center([ee.lon-Q.lon,ee.lat-Q.lat]).rotate([-Q.lon,-Q.lat,Q.roll]).parallels(D.parallels);var ve=w(J,K);q.fitExtent(te,ve);var ye=this.bounds=q.getBounds(ve),de=this.fitScale=q.scale(),pe=q.translate();if(O.fitbounds){var ge=q.getBounds(w(F.range,j.range)),ke=Math.min((ye[1][0]-ye[0][0])/(ge[1][0]-ge[0][0]),(ye[1][1]-ye[0][1])/(ge[1][1]-ge[0][1]));isFinite(ke)?q.scale(ke*de):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(D.scale*de);var Ee=this.midPt=[(ye[0][0]+ye[1][0])/2,(ye[0][1]+ye[1][1])/2];if(q.translate([pe[0]+(Ee[0]-pe[0]),pe[1]+(Ee[1]-pe[1])]).clipExtent(ye),O._isAlbersUsa){var me=q([ee.lon,ee.lat]),oe=q.translate();q.translate([oe[0]-(me[0]-oe[0]),oe[1]-(me[1]-oe[1])])}},S.updateBaseLayers=function(E,P){var C=this,O=C.topojson,R=C.layers,U=C.basePaths;function D(q){return q==="lonaxis"||q==="lataxis"}function N(q){return!!g.lineLayers[q]}function W(q){return!!g.fillLayers[q]}var F=(this.hasChoropleth?g.layersForChoropleth:g.layers).filter(function(q){return N(q)||W(q)?P["show"+q]:!D(q)||P[q].showgrid}),j=C.framework.selectAll(".layer").data(F,String);j.exit().each(function(q){delete R[q],delete U[q],A.select(this).remove()}),j.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var te=R[q]=A.select(this);q==="bg"?C.bgRect=te.append("rect").style("pointer-events","all"):D(q)?U[q]=te.append("path").style("fill","none"):q==="backplot"?te.append("g").classed("choroplethlayer",!0):q==="frontplot"?te.append("g").classed("scatterlayer",!0):N(q)?U[q]=te.append("path").style("fill","none").style("stroke-miterlimit",2):W(q)&&(U[q]=te.append("path").style("stroke","none"))}),j.order(),j.each(function(q){var te=U[q],ee=g.layerNameToAdjective[q];q==="frame"?te.datum(g.sphereSVG):N(q)||W(q)?te.datum(_(O,O.objects[q])):D(q)&&te.datum(function(Q,J,K){var Y,ie,se,ae=J[Q],ue=g.scopeDefaults[J.scope];Q==="lonaxis"?(Y=ue.lonaxisRange,ie=ue.lataxisRange,se=function(oe,re){return[oe,re]}):Q==="lataxis"&&(Y=ue.lataxisRange,ie=ue.lonaxisRange,se=function(oe,re){return[re,oe]});var ve={type:"linear",range:[Y[0],Y[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};l.setConvert(ve,K);var ye=l.calcTicks(ve);J.isScoped||Q!=="lonaxis"||ye.pop();for(var de=ye.length,pe=new Array(de),ge=0;ge<de;ge++)for(var ke=ye[ge].x,Ee=pe[ge]=[],me=ie[0];me<ie[1]+2.5;me+=2.5)Ee.push(se(ke,me));return{type:"MultiLineString",coordinates:pe}}(q,P,E)).call(i.stroke,P[q].gridcolor).call(n.dashLine,P[q].griddash,P[q].gridwidth),N(q)?te.call(i.stroke,P[ee+"color"]).call(n.dashLine,"",P[ee+"width"]):W(q)&&te.call(i.fill,P[ee+"color"])})},S.updateDims=function(E,P){var C=this.bounds,O=(P.framewidth||0)/2,R=C[0][0]-O,U=C[0][1]-O,D=C[1][0]-R+O,N=C[1][1]-U+O;n.setRect(this.clipRect,R,U,D,N),this.bgRect.call(n.setRect,R,U,D,N).call(i.fill,P.bgcolor),this.xaxis._offset=R,this.xaxis._length=D,this.yaxis._offset=U,this.yaxis._length=N},S.updateFx=function(E,P){var C=this,O=C.graphDiv,R=C.bgRect,U=E.dragmode,D=E.clickmode;if(!C.isStatic){var N={element:C.bgRect.node(),gd:O,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(F,j){j.isRect?(F.range={})[C.id]=[W([j.xmin,j.ymin]),W([j.xmax,j.ymax])]:(F.lassoPoints={})[C.id]=j.map(W)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(F){F===2&&x(O)}};U==="pan"?(R.node().onmousedown=null,R.call(m(C,P)),R.on("dblclick.zoom",function(){var F=C.viewInitial,j={};for(var q in F)j[C.id+"."+q]=F[q];p.call("_guiRelayout",O,j),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||R.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(R.on(".zoom",null),N.prepFn=function(F,j,q){u(F,j,q,N,U)},h.init(N)),R.on("mousemove",function(){var F=C.projection.invert(s.getPositionFromD3Event());if(!F)return h.unhover(O,A.event);C.xaxis.p2c=function(){return F[0]},C.yaxis.p2c=function(){return F[1]},r.hover(O,A.event,C.id)}),R.on("mouseout",function(){O._dragging||h.unhover(O,A.event)}),R.on("click",function(){U!=="select"&&U!=="lasso"&&(D.indexOf("select")>-1&&d(A.event,O,[C.xaxis],[C.yaxis],C.id,N),D.indexOf("event")>-1&&r.click(O,A.event))})}function W(F){return C.projection.invert([F[0]+C.xaxis._offset,F[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,P=E.graphDiv,C=P._fullLayout,O="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",O),E.clipRect=E.clipDef.append("rect"),E.framework=A.select(E.container).append("g").attr("class","geo "+E.id).call(n.setClipUrl,O,P),E.project=function(R){var U=E.projection(R);return U?[U[0]-E.xaxis._offset,U[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(R){return E.project(R)[0]}},E.yaxis={_id:"y",c2p:function(R){return E.project(R)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var P,C=E.center||{},O=E.projection,R=O.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":O.scale},P=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":R.lon},s.extendFlat(this.viewInitial,P)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,P=this.projection,C=P.getPath();function O(U){var D=P(U.lonlat);return D?t(D[0],D[1]):null}function R(U){return P.isLonLatOverEdges(U.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(U){return C(U.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",R).attr("transform",O)}},10816:function(X,I,e){"use strict";var A=e(84888).KY,k=e(3400).counterRegex,o=e(43520),T="geo",b=k(T),p={};p[T]={valType:"subplotid",dflt:T,editType:"calc"},X.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:p,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(s){for(var t=s._fullLayout,i=s.calcdata,n=t._subplots[T],r=0;r<n.length;r++){var a=n[r],l=A(i,T,a),c=t[a]._subplot;c||(c=o({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=c),c.plot(l,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,i=t._subplots[T],n=0;n<i.length;n++){var r=t[i[n]];r._subplot.updateFx(t,r)}},clean:function(s,t,i,n){for(var r=n._subplots[T]||[],a=0;a<r.length;a++){var l=r[a],c=n[l]._subplot;!t[l]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},40384:function(X,I,e){"use strict";var A=e(22548),k=e(86968).u,o=e(98192).u,T=e(79552),b=e(67824).overrideAll,p=e(95376),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:A.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o};(X.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:p(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:p(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:A.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:A.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:A.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:A.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:A.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(X,I,e){"use strict";var A=e(3400),k=e(168),o=e(84888).op,T=e(79552),b=e(40384),p=T.axesNames;function s(t,i,n,r){var a=o(r.fullData,"geo",r.id).map(function(Q){return Q._expandedIndex}),l=n("resolution"),c=n("scope"),h=T.scopeDefaults[c],u=n("projection.type",h.projType),x=i._isAlbersUsa=u==="albers usa";x&&(c=i.scope="usa");var d=i._isScoped=c!=="world",m=i._isSatellite=u==="satellite",g=i._isConic=u.indexOf("conic")!==-1||u==="albers",y=i._isClipped=!!T.lonaxisSpan[u];if(t.visible===!1){var v=A.extendDeep({},i._template);v.showcoastlines=!1,v.showcountries=!1,v.showframe=!1,v.showlakes=!1,v.showland=!1,v.showocean=!1,v.showrivers=!1,v.showsubunits=!1,v.lonaxis&&(v.lonaxis.showgrid=!1),v.lataxis&&(v.lataxis.showgrid=!1),i._template=v}for(var _=n("visible"),f=0;f<p.length;f++){var S,w=p[f],E=[30,10][f];if(d)S=h[w+"Range"];else{var P=T[w+"Span"],C=(P[u]||P["*"])/2,O=n("projection.rotation."+w.substr(0,3),h.projRotate[f]);S=[O-C,O+C]}var R=n(w+".range",S);n(w+".tick0"),n(w+".dtick",E),n(w+".showgrid",!!_&&void 0)&&(n(w+".gridcolor"),n(w+".gridwidth"),n(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:a,setScale:A.identity,c2l:A.identity,r2l:A.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var U=i.lonaxis.range,D=i.lataxis.range,N=U[0],W=U[1];N>0&&W<0&&(W+=360);var F,j,q,te=(N+W)/2;if(!x){var ee=d?h.projRotate:[te,0,0];F=n("projection.rotation.lon",ee[0]),n("projection.rotation.lat",ee[1]),n("projection.rotation.roll",ee[2]),n("showcoastlines",!d&&_)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!_&&void 0)&&n("oceancolor")}x?(j=-96.6,q=38.7):(j=d?te:F,q=(D[0]+D[1])/2),n("center.lon",j),n("center.lat",q),m&&(n("projection.tilt"),n("projection.distance")),g&&n("projection.parallels",h.projParallels||[0,60]),n("projection.scale"),n("showland",!!_&&void 0)&&n("landcolor"),n("showlakes",!!_&&void 0)&&n("lakecolor"),n("showrivers",!!_&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",d&&c!=="usa"&&_)&&(n("countrycolor"),n("countrywidth")),(c==="usa"||c==="north america"&&l===50)&&(n("showsubunits",_),n("subunitcolor"),n("subunitwidth")),d||n("showframe",_)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete i.projection.scale,d?(delete i.center.lon,delete i.center.lat):y?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}X.exports=function(t,i,n){k(t,i,n,{type:"geo",attributes:b,handleDefaults:s,fullData:n,partition:"y"})}},79248:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(24040),T=Math.PI/180,b=180/Math.PI,p={cursor:"pointer"},s={cursor:"auto"};function t(d,m){return A.behavior.zoom().translate(m.translate()).scale(m.scale())}function i(d,m,g){var y=d.id,v=d.graphDiv,_=v.layout,f=_[y],S=v._fullLayout,w=S[y],E={},P={};function C(O,R){E[y+"."+O]=k.nestedProperty(f,O).get(),o.call("_storeDirectGUIEdit",_,S._preGUI,E);var U=k.nestedProperty(w,O);U.get()!==R&&(U.set(R),k.nestedProperty(f,O).set(R),P[y+"."+O]=R)}g(C),C("projection.scale",m.scale()/d.fitScale),C("fitbounds",!1),v.emit("plotly_relayout",P)}function n(d,m){var g=t(0,m);function y(v){var _=m.invert(d.midPt);v("center.lon",_[0]),v("center.lat",_[1])}return g.on("zoomstart",function(){A.select(this).style(p)}).on("zoom",function(){m.scale(A.event.scale).translate(A.event.translate),d.render(!0);var v=m.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",function(){A.select(this).style(s),i(d,m,y)}),g}function r(d,m){var g,y,v,_,f,S,w,E,P,C=t(0,m);function O(U){return m.invert(U)}function R(U){var D=m.rotate(),N=m.invert(d.midPt);U("projection.rotation.lon",-D[0]),U("center.lon",N[0]),U("center.lat",N[1])}return C.on("zoomstart",function(){A.select(this).style(p),g=A.mouse(this),y=m.rotate(),v=m.translate(),_=y,f=O(g)}).on("zoom",function(){if(S=A.mouse(this),function(N){var W=O(N);if(!W)return!0;var F=m(W);return Math.abs(F[0]-N[0])>2||Math.abs(F[1]-N[1])>2}(g))return C.scale(m.scale()),void C.translate(m.translate());m.scale(A.event.scale),m.translate([v[0],A.event.translate[1]]),f?O(S)&&(E=O(S),w=[_[0]+(E[0]-f[0]),y[1],y[2]],m.rotate(w),_=w):f=O(g=S),P=!0,d.render(!0);var U=m.rotate(),D=m.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.center.lon":D[0],"geo.center.lat":D[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){A.select(this).style(s),P&&i(d,m,R)}),C}function a(d,m){var g,y={r:m.rotate(),k:m.scale()},v=t(0,m),_=function(E){for(var P=0,C=arguments.length,O=[];++P<C;)O.push(arguments[P]);var R=A.dispatch.apply(null,O);return R.of=function(U,D){return function(N){var W;try{W=N.sourceEvent=A.event,N.target=E,A.event=N,R[N.type].apply(U,D)}finally{A.event=W}}},R}(v,"zoomstart","zoom","zoomend"),f=0,S=v.on;function w(E){var P=m.rotate();E("projection.rotation.lon",-P[0]),E("projection.rotation.lat",-P[1])}return v.on("zoomstart",function(){A.select(this).style(p);var E,P,C,O,R,U,D,N,W,F,j,q=A.mouse(this),te=m.rotate(),ee=te,Q=m.translate(),J=(P=.5*(E=te)[0]*T,C=.5*E[1]*T,O=.5*E[2]*T,R=Math.sin(P),U=Math.cos(P),D=Math.sin(C),N=Math.cos(C),W=Math.sin(O),[U*N*(F=Math.cos(O))+R*D*W,R*N*F-U*D*W,U*D*F+R*N*W,U*N*W-R*D*F]);g=l(m,q),S.call(v,"zoom",function(){var K,Y,ie,se,ae,ue,ve,ye,de,pe,ge=A.mouse(this);if(m.scale(y.k=A.event.scale),g){if(l(m,ge)){m.rotate(te).translate(Q);var ke=l(m,ge),Ee=function(re,fe){if(re&&fe){var Se=function(Ie,Oe){return[Ie[1]*Oe[2]-Ie[2]*Oe[1],Ie[2]*Oe[0]-Ie[0]*Oe[2],Ie[0]*Oe[1]-Ie[1]*Oe[0]]}(re,fe),be=Math.sqrt(x(Se,Se)),we=.5*Math.acos(Math.max(-1,Math.min(1,x(re,fe)))),Me=Math.sin(we)/be;return be&&[Math.cos(we),Se[2]*Me,-Se[1]*Me,Se[0]*Me]}}(g,ke),me=function(re){return[Math.atan2(2*(re[0]*re[1]+re[2]*re[3]),1-2*(re[1]*re[1]+re[2]*re[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(re[0]*re[2]-re[3]*re[1]))))*b,Math.atan2(2*(re[0]*re[3]+re[1]*re[2]),1-2*(re[2]*re[2]+re[3]*re[3]))*b]}((ie=(K=J)[0],se=K[1],ae=K[2],ue=K[3],[ie*(ve=(Y=Ee)[0])-se*(ye=Y[1])-ae*(de=Y[2])-ue*(pe=Y[3]),ie*ye+se*ve+ae*pe-ue*de,ie*de-se*pe+ae*ve+ue*ye,ie*pe+se*de-ae*ye+ue*ve])),oe=y.r=function(re,fe,Se){var be=u(fe,2,re[0]);be=u(be,1,re[1]),be=u(be,0,re[2]-Se[2]);var we,Me,Ie=fe[0],Oe=fe[1],he=fe[2],_e=be[0],Ae=be[1],De=be[2],Le=Math.atan2(Oe,Ie)*b,Be=Math.sqrt(Ie*Ie+Oe*Oe);Math.abs(Ae)>Be?(Me=(Ae>0?90:-90)-Le,we=0):(Me=Math.asin(Ae/Be)*b-Le,we=Math.sqrt(Be*Be-Ae*Ae));var Ve=180-Me-2*Le,Ze=(Math.atan2(De,_e)-Math.atan2(he,we))*b,rt=(Math.atan2(De,_e)-Math.atan2(he,-we))*b;return c(Se[0],Se[1],Me,Ze)<=c(Se[0],Se[1],Ve,rt)?[Me,Ze,Se[2]]:[Ve,rt,Se[2]]}(me,g,ee);isFinite(oe[0])&&isFinite(oe[1])&&isFinite(oe[2])||(oe=ee),m.rotate(oe),ee=oe}}else g=l(m,q=ge);_.of(this,arguments)({type:"zoom"})}),j=_.of(this,arguments),f++||j({type:"zoomstart"})}).on("zoomend",function(){var E;A.select(this).style(s),S.call(v,"zoom",null),E=_.of(this,arguments),--f||E({type:"zoomend"}),i(d,m,w)}).on("zoom.redraw",function(){d.render(!0);var E=m.rotate();d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":m.scale()/d.fitScale,"geo.projection.rotation.lon":-E[0],"geo.projection.rotation.lat":-E[1]})}),A.rebind(v,_,"on")}function l(d,m){var g=d.invert(m);return g&&isFinite(g[0])&&isFinite(g[1])&&function(y){var v=y[0]*T,_=y[1]*T,f=Math.cos(_);return[f*Math.cos(v),f*Math.sin(v),Math.sin(_)]}(g)}function c(d,m,g,y){var v=h(g-d),_=h(y-m);return Math.sqrt(v*v+_*_)}function h(d){return(d%360+540)%360-180}function u(d,m,g){var y=g*T,v=d.slice(),_=m===0?1:0,f=m===2?1:2,S=Math.cos(y),w=Math.sin(y);return v[_]=d[_]*S-d[f]*w,v[f]=d[f]*S+d[_]*w,v}function x(d,m){for(var g=0,y=0,v=d.length;y<v;++y)g+=d[y]*m[y];return g}X.exports=function(d,m){var g=d.projection;return(m._isScoped?n:m._isClipped?a:r)(d,g)}},84888:function(X,I,e){"use strict";var A=e(24040),k=e(33816).SUBPLOT_PATTERN;I.KY=function(o,T,b){var p=A.subplotsRegistry[T];if(!p)return[];for(var s=p.attr,t=[],i=0;i<o.length;i++){var n=o[i];n[0].trace[s]===b&&t.push(n)}return t},I._M=function(o,T,b){var p,s=[],t=[];if(!(p=typeof T=="string"?A.getModule(T).plot:typeof T=="function"?T:T.plot))return[s,o];for(var i=b,n=0;n<o.length;n++){var r=o[n],a=r[0].trace,l=a.zorder!==void 0;a.visible===!0&&a._length!==0&&(!a._module||a._module.plot!==p||l&&a.zorder!==i?t.push(r):s.push(r))}return[s,t]},I.op=function(o,T,b){if(!A.subplotsRegistry[T])return[];var p,s,t,i=A.subplotsRegistry[T].attr,n=[];if(T==="gl2d"){var r=b.match(k);s="x"+r[1],t="y"+r[2]}for(var a=0;a<o.length;a++)p=o[a],T==="gl2d"&&A.traceIs(p,"gl2d")?p[i[0]]===s&&p[i[1]]===t&&n.push(p):p[i]===b&&n.push(p);return n}},2428:function(X,I,e){"use strict";var A=e(62644),k=e(97264),o=e(29128),T=e(33816),b=e(89184);function p(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}X.exports=function(s){var t=s.mouseContainer,i=s.glplot,n=new p(t,i);function r(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(l,c,h){var u,x,d=s.calcDataBox(),m=i.viewBox,g=n.lastPos[0],y=n.lastPos[1],v=T.MINDRAG*i.pixelRatio,_=T.MINZOOM*i.pixelRatio;function f(O,R,U){var D=Math.min(R,U),N=Math.max(R,U);D!==N?(d[O]=D,d[O+2]=N,n.dataBox=d,s.setRanges(d)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(c*=i.pixelRatio,h*=i.pixelRatio,h=m[3]-m[1]-h,s.fullLayout.dragmode){case"zoom":if(l){var S=c/(m[2]-m[0])*(d[2]-d[0])+d[0],w=h/(m[3]-m[1])*(d[3]-d[1])+d[1];n.boxInited||(n.boxStart[0]=S,n.boxStart[1]=w,n.dragStart[0]=c,n.dragStart[1]=h),n.boxEnd[0]=S,n.boxEnd[1]=w,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var E=Math.abs(n.dragStart[0]-c)<_,P=Math.abs(n.dragStart[1]-h)<_;if(!function(){for(var O=s.graphDiv._fullLayout._axisConstraintGroups,R=s.xaxis._id,U=s.yaxis._id,D=0;D<O.length;D++)if(O[D][R]!==-1){if(O[D][U]!==-1)return!0;break}return!1}()||E&&P)E&&(n.boxEnd[0]=n.boxStart[0]),P&&(n.boxEnd[1]=n.boxStart[1]);else{u=n.boxEnd[0]-n.boxStart[0],x=n.boxEnd[1]-n.boxStart[1];var C=(d[3]-d[1])/(d[2]-d[0]);Math.abs(u*C)>Math.abs(x)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(u)*C*(x>=0?1:-1),n.boxEnd[1]<d[1]?(n.boxEnd[1]=d[1],n.boxEnd[0]=n.boxStart[0]+(d[1]-n.boxStart[1])/Math.abs(C)):n.boxEnd[1]>d[3]&&(n.boxEnd[1]=d[3],n.boxEnd[0]=n.boxStart[0]+(d[3]-n.boxStart[1])/Math.abs(C))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(x)/C*(u>=0?1:-1),n.boxEnd[0]<d[0]?(n.boxEnd[0]=d[0],n.boxEnd[1]=n.boxStart[1]+(d[0]-n.boxStart[0])*Math.abs(C)):n.boxEnd[0]>d[2]&&(n.boxEnd[0]=d[2],n.boxEnd[1]=n.boxStart[1]+(d[2]-n.boxStart[0])*Math.abs(C)))}}else n.boxEnabled?(u=n.boxStart[0]!==n.boxEnd[0],x=n.boxStart[1]!==n.boxEnd[1],u||x?(u&&(f(0,n.boxStart[0],n.boxEnd[0]),s.xaxis.autorange=!1),x&&(f(1,n.boxStart[1],n.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,l?(n.panning||(n.dragStart[0]=c,n.dragStart[1]=h),Math.abs(n.dragStart[0]-c)<v&&(c=n.dragStart[0]),Math.abs(n.dragStart[1]-h)<v&&(h=n.dragStart[1]),u=(g-c)*(d[2]-d[0])/(i.viewBox[2]-i.viewBox[0]),x=(y-h)*(d[3]-d[1])/(i.viewBox[3]-i.viewBox[1]),d[0]+=u,d[2]+=u,d[1]+=x,d[3]+=x,s.setRanges(d),n.panning=!0,n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations()):n.panning&&(n.panning=!1,s.relayoutCallback())}n.lastPos[0]=c,n.lastPos[1]=h}return n.mouseListener=A(t,a),t.addEventListener("touchstart",function(l){var c=o(l.changedTouches[0],t);a(0,c[0],c[1]),a(1,c[0],c[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var c=o(l.changedTouches[0],t);a(1,c[0],c[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(l){a(0,n.lastPos[0],n.lastPos[1]),l.preventDefault()},!!b&&{passive:!1}),n.wheelListener=k(t,function(l,c){if(!s.scrollZoom)return!1;var h=s.calcDataBox(),u=i.viewBox,x=n.lastPos[0],d=n.lastPos[1],m=Math.exp(5*c/(u[3]-u[1])),g=x/(u[2]-u[0])*(h[2]-h[0])+h[0],y=d/(u[3]-u[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-g)*m+g,h[2]=(h[2]-g)*m+g,h[1]=(h[1]-y)*m+y,h[3]=(h[3]-y)*m+y,s.setRanges(h),n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),n}},92568:function(X,I,e){"use strict";var A=e(54460),k=e(43080);function o(p){this.scene=p,this.gl=p.gl,this.pixelRatio=p.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=o.prototype,b=["xaxis","yaxis"];T.merge=function(p){var s,t,i,n,r,a,l,c,h,u,x;for(this.titleEnable=!1,this.backgroundColor=k(p.plot_bgcolor),u=0;u<2;++u){var d=(s=b[u]).charAt(0);for(i=(t=p[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[d]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[u+x]=!1,this.labels[u+x]=i,this.labelColor[u+x]=k(t.title.font.color),this.labelFont[u+x]=t.title.font.family,this.labelSize[u+x]=t.title.font.size,this.labelPad[u+x]=this.getLabelPad(s,t),this.tickEnable[u+x]=!1,this.tickColor[u+x]=k((t.tickfont||{}).color),this.tickAngle[u+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[u+x]=this.getTickPad(t),this.tickMarkLength[u+x]=0,this.tickMarkWidth[u+x]=t.tickwidth||0,this.tickMarkColor[u+x]=k(t.tickcolor),this.borderLineEnable[u+x]=!1,this.borderLineColor[u+x]=k(t.linecolor),this.borderLineWidth[u+x]=t.linewidth||0;l=this.hasSharedAxis(t),r=this.hasAxisInDfltPos(s,t)&&!l,a=this.hasAxisInAltrPos(s,t)&&!l,n=t.mirror||!1,c=l?String(n).indexOf("all")!==-1:!!n,h=l?n==="allticks":String(n).indexOf("ticks")!==-1,r?this.labelEnable[u]=!0:a&&(this.labelEnable[u+2]=!0),r?this.tickEnable[u]=t.showticklabels:a&&(this.tickEnable[u+2]=t.showticklabels),(r||c)&&(this.borderLineEnable[u]=t.showline),(a||c)&&(this.borderLineEnable[u+2]=t.showline),(r||h)&&(this.tickMarkLength[u]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[u+2]=this.getTickMarkLength(t)),this.gridLineEnable[u]=t.showgrid,this.gridLineColor[u]=k(t.gridcolor),this.gridLineWidth[u]=t.gridwidth,this.zeroLineEnable[u]=t.zeroline,this.zeroLineColor[u]=k(t.zerolinecolor),this.zeroLineWidth[u]=t.zerolinewidth}},T.hasSharedAxis=function(p){var s=this.scene,t=s.fullLayout._subplots.gl2d;return A.findSubplotsWithAxis(t,p).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(p,s){var t=s.side;return p==="xaxis"?t==="bottom":p==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(p,s){var t=s.side;return p==="xaxis"?t==="top":p==="yaxis"?t==="right":void 0},T.getLabelPad=function(p,s){var t=1.5,i=s.title.font.size,n=s.showticklabels;return p==="xaxis"?s.side==="top"?i*(t+(n?1:0))-10:i*(t+(n?.5:0))-10:p==="yaxis"?s.side==="right"?10+i*(t+(n?1:.5)):10+i*(t+(n?.5:0)):void 0},T.getTickPad=function(p){return p.ticks==="outside"?10+p.ticklen:15},T.getTickMarkLength=function(p){if(!p.ticks)return 0;var s=p.ticklen;return p.ticks==="inside"?-s:s},X.exports=function(p){return new o(p)}},39952:function(X,I,e){"use strict";var A=e(67824).overrideAll,k=e(17188),o=e(64859),T=e(9616),b=e(33816),p=e(57952),s=e(65460),t=e(84888).op;I.name="gl2d",I.attr=["xaxis","yaxis"],I.idRoot=["x","y"],I.idRegex=b.idRegex,I.attrRegex=b.attrRegex,I.attributes=e(26720),I.supplyLayoutDefaults=function(i,n,r){n._has("cartesian")||p.supplyLayoutDefaults(i,n,r)},I.layoutAttrOverrides=A(p.layoutAttributes,"plot","from-root"),I.baseLayoutAttrOverrides=A({plot_bgcolor:o.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),I.plot=function(i){for(var n=i._fullLayout,r=i._fullData,a=n._subplots.gl2d,l=0;l<a.length;l++){var c=a[l],h=n._plots[c],u=t(r,"gl2d",c),x=h._scene2d;x===void 0&&(x=new k({id:c,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},n),h._scene2d=x),x.plot(u,i.calcdata,n,i.layout)}},I.clean=function(i,n,r,a){for(var l=a._subplots.gl2d||[],c=0;c<l.length;c++){var h=l[c],u=a._plots[h];u._scene2d&&t(i,"gl2d",h).length===0&&(u._scene2d.destroy(),delete a._plots[h])}p.clean.apply(this,arguments)},I.drawFramework=function(i){i._context.staticPlot||p.drawFramework(i)},I.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,a=0;a<r.length;a++){var l=n._plots[r[a]]._scene2d,c=l.toImage("png");n._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},I.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,a=0;a<r.length;a++)n._plots[r[a]]._scene2d.updateFx(n.dragmode)}},17188:function(X,I,e){"use strict";var A,k,o=e(24040),T=e(54460),b=e(93024),p=e(67792).gl_plot2d,s=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),n=e(92568),r=e(2428),a=e(16576),l=e(71888),c=l.enforce,h=l.clean,u=e(19280).doAutoRange,x=e(72760),d=x.drawMode,m=x.selectMode,g=["xaxis","yaxis"],y=e(33816).SUBPLOT_PATTERN;function v(f,S){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(S),this.glplot=p(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}X.exports=v;var _=v.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(A=document.createElement("canvas"),k=i({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=k}else{var f=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=f,this.gl=S}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(P);var O=this;P.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),P.addEventListener("mouseover",function(){O.isMouseOver=!0})},_.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var S=this.glplot.gl,w=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var P=new Uint8Array(w*E*4);S.readPixels(0,0,w,E,S.RGBA,S.UNSIGNED_BYTE,P);for(var C=0,O=E-1;C<O;++C,--O)for(var R=0;R<w;++R)for(var U=0;U<4;++U){var D=P[4*(w*C+R)+U];P[4*(w*C+R)+U]=P[4*(w*O+R)+U],P[4*(w*O+R)+U]=D}var N=document.createElement("canvas");N.width=w,N.height=E;var W,F=N.getContext("2d",{willReadFrequently:!0}),j=F.createImageData(w,E);switch(j.data.set(P),F.putImageData(j,0,0),f){case"jpeg":W=N.toDataURL("image/jpeg");break;case"webp":W=N.toDataURL("image/webp");break;default:W=N.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),W},_.updateSize=function(f){f||(f=this.canvas);var S=this.pixelRatio,w=this.fullLayout,E=w.width,P=w.height,C=0|Math.ceil(S*E),O=0|Math.ceil(S*P);return f.width===C&&f.height===O||(f.width=C,f.height=O),f},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var w=0;w<f[S].length;++w)f[S][w].text=f[S][w].text+"";return f},_.updateRefs=function(f){this.fullLayout=f;var S=this.id.match(y),w="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[w],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var f=this.graphDiv,S=this.xaxis,w=this.yaxis,E=f.layout,P={},C=P[S._name+".range"]=S.range.slice(),O=P[w._name+".range"]=w.range.slice();P[S._name+".autorange"]=S.autorange,P[w._name+".autorange"]=w.autorange,o.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,P);var R=E[S._name];R.range=C,R.autorange=S.autorange;var U=E[w._name];U.range=O,U.autorange=w.autorange,P.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",P)},_.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(w,E){for(var P=0;P<2;++P){var C=w[P],O=E[P];if(C.length!==O.length)return!0;for(var R=0;R<C.length;++R)if(C[R].x!==O[R].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var f=this.graphDiv,S=this.fullLayout.annotations,w=0;w<S.length;w++){var E=S[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&o.getComponentMethod("annotations","drawOne")(f,w)}},_.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(S){f[S].dispose(),delete f[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(f,S,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,S),this.updateFx(w.dragmode);var P=w.width,C=w.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(w),O.screenBox=[0,0,P,C];var R={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};h(R,this.xaxis),h(R,this.yaxis);var U,D,N=w._size,W=this.xaxis.domain,F=this.yaxis.domain;for(O.viewBox=[N.l+W[0]*N.w,N.b+F[0]*N.h,P-N.r-(1-W[1])*N.w,C-N.t-(1-F[1])*N.h],this.mouseContainer.style.width=N.w*(W[1]-W[0])+"px",this.mouseContainer.style.height=N.h*(F[1]-F[0])+"px",this.mouseContainer.height=N.h*(F[1]-F[0]),this.mouseContainer.style.left=N.l+W[0]*N.w+"px",this.mouseContainer.style.top=N.t+(1-F[1])*N.h+"px",D=0;D<2;++D)(U=this[g[D]])._length=O.viewBox[D+2]-O.viewBox[D],u(this.graphDiv,U),U.setScale();c(R),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(w),E.update(O),this.glplot.draw()},_.calcDataBox=function(){var f=this.xaxis,S=this.yaxis,w=f.range,E=S.range,P=f.r2l,C=S.r2l;return[P(w[0]),C(E[0]),P(w[1]),C(E[1])]},_.setRanges=function(f){var S=this.xaxis,w=this.yaxis,E=S.l2r,P=w.l2r;S.range=[E(f[0]),E(f[2])],w.range=[P(f[1]),P(f[3])]},_.updateTraces=function(f,S){var w,E,P,C=Object.keys(this.traces);this.fullData=f;e:for(w=0;w<C.length;w++){var O=C[w],R=this.traces[O];for(E=0;E<f.length;E++)if((P=f[E]).uid===O&&P.type===R.type)continue e;R.dispose(),delete this.traces[O]}for(w=0;w<f.length;w++){P=f[w];var U=S[w],D=this.traces[P.uid];D?D.update(P,U):(D=P._module.plot(this,P,U),this.traces[P.uid]=D)}this.glplot.objects.sort(function(N,W){return N._trace.index-W._trace.index})},_.updateFx=function(f){m(f)||d(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=f==="pan"?"move":f==="zoom"?"crosshair":null},_.emitPointAction=function(f,S){for(var w,E=f.trace.uid,P=f.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(w=this.fullData[C]);var O={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:w.index,pointNumber:P,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(O,w,P),this.graphDiv.emit(S,{points:[O]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,S=this.camera,w=S.mouseListener,E=this.lastButtonState===1&&w.buttons===0,P=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var C,O=w.x*f.pixelRatio,R=this.canvas.height-f.pixelRatio*w.y;if(S.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],D=0;D<2;D++)S.boxStart[D]===S.boxEnd[D]&&(U[D]=f.dataBox[D],U[D+2]=f.dataBox[D+2]);f.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=P._size,W=this.xaxis.domain,F=this.yaxis.domain,j=(C=f.pick(O/f.pixelRatio+N.l+W[0]*N.w,R/f.pixelRatio-(N.t+(1-F[1])*N.h)))&&C.object._trace.handlePick(C);if(j&&E&&this.emitPointAction(j,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&P.hovermode&&j&&(!this.lastPickResult||this.lastPickResult.traceUid!==j.trace.uid||this.lastPickResult.dataCoord[0]!==j.dataCoord[0]||this.lastPickResult.dataCoord[1]!==j.dataCoord[1])){var q=j;this.lastPickResult={traceUid:j.trace?j.trace.uid:null,dataCoord:j.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),q.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(C.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(C.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(j,"plotly_hover");var te=this.fullData[q.trace.index]||{},ee=q.pointIndex,Q=b.castHoverinfo(te,P,ee);if(Q&&Q!=="all"){var J=Q.split("+");J.indexOf("x")===-1&&(q.traceCoord[0]=void 0),J.indexOf("y")===-1&&(q.traceCoord[1]=void 0),J.indexOf("z")===-1&&(q.traceCoord[2]=void 0),J.indexOf("text")===-1&&(q.textLabel=void 0),J.indexOf("name")===-1&&(q.name=void 0)}b.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:b.castHoverOption(te,ee,"bgcolor")||q.color,borderColor:b.castHoverOption(te,ee,"bordercolor"),fontFamily:b.castHoverOption(te,ee,"font.family"),fontSize:b.castHoverOption(te,ee,"font.size"),fontColor:b.castHoverOption(te,ee,"font.color"),nameLength:b.castHoverOption(te,ee,"namelength"),textAlign:b.castHoverOption(te,ee,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),f.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(f,S){if(S!==void 0){var w=this[f];return T.tickText(w,w.c2l(S),"hover").text}}},12536:function(X,I,e){"use strict";var A=e(67824).overrideAll,k=e(65460),o=e(98432),T=e(84888).op,b=e(3400),p=e(9616),s="gl3d",t="scene";I.name=s,I.attr=t,I.idRoot=t,I.idRegex=I.attrRegex=b.counterRegex("scene"),I.attributes=e(6636),I.layoutAttributes=e(346),I.baseLayoutAttrOverrides=A({hoverlabel:k.hoverlabel},"plot","nested"),I.supplyLayoutDefaults=e(5208),I.plot=function(i){for(var n=i._fullLayout,r=i._fullData,a=n._subplots[s],l=0;l<a.length;l++){var c=a[l],h=T(r,s,c),u=n[c],x=u.camera,d=u._scene;d||(d=new o({id:c,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},n),u._scene=d),d.viewInitial||(d.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),d.plot(h,n,i.layout)}},I.clean=function(i,n,r,a){for(var l=a._subplots[s]||[],c=0;c<l.length;c++){var h=l[c];!n[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},I.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots[s],a=n._size,l=0;l<r.length;l++){var c=n[r[l]],h=c.domain,u=c._scene,x=u.toImage("png");n._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":x,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),u.destroy()}},I.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var n=i.substr(5);return n==="1"&&(n=""),t+n}},I.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots[s],a=0;a<r.length;a++)n[r[a]]._scene.updateFx(n.dragmode,n.hovermode)}},6636:function(X){"use strict";X.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(X,I,e){"use strict";var A=e(76308),k=e(94724),o=e(92880).extendFlat,T=e(67824).overrideAll;X.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:A.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:o({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:o({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:o({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(X,I,e){"use strict";var A=e(49760).mix,k=e(3400),o=e(31780),T=e(86140),b=e(14944),p=e(28336),s=["xaxis","yaxis","zaxis"];X.exports=function(t,i,n){var r,a;function l(u,x){return k.coerce(r,a,T,u,x)}for(var c=0;c<s.length;c++){var h=s[c];r=t[h]||{},(a=o.newContainer(i,h))._id=h[0]+n.scene,a._name=h,b(r,a,l,n),p(r,a,l,{font:n.font,letter:h[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),l("gridcolor",A(a.color,n.bgColor,72.72727272727273).toRgbString()),l("title.text",h[0]),a.setScale=k.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",a.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},44728:function(X,I,e){"use strict";var A=e(43080),k=e(3400),o=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,p){for(var s=this,t=0;t<3;++t){var i=p[o[t]];i.visible?(s.labels[t]=b._meta?k.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(s.labelColor[t]=A(i.title.font.color)),i.title.font.family&&(s.labelFont[t]=i.title.font.family),i.title.font.size&&(s.labelSize[t]=i.title.font.size),i.title.font.weight&&(s.labelFontWeight[t]=i.title.font.weight),i.title.font.style&&(s.labelFontStyle[t]=i.title.font.style),i.title.font.variant&&(s.labelFontVariant[t]=i.title.font.variant)),"showline"in i&&(s.lineEnable[t]=i.showline),"linecolor"in i&&(s.lineColor[t]=A(i.linecolor)),"linewidth"in i&&(s.lineWidth[t]=i.linewidth),"showgrid"in i&&(s.gridEnable[t]=i.showgrid),"gridcolor"in i&&(s.gridColor[t]=A(i.gridcolor)),"gridwidth"in i&&(s.gridWidth[t]=i.gridwidth),i.type==="log"?s.zeroEnable[t]=!1:"zeroline"in i&&(s.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(s.zeroLineColor[t]=A(i.zerolinecolor)),"zerolinewidth"in i&&(s.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in i&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(s.lineTickColor[t]=A(i.tickcolor)),"tickwidth"in i&&(s.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(s.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(s.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(s.tickColor[t]=A(i.tickfont.color)),i.tickfont.family&&(s.tickFont[t]=i.tickfont.family),i.tickfont.size&&(s.tickSize[t]=i.tickfont.size),i.tickfont.weight&&(s.tickFontWeight[t]=i.tickfont.weight),i.tickfont.style&&(s.tickFontStyle[t]=i.tickfont.style),i.tickfont.variant&&(s.tickFontVariant[t]=i.tickfont.variant)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):i.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=A(i.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},X.exports=function(b,p){var s=new T;return s.merge(b,p),s}},5208:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(24040),T=e(168),b=e(64380),p=e(346),s=e(84888).op,t="gl3d";function i(n,r,a,l){for(var c=a("bgcolor"),h=k.combine(c,l.paper_bgcolor),u=["up","center","eye"],x=0;x<u.length;x++)a("camera."+u[x]+".x"),a("camera."+u[x]+".y"),a("camera."+u[x]+".z");a("camera.projection.type");var d=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),m=a("aspectmode",d?"manual":"auto");d||(n.aspectratio=r.aspectratio={x:1,y:1,z:1},m==="manual"&&(r.aspectmode="auto"),n.aspectmode=r.aspectmode);var g=s(l.fullData,t,l.id);b(n,r,{font:l.font,scene:l.id,data:g,bgColor:h,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(n,r,l);var y=l.getDfltFromLayout("dragmode");if(y!==!1&&!y)if(y="orbit",n.camera&&n.camera.up){var v=n.camera.up.x,_=n.camera.up.y,f=n.camera.up.z;f!==0&&(v&&_&&f?f/Math.sqrt(v*v+_*_+f*f)>.999&&(y="turntable"):y="turntable")}else y="turntable";a("dragmode",y),a("hovermode",l.getDfltFromLayout("hovermode"))}X.exports=function(n,r,a){var l=r._basePlotModules.length>1;T(n,r,a,{type:t,attributes:p,handleDefaults:i,fullLayout:r,font:r.font,fullData:a,getDfltFromLayout:function(c){if(!l)return A.validate(n[c],p[c])?n[c]:void 0},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}},346:function(X,I,e){"use strict";var A=e(86140),k=e(86968).u,o=e(92880).extendFlat,T=e(3400).counterRegex;function b(p,s,t){return{x:{valType:"number",dflt:p,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}X.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(b(0,0,1),{}),center:o(b(0,0,0),{}),eye:o(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:A,yaxis:A,zaxis:A,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(X,I,e){"use strict";var A=e(43080),k=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(T){for(var b=0;b<3;++b){var p=T[k[b]];p.visible?(this.enabled[b]=p.showspikes,this.colors[b]=A(p.spikecolor),this.drawSides[b]=p.spikesides,this.lineWidth[b]=p.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},X.exports=function(T){var b=new o;return b.merge(T),b}},87152:function(X,I,e){"use strict";X.exports=function(b){for(var p=b.axesOptions,s=b.glplot.axesPixels,t=b.fullSceneLayout,i=[[],[],[]],n=0;n<3;++n){var r=t[o[n]];if(r._length=(s[n].hi-s[n].lo)*s[n].pixelsPerDataUnit/b.dataScale[n],Math.abs(r._length)===1/0||isNaN(r._length))i[n]=[];else{r._input_range=r.range.slice(),r.range[0]=s[n].lo/b.dataScale[n],r.range[1]=s[n].hi/b.dataScale[n],r._m=1/(b.dataScale[n]*s[n].pixelsPerDataUnit),r.range[0]===r.range[1]&&(r.range[0]-=1,r.range[1]+=1);var a=r.tickmode;if(r.tickmode==="auto"){r.tickmode="linear";var l=r.nticks||k.constrain(r._length/40,4,9);A.autoTicks(r,Math.abs(r.range[1]-r.range[0])/l)}for(var c=A.calcTicks(r,{msUTC:!0}),h=0;h<c.length;++h)c[h].x=c[h].x*b.dataScale[n],r.type==="date"&&(c[h].text=c[h].text.replace(/\<br\>/g," "));i[n]=c,r.tickmode=a}}for(p.ticks=i,n=0;n<3;++n)for(T[n]=.5*(b.glplot.bounds[0][n]+b.glplot.bounds[1][n]),h=0;h<2;++h)p.bounds[h][n]=b.glplot.bounds[h][n];b.contourLevels=function(u){for(var x=new Array(3),d=0;d<3;++d){for(var m=u[d],g=new Array(m.length),y=0;y<m.length;++y)g[y]=m[y].x;x[d]=g}return x}(i)};var A=e(54460),k=e(3400),o=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(X){"use strict";function I(e,A){var k,o,T=[0,0,0,0];for(k=0;k<4;++k)for(o=0;o<4;++o)T[o]+=e[4*k+o]*A[k];return T}X.exports=function(e,A){return I(e.projection,I(e.view,I(e.model,[A[0],A[1],A[2],1])))}},98432:function(X,I,e){"use strict";var A,k,o=e(67792).gl_plot3d,T=o.createCamera,b=o.createScene,p=e(5408),s=e(89184),t=e(24040),i=e(3400),n=i.preserveDrawingBuffer(),r=e(54460),a=e(93024),l=e(43080),c=e(16576),h=e(94424),u=e(44728),x=e(9020),d=e(87152),m=e(19280).applyAutorangeOptions,g=!1;function y(w,E){var P=document.createElement("div"),C=w.container;this.graphDiv=w.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",P.appendChild(O),this.svgContainer=O,P.id=w.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",C.appendChild(P),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=u(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=P,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var v=y.prototype;v.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(A=document.createElement("canvas"),k=p({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=A}return E};var _=!0;v.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),P=!0;try{w.glplot=b(E)}catch{if(w.staticMode||!_||n)P=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=E.glOptions.preserveDrawingBuffer=!0,w.glplot=b(E)}catch{n=E.glOptions.preserveDrawingBuffer=!1,P=!1}}}return _=!1,P},v.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera,P=E.projection.type==="orthographic";w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:P,zoomMin:.01,zoomMax:100,mode:"orbit"})},v.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return c(w);w.traces={},w.make4thDimension();var E=w.graphDiv,P=E.layout,C=function(){var R={};return w.isCameraChanged(P)&&(R[w.id+".camera"]=w.getCamera()),w.isAspectChanged(P)&&(R[w.id+".aspectratio"]=w.glplot.getAspectratio(),P[w.id].aspectmode!=="manual"&&(w.fullSceneLayout.aspectmode=P[w.id].aspectmode=R[w.id+".aspectmode"]="manual")),R},O=function(R){if(R.fullSceneLayout.dragmode!==!1){var U=C();R.saveLayout(P),R.graphDiv.emit("plotly_relayout",U)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){O(w)}),w.glplot.canvas.addEventListener("touchstart",function(){g=!0}),w.glplot.canvas.addEventListener("wheel",function(R){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var U=R.deltaX>R.deltaY?1.1:.9090909090909091,D=w.glplot.getAspectratio();w.glplot.setAspectratio({x:U*D.x,y:U*D.y,z:U*D.z})}O(w)}},!!s&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(w.fullSceneLayout.dragmode!==!1&&w.camera.mouseListener.buttons!==0){var R=C();w.graphDiv.emit("plotly_relayouting",R)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(R){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:R,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},v.render=function(){var w,E=this,P=E.graphDiv,C=E.svgContainer,O=E.container.getBoundingClientRect();P._fullLayout._calcInverseTransform(P);var R=P._fullLayout._invScaleX,U=P._fullLayout._invScaleY,D=O.width*R,N=O.height*U;C.setAttributeNS(null,"viewBox","0 0 "+D+" "+N),C.setAttributeNS(null,"width",D),C.setAttributeNS(null,"height",N),d(E),E.glplot.axes.update(E.axesOptions);for(var W=Object.keys(E.traces),F=null,j=E.glplot.selection,q=0;q<W.length;++q)(w=E.traces[W[q]]).data.hoverinfo!=="skip"&&w.handlePick(j)&&(F=w),w.setContourLevels&&w.setContourLevels();function te(pe,ge,ke){var Ee=E.fullSceneLayout[pe+"axis"];return Ee.type!=="log"&&(ge=Ee.d2l(ge)),r.hoverLabelText(Ee,ge,ke)}if(F!==null){var ee=h(E.glplot.cameraParams,j.dataCoordinate);w=F.data;var Q,J=P._fullData[w.index],K=j.index,Y={xLabel:te("x",j.traceCoordinate[0],w.xhoverformat),yLabel:te("y",j.traceCoordinate[1],w.yhoverformat),zLabel:te("z",j.traceCoordinate[2],w.zhoverformat)},ie=a.castHoverinfo(J,E.fullLayout,K),se=(ie||"").split("+"),ae=ie&&ie==="all";J.hovertemplate||ae||(se.indexOf("x")===-1&&(Y.xLabel=void 0),se.indexOf("y")===-1&&(Y.yLabel=void 0),se.indexOf("z")===-1&&(Y.zLabel=void 0),se.indexOf("text")===-1&&(j.textLabel=void 0),se.indexOf("name")===-1&&(F.name=void 0));var ue=[];w.type==="cone"||w.type==="streamtube"?(Y.uLabel=te("x",j.traceCoordinate[3],w.uhoverformat),(ae||se.indexOf("u")!==-1)&&ue.push("u: "+Y.uLabel),Y.vLabel=te("y",j.traceCoordinate[4],w.vhoverformat),(ae||se.indexOf("v")!==-1)&&ue.push("v: "+Y.vLabel),Y.wLabel=te("z",j.traceCoordinate[5],w.whoverformat),(ae||se.indexOf("w")!==-1)&&ue.push("w: "+Y.wLabel),Y.normLabel=j.traceCoordinate[6].toPrecision(3),(ae||se.indexOf("norm")!==-1)&&ue.push("norm: "+Y.normLabel),w.type==="streamtube"&&(Y.divergenceLabel=j.traceCoordinate[7].toPrecision(3),(ae||se.indexOf("divergence")!==-1)&&ue.push("divergence: "+Y.divergenceLabel)),j.textLabel&&ue.push(j.textLabel),Q=ue.join("<br>")):w.type==="isosurface"||w.type==="volume"?(Y.valueLabel=r.hoverLabelText(E._mockAxis,E._mockAxis.d2l(j.traceCoordinate[3]),w.valuehoverformat),ue.push("value: "+Y.valueLabel),j.textLabel&&ue.push(j.textLabel),Q=ue.join("<br>")):Q=j.textLabel;var ve={x:j.traceCoordinate[0],y:j.traceCoordinate[1],z:j.traceCoordinate[2],data:J._input,fullData:J,curveNumber:J.index,pointNumber:K};a.appendArrayPointValue(ve,J,K),w._module.eventData&&(ve=J._module.eventData(ve,j,J,{},K));var ye={points:[ve]};if(E.fullSceneLayout.hovermode){var de=[];a.loneHover({trace:J,x:(.5+.5*ee[0]/ee[3])*D,y:(.5-.5*ee[1]/ee[3])*N,xLabel:Y.xLabel,yLabel:Y.yLabel,zLabel:Y.zLabel,text:Q,name:F.name,color:a.castHoverOption(J,K,"bgcolor")||F.color,borderColor:a.castHoverOption(J,K,"bordercolor"),fontFamily:a.castHoverOption(J,K,"font.family"),fontSize:a.castHoverOption(J,K,"font.size"),fontColor:a.castHoverOption(J,K,"font.color"),nameLength:a.castHoverOption(J,K,"namelength"),textAlign:a.castHoverOption(J,K,"align"),hovertemplate:i.castOption(J,K,"hovertemplate"),hovertemplateLabels:i.extendFlat({},ve,Y),eventData:[ve]},{container:C,gd:P,inOut_bbox:de}),ve.bbox=de[0]}j.distance<5&&(j.buttons||g)?P.emit("plotly_click",ye):P.emit("plotly_hover",ye),this.oldEventData=ye}else a.loneUnhover(C),this.oldEventData&&P.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},v.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var f=["xaxis","yaxis","zaxis"];function S(w,E,P){for(var C=w.fullSceneLayout,O=0;O<3;O++){var R=f[O],U=R.charAt(0),D=C[R],N=E[U],W=E[U+"calendar"],F=E["_"+U+"length"];if(i.isArrayOrTypedArray(N))for(var j,q=0;q<(F||N.length);q++)if(i.isArrayOrTypedArray(N[q]))for(var te=0;te<N[q].length;++te)j=D.d2l(N[q][te],0,W),!isNaN(j)&&isFinite(j)&&(P[0][O]=Math.min(P[0][O],j),P[1][O]=Math.max(P[1][O],j));else j=D.d2l(N[q],0,W),!isNaN(j)&&isFinite(j)&&(P[0][O]=Math.min(P[0][O],j),P[1][O]=Math.max(P[1][O],j));else P[0][O]=Math.min(P[0][O],0),P[1][O]=Math.max(P[1][O],F-1)}}v.plot=function(w,E,P){var C=this;if(C.plotArgs=[w,E,P],!C.glplot.contextLost){var O,R,U,D,N,W,F=E[C.id],j=P[C.id];C.fullLayout=E,C.fullSceneLayout=F,C.axesOptions.merge(E,F),C.spikeOptions.merge(F),C.setViewport(F),C.updateFx(F.dragmode,F.hovermode),C.camera.enableWheel=C.graphDiv._context._scrollZoom.gl3d,C.glplot.setClearColor(l(F.bgcolor)),C.setConvert(N),w?Array.isArray(w)||(w=[w]):w=[];var q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<w.length;++U)(O=w[U]).visible===!0&&O._length!==0&&S(this,O,q);(function(Me,Ie){for(var Oe=Me.fullSceneLayout,he=Oe.annotations||[],_e=0;_e<3;_e++)for(var Ae=f[_e],De=Ae.charAt(0),Le=Oe[Ae],Be=0;Be<he.length;Be++){var Ve=he[Be];if(Ve.visible){var Ze=Le.r2l(Ve[De]);!isNaN(Ze)&&isFinite(Ze)&&(Ie[0][_e]=Math.min(Ie[0][_e],Ze),Ie[1][_e]=Math.max(Ie[1][_e],Ze))}}})(this,q);var te=[1,1,1];for(D=0;D<3;++D)q[1][D]===q[0][D]?te[D]=1:te[D]=1/(q[1][D]-q[0][D]);for(C.dataScale=te,C.convertAnnotations(this),U=0;U<w.length;++U)(O=w[U]).visible===!0&&O._length!==0&&((R=C.traces[O.uid])?R.data.type===O.type?R.update(O):(R.dispose(),R=O._module.plot(this,O),C.traces[O.uid]=R):(R=O._module.plot(this,O),C.traces[O.uid]=R),R.name=O.name);var ee=Object.keys(C.traces);e:for(U=0;U<ee.length;++U){for(D=0;D<w.length;++D)if(w[D].uid===ee[U]&&w[D].visible===!0&&w[D]._length!==0)continue e;(R=C.traces[ee[U]]).dispose(),delete C.traces[ee[U]]}C.glplot.objects.sort(function(Me,Ie){return Me._trace.data.index-Ie._trace.data.index});var Q,J=[[0,0,0],[0,0,0]],K=[],Y={};for(U=0;U<3;++U){var ie;if((W=(N=F[f[U]]).type)in Y?(Y[W].acc*=te[U],Y[W].count+=1):Y[W]={acc:te[U],count:1},N.autorange){J[0][U]=1/0,J[1][U]=-1/0;var se=C.glplot.objects,ae=C.fullSceneLayout.annotations||[],ue=N._name.charAt(0);for(D=0;D<se.length;D++){var ve=se[D],ye=ve.bounds,de=ve._trace.data._pad||0;ve.constructor.name==="ErrorBars"&&N._lowerLogErrorBound?J[0][U]=Math.min(J[0][U],N._lowerLogErrorBound):J[0][U]=Math.min(J[0][U],ye[0][U]/te[U]-de),J[1][U]=Math.max(J[1][U],ye[1][U]/te[U]+de)}for(D=0;D<ae.length;D++){var pe=ae[D];if(pe.visible){var ge=N.r2l(pe[ue]);J[0][U]=Math.min(J[0][U],ge),J[1][U]=Math.max(J[1][U],ge)}}if("rangemode"in N&&N.rangemode==="tozero"&&(J[0][U]=Math.min(J[0][U],0),J[1][U]=Math.max(J[1][U],0)),J[0][U]>J[1][U])J[0][U]=-1,J[1][U]=1;else{var ke=J[1][U]-J[0][U];J[0][U]-=ke/32,J[1][U]+=ke/32}if(ie=[J[0][U],J[1][U]],ie=m(ie,N),J[0][U]=ie[0],J[1][U]=ie[1],N.isReversed()){var Ee=J[0][U];J[0][U]=J[1][U],J[1][U]=Ee}}else ie=N.range,J[0][U]=N.r2l(ie[0]),J[1][U]=N.r2l(ie[1]);J[0][U]===J[1][U]&&(J[0][U]-=1,J[1][U]+=1),K[U]=J[1][U]-J[0][U],N.range=[J[0][U],J[1][U]],N.limitRange(),C.glplot.setBounds(U,{min:N.range[0]*te[U],max:N.range[1]*te[U]})}var me=F.aspectmode;if(me==="cube")Q=[1,1,1];else if(me==="manual"){var oe=F.aspectratio;Q=[oe.x,oe.y,oe.z]}else{if(me!=="auto"&&me!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var re=[1,1,1];for(U=0;U<3;++U){var fe=Y[W=(N=F[f[U]]).type];re[U]=Math.pow(fe.acc,1/fe.count)/te[U]}Q=me==="data"||Math.max.apply(null,re)/Math.min.apply(null,re)<=4?re:[1,1,1]}F.aspectratio.x=j.aspectratio.x=Q[0],F.aspectratio.y=j.aspectratio.y=Q[1],F.aspectratio.z=j.aspectratio.z=Q[2],C.glplot.setAspectratio(F.aspectratio),C.viewInitial.aspectratio||(C.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),C.viewInitial.aspectmode||(C.viewInitial.aspectmode=F.aspectmode);var Se=F.domain||null,be=E._size||null;if(Se&&be){var we=C.container.style;we.position="absolute",we.left=be.l+Se.x[0]*be.w+"px",we.top=be.t+(1-Se.y[1])*be.h+"px",we.width=be.w*(Se.x[1]-Se.x[0])+"px",we.height=be.h*(Se.y[1]-Se.y[0])+"px"}C.glplot.redraw()}},v.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},v.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:w._ortho===!0?"orthographic":"perspective"}}},v.setViewport=function(w){var E,P=this,C=w.camera;P.camera.lookAt.apply(this,[[(E=C).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),P.glplot.setAspectratio(w.aspectratio),C.projection.type==="orthographic"!==P.camera._ortho&&(P.glplot.redraw(),P.glplot.clearRGBA(),P.glplot.dispose(),P.initializeGLPlot())},v.isCameraChanged=function(w){var E=this.getCamera(),P=i.nestedProperty(w,this.id+".camera").get();function C(D,N,W,F){var j=["up","center","eye"],q=["x","y","z"];return N[j[W]]&&D[j[W]][q[F]]===N[j[W]][q[F]]}var O=!1;if(P===void 0)O=!0;else{for(var R=0;R<3;R++)for(var U=0;U<3;U++)if(!C(E,P,R,U)){O=!0;break}(!P.projection||E.projection&&E.projection.type!==P.projection.type)&&(O=!0)}return O},v.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),P=i.nestedProperty(w,this.id+".aspectratio").get();return P===void 0||P.x!==E.x||P.y!==E.y||P.z!==E.z},v.saveLayout=function(w){var E,P,C,O,R,U,D=this,N=D.fullLayout,W=D.isCameraChanged(w),F=D.isAspectChanged(w),j=W||F;if(j){var q={};W&&(E=D.getCamera(),C=(P=i.nestedProperty(w,D.id+".camera")).get(),q[D.id+".camera"]=C),F&&(O=D.glplot.getAspectratio(),U=(R=i.nestedProperty(w,D.id+".aspectratio")).get(),q[D.id+".aspectratio"]=U),t.call("_storeDirectGUIEdit",w,N._preGUI,q),W&&(P.set(E),i.nestedProperty(N,D.id+".camera").set(E)),F&&(R.set(O),i.nestedProperty(N,D.id+".aspectratio").set(O),D.glplot.redraw())}return j},v.updateFx=function(w,E){var P=this,C=P.camera;if(C)if(w==="orbit")C.mode="orbit",C.keyBindingMode="rotate";else if(w==="turntable"){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var O=P.graphDiv,R=O._fullLayout,U=P.fullSceneLayout.camera,D=U.up.x,N=U.up.y,W=U.up.z;if(W/Math.sqrt(D*D+N*N+W*W)<.999){var F=P.id+".camera.up",j={x:0,y:0,z:1},q={};q[F]=j;var te=O.layout;t.call("_storeDirectGUIEdit",te,R._preGUI,q),U.up=j,i.nestedProperty(te,F).set(j)}}else C.keyBindingMode=w;P.fullSceneLayout.hovermode=E},v.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(A),E.glplot.redraw();var P=E.glplot.gl,C=P.drawingBufferWidth,O=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(C*O*4);P.readPixels(0,0,C,O,P.RGBA,P.UNSIGNED_BYTE,R),function(F,j,q){for(var te=0,ee=q-1;te<ee;++te,--ee)for(var Q=0;Q<j;++Q)for(var J=0;J<4;++J){var K=4*(j*te+Q)+J,Y=4*(j*ee+Q)+J,ie=F[K];F[K]=F[Y],F[Y]=ie}}(R,C,O),function(F,j,q){for(var te=0;te<q;++te)for(var ee=0;ee<j;++ee){var Q=4*(j*te+ee),J=F[Q+3];if(J>0)for(var K=255/J,Y=0;Y<3;++Y)F[Q+Y]=Math.min(K*F[Q+Y],255)}}(R,C,O);var U=document.createElement("canvas");U.width=C,U.height=O;var D,N=U.getContext("2d",{willReadFrequently:!0}),W=N.createImageData(C,O);switch(W.data.set(R),N.putImageData(W,0,0),w){case"jpeg":D=U.toDataURL("image/jpeg");break;case"webp":D=U.toDataURL("image/webp");break;default:D=U.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(A),D},v.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[f[w]];r.setConvert(E,this.fullLayout),E.setScale=i.noop}},v.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(w._mockAxis,E)},X.exports=y},52094:function(X){"use strict";X.exports=function(I,e,A,k){k=k||I.length;for(var o=new Array(k),T=0;T<k;T++)o[T]=[I[T],e[T],A[T]];return o}},64859:function(X,I,e){"use strict";var A=e(25376),k=e(85656),o=e(22548),T=e(92872),b=e(34200),p=e(66741),s=e(92880).extendFlat,t=A({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=o.defaultLine,X.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:A({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(p({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:A({editType:"layoutstyle"})}}},47552:function(X,I,e){"use strict";var A=e(95376),k="1.13.4",o='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),p={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=A(p);X.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:p,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){var T=k.split(" "),b=T[0],p=T[1],s=A.isArrayOrTypedArray(o)?A.mean(o):o,t=.5+s/100,i=1.5+s/100,n=["",""],r=[0,0];switch(b){case"top":n[0]="top",r[1]=-i;break;case"bottom":n[0]="bottom",r[1]=i}switch(p){case"left":n[1]="right",r[0]=-t;break;case"right":n[1]="left",r[0]=t}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:r}}},33688:function(X,I,e){"use strict";var A=e(3480),k=e(3400),o=k.strTranslate,T=k.strScale,b=e(84888).KY,p=e(9616),s=e(33428),t=e(43616),i=e(72736),n=e(14440),r="mapbox",a=I.constants=e(47552);function l(c){return typeof c=="string"&&(a.styleValuesMapbox.indexOf(c)!==-1||c.indexOf("mapbox://")===0||c.indexOf("stamen")===0)}I.name=r,I.attr="subplot",I.idRoot=r,I.idRegex=I.attrRegex=k.counterRegex(r),I.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},I.layoutAttributes=e(5232),I.supplyLayoutDefaults=e(5976),I.plot=function(c){var h=c._fullLayout,u=c.calcdata,x=h._subplots[r];if(A.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var d=function(f,S){var w=f._fullLayout;if(f._context.mapboxAccessToken==="")return"";for(var E=[],P=[],C=!1,O=!1,R=0;R<S.length;R++){var U=w[S[R]],D=U.accesstoken;l(U.style)&&(D?k.pushUnique(E,D):(l(U._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),O=!0)),D&&k.pushUnique(P,D)}if(O){var N=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(N),new Error(N)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(P.length&&k.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,x);A.accessToken=d;for(var m=0;m<x.length;m++){var g=x[m],y=b(u,r,g),v=h[g],_=v._subplot;_||(_=new n(c,g),h[g]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},v.center),zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),_.plot(y,h,c._promises)}},I.clean=function(c,h,u,x){for(var d=x._subplots[r]||[],m=0;m<d.length;m++){var g=d[m];!h[g]&&x[g]._subplot&&x[g]._subplot.destroy()}},I.toSVG=function(c){for(var h=c._fullLayout,u=h._subplots[r],x=h._size,d=0;d<u.length;d++){var m=h[u[d]],g=m.domain,y=m._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":y,x:x.l+x.w*g.x[0],y:x.t+x.h*(1-g.y[1]),width:x.w*(g.x[1]-g.x[0]),height:x.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});var v=s.select(m._subplot.div);if(v.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=h._glimages.append("g");_.attr("transform",o(x.l+x.w*g.x[0]+10,x.t+x.h*(1-g.y[0])-31)),_.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var f=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=h._glimages.append("g"),w=S.append("text");w.text(f).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":f});var E=t.bBox(w.node()),P=x.w*(g.x[1]-g.x[0]);if(E.width>P/2){var C=f.split("|").join("<br>");w.text(C).attr("data-unformatted",C).call(i.convertToTspans,c),E=t.bBox(w.node())}w.attr("transform",o(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;E.width+6>P&&(O=P/(E.width+6));var R=[x.l+x.w*g.x[1],x.t+x.h*(1-g.y[0])];S.attr("transform",o(R[0],R[1])+T(O))}},I.updateFx=function(c){for(var h=c._fullLayout,u=h._subplots[r],x=0;x<u.length;x++)h[u[x]]._subplot.updateFx(h)}},22360:function(X,I,e){"use strict";var A=e(3400),k=e(72736).sanitizeHTML,o=e(89032),T=e(47552);function b(i,n){this.subplot=i,this.uid=i.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var p=b.prototype;function s(i){if(!i.visible)return!1;var n=i.source;if(Array.isArray(n)&&n.length>0){for(var r=0;r<n.length;r++)if(typeof n[r]!="string"||n[r].length===0)return!1;return!0}return A.isPlainObject(n)||typeof n=="string"&&n.length>0}function t(i){var n={},r={};switch(i.type){case"circle":A.extendFlat(r,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":A.extendFlat(r,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":A.extendFlat(r,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var a=i.symbol,l=o(a.textposition,a.iconsize);A.extendFlat(n,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":a.placement}),A.extendFlat(r,{"icon-color":i.color,"text-color":a.textfont.color,"text-opacity":i.opacity});break;case"raster":A.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:n,paint:r}}p.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=s(i)},p.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},p.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},p.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},p.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},p.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());n!==null&&this.subplot.map.moveLayer(this.idLayer,n)},p.updateSource=function(i){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,s(i)){var r=function(a){var l,c=a.sourcetype,h=a.source,u={type:c};return c==="geojson"?l="data":c==="vector"?l=typeof h=="string"?"url":"tiles":c==="raster"?(l="tiles",u.tileSize=256):c==="image"&&(l="url",u.coordinates=a.coordinates),u[l]=h,a.sourceattribution&&(u.attribution=k(a.sourceattribution)),u}(i);n.addSource(this.idSource,r)}},p.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var n=this.subplot.getMapLayers(),r=0;r<n.length;r++){var a=n[r].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){i=a;break}}return i},p.updateLayer=function(i){var n=this.subplot,r=t(i),a=this.lookupBelow(),l=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(i)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:r.layout,paint:r.paint},l),this.layerType=i.type,this.below=a},p.updateStyle=function(i){if(s(i)){var n=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},p.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},p.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},X.exports=function(i,n,r){var a=new b(i,n);return a.update(r),a}},5232:function(X,I,e){"use strict";var A=e(3400),k=e(76308).defaultLine,o=e(86968).u,T=e(25376),b=e(52904).textposition,p=e(67824).overrideAll,s=e(31780).templatedArray,t=e(47552),i=T({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(X.exports=p({_arrayAttrRegexps:[A.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:A.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(X,I,e){"use strict";var A=e(3400),k=e(168),o=e(51272),T=e(5232);function b(s,t,i,n){i("accesstoken",n.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var r=i("bounds.west"),a=i("bounds.east"),l=i("bounds.south"),c=i("bounds.north");r!==void 0&&a!==void 0&&l!==void 0&&c!==void 0||delete t.bounds,o(s,t,{name:"layers",handleItemDefaults:p}),t._input=s}function p(s,t){function i(c,h){return A.coerce(s,t,T.layers,c,h)}if(i("visible")){var n,r=i("sourcetype"),a=r==="raster"||r==="image";i("source"),i("sourceattribution"),r==="vector"&&i("sourcelayer"),r==="image"&&i("coordinates"),a&&(n="raster");var l=i("type",n);a&&l!=="raster"&&(l=t.type="raster",A.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),l==="circle"&&i("circle.radius"),l==="line"&&(i("line.width"),i("line.dash")),l==="fill"&&i("fill.outlinecolor"),l==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),A.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}X.exports=function(s,t,i){k(s,t,i,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(X,I,e){"use strict";var A=e(3480),k=e(3400),o=e(27144),T=e(24040),b=e(54460),p=e(86476),s=e(93024),t=e(72760),i=t.drawMode,n=t.selectMode,r=e(22676).prepSelect,a=e(22676).clearOutline,l=e(22676).clearSelectionsCache,c=e(22676).selectOnClick,h=e(47552),u=e(22360);function x(_,f){this.id=f,this.gd=_;var S=_._fullLayout,w=_._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var d=x.prototype;d.plot=function(_,f,S){var w,E=this,P=f[E.id];E.map&&P.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=E.map?new Promise(function(C,O){E.updateMap(_,f,C,O)}):new Promise(function(C,O){E.createMap(_,f,C,O)}),S.push(w)},d.createMap=function(_,f,S,w){var E=this,P=f[E.id],C=E.styleObj=g(P.style,f);E.accessToken=P.accesstoken;var O=P.bounds,R=O?[[O.west,O.south],[O.east,O.north]]:null,U=E.map=new A.Map({container:E.div,style:C.style,center:v(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:R,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new A.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(_,f);var D=[];D.push(new Promise(function(N){U.once("load",N)})),D=D.concat(o.fetchTraceGeoData(_)),Promise.all(D).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},d.updateMap=function(_,f,S,w){var E=this,P=E.map,C=f[this.id];E.rejectOnError(w);var O=[],R=g(C.style,f);JSON.stringify(E.styleObj)!==JSON.stringify(R)&&(E.styleObj=R,P.setStyle(R.style),E.traceHash={},O.push(new Promise(function(U){P.once("styledata",U)}))),O=O.concat(o.fetchTraceGeoData(_)),Promise.all(O).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},d.fillBelowLookup=function(_,f){var S,w,E=f[this.id].layers,P=this.belowLookup={},C=!1;for(S=0;S<_.length;S++){var O=_[S][0].trace,R=O._module;typeof O.below=="string"?w=O.below:R.getBelow&&(w=R.getBelow(O,this)),w===""&&(C=!0),P["trace-"+O.uid]=w||""}for(S=0;S<E.length;S++){var U=E[S];w=typeof U.below=="string"?U.below:C?"traces":"",P["layout-"+S]=w}var D,N,W={};for(D in P)W[w=P[D]]?W[w].push(D):W[w]=[D];for(w in W){var F=W[w];if(F.length>1)for(S=0;S<F.length;S++)(D=F[S]).indexOf("trace-")===0?(N=D.split("trace-")[1],this.traceHash[N]&&(this.traceHash[N].below=null)):D.indexOf("layout-")===0&&(N=D.split("layout-")[1],this.layerList[N]&&(this.layerList[N].below=null))}};var m={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function g(_,f){var S={};if(k.isPlainObject(_))S.id=_.id,S.style=_;else if(typeof _=="string")if(S.id=_,h.styleValuesMapbox.indexOf(_)!==-1)S.style=y(_);else if(h.stylesNonMapbox[_]){S.style=h.stylesNonMapbox[_];var w=S.style.sources["plotly-"+_],E=w?w.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=f._mapboxAccessToken)}else S.style=_;else S.id=h.styleValueDflt,S.style=y(h.styleValueDflt);return S.transition={duration:0,delay:0},S}function y(_){return h.styleUrlPrefix+_+"-"+h.styleUrlSuffix}function v(_){return[_.lon,_.lat]}d.updateData=function(_){var f,S,w,E,P=this.traceHash,C=_.slice().sort(function(N,W){return m[N[0].trace.type]-m[W[0].trace.type]});for(w=0;w<C.length;w++){var O=C[w],R=!1;(f=P[(S=O[0].trace).uid])&&(f.type===S.type?(f.update(O),R=!0):f.dispose()),!R&&S._module&&(P[S.uid]=S._module.plot(this,O))}var U=Object.keys(P);e:for(w=0;w<U.length;w++){var D=U[w];for(E=0;E<_.length;E++)if(D===(S=_[E][0].trace).uid)continue e;(f=P[D]).dispose(),delete P[D]}},d.updateLayout=function(_){var f=this.map,S=_[this.id];this.dragging||this.wheeling||(f.setCenter(v(S.center)),f.setZoom(S.zoom),f.setBearing(S.bearing),f.setPitch(S.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},d.resolveOnRender=function(_){var f=this.map;f.on("render",function S(){f.loaded()&&(f.off("render",S),setTimeout(_,10))})},d.rejectOnError=function(_){var f=this.map;function S(){_(new Error(h.mapOnErrorMsg))}f.once("error",S),f.once("style.error",S),f.once("source.error",S),f.once("tile.error",S),f.once("layer.error",S)},d.createFramework=function(_){var f=this,S=f.div=document.createElement("div");S.id=f.uid,S.style.position="absolute",f.container.appendChild(S),f.xaxis={_id:"x",c2p:function(w){return f.project(w).x}},f.yaxis={_id:"y",c2p:function(w){return f.project(w).y}},f.updateFramework(_),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(f.mockAxis,_)},d.initFx=function(_,f){var S=this,w=S.gd,E=S.map;function P(){s.loneUnhover(f._hoverlayer)}function C(){var O=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(O))}E.on("moveend",function(O){if(S.map){var R=w._fullLayout;if(O.originalEvent||S.wheeling){var U=R[S.id];T.call("_storeDirectGUIEdit",w.layout,R._preGUI,S.getViewEdits(U));var D=S.getView();U._input.center=U.center=D.center,U._input.zoom=U.zoom=D.zoom,U._input.bearing=U.bearing=D.bearing,U._input.pitch=U.pitch=D.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(D))}O.originalEvent&&O.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),R._rehover&&R._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(O){var R=S.div.getBoundingClientRect(),U=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return R},S.xaxis.p2c=function(){return E.unproject(U).lng},S.yaxis.p2c=function(){return E.unproject(U).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&s.hover(w,O,S.id)},s.hover(w,O,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,P()}),E.on("zoomstart",P),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var O=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(O));var R=S.viewInitial;E.setCenter(v(R.center)),E.setZoom(R.zoom),E.setBearing(R.bearing),E.setPitch(R.pitch);var U=S.getView();O._input.center=O.center=U.center,O._input.zoom=O.zoom=U.zoom,O._input.bearing=O.bearing=U.bearing,O._input.pitch=O.pitch=U.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(U))}),S.clearOutline=function(){l(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(O){return function(R){var U=w._fullLayout.clickmode;U.indexOf("select")>-1&&c(R.originalEvent,w,[S.xaxis],[S.yaxis],S.id,O),U.indexOf("event")>-1&&s.click(w,R.originalEvent)}}},d.updateFx=function(_){var f=this,S=f.map,w=f.gd;if(!f.isStatic){var E,P=_.dragmode;E=function(R,U){U.isRect?(R.range={})[f.id]=[O([U.xmin,U.ymin]),O([U.xmax,U.ymax])]:(R.lassoPoints={})[f.id]=U.map(O)};var C=f.dragOptions;f.dragOptions=k.extendDeep(C||{},{dragmode:_.dragmode,element:f.div,gd:w,plotinfo:{id:f.id,domain:_[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:E},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),S.off("click",f.onClickInPanHandler),n(P)||i(P)?(S.dragPan.disable(),S.on("zoomstart",f.clearOutline),f.dragOptions.prepFn=function(R,U,D){r(R,U,D,f.dragOptions,P)},p.init(f.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",f.clearOutline),f.div.onmousedown=null,f.div.ontouchstart=null,f.div.removeEventListener("touchstart",f.div._ontouchstart),f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),S.on("click",f.onClickInPanHandler))}function O(R){var U=f.map.unproject(R);return[U.lng,U.lat]}},d.updateFramework=function(_){var f=_[this.id].domain,S=_._size,w=this.div.style;w.width=S.w*(f.x[1]-f.x[0])+"px",w.height=S.h*(f.y[1]-f.y[0])+"px",w.left=S.l+f.x[0]*S.w+"px",w.top=S.t+(1-f.y[1])*S.h+"px",this.xaxis._offset=S.l+f.x[0]*S.w,this.xaxis._length=S.w*(f.x[1]-f.x[0]),this.yaxis._offset=S.t+(1-f.y[1])*S.h,this.yaxis._length=S.h*(f.y[1]-f.y[0])},d.updateLayers=function(_){var f,S=_[this.id].layers,w=this.layerList;if(S.length!==w.length){for(f=0;f<w.length;f++)w[f].dispose();for(w=this.layerList=[],f=0;f<S.length;f++)w.push(u(this,f,S[f]))}else for(f=0;f<S.length;f++)w[f].update(S[f])},d.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},d.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},d.setOptions=function(_,f,S){for(var w in S)this.map[f](_,w,S[w])},d.getMapLayers=function(){return this.map.getStyle().layers},d.addLayer=function(_,f){var S=this.map;if(typeof f=="string"){if(f==="")return void S.addLayer(_,f);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(f===w[E].id)return void S.addLayer(_,f);k.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(_)},d.project=function(_){return this.map.project(new A.LngLat(_[0],_[1]))},d.getView=function(){var _=this.map,f=_.getCenter(),S={lon:f.lng,lat:f.lat},w=_.getCanvas(),E=parseInt(w.style.width),P=parseInt(w.style.height);return{center:S,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,P]).toArray(),_.unproject([0,P]).toArray()]}}},d.getViewEdits=function(_){for(var f=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var P=S[E];w[f+"."+P]=_[P]}return w},d.getViewEditsWithDerived=function(_){var f=this.id,S=this.getViewEdits(_);return S[f+"._derived"]=_._derived,S},X.exports=x},66741:function(X){"use strict";X.exports=function(I){var e=I.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(X,I,e){"use strict";var A=e(33428),k=e(94336).m_,o=e(57624).SO,T=e(38248),b=e(83160),p=e(24040),s=e(73060),t=e(31780),i=e(3400),n=e(76308),r=e(39032).BADNUM,a=e(79811),l=e(1936).clearOutline,c=e(55308),h=e(85656),u=e(16672),x=e(84888)._M,d=i.relinkPrivateKeys,m=i._,g=X.exports={};i.extendFlat(g,p),g.attributes=e(45464),g.attributes.type.values=g.allTypes,g.fontAttrs=e(25376),g.layoutAttributes=e(64859);var y=g.transformsRegistry,v=e(62460);g.executeAPICommand=v.executeAPICommand,g.computeAPICommandBindings=v.computeAPICommandBindings,g.manageCommandObserver=v.manageCommandObserver,g.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,g.redrawText=function(F){return F=i.getGraphDiv(F),new Promise(function(j){setTimeout(function(){F._fullLayout&&(p.getComponentMethod("annotations","draw")(F),p.getComponentMethod("legend","draw")(F),p.getComponentMethod("colorbar","draw")(F),j(g.previousPromises(F)))},300)})},g.resize=function(F){var j;F=i.getGraphDiv(F);var q=new Promise(function(te,ee){F&&!i.isHidden(F)||ee(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(j=F._resolveResize),F._resolveResize=te,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||i.isHidden(F))te(F);else{delete F.layout.width,delete F.layout.height;var Q=F.changed;F.autoplay=!0,p.call("relayout",F,{autosize:!0}).then(function(){F.changed=Q,F._resolveResize===te&&(delete F._resolveResize,te(F))})}},100)});return j&&j(q),q},g.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},g.addLinks=function(F){if(F._context.showLink||F._context.showSources){var j=F._fullLayout,q=i.ensureSingle(j._paper,"text","js-plot-link-container",function(Y){Y.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var ie=A.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),te=q.node(),ee={y:j._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=j.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=j._paper.attr("width")-7),q.attr(ee);var Q=q.select(".js-link-to-tool"),J=q.select(".js-link-spacer"),K=q.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(Y,ie){ie.text("");var se=ie.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Y._context.linkText+" \xBB");if(Y._context.sendData)se.on("click",function(){g.sendDataToCloud(Y)});else{var ae=window.location.pathname.split("/"),ue=window.location.search;se.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ae[2].split(".")[0]+"/"+ae[1]+ue})}}(F,Q),J.text(Q.text()&&K.text()?" - ":"")}},g.sendDataToCloud=function(F){var j=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(j){F.emit("plotly_beforeexport");var q=A.select(F).append("div").attr("id","hiddenform").style("display","none"),te=q.append("form").attr({action:j+"/external",method:"post",target:"_blank"});return te.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(F,!1,"keepdata"),te.node().submit(),q.remove(),F.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],f=["year","month","dayMonth","dayMonthYear"];function S(F,j){var q=F._context.locale;q||(q="en-US");var te=!1,ee={};function Q(ae){for(var ue=!0,ve=0;ve<j.length;ve++){var ye=j[ve];ee[ye]||(ae[ye]?ee[ye]=ae[ye]:ue=!1)}ue&&(te=!0)}for(var J=0;J<2;J++){for(var K=F._context.locales,Y=0;Y<2;Y++){var ie=(K[q]||{}).format;if(ie&&(Q(ie),te))break;K=p.localeRegistry}var se=q.split("-")[0];if(te||se===q)break;q=se}return te||Q(p.localeRegistry.en.format),ee}function w(F,j){var q={_fullLayout:j},te=F._id.charAt(0)==="x",ee=F._mainAxis._anchorAxis,Q="",J="",K="";if(ee&&(K=ee._mainAxis._id,Q=te?F._id+K:K+F._id),!Q||!j._plots[Q]){Q="";for(var Y=F._counterAxes,ie=0;ie<Y.length;ie++){var se=Y[ie],ae=te?F._id+se:se+F._id;J||(J=ae);var ue=a.getFromId(q,se);if(K&&ue.overlaying===K){Q=ae;break}}}return Q||J}function E(F){var j=F.transforms;if(Array.isArray(j)&&j.length)for(var q=0;q<j.length;q++){var te=j[q],ee=te._module||y[te.type];if(ee&&ee.makesData)return!0}return!1}function P(F,j,q,te){for(var ee=F.transforms,Q=[F],J=0;J<ee.length;J++){var K=ee[J],Y=y[K.type];Y&&Y.transform&&(Q=Y.transform(Q,{transform:K,fullTrace:F,fullData:j,layout:q,fullLayout:te,transformIndex:J}))}return Q}function C(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function O(F){var j=F.margin;if(!F._size){var q=F._size={l:Math.round(j.l),r:Math.round(j.r),t:Math.round(j.t),b:Math.round(j.b),p:Math.round(j.pad)};q.w=Math.round(F.width)-q.l-q.r,q.h=Math.round(F.height)-q.t-q.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={}),F._reservedMargin||(F._reservedMargin={})}g.supplyDefaults=function(F,j){var q=j&&j.skipUpdateCalc,te=F._fullLayout||{};if(te._skipDefaults)delete te._skipDefaults;else{var ee,Q=F._fullLayout={},J=F.layout||{},K=F._fullData||[],Y=F._fullData=[],ie=F.data||[],se=F.calcdata||[],ae=F._context||{};F._transitionData||g.createTransitionData(F),Q._dfltTitle={plot:m(F,"Click to enter Plot title"),x:m(F,"Click to enter X axis title"),y:m(F,"Click to enter Y axis title"),colorbar:m(F,"Click to enter Colorscale title"),annotation:m(F,"new text")},Q._traceWord=m(F,"trace");var ue=S(F,_);if(Q._mapboxAccessToken=ae.mapboxAccessToken,te._initialAutoSizeIsDone){var ve=te.width,ye=te.height;g.supplyLayoutGlobalDefaults(J,Q,ue),J.width||(Q.width=ve),J.height||(Q.height=ye),g.sanitizeMargins(Q)}else{g.supplyLayoutGlobalDefaults(J,Q,ue);var de=!J.width||!J.height,pe=Q.autosize,ge=ae.autosizable;de&&(pe||ge)?g.plotAutoSize(F,J,Q):de&&g.sanitizeMargins(Q),!pe&&de&&(J.width=Q.width,J.height=Q.height)}Q._d3locale=function(Le,Be){return Le.decimal=Be.charAt(0),Le.thousands=Be.charAt(1),{numberFormat:function(Ve){try{Ve=o(Le).format(i.adjustFormat(Ve))}catch{return i.warnBadFormat(Ve),i.noFormat}return Ve},timeFormat:k(Le).utcFormat}}(ue,Q.separators),Q._extraFormat=S(F,f),Q._initialAutoSizeIsDone=!0,Q._dataLength=ie.length,Q._modules=[],Q._visibleModules=[],Q._basePlotModules=[];var ke=Q._subplots=function(){var Le,Be,Ve=p.collectableSubplotTypes,Ze={};if(!Ve){Ve=[];var rt=p.subplotsRegistry;for(var it in rt){var dt=rt[it].attr;if(dt&&(Ve.push(it),Array.isArray(dt)))for(Be=0;Be<dt.length;Be++)i.pushUnique(Ve,dt[Be])}}for(Le=0;Le<Ve.length;Le++)Ze[Ve[Le]]=[];return Ze}(),Ee=Q._splomAxes={x:{},y:{}},me=Q._splomSubplots={};Q._splomGridDflt={},Q._scatterStackOpts={},Q._firstScatter={},Q._alignmentOpts={},Q._colorAxes={},Q._requestRangeslider={},Q._traceUids=function(Le,Be){var Ve,Ze,rt=Be.length,it=[];for(Ve=0;Ve<Le.length;Ve++){var dt=Le[Ve]._fullInput;dt!==Ze&&it.push(dt),Ze=dt}var mt=it.length,ht=new Array(rt),Qe={};function Je(It,At){ht[At]=It,Qe[It]=1}function wt(It,At){if(It&&typeof It=="string"&&!Qe[It])return Je(It,At),!0}for(Ve=0;Ve<rt;Ve++){var Pt=Be[Ve].uid;typeof Pt=="number"&&(Pt=String(Pt)),wt(Pt,Ve)||Ve<mt&&wt(it[Ve].uid,Ve)||Je(i.randstr(Qe),Ve)}return ht}(K,ie),Q._globalTransforms=(F._context||{}).globalTransforms,g.supplyDataDefaults(ie,Y,J,Q);var oe=Object.keys(Ee.x),re=Object.keys(Ee.y);if(oe.length>1&&re.length>1){for(p.getComponentMethod("grid","sizeDefaults")(J,Q),ee=0;ee<oe.length;ee++)i.pushUnique(ke.xaxis,oe[ee]);for(ee=0;ee<re.length;ee++)i.pushUnique(ke.yaxis,re[ee]);for(var fe in me)i.pushUnique(ke.cartesian,fe)}if(Q._has=g._hasPlotType.bind(Q),K.length===Y.length)for(ee=0;ee<Y.length;ee++)d(Y[ee],K[ee]);g.supplyLayoutModuleDefaults(J,Q,Y,F._transitionData);var Se=Q._visibleModules,be=[];for(ee=0;ee<Se.length;ee++){var we=Se[ee].crossTraceDefaults;we&&i.pushUnique(be,we)}for(ee=0;ee<be.length;ee++)be[ee](Y,Q);Q._hasOnlyLargeSploms=Q._basePlotModules.length===1&&Q._basePlotModules[0].name==="splom"&&oe.length>15&&re.length>15&&Q.shapes.length===0&&Q.images.length===0,g.linkSubplots(Y,Q,K,te),g.cleanPlot(Y,Q,K,te);var Me=!(!te._has||!te._has("gl2d")),Ie=!(!Q._has||!Q._has("gl2d")),Oe=!(!te._has||!te._has("cartesian"))||Me,he=!(!Q._has||!Q._has("cartesian"))||Ie;Oe&&!he?te._bgLayer.remove():he&&!Oe&&(Q._shouldCreateBgLayer=!0),te._zoomlayer&&!F._dragging&&l({_fullLayout:te}),function(Le,Be){var Ve,Ze=[];Be.meta&&(Ve=Be._meta={meta:Be.meta,layout:{meta:Be.meta}});for(var rt=0;rt<Le.length;rt++){var it=Le[rt];it.meta?Ze[it.index]=it._meta={meta:it.meta}:Be.meta&&(it._meta={meta:Be.meta}),Be.meta&&(it._meta.layout={meta:Be.meta})}Ze.length&&(Ve||(Ve=Be._meta={}),Ve.data=Ze)}(Y,Q),d(Q,te),p.getComponentMethod("colorscale","crossTraceDefaults")(Y,Q),Q._preGUI||(Q._preGUI={}),Q._tracePreGUI||(Q._tracePreGUI={});var _e,Ae=Q._tracePreGUI,De={};for(_e in Ae)De[_e]="old";for(ee=0;ee<Y.length;ee++)De[_e=Y[ee]._fullInput.uid]||(Ae[_e]={}),De[_e]="new";for(_e in De)De[_e]==="old"&&delete Ae[_e];O(Q),p.getComponentMethod("rangeslider","makeData")(Q),q||se.length!==Y.length||g.supplyDefaultsUpdateCalc(se,Y)}},g.supplyDefaultsUpdateCalc=function(F,j){for(var q=0;q<j.length;q++){var te=j[q],ee=(F[q]||[])[0];if(ee&&ee.trace){var Q=ee.trace;if(Q._hasCalcTransform){var J,K,Y,ie=Q._arrayAttrs;for(J=0;J<ie.length;J++)K=ie[J],Y=i.nestedProperty(Q,K).get().slice(),i.nestedProperty(te,K).set(Y)}ee.trace=te}}},g.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},g._hasPlotType=function(F){var j,q=this._basePlotModules||[];for(j=0;j<q.length;j++)if(q[j].name===F)return!0;var te=this._modules||[];for(j=0;j<te.length;j++){var ee=te[j].name;if(ee===F)return!0;var Q=p.modules[ee];if(Q&&Q.categories[F])return!0}return!1},g.cleanPlot=function(F,j,q,te){var ee,Q,J=te._basePlotModules||[];for(ee=0;ee<J.length;ee++){var K=J[ee];K.clean&&K.clean(F,j,q,te)}var Y=te._has&&te._has("gl"),ie=j._has&&j._has("gl");Y&&!ie&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var se=!!te._infolayer;e:for(ee=0;ee<q.length;ee++){var ae=q[ee].uid;for(Q=0;Q<F.length;Q++)if(ae===F[Q].uid)continue e;se&&te._infolayer.select(".cb"+ae).remove()}},g.linkSubplots=function(F,j,q,te){var ee,Q,J=te._plots||{},K=j._plots={},Y=j._subplots,ie={_fullData:F,_fullLayout:j},se=Y.cartesian.concat(Y.gl2d||[]);for(ee=0;ee<se.length;ee++){var ae,ue=se[ee],ve=J[ue],ye=a.getFromId(ie,ue,"x"),de=a.getFromId(ie,ue,"y");for(ve?ae=K[ue]=ve:(ae=K[ue]={}).id=ue,ye._counterAxes.push(de._id),de._counterAxes.push(ye._id),ye._subplotsWith.push(ue),de._subplotsWith.push(ue),ae.xaxis=ye,ae.yaxis=de,ae._hasClipOnAxisFalse=!1,Q=0;Q<F.length;Q++){var pe=F[Q];if(pe.xaxis===ae.xaxis._id&&pe.yaxis===ae.yaxis._id&&pe.cliponaxis===!1){ae._hasClipOnAxisFalse=!0;break}}}var ge,ke=a.list(ie,null,!0);for(ee=0;ee<ke.length;ee++){var Ee=null;(ge=ke[ee]).overlaying&&(Ee=a.getFromId(ie,ge.overlaying))&&Ee.overlaying&&(ge.overlaying=!1,Ee=null),ge._mainAxis=Ee||ge,Ee&&(ge.domain=Ee.domain.slice()),ge._anchorAxis=ge.anchor==="free"?null:a.getFromId(ie,ge.anchor)}for(ee=0;ee<ke.length;ee++)if((ge=ke[ee])._counterAxes.sort(a.idSort),ge._subplotsWith.sort(i.subplotSort),ge._mainSubplot=w(ge,j),ge._counterAxes.length&&(ge.spikemode&&ge.spikemode.indexOf("across")!==-1||ge.automargin&&ge.mirror&&ge.anchor!=="free"||p.getComponentMethod("rangeslider","isVisible")(ge))){var me=1,oe=0;for(Q=0;Q<ge._counterAxes.length;Q++){var re=a.getFromId(ie,ge._counterAxes[Q]);me=Math.min(me,re.domain[0]),oe=Math.max(oe,re.domain[1])}me<oe&&(ge._counterDomainMin=me,ge._counterDomainMax=oe)}},g.clearExpandedTraceDefaultColors=function(F){var j,q,te;for(q=[],(j=F._module._colorAttrs)||(F._module._colorAttrs=j=[],s.crawl(F._module.attributes,function(ee,Q,J,K){q[K]=Q,q.length=K+1,ee.valType==="color"&&ee.dflt===void 0&&j.push(q.join("."))})),te=0;te<j.length;te++)i.nestedProperty(F,"_input."+j[te]).get()||i.nestedProperty(F,j[te]).set(null)},g.supplyDataDefaults=function(F,j,q,te){var ee,Q,J,K=te._modules,Y=te._visibleModules,ie=te._basePlotModules,se=0,ae=0;function ue(fe){j.push(fe);var Se=fe._module;Se&&(i.pushUnique(K,Se),fe.visible===!0&&i.pushUnique(Y,Se),i.pushUnique(ie,fe._module.basePlotModule),se++,fe._input.visible!==!1&&ae++)}te._transformModules=[];var ve={},ye=[],de=(q.template||{}).data||{},pe=t.traceTemplater(de);for(ee=0;ee<F.length;ee++){if(J=F[ee],(Q=pe.newTrace(J)).uid=te._traceUids[ee],g.supplyTraceDefaults(J,Q,ae,te,ee),Q.index=ee,Q._input=J,Q._expandedIndex=se,Q.transforms&&Q.transforms.length)for(var ge=J.visible!==!1&&Q.visible===!1,ke=P(Q,j,q,te),Ee=0;Ee<ke.length;Ee++){var me=ke[Ee],oe={_template:Q._template,type:Q.type,uid:Q.uid+Ee};ge&&me.visible===!1&&delete me.visible,g.supplyTraceDefaults(me,oe,se,te,ee),d(oe,me),oe.index=ee,oe._input=J,oe._fullInput=Q,oe._expandedIndex=se,oe._expandedInput=me,ue(oe)}else Q._fullInput=Q,Q._expandedInput=Q,ue(Q);p.traceIs(Q,"carpetAxis")&&(ve[Q.carpet]=Q),p.traceIs(Q,"carpetDependent")&&ye.push(ee)}for(ee=0;ee<ye.length;ee++)if((Q=j[ye[ee]]).visible){var re=ve[Q.carpet];Q._carpet=re,re&&re.visible?(Q.xaxis=re.xaxis,Q.yaxis=re.yaxis):Q.visible=!1}},g.supplyAnimationDefaults=function(F){var j;F=F||{};var q={};function te(ee,Q){return i.coerce(F||{},q,h,ee,Q)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(F.frame))for(q.frame=[],j=0;j<F.frame.length;j++)q.frame[j]=g.supplyAnimationFrameDefaults(F.frame[j]||{});else q.frame=g.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(q.transition=[],j=0;j<F.transition.length;j++)q.transition[j]=g.supplyAnimationTransitionDefaults(F.transition[j]||{});else q.transition=g.supplyAnimationTransitionDefaults(F.transition||{});return q},g.supplyAnimationFrameDefaults=function(F){var j={};function q(te,ee){return i.coerce(F||{},j,h.frame,te,ee)}return q("duration"),q("redraw"),j},g.supplyAnimationTransitionDefaults=function(F){var j={};function q(te,ee){return i.coerce(F||{},j,h.transition,te,ee)}return q("duration"),q("easing"),j},g.supplyFrameDefaults=function(F){var j={};function q(te,ee){return i.coerce(F,j,u,te,ee)}return q("group"),q("name"),q("traces"),q("baseframe"),q("data"),q("layout"),j},g.supplyTraceDefaults=function(F,j,q,te,ee){var Q,J=te.colorway||n.defaults,K=J[q%J.length];function Y(Ee,me){return i.coerce(F,j,g.attributes,Ee,me)}var ie=Y("visible");Y("type"),Y("name",te._traceWord+" "+ee),Y("uirevision",te.uirevision);var se=g.getModule(j);if(j._module=se,se){var ae=se.basePlotModule,ue=ae.attr,ve=ae.attributes;if(ue&&ve){var ye=te._subplots,de="";if(ie||ae.name!=="gl2d"){if(Array.isArray(ue))for(Q=0;Q<ue.length;Q++){var pe=ue[Q],ge=i.coerce(F,j,ve,pe);ye[pe]&&i.pushUnique(ye[pe],ge),de+=ge}else de=i.coerce(F,j,ve,ue);ye[ae.name]&&i.pushUnique(ye[ae.name],de)}}}if(ie){if(Y("customdata"),Y("ids"),Y("meta"),p.traceIs(j,"showLegend")?(i.coerce(F,j,se.attributes.showlegend?se.attributes:g.attributes,"showlegend"),Y("legend"),Y("legendwidth"),Y("legendgroup"),Y("legendgrouptitle.text"),Y("legendrank"),j._dfltShowLegend=!0):j._dfltShowLegend=!1,se&&se.supplyDefaults(F,j,K,te),p.traceIs(j,"noOpacity")||Y("opacity"),p.traceIs(j,"notLegendIsolatable")&&(j.visible=!!j.visible),p.traceIs(j,"noHover")||(j.hovertemplate||i.coerceHoverinfo(F,j,te),j.type!=="parcats"&&p.getComponentMethod("fx","supplyDefaults")(F,j,K,te)),se&&se.selectPoints){var ke=Y("selectedpoints");i.isTypedArray(ke)&&(j.selectedpoints=Array.from(ke))}g.supplyTransformDefaults(F,j,te)}return j},g.hasMakesDataTransform=E,g.supplyTransformDefaults=function(F,j,q){if(j._length||E(F)){var te=q._globalTransforms||[],ee=q._transformModules||[];if(Array.isArray(F.transforms)||te.length!==0)for(var Q=F.transforms||[],J=te.concat(Q),K=j.transforms=[],Y=0;Y<J.length;Y++){var ie,se=J[Y],ae=se.type,ue=y[ae],ve=!(se._module&&se._module===ue),ye=ue&&typeof ue.transform=="function";ue||i.warn("Unrecognized transform type "+ae+"."),ue&&ue.supplyDefaults&&(ve||ye)?((ie=ue.supplyDefaults(se,j,q,F)).type=ae,ie._module=ue,i.pushUnique(ee,ue)):ie=i.extendFlat({},se),K.push(ie)}}},g.supplyLayoutGlobalDefaults=function(F,j,q){function te(se,ae){return i.coerce(F,j,g.layoutAttributes,se,ae)}var ee=F.template;i.isPlainObject(ee)&&(j.template=ee,j._template=ee.layout,j._dataTemplate=ee.data),te("autotypenumbers");var Q=i.coerceFont(te,"font"),J=Q.size;i.coerceFont(te,"title.font",Q,{overrideDflt:{size:Math.round(1.4*J)}}),te("title.text",j._dfltTitle.plot),te("title.xref");var K=te("title.yref");te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var Y=te("title.automargin");te("title.x"),te("title.xanchor"),te("title.y"),te("title.yanchor"),Y&&(K==="paper"&&(j.title.y!==0&&(j.title.y=1),j.title.yanchor==="auto"&&(j.title.yanchor=j.title.y===0?"top":"bottom")),K==="container"&&(j.title.y==="auto"&&(j.title.y=1),j.title.yanchor==="auto"&&(j.title.yanchor=j.title.y<.5?"bottom":"top"))),te("uniformtext.mode")&&te("uniformtext.minsize"),te("autosize",!(F.width&&F.height)),te("width"),te("height"),te("minreducedwidth"),te("minreducedheight"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),F.width&&F.height&&g.sanitizeMargins(j),p.getComponentMethod("grid","sizeDefaults")(F,j),te("paper_bgcolor"),te("separators",q.decimal+q.thousands),te("hidesources"),te("colorway"),te("datarevision");var ie=te("uirevision");te("editrevision",ie),te("selectionrevision",ie),p.getComponentMethod("modebar","supplyLayoutDefaults")(F,j),p.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,j,te),p.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,j,te),te("meta"),i.isPlainObject(F.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),p.getComponentMethod("calendars","handleDefaults")(F,j,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,j,te),i.coerce(F,j,c,"scattermode")},g.plotAutoSize=function(F,j,q){var te,ee,Q=F._context||{},J=Q.frameMargins,K=i.isPlotDiv(F);if(K&&F.emit("plotly_autosize"),Q.fillFrame)te=window.innerWidth,ee=window.innerHeight,document.body.style.overflow="hidden";else{var Y=K?window.getComputedStyle(F):{};if(te=C(Y.width)||C(Y.maxWidth)||q.width,ee=C(Y.height)||C(Y.maxHeight)||q.height,T(J)&&J>0){var ie=1-2*J;te=Math.round(ie*te),ee=Math.round(ie*ee)}}var se=g.layoutAttributes.width.min,ae=g.layoutAttributes.height.min;te<se&&(te=se),ee<ae&&(ee=ae);var ue=!j.width&&Math.abs(q.width-te)>1,ve=!j.height&&Math.abs(q.height-ee)>1;(ve||ue)&&(ue&&(q.width=te),ve&&(q.height=ee)),F._initialAutoSize||(F._initialAutoSize={width:te,height:ee}),g.sanitizeMargins(q)},g.supplyLayoutModuleDefaults=function(F,j,q,te){var ee,Q,J,K=p.componentsRegistry,Y=j._basePlotModules,ie=p.subplotsRegistry.cartesian;for(ee in K)(J=K[ee]).includeBasePlot&&J.includeBasePlot(F,j);for(var se in Y.length||Y.push(ie),j._has("cartesian")&&(p.getComponentMethod("grid","contentDefaults")(F,j),ie.finalizeSubplots(F,j)),j._subplots)j._subplots[se].sort(i.subplotSort);for(Q=0;Q<Y.length;Q++)(J=Y[Q]).supplyLayoutDefaults&&J.supplyLayoutDefaults(F,j,q);var ae=j._modules;for(Q=0;Q<ae.length;Q++)(J=ae[Q]).supplyLayoutDefaults&&J.supplyLayoutDefaults(F,j,q);var ue=j._transformModules;for(Q=0;Q<ue.length;Q++)(J=ue[Q]).supplyLayoutDefaults&&J.supplyLayoutDefaults(F,j,q,te);for(ee in K)(J=K[ee]).supplyLayoutDefaults&&J.supplyLayoutDefaults(F,j,q)},g.purge=function(F){var j=F._fullLayout||{};j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.remove(),j._glcanvas=null),j._modeBar&&j._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},g.style=function(F){var j,q=F._fullLayout._visibleModules,te=[];for(j=0;j<q.length;j++){var ee=q[j];ee.style&&i.pushUnique(te,ee.style)}for(j=0;j<te.length;j++)te[j](F)},g.sanitizeMargins=function(F){if(F&&F.margin){var j,q=F.width,te=F.height,ee=F.margin,Q=q-(ee.l+ee.r),J=te-(ee.t+ee.b);Q<0&&(j=(q-1)/(ee.l+ee.r),ee.l=Math.floor(j*ee.l),ee.r=Math.floor(j*ee.r)),J<0&&(j=(te-1)/(ee.t+ee.b),ee.t=Math.floor(j*ee.t),ee.b=Math.floor(j*ee.b))}},g.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(F,j){F._fullLayout._pushmarginIds[j]=1},g.autoMargin=function(F,j,q){var te=F._fullLayout,ee=te.width,Q=te.height,J=te.margin,K=te.minreducedwidth,Y=te.minreducedheight,ie=i.constrain(ee-J.l-J.r,2,K),se=i.constrain(Q-J.t-J.b,2,Y),ae=Math.max(0,ee-ie),ue=Math.max(0,Q-se),ve=te._pushmargin,ye=te._pushmarginIds;if(J.autoexpand!==!1){if(q){var de=q.pad;if(de===void 0&&(de=Math.min(12,J.l,J.r,J.t,J.b)),ae){var pe=(q.l+q.r)/ae;pe>1&&(q.l/=pe,q.r/=pe)}if(ue){var ge=(q.t+q.b)/ue;ge>1&&(q.t/=ge,q.b/=ge)}var ke=q.xl!==void 0?q.xl:q.x,Ee=q.xr!==void 0?q.xr:q.x,me=q.yt!==void 0?q.yt:q.y,oe=q.yb!==void 0?q.yb:q.y;ve[j]={l:{val:ke,size:q.l+de},r:{val:Ee,size:q.r+de},b:{val:oe,size:q.b+de},t:{val:me,size:q.t+de}},ye[j]=1}else delete ve[j],delete ye[j];if(!te._replotting)return g.doAutoMargin(F)}},g.doAutoMargin=function(F){var j=F._fullLayout,q=j.width,te=j.height;j._size||(j._size={}),O(j);var ee=j._size,Q=j.margin,J={t:0,b:0,l:0,r:0},K=i.extendFlat({},ee),Y=Q.l,ie=Q.r,se=Q.t,ae=Q.b,ue=j._pushmargin,ve=j._pushmarginIds,ye=j.minreducedwidth,de=j.minreducedheight;if(Q.autoexpand!==!1){for(var pe in ue)ve[pe]||delete ue[pe];var ge=F._fullLayout._reservedMargin;for(var ke in ge)for(var Ee in ge[ke]){var me=ge[ke][Ee];J[Ee]=Math.max(J[Ee],me)}for(var oe in ue.base={l:{val:0,size:Y},r:{val:1,size:ie},t:{val:1,size:se},b:{val:0,size:ae}},J){var re=0;for(var fe in ue)fe!=="base"&&T(ue[fe][oe].size)&&(re=ue[fe][oe].size>re?ue[fe][oe].size:re);var Se=Math.max(0,Q[oe]-re);J[oe]=Math.max(0,J[oe]-Se)}for(var be in ue){var we=ue[be].l||{},Me=ue[be].b||{},Ie=we.val,Oe=we.size,he=Me.val,_e=Me.size,Ae=q-J.r-J.l,De=te-J.t-J.b;for(var Le in ue){if(T(Oe)&&ue[Le].r){var Be=ue[Le].r.val,Ve=ue[Le].r.size;if(Be>Ie){var Ze=(Oe*Be+(Ve-Ae)*Ie)/(Be-Ie),rt=(Ve*(1-Ie)+(Oe-Ae)*(1-Be))/(Be-Ie);Ze+rt>Y+ie&&(Y=Ze,ie=rt)}}if(T(_e)&&ue[Le].t){var it=ue[Le].t.val,dt=ue[Le].t.size;if(it>he){var mt=(_e*it+(dt-De)*he)/(it-he),ht=(dt*(1-he)+(_e-De)*(1-it))/(it-he);mt+ht>ae+se&&(ae=mt,se=ht)}}}}}var Qe=i.constrain(q-Q.l-Q.r,2,ye),Je=i.constrain(te-Q.t-Q.b,2,de),wt=Math.max(0,q-Qe),Pt=Math.max(0,te-Je);if(wt){var It=(Y+ie)/wt;It>1&&(Y/=It,ie/=It)}if(Pt){var At=(ae+se)/Pt;At>1&&(ae/=At,se/=At)}if(ee.l=Math.round(Y)+J.l,ee.r=Math.round(ie)+J.r,ee.t=Math.round(se)+J.t,ee.b=Math.round(ae)+J.b,ee.p=Math.round(Q.pad),ee.w=Math.round(q)-ee.l-ee.r,ee.h=Math.round(te)-ee.t-ee.b,!j._replotting&&(g.didMarginChange(K,ee)||function(Ye){if("_redrawFromAutoMarginCount"in Ye._fullLayout)return!1;var Ne=a.list(Ye,"",!0);for(var We in Ne)if(Ne[We].autoshift||Ne[We].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in j?j._redrawFromAutoMarginCount++:j._redrawFromAutoMarginCount=1;var qe=3*(1+Object.keys(ve).length);if(j._redrawFromAutoMarginCount<qe)return p.call("_doPlot",F);j._size=K,i.warn("Too many auto-margin redraws.")}(function(Ye){var Ne=a.list(Ye,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(We){for(var at=0;at<Ne.length;at++){var tt=Ne[at][We];tt&&tt()}})})(F)};var R=["l","r","t","b","p","w","h"];function U(F,j,q){var te=!1,ee=[g.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(J){var K=Promise.resolve();if(!J)return K;for(;J.length;)K=K.then(J.shift());return K}(F._transitionData._interruptCallbacks)},q.prepareFn,g.rehover,g.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(J){F._transitioning=!0,j.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){te=!0}),q.redraw&&F._transitionData._interruptCallbacks.push(function(){return p.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var K=0,Y=0;function ie(){return K++,function(){var se;Y++,te||Y!==K||(se=J,F._transitionData&&(function(ae){if(ae)for(;ae.length;)ae.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(q.redraw)return p.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(se)))}}q.runFn(ie),setTimeout(ie())})}],Q=i.syncOrAsync(ee,F);return Q&&Q.then||(Q=Promise.resolve()),Q.then(function(){return F})}g.didMarginChange=function(F,j){for(var q=0;q<R.length;q++){var te=R[q],ee=F[te],Q=j[te];if(!T(ee)||Math.abs(Q-ee)>1)return!0}return!1},g.graphJson=function(F,j,q,te,ee,Q){(ee&&j&&!F._fullData||ee&&!j&&!F._fullLayout)&&g.supplyDefaults(F);var J=ee?F._fullData:F.data,K=ee?F._fullLayout:F.layout,Y=(F._transitionData||{})._frames;function ie(ue,ve){if(typeof ue=="function")return ve?"_function_":null;if(i.isPlainObject(ue)){var ye,de={};return Object.keys(ue).sort().forEach(function(Ee){if(["_","["].indexOf(Ee.charAt(0))===-1)if(typeof ue[Ee]!="function"){if(q==="keepdata"){if(Ee.substr(Ee.length-3)==="src")return}else if(q==="keepstream"){if(typeof(ye=ue[Ee+"src"])=="string"&&ye.indexOf(":")>0&&!i.isPlainObject(ue.stream))return}else if(q!=="keepall"&&typeof(ye=ue[Ee+"src"])=="string"&&ye.indexOf(":")>0)return;de[Ee]=ie(ue[Ee],ve)}else ve&&(de[Ee]="_function")}),de}var pe=Array.isArray(ue),ge=i.isTypedArray(ue);if((pe||ge)&&ue.dtype&&ue.shape){var ke=ue.bdata;return ie({dtype:ue.dtype,shape:ue.shape,bdata:i.isArrayBuffer(ke)?b.encode(ke):ke},ve)}return pe?ue.map(function(Ee){return ie(Ee,ve)}):ge?i.simpleMap(ue,i.identity):i.isJSDate(ue)?i.ms2DateTimeLocal(+ue):ue}var se={data:(J||[]).map(function(ue){var ve=ie(ue);return j&&delete ve.fit,ve})};if(!j&&(se.layout=ie(K),ee)){var ae=K._size;se.layout.computed={margin:{b:ae.b,l:ae.l,r:ae.r,t:ae.t}}}return Y&&(se.frames=ie(Y)),Q&&(se.config=ie(F._context,!0)),te==="object"?se:JSON.stringify(se)},g.modifyFrames=function(F,j){var q,te,ee,Q=F._transitionData._frames,J=F._transitionData._frameHash;for(q=0;q<j.length;q++)switch((te=j[q]).type){case"replace":ee=te.value;var K=(Q[te.index]||{}).name,Y=ee.name;Q[te.index]=J[Y]=ee,Y!==K&&(delete J[K],J[Y]=ee);break;case"insert":J[(ee=te.value).name]=ee,Q.splice(te.index,0,ee);break;case"delete":delete J[(ee=Q[te.index]).name],Q.splice(te.index,1)}return Promise.resolve()},g.computeFrame=function(F,j){var q,te,ee,Q,J=F._transitionData._frameHash;if(!j)throw new Error("computeFrame must be given a string frame name");var K=J[j.toString()];if(!K)return!1;for(var Y=[K],ie=[K.name];K.baseframe&&(K=J[K.baseframe.toString()])&&ie.indexOf(K.name)===-1;)Y.push(K),ie.push(K.name);for(var se={};K=Y.pop();)if(K.layout&&(se.layout=g.extendLayout(se.layout,K.layout)),K.data){if(se.data||(se.data=[]),!(te=K.traces))for(te=[],q=0;q<K.data.length;q++)te[q]=q;for(se.traces||(se.traces=[]),q=0;q<K.data.length;q++)(ee=te[q])!=null&&((Q=se.traces.indexOf(ee))===-1&&(Q=se.data.length,se.traces[Q]=ee),se.data[Q]=g.extendTrace(se.data[Q],K.data[q]))}return se},g.recomputeFrameHash=function(F){for(var j=F._transitionData._frameHash={},q=F._transitionData._frames,te=0;te<q.length;te++){var ee=q[te];ee&&ee.name&&(j[ee.name]=ee)}},g.extendObjectWithContainers=function(F,j,q){var te,ee,Q,J,K,Y,ie,se=i.extendDeepNoArrays({},j||{}),ae=i.expandObjectPaths(se),ue={};if(q&&q.length)for(Q=0;Q<q.length;Q++)(ee=(te=i.nestedProperty(ae,q[Q])).get())===void 0?i.nestedProperty(ue,q[Q]).set(null):(te.set(null),i.nestedProperty(ue,q[Q]).set(ee));if(F=i.extendDeepNoArrays(F||{},ae),q&&q.length){for(Q=0;Q<q.length;Q++)if(Y=i.nestedProperty(ue,q[Q]).get()){for(ie=(K=i.nestedProperty(F,q[Q])).get(),Array.isArray(ie)||(ie=[],K.set(ie)),J=0;J<Y.length;J++){var ve=Y[J];ie[J]=ve===null?null:g.extendObjectWithContainers(ie[J],ve)}K.set(ie)}}return F},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=p.layoutArrayContainers,g.extendTrace=function(F,j){return g.extendObjectWithContainers(F,j,g.dataArrayContainers)},g.extendLayout=function(F,j){return g.extendObjectWithContainers(F,j,g.layoutArrayContainers)},g.transition=function(F,j,q,te,ee,Q){var J={redraw:ee.redraw},K={},Y=[];return J.prepareFn=function(){for(var ie=Array.isArray(j)?j.length:0,se=te.slice(0,ie),ae=0;ae<se.length;ae++){var ue=se[ae],ve=F._fullData[ue]._module;if(ve){if(ve.animatable){var ye=ve.basePlotModule.name;K[ye]||(K[ye]=[]),K[ye].push(ue)}F.data[se[ae]]=g.extendTrace(F.data[se[ae]],j[ae])}}var de=i.expandObjectPaths(i.extendDeepNoArrays({},q)),pe=/^[xy]axis[0-9]*$/;for(var ge in de)pe.test(ge)&&delete de[ge].range;g.extendLayout(F.layout,de),delete F.calcdata,g.supplyDefaults(F),g.doCalcdata(F);var ke=i.expandObjectPaths(q);if(ke){var Ee=F._fullLayout._plots;for(var me in Ee){var oe=Ee[me],re=oe.xaxis,fe=oe.yaxis,Se=re.range.slice(),be=fe.range.slice(),we=null,Me=null,Ie=null,Oe=null;Array.isArray(ke[re._name+".range"])?we=ke[re._name+".range"].slice():Array.isArray((ke[re._name]||{}).range)&&(we=ke[re._name].range.slice()),Array.isArray(ke[fe._name+".range"])?Me=ke[fe._name+".range"].slice():Array.isArray((ke[fe._name]||{}).range)&&(Me=ke[fe._name].range.slice()),Se&&we&&(re.r2l(Se[0])!==re.r2l(we[0])||re.r2l(Se[1])!==re.r2l(we[1]))&&(Ie={xr0:Se,xr1:we}),be&&Me&&(fe.r2l(be[0])!==fe.r2l(Me[0])||fe.r2l(be[1])!==fe.r2l(Me[1]))&&(Oe={yr0:be,yr1:Me}),(Ie||Oe)&&Y.push(i.extendFlat({plotinfo:oe},Ie,Oe))}}return Promise.resolve()},J.runFn=function(ie){var se,ae,ue=F._fullLayout._basePlotModules,ve=Y.length;if(q)for(ae=0;ae<ue.length;ae++)ue[ae].transitionAxes&&ue[ae].transitionAxes(F,Y,Q,ie);for(var ye in ve?((se=i.extendFlat({},Q)).duration=0,delete K.cartesian):se=Q,K){var de=K[ye];F._fullData[de[0]]._module.basePlotModule.plot(F,de,se,ie)}},U(F,Q,J)},g.transitionFromReact=function(F,j,q,te){var ee=F._fullLayout,Q=ee.transition,J={},K=[];return J.prepareFn=function(){var Y=ee._plots;for(var ie in J.redraw=!1,j.anim==="some"&&(J.redraw=!0),q.anim==="some"&&(J.redraw=!0),Y){var se=Y[ie],ae=se.xaxis,ue=se.yaxis,ve=te[ae._name].range.slice(),ye=te[ue._name].range.slice(),de=ae.range.slice(),pe=ue.range.slice();ae.setScale(),ue.setScale();var ge=null,ke=null;ae.r2l(ve[0])===ae.r2l(de[0])&&ae.r2l(ve[1])===ae.r2l(de[1])||(ge={xr0:ve,xr1:de}),ue.r2l(ye[0])===ue.r2l(pe[0])&&ue.r2l(ye[1])===ue.r2l(pe[1])||(ke={yr0:ye,yr1:pe}),(ge||ke)&&K.push(i.extendFlat({plotinfo:se},ge,ke))}return Promise.resolve()},J.runFn=function(Y){for(var ie,se,ae,ue=F._fullData,ve=F._fullLayout._basePlotModules,ye=[],de=0;de<ue.length;de++)ye.push(de);function pe(){if(F._fullLayout)for(var ke=0;ke<ve.length;ke++)ve[ke].transitionAxes&&ve[ke].transitionAxes(F,K,ie,Y)}function ge(){if(F._fullLayout)for(var ke=0;ke<ve.length;ke++)ve[ke].plot(F,ae,se,Y)}K.length&&j.anim?Q.ordering==="traces first"?(ie=i.extendFlat({},Q,{duration:0}),ae=ye,se=Q,setTimeout(pe,Q.duration),ge()):(ie=Q,ae=null,se=i.extendFlat({},Q,{duration:0}),setTimeout(ge,ie.duration),pe()):K.length?(ie=Q,pe()):j.anim&&(ae=ye,se=Q,ge())},U(F,Q,J)},g.doCalcdata=function(F,j){var q,te,ee,Q,J=a.list(F),K=F._fullData,Y=F._fullLayout,ie=new Array(K.length),se=(F.calcdata||[]).slice();for(F.calcdata=ie,Y._numBoxes=0,Y._numViolins=0,Y._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,Y._piecolormap={},Y._sunburstcolormap={},Y._treemapcolormap={},Y._iciclecolormap={},Y._funnelareacolormap={},ee=0;ee<K.length;ee++)Array.isArray(j)&&j.indexOf(ee)===-1&&(ie[ee]=se[ee]);for(ee=0;ee<K.length;ee++)(q=K[ee])._arrayAttrs=s.findArrayAttributes(q),q._extremes={};var ae=Y._subplots.polar||[];for(ee=0;ee<ae.length;ee++)J.push(Y[ae[ee]].radialaxis,Y[ae[ee]].angularaxis);for(var ue in Y._colorAxes){var ve=Y[ue];ve.cauto!==!1&&(delete ve.cmin,delete ve.cmax)}var ye=!1;function de(ke){if(q=K[ke],te=q._module,q.visible===!0&&q.transforms){if(te&&te.calc){var Ee=te.calc(F,q);Ee[0]&&Ee[0].t&&Ee[0].t._scene&&delete Ee[0].t._scene.dirty}for(Q=0;Q<q.transforms.length;Q++){var me=q.transforms[Q];(te=y[me.type])&&te.calcTransform&&(q._hasCalcTransform=!0,ye=!0,te.calcTransform(F,q,me))}}}function pe(ke,Ee){if(q=K[ke],!!(te=q._module).isContainer===Ee){var me=[];if(q.visible===!0&&q._length!==0){delete q._indexToPoints;var oe=q.transforms||[];for(Q=oe.length-1;Q>=0;Q--)if(oe[Q].enabled){q._indexToPoints=oe[Q]._indexToPoints;break}te&&te.calc&&(me=te.calc(F,q))}Array.isArray(me)&&me[0]||(me=[{x:r,y:r}]),me[0].t||(me[0].t={}),me[0].trace=q,ie[ke]=me}}for(N(J,K,Y),ee=0;ee<K.length;ee++)pe(ee,!0);for(ee=0;ee<K.length;ee++)de(ee);for(ye&&N(J,K,Y),ee=0;ee<K.length;ee++)pe(ee,!0);for(ee=0;ee<K.length;ee++)pe(ee,!1);W(F);var ge=function(ke,Ee){var me,oe,re,fe,Se,be=[];function we(We,at,tt){var Re=at._id.charAt(0);if(We==="histogram2dcontour"){var Fe=at._counterAxes[0],nt=a.getFromId(Ee,Fe),Ge=Re==="x"||Fe==="x"&&nt.type==="category",ut=Re==="y"||Fe==="y"&&nt.type==="category";return function(pt,gt){return pt===0||gt===0||Ge&&pt===tt[gt].length-1||ut&&gt===tt.length-1?-1:(Re==="y"?gt:pt)-1}}return function(pt,gt){return Re==="y"?gt:pt}}var Me={min:function(We){return i.aggNums(Math.min,null,We)},max:function(We){return i.aggNums(Math.max,null,We)},sum:function(We){return i.aggNums(function(at,tt){return at+tt},null,We)},total:function(We){return i.aggNums(function(at,tt){return at+tt},null,We)},mean:function(We){return i.mean(We)},median:function(We){return i.median(We)}};function Ie(We,at){return We[1]-at[1]}function Oe(We,at){return at[1]-We[1]}for(me=0;me<ke.length;me++){var he=ke[me];if(he.type==="category"){var _e=he.categoryorder.match(D);if(_e){var Ae=_e[1],De=_e[2],Le=he._id.charAt(0),Be=Le==="x",Ve=[];for(oe=0;oe<he._categories.length;oe++)Ve.push([he._categories[oe],[]]);for(oe=0;oe<he._traceIndices.length;oe++){var Ze=he._traceIndices[oe],rt=Ee._fullData[Ze];if(rt.visible===!0){var it=rt.type;p.traceIs(rt,"histogram")&&(delete rt._xautoBinFinished,delete rt._yautoBinFinished);var dt=it==="splom",mt=it==="scattergl",ht=Ee.calcdata[Ze];for(re=0;re<ht.length;re++){var Qe,Je,wt=ht[re];if(dt){var Pt=rt._axesDim[he._id];if(!Be){var It=rt._diag[Pt][0];It&&(he=Ee._fullLayout[a.id2name(It)])}var At=wt.trace.dimensions[Pt].values;for(fe=0;fe<At.length;fe++)for(Qe=he._categoriesMap[At[fe]],Se=0;Se<wt.trace.dimensions.length;Se++)if(Se!==Pt){var qe=wt.trace.dimensions[Se];Ve[Qe][1].push(qe.values[fe])}}else if(mt){for(fe=0;fe<wt.t.x.length;fe++)Be?(Qe=wt.t.x[fe],Je=wt.t.y[fe]):(Qe=wt.t.y[fe],Je=wt.t.x[fe]),Ve[Qe][1].push(Je);wt.t&&wt.t._scene&&delete wt.t._scene.dirty}else if(wt.hasOwnProperty("z")){Je=wt.z;var Ye=we(rt.type,he,Je);for(fe=0;fe<Je.length;fe++)for(Se=0;Se<Je[fe].length;Se++)(Qe=Ye(Se,fe))+1&&Ve[Qe][1].push(Je[fe][Se])}else for((Qe=wt.p)===void 0&&(Qe=wt[Le]),(Je=wt.s)===void 0&&(Je=wt.v),Je===void 0&&(Je=Be?wt.y:wt.x),Array.isArray(Je)||(Je=Je===void 0?[]:[Je]),fe=0;fe<Je.length;fe++)Ve[Qe][1].push(Je[fe])}}}he._categoriesValue=Ve;var Ne=[];for(oe=0;oe<Ve.length;oe++)Ne.push([Ve[oe][0],Me[Ae](Ve[oe][1])]);Ne.sort(De==="descending"?Oe:Ie),he._categoriesAggregatedValue=Ne,he._initialCategories=Ne.map(function(We){return We[0]}),be=be.concat(he.sortByInitialCategories())}}}return be}(J,F);if(ge.length){for(Y._numBoxes=0,Y._numViolins=0,ee=0;ee<ge.length;ee++)pe(ge[ee],!0);for(ee=0;ee<ge.length;ee++)pe(ge[ee],!1);W(F)}p.getComponentMethod("fx","calc")(F),p.getComponentMethod("errorbars","calc")(F)};var D=/(total|sum|min|max|mean|median) (ascending|descending)/;function N(F,j,q){var te={};function ee(Y){Y.clearCalc(),Y.type==="multicategory"&&Y.setupMultiCategory(j),te[Y._id]=1}i.simpleMap(F,ee);for(var Q=q._axisMatchGroups||[],J=0;J<Q.length;J++)for(var K in Q[J])te[K]||ee(q[a.id2name(K)])}function W(F){var j,q,te,ee=F._fullLayout,Q=ee._visibleModules,J={};for(q=0;q<Q.length;q++){var K=Q[q],Y=K.crossTraceCalc;if(Y){var ie=K.basePlotModule.name;J[ie]?i.pushUnique(J[ie],Y):J[ie]=[Y]}}for(te in J){var se=J[te],ae=ee._subplots[te];if(Array.isArray(ae))for(j=0;j<ae.length;j++){var ue=ae[j],ve=te==="cartesian"?ee._plots[ue]:ee[ue];for(q=0;q<se.length;q++)se[q](F,ve,ue)}else for(q=0;q<se.length;q++)se[q](F)}}g.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},g.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},g.reselect=function(F){var j=F._fullLayout,q=(F.layout||{}).selections,te=j._previousSelections;j._previousSelections=q;var ee=j._reselect||JSON.stringify(q)!==JSON.stringify(te);p.getComponentMethod("selections","reselect")(F,ee)},g.generalUpdatePerTraceModule=function(F,j,q,te){var ee,Q=j.traceHash,J={};for(ee=0;ee<q.length;ee++){var K=q[ee],Y=K[0].trace;Y.visible&&(J[Y.type]=J[Y.type]||[],J[Y.type].push(K))}for(var ie in Q)if(!J[ie]){var se=Q[ie][0];se[0].trace.visible=!1,J[ie]=[se]}for(var ae in J){var ue=J[ae];ue[0][0].trace._module.plot(F,j,i.filterVisible(ue),te)}j.traceHash=J},g.plotBasePlot=function(F,j,q,te,ee){var Q=p.getModule(F),J=x(j.calcdata,Q)[0];Q.plot(j,J,te,ee)},g.cleanBasePlot=function(F,j,q,te,ee){var Q=ee._has&&ee._has(F),J=q._has&&q._has(F);Q&&!J&&ee["_"+F+"layer"].selectAll("g.trace").remove()}},39360:function(X){"use strict";X.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(X,I,e){"use strict";var A=e(3400),k=e(92065).tester,o=A.findIndexOfMin,T=A.isAngleInsideSector,b=A.angleDelta,p=A.angleDist;function s(r,a,l,c){var h,u,x=c[0],d=c[1],m=i(Math.sin(a)-Math.sin(r)),g=i(Math.cos(a)-Math.cos(r)),y=Math.tan(l),v=i(1/y),_=m/g,f=d-_*x;return v?m&&g?u=y*(h=f/(y-_)):g?(h=d*v,u=d):(h=x,u=x*y):m&&g?(h=0,u=f):g?(h=0,u=d):h=u=NaN,[h,u]}function t(r,a,l,c){return A.isFullCircle([a,l])?function(h,u){var x,d=u.length,m=new Array(d+1);for(x=0;x<d;x++){var g=u[x];m[x]=[h*Math.cos(g),h*Math.sin(g)]}return m[x]=m[0].slice(),m}(r,c):function(h,u,x,d){var m,g,y=d.length,v=[];function _(U){return[h*Math.cos(U),h*Math.sin(U)]}function f(U,D,N){return s(U,D,N,_(U))}function S(U){return A.mod(U,y)}function w(U){return T(U,[u,x])}var E=o(d,function(U){return w(U)?p(U,u):1/0}),P=f(d[E],d[S(E-1)],u);for(v.push(P),m=E,g=0;g<y;m++,g++){var C=d[S(m)];if(!w(C))break;v.push(_(C))}var O=o(d,function(U){return w(U)?p(U,x):1/0}),R=f(d[O],d[S(O+1)],x);return v.push(R),v.push([0,0]),v.push(v[0].slice()),v}(r,a,l,c)}function i(r){return Math.abs(r)>1e-10?r:0}function n(r,a,l){a=a||0,l=l||0;for(var c=r.length,h=new Array(c),u=0;u<c;u++){var x=r[u];h[u]=[a+x[0],l-x[1]]}return h}X.exports={isPtInsidePolygon:function(r,a,l,c,h){if(!T(a,c))return!1;var u,x;l[0]<l[1]?(u=l[0],x=l[1]):(u=l[1],x=l[0]);var d=k(t(u,c[0],c[1],h)),m=k(t(x,c[0],c[1],h)),g=[r*Math.cos(a),r*Math.sin(a)];return m.contains(g)&&!d.contains(g)},findPolygonOffset:function(r,a,l,c){for(var h=1/0,u=1/0,x=t(r,a,l,c),d=0;d<x.length;d++){var m=x[d];h=Math.min(h,m[0]),u=Math.min(u,-m[1])}return[h,u]},findEnclosingVertexAngles:function(r,a){var l=o(a,function(h){var u=b(h,r);return u>0?u:1/0}),c=A.mod(l+1,a.length);return[a[l],a[c]]},findIntersectionXY:s,findXYatLength:function(r,a,l,c){var h=-a*l,u=a*a+1,x=2*(a*h-l),d=h*h+l*l-r*r,m=Math.sqrt(x*x-4*u*d),g=(-x+m)/(2*u),y=(-x-m)/(2*u);return[[g,a*g+h+c],[y,a*y+h+c]]},clampTiny:i,pathPolygon:function(r,a,l,c,h,u){return"M"+n(t(r,a,l,c),h,u).join("L")},pathPolygonAnnulus:function(r,a,l,c,h,u,x){var d,m;r<a?(d=r,m=a):(d=a,m=r);var g=n(t(d,l,c,h),u,x);return"M"+n(t(m,l,c,h),u,x).reverse().join("L")+"M"+g.join("L")}}},40872:function(X,I,e){"use strict";var A=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(39360),b=T.attr,p=T.name,s=k(p),t={};t[b]={valType:"subplotid",dflt:p,editType:"calc"},X.exports={attr:b,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,a=n._subplots[p],l=0;l<a.length;l++){var c=a[l],h=A(r,p,c),u=n[c]._subplot;u||(u=o(i,c),n[c]._subplot=u),u.plot(h,n,i._promises)}},clean:function(i,n,r,a){for(var l=a._subplots[p]||[],c=a._has&&a._has("gl"),h=n._has&&n._has("gl"),u=c&&!h,x=0;x<l.length;x++){var d=l[x],m=a[d]._subplot;if(!n[d]&&m)for(var g in m.framework.remove(),m.layers["radial-axis-title"].remove(),m.clipPaths)m.clipPaths[g].remove();u&&m._scene&&(m._scene.destroy(),m._scene=null)}},toSVG:e(57952).toSVG}},95300:function(X,I,e){"use strict";var A=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,p=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,p,s);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,p,s),X.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:A.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(31780),T=e(168),b=e(84888).op,p=e(26332),s=e(25404),t=e(95936),i=e(42568),n=e(22416),r=e(42136),a=e(76808),l=e(52976),c=e(95300),h=e(57696),u=e(39360),x=u.axisNames;function d(g,y,v,_){var f=v("bgcolor");_.bgColor=k.combine(f,_.paper_bgcolor);var S=v("sector");v("hole");var w,E=b(_.fullData,u.name,_.id),P=_.layoutOut;function C(ge,ke){return v(w+"."+ge,ke)}for(var O=0;O<x.length;O++){w=x[O],A.isPlainObject(g[w])||(g[w]={});var R=g[w],U=o.newContainer(y,w);U._id=U._name=w,U._attr=_.id+"."+w,U._traceIndices=E.map(function(ge){return ge._expandedIndex});var D=u.axisName2dataArray[w],N=m(R,U,C,E,D,_);n(R,U,C,{axData:E,dataAttr:D});var W=C("visible");switch(h(U,y,P),C("uirevision",y.uirevision),U._m=1,w){case"radialaxis":C("minallowed"),C("maxallowed");var F,j=C("range"),q=U.getAutorangeDflt(j),te=C("autorange",q);!j||(j[0]!==null||j[1]!==null)&&(j[0]!==null&&j[1]!==null||te!=="reversed"&&te!==!0)&&(j[0]===null||te!=="min"&&te!=="max reversed")&&(j[1]===null||te!=="max"&&te!=="min reversed")||(j=void 0,delete U.range,U.autorange=!0,F=!0),F||(te=C("autorange",q=U.getAutorangeDflt(j))),R.autorange=te,te&&(a(C,te,j),N!=="linear"&&N!=="-"||C("rangemode"),U.isReversed()&&(U._m=-1)),U.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(N==="date"){A.log("Polar plots do not support date angular axes yet.");for(var ee=0;ee<E.length;ee++)E[ee].visible=!1;N=R.type=U.type="linear"}C(N==="linear"?"thetaunit":"period");var Q=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[Q])}if(i(R,U,C,U.type,{tickSuffixDflt:U.thetaunit==="degrees"?"\xB0":void 0}),W){var J,K,Y,ie,se,ae,ue,ve,ye,de,pe=_.font||{};K=(J=C("color"))===R.color?J:pe.color,Y=pe.size,ie=pe.family,se=pe.weight,ae=pe.style,ue=pe.variant,ve=pe.textcase,ye=pe.lineposition,de=pe.shadow,p(R,U,C,U.type),t(R,U,C,U.type,{font:{weight:se,style:ae,variant:ue,textcase:ve,lineposition:ye,shadow:de,color:K,size:Y,family:ie},noAutotickangles:w==="angularaxis"}),s(R,U,C,{outerTicks:!0}),r(R,U,C,{dfltColor:J,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[w]}),C("layer"),w==="radialaxis"&&(C("side"),C("angle",S[0]),C("title.text"),A.coerceFont(C,"title.font",{weight:se,style:ae,variant:ue,textcase:ve,lineposition:ye,shadow:de,color:K,size:A.bigFont(Y),family:ie}))}N!=="category"&&C("hoverformat"),U._input=R}y.angularaxis.type==="category"&&v("gridshape")}function m(g,y,v,_,f,S){var w=v("autotypenumbers",S.autotypenumbersDflt);if(v("type")==="-"){for(var E,P=0;P<_.length;P++)if(_[P].visible){E=_[P];break}E&&E[f]&&(y.type=l(E[f],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),y.type==="-"?y.type="linear":g.type=y.type}return y.type}X.exports=function(g,y,v){T(g,y,v,{type:u.name,attributes:c,handleDefaults:d,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:v,layoutOut:y})}},62400:function(X,I,e){"use strict";var A=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strRotate,p=T.strTranslate,s=e(76308),t=e(43616),i=e(7316),n=e(54460),r=e(78344),a=e(57696),l=e(19280).doAutoRange,c=e(51184),h=e(86476),u=e(93024),x=e(81668),d=e(22676).prepSelect,m=e(22676).selectOnClick,g=e(22676).clearOutline,y=e(93972),v=e(73696),_=e(39172).redrawReglTraces,f=e(84284).MID_SHIFT,S=e(39360),w=e(57384),E=e(36416),P=E.smith,C=E.reactanceArc,O=E.resistanceArc,R=E.smithTransform,U=T._,D=T.mod,N=T.deg2rad,W=T.rad2deg;function F(Q,J,K){this.isSmith=K||!1,this.id=J,this.gd=Q,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Y=Q._fullLayout,ie="clip"+Y._uid+J;this.clipIds.forTraces=ie+"-for-traces",this.clipPaths.forTraces=Y._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Y["_"+(K?"smith":"polar")+"layer"].append("g").attr("class",J),this.getHole=function(se){return this.isSmith?0:se.hole},this.getSector=function(se){return this.isSmith?[0,360]:se.sector},this.getRadial=function(se){return this.isSmith?se.realaxis:se.radialaxis},this.getAngular=function(se){return this.isSmith?se.imaginaryaxis:se.angularaxis},K||(this.radialTickLayout=null,this.angularTickLayout=null)}var j=F.prototype;function q(Q){var J=Q.ticks+String(Q.ticklen)+String(Q.showticklabels);return"side"in Q&&(J+=Q.side),J}function te(Q,J){return J[T.findIndexOfMin(J,function(K){return T.angleDist(Q,K)})]}function ee(Q,J,K){return J?(Q.attr("display",null),Q.attr(K)):Q&&Q.attr("display","none"),Q}X.exports=function(Q,J,K){return new F(Q,J,K)},j.plot=function(Q,J){for(var K=this,Y=J[K.id],ie=!1,se=0;se<Q.length;se++)if(Q[se][0].trace.cliponaxis===!1){ie=!0;break}K._hasClipOnAxisFalse=ie,K.updateLayers(J,Y),K.updateLayout(J,Y),i.generalUpdatePerTraceModule(K.gd,K,Q,Y),K.updateFx(J,Y),K.isSmith&&(delete Y.realaxis.range,delete Y.imaginaryaxis.range)},j.updateLayers=function(Q,J){var K=this,Y=K.isSmith,ie=K.layers,se=K.getRadial(J),ae=K.getAngular(J),ue=S.layerNames,ve=ue.indexOf("frontplot"),ye=ue.slice(0,ve),de=ae.layer==="below traces",pe=se.layer==="below traces";de&&ye.push("angular-line"),pe&&ye.push("radial-line"),de&&ye.push("angular-axis"),pe&&ye.push("radial-axis"),ye.push("frontplot"),de||ye.push("angular-line"),pe||ye.push("radial-line"),de||ye.push("angular-axis"),pe||ye.push("radial-axis");var ge=(Y?"smith":"polar")+"sublayer",ke=K.framework.selectAll("."+ge).data(ye,String);ke.enter().append("g").attr("class",function(Ee){return ge+" "+Ee}).each(function(Ee){var me=ie[Ee]=A.select(this);switch(Ee){case"frontplot":Y||me.append("g").classed("barlayer",!0),me.append("g").classed("scatterlayer",!0);break;case"backplot":me.append("g").classed("maplayer",!0);break;case"plotbg":ie.bg=me.append("path");break;case"radial-grid":case"angular-grid":me.style("fill","none");break;case"radial-line":me.append("line").style("fill","none");break;case"angular-line":me.append("path").style("fill","none")}}),ke.order()},j.updateLayout=function(Q,J){var K=this,Y=K.layers,ie=Q._size,se=K.getRadial(J),ae=K.getAngular(J),ue=J.domain.x,ve=J.domain.y;K.xOffset=ie.l+ie.w*ue[0],K.yOffset=ie.t+ie.h*(1-ve[1]);var ye=K.xLength=ie.w*(ue[1]-ue[0]),de=K.yLength=ie.h*(ve[1]-ve[0]),pe=K.getSector(J);K.sectorInRad=pe.map(N);var ge,ke,Ee,me,oe,re=K.sectorBBox=function(rt){var it,dt=rt[0],mt=rt[1]-dt,ht=D(dt,360),Qe=ht+mt,Je=Math.cos(N(ht)),wt=Math.sin(N(ht)),Pt=Math.cos(N(Qe)),It=Math.sin(N(Qe));return it=ht<=90&&Qe>=90||ht>90&&Qe>=450?1:wt<=0&&It<=0?0:Math.max(wt,It),[ht<=180&&Qe>=180||ht>180&&Qe>=540?-1:Je>=0&&Pt>=0?0:Math.min(Je,Pt),ht<=270&&Qe>=270||ht>270&&Qe>=630?-1:wt>=0&&It>=0?0:Math.min(wt,It),Qe>=360?1:Je<=0&&Pt<=0?0:Math.max(Je,Pt),it]}(pe),fe=re[2]-re[0],Se=re[3]-re[1],be=de/ye,we=Math.abs(Se/fe);be>we?(ge=ye,oe=(de-(ke=ye*we))/ie.h/2,Ee=[ue[0],ue[1]],me=[ve[0]+oe,ve[1]-oe]):(ke=de,oe=(ye-(ge=de/we))/ie.w/2,Ee=[ue[0]+oe,ue[1]-oe],me=[ve[0],ve[1]]),K.xLength2=ge,K.yLength2=ke,K.xDomain2=Ee,K.yDomain2=me;var Me,Ie=K.xOffset2=ie.l+ie.w*Ee[0],Oe=K.yOffset2=ie.t+ie.h*(1-me[1]),he=K.radius=ge/fe,_e=K.innerRadius=K.getHole(J)*he,Ae=K.cx=Ie-he*re[0],De=K.cy=Oe+he*re[3],Le=K.cxx=Ae-Ie,Be=K.cyy=De-Oe,Ve=se.side;Ve==="counterclockwise"?(Me=Ve,Ve="top"):Ve==="clockwise"&&(Me=Ve,Ve="bottom"),K.radialAxis=K.mockAxis(Q,J,se,{_id:"x",side:Ve,_trueSide:Me,domain:[_e/ie.w,he/ie.w]}),K.angularAxis=K.mockAxis(Q,J,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),K.doAutoRange(Q,J),K.updateAngularAxis(Q,J),K.updateRadialAxis(Q,J),K.updateRadialAxisTitle(Q,J),K.xaxis=K.mockCartesianAxis(Q,J,{_id:"x",domain:Ee}),K.yaxis=K.mockCartesianAxis(Q,J,{_id:"y",domain:me});var Ze=K.pathSubplot();K.clipPaths.forTraces.select("path").attr("d",Ze).attr("transform",p(Le,Be)),Y.frontplot.attr("transform",p(Ie,Oe)).call(t.setClipUrl,K._hasClipOnAxisFalse?null:K.clipIds.forTraces,K.gd),Y.bg.attr("d",Ze).attr("transform",p(Ae,De)).call(s.fill,J.bgcolor)},j.mockAxis=function(Q,J,K,Y){var ie=T.extendFlat({},K,Y);return a(ie,J,Q),ie},j.mockCartesianAxis=function(Q,J,K){var Y=this,ie=Y.isSmith,se=K._id,ae=T.extendFlat({type:"linear"},K);r(ae,Q);var ue={x:[0,2],y:[1,3]};return ae.setRange=function(){var ve=Y.sectorBBox,ye=ue[se],de=Y.radialAxis._rl,pe=(de[1]-de[0])/(1-Y.getHole(J));ae.range=[ve[ye[0]]*pe,ve[ye[1]]*pe]},ae.isPtWithinRange=se!=="x"||ie?function(){return!0}:function(ve){return Y.isPtInside(ve)},ae.setRange(),ae.setScale(),ae},j.doAutoRange=function(Q,J){var K=this,Y=K.gd,ie=K.radialAxis,se=K.getRadial(J);l(Y,ie);var ae=ie.range;if(se.range=ae.slice(),se._input.range=ae.slice(),ie._rl=[ie.r2l(ae[0],null,"gregorian"),ie.r2l(ae[1],null,"gregorian")],ie.minallowed!==void 0){var ue=ie.r2l(ie.minallowed);ie._rl[0]>ie._rl[1]?ie._rl[1]=Math.max(ie._rl[1],ue):ie._rl[0]=Math.max(ie._rl[0],ue)}if(ie.maxallowed!==void 0){var ve=ie.r2l(ie.maxallowed);ie._rl[0]<ie._rl[1]?ie._rl[1]=Math.min(ie._rl[1],ve):ie._rl[0]=Math.min(ie._rl[0],ve)}},j.updateRadialAxis=function(Q,J){var K=this,Y=K.gd,ie=K.layers,se=K.radius,ae=K.innerRadius,ue=K.cx,ve=K.cy,ye=K.getRadial(J),de=D(K.getSector(J)[0],360),pe=K.radialAxis,ge=ae<se,ke=K.isSmith;ke||(K.fillViewInitialKey("radialaxis.angle",ye.angle),K.fillViewInitialKey("radialaxis.range",pe.range.slice()),pe.setGeometry()),pe.tickangle==="auto"&&de>90&&de<=270&&(pe.tickangle=180);var Ee=ke?function(Oe){var he=R(K,P([Oe.x,0]));return p(he[0]-ue,he[1]-ve)}:function(Oe){return p(pe.l2p(Oe.x)+ae,0)},me=ke?function(Oe){return O(K,Oe.x,-1/0,1/0)}:function(Oe){return K.pathArc(pe.r2p(Oe.x)+ae)},oe=q(ye);if(K.radialTickLayout!==oe&&(ie["radial-axis"].selectAll(".xtick").remove(),K.radialTickLayout=oe),ge){pe.setScale();var re=0,fe=ke?(pe.tickvals||[]).filter(function(Oe){return Oe>=0}).map(function(Oe){return n.tickText(pe,Oe,!0,!1)}):n.calcTicks(pe),Se=ke?fe:n.clipEnds(pe,fe),be=n.getTickSigns(pe)[2];ke&&((pe.ticks==="top"&&pe.side==="bottom"||pe.ticks==="bottom"&&pe.side==="top")&&(be=-be),pe.ticks==="top"&&pe.side==="top"&&(re=-pe.ticklen),pe.ticks==="bottom"&&pe.side==="bottom"&&(re=pe.ticklen)),n.drawTicks(Y,pe,{vals:fe,layer:ie["radial-axis"],path:n.makeTickPath(pe,0,be),transFn:Ee,crisp:!1}),n.drawGrid(Y,pe,{vals:Se,layer:ie["radial-grid"],path:me,transFn:T.noop,crisp:!1}),n.drawLabels(Y,pe,{vals:fe,layer:ie["radial-axis"],transFn:Ee,labelFns:n.makeLabelFns(pe,re)})}var we=K.radialAxisAngle=K.vangles?W(te(N(ye.angle),K.vangles)):ye.angle,Me=p(ue,ve),Ie=Me+b(-we);ee(ie["radial-axis"],ge&&(ye.showticklabels||ye.ticks),{transform:Ie}),ee(ie["radial-grid"],ge&&ye.showgrid,{transform:ke?"":Me}),ee(ie["radial-line"].select("line"),ge&&ye.showline,{x1:ke?-se:ae,y1:0,x2:se,y2:0,transform:Ie}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},j.updateRadialAxisTitle=function(Q,J,K){if(!this.isSmith){var Y=this,ie=Y.gd,se=Y.radius,ae=Y.cx,ue=Y.cy,ve=Y.getRadial(J),ye=Y.id+"title",de=0;if(ve.title){var pe=t.bBox(Y.layers["radial-axis"].node()).height,ge=ve.title.font.size,ke=ve.side;de=ke==="top"?ge:ke==="counterclockwise"?-(pe+.4*ge):pe+.8*ge}var Ee=K!==void 0?K:Y.radialAxisAngle,me=N(Ee),oe=Math.cos(me),re=Math.sin(me),fe=ae+se/2*oe+de*re,Se=ue-se/2*re+de*oe;Y.layers["radial-axis-title"]=x.draw(ie,ye,{propContainer:ve,propName:Y.id+".radialaxis.title",placeholder:U(ie,"Click to enter radial axis title"),attributes:{x:fe,y:Se,"text-anchor":"middle"},transform:{rotate:-Ee}})}},j.updateAngularAxis=function(Q,J){var K=this,Y=K.gd,ie=K.layers,se=K.radius,ae=K.innerRadius,ue=K.cx,ve=K.cy,ye=K.getAngular(J),de=K.angularAxis,pe=K.isSmith;pe||(K.fillViewInitialKey("angularaxis.rotation",ye.rotation),de.setGeometry(),de.setScale());var ge=pe?function(Oe){var he=R(K,P([0,Oe.x]));return Math.atan2(he[0]-ue,he[1]-ve)-Math.PI/2}:function(Oe){return de.t2g(Oe.x)};de.type==="linear"&&de.thetaunit==="radians"&&(de.tick0=W(de.tick0),de.dtick=W(de.dtick));var ke=function(Oe){return p(ue+se*Math.cos(Oe),ve-se*Math.sin(Oe))},Ee=pe?function(Oe){var he=R(K,P([0,Oe.x]));return p(he[0],he[1])}:function(Oe){return ke(ge(Oe))},me=pe?function(Oe){var he=R(K,P([0,Oe.x])),_e=Math.atan2(he[0]-ue,he[1]-ve)-Math.PI/2;return p(he[0],he[1])+b(-W(_e))}:function(Oe){var he=ge(Oe);return ke(he)+b(-W(he))},oe=pe?function(Oe){return C(K,Oe.x,0,1/0)}:function(Oe){var he=ge(Oe),_e=Math.cos(he),Ae=Math.sin(he);return"M"+[ue+ae*_e,ve-ae*Ae]+"L"+[ue+se*_e,ve-se*Ae]},re=n.makeLabelFns(de,0).labelStandoff,fe={xFn:function(Oe){var he=ge(Oe);return Math.cos(he)*re},yFn:function(Oe){var he=ge(Oe),_e=Math.sin(he)>0?.2:1;return-Math.sin(he)*(re+Oe.fontSize*_e)+Math.abs(Math.cos(he))*(Oe.fontSize*f)},anchorFn:function(Oe){var he=ge(Oe),_e=Math.cos(he);return Math.abs(_e)<.1?"middle":_e>0?"start":"end"},heightFn:function(Oe,he,_e){var Ae=ge(Oe);return-.5*(1+Math.sin(Ae))*_e}},Se=q(ye);K.angularTickLayout!==Se&&(ie["angular-axis"].selectAll("."+de._id+"tick").remove(),K.angularTickLayout=Se);var be,we=pe?[1/0].concat(de.tickvals||[]).map(function(Oe){return n.tickText(de,Oe,!0,!1)}):n.calcTicks(de);if(pe&&(we[0].text="\u221E",we[0].fontSize*=1.75),J.gridshape==="linear"?(be=we.map(ge),T.angleDelta(be[0],be[1])<0&&(be=be.slice().reverse())):be=null,K.vangles=be,de.type==="category"&&(we=we.filter(function(Oe){return T.isAngleInsideSector(ge(Oe),K.sectorInRad)})),de.visible){var Me=de.ticks==="inside"?-1:1,Ie=(de.linewidth||1)/2;n.drawTicks(Y,de,{vals:we,layer:ie["angular-axis"],path:"M"+Me*Ie+",0h"+Me*de.ticklen,transFn:me,crisp:!1}),n.drawGrid(Y,de,{vals:we,layer:ie["angular-grid"],path:oe,transFn:T.noop,crisp:!1}),n.drawLabels(Y,de,{vals:we,layer:ie["angular-axis"],repositionOnUpdate:!0,transFn:Ee,labelFns:fe})}ee(ie["angular-line"].select("path"),ye.showline,{d:K.pathSubplot(),transform:p(ue,ve)}).attr("stroke-width",ye.linewidth).call(s.stroke,ye.linecolor)},j.updateFx=function(Q,J){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(Q),this.updateRadialDrag(Q,J,0),this.updateRadialDrag(Q,J,1)),this.updateHoverAndMainDrag(Q))},j.updateHoverAndMainDrag=function(Q){var J,K,Y=this,ie=Y.isSmith,se=Y.gd,ae=Y.layers,ue=Q._zoomlayer,ve=S.MINZOOM,ye=S.OFFEDGE,de=Y.radius,pe=Y.innerRadius,ge=Y.cx,ke=Y.cy,Ee=Y.cxx,me=Y.cyy,oe=Y.sectorInRad,re=Y.vangles,fe=Y.radialAxis,Se=w.clampTiny,be=w.findXYatLength,we=w.findEnclosingVertexAngles,Me=S.cornerHalfWidth,Ie=S.cornerLen/2,Oe=c.makeDragger(ae,"path","maindrag",Q.dragmode===!1?"none":"crosshair");A.select(Oe).attr("d",Y.pathSubplot()).attr("transform",p(ge,ke)),Oe.onmousemove=function(tt){u.hover(se,tt,Y.id),se._fullLayout._lasthover=Oe,se._fullLayout._hoversubplot=Y.id},Oe.onmouseout=function(tt){se._dragging||h.unhover(se,tt)};var he,_e,Ae,De,Le,Be,Ve,Ze,rt,it={element:Oe,gd:se,subplot:Y.id,plotinfo:{id:Y.id,xaxis:Y.xaxis,yaxis:Y.yaxis},xaxes:[Y.xaxis],yaxes:[Y.yaxis]};function dt(tt,Re){return Math.sqrt(tt*tt+Re*Re)}function mt(tt,Re){return dt(tt-Ee,Re-me)}function ht(tt,Re){return Math.atan2(me-Re,tt-Ee)}function Qe(tt,Re){return[tt*Math.cos(Re),tt*Math.sin(-Re)]}function Je(tt,Re){if(tt===0)return Y.pathSector(2*Me);var Fe=Ie/tt,nt=Re-Fe,Ge=Re+Fe,ut=Math.max(0,Math.min(tt,de)),pt=ut-Me,gt=ut+Me;return"M"+Qe(pt,nt)+"A"+[pt,pt]+" 0,0,0 "+Qe(pt,Ge)+"L"+Qe(gt,Ge)+"A"+[gt,gt]+" 0,0,1 "+Qe(gt,nt)+"Z"}function wt(tt,Re,Fe){if(tt===0)return Y.pathSector(2*Me);var nt,Ge,ut=Qe(tt,Re),pt=Qe(tt,Fe),gt=Se((ut[0]+pt[0])/2),ct=Se((ut[1]+pt[1])/2);if(gt&&ct){var Tt=ct/gt,vt=-1/Tt,kt=be(Me,Tt,gt,ct);nt=be(Ie,vt,kt[0][0],kt[0][1]),Ge=be(Ie,vt,kt[1][0],kt[1][1])}else{var Lt,Ct;ct?(Lt=Ie,Ct=Me):(Lt=Me,Ct=Ie),nt=[[gt-Lt,ct-Ct],[gt+Lt,ct-Ct]],Ge=[[gt-Lt,ct+Ct],[gt+Lt,ct+Ct]]}return"M"+nt.join("L")+"L"+Ge.reverse().join("L")+"Z"}function Pt(tt,Re){return Re=Math.max(Math.min(Re,de),pe),tt<ye?tt=0:de-tt<ye?tt=de:Re<ye?Re=0:de-Re<ye&&(Re=de),Math.abs(Re-tt)>ve?(tt<Re?(Ae=tt,De=Re):(Ae=Re,De=tt),!0):(Ae=null,De=null,!1)}function It(tt,Re){tt=tt||Le,Re=Re||"M0,0Z",Ze.attr("d",tt),rt.attr("d",Re),c.transitionZoombox(Ze,rt,Be,Ve),Be=!0;var Fe={};We(Fe),se.emit("plotly_relayouting",Fe)}function At(tt,Re){var Fe,nt,Ge=he+(tt*=J),ut=_e+(Re*=K),pt=mt(he,_e),gt=Math.min(mt(Ge,ut),de),ct=ht(he,_e);Pt(pt,gt)&&(Fe=Le+Y.pathSector(De),Ae&&(Fe+=Y.pathSector(Ae)),nt=Je(Ae,ct)+Je(De,ct)),It(Fe,nt)}function qe(tt,Re,Fe,nt){var Ge=w.findIntersectionXY(Fe,nt,Fe,[tt-Ee,me-Re]);return dt(Ge[0],Ge[1])}function Ye(tt,Re){var Fe,nt,Ge=he+tt,ut=_e+Re,pt=ht(he,_e),gt=ht(Ge,ut),ct=we(pt,re),Tt=we(gt,re);Pt(qe(he,_e,ct[0],ct[1]),Math.min(qe(Ge,ut,Tt[0],Tt[1]),de))&&(Fe=Le+Y.pathSector(De),Ae&&(Fe+=Y.pathSector(Ae)),nt=[wt(Ae,ct[0],ct[1]),wt(De,ct[0],ct[1])].join(" ")),It(Fe,nt)}function Ne(){if(c.removeZoombox(se),Ae!==null&&De!==null){var tt={};We(tt),c.showDoubleClickNotifier(se),o.call("_guiRelayout",se,tt)}}function We(tt){var Re=fe._rl,Fe=(Re[1]-Re[0])/(1-pe/de)/de,nt=[Re[0]+(Ae-pe)*Fe,Re[0]+(De-pe)*Fe];tt[Y.id+".radialaxis.range"]=nt}function at(tt,Re){var Fe=se._fullLayout.clickmode;if(c.removeZoombox(se),tt===2){var nt={};for(var Ge in Y.viewInitial)nt[Y.id+"."+Ge]=Y.viewInitial[Ge];se.emit("plotly_doubleclick",null),o.call("_guiRelayout",se,nt)}Fe.indexOf("select")>-1&&tt===1&&m(Re,se,[Y.xaxis],[Y.yaxis],Y.id,it),Fe.indexOf("event")>-1&&u.click(se,Re,Y.id)}it.prepFn=function(tt,Re,Fe){var nt=se._fullLayout.dragmode,Ge=Oe.getBoundingClientRect();se._fullLayout._calcInverseTransform(se);var ut=se._fullLayout._invTransform;J=se._fullLayout._invScaleX,K=se._fullLayout._invScaleY;var pt=T.apply3DTransform(ut)(Re-Ge.left,Fe-Ge.top);if(he=pt[0],_e=pt[1],re){var gt=w.findPolygonOffset(de,oe[0],oe[1],re);he+=Ee+gt[0],_e+=me+gt[1]}switch(nt){case"zoom":it.clickFn=at,ie||(it.moveFn=re?Ye:At,it.doneFn=Ne,function(){Ae=null,De=null,Le=Y.pathSubplot(),Be=!1;var ct=se._fullLayout[Y.id];Ve=k(ct.bgcolor).getLuminance(),(Ze=c.makeZoombox(ue,Ve,ge,ke,Le)).attr("fill-rule","evenodd"),rt=c.makeCorners(ue,ge,ke),g(se)}());break;case"select":case"lasso":d(tt,Re,Fe,it,nt)}},h.init(it)},j.updateRadialDrag=function(Q,J,K){var Y=this,ie=Y.gd,se=Y.layers,ae=Y.radius,ue=Y.innerRadius,ve=Y.cx,ye=Y.cy,de=Y.radialAxis,pe=S.radialDragBoxSize,ge=pe/2;if(de.visible){var ke,Ee,me,oe=N(Y.radialAxisAngle),re=de._rl,fe=re[0],Se=re[1],be=re[K],we=.75*(re[1]-re[0])/(1-Y.getHole(J))/ae;K?(ke=ve+(ae+ge)*Math.cos(oe),Ee=ye-(ae+ge)*Math.sin(oe),me="radialdrag"):(ke=ve+(ue-ge)*Math.cos(oe),Ee=ye-(ue-ge)*Math.sin(oe),me="radialdrag-inner");var Me,Ie,Oe,he=c.makeRectDragger(se,me,"crosshair",-ge,-ge,pe,pe),_e={element:he,gd:ie};Q.dragmode===!1&&(_e.dragmode=!1),ee(A.select(he),de.visible&&ue<ae,{transform:p(ke,Ee)}),_e.prepFn=function(){Me=null,Ie=null,Oe=null,_e.moveFn=Ae,_e.doneFn=De,g(ie)},_e.clampFn=function(Ve,Ze){return Math.sqrt(Ve*Ve+Ze*Ze)<S.MINDRAG&&(Ve=0,Ze=0),[Ve,Ze]},h.init(_e)}function Ae(Ve,Ze){if(Me)Me(Ve,Ze);else{var rt=[Ve,-Ze],it=[Math.cos(oe),Math.sin(oe)],dt=Math.abs(T.dot(rt,it)/Math.sqrt(T.dot(rt,rt)));isNaN(dt)||(Me=dt<.5?Le:Be)}var mt={};(function(ht){Ie!==null?ht[Y.id+".radialaxis.angle"]=Ie:Oe!==null&&(ht[Y.id+".radialaxis.range["+K+"]"]=Oe)})(mt),ie.emit("plotly_relayouting",mt)}function De(){Ie!==null?o.call("_guiRelayout",ie,Y.id+".radialaxis.angle",Ie):Oe!==null&&o.call("_guiRelayout",ie,Y.id+".radialaxis.range["+K+"]",Oe)}function Le(Ve,Ze){if(K!==0){var rt=ke+Ve,it=Ee+Ze;Ie=Math.atan2(ye-it,rt-ve),Y.vangles&&(Ie=te(Ie,Y.vangles)),Ie=W(Ie);var dt=p(ve,ye)+b(-Ie);se["radial-axis"].attr("transform",dt),se["radial-line"].select("line").attr("transform",dt);var mt=Y.gd._fullLayout,ht=mt[Y.id];Y.updateRadialAxisTitle(mt,ht,Ie)}}function Be(Ve,Ze){var rt=T.dot([Ve,-Ze],[Math.cos(oe),Math.sin(oe)]);if(Oe=be-we*rt,we>0==(K?Oe>fe:Oe<Se)){var it=ie._fullLayout,dt=it[Y.id];de.range[K]=Oe,de._rl[K]=Oe,Y.updateRadialAxis(it,dt),Y.xaxis.setRange(),Y.xaxis.setScale(),Y.yaxis.setRange(),Y.yaxis.setScale();var mt=!1;for(var ht in Y.traceHash){var Qe=Y.traceHash[ht],Je=T.filterVisible(Qe);Qe[0][0].trace._module.plot(ie,Y,Je,dt),o.traceIs(ht,"gl")&&Je.length&&(mt=!0)}mt&&(v(ie),_(ie))}else Oe=null}},j.updateAngularDrag=function(Q){var J=this,K=J.gd,Y=J.layers,ie=J.radius,se=J.angularAxis,ae=J.cx,ue=J.cy,ve=J.cxx,ye=J.cyy,de=S.angularDragBoxSize,pe=c.makeDragger(Y,"path","angulardrag",Q.dragmode===!1?"none":"move"),ge={element:pe,gd:K};function ke(_e,Ae){return Math.atan2(ye+de-Ae,_e-ve-de)}Q.dragmode===!1?ge.dragmode=!1:A.select(pe).attr("d",J.pathAnnulus(ie,ie+de)).attr("transform",p(ae,ue)).call(y,"move");var Ee,me,oe,re,fe,Se,be=Y.frontplot.select(".scatterlayer").selectAll(".trace"),we=be.selectAll(".point"),Me=be.selectAll(".textpoint");function Ie(_e,Ae){var De=J.gd._fullLayout,Le=De[J.id],Be=ke(Ee+_e*Q._invScaleX,me+Ae*Q._invScaleY),Ve=W(Be-Se);if(re=oe+Ve,Y.frontplot.attr("transform",p(J.xOffset2,J.yOffset2)+b([-Ve,ve,ye])),J.vangles){fe=J.radialAxisAngle+Ve;var Ze=p(ae,ue)+b(-Ve),rt=p(ae,ue)+b(-fe);Y.bg.attr("transform",Ze),Y["radial-grid"].attr("transform",Ze),Y["radial-axis"].attr("transform",rt),Y["radial-line"].select("line").attr("transform",rt),J.updateRadialAxisTitle(De,Le,fe)}else J.clipPaths.forTraces.select("path").attr("transform",p(ve,ye)+b(Ve));we.each(function(){var Je=A.select(this),wt=t.getTranslate(Je);Je.attr("transform",p(wt.x,wt.y)+b([Ve]))}),Me.each(function(){var Je=A.select(this),wt=Je.select("text"),Pt=t.getTranslate(Je);Je.attr("transform",b([Ve,wt.attr("x"),wt.attr("y")])+p(Pt.x,Pt.y))}),se.rotation=T.modHalf(re,360),J.updateAngularAxis(De,Le),J._hasClipOnAxisFalse&&!T.isFullCircle(J.sectorInRad)&&be.call(t.hideOutsideRangePoints,J);var it=!1;for(var dt in J.traceHash)if(o.traceIs(dt,"gl")){var mt=J.traceHash[dt],ht=T.filterVisible(mt);mt[0][0].trace._module.plot(K,J,ht,Le),ht.length&&(it=!0)}it&&(v(K),_(K));var Qe={};Oe(Qe),K.emit("plotly_relayouting",Qe)}function Oe(_e){_e[J.id+".angularaxis.rotation"]=re,J.vangles&&(_e[J.id+".radialaxis.angle"]=fe)}function he(){Me.select("text").attr("transform",null);var _e={};Oe(_e),o.call("_guiRelayout",K,_e)}ge.prepFn=function(_e,Ae,De){var Le=Q[J.id];oe=Le.angularaxis.rotation;var Be=pe.getBoundingClientRect();Ee=Ae-Be.left,me=De-Be.top,K._fullLayout._calcInverseTransform(K);var Ve=T.apply3DTransform(Q._invTransform)(Ee,me);Ee=Ve[0],me=Ve[1],Se=ke(Ee,me),ge.moveFn=Ie,ge.doneFn=he,g(K)},J.vangles&&!T.isFullCircle(J.sectorInRad)&&(ge.prepFn=T.noop,y(A.select(pe),null)),h.init(ge)},j.isPtInside=function(Q){if(this.isSmith)return!0;var J=this.sectorInRad,K=this.vangles,Y=this.angularAxis.c2g(Q.theta),ie=this.radialAxis,se=ie.c2l(Q.r),ae=ie._rl;return(K?w.isPtInsidePolygon:T.isPtInsideSector)(se,Y,ae,J,K)},j.pathArc=function(Q){var J=this.sectorInRad,K=this.vangles;return(K?w.pathPolygon:T.pathArc)(Q,J[0],J[1],K)},j.pathSector=function(Q){var J=this.sectorInRad,K=this.vangles;return(K?w.pathPolygon:T.pathSector)(Q,J[0],J[1],K)},j.pathAnnulus=function(Q,J){var K=this.sectorInRad,Y=this.vangles;return(Y?w.pathPolygonAnnulus:T.pathAnnulus)(Q,J,K[0],K[1],Y)},j.pathSubplot=function(){var Q=this.innerRadius,J=this.radius;return Q?this.pathAnnulus(Q,J):this.pathSector(J)},j.fillViewInitialKey=function(Q,J){Q in this.viewInitial||(this.viewInitial[Q]=J)}},57696:function(X,I,e){"use strict";var A=e(3400),k=e(78344),o=A.deg2rad,T=A.rad2deg;X.exports=function(b,p,s){switch(k(b,s),b._id){case"x":case"radialaxis":(function(t,i){var n=i._subplot;t.setGeometry=function(){var r=t._rl[0],a=t._rl[1],l=n.innerRadius,c=(n.radius-l)/(a-r),h=l/c,u=r>a?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var d=t.c2l(x)-r;return(u(d)?d:0)+h},t.g2c=function(x){return t.l2c(x+r-h)},t.g2p=function(x){return x*c},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(b,p);break;case"angularaxis":(function(t,i){var n=t.type;if(n==="linear"){var r=t.d2c,a=t.c2d;t.d2c=function(l,c){return function(h,u){return u==="degrees"?o(h):h}(r(l),c)},t.c2d=function(l,c){return a(function(h,u){return u==="degrees"?T(h):h}(l,c))}}t.makeCalcdata=function(l,c){var h,u,x=l[c],d=l._length,m=function(f){return t.d2c(f,l.thetaunit)};if(x)for(h=new Array(d),u=0;u<d;u++)h[u]=m(x[u]);else{var g=c+"0",y="d"+c,v=g in l?m(l[g]):0,_=l[y]?m(l[y]):(t.period||2*Math.PI)/d;for(h=new Array(d),u=0;u<d;u++)h[u]=v+u*_}return h},t.setGeometry=function(){var l,c,h,u,x=i.sector,d=x.map(o),m={clockwise:-1,counterclockwise:1}[t.direction],g=o(t.rotation),y=function(S){return m*S+g},v=function(S){return(S-g)/m};switch(n){case"linear":c=l=A.identity,u=o,h=T,t.range=A.isFullCircle(d)?[x[0],x[0]+360]:d.map(v).map(T);break;case"category":var _=t._categories.length,f=t.period?Math.max(t.period,_):_;f===0&&(f=1),c=u=function(S){return 2*S*Math.PI/f},l=h=function(S){return S*f/Math.PI/2},t.range=[0,f]}t.c2g=function(S){return y(c(S))},t.g2c=function(S){return l(v(S))},t.t2g=function(S){return y(u(S))},t.g2t=function(S){return h(v(S))}}})(b,p)}}},55012:function(X){"use strict";X.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(X){"use strict";function I(o){return o<0?-1:o>0?1:0}function e(o){var T=o[0],b=o[1];if(!isFinite(T)||!isFinite(b))return[1,0];var p=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/p,2*b/p]}function A(o,T){var b=T[0],p=T[1];return[b*o.radius+o.cx,-p*o.radius+o.cy]}function k(o,T){return T*o.radius}X.exports={smith:e,reactanceArc:function(o,T,b,p){var s=A(o,e([b,T])),t=s[0],i=s[1],n=A(o,e([p,T])),r=n[0],a=n[1];if(T===0)return["M"+t+","+i,"L"+r+","+a].join(" ");var l=k(o,1/Math.abs(T));return["M"+t+","+i,"A"+l+","+l+" 0 0,"+(T<0?1:0)+" "+r+","+a].join(" ")},resistanceArc:function(o,T,b,p){var s=k(o,1/(T+1)),t=A(o,e([T,b])),i=t[0],n=t[1],r=A(o,e([T,p])),a=r[0],l=r[1];if(I(b)!==I(p)){var c=A(o,e([T,0]));return["M"+i+","+n,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+c[0]+","+c[1],"A"+s+","+s+" 0 0,"+(p<0?0:1)+a+","+l].join(" ")}return["M"+i+","+n,"A"+s+","+s+" 0 0,"+(p<b?0:1)+" "+a+","+l].join(" ")},smithTransform:A}},47788:function(X,I,e){"use strict";var A=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(55012),b=T.attr,p=T.name,s=k(p),t={};t[b]={valType:"subplotid",dflt:p,editType:"calc"},X.exports={attr:b,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,a=n._subplots[p],l=0;l<a.length;l++){var c=a[l],h=A(r,p,c),u=n[c]._subplot;u||(u=o(i,c,!0),n[c]._subplot=u),u.plot(h,n,i._promises)}},clean:function(i,n,r,a){for(var l=a._subplots[p]||[],c=0;c<l.length;c++){var h=l[c],u=a[h]._subplot;if(!n[h]&&u)for(var x in u.framework.remove(),u.clipPaths)u.clipPaths[x].remove()}},toSVG:e(57952).toSVG}},6183:function(X,I,e){"use strict";var A=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,p=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},p,s),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},p,s);X.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:A.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(X,I,e){"use strict";var A,k,o,T=e(3400),b=e(76308),p=e(31780),s=e(168),t=e(84888).op,i=e(42568),n=e(95936),r=e(42136),a=e(78344),l=e(6183),c=e(55012),h=c.axisNames,u=(A=function(d){return T.isTypedArray(d)&&(d=Array.from(d)),d.slice().reverse().map(function(m){return-m}).concat([0]).concat(d)},k=String,o={},function(d){var m=k?k(d):d;if(m in o)return o[m];var g=A(d);return o[m]=g,g});function x(d,m,g,y){var v=g("bgcolor");y.bgColor=b.combine(v,y.paper_bgcolor);var _,f=t(y.fullData,c.name,y.id),S=y.layoutOut;function w(j,q){return g(_+"."+j,q)}for(var E=0;E<h.length;E++){_=h[E],T.isPlainObject(d[_])||(d[_]={});var P=d[_],C=p.newContainer(m,_);C._id=C._name=_,C._attr=y.id+"."+_,C._traceIndices=f.map(function(j){return j._expandedIndex});var O=w("visible");if(C.type="linear",a(C,S),i(P,C,w,C.type),O){var R,U,D,N,W=_==="realaxis";W&&w("side"),W?w("tickvals"):w("tickvals",u(m.realaxis.tickvals||l.realaxis.tickvals.dflt)),T.isTypedArray(C.tickvals)&&(C.tickvals=Array.from(C.tickvals));var F=y.font||{};O&&(U=(R=w("color"))===P.color?R:F.color,D=F.size,N=F.family),n(P,C,w,C.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!W,noExp:!0,font:{color:U,size:D,family:N}}),T.coerce2(d,m,l,_+".ticklen"),T.coerce2(d,m,l,_+".tickwidth"),T.coerce2(d,m,l,_+".tickcolor",m.color),w("ticks")||(delete m[_].ticklen,delete m[_].tickwidth,delete m[_].tickcolor),r(P,C,w,{dfltColor:R,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[_]}),w("layer")}w("hoverformat"),delete C.type,C._input=P}}X.exports=function(d,m,g){s(d,m,g,{noUirevision:!0,type:c.name,attributes:l,handleDefaults:x,font:m.font,paper_bgcolor:m.paper_bgcolor,fullData:g,layoutOut:m})}},168:function(X,I,e){"use strict";var A=e(3400),k=e(31780),o=e(86968).Q;X.exports=function(T,b,p,s){var t,i,n=s.type,r=s.attributes,a=s.handleDefaults,l=s.partition||"x",c=b._subplots[n],h=c.length,u=h&&c[0].replace(/\d+$/,"");function x(y,v){return A.coerce(t,i,r,y,v)}for(var d=0;d<h;d++){var m=c[d];t=T[m]?T[m]:T[m]={},i=k.newContainer(b,m,u),s.noUirevision||x("uirevision",b.uirevision);var g={};g[l]=[d/h,(d+1)/h],o(i,b,x,g),s.id=m,a(t,i,x,s)}}},21776:function(X,I,e){"use strict";var A=e(26880);function k(o){var T=o.description?" "+o.description:"",b=o.keys||[];if(b.length>0){for(var p=[],s=0;s<b.length;s++)p[s]="`"+b[s]+"`";T+="Finally, the template string has access to ",T=b.length===1?T+"variable "+p[0]:T+"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return T}A.FORMAT_LINK,A.DATE_FORMAT_LINK,I.Ks=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"none"};return o.arrayOk!==!1&&(b.arrayOk=!0),b},I.Gw=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"calc"};return o.arrayOk!==!1&&(b.arrayOk=!0),b},I.ye=function(o,T){return T=T||{},(o=o||{}).newshape,k(T),{valType:"string",dflt:"",editType:o.editType||"arraydraw"}}},19352:function(X,I,e){"use strict";var A=e(24696),k=e(84888).KY,o=e(3400).counterRegex,T="ternary";I.name=T;var b=I.attr="subplot";I.idRoot=T,I.idRegex=I.attrRegex=o(T),(I.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},I.layoutAttributes=e(86379),I.supplyLayoutDefaults=e(38536),I.plot=function(p){for(var s=p._fullLayout,t=p.calcdata,i=s._subplots[T],n=0;n<i.length;n++){var r=i[n],a=k(t,T,r),l=s[r]._subplot;l||(l=new A({id:r,graphDiv:p,container:s._ternarylayer.node()},s),s[r]._subplot=l),l.plot(a,s,p._promises)}},I.clean=function(p,s,t,i){for(var n=i._subplots[T]||[],r=0;r<n.length;r++){var a=n[r],l=i[a]._subplot;!s[a]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(X,I,e){"use strict";var A=e(22548),k=e(86968).u,o=e(94724),T=e(67824).overrideAll,b=e(92880).extendFlat,p={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:b({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:b({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:b({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},s=X.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:A.background},sum:{valType:"number",dflt:1,min:0},aaxis:p,baxis:p,caxis:p},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},38536:function(X,I,e){"use strict";var A=e(76308),k=e(31780),o=e(3400),T=e(168),b=e(95936),p=e(42568),s=e(25404),t=e(26332),i=e(42136),n=e(86379),r=["aaxis","baxis","caxis"];function a(c,h,u,x){var d,m,g,y=u("bgcolor"),v=u("sum");x.bgColor=A.combine(y,x.paper_bgcolor);for(var _=0;_<r.length;_++)m=c[d=r[_]]||{},(g=k.newContainer(h,d))._name=d,l(m,g,x,h);var f=h.aaxis,S=h.baxis,w=h.caxis;f.min+S.min+w.min>=v&&(f.min=0,S.min=0,w.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function l(c,h,u,x){var d=n[h._name];function m(S,w){return o.coerce(c,h,d,S,w)}m("uirevision",x.uirevision),h.type="linear";var g=m("color"),y=g!==d.color.dflt?g:u.font.color,v=h._name.charAt(0).toUpperCase(),_="Component "+v,f=m("title.text",_);h._hovertitle=f===_?f:v,o.coerceFont(m,"title.font",u.font,{overrideDflt:{size:o.bigFont(u.font.size),color:y}}),m("min"),t(c,h,m,"linear"),p(c,h,m,"linear"),b(c,h,m,"linear",{noAutotickangles:!0}),s(c,h,m,{outerTicks:!0}),m("showticklabels")&&(o.coerceFont(m,"tickfont",u.font,{overrideDflt:{color:y}}),m("tickangle"),m("tickformat")),i(c,h,m,{dfltColor:g,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d}),m("hoverformat"),m("layer")}X.exports=function(c,h,u){T(c,h,u,{type:"ternary",attributes:n,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},24696:function(X,I,e){"use strict";var A=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strTranslate,p=T._,s=e(76308),t=e(43616),i=e(78344),n=e(92880).extendFlat,r=e(7316),a=e(54460),l=e(86476),c=e(93024),h=e(72760),u=h.freeMode,x=h.rectMode,d=e(81668),m=e(22676).prepSelect,g=e(22676).selectOnClick,y=e(22676).clearOutline,v=e(22676).clearSelectionsCache,_=e(33816);function f(D,N){this.id=D.id,this.graphDiv=D.graphDiv,this.init(N),this.makeFramework(N),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}X.exports=f;var S=f.prototype;S.init=function(D){this.container=D._ternarylayer,this.defs=D._defs,this.layoutId=D._uid,this.traceHash={},this.layers={}},S.plot=function(D,N){var W=this,F=N[W.id],j=N._size;W._hasClipOnAxisFalse=!1;for(var q=0;q<D.length;q++)if(D[q][0].trace.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}W.updateLayers(F),W.adjustLayout(F,j),r.generalUpdatePerTraceModule(W.graphDiv,W,D,F),W.layers.plotbg.select("path").call(s.fill,F.bgcolor)},S.makeFramework=function(D){var N=this,W=N.graphDiv,F=D[N.id],j=N.clipId="clip"+N.layoutId+N.id,q=N.clipIdRelative="clip-relative"+N.layoutId+N.id;N.clipDef=T.ensureSingleById(D._clips,"clipPath",j,function(te){te.append("path").attr("d","M0,0Z")}),N.clipDefRelative=T.ensureSingleById(D._clips,"clipPath",q,function(te){te.append("path").attr("d","M0,0Z")}),N.plotContainer=T.ensureSingle(N.container,"g",N.id),N.updateLayers(F),t.setClipUrl(N.layers.backplot,j,W),t.setClipUrl(N.layers.grids,j,W)},S.updateLayers=function(D){var N=this.layers,W=["draglayer","plotbg","backplot","grids"];D.aaxis.layer==="below traces"&&W.push("aaxis","aline"),D.baxis.layer==="below traces"&&W.push("baxis","bline"),D.caxis.layer==="below traces"&&W.push("caxis","cline"),W.push("frontplot"),D.aaxis.layer==="above traces"&&W.push("aaxis","aline"),D.baxis.layer==="above traces"&&W.push("baxis","bline"),D.caxis.layer==="above traces"&&W.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(W,String),j=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var te=A.select(this);N[q]=te,q==="frontplot"?te.append("g").classed("scatterlayer",!0):q==="backplot"?te.append("g").classed("maplayer",!0):q==="plotbg"?te.append("path").attr("d","M0,0Z"):q==="aline"||q==="bline"||q==="cline"?te.append("path"):q==="grids"&&j.forEach(function(ee){N[ee]=te.append("g").classed("grid "+ee,!0)})}),F.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(D,N){var W,F,j,q,te,ee,Q=this,J=D.domain,K=(J.x[0]+J.x[1])/2,Y=(J.y[0]+J.y[1])/2,ie=J.x[1]-J.x[0],se=J.y[1]-J.y[0],ae=ie*N.w,ue=se*N.h,ve=D.sum,ye=D.aaxis.min,de=D.baxis.min,pe=D.caxis.min;ae>w*ue?j=(q=ue)*w:q=(j=ae)/w,te=ie*j/ae,ee=se*q/ue,W=N.l+N.w*K-j/2,F=N.t+N.h*(1-Y)-q/2,Q.x0=W,Q.y0=F,Q.w=j,Q.h=q,Q.sum=ve,Q.xaxis={type:"linear",range:[ye+2*pe-ve,ve-ye-2*de],domain:[K-te/2,K+te/2],_id:"x"},i(Q.xaxis,Q.graphDiv._fullLayout),Q.xaxis.setScale(),Q.xaxis.isPtWithinRange=function(Me){return Me.a>=Q.aaxis.range[0]&&Me.a<=Q.aaxis.range[1]&&Me.b>=Q.baxis.range[1]&&Me.b<=Q.baxis.range[0]&&Me.c>=Q.caxis.range[1]&&Me.c<=Q.caxis.range[0]},Q.yaxis={type:"linear",range:[ye,ve-de-pe],domain:[Y-ee/2,Y+ee/2],_id:"y"},i(Q.yaxis,Q.graphDiv._fullLayout),Q.yaxis.setScale(),Q.yaxis.isPtWithinRange=function(){return!0};var ge=Q.yaxis.domain[0],ke=Q.aaxis=n({},D.aaxis,{range:[ye,ve-de-pe],side:"left",tickangle:(+D.aaxis.tickangle||0)-30,domain:[ge,ge+ee*w],anchor:"free",position:0,_id:"y",_length:j});i(ke,Q.graphDiv._fullLayout),ke.setScale();var Ee=Q.baxis=n({},D.baxis,{range:[ve-ye-pe,de],side:"bottom",domain:Q.xaxis.domain,anchor:"free",position:0,_id:"x",_length:j});i(Ee,Q.graphDiv._fullLayout),Ee.setScale();var me=Q.caxis=n({},D.caxis,{range:[ve-ye-de,pe],side:"right",tickangle:(+D.caxis.tickangle||0)+30,domain:[ge,ge+ee*w],anchor:"free",position:0,_id:"y",_length:j});i(me,Q.graphDiv._fullLayout),me.setScale();var oe="M"+W+","+(F+q)+"h"+j+"l-"+j/2+",-"+q+"Z";Q.clipDef.select("path").attr("d",oe),Q.layers.plotbg.select("path").attr("d",oe);var re="M0,"+q+"h"+j+"l-"+j/2+",-"+q+"Z";Q.clipDefRelative.select("path").attr("d",re);var fe=b(W,F);Q.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",fe),Q.clipDefRelative.select("path").attr("transform",null);var Se=b(W-Ee._offset,F+q);Q.layers.baxis.attr("transform",Se),Q.layers.bgrid.attr("transform",Se);var be=b(W+j/2,F)+"rotate(30)"+b(0,-ke._offset);Q.layers.aaxis.attr("transform",be),Q.layers.agrid.attr("transform",be);var we=b(W+j/2,F)+"rotate(-30)"+b(0,-me._offset);Q.layers.caxis.attr("transform",we),Q.layers.cgrid.attr("transform",we),Q.drawAxes(!0),Q.layers.aline.select("path").attr("d",ke.showline?"M"+W+","+(F+q)+"l"+j/2+",-"+q:"M0,0").call(s.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),Q.layers.bline.select("path").attr("d",Ee.showline?"M"+W+","+(F+q)+"h"+j:"M0,0").call(s.stroke,Ee.linecolor||"#000").style("stroke-width",(Ee.linewidth||0)+"px"),Q.layers.cline.select("path").attr("d",me.showline?"M"+(W+j/2)+","+F+"l"+j/2+","+q:"M0,0").call(s.stroke,me.linecolor||"#000").style("stroke-width",(me.linewidth||0)+"px"),Q.graphDiv._context.staticPlot||Q.initInteractions(),t.setClipUrl(Q.layers.frontplot,Q._hasClipOnAxisFalse?null:Q.clipId,Q.graphDiv)},S.drawAxes=function(D){var N=this,W=N.graphDiv,F=N.id.substr(7)+"title",j=N.layers,q=N.aaxis,te=N.baxis,ee=N.caxis;if(N.drawAx(q),N.drawAx(te),N.drawAx(ee),D){var Q=Math.max(q.showticklabels?q.tickfont.size/2:0,(ee.showticklabels?.75*ee.tickfont.size:0)+(ee.ticks==="outside"?.87*ee.ticklen:0)),J=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;j["a-title"]=d.draw(W,"a"+F,{propContainer:q,propName:N.id+".aaxis.title",placeholder:p(W,"Click to enter Component A title"),attributes:{x:N.x0+N.w/2,y:N.y0-q.title.font.size/3-Q,"text-anchor":"middle"}}),j["b-title"]=d.draw(W,"b"+F,{propContainer:te,propName:N.id+".baxis.title",placeholder:p(W,"Click to enter Component B title"),attributes:{x:N.x0-J,y:N.y0+N.h+.83*te.title.font.size+J,"text-anchor":"middle"}}),j["c-title"]=d.draw(W,"c"+F,{propContainer:ee,propName:N.id+".caxis.title",placeholder:p(W,"Click to enter Component C title"),attributes:{x:N.x0+N.w+J,y:N.y0+N.h+.83*ee.title.font.size+J,"text-anchor":"middle"}})}},S.drawAx=function(D){var N,W=this,F=W.graphDiv,j=D._name,q=j.charAt(0),te=D._id,ee=W.layers[j],Q=q+"tickLayout",J=(N=D).ticks+String(N.ticklen)+String(N.showticklabels);W[Q]!==J&&(ee.selectAll("."+te+"tick").remove(),W[Q]=J),D.setScale();var K=a.calcTicks(D),Y=a.clipEnds(D,K),ie=a.makeTransTickFn(D),se=a.getTickSigns(D)[2],ae=T.deg2rad(30),ue=se*(D.linewidth||1)/2,ve=se*D.ticklen,ye=W.w,de=W.h,pe=q==="b"?"M0,"+ue+"l"+Math.sin(ae)*ve+","+Math.cos(ae)*ve:"M"+ue+",0l"+Math.cos(ae)*ve+","+-Math.sin(ae)*ve,ge={a:"M0,0l"+de+",-"+ye/2,b:"M0,0l-"+ye/2+",-"+de,c:"M0,0l-"+de+","+ye/2}[q];a.drawTicks(F,D,{vals:D.ticks==="inside"?Y:K,layer:ee,path:pe,transFn:ie,crisp:!1}),a.drawGrid(F,D,{vals:Y,layer:W.layers[q+"grid"],path:ge,transFn:ie,crisp:!1}),a.drawLabels(F,D,{vals:K,layer:ee,transFn:ie,labelFns:a.makeLabelFns(D,0,30)})};var E=_.MINZOOM/2+.87,P="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",O="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",R=!0;function U(D){A.select(D).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){v(this.dragOptions),y(this.dragOptions.gd)},S.initInteractions=function(){var D,N,W,F,j,q,te,ee,Q,J,K,Y,ie=this,se=ie.layers.plotbg.select("path").node(),ae=ie.graphDiv,ue=ae._fullLayout._zoomlayer;function ve(re){var fe={};return fe[ie.id+".aaxis.min"]=re.a,fe[ie.id+".baxis.min"]=re.b,fe[ie.id+".caxis.min"]=re.c,fe}function ye(re,fe){var Se=ae._fullLayout.clickmode;U(ae),re===2&&(ae.emit("plotly_doubleclick",null),o.call("_guiRelayout",ae,ve({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&re===1&&g(fe,ae,[ie.xaxis],[ie.yaxis],ie.id,ie.dragOptions),Se.indexOf("event")>-1&&c.click(ae,fe,ie.id)}function de(re,fe){return 1-fe/ie.h}function pe(re,fe){return 1-(re+(ie.h-fe)/Math.sqrt(3))/ie.w}function ge(re,fe){return(re-(ie.h-fe)/Math.sqrt(3))/ie.w}function ke(re,fe){var Se=W+re*D,be=F+fe*N,we=Math.max(0,Math.min(1,de(0,F),de(0,be))),Me=Math.max(0,Math.min(1,pe(W,F),pe(Se,be))),Ie=Math.max(0,Math.min(1,ge(W,F),ge(Se,be))),Oe=(we/2+Ie)*ie.w,he=(1-we/2-Me)*ie.w,_e=(Oe+he)/2,Ae=he-Oe,De=(1-we)*ie.h,Le=De-Ae/w;Ae<_.MINZOOM?(te=j,K.attr("d",Q),Y.attr("d","M0,0Z")):(te={a:j.a+we*q,b:j.b+Me*q,c:j.c+Ie*q},K.attr("d",Q+"M"+Oe+","+De+"H"+he+"L"+_e+","+Le+"L"+Oe+","+De+"Z"),Y.attr("d","M"+W+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Oe+","+De+P+"M"+he+","+De+C+"M"+_e+","+Le+O)),J||(K.transition().style("fill",ee>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Y.transition().style("opacity",1).duration(200),J=!0),ae.emit("plotly_relayouting",ve(te))}function Ee(){U(ae),te!==j&&(o.call("_guiRelayout",ae,ve(te)),R&&ae.data&&ae._context.showTips&&(T.notifier(p(ae,"Double-click to zoom back out"),"long"),R=!1))}function me(re,fe){var Se=re/ie.xaxis._m,be=fe/ie.yaxis._m,we=[(te={a:j.a-be,b:j.b+(Se+be)/2,c:j.c-(Se-be)/2}).a,te.b,te.c].sort(T.sorterAsc),Me=we.indexOf(te.a),Ie=we.indexOf(te.b),Oe=we.indexOf(te.c);we[0]<0&&(we[1]+we[0]/2<0?(we[2]+=we[0]+we[1],we[0]=we[1]=0):(we[2]+=we[0]/2,we[1]+=we[0]/2,we[0]=0),te={a:we[Me],b:we[Ie],c:we[Oe]},fe=(j.a-te.a)*ie.yaxis._m,re=(j.c-te.c-j.b+te.b)*ie.xaxis._m);var he=b(ie.x0+re,ie.y0+fe);ie.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",he);var _e=b(-re,-fe);ie.clipDefRelative.select("path").attr("transform",_e),ie.aaxis.range=[te.a,ie.sum-te.b-te.c],ie.baxis.range=[ie.sum-te.a-te.c,te.b],ie.caxis.range=[ie.sum-te.a-te.b,te.c],ie.drawAxes(!1),ie._hasClipOnAxisFalse&&ie.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,ie),ae.emit("plotly_relayouting",ve(te))}function oe(){o.call("_guiRelayout",ae,ve(te))}this.dragOptions={element:se,gd:ae,plotinfo:{id:ie.id,domain:ae._fullLayout[ie.id].domain,xaxis:ie.xaxis,yaxis:ie.yaxis},subplot:ie.id,prepFn:function(re,fe,Se){ie.dragOptions.xaxes=[ie.xaxis],ie.dragOptions.yaxes=[ie.yaxis],D=ae._fullLayout._invScaleX,N=ae._fullLayout._invScaleY;var be=ie.dragOptions.dragmode=ae._fullLayout.dragmode;u(be)?ie.dragOptions.minDrag=1:ie.dragOptions.minDrag=void 0,be==="zoom"?(ie.dragOptions.moveFn=ke,ie.dragOptions.clickFn=ye,ie.dragOptions.doneFn=Ee,function(we,Me,Ie){var Oe=se.getBoundingClientRect();W=Me-Oe.left,F=Ie-Oe.top,ae._fullLayout._calcInverseTransform(ae);var he=ae._fullLayout._invTransform,_e=T.apply3DTransform(he)(W,F);W=_e[0],F=_e[1],j={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},te=j,q=ie.aaxis.range[1]-j.a,ee=k(ie.graphDiv._fullLayout[ie.id].bgcolor).getLuminance(),Q="M0,"+ie.h+"L"+ie.w/2+", 0L"+ie.w+","+ie.h+"Z",J=!1,K=ue.append("path").attr("class","zoombox").attr("transform",b(ie.x0,ie.y0)).style({fill:ee>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",Q),Y=ue.append("path").attr("class","zoombox-corners").attr("transform",b(ie.x0,ie.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ie.clearOutline(ae)}(0,fe,Se)):be==="pan"?(ie.dragOptions.moveFn=me,ie.dragOptions.clickFn=ye,ie.dragOptions.doneFn=oe,j={a:ie.aaxis.range[0],b:ie.baxis.range[1],c:ie.caxis.range[1]},te=j,ie.clearOutline(ae)):(x(be)||u(be))&&m(re,fe,Se,ie.dragOptions,be)}},se.onmousemove=function(re){c.hover(ae,re,ie.id),ae._fullLayout._lasthover=se,ae._fullLayout._hoversubplot=ie.id},se.onmouseout=function(re){ae._dragging||l.unhover(ae,re)},l.init(this.dragOptions)}},24040:function(X,I,e){"use strict";var A=e(24248),k=e(16628),o=e(52416),T=e(63620),b=e(52200).addStyleRule,p=e(92880),s=e(45464),t=e(64859),i=p.extendFlat,n=p.extendDeepAll;function r(g){var y=g.name,v=g.categories,_=g.meta;if(I.modules[y])A.log("Type "+y+" already registered");else{I.subplotsRegistry[g.basePlotModule.name]||function(R){var U=R.name;if(I.subplotsRegistry[U])A.log("Plot type "+U+" already registered.");else for(var D in h(R),I.subplotsRegistry[U]=R,I.componentsRegistry)d(D,R.name)}(g.basePlotModule);for(var f={},S=0;S<v.length;S++)f[v[S]]=!0,I.allCategories[v[S]]=!0;for(var w in I.modules[y]={_module:g,categories:f},_&&Object.keys(_).length&&(I.modules[y].meta=_),I.allTypes.push(y),I.componentsRegistry)u(w,y);g.layoutAttributes&&i(I.traceLayoutAttributes,g.layoutAttributes);var E=g.basePlotModule,P=E.name;if(P==="mapbox"){var C=E.constants.styleRules;for(var O in C)b(".js-plotly-plot .plotly .mapboxgl-"+O,C[O])}P!=="geo"&&P!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(g){if(typeof g.name!="string")throw new Error("Component module *name* must be a string.");var y=g.name;for(var v in I.componentsRegistry[y]=g,g.layoutAttributes&&(g.layoutAttributes._isLinkedToArray&&o(I.layoutArrayContainers,y),h(g)),I.modules)u(y,v);for(var _ in I.subplotsRegistry)d(y,_);for(var f in I.transformsRegistry)x(y,f);g.schema&&g.schema.layout&&n(t,g.schema.layout)}function l(g){if(typeof g.name!="string")throw new Error("Transform module *name* must be a string.");var y="Transform module "+g.name,v=typeof g.transform=="function",_=typeof g.calcTransform=="function";if(!v&&!_)throw new Error(y+" is missing a *transform* or *calcTransform* method.");for(var f in v&&_&&A.log([y+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(g.attributes)||A.log(y+" registered without an *attributes* object."),typeof g.supplyDefaults!="function"&&A.log(y+" registered without a *supplyDefaults* method."),I.transformsRegistry[g.name]=g,I.componentsRegistry)x(f,g.name)}function c(g){var y=g.name,v=y.split("-")[0],_=g.dictionary,f=g.format,S=_&&Object.keys(_).length,w=f&&Object.keys(f).length,E=I.localeRegistry,P=E[y];if(P||(E[y]=P={}),v!==y){var C=E[v];C||(E[v]=C={}),S&&C.dictionary===P.dictionary&&(C.dictionary=_),w&&C.format===P.format&&(C.format=f)}S&&(P.dictionary=_),w&&(P.format=f)}function h(g){if(g.layoutAttributes){var y=g.layoutAttributes._arrayAttrRegexps;if(y)for(var v=0;v<y.length;v++)o(I.layoutArrayRegexes,y[v])}}function u(g,y){var v=I.componentsRegistry[g].schema;if(v&&v.traces){var _=v.traces[y];_&&n(I.modules[y]._module.attributes,_)}}function x(g,y){var v=I.componentsRegistry[g].schema;if(v&&v.transforms){var _=v.transforms[y];_&&n(I.transformsRegistry[y].attributes,_)}}function d(g,y){var v=I.componentsRegistry[g].schema;if(v&&v.subplots){var _=I.subplotsRegistry[y],f=_.layoutAttributes,S=_.attr==="subplot"?_.name:_.attr;Array.isArray(S)&&(S=S[0]);var w=v.subplots[S];f&&w&&n(f,w)}}function m(g){return typeof g=="object"&&(g=g.type),g}I.modules={},I.allCategories={},I.allTypes=[],I.subplotsRegistry={},I.transformsRegistry={},I.componentsRegistry={},I.layoutArrayContainers=[],I.layoutArrayRegexes=[],I.traceLayoutAttributes={},I.localeRegistry={},I.apiMethodRegistry={},I.collectableSubplotTypes=null,I.register=function(g){if(I.collectableSubplotTypes=null,!g)throw new Error("No argument passed to Plotly.register.");g&&!Array.isArray(g)&&(g=[g]);for(var y=0;y<g.length;y++){var v=g[y];if(!v)throw new Error("Invalid module was attempted to be registered!");switch(v.moduleType){case"trace":r(v);break;case"transform":l(v);break;case"component":a(v);break;case"locale":c(v);break;case"apiMethod":var _=v.name;I.apiMethodRegistry[_]=v.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},I.getModule=function(g){var y=I.modules[m(g)];return!!y&&y._module},I.traceIs=function(g,y){if((g=m(g))==="various")return!1;var v=I.modules[g];return v||(g&&A.log("Unrecognized trace type "+g+"."),v=I.modules[s.type.dflt]),!!v.categories[y]},I.getTransformIndices=function(g,y){for(var v=[],_=g.transforms||[],f=0;f<_.length;f++)_[f].type===y&&v.push(f);return v},I.hasTransform=function(g,y){for(var v=g.transforms||[],_=0;_<v.length;_++)if(v[_].type===y)return!0;return!1},I.getComponentMethod=function(g,y){var v=I.componentsRegistry[g];return v&&v[y]||k},I.call=function(){var g=arguments[0],y=[].slice.call(arguments,1);return I.apiMethodRegistry[g].apply(null,y)}},91536:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=k.extendFlat,T=k.extendDeep;function b(p){var s;switch(p){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}X.exports=function(p,s){var t,i,n=p.data,r=p.layout,a=T([],n),l=T({},r,b(s.tileClass)),c=p._context||{};if(s.width&&(l.width=s.width),s.height&&(l.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){l.annotations=[];var h=Object.keys(l);for(t=0;t<h.length;t++)i=h[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(l[h[t]].title={text:""});for(t=0;t<a.length;t++){var u=a[t];u.showscale=!1,u.marker&&(u.marker.showscale=!1),A.traceIs(u,"pie-like")&&(u.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)l.annotations.push(s.annotations[t]);var x=Object.keys(l).filter(function(v){return v.match(/^scene\d*$/)});if(x.length){var d={};for(s.tileClass==="thumbnail"&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var m=l[x[t]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),o(m.xaxis,d),o(m.yaxis,d),o(m.zaxis,d),m._scene=null}}var g=document.createElement("div");s.tileClass&&(g.className=s.tileClass);var y={gd:g,td:g,layout:l,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return s.setBackground!=="transparent"&&(y.config.setBackground=s.setBackground||"opaque"),y.gd.defaultLayout=b(s.tileClass),y}},39792:function(X,I,e){"use strict";var A=e(3400),k=e(67024),o=e(48616),T=e(81792);X.exports=function(b,p){var s;return A.isPlainObject(b)||(s=A.getGraphDiv(b)),(p=p||{}).format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(t,i){s&&s._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),A.isIE()&&p.format!=="svg"&&i(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var n=k(b,p),r=p.filename||b.fn||"newplot";r+="."+p.format.replace("-","."),n.then(function(a){return s&&(s._snapshotInProgress=!1),o(a,r,p.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),i(a)})})}},48616:function(X,I,e){"use strict";var A=e(3400),k=e(81792);X.exports=function(o,T,b){var p=document.createElement("a"),s="download"in p;return new Promise(function(t,i){var n,r;if(A.isIE())return n=k.createBlob(o,"svg"),window.navigator.msSaveBlob(n,T),n=null,t(T);if(s)return n=k.createBlob(o,b),r=k.createObjectURL(n),p.href=r,p.download=T,document.body.appendChild(p),p.click(),document.body.removeChild(p),k.revokeObjectURL(r),n=null,t(T);if(A.isSafari()){var a=b==="svg"?",":";base64,";return k.octetStream(a+encodeURIComponent(o)),t(T)}i(new Error("download error"))})}},81792:function(X,I,e){"use strict";var A=e(24040);I.getDelay=function(o){return o._has&&(o._has("gl3d")||o._has("gl2d")||o._has("mapbox"))?500:0},I.getRedrawFunc=function(o){return function(){A.getComponentMethod("colorbar","draw")(o)}},I.encodeSVG=function(o){return"data:image/svg+xml,"+encodeURIComponent(o)},I.encodeJSON=function(o){return"data:application/json,"+encodeURIComponent(o)};var k=window.URL||window.webkitURL;I.createObjectURL=function(o){return k.createObjectURL(o)},I.revokeObjectURL=function(o){return k.revokeObjectURL(o)},I.createBlob=function(o,T){if(T==="svg")return new window.Blob([o],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([o],{type:"application/json;charset=utf-8"});var b=function(p){for(var s=p.length,t=new ArrayBuffer(s),i=new Uint8Array(t),n=0;n<s;n++)i[n]=p.charCodeAt(n);return t}(window.atob(o));return new window.Blob([b],{type:"image/"+T})},I.octetStream=function(o){document.location.href="data:application/octet-stream"+o},I.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,I.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(X,I,e){"use strict";var A=e(81792),k={getDelay:A.getDelay,getRedrawFunc:A.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};X.exports=k},63268:function(X,I,e){"use strict";var A=e(3400),k=e(61252).EventEmitter,o=e(81792);X.exports=function(T){var b=T.emitter||new k,p=new Promise(function(s,t){var i=window.Image,n=T.svg,r=T.format||"png";if(A.isIE()&&r!=="svg"){var a=new Error(o.MSG_IE_BAD_FORMAT);return t(a),T.promise?p:b.emit("error",a)}var l,c,h=T.canvas,u=T.scale||1,x=T.width||300,d=T.height||150,m=u*x,g=u*d,y=h.getContext("2d",{willReadFrequently:!0}),v=new i;r==="svg"||A.isSafari()?c=o.encodeSVG(n):(l=o.createBlob(n,"svg"),c=o.createObjectURL(l)),h.width=m,h.height=g,v.onload=function(){var _;switch(l=null,o.revokeObjectURL(c),r!=="svg"&&y.drawImage(v,0,0,m,g),r){case"jpeg":_=h.toDataURL("image/jpeg");break;case"png":_=h.toDataURL("image/png");break;case"webp":_=h.toDataURL("image/webp");break;case"svg":_=c;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!T.promise)return b.emit("error",f)}s(_),T.promise||b.emit("success",_)},v.onerror=function(_){if(l=null,o.revokeObjectURL(c),t(_),!T.promise)return b.emit("error",_)},v.src=c});return T.promise?p:b}},61808:function(X,I,e){"use strict";var A=e(61252).EventEmitter,k=e(24040),o=e(3400),T=e(81792),b=e(91536),p=e(37164),s=e(63268);X.exports=function(t,i){var n=new A,r=b(t,{format:"png"}),a=r.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var l=T.getRedrawFunc(a);return k.call("_doPlot",a,r.data,r.layout,r.config).then(l).then(function(){var c=T.getDelay(a._fullLayout);setTimeout(function(){var h=p(a),u=document.createElement("canvas");u.id=o.randstr(),(n=s({format:i.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:u,emitter:n,svg:h})).clean=function(){a&&document.body.removeChild(a)}},c)}).catch(function(c){n.emit("error",c)}),n}},37164:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(76308),b=e(9616),p=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");X.exports=function(i,n,r){var a,l=i._fullLayout,c=l._paper,h=l._toppaper,u=l.width,x=l.height;c.insert("rect",":first-child").call(o.setRect,0,0,u,x).call(T.fill,l.paper_bgcolor);var d=l._basePlotModules||[];for(a=0;a<d.length;a++){var m=d[a];m.toSVG&&m.toSVG(i)}if(h){var g=h.node().childNodes,y=Array.prototype.slice.call(g);for(a=0;a<y.length;a++){var v=y[a];v.childNodes.length&&c.node().appendChild(v)}}l._draggers&&l._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var f=A.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){f.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&f.style("font-family",S.replace(p,s));var w=this.style.fontWeight;!w||w!=="normal"&&w!=="400"||f.style("font-weight",void 0);var E=this.style.fontStyle;E&&E==="normal"&&f.style("font-style",void 0);var P=this.style.fontVariant;P&&P==="normal"&&f.style("font-variant",void 0)}else f.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var f=A.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&f.style("fill",S.replace(p,s));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&f.style("stroke",w.replace(p,s))}),n!=="pdf"&&n!=="eps"||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(b.xmlns,"xmlns",b.svg),c.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),n==="svg"&&r&&(c.attr("width",r*u),c.attr("height",r*x),c.attr("viewBox","0 0 "+u+" "+x));var _=new window.XMLSerializer().serializeToString(c.node());return _=(_=(_=function(f){var S=A.select("body").append("div").style({display:"none"}).html(""),w=f.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),w}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},84664:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;A.mergeArray(o.text,k,"tx"),A.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){A.mergeArray(b.opacity,k,"mo",!0),A.mergeArray(b.color,k,"mc");var p=b.line;p&&(A.mergeArray(p.color,k,"mlc"),A.mergeArrayCastPositive(p.width,k,"mlw"))}}},20832:function(X,I,e){"use strict";var A=e(52904),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(49084),p=e(25376),s=e(78048),t=e(98192).c,i=e(92880).extendFlat,n=p({editType:"calc",arrayOk:!0,colorEditType:"style"}),r=i({},A.marker.line.width,{dflt:0}),a=i({width:r,editType:"calc"},b("marker.line")),l=i({line:a,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});X.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:A.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:A.hovertext,hovertemplate:o({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},n,{}),insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},A.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:{marker:{opacity:A.selected.marker.opacity,color:A.selected.marker.color,editType:"style"},textfont:A.selected.textfont,editType:"style"},unselected:{marker:{opacity:A.unselected.marker.opacity,color:A.unselected.marker.color,editType:"style"},textfont:A.unselected.textfont,editType:"style"},zorder:A.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(X,I,e){"use strict";var A=e(54460),k=e(1220),o=e(94288).hasColorscale,T=e(47128),b=e(84664),p=e(4500);X.exports=function(s,t){var i,n,r,a,l,c,h=A.getFromId(s,t.xaxis||"x"),u=A.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=h.makeCalcdata(t,"x",x),r=u.makeCalcdata(t,"y"),a=k(t,u,"y",r),l=!!t.yperiodalignment,c="y"):(i=u.makeCalcdata(t,"y",x),r=h.makeCalcdata(t,"x"),a=k(t,h,"x",r),l=!!t.xperiodalignment,c="x"),n=a.vals;for(var d=Math.min(n.length,i.length),m=new Array(d),g=0;g<d;g++)m[g]={p:n[g],s:i[g]},l&&(m[g].orig_p=r[g],m[g][c+"End"]=a.ends[g],m[g][c+"Start"]=a.starts[g]),t.ids&&(m[g].id=String(t.ids[g]));return o(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(m,t),p(m,t),m}},78048:function(X){"use strict";X.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(X,I,e){"use strict";var A=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(24040),b=e(54460),p=e(71888).getAxisGroup,s=e(72592);function t(d,m,g,y,v){if(y.length){var _,f,S,w;switch(function(E,P){var C,O;for(C=0;C<P.length;C++){var R,U=P[C],D=U[0].trace,N=D.type==="funnel"?D._base:D.base,W=D.orientation==="h"?D.xcalendar:D.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(N)){for(O=0;O<Math.min(N.length,U.length);O++)R=F(N[O],0,W),A(R)?(U[O].b=+R,U[O].hasB=1):U[O].b=0;for(;O<U.length;O++)U[O].b=0}else{R=F(N,0,W);var j=A(R);for(R=j?R:0,O=0;O<U.length;O++)U[O].b=R,j&&(U[O].hasB=1)}}}(g,y),v.mode){case"overlay":i(m,g,y,v);break;case"group":for(_=[],f=[],S=0;S<y.length;S++)(w=y[S])[0].trace.offset===void 0?f.push(w):_.push(w);f.length&&function(E,P,C,O,R){var U=new s(O,{posAxis:P,sepNegVal:!1,overlapNoMerge:!R.norm});(function(D,N,W,F){for(var j=D._fullLayout,q=W.positions,te=W.distinctPositions,ee=W.minDiff,Q=W.traces,J=Q.length,K=q.length!==te.length,Y=ee*(1-F.gap),ie=p(j,N._id)+Q[0][0].trace.orientation,se=j._alignmentOpts[ie]||{},ae=0;ae<J;ae++){var ue,ve,ye=Q[ae],de=ye[0].trace,pe=se[de.alignmentgroup]||{},ge=Object.keys(pe.offsetGroups||{}).length,ke=(ue=ge?Y/ge:K?Y/J:Y)*(1-(F.groupgap||0));ve=ge?((2*de._offsetIndex+1-ge)*ue-ke)/2:K?((2*ae+1-J)*ue-ke)/2:-ke/2;var Ee=ye[0].t;Ee.barwidth=ke,Ee.poffset=ve,Ee.bargroupwidth=Y,Ee.bardelta=ee}W.binWidth=Q[0][0].t.barwidth/100,r(W),a(N,W),l(N,W,K)})(E,P,U,R),function(D,N){for(var W=D.traces,F=0;F<W.length;F++){var j=W[F];if(j[0].trace.base===void 0)for(var q=new s([j],{posAxis:N,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<j.length;te++){var ee=j[te];if(ee.p!==o){var Q=q.put(ee.p,ee.b+ee.s);Q&&(ee.b=Q)}}}}(U,P),R.norm?(h(U),u(C,U,R)):c(C,U)}(d,m,g,f,v),_.length&&i(m,g,_,v);break;case"stack":case"relative":for(_=[],f=[],S=0;S<y.length;S++)(w=y[S])[0].trace.base===void 0?f.push(w):_.push(w);(function(E){if(!(E.length<2)){var P,C,O,R,U,D;for(P=0;P<E.length&&(R=(C=E[P][0].trace).marker?C.marker.cornerradius:void 0)===void 0;P++);if(R!==void 0)for(U=A(R)?+R:+R.slice(0,-1),D=A(R)?"px":"%",P=0;P<E.length;P++)(O=E[P][0].t).cornerradiusvalue=U,O.cornerradiusform=D}})(f),f.length&&function(E,P,C,O,R){var U=new s(O,{posAxis:P,sepNegVal:R.mode==="relative",overlapNoMerge:!(R.norm||R.mode==="stack"||R.mode==="relative")});n(P,U,R),function(j,q,te){var ee,Q,J,K,Y,ie,se=x(j),ae=q.traces;for(K=0;K<ae.length;K++)if((Q=(ee=ae[K])[0].trace).type==="funnel")for(Y=0;Y<ee.length;Y++)(ie=ee[Y]).s!==o&&q.put(ie.p,-.5*ie.s);for(K=0;K<ae.length;K++){J=(Q=(ee=ae[K])[0].trace).type==="funnel";var ue=[];for(Y=0;Y<ee.length;Y++)if((ie=ee[Y]).s!==o){var ve;ve=J?ie.s:ie.s+ie.b;var ye=q.put(ie.p,ve),de=ye+ve;ie.b=ye,ie[se]=de,te.norm||(ue.push(de),ie.hasB&&ue.push(ye))}te.norm||(Q._extremes[j._id]=b.findExtremes(j,ue,{tozero:!0,padded:!0}))}}(C,U,R);for(var D=0;D<O.length;D++)for(var N=O[D],W=0;W<N.length;W++){var F=N[W];F.s!==o&&F.b+F.s===U.get(F.p,F.s)&&(F._outmost=!0)}R.norm&&u(C,U,R)}(0,m,g,f,v),_.length&&i(m,g,_,v)}(function(E){var P,C,O,R,U,D,N;for(P=0;P<E.length;P++)O=(C=E[P])[0].trace,(R=C[0].t).cornerradiusvalue===void 0&&(U=O.marker?O.marker.cornerradius:void 0)!==void 0&&(D=A(U)?+U:+U.slice(0,-1),N=A(U)?"px":"%",R.cornerradiusvalue=D,R.cornerradiusform=N)})(y),function(E,P){var C,O,R,U=x(P),D={},N=1/0,W=-1/0;for(C=0;C<E.length;C++)for(R=E[C],O=0;O<R.length;O++){var F=R[O].p;A(F)&&(N=Math.min(N,F),W=Math.max(W,F))}var j=1e4/(W-N),q=D.round=function(de){return String(Math.round(j*(de-N)))},te={},ee={},Q=E.some(function(de){var pe=de[0].trace;return"marker"in pe&&pe.marker.cornerradius});for(C=0;C<E.length;C++){(R=E[C])[0].t.extents=D;var J=R[0].t.poffset,K=k(J);for(O=0;O<R.length;O++){var Y=R[O],ie=Y[U]-Y.w/2;if(A(ie)){var se=Y[U]+Y.w/2,ae=q(Y.p);D[ae]?D[ae]=[Math.min(ie,D[ae][0]),Math.max(se,D[ae][1])]:D[ae]=[ie,se]}if(Y.p0=Y.p+(K?J[O]:J),Y.p1=Y.p0+Y.w,Y.s0=Y.b,Y.s1=Y.s0+Y.s,Q){var ue=Math.min(Y.s0,Y.s1)||0,ve=Math.max(Y.s0,Y.s1)||0,ye=Y[U];te[ye]=ye in te?Math.min(te[ye],ue):ue,ee[ye]=ye in ee?Math.max(ee[ye],ve):ve}}}Q&&function(de,pe,ge,ke){for(var Ee=x(ke),me=0;me<de.length;me++)for(var oe=de[me],re=0;re<oe.length;re++){var fe=oe[re],Se=fe[Ee];fe._sMin=pe[Se],fe._sMax=ge[Se]}}(E,te,ee,P)}(y,m)}}function i(d,m,g,y){for(var v=0;v<g.length;v++){var _=g[v],f=new s([_],{posAxis:d,sepNegVal:!1,overlapNoMerge:!y.norm});n(d,f,y),y.norm?(h(f),u(m,f,y)):c(m,f)}}function n(d,m,g){for(var y=m.minDiff,v=m.traces,_=y*(1-g.gap),f=_*(1-(g.groupgap||0)),S=-f/2,w=0;w<v.length;w++){var E=v[w][0].t;E.barwidth=f,E.poffset=S,E.bargroupwidth=_,E.bardelta=y}m.binWidth=v[0][0].t.barwidth/100,r(m),a(d,m),l(d,m)}function r(d){var m,g,y=d.traces;for(m=0;m<y.length;m++){var v,_=y[m],f=_[0],S=f.trace,w=f.t,E=S._offset||S.offset,P=w.poffset;if(k(E)){for(v=Array.prototype.slice.call(E,0,_.length),g=0;g<v.length;g++)A(v[g])||(v[g]=P);for(g=v.length;g<_.length;g++)v.push(P);w.poffset=v}else E!==void 0&&(w.poffset=E);var C=S._width||S.width,O=w.barwidth;if(k(C)){var R=Array.prototype.slice.call(C,0,_.length);for(g=0;g<R.length;g++)A(R[g])||(R[g]=O);for(g=R.length;g<_.length;g++)R.push(O);if(w.barwidth=R,E===void 0){for(v=[],g=0;g<_.length;g++)v.push(P+(O-R[g])/2);w.poffset=v}}else C!==void 0&&(w.barwidth=C,E===void 0&&(w.poffset=P+(O-C)/2))}}function a(d,m){for(var g=m.traces,y=x(d),v=0;v<g.length;v++)for(var _=g[v],f=_[0].t,S=f.poffset,w=k(S),E=f.barwidth,P=k(E),C=0;C<_.length;C++){var O=_[C],R=O.w=P?E[C]:E;O.p===void 0&&(O.p=O[y],O["orig_"+y]=O[y]);var U=(w?S[C]:S)+R/2;O[y]=O.p+U}}function l(d,m,g){var y=m.traces,v=m.minDiff/2;b.minDtick(d,m.minDiff,m.distinctPositions[0],g);for(var _=0;_<y.length;_++){var f,S,w,E,P=y[_],C=P[0],O=C.trace,R=[];for(E=0;E<P.length;E++)S=(f=P[E]).p-v,w=f.p+v,R.push(S,w);if(O.width||O.offset){var U=C.t,D=U.poffset,N=U.barwidth,W=k(D),F=k(N);for(E=0;E<P.length;E++){f=P[E];var j=W?D[E]:D,q=F?N[E]:N;w=(S=f.p+j)+q,R.push(S,w)}}O._extremes[d._id]=b.findExtremes(d,R,{padded:!1})}}function c(d,m){for(var g=m.traces,y=x(d),v=0;v<g.length;v++){for(var _=g[v],f=_[0].trace,S=f.type==="scatter",w=f.orientation==="v",E=[],P=!1,C=0;C<_.length;C++){var O=_[C],R=S?0:O.b,U=S?w?O.y:O.x:R+O.s;O[y]=U,E.push(U),O.hasB&&E.push(R),O.hasB&&O.b||(P=!0)}f._extremes[d._id]=b.findExtremes(d,E,{tozero:P,padded:!0})}}function h(d){for(var m=d.traces,g=0;g<m.length;g++)for(var y=m[g],v=0;v<y.length;v++){var _=y[v];_.s!==o&&d.put(_.p,_.b+_.s)}}function u(d,m,g){var y=m.traces,v=x(d),_=g.norm==="fraction"?1:100,f=_/1e9,S=d.l2c(d.c2l(0)),w=g.mode==="stack"?_:S;function E(te){return A(d.c2l(te))&&(te<S-f||te>w+f||!A(S))}for(var P=0;P<y.length;P++){for(var C=y[P],O=C[0].trace,R=[],U=!1,D=!1,N=0;N<C.length;N++){var W=C[N];if(W.s!==o){var F=Math.abs(_/m.get(W.p,W.s));W.b*=F,W.s*=F;var j=W.b,q=j+W.s;W[v]=q,R.push(q),D=D||E(q),W.hasB&&(R.push(j),D=D||E(j)),W.hasB&&W.b||(U=!0)}}O._extremes[d._id]=b.findExtremes(d,R,{tozero:U,padded:D})}}function x(d){return d._id.charAt(0)}X.exports={crossTraceCalc:function(d,m){for(var g=m.xaxis,y=m.yaxis,v=d._fullLayout,_=d._fullData,f=d.calcdata,S=[],w=[],E=0;E<_.length;E++){var P=_[E];if(P.visible===!0&&T.traceIs(P,"bar")&&P.xaxis===g._id&&P.yaxis===y._id&&(P.orientation==="h"?S.push(f[E]):w.push(f[E]),P._computePh))for(var C=d.calcdata[E],O=0;O<C.length;O++)typeof C[O].ph0=="function"&&(C[O].ph0=C[O].ph0()),typeof C[O].ph1=="function"&&(C[O].ph1=C[O].ph1())}var R={xCat:g.type==="category"||g.type==="multicategory",yCat:y.type==="category"||y.type==="multicategory",mode:v.barmode,norm:v.barnorm,gap:v.bargap,groupgap:v.bargroupgap};t(d,g,y,w,R),t(d,y,g,S,R)},setGroupPositions:t}},31508:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(76308),T=e(24040),b=e(43980),p=e(31147),s=e(55592),t=e(20011),i=e(20832),n=k.coerceFont;function r(l){if(A(l)){if((l=+l)>=0)return l}else if(typeof l=="string"&&(l=l.trim()).slice(-1)==="%"&&A(l.slice(0,-1))&&(l=+l.slice(0,-1))>=0)return l+"%"}function a(l,c,h,u,x,d){var m=(d=d||{}).moduleHasSelected!==!1,g=d.moduleHasUnselected!==!1,y=d.moduleHasConstrain!==!1,v=d.moduleHasCliponaxis!==!1,_=d.moduleHasTextangle!==!1,f=d.moduleHasInsideanchor!==!1,S=!!d.hasPathbar,w=Array.isArray(x)||x==="auto",E=w||x==="inside",P=w||x==="outside";if(E||P){var C=n(u,"textfont",h.font),O=k.extendFlat({},C),R=!(l.textfont&&l.textfont.color);if(R&&delete O.color,n(u,"insidetextfont",O),S){var U=k.extendFlat({},C);R&&delete U.color,n(u,"pathbar.textfont",U)}P&&n(u,"outsidetextfont",C),m&&u("selected.textfont.color"),g&&u("unselected.textfont.color"),y&&u("constraintext"),v&&u("cliponaxis"),_&&u("textangle"),u("texttemplate")}E&&f&&u("insidetextanchor")}X.exports={supplyDefaults:function(l,c,h,u){function x(y,v){return k.coerce(l,c,i,y,v)}if(b(l,c,u,x)){p(l,c,u,x),x("xhoverformat"),x("yhoverformat"),x("zorder"),x("orientation",c.x&&!c.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var d=x("textposition");a(l,0,u,x,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(l,c,x,h,u);var m=(c.marker.line||{}).color,g=T.getComponentMethod("errorbars","supplyDefaults");g(l,c,m||o.defaultLine,{axis:"y"}),g(l,c,m||o.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(c,x)}else c.visible=!1},crossTraceDefaults:function(l,c){var h,u;function x(g,y){return k.coerce(u._input,u,i,g,y)}for(var d=0;d<l.length;d++)if((u=l[d]).type==="bar"){h=u._input;var m=x("marker.cornerradius",c.barcornerradius);u.marker&&(u.marker.cornerradius=r(m)),c.barmode==="group"&&t(h,u,c,x)}},handleText:a,validateCornerradius:r}},52160:function(X){"use strict";X.exports=function(I,e,A){return I.x="xVal"in e?e.xVal:e.x,I.y="yVal"in e?e.yVal:e.y,e.xa&&(I.xaxis=e.xa),e.ya&&(I.yaxis=e.ya),A.orientation==="h"?(I.label=I.y,I.value=I.x):(I.label=I.x,I.value=I.y),I}},60444:function(X,I,e){"use strict";var A=e(38248),k=e(49760),o=e(3400).isArrayOrTypedArray;I.coerceString=function(T,b,p){if(typeof b=="string"){if(b||!T.noBlank)return b}else if((typeof b=="number"||b===!0)&&!T.strict)return String(b);return p!==void 0?p:T.dflt},I.coerceNumber=function(T,b,p){if(A(b)){b=+b;var s=T.min,t=T.max;if(!(s!==void 0&&b<s||t!==void 0&&b>t))return b}return p!==void 0?p:T.dflt},I.coerceColor=function(T,b,p){return k(b).isValid()?b:p!==void 0?p:T.dflt},I.coerceEnumerated=function(T,b,p){return T.coerceNumber&&(b=+b),T.values.indexOf(b)!==-1?b:p!==void 0?p:T.dflt},I.getValue=function(T,b){var p;return o(T)?b<T.length&&(p=T[b]):p=T,p},I.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:o(T.marker.line.width)?0:T.marker.line.width}},63400:function(X,I,e){"use strict";var A=e(93024),k=e(24040),o=e(76308),T=e(3400).fillText,b=e(60444).getLineWidth,p=e(54460).hoverLabelText,s=e(39032).BADNUM;function t(n,r,a,l,c){var h,u,x,d,m,g,y,v=n.cd,_=v[0].trace,f=v[0].t,S=l==="closest",w=_.type==="waterfall",E=n.maxHoverDistance,P=n.maxSpikeDistance;_.orientation==="h"?(h=a,u=r,x="y",d="x",m=ee,g=q):(h=r,u=a,x="x",d="y",g=ee,m=q);var C=_[x+"period"],O=S||C;function R(ue){return D(ue,-1)}function U(ue){return D(ue,1)}function D(ue,ve){var ye=ue.w;return ue[x]+ve*ye/2}function N(ue){return ue[x+"End"]-ue[x+"Start"]}var W=S?R:C?function(ue){return ue.p-N(ue)/2}:function(ue){return Math.min(R(ue),ue.p-f.bardelta/2)},F=S?U:C?function(ue){return ue.p+N(ue)/2}:function(ue){return Math.max(U(ue),ue.p+f.bardelta/2)};function j(ue,ve,ye){return c.finiteRange&&(ye=0),A.inbox(ue-h,ve-h,ye+Math.min(1,Math.abs(ve-ue)/y)-1)}function q(ue){return j(W(ue),F(ue),E)}function te(ue){var ve=ue[d];if(w){var ye=Math.abs(ue.rawS)||0;u>0?ve+=ye:u<0&&(ve-=ye)}return ve}function ee(ue){var ve=u,ye=ue.b,de=te(ue);return A.inbox(ye-ve,de-ve,E+(de-ve)/(de-ye)-1)}var Q=n[x+"a"],J=n[d+"a"];y=Math.abs(Q.r2c(Q.range[1])-Q.r2c(Q.range[0]));var K=A.getDistanceFunction(l,m,g,function(ue){return(m(ue)+g(ue))/2});if(A.getClosest(v,K,n),n.index!==!1&&v[n.index].p!==s){O||(W=function(ue){return Math.min(R(ue),ue.p-f.bargroupwidth/2)},F=function(ue){return Math.max(U(ue),ue.p+f.bargroupwidth/2)});var Y=v[n.index],ie=_.base?Y.b+Y.s:Y.s;n[d+"0"]=n[d+"1"]=J.c2p(Y[d],!0),n[d+"LabelVal"]=ie;var se=f.extents[f.extents.round(Y.p)];n[x+"0"]=Q.c2p(S?W(Y):se[0],!0),n[x+"1"]=Q.c2p(S?F(Y):se[1],!0);var ae=Y.orig_p!==void 0;return n[x+"LabelVal"]=ae?Y.orig_p:Y.p,n.labelLabel=p(Q,n[x+"LabelVal"],_[x+"hoverformat"]),n.valueLabel=p(J,n[d+"LabelVal"],_[d+"hoverformat"]),n.baseLabel=p(J,Y.b,_[d+"hoverformat"]),n.spikeDistance=(function(ue){var ve=u,ye=ue.b,de=te(ue);return A.inbox(ye-ve,de-ve,P+(de-ve)/(de-ye)-1)}(Y)+function(ue){return j(R(ue),U(ue),P)}(Y))/2,n[x+"Spike"]=Q.c2p(Y.p,!0),T(Y,_,n),n.hovertemplate=_.hovertemplate,n}}function i(n,r){var a=r.mcc||n.marker.color,l=r.mlcc||n.marker.line.color,c=b(n,r);return o.opacity(a)?a:o.opacity(l)&&c?l:void 0}X.exports={hoverPoints:function(n,r,a,l,c){var h=t(n,r,a,l,c);if(h){var u=h.cd,x=u[0].trace,d=u[h.index];return h.color=i(x,d),k.getComponentMethod("errorbars","hoverInfo")(d,x,h),[h]}},hoverOnBars:t,getTraceColor:i}},51132:function(X,I,e){"use strict";X.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(X){"use strict";X.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(X,I,e){"use strict";var A=e(24040),k=e(54460),o=e(3400),T=e(39324),b=e(31508).validateCornerradius;X.exports=function(p,s,t){function i(m,g){return o.coerce(p,s,T,m,g)}for(var n=!1,r=!1,a=!1,l={},c=i("barmode"),h=0;h<t.length;h++){var u=t[h];if(A.traceIs(u,"bar")&&u.visible){if(n=!0,c==="group"){var x=u.xaxis+u.yaxis;l[x]&&(a=!0),l[x]=!0}u.visible&&u.type==="histogram"&&k.getFromId({_fullLayout:s},u[u.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}if(n){c!=="overlay"&&i("barnorm"),i("bargap",r&&!a?0:.2),i("bargroupgap");var d=i("barcornerradius");s.barcornerradius=b(d)}else delete s.barmode}},98184:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(3400),T=e(72736),b=e(76308),p=e(43616),s=e(24040),t=e(54460).tickText,i=e(82744),n=i.recordMinTextSize,r=i.clearMinTextSize,a=e(60100),l=e(60444),c=e(78048),h=e(20832),u=h.text,x=h.textposition,d=e(10624).appendArrayPointValue,m=c.TEXTPAD;function g(O){return O.id}function y(O){if(O.ids)return g}function v(O){return(O>0)-(O<0)}function _(O,R){return O<R?1:-1}function f(O,R,U,D){var N;return!R.uniformtext.mode&&S(U)?(D&&(N=D()),O.transition().duration(U.duration).ease(U.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()})):O}function S(O){return O&&O.duration>0}function w(O,R,U,D,N){return!(O<0||R<0)&&(U<=O&&D<=R||U<=R&&D<=O||(N?O>=U*(R/D):R>=D*(O/U)))}function E(O){return O==="auto"?0:O}function P(O,R){var U=Math.PI/180*R,D=Math.abs(Math.sin(U)),N=Math.abs(Math.cos(U));return{x:O.width*N+O.height*D,y:O.width*D+O.height*N}}function C(O,R,U,D,N,W){var F=!!W.isHorizontal,j=!!W.constrained,q=W.angle||0,te=W.anchor,ee=te==="end",Q=te==="start",J=((W.leftToRight||0)+1)/2,K=1-J,Y=W.hasB,ie=W.r,se=W.overhead,ae=N.width,ue=N.height,ve=Math.abs(R-O),ye=Math.abs(D-U),de=ve>2*m&&ye>2*m?m:0;ve-=2*de,ye-=2*de;var pe=E(q);q!=="auto"||ae<=ve&&ue<=ye||!(ae>ve||ue>ye)||(ae>ye||ue>ve)&&ae<ue==ve<ye||(pe+=90);var ge,ke,Ee=P(N,pe);if(ie&&ie-se>m){var me=function(Oe,he,_e,Ae,De,Le,Be,Ve,Ze){var rt,it,dt,mt,ht=Math.max(0,Math.abs(he-Oe)-2*m),Qe=Math.max(0,Math.abs(Ae-_e)-2*m),Je=Le-m,wt=Be?Je-Math.sqrt(Je*Je-(Je-Be)*(Je-Be)):Je,Pt=Ze?2*Je:Ve?Je-Be:2*wt,It=Ze?2*Je:Ve?2*wt:Je-Be;return De.y/De.x>=Qe/(ht-Pt)?mt=Qe/De.y:De.y/De.x<=(Qe-It)/ht?mt=ht/De.x:!Ze&&Ve?(rt=De.x*De.x+De.y*De.y/4,dt=(ht-Je)*(ht-Je)+(Qe/2-Je)*(Qe/2-Je)-Je*Je,mt=(-(it=-2*De.x*(ht-Je)-De.y*(Qe/2-Je))+Math.sqrt(it*it-4*rt*dt))/(2*rt)):Ze?(rt=(De.x*De.x+De.y*De.y)/4,dt=(ht/2-Je)*(ht/2-Je)+(Qe/2-Je)*(Qe/2-Je)-Je*Je,mt=(-(it=-De.x*(ht/2-Je)-De.y*(Qe/2-Je))+Math.sqrt(it*it-4*rt*dt))/(2*rt)):(rt=De.x*De.x/4+De.y*De.y,dt=(ht/2-Je)*(ht/2-Je)+(Qe-Je)*(Qe-Je)-Je*Je,mt=(-(it=-De.x*(ht/2-Je)-2*De.y*(Qe-Je))+Math.sqrt(it*it-4*rt*dt))/(2*rt)),{scale:mt=Math.min(1,mt),pad:Ve?Math.max(0,Je-Math.sqrt(Math.max(0,Je*Je-(Je-(Qe-De.y*mt)/2)*(Je-(Qe-De.y*mt)/2)))-Be):Math.max(0,Je-Math.sqrt(Math.max(0,Je*Je-(Je-(ht-De.x*mt)/2)*(Je-(ht-De.x*mt)/2)))-Be)}}(O,R,U,D,Ee,ie,se,F,Y);ge=me.scale,ke=me.pad}else ge=1,j&&(ge=Math.min(1,ve/Ee.x,ye/Ee.y)),ke=0;var oe=N.left*K+N.right*J,re=(N.top+N.bottom)/2,fe=(O+m)*K+(R-m)*J,Se=(U+D)/2,be=0,we=0;if(Q||ee){var Me=(F?Ee.x:Ee.y)/2;ie&&(ee||Y)&&(de+=ke);var Ie=F?_(O,R):_(U,D);F?Q?(fe=O+Ie*de,be=-Ie*Me):(fe=R-Ie*de,be=Ie*Me):Q?(Se=U+Ie*de,we=-Ie*Me):(Se=D-Ie*de,we=Ie*Me)}return{textX:oe,textY:re,targetX:fe,targetY:Se,anchorX:be,anchorY:we,scale:ge,rotate:pe}}X.exports={plot:function(O,R,U,D,N,W){var F=R.xaxis,j=R.yaxis,q=O._fullLayout,te=O._context.staticPlot;N||(N={mode:q.barmode,norm:q.barmode,gap:q.bargap,groupgap:q.bargroupgap},r("bar",q));var ee=o.makeTraceGroups(D,U,"trace bars").each(function(Q){var J=A.select(this),K=Q[0].trace,Y=Q[0].t,ie=K.type==="waterfall",se=K.type==="funnel",ae=K.type==="histogram",ue=K.type==="bar",ve=ue||se,ye=0;ie&&K.connector.visible&&K.connector.mode==="between"&&(ye=K.connector.line.width/2);var de=K.orientation==="h",pe=S(N),ge=o.ensureSingle(J,"g","points"),ke=y(K),Ee=ge.selectAll("g.point").data(o.identity,ke);Ee.enter().append("g").classed("point",!0),Ee.exit().remove(),Ee.each(function(oe,re){var fe,Se,be=A.select(this),we=function(tt,Re,Fe,nt){var Ge=[],ut=[],pt=nt?Re:Fe,gt=nt?Fe:Re;return Ge[0]=pt.c2p(tt.s0,!0),ut[0]=gt.c2p(tt.p0,!0),Ge[1]=pt.c2p(tt.s1,!0),ut[1]=gt.c2p(tt.p1,!0),nt?[Ge,ut]:[ut,Ge]}(oe,F,j,de),Me=we[0][0],Ie=we[0][1],Oe=we[1][0],he=we[1][1],_e=(de?Ie-Me:he-Oe)==0;if(_e&&ve&&l.getLineWidth(K,oe)&&(_e=!1),_e||(_e=!(k(Me)&&k(Ie)&&k(Oe)&&k(he))),oe.isBlank=_e,_e&&(de?Ie=Me:he=Oe),ye&&!_e&&(de?(Me-=_(Me,Ie)*ye,Ie+=_(Me,Ie)*ye):(Oe-=_(Oe,he)*ye,he+=_(Oe,he)*ye)),K.type==="waterfall"){if(!_e){var Ae=K[oe.dir].marker;fe=Ae.line.width,Se=Ae.color}}else fe=l.getLineWidth(K,oe),Se=oe.mc||K.marker.color;function De(tt){var Re=A.round(fe/2%1,2);return N.gap===0&&N.groupgap===0?A.round(Math.round(tt)-Re,2):tt}var Le=b.opacity(Se)<1||fe>.01?De:function(tt,Re,Fe){return Fe&&tt===Re?tt:Math.abs(tt-Re)>=2?De(tt):tt>Re?Math.ceil(tt):Math.floor(tt)};O._context.staticPlot||(Me=Le(Me,Ie,de),Ie=Le(Ie,Me,de),Oe=Le(Oe,he,!de),he=Le(he,Oe,!de));var Be,Ve=de?F.c2p:j.c2p;Be=oe.s0>0?oe._sMax:oe.s0<0?oe._sMin:oe.s1>0?oe._sMax:oe._sMin;var Ze,rt,it=ue||ae?function(tt,Re){if(!tt)return 0;var Fe,nt=Math.abs(de?he-Oe:Ie-Me),Ge=Math.abs(de?Ie-Me:he-Oe),ut=Le(Math.abs(Ve(Be,!0)-Ve(0,!0))),pt=oe.hasB?Math.min(nt/2,Ge/2):Math.min(nt/2,ut);return Fe=Re==="%"?nt*(Math.min(50,tt)/100):tt,Le(Math.max(Math.min(Fe,pt),0))}(Y.cornerradiusvalue,Y.cornerradiusform):0,dt="M"+Me+","+Oe+"V"+he+"H"+Ie+"V"+Oe+"Z",mt=0;if(it&&oe.s){var ht=v(oe.s0)===0||v(oe.s)===v(oe.s0)?oe.s1:oe.s0;if((mt=Le(oe.hasB?0:Math.abs(Ve(Be,!0)-Ve(ht,!0))))<it){var Qe=_(Me,Ie),Je=_(Oe,he),wt=Qe===-Je?1:0;if(de)if(oe.hasB)Ze="M"+(Me+it*Qe)+","+Oe+"A "+it+","+it+" 0 0 "+wt+" "+Me+","+(Oe+it*Je)+"V"+(he-it*Je)+"A "+it+","+it+" 0 0 "+wt+" "+(Me+it*Qe)+","+he+"H"+(Ie-it*Qe)+"A "+it+","+it+" 0 0 "+wt+" "+Ie+","+(he-it*Je)+"V"+(Oe+it*Je)+"A "+it+","+it+" 0 0 "+wt+" "+(Ie-it*Qe)+","+Oe+"Z";else{var Pt=(rt=Math.abs(Ie-Me)+mt)<it?it-Math.sqrt(rt*(2*it-rt)):0,It=mt>0?Math.sqrt(mt*(2*it-mt)):0,At=Qe>0?Math.max:Math.min;Ze="M"+Me+","+Oe+"V"+(he-Pt*Je)+"H"+At(Ie-(it-mt)*Qe,Me)+"A "+it+","+it+" 0 0 "+wt+" "+Ie+","+(he-it*Je-It)+"V"+(Oe+it*Je+It)+"A "+it+","+it+" 0 0 "+wt+" "+At(Ie-(it-mt)*Qe,Me)+","+(Oe+Pt*Je)+"Z"}else if(oe.hasB)Ze="M"+(Me+it*Qe)+","+Oe+"A "+it+","+it+" 0 0 "+wt+" "+Me+","+(Oe+it*Je)+"V"+(he-it*Je)+"A "+it+","+it+" 0 0 "+wt+" "+(Me+it*Qe)+","+he+"H"+(Ie-it*Qe)+"A "+it+","+it+" 0 0 "+wt+" "+Ie+","+(he-it*Je)+"V"+(Oe+it*Je)+"A "+it+","+it+" 0 0 "+wt+" "+(Ie-it*Qe)+","+Oe+"Z";else{var qe=(rt=Math.abs(he-Oe)+mt)<it?it-Math.sqrt(rt*(2*it-rt)):0,Ye=mt>0?Math.sqrt(mt*(2*it-mt)):0,Ne=Je>0?Math.max:Math.min;Ze="M"+(Me+qe*Qe)+","+Oe+"V"+Ne(he-(it-mt)*Je,Oe)+"A "+it+","+it+" 0 0 "+wt+" "+(Me+it*Qe-Ye)+","+he+"H"+(Ie-it*Qe+Ye)+"A "+it+","+it+" 0 0 "+wt+" "+(Ie-qe*Qe)+","+Ne(he-(it-mt)*Je,Oe)+"V"+Oe+"Z"}}else Ze=dt}else Ze=dt;var We=f(o.ensureSingle(be,"path"),q,N,W);if(We.style("vector-effect",te?"none":"non-scaling-stroke").attr("d",isNaN((Ie-Me)*(he-Oe))||_e&&O._context.staticPlot?"M0,0Z":Ze).call(p.setClipUrl,R.layerClipId,O),!q.uniformtext.mode&&pe){var at=p.makePointStyleFns(K);p.singlePointStyle(oe,We,K,at,O)}(function(tt,Re,Fe,nt,Ge,ut,pt,gt,ct,Tt,vt,kt,Lt){var Ct,Dt=Re.xaxis,Gt=Re.yaxis,tn=tt._fullLayout;function jt(dr,Zt,dn){return o.ensureSingle(dr,"text").text(Zt).attr({class:"bartext bartext-"+Ct,"text-anchor":"middle","data-notex":1}).call(p.font,dn).call(T.convertToTspans,tt)}var Wt=nt[0].trace,Ft=Wt.orientation==="h",Ln=function(dr,Zt,dn,St,Rt){var Xt,ln=Zt[0].trace;return Xt=ln.texttemplate?function(un,mn,rn,qt,Ht){var $t=mn[0].trace,an=o.castOption($t,rn,"texttemplate");if(!an)return"";var wn,En,On,Fn,$n=$t.type==="histogram",Hn=$t.type==="waterfall",Kn=$t.type==="funnel",tr=$t.orientation==="h";function Jn(Dr){return t(Fn,Fn.c2l(Dr),!0).text}tr?(wn="y",En=Ht,On="x",Fn=qt):(wn="x",En=qt,On="y",Fn=Ht);var hr,br=mn[rn],gr={};gr.label=br.p,gr.labelLabel=gr[wn+"Label"]=(hr=br.p,t(En,En.c2l(hr),!0).text);var ar=o.castOption($t,br.i,"text");(ar===0||ar)&&(gr.text=ar),gr.value=br.s,gr.valueLabel=gr[On+"Label"]=Jn(br.s);var mr={};d(mr,$t,br.i),($n||mr.x===void 0)&&(mr.x=tr?gr.value:gr.label),($n||mr.y===void 0)&&(mr.y=tr?gr.label:gr.value),($n||mr.xLabel===void 0)&&(mr.xLabel=tr?gr.valueLabel:gr.labelLabel),($n||mr.yLabel===void 0)&&(mr.yLabel=tr?gr.labelLabel:gr.valueLabel),Hn&&(gr.delta=+br.rawS||br.s,gr.deltaLabel=Jn(gr.delta),gr.final=br.v,gr.finalLabel=Jn(gr.final),gr.initial=gr.final-gr.delta,gr.initialLabel=Jn(gr.initial)),Kn&&(gr.value=br.s,gr.valueLabel=Jn(gr.value),gr.percentInitial=br.begR,gr.percentInitialLabel=o.formatPercent(br.begR),gr.percentPrevious=br.difR,gr.percentPreviousLabel=o.formatPercent(br.difR),gr.percentTotal=br.sumR,gr.percenTotalLabel=o.formatPercent(br.sumR));var Mr=o.castOption($t,br.i,"customdata");return Mr&&(gr.customdata=Mr),o.texttemplateString(an,gr,un._d3locale,mr,gr,$t._meta||{})}(dr,Zt,dn,St,Rt):ln.textinfo?function(un,mn,rn,qt){var Ht=un[0].trace,$t=Ht.orientation==="h",an=Ht.type==="waterfall",wn=Ht.type==="funnel";function En(Mr){return t($t?rn:qt,+Mr,!0).text}var On,Fn,$n=Ht.textinfo,Hn=un[mn],Kn=$n.split("+"),tr=[],Jn=function(Mr){return Kn.indexOf(Mr)!==-1};if(Jn("label")&&tr.push((Fn=un[mn].p,t($t?qt:rn,Fn,!0).text)),Jn("text")&&((On=o.castOption(Ht,Hn.i,"text"))===0||On)&&tr.push(On),an){var hr=+Hn.rawS||Hn.s,br=Hn.v,gr=br-hr;Jn("initial")&&tr.push(En(gr)),Jn("delta")&&tr.push(En(hr)),Jn("final")&&tr.push(En(br))}if(wn){Jn("value")&&tr.push(En(Hn.s));var ar=0;Jn("percent initial")&&ar++,Jn("percent previous")&&ar++,Jn("percent total")&&ar++;var mr=ar>1;Jn("percent initial")&&(On=o.formatPercent(Hn.begR),mr&&(On+=" of initial"),tr.push(On)),Jn("percent previous")&&(On=o.formatPercent(Hn.difR),mr&&(On+=" of previous"),tr.push(On)),Jn("percent total")&&(On=o.formatPercent(Hn.sumR),mr&&(On+=" of total"),tr.push(On))}return tr.join("<br>")}(Zt,dn,St,Rt):l.getValue(ln.text,dn),l.coerceString(u,Xt)}(tn,nt,Ge,Dt,Gt);Ct=function(dr,Zt){var dn=l.getValue(dr.textposition,Zt);return l.coerceEnumerated(x,dn)}(Wt,Ge);var bn=kt.mode==="stack"||kt.mode==="relative",hn=nt[Ge],Kt=!bn||hn._outmost,sn=hn.hasB,Qt=Tt&&Tt-vt>m;if(Ln&&Ct!=="none"&&(!hn.isBlank&&ut!==pt&&gt!==ct||Ct!=="auto"&&Ct!=="inside")){var cn=tn.font,vn=a.getBarColor(nt[Ge],Wt),xn=a.getInsideTextFont(Wt,Ge,cn,vn),An=a.getOutsideTextFont(Wt,Ge,cn),Sn=Wt.insidetextanchor||"end",Tn=Fe.datum();Ft?Dt.type==="log"&&Tn.s0<=0&&(ut=Dt.range[0]<Dt.range[1]?0:Dt._length):Gt.type==="log"&&Tn.s0<=0&&(gt=Gt.range[0]<Gt.range[1]?Gt._length:0);var Rn,In,Xn,Vn,er,Wn=Math.abs(pt-ut),fr=Math.abs(ct-gt),Jt=Wn-2*m,en=fr-2*m;if(Ct==="outside"&&(Kt||hn.hasB||(Ct="inside")),Ct==="auto")if(Kt){Ct="inside",Rn=jt(Fe,Ln,er=o.ensureUniformFontSize(tt,xn)),Xn=(In=p.bBox(Rn.node())).width,Vn=In.height;var Mn,pn=Xn>0&&Vn>0;Mn=Qt?sn?w(Jt-2*Tt,en,Xn,Vn,Ft)||w(Jt,en-2*Tt,Xn,Vn,Ft):Ft?w(Jt-(Tt-vt),en,Xn,Vn,Ft)||w(Jt,en-2*(Tt-vt),Xn,Vn,Ft):w(Jt,en-(Tt-vt),Xn,Vn,Ft)||w(Jt-2*(Tt-vt),en,Xn,Vn,Ft):w(Jt,en,Xn,Vn,Ft),pn&&Mn?Ct="inside":(Ct="outside",Rn.remove(),Rn=null)}else Ct="inside";if(!Rn){var Cn=(Rn=jt(Fe,Ln,er=o.ensureUniformFontSize(tt,Ct==="outside"?An:xn))).attr("transform");if(Rn.attr("transform",""),Xn=(In=p.bBox(Rn.node())).width,Vn=In.height,Rn.attr("transform",Cn),Xn<=0||Vn<=0)return void Rn.remove()}var jn,Bn=Wt.textangle;jn=Ct==="outside"?function(dr,Zt,dn,St,Rt,Xt){var ln,un=!!Xt.isHorizontal,mn=!!Xt.constrained,rn=Xt.angle||0,qt=Rt.width,Ht=Rt.height,$t=Math.abs(Zt-dr),an=Math.abs(St-dn);ln=un?an>2*m?m:0:$t>2*m?m:0;var wn=1;mn&&(wn=un?Math.min(1,an/Ht):Math.min(1,$t/qt));var En=E(rn),On=P(Rt,En),Fn=(un?On.x:On.y)/2,$n=(Rt.left+Rt.right)/2,Hn=(Rt.top+Rt.bottom)/2,Kn=(dr+Zt)/2,tr=(dn+St)/2,Jn=0,hr=0,br=un?_(Zt,dr):_(dn,St);return un?(Kn=Zt-br*ln,Jn=br*Fn):(tr=St+br*ln,hr=-br*Fn),{textX:$n,textY:Hn,targetX:Kn,targetY:tr,anchorX:Jn,anchorY:hr,scale:wn,rotate:En}}(ut,pt,gt,ct,In,{isHorizontal:Ft,constrained:Wt.constraintext==="both"||Wt.constraintext==="outside",angle:Bn}):C(ut,pt,gt,ct,In,{isHorizontal:Ft,constrained:Wt.constraintext==="both"||Wt.constraintext==="inside",angle:Bn,anchor:Sn,hasB:sn,r:Tt,overhead:vt}),jn.fontSize=er.size,n(Wt.type==="histogram"?"bar":Wt.type,jn,tn),hn.transform=jn;var Yn=f(Rn,tn,kt,Lt);o.setTransormAndDisplay(Yn,jn)}else Fe.select("text").remove()})(O,R,be,Q,re,Me,Ie,Oe,he,it,mt,N,W),R.layerClipId&&p.hideOutsideRangePoint(oe,be.select("text"),F,j,K.xcalendar,K.ycalendar)});var me=K.cliponaxis===!1;p.setClipUrl(J,me?null:R.layerClipId,O)});s.getComponentMethod("errorbars","plot")(O,ee,R,N)},toMoveInsideBar:C}},45784:function(X){"use strict";function I(e,A,k,o,T){var b=A.c2p(o?e.s0:e.p0,!0),p=A.c2p(o?e.s1:e.p1,!0),s=k.c2p(o?e.p0:e.s0,!0),t=k.c2p(o?e.p1:e.s1,!0);return T?[(b+p)/2,(s+t)/2]:o?[p,(s+t)/2]:[(b+p)/2,t]}X.exports=function(e,A){var k,o=e.cd,T=e.xaxis,b=e.yaxis,p=o[0].trace,s=p.type==="funnel",t=p.orientation==="h",i=[];if(A===!1)for(k=0;k<o.length;k++)o[k].selected=0;else for(k=0;k<o.length;k++){var n=o[k],r="ct"in n?n.ct:I(n,T,b,t,s);A.contains(r,!1,k,e)?(i.push({pointNumber:k,x:T.c2d(n.x),y:b.c2d(n.y)}),n.selected=1):n.selected=0}return i}},72592:function(X,I,e){"use strict";X.exports=k;var A=e(3400).distinctVals;function k(o,T){this.traces=o,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,p=T.posAxis._id.charAt(0),s=[],t=0;t<o.length;t++){for(var i=o[t],n=0;n<i.length;n++){var r=i[n],a=r.p;a===void 0&&(a=r[p]),a!==void 0&&s.push(a)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=s;var l=A(s);this.distinctPositions=l.vals,l.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(l.minDiff,b);var c=(T.posAxis||{}).type;c!=="category"&&c!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(o,T){var b=this.getLabel(o,T),p=this.bins[b]||0;return this.bins[b]=p+T,p},k.prototype.get=function(o,T){var b=this.getLabel(o,T);return this.bins[b]||0},k.prototype.getLabel=function(o,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?o:Math.round(o/this.binWidth))}},60100:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(43616),T=e(3400),b=e(24040),p=e(82744).resizeText,s=e(20832),t=s.textfont,i=s.insidetextfont,n=s.outsidetextfont,r=e(60444);function a(g,y,v){o.pointStyle(g.selectAll("path"),y,v),l(g,y,v)}function l(g,y,v){g.selectAll("text").each(function(_){var f=A.select(this),S=T.ensureUniformFontSize(v,c(f,_,y,v));o.font(f,S)})}function c(g,y,v,_){var f=_._fullLayout.font,S=v.textfont;if(g.classed("bartext-inside")){var w=m(y,v);S=u(v,y.i,f,w)}else g.classed("bartext-outside")&&(S=x(v,y.i,f));return S}function h(g,y,v){return d(t,g.textfont,y,v)}function u(g,y,v,_){var f=h(g,y,v);return(g._input.textfont===void 0||g._input.textfont.color===void 0||Array.isArray(g.textfont.color)&&g.textfont.color[y]===void 0)&&(f={color:k.contrast(_),family:f.family,size:f.size,weight:f.weight,style:f.style,variant:f.variant,textcase:f.textcase,lineposition:f.lineposition,shadow:f.shadow}),d(i,g.insidetextfont,y,f)}function x(g,y,v){var _=h(g,y,v);return d(n,g.outsidetextfont,y,_)}function d(g,y,v,_){y=y||{};var f=r.getValue(y.family,v),S=r.getValue(y.size,v),w=r.getValue(y.color,v),E=r.getValue(y.weight,v),P=r.getValue(y.style,v),C=r.getValue(y.variant,v),O=r.getValue(y.textcase,v),R=r.getValue(y.lineposition,v),U=r.getValue(y.shadow,v);return{family:r.coerceString(g.family,f,_.family),size:r.coerceNumber(g.size,S,_.size),color:r.coerceColor(g.color,w,_.color),weight:r.coerceString(g.weight,E,_.weight),style:r.coerceString(g.style,P,_.style),variant:r.coerceString(g.variant,C,_.variant),textcase:r.coerceString(g.variant,O,_.textcase),lineposition:r.coerceString(g.variant,R,_.lineposition),shadow:r.coerceString(g.variant,U,_.shadow)}}function m(g,y){return y.type==="waterfall"?y[g.dir].marker.color:g.mcc||g.mc||y.marker.color}X.exports={style:function(g){var y=A.select(g).selectAll('g[class^="barlayer"]').selectAll("g.trace");p(g,y,"bar");var v=y.size(),_=g._fullLayout;y.style("opacity",function(f){return f[0].trace.opacity}).each(function(f){(_.barmode==="stack"&&v>1||_.bargap===0&&_.bargroupgap===0&&!f[0].trace.marker.line.width)&&A.select(this).attr("shape-rendering","crispEdges")}),y.selectAll("g.points").each(function(f){a(A.select(this),f[0].trace,g)}),b.getComponentMethod("errorbars","style")(y)},styleTextPoints:l,styleOnSelect:function(g,y,v){var _=y[0].trace;_.selectedpoints?function(f,S,w){o.selectedPointStyle(f.selectAll("path"),S),function(E,P,C){E.each(function(O){var R,U=A.select(this);if(O.selected){R=T.ensureUniformFontSize(C,c(U,O,P,C));var D=P.selected.textfont&&P.selected.textfont.color;D&&(R.color=D),o.font(U,R)}else o.selectedTextStyle(U,P)})}(f.selectAll("text"),S,w)}(v,_,g):(a(v,_,g),b.getComponentMethod("errorbars","style")(v))},getInsideTextFont:u,getOutsideTextFont:x,getBarColor:m,resizeText:p}},55592:function(X,I,e){"use strict";var A=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(3400).coercePattern;X.exports=function(b,p,s,t,i){var n=s("marker.color",t),r=k(b,"marker");r&&o(b,p,i,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",A.defaultLine),k(b,"marker.line")&&o(b,p,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",n,r),s("selected.marker.color"),s("unselected.marker.color")}},82744:function(X,I,e){"use strict";var A=e(33428),k=e(3400);function o(T){return"_"+T+"Text_minsize"}X.exports={recordMinTextSize:function(T,b,p){if(p.uniformtext.mode){var s=o(T),t=p.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<t,p[s]=p[s]||1/0,b.hide||(p[s]=Math.min(p[s],Math.max(i,t)))}},clearMinTextSize:function(T,b){b[o(T)]=void 0},resizeText:function(T,b,p){var s=T._fullLayout,t=s["_"+p+"Text_minsize"];if(t){var i,n=s.uniformtext.mode==="hide";switch(p){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(r){var a=r.transform;if(a){a.scale=n&&a.hide?0:t/a.fontSize;var l=A.select(this).select("text");k.setTransormAndDisplay(l,a)}})}}}},78100:function(X,I,e){"use strict";var A,k=e(21776).Ks,o=e(92880).extendFlat,T=e(8319),b=e(20832);X.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:o({},b.base,{}),offset:o({},b.offset,{}),width:o({},b.width,{}),text:o({},b.text,{}),hovertext:o({},b.hovertext,{}),marker:(A=o({},b.marker),delete A.cornerradius,A),hoverinfo:T.hoverinfo,hovertemplate:k(),selected:b.selected,unselected:b.unselected}},47056:function(X,I,e){"use strict";var A=e(94288).hasColorscale,k=e(47128),o=e(3400).isArrayOrTypedArray,T=e(84664),b=e(96376).setGroupPositions,p=e(4500),s=e(24040).traceIs,t=e(3400).extendFlat;X.exports={calc:function(i,n){for(var r=i._fullLayout,a=n.subplot,l=r[a].radialaxis,c=r[a].angularaxis,h=l.makeCalcdata(n,"r"),u=c.makeCalcdata(n,"theta"),x=n._length,d=new Array(x),m=h,g=u,y=0;y<x;y++)d[y]={p:g[y],s:m[y]};function v(_){var f=n[_];f!==void 0&&(n["_"+_]=o(f)?c.makeCalcdata(n,_):c.d2c(f,n.thetaunit))}return c.type==="linear"&&(v("width"),v("offset")),A(n,"marker")&&k(i,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),A(n,"marker.line")&&k(i,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(d,n),p(d,n),d},crossTraceCalc:function(i,n,r){for(var a=i.calcdata,l=[],c=0;c<a.length;c++){var h=a[c],u=h[0].trace;u.visible===!0&&s(u,"bar")&&u.subplot===r&&l.push(h)}var x=t({},n.radialaxis,{_id:"x"}),d=n.angularaxis;b(i,d,x,l,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},70384:function(X,I,e){"use strict";var A=e(3400),k=e(85968).handleRThetaDefaults,o=e(55592),T=e(78100);X.exports=function(b,p,s,t){function i(n,r){return A.coerce(b,p,T,n,r)}k(b,p,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),o(b,p,i,s,t),A.coerceSelectionMarkerOpacity(p,i)):p.visible=!1}},68896:function(X,I,e){"use strict";var A=e(93024),k=e(3400),o=e(63400).getTraceColor,T=k.fillText,b=e(8504).makeHoverPointText,p=e(57384).isPtInsidePolygon;X.exports=function(s,t,i){var n=s.cd,r=n[0].trace,a=s.subplot,l=a.radialAxis,c=a.angularAxis,h=a.vangles,u=h?p:k.isPtInsideSector,x=s.maxHoverDistance,d=c._period||2*Math.PI,m=Math.abs(l.g2p(Math.sqrt(t*t+i*i))),g=Math.atan2(i,t);if(l.range[0]>l.range[1]&&(g+=Math.PI),A.getClosest(n,function(_){return u(m,g,[_.rp0,_.rp1],[_.thetag0,_.thetag1],h)?x+Math.min(1,Math.abs(_.thetag1-_.thetag0)/d)-1+(_.rp1-m)/(_.rp1-_.rp0)-1:1/0},s),s.index!==!1){var y=n[s.index];s.x0=s.x1=y.ct[0],s.y0=s.y1=y.ct[1];var v=k.extendFlat({},y,{r:y.s,theta:y.p});return T(y,r,s),b(v,r,a,s),s.hovertemplate=r.hovertemplate,s.color=o(r,y),s.xLabelVal=s.yLabelVal=void 0,y.s<0&&(s.idealAlign="left"),[s]}}},94456:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(X){"use strict";X.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(X,I,e){"use strict";var A=e(3400),k=e(9320);X.exports=function(o,T,b){var p,s={};function t(r,a){return A.coerce(o[p]||{},T[p],k,r,a)}for(var i=0;i<b.length;i++){var n=b[i];n.type==="barpolar"&&n.visible===!0&&(s[p=n.subplot]||(t("barmode"),t("bargap"),s[p]=1))}}},42040:function(X,I,e){"use strict";var A=e(33428),k=e(38248),o=e(3400),T=e(43616),b=e(57384);X.exports=function(p,s,t){var i=p._context.staticPlot,n=s.xaxis,r=s.yaxis,a=s.radialAxis,l=s.angularAxis,c=function(u){var x=u.cxx,d=u.cyy;return u.vangles?function(m,g,y,v){var _,f;o.angleDelta(y,v)>0?(_=y,f=v):(_=v,f=y);var S=[b.findEnclosingVertexAngles(_,u.vangles)[0],(_+f)/2,b.findEnclosingVertexAngles(f,u.vangles)[1]];return b.pathPolygonAnnulus(m,g,_,f,S,x,d)}:function(m,g,y,v){return o.pathAnnulus(m,g,y,v,x,d)}}(s),h=s.layers.frontplot.select("g.barlayer");o.makeTraceGroups(h,t,"trace bars").each(function(){var u=A.select(this),x=o.ensureSingle(u,"g","points").selectAll("g.point").data(o.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(d){var m,g=A.select(this),y=d.rp0=a.c2p(d.s0),v=d.rp1=a.c2p(d.s1),_=d.thetag0=l.c2g(d.p0),f=d.thetag1=l.c2g(d.p1);if(k(y)&&k(v)&&k(_)&&k(f)&&y!==v&&_!==f){var S=a.c2g(d.s1),w=(_+f)/2;d.ct=[n.c2p(S*Math.cos(w)),r.c2p(S*Math.sin(w))],m=c(y,v,_,f)}else m="M0,0Z";o.ensureSingle(g,"path").attr("d",m)}),T.setClipUrl(u,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,p)})}},63188:function(X,I,e){"use strict";var A=e(98304),k=e(52904),o=e(20832),T=e(22548),b=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(92880).extendFlat,t=k.marker,i=t.line;X.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:s({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:s({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:s({},t.angle,{arrayOk:!1,editType:"calc"}),size:s({},t.size,{arrayOk:!1,editType:"calc"}),color:s({},t.color,{arrayOk:!1,editType:"style"}),line:{color:s({},i.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:s({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:s({},k.text,{}),hovertext:s({},k.hovertext,{}),hovertemplate:p({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:k.zorder}},62555:function(X,I,e){"use strict";var A=e(38248),k=e(54460),o=e(1220),T=e(3400),b=e(39032).BADNUM,p=T._;X.exports=function(u,x){var d,m,g,y,v,_,f,S=u._fullLayout,w=k.getFromId(u,x.xaxis||"x"),E=k.getFromId(u,x.yaxis||"y"),P=[],C=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(g=w,y="x",v=E,_="y",f=!!x.yperiodalignment):(g=E,y="y",v=w,_="x",f=!!x.xperiodalignment);var O,R,U,D,N,W,F=function(De,Le,Be,Ve){var Ze,rt=Le+"0"in De;if(Le in De||rt&&"d"+Le in De){var it=Be.makeCalcdata(De,Le);return[o(De,Be,Le,it).vals,it]}Ze=rt?De[Le+"0"]:"name"in De&&(Be.type==="category"||A(De.name)&&["linear","log"].indexOf(Be.type)!==-1||T.isDateTime(De.name)&&Be.type==="date")?De.name:Ve;for(var dt=Be.type==="multicategory"?Be.r2c_just_indices(Ze):Be.d2c(Ze,0,De[Le+"calendar"]),mt=De._length,ht=new Array(mt),Qe=0;Qe<mt;Qe++)ht[Qe]=dt;return[ht]}(x,_,v,S[C]),j=F[0],q=F[1],te=T.distinctVals(j,v),ee=te.vals,Q=te.minDiff/2,J=(x.boxpoints||x.points)==="all"?T.identity:function(De){return De.v<O.lf||De.v>O.uf};if(x._hasPreCompStats){var K=x[y],Y=function(De){return g.d2c((x[De]||[])[d])},ie=1/0,se=-1/0;for(d=0;d<x._length;d++){var ae=j[d];if(A(ae)){if((O={}).pos=O[_]=ae,f&&q&&(O.orig_p=q[d]),O.q1=Y("q1"),O.med=Y("median"),O.q3=Y("q3"),R=[],K&&T.isArrayOrTypedArray(K[d]))for(m=0;m<K[d].length;m++)(W=g.d2c(K[d][m]))!==b&&(t(N={v:W,i:[d,m]},x,[d,m]),R.push(N));if(O.pts=R.sort(i),D=(U=O[y]=R.map(n)).length,O.med!==b&&O.q1!==b&&O.q3!==b&&O.med>=O.q1&&O.q3>=O.med){var ue=Y("lowerfence");O.lf=ue!==b&&ue<=O.q1?ue:r(O,U,D);var ve=Y("upperfence");O.uf=ve!==b&&ve>=O.q3?ve:a(O,U,D);var ye=Y("mean");O.mean=ye!==b?ye:D?T.mean(U,D):(O.q1+O.q3)/2;var de=Y("sd");O.sd=ye!==b&&de>=0?de:D?T.stdev(U,D,O.mean):O.q3-O.q1,O.lo=l(O),O.uo=c(O);var pe=Y("notchspan");pe=pe!==b&&pe>0?pe:h(O,D),O.ln=O.med-pe,O.un=O.med+pe;var ge=O.lf,ke=O.uf;x.boxpoints&&U.length&&(ge=Math.min(ge,U[0]),ke=Math.max(ke,U[D-1])),x.notched&&(ge=Math.min(ge,O.ln),ke=Math.max(ke,O.un)),O.min=ge,O.max=ke}else{var Ee;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join(`
`)),Ee=O.med!==b?O.med:O.q1!==b?O.q3!==b?(O.q1+O.q3)/2:O.q1:O.q3!==b?O.q3:0,O.med=Ee,O.q1=O.q3=Ee,O.lf=O.uf=Ee,O.mean=O.sd=Ee,O.ln=O.un=Ee,O.min=O.max=Ee}ie=Math.min(ie,O.min),se=Math.max(se,O.max),O.pts2=R.filter(J),P.push(O)}}x._extremes[g._id]=k.findExtremes(g,[ie,se],{padded:!0})}else{var me=g.makeCalcdata(x,y),oe=function(De,Le){for(var Be=De.length,Ve=new Array(Be+1),Ze=0;Ze<Be;Ze++)Ve[Ze]=De[Ze]-Le;return Ve[Be]=De[Be-1]+Le,Ve}(ee,Q),re=ee.length,fe=function(De){for(var Le=new Array(De),Be=0;Be<De;Be++)Le[Be]=[];return Le}(re);for(d=0;d<x._length;d++)if(W=me[d],A(W)){var Se=T.findBin(j[d],oe);Se>=0&&Se<re&&(t(N={v:W,i:d},x,d),fe[Se].push(N))}var be=1/0,we=-1/0,Me=x.quartilemethod,Ie=Me==="exclusive",Oe=Me==="inclusive";for(d=0;d<re;d++)if(fe[d].length>0){var he,_e;(O={}).pos=O[_]=ee[d],R=O.pts=fe[d].sort(i),D=(U=O[y]=R.map(n)).length,O.min=U[0],O.max=U[D-1],O.mean=T.mean(U,D),O.sd=T.stdev(U,D,O.mean)*x.sdmultiple,O.med=T.interp(U,.5),D%2&&(Ie||Oe)?(Ie?(he=U.slice(0,D/2),_e=U.slice(D/2+1)):Oe&&(he=U.slice(0,D/2+1),_e=U.slice(D/2)),O.q1=T.interp(he,.5),O.q3=T.interp(_e,.5)):(O.q1=T.interp(U,.25),O.q3=T.interp(U,.75)),O.lf=r(O,U,D),O.uf=a(O,U,D),O.lo=l(O),O.uo=c(O);var Ae=h(O,D);O.ln=O.med-Ae,O.un=O.med+Ae,be=Math.min(be,O.ln),we=Math.max(we,O.un),O.pts2=R.filter(J),P.push(O)}x.notched&&T.isTypedArray(me)&&(me=Array.from(me)),x._extremes[g._id]=k.findExtremes(g,x.notched?me.concat([be,we]):me,{padded:!0})}return function(De,Le){if(T.isArrayOrTypedArray(Le.selectedpoints))for(var Be=0;Be<De.length;Be++){for(var Ve=De[Be].pts||[],Ze={},rt=0;rt<Ve.length;rt++)Ze[Ve[rt].i]=rt;T.tagSelected(Ve,Le,Ze)}}(P,x),P.length>0?(P[0].t={num:S[C],dPos:Q,posLetter:_,valLetter:y,labels:{med:p(u,"median:"),min:p(u,"min:"),q1:p(u,"q1:"),q3:p(u,"q3:"),max:p(u,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?p(u,"mean \xB1 \u03C3:").replace("\u03C3",x.sdmultiple===1?"\u03C3":x.sdmultiple+"\u03C3"):p(u,"mean:"),lf:p(u,"lower fence:"),uf:p(u,"upper fence:")}},S[C]++,P):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(u,x,d){for(var m in s)T.isArrayOrTypedArray(x[m])&&(Array.isArray(d)?T.isArrayOrTypedArray(x[m][d[0]])&&(u[s[m]]=x[m][d[0]][d[1]]):u[s[m]]=x[m][d])}function i(u,x){return u.v-x.v}function n(u){return u.v}function r(u,x,d){return d===0?u.q1:Math.min(u.q1,x[Math.min(T.findBin(2.5*u.q1-1.5*u.q3,x,!0)+1,d-1)])}function a(u,x,d){return d===0?u.q3:Math.max(u.q3,x[Math.max(T.findBin(2.5*u.q3-1.5*u.q1,x),0)])}function l(u){return 4*u.q1-3*u.q3}function c(u){return 4*u.q3-3*u.q1}function h(u,x){return x===0?0:1.57*(u.q3-u.q1)/Math.sqrt(x)}},96404:function(X,I,e){"use strict";var A=e(54460),k=e(3400),o=e(71888).getAxisGroup,T=["v","h"];function b(p,s,t,i){var n,r,a,l=s.calcdata,c=s._fullLayout,h=i._id,u=h.charAt(0),x=[],d=0;for(n=0;n<t.length;n++)for(a=l[t[n]],r=0;r<a.length;r++)x.push(i.c2l(a[r].pos,!0)),d+=(a[r].pts2||[]).length;if(x.length){var m=k.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(m.minDiff=1);var g=m.minDiff/2;A.minDtick(i,m.minDiff,m.vals[0],!0);var y=c[p==="violin"?"_numViolins":"_numBoxes"],v=c[p+"mode"]==="group"&&y>1,_=1-c[p+"gap"],f=1-c[p+"groupgap"];for(n=0;n<t.length;n++){var S,w,E,P,C,O,R=(a=l[t[n]])[0].trace,U=a[0].t,D=R.width,N=R.side;if(D)S=w=P=D/2,E=0;else if(S=g,v){var W=o(c,i._id)+R.orientation,F=(c._alignmentOpts[W]||{})[R.alignmentgroup]||{},j=Object.keys(F.offsetGroups||{}).length,q=j||y;w=S*_*f/q,E=2*S*(((j?R._offsetIndex:U.num)+.5)/q-.5)*_,P=S*_/q}else w=S*_*f,E=0,P=S;U.dPos=S,U.bPos=E,U.bdPos=w,U.wHover=P;var te,ee,Q,J,K,Y,ie=E+w,se=!!D;if(N==="positive"?(C=S*(D?1:.5),te=ie,O=te=E):N==="negative"?(C=te=E,O=S*(D?1:.5),ee=ie):(C=O=S,te=ee=ie),(R.boxpoints||R.points)&&d>0){var ae=R.pointpos,ue=R.jitter,ve=R.marker.size/2,ye=0;ae+ue>=0&&((ye=ie*(ae+ue))>C?(se=!0,K=ve,Q=ye):ye>te&&(K=ve,Q=C)),ye<=C&&(Q=C);var de=0;ae-ue<=0&&((de=-ie*(ae-ue))>O?(se=!0,Y=ve,J=de):de>ee&&(Y=ve,J=O)),de<=O&&(J=O)}else Q=C,J=O;var pe=new Array(a.length);for(r=0;r<a.length;r++)pe[r]=a[r].pos;R._extremes[h]=A.findExtremes(i,pe,{padded:se,vpadminus:J,vpadplus:Q,vpadLinearized:!0,ppadminus:{x:Y,y:K}[u],ppadplus:{x:K,y:Y}[u]})}}}X.exports={crossTraceCalc:function(p,s){for(var t=p.calcdata,i=s.xaxis,n=s.yaxis,r=0;r<T.length;r++){for(var a=T[r],l=a==="h"?n:i,c=[],h=0;h<t.length;h++){var u=t[h],x=u[0].t,d=u[0].trace;d.visible!==!0||d.type!=="box"&&d.type!=="candlestick"||x.empty||(d.orientation||"v")!==a||d.xaxis!==i._id||d.yaxis!==n._id||c.push(h)}b("box",p,c,l)}},setPositionOffset:b}},90624:function(X,I,e){"use strict";var A=e(3400),k=e(24040),o=e(76308),T=e(31147),b=e(20011),p=e(52976),s=e(63188);function t(n,r,a,l){function c(N){var W=0;return N&&N.length&&(W+=1,A.isArrayOrTypedArray(N[0])&&N[0].length&&(W+=1)),W}function h(N){return A.validate(n[N],s[N])}var u,x=a("y"),d=a("x");if(r.type==="box"){var m=a("q1"),g=a("median"),y=a("q3");r._hasPreCompStats=m&&m.length&&g&&g.length&&y&&y.length,u=Math.min(A.minRowLength(m),A.minRowLength(g),A.minRowLength(y))}var v,_,f=c(x),S=c(d),w=f&&A.minRowLength(x),E=S&&A.minRowLength(d),P=l.calendar,C={autotypenumbers:l.autotypenumbers};if(r._hasPreCompStats)switch(String(S)+String(f)){case"00":var O=h("x0")||h("dx");v=!h("y0")&&!h("dy")||O?"v":"h",_=u;break;case"10":v="v",_=Math.min(u,E);break;case"20":v="h",_=Math.min(u,d.length);break;case"01":v="h",_=Math.min(u,w);break;case"02":v="v",_=Math.min(u,x.length);break;case"12":v="v",_=Math.min(u,E,x.length);break;case"21":v="h",_=Math.min(u,d.length,w);break;case"11":_=0;break;case"22":var R,U=!1;for(R=0;R<d.length;R++)if(p(d[R],P,C)==="category"){U=!0;break}if(U)v="v",_=Math.min(u,E,x.length);else{for(R=0;R<x.length;R++)if(p(x[R],P,C)==="category"){U=!0;break}U?(v="h",_=Math.min(u,d.length,w)):(v="v",_=Math.min(u,E,x.length))}}else f>0?(v="v",_=S>0?Math.min(E,w):Math.min(w)):S>0?(v="h",_=Math.min(E)):_=0;if(_){r._length=_;var D=a("orientation",v);r._hasPreCompStats?D==="v"&&S===0?(a("x0",0),a("dx",1)):D==="h"&&f===0&&(a("y0",0),a("dy",1)):D==="v"&&S===0?a("x0"):D==="h"&&f===0&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],l)}else r.visible=!1}function i(n,r,a,l){var c=l.prefix,h=A.coerce2(n,r,s,"marker.outliercolor"),u=a("marker.line.outliercolor"),x="outliers";r._hasPreCompStats?x="all":(h||u)&&(x="suspectedoutliers");var d=a(c+"points",x);d?(a("jitter",d==="all"?.3:0),a("pointpos",d==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",r.line.color),a("marker.line.color"),a("marker.line.width"),d==="suspectedoutliers"&&(a("marker.line.outliercolor",r.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete r.marker;var m=a("hoveron");m!=="all"&&m.indexOf("points")===-1||a("hovertemplate"),A.coerceSelectionMarkerOpacity(r,a)}X.exports={supplyDefaults:function(n,r,a,l){function c(_,f){return A.coerce(n,r,s,_,f)}if(t(n,r,c,l),r.visible!==!1){T(n,r,l,c),c("xhoverformat"),c("yhoverformat");var h=r._hasPreCompStats;h&&(c("lowerfence"),c("upperfence")),c("line.color",(n.marker||{}).color||a),c("line.width"),c("fillcolor",o.addOpacity(r.line.color,.5));var u=!1;if(h){var x=c("mean"),d=c("sd");x&&x.length&&(u=!0,d&&d.length&&(u="sd"))}c("whiskerwidth");var m,g=c("sizemode");g==="quartiles"&&(m=c("boxmean",u)),c("showwhiskers",g==="quartiles"),g!=="sd"&&m!=="sd"||c("sdmultiple"),c("width"),c("quartilemethod");var y=!1;if(h){var v=c("notchspan");v&&v.length&&(y=!0)}else A.validate(n.notchwidth,s.notchwidth)&&(y=!0);c("notched",y)&&c("notchwidth"),i(n,r,c,{prefix:"box"}),c("zorder")}},crossTraceDefaults:function(n,r){var a,l;function c(x){return A.coerce(l._input,l,s,x)}for(var h=0;h<n.length;h++){var u=(l=n[h]).type;u!=="box"&&u!=="violin"||(a=l._input,r[u+"mode"]==="group"&&b(a,l,r,c))}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(X){"use strict";X.exports=function(I,e){return e.hoverOnBox&&(I.hoverOnBox=e.hoverOnBox),"xVal"in e&&(I.x=e.xVal),"yVal"in e&&(I.y=e.yVal),e.xa&&(I.xaxis=e.xa),e.ya&&(I.yaxis=e.ya),I}},27576:function(X,I,e){"use strict";var A=e(54460),k=e(3400),o=e(93024),T=e(76308),b=k.fillText;function p(t,i,n,r){var a,l,c,h,u,x,d,m,g,y,v,_,f,S,w=t.cd,E=t.xa,P=t.ya,C=w[0].trace,O=w[0].t,R=C.type==="violin",U=O.bdPos,D=O.wHover,N=function(Ee){return c.c2l(Ee.pos)+O.bPos-c.c2l(x)};R&&C.side!=="both"?(C.side==="positive"&&(g=function(Ee){var me=N(Ee);return o.inbox(me,me+D,y)},_=U,f=0),C.side==="negative"&&(g=function(Ee){var me=N(Ee);return o.inbox(me-D,me,y)},_=0,f=U)):(g=function(Ee){var me=N(Ee);return o.inbox(me-D,me+D,y)},_=f=U),S=R?function(Ee){return o.inbox(Ee.span[0]-u,Ee.span[1]-u,y)}:function(Ee){return o.inbox(Ee.min-u,Ee.max-u,y)},C.orientation==="h"?(u=i,x=n,d=S,m=g,a="y",c=P,l="x",h=E):(u=n,x=i,d=g,m=S,a="x",c=E,l="y",h=P);var W=Math.min(1,U/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function F(Ee){return(d(Ee)+m(Ee))/2}y=t.maxHoverDistance-W,v=t.maxSpikeDistance-W;var j=o.getDistanceFunction(r,d,m,F);if(o.getClosest(w,j,t),t.index===!1)return[];var q=w[t.index],te=C.line.color,ee=(C.marker||{}).color;T.opacity(te)&&C.line.width?t.color=te:T.opacity(ee)&&C.boxpoints?t.color=ee:t.color=C.fillcolor,t[a+"0"]=c.c2p(q.pos+O.bPos-f,!0),t[a+"1"]=c.c2p(q.pos+O.bPos+_,!0),t[a+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var Q=a+"Spike";t.spikeDistance=F(q)*v/y,t[Q]=c.c2p(q.pos,!0);var J=C.boxmean||C.sizemode==="sd"||(C.meanline||{}).visible,K=C.boxpoints||C.points,Y=K&&J?["max","uf","q3","med","mean","q1","lf","min"]:K&&!J?["max","uf","q3","med","q1","lf","min"]:!K&&J?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ie=h.range[1]<h.range[0];C.orientation===(ie?"v":"h")&&Y.reverse();for(var se=t.spikeDistance,ae=t[Q],ue=[],ve=0;ve<Y.length;ve++){var ye=Y[ve];if(ye in q){var de=q[ye],pe=h.c2p(de,!0),ge=k.extendFlat({},t);ge.attr=ye,ge[l+"0"]=ge[l+"1"]=pe,ge[l+"LabelVal"]=de,ge[l+"Label"]=(O.labels?O.labels[ye]+" ":"")+A.hoverLabelText(h,de,C[l+"hoverformat"]),ge.hoverOnBox=!0,ye!=="mean"||!("sd"in q)||C.boxmean!=="sd"&&C.sizemode!=="sd"||(ge[l+"err"]=q.sd),ge.hovertemplate=!1,ue.push(ge)}}t.name="",t.spikeDistance=void 0,t[Q]=void 0;for(var ke=0;ke<ue.length;ke++)ue[ke].attr!=="med"?(ue[ke].name="",ue[ke].spikeDistance=void 0,ue[ke][Q]=void 0):(ue[ke].spikeDistance=se,ue[ke][Q]=ae);return ue}function s(t,i,n){for(var r,a,l,c=t.cd,h=t.xa,u=t.ya,x=c[0].trace,d=h.c2p(i),m=u.c2p(n),g=o.quadrature(function(R){var U=Math.max(3,R.mrc||0);return Math.max(Math.abs(h.c2p(R.x)-d)-U,1-3/U)},function(R){var U=Math.max(3,R.mrc||0);return Math.max(Math.abs(u.c2p(R.y)-m)-U,1-3/U)}),y=!1,v=0;v<c.length;v++){a=c[v];for(var _=0;_<(a.pts||[]).length;_++){var f=g(l=a.pts[_]);f<=t.distance&&(t.distance=f,y=[v,_])}}if(!y)return!1;l=(a=c[y[0]]).pts[y[1]];var S=h.c2p(l.x,!0),w=u.c2p(l.y,!0),E=l.mrc||1;r=k.extendFlat({},t,{index:l.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var P,C=a.orig_p,O=C!==void 0?C:a.pos;return x.orientation==="h"?(P=u,r.xLabelVal=l.x,r.yLabelVal=O):(P=h,r.xLabelVal=O,r.yLabelVal=l.y),r[P._id.charAt(0)+"Spike"]=P.c2p(a.pos,!0),b(l,x,r),r}X.exports={hoverPoints:function(t,i,n,r){var a,l=t.cd[0].trace.hoveron,c=[];return l.indexOf("boxes")!==-1&&(c=c.concat(p(t,i,n,r))),l.indexOf("points")!==-1&&(a=s(t,i,n)),r==="closest"?a?[a]:c:(a&&c.push(a),c)},hoverOnBoxes:p,hoverOnPoints:s}},67244:function(X,I,e){"use strict";X.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(X){"use strict";X.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(16560);function T(b,p,s,t,i){for(var n=i+"Layout",r=!1,a=0;a<s.length;a++){var l=s[a];if(A.traceIs(l,n)){r=!0;break}}r&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}X.exports={supplyLayoutDefaults:function(b,p,s){T(0,0,s,function(t,i){return k.coerce(b,p,o,t,i)},"box")},_supply:T}},18728:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616);function T(s,t,i,n,r){var a,l,c=i.orientation==="h",h=t.val,u=t.pos,x=!!u.rangebreaks,d=n.bPos,m=n.wdPos||0,g=n.bPosPxOffset||0,y=i.whiskerwidth||0,v=i.showwhiskers!==!1,_=i.notched||!1,f=_?1-2*i.notchwidth:1;Array.isArray(n.bdPos)?(a=n.bdPos[0],l=n.bdPos[1]):(a=n.bdPos,l=n.bdPos);var S=s.selectAll("path.box").data(i.type!=="violin"||i.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return A.select(this).attr("d","M0,0Z");var E=u.c2l(w.pos+d,!0),P=u.l2p(E-a)+g,C=u.l2p(E+l)+g,O=x?(P+C)/2:u.l2p(E)+g,R=i.whiskerwidth,U=x?P*R+(1-R)*O:u.l2p(E-m)+g,D=x?C*R+(1-R)*O:u.l2p(E+m)+g,N=u.l2p(E-a*f)+g,W=u.l2p(E+l*f)+g,F=i.sizemode==="sd",j=h.c2p(F?w.mean-w.sd:w.q1,!0),q=F?h.c2p(w.mean+w.sd,!0):h.c2p(w.q3,!0),te=k.constrain(F?h.c2p(w.mean,!0):h.c2p(w.med,!0),Math.min(j,q)+1,Math.max(j,q)-1),ee=w.lf===void 0||i.boxpoints===!1||F,Q=h.c2p(ee?w.min:w.lf,!0),J=h.c2p(ee?w.max:w.uf,!0),K=h.c2p(w.ln,!0),Y=h.c2p(w.un,!0);c?A.select(this).attr("d","M"+te+","+N+"V"+W+"M"+j+","+P+"V"+C+(_?"H"+K+"L"+te+","+W+"L"+Y+","+C:"")+"H"+q+"V"+P+(_?"H"+Y+"L"+te+","+N+"L"+K+","+P:"")+"Z"+(v?"M"+j+","+O+"H"+Q+"M"+q+","+O+"H"+J+(y===0?"":"M"+Q+","+U+"V"+D+"M"+J+","+U+"V"+D):"")):A.select(this).attr("d","M"+N+","+te+"H"+W+"M"+P+","+j+"H"+C+(_?"V"+K+"L"+W+","+te+"L"+C+","+Y:"")+"V"+q+"H"+P+(_?"V"+Y+"L"+N+","+te+"L"+P+","+K:"")+"Z"+(v?"M"+O+","+j+"V"+Q+"M"+O+","+q+"V"+J+(y===0?"":"M"+U+","+Q+"H"+D+"M"+U+","+J+"H"+D):""))})}function b(s,t,i,n){var r=t.x,a=t.y,l=n.bdPos,c=n.bPos,h=i.boxpoints||i.points;k.seedPseudoRandom();var u=s.selectAll("g.points").data(h?function(d){return d.forEach(function(m){m.t=n,m.trace=i}),d}:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var x=u.selectAll("path").data(function(d){var m,g,y=d.pts2,v=Math.max((d.max-d.min)/10,d.q3-d.q1),_=1e-9*v,f=.01*v,S=[],w=0;if(i.jitter){if(v===0)for(w=1,S=new Array(y.length),m=0;m<y.length;m++)S[m]=1;else for(m=0;m<y.length;m++){var E=Math.max(0,m-5),P=y[E].v,C=Math.min(y.length-1,m+5),O=y[C].v;h!=="all"&&(y[m].v<d.lf?O=Math.min(O,d.lf):P=Math.max(P,d.uf));var R=Math.sqrt(f*(C-E)/(O-P+_))||0;R=k.constrain(Math.abs(R),0,1),S.push(R),w=Math.max(R,w)}g=2*i.jitter/(w||1)}for(m=0;m<y.length;m++){var U=y[m],D=U.v,N=i.jitter?g*S[m]*(k.pseudoRandom()-.5):0,W=d.pos+c+l*(i.pointpos+N);i.orientation==="h"?(U.y=W,U.x=D):(U.x=W,U.y=D),h==="suspectedoutliers"&&D<d.uo&&D>d.lo&&(U.so=!0)}return y});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(o.translatePoints,r,a)}function p(s,t,i,n){var r,a,l=t.val,c=t.pos,h=!!c.rangebreaks,u=n.bPos,x=n.bPosPxOffset||0,d=i.boxmean||(i.meanline||{}).visible;Array.isArray(n.bdPos)?(r=n.bdPos[0],a=n.bdPos[1]):(r=n.bdPos,a=n.bdPos);var m=s.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?k.identity:[]);m.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),m.exit().remove(),m.each(function(g){var y=c.c2l(g.pos+u,!0),v=c.l2p(y-r)+x,_=c.l2p(y+a)+x,f=h?(v+_)/2:c.l2p(y)+x,S=l.c2p(g.mean,!0),w=l.c2p(g.mean-g.sd,!0),E=l.c2p(g.mean+g.sd,!0);i.orientation==="h"?A.select(this).attr("d","M"+S+","+v+"V"+_+(d==="sd"?"m0,0L"+w+","+f+"L"+S+","+v+"L"+E+","+f+"Z":"")):A.select(this).attr("d","M"+v+","+S+"H"+_+(d==="sd"?"m0,0L"+f+","+w+"L"+v+","+S+"L"+f+","+E+"Z":""))})}X.exports={plot:function(s,t,i,n){var r=s._context.staticPlot,a=t.xaxis,l=t.yaxis;k.makeTraceGroups(n,i,"trace boxes").each(function(c){var h,u,x=A.select(this),d=c[0],m=d.t,g=d.trace;m.wdPos=m.bdPos*g.whiskerwidth,g.visible!==!0||m.empty?x.remove():(g.orientation==="h"?(h=l,u=a):(h=a,u=l),T(x,{pos:h,val:u},g,m,r),b(x,{x:a,y:l},g,m),p(x,{pos:h,val:u},g,m))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:p}},8264:function(X){"use strict";X.exports=function(I,e){var A,k,o=I.cd,T=I.xaxis,b=I.yaxis,p=[];if(e===!1)for(A=0;A<o.length;A++)for(k=0;k<(o[A].pts||[]).length;k++)o[A].pts[k].selected=0;else for(A=0;A<o.length;A++)for(k=0;k<(o[A].pts||[]).length;k++){var s=o[A].pts[k],t=T.c2p(s.x),i=b.c2p(s.y);e.contains([t,i],null,s.i,I)?(p.push({pointNumber:s.i,x:T.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return p}},25776:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(43616);X.exports={style:function(T,b,p){var s=p||A.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=A.select(this),n=t[0].trace,r=n.line.width;function a(h,u,x,d){h.style("stroke-width",u+"px").call(k.stroke,x).call(k.fill,d)}var l=i.selectAll("path.box");if(n.type==="candlestick")l.each(function(h){if(!h.empty){var u=A.select(this),x=n[h.dir];a(u,x.line.width,x.line.color,x.fillcolor),u.style("opacity",n.selectedpoints&&!h.selected?.3:1)}});else{a(l,r,n.line.color,n.fillcolor),i.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(k.stroke,n.line.color);var c=i.selectAll("path.point");o.pointStyle(c,n,T)}})},styleOnSelect:function(T,b,p){var s=b[0].trace,t=p.selectAll("path.point");s.selectedpoints?o.selectedPointStyle(t,s):o.pointStyle(t,s,T)}}},64216:function(X,I,e){"use strict";var A=e(3400).extendFlat,k=e(29736).axisHoverFormat,o=e(20279),T=e(63188);function b(p){return{line:{color:A({},T.line.color,{dflt:p}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}X.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:A({},T.line.width,{}),editType:"style"},increasing:b(o.increasing.line.color.dflt),decreasing:b(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:A({},T.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel,zorder:T.zorder}},46283:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(1220),T=e(42812).calcCommon;function b(p,s,t,i){return{min:t,q1:Math.min(p,i),med:i,q3:Math.max(p,i),max:s}}X.exports=function(p,s){var t=p._fullLayout,i=k.getFromId(p,s.xaxis),n=k.getFromId(p,s.yaxis),r=i.makeCalcdata(s,"x"),a=o(s,i,"x",r).vals,l=T(p,s,r,a,n,b);return l.length?(A.extendFlat(l[0].t,{num:t._numBoxes,dPos:A.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},64588:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(52744),T=e(31147),b=e(64216);function p(s,t,i,n){var r=i(n+".line.color");i(n+".line.width",t.line.width),i(n+".fillcolor",k.addOpacity(r,.5))}X.exports=function(s,t,i,n){function r(a,l){return A.coerce(s,t,b,a,l)}o(s,t,r,n)?(T(s,t,n,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),p(0,t,r,"increasing"),p(0,t,r,"decreasing"),r("text"),r("hovertext"),r("whiskerwidth"),n._requestRangeslider[t.xaxis]=!0,r("zorder")):t.visible=!1}},61712:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(X,I,e){"use strict";var A=e(63856),k=e(31780);X.exports=function(o,T,b,p,s){p("a")||(p("da"),p("a0")),p("b")||(p("db"),p("b0")),function(t,i,n,r){["aaxis","baxis"].forEach(function(a){var l=a.charAt(0),c=t[a]||{},h=k.newContainer(i,a),u={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:i.font,name:a,data:t[l],calendar:i.calendar,dfltColor:r,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};A(c,h,u),h._categories=h._categories||[],t[a]||c.type==="-"||(t[a]={type:c.type})})}(o,T,b,s)}},51676:function(X,I,e){"use strict";var A=e(3400).isArrayOrTypedArray;function k(o,T){if(!A(o)||T>=10)return null;for(var b=1/0,p=-1/0,s=o.length,t=0;t<s;t++){var i=o[t];if(A(i)){var n=k(i,T+1);n&&(b=Math.min(n[0],b),p=Math.max(n[1],p))}else b=Math.min(i,b),p=Math.max(i,p)}return[b,p]}X.exports=function(o){return k(o,0)}},85720:function(X,I,e){"use strict";var A=e(25376),k=e(98692),o=e(22548),T=A({editType:"calc"}),b=e(52904).zorder;T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=o.defaultLine,X.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0,zorder:b}},77712:function(X,I,e){"use strict";var A=e(3400).isArrayOrTypedArray;X.exports=function(k,o,T,b){var p,s,t,i,n,r,a,l,c,h,u,x,d,m=A(T)?"a":"b",g=(m==="a"?k.aaxis:k.baxis).smoothing,y=m==="a"?k.a2i:k.b2j,v=m==="a"?T:b,_=m==="a"?b:T,f=m==="a"?o.a.length:o.b.length,S=m==="a"?o.b.length:o.a.length,w=Math.floor(m==="a"?k.b2j(_):k.a2i(_)),E=m==="a"?function(te){return k.evalxy([],te,w)}:function(te){return k.evalxy([],w,te)};g&&(t=Math.max(0,Math.min(S-2,w)),i=w-t,s=m==="a"?function(te,ee){return k.dxydi([],te,t,ee,i)}:function(te,ee){return k.dxydj([],t,te,i,ee)});var P=y(v[0]),C=y(v[1]),O=P<C?1:-1,R=1e-8*(C-P),U=O>0?Math.floor:Math.ceil,D=O>0?Math.ceil:Math.floor,N=O>0?Math.min:Math.max,W=O>0?Math.max:Math.min,F=U(P+R),j=D(C-R),q=[[a=E(P)]];for(p=F;p*O<j*O;p+=O)n=[],u=W(P,p),d=(x=N(C,p+O))-u,r=Math.max(0,Math.min(f-2,Math.floor(.5*(u+x)))),l=E(x),g&&(c=s(r,u-r),h=s(r,x-r),n.push([a[0]+c[0]/3*d,a[1]+c[1]/3*d]),n.push([l[0]-h[0]/3*d,l[1]-h[1]/3*d])),n.push(l),q.push(n),a=l;return q}},98692:function(X,I,e){"use strict";var A=e(25376),k=e(22548),o=e(94724),T=e(29736).descriptionWithDates,b=e(67824).overrideAll,p=e(98192).u,s=e(92880).extendFlat;X.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:A({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},o.labelalias,{editType:"calc"}),tickfont:A({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},p,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},p,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:A({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(X,I,e){"use strict";var A=e(85720),k=e(76308).addOpacity,o=e(24040),T=e(3400),b=e(26332),p=e(95936),s=e(42568),t=e(22416),i=e(78344),n=e(52976);X.exports=function(r,a,l){var c=l.letter,h=l.font||{},u=A[c+"axis"];function x(O,R){return T.coerce(r,a,u,O,R)}function d(O,R){return T.coerce2(r,a,u,O,R)}l.name&&(a._name=l.name,a._id=l.name),x("autotypenumbers",l.autotypenumbersDflt);var m=x("type");m==="-"&&(l.data&&function(O,R){if(O.type==="-"){var U=O._id.charAt(0),D=O[U+"calendar"];O.type=n(R,D,{autotypenumbers:O.autotypenumbers})}}(a,l.data),a.type==="-"?a.type="linear":m=r.type=a.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",c+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),a.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),a._hovertitle=c,m==="date"&&o.getComponentMethod("calendars","handleDefaults")(r,a,"calendar",l.calendar),i(a,l.fullLayout),a.c2p=T.identity;var g=x("color",l.dfltColor),y=g===r.color?g:h.color;x("title.text")&&(T.coerceFont(x,"title.font",h,{overrideDflt:{size:T.bigFont(h.size),color:y}}),x("title.offset")),x("tickangle"),x("autorange",!a.isValidRange(r.range))&&x("rangemode"),x("range"),a.cleanRange(),x("fixedrange"),b(r,a,x,m),s(r,a,x,m,l),p(r,a,x,m,l),t(r,a,x,{data:l.data,dataAttr:c});var v=d("gridcolor",k(g,.3)),_=d("gridwidth"),f=d("griddash"),S=x("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var w=d("startlinecolor",g),E=d("startlinewidth",_);x("startline",a.showgrid||!!w||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var P=d("endlinecolor",g),C=d("endlinewidth",_);return x("endline",a.showgrid||!!P||!!C)||(delete a.endlinecolor,delete a.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",_),x("minorgriddash",f),x("minorgridcolor",k(v,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,x("tickmode"),a}},58744:function(X,I,e){"use strict";var A=e(54460),k=e(3400).isArray1D,o=e(60776),T=e(51676),b=e(19216),p=e(14724),s=e(24944),t=e(26136),i=e(51512),n=e(2872),r=e(81e3);X.exports=function(a,l){var c=A.getFromId(a,l.xaxis),h=A.getFromId(a,l.yaxis),u=l.aaxis,x=l.baxis,d=l.x,m=l.y,g=[];d&&k(d)&&g.push("x"),m&&k(m)&&g.push("y"),g.length&&n(l,u,x,"a","b",g);var y=l._a=l._a||l.a,v=l._b=l._b||l.b;d=l._x||l.x,m=l._y||l.y;var _={};if(l._cheater){var f=u.cheatertype==="index"?y.length:y,S=x.cheatertype==="index"?v.length:v;d=o(f,S,l.cheaterslope)}l._x=d=t(d),l._y=m=t(m),i(d,y,v),i(m,y,v),r(l),l.setScale();var w=T(d),E=T(m),P=.5*(w[1]-w[0]),C=.5*(w[1]+w[0]),O=.5*(E[1]-E[0]),R=.5*(E[1]+E[0]),U=1.3;return w=[C-P*U,C+P*U],E=[R-O*U,R+O*U],l._extremes[c._id]=A.findExtremes(c,w,{padded:!0}),l._extremes[h._id]=A.findExtremes(h,E,{padded:!0}),b(l,"a","b"),b(l,"b","a"),p(l,u),p(l,x),_.clipsegments=s(l._xctrl,l._yctrl,u,x),_.x=d,_.y=m,_.a=y,_.b=v,[_]}},24944:function(X){"use strict";X.exports=function(I,e,A,k){var o,T,b,p=[],s=!!A.smoothing,t=!!k.smoothing,i=I[0].length-1,n=I.length-1;for(o=0,T=[],b=[];o<=i;o++)T[o]=I[0][o],b[o]=e[0][o];for(p.push({x:T,y:b,bicubic:s}),o=0,T=[],b=[];o<=n;o++)T[o]=I[o][i],b[o]=e[o][i];for(p.push({x:T,y:b,bicubic:t}),o=i,T=[],b=[];o>=0;o--)T[i-o]=I[n][o],b[i-o]=e[n][o];for(p.push({x:T,y:b,bicubic:s}),o=n,T=[],b=[];o>=0;o--)T[n-o]=I[o][0],b[n-o]=e[o][0];return p.push({x:T,y:b,bicubic:t}),p}},19216:function(X,I,e){"use strict";var A=e(54460),k=e(92880).extendFlat;X.exports=function(o,T,b){var p,s,t,i,n,r,a,l,c,h,u,x,d,m,g=o["_"+T],y=o[T+"axis"],v=y._gridlines=[],_=y._minorgridlines=[],f=y._boundarylines=[],S=o["_"+b],w=o[b+"axis"];y.tickmode==="array"&&(y.tickvals=g.slice());var E=o._xctrl,P=o._yctrl,C=E[0].length,O=E.length,R=o._a.length,U=o._b.length;A.prepTicks(y),y.tickmode==="array"&&delete y.tickvals;var D=y.smoothing?3:1;function N(F){var j,q,te,ee,Q,J,K,Y,ie,se,ae,ue,ve=[],ye=[],de={};if(T==="b")for(q=o.b2j(F),te=Math.floor(Math.max(0,Math.min(U-2,q))),ee=q-te,de.length=U,de.crossLength=R,de.xy=function(pe){return o.evalxy([],pe,q)},de.dxy=function(pe,ge){return o.dxydi([],pe,te,ge,ee)},j=0;j<R;j++)J=Math.min(R-2,j),K=j-J,Y=o.evalxy([],j,q),w.smoothing&&j>0&&(ie=o.dxydi([],j-1,te,0,ee),ve.push(Q[0]+ie[0]/3),ye.push(Q[1]+ie[1]/3),se=o.dxydi([],j-1,te,1,ee),ve.push(Y[0]-se[0]/3),ye.push(Y[1]-se[1]/3)),ve.push(Y[0]),ye.push(Y[1]),Q=Y;else for(j=o.a2i(F),J=Math.floor(Math.max(0,Math.min(R-2,j))),K=j-J,de.length=R,de.crossLength=U,de.xy=function(pe){return o.evalxy([],j,pe)},de.dxy=function(pe,ge){return o.dxydj([],J,pe,K,ge)},q=0;q<U;q++)te=Math.min(U-2,q),ee=q-te,Y=o.evalxy([],j,q),w.smoothing&&q>0&&(ae=o.dxydj([],J,q-1,K,0),ve.push(Q[0]+ae[0]/3),ye.push(Q[1]+ae[1]/3),ue=o.dxydj([],J,q-1,K,1),ve.push(Y[0]-ue[0]/3),ye.push(Y[1]-ue[1]/3)),ve.push(Y[0]),ye.push(Y[1]),Q=Y;return de.axisLetter=T,de.axis=y,de.crossAxis=w,de.value=F,de.constvar=b,de.index=l,de.x=ve,de.y=ye,de.smoothing=w.smoothing,de}function W(F){var j,q,te,ee,Q,J=[],K=[],Y={};if(Y.length=g.length,Y.crossLength=S.length,T==="b")for(te=Math.max(0,Math.min(U-2,F)),Q=Math.min(1,Math.max(0,F-te)),Y.xy=function(ie){return o.evalxy([],ie,F)},Y.dxy=function(ie,se){return o.dxydi([],ie,te,se,Q)},j=0;j<C;j++)J[j]=E[F*D][j],K[j]=P[F*D][j];else for(q=Math.max(0,Math.min(R-2,F)),ee=Math.min(1,Math.max(0,F-q)),Y.xy=function(ie){return o.evalxy([],F,ie)},Y.dxy=function(ie,se){return o.dxydj([],q,ie,ee,se)},j=0;j<O;j++)J[j]=E[j][F*D],K[j]=P[j][F*D];return Y.axisLetter=T,Y.axis=y,Y.crossAxis=w,Y.value=g[F],Y.constvar=b,Y.index=F,Y.x=J,Y.y=K,Y.smoothing=w.smoothing,Y}if(y.tickmode==="array"){for(i=5e-15,r=(n=[Math.floor((g.length-1-y.arraytick0)/y.arraydtick*(1+i)),Math.ceil(-y.arraytick0/y.arraydtick/(1+i))].sort(function(F,j){return F-j}))[0]-1,a=n[1]+1,l=r;l<a;l++)(s=y.arraytick0+y.arraydtick*l)<0||s>g.length-1||v.push(k(W(s),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r;l<a;l++)if(t=y.arraytick0+y.arraydtick*l,u=Math.min(t+y.arraydtick,g.length-1),!(t<0||t>g.length-1||u<0||u>g.length-1))for(x=g[t],d=g[u],p=0;p<y.minorgridcount;p++)(m=u-t)<=0||(h=x+(d-x)*(p+1)/(y.minorgridcount+1)*(y.arraydtick/m))<g[0]||h>g[g.length-1]||_.push(k(N(h),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&f.push(k(W(0),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&f.push(k(W(g.length-1),{color:y.endlinecolor,width:y.endlinewidth}))}else{for(i=5e-15,r=(n=[Math.floor((g[g.length-1]-y.tick0)/y.dtick*(1+i)),Math.ceil((g[0]-y.tick0)/y.dtick/(1+i))].sort(function(F,j){return F-j}))[0],a=n[1],l=r;l<=a;l++)c=y.tick0+y.dtick*l,v.push(k(N(c),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r-1;l<a+1;l++)for(c=y.tick0+y.dtick*l,p=0;p<y.minorgridcount;p++)(h=c+y.dtick*(p+1)/(y.minorgridcount+1))<g[0]||h>g[g.length-1]||_.push(k(N(h),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&f.push(k(N(g[0]),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&f.push(k(N(g[g.length-1]),{color:y.endlinecolor,width:y.endlinewidth}))}}},14724:function(X,I,e){"use strict";var A=e(54460),k=e(92880).extendFlat;X.exports=function(o,T){var b,p,s,t=T._labels=[],i=T._gridlines;for(b=0;b<i.length;b++)s=i[b],["start","both"].indexOf(T.showticklabels)!==-1&&(p=A.tickText(T,s.value),k(p,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(p)),["end","both"].indexOf(T.showticklabels)!==-1&&(p=A.tickText(T,s.value),k(p,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(p))}},62284:function(X){"use strict";X.exports=function(I,e,A,k){var o=I[0]-e[0],T=I[1]-e[1],b=A[0]-e[0],p=A[1]-e[1],s=Math.pow(o*o+T*T,.25),t=Math.pow(b*b+p*p,.25),i=(t*t*o-s*s*b)*k,n=(t*t*T-s*s*p)*k,r=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(r&&i/r),e[1]+(r&&n/r)],[e[0]-(a&&i/a),e[1]-(a&&n/a)]]}},60776:function(X,I,e){"use strict";var A=e(3400).isArrayOrTypedArray;X.exports=function(k,o,T){var b,p,s,t,i,n,r=[],a=A(k)?k.length:k,l=A(o)?o.length:o,c=A(k)?k:null,h=A(o)?o:null;c&&(s=(c.length-1)/(c[c.length-1]-c[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(l-1));var u=1/0,x=-1/0;for(p=0;p<l;p++)for(r[p]=[],i=h?(h[p]-h[0])*t:p/(l-1),b=0;b<a;b++)n=(c?(c[b]-c[0])*s:b/(a-1))-i*T,u=Math.min(n,u),x=Math.max(n,x),r[p][b]=n;var d=1/(x-u),m=-u*d;for(p=0;p<l;p++)for(b=0;b<a;b++)r[p][b]=d*r[p][b]+m;return r}},30180:function(X,I,e){"use strict";var A=e(62284),k=e(3400).ensureArray;function o(T,b,p){var s=-.5*p[0]+1.5*b[0],t=-.5*p[1]+1.5*b[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}X.exports=function(T,b,p,s,t,i){var n,r,a,l,c,h,u,x,d,m,g=p[0].length,y=p.length,v=t?3*g-2:g,_=i?3*y-2:y;for(T=k(T,_),b=k(b,_),a=0;a<_;a++)T[a]=k(T[a],v),b[a]=k(b[a],v);for(r=0,l=0;r<y;r++,l+=i?3:1)for(c=T[l],h=b[l],u=p[r],x=s[r],n=0,a=0;n<g;n++,a+=t?3:1)c[a]=u[n],h[a]=x[n];if(t)for(r=0,l=0;r<y;r++,l+=i?3:1){for(n=1,a=3;n<g-1;n++,a+=3)d=A([p[r][n-1],s[r][n-1]],[p[r][n],s[r][n]],[p[r][n+1],s[r][n+1]],t),T[l][a-1]=d[0][0],b[l][a-1]=d[0][1],T[l][a+1]=d[1][0],b[l][a+1]=d[1][1];m=o([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=m[0],b[l][1]=m[1],m=o([T[l][v-1],b[l][v-1]],[T[l][v-3],b[l][v-3]],[T[l][v-4],b[l][v-4]]),T[l][v-2]=m[0],b[l][v-2]=m[1]}if(i)for(a=0;a<v;a++){for(l=3;l<_-3;l+=3)d=A([T[l-3][a],b[l-3][a]],[T[l][a],b[l][a]],[T[l+3][a],b[l+3][a]],i),T[l-1][a]=d[0][0],b[l-1][a]=d[0][1],T[l+1][a]=d[1][0],b[l+1][a]=d[1][1];m=o([T[0][a],b[0][a]],[T[2][a],b[2][a]],[T[3][a],b[3][a]]),T[1][a]=m[0],b[1][a]=m[1],m=o([T[_-1][a],b[_-1][a]],[T[_-3][a],b[_-3][a]],[T[_-4][a],b[_-4][a]]),T[_-2][a]=m[0],b[_-2][a]=m[1]}if(t&&i)for(l=1;l<_;l+=(l+1)%3==0?2:1){for(a=3;a<v-3;a+=3)d=A([T[l][a-3],b[l][a-3]],[T[l][a],b[l][a]],[T[l][a+3],b[l][a+3]],t),T[l][a-1]=.5*(T[l][a-1]+d[0][0]),b[l][a-1]=.5*(b[l][a-1]+d[0][1]),T[l][a+1]=.5*(T[l][a+1]+d[1][0]),b[l][a+1]=.5*(b[l][a+1]+d[1][1]);m=o([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=.5*(T[l][1]+m[0]),b[l][1]=.5*(b[l][1]+m[1]),m=o([T[l][v-1],b[l][v-1]],[T[l][v-3],b[l][v-3]],[T[l][v-4],b[l][v-4]]),T[l][v-2]=.5*(T[l][v-2]+m[0]),b[l][v-2]=.5*(b[l][v-2]+m[1])}return[T,b]}},24588:function(X){"use strict";X.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(X){"use strict";X.exports=function(I,e,A){return e&&A?function(k,o,T,b,p){var s,t,i,n,r,a;k||(k=[]),o*=3,T*=3;var l=b*b,c=1-b,h=c*c,u=c*b*2,x=-3*h,d=3*(h-u),m=3*(u-l),g=3*l,y=p*p,v=y*p,_=1-p,f=_*_,S=f*_;for(a=0;a<I.length;a++)s=x*(r=I[a])[T][o]+d*r[T][o+1]+m*r[T][o+2]+g*r[T][o+3],t=x*r[T+1][o]+d*r[T+1][o+1]+m*r[T+1][o+2]+g*r[T+1][o+3],i=x*r[T+2][o]+d*r[T+2][o+1]+m*r[T+2][o+2]+g*r[T+2][o+3],n=x*r[T+3][o]+d*r[T+3][o+1]+m*r[T+3][o+2]+g*r[T+3][o+3],k[a]=S*s+3*(f*p*t+_*y*i)+v*n;return k}:e?function(k,o,T,b,p){var s,t,i,n;k||(k=[]),o*=3;var r=b*b,a=1-b,l=a*a,c=a*b*2,h=-3*l,u=3*(l-c),x=3*(c-r),d=3*r,m=1-p;for(i=0;i<I.length;i++)s=h*(n=I[i])[T][o]+u*n[T][o+1]+x*n[T][o+2]+d*n[T][o+3],t=h*n[T+1][o]+u*n[T+1][o+1]+x*n[T+1][o+2]+d*n[T+1][o+3],k[i]=m*s+p*t;return k}:A?function(k,o,T,b,p){var s,t,i,n,r,a;k||(k=[]),T*=3;var l=p*p,c=l*p,h=1-p,u=h*h,x=u*h;for(r=0;r<I.length;r++)s=(a=I[r])[T][o+1]-a[T][o],t=a[T+1][o+1]-a[T+1][o],i=a[T+2][o+1]-a[T+2][o],n=a[T+3][o+1]-a[T+3][o],k[r]=x*s+3*(u*p*t+h*l*i)+c*n;return k}:function(k,o,T,b,p){var s,t,i,n;k||(k=[]);var r=1-p;for(i=0;i<I.length;i++)s=(n=I[i])[T][o+1]-n[T][o],t=n[T+1][o+1]-n[T+1][o],k[i]=r*s+p*t;return k}}},24464:function(X){"use strict";X.exports=function(I,e,A){return e&&A?function(k,o,T,b,p){var s,t,i,n,r,a;k||(k=[]),o*=3,T*=3;var l=b*b,c=l*b,h=1-b,u=h*h,x=u*h,d=p*p,m=1-p,g=m*m,y=m*p*2,v=-3*g,_=3*(g-y),f=3*(y-d),S=3*d;for(a=0;a<I.length;a++)s=v*(r=I[a])[T][o]+_*r[T+1][o]+f*r[T+2][o]+S*r[T+3][o],t=v*r[T][o+1]+_*r[T+1][o+1]+f*r[T+2][o+1]+S*r[T+3][o+1],i=v*r[T][o+2]+_*r[T+1][o+2]+f*r[T+2][o+2]+S*r[T+3][o+2],n=v*r[T][o+3]+_*r[T+1][o+3]+f*r[T+2][o+3]+S*r[T+3][o+3],k[a]=x*s+3*(u*b*t+h*l*i)+c*n;return k}:e?function(k,o,T,b,p){var s,t,i,n,r,a;k||(k=[]),o*=3;var l=p*p,c=l*p,h=1-p,u=h*h,x=u*h;for(r=0;r<I.length;r++)s=(a=I[r])[T+1][o]-a[T][o],t=a[T+1][o+1]-a[T][o+1],i=a[T+1][o+2]-a[T][o+2],n=a[T+1][o+3]-a[T][o+3],k[r]=x*s+3*(u*p*t+h*l*i)+c*n;return k}:A?function(k,o,T,b,p){var s,t,i,n;k||(k=[]),T*=3;var r=1-b,a=p*p,l=1-p,c=l*l,h=l*p*2,u=-3*c,x=3*(c-h),d=3*(h-a),m=3*a;for(i=0;i<I.length;i++)s=u*(n=I[i])[T][o]+x*n[T+1][o]+d*n[T+2][o]+m*n[T+3][o],t=u*n[T][o+1]+x*n[T+1][o+1]+d*n[T+2][o+1]+m*n[T+3][o+1],k[i]=r*s+b*t;return k}:function(k,o,T,b,p){var s,t,i,n;k||(k=[]);var r=1-b;for(i=0;i<I.length;i++)s=(n=I[i])[T+1][o]-n[T][o],t=n[T+1][o+1]-n[T][o+1],k[i]=r*s+b*t;return k}}},29056:function(X){"use strict";X.exports=function(I,e,A,k,o){var T=e-2,b=A-2;return k&&o?function(p,s,t){var i,n,r,a,l,c;p||(p=[]);var h=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),d=Math.max(0,Math.min(1,t-u));h*=3,u*=3;var m=x*x,g=m*x,y=1-x,v=y*y,_=v*y,f=d*d,S=f*d,w=1-d,E=w*w,P=E*w;for(c=0;c<I.length;c++)i=_*(l=I[c])[u][h]+3*(v*x*l[u][h+1]+y*m*l[u][h+2])+g*l[u][h+3],n=_*l[u+1][h]+3*(v*x*l[u+1][h+1]+y*m*l[u+1][h+2])+g*l[u+1][h+3],r=_*l[u+2][h]+3*(v*x*l[u+2][h+1]+y*m*l[u+2][h+2])+g*l[u+2][h+3],a=_*l[u+3][h]+3*(v*x*l[u+3][h+1]+y*m*l[u+3][h+2])+g*l[u+3][h+3],p[c]=P*i+3*(E*d*n+w*f*r)+S*a;return p}:k?function(p,s,t){p||(p=[]);var i,n,r,a,l,c,h=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),d=Math.max(0,Math.min(1,t-u));h*=3;var m=x*x,g=m*x,y=1-x,v=y*y,_=v*y,f=1-d;for(l=0;l<I.length;l++)i=f*(c=I[l])[u][h]+d*c[u+1][h],n=f*c[u][h+1]+d*c[u+1][h+1],r=f*c[u][h+2]+d*c[u+1][h+1],a=f*c[u][h+3]+d*c[u+1][h+1],p[l]=_*i+3*(v*x*n+y*m*r)+g*a;return p}:o?function(p,s,t){p||(p=[]);var i,n,r,a,l,c,h=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-h)),d=Math.max(0,Math.min(1,t-u));u*=3;var m=d*d,g=m*d,y=1-d,v=y*y,_=v*y,f=1-x;for(l=0;l<I.length;l++)i=f*(c=I[l])[u][h]+x*c[u][h+1],n=f*c[u+1][h]+x*c[u+1][h+1],r=f*c[u+2][h]+x*c[u+2][h+1],a=f*c[u+3][h]+x*c[u+3][h+1],p[l]=_*i+3*(v*d*n+y*m*r)+g*a;return p}:function(p,s,t){p||(p=[]);var i,n,r,a,l=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),h=Math.max(0,Math.min(1,s-l)),u=Math.max(0,Math.min(1,t-c)),x=1-u,d=1-h;for(r=0;r<I.length;r++)i=d*(a=I[r])[c][l]+h*a[c][l+1],n=d*a[c+1][l]+h*a[c+1][l+1],p[r]=x*i+u*n;return p}}},38356:function(X,I,e){"use strict";var A=e(3400),k=e(86411),o=e(93504),T=e(85720),b=e(22548);X.exports=function(p,s,t,i){function n(a,l){return A.coerce(p,s,T,a,l)}s._clipPathId="clip"+s.uid+"carpet";var r=n("color",b.defaultLine);A.coerceFont(n,"font",i.font),n("carpet"),o(p,s,i,n,r),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(p,s,n)||(s.visible=!1),s._cheater&&n("cheaterslope"),n("zorder")):s.visible=!1}},95856:function(X,I,e){"use strict";X.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(X){"use strict";X.exports=function(I,e){for(var A,k=I._fullData.length,o=0;o<k;o++){var T=I._fullData[o];if(T.index!==e.index&&T.type==="carpet"&&(A||(A=T),T.carpet===e.carpet))return T}return A}},53416:function(X){"use strict";X.exports=function(I,e,A){if(I.length===0)return"";var k,o=[],T=A?3:1;for(k=0;k<I.length;k+=T)o.push(I[k]+","+e[k]),A&&k<I.length-T&&(o.push("C"),o.push([I[k+1]+","+e[k+1],I[k+2]+","+e[k+2]+" "].join(" ")));return o.join(A?"":"L")}},87072:function(X,I,e){"use strict";var A=e(3400).isArrayOrTypedArray;X.exports=function(k,o,T){var b;for(A(k)?k.length>o.length&&(k=k.slice(0,o.length)):k=[],b=0;b<o.length;b++)k[b]=T(o[b]);return k}},15584:function(X){"use strict";X.exports=function(I,e,A,k,o,T){var b=o[0]*I.dpdx(e),p=o[1]*I.dpdy(A),s=1,t=1;if(T){var i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),n=Math.sqrt(T[0]*T[0]+T[1]*T[1]),r=(o[0]*T[0]+o[1]*T[1])/i/n;t=Math.max(0,r)}var a=180*Math.atan2(p,b)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:I.c2p(k,e,A),offsetMultplier:t}}},164:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(87072),T=e(53416),b=e(15584),p=e(72736),s=e(3400),t=s.strRotate,i=s.strTranslate,n=e(84284);function r(u,x,d,m,g,y,v){var _="const-"+g+"-lines",f=d.selectAll("."+_).data(y);f.enter().append("path").classed(_,!0).style("vector-effect",v?"none":"non-scaling-stroke"),f.each(function(S){var w=S,E=w.x,P=w.y,C=o([],E,u.c2p),O=o([],P,x.c2p),R="M"+T(C,O,w.smoothing);A.select(this).attr("d",R).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),f.exit().remove()}function a(u,x,d,m,g,y,v,_){var f=y.selectAll("text."+_).data(v);f.enter().append("text").classed(_,!0);var S=0,w={};return f.each(function(E,P){var C;if(E.axis.tickangle==="auto")C=b(m,x,d,E.xy,E.dxy);else{var O=(E.axis.tickangle+180)*Math.PI/180;C=b(m,x,d,E.xy,[Math.cos(O),Math.sin(O)])}P||(w={angle:C.angle,flip:C.flip});var R=(E.endAnchor?-1:1)*C.flip,U=A.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(p.convertToTspans,u),D=k.bBox(this);U.attr("transform",i(C.p[0],C.p[1])+t(C.angle)+i(E.axis.labelpadding*R,.3*D.height)),S=Math.max(S,D.width+E.axis.labelpadding)}),f.exit().remove(),w.maxExtent=S,w}X.exports=function(u,x,d,m){var g=u._context.staticPlot,y=x.xaxis,v=x.yaxis,_=u._fullLayout._clips;s.makeTraceGroups(m,d,"trace").each(function(f){var S=A.select(this),w=f[0],E=w.trace,P=E.aaxis,C=E.baxis,O=s.ensureSingle(S,"g","minorlayer"),R=s.ensureSingle(S,"g","majorlayer"),U=s.ensureSingle(S,"g","boundarylayer"),D=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),r(y,v,R,0,"a",P._gridlines,!0),r(y,v,R,0,"b",C._gridlines,!0),r(y,v,O,0,"a",P._minorgridlines,!0),r(y,v,O,0,"b",C._minorgridlines,!0),r(y,v,U,0,"a-boundary",P._boundarylines,g),r(y,v,U,0,"b-boundary",C._boundarylines,g);var N=a(u,y,v,E,0,D,P._labels,"a-label"),W=a(u,y,v,E,0,D,C._labels,"b-label");(function(F,j,q,te,ee,Q,J,K){var Y,ie,se,ae,ue=s.aggNums(Math.min,null,q.a),ve=s.aggNums(Math.max,null,q.a),ye=s.aggNums(Math.min,null,q.b),de=s.aggNums(Math.max,null,q.b);Y=.5*(ue+ve),ie=ye,se=q.ab2xy(Y,ie,!0),ae=q.dxyda_rough(Y,ie),J.angle===void 0&&s.extendFlat(J,b(q,ee,Q,se,q.dxydb_rough(Y,ie))),h(F,j,q,0,se,ae,q.aaxis,ee,Q,J,"a-title"),Y=ue,ie=.5*(ye+de),se=q.ab2xy(Y,ie,!0),ae=q.dxydb_rough(Y,ie),K.angle===void 0&&s.extendFlat(K,b(q,ee,Q,se,q.dxyda_rough(Y,ie))),h(F,j,q,0,se,ae,q.baxis,ee,Q,K,"b-title")})(u,D,E,0,y,v,N,W),function(F,j,q,te,ee){var Q,J,K,Y,ie=q.select("#"+F._clipPathId);ie.size()||(ie=q.append("clipPath").classed("carpetclip",!0));var se=s.ensureSingle(ie,"path","carpetboundary"),ae=j.clipsegments,ue=[];for(Y=0;Y<ae.length;Y++)Q=ae[Y],J=o([],Q.x,te.c2p),K=o([],Q.y,ee.c2p),ue.push(T(J,K,Q.bicubic));var ve="M"+ue.join("L")+"Z";ie.attr("id",F._clipPathId),se.attr("d",ve)}(E,w,_,y,v)})};var l=n.LINE_SPACING,c=(1-n.MID_SHIFT)/l+1;function h(u,x,d,m,g,y,v,_,f,S,w){var E=[];v.title.text&&E.push(v.title.text);var P=x.selectAll("text."+w).data(E),C=S.maxExtent;P.enter().append("text").classed(w,!0),P.each(function(){var O=b(d,_,f,g,y);["start","both"].indexOf(v.showticklabels)===-1&&(C=0);var R=v.title.font.size;C+=R+v.title.offset;var U=(S.angle+(S.flip<0?180:0)-O.angle+450)%360,D=U>90&&U<270,N=A.select(this);N.text(v.title.text).call(p.convertToTspans,u),D&&(C=(-p.lineCount(N)+c)*l*R-C),N.attr("transform",i(O.p[0],O.p[1])+t(O.angle)+i(0,C)).attr("text-anchor","middle").call(k.font,v.title.font)}),P.exit().remove()}},81e3:function(X,I,e){"use strict";var A=e(24588),k=e(14952).findBin,o=e(30180),T=e(29056),b=e(26435),p=e(24464);X.exports=function(s){var t=s._a,i=s._b,n=t.length,r=i.length,a=s.aaxis,l=s.baxis,c=t[0],h=t[n-1],u=i[0],x=i[r-1],d=t[t.length-1]-t[0],m=i[i.length-1]-i[0],g=d*A.RELATIVE_CULL_TOLERANCE,y=m*A.RELATIVE_CULL_TOLERANCE;c-=g,h+=g,u-=y,x+=y,s.isVisible=function(v,_){return v>c&&v<h&&_>u&&_<x},s.isOccluded=function(v,_){return v<c||v>h||_<u||_>x},s.setScale=function(){var v=s._x,_=s._y,f=o(s._xctrl,s._yctrl,v,_,a.smoothing,l.smoothing);s._xctrl=f[0],s._yctrl=f[1],s.evalxy=T([s._xctrl,s._yctrl],n,r,a.smoothing,l.smoothing),s.dxydi=b([s._xctrl,s._yctrl],a.smoothing,l.smoothing),s.dxydj=p([s._xctrl,s._yctrl],a.smoothing,l.smoothing)},s.i2a=function(v){var _=Math.max(0,Math.floor(v[0]),n-2),f=v[0]-_;return(1-f)*t[_]+f*t[_+1]},s.j2b=function(v){var _=Math.max(0,Math.floor(v[1]),n-2),f=v[1]-_;return(1-f)*i[_]+f*i[_+1]},s.ij2ab=function(v){return[s.i2a(v[0]),s.j2b(v[1])]},s.a2i=function(v){var _=Math.max(0,Math.min(k(v,t),n-2)),f=t[_],S=t[_+1];return Math.max(0,Math.min(n-1,_+(v-f)/(S-f)))},s.b2j=function(v){var _=Math.max(0,Math.min(k(v,i),r-2)),f=i[_],S=i[_+1];return Math.max(0,Math.min(r-1,_+(v-f)/(S-f)))},s.ab2ij=function(v){return[s.a2i(v[0]),s.b2j(v[1])]},s.i2c=function(v,_){return s.evalxy([],v,_)},s.ab2xy=function(v,_,f){if(!f&&(v<t[0]||v>t[n-1]|_<i[0]||_>i[r-1]))return[!1,!1];var S=s.a2i(v),w=s.b2j(_),E=s.evalxy([],S,w);if(f){var P,C,O,R,U=0,D=0,N=[];v<t[0]?(P=0,C=0,U=(v-t[0])/(t[1]-t[0])):v>t[n-1]?(P=n-2,C=1,U=(v-t[n-1])/(t[n-1]-t[n-2])):C=S-(P=Math.max(0,Math.min(n-2,Math.floor(S)))),_<i[0]?(O=0,R=0,D=(_-i[0])/(i[1]-i[0])):_>i[r-1]?(O=r-2,R=1,D=(_-i[r-1])/(i[r-1]-i[r-2])):R=w-(O=Math.max(0,Math.min(r-2,Math.floor(w)))),U&&(s.dxydi(N,P,O,C,R),E[0]+=N[0]*U,E[1]+=N[1]*U),D&&(s.dxydj(N,P,O,C,R),E[0]+=N[0]*D,E[1]+=N[1]*D)}return E},s.c2p=function(v,_,f){return[_.c2p(v[0]),f.c2p(v[1])]},s.p2x=function(v,_,f){return[_.p2c(v[0]),f.p2c(v[1])]},s.dadi=function(v){var _=Math.max(0,Math.min(t.length-2,v));return t[_+1]-t[_]},s.dbdj=function(v){var _=Math.max(0,Math.min(i.length-2,v));return i[_+1]-i[_]},s.dxyda=function(v,_,f,S){var w=s.dxydi(null,v,_,f,S),E=s.dadi(v,f);return[w[0]/E,w[1]/E]},s.dxydb=function(v,_,f,S){var w=s.dxydj(null,v,_,f,S),E=s.dbdj(_,S);return[w[0]/E,w[1]/E]},s.dxyda_rough=function(v,_,f){var S=d*(f||.1),w=s.ab2xy(v+S,_,!0),E=s.ab2xy(v-S,_,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dxydb_rough=function(v,_,f){var S=m*(f||.1),w=s.ab2xy(v,_+S,!0),E=s.ab2xy(v,_-S,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dpdx=function(v){return v._m},s.dpdy=function(v){return v._m}}},51512:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o,T){var b,p,s,t=[],i=[],n=k[0].length,r=k.length;function a(F,j){var q,te=0,ee=0;return F>0&&(q=k[j][F-1])!==void 0&&(ee++,te+=q),F<n-1&&(q=k[j][F+1])!==void 0&&(ee++,te+=q),j>0&&(q=k[j-1][F])!==void 0&&(ee++,te+=q),j<r-1&&(q=k[j+1][F])!==void 0&&(ee++,te+=q),te/Math.max(1,ee)}var l,c,h,u,x,d,m,g,y,v,_,f=0;for(b=0;b<n;b++)for(p=0;p<r;p++)k[p][b]===void 0&&(t.push(b),i.push(p),k[p][b]=a(b,p)),f=Math.max(f,Math.abs(k[p][b]));if(!t.length)return k;var S=0,w=0,E=t.length;do{for(S=0,s=0;s<E;s++){b=t[s],p=i[s];var P,C,O,R,U,D,N=0,W=0;b===0?(O=o[U=Math.min(n-1,2)],R=o[1],P=k[p][U],W+=(C=k[p][1])+(C-P)*(o[0]-R)/(R-O),N++):b===n-1&&(O=o[U=Math.max(0,n-3)],R=o[n-2],P=k[p][U],W+=(C=k[p][n-2])+(C-P)*(o[n-1]-R)/(R-O),N++),(b===0||b===n-1)&&p>0&&p<r-1&&(l=T[p+1]-T[p],W+=((c=T[p]-T[p-1])*k[p+1][b]+l*k[p-1][b])/(c+l),N++),p===0?(O=T[D=Math.min(r-1,2)],R=T[1],P=k[D][b],W+=(C=k[1][b])+(C-P)*(T[0]-R)/(R-O),N++):p===r-1&&(O=T[D=Math.max(0,r-3)],R=T[r-2],P=k[D][b],W+=(C=k[r-2][b])+(C-P)*(T[r-1]-R)/(R-O),N++),(p===0||p===r-1)&&b>0&&b<n-1&&(l=o[b+1]-o[b],W+=((c=o[b]-o[b-1])*k[p][b+1]+l*k[p][b-1])/(c+l),N++),N?W/=N:(h=o[b+1]-o[b],u=o[b]-o[b-1],g=(x=T[p+1]-T[p])*(d=T[p]-T[p-1])*(x+d),W=((m=h*u*(h+u))*(d*k[p+1][b]+x*k[p-1][b])+g*(u*k[p][b+1]+h*k[p][b-1]))/(g*(u+h)+m*(d+x))),S+=(v=(y=W-k[p][b])/f)*v,_=N?0:.85,k[p][b]+=y*(1+_)}S=Math.sqrt(S)}while(w++<100&&S>1e-5);return A.log("Smoother converged to",S,"after",w,"iterations"),k}},86411:function(X,I,e){"use strict";var A=e(3400).isArray1D;X.exports=function(k,o,T){var b=T("x"),p=b&&b.length,s=T("y"),t=s&&s.length;if(!p&&!t)return!1;if(o._cheater=!b,p&&!A(b)||t&&!A(s))o._length=null;else{var i=p?b.length:1/0;t&&(i=Math.min(i,s.length)),o.a&&o.a.length&&(i=Math.min(i,o.a.length)),o.b&&o.b.length&&(i=Math.min(i,o.b.length)),o._length=i}return!0}},83372:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(6096),o=e(49084),T=e(45464),b=e(22548).defaultLine,p=e(92880).extendFlat,s=k.marker.line;X.exports=p({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:p({},k.geojson,{}),featureidkey:k.featureidkey,text:p({},k.text,{}),hovertext:p({},k.hovertext,{}),marker:{line:{color:p({},s.color,{dflt:b}),width:p({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:p({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:A(),showlegend:p({},T.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(X,I,e){"use strict";var A=e(38248),k=e(39032).BADNUM,o=e(47128),T=e(20148),b=e(4500);function p(s){return s&&typeof s=="string"}X.exports=function(s,t){var i,n=t._length,r=new Array(n);i=t.geojson?function(u){return p(u)||A(u)}:p;for(var a=0;a<n;a++){var l=r[a]={},c=t.locations[a],h=t.z[a];i(c)&&A(h)?(l.loc=c,l.z=h):(l.loc=null,l.z=k),l.index=a}return T(r,t),o(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(r,t),r}},30972:function(X,I,e){"use strict";var A=e(3400),k=e(27260),o=e(83372);X.exports=function(T,b,p,s){function t(l,c){return A.coerce(T,b,o,l,c)}var i=t("locations"),n=t("z");if(i&&i.length&&A.isArrayOrTypedArray(n)&&n.length){b._length=Math.min(i.length,n.length);var r,a=t("geojson");(typeof a=="string"&&a!==""||A.isPlainObject(a))&&(r="geojson-id"),t("locationmode",r)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},52428:function(X){"use strict";X.exports=function(I,e,A,k,o){I.location=e.location,I.z=e.z;var T=k[o];return T.fIn&&T.fIn.properties&&(I.properties=T.fIn.properties),I.ct=T.ct,I}},69224:function(X,I,e){"use strict";var A=e(54460),k=e(83372),o=e(3400).fillText;X.exports=function(T,b,p){var s,t,i,n,r=T.cd,a=r[0].trace,l=T.subplot,c=[b,p],h=[b+360,p];for(t=0;t<r.length;t++)if(n=!1,(s=r[t])._polygons){for(i=0;i<s._polygons.length;i++)s._polygons[i].contains(c)&&(n=!n),s._polygons[i].contains(h)&&(n=!n);if(n)break}if(n&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=A.tickText(l.mockAxis,l.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(u,x,d){if(!x.hovertemplate){var m=d.hi||x.hoverinfo,g=String(d.loc),y=m==="all"?k.hoverinfo.flags:m.split("+"),v=y.indexOf("name")!==-1,_=y.indexOf("location")!==-1,f=y.indexOf("z")!==-1,S=y.indexOf("text")!==-1,w=[];!v&&_?u.nameOverride=g:(v&&(u.nameOverride=x.name),_&&w.push(g)),f&&w.push(u.zLabel),S&&o(d,x,w),u.extraText=w.join("<br>")}}(T,a,s),[T]}},54272:function(X,I,e){"use strict";X.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(27144),T=e(59972).getTopojsonFeatures,b=e(19280).findExtremes,p=e(7947).style;X.exports={calcGeoJSON:function(s,t){for(var i=s[0].trace,n=t[i.geo],r=n._subplot,a=i.locationmode,l=i._length,c=a==="geojson-id"?o.extractTraceFeature(s):T(i,r.topojson),h=[],u=[],x=0;x<l;x++){var d=s[x],m=a==="geojson-id"?d.fOut:o.locationToFeature(a,d.loc,c);if(m){d.geojson=m,d.ct=m.properties.ct,d._polygons=o.feature2polygons(m);var g=o.computeBbox(m);h.push(g[0],g[2]),u.push(g[1],g[3])}else d.geojson=null}if(n.fitbounds==="geojson"&&a==="geojson-id"){var y=o.computeBbox(o.getTraceGeojson(i));h=[y[0],y[2]],u=[y[1],y[3]]}var v={padded:!0};i._extremes.lon=b(n.lonaxis._ax,h,v),i._extremes.lat=b(n.lataxis._ax,u,v)},plot:function(s,t,i){var n=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(n,i,"trace choropleth").each(function(r){var a=A.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),p(s,r)})}}},17328:function(X){"use strict";X.exports=function(I,e){var A,k,o,T,b,p=I.cd,s=I.xaxis,t=I.yaxis,i=[];if(e===!1)for(A=0;A<p.length;A++)p[A].selected=0;else for(A=0;A<p.length;A++)(o=(k=p[A]).ct)&&(T=s.c2p(o),b=t.c2p(o),e.contains([T,b],null,A,I)?(i.push({pointNumber:A,lon:o[0],lat:o[1]}),k.selected=1):k.selected=0);return i}},7947:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(43616),T=e(8932);function b(p,s){var t=s[0].trace,i=s[0].node3.selectAll(".choroplethlocation"),n=t.marker||{},r=n.line||{},a=T.makeColorScaleFuncFromTrace(t);i.each(function(l){A.select(this).attr("fill",a(l.z)).call(k.stroke,l.mlc||r.color).call(o.dashLine,"",l.mlw||r.width||0).style("opacity",n.opacity)}),o.selectedPointStyle(i,t)}X.exports={style:function(p,s){s&&b(0,s)},styleOnSelect:function(p,s){var t=s[0].node3,i=s[0].trace;i.selectedpoints?o.selectedPointStyle(t.selectAll(".choroplethlocation"),i):b(0,s)}}},45608:function(X,I,e){"use strict";var A=e(83372),k=e(49084),o=e(21776).Ks,T=e(45464),b=e(92880).extendFlat;X.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},A.featureidkey,{}),below:{valType:"string",editType:"plot"},text:A.text,hovertext:A.hovertext,marker:{line:{color:b({},A.marker.line.color,{editType:"plot"}),width:b({},A.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},A.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},A.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},A.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:A.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(8932),T=e(43616),b=e(44808).makeBlank,p=e(27144);function s(t){var i,n=t[0].trace,r=n._opts;if(n.selectedpoints){for(var a=T.makeSelectedPointStyleFns(n),l=0;l<t.length;l++){var c=t[l];c.fOut&&(c.fOut.properties.mo2=a.selectedOpacityFn(c))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(n.marker.opacity)?{type:"identity",property:"mo"}:n.marker.opacity;return k.extendFlat(r.fill.paint,{"fill-opacity":i}),k.extendFlat(r.line.paint,{"line-opacity":i}),r}X.exports={convert:function(t){var i=t[0].trace,n=i.visible===!0&&i._length!==0,r={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},l=i._opts={fill:r,line:a,geojson:b()};if(!n)return l;var c=p.extractTraceFeature(t);if(!c)return l;var h,u,x,d=o.makeColorScaleFuncFromTrace(i),m=i.marker,g=m.line||{};k.isArrayOrTypedArray(m.opacity)&&(h=function(w){var E=w.mo;return A(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(g.color)&&(u=function(w){return w.mlc}),k.isArrayOrTypedArray(g.width)&&(x=function(w){return w.mlw});for(var y=0;y<t.length;y++){var v=t[y],_=v.fOut;if(_){var f=_.properties;f.fc=d(v.z),h&&(f.mo=h(v)),u&&(f.mlc=u(v)),x&&(f.mlw=x(v)),v.ct=f.ct,v._polygons=p.feature2polygons(_)}}var S=h?{type:"identity",property:"mo"}:m.opacity;return k.extendFlat(r.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(a.paint,{"line-color":u?{type:"identity",property:"mlc"}:g.color,"line-width":x?{type:"identity",property:"mlw"}:g.width,"line-opacity":S}),r.layout.visibility="visible",a.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:c},s(t),l},convertOnSelect:s}},9352:function(X,I,e){"use strict";var A=e(3400),k=e(27260),o=e(45608);X.exports=function(T,b,p,s){function t(a,l){return A.coerce(T,b,o,a,l)}var i=t("locations"),n=t("z"),r=t("geojson");A.isArrayOrTypedArray(i)&&i.length&&A.isArrayOrTypedArray(n)&&n.length&&(typeof r=="string"&&r!==""||A.isPlainObject(r))?(t("featureidkey"),b._length=Math.min(i.length,n.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},85404:function(X,I,e){"use strict";X.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(A,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(A,k){for(var o=k.getMapLayers(),T=o.length-2;T>=0;T--){var b=o[T].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var p=T+1;p<o.length;p++)if(typeof(b=o[p].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(X,I,e){"use strict";var A=e(13504).convert,k=e(13504).convertOnSelect,o=e(47552).traceLayerPrefix;function T(p,s){this.type="choroplethmapbox",this.subplot=p,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",o+s+"-fill"],["line",o+s+"-line"]],this.below=null}var b=T.prototype;b.update=function(p){this._update(A(p)),p[0].trace._glTrace=this},b.updateOnSelect=function(p){this._update(k(p))},b._update=function(p){var s=this.subplot,t=this.layerList,i=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(p.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(p,i),this.below=i);for(var n=0;n<t.length;n++){var r=t[n],a=r[0],l=r[1],c=p[a];s.setOptions(l,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&s.setOptions(l,"setPaintProperty",c.paint)}},b._addLayers=function(p,s){for(var t=this.subplot,i=this.layerList,n=this.sourceId,r=0;r<i.length;r++){var a=i[r],l=a[0],c=p[l];t.addLayer({type:l,id:a[1],source:n,layout:c.layout,paint:c.paint},s)}},b._removeLayers=function(){for(var p=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)p.removeLayer(s[t][1])},b.dispose=function(){var p=this.subplot.map;this._removeLayers(),p.removeSource(this.sourceId)},X.exports=function(p,s){var t=s[0].trace,i=new T(p,t.uid),n=i.sourceId,r=A(s),a=i.below=p.belowLookup["trace-"+t.uid];return p.map.addSource(n,{type:"geojson",data:r.geojson}),i._addLayers(r,a),s[0].trace._glTrace=i,i}},86040:function(X,I,e){"use strict";var A=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),p=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},b.showlegend,{dflt:!1})};p(s,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=p({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,X.exports=s},83344:function(X,I,e){"use strict";var A=e(47128);X.exports=function(k,o){for(var T=o.u,b=o.v,p=o.w,s=Math.min(o.x.length,o.y.length,o.z.length,T.length,b.length,p.length),t=-1/0,i=1/0,n=0;n<s;n++){var r=T[n],a=b[n],l=p[n],c=Math.sqrt(r*r+a*a+l*l);t=Math.max(t,c),i=Math.min(i,c)}o._len=s,o._normMax=t,A(k,o,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(X,I,e){"use strict";var A=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,o=e(3400).simpleMap,T=e(33040).parseColorScale,b=e(8932).extractOpts,p=e(3400).isArrayOrTypedArray,s=e(52094);function t(c,h){this.scene=c,this.uid=h,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(c){if(c.object===this.mesh){var h=c.index=c.data.index,u=this.data.x[h],x=this.data.y[h],d=this.data.z[h],m=this.data.u[h],g=this.data.v[h],y=this.data.w[h];c.traceCoordinate=[u,x,d,m,g,y,Math.sqrt(m*m+g*g+y*y)];var v=this.data.hovertext||this.data.text;return p(v)&&v[h]!==void 0?c.textLabel=v[h]:v&&(c.textLabel=v),!0}};var n={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function l(c,h){var u=c.fullSceneLayout,x=c.dataScale,d={};function m(f,S){var w=u[S],E=x[n[S]];return o(f,function(P){return w.d2l(P)*E})}d.vectors=s(m(h.u,"xaxis"),m(h.v,"yaxis"),m(h.w,"zaxis"),h._len),d.positions=s(m(h.x,"xaxis"),m(h.y,"yaxis"),m(h.z,"zaxis"),h._len);var g=b(h);d.colormap=T(h),d.vertexIntensityBounds=[g.min/h._normMax,g.max/h._normMax],d.coneOffset=r[h.anchor];var y=h.sizemode;y==="scaled"?d.coneSize=h.sizeref||.5:y==="absolute"?d.coneSize=h.sizeref&&h._normMax?h.sizeref/h._normMax:.5:y==="raw"&&(d.coneSize=h.sizeref),d.coneSizemode=y;var v=A(d),_=h.lightposition;return v.lightPosition=[_.x,_.y,_.z],v.ambient=h.lighting.ambient,v.diffuse=h.lighting.diffuse,v.specular=h.lighting.specular,v.roughness=h.lighting.roughness,v.fresnel=h.lighting.fresnel,v.opacity=h.opacity,h._pad=a[h.anchor]*v.vectorScale*v.coneScale*h._normMax,v}i.update=function(c){this.data=c;var h=l(this.scene,c);this.mesh.update(h)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},X.exports=function(c,h){var u=c.glplot.gl,x=l(c,h),d=k(u,x),m=new t(c,h.uid);return m.mesh=d,m.data=h,d._trace=m,c.glplot.add(d),m}},86096:function(X,I,e){"use strict";var A=e(3400),k=e(27260),o=e(86040);X.exports=function(T,b,p,s){function t(u,x){return A.coerce(T,b,o,u,x)}var i=t("u"),n=t("v"),r=t("w"),a=t("x"),l=t("y"),c=t("z");if(i&&i.length&&n&&n.length&&r&&r.length&&a&&a.length&&l&&l.length&&c&&c.length){var h=t("sizemode");t("sizeref",h==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null}else b.visible=!1}},26048:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(A,k){return A.norm=k.traceCoordinate[6],A},meta:{}}},67104:function(X,I,e){"use strict";var A=e(83328),k=e(52904),o=e(29736),T=o.axisHoverFormat,b=o.descriptionOnlyNumbers,p=e(49084),s=e(98192).u,t=e(25376),i=e(92880).extendFlat,n=e(69104),r=n.COMPARISON_OPS2,a=n.INTERVAL_OPS,l=k.line;X.exports=i({z:A.z,x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,text:A.text,hovertext:A.hovertext,transpose:A.transpose,xtype:A.xtype,ytype:A.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:A.hovertemplate,texttemplate:i({},A.texttemplate,{}),textfont:i({},A.textfont,{}),hoverongaps:A.hoverongaps,connectgaps:i({},A.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(r).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:i({},l.smoothing,{}),editType:"plot"},zorder:k.zorder},p("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(X,I,e){"use strict";var A=e(8932),k=e(19512),o=e(54444),T=e(46960);X.exports=function(b,p){var s=k(b,p),t=s[0].z;o(p,t);var i,n=p.contours,r=A.extractOpts(p);if(n.coloring==="heatmap"&&r.auto&&p.autocontour===!1){var a=n.start,l=T(n),c=n.size||1,h=Math.floor((l-a)/c)+1;isFinite(c)||(c=1,h=1);var u=a-c/2;i=[u,u+h*c]}else i=t;return A.calc(b,p,{vals:i,cLetter:"z"}),s}},56008:function(X){"use strict";X.exports=function(I,e){var A,k=I[0],o=k.z;switch(e.type){case"levels":var T=Math.min(o[0][0],o[0][1]);for(A=0;A<I.length;A++){var b=I[A];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var p=k.x.length,s=k.y.length,t=-1/0,i=1/0;for(A=0;A<s;A++)i=Math.min(i,o[A][0]),i=Math.min(i,o[A][p-1]),t=Math.max(t,o[A][0]),t=Math.max(t,o[A][p-1]);for(A=1;A<p-1;A++)i=Math.min(i,o[0][A]),i=Math.min(i,o[s-1][A]),t=Math.max(t,o[0][A]),t=Math.max(t,o[s-1][A]);var n,r,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<i||k.starts.length&&a===i)&&(k.prefixBoundary=!0);break;case"[]":n=Math.min(a[0],a[1]),((r=Math.max(a[0],a[1]))<i||n>t||k.starts.length&&r===i)&&(k.prefixBoundary=!0);break;case"][":n=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]),n<i&&r>t&&(k.prefixBoundary=!0)}}}},55296:function(X,I,e){"use strict";var A=e(8932),k=e(41076),o=e(46960);X.exports={min:"zmin",max:"zmax",calc:function(T,b,p){var s=b.contours,t=b.line,i=s.size||1,n=s.coloring,r=k(b,{isColorbar:!0});if(n==="heatmap"){var a=A.extractOpts(b);p._fillgradient=a.reversescale?A.flipScale(a.colorscale):a.colorscale,p._zrange=[a.min,a.max]}else n==="fill"&&(p._fillcolor=r);p._line={color:n==="lines"?r:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},p._levels={start:s.start,end:o(s),size:i}}}},93252:function(X){"use strict";X.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(X,I,e){"use strict";var A=e(38248),k=e(17428),o=e(76308),T=o.addOpacity,b=o.opacity,p=e(69104),s=e(3400).isArrayOrTypedArray,t=p.CONSTRAINT_REDUCTION,i=p.COMPARISON_OPS2;X.exports=function(n,r,a,l,c,h){var u,x,d,m=r.contours,g=a("contours.operation");m._operation=t[g],function(y,v){var _;i.indexOf(v.operation)===-1?(y("contours.value",[0,1]),s(v.value)?v.value.length>2?v.value=v.value.slice(2):v.length===0?v.value=[0,1]:v.length<2?(_=parseFloat(v.value[0]),v.value=[_,_+1]):v.value=[parseFloat(v.value[0]),parseFloat(v.value[1])]:A(v.value)&&(_=parseFloat(v.value),v.value=[_,_+1])):(y("contours.value",0),A(v.value)||(s(v.value)?v.value=parseFloat(v.value[0]):v.value=0))}(a,m),g==="="?u=m.showlines=!0:(u=a("contours.showlines"),d=a("fillcolor",T((n.line||{}).color||c,.5))),u&&(x=a("line.color",d&&b(d)?T(r.fillcolor,1):c),a("line.width",2),a("line.dash")),a("line.smoothing"),k(a,l,x,h)}},3212:function(X,I,e){"use strict";var A=e(69104),k=e(38248);function o(p,s){var t,i=Array.isArray(s);function n(r){return k(r)?+r:null}return A.COMPARISON_OPS2.indexOf(p)!==-1?t=n(i?s[0]:s):A.INTERVAL_OPS.indexOf(p)!==-1?t=i?[n(s[0]),n(s[1])]:[n(s),n(s)]:A.SET_OPS.indexOf(p)!==-1&&(t=i?s.map(n):[n(s)]),t}function T(p){return function(s){s=o(p,s);var t=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return{start:t,end:i,size:i-t}}}function b(p){return function(s){return{start:s=o(p,s),end:1/0,size:1/0}}}X.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},84952:function(X){"use strict";X.exports=function(I,e,A,k){var o=k("contours.start"),T=k("contours.end"),b=o===!1||T===!1,p=A("contours.size");!(b?e.autocontour=!0:A("autocontour",!1))&&p||A("ncontours")}},82172:function(X,I,e){"use strict";var A=e(3400);function k(o){return A.extendFlat({},o,{edgepaths:A.extendDeep([],o.edgepaths),paths:A.extendDeep([],o.paths),starts:A.extendDeep([],o.starts)})}X.exports=function(o,T){var b,p,s,t=function(r){return r.reverse()},i=function(r){return r};switch(T){case"=":case"<":return o;case">":for(o.length!==1&&A.warn("Contour data invalid for the specified inequality operation."),p=o[0],b=0;b<p.edgepaths.length;b++)p.edgepaths[b]=t(p.edgepaths[b]);for(b=0;b<p.paths.length;b++)p.paths[b]=t(p.paths[b]);for(b=0;b<p.starts.length;b++)p.starts[b]=t(p.starts[b]);return o;case"][":var n=t;t=i,i=n;case"[]":for(o.length!==2&&A.warn("Contour data invalid for the specified inequality range operation."),p=k(o[0]),s=k(o[1]),b=0;b<p.edgepaths.length;b++)p.edgepaths[b]=t(p.edgepaths[b]);for(b=0;b<p.paths.length;b++)p.paths[b]=t(p.paths[b]);for(b=0;b<p.starts.length;b++)p.starts[b]=t(p.starts[b]);for(;s.edgepaths.length;)p.edgepaths.push(i(s.edgepaths.shift()));for(;s.paths.length;)p.paths.push(i(s.paths.shift()));for(;s.starts.length;)p.starts.push(i(s.starts.shift()));return[p]}}},57004:function(X,I,e){"use strict";var A=e(3400),k=e(51264),o=e(31147),T=e(95536),b=e(84952),p=e(97680),s=e(39096),t=e(67104);X.exports=function(i,n,r,a){function l(h,u){return A.coerce(i,n,t,h,u)}if(k(i,n,l,a)){o(i,n,a,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var c=l("contours.type")==="constraint";l("connectgaps",A.isArray1D(n.z)),c?T(i,n,l,a,r):(b(i,n,l,function(h){return A.coerce2(i,n,t,h)}),p(i,n,l,a)),n.contours&&n.contours.coloring==="heatmap"&&s(l,a),l("zorder")}else n.visible=!1}},61512:function(X,I,e){"use strict";var A=e(3400),k=e(3212),o=e(46960);X.exports=function(T,b,p){for(var s=T.type==="constraint"?k[T._operation](T.value):T,t=s.size,i=[],n=o(s),r=p.trace._carpetTrace,a=r?{xaxis:r.aaxis,yaxis:r.baxis,x:p.a,y:p.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:p.x,y:p.y},l=s.start;l<n;l+=t)if(i.push(A.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:p.z,smoothing:p.trace.line.smoothing},a)),i.length>1e3){A.warn("Too many contours, clipping at 1000",T);break}return i}},46960:function(X){"use strict";X.exports=function(I){return I.end+I.size/1e6}},88748:function(X,I,e){"use strict";var A=e(3400),k=e(93252);function o(p,s,t,i){return Math.abs(p[0]-s[0])<t&&Math.abs(p[1]-s[1])<i}function T(p,s,t,i,n){var r,a=s.join(","),l=p.crossings[a],c=function(ie,se,ae){var ue=0,ve=0;return ie>20&&se?ie===208||ie===1114?ue=ae[0]===0?1:-1:ve=ae[1]===0?1:-1:k.BOTTOMSTART.indexOf(ie)!==-1?ve=1:k.LEFTSTART.indexOf(ie)!==-1?ue=1:k.TOPSTART.indexOf(ie)!==-1?ve=-1:ue=-1,[ue,ve]}(l,t,s),h=[b(p,s,[-c[0],-c[1]])],u=p.z.length,x=p.z[0].length,d=s.slice(),m=c.slice();for(r=0;r<1e4;r++){if(l>20?(l=k.CHOOSESADDLE[l][(c[0]||c[1])<0?0:1],p.crossings[a]=k.SADDLEREMAINDER[l]):delete p.crossings[a],!(c=k.NEWDELTA[l])){A.log("Found bad marching index:",l,s,p.level);break}h.push(b(p,s,c)),s[0]+=c[0],s[1]+=c[1],a=s.join(","),o(h[h.length-1],h[h.length-2],i,n)&&h.pop();var g=c[0]&&(s[0]<0||s[0]>x-2)||c[1]&&(s[1]<0||s[1]>u-2);if(s[0]===d[0]&&s[1]===d[1]&&c[0]===m[0]&&c[1]===m[1]||t&&g)break;l=p.crossings[a]}r===1e4&&A.log("Infinite loop in contour?");var y,v,_,f,S,w,E,P,C,O,R,U,D,N,W,F=o(h[0],h[h.length-1],i,n),j=0,q=.2*p.smoothing,te=[],ee=0;for(r=1;r<h.length;r++)U=h[r],D=h[r-1],N=U[2]-D[2],W=U[3]-D[3],j+=E=Math.sqrt(N*N+W*W),te.push(E);var Q=j/te.length*q;function J(ie){return h[ie%h.length]}for(r=h.length-2;r>=ee;r--)if((y=te[r])<Q){for(_=0,v=r-1;v>=ee&&y+te[v]<Q;v--)y+=te[v];if(F&&r===h.length-2)for(_=0;_<v&&y+te[_]<Q;_++)y+=te[_];S=r-v+_+1,w=Math.floor((r+v+_+2)/2),f=F||r!==h.length-2?F||v!==-1?S%2?J(w):[(J(w)[0]+J(w+1)[0])/2,(J(w)[1]+J(w+1)[1])/2]:h[0]:h[h.length-1],h.splice(v+1,r-v+1,f),r=v+1,_&&(ee=_),F&&(r===h.length-2?h[_]=h[h.length-1]:r===0&&(h[h.length-1]=h[0]))}for(h.splice(0,ee),r=0;r<h.length;r++)h[r].length=2;if(!(h.length<2))if(F)h.pop(),p.paths.push(h);else{t||A.log("Unclosed interior contour?",p.level,d.join(","),h.join("L"));var K=!1;for(P=0;P<p.edgepaths.length;P++)if(O=p.edgepaths[P],!K&&o(O[0],h[h.length-1],i,n)){h.pop(),K=!0;var Y=!1;for(C=0;C<p.edgepaths.length;C++)if(o((R=p.edgepaths[C])[R.length-1],h[0],i,n)){Y=!0,h.shift(),p.edgepaths.splice(P,1),C===P?p.paths.push(h.concat(R)):(C>P&&C--,p.edgepaths[C]=R.concat(h,O));break}Y||(p.edgepaths[P]=h.concat(O))}for(P=0;P<p.edgepaths.length&&!K;P++)o((O=p.edgepaths[P])[O.length-1],h[0],i,n)&&(h.shift(),p.edgepaths[P]=O.concat(h),K=!0);K||p.edgepaths.push(h)}}function b(p,s,t){var i=s[0]+Math.max(t[0],0),n=s[1]+Math.max(t[1],0),r=p.z[n][i],a=p.xaxis,l=p.yaxis;if(t[1]){var c=(p.level-r)/(p.z[n][i+1]-r),h=(c!==1?(1-c)*a.c2l(p.x[i]):0)+(c!==0?c*a.c2l(p.x[i+1]):0);return[a.c2p(a.l2c(h),!0),l.c2p(p.y[n],!0),i+c,n]}var u=(p.level-r)/(p.z[n+1][i]-r),x=(u!==1?(1-u)*l.c2l(p.y[n]):0)+(u!==0?u*l.c2l(p.y[n+1]):0);return[a.c2p(p.x[i],!0),l.c2p(l.l2c(x),!0),i,n+u]}X.exports=function(p,s,t){var i,n,r,a;for(s=s||.01,t=t||.01,n=0;n<p.length;n++){for(r=p[n],a=0;a<r.starts.length;a++)T(r,r.starts[a],"edge",s,t);for(i=0;Object.keys(r.crossings).length&&i<1e4;)i++,T(r,Object.keys(r.crossings)[0].split(",").map(Number),void 0,s,t);i===1e4&&A.log("Infinite loop in contour?")}}},38200:function(X,I,e){"use strict";var A=e(76308),k=e(55512);X.exports=function(o,T,b,p,s){s||(s={}),s.isContour=!0;var t=k(o,T,b,p,s);return t&&t.forEach(function(i){var n=i.trace;n.contours.type==="constraint"&&(n.fillcolor&&A.opacity(n.fillcolor)?i.color=A.addOpacity(n.fillcolor,1):n.contours.showlines&&A.opacity(n.line.color)&&(i.color=A.addOpacity(n.line.color,1)))}),t}},66240:function(X,I,e){"use strict";X.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o,T,b){if(b||(b={}),k("contours.showlabels")){var p=o.font;A.coerceFont(k,"contours.labelfont",p,{overrideDflt:{color:T}}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},41076:function(X,I,e){"use strict";var A=e(33428),k=e(8932),o=e(46960);X.exports=function(T){var b=T.contours,p=b.start,s=o(b),t=b.size||1,i=Math.floor((s-p)/t)+1,n=b.coloring==="lines"?0:1,r=k.extractOpts(T);isFinite(t)||(t=1,i=1);var a,l,c=r.reversescale?k.flipScale(r.colorscale):r.colorscale,h=c.length,u=new Array(h),x=new Array(h),d=r.min,m=r.max;if(b.coloring==="heatmap"){for(l=0;l<h;l++)a=c[l],u[l]=a[0]*(m-d)+d,x[l]=a[1];var g=A.extent([d,m,b.start,b.start+t*(i-1)]),y=g[d<m?0:1],v=g[d<m?1:0];y!==d&&(u.splice(0,0,y),x.splice(0,0,x[0])),v!==m&&(u.push(v),x.push(x[x.length-1]))}else{var _=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(_&&(p<=d||s>=m)&&(p<=d&&(p=d),s>=m&&(s=m),i=Math.floor((s-p)/t)+1,n=0),l=0;l<h;l++)a=c[l],u[l]=(a[0]*(i+n-1)-n/2)*t+p,x[l]=a[1];(_||T.autocontour)&&(u[0]>d&&(u.unshift(d),x.unshift(x[0])),u[u.length-1]<m&&(u.push(m),x.push(x[x.length-1])))}return k.makeColorScaleFunc({domain:u,range:x},{noNumericCheck:!0})}},72424:function(X,I,e){"use strict";var A=e(93252);function k(o,T){var b=(T[0][0]>o?0:1)+(T[0][1]>o?0:2)+(T[1][1]>o?0:4)+(T[1][0]>o?0:8);return b===5||b===10?o>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}X.exports=function(o){var T,b,p,s,t,i,n,r,a,l=o[0].z,c=l.length,h=l[0].length,u=c===2||h===2;for(b=0;b<c-1;b++)for(s=[],b===0&&(s=s.concat(A.BOTTOMSTART)),b===c-2&&(s=s.concat(A.TOPSTART)),T=0;T<h-1;T++)for(p=s.slice(),T===0&&(p=p.concat(A.LEFTSTART)),T===h-2&&(p=p.concat(A.RIGHTSTART)),t=T+","+b,i=[[l[b][T],l[b][T+1]],[l[b+1][T],l[b+1][T+1]]],a=0;a<o.length;a++)(n=k((r=o[a]).level,i))&&(r.crossings[t]=n,p.indexOf(n)!==-1&&(r.starts.push([T,b]),u&&p.indexOf(n,p.indexOf(n)+1)!==-1&&r.starts.push([T,b])))}},23676:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(8932),b=e(72736),p=e(54460),s=e(78344),t=e(41420),i=e(72424),n=e(88748),r=e(61512),a=e(82172),l=e(56008),c=e(93252),h=c.LABELOPTIMIZER;function u(m,g){var y,v,_,f,S,w,E,P="",C=0,O=m.edgepaths.map(function(F,j){return j}),R=!0;function U(F){return Math.abs(F[1]-g[2][1])<.01}function D(F){return Math.abs(F[0]-g[0][0])<.01}function N(F){return Math.abs(F[0]-g[2][0])<.01}for(;O.length;){for(w=o.smoothopen(m.edgepaths[C],m.smoothing),P+=R?w:w.replace(/^M/,"L"),O.splice(O.indexOf(C),1),y=m.edgepaths[C][m.edgepaths[C].length-1],f=-1,_=0;_<4;_++){if(!y){k.log("Missing end?",C,m);break}for(E=y,Math.abs(E[1]-g[0][1])<.01&&!N(y)?v=g[1]:D(y)?v=g[0]:U(y)?v=g[3]:N(y)&&(v=g[2]),S=0;S<m.edgepaths.length;S++){var W=m.edgepaths[S][0];Math.abs(y[0]-v[0])<.01?Math.abs(y[0]-W[0])<.01&&(W[1]-y[1])*(v[1]-W[1])>=0&&(v=W,f=S):Math.abs(y[1]-v[1])<.01?Math.abs(y[1]-W[1])<.01&&(W[0]-y[0])*(v[0]-W[0])>=0&&(v=W,f=S):k.log("endpt to newendpt is not vert. or horz.",y,v,W)}if(y=v,f>=0)break;P+="L"+v}if(f===m.edgepaths.length){k.log("unclosed perimeter path");break}C=f,(R=O.indexOf(C)===-1)&&(C=O[0],P+="Z")}for(C=0;C<m.paths.length;C++)P+=o.smoothclosed(m.paths[C],m.smoothing);return P}function x(m,g,y,v){var _=g.width/2,f=g.height/2,S=m.x,w=m.y,E=m.theta,P=Math.cos(E)*_,C=Math.sin(E)*_,O=(S>v.center?v.right-S:S-v.left)/(P+Math.abs(Math.sin(E)*f)),R=(w>v.middle?v.bottom-w:w-v.top)/(Math.abs(C)+Math.cos(E)*f);if(O<1||R<1)return 1/0;var U=h.EDGECOST*(1/(O-1)+1/(R-1));U+=h.ANGLECOST*E*E;for(var D=S-P,N=w-C,W=S+P,F=w+C,j=0;j<y.length;j++){var q=y[j],te=Math.cos(q.theta)*q.width/2,ee=Math.sin(q.theta)*q.width/2,Q=2*k.segmentDistance(D,N,W,F,q.x-te,q.y-ee,q.x+te,q.y+ee)/(g.height+q.height),J=q.level===g.level,K=J?h.SAMELEVELDISTANCE:1;if(Q<=K)return 1/0;U+=h.NEIGHBORCOST*(J?h.SAMELEVELFACTOR:1)/(Q-K)}return U}function d(m){var g,y,v=m.trace._emptypoints,_=[],f=m.z.length,S=m.z[0].length,w=[];for(g=0;g<S;g++)w.push(1);for(g=0;g<f;g++)_.push(w.slice());for(g=0;g<v.length;g++)_[(y=v[g])[0]][y[1]]=0;return m.zmask=_,_}I.plot=function(m,g,y,v){var _=g.xaxis,f=g.yaxis;k.makeTraceGroups(v,y,"contour").each(function(S){var w=A.select(this),E=S[0],P=E.trace,C=E.x,O=E.y,R=P.contours,U=r(R,g,E),D=k.ensureSingle(w,"g","heatmapcoloring"),N=[];R.coloring==="heatmap"&&(N=[S]),t(m,g,N,D),i(U),n(U);var W=_.c2p(C[0],!0),F=_.c2p(C[C.length-1],!0),j=f.c2p(O[0],!0),q=f.c2p(O[O.length-1],!0),te=[[W,q],[F,q],[F,j],[W,j]],ee=U;R.type==="constraint"&&(ee=a(U,R._operation)),function(Q,J,K){var Y=k.ensureSingle(Q,"g","contourbg").selectAll("path").data(K.coloring==="fill"?[0]:[]);Y.enter().append("path"),Y.exit().remove(),Y.attr("d","M"+J.join("L")+"Z").style("stroke","none")}(w,te,R),function(Q,J,K,Y){var ie=Y.coloring==="fill"||Y.type==="constraint"&&Y._operation!=="=",se="M"+K.join("L")+"Z";ie&&l(J,Y);var ae=k.ensureSingle(Q,"g","contourfill").selectAll("path").data(ie?J:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(ue){var ve=(ue.prefixBoundary?se:"")+u(ue,K);ve?A.select(this).attr("d",ve).style("stroke","none"):A.select(this).remove()})}(w,ee,te,R),function(Q,J,K,Y,ie){var se=K._context.staticPlot,ae=k.ensureSingle(Q,"g","contourlines"),ue=ie.showlines!==!1,ve=ie.showlabels,ye=ue&&ve,de=I.createLines(ae,ue||ve,J,se),pe=I.createLineClip(ae,ye,K,Y.trace.uid),ge=Q.selectAll("g.contourlabels").data(ve?[0]:[]);if(ge.exit().remove(),ge.enter().append("g").classed("contourlabels",!0),ve){var ke=[],Ee=[];k.clearLocationCache();var me=I.labelFormatter(K,Y),oe=o.tester.append("text").attr("data-notex",1).call(o.font,ie.labelfont),re=J[0].xaxis,fe=J[0].yaxis,Se=re._length,be=fe._length,we=re.range,Me=fe.range,Ie=k.aggNums(Math.min,null,Y.x),Oe=k.aggNums(Math.max,null,Y.x),he=k.aggNums(Math.min,null,Y.y),_e=k.aggNums(Math.max,null,Y.y),Ae=Math.max(re.c2p(Ie,!0),0),De=Math.min(re.c2p(Oe,!0),Se),Le=Math.max(fe.c2p(_e,!0),0),Be=Math.min(fe.c2p(he,!0),be),Ve={};we[0]<we[1]?(Ve.left=Ae,Ve.right=De):(Ve.left=De,Ve.right=Ae),Me[0]<Me[1]?(Ve.top=Le,Ve.bottom=Be):(Ve.top=Be,Ve.bottom=Le),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,ke.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var Ze=Math.sqrt(Se*Se+be*be),rt=c.LABELDISTANCE*Ze/Math.max(1,J.length/c.LABELINCREASE);de.each(function(it){var dt=I.calcTextOpts(it.level,me,oe,K);A.select(this).selectAll("path").each(function(){var mt=k.getVisibleSegment(this,Ve,dt.height/2);if(mt&&!(mt.len<(dt.width+dt.height)*c.LABELMIN))for(var ht=Math.min(Math.ceil(mt.len/rt),c.LABELMAX),Qe=0;Qe<ht;Qe++){var Je=I.findBestTextLocation(this,mt,dt,Ee,Ve);if(!Je)break;I.addLabelData(Je,dt,Ee,ke)}})}),oe.remove(),I.drawLabels(ge,Ee,K,pe,ye?ke:null)}ve&&!ue&&de.remove()}(w,U,m,E,R),function(Q,J,K,Y,ie){var se=Y.trace,ae=K._fullLayout._clips,ue="clip"+se.uid,ve=ae.selectAll("#"+ue).data(se.connectgaps?[]:[0]);if(ve.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),ve.exit().remove(),se.connectgaps===!1){var ye={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:J.xaxis,yaxis:J.yaxis,x:Y.x,y:Y.y,z:d(Y),smoothing:0};i([ye]),n([ye]),l([ye],{type:"levels"}),k.ensureSingle(ve,"path","").attr("d",(ye.prefixBoundary?"M"+ie.join("L")+"Z":"")+u(ye,ie))}else ue=null;o.setClipUrl(Q,ue,K)}(w,g,m,E,te)})},I.createLines=function(m,g,y,v){var _=y[0].smoothing,f=m.selectAll("g.contourlevel").data(g?y:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlevel",!0),g){var S=f.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return o.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke");var w=f.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return o.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",v?"none":"non-scaling-stroke")}return f},I.createLineClip=function(m,g,y,v){var _=g?"clipline"+v:null,f=y._fullLayout._clips.selectAll("#"+_).data(g?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),o.setClipUrl(m,_,y),f},I.labelFormatter=function(m,g){var y=m._fullLayout,v=g.trace,_=v.contours,f={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)f.tickformat=_.labelformat,s(f,y);else{var S=T.extractOpts(v);if(S&&S.colorbar&&S.colorbar._axis)f=S.colorbar._axis;else{if(_.type==="constraint"){var w=_.value;k.isArrayOrTypedArray(w)?f.range=[w[0],w[w.length-1]]:f.range=[w,w]}else f.range=[_.start,_.end],f.nticks=(_.end-_.start)/_.size;f.range[0]===f.range[1]&&(f.range[1]+=f.range[0]||1),f.nticks||(f.nticks=1e3),s(f,y),p.prepTicks(f),f._tmin=null,f._tmax=null}}return function(E){return p.tickText(f,E).text}},I.calcTextOpts=function(m,g,y,v){var _=g(m);y.text(_).call(b.convertToTspans,v);var f=y.node(),S=o.bBox(f,!0);return{text:_,width:S.width,height:S.height,fontSize:+f.style["font-size"].replace("px",""),level:m,dy:(S.top+S.bottom)/2}},I.findBestTextLocation=function(m,g,y,v,_){var f,S,w,E,P,C=y.width;g.isClosed?(S=g.len/h.INITIALSEARCHPOINTS,f=g.min+S/2,w=g.max):(S=(g.len-C)/(h.INITIALSEARCHPOINTS+1),f=g.min+S+C/2,w=g.max-(S+C)/2);for(var O=1/0,R=0;R<h.ITERATIONS;R++){for(var U=f;U<w;U+=S){var D=k.getTextLocation(m,g.total,U,C),N=x(D,y,v,_);N<O&&(O=N,P=D,E=U)}if(O>2*h.MAXCOST)break;R&&(S/=2),w=(f=E-S/2)+1.5*S}if(O<=h.MAXCOST)return P},I.addLabelData=function(m,g,y,v){var _=g.fontSize,f=g.width+_/3,S=Math.max(0,g.height-_/3),w=m.x,E=m.y,P=m.theta,C=Math.sin(P),O=Math.cos(P),R=function(D,N){return[w+D*O-N*C,E+D*C+N*O]},U=[R(-f/2,-S/2),R(-f/2,S/2),R(f/2,S/2),R(f/2,-S/2)];y.push({text:g.text,x:w,y:E,dy:g.dy,theta:P,level:g.level,width:f,height:S}),v.push(U)},I.drawLabels=function(m,g,y,v,_){var f=m.selectAll("text").data(g,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var P=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;A.select(this).text(E.text).attr({x:P,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+P+" "+C+")"}).call(b.convertToTspans,y)}),_){for(var S="",w=0;w<_.length;w++)S+="M"+_[w].join("L")+"Z";k.ensureSingle(v,"path","").attr("d",S)}}},54444:function(X,I,e){"use strict";var A=e(54460),k=e(3400);function o(T,b,p){var s={type:"linear",range:[T,b]};return A.autoTicks(s,(b-T)/(p||15)),s}X.exports=function(T,b){var p=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,b)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,b));var i=o(s,t,T.ncontours);p.size=i.dtick,p.start=A.tickFirst(i),i.range.reverse(),p.end=A.tickFirst(i),p.start===s&&(p.start+=p.size),p.end===t&&(p.end-=p.size),p.start>p.end&&(p.start=p.end=(p.start+p.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:p.start,end:p.end,size:p.size}),T._input.autocontour=!0}else if(p.type!=="constraint"){var n,r=p.start,a=p.end,l=T._input.contours;r>a&&(p.start=l.start=a,a=p.end=l.end=r,r=p.start),p.size>0||(n=r===a?1:o(r,a,T.ncontours).dtick,l.size=p.size=n)}}},52440:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(41648),T=e(41076);X.exports=function(b){var p=A.select(b).selectAll("g.contour");p.style("opacity",function(s){return s[0].trace.opacity}),p.each(function(s){var t=A.select(this),i=s[0].trace,n=i.contours,r=i.line,a=n.size||1,l=n.start,c=n.type==="constraint",h=!c&&n.coloring==="lines",u=!c&&n.coloring==="fill",x=h||u?T(i):null;t.selectAll("g.contourlevel").each(function(g){A.select(this).selectAll("path").call(k.lineGroupStyle,r.width,h?x(g.level):r.color,r.dash)});var d=n.labelfont;if(t.selectAll("g.contourlabels text").each(function(g){k.font(A.select(this),{weight:d.weight,style:d.style,variant:d.variant,textcase:d.textcase,lineposition:d.lineposition,shadow:d.shadow,family:d.family,size:d.size,color:d.color||(h?x(g.level):r.color)})}),c)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(u){var m;t.selectAll("g.contourfill path").style("fill",function(g){return m===void 0&&(m=g.level),x(g.level+.5*a)}),m===void 0&&(m=l),t.selectAll("g.contourbg path").style("fill",x(m-.5*a))}}),o(b)}},97680:function(X,I,e){"use strict";var A=e(27260),k=e(17428);X.exports=function(o,T,b,p,s){var t,i=b("contours.coloring"),n="";i==="fill"&&(t=b("contours.showlines")),t!==!1&&(i!=="lines"&&(n=b("line.color","#000")),b("line.width",.5),b("line.dash")),i!=="none"&&(o.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,A(o,T,p,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,p,n,s)}},37960:function(X,I,e){"use strict";var A=e(83328),k=e(67104),o=e(49084),T=e(92880).extendFlat,b=k.contours;X.exports=T({carpet:{valType:"string",editType:"calc"},z:A.z,a:A.x,a0:A.x0,da:A.dx,b:A.y,b0:A.y0,db:A.dy,text:A.text,hovertext:A.hovertext,transpose:A.transpose,atype:A.xtype,btype:A.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},zorder:k.zorder,transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(X,I,e){"use strict";var A=e(47128),k=e(3400),o=e(2872),T=e(26136),b=e(70448),p=e(11240),s=e(35744),t=e(3252),i=e(50948),n=e(54444);X.exports=function(r,a){var l=a._carpetTrace=i(r,a);if(l&&l.visible&&l.visible!=="legendonly"){if(!a.a||!a.b){var c=r.data[l.index],h=r.data[a.index];h.a||(h.a=c.a),h.b||(h.b=c.b),t(h,a,a._defaultColor,r._fullLayout)}var u=function(x,d){var m,g,y,v,_,f,S,w=d._carpetTrace,E=w.aaxis,P=w.baxis;E._minDtick=0,P._minDtick=0,k.isArray1D(d.z)&&o(d,E,P,"a","b",["z"]),m=d._a=d._a||d.a,v=d._b=d._b||d.b,m=m?E.makeCalcdata(d,"_a"):[],v=v?P.makeCalcdata(d,"_b"):[],g=d.a0||0,y=d.da||1,_=d.b0||0,f=d.db||1,S=d._z=T(d._z||d.z,d.transpose),d._emptypoints=p(S),b(S,d._emptypoints);var C=k.maxRowLength(S),O=d.xtype==="scaled"?"":m,R=s(d,O,g,y,C,E),U=d.ytype==="scaled"?"":v,D={a:R,b:s(d,U,_,f,S.length,P),z:S};return d.contours.type==="levels"&&d.contours.coloring!=="none"&&A(x,d,{vals:S,containerStr:"",cLetter:"z"}),[D]}(r,a);return n(a,a._z),u}}},3252:function(X,I,e){"use strict";var A=e(3400),k=e(51264),o=e(37960),T=e(95536),b=e(84952),p=e(97680);X.exports=function(s,t,i,n){function r(a,l){return A.coerce(s,t,o,a,l)}if(r("carpet"),s.a&&s.b){if(!k(s,t,r,n,"a","b"))return void(t.visible=!1);r("text"),r("contours.type")==="constraint"?T(s,t,r,n,i,{hasHover:!1}):(b(s,t,r,function(a){return A.coerce2(s,t,o,a)}),p(s,t,r,n,{hasHover:!1}))}else t._defaultColor=i,t._length=null;r("zorder")}},40448:function(X,I,e){"use strict";X.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(X,I,e){"use strict";var A=e(33428),k=e(87072),o=e(53416),T=e(43616),b=e(3400),p=e(72424),s=e(88748),t=e(23676),i=e(93252),n=e(82172),r=e(61512),a=e(56008),l=e(50948),c=e(77712);function h(d,m,g){var y=d.getPointAtLength(m),v=d.getPointAtLength(g),_=v.x-y.x,f=v.y-y.y,S=Math.sqrt(_*_+f*f);return[_/S,f/S]}function u(d){var m=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return[d[0]/m,d[1]/m]}function x(d,m){var g=Math.abs(d[0]*m[0]+d[1]*m[1]);return Math.sqrt(1-g*g)/g}X.exports=function(d,m,g,y){var v=m.xaxis,_=m.yaxis;b.makeTraceGroups(y,g,"contour").each(function(f){var S=A.select(this),w=f[0],E=w.trace,P=E._carpetTrace=l(d,E),C=d.calcdata[P.index][0];if(P.visible&&P.visible!=="legendonly"){var O=w.a,R=w.b,U=E.contours,D=r(U,m,w),N=U.type==="constraint",W=U._operation,F=N?W==="="?"lines":"fill":U.coloring,j=[[O[0],R[R.length-1]],[O[O.length-1],R[R.length-1]],[O[O.length-1],R[0]],[O[0],R[0]]];p(D);var q=1e-8*(O[O.length-1]-O[0]),te=1e-8*(R[R.length-1]-R[0]);s(D,q,te);var ee,Q,J,K,Y=D;U.type==="constraint"&&(Y=n(D,W)),function(ue,ve){var ye,de,pe,ge,ke,Ee,me,oe,re;for(ye=0;ye<ue.length;ye++){for(ke=(ge=ue[ye]).pedgepaths=[],Ee=ge.ppaths=[],de=0;de<ge.edgepaths.length;de++){for(re=ge.edgepaths[de],me=[],pe=0;pe<re.length;pe++)me[pe]=ve(re[pe]);ke.push(me)}for(de=0;de<ge.paths.length;de++){for(re=ge.paths[de],oe=[],pe=0;pe<re.length;pe++)oe[pe]=ve(re[pe]);Ee.push(oe)}}}(D,ae);var ie=[];for(K=C.clipsegments.length-1;K>=0;K--)ee=C.clipsegments[K],Q=k([],ee.x,v.c2p),J=k([],ee.y,_.c2p),Q.reverse(),J.reverse(),ie.push(o(Q,J,ee.bicubic));var se="M"+ie.join("L")+"Z";(function(ue,ve,ye,de,pe,ge){var ke,Ee,me,oe,re=b.ensureSingle(ue,"g","contourbg").selectAll("path").data(ge!=="fill"||pe?[]:[0]);re.enter().append("path"),re.exit().remove();var fe=[];for(oe=0;oe<ve.length;oe++)ke=ve[oe],Ee=k([],ke.x,ye.c2p),me=k([],ke.y,de.c2p),fe.push(o(Ee,me,ke.bicubic));re.attr("d","M"+fe.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,v,_,N,F),function(ue,ve,ye,de,pe,ge,ke,Ee,me,oe,re){var fe=oe==="fill";fe&&a(pe,ue.contours);var Se=b.ensureSingle(ve,"g","contourfill").selectAll("path").data(fe?pe:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(be){var we=(be.prefixBoundary?re:"")+function(Me,Ie,Oe,he,_e,Ae,De,Le){var Be,Ve,Ze,rt,it,dt,mt,ht="",Qe=Ie.edgepaths.map(function(tt,Re){return Re}),Je=!0,wt=1e-4*Math.abs(Oe[0][0]-Oe[2][0]),Pt=1e-4*Math.abs(Oe[0][1]-Oe[2][1]);function It(tt){return Math.abs(tt[1]-Oe[0][1])<Pt}function At(tt){return Math.abs(tt[1]-Oe[2][1])<Pt}function qe(tt){return Math.abs(tt[0]-Oe[0][0])<wt}function Ye(tt){return Math.abs(tt[0]-Oe[2][0])<wt}function Ne(tt,Re){var Fe,nt,Ge,ut,pt="";for(It(tt)&&!Ye(tt)||At(tt)&&!qe(tt)?(ut=_e.aaxis,Ge=c(_e,Ae,[tt[0],Re[0]],.5*(tt[1]+Re[1]))):(ut=_e.baxis,Ge=c(_e,Ae,.5*(tt[0]+Re[0]),[tt[1],Re[1]])),Fe=1;Fe<Ge.length;Fe++)for(pt+=ut.smoothing?"C":"L",nt=0;nt<Ge[Fe].length;nt++){var gt=Ge[Fe][nt];pt+=[De.c2p(gt[0]),Le.c2p(gt[1])]+" "}return pt}for(Be=0,Ve=null;Qe.length;){var We=Ie.edgepaths[Be][0];for(Ve&&(ht+=Ne(Ve,We)),mt=T.smoothopen(Ie.edgepaths[Be].map(he),Ie.smoothing),ht+=Je?mt:mt.replace(/^M/,"L"),Qe.splice(Qe.indexOf(Be),1),Ve=Ie.edgepaths[Be][Ie.edgepaths[Be].length-1],it=-1,rt=0;rt<4;rt++){if(!Ve){b.log("Missing end?",Be,Ie);break}for(It(Ve)&&!Ye(Ve)?Ze=Oe[1]:qe(Ve)?Ze=Oe[0]:At(Ve)?Ze=Oe[3]:Ye(Ve)&&(Ze=Oe[2]),dt=0;dt<Ie.edgepaths.length;dt++){var at=Ie.edgepaths[dt][0];Math.abs(Ve[0]-Ze[0])<wt?Math.abs(Ve[0]-at[0])<wt&&(at[1]-Ve[1])*(Ze[1]-at[1])>=0&&(Ze=at,it=dt):Math.abs(Ve[1]-Ze[1])<Pt?Math.abs(Ve[1]-at[1])<Pt&&(at[0]-Ve[0])*(Ze[0]-at[0])>=0&&(Ze=at,it=dt):b.log("endpt to newendpt is not vert. or horz.",Ve,Ze,at)}if(it>=0)break;ht+=Ne(Ve,Ze),Ve=Ze}if(it===Ie.edgepaths.length){b.log("unclosed perimeter path");break}Be=it,(Je=Qe.indexOf(Be)===-1)&&(Be=Qe[0],ht+=Ne(Ve,Ze)+"Z",Ve=null)}for(Be=0;Be<Ie.paths.length;Be++)ht+=T.smoothclosed(Ie.paths[Be].map(he),Ie.smoothing);return ht}(0,be,ge,ke,Ee,me,ye,de);we?A.select(this).attr("d",we).style("stroke","none"):A.select(this).remove()})}(E,S,v,_,Y,j,ae,P,C,F,se),function(ue,ve,ye,de,pe,ge,ke){var Ee=ye._context.staticPlot,me=b.ensureSingle(ue,"g","contourlines"),oe=pe.showlines!==!1,re=pe.showlabels,fe=oe&&re,Se=t.createLines(me,oe||re,ve,Ee),be=t.createLineClip(me,fe,ye,de.trace.uid),we=ue.selectAll("g.contourlabels").data(re?[0]:[]);if(we.exit().remove(),we.enter().append("g").classed("contourlabels",!0),re){var Me=ge.xaxis,Ie=ge.yaxis,Oe=Me._length,he=Ie._length,_e=[[[0,0],[Oe,0],[Oe,he],[0,he]]],Ae=[];b.clearLocationCache();var De=t.labelFormatter(ye,de),Le=T.tester.append("text").attr("data-notex",1).call(T.font,pe.labelfont),Be={left:0,right:Oe,center:Oe/2,top:0,bottom:he,middle:he/2},Ve=Math.sqrt(Oe*Oe+he*he),Ze=i.LABELDISTANCE*Ve/Math.max(1,ve.length/i.LABELINCREASE);Se.each(function(rt){var it=t.calcTextOpts(rt.level,De,Le,ye);A.select(this).selectAll("path").each(function(dt){var mt=this,ht=b.getVisibleSegment(mt,Be,it.height/2);if(ht&&(function(Pt,It,At,qe,Ye,Ne){for(var We,at=0;at<At.pedgepaths.length;at++)It===At.pedgepaths[at]&&(We=At.edgepaths[at]);if(We){var tt=Ye.a[0],Re=Ye.a[Ye.a.length-1],Fe=Ye.b[0],nt=Ye.b[Ye.b.length-1],Ge=h(Pt,0,1),ut=h(Pt,qe.total,qe.total-1),pt=ct(We[0],Ge),gt=qe.total-ct(We[We.length-1],ut);qe.min<pt&&(qe.min=pt),qe.max>gt&&(qe.max=gt),qe.len=qe.max-qe.min}function ct(Tt,vt){var kt,Lt=0,Ct=.1;return(Math.abs(Tt[0]-tt)<Ct||Math.abs(Tt[0]-Re)<Ct)&&(kt=u(Ye.dxydb_rough(Tt[0],Tt[1],Ct)),Lt=Math.max(Lt,Ne*x(vt,kt)/2)),(Math.abs(Tt[1]-Fe)<Ct||Math.abs(Tt[1]-nt)<Ct)&&(kt=u(Ye.dxyda_rough(Tt[0],Tt[1],Ct)),Lt=Math.max(Lt,Ne*x(vt,kt)/2)),Lt}}(mt,dt,rt,ht,ke,it.height),!(ht.len<(it.width+it.height)*i.LABELMIN)))for(var Qe=Math.min(Math.ceil(ht.len/Ze),i.LABELMAX),Je=0;Je<Qe;Je++){var wt=t.findBestTextLocation(mt,ht,it,Ae,Be);if(!wt)break;t.addLabelData(wt,it,Ae,_e)}})}),Le.remove(),t.drawLabels(we,Ae,ye,be,fe?_e:null)}re&&!oe&&Se.remove()}(S,D,d,w,U,m,P),T.setClipUrl(S,P._clipPathId,d)}function ae(ue){var ve=P.ab2xy(ue[0],ue[1],!0);return[v.c2p(ve[0]),_.c2p(ve[1])]}})}},33928:function(X,I,e){"use strict";var A=e(49084),k=e(21776).Ks,o=e(45464),T=e(31512),b=e(92880).extendFlat;X.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},o.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(X,I,e){"use strict";var A=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(47128),b=e(3400)._;X.exports=function(p,s){for(var t=s._length,i=new Array(t),n=s.z,r=k(n)&&n.length,a=0;a<t;a++){var l=i[a]={},c=s.lon[a],h=s.lat[a];if(l.lonlat=A(c)&&A(h)?[+c,+h]:[o,o],r){var u=n[a];l.z=A(u)?u:o}}return T(p,s,{vals:r?n:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:b(p,"lat:")+" ",lon:b(p,"lon:")+" "}}),i}},4629:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(76308),T=e(8932),b=e(39032).BADNUM,p=e(44808).makeBlank;X.exports=function(s){var t=s[0].trace,i=t.visible===!0&&t._length!==0,n=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:p()};if(!i)return n;var r,a=[],l=t.z,c=t.radius,h=k.isArrayOrTypedArray(l)&&l.length,u=k.isArrayOrTypedArray(c);for(r=0;r<s.length;r++){var x=s[r],d=x.lonlat;if(d[0]!==b){var m={};if(h){var g=x.z;m.z=g!==b?g:0}u&&(m.r=A(c[r])&&c[r]>0?+c[r]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:m})}}var y=T.extractOpts(t),v=y.reversescale?T.flipScale(y.colorscale):y.colorscale,_=v[0][1],f=["interpolate",["linear"],["heatmap-density"],0,o.opacity(_)<1?_:o.addOpacity(_,0)];for(r=1;r<v.length;r++)f.push(v[r][0],v[r][1]);var S=["interpolate",["linear"],["get","z"],y.min,0,y.max,1];return k.extendFlat(n.heatmap.paint,{"heatmap-weight":h?S:1/(y.max-y.min),"heatmap-color":f,"heatmap-radius":u?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),n.geojson={type:"FeatureCollection",features:a},n.heatmap.layout.visibility="visible",n}},97664:function(X,I,e){"use strict";var A=e(3400),k=e(27260),o=e(33928);X.exports=function(T,b,p,s){function t(a,l){return A.coerce(T,b,o,a,l)}var i=t("lon")||[],n=t("lat")||[],r=Math.min(i.length,n.length);r?(b._length=r,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,b,s,t,{prefix:"",cLetter:"z"})):b.visible=!1}},96176:function(X){"use strict";X.exports=function(I,e){return I.lon=e.lon,I.lat=e.lat,I.z=e.z,I}},25336:function(X,I,e){"use strict";var A=e(54460),k=e(63312).hoverPoints,o=e(63312).getExtraText;X.exports=function(T,b,p){var s=k(T,b,p);if(s){var t=s[0],i=t.cd,n=i[0].trace,r=i[t.index];if(delete t.color,"z"in r){var a=t.subplot.mockAxis;t.z=r.z,t.zLabel=A.tickText(a,a.c2l(r.z),"hover").text}return t.extraText=o(n,r,i[0].t.labels),[t]}}},15088:function(X,I,e){"use strict";X.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(A,k){for(var o=k.getMapLayers(),T=0;T<o.length;T++){var b=o[T],p=b.id;if(b.type==="symbol"&&typeof p=="string"&&p.indexOf("plotly-")===-1)return p}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(X,I,e){"use strict";var A=e(4629),k=e(47552).traceLayerPrefix;function o(b,p){this.type="densitymapbox",this.subplot=b,this.uid=p,this.sourceId="source-"+p,this.layerList=[["heatmap",k+p+"-heatmap"]],this.below=null}var T=o.prototype;T.update=function(b){var p=this.subplot,s=this.layerList,t=A(b),i=p.belowLookup["trace-"+this.uid];p.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var n=0;n<s.length;n++){var r=s[n],a=r[0],l=r[1],c=t[a];p.setOptions(l,"setLayoutProperty",c.layout),c.layout.visibility==="visible"&&p.setOptions(l,"setPaintProperty",c.paint)}},T._addLayers=function(b,p){for(var s=this.subplot,t=this.layerList,i=this.sourceId,n=0;n<t.length;n++){var r=t[n],a=r[0],l=b[a];s.addLayer({type:a,id:r[1],source:i,layout:l.layout,paint:l.paint},p)}},T._removeLayers=function(){for(var b=this.subplot.map,p=this.layerList,s=p.length-1;s>=0;s--)b.removeLayer(p[s][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},X.exports=function(b,p){var s=p[0].trace,t=new o(b,s.uid),i=t.sourceId,n=A(p),r=t.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(i,{type:"geojson",data:n.geojson}),t._addLayers(n,r),t}},74248:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;A.mergeArray(o.text,k,"tx"),A.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){A.mergeArray(b.opacity,k,"mo"),A.mergeArray(b.color,k,"mc");var p=b.line;p&&(A.mergeArray(p.color,k,"mlc"),A.mergeArrayCastPositive(p.width,k,"mlw"))}}},20088:function(X,I,e){"use strict";var A,k=e(20832),o=e(52904).line,T=e(45464),b=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,n=e(76308);X.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:p({},{keys:t.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(A=i({},k.marker),delete A.pattern,delete A.cornerradius,A),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},o.color,{dflt:n.defaultLine}),width:i({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,zorder:k.zorder}},23096:function(X,I,e){"use strict";var A=e(54460),k=e(1220),o=e(74248),T=e(4500),b=e(39032).BADNUM;function p(s){return s===b?0:s}X.exports=function(s,t){var i,n,r,a,l,c,h,u,x=A.getFromId(s,t.xaxis||"x"),d=A.getFromId(s,t.yaxis||"y");t.orientation==="h"?(i=x.makeCalcdata(t,"x"),r=d.makeCalcdata(t,"y"),a=k(t,d,"y",r),l=!!t.yperiodalignment,c="y"):(i=d.makeCalcdata(t,"y"),r=x.makeCalcdata(t,"x"),a=k(t,x,"x",r),l=!!t.xperiodalignment,c="x"),n=a.vals;var m,g=Math.min(n.length,i.length),y=new Array(g);for(t._base=[],h=0;h<g;h++){i[h]<0&&(i[h]=b);var v=!1;i[h]!==b&&h+1<g&&i[h+1]!==b&&(v=!0),u=y[h]={p:n[h],s:i[h],cNext:v},t._base[h]=-.5*u.s,l&&(y[h].orig_p=r[h],y[h][c+"End"]=a.ends[h],y[h][c+"Start"]=a.starts[h]),t.ids&&(u.id=String(t.ids[h])),h===0&&(y[0].vTotal=0),y[0].vTotal+=p(u.s),u.begR=p(u.s)/p(y[0].s)}for(h=0;h<g;h++)(u=y[h]).s!==b&&(u.sumR=u.s/y[0].vTotal,u.difR=m!==void 0?u.s/m:1,m=u.s);return o(y,t),T(y,t),y}},74732:function(X){"use strict";X.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(X,I,e){"use strict";var A=e(96376).setGroupPositions;X.exports=function(k,o){var T,b,p=k._fullLayout,s=k._fullData,t=k.calcdata,i=o.xaxis,n=o.yaxis,r=[],a=[],l=[];for(b=0;b<s.length;b++){var c=s[b],h=c.orientation==="h";c.visible===!0&&c.xaxis===i._id&&c.yaxis===n._id&&c.type==="funnel"&&(T=t[b],h?l.push(T):a.push(T),r.push(T))}var u={mode:p.funnelmode,norm:p.funnelnorm,gap:p.funnelgap,groupgap:p.funnelgroupgap};for(A(k,i,n,a,u),A(k,n,i,l,u),b=0;b<r.length;b++){T=r[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},45432:function(X,I,e){"use strict";var A=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),p=e(20088),s=e(76308);X.exports={supplyDefaults:function(t,i,n,r){function a(u,x){return A.coerce(t,i,p,u,x)}if(T(t,i,r,a)){b(t,i,r,a),a("xhoverformat"),a("yhoverformat"),a("orientation",i.y&&!i.x?"v":"h"),a("offset"),a("width");var l=a("text");a("hovertext"),a("hovertemplate");var c=a("textposition");o(t,i,r,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||a("textinfo",A.isArrayOrTypedArray(l)?"text+value":"value");var h=a("marker.color",n);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(u){var x=A.isArrayOrTypedArray(u)?"#000":u;return s.addOpacity(x,.5*s.opacity(x))}(h)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash"))),a("zorder")}else i.visible=!1},crossTraceDefaults:function(t,i){var n,r;function a(c){return A.coerce(r._input,r,p,c)}if(i.funnelmode==="group")for(var l=0;l<t.length;l++)n=(r=t[l])._input,k(n,r,i,a)}}},34580:function(X){"use strict";X.exports=function(I,e){return I.x="xVal"in e?e.xVal:e.x,I.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(I.percentInitial=e.percentInitial),"percentPrevious"in e&&(I.percentPrevious=e.percentPrevious),"percentTotal"in e&&(I.percentTotal=e.percentTotal),e.xa&&(I.xaxis=e.xa),e.ya&&(I.yaxis=e.ya),I}},31488:function(X,I,e){"use strict";var A=e(76308).opacity,k=e(63400).hoverOnBars,o=e(3400).formatPercent;X.exports=function(T,b,p,s,t){var i=k(T,b,p,s,t);if(i){var n=i.cd,r=n[0].trace,a=r.orientation==="h",l=n[i.index];i[(a?"x":"y")+"LabelVal"]=l.s,i.percentInitial=l.begR,i.percentInitialLabel=o(l.begR,1),i.percentPrevious=l.difR,i.percentPreviousLabel=o(l.difR,1),i.percentTotal=l.sumR,i.percentTotalLabel=o(l.sumR,1);var c=l.hi||r.hoverinfo,h=[];if(c&&c!=="none"&&c!=="skip"){var u=c==="all",x=c.split("+"),d=function(m){return u||x.indexOf(m)!==-1};d("percent initial")&&h.push(i.percentInitialLabel+" of initial"),d("percent previous")&&h.push(i.percentPreviousLabel+" of previous"),d("percent total")&&h.push(i.percentTotalLabel+" of total")}return i.extraText=h.join("<br>"),i.color=function(m,g){var y=m.marker,v=g.mc||y.color,_=g.mlc||y.line.color,f=g.mlw||y.line.width;return A(v)?v:A(_)&&f?_:void 0}(r,l),[i]}}},94704:function(X,I,e){"use strict";X.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(X){"use strict";X.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(X,I,e){"use strict";var A=e(3400),k=e(7076);X.exports=function(o,T,b){var p=!1;function s(n,r){return A.coerce(o,T,k,n,r)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="funnel"){p=!0;break}}p&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},42200:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),p=e(82744).clearMinTextSize;function s(t,i,n,r){var a=[],l=[],c=r?i:n,h=r?n:i;return a[0]=c.c2p(t.s0,!0),l[0]=h.c2p(t.p0,!0),a[1]=c.c2p(t.s1,!0),l[1]=h.c2p(t.p1,!0),a[2]=c.c2p(t.nextS0,!0),l[2]=h.c2p(t.nextP0,!0),a[3]=c.c2p(t.nextS1,!0),l[3]=h.c2p(t.nextP1,!0),r?[a,l]:[l,a]}X.exports=function(t,i,n,r){var a=t._fullLayout;p("funnel",a),function(l,c,h,u){var x=c.xaxis,d=c.yaxis;k.makeTraceGroups(u,h,"trace bars").each(function(m){var g=A.select(this),y=m[0].trace,v=k.ensureSingle(g,"g","regions");if(y.connector&&y.connector.visible){var _=y.orientation==="h",f=v.selectAll("g.region").data(k.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var P=s(w,x,d,_),C=P[0],O=P[1],R="";C[0]!==T&&O[0]!==T&&C[1]!==T&&O[1]!==T&&C[2]!==T&&O[2]!==T&&C[3]!==T&&O[3]!==T&&(R+=_?"M"+C[0]+","+O[1]+"L"+C[2]+","+O[2]+"H"+C[3]+"L"+C[1]+","+O[1]+"Z":"M"+C[1]+","+O[1]+"L"+C[2]+","+O[3]+"V"+O[2]+"L"+C[1]+","+O[0]+"Z"),R===""&&(R="M0,0Z"),k.ensureSingle(A.select(this),"path").attr("d",R).call(o.setClipUrl,c.layerClipId,l)}})}else v.remove()})}(t,i,n,r),function(l,c,h,u){var x=c.xaxis,d=c.yaxis;k.makeTraceGroups(u,h,"trace bars").each(function(m){var g=A.select(this),y=m[0].trace,v=k.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible&&y.connector.line.width){var _=y.orientation==="h",f=v.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var P=s(w,x,d,_),C=P[0],O=P[1],R="";C[3]!==void 0&&O[3]!==void 0&&(_?(R+="M"+C[0]+","+O[1]+"L"+C[2]+","+O[2],R+="M"+C[1]+","+O[1]+"L"+C[3]+","+O[2]):(R+="M"+C[1]+","+O[1]+"L"+C[2]+","+O[3],R+="M"+C[1]+","+O[0]+"L"+C[2]+","+O[2])),R===""&&(R="M0,0Z"),k.ensureSingle(A.select(this),"path").attr("d",R).call(o.setClipUrl,c.layerClipId,l)}})}else v.remove()})}(t,i,n,r),b.plot(t,i,n,r,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},44544:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),p=e(82744).resizeText,s=b.styleTextPoints;X.exports={style:function(t,i,n){var r=n||A.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");p(t,r,"funnel"),r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var l=A.select(this),c=a[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var u=c.marker;A.select(this).call(o.fill,h.mc||u.color).call(o.stroke,h.mlc||u.line.color).call(k.dashLine,u.line.dash,h.mlw||u.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(l,c,t),l.selectAll(".regions").each(function(){A.select(this).selectAll("path").style("stroke-width",0).call(o.fill,c.connector.fillcolor)}),l.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(A.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},22332:function(X,I,e){"use strict";var A=e(74996),k=e(45464),o=e(86968).u,T=e(21776).Ks,b=e(21776).Gw,p=e(92880).extendFlat;X.exports={labels:A.labels,label0:A.label0,dlabel:A.dlabel,values:A.values,marker:{colors:A.marker.colors,line:{color:p({},A.marker.line.color,{dflt:null}),width:p({},A.marker.line.width,{dflt:1}),editType:"calc"},pattern:A.marker.pattern,editType:"calc"},text:A.text,hovertext:A.hovertext,scalegroup:p({},A.scalegroup,{}),textinfo:p({},A.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:p({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:p({},A.textposition,{values:["inside","none"],dflt:"inside"}),textfont:A.textfont,insidetextfont:A.insidetextfont,title:{text:A.title.text,font:A.title.font,position:p({},A.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(X,I,e){"use strict";var A=e(7316);I.name="funnelarea",I.plot=function(k,o,T,b){A.plotBasePlot(I.name,k,o,T,b)},I.clean=function(k,o,T,b){A.cleanBasePlot(I.name,k,o,T,b)}},54e3:function(X,I,e){"use strict";var A=e(45768);X.exports={calc:function(k,o){return A.calc(k,o)},crossTraceCalc:function(k){A.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(X,I,e){"use strict";var A=e(3400),k=e(22332),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleLabelsAndValues,p=e(74174).handleMarkerDefaults;X.exports=function(s,t,i,n){function r(g,y){return A.coerce(s,t,k,g,y)}var a=r("labels"),l=r("values"),c=b(a,l),h=c.len;if(t._hasLabels=c.hasLabels,t._hasValues=c.hasValues,!t._hasLabels&&t._hasValues&&(r("label0"),r("dlabel")),h){t._length=h,p(s,t,n,r),r("scalegroup");var u,x=r("text"),d=r("texttemplate");if(d||(u=r("textinfo",Array.isArray(x)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),d||u&&u!=="none"){var m=r("textposition");T(s,t,n,r,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else u==="none"&&r("textposition","none");o(t,n,r),r("title.text")&&(r("title.position"),A.coerceFont(r,"title.font",n.font)),r("aspectratio"),r("baseratio")}else t.visible=!1}},62396:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(X,I,e){"use strict";var A=e(85204).hiddenlabels;X.exports={hiddenlabels:A,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(X,I,e){"use strict";var A=e(3400),k=e(61280);X.exports=function(o,T){function b(p,s){return A.coerce(o,T,k,p,s)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},39472:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(3400),T=o.strScale,b=o.strTranslate,p=e(72736),s=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,n=t.clearMinTextSize,r=e(69656),a=e(37820),l=a.attachFxHandlers,c=a.determineInsideTextFont,h=a.layoutAreas,u=a.prerenderTitles,x=a.positionTitleOutside,d=a.formatSliceLabel;function m(g,y){return"l"+(y[0]-g[0])+","+(y[1]-g[1])}X.exports=function(g,y){var v=g._context.staticPlot,_=g._fullLayout;n("funnelarea",_),u(y,g),h(y,_._size),o.makeTraceGroups(_._funnelarealayer,y,"trace").each(function(f){var S=A.select(this),w=f[0],E=w.trace;(function(P){if(P.length){var C=P[0],O=C.trace,R=O.aspectratio,U=O.baseratio;U>.999&&(U=.999);var D,N,W,F=Math.pow(U,2),j=C.vTotal,q=j,te=j*F/(1-F)/j,ee=[];for(ee.push(me()),N=P.length-1;N>-1;N--)if(!(W=P[N]).hidden){var Q=W.v/q;te+=Q,ee.push(me())}var J=1/0,K=-1/0;for(N=0;N<ee.length;N++)D=ee[N],J=Math.min(J,D[1]),K=Math.max(K,D[1]);for(N=0;N<ee.length;N++)ee[N][1]-=(K+J)/2;var Y=ee[ee.length-1][0],ie=C.r,se=(K-J)/2,ae=ie/Y,ue=ie/se*R;for(C.r=ue*se,N=0;N<ee.length;N++)ee[N][0]*=ae,ee[N][1]*=ue;var ve,ye,de=[-(D=ee[0])[0],D[1]],pe=[D[0],D[1]],ge=0;for(N=P.length-1;N>-1;N--)if(!(W=P[N]).hidden){var ke=ee[ge+=1][0],Ee=ee[ge][1];W.TL=[-ke,Ee],W.TR=[ke,Ee],W.BL=de,W.BR=pe,W.pxmid=(ve=W.TR,ye=W.BR,[.5*(ve[0]+ye[0]),.5*(ve[1]+ye[1])]),de=W.TL,pe=W.TR}}function me(){var oe,re={x:oe=Math.sqrt(te),y:-oe};return[re.x,re.y]}})(f),S.each(function(){var P=A.select(this).selectAll("g.slice").data(f);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(O,R){if(O.hidden)A.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=E.index;var U=w.cx,D=w.cy,N=A.select(this),W=N.selectAll("path.surface").data([O]);W.enter().append("path").classed("surface",!0).style({"pointer-events":v?"none":"all"}),N.call(l,g,f);var F="M"+(U+O.TR[0])+","+(D+O.TR[1])+m(O.TR,O.BR)+m(O.BR,O.BL)+m(O.BL,O.TL)+"Z";W.attr("d",F),d(g,O,w);var j=r.castOption(E.textposition,O.pts),q=N.selectAll("g.slicetext").data(O.text&&j!=="none"?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var te=o.ensureSingle(A.select(this),"text","",function(ae){ae.attr("data-notex",1)}),ee=o.ensureUniformFontSize(g,c(E,O,_.font));te.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,ee).call(p.convertToTspans,g);var Q,J,K,Y=k.bBox(te.node()),ie=Math.min(O.BL[1],O.BR[1])+D,se=Math.max(O.TL[1],O.TR[1])+D;J=Math.max(O.TL[0],O.BL[0])+U,K=Math.min(O.TR[0],O.BR[0])+U,(Q=s(J,K,ie,se,Y,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ee.size,i(E.type,Q,_),f[R].transform=Q,o.setTransormAndDisplay(te,Q)})}});var C=A.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var O=o.ensureSingle(A.select(this),"text","",function(D){D.attr("data-notex",1)}),R=E.title.text;E._meta&&(R=o.templateString(R,E._meta)),O.text(R).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(p.convertToTspans,g);var U=x(w,_._size);O.attr("transform",b(U.x,U.y)+T(Math.min(1,U.scale))+b(U.tx,U.ty))})})})}},62096:function(X,I,e){"use strict";var A=e(33428),k=e(10528),o=e(82744).resizeText;X.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");o(T,b,"funnelarea"),b.each(function(p){var s=p[0].trace,t=A.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){A.select(this).call(k,i,s,T)})})}},83328:function(X,I,e){"use strict";var A=e(52904),k=e(45464),o=e(25376),T=e(29736).axisHoverFormat,b=e(21776).Ks,p=e(21776).Gw,s=e(49084),t=e(92880).extendFlat;X.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},A.x,{impliedEdits:{xtype:"array"}}),x0:t({},A.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},A.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},A.y,{impliedEdits:{ytype:"array"}}),y0:t({},A.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},A.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},A.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},A.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},A.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},A.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},A.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},A.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1}),zorder:A.zorder},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},19512:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(54460),T=e(1220),b=e(55480),p=e(47128),s=e(2872),t=e(26136),i=e(70448),n=e(11240),r=e(35744),a=e(39032).BADNUM;function l(c){for(var h=[],u=c.length,x=0;x<u;x++){var d=c[x];d!==a&&h.push(d)}return h}X.exports=function(c,h){var u,x,d,m,g,y,v,_,f,S,w,E=o.getFromId(c,h.xaxis||"x"),P=o.getFromId(c,h.yaxis||"y"),C=A.traceIs(h,"contour"),O=A.traceIs(h,"histogram"),R=A.traceIs(h,"gl2d"),U=C?"best":h.zsmooth;if(E._minDtick=0,P._minDtick=0,O)m=(w=b(c,h)).orig_x,u=w.x,x=w.x0,d=w.dx,_=w.orig_y,g=w.y,y=w.y0,v=w.dy,f=w.z;else{var D=h.z;k.isArray1D(D)?(s(h,E,P,"x","y",["z"]),u=h._x,g=h._y,D=h._z):(m=h.x?E.makeCalcdata(h,"x"):[],_=h.y?P.makeCalcdata(h,"y"):[],u=T(h,E,"x",m).vals,g=T(h,P,"y",_).vals,h._x=u,h._y=g),x=h.x0,d=h.dx,y=h.y0,v=h.dy,f=t(D,h,E,P)}function N(K){U=h._input.zsmooth=h.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+K)}function W(K){if(K.length>1){var Y=(K[K.length-1]-K[0])/(K.length-1),ie=Math.abs(Y/100);for(S=0;S<K.length-1;S++)if(Math.abs(K[S+1]-K[S]-Y)>ie)return!1}return!0}(E.rangebreaks||P.rangebreaks)&&(f=function(K,Y,ie){for(var se=[],ae=-1,ue=0;ue<ie.length;ue++)if(Y[ue]!==a){se[++ae]=[];for(var ve=0;ve<ie[ue].length;ve++)K[ve]!==a&&se[ae].push(ie[ue][ve])}return se}(u,g,f),O||(u=l(u),g=l(g),h._x=u,h._y=g)),O||!C&&!h.connectgaps||(h._emptypoints=n(f),i(f,h._emptypoints)),h._islinear=!1,E.type==="log"||P.type==="log"?U==="fast"&&N("log axis found"):W(u)?W(g)?h._islinear=!0:U==="fast"&&N("y scale is not linear"):U==="fast"&&N("x scale is not linear");var F=k.maxRowLength(f),j=h.xtype==="scaled"?"":u,q=r(h,j,x,d,F,E),te=h.ytype==="scaled"?"":g,ee=r(h,te,y,v,f.length,P);R||(h._extremes[E._id]=o.findExtremes(E,q),h._extremes[P._id]=o.findExtremes(P,ee));var Q={x:q,y:ee,z:f,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&m&&(Q.orig_x=m),h.yperiodalignment&&_&&(Q.orig_y=_),j&&j.length===q.length-1&&(Q.xCenter=j),te&&te.length===ee.length-1&&(Q.yCenter=te),O&&(Q.xRanges=w.xRanges,Q.yRanges=w.yRanges,Q.pts=w.pts),C||p(c,h,{vals:f,cLetter:"z"}),C&&h.contours&&h.contours.coloring==="heatmap"){var J={type:h.type==="contour"?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};Q.xfill=r(J,j,x,d,F,E),Q.yfill=r(J,te,y,v,f.length,P)}return[Q]}},26136:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(39032).BADNUM;X.exports=function(T,b,p,s){var t,i,n,r,a,l;function c(g){if(A(g))return+g}if(b&&b.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;n=function(g){return g.length},r=function(g,y,v){return(g[v]||[])[y]}}else t=T.length,n=function(g,y){return g[y].length},r=function(g,y,v){return(g[y]||[])[v]};var h=function(g,y,v){return y===o||v===o?o:r(g,y,v)};function u(g){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&g&&g.type==="category"&&b["_"+g._id.charAt(0)].length){var y=g._id.charAt(0),v={},_=b["_"+y+"CategoryMap"]||b[y];for(a=0;a<_.length;a++)v[_[a]]=a;return function(f){var S=v[g._categories[f]];return S+1?S:o}}return k.identity}var x=u(p),d=u(s);s&&s.type==="category"&&(t=s._categories.length);var m=new Array(t);for(a=0;a<t;a++)for(i=p&&p.type==="category"?p._categories.length:n(T,a),m[a]=new Array(i),l=0;l<i;l++)m[a][l]=c(h(T,d(a),x(l)));return m}},96288:function(X){"use strict";X.exports={min:"zmin",max:"zmax"}},2872:function(X,I,e){"use strict";var A=e(3400),k=e(39032).BADNUM,o=e(1220);X.exports=function(T,b,p,s,t,i){var n=T._length,r=b.makeCalcdata(T,s),a=p.makeCalcdata(T,t);r=o(T,b,s,r).vals,a=o(T,p,t,a).vals;var l,c,h,u,x=T.text,d=x!==void 0&&A.isArray1D(x),m=T.hovertext,g=m!==void 0&&A.isArray1D(m),y=A.distinctVals(r),v=y.vals,_=A.distinctVals(a),f=_.vals,S=[],w=f.length,E=v.length;for(l=0;l<i.length;l++)S[l]=A.init2dArray(w,E);d&&(h=A.init2dArray(w,E)),g&&(u=A.init2dArray(w,E));var P=A.init2dArray(w,E);for(l=0;l<n;l++)if(r[l]!==k&&a[l]!==k){var C=A.findBin(r[l]+y.minDiff/2,v),O=A.findBin(a[l]+_.minDiff/2,f);for(c=0;c<i.length;c++){var R=T[i[c]];S[c][O][C]=R[l],P[O][C]=l}d&&(h[O][C]=x[l]),g&&(u[O][C]=m[l])}for(T["_"+s]=v,T["_"+t]=f,c=0;c<i.length;c++)T["_"+i[c]]=S[c];d&&(T._text=h),g&&(T._hovertext=u),b&&b.type==="category"&&(T["_"+s+"CategoryMap"]=v.map(function(U){return b._categories[U]})),p&&p.type==="category"&&(T["_"+t+"CategoryMap"]=f.map(function(U){return p._categories[U]})),T._after2before=P}},24480:function(X,I,e){"use strict";var A=e(3400),k=e(51264),o=e(39096),T=e(31147),b=e(82748),p=e(27260),s=e(83328);X.exports=function(t,i,n,r){function a(l,c){return A.coerce(t,i,s,l,c)}k(t,i,a,r)?(T(t,i,r,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),o(a,r),b(t,i,a,r),a("hoverongaps"),a("connectgaps",A.isArray1D(i.z)&&i.zsmooth!==!1),p(t,i,r,a,{prefix:"",cLetter:"z"}),a("zorder")):i.visible=!1}},11240:function(X,I,e){"use strict";var A=e(3400).maxRowLength;X.exports=function(k){var o,T,b,p,s,t,i,n,r=[],a={},l=[],c=k[0],h=[],u=[0,0,0],x=A(k);for(T=0;T<k.length;T++)for(o=h,h=c,c=k[T+1]||[],b=0;b<x;b++)h[b]===void 0&&((t=(h[b-1]!==void 0?1:0)+(h[b+1]!==void 0?1:0)+(o[b]!==void 0?1:0)+(c[b]!==void 0?1:0))?(T===0&&t++,b===0&&t++,T===k.length-1&&t++,b===h.length-1&&t++,t<4&&(a[[T,b]]=[T,b,t]),r.push([T,b,t])):l.push([T,b]));for(;l.length;){for(i={},n=!1,s=l.length-1;s>=0;s--)(t=((a[[(T=(p=l[s])[0])-1,b=p[1]]]||u)[2]+(a[[T+1,b]]||u)[2]+(a[[T,b-1]]||u)[2]+(a[[T,b+1]]||u)[2])/20)&&(i[p]=[T,b,t],l.splice(s,1),n=!0);if(!n)throw"findEmpties iterated with no new neighbors";for(p in i)a[p]=i[p],r.push(i[p])}return r.sort(function(d,m){return m[2]-d[2]})}},55512:function(X,I,e){"use strict";var A=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(54460),b=e(8932).extractOpts;X.exports=function(p,s,t,i,n){n||(n={});var r,a,l,c,h=n.isContour,u=p.cd[0],x=u.trace,d=p.xa,m=p.ya,g=u.x,y=u.y,v=u.z,_=u.xCenter,f=u.yCenter,S=u.zmask,w=x.zhoverformat,E=g,P=y;if(p.index!==!1){try{l=Math.round(p.index[1]),c=Math.round(p.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",p.index)}if(l<0||l>=v[0].length||c<0||c>v.length)return}else{if(A.inbox(s-g[0],s-g[g.length-1],0)>0||A.inbox(t-y[0],t-y[y.length-1],0)>0)return;if(h){var C;for(E=[2*g[0]-g[1]],C=1;C<g.length;C++)E.push((g[C]+g[C-1])/2);for(E.push([2*g[g.length-1]-g[g.length-2]]),P=[2*y[0]-y[1]],C=1;C<y.length;C++)P.push((y[C]+y[C-1])/2);P.push([2*y[y.length-1]-y[y.length-2]])}l=Math.max(0,Math.min(E.length-2,k.findBin(s,E))),c=Math.max(0,Math.min(P.length-2,k.findBin(t,P)))}var O,R,U=d.c2p(g[l]),D=d.c2p(g[l+1]),N=m.c2p(y[c]),W=m.c2p(y[c+1]);h?(O=u.orig_x||g,R=u.orig_y||y,D=U,r=O[l],W=N,a=R[c]):(O=u.orig_x||_||g,R=u.orig_y||f||y,r=_?O[l]:(O[l]+O[l+1])/2,a=f?R[c]:(R[c]+R[c+1])/2,d&&d.type==="category"&&(r=g[l]),m&&m.type==="category"&&(a=y[c]),x.zsmooth&&(U=D=d.c2p(r),N=W=m.c2p(a)));var F=v[c][l];if(S&&!S[c][l]&&(F=void 0),F!==void 0||x.hoverongaps){var j;o(u.hovertext)&&o(u.hovertext[c])?j=u.hovertext[c][l]:o(u.text)&&o(u.text[c])&&(j=u.text[c][l]);var q=b(x),te={type:"linear",range:[q.min,q.max],hoverformat:w,_separators:d._separators,_numFormat:d._numFormat},ee=T.tickText(te,F,"hover").text;return[k.extendFlat(p,{index:x._after2before?x._after2before[c][l]:[c,l],distance:p.maxHoverDistance,spikeDistance:p.maxSpikeDistance,x0:U,x1:D,y0:N,y1:W,xLabelVal:r,yLabelVal:a,zLabelVal:F,zLabel:ee,text:j})]}}},81932:function(X,I,e){"use strict";X.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(X,I,e){"use strict";var A=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function o(b){return .5-.25*Math.min(1,.5*b)}function T(b,p,s){var t,i,n,r,a,l,c,h,u,x,d,m,g,y=0;for(r=0;r<p.length;r++){for(i=(t=p[r])[0],n=t[1],d=b[i][n],x=0,u=0,a=0;a<4;a++)(c=b[i+(l=k[a])[0]])&&(h=c[n+l[1]])!==void 0&&(x===0?m=g=h:(m=Math.min(m,h),g=Math.max(g,h)),u++,x+=h);if(u===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][n]=x/u,d===void 0?u<4&&(y=1):(b[i][n]=(1+s)*b[i][n]-s*d,g>m&&(y=Math.max(y,Math.abs(b[i][n]-d)/(g-m))))}return y}X.exports=function(b,p){var s,t=1;for(T(b,p),s=0;s<p.length&&!(p[s][2]<4);s++);for(p=p.slice(s),s=0;s<100&&t>.01;s++)t=T(b,p,o(t));return t>.01&&A.log("interp2d didn't converge quickly",t),b}},39096:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){k("texttemplate");var T=A.extendFlat({},o.font,{color:"auto",size:"auto"});A.coerceFont(k,"textfont",T)}},35744:function(X,I,e){"use strict";var A=e(24040),k=e(3400).isArrayOrTypedArray;X.exports=function(o,T,b,p,s,t){var i,n,r,a=[],l=A.traceIs(o,"contour"),c=A.traceIs(o,"histogram"),h=A.traceIs(o,"gl2d");if(k(T)&&T.length>1&&!c&&t.type!=="category"){var u=T.length;if(!(u<=s))return l?T.slice(0,s):T.slice(0,s+1);if(l||h)a=Array.from(T).slice(0,s);else if(s===1)a=t.type==="log"?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if(t.type==="log"){for(a=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],r=1;r<u;r++)a.push(Math.sqrt(T[r-1]*T[r]));a.push(Math.pow(T[u-1],1.5)/Math.pow(T[u-2],.5))}else{for(a=[1.5*T[0]-.5*T[1]],r=1;r<u;r++)a.push(.5*(T[r-1]+T[r]));a.push(1.5*T[u-1]-.5*T[u-2])}if(u<s){var x,d=a[a.length-1];if(t.type==="log")for(x=d/a[a.length-2],r=u;r<s;r++)d*=x,a.push(d);else for(x=d-a[a.length-2],r=u;r<s;r++)d+=x,a.push(d)}}else{var m=o[t._id.charAt(0)+"calendar"];for(i=c?t.r2c(b,0,m):k(T)&&T.length===1?T[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,m),n=p||1,r=l||h?0:-.5;r<s;r++)a.push(i+n*r)}return a}},41420:function(X,I,e){"use strict";var A=e(33428),k=e(49760),o=e(24040),T=e(43616),b=e(54460),p=e(3400),s=e(72736),t=e(76688),i=e(76308),n=e(8932).extractOpts,r=e(8932).makeColorScaleFuncFromTrace,a=e(9616),l=e(84284).LINE_SPACING,c=e(9188),h=e(2264).STYLE,u="heatmap-label";function x(v){return v.selectAll("g."+u)}function d(v){x(v).remove()}function m(v,_){var f=_.length-2,S=p.constrain(p.findBin(v,_),0,f),w=_[S],E=_[S+1],P=p.constrain(S+(v-w)/(E-w)-.5,0,f),C=Math.round(P),O=Math.abs(P-C);return P&&P!==f&&O?{bin0:C,frac:O,bin1:Math.round(C+O/(P-C))}:{bin0:C,bin1:C,frac:0}}function g(v,_){var f=_.length-1,S=p.constrain(p.findBin(v,_),0,f),w=_[S],E=(v-w)/(_[S+1]-w)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function y(v,_,f){v[_]=f[0],v[_+1]=f[1],v[_+2]=f[2],v[_+3]=Math.round(255*f[3])}X.exports=function(v,_,f,S){var w=_.xaxis,E=_.yaxis;p.makeTraceGroups(S,f,"hm").each(function(P){var C,O,R,U,D,N,W,F,j=A.select(this),q=P[0],te=q.trace,ee=te.xgap||0,Q=te.ygap||0,J=q.z,K=q.x,Y=q.y,ie=q.xCenter,se=q.yCenter,ae=o.traceIs(te,"contour"),ue=ae?"best":te.zsmooth,ve=J.length,ye=p.maxRowLength(J),de=!1,pe=!1;for(N=0;C===void 0&&N<K.length-1;)C=w.c2p(K[N]),N++;for(N=K.length-1;O===void 0&&N>0;)O=w.c2p(K[N]),N--;for(O<C&&(R=O,O=C,C=R,de=!0),N=0;U===void 0&&N<Y.length-1;)U=E.c2p(Y[N]),N++;for(N=Y.length-1;D===void 0&&N>0;)D=E.c2p(Y[N]),N--;D<U&&(R=U,U=D,D=R,pe=!0),ae&&(ie=K,se=Y,K=q.xfill,Y=q.yfill);var ge="default";if(ue?ge=ue==="best"?"smooth":"fast":te._islinear&&ee===0&&Q===0&&c()&&(ge="fast"),ge!=="fast"){var ke=ue==="best"?0:.5;C=Math.max(-ke*w._length,C),O=Math.min((1+ke)*w._length,O),U=Math.max(-ke*E._length,U),D=Math.min((1+ke)*E._length,D)}var Ee,me,oe=Math.round(O-C),re=Math.round(D-U);if(C>=w._length||O<=0||U>=E._length||D<=0)return j.selectAll("image").data([]).exit().remove(),void d(j);ge==="fast"?(Ee=ye,me=ve):(Ee=oe,me=re);var fe=document.createElement("canvas");fe.width=Ee,fe.height=me;var Se,be,we=fe.getContext("2d",{willReadFrequently:!0}),Me=r(te,{noNumericCheck:!0,returnArray:!0});ge==="fast"?(Se=de?function(fr){return ye-1-fr}:p.identity,be=pe?function(fr){return ve-1-fr}:p.identity):(Se=function(fr){return p.constrain(Math.round(w.c2p(K[fr])-C),0,oe)},be=function(fr){return p.constrain(Math.round(E.c2p(Y[fr])-U),0,re)});var Ie,Oe,he,_e,Ae=be(0),De=[Ae,Ae],Le=de?0:1,Be=pe?0:1,Ve=0,Ze=0,rt=0,it=0;function dt(fr,Jt){if(fr!==void 0){var en=Me(fr);return en[0]=Math.round(en[0]),en[1]=Math.round(en[1]),en[2]=Math.round(en[2]),Ve+=Jt,Ze+=en[0]*Jt,rt+=en[1]*Jt,it+=en[2]*Jt,en}return[0,0,0,0]}function mt(fr,Jt,en,Mn){var pn=fr[en.bin0];if(pn===void 0)return dt(void 0,1);var Cn,jn=fr[en.bin1],Bn=Jt[en.bin0],Yn=Jt[en.bin1],dr=jn-pn||0,Zt=Bn-pn||0;return Cn=jn===void 0?Yn===void 0?0:Bn===void 0?2*(Yn-pn):2*(2*Yn-Bn-pn)/3:Yn===void 0?Bn===void 0?0:2*(2*pn-jn-Bn)/3:Bn===void 0?2*(2*Yn-jn-pn)/3:Yn+pn-jn-Bn,dt(pn+en.frac*dr+Mn.frac*(Zt+en.frac*Cn))}if(ge!=="default"){var ht,Qe=0;try{ht=new Uint8Array(Ee*me*4)}catch{ht=new Array(Ee*me*4)}if(ge==="smooth"){var Je,wt,Pt,It=ie||K,At=se||Y,qe=new Array(It.length),Ye=new Array(At.length),Ne=new Array(oe),We=ie?g:m,at=se?g:m;for(N=0;N<It.length;N++)qe[N]=Math.round(w.c2p(It[N])-C);for(N=0;N<At.length;N++)Ye[N]=Math.round(E.c2p(At[N])-U);for(N=0;N<oe;N++)Ne[N]=We(N,qe);for(W=0;W<re;W++)for(wt=J[(Je=at(W,Ye)).bin0],Pt=J[Je.bin1],N=0;N<oe;N++,Qe+=4)y(ht,Qe,_e=mt(wt,Pt,Ne[N],Je))}else for(W=0;W<ve;W++)for(he=J[W],De=be(W),N=0;N<ye;N++)_e=dt(he[N],1),y(ht,Qe=4*(De*ye+Se(N)),_e);var tt=we.createImageData(Ee,me);try{tt.data.set(ht)}catch{var Re=tt.data,Fe=Re.length;for(W=0;W<Fe;W++)Re[W]=ht[W]}we.putImageData(tt,0,0)}else{var nt=Math.floor(ee/2),Ge=Math.floor(Q/2);for(W=0;W<ve;W++)if(he=J[W],De.reverse(),De[Be]=be(W+1),De[0]!==De[1]&&De[0]!==void 0&&De[1]!==void 0)for(Ie=[Oe=Se(0),Oe],N=0;N<ye;N++)Ie.reverse(),Ie[Le]=Se(N+1),Ie[0]!==Ie[1]&&Ie[0]!==void 0&&Ie[1]!==void 0&&(_e=dt(he[N],(Ie[1]-Ie[0])*(De[1]-De[0])),we.fillStyle="rgba("+_e.join(",")+")",we.fillRect(Ie[0]+nt,De[0]+Ge,Ie[1]-Ie[0]-ee,De[1]-De[0]-Q))}Ze=Math.round(Ze/Ve),rt=Math.round(rt/Ve),it=Math.round(it/Ve);var ut=k("rgb("+Ze+","+rt+","+it+")");v._hmpixcount=(v._hmpixcount||0)+Ve,v._hmlumcount=(v._hmlumcount||0)+Ve*ut.getLuminance();var pt=j.selectAll("image").data(P);pt.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),pt.attr({height:re,width:oe,x:C,y:U,"xlink:href":fe.toDataURL("image/png")}),ge!=="fast"||ue||pt.attr("style",h),d(j);var gt=te.texttemplate;if(gt){var ct=n(te),Tt={type:"linear",range:[ct.min,ct.max],_separators:w._separators,_numFormat:w._numFormat},vt=te.type==="histogram2dcontour",kt=te.type==="contour",Lt=kt?ve-1:ve,Ct=kt?1:0,Dt=kt?ye-1:ye,Gt=[];for(N=kt?1:0;N<Lt;N++){var tn;if(kt)tn=q.y[N];else if(vt){if(N===0||N===ve-1)continue;tn=q.y[N]}else if(q.yCenter)tn=q.yCenter[N];else{if(N+1===ve&&q.y[N+1]===void 0)continue;tn=(q.y[N]+q.y[N+1])/2}var jt=Math.round(E.c2p(tn));if(!(0>jt||jt>E._length))for(W=Ct;W<Dt;W++){var Wt;if(kt)Wt=q.x[W];else if(vt){if(W===0||W===ye-1)continue;Wt=q.x[W]}else if(q.xCenter)Wt=q.xCenter[W];else{if(W+1===ye&&q.x[W+1]===void 0)continue;Wt=(q.x[W]+q.x[W+1])/2}var Ft=Math.round(w.c2p(Wt));if(!(0>Ft||Ft>w._length)){var Ln=t({x:Wt,y:tn},te,v._fullLayout);Ln.x=Wt,Ln.y=tn;var bn=q.z[N][W];bn===void 0?(Ln.z="",Ln.zLabel=""):(Ln.z=bn,Ln.zLabel=b.tickText(Tt,bn,"hover").text);var hn=q.text&&q.text[N]&&q.text[N][W];hn!==void 0&&hn!==!1||(hn=""),Ln.text=hn;var Kt=p.texttemplateString(gt,Ln,v._fullLayout._d3locale,Ln,te._meta||{});if(Kt){var sn=Kt.split("<br>"),Qt=sn.length,cn=0;for(F=0;F<Qt;F++)cn=Math.max(cn,sn[F].length);Gt.push({l:Qt,c:cn,t:Kt,x:Ft,y:jt,z:bn})}}}}var vn=te.textfont,xn=vn.size,An=v._fullLayout.font.size;if(!xn||xn==="auto"){var Sn=1/0,Tn=1/0,Rn=0,In=0;for(F=0;F<Gt.length;F++){var Xn=Gt[F];if(Rn=Math.max(Rn,Xn.l),In=Math.max(In,Xn.c),F<Gt.length-1){var Vn=Gt[F+1],er=Math.abs(Vn.x-Xn.x),Wn=Math.abs(Vn.y-Xn.y);er&&(Sn=Math.min(Sn,er)),Wn&&(Tn=Math.min(Tn,Wn))}}isFinite(Sn)&&isFinite(Tn)?(Sn-=ee,Tn-=Q,Sn/=In,Tn/=Rn,Sn/=l/2,Tn/=l,xn=Math.min(Math.floor(Sn),Math.floor(Tn),An)):xn=An}if(xn<=0||!isFinite(xn))return;x(j).data(Gt).enter().append("g").classed(u,1).append("text").attr("text-anchor","middle").each(function(fr){var Jt=A.select(this),en=vn.color;en&&en!=="auto"||(en=i.contrast(fr.z===void 0?v._fullLayout.plot_bgcolor:"rgba("+Me(fr.z).join()+")")),Jt.attr("data-notex",1).call(s.positionText,function(Mn){return Mn.x}(fr),function(Mn){return Mn.y-xn*(Mn.l*l/2-1)}(fr)).call(T.font,{family:vn.family,size:xn,color:en,weight:vn.weight,style:vn.style,variant:vn.variant,textcase:vn.textcase,lineposition:vn.lineposition,shadow:vn.shadow}).text(fr.t).call(s.convertToTspans,v)})}})}},41648:function(X,I,e){"use strict";var A=e(33428);X.exports=function(k){A.select(k).selectAll(".hm image").style("opacity",function(o){return o.trace.opacity})}},82748:function(X){"use strict";X.exports=function(I,e,A){A("zsmooth")===!1&&(A("xgap"),A("ygap")),A("zhoverformat")}},51264:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(24040);function T(b,p){var s=p(b);return(s?p(b+"type","array"):"scaled")==="scaled"&&(p(b+"0"),p("d"+b)),s}X.exports=function(b,p,s,t,i,n){var r,a,l=s("z");if(i=i||"x",n=n||"y",l===void 0||!l.length)return 0;if(k.isArray1D(l)){r=s(i),a=s(n);var c=k.minRowLength(r),h=k.minRowLength(a);if(c===0||h===0)return 0;p._length=Math.min(c,h,l.length)}else{if(r=T(i,s),a=T(n,s),!function(u){for(var x,d=!0,m=!1,g=!1,y=0;y<u.length;y++){if(x=u[y],!k.isArrayOrTypedArray(x)){d=!1;break}x.length>0&&(m=!0);for(var v=0;v<x.length;v++)if(A(x[v])){g=!0;break}}return d&&m&&g}(l))return 0;s("transpose"),p._length=null}return b.type==="heatmapgl"||o.getComponentMethod("calendars","handleTraceDefaults")(b,p,[i,n],t),!0}},74512:function(X,I,e){"use strict";for(var A=e(83328),k=e(49084),o=e(92880).extendFlat,T=e(67824).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],p={},s=0;s<b.length;s++){var t=b[s];p[t]=A[t]}p.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(p,k("",{cLetter:"z",autoColorDflt:!1})),X.exports=T(p,"calc","nested")},84656:function(X,I,e){"use strict";var A=e(67792).gl_heatmap2d,k=e(54460),o=e(43080);function T(p,s){this.scene=p,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=A(p.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(p){var s=this.options,t=s.shape,i=p.pointId,n=i%t[0],r=Math.floor(i/t[0]),a=i;return{trace:this,dataCoord:p.dataCoord,traceCoord:[s.x[n],s.y[r],s.z[a]],textLabel:this.textLabels[i],name:this.name,pointIndex:[r,n],hoverinfo:this.hoverinfo}},b.update=function(p,s){var t=s[0];this.index=p.index,this.name=p.name,this.hoverinfo=p.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var n=i[0].length,r=i.length;this.options.shape=[n,r],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=p.zsmooth;var a=function(x){for(var d=x.colorscale,m=x.zmin,g=x.zmax,y=d.length,v=new Array(y),_=new Array(4*y),f=0;f<y;f++){var S=d[f],w=o(S[1]);v[f]=m+S[0]*(g-m);for(var E=0;E<4;E++)_[4*f+E]=w[E]}return{colorLevels:v,colorValues:_}}(p);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],p.text),this.heatmap.update(this.options);var l,c,h=this.scene.xaxis,u=this.scene.yaxis;p.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},c={ppad:t.y[1]-t.y[0]}),p._extremes[h._id]=k.findExtremes(h,t.x,l),p._extremes[u._id]=k.findExtremes(u,t.y,c)},b.dispose=function(){this.heatmap.dispose()},X.exports=function(p,s,t){var i=new T(p,s.uid);return i.update(s,t),i}},86464:function(X,I,e){"use strict";var A=e(3400),k=e(51264),o=e(27260),T=e(74512);X.exports=function(b,p,s,t){function i(n,r){return A.coerce(b,p,T,n,r)}k(b,p,i,t)?(i("text"),i("zsmooth"),o(b,p,t,i,{prefix:"",cLetter:"z"})):p.visible=!1}},45536:function(X,I,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),X.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(X,I,e){"use strict";var A=e(20832),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(25376),p=e(11120),s=e(73316),t=e(92880).extendFlat;X.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},A.text,{}),hovertext:t({},A.hovertext,{}),orientation:A.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:p("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:p("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},A.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:A.insidetextanchor,textangle:A.textangle,cliponaxis:A.cliponaxis,constraintext:A.constraintext,marker:A.marker,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,_deprecated:{bardir:A._deprecated.bardir},zorder:A.zorder}},2e3:function(X){"use strict";X.exports=function(I,e){for(var A=I.length,k=0,o=0;o<A;o++)e[o]?(I[o]/=e[o],k+=I[o]):I[o]=null;return k}},11120:function(X){"use strict";X.exports=function(I,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(X,I,e){"use strict";var A=e(38248);X.exports={count:function(k,o,T){return T[k]++,1},sum:function(k,o,T,b){var p=b[o];return A(p)?(p=Number(p),T[k]+=p,p):0},avg:function(k,o,T,b,p){var s=b[o];return A(s)&&(s=Number(s),T[k]+=s,p[k]++),0},min:function(k,o,T,b){var p=b[o];if(A(p)){if(p=Number(p),!A(T[k]))return T[k]=p,p;if(T[k]>p){var s=p-T[k];return T[k]=p,s}}return 0},max:function(k,o,T,b){var p=b[o];if(A(p)){if(p=Number(p),!A(T[k]))return T[k]=p,p;if(T[k]<p){var s=p-T[k];return T[k]=p,s}}return 0}}},67712:function(X,I,e){"use strict";var A=e(39032),k=A.ONEAVGYEAR,o=A.ONEAVGMONTH,T=A.ONEDAY,b=A.ONEHOUR,p=A.ONEMIN,s=A.ONESEC,t=e(54460).tickIncrement;function i(l,c,h,u){if(l*c<=0)return 1/0;for(var x=Math.abs(c-l),d=h.type==="date",m=n(x,d),g=0;g<10;g++){var y=n(80*m,d);if(m===y||!r(y,l,c,d,h,u))break;m=y}return m}function n(l,c){return c&&l>s?l>T?l>1.1*k?k:l>1.1*o?o:T:l>b?b:l>p?p:s:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function r(l,c,h,u,x,d){if(u&&l>T){var m=a(c,x,d),g=a(h,x,d),y=l===k?0:1;return m[y]!==g[y]}return Math.floor(h/l)-Math.floor(c/l)>.1}function a(l,c,h){var u=c.c2d(l,k,h).split("-");return u[0]===""&&(u.unshift(),u[0]="-"+u[0]),u}X.exports=function(l,c,h,u,x){var d,m,g=-1.1*c,y=-.1*c,v=l-y,_=h[0],f=h[1],S=Math.min(i(_+y,_+v,u,x),i(f+y,f+v,u,x)),w=Math.min(i(_+g,_+y,u,x),i(f+g,f+y,u,x));if(S>w&&w<Math.abs(f-_)/4e3?(d=S,m=!1):(d=Math.min(S,w),m=!0),u.type==="date"&&d>T){var E=d===k?1:6,P=d===k?"M12":"M1";return function(C,O){var R=u.c2d(C,k,x),U=R.indexOf("-",E);U>0&&(R=R.substr(0,U));var D=u.d2c(R,0,x);if(D<C){var N=t(D,P,!1,x);(D+N)/2<C+l&&(D=N)}return O&&m?t(D,P,!0,x):D}}return function(C,O){var R=d*Math.round(C/d);return R+d/10<C&&R+.9*d<C+l&&(R+=d),O&&m&&(R-=d),R}}},35852:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(24040),T=e(54460),b=e(84664),p=e(16964),s=e(10648),t=e(2e3),i=e(67712);function n(r,a,l,c,h){var u,x,d,m,g,y,v,_=c+"bins",f=r._fullLayout,S=a["_"+c+"bingroup"],w=f._histogramBinOpts[S],E=f.barmode==="overlay",P=function(pe){return l.r2c(pe,0,m)},C=function(pe){return l.c2r(pe,0,m)},O=l.type==="date"?function(pe){return pe||pe===0?k.cleanDate(pe,null,m):null}:function(pe){return A(pe)?Number(pe):null};function R(pe,ge,ke){ge[pe+"Found"]?(ge[pe]=O(ge[pe]),ge[pe]===null&&(ge[pe]=ke[pe])):(y[pe]=ge[pe]=ke[pe],k.nestedProperty(x[0],_+"."+pe).set(ke[pe]))}if(a["_"+c+"autoBinFinished"])delete a["_"+c+"autoBinFinished"];else{x=w.traces;var U=[],D=!0,N=!1,W=!1;for(u=0;u<x.length;u++)if((d=x[u]).visible){var F=w.dirs[u];g=d["_"+F+"pos0"]=l.makeCalcdata(d,F),U=k.concat(U,g),delete d["_"+c+"autoBinFinished"],a.visible===!0&&(D?D=!1:(delete d._autoBin,d["_"+c+"autoBinFinished"]=1),o.traceIs(d,"2dMap")&&(N=!0),d.type==="histogram2dcontour"&&(W=!0))}m=x[0][c+"calendar"];var j=T.autoBin(U,l,w.nbins,N,m,w.sizeFound&&w.size),q=x[0]._autoBin={};if(y=q[w.dirs[0]]={},W&&(w.size||(j.start=C(T.tickIncrement(P(j.start),j.size,!0,m))),w.end===void 0&&(j.end=C(T.tickIncrement(P(j.end),j.size,!1,m)))),E&&!o.traceIs(a,"2dMap")&&j._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&a.bingroup===""&&a.xbins===void 0){if(h)return[j,g,!0];j=function(pe,ge,ke,Ee,me){var oe,re,fe,Se=pe._fullLayout,be=function(Ze,rt){for(var it=rt.xaxis,dt=rt.yaxis,mt=rt.orientation,ht=[],Qe=Ze._fullData,Je=0;Je<Qe.length;Je++){var wt=Qe[Je];wt.type==="histogram"&&wt.visible===!0&&wt.orientation===mt&&wt.xaxis===it&&wt.yaxis===dt&&ht.push(wt)}return ht}(pe,ge),we=!1,Me=1/0,Ie=[ge];for(oe=0;oe<be.length;oe++)if((re=be[oe])===ge)we=!0;else if(we){var Oe=n(pe,re,ke,Ee,!0),he=Oe[0],_e=Oe[2];re["_"+Ee+"autoBinFinished"]=1,re["_"+Ee+"pos0"]=Oe[1],_e?Ie.push(re):Me=Math.min(Me,he.size)}else fe=Se._histogramBinOpts[re["_"+Ee+"bingroup"]],Me=Math.min(Me,fe.size||re[me].size);var Ae=new Array(Ie.length);for(oe=0;oe<Ie.length;oe++)for(var De=Ie[oe]["_"+Ee+"pos0"],Le=0;Le<De.length;Le++)if(De[Le]!==void 0){Ae[oe]=De[Le];break}for(isFinite(Me)||(Me=k.distinctVals(Ae).minDiff),oe=0;oe<Ie.length;oe++){var Be=(re=Ie[oe])[Ee+"calendar"],Ve={start:ke.c2r(Ae[oe]-Me/2,0,Be),end:ke.c2r(Ae[oe]+Me/2,0,Be),size:Me};re._input[me]=re[me]=Ve,(fe=Se._histogramBinOpts[re["_"+Ee+"bingroup"]])&&k.extendFlat(fe,Ve)}return ge[me]}(r,a,l,c,_)}(v=d.cumulative||{}).enabled&&v.currentbin!=="include"&&(v.direction==="decreasing"?j.start=C(T.tickIncrement(P(j.start),j.size,!0,m)):j.end=C(T.tickIncrement(P(j.end),j.size,!1,m))),w.size=j.size,w.sizeFound||(y.size=j.size,k.nestedProperty(x[0],_+".size").set(j.size)),R("start",w,j),R("end",w,j)}g=a["_"+c+"pos0"],delete a["_"+c+"pos0"];var te=a._input[_]||{},ee=k.extendFlat({},w),Q=w.start,J=l.r2l(te.start),K=J!==void 0;if((w.startFound||K)&&J!==l.r2l(Q)){var Y=K?J:k.aggNums(Math.min,null,g),ie={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:w.size,tick0:Q,calendar:m,range:[Y,T.tickIncrement(Y,w.size,!1,m)].map(l.l2r)},se=T.tickFirst(ie);se>l.r2l(Y)&&(se=T.tickIncrement(se,w.size,!0,m)),ee.start=l.l2r(se),K||k.nestedProperty(a,_+".start").set(ee.start)}var ae=w.end,ue=l.r2l(te.end),ve=ue!==void 0;if((w.endFound||ve)&&ue!==l.r2l(ae)){var ye=ve?ue:k.aggNums(Math.max,null,g);ee.end=l.l2r(ye),ve||k.nestedProperty(a,_+".start").set(ee.end)}var de="autobin"+c;return a._input[de]===!1&&(a._input[_]=k.extendFlat({},a[_]||{}),delete a._input[de],delete a[de]),[ee,g]}X.exports={calc:function(r,a){var l,c,h,u,x=[],d=[],m=a.orientation==="h",g=T.getFromId(r,m?a.yaxis:a.xaxis),y=m?"y":"x",v={x:"y",y:"x"}[y],_=a[y+"calendar"],f=a.cumulative,S=n(r,a,g,y),w=S[0],E=S[1],P=typeof w.size=="string",C=[],O=P?C:w,R=[],U=[],D=[],N=0,W=a.histnorm,F=a.histfunc,j=W.indexOf("density")!==-1;f.enabled&&j&&(W=W.replace(/ ?density$/,""),j=!1);var q,te=F==="max"||F==="min"?null:0,ee=p.count,Q=s[W],J=!1,K=function(re){return g.r2c(re,0,_)};for(k.isArrayOrTypedArray(a[v])&&F!=="count"&&(q=a[v],J=F==="avg",ee=p[F]),l=K(w.start),h=K(w.end)+(l-T.tickIncrement(l,w.size,!1,_))/1e6;l<h&&x.length<1e6&&(c=T.tickIncrement(l,w.size,!1,_),x.push((l+c)/2),d.push(te),D.push([]),C.push(l),j&&R.push(1/(c-l)),J&&U.push(0),!(c<=l));)l=c;C.push(l),P||g.type!=="date"||(O={start:K(O.start),end:K(O.end),size:O.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var Y=a["_"+y+"bingroup"],ie={leftGap:1/0,rightGap:1/0};Y&&(r._fullLayout._roundFnOpts[Y]||(r._fullLayout._roundFnOpts[Y]=ie),ie=r._fullLayout._roundFnOpts[Y]);var se,ae=d.length,ue=!0,ve=ie.leftGap,ye=ie.rightGap,de={};for(l=0;l<E.length;l++){var pe=E[l];(u=k.findBin(pe,O))>=0&&u<ae&&(N+=ee(u,l,d,q,U),ue&&D[u].length&&pe!==E[D[u][0]]&&(ue=!1),D[u].push(l),de[l]=u,ve=Math.min(ve,pe-C[u]),ye=Math.min(ye,C[u+1]-pe))}ie.leftGap=ve,ie.rightGap=ye,ue||(se=function(re,fe){return function(){var Se=r._fullLayout._roundFnOpts[Y];return i(Se.leftGap,Se.rightGap,C,g,_)(re,fe)}}),J&&(N=t(d,U)),Q&&Q(d,N,R),f.enabled&&function(re,fe,Se){var be,we,Me;function Ie(he){Me=re[he],re[he]/=2}function Oe(he){we=re[he],re[he]=Me+we/2,Me+=we}if(Se==="half")if(fe==="increasing")for(Ie(0),be=1;be<re.length;be++)Oe(be);else for(Ie(re.length-1),be=re.length-2;be>=0;be--)Oe(be);else if(fe==="increasing"){for(be=1;be<re.length;be++)re[be]+=re[be-1];Se==="exclude"&&(re.unshift(0),re.pop())}else{for(be=re.length-2;be>=0;be--)re[be]+=re[be+1];Se==="exclude"&&(re.push(0),re.shift())}}(d,f.direction,f.currentbin);var ge=Math.min(x.length,d.length),ke=[],Ee=0,me=ge-1;for(l=0;l<ge;l++)if(d[l]){Ee=l;break}for(l=ge-1;l>=Ee;l--)if(d[l]){me=l;break}for(l=Ee;l<=me;l++)if(A(x[l])&&A(d[l])){var oe={p:x[l],s:d[l],b:0};f.enabled||(oe.pts=D[l],ue?oe.ph0=oe.ph1=D[l].length?E[D[l][0]]:x[l]:(a._computePh=!0,oe.ph0=se(C[l]),oe.ph1=se(C[l+1],!0))),ke.push(oe)}return ke.length===1&&(ke[0].width1=T.tickIncrement(ke[0].p,w.size,!1,_)-ke[0].p),b(ke,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(ke,a,de),ke},calcAllAutoBins:n}},73316:function(X){"use strict";X.exports={eventDataKeys:["binNumber"]}},80536:function(X,I,e){"use strict";var A=e(3400),k=e(79811),o=e(24040).traceIs,T=e(20011),b=e(31508).validateCornerradius,p=A.nestedProperty,s=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];X.exports=function(n,r){var a,l,c,h,u,x,d,m=r._histogramBinOpts={},g=[],y={},v=[];function _(te,ee){return A.coerce(a._input,a,a._module.attributes,te,ee)}function f(te){return te.orientation==="v"?"x":"y"}function S(te,ee,Q){var J=te.uid+"__"+Q;ee||(ee=J);var K=function(ae,ue){return k.getFromTrace({_fullLayout:r},ae,ue).type}(te,Q),Y=te[Q+"calendar"]||"",ie=m[ee],se=!0;ie&&(K===ie.axType&&Y===ie.calendar?(se=!1,ie.traces.push(te),ie.dirs.push(Q)):(ee=J,K!==ie.axType&&A.warn(["Attempted to group the bins of trace",te.index,"set on a","type:"+K,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),Y!==ie.calendar&&A.warn(["Attempted to group the bins of trace",te.index,"set with a",Y,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),se&&(m[ee]={traces:[te],dirs:[Q],axType:K,calendar:te[Q+"calendar"]||""}),te["_"+Q+"bingroup"]=ee}for(u=0;u<n.length;u++)if(a=n[u],o(a,"histogram")){if(g.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,a.type==="histogram"){var w=_("marker.cornerradius",r.barcornerradius);a.marker&&(a.marker.cornerradius=b(w))}o(a,"2dMap")||T(a._input,a,r,_)}var E=r._alignmentOpts||{};for(u=0;u<g.length;u++){if(a=g[u],c="",!o(a,"2dMap")){if(h=f(a),r.barmode==="group"&&a.alignmentgroup){var P=a[h+"axis"],C=s(r,P)+a.orientation;(E[C]||{})[a.alignmentgroup]&&(c=C)}c||r.barmode==="overlay"||(c=s(r,a.xaxis)+s(r,a.yaxis)+f(a))}c?(y[c]||(y[c]=[]),y[c].push(a)):v.push(a)}for(c in y)if((l=y[c]).length!==1){var O=!1;for(l.length&&(a=l[0],O=_("bingroup")),c=O||c,u=0;u<l.length;u++){var R=(a=l[u])._input.bingroup;R&&R!==c&&A.warn(["Trace",a.index,"must match","within bingroup",c+".","Ignoring its bingroup:",R,"setting."].join(" ")),a.bingroup=c,S(a,c,f(a))}}else v.push(l[0]);for(u=0;u<v.length;u++){a=v[u];var U=_("bingroup");if(o(a,"2dMap"))for(d=0;d<2;d++){var D=_((h=i[d])+"bingroup",U?U+"__"+h:null);S(a,D,h)}else S(a,U,f(a))}for(c in m){var N=m[c];for(l=N.traces,x=0;x<t.length;x++){var W,F,j=t[x],q=j.name;if(q!=="nbins"||!N.sizeFound){for(u=0;u<l.length;u++){if(a=l[u],h=N.dirs[u],W=j.aStr[h],p(a._input,W).get()!==void 0){N[q]=_(W),N[q+"Found"]=!0;break}(F=(a._autoBin||{})[h]||{})[q]&&p(a,W).set(F[q])}if(q==="start"||q==="end")for(;u<l.length;u++)(a=l[u])["_"+h+"bingroup"]&&_(W,(F=(a._autoBin||{})[h]||{})[q]);q!=="nbins"||N.sizeFound||N.nbinsFound||(a=l[0],N[q]=_(W))}}}}},6616:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(76308),T=e(31508).handleText,b=e(55592),p=e(40196);X.exports=function(s,t,i,n){function r(y,v){return k.coerce(s,t,p,y,v)}var a=r("x"),l=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var c=r("textposition");T(s,t,n,r,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var h=r("orientation",l&&!a?"h":"v"),u=h==="v"?"x":"y",x=h==="v"?"y":"x",d=a&&l?Math.min(k.minRowLength(a)&&k.minRowLength(l)):k.minRowLength(t[u]||[]);if(d){t._length=d,A.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],n),t[x]&&r("histfunc"),r("histnorm"),r("autobin"+u),b(s,t,r,i,n),k.coerceSelectionMarkerOpacity(t,r);var m=(t.marker.line||{}).color,g=A.getComponentMethod("errorbars","supplyDefaults");g(s,t,m||o.defaultLine,{axis:"y"}),g(s,t,m||o.defaultLine,{axis:"x",inherit:"y"}),r("zorder")}else t.visible=!1}},84980:function(X){"use strict";X.exports=function(I,e,A,k,o){if(I.x="xVal"in e?e.xVal:e.x,I.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(I.z=e.zLabelVal),e.xa&&(I.xaxis=e.xa),e.ya&&(I.yaxis=e.ya),!(A.cumulative||{}).enabled){var T,b=Array.isArray(o)?k[0].pts[o[0]][o[1]]:k[o].pts;if(I.pointNumbers=b,I.binNumber=I.pointNumber,delete I.pointNumber,delete I.pointIndex,A._indexToPoints){T=[];for(var p=0;p<b.length;p++)T=T.concat(A._indexToPoints[b[p]])}else T=b;I.pointIndices=T}return I}},43339:function(X,I,e){"use strict";var A=e(63400).hoverPoints,k=e(54460).hoverLabelText;X.exports=function(o,T,b,p,s){var t=A(o,T,b,p,s);if(t){var i=(o=t[0]).cd[o.index],n=o.cd[0].trace;if(!n.cumulative.enabled){var r=n.orientation==="h"?"y":"x";o[r+"Label"]=k(o[r+"a"],[i.ph0,i.ph1],n[r+"hoverformat"])}return t}}},42600:function(X,I,e){"use strict";X.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(X){"use strict";X.exports={percent:function(I,e){for(var A=I.length,k=100/e,o=0;o<A;o++)I[o]*=k},probability:function(I,e){for(var A=I.length,k=0;k<A;k++)I[k]/=e},density:function(I,e,A,k){var o=I.length;k=k||1;for(var T=0;T<o;T++)I[T]*=A[T]*k},"probability density":function(I,e,A,k){var o=I.length;k&&(e/=k);for(var T=0;T<o;T++)I[T]*=A[T]/e}}},37008:function(X,I,e){"use strict";var A=e(40196),k=e(11120),o=e(83328),T=e(45464),b=e(29736).axisHoverFormat,p=e(21776).Ks,s=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;X.exports=i({x:A.x,y:A.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:k("x"),nbinsy:A.nbinsy,ybins:k("y"),autobinx:A.autobinx,autobiny:A.autobiny,bingroup:i({},A.bingroup,{}),xbingroup:i({},A.bingroup,{}),ybingroup:i({},A.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:p({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(16964),T=e(10648),b=e(2e3),p=e(67712),s=e(35852).calcAllAutoBins;function t(r,a,l,c){var h,u=new Array(r);if(c)for(h=0;h<r;h++)u[h]=1/(a[h+1]-a[h]);else{var x=1/l;for(h=0;h<r;h++)u[h]=x}return u}function i(r,a){return{start:r(a.start),end:r(a.end),size:a.size}}function n(r,a,l,c,h,u){var x,d=r.length-1,m=new Array(d),g=p(l,c,r,h,u);for(x=0;x<d;x++){var y=(a||[])[x];m[x]=y===void 0?[g(r[x]),g(r[x+1],!0)]:[y,y]}return m}X.exports=function(r,a){var l,c,h,u,x=k.getFromId(r,a.xaxis),d=k.getFromId(r,a.yaxis),m=a.xcalendar,g=a.ycalendar,y=function(dt){return x.r2c(dt,0,m)},v=function(dt){return d.r2c(dt,0,g)},_=s(r,a,x,"x"),f=_[0],S=_[1],w=s(r,a,d,"y"),E=w[0],P=w[1],C=a._length;S.length>C&&S.splice(C,S.length-C),P.length>C&&P.splice(C,P.length-C);var O=[],R=[],U=[],D=typeof f.size=="string",N=typeof E.size=="string",W=[],F=[],j=D?W:f,q=N?F:E,te=0,ee=[],Q=[],J=a.histnorm,K=a.histfunc,Y=J.indexOf("density")!==-1,ie=K==="max"||K==="min"?null:0,se=o.count,ae=T[J],ue=!1,ve=[],ye=[],de="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";de&&K!=="count"&&(ue=K==="avg",se=o[K]);var pe=f.size,ge=y(f.start),ke=y(f.end)+(ge-k.tickIncrement(ge,pe,!1,m))/1e6;for(l=ge;l<ke;l=k.tickIncrement(l,pe,!1,m))R.push(ie),W.push(l),ue&&U.push(0);W.push(l);var Ee,me=R.length,oe=(l-ge)/me,re=(Ee=ge+oe/2,x.c2r(Ee,0,m)),fe=E.size,Se=v(E.start),be=v(E.end)+(Se-k.tickIncrement(Se,fe,!1,g))/1e6;for(l=Se;l<be;l=k.tickIncrement(l,fe,!1,g)){O.push(R.slice()),F.push(l);var we=new Array(me);for(c=0;c<me;c++)we[c]=[];Q.push(we),ue&&ee.push(U.slice())}F.push(l);var Me=O.length,Ie=(l-Se)/Me,Oe=function(dt){return d.c2r(dt,0,g)}(Se+Ie/2);Y&&(ve=t(R.length,j,oe,D),ye=t(O.length,q,Ie,N)),D||x.type!=="date"||(j=i(y,j)),N||d.type!=="date"||(q=i(v,q));var he=!0,_e=!0,Ae=new Array(me),De=new Array(Me),Le=1/0,Be=1/0,Ve=1/0,Ze=1/0;for(l=0;l<C;l++){var rt=S[l],it=P[l];h=A.findBin(rt,j),u=A.findBin(it,q),h>=0&&h<me&&u>=0&&u<Me&&(te+=se(h,l,O[u],de,ee[u]),Q[u][h].push(l),he&&(Ae[h]===void 0?Ae[h]=rt:Ae[h]!==rt&&(he=!1)),_e&&(De[u]===void 0?De[u]=it:De[u]!==it&&(_e=!1)),Le=Math.min(Le,rt-W[h]),Be=Math.min(Be,W[h+1]-rt),Ve=Math.min(Ve,it-F[u]),Ze=Math.min(Ze,F[u+1]-it))}if(ue)for(u=0;u<Me;u++)te+=b(O[u],ee[u]);if(ae)for(u=0;u<Me;u++)ae(O[u],te,ve,ye[u]);return{x:S,xRanges:n(W,he&&Ae,Le,Be,x,m),x0:re,dx:oe,y:P,yRanges:n(F,_e&&De,Ve,Ze,d,g),y0:Oe,dy:Ie,z:O,pts:Q}}},99784:function(X,I,e){"use strict";var A=e(3400),k=e(56408),o=e(82748),T=e(27260),b=e(39096),p=e(37008);X.exports=function(s,t,i,n){function r(a,l){return A.coerce(s,t,p,a,l)}k(s,t,r,n),t.visible!==!1&&(o(s,t,r,n),T(s,t,n,r,{prefix:"",cLetter:"z"}),r("hovertemplate"),b(r,n),r("xhoverformat"),r("yhoverformat"))}},59576:function(X,I,e){"use strict";var A=e(55512),k=e(54460).hoverLabelText;X.exports=function(o,T,b,p,s){var t=A(o,T,b,p,s);if(t){var i=(o=t[0]).index,n=i[0],r=i[1],a=o.cd[0],l=a.trace,c=a.xRanges[r],h=a.yRanges[n];return o.xLabel=k(o.xa,[c[0],c[1]],l.xhoverformat),o.yLabel=k(o.ya,[h[0],h[1]],l.yhoverformat),t}}},21536:function(X,I,e){"use strict";X.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(X,I,e){"use strict";var A=e(24040),k=e(3400);X.exports=function(o,T,b,p){var s=b("x"),t=b("y"),i=k.minRowLength(s),n=k.minRowLength(t);i&&n?(T._length=Math.min(i,n),A.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],p),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},81220:function(X,I,e){"use strict";var A=e(37008),k=e(67104),o=e(49084),T=e(29736).axisHoverFormat,b=e(92880).extendFlat;X.exports=b({x:A.x,y:A.y,z:A.z,marker:A.marker,histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:A.xbins,nbinsy:A.nbinsy,ybins:A.ybins,autobinx:A.autobinx,autobiny:A.autobiny,bingroup:A.bingroup,xbingroup:A.xbingroup,ybingroup:A.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:A.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(X,I,e){"use strict";var A=e(3400),k=e(56408),o=e(84952),T=e(97680),b=e(39096),p=e(81220);X.exports=function(s,t,i,n){function r(a,l){return A.coerce(s,t,p,a,l)}k(s,t,r,n),t.visible!==!1&&(o(s,t,r,function(a){return A.coerce2(s,t,p,a)}),T(s,t,r,n),r("xhoverformat"),r("yhoverformat"),r("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(r,n))}},65664:function(X,I,e){"use strict";X.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),p=e(424),s=e(40516),t=e(32984),i=e(92880).extendFlat,n=e(98192).c;X.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:p.marker.colors,line:p.marker.line,pattern:n,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:p.leaf,pathbar:s.pathbar,text:b.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:p.hoverinfo,hovertemplate:A({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:p.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(X,I,e){"use strict";var A=e(7316);I.name="icicle",I.plot=function(k,o,T,b){A.plotBasePlot(I.name,k,o,T,b)},I.clean=function(k,o,T,b){A.cleanBasePlot(I.name,k,o,T,b)}},73876:function(X,I,e){"use strict";var A=e(3776);I.r=function(k,o){return A.calc(k,o)},I.q=function(k){return A._runCrossTraceCalc("icicle",k)}},7045:function(X,I,e){"use strict";var A=e(3400),k=e(97376),o=e(76308),T=e(86968).Q,b=e(31508).handleText,p=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;X.exports=function(r,a,l,c){function h(v,_){return A.coerce(r,a,k,v,_)}var u=h("labels"),x=h("parents");if(u&&u.length&&x&&x.length){var d=h("values");d&&d.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var m=h("text");h("texttemplate"),a.texttemplate||h("textinfo",A.isArrayOrTypedArray(m)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");b(r,a,c,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),s(r,a,c,h);var y=a._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis;y&&n(r,a,c,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",y?1:.7),a._hovered={marker:{line:{width:2,color:o.contrast(c.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*p),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,c,h),a._length=null}else a.visible=!1}},67880:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(25132),p=e(47192).styleOne,s=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,r=!1;X.exports=function(a,l,c,h,u){var x=u.width,d=u.height,m=u.viewX,g=u.viewY,y=u.pathSlice,v=u.toMoveInsideSlice,_=u.strTransform,f=u.hasTransition,S=u.handleSlicesExit,w=u.makeUpdateSliceInterpolator,E=u.makeUpdateTextInterpolator,P=u.prevEntry,C=a._context.staticPlot,O=a._fullLayout,R=l[0].trace,U=R.textposition.indexOf("left")!==-1,D=R.textposition.indexOf("right")!==-1,N=R.textposition.indexOf("bottom")!==-1,W=b(c,[x,d],{flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,orientation:R.tiling.orientation,pad:{inner:R.tiling.pad},maxDepth:R._maxDepth}).descendants(),F=1/0,j=-1/0;W.forEach(function(J){var K=J.depth;K>=R._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(F=Math.min(F,K),j=Math.max(j,K))}),h=h.data(W,t.getPtId),R._maxVisibleLayers=isFinite(j)?j-F+1:0,h.enter().append("g").classed("slice",!0),S(h,r,{},[x,d],y),h.order();var q=null;if(f&&P){var te=t.getPtId(P);h.each(function(J){q===null&&t.getPtId(J)===te&&(q={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var ee=function(){return q||{x0:0,x1:x,y0:0,y1:d}},Q=h;return f&&(Q=Q.transition().each("end",function(){var J=A.select(this);t.setSliceCursor(J,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(J){J._x0=m(J.x0),J._x1=m(J.x1),J._y0=g(J.y0),J._y1=g(J.y1),J._hoverX=m(J.x1-R.tiling.pad),J._hoverY=g(N?J.y1-R.tiling.pad/2:J.y0+R.tiling.pad/2);var K=A.select(this),Y=k.ensureSingle(K,"path","surface",function(ue){ue.style("pointer-events",C?"none":"all")});f?Y.transition().attrTween("d",function(ue){var ve=w(ue,r,ee(),[x,d],{orientation:R.tiling.orientation,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1});return function(ye){return y(ve(ye))}}):Y.attr("d",y),K.call(i,c,a,l,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),Y.call(p,J,R,a,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":J._text=n(J,c,R,l,O)||"";var ie=k.ensureSingle(K,"g","slicetext"),se=k.ensureSingle(ie,"text","",function(ue){ue.attr("data-notex",1)}),ae=k.ensureUniformFontSize(a,t.determineTextFont(R,J,O.font));se.text(J._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":U?"start":"middle").call(o.font,ae).call(T.convertToTspans,a),J.textBB=o.bBox(se.node()),J.transform=v(J,{fontSize:ae.size}),J.transform.fontSize=ae.size,f?se.transition().attrTween("transform",function(ue){var ve=E(ue,r,ee(),[x,d]);return function(ye){return _(ve(ye))}}):se.attr("transform",_(J))}),q}},29044:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(X){"use strict";X.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(X,I,e){"use strict";var A=e(3400),k=e(90676);X.exports=function(o,T){function b(p,s){return A.coerce(o,T,k,p,s)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},25132:function(X,I,e){"use strict";var A=e(74148),k=e(83024);X.exports=function(o,T,b){var p=b.flipX,s=b.flipY,t=b.orientation==="h",i=b.maxDepth,n=T[0],r=T[1];i&&(n=(o.height+1)*T[0]/Math.min(o.height+1,i),r=(o.height+1)*T[1]/Math.min(o.height+1,i));var a=A.partition().padding(b.pad.inner).size(t?[T[1],n]:[T[0],r])(o);return(t||p||s)&&k(a,T,{swapXY:t,flipX:p,flipY:s}),a}},38364:function(X,I,e){"use strict";var A=e(95808),k=e(67880);X.exports=function(o,T,b,p){return A(o,T,b,p,{type:"icicle",drawDescendants:k})}},47192:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function p(s,t,i,n){var r=t.data.data,a=!t.children,l=r.i,c=o.castOption(i,l,"marker.line.color")||k.defaultLine,h=o.castOption(i,l,"marker.line.width")||0;s.call(b,t,i,n).style("stroke-width",h).call(k.stroke,c).style("opacity",a?i.leaf.opacity:null)}X.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");T(s,t,"icicle"),t.each(function(i){var n=A.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(a){A.select(this).call(p,a,r,s)})})},styleOne:p}},95188:function(X,I,e){"use strict";for(var A=e(45464),k=e(52904).zorder,o=e(21776).Ks,T=e(92880).extendFlat,b=e(47797).colormodel,p=["rgb","rgba","rgba256","hsl","hsla"],s=[],t=[],i=0;i<p.length;i++){var n=b[p[i]];s.push("For the `"+p[i]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),t.push("For the `"+p[i]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}X.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:p,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},A.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),zorder:k,transforms:void 0})},93336:function(X,I,e){"use strict";var A=e(3400),k=e(47797),o=e(38248),T=e(54460),b=e(3400).maxRowLength,p=e(18712).i;function s(i,n,r,a){return function(l){return A.constrain((l-i)*n,r,a)}}function t(i,n){return function(r){return A.constrain(r,i,n)}}X.exports=function(i,n){var r,a;if(n._hasZ)r=n.z.length,a=b(n.z);else if(n._hasSource){var l=p(n.source);r=l.height,a=l.width}var c,h=T.getFromId(i,n.xaxis||"x"),u=T.getFromId(i,n.yaxis||"y"),x=h.d2c(n.x0)-n.dx/2,d=u.d2c(n.y0)-n.dy/2,m=[x,x+a*n.dx],g=[d,d+r*n.dy];if(h&&h.type==="log")for(c=0;c<a;c++)m.push(x+c*n.dx);if(u&&u.type==="log")for(c=0;c<r;c++)g.push(d+c*n.dy);return n._extremes[h._id]=T.findExtremes(h,m),n._extremes[u._id]=T.findExtremes(u,g),n._scaler=function(y){var v=k.colormodel[y.colormodel],_=(v.colormodel||y.colormodel).length;y._sArray=[];for(var f=0;f<_;f++)v.min[f]!==y.zmin[f]||v.max[f]!==y.zmax[f]?y._sArray.push(s(y.zmin[f],(v.max[f]-v.min[f])/(y.zmax[f]-y.zmin[f]),v.min[f],v.max[f])):y._sArray.push(t(v.min[f],v.max[f]));return function(S){for(var w=S.slice(0,_),E=0;E<_;E++){var P=w[E];if(!o(P))return!1;w[E]=y._sArray[E](P)}return w}}(n),[{x0:x,y0:d,z:n.z,w:a,h:r}]}},47797:function(X){"use strict";X.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(I){return I.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(I){return I.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(I){return I.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(I){var e=I.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(I){var e=I.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%",""]}}}},13188:function(X,I,e){"use strict";var A=e(3400),k=e(95188),o=e(47797),T=e(81792).IMAGE_URL_PREFIX;X.exports=function(b,p){function s(n,r){return A.coerce(b,p,k,n,r)}s("source"),p.source&&!p.source.match(T)&&delete p.source,p._hasSource=!!p.source;var t,i=s("z");p._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),p._hasZ||p._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),p._hasZ?(s("colormodel","rgb"),s("zmin",(t=o.colormodel[p.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):p._hasSource&&(p.colormodel="rgba256",t=o.colormodel[p.colormodel],p.zmin=t.zminDflt,p.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),p._length=null,s("zorder")):p.visible=!1}},79972:function(X){"use strict";X.exports=function(I,e){return"xVal"in e&&(I.x=e.xVal),"yVal"in e&&(I.y=e.yVal),e.xa&&(I.xaxis=e.xa),e.ya&&(I.yaxis=e.ya),I.color=e.color,I.colormodel=e.trace.colormodel,I.z||(I.z=e.color),I}},18712:function(X,I,e){"use strict";var A=e(19480),k=e(81792).IMAGE_URL_PREFIX,o=e(33576).Buffer;I.i=function(T){var b=T.replace(k,""),p=new o(b,"base64");return A(p)}},24892:function(X,I,e){"use strict";var A=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(47797);X.exports=function(b,p,s){var t=b.cd[0],i=t.trace,n=b.xa,r=b.ya;if(!(A.inbox(p-t.x0,p-(t.x0+t.w*i.dx),0)>0||A.inbox(s-t.y0,s-(t.y0+t.h*i.dy),0)>0)){var a,l=Math.floor((p-t.x0)/i.dx),c=Math.floor(Math.abs(s-t.y0)/i.dy);if(i._hasZ?a=t.z[c][l]:i._hasSource&&(a=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,c,1,1).data),a){var h,u=t.hi||i.hoverinfo;if(u){var x=u.split("+");x.indexOf("all")!==-1&&(x=["color"]),x.indexOf("color")!==-1&&(h=!0)}var d,m=T.colormodel[i.colormodel],g=m.colormodel||i.colormodel,y=g.length,v=i._scaler(a),_=m.suffix,f=[];(i.hovertemplate||h)&&(f.push("["+[v[0]+_[0],v[1]+_[1],v[2]+_[2]].join(", ")),y===4&&f.push(", "+v[3]+_[3]),f.push("]"),f=f.join(""),b.extraText=g.toUpperCase()+": "+f),o(i.hovertext)&&o(i.hovertext[c])?d=i.hovertext[c][l]:o(i.text)&&o(i.text[c])&&(d=i.text[c][l]);var S=r.c2p(t.y0+(c+.5)*i.dy),w=t.x0+(l+.5)*i.dx,E=t.y0+(c+.5)*i.dy,P="["+a.slice(0,i.colormodel.length).join(", ")+"]";return[k.extendFlat(b,{index:[c,l],x0:n.c2p(t.x0+l*i.dx),x1:n.c2p(t.x0+(l+1)*i.dx),y0:S,y1:S,color:v,xVal:w,xLabelVal:w,yVal:E,yLabelVal:E,zLabelVal:P,text:d,hovertemplateLabels:{zLabel:P,colorLabel:f,"color[0]Label":v[0]+_[0],"color[1]Label":v[1]+_[1],"color[2]Label":v[2]+_[2],"color[3]Label":v[3]+_[3]}})]}}}},48928:function(X,I,e){"use strict";X.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(47797),p=e(9188),s=e(2264).STYLE;X.exports=function(t,i,n,r){var a=i.xaxis,l=i.yaxis,c=!t._context._exportedPlot&&p();k.makeTraceGroups(r,n,"im").each(function(h){var u=A.select(this),x=h[0],d=x.trace,m=(d.zsmooth==="fast"||d.zsmooth===!1&&c)&&!d._hasZ&&d._hasSource&&a.type==="linear"&&l.type==="linear";d._realImage=m;var g,y,v,_,f,S,w=x.z,E=x.x0,P=x.y0,C=x.w,O=x.h,R=d.dx,U=d.dy;for(S=0;g===void 0&&S<C;)g=a.c2p(E+S*R),S++;for(S=C;y===void 0&&S>0;)y=a.c2p(E+S*R),S--;for(S=0;_===void 0&&S<O;)_=l.c2p(P+S*U),S++;for(S=O;f===void 0&&S>0;)f=l.c2p(P+S*U),S--;y<g&&(v=y,y=g,g=v),f<_&&(v=_,_=f,f=v),m||(g=Math.max(-.5*a._length,g),y=Math.min(1.5*a._length,y),_=Math.max(-.5*l._length,_),f=Math.min(1.5*l._length,f));var D=Math.round(y-g),N=Math.round(f-_);if(D<=0||N<=0)u.selectAll("image").data([]).exit().remove();else{var W=u.selectAll("image").data([h]);W.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),W.exit().remove();var F=d.zsmooth===!1?s:"";if(m){var j=k.simpleMap(a.range,a.r2l),q=k.simpleMap(l.range,l.r2l),te=j[1]<j[0],ee=q[1]>q[0];if(te||ee){var Q=g+D/2,J=_+N/2;F+="transform:"+o(Q+"px",J+"px")+"scale("+(te?-1:1)+","+(ee?-1:1)+")"+o(-Q+"px",-J+"px")+";"}}W.attr("style",F);var K=new Promise(function(ie){if(d._hasZ)ie();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===C&&d._canvas.el.height===O&&d._canvas.source===d.source)ie();else{var se=document.createElement("canvas");se.width=C,se.height=O;var ae=se.getContext("2d",{willReadFrequently:!0});d._image=d._image||new Image;var ue=d._image;ue.onload=function(){ae.drawImage(ue,0,0),d._canvas={el:se,source:d.source},ie()},ue.setAttribute("src",d.source)}}).then(function(){var ie,se;if(d._hasZ)se=Y(function(ue,ve){var ye=w[ve][ue];return k.isTypedArray(ye)&&(ye=Array.from(ye)),ye}),ie=se.toDataURL("image/png");else if(d._hasSource)if(m)ie=d.source;else{var ae=d._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,C,O).data;se=Y(function(ue,ve){var ye=4*(ve*C+ue);return[ae[ye],ae[ye+1],ae[ye+2],ae[ye+3]]}),ie=se.toDataURL("image/png")}W.attr({"xlink:href":ie,height:N,width:D,x:g,y:_})});t._promises.push(K)}function Y(ie){var se=document.createElement("canvas");se.width=D,se.height=N;var ae,ue=se.getContext("2d",{willReadFrequently:!0}),ve=function(fe){return k.constrain(Math.round(a.c2p(E+fe*R)-g),0,D)},ye=function(fe){return k.constrain(Math.round(l.c2p(P+fe*U)-_),0,N)},de=b.colormodel[d.colormodel],pe=de.colormodel||d.colormodel,ge=de.fmt;for(S=0;S<x.w;S++){var ke=ve(S),Ee=ve(S+1);if(Ee!==ke&&!isNaN(Ee)&&!isNaN(ke))for(var me=0;me<x.h;me++){var oe=ye(me),re=ye(me+1);re===oe||isNaN(re)||isNaN(oe)||!ie(S,me)||(ae=d._scaler(ie(S,me)),ue.fillStyle=ae?pe+"("+ge(ae).join(",")+")":"rgba(0,0,0,0)",ue.fillRect(ke,oe,Ee-ke,re-oe))}}return se}})}},28576:function(X,I,e){"use strict";var A=e(33428);X.exports=function(k){A.select(k).selectAll(".im image").style("opacity",function(o){return o[0].trace.opacity})}},89864:function(X,I,e){"use strict";var A=e(92880).extendFlat,k=e(92880).extendDeep,o=e(67824).overrideAll,T=e(25376),b=e(22548),p=e(86968).u,s=e(94724),t=e(31780).templatedArray,i=e(48164),n=e(29736).descriptionOnlyNumbers,r=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=t("step",k({},a,{range:l}));X.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:p({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:A({},r,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:n("value")},font:A({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:n("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:A({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:l,visible:A({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:A({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:A({},a.line.color,{}),width:A({},a.line.width,{dflt:1}),editType:"plot"},thickness:A({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(X,I,e){"use strict";var A=e(7316);I.name="indicator",I.plot=function(k,o,T,b){A.plotBasePlot(I.name,k,o,T,b)},I.clean=function(k,o,T,b){A.cleanBasePlot(I.name,k,o,T,b)}},79136:function(X){"use strict";X.exports={calc:function(I,e){var A=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var o=e._lastValue,T=o;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),A[0]={y:k,lastY:o,delta:k-T,relativeDelta:(k-T)/T},A}}},12096:function(X){"use strict";X.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(X,I,e){"use strict";var A=e(3400),k=e(89864),o=e(86968).Q,T=e(31780),b=e(51272),p=e(12096),s=e(26332),t=e(25404),i=e(95936),n=e(42568);function r(a,l){function c(h,u){return A.coerce(a,l,k.gauge.steps,h,u)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}X.exports={supplyDefaults:function(a,l,c,h){function u(R,U){return A.coerce(a,l,k,R,U)}o(l,h,u),u("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var x=u("value");l._range=[0,typeof x=="number"?1.5*x:1];var d,m,g=new Array(2);if(l._hasNumber){u("number.valueformat");var y=A.extendFlat({},h.font);y.size=void 0,A.coerceFont(u,"number.font",y),l.number.font.size===void 0&&(l.number.font.size=p.defaultNumberFontSize,g[0]=!0),u("number.prefix"),u("number.suffix"),d=l.number.font.size}if(l._hasDelta){var v=A.extendFlat({},h.font);v.size=void 0,A.coerceFont(u,"delta.font",v),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(d||p.defaultNumberFontSize),g[1]=!0),u("delta.reference",l.value),u("delta.relative"),u("delta.valueformat",l.delta.relative?"2%":""),u("delta.increasing.symbol"),u("delta.increasing.color"),u("delta.decreasing.symbol"),u("delta.decreasing.color"),u("delta.position"),u("delta.prefix"),u("delta.suffix"),m=l.delta.font.size}l._scaleNumbers=(!l._hasNumber||g[0])&&(!l._hasDelta||g[1])||!1;var _,f,S,w,E=A.extendFlat({},h.font);function P(R,U){return A.coerce(_,f,k.gauge,R,U)}function C(R,U){return A.coerce(S,w,k.gauge.axis,R,U)}if(E.size=.25*(d||m||p.defaultNumberFontSize),A.coerceFont(u,"title.font",E),u("title.text"),l._hasGauge){(_=a.gauge)||(_={}),f=T.newContainer(l,"gauge"),P("shape"),(l._isBullet=l.gauge.shape==="bullet")||u("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||u("align","center"),P("bgcolor",h.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",p.valueThickness*(l.gauge.shape==="bullet"?.5:1)),b(_,f,{name:"steps",handleItemDefaults:r}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),S={},_&&(S=_.axis||{}),w=T.newContainer(f,"axis"),C("visible"),l._range=C("range",l._range);var O={font:h.font,noAutotickangles:!0,outerTicks:!0};s(S,w,C,"linear"),n(S,w,C,"linear",O),i(S,w,C,"linear",O),t(S,w,C,O)}else u("title.align","center"),u("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},43480:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(X,I,e){"use strict";var A=e(33428),k=e(67756).qy,o=e(67756).Gz,T=e(3400),b=T.strScale,p=T.strTranslate,s=T.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),n=e(12096),r=e(72736),a=e(54460),l=e(28336),c=e(37668),h=e(94724),u=e(76308),x={left:"start",center:"middle",right:"end"},d={left:0,center:.5,right:1},m=/[yzafpnµmkMGTPEZY]/;function g(w){return w&&w.duration>0}function y(w){w.each(function(E){u.stroke(A.select(this),E.line.color)}).each(function(E){u.fill(A.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function v(w,E,P){var C=w._fullLayout,O=T.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},E),R={type:"linear",_id:"x"+E._id},U={letter:"x",font:C.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function D(N,W){return T.coerce(O,R,h,N,W)}return l(O,R,D,U,C),c(O,R,D,U),R}function _(w,E,P){return[Math.min(E/w.width,P/w.height),w,E+"x"+P]}function f(w,E,P,C){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),R=A.select(O);return R.text(w).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",w).call(r.convertToTspans,C).call(i.font,E),i.bBox(R.node())}function S(w,E,P,C,O,R){var U="_cache"+E;w[U]&&w[U].key===O||(w[U]={key:O,value:P});var D=T.aggNums(R,null,[w[U].value,C],2);return w[U].value=D,D}X.exports=function(w,E,P,C){var O,R=w._fullLayout;g(P)&&C&&(O=C()),T.makeTraceGroups(R._indicatorlayer,E,"trace").each(function(U){var D,N,W,F,j,q=U[0].trace,te=A.select(this),ee=q._hasGauge,Q=q._isAngular,J=q._isBullet,K=q.domain,Y={w:R._size.w*(K.x[1]-K.x[0]),h:R._size.h*(K.y[1]-K.y[0]),l:R._size.l+R._size.w*K.x[0],r:R._size.r+R._size.w*(1-K.x[1]),t:R._size.t+R._size.h*(1-K.y[1]),b:R._size.b+R._size.h*K.y[0]},ie=Y.l+Y.w/2,se=Y.t+Y.h/2,ae=Math.min(Y.w/2,Y.h),ue=n.innerRadius*ae,ve=q.align||"center";if(N=se,ee){if(Q&&(D=ie,N=se+ae/2,W=function(oe){return function(re,fe){return[fe/Math.sqrt(re.width/2*(re.width/2)+re.height*re.height),re,fe]}(oe,.9*ue)}),J){var ye=n.bulletPadding,de=1-n.bulletNumberDomainSize+ye;D=Y.l+(de+(1-de)*d[ve])*Y.w,W=function(oe){return _(oe,(n.bulletNumberDomainSize-ye)*Y.w,Y.h)}}}else D=Y.l+d[ve]*Y.w,W=function(oe){return _(oe,Y.w,Y.h)};(function(oe,re,fe,Se){var be,we,Me,Ie=fe[0].trace,Oe=Se.numbersX,he=Se.numbersY,_e=Ie.align||"center",Ae=x[_e],De=Se.transitionOpts,Le=Se.onComplete,Be=T.ensureSingle(re,"g","numbers"),Ve=[];Ie._hasNumber&&Ve.push("number"),Ie._hasDelta&&(Ve.push("delta"),Ie.delta.position==="left"&&Ve.reverse());var Ze=Be.selectAll("text").data(Ve);function rt(Pt,It,At,qe){if(!Pt.match("s")||At>=0==qe>=0||It(At).slice(-1).match(m)||It(qe).slice(-1).match(m))return It;var Ye=Pt.slice().replace("s","f").replace(/\d+/,function(We){return parseInt(We)-1}),Ne=v(oe,{tickformat:Ye});return function(We){return Math.abs(We)<1?a.tickText(Ne,We).text:It(We)}}Ze.enter().append("text"),Ze.attr("text-anchor",function(){return Ae}).attr("class",function(Pt){return Pt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ze.exit().remove();var it,dt=Ie.mode+Ie.align;if(Ie._hasDelta&&(it=function(){var Pt=v(oe,{tickformat:Ie.delta.valueformat},Ie._range);Pt.setScale(),a.prepTicks(Pt);var It=function(Re){return a.tickText(Pt,Re).text},At=Ie.delta.suffix,qe=Ie.delta.prefix,Ye=function(Re){return Ie.delta.relative?Re.relativeDelta:Re.delta},Ne=function(Re,Fe){return Re===0||typeof Re!="number"||isNaN(Re)?"-":(Re>0?Ie.delta.increasing.symbol:Ie.delta.decreasing.symbol)+qe+Fe(Re)+At},We=function(Re){return Re.delta>=0?Ie.delta.increasing.color:Ie.delta.decreasing.color};Ie._deltaLastValue===void 0&&(Ie._deltaLastValue=Ye(fe[0]));var at=Be.select("text.delta");function tt(){at.text(Ne(Ye(fe[0]),It)).call(u.fill,We(fe[0])).call(r.convertToTspans,oe)}return at.call(i.font,Ie.delta.font).call(u.fill,We({delta:Ie._deltaLastValue})),g(De)?at.transition().duration(De.duration).ease(De.easing).tween("text",function(){var Re=A.select(this),Fe=Ye(fe[0]),nt=Ie._deltaLastValue,Ge=rt(Ie.delta.valueformat,It,nt,Fe),ut=o(nt,Fe);return Ie._deltaLastValue=Fe,function(pt){Re.text(Ne(ut(pt),Ge)),Re.call(u.fill,We({delta:ut(pt)}))}}).each("end",function(){tt(),Le&&Le()}).each("interrupt",function(){tt(),Le&&Le()}):tt(),we=f(Ne(Ye(fe[0]),It),Ie.delta.font,Ae,oe),at}(),dt+=Ie.delta.position+Ie.delta.font.size+Ie.delta.font.family+Ie.delta.valueformat,dt+=Ie.delta.increasing.symbol+Ie.delta.decreasing.symbol,Me=we),Ie._hasNumber&&(function(){var Pt=v(oe,{tickformat:Ie.number.valueformat},Ie._range);Pt.setScale(),a.prepTicks(Pt);var It=function(We){return a.tickText(Pt,We).text},At=Ie.number.suffix,qe=Ie.number.prefix,Ye=Be.select("text.number");function Ne(){var We=typeof fe[0].y=="number"?qe+It(fe[0].y)+At:"-";Ye.text(We).call(i.font,Ie.number.font).call(r.convertToTspans,oe)}g(De)?Ye.transition().duration(De.duration).ease(De.easing).each("end",function(){Ne(),Le&&Le()}).each("interrupt",function(){Ne(),Le&&Le()}).attrTween("text",function(){var We=A.select(this),at=o(fe[0].lastY,fe[0].y);Ie._lastValue=fe[0].y;var tt=rt(Ie.number.valueformat,It,fe[0].lastY,fe[0].y);return function(Re){We.text(qe+tt(at(Re))+At)}}):Ne(),be=f(qe+It(fe[0].y)+At,Ie.number.font,Ae,oe)}(),dt+=Ie.number.font.size+Ie.number.font.family+Ie.number.valueformat+Ie.number.suffix+Ie.number.prefix,Me=be),Ie._hasDelta&&Ie._hasNumber){var mt,ht,Qe=[(be.left+be.right)/2,(be.top+be.bottom)/2],Je=[(we.left+we.right)/2,(we.top+we.bottom)/2],wt=.75*Ie.delta.font.size;Ie.delta.position==="left"&&(mt=S(Ie,"deltaPos",0,-1*(be.width*d[Ie.align]+we.width*(1-d[Ie.align])+wt),dt,Math.min),ht=Qe[1]-Je[1],Me={width:be.width+we.width+wt,height:Math.max(be.height,we.height),left:we.left+mt,right:be.right,top:Math.min(be.top,we.top+ht),bottom:Math.max(be.bottom,we.bottom+ht)}),Ie.delta.position==="right"&&(mt=S(Ie,"deltaPos",0,be.width*(1-d[Ie.align])+we.width*d[Ie.align]+wt,dt,Math.max),ht=Qe[1]-Je[1],Me={width:be.width+we.width+wt,height:Math.max(be.height,we.height),left:be.left,right:we.right+mt,top:Math.min(be.top,we.top+ht),bottom:Math.max(be.bottom,we.bottom+ht)}),Ie.delta.position==="bottom"&&(mt=null,ht=we.height,Me={width:Math.max(be.width,we.width),height:be.height+we.height,left:Math.min(be.left,we.left),right:Math.max(be.right,we.right),top:be.bottom-be.height,bottom:be.bottom+we.height}),Ie.delta.position==="top"&&(mt=null,ht=be.top,Me={width:Math.max(be.width,we.width),height:be.height+we.height,left:Math.min(be.left,we.left),right:Math.max(be.right,we.right),top:be.bottom-be.height-we.height,bottom:be.bottom}),it.attr({dx:mt,dy:ht})}(Ie._hasNumber||Ie._hasDelta)&&Be.attr("transform",function(){var Pt=Se.numbersScaler(Me);dt+=Pt[2];var It,At=S(Ie,"numbersScale",1,Pt[0],dt,Math.min);Ie._scaleNumbers||(At=1),It=Ie._isAngular?he-At*Me.bottom:he-At*(Me.top+Me.bottom)/2,Ie._numbersTop=At*Me.top+It;var qe=Me[_e];_e==="center"&&(qe=(Me.left+Me.right)/2);var Ye=Oe-At*qe;return Ye=S(Ie,"numbersTranslate",0,Ye,dt,Math.max),p(Ye,It)+b(At)})})(w,te,U,{numbersX:D,numbersY:N,numbersScaler:W,transitionOpts:P,onComplete:O}),ee&&(F={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},j={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var pe=te.selectAll("g.angular").data(Q?U:[]);pe.exit().remove();var ge=te.selectAll("g.angularaxis").data(Q?U:[]);ge.exit().remove(),Q&&function(oe,re,fe,Se){var be,we,Me,Ie,Oe=fe[0].trace,he=Se.size,_e=Se.radius,Ae=Se.innerRadius,De=Se.gaugeBg,Le=Se.gaugeOutline,Be=[he.l+he.w/2,he.t+he.h/2+_e/2],Ve=Se.gauge,Ze=Se.layer,rt=Se.transitionOpts,it=Se.onComplete,dt=Math.PI/2;function mt(pt){var gt=Oe.gauge.axis.range[0],ct=(pt-gt)/(Oe.gauge.axis.range[1]-gt)*Math.PI-dt;return ct<-dt?-dt:ct>dt?dt:ct}function ht(pt){return A.svg.arc().innerRadius((Ae+_e)/2-pt/2*(_e-Ae)).outerRadius((Ae+_e)/2+pt/2*(_e-Ae)).startAngle(-dt)}function Qe(pt){pt.attr("d",function(gt){return ht(gt.thickness).startAngle(mt(gt.range[0])).endAngle(mt(gt.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",p(Be[0],Be[1])),Ze.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ze.selectAll("g.xangularaxistick,path,text").remove(),(be=v(oe,Oe.gauge.axis)).type="linear",be.range=Oe.gauge.axis.range,be._id="xangularaxis",be.ticklabeloverflow="allow",be.setScale();var Je=function(pt){return(be.range[0]-pt.x)/(be.range[1]-be.range[0])*Math.PI+Math.PI},wt={},Pt=a.makeLabelFns(be,0).labelStandoff;wt.xFn=function(pt){var gt=Je(pt);return Math.cos(gt)*Pt},wt.yFn=function(pt){var gt=Je(pt),ct=Math.sin(gt)>0?.2:1;return-Math.sin(gt)*(Pt+pt.fontSize*ct)+Math.abs(Math.cos(gt))*(pt.fontSize*t)},wt.anchorFn=function(pt){var gt=Je(pt),ct=Math.cos(gt);return Math.abs(ct)<.1?"middle":ct>0?"start":"end"},wt.heightFn=function(pt,gt,ct){var Tt=Je(pt);return-.5*(1+Math.sin(Tt))*ct};var It=function(pt){return p(Be[0]+_e*Math.cos(pt),Be[1]-_e*Math.sin(pt))};if(Me=function(pt){return It(Je(pt))},we=a.calcTicks(be),Ie=a.getTickSigns(be)[2],be.visible){Ie=be.ticks==="inside"?-1:1;var At=(be.linewidth||1)/2;a.drawTicks(oe,be,{vals:we,layer:Ze,path:"M"+Ie*At+",0h"+Ie*be.ticklen,transFn:function(pt){var gt=Je(pt);return It(gt)+"rotate("+-s(gt)+")"}}),a.drawLabels(oe,be,{vals:we,layer:Ze,transFn:Me,labelFns:wt})}var qe=[De].concat(Oe.gauge.steps),Ye=Ve.selectAll("g.bg-arc").data(qe);Ye.enter().append("g").classed("bg-arc",!0).append("path"),Ye.select("path").call(Qe).call(y),Ye.exit().remove();var Ne=ht(Oe.gauge.bar.thickness),We=Ve.selectAll("g.value-arc").data([Oe.gauge.bar]);We.enter().append("g").classed("value-arc",!0).append("path");var at,tt,Re,Fe=We.select("path");g(rt)?(Fe.transition().duration(rt.duration).ease(rt.easing).each("end",function(){it&&it()}).each("interrupt",function(){it&&it()}).attrTween("d",(at=Ne,tt=mt(fe[0].lastY),Re=mt(fe[0].y),function(){var pt=k(tt,Re);return function(gt){return at.endAngle(pt(gt))()}})),Oe._lastValue=fe[0].y):Fe.attr("d",typeof fe[0].y=="number"?Ne.endAngle(mt(fe[0].y)):"M0,0Z"),Fe.call(y),We.exit().remove(),qe=[];var nt=Oe.gauge.threshold.value;(nt||nt===0)&&qe.push({range:[nt,nt],color:Oe.gauge.threshold.color,line:{color:Oe.gauge.threshold.line.color,width:Oe.gauge.threshold.line.width},thickness:Oe.gauge.threshold.thickness});var Ge=Ve.selectAll("g.threshold-arc").data(qe);Ge.enter().append("g").classed("threshold-arc",!0).append("path"),Ge.select("path").call(Qe).call(y),Ge.exit().remove();var ut=Ve.selectAll("g.gauge-outline").data([Le]);ut.enter().append("g").classed("gauge-outline",!0).append("path"),ut.select("path").call(Qe).call(y),ut.exit().remove()}(w,0,U,{radius:ae,innerRadius:ue,gauge:pe,layer:ge,size:Y,gaugeBg:F,gaugeOutline:j,transitionOpts:P,onComplete:O});var ke=te.selectAll("g.bullet").data(J?U:[]);ke.exit().remove();var Ee=te.selectAll("g.bulletaxis").data(J?U:[]);Ee.exit().remove(),J&&function(oe,re,fe,Se){var be,we,Me,Ie,Oe,he=fe[0].trace,_e=Se.gauge,Ae=Se.layer,De=Se.gaugeBg,Le=Se.gaugeOutline,Be=Se.size,Ve=he.domain,Ze=Se.transitionOpts,rt=Se.onComplete;_e.enter().append("g").classed("bullet",!0),_e.attr("transform",p(Be.l,Be.t)),Ae.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ae.selectAll("g.xbulletaxistick,path,text").remove();var it=Be.h,dt=he.gauge.bar.thickness*it,mt=Ve.x[0],ht=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(he._hasNumber||he._hasDelta?1-n.bulletNumberDomainSize:1);function Qe(Ye){Ye.attr("width",function(Ne){return Math.max(0,be.c2p(Ne.range[1])-be.c2p(Ne.range[0]))}).attr("x",function(Ne){return be.c2p(Ne.range[0])}).attr("y",function(Ne){return .5*(1-Ne.thickness)*it}).attr("height",function(Ne){return Ne.thickness*it})}(be=v(oe,he.gauge.axis))._id="xbulletaxis",be.domain=[mt,ht],be.setScale(),we=a.calcTicks(be),Me=a.makeTransTickFn(be),Ie=a.getTickSigns(be)[2],Oe=Be.t+Be.h,be.visible&&(a.drawTicks(oe,be,{vals:be.ticks==="inside"?a.clipEnds(be,we):we,layer:Ae,path:a.makeTickPath(be,Oe,Ie),transFn:Me}),a.drawLabels(oe,be,{vals:we,layer:Ae,transFn:Me,labelFns:a.makeLabelFns(be,Oe)}));var Je=[De].concat(he.gauge.steps),wt=_e.selectAll("g.bg-bullet").data(Je);wt.enter().append("g").classed("bg-bullet",!0).append("rect"),wt.select("rect").call(Qe).call(y),wt.exit().remove();var Pt=_e.selectAll("g.value-bullet").data([he.gauge.bar]);Pt.enter().append("g").classed("value-bullet",!0).append("rect"),Pt.select("rect").attr("height",dt).attr("y",(it-dt)/2).call(y),g(Ze)?Pt.select("rect").transition().duration(Ze.duration).ease(Ze.easing).each("end",function(){rt&&rt()}).each("interrupt",function(){rt&&rt()}).attr("width",Math.max(0,be.c2p(Math.min(he.gauge.axis.range[1],fe[0].y)))):Pt.select("rect").attr("width",typeof fe[0].y=="number"?Math.max(0,be.c2p(Math.min(he.gauge.axis.range[1],fe[0].y))):0),Pt.exit().remove();var It=fe.filter(function(){return he.gauge.threshold.value||he.gauge.threshold.value===0}),At=_e.selectAll("g.threshold-bullet").data(It);At.enter().append("g").classed("threshold-bullet",!0).append("line"),At.select("line").attr("x1",be.c2p(he.gauge.threshold.value)).attr("x2",be.c2p(he.gauge.threshold.value)).attr("y1",(1-he.gauge.threshold.thickness)/2*it).attr("y2",(1-(1-he.gauge.threshold.thickness)/2)*it).call(u.stroke,he.gauge.threshold.line.color).style("stroke-width",he.gauge.threshold.line.width),At.exit().remove();var qe=_e.selectAll("g.gauge-outline").data([Le]);qe.enter().append("g").classed("gauge-outline",!0).append("rect"),qe.select("rect").call(Qe).call(y),qe.exit().remove()}(w,0,U,{gauge:ke,layer:Ee,size:Y,gaugeBg:F,gaugeOutline:j,transitionOpts:P,onComplete:O});var me=te.selectAll("text.title").data(U);me.exit().remove(),me.enter().append("text").classed("title",!0),me.attr("text-anchor",function(){return J?x.right:x[q.title.align]}).text(q.title.text).call(i.font,q.title.font).call(r.convertToTspans,w),me.attr("transform",function(){var oe,re=Y.l+Y.w*d[q.title.align],fe=n.titlePadding,Se=i.bBox(me.node());return ee?(Q&&(oe=q.gauge.axis.visible?i.bBox(ge.node()).top-fe-Se.bottom:Y.t+Y.h/2-ae/2-Se.bottom-fe),J&&(oe=N-(Se.top+Se.bottom)/2,re=Y.l-n.bulletPadding*Y.w)):oe=q._numbersTop-fe-Se.bottom,p(re,oe)})})}},50048:function(X,I,e){"use strict";var A=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),p=e(92880).extendFlat,s=e(67824).overrideAll,t=X.exports=s(p({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:p({},b.showlegend,{dflt:!1})},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:p({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(X,I,e){"use strict";var A=e(47128),k=e(3832).processGrid,o=e(3832).filter;X.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=o(b.x,b._len),b._y=o(b.y,b._len),b._z=o(b.z,b._len),b._value=o(b.value,b._len);var p=k(b);b._gridFill=p.fill,b._Xs=p.Xs,b._Ys=p.Ys,b._Zs=p.Zs,b._len=p.len;for(var s=1/0,t=-1/0,i=0;i<b._len;i++){var n=b._value[i];s=Math.min(s,n),t=Math.max(t,n)}b._minValues=s,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?s:b.isomin,b._vMax=b.isomax===void 0||b.isomax===null?t:b.isomax,A(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},31460:function(X,I,e){"use strict";var A=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,p=e(52094),s=function(a,l){for(var c=l.length-1;c>0;c--){var h=Math.min(l[c],l[c-1]),u=Math.max(l[c],l[c-1]);if(u>h&&h<a&&a<=u)return{id:c,distRatio:(u-a)/(u-h)}}return{id:0,distRatio:0}};function t(a,l,c){this.scene=a,this.uid=c,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(a){if(a.object===this.mesh){var l=a.data.index,c=this.data._meshX[l],h=this.data._meshY[l],u=this.data._meshZ[l],x=this.data._Ys.length,d=this.data._Zs.length,m=s(c,this.data._Xs).id,g=s(h,this.data._Ys).id,y=s(u,this.data._Zs).id,v=a.index=y+d*g+d*x*m;a.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var _=this.data.hovertext||this.data.text;return o(_)&&_[v]!==void 0?a.textLabel=_[v]:_&&(a.textLabel=_),!0}},i.update=function(a){var l=this.scene,c=l.fullSceneLayout;function h(d,m,g,y){return m.map(function(v){return d.d2l(v,0,y)*g})}this.data=r(a);var u={positions:p(h(c.xaxis,a._meshX,l.dataScale[0],a.xcalendar),h(c.yaxis,a._meshY,l.dataScale[1],a.ycalendar),h(c.zaxis,a._meshZ,l.dataScale[2],a.zcalendar)),cells:p(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:T(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},x=b(a);u.vertexIntensity=a._meshIntensity,u.vertexIntensityBounds=[x.min,x.max],u.colormap=k(a),this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(a){a._meshI=[],a._meshJ=[],a._meshK=[];var l,c,h,u,x,d,m,g=a.surface.show,y=a.spaceframe.show,v=a.surface.fill,_=a.spaceframe.fill,f=!1,S=!1,w=0,E=a._Xs,P=a._Ys,C=a._Zs,O=E.length,R=P.length,U=C.length,D=n.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),N=function(Ae,De,Le){switch(D){case 5:return Le+U*De+U*R*Ae;case 4:return Le+U*Ae+U*O*De;case 3:return De+R*Le+R*U*Ae;case 2:return De+R*Ae+R*O*Le;case 1:return Ae+O*Le+O*U*De;default:return Ae+O*De+O*R*Le}},W=a._minValues,F=a._maxValues,j=a._vMin,q=a._vMax;function te(Ae,De,Le){for(var Be=d.length,Ve=c;Ve<Be;Ve++)if(Ae===h[Ve]&&De===u[Ve]&&Le===x[Ve])return Ve;return-1}function ee(){c=l}function Q(){h=[],u=[],x=[],d=[],l=0,ee()}function J(Ae,De,Le,Be){return h.push(Ae),u.push(De),x.push(Le),d.push(Be),++l-1}function K(Ae,De,Le){for(var Be=[],Ve=0;Ve<Ae.length;Ve++)Be[Ve]=Ae[Ve]*(1-Le)+Le*De[Ve];return Be}function Y(Ae){m=Ae}function ie(Ae,De){return Ae==="all"||Ae===null||Ae.indexOf(De)>-1}function se(Ae,De){return Ae===null?De:Ae}function ae(Ae,De,Le){ee();var Be,Ve,Ze,rt=[De],it=[Le];if(m>=1)rt=[De],it=[Le];else if(m>0){var dt=function(qe,Ye){var Ne=qe[0],We=qe[1],at=qe[2],tt=function(ct,Tt,vt){for(var kt=[],Lt=0;Lt<ct.length;Lt++)kt[Lt]=(ct[Lt]+Tt[Lt]+vt[Lt])/3;return kt}(Ne,We,at),Re=Math.sqrt(1-m),Fe=K(tt,Ne,Re),nt=K(tt,We,Re),Ge=K(tt,at,Re),ut=Ye[0],pt=Ye[1],gt=Ye[2];return{xyzv:[[Ne,We,nt],[nt,Fe,Ne],[We,at,Ge],[Ge,nt,We],[at,Ne,Fe],[Fe,Ge,at]],abc:[[ut,pt,-1],[-1,-1,ut],[pt,gt,-1],[-1,-1,pt],[gt,ut,-1],[-1,-1,gt]]}}(De,Le);rt=dt.xyzv,it=dt.abc}for(var mt=0;mt<rt.length;mt++){De=rt[mt],Le=it[mt];for(var ht=[],Qe=0;Qe<3;Qe++){var Je=De[Qe][0],wt=De[Qe][1],Pt=De[Qe][2],It=De[Qe][3],At=Le[Qe]>-1?Le[Qe]:te(Je,wt,Pt);ht[Qe]=At>-1?At:J(Je,wt,Pt,se(Ae,It))}Be=ht[0],Ve=ht[1],Ze=ht[2],a._meshI.push(Be),a._meshJ.push(Ve),a._meshK.push(Ze),++w}}function ue(Ae,De,Le,Be){var Ve=Ae[3];Ve<Le&&(Ve=Le),Ve>Be&&(Ve=Be);for(var Ze=(Ae[3]-Ve)/(Ae[3]-De[3]+1e-9),rt=[],it=0;it<4;it++)rt[it]=(1-Ze)*Ae[it]+Ze*De[it];return rt}function ve(Ae,De,Le){return Ae>=De&&Ae<=Le}function ye(Ae){var De=.001*(q-j);return Ae>=j-De&&Ae<=q+De}function de(Ae){for(var De=[],Le=0;Le<4;Le++){var Be=Ae[Le];De.push([a._x[Be],a._y[Be],a._z[Be],a._value[Be]])}return De}var pe=3;function ge(Ae,De,Le,Be,Ve,Ze){Ze||(Ze=1),Le=[-1,-1,-1];var rt=!1,it=[ve(De[0][3],Be,Ve),ve(De[1][3],Be,Ve),ve(De[2][3],Be,Ve)];if(!it[0]&&!it[1]&&!it[2])return!1;var dt=function(ht,Qe,Je){return ye(Qe[0][3])&&ye(Qe[1][3])&&ye(Qe[2][3])?(ae(ht,Qe,Je),!0):Ze<pe&&ge(ht,Qe,Je,j,q,++Ze)};if(it[0]&&it[1]&&it[2])return dt(Ae,De,Le)||rt;var mt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ht){if(it[ht[0]]&&it[ht[1]]&&!it[ht[2]]){var Qe=De[ht[0]],Je=De[ht[1]],wt=De[ht[2]],Pt=ue(wt,Qe,Be,Ve),It=ue(wt,Je,Be,Ve);rt=dt(Ae,[It,Pt,Qe],[-1,-1,Le[ht[0]]])||rt,rt=dt(Ae,[Qe,Je,It],[Le[ht[0]],Le[ht[1]],-1])||rt,mt=!0}}),mt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ht){if(it[ht[0]]&&!it[ht[1]]&&!it[ht[2]]){var Qe=De[ht[0]],Je=De[ht[1]],wt=De[ht[2]],Pt=ue(Je,Qe,Be,Ve),It=ue(wt,Qe,Be,Ve);rt=dt(Ae,[It,Pt,Qe],[-1,-1,Le[ht[0]]])||rt,mt=!0}}),rt}function ke(Ae,De,Le,Be){var Ve=!1,Ze=de(De),rt=[ve(Ze[0][3],Le,Be),ve(Ze[1][3],Le,Be),ve(Ze[2][3],Le,Be),ve(Ze[3][3],Le,Be)];if(!(rt[0]||rt[1]||rt[2]||rt[3]))return Ve;if(rt[0]&&rt[1]&&rt[2]&&rt[3])return S&&(Ve=function(dt,mt,ht){var Qe=function(Je,wt,Pt){ae(dt,[mt[Je],mt[wt],mt[Pt]],[ht[Je],ht[wt],ht[Pt]])};Qe(0,1,2),Qe(3,0,1),Qe(2,3,0),Qe(1,2,3)}(Ae,Ze,De)||Ve),Ve;var it=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(dt){if(rt[dt[0]]&&rt[dt[1]]&&rt[dt[2]]&&!rt[dt[3]]){var mt=Ze[dt[0]],ht=Ze[dt[1]],Qe=Ze[dt[2]],Je=Ze[dt[3]];if(S)Ve=ae(Ae,[mt,ht,Qe],[De[dt[0]],De[dt[1]],De[dt[2]]])||Ve;else{var wt=ue(Je,mt,Le,Be),Pt=ue(Je,ht,Le,Be),It=ue(Je,Qe,Le,Be);Ve=ae(null,[wt,Pt,It],[-1,-1,-1])||Ve}it=!0}}),it||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(dt){if(rt[dt[0]]&&rt[dt[1]]&&!rt[dt[2]]&&!rt[dt[3]]){var mt=Ze[dt[0]],ht=Ze[dt[1]],Qe=Ze[dt[2]],Je=Ze[dt[3]],wt=ue(Qe,mt,Le,Be),Pt=ue(Qe,ht,Le,Be),It=ue(Je,ht,Le,Be),At=ue(Je,mt,Le,Be);S?(Ve=ae(Ae,[mt,At,wt],[De[dt[0]],-1,-1])||Ve,Ve=ae(Ae,[ht,Pt,It],[De[dt[1]],-1,-1])||Ve):Ve=function(qe,Ye,Ne){var We=function(at,tt,Re){ae(null,[Ye[at],Ye[tt],Ye[Re]],[Ne[at],Ne[tt],Ne[Re]])};We(0,1,2),We(2,3,0)}(0,[wt,Pt,It,At],[-1,-1,-1,-1])||Ve,it=!0}}),it||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(dt){if(rt[dt[0]]&&!rt[dt[1]]&&!rt[dt[2]]&&!rt[dt[3]]){var mt=Ze[dt[0]],ht=Ze[dt[1]],Qe=Ze[dt[2]],Je=Ze[dt[3]],wt=ue(ht,mt,Le,Be),Pt=ue(Qe,mt,Le,Be),It=ue(Je,mt,Le,Be);S?(Ve=ae(Ae,[mt,wt,Pt],[De[dt[0]],-1,-1])||Ve,Ve=ae(Ae,[mt,Pt,It],[De[dt[0]],-1,-1])||Ve,Ve=ae(Ae,[mt,It,wt],[De[dt[0]],-1,-1])||Ve):Ve=ae(null,[wt,Pt,It],[-1,-1,-1])||Ve,it=!0}})),Ve}function Ee(Ae,De,Le,Be,Ve,Ze,rt,it,dt,mt,ht){var Qe=!1;return f&&(ie(Ae,"A")&&(Qe=ke(null,[De,Le,Be,Ze],mt,ht)||Qe),ie(Ae,"B")&&(Qe=ke(null,[Le,Be,Ve,dt],mt,ht)||Qe),ie(Ae,"C")&&(Qe=ke(null,[Le,Ze,rt,dt],mt,ht)||Qe),ie(Ae,"D")&&(Qe=ke(null,[Be,Ze,it,dt],mt,ht)||Qe),ie(Ae,"E")&&(Qe=ke(null,[Le,Be,Ze,dt],mt,ht)||Qe)),S&&(Qe=ke(Ae,[Le,Be,Ze,dt],mt,ht)||Qe),Qe}function me(Ae,De,Le,Be,Ve,Ze,rt,it){return[it[0]===!0||ge(Ae,de([De,Le,Be]),[De,Le,Be],Ze,rt),it[1]===!0||ge(Ae,de([Be,Ve,De]),[Be,Ve,De],Ze,rt)]}function oe(Ae,De,Le,Be,Ve,Ze,rt,it,dt){return it?me(Ae,De,Le,Ve,Be,Ze,rt,dt):me(Ae,Le,Ve,Be,De,Ze,rt,dt)}function re(Ae,De,Le,Be,Ve,Ze,rt){var it,dt,mt,ht,Qe=!1,Je=function(){Qe=ge(Ae,[it,dt,mt],[-1,-1,-1],Ve,Ze)||Qe,Qe=ge(Ae,[mt,ht,it],[-1,-1,-1],Ve,Ze)||Qe},wt=rt[0],Pt=rt[1],It=rt[2];return wt&&(it=K(de([N(De,Le-0,Be-0)])[0],de([N(De-1,Le-0,Be-0)])[0],wt),dt=K(de([N(De,Le-0,Be-1)])[0],de([N(De-1,Le-0,Be-1)])[0],wt),mt=K(de([N(De,Le-1,Be-1)])[0],de([N(De-1,Le-1,Be-1)])[0],wt),ht=K(de([N(De,Le-1,Be-0)])[0],de([N(De-1,Le-1,Be-0)])[0],wt),Je()),Pt&&(it=K(de([N(De-0,Le,Be-0)])[0],de([N(De-0,Le-1,Be-0)])[0],Pt),dt=K(de([N(De-0,Le,Be-1)])[0],de([N(De-0,Le-1,Be-1)])[0],Pt),mt=K(de([N(De-1,Le,Be-1)])[0],de([N(De-1,Le-1,Be-1)])[0],Pt),ht=K(de([N(De-1,Le,Be-0)])[0],de([N(De-1,Le-1,Be-0)])[0],Pt),Je()),It&&(it=K(de([N(De-0,Le-0,Be)])[0],de([N(De-0,Le-0,Be-1)])[0],It),dt=K(de([N(De-0,Le-1,Be)])[0],de([N(De-0,Le-1,Be-1)])[0],It),mt=K(de([N(De-1,Le-1,Be)])[0],de([N(De-1,Le-1,Be-1)])[0],It),ht=K(de([N(De-1,Le-0,Be)])[0],de([N(De-1,Le-0,Be-1)])[0],It),Je()),Qe}function fe(Ae,De,Le,Be,Ve,Ze,rt,it,dt,mt,ht,Qe){var Je=Ae;return Qe?(f&&Ae==="even"&&(Je=null),Ee(Je,De,Le,Be,Ve,Ze,rt,it,dt,mt,ht)):(f&&Ae==="odd"&&(Je=null),Ee(Je,dt,it,rt,Ze,Ve,Be,Le,De,mt,ht))}function Se(Ae,De,Le,Be,Ve){for(var Ze=[],rt=0,it=0;it<De.length;it++)for(var dt=De[it],mt=1;mt<U;mt++)for(var ht=1;ht<R;ht++)Ze.push(oe(Ae,N(dt,ht-1,mt-1),N(dt,ht-1,mt),N(dt,ht,mt-1),N(dt,ht,mt),Le,Be,(dt+ht+mt)%2,Ve&&Ve[rt]?Ve[rt]:[])),rt++;return Ze}function be(Ae,De,Le,Be,Ve){for(var Ze=[],rt=0,it=0;it<De.length;it++)for(var dt=De[it],mt=1;mt<O;mt++)for(var ht=1;ht<U;ht++)Ze.push(oe(Ae,N(mt-1,dt,ht-1),N(mt,dt,ht-1),N(mt-1,dt,ht),N(mt,dt,ht),Le,Be,(mt+dt+ht)%2,Ve&&Ve[rt]?Ve[rt]:[])),rt++;return Ze}function we(Ae,De,Le,Be,Ve){for(var Ze=[],rt=0,it=0;it<De.length;it++)for(var dt=De[it],mt=1;mt<R;mt++)for(var ht=1;ht<O;ht++)Ze.push(oe(Ae,N(ht-1,mt-1,dt),N(ht-1,mt,dt),N(ht,mt-1,dt),N(ht,mt,dt),Le,Be,(ht+mt+dt)%2,Ve&&Ve[rt]?Ve[rt]:[])),rt++;return Ze}function Me(Ae,De,Le){for(var Be=1;Be<U;Be++)for(var Ve=1;Ve<R;Ve++)for(var Ze=1;Ze<O;Ze++)fe(Ae,N(Ze-1,Ve-1,Be-1),N(Ze-1,Ve-1,Be),N(Ze-1,Ve,Be-1),N(Ze-1,Ve,Be),N(Ze,Ve-1,Be-1),N(Ze,Ve-1,Be),N(Ze,Ve,Be-1),N(Ze,Ve,Be),De,Le,(Ze+Ve+Be)%2)}function Ie(Ae,De,Le,Be,Ve,Ze){for(var rt=[],it=0,dt=0;dt<De.length;dt++)for(var mt=De[dt],ht=1;ht<U;ht++)for(var Qe=1;Qe<R;Qe++)rt.push(re(Ae,mt,Qe,ht,Le,Be,Ve[dt],Ze&&Ze[it]&&Ze[it])),it++;return rt}function Oe(Ae,De,Le,Be,Ve,Ze){for(var rt=[],it=0,dt=0;dt<De.length;dt++)for(var mt=De[dt],ht=1;ht<O;ht++)for(var Qe=1;Qe<U;Qe++)rt.push(re(Ae,ht,mt,Qe,Le,Be,Ve[dt],Ze&&Ze[it]&&Ze[it])),it++;return rt}function he(Ae,De,Le,Be,Ve,Ze){for(var rt=[],it=0,dt=0;dt<De.length;dt++)for(var mt=De[dt],ht=1;ht<R;ht++)for(var Qe=1;Qe<O;Qe++)rt.push(re(Ae,Qe,ht,mt,Le,Be,Ve[dt],Ze&&Ze[it]&&Ze[it])),it++;return rt}function _e(Ae,De){for(var Le=[],Be=Ae;Be<De;Be++)Le.push(Be);return Le}return function(){Q(),function(){for(var dt=0;dt<O;dt++)for(var mt=0;mt<R;mt++)for(var ht=0;ht<U;ht++){var Qe=N(dt,mt,ht);J(a._x[Qe],a._y[Qe],a._z[Qe],a._value[Qe])}}();var Ae=null;if(y&&_&&(Y(_),S=!0,Me(Ae,j,q),S=!1),g&&v){Y(v);for(var De=a.surface.pattern,Le=a.surface.count,Be=0;Be<Le;Be++){var Ve=Le===1?.5:Be/(Le-1),Ze=(1-Ve)*j+Ve*q,rt=Math.abs(Ze-W)>Math.abs(Ze-F)?[W,Ze]:[Ze,F];f=!0,Me(De,rt[0],rt[1]),f=!1}}var it=[[Math.min(j,F),Math.max(j,F)],[Math.min(W,q),Math.max(W,q)]];["x","y","z"].forEach(function(dt){for(var mt=[],ht=0;ht<it.length;ht++){var Qe=0,Je=it[ht][0],wt=it[ht][1],Pt=a.slices[dt];if(Pt.show&&Pt.fill){Y(Pt.fill);var It=[],At=[],qe=[];if(Pt.locations.length)for(var Ye=0;Ye<Pt.locations.length;Ye++){var Ne=s(Pt.locations[Ye],dt==="x"?E:dt==="y"?P:C);Ne.distRatio===0?It.push(Ne.id):Ne.id>0&&(At.push(Ne.id),dt==="x"?qe.push([Ne.distRatio,0,0]):dt==="y"?qe.push([0,Ne.distRatio,0]):qe.push([0,0,Ne.distRatio]))}else It=_e(1,dt==="x"?O-1:dt==="y"?R-1:U-1);At.length>0&&(mt[Qe]=dt==="x"?Ie(Ae,At,Je,wt,qe,mt[Qe]):dt==="y"?Oe(Ae,At,Je,wt,qe,mt[Qe]):he(Ae,At,Je,wt,qe,mt[Qe]),Qe++),It.length>0&&(mt[Qe]=dt==="x"?Se(Ae,It,Je,wt,mt[Qe]):dt==="y"?be(Ae,It,Je,wt,mt[Qe]):we(Ae,It,Je,wt,mt[Qe]),Qe++)}var We=a.caps[dt];We.show&&We.fill&&(Y(We.fill),mt[Qe]=dt==="x"?Se(Ae,[0,O-1],Je,wt,mt[Qe]):dt==="y"?be(Ae,[0,R-1],Je,wt,mt[Qe]):we(Ae,[0,U-1],Je,wt,mt[Qe]),Qe++)}}),w===0&&Q(),a._meshX=h,a._meshY=u,a._meshZ=x,a._meshIntensity=d,a._Xs=E,a._Ys=P,a._Zs=C}(),a}X.exports={findNearestOnAxis:s,generateIsoMeshes:r,createIsosurfaceTrace:function(a,l){var c=a.glplot.gl,h=A({gl:c}),u=new t(a,h,l.uid);return h._trace=u,u.update(l),a.glplot.add(h),u}}},70548:function(X,I,e){"use strict";var A=e(3400),k=e(24040),o=e(50048),T=e(27260);function b(p,s,t,i,n){var r=n("isomin"),a=n("isomax");a!=null&&r!=null&&r>a&&(s.isomin=null,s.isomax=null);var l=n("x"),c=n("y"),h=n("z"),u=n("value");l&&l.length&&c&&c.length&&h&&h.length&&u&&u.length?(k.getComponentMethod("calendars","handleTraceDefaults")(p,s,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(x){n(x+"hoverformat");var d="caps."+x;n(d+".show")&&n(d+".fill");var m="slices."+x;n(m+".show")&&(n(m+".fill"),n(m+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){n(x)}),T(p,s,i,n,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}X.exports={supplyDefaults:function(p,s,t,i){b(p,s,0,i,function(n,r){return A.coerce(p,s,o,n,r)})},supplyIsoDefaults:b}},6296:function(X,I,e){"use strict";X.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(X,I,e){"use strict";var A=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(16716),b=e(45464),p=e(92880).extendFlat;X.exports=p({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},A("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:p({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:p({},T.lightposition.x,{dflt:1e5}),y:p({},T.lightposition.y,{dflt:1e5}),z:p({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:p({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:p({},b.hoverinfo,{editType:"calc"}),showlegend:p({},b.showlegend,{dflt:!1})})},1876:function(X,I,e){"use strict";var A=e(47128);X.exports=function(k,o){o.intensity&&A(k,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},576:function(X,I,e){"use strict";var A=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,o=e(67792).alpha_shape,T=e(67792).convex_hull,b=e(33040).parseColorScale,p=e(3400).isArrayOrTypedArray,s=e(43080),t=e(8932).extractOpts,i=e(52094);function n(u,x,d){this.scene=u,this.uid=d,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=n.prototype;function a(u){for(var x=[],d=u.length,m=0;m<d;m++)x[m]=s(u[m]);return x}function l(u,x,d,m){for(var g=[],y=x.length,v=0;v<y;v++)g[v]=u.d2l(x[v],0,m)*d;return g}function c(u){for(var x=[],d=u.length,m=0;m<d;m++)x[m]=Math.round(u[m]);return x}function h(u,x){for(var d=u.length,m=0;m<d;m++)if(u[m]<=-.5||u[m]>=x-.5)return!1;return!0}r.handlePick=function(u){if(u.object===this.mesh){var x=u.index=u.data.index;u.data._cellCenter?u.traceCoordinate=u.data.dataCoordinate:u.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var d=this.data.hovertext||this.data.text;return p(d)&&d[x]!==void 0?u.textLabel=d[x]:d&&(u.textLabel=d),!0}},r.update=function(u){var x=this.scene,d=x.fullSceneLayout;this.data=u;var m,g=u.x.length,y=i(l(d.xaxis,u.x,x.dataScale[0],u.xcalendar),l(d.yaxis,u.y,x.dataScale[1],u.ycalendar),l(d.zaxis,u.z,x.dataScale[2],u.zcalendar));if(u.i&&u.j&&u.k){if(u.i.length!==u.j.length||u.j.length!==u.k.length||!h(u.i,g)||!h(u.j,g)||!h(u.k,g))return;m=i(c(u.i),c(u.j),c(u.k))}else m=u.alphahull===0?T(y):u.alphahull>0?o(u.alphahull,y):function(S,w){for(var E=["x","y","z"].indexOf(S),P=[],C=w.length,O=0;O<C;O++)P[O]=[w[O][(E+1)%3],w[O][(E+2)%3]];return k(P)}(u.delaunayaxis,y);var v={positions:y,cells:m,lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,contourEnable:u.contour.show,contourColor:s(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading};if(u.intensity){var _=t(u);this.color="#fff";var f=u.intensitymode;v[f+"Intensity"]=u.intensity,v[f+"IntensityBounds"]=[_.min,_.max],v.colormap=b(u)}else u.vertexcolor?(this.color=u.vertexcolor[0],v.vertexColors=a(u.vertexcolor)):u.facecolor?(this.color=u.facecolor[0],v.cellColors=a(u.facecolor)):(this.color=u.color,v.meshColor=s(u.color));this.mesh.update(v)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},X.exports=function(u,x){var d=u.glplot.gl,m=A({gl:d}),g=new n(u,m,x.uid);return m._trace=g,g.update(x),u.glplot.add(m),g}},74212:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(27260),T=e(52948);X.exports=function(b,p,s,t){function i(r,a){return k.coerce(b,p,T,r,a)}function n(r){var a=r.map(function(l){var c=i(l);return c&&k.isArrayOrTypedArray(c)?c:null});return a.every(function(l){return l&&l.length===a[0].length})&&a}n(["x","y","z"])?(n(["i","j","k"]),(!p.i||p.j&&p.k)&&(!p.j||p.k&&p.i)&&(!p.k||p.i&&p.j)?(A.getComponentMethod("calendars","handleTraceDefaults")(b,p,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){i(r)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),o(b,p,t,i,{prefix:"",cLetter:"c"})):(p.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",s)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),p._length=null):p.visible=!1):p.visible=!1}},7404:function(X,I,e){"use strict";X.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(X,I,e){"use strict";var A=e(3400).extendFlat,k=e(52904),o=e(29736).axisHoverFormat,T=e(98192).u,b=e(55756),p=e(48164),s=p.INCREASING.COLOR,t=p.DECREASING.COLOR,i=k.line;function n(r){return{line:{color:A({},i.color,{dflt:r}),width:i.width,dash:T,editType:"style"},editType:"style"}}X.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:A({},i.width,{}),dash:A({},T,{}),editType:"style"},increasing:n(s),decreasing:n(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:A({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:k.zorder}},42812:function(X,I,e){"use strict";var A=e(3400),k=A._,o=e(54460),T=e(1220),b=e(39032).BADNUM;function p(t,i,n,r){return{o:t,h:i,l:n,c:r}}function s(t,i,n,r,a,l){for(var c=a.makeCalcdata(i,"open"),h=a.makeCalcdata(i,"high"),u=a.makeCalcdata(i,"low"),x=a.makeCalcdata(i,"close"),d=A.isArrayOrTypedArray(i.text),m=A.isArrayOrTypedArray(i.hovertext),g=!0,y=null,v=!!i.xperiodalignment,_=[],f=0;f<r.length;f++){var S=r[f],w=c[f],E=h[f],P=u[f],C=x[f];if(S!==b&&w!==b&&E!==b&&P!==b&&C!==b){C===w?y!==null&&C!==y&&(g=C>y):g=C>w,y=C;var O=l(w,E,P,C);O.pos=S,O.yc=(w+C)/2,O.i=f,O.dir=g?"increasing":"decreasing",O.x=O.pos,O.y=[P,E],v&&(O.orig_p=n[f]),d&&(O.tx=i.text[f]),m&&(O.htx=i.hovertext[f]),_.push(O)}else _.push({pos:S,empty:!0})}return i._extremes[a._id]=o.findExtremes(a,A.concat(u,h),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}X.exports={calc:function(t,i){var n=o.getFromId(t,i.xaxis),r=o.getFromId(t,i.yaxis),a=function(x,d,m){var g=m._minDiff;if(!g){var y,v=x._fullData,_=[];for(g=1/0,y=0;y<v.length;y++){var f=v[y];if(f.type==="ohlc"&&f.visible===!0&&f.xaxis===d._id){_.push(f);var S=d.makeCalcdata(f,"x");f._origX=S;var w=T(m,d,"x",S).vals;f._xcalc=w;var E=A.distinctVals(w).minDiff;E&&isFinite(E)&&(g=Math.min(g,E))}}for(g===1/0&&(g=1),y=0;y<_.length;y++)_[y]._minDiff=g}return g*m.tickwidth}(t,n,i),l=i._minDiff;i._minDiff=null;var c=i._origX;i._origX=null;var h=i._xcalc;i._xcalc=null;var u=s(t,i,c,h,r,p);return i._extremes[n._id]=o.findExtremes(n,h,{vpad:l/2}),u.length?(A.extendFlat(u[0].t,{wHover:l/2,tickLen:a}),u):[{t:{empty:!0}}]},calcCommon:s}},23860:function(X,I,e){"use strict";var A=e(3400),k=e(52744),o=e(31147),T=e(20279);function b(p,s,t,i){t(i+".line.color"),t(i+".line.width",s.line.width),t(i+".line.dash",s.line.dash)}X.exports=function(p,s,t,i){function n(r,a){return A.coerce(p,s,T,r,a)}k(p,s,n,i)?(o(p,s,i,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),b(0,s,n,"increasing"),b(0,s,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),i._requestRangeslider[s.xaxis]=!0,n("zorder")):s.visible=!1}},18720:function(X,I,e){"use strict";var A=e(54460),k=e(3400),o=e(93024),T=e(76308),b=e(3400).fillText,p=e(48164),s={increasing:p.INCREASING.SYMBOL,decreasing:p.DECREASING.SYMBOL};function t(r,a,l,c){var h,u,x=r.cd,d=r.xa,m=x[0].trace,g=x[0].t,y=m.type,v=y==="ohlc"?"l":"min",_=y==="ohlc"?"h":"max",f=g.bPos||0,S=function(F){return F.pos+f-a},w=g.bdPos||g.tickLen,E=g.wHover,P=Math.min(1,w/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));function C(F){var j=S(F);return o.inbox(j-E,j+E,h)}function O(F){var j=F[v],q=F[_];return j===q||o.inbox(j-l,q-l,h)}function R(F){return(C(F)+O(F))/2}h=r.maxHoverDistance-P,u=r.maxSpikeDistance-P;var U=o.getDistanceFunction(c,C,O,R);if(o.getClosest(x,U,r),r.index===!1)return null;var D=x[r.index];if(D.empty)return null;var N=m[D.dir],W=N.line.color;return T.opacity(W)&&N.line.width?r.color=W:r.color=N.fillcolor,r.x0=d.c2p(D.pos+f-w,!0),r.x1=d.c2p(D.pos+f+w,!0),r.xLabelVal=D.orig_p!==void 0?D.orig_p:D.pos,r.spikeDistance=R(D)*u/h,r.xSpike=d.c2p(D.pos,!0),r}function i(r,a,l,c){var h=r.cd,u=r.ya,x=h[0].trace,d=h[0].t,m=[],g=t(r,a,l,c);if(!g)return[];var y=h[g.index].hi||x.hoverinfo,v=y.split("+");if(y!=="all"&&v.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],f={},S=0;S<_.length;S++){var w,E=_[S],P=x[E][g.index],C=u.c2p(P,!0);P in f?(w=f[P]).yLabel+="<br>"+d.labels[E]+A.hoverLabelText(u,P,x.yhoverformat):((w=k.extendFlat({},g)).y0=w.y1=C,w.yLabelVal=P,w.yLabel=d.labels[E]+A.hoverLabelText(u,P,x.yhoverformat),w.name="",m.push(w),f[P]=w)}return m}function n(r,a,l,c){var h=r.cd,u=r.ya,x=h[0].trace,d=h[0].t,m=t(r,a,l,c);if(!m)return[];var g=h[m.index],y=m.index=g.i,v=g.dir;function _(O){return d.labels[O]+A.hoverLabelText(u,x[O][y],x.yhoverformat)}var f=g.hi||x.hoverinfo,S=f.split("+"),w=f==="all",E=w||S.indexOf("y")!==-1,P=w||S.indexOf("text")!==-1,C=E?[_("open"),_("high"),_("low"),_("close")+"  "+s[v]]:[];return P&&b(g,x,C),m.extraText=C.join("<br>"),m.y0=m.y1=u.c2p(g.yc,!0),[m]}X.exports={hoverPoints:function(r,a,l,c){return r.cd[0].trace.hoverlabel.split?i(r,a,l,c):n(r,a,l,c)},hoverSplit:i,hoverOnPoints:n}},65456:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(X,I,e){"use strict";var A=e(24040),k=e(3400);X.exports=function(o,T,b,p){var s=b("x"),t=b("open"),i=b("high"),n=b("low"),r=b("close");if(b("hoverlabel.split"),A.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x"],p),t&&i&&n&&r){var a=Math.min(t.length,i.length,n.length,r.length);return s&&(a=Math.min(a,k.minRowLength(s))),T._length=a,a}}},36664:function(X,I,e){"use strict";var A=e(33428),k=e(3400);X.exports=function(o,T,b,p){var s=T.yaxis,t=T.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(p,b,"trace ohlc").each(function(n){var r=A.select(this),a=n[0],l=a.t;if(a.trace.visible!==!0||l.empty)r.remove();else{var c=l.tickLen,h=r.selectAll("path").data(k.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(u){if(u.empty)return"M0,0Z";var x=t.c2p(u.pos-c,!0),d=t.c2p(u.pos+c,!0),m=i?(x+d)/2:t.c2p(u.pos,!0);return"M"+x+","+s.c2p(u.o,!0)+"H"+m+"M"+m+","+s.c2p(u.h,!0)+"V"+s.c2p(u.l,!0)+"M"+d+","+s.c2p(u.c,!0)+"H"+m})}})}},97384:function(X){"use strict";X.exports=function(I,e){var A,k=I.cd,o=I.xaxis,T=I.yaxis,b=[],p=k[0].t.bPos||0;if(e===!1)for(A=0;A<k.length;A++)k[A].selected=0;else for(A=0;A<k.length;A++){var s=k[A];e.contains([o.c2p(s.pos+p),T.c2p(s.yc)],null,s.i,I)?(b.push({pointNumber:s.i,x:o.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},14008:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(76308);X.exports=function(T,b,p){var s=p||A.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=t[0].trace;A.select(this).selectAll("path").each(function(n){if(!n.empty){var r=i[n.dir].line;A.select(this).style("fill","none").call(o.stroke,r.color).call(k.dashLine,r.dash,r.width).style("opacity",i.selectedpoints&&!n.selected?.3:1)}})})}},72140:function(X,I,e){"use strict";var A=e(92880).extendFlat,k=e(45464),o=e(25376),T=e(49084),b=e(21776).Ks,p=e(86968).u,s=A({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});X.exports={domain:p({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:A({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(X,I,e){"use strict";var A=e(84888)._M,k=e(60268),o="parcats";I.name=o,I.plot=function(T,b,p,s){var t=A(T.calcdata,o);if(t.length){var i=t[0];k(T,i,p,s)}},I.clean=function(T,b,p,s){var t=s._has&&s._has("parcats"),i=b._has&&b._has("parcats");t&&!i&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(X,I,e){"use strict";var A=e(71688).wrap,k=e(94288).hasColorscale,o=e(47128),T=e(68944),b=e(43616),p=e(3400),s=e(38248);function t(r,a,l){r.valueInds.push(a),r.count+=l}function i(r,a,l){return{categoryInds:r,color:a,rawColor:l,valueInds:[],count:0}}function n(r,a,l){r.valueInds.push(a),r.count+=l}X.exports=function(r,a){var l=p.filterVisible(a.dimensions);if(l.length===0)return[];var c,h,u,x=l.map(function(q){var te;if(q.categoryorder==="trace")te=null;else if(q.categoryorder==="array")te=q.categoryarray;else{te=T(q.values);for(var ee=!0,Q=0;Q<te.length;Q++)if(!s(te[Q])){ee=!1;break}te.sort(ee?p.sorterAsc:void 0),q.categoryorder==="category descending"&&(te=te.reverse())}return function(J,K){K=K==null?[]:K.map(function(de){return de});var Y={},ie={},se=[];K.forEach(function(de,pe){Y[de]=0,ie[de]=pe});for(var ae=0;ae<J.length;ae++){var ue,ve=J[ae];Y[ve]===void 0?(Y[ve]=1,ue=K.push(ve)-1,ie[ve]=ue):(Y[ve]++,ue=ie[ve]),se.push(ue)}var ye=K.map(function(de){return Y[de]});return{uniqueValues:K,uniqueCounts:ye,inds:se}}(q.values,te)});c=p.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(q){var te,ee=q.map(function(Q){return Q.displayindex});if(function(Q){for(var J=new Array(Q.length),K=0;K<Q.length;K++){if(Q[K]<0||Q[K]>=Q.length||J[Q[K]]!==void 0)return!1;J[Q[K]]=!0}return!0}(ee))for(te=0;te<q.length;te++)q[te]._displayindex=q[te].displayindex;else for(te=0;te<q.length;te++)q[te]._displayindex=te}(l),l.forEach(function(q,te){(function(ee,Q){ee._categoryarray=Q.uniqueValues,ee.ticktext===null||ee.ticktext===void 0?ee._ticktext=[]:ee._ticktext=ee.ticktext.slice();for(var J=ee._ticktext.length;J<Q.uniqueValues.length;J++)ee._ticktext.push(Q.uniqueValues[J])})(q,x[te])});var d,m=a.line;m?(k(a,"line")&&o(r,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),d=b.tryColorscale(m)):d=p.identity;var g,y,v,_,f,S=l[0].values.length,w={},E=x.map(function(q){return q.inds});for(u=0,g=0;g<S;g++){var P=[];for(y=0;y<E.length;y++)P.push(E[y][g]);h=c[g%c.length],u+=h;var C=(v=g,_=void 0,f=void 0,p.isArrayOrTypedArray(m.color)?f=_=m.color[v%m.color.length]:_=m.color,{color:d(_),rawColor:f}),O=P+"-"+C.rawColor;w[O]===void 0&&(w[O]=i(P,C.color,C.rawColor)),n(w[O],g,h)}var R,U=l.map(function(q,te){return function(ee,Q,J,K,Y){return{dimensionInd:ee,containerInd:Q,displayInd:J,dimensionLabel:K,count:Y,categories:[],dragX:null}}(te,q._index,q._displayindex,q.label,u)});for(g=0;g<S;g++)for(h=c[g%c.length],y=0;y<U.length;y++){var D=U[y].containerInd,N=x[y].inds[g],W=U[y].categories;if(W[N]===void 0){var F=a.dimensions[D]._categoryarray[N],j=a.dimensions[D]._ticktext[N];W[N]={dimensionInd:y,categoryInd:R=N,categoryValue:F,displayInd:R,categoryLabel:j,valueInds:[],count:0,dragY:null}}t(W[N],g,h)}return A(function(q,te,ee){var Q=q.map(function(J){return J.categories.length}).reduce(function(J,K){return Math.max(J,K)});return{dimensions:q,paths:te,trace:void 0,maxCats:Q,count:ee}}(U,w,u))}},76671:function(X,I,e){"use strict";var A=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),p=e(72140),s=e(26284),t=e(38116).isTypedArraySpec;function i(n,r){function a(m,g){return A.coerce(n,r,p.dimensions,m,g)}var l=a("values"),c=a("visible");if(l&&l.length||(c=r.visible=!1),c){a("label"),a("displayindex",r._index);var h,u=n.categoryarray,x=A.isArrayOrTypedArray(u)&&u.length>0||t(u);x&&(h="array");var d=a("categoryorder",h);d==="array"?(a("categoryarray"),a("ticktext")):(delete n.categoryarray,delete n.ticktext),x||d!=="array"||(r.categoryorder="trace")}}X.exports=function(n,r,a,l){function c(d,m){return A.coerce(n,r,p,d,m)}var h=b(n,r,{name:"dimensions",handleItemDefaults:i}),u=function(d,m,g,y,v){v("line.shape"),v("line.hovertemplate");var _=v("line.color",y.colorway[0]);if(k(d,"line")&&A.isArrayOrTypedArray(_)){if(_.length)return v("line.colorscale"),o(d,m,y,v,{prefix:"line.",cLetter:"c"}),_.length;m.line.color=g}return 1/0}(n,r,a,l,c);T(r,l,c),Array.isArray(h)&&h.length||(r.visible=!1),s(r,h,"values",u),c("hoveron"),c("hovertemplate"),c("arrangement"),c("bundlecolors"),c("sortpaths"),c("counts");var x=l.font;A.coerceFont(c,"labelfont",x,{overrideDflt:{size:Math.round(x.size)}}),A.coerceFont(c,"tickfont",x,{autoShadowDflt:!0,overrideDflt:{size:Math.round(x.size/1.2)}})}},22020:function(X,I,e){"use strict";X.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(X,I,e){"use strict";var A=e(33428),k=e(67756).Gz,o=e(36424),T=e(93024),b=e(3400),p=b.strTranslate,s=e(43616),t=e(49760),i=e(72736);function n(ee,Q,J,K){var Y=Q._context.staticPlot,ie=ee.map(W.bind(0,Q,J)),se=K.selectAll("g.parcatslayer").data([null]);se.enter().append("g").attr("class","parcatslayer").style("pointer-events",Y?"none":"all");var ae=se.selectAll("g.trace.parcats").data(ie,r),ue=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(me){return p(me.x,me.y)}),ue.append("g").attr("class","paths");var ve=ae.select("g.paths").selectAll("path.path").data(function(me){return me.paths},r);ve.attr("fill",function(me){return me.model.color});var ye=ve.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(me){return me.model.color}).attr("fill-opacity",0);m(ye),ve.attr("d",function(me){return me.svgD}),ye.empty()||ve.sort(l),ve.exit().remove(),ve.on("mouseover",c).on("mouseout",h).on("click",d),ue.append("g").attr("class","dimensions");var de=ae.select("g.dimensions").selectAll("g.dimension").data(function(me){return me.dimensions},r);de.enter().append("g").attr("class","dimension"),de.attr("transform",function(me){return p(me.x,0)}),de.exit().remove();var pe=de.selectAll("g.category").data(function(me){return me.categories},r),ge=pe.enter().append("g").attr("class","category");pe.attr("transform",function(me){return p(0,me.y)}),ge.append("rect").attr("class","catrect").attr("pointer-events","none"),pe.select("rect.catrect").attr("fill","none").attr("width",function(me){return me.width}).attr("height",function(me){return me.height}),y(ge);var ke=pe.selectAll("rect.bandrect").data(function(me){return me.bands},r);ke.each(function(){b.raiseToTop(this)}),ke.attr("fill",function(me){return me.color});var Ee=ke.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(me){return me.color}).attr("fill-opacity",0);ke.attr("fill",function(me){return me.color}).attr("width",function(me){return me.width}).attr("height",function(me){return me.height}).attr("y",function(me){return me.y}).attr("cursor",function(me){return me.parcatsViewModel.arrangement==="fixed"?"default":me.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),v(Ee),ke.exit().remove(),ge.append("text").attr("class","catlabel").attr("pointer-events","none"),pe.select("text.catlabel").attr("text-anchor",function(me){return a(me)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(me){return a(me)?me.width+5:-5}).attr("y",function(me){return me.height/2}).text(function(me){return me.model.categoryLabel}).each(function(me){s.font(A.select(this),me.parcatsViewModel.categorylabelfont),i.convertToTspans(A.select(this),Q)}),ge.append("text").attr("class","dimlabel"),pe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(me){return me.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(me){return me.width/2}).attr("y",-5).text(function(me,oe){return oe===0?me.parcatsViewModel.model.dimensions[me.model.dimensionInd].dimensionLabel:null}).each(function(me){s.font(A.select(this),me.parcatsViewModel.labelfont)}),pe.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",P),pe.exit().remove(),de.call(A.behavior.drag().origin(function(me){return{x:me.x,y:0}}).on("dragstart",C).on("drag",O).on("dragend",R)),ae.each(function(me){me.traceSelection=A.select(this),me.pathSelection=A.select(this).selectAll("g.paths").selectAll("path.path"),me.dimensionSelection=A.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function r(ee){return ee.key}function a(ee){var Q=ee.parcatsViewModel.dimensions.length,J=ee.parcatsViewModel.dimensions[Q-1].model.dimensionInd;return ee.model.dimensionInd===J}function l(ee,Q){return ee.model.rawColor>Q.model.rawColor?1:ee.model.rawColor<Q.model.rawColor?-1:0}function c(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),g(A.select(this));var Q=u(ee),J=x(ee);if(ee.parcatsViewModel.graphDiv.emit("plotly_hover",{points:Q,event:A.event,constraints:J}),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K,Y,ie,se=A.mouse(this)[0],ae=ee.parcatsViewModel.graphDiv,ue=ee.parcatsViewModel.trace,ve=ae._fullLayout,ye=ve._paperdiv.node().getBoundingClientRect(),de=ee.parcatsViewModel.graphDiv.getBoundingClientRect();for(ie=0;ie<ee.leftXs.length-1;ie++)if(ee.leftXs[ie]+ee.dimWidths[ie]-2<=se&&se<=ee.leftXs[ie+1]+2){var pe=ee.parcatsViewModel.dimensions[ie],ge=ee.parcatsViewModel.dimensions[ie+1];K=(pe.x+pe.width+ge.x)/2,Y=(ee.topYs[ie]+ee.topYs[ie+1]+ee.height)/2;break}var ke=ee.parcatsViewModel.x+K,Ee=ee.parcatsViewModel.y+Y,me=t.mostReadable(ee.model.color,["black","white"]),oe=ee.model.count,re=oe/ee.parcatsViewModel.model.count,fe={countLabel:oe,probabilityLabel:re.toFixed(3)},Se=[];ee.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Se.push(["Count:",fe.countLabel].join(" ")),ee.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Se.push(["P:",fe.probabilityLabel].join(" "));var be=Se.join("<br>"),we=A.mouse(ae)[0];T.loneHover({trace:ue,x:ke-ye.left+de.left,y:Ee-ye.top+de.top,text:be,color:ee.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:me,idealAlign:we<ke?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:fe,eventData:[{data:ue._input,fullData:ue,count:oe,probability:re}]},{container:ve._hoverlayer.node(),outerContainer:ve._paper.node(),gd:ae})}}}function h(ee){if(!ee.parcatsViewModel.dragDimension&&(m(A.select(this)),T.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ee.parcatsViewModel.pathSelection.sort(l),ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var Q=u(ee),J=x(ee);ee.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:Q,event:A.event,constraints:J})}}function u(ee){for(var Q=[],J=U(ee.parcatsViewModel),K=0;K<ee.model.valueInds.length;K++){var Y=ee.model.valueInds[K];Q.push({curveNumber:J,pointNumber:Y})}return Q}function x(ee){for(var Q={},J=ee.parcatsViewModel.model.dimensions,K=0;K<J.length;K++){var Y=J[K],ie=Y.categories[ee.model.categoryInds[K]];Q[Y.containerInd]=ie.categoryValue}return ee.model.rawColor!==void 0&&(Q.color=ee.model.rawColor),Q}function d(ee){if(ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var Q=u(ee),J=x(ee);ee.parcatsViewModel.graphDiv.emit("plotly_click",{points:Q,event:A.event,constraints:J})}}function m(ee){ee.attr("fill",function(Q){return Q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g(ee){ee.attr("fill-opacity",.8).attr("stroke",function(Q){return t.mostReadable(Q.model.color,["black","white"])}).attr("stroke-width",.3)}function y(ee){ee.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function v(ee){ee.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(ee){var Q=ee.parcatsViewModel.pathSelection,J=ee.categoryViewModel.model.dimensionInd,K=ee.categoryViewModel.model.categoryInd;return Q.filter(function(Y){return Y.model.categoryInds[J]===K&&Y.model.color===ee.color})}function f(ee,Q,J){var K=A.select(ee).datum(),Y=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,se=A.select(ee.parentNode).selectAll("rect.bandrect"),ae=[];se.each(function(ve){_(ve).each(function(ye){Array.prototype.push.apply(ae,u(ye))})});var ue={};ue[Y.dimensionInd]=Y.categoryValue,ie.emit(Q,{points:ae,event:J,constraints:ue})}function S(ee,Q,J){var K=A.select(ee).datum(),Y=K.categoryViewModel.model,ie=K.parcatsViewModel.graphDiv,se=_(K),ae=[];se.each(function(ve){Array.prototype.push.apply(ae,u(ve))});var ue={};ue[Y.dimensionInd]=Y.categoryValue,K.rawColor!==void 0&&(ue.color=K.rawColor),ie.emit(Q,{points:ae,event:J,constraints:ue})}function w(ee,Q,J){ee._fullLayout._calcInverseTransform(ee);var K,Y,ie=ee._fullLayout._invScaleX,se=ee._fullLayout._invScaleY,ae=A.select(J.parentNode).select("rect.catrect"),ue=ae.node().getBoundingClientRect(),ve=ae.datum(),ye=ve.parcatsViewModel,de=ye.model.dimensions[ve.model.dimensionInd],pe=ye.trace,ge=ue.top+ue.height/2;ye.dimensions.length>1&&de.displayInd===ye.dimensions.length-1?(K=ue.left,Y="left"):(K=ue.left+ue.width,Y="right");var ke=ve.model.count,Ee=ve.model.categoryLabel,me=ke/ve.parcatsViewModel.model.count,oe={countLabel:ke,categoryLabel:Ee,probabilityLabel:me.toFixed(3)},re=[];ve.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&re.push(["Count:",oe.countLabel].join(" ")),ve.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&re.push(["P("+oe.categoryLabel+"):",oe.probabilityLabel].join(" "));var fe=re.join("<br>");return{trace:pe,x:ie*(K-Q.left),y:se*(ge-Q.top),text:fe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Y,hovertemplate:pe.hovertemplate,hovertemplateLabels:oe,eventData:[{data:pe._input,fullData:pe,count:ke,category:Ee,probability:me}]}}function E(ee){if(!ee.parcatsViewModel.dragDimension&&ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(A.mouse(this)[1]<-1)return;var Q,J=ee.parcatsViewModel.graphDiv,K=J._fullLayout,Y=K._paperdiv.node().getBoundingClientRect(),ie=ee.parcatsViewModel.hoveron,se=this;ie==="color"?(function(ae){var ue=A.select(ae).datum(),ve=_(ue);g(ve),ve.each(function(){b.raiseToTop(this)}),A.select(ae.parentNode).selectAll("rect.bandrect").filter(function(ye){return ye.color===ue.color}).each(function(){b.raiseToTop(this),A.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(se),S(se,"plotly_hover",A.event)):(function(ae){A.select(ae.parentNode).selectAll("rect.bandrect").each(function(ue){var ve=_(ue);g(ve),ve.each(function(){b.raiseToTop(this)})}),A.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(se),f(se,"plotly_hover",A.event)),ee.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ie==="category"?Q=w(J,Y,se):ie==="color"?Q=function(ae,ue,ve){ae._fullLayout._calcInverseTransform(ae);var ye,de,pe=ae._fullLayout._invScaleX,ge=ae._fullLayout._invScaleY,ke=ve.getBoundingClientRect(),Ee=A.select(ve).datum(),me=Ee.categoryViewModel,oe=me.parcatsViewModel,re=oe.model.dimensions[me.model.dimensionInd],fe=oe.trace,Se=ke.y+ke.height/2;oe.dimensions.length>1&&re.displayInd===oe.dimensions.length-1?(ye=ke.left,de="left"):(ye=ke.left+ke.width,de="right");var be=me.model.categoryLabel,we=Ee.parcatsViewModel.model.count,Me=0;Ee.categoryViewModel.bands.forEach(function(Ze){Ze.color===Ee.color&&(Me+=Ze.count)});var Ie=me.model.count,Oe=0;oe.pathSelection.each(function(Ze){Ze.model.color===Ee.color&&(Oe+=Ze.model.count)});var he=Me/we,_e=Me/Oe,Ae=Me/Ie,De={countLabel:Me,categoryLabel:be,probabilityLabel:he.toFixed(3)},Le=[];me.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Le.push(["Count:",De.countLabel].join(" ")),me.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Le.push("P(color \u2229 "+be+"): "+De.probabilityLabel),Le.push("P("+be+" | color): "+_e.toFixed(3)),Le.push("P(color | "+be+"): "+Ae.toFixed(3)));var Be=Le.join("<br>"),Ve=t.mostReadable(Ee.color,["black","white"]);return{trace:fe,x:pe*(ye-ue.left),y:ge*(Se-ue.top),text:Be,color:Ee.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:de,hovertemplate:fe.hovertemplate,hovertemplateLabels:De,eventData:[{data:fe._input,fullData:fe,category:be,count:we,probability:he,categorycount:Ie,colorcount:Oe,bandcolorcount:Me}]}}(J,Y,se):ie==="dimension"&&(Q=function(ae,ue,ve){var ye=[];return A.select(ve.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ye.push(w(ae,ue,this))}),ye}(J,Y,se)),Q&&T.loneHover(Q,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:J}))}}function P(ee){var Q=ee.parcatsViewModel;Q.dragDimension||(m(Q.pathSelection),y(Q.dimensionSelection.selectAll("g.category")),v(Q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(Q.graphDiv._fullLayout._hoverlayer.node()),Q.pathSelection.sort(l),Q.hoverinfoItems.indexOf("skip")!==-1)||(ee.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",A.event):f(this,"plotly_unhover",A.event))}function C(ee){ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragDimensionDisplayInd=ee.model.displayInd,ee.initialDragDimensionDisplayInds=ee.parcatsViewModel.model.dimensions.map(function(Q){return Q.displayInd}),ee.dragHasMoved=!1,ee.dragCategoryDisplayInd=null,A.select(this).selectAll("g.category").select("rect.catrect").each(function(Q){var J=A.mouse(this)[0],K=A.mouse(this)[1];-2<=J&&J<=Q.width+2&&-2<=K&&K<=Q.height+2&&(ee.dragCategoryDisplayInd=Q.model.displayInd,ee.initialDragCategoryDisplayInds=ee.model.categories.map(function(Y){return Y.displayInd}),Q.model.dragY=Q.y,b.raiseToTop(this.parentNode),A.select(this.parentNode).selectAll("rect.bandrect").each(function(Y){Y.y<K&&K<=Y.y+Y.height&&(ee.potentialClickBand=this)}))}),ee.parcatsViewModel.dragDimension=ee,T.loneUnhover(ee.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&(ee.dragHasMoved=!0,ee.dragDimensionDisplayInd!==null)){var Q=ee.dragDimensionDisplayInd,J=Q-1,K=Q+1,Y=ee.parcatsViewModel.dimensions[Q];if(ee.dragCategoryDisplayInd!==null){var ie=Y.categories[ee.dragCategoryDisplayInd];ie.model.dragY+=A.event.dy;var se=ie.model.dragY,ae=ie.model.displayInd,ue=Y.categories,ve=ue[ae-1],ye=ue[ae+1];ve!==void 0&&se<ve.y+ve.height/2&&(ie.model.displayInd=ve.model.displayInd,ve.model.displayInd=ae),ye!==void 0&&se+ie.height>ye.y+ye.height/2&&(ie.model.displayInd=ye.model.displayInd,ye.model.displayInd=ae),ee.dragCategoryDisplayInd=ie.model.displayInd}if(ee.dragCategoryDisplayInd===null||ee.parcatsViewModel.arrangement==="freeform"){Y.model.dragX=A.event.x;var de=ee.parcatsViewModel.dimensions[J],pe=ee.parcatsViewModel.dimensions[K];de!==void 0&&Y.model.dragX<de.x+de.width&&(Y.model.displayInd=de.model.displayInd,de.model.displayInd=Q),pe!==void 0&&Y.model.dragX+Y.width>pe.x&&(Y.model.displayInd=pe.model.displayInd,pe.model.displayInd=ee.dragDimensionDisplayInd),ee.dragDimensionDisplayInd=Y.model.displayInd}q(ee.parcatsViewModel),j(ee.parcatsViewModel),N(ee.parcatsViewModel),D(ee.parcatsViewModel)}}function R(ee){if(ee.parcatsViewModel.arrangement!=="fixed"&&ee.dragDimensionDisplayInd!==null){A.select(this).selectAll("text").attr("font-weight","normal");var Q={},J=U(ee.parcatsViewModel),K=ee.parcatsViewModel.model.dimensions.map(function(ye){return ye.displayInd}),Y=ee.initialDragDimensionDisplayInds.some(function(ye,de){return ye!==K[de]});Y&&K.forEach(function(ye,de){var pe=ee.parcatsViewModel.model.dimensions[de].containerInd;Q["dimensions["+pe+"].displayindex"]=ye});var ie=!1;if(ee.dragCategoryDisplayInd!==null){var se=ee.model.categories.map(function(ye){return ye.displayInd});if(ie=ee.initialDragCategoryDisplayInds.some(function(ye,de){return ye!==se[de]})){var ae=ee.model.categories.slice().sort(function(ye,de){return ye.displayInd-de.displayInd}),ue=ae.map(function(ye){return ye.categoryValue}),ve=ae.map(function(ye){return ye.categoryLabel});Q["dimensions["+ee.model.containerInd+"].categoryarray"]=[ue],Q["dimensions["+ee.model.containerInd+"].ticktext"]=[ve],Q["dimensions["+ee.model.containerInd+"].categoryorder"]="array"}}ee.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!ee.dragHasMoved&&ee.potentialClickBand&&(ee.parcatsViewModel.hoveron==="color"?S(ee.potentialClickBand,"plotly_click",A.event.sourceEvent):f(ee.potentialClickBand,"plotly_click",A.event.sourceEvent)),ee.model.dragX=null,ee.dragCategoryDisplayInd!==null&&(ee.parcatsViewModel.dimensions[ee.dragDimensionDisplayInd].categories[ee.dragCategoryDisplayInd].model.dragY=null,ee.dragCategoryDisplayInd=null),ee.dragDimensionDisplayInd=null,ee.parcatsViewModel.dragDimension=null,ee.dragHasMoved=null,ee.potentialClickBand=null,q(ee.parcatsViewModel),j(ee.parcatsViewModel),A.transition().duration(300).ease("cubic-in-out").each(function(){N(ee.parcatsViewModel,!0),D(ee.parcatsViewModel,!0)}).each("end",function(){(Y||ie)&&o.restyle(ee.parcatsViewModel.graphDiv,Q,[J])})}}function U(ee){for(var Q,J=ee.graphDiv._fullData,K=0;K<J.length;K++)if(ee.key===J[K].uid){Q=K;break}return Q}function D(ee,Q){var J;Q===void 0&&(Q=!1),ee.pathSelection.data(function(K){return K.paths},r),(J=ee.pathSelection,Q?J.transition():J).attr("d",function(K){return K.svgD})}function N(ee,Q){function J(se){return Q?se.transition():se}Q===void 0&&(Q=!1),ee.dimensionSelection.data(function(se){return se.dimensions},r);var K=ee.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},r);J(ee.dimensionSelection).attr("transform",function(se){return p(se.x,0)}),J(K).attr("transform",function(se){return p(0,se.y)}),K.select(".dimlabel").text(function(se,ae){return ae===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}),K.select(".catlabel").attr("text-anchor",function(se){return a(se)?"start":"end"}).attr("x",function(se){return a(se)?se.width+5:-5}).each(function(se){var ae,ue;a(se)?(ae=se.width+5,ue="start"):(ae=-5,ue="end"),A.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",ue)});var Y=K.selectAll("rect.bandrect").data(function(se){return se.bands},r),ie=Y.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);Y.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),v(ie),Y.each(function(){b.raiseToTop(this)}),Y.exit().remove()}function W(ee,Q,J){var K,Y=J[0],ie=Q.margin||{l:80,r:80,t:100,b:80},se=Y.trace,ae=se.domain,ue=Q.width,ve=Q.height,ye=Math.floor(ue*(ae.x[1]-ae.x[0])),de=Math.floor(ve*(ae.y[1]-ae.y[0])),pe=ae.x[0]*ue+ie.l,ge=Q.height-ae.y[1]*Q.height+ie.t,ke=se.line.shape;K=se.hoverinfo==="all"?["count","probability"]:(se.hoverinfo||"").split("+");var Ee={trace:se,key:se.uid,model:Y,x:pe,y:ge,width:ye,height:de,hoveron:se.hoveron,hoverinfoItems:K,arrangement:se.arrangement,bundlecolors:se.bundlecolors,sortpaths:se.sortpaths,labelfont:se.labelfont,categorylabelfont:se.tickfont,pathShape:ke,dragDimension:null,margin:ie,paths:[],dimensions:[],graphDiv:ee,traceSelection:null,pathSelection:null,dimensionSelection:null};return Y.dimensions&&(q(Ee),j(Ee)),Ee}function F(ee,Q,J,K,Y){var ie,se,ae=[],ue=[];for(se=0;se<J.length-1;se++)ie=k(J[se]+ee[se],ee[se+1]),ae.push(ie(Y)),ue.push(ie(1-Y));var ve="M "+ee[0]+","+Q[0];for(ve+="l"+J[0]+",0 ",se=1;se<J.length;se++)ve+="C"+ae[se-1]+","+Q[se-1]+" "+ue[se-1]+","+Q[se]+" "+ee[se]+","+Q[se],ve+="l"+J[se]+",0 ";for(ve+="l0,"+K+" ",ve+="l -"+J[J.length-1]+",0 ",se=J.length-2;se>=0;se--)ve+="C"+ue[se]+","+(Q[se+1]+K)+" "+ae[se]+","+(Q[se]+K)+" "+(ee[se]+J[se])+","+(Q[se]+K),ve+="l-"+J[se]+",0 ";return ve+"Z"}function j(ee){var Q=ee.dimensions,J=ee.model,K=Q.map(function(De){return De.categories.map(function(Le){return Le.y})}),Y=ee.model.dimensions.map(function(De){return De.categories.map(function(Le){return Le.displayInd})}),ie=ee.model.dimensions.map(function(De){return De.displayInd}),se=ee.dimensions.map(function(De){return De.model.dimensionInd}),ae=Q.map(function(De){return De.x}),ue=Q.map(function(De){return De.width}),ve=[];for(var ye in J.paths)J.paths.hasOwnProperty(ye)&&ve.push(J.paths[ye]);function de(De){var Le=De.categoryInds.map(function(Be,Ve){return Y[Ve][Be]});return se.map(function(Be){return Le[Be]})}ve.sort(function(De,Le){var Be=de(De),Ve=de(Le);return ee.sortpaths==="backward"&&(Be.reverse(),Ve.reverse()),Be.push(De.valueInds[0]),Ve.push(Le.valueInds[0]),ee.bundlecolors&&(Be.unshift(De.rawColor),Ve.unshift(Le.rawColor)),Be<Ve?-1:Be>Ve?1:0});for(var pe=new Array(ve.length),ge=Q[0].model.count,ke=Q[0].categories.map(function(De){return De.height}).reduce(function(De,Le){return De+Le}),Ee=0;Ee<ve.length;Ee++){var me,oe=ve[Ee];me=ge>0?ke*(oe.count/ge):0;for(var re,fe=new Array(K.length),Se=0;Se<oe.categoryInds.length;Se++){var be=oe.categoryInds[Se],we=Y[Se][be],Me=ie[Se];fe[Me]=K[Me][we],K[Me][we]+=me;var Ie=ee.dimensions[Me].categories[we],Oe=Ie.bands.length,he=Ie.bands[Oe-1];if(he===void 0||oe.rawColor!==he.rawColor){var _e=he===void 0?0:he.y+he.height;Ie.bands.push({key:_e,color:oe.color,rawColor:oe.rawColor,height:me,width:Ie.width,count:oe.count,y:_e,categoryViewModel:Ie,parcatsViewModel:ee})}else{var Ae=Ie.bands[Oe-1];Ae.height+=me,Ae.count+=oe.count}}re=ee.pathShape==="hspline"?F(ae,fe,ue,me,.5):F(ae,fe,ue,me,0),pe[Ee]={key:oe.valueInds[0],model:oe,height:me,leftXs:ae,topYs:fe,dimWidths:ue,svgD:re,parcatsViewModel:ee}}ee.paths=pe}function q(ee){var Q=ee.model.dimensions.map(function(se){return{displayInd:se.displayInd,dimensionInd:se.dimensionInd}});Q.sort(function(se,ae){return se.displayInd-ae.displayInd});var J=[];for(var K in Q){var Y=Q[K].dimensionInd,ie=ee.model.dimensions[Y];J.push(te(ee,ie))}ee.dimensions=J}function te(ee,Q){var J,K=ee.model.dimensions.length,Y=Q.displayInd;J=40+(K>1?(ee.width-80-16)/(K-1):0)*Y;var ie,se,ae,ue,ve,ye=[],de=ee.model.maxCats,pe=Q.categories.length,ge=Q.count,ke=ee.height-8*(de-1),Ee=8*(de-pe)/2,me=Q.categories.map(function(oe){return{displayInd:oe.displayInd,categoryInd:oe.categoryInd}});for(me.sort(function(oe,re){return oe.displayInd-re.displayInd}),ve=0;ve<pe;ve++)ue=me[ve].categoryInd,se=Q.categories[ue],ie=ge>0?se.count/ge*ke:0,ae={key:se.valueInds[0],model:se,width:16,height:ie,y:se.dragY!==null?se.dragY:Ee,bands:[],parcatsViewModel:ee},Ee=Ee+ie+8,ye.push(ae);return{key:Q.dimensionInd,x:Q.dragX!==null?Q.dragX:J,y:0,width:16,model:Q,categories:ye,parcatsViewModel:ee,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}X.exports=function(ee,Q,J,K){n(J,ee,K,Q)}},60268:function(X,I,e){"use strict";var A=e(51036);X.exports=function(k,o,T,b){var p=k._fullLayout,s=p._paper,t=p._size;A(k,s,o,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},82296:function(X,I,e){"use strict";var A=e(49084),k=e(94724),o=e(25376),T=e(86968).u,b=e(92880).extendFlat,p=e(31780).templatedArray;X.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({autoShadowDflt:!0,editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:p("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},A("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(X,I,e){"use strict";var A=e(30140),k=e(33428),o=e(71688).keyFun,T=e(71688).repeat,b=e(3400).sorterAsc,p=e(3400).strTranslate,s=A.bar.snapRatio;function t(w,E){return w*(1-s)+E*s}var i=A.bar.snapClose;function n(w,E){return w*(1-i)+E*i}function r(w,E,P,C){if(function(te,ee){for(var Q=0;Q<ee.length;Q++)if(te>=ee[Q][0]&&te<=ee[Q][1])return!0;return!1}(P,C))return P;var O=w?-1:1,R=0,U=E.length-1;if(O<0){var D=R;R=U,U=D}for(var N=E[R],W=N,F=R;O*F<O*U;F+=O){var j=F+O,q=E[j];if(O*P<O*n(N,q))return t(N,W);if(O*P<O*q||j===U)return t(q,N);W=N,N=q}}function a(w){w.attr("x",-A.bar.captureWidth/2).attr("width",A.bar.captureWidth)}function l(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,P,C,O=h(w.brush.filter.getConsolidated(),w.height),R=[0],U=O.length?O[0][0]:null,D=0;D<O.length;D++)P=(E=O[D])[1]-E[0],R.push(U),R.push(P),(C=D+1)<O.length&&(U=O[C][0]-E[1]);return R.push(w.height),R}function h(w,E){return w.map(function(P){return P.map(function(C){return Math.max(0,C*E)}).sort(b)})}function u(){k.select(document.body).style("cursor",null)}function x(w){w.attr("stroke-dasharray",c)}function d(w,E){var P=k.select(w).selectAll(".highlight, .highlight-shadow");x(E?P.transition().duration(A.bar.snapDuration).each("end",E):P)}function m(w,E){var P,C=w.brush,O=NaN,R={};if(C.filterSpecified){var U=w.height,D=C.filter.getConsolidated(),N=h(D,U),W=NaN,F=NaN,j=NaN;for(P=0;P<=N.length;P++){var q=N[P];if(q&&q[0]<=E&&E<=q[1]){W=P;break}if(F=P?P-1:NaN,q&&q[0]>E){j=P;break}}if(O=W,isNaN(O)&&(O=isNaN(F)||isNaN(j)?isNaN(F)?j:F:E-N[F][1]<N[j][0]-E?F:j),!isNaN(O)){var te=N[O],ee=function(Y,ie){var se=A.bar.handleHeight;if(!(ie>Y[1]+se||ie<Y[0]-se))return ie>=.9*Y[1]+.1*Y[0]?"n":ie<=.9*Y[0]+.1*Y[1]?"s":"ns"}(te,E);ee&&(R.interval=D[O],R.intervalPix=te,R.region=ee)}}if(w.ordinal&&!R.region){var Q=w.unitTickvals,J=w.unitToPaddedPx.invert(E);for(P=0;P<Q.length;P++){var K=[.25*Q[Math.max(P-1,0)]+.75*Q[P],.25*Q[Math.min(P+1,Q.length-1)]+.75*Q[P]];if(J>=K[0]&&J<=K[1]){R.clickableOrdinalRange=K;break}}}return R}function g(w,E){k.event.sourceEvent.stopPropagation();var P=E.height-k.mouse(w)[1]-2*A.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[P-C.grabPoint,P+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(P)].sort(b),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),d(w.parentNode)}function y(w,E){var P=m(E,E.height-k.mouse(w)[1]-2*A.verticalPadding),C="crosshair";P.clickableOrdinalRange?C="pointer":P.region&&(C=P.region+"-resize"),k.select(document.body).style("cursor",C)}function v(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||y(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||u()}).call(k.behavior.drag().on("dragstart",function(E){(function(P,C){k.event.sourceEvent.stopPropagation();var O=C.height-k.mouse(P)[1]-2*A.verticalPadding,R=C.unitToPaddedPx.invert(O),U=C.brush,D=m(C,O),N=D.interval,W=U.svgBrush;if(W.wasDragged=!1,W.grabbingBar=D.region==="ns",W.grabbingBar){var F=N.map(C.unitToPaddedPx);W.grabPoint=O-F[0]-A.verticalPadding,W.barLength=F[1]-F[0]}W.clickableOrdinalRange=D.clickableOrdinalRange,W.stayingIntervals=C.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],N&&(W.stayingIntervals=W.stayingIntervals.filter(function(j){return j[0]!==N[0]&&j[1]!==N[1]})),W.startExtent=D.region?N[D.region==="s"?1:0]:R,C.parent.inBrushDrag=!0,W.brushStartCallback()})(this,E)}).on("drag",function(E){g(this,E)}).on("dragend",function(E){(function(P,C){var O=C.brush,R=O.filter,U=O.svgBrush;U._dragging||(y(P,C),g(P,C),C.brush.svgBrush.wasDragged=!1),U._dragging=!1,k.event.sourceEvent.stopPropagation();var D=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,C.parent.inBrushDrag=!1,u(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?O.filterSpecified&&C.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],O.filterSpecified=!0):D?(U.extent=U.stayingIntervals,U.extent.length===0&&f(O)):f(O),U.brushCallback(C),d(P.parentNode),void U.brushEndCallback(O.filterSpecified?R.getConsolidated():[]);var N=function(){R.set(R.getConsolidated())};if(C.ordinal){var W=C.unitTickvals;W[W.length-1]<W[0]&&W.reverse(),U.newExtent=[r(0,W,U.newExtent[0],U.stayingIntervals),r(1,W,U.newExtent[1],U.stayingIntervals)];var F=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(F?[U.newExtent]:[]),U.extent.length||f(O),U.brushCallback(C),F?d(P.parentNode,N):(N(),d(P.parentNode))}else N();U.brushEndCallback(O.filterSpecified?R.getConsolidated():[])})(this,E)}))}function _(w,E){return w[0]-E[0]}function f(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function S(w){for(var E,P=w.slice(),C=[],O=P.shift();O;){for(E=O.slice();(O=P.shift())&&O[0]<=E[1];)E[1]=Math.max(E[1],O[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}X.exports={makeBrush:function(w,E,P,C,O,R){var U,D=function(){var N,W,F=[];return{set:function(j){(F=j.map(function(q){return q.slice().sort(b)}).sort(_)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),N=S(F),W=F.reduce(function(q,te){return[Math.min(q[0],te[0]),Math.max(q[1],te[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return N},getBounds:function(){return W}}}();return D.set(P),{filter:D,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(U=O,function(N){var W=N.brush,F=function(q){return q.svgBrush.extent.map(function(te){return te.slice()})}(W),j=F.slice();W.filter.set(j),U()}),brushEndCallback:R}}},ensureAxisBrush:function(w,E,P){var C=w.selectAll("."+A.cn.axisBrush).data(T,o);C.enter().append("g").classed(A.cn.axisBrush,!0),function(O,R,U){var D=U._context.staticPlot,N=O.selectAll(".background").data(T);N.enter().append("rect").classed("background",!0).call(a).call(l).style("pointer-events",D?"none":"auto").attr("transform",p(0,A.verticalPadding)),N.call(v).attr("height",function(j){return j.height-A.verticalPadding});var W=O.selectAll(".highlight-shadow").data(T);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width+A.bar.strokeWidth).attr("stroke",R).attr("opacity",A.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(j){return j.height}).call(x);var F=O.selectAll(".highlight").data(T);F.enter().append("line").classed("highlight",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width-A.bar.strokeWidth).attr("stroke",A.bar.fillColor).attr("opacity",A.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(j){return j.height}).call(x)}(C,E,P)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(C){return C.sort(b)}),w=E.multiselect?S(w.sort(_)):[w[0]]):w=[w.sort(b)],E.tickvals){var P=E.tickvals.slice().sort(b);if(!(w=w.map(function(C){var O=[r(0,P,C[0],[]),r(1,P,C[1],[])];if(O[1]>O[0])return O}).filter(function(C){return C})).length)return}return w.length>1?w:w[0]}}},61664:function(X,I,e){"use strict";X.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(X,I,e){"use strict";var A=e(33428),k=e(84888)._M,o=e(24196),T=e(9616);I.name="parcoords",I.plot=function(b){var p=k(b.calcdata,"parcoords")[0];p.length&&o(b,p)},I.clean=function(b,p,s,t){var i=t._has&&t._has("parcoords"),n=p._has&&p._has("parcoords");i&&!n&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},I.toSVG=function(b){var p=b._fullLayout._glimages,s=A.select(b).selectAll(".svg-container");s.filter(function(t,i){return i===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");p.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){A.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(X,I,e){"use strict";var A=e(3400).isArrayOrTypedArray,k=e(8932),o=e(71688).wrap;X.exports=function(T,b){var p,s;return k.hasColorscale(b,"line")&&A(b.line.color)?(p=b.line.color,s=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:p,containerStr:"line",cLetter:"c"})):(p=function(t){for(var i=new Array(t),n=0;n<t;n++)i[n]=.5;return i}(b._length),s=[[0,b.line.color],[1,b.line.color]]),o({lineColor:p,cscale:s})}},30140:function(X){"use strict";X.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(X,I,e){"use strict";var A=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),p=e(54460),s=e(82296),t=e(71864),i=e(30140).maxDimensionCount,n=e(26284);function r(a,l,c,h){function u(y,v){return A.coerce(a,l,s.dimensions,y,v)}var x=u("values"),d=u("visible");if(x&&x.length||(d=l.visible=!1),d){u("label"),u("tickvals"),u("ticktext"),u("tickformat");var m=u("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:m},p.setConvert(l._ax,h.layout),u("multiselect");var g=u("constraintrange");g&&(l.constraintrange=t.cleanRanges(g,l))}}X.exports=function(a,l,c,h){function u(y,v){return A.coerce(a,l,s,y,v)}var x=a.dimensions;Array.isArray(x)&&x.length>i&&(A.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var d=b(a,l,{name:"dimensions",layout:h,handleItemDefaults:r}),m=function(y,v,_,f,S){var w=S("line.color",_);if(k(y,"line")&&A.isArrayOrTypedArray(w)){if(w.length)return S("line.colorscale"),o(y,v,f,S,{prefix:"line.",cLetter:"c"}),w.length;v.line.color=_}return 1/0}(a,l,c,h,u);T(l,h,u),Array.isArray(d)&&d.length||(l.visible=!1),n(l,d,"values",m);var g=A.extendFlat({},h.font,{size:Math.round(h.font.size/1.2)});A.coerceFont(u,"labelfont",g),A.coerceFont(u,"tickfont",g,{autoShadowDflt:!0}),A.coerceFont(u,"rangefont",g),u("labelangle"),u("labelside"),u("unselected.line.color"),u("unselected.line.opacity")}},95724:function(X,I,e){"use strict";var A=e(3400).isTypedArray;I.convertTypedArray=function(k){return A(k)?Array.prototype.slice.call(k):k},I.isOrdinal=function(k){return!!k.tickvals},I.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(X,I,e){"use strict";var A=e(61664);A.plot=e(24196),X.exports=A},51352:function(X,I,e){"use strict";var A=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),o=e(30140).maxDimensionCount,T=e(3400),b=1e-6,p=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(d,m,g,y,v){var _=d._gl;_.enable(_.SCISSOR_TEST),_.scissor(m,g,y,v),d.clear({color:[0,0,0,0],depth:1})}function n(d,m,g,y,v,_){var f=_.key;g.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:p})}(d),g.drawCompleted=!0),function S(w){var E=Math.min(y,v-w*y);w===0&&(window.cancelAnimationFrame(g.currentRafs[f]),delete g.currentRafs[f],i(d,_.scissorX,_.scissorY,_.scissorWidth,_.viewBoxSize[1])),g.clearOnly||(_.count=2*E,_.offset=2*w*y,m(_),w*y+E<v&&(g.currentRafs[f]=window.requestAnimationFrame(function(){S(w+1)})),g.drawCompleted=!1)}(0)}function r(d,m){for(var g=new Array(256),y=0;y<256;y++)g[y]=d(y/255).concat(m);return g}function a(d,m){return(d>>>8*m)%256/255}function l(d,m,g){for(var y=new Array(8*m),v=0,_=0;_<m;_++)for(var f=0;f<2;f++)for(var S=0;S<4;S++){var w=4*d+S,E=g[64*_+w];w===63&&f===0&&(E*=-1),y[v++]=E}return y}function c(d){var m="0"+d;return m.substr(m.length-2)}function h(d){return d<o?"p"+c(d+1)+"_"+c(d+4):"colors"}function u(d,m,g,y,v,_,f,S,w,E,P,C,O,R){for(var U=[[],[]],D=0;D<64;D++)U[0][D]=D===v?1:0,U[1][D]=D===_?1:0;f*=R,S*=R,w*=R,E*=R;var N=d.lines.canvasOverdrag*R,W=d.domain,F=d.canvasWidth*R,j=d.canvasHeight*R,q=d.pad.l*R,te=d.pad.b*R,ee=d.layoutHeight*R,Q=d.layoutWidth*R,J=d.deselectedLines.color,K=d.deselectedLines.opacity;return T.extendFlat({key:P,resolution:[F,j],viewBoxPos:[f+N,S],viewBoxSize:[w,E],i0:v,i1:_,dim0A:U[0].slice(0,16),dim0B:U[0].slice(16,32),dim0C:U[0].slice(32,48),dim0D:U[0].slice(48,64),dim1A:U[1].slice(0,16),dim1B:U[1].slice(16,32),dim1C:U[1].slice(32,48),dim1D:U[1].slice(48,64),drwLayer:C,contextColor:[J[0]/255,J[1]/255,J[2]/255,K!=="auto"?J[3]*K:Math.max(.00392156862745098,Math.pow(1/d.lines.color.length,.3333333333333333))],scissorX:(y===m?0:f+N)+(q-N)+Q*W.x[0],scissorWidth:(y===g?F-f+N:w+.5)+(y===m?f+N:0),scissorY:S+te+ee*W.y[0],scissorHeight:E,viewportX:q-N+Q*W.x[0],viewportY:te+ee*W.y[0],viewportWidth:F,viewportHeight:j},O)}function x(d){var m=2047,g=Math.max(0,Math.floor(d[0]*m),0),y=Math.min(m,Math.ceil(d[1]*m),m);return[Math.min(g,y),Math.max(g,y)]}X.exports=function(d,m){var g,y,v,_,f,S=m.context,w=m.pick,E=m.regl,P=E._gl,C=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),O=Math.max(C[0],Math.min(C[1],m.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},U=function(j){for(var q={},te=0;te<=o;te+=4)q[h(te)]=j.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return q}(E),D=E.texture(t),N=[];F(m);var W=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:A,frag:k,primitive:"lines",lineWidth:O,attributes:U,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:D,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function F(j){g=j.model,y=j.viewModel,v=y.dimensions.slice(),_=v[0]?v[0].values.length:0;var q=g.lines,te=w?q.color.map(function(Q,J){return J/q.color.length}):q.color,ee=function(Q,J,K){for(var Y,ie=new Array(Q*(o+4)),se=0,ae=0;ae<Q;ae++){for(var ue=0;ue<o;ue++)ie[se++]=ue<J.length?J[ue].paddedUnitValues[ae]:.5;ie[se++]=a(ae,2),ie[se++]=a(ae,1),ie[se++]=a(ae,0),ie[se++]=(Y=K[ae],Math.max(b,Math.min(.999999,Y)))}return ie}(_,v,te);(function(Q,J,K){for(var Y=0;Y<=o;Y+=4)Q[h(Y)](l(Y/4,J,K))})(U,_,ee),S||w||(D=E.texture(T.extendFlat({data:r(g.unitToColor,255)},t)))}return{render:function(j,q,te){var ee,Q,J,K=j.length,Y=1/0,ie=-1/0;for(ee=0;ee<K;ee++)j[ee].dim0.canvasX<Y&&(Y=j[ee].dim0.canvasX,Q=ee),j[ee].dim1.canvasX>ie&&(ie=j[ee].dim1.canvasX,J=ee);K===0&&i(E,0,0,g.canvasWidth,g.canvasHeight);var se=function(me){var oe,re,fe,Se=[[],[]];for(fe=0;fe<64;fe++){var be=!me&&fe<v.length?v[fe].brush.filter.getBounds():[-1/0,1/0];Se[0][fe]=be[0],Se[1][fe]=be[1]}var we=new Array(16384);for(oe=0;oe<16384;oe++)we[oe]=255;if(!me)for(oe=0;oe<v.length;oe++){var Me=oe%8,Ie=(oe-Me)/8,Oe=Math.pow(2,Me),he=v[oe].brush.filter.get();if(!(he.length<2)){var _e=x(he[0])[1];for(re=1;re<he.length;re++){var Ae=x(he[re]);for(fe=_e+1;fe<Ae[0];fe++)we[8*fe+Ie]&=~Oe;_e=Math.max(_e,Ae[1])}}}var De={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:we};return f?f(De):f=E.texture(De),{maskTexture:f,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(S);for(ee=0;ee<K;ee++){var ae=j[ee],ue=ae.dim0.crossfilterDimensionIndex,ve=ae.dim1.crossfilterDimensionIndex,ye=ae.canvasX,de=ae.canvasY,pe=ye+ae.panelSizeX,ge=ae.plotGlPixelRatio;if(q||!N[ue]||N[ue][0]!==ye||N[ue][1]!==pe){N[ue]=[ye,pe];var ke=u(g,Q,J,ee,ue,ve,ye,de,ae.panelSizeX,ae.panelSizeY,ae.dim0.crossfilterDimensionIndex,S?0:w?2:1,se,ge);R.clearOnly=te;var Ee=q?g.lines.blockLineCount:_;n(E,W,R,Ee,_,ke)}}},readPixel:function(j,q){return E.read({x:j,y:q,width:1,height:1,data:s}),s},readPixels:function(j,q,te,ee){var Q=new Uint8Array(4*te*ee);return E.read({x:j,y:q,width:te,height:ee,data:Q}),Q},destroy:function(){for(var j in d.style["pointer-events"]="none",D.destroy(),f&&f.destroy(),U)U[j].destroy()},update:F}}},26284:function(X){"use strict";X.exports=function(I,e,A,k){var o,T;for(k||(k=1/0),o=0;o<e.length;o++)(T=e[o]).visible&&(k=Math.min(k,T[A].length));for(k===1/0&&(k=0),I._length=k,o=0;o<e.length;o++)(T=e[o]).visible&&(T._length=k);return k}},36336:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=k.isArrayOrTypedArray,T=k.numberFormat,b=e(96824),p=e(54460),s=k.strRotate,t=k.strTranslate,i=e(72736),n=e(43616),r=e(8932),a=e(71688),l=a.keyFun,c=a.repeat,h=a.unwrap,u=e(95724),x=e(30140),d=e(71864),m=e(51352);function g(W,F,j){return k.aggNums(W,null,F,j)}function y(W,F){return _(g(Math.min,W,F),g(Math.max,W,F))}function v(W){var F=W.range;return F?_(F[0],F[1]):y(W.values,W._length)}function _(W,F){return!isNaN(W)&&isFinite(W)||(W=0),!isNaN(F)&&isFinite(F)||(F=0),W===F&&(W===0?(W-=1,F+=1):(W*=.9,F*=1.1)),[W,F]}function f(W,F,j,q,te){var ee,Q,J=v(j);return q?A.scale.ordinal().domain(q.map((ee=T(j.tickformat),Q=te,Q?function(K,Y){var ie=Q[Y];return ie??ee(K)}:ee))).range(q.map(function(K){var Y=(K-J[0])/(J[1]-J[0]);return W-F+Y*(2*F-W)})):A.scale.linear().domain(J).range([W-F,F])}function S(W){if(W.tickvals){var F=v(W);return A.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(j){return(j-F[0])/(F[1]-F[0])}))}}function w(W){var F=W.map(function(te){return te[0]}),j=W.map(function(te){var ee=b(te[1]);return A.rgb("rgb("+ee[0]+","+ee[1]+","+ee[2]+")")}),q="rgb".split("").map(function(te){return A.scale.linear().clamp(!0).domain(F).range(j.map((ee=te,function(Q){return Q[ee]})));var ee});return function(te){return q.map(function(ee){return ee(te)})}}function E(W){return W.dimensions.some(function(F){return F.brush.filterSpecified})}function P(W,F,j){var q=h(F),te=q.trace,ee=u.convertTypedArray(q.lineColor),Q=te.line,J={color:b(te.unselected.line.color),opacity:te.unselected.line.opacity},K=r.extractOpts(Q),Y=K.reversescale?r.flipScale(q.cscale):q.cscale,ie=te.domain,se=te.dimensions,ae=W.width,ue=te.labelangle,ve=te.labelside,ye=te.labelfont,de=te.tickfont,pe=te.rangefont,ge=k.extendDeepNoArrays({},Q,{color:ee.map(A.scale.linear().domain(v({values:ee,range:[K.min,K.max],_length:te._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),ke=Math.floor(ae*(ie.x[1]-ie.x[0])),Ee=Math.floor(W.height*(ie.y[1]-ie.y[0])),me=W.margin||{l:80,r:80,t:100,b:80},oe=ke,re=Ee;return{key:j,colCount:se.filter(u.isVisible).length,dimensions:se,tickDistance:x.tickDistance,unitToColor:w(Y),lines:ge,deselectedLines:J,labelAngle:ue,labelSide:ve,labelFont:ye,tickFont:de,rangeFont:pe,layoutWidth:ae,layoutHeight:W.height,domain:ie,translateX:ie.x[0]*ae,translateY:W.height-ie.y[1]*W.height,pad:me,canvasWidth:oe*x.canvasPixelRatio+2*ge.canvasOverdrag,canvasHeight:re*x.canvasPixelRatio,width:oe,height:re,canvasPixelRatio:x.canvasPixelRatio}}function C(W,F,j){var q=j.width,te=j.height,ee=j.dimensions,Q=j.canvasPixelRatio,J=function(ae){return q*ae/Math.max(1,j.colCount-1)},K=x.verticalPadding/te,Y=function(ae,ue){return A.scale.linear().range([ue,ae-ue])}(te,x.verticalPadding),ie={key:j.key,xScale:J,model:j,inBrushDrag:!1},se={};return ie.dimensions=ee.filter(u.isVisible).map(function(ae,ue){var ve=function(Me,Ie){return A.scale.linear().domain(v(Me)).range([Ie,1-Ie])}(ae,K),ye=se[ae.label];se[ae.label]=(ye||0)+1;var de=ae.label+(ye?"__"+ye:""),pe=ae.constraintrange,ge=pe&&pe.length;ge&&!o(pe[0])&&(pe=[pe]);var ke=ge?pe.map(function(Me){return Me.map(ve)}):[[-1/0,1/0]],Ee=ae.values;Ee.length>ae._length&&(Ee=Ee.slice(0,ae._length));var me,oe=ae.tickvals;function re(Me,Ie){return{val:Me,text:me[Ie]}}function fe(Me,Ie){return Me.val-Ie.val}if(o(oe)&&oe.length){k.isTypedArray(oe)&&(oe=Array.from(oe)),me=ae.ticktext,o(me)&&me.length?me.length>oe.length?me=me.slice(0,oe.length):oe.length>me.length&&(oe=oe.slice(0,me.length)):me=oe.map(T(ae.tickformat));for(var Se=1;Se<oe.length;Se++)if(oe[Se]<oe[Se-1]){for(var be=oe.map(re).sort(fe),we=0;we<oe.length;we++)oe[we]=be[we].val,me[we]=be[we].text;break}}else oe=void 0;return Ee=u.convertTypedArray(Ee),{key:de,label:ae.label,tickFormat:ae.tickformat,tickvals:oe,ticktext:me,ordinal:u.isOrdinal(ae),multiselect:ae.multiselect,xIndex:ue,crossfilterDimensionIndex:ue,visibleIndex:ae._index,height:te,values:Ee,paddedUnitValues:Ee.map(ve),unitTickvals:oe&&oe.map(ve),xScale:J,x:J(ue),canvasX:J(ue)*Q,unitToPaddedPx:Y,domainScale:f(te,x.verticalPadding,ae,oe,me),ordinalScale:S(ae),parent:ie,model:j,brush:d.makeBrush(W,ge,ke,function(){W.linePickActive(!1)},function(){var Me=ie;Me.focusLayer&&Me.focusLayer.render(Me.panels,!0);var Ie=E(Me);!W.contextShown()&&Ie?(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0),W.contextShown(!0)):W.contextShown()&&!Ie&&(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0,!0),W.contextShown(!1))},function(Me){if(ie.focusLayer.render(ie.panels,!0),ie.pickLayer&&ie.pickLayer.render(ie.panels,!0),W.linePickActive(!0),F&&F.filterChanged){var Ie=ve.invert,Oe=Me.map(function(he){return he.map(Ie).sort(k.sorterAsc)}).sort(function(he,_e){return he[0]-_e[0]});F.filterChanged(ie.key,ae._index,Oe)}})}}),ie}function O(W){W.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(W,F){var j=F==="top"?1:-1,q=W*Math.PI/180;return{dir:j,dx:Math.sin(q),dy:Math.cos(q),degrees:W}}function U(W,F,j){for(var q=F.panels||(F.panels=[]),te=W.data(),ee=0;ee<te.length-1;ee++){var Q=q[ee]||(q[ee]={}),J=te[ee],K=te[ee+1];Q.dim0=J,Q.dim1=K,Q.canvasX=J.canvasX,Q.panelSizeX=K.canvasX-J.canvasX,Q.panelSizeY=F.model.canvasHeight,Q.y=0,Q.canvasY=0,Q.plotGlPixelRatio=j}}function D(W,F){return p.tickText(W._ax,F,!1).text}function N(W,F){if(W.ordinal)return"";var j=W.domainScale.domain(),q=j[F?j.length-1:0];return D(W.model.dimensions[W.visibleIndex],q)}X.exports=function(W,F,j,q){var te=W._context.staticPlot,ee=W._fullLayout,Q=ee._toppaper,J=ee._glcontainer,K=W._context.plotGlPixelRatio,Y=W._fullLayout.paper_bgcolor;(function(Me){for(var Ie=0;Ie<Me.length;Ie++)for(var Oe=0;Oe<Me[Ie].length;Oe++)for(var he=Me[Ie][Oe].trace,_e=he.dimensions,Ae=0;Ae<_e.length;Ae++){var De=_e[Ae].values,Le=_e[Ae]._ax;Le&&(Le.range?Le.range=_(Le.range[0],Le.range[1]):Le.range=y(De,he._length),Le.dtick||(Le.dtick=.01*(Math.abs(Le.range[1]-Le.range[0])||1)),Le.tickformat=_e[Ae].tickformat,p.calcTicks(Le),Le.cleanRange())}})(F);var ie,se,ae=(ie=!0,se=!1,{linePickActive:function(Me){return arguments.length?ie=!!Me:ie},contextShown:function(Me){return arguments.length?se=!!Me:se}}),ue=F.filter(function(Me){return h(Me).trace.visible}).map(P.bind(0,j)).map(C.bind(0,ae,q));J.each(function(Me,Ie){return k.extendFlat(Me,ue[Ie])});var ve=J.selectAll(".gl-canvas").each(function(Me){Me.viewModel=ue[0],Me.viewModel.plotGlPixelRatio=K,Me.viewModel.paperColor=Y,Me.model=Me.viewModel?Me.viewModel.model:null}),ye=null;ve.filter(function(Me){return Me.pick}).style("pointer-events",te?"none":"auto").on("mousemove",function(Me){if(ae.linePickActive()&&Me.lineLayer&&q&&q.hover){var Ie=A.event,Oe=this.width,he=this.height,_e=A.mouse(this),Ae=_e[0],De=_e[1];if(Ae<0||De<0||Ae>=Oe||De>=he)return;var Le=Me.lineLayer.readPixel(Ae,he-1-De),Be=Le[3]!==0,Ve=Be?Le[2]+256*(Le[1]+256*Le[0]):null,Ze={x:Ae,y:De,clientX:Ie.clientX,clientY:Ie.clientY,dataIndex:Me.model.key,curveNumber:Ve};Ve!==ye&&(Be?q.hover(Ze):q.unhover&&q.unhover(Ze),ye=Ve)}}),ve.style("opacity",function(Me){return Me.pick?0:1}),Q.style("background","rgba(255, 255, 255, 0)");var de=Q.selectAll("."+x.cn.parcoords).data(ue,l);de.exit().remove(),de.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(Me){return t(Me.model.translateX,Me.model.translateY)});var pe=de.selectAll("."+x.cn.parcoordsControlView).data(c,l);pe.enter().append("g").classed(x.cn.parcoordsControlView,!0),pe.attr("transform",function(Me){return t(Me.model.pad.l,Me.model.pad.t)});var ge=pe.selectAll("."+x.cn.yAxis).data(function(Me){return Me.dimensions},l);ge.enter().append("g").classed(x.cn.yAxis,!0),pe.each(function(Me){U(ge,Me,K)}),ve.each(function(Me){if(Me.viewModel){!Me.lineLayer||q?Me.lineLayer=m(this,Me):Me.lineLayer.update(Me),(Me.key||Me.key===0)&&(Me.viewModel[Me.key]=Me.lineLayer);var Ie=!Me.context||q;Me.lineLayer.render(Me.viewModel.panels,Ie)}}),ge.attr("transform",function(Me){return t(Me.xScale(Me.xIndex),0)}),ge.call(A.behavior.drag().origin(function(Me){return Me}).on("drag",function(Me){var Ie=Me.parent;ae.linePickActive(!1),Me.x=Math.max(-x.overdrag,Math.min(Me.model.width+x.overdrag,A.event.x)),Me.canvasX=Me.x*Me.model.canvasPixelRatio,ge.sort(function(Oe,he){return Oe.x-he.x}).each(function(Oe,he){Oe.xIndex=he,Oe.x=Me===Oe?Oe.x:Oe.xScale(Oe.xIndex),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio}),U(ge,Ie,K),ge.filter(function(Oe){return Math.abs(Me.xIndex-Oe.xIndex)!==0}).attr("transform",function(Oe){return t(Oe.xScale(Oe.xIndex),0)}),A.select(this).attr("transform",t(Me.x,0)),ge.each(function(Oe,he,_e){_e===Me.parent.key&&(Ie.dimensions[he]=Oe)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!E(Ie)),Ie.focusLayer.render&&Ie.focusLayer.render(Ie.panels)}).on("dragend",function(Me){var Ie=Me.parent;Me.x=Me.xScale(Me.xIndex),Me.canvasX=Me.x*Me.model.canvasPixelRatio,U(ge,Ie,K),A.select(this).attr("transform",function(Oe){return t(Oe.x,0)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!E(Ie)),Ie.focusLayer&&Ie.focusLayer.render(Ie.panels),Ie.pickLayer&&Ie.pickLayer.render(Ie.panels,!0),ae.linePickActive(!0),q&&q.axesMoved&&q.axesMoved(Ie.key,Ie.dimensions.map(function(Oe){return Oe.crossfilterDimensionIndex}))})),ge.exit().remove();var ke=ge.selectAll("."+x.cn.axisOverlays).data(c,l);ke.enter().append("g").classed(x.cn.axisOverlays,!0),ke.selectAll("."+x.cn.axis).remove();var Ee=ke.selectAll("."+x.cn.axis).data(c,l);Ee.enter().append("g").classed(x.cn.axis,!0),Ee.each(function(Me){var Ie=Me.model.height/Me.model.tickDistance,Oe=Me.domainScale,he=Oe.domain();A.select(this).call(A.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ie,Me.tickFormat).tickValues(Me.ordinal?he:null).tickFormat(function(_e){return u.isOrdinal(Me)?_e:D(Me.model.dimensions[Me.visibleIndex],_e)}).scale(Oe)),n.font(Ee.selectAll("text"),Me.model.tickFont)}),Ee.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ee.selectAll("text").style("cursor","default");var me=ke.selectAll("."+x.cn.axisHeading).data(c,l);me.enter().append("g").classed(x.cn.axisHeading,!0);var oe=me.selectAll("."+x.cn.axisTitle).data(c,l);oe.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),oe.text(function(Me){return Me.label}).each(function(Me){var Ie=A.select(this);n.font(Ie,Me.model.labelFont),i.convertToTspans(Ie,W)}).attr("transform",function(Me){var Ie=R(Me.model.labelAngle,Me.model.labelSide),Oe=x.axisTitleOffset;return(Ie.dir>0?"":t(0,2*Oe+Me.model.height))+s(Ie.degrees)+t(-Oe*Ie.dx,-Oe*Ie.dy)}).attr("text-anchor",function(Me){var Ie=R(Me.model.labelAngle,Me.model.labelSide);return 2*Math.abs(Ie.dx)>Math.abs(Ie.dy)?Ie.dir*Ie.dx<0?"start":"end":"middle"});var re=ke.selectAll("."+x.cn.axisExtent).data(c,l);re.enter().append("g").classed(x.cn.axisExtent,!0);var fe=re.selectAll("."+x.cn.axisExtentTop).data(c,l);fe.enter().append("g").classed(x.cn.axisExtentTop,!0),fe.attr("transform",t(0,-x.axisExtentOffset));var Se=fe.selectAll("."+x.cn.axisExtentTopText).data(c,l);Se.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(O),Se.text(function(Me){return N(Me,!0)}).each(function(Me){n.font(A.select(this),Me.model.rangeFont)});var be=re.selectAll("."+x.cn.axisExtentBottom).data(c,l);be.enter().append("g").classed(x.cn.axisExtentBottom,!0),be.attr("transform",function(Me){return t(0,Me.model.height+x.axisExtentOffset)});var we=be.selectAll("."+x.cn.axisExtentBottomText).data(c,l);we.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),we.text(function(Me){return N(Me,!1)}).each(function(Me){n.font(A.select(this),Me.model.rangeFont)}),d.ensureAxisBrush(ke,Y,W)}},24196:function(X,I,e){"use strict";var A=e(36336),k=e(5048),o=e(95724).isVisible,T={};function b(p,s,t){var i=s.indexOf(t),n=p.indexOf(i);return n===-1&&(n+=s.length),n}(X.exports=function(p,s){var t=p._fullLayout;if(k(p,[],T)){var i={},n={},r={},a={},l=t._size;s.forEach(function(c,h){var u=c[0].trace;r[h]=u.index;var x=a[h]=u._fullInput.index;i[h]=p.data[x].dimensions,n[h]=p.data[x].dimensions.slice()}),A(p,s,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(c,h,u){var x=n[c][h],d=u.map(function(f){return f.slice()}),m="dimensions["+h+"].constraintrange",g=t._tracePreGUI[p._fullData[r[c]]._fullInput.uid];if(g[m]===void 0){var y=x.constraintrange;g[m]=y||null}var v=p._fullData[r[c]].dimensions[h];d.length?(d.length===1&&(d=d[0]),x.constraintrange=d,v.constraintrange=d.slice(),d=[d]):(delete x.constraintrange,delete v.constraintrange,d=null);var _={};_[m]=d,p.emit("plotly_restyle",[_,[a[c]]])},hover:function(c){p.emit("plotly_hover",c)},unhover:function(c){p.emit("plotly_unhover",c)},axesMoved:function(c,h){var u=function(x,d){return function(m,g){return b(x,d,m)-b(x,d,g)}}(h,n[c].filter(o));i[c].sort(u),n[c].filter(function(x){return!o(x)}).sort(function(x){return n[c].indexOf(x)}).forEach(function(x){i[c].splice(i[c].indexOf(x),1),i[c].splice(n[c].indexOf(x),0,x)}),p.emit("plotly_restyle",[{dimensions:[i[c]]},[a[c]]])}})}}).reglPrecompiled=T},74996:function(X,I,e){"use strict";var A=e(45464),k=e(86968).u,o=e(25376),T=e(22548),b=e(21776).Ks,p=e(21776).Gw,s=e(92880).extendFlat,t=e(98192).c,i=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});X.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},A.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:p({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},i,{}),outsidetextfont:s({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(X,I,e){"use strict";var A=e(7316);I.name="pie",I.plot=function(k,o,T,b){A.plotBasePlot(I.name,k,o,T,b)},I.clean=function(k,o,T,b){A.cleanBasePlot(I.name,k,o,T,b)}},45768:function(X,I,e){"use strict";var A=e(38248),k=e(49760),o=e(76308),T={};function b(s){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),s[i]||(s[i]=t),t)}}function p(s,t){var i,n=JSON.stringify(s),r=t[n];if(!r){for(r=s.slice(),i=0;i<s.length;i++)r.push(k(s[i]).lighten(20).toHexString());for(i=0;i<s.length;i++)r.push(k(s[i]).darken(20).toHexString());t[n]=r}return r}X.exports={calc:function(s,t){var i,n,r=[],a=s._fullLayout,l=a.hiddenlabels||[],c=t.labels,h=t.marker.colors||[],u=t.values,x=t._length,d=t._hasValues&&x;if(t.dlabel)for(c=new Array(x),i=0;i<x;i++)c[i]=String(t.label0+i*t.dlabel);var m={},g=b(a["_"+t.type+"colormap"]),y=0,v=!1;for(i=0;i<x;i++){var _,f,S;if(d){if(_=u[i],!A(_))continue;_=+_}else _=1;(f=c[i])!==void 0&&f!==""||(f=i);var w=m[f=String(f)];w===void 0?(m[f]=r.length,(S=l.indexOf(f)!==-1)||(y+=_),r.push({v:_,label:f,color:g(h[i],f),i,pts:[i],hidden:S})):(v=!0,(n=r[w]).v+=_,n.pts.push(i),n.hidden||(y+=_),n.color===!1&&h[i]&&(n.color=g(h[i],f)))}return r=r.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?v:t.sort)&&r.sort(function(E,P){return P.v-E.v}),r[0]&&(r[0].vTotal=y),r},crossTraceCalc:function(s,t){var i=(t||{}).type;i||(i="pie");var n=s._fullLayout,r=s.calcdata,a=n[i+"colorway"],l=n["_"+i+"colormap"];n["extend"+i+"colors"]&&(a=p(a,T));for(var c=0,h=0;h<r.length;h++){var u=r[h];if(u[0].trace.type===i)for(var x=0;x<u.length;x++){var d=u[x];d.color===!1&&(l[d.label]?d.color=l[d.label]:(l[d.label]=d.color=a[c%a.length],c++))}}},makePullColorFn:b,generateExtendedColors:p}},74174:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(74996),T=e(86968).Q,b=e(31508).handleText,p=e(3400).coercePattern;function s(i,n){var r=k.isArrayOrTypedArray(i),a=k.isArrayOrTypedArray(n),l=Math.min(r?i.length:1/0,a?n.length:1/0);if(isFinite(l)||(l=0),l&&a){for(var c,h=0;h<l;h++){var u=n[h];if(A(u)&&u>0){c=!0;break}}c||(l=0)}return{hasLabels:r,hasValues:a,len:l}}function t(i,n,r,a,l){a("marker.line.width")&&a("marker.line.color",l?void 0:r.paper_bgcolor);var c=a("marker.colors");p(a,"marker.pattern",c),i.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=i.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=r.paper_bgcolor)}X.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(i,n,r,a){function l(v,_){return k.coerce(i,n,o,v,_)}var c=s(l("labels"),l("values")),h=c.len;if(n._hasLabels=c.hasLabels,n._hasValues=c.hasValues,!n._hasLabels&&n._hasValues&&(l("label0"),l("dlabel")),h){n._length=h,t(i,n,a,l,!0),l("scalegroup");var u,x=l("text"),d=l("texttemplate");if(d||(u=l("textinfo",k.isArrayOrTypedArray(x)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),d||u&&u!=="none"){var m=l("textposition");b(i,n,a,l,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||m==="auto"||m==="outside")&&l("automargin"),(m==="inside"||m==="auto"||Array.isArray(m))&&l("insidetextorientation")}else u==="none"&&l("textposition","none");T(n,a,l);var g=l("hole");if(l("title.text")){var y=l("title.position",g?"middle center":"top center");g||y!=="middle center"||(n.title.position="top center"),k.coerceFont(l,"title.font",a.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else n.visible=!1}}},53644:function(X,I,e){"use strict";var A=e(10624).appendArrayMultiPointValues;X.exports=function(k,o){var T={curveNumber:o.index,pointNumbers:k.pts,data:o._input,fullData:o,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),A(T,o,k.pts),o.type==="funnelarea"&&(delete T.v,delete T.i),T}},21552:function(X,I,e){"use strict";var A=e(43616),k=e(76308);X.exports=function(o,T,b,p){var s=b.marker.pattern;s&&s.shape?A.pointStyle(o,b,p,T):k.fill(o,T.color)}},69656:function(X,I,e){"use strict";var A=e(3400);function k(o){return o.indexOf("e")!==-1?o.replace(/[.]?0+e/,"e"):o.indexOf(".")!==-1?o.replace(/[.]?0+$/,""):o}I.formatPiePercent=function(o,T){var b=k((100*o).toPrecision(3));return A.numSeparate(b,T)+"%"},I.formatPieValue=function(o,T){var b=k(o.toPrecision(10));return A.numSeparate(b,T)},I.getFirstFilled=function(o,T){if(A.isArrayOrTypedArray(o))for(var b=0;b<T.length;b++){var p=o[T[b]];if(p||p===0||p==="")return p}},I.castOption=function(o,T){return A.isArrayOrTypedArray(o)?I.getFirstFilled(o,T):o||void 0},I.getRotationAngle=function(o){return(o==="auto"?0:o)*Math.PI/180}},75792:function(X,I,e){"use strict";X.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(X){"use strict";X.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(X,I,e){"use strict";var A=e(3400),k=e(85204);X.exports=function(o,T){function b(p,s){return A.coerce(o,T,k,p,s)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},37820:function(X,I,e){"use strict";var A=e(33428),k=e(7316),o=e(93024),T=e(76308),b=e(43616),p=e(3400),s=p.strScale,t=p.strTranslate,i=e(72736),n=e(82744),r=n.recordMinTextSize,a=n.clearMinTextSize,l=e(78048).TEXTPAD,c=e(69656),h=e(53644),u=e(3400).isValidTextValue;function x(W,F,j){var q=j[0],te=q.cx,ee=q.cy,Q=q.trace,J=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),W.on("mouseover",function(K){var Y=F._fullLayout,ie=F._fullData[Q.index];if(!F._dragging&&Y.hovermode!==!1){var se=ie.hoverinfo;if(Array.isArray(se)&&(se=o.castHoverinfo({hoverinfo:[c.castOption(se,K.pts)],_module:Q._module},Y,0)),se==="all"&&(se="label+text+value+percent+name"),ie.hovertemplate||se!=="none"&&se!=="skip"&&se){var ae=K.rInscribed||0,ue=te+K.pxmid[0]*(1-ae),ve=ee+K.pxmid[1]*(1-ae),ye=Y.separators,de=[];if(se&&se.indexOf("label")!==-1&&de.push(K.label),K.text=c.castOption(ie.hovertext||ie.text,K.pts),se&&se.indexOf("text")!==-1){var pe=K.text;p.isValidTextValue(pe)&&de.push(pe)}K.value=K.v,K.valueLabel=c.formatPieValue(K.v,ye),se&&se.indexOf("value")!==-1&&de.push(K.valueLabel),K.percent=K.v/q.vTotal,K.percentLabel=c.formatPiePercent(K.percent,ye),se&&se.indexOf("percent")!==-1&&de.push(K.percentLabel);var ge=ie.hoverlabel,ke=ge.font,Ee=[];o.loneHover({trace:Q,x0:ue-ae*q.r,x1:ue+ae*q.r,y:ve,_x0:J?te+K.TL[0]:ue-ae*q.r,_x1:J?te+K.TR[0]:ue+ae*q.r,_y0:J?ee+K.TL[1]:ve-ae*q.r,_y1:J?ee+K.BL[1]:ve+ae*q.r,text:de.join("<br>"),name:ie.hovertemplate||se.indexOf("name")!==-1?ie.name:void 0,idealAlign:K.pxmid[0]<0?"left":"right",color:c.castOption(ge.bgcolor,K.pts)||K.color,borderColor:c.castOption(ge.bordercolor,K.pts),fontFamily:c.castOption(ke.family,K.pts),fontSize:c.castOption(ke.size,K.pts),fontColor:c.castOption(ke.color,K.pts),nameLength:c.castOption(ge.namelength,K.pts),textAlign:c.castOption(ge.align,K.pts),hovertemplate:c.castOption(ie.hovertemplate,K.pts),hovertemplateLabels:K,eventData:[h(K,ie)]},{container:Y._hoverlayer.node(),outerContainer:Y._paper.node(),gd:F,inOut_bbox:Ee}),K.bbox=Ee[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,F.emit("plotly_hover",{points:[h(K,ie)],event:A.event})}}),W.on("mouseout",function(K){var Y=F._fullLayout,ie=F._fullData[Q.index],se=A.select(this).datum();Q._hasHoverEvent&&(K.originalEvent=A.event,F.emit("plotly_unhover",{points:[h(se,ie)],event:A.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(o.loneUnhover(Y._hoverlayer.node()),Q._hasHoverLabel=!1)}),W.on("click",function(K){var Y=F._fullLayout,ie=F._fullData[Q.index];F._dragging||Y.hovermode===!1||(F._hoverdata=[h(K,ie)],o.click(F,A.event))})}function d(W,F,j){var q=c.castOption(W.insidetextfont.color,F.pts);!q&&W._input.textfont&&(q=c.castOption(W._input.textfont.color,F.pts));var te=c.castOption(W.insidetextfont.family,F.pts)||c.castOption(W.textfont.family,F.pts)||j.family,ee=c.castOption(W.insidetextfont.size,F.pts)||c.castOption(W.textfont.size,F.pts)||j.size,Q=c.castOption(W.insidetextfont.weight,F.pts)||c.castOption(W.textfont.weight,F.pts)||j.weight,J=c.castOption(W.insidetextfont.style,F.pts)||c.castOption(W.textfont.style,F.pts)||j.style,K=c.castOption(W.insidetextfont.variant,F.pts)||c.castOption(W.textfont.variant,F.pts)||j.variant,Y=c.castOption(W.insidetextfont.textcase,F.pts)||c.castOption(W.textfont.textcase,F.pts)||j.textcase,ie=c.castOption(W.insidetextfont.lineposition,F.pts)||c.castOption(W.textfont.lineposition,F.pts)||j.lineposition,se=c.castOption(W.insidetextfont.shadow,F.pts)||c.castOption(W.textfont.shadow,F.pts)||j.shadow;return{color:q||T.contrast(F.color),family:te,size:ee,weight:Q,style:J,variant:K,textcase:Y,lineposition:ie,shadow:se}}function m(W,F){for(var j,q,te=0;te<W.length;te++)if((q=(j=W[te][0]).trace).title.text){var ee=q.title.text;q._meta&&(ee=p.templateString(ee,q._meta));var Q=b.tester.append("text").attr("data-notex",1).text(ee).call(b.font,q.title.font).call(i.convertToTspans,F),J=b.bBox(Q.node(),!0);j.titleBox={width:J.width,height:J.height},Q.remove()}}function g(W,F,j){var q=j.r||F.rpx1,te=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var ee,Q=F.ring,J=Q===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,K=F.halfangle,Y=F.midangle,ie=j.trace.insidetextorientation,se=ie==="horizontal",ae=ie==="tangential",ue=ie==="radial",ve=ie==="auto",ye=[];if(!ve){var de,pe=function(re,fe){if(function(Me,Ie){var Oe=Me.startangle,he=Me.stopangle;return Oe>Ie&&Ie>he||Oe<Ie&&Ie<he}(F,re)){var Se=Math.abs(re-F.startangle),be=Math.abs(re-F.stopangle),we=Se<be?Se:be;(ee=fe==="tan"?v(W,q,Q,we,0):y(W,q,Q,we,Math.PI/2)).textPosAngle=re,ye.push(ee)}};if(se||ae){for(de=4;de>=-4;de-=2)pe(Math.PI*de,"tan");for(de=4;de>=-4;de-=2)pe(Math.PI*(de+1),"tan")}if(se||ue){for(de=4;de>=-4;de-=2)pe(Math.PI*(de+1.5),"rad");for(de=4;de>=-4;de-=2)pe(Math.PI*(de+.5),"rad")}}if(J||ve||se){var ge=Math.sqrt(W.width*W.width+W.height*W.height);if((ee={scale:te*q*2/ge,rCenter:1-te,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,ee.scale>=1)return ee;ye.push(ee)}(ve||ue)&&((ee=y(W,q,Q,K,Y)).textPosAngle=(F.startangle+F.stopangle)/2,ye.push(ee)),(ve||ae)&&((ee=v(W,q,Q,K,Y)).textPosAngle=(F.startangle+F.stopangle)/2,ye.push(ee));for(var ke=0,Ee=0,me=0;me<ye.length;me++){var oe=ye[me].scale;if(Ee<oe&&(Ee=oe,ke=me),!ve&&Ee>=1)break}return ye[ke]}function y(W,F,j,q,te){F=Math.max(0,F-2*l);var ee=W.width/W.height,Q=S(ee,q,F,j);return{scale:2*Q/W.height,rCenter:_(ee,Q/F),rotate:f(te)}}function v(W,F,j,q,te){F=Math.max(0,F-2*l);var ee=W.height/W.width,Q=S(ee,q,F,j);return{scale:2*Q/W.width,rCenter:_(ee,Q/F),rotate:f(te+Math.PI/2)}}function _(W,F){return Math.cos(F)-W*F}function f(W){return(180/Math.PI*W+720)%180-90}function S(W,F,j,q){var te=W+1/(2*Math.tan(F));return j*Math.min(1/(Math.sqrt(te*te+.5)+te),q/(Math.sqrt(W*W+q/2)+W))}function w(W,F){return W.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(W.halfangle)),W.ring/2):1}function E(W,F){var j=F.pxmid[0],q=F.pxmid[1],te=W.width/2,ee=W.height/2;return j<0&&(te*=-1),q<0&&(ee*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(ee)*(te>0?1:-1)/2,y:ee/(1+j*j/(q*q)),outside:!0}}function P(W,F){var j,q,te,ee=W.trace,Q={x:W.cx,y:W.cy},J={tx:0,ty:0};J.ty+=ee.title.font.size,te=O(ee),ee.title.position.indexOf("top")!==-1?(Q.y-=(1+te)*W.r,J.ty-=W.titleBox.height):ee.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+te)*W.r);var K,Y=W.r/((K=W.trace.aspectratio)===void 0?1:K),ie=F.w*(ee.domain.x[1]-ee.domain.x[0])/2;return ee.title.position.indexOf("left")!==-1?(ie+=Y,Q.x-=(1+te)*Y,J.tx+=W.titleBox.width/2):ee.title.position.indexOf("center")!==-1?ie*=2:ee.title.position.indexOf("right")!==-1&&(ie+=Y,Q.x+=(1+te)*Y,J.tx-=W.titleBox.width/2),j=ie/W.titleBox.width,q=C(W,F)/W.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(j,q),tx:J.tx,ty:J.ty}}function C(W,F){var j=W.trace,q=F.h*(j.domain.y[1]-j.domain.y[0]);return Math.min(W.titleBox.height,q/2)}function O(W){var F,j=W.pull;if(!j)return 0;if(p.isArrayOrTypedArray(j))for(j=0,F=0;F<W.pull.length;F++)W.pull[F]>j&&(j=W.pull[F]);return j}function R(W,F){for(var j=[],q=0;q<W.length;q++){var te=W[q][0],ee=te.trace,Q=ee.domain,J=F.w*(Q.x[1]-Q.x[0]),K=F.h*(Q.y[1]-Q.y[0]);ee.title.text&&ee.title.position!=="middle center"&&(K-=C(te,F));var Y=J/2,ie=K/2;ee.type!=="funnelarea"||ee.scalegroup||(ie/=ee.aspectratio),te.r=Math.min(Y,ie)/(1+O(ee)),te.cx=F.l+F.w*(ee.domain.x[1]+ee.domain.x[0])/2,te.cy=F.t+F.h*(1-ee.domain.y[0])-K/2,ee.title.text&&ee.title.position.indexOf("bottom")!==-1&&(te.cy-=C(te,F)),ee.scalegroup&&j.indexOf(ee.scalegroup)===-1&&j.push(ee.scalegroup)}(function(se,ae){for(var ue,ve,ye,de=0;de<ae.length;de++){var pe=1/0,ge=ae[de];for(ve=0;ve<se.length;ve++)if((ye=(ue=se[ve][0]).trace).scalegroup===ge){var ke;if(ye.type==="pie")ke=ue.r*ue.r;else if(ye.type==="funnelarea"){var Ee,me;ye.aspectratio>1?me=(Ee=ue.r)/ye.aspectratio:Ee=(me=ue.r)*ye.aspectratio,ke=(Ee*=(1+ye.baseratio)/2)*me}pe=Math.min(pe,ke/ue.vTotal)}for(ve=0;ve<se.length;ve++)if((ye=(ue=se[ve][0]).trace).scalegroup===ge){var oe=pe*ue.vTotal;ye.type==="funnelarea"&&(oe/=(1+ye.baseratio)/2,oe/=ye.aspectratio),ue.r=Math.sqrt(oe)}}})(W,j)}function U(W,F){return[W*Math.sin(F),-W*Math.cos(F)]}function D(W,F,j){var q=W._fullLayout,te=j.trace,ee=te.texttemplate,Q=te.textinfo;if(!ee&&Q&&Q!=="none"){var J,K=Q.split("+"),Y=function(ke){return K.indexOf(ke)!==-1},ie=Y("label"),se=Y("text"),ae=Y("value"),ue=Y("percent"),ve=q.separators;if(J=ie?[F.label]:[],se){var ye=c.getFirstFilled(te.text,F.pts);u(ye)&&J.push(ye)}ae&&J.push(c.formatPieValue(F.v,ve)),ue&&J.push(c.formatPiePercent(F.v/j.vTotal,ve)),F.text=J.join("<br>")}if(ee){var de=p.castOption(te,F.i,"texttemplate");if(de){var pe=function(ke){return{label:ke.label,value:ke.v,valueLabel:c.formatPieValue(ke.v,q.separators),percent:ke.v/j.vTotal,percentLabel:c.formatPiePercent(ke.v/j.vTotal,q.separators),color:ke.color,text:ke.text,customdata:p.castOption(te,ke.i,"customdata")}}(F),ge=c.getFirstFilled(te.text,F.pts);(u(ge)||ge==="")&&(pe.text=ge),F.text=p.texttemplateString(de,pe,W._fullLayout._d3locale,pe,te._meta||{})}else F.text=""}}function N(W,F){var j=W.rotate*Math.PI/180,q=Math.cos(j),te=Math.sin(j),ee=(F.left+F.right)/2,Q=(F.top+F.bottom)/2;W.textX=ee*q-Q*te,W.textY=ee*te+Q*q,W.noCenter=!0}X.exports={plot:function(W,F){var j=W._context.staticPlot,q=W._fullLayout,te=q._size;a("pie",q),m(F,W),R(F,te);var ee=p.makeTraceGroups(q._pielayer,F,"trace").each(function(Q){var J=A.select(this),K=Q[0],Y=K.trace;(function(ie){var se,ae,ue,ve=ie[0],ye=ve.r,de=ve.trace,pe=c.getRotationAngle(de.rotation),ge=2*Math.PI/ve.vTotal,ke="px0",Ee="px1";if(de.direction==="counterclockwise"){for(se=0;se<ie.length&&ie[se].hidden;se++);if(se===ie.length)return;pe+=ge*ie[se].v,ge*=-1,ke="px1",Ee="px0"}for(ue=U(ye,pe),se=0;se<ie.length;se++)(ae=ie[se]).hidden||(ae[ke]=ue,ae.startangle=pe,pe+=ge*ae.v/2,ae.pxmid=U(ye,pe),ae.midangle=pe,ue=U(ye,pe+=ge*ae.v/2),ae.stopangle=pe,ae[Ee]=ue,ae.largeArc=ae.v>ve.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/ve.vTotal,.5),ae.ring=1-de.hole,ae.rInscribed=w(ae,ve))})(Q),J.attr("stroke-linejoin","round"),J.each(function(){var ie=A.select(this).selectAll("g.slice").data(Q);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var se=[[[],[]],[[],[]]],ae=!1;ie.each(function(Ee,me){if(Ee.hidden)A.select(this).selectAll("path,g").remove();else{Ee.pointNumber=Ee.i,Ee.curveNumber=Y.index,se[Ee.pxmid[1]<0?0:1][Ee.pxmid[0]<0?0:1].push(Ee);var oe=K.cx,re=K.cy,fe=A.select(this),Se=fe.selectAll("path.surface").data([Ee]);if(Se.enter().append("path").classed("surface",!0).style({"pointer-events":j?"none":"all"}),fe.call(x,W,Q),Y.pull){var be=+c.castOption(Y.pull,Ee.pts)||0;be>0&&(oe+=be*Ee.pxmid[0],re+=be*Ee.pxmid[1])}Ee.cxFinal=oe,Ee.cyFinal=re;var we=Y.hole;if(Ee.v===K.vTotal){var Me="M"+(oe+Ee.px0[0])+","+(re+Ee.px0[1])+Ae(Ee.px0,Ee.pxmid,!0,1)+Ae(Ee.pxmid,Ee.px0,!0,1)+"Z";we?Se.attr("d","M"+(oe+we*Ee.px0[0])+","+(re+we*Ee.px0[1])+Ae(Ee.px0,Ee.pxmid,!1,we)+Ae(Ee.pxmid,Ee.px0,!1,we)+"Z"+Me):Se.attr("d",Me)}else{var Ie=Ae(Ee.px0,Ee.px1,!0,1);if(we){var Oe=1-we;Se.attr("d","M"+(oe+we*Ee.px1[0])+","+(re+we*Ee.px1[1])+Ae(Ee.px1,Ee.px0,!1,we)+"l"+Oe*Ee.px0[0]+","+Oe*Ee.px0[1]+Ie+"Z")}else Se.attr("d","M"+oe+","+re+"l"+Ee.px0[0]+","+Ee.px0[1]+Ie+"Z")}D(W,Ee,K);var he=c.castOption(Y.textposition,Ee.pts),_e=fe.selectAll("g.slicetext").data(Ee.text&&he!=="none"?[0]:[]);_e.enter().append("g").classed("slicetext",!0),_e.exit().remove(),_e.each(function(){var De=p.ensureSingle(A.select(this),"text","",function(mt){mt.attr("data-notex",1)}),Le=p.ensureUniformFontSize(W,he==="outside"?function(mt,ht,Qe){return{color:c.castOption(mt.outsidetextfont.color,ht.pts)||c.castOption(mt.textfont.color,ht.pts)||Qe.color,family:c.castOption(mt.outsidetextfont.family,ht.pts)||c.castOption(mt.textfont.family,ht.pts)||Qe.family,size:c.castOption(mt.outsidetextfont.size,ht.pts)||c.castOption(mt.textfont.size,ht.pts)||Qe.size,weight:c.castOption(mt.outsidetextfont.weight,ht.pts)||c.castOption(mt.textfont.weight,ht.pts)||Qe.weight,style:c.castOption(mt.outsidetextfont.style,ht.pts)||c.castOption(mt.textfont.style,ht.pts)||Qe.style,variant:c.castOption(mt.outsidetextfont.variant,ht.pts)||c.castOption(mt.textfont.variant,ht.pts)||Qe.variant,textcase:c.castOption(mt.outsidetextfont.textcase,ht.pts)||c.castOption(mt.textfont.textcase,ht.pts)||Qe.textcase,lineposition:c.castOption(mt.outsidetextfont.lineposition,ht.pts)||c.castOption(mt.textfont.lineposition,ht.pts)||Qe.lineposition,shadow:c.castOption(mt.outsidetextfont.shadow,ht.pts)||c.castOption(mt.textfont.shadow,ht.pts)||Qe.shadow}}(Y,Ee,q.font):d(Y,Ee,q.font));De.text(Ee.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Le).call(i.convertToTspans,W);var Be,Ve=b.bBox(De.node());if(he==="outside")Be=E(Ve,Ee);else if(Be=g(Ve,Ee,K),he==="auto"&&Be.scale<1){var Ze=p.ensureUniformFontSize(W,Y.outsidetextfont);De.call(b.font,Ze),Be=E(Ve=b.bBox(De.node()),Ee)}var rt=Be.textPosAngle,it=rt===void 0?Ee.pxmid:U(K.r,rt);if(Be.targetX=oe+it[0]*Be.rCenter+(Be.x||0),Be.targetY=re+it[1]*Be.rCenter+(Be.y||0),N(Be,Ve),Be.outside){var dt=Be.targetY;Ee.yLabelMin=dt-Ve.height/2,Ee.yLabelMid=dt,Ee.yLabelMax=dt+Ve.height/2,Ee.labelExtraX=0,Ee.labelExtraY=0,ae=!0}Be.fontSize=Le.size,r(Y.type,Be,q),Q[me].transform=Be,p.setTransormAndDisplay(De,Be)})}function Ae(De,Le,Be,Ve){var Ze=Ve*(Le[0]-De[0]),rt=Ve*(Le[1]-De[1]);return"a"+Ve*K.r+","+Ve*K.r+" 0 "+Ee.largeArc+(Be?" 1 ":" 0 ")+Ze+","+rt}});var ue=A.select(this).selectAll("g.titletext").data(Y.title.text?[0]:[]);if(ue.enter().append("g").classed("titletext",!0),ue.exit().remove(),ue.each(function(){var Ee,me=p.ensureSingle(A.select(this),"text","",function(re){re.attr("data-notex",1)}),oe=Y.title.text;Y._meta&&(oe=p.templateString(oe,Y._meta)),me.text(oe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,Y.title.font).call(i.convertToTspans,W),Ee=Y.title.position==="middle center"?function(re){var fe=Math.sqrt(re.titleBox.width*re.titleBox.width+re.titleBox.height*re.titleBox.height);return{x:re.cx,y:re.cy,scale:re.trace.hole*re.r*2/fe,tx:0,ty:-re.titleBox.height/2+re.trace.title.font.size}}(K):P(K,te),me.attr("transform",t(Ee.x,Ee.y)+s(Math.min(1,Ee.scale))+t(Ee.tx,Ee.ty))}),ae&&function(Ee,me){var oe,re,fe,Se,be,we,Me,Ie,Oe,he,_e,Ae,De;function Le(rt,it){return rt.pxmid[1]-it.pxmid[1]}function Be(rt,it){return it.pxmid[1]-rt.pxmid[1]}function Ve(rt,it){it||(it={});var dt,mt,ht,Qe,Je=it.labelExtraY+(re?it.yLabelMax:it.yLabelMin),wt=re?rt.yLabelMin:rt.yLabelMax,Pt=re?rt.yLabelMax:rt.yLabelMin,It=rt.cyFinal+be(rt.px0[1],rt.px1[1]),At=Je-wt;if(At*Me>0&&(rt.labelExtraY=At),p.isArrayOrTypedArray(me.pull))for(mt=0;mt<he.length;mt++)(ht=he[mt])===rt||(c.castOption(me.pull,rt.pts)||0)>=(c.castOption(me.pull,ht.pts)||0)||((rt.pxmid[1]-ht.pxmid[1])*Me>0?(At=ht.cyFinal+be(ht.px0[1],ht.px1[1])-wt-rt.labelExtraY)*Me>0&&(rt.labelExtraY+=At):(Pt+rt.labelExtraY-It)*Me>0&&(dt=3*we*Math.abs(mt-he.indexOf(rt)),(Qe=ht.cxFinal+Se(ht.px0[0],ht.px1[0])+dt-(rt.cxFinal+rt.pxmid[0])-rt.labelExtraX)*we>0&&(rt.labelExtraX+=Qe)))}for(re=0;re<2;re++)for(fe=re?Le:Be,be=re?Math.max:Math.min,Me=re?1:-1,oe=0;oe<2;oe++){for(Se=oe?Math.max:Math.min,we=oe?1:-1,(Ie=Ee[re][oe]).sort(fe),Oe=Ee[1-re][oe],he=Oe.concat(Ie),Ae=[],_e=0;_e<Ie.length;_e++)Ie[_e].yLabelMid!==void 0&&Ae.push(Ie[_e]);for(De=!1,_e=0;re&&_e<Oe.length;_e++)if(Oe[_e].yLabelMid!==void 0){De=Oe[_e];break}for(_e=0;_e<Ae.length;_e++){var Ze=_e&&Ae[_e-1];De&&!_e&&(Ze=De),Ve(Ae[_e],Ze)}}}(se,Y),function(Ee,me){Ee.each(function(oe){var re=A.select(this);if(oe.labelExtraX||oe.labelExtraY){var fe=re.select("g.slicetext text");oe.transform.targetX+=oe.labelExtraX,oe.transform.targetY+=oe.labelExtraY,p.setTransormAndDisplay(fe,oe.transform);var Se=oe.cxFinal+oe.pxmid[0],be="M"+Se+","+(oe.cyFinal+oe.pxmid[1]),we=(oe.yLabelMax-oe.yLabelMin)*(oe.pxmid[0]<0?-1:1)/4;if(oe.labelExtraX){var Me=oe.labelExtraX*oe.pxmid[1]/oe.pxmid[0],Ie=oe.yLabelMid+oe.labelExtraY-(oe.cyFinal+oe.pxmid[1]);Math.abs(Me)>Math.abs(Ie)?be+="l"+Ie*oe.pxmid[0]/oe.pxmid[1]+","+Ie+"H"+(Se+oe.labelExtraX+we):be+="l"+oe.labelExtraX+","+Me+"v"+(Ie-Me)+"h"+we}else be+="V"+(oe.yLabelMid+oe.labelExtraY)+"h"+we;p.ensureSingle(re,"path","textline").call(T.stroke,me.outsidetextfont.color).attr({"stroke-width":Math.min(2,me.outsidetextfont.size/8),d:be,fill:"none"})}else re.select("path.textline").remove()})}(ie,Y),ae&&Y.automargin){var ve=b.bBox(J.node()),ye=Y.domain,de=te.w*(ye.x[1]-ye.x[0]),pe=te.h*(ye.y[1]-ye.y[0]),ge=(.5*de-K.r)/te.w,ke=(.5*pe-K.r)/te.h;k.autoMargin(W,"pie."+Y.uid+".automargin",{xl:ye.x[0]-ge,xr:ye.x[1]+ge,yb:ye.y[0]-ke,yt:ye.y[1]+ke,l:Math.max(K.cx-K.r-ve.left,0),r:Math.max(ve.right-(K.cx+K.r),0),b:Math.max(ve.bottom-(K.cy+K.r),0),t:Math.max(K.cy-K.r-ve.top,0),pad:5})}})});setTimeout(function(){ee.selectAll("tspan").each(function(){var Q=A.select(this);Q.attr("dy")&&Q.attr("dy",Q.attr("dy"))})},0)},formatSliceLabel:D,transformInsideText:g,determineInsideTextFont:d,positionTitleOutside:P,prerenderTitles:m,layoutAreas:R,attachFxHandlers:x,computeTransform:N}},22152:function(X,I,e){"use strict";var A=e(33428),k=e(10528),o=e(82744).resizeText;X.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");o(T,b,"pie"),b.each(function(p){var s=p[0].trace,t=A.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){A.select(this).call(k,i,s,T)})})}},10528:function(X,I,e){"use strict";var A=e(76308),k=e(69656).castOption,o=e(21552);X.exports=function(T,b,p,s){var t=p.marker.line,i=k(t.color,b.pts)||A.defaultLine,n=k(t.width,b.pts)||0;T.call(o,b,p,s).style("stroke-width",n).call(A.stroke,i)}},35484:function(X,I,e){"use strict";var A=e(52904);X.exports={x:A.x,y:A.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:A.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(X,I,e){"use strict";var A=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,o=e(43080),T=e(19280).findExtremes,b=e(44928);function p(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=A(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=p.prototype;s.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:k(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},s.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},s.updateFast=function(t){var i,n,r,a,l,c,h=this.xData=this.pickXData=t.x,u=this.yData=this.pickYData=t.y,x=this.pickXYData=t.xy,d=t.xbounds&&t.ybounds,m=t.indices,g=this.bounds;if(x){if(r=x,i=x.length>>>1,d)g[0]=t.xbounds[0],g[2]=t.xbounds[1],g[1]=t.ybounds[0],g[3]=t.ybounds[1];else for(c=0;c<i;c++)a=r[2*c],l=r[2*c+1],a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),l<g[1]&&(g[1]=l),l>g[3]&&(g[3]=l);if(m)n=m;else for(n=new Int32Array(i),c=0;c<i;c++)n[c]=c}else for(i=h.length,r=new Float32Array(2*i),n=new Int32Array(i),c=0;c<i;c++)a=h[c],l=u[c],n[c]=c,r[2*c]=a,r[2*c+1]=l,a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),l<g[1]&&(g[1]=l),l>g[3]&&(g[3]=l);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var y=o(t.marker.color),v=o(t.marker.border.color),_=t.opacity*t.marker.opacity;y[3]*=_,this.pointcloudOptions.color=y;var f=t.marker.blend;f===null&&(f=h.length<100||u.length<100),this.pointcloudOptions.blend=f,v[3]*=_,this.pointcloudOptions.borderColor=v;var S=t.marker.sizemin,w=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,P=this.scene.yaxis,C=w/2||.5;t._extremes[E._id]=T(E,[g[0],g[2]],{ppad:C}),t._extremes[P._id]=T(P,[g[1],g[3]],{ppad:C})},s.dispose=function(){this.pointcloud.dispose()},X.exports=function(t,i){var n=new p(t,i.uid);return n.update(i),n}},41904:function(X,I,e){"use strict";var A=e(3400),k=e(35484);X.exports=function(o,T,b){function p(s,t){return A.coerce(o,T,k,s,t)}p("x"),p("y"),p("xbounds"),p("ybounds"),o.xy&&o.xy instanceof Float32Array&&(T.xy=o.xy),o.indices&&o.indices instanceof Int32Array&&(T.indices=o.indices),p("text"),p("marker.color",b),p("marker.opacity"),p("marker.blend"),p("marker.sizemin"),p("marker.sizemax"),p("marker.border.color",b),p("marker.border.arearatio"),T._length=null}},156:function(X,I,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),X.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(X,I,e){"use strict";var A=e(25376),k=e(45464),o=e(22548),T=e(55756),b=e(86968).u,p=e(21776).Ks,s=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,n=e(92880).extendFlat,r=e(67824).overrideAll;(X.exports=r({hoverinfo:n({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:A({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(X,I,e){"use strict";var A=e(67824).overrideAll,k=e(84888)._M,o=e(59596),T=e(65460),b=e(93972),p=e(86476),s=e(22676).prepSelect,t=e(3400),i=e(24040),n="sankey";function r(a,l){var c=a._fullData[l],h=a._fullLayout,u=h.dragmode,x=h.dragmode==="pan"?"move":"crosshair",d=c._bgRect;if(d&&u!=="pan"&&u!=="zoom"){b(d,x);var m={_id:"x",c2p:t.identity,_offset:c._sankey.translateX,_length:c._sankey.width},g={_id:"y",c2p:t.identity,_offset:c._sankey.translateY,_length:c._sankey.height},y={gd:a,element:d.node(),plotinfo:{id:l,xaxis:m,yaxis:g,fillRangeItems:t.noop},subplot:l,xaxes:[m],yaxes:[g],doneFnCompleted:function(v){var _,f=a._fullData[l],S=f.node.groups.slice(),w=[];function E(R){for(var U=f._sankey.graph.nodes,D=0;D<U.length;D++)if(U[D].pointNumber===R)return U[D]}for(var P=0;P<v.length;P++){var C=E(v[P].pointNumber);if(C)if(C.group){for(var O=0;O<C.childrenNodes.length;O++)w.push(C.childrenNodes[O].pointNumber);S[C.pointNumber-f.node._count]=!1}else w.push(C.pointNumber)}_=S.filter(Boolean).concat([w]),i.call("_guiRestyle",a,{"node.groups":[_]},l)},prepFn:function(v,_,f){s(v,_,f,y,u)}};p.init(y)}}I.name=n,I.baseLayoutAttrOverrides=A({hoverlabel:T.hoverlabel},"plot","nested"),I.plot=function(a){var l=k(a.calcdata,n)[0];o(a,l),I.updateFx(a)},I.clean=function(a,l,c,h){var u=h._has&&h._has(n),x=l._has&&l._has(n);u&&!x&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},I.updateFx=function(a){for(var l=0;l<a._fullData.length;l++)r(a,l)}},48068:function(X,I,e){"use strict";var A=e(78484),k=e(3400),o=e(71688).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,p=e(8932);X.exports=function(s,t){var i=function(n){var r,a=n.node,l=n.link,c=[],h=T(l.color),u=T(l.hovercolor),x=T(l.customdata),d={},m={},g=l.colorscales.length;for(r=0;r<g;r++){var y=l.colorscales[r],v=p.extractScale(y,{cLetter:"c"}),_=p.makeColorScaleFunc(v);m[y.label]=_}var f=0;for(r=0;r<l.value.length;r++)l.source[r]>f&&(f=l.source[r]),l.target[r]>f&&(f=l.target[r]);var S,w=f+1;n.node._count=w;var E=n.node.groups,P={};for(r=0;r<E.length;r++){var C=E[r];for(S=0;S<C.length;S++){var O=C[S],R=w+r;P.hasOwnProperty(O)?k.warn("Node "+O+" is already part of a group."):P[O]=R}}var U={source:[],target:[]};for(r=0;r<l.value.length;r++){var D=l.value[r],N=l.source[r],W=l.target[r];if(D>0&&b(N,w)&&b(W,w)&&(!P.hasOwnProperty(N)||!P.hasOwnProperty(W)||P[N]!==P[W])){P.hasOwnProperty(W)&&(W=P[W]),P.hasOwnProperty(N)&&(N=P[N]),W=+W,d[N=+N]=d[W]=!0;var F="";l.label&&l.label[r]&&(F=l.label[r]);var j=null;F&&m.hasOwnProperty(F)&&(j=m[F]),c.push({pointNumber:r,label:F,color:h?l.color[r]:l.color,hovercolor:u?l.hovercolor[r]:l.hovercolor,customdata:x?l.customdata[r]:l.customdata,concentrationscale:j,source:N,target:W,value:+D}),U.source.push(N),U.target.push(W)}}var q=w+E.length,te=T(a.color),ee=T(a.customdata),Q=[];for(r=0;r<q;r++)if(d[r]){var J=a.label[r];Q.push({group:r>w-1,childrenNodes:[],pointNumber:r,label:J,color:te?a.color[r]:a.color,customdata:ee?a.customdata[r]:a.customdata})}var K=!1;return function(Y,ie,se){for(var ae=k.init2dArray(Y,0),ue=0;ue<Math.min(ie.length,se.length);ue++)if(k.isIndex(ie[ue],Y)&&k.isIndex(se[ue],Y)){if(ie[ue]===se[ue])return!0;ae[ie[ue]].push(se[ue])}return A(ae).components.some(function(ve){return ve.length>1})}(q,U.source,U.target)&&(K=!0),{circular:K,links:c,nodes:Q,groups:E,groupLookup:P}}(t);return o({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(X){"use strict";X.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(X,I,e){"use strict";var A=e(3400),k=e(41440),o=e(76308),T=e(49760),b=e(86968).Q,p=e(16132),s=e(31780),t=e(51272);function i(n,r){function a(l,c){return A.coerce(n,r,k.link.colorscales,l,c)}a("label"),a("cmin"),a("cmax"),a("colorscale")}X.exports=function(n,r,a,l){function c(E,P){return A.coerce(n,r,k,E,P)}var h=A.extendDeep(l.hoverlabel,n.hoverlabel),u=n.node,x=s.newContainer(r,"node");function d(E,P){return A.coerce(u,x,k.node,E,P)}d("label"),d("groups"),d("x"),d("y"),d("pad"),d("thickness"),d("line.color"),d("line.width"),d("hoverinfo",n.hoverinfo),p(u,x,d,h),d("hovertemplate"),d("align");var m=l.colorway;d("color",x.label.map(function(E,P){return o.addOpacity(function(C){return m[C%m.length]}(P),.8)})),d("customdata");var g=n.link||{},y=s.newContainer(r,"link");function v(E,P){return A.coerce(g,y,k.link,E,P)}v("label"),v("arrowlen"),v("source"),v("target"),v("value"),v("line.color"),v("line.width"),v("hoverinfo",n.hoverinfo),p(g,y,v,h),v("hovertemplate");var _,f=T(l.paper_bgcolor).getLuminance()<.333,S=v("color",f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function w(E){var P=T(E);if(!P.isValid())return E;var C=P.getAlpha();return C<=.8?P.setAlpha(C+.2):P=f?P.brighten():P.darken(),P.toRgbString()}v("hovercolor",Array.isArray(S)?S.map(w):w(S)),v("customdata"),t(g,y,{name:"colorscales",handleItemDefaults:i}),b(r,l,c),c("orientation"),c("valueformat"),c("valuesuffix"),x.x.length&&x.y.length&&(_="freeform"),c("arrangement",_),A.coerceFont(c,"textfont",l.font,{autoShadowDflt:!0}),r._length=null}},45499:function(X,I,e){"use strict";X.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=k.numberFormat,T=e(83248),b=e(93024),p=e(76308),s=e(11820).cn,t=k._;function i(g){return g!==""}function n(g,y){return g.filter(function(v){return v.key===y.traceId})}function r(g,y){A.select(g).select("path").style("fill-opacity",y),A.select(g).select("rect").style("fill-opacity",y)}function a(g){A.select(g).select("text.name").style("fill","black")}function l(g){return function(y){return g.node.sourceLinks.indexOf(y.link)!==-1||g.node.targetLinks.indexOf(y.link)!==-1}}function c(g){return function(y){return y.node.sourceLinks.indexOf(g.link)!==-1||y.node.targetLinks.indexOf(g.link)!==-1}}function h(g,y,v){y&&v&&n(v,y).selectAll("."+s.sankeyLink).filter(l(y)).call(x.bind(0,y,v,!1))}function u(g,y,v){y&&v&&n(v,y).selectAll("."+s.sankeyLink).filter(l(y)).call(d.bind(0,y,v,!1))}function x(g,y,v,_){_.style("fill",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverHue}).style("fill-opacity",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverAlpha}),_.each(function(f){var S=f.link.label;S!==""&&n(y,g).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverHue}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverAlpha})}),v&&n(y,g).selectAll("."+s.sankeyNode).filter(c(g)).call(h)}function d(g,y,v,_){_.style("fill",function(f){return f.tinyColorHue}).style("fill-opacity",function(f){return f.tinyColorAlpha}),_.each(function(f){var S=f.link.label;S!==""&&n(y,g).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){return w.tinyColorHue}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),v&&n(y,g).selectAll(s.sankeyNode).filter(c(g)).call(u)}function m(g,y){var v=g.hoverlabel||{},_=k.nestedProperty(v,y).get();return!Array.isArray(_)&&_}X.exports=function(g,y){for(var v=g._fullLayout,_=v._paper,f=v._size,S=0;S<g._fullData.length;S++)if(g._fullData[S].visible&&g._fullData[S].type===s.sankey&&!g._fullData[S]._viewInitial){var w=g._fullData[S].node;g._fullData[S]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(g,"source:")+" ",P=t(g,"target:")+" ",C=t(g,"concentration:")+" ",O=t(g,"incoming flow count:")+" ",R=t(g,"outgoing flow count:")+" ";T(g,_,y,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(U,D,N){g._fullLayout.hovermode!==!1&&(A.select(U).call(x.bind(0,D,N,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,g.emit("plotly_hover",{event:A.event,points:[D.link]})))},follow:function(U,D){if(g._fullLayout.hovermode!==!1){var N=D.link.trace.link;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){for(var W=[],F=0,j=0;j<D.flow.links.length;j++){var q=D.flow.links[j];if(g._fullLayout.hovermode!=="closest"||D.link.pointNumber===q.pointNumber){D.link.pointNumber===q.pointNumber&&(F=j),q.fullData=q.trace,N=D.link.trace.link;var te=Q(q),ee={valueLabel:o(D.valueFormat)(q.value)+D.valueSuffix};W.push({x:te[0],y:te[1],name:ee.valueLabel,text:[q.label||"",E+q.source.label,P+q.target.label,q.concentrationscale?C+o("%0.2f")(q.flow.labelConcentration):""].filter(i).join("<br>"),color:m(N,"bgcolor")||p.addOpacity(q.color,1),borderColor:m(N,"bordercolor"),fontFamily:m(N,"font.family"),fontSize:m(N,"font.size"),fontColor:m(N,"font.color"),fontWeight:m(N,"font.weight"),fontStyle:m(N,"font.style"),fontVariant:m(N,"font.variant"),fontTextcase:m(N,"font.textcase"),fontLineposition:m(N,"font.lineposition"),fontShadow:m(N,"font.shadow"),nameLength:m(N,"namelength"),textAlign:m(N,"align"),idealAlign:A.event.x<te[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:ee,eventData:[q]})}}b.loneHover(W,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:g,anchorIndex:F}).each(function(){D.link.concentrationscale||r(this,.65),a(this)})}}function Q(J){var K,Y;J.circular?(K=(J.circularPathData.leftInnerExtent+J.circularPathData.rightInnerExtent)/2,Y=J.circularPathData.verticalFullExtent):(K=(J.source.x1+J.target.x0)/2,Y=(J.y0+J.y1)/2);var ie=[K,Y];return J.trace.orientation==="v"&&ie.reverse(),ie[0]+=D.parent.translateX,ie[1]+=D.parent.translateY,ie}},unhover:function(U,D,N){g._fullLayout.hovermode!==!1&&(A.select(U).call(d.bind(0,D,N,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,g.emit("plotly_unhover",{event:A.event,points:[D.link]})),b.loneUnhover(v._hoverlayer.node()))},select:function(U,D){var N=D.link;N.originalEvent=A.event,g._hoverdata=[N],b.click(g,{target:!0})}},nodeEvents:{hover:function(U,D,N){g._fullLayout.hovermode!==!1&&(A.select(U).call(h,D,N),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,g.emit("plotly_hover",{event:A.event,points:[D.node]})))},follow:function(U,D){if(g._fullLayout.hovermode!==!1){var N=D.node.trace.node;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){var W=A.select(U).select("."+s.nodeRect),F=g._fullLayout._paperdiv.node().getBoundingClientRect(),j=W.node().getBoundingClientRect(),q=j.left-2-F.left,te=j.right+2-F.left,ee=j.top+j.height/4-F.top,Q={valueLabel:o(D.valueFormat)(D.node.value)+D.valueSuffix};D.node.fullData=D.node.trace,g._fullLayout._calcInverseTransform(g);var J=g._fullLayout._invScaleX,K=g._fullLayout._invScaleY,Y=b.loneHover({x0:J*q,x1:J*te,y:K*ee,name:o(D.valueFormat)(D.node.value)+D.valueSuffix,text:[D.node.label,O+D.node.targetLinks.length,R+D.node.sourceLinks.length].filter(i).join("<br>"),color:m(N,"bgcolor")||D.tinyColorHue,borderColor:m(N,"bordercolor"),fontFamily:m(N,"font.family"),fontSize:m(N,"font.size"),fontColor:m(N,"font.color"),fontWeight:m(N,"font.weight"),fontStyle:m(N,"font.style"),fontVariant:m(N,"font.variant"),fontTextcase:m(N,"font.textcase"),fontLineposition:m(N,"font.lineposition"),fontShadow:m(N,"font.shadow"),nameLength:m(N,"namelength"),textAlign:m(N,"align"),idealAlign:"left",hovertemplate:N.hovertemplate,hovertemplateLabels:Q,eventData:[D.node]},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:g});r(Y,.85),a(Y)}}},unhover:function(U,D,N){g._fullLayout.hovermode!==!1&&(A.select(U).call(u,D,N),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,g.emit("plotly_unhover",{event:A.event,points:[D.node]})),b.loneUnhover(v._hoverlayer.node()))},select:function(U,D,N){var W=D.node;W.originalEvent=A.event,g._hoverdata=[W],A.select(U).call(u,D,N),b.click(g,{target:!0})}}})}},83248:function(X,I,e){"use strict";var A=e(49812),k=e(67756).Gz,o=e(33428),T=e(26800),b=e(48932),p=e(11820),s=e(49760),t=e(76308),i=e(43616),n=e(3400),r=n.strTranslate,a=n.strRotate,l=e(71688),c=l.keyFun,h=l.repeat,u=l.unwrap,x=e(72736),d=e(24040),m=e(84284),g=m.CAP_SHIFT,y=m.LINE_SPACING;function v(j,q,te){var ee,Q=u(q),J=Q.trace,K=J.domain,Y=J.orientation==="h",ie=J.node.pad,se=J.node.thickness,ae={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[J.node.align],ue=j.width*(K.x[1]-K.x[0]),ve=j.height*(K.y[1]-K.y[0]),ye=Q._nodes,de=Q._links,pe=Q.circular;(ee=pe?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(p.sankeyIterations).size(Y?[ue,ve]:[ve,ue]).nodeWidth(se).nodePadding(ie).nodeId(function(Me){return Me.pointNumber}).nodeAlign(ae).nodes(ye).links(de);var ge,ke,Ee,me=ee();for(var oe in ee.nodePadding()<ie&&n.warn("node.pad was reduced to ",ee.nodePadding()," to fit within the figure."),Q._groupLookup){var re,fe=parseInt(Q._groupLookup[oe]);for(ge=0;ge<me.nodes.length;ge++)if(me.nodes[ge].pointNumber===fe){re=me.nodes[ge];break}if(re){var Se={pointNumber:parseInt(oe),x0:re.x0,x1:re.x1,y0:re.y0,y1:re.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};me.nodes.unshift(Se),re.childrenNodes.unshift(Se)}}if(function(){for(ge=0;ge<me.nodes.length;ge++){var Me,Ie,Oe=me.nodes[ge],he={};for(ke=0;ke<Oe.targetLinks.length;ke++)Me=(Ie=Oe.targetLinks[ke]).source.pointNumber+":"+Ie.target.pointNumber,he.hasOwnProperty(Me)||(he[Me]=[]),he[Me].push(Ie);var _e=Object.keys(he);for(ke=0;ke<_e.length;ke++){var Ae=he[Me=_e[ke]],De=0,Le={};for(Ee=0;Ee<Ae.length;Ee++)Le[(Ie=Ae[Ee]).label]||(Le[Ie.label]=0),Le[Ie.label]+=Ie.value,De+=Ie.value;for(Ee=0;Ee<Ae.length;Ee++)(Ie=Ae[Ee]).flow={value:De,labelConcentration:Le[Ie.label]/De,concentration:Ie.value/De,links:Ae},Ie.concentrationscale&&(Ie.color=s(Ie.concentrationscale(Ie.flow.labelConcentration)))}var Be=0;for(ke=0;ke<Oe.sourceLinks.length;ke++)Be+=Oe.sourceLinks[ke].value;for(ke=0;ke<Oe.sourceLinks.length;ke++)(Ie=Oe.sourceLinks[ke]).concentrationOut=Ie.value/Be;var Ve=0;for(ke=0;ke<Oe.targetLinks.length;ke++)Ve+=Oe.targetLinks[ke].value;for(ke=0;ke<Oe.targetLinks.length;ke++)(Ie=Oe.targetLinks[ke]).concenrationIn=Ie.value/Ve}}(),J.node.x.length&&J.node.y.length){for(ge=0;ge<Math.min(J.node.x.length,J.node.y.length,me.nodes.length);ge++)if(J.node.x[ge]&&J.node.y[ge]){var be=[J.node.x[ge]*ue,J.node.y[ge]*ve];me.nodes[ge].x0=be[0]-se/2,me.nodes[ge].x1=be[0]+se/2;var we=me.nodes[ge].y1-me.nodes[ge].y0;me.nodes[ge].y0=be[1]-we/2,me.nodes[ge].y1=be[1]+we/2}J.arrangement==="snap"&&function(Me){var Ie,Oe,he=Me.map(function(Be,Ve){return{x0:Be.x0,index:Ve}}).sort(function(Be,Ve){return Be.x0-Ve.x0}),_e=[],Ae=-1,De=-1/0;for(ge=0;ge<he.length;ge++){var Le=Me[he[ge].index];Le.x0>De+se&&(Ae+=1,Ie=Le.x0),De=Le.x0,_e[Ae]||(_e[Ae]=[]),_e[Ae].push(Le),Oe=Ie-Le.x0,Le.x0+=Oe,Le.x1+=Oe}return _e}(ye=me.nodes).forEach(function(Me){var Ie,Oe,he,_e=0,Ae=Me.length;for(Me.sort(function(De,Le){return De.y0-Le.y0}),he=0;he<Ae;++he)(Ie=Me[he]).y0>=_e||(Oe=_e-Ie.y0)>1e-6&&(Ie.y0+=Oe,Ie.y1+=Oe),_e=Ie.y1+ie}),ee.update(me)}return{circular:pe,key:te,trace:J,guid:n.randstr(),horizontal:Y,width:ue,height:ve,nodePad:J.node.pad,nodeLineColor:J.node.line.color,nodeLineWidth:J.node.line.width,linkLineColor:J.link.line.color,linkLineWidth:J.link.line.width,linkArrowLength:J.link.arrowlen,valueFormat:J.valueformat,valueSuffix:J.valuesuffix,textFont:J.textfont,translateX:K.x[0]*j.width+j.margin.l,translateY:j.height-K.y[1]*j.height+j.margin.t,dragParallel:Y?ve:ue,dragPerpendicular:Y?ue:ve,arrangement:J.arrangement,sankey:ee,graph:me,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(j,q,te){var ee=s(q.color),Q=s(q.hovercolor),J=q.source.label+"|"+q.target.label+"__"+te;return q.trace=j.trace,q.curveNumber=j.trace.index,{circular:j.circular,key:J,traceId:j.key,pointNumber:q.pointNumber,link:q,tinyColorHue:t.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),tinyColorHoverHue:t.tinyRGB(Q),tinyColorHoverAlpha:Q.getAlpha(),linkPath:f,linkLineColor:j.linkLineColor,linkLineWidth:j.linkLineWidth,linkArrowLength:j.linkArrowLength,valueFormat:j.valueFormat,valueSuffix:j.valueSuffix,sankey:j.sankey,parent:j,interactionState:j.interactionState,flow:q.flow}}function f(){return function(j){var q=j.linkArrowLength;if(j.link.circular)return function(ge,ke){var Ee=ge.width/2,me=ge.circularPathData;return ge.circularLinkType==="top"?"M "+(me.targetX-ke)+" "+(me.targetY+Ee)+" L"+(me.rightInnerExtent-ke)+" "+(me.targetY+Ee)+"A"+(me.rightLargeArcRadius+Ee)+" "+(me.rightSmallArcRadius+Ee)+" 0 0 1 "+(me.rightFullExtent-Ee-ke)+" "+(me.targetY-me.rightSmallArcRadius)+"L"+(me.rightFullExtent-Ee-ke)+" "+me.verticalRightInnerExtent+"A"+(me.rightLargeArcRadius+Ee)+" "+(me.rightLargeArcRadius+Ee)+" 0 0 1 "+(me.rightInnerExtent-ke)+" "+(me.verticalFullExtent-Ee)+"L"+me.leftInnerExtent+" "+(me.verticalFullExtent-Ee)+"A"+(me.leftLargeArcRadius+Ee)+" "+(me.leftLargeArcRadius+Ee)+" 0 0 1 "+(me.leftFullExtent+Ee)+" "+me.verticalLeftInnerExtent+"L"+(me.leftFullExtent+Ee)+" "+(me.sourceY-me.leftSmallArcRadius)+"A"+(me.leftLargeArcRadius+Ee)+" "+(me.leftSmallArcRadius+Ee)+" 0 0 1 "+me.leftInnerExtent+" "+(me.sourceY+Ee)+"L"+me.sourceX+" "+(me.sourceY+Ee)+"L"+me.sourceX+" "+(me.sourceY-Ee)+"L"+me.leftInnerExtent+" "+(me.sourceY-Ee)+"A"+(me.leftLargeArcRadius-Ee)+" "+(me.leftSmallArcRadius-Ee)+" 0 0 0 "+(me.leftFullExtent-Ee)+" "+(me.sourceY-me.leftSmallArcRadius)+"L"+(me.leftFullExtent-Ee)+" "+me.verticalLeftInnerExtent+"A"+(me.leftLargeArcRadius-Ee)+" "+(me.leftLargeArcRadius-Ee)+" 0 0 0 "+me.leftInnerExtent+" "+(me.verticalFullExtent+Ee)+"L"+(me.rightInnerExtent-ke)+" "+(me.verticalFullExtent+Ee)+"A"+(me.rightLargeArcRadius-Ee)+" "+(me.rightLargeArcRadius-Ee)+" 0 0 0 "+(me.rightFullExtent+Ee-ke)+" "+me.verticalRightInnerExtent+"L"+(me.rightFullExtent+Ee-ke)+" "+(me.targetY-me.rightSmallArcRadius)+"A"+(me.rightLargeArcRadius-Ee)+" "+(me.rightSmallArcRadius-Ee)+" 0 0 0 "+(me.rightInnerExtent-ke)+" "+(me.targetY-Ee)+"L"+(me.targetX-ke)+" "+(me.targetY-Ee)+(ke>0?"L"+me.targetX+" "+me.targetY:"")+"Z":"M "+(me.targetX-ke)+" "+(me.targetY-Ee)+" L"+(me.rightInnerExtent-ke)+" "+(me.targetY-Ee)+"A"+(me.rightLargeArcRadius+Ee)+" "+(me.rightSmallArcRadius+Ee)+" 0 0 0 "+(me.rightFullExtent-Ee-ke)+" "+(me.targetY+me.rightSmallArcRadius)+"L"+(me.rightFullExtent-Ee-ke)+" "+me.verticalRightInnerExtent+"A"+(me.rightLargeArcRadius+Ee)+" "+(me.rightLargeArcRadius+Ee)+" 0 0 0 "+(me.rightInnerExtent-ke)+" "+(me.verticalFullExtent+Ee)+"L"+me.leftInnerExtent+" "+(me.verticalFullExtent+Ee)+"A"+(me.leftLargeArcRadius+Ee)+" "+(me.leftLargeArcRadius+Ee)+" 0 0 0 "+(me.leftFullExtent+Ee)+" "+me.verticalLeftInnerExtent+"L"+(me.leftFullExtent+Ee)+" "+(me.sourceY+me.leftSmallArcRadius)+"A"+(me.leftLargeArcRadius+Ee)+" "+(me.leftSmallArcRadius+Ee)+" 0 0 0 "+me.leftInnerExtent+" "+(me.sourceY-Ee)+"L"+me.sourceX+" "+(me.sourceY-Ee)+"L"+me.sourceX+" "+(me.sourceY+Ee)+"L"+me.leftInnerExtent+" "+(me.sourceY+Ee)+"A"+(me.leftLargeArcRadius-Ee)+" "+(me.leftSmallArcRadius-Ee)+" 0 0 1 "+(me.leftFullExtent-Ee)+" "+(me.sourceY+me.leftSmallArcRadius)+"L"+(me.leftFullExtent-Ee)+" "+me.verticalLeftInnerExtent+"A"+(me.leftLargeArcRadius-Ee)+" "+(me.leftLargeArcRadius-Ee)+" 0 0 1 "+me.leftInnerExtent+" "+(me.verticalFullExtent-Ee)+"L"+(me.rightInnerExtent-ke)+" "+(me.verticalFullExtent-Ee)+"A"+(me.rightLargeArcRadius-Ee)+" "+(me.rightLargeArcRadius-Ee)+" 0 0 1 "+(me.rightFullExtent+Ee-ke)+" "+me.verticalRightInnerExtent+"L"+(me.rightFullExtent+Ee-ke)+" "+(me.targetY+me.rightSmallArcRadius)+"A"+(me.rightLargeArcRadius-Ee)+" "+(me.rightSmallArcRadius-Ee)+" 0 0 1 "+(me.rightInnerExtent-ke)+" "+(me.targetY+Ee)+"L"+(me.targetX-ke)+" "+(me.targetY+Ee)+(ke>0?"L"+me.targetX+" "+me.targetY:"")+"Z"}(j.link,q);var te=Math.abs((j.link.target.x0-j.link.source.x1)/2);q>te&&(q=te);var ee=j.link.source.x1,Q=j.link.target.x0-q,J=k(ee,Q),K=J(.5),Y=J(.5),ie=j.link.y0-j.link.width/2,se=j.link.y0+j.link.width/2,ae=j.link.y1-j.link.width/2,ue=j.link.y1+j.link.width/2,ve="M"+ee+","+ie,ye="C"+K+","+ie+" "+Y+","+ae+" "+Q+","+ae,de="C"+Y+","+ue+" "+K+","+se+" "+ee+","+se,pe=q>0?"L"+(Q+q)+","+(ae+j.link.width/2):"";return ve+ye+(pe+="L"+Q+","+ue)+de+"Z"}}function S(j,q){var te=s(q.color),ee=p.nodePadAcross,Q=j.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var J=q.dx,K=Math.max(.5,q.dy),Y="node_"+q.pointNumber;return q.group&&(Y=n.randstr()),q.trace=j.trace,q.curveNumber=j.trace.index,{index:q.pointNumber,key:Y,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:j.key,trace:j.trace,node:q,nodePad:j.nodePad,nodeLineColor:j.nodeLineColor,nodeLineWidth:j.nodeLineWidth,textFont:j.textFont,size:j.horizontal?j.height:j.width,visibleWidth:Math.ceil(J),visibleHeight:K,zoneX:-ee,zoneY:-Q,zoneWidth:J+2*ee,zoneHeight:K+2*Q,labelY:j.horizontal?q.dy/2+1:q.dx/2+1,left:q.originalLayer===1,sizeAcross:j.width,forceLayouts:j.forceLayouts,horizontal:j.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:j.valueFormat,valueSuffix:j.valueSuffix,sankey:j.sankey,graph:j.graph,arrangement:j.arrangement,uniqueNodeLabelPathId:[j.guid,j.key,Y].join("_"),interactionState:j.interactionState,figure:j}}function w(j){j.attr("transform",function(q){return r(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function E(j){j.call(w)}function P(j,q){j.call(E),q.attr("d",f())}function C(j){j.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function O(j){return j.link.width>1||j.linkLineWidth>0}function R(j){return r(j.translateX,j.translateY)+(j.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(j,q,te){j.on(".basic",null).on("mouseover.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(te.hover(this,ee,q),ee.interactionState.hovered=[this,ee])}).on("mousemove.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(te.follow(this,ee),ee.interactionState.hovered=[this,ee])}).on("mouseout.basic",function(ee){ee.interactionState.dragInProgress||ee.partOfGroup||(te.unhover(this,ee,q),ee.interactionState.hovered=!1)}).on("click.basic",function(ee){ee.interactionState.hovered&&(te.unhover(this,ee,q),ee.interactionState.hovered=!1),ee.interactionState.dragInProgress||ee.partOfGroup||te.select(this,ee,q)})}function D(j,q,te,ee){var Q=o.behavior.drag().origin(function(J){return{x:J.node.x0+J.visibleWidth/2,y:J.node.y0+J.visibleHeight/2}}).on("dragstart",function(J){if(J.arrangement!=="fixed"&&(n.ensureSingle(ee._fullLayout._infolayer,"g","dragcover",function(Y){ee._fullLayout._dragCover=Y}),n.raiseToTop(this),J.interactionState.dragInProgress=J.node,W(J.node),J.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,J.interactionState.hovered),J.interactionState.hovered=!1),J.arrangement==="snap")){var K=J.traceId+"|"+J.key;J.forceLayouts[K]?J.forceLayouts[K].alpha(1):function(Y,ie,se,ae){(function(ve){for(var ye=0;ye<ve.length;ye++)ve[ye].y=(ve[ye].y0+ve[ye].y1)/2,ve[ye].x=(ve[ye].x0+ve[ye].x1)/2})(se.graph.nodes);var ue=se.graph.nodes.filter(function(ve){return ve.originalX===se.node.originalX}).filter(function(ve){return!ve.partOfGroup});se.forceLayouts[ie]=A.forceSimulation(ue).alphaDecay(0).force("collide",A.forceCollide().radius(function(ve){return ve.dy/2+se.nodePad/2}).strength(1).iterations(p.forceIterations)).force("constrain",function(ve,ye,de,pe){return function(){for(var ge=0,ke=0;ke<de.length;ke++){var Ee=de[ke];Ee===pe.interactionState.dragInProgress?(Ee.x=Ee.lastDraggedX,Ee.y=Ee.lastDraggedY):(Ee.vx=(Ee.originalX-Ee.x)/p.forceTicksPerFrame,Ee.y=Math.min(pe.size-Ee.dy/2,Math.max(Ee.dy/2,Ee.y))),ge=Math.max(ge,Math.abs(Ee.vx),Math.abs(Ee.vy))}!pe.interactionState.dragInProgress&&ge<.1&&pe.forceLayouts[ye].alpha()>0&&pe.forceLayouts[ye].alpha(0)}}(0,ie,ue,se)).stop()}(0,K,J),function(Y,ie,se,ae,ue){window.requestAnimationFrame(function ve(){var ye;for(ye=0;ye<p.forceTicksPerFrame;ye++)se.forceLayouts[ae].tick();if(function(pe){for(var ge=0;ge<pe.length;ge++)pe[ge].y0=pe[ge].y-pe[ge].dy/2,pe[ge].y1=pe[ge].y0+pe[ge].dy,pe[ge].x0=pe[ge].x-pe[ge].dx/2,pe[ge].x1=pe[ge].x0+pe[ge].dx}(se.graph.nodes),se.sankey.update(se.graph),P(Y.filter(F(se)),ie),se.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(ve);else{var de=se.node.originalX;se.node.x0=de-se.visibleWidth/2,se.node.x1=de+se.visibleWidth/2,N(se,ue)}})}(j,q,J,K,ee)}}).on("drag",function(J){if(J.arrangement!=="fixed"){var K=o.event.x,Y=o.event.y;J.arrangement==="snap"?(J.node.x0=K-J.visibleWidth/2,J.node.x1=K+J.visibleWidth/2,J.node.y0=Y-J.visibleHeight/2,J.node.y1=Y+J.visibleHeight/2):(J.arrangement==="freeform"&&(J.node.x0=K-J.visibleWidth/2,J.node.x1=K+J.visibleWidth/2),Y=Math.max(0,Math.min(J.size-J.visibleHeight/2,Y)),J.node.y0=Y-J.visibleHeight/2,J.node.y1=Y+J.visibleHeight/2),W(J.node),J.arrangement!=="snap"&&(J.sankey.update(J.graph),P(j.filter(F(J)),q))}}).on("dragend",function(J){if(J.arrangement!=="fixed"){J.interactionState.dragInProgress=!1;for(var K=0;K<J.node.childrenNodes.length;K++)J.node.childrenNodes[K].x=J.node.x,J.node.childrenNodes[K].y=J.node.y;J.arrangement!=="snap"&&N(J,ee)}});j.on(".drag",null).call(Q)}function N(j,q){for(var te=[],ee=[],Q=0;Q<j.graph.nodes.length;Q++){var J=(j.graph.nodes[Q].x0+j.graph.nodes[Q].x1)/2,K=(j.graph.nodes[Q].y0+j.graph.nodes[Q].y1)/2;te.push(J/j.figure.width),ee.push(K/j.figure.height)}d.call("_guiRestyle",q,{"node.x":[te],"node.y":[ee]},j.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function W(j){j.lastDraggedX=j.x0+j.dx/2,j.lastDraggedY=j.y0+j.dy/2}function F(j){return function(q){return q.node.originalX===j.node.originalX}}X.exports=function(j,q,te,ee,Q){var J=j._context.staticPlot,K=!1;n.ensureSingle(j._fullLayout._infolayer,"g","first-render",function(){K=!0});var Y=j._fullLayout._dragCover,ie=te.filter(function(ge){return u(ge).trace.visible}).map(v.bind(null,ee)),se=q.selectAll("."+p.cn.sankey).data(ie,c);se.exit().remove(),se.enter().append("g").classed(p.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",J?"none":"auto").attr("transform",R),se.each(function(ge,ke){j._fullData[ke]._sankey=ge;var Ee="bgsankey-"+ge.trace.uid+"-"+ke;n.ensureSingle(j._fullLayout._draggers,"rect",Ee),j._fullData[ke]._bgRect=o.select("."+Ee),j._fullData[ke]._bgRect.style("pointer-events",J?"none":"all").attr("width",ge.width).attr("height",ge.height).attr("x",ge.translateX).attr("y",ge.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(p.ease).duration(p.duration).attr("transform",R);var ae=se.selectAll("."+p.cn.sankeyLinks).data(h,c);ae.enter().append("g").classed(p.cn.sankeyLinks,!0).style("fill","none");var ue=ae.selectAll("."+p.cn.sankeyLink).data(function(ge){return ge.graph.links.filter(function(ke){return ke.value}).map(_.bind(null,ge))},c);ue.enter().append("path").classed(p.cn.sankeyLink,!0).call(U,se,Q.linkEvents),ue.style("stroke",function(ge){return O(ge)?t.tinyRGB(s(ge.linkLineColor)):ge.tinyColorHue}).style("stroke-opacity",function(ge){return O(ge)?t.opacity(ge.linkLineColor):ge.tinyColorAlpha}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}).style("stroke-width",function(ge){return O(ge)?ge.linkLineWidth:1}).attr("d",f()),ue.style("opacity",function(){return j._context.staticPlot||K||Y?1:0}).transition().ease(p.ease).duration(p.duration).style("opacity",1),ue.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var ve=se.selectAll("."+p.cn.sankeyNodeSet).data(h,c);ve.enter().append("g").classed(p.cn.sankeyNodeSet,!0),ve.style("cursor",function(ge){switch(ge.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ye=ve.selectAll("."+p.cn.sankeyNode).data(function(ge){var ke=ge.graph.nodes;return function(Ee){var me,oe=[];for(me=0;me<Ee.length;me++)Ee[me].originalX=(Ee[me].x0+Ee[me].x1)/2,Ee[me].originalY=(Ee[me].y0+Ee[me].y1)/2,oe.indexOf(Ee[me].originalX)===-1&&oe.push(Ee[me].originalX);for(oe.sort(function(re,fe){return re-fe}),me=0;me<Ee.length;me++)Ee[me].originalLayerIndex=oe.indexOf(Ee[me].originalX),Ee[me].originalLayer=Ee[me].originalLayerIndex/(oe.length-1)}(ke),ke.map(S.bind(null,ge))},c);ye.enter().append("g").classed(p.cn.sankeyNode,!0).call(w).style("opacity",function(ge){return!j._context.staticPlot&&!K||ge.partOfGroup?0:1}),ye.call(U,se,Q.nodeEvents).call(D,ue,Q,j),ye.transition().ease(p.ease).duration(p.duration).call(w).style("opacity",function(ge){return ge.partOfGroup?0:1}),ye.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var de=ye.selectAll("."+p.cn.nodeRect).data(h);de.enter().append("rect").classed(p.cn.nodeRect,!0).call(C),de.style("stroke-width",function(ge){return ge.nodeLineWidth}).style("stroke",function(ge){return t.tinyRGB(s(ge.nodeLineColor))}).style("stroke-opacity",function(ge){return t.opacity(ge.nodeLineColor)}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}),de.transition().ease(p.ease).duration(p.duration).call(C);var pe=ye.selectAll("."+p.cn.nodeLabel).data(h);pe.enter().append("text").classed(p.cn.nodeLabel,!0).style("cursor","default"),pe.attr("data-notex",1).text(function(ge){return ge.node.label}).each(function(ge){var ke=o.select(this);i.font(ke,ge.textFont),x.convertToTspans(ke,j)}).attr("text-anchor",function(ge){return ge.horizontal&&ge.left?"end":"start"}).attr("transform",function(ge){var ke=o.select(this),Ee=x.lineCount(ke),me=ge.textFont.size*((Ee-1)*y-g),oe=ge.nodeLineWidth/2+3,re=((ge.horizontal?ge.visibleHeight:ge.visibleWidth)-me)/2;ge.horizontal&&(ge.left?oe=-oe:oe+=ge.visibleWidth);var fe=ge.horizontal?"":"scale(-1,1)"+a(90);return r(ge.horizontal?oe:re,ge.horizontal?re:oe)+fe}),pe.transition().ease(p.ease).duration(p.duration)}},81128:function(X){"use strict";X.exports=function(I,e){for(var A=[],k=I.cd[0].trace,o=k._sankey.graph.nodes,T=0;T<o.length;T++){var b=o[T];if(!b.partOfGroup){var p=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&p.reverse(),e&&e.contains(p,!1,T,I)&&A.push({pointNumber:b.pointNumber})}}return A}},20148:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;A.mergeArray(o.text,k,"tx"),A.mergeArray(o.texttemplate,k,"txt"),A.mergeArray(o.hovertext,k,"htx"),A.mergeArray(o.customdata,k,"data"),A.mergeArray(o.textposition,k,"tp"),o.textfont&&(A.mergeArrayCastPositive(o.textfont.size,k,"ts"),A.mergeArray(o.textfont.color,k,"tc"),A.mergeArray(o.textfont.family,k,"tf"),A.mergeArray(o.textfont.weight,k,"tw"),A.mergeArray(o.textfont.style,k,"ty"),A.mergeArray(o.textfont.variant,k,"tv"),A.mergeArray(o.textfont.textcase,k,"tC"),A.mergeArray(o.textfont.lineposition,k,"tE"),A.mergeArray(o.textfont.shadow,k,"tS"));var b=o.marker;if(b){A.mergeArrayCastPositive(b.size,k,"ms"),A.mergeArrayCastPositive(b.opacity,k,"mo"),A.mergeArray(b.symbol,k,"mx"),A.mergeArray(b.angle,k,"ma"),A.mergeArray(b.standoff,k,"mf"),A.mergeArray(b.color,k,"mc");var p=b.line;b.line&&(A.mergeArray(p.color,k,"mlc"),A.mergeArrayCastPositive(p.width,k,"mlw"));var s=b.gradient;s&&s.type!=="none"&&(A.mergeArray(s.type,k,"mgt"),A.mergeArray(s.color,k,"mgc"))}}},52904:function(X,I,e){"use strict";var A=e(29736).axisHoverFormat,k=e(21776).Gw,o=e(21776).Ks,T=e(49084),b=e(25376),p=e(98192).u,s=e(98192).c,t=e(43616),i=e(88200),n=e(92880).extendFlat,r=e(98304);X.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:A("x"),yhoverformat:A("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},p,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:r(!0),fillgradient:n({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:s,marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(54460),T=e(1220),b=e(39032).BADNUM,p=e(43028),s=e(90136),t=e(20148),i=e(4500);function n(h,u,x,d,m,g,y){var v=u._length,_=h._fullLayout,f=x._id,S=d._id,w=_._firstScatter[l(u)]===u.uid,E=(c(u,_,x,d)||{}).orientation,P=u.fill;x._minDtick=0,d._minDtick=0;var C={padded:!0},O={padded:!0};y&&(C.ppad=O.ppad=y);var R=v<2||m[0]!==m[v-1]||g[0]!==g[v-1];R&&(P==="tozerox"||P==="tonextx"&&(w||E==="h"))?C.tozero=!0:(u.error_y||{}).visible||P!=="tonexty"&&P!=="tozeroy"&&(p.hasMarkers(u)||p.hasText(u))||(C.padded=!1,C.ppad=0),R&&(P==="tozeroy"||P==="tonexty"&&(w||E==="v"))?O.tozero=!0:P!=="tonextx"&&P!=="tozerox"||(O.padded=!1),f&&(u._extremes[f]=o.findExtremes(x,m,C)),S&&(u._extremes[S]=o.findExtremes(d,g,O))}function r(h,u){if(p.hasMarkers(h)){var x,d=h.marker,m=1.6*(h.marker.sizeref||1);if(x=h.marker.sizemode==="area"?function(f){return Math.max(Math.sqrt((f||0)/m),3)}:function(f){return Math.max((f||0)/m,3)},k.isArrayOrTypedArray(d.size)){var g={type:"linear"};o.setConvert(g);for(var y=g.makeCalcdata(h.marker,"size"),v=new Array(u),_=0;_<u;_++)v[_]=x(y[_]);return v}return x(d.size)}}function a(h,u){var x=l(u),d=h._firstScatter;d[x]||(d[x]=u.uid)}function l(h){var u=h.stackgroup;return h.xaxis+h.yaxis+h.type+(u?"-"+u:"")}function c(h,u,x,d){var m=h.stackgroup;if(m){var g=u._scatterStackOpts[x._id+d._id][m],y=g.orientation==="v"?d:x;return y.type==="linear"||y.type==="log"?g:void 0}}X.exports={calc:function(h,u){var x,d,m,g,y,v,_=h._fullLayout,f=u._xA=o.getFromId(h,u.xaxis||"x","x"),S=u._yA=o.getFromId(h,u.yaxis||"y","y"),w=f.makeCalcdata(u,"x"),E=S.makeCalcdata(u,"y"),P=T(u,f,"x",w),C=T(u,S,"y",E),O=P.vals,R=C.vals,U=u._length,D=new Array(U),N=u.ids,W=c(u,_,f,S),F=!1;a(_,u);var j,q="x",te="y";W?(k.pushUnique(W.traceIndices,u._expandedIndex),(x=W.orientation==="v")?(te="s",j="x"):(q="s",j="y"),y=W.stackgaps==="interpolate"):n(h,u,f,S,O,R,r(u,U));var ee=!!u.xperiodalignment,Q=!!u.yperiodalignment;for(d=0;d<U;d++){var J=D[d]={},K=A(O[d]),Y=A(R[d]);K&&Y?(J[q]=O[d],J[te]=R[d],ee&&(J.orig_x=w[d],J.xEnd=P.ends[d],J.xStart=P.starts[d]),Q&&(J.orig_y=E[d],J.yEnd=C.ends[d],J.yStart=C.starts[d])):W&&(x?K:Y)?(J[j]=x?O[d]:R[d],J.gap=!0,y?(J.s=b,F=!0):J.s=0):J[q]=J[te]=b,N&&(J.id=String(N[d]))}if(t(D,u),s(h,u),i(D,u),W){for(d=0;d<D.length;)D[d][j]===b?D.splice(d,1):d++;if(k.sort(D,function(ue,ve){return ue[j]-ve[j]||ue.i-ve.i}),F){for(d=0;d<D.length-1&&D[d].gap;)d++;for((v=D[d].s)||(v=D[d].s=0),m=0;m<d;m++)D[m].s=v;for(g=D.length-1;g>d&&D[g].gap;)g--;for(v=D[g].s,m=D.length-1;m>g;m--)D[m].s=v;for(;d<g;)if(D[++d].gap){for(m=d+1;D[m].gap;)m++;for(var ie=D[d-1][j],se=D[d-1].s,ae=(D[m].s-se)/(D[m][j]-ie);d<m;)D[d].s=se+(D[d][j]-ie)*ae,d++}}}return D},calcMarkerSize:r,calcAxisExpansion:n,setFirstScatter:a,getStackOpts:c}},4500:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){A.isArrayOrTypedArray(o.selectedpoints)&&A.tagSelected(k,o)}},90136:function(X,I,e){"use strict";var A=e(94288).hasColorscale,k=e(47128),o=e(43028);X.exports=function(T,b){o.hasLines(b)&&A(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(b)&&(A(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),A(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(X){"use strict";X.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(X,I,e){"use strict";var A=e(16356),k=e(96376).setGroupPositions;function o(T,b,p,s,t,i,n){t[s]=!0;var r={i:null,gap:!0,s:0};if(r[n]=p,T.splice(b,0,r),b&&p===T[b-1][n]){var a=T[b-1];r.s=a.s,r.i=a.i,r.gap=a.gap}else i&&(r.s=function(l,c,h,u){var x=l[c-1],d=l[c+1];return d?x?x.s+(d.s-x.s)*(h-x[u])/(d[u]-x[u]):d.s:x.s}(T,b,p,n));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}X.exports=function(T,b){T._fullLayout.scattermode==="group"&&function(j,q){for(var te=q.xaxis,ee=q.yaxis,Q=j._fullLayout,J=j._fullData,K=j.calcdata,Y=[],ie=[],se=0;se<J.length;se++){var ae=J[se];ae.visible===!0&&ae.type==="scatter"&&ae.xaxis===te._id&&ae.yaxis===ee._id&&(ae.orientation==="h"?Y.push(K[se]):ae.orientation==="v"&&ie.push(K[se]))}var ue={mode:Q.scattermode,gap:Q.scattergap};k(j,te,ee,ie,ue),k(j,ee,te,Y,ue)}(T,b);var p=b.xaxis,s=b.yaxis,t=p._id+s._id,i=T._fullLayout._scatterStackOpts[t];if(i){var n,r,a,l,c,h,u,x,d,m,g,y,v,_,f,S=T.calcdata;for(var w in i){var E=(m=i[w]).traceIndices;if(E.length){for(g=m.stackgaps==="interpolate",y=m.groupnorm,m.orientation==="v"?(v="x",_="y"):(v="y",_="x"),f=new Array(E.length),n=0;n<f.length;n++)f[n]=!1;h=S[E[0]];var P=new Array(h.length);for(n=0;n<h.length;n++)P[n]=h[n][v];for(n=1;n<E.length;n++){for(c=S[E[n]],r=a=0;r<c.length;r++){for(u=c[r][v];u>P[a]&&a<P.length;a++)o(c,r,P[a],n,f,g,v),r++;if(u!==P[a]){for(l=0;l<n;l++)o(S[E[l]],a,u,l,f,g,v);P.splice(a,0,u)}a++}for(;a<P.length;a++)o(c,r,P[a],n,f,g,v),r++}var C=P.length;for(r=0;r<h.length;r++){for(x=h[r][_]=h[r].s,n=1;n<E.length;n++)(c=S[E[n]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=C,x+=c[r].s,c[r][_]=x;if(y)for(d=(y==="fraction"?x:x/100)||1,n=0;n<E.length;n++){var O=S[E[n]][r];O[_]/=d,O.sNorm=O.s/d}}for(n=0;n<E.length;n++){var R=(c=S[E[n]])[0].trace,U=A.calcMarkerSize(R,R._rawLength),D=Array.isArray(U);if(U&&f[n]||D){var N=U;for(U=new Array(C),r=0;r<C;r++)U[r]=c[r].gap?0:D?N[c[r].i]:N}var W=new Array(C),F=new Array(C);for(r=0;r<C;r++)W[r]=c[r].x,F[r]=c[r].y;A.calcAxisExpansion(T,R,p,s,W,F,U),c[0].t.orientation=m.orientation}}}}}},35036:function(X,I,e){"use strict";var A=e(3400),k=e(20011),o=e(52904);X.exports=function(T,b){var p,s,t;function i(c){return A.coerce(s._input,s,o,c)}if(b.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(p=s._input,k(p,s,b,i));for(t=0;t<T.length;t++){var n=T[t];if(n.type==="scatter"){var r=n.fill;if(r!=="none"&&r!=="toself"&&(n.opacity=void 0,r==="tonexty"||r==="tonextx"))for(var a=t-1;a>=0;a--){var l=T[a];if(l.type==="scatter"&&l.xaxis===n.xaxis&&l.yaxis===n.yaxis){l.opacity=void 0;break}}}}}},18800:function(X,I,e){"use strict";var A=e(3400),k=e(24040),o=e(52904),T=e(88200),b=e(43028),p=e(43980),s=e(31147),t=e(43912),i=e(74428),n=e(66828),r=e(11731),a=e(124),l=e(70840),c=e(3400).coercePattern;X.exports=function(h,u,x,d){function m(E,P){return A.coerce(h,u,o,E,P)}var g=p(h,u,d,m);if(g||(u.visible=!1),u.visible){s(h,u,d,m),m("xhoverformat"),m("yhoverformat"),m("zorder");var y=t(h,u,d,m);d.scattermode==="group"&&u.orientation===void 0&&m("orientation","v");var v=!y&&g<T.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("mode",v),b.hasMarkers(u)&&i(h,u,x,d,m,{gradient:!0}),b.hasLines(u)&&(n(h,u,x,d,m,{backoff:!0}),r(h,u,m),m("connectgaps"),m("line.simplify")),b.hasText(u)&&(m("texttemplate"),a(h,u,d,m));var _=[];(b.hasMarkers(u)||b.hasText(u))&&(m("cliponaxis"),m("marker.maxdisplayed"),_.push("points")),m("fill",y?y.fillDflt:"none"),u.fill!=="none"&&(l(h,u,x,m,{moduleHasFillgradient:!0}),b.hasLines(u)||r(h,u,m),c(m,"fillpattern",u.fillcolor,!1));var f=(u.line||{}).color,S=(u.marker||{}).color;u.fill!=="tonext"&&u.fill!=="toself"||_.push("fills"),m("hoveron",_.join("+")||"points"),u.hoveron!=="fills"&&m("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(h,u,f||S||x,{axis:"y"}),w(h,u,f||S||x,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(u,m)}}},98304:function(X){"use strict";X.exports=function(I){return{valType:"color",editType:"style",anim:!0}}},70840:function(X,I,e){"use strict";var A=e(76308),k=e(3400).isArrayOrTypedArray;X.exports=function(o,T,b,p,s){s||(s={});var t,i=!1;if(T.marker){var n=T.marker.color,r=(T.marker.line||{}).color;n&&!k(n)?i=n:r&&!k(r)&&(i=r)}if(s.moduleHasFillgradient&&p("fillgradient.type")!=="none"){p("fillgradient.start"),p("fillgradient.stop");var a=p("fillgradient.colorscale");a&&(t=function(l){for(var c=A.interpolate(l[0][1],l[1][1],.5),h=2;h<l.length;h++){var u=A.interpolate(l[h-1][1],l[h][1],.5);c=A.interpolate(c,u,l[h-1][0]/l[h][0])}return c}(a))}p("fillcolor",A.addOpacity((T.line||{}).color||i||t||b,.5))}},76688:function(X,I,e){"use strict";var A=e(54460);X.exports=function(k,o,T){var b={},p={_fullLayout:T},s=A.getFromTrace(p,o,"x"),t=A.getFromTrace(p,o,"y"),i=k.orig_x;i===void 0&&(i=k.x);var n=k.orig_y;return n===void 0&&(n=k.y),b.xLabel=A.tickText(s,s.c2l(i),!0).text,b.yLabel=A.tickText(t,t.c2l(n),!0).text,b}},44928:function(X,I,e){"use strict";var A=e(76308),k=e(43028);X.exports=function(o,T){var b,p;if(o.mode==="lines")return(b=o.line.color)&&A.opacity(b)?b:o.fillcolor;if(o.mode==="none")return o.fill?o.fillcolor:"";var s=T.mcc||(o.marker||{}).color,t=T.mlcc||((o.marker||{}).line||{}).color;return(p=s&&A.opacity(s)?s:t&&A.opacity(t)&&(T.mlw||((o.marker||{}).line||{}).width)?t:"")?A.opacity(p)<.3?A.addOpacity(p,.3):p:(b=(o.line||{}).color)&&A.opacity(b)&&k.hasLines(o)&&o.line.width?b:o.fillcolor}},20011:function(X,I,e){"use strict";var A=e(71888).getAxisGroup;X.exports=function(k,o,T,b){var p=o.orientation,s=o[{v:"x",h:"y"}[p]+"axis"],t=A(T,s)+p,i=T._alignmentOpts||{},n=b("alignmentgroup"),r=i[t];r||(r=i[t]={});var a=r[n];a?a.traces.push(o):a=r[n]={traces:[o],alignmentIndex:Object.keys(r).length,offsetGroups:{}};var l=b("offsetgroup"),c=a.offsetGroups,h=c[l];l&&(h||(h=c[l]={offsetIndex:Object.keys(c).length}),o._offsetIndex=h.offsetIndex)}},98723:function(X,I,e){"use strict";var A=e(3400),k=e(93024),o=e(24040),T=e(44928),b=e(76308),p=A.fillText;X.exports=function(s,t,i,n){var r=s.cd,a=r[0].trace,l=s.xa,c=s.ya,h=l.c2p(t),u=c.c2p(i),x=[h,u],d=a.hoveron||"",m=a.mode.indexOf("markers")!==-1?3:.5,g=!!a.xperiodalignment,y=!!a.yperiodalignment;if(d.indexOf("points")!==-1){var v=function(W){var F=Math.max(m,W.mrc||0),j=l.c2p(W.x)-h,q=c.c2p(W.y)-u;return Math.max(Math.sqrt(j*j+q*q)-F,1-m/F)},_=k.getDistanceFunction(n,function(W){if(g){var F=l.c2p(W.xStart),j=l.c2p(W.xEnd);return h>=Math.min(F,j)&&h<=Math.max(F,j)?0:1/0}var q=Math.max(3,W.mrc||0),te=1-1/q,ee=Math.abs(l.c2p(W.x)-h);return ee<q?te*ee/q:ee-q+te},function(W){if(y){var F=c.c2p(W.yStart),j=c.c2p(W.yEnd);return u>=Math.min(F,j)&&u<=Math.max(F,j)?0:1/0}var q=Math.max(3,W.mrc||0),te=1-1/q,ee=Math.abs(c.c2p(W.y)-u);return ee<q?te*ee/q:ee-q+te},v);if(k.getClosest(r,_,s),s.index!==!1){var f=r[s.index],S=l.c2p(f.x,!0),w=c.c2p(f.y,!0),E=f.mrc||1;s.index=f.i;var P=r[0].t.orientation,C=P&&(f.sNorm||f.s),O=P==="h"?C:f.orig_x!==void 0?f.orig_x:f.x,R=P==="v"?C:f.orig_y!==void 0?f.orig_y:f.y;return A.extendFlat(s,{color:T(a,f),x0:S-E,x1:S+E,xLabelVal:O,y0:w-E,y1:w+E,yLabelVal:R,spikeDistance:v(f),hovertemplate:a.hovertemplate}),p(f,a,s),o.getComponentMethod("errorbars","hoverInfo")(f,a,s),[s]}}function U(W){if(!W)return!1;var F=W.node();try{var j=new DOMPoint(x[0],x[1]);return F.isPointInFill(j)}catch{var q=F.ownerSVGElement.createSVGPoint();return q.x=x[0],q.y=x[1],F.isPointInFill(q)}}if(d.indexOf("fills")!==-1&&a._fillElement&&U(a._fillElement)&&!U(a._fillExclusionElement)){var D=function(W){var F,j,q,te,ee,Q,J,K,Y,ie=[],se=1/0,ae=-1/0,ue=1/0,ve=-1/0;for(F=0;F<W.length;F++){var ye=W[F];ye.contains(x)&&(ie.push(ye),ue=Math.min(ue,ye.ymin),ve=Math.max(ve,ye.ymax))}if(ie.length===0)return null;for(j=((ue=Math.max(ue,0))+(ve=Math.min(ve,c._length)))/2,F=0;F<ie.length;F++)for(te=ie[F].pts,q=1;q<te.length;q++)(K=te[q-1][1])>j!=(Y=te[q][1])>=j&&(Q=te[q-1][0],J=te[q][0],Y-K&&(ee=Q+(J-Q)*(j-K)/(Y-K),se=Math.min(se,ee),ae=Math.max(ae,ee)));return{x0:se=Math.max(se,0),x1:ae=Math.min(ae,l._length),y0:j,y1:j}}(a._polygons);D===null&&(D={x0:x[0],x1:x[0],y0:x[1],y1:x[1]});var N=b.defaultLine;return b.opacity(a.fillcolor)?N=a.fillcolor:b.opacity((a.line||{}).color)&&(N=a.line.color),A.extendFlat(s,{distance:s.maxHoverDistance,x0:D.x0,x1:D.x1,y0:D.y0,y1:D.y1,color:N,hovertemplate:!1}),delete s.index,a.text&&!A.isArrayOrTypedArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}},65875:function(X,I,e){"use strict";var A=e(43028);X.exports={hasLines:A.hasLines,hasMarkers:A.hasMarkers,hasText:A.hasText,isBubble:A.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(X){"use strict";X.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(X,I,e){"use strict";var A=e(3400),k=e(55308);X.exports=function(o,T){var b,p=T.barmode==="group";T.scattermode==="group"&&(b=p?T.bargap:.2,A.coerce(o,T,k,"scattergap",b))}},66828:function(X,I,e){"use strict";var A=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,o=e(27260);X.exports=function(T,b,p,s,t,i){i||(i={});var n=(T.marker||{}).color;n&&n._inputArray&&(n=n._inputArray),t("line.color",p),k(T,"line")?o(T,b,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!A(n)&&n||p),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(X,I,e){"use strict";var A=e(43616),k=e(39032),o=k.BADNUM,T=k.LOG_CLIP,b=T+.5,p=T-.5,s=e(3400),t=s.segmentsIntersect,i=s.constrain,n=e(88200);X.exports=function(r,a){var l,c,h,u,x,d,m,g,y,v,_,f,S,w,E,P,C,O,R=a.trace||{},U=a.xaxis,D=a.yaxis,N=U.type==="log",W=D.type==="log",F=U._length,j=D._length,q=a.backoff,te=R.marker,ee=a.connectGaps,Q=a.baseTolerance,J=a.shape,K=J==="linear",Y=R.fill&&R.fill!=="none",ie=[],se=n.minTolerance,ae=r.length,ue=new Array(ae),ve=0;function ye(At){var qe=r[At];if(!qe)return!1;var Ye=a.linearized?U.l2p(qe.x):U.c2p(qe.x),Ne=a.linearized?D.l2p(qe.y):D.c2p(qe.y);if(Ye===o){if(N&&(Ye=U.c2p(qe.x,!0)),Ye===o)return!1;W&&Ne===o&&(Ye*=Math.abs(U._m*j*(U._m>0?b:p)/(D._m*F*(D._m>0?b:p)))),Ye*=1e3}if(Ne===o){if(W&&(Ne=D.c2p(qe.y,!0)),Ne===o)return!1;Ne*=1e3}return[Ye,Ne]}function de(At,qe,Ye,Ne){var We=Ye-At,at=Ne-qe,tt=.5-At,Re=.5-qe,Fe=We*We+at*at,nt=We*tt+at*Re;if(nt>0&&nt<Fe){var Ge=tt*at-Re*We;if(Ge*Ge<Fe)return!0}}function pe(At,qe){var Ye=At[0]/F,Ne=At[1]/j,We=Math.max(0,-Ye,Ye-1,-Ne,Ne-1);return We&&C!==void 0&&de(Ye,Ne,C,O)&&(We=0),We&&qe&&de(Ye,Ne,qe[0]/F,qe[1]/j)&&(We=0),(1+n.toleranceGrowth*We)*Q}function ge(At,qe){var Ye=At[0]-qe[0],Ne=At[1]-qe[1];return Math.sqrt(Ye*Ye+Ne*Ne)}var ke,Ee,me,oe,re,fe,Se,be=n.maxScreensAway,we=-F*be,Me=F*(1+be),Ie=-j*be,Oe=j*(1+be),he=[[we,Ie,Me,Ie],[Me,Ie,Me,Oe],[Me,Oe,we,Oe],[we,Oe,we,Ie]];function _e(At){if(At[0]<we||At[0]>Me||At[1]<Ie||At[1]>Oe)return[i(At[0],we,Me),i(At[1],Ie,Oe)]}function Ae(At,qe){return At[0]===qe[0]&&(At[0]===we||At[0]===Me)||At[1]===qe[1]&&(At[1]===Ie||At[1]===Oe)||void 0}function De(At,qe,Ye){return function(Ne,We){var at=_e(Ne),tt=_e(We),Re=[];if(at&&tt&&Ae(at,tt))return Re;at&&Re.push(at),tt&&Re.push(tt);var Fe=2*s.constrain((Ne[At]+We[At])/2,qe,Ye)-((at||Ne)[At]+(tt||We)[At]);return Fe&&((at&&tt?Fe>0==at[At]>tt[At]?at:tt:at||tt)[At]+=Fe),Re}}function Le(At){var qe=At[0],Ye=At[1],Ne=qe===ue[ve-1][0],We=Ye===ue[ve-1][1];if(!Ne||!We)if(ve>1){var at=qe===ue[ve-2][0],tt=Ye===ue[ve-2][1];Ne&&(qe===we||qe===Me)&&at?tt?ve--:ue[ve-1]=At:We&&(Ye===Ie||Ye===Oe)&&tt?at?ve--:ue[ve-1]=At:ue[ve++]=At}else ue[ve++]=At}function Be(At){ue[ve-1][0]!==At[0]&&ue[ve-1][1]!==At[1]&&Le([me,oe]),Le(At),re=null,me=oe=0}J==="linear"||J==="spline"?Se=function(At,qe){for(var Ye=[],Ne=0,We=0;We<4;We++){var at=he[We],tt=t(At[0],At[1],qe[0],qe[1],at[0],at[1],at[2],at[3]);tt&&(!Ne||Math.abs(tt.x-Ye[0][0])>1||Math.abs(tt.y-Ye[0][1])>1)&&(tt=[tt.x,tt.y],Ne&&ge(tt,At)<ge(Ye[0],At)?Ye.unshift(tt):Ye.push(tt),Ne++)}return Ye}:J==="hv"||J==="vh"?Se=function(At,qe){var Ye=[],Ne=_e(At),We=_e(qe);return Ne&&We&&Ae(Ne,We)||(Ne&&Ye.push(Ne),We&&Ye.push(We)),Ye}:J==="hvh"?Se=De(0,we,Me):J==="vhv"&&(Se=De(1,Ie,Oe));var Ve=s.isArrayOrTypedArray(te);function Ze(At){if(At&&q&&(At.i=l,At.d=r,At.trace=R,At.marker=Ve?te[At.i]:te,At.backoff=q),C=At[0]/F,O=At[1]/j,ke=At[0]<we?we:At[0]>Me?Me:0,Ee=At[1]<Ie?Ie:At[1]>Oe?Oe:0,ke||Ee){if(ve)if(re){var qe=Se(re,At);qe.length>1&&(Be(qe[0]),ue[ve++]=qe[1])}else fe=Se(ue[ve-1],At)[0],ue[ve++]=fe;else ue[ve++]=[ke||At[0],Ee||At[1]];var Ye=ue[ve-1];ke&&Ee&&(Ye[0]!==ke||Ye[1]!==Ee)?(re&&(me!==ke&&oe!==Ee?Le(me&&oe?(Ne=re,at=(We=At)[0]-Ne[0],tt=(We[1]-Ne[1])/at,(Ne[1]*We[0]-We[1]*Ne[0])/at>0?[tt>0?we:Me,Oe]:[tt>0?Me:we,Ie]):[me||ke,oe||Ee]):me&&oe&&Le([me,oe])),Le([ke,Ee])):me-ke&&oe-Ee&&Le([ke||me,Ee||oe]),re=At,me=ke,oe=Ee}else re&&Be(Se(re,At)[0]),ue[ve++]=At;var Ne,We,at,tt}for(l=0;l<ae;l++)if(c=ye(l)){for(ve=0,re=null,Ze(c),l++;l<ae;l++){if(!(u=ye(l))){if(ee)continue;break}if(K&&a.simplify){var rt=ye(l+1);if(v=ge(u,c),Y&&(ve===0||ve===ae-1)||!(v<pe(u,rt)*se)){for(g=[(u[0]-c[0])/v,(u[1]-c[1])/v],x=c,_=v,f=w=E=0,m=!1,h=u,l++;l<r.length;l++){if(d=rt,rt=ye(l+1),!d){if(ee)continue;break}if(P=(y=[d[0]-c[0],d[1]-c[1]])[0]*g[1]-y[1]*g[0],w=Math.min(w,P),(E=Math.max(E,P))-w>pe(d,rt))break;h=d,(S=y[0]*g[0]+y[1]*g[1])>_?(_=S,u=d,m=!1):S<f&&(f=S,x=d,m=!0)}if(m?(Ze(u),h!==x&&Ze(x)):(x!==c&&Ze(x),h!==u&&Ze(u)),Ze(h),l>=r.length||!d)break;Ze(d),c=d}}else Ze(u)}re&&Le([me||re[0],oe||re[1]]),ie.push(ue.slice(0,ve))}var it=J.slice(J.length-1);if(q&&it!=="h"&&it!=="v"){for(var dt=!1,mt=-1,ht=[],Qe=0;Qe<ie.length;Qe++)for(var Je=0;Je<ie[Qe].length-1;Je++){var wt=ie[Qe][Je],Pt=ie[Qe][Je+1],It=A.applyBackoff(Pt,wt);It[0]===Pt[0]&&It[1]===Pt[1]||(dt=!0),ht[mt+1]||(ht[++mt]=[wt,[It[0],It[1]]])}return dt?ht:ie}return ie}},11731:function(X){"use strict";X.exports=function(I,e,A){A("line.shape")==="spline"&&A("line.smoothing")}},14328:function(X){"use strict";var I={tonextx:1,tonexty:1,tonext:1};X.exports=function(e,A,k){var o,T,b,p,s,t={},i=!1,n=-1,r=0,a=-1;for(T=0;T<k.length;T++)(b=(o=k[T][0].trace).stackgroup||"")?b in t?s=t[b]:(s=t[b]=r,r++):o.fill in I&&a>=0?s=a:(s=a=r,r++),s<n&&(i=!0),o._groupIndex=n=s;var l=k.slice();i&&l.sort(function(h,u){var x=h[0].trace,d=u[0].trace;return x._groupIndex-d._groupIndex||x.index-d.index});var c={};for(T=0;T<l.length;T++)b=(o=l[T][0].trace).stackgroup||"",o.visible===!0?(o._nexttrace=null,o.fill in I&&(p=c[b],o._prevtrace=p||null,p&&(p._nexttrace=o)),o._ownfill=o.fill&&(o.fill.substr(0,6)==="tozero"||o.fill==="toself"||o.fill.substr(0,2)==="to"&&!o._prevtrace),c[b]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return l}},7152:function(X,I,e){"use strict";var A=e(38248);X.exports=function(k,o){o||(o=2);var T=k.marker,b=T.sizeref||1,p=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var i=s(t/o);return A(i)&&i>0?Math.max(i,p):0}}},5528:function(X){"use strict";X.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(X,I,e){"use strict";var A=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(43028);X.exports=function(b,p,s,t,i,n){var r=T.isBubble(b),a=(b.line||{}).color;n=n||{},a&&(s=a),i("marker.symbol"),i("marker.opacity",r?.7:1),i("marker.size"),n.noAngle||(i("marker.angle"),n.noAngleRef||i("marker.angleref"),n.noStandOff||i("marker.standoff")),i("marker.color",s),k(b,"marker")&&o(b,p,t,i,{prefix:"marker.",cLetter:"c"}),n.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),n.noLine||(i("marker.line.color",a&&!Array.isArray(a)&&p.marker.color!==a?a:r?A.background:A.defaultLine),k(b,"marker.line")&&o(b,p,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",r?1:0)),r&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),n.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},31147:function(X,I,e){"use strict";var A=e(3400).dateTick0,k=e(39032).ONEWEEK;function o(T,b){return A(b,T%k==0?1:0)}X.exports=function(T,b,p,s,t){if(t||(t={x:!0,y:!0}),t.x){var i=s("xperiod");i&&(s("xperiod0",o(i,b.xcalendar)),s("xperiodalignment"))}if(t.y){var n=s("yperiod");n&&(s("yperiod0",o(n,b.ycalendar)),s("yperiodalignment"))}}},96504:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(3400),T=o.ensureSingle,b=o.identity,p=e(43616),s=e(43028),t=e(52340),i=e(14328),n=e(92065).tester;function r(a,l,c,h,u,x,d){var m,g=a._context.staticPlot;(function(Le,Be,Ve,Ze,rt){var it=Ve.xaxis,dt=Ve.yaxis,mt=A.extent(o.simpleMap(it.range,it.r2c)),ht=A.extent(o.simpleMap(dt.range,dt.r2c)),Qe=Ze[0].trace;if(s.hasMarkers(Qe)){var Je=Qe.marker.maxdisplayed;if(Je!==0){var wt=Ze.filter(function(qe){return qe.x>=mt[0]&&qe.x<=mt[1]&&qe.y>=ht[0]&&qe.y<=ht[1]}),Pt=Math.ceil(wt.length/Je),It=0;rt.forEach(function(qe,Ye){var Ne=qe[0].trace;s.hasMarkers(Ne)&&Ne.marker.maxdisplayed>0&&Ye<Be&&It++});var At=Math.round(It*Pt/3+Math.floor(It/3)*Pt/7.1);Ze.forEach(function(qe){delete qe.vis}),wt.forEach(function(qe,Ye){Math.round((Ye+At)%Pt)===0&&(qe.vis=!0)})}}})(0,l,c,h,u);var y=!!d&&d.duration>0;function v(Le){return y?Le.transition():Le}var _=c.xaxis,f=c.yaxis,S=h[0].trace,w=S.line,E=A.select(x),P=T(E,"g","errorbars"),C=T(E,"g","lines"),O=T(E,"g","points"),R=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,P,c,d),S.visible===!0){var U,D;v(E).style("opacity",S.opacity);var N,W,F=S.fill.charAt(S.fill.length-1);F!=="x"&&F!=="y"&&(F=""),F==="y"?(N=1,W=f.c2p(0,!0)):F==="x"&&(N=0,W=_.c2p(0,!0)),h[0][c.isRangePlot?"nodeRangePlot3":"node3"]=E;var j,q,te="",ee=[],Q=S._prevtrace,J=null,K=null;Q&&(te=Q._prevRevpath||"",D=Q._nextFill,ee=Q._ownPolygons,J=Q._fillsegments,K=Q._fillElement);var Y,ie,se,ae,ue,ve,ye="",de="",pe=[];S._polygons=[];var ge=[],ke=[],Ee=o.noop;if(U=S._ownFill,s.hasLines(S)||S.fill!=="none"){D&&D.datum(h),["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1?(Y=p.steps(w.shape),ie=p.steps(w.shape.split("").reverse().join(""))):Y=ie=w.shape==="spline"?function(Le){var Be=Le[Le.length-1];return Le.length>1&&Le[0][0]===Be[0]&&Le[0][1]===Be[1]?p.smoothclosed(Le.slice(1),w.smoothing):p.smoothopen(Le,w.smoothing)}:function(Le){return"M"+Le.join("L")},se=function(Le){return ie(Le.reverse())},ke=t(h,{xaxis:_,yaxis:f,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:S.fill}),ge=new Array(ke.length);var me=0;for(m=0;m<ke.length;m++){var oe,re=ke[m];oe&&F?oe.push.apply(oe,re):(oe=re.slice(),ge[me]=oe,me++)}S._fillElement=null,S._fillExclusionElement=K,S._fillsegments=ge.slice(0,me),ge=S._fillsegments,ke.length&&(ae=ke[0][0].slice(),ve=(ue=ke[ke.length-1])[ue.length-1].slice()),Ee=function(Le){return function(Be){if(j=Y(Be),q=se(Be),ye?F?(ye+="L"+j.substr(1),de=q+"L"+de.substr(1)):(ye+="Z"+j,de=q+"Z"+de):(ye=j,de=q),s.hasLines(S)){var Ve=A.select(this);if(Ve.datum(h),Le)v(Ve.style("opacity",0).attr("d",j).call(p.lineGroupStyle)).style("opacity",1);else{var Ze=v(Ve);Ze.attr("d",j),p.singleLineStyle(h,Ze)}}}}}var fe=C.selectAll(".js-line").data(ke);v(fe.exit()).style("opacity",0).remove(),fe.each(Ee(!1)),fe.enter().append("path").classed("js-line",!0).style("vector-effect",g?"none":"non-scaling-stroke").call(p.lineGroupStyle).each(Ee(!0)),p.setClipUrl(fe,c.layerClipId,a);var Se=function(){var Le=new Array(ge.length);for(m=0;m<ge.length;m++)Le[m]=n(ge[m]);return Le},be=function(Le){var Be,Ve;if(Le&&Le.length!==0){for(Be=new Array(Le.length-1+ge.length),Ve=0;Ve<Le.length-1;Ve++)Be[Ve]=n(Le[Ve]);var Ze=Le[Le.length-1].slice();for(Ze.reverse(),Ve=0;Ve<ge.length;Ve++)Be[Le.length-1+Ve]=n(ge[Ve].concat(Ze))}else for(Be=new Array(ge.length),Ve=0;Ve<ge.length;Ve++){var rt=ge[Ve][0].slice(),it=ge[Ve][ge[Ve].length-1].slice();rt[N]=it[N]=W;var dt=[it,rt].concat(ge[Ve]);Be[Ve]=n(dt)}return Be};ke.length?(U?(U.datum(h),ae&&ve&&(F?(ae[N]=ve[N]=W,v(U).attr("d","M"+ve+"L"+ae+"L"+ye.substr(1)).call(p.singleFillStyle,a),pe=be(null)):(v(U).attr("d",ye+"Z").call(p.singleFillStyle,a),pe=Se())),S._polygons=pe,S._fillElement=U):D&&(S.fill.substr(0,6)==="tonext"&&ye&&te?(S.fill==="tonext"?(v(D).attr("d",ye+"Z"+te+"Z").call(p.singleFillStyle,a),pe=Se(),S._polygons=pe.concat(ee)):(v(D).attr("d",ye+"L"+te.substr(1)+"Z").call(p.singleFillStyle,a),pe=be(J),S._polygons=pe),S._fillElement=D):Me(D)),S._prevRevpath=de):(U?Me(U):D&&Me(D),S._prevRevpath=null),S._ownPolygons=pe,O.datum(h),R.datum(h),function(Le,Be,Ve){var Ze,rt=Ve[0].trace,it=s.hasMarkers(rt),dt=s.hasText(rt),mt=Ae(rt),ht=De,Qe=De;if(it||dt){var Je=b,wt=rt.stackgroup,Pt=wt&&a._fullLayout._scatterStackOpts[_._id+f._id][wt].stackgaps==="infer zero";rt.marker.maxdisplayed||rt._needsCull?Je=Pt?Oe:Ie:wt&&!Pt&&(Je=he),it&&(ht=Je),dt&&(Qe=Je)}var It,At=(Ze=Le.selectAll("path.point").data(ht,mt)).enter().append("path").classed("point",!0);y&&At.call(p.pointStyle,rt,a).call(p.translatePoints,_,f).style("opacity",0).transition().style("opacity",1),Ze.order(),it&&(It=p.makePointStyleFns(rt)),Ze.each(function(qe){var Ye=A.select(this),Ne=v(Ye);p.translatePoint(qe,Ne,_,f)?(p.singlePointStyle(qe,Ne,rt,It,a),c.layerClipId&&p.hideOutsideRangePoint(qe,Ne,_,f,rt.xcalendar,rt.ycalendar),rt.customdata&&Ye.classed("plotly-customdata",qe.data!==null&&qe.data!==void 0)):Ne.remove()}),y?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),(Ze=Be.selectAll("g").data(Qe,mt)).enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(qe){var Ye=A.select(this),Ne=v(Ye.select("text"));p.translatePoint(qe,Ne,_,f)?c.layerClipId&&p.hideOutsideRangePoint(qe,Ye,_,f,rt.xcalendar,rt.ycalendar):Ye.remove()}),Ze.selectAll("text").call(p.textPointStyle,rt,a).each(function(qe){var Ye=_.c2p(qe.x),Ne=f.c2p(qe.y);A.select(this).selectAll("tspan.line").each(function(){v(A.select(this)).attr({x:Ye,y:Ne})})}),Ze.exit().remove()}(O,R,h);var we=S.cliponaxis===!1?null:c.layerClipId;p.setClipUrl(O,we,a),p.setClipUrl(R,we,a)}function Me(Le){v(Le).attr("d","M0,0Z")}function Ie(Le){return Le.filter(function(Be){return!Be.gap&&Be.vis})}function Oe(Le){return Le.filter(function(Be){return Be.vis})}function he(Le){return Le.filter(function(Be){return!Be.gap})}function _e(Le){return Le.id}function Ae(Le){if(Le.ids)return _e}function De(){return!1}}X.exports=function(a,l,c,h,u,x){var d,m,g=!u,y=!!u&&u.duration>0,v=i(a,l,c);(d=h.selectAll("g.trace").data(v,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),d.order(),function(_,f,S){f.each(function(w){var E=T(A.select(this),"g","fills");p.setClipUrl(E,S.layerClipId,_);var P=w[0].trace,C=[];P._ownfill&&C.push("_ownFill"),P._nexttrace&&C.push("_nextFill");var O=E.selectAll("g").data(C,b);O.enter().append("g"),O.exit().each(function(R){P[R]=null}).remove(),O.order().each(function(R){P[R]=T(A.select(this),"path","js-fill")})})}(a,d,l),y?(x&&(m=x()),A.transition().duration(u.duration).ease(u.easing).each("end",function(){m&&m()}).each("interrupt",function(){m&&m()}).each(function(){h.selectAll("g.trace").each(function(_,f){r(a,f,l,_,v,this,u)})})):d.each(function(_,f){r(a,f,l,_,v,this,u)}),g&&d.exit().remove(),h.selectAll("path:not([d])").remove()}},91560:function(X,I,e){"use strict";var A=e(43028);X.exports=function(k,o){var T,b,p,s,t=k.cd,i=k.xaxis,n=k.yaxis,r=[],a=t[0].trace;if(!A.hasMarkers(a)&&!A.hasText(a))return[];if(o===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)b=t[T],p=i.c2p(b.x),s=n.c2p(b.y),b.i!==null&&o.contains([p,s],!1,T,k)?(r.push({pointNumber:b.i,x:i.c2d(b.x),y:n.c2d(b.y)}),b.selected=1):b.selected=0;return r}},43912:function(X){"use strict";var I=["orientation","groupnorm","stackgaps"];X.exports=function(e,A,k,o){var T=k._scatterStackOpts,b=o("stackgroup");if(b){var p=A.xaxis+A.yaxis,s=T[p];s||(s=T[p]={});var t=s[b],i=!1;t?t.traces.push(A):(t=s[b]={traceIndices:[],traces:[A]},i=!0);for(var n={orientation:A.x&&!A.y?"h":"v"},r=0;r<I.length;r++){var a=I[r],l=a+"Found";if(!t[l]){var c=e[a]!==void 0,h=a==="orientation";if((c||i)&&(t[a]=o(a,n[a]),h&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),c&&(t[l]=!0,!i&&(delete t.traces[0][a],h))))for(var u=0;u<t.traces.length-1;u++){var x=t.traces[u];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},49224:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(24040);function T(p,s,t){k.pointStyle(p.selectAll("path.point"),s,t)}function b(p,s,t){k.textPointStyle(p.selectAll("text"),s,t)}X.exports={style:function(p){var s=A.select(p).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(A.select(this),t.trace||t[0].trace,p)}),s.selectAll("g.text").each(function(t){b(A.select(this),t.trace||t[0].trace,p)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,p,!1),o.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:b,styleOnSelect:function(p,s,t){var i=s[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(T(t,i,p),b(t,i,p))}}},43028:function(X,I,e){"use strict";var A=e(3400),k=e(38116).isTypedArraySpec;X.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){var T=o.marker;return A.isPlainObject(T)&&(A.isArrayOrTypedArray(T.size)||k(T.size))}}},124:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o,T,b,p){p=p||{},b("textposition"),A.coerceFont(b,"textfont",p.font||T.font,p),p.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},43980:function(X,I,e){"use strict";var A=e(3400),k=e(24040);X.exports=function(o,T,b,p){var s,t=p("x"),i=p("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],b),t){var n=A.minRowLength(t);i?s=Math.min(n,A.minRowLength(i)):(s=n,p("y0"),p("dy"))}else{if(!i)return 0;s=A.minRowLength(i),p("x0"),p("dx")}return T._length=s,s}},91592:function(X,I,e){"use strict";var A=e(52904),k=e(25376),o=e(49084),T=e(29736).axisHoverFormat,b=e(21776).Ks,p=e(21776).Gw,s=e(45464),t=e(99168),i=e(87792),n=e(92880).extendFlat,r=e(67824).overrideAll,a=e(95376),l=A.line,c=A.marker,h=c.line,u=n({width:l.width,dash:{valType:"enumerated",values:a(t),dflt:"solid"}},o("line")),x=X.exports=r({x:A.x,y:A.y,z:{valType:"data_array"},text:n({},A.text,{}),texttemplate:p({},{}),hovertext:n({},A.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:n({},A.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:A.connectgaps,line:u,marker:n({symbol:{valType:"enumerated",values:a(i),dflt:"circle",arrayOk:!0},size:n({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:n({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:n({width:n({},h.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:n({},A.textposition,{dflt:"top center"}),textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:s.opacity,hoverinfo:n({},s.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},41484:function(X,I,e){"use strict";var A=e(20148),k=e(90136);X.exports=function(o,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return A(b,T),k(o,T),b}},45156:function(X,I,e){"use strict";var A=e(24040);function k(o,T,b,p){if(!T||!T.visible)return null;for(var s=A.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(o.length),i=0;i<o.length;i++){var n=s(+o[i],i);if(p.type==="log"){var r=p.c2l(o[i]),a=o[i]-n[0],l=o[i]+n[1];if(t[i]=[(p.c2l(a,!0)-r)*b,(p.c2l(l,!0)-r)*b],a>0){var c=p.c2l(a);p._lowerLogErrorBound||(p._lowerLogErrorBound=c),p._lowerErrorBound=Math.min(p._lowerLogErrorBound,c)}}else t[i]=[-n[0]*b,n[1]*b]}return t}X.exports=function(o,T,b){var p=[k(o.x,o.error_x,T[0],b.xaxis),k(o.y,o.error_y,T[1],b.yaxis),k(o.z,o.error_z,T[2],b.zaxis)],s=function(l){for(var c=0;c<l.length;c++)if(l[c])return l[c].length;return 0}(p);if(s===0)return null;for(var t=new Array(s),i=0;i<s;i++){for(var n=[[0,0,0],[0,0,0]],r=0;r<3;r++)if(p[r])for(var a=0;a<2;a++)n[a][r]=p[r][i][a];t[i]=n}return t}},41064:function(X,I,e){"use strict";var A=e(67792).gl_line3d,k=e(67792).gl_scatter3d,o=e(67792).gl_error3d,T=e(67792).gl_mesh3d,b=e(67792).delaunay_triangulate,p=e(3400),s=e(43080),t=e(33040).formatColor,i=e(7152),n=e(99168),r=e(87792),a=e(54460),l=e(10624).appendArrayPointValue,c=e(45156);function h(f,S){this.scene=f,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var u=h.prototype;function x(f){return f==null?0:f.indexOf("left")>-1?-1:f.indexOf("right")>-1?1:0}function d(f){return f==null?0:f.indexOf("top")>-1?-1:f.indexOf("bottom")>-1?1:0}function m(f,S){return S(4*f)}function g(f){return r[f]}function y(f,S,w,E,P){var C=null;if(p.isArrayOrTypedArray(f)){C=[];for(var O=0;O<S;O++)f[O]===void 0?C[O]=E:C[O]=w(f[O],P)}else C=w(f,p.identity);return C}function v(f){if(p.isArrayOrTypedArray(f)){var S=f[0];return p.isArrayOrTypedArray(S)&&(f=S),"rgb("+f.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function _(f){return p.isArrayOrTypedArray(f)?f.length===4&&typeof f[0]=="number"?v(f):f.map(v):null}u.handlePick=function(f){if(f.object&&(f.object===this.linePlot||f.object===this.delaunayMesh||f.object===this.textMarkers||f.object===this.scatterPlot)){var S=f.index=f.data.index;return f.object.highlight&&f.object.highlight(null),this.scatterPlot&&(f.object=this.scatterPlot,this.scatterPlot.highlight(f.data)),f.textLabel="",this.textLabels&&(p.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(f.textLabel=this.textLabels[S]):f.textLabel=this.textLabels),f.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},u.update=function(f){var S,w,E,P,C=this.scene.glplot.gl,O=n.solid;this.data=f;var R=function(N,W){var F,j,q,te,ee,Q,J=[],K=N.fullSceneLayout,Y=N.dataScale,ie=K.xaxis,se=K.yaxis,ae=K.zaxis,ue=W.marker,ve=W.line,ye=W.x||[],de=W.y||[],pe=W.z||[],ge=ye.length,ke=W.xcalendar,Ee=W.ycalendar,me=W.zcalendar;for(ee=0;ee<ge;ee++)F=ie.d2l(ye[ee],0,ke)*Y[0],j=se.d2l(de[ee],0,Ee)*Y[1],q=ae.d2l(pe[ee],0,me)*Y[2],J[ee]=[F,j,q];if(Array.isArray(W.text))Q=W.text;else if(p.isTypedArray(W.text))Q=Array.from(W.text);else if(W.text!==void 0)for(Q=new Array(ge),ee=0;ee<ge;ee++)Q[ee]=W.text;function oe(Be,Ve){var Ze=K[Be];return a.tickText(Ze,Ze.d2l(Ve),!0).text}var re=W.texttemplate;if(re){var fe=N.fullLayout._d3locale,Se=Array.isArray(re),be=Se?Math.min(re.length,ge):ge,we=Se?function(Be){return re[Be]}:function(){return re};for(Q=new Array(be),ee=0;ee<be;ee++){var Me={x:ye[ee],y:de[ee],z:pe[ee]},Ie={xLabel:oe("xaxis",ye[ee]),yLabel:oe("yaxis",de[ee]),zLabel:oe("zaxis",pe[ee])},Oe={};l(Oe,W,ee);var he=W._meta||{};Q[ee]=p.texttemplateString(we(ee),Ie,fe,Oe,Me,he)}}if(te={position:J,mode:W.mode,text:Q},"line"in W&&(te.lineColor=t(ve,1,ge),te.lineWidth=ve.width,te.lineDashes=ve.dash),"marker"in W){var _e=i(W);te.scatterColor=t(ue,1,ge),te.scatterSize=y(ue.size,ge,m,20,_e),te.scatterMarker=y(ue.symbol,ge,g,"\u25CF"),te.scatterLineWidth=ue.line.width,te.scatterLineColor=t(ue.line,1,ge),te.scatterAngle=0}"textposition"in W&&(te.textOffset=function(Be){var Ve=[0,0];if(Array.isArray(Be))for(var Ze=0;Ze<Be.length;Ze++)Ve[Ze]=[0,0],Be[Ze]&&(Ve[Ze][0]=x(Be[Ze]),Ve[Ze][1]=d(Be[Ze]));else Ve[0]=x(Be),Ve[1]=d(Be);return Ve}(W.textposition),te.textColor=t(W.textfont,1,ge),te.textSize=y(W.textfont.size,ge,p.identity,12),te.textFontFamily=W.textfont.family,te.textFontWeight=W.textfont.weight,te.textFontStyle=W.textfont.style,te.textFontVariant=W.textfont.variant,te.textAngle=0);var Ae=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],ee=0;ee<3;++ee){var De=W.projection[Ae[ee]];(te.project[ee]=De.show)&&(te.projectOpacity[ee]=De.opacity,te.projectScale[ee]=De.scale)}te.errorBounds=c(W,Y,K);var Le=function(Be){for(var Ve=[0,0,0],Ze=[[0,0,0],[0,0,0],[0,0,0]],rt=[1,1,1],it=0;it<3;it++){var dt=Be[it];dt&&dt.copy_zstyle!==!1&&Be[2].visible!==!1&&(dt=Be[2]),dt&&dt.visible&&(Ve[it]=dt.width/2,Ze[it]=s(dt.color),rt[it]=dt.thickness)}return{capSize:Ve,color:Ze,lineWidth:rt}}([W.error_x,W.error_y,W.error_z]);return te.errorColor=Le.color,te.errorLineWidth=Le.lineWidth,te.errorCapSize=Le.capSize,te.delaunayAxis=W.surfaceaxis,te.delaunayColor=s(W.surfacecolor),te}(this.scene,f);"mode"in R&&(this.mode=R.mode),"lineDashes"in R&&R.lineDashes in n&&(O=n[R.lineDashes]),this.color=_(R.scatterColor)||_(R.lineColor),this.dataPoints=R.position,S={gl:this.scene.glplot.gl,position:R.position,color:R.lineColor,lineWidth:R.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:f.opacity,connectGaps:f.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=A(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=f.opacity;if(f.marker&&f.marker.opacity!==void 0&&(U*=f.marker.opacity),w={gl:this.scene.glplot.gl,position:R.position,color:R.scatterColor,size:R.scatterSize,glyph:R.scatterMarker,opacity:U,orthographic:!0,lineWidth:R.scatterLineWidth,lineColor:R.scatterLineColor,project:R.project,projectScale:R.projectScale,projectOpacity:R.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:R.position,glyph:R.text,color:R.textColor,size:R.textSize,angle:R.textAngle,alignment:R.textOffset,font:R.textFontFamily,fontWeight:R.textFontWeight,fontStyle:R.textFontStyle,fontVariant:R.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:f.opacity},this.textLabels=f.hovertext||f.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=k(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:R.position,color:R.errorColor,error:R.errorBounds,lineWidth:R.errorLineWidth,capSize:R.errorCapSize,opacity:f.opacity},this.errorBars?R.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):R.errorBounds&&(this.errorBars=o(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),R.delaunayAxis>=0){var D=function(N,W,F){var j,q=(F+1)%3,te=(F+2)%3,ee=[],Q=[];for(j=0;j<N.length;++j){var J=N[j];!isNaN(J[q])&&isFinite(J[q])&&!isNaN(J[te])&&isFinite(J[te])&&(ee.push([J[q],J[te]]),Q.push(j))}var K=b(ee);for(j=0;j<K.length;++j)for(var Y=K[j],ie=0;ie<Y.length;++ie)Y[ie]=Q[Y[ie]];return{positions:N,cells:K,meshColor:W}}(R.position,R.delaunayColor,R.delaunayAxis);D.opacity=f.opacity,this.delaunayMesh?this.delaunayMesh.update(D):(D.gl=C,this.delaunayMesh=T(D),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},u.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},X.exports=function(f,S){var w=new h(f,S.uid);return w.update(S),w}},83484:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(43028),T=e(74428),b=e(66828),p=e(124),s=e(91592);X.exports=function(t,i,n,r){function a(g,y){return k.coerce(t,i,s,g,y)}var l=function(g,y,v,_){var f=0,S=v("x"),w=v("y"),E=v("z");return A.getComponentMethod("calendars","handleTraceDefaults")(g,y,["x","y","z"],_),S&&w&&E&&(f=Math.min(S.length,w.length,E.length),y._length=y._xlength=y._ylength=y._zlength=f),f}(t,i,a,r);if(l){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),o.hasMarkers(i)&&T(t,i,n,r,a,{noSelect:!0,noAngle:!0}),o.hasLines(i)&&(a("connectgaps"),b(t,i,n,r,a)),o.hasText(i)&&(a("texttemplate"),p(t,i,r,a,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var c=(i.line||{}).color,h=(i.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",c||h);for(var u=["x","y","z"],x=0;x<3;++x){var d="projection."+u[x];a(d+".show")&&(a(d+".opacity"),a(d+".scale"))}var m=A.getComponentMethod("errorbars","supplyDefaults");m(t,i,c||h||n,{axis:"z"}),m(t,i,c||h||n,{axis:"y",inherit:"z"}),m(t,i,c||h||n,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(X,I,e){"use strict";X.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(X,I,e){"use strict";var A=e(98304),k=e(52904),o=e(45464),T=e(21776).Ks,b=e(21776).Gw,p=e(49084),s=e(92880).extendFlat,t=k.marker,i=k.line,n=t.line;X.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},k.mode,{dflt:"markers"}),text:s({},k.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},k.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:s({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:s({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A(),marker:s({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:n.width,editType:"calc"},p("marker.line")),gradient:t.gradient,editType:"calc"},p("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:s({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:T(),zorder:k.zorder}},48228:function(X,I,e){"use strict";var A=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,p=e(50948);X.exports=function(s,t){var i=t._carpetTrace=p(s,t);if(i&&i.visible&&i.visible!=="legendonly"){var n;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var r,a,l=t._length,c=new Array(l),h=!1;for(n=0;n<l;n++)if(r=t.a[n],a=t.b[n],A(r)&&A(a)){var u=i.ab2xy(+r,+a,!0),x=i.isVisible(+r,+a);x||(h=!0),c[n]={x:u[0],y:u[1],a:r,b:a,vis:x}}else c[n]={x:!1,y:!1};return t._needsCull=h,c[0].carpet=i,c[0].trace=t,b(t,l),k(s,t),o(c,t),T(c,t),c}}},6176:function(X,I,e){"use strict";var A=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),p=e(11731),s=e(124),t=e(70840),i=e(90372);X.exports=function(n,r,a,l){function c(m,g){return A.coerce(n,r,i,m,g)}c("carpet"),r.xaxis="x",r.yaxis="y";var h=c("a"),u=c("b"),x=Math.min(h.length,u.length);if(x){r._length=x,c("text"),c("texttemplate"),c("hovertext"),c("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(r)&&T(n,r,a,l,c,{gradient:!0}),o.hasLines(r)&&(b(n,r,a,l,c,{backoff:!0}),p(n,r,c),c("connectgaps")),o.hasText(r)&&s(n,r,l,c);var d=[];(o.hasMarkers(r)||o.hasText(r))&&(c("marker.maxdisplayed"),d.push("points")),c("fill"),r.fill!=="none"&&(t(n,r,a,c),o.hasLines(r)||p(n,r,c)),r.fill!=="tonext"&&r.fill!=="toself"||d.push("fills"),c("hoveron",d.join("+")||"points")!=="fills"&&c("hovertemplate"),c("zorder"),A.coerceSelectionMarkerOpacity(r,c)}else r.visible=!1}},89307:function(X){"use strict";X.exports=function(I,e,A,k,o){var T=k[o];return I.a=T.a,I.b=T.b,I.y=T.y,I}},52364:function(X){"use strict";X.exports=function(I,e){var A={},k=e._carpet,o=k.ab2ij([I.a,I.b]),T=Math.floor(o[0]),b=o[0]-T,p=Math.floor(o[1]),s=o[1]-p,t=k.evalxy([],T,p,b,s);return A.yLabel=t[1].toFixed(3),A}},58960:function(X,I,e){"use strict";var A=e(98723),k=e(3400).fillText;X.exports=function(o,T,b,p){var s=A(o,T,b,p);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var i=1-t.y0/o.ya._length,n=o.xa._length,r=n*i/2,a=n-r;return t.x0=Math.max(Math.min(t.x0,a),r),t.x1=Math.max(Math.min(t.x1,a),r),s}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var c=t.trace,h=c._carpet,u=c._module.formatLabels(l,c);t.yLabel=u.yLabel,delete t.text;var x=[];if(!c.hovertemplate){var d=(l.hi||c.hoverinfo).split("+");d.indexOf("all")!==-1&&(d=["a","b","text"]),d.indexOf("a")!==-1&&m(h.aaxis,l.a),d.indexOf("b")!==-1&&m(h.baxis,l.b),x.push("y: "+t.yLabel),d.indexOf("text")!==-1&&k(l,c,x),t.extraText=x.join("<br>")}return s}function m(g,y){var v;v=g.labelprefix&&g.labelprefix.length>0?g.labelprefix.replace(/ = $/,""):g._hovertitle,x.push(v+": "+y.toFixed(3)+g.labelsuffix)}}},4184:function(X,I,e){"use strict";X.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(X,I,e){"use strict";var A=e(96504),k=e(54460),o=e(43616);X.exports=function(T,b,p,s){var t,i,n,r=p[0][0].carpet,a=k.getFromId(T,r.xaxis||"x"),l=k.getFromId(T,r.yaxis||"y"),c={xaxis:a,yaxis:l,plot:b.plot};for(t=0;t<p.length;t++)(i=p[t][0].trace)._xA=a,i._yA=l;for(A(T,c,p,s),t=0;t<p.length;t++)i=p[t][0].trace,n=s.selectAll("g.trace"+i.uid+" .js-line"),o.setClipUrl(n,p[t][0].carpet._clipPathId,T)}},6096:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),p=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,n=T.marker,r=T.line,a=n.line;X.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:r.color,width:r.width,dash:s},connectgaps:T.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:t({},n.angleref,{values:["previous","up","north"]}),standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:a.width},p("marker.line")),gradient:n.gradient},p("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:A()},"calc","nested")},25212:function(X,I,e){"use strict";var A=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),p=e(3400).isArrayOrTypedArray,s=e(3400)._;function t(i){return i&&typeof i=="string"}X.exports=function(i,n){var r,a=p(n.locations),l=a?n.locations.length:n._length,c=new Array(l);r=n.geojson?function(g){return t(g)||A(g)}:t;for(var h=0;h<l;h++){var u=c[h]={};if(a){var x=n.locations[h];u.loc=r(x)?x:null}else{var d=n.lon[h],m=n.lat[h];A(d)&&A(m)?u.lonlat=[+d,+m]:u.lonlat=[k,k]}}return T(c,n),o(i,n),b(c,n),l&&(c[0].t={labels:{lat:s(i,"lat:")+" ",lon:s(i,"lon:")+" "}}),c}},86188:function(X,I,e){"use strict";var A=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),p=e(70840),s=e(6096);X.exports=function(t,i,n,r){function a(m,g){return A.coerce(t,i,s,m,g)}var l,c=a("locations");if(c&&c.length){var h,u=a("geojson");(typeof u=="string"&&u!==""||A.isPlainObject(u))&&(h="geojson-id"),a("locationmode",h)==="geojson-id"&&a("featureidkey"),l=c.length}else{var x=a("lon")||[],d=a("lat")||[];l=Math.min(x.length,d.length)}l?(i._length=l,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasMarkers(i)&&o(t,i,n,r,a,{gradient:!0}),k.hasLines(i)&&(T(t,i,n,r,a),a("connectgaps")),k.hasText(i)&&(a("texttemplate"),b(t,i,r,a)),a("fill"),i.fill!=="none"&&p(t,i,n,a),A.coerceSelectionMarkerOpacity(i,a)):i.visible=!1}},58544:function(X){"use strict";X.exports=function(I,e,A,k,o){I.lon=e.lon,I.lat=e.lat,I.location=e.loc?e.loc:null;var T=k[o];return T.fIn&&T.fIn.properties&&(I.properties=T.fIn.properties),I}},56696:function(X,I,e){"use strict";var A=e(54460);X.exports=function(k,o,T){var b={},p=T[o.geo]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=A.tickText(p,p.c2l(s[0]),!0).text,b.latLabel=A.tickText(p,p.c2l(s[1]),!0).text,b}},64292:function(X,I,e){"use strict";var A=e(93024),k=e(39032).BADNUM,o=e(44928),T=e(3400).fillText,b=e(6096);X.exports=function(p,s,t){var i=p.cd,n=i[0].trace,r=p.xa,a=p.ya,l=p.subplot,c=l.projection.isLonLatOverEdges,h=l.project;if(A.getClosest(i,function(v){var _=v.lonlat;if(_[0]===k||c(_))return 1/0;var f=h(_),S=h([s,t]),w=Math.abs(f[0]-S[0]),E=Math.abs(f[1]-S[1]),P=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-P,1-3/P)},p),p.index!==!1){var u=i[p.index],x=u.lonlat,d=[r.c2p(x),a.c2p(x)],m=u.mrc||1;p.x0=d[0]-m,p.x1=d[0]+m,p.y0=d[1]-m,p.y1=d[1]+m,p.loc=u.loc,p.lon=x[0],p.lat=x[1];var g={};g[n.geo]={_subplot:l};var y=n._module.formatLabels(u,n,g);return p.lonLabel=y.lonLabel,p.latLabel=y.latLabel,p.color=o(n,u),p.extraText=function(v,_,f,S){if(!v.hovertemplate){var w=_.hi||v.hoverinfo,E=w==="all"?b.hoverinfo.flags:w.split("+"),P=E.indexOf("location")!==-1&&Array.isArray(v.locations),C=E.indexOf("lon")!==-1,O=E.indexOf("lat")!==-1,R=E.indexOf("text")!==-1,U=[];return P?U.push(_.loc):C&&O?U.push("("+D(f.latLabel)+", "+D(f.lonLabel)+")"):C?U.push(S.lon+D(f.lonLabel)):O&&U.push(S.lat+D(f.latLabel)),R&&T(_,v,U),U.join("<br>")}function D(N){return N+"\xB0"}}(n,u,p,i[0].t.labels),p.hovertemplate=n.hovertemplate,[p]}}},36952:function(X,I,e){"use strict";X.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(59972).getTopojsonFeatures,T=e(44808),b=e(27144),p=e(19280).findExtremes,s=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),n=e(25064);X.exports={calcGeoJSON:function(r,a){var l,c,h=r[0].trace,u=a[h.geo],x=u._subplot,d=h._length;if(k.isArrayOrTypedArray(h.locations)){var m=h.locationmode,g=m==="geojson-id"?b.extractTraceFeature(r):o(h,x.topojson);for(l=0;l<d;l++){c=r[l];var y=m==="geojson-id"?c.fOut:b.locationToFeature(m,c.loc,g);c.lonlat=y?y.properties.ct:[s,s]}}var v,_,f={padded:!0};if(u.fitbounds==="geojson"&&h.locationmode==="geojson-id"){var S=b.computeBbox(b.getTraceGeojson(h));v=[S[0],S[2]],_=[S[1],S[3]]}else{for(v=new Array(d),_=new Array(d),l=0;l<d;l++)c=r[l],v[l]=c.lonlat[0],_[l]=c.lonlat[1];f.ppad=t(h,d)}h._extremes.lon=p(u.lonaxis._ax,v,f),h._extremes.lat=p(u.lataxis._ax,_,f)},plot:function(r,a,l){var c=a.layers.frontplot.select(".scatterlayer"),h=k.makeTraceGroups(c,l,"trace scattergeo");function u(x,d){x.lonlat[0]===s&&A.select(d).remove()}h.selectAll("*").remove(),h.each(function(x){var d=A.select(this),m=x[0].trace;if(i.hasLines(m)||m.fill!=="none"){var g=T.calcTraceToLineCoords(x),y=m.fill!=="none"?T.makePolygon(g):T.makeLine(g);d.selectAll("path.js-line").data([{geojson:y,trace:m}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(m)&&d.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(v){u(v,this)}),i.hasText(m)&&d.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(v){u(v,this)}),n(r,x)})}}},8796:function(X,I,e){"use strict";var A=e(43028),k=e(39032).BADNUM;X.exports=function(o,T){var b,p,s,t,i,n=o.cd,r=o.xaxis,a=o.yaxis,l=[],c=n[0].trace;if(!A.hasMarkers(c)&&!A.hasText(c))return[];if(T===!1)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++)(p=(b=n[i]).lonlat)[0]!==k&&(s=r.c2p(p),t=a.c2p(p),T.contains([s,t],null,i,o)?(l.push({pointNumber:i,lon:p[0],lat:p[1]}),b.selected=1):b.selected=0);return l}},25064:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(76308),T=e(49224),b=T.stylePoints,p=T.styleText;X.exports=function(s,t){t&&function(i,n){var r=n[0].trace,a=n[0].node3;a.style("opacity",n[0].trace.opacity),b(a,r,i),p(a,r,i),a.selectAll("path.js-line").style("fill","none").each(function(l){var c=A.select(this),h=l.trace,u=h.line||{};c.call(o.stroke,u.color).call(k.dashLine,u.dash||"",u.width||0),h.fill!=="none"&&c.call(o.fill,h.fillcolor)})}(s,t)}},2876:function(X,I,e){"use strict";var A=e(45464),k=e(25376),o=e(98304),T=e(52904),b=e(29736).axisHoverFormat,p=e(49084),s=e(95376),t=e(92880).extendFlat,i=e(67824).overrideAll,n=e(67072).DASHES,r=T.line,a=T.marker,l=a.line,c=X.exports=i({x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:T.text,hovertext:T.hovertext,textposition:T.textposition,textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:s(n),dflt:"solid"}},marker:t({},p("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:t({},p("marker.line"),{width:l.width})}),connectgaps:T.connectgaps,fill:t({},T.fill,{dflt:"none"}),fillcolor:o(),selected:{marker:T.selected.marker,textfont:T.selected.textfont},unselected:{marker:T.unselected.marker,textfont:T.unselected.textfont},opacity:A.opacity},"calc","nested");c.x.editType=c.y.editType=c.x0.editType=c.y0.editType="calc+clearAxisTypes",c.hovertemplate=T.hovertemplate,c.texttemplate=T.texttemplate},64628:function(X,I,e){"use strict";var A=e(41272);X.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:A.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(X,I,e){"use strict";var A=e(3108),k=e(3400),o=e(79811),T=e(19280).findExtremes,b=e(1220),p=e(16356),s=p.calcMarkerSize,t=p.calcAxisExpansion,i=p.setFirstScatter,n=e(90136),r=e(84236),a=e(74588),l=e(39032).BADNUM,c=e(67072).TOO_MANY_POINTS;function h(u,x,d){var m=u._extremes[x._id],g=T(x,d._bnds,{padded:!0});m.min=m.min.concat(g.min),m.max=m.max.concat(g.max)}X.exports=function(u,x){var d,m=u._fullLayout,g=x._xA=o.getFromId(u,x.xaxis,"x"),y=x._yA=o.getFromId(u,x.yaxis,"y"),v=m._plots[x.xaxis+x.yaxis],_=x._length,f=_>=c,S=2*_,w={},E=g.makeCalcdata(x,"x"),P=y.makeCalcdata(x,"y"),C=b(x,g,"x",E),O=b(x,y,"y",P),R=C.vals,U=O.vals;x._x=R,x._y=U,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=P,x._yStarts=O.starts,x._yEnds=O.ends);var D=new Array(S),N=new Array(_);for(d=0;d<_;d++)D[2*d]=R[d]===l?NaN:R[d],D[2*d+1]=U[d]===l?NaN:U[d],N[d]=d;if(g.type==="log")for(d=0;d<S;d+=2)D[d]=g.c2l(D[d]);if(y.type==="log")for(d=1;d<S;d+=2)D[d]=y.c2l(D[d]);f&&g.type!=="log"&&y.type!=="log"?w.tree=A(D):w.ids=N,n(u,x);var W,F=function(q,te,ee,Q,J,K){var Y=r.style(q,ee);if(Y.marker&&(Y.marker.positions=Q),Y.line&&Q.length>1&&k.extendFlat(Y.line,r.linePositions(q,ee,Q)),Y.errorX||Y.errorY){var ie=r.errorBarPositions(q,ee,Q,J,K);Y.errorX&&k.extendFlat(Y.errorX,ie.x),Y.errorY&&k.extendFlat(Y.errorY,ie.y)}return Y.text&&(k.extendFlat(Y.text,{positions:Q},r.textPosition(q,ee,Y.text,Y.marker)),k.extendFlat(Y.textSel,{positions:Q},r.textPosition(q,ee,Y.text,Y.markerSel)),k.extendFlat(Y.textUnsel,{positions:Q},r.textPosition(q,ee,Y.text,Y.markerUnsel))),Y}(u,0,x,D,R,U),j=a(u,v);return i(m,x),f?F.marker&&(W=F.marker.sizeAvg||Math.max(F.marker.size,3)):W=s(x,_),t(u,x,g,y,R,U,W),F.errorX&&h(x,g,F.errorX),F.errorY&&h(x,y,F.errorY),F.fill&&!j.fill2d&&(j.fill2d=!0),F.marker&&!j.scatter2d&&(j.scatter2d=!0),F.line&&!j.line2d&&(j.line2d=!0),!F.errorX&&!F.errorY||j.error2d||(j.error2d=!0),F.text&&!j.glText&&(j.glText=!0),F.marker&&(F.marker.snap=_),j.lineOptions.push(F.line),j.errorXOptions.push(F.errorX),j.errorYOptions.push(F.errorY),j.fillOptions.push(F.fill),j.markerOptions.push(F.marker),j.markerSelectedOptions.push(F.markerSel),j.markerUnselectedOptions.push(F.markerUnsel),j.textOptions.push(F.text),j.textSelectedOptions.push(F.textSel),j.textUnselectedOptions.push(F.textUnsel),j.selectBatch.push([]),j.unselectBatch.push([]),w._scene=j,w.index=j.count,w.x=R,w.y=U,w.positions=D,j.count++,[{x:!1,y:!1,t:w,trace:x}]}},67072:function(X){"use strict";X.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(X,I,e){"use strict";var A=e(38248),k=e(20472),o=e(72160),T=e(24040),b=e(3400),p=b.isArrayOrTypedArray,s=e(43616),t=e(79811),i=e(33040).formatColor,n=e(43028),r=e(7152),a=e(80088),l=e(67072),c=e(13448).DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},u=e(10624).appendArrayPointValue;function x(C,O){var R,U=C._fullLayout,D=O._length,N=O.textfont,W=O.textposition,F=p(W)?W:[W],j=N.color,q=N.size,te=N.family,ee=N.weight,Q=N.style,J=N.variant,K={},Y=C._context.plotGlPixelRatio,ie=O.texttemplate;if(ie){K.text=[];var se=U._d3locale,ae=Array.isArray(ie),ue=ae?Math.min(ie.length,D):D,ve=ae?function(me){return ie[me]}:function(){return ie};for(R=0;R<ue;R++){var ye={i:R},de=O._module.formatLabels(ye,O,U),pe={};u(pe,O,R);var ge=O._meta||{};K.text.push(b.texttemplateString(ve(R),de,se,pe,ye,ge))}}else p(O.text)&&O.text.length<D?K.text=O.text.slice():K.text=O.text;if(p(K.text))for(R=K.text.length;R<D;R++)K.text[R]="";for(K.opacity=O.opacity,K.font={},K.align=[],K.baseline=[],R=0;R<F.length;R++){var ke=F[R].split(/\s+/);switch(ke[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(ke[1])}switch(ke[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(ke[0])}}if(p(j))for(K.color=new Array(D),R=0;R<D;R++)K.color[R]=j[R];else K.color=j;if(p(q)||Array.isArray(te)||p(ee)||Array.isArray(Q)||Array.isArray(J))for(K.font=new Array(D),R=0;R<D;R++){var Ee=K.font[R]={};Ee.size=(b.isTypedArray(q)?q[R]:p(q)?A(q[R])?q[R]:0:q)*Y,Ee.family=Array.isArray(te)?te[R]:te,Ee.weight=d(p(ee)?ee[R]:ee),Ee.style=Array.isArray(Q)?Q[R]:Q,Ee.variant=Array.isArray(J)?J[R]:J}else K.font={size:q*Y,family:te,weight:d(ee),style:Q,variant:J};return K}function d(C){return C<=1e3?C>500?"bold":"normal":C}function m(C,O){var R,U,D=O._length,N=O.marker,W={},F=p(N.symbol),j=p(N.angle),q=p(N.color),te=p(N.line.color),ee=p(N.opacity),Q=p(N.size),J=p(N.line.width);if(F||(U=a.isOpenSymbol(N.symbol)),F||q||te||ee||j){W.symbols=new Array(D),W.angles=new Array(D),W.colors=new Array(D),W.borderColors=new Array(D);var K=N.symbol,Y=N.angle,ie=i(N,N.opacity,D),se=i(N.line,N.opacity,D);if(!p(se[0])){var ae=se;for(se=Array(D),R=0;R<D;R++)se[R]=ae}if(!p(ie[0])){var ue=ie;for(ie=Array(D),R=0;R<D;R++)ie[R]=ue}if(!p(K)){var ve=K;for(K=Array(D),R=0;R<D;R++)K[R]=ve}if(!p(Y)){var ye=Y;for(Y=Array(D),R=0;R<D;R++)Y[R]=ye}for(W.symbols=K,W.angles=Y,W.colors=ie,W.borderColors=se,R=0;R<D;R++)F&&(U=a.isOpenSymbol(N.symbol[R])),U&&(se[R]=ie[R].slice(),ie[R]=ie[R].slice(),ie[R][3]=0);for(W.opacity=O.opacity,W.markers=new Array(D),R=0;R<D;R++)W.markers[R]=P({mx:W.symbols[R],ma:W.angles[R]},O)}else U?(W.color=o(N.color,"uint8"),W.color[3]=0,W.borderColor=o(N.color,"uint8")):(W.color=o(N.color,"uint8"),W.borderColor=o(N.line.color,"uint8")),W.opacity=O.opacity*N.opacity,W.marker=P({mx:N.symbol,ma:N.angle},O);var de,pe=r(O,1);if(Q||J){var ge,ke=W.sizes=new Array(D),Ee=W.borderSizes=new Array(D),me=0;if(Q){for(R=0;R<D;R++)ke[R]=pe(N.size[R]),me+=ke[R];ge=me/D}else for(de=pe(N.size),R=0;R<D;R++)ke[R]=de;if(J)for(R=0;R<D;R++)Ee[R]=N.line.width[R];else for(de=N.line.width,R=0;R<D;R++)Ee[R]=de;W.sizeAvg=ge}else W.size=pe(N&&N.size||10),W.borderSizes=pe(N.line.width);return W}function g(C,O,R){var U=O.marker,D={};return R&&(R.marker&&R.marker.symbol?D=m(0,b.extendFlat({},U,R.marker)):R.marker&&(R.marker.size&&(D.size=R.marker.size),R.marker.color&&(D.colors=R.marker.color),R.marker.opacity!==void 0&&(D.opacity=R.marker.opacity))),D}function y(C,O,R){var U={};if(!R)return U;if(R.textfont){var D={opacity:1,text:O.text,texttemplate:O.texttemplate,textposition:O.textposition,textfont:b.extendFlat({},O.textfont)};R.textfont&&b.extendFlat(D.textfont,R.textfont),U=x(C,D)}return U}function v(C,O,R){var U={capSize:2*O.width*R,lineWidth:O.thickness*R,color:O.color};return O.copy_ystyle&&(U=C.error_y),U}var _=l.SYMBOL_SDF_SIZE,f=l.SYMBOL_SIZE,S=l.SYMBOL_STROKE,w={},E=s.symbolFuncs[0](.05*f);function P(C,O){var R,U,D=C.mx;if(D==="circle")return null;var N=s.symbolNumber(D),W=s.symbolFuncs[N%100],F=!!s.symbolNoDot[N%100],j=!!s.symbolNoFill[N%100],q=a.isDotSymbol(D);if(C.ma&&(D+="_"+C.ma),w[D])return w[D];var te=s.getMarkerAngle(C,O);return R=q&&!F?W(1.1*f,te)+E:W(f,te),U=k(R,{w:_,h:_,viewBox:[-f,-f,f,f],stroke:j?S:-S}),w[D]=U,U||null}X.exports={style:function(C,O){var R,U={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},D=C._context.plotGlPixelRatio;if(O.visible!==!0)return U;if(n.hasText(O)&&(U.text=x(C,O),U.textSel=y(C,O,O.selected),U.textUnsel=y(C,O,O.unselected)),n.hasMarkers(O)&&(U.marker=m(0,O),U.markerSel=g(0,O,O.selected),U.markerUnsel=g(0,O,O.unselected),!O.unselected&&p(O.marker.opacity))){var N=O.marker.opacity;for(U.markerUnsel.opacity=new Array(N.length),R=0;R<N.length;R++)U.markerUnsel.opacity[R]=c*N[R]}if(n.hasLines(O)){U.line={overlay:!0,thickness:O.line.width*D,color:O.line.color,opacity:O.opacity};var W=(l.DASHES[O.line.dash]||[1]).slice();for(R=0;R<W.length;++R)W[R]*=O.line.width*D;U.line.dashes=W}return O.error_x&&O.error_x.visible&&(U.errorX=v(O,O.error_x,D)),O.error_y&&O.error_y.visible&&(U.errorY=v(O,O.error_y,D)),O.fill&&O.fill!=="none"&&(U.fill={closed:!0,fill:O.fillcolor,thickness:0}),U},markerStyle:m,markerSelection:g,linePositions:function(C,O,R){var U,D,N=R.length,W=N/2;if(n.hasLines(O)&&W)if(O.line.shape==="hv"){for(U=[],D=0;D<W-1;D++)isNaN(R[2*D])||isNaN(R[2*D+1])?U.push(NaN,NaN,NaN,NaN):(U.push(R[2*D],R[2*D+1]),isNaN(R[2*D+2])||isNaN(R[2*D+3])?U.push(NaN,NaN):U.push(R[2*D+2],R[2*D+1]));U.push(R[N-2],R[N-1])}else if(O.line.shape==="hvh"){for(U=[],D=0;D<W-1;D++)if(isNaN(R[2*D])||isNaN(R[2*D+1])||isNaN(R[2*D+2])||isNaN(R[2*D+3]))isNaN(R[2*D])||isNaN(R[2*D+1])?U.push(NaN,NaN):U.push(R[2*D],R[2*D+1]),U.push(NaN,NaN);else{var F=(R[2*D]+R[2*D+2])/2;U.push(R[2*D],R[2*D+1],F,R[2*D+1],F,R[2*D+3])}U.push(R[N-2],R[N-1])}else if(O.line.shape==="vhv"){for(U=[],D=0;D<W-1;D++)if(isNaN(R[2*D])||isNaN(R[2*D+1])||isNaN(R[2*D+2])||isNaN(R[2*D+3]))isNaN(R[2*D])||isNaN(R[2*D+1])?U.push(NaN,NaN):U.push(R[2*D],R[2*D+1]),U.push(NaN,NaN);else{var j=(R[2*D+1]+R[2*D+3])/2;U.push(R[2*D],R[2*D+1],R[2*D],j,R[2*D+2],j)}U.push(R[N-2],R[N-1])}else if(O.line.shape==="vh"){for(U=[],D=0;D<W-1;D++)isNaN(R[2*D])||isNaN(R[2*D+1])?U.push(NaN,NaN,NaN,NaN):(U.push(R[2*D],R[2*D+1]),isNaN(R[2*D+2])||isNaN(R[2*D+3])?U.push(NaN,NaN):U.push(R[2*D],R[2*D+3]));U.push(R[N-2],R[N-1])}else U=R;var q=!1;for(D=0;D<U.length;D++)if(isNaN(U[D])){q=!0;break}var te=q||U.length>l.TOO_MANY_POINTS||n.hasMarkers(O)?"rect":"round";if(q&&O.connectgaps){var ee=U[0],Q=U[1];for(D=0;D<U.length;D+=2)isNaN(U[D])||isNaN(U[D+1])?(U[D]=ee,U[D+1]=Q):(ee=U[D],Q=U[D+1])}return{join:te,positions:U}},errorBarPositions:function(C,O,R,U,D){var N=T.getComponentMethod("errorbars","makeComputeError"),W=t.getFromId(C,O.xaxis,"x"),F=t.getFromId(C,O.yaxis,"y"),j=R.length/2,q={};function te(ee,Q){var J=Q._id.charAt(0),K=O["error_"+J];if(K&&K.visible&&(Q.type==="linear"||Q.type==="log")){for(var Y=N(K),ie={x:0,y:1}[J],se={x:[0,1,2,3],y:[2,3,0,1]}[J],ae=new Float64Array(4*j),ue=1/0,ve=-1/0,ye=0,de=0;ye<j;ye++,de+=4){var pe=ee[ye];if(A(pe)){var ge=R[2*ye+ie],ke=Y(pe,ye),Ee=ke[0],me=ke[1];if(A(Ee)&&A(me)){var oe=pe-Ee,re=pe+me;ae[de+se[0]]=ge-Q.c2l(oe),ae[de+se[1]]=Q.c2l(re)-ge,ae[de+se[2]]=0,ae[de+se[3]]=0,ue=Math.min(ue,pe-Ee),ve=Math.max(ve,pe+me)}}}q[J]={positions:R,errors:ae,_bnds:[ue,ve]}}}return te(U,W),te(D,F),q},textPosition:function(C,O,R,U){var D,N=O._length,W={};if(n.hasMarkers(O)){var F=R.font,j=R.align,q=R.baseline;for(W.offset=new Array(N),D=0;D<N;D++){var te=U.sizes?U.sizes[D]:U.size,ee=p(F)?F[D].size:F.size,Q=p(j)?j.length>1?j[D]:j[0]:j,J=p(q)?q.length>1?q[D]:q[0]:q,K=h[Q],Y=h[J],ie=te?te/.8+1:0,se=-Y*ie-.5*Y;W.offset[D]=[K*ie/ee,se/ee]}}return W}}},80220:function(X,I,e){"use strict";var A=e(3400),k=e(24040),o=e(80088),T=e(2876),b=e(88200),p=e(43028),s=e(43980),t=e(31147),i=e(74428),n=e(66828),r=e(70840),a=e(124);X.exports=function(l,c,h,u){function x(S,w){return A.coerce(l,c,T,S,w)}var d=!!l.marker&&o.isOpenSymbol(l.marker.symbol),m=p.isBubble(l),g=s(l,c,u,x);if(g){t(l,c,u,x),x("xhoverformat"),x("yhoverformat");var y=g<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",y),p.hasMarkers(c)&&(i(l,c,h,u,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",d||m?1:0)),p.hasLines(c)&&(x("connectgaps"),n(l,c,h,u,x),x("line.shape")),p.hasText(c)&&(x("texttemplate"),a(l,c,u,x,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var v=(c.line||{}).color,_=(c.marker||{}).color;x("fill"),c.fill!=="none"&&r(l,c,h,x);var f=k.getComponentMethod("errorbars","supplyDefaults");f(l,c,v||_||h,{axis:"y"}),f(l,c,v||_||h,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(c,x)}else c.visible=!1}},26768:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(13448).DESELECTDIM;X.exports={styleTextSelection:function(T){var b,p,s=T[0],t=s.trace,i=s.t,n=i._scene,r=i.index,a=n.selectBatch[r],l=n.unselectBatch[r],c=n.textOptions[r],h=n.textSelectedOptions[r]||{},u=n.textUnselectedOptions[r]||{},x=A.extendFlat({},c);if(a.length||l.length){var d=h.color,m=u.color,g=c.color,y=A.isArrayOrTypedArray(g);for(x.color=new Array(t._length),b=0;b<a.length;b++)p=a[b],x.color[p]=d||(y?g[p]:g);for(b=0;b<l.length;b++){p=l[b];var v=y?g[p]:g;x.color[p]=m||(d?v:k.addOpacity(v,o))}}n.glText[r].update(x)}}},99396:function(X,I,e){"use strict";var A=e(76688);X.exports=function(k,o,T){var b=k.i;return"x"in k||(k.x=o._x[b]),"y"in k||(k.y=o._y[b]),A(k,o,T)}},80088:function(X,I,e){"use strict";var A=e(67072);I.isOpenSymbol=function(k){return typeof k=="string"?A.OPEN_RE.test(k):k%200>100},I.isDotSymbol=function(k){return typeof k=="string"?A.DOT_RE.test(k):k>200}},41272:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(44928);function T(b,p,s,t){var i=b.xa,n=b.ya,r=b.distance,a=b.dxy,l=b.index,c={pointNumber:l,x:p[l],y:s[l]};c.tx=k.isArrayOrTypedArray(t.text)?t.text[l]:t.text,c.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,c.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,c.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var h=t.textfont;h&&(c.ts=k.isArrayOrTypedArray(h.size)?h.size[l]:h.size,c.tc=k.isArrayOrTypedArray(h.color)?h.color[l]:h.color,c.tf=Array.isArray(h.family)?h.family[l]:h.family,c.tw=Array.isArray(h.weight)?h.weight[l]:h.weight,c.ty=Array.isArray(h.style)?h.style[l]:h.style,c.tv=Array.isArray(h.variant)?h.variant[l]:h.variant);var u=t.marker;u&&(c.ms=k.isArrayOrTypedArray(u.size)?u.size[l]:u.size,c.mo=k.isArrayOrTypedArray(u.opacity)?u.opacity[l]:u.opacity,c.mx=k.isArrayOrTypedArray(u.symbol)?u.symbol[l]:u.symbol,c.ma=k.isArrayOrTypedArray(u.angle)?u.angle[l]:u.angle,c.mc=k.isArrayOrTypedArray(u.color)?u.color[l]:u.color);var x=u&&u.line;x&&(c.mlc=Array.isArray(x.color)?x.color[l]:x.color,c.mlw=k.isArrayOrTypedArray(x.width)?x.width[l]:x.width);var d=u&&u.gradient;d&&d.type!=="none"&&(c.mgt=Array.isArray(d.type)?d.type[l]:d.type,c.mgc=Array.isArray(d.color)?d.color[l]:d.color);var m=i.c2p(c.x,!0),g=n.c2p(c.y,!0),y=c.mrc||1,v=t.hoverlabel;v&&(c.hbg=Array.isArray(v.bgcolor)?v.bgcolor[l]:v.bgcolor,c.hbc=Array.isArray(v.bordercolor)?v.bordercolor[l]:v.bordercolor,c.hts=k.isArrayOrTypedArray(v.font.size)?v.font.size[l]:v.font.size,c.htc=Array.isArray(v.font.color)?v.font.color[l]:v.font.color,c.htf=Array.isArray(v.font.family)?v.font.family[l]:v.font.family,c.hnl=k.isArrayOrTypedArray(v.namelength)?v.namelength[l]:v.namelength);var _=t.hoverinfo;_&&(c.hi=Array.isArray(_)?_[l]:_);var f=t.hovertemplate;f&&(c.ht=Array.isArray(f)?f[l]:f);var S={};S[b.index]=c;var w=t._origX,E=t._origY,P=k.extendFlat({},b,{color:o(t,c),x0:m-y,x1:m+y,xLabelVal:w?w[l]:c.x,y0:g-y,y1:g+y,yLabelVal:E?E[l]:c.y,cd:S,distance:r,spikeDistance:a,hovertemplate:c.ht});return c.htx?P.text=c.htx:c.tx?P.text=c.tx:t.text&&(P.text=t.text),k.fillText(c,t,P),A.getComponentMethod("errorbars","hoverInfo")(c,t,P),P}X.exports={hoverPoints:function(b,p,s,t){var i,n,r,a,l,c,h,u,x,d,m=b.cd,g=m[0].t,y=m[0].trace,v=b.xa,_=b.ya,f=g.x,S=g.y,w=v.c2p(p),E=_.c2p(s),P=b.distance;if(g.tree){var C=v.p2c(w-P),O=v.p2c(w+P),R=_.p2c(E-P),U=_.p2c(E+P);i=t==="x"?g.tree.range(Math.min(C,O),Math.min(_._rl[0],_._rl[1]),Math.max(C,O),Math.max(_._rl[0],_._rl[1])):g.tree.range(Math.min(C,O),Math.min(R,U),Math.max(C,O),Math.max(R,U))}else i=g.ids;var D=P;if(t==="x"){var N=!!y.xperiodalignment,W=!!y.yperiodalignment;for(c=0;c<i.length;c++){if(a=f[n=i[c]],h=Math.abs(v.c2p(a)-w),N){var F=v.c2p(y._xStarts[n]),j=v.c2p(y._xEnds[n]);h=w>=Math.min(F,j)&&w<=Math.max(F,j)?0:1/0}if(h<D){if(D=h,l=S[n],u=_.c2p(l)-E,W){var q=_.c2p(y._yStarts[n]),te=_.c2p(y._yEnds[n]);u=E>=Math.min(q,te)&&E<=Math.max(q,te)?0:1/0}d=Math.sqrt(h*h+u*u),r=i[c]}}}else for(c=i.length-1;c>-1;c--)a=f[n=i[c]],l=S[n],h=v.c2p(a)-w,u=_.c2p(l)-E,(x=Math.sqrt(h*h+u*u))<D&&(D=d=x,r=n);return b.index=r,b.distance=D,b.dxy=d,r===void 0?[b]:[T(b,f,S,y)]},calcHover:T}},38983:function(X,I,e){"use strict";var A=e(64628);A.plot=e(89876),X.exports=A},89876:function(X,I,e){"use strict";var A=e(38540),k=e(13472),o=e(24544),T=e(23352),b=e(3400),p=e(72760).selectMode,s=e(5048),t=e(43028),i=e(14328),n=e(26768).styleTextSelection,r={};function a(l,c,h,u){var x=l._size,d=l.width*u,m=l.height*u,g=x.l*u,y=x.b*u,v=x.r*u,_=x.t*u,f=x.w*u,S=x.h*u;return[g+c.domain[0]*f,y+h.domain[0]*S,d-v-(1-c.domain[1])*f,m-_-(1-h.domain[1])*S]}(X.exports=function(l,c,h){if(h.length){var u,x,d=l._fullLayout,m=c._scene,g=c.xaxis,y=c.yaxis;if(m)if(s(l,["ANGLE_instanced_arrays","OES_element_index_uint"],r)){var v=m.count,_=d._glcanvas.data()[0].regl;if(i(l,c,h),m.dirty){if(!m.line2d&&!m.error2d||m.scatter2d||m.fill2d||m.glText||_.clear({}),m.error2d===!0&&(m.error2d=o(_)),m.line2d===!0&&(m.line2d=k(_)),m.scatter2d===!0&&(m.scatter2d=A(_)),m.fill2d===!0&&(m.fill2d=k(_)),m.glText===!0)for(m.glText=new Array(v),u=0;u<v;u++)m.glText[u]=new T(_);if(m.glText){if(v>m.glText.length){var f=v-m.glText.length;for(u=0;u<f;u++)m.glText.push(new T(_))}else if(v<m.glText.length){var S=m.glText.length-v;m.glText.splice(v,S).forEach(function(ie){ie.destroy()})}for(u=0;u<v;u++)m.glText[u].update(m.textOptions[u])}if(m.line2d&&(m.line2d.update(m.lineOptions),m.lineOptions=m.lineOptions.map(function(ie){if(ie&&ie.positions){for(var se=ie.positions,ae=0;ae<se.length&&(isNaN(se[ae])||isNaN(se[ae+1]));)ae+=2;for(var ue=se.length-2;ue>ae&&(isNaN(se[ue])||isNaN(se[ue+1]));)ue-=2;ie.positions=se.slice(ae,ue+2)}return ie}),m.line2d.update(m.lineOptions)),m.error2d){var w=(m.errorXOptions||[]).concat(m.errorYOptions||[]);m.error2d.update(w)}m.scatter2d&&m.scatter2d.update(m.markerOptions),m.fillOrder=b.repeat(null,v),m.fill2d&&(m.fillOptions=m.fillOptions.map(function(ie,se){var ae=h[se];if(ie&&ae&&ae[0]&&ae[0].trace){var ue,ve,ye=ae[0],de=ye.trace,pe=ye.t,ge=m.lineOptions[se],ke=[];de._ownfill&&ke.push(se),de._nexttrace&&ke.push(se+1),ke.length&&(m.fillOrder[se]=ke);var Ee,me,oe=[],re=ge&&ge.positions||pe.positions;if(de.fill==="tozeroy"){for(Ee=0;Ee<re.length&&isNaN(re[Ee+1]);)Ee+=2;for(me=re.length-2;me>Ee&&isNaN(re[me+1]);)me-=2;re[Ee+1]!==0&&(oe=[re[Ee],0]),oe=oe.concat(re.slice(Ee,me+2)),re[me+1]!==0&&(oe=oe.concat([re[me],0]))}else if(de.fill==="tozerox"){for(Ee=0;Ee<re.length&&isNaN(re[Ee]);)Ee+=2;for(me=re.length-2;me>Ee&&isNaN(re[me]);)me-=2;re[Ee]!==0&&(oe=[0,re[Ee+1]]),oe=oe.concat(re.slice(Ee,me+2)),re[me]!==0&&(oe=oe.concat([0,re[me+1]]))}else if(de.fill==="toself"||de.fill==="tonext"){for(oe=[],ue=0,ie.splitNull=!0,ve=0;ve<re.length;ve+=2)(isNaN(re[ve])||isNaN(re[ve+1]))&&((oe=oe.concat(re.slice(ue,ve))).push(re[ue],re[ue+1]),oe.push(null,null),ue=ve+2);oe=oe.concat(re.slice(ue)),ue&&oe.push(re[ue],re[ue+1])}else{var fe=de._nexttrace;if(fe){var Se=m.lineOptions[se+1];if(Se){var be=Se.positions;if(de.fill==="tonexty"){for(oe=re.slice(),se=Math.floor(be.length/2);se--;){var we=be[2*se],Me=be[2*se+1];isNaN(we)||isNaN(Me)||oe.push(we,Me)}ie.fill=fe.fillcolor}}}}if(de._prevtrace&&de._prevtrace.fill==="tonext"){var Ie=m.lineOptions[se-1].positions,Oe=oe.length/2,he=[ue=Oe];for(ve=0;ve<Ie.length;ve+=2)(isNaN(Ie[ve])||isNaN(Ie[ve+1]))&&(he.push(ve/2+Oe+1),ue=ve+2);oe=oe.concat(Ie),ie.hole=he}return ie.fillmode=de.fill,ie.opacity=de.opacity,ie.positions=oe,ie}}),m.fill2d.update(m.fillOptions))}var E=d.dragmode,P=p(E),C=d.clickmode.indexOf("select")>-1;for(u=0;u<v;u++){var O=h[u][0],R=O.trace,U=O.t,D=U.index,N=R._length,W=U.x,F=U.y;if(R.selectedpoints||P||C){if(P||(P=!0),R.selectedpoints){var j=m.selectBatch[D]=b.selIndices2selPoints(R),q={};for(x=0;x<j.length;x++)q[j[x]]=1;var te=[];for(x=0;x<N;x++)q[x]||te.push(x);m.unselectBatch[D]=te}var ee=U.xpx=new Array(N),Q=U.ypx=new Array(N);for(x=0;x<N;x++)ee[x]=g.c2p(W[x]),Q[x]=y.c2p(F[x])}else U.xpx=U.ypx=null}if(P){if(m.select2d||(m.select2d=A(d._glcanvas.data()[1].regl)),m.scatter2d){var J=new Array(v);for(u=0;u<v;u++)J[u]=m.selectBatch[u].length||m.unselectBatch[u].length?m.markerUnselectedOptions[u]:{};m.scatter2d.update(J)}m.select2d&&(m.select2d.update(m.markerOptions),m.select2d.update(m.markerSelectedOptions)),m.glText&&h.forEach(function(ie){var se=((ie||[])[0]||{}).trace||{};t.hasText(se)&&n(ie)})}else m.scatter2d&&m.scatter2d.update(m.markerOptions);var K={viewport:a(d,g,y,l._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(y._rl||y.range)[0],(g._rl||g.range)[1],(y._rl||y.range)[1]]},Y=b.repeat(K,m.count);m.fill2d&&m.fill2d.update(Y),m.line2d&&m.line2d.update(Y),m.error2d&&m.error2d.update(Y.concat(Y)),m.scatter2d&&m.scatter2d.update(Y),m.select2d&&m.select2d.update(Y),m.glText&&m.glText.forEach(function(ie){ie.update(K)})}else m.init()}}).reglPrecompiled=r},74588:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){var T=o._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},p={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((T=o._scene={}).init=function(){A.extendFlat(T,p,b)},T.init(),T.update=function(s){var t=A.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,i=T.error2d,n=T.line2d,r=T.scatter2d,a=T.glText,l=T.select2d,c=T.selectBatch,h=T.unselectBatch,u=0;u<s;u++){if(t&&T.fillOrder[u]&&t.draw(T.fillOrder[u]),n&&T.lineOptions[u]&&n.draw(u),i&&(T.errorXOptions[u]&&i.draw(u),T.errorYOptions[u]&&i.draw(u+s)),r&&T.markerOptions[u])if(h[u].length){var x=A.repeat([],T.count);x[u]=h[u],r.draw(x)}else c[u].length||r.draw(u);a[u]&&T.textOptions[u]&&a[u].render()}l&&l.draw(c),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,o._scene=null}),T.dirty||A.extendFlat(T,b),T}},73224:function(X,I,e){"use strict";var A=e(43028),k=e(26768).styleTextSelection;X.exports=function(o,T){var b=o.cd,p=o.xaxis,s=o.yaxis,t=[],i=b[0].trace,n=b[0].t,r=i._length,a=n.x,l=n.y,c=n._scene,h=n.index;if(!c)return t;var u=A.hasText(i),x=A.hasMarkers(i),d=!x&&!u;if(i.visible!==!0||d)return t;var m=[],g=[];if(T!==!1&&!T.degenerate)for(var y=0;y<r;y++)T.contains([n.xpx[y],n.ypx[y]],!1,y,o)?(m.push(y),t.push({pointNumber:y,x:p.c2d(a[y]),y:s.c2d(l[y])})):g.push(y);if(x){var v=c.scatter2d;if(m.length||g.length){if(!c.selectBatch[h].length&&!c.unselectBatch[h].length){var _=new Array(c.count);_[h]=c.markerUnselectedOptions[h],v.update.apply(v,_)}}else{var f=new Array(c.count);f[h]=c.markerOptions[h],v.update.apply(v,f)}}return c.selectBatch[h]=m,c.unselectBatch[h]=g,u&&k(b),t}},31512:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(6096),b=e(52904),p=e(5232),s=e(45464),t=e(49084),i=e(92880).extendFlat,n=e(67824).overrideAll,r=e(5232),a=T.line,l=T.marker;X.exports=n({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},l.opacity,{dflt:1})},mode:i({},b.mode,{dflt:"markers"}),text:i({},b.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},b.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:b.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:T.fill,fillcolor:o(),textfont:p.layers.symbol.textfont,textposition:p.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:i({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:A()},"calc","nested")},79732:function(X){"use strict";var I=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];X.exports={isSupportedFont:function(e){return I.indexOf(e)!==-1}}},59392:function(X,I,e){"use strict";var A=e(38248),k=e(3400),o=e(39032).BADNUM,T=e(44808),b=e(8932),p=e(43616),s=e(7152),t=e(43028),i=e(79732).isSupportedFont,n=e(89032),r=e(10624).appendArrayPointValue,a=e(72736).NEWLINES,l=e(72736).BR_TAG_ALL;function c(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function h(g,y){return k.isArrayOrTypedArray(g)?y?function(v){return A(g[v])?+g[v]:0}:function(v){return g[v]}:g?function(){return g}:u}function u(){return""}function x(g){return g[0]===o}function d(g,y){var v;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(y)){v=["step",["get","point_count"],g[0]];for(var _=1;_<g.length;_++)v.push(y[_-1],g[_])}else v=g;return v}function m(g){var y=g.textfont,v=y.family,_=y.style,f=y.weight,S=v.split(" "),w=S[S.length-1]==="Italic";w&&S.pop(),w=w||_==="italic";var E=S.join(" ");return f==="bold"&&S.indexOf("Bold")===-1?E+=" Bold":f<=1e3&&(S[0]==="Metropolis"?(E="Metropolis",E+=f>850?" Black":f>750?" Extra Bold":f>650?" Bold":f>550?" Semi Bold":f>450?" Medium":f>350?" Regular":f>250?" Light":f>150?" Extra Light":" Thin"):S.slice(0,2).join(" ")==="Open Sans"?(E="Open Sans",E+=f>750?" Extrabold":f>650?" Bold":f>550?" Semibold":f>350?" Regular":" Light"):S.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(E="Klokantech Noto Sans",S[3]==="CJK"&&(E+=" CJK"),E+=f>500?" Bold":" Regular")),w&&(E+=" Italic"),E==="Open Sans Regular Italic"?E="Open Sans Italic":E==="Open Sans Regular Bold"?E="Open Sans Bold":E==="Open Sans Regular Bold Italic"?E="Open Sans Bold Italic":E==="Klokantech Noto Sans Regular Italic"&&(E="Klokantech Noto Sans Italic"),i(E)||(E=v),E.split(", ")}X.exports=function(g,y){var v,_=y[0].trace,f=_.visible===!0&&_._length!==0,S=_.fill!=="none",w=t.hasLines(_),E=t.hasMarkers(_),P=t.hasText(_),C=E&&_.marker.symbol==="circle",O=E&&_.marker.symbol!=="circle",R=_.cluster&&_.cluster.enabled,U=c("fill"),D=c("line"),N=c("circle"),W=c("symbol"),F={fill:U,line:D,circle:N,symbol:W};if(!f)return F;if((S||w)&&(v=T.calcTraceToLineCoords(y)),S&&(U.geojson=T.makePolygon(v),U.layout.visibility="visible",k.extendFlat(U.paint,{"fill-color":_.fillcolor})),w&&(D.geojson=T.makeLine(v),D.layout.visibility="visible",k.extendFlat(D.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),C){var j=function(ee){var Q,J,K,Y,ie=ee[0].trace,se=ie.marker,ae=ie.selectedpoints,ue=k.isArrayOrTypedArray(se.color),ve=k.isArrayOrTypedArray(se.size),ye=k.isArrayOrTypedArray(se.opacity);function de(fe){return ie.opacity*fe}ue&&(J=b.hasColorscale(ie,"marker")?b.makeColorScaleFuncFromTrace(se):k.identity),ve&&(K=s(ie)),ye&&(Y=function(fe){return de(A(fe)?+k.constrain(fe,0,1):0)});var pe,ge,ke=[];for(Q=0;Q<ee.length;Q++){var Ee=ee[Q],me=Ee.lonlat;if(!x(me)){var oe={};J&&(oe.mcc=Ee.mcc=J(Ee.mc)),K&&(oe.mrc=Ee.mrc=K(Ee.ms)),Y&&(oe.mo=Y(Ee.mo)),ae&&(oe.selected=Ee.selected||0),ke.push({type:"Feature",id:Q+1,geometry:{type:"Point",coordinates:me},properties:oe})}}if(ae)for(pe=p.makeSelectedPointStyleFns(ie),Q=0;Q<ke.length;Q++){var re=ke[Q].properties;pe.selectedOpacityFn&&(re.mo=de(pe.selectedOpacityFn(re))),pe.selectedColorFn&&(re.mcc=pe.selectedColorFn(re)),pe.selectedSizeFn&&(re.mrc=pe.selectedSizeFn(re))}return{geojson:{type:"FeatureCollection",features:ke},mcc:ue||pe&&pe.selectedColorFn?{type:"identity",property:"mcc"}:se.color,mrc:ve||pe&&pe.selectedSizeFn?{type:"identity",property:"mrc"}:(ge=se.size,ge/2),mo:ye||pe&&pe.selectedOpacityFn?{type:"identity",property:"mo"}:de(se.opacity)}}(y);N.geojson=j.geojson,N.layout.visibility="visible",R&&(N.filter=["!",["has","point_count"]],F.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":d(_.cluster.color,_.cluster.step),"circle-radius":d(_.cluster.size,_.cluster.step),"circle-opacity":d(_.cluster.opacity,_.cluster.step)}},F.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":m(_),"text-size":12}}),k.extendFlat(N.paint,{"circle-color":j.mcc,"circle-radius":j.mrc,"circle-opacity":j.mo})}if(C&&R&&(N.filter=["!",["has","point_count"]]),(O||P)&&(W.geojson=function(ee,Q){for(var J=Q._fullLayout,K=ee[0].trace,Y=K.marker||{},ie=Y.symbol,se=Y.angle,ae=ie!=="circle"?h(ie):u,ue=se!=="auto"?h(se,!0):u,ve=t.hasText(K)?h(K.text):u,ye=[],de=0;de<ee.length;de++){var pe=ee[de];if(!x(pe.lonlat)){var ge,ke=K.texttemplate;if(ke){var Ee=Array.isArray(ke)?ke[de]||"":ke,me=K._module.formatLabels(pe,K,J),oe={};r(oe,K,pe.i);var re=K._meta||{};ge=k.texttemplateString(Ee,me,J._d3locale,oe,pe,re)}else ge=ve(de);ge&&(ge=ge.replace(a,"").replace(l,`
`)),ye.push({type:"Feature",geometry:{type:"Point",coordinates:pe.lonlat},properties:{symbol:ae(de),angle:ue(de),text:ge}})}}return{type:"FeatureCollection",features:ye}}(y,g),k.extendFlat(W.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(k.extendFlat(W.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&_.marker.angle!=="auto"&&k.extendFlat(W.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),W.layout["icon-allow-overlap"]=_.marker.allowoverlap,k.extendFlat(W.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),P)){var q=(_.marker||{}).size,te=n(_.textposition,q);k.extendFlat(W.layout,{"text-size":_.textfont.size,"text-anchor":te.anchor,"text-offset":te.offset,"text-font":m(_)}),k.extendFlat(W.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return F}},15752:function(X,I,e){"use strict";var A=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),p=e(70840),s=e(31512),t=e(79732).isSupportedFont;X.exports=function(i,n,r,a){function l(_,f){return A.coerce(i,n,s,_,f)}function c(_,f){return A.coerce2(i,n,s,_,f)}var h=function(_,f,S){var w=S("lon")||[],E=S("lat")||[],P=Math.min(w.length,E.length);return f._length=P,P}(0,n,l);if(h){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),k.hasMarkers(n)){o(i,n,r,a,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var u=n.marker;u.symbol!=="circle"&&(A.isArrayOrTypedArray(u.size)&&(u.size=u.size[0]),A.isArrayOrTypedArray(u.color)&&(u.color=u.color[0]))}k.hasLines(n)&&(T(i,n,r,a,l,{noDash:!0}),l("connectgaps"));var x=c("cluster.maxzoom"),d=c("cluster.step"),m=c("cluster.color",n.marker&&n.marker.color||r),g=c("cluster.size"),y=c("cluster.opacity");if(l("cluster.enabled",x!==!1||d!==!1||m!==!1||g!==!1||y!==!1)||k.hasText(n)){var v=a.font.family;b(i,n,a,l,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:t(v)?v:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}l("fill"),n.fill!=="none"&&p(i,n,r,l),A.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},37920:function(X){"use strict";X.exports=function(I,e){return I.lon=e.lon,I.lat=e.lat,I}},11960:function(X,I,e){"use strict";var A=e(54460);X.exports=function(k,o,T){var b={},p=T[o.subplot]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=A.tickText(p,p.c2l(s[0]),!0).text,b.latLabel=A.tickText(p,p.c2l(s[1]),!0).text,b}},63312:function(X,I,e){"use strict";var A=e(93024),k=e(3400),o=e(44928),T=k.fillText,b=e(39032).BADNUM,p=e(47552).traceLayerPrefix;function s(t,i,n){if(!t.hovertemplate){var r=(i.hi||t.hoverinfo).split("+"),a=r.indexOf("all")!==-1,l=r.indexOf("lon")!==-1,c=r.indexOf("lat")!==-1,h=i.lonlat,u=[];return a||l&&c?u.push("("+x(h[1])+", "+x(h[0])+")"):l?u.push(n.lon+x(h[0])):c&&u.push(n.lat+x(h[1])),(a||r.indexOf("text")!==-1)&&T(i,t,u),u.join("<br>")}function x(d){return d+"\xB0"}}X.exports={hoverPoints:function(t,i,n){var r=t.cd,a=r[0].trace,l=t.xa,c=t.ya,h=t.subplot,u=[],x=p+a.uid+"-circle",d=a.cluster&&a.cluster.enabled;if(d){var m=h.map.queryRenderedFeatures(null,{layers:[x]});u=m.map(function(O){return O.id})}var g=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),y=i-g;if(A.getClosest(r,function(O){var R=O.lonlat;if(R[0]===b||d&&u.indexOf(O.i+1)===-1)return 1/0;var U=k.modHalf(R[0],360),D=R[1],N=h.project([U,D]),W=N.x-l.c2p([y,D]),F=N.y-c.c2p([U,n]),j=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(W*W+F*F)-j,1-3/j)},t),t.index!==!1){var v=r[t.index],_=v.lonlat,f=[k.modHalf(_[0],360)+g,_[1]],S=l.c2p(f),w=c.c2p(f),E=v.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=w-E,t.y1=w+E;var P={};P[a.subplot]={_subplot:h};var C=a._module.formatLabels(v,a,P);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=o(a,v),t.extraText=s(a,v,r[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},11572:function(X,I,e){"use strict";X.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(A,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(X,I,e){"use strict";var A=e(3400),k=e(59392),o=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,t,i,n){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=i,this.isHidden=n,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol",cluster:o+t+"-cluster",clusterCount:o+t+"-cluster-count"},this.below=null}var p=b.prototype;p.addSource=function(s,t,i){var n={type:"geojson",data:t.geojson};i&&i.enabled&&A.extendFlat(n,{cluster:!0,clusterMaxZoom:i.maxzoom});var r=this.subplot.map.getSource(this.sourceIds[s]);r?r.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],n)},p.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},p.addLayer=function(s,t,i){var n={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(n.filter=t.filter);for(var r,a=this.layerIds[s],l=this.subplot.getMapLayers(),c=0;c<l.length;c++)if(l[c].id===a){r=!0;break}r?(this.subplot.setOptions(a,"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",n.paint)):this.subplot.addLayer(n,i)},p.update=function(s){var t=s[0].trace,i=this.subplot,n=i.map,r=k(i.gd,s),a=i.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),c=!!this.clusterEnabled,h=this;function u(y){c?function(v){for(var _=T.cluster,f=_.length-1;f>=0;f--){var S=_[f];n.removeLayer(h.layerIds[S])}v||n.removeSource(h.sourceIds.circle)}(y):function(v){for(var _=T.nonCluster,f=_.length-1;f>=0;f--){var S=_[f];n.removeLayer(h.layerIds[S]),v||n.removeSource(h.sourceIds[S])}}(y)}function x(y){l?function(v){v||h.addSource("circle",r.circle,t.cluster);for(var _=T.cluster,f=0;f<_.length;f++){var S=_[f],w=r[S];h.addLayer(S,w,a)}}(y):function(v){for(var _=T.nonCluster,f=0;f<_.length;f++){var S=_[f],w=r[S];v||h.addSource(S,w),h.addLayer(S,w,a)}}(y)}function d(){for(var y=l?T.cluster:T.nonCluster,v=0;v<y.length;v++){var _=y[v],f=r[_];f&&(i.setOptions(h.layerIds[_],"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&(_!=="cluster"&&h.setSourceData(_,f),i.setOptions(h.layerIds[_],"setPaintProperty",f.paint)))}}var m=this.isHidden,g=t.visible!==!0;g?m||u():m?g||x():c!==l?(u(),x()):(this.below!==a&&(u(!0),x(!0)),d()),this.clusterEnabled=l,this.isHidden=g,this.below=a,s[0].trace._glTrace=this},p.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,i=t.length-1;i>=0;i--){var n=t[i];s.removeLayer(this.layerIds[n]),s.removeSource(this.sourceIds[n])}},X.exports=function(s,t){var i,n,r,a=t[0].trace,l=a.cluster&&a.cluster.enabled,c=a.visible!==!0,h=new b(s,a.uid,l,c),u=k(s.gd,t),x=h.below=s.belowLookup["trace-"+a.uid];if(l)for(h.addSource("circle",u.circle,a.cluster),i=0;i<T.cluster.length;i++)r=u[n=T.cluster[i]],h.addLayer(n,r,x);else for(i=0;i<T.nonCluster.length;i++)r=u[n=T.nonCluster[i]],h.addSource(n,r,a.cluster),h.addLayer(n,r,x);return t[0].trace._glTrace=h,h}},404:function(X,I,e){"use strict";var A=e(3400),k=e(43028),o=e(39032).BADNUM;X.exports=function(T,b){var p,s=T.cd,t=T.xaxis,i=T.yaxis,n=[],r=s[0].trace;if(!k.hasMarkers(r))return[];if(b===!1)for(p=0;p<s.length;p++)s[p].selected=0;else for(p=0;p<s.length;p++){var a=s[p],l=a.lonlat;if(l[0]!==o){var c=[A.modHalf(l[0],360),l[1]],h=[t.c2p(c),i.c2p(c)];b.contains(h,null,p,T)?(n.push({pointNumber:p,lon:l[0],lat:l[1]}),a.selected=1):a.selected=0}}return n}},8319:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),p=e(45464),s=b.line;X.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:A(),selected:b.selected,unselected:b.unselected}},58320:function(X,I,e){"use strict";var A=e(38248),k=e(39032).BADNUM,o=e(54460),T=e(90136),b=e(20148),p=e(4500),s=e(16356).calcMarkerSize;X.exports=function(t,i){for(var n=t._fullLayout,r=i.subplot,a=n[r].radialaxis,l=n[r].angularaxis,c=a.makeCalcdata(i,"r"),h=l.makeCalcdata(i,"theta"),u=i._length,x=new Array(u),d=0;d<u;d++){var m=c[d],g=h[d],y=x[d]={};A(m)&&A(g)?(y.r=m,y.theta=g):y.r=k}var v=s(i,u);return i._extremes.x=o.findExtremes(a,c,{ppad:v}),T(t,i),b(x,i),p(x,i),x}},85968:function(X,I,e){"use strict";var A=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),p=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function n(r,a,l,c){var h,u=c("r"),x=c("theta");if(A.isTypedArray(u)&&(a.r=u=Array.from(u)),A.isTypedArray(x)&&(a.theta=x=Array.from(x)),u)x?h=Math.min(u.length,x.length):(h=u.length,c("theta0"),c("dtheta"));else{if(!x)return 0;h=a.theta.length,c("r0"),c("dr")}return a._length=h,h}X.exports={handleRThetaDefaults:n,supplyDefaults:function(r,a,l,c){function h(d,m){return A.coerce(r,a,i,d,m)}var u=n(0,a,0,h);if(u){h("thetaunit"),h("mode",u<t?"lines+markers":"lines"),h("text"),h("hovertext"),a.hoveron!=="fills"&&h("hovertemplate"),k.hasMarkers(a)&&o(r,a,l,c,h,{gradient:!0}),k.hasLines(a)&&(T(r,a,l,c,h,{backoff:!0}),b(r,a,h),h("connectgaps")),k.hasText(a)&&(h("texttemplate"),p(r,a,c,h));var x=[];(k.hasMarkers(a)||k.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),x.push("points")),h("fill"),a.fill!=="none"&&(s(r,a,l,h),k.hasLines(a)||b(r,a,h)),a.fill!=="tonext"&&a.fill!=="toself"||x.push("fills"),h("hoveron",x.join("+")||"points"),A.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},22852:function(X,I,e){"use strict";var A=e(3400),k=e(54460);X.exports=function(o,T,b){var p,s,t={},i=b[T.subplot]._subplot;i?(p=i.radialAxis,s=i.angularAxis):(p=(i=b[T.subplot]).radialaxis,s=i.angularaxis);var n=p.c2l(o.r);t.rLabel=k.tickText(p,n,!0).text;var r=s.thetaunit==="degrees"?A.rad2deg(o.theta):o.theta;return t.thetaLabel=k.tickText(s,r,!0).text,t}},8504:function(X,I,e){"use strict";var A=e(98723);function k(o,T,b,p){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="r",t._hovertitle="\u03B8";var i={};i[T.subplot]={_subplot:b};var n=T._module.formatLabels(o,T,i);p.rLabel=n.rLabel,p.thetaLabel=n.thetaLabel;var r=o.hi||T.hoverinfo,a=[];function l(h,u){a.push(h._hovertitle+": "+u)}if(!T.hovertemplate){var c=r.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&l(s,p.rLabel),c.indexOf("theta")!==-1&&l(t,p.thetaLabel),c.indexOf("text")!==-1&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}X.exports={hoverPoints:function(o,T,b,p){var s=A(o,T,b,p);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=o.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,i,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:k}},76924:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(X,I,e){"use strict";var A=e(96504),k=e(39032).BADNUM;X.exports=function(o,T,b){for(var p=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,i={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},n=T.radialAxis,r=T.angularAxis,a=0;a<b.length;a++)for(var l=b[a],c=0;c<l.length;c++){c===0&&(l[0].trace._xA=s,l[0].trace._yA=t);var h=l[c],u=h.r;if(u===k)h.x=h.y=k;else{var x=n.c2g(u),d=r.c2g(h.theta);h.x=x*Math.cos(d),h.y=x*Math.sin(d)}}A(o,i,b,p)}},24396:function(X,I,e){"use strict";var A=e(8319),k=e(2876),o=e(21776).Gw;X.exports={mode:A.mode,r:A.r,theta:A.theta,r0:A.r0,dr:A.dr,theta0:A.theta0,dtheta:A.dtheta,thetaunit:A.thetaunit,text:A.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:A.hovertext,hovertemplate:A.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:A.hoverinfo,selected:A.selected,unselected:A.unselected}},27160:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(X,I,e){"use strict";var A=e(90136),k=e(16356).calcMarkerSize,o=e(84236),T=e(54460),b=e(67072).TOO_MANY_POINTS;X.exports=function(p,s){var t=p._fullLayout,i=s.subplot,n=t[i].radialaxis,r=t[i].angularaxis,a=s._r=n.makeCalcdata(s,"r"),l=s._theta=r.makeCalcdata(s,"theta"),c=s._length,h={};c<a.length&&(a=a.slice(0,c)),c<l.length&&(l=l.slice(0,c)),h.r=a,h.theta=l,A(p,s);var u,x=h.opts=o.style(p,s);return c<b?u=k(s,c):x.marker&&(u=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(n,a,{ppad:u}),[{x:!1,y:!1,t:h,trace:s}]}},98608:function(X,I,e){"use strict";var A=e(3400),k=e(43028),o=e(85968).handleRThetaDefaults,T=e(74428),b=e(66828),p=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);X.exports=function(n,r,a,l){function c(u,x){return A.coerce(n,r,i,u,x)}var h=o(n,r,l,c);h?(c("thetaunit"),c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),r.hoveron!=="fills"&&c("hovertemplate"),k.hasMarkers(r)&&T(n,r,a,l,c,{noAngleRef:!0,noStandOff:!0}),k.hasLines(r)&&(b(n,r,a,l,c),c("connectgaps")),k.hasText(r)&&(c("texttemplate"),p(n,r,l,c,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),c("fill"),r.fill!=="none"&&s(n,r,a,c),A.coerceSelectionMarkerOpacity(r,c)):r.visible=!1}},94120:function(X,I,e){"use strict";var A=e(22852);X.exports=function(k,o,T){var b=k.i;return"r"in k||(k.r=o._r[b]),"theta"in k||(k.theta=o._theta[b]),A(k,o,T)}},1600:function(X,I,e){"use strict";var A=e(41272),k=e(8504).makeHoverPointText;X.exports={hoverPoints:function(o,T,b,p){var s=o.cd[0].t,t=s.r,i=s.theta,n=A.hoverPoints(o,T,b,p);if(n&&n[0].index!==!1){var r=n[0];if(r.index===void 0)return n;var a=o.subplot,l=r.cd[r.index],c=r.trace;if(l.r=t[r.index],l.theta=i[r.index],a.isPtInside(l))return r.xLabelVal=void 0,r.yLabelVal=void 0,k(l,c,a,r),n}}}},62944:function(X,I,e){"use strict";var A=e(27160);A.plot=e(56512),X.exports=A},56512:function(X,I,e){"use strict";var A=e(3108),k=e(38248),o=e(89876),T=e(74588),b=e(84236),p=e(3400),s=e(67072).TOO_MANY_POINTS;X.exports=function(t,i,n){if(n.length){var r=i.radialAxis,a=i.angularAxis,l=T(t,i);return n.forEach(function(c){if(c&&c[0]&&c[0].trace){var h,u=c[0],x=u.trace,d=u.t,m=x._length,g=d.r,y=d.theta,v=d.opts,_=g.slice(),f=y.slice();for(h=0;h<g.length;h++)i.isPtInside({r:g[h],theta:y[h]})||(_[h]=NaN,f[h]=NaN);var S=new Array(2*m),w=Array(m),E=Array(m);for(h=0;h<m;h++){var P,C,O=_[h];if(k(O)){var R=r.c2g(O),U=a.c2g(f[h],x.thetaunit);P=R*Math.cos(U),C=R*Math.sin(U)}else P=C=NaN;w[h]=S[2*h]=P,E[h]=S[2*h+1]=C}d.tree=A(S),v.marker&&m>=s&&(v.marker.cluster=d.tree),v.marker&&(v.markerSel.positions=v.markerUnsel.positions=v.marker.positions=S),v.line&&S.length>1&&p.extendFlat(v.line,b.linePositions(t,x,S)),v.text&&(p.extendFlat(v.text,{positions:S},b.textPosition(t,x,v.text,v.marker)),p.extendFlat(v.textSel,{positions:S},b.textPosition(t,x,v.text,v.markerSel)),p.extendFlat(v.textUnsel,{positions:S},b.textPosition(t,x,v.text,v.markerUnsel))),v.fill&&!l.fill2d&&(l.fill2d=!0),v.marker&&!l.scatter2d&&(l.scatter2d=!0),v.line&&!l.line2d&&(l.line2d=!0),v.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(v.line),l.fillOptions.push(v.fill),l.markerOptions.push(v.marker),l.markerSelectedOptions.push(v.markerSel),l.markerUnselectedOptions.push(v.markerUnsel),l.textOptions.push(v.text),l.textSelectedOptions.push(v.textSel),l.textUnselectedOptions.push(v.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),d.x=w,d.y=E,d.rawx=w,d.rawy=E,d.r=g,d.theta=y,d.positions=S,d._scene=l,d.index=l.count,l.count++}}),o(t,i,n)}},X.exports.reglPrecompiled={}},69496:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),p=e(45464),s=b.line;X.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},p.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:A(),selected:b.selected,unselected:b.unselected}},47507:function(X,I,e){"use strict";var A=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),p=e(16356).calcMarkerSize;X.exports=function(s,t){for(var i=s._fullLayout,n=t.subplot,r=i[n].realaxis,a=i[n].imaginaryaxis,l=r.makeCalcdata(t,"real"),c=a.makeCalcdata(t,"imag"),h=t._length,u=new Array(h),x=0;x<h;x++){var d=l[x],m=c[x],g=u[x]={};A(d)&&A(m)?(g.real=d,g.imag=m):g.real=k}return p(t,h),o(s,t),T(u,t),b(u,t),u}},76716:function(X,I,e){"use strict";var A=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),p=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);X.exports=function(n,r,a,l){function c(x,d){return A.coerce(n,r,i,x,d)}var h=function(x,d,m,g){var y,v=g("real"),_=g("imag");return v&&_&&(y=Math.min(v.length,_.length)),A.isTypedArray(v)&&(d.real=v=Array.from(v)),A.isTypedArray(_)&&(d.imag=_=Array.from(_)),d._length=y,y}(0,r,0,c);if(h){c("mode",h<t?"lines+markers":"lines"),c("text"),c("hovertext"),r.hoveron!=="fills"&&c("hovertemplate"),k.hasMarkers(r)&&o(n,r,a,l,c,{gradient:!0}),k.hasLines(r)&&(T(n,r,a,l,c,{backoff:!0}),b(n,r,c),c("connectgaps")),k.hasText(r)&&(c("texttemplate"),p(n,r,l,c));var u=[];(k.hasMarkers(r)||k.hasText(r))&&(c("cliponaxis"),c("marker.maxdisplayed"),u.push("points")),c("fill"),r.fill!=="none"&&(s(n,r,a,c),k.hasLines(r)||b(n,r,c)),r.fill!=="tonext"&&r.fill!=="toself"||u.push("fills"),c("hoveron",u.join("+")||"points"),A.coerceSelectionMarkerOpacity(r,c)}else r.visible=!1}},49504:function(X,I,e){"use strict";var A=e(54460);X.exports=function(k,o,T){var b={},p=T[o.subplot]._subplot;return b.realLabel=A.tickText(p.radialAxis,k.real,!0).text,b.imagLabel=A.tickText(p.angularAxis,k.imag,!0).text,b}},25292:function(X,I,e){"use strict";var A=e(98723);function k(o,T,b,p){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="real",t._hovertitle="imag";var i={};i[T.subplot]={_subplot:b};var n=T._module.formatLabels(o,T,i);p.realLabel=n.realLabel,p.imagLabel=n.imagLabel;var r=o.hi||T.hoverinfo,a=[];function l(h,u){a.push(h._hovertitle+": "+u)}if(!T.hovertemplate){var c=r.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&l(s,p.realLabel),c.indexOf("imag")!==-1&&l(t,p.imagLabel),c.indexOf("text")!==-1&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}X.exports={hoverPoints:function(o,T,b,p){var s=A(o,T,b,p);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=o.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,i,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:k}},95443:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(X,I,e){"use strict";var A=e(96504),k=e(39032).BADNUM,o=e(36416).smith;X.exports=function(T,b,p){for(var s=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,i=b.yaxis,n={xaxis:t,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},r=0;r<p.length;r++)for(var a=p[r],l=0;l<a.length;l++){l===0&&(a[0].trace._xA=t,a[0].trace._yA=i);var c=a[l],h=c.real;if(h===k)c.x=c.y=k;else{var u=o([h,c.imag]);c.x=u[0],c.y=u[1]}}A(T,n,p,s)}},5896:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),p=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=T.marker,n=T.line,r=i.line;X.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width,dash:s,backoff:n.backoff,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:r.width,editType:"calc"},p("marker.line")),gradient:i.gradient,editType:"calc"},p("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:A()}},34335:function(X,I,e){"use strict";var A=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,p=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};X.exports=function(t,i){var n,r,a,l,c,h,u=t._fullLayout[i.subplot].sum,x=i.sum||u,d={a:i.a,b:i.b,c:i.c};for(n=0;n<p.length;n++)if(!d[a=p[n]]){for(c=d[s[a][0]],h=d[s[a][1]],l=new Array(c.length),r=0;r<c.length;r++)l[r]=x-c[r]-h[r];d[a]=l}var m,g,y,v,_,f,S=i._length,w=new Array(S);for(n=0;n<S;n++)m=d.a[n],g=d.b[n],y=d.c[n],A(m)&&A(g)&&A(y)?((v=u/((m=+m)+(g=+g)+(y=+y)))!=1&&(m*=v,g*=v,y*=v),f=m,_=y-g,w[n]={x:_,y:f,a:m,b:g,c:y}):w[n]={x:!1,y:!1};return b(i,S),k(t,i),o(w,i),T(w,i),w}},84256:function(X,I,e){"use strict";var A=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),p=e(11731),s=e(124),t=e(70840),i=e(5896);X.exports=function(n,r,a,l){function c(g,y){return A.coerce(n,r,i,g,y)}var h,u=c("a"),x=c("b"),d=c("c");if(u?(h=u.length,x?(h=Math.min(h,x.length),d&&(h=Math.min(h,d.length))):h=d?Math.min(h,d.length):0):x&&d&&(h=Math.min(x.length,d.length)),h){r._length=h,c("sum"),c("text"),c("hovertext"),r.hoveron!=="fills"&&c("hovertemplate"),c("mode",h<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(r)&&T(n,r,a,l,c,{gradient:!0}),o.hasLines(r)&&(b(n,r,a,l,c,{backoff:!0}),p(n,r,c),c("connectgaps")),o.hasText(r)&&(c("texttemplate"),s(n,r,l,c));var m=[];(o.hasMarkers(r)||o.hasText(r))&&(c("cliponaxis"),c("marker.maxdisplayed"),m.push("points")),c("fill"),r.fill!=="none"&&(t(n,r,a,c),o.hasLines(r)||p(n,r,c)),r.fill!=="tonext"&&r.fill!=="toself"||m.push("fills"),c("hoveron",m.join("+")||"points"),A.coerceSelectionMarkerOpacity(r,c)}else r.visible=!1}},97476:function(X){"use strict";X.exports=function(I,e,A,k,o){if(e.xa&&(I.xaxis=e.xa),e.ya&&(I.yaxis=e.ya),k[o]){var T=k[o];I.a=T.a,I.b=T.b,I.c=T.c}else I.a=e.a,I.b=e.b,I.c=e.c;return I}},90404:function(X,I,e){"use strict";var A=e(54460);X.exports=function(k,o,T){var b={},p=T[o.subplot]._subplot;return b.aLabel=A.tickText(p.aaxis,k.a,!0).text,b.bLabel=A.tickText(p.baxis,k.b,!0).text,b.cLabel=A.tickText(p.caxis,k.c,!0).text,b}},26596:function(X,I,e){"use strict";var A=e(98723);X.exports=function(k,o,T,b){var p=A(k,o,T,b);if(p&&p[0].index!==!1){var s=p[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,i=k.xa._length,n=i*t/2,r=i-n;return s.x0=Math.max(Math.min(s.x0,r),n),s.x1=Math.max(Math.min(s.x1,r),n),p}var a=s.cd[s.index],l=s.trace,c=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var h={};h[l.subplot]={_subplot:c};var u=l._module.formatLabels(a,l,h);s.aLabel=u.aLabel,s.bLabel=u.bLabel,s.cLabel=u.cLabel;var x=a.hi||l.hoverinfo,d=[];if(!l.hovertemplate){var m=x.split("+");m.indexOf("all")!==-1&&(m=["a","b","c"]),m.indexOf("a")!==-1&&g(c.aaxis,s.aLabel),m.indexOf("b")!==-1&&g(c.baxis,s.bLabel),m.indexOf("c")!==-1&&g(c.caxis,s.cLabel)}return s.extraText=d.join("<br>"),s.hovertemplate=l.hovertemplate,p}function g(y,v){d.push(y._hovertitle+": "+v)}}},34864:function(X,I,e){"use strict";X.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(X,I,e){"use strict";var A=e(96504);X.exports=function(k,o,T){var b=o.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var p=o.xaxis,s=o.yaxis,t={xaxis:p,yaxis:s,plot:b,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},i=o.layers.frontplot.select("g.scatterlayer"),n=0;n<T.length;n++){var r=T[n];r.length&&(r[0].trace._xA=p,r[0].trace._yA=s)}A(k,t,T,i)}},44524:function(X,I,e){"use strict";var A=e(52904),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(2876),p=e(33816).idRegex,s=e(31780).templatedArray,t=e(92880).extendFlat,i=A.marker,n=i.line,r=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},n.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:r,editType:"calc"});function l(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:p[c],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",X.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),marker:a,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},28888:function(X,I,e){"use strict";var A=e(24040),k=e(12704);X.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},A.register(k)},99332:function(X,I,e){"use strict";var A=e(13472),k=e(24040),o=e(5048),T=e(84888)._M,b=e(57952),p=e(79811).getFromId,s=e(54460).shouldShowZeroLine,t="splom",i={};function n(a,l,c){for(var h=c.matrixOptions.data.length,u=l._visibleDims,x=c.viewOpts.ranges=new Array(h),d=0;d<u.length;d++){var m=u[d],g=x[d]=new Array(4),y=p(a,l._diag[m][0]);y&&(g[0]=y.r2l(y.range[0]),g[2]=y.r2l(y.range[1]));var v=p(a,l._diag[m][1]);v&&(g[1]=v.r2l(v.range[0]),g[3]=v.r2l(v.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:x},{ranges:x}):c.matrix.update({ranges:x})}function r(a){var l=a._fullLayout,c=l._glcanvas.data()[0].regl,h=l._splomGrid;h||(h=l._splomGrid=A(c)),h.update(function(u){var x,d=u._context.plotGlPixelRatio,m=u._fullLayout,g=m._size,y=[0,0,m.width*d,m.height*d],v={};function _(q,te,ee,Q,J,K){ee*=d,Q*=d,J*=d,K*=d;var Y=te[q+"color"],ie=te[q+"width"],se=String(Y+ie);se in v?v[se].data.push(NaN,NaN,ee,Q,J,K):v[se]={data:[ee,Q,J,K],join:"rect",thickness:ie*d,color:Y,viewport:y,range:y,overlay:!1}}for(x in m._splomSubplots){var f,S,w=m._plots[x],E=w.xaxis,P=w.yaxis,C=E._gridVals,O=P._gridVals,R=E._offset,U=E._length,D=P._length,N=g.b+P.domain[0]*g.h,W=-P._m,F=-W*P.r2l(P.range[0],P.calendar);if(E.showgrid)for(x=0;x<C.length;x++)f=R+E.l2p(C[x].x),_("grid",E,f,N,f,N+D);if(P.showgrid)for(x=0;x<O.length;x++)_("grid",P,R,S=N+F+W*O[x].x,R+U,S);s(u,E,P)&&(f=R+E.l2p(0),_("zeroline",E,f,N,f,N+D)),s(u,P,E)&&_("zeroline",P,R,S=N+F+0,R+U,S)}var j=[];for(x in v)j.push(v[x]);return j}(a))}X.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(a){var l=a._fullLayout,c=k.getModule(t),h=T(a.calcdata,c)[0];o(a,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(l._hasOnlyLargeSploms&&r(a),c.plot(a,{},h))},drag:function(a){var l=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&r(a);for(var h=0;h<l.length;h++){var u=l[h][0].trace,x=c._splomScenes[u.uid];u.type==="splom"&&x&&x.matrix&&n(a,u,x)}},updateGrid:r,clean:function(a,l,c,h){var u,x={};if(h._splomScenes){for(u=0;u<a.length;u++){var d=a[u];d.type==="splom"&&(x[d.uid]=1)}for(u=0;u<c.length;u++){var m=c[u];if(!x[m.uid]){var g=h._splomScenes[m.uid];g&&g.destroy&&g.destroy(),h._splomScenes[m.uid]=null,delete h._splomScenes[m.uid]}}}Object.keys(h._splomScenes||{}).length===0&&delete h._splomScenes,h._splomGrid&&!l._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),b.clean(a,l,c,h)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},66821:function(X,I,e){"use strict";var A=e(3400),k=e(79811),o=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,b=e(90136),p=e(84236).markerSelection,s=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,n=e(67072).TOO_MANY_POINTS;X.exports=function(r,a){var l,c,h,u,x,d,m=a.dimensions,g=a._length,y={},v=y.cdata=[],_=y.data=[],f=a._visibleDims=[];function S(E,P){for(var C=E.makeCalcdata({v:P.values,vcalendar:a.calendar},"v"),O=0;O<C.length;O++)C[O]=C[O]===i?NaN:C[O];v.push(C),_.push(E.type==="log"?A.simpleMap(C,E.c2l):C)}for(l=0;l<m.length;l++)if((h=m[l]).visible){if(u=k.getFromId(r,a._diag[l][0]),x=k.getFromId(r,a._diag[l][1]),u&&x&&u.type!==x.type){A.log("Skipping splom dimension "+l+" with conflicting axis types");continue}u?(S(u,h),x&&x.type==="category"&&(x._categories=u._categories.slice())):S(x,h),f.push(l)}for(b(r,a),A.extendFlat(y,s(r,a)),d=v.length*g>n?y.sizeAvg||Math.max(y.size,3):o(a,g),c=0;c<f.length;c++)h=m[l=f[c]],u=k.getFromId(r,a._diag[l][0])||{},x=k.getFromId(r,a._diag[l][1])||{},T(r,a,u,x,v[c],v[c],d);var w=t(r,a);return w.matrix||(w.matrix=!0),w.matrixOptions=y,w.selectedOptions=p(r,a,a.selected),w.unselectedOptions=p(r,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},69544:function(X,I,e){"use strict";var A=e(3400),k=e(51272),o=e(44524),T=e(43028),b=e(74428),p=e(26284),s=e(80088).isOpenSymbol;function t(i,n){function r(l,c){return A.coerce(i,n,o.dimensions,l,c)}r("label");var a=r("values");a&&a.length?r("visible"):n.visible=!1,r("axis.type"),r("axis.matches")}X.exports=function(i,n,r,a){function l(g,y){return A.coerce(i,n,o,g,y)}var c=k(i,n,{name:"dimensions",handleItemDefaults:t}),h=l("diagonal.visible"),u=l("showupperhalf"),x=l("showlowerhalf");if(p(n,c,"values")&&(h||u||x)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),b(i,n,r,a,l,{noAngleRef:!0,noStandOff:!0});var d=s(n.marker.symbol),m=T.isBubble(n);l("marker.line.width",d||m?1:0),function(g,y,v,_){var f,S,w=y.dimensions,E=w.length,P=y.showupperhalf,C=y.showlowerhalf,O=y.diagonal.visible,R=new Array(E),U=new Array(E);for(f=0;f<E;f++){var D=f?f+1:"";R[f]="x"+D,U[f]="y"+D}var N=_("xaxes",R),W=_("yaxes",U),F=y._diag=new Array(E);y._xaxes={},y._yaxes={};var j=[],q=[];function te(ue,ve,ye,de){if(ue){var pe=ue.charAt(0),ge=v._splomAxes[pe];if(y["_"+pe+"axes"][ue]=1,de.push(ue),!(ue in ge)){var ke=ge[ue]={};ye&&(ke.label=ye.label||"",ye.visible&&ye.axis&&(ye.axis.type&&(ke.type=ye.axis.type),ye.axis.matches&&(ke.matches=ve)))}}}var ee=!O&&!C,Q=!O&&!P;for(y._axesDim={},f=0;f<E;f++){var J=w[f],K=f===0,Y=f===E-1,ie=K&&ee||Y&&Q?void 0:N[f],se=K&&Q||Y&&ee?void 0:W[f];te(ie,se,J,j),te(se,ie,J,q),F[f]=[ie,se],y._axesDim[ie]=f,y._axesDim[se]=f}for(f=0;f<j.length;f++)for(S=0;S<q.length;S++){var ae=j[f]+q[S];f>S&&P||f<S&&C?v._splomSubplots[ae]=1:f!==S||!O&&C&&P||(v._splomSubplots[ae]=1)}(!C||!O&&P&&C)&&(v._splomGridDflt.xside="bottom",v._splomGridDflt.yside="left")}(0,n,a,l),A.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},83156:function(X,I,e){"use strict";var A=e(3400),k=e(90136),o=e(84236).markerStyle;X.exports=function(T,b){var p=b.trace,s=T._fullLayout._splomScenes[p.uid];if(s){k(T,p),A.extendFlat(s.matrixOptions,o(T,p));var t=A.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},50328:function(X,I){"use strict";I.getDimIndex=function(e,A){for(var k=A._id,o={x:0,y:1}[k.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++){var p=T[b];if(e._diag[p][o]===k)return b}return!1}},72248:function(X,I,e){"use strict";var A=e(50328),k=e(41272).calcHover,o=e(54460).getFromId,T=e(92880).extendFlat;function b(p,s,t,i){var n=p.cd[0].trace,r=p.scene.matrixOptions.cdata,a=p.xa,l=p.ya,c=a.c2p(s),h=l.c2p(t),u=p.distance,x=A.getDimIndex(n,a),d=A.getDimIndex(n,l);if(x===!1||d===!1)return[p];for(var m,g,y=r[x],v=r[d],_=u,f=0;f<y.length;f++)if(!i||f===p.index){var S=y[f],w=v[f],E=a.c2p(S)-c,P=l.c2p(w)-h,C=Math.sqrt(E*E+P*P);(i||C<_)&&(_=g=C,m=f)}return p.index=m,p.distance=_,p.dxy=g,m===void 0?[p]:[k(p,y,v,n)]}X.exports={hoverPoints:function(p,s,t,i,n){n||(n={});var r=(i||"").charAt(0)==="x",a=(i||"").charAt(0)==="y",l=b(p,s,t);if((r||a)&&n.hoversubplots==="axis"&&l[0])for(var c=(r?p.xa:p.ya)._subplotsWith,h=n.gd,u=T({},p),x=0;x<c.length;x++){var d=c[x];if(d!==p.xa._id+p.ya._id){a?u.xa=o(h,d,"x"):u.ya=o(h,d,"y");var m=b(u,s,t,r||a);l=l.concat(m)}}return l}}},97924:function(X,I,e){"use strict";var A=e(28888);A.basePlotModule=e(99332),X.exports=A},54840:function(X,I,e){"use strict";var A=e(55795),k=e(3400),o=e(79811),T=e(72760).selectMode;function b(p,s){var t,i,n,r,a,l=p._fullLayout,c=l._size,h=s.trace,u=s.t,x=l._splomScenes[h.uid],d=x.matrixOptions,m=d.cdata,g=l._glcanvas.data()[0].regl,y=l.dragmode;if(m.length!==0){d.lower=h.showupperhalf,d.upper=h.showlowerhalf,d.diagonal=h.diagonal.visible;var v=h._visibleDims,_=m.length,f=x.viewOpts={};for(f.ranges=new Array(_),f.domains=new Array(_),a=0;a<v.length;a++){n=v[a];var S=f.ranges[a]=new Array(4),w=f.domains[a]=new Array(4);(t=o.getFromId(p,h._diag[n][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(i=o.getFromId(p,h._diag[n][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=p._context.plotGlPixelRatio,P=c.l*E,C=c.b*E,O=c.w*E,R=c.h*E;f.viewport=[P,C,O+P,R+C],x.matrix===!0&&(x.matrix=A(g));var U=l.clickmode.indexOf("select")>-1,D=!0;if(T(y)||h.selectedpoints||U){var N=h._length;if(h.selectedpoints){x.selectBatch=h.selectedpoints;var W=h.selectedpoints,F={};for(n=0;n<W.length;n++)F[W[n]]=!0;var j=[];for(n=0;n<N;n++)F[n]||j.push(n);x.unselectBatch=j}var q=u.xpx=new Array(_),te=u.ypx=new Array(_);for(a=0;a<v.length;a++){if(n=v[a],t=o.getFromId(p,h._diag[n][0]))for(q[a]=new Array(N),r=0;r<N;r++)q[a][r]=t.c2p(m[a][r]);if(i=o.getFromId(p,h._diag[n][1]))for(te[a]=new Array(N),r=0;r<N;r++)te[a][r]=i.c2p(m[a][r])}if(x.selectBatch.length||x.unselectBatch.length){var ee=k.extendFlat({},d,x.unselectedOptions,f),Q=k.extendFlat({},d,x.selectedOptions,f);x.matrix.update(ee,Q),D=!1}}else u.xpx=u.ypx=null;if(D){var J=k.extendFlat({},d,f);x.matrix.update(J,null)}}}X.exports=function(p,s,t){if(t.length)for(var i=0;i<t.length;i++)b(p,t[i][0])}},72308:function(X,I,e){"use strict";var A=e(3400);X.exports=function(k,o){var T=k._fullLayout,b=o.uid,p=T._splomScenes;p||(p=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=p[o.uid];return t||((t=p[b]=A.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||A.extendFlat(t,s),t}},62500:function(X,I,e){"use strict";var A=e(3400),k=A.pushUnique,o=e(43028),T=e(50328);X.exports=function(b,p){var s=b.cd,t=s[0].trace,i=s[0].t,n=b.scene,r=n.matrixOptions.cdata,a=b.xaxis,l=b.yaxis,c=[];if(!n)return c;var h=!o.hasMarkers(t)&&!o.hasText(t);if(t.visible!==!0||h)return c;var u=T.getDimIndex(t,a),x=T.getDimIndex(t,l);if(u===!1||x===!1)return c;var d=i.xpx[u],m=i.ypx[x],g=r[u],y=r[x],v=(b.scene.selectBatch||[]).slice(),_=[];if(p!==!1&&!p.degenerate)for(var f=0;f<g.length;f++)p.contains([d[f],m[f]],null,f,b)?(c.push({pointNumber:f,x:g[f],y:y[f]}),k(v,f)):v.indexOf(f)!==-1?k(v,f):_.push(f);var S=n.matrixOptions;return v.length||_.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,A.extendFlat({},S,n.selectedOptions,n.viewOpts)):n.matrix.update(S,null),n.selectBatch=v,n.unselectBatch=_,c}},90167:function(X,I,e){"use strict";var A=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),p=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},b.showlegend,{dflt:!1})};p(s,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=p({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,X.exports=s},3832:function(X,I,e){"use strict";var A=e(3400),k=e(47128);function o(p){var s,t,i,n,r,a,l,c,h,u,x,d,m=p._x,g=p._y,y=p._z,v=p._len,_=-1/0,f=1/0,S=-1/0,w=1/0,E=-1/0,P=1/0,C="";for(v&&(l=m[0],h=g[0],x=y[0]),v>1&&(c=m[v-1],u=g[v-1],d=y[v-1]),s=0;s<v;s++)_=Math.max(_,m[s]),f=Math.min(f,m[s]),S=Math.max(S,g[s]),w=Math.min(w,g[s]),E=Math.max(E,y[s]),P=Math.min(P,y[s]),n||m[s]===l||(n=!0,C+="x"),r||g[s]===h||(r=!0,C+="y"),a||y[s]===x||(a=!0,C+="z");n||(C+="x"),r||(C+="y"),a||(C+="z");var O=T(p._x),R=T(p._y),U=T(p._z);C=(C=(C=C.replace("x",(l>c?"-":"+")+"x")).replace("y",(h>u?"-":"+")+"y")).replace("z",(x>d?"-":"+")+"z");var D=function(){v=0,O=[],R=[],U=[]};(!v||v<O.length*R.length*U.length)&&D();var N=function(pe){return pe==="x"?m:pe==="y"?g:y},W=function(pe){return pe==="x"?O:pe==="y"?R:U},F=function(pe){return pe[v-1]<pe[0]?-1:1},j=N(C[1]),q=N(C[3]),te=N(C[5]),ee=W(C[1]).length,Q=W(C[3]).length,J=W(C[5]).length,K=!1,Y=function(pe,ge,ke){return ee*(Q*pe+ge)+ke},ie=F(N(C[1])),se=F(N(C[3])),ae=F(N(C[5]));for(s=0;s<J-1;s++){for(t=0;t<Q-1;t++){for(i=0;i<ee-1;i++){var ue=Y(s,t,i),ve=Y(s,t,i+1),ye=Y(s,t+1,i),de=Y(s+1,t,i);if(j[ue]*ie<j[ve]*ie&&q[ue]*se<q[ye]*se&&te[ue]*ae<te[de]*ae||(K=!0),K)break}if(K)break}if(K)break}return K&&(A.warn("Encountered arbitrary coordinates! Unable to input data grid."),D()),{xMin:f,yMin:w,zMin:P,xMax:_,yMax:S,zMax:E,Xs:O,Ys:R,Zs:U,len:v,fill:C}}function T(p){return A.distinctVals(p).vals}function b(p,s){if(s===void 0&&(s=p.length),A.isTypedArray(p))return p.subarray(0,s);for(var t=[],i=0;i<s;i++)t[i]=+p[i];return t}X.exports={calc:function(p,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var t=o(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var i,n,r,a=0;s.starts&&(i=b(s.starts.x||[]),n=b(s.starts.y||[]),r=b(s.starts.z||[]),a=Math.min(i.length,n.length,r.length)),s._startsX=i||[],s._startsY=n||[],s._startsZ=r||[];var l,c=0,h=1/0;for(l=0;l<s._len;l++){var u=s._u[l],x=s._v[l],d=s._w[l],m=Math.sqrt(u*u+x*x+d*d);c=Math.max(c,m),h=Math.min(h,m)}for(k(p,s,{vals:[h,c],containerStr:"",cLetter:"c"}),l=0;l<a;l++){var g=i[l];t.xMax=Math.max(t.xMax,g),t.xMin=Math.min(t.xMin,g);var y=n[l];t.yMax=Math.max(t.yMax,y),t.yMin=Math.min(t.yMin,y);var v=r[l];t.zMax=Math.max(t.zMax,v),t.zMin=Math.min(t.zMin,v)}s._slen=a,s._normMax=c,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:o}},25668:function(X,I,e){"use strict";var A=e(67792).gl_streamtube3d,k=A.createTubeMesh,o=e(3400),T=e(33040).parseColorScale,b=e(8932).extractOpts,p=e(52094),s={xaxis:0,yaxis:1,zaxis:2};function t(l,c){this.scene=l,this.uid=c,this.mesh=null,this.data=null}var i=t.prototype;function n(l){var c=l.length;return c>2?l.slice(1,c-1):c===2?[(l[0]+l[1])/2]:l}function r(l){var c=l.length;return c===1?[.5,.5]:[l[1]-l[0],l[c-1]-l[c-2]]}function a(l,c){var h=l.fullSceneLayout,u=l.dataScale,x=c._len,d={};function m(ee,Q){var J=h[Q],K=u[s[Q]];return o.simpleMap(ee,function(Y){return J.d2l(Y)*K})}if(d.vectors=p(m(c._u,"xaxis"),m(c._v,"yaxis"),m(c._w,"zaxis"),x),!x)return{positions:[],cells:[]};var g=m(c._Xs,"xaxis"),y=m(c._Ys,"yaxis"),v=m(c._Zs,"zaxis");if(d.meshgrid=[g,y,v],d.gridFill=c._gridFill,c._slen)d.startingPositions=p(m(c._startsX,"xaxis"),m(c._startsY,"yaxis"),m(c._startsZ,"zaxis"));else{for(var _=y[0],f=n(g),S=n(v),w=new Array(f.length*S.length),E=0,P=0;P<f.length;P++)for(var C=0;C<S.length;C++)w[E++]=[f[P],_,S[C]];d.startingPositions=w}d.colormap=T(c),d.tubeSize=c.sizeref,d.maxLength=c.maxdisplayed;var O=m(c._xbnds,"xaxis"),R=m(c._ybnds,"yaxis"),U=m(c._zbnds,"zaxis"),D=r(g),N=r(y),W=r(v),F=[[O[0]-D[0],R[0]-N[0],U[0]-W[0]],[O[1]+D[1],R[1]+N[1],U[1]+W[1]]],j=A(d,F),q=b(c);j.vertexIntensityBounds=[q.min/c._normMax,q.max/c._normMax];var te=c.lightposition;return j.lightPosition=[te.x,te.y,te.z],j.ambient=c.lighting.ambient,j.diffuse=c.lighting.diffuse,j.specular=c.lighting.specular,j.roughness=c.lighting.roughness,j.fresnel=c.lighting.fresnel,j.opacity=c.opacity,c._pad=j.tubeScale*c.sizeref*2,j}i.handlePick=function(l){var c=this.scene.fullSceneLayout,h=this.scene.dataScale;function u(m,g){var y=c[g],v=h[s[g]];return y.l2c(m)/v}if(l.object===this.mesh){var x=l.data.position,d=l.data.velocity;return l.traceCoordinate=[u(x[0],"xaxis"),u(x[1],"yaxis"),u(x[2],"zaxis"),u(d[0],"xaxis"),u(d[1],"yaxis"),u(d[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(l){this.data=l;var c=a(this.scene,l);this.mesh.update(c)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},X.exports=function(l,c){var h=l.glplot.gl,u=a(l,c),x=k(h,u),d=new t(l,c.uid);return d.mesh=x,d.data=c,x._trace=d,l.glplot.add(x),d}},54304:function(X,I,e){"use strict";var A=e(3400),k=e(27260),o=e(90167);X.exports=function(T,b,p,s){function t(h,u){return A.coerce(T,b,o,h,u)}var i=t("u"),n=t("v"),r=t("w"),a=t("x"),l=t("y"),c=t("z");i&&i.length&&n&&n.length&&r&&r.length&&a&&a.length&&l&&l.length&&c&&c.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},15436:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(A,k){return A.tubex=A.x,A.tubey=A.y,A.tubez=A.z,A.tubeu=k.traceCoordinate[3],A.tubev=k.traceCoordinate[4],A.tubew=k.traceCoordinate[5],A.norm=k.traceCoordinate[6],A.divergence=k.traceCoordinate[7],delete A.x,delete A.y,delete A.z,A},meta:{}}},424:function(X,I,e){"use strict";var A=e(45464),k=e(21776).Ks,o=e(21776).Gw,T=e(49084),b=e(86968).u,p=e(74996),s=e(27328),t=e(92880).extendFlat,i=e(98192).c;X.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},p.marker.line.color,{dflt:null}),width:t({},p.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:p.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:p.hovertext,hoverinfo:t({},A.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:p.textfont,insidetextorientation:p.insidetextorientation,insidetextfont:p.insidetextfont,outsidetextfont:t({},p.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:p.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(X,I,e){"use strict";var A=e(7316);I.name="sunburst",I.plot=function(k,o,T,b){A.plotBasePlot(I.name,k,o,T,b)},I.clean=function(k,o,T,b){A.cleanBasePlot(I.name,k,o,T,b)}},3776:function(X,I,e){"use strict";var A=e(74148),k=e(38248),o=e(3400),T=e(8932).makeColorScaleFuncFromTrace,b=e(45768).makePullColorFn,p=e(45768).generateExtendedColors,s=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},n={},r={};function a(l,c,h){var u=0,x=l.children;if(x){for(var d=x.length,m=0;m<d;m++)u+=a(x[m],c,h);h.branches&&u++}else h.leaves&&u++;return l.value=l.data.data.value=u,c._values||(c._values=[]),c._values[l.data.data.i]=u,u}I.calc=function(l,c){var h,u,x,d,m,g,y=l._fullLayout,v=c.ids,_=o.isArrayOrTypedArray(v),f=c.labels,S=c.parents,w=c.values,E=o.isArrayOrTypedArray(w),P=[],C={},O={},R=function(ae){return ae||typeof ae=="number"},U=function(ae){return!E||k(w[ae])&&w[ae]>=0};_?(h=Math.min(v.length,S.length),u=function(ae){return R(v[ae])&&U(ae)},x=function(ae){return String(v[ae])}):(h=Math.min(f.length,S.length),u=function(ae){return R(f[ae])&&U(ae)},x=function(ae){return String(f[ae])}),E&&(h=Math.min(h,w.length));for(var D=0;D<h;D++)if(u(D)){var N=x(D),W=R(S[D])?String(S[D]):"",F={i:D,id:N,pid:W,label:R(f[D])?String(f[D]):""};E&&(F.v=+w[D]),P.push(F),m=N,C[d=W]?C[d].push(m):C[d]=[m],O[m]=1}if(C[""]){if(C[""].length>1){for(var j=o.randstr(),q=0;q<P.length;q++)P[q].pid===""&&(P[q].pid=j);P.unshift({hasMultipleRoots:!0,id:j,pid:"",label:""})}}else{var te,ee=[];for(te in C)O[te]||ee.push(te);if(ee.length!==1)return o.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",ee.join(", ")].join(" "));te=ee[0],P.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{g=A.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(P)}catch(ae){return o.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ae.message].join(" "))}var Q=A.hierarchy(g),J=!1;if(E)switch(c.branchvalues){case"remainder":Q.sum(function(ae){return ae.data.v});break;case"total":Q.each(function(ae){var ue=ae.data.data,ve=ue.v;if(ae.children){var ye=ae.children.reduce(function(de,pe){return de+pe.data.data.v},0);if((ue.hasImpliedRoot||ue.hasMultipleRoots)&&(ve=ye),ve<ye*t)return J=!0,o.warn(["Total value for node",ae.data.data.id,"of",c.name,"is smaller than the sum of its children.",`
parent value =`,ve,`
children sum =`,ye].join(" "))}ae.value=ve})}else a(Q,c,{branches:c.count.indexOf("branches")!==-1,leaves:c.count.indexOf("leaves")!==-1});if(!J){var K,Y;c.sort&&Q.sort(function(ae,ue){return ue.value-ae.value});var ie=c.marker.colors||[],se=!!ie.length;return c._hasColorscale?(se||(ie=E?c.values:c._values),s(l,c,{vals:ie,containerStr:"marker",cLetter:"c"}),Y=T(c.marker)):K=b(y["_"+c.type+"colormap"]),Q.each(function(ae){var ue=ae.data.data;ue.color=c._hasColorscale?Y(ie[ue.i]):K(ie[ue.i],ue.id)}),P[0].hierarchy=Q,P}},I._runCrossTraceCalc=function(l,c){var h=c._fullLayout,u=c.calcdata,x=h[l+"colorway"],d=h["_"+l+"colormap"];h["extend"+l+"colors"]&&(x=p(x,l==="icicle"?r:l==="treemap"?n:i));var m,g=0;function y(f){var S=f.data.data,w=S.id;S.color===!1&&(d[w]?S.color=d[w]:f.parent?f.parent.parent?S.color=f.parent.data.data.color:(d[w]=S.color=x[g%x.length],g++):S.color=m)}for(var v=0;v<u.length;v++){var _=u[v][0];_.trace.type===l&&_.hierarchy&&(m=_.trace.root.color,_.hierarchy.each(y))}},I.crossTraceCalc=function(l){return I._runCrossTraceCalc("sunburst",l)}},27328:function(X){"use strict";X.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(X,I,e){"use strict";var A=e(3400),k=e(424),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleMarkerDefaults,p=e(8932),s=p.hasColorscale,t=p.handleDefaults;X.exports=function(i,n,r,a){function l(m,g){return A.coerce(i,n,k,m,g)}var c=l("labels"),h=l("parents");if(c&&c.length&&h&&h.length){var u=l("values");u&&u.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),b(i,n,a,l);var x=n._hasColorscale=s(i,"marker","colors")||(i.marker||{}).coloraxis;x&&t(i,n,a,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",x?1:.7);var d=l("text");l("texttemplate"),n.texttemplate||l("textinfo",A.isArrayOrTypedArray(d)?"text+label":"label"),l("hovertext"),l("hovertemplate"),T(i,n,a,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),o(n,a,l),n._length=null}else n.visible=!1}},60404:function(X,I,e){"use strict";var A=e(43616),k=e(76308);X.exports=function(o,T,b,p,s){var t=T.data.data,i=t.i,n=s||t.color;if(i>=0){T.i=t.i;var r=b.marker;r.pattern&&r.colors&&r.pattern.shape||(r.color=n,T.color=n),A.pointStyle(o,b,p,T)}else k.fill(o,n)}},45716:function(X,I,e){"use strict";var A=e(33428),k=e(24040),o=e(10624).appendArrayPointValue,T=e(93024),b=e(3400),p=e(95924),s=e(78176),t=e(69656).formatPieValue;function i(n,r,a){for(var l=n.data.data,c={curveNumber:r.index,pointNumber:l.i,data:r._input,fullData:r},h=0;h<a.length;h++){var u=a[h];u in n&&(c[u]=n[u])}return"parentString"in n&&!s.isHierarchyRoot(n)&&(c.parent=n.parentString),o(c,r,l.i),c}X.exports=function(n,r,a,l,c){var h=l[0],u=h.trace,x=h.hierarchy,d=u.type==="sunburst",m=u.type==="treemap"||u.type==="icicle";"_hasHoverLabel"in u||(u._hasHoverLabel=!1),"_hasHoverEvent"in u||(u._hasHoverEvent=!1),n.on("mouseover",function(g){var y=a._fullLayout;if(!a._dragging&&y.hovermode!==!1){var v,_=a._fullData[u.index],f=g.data.data,S=f.i,w=s.isHierarchyRoot(g),E=s.getParent(x,g),P=s.getValue(g),C=function(ie){return b.castOption(_,S,ie)},O=C("hovertemplate"),R=T.castHoverinfo(_,y,S),U=y.separators;if(O||R&&R!=="none"&&R!=="skip"){var D,N;d&&(D=h.cx+g.pxmid[0]*(1-g.rInscribed),N=h.cy+g.pxmid[1]*(1-g.rInscribed)),m&&(D=g._hoverX,N=g._hoverY);var W,F={},j=[],q=[],te=function(ie){return j.indexOf(ie)!==-1};R&&(j=R==="all"?_._module.attributes.hoverinfo.flags:R.split("+")),F.label=f.label,te("label")&&F.label&&q.push(F.label),f.hasOwnProperty("v")&&(F.value=f.v,F.valueLabel=t(F.value,U),te("value")&&q.push(F.valueLabel)),F.currentPath=g.currentPath=s.getPath(g.data),te("current path")&&!w&&q.push(F.currentPath);var ee=[],Q=function(){ee.indexOf(W)===-1&&(q.push(W),ee.push(W))};F.percentParent=g.percentParent=P/s.getValue(E),F.parent=g.parentString=s.getPtLabel(E),te("percent parent")&&(W=s.formatPercent(F.percentParent,U)+" of "+F.parent,Q()),F.percentEntry=g.percentEntry=P/s.getValue(r),F.entry=g.entry=s.getPtLabel(r),!te("percent entry")||w||g.onPathbar||(W=s.formatPercent(F.percentEntry,U)+" of "+F.entry,Q()),F.percentRoot=g.percentRoot=P/s.getValue(x),F.root=g.root=s.getPtLabel(x),te("percent root")&&!w&&(W=s.formatPercent(F.percentRoot,U)+" of "+F.root,Q()),F.text=C("hovertext")||C("text"),te("text")&&(W=F.text,b.isValidTextValue(W)&&q.push(W)),v=[i(g,_,c.eventDataKeys)];var J={trace:_,y:N,_x0:g._x0,_x1:g._x1,_y0:g._y0,_y1:g._y1,text:q.join("<br>"),name:O||te("name")?_.name:void 0,color:C("hoverlabel.bgcolor")||f.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),fontWeight:C("hoverlabel.font.weight"),fontStyle:C("hoverlabel.font.style"),fontVariant:C("hoverlabel.font.variant"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:F,eventData:v};d&&(J.x0=D-g.rInscribed*g.rpx1,J.x1=D+g.rInscribed*g.rpx1,J.idealAlign=g.pxmid[0]<0?"left":"right"),m&&(J.x=D,J.idealAlign=D<0?"left":"right");var K=[];T.loneHover(J,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:a,inOut_bbox:K}),v[0].bbox=K[0],u._hasHoverLabel=!0}if(m){var Y=n.select("path.surface");c.styleOne(Y,g,_,a,{hovered:!0})}u._hasHoverEvent=!0,a.emit("plotly_hover",{points:v||[i(g,_,c.eventDataKeys)],event:A.event})}}),n.on("mouseout",function(g){var y=a._fullLayout,v=a._fullData[u.index],_=A.select(this).datum();if(u._hasHoverEvent&&(g.originalEvent=A.event,a.emit("plotly_unhover",{points:[i(_,v,c.eventDataKeys)],event:A.event}),u._hasHoverEvent=!1),u._hasHoverLabel&&(T.loneUnhover(y._hoverlayer.node()),u._hasHoverLabel=!1),m){var f=n.select("path.surface");c.styleOne(f,_,v,a,{hovered:!1})}}),n.on("click",function(g){var y=a._fullLayout,v=a._fullData[u.index],_=d&&(s.isHierarchyRoot(g)||s.isLeaf(g)),f=s.getPtId(g),S=s.isEntry(g)?s.findEntryWithChild(x,f):s.findEntryWithLevel(x,f),w=s.getPtId(S),E={points:[i(g,v,c.eventDataKeys)],event:A.event};_||(E.nextLevel=w);var P=p.triggerHandler(a,"plotly_"+u.type+"click",E);if(P!==!1&&y.hovermode&&(a._hoverdata=[i(g,v,c.eventDataKeys)],T.click(a,A.event)),!_&&P!==!1&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",v,y._tracePreGUI[v.uid],{level:v.level});var C={data:[{level:w}],traces:[u.index]},O={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(y._hoverlayer.node()),k.call("animate",a,C,O)}})}},78176:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(93972),T=e(69656);function b(p){return p.data.data.pid}I.findEntryWithLevel=function(p,s){var t;return s&&p.eachAfter(function(i){if(I.getPtId(i)===s)return t=i.copy()}),t||p},I.findEntryWithChild=function(p,s){var t;return p.eachAfter(function(i){for(var n=i.children||[],r=0;r<n.length;r++){var a=n[r];if(I.getPtId(a)===s)return t=i.copy()}}),t||p},I.isEntry=function(p){return!p.parent},I.isLeaf=function(p){return!p.children},I.getPtId=function(p){return p.data.data.id},I.getPtLabel=function(p){return p.data.data.label},I.getValue=function(p){return p.value},I.isHierarchyRoot=function(p){return b(p)===""},I.setSliceCursor=function(p,s,t){var i=t.isTransitioning;if(!i){var n=p.datum();i=t.hideOnRoot&&I.isHierarchyRoot(n)||t.hideOnLeaves&&I.isLeaf(n)}o(p,i?null:"pointer")},I.getInsideTextFontKey=function(p,s,t,i,n){var r=(n||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return A.castOption(s,a,r+"."+p)||A.castOption(s,a,"textfont."+p)||i.size},I.getOutsideTextFontKey=function(p,s,t,i){var n=t.data.data.i;return A.castOption(s,n,"outsidetextfont."+p)||A.castOption(s,n,"textfont."+p)||i.size},I.isOutsideText=function(p,s){return!p._hasColorscale&&I.isHierarchyRoot(s)},I.determineTextFont=function(p,s,t,i){return I.isOutsideText(p,s)?function(n,r,a){return{color:I.getOutsideTextFontKey("color",n,r,a),family:I.getOutsideTextFontKey("family",n,r,a),size:I.getOutsideTextFontKey("size",n,r,a),weight:I.getOutsideTextFontKey("weight",n,r,a),style:I.getOutsideTextFontKey("style",n,r,a),variant:I.getOutsideTextFontKey("variant",n,r,a),textcase:I.getOutsideTextFontKey("textcase",n,r,a),lineposition:I.getOutsideTextFontKey("lineposition",n,r,a),shadow:I.getOutsideTextFontKey("shadow",n,r,a)}}(p,s,t):function(n,r,a,l){var c=(l||{}).onPathbar,h=r.data.data,u=h.i,x=A.castOption(n,u,(c?"pathbar.textfont":"insidetextfont")+".color");return!x&&n._input.textfont&&(x=A.castOption(n._input,u,"textfont.color")),{color:x||k.contrast(h.color),family:I.getInsideTextFontKey("family",n,r,a,l),size:I.getInsideTextFontKey("size",n,r,a,l),weight:I.getInsideTextFontKey("weight",n,r,a,l),style:I.getInsideTextFontKey("style",n,r,a,l),variant:I.getInsideTextFontKey("variant",n,r,a,l),textcase:I.getInsideTextFontKey("textcase",n,r,a,l),lineposition:I.getInsideTextFontKey("lineposition",n,r,a,l),shadow:I.getInsideTextFontKey("shadow",n,r,a,l)}}(p,s,t,i)},I.hasTransition=function(p){return!!(p&&p.duration>0)},I.getMaxDepth=function(p){return p.maxdepth>=0?p.maxdepth:1/0},I.isHeader=function(p,s){return!(I.isLeaf(p)||p.depth===s._maxDepth-1)},I.getParent=function(p,s){return I.findEntryWithLevel(p,b(s))},I.listPath=function(p,s){var t=p.parent;if(!t)return[];var i=s?[t.data[s]]:[t];return I.listPath(t,s).concat(i)},I.getPath=function(p){return I.listPath(p,"label").join("/")+"/"},I.formatValue=T.formatPieValue,I.formatPercent=function(p,s){var t=A.formatPercent(p,0);return t==="0%"&&(t=T.formatPiePercent(p,s)),t}},5621:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(X){"use strict";X.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(X,I,e){"use strict";var A=e(3400),k=e(84920);X.exports=function(o,T){function b(p,s){return A.coerce(o,T,k,p,s)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},96488:function(X,I,e){"use strict";var A=e(33428),k=e(74148),o=e(67756).qy,T=e(43616),b=e(3400),p=e(72736),s=e(82744),t=s.recordMinTextSize,i=s.clearMinTextSize,n=e(37820),r=e(69656).getRotationAngle,a=n.computeTransform,l=n.transformInsideText,c=e(85676).styleOne,h=e(60100).resizeText,u=e(45716),x=e(27328),d=e(78176);function m(y,v,_,f){var S=y._context.staticPlot,w=y._fullLayout,E=!w.uniformtext.mode&&d.hasTransition(f),P=A.select(_).selectAll("g.slice"),C=v[0],O=C.trace,R=C.hierarchy,U=d.findEntryWithLevel(R,O.level),D=d.getMaxDepth(O),N=w._size,W=O.domain,F=N.w*(W.x[1]-W.x[0]),j=N.h*(W.y[1]-W.y[0]),q=.5*Math.min(F,j),te=C.cx=N.l+N.w*(W.x[1]+W.x[0])/2,ee=C.cy=N.t+N.h*(1-W.y[0])-j/2;if(!U)return P.remove();var Q=null,J={};E&&P.each(function(re){J[d.getPtId(re)]={rpx0:re.rpx0,rpx1:re.rpx1,x0:re.x0,x1:re.x1,transform:re.transform},!Q&&d.isEntry(re)&&(Q=re)});var K=function(re){return k.partition().size([2*Math.PI,re.height+1])(re)}(U).descendants(),Y=U.height+1,ie=0,se=D;C.hasMultipleRoots&&d.isHierarchyRoot(U)&&(K=K.slice(1),Y-=1,ie=1,se+=1),K=K.filter(function(re){return re.y1<=se});var ae=r(O.rotation);ae&&K.forEach(function(re){re.x0+=ae,re.x1+=ae});var ue=Math.min(Y,D),ve=function(re){return(re-ie)/ue*q},ye=function(re,fe){return[re*Math.cos(fe),-re*Math.sin(fe)]},de=function(re){return b.pathAnnulus(re.rpx0,re.rpx1,re.x0,re.x1,te,ee)},pe=function(re){return te+g(re)[0]*(re.transform.rCenter||0)+(re.transform.x||0)},ge=function(re){return ee+g(re)[1]*(re.transform.rCenter||0)+(re.transform.y||0)};(P=P.data(K,d.getPtId)).enter().append("g").classed("slice",!0),E?P.exit().transition().each(function(){var re=A.select(this);re.select("path.surface").transition().attrTween("d",function(fe){var Se=function(be){var we,Me=d.getPtId(be),Ie=J[Me],Oe=J[d.getPtId(U)];if(Oe){var he=(be.x1>Oe.x1?2*Math.PI:0)+ae;we=be.rpx1<Oe.rpx1?{x0:be.x0,x1:be.x1,rpx0:0,rpx1:0}:{x0:he,x1:he,rpx0:be.rpx0,rpx1:be.rpx1}}else{var _e,Ae=d.getPtId(be.parent);P.each(function(Ze){if(d.getPtId(Ze)===Ae)return _e=Ze});var De,Le=_e.children;Le.forEach(function(Ze,rt){if(d.getPtId(Ze)===Me)return De=rt});var Be=Le.length,Ve=o(_e.x0,_e.x1);we={rpx0:q,rpx1:q,x0:Ve(De/Be),x1:Ve((De+1)/Be)}}return o(Ie,we)}(fe);return function(be){return de(Se(be))}}),re.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var ke=null;if(E&&Q){var Ee=d.getPtId(Q);P.each(function(re){ke===null&&d.getPtId(re)===Ee&&(ke=re.x1)})}var me=P;function oe(re){var fe=re.parent,Se=J[d.getPtId(fe)],be={};if(Se){var we=fe.children,Me=we.indexOf(re),Ie=we.length,Oe=o(Se.x0,Se.x1);be.x0=Oe(Me/Ie),be.x1=Oe(Me/Ie)}else be.x0=be.x1=0;return be}E&&(me=me.transition().each("end",function(){var re=A.select(this);d.setSliceCursor(re,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),me.each(function(re){var fe=A.select(this),Se=b.ensureSingle(fe,"path","surface",function(he){he.style("pointer-events",S?"none":"all")});re.rpx0=ve(re.y0),re.rpx1=ve(re.y1),re.xmid=(re.x0+re.x1)/2,re.pxmid=ye(re.rpx1,re.xmid),re.midangle=-(re.xmid-Math.PI/2),re.startangle=-(re.x0-Math.PI/2),re.stopangle=-(re.x1-Math.PI/2),re.halfangle=.5*Math.min(b.angleDelta(re.x0,re.x1)||Math.PI,Math.PI),re.ring=1-re.rpx0/re.rpx1,re.rInscribed=function(he){return he.rpx0===0&&b.isFullCircle([he.x0,he.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(he.halfangle)),he.ring/2))}(re),E?Se.transition().attrTween("d",function(he){var _e=function(Ae){var De,Le=J[d.getPtId(Ae)],Be={x0:Ae.x0,x1:Ae.x1,rpx0:Ae.rpx0,rpx1:Ae.rpx1};if(Le)De=Le;else if(Q)if(Ae.parent)if(ke){var Ve=(Ae.x1>ke?2*Math.PI:0)+ae;De={x0:Ve,x1:Ve}}else De={rpx0:q,rpx1:q},b.extendFlat(De,oe(Ae));else De={rpx0:0,rpx1:0};else De={x0:ae,x1:ae};return o(De,Be)}(he);return function(Ae){return de(_e(Ae))}}):Se.attr("d",de),fe.call(u,U,y,v,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),Se.call(c,re,O,y);var be=b.ensureSingle(fe,"g","slicetext"),we=b.ensureSingle(be,"text","",function(he){he.attr("data-notex",1)}),Me=b.ensureUniformFontSize(y,d.determineTextFont(O,re,w.font));we.text(I.formatSliceLabel(re,U,O,v,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Me).call(p.convertToTspans,y);var Ie=T.bBox(we.node());re.transform=l(Ie,re,C),re.transform.targetX=pe(re),re.transform.targetY=ge(re);var Oe=function(he,_e){var Ae=he.transform;return a(Ae,_e),Ae.fontSize=Me.size,t(O.type,Ae,w),b.getTextTransform(Ae)};E?we.transition().attrTween("transform",function(he){var _e=function(Ae){var De,Le=J[d.getPtId(Ae)],Be=Ae.transform;if(Le)De=Le;else if(De={rpx1:Ae.rpx1,transform:{textPosAngle:Be.textPosAngle,scale:0,rotate:Be.rotate,rCenter:Be.rCenter,x:Be.x,y:Be.y}},Q)if(Ae.parent)if(ke){var Ve=Ae.x1>ke?2*Math.PI:0;De.x0=De.x1=Ve}else b.extendFlat(De,oe(Ae));else De.x0=De.x1=ae;else De.x0=De.x1=ae;var Ze=o(De.transform.textPosAngle,Ae.transform.textPosAngle),rt=o(De.rpx1,Ae.rpx1),it=o(De.x0,Ae.x0),dt=o(De.x1,Ae.x1),mt=o(De.transform.scale,Be.scale),ht=o(De.transform.rotate,Be.rotate),Qe=Be.rCenter===0?3:De.transform.rCenter===0?1/3:1,Je=o(De.transform.rCenter,Be.rCenter);return function(wt){var Pt=rt(wt),It=it(wt),At=dt(wt),qe=function(Ne){return Je(Math.pow(Ne,Qe))}(wt),Ye={pxmid:ye(Pt,(It+At)/2),rpx1:Pt,transform:{textPosAngle:Ze(wt),rCenter:qe,x:Be.x,y:Be.y}};return t(O.type,Be,w),{transform:{targetX:pe(Ye),targetY:ge(Ye),scale:mt(wt),rotate:ht(wt),rCenter:qe}}}}(he);return function(Ae){return Oe(_e(Ae),Ie)}}):we.attr("transform",Oe(re,Ie))})}function g(y){return v=y.rpx1,_=y.transform.textPosAngle,[v*Math.sin(_),-v*Math.cos(_)];var v,_}I.plot=function(y,v,_,f){var S,w,E=y._fullLayout,P=E._sunburstlayer,C=!_,O=!E.uniformtext.mode&&d.hasTransition(_);i("sunburst",E),(S=P.selectAll("g.trace.sunburst").data(v,function(R){return R[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),O?(f&&(w=f()),A.transition().duration(_.duration).ease(_.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){P.selectAll("g.trace").each(function(R){m(y,R,this,_)})})):(S.each(function(R){m(y,R,this,_)}),E.uniformtext.mode&&h(y,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},I.formatSliceLabel=function(y,v,_,f,S){var w=_.texttemplate,E=_.textinfo;if(!(w||E&&E!=="none"))return"";var P=S.separators,C=f[0],O=y.data.data,R=C.hierarchy,U=d.isHierarchyRoot(y),D=d.getParent(R,y),N=d.getValue(y);if(!w){var W,F=E.split("+"),j=function(se){return F.indexOf(se)!==-1},q=[];if(j("label")&&O.label&&q.push(O.label),O.hasOwnProperty("v")&&j("value")&&q.push(d.formatValue(O.v,P)),!U){j("current path")&&q.push(d.getPath(y.data));var te=0;j("percent parent")&&te++,j("percent entry")&&te++,j("percent root")&&te++;var ee=te>1;if(te){var Q,J=function(se){W=d.formatPercent(Q,P),ee&&(W+=" of "+se),q.push(W)};j("percent parent")&&!U&&(Q=N/d.getValue(D),J("parent")),j("percent entry")&&(Q=N/d.getValue(v),J("entry")),j("percent root")&&(Q=N/d.getValue(R),J("root"))}}return j("text")&&(W=b.castOption(_,O.i,"text"),b.isValidTextValue(W)&&q.push(W)),q.join("<br>")}var K=b.castOption(_,O.i,"texttemplate");if(!K)return"";var Y={};O.label&&(Y.label=O.label),O.hasOwnProperty("v")&&(Y.value=O.v,Y.valueLabel=d.formatValue(O.v,P)),Y.currentPath=d.getPath(y.data),U||(Y.percentParent=N/d.getValue(D),Y.percentParentLabel=d.formatPercent(Y.percentParent,P),Y.parent=d.getPtLabel(D)),Y.percentEntry=N/d.getValue(v),Y.percentEntryLabel=d.formatPercent(Y.percentEntry,P),Y.entry=d.getPtLabel(v),Y.percentRoot=N/d.getValue(R),Y.percentRootLabel=d.formatPercent(Y.percentRoot,P),Y.root=d.getPtLabel(R),O.hasOwnProperty("color")&&(Y.color=O.color);var ie=b.castOption(_,O.i,"text");return(b.isValidTextValue(ie)||ie==="")&&(Y.text=ie),Y.customdata=b.castOption(_,O.i,"customdata"),b.texttemplateString(K,Y,S._d3locale,Y,_._meta||{})}},85676:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function p(s,t,i,n){var r=t.data.data,a=!t.children,l=r.i,c=o.castOption(i,l,"marker.line.color")||k.defaultLine,h=o.castOption(i,l,"marker.line.width")||0;s.call(b,t,i,n).style("stroke-width",h).call(k.stroke,c).style("opacity",a?i.leaf.opacity:null)}X.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");T(s,t,"sunburst"),t.each(function(i){var n=A.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(a){A.select(this).call(p,a,r,s)})})},styleOne:p}},16716:function(X,I,e){"use strict";var A=e(76308),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(45464),p=e(92880).extendFlat,s=e(67824).overrideAll;function t(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:A.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:A.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=X.exports=s(p({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:p({},k.zauto,{}),zmin:p({},k.zmin,{}),zmax:p({},k.zmax,{})},hoverinfo:p({},b.hoverinfo),showlegend:p({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(X,I,e){"use strict";var A=e(47128);X.exports=function(k,o){o.surfacecolor?A(k,o,{vals:o.surfacecolor,containerStr:"",cLetter:"c"}):A(k,o,{vals:o.z,containerStr:"",cLetter:"c"})}},79164:function(X,I,e){"use strict";var A=e(67792).gl_surface3d,k=e(67792).ndarray,o=e(67792).ndarray_linear_interpolate.d2,T=e(70448),b=e(11240),p=e(3400).isArrayOrTypedArray,s=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function n(_,f,S){this.scene=_,this.uid=S,this.surface=f,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var r=n.prototype;r.getXat=function(_,f,S,w){var E=p(this.data.x)?p(this.data.x[0])?this.data.x[f][_]:this.data.x[_]:_;return S===void 0?E:w.d2l(E,0,S)},r.getYat=function(_,f,S,w){var E=p(this.data.y)?p(this.data.y[0])?this.data.y[f][_]:this.data.y[f]:f;return S===void 0?E:w.d2l(E,0,S)},r.getZat=function(_,f,S,w){var E=this.data.z[f][_];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[f][_]),S===void 0?E:w.d2l(E,0,S)},r.handlePick=function(_){if(_.object===this.surface){var f=(_.data.index[0]-1)/this.dataScaleX-1,S=(_.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round(f),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);_.index=[w,E],_.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],_.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)_.dataCoordinate[P]!=null&&(_.dataCoordinate[P]*=this.scene.dataScale[P]);var C=this.data.hovertext||this.data.text;return p(C)&&C[E]&&C[E][w]!==void 0?_.textLabel=C[E][w]:_.textLabel=C||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(_,f){if(_<f)return 0;for(var S=0;Math.floor(_%f)===0;)_/=f,S++;return S}function c(_){for(var f=[],S=0;S<a.length;S++){var w=a[S];f.push(l(_,w))}return f}function h(_){for(var f=c(_),S=_,w=0;w<a.length;w++)if(f[w]>0){S=a[w];break}return S}function u(_,f){if(!(_<1||f<1)){for(var S=c(_),w=c(f),E=1,P=0;P<a.length;P++)E*=Math.pow(a[P],Math.max(S[P],w[P]));return E}}r.calcXnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getXat(f-1,0),E=this.getXat(f,0);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var P=0;for(f=1;f<_;f++)P+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(P/S[f-1]);return S},r.calcYnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getYat(0,f-1),E=this.getYat(0,f);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var P=0;for(f=1;f<_;f++)P+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(P/S[f-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],d=x[9],m=x[13];function g(_,f,S){var w=S[8]+S[2]*f[0]+S[5]*f[1];return _[0]=(S[6]+S[0]*f[0]+S[3]*f[1])/w,_[1]=(S[7]+S[1]*f[0]+S[4]*f[1])/w,_}function y(_,f,S){return function(w,E,P,C){for(var O=[0,0],R=w.shape[0],U=w.shape[1],D=0;D<R;D++)for(var N=0;N<U;N++)P(O,[D,N],C),w.set(D,N,o(E,O[0],O[1]))}(_,f,g,S),_}function v(_,f){for(var S=!1,w=0;w<_.length;w++)if(f===_[w]){S=!0;break}S===!1&&_.push(f)}r.estimateScale=function(_,f){for(var S=1+function(E){if(E.length!==0){for(var P=1,C=0;C<E.length;C++)P=u(P,E[C]);return P}}(f===0?this.calcXnums(_):this.calcYnums(_));S<d;)S*=2;for(;S>m;)S--,S/=h(S),++S<d&&(S=m);var w=Math.round(S/_);return w>1?w:1},r.refineCoords=function(_){for(var f=this.dataScaleX,S=this.dataScaleY,w=_[0].shape[0],E=_[0].shape[1],P=0|Math.floor(_[0].shape[0]*f+1),C=0|Math.floor(_[0].shape[1]*S+1),O=1+w+1,R=1+E+1,U=k(new Float32Array(O*R),[O,R]),D=[1/f,0,0,0,1/S,0,0,0,1],N=0;N<_.length;++N){this.surface.padField(U,_[N]);var W=k(new Float32Array(P*C),[P,C]);y(W,U,D),_[N]=W}},r.setContourLevels=function(){var _,f,S,w=[[],[],[]],E=[!1,!1,!1],P=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(P=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,f=this.contourStart[_];f<this.contourEnd[_];f+=this.contourSize[_])S=f*this.scene.dataScale[_],v(w[_],S);if(P){var C=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(C[_]=E[_]?w[_]:this.scene.contourLevels[_]);this.surface.update({levels:C})}},r.update=function(_){var f,S,w,E,P=this.scene,C=P.fullSceneLayout,O=this.surface,R=s(_),U=P.dataScale,D=_.z[0].length,N=_._ylength,W=P.contourLevels;this.data=_;var F=[];for(f=0;f<3;f++)for(F[f]=[],S=0;S<D;S++)F[f][S]=[];for(S=0;S<D;S++)for(w=0;w<N;w++)F[0][S][w]=this.getXat(S,w,_.xcalendar,C.xaxis),F[1][S][w]=this.getYat(S,w,_.ycalendar,C.yaxis),F[2][S][w]=this.getZat(S,w,_.zcalendar,C.zaxis);if(_.connectgaps)for(_._emptypoints=b(F[2]),T(F[2],_._emptypoints),_._interpolatedZ=[],S=0;S<D;S++)for(_._interpolatedZ[S]=[],w=0;w<N;w++)_._interpolatedZ[S][w]=F[2][S][w];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])==null?F[f][S][w]=NaN:E=F[f][S][w]*=U[f];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(this.minValues[f]>E&&(this.minValues[f]=E),this.maxValues[f]<E&&(this.maxValues[f]=E));for(f=0;f<3;f++)this.objectOffset[f]=.5*(this.minValues[f]+this.maxValues[f]);for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(F[f][S][w]-=this.objectOffset[f]);var j=[k(new Float32Array(D*N),[D,N]),k(new Float32Array(D*N),[D,N]),k(new Float32Array(D*N),[D,N])];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)j[f].set(S,w,F[f][S][w]);F=[];var q={colormap:R,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},te=i(_);if(q.intensityBounds=[te.min,te.max],_.surfacecolor){var ee=k(new Float32Array(D*N),[D,N]);for(S=0;S<D;S++)for(w=0;w<N;w++)ee.set(S,w,_.surfacecolor[w][S]);j.push(ee)}else q.intensityBounds[0]*=U[2],q.intensityBounds[1]*=U[2];(m<j[0].shape[0]||m<j[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(j[0].shape[0],0),this.dataScaleY=this.estimateScale(j[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(j)),_.surfacecolor&&(q.intensity=j.pop());var Q=[!0,!0,!0],J=["x","y","z"];for(f=0;f<3;++f){var K=_.contours[J[f]];Q[f]=K.highlight,q.showContour[f]=K.show||K.highlight,q.showContour[f]&&(q.contourProject[f]=[K.project.x,K.project.y,K.project.z],K.show?(this.showContour[f]=!0,q.levels[f]=W[f],O.highlightColor[f]=q.contourColor[f]=t(K.color),K.usecolormap?O.highlightTint[f]=q.contourTint[f]=0:O.highlightTint[f]=q.contourTint[f]=1,q.contourWidth[f]=K.width,this.contourStart[f]=K.start,this.contourEnd[f]=K.end,this.contourSize[f]=K.size):(this.showContour[f]=!1,this.contourStart[f]=null,this.contourEnd[f]=null,this.contourSize[f]=0),K.highlight&&(q.dynamicColor[f]=t(K.highlightcolor),q.dynamicWidth[f]=K.highlightwidth))}(function(Y){var ie=Y[0].rgb,se=Y[Y.length-1].rgb;return ie[0]===se[0]&&ie[1]===se[1]&&ie[2]===se[2]&&ie[3]===se[3]})(R)&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=j,O.update(q),O.visible=_.visible,O.enableDynamic=Q,O.enableHighlight=Q,O.snapToData=!0,"lighting"in _&&(O.ambientLight=_.lighting.ambient,O.diffuseLight=_.lighting.diffuse,O.specularLight=_.lighting.specular,O.roughness=_.lighting.roughness,O.fresnel=_.lighting.fresnel),"lightposition"in _&&(O.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},X.exports=function(_,f){var S=_.glplot.gl,w=A({gl:S}),E=new n(_,w,f.uid);return w._trace=E,E.update(f),_.glplot.add(w),E}},60192:function(X,I,e){"use strict";var A=e(24040),k=e(3400),o=e(27260),T=e(16716);function b(s,t,i,n){var r=n("opacityscale");r==="max"?t.opacityscale=[[0,.1],[1,1]]:r==="min"?t.opacityscale=[[0,1],[1,.1]]:r==="extremes"?t.opacityscale=function(a,l){for(var c=[],h=0;h<32;h++){var u=h/31,x=.1+.9*(1-Math.pow(Math.sin(1*u*Math.PI),2));c.push([u,Math.max(0,Math.min(1,x))])}return c}():function(a){var l=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var c=0;c<a.length;c++){var h=a[c];if(h.length!==2||+h[0]<l)return!1;l=+h[0]}return!0}(r)||(t.opacityscale=void 0)}function p(s,t,i){t in s&&!(i in s)&&(s[i]=s[t])}X.exports={supplyDefaults:function(s,t,i,n){var r,a;function l(v,_){return k.coerce(s,t,T,v,_)}var c=l("x"),h=l("y"),u=l("z");if(!u||!u.length||c&&c.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(c)&&k.isArrayOrTypedArray(c[0])?u.length:u[0].length,t._ylength=u.length,A.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],n),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(v){l(v)});var x=l("surfacecolor"),d=["x","y","z"];for(r=0;r<3;++r){var m="contours."+d[r],g=l(m+".show"),y=l(m+".highlight");if(g||y)for(a=0;a<3;++a)l(m+".project."+d[a]);g&&(l(m+".color"),l(m+".width"),l(m+".usecolormap")),y&&(l(m+".highlightcolor"),l(m+".highlightwidth")),l(m+".start"),l(m+".end"),l(m+".size")}x||(p(s,"zmin","cmin"),p(s,"zmax","cmax"),p(s,"zauto","cauto")),o(s,t,n,l,{prefix:"",cLetter:"c"}),b(0,t,0,l),t._length=null}},opacityscaleDefaults:b}},91304:function(X,I,e){"use strict";X.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(X,I,e){"use strict";var A=e(13916),k=e(92880).extendFlat,o=e(67824).overrideAll,T=e(25376),b=e(86968).u,p=e(29736).descriptionOnlyNumbers;(X.exports=o({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(X,I,e){"use strict";var A=e(84888)._M,k=e(24752),o="table";I.name=o,I.plot=function(T){var b=A(T.calcdata,o)[0];b.length&&k(T,b)},I.clean=function(T,b,p,s){var t=s._has&&s._has(o),i=b._has&&b._has(o);t&&!i&&s._paperdiv.selectAll(".table").remove()}},39312:function(X,I,e){"use strict";var A=e(71688).wrap;X.exports=function(){return A({})}},23536:function(X){"use strict";X.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(X,I,e){"use strict";var A=e(23536),k=e(92880).extendFlat,o=e(38248),T=e(38116).isTypedArray,b=e(38116).isArrayOrTypedArray;function p(l){if(b(l)){for(var c=0,h=0;h<l.length;h++)c=Math.max(c,p(l[h]));return c}return l}function s(l,c){return l+c}function t(l){var c,h=l.slice(),u=1/0,x=0;for(c=0;c<h.length;c++)T(h[c])?h[c]=Array.from(h[c]):b(h[c])||(h[c]=[h[c]]),u=Math.min(u,h[c].length),x=Math.max(x,h[c].length);if(u!==x)for(c=0;c<h.length;c++){var d=x-h[c].length;d&&(h[c]=h[c].concat(i(d)))}return h}function i(l){for(var c=new Array(l),h=0;h<l;h++)c[h]="";return c}function n(l){return l.calcdata.columns.reduce(function(c,h){return h.xIndex<l.xIndex?c+h.columnWidth:c},0)}function r(l,c){return Object.keys(l).map(function(h){return k({},l[h],{auxiliaryBlocks:c})})}function a(l,c){for(var h,u={},x=0,d=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,y=0,v=0;v<l.length;v++)h=l[v],m.rows.push({rowIndex:v,rowHeight:h}),((d+=h)>=c||v===l.length-1)&&(u[x]=m,m.key=y++,m.firstRowIndex=g,m.lastRowIndex=v,m={firstRowIndex:null,lastRowIndex:null,rows:[]},x+=d,g=v+1,d=0);return u}X.exports=function(l,c){var h=t(c.cells.values),u=function(N){return N.slice(c.header.values.length,N.length)},x=t(c.header.values);x.length&&!x[0].length&&(x[0]=[""],x=t(x));var d=x.concat(u(h).map(function(){return i((x[0]||[""]).length)})),m=c.domain,g=Math.floor(l._fullLayout._size.w*(m.x[1]-m.x[0])),y=Math.floor(l._fullLayout._size.h*(m.y[1]-m.y[0])),v=c.header.values.length?d[0].map(function(){return c.header.height}):[A.emptyHeaderHeight],_=h.length?h[0].map(function(){return c.cells.height}):[],f=v.reduce(s,0),S=a(_,y-f+A.uplift),w=r(a(v,f),[]),E=r(S,w),P={},C=c._fullInput.columnorder;b(C)&&(C=Array.from(C)),C=C.concat(u(h.map(function(N,W){return W})));var O=d.map(function(N,W){var F=b(c.columnwidth)?c.columnwidth[Math.min(W,c.columnwidth.length-1)]:c.columnwidth;return o(F)?Number(F):1}),R=O.reduce(s,0);O=O.map(function(N){return N/R*g});var U=Math.max(p(c.header.line.width),p(c.cells.line.width)),D={key:c.uid+l._context.staticPlot,translateX:m.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-m.y[1]),size:l._fullLayout._size,width:g,maxLineWidth:U,height:y,columnOrder:C,groupHeight:y,rowBlocks:E,headerRowBlocks:w,scrollY:0,cells:k({},c.cells,{values:h}),headerCells:k({},c.header,{values:d}),gdColumns:d.map(function(N){return N[0]}),gdColumnsOriginalOrder:d.map(function(N){return N[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(N,W){var F=P[N];return P[N]=(F||0)+1,{key:N+"__"+P[N],label:N,specIndex:W,xIndex:C[W],xScale:n,x:void 0,calcdata:void 0,columnWidth:O[W]}})};return D.columns.forEach(function(N){N.calcdata=D,N.x=n(N)}),D}},53056:function(X,I,e){"use strict";var A=e(92880).extendFlat;I.splitToPanels=function(k){var o=[0,0],T=A({},k,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:A({},k.calcdata,{cells:k.calcdata.headerCells})});return[A({},k,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),A({},k,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},I.splitToCells=function(k){var o=function(T){var b=T.rowBlocks[T.page],p=b?b.rows[0].rowIndex:0;return[p,b?p+b.rows.length:0]}(k);return(k.values||[]).slice(o[0],o[1]).map(function(T,b){return{keyWithinBlock:b+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},53212:function(X,I,e){"use strict";var A=e(3400),k=e(60520),o=e(86968).Q;X.exports=function(T,b,p,s){function t(i,n){return A.coerce(T,b,k,i,n)}o(b,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),A.coerceFont(t,"header.font",s.font),function(i,n){for(var r=i.columnorder||[],a=i.header.values.length,l=r.slice(0,a),c=l.slice().sort(function(x,d){return x-d}),h=l.map(function(x){return c.indexOf(x)}),u=h.length;u<a;u++)h.push(u);n("columnorder",h)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),A.coerceFont(t,"cells.font",s.font),b._length=null}},41724:function(X,I,e){"use strict";X.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(X,I,e){"use strict";var A=e(23536),k=e(33428),o=e(3400),T=o.numberFormat,b=e(71688),p=e(43616),s=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,n=e(3400).cancelTransition,r=e(55992),a=e(53056),l=e(76308);function c(q){return Math.ceil(q.calcdata.maxLineWidth/2)}function h(q,te){return"clip"+q._fullLayout._uid+"_scrollAreaBottomClip_"+te.key}function u(q,te){return"clip"+q._fullLayout._uid+"_columnBoundaryClippath_"+te.calcdata.key+"_"+te.specIndex}function x(q){return[].concat.apply([],q.map(function(te){return te})).map(function(te){return te.__data__})}function d(q,te,ee){var Q=q.selectAll("."+A.cn.scrollbarKit).data(b.repeat,b.keyFun);Q.enter().append("g").classed(A.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),Q.each(function(se){var ae=se.scrollbarState;ae.totalHeight=function(ue){var ve=ue.rowBlocks;return N(ve,ve.length-1)+(ve.length?W(ve[ve.length-1],1/0):1)}(se),ae.scrollableAreaHeight=se.groupHeight-w(se),ae.currentlyVisibleHeight=Math.min(ae.totalHeight,ae.scrollableAreaHeight),ae.ratio=ae.currentlyVisibleHeight/ae.totalHeight,ae.barLength=Math.max(ae.ratio*ae.currentlyVisibleHeight,A.goldenRatio*A.scrollbarWidth),ae.barWiggleRoom=ae.currentlyVisibleHeight-ae.barLength,ae.wiggleRoom=Math.max(0,ae.totalHeight-ae.scrollableAreaHeight),ae.topY=ae.barWiggleRoom===0?0:se.scrollY/ae.wiggleRoom*ae.barWiggleRoom,ae.bottomY=ae.topY+ae.barLength,ae.dragMultiplier=ae.wiggleRoom/ae.barWiggleRoom}).attr("transform",function(se){var ae=se.width+A.scrollbarWidth/2+A.scrollbarOffset;return i(ae,w(se))});var J=Q.selectAll("."+A.cn.scrollbar).data(b.repeat,b.keyFun);J.enter().append("g").classed(A.cn.scrollbar,!0);var K=J.selectAll("."+A.cn.scrollbarSlider).data(b.repeat,b.keyFun);K.enter().append("g").classed(A.cn.scrollbarSlider,!0),K.attr("transform",function(se){return i(0,se.scrollbarState.topY||0)});var Y=K.selectAll("."+A.cn.scrollbarGlyph).data(b.repeat,b.keyFun);Y.enter().append("line").classed(A.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",A.scrollbarWidth).attr("stroke-linecap","round").attr("y1",A.scrollbarWidth/2),Y.attr("y2",function(se){return se.scrollbarState.barLength-A.scrollbarWidth/2}).attr("stroke-opacity",function(se){return se.columnDragInProgress||!se.scrollbarState.barWiggleRoom||ee?0:.4}),Y.transition().delay(0).duration(0),Y.transition().delay(A.scrollbarHideDelay).duration(A.scrollbarHideDuration).attr("stroke-opacity",0);var ie=J.selectAll("."+A.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);ie.enter().append("line").classed(A.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",A.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(se){var ae=k.event.y,ue=this.getBoundingClientRect(),ve=se.scrollbarState,ye=ae-ue.top,de=k.scale.linear().domain([0,ve.scrollableAreaHeight]).range([0,ve.totalHeight]).clamp(!0);ve.topY<=ye&&ye<=ve.bottomY||P(te,q,null,de(ye-ve.barLength/2))(se)}).call(k.behavior.drag().origin(function(se){return k.event.stopPropagation(),se.scrollbarState.scrollbarScrollInProgress=!0,se}).on("drag",P(te,q)).on("dragend",function(){})),ie.attr("y2",function(se){return se.scrollbarState.scrollableAreaHeight}),te._context.staticPlot&&(Y.remove(),ie.remove())}function m(q,te,ee,Q){var J=function(ae){var ue=ae.selectAll("."+A.cn.columnCells).data(b.repeat,b.keyFun);return ue.enter().append("g").classed(A.cn.columnCells,!0),ue.exit().remove(),ue}(ee),K=function(ae){var ue=ae.selectAll("."+A.cn.columnCell).data(a.splitToCells,function(ve){return ve.keyWithinBlock});return ue.enter().append("g").classed(A.cn.columnCell,!0),ue.exit().remove(),ue}(J);(function(ae){ae.each(function(ue,ve){var ye=ue.calcdata.cells.font,de=ue.column.specIndex,pe={size:v(ye.size,de,ve),color:v(ye.color,de,ve),family:v(ye.family,de,ve),weight:v(ye.weight,de,ve),style:v(ye.style,de,ve),variant:v(ye.variant,de,ve),textcase:v(ye.textcase,de,ve),lineposition:v(ye.lineposition,de,ve),shadow:v(ye.shadow,de,ve)};ue.rowNumber=ue.key,ue.align=v(ue.calcdata.cells.align,de,ve),ue.cellBorderWidth=v(ue.calcdata.cells.line.width,de,ve),ue.font=pe})})(K);var Y=function(ae){var ue=ae.selectAll("."+A.cn.cellRect).data(b.repeat,function(ve){return ve.keyWithinBlock});return ue.enter().append("rect").classed(A.cn.cellRect,!0),ue}(K);(function(ae){ae.attr("width",function(ue){return ue.column.columnWidth}).attr("stroke-width",function(ue){return ue.cellBorderWidth}).each(function(ue){var ve=k.select(this);l.stroke(ve,v(ue.calcdata.cells.line.color,ue.column.specIndex,ue.rowNumber)),l.fill(ve,v(ue.calcdata.cells.fill.color,ue.column.specIndex,ue.rowNumber))})})(Y);var ie=function(ae){var ue=ae.selectAll("."+A.cn.cellTextHolder).data(b.repeat,function(ve){return ve.keyWithinBlock});return ue.enter().append("g").classed(A.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ue}(K),se=function(ae){var ue=ae.selectAll("."+A.cn.cellText).data(b.repeat,function(ve){return ve.keyWithinBlock});return ue.enter().append("text").classed(A.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ue}(ie);(function(ae){ae.each(function(ue){p.font(k.select(this),ue.font)})})(se),g(se,te,Q,q),D(K)}function g(q,te,ee,Q){q.text(function(J){var K=J.column.specIndex,Y=J.rowNumber,ie=J.value,se=typeof ie=="string",ae=se&&ie.match(/<br>/i),ue=!se||ae;J.mayHaveMarkup=se&&ie.match(/[<&>]/);var ve,ye=typeof(ve=ie)=="string"&&ve.match(A.latexCheck);J.latex=ye;var de,pe,ge=ye?"":v(J.calcdata.cells.prefix,K,Y)||"",ke=ye?"":v(J.calcdata.cells.suffix,K,Y)||"",Ee=ye?null:v(J.calcdata.cells.format,K,Y)||null,me=ge+(Ee?T(Ee)(J.value):J.value)+ke;if(J.wrappingNeeded=!J.wrapped&&!ue&&!ye&&(de=y(me)),J.cellHeightMayIncrease=ae||ye||J.mayHaveMarkup||(de===void 0?y(me):de),J.needsConvertToTspans=J.mayHaveMarkup||J.wrappingNeeded||J.latex,J.wrappingNeeded){var oe=(A.wrapSplitCharacter===" "?me.replace(/<a href=/gi,"<a_href="):me).split(A.wrapSplitCharacter),re=A.wrapSplitCharacter===" "?oe.map(function(fe){return fe.replace(/<a_href=/gi,"<a href=")}):oe;J.fragments=re.map(function(fe){return{text:fe,width:null}}),J.fragments.push({fragment:A.wrapSpacer,width:null}),pe=re.join(A.lineBreaker)+A.lineBreaker+A.wrapSpacer}else delete J.fragments,pe=me;return pe}).attr("dy",function(J){return J.needsConvertToTspans?0:"0.75em"}).each(function(J){var K=this,Y=k.select(K),ie=J.wrappingNeeded?O:R;J.needsConvertToTspans?s.convertToTspans(Y,Q,ie(ee,K,te,Q,J)):k.select(K.parentNode).attr("transform",function(se){return i(U(se),A.cellPad)}).attr("text-anchor",function(se){return{left:"start",center:"middle",right:"end"}[se.align]})})}function y(q){return q.indexOf(A.wrapSplitCharacter)!==-1}function v(q,te,ee){if(o.isArrayOrTypedArray(q)){var Q=q[Math.min(te,q.length-1)];return o.isArrayOrTypedArray(Q)?Q[Math.min(ee,Q.length-1)]:Q}return q}function _(q,te,ee){q.transition().ease(A.releaseTransitionEase).duration(A.releaseTransitionDuration).attr("transform",i(te.x,ee))}function f(q){return q.type==="cells"}function S(q){return q.type==="header"}function w(q){return(q.rowBlocks.length?q.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(te,ee){return te+W(ee,1/0)},0)}function E(q,te,ee){var Q=x(te)[0];if(Q!==void 0){var J=Q.rowBlocks,K=Q.calcdata,Y=N(J,J.length),ie=Q.calcdata.groupHeight-w(Q),se=K.scrollY=Math.max(0,Math.min(Y-ie,K.scrollY)),ae=function(ue,ve,ye){for(var de=[],pe=0,ge=0;ge<ue.length;ge++){for(var ke=ue[ge],Ee=ke.rows,me=0,oe=0;oe<Ee.length;oe++)me+=Ee[oe].rowHeight;ke.allRowsHeight=me,ve<pe+me&&ve+ye>pe&&de.push(ge),pe+=me}return de}(J,se,ie);ae.length===1&&(ae[0]===J.length-1?ae.unshift(ae[0]-1):ae.push(ae[0]+1)),ae[0]%2&&ae.reverse(),te.each(function(ue,ve){ue.page=ae[ve],ue.scrollY=se}),te.attr("transform",function(ue){var ve=N(ue.rowBlocks,ue.page)-ue.scrollY;return i(0,ve)}),q&&(C(q,ee,te,ae,Q.prevPages,Q,0),C(q,ee,te,ae,Q.prevPages,Q,1),d(ee,q))}}function P(q,te,ee,Q){return function(J){var K=J.calcdata?J.calcdata:J,Y=te.filter(function(ue){return K.key===ue.key}),ie=ee||K.scrollbarState.dragMultiplier,se=K.scrollY;K.scrollY=Q===void 0?K.scrollY+ie*k.event.dy:Q;var ae=Y.selectAll("."+A.cn.yColumn).selectAll("."+A.cn.columnBlock).filter(f);return E(q,ae,Y),K.scrollY===se}}function C(q,te,ee,Q,J,K,Y){Q[Y]!==J[Y]&&(clearTimeout(K.currentRepaint[Y]),K.currentRepaint[Y]=setTimeout(function(){var ie=ee.filter(function(se,ae){return ae===Y&&Q[ae]!==J[ae]});m(q,te,ie,ee),J[Y]=Q[Y]}))}function O(q,te,ee,Q){return function(){var J=k.select(te.parentNode);J.each(function(K){var Y=K.fragments;J.selectAll("tspan.line").each(function(pe,ge){Y[ge].width=this.getComputedTextLength()});var ie,se,ae=Y[Y.length-1].width,ue=Y.slice(0,-1),ve=[],ye=0,de=K.column.columnWidth-2*A.cellPad;for(K.value="";ue.length;)ye+(se=(ie=ue.shift()).width+ae)>de&&(K.value+=ve.join(A.wrapSpacer)+A.lineBreaker,ve=[],ye=0),ve.push(ie.text),ye+=se;ye&&(K.value+=ve.join(A.wrapSpacer)),K.wrapped=!0}),J.selectAll("tspan.line").remove(),g(J.select("."+A.cn.cellText),ee,q,Q),k.select(te.parentNode.parentNode).call(D)}}function R(q,te,ee,Q,J){return function(){if(!J.settledY){var K=k.select(te.parentNode),Y=j(J),ie=J.key-Y.firstRowIndex,se=Y.rows[ie].rowHeight,ae=J.cellHeightMayIncrease?te.parentNode.getBoundingClientRect().height+2*A.cellPad:se,ue=Math.max(ae,se);ue-Y.rows[ie].rowHeight&&(Y.rows[ie].rowHeight=ue,q.selectAll("."+A.cn.columnCell).call(D),E(null,q.filter(f),0),d(ee,Q,!0)),K.attr("transform",function(){var ve=this,ye=ve.parentNode.getBoundingClientRect(),de=k.select(ve.parentNode).select("."+A.cn.cellRect).node().getBoundingClientRect(),pe=ve.transform.baseVal.consolidate(),ge=de.top-ye.top+(pe?pe.matrix.f:A.cellPad);return i(U(J,k.select(ve.parentNode).select("."+A.cn.cellTextHolder).node().getBoundingClientRect().width),ge)}),J.settledY=!0}}}function U(q,te){switch(q.align){case"left":default:return A.cellPad;case"right":return q.column.columnWidth-(te||0)-A.cellPad;case"center":return(q.column.columnWidth-(te||0))/2}}function D(q){q.attr("transform",function(te){var ee=te.rowBlocks[0].auxiliaryBlocks.reduce(function(J,K){return J+W(K,1/0)},0),Q=W(j(te),te.key);return i(0,Q+ee)}).selectAll("."+A.cn.cellRect).attr("height",function(te){return(ee=j(te),Q=te.key,ee.rows[Q-ee.firstRowIndex]).rowHeight;var ee,Q})}function N(q,te){for(var ee=0,Q=te-1;Q>=0;Q--)ee+=F(q[Q]);return ee}function W(q,te){for(var ee=0,Q=0;Q<q.rows.length&&q.rows[Q].rowIndex<te;Q++)ee+=q.rows[Q].rowHeight;return ee}function F(q){var te=q.allRowsHeight;if(te!==void 0)return te;for(var ee=0,Q=0;Q<q.rows.length;Q++)ee+=q.rows[Q].rowHeight;return q.allRowsHeight=ee,ee}function j(q){return q.rowBlocks[q.page]}X.exports=function(q,te){var ee=!q._context.staticPlot,Q=q._fullLayout._paper.selectAll("."+A.cn.table).data(te.map(function(ke){var Ee=b.unwrap(ke).trace;return r(q,Ee)}),b.keyFun);Q.exit().remove(),Q.enter().append("g").classed(A.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),Q.attr("width",function(ke){return ke.width+ke.size.l+ke.size.r}).attr("height",function(ke){return ke.height+ke.size.t+ke.size.b}).attr("transform",function(ke){return i(ke.translateX,ke.translateY)});var J=Q.selectAll("."+A.cn.tableControlView).data(b.repeat,b.keyFun),K=J.enter().append("g").classed(A.cn.tableControlView,!0).style("box-sizing","content-box");if(ee){var Y="onwheel"in document?"wheel":"mousewheel";K.on("mousemove",function(ke){J.filter(function(Ee){return ke===Ee}).call(d,q)}).on(Y,function(ke){if(!ke.scrollbarState.wheeling){ke.scrollbarState.wheeling=!0;var Ee=ke.scrollY+k.event.deltaY;P(q,J,null,Ee)(ke)||(k.event.stopPropagation(),k.event.preventDefault()),ke.scrollbarState.wheeling=!1}}).call(d,q,!0)}J.attr("transform",function(ke){return i(ke.size.l,ke.size.t)});var ie=J.selectAll("."+A.cn.scrollBackground).data(b.repeat,b.keyFun);ie.enter().append("rect").classed(A.cn.scrollBackground,!0).attr("fill","none"),ie.attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}),J.each(function(ke){p.setClipUrl(k.select(this),h(q,ke),q)});var se=J.selectAll("."+A.cn.yColumn).data(function(ke){return ke.columns},b.keyFun);se.enter().append("g").classed(A.cn.yColumn,!0),se.exit().remove(),se.attr("transform",function(ke){return i(ke.x,0)}),ee&&se.call(k.behavior.drag().origin(function(ke){return _(k.select(this),ke,-A.uplift),t(this),ke.calcdata.columnDragInProgress=!0,d(J.filter(function(Ee){return ke.calcdata.key===Ee.key}),q),ke}).on("drag",function(ke){var Ee=k.select(this),me=function(oe){return(ke===oe?k.event.x:oe.x)+oe.columnWidth/2};ke.x=Math.max(-A.overdrag,Math.min(ke.calcdata.width+A.overdrag-ke.columnWidth,k.event.x)),x(se).filter(function(oe){return oe.calcdata.key===ke.calcdata.key}).sort(function(oe,re){return me(oe)-me(re)}).forEach(function(oe,re){oe.xIndex=re,oe.x=ke===oe?oe.x:oe.xScale(oe)}),se.filter(function(oe){return ke!==oe}).transition().ease(A.transitionEase).duration(A.transitionDuration).attr("transform",function(oe){return i(oe.x,0)}),Ee.call(n).attr("transform",i(ke.x,-A.uplift))}).on("dragend",function(ke){var Ee=k.select(this),me=ke.calcdata;ke.x=ke.xScale(ke),ke.calcdata.columnDragInProgress=!1,_(Ee,ke,0),function(oe,re,fe){var Se=re.gdColumnsOriginalOrder;re.gdColumns.sort(function(be,we){return fe[Se.indexOf(be)]-fe[Se.indexOf(we)]}),re.columnorder=fe,oe.emit("plotly_restyle")}(q,me,me.columns.map(function(oe){return oe.xIndex}))})),se.each(function(ke){p.setClipUrl(k.select(this),u(q,ke),q)});var ae=se.selectAll("."+A.cn.columnBlock).data(a.splitToPanels,b.keyFun);ae.enter().append("g").classed(A.cn.columnBlock,!0).attr("id",function(ke){return ke.key}),ae.style("cursor",function(ke){return ke.dragHandle?"ew-resize":ke.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ue=ae.filter(S),ve=ae.filter(f);ee&&ve.call(k.behavior.drag().origin(function(ke){return k.event.stopPropagation(),ke}).on("drag",P(q,J,-1)).on("dragend",function(){})),m(q,J,ue,ae),m(q,J,ve,ae);var ye=J.selectAll("."+A.cn.scrollAreaClip).data(b.repeat,b.keyFun);ye.enter().append("clipPath").classed(A.cn.scrollAreaClip,!0).attr("id",function(ke){return h(q,ke)});var de=ye.selectAll("."+A.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);de.enter().append("rect").classed(A.cn.scrollAreaClipRect,!0).attr("x",-A.overdrag).attr("y",-A.uplift).attr("fill","none"),de.attr("width",function(ke){return ke.width+2*A.overdrag}).attr("height",function(ke){return ke.height+A.uplift}),se.selectAll("."+A.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(A.cn.columnBoundary,!0);var pe=se.selectAll("."+A.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);pe.enter().append("clipPath").classed(A.cn.columnBoundaryClippath,!0),pe.attr("id",function(ke){return u(q,ke)});var ge=pe.selectAll("."+A.cn.columnBoundaryRect).data(b.repeat,b.keyFun);ge.enter().append("rect").classed(A.cn.columnBoundaryRect,!0).attr("fill","none"),ge.attr("width",function(ke){return ke.columnWidth+2*c(ke)}).attr("height",function(ke){return ke.calcdata.height+2*c(ke)+A.uplift}).attr("x",function(ke){return-c(ke)}).attr("y",function(ke){return-c(ke)}),E(null,ve,J)}},40516:function(X,I,e){"use strict";var A=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),p=e(424),s=e(32984),t=e(92880).extendFlat,i=e(98192).c;X.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:p.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:p.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:p.hoverinfo,hovertemplate:A({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:p.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(X,I,e){"use strict";var A=e(7316);I.name="treemap",I.plot=function(k,o,T,b){A.plotBasePlot(I.name,k,o,T,b)},I.clean=function(k,o,T,b){A.cleanBasePlot(I.name,k,o,T,b)}},97840:function(X,I,e){"use strict";var A=e(3776);I.r=function(k,o){return A.calc(k,o)},I.q=function(k){return A._runCrossTraceCalc("treemap",k)}},32984:function(X){"use strict";X.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(X,I,e){"use strict";var A=e(3400),k=e(40516),o=e(76308),T=e(86968).Q,b=e(31508).handleText,p=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;X.exports=function(r,a,l,c){function h(_,f){return A.coerce(r,a,k,_,f)}var u=h("labels"),x=h("parents");if(u&&u.length&&x&&x.length){var d=h("values");d&&d.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.packing")==="squarify"&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var m=h("text");h("texttemplate"),a.texttemplate||h("textinfo",A.isArrayOrTypedArray(m)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");b(r,a,c,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var y=a.textposition.indexOf("bottom")!==-1;s(r,a,c,h),(a._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis)?n(r,a,c,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(a.marker.colors||[]).length);var v=2*a.textfont.size;h("marker.pad.t",y?v/4:v),h("marker.pad.l",v/4),h("marker.pad.r",v/4),h("marker.pad.b",y?v:v/4),h("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:o.contrast(c.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*p),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,c,h),a._length=null}else a.visible=!1}},95808:function(X,I,e){"use strict";var A=e(33428),k=e(78176),o=e(82744).clearMinTextSize,T=e(60100).resizeText,b=e(52960);X.exports=function(p,s,t,i,n){var r,a,l=n.type,c=n.drawDescendants,h=p._fullLayout,u=h["_"+l+"layer"],x=!t;o(l,h),(r=u.selectAll("g.trace."+l).data(s,function(d){return d[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),r.order(),!h.uniformtext.mode&&k.hasTransition(t)?(i&&(a=i()),A.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){u.selectAll("g.trace").each(function(d){b(p,d,this,t,c)})})):(r.each(function(d){b(p,d,this,t,c)}),h.uniformtext.mode&&T(p,u.selectAll(".trace"),l)),x&&r.exit().remove()}},27336:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),p=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),n=!0;X.exports=function(r,a,l,c,h){var u=h.barDifY,x=h.width,d=h.height,m=h.viewX,g=h.viewY,y=h.pathSlice,v=h.toMoveInsideSlice,_=h.strTransform,f=h.hasTransition,S=h.handleSlicesExit,w=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,P={},C=r._context.staticPlot,O=r._fullLayout,R=a[0],U=R.trace,D=R.hierarchy,N=x/U._entryDepth,W=t.listPath(l.data,"id"),F=b(D.copy(),[x,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(q){var te=W.indexOf(q.data.id);return te!==-1&&(q.x0=N*te,q.x1=N*(te+1),q.y0=u,q.y1=u+d,q.onPathbar=!0,!0)})).reverse(),(c=c.data(F,t.getPtId)).enter().append("g").classed("pathbar",!0),S(c,n,P,[x,d],y),c.order();var j=c;f&&(j=j.transition().each("end",function(){var q=A.select(this);t.setSliceCursor(q,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(q){q._x0=m(q.x0),q._x1=m(q.x1),q._y0=g(q.y0),q._y1=g(q.y1),q._hoverX=m(q.x1-Math.min(x,d)/2),q._hoverY=g(q.y1-d/2);var te=A.select(this),ee=k.ensureSingle(te,"path","surface",function(Y){Y.style("pointer-events",C?"none":"all")});f?ee.transition().attrTween("d",function(Y){var ie=w(Y,n,P,[x,d]);return function(se){return y(ie(se))}}):ee.attr("d",y),te.call(i,l,r,a,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),ee.call(p,q,U,r,{hovered:!1}),q._text=(t.getPtLabel(q)||"").split("<br>").join(" ")||"";var Q=k.ensureSingle(te,"g","slicetext"),J=k.ensureSingle(Q,"text","",function(Y){Y.attr("data-notex",1)}),K=k.ensureUniformFontSize(r,t.determineTextFont(U,q,O.font,{onPathbar:!0}));J.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,K).call(T.convertToTspans,r),q.textBB=o.bBox(J.node()),q.transform=v(q,{fontSize:K.size,onPathbar:!0}),q.transform.fontSize=K.size,f?J.transition().attrTween("transform",function(Y){var ie=E(Y,n,P,[x,d]);return function(se){return _(ie(se))}}):J.attr("transform",_(q))})}},76477:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),p=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,r=!1;X.exports=function(a,l,c,h,u){var x=u.width,d=u.height,m=u.viewX,g=u.viewY,y=u.pathSlice,v=u.toMoveInsideSlice,_=u.strTransform,f=u.hasTransition,S=u.handleSlicesExit,w=u.makeUpdateSliceInterpolator,E=u.makeUpdateTextInterpolator,P=u.prevEntry,C=a._context.staticPlot,O=a._fullLayout,R=l[0].trace,U=R.textposition.indexOf("left")!==-1,D=R.textposition.indexOf("right")!==-1,N=R.textposition.indexOf("bottom")!==-1,W=!N&&!R.marker.pad.t||N&&!R.marker.pad.b,F=b(c,[x,d],{packing:R.tiling.packing,squarifyratio:R.tiling.squarifyratio,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,pad:{inner:R.tiling.pad,top:R.marker.pad.t,left:R.marker.pad.l,right:R.marker.pad.r,bottom:R.marker.pad.b}}).descendants(),j=1/0,q=-1/0;F.forEach(function(K){var Y=K.depth;Y>=R._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(j=Math.min(j,Y),q=Math.max(q,Y))}),h=h.data(F,t.getPtId),R._maxVisibleLayers=isFinite(q)?q-j+1:0,h.enter().append("g").classed("slice",!0),S(h,r,{},[x,d],y),h.order();var te=null;if(f&&P){var ee=t.getPtId(P);h.each(function(K){te===null&&t.getPtId(K)===ee&&(te={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var Q=function(){return te||{x0:0,x1:x,y0:0,y1:d}},J=h;return f&&(J=J.transition().each("end",function(){var K=A.select(this);t.setSliceCursor(K,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(K){var Y=t.isHeader(K,R);K._x0=m(K.x0),K._x1=m(K.x1),K._y0=g(K.y0),K._y1=g(K.y1),K._hoverX=m(K.x1-R.marker.pad.r),K._hoverY=g(N?K.y1-R.marker.pad.b/2:K.y0+R.marker.pad.t/2);var ie=A.select(this),se=k.ensureSingle(ie,"path","surface",function(pe){pe.style("pointer-events",C?"none":"all")});f?se.transition().attrTween("d",function(pe){var ge=w(pe,r,Q(),[x,d]);return function(ke){return y(ge(ke))}}):se.attr("d",y),ie.call(i,c,a,l,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),se.call(p,K,R,a,{hovered:!1}),K.x0===K.x1||K.y0===K.y1?K._text="":K._text=Y?W?"":t.getPtLabel(K)||"":n(K,c,R,l,O)||"";var ae=k.ensureSingle(ie,"g","slicetext"),ue=k.ensureSingle(ae,"text","",function(pe){pe.attr("data-notex",1)}),ve=k.ensureUniformFontSize(a,t.determineTextFont(R,K,O.font)),ye=K._text||" ",de=Y&&ye.indexOf("<br>")===-1;ue.text(ye).classed("slicetext",!0).attr("text-anchor",D?"end":U||de?"start":"middle").call(o.font,ve).call(T.convertToTspans,a),K.textBB=o.bBox(ue.node()),K.transform=v(K,{fontSize:ve.size,isHeader:Y}),K.transform.fontSize=ve.size,f?ue.transition().attrTween("transform",function(pe){var ge=E(pe,r,Q(),[x,d]);return function(ke){return _(ge(ke))}}):ue.attr("transform",_(K))}),te}},83024:function(X){"use strict";X.exports=function I(e,A,k){var o;k.swapXY&&(o=e.x0,e.x0=e.y0,e.y0=o,o=e.x1,e.x1=e.y1,e.y1=o),k.flipX&&(o=e.x0,e.x0=A[0]-e.x1,e.x1=A[0]-o),k.flipY&&(o=e.y0,e.y0=A[1]-e.y1,e.y1=A[1]-o);var T=e.children;if(T)for(var b=0;b<T.length;b++)I(T[b],A,k)}},31991:function(X,I,e){"use strict";X.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(X){"use strict";X.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(X,I,e){"use strict";var A=e(3400),k=e(45392);X.exports=function(o,T){function b(p,s){return A.coerce(o,T,k,p,s)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},13832:function(X,I,e){"use strict";var A=e(74148),k=e(83024);X.exports=function(o,T,b){var p,s=b.flipX,t=b.flipY,i=b.packing==="dice-slice",n=b.pad[t?"bottom":"top"],r=b.pad[s?"right":"left"],a=b.pad[s?"left":"right"],l=b.pad[t?"top":"bottom"];i&&(p=r,r=n,n=p,p=a,a=l,l=p);var c=A.treemap().tile(function(h,u){switch(h){case"squarify":return A.treemapSquarify.ratio(u);case"binary":return A.treemapBinary;case"dice":return A.treemapDice;case"slice":return A.treemapSlice;default:return A.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(r).paddingRight(a).paddingTop(n).paddingBottom(l).size(i?[T[1],T[0]]:T)(o);return(i||s||t)&&k(c,T,{swapXY:i,flipX:s,flipY:t}),c}},53264:function(X,I,e){"use strict";var A=e(95808),k=e(76477);X.exports=function(o,T,b,p){return A(o,T,b,p,{type:"treemap",drawDescendants:k})}},52960:function(X,I,e){"use strict";var A=e(33428),k=e(67756).qy,o=e(78176),T=e(3400),b=e(78048).TEXTPAD,p=e(98184).toMoveInsideBar,s=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function n(r){return o.isHierarchyRoot(r)?"":o.getPtId(r)}X.exports=function(r,a,l,c,h){var u=r._fullLayout,x=a[0],d=x.trace,m=d.type==="icicle",g=x.hierarchy,y=o.findEntryWithLevel(g,d.level),v=A.select(l),_=v.selectAll("g.pathbar"),f=v.selectAll("g.slice");if(!y)return _.remove(),void f.remove();var S=o.isHierarchyRoot(y),w=!u.uniformtext.mode&&o.hasTransition(c),E=o.getMaxDepth(d),P=u._size,C=d.domain,O=P.w*(C.x[1]-C.x[0]),R=P.h*(C.y[1]-C.y[0]),U=O,D=d.pathbar.thickness,N=d.marker.line.width+t.gapWithPathbar,W=d.pathbar.visible?d.pathbar.side.indexOf("bottom")>-1?R+N:-(D+N):0,F={x0:U,x1:U,y0:W,y1:W+D},j=function(_e,Ae,De){var Le=d.tiling.pad,Be=function(it){return it-Le<=Ae.x0},Ve=function(it){return it+Le>=Ae.x1},Ze=function(it){return it-Le<=Ae.y0},rt=function(it){return it+Le>=Ae.y1};return _e.x0===Ae.x0&&_e.x1===Ae.x1&&_e.y0===Ae.y0&&_e.y1===Ae.y1?{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1}:{x0:Be(_e.x0-Le)?0:Ve(_e.x0-Le)?De[0]:_e.x0,x1:Be(_e.x1+Le)?0:Ve(_e.x1+Le)?De[0]:_e.x1,y0:Ze(_e.y0-Le)?0:rt(_e.y0-Le)?De[1]:_e.y0,y1:Ze(_e.y1+Le)?0:rt(_e.y1+Le)?De[1]:_e.y1}},q=null,te={},ee={},Q=null,J=function(_e,Ae){return Ae?te[n(_e)]:ee[n(_e)]};x.hasMultipleRoots&&S&&E++,d._maxDepth=E,d._backgroundColor=u.paper_bgcolor,d._entryDepth=y.data.depth,d._atRootLevel=S;var K=-O/2+P.l+P.w*(C.x[1]+C.x[0])/2,Y=-R/2+P.t+P.h*(1-(C.y[1]+C.y[0])/2),ie=function(_e){return K+_e},se=function(_e){return Y+_e},ae=se(0),ue=ie(0),ve=function(_e){return ue+_e},ye=function(_e){return ae+_e};function de(_e,Ae){return _e+","+Ae}var pe=ve(0),ge=function(_e){_e.x=Math.max(pe,_e.x)},ke=d.pathbar.edgeshape,Ee=d[m?"tiling":"marker"].pad,me=function(_e){return d.textposition.indexOf(_e)!==-1},oe=me("top"),re=me("left"),fe=me("right"),Se=me("bottom"),be=function(_e,Ae){var De=_e.x0,Le=_e.x1,Be=_e.y0,Ve=_e.y1,Ze=_e.textBB,rt=oe||Ae.isHeader&&!Se?"start":Se?"end":"middle",it=me("right"),dt=me("left")||Ae.onPathbar?-1:it?1:0;if(Ae.isHeader){if((De+=(m?Ee:Ee.l)-b)>=(Le-=(m?Ee:Ee.r)-b)){var mt=(De+Le)/2;De=mt,Le=mt}var ht;Se?Be<(ht=Ve-(m?Ee:Ee.b))&&ht<Ve&&(Be=ht):Be<(ht=Be+(m?Ee:Ee.t))&&ht<Ve&&(Ve=ht)}var Qe=p(De,Le,Be,Ve,Ze,{isHorizontal:!1,constrained:!0,angle:0,anchor:rt,leftToRight:dt});return Qe.fontSize=Ae.fontSize,Qe.targetX=ie(Qe.targetX),Qe.targetY=se(Qe.targetY),isNaN(Qe.targetX)||isNaN(Qe.targetY)?{}:(De!==Le&&Be!==Ve&&s(d.type,Qe,u),{scale:Qe.scale,rotate:Qe.rotate,textX:Qe.textX,textY:Qe.textY,anchorX:Qe.anchorX,anchorY:Qe.anchorY,targetX:Qe.targetX,targetY:Qe.targetY})},we=function(_e,Ae){for(var De,Le=0,Be=_e;!De&&Le<E;)Le++,(Be=Be.parent)?De=J(Be,Ae):Le=E;return De||{}},Me=function(_e,Ae,De,Le,Be){var Ve,Ze=J(_e,Ae);if(Ze)Ve=Ze;else if(Ae)Ve=F;else if(q)if(_e.parent){var rt=Q||De;rt&&!Ae?Ve=j(_e,rt,Le):(Ve={},T.extendFlat(Ve,we(_e,Ae)))}else Ve=T.extendFlat({},_e),m&&(Be.orientation==="h"?Be.flipX?Ve.x0=_e.x1:Ve.x1=0:Be.flipY?Ve.y0=_e.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1})},Ie=function(_e,Ae,De,Le){var Be=J(_e,Ae),Ve={},Ze=function(it,dt,mt,ht){if(dt)return te[n(g)]||F;var Qe=ee[d.level]||mt;return function(Je){return Je.data.depth-y.data.depth<E}(it)?j(it,Qe,ht):{}}(_e,Ae,De,Le);T.extendFlat(Ve,{transform:be({x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,textBB:_e.textBB,_text:_e._text},{isHeader:o.isHeader(_e,d)})}),Be?Ve=Be:_e.parent&&T.extendFlat(Ve,we(_e,Ae));var rt=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&s(d.type,rt,u),k(Ve,{transform:{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY}})},Oe=function(_e,Ae,De,Le,Be){var Ve=Le[0],Ze=Le[1];w?_e.exit().transition().each(function(){var rt=A.select(this);rt.select("path.surface").transition().attrTween("d",function(it){var dt=function(mt,ht,Qe,Je){var wt,Pt=J(mt,ht);if(ht)wt=F;else{var It=J(y,ht);wt=It?j(mt,It,Je):{}}return k(Pt,wt)}(it,Ae,0,[Ve,Ze]);return function(mt){return Be(dt(mt))}}),rt.select("g.slicetext").attr("opacity",0)}).remove():_e.exit().remove()},he=function(_e){var Ae=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&s(d.type,Ae,u),T.getTextTransform({textX:Ae.textX,textY:Ae.textY,anchorX:Ae.anchorX,anchorY:Ae.anchorY,targetX:Ae.targetX,targetY:Ae.targetY,scale:Ae.scale,rotate:Ae.rotate})};w&&(_.each(function(_e){te[n(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&(te[n(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate})}),f.each(function(_e){ee[n(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&(ee[n(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate}),!q&&o.isEntry(_e)&&(q=_e)})),Q=h(r,a,y,f,{width:O,height:R,viewX:ie,viewY:se,pathSlice:function(_e){var Ae=ie(_e.x0),De=ie(_e.x1),Le=se(_e.y0),Be=se(_e.y1),Ve=De-Ae,Ze=Be-Le;if(!Ve||!Ze)return"";var rt=d.marker.cornerradius||0,it=Math.min(rt,Ve/2,Ze/2);it&&_e.data&&_e.data.data&&_e.data.data.label&&(oe&&(it=Math.min(it,Ee.t)),re&&(it=Math.min(it,Ee.l)),fe&&(it=Math.min(it,Ee.r)),Se&&(it=Math.min(it,Ee.b)));var dt=function(mt,ht){return it?"a"+de(it,it)+" 0 0 1 "+de(mt,ht):""};return"M"+de(Ae,Le+it)+dt(it,-it)+"L"+de(De-it,Le)+dt(it,it)+"L"+de(De,Be-it)+dt(-it,it)+"L"+de(Ae+it,Be)+dt(-it,-it)+"Z"},toMoveInsideSlice:be,prevEntry:q,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Ie,handleSlicesExit:Oe,hasTransition:w,strTransform:he}),d.pathbar.visible?i(r,a,y,_,{barDifY:W,width:U,height:D,viewX:ve,viewY:ye,pathSlice:function(_e){var Ae=ve(Math.max(Math.min(_e.x0,_e.x0),0)),De=ve(Math.min(Math.max(_e.x1,_e.x1),U)),Le=ye(_e.y0),Be=ye(_e.y1),Ve=D/2,Ze={},rt={};Ze.x=Ae,rt.x=De,Ze.y=rt.y=(Le+Be)/2;var it={x:Ae,y:Le},dt={x:De,y:Le},mt={x:De,y:Be},ht={x:Ae,y:Be};return ke===">"?(it.x-=Ve,dt.x-=Ve,mt.x-=Ve,ht.x-=Ve):ke==="/"?(mt.x-=Ve,ht.x-=Ve,Ze.x-=Ve/2,rt.x-=Ve/2):ke==="\\"?(it.x-=Ve,dt.x-=Ve,Ze.x-=Ve/2,rt.x-=Ve/2):ke==="<"&&(Ze.x-=Ve,rt.x-=Ve),ge(it),ge(ht),ge(Ze),ge(dt),ge(mt),ge(rt),"M"+de(it.x,it.y)+"L"+de(dt.x,dt.y)+"L"+de(rt.x,rt.y)+"L"+de(mt.x,mt.y)+"L"+de(ht.x,ht.y)+"L"+de(Ze.x,Ze.y)+"Z"},toMoveInsideSlice:be,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Ie,handleSlicesExit:Oe,hasTransition:w,strTransform:he}):_.remove()}},66192:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(3400),T=e(78176),b=e(82744).resizeText,p=e(60404);function s(t,i,n,r,a){var l,c,h=(a||{}).hovered,u=i.data.data,x=u.i,d=u.color,m=T.isHierarchyRoot(i),g=1;if(h)l=n._hovered.marker.line.color,c=n._hovered.marker.line.width;else if(m&&d===n.root.color)g=100,l="rgba(0,0,0,0)",c=0;else if(l=o.castOption(n,x,"marker.line.color")||k.defaultLine,c=o.castOption(n,x,"marker.line.width")||0,!n._hasColorscale&&!i.onPathbar){var y=n.marker.depthfade;if(y){var v,_=k.combine(k.addOpacity(n._backgroundColor,.75),d);if(y===!0){var f=T.getMaxDepth(n);v=isFinite(f)?T.isLeaf(i)?0:n._maxVisibleLayers-(i.data.depth-n._entryDepth):i.data.height+1}else v=i.data.depth-n._entryDepth,n._atRootLevel||v++;if(v>0)for(var S=0;S<v;S++){var w=.5*S/v;d=k.combine(k.addOpacity(_,w),d)}}}t.call(p,i,n,r,d).style("stroke-width",c).call(k.stroke,l).style("opacity",g)}X.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");b(t,i,"treemap"),i.each(function(n){var r=A.select(this),a=n[0].trace;r.style("opacity",a.opacity),r.selectAll("path.surface").each(function(l){A.select(this).call(s,l,a,t,{hovered:!1})})})},styleOne:s}},13988:function(X,I,e){"use strict";var A=e(63188),k=e(92880).extendFlat,o=e(29736).axisHoverFormat;X.exports={y:A.y,x:A.x,x0:A.x0,y0:A.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:k({},A.name,{}),orientation:k({},A.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A.fillcolor,points:k({},A.boxpoints,{}),jitter:k({},A.jitter,{}),pointpos:k({},A.pointpos,{}),width:k({},A.width,{}),marker:A.marker,text:A.text,hovertext:A.hovertext,hovertemplate:A.hovertemplate,quartilemethod:A.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:A.zorder}},67064:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(62555),T=e(63800),b=e(39032).BADNUM;function p(t,i,n){var r=i.max-i.min;if(!r)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,r/1e4);var a=n.length,l=A.stdev(n,a-1,i.mean);return Math.max(function(c,h,u){return 1.059*Math.min(h,u/1.349)*Math.pow(c,-.2)}(a,l,i.q3-i.q1),r/100)}function s(t,i,n,r){var a,l=t.spanmode,c=t.span||[],h=[i.min,i.max],u=[i.min-2*r,i.max+2*r];function x(m){var g=c[m],y=n.type==="multicategory"?n.r2c(g):n.d2c(g,0,t[i.valLetter+"calendar"]);return y===b?u[m]:y}var d={type:"linear",range:a=l==="soft"?u:l==="hard"?h:[x(0),x(1)]};return k.setConvert(d),d.cleanRange(),a}X.exports=function(t,i){var n=o(t,i);if(n[0].t.empty)return n;for(var r=t._fullLayout,a=k.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),l=1/0,c=-1/0,h=0,u=0,x=0;x<n.length;x++){var d=n[x],m=d.pts.map(T.extractVal),g=d.bandwidth=p(i,d,m),y=d.span=s(i,d,a,g);if(d.min===d.max&&g===0)y=d.span=[d.min,d.max],d.density=[{v:1,t:y[0]}],d.bandwidth=g,h=Math.max(h,1);else{var v=y[1]-y[0],_=Math.ceil(v/(g/3)),f=v/_;if(!isFinite(f)||!isFinite(_))return A.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var S=T.makeKDE(d,i,m);d.density=new Array(_);for(var w=0,E=y[0];E<y[1]+f/2;w++,E+=f){var P=S(E);d.density[w]={v:P,t:E},h=Math.max(h,P)}}u=Math.max(u,m.length),l=Math.min(l,y[0]),c=Math.max(c,y[1])}var C=k.findExtremes(a,[l,c],{padded:!0});if(i._extremes[a._id]=C,i.width)n[0].t.maxKDE=h;else{var O=r._violinScaleGroupStats,R=i.scalegroup,U=O[R];U?(U.maxKDE=Math.max(U.maxKDE,h),U.maxCount=Math.max(U.maxCount,u)):O[R]={maxKDE:h,maxCount:u}}return n[0].t.labels.kde=A._(t,"kde:"),n}},14348:function(X,I,e){"use strict";var A=e(96404).setPositionOffset,k=["v","h"];X.exports=function(o,T){for(var b=o.calcdata,p=T.xaxis,s=T.yaxis,t=0;t<k.length;t++){for(var i=k[t],n=i==="h"?s:p,r=[],a=0;a<b.length;a++){var l=b[a],c=l[0].t,h=l[0].trace;h.visible!==!0||h.type!=="violin"||c.empty||h.orientation!==i||h.xaxis!==p._id||h.yaxis!==s._id||r.push(a)}A("violin",o,r,n)}}},36240:function(X,I,e){"use strict";var A=e(3400),k=e(76308),o=e(90624),T=e(13988);X.exports=function(b,p,s,t){function i(v,_){return A.coerce(b,p,T,v,_)}function n(v,_){return A.coerce2(b,p,T,v,_)}if(o.handleSampleDefaults(b,p,i,t),p.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",p.name),i("scalemode"));var r,a=i("span");Array.isArray(a)&&(r="manual"),i("spanmode",r);var l=i("line.color",(b.marker||{}).color||s),c=i("line.width"),h=i("fillcolor",k.addOpacity(p.line.color,.5));o.handlePointsDefaults(b,p,i,{prefix:""});var u=n("box.width"),x=n("box.fillcolor",h),d=n("box.line.color",l),m=n("box.line.width",c);i("box.visible",!!(u||x||d||m))||(p.box={visible:!1});var g=n("meanline.color",l),y=n("meanline.width",c);i("meanline.visible",!!(g||y))||(p.meanline={visible:!1}),i("quartilemethod"),i("zorder")}}},63800:function(X,I,e){"use strict";var A=e(3400),k=function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)};I.makeKDE=function(o,T,b){var p=b.length,s=k,t=o.bandwidth,i=1/(p*t);return function(n){for(var r=0,a=0;a<p;a++)r+=s((n-b[a])/t);return i*r}},I.getPositionOnKdePath=function(o,T,b){var p,s;T.orientation==="h"?(p="y",s="x"):(p="x",s="y");var t=A.findPointOnPath(o.path,b,s,{pathLength:o.pathLength}),i=o.posCenterPx,n=t[p];return[n,T.side==="both"?2*i-n:i]},I.getKdeValue=function(o,T,b){var p=o.pts.map(I.extractVal);return I.makeKDE(o,T,p)(b)/o.posDensityScale},I.extractVal=function(o){return o.v}},78e3:function(X,I,e){"use strict";var A=e(76308),k=e(3400),o=e(54460),T=e(27576),b=e(63800);X.exports=function(p,s,t,i,n){n||(n={});var r,a,l=n.hoverLayer,c=p.cd,h=c[0].trace,u=h.hoveron,x=u.indexOf("violins")!==-1,d=u.indexOf("kde")!==-1,m=[];if(x||d){var g=T.hoverOnBoxes(p,s,t,i);if(d&&g.length>0){var y,v,_,f,S,w=p.xa,E=p.ya;h.orientation==="h"?(S=s,y="y",_=E,v="x",f=w):(S=t,y="x",_=w,v="y",f=E);var P=c[p.index];if(S>=P.span[0]&&S<=P.span[1]){var C=k.extendFlat({},p),O=f.c2p(S,!0),R=b.getKdeValue(P,h,S),U=b.getPositionOnKdePath(P,h,O),D=_._offset,N=_._length;C[y+"0"]=U[0],C[y+"1"]=U[1],C[v+"0"]=C[v+"1"]=O,C[v+"Label"]=v+": "+o.hoverLabelText(f,S,h[v+"hoverformat"])+", "+c[0].t.labels.kde+" "+R.toFixed(3);for(var W=0,F=0;F<g.length;F++)if(g[F].attr==="med"){W=F;break}C.spikeDistance=g[W].spikeDistance;var j=y+"Spike";C[j]=g[W][j],g[W].spikeDistance=void 0,g[W][j]=void 0,C.hovertemplate=!1,m.push(C),(a={})[y+"1"]=k.constrain(D+U[0],D,D+N),a[y+"2"]=k.constrain(D+U[1],D,D+N),a[v+"1"]=a[v+"2"]=f._offset+O}}x&&(m=m.concat(g))}u.indexOf("points")!==-1&&(r=T.hoverOnPoints(p,s,t));var q=l.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return q.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),q.exit().remove(),q.attr(a).call(A.stroke,p.color),i==="closest"?r?[r]:m:(r&&m.push(r),m)}},22869:function(X,I,e){"use strict";X.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(X,I,e){"use strict";var A=e(16560),k=e(3400).extendFlat;X.exports={violinmode:k({},A.boxmode,{}),violingap:k({},A.boxgap,{}),violingroupgap:k({},A.boxgroupgap,{})}},8939:function(X,I,e){"use strict";var A=e(3400),k=e(98228),o=e(68832);X.exports=function(T,b,p){o._supply(T,b,p,function(s,t){return A.coerce(T,b,k,s,t)},"violin")}},5140:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(18728),b=e(52340),p=e(63800);X.exports=function(s,t,i,n){var r=s._context.staticPlot,a=s._fullLayout,l=t.xaxis,c=t.yaxis;function h(u,x){var d=b(u,{xaxis:l,yaxis:c,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(d[0],1)}k.makeTraceGroups(n,i,"trace violins").each(function(u){var x=A.select(this),d=u[0],m=d.t,g=d.trace;if(g.visible!==!0||m.empty)x.remove();else{var y=m.bPos,v=m.bdPos,_=t[m.valLetter+"axis"],f=t[m.posLetter+"axis"],S=g.side==="both",w=S||g.side==="positive",E=S||g.side==="negative",P=x.selectAll("path.violin").data(k.identity);P.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(F){var j,q,te,ee,Q,J,K,Y,ie=A.select(this),se=F.density,ae=se.length,ue=f.c2l(F.pos+y,!0),ve=f.l2p(ue);if(g.width)j=m.maxKDE/v;else{var ye=a._violinScaleGroupStats[g.scalegroup];j=g.scalemode==="count"?ye.maxKDE/v*(ye.maxCount/F.pts.length):ye.maxKDE/v}if(w){for(K=new Array(ae),Q=0;Q<ae;Q++)(Y=K[Q]={})[m.posLetter]=ue+se[Q].v/j,Y[m.valLetter]=_.c2l(se[Q].t,!0);q=h(K,g)}if(E){for(K=new Array(ae),J=0,Q=ae-1;J<ae;J++,Q--)(Y=K[J]={})[m.posLetter]=ue-se[Q].v/j,Y[m.valLetter]=_.c2l(se[Q].t,!0);te=h(K,g)}if(S)ee=q+"L"+te.substr(1)+"Z";else{var de=[ve,_.c2p(se[0].t)],pe=[ve,_.c2p(se[ae-1].t)];g.orientation==="h"&&(de.reverse(),pe.reverse()),ee=w?"M"+de+"L"+q.substr(1)+"L"+pe:"M"+pe+"L"+te.substr(1)+"L"+de}ie.attr("d",ee),F.posCenterPx=ve,F.posDensityScale=j*v,F.path=ie.node(),F.pathLength=F.path.getTotalLength()/(S?2:1)});var C,O,R,U=g.box,D=U.width,N=(U.line||{}).width;S?(C=v*D,O=0):w?(C=[0,v*D/2],O=N*{x:1,y:-1}[m.posLetter]):(C=[v*D/2,0],O=N*{x:-1,y:1}[m.posLetter]),T.plotBoxAndWhiskers(x,{pos:f,val:_},g,{bPos:y,bdPos:C,bPosPxOffset:O}),T.plotBoxMean(x,{pos:f,val:_},g,{bPos:y,bdPos:C,bPosPxOffset:O}),!g.box.visible&&g.meanline.visible&&(R=k.identity);var W=x.selectAll("path.meanline").data(R||[]);W.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",r?"none":"non-scaling-stroke"),W.exit().remove(),W.each(function(F){var j=_.c2p(F.mean,!0),q=p.getPositionOnKdePath(F,g,j);A.select(this).attr("d",g.orientation==="h"?"M"+j+","+q[0]+"V"+q[1]:"M"+q[0]+","+j+"H"+q[1])}),T.plotPoints(x,{x:l,y:c},g,m)}})}},95908:function(X,I,e){"use strict";var A=e(33428),k=e(76308),o=e(49224).stylePoints;X.exports=function(T){var b=A.select(T).selectAll("g.trace.violins");b.style("opacity",function(p){return p[0].trace.opacity}),b.each(function(p){var s=p[0].trace,t=A.select(this),i=s.box||{},n=i.line||{},r=s.meanline||{},a=r.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",n.width+"px").call(k.stroke,n.color).call(k.fill,i.fillcolor);var l={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(l).call(k.stroke,r.color),t.selectAll("path.meanline").style(l).call(k.stroke,r.color),o(t,s,T)})}},58168:function(X,I,e){"use strict";var A=e(49084),k=e(50048),o=e(16716),T=e(45464),b=e(92880).extendFlat,p=e(67824).overrideAll,s=X.exports=p(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:o.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},91976:function(X,I,e){"use strict";var A=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,p=e(52094),s=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(r,a,l){this.scene=r,this.uid=l,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(r){if(r.object===this.mesh){var a=r.data.index,l=this.data._meshX[a],c=this.data._meshY[a],h=this.data._meshZ[a],u=this.data._Ys.length,x=this.data._Zs.length,d=s(l,this.data._Xs).id,m=s(c,this.data._Ys).id,g=s(h,this.data._Zs).id,y=r.index=g+x*m+x*u*d;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var v=this.data.hovertext||this.data.text;return o(v)&&v[y]!==void 0?r.textLabel=v[y]:v&&(r.textLabel=v),!0}},n.update=function(r){var a=this.scene,l=a.fullSceneLayout;function c(x,d,m,g){return d.map(function(y){return x.d2l(y,0,g)*m})}this.data=t(r);var h={positions:p(c(l.xaxis,r._meshX,a.dataScale[0],r.xcalendar),c(l.yaxis,r._meshY,a.dataScale[1],r.ycalendar),c(l.zaxis,r._meshZ,a.dataScale[2],r.zcalendar)),cells:p(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:T(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},u=b(r);h.vertexIntensity=r._meshIntensity,h.vertexIntensityBounds=[u.min,u.max],h.colormap=k(r),this.mesh.update(h)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},X.exports=function(r,a){var l=r.glplot.gl,c=A({gl:l}),h=new i(r,c,a.uid);return c._trace=h,h.update(a),r.glplot.add(c),h}},12448:function(X,I,e){"use strict";var A=e(3400),k=e(58168),o=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;X.exports=function(b,p,s,t){function i(n,r){return A.coerce(b,p,k,n,r)}o(b,p,s,t,i),T(b,p,t,i)}},67776:function(X,I,e){"use strict";X.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(X,I,e){"use strict";var A=e(20832),k=e(52904).line,o=e(45464),T=e(29736).axisHoverFormat,b=e(21776).Ks,p=e(21776).Gw,s=e(10213),t=e(92880).extendFlat,i=e(76308);function n(r){return{marker:{color:t({},A.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},A.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},A.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}X.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:A.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:t({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:p({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:A.text,textposition:A.textposition,insidetextanchor:A.insidetextanchor,textangle:A.textangle,textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:A.orientation,offset:A.offset,width:A.width,increasing:n(),decreasing:n(),totals:n(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,zorder:A.zorder}},73540:function(X,I,e){"use strict";var A=e(54460),k=e(1220),o=e(3400).mergeArray,T=e(4500),b=e(39032).BADNUM;function p(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}X.exports=function(t,i){var n,r,a,l,c,h,u=A.getFromId(t,i.xaxis||"x"),x=A.getFromId(t,i.yaxis||"y");i.orientation==="h"?(n=u.makeCalcdata(i,"x"),a=x.makeCalcdata(i,"y"),l=k(i,x,"y",a),c=!!i.yperiodalignment,h="y"):(n=x.makeCalcdata(i,"y"),a=u.makeCalcdata(i,"x"),l=k(i,u,"x",a),c=!!i.xperiodalignment,h="x"),r=l.vals;for(var d,m=Math.min(r.length,n.length),g=new Array(m),y=0,v=!1,_=0;_<m;_++){var f=n[_]||0,S=!1;(n[_]!==b||s(i.measure[_])||p(i.measure[_]))&&_+1<m&&(n[_+1]!==b||s(i.measure[_+1])||p(i.measure[_+1]))&&(S=!0);var w=g[_]={i:_,p:r[_],s:f,rawS:f,cNext:S};p(i.measure[_])?(y=w.s,w.isSum=!0,w.dir="totals",w.s=y):s(i.measure[_])?(w.isSum=!0,w.dir="totals",w.s=y):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",d=w.s,w.s=y+d,y+=d),w.dir==="totals"&&(v=!0),c&&(g[_].orig_p=a[_],g[_][h+"End"]=l.ends[_],g[_][h+"Start"]=l.starts[_]),i.ids&&(w.id=String(i.ids[_])),w.v=(i.base||0)+y}return g.length&&(g[0].hasTotals=v),o(i.text,g,"tx"),o(i.hovertext,g,"htx"),T(g,i),g}},10213:function(X){"use strict";X.exports={eventDataKeys:["initial","delta","final"]}},50152:function(X,I,e){"use strict";var A=e(96376).setGroupPositions;X.exports=function(k,o){var T,b,p=k._fullLayout,s=k._fullData,t=k.calcdata,i=o.xaxis,n=o.yaxis,r=[],a=[],l=[];for(b=0;b<s.length;b++){var c=s[b];c.visible===!0&&c.xaxis===i._id&&c.yaxis===n._id&&c.type==="waterfall"&&(T=t[b],c.orientation==="h"?l.push(T):a.push(T),r.push(T))}var h={mode:p.waterfallmode,norm:p.waterfallnorm,gap:p.waterfallgap,groupgap:p.waterfallgroupgap};for(A(k,i,n,a,h),A(k,n,i,l,h),b=0;b<r.length;b++){T=r[b];for(var u=0;u<T.length;u++){var x=T[u];x.isSum===!1&&(x.s0+=u===0?0:T[u-1].s),u+1<T.length&&(T[u].nextP0=T[u+1].p0,T[u].nextS0=T[u+1].s0)}}}},24224:function(X,I,e){"use strict";var A=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),p=e(65776),s=e(76308),t=e(48164),i=t.INCREASING.COLOR,n=t.DECREASING.COLOR;function r(a,l,c){a(l+".marker.color",c),a(l+".marker.line.color",s.defaultLine),a(l+".marker.line.width")}X.exports={supplyDefaults:function(a,l,c,h){function u(d,m){return A.coerce(a,l,p,d,m)}if(T(a,l,h,u)){b(a,l,h,u),u("xhoverformat"),u("yhoverformat"),u("measure"),u("orientation",l.x&&!l.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var x=u("textposition");o(a,l,h,u,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(u("texttemplate"),l.texttemplate||u("textinfo")),r(u,"increasing",i),r(u,"decreasing",n),r(u,"totals","#4499FF"),u("connector.visible")&&(u("connector.mode"),u("connector.line.width")&&(u("connector.line.color"),u("connector.line.dash"))),u("zorder")}else l.visible=!1},crossTraceDefaults:function(a,l){var c,h;function u(d){return A.coerce(h._input,h,p,d)}if(l.waterfallmode==="group")for(var x=0;x<a.length;x++)c=(h=a[x])._input,k(c,h,l,u)}}},53256:function(X){"use strict";X.exports=function(I,e){return I.x="xVal"in e?e.xVal:e.x,I.y="yVal"in e?e.yVal:e.y,"initial"in e&&(I.initial=e.initial),"delta"in e&&(I.delta=e.delta),"final"in e&&(I.final=e.final),e.xa&&(I.xaxis=e.xa),e.ya&&(I.yaxis=e.ya),I}},94196:function(X,I,e){"use strict";var A=e(54460).hoverLabelText,k=e(76308).opacity,o=e(63400).hoverOnBars,T=e(48164),b=T.INCREASING.SYMBOL,p=T.DECREASING.SYMBOL;X.exports=function(s,t,i,n,r){var a=o(s,t,i,n,r);if(a){var l=a.cd,c=l[0].trace,h=c.orientation==="h",u=h?"x":"y",x=h?s.xa:s.ya,d=l[a.index],m=d.isSum?d.b+d.s:d.rawS;a.initial=d.b+d.s-m,a.delta=m,a.final=a.initial+a.delta;var g=w(Math.abs(a.delta));a.deltaLabel=m<0?"("+g+")":g,a.finalLabel=w(a.final),a.initialLabel=w(a.initial);var y=d.hi||c.hoverinfo,v=[];if(y&&y!=="none"&&y!=="skip"){var _=y==="all",f=y.split("+"),S=function(E){return _||f.indexOf(E)!==-1};d.isSum||(!S("final")||S(h?"x":"y")||v.push(a.finalLabel),S("delta")&&(m<0?v.push(a.deltaLabel+" "+p):v.push(a.deltaLabel+" "+b)),S("initial")&&v.push("Initial: "+a.initialLabel))}return v.length&&(a.extraText=v.join("<br>")),a.color=function(E,P){var C=E[P.dir].marker,O=C.color,R=C.line.color,U=C.line.width;return k(O)?O:k(R)&&U?R:void 0}(c,d),[a]}function w(E){return A(x,E,c[u+"hoverformat"])}}},95952:function(X,I,e){"use strict";X.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(X){"use strict";X.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(X,I,e){"use strict";var A=e(3400),k=e(91352);X.exports=function(o,T,b){var p=!1;function s(n,r){return A.coerce(o,T,k,n,r)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="waterfall"){p=!0;break}}p&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},64488:function(X,I,e){"use strict";var A=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),p=e(82744).clearMinTextSize;X.exports=function(s,t,i,n){var r=s._fullLayout;p("waterfall",r),b.plot(s,t,i,n,{mode:r.waterfallmode,norm:r.waterfallmode,gap:r.waterfallgap,groupgap:r.waterfallgroupgap}),function(a,l,c,h){var u=l.xaxis,x=l.yaxis;k.makeTraceGroups(h,c,"trace bars").each(function(d){var m=A.select(this),g=d[0].trace,y=k.ensureSingle(m,"g","lines");if(g.connector&&g.connector.visible){var v=g.orientation==="h",_=g.connector.mode,f=y.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var P=function(U,D,N,W){var F=[],j=[],q=W?D:N,te=W?N:D;return F[0]=q.c2p(U.s0,!0),j[0]=te.c2p(U.p0,!0),F[1]=q.c2p(U.s1,!0),j[1]=te.c2p(U.p1,!0),F[2]=q.c2p(U.nextS0,!0),j[2]=te.c2p(U.nextP0,!0),W?[F,j]:[j,F]}(w,u,x,v),C=P[0],O=P[1],R="";C[0]!==T&&O[0]!==T&&C[1]!==T&&O[1]!==T&&(_==="spanning"&&!w.isSum&&E>0&&(R+=v?"M"+C[0]+","+O[1]+"V"+O[0]:"M"+C[1]+","+O[0]+"H"+C[0]),_!=="between"&&(w.isSum||E<S-1)&&(R+=v?"M"+C[1]+","+O[0]+"V"+O[1]:"M"+C[0]+","+O[1]+"H"+C[1]),C[2]!==T&&O[2]!==T&&(R+=v?"M"+C[1]+","+O[1]+"V"+O[2]:"M"+C[1]+","+O[1]+"H"+C[2])),R===""&&(R="M0,0Z"),k.ensureSingle(A.select(this),"path").attr("d",R).call(o.setClipUrl,l.layerClipId,a)}})}else y.remove()})}(s,t,i,n)}},12252:function(X,I,e){"use strict";var A=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),p=e(82744).resizeText,s=b.styleTextPoints;X.exports={style:function(t,i,n){var r=n||A.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");p(t,r,"waterfall"),r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var l=A.select(this),c=a[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var u=c[h.dir].marker;A.select(this).call(o.fill,u.color).call(o.stroke,u.line.color).call(k.dashLine,u.line.dash,u.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(l,c,t),l.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(A.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},84224:function(X,I,e){"use strict";var A=e(54460),k=e(3400),o=e(73060),T=e(60468).W,b=e(39032).BADNUM;I.moduleType="transform",I.name="aggregate";var p=I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=p.aggregations;function t(a,l,c,h){if(h.enabled){for(var u=h.target,x=k.nestedProperty(l,u),d=x.get(),m=function(v,_){var f=v.func,S=_.d2c,w=_.c2d;switch(f){case"count":return i;case"first":return n;case"last":return r;case"sum":return function(E,P){for(var C=0,O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&(C+=R)}return w(C)};case"avg":return function(E,P){for(var C=0,O=0,R=0;R<P.length;R++){var U=S(E[P[R]]);U!==b&&(C+=U,O++)}return O?w(C/O):b};case"min":return function(E,P){for(var C=1/0,O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&(C=Math.min(C,R))}return C===1/0?b:w(C)};case"max":return function(E,P){for(var C=-1/0,O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&(C=Math.max(C,R))}return C===-1/0?b:w(C)};case"range":return function(E,P){for(var C=1/0,O=-1/0,R=0;R<P.length;R++){var U=S(E[P[R]]);U!==b&&(C=Math.min(C,U),O=Math.max(O,U))}return O===-1/0||C===1/0?b:w(O-C)};case"change":return function(E,P){var C=S(E[P[0]]),O=S(E[P[P.length-1]]);return C===b||O===b?b:w(O-C)};case"median":return function(E,P){for(var C=[],O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&C.push(R)}if(!C.length)return b;C.sort(k.sorterAsc);var U=(C.length-1)/2;return w((C[Math.floor(U)]+C[Math.ceil(U)])/2)};case"mode":return function(E,P){for(var C={},O=0,R=b,U=0;U<P.length;U++){var D=S(E[P[U]]);if(D!==b){var N=C[D]=(C[D]||0)+1;N>O&&(O=N,R=D)}}return O?w(R):b};case"rms":return function(E,P){for(var C=0,O=0,R=0;R<P.length;R++){var U=S(E[P[R]]);U!==b&&(C+=U*U,O++)}return O?w(Math.sqrt(C/O)):b};case"stddev":return function(E,P){var C,O=0,R=0,U=1,D=b;for(C=0;C<P.length&&D===b;C++)D=S(E[P[C]]);if(D===b)return b;for(;C<P.length;C++){var N=S(E[P[C]]);if(N!==b){var W=N-D;O+=W,R+=W*W,U++}}var F=v.funcmode==="sample"?U-1:U;return F?Math.sqrt((R-O*O/U)/F):0}}}(h,A.getDataConversions(a,l,u,d)),g=new Array(c.length),y=0;y<c.length;y++)g[y]=m(d,c[y]);x.set(g),h.func==="count"&&k.pushUnique(l._arrayAttrs,u)}}function i(a,l){return l.length}function n(a,l){return a[l[0]]}function r(a,l){return a[l[l.length-1]]}I.supplyDefaults=function(a,l){var c,h={};function u(w,E){return k.coerce(a,h,p,w,E)}if(!u("enabled"))return h;var x=o.findArrayAttributes(l),d={};for(c=0;c<x.length;c++)d[x[c]]=1;var m=u("groups");if(!Array.isArray(m)){if(!d[m])return h.enabled=!1,h;d[m]=0}var g,y=a.aggregations||[],v=h.aggregations=new Array(y.length);function _(w,E){return k.coerce(y[c],g,s,w,E)}for(c=0;c<y.length;c++){g={_index:c};var f=_("target"),S=_("func");_("enabled")&&f&&(d[f]||S==="count"&&d[f]===void 0)?(S==="stddev"&&_("funcmode"),d[f]=0,v[c]=g):v[c]={enabled:!1,_index:c}}for(c=0;c<x.length;c++)d[x[c]]&&v.push({target:x[c],func:s.func.dflt,enabled:!0,_index:-1});return h},I.calcTransform=function(a,l,c){if(c.enabled){var h=c.groups,u=k.getTargetArray(l,{target:h});if(u){var x,d,m,g,y={},v={},_=[],f=T(l.transforms,c),S=u.length;for(l._length&&(S=Math.min(S,l._length)),x=0;x<S;x++)(m=y[d=u[x]])===void 0?(y[d]=_.length,g=[x],_.push(g),v[y[d]]=f(x)):(_[m].push(x),v[y[d]]=(v[y[d]]||[]).concat(f(x)));c._indexToPoints=v;var w=c.aggregations;for(x=0;x<w.length;x++)t(a,l,_,w[x]);typeof h=="string"&&t(a,l,_,{target:h,func:"first",enabled:!0}),l._length=_.length}}}},76744:function(X,I,e){"use strict";var A=e(3400),k=e(24040),o=e(54460),T=e(60468).W,b=e(69104),p=b.COMPARISON_OPS,s=b.INTERVAL_OPS,t=b.SET_OPS;I.moduleType="transform",I.name="filter",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(p).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},I.supplyDefaults=function(i){var n={};function r(c,h){return A.coerce(i,n,I.attributes,c,h)}if(r("enabled")){var a=r("target");if(A.isArrayOrTypedArray(a)&&a.length===0)return n.enabled=!1,n;r("preservegaps"),r("operation"),r("value");var l=k.getComponentMethod("calendars","handleDefaults");l(i,n,"valuecalendar",null),l(i,n,"targetcalendar",null)}return n},I.calcTransform=function(i,n,r){if(r.enabled){var a=A.getTargetArray(n,r);if(a){var l=r.target,c=a.length;n._length&&(c=Math.min(c,n._length));var h=r.targetcalendar,u=n._arrayAttrs,x=r.preservegaps;if(typeof l=="string"){var d=A.nestedProperty(n,l+"calendar").get();d&&(h=d)}var m,g,y=function(P,C,O){var R=P.operation,U=P.value,D=A.isArrayOrTypedArray(U);function N(q){return q.indexOf(R)!==-1}var W,F=function(q){return C(q,0,P.valuecalendar)},j=function(q){return C(q,0,O)};switch(N(p)?W=F(D?U[0]:U):N(s)?W=D?[F(U[0]),F(U[1])]:[F(U),F(U)]:N(t)&&(W=D?U.map(F):[F(U)]),R){case"=":return function(q){return j(q)===W};case"!=":return function(q){return j(q)!==W};case"<":return function(q){return j(q)<W};case"<=":return function(q){return j(q)<=W};case">":return function(q){return j(q)>W};case">=":return function(q){return j(q)>=W};case"[]":return function(q){var te=j(q);return te>=W[0]&&te<=W[1]};case"()":return function(q){var te=j(q);return te>W[0]&&te<W[1]};case"[)":return function(q){var te=j(q);return te>=W[0]&&te<W[1]};case"(]":return function(q){var te=j(q);return te>W[0]&&te<=W[1]};case"][":return function(q){var te=j(q);return te<=W[0]||te>=W[1]};case")(":return function(q){var te=j(q);return te<W[0]||te>W[1]};case"](":return function(q){var te=j(q);return te<=W[0]||te>W[1]};case")[":return function(q){var te=j(q);return te<W[0]||te>=W[1]};case"{}":return function(q){return W.indexOf(j(q))!==-1};case"}{":return function(q){return W.indexOf(j(q))===-1}}}(r,o.getDataToCoordFunc(i,n,l,a),h),v={},_={},f=0;x?(m=function(P){v[P.astr]=A.extendDeep([],P.get()),P.set(new Array(c))},g=function(P,C){var O=v[P.astr][C];P.get()[C]=O}):(m=function(P){v[P.astr]=A.extendDeep([],P.get()),P.set([])},g=function(P,C){var O=v[P.astr][C];P.get().push(O)}),E(m);for(var S=T(n.transforms,r),w=0;w<c;w++)y(a[w])?(E(g,w),_[f++]=S(w)):x&&f++;r._indexToPoints=_,n._length=f}}function E(P,C){for(var O=0;O<u.length;O++)P(A.nestedProperty(n,u[O]),C)}}},32028:function(X,I,e){"use strict";var A=e(3400),k=e(73060),o=e(7316),T=e(60468).W;function b(p,s){var t,i,n,r,a,l,c,h,u,x,d=s.transform,m=s.transformIndex,g=p.transforms[m].groups,y=T(p.transforms,d);if(!A.isArrayOrTypedArray(g)||g.length===0)return[p];var v=A.filterUnique(g),_=new Array(v.length),f=g.length,S=k.findArrayAttributes(p),w=d.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;d.styles&&(x=A.keyedContainer(d,"styles","target","value.name"));var P={},C={};for(t=0;t<v.length;t++){P[l=v[t]]=t,C[l]=0,(c=_[t]=A.extendDeepNoArrays({},p))._group=l,c.transforms[m]._indexToPoints={};var O=null;for(x&&(O=x.get(l)),c.name=O||O===""?O:A.templateString(d.nameformat,{trace:p.name,group:l}),h=c.transforms,c.transforms=[],i=0;i<h.length;i++)c.transforms[i]=A.extendDeepNoArrays({},h[i]);for(i=0;i<S.length;i++)A.nestedProperty(c,S[i]).set([])}for(n=0;n<S.length;n++){for(r=S[n],i=0,u=[];i<v.length;i++)u[i]=A.nestedProperty(_[i],r).get();for(a=A.nestedProperty(p,r).get(),i=0;i<f;i++)u[P[g[i]]].push(a[i])}for(i=0;i<f;i++)(c=_[P[g[i]]]).transforms[m]._indexToPoints[C[g[i]]]=y(i),C[g[i]]++;for(t=0;t<v.length;t++)l=v[t],c=_[t],o.clearExpandedTraceDefaultColors(c),c=A.extendDeepNoArrays(c,E[l]||{});return _}I.moduleType="transform",I.name="groupby",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},I.supplyDefaults=function(p,s,t){var i,n={};function r(u,x){return A.coerce(p,n,I.attributes,u,x)}if(!r("enabled"))return n;r("groups"),r("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=p.styles,l=n.styles=[];if(a)for(i=0;i<a.length;i++){var c=l[i]={};A.coerce(a[i],l[i],I.attributes.styles,"target");var h=A.coerce(a[i],l[i],I.attributes.styles,"value");A.isPlainObject(h)?c.value=A.extendDeep({},h):h&&delete c.value}return n},I.transform=function(p,s){var t,i,n,r=[];for(i=0;i<p.length;i++)for(t=b(p[i],s),n=0;n<t.length;n++)r.push(t[n]);return r}},60468:function(X,I){"use strict";I.W=function(e,A){for(var k,o,T=0;T<e.length&&(k=e[T])!==A;T++)k._indexToPoints&&k.enabled!==!1&&(o=k._indexToPoints);var b=o?function(p){return o[p]}:function(p){return[p]};return b}},76272:function(X,I,e){"use strict";var A=e(3400),k=e(54460),o=e(60468).W,T=e(39032).BADNUM;I.moduleType="transform",I.name="sort",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},I.supplyDefaults=function(b){var p={};function s(t,i){return A.coerce(b,p,I.attributes,t,i)}return s("enabled")&&(s("target"),s("order")),p},I.calcTransform=function(b,p,s){if(s.enabled){var t=A.getTargetArray(p,s);if(t){var i=s.target,n=t.length;p._length&&(n=Math.min(n,p._length));var r,a,l=p._arrayAttrs,c=function(g,y,v,_){var f,S=new Array(_),w=new Array(_);for(f=0;f<_;f++)S[f]={v:y[f],i:f};for(S.sort(function(E,P){switch(E.order){case"ascending":return function(C,O){var R=P(C.v),U=P(O.v);return R===T?1:U===T?-1:R-U};case"descending":return function(C,O){var R=P(C.v),U=P(O.v);return R===T?1:U===T?-1:U-R}}}(g,v)),f=0;f<_;f++)w[f]=S[f].i;return w}(s,t,k.getDataToCoordFunc(b,p,i,t),n),h=o(p.transforms,s),u={};for(r=0;r<l.length;r++){var x=A.nestedProperty(p,l[r]),d=x.get(),m=new Array(n);for(a=0;a<n;a++)m[a]=d[c[a]];x.set(m)}for(a=0;a<n;a++)u[a]=h(c[a]);s._indexToPoints=u,p._length=n}}}},25788:function(X,I){"use strict";I.version="2.33.0"},67792:function(X,I,e){var A=e(4168);(function(){var k={1964:function(p,s,t){p.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(p,s,t){"use strict";function i(he,_e){for(var Ae=0;Ae<_e.length;Ae++){var De=_e[Ae];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(he,n(De.key),De)}}function n(he){var _e=function(Ae,De){if(c(Ae)!="object"||!Ae)return Ae;var Le=Ae[Symbol.toPrimitive];if(Le!==void 0){var Be=Le.call(Ae,"string");if(c(Be)!="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ae)}(he);return c(_e)=="symbol"?_e:_e+""}function r(){try{var he=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!he})()}function a(he){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},a(he)}function l(he,_e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ae,De){return Ae.__proto__=De,Ae},l(he,_e)}function c(he){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},c(he)}var h=t(7507),u=t(3778),x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.hp=g,s.IS=50;var d=2147483647;function m(he){if(he>d)throw new RangeError('The value "'+he+'" is invalid for option "size"');var _e=new Uint8Array(he);return Object.setPrototypeOf(_e,g.prototype),_e}function g(he,_e,Ae){if(typeof he=="number"){if(typeof _e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(he)}return y(he,_e,Ae)}function y(he,_e,Ae){if(typeof he=="string")return function(Be,Ve){if(typeof Ve=="string"&&Ve!==""||(Ve="utf8"),!g.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);var Ze=0|E(Be,Ve),rt=m(Ze),it=rt.write(Be,Ve);return it!==Ze&&(rt=rt.slice(0,it)),rt}(he,_e);if(ArrayBuffer.isView(he))return function(Be){if(be(Be,Uint8Array)){var Ve=new Uint8Array(Be);return S(Ve.buffer,Ve.byteOffset,Ve.byteLength)}return f(Be)}(he);if(he==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(he));if(be(he,ArrayBuffer)||he&&be(he.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(he,SharedArrayBuffer)||he&&be(he.buffer,SharedArrayBuffer)))return S(he,_e,Ae);if(typeof he=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var De=he.valueOf&&he.valueOf();if(De!=null&&De!==he)return g.from(De,_e,Ae);var Le=function(Be){if(g.isBuffer(Be)){var Ve=0|w(Be.length),Ze=m(Ve);return Ze.length===0||Be.copy(Ze,0,0,Ve),Ze}return Be.length!==void 0?typeof Be.length!="number"||we(Be.length)?m(0):f(Be):Be.type==="Buffer"&&Array.isArray(Be.data)?f(Be.data):void 0}(he);if(Le)return Le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof he[Symbol.toPrimitive]=="function")return g.from(he[Symbol.toPrimitive]("string"),_e,Ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+c(he))}function v(he){if(typeof he!="number")throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function _(he){return v(he),m(he<0?0:0|w(he))}function f(he){for(var _e=he.length<0?0:0|w(he.length),Ae=m(_e),De=0;De<_e;De+=1)Ae[De]=255&he[De];return Ae}function S(he,_e,Ae){if(_e<0||he.byteLength<_e)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<_e+(Ae||0))throw new RangeError('"length" is outside of buffer bounds');var De;return De=_e===void 0&&Ae===void 0?new Uint8Array(he):Ae===void 0?new Uint8Array(he,_e):new Uint8Array(he,_e,Ae),Object.setPrototypeOf(De,g.prototype),De}function w(he){if(he>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|he}function E(he,_e){if(g.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||be(he,ArrayBuffer))return he.byteLength;if(typeof he!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+c(he));var Ae=he.length,De=arguments.length>2&&arguments[2]===!0;if(!De&&Ae===0)return 0;for(var Le=!1;;)switch(_e){case"ascii":case"latin1":case"binary":return Ae;case"utf8":case"utf-8":return re(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Ae;case"hex":return Ae>>>1;case"base64":return fe(he).length;default:if(Le)return De?-1:re(he).length;_e=(""+_e).toLowerCase(),Le=!0}}function P(he,_e,Ae){var De=!1;if((_e===void 0||_e<0)&&(_e=0),_e>this.length||((Ae===void 0||Ae>this.length)&&(Ae=this.length),Ae<=0)||(Ae>>>=0)<=(_e>>>=0))return"";for(he||(he="utf8");;)switch(he){case"hex":return J(this,_e,Ae);case"utf8":case"utf-8":return q(this,_e,Ae);case"ascii":return ee(this,_e,Ae);case"latin1":case"binary":return Q(this,_e,Ae);case"base64":return j(this,_e,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,_e,Ae);default:if(De)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),De=!0}}function C(he,_e,Ae){var De=he[_e];he[_e]=he[Ae],he[Ae]=De}function O(he,_e,Ae,De,Le){if(he.length===0)return-1;if(typeof Ae=="string"?(De=Ae,Ae=0):Ae>2147483647?Ae=2147483647:Ae<-2147483648&&(Ae=-2147483648),we(Ae=+Ae)&&(Ae=Le?0:he.length-1),Ae<0&&(Ae=he.length+Ae),Ae>=he.length){if(Le)return-1;Ae=he.length-1}else if(Ae<0){if(!Le)return-1;Ae=0}if(typeof _e=="string"&&(_e=g.from(_e,De)),g.isBuffer(_e))return _e.length===0?-1:R(he,_e,Ae,De,Le);if(typeof _e=="number")return _e&=255,typeof Uint8Array.prototype.indexOf=="function"?Le?Uint8Array.prototype.indexOf.call(he,_e,Ae):Uint8Array.prototype.lastIndexOf.call(he,_e,Ae):R(he,[_e],Ae,De,Le);throw new TypeError("val must be string, number or Buffer")}function R(he,_e,Ae,De,Le){var Be,Ve=1,Ze=he.length,rt=_e.length;if(De!==void 0&&((De=String(De).toLowerCase())==="ucs2"||De==="ucs-2"||De==="utf16le"||De==="utf-16le")){if(he.length<2||_e.length<2)return-1;Ve=2,Ze/=2,rt/=2,Ae/=2}function it(Qe,Je){return Ve===1?Qe[Je]:Qe.readUInt16BE(Je*Ve)}if(Le){var dt=-1;for(Be=Ae;Be<Ze;Be++)if(it(he,Be)===it(_e,dt===-1?0:Be-dt)){if(dt===-1&&(dt=Be),Be-dt+1===rt)return dt*Ve}else dt!==-1&&(Be-=Be-dt),dt=-1}else for(Ae+rt>Ze&&(Ae=Ze-rt),Be=Ae;Be>=0;Be--){for(var mt=!0,ht=0;ht<rt;ht++)if(it(he,Be+ht)!==it(_e,ht)){mt=!1;break}if(mt)return Be}return-1}function U(he,_e,Ae,De){Ae=Number(Ae)||0;var Le=he.length-Ae;De?(De=Number(De))>Le&&(De=Le):De=Le;var Be,Ve=_e.length;for(De>Ve/2&&(De=Ve/2),Be=0;Be<De;++Be){var Ze=parseInt(_e.substr(2*Be,2),16);if(we(Ze))return Be;he[Ae+Be]=Ze}return Be}function D(he,_e,Ae,De){return Se(re(_e,he.length-Ae),he,Ae,De)}function N(he,_e,Ae,De){return Se(function(Le){for(var Be=[],Ve=0;Ve<Le.length;++Ve)Be.push(255&Le.charCodeAt(Ve));return Be}(_e),he,Ae,De)}function W(he,_e,Ae,De){return Se(fe(_e),he,Ae,De)}function F(he,_e,Ae,De){return Se(function(Le,Be){for(var Ve,Ze,rt,it=[],dt=0;dt<Le.length&&!((Be-=2)<0);++dt)Ze=(Ve=Le.charCodeAt(dt))>>8,rt=Ve%256,it.push(rt),it.push(Ze);return it}(_e,he.length-Ae),he,Ae,De)}function j(he,_e,Ae){return _e===0&&Ae===he.length?h.fromByteArray(he):h.fromByteArray(he.slice(_e,Ae))}function q(he,_e,Ae){Ae=Math.min(he.length,Ae);for(var De=[],Le=_e;Le<Ae;){var Be=he[Le],Ve=null,Ze=Be>239?4:Be>223?3:Be>191?2:1;if(Le+Ze<=Ae){var rt=void 0,it=void 0,dt=void 0,mt=void 0;switch(Ze){case 1:Be<128&&(Ve=Be);break;case 2:(192&(rt=he[Le+1]))==128&&(mt=(31&Be)<<6|63&rt)>127&&(Ve=mt);break;case 3:rt=he[Le+1],it=he[Le+2],(192&rt)==128&&(192&it)==128&&(mt=(15&Be)<<12|(63&rt)<<6|63&it)>2047&&(mt<55296||mt>57343)&&(Ve=mt);break;case 4:rt=he[Le+1],it=he[Le+2],dt=he[Le+3],(192&rt)==128&&(192&it)==128&&(192&dt)==128&&(mt=(15&Be)<<18|(63&rt)<<12|(63&it)<<6|63&dt)>65535&&mt<1114112&&(Ve=mt)}}Ve===null?(Ve=65533,Ze=1):Ve>65535&&(Ve-=65536,De.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),De.push(Ve),Le+=Ze}return function(ht){var Qe=ht.length;if(Qe<=te)return String.fromCharCode.apply(String,ht);for(var Je="",wt=0;wt<Qe;)Je+=String.fromCharCode.apply(String,ht.slice(wt,wt+=te));return Je}(De)}g.TYPED_ARRAY_SUPPORT=function(){try{var he=new Uint8Array(1),_e={foo:function(){return 42}};return Object.setPrototypeOf(_e,Uint8Array.prototype),Object.setPrototypeOf(he,_e),he.foo()===42}catch{return!1}}(),g.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(he,_e,Ae){return y(he,_e,Ae)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(he,_e,Ae){return function(De,Le,Be){return v(De),De<=0?m(De):Le!==void 0?typeof Be=="string"?m(De).fill(Le,Be):m(De).fill(Le):m(De)}(he,_e,Ae)},g.allocUnsafe=function(he){return _(he)},g.allocUnsafeSlow=function(he){return _(he)},g.isBuffer=function(he){return he!=null&&he._isBuffer===!0&&he!==g.prototype},g.compare=function(he,_e){if(be(he,Uint8Array)&&(he=g.from(he,he.offset,he.byteLength)),be(_e,Uint8Array)&&(_e=g.from(_e,_e.offset,_e.byteLength)),!g.isBuffer(he)||!g.isBuffer(_e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(he===_e)return 0;for(var Ae=he.length,De=_e.length,Le=0,Be=Math.min(Ae,De);Le<Be;++Le)if(he[Le]!==_e[Le]){Ae=he[Le],De=_e[Le];break}return Ae<De?-1:De<Ae?1:0},g.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(he,_e){if(!Array.isArray(he))throw new TypeError('"list" argument must be an Array of Buffers');if(he.length===0)return g.alloc(0);var Ae;if(_e===void 0)for(_e=0,Ae=0;Ae<he.length;++Ae)_e+=he[Ae].length;var De=g.allocUnsafe(_e),Le=0;for(Ae=0;Ae<he.length;++Ae){var Be=he[Ae];if(be(Be,Uint8Array))Le+Be.length>De.length?(g.isBuffer(Be)||(Be=g.from(Be)),Be.copy(De,Le)):Uint8Array.prototype.set.call(De,Be,Le);else{if(!g.isBuffer(Be))throw new TypeError('"list" argument must be an Array of Buffers');Be.copy(De,Le)}Le+=Be.length}return De},g.byteLength=E,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var he=this.length;if(he%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _e=0;_e<he;_e+=2)C(this,_e,_e+1);return this},g.prototype.swap32=function(){var he=this.length;if(he%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _e=0;_e<he;_e+=4)C(this,_e,_e+3),C(this,_e+1,_e+2);return this},g.prototype.swap64=function(){var he=this.length;if(he%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _e=0;_e<he;_e+=8)C(this,_e,_e+7),C(this,_e+1,_e+6),C(this,_e+2,_e+5),C(this,_e+3,_e+4);return this},g.prototype.toString=function(){var he=this.length;return he===0?"":arguments.length===0?q(this,0,he):P.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(he){if(!g.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he||g.compare(this,he)===0},g.prototype.inspect=function(){var he="",_e=s.IS;return he=this.toString("hex",0,_e).replace(/(.{2})/g,"$1 ").trim(),this.length>_e&&(he+=" ... "),"<Buffer "+he+">"},x&&(g.prototype[x]=g.prototype.inspect),g.prototype.compare=function(he,_e,Ae,De,Le){if(be(he,Uint8Array)&&(he=g.from(he,he.offset,he.byteLength)),!g.isBuffer(he))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+c(he));if(_e===void 0&&(_e=0),Ae===void 0&&(Ae=he?he.length:0),De===void 0&&(De=0),Le===void 0&&(Le=this.length),_e<0||Ae>he.length||De<0||Le>this.length)throw new RangeError("out of range index");if(De>=Le&&_e>=Ae)return 0;if(De>=Le)return-1;if(_e>=Ae)return 1;if(this===he)return 0;for(var Be=(Le>>>=0)-(De>>>=0),Ve=(Ae>>>=0)-(_e>>>=0),Ze=Math.min(Be,Ve),rt=this.slice(De,Le),it=he.slice(_e,Ae),dt=0;dt<Ze;++dt)if(rt[dt]!==it[dt]){Be=rt[dt],Ve=it[dt];break}return Be<Ve?-1:Ve<Be?1:0},g.prototype.includes=function(he,_e,Ae){return this.indexOf(he,_e,Ae)!==-1},g.prototype.indexOf=function(he,_e,Ae){return O(this,he,_e,Ae,!0)},g.prototype.lastIndexOf=function(he,_e,Ae){return O(this,he,_e,Ae,!1)},g.prototype.write=function(he,_e,Ae,De){if(_e===void 0)De="utf8",Ae=this.length,_e=0;else if(Ae===void 0&&typeof _e=="string")De=_e,Ae=this.length,_e=0;else{if(!isFinite(_e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");_e>>>=0,isFinite(Ae)?(Ae>>>=0,De===void 0&&(De="utf8")):(De=Ae,Ae=void 0)}var Le=this.length-_e;if((Ae===void 0||Ae>Le)&&(Ae=Le),he.length>0&&(Ae<0||_e<0)||_e>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");for(var Be=!1;;)switch(De){case"hex":return U(this,he,_e,Ae);case"utf8":case"utf-8":return D(this,he,_e,Ae);case"ascii":case"latin1":case"binary":return N(this,he,_e,Ae);case"base64":return W(this,he,_e,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,he,_e,Ae);default:if(Be)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Be=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;function ee(he,_e,Ae){var De="";Ae=Math.min(he.length,Ae);for(var Le=_e;Le<Ae;++Le)De+=String.fromCharCode(127&he[Le]);return De}function Q(he,_e,Ae){var De="";Ae=Math.min(he.length,Ae);for(var Le=_e;Le<Ae;++Le)De+=String.fromCharCode(he[Le]);return De}function J(he,_e,Ae){var De=he.length;(!_e||_e<0)&&(_e=0),(!Ae||Ae<0||Ae>De)&&(Ae=De);for(var Le="",Be=_e;Be<Ae;++Be)Le+=Me[he[Be]];return Le}function K(he,_e,Ae){for(var De=he.slice(_e,Ae),Le="",Be=0;Be<De.length-1;Be+=2)Le+=String.fromCharCode(De[Be]+256*De[Be+1]);return Le}function Y(he,_e,Ae){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+_e>Ae)throw new RangeError("Trying to access beyond buffer length")}function ie(he,_e,Ae,De,Le,Be){if(!g.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(_e>Le||_e<Be)throw new RangeError('"value" argument is out of bounds');if(Ae+De>he.length)throw new RangeError("Index out of range")}function se(he,_e,Ae,De,Le){ke(_e,De,Le,he,Ae,7);var Be=Number(_e&BigInt(4294967295));he[Ae++]=Be,Be>>=8,he[Ae++]=Be,Be>>=8,he[Ae++]=Be,Be>>=8,he[Ae++]=Be;var Ve=Number(_e>>BigInt(32)&BigInt(4294967295));return he[Ae++]=Ve,Ve>>=8,he[Ae++]=Ve,Ve>>=8,he[Ae++]=Ve,Ve>>=8,he[Ae++]=Ve,Ae}function ae(he,_e,Ae,De,Le){ke(_e,De,Le,he,Ae,7);var Be=Number(_e&BigInt(4294967295));he[Ae+7]=Be,Be>>=8,he[Ae+6]=Be,Be>>=8,he[Ae+5]=Be,Be>>=8,he[Ae+4]=Be;var Ve=Number(_e>>BigInt(32)&BigInt(4294967295));return he[Ae+3]=Ve,Ve>>=8,he[Ae+2]=Ve,Ve>>=8,he[Ae+1]=Ve,Ve>>=8,he[Ae]=Ve,Ae+8}function ue(he,_e,Ae,De,Le,Be){if(Ae+De>he.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("Index out of range")}function ve(he,_e,Ae,De,Le){return _e=+_e,Ae>>>=0,Le||ue(he,0,Ae,4),u.write(he,_e,Ae,De,23,4),Ae+4}function ye(he,_e,Ae,De,Le){return _e=+_e,Ae>>>=0,Le||ue(he,0,Ae,8),u.write(he,_e,Ae,De,52,8),Ae+8}g.prototype.slice=function(he,_e){var Ae=this.length;(he=~~he)<0?(he+=Ae)<0&&(he=0):he>Ae&&(he=Ae),(_e=_e===void 0?Ae:~~_e)<0?(_e+=Ae)<0&&(_e=0):_e>Ae&&(_e=Ae),_e<he&&(_e=he);var De=this.subarray(he,_e);return Object.setPrototypeOf(De,g.prototype),De},g.prototype.readUintLE=g.prototype.readUIntLE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||Y(he,_e,this.length);for(var De=this[he],Le=1,Be=0;++Be<_e&&(Le*=256);)De+=this[he+Be]*Le;return De},g.prototype.readUintBE=g.prototype.readUIntBE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||Y(he,_e,this.length);for(var De=this[he+--_e],Le=1;_e>0&&(Le*=256);)De+=this[he+--_e]*Le;return De},g.prototype.readUint8=g.prototype.readUInt8=function(he,_e){return he>>>=0,_e||Y(he,1,this.length),this[he]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(he,_e){return he>>>=0,_e||Y(he,2,this.length),this[he]|this[he+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(he,_e){return he>>>=0,_e||Y(he,2,this.length),this[he]<<8|this[he+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(he,_e){return he>>>=0,_e||Y(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+16777216*this[he+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(he,_e){return he>>>=0,_e||Y(he,4,this.length),16777216*this[he]+(this[he+1]<<16|this[he+2]<<8|this[he+3])},g.prototype.readBigUInt64LE=Ie(function(he){Ee(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||me(he,this.length-8);var De=_e+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24),Le=this[++he]+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+Ae*Math.pow(2,24);return BigInt(De)+(BigInt(Le)<<BigInt(32))}),g.prototype.readBigUInt64BE=Ie(function(he){Ee(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||me(he,this.length-8);var De=_e*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he],Le=this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+Ae;return(BigInt(De)<<BigInt(32))+BigInt(Le)}),g.prototype.readIntLE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||Y(he,_e,this.length);for(var De=this[he],Le=1,Be=0;++Be<_e&&(Le*=256);)De+=this[he+Be]*Le;return De>=(Le*=128)&&(De-=Math.pow(2,8*_e)),De},g.prototype.readIntBE=function(he,_e,Ae){he>>>=0,_e>>>=0,Ae||Y(he,_e,this.length);for(var De=_e,Le=1,Be=this[he+--De];De>0&&(Le*=256);)Be+=this[he+--De]*Le;return Be>=(Le*=128)&&(Be-=Math.pow(2,8*_e)),Be},g.prototype.readInt8=function(he,_e){return he>>>=0,_e||Y(he,1,this.length),128&this[he]?-1*(255-this[he]+1):this[he]},g.prototype.readInt16LE=function(he,_e){he>>>=0,_e||Y(he,2,this.length);var Ae=this[he]|this[he+1]<<8;return 32768&Ae?4294901760|Ae:Ae},g.prototype.readInt16BE=function(he,_e){he>>>=0,_e||Y(he,2,this.length);var Ae=this[he+1]|this[he]<<8;return 32768&Ae?4294901760|Ae:Ae},g.prototype.readInt32LE=function(he,_e){return he>>>=0,_e||Y(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},g.prototype.readInt32BE=function(he,_e){return he>>>=0,_e||Y(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},g.prototype.readBigInt64LE=Ie(function(he){Ee(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||me(he,this.length-8);var De=this[he+4]+this[he+5]*Math.pow(2,8)+this[he+6]*Math.pow(2,16)+(Ae<<24);return(BigInt(De)<<BigInt(32))+BigInt(_e+this[++he]*Math.pow(2,8)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,24))}),g.prototype.readBigInt64BE=Ie(function(he){Ee(he>>>=0,"offset");var _e=this[he],Ae=this[he+7];_e!==void 0&&Ae!==void 0||me(he,this.length-8);var De=(_e<<24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+this[++he];return(BigInt(De)<<BigInt(32))+BigInt(this[++he]*Math.pow(2,24)+this[++he]*Math.pow(2,16)+this[++he]*Math.pow(2,8)+Ae)}),g.prototype.readFloatLE=function(he,_e){return he>>>=0,_e||Y(he,4,this.length),u.read(this,he,!0,23,4)},g.prototype.readFloatBE=function(he,_e){return he>>>=0,_e||Y(he,4,this.length),u.read(this,he,!1,23,4)},g.prototype.readDoubleLE=function(he,_e){return he>>>=0,_e||Y(he,8,this.length),u.read(this,he,!0,52,8)},g.prototype.readDoubleBE=function(he,_e){return he>>>=0,_e||Y(he,8,this.length),u.read(this,he,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(he,_e,Ae,De){he=+he,_e>>>=0,Ae>>>=0,De||ie(this,he,_e,Ae,Math.pow(2,8*Ae)-1,0);var Le=1,Be=0;for(this[_e]=255&he;++Be<Ae&&(Le*=256);)this[_e+Be]=he/Le&255;return _e+Ae},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(he,_e,Ae,De){he=+he,_e>>>=0,Ae>>>=0,De||ie(this,he,_e,Ae,Math.pow(2,8*Ae)-1,0);var Le=Ae-1,Be=1;for(this[_e+Le]=255&he;--Le>=0&&(Be*=256);)this[_e+Le]=he/Be&255;return _e+Ae},g.prototype.writeUint8=g.prototype.writeUInt8=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,1,255,0),this[_e]=255&he,_e+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,65535,0),this[_e]=255&he,this[_e+1]=he>>>8,_e+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,65535,0),this[_e]=he>>>8,this[_e+1]=255&he,_e+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,4294967295,0),this[_e+3]=he>>>24,this[_e+2]=he>>>16,this[_e+1]=he>>>8,this[_e]=255&he,_e+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,4294967295,0),this[_e]=he>>>24,this[_e+1]=he>>>16,this[_e+2]=he>>>8,this[_e+3]=255&he,_e+4},g.prototype.writeBigUInt64LE=Ie(function(he){return se(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=Ie(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(he,_e,Ae,De){if(he=+he,_e>>>=0,!De){var Le=Math.pow(2,8*Ae-1);ie(this,he,_e,Ae,Le-1,-Le)}var Be=0,Ve=1,Ze=0;for(this[_e]=255&he;++Be<Ae&&(Ve*=256);)he<0&&Ze===0&&this[_e+Be-1]!==0&&(Ze=1),this[_e+Be]=(he/Ve>>0)-Ze&255;return _e+Ae},g.prototype.writeIntBE=function(he,_e,Ae,De){if(he=+he,_e>>>=0,!De){var Le=Math.pow(2,8*Ae-1);ie(this,he,_e,Ae,Le-1,-Le)}var Be=Ae-1,Ve=1,Ze=0;for(this[_e+Be]=255&he;--Be>=0&&(Ve*=256);)he<0&&Ze===0&&this[_e+Be+1]!==0&&(Ze=1),this[_e+Be]=(he/Ve>>0)-Ze&255;return _e+Ae},g.prototype.writeInt8=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,1,127,-128),he<0&&(he=255+he+1),this[_e]=255&he,_e+1},g.prototype.writeInt16LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,32767,-32768),this[_e]=255&he,this[_e+1]=he>>>8,_e+2},g.prototype.writeInt16BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,2,32767,-32768),this[_e]=he>>>8,this[_e+1]=255&he,_e+2},g.prototype.writeInt32LE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,2147483647,-2147483648),this[_e]=255&he,this[_e+1]=he>>>8,this[_e+2]=he>>>16,this[_e+3]=he>>>24,_e+4},g.prototype.writeInt32BE=function(he,_e,Ae){return he=+he,_e>>>=0,Ae||ie(this,he,_e,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),this[_e]=he>>>24,this[_e+1]=he>>>16,this[_e+2]=he>>>8,this[_e+3]=255&he,_e+4},g.prototype.writeBigInt64LE=Ie(function(he){return se(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=Ie(function(he){return ae(this,he,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeFloatLE=function(he,_e,Ae){return ve(this,he,_e,!0,Ae)},g.prototype.writeFloatBE=function(he,_e,Ae){return ve(this,he,_e,!1,Ae)},g.prototype.writeDoubleLE=function(he,_e,Ae){return ye(this,he,_e,!0,Ae)},g.prototype.writeDoubleBE=function(he,_e,Ae){return ye(this,he,_e,!1,Ae)},g.prototype.copy=function(he,_e,Ae,De){if(!g.isBuffer(he))throw new TypeError("argument should be a Buffer");if(Ae||(Ae=0),De||De===0||(De=this.length),_e>=he.length&&(_e=he.length),_e||(_e=0),De>0&&De<Ae&&(De=Ae),De===Ae||he.length===0||this.length===0)return 0;if(_e<0)throw new RangeError("targetStart out of bounds");if(Ae<0||Ae>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),he.length-_e<De-Ae&&(De=he.length-_e+Ae);var Le=De-Ae;return this===he&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_e,Ae,De):Uint8Array.prototype.set.call(he,this.subarray(Ae,De),_e),Le},g.prototype.fill=function(he,_e,Ae,De){if(typeof he=="string"){if(typeof _e=="string"?(De=_e,_e=0,Ae=this.length):typeof Ae=="string"&&(De=Ae,Ae=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!g.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(he.length===1){var Le=he.charCodeAt(0);(De==="utf8"&&Le<128||De==="latin1")&&(he=Le)}}else typeof he=="number"?he&=255:typeof he=="boolean"&&(he=Number(he));if(_e<0||this.length<_e||this.length<Ae)throw new RangeError("Out of range index");if(Ae<=_e)return this;var Be;if(_e>>>=0,Ae=Ae===void 0?this.length:Ae>>>0,he||(he=0),typeof he=="number")for(Be=_e;Be<Ae;++Be)this[Be]=he;else{var Ve=g.isBuffer(he)?he:g.from(he,De),Ze=Ve.length;if(Ze===0)throw new TypeError('The value "'+he+'" is invalid for argument "value"');for(Be=0;Be<Ae-_e;++Be)this[Be+_e]=Ve[Be%Ze]}return this};var de={};function pe(he,_e,Ae){de[he]=function(De){function Le(){var Ze,rt,it,dt;return function(mt,ht){if(!(mt instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,Le),rt=this,it=a(it=Le),Ze=function(mt,ht){if(ht&&(c(ht)==="object"||typeof ht=="function"))return ht;if(ht!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qe){if(Qe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qe}(mt)}(rt,r()?Reflect.construct(it,dt||[],a(rt).constructor):it.apply(rt,dt)),Object.defineProperty(Ze,"message",{value:_e.apply(Ze,arguments),writable:!0,configurable:!0}),Ze.name="".concat(Ze.name," [").concat(he,"]"),Ze.stack,delete Ze.name,Ze}return function(Ze,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");Ze.prototype=Object.create(rt&&rt.prototype,{constructor:{value:Ze,writable:!0,configurable:!0}}),Object.defineProperty(Ze,"prototype",{writable:!1}),rt&&l(Ze,rt)}(Le,De),Be=Le,(Ve=[{key:"code",get:function(){return he},set:function(Ze){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ze,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(he,"]: ").concat(this.message)}}])&&i(Be.prototype,Ve),Object.defineProperty(Be,"prototype",{writable:!1}),Be;var Be,Ve}(Ae)}function ge(he){for(var _e="",Ae=he.length,De=he[0]==="-"?1:0;Ae>=De+4;Ae-=3)_e="_".concat(he.slice(Ae-3,Ae)).concat(_e);return"".concat(he.slice(0,Ae)).concat(_e)}function ke(he,_e,Ae,De,Le,Be){if(he>Ae||he<_e){var Ve,Ze=typeof _e=="bigint"?"n":"";throw Ve=Be>3?_e===0||_e===BigInt(0)?">= 0".concat(Ze," and < 2").concat(Ze," ** ").concat(8*(Be+1)).concat(Ze):">= -(2".concat(Ze," ** ").concat(8*(Be+1)-1).concat(Ze,") and < 2 ** ")+"".concat(8*(Be+1)-1).concat(Ze):">= ".concat(_e).concat(Ze," and <= ").concat(Ae).concat(Ze),new de.ERR_OUT_OF_RANGE("value",Ve,he)}(function(rt,it,dt){Ee(it,"offset"),rt[it]!==void 0&&rt[it+dt]!==void 0||me(it,rt.length-(dt+1))})(De,Le,Be)}function Ee(he,_e){if(typeof he!="number")throw new de.ERR_INVALID_ARG_TYPE(_e,"number",he)}function me(he,_e,Ae){throw Math.floor(he)!==he?(Ee(he,Ae),new de.ERR_OUT_OF_RANGE(Ae||"offset","an integer",he)):_e<0?new de.ERR_BUFFER_OUT_OF_BOUNDS:new de.ERR_OUT_OF_RANGE(Ae||"offset",">= ".concat(Ae?1:0," and <= ").concat(_e),he)}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(he){return he?"".concat(he," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(he,_e){return'The "'.concat(he,'" argument must be of type number. Received type ').concat(c(_e))},TypeError),pe("ERR_OUT_OF_RANGE",function(he,_e,Ae){var De='The value of "'.concat(he,'" is out of range.'),Le=Ae;return Number.isInteger(Ae)&&Math.abs(Ae)>Math.pow(2,32)?Le=ge(String(Ae)):typeof Ae=="bigint"&&(Le=String(Ae),(Ae>Math.pow(BigInt(2),BigInt(32))||Ae<-Math.pow(BigInt(2),BigInt(32)))&&(Le=ge(Le)),Le+="n"),De+" It must be ".concat(_e,". Received ").concat(Le)},RangeError);var oe=/[^+/0-9A-Za-z-_]/g;function re(he,_e){var Ae;_e=_e||1/0;for(var De=he.length,Le=null,Be=[],Ve=0;Ve<De;++Ve){if((Ae=he.charCodeAt(Ve))>55295&&Ae<57344){if(!Le){if(Ae>56319){(_e-=3)>-1&&Be.push(239,191,189);continue}if(Ve+1===De){(_e-=3)>-1&&Be.push(239,191,189);continue}Le=Ae;continue}if(Ae<56320){(_e-=3)>-1&&Be.push(239,191,189),Le=Ae;continue}Ae=65536+(Le-55296<<10|Ae-56320)}else Le&&(_e-=3)>-1&&Be.push(239,191,189);if(Le=null,Ae<128){if((_e-=1)<0)break;Be.push(Ae)}else if(Ae<2048){if((_e-=2)<0)break;Be.push(Ae>>6|192,63&Ae|128)}else if(Ae<65536){if((_e-=3)<0)break;Be.push(Ae>>12|224,Ae>>6&63|128,63&Ae|128)}else{if(!(Ae<1114112))throw new Error("Invalid code point");if((_e-=4)<0)break;Be.push(Ae>>18|240,Ae>>12&63|128,Ae>>6&63|128,63&Ae|128)}}return Be}function fe(he){return h.toByteArray(function(_e){if((_e=(_e=_e.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;_e.length%4!=0;)_e+="=";return _e}(he))}function Se(he,_e,Ae,De){var Le;for(Le=0;Le<De&&!(Le+Ae>=_e.length||Le>=he.length);++Le)_e[Le+Ae]=he[Le];return Le}function be(he,_e){return he instanceof _e||he!=null&&he.constructor!=null&&he.constructor.name!=null&&he.constructor.name===_e.name}function we(he){return he!=he}var Me=function(){for(var he="0123456789abcdef",_e=new Array(256),Ae=0;Ae<16;++Ae)for(var De=16*Ae,Le=0;Le<16;++Le)_e[De+Le]=he[Ae]+he[Le];return _e}();function Ie(he){return typeof BigInt>"u"?Oe:he}function Oe(){throw new Error("BigInt not supported")}},9216:function(p){"use strict";p.exports=n,p.exports.isMobile=n,p.exports.default=n;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function n(r){r||(r={});var a=r.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var l=s.test(a)&&!t.test(a)||!!r.tablet&&i.test(a);return!l&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(l=!0),l}},6296:function(p,s,t){"use strict";p.exports=function(c){var h=(c=c||{}).eye||[0,0,1],u=c.center||[0,0,0],x=c.up||[0,1,0],d=c.distanceLimits||[0,1/0],m=c.mode||"turntable",g=i(),y=n(),v=r();return g.setDistanceLimits(d[0],d[1]),g.lookAt(0,h,u,x),y.setDistanceLimits(d[0],d[1]),y.lookAt(0,h,u,x),v.setDistanceLimits(d[0],d[1]),v.lookAt(0,h,u,x),new a({turntable:g,orbit:y,matrix:v},m)};var i=t(7261),n=t(9977),r=t(4192);function a(c,h){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(u){return c[u]}),this._mode=h,this._active=c[h],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=a.prototype;l.flush=function(c){for(var h=this._controllerList,u=0;u<h.length;++u)h[u].flush(c)},l.idle=function(c){for(var h=this._controllerList,u=0;u<h.length;++u)h[u].idle(c)},l.lookAt=function(c,h,u,x){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].lookAt(c,h,u,x)},l.rotate=function(c,h,u,x){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].rotate(c,h,u,x)},l.pan=function(c,h,u,x){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].pan(c,h,u,x)},l.translate=function(c,h,u,x){for(var d=this._controllerList,m=0;m<d.length;++m)d[m].translate(c,h,u,x)},l.setMatrix=function(c,h){for(var u=this._controllerList,x=0;x<u.length;++x)u[x].setMatrix(c,h)},l.setDistanceLimits=function(c,h){for(var u=this._controllerList,x=0;x<u.length;++x)u[x].setDistanceLimits(c,h)},l.setDistance=function(c,h){for(var u=this._controllerList,x=0;x<u.length;++x)u[x].setDistance(c,h)},l.recalcMatrix=function(c){this._active.recalcMatrix(c)},l.getDistance=function(c){return this._active.getDistance(c)},l.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},l.lastT=function(){return this._active.lastT()},l.setMode=function(c){if(c!==this._mode){var h=this._controllerNames.indexOf(c);if(!(h<0)){var u=this._active,x=this._controllerList[h],d=Math.max(u.lastT(),x.lastT());u.recalcMatrix(d),x.setMatrix(d,u.computedMatrix),this._active=x,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},7169:function(p,s,t){"use strict";var i=typeof WeakMap>"u"?t(1538):WeakMap,n=t(2762),r=t(8116),a=new i;p.exports=function(l){var c=a.get(l),h=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!h||!l.isBuffer(h)){var u=n(l,new Float32Array([-1,-1,-1,4,4,-1]));(c=r(l,[{buffer:u,type:l.FLOAT,size:2}]))._triangleBuffer=u,a.set(l,c)}c.bind(),l.drawArrays(l.TRIANGLES,0,3),c.unbind()}},1085:function(p,s,t){var i=t(1371);p.exports=function(n,r,a){r=typeof r=="number"?r:1,a=a||": ";var l=n.split(/\r?\n/),c=String(l.length+r-1).length;return l.map(function(h,u){var x=u+r,d=String(x).length;return i(x,c-d)+a+h}).join(`
`)}},3952:function(p,s,t){"use strict";p.exports=function(r){var a=r.length;if(a===0)return[];if(a===1)return[0];for(var l=r[0].length,c=[r[0]],h=[0],u=1;u<a;++u)if(c.push(r[u]),n(c,l)){if(h.push(u),h.length===l+1)return h}else c.pop();return h};var i=t(3250);function n(r,a){for(var l=new Array(a+1),c=0;c<r.length;++c)l[c]=r[c];for(c=0;c<=r.length;++c){for(var h=r.length;h<=a;++h){for(var u=new Array(a),x=0;x<a;++x)u[x]=Math.pow(h+1-c,x);l[h]=u}if(i.apply(void 0,l))return!0}return!1}},5995:function(p,s,t){"use strict";p.exports=function(r,a){return i(a).filter(function(l){for(var c=new Array(l.length),h=0;h<l.length;++h)c[h]=a[l[h]];return n(c)*r<1})};var i=t(7642),n=t(6037)},3502:function(p,s,t){p.exports=function(r,a){return n(i(r,a))};var i=t(5995),n=t(9127)},6468:function(p){p.exports=function(s){return atob(s)}},2642:function(p,s,t){"use strict";p.exports=function(r,a){for(var l=a.length,c=new Array(l+1),h=0;h<l;++h){for(var u=new Array(l+1),x=0;x<=l;++x)u[x]=r[x][h];c[h]=u}for(c[l]=new Array(l+1),h=0;h<=l;++h)c[l][h]=1;var d=new Array(l+1);for(h=0;h<l;++h)d[h]=a[h];d[l]=1;var m=i(c,d),g=n(m[l+1]);g===0&&(g=1);var y=new Array(l+1);for(h=0;h<=l;++h)y[h]=n(m[h])/g;return y};var i=t(727);function n(r){for(var a=0,l=0;l<r.length;++l)a+=r[l];return a}},7507:function(p,s){"use strict";s.byteLength=function(h){var u=l(h),x=u[0],d=u[1];return 3*(x+d)/4-d},s.toByteArray=function(h){var u,x,d=l(h),m=d[0],g=d[1],y=new n(function(f,S,w){return 3*(S+w)/4-w}(0,m,g)),v=0,_=g>0?m-4:m;for(x=0;x<_;x+=4)u=i[h.charCodeAt(x)]<<18|i[h.charCodeAt(x+1)]<<12|i[h.charCodeAt(x+2)]<<6|i[h.charCodeAt(x+3)],y[v++]=u>>16&255,y[v++]=u>>8&255,y[v++]=255&u;return g===2&&(u=i[h.charCodeAt(x)]<<2|i[h.charCodeAt(x+1)]>>4,y[v++]=255&u),g===1&&(u=i[h.charCodeAt(x)]<<10|i[h.charCodeAt(x+1)]<<4|i[h.charCodeAt(x+2)]>>2,y[v++]=u>>8&255,y[v++]=255&u),y},s.fromByteArray=function(h){for(var u,x=h.length,d=x%3,m=[],g=16383,y=0,v=x-d;y<v;y+=g)m.push(c(h,y,y+g>v?v:y+g));return d===1?(u=h[x-1],m.push(t[u>>2]+t[u<<4&63]+"==")):d===2&&(u=(h[x-2]<<8)+h[x-1],m.push(t[u>>10]+t[u>>4&63]+t[u<<2&63]+"=")),m.join("")};for(var t=[],i=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=r[a],i[r.charCodeAt(a)]=a;function l(h){var u=h.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=h.indexOf("=");return x===-1&&(x=u),[x,x===u?0:4-x%4]}function c(h,u,x){for(var d,m,g=[],y=u;y<x;y+=3)d=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(255&h[y+2]),g.push(t[(m=d)>>18&63]+t[m>>12&63]+t[m>>6&63]+t[63&m]);return g.join("")}i[45]=62,i[95]=63},3865:function(p,s,t){"use strict";var i=t(869);p.exports=function(n,r){return i(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},1318:function(p){"use strict";p.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},8697:function(p,s,t){"use strict";var i=t(869);p.exports=function(n,r){return i(n[0].mul(r[1]),n[1].mul(r[0]))}},7842:function(p,s,t){"use strict";var i=t(6330),n=t(1533),r=t(2651),a=t(4387),l=t(869),c=t(8697);p.exports=function h(u,x){if(i(u))return x?c(u,h(x)):[u[0].clone(),u[1].clone()];var d,m,g=0;if(n(u))d=u.clone();else if(typeof u=="string")d=a(u);else{if(u===0)return[r(0),r(1)];if(u===Math.floor(u))d=r(u);else{for(;u!==Math.floor(u);)u*=Math.pow(2,256),g-=256;d=r(u)}}if(i(x))d.mul(x[1]),m=x[0].clone();else if(n(x))m=x.clone();else if(typeof x=="string")m=a(x);else if(x)if(x===Math.floor(x))m=r(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),g+=256;m=r(x)}else m=r(1);return g>0?d=d.ushln(g):g<0&&(m=m.ushln(-g)),l(d,m)}},6330:function(p,s,t){"use strict";var i=t(1533);p.exports=function(n){return Array.isArray(n)&&n.length===2&&i(n[0])&&i(n[1])}},5716:function(p,s,t){"use strict";var i=t(6859);p.exports=function(n){return n.cmp(new i(0))}},1369:function(p,s,t){"use strict";var i=t(5716);p.exports=function(n){var r=n.length,a=n.words,l=0;if(r===1)l=a[0];else if(r===2)l=a[0]+67108864*a[1];else for(var c=0;c<r;c++)l+=a[c]*Math.pow(67108864,c);return i(n)*l}},4025:function(p,s,t){"use strict";var i=t(2361),n=t(8828).countTrailingZeros;p.exports=function(r){var a=n(i.lo(r));if(a<32)return a;var l=n(i.hi(r));return l>20?52:l+32}},1533:function(p,s,t){"use strict";t(6859),p.exports=function(i){return i&&typeof i=="object"&&!!i.words}},2651:function(p,s,t){"use strict";var i=t(6859),n=t(2361);p.exports=function(r){var a=n.exponent(r);return a<52?new i(r):new i(r*Math.pow(2,52-a)).ushln(a-52)}},869:function(p,s,t){"use strict";var i=t(2651),n=t(5716);p.exports=function(r,a){var l=n(r),c=n(a);if(l===0)return[i(0),i(1)];if(c===0)return[i(0),i(0)];c<0&&(r=r.neg(),a=a.neg());var h=r.gcd(a);return h.cmpn(1)?[r.div(h),a.div(h)]:[r,a]}},4387:function(p,s,t){"use strict";var i=t(6859);p.exports=function(n){return new i(n)}},6504:function(p,s,t){"use strict";var i=t(869);p.exports=function(n,r){return i(n[0].mul(r[0]),n[1].mul(r[1]))}},7721:function(p,s,t){"use strict";var i=t(5716);p.exports=function(n){return i(n[0])*i(n[1])}},5572:function(p,s,t){"use strict";var i=t(869);p.exports=function(n,r){return i(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},946:function(p,s,t){"use strict";var i=t(1369),n=t(4025);p.exports=function(r){var a=r[0],l=r[1];if(a.cmpn(0)===0)return 0;var c=a.abs().divmod(l.abs()),h=c.div,u=i(h),x=c.mod,d=a.negative!==l.negative?-1:1;if(x.cmpn(0)===0)return d*u;if(u){var m=n(u)+4;return d*(u+(y=i(x.ushln(m).divRound(l)))*Math.pow(2,-m))}var g=l.bitLength()-x.bitLength()+53,y=i(x.ushln(g).divRound(l));return g<1023?d*y*Math.pow(2,-g):d*(y*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},2478:function(p){"use strict";function s(l,c,h,u,x){for(var d=x+1;u<=x;){var m=u+x>>>1,g=l[m];(h!==void 0?h(g,c):g-c)>=0?(d=m,x=m-1):u=m+1}return d}function t(l,c,h,u,x){for(var d=x+1;u<=x;){var m=u+x>>>1,g=l[m];(h!==void 0?h(g,c):g-c)>0?(d=m,x=m-1):u=m+1}return d}function i(l,c,h,u,x){for(var d=u-1;u<=x;){var m=u+x>>>1,g=l[m];(h!==void 0?h(g,c):g-c)<0?(d=m,u=m+1):x=m-1}return d}function n(l,c,h,u,x){for(var d=u-1;u<=x;){var m=u+x>>>1,g=l[m];(h!==void 0?h(g,c):g-c)<=0?(d=m,u=m+1):x=m-1}return d}function r(l,c,h,u,x){for(;u<=x;){var d=u+x>>>1,m=l[d],g=h!==void 0?h(m,c):m-c;if(g===0)return d;g<=0?u=d+1:x=d-1}return-1}function a(l,c,h,u,x,d){return typeof h=="function"?d(l,c,h,u===void 0?0:0|u,x===void 0?l.length-1:0|x):d(l,c,void 0,h===void 0?0:0|h,u===void 0?l.length-1:0|u)}p.exports={ge:function(l,c,h,u,x){return a(l,c,h,u,x,s)},gt:function(l,c,h,u,x){return a(l,c,h,u,x,t)},lt:function(l,c,h,u,x){return a(l,c,h,u,x,i)},le:function(l,c,h,u,x){return a(l,c,h,u,x,n)},eq:function(l,c,h,u,x){return a(l,c,h,u,x,r)}}},8828:function(p,s){"use strict";function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,a;return r=(n>65535)<<4,r|=a=((n>>>=r)>255)<<3,r|=a=((n>>>=a)>15)<<2,(r|=a=((n>>>=a)>3)<<1)|(n>>>=a)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var a=r,l=r,c=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--c;n[r]=l<<c&255}})(i),s.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,a){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},6859:function(p,s,t){(function(i,n){"use strict";function r(D,N){if(!D)throw new Error(N||"Assertion failed")}function a(D,N){D.super_=N;var W=function(){};W.prototype=N.prototype,D.prototype=new W,D.prototype.constructor=D}function l(D,N,W){if(l.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&(N!=="le"&&N!=="be"||(W=N,N=10),this._init(D||0,N||10,W||"be"))}var c;typeof i=="object"?i.exports=l:n.BN=l,l.BN=l,l.wordSize=26;try{c=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(7790).Buffer}catch{}function h(D,N){var W=D.charCodeAt(N);return W>=65&&W<=70?W-55:W>=97&&W<=102?W-87:W-48&15}function u(D,N,W){var F=h(D,W);return W-1>=N&&(F|=h(D,W-1)<<4),F}function x(D,N,W,F){for(var j=0,q=Math.min(D.length,W),te=N;te<q;te++){var ee=D.charCodeAt(te)-48;j*=F,j+=ee>=49?ee-49+10:ee>=17?ee-17+10:ee}return j}l.isBN=function(D){return D instanceof l||D!==null&&typeof D=="object"&&D.constructor.wordSize===l.wordSize&&Array.isArray(D.words)},l.max=function(D,N){return D.cmp(N)>0?D:N},l.min=function(D,N){return D.cmp(N)<0?D:N},l.prototype._init=function(D,N,W){if(typeof D=="number")return this._initNumber(D,N,W);if(typeof D=="object")return this._initArray(D,N,W);N==="hex"&&(N=16),r(N===(0|N)&&N>=2&&N<=36);var F=0;(D=D.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<D.length&&(N===16?this._parseHex(D,F,W):(this._parseBase(D,N,F),W==="le"&&this._initArray(this.toArray(),N,W)))},l.prototype._initNumber=function(D,N,W){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(r(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),W==="le"&&this._initArray(this.toArray(),N,W)},l.prototype._initArray=function(D,N,W){if(r(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var j,q,te=0;if(W==="be")for(F=D.length-1,j=0;F>=0;F-=3)q=D[F]|D[F-1]<<8|D[F-2]<<16,this.words[j]|=q<<te&67108863,this.words[j+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,j++);else if(W==="le")for(F=0,j=0;F<D.length;F+=3)q=D[F]|D[F+1]<<8|D[F+2]<<16,this.words[j]|=q<<te&67108863,this.words[j+1]=q>>>26-te&67108863,(te+=24)>=26&&(te-=26,j++);return this.strip()},l.prototype._parseHex=function(D,N,W){this.length=Math.ceil((D.length-N)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var j,q=0,te=0;if(W==="be")for(F=D.length-1;F>=N;F-=2)j=u(D,N,F)<<q,this.words[te]|=67108863&j,q>=18?(q-=18,te+=1,this.words[te]|=j>>>26):q+=8;else for(F=(D.length-N)%2==0?N+1:N;F<D.length;F+=2)j=u(D,N,F)<<q,this.words[te]|=67108863&j,q>=18?(q-=18,te+=1,this.words[te]|=j>>>26):q+=8;this.strip()},l.prototype._parseBase=function(D,N,W){this.words=[0],this.length=1;for(var F=0,j=1;j<=67108863;j*=N)F++;F--,j=j/N|0;for(var q=D.length-W,te=q%F,ee=Math.min(q,q-te)+W,Q=0,J=W;J<ee;J+=F)Q=x(D,J,J+F,N),this.imuln(j),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(te!==0){var K=1;for(Q=x(D,J,D.length,N),J=0;J<te;J++)K*=N;this.imuln(K),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},l.prototype.copy=function(D){D.words=new Array(this.length);for(var N=0;N<this.length;N++)D.words[N]=this.words[N];D.length=this.length,D.negative=this.negative,D.red=this.red},l.prototype.clone=function(){var D=new l(null);return this.copy(D),D},l.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(D,N,W){W.negative=N.negative^D.negative;var F=D.length+N.length|0;W.length=F,F=F-1|0;var j=0|D.words[0],q=0|N.words[0],te=j*q,ee=67108863&te,Q=te/67108864|0;W.words[0]=ee;for(var J=1;J<F;J++){for(var K=Q>>>26,Y=67108863&Q,ie=Math.min(J,N.length-1),se=Math.max(0,J-D.length+1);se<=ie;se++){var ae=J-se|0;K+=(te=(j=0|D.words[ae])*(q=0|N.words[se])+Y)/67108864|0,Y=67108863&te}W.words[J]=0|Y,Q=0|K}return Q!==0?W.words[J]=0|Q:W.length--,W.strip()}l.prototype.toString=function(D,N){var W;if(N=0|N||1,(D=D||10)===16||D==="hex"){W="";for(var F=0,j=0,q=0;q<this.length;q++){var te=this.words[q],ee=(16777215&(te<<F|j)).toString(16);W=(j=te>>>24-F&16777215)!=0||q!==this.length-1?d[6-ee.length]+ee+W:ee+W,(F+=2)>=26&&(F-=26,q--)}for(j!==0&&(W=j.toString(16)+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}if(D===(0|D)&&D>=2&&D<=36){var Q=m[D],J=g[D];W="";var K=this.clone();for(K.negative=0;!K.isZero();){var Y=K.modn(J).toString(D);W=(K=K.idivn(J)).isZero()?Y+W:d[Q-Y.length]+Y+W}for(this.isZero()&&(W="0"+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}r(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=67108864*this.words[1]:this.length===3&&this.words[2]===1?D+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(D,N){return r(c!==void 0),this.toArrayLike(c,D,N)},l.prototype.toArray=function(D,N){return this.toArrayLike(Array,D,N)},l.prototype.toArrayLike=function(D,N,W){var F=this.byteLength(),j=W||Math.max(1,F);r(F<=j,"byte array longer than desired length"),r(j>0,"Requested array length <= 0"),this.strip();var q,te,ee=N==="le",Q=new D(j),J=this.clone();if(ee){for(te=0;!J.isZero();te++)q=J.andln(255),J.iushrn(8),Q[te]=q;for(;te<j;te++)Q[te]=0}else{for(te=0;te<j-F;te++)Q[te]=0;for(te=0;!J.isZero();te++)q=J.andln(255),J.iushrn(8),Q[j-te-1]=q}return Q},Math.clz32?l.prototype._countBits=function(D){return 32-Math.clz32(D)}:l.prototype._countBits=function(D){var N=D,W=0;return N>=4096&&(W+=13,N>>>=13),N>=64&&(W+=7,N>>>=7),N>=8&&(W+=4,N>>>=4),N>=2&&(W+=2,N>>>=2),W+N},l.prototype._zeroBits=function(D){if(D===0)return 26;var N=D,W=0;return!(8191&N)&&(W+=13,N>>>=13),!(127&N)&&(W+=7,N>>>=7),!(15&N)&&(W+=4,N>>>=4),!(3&N)&&(W+=2,N>>>=2),!(1&N)&&W++,W},l.prototype.bitLength=function(){var D=this.words[this.length-1],N=this._countBits(D);return 26*(this.length-1)+N},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,N=0;N<this.length;N++){var W=this._zeroBits(this.words[N]);if(D+=W,W!==26)break}return D},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},l.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var N=0;N<D.length;N++)this.words[N]=this.words[N]|D.words[N];return this.strip()},l.prototype.ior=function(D){return r((this.negative|D.negative)==0),this.iuor(D)},l.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},l.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},l.prototype.iuand=function(D){var N;N=this.length>D.length?D:this;for(var W=0;W<N.length;W++)this.words[W]=this.words[W]&D.words[W];return this.length=N.length,this.strip()},l.prototype.iand=function(D){return r((this.negative|D.negative)==0),this.iuand(D)},l.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},l.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},l.prototype.iuxor=function(D){var N,W;this.length>D.length?(N=this,W=D):(N=D,W=this);for(var F=0;F<W.length;F++)this.words[F]=N.words[F]^W.words[F];if(this!==N)for(;F<N.length;F++)this.words[F]=N.words[F];return this.length=N.length,this.strip()},l.prototype.ixor=function(D){return r((this.negative|D.negative)==0),this.iuxor(D)},l.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},l.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},l.prototype.inotn=function(D){r(typeof D=="number"&&D>=0);var N=0|Math.ceil(D/26),W=D%26;this._expand(N),W>0&&N--;for(var F=0;F<N;F++)this.words[F]=67108863&~this.words[F];return W>0&&(this.words[F]=~this.words[F]&67108863>>26-W),this.strip()},l.prototype.notn=function(D){return this.clone().inotn(D)},l.prototype.setn=function(D,N){r(typeof D=="number"&&D>=0);var W=D/26|0,F=D%26;return this._expand(W+1),this.words[W]=N?this.words[W]|1<<F:this.words[W]&~(1<<F),this.strip()},l.prototype.iadd=function(D){var N,W,F;if(this.negative!==0&&D.negative===0)return this.negative=0,N=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,N=this.isub(D),D.negative=1,N._normSign();this.length>D.length?(W=this,F=D):(W=D,F=this);for(var j=0,q=0;q<F.length;q++)N=(0|W.words[q])+(0|F.words[q])+j,this.words[q]=67108863&N,j=N>>>26;for(;j!==0&&q<W.length;q++)N=(0|W.words[q])+j,this.words[q]=67108863&N,j=N>>>26;if(this.length=W.length,j!==0)this.words[this.length]=j,this.length++;else if(W!==this)for(;q<W.length;q++)this.words[q]=W.words[q];return this},l.prototype.add=function(D){var N;return D.negative!==0&&this.negative===0?(D.negative=0,N=this.sub(D),D.negative^=1,N):D.negative===0&&this.negative!==0?(this.negative=0,N=D.sub(this),this.negative=1,N):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},l.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var N=this.iadd(D);return D.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var W,F,j=this.cmp(D);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;j>0?(W=this,F=D):(W=D,F=this);for(var q=0,te=0;te<F.length;te++)q=(N=(0|W.words[te])-(0|F.words[te])+q)>>26,this.words[te]=67108863&N;for(;q!==0&&te<W.length;te++)q=(N=(0|W.words[te])+q)>>26,this.words[te]=67108863&N;if(q===0&&te<W.length&&W!==this)for(;te<W.length;te++)this.words[te]=W.words[te];return this.length=Math.max(this.length,te),W!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(D){return this.clone().isub(D)};var v=function(D,N,W){var F,j,q,te=D.words,ee=N.words,Q=W.words,J=0,K=0|te[0],Y=8191&K,ie=K>>>13,se=0|te[1],ae=8191&se,ue=se>>>13,ve=0|te[2],ye=8191&ve,de=ve>>>13,pe=0|te[3],ge=8191&pe,ke=pe>>>13,Ee=0|te[4],me=8191&Ee,oe=Ee>>>13,re=0|te[5],fe=8191&re,Se=re>>>13,be=0|te[6],we=8191&be,Me=be>>>13,Ie=0|te[7],Oe=8191&Ie,he=Ie>>>13,_e=0|te[8],Ae=8191&_e,De=_e>>>13,Le=0|te[9],Be=8191&Le,Ve=Le>>>13,Ze=0|ee[0],rt=8191&Ze,it=Ze>>>13,dt=0|ee[1],mt=8191&dt,ht=dt>>>13,Qe=0|ee[2],Je=8191&Qe,wt=Qe>>>13,Pt=0|ee[3],It=8191&Pt,At=Pt>>>13,qe=0|ee[4],Ye=8191&qe,Ne=qe>>>13,We=0|ee[5],at=8191&We,tt=We>>>13,Re=0|ee[6],Fe=8191&Re,nt=Re>>>13,Ge=0|ee[7],ut=8191&Ge,pt=Ge>>>13,gt=0|ee[8],ct=8191&gt,Tt=gt>>>13,vt=0|ee[9],kt=8191&vt,Lt=vt>>>13;W.negative=D.negative^N.negative,W.length=19;var Ct=(J+(F=Math.imul(Y,rt))|0)+((8191&(j=(j=Math.imul(Y,it))+Math.imul(ie,rt)|0))<<13)|0;J=((q=Math.imul(ie,it))+(j>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,F=Math.imul(ae,rt),j=(j=Math.imul(ae,it))+Math.imul(ue,rt)|0,q=Math.imul(ue,it);var Dt=(J+(F=F+Math.imul(Y,mt)|0)|0)+((8191&(j=(j=j+Math.imul(Y,ht)|0)+Math.imul(ie,mt)|0))<<13)|0;J=((q=q+Math.imul(ie,ht)|0)+(j>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,F=Math.imul(ye,rt),j=(j=Math.imul(ye,it))+Math.imul(de,rt)|0,q=Math.imul(de,it),F=F+Math.imul(ae,mt)|0,j=(j=j+Math.imul(ae,ht)|0)+Math.imul(ue,mt)|0,q=q+Math.imul(ue,ht)|0;var Gt=(J+(F=F+Math.imul(Y,Je)|0)|0)+((8191&(j=(j=j+Math.imul(Y,wt)|0)+Math.imul(ie,Je)|0))<<13)|0;J=((q=q+Math.imul(ie,wt)|0)+(j>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,F=Math.imul(ge,rt),j=(j=Math.imul(ge,it))+Math.imul(ke,rt)|0,q=Math.imul(ke,it),F=F+Math.imul(ye,mt)|0,j=(j=j+Math.imul(ye,ht)|0)+Math.imul(de,mt)|0,q=q+Math.imul(de,ht)|0,F=F+Math.imul(ae,Je)|0,j=(j=j+Math.imul(ae,wt)|0)+Math.imul(ue,Je)|0,q=q+Math.imul(ue,wt)|0;var tn=(J+(F=F+Math.imul(Y,It)|0)|0)+((8191&(j=(j=j+Math.imul(Y,At)|0)+Math.imul(ie,It)|0))<<13)|0;J=((q=q+Math.imul(ie,At)|0)+(j>>>13)|0)+(tn>>>26)|0,tn&=67108863,F=Math.imul(me,rt),j=(j=Math.imul(me,it))+Math.imul(oe,rt)|0,q=Math.imul(oe,it),F=F+Math.imul(ge,mt)|0,j=(j=j+Math.imul(ge,ht)|0)+Math.imul(ke,mt)|0,q=q+Math.imul(ke,ht)|0,F=F+Math.imul(ye,Je)|0,j=(j=j+Math.imul(ye,wt)|0)+Math.imul(de,Je)|0,q=q+Math.imul(de,wt)|0,F=F+Math.imul(ae,It)|0,j=(j=j+Math.imul(ae,At)|0)+Math.imul(ue,It)|0,q=q+Math.imul(ue,At)|0;var jt=(J+(F=F+Math.imul(Y,Ye)|0)|0)+((8191&(j=(j=j+Math.imul(Y,Ne)|0)+Math.imul(ie,Ye)|0))<<13)|0;J=((q=q+Math.imul(ie,Ne)|0)+(j>>>13)|0)+(jt>>>26)|0,jt&=67108863,F=Math.imul(fe,rt),j=(j=Math.imul(fe,it))+Math.imul(Se,rt)|0,q=Math.imul(Se,it),F=F+Math.imul(me,mt)|0,j=(j=j+Math.imul(me,ht)|0)+Math.imul(oe,mt)|0,q=q+Math.imul(oe,ht)|0,F=F+Math.imul(ge,Je)|0,j=(j=j+Math.imul(ge,wt)|0)+Math.imul(ke,Je)|0,q=q+Math.imul(ke,wt)|0,F=F+Math.imul(ye,It)|0,j=(j=j+Math.imul(ye,At)|0)+Math.imul(de,It)|0,q=q+Math.imul(de,At)|0,F=F+Math.imul(ae,Ye)|0,j=(j=j+Math.imul(ae,Ne)|0)+Math.imul(ue,Ye)|0,q=q+Math.imul(ue,Ne)|0;var Wt=(J+(F=F+Math.imul(Y,at)|0)|0)+((8191&(j=(j=j+Math.imul(Y,tt)|0)+Math.imul(ie,at)|0))<<13)|0;J=((q=q+Math.imul(ie,tt)|0)+(j>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(we,rt),j=(j=Math.imul(we,it))+Math.imul(Me,rt)|0,q=Math.imul(Me,it),F=F+Math.imul(fe,mt)|0,j=(j=j+Math.imul(fe,ht)|0)+Math.imul(Se,mt)|0,q=q+Math.imul(Se,ht)|0,F=F+Math.imul(me,Je)|0,j=(j=j+Math.imul(me,wt)|0)+Math.imul(oe,Je)|0,q=q+Math.imul(oe,wt)|0,F=F+Math.imul(ge,It)|0,j=(j=j+Math.imul(ge,At)|0)+Math.imul(ke,It)|0,q=q+Math.imul(ke,At)|0,F=F+Math.imul(ye,Ye)|0,j=(j=j+Math.imul(ye,Ne)|0)+Math.imul(de,Ye)|0,q=q+Math.imul(de,Ne)|0,F=F+Math.imul(ae,at)|0,j=(j=j+Math.imul(ae,tt)|0)+Math.imul(ue,at)|0,q=q+Math.imul(ue,tt)|0;var Ft=(J+(F=F+Math.imul(Y,Fe)|0)|0)+((8191&(j=(j=j+Math.imul(Y,nt)|0)+Math.imul(ie,Fe)|0))<<13)|0;J=((q=q+Math.imul(ie,nt)|0)+(j>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,F=Math.imul(Oe,rt),j=(j=Math.imul(Oe,it))+Math.imul(he,rt)|0,q=Math.imul(he,it),F=F+Math.imul(we,mt)|0,j=(j=j+Math.imul(we,ht)|0)+Math.imul(Me,mt)|0,q=q+Math.imul(Me,ht)|0,F=F+Math.imul(fe,Je)|0,j=(j=j+Math.imul(fe,wt)|0)+Math.imul(Se,Je)|0,q=q+Math.imul(Se,wt)|0,F=F+Math.imul(me,It)|0,j=(j=j+Math.imul(me,At)|0)+Math.imul(oe,It)|0,q=q+Math.imul(oe,At)|0,F=F+Math.imul(ge,Ye)|0,j=(j=j+Math.imul(ge,Ne)|0)+Math.imul(ke,Ye)|0,q=q+Math.imul(ke,Ne)|0,F=F+Math.imul(ye,at)|0,j=(j=j+Math.imul(ye,tt)|0)+Math.imul(de,at)|0,q=q+Math.imul(de,tt)|0,F=F+Math.imul(ae,Fe)|0,j=(j=j+Math.imul(ae,nt)|0)+Math.imul(ue,Fe)|0,q=q+Math.imul(ue,nt)|0;var Ln=(J+(F=F+Math.imul(Y,ut)|0)|0)+((8191&(j=(j=j+Math.imul(Y,pt)|0)+Math.imul(ie,ut)|0))<<13)|0;J=((q=q+Math.imul(ie,pt)|0)+(j>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,F=Math.imul(Ae,rt),j=(j=Math.imul(Ae,it))+Math.imul(De,rt)|0,q=Math.imul(De,it),F=F+Math.imul(Oe,mt)|0,j=(j=j+Math.imul(Oe,ht)|0)+Math.imul(he,mt)|0,q=q+Math.imul(he,ht)|0,F=F+Math.imul(we,Je)|0,j=(j=j+Math.imul(we,wt)|0)+Math.imul(Me,Je)|0,q=q+Math.imul(Me,wt)|0,F=F+Math.imul(fe,It)|0,j=(j=j+Math.imul(fe,At)|0)+Math.imul(Se,It)|0,q=q+Math.imul(Se,At)|0,F=F+Math.imul(me,Ye)|0,j=(j=j+Math.imul(me,Ne)|0)+Math.imul(oe,Ye)|0,q=q+Math.imul(oe,Ne)|0,F=F+Math.imul(ge,at)|0,j=(j=j+Math.imul(ge,tt)|0)+Math.imul(ke,at)|0,q=q+Math.imul(ke,tt)|0,F=F+Math.imul(ye,Fe)|0,j=(j=j+Math.imul(ye,nt)|0)+Math.imul(de,Fe)|0,q=q+Math.imul(de,nt)|0,F=F+Math.imul(ae,ut)|0,j=(j=j+Math.imul(ae,pt)|0)+Math.imul(ue,ut)|0,q=q+Math.imul(ue,pt)|0;var bn=(J+(F=F+Math.imul(Y,ct)|0)|0)+((8191&(j=(j=j+Math.imul(Y,Tt)|0)+Math.imul(ie,ct)|0))<<13)|0;J=((q=q+Math.imul(ie,Tt)|0)+(j>>>13)|0)+(bn>>>26)|0,bn&=67108863,F=Math.imul(Be,rt),j=(j=Math.imul(Be,it))+Math.imul(Ve,rt)|0,q=Math.imul(Ve,it),F=F+Math.imul(Ae,mt)|0,j=(j=j+Math.imul(Ae,ht)|0)+Math.imul(De,mt)|0,q=q+Math.imul(De,ht)|0,F=F+Math.imul(Oe,Je)|0,j=(j=j+Math.imul(Oe,wt)|0)+Math.imul(he,Je)|0,q=q+Math.imul(he,wt)|0,F=F+Math.imul(we,It)|0,j=(j=j+Math.imul(we,At)|0)+Math.imul(Me,It)|0,q=q+Math.imul(Me,At)|0,F=F+Math.imul(fe,Ye)|0,j=(j=j+Math.imul(fe,Ne)|0)+Math.imul(Se,Ye)|0,q=q+Math.imul(Se,Ne)|0,F=F+Math.imul(me,at)|0,j=(j=j+Math.imul(me,tt)|0)+Math.imul(oe,at)|0,q=q+Math.imul(oe,tt)|0,F=F+Math.imul(ge,Fe)|0,j=(j=j+Math.imul(ge,nt)|0)+Math.imul(ke,Fe)|0,q=q+Math.imul(ke,nt)|0,F=F+Math.imul(ye,ut)|0,j=(j=j+Math.imul(ye,pt)|0)+Math.imul(de,ut)|0,q=q+Math.imul(de,pt)|0,F=F+Math.imul(ae,ct)|0,j=(j=j+Math.imul(ae,Tt)|0)+Math.imul(ue,ct)|0,q=q+Math.imul(ue,Tt)|0;var hn=(J+(F=F+Math.imul(Y,kt)|0)|0)+((8191&(j=(j=j+Math.imul(Y,Lt)|0)+Math.imul(ie,kt)|0))<<13)|0;J=((q=q+Math.imul(ie,Lt)|0)+(j>>>13)|0)+(hn>>>26)|0,hn&=67108863,F=Math.imul(Be,mt),j=(j=Math.imul(Be,ht))+Math.imul(Ve,mt)|0,q=Math.imul(Ve,ht),F=F+Math.imul(Ae,Je)|0,j=(j=j+Math.imul(Ae,wt)|0)+Math.imul(De,Je)|0,q=q+Math.imul(De,wt)|0,F=F+Math.imul(Oe,It)|0,j=(j=j+Math.imul(Oe,At)|0)+Math.imul(he,It)|0,q=q+Math.imul(he,At)|0,F=F+Math.imul(we,Ye)|0,j=(j=j+Math.imul(we,Ne)|0)+Math.imul(Me,Ye)|0,q=q+Math.imul(Me,Ne)|0,F=F+Math.imul(fe,at)|0,j=(j=j+Math.imul(fe,tt)|0)+Math.imul(Se,at)|0,q=q+Math.imul(Se,tt)|0,F=F+Math.imul(me,Fe)|0,j=(j=j+Math.imul(me,nt)|0)+Math.imul(oe,Fe)|0,q=q+Math.imul(oe,nt)|0,F=F+Math.imul(ge,ut)|0,j=(j=j+Math.imul(ge,pt)|0)+Math.imul(ke,ut)|0,q=q+Math.imul(ke,pt)|0,F=F+Math.imul(ye,ct)|0,j=(j=j+Math.imul(ye,Tt)|0)+Math.imul(de,ct)|0,q=q+Math.imul(de,Tt)|0;var Kt=(J+(F=F+Math.imul(ae,kt)|0)|0)+((8191&(j=(j=j+Math.imul(ae,Lt)|0)+Math.imul(ue,kt)|0))<<13)|0;J=((q=q+Math.imul(ue,Lt)|0)+(j>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,F=Math.imul(Be,Je),j=(j=Math.imul(Be,wt))+Math.imul(Ve,Je)|0,q=Math.imul(Ve,wt),F=F+Math.imul(Ae,It)|0,j=(j=j+Math.imul(Ae,At)|0)+Math.imul(De,It)|0,q=q+Math.imul(De,At)|0,F=F+Math.imul(Oe,Ye)|0,j=(j=j+Math.imul(Oe,Ne)|0)+Math.imul(he,Ye)|0,q=q+Math.imul(he,Ne)|0,F=F+Math.imul(we,at)|0,j=(j=j+Math.imul(we,tt)|0)+Math.imul(Me,at)|0,q=q+Math.imul(Me,tt)|0,F=F+Math.imul(fe,Fe)|0,j=(j=j+Math.imul(fe,nt)|0)+Math.imul(Se,Fe)|0,q=q+Math.imul(Se,nt)|0,F=F+Math.imul(me,ut)|0,j=(j=j+Math.imul(me,pt)|0)+Math.imul(oe,ut)|0,q=q+Math.imul(oe,pt)|0,F=F+Math.imul(ge,ct)|0,j=(j=j+Math.imul(ge,Tt)|0)+Math.imul(ke,ct)|0,q=q+Math.imul(ke,Tt)|0;var sn=(J+(F=F+Math.imul(ye,kt)|0)|0)+((8191&(j=(j=j+Math.imul(ye,Lt)|0)+Math.imul(de,kt)|0))<<13)|0;J=((q=q+Math.imul(de,Lt)|0)+(j>>>13)|0)+(sn>>>26)|0,sn&=67108863,F=Math.imul(Be,It),j=(j=Math.imul(Be,At))+Math.imul(Ve,It)|0,q=Math.imul(Ve,At),F=F+Math.imul(Ae,Ye)|0,j=(j=j+Math.imul(Ae,Ne)|0)+Math.imul(De,Ye)|0,q=q+Math.imul(De,Ne)|0,F=F+Math.imul(Oe,at)|0,j=(j=j+Math.imul(Oe,tt)|0)+Math.imul(he,at)|0,q=q+Math.imul(he,tt)|0,F=F+Math.imul(we,Fe)|0,j=(j=j+Math.imul(we,nt)|0)+Math.imul(Me,Fe)|0,q=q+Math.imul(Me,nt)|0,F=F+Math.imul(fe,ut)|0,j=(j=j+Math.imul(fe,pt)|0)+Math.imul(Se,ut)|0,q=q+Math.imul(Se,pt)|0,F=F+Math.imul(me,ct)|0,j=(j=j+Math.imul(me,Tt)|0)+Math.imul(oe,ct)|0,q=q+Math.imul(oe,Tt)|0;var Qt=(J+(F=F+Math.imul(ge,kt)|0)|0)+((8191&(j=(j=j+Math.imul(ge,Lt)|0)+Math.imul(ke,kt)|0))<<13)|0;J=((q=q+Math.imul(ke,Lt)|0)+(j>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,F=Math.imul(Be,Ye),j=(j=Math.imul(Be,Ne))+Math.imul(Ve,Ye)|0,q=Math.imul(Ve,Ne),F=F+Math.imul(Ae,at)|0,j=(j=j+Math.imul(Ae,tt)|0)+Math.imul(De,at)|0,q=q+Math.imul(De,tt)|0,F=F+Math.imul(Oe,Fe)|0,j=(j=j+Math.imul(Oe,nt)|0)+Math.imul(he,Fe)|0,q=q+Math.imul(he,nt)|0,F=F+Math.imul(we,ut)|0,j=(j=j+Math.imul(we,pt)|0)+Math.imul(Me,ut)|0,q=q+Math.imul(Me,pt)|0,F=F+Math.imul(fe,ct)|0,j=(j=j+Math.imul(fe,Tt)|0)+Math.imul(Se,ct)|0,q=q+Math.imul(Se,Tt)|0;var cn=(J+(F=F+Math.imul(me,kt)|0)|0)+((8191&(j=(j=j+Math.imul(me,Lt)|0)+Math.imul(oe,kt)|0))<<13)|0;J=((q=q+Math.imul(oe,Lt)|0)+(j>>>13)|0)+(cn>>>26)|0,cn&=67108863,F=Math.imul(Be,at),j=(j=Math.imul(Be,tt))+Math.imul(Ve,at)|0,q=Math.imul(Ve,tt),F=F+Math.imul(Ae,Fe)|0,j=(j=j+Math.imul(Ae,nt)|0)+Math.imul(De,Fe)|0,q=q+Math.imul(De,nt)|0,F=F+Math.imul(Oe,ut)|0,j=(j=j+Math.imul(Oe,pt)|0)+Math.imul(he,ut)|0,q=q+Math.imul(he,pt)|0,F=F+Math.imul(we,ct)|0,j=(j=j+Math.imul(we,Tt)|0)+Math.imul(Me,ct)|0,q=q+Math.imul(Me,Tt)|0;var vn=(J+(F=F+Math.imul(fe,kt)|0)|0)+((8191&(j=(j=j+Math.imul(fe,Lt)|0)+Math.imul(Se,kt)|0))<<13)|0;J=((q=q+Math.imul(Se,Lt)|0)+(j>>>13)|0)+(vn>>>26)|0,vn&=67108863,F=Math.imul(Be,Fe),j=(j=Math.imul(Be,nt))+Math.imul(Ve,Fe)|0,q=Math.imul(Ve,nt),F=F+Math.imul(Ae,ut)|0,j=(j=j+Math.imul(Ae,pt)|0)+Math.imul(De,ut)|0,q=q+Math.imul(De,pt)|0,F=F+Math.imul(Oe,ct)|0,j=(j=j+Math.imul(Oe,Tt)|0)+Math.imul(he,ct)|0,q=q+Math.imul(he,Tt)|0;var xn=(J+(F=F+Math.imul(we,kt)|0)|0)+((8191&(j=(j=j+Math.imul(we,Lt)|0)+Math.imul(Me,kt)|0))<<13)|0;J=((q=q+Math.imul(Me,Lt)|0)+(j>>>13)|0)+(xn>>>26)|0,xn&=67108863,F=Math.imul(Be,ut),j=(j=Math.imul(Be,pt))+Math.imul(Ve,ut)|0,q=Math.imul(Ve,pt),F=F+Math.imul(Ae,ct)|0,j=(j=j+Math.imul(Ae,Tt)|0)+Math.imul(De,ct)|0,q=q+Math.imul(De,Tt)|0;var An=(J+(F=F+Math.imul(Oe,kt)|0)|0)+((8191&(j=(j=j+Math.imul(Oe,Lt)|0)+Math.imul(he,kt)|0))<<13)|0;J=((q=q+Math.imul(he,Lt)|0)+(j>>>13)|0)+(An>>>26)|0,An&=67108863,F=Math.imul(Be,ct),j=(j=Math.imul(Be,Tt))+Math.imul(Ve,ct)|0,q=Math.imul(Ve,Tt);var Sn=(J+(F=F+Math.imul(Ae,kt)|0)|0)+((8191&(j=(j=j+Math.imul(Ae,Lt)|0)+Math.imul(De,kt)|0))<<13)|0;J=((q=q+Math.imul(De,Lt)|0)+(j>>>13)|0)+(Sn>>>26)|0,Sn&=67108863;var Tn=(J+(F=Math.imul(Be,kt))|0)+((8191&(j=(j=Math.imul(Be,Lt))+Math.imul(Ve,kt)|0))<<13)|0;return J=((q=Math.imul(Ve,Lt))+(j>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Q[0]=Ct,Q[1]=Dt,Q[2]=Gt,Q[3]=tn,Q[4]=jt,Q[5]=Wt,Q[6]=Ft,Q[7]=Ln,Q[8]=bn,Q[9]=hn,Q[10]=Kt,Q[11]=sn,Q[12]=Qt,Q[13]=cn,Q[14]=vn,Q[15]=xn,Q[16]=An,Q[17]=Sn,Q[18]=Tn,J!==0&&(Q[19]=J,W.length++),W};function _(D,N,W){return new f().mulp(D,N,W)}function f(D,N){this.x=D,this.y=N}Math.imul||(v=y),l.prototype.mulTo=function(D,N){var W,F=this.length+D.length;return W=this.length===10&&D.length===10?v(this,D,N):F<63?y(this,D,N):F<1024?function(j,q,te){te.negative=q.negative^j.negative,te.length=j.length+q.length;for(var ee=0,Q=0,J=0;J<te.length-1;J++){var K=Q;Q=0;for(var Y=67108863&ee,ie=Math.min(J,q.length-1),se=Math.max(0,J-j.length+1);se<=ie;se++){var ae=J-se,ue=(0|j.words[ae])*(0|q.words[se]),ve=67108863&ue;Y=67108863&(ve=ve+Y|0),Q+=(K=(K=K+(ue/67108864|0)|0)+(ve>>>26)|0)>>>26,K&=67108863}te.words[J]=Y,ee=K,K=Q}return ee!==0?te.words[J]=ee:te.length--,te.strip()}(this,D,N):_(this,D,N),W},f.prototype.makeRBT=function(D){for(var N=new Array(D),W=l.prototype._countBits(D)-1,F=0;F<D;F++)N[F]=this.revBin(F,W,D);return N},f.prototype.revBin=function(D,N,W){if(D===0||D===W-1)return D;for(var F=0,j=0;j<N;j++)F|=(1&D)<<N-j-1,D>>=1;return F},f.prototype.permute=function(D,N,W,F,j,q){for(var te=0;te<q;te++)F[te]=N[D[te]],j[te]=W[D[te]]},f.prototype.transform=function(D,N,W,F,j,q){this.permute(q,D,N,W,F,j);for(var te=1;te<j;te<<=1)for(var ee=te<<1,Q=Math.cos(2*Math.PI/ee),J=Math.sin(2*Math.PI/ee),K=0;K<j;K+=ee)for(var Y=Q,ie=J,se=0;se<te;se++){var ae=W[K+se],ue=F[K+se],ve=W[K+se+te],ye=F[K+se+te],de=Y*ve-ie*ye;ye=Y*ye+ie*ve,ve=de,W[K+se]=ae+ve,F[K+se]=ue+ye,W[K+se+te]=ae-ve,F[K+se+te]=ue-ye,se!==ee&&(de=Q*Y-J*ie,ie=Q*ie+J*Y,Y=de)}},f.prototype.guessLen13b=function(D,N){var W=1|Math.max(N,D),F=1&W,j=0;for(W=W/2|0;W;W>>>=1)j++;return 1<<j+1+F},f.prototype.conjugate=function(D,N,W){if(!(W<=1))for(var F=0;F<W/2;F++){var j=D[F];D[F]=D[W-F-1],D[W-F-1]=j,j=N[F],N[F]=-N[W-F-1],N[W-F-1]=-j}},f.prototype.normalize13b=function(D,N){for(var W=0,F=0;F<N/2;F++){var j=8192*Math.round(D[2*F+1]/N)+Math.round(D[2*F]/N)+W;D[F]=67108863&j,W=j<67108864?0:j/67108864|0}return D},f.prototype.convert13b=function(D,N,W,F){for(var j=0,q=0;q<N;q++)j+=0|D[q],W[2*q]=8191&j,j>>>=13,W[2*q+1]=8191&j,j>>>=13;for(q=2*N;q<F;++q)W[q]=0;r(j===0),r((-8192&j)==0)},f.prototype.stub=function(D){for(var N=new Array(D),W=0;W<D;W++)N[W]=0;return N},f.prototype.mulp=function(D,N,W){var F=2*this.guessLen13b(D.length,N.length),j=this.makeRBT(F),q=this.stub(F),te=new Array(F),ee=new Array(F),Q=new Array(F),J=new Array(F),K=new Array(F),Y=new Array(F),ie=W.words;ie.length=F,this.convert13b(D.words,D.length,te,F),this.convert13b(N.words,N.length,J,F),this.transform(te,q,ee,Q,F,j),this.transform(J,q,K,Y,F,j);for(var se=0;se<F;se++){var ae=ee[se]*K[se]-Q[se]*Y[se];Q[se]=ee[se]*Y[se]+Q[se]*K[se],ee[se]=ae}return this.conjugate(ee,Q,F),this.transform(ee,Q,ie,q,F,j),this.conjugate(ie,q,F),this.normalize13b(ie,F),W.negative=D.negative^N.negative,W.length=D.length+N.length,W.strip()},l.prototype.mul=function(D){var N=new l(null);return N.words=new Array(this.length+D.length),this.mulTo(D,N)},l.prototype.mulf=function(D){var N=new l(null);return N.words=new Array(this.length+D.length),_(this,D,N)},l.prototype.imul=function(D){return this.clone().mulTo(D,this)},l.prototype.imuln=function(D){r(typeof D=="number"),r(D<67108864);for(var N=0,W=0;W<this.length;W++){var F=(0|this.words[W])*D,j=(67108863&F)+(67108863&N);N>>=26,N+=F/67108864|0,N+=j>>>26,this.words[W]=67108863&j}return N!==0&&(this.words[W]=N,this.length++),this},l.prototype.muln=function(D){return this.clone().imuln(D)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(D){var N=function(q){for(var te=new Array(q.bitLength()),ee=0;ee<te.length;ee++){var Q=ee/26|0,J=ee%26;te[ee]=(q.words[Q]&1<<J)>>>J}return te}(D);if(N.length===0)return new l(1);for(var W=this,F=0;F<N.length&&N[F]===0;F++,W=W.sqr());if(++F<N.length)for(var j=W.sqr();F<N.length;F++,j=j.sqr())N[F]!==0&&(W=W.mul(j));return W},l.prototype.iushln=function(D){r(typeof D=="number"&&D>=0);var N,W=D%26,F=(D-W)/26,j=67108863>>>26-W<<26-W;if(W!==0){var q=0;for(N=0;N<this.length;N++){var te=this.words[N]&j,ee=(0|this.words[N])-te<<W;this.words[N]=ee|q,q=te>>>26-W}q&&(this.words[N]=q,this.length++)}if(F!==0){for(N=this.length-1;N>=0;N--)this.words[N+F]=this.words[N];for(N=0;N<F;N++)this.words[N]=0;this.length+=F}return this.strip()},l.prototype.ishln=function(D){return r(this.negative===0),this.iushln(D)},l.prototype.iushrn=function(D,N,W){var F;r(typeof D=="number"&&D>=0),F=N?(N-N%26)/26:0;var j=D%26,q=Math.min((D-j)/26,this.length),te=67108863^67108863>>>j<<j,ee=W;if(F-=q,F=Math.max(0,F),ee){for(var Q=0;Q<q;Q++)ee.words[Q]=this.words[Q];ee.length=q}if(q!==0)if(this.length>q)for(this.length-=q,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+q];else this.words[0]=0,this.length=1;var J=0;for(Q=this.length-1;Q>=0&&(J!==0||Q>=F);Q--){var K=0|this.words[Q];this.words[Q]=J<<26-j|K>>>j,J=K&te}return ee&&J!==0&&(ee.words[ee.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(D,N,W){return r(this.negative===0),this.iushrn(D,N,W)},l.prototype.shln=function(D){return this.clone().ishln(D)},l.prototype.ushln=function(D){return this.clone().iushln(D)},l.prototype.shrn=function(D){return this.clone().ishrn(D)},l.prototype.ushrn=function(D){return this.clone().iushrn(D)},l.prototype.testn=function(D){r(typeof D=="number"&&D>=0);var N=D%26,W=(D-N)/26,F=1<<N;return!(this.length<=W||!(this.words[W]&F))},l.prototype.imaskn=function(D){r(typeof D=="number"&&D>=0);var N=D%26,W=(D-N)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(N!==0&&W++,this.length=Math.min(W,this.length),N!==0){var F=67108863^67108863>>>N<<N;this.words[this.length-1]&=F}return this.strip()},l.prototype.maskn=function(D){return this.clone().imaskn(D)},l.prototype.iaddn=function(D){return r(typeof D=="number"),r(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},l.prototype._iaddn=function(D){this.words[0]+=D;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},l.prototype.isubn=function(D){if(r(typeof D=="number"),r(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},l.prototype.addn=function(D){return this.clone().iaddn(D)},l.prototype.subn=function(D){return this.clone().isubn(D)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(D,N,W){var F,j,q=D.length+W;this._expand(q);var te=0;for(F=0;F<D.length;F++){j=(0|this.words[F+W])+te;var ee=(0|D.words[F])*N;te=((j-=67108863&ee)>>26)-(ee/67108864|0),this.words[F+W]=67108863&j}for(;F<this.length-W;F++)te=(j=(0|this.words[F+W])+te)>>26,this.words[F+W]=67108863&j;if(te===0)return this.strip();for(r(te===-1),te=0,F=0;F<this.length;F++)te=(j=-(0|this.words[F])+te)>>26,this.words[F]=67108863&j;return this.negative=1,this.strip()},l.prototype._wordDiv=function(D,N){var W=(this.length,D.length),F=this.clone(),j=D,q=0|j.words[j.length-1];(W=26-this._countBits(q))!=0&&(j=j.ushln(W),F.iushln(W),q=0|j.words[j.length-1]);var te,ee=F.length-j.length;if(N!=="mod"){(te=new l(null)).length=ee+1,te.words=new Array(te.length);for(var Q=0;Q<te.length;Q++)te.words[Q]=0}var J=F.clone()._ishlnsubmul(j,1,ee);J.negative===0&&(F=J,te&&(te.words[ee]=1));for(var K=ee-1;K>=0;K--){var Y=67108864*(0|F.words[j.length+K])+(0|F.words[j.length+K-1]);for(Y=Math.min(Y/q|0,67108863),F._ishlnsubmul(j,Y,K);F.negative!==0;)Y--,F.negative=0,F._ishlnsubmul(j,1,K),F.isZero()||(F.negative^=1);te&&(te.words[K]=Y)}return te&&te.strip(),F.strip(),N!=="div"&&W!==0&&F.iushrn(W),{div:te||null,mod:F}},l.prototype.divmod=function(D,N,W){return r(!D.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&D.negative===0?(q=this.neg().divmod(D,N),N!=="mod"&&(F=q.div.neg()),N!=="div"&&(j=q.mod.neg(),W&&j.negative!==0&&j.iadd(D)),{div:F,mod:j}):this.negative===0&&D.negative!==0?(q=this.divmod(D.neg(),N),N!=="mod"&&(F=q.div.neg()),{div:F,mod:q.mod}):this.negative&D.negative?(q=this.neg().divmod(D.neg(),N),N!=="div"&&(j=q.mod.neg(),W&&j.negative!==0&&j.isub(D)),{div:q.div,mod:j}):D.length>this.length||this.cmp(D)<0?{div:new l(0),mod:this}:D.length===1?N==="div"?{div:this.divn(D.words[0]),mod:null}:N==="mod"?{div:null,mod:new l(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new l(this.modn(D.words[0]))}:this._wordDiv(D,N);var F,j,q},l.prototype.div=function(D){return this.divmod(D,"div",!1).div},l.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},l.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},l.prototype.divRound=function(D){var N=this.divmod(D);if(N.mod.isZero())return N.div;var W=N.div.negative!==0?N.mod.isub(D):N.mod,F=D.ushrn(1),j=D.andln(1),q=W.cmp(F);return q<0||j===1&&q===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},l.prototype.modn=function(D){r(D<=67108863);for(var N=67108864%D,W=0,F=this.length-1;F>=0;F--)W=(N*W+(0|this.words[F]))%D;return W},l.prototype.idivn=function(D){r(D<=67108863);for(var N=0,W=this.length-1;W>=0;W--){var F=(0|this.words[W])+67108864*N;this.words[W]=F/D|0,N=F%D}return this.strip()},l.prototype.divn=function(D){return this.clone().idivn(D)},l.prototype.egcd=function(D){r(D.negative===0),r(!D.isZero());var N=this,W=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var F=new l(1),j=new l(0),q=new l(0),te=new l(1),ee=0;N.isEven()&&W.isEven();)N.iushrn(1),W.iushrn(1),++ee;for(var Q=W.clone(),J=N.clone();!N.isZero();){for(var K=0,Y=1;!(N.words[0]&Y)&&K<26;++K,Y<<=1);if(K>0)for(N.iushrn(K);K-- >0;)(F.isOdd()||j.isOdd())&&(F.iadd(Q),j.isub(J)),F.iushrn(1),j.iushrn(1);for(var ie=0,se=1;!(W.words[0]&se)&&ie<26;++ie,se<<=1);if(ie>0)for(W.iushrn(ie);ie-- >0;)(q.isOdd()||te.isOdd())&&(q.iadd(Q),te.isub(J)),q.iushrn(1),te.iushrn(1);N.cmp(W)>=0?(N.isub(W),F.isub(q),j.isub(te)):(W.isub(N),q.isub(F),te.isub(j))}return{a:q,b:te,gcd:W.iushln(ee)}},l.prototype._invmp=function(D){r(D.negative===0),r(!D.isZero());var N=this,W=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var F,j=new l(1),q=new l(0),te=W.clone();N.cmpn(1)>0&&W.cmpn(1)>0;){for(var ee=0,Q=1;!(N.words[0]&Q)&&ee<26;++ee,Q<<=1);if(ee>0)for(N.iushrn(ee);ee-- >0;)j.isOdd()&&j.iadd(te),j.iushrn(1);for(var J=0,K=1;!(W.words[0]&K)&&J<26;++J,K<<=1);if(J>0)for(W.iushrn(J);J-- >0;)q.isOdd()&&q.iadd(te),q.iushrn(1);N.cmp(W)>=0?(N.isub(W),j.isub(q)):(W.isub(N),q.isub(j))}return(F=N.cmpn(1)===0?j:q).cmpn(0)<0&&F.iadd(D),F},l.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var N=this.clone(),W=D.clone();N.negative=0,W.negative=0;for(var F=0;N.isEven()&&W.isEven();F++)N.iushrn(1),W.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;W.isEven();)W.iushrn(1);var j=N.cmp(W);if(j<0){var q=N;N=W,W=q}else if(j===0||W.cmpn(1)===0)break;N.isub(W)}return W.iushln(F)},l.prototype.invm=function(D){return this.egcd(D).a.umod(D)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(D){return this.words[0]&D},l.prototype.bincn=function(D){r(typeof D=="number");var N=D%26,W=(D-N)/26,F=1<<N;if(this.length<=W)return this._expand(W+1),this.words[W]|=F,this;for(var j=F,q=W;j!==0&&q<this.length;q++){var te=0|this.words[q];j=(te+=j)>>>26,te&=67108863,this.words[q]=te}return j!==0&&(this.words[q]=j,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(D){var N,W=D<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;if(this.strip(),this.length>1)N=1;else{W&&(D=-D),r(D<=67108863,"Number is too big");var F=0|this.words[0];N=F===D?0:F<D?-1:1}return this.negative!==0?0|-N:N},l.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var N=this.ucmp(D);return this.negative!==0?0|-N:N},l.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var N=0,W=this.length-1;W>=0;W--){var F=0|this.words[W],j=0|D.words[W];if(F!==j){F<j?N=-1:F>j&&(N=1);break}}return N},l.prototype.gtn=function(D){return this.cmpn(D)===1},l.prototype.gt=function(D){return this.cmp(D)===1},l.prototype.gten=function(D){return this.cmpn(D)>=0},l.prototype.gte=function(D){return this.cmp(D)>=0},l.prototype.ltn=function(D){return this.cmpn(D)===-1},l.prototype.lt=function(D){return this.cmp(D)===-1},l.prototype.lten=function(D){return this.cmpn(D)<=0},l.prototype.lte=function(D){return this.cmp(D)<=0},l.prototype.eqn=function(D){return this.cmpn(D)===0},l.prototype.eq=function(D){return this.cmp(D)===0},l.red=function(D){return new R(D)},l.prototype.toRed=function(D){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},l.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(D){return this.red=D,this},l.prototype.forceRed=function(D){return r(!this.red,"Already a number in reduction context"),this._forceRed(D)},l.prototype.redAdd=function(D){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},l.prototype.redIAdd=function(D){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},l.prototype.redSub=function(D){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},l.prototype.redISub=function(D){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},l.prototype.redShl=function(D){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},l.prototype.redMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},l.prototype.redIMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},l.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(D){return r(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var S={k256:null,p224:null,p192:null,p25519:null};function w(D,N){this.name=D,this.p=new l(N,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(D){if(typeof D=="string"){var N=l._prime(D);this.m=N.p,this.prime=N}else r(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}function U(D){R.call(this,D),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var D=new l(null);return D.words=new Array(Math.ceil(this.n/13)),D},w.prototype.ireduce=function(D){var N,W=D;do this.split(W,this.tmp),N=(W=(W=this.imulK(W)).iadd(this.tmp)).bitLength();while(N>this.n);var F=N<this.n?-1:W.ucmp(this.p);return F===0?(W.words[0]=0,W.length=1):F>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},w.prototype.split=function(D,N){D.iushrn(this.n,0,N)},w.prototype.imulK=function(D){return D.imul(this.k)},a(E,w),E.prototype.split=function(D,N){for(var W=4194303,F=Math.min(D.length,9),j=0;j<F;j++)N.words[j]=D.words[j];if(N.length=F,D.length<=9)return D.words[0]=0,void(D.length=1);var q=D.words[9];for(N.words[N.length++]=q&W,j=10;j<D.length;j++){var te=0|D.words[j];D.words[j-10]=(te&W)<<4|q>>>22,q=te}q>>>=22,D.words[j-10]=q,q===0&&D.length>10?D.length-=10:D.length-=9},E.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var N=0,W=0;W<D.length;W++){var F=0|D.words[W];N+=977*F,D.words[W]=67108863&N,N=64*F+(N/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D},a(P,w),a(C,w),a(O,w),O.prototype.imulK=function(D){for(var N=0,W=0;W<D.length;W++){var F=19*(0|D.words[W])+N,j=67108863&F;F>>>=26,D.words[W]=j,N=F}return N!==0&&(D.words[D.length++]=N),D},l._prime=function(D){if(S[D])return S[D];var N;if(D==="k256")N=new E;else if(D==="p224")N=new P;else if(D==="p192")N=new C;else{if(D!=="p25519")throw new Error("Unknown prime "+D);N=new O}return S[D]=N,N},R.prototype._verify1=function(D){r(D.negative===0,"red works only with positives"),r(D.red,"red works only with red numbers")},R.prototype._verify2=function(D,N){r((D.negative|N.negative)==0,"red works only with positives"),r(D.red&&D.red===N.red,"red works only with red numbers")},R.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},R.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},R.prototype.add=function(D,N){this._verify2(D,N);var W=D.add(N);return W.cmp(this.m)>=0&&W.isub(this.m),W._forceRed(this)},R.prototype.iadd=function(D,N){this._verify2(D,N);var W=D.iadd(N);return W.cmp(this.m)>=0&&W.isub(this.m),W},R.prototype.sub=function(D,N){this._verify2(D,N);var W=D.sub(N);return W.cmpn(0)<0&&W.iadd(this.m),W._forceRed(this)},R.prototype.isub=function(D,N){this._verify2(D,N);var W=D.isub(N);return W.cmpn(0)<0&&W.iadd(this.m),W},R.prototype.shl=function(D,N){return this._verify1(D),this.imod(D.ushln(N))},R.prototype.imul=function(D,N){return this._verify2(D,N),this.imod(D.imul(N))},R.prototype.mul=function(D,N){return this._verify2(D,N),this.imod(D.mul(N))},R.prototype.isqr=function(D){return this.imul(D,D.clone())},R.prototype.sqr=function(D){return this.mul(D,D)},R.prototype.sqrt=function(D){if(D.isZero())return D.clone();var N=this.m.andln(3);if(r(N%2==1),N===3){var W=this.m.add(new l(1)).iushrn(2);return this.pow(D,W)}for(var F=this.m.subn(1),j=0;!F.isZero()&&F.andln(1)===0;)j++,F.iushrn(1);r(!F.isZero());var q=new l(1).toRed(this),te=q.redNeg(),ee=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new l(2*Q*Q).toRed(this);this.pow(Q,ee).cmp(te)!==0;)Q.redIAdd(te);for(var J=this.pow(Q,F),K=this.pow(D,F.addn(1).iushrn(1)),Y=this.pow(D,F),ie=j;Y.cmp(q)!==0;){for(var se=Y,ae=0;se.cmp(q)!==0;ae++)se=se.redSqr();r(ae<ie);var ue=this.pow(J,new l(1).iushln(ie-ae-1));K=K.redMul(ue),J=ue.redSqr(),Y=Y.redMul(J),ie=ae}return K},R.prototype.invm=function(D){var N=D._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},R.prototype.pow=function(D,N){if(N.isZero())return new l(1).toRed(this);if(N.cmpn(1)===0)return D.clone();var W=new Array(16);W[0]=new l(1).toRed(this),W[1]=D;for(var F=2;F<W.length;F++)W[F]=this.mul(W[F-1],D);var j=W[0],q=0,te=0,ee=N.bitLength()%26;for(ee===0&&(ee=26),F=N.length-1;F>=0;F--){for(var Q=N.words[F],J=ee-1;J>=0;J--){var K=Q>>J&1;j!==W[0]&&(j=this.sqr(j)),K!==0||q!==0?(q<<=1,q|=K,(++te==4||F===0&&J===0)&&(j=this.mul(j,W[q]),te=0,q=0)):te=0}ee=26}return j},R.prototype.convertTo=function(D){var N=D.umod(this.m);return N===D?N.clone():N},R.prototype.convertFrom=function(D){var N=D.clone();return N.red=null,N},l.mont=function(D){return new U(D)},a(U,R),U.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},U.prototype.convertFrom=function(D){var N=this.imod(D.mul(this.rinv));return N.red=null,N},U.prototype.imul=function(D,N){if(D.isZero()||N.isZero())return D.words[0]=0,D.length=1,D;var W=D.imul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=W.isub(F).iushrn(this.shift),q=j;return j.cmp(this.m)>=0?q=j.isub(this.m):j.cmpn(0)<0&&(q=j.iadd(this.m)),q._forceRed(this)},U.prototype.mul=function(D,N){if(D.isZero()||N.isZero())return new l(0)._forceRed(this);var W=D.mul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=W.isub(F).iushrn(this.shift),q=j;return j.cmp(this.m)>=0?q=j.isub(this.m):j.cmpn(0)<0&&(q=j.iadd(this.m)),q._forceRed(this)},U.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}})(p=t.nmd(p),this)},6204:function(p){"use strict";p.exports=function(s){var t,i,n,r=s.length,a=0;for(t=0;t<r;++t)a+=s[t].length;var l=new Array(a),c=0;for(t=0;t<r;++t){var h=s[t],u=h.length;for(i=0;i<u;++i){var x=l[c++]=new Array(u-1),d=0;for(n=0;n<u;++n)n!==i&&(x[d++]=h[n]);if(1&i){var m=x[1];x[1]=x[0],x[0]=m}}}return l}},6867:function(p,s,t){"use strict";p.exports=function(x,d,m){switch(arguments.length){case 1:return i=[],h(g=x,g,u,!0),i;case 2:return typeof d=="function"?h(x,x,d,!0):function(y,v){return i=[],h(y,v,u,!1),i}(x,d);case 3:return h(x,d,m,!1);default:throw new Error("box-intersect: Invalid arguments")}var g};var i,n=t(1888),r=t(855),a=t(7150);function l(x,d){for(var m=0;m<x;++m)if(!(d[m]<=d[m+x]))return!0;return!1}function c(x,d,m,g){for(var y=0,v=0,_=0,f=x.length;_<f;++_){var S=x[_];if(!l(d,S)){for(var w=0;w<2*d;++w)m[y++]=S[w];g[v++]=_}}return v}function h(x,d,m,g){var y=x.length,v=d.length;if(!(y<=0||v<=0)){var _=x[0].length>>>1;if(!(_<=0)){var f,S=n.mallocDouble(2*_*y),w=n.mallocInt32(y);if((y=c(x,_,S,w))>0){if(_===1&&g)r.init(y),f=r.sweepComplete(_,m,0,y,S,w,0,y,S,w);else{var E=n.mallocDouble(2*_*v),P=n.mallocInt32(v);(v=c(d,_,E,P))>0&&(r.init(y+v),f=_===1?r.sweepBipartite(_,m,0,y,S,w,0,v,E,P):a(_,m,g,y,S,w,v,E,P),n.free(E),n.free(P))}n.free(S),n.free(w)}return f}}}function u(x,d){i.push([x,d])}},2455:function(p,s){"use strict";function t(i){return i?function(n,r,a,l,c,h,u,x,d,m,g){return c-l>d-x?function(y,v,_,f,S,w,E,P,C,O,R){for(var U=2*y,D=f,N=U*f;D<S;++D,N+=U){var W=w[v+N],F=w[v+N+y],j=E[D];e:for(var q=P,te=U*P;q<C;++q,te+=U){var ee=O[v+te],Q=O[v+te+y],J=R[q];if(!(Q<W||F<ee)){for(var K=v+1;K<y;++K){var Y=w[K+N],ie=w[K+y+N],se=O[K+te],ae=O[K+y+te];if(ie<se||ae<Y)continue e}var ue=_(j,J);if(ue!==void 0)return ue}}}}(n,r,a,l,c,h,u,x,d,m,g):function(y,v,_,f,S,w,E,P,C,O,R){for(var U=2*y,D=P,N=U*P;D<C;++D,N+=U){var W=O[v+N],F=O[v+N+y],j=R[D];e:for(var q=f,te=U*f;q<S;++q,te+=U){var ee=w[v+te],Q=w[v+te+y],J=E[q];if(!(F<ee||Q<W)){for(var K=v+1;K<y;++K){var Y=w[K+te],ie=w[K+y+te],se=O[K+N],ae=O[K+y+N];if(ie<se||ae<Y)continue e}var ue=_(J,j);if(ue!==void 0)return ue}}}}(n,r,a,l,c,h,u,x,d,m,g)}:function(n,r,a,l,c,h,u,x,d,m,g,y){return h-c>m-d?l?function(v,_,f,S,w,E,P,C,O,R,U){for(var D=2*v,N=S,W=D*S;N<w;++N,W+=D){var F=E[_+W],j=E[_+W+v],q=P[N];e:for(var te=C,ee=D*C;te<O;++te,ee+=D){var Q=R[_+ee],J=U[te];if(!(Q<=F||j<Q)){for(var K=_+1;K<v;++K){var Y=E[K+W],ie=E[K+v+W],se=R[K+ee],ae=R[K+v+ee];if(ie<se||ae<Y)continue e}var ue=f(J,q);if(ue!==void 0)return ue}}}}(n,r,a,c,h,u,x,d,m,g,y):function(v,_,f,S,w,E,P,C,O,R,U){for(var D=2*v,N=S,W=D*S;N<w;++N,W+=D){var F=E[_+W],j=E[_+W+v],q=P[N];e:for(var te=C,ee=D*C;te<O;++te,ee+=D){var Q=R[_+ee],J=U[te];if(!(Q<F||j<Q)){for(var K=_+1;K<v;++K){var Y=E[K+W],ie=E[K+v+W],se=R[K+ee],ae=R[K+v+ee];if(ie<se||ae<Y)continue e}var ue=f(q,J);if(ue!==void 0)return ue}}}}(n,r,a,c,h,u,x,d,m,g,y):l?function(v,_,f,S,w,E,P,C,O,R,U){for(var D=2*v,N=C,W=D*C;N<O;++N,W+=D){var F=R[_+W],j=U[N];e:for(var q=S,te=D*S;q<w;++q,te+=D){var ee=E[_+te],Q=E[_+te+v],J=P[q];if(!(F<=ee||Q<F)){for(var K=_+1;K<v;++K){var Y=E[K+te],ie=E[K+v+te],se=R[K+W],ae=R[K+v+W];if(ie<se||ae<Y)continue e}var ue=f(j,J);if(ue!==void 0)return ue}}}}(n,r,a,c,h,u,x,d,m,g,y):function(v,_,f,S,w,E,P,C,O,R,U){for(var D=2*v,N=C,W=D*C;N<O;++N,W+=D){var F=R[_+W],j=U[N];e:for(var q=S,te=D*S;q<w;++q,te+=D){var ee=E[_+te],Q=E[_+te+v],J=P[q];if(!(F<ee||Q<F)){for(var K=_+1;K<v;++K){var Y=E[K+te],ie=E[K+v+te],se=R[K+W],ae=R[K+v+W];if(ie<se||ae<Y)continue e}var ue=f(J,j);if(ue!==void 0)return ue}}}}(n,r,a,c,h,u,x,d,m,g,y)}}s.partial=t(!1),s.full=t(!0)},7150:function(p,s,t){"use strict";p.exports=function(D,N,W,F,j,q,te,ee,Q){(function(De,Le){var Be=8*n.log2(Le+1)*(De+1)|0,Ve=n.nextPow2(w*Be);P.length<Ve&&(i.free(P),P=i.mallocInt32(Ve));var Ze=n.nextPow2(E*Be);C.length<Ze&&(i.free(C),C=i.mallocDouble(Ze))})(D,F+te);var J,K=0,Y=2*D;for(O(K++,0,0,F,0,te,W?16:0,-1/0,1/0),W||O(K++,0,0,te,0,F,1,-1/0,1/0);K>0;){var ie=(K-=1)*w,se=P[ie],ae=P[ie+1],ue=P[ie+2],ve=P[ie+3],ye=P[ie+4],de=P[ie+5],pe=K*E,ge=C[pe],ke=C[pe+1],Ee=1&de,me=!!(16&de),oe=j,re=q,fe=ee,Se=Q;if(Ee&&(oe=ee,re=Q,fe=j,Se=q),!(2&de&&ae>=(ue=v(D,se,ae,ue,oe,re,ke))||4&de&&(ae=_(D,se,ae,ue,oe,re,ge))>=ue)){var be=ue-ae,we=ye-ve;if(me){if(D*be*(be+we)<m){if((J=c.scanComplete(D,se,N,ae,ue,oe,re,ve,ye,fe,Se))!==void 0)return J;continue}}else{if(D*Math.min(be,we)<x){if((J=a(D,se,N,Ee,ae,ue,oe,re,ve,ye,fe,Se))!==void 0)return J;continue}if(D*be*we<d){if((J=c.scanBipartite(D,se,N,Ee,ae,ue,oe,re,ve,ye,fe,Se))!==void 0)return J;continue}}var Me=g(D,se,ae,ue,oe,re,ge,ke);if(ae<Me)if(D*(Me-ae)<x){if((J=l(D,se+1,N,ae,Me,oe,re,ve,ye,fe,Se))!==void 0)return J}else if(se===D-2){if((J=Ee?c.sweepBipartite(D,N,ve,ye,fe,Se,ae,Me,oe,re):c.sweepBipartite(D,N,ae,Me,oe,re,ve,ye,fe,Se))!==void 0)return J}else O(K++,se+1,ae,Me,ve,ye,Ee,-1/0,1/0),O(K++,se+1,ve,ye,ae,Me,1^Ee,-1/0,1/0);if(Me<ue){var Ie=h(D,se,ve,ye,fe,Se),Oe=fe[Y*Ie+se],he=y(D,se,Ie,ye,fe,Se,Oe);if(he<ye&&O(K++,se,Me,ue,he,ye,(4|Ee)+(me?16:0),Oe,ke),ve<Ie&&O(K++,se,Me,ue,ve,Ie,(2|Ee)+(me?16:0),ge,Oe),Ie+1===he){if((J=me?U(D,se,N,Me,ue,oe,re,Ie,fe,Se[Ie]):R(D,se,N,Ee,Me,ue,oe,re,Ie,fe,Se[Ie]))!==void 0)return J}else if(Ie<he){var _e;if(me){if(Me<(_e=f(D,se,Me,ue,oe,re,Oe))){var Ae=y(D,se,Me,_e,oe,re,Oe);if(se===D-2){if(Me<Ae&&(J=c.sweepComplete(D,N,Me,Ae,oe,re,Ie,he,fe,Se))!==void 0||Ae<_e&&(J=c.sweepBipartite(D,N,Ae,_e,oe,re,Ie,he,fe,Se))!==void 0)return J}else Me<Ae&&O(K++,se+1,Me,Ae,Ie,he,16,-1/0,1/0),Ae<_e&&(O(K++,se+1,Ae,_e,Ie,he,0,-1/0,1/0),O(K++,se+1,Ie,he,Ae,_e,1,-1/0,1/0))}}else Me<(_e=Ee?S(D,se,Me,ue,oe,re,Oe):f(D,se,Me,ue,oe,re,Oe))&&(se===D-2?J=Ee?c.sweepBipartite(D,N,Ie,he,fe,Se,Me,_e,oe,re):c.sweepBipartite(D,N,Me,_e,oe,re,Ie,he,fe,Se):(O(K++,se+1,Me,_e,Ie,he,Ee,-1/0,1/0),O(K++,se+1,Ie,he,Me,_e,1^Ee,-1/0,1/0)))}}}}};var i=t(1888),n=t(8828),r=t(2455),a=r.partial,l=r.full,c=t(855),h=t(3545),u=t(8105),x=128,d=1<<22,m=1<<22,g=u("!(lo>=p0)&&!(p1>=hi)"),y=u("lo===p0"),v=u("lo<p0"),_=u("hi<=p0"),f=u("lo<=p0&&p0<=hi"),S=u("lo<p0&&p0<=hi"),w=6,E=2,P=i.mallocInt32(1024),C=i.mallocDouble(1024);function O(D,N,W,F,j,q,te,ee,Q){var J=w*D;P[J]=N,P[J+1]=W,P[J+2]=F,P[J+3]=j,P[J+4]=q,P[J+5]=te;var K=E*D;C[K]=ee,C[K+1]=Q}function R(D,N,W,F,j,q,te,ee,Q,J,K){var Y=2*D,ie=Q*Y,se=J[ie+N];e:for(var ae=j,ue=j*Y;ae<q;++ae,ue+=Y){var ve=te[ue+N],ye=te[ue+N+D];if(!(se<ve||ye<se||F&&se===ve)){for(var de,pe=ee[ae],ge=N+1;ge<D;++ge){ve=te[ue+ge],ye=te[ue+ge+D];var ke=J[ie+ge],Ee=J[ie+ge+D];if(ye<ke||Ee<ve)continue e}if((de=F?W(K,pe):W(pe,K))!==void 0)return de}}}function U(D,N,W,F,j,q,te,ee,Q,J){var K=2*D,Y=ee*K,ie=Q[Y+N];e:for(var se=F,ae=F*K;se<j;++se,ae+=K){var ue=te[se];if(ue!==J){var ve=q[ae+N],ye=q[ae+N+D];if(!(ie<ve||ye<ie)){for(var de=N+1;de<D;++de){ve=q[ae+de],ye=q[ae+de+D];var pe=Q[Y+de],ge=Q[Y+de+D];if(ye<pe||ge<ve)continue e}var ke=W(ue,J);if(ke!==void 0)return ke}}}}},3545:function(p,s,t){"use strict";p.exports=function(a,l,c,h,u,x){if(h<=c+1)return c;for(var d=c,m=h,g=h+c>>>1,y=2*a,v=g,_=u[y*g+l];d<m;){if(m-d<n){r(a,l,d,m,u,x),_=u[y*g+l];break}var f=m-d,S=Math.random()*f+d|0,w=u[y*S+l],E=Math.random()*f+d|0,P=u[y*E+l],C=Math.random()*f+d|0,O=u[y*C+l];w<=P?O>=P?(v=E,_=P):w>=O?(v=S,_=w):(v=C,_=O):P>=O?(v=E,_=P):O>=w?(v=S,_=w):(v=C,_=O);for(var R=y*(m-1),U=y*v,D=0;D<y;++D,++R,++U){var N=u[R];u[R]=u[U],u[U]=N}var W=x[m-1];for(x[m-1]=x[v],x[v]=W,R=y*(m-1),U=y*(v=i(a,l,d,m-1,u,x,_)),D=0;D<y;++D,++R,++U)N=u[R],u[R]=u[U],u[U]=N;if(W=x[m-1],x[m-1]=x[v],x[v]=W,g<v){for(m=v-1;d<m&&u[y*(m-1)+l]===_;)m-=1;m+=1}else{if(!(v<g))break;for(d=v+1;d<m&&u[y*d+l]===_;)d+=1}}return i(a,l,c,g,u,x,u[y*g+l])};var i=t(8105)("lo<p0"),n=8;function r(a,l,c,h,u,x){for(var d=2*a,m=d*(c+1)+l,g=c+1;g<h;++g,m+=d)for(var y=u[m],v=g,_=d*(g-1);v>c&&u[_+l]>y;--v,_-=d){for(var f=_,S=_+d,w=0;w<d;++w,++f,++S){var E=u[f];u[f]=u[S],u[S]=E}var P=x[v];x[v]=x[v-1],x[v-1]=P}}},8105:function(p){"use strict";p.exports=function(t){return s[t]};var s={"lo===p0":function(t,i,n,r,a,l,c){for(var h=2*t,u=h*n,x=u,d=n,m=i,g=n;r>g;++g,u+=h)if(a[u+m]===c)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var v=a[u+y];a[u+y]=a[x],a[x++]=v}var _=l[g];l[g]=l[d],l[d++]=_}return d},"lo<p0":function(t,i,n,r,a,l,c){for(var h=2*t,u=h*n,x=u,d=n,m=i,g=n;r>g;++g,u+=h)if(a[u+m]<c)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var v=a[u+y];a[u+y]=a[x],a[x++]=v}var _=l[g];l[g]=l[d],l[d++]=_}return d},"lo<=p0":function(t,i,n,r,a,l,c){for(var h=2*t,u=h*n,x=u,d=n,m=t+i,g=n;r>g;++g,u+=h)if(a[u+m]<=c)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var v=a[u+y];a[u+y]=a[x],a[x++]=v}var _=l[g];l[g]=l[d],l[d++]=_}return d},"hi<=p0":function(t,i,n,r,a,l,c){for(var h=2*t,u=h*n,x=u,d=n,m=t+i,g=n;r>g;++g,u+=h)if(a[u+m]<=c)if(d===g)d+=1,x+=h;else{for(var y=0;h>y;++y){var v=a[u+y];a[u+y]=a[x],a[x++]=v}var _=l[g];l[g]=l[d],l[d++]=_}return d},"lo<p0&&p0<=hi":function(t,i,n,r,a,l,c){for(var h=2*t,u=h*n,x=u,d=n,m=i,g=t+i,y=n;r>y;++y,u+=h){var v=a[u+m],_=a[u+g];if(v<c&&c<=_)if(d===y)d+=1,x+=h;else{for(var f=0;h>f;++f){var S=a[u+f];a[u+f]=a[x],a[x++]=S}var w=l[y];l[y]=l[d],l[d++]=w}}return d},"lo<=p0&&p0<=hi":function(t,i,n,r,a,l,c){for(var h=2*t,u=h*n,x=u,d=n,m=i,g=t+i,y=n;r>y;++y,u+=h){var v=a[u+m],_=a[u+g];if(v<=c&&c<=_)if(d===y)d+=1,x+=h;else{for(var f=0;h>f;++f){var S=a[u+f];a[u+f]=a[x],a[x++]=S}var w=l[y];l[y]=l[d],l[d++]=w}}return d},"!(lo>=p0)&&!(p1>=hi)":function(t,i,n,r,a,l,c,h){for(var u=2*t,x=u*n,d=x,m=n,g=i,y=t+i,v=n;r>v;++v,x+=u){var _=a[x+g],f=a[x+y];if(!(_>=c||h>=f))if(m===v)m+=1,d+=u;else{for(var S=0;u>S;++S){var w=a[x+S];a[x+S]=a[d],a[d++]=w}var E=l[v];l[v]=l[m],l[m++]=E}}return m}}},1811:function(p){"use strict";p.exports=function(u,x){x<=4*s?t(0,x-1,u):h(0,x-1,u)};var s=32;function t(u,x,d){for(var m=2*(u+1),g=u+1;g<=x;++g){for(var y=d[m++],v=d[m++],_=g,f=m-2;_-- >u;){var S=d[f-2],w=d[f-1];if(S<y||S===y&&w<v)break;d[f]=S,d[f+1]=w,f-=2}d[f]=y,d[f+1]=v}}function i(u,x,d){x*=2;var m=d[u*=2],g=d[u+1];d[u]=d[x],d[u+1]=d[x+1],d[x]=m,d[x+1]=g}function n(u,x,d){x*=2,d[u*=2]=d[x],d[u+1]=d[x+1]}function r(u,x,d,m){x*=2,d*=2;var g=m[u*=2],y=m[u+1];m[u]=m[x],m[u+1]=m[x+1],m[x]=m[d],m[x+1]=m[d+1],m[d]=g,m[d+1]=y}function a(u,x,d,m,g){x*=2,g[u*=2]=g[x],g[x]=d,g[u+1]=g[x+1],g[x+1]=m}function l(u,x,d){x*=2;var m=d[u*=2],g=d[x];return!(m<g)&&(m!==g||d[u+1]>d[x+1])}function c(u,x,d,m){var g=m[u*=2];return g<x||g===x&&m[u+1]<d}function h(u,x,d){var m=(x-u+1)/6|0,g=u+m,y=x-m,v=u+x>>1,_=v-m,f=v+m,S=g,w=_,E=v,P=f,C=y,O=u+1,R=x-1,U=0;l(S,w,d)&&(U=S,S=w,w=U),l(P,C,d)&&(U=P,P=C,C=U),l(S,E,d)&&(U=S,S=E,E=U),l(w,E,d)&&(U=w,w=E,E=U),l(S,P,d)&&(U=S,S=P,P=U),l(E,P,d)&&(U=E,E=P,P=U),l(w,C,d)&&(U=w,w=C,C=U),l(w,E,d)&&(U=w,w=E,E=U),l(P,C,d)&&(U=P,P=C,C=U);for(var D=d[2*w],N=d[2*w+1],W=d[2*P],F=d[2*P+1],j=2*S,q=2*E,te=2*C,ee=2*g,Q=2*v,J=2*y,K=0;K<2;++K){var Y=d[j+K],ie=d[q+K],se=d[te+K];d[ee+K]=Y,d[Q+K]=ie,d[J+K]=se}n(_,u,d),n(f,x,d);for(var ae=O;ae<=R;++ae)if(c(ae,D,N,d))ae!==O&&i(ae,O,d),++O;else if(!c(ae,W,F,d))for(;;){if(c(R,W,F,d)){c(R,D,N,d)?(r(ae,O,R,d),++O,--R):(i(ae,R,d),--R);break}if(--R<ae)break}a(u,O-1,D,N,d),a(x,R+1,W,F,d),O-2-u<=s?t(u,O-2,d):h(u,O-2,d),x-(R+2)<=s?t(R+2,x,d):h(R+2,x,d),R-O<=s?t(O,R,d):h(O,R,d)}},855:function(p,s,t){"use strict";p.exports={init:function(_){var f=n.nextPow2(_);c.length<f&&(i.free(c),c=i.mallocInt32(f)),h.length<f&&(i.free(h),h=i.mallocInt32(f)),u.length<f&&(i.free(u),u=i.mallocInt32(f)),x.length<f&&(i.free(x),x=i.mallocInt32(f)),d.length<f&&(i.free(d),d=i.mallocInt32(f)),m.length<f&&(i.free(m),m=i.mallocInt32(f));var S=8*f;g.length<S&&(i.free(g),g=i.mallocDouble(S))},sweepBipartite:function(_,f,S,w,E,P,C,O,R,U){for(var D=0,N=2*_,W=_-1,F=N-1,j=S;j<w;++j){var q=P[j],te=N*j;g[D++]=E[te+W],g[D++]=-(q+1),g[D++]=E[te+F],g[D++]=q}for(j=C;j<O;++j){q=U[j]+a;var ee=N*j;g[D++]=R[ee+W],g[D++]=-q,g[D++]=R[ee+F],g[D++]=q}var Q=D>>>1;r(g,Q);var J=0,K=0;for(j=0;j<Q;++j){var Y=0|g[2*j+1];if(Y>=a)y(u,x,K--,Y=Y-a|0);else if(Y>=0)y(c,h,J--,Y);else if(Y<=-a){Y=-Y-a|0;for(var ie=0;ie<J;++ie)if((se=f(c[ie],Y))!==void 0)return se;v(u,x,K++,Y)}else{for(Y=-Y-1|0,ie=0;ie<K;++ie){var se;if((se=f(Y,u[ie]))!==void 0)return se}v(c,h,J++,Y)}}},sweepComplete:function(_,f,S,w,E,P,C,O,R,U){for(var D=0,N=2*_,W=_-1,F=N-1,j=S;j<w;++j){var q=P[j]+1<<1,te=N*j;g[D++]=E[te+W],g[D++]=-q,g[D++]=E[te+F],g[D++]=q}for(j=C;j<O;++j){q=U[j]+1<<1;var ee=N*j;g[D++]=R[ee+W],g[D++]=1|-q,g[D++]=R[ee+F],g[D++]=1|q}var Q=D>>>1;r(g,Q);var J=0,K=0,Y=0;for(j=0;j<Q;++j){var ie=0|g[2*j+1],se=1&ie;if(j<Q-1&&ie>>1==g[2*j+3]>>1&&(se=2,j+=1),ie<0){for(var ae=-(ie>>1)-1,ue=0;ue<Y;++ue)if((ve=f(d[ue],ae))!==void 0)return ve;if(se!==0){for(ue=0;ue<J;++ue)if((ve=f(c[ue],ae))!==void 0)return ve}if(se!==1)for(ue=0;ue<K;++ue){var ve;if((ve=f(u[ue],ae))!==void 0)return ve}se===0?v(c,h,J++,ae):se===1?v(u,x,K++,ae):se===2&&v(d,m,Y++,ae)}else ae=(ie>>1)-1,se===0?y(c,h,J--,ae):se===1?y(u,x,K--,ae):se===2&&y(d,m,Y--,ae)}},scanBipartite:function(_,f,S,w,E,P,C,O,R,U,D,N){var W=0,F=2*_,j=f,q=f+_,te=1,ee=1;w?ee=a:te=a;for(var Q=E;Q<P;++Q){var J=Q+te,K=F*Q;g[W++]=C[K+j],g[W++]=-J,g[W++]=C[K+q],g[W++]=J}for(Q=R;Q<U;++Q){J=Q+ee;var Y=F*Q;g[W++]=D[Y+j],g[W++]=-J}var ie=W>>>1;r(g,ie);var se=0;for(Q=0;Q<ie;++Q){var ae=0|g[2*Q+1];if(ae<0){var ue=!1;if((J=-ae)>=a?(ue=!w,J-=a):(ue=!!w,J-=1),ue)v(c,h,se++,J);else{var ve=N[J],ye=F*J,de=D[ye+f+1],pe=D[ye+f+1+_];e:for(var ge=0;ge<se;++ge){var ke=c[ge],Ee=F*ke;if(!(pe<C[Ee+f+1]||C[Ee+f+1+_]<de)){for(var me=f+2;me<_;++me)if(D[ye+me+_]<C[Ee+me]||C[Ee+me+_]<D[ye+me])continue e;var oe,re=O[ke];if((oe=w?S(ve,re):S(re,ve))!==void 0)return oe}}}}else y(c,h,se--,ae-te)}},scanComplete:function(_,f,S,w,E,P,C,O,R,U,D){for(var N=0,W=2*_,F=f,j=f+_,q=w;q<E;++q){var te=q+a,ee=W*q;g[N++]=P[ee+F],g[N++]=-te,g[N++]=P[ee+j],g[N++]=te}for(q=O;q<R;++q){te=q+1;var Q=W*q;g[N++]=U[Q+F],g[N++]=-te}var J=N>>>1;r(g,J);var K=0;for(q=0;q<J;++q){var Y=0|g[2*q+1];if(Y<0)if((te=-Y)>=a)c[K++]=te-a;else{var ie=D[te-=1],se=W*te,ae=U[se+f+1],ue=U[se+f+1+_];e:for(var ve=0;ve<K;++ve){var ye=c[ve],de=C[ye];if(de===ie)break;var pe=W*ye;if(!(ue<P[pe+f+1]||P[pe+f+1+_]<ae)){for(var ge=f+2;ge<_;++ge)if(U[se+ge+_]<P[pe+ge]||P[pe+ge+_]<U[se+ge])continue e;var ke=S(de,ie);if(ke!==void 0)return ke}}}else{for(te=Y-a,ve=K-1;ve>=0;--ve)if(c[ve]===te){for(ge=ve+1;ge<K;++ge)c[ge-1]=c[ge];break}--K}}}};var i=t(1888),n=t(8828),r=t(1811),a=1<<28,l=1024,c=i.mallocInt32(l),h=i.mallocInt32(l),u=i.mallocInt32(l),x=i.mallocInt32(l),d=i.mallocInt32(l),m=i.mallocInt32(l),g=i.mallocDouble(8192);function y(_,f,S,w){var E=f[w],P=_[S-1];_[E]=P,f[P]=E}function v(_,f,S,w){_[S]=w,f[w]=S}},2538:function(p,s,t){"use strict";var i=t(8902),n=t(5542),r=t(2272),a=t(5023);function l(u){return[Math.min(u[0],u[1]),Math.max(u[0],u[1])]}function c(u,x){return u[0]-x[0]||u[1]-x[1]}function h(u,x,d){return x in u?u[x]:d}p.exports=function(u,x,d){Array.isArray(x)?(d=d||{},x=x||[]):(d=x||{},x=[]);var m=!!h(d,"delaunay",!0),g=!!h(d,"interior",!0),y=!!h(d,"exterior",!0),v=!!h(d,"infinity",!1);if(!g&&!y||u.length===0)return[];var _=i(u,x);if(m||g!==y||v){for(var f=n(u.length,function(E){return E.map(l).sort(c)}(x)),S=0;S<_.length;++S){var w=_[S];f.addTriangle(w[0],w[1],w[2])}return m&&r(u,f),y?g?v?a(f,0,v):f.cells():a(f,1,v):a(f,-1)}return _}},2272:function(p,s,t){"use strict";var i=t(2646)[4];function n(r,a,l,c,h,u){var x=a.opposite(c,h);if(!(x<0)){if(h<c){var d=c;c=h,h=d,d=u,u=x,x=d}a.isConstraint(c,h)||i(r[c],r[h],r[u],r[x])<0&&l.push(c,h)}}t(2478),p.exports=function(r,a){for(var l=[],c=r.length,h=a.stars,u=0;u<c;++u)for(var x=h[u],d=1;d<x.length;d+=2)if(!((v=x[d])<u||a.isConstraint(u,v))){for(var m=x[d-1],g=-1,y=1;y<x.length;y+=2)if(x[y-1]===v){g=x[y];break}g<0||i(r[u],r[v],r[m],r[g])<0&&l.push(u,v)}for(;l.length>0;){for(var v=l.pop(),_=(m=-1,g=-1,x=h[u=l.pop()],1);_<x.length;_+=2){var f=x[_-1],S=x[_];f===v?g=S:S===v&&(m=f)}m<0||g<0||i(r[u],r[v],r[m],r[g])>=0||(a.flip(u,v),n(r,a,l,m,u,g),n(r,a,l,u,g,m),n(r,a,l,g,v,m),n(r,a,l,v,m,g))}}},5023:function(p,s,t){"use strict";var i,n=t(2478);function r(l,c,h,u,x,d,m){this.cells=l,this.neighbor=c,this.flags=u,this.constraint=h,this.active=x,this.next=d,this.boundary=m}function a(l,c){return l[0]-c[0]||l[1]-c[1]||l[2]-c[2]}p.exports=function(l,c,h){var u=function(C,O){for(var R=C.cells(),U=R.length,D=0;D<U;++D){var N=(Y=R[D])[0],W=Y[1],F=Y[2];W<F?W<N&&(Y[0]=W,Y[1]=F,Y[2]=N):F<N&&(Y[0]=F,Y[1]=N,Y[2]=W)}R.sort(a);var j=new Array(U);for(D=0;D<j.length;++D)j[D]=0;var q=[],te=[],ee=new Array(3*U),Q=new Array(3*U),J=null;O&&(J=[]);var K=new r(R,ee,Q,j,q,te,J);for(D=0;D<U;++D)for(var Y=R[D],ie=0;ie<3;++ie){N=Y[ie],W=Y[(ie+1)%3];var se=ee[3*D+ie]=K.locate(W,N,C.opposite(W,N)),ae=Q[3*D+ie]=C.isConstraint(N,W);se<0&&(ae?te.push(D):(q.push(D),j[D]=1),O&&J.push([W,N,-1]))}return K}(l,h);if(c===0)return h?u.cells.concat(u.boundary):u.cells;for(var x=1,d=u.active,m=u.next,g=u.flags,y=u.cells,v=u.constraint,_=u.neighbor;d.length>0||m.length>0;){for(;d.length>0;){var f=d.pop();if(g[f]!==-x){g[f]=x,y[f];for(var S=0;S<3;++S){var w=_[3*f+S];w>=0&&g[w]===0&&(v[3*f+S]?m.push(w):(d.push(w),g[w]=x))}}}var E=m;m=d,d=E,m.length=0,x=-x}var P=function(C,O,R){for(var U=0,D=0;D<C.length;++D)O[D]===R&&(C[U++]=C[D]);return C.length=U,C}(y,g,c);return h?P.concat(u.boundary):P},r.prototype.locate=(i=[0,0,0],function(l,c,h){var u=l,x=c,d=h;return c<h?c<l&&(u=c,x=h,d=l):h<l&&(u=h,x=l,d=c),u<0?-1:(i[0]=u,i[1]=x,i[2]=d,n.eq(this.cells,i,a))})},8902:function(p,s,t){"use strict";var i=t(2478),n=t(3250)[3];function r(m,g,y,v,_){this.a=m,this.b=g,this.idx=y,this.lowerIds=v,this.upperIds=_}function a(m,g,y,v){this.a=m,this.b=g,this.type=y,this.idx=v}function l(m,g){var y=m.a[0]-g.a[0]||m.a[1]-g.a[1]||m.type-g.type;return y||(m.type!==0&&(y=n(m.a,m.b,g.b))?y:m.idx-g.idx)}function c(m,g){return n(m.a,m.b,g)}function h(m,g,y,v,_){for(var f=i.lt(g,v,c),S=i.gt(g,v,c),w=f;w<S;++w){for(var E=g[w],P=E.lowerIds,C=P.length;C>1&&n(y[P[C-2]],y[P[C-1]],v)>0;)m.push([P[C-1],P[C-2],_]),C-=1;P.length=C,P.push(_);var O=E.upperIds;for(C=O.length;C>1&&n(y[O[C-2]],y[O[C-1]],v)<0;)m.push([O[C-2],O[C-1],_]),C-=1;O.length=C,O.push(_)}}function u(m,g){var y;return(y=m.a[0]<g.a[0]?n(m.a,m.b,g.a):n(g.b,g.a,m.a))?y:(y=g.b[0]<m.b[0]?n(m.a,m.b,g.b):n(g.b,g.a,m.b))||m.idx-g.idx}function x(m,g,y){var v=i.le(m,y,u),_=m[v],f=_.upperIds,S=f[f.length-1];_.upperIds=[S],m.splice(v+1,0,new r(y.a,y.b,y.idx,[S],f))}function d(m,g,y){var v=y.a;y.a=y.b,y.b=v;var _=i.eq(m,y,u),f=m[_];m[_-1].upperIds=f.upperIds,m.splice(_,1)}p.exports=function(m,g){for(var y=m.length,v=g.length,_=[],f=0;f<y;++f)_.push(new a(m[f],null,0,f));for(f=0;f<v;++f){var S=g[f],w=m[S[0]],E=m[S[1]];w[0]<E[0]?_.push(new a(w,E,2,f),new a(E,w,1,f)):w[0]>E[0]&&_.push(new a(E,w,2,f),new a(w,E,1,f))}_.sort(l);for(var P=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),C=[new r([P,1],[P,0],-1,[],[],[],[])],O=[],R=(f=0,_.length);f<R;++f){var U=_[f],D=U.type;D===0?h(O,C,m,U.a,U.idx):D===2?x(C,0,U):d(C,0,U)}return O}},5542:function(p,s,t){"use strict";var i=t(2478);function n(l,c){this.stars=l,this.edges=c}p.exports=function(l,c){for(var h=new Array(l),u=0;u<l;++u)h[u]=[];return new n(h,c)};var r=n.prototype;function a(l,c,h){for(var u=1,x=l.length;u<x;u+=2)if(l[u-1]===c&&l[u]===h)return l[u-1]=l[x-2],l[u]=l[x-1],void(l.length=x-2)}r.isConstraint=function(){var l=[0,0];function c(h,u){return h[0]-u[0]||h[1]-u[1]}return function(h,u){return l[0]=Math.min(h,u),l[1]=Math.max(h,u),i.eq(this.edges,l,c)>=0}}(),r.removeTriangle=function(l,c,h){var u=this.stars;a(u[l],c,h),a(u[c],h,l),a(u[h],l,c)},r.addTriangle=function(l,c,h){var u=this.stars;u[l].push(c,h),u[c].push(h,l),u[h].push(l,c)},r.opposite=function(l,c){for(var h=this.stars[c],u=1,x=h.length;u<x;u+=2)if(h[u]===l)return h[u-1];return-1},r.flip=function(l,c){var h=this.opposite(l,c),u=this.opposite(c,l);this.removeTriangle(l,c,h),this.removeTriangle(c,l,u),this.addTriangle(l,u,h),this.addTriangle(c,h,u)},r.edges=function(){for(var l=this.stars,c=[],h=0,u=l.length;h<u;++h)for(var x=l[h],d=0,m=x.length;d<m;d+=2)c.push([x[d],x[d+1]]);return c},r.cells=function(){for(var l=this.stars,c=[],h=0,u=l.length;h<u;++h)for(var x=l[h],d=0,m=x.length;d<m;d+=2){var g=x[d],y=x[d+1];h<Math.min(g,y)&&c.push([h,g,y])}return c}},2419:function(p){"use strict";p.exports=function(s){for(var t=1,i=1;i<s.length;++i)for(var n=0;n<i;++n)if(s[i]<s[n])t=-t;else if(s[n]===s[i])return 0;return t}},3628:function(p,s,t){"use strict";var i=t(1338),n=t(727);function r(c,h){for(var u=0,x=c.length,d=0;d<x;++d)u+=c[d]*h[d];return u}function a(c){var h=c.length;if(h===0)return[];c[0].length;var u=i([c.length+1,c.length+1],1),x=i([c.length+1],1);u[h][h]=0;for(var d=0;d<h;++d){for(var m=0;m<=d;++m)u[m][d]=u[d][m]=2*r(c[d],c[m]);x[d]=r(c[d],c[d])}var g=n(u,x),y=0,v=g[h+1];for(d=0;d<v.length;++d)y+=v[d];var _=new Array(h);for(d=0;d<h;++d){v=g[d];var f=0;for(m=0;m<v.length;++m)f+=v[m];_[d]=f/y}return _}function l(c){if(c.length===0)return[];for(var h=c[0].length,u=i([h]),x=a(c),d=0;d<c.length;++d)for(var m=0;m<h;++m)u[m]+=c[d][m]*x[d];return u}l.barycenetric=a,p.exports=l},6037:function(p,s,t){p.exports=function(n){for(var r=i(n),a=0,l=0;l<n.length;++l)for(var c=n[l],h=0;h<r.length;++h)a+=Math.pow(c[h]-r[h],2);return Math.sqrt(a/n.length)};var i=t(3628)},332:function(p,s,t){"use strict";p.exports=function(S,w,E){var P;if(E){P=w;for(var C=new Array(w.length),O=0;O<w.length;++O){var R=w[O];C[O]=[R[0],R[1],E[O]]}w=C}for(var U=function(D,N,W){var F=g(D,[],m(D));return _(N,F,W),!!F}(S,w,!!E);f(S,w,!!E);)U=!0;if(E&&U)for(P.length=0,E.length=0,O=0;O<w.length;++O)R=w[O],P.push([R[0],R[1]]),E.push(R[2]);return U};var i=t(1755),n=t(6867),r=t(1125),a=t(7842),l=t(1318),c=t(946),h=t(5838),u=t(1278),x=t(3637);function d(S){var w=c(S);return[u(w,-1/0),u(w,1/0)]}function m(S){for(var w=new Array(S.length),E=0;E<S.length;++E){var P=S[E];w[E]=[u(P[0],-1/0),u(P[1],-1/0),u(P[0],1/0),u(P[1],1/0)]}return w}function g(S,w,E){for(var P=w.length,C=new i(P),O=[],R=0;R<w.length;++R){var U=w[R],D=d(U[0]),N=d(U[1]);O.push([u(D[0],-1/0),u(N[0],-1/0),u(D[1],1/0),u(N[1],1/0)])}n(O,function(te,ee){C.link(te,ee)});var W=!0,F=new Array(P);for(R=0;R<P;++R)(q=C.find(R))!==R&&(W=!1,S[q]=[Math.min(S[R][0],S[q][0]),Math.min(S[R][1],S[q][1])]);if(W)return null;var j=0;for(R=0;R<P;++R){var q;(q=C.find(R))===R?(F[R]=j,S[j++]=S[R]):F[R]=-1}for(S.length=j,R=0;R<P;++R)F[R]<0&&(F[R]=F[C.find(R)]);return F}function y(S,w){return S[0]-w[0]||S[1]-w[1]}function v(S,w){return S[0]-w[0]||S[1]-w[1]||(S[2]<w[2]?-1:S[2]>w[2]?1:0)}function _(S,w,E){if(S.length!==0){if(w)for(var P=0;P<S.length;++P){var C=w[(R=S[P])[0]],O=w[R[1]];R[0]=Math.min(C,O),R[1]=Math.max(C,O)}else for(P=0;P<S.length;++P){var R;C=(R=S[P])[0],O=R[1],R[0]=Math.min(C,O),R[1]=Math.max(C,O)}E?S.sort(v):S.sort(y);var U=1;for(P=1;P<S.length;++P){var D=S[P-1],N=S[P];(N[0]!==D[0]||N[1]!==D[1]||E&&N[2]!==D[2])&&(S[U++]=N)}S.length=U}}function f(S,w,E){var P=function(D,N){for(var W=new Array(N.length),F=0;F<N.length;++F){var j=N[F],q=D[j[0]],te=D[j[1]];W[F]=[u(Math.min(q[0],te[0]),-1/0),u(Math.min(q[1],te[1]),-1/0),u(Math.max(q[0],te[0]),1/0),u(Math.max(q[1],te[1]),1/0)]}return W}(S,w),C=function(D,N,W){var F=[];return n(W,function(j,q){var te=N[j],ee=N[q];if(te[0]!==ee[0]&&te[0]!==ee[1]&&te[1]!==ee[0]&&te[1]!==ee[1]){var Q=D[te[0]],J=D[te[1]],K=D[ee[0]],Y=D[ee[1]];r(Q,J,K,Y)&&F.push([j,q])}}),F}(S,w,P),O=function(D,N,W,F){var j=[];return n(W,F,function(q,te){var ee=N[q];if(ee[0]!==te&&ee[1]!==te){var Q=D[te],J=D[ee[0]],K=D[ee[1]];r(J,K,Q,Q)&&j.push([q,te])}}),j}(S,w,P,m(S)),R=function(D,N,W,F,j){var q,te,ee=D.map(function(oe){return[a(oe[0]),a(oe[1])]});for(q=0;q<W.length;++q){var Q=W[q];te=Q[0];var J=Q[1],K=N[te],Y=N[J],ie=x(h(D[K[0]]),h(D[K[1]]),h(D[Y[0]]),h(D[Y[1]]));if(ie){var se=D.length;D.push([c(ie[0]),c(ie[1])]),ee.push(ie),F.push([te,se],[J,se])}}for(F.sort(function(oe,re){if(oe[0]!==re[0])return oe[0]-re[0];var fe=ee[oe[1]],Se=ee[re[1]];return l(fe[0],Se[0])||l(fe[1],Se[1])}),q=F.length-1;q>=0;--q){var ae=N[te=(Ee=F[q])[0]],ue=ae[0],ve=ae[1],ye=D[ue],de=D[ve];if((ye[0]-de[0]||ye[1]-de[1])<0){var pe=ue;ue=ve,ve=pe}ae[0]=ue;var ge,ke=ae[1]=Ee[1];for(j&&(ge=ae[2]);q>0&&F[q-1][0]===te;){var Ee,me=(Ee=F[--q])[1];j?N.push([ke,me,ge]):N.push([ke,me]),ke=me}j?N.push([ke,ve,ge]):N.push([ke,ve])}return ee}(S,w,C,O,E),U=g(S,R);return _(w,U,E),!!U||C.length>0||O.length>0}},3637:function(p,s,t){"use strict";p.exports=function(x,d,m,g){var y=l(d,x),v=l(g,m),_=u(y,v);if(a(_)===0)return null;var f=u(v,l(x,m)),S=n(f,_),w=h(y,S);return c(x,w)};var i=t(6504),n=t(8697),r=t(5572),a=t(7721),l=t(544),c=t(2653),h=t(8987);function u(x,d){return r(i(x[0],d[1]),i(x[1],d[0]))}},3642:function(p){p.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(p,s,t){"use strict";var i=t(3642),n=t(395);function r(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function a(c){for(var h,u="#",x=0;x<3;++x)u+=("00"+(h=(h=c[x]).toString(16))).substr(h.length);return u}function l(c){return"rgba("+c.join(",")+")"}p.exports=function(c){var h,u,x,d,m,g,y,v,_,f;if(c||(c={}),v=(c.nshades||72)-1,y=c.format||"hex",(g=c.colormap)||(g="jet"),typeof g=="string"){if(g=g.toLowerCase(),!i[g])throw Error(g+" not a supported colorscale");m=i[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);m=g.slice()}if(m.length>v+1)throw new Error(g+" map requires nshades to be at least size "+m.length);_=Array.isArray(c.alpha)?c.alpha.length!==2?[1,1]:c.alpha.slice():typeof c.alpha=="number"?[c.alpha,c.alpha]:[1,1],h=m.map(function(C){return Math.round(C.index*v)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var S=m.map(function(C,O){var R=m[O].index,U=m[O].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=_[0]+(_[1]-_[0])*R),U}),w=[];for(f=0;f<h.length-1;++f){d=h[f+1]-h[f],u=S[f],x=S[f+1];for(var E=0;E<d;E++){var P=E/d;w.push([Math.round(n(u[0],x[0],P)),Math.round(n(u[1],x[1],P)),Math.round(n(u[2],x[2],P)),n(u[3],x[3],P)])}}return w.push(m[m.length-1].rgb.concat(_[1])),y==="hex"?w=w.map(a):y==="rgbaString"?w=w.map(l):y==="float"&&(w=w.map(r)),w}},3140:function(p,s,t){"use strict";p.exports=function(h,u,x,d){var m=i(u,x,d);if(m===0){var g=n(i(h,u,x)),y=n(i(h,u,d));if(g===y){if(g===0){var v=c(h,u,x);return v===c(h,u,d)?0:v?1:-1}return 0}return y===0?g>0||c(h,u,d)?-1:1:g===0?y>0||c(h,u,x)?1:-1:n(y-g)}var _=i(h,u,x);return _>0?m>0&&i(h,u,d)>0?1:-1:_<0?m>0||i(h,u,d)>0?1:-1:i(h,u,d)>0||c(h,u,x)?1:-1};var i=t(3250),n=t(8572),r=t(9362),a=t(5382),l=t(8210);function c(h,u,x){var d=r(h[0],-u[0]),m=r(h[1],-u[1]),g=r(x[0],-u[0]),y=r(x[1],-u[1]),v=l(a(d,g),a(m,y));return v[v.length-1]>=0}},8572:function(p){"use strict";p.exports=function(s){return s<0?-1:s>0?1:0}},8507:function(p){p.exports=function(i,n){var r=i.length,a=i.length-n.length;if(a)return a;switch(r){case 0:return 0;case 1:return i[0]-n[0];case 2:return i[0]+i[1]-n[0]-n[1]||s(i[0],i[1])-s(n[0],n[1]);case 3:var l=i[0]+i[1],c=n[0]+n[1];if(a=l+i[2]-(c+n[2]))return a;var h=s(i[0],i[1]),u=s(n[0],n[1]);return s(h,i[2])-s(u,n[2])||s(h+i[2],l)-s(u+n[2],c);case 4:var x=i[0],d=i[1],m=i[2],g=i[3],y=n[0],v=n[1],_=n[2],f=n[3];return x+d+m+g-(y+v+_+f)||s(x,d,m,g)-s(y,v,_,f,y)||s(x+d,x+m,x+g,d+m,d+g,m+g)-s(y+v,y+_,y+f,v+_,v+f,_+f)||s(x+d+m,x+d+g,x+m+g,d+m+g)-s(y+v+_,y+v+f,y+_+f,v+_+f);default:for(var S=i.slice().sort(t),w=n.slice().sort(t),E=0;E<r;++E)if(a=S[E]-w[E])return a;return 0}};var s=Math.min;function t(i,n){return i-n}},3788:function(p,s,t){"use strict";var i=t(8507),n=t(2419);p.exports=function(r,a){return i(r,a)||n(r)-n(a)}},7352:function(p,s,t){"use strict";var i=t(5721),n=t(4750),r=t(2690);p.exports=function(a){var l=a.length;if(l===0)return[];if(l===1)return[[0]];var c=a[0].length;return c===0?[]:c===1?i(a):c===2?n(a):r(a,c)}},5721:function(p){"use strict";p.exports=function(s){for(var t=0,i=0,n=1;n<s.length;++n)s[n][0]<s[t][0]&&(t=n),s[n][0]>s[i][0]&&(i=n);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},4750:function(p,s,t){"use strict";p.exports=function(n){var r=i(n),a=r.length;if(a<=2)return[];for(var l=new Array(a),c=r[a-1],h=0;h<a;++h){var u=r[h];l[h]=[c,u],c=u}return l};var i=t(3090)},2690:function(p,s,t){"use strict";p.exports=function(r,a){try{return i(r,!0)}catch{var l=n(r);if(l.length<=a)return[];var c=function(u,x){for(var d=u.length,m=new Array(d),g=0;g<x.length;++g)m[g]=u[x[g]];var y=x.length;for(g=0;g<d;++g)x.indexOf(g)<0&&(m[y++]=u[g]);return m}(r,l);return function(u,x){for(var d=u.length,m=x.length,g=0;g<d;++g)for(var y=u[g],v=0;v<y.length;++v){var _=y[v];if(_<m)y[v]=x[_];else{_-=m;for(var f=0;f<m;++f)_>=x[f]&&(_+=1);y[v]=_}}return u}(i(c,!0),l)}};var i=t(8954),n=t(3952)},4769:function(p){"use strict";p.exports=function(s,t,i,n,r,a){var l=r-1,c=r*r,h=l*l,u=(1+2*r)*h,x=r*h,d=c*(3-2*r),m=c*l;if(s.length){a||(a=new Array(s.length));for(var g=s.length-1;g>=0;--g)a[g]=u*s[g]+x*t[g]+d*i[g]+m*n[g];return a}return u*s+x*t+d*i+m*n},p.exports.derivative=function(s,t,i,n,r,a){var l=6*r*r-6*r,c=3*r*r-4*r+1,h=-6*r*r+6*r,u=3*r*r-2*r;if(s.length){a||(a=new Array(s.length));for(var x=s.length-1;x>=0;--x)a[x]=l*s[x]+c*t[x]+h*i[x]+u*n[x];return a}return l*s+c*t+h*i[x]+u*n}},7642:function(p,s,t){"use strict";var i=t(8954),n=t(1682);function r(l,c){this.point=l,this.index=c}function a(l,c){for(var h=l.point,u=c.point,x=h.length,d=0;d<x;++d){var m=u[d]-h[d];if(m)return m}return 0}p.exports=function(l,c){var h=l.length;if(h===0)return[];var u=l[0].length;if(u<1)return[];if(u===1)return function(R,U,D){if(R===1)return D?[[-1,0]]:[];var N=U.map(function(te,ee){return[te[0],ee]});N.sort(function(te,ee){return te[0]-ee[0]});for(var W=new Array(R-1),F=1;F<R;++F){var j=N[F-1],q=N[F];W[F-1]=[j[1],q[1]]}return D&&W.push([-1,W[0][1]],[W[R-1][1],-1]),W}(h,l,c);for(var x=new Array(h),d=1,m=0;m<h;++m){for(var g=l[m],y=new Array(u+1),v=0,_=0;_<u;++_){var f=g[_];y[_]=f,v+=f*f}y[u]=v,x[m]=new r(y,m),d=Math.max(v,d)}n(x,a),h=x.length;var S=new Array(h+u+1),w=new Array(h+u+1),E=(u+1)*(u+1)*d,P=new Array(u+1);for(m=0;m<=u;++m)P[m]=0;for(P[u]=E,S[0]=P.slice(),w[0]=-1,m=0;m<=u;++m)(y=P.slice())[m]=1,S[m+1]=y,w[m+1]=-1;for(m=0;m<h;++m){var C=x[m];S[m+u+1]=C.point,w[m+u+1]=C.index}var O=i(S,!1);if(O=c?O.filter(function(R){for(var U=0,D=0;D<=u;++D){var N=w[R[D]];if(N<0&&++U>=2)return!1;R[D]=N}return!0}):O.filter(function(R){for(var U=0;U<=u;++U){var D=w[R[U]];if(D<0)return!1;R[U]=D}return!0}),1&u)for(m=0;m<O.length;++m)y=(C=O[m])[0],C[0]=C[1],C[1]=y;return O}},2361:function(p){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,s=!0,i[1]===1072693248?(p.exports=function(r){return t[0]=r,[i[0],i[1]]},p.exports.pack=function(r,a){return i[0]=r,i[1]=a,t[0]},p.exports.lo=function(r){return t[0]=r,i[0]},p.exports.hi=function(r){return t[0]=r,i[1]}):i[0]===1072693248?(p.exports=function(r){return t[0]=r,[i[1],i[0]]},p.exports.pack=function(r,a){return i[1]=r,i[0]=a,t[0]},p.exports.lo=function(r){return t[0]=r,i[1]},p.exports.hi=function(r){return t[0]=r,i[0]}):s=!1}if(!s){var n=new Buffer(8);p.exports=function(r){return n.writeDoubleLE(r,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},p.exports.pack=function(r,a){return n.writeUInt32LE(r,0,!0),n.writeUInt32LE(a,4,!0),n.readDoubleLE(0,!0)},p.exports.lo=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(0,!0)},p.exports.hi=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(4,!0)}}p.exports.sign=function(r){return p.exports.hi(r)>>>31},p.exports.exponent=function(r){return(p.exports.hi(r)<<1>>>21)-1023},p.exports.fraction=function(r){var a=p.exports.lo(r),l=p.exports.hi(r),c=1048575&l;return 2146435072&l&&(c+=1048576),[a,c]},p.exports.denormalized=function(r){return!(2146435072&p.exports.hi(r))}},1338:function(p){"use strict";function s(t,i,n){var r=0|t[n];if(r<=0)return[];var a,l=new Array(r);if(n===t.length-1)for(a=0;a<r;++a)l[a]=i;else for(a=0;a<r;++a)l[a]=s(t,i,n+1);return l}p.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(n,r){var a,l;for(a=new Array(n),l=0;l<n;++l)a[l]=r;return a}(0|t,i);break;case"object":if(typeof t.length=="number")return s(t,i,0)}return[]}},3134:function(p,s,t){"use strict";p.exports=function(n,r){var a=n.length;if(typeof r!="number"){r=0;for(var l=0;l<a;++l){var c=n[l];r=Math.max(r,c[0],c[1])}r=1+(0|r)}r|=0;var h=new Array(r);for(l=0;l<r;++l)h[l]=[];for(l=0;l<a;++l)h[(c=n[l])[0]].push(c[1]),h[c[1]].push(c[0]);for(var u=0;u<r;++u)i(h[u],function(x,d){return x-d});return h};var i=t(1682)},5033:function(p){"use strict";p.exports=function(s,t,i){var n=t||0,r=i||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[n*s[12]+s[8],n*s[13]+s[9],n*s[14]+s[10],n*s[15]+s[11]],[r*s[12]-s[8],r*s[13]-s[9],r*s[14]-s[10],r*s[15]-s[11]]]}},9215:function(p,s,t){"use strict";p.exports=function(h,u,x){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof h=="number"?new a(d=c(h),d,0):new a(h,c(h.length),0);case 2:var d;if(typeof u=="number")return new a(h,d=c(h.length),+u);x=0;case 3:if(h.length!==u.length)throw new Error("state and velocity lengths must match");return new a(h,u,x)}};var i=t(4769),n=t(2478);function r(h,u,x){return Math.min(u,Math.max(h,x))}function a(h,u,x){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=h.slice().reverse(),this._velocity=u.slice().reverse(),this._time=[x],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var l=a.prototype;function c(h){for(var u=new Array(h),x=0;x<h;++x)u[x]=0;return u}l.flush=function(h){var u=n.gt(this._time,h)-1;u<=0||(this._time.splice(0,u),this._state.splice(0,u*this.dimension),this._velocity.splice(0,u*this.dimension))},l.curve=function(h){var u=this._time,x=u.length,d=n.le(u,h),m=this._scratch[0],g=this._state,y=this._velocity,v=this.dimension,_=this.bounds;if(d<0)for(var f=v-1,S=0;S<v;++S,--f)m[S]=g[f];else if(d>=x-1){f=g.length-1;var w=h-u[x-1];for(S=0;S<v;++S,--f)m[S]=g[f]+w*y[f]}else{f=v*(d+1)-1;var E=u[d],P=u[d+1]-E||1,C=this._scratch[1],O=this._scratch[2],R=this._scratch[3],U=this._scratch[4],D=!0;for(S=0;S<v;++S,--f)C[S]=g[f],R[S]=y[f]*P,O[S]=g[f+v],U[S]=y[f+v]*P,D=D&&C[S]===O[S]&&R[S]===U[S]&&R[S]===0;if(D)for(S=0;S<v;++S)m[S]=C[S];else i(C,R,O,U,(h-E)/P,m)}var N=_[0],W=_[1];for(S=0;S<v;++S)m[S]=r(N[S],W[S],m[S]);return m},l.dcurve=function(h){var u=this._time,x=u.length,d=n.le(u,h),m=this._scratch[0],g=this._state,y=this._velocity,v=this.dimension;if(d>=x-1)for(var _=g.length-1,f=(u[x-1],0);f<v;++f,--_)m[f]=y[_];else{_=v*(d+1)-1;var S=u[d],w=u[d+1]-S||1,E=this._scratch[1],P=this._scratch[2],C=this._scratch[3],O=this._scratch[4],R=!0;for(f=0;f<v;++f,--_)E[f]=g[_],C[f]=y[_]*w,P[f]=g[_+v],O[f]=y[_+v]*w,R=R&&E[f]===P[f]&&C[f]===O[f]&&C[f]===0;if(R)for(f=0;f<v;++f)m[f]=0;else for(i.derivative(E,C,P,O,(h-S)/w,m),f=0;f<v;++f)m[f]/=w}return m},l.lastT=function(){var h=this._time;return h[h.length-1]},l.stable=function(){for(var h=this._velocity,u=h.length,x=this.dimension-1;x>=0;--x)if(h[--u])return!1;return!0},l.jump=function(h){var u=this.lastT(),x=this.dimension;if(!(h<u||arguments.length!==x+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,y=this.bounds,v=y[0],_=y[1];this._time.push(u,h);for(var f=0;f<2;++f)for(var S=0;S<x;++S)d.push(d[g++]),m.push(0);for(this._time.push(h),S=x;S>0;--S)d.push(r(v[S-1],_[S-1],arguments[S])),m.push(0)}},l.push=function(h){var u=this.lastT(),x=this.dimension;if(!(h<u||arguments.length!==x+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,y=h-u,v=this.bounds,_=v[0],f=v[1],S=y>1e-6?1/y:0;this._time.push(h);for(var w=x;w>0;--w){var E=r(_[w-1],f[w-1],arguments[w]);d.push(E),m.push((E-d[g++])*S)}}},l.set=function(h){var u=this.dimension;if(!(h<this.lastT()||arguments.length!==u+1)){var x=this._state,d=this._velocity,m=this.bounds,g=m[0],y=m[1];this._time.push(h);for(var v=u;v>0;--v)x.push(r(g[v-1],y[v-1],arguments[v])),d.push(0)}},l.move=function(h){var u=this.lastT(),x=this.dimension;if(!(h<=u||arguments.length!==x+1)){var d=this._state,m=this._velocity,g=d.length-this.dimension,y=this.bounds,v=y[0],_=y[1],f=h-u,S=f>1e-6?1/f:0;this._time.push(h);for(var w=x;w>0;--w){var E=arguments[w];d.push(r(v[w-1],_[w-1],d[g++]+E)),m.push(E*S)}}},l.idle=function(h){var u=this.lastT();if(!(h<u)){var x=this.dimension,d=this._state,m=this._velocity,g=d.length-x,y=this.bounds,v=y[0],_=y[1],f=h-u;this._time.push(h);for(var S=x-1;S>=0;--S)d.push(r(v[S],_[S],d[g]+f*m[g])),m.push(0),g+=1}}},3840:function(p){"use strict";function s(g,y,v,_,f,S){this._color=g,this.key=y,this.value=v,this.left=_,this.right=f,this._count=S}function t(g){return new s(g._color,g.key,g.value,g.left,g.right,g._count)}function i(g,y){return new s(g,y.key,y.value,y.left,y.right,y._count)}function n(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function r(g,y){this._compare=g,this.root=y}p.exports=function(g){return new r(g||m,null)};var a=r.prototype;function l(g,y){var v;return y.left&&(v=l(g,y.left))?v:(v=g(y.key,y.value))||(y.right?l(g,y.right):void 0)}function c(g,y,v,_){if(y(g,_.key)<=0){var f;if(_.left&&(f=c(g,y,v,_.left))||(f=v(_.key,_.value)))return f}if(_.right)return c(g,y,v,_.right)}function h(g,y,v,_,f){var S,w=v(g,f.key),E=v(y,f.key);if(w<=0&&(f.left&&(S=h(g,y,v,_,f.left))||E>0&&(S=_(f.key,f.value))))return S;if(E>0&&f.right)return h(g,y,v,_,f.right)}function u(g,y){this.tree=g,this._stack=y}Object.defineProperty(a,"keys",{get:function(){var g=[];return this.forEach(function(y,v){g.push(y)}),g}}),Object.defineProperty(a,"values",{get:function(){var g=[];return this.forEach(function(y,v){g.push(v)}),g}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(g,y){for(var v=this._compare,_=this.root,f=[],S=[];_;){var w=v(g,_.key);f.push(_),S.push(w),_=w<=0?_.left:_.right}f.push(new s(0,g,y,null,null,1));for(var E=f.length-2;E>=0;--E)_=f[E],S[E]<=0?f[E]=new s(_._color,_.key,_.value,f[E+1],_.right,_._count+1):f[E]=new s(_._color,_.key,_.value,_.left,f[E+1],_._count+1);for(E=f.length-1;E>1;--E){var P=f[E-1];if(_=f[E],P._color===1||_._color===1)break;var C=f[E-2];if(C.left===P)if(P.left===_){if(!(O=C.right)||O._color!==0){C._color=0,C.left=P.right,P._color=1,P.right=C,f[E-2]=P,f[E-1]=_,n(C),n(P),E>=3&&((R=f[E-3]).left===C?R.left=P:R.right=P);break}P._color=1,C.right=i(1,O),C._color=0,E-=1}else{if(!(O=C.right)||O._color!==0){P.right=_.left,C._color=0,C.left=_.right,_._color=1,_.left=P,_.right=C,f[E-2]=_,f[E-1]=P,n(C),n(P),n(_),E>=3&&((R=f[E-3]).left===C?R.left=_:R.right=_);break}P._color=1,C.right=i(1,O),C._color=0,E-=1}else if(P.right===_){if(!(O=C.left)||O._color!==0){C._color=0,C.right=P.left,P._color=1,P.left=C,f[E-2]=P,f[E-1]=_,n(C),n(P),E>=3&&((R=f[E-3]).right===C?R.right=P:R.left=P);break}P._color=1,C.left=i(1,O),C._color=0,E-=1}else{var O;if(!(O=C.left)||O._color!==0){var R;P.left=_.right,C._color=0,C.right=_.left,_._color=1,_.right=P,_.left=C,f[E-2]=_,f[E-1]=P,n(C),n(P),n(_),E>=3&&((R=f[E-3]).right===C?R.right=_:R.left=_);break}P._color=1,C.left=i(1,O),C._color=0,E-=1}}return f[0]._color=1,new r(v,f[0])},a.forEach=function(g,y,v){if(this.root)switch(arguments.length){case 1:return l(g,this.root);case 2:return c(y,this._compare,g,this.root);case 3:return this._compare(y,v)>=0?void 0:h(y,v,this._compare,g,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var g=[],y=this.root;y;)g.push(y),y=y.left;return new u(this,g)}}),Object.defineProperty(a,"end",{get:function(){for(var g=[],y=this.root;y;)g.push(y),y=y.right;return new u(this,g)}}),a.at=function(g){if(g<0)return new u(this,[]);for(var y=this.root,v=[];;){if(v.push(y),y.left){if(g<y.left._count){y=y.left;continue}g-=y.left._count}if(!g)return new u(this,v);if(g-=1,!y.right||g>=y.right._count)break;y=y.right}return new u(this,[])},a.ge=function(g){for(var y=this._compare,v=this.root,_=[],f=0;v;){var S=y(g,v.key);_.push(v),S<=0&&(f=_.length),v=S<=0?v.left:v.right}return _.length=f,new u(this,_)},a.gt=function(g){for(var y=this._compare,v=this.root,_=[],f=0;v;){var S=y(g,v.key);_.push(v),S<0&&(f=_.length),v=S<0?v.left:v.right}return _.length=f,new u(this,_)},a.lt=function(g){for(var y=this._compare,v=this.root,_=[],f=0;v;){var S=y(g,v.key);_.push(v),S>0&&(f=_.length),v=S<=0?v.left:v.right}return _.length=f,new u(this,_)},a.le=function(g){for(var y=this._compare,v=this.root,_=[],f=0;v;){var S=y(g,v.key);_.push(v),S>=0&&(f=_.length),v=S<0?v.left:v.right}return _.length=f,new u(this,_)},a.find=function(g){for(var y=this._compare,v=this.root,_=[];v;){var f=y(g,v.key);if(_.push(v),f===0)return new u(this,_);v=f<=0?v.left:v.right}return new u(this,[])},a.remove=function(g){var y=this.find(g);return y?y.remove():this},a.get=function(g){for(var y=this._compare,v=this.root;v;){var _=y(g,v.key);if(_===0)return v.value;v=_<=0?v.left:v.right}};var x=u.prototype;function d(g,y){g.key=y.key,g.value=y.value,g.left=y.left,g.right=y.right,g._color=y._color,g._count=y._count}function m(g,y){return g<y?-1:g>y?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new u(this.tree,this._stack.slice())},x.remove=function(){var g=this._stack;if(g.length===0)return this.tree;var y=new Array(g.length),v=g[g.length-1];y[y.length-1]=new s(v._color,v.key,v.value,v.left,v.right,v._count);for(var _=g.length-2;_>=0;--_)(v=g[_]).left===g[_+1]?y[_]=new s(v._color,v.key,v.value,y[_+1],v.right,v._count):y[_]=new s(v._color,v.key,v.value,v.left,y[_+1],v._count);if((v=y[y.length-1]).left&&v.right){var f=y.length;for(v=v.left;v.right;)y.push(v),v=v.right;var S=y[f-1];for(y.push(new s(v._color,S.key,S.value,v.left,v.right,v._count)),y[f-1].key=v.key,y[f-1].value=v.value,_=y.length-2;_>=f;--_)v=y[_],y[_]=new s(v._color,v.key,v.value,v.left,y[_+1],v._count);y[f-1].left=y[f]}if((v=y[y.length-1])._color===0){var w=y[y.length-2];for(w.left===v?w.left=null:w.right===v&&(w.right=null),y.pop(),_=0;_<y.length;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(v.left||v.right){for(v.left?d(v,v.left):v.right&&d(v,v.right),v._color=1,_=0;_<y.length-1;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(y.length===1)return new r(this.tree._compare,null);for(_=0;_<y.length;++_)y[_]._count--;var E=y[y.length-2];return function(P){for(var C,O,R,U,D=P.length-1;D>=0;--D){if(C=P[D],D===0)return void(C._color=1);if((O=P[D-1]).left===C){if((R=O.right).right&&R.right._color===0)return U=(R=O.right=t(R)).right=t(R.right),O.right=R.left,R.left=O,R.right=U,R._color=O._color,C._color=1,O._color=1,U._color=1,n(O),n(R),D>1&&((N=P[D-2]).left===O?N.left=R:N.right=R),void(P[D-1]=R);if(R.left&&R.left._color===0)return U=(R=O.right=t(R)).left=t(R.left),O.right=U.left,R.left=U.right,U.left=O,U.right=R,U._color=O._color,O._color=1,R._color=1,C._color=1,n(O),n(R),n(U),D>1&&((N=P[D-2]).left===O?N.left=U:N.right=U),void(P[D-1]=U);if(R._color===1){if(O._color===0)return O._color=1,void(O.right=i(0,R));O.right=i(0,R);continue}R=t(R),O.right=R.left,R.left=O,R._color=O._color,O._color=0,n(O),n(R),D>1&&((N=P[D-2]).left===O?N.left=R:N.right=R),P[D-1]=R,P[D]=O,D+1<P.length?P[D+1]=C:P.push(C),D+=2}else{if((R=O.left).left&&R.left._color===0)return U=(R=O.left=t(R)).left=t(R.left),O.left=R.right,R.right=O,R.left=U,R._color=O._color,C._color=1,O._color=1,U._color=1,n(O),n(R),D>1&&((N=P[D-2]).right===O?N.right=R:N.left=R),void(P[D-1]=R);if(R.right&&R.right._color===0)return U=(R=O.left=t(R)).right=t(R.right),O.left=U.right,R.right=U.left,U.right=O,U.left=R,U._color=O._color,O._color=1,R._color=1,C._color=1,n(O),n(R),n(U),D>1&&((N=P[D-2]).right===O?N.right=U:N.left=U),void(P[D-1]=U);if(R._color===1){if(O._color===0)return O._color=1,void(O.left=i(0,R));O.left=i(0,R);continue}var N;R=t(R),O.left=R.right,R.right=O,R._color=O._color,O._color=0,n(O),n(R),D>1&&((N=P[D-2]).right===O?N.right=R:N.left=R),P[D-1]=R,P[D]=O,D+1<P.length?P[D+1]=C:P.push(C),D+=2}}}(y),E.left===v?E.left=null:E.right=null,new r(this.tree._compare,y[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var g=0,y=this._stack;if(y.length===0){var v=this.tree.root;return v?v._count:0}y[y.length-1].left&&(g=y[y.length-1].left._count);for(var _=y.length-2;_>=0;--_)y[_+1]===y[_].right&&(++g,y[_].left&&(g+=y[_].left._count));return g},enumerable:!0}),x.next=function(){var g=this._stack;if(g.length!==0){var y=g[g.length-1];if(y.right)for(y=y.right;y;)g.push(y),y=y.left;else for(g.pop();g.length>0&&g[g.length-1].right===y;)y=g[g.length-1],g.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var g=this._stack;if(g.length===0)return!1;if(g[g.length-1].right)return!0;for(var y=g.length-1;y>0;--y)if(g[y-1].left===g[y])return!0;return!1}}),x.update=function(g){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var v=new Array(y.length),_=y[y.length-1];v[v.length-1]=new s(_._color,_.key,g,_.left,_.right,_._count);for(var f=y.length-2;f>=0;--f)(_=y[f]).left===y[f+1]?v[f]=new s(_._color,_.key,_.value,v[f+1],_.right,_._count):v[f]=new s(_._color,_.key,_.value,_.left,v[f+1],_._count);return new r(this.tree._compare,v[0])},x.prev=function(){var g=this._stack;if(g.length!==0){var y=g[g.length-1];if(y.left)for(y=y.left;y;)g.push(y),y=y.right;else for(g.pop();g.length>0&&g[g.length-1].left===y;)y=g[g.length-1],g.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var g=this._stack;if(g.length===0)return!1;if(g[g.length-1].left)return!0;for(var y=g.length-1;y>0;--y)if(g[y-1].right===g[y])return!0;return!1}})},3837:function(p,s,t){"use strict";p.exports=function(C,O){var R=new m(C);return R.update(O),R};var i=t(4935),n=t(501),r=t(5304),a=t(6429),l=t(6444),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=ArrayBuffer,u=DataView;function x(C){return Array.isArray(C)||function(O){return h.isView(O)&&!(O instanceof u)}(C)}function d(C,O){return C[0]=O[0],C[1]=O[1],C[2]=O[2],C}function m(C){this.gl=C,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(C)}var g=m.prototype;function y(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}g.update=function(C){function O(Y,ie,se){if(se in C){var ae,ue=C[se],ve=this[se];(Y?x(ue)&&x(ue[0]):x(ue))?this[se]=ae=[ie(ue[0]),ie(ue[1]),ie(ue[2])]:this[se]=ae=[ie(ue),ie(ue),ie(ue)];for(var ye=0;ye<3;++ye)if(ae[ye]!==ve[ye])return!0}return!1}C=C||{};var R,U=O.bind(this,!1,Number),D=O.bind(this,!1,Boolean),N=O.bind(this,!1,String),W=O.bind(this,!0,function(Y){if(x(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),F=!1,j=!1;if("bounds"in C)for(var q=C.bounds,te=0;te<2;++te)for(var ee=0;ee<3;++ee)q[te][ee]!==this.bounds[te][ee]&&(j=!0),this.bounds[te][ee]=q[te][ee];if("ticks"in C)for(R=C.ticks,F=!0,this.autoTicks=!1,te=0;te<3;++te)this.tickSpacing[te]=0;else U("tickSpacing")&&(this.autoTicks=!0,j=!0);if(this._firstInit&&("ticks"in C||"tickSpacing"in C||(this.autoTicks=!0),j=!0,F=!0,this._firstInit=!1),j&&this.autoTicks&&(R=l.create(this.bounds,this.tickSpacing),F=!0),F){for(te=0;te<3;++te)R[te].sort(function(Y,ie){return Y.x-ie.x});l.equal(R,this.ticks)?F=!1:this.ticks=R}D("tickEnable"),N("tickFont")&&(F=!0),N("tickFontStyle")&&(F=!0),N("tickFontWeight")&&(F=!0),N("tickFontVariant")&&(F=!0),U("tickSize"),U("tickAngle"),U("tickPad"),W("tickColor");var Q=N("labels");N("labelFont")&&(Q=!0),N("labelFontStyle")&&(Q=!0),N("labelFontWeight")&&(Q=!0),N("labelFontVariant")&&(Q=!0),D("labelEnable"),U("labelSize"),U("labelPad"),W("labelColor"),D("lineEnable"),D("lineMirror"),U("lineWidth"),W("lineColor"),D("lineTickEnable"),D("lineTickMirror"),U("lineTickLength"),U("lineTickWidth"),W("lineTickColor"),D("gridEnable"),U("gridWidth"),W("gridColor"),D("zeroEnable"),W("zeroLineColor"),U("zeroLineWidth"),D("backgroundEnable"),W("backgroundColor");var J=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],K=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(Q||F)&&this._text.update(this.bounds,this.labels,J,this.ticks,K):this._text=i(this.gl,this.bounds,this.labels,J,this.ticks,K),this._lines&&F&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var v=[new y,new y,new y];function _(C,O,R,U,D){for(var N=C.primalOffset,W=C.primalMinor,F=C.mirrorOffset,j=C.mirrorMinor,q=U[O],te=0;te<3;++te)if(O!==te){var ee=N,Q=F,J=W,K=j;q&1<<te&&(ee=F,Q=N,J=j,K=W),ee[te]=R[0][te],Q[te]=R[1][te],D[te]>0?(J[te]=-1,K[te]=0):(J[te]=0,K[te]=1)}}var f=[0,0,0],S={model:c,view:c,projection:c,_ortho:!1};g.isOpaque=function(){return!0},g.isTransparent=function(){return!1},g.drawTransparent=function(C){};var w=[0,0,0],E=[0,0,0],P=[0,0,0];g.draw=function(C){C=C||S;for(var O=this.gl,R=C.model||c,U=C.view||c,D=C.projection||c,N=this.bounds,W=C._ortho||!1,F=a(R,U,D,N,W),j=F.cubeEdges,q=F.axis,te=U[12],ee=U[13],Q=U[14],J=U[15],K=(W?2:1)*this.pixelRatio*(D[3]*te+D[7]*ee+D[11]*Q+D[15]*J)/O.drawingBufferHeight,Y=0;Y<3;++Y)this.lastCubeProps.cubeEdges[Y]=j[Y],this.lastCubeProps.axis[Y]=q[Y];var ie=v;for(Y=0;Y<3;++Y)_(v[Y],Y,this.bounds,j,q);O=this.gl;var se,ae,ue,ve=f;for(Y=0;Y<3;++Y)this.backgroundEnable[Y]?ve[Y]=q[Y]:ve[Y]=0;for(this._background.draw(R,U,D,N,ve,this.backgroundColor),this._lines.bind(R,U,D,this),Y=0;Y<3;++Y){var ye=[0,0,0];q[Y]>0?ye[Y]=N[1][Y]:ye[Y]=N[0][Y];for(var de=0;de<2;++de){var pe=(Y+1+de)%3,ge=(Y+1+(1^de))%3;this.gridEnable[pe]&&this._lines.drawGrid(pe,ge,this.bounds,ye,this.gridColor[pe],this.gridWidth[pe]*this.pixelRatio)}for(de=0;de<2;++de)pe=(Y+1+de)%3,ge=(Y+1+(1^de))%3,this.zeroEnable[ge]&&Math.min(N[0][ge],N[1][ge])<=0&&Math.max(N[0][ge],N[1][ge])>=0&&this._lines.drawZero(pe,ge,this.bounds,ye,this.zeroLineColor[ge],this.zeroLineWidth[ge]*this.pixelRatio)}for(Y=0;Y<3;++Y){this.lineEnable[Y]&&this._lines.drawAxisLine(Y,this.bounds,ie[Y].primalOffset,this.lineColor[Y],this.lineWidth[Y]*this.pixelRatio),this.lineMirror[Y]&&this._lines.drawAxisLine(Y,this.bounds,ie[Y].mirrorOffset,this.lineColor[Y],this.lineWidth[Y]*this.pixelRatio);var ke=d(w,ie[Y].primalMinor),Ee=d(E,ie[Y].mirrorMinor),me=this.lineTickLength;for(de=0;de<3;++de){var oe=K/R[5*de];ke[de]*=me[de]*oe,Ee[de]*=me[de]*oe}this.lineTickEnable[Y]&&this._lines.drawAxisTicks(Y,ie[Y].primalOffset,ke,this.lineTickColor[Y],this.lineTickWidth[Y]*this.pixelRatio),this.lineTickMirror[Y]&&this._lines.drawAxisTicks(Y,ie[Y].mirrorOffset,Ee,this.lineTickColor[Y],this.lineTickWidth[Y]*this.pixelRatio)}function re(Ie){(ue=[0,0,0])[Ie]=1}function fe(Ie,Oe,he){var _e=(Ie+1)%3,Ae=(Ie+2)%3,De=Oe[_e],Le=Oe[Ae],Be=he[_e],Ve=he[Ae];De>0&&Ve>0||De>0&&Ve<0||De<0&&Ve>0||De<0&&Ve<0?re(_e):(Le>0&&Be>0||Le>0&&Be<0||Le<0&&Be>0||Le<0&&Be<0)&&re(Ae)}for(this._lines.unbind(),this._text.bind(R,U,D,this.pixelRatio),Y=0;Y<3;++Y){var Se=ie[Y].primalMinor,be=ie[Y].mirrorMinor,we=d(P,ie[Y].primalOffset);for(de=0;de<3;++de)this.lineTickEnable[Y]&&(we[de]+=K*Se[de]*Math.max(this.lineTickLength[de],0)/R[5*de]);var Me=[0,0,0];if(Me[Y]=1,this.tickEnable[Y]){for(this.tickAngle[Y]===-3600?(this.tickAngle[Y]=0,this.tickAlign[Y]="auto"):this.tickAlign[Y]=-1,ae=1,(se=[this.tickAlign[Y],.5,ae])[0]==="auto"?se[0]=0:se[0]=parseInt(""+se[0]),ue=[0,0,0],fe(Y,Se,be),de=0;de<3;++de)we[de]+=K*Se[de]*this.tickPad[de]/R[5*de];this._text.drawTicks(Y,this.tickSize[Y],this.tickAngle[Y],we,this.tickColor[Y],Me,ue,se)}if(this.labelEnable[Y]){for(ae=0,ue=[0,0,0],this.labels[Y].length>4&&(re(Y),ae=1),(se=[this.labelAlign[Y],.5,ae])[0]==="auto"?se[0]=0:se[0]=parseInt(""+se[0]),de=0;de<3;++de)we[de]+=K*Se[de]*this.labelPad[de]/R[5*de];we[Y]+=.5*(N[0][Y]+N[1][Y]),this._text.drawLabel(Y,this.labelSize[Y],this.labelAngle[Y],we,this.labelColor[Y],[0,0,0],ue,se)}}this._text.unbind()},g.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(p,s,t){"use strict";p.exports=function(c){for(var h=[],u=[],x=0,d=0;d<3;++d)for(var m=(d+1)%3,g=(d+2)%3,y=[0,0,0],v=[0,0,0],_=-1;_<=1;_+=2){u.push(x,x+2,x+1,x+1,x+2,x+3),y[d]=_,v[d]=_;for(var f=-1;f<=1;f+=2){y[m]=f;for(var S=-1;S<=1;S+=2)y[g]=S,h.push(y[0],y[1],y[2],v[0],v[1],v[2]),x+=1}var w=m;m=g,g=w}var E=i(c,new Float32Array(h)),P=i(c,new Uint16Array(u),c.ELEMENT_ARRAY_BUFFER),C=n(c,[{buffer:E,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:c.FLOAT,size:3,offset:12,stride:24}],P),O=r(c);return O.attributes.position.location=0,O.attributes.normal.location=1,new a(c,E,C,O)};var i=t(2762),n=t(8116),r=t(1879).bg;function a(c,h,u,x){this.gl=c,this.buffer=h,this.vao=u,this.shader=x}var l=a.prototype;l.draw=function(c,h,u,x,d,m){for(var g=!1,y=0;y<3;++y)g=g||d[y];if(g){var v=this.gl;v.enable(v.POLYGON_OFFSET_FILL),v.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:h,projection:u,bounds:x,enable:d,colors:m},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),v.disable(v.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(p,s,t){"use strict";p.exports=function(f,S,w,E,P){n(l,S,f),n(l,w,l);for(var C=0,O=0;O<2;++O){u[2]=E[O][2];for(var R=0;R<2;++R){u[1]=E[R][1];for(var U=0;U<2;++U)u[0]=E[U][0],d(c[C],u,l),C+=1}}var D=-1;for(O=0;O<8;++O){for(var N=c[O][3],W=0;W<3;++W)h[O][W]=c[O][W]/N;P&&(h[O][2]*=-1),N<0&&(D<0||h[O][2]<h[D][2])&&(D=O)}if(D<0){D=0;for(var F=0;F<3;++F){for(var j=(F+2)%3,q=(F+1)%3,te=-1,ee=-1,Q=0;Q<2;++Q){var J=(Y=Q<<F)+(Q<<j)+(1-Q<<q),K=Y+(1-Q<<j)+(Q<<q);a(h[Y],h[J],h[K],x)<0||(Q?te=1:ee=1)}if(te<0||ee<0)ee>te&&(D|=1<<F);else{for(Q=0;Q<2;++Q){J=(Y=Q<<F)+(Q<<j)+(1-Q<<q),K=Y+(1-Q<<j)+(Q<<q);var Y,ie=g([c[Y],c[J],c[K],c[Y+(1<<j)+(1<<q)]]);Q?te=ie:ee=ie}ee>te&&(D|=1<<F)}}}var se=7^D,ae=-1;for(O=0;O<8;++O)O!==D&&O!==se&&(ae<0||h[ae][1]>h[O][1])&&(ae=O);var ue=-1;for(O=0;O<3;++O)(ye=ae^1<<O)!==D&&ye!==se&&(ue<0&&(ue=ye),(q=h[ye])[0]<h[ue][0]&&(ue=ye));var ve=-1;for(O=0;O<3;++O){var ye;(ye=ae^1<<O)!==D&&ye!==se&&ye!==ue&&(ve<0&&(ve=ye),(q=h[ye])[0]>h[ve][0]&&(ve=ye))}var de=y;de[0]=de[1]=de[2]=0,de[i.log2(ue^ae)]=ae&ue,de[i.log2(ae^ve)]=ae&ve;var pe=7^ve;pe===D||pe===se?(pe=7^ue,de[i.log2(ve^pe)]=pe&ve):de[i.log2(ue^pe)]=pe&ue;var ge=v,ke=D;for(F=0;F<3;++F)ge[F]=ke&1<<F?-1:1;return _};var i=t(8828),n=t(6760),r=t(5202),a=t(3250),l=new Array(16),c=new Array(8),h=new Array(8),u=new Array(3),x=[0,0,0];function d(f,S,w){for(var E=0;E<4;++E){f[E]=w[12+E];for(var P=0;P<3;++P)f[E]+=S[P]*w[4*P+E]}}(function(){for(var f=0;f<8;++f)c[f]=[1,1,1,1],h[f]=[1,1,1]})();var m=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(f){for(var S=0;S<m.length;++S)if((f=r.positive(f,m[S])).length<3)return 0;var w=f[0],E=w[0]/w[3],P=w[1]/w[3],C=0;for(S=1;S+1<f.length;++S){var O=f[S],R=f[S+1],U=O[0]/O[3]-E,D=O[1]/O[3]-P,N=R[0]/R[3]-E,W=R[1]/R[3]-P;C+=Math.abs(U*W-D*N)}return C}var y=[1,1,1],v=[0,0,0],_={cubeEdges:y,axis:v}},501:function(p,s,t){"use strict";p.exports=function(y,v,_){var f=[],S=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var O=f.length/3|0,R=0;R<_[C].length;++R){var U=+_[C][R].x;f.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var D=f.length/3|0;S[C]=O,w[C]=D-O,O=f.length/3|0;for(var N=0;N<_[C].length;++N)U=+_[C][N].x,f.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);D=f.length/3|0,E[C]=O,P[C]=D-O}var W=i(y,new Float32Array(f)),F=n(y,[{buffer:W,type:y.FLOAT,size:3,stride:0,offset:0}]),j=r(y);return j.attributes.position.location=0,new m(y,W,F,j,w,S,P,E)};var i=t(2762),n=t(8116),r=t(1879).n,a=[0,0,0],l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[1,1];function x(y){return y[0]=y[1]=y[2]=0,y}function d(y,v){return y[0]=v[0],y[1]=v[1],y[2]=v[2],y}function m(y,v,_,f,S,w,E,P){this.gl=y,this.vertBuffer=v,this.vao=_,this.shader=f,this.tickCount=S,this.tickOffset=w,this.gridCount=E,this.gridOffset=P}var g=m.prototype;g.bind=function(y,v,_){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=v,this.shader.uniforms.projection=_,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=u,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(y,v,_,f,S){var w=x(l);this.shader.uniforms.majorAxis=l,w[y]=v[1][y]-v[0][y],this.shader.uniforms.minorAxis=w;var E,P=d(h,_);P[y]+=v[0][y],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=f,(E=x(c))[(y+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(c))[(y+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(y,v,_,f,S){if(this.tickCount[y]){var w=x(a);w[y]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=v,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=S;var E=x(c);E[y]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},g.drawGrid=function(y,v,_,f,S,w){if(this.gridCount[y]){var E=x(l);E[v]=_[1][v]-_[0][v],this.shader.uniforms.minorAxis=E;var P=d(h,f);P[v]+=_[0][v],this.shader.uniforms.offset=P;var C=x(a);C[y]=1,this.shader.uniforms.majorAxis=C;var O=x(c);O[y]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},g.drawZero=function(y,v,_,f,S,w){var E=x(l);this.shader.uniforms.majorAxis=E,E[y]=_[1][y]-_[0][y],this.shader.uniforms.minorAxis=E;var P=d(h,f);P[y]+=_[0][y],this.shader.uniforms.offset=P;var C=x(c);C[v]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(p,s,t){"use strict";var i=t(3236),n=t(9405),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.n=function(x){return n(x,r,a,null,[{name:"position",type:"vec3"}])};var l=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.Q=function(x){return n(x,l,c,null,[{name:"position",type:"vec3"}])};var h=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return n(x,h,u,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(p,s,t){"use strict";p.exports=function(d,m,g,y,v,_){var f=i(d),S=n(d,[{buffer:f,size:3}]),w=a(d);w.attributes.position.location=0;var E=new h(d,w,f,S);return E.update(m,g,y,v,_),E};var i=t(2762),n=t(8116),r=t(4359),a=t(1879).Q,l=window||A.global||{},c=l.__TEXT_CACHE||{};function h(d,m,g,y){this.gl=d,this.shader=m,this.buffer=g,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var u=h.prototype,x=[0,0];u.bind=function(d,m,g,y){this.vao.bind(),this.shader.bind();var v=this.shader.uniforms;v.model=d,v.view=m,v.projection=g,v.pixelScale=y,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},u.unbind=function(){this.vao.unbind()},u.update=function(d,m,g,y,v){var _=[];function f(D,N,W,F,j,q){var te=[W.style,W.weight,W.variant,W.family].join("_"),ee=c[te];ee||(ee=c[te]={});var Q=ee[N];Q||(Q=ee[N]=function(ye,de){try{return r(ye,de)}catch(pe){return console.warn('error vectorizing text:"'+ye+'" error:',pe),{cells:[],positions:[]}}}(N,{triangles:!0,font:W.family,fontStyle:W.style,fontWeight:W.weight,fontVariant:W.variant,textAlign:"center",textBaseline:"middle",lineSpacing:j,styletags:q}));for(var J=(F||12)/12,K=Q.positions,Y=Q.cells,ie=0,se=Y.length;ie<se;++ie)for(var ae=Y[ie],ue=2;ue>=0;--ue){var ve=K[ae[ue]];_.push(J*ve[0],-J*ve[1],D)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){E[O]=_.length/3|0,f(.5*(d[0][O]+d[1][O]),m[O],g[O],12,1.25,C),P[O]=(_.length/3|0)-E[O],S[O]=_.length/3|0;for(var R=0;R<y[O].length;++R)if(y[O][R].text){var U={family:y[O][R].font||v[O].family,style:v[O].fontStyle||v[O].style,weight:v[O].fontWeight||v[O].weight,variant:v[O].fontVariant||v[O].variant};f(y[O][R].x,y[O][R].text,U,y[O][R].fontSize||12,1.25,C)}w[O]=(_.length/3|0)-S[O]}this.buffer.update(_),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=P},u.drawTicks=function(d,m,g,y,v,_,f,S){this.tickCount[d]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=m,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},u.drawLabel=function(d,m,g,y,v,_,f,S){this.labelCount[d]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=v,this.shader.uniforms.angle=g,this.shader.uniforms.scale=m,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(p,s){"use strict";function t(i,n){var r=i+"",a=r.indexOf("."),l=0;a>=0&&(l=r.length-a-1);var c=Math.pow(10,l),h=Math.round(i*n*c),u=h+"";if(u.indexOf("e")>=0)return u;var x=h/c,d=h%c;h<0?(x=0|-Math.ceil(x),d=0|-d):(x=0|Math.floor(x),d|=0);var m=""+x;if(h<0&&(m="-"+m),l){for(var g=""+d;g.length<l;)g="0"+g;return m+"."+g}return m}s.create=function(i,n){for(var r=[],a=0;a<3;++a){for(var l=[],c=(i[0][a],i[1][a],0);c*n[a]<=i[1][a];++c)l.push({x:c*n[a],text:t(n[a],c)});for(c=-1;c*n[a]>=i[0][a];--c)l.push({x:c*n[a],text:t(n[a],c)});r.push(l)}return r},s.equal=function(i,n){for(var r=0;r<3;++r){if(i[r].length!==n[r].length)return!1;for(var a=0;a<i[r].length;++a){var l=i[r][a],c=n[r][a];if(l.x!==c.x||l.text!==c.text||l.font!==c.font||l.fontColor!==c.fontColor||l.fontSize!==c.fontSize||l.dx!==c.dx||l.dy!==c.dy)return!1}}return!0}},5445:function(p,s,t){"use strict";p.exports=function(_,f,S,w,E){var P=f.model||h,C=f.view||h,O=f.projection||h,R=f._ortho||!1,U=_.bounds,D=(E=E||r(P,C,O,U,R)).axis;a(u,C,P),a(u,O,u);for(var N=y,W=0;W<3;++W)N[W].lo=1/0,N[W].hi=-1/0,N[W].pixelsPerDataUnit=1/0;var F=i(l(u,u));l(u,u);for(var j=0;j<3;++j){var q=(j+1)%3,te=(j+2)%3,ee=v;e:for(W=0;W<2;++W){var Q=[];if(D[j]<0!=!!W){ee[j]=U[W][j];for(var J=0;J<2;++J){ee[q]=U[J^W][q];for(var K=0;K<2;++K)ee[te]=U[K^J^W][te],Q.push(ee.slice())}var Y=R?5:4;for(J=Y;J===Y;++J){if(Q.length===0)continue e;Q=n.positive(Q,F[J])}for(J=0;J<Q.length;++J){te=Q[J];var ie=g(v,u,te,S,w);for(K=0;K<3;++K)N[K].lo=Math.min(N[K].lo,te[K]),N[K].hi=Math.max(N[K].hi,te[K]),K!==j&&(N[K].pixelsPerDataUnit=Math.min(N[K].pixelsPerDataUnit,Math.abs(ie[K])))}}}}return N};var i=t(5033),n=t(5202),r=t(6429),a=t(6760),l=t(5665),c=t(5352),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array(16);function x(_,f,S){this.lo=_,this.hi=f,this.pixelsPerDataUnit=S}var d=[0,0,0,1],m=[0,0,0,1];function g(_,f,S,w,E){for(var P=0;P<3;++P){for(var C=d,O=m,R=0;R<3;++R)O[R]=C[R]=S[R];O[3]=C[3]=1,O[P]+=1,c(O,O,f),O[3]<0&&(_[P]=1/0),C[P]-=1,c(C,C,f),C[3]<0&&(_[P]=1/0);var U=(C[0]/C[3]-O[0]/O[3])*w,D=(C[1]/C[3]-O[1]/O[3])*E;_[P]=.25*Math.sqrt(U*U+D*D)}return _}var y=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],v=[0,0,0]},2762:function(p,s,t){"use strict";var i=t(1888),n=t(5298),r=t(9618),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(x,d,m,g,y){this.gl=x,this.type=d,this.handle=m,this.length=g,this.usage=y}var c=l.prototype;function h(x,d,m,g,y,v){var _=y.length*y.BYTES_PER_ELEMENT;if(v<0)return x.bufferData(d,y,g),_;if(_+v>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(d,v,y),m}function u(x,d){for(var m=i.malloc(x.length,d),g=x.length,y=0;y<g;++y)m[y]=x[y];return m}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(x,d){if(typeof d!="number"&&(d=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var m=x.dtype;if(a.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(m=gl.getExtension("OES_element_index_uint")&&m!=="uint16"?"uint32":"uint16"),m===x.dtype&&function(_,f){for(var S=1,w=f.length-1;w>=0;--w){if(f[w]!==S)return!1;S*=_[w]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=h(this.gl,this.type,this.length,this.usage,x.data,d):this.length=h(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),d);else{var g=i.malloc(x.size,m),y=r(g,x.shape);n.assign(y,x),this.length=h(this.gl,this.type,this.length,this.usage,d<0?g:g.subarray(0,x.size),d),i.free(g)}}else if(Array.isArray(x)){var v;v=this.type===this.gl.ELEMENT_ARRAY_BUFFER?u(x,"uint16"):u(x,"float32"),this.length=h(this.gl,this.type,this.length,this.usage,d<0?v:v.subarray(0,x.length),d),i.free(v)}else if(typeof x=="object"&&typeof x.length=="number")this.length=h(this.gl,this.type,this.length,this.usage,x,d);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(d>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},p.exports=function(x,d,m,g){if(m=m||x.ARRAY_BUFFER,g=g||x.DYNAMIC_DRAW,m!==x.ARRAY_BUFFER&&m!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==x.DYNAMIC_DRAW&&g!==x.STATIC_DRAW&&g!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=x.createBuffer(),v=new l(x,m,y,0,g);return v.update(d),v}},6405:function(p,s,t){"use strict";var i=t(2931);p.exports=function(r,a){var l=r.positions,c=r.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(r.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var u=0,x=1/0,d=-1/0,m=1/0,g=-1/0,y=1/0,v=-1/0,_=null,f=null,S=[],w=1/0,E=!1,P=r.coneSizemode==="raw",C=0;C<l.length;C++){var O=l[C];x=Math.min(O[0],x),d=Math.max(O[0],d),m=Math.min(O[1],m),g=Math.max(O[1],g),y=Math.min(O[2],y),v=Math.max(O[2],v);var R=c[C];if(i.length(R)>u&&(u=i.length(R)),C&&!P){var U=2*i.distance(_,O)/(i.length(f)+i.length(R));U?(w=Math.min(w,U),E=!1):E=!0}E||(_=O,f=R),S.push(R)}var D=[x,m,y],N=[d,g,v];a&&(a[0]=D,a[1]=N),u===0&&(u=1);var W=1/u;isFinite(w)||(w=1),h.vectorScale=w;var F=r.coneSize||(P?1:.5);r.absoluteConeSize&&(F=r.absoluteConeSize*W),h.coneScale=F,C=0;for(var j=0;C<l.length;C++)for(var q=(O=l[C])[0],te=O[1],ee=O[2],Q=S[C],J=i.length(Q)*W,K=0;K<8;K++){h.positions.push([q,te,ee,j++]),h.positions.push([q,te,ee,j++]),h.positions.push([q,te,ee,j++]),h.positions.push([q,te,ee,j++]),h.positions.push([q,te,ee,j++]),h.positions.push([q,te,ee,j++]),h.vectors.push(Q),h.vectors.push(Q),h.vectors.push(Q),h.vectors.push(Q),h.vectors.push(Q),h.vectors.push(Q),h.vertexIntensity.push(J,J,J),h.vertexIntensity.push(J,J,J);var Y=h.positions.length;h.cells.push([Y-6,Y-5,Y-4],[Y-3,Y-2,Y-1])}return h};var n=t(614);p.exports.createMesh=t(9060),p.exports.createConeMesh=function(r,a){return p.exports.createMesh(r,a,{shaders:n,traceType:"cone"})}},9060:function(p,s,t){"use strict";var i=t(9405),n=t(2762),r=t(8116),a=t(7766),l=t(6760),c=t(7608),h=t(9618),u=t(6729),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(g,y,v,_,f,S,w,E,P,C,O){this.gl=g,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=v,this.pickShader=_,this.trianglePositions=f,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=P,this.triangleIds=w,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var m=d.prototype;m.isOpaque=function(){return this.opacity>=1},m.isTransparent=function(){return this.opacity<1},m.pickSlots=1,m.setPickBase=function(g){this.pickId=g},m.update=function(g){g=g||{};var y=this.gl;this.dirty=!0,"lightPosition"in g&&(this.lightPosition=g.lightPosition),"opacity"in g&&(this.opacity=g.opacity),"ambient"in g&&(this.ambientLight=g.ambient),"diffuse"in g&&(this.diffuseLight=g.diffuse),"specular"in g&&(this.specularLight=g.specular),"roughness"in g&&(this.roughness=g.roughness),"fresnel"in g&&(this.fresnel=g.fresnel),g.tubeScale!==void 0&&(this.tubeScale=g.tubeScale),g.vectorScale!==void 0&&(this.vectorScale=g.vectorScale),g.coneScale!==void 0&&(this.coneScale=g.coneScale),g.coneOffset!==void 0&&(this.coneOffset=g.coneOffset),g.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(ie){for(var se=u({colormap:ie,nshades:256,format:"rgba"}),ae=new Uint8Array(1024),ue=0;ue<256;++ue){for(var ve=se[ue],ye=0;ye<3;++ye)ae[4*ue+ye]=ve[ye];ae[4*ue+3]=255*ve[3]}return h(ae,[256,256,4],[4,0,1])}(g.colormap)),this.texture.generateMipmap());var v=g.cells,_=g.positions,f=g.vectors;if(_&&v&&f){var S=[],w=[],E=[],P=[],C=[];this.cells=v,this.positions=_,this.vectors=f;var O=g.meshColor||[1,1,1,1],R=g.vertexIntensity,U=1/0,D=-1/0;if(R)if(g.vertexIntensityBounds)U=+g.vertexIntensityBounds[0],D=+g.vertexIntensityBounds[1];else for(var N=0;N<R.length;++N){var W=R[N];U=Math.min(U,W),D=Math.max(D,W)}else for(N=0;N<_.length;++N)W=_[N][2],U=Math.min(U,W),D=Math.max(D,W);for(this.intensity=R||function(ie){for(var se=ie.length,ae=new Array(se),ue=0;ue<se;++ue)ae[ue]=ie[ue][2];return ae}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<_.length;++N)for(var F=_[N],j=0;j<3;++j)!isNaN(F[j])&&isFinite(F[j])&&(this.bounds[0][j]=Math.min(this.bounds[0][j],F[j]),this.bounds[1][j]=Math.max(this.bounds[1][j],F[j]));var q=0;e:for(N=0;N<v.length;++N){var te=v[N];if(te.length===3){for(j=0;j<3;++j){F=_[Q=te[j]];for(var ee=0;ee<3;++ee)if(isNaN(F[ee])||!isFinite(F[ee]))continue e}for(j=0;j<3;++j){var Q;F=_[Q=te[2-j]],S.push(F[0],F[1],F[2],F[3]);var J=f[Q];w.push(J[0],J[1],J[2],J[3]||0);var K,Y=O;Y.length===3?E.push(Y[0],Y[1],Y[2],1):E.push(Y[0],Y[1],Y[2],Y[3]),K=R?[(R[Q]-U)/(D-U),0]:[(F[2]-U)/(D-U),0],P.push(K[0],K[1]),C.push(N)}q+=1}}this.triangleCount=q,this.trianglePositions.update(S),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(C))}},m.drawTransparent=m.draw=function(g){g=g||{};for(var y=this.gl,v=g.model||x,_=g.view||x,f=g.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);var E={model:v,view:_,projection:f,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=c(E.inverseModel,E.model),y.disable(y.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(l(P,E.view,E.model),l(P,E.projection,P),c(P,P),w=0;w<3;++w)E.eyePosition[w]=P[12+w]/P[15];var C=P[15];for(w=0;w<3;++w)C+=this.lightPosition[w]*P[4*w+3];for(w=0;w<3;++w){for(var O=P[12+w],R=0;R<3;++R)O+=P[4*R+w]*this.lightPosition[R];E.lightPosition[w]=O/C}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=E,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},m.drawPick=function(g){g=g||{};for(var y=this.gl,v=g.model||x,_=g.view||x,f=g.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);this._model=[].slice.call(v),this._view=[].slice.call(_),this._projection=[].slice.call(f),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var E={model:v,view:_,projection:f,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},m.pick=function(g){if(!g||g.id!==this.pickId)return null;var y=g.value[0]+256*g.value[1]+65536*g.value[2],v=this.cells[y],_=this.positions[v[1]].slice(0,3),f={position:_,dataCoordinate:_,index:Math.floor(v[1]/48)};return this.traceType==="cone"?f.index=Math.floor(v[1]/48):this.traceType==="streamtube"&&(f.intensity=this.intensity[v[1]],f.velocity=this.vectors[v[1]].slice(0,3),f.divergence=this.vectors[v[1]][3],f.index=y),f},m.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},p.exports=function(g,y,v){var _=v.shaders;arguments.length===1&&(g=(y=g).gl);var f=function(D,N){var W=i(D,N.meshShader.vertex,N.meshShader.fragment,null,N.meshShader.attributes);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.vector.location=4,W}(g,_),S=function(D,N){var W=i(D,N.pickShader.vertex,N.pickShader.fragment,null,N.pickShader.attributes);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.vector.location=4,W}(g,_),w=a(g,h(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=g.LINEAR_MIPMAP_LINEAR,w.magFilter=g.LINEAR;var E=n(g),P=n(g),C=n(g),O=n(g),R=n(g),U=new d(g,w,f,S,E,P,R,C,O,r(g,[{buffer:E,type:g.FLOAT,size:4},{buffer:R,type:g.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:g.FLOAT,size:4},{buffer:O,type:g.FLOAT,size:2},{buffer:P,type:g.FLOAT,size:4}]),v.traceType||"cone");return U.update(y),U}},614:function(p,s,t){var i=t(3236),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(p){p.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(p,s,t){var i=t(737);p.exports=function(n){return i[n]}},9165:function(p,s,t){"use strict";p.exports=function(d){var m=d.gl,g=i(m),y=n(m,[{buffer:g,type:m.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:m.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:m.FLOAT,size:3,offset:28,stride:40}]),v=r(m);v.attributes.position.location=0,v.attributes.color.location=1,v.attributes.offset.location=2;var _=new l(m,g,y,v);return _.update(d),_};var i=t(2762),n=t(8116),r=t(3436),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(d,m,g,y){this.gl=d,this.shader=y,this.buffer=m,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=l.prototype;function h(d,m){for(var g=0;g<3;++g)d[0][g]=Math.min(d[0][g],m[g]),d[1][g]=Math.max(d[1][g],m[g])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(d){var m=this.gl,g=this.shader.uniforms;this.shader.bind();var y=g.view=d.view||a,v=g.projection=d.projection||a;g.model=d.model||a,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var _=y[12],f=y[13],S=y[14],w=y[15],E=(d._ortho?2:1)*this.pixelRatio*(v[3]*_+v[7]*f+v[11]*S+v[15]*w)/m.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)m.lineWidth(this.lineWidth[P]*this.pixelRatio),g.capSize=this.capSize[P]*E,this.lineCount[P]&&m.drawArrays(m.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var u=function(){for(var d=new Array(3),m=0;m<3;++m){for(var g=[],y=1;y<=2;++y)for(var v=-1;v<=1;v+=2){var _=[0,0,0];_[(y+m)%3]=v,g.push(_)}d[m]=g}return d}();function x(d,m,g,y){for(var v=u[y],_=0;_<v.length;++_){var f=v[_];d.push(m[0],m[1],m[2],g[0],g[1],g[2],g[3],f[0],f[1],f[2])}return v.length}c.update=function(d){"lineWidth"in(d=d||{})&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var m=d.color||[[0,0,0],[0,0,0],[0,0,0]],g=d.position,y=d.error;if(Array.isArray(m[0])||(m=[m,m,m]),g&&y){var v=[],_=g.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=f;e:for(var w=0;w<_;++w){for(var E=g[w],P=0;P<3;++P)if(isNaN(E[P])||!isFinite(E[P]))continue e;var C,O=y[w],R=m[S];Array.isArray(R[0])&&(R=m[w]),R.length===3?R=[R[0],R[1],R[2],1]:R.length===4&&(R=[R[0],R[1],R[2],R[3]],!this.hasAlpha&&R[3]<1&&(this.hasAlpha=!0)),!isNaN(O[0][S])&&!isNaN(O[1][S])&&(O[0][S]<0&&((C=E.slice())[S]+=O[0][S],v.push(E[0],E[1],E[2],R[0],R[1],R[2],R[3],0,0,0,C[0],C[1],C[2],R[0],R[1],R[2],R[3],0,0,0),h(this.bounds,C),f+=2+x(v,C,R,S)),O[1][S]>0&&((C=E.slice())[S]+=O[1][S],v.push(E[0],E[1],E[2],R[0],R[1],R[2],R[3],0,0,0,C[0],C[1],C[2],R[0],R[1],R[2],R[3],0,0,0),h(this.bounds,C),f+=2+x(v,C,R,S)))}this.lineCount[S]=f-this.lineOffset[S]}this.buffer.update(v)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(p,s,t){"use strict";var i=t(3236),n=t(9405),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);p.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(p,s,t){"use strict";var i=t(7766);p.exports=function(_,f,S,w){n||(n=_.FRAMEBUFFER_UNSUPPORTED,r=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!c&&E&&function(N,W){var F=N.getParameter(W.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(F+1);for(var j=0;j<=F;++j){for(var q=new Array(F),te=0;te<j;++te)q[te]=N.COLOR_ATTACHMENT0+te;for(te=j;te<F;++te)q[te]=N.NONE;c[j]=q}}(_,E),Array.isArray(f)&&(w=S,S=0|f[1],f=0|f[0]),typeof f!="number")throw new Error("gl-fbo: Missing shape parameter");var P=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(f<0||f>P||S<0||S>P)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(w=w||{})){if((C=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var O=_.UNSIGNED_BYTE,R=_.getExtension("OES_texture_float");if(w.float&&C>0){if(!R)throw new Error("gl-fbo: Context does not support floating point textures");O=_.FLOAT}else w.preferFloat&&C>0&&R&&(O=_.FLOAT);var U=!0;"depth"in w&&(U=!!w.depth);var D=!1;return"stencil"in w&&(D=!!w.stencil),new g(_,f,S,O,C,U,D,E)};var n,r,a,l,c=null;function h(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function u(_,f){_.bindFramebuffer(_.FRAMEBUFFER,f[0]),_.bindRenderbuffer(_.RENDERBUFFER,f[1]),_.bindTexture(_.TEXTURE_2D,f[2])}function x(_){switch(_){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(_,f,S,w,E,P){if(!w)return null;var C=i(_,f,S,E,w);return C.magFilter=_.NEAREST,C.minFilter=_.NEAREST,C.mipSamples=1,C.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,P,_.TEXTURE_2D,C.handle,0),C}function m(_,f,S,w,E){var P=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,P),_.renderbufferStorage(_.RENDERBUFFER,w,f,S),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,P),P}function g(_,f,S,w,E,P,C,O){this.gl=_,this._shape=[0|f,0|S],this._destroyed=!1,this._ext=O,this.color=new Array(E);for(var R=0;R<E;++R)this.color[R]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=P,this._useStencil=C;var U=this,D=[0|f,0|S];Object.defineProperties(D,{0:{get:function(){return U._shape[0]},set:function(N){return U.width=N}},1:{get:function(){return U._shape[1]},set:function(N){return U.height=N}}}),this._shapeVector=D,function(N){var W=h(N.gl),F=N.gl,j=N.handle=F.createFramebuffer(),q=N._shape[0],te=N._shape[1],ee=N.color.length,Q=N._ext,J=N._useStencil,K=N._useDepth,Y=N._colorType;F.bindFramebuffer(F.FRAMEBUFFER,j);for(var ie=0;ie<ee;++ie)N.color[ie]=d(F,q,te,Y,F.RGBA,F.COLOR_ATTACHMENT0+ie);ee===0?(N._color_rb=m(F,q,te,F.RGBA4,F.COLOR_ATTACHMENT0),Q&&Q.drawBuffersWEBGL(c[0])):ee>1&&Q.drawBuffersWEBGL(c[ee]);var se=F.getExtension("WEBGL_depth_texture");se?J?N.depth=d(F,q,te,se.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):K&&(N.depth=d(F,q,te,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):K&&J?N._depth_rb=m(F,q,te,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):K?N._depth_rb=m(F,q,te,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):J&&(N._depth_rb=m(F,q,te,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var ae=F.checkFramebufferStatus(F.FRAMEBUFFER);if(ae!==F.FRAMEBUFFER_COMPLETE){for(N._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(N.handle),N.handle=null,N.depth&&(N.depth.dispose(),N.depth=null),N._depth_rb&&(F.deleteRenderbuffer(N._depth_rb),N._depth_rb=null),ie=0;ie<N.color.length;++ie)N.color[ie].dispose(),N.color[ie]=null;N._color_rb&&(F.deleteRenderbuffer(N._color_rb),N._color_rb=null),u(F,W),x(ae)}u(F,W)}(this)}var y=g.prototype;function v(_,f,S){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==f||_._shape[1]!==S){var w=_.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=f,_._shape[1]=S;for(var P=h(w),C=0;C<_.color.length;++C)_.color[C].shape=_._shape;_._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,_._shape[0],_._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,_.handle);var O=w.checkFramebufferStatus(w.FRAMEBUFFER);O!==w.FRAMEBUFFER_COMPLETE&&(_.dispose(),u(w,P),x(O)),u(w,P)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|_[0],S=0|_[1];return v(this,f,S),[f,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,v(this,this._shape[0],_),_},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(p,s,t){var i=t(3387).sprintf,n=t(5171),r=t(1848),a=t(1085);p.exports=function(l,c,h){"use strict";var u=r(c)||"of unknown name (see npm glsl-shader-name)",x="unknown type";h!==void 0&&(x=h===n.FRAGMENT_SHADER?"fragment":"vertex");for(var d=i(`Error compiling %s shader %s:
`,x,u),m=i("%s%s",d,l),g=l.split(`
`),y={},v=0;v<g.length;v++){var _=g[v];if(_!==""&&_!=="\0"){var f=parseInt(_.split(":")[2]);if(isNaN(f))throw new Error(i("Could not parse error: %s",_));y[f]=_}}var S=a(c).split(`
`);for(v=0;v<S.length;v++)if((y[v+3]||y[v+2]||y[v+1])&&(d+=S[v]+`
`,y[v+1])){var w=y[v+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=i(`^^^ %s

`,w)}return{long:d.trim(),short:m.trim()}}},2510:function(p,s,t){"use strict";p.exports=function(m,g){var y=m.gl,v=new h(m,a(y,c.vertex,c.fragment),a(y,c.pickVertex,c.pickFragment),l(y),l(y),l(y),l(y));return v.update(g),m.addObject(v),v};var i=t(2478),n=t(7762),r=t(1888),a=t(9405),l=t(2762),c=t(6768);function h(m,g,y,v,_,f,S){this.plot=m,this.shader=g,this.pickShader=y,this.positionBuffer=v,this.weightBuffer=_,this.colorBuffer=f,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var u,x=h.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(u=[1,0,0,0,1,0,0,0,1],function(){var m=this.plot,g=this.shader,y=this.bounds,v=this.numVertices;if(!(v<=0)){var _=m.gl,f=m.dataBox,S=y[2]-y[0],w=y[3]-y[1],E=f[2]-f[0],P=f[3]-f[1];u[0]=2*S/E,u[4]=2*w/P,u[6]=2*(y[0]-f[0])/E-1,u[7]=2*(y[1]-f[1])/P-1,g.bind();var C=g.uniforms;C.viewTransform=u,C.shape=this.shape;var O=g.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,v)}}),x.drawPick=function(){var m=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(y){var v=this.plot,_=this.pickShader,f=this.bounds,S=this.numVertices;if(!(S<=0)){var w=v.gl,E=v.dataBox,P=f[2]-f[0],C=f[3]-f[1],O=E[2]-E[0],R=E[3]-E[1];m[0]=2*P/O,m[4]=2*C/R,m[6]=2*(f[0]-E[0])/O-1,m[7]=2*(f[1]-E[1])/R-1;for(var U=0;U<4;++U)g[U]=y>>8*U&255;this.pickOffset=y,_.bind();var D=_.uniforms;D.viewTransform=m,D.pickOffset=g,D.shape=this.shape;var N=_.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),y+this.shape[0]*this.shape[1]}}}(),x.pick=function(m,g,y){var v=this.pickOffset,_=this.shape[0]*this.shape[1];if(y<v||y>=v+_)return null;var f=y-v,S=this.xData,w=this.yData;return{object:this,pointId:f,dataCoord:[S[f%this.shape[0]],w[f/this.shape[0]|0]]}},x.update=function(m){var g=(m=m||{}).shape||[0,0],y=m.x||n(g[0]),v=m.y||n(g[1]),_=m.z||new Float32Array(g[0]*g[1]),f=m.zsmooth!==!1;this.xData=y,this.yData=v;var S,w,E,P,C=m.colorLevels||[0],O=m.colorValues||[0,0,0,1],R=C.length,U=this.bounds;f?(S=U[0]=y[0],w=U[1]=v[0],E=U[2]=y[y.length-1],P=U[3]=v[v.length-1]):(S=U[0]=y[0]+(y[1]-y[0])/2,w=U[1]=v[0]+(v[1]-v[0])/2,E=U[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,P=U[3]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2);var D=1/(E-S),N=1/(P-w),W=g[0],F=g[1];this.shape=[W,F];var j=(f?(W-1)*(F-1):W*F)*(d.length>>>1);this.numVertices=j;for(var q=r.mallocUint8(4*j),te=r.mallocFloat32(2*j),ee=r.mallocUint8(2*j),Q=r.mallocUint32(j),J=0,K=f?W-1:W,Y=f?F-1:F,ie=0;ie<Y;++ie){var se,ae;f?(se=N*(v[ie]-w),ae=N*(v[ie+1]-w)):(se=ie<F-1?N*(v[ie]-(v[ie+1]-v[ie])/2-w):N*(v[ie]-(v[ie]-v[ie-1])/2-w),ae=ie<F-1?N*(v[ie]+(v[ie+1]-v[ie])/2-w):N*(v[ie]+(v[ie]-v[ie-1])/2-w));for(var ue=0;ue<K;++ue){var ve,ye;f?(ve=D*(y[ue]-S),ye=D*(y[ue+1]-S)):(ve=ue<W-1?D*(y[ue]-(y[ue+1]-y[ue])/2-S):D*(y[ue]-(y[ue]-y[ue-1])/2-S),ye=ue<W-1?D*(y[ue]+(y[ue+1]-y[ue])/2-S):D*(y[ue]+(y[ue]-y[ue-1])/2-S));for(var de=0;de<d.length;de+=2){var pe,ge,ke,Ee,me=d[de],oe=d[de+1],re=_[f?(ie+oe)*W+(ue+me):ie*W+ue],fe=i.le(C,re);if(fe<0)pe=O[0],ge=O[1],ke=O[2],Ee=O[3];else if(fe===R-1)pe=O[4*R-4],ge=O[4*R-3],ke=O[4*R-2],Ee=O[4*R-1];else{var Se=(re-C[fe])/(C[fe+1]-C[fe]),be=1-Se,we=4*fe,Me=4*(fe+1);pe=be*O[we]+Se*O[Me],ge=be*O[we+1]+Se*O[Me+1],ke=be*O[we+2]+Se*O[Me+2],Ee=be*O[we+3]+Se*O[Me+3]}q[4*J]=255*pe,q[4*J+1]=255*ge,q[4*J+2]=255*ke,q[4*J+3]=255*Ee,te[2*J]=.5*ve+.5*ye,te[2*J+1]=.5*se+.5*ae,ee[2*J]=me,ee[2*J+1]=oe,Q[J]=ie*W+ue,J+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(ee),this.colorBuffer.update(q),this.idBuffer.update(Q),r.free(te),r.free(q),r.free(ee),r.free(Q)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(p,s,t){"use strict";var i=t(3236);p.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(p,s,t){var i=t(3236),n=t(9405),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(h){return n(h,r,a,null,c)},s.createPickShader=function(h){return n(h,r,l,null,c)}},5714:function(p,s,t){"use strict";p.exports=function(S){var w=S.gl||S.scene&&S.scene.gl,E=x(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var P=d(w);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var C=i(w),O=n(w,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),R=h(new Array(1024),[256,1,4]),U=0;U<1024;++U)R.data[U]=255;var D=r(w,R);D.wrap=w.REPEAT;var N=new _(w,E,P,C,O,D);return N.update(S),N};var i=t(2762),n=t(8116),r=t(7766),a=new Uint8Array(4),l=new Float32Array(a.buffer),c=t(2478),h=t(9618),u=t(7319),x=u.createShader,d=u.createPickShader,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(S,w){for(var E=0,P=0;P<3;++P){var C=S[P]-w[P];E+=C*C}return Math.sqrt(E)}function y(S){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(S[0][E],w[0][E]),w[1][E]=Math.min(S[1][E],w[1][E]);return w}function v(S,w,E,P){this.arcLength=S,this.position=w,this.index=E,this.dataCoordinate=P}function _(S,w,E,P,C,O){this.gl=S,this.shader=w,this.pickShader=E,this.buffer=P,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=_.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(S){this.pickId=S},f.drawTransparent=f.draw=function(S){if(this.vertexCount){var w=this.gl,E=this.shader,P=this.vao;E.bind(),E.uniforms={model:S.model||m,view:S.view||m,projection:S.projection||m,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},f.drawPick=function(S){if(this.vertexCount){var w=this.gl,E=this.pickShader,P=this.vao;E.bind(),E.uniforms={model:S.model||m,view:S.view||m,projection:S.projection||m,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},f.update=function(S){var w,E;this.dirty=!0;var P=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],O=[],R=[],U=0,D=0,N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=S.position||S.positions;if(W){var F=S.color||S.colors||[0,0,0,1],j=S.lineWidth||1,q=!1;e:for(w=1;w<W.length;++w){var te,ee,Q,J=W[w-1],K=W[w];for(O.push(U),R.push(J.slice()),E=0;E<3;++E){if(isNaN(J[E])||isNaN(K[E])||!isFinite(J[E])||!isFinite(K[E])){if(!P&&C.length>0){for(var Y=0;Y<24;++Y)C.push(C[C.length-12]);D+=2,q=!0}continue e}N[0][E]=Math.min(N[0][E],J[E],K[E]),N[1][E]=Math.max(N[1][E],J[E],K[E])}Array.isArray(F[0])?(te=F.length>w-1?F[w-1]:F.length>0?F[F.length-1]:[0,0,0,1],ee=F.length>w?F[w]:F.length>0?F[F.length-1]:[0,0,0,1]):te=ee=F,te.length===3&&(te=[te[0],te[1],te[2],1]),ee.length===3&&(ee=[ee[0],ee[1],ee[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),Q=Array.isArray(j)?j.length>w-1?j[w-1]:j.length>0?j[j.length-1]:[0,0,0,1]:j;var ie=U;if(U+=g(J,K),q){for(E=0;E<2;++E)C.push(J[0],J[1],J[2],K[0],K[1],K[2],ie,Q,te[0],te[1],te[2],te[3]);D+=2,q=!1}C.push(J[0],J[1],J[2],K[0],K[1],K[2],ie,Q,te[0],te[1],te[2],te[3],J[0],J[1],J[2],K[0],K[1],K[2],ie,-Q,te[0],te[1],te[2],te[3],K[0],K[1],K[2],J[0],J[1],J[2],U,-Q,ee[0],ee[1],ee[2],ee[3],K[0],K[1],K[2],J[0],J[1],J[2],U,Q,ee[0],ee[1],ee[2],ee[3]),D+=4}}if(this.buffer.update(C),O.push(U),R.push(W[W.length-1].slice()),this.bounds=N,this.vertexCount=D,this.points=R,this.arcLength=O,"dashes"in S){var se=S.dashes.slice();for(se.unshift(0),w=1;w<se.length;++w)se[w]=se[w-1]+se[w];var ae=h(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)ae.set(w,0,E,0);1&c.le(se,se[se.length-1]*w/255)?ae.set(w,0,0,0):ae.set(w,0,0,255)}this.texture.setPixels(ae)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(S){if(!S||S.id!==this.pickId)return null;var w=function(W,F,j,q){return a[0]=0,a[1]=j,a[2]=F,a[3]=W,l[0]}(S.value[0],S.value[1],S.value[2]),E=c.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var P=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],O=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),R=1-O,U=[0,0,0],D=0;D<3;++D)U[D]=R*P[D]+O*C[D];var N=Math.min(O<.5?E:E+1,this.points.length-1);return new v(w,U,N,this.points[N])}},1903:function(p){p.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},6864:function(p){p.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},9921:function(p){p.exports=function(s){var t=s[0],i=s[1],n=s[2],r=s[3],a=s[4],l=s[5],c=s[6],h=s[7],u=s[8],x=s[9],d=s[10],m=s[11],g=s[12],y=s[13],v=s[14],_=s[15];return(t*l-i*a)*(d*_-m*v)-(t*c-n*a)*(x*_-m*y)+(t*h-r*a)*(x*v-d*y)+(i*c-n*l)*(u*_-m*g)-(i*h-r*l)*(u*v-d*g)+(n*h-r*c)*(u*y-x*g)}},7399:function(p){p.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=i+i,c=n+n,h=r+r,u=i*l,x=n*l,d=n*c,m=r*l,g=r*c,y=r*h,v=a*l,_=a*c,f=a*h;return s[0]=1-d-y,s[1]=x+f,s[2]=m-_,s[3]=0,s[4]=x-f,s[5]=1-u-y,s[6]=g+v,s[7]=0,s[8]=m+_,s[9]=g-v,s[10]=1-u-d,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},6743:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=t[3],c=n+n,h=r+r,u=a+a,x=n*c,d=n*h,m=n*u,g=r*h,y=r*u,v=a*u,_=l*c,f=l*h,S=l*u;return s[0]=1-(g+v),s[1]=d+S,s[2]=m-f,s[3]=0,s[4]=d-S,s[5]=1-(x+v),s[6]=y+_,s[7]=0,s[8]=m+f,s[9]=y-_,s[10]=1-(x+g),s[11]=0,s[12]=i[0],s[13]=i[1],s[14]=i[2],s[15]=1,s}},7894:function(p){p.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7608:function(p){p.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=t[4],c=t[5],h=t[6],u=t[7],x=t[8],d=t[9],m=t[10],g=t[11],y=t[12],v=t[13],_=t[14],f=t[15],S=i*c-n*l,w=i*h-r*l,E=i*u-a*l,P=n*h-r*c,C=n*u-a*c,O=r*u-a*h,R=x*v-d*y,U=x*_-m*y,D=x*f-g*y,N=d*_-m*v,W=d*f-g*v,F=m*f-g*_,j=S*F-w*W+E*N+P*D-C*U+O*R;return j?(j=1/j,s[0]=(c*F-h*W+u*N)*j,s[1]=(r*W-n*F-a*N)*j,s[2]=(v*O-_*C+f*P)*j,s[3]=(m*C-d*O-g*P)*j,s[4]=(h*D-l*F-u*U)*j,s[5]=(i*F-r*D+a*U)*j,s[6]=(_*E-y*O-f*w)*j,s[7]=(x*O-m*E+g*w)*j,s[8]=(l*W-c*D+u*R)*j,s[9]=(n*D-i*W-a*R)*j,s[10]=(y*C-v*E+f*S)*j,s[11]=(d*E-x*C-g*S)*j,s[12]=(c*U-l*N-h*R)*j,s[13]=(i*N-n*U+r*R)*j,s[14]=(v*w-y*P-_*S)*j,s[15]=(x*P-d*w+m*S)*j,s):null}},6582:function(p,s,t){var i=t(7894);p.exports=function(n,r,a,l){var c,h,u,x,d,m,g,y,v,_,f=r[0],S=r[1],w=r[2],E=l[0],P=l[1],C=l[2],O=a[0],R=a[1],U=a[2];return Math.abs(f-O)<1e-6&&Math.abs(S-R)<1e-6&&Math.abs(w-U)<1e-6?i(n):(g=f-O,y=S-R,v=w-U,c=P*(v*=_=1/Math.sqrt(g*g+y*y+v*v))-C*(y*=_),h=C*(g*=_)-E*v,u=E*y-P*g,(_=Math.sqrt(c*c+h*h+u*u))?(c*=_=1/_,h*=_,u*=_):(c=0,h=0,u=0),x=y*u-v*h,d=v*c-g*u,m=g*h-y*c,(_=Math.sqrt(x*x+d*d+m*m))?(x*=_=1/_,d*=_,m*=_):(x=0,d=0,m=0),n[0]=c,n[1]=x,n[2]=g,n[3]=0,n[4]=h,n[5]=d,n[6]=y,n[7]=0,n[8]=u,n[9]=m,n[10]=v,n[11]=0,n[12]=-(c*f+h*S+u*w),n[13]=-(x*f+d*S+m*w),n[14]=-(g*f+y*S+v*w),n[15]=1,n)}},6760:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=t[3],c=t[4],h=t[5],u=t[6],x=t[7],d=t[8],m=t[9],g=t[10],y=t[11],v=t[12],_=t[13],f=t[14],S=t[15],w=i[0],E=i[1],P=i[2],C=i[3];return s[0]=w*n+E*c+P*d+C*v,s[1]=w*r+E*h+P*m+C*_,s[2]=w*a+E*u+P*g+C*f,s[3]=w*l+E*x+P*y+C*S,w=i[4],E=i[5],P=i[6],C=i[7],s[4]=w*n+E*c+P*d+C*v,s[5]=w*r+E*h+P*m+C*_,s[6]=w*a+E*u+P*g+C*f,s[7]=w*l+E*x+P*y+C*S,w=i[8],E=i[9],P=i[10],C=i[11],s[8]=w*n+E*c+P*d+C*v,s[9]=w*r+E*h+P*m+C*_,s[10]=w*a+E*u+P*g+C*f,s[11]=w*l+E*x+P*y+C*S,w=i[12],E=i[13],P=i[14],C=i[15],s[12]=w*n+E*c+P*d+C*v,s[13]=w*r+E*h+P*m+C*_,s[14]=w*a+E*u+P*g+C*f,s[15]=w*l+E*x+P*y+C*S,s}},4040:function(p){p.exports=function(s,t,i,n,r,a,l){var c=1/(t-i),h=1/(n-r),u=1/(a-l);return s[0]=-2*c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*u,s[11]=0,s[12]=(t+i)*c,s[13]=(r+n)*h,s[14]=(l+a)*u,s[15]=1,s}},4772:function(p){p.exports=function(s,t,i,n,r){var a=1/Math.tan(t/2),l=1/(n-r);return s[0]=a/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(r+n)*l,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*r*n*l,s[15]=0,s}},6079:function(p){p.exports=function(s,t,i,n){var r,a,l,c,h,u,x,d,m,g,y,v,_,f,S,w,E,P,C,O,R,U,D,N,W=n[0],F=n[1],j=n[2],q=Math.sqrt(W*W+F*F+j*j);return Math.abs(q)<1e-6?null:(W*=q=1/q,F*=q,j*=q,r=Math.sin(i),l=1-(a=Math.cos(i)),c=t[0],h=t[1],u=t[2],x=t[3],d=t[4],m=t[5],g=t[6],y=t[7],v=t[8],_=t[9],f=t[10],S=t[11],w=W*W*l+a,E=F*W*l+j*r,P=j*W*l-F*r,C=W*F*l-j*r,O=F*F*l+a,R=j*F*l+W*r,U=W*j*l+F*r,D=F*j*l-W*r,N=j*j*l+a,s[0]=c*w+d*E+v*P,s[1]=h*w+m*E+_*P,s[2]=u*w+g*E+f*P,s[3]=x*w+y*E+S*P,s[4]=c*C+d*O+v*R,s[5]=h*C+m*O+_*R,s[6]=u*C+g*O+f*R,s[7]=x*C+y*O+S*R,s[8]=c*U+d*D+v*N,s[9]=h*U+m*D+_*N,s[10]=u*U+g*D+f*N,s[11]=x*U+y*D+S*N,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},5567:function(p){p.exports=function(s,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[4],l=t[5],c=t[6],h=t[7],u=t[8],x=t[9],d=t[10],m=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*r+u*n,s[5]=l*r+x*n,s[6]=c*r+d*n,s[7]=h*r+m*n,s[8]=u*r-a*n,s[9]=x*r-l*n,s[10]=d*r-c*n,s[11]=m*r-h*n,s}},2408:function(p){p.exports=function(s,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],l=t[1],c=t[2],h=t[3],u=t[8],x=t[9],d=t[10],m=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*r-u*n,s[1]=l*r-x*n,s[2]=c*r-d*n,s[3]=h*r-m*n,s[8]=a*n+u*r,s[9]=l*n+x*r,s[10]=c*n+d*r,s[11]=h*n+m*r,s}},7089:function(p){p.exports=function(s,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],l=t[1],c=t[2],h=t[3],u=t[4],x=t[5],d=t[6],m=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*r+u*n,s[1]=l*r+x*n,s[2]=c*r+d*n,s[3]=h*r+m*n,s[4]=u*r-a*n,s[5]=x*r-l*n,s[6]=d*r-c*n,s[7]=m*r-h*n,s}},2504:function(p){p.exports=function(s,t,i){var n=i[0],r=i[1],a=i[2];return s[0]=t[0]*n,s[1]=t[1]*n,s[2]=t[2]*n,s[3]=t[3]*n,s[4]=t[4]*r,s[5]=t[5]*r,s[6]=t[6]*r,s[7]=t[7]*r,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},7656:function(p){p.exports=function(s,t,i){var n,r,a,l,c,h,u,x,d,m,g,y,v=i[0],_=i[1],f=i[2];return t===s?(s[12]=t[0]*v+t[4]*_+t[8]*f+t[12],s[13]=t[1]*v+t[5]*_+t[9]*f+t[13],s[14]=t[2]*v+t[6]*_+t[10]*f+t[14],s[15]=t[3]*v+t[7]*_+t[11]*f+t[15]):(n=t[0],r=t[1],a=t[2],l=t[3],c=t[4],h=t[5],u=t[6],x=t[7],d=t[8],m=t[9],g=t[10],y=t[11],s[0]=n,s[1]=r,s[2]=a,s[3]=l,s[4]=c,s[5]=h,s[6]=u,s[7]=x,s[8]=d,s[9]=m,s[10]=g,s[11]=y,s[12]=n*v+c*_+d*f+t[12],s[13]=r*v+h*_+m*f+t[13],s[14]=a*v+u*_+g*f+t[14],s[15]=l*v+x*_+y*f+t[15]),s}},5665:function(p){p.exports=function(s,t){if(s===t){var i=t[1],n=t[2],r=t[3],a=t[6],l=t[7],c=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=i,s[6]=t[9],s[7]=t[13],s[8]=n,s[9]=a,s[11]=t[14],s[12]=r,s[13]=l,s[14]=c}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},7626:function(p,s,t){"use strict";var i=t(2642),n=t(9346);function r(c,h){for(var u=[0,0,0,0],x=0;x<4;++x)for(var d=0;d<4;++d)u[d]+=c[4*x+d]*h[x];return u}function a(c,h,u,x,d){for(var m=r(x,r(u,r(h,[c[0],c[1],c[2],1]))),g=0;g<3;++g)m[g]/=m[3];return[.5*d[0]*(1+m[0]),.5*d[1]*(1-m[1])]}function l(c,h){for(var u=[0,0,0],x=0;x<c.length;++x)for(var d=c[x],m=h[x],g=0;g<3;++g)u[g]+=m*d[g];return u}p.exports=function(c,h,u,x,d,m){if(c.length===1)return[0,c[0].slice()];for(var g=new Array(c.length),y=0;y<c.length;++y)g[y]=a(c[y],u,x,d,m);var v=0,_=1/0;for(y=0;y<g.length;++y){for(var f=0,S=0;S<2;++S)f+=Math.pow(g[y][S]-h[S],2);f<_&&(_=f,v=y)}var w=function(P,C){if(P.length===2){for(var O=0,R=0,U=0;U<2;++U)O+=Math.pow(C[U]-P[0][U],2),R+=Math.pow(C[U]-P[1][U],2);return(O=Math.sqrt(O))+(R=Math.sqrt(R))<1e-6?[1,0]:[R/(O+R),O/(R+O)]}if(P.length===3){var D=[0,0];return n(P[0],P[1],P[2],C,D),i(P,D)}return[]}(g,h),E=0;for(y=0;y<3;++y){if(w[y]<-.001||w[y]>1.0001)return null;E+=w[y]}return Math.abs(E-1)>.001?null:[v,l(c,w),w]}},840:function(p,s,t){var i=t(3236),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),h=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),m=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),g=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:c,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:u,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:d,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:m,fragment:g,attributes:[{name:"position",type:"vec3"}]}},7201:function(p,s,t){"use strict";var i=t(9405),n=t(2762),r=t(8116),a=t(7766),l=t(8406),c=t(6760),h=t(7608),u=t(9618),x=t(6729),d=t(7765),m=t(1888),g=t(840),y=t(7626),v=g.meshShader,_=g.wireShader,f=g.pointShader,S=g.pickShader,w=g.pointPickShader,E=g.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(F,j,q,te,ee,Q,J,K,Y,ie,se,ae,ue,ve,ye,de,pe,ge,ke,Ee,me,oe,re,fe,Se,be,we){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=j,this.dirty=!0,this.triShader=q,this.lineShader=te,this.pointShader=ee,this.pickShader=Q,this.pointPickShader=J,this.contourShader=K,this.trianglePositions=Y,this.triangleColors=se,this.triangleNormals=ue,this.triangleUVs=ae,this.triangleIds=ie,this.triangleVAO=ve,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ye,this.edgeColors=pe,this.edgeUVs=ge,this.edgeIds=de,this.edgeVAO=ke,this.edgeCount=0,this.pointPositions=Ee,this.pointColors=oe,this.pointUVs=re,this.pointSizes=fe,this.pointIds=me,this.pointVAO=Se,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=be,this.contourVAO=we,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var O=C.prototype;function R(F,j){if(!j||!j.length)return 1;for(var q=0;q<j.length;++q){if(j.length<2)return 1;if(j[q][0]===F)return j[q][1];if(j[q][0]>F&&q>0){var te=(j[q][0]-F)/(j[q][0]-j[q-1][0]);return j[q][1]*(1-te)+te*j[q-1][1]}}return 1}function U(F){var j=i(F,f.vertex,f.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.pointSize.location=4,j}function D(F){var j=i(F,S.vertex,S.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j}function N(F){var j=i(F,w.vertex,w.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j.attributes.pointSize.location=4,j}function W(F){var j=i(F,E.vertex,E.fragment);return j.attributes.position.location=0,j}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(F){this.pickId=F},O.highlight=function(F){if(F&&this.contourEnable){for(var j=d(this.cells,this.intensity,F.intensity),q=j.cells,te=j.vertexIds,ee=j.vertexWeights,Q=q.length,J=m.mallocFloat32(6*Q),K=0,Y=0;Y<Q;++Y)for(var ie=q[Y],se=0;se<2;++se){var ae=ie[0];ie.length===2&&(ae=ie[se]);for(var ue=te[ae][0],ve=te[ae][1],ye=ee[ae],de=1-ye,pe=this.positions[ue],ge=this.positions[ve],ke=0;ke<3;++ke)J[K++]=ye*pe[ke]+de*ge[ke]}this.contourCount=K/3|0,this.contourPositions.update(J.subarray(0,K)),m.free(J)}else this.contourCount=0},O.update=function(F){F=F||{};var j=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=a(j,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=j.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=j.LINEAR,this.texture.setPixels(function(Pt,It){for(var At=x({colormap:Pt,nshades:256,format:"rgba"}),qe=new Uint8Array(1024),Ye=0;Ye<256;++Ye){for(var Ne=At[Ye],We=0;We<3;++We)qe[4*Ye+We]=Ne[We];qe[4*Ye+3]=It?255*R(Ye/255,It):255*Ne[3]}return u(qe,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var q=F.cells,te=F.positions;if(te&&q){var ee=[],Q=[],J=[],K=[],Y=[],ie=[],se=[],ae=[],ue=[],ve=[],ye=[],de=[],pe=[],ge=[];this.cells=q,this.positions=te;var ke=F.vertexNormals,Ee=F.cellNormals,me=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,oe=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!Ee&&(Ee=l.faceNormals(q,te,oe)),Ee||ke||(ke=l.vertexNormals(q,te,me));var re=F.vertexColors,fe=F.cellColors,Se=F.meshColor||[1,1,1,1],be=F.vertexUVs,we=F.vertexIntensity,Me=F.cellUVs,Ie=F.cellIntensity,Oe=1/0,he=-1/0;if(!be&&!Me)if(we)if(F.vertexIntensityBounds)Oe=+F.vertexIntensityBounds[0],he=+F.vertexIntensityBounds[1];else for(var _e=0;_e<we.length;++_e){var Ae=we[_e];Oe=Math.min(Oe,Ae),he=Math.max(he,Ae)}else if(Ie)if(F.cellIntensityBounds)Oe=+F.cellIntensityBounds[0],he=+F.cellIntensityBounds[1];else for(_e=0;_e<Ie.length;++_e)Ae=Ie[_e],Oe=Math.min(Oe,Ae),he=Math.max(he,Ae);else for(_e=0;_e<te.length;++_e)Ae=te[_e][2],Oe=Math.min(Oe,Ae),he=Math.max(he,Ae);this.intensity=we||Ie||function(Pt){for(var It=Pt.length,At=new Array(It),qe=0;qe<It;++qe)At[qe]=Pt[qe][2];return At}(te),this.pickVertex=!(Ie||fe);var De=F.pointSizes,Le=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=0;_e<te.length;++_e)for(var Be=te[_e],Ve=0;Ve<3;++Ve)!isNaN(Be[Ve])&&isFinite(Be[Ve])&&(this.bounds[0][Ve]=Math.min(this.bounds[0][Ve],Be[Ve]),this.bounds[1][Ve]=Math.max(this.bounds[1][Ve],Be[Ve]));var Ze=0,rt=0,it=0;e:for(_e=0;_e<q.length;++_e){var dt=q[_e];switch(dt.length){case 1:for(Be=te[ht=dt[0]],Ve=0;Ve<3;++Ve)if(isNaN(Be[Ve])||!isFinite(Be[Ve]))continue e;ve.push(Be[0],Be[1],Be[2]),Qe=re?re[ht]:fe?fe[_e]:Se,this.opacityscale&&we?Q.push(Qe[0],Qe[1],Qe[2],this.opacity*R((we[ht]-Oe)/(he-Oe),this.opacityscale)):Qe.length===3?ye.push(Qe[0],Qe[1],Qe[2],this.opacity):(ye.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)),Je=be?be[ht]:we?[(we[ht]-Oe)/(he-Oe),0]:Me?Me[_e]:Ie?[(Ie[_e]-Oe)/(he-Oe),0]:[(Be[2]-Oe)/(he-Oe),0],de.push(Je[0],Je[1]),De?pe.push(De[ht]):pe.push(Le),ge.push(_e),it+=1;break;case 2:for(Ve=0;Ve<2;++Ve){Be=te[ht=dt[Ve]];for(var mt=0;mt<3;++mt)if(isNaN(Be[mt])||!isFinite(Be[mt]))continue e}for(Ve=0;Ve<2;++Ve)Be=te[ht=dt[Ve]],ie.push(Be[0],Be[1],Be[2]),Qe=re?re[ht]:fe?fe[_e]:Se,this.opacityscale&&we?Q.push(Qe[0],Qe[1],Qe[2],this.opacity*R((we[ht]-Oe)/(he-Oe),this.opacityscale)):Qe.length===3?se.push(Qe[0],Qe[1],Qe[2],this.opacity):(se.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)),Je=be?be[ht]:we?[(we[ht]-Oe)/(he-Oe),0]:Me?Me[_e]:Ie?[(Ie[_e]-Oe)/(he-Oe),0]:[(Be[2]-Oe)/(he-Oe),0],ae.push(Je[0],Je[1]),ue.push(_e);rt+=1;break;case 3:for(Ve=0;Ve<3;++Ve)for(Be=te[ht=dt[Ve]],mt=0;mt<3;++mt)if(isNaN(Be[mt])||!isFinite(Be[mt]))continue e;for(Ve=0;Ve<3;++Ve){var ht,Qe,Je,wt;Be=te[ht=dt[2-Ve]],ee.push(Be[0],Be[1],Be[2]),(Qe=re?re[ht]:fe?fe[_e]:Se)?this.opacityscale&&we?Q.push(Qe[0],Qe[1],Qe[2],this.opacity*R((we[ht]-Oe)/(he-Oe),this.opacityscale)):Qe.length===3?Q.push(Qe[0],Qe[1],Qe[2],this.opacity):(Q.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)):Q.push(.5,.5,.5,1),Je=be?be[ht]:we?[(we[ht]-Oe)/(he-Oe),0]:Me?Me[_e]:Ie?[(Ie[_e]-Oe)/(he-Oe),0]:[(Be[2]-Oe)/(he-Oe),0],K.push(Je[0],Je[1]),wt=ke?ke[ht]:Ee[_e],J.push(wt[0],wt[1],wt[2]),Y.push(_e)}Ze+=1}}this.pointCount=it,this.edgeCount=rt,this.triangleCount=Ze,this.pointPositions.update(ve),this.pointColors.update(ye),this.pointUVs.update(de),this.pointSizes.update(pe),this.pointIds.update(new Uint32Array(ge)),this.edgePositions.update(ie),this.edgeColors.update(se),this.edgeUVs.update(ae),this.edgeIds.update(new Uint32Array(ue)),this.trianglePositions.update(ee),this.triangleColors.update(Q),this.triangleUVs.update(K),this.triangleNormals.update(J),this.triangleIds.update(new Uint32Array(Y))}},O.drawTransparent=O.draw=function(F){F=F||{};for(var j=this.gl,q=F.model||P,te=F.view||P,ee=F.projection||P,Q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)Q[0][J]=Math.max(Q[0][J],this.clipBounds[0][J]),Q[1][J]=Math.min(Q[1][J],this.clipBounds[1][J]);var K={model:q,view:te,projection:ee,inverseModel:P.slice(),clipBounds:Q,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};K.inverseModel=h(K.inverseModel,K.model),j.disable(j.CULL_FACE),this.texture.bind(0);var Y=new Array(16);for(c(Y,K.view,K.model),c(Y,K.projection,Y),h(Y,Y),J=0;J<3;++J)K.eyePosition[J]=Y[12+J]/Y[15];var ie,se=Y[15];for(J=0;J<3;++J)se+=this.lightPosition[J]*Y[4*J+3];for(J=0;J<3;++J){for(var ae=Y[12+J],ue=0;ue<3;++ue)ae+=Y[4*ue+J]*this.lightPosition[ue];K.lightPosition[J]=ae/se}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=K,this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=K,this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=K,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=K,this.contourVAO.bind(),j.drawArrays(j.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(F){F=F||{};for(var j=this.gl,q=F.model||P,te=F.view||P,ee=F.projection||P,Q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)Q[0][J]=Math.max(Q[0][J],this.clipBounds[0][J]),Q[1][J]=Math.min(Q[1][J],this.clipBounds[1][J]);this._model=[].slice.call(q),this._view=[].slice.call(te),this._projection=[].slice.call(ee),this._resolution=[j.drawingBufferWidth,j.drawingBufferHeight];var K,Y={model:q,view:te,projection:ee,clipBounds:Q,pickId:this.pickId/255};(K=this.pickShader).bind(),K.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((K=this.pointPickShader).bind(),K.uniforms=Y,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var j=F.value[0]+256*F.value[1]+65536*F.value[2],q=this.cells[j],te=this.positions,ee=new Array(q.length),Q=0;Q<q.length;++Q)ee[Q]=te[q[Q]];var J=F.coord[0],K=F.coord[1];if(!this.pickVertex){var Y=this.positions[q[0]],ie=this.positions[q[1]],se=this.positions[q[2]],ae=[(Y[0]+ie[0]+se[0])/3,(Y[1]+ie[1]+se[1])/3,(Y[2]+ie[2]+se[2])/3];return{_cellCenter:!0,position:[J,K],index:j,cell:q,cellId:j,intensity:this.intensity[j],dataCoordinate:ae}}var ue=y(ee,[J*this.pixelRatio,this._resolution[1]-K*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ue)return null;var ve=ue[2],ye=0;for(Q=0;Q<q.length;++Q)ye+=ve[Q]*this.intensity[q[Q]];return{position:ue[1],index:q[ue[0]],cell:q,cellId:j,intensity:ye,dataCoordinate:this.positions[q[ue[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},p.exports=function(F,j){if(arguments.length===1&&(F=(j=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=function(Ie){var Oe=i(Ie,v.vertex,v.fragment);return Oe.attributes.position.location=0,Oe.attributes.color.location=2,Oe.attributes.uv.location=3,Oe.attributes.normal.location=4,Oe}(F),te=function(Ie){var Oe=i(Ie,_.vertex,_.fragment);return Oe.attributes.position.location=0,Oe.attributes.color.location=2,Oe.attributes.uv.location=3,Oe}(F),ee=U(F),Q=D(F),J=N(F),K=W(F),Y=a(F,u(new Uint8Array([255,255,255,255]),[1,1,4]));Y.generateMipmap(),Y.minFilter=F.LINEAR_MIPMAP_LINEAR,Y.magFilter=F.LINEAR;var ie=n(F),se=n(F),ae=n(F),ue=n(F),ve=n(F),ye=r(F,[{buffer:ie,type:F.FLOAT,size:3},{buffer:ve,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:F.FLOAT,size:4},{buffer:ae,type:F.FLOAT,size:2},{buffer:ue,type:F.FLOAT,size:3}]),de=n(F),pe=n(F),ge=n(F),ke=n(F),Ee=r(F,[{buffer:de,type:F.FLOAT,size:3},{buffer:ke,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:F.FLOAT,size:4},{buffer:ge,type:F.FLOAT,size:2}]),me=n(F),oe=n(F),re=n(F),fe=n(F),Se=n(F),be=r(F,[{buffer:me,type:F.FLOAT,size:3},{buffer:Se,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:F.FLOAT,size:4},{buffer:re,type:F.FLOAT,size:2},{buffer:fe,type:F.FLOAT,size:1}]),we=n(F),Me=new C(F,Y,q,te,ee,Q,J,K,ie,ve,se,ae,ue,ye,de,ke,pe,ge,Ee,me,Se,oe,re,fe,be,we,r(F,[{buffer:we,type:F.FLOAT,size:3}]));return Me.update(j),Me}},8120:function(p,s,t){"use strict";p.exports=function(u){var x=u.gl;return new a(u,i(x,[0,0,0,1,1,0,1,1]),n(x,r.boxVert,r.lineFrag))};var i=t(2762),n=t(9405),r=t(3603);function a(u,x,d){this.plot=u,this.vbo=x,this.shader=d}var l,c,h=a.prototype;h.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},h.drawBox=(l=[0,0],c=[0,0],function(u,x,d,m,g){var y=this.plot,v=this.shader,_=y.gl;l[0]=u,l[1]=x,c[0]=d,c[1]=m,v.uniforms.lo=l,v.uniforms.hi=c,v.uniforms.color=g,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(p,s,t){"use strict";p.exports=function(y){var v=y.gl;return new l(y,i(v),n(v,a.gridVert,a.gridFrag),n(v,a.tickVert,a.gridFrag))};var i=t(2762),n=t(9405),r=t(2478),a=t(3603);function l(y,v,_,f){this.plot=y,this.vbo=v,this.shader=_,this.tickShader=f,this.ticks=[[],[]]}function c(y,v){return y-v}var h,u,x,d,m,g=l.prototype;g.draw=(h=[0,0],u=[0,0],x=[0,0],function(){for(var y=this.plot,v=this.vbo,_=this.shader,f=this.ticks,S=y.gl,w=y._tickBounds,E=y.dataBox,P=y.viewBox,C=y.gridLineWidth,O=y.gridLineColor,R=y.gridLineEnable,U=y.pixelRatio,D=0;D<2;++D){var N=w[D],W=w[D+2]-N,F=.5*(E[D+2]+E[D]),j=E[D+2]-E[D];u[D]=2*W/j,h[D]=2*(N-F)/j}_.bind(),v.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=h,_.uniforms.dataScale=u;var q=0;for(D=0;D<2;++D){x[0]=x[1]=0,x[D]=1,_.uniforms.dataAxis=x,_.uniforms.lineWidth=C[D]/(P[D+2]-P[D])*U,_.uniforms.color=O[D];var te=6*f[D].length;R[D]&&te&&S.drawArrays(S.TRIANGLES,q,te),q+=te}}),g.drawTickMarks=function(){var y=[0,0],v=[0,0],_=[1,0],f=[0,1],S=[0,0],w=[0,0];return function(){for(var E=this.plot,P=this.vbo,C=this.tickShader,O=this.ticks,R=E.gl,U=E._tickBounds,D=E.dataBox,N=E.viewBox,W=E.pixelRatio,F=E.screenBox,j=F[2]-F[0],q=F[3]-F[1],te=N[2]-N[0],ee=N[3]-N[1],Q=0;Q<2;++Q){var J=U[Q],K=U[Q+2]-J,Y=.5*(D[Q+2]+D[Q]),ie=D[Q+2]-D[Q];v[Q]=2*K/ie,y[Q]=2*(J-Y)/ie}v[0]*=te/j,y[0]*=te/j,v[1]*=ee/q,y[1]*=ee/q,C.bind(),P.bind(),C.attributes.dataCoord.pointer();var se=C.uniforms;se.dataShift=y,se.dataScale=v;var ae=E.tickMarkLength,ue=E.tickMarkWidth,ve=E.tickMarkColor,ye=6*O[0].length,de=Math.min(r.ge(O[0],(D[0]-U[0])/(U[2]-U[0]),c),O[0].length),pe=Math.min(r.gt(O[0],(D[2]-U[0])/(U[2]-U[0]),c),O[0].length),ge=0+6*de,ke=6*Math.max(0,pe-de),Ee=Math.min(r.ge(O[1],(D[1]-U[1])/(U[3]-U[1]),c),O[1].length),me=Math.min(r.gt(O[1],(D[3]-U[1])/(U[3]-U[1]),c),O[1].length),oe=ye+6*Ee,re=6*Math.max(0,me-Ee);S[0]=2*(N[0]-ae[1])/j-1,S[1]=(N[3]+N[1])/q-1,w[0]=ae[1]*W/j,w[1]=ue[1]*W/q,re&&(se.color=ve[1],se.tickScale=w,se.dataAxis=f,se.screenOffset=S,R.drawArrays(R.TRIANGLES,oe,re)),S[0]=(N[2]+N[0])/j-1,S[1]=2*(N[1]-ae[0])/q-1,w[0]=ue[0]*W/j,w[1]=ae[0]*W/q,ke&&(se.color=ve[0],se.tickScale=w,se.dataAxis=_,se.screenOffset=S,R.drawArrays(R.TRIANGLES,ge,ke)),S[0]=2*(N[2]+ae[3])/j-1,S[1]=(N[3]+N[1])/q-1,w[0]=ae[3]*W/j,w[1]=ue[3]*W/q,re&&(se.color=ve[3],se.tickScale=w,se.dataAxis=f,se.screenOffset=S,R.drawArrays(R.TRIANGLES,oe,re)),S[0]=(N[2]+N[0])/j-1,S[1]=2*(N[3]+ae[2])/q-1,w[0]=ue[2]*W/j,w[1]=ae[2]*W/q,ke&&(se.color=ve[2],se.tickScale=w,se.dataAxis=_,se.screenOffset=S,R.drawArrays(R.TRIANGLES,ge,ke))}}(),g.update=(d=[1,1,-1,-1,1,-1],m=[1,-1,1,1,-1,-1],function(y){for(var v=y.ticks,_=y.bounds,f=new Float32Array(18*(v[0].length+v[1].length)),S=(this.plot.zeroLineEnable,0),w=[[],[]],E=0;E<2;++E)for(var P=w[E],C=v[E],O=_[E],R=_[E+2],U=0;U<C.length;++U){var D=(C[U].x-O)/(R-O);P.push(D);for(var N=0;N<6;++N)f[S++]=D,f[S++]=d[N],f[S++]=m[N]}this.ticks=w,this.vbo.update(f)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(p,s,t){"use strict";p.exports=function(u){var x=u.gl;return new a(u,i(x,[-1,-1,-1,1,1,-1,1,1]),n(x,r.lineVert,r.lineFrag))};var i=t(2762),n=t(9405),r=t(3603);function a(u,x,d){this.plot=u,this.vbo=x,this.shader=d}var l,c,h=a.prototype;h.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},h.drawLine=(l=[0,0],c=[0,0],function(u,x,d,m,g,y){var v=this.plot,_=this.shader,f=v.gl;l[0]=u,l[1]=x,c[0]=d,c[1]=m,_.uniforms.start=l,_.uniforms.end=c,_.uniforms.width=g*v.pixelRatio,_.uniforms.color=y,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(p,s,t){"use strict";var i=t(3236),n=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);p.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(p,s,t){"use strict";p.exports=function(v){var _=v.gl;return new c(v,i(_),n(_,l.textVert,l.textFrag))};var i=t(2762),n=t(9405),r=t(529),a=t(2478),l=t(3603);function c(v,_,f){this.plot=v,this.vbo=_,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,u,x,d,m,g,y=c.prototype;y.drawTicks=(h=[0,0],u=[0,0],x=[0,0],function(v){var _=this.plot,f=this.shader,S=this.tickX[v],w=this.tickOffset[v],E=_.gl,P=_.viewBox,C=_.dataBox,O=_.screenBox,R=_.pixelRatio,U=_.tickEnable,D=_.tickPad,N=_.tickColor,W=_.tickAngle,F=_.labelEnable,j=_.labelPad,q=_.labelColor,te=_.labelAngle,ee=this.labelOffset[v],Q=this.labelCount[v],J=a.lt(S,C[v]),K=a.le(S,C[v+2]);h[0]=h[1]=0,h[v]=1,u[v]=(P[2+v]+P[v])/(O[2+v]-O[v])-1;var Y=2/O[2+(1^v)]-O[1^v];u[1^v]=Y*P[1^v]-1,U[v]&&(u[1^v]-=Y*R*D[v],J<K&&w[K]>w[J]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=u,f.uniforms.color=N[v],f.uniforms.angle=W[v],E.drawArrays(E.TRIANGLES,w[J],w[K]-w[J]))),F[v]&&Q&&(u[1^v]-=Y*R*j[v],f.uniforms.dataAxis=x,f.uniforms.screenOffset=u,f.uniforms.color=q[v],f.uniforms.angle=te[v],E.drawArrays(E.TRIANGLES,ee,Q)),u[1^v]=Y*P[2+(1^v)]-1,U[v+2]&&(u[1^v]+=Y*R*D[v+2],J<K&&w[K]>w[J]&&(f.uniforms.dataAxis=h,f.uniforms.screenOffset=u,f.uniforms.color=N[v+2],f.uniforms.angle=W[v+2],E.drawArrays(E.TRIANGLES,w[J],w[K]-w[J]))),F[v+2]&&Q&&(u[1^v]+=Y*R*j[v+2],f.uniforms.dataAxis=x,f.uniforms.screenOffset=u,f.uniforms.color=q[v+2],f.uniforms.angle=te[v+2],E.drawArrays(E.TRIANGLES,ee,Q))}),y.drawTitle=function(){var v=[0,0],_=[0,0];return function(){var f=this.plot,S=this.shader,w=f.gl,E=f.screenBox,P=f.titleCenter,C=f.titleAngle,O=f.titleColor,R=f.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)_[U]=2*(P[U]*R-E[U])/(E[2+U]-E[U])-1;S.bind(),S.uniforms.dataAxis=v,S.uniforms.screenOffset=_,S.uniforms.angle=C,S.uniforms.color=O,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}}(),y.bind=(d=[0,0],m=[0,0],g=[0,0],function(){var v=this.plot,_=this.shader,f=v._tickBounds,S=v.dataBox,w=v.screenBox,E=v.viewBox;_.bind();for(var P=0;P<2;++P){var C=f[P],O=f[P+2]-C,R=.5*(S[P+2]+S[P]),U=S[P+2]-S[P],D=E[P],N=E[P+2]-D,W=w[P],F=w[P+2]-W;m[P]=2*O/U*N/F,d[P]=2*(C-R)/U*N/F}g[1]=2*v.pixelRatio/(w[3]-w[1]),g[0]=g[1]*(w[3]-w[1])/(w[2]-w[0]),_.uniforms.dataScale=m,_.uniforms.dataShift=d,_.uniforms.textScale=g,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),y.update=function(v){var _,f,S,w,E,P=[],C=v.ticks,O=v.bounds;for(E=0;E<2;++E){var R=[Math.floor(P.length/3)],U=[-1/0],D=C[E];for(_=0;_<D.length;++_){var N=D[_],W=N.x,F=N.text,j=N.font||"sans-serif",q=N.fontStyle||"normal",te=N.fontWeight||"normal",ee=N.fontVariant||"normal";w=N.fontSize||12;for(var Q=1/(O[E+2]-O[E]),J=O[E],K=F.split(`
`),Y=0;Y<K.length;Y++)for(S=r(j,K[Y],{fontStyle:q,fontWeight:te,fontVariant:ee}).data,f=0;f<S.length;f+=2)P.push(S[f]*w,-S[f+1]*w-Y*w*1.2,(W-J)*Q);R.push(Math.floor(P.length/3)),U.push(W)}this.tickOffset[E]=R,this.tickX[E]=U}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(P.length/3),S=r(v.labelFont[E],v.labels[E],{fontStyle:v.labelFontStyle[E],fontWeight:v.labelFontWeight[E],fontVariant:v.labelFontVariant[E],textAlign:"center"}).data,w=v.labelSize[E],_=0;_<S.length;_+=2)P.push(S[_]*w,-S[_+1]*w,0);this.labelCount[E]=Math.floor(P.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(P.length/3),S=r(v.titleFont,v.title,{fontStyle:v.titleFontStyle,fontWeight:v.titleFontWeight,fontVariant:v.titleFontVariant}).data,w=v.titleSize,_=0;_<S.length;_+=2)P.push(S[_]*w,-S[_+1]*w,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},y.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(p,s,t){"use strict";p.exports=function(d){var m=d.gl,g=new c(m,i(m,[m.drawingBufferWidth,m.drawingBufferHeight]));return g.grid=n(g),g.text=r(g),g.line=a(g),g.box=l(g),g.update(d),g};var i=t(3589),n=t(1913),r=t(2142),a=t(4747),l=t(8120);function c(d,m){this.gl=d,this.pickBuffer=m,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=c.prototype;function u(d){for(var m=d.slice(),g=0;g<m.length;++g)m[g]=m[g].slice();return m}function x(d,m){return d.x-m.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var d=this.gl,m=this.screenBox,g=this.viewBox,y=this.dataBox,v=this.pixelRatio,_=this.grid,f=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]);var E=this.borderColor;d.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),d.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var P=this.backgroundColor;d.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),d.clear(d.COLOR_BUFFER_BIT),_.draw();var C=this.zeroLineEnable,O=this.zeroLineColor,R=this.zeroLineWidth;if(C[0]||C[1]){f.bind();for(var U=0;U<2;++U)if(C[U]&&y[U]<=0&&y[U+2]>=0){var D=m[U]-y[U]*(m[U+2]-m[U])/(y[U+2]-y[U]);U===0?f.drawLine(D,m[1],D,m[3],R[U],O[U]):f.drawLine(m[0],D,m[2],D,R[U],O[U])}}for(U=0;U<w.length;++U)w[U].draw();d.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]),d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),this.grid.drawTickMarks(),f.bind();var N=this.borderLineEnable,W=this.borderLineWidth,F=this.borderLineColor;for(N[1]&&f.drawLine(g[0],g[1]-.5*W[1]*v,g[0],g[3]+.5*W[3]*v,W[1],F[1]),N[0]&&f.drawLine(g[0]-.5*W[0]*v,g[1],g[2]+.5*W[2]*v,g[1],W[0],F[0]),N[3]&&f.drawLine(g[2],g[1]-.5*W[1]*v,g[2],g[3]+.5*W[3]*v,W[3],F[3]),N[2]&&f.drawLine(g[0]-.5*W[0]*v,g[3],g[2]+.5*W[2]*v,g[3],W[2],F[2]),S.bind(),U=0;U<2;++U)S.drawTicks(U);this.titleEnable&&S.drawTitle();var j=this.overlays;for(U=0;U<j.length;++U)j[U].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}},h.drawPick=function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var m=1,g=this.objects,y=0;y<g.length;++y)m=g[y].drawPick(m);d.end()}},h.pick=function(d,m){if(!this.static){var g=this.pixelRatio,y=this.pickPixelRatio,v=this.viewBox,_=0|Math.round((d-v[0]/g)*y),f=0|Math.round((m-v[1]/g)*y),S=this.pickBuffer.query(_,f,this.pickRadius);if(!S)return null;for(var w=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,P=0;P<E.length;++P){var C=E[P].pick(_,f,w);if(C)return C}return null}},h.setScreenBox=function(d){var m=this.screenBox,g=this.pixelRatio;m[0]=0|Math.round(d[0]*g),m[1]=0|Math.round(d[1]*g),m[2]=0|Math.round(d[2]*g),m[3]=0|Math.round(d[3]*g),this.setDirty()},h.setDataBox=function(d){var m=this.dataBox;(m[0]!==d[0]||m[1]!==d[1]||m[2]!==d[2]||m[3]!==d[3])&&(m[0]=d[0],m[1]=d[1],m[2]=d[2],m[3]=d[3],this.setDirty())},h.setViewBox=function(d){var m=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(d[0]*m),g[1]=0|Math.round(d[1]*m),g[2]=0|Math.round(d[2]*m),g[3]=0|Math.round(d[3]*m);var y=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((d[2]-d[0])*y),0|Math.round((d[3]-d[1])*y)],this.setDirty()},h.update=function(d){d=d||{};var m=this.gl;this.pixelRatio=d.pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(d.screenBox||[0,0,m.drawingBufferWidth/g,m.drawingBufferHeight/g]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var y=this.viewBox,v=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(d.dataBox||[-10,-10/v,10,10/v]),this.borderColor=d.borderColor!==!1&&(d.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=u(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=u(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=u(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(y[0]+y[2])/g,(y[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=u(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=u(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=u(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=d.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var S=0;S<2;++S){var w=_[S].slice(0);w.length!==0&&(w.sort(x),f[S]=Math.min(f[S],w[0].x),f[S+2]=Math.max(f[S+2],w[w.length-1].x))}this.grid.update({bounds:f,ticks:_}),this.text.update({bounds:f,ticks:_,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],labelFontStyle:d.labelFontStyle||["normal","normal"],labelFontWeight:d.labelFontWeight||["normal","normal"],labelFontVariant:d.labelFontVariant||["normal","normal"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif",titleFontStyle:d.titleFontStyle||"normal",titleFontWeight:d.titleFontWeight||"normal",titleFontVariant:d.titleFontVariant||"normal"}),this.static=!!d.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();for(this.objects.length=0,d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},h.removeObject=function(d){for(var m=this.objects,g=0;g<m.length;++g)if(m[g]===d){m.splice(g,1),this.setDirty();break}},h.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},h.removeOverlay=function(d){for(var m=this.overlays,g=0;g<m.length;++g)if(m[g]===d){m.splice(g,1),this.setOverlayDirty();break}}},4437:function(p,s,t){"use strict";p.exports=function(h,u){h=h||document.body;var x=[.01,1/0];"distanceLimits"in(u=u||{})&&(x[0]=u.distanceLimits[0],x[1]=u.distanceLimits[1]),"zoomMin"in u&&(x[0]=u.zoomMin),"zoomMax"in u&&(x[1]=u.zoomMax);var d=n({center:u.center||[0,0,0],up:u.up||[0,1,0],eye:u.eye||[0,0,10],mode:u.mode||"orbit",distanceLimits:x}),m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,y=h.clientWidth,v=h.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:d,element:h,delay:u.delay||16,rotateSpeed:u.rotateSpeed||1,zoomSpeed:u.zoomSpeed||1,translateSpeed:u.translateSpeed||1,flipX:!!u.flipX,flipY:!!u.flipY,modes:d.modes,_ortho:u._ortho||u.projection&&u.projection.type==="orthographic"||!1,tick:function(){var f=i(),S=this.delay,w=f-2*S;d.idle(f-S),d.recalcMatrix(w),d.flush(f-(100+2*S));for(var E=!0,P=d.computedMatrix,C=0;C<16;++C)E=E&&m[C]===P[C],m[C]=P[C];var O=h.clientWidth===y&&h.clientHeight===v;return y=h.clientWidth,v=h.clientHeight,E?!O:(g=Math.exp(d.computedRadius[0]),!0)},lookAt:function(f,S,w){d.lookAt(d.lastT(),f,S,w)},rotate:function(f,S,w){d.rotate(d.lastT(),f,S,w)},pan:function(f,S,w){d.pan(d.lastT(),f,S,w)},translate:function(f,S,w){d.translate(d.lastT(),f,S,w)}};return Object.defineProperties(_,{matrix:{get:function(){return d.computedMatrix},set:function(f){return d.setMatrix(d.lastT(),f),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(f){var S=d.computedUp.slice(),w=d.computedEye.slice(),E=d.computedCenter.slice();if(d.setMode(f),f==="turntable"){var P=i();d._active.lookAt(P,w,E,S),d._active.lookAt(P+500,w,E,[0,0,1]),d._active.flush(P)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(f){return d.lookAt(d.lastT(),null,f),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(f){return d.lookAt(d.lastT(),f),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(f){return d.lookAt(d.lastT(),null,null,f),d.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(f){return d.setDistance(d.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(x)},set:function(f){return d.setDistanceLimits(f),f},enumerable:!0}}),h.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function f(S,w,E,P){var C=_.keyBindingMode;if(C!==!1){var O=C==="rotate",R=C==="pan",U=C==="zoom",D=!!P.control,N=!!P.alt,W=!!P.shift,F=!!(1&S),j=!!(2&S),q=!!(4&S),te=1/h.clientHeight,ee=te*(w-_._lastX),Q=te*(E-_._lastY),J=_.flipX?1:-1,K=_.flipY?1:-1,Y=Math.PI*_.rotateSpeed,ie=i();if(_._lastX!==-1&&_._lastY!==-1&&((O&&F&&!D&&!N&&!W||F&&!D&&!N&&W)&&d.rotate(ie,J*Y*ee,-K*Y*Q,0),(R&&F&&!D&&!N&&!W||j||F&&D&&!N&&!W)&&d.pan(ie,-_.translateSpeed*ee*g,_.translateSpeed*Q*g,0),U&&F&&!D&&!N&&!W||q||F&&!D&&N&&!W)){var se=-_.zoomSpeed*Q/window.innerHeight*(ie-d.lastT())*100;d.pan(ie,0,0,g*(Math.exp(se)-1))}return _._lastX=w,_._lastY=E,_._lastMods=P,!0}}_.mouseListener=r(h,f),h.addEventListener("touchstart",function(S){var w=l(S.changedTouches[0],h);f(0,w[0],w[1],_._lastMods),f(1,w[0],w[1],_._lastMods)},!!c&&{passive:!0}),h.addEventListener("touchmove",function(S){var w=l(S.changedTouches[0],h);f(1,w[0],w[1],_._lastMods),S.preventDefault()},!!c&&{passive:!1}),h.addEventListener("touchend",function(S){f(0,_._lastX,_._lastY,_._lastMods)},!!c&&{passive:!0}),_.wheelListener=a(h,function(S,w){if(_.keyBindingMode!==!1&&_.enableWheel){var E=_.flipX?1:-1,P=_.flipY?1:-1,C=i();if(Math.abs(S)>Math.abs(w))d.rotate(C,0,0,-S*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var O=-_.zoomSpeed*P*w/window.innerHeight*(C-d.lastT())/20;d.pan(C,0,0,g*(Math.exp(O)-1))}}},!0)},_.enableMouseListeners(),_};var i=t(3025),n=t(6296),r=t(351),a=t(8512),l=t(24),c=t(7520)},799:function(p,s,t){var i=t(3236),n=t(9405),r=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);p.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec2"}])}},4100:function(p,s,t){"use strict";var i=t(4437),n=t(3837),r=t(5445),a=t(4449),l=t(3589),c=t(2260),h=t(7169),u=t(351),x=t(4772),d=t(4040),m=t(799),g=t(9216)({tablet:!0,featureDetect:!0});function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(f){var S=Math.round(Math.log(Math.abs(f))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(f*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(f/w)*w):Math.ceil(f)}function _(f){return typeof f!="boolean"||f}p.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var S=f.canvas;S||(S=document.createElement("canvas"),f.container?f.container.appendChild(S):document.body.appendChild(S));var w=f.gl;if(w||(f.glOptions&&(g=!!f.glOptions.preserveDrawingBuffer),w=function(ke,Ee){var me=null;try{(me=ke.getContext("webgl",Ee))||(me=ke.getContext("experimental-webgl",Ee))}catch{return null}return me}(S,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!w)throw new Error("webgl not supported");var E=f.bounds||[[-10,-10,-10],[10,10,10]],P=new y,C=c(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!g}),O=m(w),R=f.cameraObject&&f.cameraObject._ortho===!0||f.camera.projection&&f.camera.projection.type==="orthographic"||!1,U={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:R},D=f.axes||{},N=n(w,D);N.enable=!D.disable;var W=f.spikes||{},F=a(w,W),j=[],q=[],te=[],ee=[],Q=!0,J=!0,K={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Y=(J=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),ie=f.cameraObject||i(S,U),se={gl:w,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:S,selection:P,camera:ie,axes:N,axesPixels:null,spikes:F,bounds:E,objects:j,shape:Y,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:_(f.autoResize),autoBounds:_(f.autoBounds),autoScale:!!f.autoScale,autoCenter:_(f.autoCenter),clipToBounds:_(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:K,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ke){this.aspect[0]=ke.x,this.aspect[1]=ke.y,this.aspect[2]=ke.z,J=!0},setBounds:function(ke,Ee){this.bounds[0][ke]=Ee.min,this.bounds[1][ke]=Ee.max},setClearColor:function(ke){this.clearColor=ke},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[w.drawingBufferWidth/se.pixelRatio|0,w.drawingBufferHeight/se.pixelRatio|0];function ue(){if(!se._stopped&&se.autoResize){var ke=S.parentNode,Ee=1,me=1;ke&&ke!==document.body?(Ee=ke.clientWidth,me=ke.clientHeight):(Ee=window.innerWidth,me=window.innerHeight);var oe=0|Math.ceil(Ee*se.pixelRatio),re=0|Math.ceil(me*se.pixelRatio);if(oe!==S.width||re!==S.height){S.width=oe,S.height=re;var fe=S.style;fe.position=fe.position||"absolute",fe.left="0px",fe.top="0px",fe.width=Ee+"px",fe.height=me+"px",Q=!0}}}function ve(){for(var ke=j.length,Ee=ee.length,me=0;me<Ee;++me)te[me]=0;e:for(me=0;me<ke;++me){var oe=j[me],re=oe.pickSlots;if(re){for(var fe=0;fe<Ee;++fe)if(te[fe]+re<255){q[me]=fe,oe.setPickBase(te[fe]+1),te[fe]+=re;continue e}var Se=l(w,Y);q[me]=Ee,ee.push(Se),te.push(re),oe.setPickBase(1),Ee+=1}else q[me]=-1}for(;Ee>0&&te[Ee-1]===0;)te.pop(),ee.pop().dispose()}function ye(){if(se.contextLost)return!0;w.isContextLost()&&(se.contextLost=!0,se.mouseListener.enabled=!1,se.selection.object=null,se.oncontextloss&&se.oncontextloss())}se.autoResize&&ue(),window.addEventListener("resize",ue),se.update=function(ke){se._stopped||(ke=ke||{},Q=!0,J=!0)},se.add=function(ke){se._stopped||(ke.axes=N,j.push(ke),q.push(-1),Q=!0,J=!0,ve())},se.remove=function(ke){if(!se._stopped){var Ee=j.indexOf(ke);Ee<0||(j.splice(Ee,1),q.pop(),Q=!0,J=!0,ve())}},se.dispose=function(){if(!se._stopped&&(se._stopped=!0,window.removeEventListener("resize",ue),S.removeEventListener("webglcontextlost",ye),se.mouseListener.enabled=!1,!se.contextLost)){N.dispose(),F.dispose();for(var ke=0;ke<j.length;++ke)j[ke].dispose();for(C.dispose(),ke=0;ke<ee.length;++ke)ee[ke].dispose();O.dispose(),w=null,N=null,F=null,j=[]}},se._mouseRotating=!1,se._prevButtons=0,se.enableMouseListeners=function(){se.mouseListener=u(S,function(ke,Ee,me){if(!se._stopped){var oe=ee.length,re=j.length,fe=P.object;P.distance=1/0,P.mouse[0]=Ee,P.mouse[1]=me,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Se=!1;if(ke&&se._prevButtons)se._mouseRotating=!0;else{se._mouseRotating&&(J=!0),se._mouseRotating=!1;for(var be=0;be<oe;++be){var we=ee[be].query(Ee,ae[1]-me-1,se.pickRadius);if(we){if(we.distance>P.distance)continue;for(var Me=0;Me<re;++Me){var Ie=j[Me];if(q[Me]===be){var Oe=Ie.pick(we);Oe&&(P.buttons=ke,P.screen=we.coord,P.distance=we.distance,P.object=Ie,P.index=Oe.distance,P.dataPosition=Oe.position,P.dataCoordinate=Oe.dataCoordinate,P.data=Oe,Se=!0)}}}}}fe&&fe!==P.object&&(fe.highlight&&fe.highlight(null),Q=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),Q=!0),(Se=Se||P.object!==fe)&&se.onselect&&se.onselect(P),1&ke&&!(1&se._prevButtons)&&se.onclick&&se.onclick(P),se._prevButtons=ke}})},S.addEventListener("webglcontextlost",ye);var de=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],pe=[de[0].slice(),de[1].slice()];function ge(){if(!ye()){ue();var ke=se.camera.tick();K.view=se.camera.matrix,Q=Q||ke,J=J||ke,N.pixelRatio=se.pixelRatio,F.pixelRatio=se.pixelRatio;var Ee=j.length,me=de[0],oe=de[1];me[0]=me[1]=me[2]=1/0,oe[0]=oe[1]=oe[2]=-1/0;for(var re=0;re<Ee;++re){(Le=j[re]).pixelRatio=se.pixelRatio,Le.axes=se.axes,Q=Q||!!Le.dirty,J=J||!!Le.dirty;var fe=Le.bounds;if(fe)for(var Se=fe[0],be=fe[1],we=0;we<3;++we)me[we]=Math.min(me[we],Se[we]),oe[we]=Math.max(oe[we],be[we])}var Me=se.bounds;if(se.autoBounds)for(we=0;we<3;++we){if(oe[we]<me[we])me[we]=-1,oe[we]=1;else{me[we]===oe[we]&&(me[we]-=1,oe[we]+=1);var Ie=.05*(oe[we]-me[we]);me[we]=me[we]-Ie,oe[we]=oe[we]+Ie}Me[0][we]=me[we],Me[1][we]=oe[we]}var Oe=!1;for(we=0;we<3;++we)Oe=Oe||pe[0][we]!==Me[0][we]||pe[1][we]!==Me[1][we],pe[0][we]=Me[0][we],pe[1][we]=Me[1][we];if(J=J||Oe,Q=Q||Oe){if(Oe){var he=[0,0,0];for(re=0;re<3;++re)he[re]=v((Me[1][re]-Me[0][re])/10);N.autoTicks?N.update({bounds:Me,tickSpacing:he}):N.update({bounds:Me})}var _e=w.drawingBufferWidth,Ae=w.drawingBufferHeight;for(Y[0]=_e,Y[1]=Ae,ae[0]=0|Math.max(_e/se.pixelRatio,1),ae[1]=0|Math.max(Ae/se.pixelRatio,1),function(Be,Ve){var Ze=Be.bounds,rt=Be.cameraParams,it=rt.projection,dt=rt.model,mt=Be.gl.drawingBufferWidth,ht=Be.gl.drawingBufferHeight,Qe=Be.zNear,Je=Be.zFar,wt=Be.fovy,Pt=mt/ht;Ve?(d(it,-Pt,Pt,-1,1,Qe,Je),rt._ortho=!0):(x(it,wt,Pt,Qe,Je),rt._ortho=!1);for(var It=0;It<16;++It)dt[It]=0;dt[15]=1;var At=0;for(It=0;It<3;++It)At=Math.max(At,Ze[1][It]-Ze[0][It]);for(It=0;It<3;++It)Be.autoScale?dt[5*It]=Be.aspect[It]/(Ze[1][It]-Ze[0][It]):dt[5*It]=1/At,Be.autoCenter&&(dt[12+It]=.5*-dt[5*It]*(Ze[0][It]+Ze[1][It]))}(se,R),re=0;re<Ee;++re)(Le=j[re]).axesBounds=Me,se.clipToBounds&&(Le.clipBounds=Me);P.object&&(se.snapToData?F.position=P.dataCoordinate:F.position=P.dataPosition,F.bounds=Me),J&&(J=!1,function(){if(!ye()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var Be=j.length,Ve=ee.length,Ze=0;Ze<Ve;++Ze){var rt=ee[Ze];rt.shape=ae,rt.begin();for(var it=0;it<Be;++it)if(q[it]===Ze){var dt=j[it];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(K))}rt.end()}}}()),se.axesPixels=r(se.axes,K,_e,Ae),se.onrender&&se.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,_e,Ae),se.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var De=!1;for(N.enable&&(De=De||N.isTransparent(),N.draw(K)),F.axes=N,P.object&&F.draw(K),w.disable(w.CULL_FACE),re=0;re<Ee;++re)(Le=j[re]).axes=N,Le.pixelRatio=se.pixelRatio,Le.isOpaque&&Le.isOpaque()&&Le.draw(K),Le.isTransparent&&Le.isTransparent()&&(De=!0);if(De){for(C.shape=Y,C.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),N.enable&&N.isTransparent()&&N.drawTransparent(K),re=0;re<Ee;++re)(Le=j[re]).isOpaque&&Le.isOpaque()&&Le.draw(K);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),N.isTransparent()&&N.drawTransparent(K),re=0;re<Ee;++re){var Le;(Le=j[re]).isTransparent&&Le.isTransparent()&&Le.drawTransparent(K)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),O.bind(),C.color[0].bind(0),O.uniforms.accumBuffer=0,h(w),w.disable(w.BLEND)}for(Q=!1,re=0;re<Ee;++re)j[re].dirty=!1}}}return se.enableMouseListeners(),function ke(){se._stopped||se.contextLost||(ge(),requestAnimationFrame(ke))}(),se.redraw=function(){se._stopped||(Q=!0,ge())},se},createCamera:i}},6640:function(p,s,t){var i=t(3236);s.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(p,s,t){"use strict";var i=t(9405),n=t(2762),r=t(1888),a=t(6640);function l(x,d,m,g,y){this.plot=x,this.offsetBuffer=d,this.pickBuffer=m,this.shader=g,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}p.exports=function(x,d){var m=x.gl,g=new l(x,n(m),n(m),i(m,a.pointVertex,a.pointFragment),i(m,a.pickVertex,a.pickFragment));return g.update(d),x.addObject(g),g};var c,h,u=l.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(x){var d;function m(w,E){return w in x?x[w]:E}x=x||{},this.sizeMin=m("sizeMin",.5),this.sizeMax=m("sizeMax",20),this.color=m("color",[1,0,0,1]).slice(),this.areaRatio=m("areaRatio",1),this.borderColor=m("borderColor",[0,0,0,1]).slice(),this.blend=m("blend",!1);var g=x.positions.length>>>1,y=x.positions instanceof Float32Array,v=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=g,_=x.positions,f=y?_:r.mallocFloat32(_.length),S=v?x.idToIndex:r.mallocInt32(g);if(y||f.set(_),!v)for(f.set(_),d=0;d<g;d++)S[d]=d;this.points=_,this.offsetBuffer.update(f),this.pickBuffer.update(S),y||r.free(f),v||r.free(S),this.pointCount=g,this.pickOffset=0},u.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(x){var d=x!==void 0,m=d?this.pickShader:this.shader,g=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return x;var v=y[2]-y[0],_=y[3]-y[1],f=function(P,C){var O,R=0,U=P.length>>>1;for(O=0;O<U;O++){var D=P[2*O],N=P[2*O+1];D>=C[0]&&D<=C[2]&&N>=C[1]&&N<=C[3]&&R++}return R}(this.points,y),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));c[0]=2/v,c[4]=2/_,c[6]=-2*y[0]/v-1,c[7]=-2*y[1]/_-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=c,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=S<5,m.uniforms.pointSize=S,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(h[0]=255&x,h[1]=x>>8&255,h[2]=x>>16&255,h[3]=x>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(g.UNSIGNED_BYTE),m.uniforms.pickOffset=h,this.pickOffset=x);var w=g.getParameter(g.BLEND),E=g.getParameter(g.DITHER);return w&&!this.blend&&g.disable(g.BLEND),E&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),w&&!this.blend&&g.enable(g.BLEND),E&&g.enable(g.DITHER),x+this.pointCount}),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(x,d,m){var g=this.pickOffset,y=this.pointCount;if(m<g||m>=g+y)return null;var v=m-g,_=this.points;return{object:this,pointId:v,dataCoord:[_[2*v],_[2*v+1]]}}},783:function(p){p.exports=function(s,t,i,n){var r,a,l,c,h,u=t[0],x=t[1],d=t[2],m=t[3],g=i[0],y=i[1],v=i[2],_=i[3];return(a=u*g+x*y+d*v+m*_)<0&&(a=-a,g=-g,y=-y,v=-v,_=-_),1-a>1e-6?(r=Math.acos(a),l=Math.sin(r),c=Math.sin((1-n)*r)/l,h=Math.sin(n*r)/l):(c=1-n,h=n),s[0]=c*u+h*g,s[1]=c*x+h*y,s[2]=c*d+h*v,s[3]=c*m+h*_,s}},5964:function(p){"use strict";p.exports=function(s){return s||s===0?s.toString():""}},9366:function(p,s,t){"use strict";var i=t(4359);p.exports=function(r,a,l){var c=[a.style,a.weight,a.variant,a.family].join("_"),h=n[c];if(h||(h=n[c]={}),r in h)return h[r];var u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a.family,fontStyle:a.style,fontWeight:a.weight,fontVariant:a.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},x=i(r,u);u.triangles=!1;var d,m,g=i(r,u);if(l&&l!==1){for(d=0;d<x.positions.length;++d)for(m=0;m<x.positions[d].length;++m)x.positions[d][m]/=l;for(d=0;d<g.positions.length;++d)for(m=0;m<g.positions[d].length;++m)g.positions[d][m]/=l}var y=[[1/0,1/0],[-1/0,-1/0]],v=g.positions.length;for(d=0;d<v;++d){var _=g.positions[d];for(m=0;m<2;++m)y[0][m]=Math.min(y[0][m],_[m]),y[1][m]=Math.max(y[1][m],_[m])}return h[r]=[x,g,y]};var n={}},1283:function(p,s,t){var i=t(9405),n=t(3236),r=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),c=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),h=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:r,fragment:c,attributes:u},d={vertex:a,fragment:c,attributes:u},m={vertex:l,fragment:c,attributes:u},g={vertex:r,fragment:h,attributes:u},y={vertex:a,fragment:h,attributes:u},v={vertex:l,fragment:h,attributes:u};function _(f,S){var w=i(f,S),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}s.createPerspective=function(f){return _(f,x)},s.createOrtho=function(f){return _(f,d)},s.createProject=function(f){return _(f,m)},s.createPickPerspective=function(f){return _(f,g)},s.createPickOrtho=function(f){return _(f,y)},s.createPickProject=function(f){return _(f,v)}},8418:function(p,s,t){"use strict";var i=t(5219),n=t(2762),r=t(8116),a=t(1888),l=t(6760),c=t(1283),h=t(9366),u=t(5964),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d=ArrayBuffer,m=DataView;function g(Q){return Array.isArray(Q)||function(J){return d.isView(J)&&!(J instanceof m)}(Q)}function y(Q,J){var K=Q[0],Y=Q[1],ie=Q[2],se=Q[3];return Q[0]=J[0]*K+J[4]*Y+J[8]*ie+J[12]*se,Q[1]=J[1]*K+J[5]*Y+J[9]*ie+J[13]*se,Q[2]=J[2]*K+J[6]*Y+J[10]*ie+J[14]*se,Q[3]=J[3]*K+J[7]*Y+J[11]*ie+J[15]*se,Q}function v(Q,J,K,Y){return y(Y,Y),y(Y,Y),y(Y,Y)}function _(Q,J){this.index=Q,this.dataCoordinate=this.position=J}function f(Q){return Q===!0||Q>1?1:Q}function S(Q,J,K,Y,ie,se,ae,ue,ve,ye,de,pe){this.gl=Q,this.pixelRatio=1,this.shader=J,this.orthoShader=K,this.projectShader=Y,this.pointBuffer=ie,this.colorBuffer=se,this.glyphBuffer=ae,this.idBuffer=ue,this.vao=ve,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ye,this.pickOrthoShader=de,this.pickProjectShader=pe,this.points=[],this._selectResult=new _(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}p.exports=function(Q){var J=Q.gl,K=c.createPerspective(J),Y=c.createOrtho(J),ie=c.createProject(J),se=c.createPickPerspective(J),ae=c.createPickOrtho(J),ue=c.createPickProject(J),ve=n(J),ye=n(J),de=n(J),pe=n(J),ge=new S(J,K,Y,ie,ve,ye,de,pe,r(J,[{buffer:ve,size:3,type:J.FLOAT},{buffer:ye,size:4,type:J.FLOAT},{buffer:de,size:2,type:J.FLOAT},{buffer:pe,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),se,ae,ue);return ge.update(Q),ge};var w=S.prototype;w.pickSlots=1,w.setPickBase=function(Q){this.pickId=Q},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Q=0;Q<3;++Q)if(this.axesProject[Q]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],P=[0,0,0],C=[0,0,0],O=[0,0,0,1],R=[0,0,0,1],U=x.slice(),D=[0,0,0],N=[[0,0,0],[0,0,0]];function W(Q){return Q[0]=Q[1]=Q[2]=0,Q}function F(Q,J){return Q[0]=J[0],Q[1]=J[1],Q[2]=J[2],Q[3]=1,Q}function j(Q,J,K,Y){return Q[0]=J[0],Q[1]=J[1],Q[2]=J[2],Q[K]=Y,Q}var q=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function te(Q,J,K,Y,ie,se,ae){var ue=K.gl;if((se===K.projectHasAlpha||ae)&&function(ye,de,pe,ge){var ke,Ee=de.axesProject,me=de.gl,oe=ye.uniforms,re=pe.model||x,fe=pe.view||x,Se=pe.projection||x,be=de.axesBounds,we=function(dt){for(var mt=N,ht=0;ht<2;++ht)for(var Qe=0;Qe<3;++Qe)mt[ht][Qe]=Math.max(Math.min(dt[ht][Qe],1e8),-1e8);return mt}(de.clipBounds);ke=de.axes&&de.axes.lastCubeProps?de.axes.lastCubeProps.axis:[1,1,1],E[0]=2/me.drawingBufferWidth,E[1]=2/me.drawingBufferHeight,ye.bind(),oe.view=fe,oe.projection=Se,oe.screenSize=E,oe.highlightId=de.highlightId,oe.highlightScale=de.highlightScale,oe.clipBounds=we,oe.pickGroup=de.pickId/255,oe.pixelRatio=ge;for(var Me=0;Me<3;++Me)if(Ee[Me]){oe.scale=de.projectScale[Me],oe.opacity=de.projectOpacity[Me];for(var Ie=U,Oe=0;Oe<16;++Oe)Ie[Oe]=0;for(Oe=0;Oe<4;++Oe)Ie[5*Oe]=1;Ie[5*Me]=0,ke[Me]<0?Ie[12+Me]=be[0][Me]:Ie[12+Me]=be[1][Me],l(Ie,re,Ie),oe.model=Ie;var he=(Me+1)%3,_e=(Me+2)%3,Ae=W(P),De=W(C);Ae[he]=1,De[_e]=1;var Le=v(0,0,0,F(O,Ae)),Be=v(0,0,0,F(R,De));if(Math.abs(Le[1])>Math.abs(Be[1])){var Ve=Le;Le=Be,Be=Ve,Ve=Ae,Ae=De,De=Ve;var Ze=he;he=_e,_e=Ze}Le[0]<0&&(Ae[he]=-1),Be[1]>0&&(De[_e]=-1);var rt=0,it=0;for(Oe=0;Oe<4;++Oe)rt+=Math.pow(re[4*he+Oe],2),it+=Math.pow(re[4*_e+Oe],2);Ae[he]/=Math.sqrt(rt),De[_e]/=Math.sqrt(it),oe.axes[0]=Ae,oe.axes[1]=De,oe.fragClipBounds[0]=j(D,we[0],Me,-1e8),oe.fragClipBounds[1]=j(D,we[1],Me,1e8),de.vao.bind(),de.vao.draw(me.TRIANGLES,de.vertexCount),de.lineWidth>0&&(me.lineWidth(de.lineWidth*ge),de.vao.draw(me.LINES,de.lineVertexCount,de.vertexCount)),de.vao.unbind()}}(J,K,Y,ie),se===K.hasAlpha||ae){Q.bind();var ve=Q.uniforms;ve.model=Y.model||x,ve.view=Y.view||x,ve.projection=Y.projection||x,E[0]=2/ue.drawingBufferWidth,E[1]=2/ue.drawingBufferHeight,ve.screenSize=E,ve.highlightId=K.highlightId,ve.highlightScale=K.highlightScale,ve.fragClipBounds=q,ve.clipBounds=K.axes.bounds,ve.opacity=K.opacity,ve.pickGroup=K.pickId/255,ve.pixelRatio=ie,K.vao.bind(),K.vao.draw(ue.TRIANGLES,K.vertexCount),K.lineWidth>0&&(ue.lineWidth(K.lineWidth*ie),K.vao.draw(ue.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}function ee(Q,J,K,Y){var ie;ie=g(Q)?J<Q.length?Q[J]:void 0:Q,ie=u(ie);var se=!0;i(ie)&&(ie="\u25BC",se=!1),K||(K={});var ae=K.family;g(ae)&&(ae=ae[J]),ae||(ae="normal");var ue=K.weight;g(ue)&&(ue=ue[J]),ue||(ue="normal");var ve=K.style;g(ve)&&(ve=ve[J]),ve||(ve="normal");var ye=K.variant;g(ye)&&(ye=ye[J]),ye||(ye="normal");var de=h(ie,{family:ae,weight:ue,style:ve,variant:ye},Y);return{mesh:(de=h(ie,K,Y))[0],lines:de[1],bounds:de[2],visible:se}}w.draw=function(Q){te(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!1,!1)},w.drawTransparent=function(Q){te(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Q,this.pixelRatio,!0,!1)},w.drawPick=function(Q){te(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Q,1,!0,!0)},w.pick=function(Q){if(!Q||Q.id!==this.pickId)return null;var J=Q.value[2]+(Q.value[1]<<8)+(Q.value[0]<<16);if(J>=this.pointCount||J<0)return null;var K=this.points[J],Y=this._selectResult;Y.index=J;for(var ie=0;ie<3;++ie)Y.position[ie]=Y.dataCoordinate[ie]=K[ie];return Y},w.highlight=function(Q){if(Q){var J=Q.index,K=255&J,Y=J>>8&255,ie=J>>16&255;this.highlightId=[K/255,Y/255,ie/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(Q){if("perspective"in(Q=Q||{})&&(this.useOrtho=!Q.perspective),"orthographic"in Q&&(this.useOrtho=!!Q.orthographic),"lineWidth"in Q&&(this.lineWidth=Q.lineWidth),"project"in Q)if(g(Q.project))this.axesProject=Q.project;else{var J=!!Q.project;this.axesProject=[J,J,J]}if("projectScale"in Q)if(g(Q.projectScale))this.projectScale=Q.projectScale.slice();else{var K=+Q.projectScale;this.projectScale=[K,K,K]}if(this.projectHasAlpha=!1,"projectOpacity"in Q){g(Q.projectOpacity)?this.projectOpacity=Q.projectOpacity.slice():(K=+Q.projectOpacity,this.projectOpacity=[K,K,K]);for(var Y=0;Y<3;++Y)this.projectOpacity[Y]=f(this.projectOpacity[Y]),this.projectOpacity[Y]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Q&&(this.opacity=f(Q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ie,se,ae=Q.position,ue={family:Q.font||"normal",style:Q.fontStyle||"normal",weight:Q.fontWeight||"normal",variant:Q.fontVariant||"normal"},ve=Q.alignment||[0,0];if(ve.length===2)ie=ve[0],se=ve[1];else for(ie=[],se=[],Y=0;Y<ve.length;++Y)ie[Y]=ve[Y][0],se[Y]=ve[Y][1];var ye=[1/0,1/0,1/0],de=[-1/0,-1/0,-1/0],pe=Q.glyph,ge=Q.color,ke=Q.size,Ee=Q.angle,me=Q.lineColor,oe=-1,re=0,fe=0,Se=0;if(ae.length){Se=ae.length;e:for(Y=0;Y<Se;++Y){for(var be=ae[Y],we=0;we<3;++we)if(isNaN(be[we])||!isFinite(be[we]))continue e;var Me=(mt=ee(pe,Y,ue,this.pixelRatio)).mesh,Ie=mt.lines,Oe=mt.bounds;re+=3*Me.cells.length,fe+=2*Ie.edges.length}}var he=re+fe,_e=a.mallocFloat(3*he),Ae=a.mallocFloat(4*he),De=a.mallocFloat(2*he),Le=a.mallocUint32(he);if(he>0){var Be=0,Ve=re,Ze=[0,0,0,1],rt=[0,0,0,1],it=g(ge)&&g(ge[0]),dt=g(me)&&g(me[0]);e:for(Y=0;Y<Se;++Y){for(oe+=1,be=ae[Y],we=0;we<3;++we){if(isNaN(be[we])||!isFinite(be[we]))continue e;de[we]=Math.max(de[we],be[we]),ye[we]=Math.min(ye[we],be[we])}Me=(mt=ee(pe,Y,ue,this.pixelRatio)).mesh,Ie=mt.lines,Oe=mt.bounds;var mt,ht=mt.visible;if(ht)if(g(ge)){if((Qe=it?Y<ge.length?ge[Y]:[0,0,0,0]:ge).length===3){for(we=0;we<3;++we)Ze[we]=Qe[we];Ze[3]=1}else if(Qe.length===4){for(we=0;we<4;++we)Ze[we]=Qe[we];!this.hasAlpha&&Qe[3]<1&&(this.hasAlpha=!0)}}else Ze[0]=Ze[1]=Ze[2]=0,Ze[3]=1;else Ze=[1,1,1,0];if(ht)if(g(me)){var Qe;if((Qe=dt?Y<me.length?me[Y]:[0,0,0,0]:me).length===3){for(we=0;we<3;++we)rt[we]=Qe[we];rt[we]=1}else if(Qe.length===4){for(we=0;we<4;++we)rt[we]=Qe[we];!this.hasAlpha&&Qe[3]<1&&(this.hasAlpha=!0)}}else rt[0]=rt[1]=rt[2]=0,rt[3]=1;else rt=[1,1,1,0];var Je=.5;ht?g(ke)?Je=Y<ke.length?+ke[Y]:12:ke?Je=+ke:this.useOrtho&&(Je=12):Je=0;var wt=0;g(Ee)?wt=Y<Ee.length?+Ee[Y]:0:Ee&&(wt=+Ee);var Pt=Math.cos(wt),It=Math.sin(wt);for(be=ae[Y],we=0;we<3;++we)de[we]=Math.max(de[we],be[we]),ye[we]=Math.min(ye[we],be[we]);var At=ie,qe=se;At=0,g(ie)?At=Y<ie.length?ie[Y]:0:ie&&(At=ie),qe=0,g(se)?qe=Y<se.length?se[Y]:0:se&&(qe=se);var Ye=[At*=At>0?1-Oe[0][0]:At<0?1+Oe[1][0]:1,qe*=qe>0?1-Oe[0][1]:qe<0?1+Oe[1][1]:1],Ne=Me.cells||[],We=Me.positions||[];for(we=0;we<Ne.length;++we)for(var at=Ne[we],tt=0;tt<3;++tt){for(var Re=0;Re<3;++Re)_e[3*Be+Re]=be[Re];for(Re=0;Re<4;++Re)Ae[4*Be+Re]=Ze[Re];Le[Be]=oe;var Fe=We[at[tt]];De[2*Be]=Je*(Pt*Fe[0]-It*Fe[1]+Ye[0]),De[2*Be+1]=Je*(It*Fe[0]+Pt*Fe[1]+Ye[1]),Be+=1}for(Ne=Ie.edges,We=Ie.positions,we=0;we<Ne.length;++we)for(at=Ne[we],tt=0;tt<2;++tt){for(Re=0;Re<3;++Re)_e[3*Ve+Re]=be[Re];for(Re=0;Re<4;++Re)Ae[4*Ve+Re]=rt[Re];Le[Ve]=oe,Fe=We[at[tt]],De[2*Ve]=Je*(Pt*Fe[0]-It*Fe[1]+Ye[0]),De[2*Ve+1]=Je*(It*Fe[0]+Pt*Fe[1]+Ye[1]),Ve+=1}}}this.bounds=[ye,de],this.points=ae,this.pointCount=ae.length,this.vertexCount=re,this.lineVertexCount=fe,this.pointBuffer.update(_e),this.colorBuffer.update(Ae),this.glyphBuffer.update(De),this.idBuffer.update(Le),a.free(_e),a.free(Ae),a.free(De),a.free(Le)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(p,s,t){"use strict";var i=t(3236);s.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(p,s,t){"use strict";var i=t(9405),n=t(2762),r=t(4298);function a(c,h,u){this.plot=c,this.boxBuffer=h,this.boxShader=u,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}p.exports=function(c,h){var u=c.gl,x=new a(c,n(u,[0,0,0,1,1,0,1,1]),i(u,r.boxVertex,r.boxFragment));return x.update(h),c.addOverlay(x),x};var l=a.prototype;l.draw=function(){if(this.enabled){var c=this.plot,h=this.selectBox,u=this.borderWidth,x=(this.innerFill,this.innerColor),d=(this.outerFill,this.outerColor),m=this.borderColor,g=c.box,y=c.screenBox,v=c.dataBox,_=c.viewBox,f=c.pixelRatio,S=(h[0]-v[0])*(_[2]-_[0])/(v[2]-v[0])+_[0],w=(h[1]-v[1])*(_[3]-_[1])/(v[3]-v[1])+_[1],E=(h[2]-v[0])*(_[2]-_[0])/(v[2]-v[0])+_[0],P=(h[3]-v[1])*(_[3]-_[1])/(v[3]-v[1])+_[1];if(S=Math.max(S,_[0]),w=Math.max(w,_[1]),E=Math.min(E,_[2]),P=Math.min(P,_[3]),!(E<S||P<w)){g.bind();var C=y[2]-y[0],O=y[3]-y[1];if(this.outerFill&&(g.drawBox(0,0,C,w,d),g.drawBox(0,w,S,P,d),g.drawBox(0,P,C,O,d),g.drawBox(E,w,C,P,d)),this.innerFill&&g.drawBox(S,w,E,P,x),u>0){var R=u*f;g.drawBox(S-R,w-R,E+R,w+R,m),g.drawBox(S-R,P-R,E+R,P+R,m),g.drawBox(S-R,w-R,S+R,P+R,m),g.drawBox(E-R,w-R,E+R,P+R,m)}}}},l.update=function(c){c=c||{},this.innerFill=!!c.innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(p,s,t){"use strict";p.exports=function(u,x){var d=x[0],m=x[1];return new c(u,i(u,d,m,{}),n.mallocUint8(d*m*4))};var i=t(2260),n=t(1888),r=t(9618),a=t(8828).nextPow2;function l(u,x,d,m,g){this.coord=[u,x],this.id=d,this.value=m,this.distance=g}function c(u,x,d){this.gl=u,this.fbo=x,this.buffer=d,this._readTimeout=null;var m=this;this._readCallback=function(){m.gl&&(x.bind(),u.readPixels(0,0,x.shape[0],x.shape[1],u.RGBA,u.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(u){if(this.gl){this.fbo.shape=u;var x=this.fbo.shape[0],d=this.fbo.shape[1];if(d*x*4>this.buffer.length){n.free(this.buffer);for(var m=this.buffer=n.mallocUint8(a(d*x*4)),g=0;g<d*x*4;++g)m[g]=255}return u}}}),h.begin=function(){var u=this.gl;this.shape,u&&(this.fbo.bind(),u.clearColor(1,1,1,1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT))},h.end=function(){var u=this.gl;u&&(u.bindFramebuffer(u.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(u,x,d){if(!this.gl)return null;var m=this.fbo.shape.slice();u|=0,x|=0,typeof d!="number"&&(d=1);var g=0|Math.min(Math.max(u-d,0),m[0]),y=0|Math.min(Math.max(u+d,0),m[0]),v=0|Math.min(Math.max(x-d,0),m[1]),_=0|Math.min(Math.max(x+d,0),m[1]);if(y<=g||_<=v)return null;var f=[y-g,_-v],S=r(this.buffer,[f[0],f[1],4],[4,4*m[0],1],4*(g+m[0]*v)),w=function(C,O,R){for(var U=1e8,D=-1,N=-1,W=C.shape[0],F=C.shape[1],j=0;j<W;j++)for(var q=0;q<F;q++){var te=C.get(j,q,0),ee=C.get(j,q,1),Q=C.get(j,q,2),J=C.get(j,q,3);if(te<255||ee<255||Q<255||J<255){var K=O-j,Y=R-q,ie=K*K+Y*Y;ie<U&&(U=ie,D=j,N=q)}}return[D,N,U]}(S.hi(f[0],f[1],1),d,d),E=w[0],P=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new l(E+g|0,P+v|0,S.get(E,P,0),[S.get(E,P,1),S.get(E,P,2),S.get(E,P,3)],Math.sqrt(w[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(p,s,t){"use strict";var i=t(3327),n=t(8731),r=t(216),a=t(5091),l=t(2145),c=t(8866);function h(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=h.prototype;function x(d,m){return d.name<m.name?-1:1}u.bind=function(){var d;this.program||this._relink();var m=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(m>g)for(d=g;d<m;d++)this.gl.enableVertexAttribArray(d);else if(g>m)for(d=m;d<g;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=m,this.gl.useProgram(this.program)},u.dispose=function(){for(var d=this.gl.lastAttribCount,m=0;m<d;m++)this.gl.disableVertexAttribArray(m);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(d,m,g,y){if(!m||arguments.length===1){var v=d;d=v.vertex,m=v.fragment,g=v.uniforms,y=v.attributes}var _=this,f=_.gl,S=_._vref;_._vref=a.shader(f,f.VERTEX_SHADER,d),S&&S.dispose(),_.vertShader=_._vref.shader;var w=this._fref;if(_._fref=a.shader(f,f.FRAGMENT_SHADER,m),w&&w.dispose(),_.fragShader=_._fref.shader,!g||!y){var E=f.createProgram();if(f.attachShader(E,_.fragShader),f.attachShader(E,_.vertShader),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){var P=f.getProgramInfoLog(E);throw new c(P,"Error linking program:"+P)}g=g||l.uniforms(f,E),y=y||l.attributes(f,E),f.deleteProgram(E)}(y=y.slice()).sort(x);var C,O=[],R=[],U=[];for(C=0;C<y.length;++C){var D=y[C];if(D.type.indexOf("mat")>=0){for(var N=0|D.type.charAt(D.type.length-1),W=new Array(N),F=0;F<N;++F)W[F]=U.length,R.push(D.name+"["+F+"]"),typeof D.location=="number"?U.push(D.location+F):Array.isArray(D.location)&&D.location.length===N&&typeof D.location[F]=="number"?U.push(0|D.location[F]):U.push(-1);O.push({name:D.name,type:D.type,locations:W})}else O.push({name:D.name,type:D.type,locations:[U.length]}),R.push(D.name),typeof D.location=="number"?U.push(0|D.location):U.push(-1)}var j=0;for(C=0;C<U.length;++C)if(U[C]<0){for(;U.indexOf(j)>=0;)j+=1;U[C]=j}var q=new Array(g.length);function te(){_.program=a.program(f,_._vref,_._fref,R,U);for(var ee=0;ee<g.length;++ee)q[ee]=f.getUniformLocation(_.program,g[ee].name)}te(),_._relink=te,_.types={uniforms:r(g),attributes:r(y)},_.attributes=n(f,_,O,U),Object.defineProperty(_,"uniforms",i(f,_,g,q))},p.exports=function(d,m,g,y,v){var _=new h(d);return _.update(m,g,y,v),_}},8866:function(p){function s(t,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(n?`
`+n:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,p.exports=s},8731:function(p,s,t){"use strict";p.exports=function(h,u,x,d){for(var m={},g=0,y=x.length;g<y;++g){var v=x[g],_=v.name,f=v.type,S=v.locations;switch(f){case"bool":case"int":case"float":l(h,u,S[0],d,1,m,_);break;default:if(f.indexOf("vec")>=0){if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);l(h,u,S[0],d,w,m,_)}else{if(!(f.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+_+": "+f);var w;if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);c(h,u,S,d,w,m,_)}}}return m};var i=t(8866);function n(h,u,x,d,m,g){this._gl=h,this._wrapper=u,this._index=x,this._locations=d,this._dimension=m,this._constFunc=g}var r=n.prototype;r.pointer=function(h,u,x,d){var m=this,g=m._gl,y=m._locations[m._index];g.vertexAttribPointer(y,m._dimension,h||g.FLOAT,!!u,x||0,d||0),g.enableVertexAttribArray(y)},r.set=function(h,u,x,d){return this._constFunc(this._locations[this._index],h,u,x,d)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,u,x){return x.length===void 0?h.vertexAttrib1f(u,x):h.vertexAttrib1fv(u,x)},function(h,u,x,d){return x.length===void 0?h.vertexAttrib2f(u,x,d):h.vertexAttrib2fv(u,x)},function(h,u,x,d,m){return x.length===void 0?h.vertexAttrib3f(u,x,d,m):h.vertexAttrib3fv(u,x)},function(h,u,x,d,m,g){return x.length===void 0?h.vertexAttrib4f(u,x,d,m,g):h.vertexAttrib4fv(u,x)}];function l(h,u,x,d,m,g,y){var v=a[m],_=new n(h,u,x,d,m,v);Object.defineProperty(g,y,{set:function(f){return h.disableVertexAttribArray(d[x]),v(h,d[x],f),f},get:function(){return _},enumerable:!0})}function c(h,u,x,d,m,g,y){for(var v=new Array(m),_=new Array(m),f=0;f<m;++f)l(h,u,x[f],d,m,v,f),_[f]=v[f];Object.defineProperty(v,"location",{set:function(E){if(Array.isArray(E))for(var P=0;P<m;++P)_[P].location=E[P];else for(P=0;P<m;++P)_[P].location=E+P;return E},get:function(){for(var E=new Array(m),P=0;P<m;++P)E[P]=d[x[P]];return E},enumerable:!0}),v.pointer=function(E,P,C,O){E=E||h.FLOAT,P=!!P,C=C||m*m,O=O||0;for(var R=0;R<m;++R){var U=d[x[R]];h.vertexAttribPointer(U,m,E,P,C,O+R*m),h.enableVertexAttribArray(U)}};var S=new Array(m),w=h["vertexAttrib"+m+"fv"];Object.defineProperty(g,y,{set:function(E){for(var P=0;P<m;++P){var C=d[x[P]];if(h.disableVertexAttribArray(C),Array.isArray(E[0]))w.call(h,C,E[P]);else{for(var O=0;O<m;++O)S[O]=E[m*P+O];w.call(h,C,S)}}return E},get:function(){return v},enumerable:!0})}},3327:function(p,s,t){"use strict";var i=t(216),n=t(8866);function r(l){return function(){return l}}function a(l,c){for(var h=new Array(l),u=0;u<l;++u)h[u]=c;return h}p.exports=function(l,c,h,u){function x(v){return function(_){for(var f=d("",v),S=0;S<f.length;++S){var w=f[S],E=w[0],P=w[1];if(u[P]){var C=_;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var O=E;if(E.indexOf(".")===0&&(O=E.slice(1)),O.indexOf("]")===O.length-1){var R=O.indexOf("["),U=O.slice(0,R),D=O.slice(R+1,O.length-1);C=U?_[U][D]:_[D]}else C=_[O]}var N,W=h[P].type;switch(W){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(u[P],C);break;case"float":l.uniform1f(u[P],C);break;default:var F=W.indexOf("vec");if(!(0<=F&&F<=1&&W.length===4+F)){if(W.indexOf("mat")===0&&W.length===4){if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+W);l["uniformMatrix"+N+"fv"](u[P],!1,C);break}throw new n("","Unknown uniform data type for "+name+": "+W)}if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid data type");switch(W.charAt(0)){case"b":case"i":l["uniform"+N+"iv"](u[P],C);break;case"v":l["uniform"+N+"fv"](u[P],C);break;default:throw new n("","Unrecognized data type for vector "+name+": "+W)}}}}}}function d(v,_){if(typeof _!="object")return[[v,_]];var f=[];for(var S in _){var w=_[S],E=v;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof w=="object"?f.push.apply(f,d(E,w)):f.push([E,w])}return f}function m(v,_,f){if(typeof f=="object"){var S=g(f);Object.defineProperty(v,_,{get:r(S),set:x(f),enumerable:!0,configurable:!1})}else u[f]?Object.defineProperty(v,_,{get:(w=f,function(E,P,C){return E.getUniform(P.program,C[w])}),set:x(f),enumerable:!0,configurable:!1}):v[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=E.indexOf("vec");if(0<=P&&P<=1&&E.length===4+P){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new n("","Invalid data type");return E.charAt(0)==="b"?a(C,!1):a(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new n("","Unknown uniform data type for "+name+": "+E)}}(h[f].type);var w}function g(v){var _;if(Array.isArray(v)){_=new Array(v.length);for(var f=0;f<v.length;++f)m(_,f,v[f])}else for(var S in _={},v)m(_,S,v[S]);return _}var y=i(h,!0);return{get:r(g(y)),set:x(y),enumerable:!0,configurable:!0}}},216:function(p){"use strict";p.exports=function(s,t){for(var i={},n=0;n<s.length;++n)for(var r=s[n].name.split("."),a=i,l=0;l<r.length;++l){var c=r[l].split("[");if(c.length>1){c[0]in a||(a[c[0]]=[]),a=a[c[0]];for(var h=1;h<c.length;++h){var u=parseInt(c[h]);h<c.length-1||l<r.length-1?(u in a||(h<c.length-1?a[u]=[]:a[u]={}),a=a[u]):a[u]=t?n:s[n].type}}else l<r.length-1?(c[0]in a||(a[c[0]]={}),a=a[c[0]]):a[c[0]]=t?n:s[n].type}return i}},2145:function(p,s){"use strict";s.uniforms=function(r,a){for(var l=r.getProgramParameter(a,r.ACTIVE_UNIFORMS),c=[],h=0;h<l;++h){var u=r.getActiveUniform(a,h);if(u){var x=n(r,u.type);if(u.size>1)for(var d=0;d<u.size;++d)c.push({name:u.name.replace("[0]","["+d+"]"),type:x});else c.push({name:u.name,type:x})}}return c},s.attributes=function(r,a){for(var l=r.getProgramParameter(a,r.ACTIVE_ATTRIBUTES),c=[],h=0;h<l;++h){var u=r.getActiveAttrib(a,h);u&&c.push({name:u.name,type:n(r,u.type)})}return c};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function n(r,a){if(!i){var l=Object.keys(t);i={};for(var c=0;c<l.length;++c){var h=l[c];i[r[h]]=t[h]}}return i[a]}},5091:function(p,s,t){"use strict";s.shader=function(x,d,m){return u(x).getShaderReference(d,m)},s.program=function(x,d,m,g,y){return u(x).getProgram(d,m,g,y)};var i=t(8866),n=t(2992),r=new(typeof WeakMap>"u"?t(606):WeakMap),a=0;function l(x,d,m,g,y,v,_){this.id=x,this.src=d,this.type=m,this.shader=g,this.count=v,this.programs=[],this.cache=_}function c(x){this.gl=x,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,d=x.gl,m=this.programs,g=0,y=m.length;g<y;++g){var v=x.programs[m[g]];v&&(delete x.programs[g],d.deleteProgram(v))}d.deleteShader(this.shader),delete x.shaders[this.type===d.FRAGMENT_SHADER|0][this.src]}};var h=c.prototype;function u(x){var d=r.get(x);return d||(d=new c(x),r.set(x,d)),d}h.getShaderReference=function(x,d){var m=this.gl,g=this.shaders[x===m.FRAGMENT_SHADER|0],y=g[d];if(y&&m.isShader(y.shader))y.count+=1;else{var v=function(_,f,S){var w=_.createShader(f);if(_.shaderSource(w,S),_.compileShader(w),!_.getShaderParameter(w,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(w);try{var P=n(E,S,f)}catch(C){throw console.warn("Failed to format compiler error: "+C),new i(E,`Error compiling shader:
`+E)}throw new i(E,P.short,P.long)}return w}(m,x,d);y=g[d]=new l(a++,d,x,v,[],1,this)}return y},h.getProgram=function(x,d,m,g){var y=[x.id,d.id,m.join(":"),g.join(":")].join("@"),v=this.programs[y];return v&&this.gl.isProgram(v)||(this.programs[y]=v=function(_,f,S,w,E){var P=_.createProgram();_.attachShader(P,f),_.attachShader(P,S);for(var C=0;C<w.length;++C)_.bindAttribLocation(P,E[C],w[C]);if(_.linkProgram(P),!_.getProgramParameter(P,_.LINK_STATUS)){var O=_.getProgramInfoLog(P);throw new i(O,"Error linking program: "+O)}return P}(this.gl,x.shader,d.shader,m,g),x.programs.push(y),d.programs.push(y)),v}},4098:function(p){"use strict";function s(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}p.exports=function(i,n){var r=new s(i);return r.update(n),i.addOverlay(r),r};var t=s.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,n=this.width,r=this.color,a=this.center,l=this.plot,c=l.line,h=l.dataBox,u=l.viewBox;if(c.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var x=u[0]+(a[0]-h[0])/(h[2]-h[0])*(u[2]-u[0]),d=u[1]+(a[1]-h[1])/(h[3]-h[1])*(u[3]-u[1]);i[0]&&c.drawLine(x,d,u[0],d,n[0],r[0]),i[1]&&c.drawLine(x,d,x,u[1],n[1],r[1]),i[2]&&c.drawLine(x,d,u[2],d,n[2],r[2]),i[3]&&c.drawLine(x,d,x,u[3],n[3],r[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(p,s,t){"use strict";var i=t(3236),n=t(9405),r=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);p.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(p,s,t){"use strict";var i=t(2762),n=t(8116),r=t(1493);p.exports=function(d,m){var g=[];function y(w,E,P,C,O,R){var U=[w,E,P,0,0,0,1];U[C+3]=1,U[C]=O,g.push.apply(g,U),U[6]=-1,g.push.apply(g,U),U[C]=R,g.push.apply(g,U),g.push.apply(g,U),U[6]=1,g.push.apply(g,U),U[C]=O,g.push.apply(g,U)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var v=i(d,g),_=n(d,[{type:d.FLOAT,buffer:v,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:v,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:v,size:1,offset:24,stride:28}]),f=r(d);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var S=new l(d,v,_,f);return S.update(m),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(d,m,g,y){this.gl=d,this.buffer=m,this.vao=g,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=l.prototype,h=[0,0,0],u=[0,0,0],x=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(d){},c.draw=function(d){var m=this.gl,g=this.vao,y=this.shader;g.bind(),y.bind();var v,_=d.model||a,f=d.view||a,S=d.projection||a;this.axes&&(v=this.axes.lastCubeProps.axis);for(var w=h,E=u,P=0;P<3;++P)v&&v[P]<0?(w[P]=this.bounds[0][P],E[P]=this.bounds[1][P]):(w[P]=this.bounds[1][P],E[P]=this.bounds[0][P]);for(x[0]=m.drawingBufferWidth,x[1]=m.drawingBufferHeight,y.uniforms.model=_,y.uniforms.view=f,y.uniforms.projection=S,y.uniforms.coordinates=[this.position,w,E],y.uniforms.colors=this.colors,y.uniforms.screenShape=x,P=0;P<3;++P)y.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(g.draw(m.TRIANGLES,6,6*P),this.drawSides[P]&&g.draw(m.TRIANGLES,12,18+12*P));g.unbind()},c.update=function(d){d&&("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(p,s,t){var i=t(3236),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(p,s,t){"use strict";var i=t(2931),n=t(9970),r=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(x,d){var m,g=x.length;for(m=0;m<g;m++){var y=x[m];if(y===d)return m;if(y>d)return m-1}return m},l=function(x,d,m){return x<d?d:x>m?m:x},c=function(x){var d=1/0;x.sort(function(v,_){return v-_});for(var m=x.length,g=1;g<m;g++){var y=Math.abs(x[g]-x[g-1]);y<d&&(d=y)}return d};p.exports=function(x,d){var m=x.startingPositions,g=x.maxLength||1e3,y=x.tubeSize||1,v=x.absoluteTubeSize,_=x.gridFill||"+x+y+z",f={};_.indexOf("-x")!==-1&&(f.reversedX=!0),_.indexOf("-y")!==-1&&(f.reversedY=!0),_.indexOf("-z")!==-1&&(f.reversedZ=!0),f.filled=r.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(ge){return function(ke,Ee,me){var oe=Ee.vectors,re=Ee.meshgrid,fe=ke[0],Se=ke[1],be=ke[2],we=re[0].length,Me=re[1].length,Ie=re[2].length,Oe=a(re[0],fe),he=a(re[1],Se),_e=a(re[2],be),Ae=Oe+1,De=he+1,Le=_e+1;if(Oe=l(Oe,0,we-1),Ae=l(Ae,0,we-1),he=l(he,0,Me-1),De=l(De,0,Me-1),_e=l(_e,0,Ie-1),Le=l(Le,0,Ie-1),Oe<0||he<0||_e<0||Ae>we-1||De>Me-1||Le>Ie-1)return i.create();var Be,Ve,Ze,rt,it,dt,mt=re[0][Oe],ht=re[0][Ae],Qe=re[1][he],Je=re[1][De],wt=re[2][_e],Pt=(fe-mt)/(ht-mt),It=(Se-Qe)/(Je-Qe),At=(be-wt)/(re[2][Le]-wt);switch(isFinite(Pt)||(Pt=.5),isFinite(It)||(It=.5),isFinite(At)||(At=.5),me.reversedX&&(Oe=we-1-Oe,Ae=we-1-Ae),me.reversedY&&(he=Me-1-he,De=Me-1-De),me.reversedZ&&(_e=Ie-1-_e,Le=Ie-1-Le),me.filled){case 5:it=_e,dt=Le,Ze=he*Ie,rt=De*Ie,Be=Oe*Ie*Me,Ve=Ae*Ie*Me;break;case 4:it=_e,dt=Le,Be=Oe*Ie,Ve=Ae*Ie,Ze=he*Ie*we,rt=De*Ie*we;break;case 3:Ze=he,rt=De,it=_e*Me,dt=Le*Me,Be=Oe*Me*Ie,Ve=Ae*Me*Ie;break;case 2:Ze=he,rt=De,Be=Oe*Me,Ve=Ae*Me,it=_e*Me*we,dt=Le*Me*we;break;case 1:Be=Oe,Ve=Ae,it=_e*we,dt=Le*we,Ze=he*we*Ie,rt=De*we*Ie;break;default:Be=Oe,Ve=Ae,Ze=he*we,rt=De*we,it=_e*we*Me,dt=Le*we*Me}var qe=oe[Be+Ze+it],Ye=oe[Be+Ze+dt],Ne=oe[Be+rt+it],We=oe[Be+rt+dt],at=oe[Ve+Ze+it],tt=oe[Ve+Ze+dt],Re=oe[Ve+rt+it],Fe=oe[Ve+rt+dt],nt=i.create(),Ge=i.create(),ut=i.create(),pt=i.create();i.lerp(nt,qe,at,Pt),i.lerp(Ge,Ye,tt,Pt),i.lerp(ut,Ne,Re,Pt),i.lerp(pt,We,Fe,Pt);var gt=i.create(),ct=i.create();i.lerp(gt,nt,ut,It),i.lerp(ct,Ge,pt,It);var Tt=i.create();return i.lerp(Tt,gt,ct,At),Tt}(ge,x,f)},w=x.getDivergence||function(ge,ke){var Ee=i.create(),me=1e-4;i.add(Ee,ge,[me,0,0]);var oe=S(Ee);i.subtract(oe,oe,ke),i.scale(oe,oe,1/me),i.add(Ee,ge,[0,me,0]);var re=S(Ee);i.subtract(re,re,ke),i.scale(re,re,1/me),i.add(Ee,ge,[0,0,me]);var fe=S(Ee);return i.subtract(fe,fe,ke),i.scale(fe,fe,1/me),i.add(Ee,oe,re),i.add(Ee,Ee,fe),Ee},E=[],P=d[0][0],C=d[0][1],O=d[0][2],R=d[1][0],U=d[1][1],D=d[1][2],N=function(ge){var ke=ge[0],Ee=ge[1],me=ge[2];return!(ke<P||ke>R||Ee<C||Ee>U||me<O||me>D)},W=10*i.distance(d[0],d[1])/g,F=W*W,j=1,q=0,te=m.length;te>1&&(j=function(ge){for(var ke=[],Ee=[],me=[],oe={},re={},fe={},Se=ge.length,be=0;be<Se;be++){var we=ge[be],Me=we[0],Ie=we[1],Oe=we[2];oe[Me]||(ke.push(Me),oe[Me]=!0),re[Ie]||(Ee.push(Ie),re[Ie]=!0),fe[Oe]||(me.push(Oe),fe[Oe]=!0)}var he=c(ke),_e=c(Ee),Ae=c(me),De=Math.min(he,_e,Ae);return isFinite(De)?De:1}(m));for(var ee=0;ee<te;ee++){var Q=i.create();i.copy(Q,m[ee]);var J=[Q],K=[],Y=S(Q),ie=Q;K.push(Y);var se=[],ae=w(Q,Y),ue=i.length(ae);isFinite(ue)&&ue>q&&(q=ue),se.push(ue),E.push({points:J,velocities:K,divergences:se});for(var ve=0;ve<100*g&&J.length<g&&N(Q);){ve++;var ye=i.clone(Y),de=i.squaredLength(ye);if(de===0)break;de>F&&i.scale(ye,ye,W/Math.sqrt(de)),i.add(ye,ye,Q),Y=S(ye),i.squaredDistance(ie,ye)-F>-1e-4*F&&(J.push(ye),ie=ye,K.push(Y),ae=w(ye,Y),ue=i.length(ae),isFinite(ue)&&ue>q&&(q=ue),se.push(ue)),Q=ye}}var pe=function(ge,ke,Ee,me){for(var oe=0,re=0;re<ge.length;re++)for(var fe=ge[re].velocities,Se=0;Se<fe.length;Se++)oe=Math.max(oe,i.length(fe[Se]));var be=ge.map(function(Be){return function(Ve,Ze,rt,it){for(var dt=Ve.points,mt=Ve.velocities,ht=Ve.divergences,Qe=[],Je=[],wt=[],Pt=[],It=[],At=[],qe=0,Ye=0,Ne=n.create(),We=n.create(),at=0;at<dt.length;at++){var tt=dt[at],Re=mt[at],Fe=ht[at];Ze===0&&(Fe=.05*rt),Ye=i.length(Re)/it,Ne=n.create(),i.copy(Ne,Re),Ne[3]=Fe;for(var nt=0;nt<8;nt++)It[nt]=[tt[0],tt[1],tt[2],nt];if(Pt.length>0)for(nt=0;nt<8;nt++){var Ge=(nt+1)%8;Qe.push(Pt[nt],It[nt],It[Ge],It[Ge],Pt[Ge],Pt[nt]),wt.push(We,Ne,Ne,Ne,We,We),At.push(qe,Ye,Ye,Ye,qe,qe);var ut=Qe.length;Je.push([ut-6,ut-5,ut-4],[ut-3,ut-2,ut-1])}var pt=Pt;Pt=It,It=pt;var gt=We;We=Ne,Ne=gt;var ct=qe;qe=Ye,Ye=ct}return{positions:Qe,cells:Je,vectors:wt,vertexIntensity:At}}(Be,Ee,me,oe)}),we=[],Me=[],Ie=[],Oe=[];for(re=0;re<be.length;re++){var he=be[re],_e=we.length;for(we=we.concat(he.positions),Ie=Ie.concat(he.vectors),Oe=Oe.concat(he.vertexIntensity),Se=0;Se<he.cells.length;Se++){var Ae=he.cells[Se],De=[];Me.push(De);for(var Le=0;Le<Ae.length;Le++)De.push(Ae[Le]+_e)}}return{positions:we,cells:Me,vectors:Ie,vertexIntensity:Oe,colormap:ke}}(E,x.colormap,q,j);return v?pe.tubeScale=v:(q===0&&(q=1),pe.tubeScale=.5*y*j/q),pe};var h=t(6740),u=t(6405).createMesh;p.exports.createTubeMesh=function(x,d){return u(x,d,{shaders:h,traceType:"streamtube"})}},990:function(p,s,t){var i=t(9405),n=t(3236),r=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),c=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(h){var u=i(h,r,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u.attributes.normal.location=2,u},s.createPickShader=function(h){var u=i(h,r,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u.attributes.normal.location=2,u},s.createContourShader=function(h){var u=i(h,l,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u},s.createPickContourShader=function(h){var u=i(h,l,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return u.attributes.uv.location=0,u.attributes.f.location=1,u}},9499:function(p,s,t){"use strict";p.exports=function(ae){var ue=ae.gl,ve=f(ue),ye=w(ue),de=S(ue),pe=E(ue),ge=n(ue),ke=r(ue,[{buffer:ge,size:4,stride:P,offset:0},{buffer:ge,size:3,stride:P,offset:16},{buffer:ge,size:3,stride:P,offset:28}]),Ee=n(ue),me=r(ue,[{buffer:Ee,size:4,stride:20,offset:0},{buffer:Ee,size:1,stride:20,offset:16}]),oe=n(ue),re=r(ue,[{buffer:oe,size:2,type:ue.FLOAT}]),fe=a(ue,1,D,ue.RGBA,ue.UNSIGNED_BYTE);fe.minFilter=ue.LINEAR,fe.magFilter=ue.LINEAR;var Se=new N(ue,[0,0],[[0,0,0],[0,0,0]],ve,ye,ge,ke,fe,de,pe,Ee,me,oe,re,[0,0,0]),be={levels:[[],[],[]]};for(var we in ae)be[we]=ae[we];return be.colormap=be.colormap||"jet",Se.update(be),Se};var i=t(8828),n=t(2762),r=t(8116),a=t(7766),l=t(1888),c=t(6729),h=t(5298),u=t(9994),x=t(9618),d=t(3711),m=t(6760),g=t(7608),y=t(2478),v=t(6199),_=t(990),f=_.createShader,S=_.createContourShader,w=_.createPickShader,E=_.createPickContourShader,P=40,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],R=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function U(ae,ue,ve,ye,de){this.position=ae,this.index=ue,this.uv=ve,this.level=ye,this.dataCoordinate=de}(function(){for(var ae=0;ae<3;++ae){var ue=R[ae],ve=(ae+2)%3;ue[(ae+1)%3+0]=1,ue[ve+3]=1,ue[ae+6]=1}})();var D=256;function N(ae,ue,ve,ye,de,pe,ge,ke,Ee,me,oe,re,fe,Se,be){this.gl=ae,this.shape=ue,this.bounds=ve,this.objectOffset=be,this.intensityBounds=[],this._shader=ye,this._pickShader=de,this._coordinateBuffer=pe,this._vao=ge,this._colorMap=ke,this._contourShader=Ee,this._contourPickShader=me,this._contourBuffer=oe,this._contourVAO=re,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new U([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=fe,this._dynamicVAO=Se,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var W=N.prototype;W.genColormap=function(ae,ue){var ve=!1,ye=u([c({colormap:ae,nshades:D,format:"rgba"}).map(function(de,pe){var ge=ue?function(ke,Ee){if(!Ee||!Ee.length)return 1;for(var me=0;me<Ee.length;++me){if(Ee.length<2)return 1;if(Ee[me][0]===ke)return Ee[me][1];if(Ee[me][0]>ke&&me>0){var oe=(Ee[me][0]-ke)/(Ee[me][0]-Ee[me-1][0]);return Ee[me][1]*(1-oe)+oe*Ee[me-1][1]}}return 1}(pe/255,ue):de[3];return ge<1&&(ve=!0),[de[0],de[1],de[2],255*ge]})]);return h.divseq(ye,255),this.hasAlphaScale=ve,ye},W.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},W.isOpaque=function(){return!this.isTransparent()},W.pickSlots=1,W.setPickBase=function(ae){this.pickId=ae};var F=[0,0,0],j={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(ae,ue){var ve,ye,de,pe=ue.axes&&ue.axes.lastCubeProps.axis||F,ge=ue.showSurface,ke=ue.showContour;for(ve=0;ve<3;++ve)for(ge=ge||ue.surfaceProject[ve],ye=0;ye<3;++ye)ke=ke||ue.contourProject[ve][ye];for(ve=0;ve<3;++ve){var Ee=j.projections[ve];for(ye=0;ye<16;++ye)Ee[ye]=0;for(ye=0;ye<4;++ye)Ee[5*ye]=1;Ee[5*ve]=0,Ee[12+ve]=ue.axesBounds[+(pe[ve]>0)][ve],m(Ee,ae.model,Ee);var me=j.clipBounds[ve];for(de=0;de<2;++de)for(ye=0;ye<3;++ye)me[de][ye]=ae.clipBounds[de][ye];me[0][ve]=-1e8,me[1][ve]=1e8}return j.showSurface=ge,j.showContour=ke,j}var te={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ee=C.slice(),Q=[1,0,0,0,1,0,0,0,1];function J(ae,ue){ae=ae||{};var ve=this.gl;ve.disable(ve.CULL_FACE),this._colorMap.bind(0);var ye=te;ye.model=ae.model||C,ye.view=ae.view||C,ye.projection=ae.projection||C,ye.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ye.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ye.objectOffset=this.objectOffset,ye.contourColor=this.contourColor[0],ye.inverseModel=g(ye.inverseModel,ye.model);for(var de=0;de<2;++de)for(var pe=ye.clipBounds[de],ge=0;ge<3;++ge)pe[ge]=Math.min(Math.max(this.clipBounds[de][ge],-1e8),1e8);ye.kambient=this.ambientLight,ye.kdiffuse=this.diffuseLight,ye.kspecular=this.specularLight,ye.roughness=this.roughness,ye.fresnel=this.fresnel,ye.opacity=this.opacity,ye.height=0,ye.permutation=Q,ye.vertexColor=this.vertexColor;var ke=ee;for(m(ke,ye.view,ye.model),m(ke,ye.projection,ke),g(ke,ke),de=0;de<3;++de)ye.eyePosition[de]=ke[12+de]/ke[15];var Ee=ke[15];for(de=0;de<3;++de)Ee+=this.lightPosition[de]*ke[4*de+3];for(de=0;de<3;++de){var me=ke[12+de];for(ge=0;ge<3;++ge)me+=ke[4*ge+de]*this.lightPosition[ge];ye.lightPosition[de]=me/Ee}var oe=q(ye,this);if(oe.showSurface){for(this._shader.bind(),this._shader.uniforms=ye,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ve.TRIANGLES,this._vertexCount),de=0;de<3;++de)this.surfaceProject[de]&&this.vertexCount&&(this._shader.uniforms.model=oe.projections[de],this._shader.uniforms.clipBounds=oe.clipBounds[de],this._vao.draw(ve.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var re=this._contourShader;ye.kambient=1,ye.kdiffuse=0,ye.kspecular=0,ye.opacity=1,re.bind(),re.uniforms=ye;var fe=this._contourVAO;for(fe.bind(),de=0;de<3;++de)for(re.uniforms.permutation=R[de],ve.lineWidth(this.contourWidth[de]*this.pixelRatio),ge=0;ge<this.contourLevels[de].length;++ge)ge===this.highlightLevel[de]?(re.uniforms.contourColor=this.highlightColor[de],re.uniforms.contourTint=this.highlightTint[de]):ge!==0&&ge-1!==this.highlightLevel[de]||(re.uniforms.contourColor=this.contourColor[de],re.uniforms.contourTint=this.contourTint[de]),this._contourCounts[de][ge]&&(re.uniforms.height=this.contourLevels[de][ge],fe.draw(ve.LINES,this._contourCounts[de][ge],this._contourOffsets[de][ge]));for(de=0;de<3;++de)for(re.uniforms.model=oe.projections[de],re.uniforms.clipBounds=oe.clipBounds[de],ge=0;ge<3;++ge)if(this.contourProject[de][ge]){re.uniforms.permutation=R[ge],ve.lineWidth(this.contourWidth[ge]*this.pixelRatio);for(var Se=0;Se<this.contourLevels[ge].length;++Se)Se===this.highlightLevel[ge]?(re.uniforms.contourColor=this.highlightColor[ge],re.uniforms.contourTint=this.highlightTint[ge]):Se!==0&&Se-1!==this.highlightLevel[ge]||(re.uniforms.contourColor=this.contourColor[ge],re.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][Se]&&(re.uniforms.height=this.contourLevels[ge][Se],fe.draw(ve.LINES,this._contourCounts[ge][Se],this._contourOffsets[ge][Se]))}for(fe.unbind(),(fe=this._dynamicVAO).bind(),de=0;de<3;++de)if(this._dynamicCounts[de]!==0)for(re.uniforms.model=ye.model,re.uniforms.clipBounds=ye.clipBounds,re.uniforms.permutation=R[de],ve.lineWidth(this.dynamicWidth[de]*this.pixelRatio),re.uniforms.contourColor=this.dynamicColor[de],re.uniforms.contourTint=this.dynamicTint[de],re.uniforms.height=this.dynamicLevel[de],fe.draw(ve.LINES,this._dynamicCounts[de],this._dynamicOffsets[de]),ge=0;ge<3;++ge)this.contourProject[ge][de]&&(re.uniforms.model=oe.projections[ge],re.uniforms.clipBounds=oe.clipBounds[ge],fe.draw(ve.LINES,this._dynamicCounts[de],this._dynamicOffsets[de]));fe.unbind()}}W.draw=function(ae){return J.call(this,ae,!1)},W.drawTransparent=function(ae){return J.call(this,ae,!0)};var K={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Y(ae,ue){return Array.isArray(ae)?[ue(ae[0]),ue(ae[1]),ue(ae[2])]:[ue(ae),ue(ae),ue(ae)]}function ie(ae){return Array.isArray(ae)?ae.length===3?[ae[0],ae[1],ae[2],1]:[ae[0],ae[1],ae[2],ae[3]]:[0,0,0,1]}function se(ae){if(Array.isArray(ae)){if(Array.isArray(ae))return[ie(ae[0]),ie(ae[1]),ie(ae[2])];var ue=ie(ae);return[ue.slice(),ue.slice(),ue.slice()]}}W.drawPick=function(ae){ae=ae||{};var ue=this.gl;ue.disable(ue.CULL_FACE);var ve=K;ve.model=ae.model||C,ve.view=ae.view||C,ve.projection=ae.projection||C,ve.shape=this._field[2].shape,ve.pickId=this.pickId/255,ve.lowerBound=this.bounds[0],ve.upperBound=this.bounds[1],ve.objectOffset=this.objectOffset,ve.permutation=Q;for(var ye=0;ye<2;++ye)for(var de=ve.clipBounds[ye],pe=0;pe<3;++pe)de[pe]=Math.min(Math.max(this.clipBounds[ye][pe],-1e8),1e8);var ge=q(ve,this);if(ge.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ve,this._vao.bind(),this._vao.draw(ue.TRIANGLES,this._vertexCount),ye=0;ye<3;++ye)this.surfaceProject[ye]&&(this._pickShader.uniforms.model=ge.projections[ye],this._pickShader.uniforms.clipBounds=ge.clipBounds[ye],this._vao.draw(ue.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ge.showContour){var ke=this._contourPickShader;ke.bind(),ke.uniforms=ve;var Ee=this._contourVAO;for(Ee.bind(),pe=0;pe<3;++pe)for(ue.lineWidth(this.contourWidth[pe]*this.pixelRatio),ke.uniforms.permutation=R[pe],ye=0;ye<this.contourLevels[pe].length;++ye)this._contourCounts[pe][ye]&&(ke.uniforms.height=this.contourLevels[pe][ye],Ee.draw(ue.LINES,this._contourCounts[pe][ye],this._contourOffsets[pe][ye]));for(ye=0;ye<3;++ye)for(ke.uniforms.model=ge.projections[ye],ke.uniforms.clipBounds=ge.clipBounds[ye],pe=0;pe<3;++pe)if(this.contourProject[ye][pe]){ke.uniforms.permutation=R[pe],ue.lineWidth(this.contourWidth[pe]*this.pixelRatio);for(var me=0;me<this.contourLevels[pe].length;++me)this._contourCounts[pe][me]&&(ke.uniforms.height=this.contourLevels[pe][me],Ee.draw(ue.LINES,this._contourCounts[pe][me],this._contourOffsets[pe][me]))}Ee.unbind()}},W.pick=function(ae){if(!ae||ae.id!==this.pickId)return null;var ue=this._field[2].shape,ve=this._pickResult,ye=ue[0]*(ae.value[0]+(ae.value[2]>>4)/16)/255,de=Math.floor(ye),pe=ye-de,ge=ue[1]*(ae.value[1]+(15&ae.value[2])/16)/255,ke=Math.floor(ge),Ee=ge-ke;de+=1,ke+=1;var me=ve.position;me[0]=me[1]=me[2]=0;for(var oe=0;oe<2;++oe)for(var re=oe?pe:1-pe,fe=0;fe<2;++fe)for(var Se=de+oe,be=ke+fe,we=re*(fe?Ee:1-Ee),Me=0;Me<3;++Me)me[Me]+=this._field[Me].get(Se,be)*we;for(var Ie=this._pickResult.level,Oe=0;Oe<3;++Oe)if(Ie[Oe]=y.le(this.contourLevels[Oe],me[Oe]),Ie[Oe]<0)this.contourLevels[Oe].length>0&&(Ie[Oe]=0);else if(Ie[Oe]<this.contourLevels[Oe].length-1){var he=this.contourLevels[Oe][Ie[Oe]],_e=this.contourLevels[Oe][Ie[Oe]+1];Math.abs(he-me[Oe])>Math.abs(_e-me[Oe])&&(Ie[Oe]+=1)}for(ve.index[0]=pe<.5?de:de+1,ve.index[1]=Ee<.5?ke:ke+1,ve.uv[0]=ye/ue[0],ve.uv[1]=ge/ue[1],Me=0;Me<3;++Me)ve.dataCoordinate[Me]=this._field[Me].get(ve.index[0],ve.index[1]);return ve},W.padField=function(ae,ue){var ve=ue.shape.slice(),ye=ae.shape.slice();h.assign(ae.lo(1,1).hi(ve[0],ve[1]),ue),h.assign(ae.lo(1).hi(ve[0],1),ue.hi(ve[0],1)),h.assign(ae.lo(1,ye[1]-1).hi(ve[0],1),ue.lo(0,ve[1]-1).hi(ve[0],1)),h.assign(ae.lo(0,1).hi(1,ve[1]),ue.hi(1)),h.assign(ae.lo(ye[0]-1,1).hi(1,ve[1]),ue.lo(ve[0]-1)),ae.set(0,0,ue.get(0,0)),ae.set(0,ye[1]-1,ue.get(0,ve[1]-1)),ae.set(ye[0]-1,0,ue.get(ve[0]-1,0)),ae.set(ye[0]-1,ye[1]-1,ue.get(ve[0]-1,ve[1]-1))},W.update=function(ae){ae=ae||{},this.objectOffset=ae.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ae&&(this.contourWidth=Y(ae.contourWidth,Number)),"showContour"in ae&&(this.showContour=Y(ae.showContour,Boolean)),"showSurface"in ae&&(this.showSurface=!!ae.showSurface),"contourTint"in ae&&(this.contourTint=Y(ae.contourTint,Boolean)),"contourColor"in ae&&(this.contourColor=se(ae.contourColor)),"contourProject"in ae&&(this.contourProject=Y(ae.contourProject,function(sn){return Y(sn,Boolean)})),"surfaceProject"in ae&&(this.surfaceProject=ae.surfaceProject),"dynamicColor"in ae&&(this.dynamicColor=se(ae.dynamicColor)),"dynamicTint"in ae&&(this.dynamicTint=Y(ae.dynamicTint,Number)),"dynamicWidth"in ae&&(this.dynamicWidth=Y(ae.dynamicWidth,Number)),"opacity"in ae&&(this.opacity=ae.opacity),"opacityscale"in ae&&(this.opacityscale=ae.opacityscale),"colorBounds"in ae&&(this.colorBounds=ae.colorBounds),"vertexColor"in ae&&(this.vertexColor=ae.vertexColor?1:0),"colormap"in ae&&this._colorMap.setPixels(this.genColormap(ae.colormap,this.opacityscale));var ue=ae.field||ae.coords&&ae.coords[2]||null,ve=!1;if(ue||(ue=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ae||"coords"in ae){var ye=(ue.shape[0]+2)*(ue.shape[1]+2);ye>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(i.nextPow2(ye))),this._field[2]=x(this._field[2].data,[ue.shape[0]+2,ue.shape[1]+2]),this.padField(this._field[2],ue),this.shape=ue.shape.slice();for(var de=this.shape,pe=0;pe<2;++pe)this._field[2].size>this._field[pe].data.length&&(l.freeFloat(this._field[pe].data),this._field[pe].data=l.mallocFloat(this._field[2].size)),this._field[pe]=x(this._field[pe].data,[de[0]+2,de[1]+2]);if(ae.coords){var ge=ae.coords;if(!Array.isArray(ge)||ge.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(pe=0;pe<2;++pe){var ke=ge[pe];for(fe=0;fe<2;++fe)if(ke.shape[fe]!==de[fe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[pe],ke)}}else if(ae.ticks){var Ee=ae.ticks;if(!Array.isArray(Ee)||Ee.length!==2)throw new Error("gl-surface: invalid ticks");for(pe=0;pe<2;++pe){var me=Ee[pe];if((Array.isArray(me)||me.length)&&(me=x(me)),me.shape[0]!==de[pe])throw new Error("gl-surface: invalid tick length");var oe=x(me.data,de);oe.stride[pe]=me.stride[0],oe.stride[1^pe]=0,this.padField(this._field[pe],oe)}}else{for(pe=0;pe<2;++pe){var re=[0,0];re[pe]=1,this._field[pe]=x(this._field[pe].data,[de[0]+2,de[1]+2],re,0)}this._field[0].set(0,0,0);for(var fe=0;fe<de[0];++fe)this._field[0].set(fe+1,0,fe);for(this._field[0].set(de[0]+1,0,de[0]-1),this._field[1].set(0,0,0),fe=0;fe<de[1];++fe)this._field[1].set(0,fe+1,fe);this._field[1].set(0,de[1]+1,de[1]-1)}var Se=this._field,be=x(l.mallocFloat(3*Se[2].size*2),[3,de[0]+2,de[1]+2,2]);for(pe=0;pe<3;++pe)v(be.pick(pe),Se[pe],"mirror");var we=x(l.mallocFloat(3*Se[2].size),[de[0]+2,de[1]+2,3]);for(pe=0;pe<de[0]+2;++pe)for(fe=0;fe<de[1]+2;++fe){var Me=be.get(0,pe,fe,0),Ie=be.get(0,pe,fe,1),Oe=be.get(1,pe,fe,0),he=be.get(1,pe,fe,1),_e=be.get(2,pe,fe,0),Ae=be.get(2,pe,fe,1),De=Oe*Ae-he*_e,Le=_e*Ie-Ae*Me,Be=Me*he-Ie*Oe,Ve=Math.sqrt(De*De+Le*Le+Be*Be);Ve<1e-8?(Ve=Math.max(Math.abs(De),Math.abs(Le),Math.abs(Be)))<1e-8?(Be=1,Le=De=0,Ve=1):Ve=1/Ve:Ve=1/Math.sqrt(Ve),we.set(pe,fe,0,De*Ve),we.set(pe,fe,1,Le*Ve),we.set(pe,fe,2,Be*Ve)}l.free(be.data);var Ze=[1/0,1/0,1/0],rt=[-1/0,-1/0,-1/0],it=1/0,dt=-1/0,mt=(de[0]-1)*(de[1]-1)*6,ht=l.mallocFloat(i.nextPow2(10*mt)),Qe=0,Je=0;for(pe=0;pe<de[0]-1;++pe)e:for(fe=0;fe<de[1]-1;++fe){for(var wt=0;wt<2;++wt)for(var Pt=0;Pt<2;++Pt)for(var It=0;It<3;++It){var At=this._field[It].get(1+pe+wt,1+fe+Pt);if(isNaN(At)||!isFinite(At))continue e}for(It=0;It<6;++It){var qe=pe+O[It][0],Ye=fe+O[It][1],Ne=this._field[0].get(qe+1,Ye+1),We=this._field[1].get(qe+1,Ye+1);At=this._field[2].get(qe+1,Ye+1),De=we.get(qe+1,Ye+1,0),Le=we.get(qe+1,Ye+1,1),Be=we.get(qe+1,Ye+1,2),ae.intensity&&(at=ae.intensity.get(qe,Ye));var at=ae.intensity?ae.intensity.get(qe,Ye):At+this.objectOffset[2];ht[Qe++]=qe,ht[Qe++]=Ye,ht[Qe++]=Ne,ht[Qe++]=We,ht[Qe++]=At,ht[Qe++]=0,ht[Qe++]=at,ht[Qe++]=De,ht[Qe++]=Le,ht[Qe++]=Be,Ze[0]=Math.min(Ze[0],Ne+this.objectOffset[0]),Ze[1]=Math.min(Ze[1],We+this.objectOffset[1]),Ze[2]=Math.min(Ze[2],At+this.objectOffset[2]),it=Math.min(it,at),rt[0]=Math.max(rt[0],Ne+this.objectOffset[0]),rt[1]=Math.max(rt[1],We+this.objectOffset[1]),rt[2]=Math.max(rt[2],At+this.objectOffset[2]),dt=Math.max(dt,at),Je+=1}}for(ae.intensityBounds&&(it=+ae.intensityBounds[0],dt=+ae.intensityBounds[1]),pe=6;pe<Qe;pe+=10)ht[pe]=(ht[pe]-it)/(dt-it);this._vertexCount=Je,this._coordinateBuffer.update(ht.subarray(0,Qe)),l.freeFloat(ht),l.free(we.data),this.bounds=[Ze,rt],this.intensity=ae.intensity||this._field[2],this.intensityBounds[0]===it&&this.intensityBounds[1]===dt||(ve=!0),this.intensityBounds=[it,dt]}if("levels"in ae){var tt=ae.levels;for(tt=Array.isArray(tt[0])?tt.slice():[[],[],tt],pe=0;pe<3;++pe)tt[pe]=tt[pe].slice(),tt[pe].sort(function(sn,Qt){return sn-Qt});for(pe=0;pe<3;++pe)for(fe=0;fe<tt[pe].length;++fe)tt[pe][fe]-=this.objectOffset[pe];e:for(pe=0;pe<3;++pe){if(tt[pe].length!==this.contourLevels[pe].length){ve=!0;break}for(fe=0;fe<tt[pe].length;++fe)if(tt[pe][fe]!==this.contourLevels[pe][fe]){ve=!0;break e}}this.contourLevels=tt}if(ve){Se=this._field,de=this.shape;for(var Re=[],Fe=0;Fe<3;++Fe){var nt=this.contourLevels[Fe],Ge=[],ut=[],pt=[0,0,0];for(pe=0;pe<nt.length;++pe){var gt=d(this._field[Fe],nt[pe]);Ge.push(Re.length/5|0),Je=0;e:for(fe=0;fe<gt.cells.length;++fe){var ct=gt.cells[fe];for(It=0;It<2;++It){var Tt=gt.positions[ct[It]],vt=Tt[0],kt=0|Math.floor(vt),Lt=vt-kt,Ct=Tt[1],Dt=0|Math.floor(Ct),Gt=Ct-Dt,tn=!1;t:for(var jt=0;jt<3;++jt){pt[jt]=0;var Wt=(Fe+jt+1)%3;for(wt=0;wt<2;++wt){var Ft=wt?Lt:1-Lt;for(qe=0|Math.min(Math.max(kt+wt,0),de[0]),Pt=0;Pt<2;++Pt){var Ln=Pt?Gt:1-Gt;if(Ye=0|Math.min(Math.max(Dt+Pt,0),de[1]),At=jt<2?this._field[Wt].get(qe,Ye):(this.intensity.get(qe,Ye)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(At)||isNaN(At)){tn=!0;break t}var bn=Ft*Ln;pt[jt]+=bn*At}}}if(tn){if(It>0){for(var hn=0;hn<5;++hn)Re.pop();Je-=1}continue e}Re.push(pt[0],pt[1],Tt[0],Tt[1],pt[2]),Je+=1}}ut.push(Je)}this._contourOffsets[Fe]=Ge,this._contourCounts[Fe]=ut}var Kt=l.mallocFloat(Re.length);for(pe=0;pe<Re.length;++pe)Kt[pe]=Re[pe];this._contourBuffer.update(Kt),l.freeFloat(Kt)}},W.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ae=0;ae<3;++ae)l.freeFloat(this._field[ae].data)},W.highlight=function(ae){var ue,ve;if(!ae)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ue=0;ue<3;++ue)this.enableHighlight[ue]?this.highlightLevel[ue]=ae.level[ue]:this.highlightLevel[ue]=-1;for(ve=this.snapToData?ae.dataCoordinate:ae.position,ue=0;ue<3;++ue)ve[ue]-=this.objectOffset[ue];if(this.enableDynamic[0]&&ve[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ve[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ve[2]!==this.dynamicLevel[2]){for(var ye=0,de=this.shape,pe=l.mallocFloat(12*de[0]*de[1]),ge=0;ge<3;++ge)if(this.enableDynamic[ge]){this.dynamicLevel[ge]=ve[ge];var ke=(ge+1)%3,Ee=(ge+2)%3,me=this._field[ge],oe=this._field[ke],re=this._field[Ee],fe=d(me,ve[ge]),Se=fe.cells,be=fe.positions;for(this._dynamicOffsets[ge]=ye,ue=0;ue<Se.length;++ue)for(var we=Se[ue],Me=0;Me<2;++Me){var Ie=be[we[Me]],Oe=+Ie[0],he=0|Oe,_e=0|Math.min(he+1,de[0]),Ae=Oe-he,De=1-Ae,Le=+Ie[1],Be=0|Le,Ve=0|Math.min(Be+1,de[1]),Ze=Le-Be,rt=1-Ze,it=De*rt,dt=De*Ze,mt=Ae*rt,ht=Ae*Ze,Qe=it*oe.get(he,Be)+dt*oe.get(he,Ve)+mt*oe.get(_e,Be)+ht*oe.get(_e,Ve),Je=it*re.get(he,Be)+dt*re.get(he,Ve)+mt*re.get(_e,Be)+ht*re.get(_e,Ve);if(isNaN(Qe)||isNaN(Je)){Me&&(ye-=1);break}pe[2*ye+0]=Qe,pe[2*ye+1]=Je,ye+=1}this._dynamicCounts[ge]=ye-this._dynamicOffsets[ge]}else this.dynamicLevel[ge]=NaN,this._dynamicCounts[ge]=0;this._dynamicBuffer.update(pe.subarray(0,2*ye)),l.freeFloat(pe)}}},7766:function(p,s,t){"use strict";var i=t(9618),n=t(5298),r=t(1888);p.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function(w){a=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],l=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],c=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return v(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var f=arguments[1],S=h(f)?f:f.raw;if(S)return function(w,E,P,C,O,R){var U=y(w);return w.texImage2D(w.TEXTURE_2D,0,O,O,R,E),new d(w,U,P,C,O,R)}(_,S,0|f.width,0|f.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return function(w,E){var P=E.dtype,C=E.shape.slice(),O=w.getParameter(w.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>O||C[1]<0||C[1]>O)throw new Error("gl-texture2d: Invalid texture size");var R=g(C,E.stride.slice()),U=0;P==="float32"?U=w.FLOAT:P==="float64"?(U=w.FLOAT,R=!1,P="float32"):P==="uint8"?U=w.UNSIGNED_BYTE:(U=w.UNSIGNED_BYTE,R=!1,P="uint8");var D,N,W=0;if(C.length===2)W=w.LUMINANCE,C=[C[0],C[1],1],E=i(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)W=w.ALPHA;else if(C[2]===2)W=w.LUMINANCE_ALPHA;else if(C[2]===3)W=w.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");W=w.RGBA}}U!==w.FLOAT||w.getExtension("OES_texture_float")||(U=w.UNSIGNED_BYTE,R=!1);var F=E.size;if(R)D=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var j=[C[2],C[2]*C[0],1];N=r.malloc(F,P);var q=i(N,C,j,0);P!=="float32"&&P!=="float64"||U!==w.UNSIGNED_BYTE?n.assign(q,E):u(q,E),D=N.subarray(0,F)}var te=y(w);return w.texImage2D(w.TEXTURE_2D,0,W,C[0],C[1],0,W,U,D),R||r.free(N),new d(w,te,C[0],C[1],W,U)}(_,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,l=null,c=null;function h(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var u=function(_,f){n.muls(_,f,255)};function x(_,f,S){var w=_.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[f,S],_.bind(),w.texImage2D(w.TEXTURE_2D,0,_.format,f,S,0,_.format,_.type,null),_._mipLevels=[0],_}function d(_,f,S,w,E,P){this.gl=_,this.handle=f,this.format=E,this.type=P,this._shape=[S,w],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return C._wrapS},set:function(U){return C.wrapS=U}},{get:function(){return C._wrapT},set:function(U){return C.wrapT=U}}]),this._wrapVector=O;var R=[this._shape[0],this._shape[1]];Object.defineProperties(R,[{get:function(){return C._shape[0]},set:function(U){return C.width=U}},{get:function(){return C._shape[1]},set:function(U){return C.height=U}}]),this._shapeVector=R}var m=d.prototype;function g(_,f){return _.length===3?f[2]===1&&f[1]===_[0]*_[2]&&f[0]===_[2]:f[0]===1&&f[1]===_[0]}function y(_){var f=_.createTexture();return _.bindTexture(_.TEXTURE_2D,f),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),f}function v(_,f,S,w,E){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(f<0||f>P||S<0||S>P)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=y(_);return _.texImage2D(_.TEXTURE_2D,0,w,f,S,0,w,E,null),new d(_,C,f,S,w,E)}Object.defineProperties(m,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var f=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),f!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(c.indexOf(_[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return x(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_}}}),m.bind=function(_){var f=this.gl;return _!==void 0&&f.activeTexture(f.TEXTURE0+(0|_)),f.bindTexture(f.TEXTURE_2D,this.handle),_!==void 0?0|_:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},m.dispose=function(){this.gl.deleteTexture(this.handle)},m.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),f=0;_>0;++f,_>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},m.setPixels=function(_,f,S,w){var E=this.gl;this.bind(),Array.isArray(f)?(w=S,S=0|f[1],f=0|f[0]):(f=f||0,S=S||0),w=w||0;var P=h(_)?_:_.raw;if(P)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,f,S,this.format,this.type,P);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||f+_.shape[1]>this._shape[1]>>>w||S+_.shape[0]>this._shape[0]>>>w||f<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(C,O,R,U,D,N,W,F){var j=F.dtype,q=F.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,ee=0,Q=g(q,F.stride.slice());if(j==="float32"?te=C.FLOAT:j==="float64"?(te=C.FLOAT,Q=!1,j="float32"):j==="uint8"?te=C.UNSIGNED_BYTE:(te=C.UNSIGNED_BYTE,Q=!1,j="uint8"),q.length===2)ee=C.LUMINANCE,q=[q[0],q[1],1],F=i(F.data,q,[F.stride[0],F.stride[1],1],F.offset);else{if(q.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(q[2]===1)ee=C.ALPHA;else if(q[2]===2)ee=C.LUMINANCE_ALPHA;else if(q[2]===3)ee=C.RGB;else{if(q[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");ee=C.RGBA}q[2]}if(ee!==C.LUMINANCE&&ee!==C.ALPHA||D!==C.LUMINANCE&&D!==C.ALPHA||(ee=D),ee!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var J=F.size,K=W.indexOf(U)<0;if(K&&W.push(U),te===N&&Q)F.offset===0&&F.data.length===J?K?C.texImage2D(C.TEXTURE_2D,U,D,q[0],q[1],0,D,N,F.data):C.texSubImage2D(C.TEXTURE_2D,U,O,R,q[0],q[1],D,N,F.data):K?C.texImage2D(C.TEXTURE_2D,U,D,q[0],q[1],0,D,N,F.data.subarray(F.offset,F.offset+J)):C.texSubImage2D(C.TEXTURE_2D,U,O,R,q[0],q[1],D,N,F.data.subarray(F.offset,F.offset+J));else{var Y;Y=N===C.FLOAT?r.mallocFloat32(J):r.mallocUint8(J);var ie=i(Y,q,[q[2],q[2]*q[0],1]);te===C.FLOAT&&N===C.UNSIGNED_BYTE?u(ie,F):n.assign(ie,F),K?C.texImage2D(C.TEXTURE_2D,U,D,q[0],q[1],0,D,N,Y.subarray(0,J)):C.texSubImage2D(C.TEXTURE_2D,U,O,R,q[0],q[1],D,N,Y.subarray(0,J)),N===C.FLOAT?r.freeFloat32(Y):r.freeUint8(Y)}})(E,f,S,w,this.format,this.type,this._mipLevels,_)}}},1433:function(p){"use strict";p.exports=function(s,t,i){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var n=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(i){if(i.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<i.length;++r){var a=i[r];if(a.buffer){var l=a.buffer,c=a.size||4,h=a.type||s.FLOAT,u=!!a.normalized,x=a.stride||0,d=a.offset||0;l.bind(),s.enableVertexAttribArray(r),s.vertexAttribPointer(r,c,h,u,x,d)}else{if(typeof a=="number")s.vertexAttrib1f(r,a);else if(a.length===1)s.vertexAttrib1f(r,a[0]);else if(a.length===2)s.vertexAttrib2f(r,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(r,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(r,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(r)}}for(;r<n;++r)s.disableVertexAttribArray(r)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),r=0;r<n;++r)s.disableVertexAttribArray(r)}},870:function(p,s,t){"use strict";var i=t(1433);function n(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(r,a,l){this._elements=a,this._attributes=r,this._elementsType=l||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(r,a,l){l=l||0;var c=this.gl;this._elements?c.drawElements(r,a,this._elementsType,l):c.drawArrays(r,l,a)},p.exports=function(r){return new n(r)}},7518:function(p,s,t){"use strict";var i=t(1433);function n(a,l,c,h,u,x){this.location=a,this.dimension=l,this.a=c,this.b=h,this.c=u,this.d=x}function r(a,l,c){this.gl=a,this._ext=l,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}n.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(a,l,c){if(this.bind(),i(this.gl,l,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var u=a[h];typeof u=="number"?this._attribs.push(new n(h,1,u)):Array.isArray(u)&&this._attribs.push(new n(h,u.length,u[0],u[1],u[2],u[3]))}this._useElements=!!l,this._elementsType=c||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(a,l,c){c=c||0;var h=this.gl;this._useElements?h.drawElements(a,l,this._elementsType,c):h.drawArrays(a,c,l)},p.exports=function(a,l){return new r(a,l,l.createVertexArrayOES())}},8116:function(p,s,t){"use strict";var i=t(7518),n=t(870);function r(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}p.exports=function(a,l,c,h){var u,x=a.createVertexArray?new r(a):a.getExtension("OES_vertex_array_object");return(u=x?i(a,x):n(a)).update(l,c,h),u}},5632:function(p){p.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s}},8192:function(p,s,t){p.exports=function(a,l){var c=i(a[0],a[1],a[2]),h=i(l[0],l[1],l[2]);n(c,c),n(h,h);var u=r(c,h);return u>1?0:Math.acos(u)};var i=t(2825),n=t(3536),r=t(244)},9226:function(p){p.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},3126:function(p){p.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},3990:function(p){p.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},1091:function(p){p.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},5911:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],c=i[1],h=i[2];return s[0]=r*h-a*c,s[1]=a*l-n*h,s[2]=n*c-r*l,s}},5455:function(p,s,t){p.exports=t(7056)},7056:function(p){p.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return Math.sqrt(i*i+n*n+r*r)}},4008:function(p,s,t){p.exports=t(6690)},6690:function(p){p.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s}},244:function(p){p.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},2613:function(p){p.exports=1e-6},9922:function(p,s,t){p.exports=function(n,r){var a=n[0],l=n[1],c=n[2],h=r[0],u=r[1],x=r[2];return Math.abs(a-h)<=i*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(l-u)<=i*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(c-x)<=i*Math.max(1,Math.abs(c),Math.abs(x))};var i=t(2613)},9265:function(p){p.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},2681:function(p){p.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},5137:function(p,s,t){p.exports=function(n,r,a,l,c,h){var u,x;for(r||(r=3),a||(a=0),x=l?Math.min(l*r+a,n.length):n.length,u=a;u<x;u+=r)i[0]=n[u],i[1]=n[u+1],i[2]=n[u+2],c(i,i,h),n[u]=i[0],n[u+1]=i[1],n[u+2]=i[2];return n};var i=t(1091)()},2825:function(p){p.exports=function(s,t,i){var n=new Float32Array(3);return n[0]=s,n[1]=t,n[2]=i,n}},2931:function(p,s,t){p.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(p){p.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},868:function(p,s,t){p.exports=t(1387)},1387:function(p){p.exports=function(s){var t=s[0],i=s[1],n=s[2];return Math.sqrt(t*t+i*i+n*n)}},6658:function(p){p.exports=function(s,t,i,n){var r=t[0],a=t[1],l=t[2];return s[0]=r+n*(i[0]-r),s[1]=a+n*(i[1]-a),s[2]=l+n*(i[2]-l),s}},7417:function(p){p.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s}},8107:function(p){p.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s}},4505:function(p,s,t){p.exports=t(5847)},5847:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s}},5093:function(p){p.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},3536:function(p){p.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},7636:function(p){p.exports=function(s,t){t=t||1;var i=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*t;return s[0]=Math.cos(i)*r,s[1]=Math.sin(i)*r,s[2]=n*t,s}},6894:function(p){p.exports=function(s,t,i,n){var r=i[1],a=i[2],l=t[1]-r,c=t[2]-a,h=Math.sin(n),u=Math.cos(n);return s[0]=t[0],s[1]=r+l*u-c*h,s[2]=a+l*h+c*u,s}},109:function(p){p.exports=function(s,t,i,n){var r=i[0],a=i[2],l=t[0]-r,c=t[2]-a,h=Math.sin(n),u=Math.cos(n);return s[0]=r+c*h+l*u,s[1]=t[1],s[2]=a+c*u-l*h,s}},8692:function(p){p.exports=function(s,t,i,n){var r=i[0],a=i[1],l=t[0]-r,c=t[1]-a,h=Math.sin(n),u=Math.cos(n);return s[0]=r+l*u-c*h,s[1]=a+l*h+c*u,s[2]=t[2],s}},2447:function(p){p.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},6621:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s}},8489:function(p){p.exports=function(s,t,i,n){return s[0]=t[0]+i[0]*n,s[1]=t[1]+i[1]*n,s[2]=t[2]+i[2]*n,s}},1463:function(p){p.exports=function(s,t,i,n){return s[0]=t,s[1]=i,s[2]=n,s}},6141:function(p,s,t){p.exports=t(2953)},5486:function(p,s,t){p.exports=t(3066)},2953:function(p){p.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return i*i+n*n+r*r}},3066:function(p){p.exports=function(s){var t=s[0],i=s[1],n=s[2];return t*t+i*i+n*n}},2229:function(p,s,t){p.exports=t(6843)},6843:function(p){p.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s}},492:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2];return s[0]=n*i[0]+r*i[3]+a*i[6],s[1]=n*i[1]+r*i[4]+a*i[7],s[2]=n*i[2]+r*i[5]+a*i[8],s}},5673:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[3]*n+i[7]*r+i[11]*a+i[15];return l=l||1,s[0]=(i[0]*n+i[4]*r+i[8]*a+i[12])/l,s[1]=(i[1]*n+i[5]*r+i[9]*a+i[13])/l,s[2]=(i[2]*n+i[6]*r+i[10]*a+i[14])/l,s}},264:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],c=i[1],h=i[2],u=i[3],x=u*n+c*a-h*r,d=u*r+h*n-l*a,m=u*a+l*r-c*n,g=-l*n-c*r-h*a;return s[0]=x*u+g*-l+d*-h-m*-c,s[1]=d*u+g*-c+m*-l-x*-h,s[2]=m*u+g*-h+x*-c-d*-l,s}},4361:function(p){p.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s[3]=t[3]+i[3],s}},2335:function(p){p.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},2933:function(p){p.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},7536:function(p){p.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},4691:function(p){p.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(i*i+n*n+r*r+a*a)}},1373:function(p){p.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s[3]=t[3]/i[3],s}},3750:function(p){p.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},3390:function(p){p.exports=function(s,t,i,n){var r=new Float32Array(4);return r[0]=s,r[1]=t,r[2]=i,r[3]=n,r}},9970:function(p,s,t){p.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(p){p.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},6808:function(p){p.exports=function(s){var t=s[0],i=s[1],n=s[2],r=s[3];return Math.sqrt(t*t+i*i+n*n+r*r)}},2573:function(p){p.exports=function(s,t,i,n){var r=t[0],a=t[1],l=t[2],c=t[3];return s[0]=r+n*(i[0]-r),s[1]=a+n*(i[1]-a),s[2]=l+n*(i[2]-l),s[3]=c+n*(i[3]-c),s}},160:function(p){p.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s[3]=Math.max(t[3],i[3]),s}},2334:function(p){p.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s[3]=Math.min(t[3],i[3]),s}},3576:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s[3]=t[3]*i[3],s}},1498:function(p){p.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},5177:function(p){p.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=i*i+n*n+r*r+a*a;return l>0&&(l=1/Math.sqrt(l),s[0]=i*l,s[1]=n*l,s[2]=r*l,s[3]=a*l),s}},9131:function(p,s,t){var i=t(5177),n=t(9288);p.exports=function(r,a){return a=a||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),i(r,r),n(r,r,a),r}},9288:function(p){p.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s[3]=t[3]*i,s}},4844:function(p){p.exports=function(s,t,i,n){return s[0]=t[0]+i[0]*n,s[1]=t[1]+i[1]*n,s[2]=t[2]+i[2]*n,s[3]=t[3]+i[3]*n,s}},4578:function(p){p.exports=function(s,t,i,n,r){return s[0]=t,s[1]=i,s[2]=n,s[3]=r,s}},7960:function(p){p.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],a=t[3]-s[3];return i*i+n*n+r*r+a*a}},483:function(p){p.exports=function(s){var t=s[0],i=s[1],n=s[2],r=s[3];return t*t+i*i+n*n+r*r}},6860:function(p){p.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s[3]=t[3]-i[3],s}},5352:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=t[3];return s[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*l,s[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*l,s[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*l,s[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*l,s}},4041:function(p){p.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],c=i[1],h=i[2],u=i[3],x=u*n+c*a-h*r,d=u*r+h*n-l*a,m=u*a+l*r-c*n,g=-l*n-c*r-h*a;return s[0]=x*u+g*-l+d*-h-m*-c,s[1]=d*u+g*-c+m*-l-x*-h,s[2]=m*u+g*-h+x*-c-d*-l,s[3]=t[3],s}},1848:function(p,s,t){var i=t(4905),n=t(6468);p.exports=function(r){for(var a=Array.isArray(r)?r:i(r),l=0;l<a.length;l++){var c=a[l];if(c.type==="preprocessor"){var h=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var u=h[1],x=h[2];return(u?n(x):x).trim()}}}}},5874:function(p,s,t){p.exports=function(C){var O,R,U,D=0,N=0,W=c,F=[],j=[],q=1,te=0,ee=0,Q=!1,J=!1,K="",Y=r,ie=i;(C=C||{}).version==="300 es"&&(Y=l,ie=a);var se={},ae={};for(D=0;D<Y.length;D++)se[Y[D]]=!0;for(D=0;D<ie.length;D++)ae[ie[D]]=!0;return function(fe){return j=[],fe!==null?function(Se){var be;for(D=0,Se.toString&&(Se=Se.toString()),K+=Se.replace(/\r\n/g,`
`),U=K.length;O=K[D],D<U;){switch(be=D,W){case u:D=pe();break;case x:case d:D=de();break;case m:D=ge();break;case g:D=me();break;case E:D=Ee();break;case y:D=oe();break;case h:D=re();break;case S:D=ye();break;case c:D=ve()}be!==D&&(K[be]===`
`?(te=0,++q):++te)}return N+=D,K=K.slice(D),j}(fe):(F.length&&ue(F.join("")),W=w,ue("(eof)"),j)};function ue(fe){fe.length&&j.push({type:P[W],data:fe,position:ee,line:q,column:te})}function ve(){return F=F.length?[]:F,R==="/"&&O==="*"?(ee=N+D-1,W=u,R=O,D+1):R==="/"&&O==="/"?(ee=N+D-1,W=x,R=O,D+1):O==="#"?(W=d,ee=N+D,D):/\s/.test(O)?(W=S,ee=N+D,D):(Q=/\d/.test(O),J=/[^\w_]/.test(O),ee=N+D,W=Q?g:J?m:h,D)}function ye(){return/[^\s]/g.test(O)?(ue(F.join("")),W=c,D):(F.push(O),R=O,D+1)}function de(){return O!=="\r"&&O!==`
`||R==="\\"?(F.push(O),R=O,D+1):(ue(F.join("")),W=c,D)}function pe(){return O==="/"&&R==="*"?(F.push(O),ue(F.join("")),W=c,D+1):(F.push(O),R=O,D+1)}function ge(){if(R==="."&&/\d/.test(O))return W=y,D;if(R==="/"&&O==="*")return W=u,D;if(R==="/"&&O==="/")return W=x,D;if(O==="."&&F.length){for(;ke(F););return W=y,D}if(O===";"||O===")"||O==="("){if(F.length)for(;ke(F););return ue(O),W=c,D+1}var fe=F.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||fe){for(;ke(F););return W=c,D}return F.push(O),R=O,D+1}function ke(fe){for(var Se,be,we=0;;){if(Se=n.indexOf(fe.slice(0,fe.length+we).join("")),be=n[Se],Se===-1){if(we--+fe.length>0)continue;be=fe.slice(0,1).join("")}return ue(be),ee+=be.length,(F=F.slice(be.length)).length}}function Ee(){return/[^a-fA-F0-9]/.test(O)?(ue(F.join("")),W=c,D):(F.push(O),R=O,D+1)}function me(){return O==="."||/[eE]/.test(O)?(F.push(O),W=y,R=O,D+1):O==="x"&&F.length===1&&F[0]==="0"?(W=E,F.push(O),R=O,D+1):/[^\d]/.test(O)?(ue(F.join("")),W=c,D):(F.push(O),R=O,D+1)}function oe(){return O==="f"&&(F.push(O),R=O,D+=1),/[eE]/.test(O)?(F.push(O),R=O,D+1):(O!=="-"&&O!=="+"||!/[eE]/.test(R))&&/[^\d]/.test(O)?(ue(F.join("")),W=c,D):(F.push(O),R=O,D+1)}function re(){if(/[^\d\w_]/.test(O)){var fe=F.join("");return W=ae[fe]?f:se[fe]?_:v,ue(F.join("")),W=c,D}return F.push(O),R=O,D+1}};var i=t(620),n=t(7827),r=t(6852),a=t(7932),l=t(3508),c=999,h=9999,u=0,x=1,d=2,m=3,g=4,y=5,v=6,_=7,f=8,S=9,w=10,E=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(p,s,t){var i=t(6852);i=i.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),p.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(p){p.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(p,s,t){var i=t(620);p.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(p){p.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(p){p.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(p,s,t){var i=t(5874);p.exports=function(n,r){var a=i(r),l=[];return(l=l.concat(a(n))).concat(a(null))}},3236:function(p){p.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),i=[],n=0;n<s.length-1;n++)i.push(s[n],t[n]||"");return i.push(s[n]),i.join("")}},7520:function(p,s,t){"use strict";var i=t(9507);p.exports=i&&function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}()},3778:function(p,s){s.read=function(t,i,n,r,a){var l,c,h=8*a-r-1,u=(1<<h)-1,x=u>>1,d=-7,m=n?a-1:0,g=n?-1:1,y=t[i+m];for(m+=g,l=y&(1<<-d)-1,y>>=-d,d+=h;d>0;l=256*l+t[i+m],m+=g,d-=8);for(c=l&(1<<-d)-1,l>>=-d,d+=r;d>0;c=256*c+t[i+m],m+=g,d-=8);if(l===0)l=1-x;else{if(l===u)return c?NaN:1/0*(y?-1:1);c+=Math.pow(2,r),l-=x}return(y?-1:1)*c*Math.pow(2,l-r)},s.write=function(t,i,n,r,a,l){var c,h,u,x=8*l-a-1,d=(1<<x)-1,m=d>>1,g=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:l-1,v=r?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,c=d):(c=Math.floor(Math.log(i)/Math.LN2),i*(u=Math.pow(2,-c))<1&&(c--,u*=2),(i+=c+m>=1?g/u:g*Math.pow(2,1-m))*u>=2&&(c++,u/=2),c+m>=d?(h=0,c=d):c+m>=1?(h=(i*u-1)*Math.pow(2,a),c+=m):(h=i*Math.pow(2,m-1)*Math.pow(2,a),c=0));a>=8;t[n+y]=255&h,y+=v,h/=256,a-=8);for(c=c<<a|h,x+=a;x>0;t[n+y]=255&c,y+=v,c/=256,x-=8);t[n+y-v]|=128*_}},8954:function(p,s,t){"use strict";p.exports=function(x,d){var m=x.length;if(m===0)throw new Error("Must have at least d+1 points");var g=x[0].length;if(m<=g)throw new Error("Must input at least d+1 points");var y=x.slice(0,g+1),v=i.apply(void 0,y);if(v===0)throw new Error("Input not in general position");for(var _=new Array(g+1),f=0;f<=g;++f)_[f]=f;v<0&&(_[0]=1,_[1]=0);var S=new r(_,new Array(g+1),!1),w=S.adjacent,E=new Array(g+2);for(f=0;f<=g;++f){for(var P=_.slice(),C=0;C<=g;++C)C===f&&(P[C]=-1);var O=P[0];P[0]=P[1],P[1]=O;var R=new r(P,new Array(g+1),!0);w[f]=R,E[f]=R}for(E[g+1]=S,f=0;f<=g;++f){P=w[f].vertices;var U=w[f].adjacent;for(C=0;C<=g;++C){var D=P[C];if(D<0)U[C]=S;else for(var N=0;N<=g;++N)w[N].vertices.indexOf(D)<0&&(U[C]=w[N])}}var W=new h(g,y,E),F=!!d;for(f=g+1;f<m;++f)W.insert(x[f],F);return W.boundary()};var i=t(3250),n=t(6803).Fw;function r(x,d,m){this.vertices=x,this.adjacent=d,this.boundary=m,this.lastVisited=-1}function a(x,d,m){this.vertices=x,this.cell=d,this.index=m}function l(x,d){return n(x.vertices,d.vertices)}r.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var d=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=d};var c=[];function h(x,d,m){this.dimension=x,this.vertices=d,this.simplices=m,this.interior=m.filter(function(_){return!_.boundary}),this.tuple=new Array(x+1);for(var g=0;g<=x;++g)this.tuple[g]=this.vertices[g];var y,v=c[x];v||(v=c[x]=((y=i[x+1])||(y=i),function(_){return function(){var f=this.tuple;return _.apply(this,f)}}(y))),this.orient=v}var u=h.prototype;u.handleBoundaryDegeneracy=function(x,d){var m=this.dimension,g=this.vertices.length-1,y=this.tuple,v=this.vertices,_=[x];for(x.lastVisited=-g;_.length>0;)for(var f=(x=_.pop()).adjacent,S=0;S<=m;++S){var w=f[S];if(w.boundary&&!(w.lastVisited<=-g)){for(var E=w.vertices,P=0;P<=m;++P){var C=E[P];y[P]=C<0?d:v[C]}var O=this.orient();if(O>0)return w;w.lastVisited=-g,O===0&&_.push(w)}}return null},u.walk=function(x,d){var m=this.vertices.length-1,g=this.dimension,y=this.vertices,v=this.tuple,_=d?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[_];e:for(;!f.boundary;){for(var S=f.vertices,w=f.adjacent,E=0;E<=g;++E)v[E]=y[S[E]];for(f.lastVisited=m,E=0;E<=g;++E){var P=w[E];if(!(P.lastVisited>=m)){var C=v[E];v[E]=x;var O=this.orient();if(v[E]=C,O<0){f=P;continue e}P.boundary?P.lastVisited=-m:P.lastVisited=m}}return}return f},u.addPeaks=function(x,d){var m=this.vertices.length-1,g=this.dimension,y=this.vertices,v=this.tuple,_=this.interior,f=this.simplices,S=[d];d.lastVisited=m,d.vertices[d.vertices.indexOf(-1)]=m,d.boundary=!1,_.push(d);for(var w=[];S.length>0;){var E=(d=S.pop()).vertices,P=d.adjacent,C=E.indexOf(m);if(!(C<0)){for(var O=0;O<=g;++O)if(O!==C){var R=P[O];if(R.boundary&&!(R.lastVisited>=m)){var U=R.vertices;if(R.lastVisited!==-m){for(var D=0,N=0;N<=g;++N)U[N]<0?(D=N,v[N]=x):v[N]=y[U[N]];if(this.orient()>0){U[D]=m,R.boundary=!1,_.push(R),S.push(R),R.lastVisited=m;continue}R.lastVisited=-m}var W=R.adjacent,F=E.slice(),j=P.slice(),q=new r(F,j,!0);f.push(q);var te=W.indexOf(d);if(!(te<0))for(W[te]=q,j[C]=R,F[O]=-1,j[O]=d,P[O]=q,q.flip(),N=0;N<=g;++N){var ee=F[N];if(!(ee<0||ee===m)){for(var Q=new Array(g-1),J=0,K=0;K<=g;++K){var Y=F[K];Y<0||K===N||(Q[J++]=Y)}w.push(new a(Q,q,N))}}}}}}for(w.sort(l),O=0;O+1<w.length;O+=2){var ie=w[O],se=w[O+1],ae=ie.index,ue=se.index;ae<0||ue<0||(ie.cell.adjacent[ie.index]=se.cell,se.cell.adjacent[se.index]=ie.cell)}},u.insert=function(x,d){var m=this.vertices;m.push(x);var g=this.walk(x,d);if(g){for(var y=this.dimension,v=this.tuple,_=0;_<=y;++_){var f=g.vertices[_];v[_]=f<0?x:m[f]}var S=this.orient(v);S<0||(S!==0||(g=this.handleBoundaryDegeneracy(g,x)))&&this.addPeaks(x,g)}},u.boundary=function(){for(var x=this.dimension,d=[],m=this.simplices,g=m.length,y=0;y<g;++y){var v=m[y];if(v.boundary){for(var _=new Array(x),f=v.vertices,S=0,w=0,E=0;E<=x;++E)f[E]>=0?_[S++]=f[E]:w=1&E;if(w===(1&x)){var P=_[0];_[0]=_[1],_[1]=P}d.push(_)}}return d}},3352:function(p,s,t){"use strict";var i=t(2478);function n(S,w,E,P,C){this.mid=S,this.left=w,this.right=E,this.leftPoints=P,this.rightPoints=C,this.count=(w?w.count:0)+(E?E.count:0)+P.length}p.exports=function(S){return S&&S.length!==0?new _(v(S)):new _(null)};var r=n.prototype;function a(S,w){S.mid=w.mid,S.left=w.left,S.right=w.right,S.leftPoints=w.leftPoints,S.rightPoints=w.rightPoints,S.count=w.count}function l(S,w){var E=v(w);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function c(S,w){var E=S.intervals([]);E.push(w),l(S,E)}function h(S,w){var E=S.intervals([]),P=E.indexOf(w);return P<0?0:(E.splice(P,1),l(S,E),1)}function u(S,w,E){for(var P=0;P<S.length&&S[P][0]<=w;++P){var C=E(S[P]);if(C)return C}}function x(S,w,E){for(var P=S.length-1;P>=0&&S[P][1]>=w;--P){var C=E(S[P]);if(C)return C}}function d(S,w){for(var E=0;E<S.length;++E){var P=w(S[E]);if(P)return P}}function m(S,w){return S-w}function g(S,w){return S[0]-w[0]||S[1]-w[1]}function y(S,w){return S[1]-w[1]||S[0]-w[0]}function v(S){if(S.length===0)return null;for(var w=[],E=0;E<S.length;++E)w.push(S[E][0],S[E][1]);w.sort(m);var P=w[w.length>>1],C=[],O=[],R=[];for(E=0;E<S.length;++E){var U=S[E];U[1]<P?C.push(U):P<U[0]?O.push(U):R.push(U)}var D=R,N=R.slice();return D.sort(g),N.sort(y),new n(P,v(C),v(O),D,N)}function _(S){this.root=S}r.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},r.insert=function(S){var w=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?c(this,S):this.left.insert(S):this.left=v([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?c(this,S):this.right.insert(S):this.right=v([S]);else{var E=i.ge(this.leftPoints,S,g),P=i.ge(this.rightPoints,S,y);this.leftPoints.splice(E,0,S),this.rightPoints.splice(P,0,S)}},r.remove=function(S){var w=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?h(this,S):(O=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?h(this,S):(O=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,P=this.left;P.right;)E=P,P=P.right;if(E===this)P.right=this.right;else{var C=this.left,O=this.right;E.count-=P.count,E.right=P.left,P.left=C,P.right=O}a(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(C=i.ge(this.leftPoints,S,g);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){for(this.count-=1,this.leftPoints.splice(C,1),O=i.ge(this.rightPoints,S,y);O<this.rightPoints.length&&this.rightPoints[O][1]===S[1];++O)if(this.rightPoints[O]===S)return this.rightPoints.splice(O,1),1}return 0},r.queryPoint=function(S,w){return S<this.mid?this.left&&(E=this.left.queryPoint(S,w))?E:u(this.leftPoints,S,w):S>this.mid?this.right&&(E=this.right.queryPoint(S,w))?E:x(this.rightPoints,S,w):d(this.leftPoints,w);var E},r.queryInterval=function(S,w,E){var P;return S<this.mid&&this.left&&(P=this.left.queryInterval(S,w,E))||w>this.mid&&this.right&&(P=this.right.queryInterval(S,w,E))?P:w<this.mid?u(this.leftPoints,w,E):S>this.mid?x(this.rightPoints,S,E):d(this.leftPoints,E)};var f=_.prototype;f.insert=function(S){this.root?this.root.insert(S):this.root=new n(S[0],null,null,[S],[S])},f.remove=function(S){if(this.root){var w=this.root.remove(S);return w===2&&(this.root=null),w!==0}return!1},f.queryPoint=function(S,w){if(this.root)return this.root.queryPoint(S,w)},f.queryInterval=function(S,w,E){if(S<=w&&this.root)return this.root.queryInterval(S,w,E)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(p){"use strict";p.exports=function(s){for(var t=new Array(s),i=0;i<s;++i)t[i]=i;return t}},9507:function(p){p.exports=!0},7163:function(p){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}p.exports=function(t){return t!=null&&(s(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&s(i.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(p){"use strict";p.exports=function(s){for(var t,i=s.length,n=0;n<i;n++)if(((t=s.charCodeAt(n))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(p){p.exports=function(s,t,i){return s*(1-i)+t*i}},2652:function(p,s,t){var i=t(4335),n=t(6864),r=t(1903),a=t(9921),l=t(7608),c=t(5665),h={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},u=n(),x=n(),d=[0,0,0,0],m=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function y(v,_,f,S,w){v[0]=_[0]*S+f[0]*w,v[1]=_[1]*S+f[1]*w,v[2]=_[2]*S+f[2]*w}p.exports=function(v,_,f,S,w,E){if(_||(_=[0,0,0]),f||(f=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(u,v)||(r(x,u),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var P,C,O,R,U,D,N,W=u[3],F=u[7],j=u[11],q=u[12],te=u[13],ee=u[14],Q=u[15];if(W!==0||F!==0||j!==0){if(d[0]=W,d[1]=F,d[2]=j,d[3]=Q,!l(x,x))return!1;c(x,x),P=w,O=x,R=(C=d)[0],U=C[1],D=C[2],N=C[3],P[0]=O[0]*R+O[4]*U+O[8]*D+O[12]*N,P[1]=O[1]*R+O[5]*U+O[9]*D+O[13]*N,P[2]=O[2]*R+O[6]*U+O[10]*D+O[14]*N,P[3]=O[3]*R+O[7]*U+O[11]*D+O[15]*N}else w[0]=w[1]=w[2]=0,w[3]=1;if(_[0]=q,_[1]=te,_[2]=ee,function(K,Y){K[0][0]=Y[0],K[0][1]=Y[1],K[0][2]=Y[2],K[1][0]=Y[4],K[1][1]=Y[5],K[1][2]=Y[6],K[2][0]=Y[8],K[2][1]=Y[9],K[2][2]=Y[10]}(m,u),f[0]=h.length(m[0]),h.normalize(m[0],m[0]),S[0]=h.dot(m[0],m[1]),y(m[1],m[1],m[0],1,-S[0]),f[1]=h.length(m[1]),h.normalize(m[1],m[1]),S[0]/=f[1],S[1]=h.dot(m[0],m[2]),y(m[2],m[2],m[0],1,-S[1]),S[2]=h.dot(m[1],m[2]),y(m[2],m[2],m[1],1,-S[2]),f[2]=h.length(m[2]),h.normalize(m[2],m[2]),S[1]/=f[2],S[2]/=f[2],h.cross(g,m[1],m[2]),h.dot(m[0],g)<0)for(var J=0;J<3;J++)f[J]*=-1,m[J][0]*=-1,m[J][1]*=-1,m[J][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+m[0][0]-m[1][1]-m[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-m[0][0]+m[1][1]-m[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-m[0][0]-m[1][1]+m[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+m[0][0]+m[1][1]+m[2][2],0)),m[2][1]>m[1][2]&&(E[0]=-E[0]),m[0][2]>m[2][0]&&(E[1]=-E[1]),m[1][0]>m[0][1]&&(E[2]=-E[2]),!0}},4335:function(p){p.exports=function(s,t){var i=t[15];if(i===0)return!1;for(var n=1/i,r=0;r<16;r++)s[r]=t[r]*n;return!0}},7442:function(p,s,t){var i=t(6658),n=t(7182),r=t(2652),a=t(9921),l=t(8648),c=x(),h=x(),u=x();function x(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(m){return[m||0,m||0,m||0]}p.exports=function(m,g,y,v){if(a(g)===0||a(y)===0)return!1;var _=r(g,c.translate,c.scale,c.skew,c.perspective,c.quaternion),f=r(y,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!_||!f||(i(u.translate,c.translate,h.translate,v),i(u.skew,c.skew,h.skew,v),i(u.scale,c.scale,h.scale,v),i(u.perspective,c.perspective,h.perspective,v),l(u.quaternion,c.quaternion,h.quaternion,v),n(m,u.translate,u.scale,u.skew,u.perspective,u.quaternion),0))}},7182:function(p,s,t){var i={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},n=(i.create(),i.create());p.exports=function(r,a,l,c,h,u){return i.identity(r),i.fromRotationTranslation(r,u,a),r[3]=h[0],r[7]=h[1],r[11]=h[2],r[15]=h[3],i.identity(n),c[2]!==0&&(n[9]=c[2],i.multiply(r,r,n)),c[1]!==0&&(n[9]=0,n[8]=c[1],i.multiply(r,r,n)),c[0]!==0&&(n[8]=0,n[4]=c[0],i.multiply(r,r,n)),i.scale(r,r,l),r}},4192:function(p,s,t){"use strict";var i=t(2478),n=t(7442),r=t(7608),a=t(5567),l=t(2408),c=t(7089),h=t(6582),u=t(7656),x=(t(2504),t(3536)),d=[0,0,0];function m(v){this._components=v.slice(),this._time=[0],this.prevMatrix=v.slice(),this.nextMatrix=v.slice(),this.computedMatrix=v.slice(),this.computedInverse=v.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}p.exports=function(v){return new m((v=v||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=m.prototype;g.recalcMatrix=function(v){var _=this._time,f=i.le(_,v),S=this.computedMatrix;if(!(f<0)){var w=this._components;if(f===_.length-1)for(var E=16*f,P=0;P<16;++P)S[P]=w[E++];else{var C=_[f+1]-_[f],O=(E=16*f,this.prevMatrix),R=!0;for(P=0;P<16;++P)O[P]=w[E++];var U=this.nextMatrix;for(P=0;P<16;++P)U[P]=w[E++],R=R&&O[P]===U[P];if(C<1e-6||R)for(P=0;P<16;++P)S[P]=O[P];else n(S,O,U,(v-_[f])/C)}var D=this.computedUp;D[0]=S[1],D[1]=S[5],D[2]=S[9],x(D,D);var N=this.computedInverse;r(N,S);var W=this.computedEye,F=N[15];W[0]=N[12]/F,W[1]=N[13]/F,W[2]=N[14]/F;var j=this.computedCenter,q=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)j[P]=W[P]-S[2+4*P]*q}},g.idle=function(v){if(!(v<this.lastT())){for(var _=this._components,f=_.length-16,S=0;S<16;++S)_.push(_[f++]);this._time.push(v)}},g.flush=function(v){var _=i.gt(this._time,v)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(v,_,f,S){this.recalcMatrix(v),_=_||this.computedEye,f=f||d,S=S||this.computedUp,this.setMatrix(v,h(this.computedMatrix,_,f,S));for(var w=0,E=0;E<3;++E)w+=Math.pow(f[E]-_[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},g.rotate=function(v,_,f,S){this.recalcMatrix(v);var w=this.computedInverse;_&&l(w,w,_),f&&a(w,w,f),S&&c(w,w,S),this.setMatrix(v,r(this.computedMatrix,w))};var y=[0,0,0];g.pan=function(v,_,f,S){y[0]=-(_||0),y[1]=-(f||0),y[2]=-(S||0),this.recalcMatrix(v);var w=this.computedInverse;u(w,w,y),this.setMatrix(v,r(w,w))},g.translate=function(v,_,f,S){y[0]=_||0,y[1]=f||0,y[2]=S||0,this.recalcMatrix(v);var w=this.computedMatrix;u(w,w,y),this.setMatrix(v,w)},g.setMatrix=function(v,_){if(!(v<this.lastT())){this._time.push(v);for(var f=0;f<16;++f)this._components.push(_[f])}},g.setDistance=function(v,_){this.computedRadius[0]=_},g.setDistanceLimits=function(v,_){var f=this._limits;f[0]=v,f[1]=_},g.getDistanceLimits=function(v){var _=this._limits;return v?(v[0]=_[0],v[1]=_[1],v):_}},3090:function(p,s,t){"use strict";p.exports=function(n){var r=n.length;if(r<3){for(var a=new Array(r),l=0;l<r;++l)a[l]=l;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:a}var c=new Array(r);for(l=0;l<r;++l)c[l]=l;c.sort(function(_,f){return n[_][0]-n[f][0]||n[_][1]-n[f][1]});var h=[c[0],c[1]],u=[c[0],c[1]];for(l=2;l<r;++l){for(var x=c[l],d=n[x],m=h.length;m>1&&i(n[h[m-2]],n[h[m-1]],d)<=0;)m-=1,h.pop();for(h.push(x),m=u.length;m>1&&i(n[u[m-2]],n[u[m-1]],d)>=0;)m-=1,u.pop();u.push(x)}a=new Array(u.length+h.length-2);for(var g=0,y=(l=0,h.length);l<y;++l)a[g++]=h[l];for(var v=u.length-2;v>0;--v)a[g++]=u[v];return a};var i=t(3250)[3]},351:function(p,s,t){"use strict";p.exports=function(n,r){r||(r=n,n=window);var a=0,l=0,c=0,h={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function x(E){var P=!1;return"altKey"in E&&(P=P||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(P=P||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(P=P||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(P=P||E.metaKey!==h.meta,h.meta=!!E.metaKey),P}function d(E,P){var C=i.x(P),O=i.y(P);"buttons"in P&&(E=0|P.buttons),(E!==a||C!==l||O!==c||x(P))&&(a=0|E,l=C||0,c=O||0,r&&r(a,l,c,h))}function m(E){d(0,E)}function g(){(a||l||c||h.shift||h.alt||h.meta||h.control)&&(l=c=0,a=0,h.shift=h.alt=h.control=h.meta=!1,r&&r(0,0,0,h))}function y(E){x(E)&&r&&r(a,l,c,h)}function v(E){i.buttons(E)===0?d(0,E):d(a,E)}function _(E){d(a|i.buttons(E),E)}function f(E){d(a&~i.buttons(E),E)}function S(){u||(u=!0,n.addEventListener("mousemove",v),n.addEventListener("mousedown",_),n.addEventListener("mouseup",f),n.addEventListener("mouseleave",m),n.addEventListener("mouseenter",m),n.addEventListener("mouseout",m),n.addEventListener("mouseover",m),n.addEventListener("blur",g),n.addEventListener("keyup",y),n.addEventListener("keydown",y),n.addEventListener("keypress",y),n!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}S();var w={element:n};return Object.defineProperties(w,{enabled:{get:function(){return u},set:function(E){E?S():u&&(u=!1,n.removeEventListener("mousemove",v),n.removeEventListener("mousedown",_),n.removeEventListener("mouseup",f),n.removeEventListener("mouseleave",m),n.removeEventListener("mouseenter",m),n.removeEventListener("mouseout",m),n.removeEventListener("mouseover",m),n.removeEventListener("blur",g),n.removeEventListener("keyup",y),n.removeEventListener("keydown",y),n.removeEventListener("keypress",y),n!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),w};var i=t(4687)},24:function(p){var s={left:0,top:0};p.exports=function(t,i,n){i=i||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r,a=t.clientX||0,l=t.clientY||0,c=(r=i)===window||r===document||r===document.body?s:r.getBoundingClientRect();return n[0]=a-c.left,n[1]=l-c.top,n}},4687:function(p,s){"use strict";function t(i){return i.target||i.srcElement||window}s.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((n=i.which)===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in i){var n;if((n=i.button)===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0},s.element=t,s.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var n=t(i).getBoundingClientRect();return i.clientX-n.left}return 0},s.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var n=t(i).getBoundingClientRect();return i.clientY-n.top}return 0}},8512:function(p,s,t){"use strict";var i=t(665);p.exports=function(n,r,a){typeof n=="function"&&(a=!!r,r=n,n=window);var l=i("ex",n),c=function(h){a&&h.preventDefault();var u=h.deltaX||0,x=h.deltaY||0,d=h.deltaZ||0,m=1;switch(h.deltaMode){case 1:m=l;break;case 2:m=window.innerHeight}if(x*=m,d*=m,(u*=m)||x||d)return r(u,x,d,h)};return n.addEventListener("wheel",c),c}},2640:function(p,s,t){"use strict";var i=t(1888);p.exports=function(r){function a(d){throw new Error("ndarray-extract-contour: "+d)}typeof r!="object"&&a("Must specify arguments");var l=r.order;Array.isArray(l)||a("Must specify order");var c=r.arrayArguments||1;c<1&&a("Must have at least one array argument"),(r.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof r.vertex!="function"&&a("Must specify vertex creation function"),typeof r.cell!="function"&&a("Must specify cell creation function"),typeof r.phase!="function"&&a("Must specify phase function");for(var h=r.getters||[],u=new Array(c),x=0;x<c;++x)h.indexOf(x)>=0?u[x]=!0:u[x]=!1;return function(d,m,g,y,v,_){var f=[_,v].join(",");return(0,n[f])(d,m,g,i.mallocUint32,i.freeUint32)}(r.vertex,r.cell,r.phase,0,l,u)};var n={"false,0,1":function(r,a,l,c,h){return function(u,x,d,m){var g,y=0|u.shape[0],v=0|u.shape[1],_=u.data,f=0|u.offset,S=0|u.stride[0],w=0|u.stride[1],E=f,P=0|-S,C=0,O=0|-w,R=0,U=-S-w|0,D=0,N=0|S,W=w-S*y|0,F=0,j=0,q=0,te=2*y|0,ee=c(te),Q=c(te),J=0,K=0,Y=-1,ie=-1,se=0,ae=0|-y,ue=0|y,ve=0,ye=-y-1|0,de=y-1|0,pe=0,ge=0,ke=0;for(F=0;F<y;++F)ee[J++]=l(_[E],x,d,m),E+=N;if(E+=W,v>0){if(j=1,ee[J++]=l(_[E],x,d,m),E+=N,y>0)for(F=1,g=_[E],K=ee[J]=l(g,x,d,m),se=ee[J+Y],ve=ee[J+ae],pe=ee[J+ye],K===se&&K===ve&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,se,ve,pe,x,d,m),ge=Q[J]=q++),J+=1,E+=N,F=2;F<y;++F)g=_[E],K=ee[J]=l(g,x,d,m),se=ee[J+Y],ve=ee[J+ae],pe=ee[J+ye],K===se&&K===ve&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,se,ve,pe,x,d,m),ge=Q[J]=q++,pe!==se&&a(Q[J+Y],ge,D,C,pe,se,x,d,m)),J+=1,E+=N;for(E+=W,J=0,ke=Y,Y=ie,ie=ke,ke=ae,ae=ue,ue=ke,ke=ye,ye=de,de=ke,j=2;j<v;++j){if(ee[J++]=l(_[E],x,d,m),E+=N,y>0)for(F=1,g=_[E],K=ee[J]=l(g,x,d,m),se=ee[J+Y],ve=ee[J+ae],pe=ee[J+ye],K===se&&K===ve&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,se,ve,pe,x,d,m),ge=Q[J]=q++,pe!==ve&&a(Q[J+ae],ge,R,D,ve,pe,x,d,m)),J+=1,E+=N,F=2;F<y;++F)g=_[E],K=ee[J]=l(g,x,d,m),se=ee[J+Y],ve=ee[J+ae],pe=ee[J+ye],K===se&&K===ve&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,se,ve,pe,x,d,m),ge=Q[J]=q++,pe!==ve&&a(Q[J+ae],ge,R,D,ve,pe,x,d,m),pe!==se&&a(Q[J+Y],ge,D,C,pe,se,x,d,m)),J+=1,E+=N;1&j&&(J=0),ke=Y,Y=ie,ie=ke,ke=ae,ae=ue,ue=ke,ke=ye,ye=de,de=ke,E+=W}}h(Q),h(ee)}},"false,1,0":function(r,a,l,c,h){return function(u,x,d,m){var g,y=0|u.shape[0],v=0|u.shape[1],_=u.data,f=0|u.offset,S=0|u.stride[0],w=0|u.stride[1],E=f,P=0|-S,C=0,O=0|-w,R=0,U=-S-w|0,D=0,N=0|w,W=S-w*v|0,F=0,j=0,q=0,te=2*v|0,ee=c(te),Q=c(te),J=0,K=0,Y=-1,ie=-1,se=0,ae=0|-v,ue=0|v,ve=0,ye=-v-1|0,de=v-1|0,pe=0,ge=0,ke=0;for(j=0;j<v;++j)ee[J++]=l(_[E],x,d,m),E+=N;if(E+=W,y>0){if(F=1,ee[J++]=l(_[E],x,d,m),E+=N,v>0)for(j=1,g=_[E],K=ee[J]=l(g,x,d,m),ve=ee[J+ae],se=ee[J+Y],pe=ee[J+ye],K===ve&&K===se&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,ve,se,pe,x,d,m),ge=Q[J]=q++),J+=1,E+=N,j=2;j<v;++j)g=_[E],K=ee[J]=l(g,x,d,m),ve=ee[J+ae],se=ee[J+Y],pe=ee[J+ye],K===ve&&K===se&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,ve,se,pe,x,d,m),ge=Q[J]=q++,pe!==se&&a(Q[J+Y],ge,R,D,se,pe,x,d,m)),J+=1,E+=N;for(E+=W,J=0,ke=ae,ae=ue,ue=ke,ke=Y,Y=ie,ie=ke,ke=ye,ye=de,de=ke,F=2;F<y;++F){if(ee[J++]=l(_[E],x,d,m),E+=N,v>0)for(j=1,g=_[E],K=ee[J]=l(g,x,d,m),ve=ee[J+ae],se=ee[J+Y],pe=ee[J+ye],K===ve&&K===se&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,ve,se,pe,x,d,m),ge=Q[J]=q++,pe!==ve&&a(Q[J+ae],ge,D,C,pe,ve,x,d,m)),J+=1,E+=N,j=2;j<v;++j)g=_[E],K=ee[J]=l(g,x,d,m),ve=ee[J+ae],se=ee[J+Y],pe=ee[J+ye],K===ve&&K===se&&K===pe||(C=_[E+P],R=_[E+O],D=_[E+U],r(F,j,g,C,R,D,K,ve,se,pe,x,d,m),ge=Q[J]=q++,pe!==se&&a(Q[J+Y],ge,R,D,se,pe,x,d,m),pe!==ve&&a(Q[J+ae],ge,D,C,pe,ve,x,d,m)),J+=1,E+=N;1&F&&(J=0),ke=ae,ae=ue,ue=ke,ke=Y,Y=ie,ie=ke,ke=ye,ye=de,de=ke,E+=W}}h(Q),h(ee)}}}},6199:function(p,s,t){"use strict";var i=t(1338),n={zero:function(y,v,_,f){var S=y[0];f|=0;var w=0,E=_[0];for(w=0;w<S;++w)v[f]=0,f+=E},fdTemplate1:function(y,v,_,f,S,w,E){var P=y[0],C=_[0],O=-1*C,R=C;f|=0,E|=0;var U=0,D=C,N=w[0];for(U=0;U<P;++U)S[E]=.5*(v[f+O]-v[f+R]),f+=D,E+=N},fdTemplate2:function(y,v,_,f,S,w,E,P,C,O){var R=y[0],U=y[1],D=_[0],N=_[1],W=w[0],F=w[1],j=C[0],q=C[1],te=-1*D,ee=D,Q=-1*N,J=N;f|=0,E|=0,O|=0;var K=0,Y=0,ie=N,se=D-U*N,ae=F,ue=W-U*F,ve=q,ye=j-U*q;for(Y=0;Y<R;++Y){for(K=0;K<U;++K)S[E]=.5*(v[f+te]-v[f+ee]),P[O]=.5*(v[f+Q]-v[f+J]),f+=ie,E+=ae,O+=ve;f+=se,E+=ue,O+=ye}}},r={cdiff:function(y){var v={};return function(_,f,S){var w=_.dtype,E=_.order,P=f.dtype,C=f.order,O=S.dtype,R=S.order,U=[w,E.join(),P,C.join(),O,R.join()].join(),D=v[U];return D||(v[U]=D=y([w,E,P,C,O,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}},zero:function(y){var v={};return function(_){var f=_.dtype,S=_.order,w=[f,S.join()].join(),E=v[w];return E||(v[w]=E=y([f,S])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(y){var v={};return function(_,f){var S=_.dtype,w=_.order,E=f.dtype,P=f.order,C=[S,w.join(),E,P.join()].join(),O=v[C];return O||(v[C]=O=y([S,w,E,P])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(y){var v={};return function(_,f,S){var w=_.dtype,E=_.order,P=f.dtype,C=f.order,O=S.dtype,R=S.order,U=[w,E.join(),P,C.join(),O,R.join()].join(),D=v[U];return D||(v[U]=D=y([w,E,P,C,O,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}}};function a(y){return(0,r[y.funcName])(l.bind(void 0,y))}function l(y){return n[y.funcName]}function c(y){return a({funcName:y.funcName})}var h={},u={},x=c({funcName:"cdiff"}),d=c({funcName:"zero"});function m(y){return y in h?h[y]:h[y]=c({funcName:"fdTemplate"+y})}function g(y,v,_,f){return function(S,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&f(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(w.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),v(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),v(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(w.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),v(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),v(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}p.exports=function(y,v,_){return Array.isArray(_)||(_=i(v.dimension,typeof _=="string"?_:"clamp")),v.size===0?y:v.dimension===0?(y.set(0),y):function(f){var S=f.join();if(C=u[S])return C;for(var w=f.length,E=[x,d],P=1;P<=w;++P)E.push(m(P));var C=g.apply(void 0,E);return u[S]=C,C}(_)(y,v)}},4317:function(p){"use strict";function s(r,a){var l=Math.floor(a),c=a-l,h=0<=l&&l<r.shape[0],u=0<=l+1&&l+1<r.shape[0];return(1-c)*(h?+r.get(l):0)+c*(u?+r.get(l+1):0)}function t(r,a,l){var c=Math.floor(a),h=a-c,u=0<=c&&c<r.shape[0],x=0<=c+1&&c+1<r.shape[0],d=Math.floor(l),m=l-d,g=0<=d&&d<r.shape[1],y=0<=d+1&&d+1<r.shape[1],v=u&&g?r.get(c,d):0,_=u&&y?r.get(c,d+1):0;return(1-m)*((1-h)*v+h*(x&&g?r.get(c+1,d):0))+m*((1-h)*_+h*(x&&y?r.get(c+1,d+1):0))}function i(r,a,l,c){var h=Math.floor(a),u=a-h,x=0<=h&&h<r.shape[0],d=0<=h+1&&h+1<r.shape[0],m=Math.floor(l),g=l-m,y=0<=m&&m<r.shape[1],v=0<=m+1&&m+1<r.shape[1],_=Math.floor(c),f=c-_,S=0<=_&&_<r.shape[2],w=0<=_+1&&_+1<r.shape[2],E=x&&y&&S?r.get(h,m,_):0,P=x&&v&&S?r.get(h,m+1,_):0,C=d&&y&&S?r.get(h+1,m,_):0,O=d&&v&&S?r.get(h+1,m+1,_):0,R=x&&y&&w?r.get(h,m,_+1):0,U=x&&v&&w?r.get(h,m+1,_+1):0;return(1-f)*((1-g)*((1-u)*E+u*C)+g*((1-u)*P+u*O))+f*((1-g)*((1-u)*R+u*(d&&y&&w?r.get(h+1,m,_+1):0))+g*((1-u)*U+u*(d&&v&&w?r.get(h+1,m+1,_+1):0)))}function n(r){var a,l,c=0|r.shape.length,h=new Array(c),u=new Array(c),x=new Array(c),d=new Array(c);for(a=0;a<c;++a)l=+arguments[a+1],h[a]=Math.floor(l),u[a]=l-h[a],x[a]=0<=h[a]&&h[a]<r.shape[a],d[a]=0<=h[a]+1&&h[a]+1<r.shape[a];var m,g,y,v=0;e:for(a=0;a<1<<c;++a){for(g=1,y=r.offset,m=0;m<c;++m)if(a&1<<m){if(!d[m])continue e;g*=u[m],y+=r.stride[m]*(h[m]+1)}else{if(!x[m])continue e;g*=1-u[m],y+=r.stride[m]*h[m]}v+=g*r.data[y]}return v}p.exports=function(r,a,l,c){switch(r.shape.length){case 0:return 0;case 1:return s(r,a);case 2:return t(r,a,l);case 3:return i(r,a,l,c);default:return n.apply(void 0,arguments)}},p.exports.d1=s,p.exports.d2=t,p.exports.d3=i},5298:function(p,s){"use strict";var t={"float64,2,1,0":function(){return function(l,c,h,u,x){var d=l[0],m=l[1],g=l[2],y=h[0],v=h[1],_=h[2];u|=0;var f=0,S=0,w=0,E=_,P=v-g*_,C=y-m*v;for(w=0;w<d;++w){for(S=0;S<m;++S){for(f=0;f<g;++f)c[u]/=x,u+=E;u+=P}u+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,c,h,u,x,d,m,g){for(var y=l[0],v=l[1],_=l[2],f=h[0],S=h[1],w=h[2],E=d[0],P=d[1],C=d[2],O=u|=0,R=m|=0,U=0|l[0];U>0;){U<64?(y=U,U=0):(y=64,U-=64);for(var D=0|l[1];D>0;){D<64?(v=D,D=0):(v=64,D-=64),u=O+U*f+D*S,m=R+U*E+D*P;var N=0,W=0,F=0,j=w,q=f-_*w,te=S-y*f,ee=C,Q=E-_*C,J=P-y*E;for(F=0;F<v;++F){for(W=0;W<y;++W){for(N=0;N<_;++N)c[u]=x[m]*g,u+=j,m+=ee;u+=q,m+=Q}u+=te,m+=J}}}}},"float32,1,0,float32,1,0":function(){return function(l,c,h,u,x,d,m){var g=l[0],y=l[1],v=h[0],_=h[1],f=d[0],S=d[1];u|=0,m|=0;var w=0,E=0,P=_,C=v-y*_,O=S,R=f-y*S;for(E=0;E<g;++E){for(w=0;w<y;++w)c[u]=x[m],u+=P,m+=O;u+=C,m+=R}}},"float32,1,0,float32,0,1":function(){return function(l,c,h,u,x,d,m){for(var g=l[0],y=l[1],v=h[0],_=h[1],f=d[0],S=d[1],w=u|=0,E=m|=0,P=0|l[1];P>0;){P<64?(y=P,P=0):(y=64,P-=64);for(var C=0|l[0];C>0;){C<64?(g=C,C=0):(g=64,C-=64),u=w+P*_+C*v,m=E+P*S+C*f;var O=0,R=0,U=_,D=v-y*_,N=S,W=f-y*S;for(R=0;R<g;++R){for(O=0;O<y;++O)c[u]=x[m],u+=U,m+=N;u+=D,m+=W}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,c,h,u,x,d,m){for(var g=l[0],y=l[1],v=l[2],_=h[0],f=h[1],S=h[2],w=d[0],E=d[1],P=d[2],C=u|=0,O=m|=0,R=0|l[2];R>0;){R<64?(v=R,R=0):(v=64,R-=64);for(var U=0|l[0];U>0;){U<64?(g=U,U=0):(g=64,U-=64);for(var D=0|l[1];D>0;){D<64?(y=D,D=0):(y=64,D-=64),u=C+R*S+U*_+D*f,m=O+R*P+U*w+D*E;var N=0,W=0,F=0,j=S,q=_-v*S,te=f-g*_,ee=P,Q=w-v*P,J=E-g*w;for(F=0;F<y;++F){for(W=0;W<g;++W){for(N=0;N<v;++N)c[u]=x[m],u+=j,m+=ee;u+=q,m+=Q}u+=te,m+=J}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,c,h,u,x,d,m){var g=l[0],y=l[1],v=l[2],_=h[0],f=h[1],S=h[2],w=d[0],E=d[1],P=d[2];u|=0,m|=0;var C=0,O=0,R=0,U=S,D=_-v*S,N=f-g*_,W=P,F=w-v*P,j=E-g*w;for(R=0;R<y;++R){for(O=0;O<g;++O){for(C=0;C<v;++C)c[u]=x[m],u+=U,m+=W;u+=D,m+=F}u+=N,m+=j}}}},i=function(l,c){var h=c.join(",");return(0,t[h])()},n={mul:function(l){var c={};return function(h,u,x){var d=h.dtype,m=h.order,g=u.dtype,y=u.order,v=x.dtype,_=x.order,f=[d,m.join(),g,y.join(),v,_.join()].join(),S=c[f];return S||(c[f]=S=l([d,m,g,y,v,_])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,x.data,x.stride,0|x.offset)}},muls:function(l){var c={};return function(h,u,x){var d=h.dtype,m=h.order,g=u.dtype,y=u.order,v=[d,m.join(),g,y.join()].join(),_=c[v];return _||(c[v]=_=l([d,m,g,y])),_(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,x)}},mulseq:function(l){var c={};return function(h,u){var x=h.dtype,d=h.order,m=[x,d.join()].join(),g=c[m];return g||(c[m]=g=l([x,d])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,u)}},div:function(l){var c={};return function(h,u,x){var d=h.dtype,m=h.order,g=u.dtype,y=u.order,v=x.dtype,_=x.order,f=[d,m.join(),g,y.join(),v,_.join()].join(),S=c[f];return S||(c[f]=S=l([d,m,g,y,v,_])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,x.data,x.stride,0|x.offset)}},divs:function(l){var c={};return function(h,u,x){var d=h.dtype,m=h.order,g=u.dtype,y=u.order,v=[d,m.join(),g,y.join()].join(),_=c[v];return _||(c[v]=_=l([d,m,g,y])),_(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset,x)}},divseq:function(l){var c={};return function(h,u){var x=h.dtype,d=h.order,m=[x,d.join()].join(),g=c[m];return g||(c[m]=g=l([x,d])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,u)}},assign:function(l){var c={};return function(h,u){var x=h.dtype,d=h.order,m=u.dtype,g=u.order,y=[x,d.join(),m,g.join()].join(),v=c[y];return v||(c[y]=v=l([x,d,m,g])),v(h.shape.slice(0),h.data,h.stride,0|h.offset,u.data,u.stride,0|u.offset)}}};function r(l){return c={funcName:l.funcName},(0,n[c.funcName])(i.bind(void 0,c));var c}var a={mul:"*",div:"/"};(function(){for(var l in a)s[l]=r({funcName:l}),s[l+"s"]=r({funcName:l+"s"}),s[l+"seq"]=r({funcName:l+"seq"})})(),s.assign=r({funcName:"assign"})},9994:function(p,s,t){"use strict";var i=t(9618),n=t(8277);p.exports=function(r,a){for(var l=[],c=r,h=1;Array.isArray(c);)l.push(c.length),h*=c.length,c=c[0];return l.length===0?i():(a||(a=i(new Float64Array(h),l)),n(a,r),a)}},8277:function(p){"use strict";p.exports=function(s){var t={};return function(i,n){var r=i.dtype,a=i.order,l=[r,a.join()].join(),c=t[l];return c||(t[l]=c=s([r,a])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}}((function(){return function(s,t,i,n,r){var a=s[0],l=s[1],c=s[2],h=i[0],u=i[1],x=i[2],d=[0,0,0];n|=0;var m=0,g=0,y=0,v=x,_=u-c*x,f=h-l*u;for(y=0;y<a;++y){for(g=0;g<l;++g){for(m=0;m<c;++m){var S,w=r;for(S=0;S<d.length-1;++S)w=w[d[S]];t[n]=w[d[d.length-1]],n+=v,++d[2]}n+=_,d[2]-=c,++d[1]}n+=f,d[1]-=l,++d[0]}}}).bind(void 0,{funcName:"convert"}))},7640:function(p,s,t){"use strict";var i=t(1888);function n(c){return c==="uint32"?[i.mallocUint32,i.freeUint32]:null}var r={"uint32,1,0":function(c,h){return function(u,x,d,m,g,y,v,_,f,S,w){var E,P,C,O,R,U,D,N,W=u*g+m,F=c(_);for(E=u+1;E<=x;++E){for(P=E,C=W+=g,R=0,U=W,O=0;O<_;++O)F[R++]=d[U],U+=f;e:for(;P-- >u;){R=0,U=C-g;t:for(O=0;O<_;++O){if((D=d[U])<(N=F[R]))break e;if(D>N)break t;U+=S,R+=w}for(R=C,U=C-g,O=0;O<_;++O)d[R]=d[U],R+=f,U+=f;C-=g}for(R=C,U=0,O=0;O<_;++O)d[R]=F[U++],R+=f}h(F)}}},a={"uint32,1,0":function(c,h,u){return function x(d,m,g,y,v,_,f,S,w,E,P){var C,O,R,U,D,N,W,F,j,q,te,ee,Q,J,K,Y,ie,se,ae,ue,ve,ye,de,pe,ge,ke=(m-d+1)/6|0,Ee=d+ke,me=m-ke,oe=d+m>>1,re=oe-ke,fe=oe+ke,Se=Ee,be=re,we=oe,Me=fe,Ie=me,Oe=d+1,he=m-1,_e=!0,Ae=0,De=0,Le=0,Be=S,Ve=h(Be),Ze=h(Be);te=v*Se,ee=v*be,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=Se,Se=be,be=O;break e}if(Le<0)break e;ge+=E}te=v*Me,ee=v*Ie,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=Me,Me=Ie,Ie=O;break e}if(Le<0)break e;ge+=E}te=v*Se,ee=v*we,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=Se,Se=we,we=O;break e}if(Le<0)break e;ge+=E}te=v*be,ee=v*we,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=be,be=we,we=O;break e}if(Le<0)break e;ge+=E}te=v*Se,ee=v*Me,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=Se,Se=Me,Me=O;break e}if(Le<0)break e;ge+=E}te=v*we,ee=v*Me,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=we,we=Me,Me=O;break e}if(Le<0)break e;ge+=E}te=v*be,ee=v*Ie,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=be,be=Ie,Ie=O;break e}if(Le<0)break e;ge+=E}te=v*be,ee=v*we,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=be,be=we,we=O;break e}if(Le<0)break e;ge+=E}te=v*Me,ee=v*Ie,ge=y;e:for(q=0;q<S;++q){if(F=ee+ge,(Le=g[W=te+ge]-g[F])>0){O=Me,Me=Ie,Ie=O;break e}if(Le<0)break e;ge+=E}for(te=v*Se,ee=v*be,Q=v*we,J=v*Me,K=v*Ie,Y=v*Ee,ie=v*oe,se=v*me,pe=0,ge=y,q=0;q<S;++q)W=te+ge,F=ee+ge,j=Q+ge,ae=J+ge,ue=K+ge,ve=Y+ge,ye=ie+ge,de=se+ge,Ve[pe]=g[F],Ze[pe]=g[ae],_e=_e&&Ve[pe]===Ze[pe],R=g[W],U=g[j],D=g[ue],g[ve]=R,g[ye]=U,g[de]=D,++pe,ge+=w;for(te=v*re,ee=v*d,ge=y,q=0;q<S;++q)F=ee+ge,g[W=te+ge]=g[F],ge+=w;for(te=v*fe,ee=v*m,ge=y,q=0;q<S;++q)F=ee+ge,g[W=te+ge]=g[F],ge+=w;if(_e)for(N=Oe;N<=he;++N){for(W=y+N*v,pe=0,q=0;q<S&&(Le=g[W]-Ve[pe])==0;++q)pe+=P,W+=E;if(Le!==0)if(Le<0){if(N!==Oe)for(te=v*N,ee=v*Oe,ge=y,q=0;q<S;++q)F=ee+ge,C=g[W=te+ge],g[W]=g[F],g[F]=C,ge+=w;++Oe}else for(;;){for(W=y+he*v,pe=0,q=0;q<S&&(Le=g[W]-Ve[pe])==0;++q)pe+=P,W+=E;if(!(Le>0)){if(Le<0){for(te=v*N,ee=v*Oe,Q=v*he,ge=y,q=0;q<S;++q)F=ee+ge,j=Q+ge,C=g[W=te+ge],g[W]=g[F],g[F]=g[j],g[j]=C,ge+=w;++Oe,--he;break}for(te=v*N,ee=v*he,ge=y,q=0;q<S;++q)F=ee+ge,C=g[W=te+ge],g[W]=g[F],g[F]=C,ge+=w;--he;break}he--}}else for(N=Oe;N<=he;++N){for(W=y+N*v,pe=0,q=0;q<S&&(Ae=g[W]-Ve[pe])==0;++q)pe+=P,W+=E;if(Ae<0){if(N!==Oe)for(te=v*N,ee=v*Oe,ge=y,q=0;q<S;++q)F=ee+ge,C=g[W=te+ge],g[W]=g[F],g[F]=C,ge+=w;++Oe}else{for(W=y+N*v,pe=0,q=0;q<S&&(De=g[W]-Ze[pe])==0;++q)pe+=P,W+=E;if(De>0)for(;;){for(W=y+he*v,pe=0,q=0;q<S&&(Le=g[W]-Ze[pe])==0;++q)pe+=P,W+=E;if(!(Le>0)){for(W=y+he*v,pe=0,q=0;q<S&&(Le=g[W]-Ve[pe])==0;++q)pe+=P,W+=E;if(Le<0){for(te=v*N,ee=v*Oe,Q=v*he,ge=y,q=0;q<S;++q)F=ee+ge,j=Q+ge,C=g[W=te+ge],g[W]=g[F],g[F]=g[j],g[j]=C,ge+=w;++Oe,--he}else{for(te=v*N,ee=v*he,ge=y,q=0;q<S;++q)F=ee+ge,C=g[W=te+ge],g[W]=g[F],g[F]=C,ge+=w;--he}break}if(--he<N)break}}}for(te=v*d,ee=v*(Oe-1),pe=0,ge=y,q=0;q<S;++q)F=ee+ge,g[W=te+ge]=g[F],g[F]=Ve[pe],++pe,ge+=w;for(te=v*m,ee=v*(he+1),pe=0,ge=y,q=0;q<S;++q)F=ee+ge,g[W=te+ge]=g[F],g[F]=Ze[pe],++pe,ge+=w;if(Oe-2-d<=32?c(d,Oe-2,g,y,v,_,f,S,w,E,P):x(d,Oe-2,g,y,v,_,f,S,w,E,P),m-(he+2)<=32?c(he+2,m,g,y,v,_,f,S,w,E,P):x(he+2,m,g,y,v,_,f,S,w,E,P),_e)return u(Ve),void u(Ze);if(Oe<Ee&&he>me){e:for(;;){for(W=y+Oe*v,pe=0,ge=y,q=0;q<S;++q){if(g[W]!==Ve[pe])break e;++pe,W+=w}++Oe}e:for(;;){for(W=y+he*v,pe=0,ge=y,q=0;q<S;++q){if(g[W]!==Ze[pe])break e;++pe,W+=w}--he}for(N=Oe;N<=he;++N){for(W=y+N*v,pe=0,q=0;q<S&&(Ae=g[W]-Ve[pe])==0;++q)pe+=P,W+=E;if(Ae===0){if(N!==Oe)for(te=v*N,ee=v*Oe,ge=y,q=0;q<S;++q)F=ee+ge,C=g[W=te+ge],g[W]=g[F],g[F]=C,ge+=w;++Oe}else{for(W=y+N*v,pe=0,q=0;q<S&&(De=g[W]-Ze[pe])==0;++q)pe+=P,W+=E;if(De===0)for(;;){for(W=y+he*v,pe=0,q=0;q<S&&(Le=g[W]-Ze[pe])==0;++q)pe+=P,W+=E;if(Le!==0){for(W=y+he*v,pe=0,q=0;q<S&&(Le=g[W]-Ve[pe])==0;++q)pe+=P,W+=E;if(Le<0){for(te=v*N,ee=v*Oe,Q=v*he,ge=y,q=0;q<S;++q)F=ee+ge,j=Q+ge,C=g[W=te+ge],g[W]=g[F],g[F]=g[j],g[j]=C,ge+=w;++Oe,--he}else{for(te=v*N,ee=v*he,ge=y,q=0;q<S;++q)F=ee+ge,C=g[W=te+ge],g[W]=g[F],g[F]=C,ge+=w;--he}break}if(--he<N)break}}}}u(Ve),u(Ze),he-Oe<=32?c(Oe,he,g,y,v,_,f,S,w,E,P):x(Oe,he,g,y,v,_,f,S,w,E,P)}}},l={"uint32,1,0":function(c,h){return function(u){var x=u.data,d=0|u.offset,m=u.shape,g=u.stride,y=0|g[0],v=0|m[0],_=0|g[1],f=0|m[1],S=_,w=_;v<=32?c(0,v-1,x,d,y,_,v,f,S,w,1):h(0,v-1,x,d,y,_,v,f,S,w,1)}}};p.exports=function(c,h){var u=[h,c].join(","),x=l[u],d=function(g,y){var v=n(y),_=[y,g].join(","),f=r[_];return v?f(v[0],v[1]):f()}(c,h),m=function(g,y,v){var _=n(y),f=[y,g].join(","),S=a[f];return g.length>1&&_?S(v,_[0],_[1]):S(v)}(c,h,d);return x(d,m)}},446:function(p,s,t){"use strict";var i=t(7640),n={};p.exports=function(r){var a=r.order,l=r.dtype,c=[a,l].join(":"),h=n[c];return h||(n[c]=h=i(a,l)),h(r),r}},9618:function(p,s,t){var i=t(7163),n=typeof Float64Array<"u";function r(u,x){return u[0]-x[0]}function a(){var u,x=this.stride,d=new Array(x.length);for(u=0;u<d.length;++u)d[u]=[Math.abs(x[u]),u];d.sort(r);var m=new Array(d.length);for(u=0;u<m.length;++u)m[u]=d[u][1];return m}var l={T:function(u){function x(m){this.data=m}var d=x.prototype;return d.dtype=u,d.index=function(){return-1},d.size=0,d.dimension=-1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new x(this.data)},d.get=d.set=function(){},d.pick=function(){return null},function(m){return new x(m)}},0:function(u,x){function d(g,y){this.data=g,this.offset=y}var m=d.prototype;return m.dtype=u,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new d(this.data,this.offset)},m.pick=function(){return x(this.data)},m.valueOf=m.get=function(){return u==="generic"?this.data.get(this.offset):this.data[this.offset]},m.set=function(g){return u==="generic"?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,y,v,_){return new d(g,_)}},1:function(u,x,d){function m(y,v,_,f){this.data=y,this.shape=[v],this.stride=[_],this.offset=0|f}var g=m.prototype;return g.dtype=u,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(y,v){return u==="generic"?this.data.set(this.offset+this.stride[0]*y,v):this.data[this.offset+this.stride[0]*y]=v},g.get=function(y){return u==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},g.index=function(y){return this.offset+this.stride[0]*y},g.hi=function(y){return new m(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,this.stride[0],this.offset)},g.lo=function(y){var v=this.offset,_=0,f=this.shape[0],S=this.stride[0];return typeof y=="number"&&y>=0&&(v+=S*(_=0|y),f-=_),new m(this.data,f,S,v)},g.step=function(y){var v=this.shape[0],_=this.stride[0],f=this.offset,S=0,w=Math.ceil;return typeof y=="number"&&((S=0|y)<0?(f+=_*(v-1),v=w(-v/S)):v=w(v/S),_*=S),new m(this.data,v,_,f)},g.transpose=function(y){y=y===void 0?0:0|y;var v=this.shape,_=this.stride;return new m(this.data,v[y],_[y],this.offset)},g.pick=function(y){var v=[],_=[],f=this.offset;return typeof y=="number"&&y>=0?f=f+this.stride[0]*y|0:(v.push(this.shape[0]),_.push(this.stride[0])),(0,x[v.length+1])(this.data,v,_,f)},function(y,v,_,f){return new m(y,v[0],_[0],f)}},2:function(u,x,d){function m(y,v,_,f,S,w){this.data=y,this.shape=[v,_],this.stride=[f,S],this.offset=0|w}var g=m.prototype;return g.dtype=u,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(y,v,_){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v,_):this.data[this.offset+this.stride[0]*y+this.stride[1]*v]=_},g.get=function(y,v){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v):this.data[this.offset+this.stride[0]*y+this.stride[1]*v]},g.index=function(y,v){return this.offset+this.stride[0]*y+this.stride[1]*v},g.hi=function(y,v){return new m(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,this.stride[0],this.stride[1],this.offset)},g.lo=function(y,v){var _=this.offset,f=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],P=this.stride[1];return typeof y=="number"&&y>=0&&(_+=E*(f=0|y),S-=f),typeof v=="number"&&v>=0&&(_+=P*(f=0|v),w-=f),new m(this.data,S,w,E,P,_)},g.step=function(y,v){var _=this.shape[0],f=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,P=0,C=Math.ceil;return typeof y=="number"&&((P=0|y)<0?(E+=S*(_-1),_=C(-_/P)):_=C(_/P),S*=P),typeof v=="number"&&((P=0|v)<0?(E+=w*(f-1),f=C(-f/P)):f=C(f/P),w*=P),new m(this.data,_,f,S,w,E)},g.transpose=function(y,v){y=y===void 0?0:0|y,v=v===void 0?1:0|v;var _=this.shape,f=this.stride;return new m(this.data,_[y],_[v],f[y],f[v],this.offset)},g.pick=function(y,v){var _=[],f=[],S=this.offset;return typeof y=="number"&&y>=0?S=S+this.stride[0]*y|0:(_.push(this.shape[0]),f.push(this.stride[0])),typeof v=="number"&&v>=0?S=S+this.stride[1]*v|0:(_.push(this.shape[1]),f.push(this.stride[1])),(0,x[_.length+1])(this.data,_,f,S)},function(y,v,_,f){return new m(y,v[0],v[1],_[0],_[1],f)}},3:function(u,x,d){function m(y,v,_,f,S,w,E,P){this.data=y,this.shape=[v,_,f],this.stride=[S,w,E],this.offset=0|P}var g=m.prototype;return g.dtype=u,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var y=Math.abs(this.stride[0]),v=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return y>v?v>_?[2,1,0]:y>_?[1,2,0]:[1,0,2]:y>_?[2,0,1]:_>v?[0,1,2]:[0,2,1]}}),g.set=function(y,v,_,f){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_,f):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_]=f},g.get=function(y,v,_){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_]},g.index=function(y,v,_){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_},g.hi=function(y,v,_){return new m(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(y,v,_){var f=this.offset,S=0,w=this.shape[0],E=this.shape[1],P=this.shape[2],C=this.stride[0],O=this.stride[1],R=this.stride[2];return typeof y=="number"&&y>=0&&(f+=C*(S=0|y),w-=S),typeof v=="number"&&v>=0&&(f+=O*(S=0|v),E-=S),typeof _=="number"&&_>=0&&(f+=R*(S=0|_),P-=S),new m(this.data,w,E,P,C,O,R,f)},g.step=function(y,v,_){var f=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],P=this.stride[1],C=this.stride[2],O=this.offset,R=0,U=Math.ceil;return typeof y=="number"&&((R=0|y)<0?(O+=E*(f-1),f=U(-f/R)):f=U(f/R),E*=R),typeof v=="number"&&((R=0|v)<0?(O+=P*(S-1),S=U(-S/R)):S=U(S/R),P*=R),typeof _=="number"&&((R=0|_)<0?(O+=C*(w-1),w=U(-w/R)):w=U(w/R),C*=R),new m(this.data,f,S,w,E,P,C,O)},g.transpose=function(y,v,_){y=y===void 0?0:0|y,v=v===void 0?1:0|v,_=_===void 0?2:0|_;var f=this.shape,S=this.stride;return new m(this.data,f[y],f[v],f[_],S[y],S[v],S[_],this.offset)},g.pick=function(y,v,_){var f=[],S=[],w=this.offset;return typeof y=="number"&&y>=0?w=w+this.stride[0]*y|0:(f.push(this.shape[0]),S.push(this.stride[0])),typeof v=="number"&&v>=0?w=w+this.stride[1]*v|0:(f.push(this.shape[1]),S.push(this.stride[1])),typeof _=="number"&&_>=0?w=w+this.stride[2]*_|0:(f.push(this.shape[2]),S.push(this.stride[2])),(0,x[f.length+1])(this.data,f,S,w)},function(y,v,_,f){return new m(y,v[0],v[1],v[2],_[0],_[1],_[2],f)}},4:function(u,x,d){function m(y,v,_,f,S,w,E,P,C,O){this.data=y,this.shape=[v,_,f,S],this.stride=[w,E,P,C],this.offset=0|O}var g=m.prototype;return g.dtype=u,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(y,v,_,f,S){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f,S):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f]=S},g.get=function(y,v,_,f){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f]},g.index=function(y,v,_,f){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f},g.hi=function(y,v,_,f){return new m(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(y,v,_,f){var S=this.offset,w=0,E=this.shape[0],P=this.shape[1],C=this.shape[2],O=this.shape[3],R=this.stride[0],U=this.stride[1],D=this.stride[2],N=this.stride[3];return typeof y=="number"&&y>=0&&(S+=R*(w=0|y),E-=w),typeof v=="number"&&v>=0&&(S+=U*(w=0|v),P-=w),typeof _=="number"&&_>=0&&(S+=D*(w=0|_),C-=w),typeof f=="number"&&f>=0&&(S+=N*(w=0|f),O-=w),new m(this.data,E,P,C,O,R,U,D,N,S)},g.step=function(y,v,_,f){var S=this.shape[0],w=this.shape[1],E=this.shape[2],P=this.shape[3],C=this.stride[0],O=this.stride[1],R=this.stride[2],U=this.stride[3],D=this.offset,N=0,W=Math.ceil;return typeof y=="number"&&((N=0|y)<0?(D+=C*(S-1),S=W(-S/N)):S=W(S/N),C*=N),typeof v=="number"&&((N=0|v)<0?(D+=O*(w-1),w=W(-w/N)):w=W(w/N),O*=N),typeof _=="number"&&((N=0|_)<0?(D+=R*(E-1),E=W(-E/N)):E=W(E/N),R*=N),typeof f=="number"&&((N=0|f)<0?(D+=U*(P-1),P=W(-P/N)):P=W(P/N),U*=N),new m(this.data,S,w,E,P,C,O,R,U,D)},g.transpose=function(y,v,_,f){y=y===void 0?0:0|y,v=v===void 0?1:0|v,_=_===void 0?2:0|_,f=f===void 0?3:0|f;var S=this.shape,w=this.stride;return new m(this.data,S[y],S[v],S[_],S[f],w[y],w[v],w[_],w[f],this.offset)},g.pick=function(y,v,_,f){var S=[],w=[],E=this.offset;return typeof y=="number"&&y>=0?E=E+this.stride[0]*y|0:(S.push(this.shape[0]),w.push(this.stride[0])),typeof v=="number"&&v>=0?E=E+this.stride[1]*v|0:(S.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(S.push(this.shape[2]),w.push(this.stride[2])),typeof f=="number"&&f>=0?E=E+this.stride[3]*f|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,x[S.length+1])(this.data,S,w,E)},function(y,v,_,f){return new m(y,v[0],v[1],v[2],v[3],_[0],_[1],_[2],_[3],f)}},5:function(u,x,d){function m(y,v,_,f,S,w,E,P,C,O,R,U){this.data=y,this.shape=[v,_,f,S,w],this.stride=[E,P,C,O,R],this.offset=0|U}var g=m.prototype;return g.dtype=u,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:d}),g.set=function(y,v,_,f,S,w){return u==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S,w):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]=w},g.get=function(y,v,_,f,S){return u==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S):this.data[this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]},g.index=function(y,v,_,f,S){return this.offset+this.stride[0]*y+this.stride[1]*v+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S},g.hi=function(y,v,_,f,S){return new m(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof v!="number"||v<0?this.shape[1]:0|v,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(y,v,_,f,S){var w=this.offset,E=0,P=this.shape[0],C=this.shape[1],O=this.shape[2],R=this.shape[3],U=this.shape[4],D=this.stride[0],N=this.stride[1],W=this.stride[2],F=this.stride[3],j=this.stride[4];return typeof y=="number"&&y>=0&&(w+=D*(E=0|y),P-=E),typeof v=="number"&&v>=0&&(w+=N*(E=0|v),C-=E),typeof _=="number"&&_>=0&&(w+=W*(E=0|_),O-=E),typeof f=="number"&&f>=0&&(w+=F*(E=0|f),R-=E),typeof S=="number"&&S>=0&&(w+=j*(E=0|S),U-=E),new m(this.data,P,C,O,R,U,D,N,W,F,j,w)},g.step=function(y,v,_,f,S){var w=this.shape[0],E=this.shape[1],P=this.shape[2],C=this.shape[3],O=this.shape[4],R=this.stride[0],U=this.stride[1],D=this.stride[2],N=this.stride[3],W=this.stride[4],F=this.offset,j=0,q=Math.ceil;return typeof y=="number"&&((j=0|y)<0?(F+=R*(w-1),w=q(-w/j)):w=q(w/j),R*=j),typeof v=="number"&&((j=0|v)<0?(F+=U*(E-1),E=q(-E/j)):E=q(E/j),U*=j),typeof _=="number"&&((j=0|_)<0?(F+=D*(P-1),P=q(-P/j)):P=q(P/j),D*=j),typeof f=="number"&&((j=0|f)<0?(F+=N*(C-1),C=q(-C/j)):C=q(C/j),N*=j),typeof S=="number"&&((j=0|S)<0?(F+=W*(O-1),O=q(-O/j)):O=q(O/j),W*=j),new m(this.data,w,E,P,C,O,R,U,D,N,W,F)},g.transpose=function(y,v,_,f,S){y=y===void 0?0:0|y,v=v===void 0?1:0|v,_=_===void 0?2:0|_,f=f===void 0?3:0|f,S=S===void 0?4:0|S;var w=this.shape,E=this.stride;return new m(this.data,w[y],w[v],w[_],w[f],w[S],E[y],E[v],E[_],E[f],E[S],this.offset)},g.pick=function(y,v,_,f,S){var w=[],E=[],P=this.offset;return typeof y=="number"&&y>=0?P=P+this.stride[0]*y|0:(w.push(this.shape[0]),E.push(this.stride[0])),typeof v=="number"&&v>=0?P=P+this.stride[1]*v|0:(w.push(this.shape[1]),E.push(this.stride[1])),typeof _=="number"&&_>=0?P=P+this.stride[2]*_|0:(w.push(this.shape[2]),E.push(this.stride[2])),typeof f=="number"&&f>=0?P=P+this.stride[3]*f|0:(w.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?P=P+this.stride[4]*S|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,x[w.length+1])(this.data,w,E,P)},function(y,v,_,f){return new m(y,v[0],v[1],v[2],v[3],v[4],_[0],_[1],_[2],_[3],_[4],f)}}};function c(u,x){var d=x===-1?"T":String(x),m=l[d];return x===-1?m(u):x===0?m(u,h[u][0]):m(u,h[u],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};p.exports=function(u,x,d,m){if(u===void 0)return(0,h.array[0])([]);typeof u=="number"&&(u=[u]),x===void 0&&(x=[u.length]);var g=x.length;if(d===void 0){d=new Array(g);for(var y=g-1,v=1;y>=0;--y)d[y]=v,v*=x[y]}if(m===void 0)for(m=0,y=0;y<g;++y)d[y]<0&&(m-=(x[y]-1)*d[y]);for(var _=function(S){if(i(S))return"buffer";if(n)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(u),f=h[_];f.length<=g+1;)f.push(c(_,f.length-1));return(0,f[g+1])(u,x,d,m)}},1278:function(p,s,t){"use strict";var i=t(2361),n=Math.pow(2,-1074),r=-1>>>0;p.exports=function(a,l){if(isNaN(a)||isNaN(l))return NaN;if(a===l)return a;if(a===0)return l<0?-n:n;var c=i.hi(a),h=i.lo(a);return l>a==a>0?h===r?(c+=1,h=0):h+=1:h===0?(h=r,c-=1):h-=1,i.pack(h,c)}},8406:function(p,s){s.vertexNormals=function(t,i,n){for(var r=i.length,a=new Array(r),l=n===void 0?1e-6:n,c=0;c<r;++c)a[c]=[0,0,0];for(c=0;c<t.length;++c)for(var h=t[c],u=0,x=h[h.length-1],d=h[0],m=0;m<h.length;++m){u=x,x=d,d=h[(m+1)%h.length];for(var g=i[u],y=i[x],v=i[d],_=new Array(3),f=0,S=new Array(3),w=0,E=0;E<3;++E)_[E]=g[E]-y[E],f+=_[E]*_[E],S[E]=v[E]-y[E],w+=S[E]*S[E];if(f*w>l){var P=a[x],C=1/Math.sqrt(f*w);for(E=0;E<3;++E){var O=(E+1)%3,R=(E+2)%3;P[E]+=C*(S[O]*_[R]-S[R]*_[O])}}}for(c=0;c<r;++c){P=a[c];var U=0;for(E=0;E<3;++E)U+=P[E]*P[E];if(U>l)for(C=1/Math.sqrt(U),E=0;E<3;++E)P[E]*=C;else for(E=0;E<3;++E)P[E]=0}return a},s.faceNormals=function(t,i,n){for(var r=t.length,a=new Array(r),l=n===void 0?1e-6:n,c=0;c<r;++c){for(var h=t[c],u=new Array(3),x=0;x<3;++x)u[x]=i[h[x]];var d=new Array(3),m=new Array(3);for(x=0;x<3;++x)d[x]=u[1][x]-u[0][x],m[x]=u[2][x]-u[0][x];var g=new Array(3),y=0;for(x=0;x<3;++x){var v=(x+1)%3,_=(x+2)%3;g[x]=d[v]*m[_]-d[_]*m[v],y+=g[x]*g[x]}for(y=y>l?1/Math.sqrt(y):0,x=0;x<3;++x)g[x]*=y;a[c]=g}return a}},4081:function(p){"use strict";p.exports=function(s,t,i,n,r,a,l,c,h,u){var x=t+a+u;if(d>0){var d=Math.sqrt(x+1);s[0]=.5*(l-h)/d,s[1]=.5*(c-n)/d,s[2]=.5*(i-a)/d,s[3]=.5*d}else{var m=Math.max(t,a,u);d=Math.sqrt(2*m-x+1),t>=m?(s[0]=.5*d,s[1]=.5*(r+i)/d,s[2]=.5*(c+n)/d,s[3]=.5*(l-h)/d):a>=m?(s[0]=.5*(i+r)/d,s[1]=.5*d,s[2]=.5*(h+l)/d,s[3]=.5*(c-n)/d):(s[0]=.5*(n+c)/d,s[1]=.5*(l+h)/d,s[2]=.5*d,s[3]=.5*(i-r)/d)}return s}},9977:function(p,s,t){"use strict";p.exports=function(m){var g=(m=m||{}).center||[0,0,0],y=m.rotation||[0,0,0,1],v=m.radius||1;g=[].slice.call(g,0,3),u(y=[].slice.call(y,0,4),y);var _=new x(y,g,Math.log(v));return _.setDistanceLimits(m.zoomMin,m.zoomMax),("eye"in m||"up"in m)&&_.lookAt(0,m.eye,m.center,m.up),_};var i=t(9215),n=t(6582),r=t(7399),a=t(7608),l=t(4081);function c(m,g,y){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(y,2))}function h(m,g,y,v){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(y,2)+Math.pow(v,2))}function u(m,g){var y=g[0],v=g[1],_=g[2],f=g[3],S=h(y,v,_,f);S>1e-6?(m[0]=y/S,m[1]=v/S,m[2]=_/S,m[3]=f/S):(m[0]=m[1]=m[2]=0,m[3]=1)}function x(m,g,y){this.radius=i([y]),this.center=i(g),this.rotation=i(m),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=x.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(m){this.radius.curve(m),this.center.curve(m),this.rotation.curve(m);var g=this.computedRotation;u(g,g);var y=this.computedMatrix;r(y,g);var v=this.computedCenter,_=this.computedEye,f=this.computedUp,S=Math.exp(this.computedRadius[0]);_[0]=v[0]+S*y[2],_[1]=v[1]+S*y[6],_[2]=v[2]+S*y[10],f[0]=y[1],f[1]=y[5],f[2]=y[9];for(var w=0;w<3;++w){for(var E=0,P=0;P<3;++P)E+=y[w+4*P]*_[P];y[12+w]=-E}},d.getMatrix=function(m,g){this.recalcMatrix(m);var y=this.computedMatrix;if(g){for(var v=0;v<16;++v)g[v]=y[v];return g}return y},d.idle=function(m){this.center.idle(m),this.radius.idle(m),this.rotation.idle(m)},d.flush=function(m){this.center.flush(m),this.radius.flush(m),this.rotation.flush(m)},d.pan=function(m,g,y,v){g=g||0,y=y||0,v=v||0,this.recalcMatrix(m);var _=this.computedMatrix,f=_[1],S=_[5],w=_[9],E=c(f,S,w);f/=E,S/=E,w/=E;var P=_[0],C=_[4],O=_[8],R=P*f+C*S+O*w,U=c(P-=f*R,C-=S*R,O-=w*R);P/=U,C/=U,O/=U;var D=_[2],N=_[6],W=_[10],F=D*f+N*S+W*w,j=D*P+N*C+W*O,q=c(D-=F*f+j*P,N-=F*S+j*C,W-=F*w+j*O);D/=q,N/=q,W/=q;var te=P*g+f*y,ee=C*g+S*y,Q=O*g+w*y;this.center.move(m,te,ee,Q);var J=Math.exp(this.computedRadius[0]);J=Math.max(1e-4,J+v),this.radius.set(m,Math.log(J))},d.rotate=function(m,g,y,v){this.recalcMatrix(m),g=g||0,y=y||0;var _=this.computedMatrix,f=_[0],S=_[4],w=_[8],E=_[1],P=_[5],C=_[9],O=_[2],R=_[6],U=_[10],D=g*f+y*E,N=g*S+y*P,W=g*w+y*C,F=-(R*W-U*N),j=-(U*D-O*W),q=-(O*N-R*D),te=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(j,2)-Math.pow(q,2))),ee=h(F,j,q,te);ee>1e-6?(F/=ee,j/=ee,q/=ee,te/=ee):(F=j=q=0,te=1);var Q=this.computedRotation,J=Q[0],K=Q[1],Y=Q[2],ie=Q[3],se=J*te+ie*F+K*q-Y*j,ae=K*te+ie*j+Y*F-J*q,ue=Y*te+ie*q+J*j-K*F,ve=ie*te-J*F-K*j-Y*q;if(v){F=O,j=R,q=U;var ye=Math.sin(v)/c(F,j,q);F*=ye,j*=ye,q*=ye,ve=ve*(te=Math.cos(g))-(se=se*te+ve*F+ae*q-ue*j)*F-(ae=ae*te+ve*j+ue*F-se*q)*j-(ue=ue*te+ve*q+se*j-ae*F)*q}var de=h(se,ae,ue,ve);de>1e-6?(se/=de,ae/=de,ue/=de,ve/=de):(se=ae=ue=0,ve=1),this.rotation.set(m,se,ae,ue,ve)},d.lookAt=function(m,g,y,v){this.recalcMatrix(m),y=y||this.computedCenter,g=g||this.computedEye,v=v||this.computedUp;var _=this.computedMatrix;n(_,g,y,v);var f=this.computedRotation;l(f,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),u(f,f),this.rotation.set(m,f[0],f[1],f[2],f[3]);for(var S=0,w=0;w<3;++w)S+=Math.pow(y[w]-g[w],2);this.radius.set(m,.5*Math.log(Math.max(S,1e-6))),this.center.set(m,y[0],y[1],y[2])},d.translate=function(m,g,y,v){this.center.move(m,g||0,y||0,v||0)},d.setMatrix=function(m,g){var y=this.computedRotation;l(y,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),u(y,y),this.rotation.set(m,y[0],y[1],y[2],y[3]);var v=this.computedMatrix;a(v,g);var _=v[15];if(Math.abs(_)>1e-6){var f=v[12]/_,S=v[13]/_,w=v[14]/_;this.recalcMatrix(m);var E=Math.exp(this.computedRadius[0]);this.center.set(m,f-v[2]*E,S-v[6]*E,w-v[10]*E),this.radius.idle(m)}else this.center.idle(m),this.radius.idle(m)},d.setDistance=function(m,g){g>0&&this.radius.set(m,Math.log(g))},d.setDistanceLimits=function(m,g){m=m>0?Math.log(m):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=g},d.getDistanceLimits=function(m){var g=this.radius.bounds;return m?(m[0]=Math.exp(g[0][0]),m[1]=Math.exp(g[1][0]),m):[Math.exp(g[0][0]),Math.exp(g[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(m){var g=this.lastT(),y=m.center;y&&this.center.set(g,y[0],y[1],y[2]);var v=m.rotation;v&&this.rotation.set(g,v[0],v[1],v[2],v[3]);var _=m.distance;_&&_>0&&this.radius.set(g,Math.log(_)),this.setDistanceLimits(m.zoomMin,m.zoomMax)}},1371:function(p,s,t){"use strict";var i=t(3233);p.exports=function(n,r,a){return i(a=a!==void 0?a+"":" ",r)+n}},3202:function(p){p.exports=function(s,t){t||(t=[0,""]),s=String(s);var i=parseFloat(s,10);return t[0]=i,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(p,s,t){"use strict";p.exports=function(n,r){for(var a=0|r.length,l=n.length,c=[new Array(a),new Array(a)],h=0;h<a;++h)c[0][h]=[],c[1][h]=[];for(h=0;h<l;++h){var u=n[h];c[0][u[0]].push(u),c[1][u[1]].push(u)}var x=[];for(h=0;h<a;++h)c[0][h].length+c[1][h].length===0&&x.push([h]);function d(S,w){var E=c[w][S[w]];E.splice(E.indexOf(S),1)}function m(S,w,E){for(var P,C,O,R=0;R<2;++R)if(c[R][w].length>0){P=c[R][w][0],O=R;break}C=P[1^O];for(var U=0;U<2;++U)for(var D=c[U][w],N=0;N<D.length;++N){var W=D[N],F=W[1^U];i(r[S],r[w],r[C],r[F])>0&&(P=W,C=F,O=U)}return E||P&&d(P,O),C}function g(S,w){var E=c[w][S][0],P=[S];d(E,w);for(var C=E[1^w];;){for(;C!==S;)P.push(C),C=m(P[P.length-2],C,!1);if(c[0][S].length+c[1][S].length===0)break;var O=P[P.length-1],R=S,U=P[1],D=m(O,R,!0);if(i(r[O],r[R],r[U],r[D])<0)break;P.push(S),C=m(O,R)}return P}function y(S,w){return w[1]===w[w.length-1]}for(h=0;h<a;++h)for(var v=0;v<2;++v){for(var _=[];c[v][h].length>0;){c[0][h].length;var f=g(h,v);y(0,f)?_.push.apply(_,f):(_.length>0&&x.push(_),_=f)}_.length>0&&x.push(_)}return x};var i=t(3140)},5609:function(p,s,t){"use strict";p.exports=function(n,r){for(var a=i(n,r.length),l=new Array(r.length),c=new Array(r.length),h=[],u=0;u<r.length;++u){var x=a[u].length;c[u]=x,l[u]=!0,x<=1&&h.push(u)}for(;h.length>0;){l[v=h.pop()]=!1;var d=a[v];for(u=0;u<d.length;++u){var m=d[u];--c[m]==0&&h.push(m)}}var g=new Array(r.length),y=[];for(u=0;u<r.length;++u)if(l[u]){var v=y.length;g[u]=v,y.push(r[u])}else g[u]=-1;var _=[];for(u=0;u<n.length;++u){var f=n[u];l[f[0]]&&l[f[1]]&&_.push([g[f[0]],g[f[1]]])}return[_,y]};var i=t(3134)},2095:function(p,s,t){"use strict";p.exports=function(x,d){var m=h(x,d);x=m[0];for(var g=(d=m[1]).length,y=(x.length,i(x,d.length)),v=0;v<g;++v)if(y[v].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=n(x,d),f=(_=_.filter(function(ke){for(var Ee=ke.length,me=[0],oe=0;oe<Ee;++oe){var re=d[ke[oe]],fe=d[ke[(oe+1)%Ee]],Se=a(-re[0],re[1]),be=a(-re[0],fe[1]),we=a(fe[0],re[1]),Me=a(fe[0],fe[1]);me=l(me,l(l(Se,be),l(we,Me)))}return me[me.length-1]>0})).length,S=new Array(f),w=new Array(f);for(v=0;v<f;++v){S[v]=v;var E=new Array(f),P=_[v].map(function(ke){return d[ke]}),C=r([P]),O=0;e:for(var R=0;R<f;++R)if(E[R]=0,v!==R){for(var U=(pe=_[R]).length,D=0;D<U;++D){var N=C(d[pe[D]]);if(N!==0){N<0&&(E[R]=1,O+=1);continue e}}E[R]=1,O+=1}w[v]=[O,v,E]}for(w.sort(function(ke,Ee){return Ee[0]-ke[0]}),v=0;v<f;++v){var W=(E=w[v])[1],F=E[2];for(R=0;R<f;++R)F[R]&&(S[R]=W)}var j=function(ke){for(var Ee=new Array(ke),me=0;me<ke;++me)Ee[me]=[];return Ee}(f);for(v=0;v<f;++v)j[v].push(S[v]),j[S[v]].push(v);var q={},te=u(g,!1);for(v=0;v<f;++v)for(U=(pe=_[v]).length,R=0;R<U;++R){var ee=pe[R],Q=pe[(R+1)%U],J=Math.min(ee,Q)+":"+Math.max(ee,Q);if(J in q){var K=q[J];j[K].push(v),j[v].push(K),te[ee]=te[Q]=!0}else q[J]=v}function Y(ke){for(var Ee=ke.length,me=0;me<Ee;++me)if(!te[ke[me]])return!1;return!0}var ie=[],se=u(f,-1);for(v=0;v<f;++v)S[v]!==v||Y(_[v])?se[v]=-1:(ie.push(v),se[v]=0);for(m=[];ie.length>0;){var ae=ie.pop(),ue=j[ae];c(ue,function(ke,Ee){return ke-Ee});var ve,ye=ue.length,de=se[ae];for(de===0&&(ve=[pe=_[ae]]),v=0;v<ye;++v){var pe,ge=ue[v];se[ge]>=0||(se[ge]=1^de,ie.push(ge),de===0&&(Y(pe=_[ge])||(pe.reverse(),ve.push(pe))))}de===0&&m.push(ve)}return m};var i=t(3134),n=t(3088),r=t(5085),a=t(5250),l=t(8210),c=t(1682),h=t(5609);function u(x,d){for(var m=new Array(x),g=0;g<x;++g)m[g]=d;return m}},5085:function(p,s,t){p.exports=function(u){for(var x=u.length,d=[],m=[],g=0;g<x;++g)for(var y=u[g],v=y.length,_=v-1,f=0;f<v;_=f++){var S=y[_],w=y[f];S[0]===w[0]?m.push([S,w]):d.push([S,w])}if(d.length===0)return m.length===0?h:(E=c(m),function(O){return E(O[0],O[1])?0:1});var E,P=n(d),C=function(O,R){return function(U){var D=a.le(R,U[0]);if(D<0)return 1;var N=O[D];if(!N){if(!(D>0&&R[D]===U[0]))return 1;N=O[D-1]}for(var W=1;N;){var F=N.key,j=i(U,F[0],F[1]);if(F[0][0]<F[1][0])if(j<0)N=N.left;else{if(!(j>0))return 0;W=-1,N=N.right}else if(j>0)N=N.left;else{if(!(j<0))return 0;W=1,N=N.right}}return W}}(P.slabs,P.coordinates);return m.length===0?C:function(O,R){return function(U){return O(U[0],U[1])?0:R(U)}}(c(m),C)};var i=t(3250)[3],n=t(4209),r=t(3352),a=t(2478);function l(){return!0}function c(u){for(var x={},d=0;d<u.length;++d){var m=u[d],g=m[0][0],y=m[0][1],v=m[1][1],_=[Math.min(y,v),Math.max(y,v)];g in x?x[g].push(_):x[g]=[_]}var f={},S=Object.keys(x);for(d=0;d<S.length;++d){var w=x[S[d]];f[S[d]]=r(w)}return function(E){return function(P,C){var O=E[P];return!!O&&!!O.queryPoint(C,l)}}(f)}function h(u){return 1}},9346:function(p){"use strict";var s=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);p.exports=function(n,r,a,l,c){s.length<l.length&&(s=new Float64Array(l.length),t=new Float64Array(l.length),i=new Float64Array(l.length));for(var h=0;h<l.length;++h)s[h]=n[h]-l[h],t[h]=r[h]-n[h],i[h]=a[h]-n[h];var u=0,x=0,d=0,m=0,g=0,y=0;for(h=0;h<l.length;++h){var v=t[h],_=i[h],f=s[h];u+=v*v,x+=v*_,d+=_*_,m+=f*v,g+=f*_,y+=f*f}var S,w,E,P,C,O=Math.abs(u*d-x*x),R=x*g-d*m,U=x*m-u*g;if(R+U<=O)if(R<0)U<0&&m<0?(U=0,-m>=u?(R=1,S=u+2*m+y):S=m*(R=-m/u)+y):(R=0,g>=0?(U=0,S=y):-g>=d?(U=1,S=d+2*g+y):S=g*(U=-g/d)+y);else if(U<0)U=0,m>=0?(R=0,S=y):-m>=u?(R=1,S=u+2*m+y):S=m*(R=-m/u)+y;else{var D=1/O;S=(R*=D)*(u*R+x*(U*=D)+2*m)+U*(x*R+d*U+2*g)+y}else R<0?(E=d+g)>(w=x+m)?(P=E-w)>=(C=u-2*x+d)?(R=1,U=0,S=u+2*m+y):S=(R=P/C)*(u*R+x*(U=1-R)+2*m)+U*(x*R+d*U+2*g)+y:(R=0,E<=0?(U=1,S=d+2*g+y):g>=0?(U=0,S=y):S=g*(U=-g/d)+y):U<0?(E=u+m)>(w=x+g)?(P=E-w)>=(C=u-2*x+d)?(U=1,R=0,S=d+2*g+y):S=(R=1-(U=P/C))*(u*R+x*U+2*m)+U*(x*R+d*U+2*g)+y:(U=0,E<=0?(R=1,S=u+2*m+y):m>=0?(R=0,S=y):S=m*(R=-m/u)+y):(P=d+g-x-m)<=0?(R=0,U=1,S=d+2*g+y):P>=(C=u-2*x+d)?(R=1,U=0,S=u+2*m+y):S=(R=P/C)*(u*R+x*(U=1-R)+2*m)+U*(x*R+d*U+2*g)+y;var N=1-R-U;for(h=0;h<l.length;++h)c[h]=N*n[h]+R*r[h]+U*a[h];return S<0?0:S}},8648:function(p,s,t){p.exports=t(783)},2653:function(p,s,t){"use strict";var i=t(3865);p.exports=function(n,r){for(var a=n.length,l=new Array(a),c=0;c<a;++c)l[c]=i(n[c],r[c]);return l}},5838:function(p,s,t){"use strict";p.exports=function(n){for(var r=new Array(n.length),a=0;a<n.length;++a)r[a]=i(n[a]);return r};var i=t(7842)},8987:function(p,s,t){"use strict";var i=t(7842),n=t(6504);p.exports=function(r,a){for(var l=i(a),c=r.length,h=new Array(c),u=0;u<c;++u)h[u]=n(r[u],l);return h}},544:function(p,s,t){"use strict";var i=t(5572);p.exports=function(n,r){for(var a=n.length,l=new Array(a),c=0;c<a;++c)l[c]=i(n[c],r[c]);return l}},5771:function(p,s,t){"use strict";var i=t(8507),n=t(3788),r=t(2419);p.exports=function(a){a.sort(n);for(var l=a.length,c=0,h=0;h<l;++h){var u=a[h],x=r(u);if(x!==0){if(c>0){var d=a[c-1];if(i(u,d)===0&&r(d)!==x){c-=1;continue}}a[c++]=u}}return a.length=c,a}},3233:function(p){"use strict";var s,t="";p.exports=function(i,n){if(typeof i!="string")throw new TypeError("expected a string");if(n===1)return i;if(n===2)return i+i;var r=i.length*n;if(s!==i||s===void 0)s=i,t="";else if(t.length>=r)return t.substr(0,r);for(;r>t.length&&n>1;)1&n&&(t+=i),n>>=1,i+=i;return t=(t+=i).substr(0,r)}},3025:function(p,s,t){p.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(p){"use strict";p.exports=function(s){for(var t=s.length,i=s[s.length-1],n=t,r=t-2;r>=0;--r){var a=i;(h=(c=s[r])-((i=a+c)-a))&&(s[--n]=i,i=h)}var l=0;for(r=n;r<t;++r){var c,h;(h=(c=i)-((i=(a=s[r])+c)-a))&&(s[l++]=h)}return s[l++]=i,s.length=l,s}},2962:function(p,s,t){"use strict";var i=t(5250),n=t(8210),r=t(3012),a=t(7004);function l(g,y,v,_){return function(f){return _(g(v(f[0][0],f[1][1]),v(-f[0][1],f[1][0])))}}function c(g,y,v,_){return function(f){return _(g(y(g(v(f[1][1],f[2][2]),v(-f[1][2],f[2][1])),f[0][0]),g(y(g(v(f[1][0],f[2][2]),v(-f[1][2],f[2][0])),-f[0][1]),y(g(v(f[1][0],f[2][1]),v(-f[1][1],f[2][0])),f[0][2]))))}}function h(g,y,v,_){return function(f){return _(g(g(y(g(y(g(v(f[2][2],f[3][3]),v(-f[2][3],f[3][2])),f[1][1]),g(y(g(v(f[2][1],f[3][3]),v(-f[2][3],f[3][1])),-f[1][2]),y(g(v(f[2][1],f[3][2]),v(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),y(g(y(g(v(f[2][2],f[3][3]),v(-f[2][3],f[3][2])),f[1][0]),g(y(g(v(f[2][0],f[3][3]),v(-f[2][3],f[3][0])),-f[1][2]),y(g(v(f[2][0],f[3][2]),v(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),g(y(g(y(g(v(f[2][1],f[3][3]),v(-f[2][3],f[3][1])),f[1][0]),g(y(g(v(f[2][0],f[3][3]),v(-f[2][3],f[3][0])),-f[1][1]),y(g(v(f[2][0],f[3][1]),v(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),y(g(y(g(v(f[2][1],f[3][2]),v(-f[2][2],f[3][1])),f[1][0]),g(y(g(v(f[2][0],f[3][2]),v(-f[2][2],f[3][0])),-f[1][1]),y(g(v(f[2][0],f[3][1]),v(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function u(g,y,v,_){return function(f){return _(g(g(y(g(g(y(g(y(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][2]),g(y(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),-f[2][3]),y(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),y(g(y(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][1]),g(y(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][3]),y(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),g(y(g(y(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][1]),g(y(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][2]),y(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),y(g(y(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][1]),g(y(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),-f[2][2]),y(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),y(g(g(y(g(y(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][2]),g(y(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),-f[2][3]),y(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),y(g(y(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][0]),g(y(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][3]),y(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),g(y(g(y(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][0]),g(y(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][2]),y(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),y(g(y(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][0]),g(y(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][2]),y(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),g(y(g(g(y(g(y(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][1]),g(y(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][3]),y(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),y(g(y(g(v(f[3][3],f[4][4]),v(-f[3][4],f[4][3])),f[2][0]),g(y(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][3]),y(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),g(y(g(y(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),f[2][0]),g(y(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][1]),y(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),y(g(y(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][0]),g(y(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][1]),y(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),g(y(g(g(y(g(y(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][1]),g(y(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),-f[2][2]),y(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),y(g(y(g(v(f[3][2],f[4][4]),v(-f[3][4],f[4][2])),f[2][0]),g(y(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][2]),y(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),g(y(g(y(g(v(f[3][1],f[4][4]),v(-f[3][4],f[4][1])),f[2][0]),g(y(g(v(f[3][0],f[4][4]),v(-f[3][4],f[4][0])),-f[2][1]),y(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),y(g(y(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][0]),g(y(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),-f[2][1]),y(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),y(g(g(y(g(y(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][1]),g(y(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),-f[2][2]),y(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),y(g(y(g(v(f[3][2],f[4][3]),v(-f[3][3],f[4][2])),f[2][0]),g(y(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][2]),y(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),g(y(g(y(g(v(f[3][1],f[4][3]),v(-f[3][3],f[4][1])),f[2][0]),g(y(g(v(f[3][0],f[4][3]),v(-f[3][3],f[4][0])),-f[2][1]),y(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),y(g(y(g(v(f[3][1],f[4][2]),v(-f[3][2],f[4][1])),f[2][0]),g(y(g(v(f[3][0],f[4][2]),v(-f[3][2],f[4][0])),-f[2][1]),y(g(v(f[3][0],f[4][1]),v(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function x(g){return(g===2?l:g===3?c:g===4?h:g===5?u:void 0)(n,r,i,a)}var d=[function(){return[0]},function(g){return[g[0][0]]}];function m(g,y,v,_,f,S,w,E){return function(P){switch(P.length){case 0:return g(P);case 1:return y(P);case 2:return v(P);case 3:return _(P);case 4:return f(P);case 5:return S(P)}var C=w[P.length];return C||(C=w[P.length]=E(P.length)),C(P)}}(function(){for(;d.length<6;)d.push(x(d.length));p.exports=m.apply(void 0,d.concat([d,x]));for(var g=0;g<d.length;++g)p.exports[g]=d[g]})()},1944:function(p,s,t){"use strict";var i=t(5250),n=t(8210);p.exports=function(r,a){for(var l=i(r[0],a[0]),c=1;c<r.length;++c)l=n(l,i(r[c],a[c]));return l}},2646:function(p,s,t){"use strict";var i=t(5250),n=t(8210),r=t(8545),a=t(3012);function l(y){return(y===3?c:y===4?h:y===5?u:x)(n,r,i,a)}function c(y,v,_,f){return function(S,w,E){var P=_(S[0],S[0]),C=f(P,w[0]),O=f(P,E[0]),R=_(w[0],w[0]),U=f(R,S[0]),D=f(R,E[0]),N=_(E[0],E[0]),W=f(N,S[0]),F=f(N,w[0]),j=y(v(F,D),v(U,C)),q=v(W,O),te=v(j,q);return te[te.length-1]}}function h(y,v,_,f){return function(S,w,E,P){var C=y(_(S[0],S[0]),_(S[1],S[1])),O=f(C,w[0]),R=f(C,E[0]),U=f(C,P[0]),D=y(_(w[0],w[0]),_(w[1],w[1])),N=f(D,S[0]),W=f(D,E[0]),F=f(D,P[0]),j=y(_(E[0],E[0]),_(E[1],E[1])),q=f(j,S[0]),te=f(j,w[0]),ee=f(j,P[0]),Q=y(_(P[0],P[0]),_(P[1],P[1])),J=f(Q,S[0]),K=f(Q,w[0]),Y=f(Q,E[0]),ie=y(y(f(v(Y,ee),w[1]),y(f(v(K,F),-E[1]),f(v(te,W),P[1]))),y(f(v(K,F),S[1]),y(f(v(J,U),-w[1]),f(v(N,O),P[1])))),se=y(y(f(v(Y,ee),S[1]),y(f(v(J,U),-E[1]),f(v(q,R),P[1]))),y(f(v(te,W),S[1]),y(f(v(q,R),-w[1]),f(v(N,O),E[1])))),ae=v(ie,se);return ae[ae.length-1]}}function u(y,v,_,f){return function(S,w,E,P,C){var O=y(_(S[0],S[0]),y(_(S[1],S[1]),_(S[2],S[2]))),R=f(O,w[0]),U=f(O,E[0]),D=f(O,P[0]),N=f(O,C[0]),W=y(_(w[0],w[0]),y(_(w[1],w[1]),_(w[2],w[2]))),F=f(W,S[0]),j=f(W,E[0]),q=f(W,P[0]),te=f(W,C[0]),ee=y(_(E[0],E[0]),y(_(E[1],E[1]),_(E[2],E[2]))),Q=f(ee,S[0]),J=f(ee,w[0]),K=f(ee,P[0]),Y=f(ee,C[0]),ie=y(_(P[0],P[0]),y(_(P[1],P[1]),_(P[2],P[2]))),se=f(ie,S[0]),ae=f(ie,w[0]),ue=f(ie,E[0]),ve=f(ie,C[0]),ye=y(_(C[0],C[0]),y(_(C[1],C[1]),_(C[2],C[2]))),de=f(ye,S[0]),pe=f(ye,w[0]),ge=f(ye,E[0]),ke=f(ye,P[0]),Ee=y(y(y(f(y(f(v(ke,ve),E[1]),y(f(v(ge,Y),-P[1]),f(v(ue,K),C[1]))),w[2]),y(f(y(f(v(ke,ve),w[1]),y(f(v(pe,te),-P[1]),f(v(ae,q),C[1]))),-E[2]),f(y(f(v(ge,Y),w[1]),y(f(v(pe,te),-E[1]),f(v(J,j),C[1]))),P[2]))),y(f(y(f(v(ue,K),w[1]),y(f(v(ae,q),-E[1]),f(v(J,j),P[1]))),-C[2]),y(f(y(f(v(ke,ve),w[1]),y(f(v(pe,te),-P[1]),f(v(ae,q),C[1]))),S[2]),f(y(f(v(ke,ve),S[1]),y(f(v(de,N),-P[1]),f(v(se,D),C[1]))),-w[2])))),y(y(f(y(f(v(pe,te),S[1]),y(f(v(de,N),-w[1]),f(v(F,R),C[1]))),P[2]),y(f(y(f(v(ae,q),S[1]),y(f(v(se,D),-w[1]),f(v(F,R),P[1]))),-C[2]),f(y(f(v(ue,K),w[1]),y(f(v(ae,q),-E[1]),f(v(J,j),P[1]))),S[2]))),y(f(y(f(v(ue,K),S[1]),y(f(v(se,D),-E[1]),f(v(Q,U),P[1]))),-w[2]),y(f(y(f(v(ae,q),S[1]),y(f(v(se,D),-w[1]),f(v(F,R),P[1]))),E[2]),f(y(f(v(J,j),S[1]),y(f(v(Q,U),-w[1]),f(v(F,R),E[1]))),-P[2]))))),me=y(y(y(f(y(f(v(ke,ve),E[1]),y(f(v(ge,Y),-P[1]),f(v(ue,K),C[1]))),S[2]),f(y(f(v(ke,ve),S[1]),y(f(v(de,N),-P[1]),f(v(se,D),C[1]))),-E[2])),y(f(y(f(v(ge,Y),S[1]),y(f(v(de,N),-E[1]),f(v(Q,U),C[1]))),P[2]),f(y(f(v(ue,K),S[1]),y(f(v(se,D),-E[1]),f(v(Q,U),P[1]))),-C[2]))),y(y(f(y(f(v(ge,Y),w[1]),y(f(v(pe,te),-E[1]),f(v(J,j),C[1]))),S[2]),f(y(f(v(ge,Y),S[1]),y(f(v(de,N),-E[1]),f(v(Q,U),C[1]))),-w[2])),y(f(y(f(v(pe,te),S[1]),y(f(v(de,N),-w[1]),f(v(F,R),C[1]))),E[2]),f(y(f(v(J,j),S[1]),y(f(v(Q,U),-w[1]),f(v(F,R),E[1]))),-C[2])))),oe=v(Ee,me);return oe[oe.length-1]}}function x(y,v,_,f){return function(S,w,E,P,C,O){var R=y(y(_(S[0],S[0]),_(S[1],S[1])),y(_(S[2],S[2]),_(S[3],S[3]))),U=f(R,w[0]),D=f(R,E[0]),N=f(R,P[0]),W=f(R,C[0]),F=f(R,O[0]),j=y(y(_(w[0],w[0]),_(w[1],w[1])),y(_(w[2],w[2]),_(w[3],w[3]))),q=f(j,S[0]),te=f(j,E[0]),ee=f(j,P[0]),Q=f(j,C[0]),J=f(j,O[0]),K=y(y(_(E[0],E[0]),_(E[1],E[1])),y(_(E[2],E[2]),_(E[3],E[3]))),Y=f(K,S[0]),ie=f(K,w[0]),se=f(K,P[0]),ae=f(K,C[0]),ue=f(K,O[0]),ve=y(y(_(P[0],P[0]),_(P[1],P[1])),y(_(P[2],P[2]),_(P[3],P[3]))),ye=f(ve,S[0]),de=f(ve,w[0]),pe=f(ve,E[0]),ge=f(ve,C[0]),ke=f(ve,O[0]),Ee=y(y(_(C[0],C[0]),_(C[1],C[1])),y(_(C[2],C[2]),_(C[3],C[3]))),me=f(Ee,S[0]),oe=f(Ee,w[0]),re=f(Ee,E[0]),fe=f(Ee,P[0]),Se=f(Ee,O[0]),be=y(y(_(O[0],O[0]),_(O[1],O[1])),y(_(O[2],O[2]),_(O[3],O[3]))),we=f(be,S[0]),Me=f(be,w[0]),Ie=f(be,E[0]),Oe=f(be,P[0]),he=f(be,C[0]),_e=y(y(y(f(y(y(f(y(f(v(he,Se),P[1]),y(f(v(Oe,ke),-C[1]),f(v(fe,ge),O[1]))),E[2]),f(y(f(v(he,Se),E[1]),y(f(v(Ie,ue),-C[1]),f(v(re,ae),O[1]))),-P[2])),y(f(y(f(v(Oe,ke),E[1]),y(f(v(Ie,ue),-P[1]),f(v(pe,se),O[1]))),C[2]),f(y(f(v(fe,ge),E[1]),y(f(v(re,ae),-P[1]),f(v(pe,se),C[1]))),-O[2]))),w[3]),y(f(y(y(f(y(f(v(he,Se),P[1]),y(f(v(Oe,ke),-C[1]),f(v(fe,ge),O[1]))),w[2]),f(y(f(v(he,Se),w[1]),y(f(v(Me,J),-C[1]),f(v(oe,Q),O[1]))),-P[2])),y(f(y(f(v(Oe,ke),w[1]),y(f(v(Me,J),-P[1]),f(v(de,ee),O[1]))),C[2]),f(y(f(v(fe,ge),w[1]),y(f(v(oe,Q),-P[1]),f(v(de,ee),C[1]))),-O[2]))),-E[3]),f(y(y(f(y(f(v(he,Se),E[1]),y(f(v(Ie,ue),-C[1]),f(v(re,ae),O[1]))),w[2]),f(y(f(v(he,Se),w[1]),y(f(v(Me,J),-C[1]),f(v(oe,Q),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),w[1]),y(f(v(Me,J),-E[1]),f(v(ie,te),O[1]))),C[2]),f(y(f(v(re,ae),w[1]),y(f(v(oe,Q),-E[1]),f(v(ie,te),C[1]))),-O[2]))),P[3]))),y(y(f(y(y(f(y(f(v(Oe,ke),E[1]),y(f(v(Ie,ue),-P[1]),f(v(pe,se),O[1]))),w[2]),f(y(f(v(Oe,ke),w[1]),y(f(v(Me,J),-P[1]),f(v(de,ee),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),w[1]),y(f(v(Me,J),-E[1]),f(v(ie,te),O[1]))),P[2]),f(y(f(v(pe,se),w[1]),y(f(v(de,ee),-E[1]),f(v(ie,te),P[1]))),-O[2]))),-C[3]),f(y(y(f(y(f(v(fe,ge),E[1]),y(f(v(re,ae),-P[1]),f(v(pe,se),C[1]))),w[2]),f(y(f(v(fe,ge),w[1]),y(f(v(oe,Q),-P[1]),f(v(de,ee),C[1]))),-E[2])),y(f(y(f(v(re,ae),w[1]),y(f(v(oe,Q),-E[1]),f(v(ie,te),C[1]))),P[2]),f(y(f(v(pe,se),w[1]),y(f(v(de,ee),-E[1]),f(v(ie,te),P[1]))),-C[2]))),O[3])),y(f(y(y(f(y(f(v(he,Se),P[1]),y(f(v(Oe,ke),-C[1]),f(v(fe,ge),O[1]))),w[2]),f(y(f(v(he,Se),w[1]),y(f(v(Me,J),-C[1]),f(v(oe,Q),O[1]))),-P[2])),y(f(y(f(v(Oe,ke),w[1]),y(f(v(Me,J),-P[1]),f(v(de,ee),O[1]))),C[2]),f(y(f(v(fe,ge),w[1]),y(f(v(oe,Q),-P[1]),f(v(de,ee),C[1]))),-O[2]))),S[3]),f(y(y(f(y(f(v(he,Se),P[1]),y(f(v(Oe,ke),-C[1]),f(v(fe,ge),O[1]))),S[2]),f(y(f(v(he,Se),S[1]),y(f(v(we,F),-C[1]),f(v(me,W),O[1]))),-P[2])),y(f(y(f(v(Oe,ke),S[1]),y(f(v(we,F),-P[1]),f(v(ye,N),O[1]))),C[2]),f(y(f(v(fe,ge),S[1]),y(f(v(me,W),-P[1]),f(v(ye,N),C[1]))),-O[2]))),-w[3])))),y(y(y(f(y(y(f(y(f(v(he,Se),w[1]),y(f(v(Me,J),-C[1]),f(v(oe,Q),O[1]))),S[2]),f(y(f(v(he,Se),S[1]),y(f(v(we,F),-C[1]),f(v(me,W),O[1]))),-w[2])),y(f(y(f(v(Me,J),S[1]),y(f(v(we,F),-w[1]),f(v(q,U),O[1]))),C[2]),f(y(f(v(oe,Q),S[1]),y(f(v(me,W),-w[1]),f(v(q,U),C[1]))),-O[2]))),P[3]),f(y(y(f(y(f(v(Oe,ke),w[1]),y(f(v(Me,J),-P[1]),f(v(de,ee),O[1]))),S[2]),f(y(f(v(Oe,ke),S[1]),y(f(v(we,F),-P[1]),f(v(ye,N),O[1]))),-w[2])),y(f(y(f(v(Me,J),S[1]),y(f(v(we,F),-w[1]),f(v(q,U),O[1]))),P[2]),f(y(f(v(de,ee),S[1]),y(f(v(ye,N),-w[1]),f(v(q,U),P[1]))),-O[2]))),-C[3])),y(f(y(y(f(y(f(v(fe,ge),w[1]),y(f(v(oe,Q),-P[1]),f(v(de,ee),C[1]))),S[2]),f(y(f(v(fe,ge),S[1]),y(f(v(me,W),-P[1]),f(v(ye,N),C[1]))),-w[2])),y(f(y(f(v(oe,Q),S[1]),y(f(v(me,W),-w[1]),f(v(q,U),C[1]))),P[2]),f(y(f(v(de,ee),S[1]),y(f(v(ye,N),-w[1]),f(v(q,U),P[1]))),-C[2]))),O[3]),f(y(y(f(y(f(v(Oe,ke),E[1]),y(f(v(Ie,ue),-P[1]),f(v(pe,se),O[1]))),w[2]),f(y(f(v(Oe,ke),w[1]),y(f(v(Me,J),-P[1]),f(v(de,ee),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),w[1]),y(f(v(Me,J),-E[1]),f(v(ie,te),O[1]))),P[2]),f(y(f(v(pe,se),w[1]),y(f(v(de,ee),-E[1]),f(v(ie,te),P[1]))),-O[2]))),S[3]))),y(y(f(y(y(f(y(f(v(Oe,ke),E[1]),y(f(v(Ie,ue),-P[1]),f(v(pe,se),O[1]))),S[2]),f(y(f(v(Oe,ke),S[1]),y(f(v(we,F),-P[1]),f(v(ye,N),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),S[1]),y(f(v(we,F),-E[1]),f(v(Y,D),O[1]))),P[2]),f(y(f(v(pe,se),S[1]),y(f(v(ye,N),-E[1]),f(v(Y,D),P[1]))),-O[2]))),-w[3]),f(y(y(f(y(f(v(Oe,ke),w[1]),y(f(v(Me,J),-P[1]),f(v(de,ee),O[1]))),S[2]),f(y(f(v(Oe,ke),S[1]),y(f(v(we,F),-P[1]),f(v(ye,N),O[1]))),-w[2])),y(f(y(f(v(Me,J),S[1]),y(f(v(we,F),-w[1]),f(v(q,U),O[1]))),P[2]),f(y(f(v(de,ee),S[1]),y(f(v(ye,N),-w[1]),f(v(q,U),P[1]))),-O[2]))),E[3])),y(f(y(y(f(y(f(v(Ie,ue),w[1]),y(f(v(Me,J),-E[1]),f(v(ie,te),O[1]))),S[2]),f(y(f(v(Ie,ue),S[1]),y(f(v(we,F),-E[1]),f(v(Y,D),O[1]))),-w[2])),y(f(y(f(v(Me,J),S[1]),y(f(v(we,F),-w[1]),f(v(q,U),O[1]))),E[2]),f(y(f(v(ie,te),S[1]),y(f(v(Y,D),-w[1]),f(v(q,U),E[1]))),-O[2]))),-P[3]),f(y(y(f(y(f(v(pe,se),w[1]),y(f(v(de,ee),-E[1]),f(v(ie,te),P[1]))),S[2]),f(y(f(v(pe,se),S[1]),y(f(v(ye,N),-E[1]),f(v(Y,D),P[1]))),-w[2])),y(f(y(f(v(de,ee),S[1]),y(f(v(ye,N),-w[1]),f(v(q,U),P[1]))),E[2]),f(y(f(v(ie,te),S[1]),y(f(v(Y,D),-w[1]),f(v(q,U),E[1]))),-P[2]))),O[3]))))),Ae=y(y(y(f(y(y(f(y(f(v(he,Se),P[1]),y(f(v(Oe,ke),-C[1]),f(v(fe,ge),O[1]))),E[2]),f(y(f(v(he,Se),E[1]),y(f(v(Ie,ue),-C[1]),f(v(re,ae),O[1]))),-P[2])),y(f(y(f(v(Oe,ke),E[1]),y(f(v(Ie,ue),-P[1]),f(v(pe,se),O[1]))),C[2]),f(y(f(v(fe,ge),E[1]),y(f(v(re,ae),-P[1]),f(v(pe,se),C[1]))),-O[2]))),S[3]),y(f(y(y(f(y(f(v(he,Se),P[1]),y(f(v(Oe,ke),-C[1]),f(v(fe,ge),O[1]))),S[2]),f(y(f(v(he,Se),S[1]),y(f(v(we,F),-C[1]),f(v(me,W),O[1]))),-P[2])),y(f(y(f(v(Oe,ke),S[1]),y(f(v(we,F),-P[1]),f(v(ye,N),O[1]))),C[2]),f(y(f(v(fe,ge),S[1]),y(f(v(me,W),-P[1]),f(v(ye,N),C[1]))),-O[2]))),-E[3]),f(y(y(f(y(f(v(he,Se),E[1]),y(f(v(Ie,ue),-C[1]),f(v(re,ae),O[1]))),S[2]),f(y(f(v(he,Se),S[1]),y(f(v(we,F),-C[1]),f(v(me,W),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),S[1]),y(f(v(we,F),-E[1]),f(v(Y,D),O[1]))),C[2]),f(y(f(v(re,ae),S[1]),y(f(v(me,W),-E[1]),f(v(Y,D),C[1]))),-O[2]))),P[3]))),y(y(f(y(y(f(y(f(v(Oe,ke),E[1]),y(f(v(Ie,ue),-P[1]),f(v(pe,se),O[1]))),S[2]),f(y(f(v(Oe,ke),S[1]),y(f(v(we,F),-P[1]),f(v(ye,N),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),S[1]),y(f(v(we,F),-E[1]),f(v(Y,D),O[1]))),P[2]),f(y(f(v(pe,se),S[1]),y(f(v(ye,N),-E[1]),f(v(Y,D),P[1]))),-O[2]))),-C[3]),f(y(y(f(y(f(v(fe,ge),E[1]),y(f(v(re,ae),-P[1]),f(v(pe,se),C[1]))),S[2]),f(y(f(v(fe,ge),S[1]),y(f(v(me,W),-P[1]),f(v(ye,N),C[1]))),-E[2])),y(f(y(f(v(re,ae),S[1]),y(f(v(me,W),-E[1]),f(v(Y,D),C[1]))),P[2]),f(y(f(v(pe,se),S[1]),y(f(v(ye,N),-E[1]),f(v(Y,D),P[1]))),-C[2]))),O[3])),y(f(y(y(f(y(f(v(he,Se),E[1]),y(f(v(Ie,ue),-C[1]),f(v(re,ae),O[1]))),w[2]),f(y(f(v(he,Se),w[1]),y(f(v(Me,J),-C[1]),f(v(oe,Q),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),w[1]),y(f(v(Me,J),-E[1]),f(v(ie,te),O[1]))),C[2]),f(y(f(v(re,ae),w[1]),y(f(v(oe,Q),-E[1]),f(v(ie,te),C[1]))),-O[2]))),S[3]),f(y(y(f(y(f(v(he,Se),E[1]),y(f(v(Ie,ue),-C[1]),f(v(re,ae),O[1]))),S[2]),f(y(f(v(he,Se),S[1]),y(f(v(we,F),-C[1]),f(v(me,W),O[1]))),-E[2])),y(f(y(f(v(Ie,ue),S[1]),y(f(v(we,F),-E[1]),f(v(Y,D),O[1]))),C[2]),f(y(f(v(re,ae),S[1]),y(f(v(me,W),-E[1]),f(v(Y,D),C[1]))),-O[2]))),-w[3])))),y(y(y(f(y(y(f(y(f(v(he,Se),w[1]),y(f(v(Me,J),-C[1]),f(v(oe,Q),O[1]))),S[2]),f(y(f(v(he,Se),S[1]),y(f(v(we,F),-C[1]),f(v(me,W),O[1]))),-w[2])),y(f(y(f(v(Me,J),S[1]),y(f(v(we,F),-w[1]),f(v(q,U),O[1]))),C[2]),f(y(f(v(oe,Q),S[1]),y(f(v(me,W),-w[1]),f(v(q,U),C[1]))),-O[2]))),E[3]),f(y(y(f(y(f(v(Ie,ue),w[1]),y(f(v(Me,J),-E[1]),f(v(ie,te),O[1]))),S[2]),f(y(f(v(Ie,ue),S[1]),y(f(v(we,F),-E[1]),f(v(Y,D),O[1]))),-w[2])),y(f(y(f(v(Me,J),S[1]),y(f(v(we,F),-w[1]),f(v(q,U),O[1]))),E[2]),f(y(f(v(ie,te),S[1]),y(f(v(Y,D),-w[1]),f(v(q,U),E[1]))),-O[2]))),-C[3])),y(f(y(y(f(y(f(v(re,ae),w[1]),y(f(v(oe,Q),-E[1]),f(v(ie,te),C[1]))),S[2]),f(y(f(v(re,ae),S[1]),y(f(v(me,W),-E[1]),f(v(Y,D),C[1]))),-w[2])),y(f(y(f(v(oe,Q),S[1]),y(f(v(me,W),-w[1]),f(v(q,U),C[1]))),E[2]),f(y(f(v(ie,te),S[1]),y(f(v(Y,D),-w[1]),f(v(q,U),E[1]))),-C[2]))),O[3]),f(y(y(f(y(f(v(fe,ge),E[1]),y(f(v(re,ae),-P[1]),f(v(pe,se),C[1]))),w[2]),f(y(f(v(fe,ge),w[1]),y(f(v(oe,Q),-P[1]),f(v(de,ee),C[1]))),-E[2])),y(f(y(f(v(re,ae),w[1]),y(f(v(oe,Q),-E[1]),f(v(ie,te),C[1]))),P[2]),f(y(f(v(pe,se),w[1]),y(f(v(de,ee),-E[1]),f(v(ie,te),P[1]))),-C[2]))),S[3]))),y(y(f(y(y(f(y(f(v(fe,ge),E[1]),y(f(v(re,ae),-P[1]),f(v(pe,se),C[1]))),S[2]),f(y(f(v(fe,ge),S[1]),y(f(v(me,W),-P[1]),f(v(ye,N),C[1]))),-E[2])),y(f(y(f(v(re,ae),S[1]),y(f(v(me,W),-E[1]),f(v(Y,D),C[1]))),P[2]),f(y(f(v(pe,se),S[1]),y(f(v(ye,N),-E[1]),f(v(Y,D),P[1]))),-C[2]))),-w[3]),f(y(y(f(y(f(v(fe,ge),w[1]),y(f(v(oe,Q),-P[1]),f(v(de,ee),C[1]))),S[2]),f(y(f(v(fe,ge),S[1]),y(f(v(me,W),-P[1]),f(v(ye,N),C[1]))),-w[2])),y(f(y(f(v(oe,Q),S[1]),y(f(v(me,W),-w[1]),f(v(q,U),C[1]))),P[2]),f(y(f(v(de,ee),S[1]),y(f(v(ye,N),-w[1]),f(v(q,U),P[1]))),-C[2]))),E[3])),y(f(y(y(f(y(f(v(re,ae),w[1]),y(f(v(oe,Q),-E[1]),f(v(ie,te),C[1]))),S[2]),f(y(f(v(re,ae),S[1]),y(f(v(me,W),-E[1]),f(v(Y,D),C[1]))),-w[2])),y(f(y(f(v(oe,Q),S[1]),y(f(v(me,W),-w[1]),f(v(q,U),C[1]))),E[2]),f(y(f(v(ie,te),S[1]),y(f(v(Y,D),-w[1]),f(v(q,U),E[1]))),-C[2]))),-P[3]),f(y(y(f(y(f(v(pe,se),w[1]),y(f(v(de,ee),-E[1]),f(v(ie,te),P[1]))),S[2]),f(y(f(v(pe,se),S[1]),y(f(v(ye,N),-E[1]),f(v(Y,D),P[1]))),-w[2])),y(f(y(f(v(de,ee),S[1]),y(f(v(ye,N),-w[1]),f(v(q,U),P[1]))),E[2]),f(y(f(v(ie,te),S[1]),y(f(v(Y,D),-w[1]),f(v(q,U),E[1]))),-P[2]))),C[3]))))),De=v(_e,Ae);return De[De.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function m(y){var v=d[y.length];return v||(v=d[y.length]=l(y.length)),v.apply(void 0,y)}function g(y,v,_,f,S,w,E,P){return function(C,O,R,U,D,N){switch(arguments.length){case 0:case 1:return 0;case 2:return f(C,O);case 3:return S(C,O,R);case 4:return w(C,O,R,U);case 5:return E(C,O,R,U,D);case 6:return P(C,O,R,U,D,N)}for(var W=new Array(arguments.length),F=0;F<arguments.length;++F)W[F]=arguments[F];return y(W)}}(function(){for(;d.length<=6;)d.push(l(d.length));p.exports=g.apply(void 0,[m].concat(d));for(var y=0;y<=6;++y)p.exports[y]=d[y]})()},727:function(p,s,t){"use strict";var i=t(2962);function n(d){return(d===2?r:d===3?a:d===4?l:d===5?c:h)(d<6?i[d]:i)}function r(d){return function(m,g){return[d([[+g[0],+m[0][1]],[+g[1],+m[1][1]]]),d([[+m[0][0],+g[0]],[+m[1][0],+g[1]]]),d(m)]}}function a(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2]],[+g[1],+m[1][1],+m[1][2]],[+g[2],+m[2][1],+m[2][2]]]),d([[+m[0][0],+g[0],+m[0][2]],[+m[1][0],+g[1],+m[1][2]],[+m[2][0],+g[2],+m[2][2]]]),d([[+m[0][0],+m[0][1],+g[0]],[+m[1][0],+m[1][1],+g[1]],[+m[2][0],+m[2][1],+g[2]]]),d(m)]}}function l(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3]],[+g[1],+m[1][1],+m[1][2],+m[1][3]],[+g[2],+m[2][1],+m[2][2],+m[2][3]],[+g[3],+m[3][1],+m[3][2],+m[3][3]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3]],[+m[1][0],+g[1],+m[1][2],+m[1][3]],[+m[2][0],+g[2],+m[2][2],+m[2][3]],[+m[3][0],+g[3],+m[3][2],+m[3][3]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3]],[+m[1][0],+m[1][1],+g[1],+m[1][3]],[+m[2][0],+m[2][1],+g[2],+m[2][3]],[+m[3][0],+m[3][1],+g[3],+m[3][3]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+g[3]]]),d(m)]}}function c(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3],+m[0][4]],[+g[1],+m[1][1],+m[1][2],+m[1][3],+m[1][4]],[+g[2],+m[2][1],+m[2][2],+m[2][3],+m[2][4]],[+g[3],+m[3][1],+m[3][2],+m[3][3],+m[3][4]],[+g[4],+m[4][1],+m[4][2],+m[4][3],+m[4][4]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3],+m[0][4]],[+m[1][0],+g[1],+m[1][2],+m[1][3],+m[1][4]],[+m[2][0],+g[2],+m[2][2],+m[2][3],+m[2][4]],[+m[3][0],+g[3],+m[3][2],+m[3][3],+m[3][4]],[+m[4][0],+g[4],+m[4][2],+m[4][3],+m[4][4]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3],+m[0][4]],[+m[1][0],+m[1][1],+g[1],+m[1][3],+m[1][4]],[+m[2][0],+m[2][1],+g[2],+m[2][3],+m[2][4]],[+m[3][0],+m[3][1],+g[3],+m[3][3],+m[3][4]],[+m[4][0],+m[4][1],+g[4],+m[4][3],+m[4][4]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0],+m[0][4]],[+m[1][0],+m[1][1],+m[1][2],+g[1],+m[1][4]],[+m[2][0],+m[2][1],+m[2][2],+g[2],+m[2][4]],[+m[3][0],+m[3][1],+m[3][2],+g[3],+m[3][4]],[+m[4][0],+m[4][1],+m[4][2],+g[4],+m[4][4]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+g[3]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+g[4]]]),d(m)]}}function h(d){return function(m,g){return[d([[+g[0],+m[0][1],+m[0][2],+m[0][3],+m[0][4],+m[0][5]],[+g[1],+m[1][1],+m[1][2],+m[1][3],+m[1][4],+m[1][5]],[+g[2],+m[2][1],+m[2][2],+m[2][3],+m[2][4],+m[2][5]],[+g[3],+m[3][1],+m[3][2],+m[3][3],+m[3][4],+m[3][5]],[+g[4],+m[4][1],+m[4][2],+m[4][3],+m[4][4],+m[4][5]],[+g[5],+m[5][1],+m[5][2],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+g[0],+m[0][2],+m[0][3],+m[0][4],+m[0][5]],[+m[1][0],+g[1],+m[1][2],+m[1][3],+m[1][4],+m[1][5]],[+m[2][0],+g[2],+m[2][2],+m[2][3],+m[2][4],+m[2][5]],[+m[3][0],+g[3],+m[3][2],+m[3][3],+m[3][4],+m[3][5]],[+m[4][0],+g[4],+m[4][2],+m[4][3],+m[4][4],+m[4][5]],[+m[5][0],+g[5],+m[5][2],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+g[0],+m[0][3],+m[0][4],+m[0][5]],[+m[1][0],+m[1][1],+g[1],+m[1][3],+m[1][4],+m[1][5]],[+m[2][0],+m[2][1],+g[2],+m[2][3],+m[2][4],+m[2][5]],[+m[3][0],+m[3][1],+g[3],+m[3][3],+m[3][4],+m[3][5]],[+m[4][0],+m[4][1],+g[4],+m[4][3],+m[4][4],+m[4][5]],[+m[5][0],+m[5][1],+g[5],+m[5][3],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+g[0],+m[0][4],+m[0][5]],[+m[1][0],+m[1][1],+m[1][2],+g[1],+m[1][4],+m[1][5]],[+m[2][0],+m[2][1],+m[2][2],+g[2],+m[2][4],+m[2][5]],[+m[3][0],+m[3][1],+m[3][2],+g[3],+m[3][4],+m[3][5]],[+m[4][0],+m[4][1],+m[4][2],+g[4],+m[4][4],+m[4][5]],[+m[5][0],+m[5][1],+m[5][2],+g[5],+m[5][4],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+g[0],+m[0][5]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+g[1],+m[1][5]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+g[2],+m[2][5]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+g[3],+m[3][5]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+g[4],+m[4][5]],[+m[5][0],+m[5][1],+m[5][2],+m[5][3],+g[5],+m[5][5]]]),d([[+m[0][0],+m[0][1],+m[0][2],+m[0][3],+m[0][4],+g[0]],[+m[1][0],+m[1][1],+m[1][2],+m[1][3],+m[1][4],+g[1]],[+m[2][0],+m[2][1],+m[2][2],+m[2][3],+m[2][4],+g[2]],[+m[3][0],+m[3][1],+m[3][2],+m[3][3],+m[3][4],+g[3]],[+m[4][0],+m[4][1],+m[4][2],+m[4][3],+m[4][4],+g[4]],[+m[5][0],+m[5][1],+m[5][2],+m[5][3],+m[5][4],+g[5]]]),d(m)]}}var u=[function(){return[[0]]},function(d,m){return[[m[0]],[d[0][0]]]}];function x(d,m,g,y,v,_,f,S){return function(w,E){switch(w.length){case 0:return d(w,E);case 1:return m(w,E);case 2:return g(w,E);case 3:return y(w,E);case 4:return v(w,E);case 5:return _(w,E)}var P=f[w.length];return P||(P=f[w.length]=S(w.length)),P(w,E)}}(function(){for(;u.length<6;)u.push(n(u.length));p.exports=x.apply(void 0,u.concat([u,n]));for(var d=0;d<6;++d)p.exports[d]=u[d]})()},3250:function(p,s,t){"use strict";var i=t(5250),n=t(8210),r=t(3012),a=t(8545);function l(v,_,f,S){return function(w,E,P){var C=v(v(_(E[1],P[0]),_(-P[1],E[0])),v(_(w[1],E[0]),_(-E[1],w[0]))),O=v(_(w[1],P[0]),_(-P[1],w[0])),R=S(C,O);return R[R.length-1]}}function c(v,_,f,S){return function(w,E,P,C){var O=v(v(f(v(_(P[1],C[0]),_(-C[1],P[0])),E[2]),v(f(v(_(E[1],C[0]),_(-C[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),C[2]))),v(f(v(_(E[1],C[0]),_(-C[1],E[0])),w[2]),v(f(v(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),C[2])))),R=v(v(f(v(_(P[1],C[0]),_(-C[1],P[0])),w[2]),v(f(v(_(w[1],C[0]),_(-C[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),C[2]))),v(f(v(_(E[1],P[0]),_(-P[1],E[0])),w[2]),v(f(v(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),P[2])))),U=S(O,R);return U[U.length-1]}}function h(v,_,f,S){return function(w,E,P,C,O){var R=v(v(v(f(v(f(v(_(C[1],O[0]),_(-O[1],C[0])),P[2]),v(f(v(_(P[1],O[0]),_(-O[1],P[0])),-C[2]),f(v(_(P[1],C[0]),_(-C[1],P[0])),O[2]))),E[3]),v(f(v(f(v(_(C[1],O[0]),_(-O[1],C[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-C[2]),f(v(_(E[1],C[0]),_(-C[1],E[0])),O[2]))),-P[3]),f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),O[2]))),C[3]))),v(f(v(f(v(_(P[1],C[0]),_(-C[1],P[0])),E[2]),v(f(v(_(E[1],C[0]),_(-C[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),C[2]))),-O[3]),v(f(v(f(v(_(C[1],O[0]),_(-O[1],C[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-C[2]),f(v(_(E[1],C[0]),_(-C[1],E[0])),O[2]))),w[3]),f(v(f(v(_(C[1],O[0]),_(-O[1],C[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-C[2]),f(v(_(w[1],C[0]),_(-C[1],w[0])),O[2]))),-E[3])))),v(v(f(v(f(v(_(E[1],O[0]),_(-O[1],E[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),C[3]),v(f(v(f(v(_(E[1],C[0]),_(-C[1],E[0])),w[2]),v(f(v(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),-O[3]),f(v(f(v(_(P[1],C[0]),_(-C[1],P[0])),E[2]),v(f(v(_(E[1],C[0]),_(-C[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),C[2]))),w[3]))),v(f(v(f(v(_(P[1],C[0]),_(-C[1],P[0])),w[2]),v(f(v(_(w[1],C[0]),_(-C[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),C[2]))),-E[3]),v(f(v(f(v(_(E[1],C[0]),_(-C[1],E[0])),w[2]),v(f(v(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),P[3]),f(v(f(v(_(E[1],P[0]),_(-P[1],E[0])),w[2]),v(f(v(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),-C[3]))))),U=v(v(v(f(v(f(v(_(C[1],O[0]),_(-O[1],C[0])),P[2]),v(f(v(_(P[1],O[0]),_(-O[1],P[0])),-C[2]),f(v(_(P[1],C[0]),_(-C[1],P[0])),O[2]))),w[3]),f(v(f(v(_(C[1],O[0]),_(-O[1],C[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-C[2]),f(v(_(w[1],C[0]),_(-C[1],w[0])),O[2]))),-P[3])),v(f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),O[2]))),C[3]),f(v(f(v(_(P[1],C[0]),_(-C[1],P[0])),w[2]),v(f(v(_(w[1],C[0]),_(-C[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),C[2]))),-O[3]))),v(v(f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),E[2]),v(f(v(_(E[1],O[0]),_(-O[1],E[0])),-P[2]),f(v(_(E[1],P[0]),_(-P[1],E[0])),O[2]))),w[3]),f(v(f(v(_(P[1],O[0]),_(-O[1],P[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-P[2]),f(v(_(w[1],P[0]),_(-P[1],w[0])),O[2]))),-E[3])),v(f(v(f(v(_(E[1],O[0]),_(-O[1],E[0])),w[2]),v(f(v(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),P[3]),f(v(f(v(_(E[1],P[0]),_(-P[1],E[0])),w[2]),v(f(v(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(v(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),-O[3])))),D=S(R,U);return D[D.length-1]}}function u(v){return(v===3?l:v===4?c:h)(n,i,r,a)}var x=u(3),d=u(4),m=[function(){return 0},function(){return 0},function(v,_){return _[0]-v[0]},function(v,_,f){var S,w=(v[1]-f[1])*(_[0]-f[0]),E=(v[0]-f[0])*(_[1]-f[1]),P=w-E;if(w>0){if(E<=0)return P;S=w+E}else{if(!(w<0)||E>=0)return P;S=-(w+E)}var C=33306690738754716e-32*S;return P>=C||P<=-C?P:x(v,_,f)},function(v,_,f,S){var w=v[0]-S[0],E=_[0]-S[0],P=f[0]-S[0],C=v[1]-S[1],O=_[1]-S[1],R=f[1]-S[1],U=v[2]-S[2],D=_[2]-S[2],N=f[2]-S[2],W=E*R,F=P*O,j=P*C,q=w*R,te=w*O,ee=E*C,Q=U*(W-F)+D*(j-q)+N*(te-ee),J=7771561172376103e-31*((Math.abs(W)+Math.abs(F))*Math.abs(U)+(Math.abs(j)+Math.abs(q))*Math.abs(D)+(Math.abs(te)+Math.abs(ee))*Math.abs(N));return Q>J||-Q>J?Q:d(v,_,f,S)}];function g(v){var _=m[v.length];return _||(_=m[v.length]=u(v.length)),_.apply(void 0,v)}function y(v,_,f,S,w,E,P){return function(C,O,R,U,D){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,O);case 3:return w(C,O,R);case 4:return E(C,O,R,U);case 5:return P(C,O,R,U,D)}for(var N=new Array(arguments.length),W=0;W<arguments.length;++W)N[W]=arguments[W];return v(N)}}(function(){for(;m.length<=5;)m.push(u(m.length));p.exports=y.apply(void 0,[g].concat(m));for(var v=0;v<=5;++v)p.exports[v]=m[v]})()},5382:function(p,s,t){"use strict";var i=t(8210),n=t(3012);p.exports=function(r,a){if(r.length===1)return n(a,r[0]);if(a.length===1)return n(r,a[0]);if(r.length===0||a.length===0)return[0];var l=[0];if(r.length<a.length)for(var c=0;c<r.length;++c)l=i(l,n(a,r[c]));else for(c=0;c<a.length;++c)l=i(l,n(r,a[c]));return l}},3012:function(p,s,t){"use strict";var i=t(5250),n=t(9362);p.exports=function(r,a){var l=r.length;if(l===1){var c=i(r[0],a);return c[0]?c:[c[1]]}var h=new Array(2*l),u=[.1,.1],x=[.1,.1],d=0;i(r[0],a,u),u[0]&&(h[d++]=u[0]);for(var m=1;m<l;++m){i(r[m],a,x);var g=u[1];n(g,x[0],u),u[0]&&(h[d++]=u[0]);var y=x[1],v=u[1],_=y+v,f=v-(_-y);u[1]=_,f&&(h[d++]=f)}return u[1]&&(h[d++]=u[1]),d===0&&(h[d++]=0),h.length=d,h}},1125:function(p,s,t){"use strict";p.exports=function(n,r,a,l){var c=i(n,a,l),h=i(r,a,l);if(c>0&&h>0||c<0&&h<0)return!1;var u=i(a,n,r),x=i(l,n,r);return!(u>0&&x>0||u<0&&x<0)&&(c!==0||h!==0||u!==0||x!==0||function(d,m,g,y){for(var v=0;v<2;++v){var _=d[v],f=m[v],S=Math.min(_,f),w=Math.max(_,f),E=g[v],P=y[v],C=Math.min(E,P);if(Math.max(E,P)<S||w<C)return!1}return!0}(n,r,a,l))};var i=t(3250)[3]},8545:function(p){"use strict";p.exports=function(s,t){var i=0|s.length,n=0|t.length;if(i===1&&n===1)return function(C,O){var R=C+O,U=R-C,D=C-(R-U)+(O-U);return D?[D,R]:[R]}(s[0],-t[0]);var r,a,l=new Array(i+n),c=0,h=0,u=0,x=Math.abs,d=s[h],m=x(d),g=-t[u],y=x(g);m<y?(a=d,(h+=1)<i&&(m=x(d=s[h]))):(a=g,(u+=1)<n&&(y=x(g=-t[u]))),h<i&&m<y||u>=n?(r=d,(h+=1)<i&&(m=x(d=s[h]))):(r=g,(u+=1)<n&&(y=x(g=-t[u])));for(var v,_,f=r+a,S=f-r,w=a-S,E=w,P=f;h<i&&u<n;)m<y?(r=d,(h+=1)<i&&(m=x(d=s[h]))):(r=g,(u+=1)<n&&(y=x(g=-t[u]))),(w=(a=E)-(S=(f=r+a)-r))&&(l[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v;for(;h<i;)(w=(a=E)-(S=(f=(r=d)+a)-r))&&(l[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(h+=1)<i&&(d=s[h]);for(;u<n;)(w=(a=E)-(S=(f=(r=g)+a)-r))&&(l[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(u+=1)<n&&(g=-t[u]);return E&&(l[c++]=E),P&&(l[c++]=P),c||(l[c++]=0),l.length=c,l}},8210:function(p){"use strict";p.exports=function(s,t){var i=0|s.length,n=0|t.length;if(i===1&&n===1)return function(C,O){var R=C+O,U=R-C,D=C-(R-U)+(O-U);return D?[D,R]:[R]}(s[0],t[0]);var r,a,l=new Array(i+n),c=0,h=0,u=0,x=Math.abs,d=s[h],m=x(d),g=t[u],y=x(g);m<y?(a=d,(h+=1)<i&&(m=x(d=s[h]))):(a=g,(u+=1)<n&&(y=x(g=t[u]))),h<i&&m<y||u>=n?(r=d,(h+=1)<i&&(m=x(d=s[h]))):(r=g,(u+=1)<n&&(y=x(g=t[u])));for(var v,_,f=r+a,S=f-r,w=a-S,E=w,P=f;h<i&&u<n;)m<y?(r=d,(h+=1)<i&&(m=x(d=s[h]))):(r=g,(u+=1)<n&&(y=x(g=t[u]))),(w=(a=E)-(S=(f=r+a)-r))&&(l[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v;for(;h<i;)(w=(a=E)-(S=(f=(r=d)+a)-r))&&(l[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(h+=1)<i&&(d=s[h]);for(;u<n;)(w=(a=E)-(S=(f=(r=g)+a)-r))&&(l[c++]=w),E=P-((v=P+f)-(_=v-P))+(f-_),P=v,(u+=1)<n&&(g=t[u]);return E&&(l[c++]=E),P&&(l[c++]=P),c||(l[c++]=0),l.length=c,l}},9127:function(p,s,t){"use strict";p.exports=function(r){return n(i(r))};var i=t(6204),n=t(5771)},7765:function(p,s,t){"use strict";p.exports=function(l,c,h,u){if(h=h||0,u===void 0&&(u=function(f){for(var S=f.length,w=0,E=0;E<S;++E)w=0|Math.max(w,f[E].length);return w-1}(l)),l.length===0||u<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(f,S){for(var w=f.length,E=n.mallocUint8(w),P=0;P<w;++P)E[P]=f[P]<S|0;return E}(c,+h),d=function(f,S){for(var w=f.length,E=S*(S+1)/2*w|0,P=n.mallocUint32(2*E),C=0,O=0;O<w;++O)for(var R=f[O],U=(S=R.length,0);U<S;++U)for(var D=0;D<U;++D){var N=R[D],W=R[U];P[C++]=0|Math.min(N,W),P[C++]=0|Math.max(N,W)}r(i(P,[C/2|0,2]));var F=2;for(O=2;O<C;O+=2)P[O-2]===P[O]&&P[O-1]===P[O+1]||(P[F++]=P[O],P[F++]=P[O+1]);return i(P,[F/2|0,2])}(l,u),m=function(f,S,w,E){for(var P=f.data,C=f.shape[0],O=n.mallocDouble(C),R=0,U=0;U<C;++U){var D=P[2*U],N=P[2*U+1];if(w[D]!==w[N]){var W=S[D],F=S[N];P[2*R]=D,P[2*R+1]=N,O[R++]=(F-E)/(F-W)}}return f.shape[0]=R,i(O,[R])}(d,c,x,+h),g=function(f,S){var w=n.mallocInt32(2*S),E=f.shape[0],P=f.data;w[0]=0;for(var C=0,O=0;O<E;++O){var R=P[2*O];if(R!==C){for(w[2*C+1]=O;++C<R;)w[2*C]=O,w[2*C+1]=O;w[2*C]=O}}for(w[2*C+1]=E;++C<S;)w[2*C]=w[2*C+1]=E;return w}(d,0|c.length),y=a(u)(l,d.data,g,x),v=function(f){for(var S=0|f.shape[0],w=f.data,E=new Array(S),P=0;P<S;++P)E[P]=[w[2*P],w[2*P+1]];return E}(d),_=[].slice.call(m.data,0,m.shape[0]);return n.free(x),n.free(d.data),n.free(m.data),n.free(g),{cells:y,vertexIds:v,vertexWeights:_}};var i=t(9618),n=t(1888),r=t(446),a=t(1570)},1570:function(p){"use strict";p.exports=function(t){return s[t]()};var s=[function(){return function(t,i,n,r){for(var a=t.length,l=0;l<a;++l)t[l].length;return[]}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),c=0|Math.max(r,a),h=i[2*l],u=i[2*l+1];h<u;){var x=h+u>>1,d=n[2*x+1];if(d===c)return x;c<d?u=x:h=x+1}return h}return function(i,n,r,a){for(var l=i.length,c=[],h=0;h<l;++h){var u=i[h];if(u.length===2){var x=(a[u[0]]<<0)+(a[u[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:c.push([t(r,n,u[0],u[1])]);break;case 2:c.push([t(r,n,u[1],u[0])])}}}return c}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),c=0|Math.max(r,a),h=i[2*l],u=i[2*l+1];h<u;){var x=h+u>>1,d=n[2*x+1];if(d===c)return x;c<d?u=x:h=x+1}return h}return function(i,n,r,a){for(var l=i.length,c=[],h=0;h<l;++h){var u=i[h],x=u.length;if(x===3){if((d=(a[u[0]]<<0)+(a[u[1]]<<1)+(a[u[2]]<<2))==0||d===7)continue;switch(d){case 0:case 7:break;case 1:c.push([t(r,n,u[0],u[2]),t(r,n,u[0],u[1])]);break;case 2:c.push([t(r,n,u[1],u[0]),t(r,n,u[1],u[2])]);break;case 3:c.push([t(r,n,u[0],u[2]),t(r,n,u[1],u[2])]);break;case 4:c.push([t(r,n,u[2],u[1]),t(r,n,u[2],u[0])]);break;case 5:c.push([t(r,n,u[2],u[1]),t(r,n,u[0],u[1])]);break;case 6:c.push([t(r,n,u[1],u[0]),t(r,n,u[2],u[0])])}}else if(x===2){var d;if((d=(a[u[0]]<<0)+(a[u[1]]<<1))==0||d===3)continue;switch(d){case 0:case 3:break;case 1:c.push([t(r,n,u[0],u[1])]);break;case 2:c.push([t(r,n,u[1],u[0])])}}}return c}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),c=0|Math.max(r,a),h=i[2*l],u=i[2*l+1];h<u;){var x=h+u>>1,d=n[2*x+1];if(d===c)return x;c<d?u=x:h=x+1}return h}return function(i,n,r,a){for(var l=i.length,c=[],h=0;h<l;++h){var u=i[h],x=u.length;if(x===4){if((d=(a[u[0]]<<0)+(a[u[1]]<<1)+(a[u[2]]<<2)+(a[u[3]]<<3))==0||d===15)continue;switch(d){case 0:case 15:break;case 1:c.push([t(r,n,u[0],u[1]),t(r,n,u[0],u[2]),t(r,n,u[0],u[3])]);break;case 2:c.push([t(r,n,u[1],u[2]),t(r,n,u[1],u[0]),t(r,n,u[1],u[3])]);break;case 3:c.push([t(r,n,u[1],u[2]),t(r,n,u[0],u[2]),t(r,n,u[0],u[3])],[t(r,n,u[1],u[3]),t(r,n,u[1],u[2]),t(r,n,u[0],u[3])]);break;case 4:c.push([t(r,n,u[2],u[0]),t(r,n,u[2],u[1]),t(r,n,u[2],u[3])]);break;case 5:c.push([t(r,n,u[0],u[1]),t(r,n,u[2],u[1]),t(r,n,u[0],u[3])],[t(r,n,u[2],u[1]),t(r,n,u[2],u[3]),t(r,n,u[0],u[3])]);break;case 6:c.push([t(r,n,u[2],u[0]),t(r,n,u[1],u[0]),t(r,n,u[1],u[3])],[t(r,n,u[2],u[3]),t(r,n,u[2],u[0]),t(r,n,u[1],u[3])]);break;case 7:c.push([t(r,n,u[0],u[3]),t(r,n,u[1],u[3]),t(r,n,u[2],u[3])]);break;case 8:c.push([t(r,n,u[3],u[1]),t(r,n,u[3],u[0]),t(r,n,u[3],u[2])]);break;case 9:c.push([t(r,n,u[3],u[1]),t(r,n,u[0],u[1]),t(r,n,u[0],u[2])],[t(r,n,u[3],u[2]),t(r,n,u[3],u[1]),t(r,n,u[0],u[2])]);break;case 10:c.push([t(r,n,u[1],u[0]),t(r,n,u[3],u[0]),t(r,n,u[1],u[2])],[t(r,n,u[3],u[0]),t(r,n,u[3],u[2]),t(r,n,u[1],u[2])]);break;case 11:c.push([t(r,n,u[1],u[2]),t(r,n,u[0],u[2]),t(r,n,u[3],u[2])]);break;case 12:c.push([t(r,n,u[3],u[0]),t(r,n,u[2],u[0]),t(r,n,u[2],u[1])],[t(r,n,u[3],u[1]),t(r,n,u[3],u[0]),t(r,n,u[2],u[1])]);break;case 13:c.push([t(r,n,u[0],u[1]),t(r,n,u[2],u[1]),t(r,n,u[3],u[1])]);break;case 14:c.push([t(r,n,u[2],u[0]),t(r,n,u[1],u[0]),t(r,n,u[3],u[0])])}}else if(x===3){if((d=(a[u[0]]<<0)+(a[u[1]]<<1)+(a[u[2]]<<2))==0||d===7)continue;switch(d){case 0:case 7:break;case 1:c.push([t(r,n,u[0],u[2]),t(r,n,u[0],u[1])]);break;case 2:c.push([t(r,n,u[1],u[0]),t(r,n,u[1],u[2])]);break;case 3:c.push([t(r,n,u[0],u[2]),t(r,n,u[1],u[2])]);break;case 4:c.push([t(r,n,u[2],u[1]),t(r,n,u[2],u[0])]);break;case 5:c.push([t(r,n,u[2],u[1]),t(r,n,u[0],u[1])]);break;case 6:c.push([t(r,n,u[1],u[0]),t(r,n,u[2],u[0])])}}else if(x===2){var d;if((d=(a[u[0]]<<0)+(a[u[1]]<<1))==0||d===3)continue;switch(d){case 0:case 3:break;case 1:c.push([t(r,n,u[0],u[1])]);break;case 2:c.push([t(r,n,u[1],u[0])])}}}return c}}]},6803:function(p,s,t){"use strict";t(8828),t(1755);function i(n,r){var a=n.length,l=n.length-r.length,c=Math.min;if(l)return l;switch(a){case 0:return 0;case 1:return n[0]-r[0];case 2:return(x=n[0]+n[1]-r[0]-r[1])||c(n[0],n[1])-c(r[0],r[1]);case 3:var h=n[0]+n[1],u=r[0]+r[1];if(x=h+n[2]-(u+r[2]))return x;var x,d=c(n[0],n[1]),m=c(r[0],r[1]);return(x=c(d,n[2])-c(m,r[2]))||c(d+n[2],h)-c(m+r[2],u);default:var g=n.slice(0);g.sort();var y=r.slice(0);y.sort();for(var v=0;v<a;++v)if(l=g[v]-y[v])return l;return 0}}s.Fw=i},3105:function(p,s){"use strict";function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,a;return r=(n>65535)<<4,r|=a=((n>>>=r)>255)<<3,r|=a=((n>>>=a)>15)<<2,(r|=a=((n>>>=a)>3)<<1)|(n>>>=a)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var a=r,l=r,c=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--c;n[r]=l<<c&255}})(i),s.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,a){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},2014:function(p,s,t){"use strict";var i=t(3105),n=t(4623);function r(d,m){var g=d.length,y=d.length-m.length,v=Math.min;if(y)return y;switch(g){case 0:return 0;case 1:return d[0]-m[0];case 2:return(S=d[0]+d[1]-m[0]-m[1])||v(d[0],d[1])-v(m[0],m[1]);case 3:var _=d[0]+d[1],f=m[0]+m[1];if(S=_+d[2]-(f+m[2]))return S;var S,w=v(d[0],d[1]),E=v(m[0],m[1]);return(S=v(w,d[2])-v(E,m[2]))||v(w+d[2],_)-v(E+m[2],f);default:var P=d.slice(0);P.sort();var C=m.slice(0);C.sort();for(var O=0;O<g;++O)if(y=P[O]-C[O])return y;return 0}}function a(d,m){return r(d[0],m[0])}function l(d,m){if(m){for(var g=d.length,y=new Array(g),v=0;v<g;++v)y[v]=[d[v],m[v]];for(y.sort(a),v=0;v<g;++v)d[v]=y[v][0],m[v]=y[v][1];return d}return d.sort(r),d}function c(d){if(d.length===0)return[];for(var m=1,g=d.length,y=1;y<g;++y){var v=d[y];if(r(v,d[y-1])){if(y===m){m++;continue}d[m++]=v}}return d.length=m,d}function h(d,m){for(var g=0,y=d.length-1,v=-1;g<=y;){var _=g+y>>1,f=r(d[_],m);f<=0?(f===0&&(v=_),g=_+1):f>0&&(y=_-1)}return v}function u(d,m){for(var g=new Array(d.length),y=0,v=g.length;y<v;++y)g[y]=[];for(var _=[],f=(y=0,m.length);y<f;++y)for(var S=m[y],w=S.length,E=1,P=1<<w;E<P;++E){_.length=i.popCount(E);for(var C=0,O=0;O<w;++O)E&1<<O&&(_[C++]=S[O]);var R=h(d,_);if(!(R<0))for(;g[R++].push(y),!(R>=d.length||r(d[R],_)!==0););}return g}function x(d,m){if(m<0)return[];for(var g=[],y=(1<<m+1)-1,v=0;v<d.length;++v)for(var _=d[v],f=y;f<1<<_.length;f=i.nextCombination(f)){for(var S=new Array(m+1),w=0,E=0;E<_.length;++E)f&1<<E&&(S[w++]=_[E]);g.push(S)}return l(g)}s.dimension=function(d){for(var m=0,g=Math.max,y=0,v=d.length;y<v;++y)m=g(m,d[y].length);return m-1},s.countVertices=function(d){for(var m=-1,g=Math.max,y=0,v=d.length;y<v;++y)for(var _=d[y],f=0,S=_.length;f<S;++f)m=g(m,_[f]);return m+1},s.cloneCells=function(d){for(var m=new Array(d.length),g=0,y=d.length;g<y;++g)m[g]=d[g].slice(0);return m},s.compareCells=r,s.normalize=l,s.unique=c,s.findCell=h,s.incidence=u,s.dual=function(d,m){if(!m)return u(c(x(d,0)),d);for(var g=new Array(m),y=0;y<m;++y)g[y]=[];y=0;for(var v=d.length;y<v;++y)for(var _=d[y],f=0,S=_.length;f<S;++f)g[_[f]].push(y);return g},s.explode=function(d){for(var m=[],g=0,y=d.length;g<y;++g)for(var v=d[g],_=0|v.length,f=1,S=1<<_;f<S;++f){for(var w=[],E=0;E<_;++E)f>>>E&1&&w.push(v[E]);m.push(w)}return l(m)},s.skeleton=x,s.boundary=function(d){for(var m=[],g=0,y=d.length;g<y;++g)for(var v=d[g],_=0,f=v.length;_<f;++_){for(var S=new Array(v.length-1),w=0,E=0;w<f;++w)w!==_&&(S[E++]=v[w]);m.push(S)}return l(m)},s.connectedComponents=function(d,m){return m?function(g,y){for(var v=new n(y),_=0;_<g.length;++_)for(var f=g[_],S=0;S<f.length;++S)for(var w=S+1;w<f.length;++w)v.link(f[S],f[w]);var E=[],P=v.ranks;for(_=0;_<P.length;++_)P[_]=-1;for(_=0;_<g.length;++_){var C=v.find(g[_][0]);P[C]<0?(P[C]=E.length,E.push([g[_].slice(0)])):E[P[C]].push(g[_].slice(0))}return E}(d,m):function(g){for(var y=c(l(x(g,0))),v=new n(y.length),_=0;_<g.length;++_)for(var f=g[_],S=0;S<f.length;++S)for(var w=h(y,[f[S]]),E=S+1;E<f.length;++E)v.link(w,h(y,[f[E]]));var P=[],C=v.ranks;for(_=0;_<C.length;++_)C[_]=-1;for(_=0;_<g.length;++_){var O=v.find(h(y,[g[_][0]]));C[O]<0?(C[O]=P.length,P.push([g[_].slice(0)])):P[C[O]].push(g[_].slice(0))}return P}(d)}},4623:function(p){"use strict";function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}p.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var n=i[t];i[t]=i[n],t=n}return t},s.prototype.link=function(t,i){var n=this.find(t),r=this.find(i);if(n!==r){var a=this.ranks,l=this.roots,c=a[n],h=a[r];c<h?l[n]=r:h<c?l[r]=n:(l[r]=n,++a[n])}}},5878:function(p,s,t){"use strict";p.exports=function(r,a,l){for(var c=a.length,h=r.length,u=new Array(c),x=new Array(c),d=new Array(c),m=new Array(c),g=0;g<c;++g)u[g]=x[g]=-1,d[g]=1/0,m[g]=!1;for(g=0;g<h;++g){var y=r[g];if(y.length!==2)throw new Error("Input must be a graph");var v=y[1],_=y[0];x[_]!==-1?x[_]=-2:x[_]=v,u[v]!==-1?u[v]=-2:u[v]=_}function f(ee){if(m[ee])return 1/0;var Q,J,K,Y=u[ee],ie=x[ee];return Y<0||ie<0?1/0:(Q=a[ee],J=a[Y],K=a[ie],Math.abs(i(Q,J,K))/Math.sqrt(Math.pow(J[0]-K[0],2)+Math.pow(J[1]-K[1],2)))}function S(ee,Q){var J=D[ee],K=D[Q];D[ee]=K,D[Q]=J,N[J]=Q,N[K]=ee}function w(ee){return d[D[ee]]}function E(ee){return 1&ee?ee-1>>1:(ee>>1)-1}function P(ee){for(var Q=w(ee);;){var J=Q,K=2*ee+1,Y=2*(ee+1),ie=ee;if(K<W){var se=w(K);se<J&&(ie=K,J=se)}if(Y<W&&w(Y)<J&&(ie=Y),ie===ee)return ee;S(ee,ie),ee=ie}}function C(ee){for(var Q=w(ee);ee>0;){var J=E(ee);if(!(J>=0&&Q<w(J)))return ee;S(ee,J),ee=J}}function O(){if(W>0){var ee=D[0];return S(0,W-1),W-=1,P(0),ee}return-1}function R(ee,Q){var J=D[ee];return d[J]===Q?ee:(d[J]=-1/0,C(ee),O(),d[J]=Q,C((W+=1)-1))}function U(ee){if(!m[ee]){m[ee]=!0;var Q=u[ee],J=x[ee];u[J]>=0&&(u[J]=Q),x[Q]>=0&&(x[Q]=J),N[Q]>=0&&R(N[Q],f(Q)),N[J]>=0&&R(N[J],f(J))}}var D=[],N=new Array(c);for(g=0;g<c;++g)(d[g]=f(g))<1/0?(N[g]=D.length,D.push(g)):N[g]=-1;var W=D.length;for(g=W>>1;g>=0;--g)P(g);for(;;){var F=O();if(F<0||d[F]>l)break;U(F)}var j=[];for(g=0;g<c;++g)m[g]||(N[g]=j.length,j.push(a[g].slice()));function q(ee,Q){if(ee[Q]<0)return Q;var J=Q,K=Q;do{var Y=ee[K];if(!m[K]||Y<0||Y===K||(Y=ee[K=Y],!m[K]||Y<0||Y===K))break;K=Y,J=ee[J]}while(J!==K);for(var ie=Q;ie!==K;ie=ee[ie])ee[ie]=K;return K}j.length;var te=[];return r.forEach(function(ee){var Q=q(u,ee[0]),J=q(x,ee[1]);if(Q>=0&&J>=0&&Q!==J){var K=N[Q],Y=N[J];K!==Y&&te.push([K,Y])}}),n.unique(n.normalize(te)),{positions:j,edges:te}};var i=t(3250),n=t(2014)},1303:function(p,s,t){"use strict";p.exports=function(r,a){var l,c,h,u;if(a[0][0]<a[1][0])l=a[0],c=a[1];else{if(!(a[0][0]>a[1][0]))return n(a,r);l=a[1],c=a[0]}if(r[0][0]<r[1][0])h=r[0],u=r[1];else{if(!(r[0][0]>r[1][0]))return-n(r,a);h=r[1],u=r[0]}var x=i(l,c,u),d=i(l,c,h);if(x<0){if(d<=0)return x}else if(x>0){if(d>=0)return x}else if(d)return d;if(x=i(u,h,c),d=i(u,h,l),x<0){if(d<=0)return x}else if(x>0){if(d>=0)return x}else if(d)return d;return c[0]-u[0]};var i=t(3250);function n(r,a){var l,c,h,u;if(a[0][0]<a[1][0])l=a[0],c=a[1];else{if(!(a[0][0]>a[1][0])){var x=Math.min(r[0][1],r[1][1]),d=Math.max(r[0][1],r[1][1]),m=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]);return d<m?d-m:x>g?x-g:d-g}l=a[1],c=a[0]}r[0][1]<r[1][1]?(h=r[0],u=r[1]):(h=r[1],u=r[0]);var y=i(c,l,h);return y||(y=i(c,l,u))||u-c}},4209:function(p,s,t){"use strict";p.exports=function(d){for(var m=d.length,g=2*m,y=new Array(g),v=0;v<m;++v){var _=d[v],f=_[0][0]<_[1][0];y[2*v]=new x(_[0][0],_,f,v),y[2*v+1]=new x(_[1][0],_,!f,v)}y.sort(function(U,D){var N=U.x-D.x;return N||(N=U.create-D.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var S=n(a),w=[],E=[],P=[];for(v=0;v<g;){for(var C=y[v].x,O=[];v<g;){var R=y[v];if(R.x!==C)break;v+=1,R.segment[0][0]===R.x&&R.segment[1][0]===R.x?R.create&&(R.segment[0][1]<R.segment[1][1]?(O.push(new u(R.segment[0][1],R.index,!0,!0)),O.push(new u(R.segment[1][1],R.index,!1,!1))):(O.push(new u(R.segment[1][1],R.index,!0,!1)),O.push(new u(R.segment[0][1],R.index,!1,!0)))):S=R.create?S.insert(R.segment,R.index):S.remove(R.segment)}w.push(S.root),E.push(C),P.push(O)}return new l(w,E,P)};var i=t(2478),n=t(3840),r=t(3250),a=t(1303);function l(d,m,g){this.slabs=d,this.coordinates=m,this.horizontal=g}function c(d,m){return d.y-m}function h(d,m){for(var g=null;d;){var y,v,_=d.key;_[0][0]<_[1][0]?(y=_[0],v=_[1]):(y=_[1],v=_[0]);var f=r(y,v,m);if(f<0)d=d.left;else if(f>0)if(m[0]!==_[1][0])g=d,d=d.right;else{if(S=h(d.right,m))return S;d=d.left}else{if(m[0]!==_[1][0])return d;var S;if(S=h(d.right,m))return S;d=d.left}}return g}function u(d,m,g,y){this.y=d,this.index=m,this.start=g,this.closed=y}function x(d,m,g,y){this.x=d,this.segment=m,this.create=g,this.index=y}l.prototype.castUp=function(d){var m=i.le(this.coordinates,d[0]);if(m<0)return-1;this.slabs[m];var g=h(this.slabs[m],d),y=-1;if(g&&(y=g.value),this.coordinates[m]===d[0]){var v=null;if(g&&(v=g.key),m>0){var _=h(this.slabs[m-1],d);_&&(v?a(_.key,v)>0&&(v=_.key,y=_.value):(y=_.value,v=_.key))}var f=this.horizontal[m];if(f.length>0){var S=i.ge(f,d[1],c);if(S<f.length){var w=f[S];if(d[1]===w.y){if(w.closed)return w.index;for(;S<f.length-1&&f[S+1].y===d[1];)if((w=f[S+=1]).closed)return w.index;if(w.y===d[1]&&!w.start){if((S+=1)>=f.length)return y;w=f[S]}}if(w.start)if(v){var E=r(v[0],v[1],[d[0],w.y]);v[0][0]>v[1][0]&&(E=-E),E>0&&(y=w.index)}else y=w.index;else w.y!==d[1]&&(y=w.index)}}}return y}},5202:function(p,s,t){"use strict";var i=t(1944),n=t(8210);function r(l,c){var h=n(i(l,c),[c[c.length-1]]);return h[h.length-1]}function a(l,c,h,u){var x=-c/(u-c);x<0?x=0:x>1&&(x=1);for(var d=1-x,m=l.length,g=new Array(m),y=0;y<m;++y)g[y]=x*l[y]+d*h[y];return g}p.exports=function(l,c){for(var h=[],u=[],x=r(l[l.length-1],c),d=l[l.length-1],m=l[0],g=0;g<l.length;++g,d=m){var y=r(m=l[g],c);if(x<0&&y>0||x>0&&y<0){var v=a(d,y,m,x);h.push(v),u.push(v.slice())}y<0?u.push(m.slice()):y>0?h.push(m.slice()):(h.push(m.slice()),u.push(m.slice())),x=y}return{positive:h,negative:u}},p.exports.positive=function(l,c){for(var h=[],u=r(l[l.length-1],c),x=l[l.length-1],d=l[0],m=0;m<l.length;++m,x=d){var g=r(d=l[m],c);(u<0&&g>0||u>0&&g<0)&&h.push(a(x,g,d,u)),g>=0&&h.push(d.slice()),u=g}return h},p.exports.negative=function(l,c){for(var h=[],u=r(l[l.length-1],c),x=l[l.length-1],d=l[0],m=0;m<l.length;++m,x=d){var g=r(d=l[m],c);(u<0&&g>0||u>0&&g<0)&&h.push(a(x,g,d,u)),g<=0&&h.push(d.slice()),u=g}return h}},3387:function(p,s,t){var i;(function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(c){return function(h,u){var x,d,m,g,y,v,_,f,S,w=1,E=h.length,P="";for(d=0;d<E;d++)if(typeof h[d]=="string")P+=h[d];else if(typeof h[d]=="object"){if((g=h[d]).keys)for(x=u[w],m=0;m<g.keys.length;m++){if(x==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[m],g.keys[m-1]));x=x[g.keys[m]]}else x=g.param_no?u[g.param_no]:u[w++];if(n.not_type.test(g.type)&&n.not_primitive.test(g.type)&&x instanceof Function&&(x=x()),n.numeric_arg.test(g.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(r("[sprintf] expecting number but found %T",x));switch(n.number.test(g.type)&&(f=x>=0),g.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,g.width?parseInt(g.width):0);break;case"e":x=g.precision?parseFloat(x).toExponential(g.precision):parseFloat(x).toExponential();break;case"f":x=g.precision?parseFloat(x).toFixed(g.precision):parseFloat(x);break;case"g":x=g.precision?String(Number(x.toPrecision(g.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=g.precision?x.substring(0,g.precision):x;break;case"t":x=String(!!x),x=g.precision?x.substring(0,g.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=g.precision?x.substring(0,g.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=g.precision?x.substring(0,g.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}n.json.test(g.type)?P+=x:(!n.number.test(g.type)||f&&!g.sign?S="":(S=f?"+":"-",x=x.toString().replace(n.sign,"")),v=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",_=g.width-(S+x).length,y=g.width&&_>0?v.repeat(_):"",P+=g.align?S+x+y:v==="0"?S+y+x:y+S+x)}return P}(function(h){if(l[h])return l[h];for(var u,x=h,d=[],m=0;x;){if((u=n.text.exec(x))!==null)d.push(u[0]);else if((u=n.modulo.exec(x))!==null)d.push("%");else{if((u=n.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(u[2]){m|=1;var g=[],y=u[2],v=[];if((v=n.key.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(v[1]);(y=y.substring(v[0].length))!=="";)if((v=n.key_access.exec(y))!==null)g.push(v[1]);else{if((v=n.index_access.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(v[1])}u[2]=g}else m|=2;if(m===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}x=x.substring(u[0].length)}return l[h]=d}(c),arguments)}function a(c,h){return r.apply(null,[c].concat(h||[]))}var l=Object.create(null);s.sprintf=r,s.vsprintf=a,typeof window<"u"&&(window.sprintf=r,window.vsprintf=a,(i=(function(){return{sprintf:r,vsprintf:a}}).call(s,t,s,p))===void 0||(p.exports=i))})()},3711:function(p,s,t){"use strict";p.exports=function(l,c){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(x,d){for(var m=n(x,d),g=m.length,y=new Array(g),v=new Array(g),_=0;_<g;++_)y[_]=[m[_]],v[_]=[_];return{positions:y,cells:v}}(l,c);var h=l.order.join()+"-"+l.dtype,u=a[h];return c=+c||0,u||(u=a[h]=function(x,d){var m=x.length+"d",g=r[m];if(g)return g(i,x,d)}(l.order,l.dtype)),u(l,c)};var i=t(2640),n=t(781),r={"2d":function(l,c,h){var u=l({order:c,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(x,d,m,g){return x>g|0},vertex:function(x,d,m,g,y,v,_,f,S,w,E,P,C){var O=(_<<0)+(f<<1)+(S<<2)+(w<<3)|0;if(O!==0&&O!==15)switch(O){case 0:case 15:E.push([x-.5,d-.5]);break;case 1:E.push([x-.25-.25*(g+m-2*C)/(m-g),d-.25-.25*(y+m-2*C)/(m-y)]);break;case 2:E.push([x-.75-.25*(-g-m+2*C)/(g-m),d-.25-.25*(v+g-2*C)/(g-v)]);break;case 3:E.push([x-.5,d-.5-.5*(y+m+v+g-4*C)/(m-y+g-v)]);break;case 4:E.push([x-.25-.25*(v+y-2*C)/(y-v),d-.75-.25*(-y-m+2*C)/(y-m)]);break;case 5:E.push([x-.5-.5*(g+m+v+y-4*C)/(m-g+y-v),d-.5]);break;case 6:E.push([x-.5-.25*(-g-m+v+y)/(g-m+y-v),d-.5-.25*(-y-m+v+g)/(y-m+g-v)]);break;case 7:E.push([x-.75-.25*(v+y-2*C)/(y-v),d-.75-.25*(v+g-2*C)/(g-v)]);break;case 8:E.push([x-.75-.25*(-v-y+2*C)/(v-y),d-.75-.25*(-v-g+2*C)/(v-g)]);break;case 9:E.push([x-.5-.25*(g+m+-v-y)/(m-g+v-y),d-.5-.25*(y+m+-v-g)/(m-y+v-g)]);break;case 10:E.push([x-.5-.5*(-g-m-v-y+4*C)/(g-m+v-y),d-.5]);break;case 11:E.push([x-.25-.25*(-v-y+2*C)/(v-y),d-.75-.25*(y+m-2*C)/(m-y)]);break;case 12:E.push([x-.5,d-.5-.5*(-y-m-v-g+4*C)/(y-m+v-g)]);break;case 13:E.push([x-.75-.25*(g+m-2*C)/(m-g),d-.25-.25*(-v-g+2*C)/(v-g)]);break;case 14:E.push([x-.25-.25*(-g-m+2*C)/(g-m),d-.25-.25*(-y-m+2*C)/(y-m)])}},cell:function(x,d,m,g,y,v,_,f,S){y?f.push([x,d]):f.push([d,x])}});return function(x,d){var m=[],g=[];return u(x,m,g,d),{positions:m,cells:g}}}},a={}},529:function(p,s,t){"use strict";p.exports=function a(l,c,h){var u=(h=h||{}).fontStyle||"normal",x=h.fontWeight||"normal",d=h.fontVariant||"normal",m=[u,x,d,l].join("_"),g=r[m];g||(g=r[m]={" ":{data:new Float32Array(0),shape:.2}});var y=g[c];if(!y)if(c.length<=1||!/\d/.test(c))y=g[c]=function(U){for(var D=U.cells,N=U.positions,W=new Float32Array(6*D.length),F=0,j=0,q=0;q<D.length;++q)for(var te=D[q],ee=0;ee<3;++ee){var Q=N[te[ee]];W[F++]=Q[0],W[F++]=Q[1]+1.4,j=Math.max(Q[0],j)}return{data:W,shape:j}}(i(c,{triangles:!0,font:l,fontStyle:u,fontWeight:x,fontVariant:d,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),_=new Array(v.length),f=0,S=0,w=0;w<v.length;++w)_[w]=a(l,v[w]),f+=_[w].data.length,S+=_[w].shape,w>0&&(S+=.02);var E=new Float32Array(f),P=0,C=-.5*S;for(w=0;w<_.length;++w){for(var O=_[w].data,R=0;R<O.length;R+=2)E[P++]=O[R]+C,E[P++]=O[R+1];C+=_[w].shape+.02}y=g[c]={data:E,shape:S}}return y};var i=t(4359),n=window||A.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}},665:function(p,s,t){"use strict";var i=t(3202);p.exports=a;var n=96;function r(l,c){var h=i(getComputedStyle(l).getPropertyValue(c));return h[0]*a(h[1],l)}function a(l,c){switch(c=c||document.body,l=(l||"px").trim().toLowerCase(),c!==window&&c!==document||(c=document.body),l){case"%":return c.clientHeight/100;case"ch":case"ex":return function(h,u){var x=document.createElement("div");x.style["font-size"]="128"+h,u.appendChild(x);var d=r(x,"font-size")/128;return u.removeChild(x),d}(l,c);case"em":return r(c,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},7261:function(p,s,t){"use strict";p.exports=function(y){var v=(y=y||{}).center||[0,0,0],_=y.up||[0,1,0],f=y.right||x(_),S=y.radius||1,w=y.theta||0,E=y.phi||0;if(v=[].slice.call(v,0,3),_=[].slice.call(_,0,3),l(_,_),f=[].slice.call(f,0,3),l(f,f),"eye"in y){var P=y.eye,C=[P[0]-v[0],P[1]-v[1],P[2]-v[2]];a(f,C,_),h(f[0],f[1],f[2])<1e-6?f=x(_):l(f,f),S=h(C[0],C[1],C[2]);var O=c(_,C)/S,R=c(f,C)/S;E=Math.acos(O),w=Math.acos(R)}return S=Math.log(S),new d(y.zoomMin,y.zoomMax,v,_,f,S,w,E)};var i=t(9215),n=t(7608),r=t(6079),a=t(5911),l=t(3536),c=t(244);function h(y,v,_){return Math.sqrt(Math.pow(y,2)+Math.pow(v,2)+Math.pow(_,2))}function u(y){return Math.min(1,Math.max(-1,y))}function x(y){var v=Math.abs(y[0]),_=Math.abs(y[1]),f=Math.abs(y[2]),S=[0,0,0];v>Math.max(_,f)?S[2]=1:_>Math.max(v,f)?S[0]=1:S[1]=1;for(var w=0,E=0,P=0;P<3;++P)w+=y[P]*y[P],E+=S[P]*y[P];for(P=0;P<3;++P)S[P]-=E/w*y[P];return l(S,S),S}function d(y,v,_,f,S,w,E,P){this.center=i(_),this.up=i(f),this.right=i(S),this.radius=i([w]),this.angle=i([E,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,v),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var m=d.prototype;m.setDistanceLimits=function(y,v){y=y>0?Math.log(y):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=v},m.getDistanceLimits=function(y){var v=this.radius.bounds[0];return y?(y[0]=Math.exp(v[0][0]),y[1]=Math.exp(v[1][0]),y):[Math.exp(v[0][0]),Math.exp(v[1][0])]},m.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var v=this.computedUp,_=this.computedRight,f=0,S=0,w=0;w<3;++w)S+=v[w]*_[w],f+=v[w]*v[w];var E=Math.sqrt(f),P=0;for(w=0;w<3;++w)_[w]-=v[w]*S/f,P+=_[w]*_[w],v[w]/=E;var C=Math.sqrt(P);for(w=0;w<3;++w)_[w]/=C;var O=this.computedToward;a(O,v,_),l(O,O);var R=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],D=this.computedAngle[1],N=Math.cos(U),W=Math.sin(U),F=Math.cos(D),j=Math.sin(D),q=this.computedCenter,te=N*F,ee=W*F,Q=j,J=-N*j,K=-W*j,Y=F,ie=this.computedEye,se=this.computedMatrix;for(w=0;w<3;++w){var ae=te*_[w]+ee*O[w]+Q*v[w];se[4*w+1]=J*_[w]+K*O[w]+Y*v[w],se[4*w+2]=ae,se[4*w+3]=0}var ue=se[1],ve=se[5],ye=se[9],de=se[2],pe=se[6],ge=se[10],ke=ve*ge-ye*pe,Ee=ye*de-ue*ge,me=ue*pe-ve*de,oe=h(ke,Ee,me);for(ke/=oe,Ee/=oe,me/=oe,se[0]=ke,se[4]=Ee,se[8]=me,w=0;w<3;++w)ie[w]=q[w]+se[2+4*w]*R;for(w=0;w<3;++w){P=0;for(var re=0;re<3;++re)P+=se[w+4*re]*ie[re];se[12+w]=-P}se[15]=1},m.getMatrix=function(y,v){this.recalcMatrix(y);var _=this.computedMatrix;if(v){for(var f=0;f<16;++f)v[f]=_[f];return v}return _};var g=[0,0,0];m.rotate=function(y,v,_,f){if(this.angle.move(y,v,_),f){this.recalcMatrix(y);var S=this.computedMatrix;g[0]=S[2],g[1]=S[6],g[2]=S[10];for(var w=this.computedUp,E=this.computedRight,P=this.computedToward,C=0;C<3;++C)S[4*C]=w[C],S[4*C+1]=E[C],S[4*C+2]=P[C];for(r(S,S,f,g),C=0;C<3;++C)w[C]=S[4*C],E[C]=S[4*C+1];this.up.set(y,w[0],w[1],w[2]),this.right.set(y,E[0],E[1],E[2])}},m.pan=function(y,v,_,f){v=v||0,_=_||0,f=f||0,this.recalcMatrix(y);var S=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],P=S[9],C=h(w,E,P);w/=C,E/=C,P/=C;var O=S[0],R=S[4],U=S[8],D=O*w+R*E+U*P,N=h(O-=w*D,R-=E*D,U-=P*D),W=(O/=N)*v+w*_,F=(R/=N)*v+E*_,j=(U/=N)*v+P*_;this.center.move(y,W,F,j);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+f),this.radius.set(y,Math.log(q))},m.translate=function(y,v,_,f){this.center.move(y,v||0,_||0,f||0)},m.setMatrix=function(y,v,_,f){var S=1;typeof _=="number"&&(S=0|_),(S<0||S>3)&&(S=1);var w=(S+2)%3;v||(this.recalcMatrix(y),v=this.computedMatrix);var E=v[S],P=v[S+4],C=v[S+8];if(f){var O=Math.abs(E),R=Math.abs(P),U=Math.abs(C),D=Math.max(O,R,U);O===D?(E=E<0?-1:1,P=C=0):U===D?(C=C<0?-1:1,E=P=0):(P=P<0?-1:1,E=C=0)}else{var N=h(E,P,C);E/=N,P/=N,C/=N}var W,F,j=v[w],q=v[w+4],te=v[w+8],ee=j*E+q*P+te*C,Q=h(j-=E*ee,q-=P*ee,te-=C*ee),J=P*(te/=Q)-C*(q/=Q),K=C*(j/=Q)-E*te,Y=E*q-P*j,ie=h(J,K,Y);if(J/=ie,K/=ie,Y/=ie,this.center.jump(y,we,Me,Ie),this.radius.idle(y),this.up.jump(y,E,P,C),this.right.jump(y,j,q,te),S===2){var se=v[1],ae=v[5],ue=v[9],ve=se*j+ae*q+ue*te,ye=se*J+ae*K+ue*Y;W=ke<0?-Math.PI/2:Math.PI/2,F=Math.atan2(ye,ve)}else{var de=v[2],pe=v[6],ge=v[10],ke=de*E+pe*P+ge*C,Ee=de*j+pe*q+ge*te,me=de*J+pe*K+ge*Y;W=Math.asin(u(ke)),F=Math.atan2(me,Ee)}this.angle.jump(y,F,W),this.recalcMatrix(y);var oe=v[2],re=v[6],fe=v[10],Se=this.computedMatrix;n(Se,v);var be=Se[15],we=Se[12]/be,Me=Se[13]/be,Ie=Se[14]/be,Oe=Math.exp(this.computedRadius[0]);this.center.jump(y,we-oe*Oe,Me-re*Oe,Ie-fe*Oe)},m.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},m.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},m.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},m.setDistance=function(y,v){v>0&&this.radius.set(y,Math.log(v))},m.lookAt=function(y,v,_,f){this.recalcMatrix(y),v=v||this.computedEye,_=_||this.computedCenter;var S=(f=f||this.computedUp)[0],w=f[1],E=f[2],P=h(S,w,E);if(!(P<1e-6)){S/=P,w/=P,E/=P;var C=v[0]-_[0],O=v[1]-_[1],R=v[2]-_[2],U=h(C,O,R);if(!(U<1e-6)){C/=U,O/=U,R/=U;var D=this.computedRight,N=D[0],W=D[1],F=D[2],j=S*N+w*W+E*F,q=h(N-=j*S,W-=j*w,F-=j*E);if(!(q<.01&&(q=h(N=w*R-E*O,W=E*C-S*R,F=S*O-w*C))<1e-6)){N/=q,W/=q,F/=q,this.up.set(y,S,w,E),this.right.set(y,N,W,F),this.center.set(y,_[0],_[1],_[2]),this.radius.set(y,Math.log(U));var te=w*F-E*W,ee=E*N-S*F,Q=S*W-w*N,J=h(te,ee,Q),K=S*C+w*O+E*R,Y=N*C+W*O+F*R,ie=(te/=J)*C+(ee/=J)*O+(Q/=J)*R,se=Math.asin(u(K)),ae=Math.atan2(ie,Y),ue=this.angle._state,ve=ue[ue.length-1],ye=ue[ue.length-2];ve%=2*Math.PI;var de=Math.abs(ve+2*Math.PI-ae),pe=Math.abs(ve-ae),ge=Math.abs(ve-2*Math.PI-ae);de<pe&&(ve+=2*Math.PI),ge<pe&&(ve-=2*Math.PI),this.angle.jump(this.angle.lastT(),ve,ye),this.angle.set(y,ae,se)}}}}},5250:function(p){"use strict";p.exports=function(t,i,n){var r=t*i,a=s*t,l=a-(a-t),c=t-l,h=s*i,u=h-(h-i),x=i-u,d=c*x-(r-l*u-c*u-l*x);return n?(n[0]=d,n[1]=r,n):[d,r]};var s=+(Math.pow(2,27)+1)},9362:function(p){"use strict";p.exports=function(s,t,i){var n=s+t,r=n-s,a=t-r,l=s-(n-r);return i?(i[0]=l+a,i[1]=n,i):[l+a,n]}},1888:function(p,s,t){"use strict";var i=t(8828),n=t(1338),r=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var a=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=n([32,0])),h.BIGUINT64||(h.BIGUINT64=n([32,0])),h.BIGINT64||(h.BIGINT64=n([32,0])),h.BUFFER||(h.BUFFER=n([32,0]));var u=h.DATA,x=h.BUFFER;function d(D){if(D){var N=D.length||D.byteLength,W=i.log2(N);u[W].push(D)}}function m(D){D=i.nextPow2(D);var N=i.log2(D),W=u[N];return W.length>0?W.pop():new ArrayBuffer(D)}function g(D){return new Uint8Array(m(D),0,D)}function y(D){return new Uint16Array(m(2*D),0,D)}function v(D){return new Uint32Array(m(4*D),0,D)}function _(D){return new Int8Array(m(D),0,D)}function f(D){return new Int16Array(m(2*D),0,D)}function S(D){return new Int32Array(m(4*D),0,D)}function w(D){return new Float32Array(m(4*D),0,D)}function E(D){return new Float64Array(m(8*D),0,D)}function P(D){return a?new Uint8ClampedArray(m(D),0,D):g(D)}function C(D){return l?new BigUint64Array(m(8*D),0,D):null}function O(D){return c?new BigInt64Array(m(8*D),0,D):null}function R(D){return new DataView(m(D),0,D)}function U(D){D=i.nextPow2(D);var N=i.log2(D),W=x[N];return W.length>0?W.pop():new r(D)}s.free=function(D){if(r.isBuffer(D))x[i.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var N=D.length||D.byteLength,W=0|i.log2(N);u[W].push(D)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(D){d(D.buffer)},s.freeArrayBuffer=d,s.freeBuffer=function(D){x[i.log2(D.length)].push(D)},s.malloc=function(D,N){if(N===void 0||N==="arraybuffer")return m(D);switch(N){case"uint8":return g(D);case"uint16":return y(D);case"uint32":return v(D);case"int8":return _(D);case"int16":return f(D);case"int32":return S(D);case"float":case"float32":return w(D);case"double":case"float64":return E(D);case"uint8_clamped":return P(D);case"bigint64":return O(D);case"biguint64":return C(D);case"buffer":return U(D);case"data":case"dataview":return R(D);default:return null}return null},s.mallocArrayBuffer=m,s.mallocUint8=g,s.mallocUint16=y,s.mallocUint32=v,s.mallocInt8=_,s.mallocInt16=f,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=w,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=P,s.mallocBigUint64=C,s.mallocBigInt64=O,s.mallocDataView=R,s.mallocBuffer=U,s.clearCache=function(){for(var D=0;D<32;++D)h.UINT8[D].length=0,h.UINT16[D].length=0,h.UINT32[D].length=0,h.INT8[D].length=0,h.INT16[D].length=0,h.INT32[D].length=0,h.FLOAT[D].length=0,h.DOUBLE[D].length=0,h.BIGUINT64[D].length=0,h.BIGINT64[D].length=0,h.UINT8C[D].length=0,u[D].length=0,x[D].length=0}},1755:function(p){"use strict";function s(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}p.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var a=r[n];r[n]=i,n=a}return i},t.link=function(i,n){var r=this.find(i),a=this.find(n);if(r!==a){var l=this.ranks,c=this.roots,h=l[r],u=l[a];h<u?c[r]=a:u<h?c[a]=r:(c[a]=r,++l[r])}}},1682:function(p){"use strict";p.exports=function(s,t,i){return s.length===0?s:t?(i||s.sort(t),function(n,r){for(var a=1,l=n.length,c=n[0],h=n[0],u=1;u<l;++u)if(h=c,r(c=n[u],h)){if(u===a){a++;continue}n[a++]=c}return n.length=a,n}(s,t)):(i||s.sort(),function(n){for(var r=1,a=n.length,l=n[0],c=n[0],h=1;h<a;++h,c=l)if(c=l,(l=n[h])!==c){if(h===r){r++;continue}n[r++]=l}return n.length=r,n}(s))}},4359:function(p,s,t){"use strict";p.exports=function(a,l){return typeof l=="object"&&l!==null||(l={}),i(a,l.canvas||n,l.context||r,l)};var i=t(7718),n=null,r=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,r=n.getContext("2d"))},7718:function(p,s,t){p.exports=function(C,O,R,U){var D=64,N=1.25,W={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return U&&(U.size&&U.size>0&&(D=U.size),U.lineSpacing&&U.lineSpacing>0&&(N=U.lineSpacing),U.styletags&&U.styletags.breaklines&&(W.breaklines=!!U.styletags.breaklines),U.styletags&&U.styletags.bolds&&(W.bolds=!!U.styletags.bolds),U.styletags&&U.styletags.italics&&(W.italics=!!U.styletags.italics),U.styletags&&U.styletags.subscripts&&(W.subscripts=!!U.styletags.subscripts),U.styletags&&U.styletags.superscripts&&(W.superscripts=!!U.styletags.superscripts)),R.font=[U.fontStyle,U.fontVariant,U.fontWeight,D+"px",U.font].filter(function(F){return F}).join(" "),R.textAlign="start",R.textBaseline="alphabetic",R.direction="ltr",P(function(F,j,q,te,ee,Q){q=q.replace(/\n/g,""),q=Q.breaklines===!0?q.replace(/\<br\>/g,`
`):q.replace(/\<br\>/g," ");var J="",K=[];for(ae=0;ae<q.length;++ae)K[ae]=J;Q.bolds===!0&&(K=S(h,u,q,K)),Q.italics===!0&&(K=S(x,d,q,K)),Q.superscripts===!0&&(K=S(m,y,q,K)),Q.subscripts===!0&&(K=S(v,f,q,K));var Y=[],ie="";for(ae=0;ae<q.length;++ae)K[ae]!==null&&(ie+=q[ae],Y.push(K[ae]));var se,ae,ue,ve,ye,de=ie.split(`
`),pe=de.length,ge=Math.round(ee*te),ke=te,Ee=2*te,me=0,oe=pe*ge+Ee;F.height<oe&&(F.height=oe),j.fillStyle="#000",j.fillRect(0,0,F.width,F.height),j.fillStyle="#fff";var re=0,fe="";function Se(){if(fe!==""){var Ae=j.measureText(fe).width;j.fillText(fe,ke+ue,Ee+ve),ue+=Ae}}function be(){return Math.round(ye)+"px "}function we(Ae,De){var Le=""+j.font;if(Q.subscripts===!0){var Be=Ae.indexOf(_),Ve=De.indexOf(_),Ze=Be>-1?parseInt(Ae[1+Be]):0,rt=Ve>-1?parseInt(De[1+Ve]):0;Ze!==rt&&(Le=Le.replace(be(),"?px "),ye*=Math.pow(.75,rt-Ze),Le=Le.replace("?px ",be())),ve+=.25*ge*(rt-Ze)}if(Q.superscripts===!0){var it=Ae.indexOf(g),dt=De.indexOf(g),mt=it>-1?parseInt(Ae[1+it]):0,ht=dt>-1?parseInt(De[1+dt]):0;mt!==ht&&(Le=Le.replace(be(),"?px "),ye*=Math.pow(.75,ht-mt),Le=Le.replace("?px ",be())),ve-=.25*ge*(ht-mt)}if(Q.bolds===!0){var Qe=Ae.indexOf(u)>-1,Je=De.indexOf(u)>-1;!Qe&&Je&&(Le=wt?Le.replace("italic ","italic bold "):"bold "+Le),Qe&&!Je&&(Le=Le.replace("bold ",""))}if(Q.italics===!0){var wt=Ae.indexOf(d)>-1,Pt=De.indexOf(d)>-1;!wt&&Pt&&(Le="italic "+Le),wt&&!Pt&&(Le=Le.replace("italic ",""))}j.font=Le}for(se=0;se<pe;++se){var Me=de[se]+`
`;for(ue=0,ve=se*ge,ye=te,fe="",ae=0;ae<Me.length;++ae){var Ie=ae+re<Y.length?Y[ae+re]:Y[Y.length-1];J===Ie?fe+=Me[ae]:(Se(),fe=Me[ae],Ie!==void 0&&(we(J,Ie),J=Ie))}Se(),re+=Me.length;var Oe=0|Math.round(ue+2*ke);me<Oe&&(me=Oe)}var he=me,_e=Ee+ge*pe;return n(j.getImageData(0,0,he,_e).data,[_e,he,4]).pick(-1,-1,0).transpose(1,0)}(O,R,C,D,N,W),U,D)},p.exports.processPixels=P;var i=t(3711),n=t(9618),r=t(5878),a=t(332),l=t(2538),c=t(2095),h="b",u="b|",x="i",d="i|",m="sup",g="+",y="+1",v="sub",_="-",f="-1";function S(C,O,R,U){for(var D="<"+C+">",N="</"+C+">",W=D.length,F=N.length,j=O[0]===g||O[0]===_,q=0,te=-F;q>-1&&(q=R.indexOf(D,q))!==-1&&(te=R.indexOf(N,q+W))!==-1&&!(te<=q);){for(var ee=q;ee<te+F;++ee)if(ee<q+W||ee>=te)U[ee]=null,R=R.substr(0,ee)+" "+R.substr(ee+1);else if(U[ee]!==null){var Q=U[ee].indexOf(O[0]);Q===-1?U[ee]+=O:j&&(U[ee]=U[ee].substr(0,Q+1)+(1+parseInt(U[ee][Q+1]))+U[ee].substr(Q+2))}var J=q+W,K=R.substr(J,te-J).indexOf(D);q=K!==-1?K:te+F}return U}function w(C,O){var R=i(C,128);return O?r(R.cells,R.positions,.25):{edges:R.cells,positions:R.positions}}function E(C,O,R,U){var D=w(C,U),N=function(se,ae,ue){for(var ve=ae.textAlign||"start",ye=ae.textBaseline||"alphabetic",de=[1<<30,1<<30],pe=[0,0],ge=se.length,ke=0;ke<ge;++ke)for(var Ee=se[ke],me=0;me<2;++me)de[me]=0|Math.min(de[me],Ee[me]),pe[me]=0|Math.max(pe[me],Ee[me]);var oe=0;switch(ve){case"center":oe=-.5*(de[0]+pe[0]);break;case"right":case"end":oe=-pe[0];break;case"left":case"start":oe=-de[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ve+"'")}var re=0;switch(ye){case"hanging":case"top":re=-de[1];break;case"middle":re=-.5*(de[1]+pe[1]);break;case"alphabetic":case"ideographic":re=-3*ue;break;case"bottom":re=-pe[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ye+"'")}var fe=1/ue;return"lineHeight"in ae?fe*=+ae.lineHeight:"width"in ae?fe=ae.width/(pe[0]-de[0]):"height"in ae&&(fe=ae.height/(pe[1]-de[1])),se.map(function(Se){return[fe*(Se[0]+oe),fe*(Se[1]+re)]})}(D.positions,O,R),W=D.edges,F=O.orientation==="ccw";if(a(N,W),O.polygons||O.polygon||O.polyline){for(var j=c(W,N),q=new Array(j.length),te=0;te<j.length;++te){for(var ee=j[te],Q=new Array(ee.length),J=0;J<ee.length;++J){for(var K=ee[J],Y=new Array(K.length),ie=0;ie<K.length;++ie)Y[ie]=N[K[ie]].slice();F&&Y.reverse(),Q[J]=Y}q[te]=Q}return q}return O.triangles||O.triangulate||O.triangle?{cells:l(N,W,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:W,positions:N}}function P(C,O,R){try{return E(C,O,R,!0)}catch{}try{return E(C,O,R,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(p){(function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=v);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,n=Object.freeze({});if(i.set(n,1),i.get(n)===1)return void(p.exports=WeakMap);s=!0}}var r=Object.getOwnPropertyNames,a=Object.defineProperty,l=Object.isExtensible,c="weakmap:",h=c+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var u=new ArrayBuffer(25),x=new Uint8Array(u);crypto.getRandomValues(x),h=c+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return r(E).filter(_)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return d(E).filter(_)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(O){return f(O),E(O)}});var P=Object.seal;a(Object,"seal",{value:function(O){return f(O),P(O)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(O){return f(O),C(O)}})})();var m=!1,g=0,y=function(){this instanceof y||w();var E=[],P=[],C=g++;return Object.create(y.prototype,{get___:{value:S(function(O,R){var U,D=f(O);return D?C in D?D[C]:R:(U=E.indexOf(O))>=0?P[U]:R})},has___:{value:S(function(O){var R=f(O);return R?C in R:E.indexOf(O)>=0})},set___:{value:S(function(O,R){var U,D=f(O);return D?D[C]=R:(U=E.indexOf(O))>=0?P[U]=R:(U=E.length,P[U]=R,E[U]=O),this})},delete___:{value:S(function(O){var R,U,D=f(O);return D?C in D&&delete D[C]:!((R=E.indexOf(O))<0||(U=E.length-1,E[R]=void 0,P[R]=P[U],E[R]=E[U],E.length=U,P.length=U,0))})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof y||w();var P,C=new t,O=void 0,R=!1;return P=s?function(U,D){return C.set(U,D),C.has(U)||(O||(O=new y),O.set(U,D)),this}:function(U,D){if(R)try{C.set(U,D)}catch{O||(O=new y),O.set___(U,D)}else C.set(U,D);return this},Object.create(y.prototype,{get___:{value:S(function(U,D){return O?C.has(U)?C.get(U):O.get___(U,D):C.get(U,D)})},has___:{value:S(function(U){return C.has(U)||!!O&&O.has___(U)})},set___:{value:S(P)},delete___:{value:S(function(U){var D=!!C.delete(U);return O&&O.delete___(U)||D})},permitHostObjects___:{value:S(function(U){if(U!==v)throw new Error("bogus call to permitHostObjects___");R=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=y.prototype,p.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),p.exports=y)}function v(E){E.permitHostObjects___&&E.permitHostObjects___(v)}function _(E){return!(E.substr(0,8)==c&&E.substr(E.length-3)==="___")}function f(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var P=E[h];if(P&&P.key===E)return P;if(l(E)){P={key:E};try{return a(E,h,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function w(){m||typeof console>"u"||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},236:function(p,s,t){var i=t(8284);p.exports=function(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var a=r.valueOf(n);return a&&a.identity===n?a:i(r,n)}}},8284:function(p){p.exports=function(s,t){var i={identity:t},n=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(r){return r!==t?n.apply(this,arguments):i},writable:!0}),i}},606:function(p,s,t){var i=t(236);p.exports=function(){var n=i();return{get:function(r,a){var l=n(r);return l.hasOwnProperty("value")?l.value:a},set:function(r,a){return n(r).value=a,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},3349:function(p){"use strict";p.exports=function(s){var t={};return function(i,n,r){var a=i.dtype,l=i.order,c=[a,l.join()].join(),h=t[c];return h||(t[c]=h=s([a,l])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,n,r)}}((function(){return function(s,t,i,n,r,a){var l=s[0],c=i[0],h=[0],u=c;n|=0;var x=0,d=c;for(x=0;x<l;++x){var m=t[n]-a,g=t[n+u]-a;m>=0!=g>=0&&r.push(h[0]+.5+.5*(m+g)/(m-g)),n+=d,++h[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},781:function(p,s,t){"use strict";p.exports=function(n,r){var a=[];return r=+r||0,i(n.hi(n.shape[0]-1),a,r),a};var i=t(3349)},7790:function(){}},o={};function T(p){var s=o[p];if(s!==void 0)return s.exports;var t=o[p]={id:p,loaded:!1,exports:{}};return k[p].call(t.exports,t,t.exports,T),t.loaded=!0,t.exports}T.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),T.nmd=function(p){return p.paths=[],p.children||(p.children=[]),p};var b=T(1964);X.exports=b})()},33576:function(X,I,e){"use strict";function A(oe,re){for(var fe=0;fe<re.length;fe++){var Se=re[fe];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(oe,(be=function(we,Me){if(b(we)!=="object"||we===null)return we;var Ie=we[Symbol.toPrimitive];if(Ie!==void 0){var Oe=Ie.call(we,"string");if(b(Oe)!=="object")return Oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(we)}(Se.key),b(be)==="symbol"?be:String(be)),Se)}var be}function k(oe){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(re){return re.__proto__||Object.getPrototypeOf(re)},k(oe)}function o(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function T(oe,re){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fe,Se){return fe.__proto__=Se,fe},T(oe,re)}function b(oe){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},b(oe)}var p=e(59968),s=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;I.Buffer=r,I.SlowBuffer=function(oe){return+oe!=oe&&(oe=0),r.alloc(+oe)},I.INSPECT_MAX_BYTES=50;var i=2147483647;function n(oe){if(oe>i)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var re=new Uint8Array(oe);return Object.setPrototypeOf(re,r.prototype),re}function r(oe,re,fe){if(typeof oe=="number"){if(typeof re=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(oe)}return a(oe,re,fe)}function a(oe,re,fe){if(typeof oe=="string")return function(we,Me){if(typeof Me=="string"&&Me!==""||(Me="utf8"),!r.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);var Ie=0|d(we,Me),Oe=n(Ie),he=Oe.write(we,Me);return he!==Ie&&(Oe=Oe.slice(0,he)),Oe}(oe,re);if(ArrayBuffer.isView(oe))return function(we){if(pe(we,Uint8Array)){var Me=new Uint8Array(we);return u(Me.buffer,Me.byteOffset,Me.byteLength)}return h(we)}(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(oe));if(pe(oe,ArrayBuffer)||oe&&pe(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(oe,SharedArrayBuffer)||oe&&pe(oe.buffer,SharedArrayBuffer)))return u(oe,re,fe);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=oe.valueOf&&oe.valueOf();if(Se!=null&&Se!==oe)return r.from(Se,re,fe);var be=function(we){if(r.isBuffer(we)){var Me=0|x(we.length),Ie=n(Me);return Ie.length===0||we.copy(Ie,0,0,Me),Ie}return we.length!==void 0?typeof we.length!="number"||ge(we.length)?n(0):h(we):we.type==="Buffer"&&Array.isArray(we.data)?h(we.data):void 0}(oe);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return r.from(oe[Symbol.toPrimitive]("string"),re,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(oe))}function l(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function c(oe){return l(oe),n(oe<0?0:0|x(oe))}function h(oe){for(var re=oe.length<0?0:0|x(oe.length),fe=n(re),Se=0;Se<re;Se+=1)fe[Se]=255&oe[Se];return fe}function u(oe,re,fe){if(re<0||oe.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<re+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return Se=re===void 0&&fe===void 0?new Uint8Array(oe):fe===void 0?new Uint8Array(oe,re):new Uint8Array(oe,re,fe),Object.setPrototypeOf(Se,r.prototype),Se}function x(oe){if(oe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|oe}function d(oe,re){if(r.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||pe(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(oe));var fe=oe.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&fe===0)return 0;for(var be=!1;;)switch(re){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return ve(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*fe;case"hex":return fe>>>1;case"base64":return ye(oe).length;default:if(be)return Se?-1:ve(oe).length;re=(""+re).toLowerCase(),be=!0}}function m(oe,re,fe){var Se=!1;if((re===void 0||re<0)&&(re=0),re>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0)<=(re>>>=0))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return D(this,re,fe);case"utf8":case"utf-8":return C(this,re,fe);case"ascii":return R(this,re,fe);case"latin1":case"binary":return U(this,re,fe);case"base64":return P(this,re,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,re,fe);default:if(Se)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),Se=!0}}function g(oe,re,fe){var Se=oe[re];oe[re]=oe[fe],oe[fe]=Se}function y(oe,re,fe,Se,be){if(oe.length===0)return-1;if(typeof fe=="string"?(Se=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),ge(fe=+fe)&&(fe=be?0:oe.length-1),fe<0&&(fe=oe.length+fe),fe>=oe.length){if(be)return-1;fe=oe.length-1}else if(fe<0){if(!be)return-1;fe=0}if(typeof re=="string"&&(re=r.from(re,Se)),r.isBuffer(re))return re.length===0?-1:v(oe,re,fe,Se,be);if(typeof re=="number")return re&=255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(oe,re,fe):Uint8Array.prototype.lastIndexOf.call(oe,re,fe):v(oe,[re],fe,Se,be);throw new TypeError("val must be string, number or Buffer")}function v(oe,re,fe,Se,be){var we,Me=1,Ie=oe.length,Oe=re.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(oe.length<2||re.length<2)return-1;Me=2,Ie/=2,Oe/=2,fe/=2}function he(Le,Be){return Me===1?Le[Be]:Le.readUInt16BE(Be*Me)}if(be){var _e=-1;for(we=fe;we<Ie;we++)if(he(oe,we)===he(re,_e===-1?0:we-_e)){if(_e===-1&&(_e=we),we-_e+1===Oe)return _e*Me}else _e!==-1&&(we-=we-_e),_e=-1}else for(fe+Oe>Ie&&(fe=Ie-Oe),we=fe;we>=0;we--){for(var Ae=!0,De=0;De<Oe;De++)if(he(oe,we+De)!==he(re,De)){Ae=!1;break}if(Ae)return we}return-1}function _(oe,re,fe,Se){fe=Number(fe)||0;var be=oe.length-fe;Se?(Se=Number(Se))>be&&(Se=be):Se=be;var we,Me=re.length;for(Se>Me/2&&(Se=Me/2),we=0;we<Se;++we){var Ie=parseInt(re.substr(2*we,2),16);if(ge(Ie))return we;oe[fe+we]=Ie}return we}function f(oe,re,fe,Se){return de(ve(re,oe.length-fe),oe,fe,Se)}function S(oe,re,fe,Se){return de(function(be){for(var we=[],Me=0;Me<be.length;++Me)we.push(255&be.charCodeAt(Me));return we}(re),oe,fe,Se)}function w(oe,re,fe,Se){return de(ye(re),oe,fe,Se)}function E(oe,re,fe,Se){return de(function(be,we){for(var Me,Ie,Oe,he=[],_e=0;_e<be.length&&!((we-=2)<0);++_e)Ie=(Me=be.charCodeAt(_e))>>8,Oe=Me%256,he.push(Oe),he.push(Ie);return he}(re,oe.length-fe),oe,fe,Se)}function P(oe,re,fe){return re===0&&fe===oe.length?p.fromByteArray(oe):p.fromByteArray(oe.slice(re,fe))}function C(oe,re,fe){fe=Math.min(oe.length,fe);for(var Se=[],be=re;be<fe;){var we=oe[be],Me=null,Ie=we>239?4:we>223?3:we>191?2:1;if(be+Ie<=fe){var Oe=void 0,he=void 0,_e=void 0,Ae=void 0;switch(Ie){case 1:we<128&&(Me=we);break;case 2:(192&(Oe=oe[be+1]))==128&&(Ae=(31&we)<<6|63&Oe)>127&&(Me=Ae);break;case 3:Oe=oe[be+1],he=oe[be+2],(192&Oe)==128&&(192&he)==128&&(Ae=(15&we)<<12|(63&Oe)<<6|63&he)>2047&&(Ae<55296||Ae>57343)&&(Me=Ae);break;case 4:Oe=oe[be+1],he=oe[be+2],_e=oe[be+3],(192&Oe)==128&&(192&he)==128&&(192&_e)==128&&(Ae=(15&we)<<18|(63&Oe)<<12|(63&he)<<6|63&_e)>65535&&Ae<1114112&&(Me=Ae)}}Me===null?(Me=65533,Ie=1):Me>65535&&(Me-=65536,Se.push(Me>>>10&1023|55296),Me=56320|1023&Me),Se.push(Me),be+=Ie}return function(De){var Le=De.length;if(Le<=O)return String.fromCharCode.apply(String,De);for(var Be="",Ve=0;Ve<Le;)Be+=String.fromCharCode.apply(String,De.slice(Ve,Ve+=O));return Be}(Se)}I.kMaxLength=i,r.TYPED_ARRAY_SUPPORT=function(){try{var oe=new Uint8Array(1),re={foo:function(){return 42}};return Object.setPrototypeOf(re,Uint8Array.prototype),Object.setPrototypeOf(oe,re),oe.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(oe,re,fe){return a(oe,re,fe)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(oe,re,fe){return function(Se,be,we){return l(Se),Se<=0?n(Se):be!==void 0?typeof we=="string"?n(Se).fill(be,we):n(Se).fill(be):n(Se)}(oe,re,fe)},r.allocUnsafe=function(oe){return c(oe)},r.allocUnsafeSlow=function(oe){return c(oe)},r.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==r.prototype},r.compare=function(oe,re){if(pe(oe,Uint8Array)&&(oe=r.from(oe,oe.offset,oe.byteLength)),pe(re,Uint8Array)&&(re=r.from(re,re.offset,re.byteLength)),!r.isBuffer(oe)||!r.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===re)return 0;for(var fe=oe.length,Se=re.length,be=0,we=Math.min(fe,Se);be<we;++be)if(oe[be]!==re[be]){fe=oe[be],Se=re[be];break}return fe<Se?-1:Se<fe?1:0},r.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(oe,re){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return r.alloc(0);var fe;if(re===void 0)for(re=0,fe=0;fe<oe.length;++fe)re+=oe[fe].length;var Se=r.allocUnsafe(re),be=0;for(fe=0;fe<oe.length;++fe){var we=oe[fe];if(pe(we,Uint8Array))be+we.length>Se.length?(r.isBuffer(we)||(we=r.from(we)),we.copy(Se,be)):Uint8Array.prototype.set.call(Se,we,be);else{if(!r.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(Se,be)}be+=we.length}return Se},r.byteLength=d,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var re=0;re<oe;re+=2)g(this,re,re+1);return this},r.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var re=0;re<oe;re+=4)g(this,re,re+3),g(this,re+1,re+2);return this},r.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var re=0;re<oe;re+=8)g(this,re,re+7),g(this,re+1,re+6),g(this,re+2,re+5),g(this,re+3,re+4);return this},r.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?C(this,0,oe):m.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(oe){if(!r.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe||r.compare(this,oe)===0},r.prototype.inspect=function(){var oe="",re=I.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(oe+=" ... "),"<Buffer "+oe+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(oe,re,fe,Se,be){if(pe(oe,Uint8Array)&&(oe=r.from(oe,oe.offset,oe.byteLength)),!r.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(oe));if(re===void 0&&(re=0),fe===void 0&&(fe=oe?oe.length:0),Se===void 0&&(Se=0),be===void 0&&(be=this.length),re<0||fe>oe.length||Se<0||be>this.length)throw new RangeError("out of range index");if(Se>=be&&re>=fe)return 0;if(Se>=be)return-1;if(re>=fe)return 1;if(this===oe)return 0;for(var we=(be>>>=0)-(Se>>>=0),Me=(fe>>>=0)-(re>>>=0),Ie=Math.min(we,Me),Oe=this.slice(Se,be),he=oe.slice(re,fe),_e=0;_e<Ie;++_e)if(Oe[_e]!==he[_e]){we=Oe[_e],Me=he[_e];break}return we<Me?-1:Me<we?1:0},r.prototype.includes=function(oe,re,fe){return this.indexOf(oe,re,fe)!==-1},r.prototype.indexOf=function(oe,re,fe){return y(this,oe,re,fe,!0)},r.prototype.lastIndexOf=function(oe,re,fe){return y(this,oe,re,fe,!1)},r.prototype.write=function(oe,re,fe,Se){if(re===void 0)Se="utf8",fe=this.length,re=0;else if(fe===void 0&&typeof re=="string")Se=re,fe=this.length,re=0;else{if(!isFinite(re))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");re>>>=0,isFinite(fe)?(fe>>>=0,Se===void 0&&(Se="utf8")):(Se=fe,fe=void 0)}var be=this.length-re;if((fe===void 0||fe>be)&&(fe=be),oe.length>0&&(fe<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var we=!1;;)switch(Se){case"hex":return _(this,oe,re,fe);case"utf8":case"utf-8":return f(this,oe,re,fe);case"ascii":case"latin1":case"binary":return S(this,oe,re,fe);case"base64":return w(this,oe,re,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,oe,re,fe);default:if(we)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),we=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function R(oe,re,fe){var Se="";fe=Math.min(oe.length,fe);for(var be=re;be<fe;++be)Se+=String.fromCharCode(127&oe[be]);return Se}function U(oe,re,fe){var Se="";fe=Math.min(oe.length,fe);for(var be=re;be<fe;++be)Se+=String.fromCharCode(oe[be]);return Se}function D(oe,re,fe){var Se=oe.length;(!re||re<0)&&(re=0),(!fe||fe<0||fe>Se)&&(fe=Se);for(var be="",we=re;we<fe;++we)be+=ke[oe[we]];return be}function N(oe,re,fe){for(var Se=oe.slice(re,fe),be="",we=0;we<Se.length-1;we+=2)be+=String.fromCharCode(Se[we]+256*Se[we+1]);return be}function W(oe,re,fe){if(oe%1!=0||oe<0)throw new RangeError("offset is not uint");if(oe+re>fe)throw new RangeError("Trying to access beyond buffer length")}function F(oe,re,fe,Se,be,we){if(!r.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>be||re<we)throw new RangeError('"value" argument is out of bounds');if(fe+Se>oe.length)throw new RangeError("Index out of range")}function j(oe,re,fe,Se,be){ie(re,Se,be,oe,fe,7);var we=Number(re&BigInt(4294967295));oe[fe++]=we,we>>=8,oe[fe++]=we,we>>=8,oe[fe++]=we,we>>=8,oe[fe++]=we;var Me=Number(re>>BigInt(32)&BigInt(4294967295));return oe[fe++]=Me,Me>>=8,oe[fe++]=Me,Me>>=8,oe[fe++]=Me,Me>>=8,oe[fe++]=Me,fe}function q(oe,re,fe,Se,be){ie(re,Se,be,oe,fe,7);var we=Number(re&BigInt(4294967295));oe[fe+7]=we,we>>=8,oe[fe+6]=we,we>>=8,oe[fe+5]=we,we>>=8,oe[fe+4]=we;var Me=Number(re>>BigInt(32)&BigInt(4294967295));return oe[fe+3]=Me,Me>>=8,oe[fe+2]=Me,Me>>=8,oe[fe+1]=Me,Me>>=8,oe[fe]=Me,fe+8}function te(oe,re,fe,Se,be,we){if(fe+Se>oe.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function ee(oe,re,fe,Se,be){return re=+re,fe>>>=0,be||te(oe,0,fe,4),s.write(oe,re,fe,Se,23,4),fe+4}function Q(oe,re,fe,Se,be){return re=+re,fe>>>=0,be||te(oe,0,fe,8),s.write(oe,re,fe,Se,52,8),fe+8}r.prototype.slice=function(oe,re){var fe=this.length;(oe=~~oe)<0?(oe+=fe)<0&&(oe=0):oe>fe&&(oe=fe),(re=re===void 0?fe:~~re)<0?(re+=fe)<0&&(re=0):re>fe&&(re=fe),re<oe&&(re=oe);var Se=this.subarray(oe,re);return Object.setPrototypeOf(Se,r.prototype),Se},r.prototype.readUintLE=r.prototype.readUIntLE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||W(oe,re,this.length);for(var Se=this[oe],be=1,we=0;++we<re&&(be*=256);)Se+=this[oe+we]*be;return Se},r.prototype.readUintBE=r.prototype.readUIntBE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||W(oe,re,this.length);for(var Se=this[oe+--re],be=1;re>0&&(be*=256);)Se+=this[oe+--re]*be;return Se},r.prototype.readUint8=r.prototype.readUInt8=function(oe,re){return oe>>>=0,re||W(oe,1,this.length),this[oe]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(oe,re){return oe>>>=0,re||W(oe,2,this.length),this[oe]|this[oe+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(oe,re){return oe>>>=0,re||W(oe,2,this.length),this[oe]<<8|this[oe+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(oe,re){return oe>>>=0,re||W(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+16777216*this[oe+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(oe,re){return oe>>>=0,re||W(oe,4,this.length),16777216*this[oe]+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},r.prototype.readBigUInt64LE=Ee(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=re+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24),be=this[++oe]+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+fe*Math.pow(2,24);return BigInt(Se)+(BigInt(be)<<BigInt(32))}),r.prototype.readBigUInt64BE=Ee(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=re*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe],be=this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+fe;return(BigInt(Se)<<BigInt(32))+BigInt(be)}),r.prototype.readIntLE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||W(oe,re,this.length);for(var Se=this[oe],be=1,we=0;++we<re&&(be*=256);)Se+=this[oe+we]*be;return Se>=(be*=128)&&(Se-=Math.pow(2,8*re)),Se},r.prototype.readIntBE=function(oe,re,fe){oe>>>=0,re>>>=0,fe||W(oe,re,this.length);for(var Se=re,be=1,we=this[oe+--Se];Se>0&&(be*=256);)we+=this[oe+--Se]*be;return we>=(be*=128)&&(we-=Math.pow(2,8*re)),we},r.prototype.readInt8=function(oe,re){return oe>>>=0,re||W(oe,1,this.length),128&this[oe]?-1*(255-this[oe]+1):this[oe]},r.prototype.readInt16LE=function(oe,re){oe>>>=0,re||W(oe,2,this.length);var fe=this[oe]|this[oe+1]<<8;return 32768&fe?4294901760|fe:fe},r.prototype.readInt16BE=function(oe,re){oe>>>=0,re||W(oe,2,this.length);var fe=this[oe+1]|this[oe]<<8;return 32768&fe?4294901760|fe:fe},r.prototype.readInt32LE=function(oe,re){return oe>>>=0,re||W(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},r.prototype.readInt32BE=function(oe,re){return oe>>>=0,re||W(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},r.prototype.readBigInt64LE=Ee(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=this[oe+4]+this[oe+5]*Math.pow(2,8)+this[oe+6]*Math.pow(2,16)+(fe<<24);return(BigInt(Se)<<BigInt(32))+BigInt(re+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24))}),r.prototype.readBigInt64BE=Ee(function(oe){se(oe>>>=0,"offset");var re=this[oe],fe=this[oe+7];re!==void 0&&fe!==void 0||ae(oe,this.length-8);var Se=(re<<24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe];return(BigInt(Se)<<BigInt(32))+BigInt(this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+fe)}),r.prototype.readFloatLE=function(oe,re){return oe>>>=0,re||W(oe,4,this.length),s.read(this,oe,!0,23,4)},r.prototype.readFloatBE=function(oe,re){return oe>>>=0,re||W(oe,4,this.length),s.read(this,oe,!1,23,4)},r.prototype.readDoubleLE=function(oe,re){return oe>>>=0,re||W(oe,8,this.length),s.read(this,oe,!0,52,8)},r.prototype.readDoubleBE=function(oe,re){return oe>>>=0,re||W(oe,8,this.length),s.read(this,oe,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(oe,re,fe,Se){oe=+oe,re>>>=0,fe>>>=0,Se||F(this,oe,re,fe,Math.pow(2,8*fe)-1,0);var be=1,we=0;for(this[re]=255&oe;++we<fe&&(be*=256);)this[re+we]=oe/be&255;return re+fe},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(oe,re,fe,Se){oe=+oe,re>>>=0,fe>>>=0,Se||F(this,oe,re,fe,Math.pow(2,8*fe)-1,0);var be=fe-1,we=1;for(this[re+be]=255&oe;--be>=0&&(we*=256);)this[re+be]=oe/we&255;return re+fe},r.prototype.writeUint8=r.prototype.writeUInt8=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,1,255,0),this[re]=255&oe,re+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,2,65535,0),this[re]=255&oe,this[re+1]=oe>>>8,re+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,2,65535,0),this[re]=oe>>>8,this[re+1]=255&oe,re+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,4,4294967295,0),this[re+3]=oe>>>24,this[re+2]=oe>>>16,this[re+1]=oe>>>8,this[re]=255&oe,re+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,4,4294967295,0),this[re]=oe>>>24,this[re+1]=oe>>>16,this[re+2]=oe>>>8,this[re+3]=255&oe,re+4},r.prototype.writeBigUInt64LE=Ee(function(oe){return j(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=Ee(function(oe){return q(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(oe,re,fe,Se){if(oe=+oe,re>>>=0,!Se){var be=Math.pow(2,8*fe-1);F(this,oe,re,fe,be-1,-be)}var we=0,Me=1,Ie=0;for(this[re]=255&oe;++we<fe&&(Me*=256);)oe<0&&Ie===0&&this[re+we-1]!==0&&(Ie=1),this[re+we]=(oe/Me>>0)-Ie&255;return re+fe},r.prototype.writeIntBE=function(oe,re,fe,Se){if(oe=+oe,re>>>=0,!Se){var be=Math.pow(2,8*fe-1);F(this,oe,re,fe,be-1,-be)}var we=fe-1,Me=1,Ie=0;for(this[re+we]=255&oe;--we>=0&&(Me*=256);)oe<0&&Ie===0&&this[re+we+1]!==0&&(Ie=1),this[re+we]=(oe/Me>>0)-Ie&255;return re+fe},r.prototype.writeInt8=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,1,127,-128),oe<0&&(oe=255+oe+1),this[re]=255&oe,re+1},r.prototype.writeInt16LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,2,32767,-32768),this[re]=255&oe,this[re+1]=oe>>>8,re+2},r.prototype.writeInt16BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,2,32767,-32768),this[re]=oe>>>8,this[re+1]=255&oe,re+2},r.prototype.writeInt32LE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,4,2147483647,-2147483648),this[re]=255&oe,this[re+1]=oe>>>8,this[re+2]=oe>>>16,this[re+3]=oe>>>24,re+4},r.prototype.writeInt32BE=function(oe,re,fe){return oe=+oe,re>>>=0,fe||F(this,oe,re,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[re]=oe>>>24,this[re+1]=oe>>>16,this[re+2]=oe>>>8,this[re+3]=255&oe,re+4},r.prototype.writeBigInt64LE=Ee(function(oe){return j(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=Ee(function(oe){return q(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeFloatLE=function(oe,re,fe){return ee(this,oe,re,!0,fe)},r.prototype.writeFloatBE=function(oe,re,fe){return ee(this,oe,re,!1,fe)},r.prototype.writeDoubleLE=function(oe,re,fe){return Q(this,oe,re,!0,fe)},r.prototype.writeDoubleBE=function(oe,re,fe){return Q(this,oe,re,!1,fe)},r.prototype.copy=function(oe,re,fe,Se){if(!r.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),Se||Se===0||(Se=this.length),re>=oe.length&&(re=oe.length),re||(re=0),Se>0&&Se<fe&&(Se=fe),Se===fe||oe.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),oe.length-re<Se-fe&&(Se=oe.length-re+fe);var be=Se-fe;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(re,fe,Se):Uint8Array.prototype.set.call(oe,this.subarray(fe,Se),re),be},r.prototype.fill=function(oe,re,fe,Se){if(typeof oe=="string"){if(typeof re=="string"?(Se=re,re=0,fe=this.length):typeof fe=="string"&&(Se=fe,fe=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!r.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(oe.length===1){var be=oe.charCodeAt(0);(Se==="utf8"&&be<128||Se==="latin1")&&(oe=be)}}else typeof oe=="number"?oe&=255:typeof oe=="boolean"&&(oe=Number(oe));if(re<0||this.length<re||this.length<fe)throw new RangeError("Out of range index");if(fe<=re)return this;var we;if(re>>>=0,fe=fe===void 0?this.length:fe>>>0,oe||(oe=0),typeof oe=="number")for(we=re;we<fe;++we)this[we]=oe;else{var Me=r.isBuffer(oe)?oe:r.from(oe,Se),Ie=Me.length;if(Ie===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(we=0;we<fe-re;++we)this[we+re]=Me[we%Ie]}return this};var J={};function K(oe,re,fe){J[oe]=function(Se){function be(){var Ie;return function(Oe,he){if(!(Oe instanceof he))throw new TypeError("Cannot call a class as a function")}(this,be),Ie=function(Oe,he,_e){return he=k(he),function(Ae,De){if(De&&(b(De)==="object"||typeof De=="function"))return De;if(De!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(Ae)}(Oe,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(he,_e||[],k(Oe).constructor):he.apply(Oe,_e))}(this,be),Object.defineProperty(o(Ie),"message",{value:re.apply(o(Ie),arguments),writable:!0,configurable:!0}),Ie.name="".concat(Ie.name," [").concat(oe,"]"),Ie.stack,delete Ie.name,Ie}var we,Me;return function(Ie,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Super expression must either be null or a function");Ie.prototype=Object.create(Oe&&Oe.prototype,{constructor:{value:Ie,writable:!0,configurable:!0}}),Object.defineProperty(Ie,"prototype",{writable:!1}),Oe&&T(Ie,Oe)}(be,Se),we=be,(Me=[{key:"code",get:function(){return oe},set:function(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(oe,"]: ").concat(this.message)}}])&&A(we.prototype,Me),Object.defineProperty(we,"prototype",{writable:!1}),be}(fe)}function Y(oe){for(var re="",fe=oe.length,Se=oe[0]==="-"?1:0;fe>=Se+4;fe-=3)re="_".concat(oe.slice(fe-3,fe)).concat(re);return"".concat(oe.slice(0,fe)).concat(re)}function ie(oe,re,fe,Se,be,we){if(oe>fe||oe<re){var Me,Ie=typeof re=="bigint"?"n":"";throw Me=we>3?re===0||re===BigInt(0)?">= 0".concat(Ie," and < 2").concat(Ie," ** ").concat(8*(we+1)).concat(Ie):">= -(2".concat(Ie," ** ").concat(8*(we+1)-1).concat(Ie,") and < 2 ** ")+"".concat(8*(we+1)-1).concat(Ie):">= ".concat(re).concat(Ie," and <= ").concat(fe).concat(Ie),new J.ERR_OUT_OF_RANGE("value",Me,oe)}(function(Oe,he,_e){se(he,"offset"),Oe[he]!==void 0&&Oe[he+_e]!==void 0||ae(he,Oe.length-(_e+1))})(Se,be,we)}function se(oe,re){if(typeof oe!="number")throw new J.ERR_INVALID_ARG_TYPE(re,"number",oe)}function ae(oe,re,fe){throw Math.floor(oe)!==oe?(se(oe,fe),new J.ERR_OUT_OF_RANGE(fe||"offset","an integer",oe)):re<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE(fe||"offset",">= ".concat(fe?1:0," and <= ").concat(re),oe)}K("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?"".concat(oe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(oe,re){return'The "'.concat(oe,'" argument must be of type number. Received type ').concat(b(re))},TypeError),K("ERR_OUT_OF_RANGE",function(oe,re,fe){var Se='The value of "'.concat(oe,'" is out of range.'),be=fe;return Number.isInteger(fe)&&Math.abs(fe)>Math.pow(2,32)?be=Y(String(fe)):typeof fe=="bigint"&&(be=String(fe),(fe>Math.pow(BigInt(2),BigInt(32))||fe<-Math.pow(BigInt(2),BigInt(32)))&&(be=Y(be)),be+="n"),Se+" It must be ".concat(re,". Received ").concat(be)},RangeError);var ue=/[^+/0-9A-Za-z-_]/g;function ve(oe,re){var fe;re=re||1/0;for(var Se=oe.length,be=null,we=[],Me=0;Me<Se;++Me){if((fe=oe.charCodeAt(Me))>55295&&fe<57344){if(!be){if(fe>56319){(re-=3)>-1&&we.push(239,191,189);continue}if(Me+1===Se){(re-=3)>-1&&we.push(239,191,189);continue}be=fe;continue}if(fe<56320){(re-=3)>-1&&we.push(239,191,189),be=fe;continue}fe=65536+(be-55296<<10|fe-56320)}else be&&(re-=3)>-1&&we.push(239,191,189);if(be=null,fe<128){if((re-=1)<0)break;we.push(fe)}else if(fe<2048){if((re-=2)<0)break;we.push(fe>>6|192,63&fe|128)}else if(fe<65536){if((re-=3)<0)break;we.push(fe>>12|224,fe>>6&63|128,63&fe|128)}else{if(!(fe<1114112))throw new Error("Invalid code point");if((re-=4)<0)break;we.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,63&fe|128)}}return we}function ye(oe){return p.toByteArray(function(re){if((re=(re=re.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(oe))}function de(oe,re,fe,Se){var be;for(be=0;be<Se&&!(be+fe>=re.length||be>=oe.length);++be)re[be+fe]=oe[be];return be}function pe(oe,re){return oe instanceof re||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===re.name}function ge(oe){return oe!=oe}var ke=function(){for(var oe="0123456789abcdef",re=new Array(256),fe=0;fe<16;++fe)for(var Se=16*fe,be=0;be<16;++be)re[Se+be]=oe[fe]+oe[be];return re}();function Ee(oe){return typeof BigInt>"u"?me:oe}function me(){throw new Error("BigInt not supported")}},25928:function(X){"use strict";X.exports=k,X.exports.isMobile=k,X.exports.default=k;var I=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,A=/android|ipad|playbook|silk/i;function k(o){o||(o={});var T=o.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var b=I.test(T)&&!e.test(T)||!!o.tablet&&A.test(T);return!b&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(b=!0),b}},48932:function(X,I,e){"use strict";e.r(I),e.d(I,{sankeyCenter:function(){return n},sankeyCircular:function(){return P},sankeyJustify:function(){return i},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var A=e(84706),k=e(34712),o=e(10132),T=e(6688),b=e.n(T);function p(de){return de.target.depth}function s(de){return de.depth}function t(de,pe){return pe-1-de.height}function i(de,pe){return de.sourceLinks.length?de.depth:pe-1}function n(de){return de.targetLinks.length?de.depth:de.sourceLinks.length?(0,A.SY)(de.sourceLinks,p)-1:0}function r(de){return function(){return de}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de};function l(de,pe){return h(de.source,pe.source)||de.index-pe.index}function c(de,pe){return h(de.target,pe.target)||de.index-pe.index}function h(de,pe){return de.partOfCycle===pe.partOfCycle?de.y0-pe.y0:de.circularLinkType==="top"||pe.circularLinkType==="bottom"?-1:1}function u(de){return de.value}function x(de){return(de.y0+de.y1)/2}function d(de){return x(de.source)}function m(de){return x(de.target)}function g(de){return de.index}function y(de){return de.nodes}function v(de){return de.links}function _(de,pe){var ge=de.get(pe);if(!ge)throw new Error("missing: "+pe);return ge}function f(de,pe){return pe(de)}var S=25,w=10,E=.3;function P(){var de,pe,ge=0,ke=0,Ee=1,me=1,oe=24,re=g,fe=i,Se=y,be=v,we=32,Me=2,Ie=null;function Oe(){var _e={nodes:Se.apply(null,arguments),links:be.apply(null,arguments)};(function(De){De.nodes.forEach(function(Be,Ve){Be.index=Ve,Be.sourceLinks=[],Be.targetLinks=[]});var Le=(0,k.kH)(De.nodes,re);De.links.forEach(function(Be,Ve){Be.index=Ve;var Ze=Be.source,rt=Be.target;(Ze===void 0?"undefined":a(Ze))!=="object"&&(Ze=Be.source=_(Le,Ze)),(rt===void 0?"undefined":a(rt))!=="object"&&(rt=Be.target=_(Le,rt)),Ze.sourceLinks.push(Be),rt.targetLinks.push(Be)})})(_e),function(De,Le,Be){var Ve=0;if(Be===null){for(var Ze=[],rt=0;rt<De.links.length;rt++){var it=De.links[rt],dt=it.source.index,mt=it.target.index;Ze[dt]||(Ze[dt]=[]),Ze[mt]||(Ze[mt]=[]),Ze[dt].indexOf(mt)===-1&&Ze[dt].push(mt)}var ht=b()(Ze);ht.sort(function(wt,Pt){return wt.length-Pt.length});var Qe={};for(rt=0;rt<ht.length;rt++){var Je=ht[rt].slice(-2);Qe[Je[0]]||(Qe[Je[0]]={}),Qe[Je[0]][Je[1]]=!0}De.links.forEach(function(wt){var Pt=wt.target.index,It=wt.source.index;Pt===It||Qe[It]&&Qe[It][Pt]?(wt.circular=!0,wt.circularLinkID=Ve,Ve+=1):wt.circular=!1})}else De.links.forEach(function(wt){wt.source[Be]<wt.target[Be]?wt.circular=!1:(wt.circular=!0,wt.circularLinkID=Ve,Ve+=1)})}(_e,0,Ie),function(De){De.nodes.forEach(function(Le){Le.partOfCycle=!1,Le.value=Math.max((0,A.oh)(Le.sourceLinks,u),(0,A.oh)(Le.targetLinks,u)),Le.sourceLinks.forEach(function(Be){Be.circular&&(Le.partOfCycle=!0,Le.circularLinkType=Be.circularLinkType)}),Le.targetLinks.forEach(function(Be){Be.circular&&(Le.partOfCycle=!0,Le.circularLinkType=Be.circularLinkType)})})}(_e),function(De){var Le,Be,Ve;for(Le=De.nodes,Be=[],Ve=0;Le.length;++Ve,Le=Be,Be=[])Le.forEach(function(Ze){Ze.depth=Ve,Ze.sourceLinks.forEach(function(rt){Be.indexOf(rt.target)<0&&!rt.circular&&Be.push(rt.target)})});for(Le=De.nodes,Be=[],Ve=0;Le.length;++Ve,Le=Be,Be=[])Le.forEach(function(Ze){Ze.height=Ve,Ze.targetLinks.forEach(function(rt){Be.indexOf(rt.source)<0&&!rt.circular&&Be.push(rt.source)})});De.nodes.forEach(function(Ze){Ze.column=Math.floor(fe.call(null,Ze,Ve))})}(_e),C(_e,re),function(De,Le,Be){var Ve=(0,k.UJ)().key(function(mt){return mt.column}).sortKeys(A.XE).entries(De.nodes).map(function(mt){return mt.values});(function(mt){if(pe){var ht=1/0;Ve.forEach(function(Pt){var It=me*pe/(Pt.length+1);ht=It<ht?It:ht}),de=ht}var Qe=(0,A.SY)(Ve,function(Pt){return(me-ke-(Pt.length-1)*de)/(0,A.oh)(Pt,u)});Qe*=E,De.links.forEach(function(Pt){Pt.width=Pt.value*Qe});var Je=function(Pt){var It=0,At=0,qe=0,Ye=0,Ne=(0,A.kv)(Pt.nodes,function(We){return We.column});return Pt.links.forEach(function(We){We.circular&&(We.circularLinkType=="top"?It+=We.width:At+=We.width,We.target.column==0&&(Ye+=We.width),We.source.column==Ne&&(qe+=We.width))}),{top:It=It>0?It+S+w:It,bottom:At=At>0?At+S+w:At,left:Ye=Ye>0?Ye+S+w:Ye,right:qe=qe>0?qe+S+w:qe}}(De),wt=function(Pt,It){var At=(0,A.kv)(Pt.nodes,function(at){return at.column}),qe=Ee-ge,Ye=me-ke,Ne=qe/(qe+It.right+It.left),We=Ye/(Ye+It.top+It.bottom);return ge=ge*Ne+It.left,Ee=It.right==0?Ee:Ee*Ne,ke=ke*We+It.top,me*=We,Pt.nodes.forEach(function(at){at.x0=ge+at.column*((Ee-ge-oe)/At),at.x1=at.x0+oe}),We}(De,Je);Qe*=wt,De.links.forEach(function(Pt){Pt.width=Pt.value*Qe}),Ve.forEach(function(Pt){var It=Pt.length;Pt.forEach(function(At,qe){At.depth==Ve.length-1&&It==1||At.depth==0&&It==1?(At.y0=me/2-At.value*Qe,At.y1=At.y0+At.value*Qe):At.partOfCycle?R(At,mt)==0?(At.y0=me/2+qe,At.y1=At.y0+At.value*Qe):At.circularLinkType=="top"?(At.y0=ke+qe,At.y1=At.y0+At.value*Qe):(At.y0=me-At.value*Qe-qe,At.y1=At.y0+At.value*Qe):Je.top==0||Je.bottom==0?(At.y0=(me-ke)/It*qe,At.y1=At.y0+At.value*Qe):(At.y0=(me-ke)/2-It/2+qe,At.y1=At.y0+At.value*Qe)})})})(Be),dt();for(var Ze=1,rt=Le;rt>0;--rt)it(Ze*=.99,Be),dt();function it(mt,ht){var Qe=Ve.length;Ve.forEach(function(Je){var wt=Je.length,Pt=Je[0].depth;Je.forEach(function(It){var At;if((It.sourceLinks.length||It.targetLinks.length)&&!(It.partOfCycle&&R(It,ht)>0))if(Pt==0&&wt==1)At=It.y1-It.y0,It.y0=me/2-At/2,It.y1=me/2+At/2;else if(Pt==Qe-1&&wt==1)At=It.y1-It.y0,It.y0=me/2-At/2,It.y1=me/2+At/2;else{var qe=(0,A.mo)(It.sourceLinks,m),Ye=(0,A.mo)(It.targetLinks,d),Ne=((qe&&Ye?(qe+Ye)/2:qe||Ye)-x(It))*mt;It.y0+=Ne,It.y1+=Ne}})})}function dt(){Ve.forEach(function(mt){var ht,Qe,Je,wt=ke,Pt=mt.length;for(mt.sort(h),Je=0;Je<Pt;++Je)(Qe=wt-(ht=mt[Je]).y0)>0&&(ht.y0+=Qe,ht.y1+=Qe),wt=ht.y1+de;if((Qe=wt-de-me)>0)for(wt=ht.y0-=Qe,ht.y1-=Qe,Je=Pt-2;Je>=0;--Je)(Qe=(ht=mt[Je]).y1+de-wt)>0&&(ht.y0-=Qe,ht.y1-=Qe),wt=ht.y0})}}(_e,we,re),he(_e);for(var Ae=0;Ae<4;Ae++)se(_e,me,re),ae(_e,0,re),Y(_e,ke,me,re),se(_e,me,re),ae(_e,0,re);return function(De,Le,Be){var Ve=De.nodes,Ze=De.links,rt=!1,it=!1;if(Ze.forEach(function(ht){ht.circularLinkType=="top"?rt=!0:ht.circularLinkType=="bottom"&&(it=!0)}),rt==0||it==0){var dt=(0,A.SY)(Ve,function(ht){return ht.y0}),mt=(Be-Le)/((0,A.kv)(Ve,function(ht){return ht.y1})-dt);Ve.forEach(function(ht){var Qe=(ht.y1-ht.y0)*mt;ht.y0=(ht.y0-dt)*mt,ht.y1=ht.y0+Qe}),Ze.forEach(function(ht){ht.y0=(ht.y0-dt)*mt,ht.y1=(ht.y1-dt)*mt,ht.width=ht.width*mt})}}(_e,ke,me),N(_e,Me,me,re),_e}function he(_e){_e.nodes.forEach(function(Ae){Ae.sourceLinks.sort(c),Ae.targetLinks.sort(l)}),_e.nodes.forEach(function(Ae){var De=Ae.y0,Le=De,Be=Ae.y1,Ve=Be;Ae.sourceLinks.forEach(function(Ze){Ze.circular?(Ze.y0=Be-Ze.width/2,Be-=Ze.width):(Ze.y0=De+Ze.width/2,De+=Ze.width)}),Ae.targetLinks.forEach(function(Ze){Ze.circular?(Ze.y1=Ve-Ze.width/2,Ve-=Ze.width):(Ze.y1=Le+Ze.width/2,Le+=Ze.width)})})}return Oe.nodeId=function(_e){return arguments.length?(re=typeof _e=="function"?_e:r(_e),Oe):re},Oe.nodeAlign=function(_e){return arguments.length?(fe=typeof _e=="function"?_e:r(_e),Oe):fe},Oe.nodeWidth=function(_e){return arguments.length?(oe=+_e,Oe):oe},Oe.nodePadding=function(_e){return arguments.length?(de=+_e,Oe):de},Oe.nodes=function(_e){return arguments.length?(Se=typeof _e=="function"?_e:r(_e),Oe):Se},Oe.links=function(_e){return arguments.length?(be=typeof _e=="function"?_e:r(_e),Oe):be},Oe.size=function(_e){return arguments.length?(ge=ke=0,Ee=+_e[0],me=+_e[1],Oe):[Ee-ge,me-ke]},Oe.extent=function(_e){return arguments.length?(ge=+_e[0][0],Ee=+_e[1][0],ke=+_e[0][1],me=+_e[1][1],Oe):[[ge,ke],[Ee,me]]},Oe.iterations=function(_e){return arguments.length?(we=+_e,Oe):we},Oe.circularLinkGap=function(_e){return arguments.length?(Me=+_e,Oe):Me},Oe.nodePaddingRatio=function(_e){return arguments.length?(pe=+_e,Oe):pe},Oe.sortNodes=function(_e){return arguments.length?(Ie=_e,Oe):Ie},Oe.update=function(_e){return C(_e,re),he(_e),_e.links.forEach(function(Ae){Ae.circular&&(Ae.circularLinkType=Ae.y0+Ae.y1<me?"top":"bottom",Ae.source.circularLinkType=Ae.circularLinkType,Ae.target.circularLinkType=Ae.circularLinkType)}),se(_e,me,re,!1),ae(_e,0,re),N(_e,Me,me,re),_e},Oe}function C(de,pe){var ge=0,ke=0;de.links.forEach(function(Ee){Ee.circular&&(Ee.source.circularLinkType||Ee.target.circularLinkType?Ee.circularLinkType=Ee.source.circularLinkType?Ee.source.circularLinkType:Ee.target.circularLinkType:Ee.circularLinkType=ge<ke?"top":"bottom",Ee.circularLinkType=="top"?ge+=1:ke+=1,de.nodes.forEach(function(me){f(me,pe)!=f(Ee.source,pe)&&f(me,pe)!=f(Ee.target,pe)||(me.circularLinkType=Ee.circularLinkType)}))}),de.links.forEach(function(Ee){Ee.circular&&(Ee.source.circularLinkType==Ee.target.circularLinkType&&(Ee.circularLinkType=Ee.source.circularLinkType),ye(Ee,pe)&&(Ee.circularLinkType=Ee.source.circularLinkType))})}function O(de){var pe=Math.abs(de.y1-de.y0),ge=Math.abs(de.target.x0-de.source.x1);return Math.atan(ge/pe)}function R(de,pe){var ge=0;de.sourceLinks.forEach(function(Ee){ge=Ee.circular&&!ye(Ee,pe)?ge+1:ge});var ke=0;return de.targetLinks.forEach(function(Ee){ke=Ee.circular&&!ye(Ee,pe)?ke+1:ke}),ge+ke}function U(de){var pe=de.source.sourceLinks,ge=0;pe.forEach(function(me){ge=me.circular?ge+1:ge});var ke=de.target.targetLinks,Ee=0;return ke.forEach(function(me){Ee=me.circular?Ee+1:Ee}),!(ge>1||Ee>1)}function D(de,pe,ge){return de.sort(W),de.forEach(function(ke,Ee){var me,oe,re=0;if(ye(ke,ge)&&U(ke))ke.circularPathData.verticalBuffer=re+ke.width/2;else{for(var fe=0;fe<Ee;fe++)if(me=de[Ee],oe=de[fe],!(me.source.column<oe.target.column||me.target.column>oe.source.column)){var Se=de[fe].circularPathData.verticalBuffer+de[fe].width/2+pe;re=Se>re?Se:re}ke.circularPathData.verticalBuffer=re+ke.width/2}}),de}function N(de,pe,ge,ke){var Ee=(0,A.SY)(de.links,function(me){return me.source.y0});de.links.forEach(function(me){me.circular&&(me.circularPathData={})}),D(de.links.filter(function(me){return me.circularLinkType=="top"}),pe,ke),D(de.links.filter(function(me){return me.circularLinkType=="bottom"}),pe,ke),de.links.forEach(function(me){if(me.circular){if(me.circularPathData.arcRadius=me.width+w,me.circularPathData.leftNodeBuffer=5,me.circularPathData.rightNodeBuffer=5,me.circularPathData.sourceWidth=me.source.x1-me.source.x0,me.circularPathData.sourceX=me.source.x0+me.circularPathData.sourceWidth,me.circularPathData.targetX=me.target.x0,me.circularPathData.sourceY=me.y0,me.circularPathData.targetY=me.y1,ye(me,ke)&&U(me))me.circularPathData.leftSmallArcRadius=w+me.width/2,me.circularPathData.leftLargeArcRadius=w+me.width/2,me.circularPathData.rightSmallArcRadius=w+me.width/2,me.circularPathData.rightLargeArcRadius=w+me.width/2,me.circularLinkType=="bottom"?(me.circularPathData.verticalFullExtent=me.source.y1+S+me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.rightLargeArcRadius):(me.circularPathData.verticalFullExtent=me.source.y0-S-me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.rightLargeArcRadius);else{var oe=me.source.column,re=me.circularLinkType,fe=de.links.filter(function(we){return we.source.column==oe&&we.circularLinkType==re});me.circularLinkType=="bottom"?fe.sort(j):fe.sort(F);var Se=0;fe.forEach(function(we,Me){we.circularLinkID==me.circularLinkID&&(me.circularPathData.leftSmallArcRadius=w+me.width/2+Se,me.circularPathData.leftLargeArcRadius=w+me.width/2+Me*pe+Se),Se+=we.width}),oe=me.target.column,fe=de.links.filter(function(we){return we.target.column==oe&&we.circularLinkType==re}),me.circularLinkType=="bottom"?fe.sort(te):fe.sort(q),Se=0,fe.forEach(function(we,Me){we.circularLinkID==me.circularLinkID&&(me.circularPathData.rightSmallArcRadius=w+me.width/2+Se,me.circularPathData.rightLargeArcRadius=w+me.width/2+Me*pe+Se),Se+=we.width}),me.circularLinkType=="bottom"?(me.circularPathData.verticalFullExtent=Math.max(ge,me.source.y1,me.target.y1)+S+me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.rightLargeArcRadius):(me.circularPathData.verticalFullExtent=Ee-S-me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.rightLargeArcRadius)}me.circularPathData.leftInnerExtent=me.circularPathData.sourceX+me.circularPathData.leftNodeBuffer,me.circularPathData.rightInnerExtent=me.circularPathData.targetX-me.circularPathData.rightNodeBuffer,me.circularPathData.leftFullExtent=me.circularPathData.sourceX+me.circularPathData.leftLargeArcRadius+me.circularPathData.leftNodeBuffer,me.circularPathData.rightFullExtent=me.circularPathData.targetX-me.circularPathData.rightLargeArcRadius-me.circularPathData.rightNodeBuffer}if(me.circular)me.path=function(we){return we.circularLinkType=="top"?"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 0 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY-we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 0 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 0 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY-we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 0 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY:"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 1 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY+we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 1 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 1 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY+we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 1 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY}(me);else{var be=(0,o.ak)().source(function(we){return[we.source.x0+(we.source.x1-we.source.x0),we.y0]}).target(function(we){return[we.target.x0,we.y1]});me.path=be(me)}})}function W(de,pe){return ee(de)==ee(pe)?de.circularLinkType=="bottom"?j(de,pe):F(de,pe):ee(pe)-ee(de)}function F(de,pe){return de.y0-pe.y0}function j(de,pe){return pe.y0-de.y0}function q(de,pe){return de.y1-pe.y1}function te(de,pe){return pe.y1-de.y1}function ee(de){return de.target.column-de.source.column}function Q(de){return de.target.x0-de.source.x1}function J(de,pe){var ge=O(de),ke=Q(pe)/Math.tan(ge);return ve(de)=="up"?de.y1+ke:de.y1-ke}function K(de,pe){var ge=O(de),ke=Q(pe)/Math.tan(ge);return ve(de)=="up"?de.y1-ke:de.y1+ke}function Y(de,pe,ge,ke){de.links.forEach(function(Ee){if(!Ee.circular&&Ee.target.column-Ee.source.column>1){var me=Ee.source.column+1,oe=Ee.target.column-1,re=1,fe=oe-me+1;for(re=1;me<=oe;me++,re++)de.nodes.forEach(function(Se){if(Se.column==me){var be,we=re/(fe+1),Me=Math.pow(1-we,3),Ie=3*we*Math.pow(1-we,2),Oe=3*Math.pow(we,2)*(1-we),he=Math.pow(we,3),_e=Me*Ee.y0+Ie*Ee.y0+Oe*Ee.y1+he*Ee.y1,Ae=_e-Ee.width/2,De=_e+Ee.width/2;Ae>Se.y0&&Ae<Se.y1?(be=Se.y1-Ae+10,be=Se.circularLinkType=="bottom"?be:-be,Se=ie(Se,be,pe,ge),de.nodes.forEach(function(Le){var Be,Ve;f(Le,ke)!=f(Se,ke)&&Le.column==Se.column&&(Ve=Le,(Be=Se).y0>Ve.y0&&Be.y0<Ve.y1||Be.y1>Ve.y0&&Be.y1<Ve.y1||Be.y0<Ve.y0&&Be.y1>Ve.y1)&&ie(Le,be,pe,ge)})):(De>Se.y0&&De<Se.y1||Ae<Se.y0&&De>Se.y1)&&(be=De-Se.y0+10,Se=ie(Se,be,pe,ge),de.nodes.forEach(function(Le){f(Le,ke)!=f(Se,ke)&&Le.column==Se.column&&Le.y0<Se.y1&&Le.y1>Se.y1&&ie(Le,be,pe,ge)}))}})}})}function ie(de,pe,ge,ke){return de.y0+pe>=ge&&de.y1+pe<=ke&&(de.y0=de.y0+pe,de.y1=de.y1+pe,de.targetLinks.forEach(function(Ee){Ee.y1=Ee.y1+pe}),de.sourceLinks.forEach(function(Ee){Ee.y0=Ee.y0+pe})),de}function se(de,pe,ge,ke){de.nodes.forEach(function(Ee){ke&&Ee.y+(Ee.y1-Ee.y0)>pe&&(Ee.y=Ee.y-(Ee.y+(Ee.y1-Ee.y0)-pe));var me=de.links.filter(function(fe){return f(fe.source,ge)==f(Ee,ge)}),oe=me.length;oe>1&&me.sort(function(fe,Se){if(!fe.circular&&!Se.circular){if(fe.target.column==Se.target.column||!ue(fe,Se))return fe.y1-Se.y1;if(fe.target.column>Se.target.column){var be=K(Se,fe);return fe.y1-be}if(Se.target.column>fe.target.column)return K(fe,Se)-Se.y1}return fe.circular&&!Se.circular?fe.circularLinkType=="top"?-1:1:Se.circular&&!fe.circular?Se.circularLinkType=="top"?1:-1:fe.circular&&Se.circular?fe.circularLinkType===Se.circularLinkType&&fe.circularLinkType=="top"?fe.target.column===Se.target.column?fe.target.y1-Se.target.y1:Se.target.column-fe.target.column:fe.circularLinkType===Se.circularLinkType&&fe.circularLinkType=="bottom"?fe.target.column===Se.target.column?Se.target.y1-fe.target.y1:fe.target.column-Se.target.column:fe.circularLinkType=="top"?-1:1:void 0});var re=Ee.y0;me.forEach(function(fe){fe.y0=re+fe.width/2,re+=fe.width}),me.forEach(function(fe,Se){if(fe.circularLinkType=="bottom"){for(var be=Se+1,we=0;be<oe;be++)we+=me[be].width;fe.y0=Ee.y1-we-fe.width/2}})})}function ae(de,pe,ge){de.nodes.forEach(function(ke){var Ee=de.links.filter(function(re){return f(re.target,ge)==f(ke,ge)}),me=Ee.length;me>1&&Ee.sort(function(re,fe){if(!re.circular&&!fe.circular){if(re.source.column==fe.source.column||!ue(re,fe))return re.y0-fe.y0;if(fe.source.column<re.source.column){var Se=J(fe,re);return re.y0-Se}if(re.source.column<fe.source.column)return J(re,fe)-fe.y0}return re.circular&&!fe.circular?re.circularLinkType=="top"?-1:1:fe.circular&&!re.circular?fe.circularLinkType=="top"?1:-1:re.circular&&fe.circular?re.circularLinkType===fe.circularLinkType&&re.circularLinkType=="top"?re.source.column===fe.source.column?re.source.y1-fe.source.y1:re.source.column-fe.source.column:re.circularLinkType===fe.circularLinkType&&re.circularLinkType=="bottom"?re.source.column===fe.source.column?re.source.y1-fe.source.y1:fe.source.column-re.source.column:re.circularLinkType=="top"?-1:1:void 0});var oe=ke.y0;Ee.forEach(function(re){re.y1=oe+re.width/2,oe+=re.width}),Ee.forEach(function(re,fe){if(re.circularLinkType=="bottom"){for(var Se=fe+1,be=0;Se<me;Se++)be+=Ee[Se].width;re.y1=ke.y1-be-re.width/2}})})}function ue(de,pe){return ve(de)==ve(pe)}function ve(de){return de.y0-de.y1>0?"up":"down"}function ye(de,pe){return f(de.source,pe)==f(de.target,pe)}},26800:function(X,I,e){"use strict";e.r(I),e.d(I,{sankey:function(){return g},sankeyCenter:function(){return s},sankeyJustify:function(){return p},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return f},sankeyRight:function(){return b}});var A=e(84706),k=e(34712);function o(S){return S.target.depth}function T(S){return S.depth}function b(S,w){return w-1-S.height}function p(S,w){return S.sourceLinks.length?S.depth:w-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,A.SY)(S.sourceLinks,o)-1:0}function t(S){return function(){return S}}function i(S,w){return r(S.source,w.source)||S.index-w.index}function n(S,w){return r(S.target,w.target)||S.index-w.index}function r(S,w){return S.y0-w.y0}function a(S){return S.value}function l(S){return(S.y0+S.y1)/2}function c(S){return l(S.source)*S.value}function h(S){return l(S.target)*S.value}function u(S){return S.index}function x(S){return S.nodes}function d(S){return S.links}function m(S,w){var E=S.get(w);if(!E)throw new Error("missing: "+w);return E}function g(){var S=0,w=0,E=1,P=1,C=24,O=8,R=u,U=p,D=x,N=d,W=32;function F(){var q={nodes:D.apply(null,arguments),links:N.apply(null,arguments)};return function(te){te.nodes.forEach(function(Q,J){Q.index=J,Q.sourceLinks=[],Q.targetLinks=[]});var ee=(0,k.kH)(te.nodes,R);te.links.forEach(function(Q,J){Q.index=J;var K=Q.source,Y=Q.target;typeof K!="object"&&(K=Q.source=m(ee,K)),typeof Y!="object"&&(Y=Q.target=m(ee,Y)),K.sourceLinks.push(Q),Y.targetLinks.push(Q)})}(q),function(te){te.nodes.forEach(function(ee){ee.value=Math.max((0,A.oh)(ee.sourceLinks,a),(0,A.oh)(ee.targetLinks,a))})}(q),function(te){var ee,Q,J;for(ee=te.nodes,Q=[],J=0;ee.length;++J,ee=Q,Q=[])ee.forEach(function(Y){Y.depth=J,Y.sourceLinks.forEach(function(ie){Q.indexOf(ie.target)<0&&Q.push(ie.target)})});for(ee=te.nodes,Q=[],J=0;ee.length;++J,ee=Q,Q=[])ee.forEach(function(Y){Y.height=J,Y.targetLinks.forEach(function(ie){Q.indexOf(ie.source)<0&&Q.push(ie.source)})});var K=(E-S-C)/(J-1);te.nodes.forEach(function(Y){Y.x1=(Y.x0=S+Math.max(0,Math.min(J-1,Math.floor(U.call(null,Y,J))))*K)+C})}(q),function(te){var ee=(0,k.UJ)().key(function(se){return se.x0}).sortKeys(A.XE).entries(te.nodes).map(function(se){return se.values});(function(){var se=(0,A.kv)(ee,function(ve){return ve.length}),ae=.6666666666666666*(P-w)/(se-1);O>ae&&(O=ae);var ue=(0,A.SY)(ee,function(ve){return(P-w-(ve.length-1)*O)/(0,A.oh)(ve,a)});ee.forEach(function(ve){ve.forEach(function(ye,de){ye.y1=(ye.y0=de)+ye.value*ue})}),te.links.forEach(function(ve){ve.width=ve.value*ue})})(),ie();for(var Q=1,J=W;J>0;--J)Y(Q*=.99),ie(),K(Q),ie();function K(se){ee.forEach(function(ae){ae.forEach(function(ue){if(ue.targetLinks.length){var ve=((0,A.oh)(ue.targetLinks,c)/(0,A.oh)(ue.targetLinks,a)-l(ue))*se;ue.y0+=ve,ue.y1+=ve}})})}function Y(se){ee.slice().reverse().forEach(function(ae){ae.forEach(function(ue){if(ue.sourceLinks.length){var ve=((0,A.oh)(ue.sourceLinks,h)/(0,A.oh)(ue.sourceLinks,a)-l(ue))*se;ue.y0+=ve,ue.y1+=ve}})})}function ie(){ee.forEach(function(se){var ae,ue,ve,ye=w,de=se.length;for(se.sort(r),ve=0;ve<de;++ve)(ue=ye-(ae=se[ve]).y0)>0&&(ae.y0+=ue,ae.y1+=ue),ye=ae.y1+O;if((ue=ye-O-P)>0)for(ye=ae.y0-=ue,ae.y1-=ue,ve=de-2;ve>=0;--ve)(ue=(ae=se[ve]).y1+O-ye)>0&&(ae.y0-=ue,ae.y1-=ue),ye=ae.y0})}}(q),j(q),q}function j(q){q.nodes.forEach(function(te){te.sourceLinks.sort(n),te.targetLinks.sort(i)}),q.nodes.forEach(function(te){var ee=te.y0,Q=ee;te.sourceLinks.forEach(function(J){J.y0=ee+J.width/2,ee+=J.width}),te.targetLinks.forEach(function(J){J.y1=Q+J.width/2,Q+=J.width})})}return F.update=function(q){return j(q),q},F.nodeId=function(q){return arguments.length?(R=typeof q=="function"?q:t(q),F):R},F.nodeAlign=function(q){return arguments.length?(U=typeof q=="function"?q:t(q),F):U},F.nodeWidth=function(q){return arguments.length?(C=+q,F):C},F.nodePadding=function(q){return arguments.length?(O=+q,F):O},F.nodes=function(q){return arguments.length?(D=typeof q=="function"?q:t(q),F):D},F.links=function(q){return arguments.length?(N=typeof q=="function"?q:t(q),F):N},F.size=function(q){return arguments.length?(S=w=0,E=+q[0],P=+q[1],F):[E-S,P-w]},F.extent=function(q){return arguments.length?(S=+q[0][0],E=+q[1][0],w=+q[0][1],P=+q[1][1],F):[[S,w],[E,P]]},F.iterations=function(q){return arguments.length?(W=+q,F):W},F}var y=e(10132);function v(S){return[S.source.x1,S.y0]}function _(S){return[S.target.x0,S.y1]}function f(){return(0,y.ak)().source(v).target(_)}},33428:function(X,I,e){var A,k;(function(){var o={version:"3.8.2"},T=[].slice,b=function(L){return T.call(L)},p=self.document;function s(L){return L&&(L.ownerDocument||L.document||L).documentElement}function t(L){return L&&(L.ownerDocument&&L.ownerDocument.defaultView||L.document&&L||L.defaultView)}if(p)try{b(p.documentElement.childNodes)[0].nodeType}catch{b=function(V){for(var $=V.length,ne=new Array($);$--;)ne[$]=V[$];return ne}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,a=this.CSSStyleDeclaration.prototype,l=a.setProperty;i.setAttribute=function(V,$){n.call(this,V,$+"")},i.setAttributeNS=function(V,$,ne){r.call(this,V,$,ne+"")},a.setProperty=function(V,$,ne){l.call(this,V,$+"",ne)}}function c(L,V){return L<V?-1:L>V?1:L>=V?0:NaN}function h(L){return L===null?NaN:+L}function u(L){return!isNaN(L)}function x(L){return{left:function(V,$,ne,ce){for(arguments.length<3&&(ne=0),arguments.length<4&&(ce=V.length);ne<ce;){var xe=ne+ce>>>1;L(V[xe],$)<0?ne=xe+1:ce=xe}return ne},right:function(V,$,ne,ce){for(arguments.length<3&&(ne=0),arguments.length<4&&(ce=V.length);ne<ce;){var xe=ne+ce>>>1;L(V[xe],$)>0?ce=xe:ne=xe+1}return ne}}}o.ascending=c,o.descending=function(L,V){return V<L?-1:V>L?1:V>=L?0:NaN},o.min=function(L,V){var $,ne,ce=-1,xe=L.length;if(arguments.length===1){for(;++ce<xe;)if((ne=L[ce])!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=L[ce])!=null&&$>ne&&($=ne)}else{for(;++ce<xe;)if((ne=V.call(L,L[ce],ce))!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=V.call(L,L[ce],ce))!=null&&$>ne&&($=ne)}return $},o.max=function(L,V){var $,ne,ce=-1,xe=L.length;if(arguments.length===1){for(;++ce<xe;)if((ne=L[ce])!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=L[ce])!=null&&ne>$&&($=ne)}else{for(;++ce<xe;)if((ne=V.call(L,L[ce],ce))!=null&&ne>=ne){$=ne;break}for(;++ce<xe;)(ne=V.call(L,L[ce],ce))!=null&&ne>$&&($=ne)}return $},o.extent=function(L,V){var $,ne,ce,xe=-1,Ce=L.length;if(arguments.length===1){for(;++xe<Ce;)if((ne=L[xe])!=null&&ne>=ne){$=ce=ne;break}for(;++xe<Ce;)(ne=L[xe])!=null&&($>ne&&($=ne),ce<ne&&(ce=ne))}else{for(;++xe<Ce;)if((ne=V.call(L,L[xe],xe))!=null&&ne>=ne){$=ce=ne;break}for(;++xe<Ce;)(ne=V.call(L,L[xe],xe))!=null&&($>ne&&($=ne),ce<ne&&(ce=ne))}return[$,ce]},o.sum=function(L,V){var $,ne=0,ce=L.length,xe=-1;if(arguments.length===1)for(;++xe<ce;)u($=+L[xe])&&(ne+=$);else for(;++xe<ce;)u($=+V.call(L,L[xe],xe))&&(ne+=$);return ne},o.mean=function(L,V){var $,ne=0,ce=L.length,xe=-1,Ce=ce;if(arguments.length===1)for(;++xe<ce;)u($=h(L[xe]))?ne+=$:--Ce;else for(;++xe<ce;)u($=h(V.call(L,L[xe],xe)))?ne+=$:--Ce;if(Ce)return ne/Ce},o.quantile=function(L,V){var $=(L.length-1)*V+1,ne=Math.floor($),ce=+L[ne-1],xe=$-ne;return xe?ce+xe*(L[ne]-ce):ce},o.median=function(L,V){var $,ne=[],ce=L.length,xe=-1;if(arguments.length===1)for(;++xe<ce;)u($=h(L[xe]))&&ne.push($);else for(;++xe<ce;)u($=h(V.call(L,L[xe],xe)))&&ne.push($);if(ne.length)return o.quantile(ne.sort(c),.5)},o.variance=function(L,V){var $,ne,ce=L.length,xe=0,Ce=0,ze=-1,Ue=0;if(arguments.length===1)for(;++ze<ce;)u($=h(L[ze]))&&(Ce+=(ne=$-xe)*($-(xe+=ne/++Ue)));else for(;++ze<ce;)u($=h(V.call(L,L[ze],ze)))&&(Ce+=(ne=$-xe)*($-(xe+=ne/++Ue)));if(Ue>1)return Ce/(Ue-1)},o.deviation=function(){var L=o.variance.apply(this,arguments);return L&&Math.sqrt(L)};var d=x(c);function m(L){return L.length}o.bisectLeft=d.left,o.bisect=o.bisectRight=d.right,o.bisector=function(L){return x(L.length===1?function(V,$){return c(L(V),$)}:L)},o.shuffle=function(L,V,$){(xe=arguments.length)<3&&($=L.length,xe<2&&(V=0));for(var ne,ce,xe=$-V;xe;)ce=Math.random()*xe--|0,ne=L[xe+V],L[xe+V]=L[ce+V],L[ce+V]=ne;return L},o.permute=function(L,V){for(var $=V.length,ne=new Array($);$--;)ne[$]=L[V[$]];return ne},o.pairs=function(L){for(var V=0,$=L.length-1,ne=L[0],ce=new Array($<0?0:$);V<$;)ce[V]=[ne,ne=L[++V]];return ce},o.transpose=function(L){if(!(ce=L.length))return[];for(var V=-1,$=o.min(L,m),ne=new Array($);++V<$;)for(var ce,xe=-1,Ce=ne[V]=new Array(ce);++xe<ce;)Ce[xe]=L[xe][V];return ne},o.zip=function(){return o.transpose(arguments)},o.keys=function(L){var V=[];for(var $ in L)V.push($);return V},o.values=function(L){var V=[];for(var $ in L)V.push(L[$]);return V},o.entries=function(L){var V=[];for(var $ in L)V.push({key:$,value:L[$]});return V},o.merge=function(L){for(var V,$,ne,ce=L.length,xe=-1,Ce=0;++xe<ce;)Ce+=L[xe].length;for($=new Array(Ce);--ce>=0;)for(V=(ne=L[ce]).length;--V>=0;)$[--Ce]=ne[V];return $};var g=Math.abs;function y(L,V){for(var $ in V)Object.defineProperty(L.prototype,$,{value:V[$],enumerable:!1})}function v(){this._=Object.create(null)}o.range=function(L,V,$){if(arguments.length<3&&($=1,arguments.length<2&&(V=L,L=0)),(V-L)/$==1/0)throw new Error("infinite range");var ne,ce=[],xe=function(ze){for(var Ue=1;ze*Ue%1;)Ue*=10;return Ue}(g($)),Ce=-1;if(L*=xe,V*=xe,($*=xe)<0)for(;(ne=L+$*++Ce)>V;)ce.push(ne/xe);else for(;(ne=L+$*++Ce)<V;)ce.push(ne/xe);return ce},o.map=function(L,V){var $=new v;if(L instanceof v)L.forEach(function(ze,Ue){$.set(ze,Ue)});else if(Array.isArray(L)){var ne,ce=-1,xe=L.length;if(arguments.length===1)for(;++ce<xe;)$.set(ce,L[ce]);else for(;++ce<xe;)$.set(V.call(L,ne=L[ce],ce),ne)}else for(var Ce in L)$.set(Ce,L[Ce]);return $};var _="__proto__",f="\0";function S(L){return(L+="")===_||L[0]===f?f+L:L}function w(L){return(L+="")[0]===f?L.slice(1):L}function E(L){return S(L)in this._}function P(L){return(L=S(L))in this._&&delete this._[L]}function C(){var L=[];for(var V in this._)L.push(w(V));return L}function O(){var L=0;for(var V in this._)++L;return L}function R(){for(var L in this._)return!1;return!0}function U(){this._=Object.create(null)}function D(L){return L}function N(L,V,$){return function(){var ne=$.apply(V,arguments);return ne===V?L:ne}}function W(L,V){if(V in L)return V;V=V.charAt(0).toUpperCase()+V.slice(1);for(var $=0,ne=F.length;$<ne;++$){var ce=F[$]+V;if(ce in L)return ce}}y(v,{has:E,get:function(L){return this._[S(L)]},set:function(L,V){return this._[S(L)]=V},remove:P,keys:C,values:function(){var L=[];for(var V in this._)L.push(this._[V]);return L},entries:function(){var L=[];for(var V in this._)L.push({key:w(V),value:this._[V]});return L},size:O,empty:R,forEach:function(L){for(var V in this._)L.call(this,w(V),this._[V])}}),o.nest=function(){var L,V,$={},ne=[],ce=[];function xe(ze,Ue,He){if(He>=ne.length)return V?V.call($,Ue):L?Ue.sort(L):Ue;for(var et,lt,ft,xt,Mt=-1,_t=Ue.length,zt=ne[He++],Et=new v;++Mt<_t;)(xt=Et.get(et=zt(lt=Ue[Mt])))?xt.push(lt):Et.set(et,[lt]);return ze?(lt=ze(),ft=function(Yt,Vt){lt.set(Yt,xe(ze,Vt,He))}):(lt={},ft=function(Yt,Vt){lt[Yt]=xe(ze,Vt,He)}),Et.forEach(ft),lt}function Ce(ze,Ue){if(Ue>=ne.length)return ze;var He=[],et=ce[Ue++];return ze.forEach(function(lt,ft){He.push({key:lt,values:Ce(ft,Ue)})}),et?He.sort(function(lt,ft){return et(lt.key,ft.key)}):He}return $.map=function(ze,Ue){return xe(Ue,ze,0)},$.entries=function(ze){return Ce(xe(o.map,ze,0),0)},$.key=function(ze){return ne.push(ze),$},$.sortKeys=function(ze){return ce[ne.length-1]=ze,$},$.sortValues=function(ze){return L=ze,$},$.rollup=function(ze){return V=ze,$},$},o.set=function(L){var V=new U;if(L)for(var $=0,ne=L.length;$<ne;++$)V.add(L[$]);return V},y(U,{has:E,add:function(L){return this._[S(L+="")]=!0,L},remove:P,values:C,size:O,empty:R,forEach:function(L){for(var V in this._)L.call(this,w(V))}}),o.behavior={},o.rebind=function(L,V){for(var $,ne=1,ce=arguments.length;++ne<ce;)L[$=arguments[ne]]=N(L,V,V[$]);return L};var F=["webkit","ms","moz","Moz","o","O"];function j(){}function q(){}function te(L){var V=[],$=new v;function ne(){for(var ce,xe=V,Ce=-1,ze=xe.length;++Ce<ze;)(ce=xe[Ce].on)&&ce.apply(this,arguments);return L}return ne.on=function(ce,xe){var Ce,ze=$.get(ce);return arguments.length<2?ze&&ze.on:(ze&&(ze.on=null,V=V.slice(0,Ce=V.indexOf(ze)).concat(V.slice(Ce+1)),$.remove(ce)),xe&&V.push($.set(ce,{on:xe})),L)},ne}function ee(){o.event.preventDefault()}function Q(){for(var L,V=o.event;L=V.sourceEvent;)V=L;return V}function J(L){for(var V=new q,$=0,ne=arguments.length;++$<ne;)V[arguments[$]]=te(V);return V.of=function(ce,xe){return function(Ce){try{var ze=Ce.sourceEvent=o.event;Ce.target=L,o.event=Ce,V[Ce.type].apply(ce,xe)}finally{o.event=ze}}},V}o.dispatch=function(){for(var L=new q,V=-1,$=arguments.length;++V<$;)L[arguments[V]]=te(L);return L},q.prototype.on=function(L,V){var $=L.indexOf("."),ne="";if($>=0&&(ne=L.slice($+1),L=L.slice(0,$)),L)return arguments.length<2?this[L].on(ne):this[L].on(ne,V);if(arguments.length===2){if(V==null)for(L in this)this.hasOwnProperty(L)&&this[L].on(ne,null);return this}},o.event=null,o.requote=function(L){return L.replace(K,"\\$&")};var K=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Y={}.__proto__?function(L,V){L.__proto__=V}:function(L,V){for(var $ in V)L[$]=V[$]};function ie(L){return Y(L,ve),L}var se=function(L,V){return V.querySelector(L)},ae=function(L,V){return V.querySelectorAll(L)},ue=function(L,V){var $=L.matches||L[W(L,"matchesSelector")];return ue=function(ne,ce){return $.call(ne,ce)},ue(L,V)};typeof Sizzle=="function"&&(se=function(L,V){return Sizzle(L,V)[0]||null},ae=Sizzle,ue=Sizzle.matchesSelector),o.selection=function(){return o.select(p.documentElement)};var ve=o.selection.prototype=[];function ye(L){return typeof L=="function"?L:function(){return se(L,this)}}function de(L){return typeof L=="function"?L:function(){return ae(L,this)}}ve.select=function(L){var V,$,ne,ce,xe=[];L=ye(L);for(var Ce=-1,ze=this.length;++Ce<ze;){xe.push(V=[]),V.parentNode=(ne=this[Ce]).parentNode;for(var Ue=-1,He=ne.length;++Ue<He;)(ce=ne[Ue])?(V.push($=L.call(ce,ce.__data__,Ue,Ce)),$&&"__data__"in ce&&($.__data__=ce.__data__)):V.push(null)}return ie(xe)},ve.selectAll=function(L){var V,$,ne=[];L=de(L);for(var ce=-1,xe=this.length;++ce<xe;)for(var Ce=this[ce],ze=-1,Ue=Ce.length;++ze<Ue;)($=Ce[ze])&&(ne.push(V=b(L.call($,$.__data__,ze,ce))),V.parentNode=$);return ie(ne)};var pe="http://www.w3.org/1999/xhtml",ge={svg:"http://www.w3.org/2000/svg",xhtml:pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ke(L,V){return L=o.ns.qualify(L),V==null?L.local?function(){this.removeAttributeNS(L.space,L.local)}:function(){this.removeAttribute(L)}:typeof V=="function"?L.local?function(){var $=V.apply(this,arguments);$==null?this.removeAttributeNS(L.space,L.local):this.setAttributeNS(L.space,L.local,$)}:function(){var $=V.apply(this,arguments);$==null?this.removeAttribute(L):this.setAttribute(L,$)}:L.local?function(){this.setAttributeNS(L.space,L.local,V)}:function(){this.setAttribute(L,V)}}function Ee(L){return L.trim().replace(/\s+/g," ")}function me(L){return new RegExp("(?:^|\\s+)"+o.requote(L)+"(?:\\s+|$)","g")}function oe(L){return(L+"").trim().split(/^|\s+/)}function re(L,V){var $=(L=oe(L).map(fe)).length;return typeof V=="function"?function(){for(var ne=-1,ce=V.apply(this,arguments);++ne<$;)L[ne](this,ce)}:function(){for(var ne=-1;++ne<$;)L[ne](this,V)}}function fe(L){var V=me(L);return function($,ne){if(ce=$.classList)return ne?ce.add(L):ce.remove(L);var ce=$.getAttribute("class")||"";ne?(V.lastIndex=0,V.test(ce)||$.setAttribute("class",Ee(ce+" "+L))):$.setAttribute("class",Ee(ce.replace(V," ")))}}function Se(L,V,$){return V==null?function(){this.style.removeProperty(L)}:typeof V=="function"?function(){var ne=V.apply(this,arguments);ne==null?this.style.removeProperty(L):this.style.setProperty(L,ne,$)}:function(){this.style.setProperty(L,V,$)}}function be(L,V){return V==null?function(){delete this[L]}:typeof V=="function"?function(){var $=V.apply(this,arguments);$==null?delete this[L]:this[L]=$}:function(){this[L]=V}}function we(L){return typeof L=="function"?L:(L=o.ns.qualify(L)).local?function(){return this.ownerDocument.createElementNS(L.space,L.local)}:function(){var V=this.ownerDocument,$=this.namespaceURI;return $===pe&&V.documentElement.namespaceURI===pe?V.createElement(L):V.createElementNS($,L)}}function Me(){var L=this.parentNode;L&&L.removeChild(this)}function Ie(L){return{__data__:L}}function Oe(L){return function(){return ue(this,L)}}function he(L){return arguments.length||(L=c),function(V,$){return V&&$?L(V.__data__,$.__data__):!V-!$}}function _e(L,V){for(var $=0,ne=L.length;$<ne;$++)for(var ce,xe=L[$],Ce=0,ze=xe.length;Ce<ze;Ce++)(ce=xe[Ce])&&V(ce,Ce,$);return L}function Ae(L){return Y(L,De),L}o.ns={prefix:ge,qualify:function(L){var V=L.indexOf(":"),$=L;return V>=0&&($=L.slice(0,V))!=="xmlns"&&(L=L.slice(V+1)),ge.hasOwnProperty($)?{space:ge[$],local:L}:L}},ve.attr=function(L,V){if(arguments.length<2){if(typeof L=="string"){var $=this.node();return(L=o.ns.qualify(L)).local?$.getAttributeNS(L.space,L.local):$.getAttribute(L)}for(V in L)this.each(ke(V,L[V]));return this}return this.each(ke(L,V))},ve.classed=function(L,V){if(arguments.length<2){if(typeof L=="string"){var $=this.node(),ne=(L=oe(L)).length,ce=-1;if(V=$.classList){for(;++ce<ne;)if(!V.contains(L[ce]))return!1}else for(V=$.getAttribute("class");++ce<ne;)if(!me(L[ce]).test(V))return!1;return!0}for(V in L)this.each(re(V,L[V]));return this}return this.each(re(L,V))},ve.style=function(L,V,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(V=""),L)this.each(Se($,L[$],V));return this}if(ne<2){var ce=this.node();return t(ce).getComputedStyle(ce,null).getPropertyValue(L)}$=""}return this.each(Se(L,V,$))},ve.property=function(L,V){if(arguments.length<2){if(typeof L=="string")return this.node()[L];for(V in L)this.each(be(V,L[V]));return this}return this.each(be(L,V))},ve.text=function(L){return arguments.length?this.each(typeof L=="function"?function(){var V=L.apply(this,arguments);this.textContent=V??""}:L==null?function(){this.textContent=""}:function(){this.textContent=L}):this.node().textContent},ve.html=function(L){return arguments.length?this.each(typeof L=="function"?function(){var V=L.apply(this,arguments);this.innerHTML=V??""}:L==null?function(){this.innerHTML=""}:function(){this.innerHTML=L}):this.node().innerHTML},ve.append=function(L){return L=we(L),this.select(function(){return this.appendChild(L.apply(this,arguments))})},ve.insert=function(L,V){return L=we(L),V=ye(V),this.select(function(){return this.insertBefore(L.apply(this,arguments),V.apply(this,arguments)||null)})},ve.remove=function(){return this.each(Me)},ve.data=function(L,V){var $,ne,ce=-1,xe=this.length;if(!arguments.length){for(L=new Array(xe=($=this[0]).length);++ce<xe;)(ne=$[ce])&&(L[ce]=ne.__data__);return L}function Ce(et,lt){var ft,xt,Mt,_t=et.length,zt=lt.length,Et=Math.min(_t,zt),Yt=new Array(zt),Vt=new Array(zt),Nt=new Array(_t);if(V){var fn,gn=new v,kn=new Array(_t);for(ft=-1;++ft<_t;)(xt=et[ft])&&(gn.has(fn=V.call(xt,xt.__data__,ft))?Nt[ft]=xt:gn.set(fn,xt),kn[ft]=fn);for(ft=-1;++ft<zt;)(xt=gn.get(fn=V.call(lt,Mt=lt[ft],ft)))?xt!==!0&&(Yt[ft]=xt,xt.__data__=Mt):Vt[ft]=Ie(Mt),gn.set(fn,!0);for(ft=-1;++ft<_t;)ft in kn&&gn.get(kn[ft])!==!0&&(Nt[ft]=et[ft])}else{for(ft=-1;++ft<Et;)xt=et[ft],Mt=lt[ft],xt?(xt.__data__=Mt,Yt[ft]=xt):Vt[ft]=Ie(Mt);for(;ft<zt;++ft)Vt[ft]=Ie(lt[ft]);for(;ft<_t;++ft)Nt[ft]=et[ft]}Vt.update=Yt,Vt.parentNode=Yt.parentNode=Nt.parentNode=et.parentNode,ze.push(Vt),Ue.push(Yt),He.push(Nt)}var ze=Ae([]),Ue=ie([]),He=ie([]);if(typeof L=="function")for(;++ce<xe;)Ce($=this[ce],L.call($,$.parentNode.__data__,ce));else for(;++ce<xe;)Ce($=this[ce],L);return Ue.enter=function(){return ze},Ue.exit=function(){return He},Ue},ve.datum=function(L){return arguments.length?this.property("__data__",L):this.property("__data__")},ve.filter=function(L){var V,$,ne,ce=[];typeof L!="function"&&(L=Oe(L));for(var xe=0,Ce=this.length;xe<Ce;xe++){ce.push(V=[]),V.parentNode=($=this[xe]).parentNode;for(var ze=0,Ue=$.length;ze<Ue;ze++)(ne=$[ze])&&L.call(ne,ne.__data__,ze,xe)&&V.push(ne)}return ie(ce)},ve.order=function(){for(var L=-1,V=this.length;++L<V;)for(var $,ne=this[L],ce=ne.length-1,xe=ne[ce];--ce>=0;)($=ne[ce])&&(xe&&xe!==$.nextSibling&&xe.parentNode.insertBefore($,xe),xe=$);return this},ve.sort=function(L){L=he.apply(this,arguments);for(var V=-1,$=this.length;++V<$;)this[V].sort(L);return this.order()},ve.each=function(L){return _e(this,function(V,$,ne){L.call(V,V.__data__,$,ne)})},ve.call=function(L){var V=b(arguments);return L.apply(V[0]=this,V),this},ve.empty=function(){return!this.node()},ve.node=function(){for(var L=0,V=this.length;L<V;L++)for(var $=this[L],ne=0,ce=$.length;ne<ce;ne++){var xe=$[ne];if(xe)return xe}return null},ve.size=function(){var L=0;return _e(this,function(){++L}),L};var De=[];function Le(L,V,$){var ne="__on"+L,ce=L.indexOf("."),xe=Ve;ce>0&&(L=L.slice(0,ce));var Ce=Be.get(L);function ze(){var Ue=this[ne];Ue&&(this.removeEventListener(L,Ue,Ue.$),delete this[ne])}return Ce&&(L=Ce,xe=Ze),ce?V?function(){var Ue=xe(V,b(arguments));ze.call(this),this.addEventListener(L,this[ne]=Ue,Ue.$=$),Ue._=V}:ze:V?j:function(){var Ue,He=new RegExp("^__on([^.]+)"+o.requote(L)+"$");for(var et in this)if(Ue=et.match(He)){var lt=this[et];this.removeEventListener(Ue[1],lt,lt.$),delete this[et]}}}o.selection.enter=Ae,o.selection.enter.prototype=De,De.append=ve.append,De.empty=ve.empty,De.node=ve.node,De.call=ve.call,De.size=ve.size,De.select=function(L){for(var V,$,ne,ce,xe,Ce=[],ze=-1,Ue=this.length;++ze<Ue;){ne=(ce=this[ze]).update,Ce.push(V=[]),V.parentNode=ce.parentNode;for(var He=-1,et=ce.length;++He<et;)(xe=ce[He])?(V.push(ne[He]=$=L.call(ce.parentNode,xe.__data__,He,ze)),$.__data__=xe.__data__):V.push(null)}return ie(Ce)},De.insert=function(L,V){var $,ne,ce;return arguments.length<2&&($=this,V=function(xe,Ce,ze){var Ue,He=$[ze].update,et=He.length;for(ze!=ce&&(ce=ze,ne=0),Ce>=ne&&(ne=Ce+1);!(Ue=He[ne])&&++ne<et;);return Ue}),ve.insert.call(this,L,V)},o.select=function(L){var V;return typeof L=="string"?(V=[se(L,p)]).parentNode=p.documentElement:(V=[L]).parentNode=s(L),ie([V])},o.selectAll=function(L){var V;return typeof L=="string"?(V=b(ae(L,p))).parentNode=p.documentElement:(V=b(L)).parentNode=null,ie([V])},ve.on=function(L,V,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(V=!1),L)this.each(Le($,L[$],V));return this}if(ne<2)return(ne=this.node()["__on"+L])&&ne._;$=!1}return this.each(Le(L,V,$))};var Be=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(L,V){return function($){var ne=o.event;o.event=$,V[0]=this.__data__;try{L.apply(this,V)}finally{o.event=ne}}}function Ze(L,V){var $=Ve(L,V);return function(ne){var ce=this,xe=ne.relatedTarget;xe&&(xe===ce||8&xe.compareDocumentPosition(ce))||$.call(ce,ne)}}p&&Be.forEach(function(L){"on"+L in p&&Be.remove(L)});var rt,it=0;function dt(L){var V=".dragsuppress-"+ ++it,$="click"+V,ne=o.select(t(L)).on("touchmove"+V,ee).on("dragstart"+V,ee).on("selectstart"+V,ee);if(rt==null&&(rt=!("onselectstart"in L)&&W(L.style,"userSelect")),rt){var ce=s(L).style,xe=ce[rt];ce[rt]="none"}return function(Ce){if(ne.on(V,null),rt&&(ce[rt]=xe),Ce){var ze=function(){ne.on($,null)};ne.on($,function(){ee(),ze()},!0),setTimeout(ze,0)}}}o.mouse=function(L){return ht(L,Q())};var mt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(L,V){V.changedTouches&&(V=V.changedTouches[0]);var $=L.ownerSVGElement||L;if($.createSVGPoint){var ne=$.createSVGPoint();if(mt<0){var ce=t(L);if(ce.scrollX||ce.scrollY){var xe=($=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();mt=!(xe.f||xe.e),$.remove()}}return mt?(ne.x=V.pageX,ne.y=V.pageY):(ne.x=V.clientX,ne.y=V.clientY),[(ne=ne.matrixTransform(L.getScreenCTM().inverse())).x,ne.y]}var Ce=L.getBoundingClientRect();return[V.clientX-Ce.left-L.clientLeft,V.clientY-Ce.top-L.clientTop]}function Qe(){return o.event.changedTouches[0].identifier}o.touch=function(L,V,$){if(arguments.length<3&&($=V,V=Q().changedTouches),V){for(var ne,ce=0,xe=V.length;ce<xe;++ce)if((ne=V[ce]).identifier===$)return ht(L,ne)}},o.behavior.drag=function(){var L=J(ce,"drag","dragstart","dragend"),V=null,$=xe(j,o.mouse,t,"mousemove","mouseup"),ne=xe(Qe,o.touch,D,"touchmove","touchend");function ce(){this.on("mousedown.drag",$).on("touchstart.drag",ne)}function xe(Ce,ze,Ue,He,et){return function(){var lt,ft=this,xt=o.event.target.correspondingElement||o.event.target,Mt=ft.parentNode,_t=L.of(ft,arguments),zt=0,Et=Ce(),Yt=".drag"+(Et==null?"":"-"+Et),Vt=o.select(Ue(xt)).on(He+Yt,function(){var gn,kn,Pn=ze(Mt,Et);Pn&&(gn=Pn[0]-fn[0],kn=Pn[1]-fn[1],zt|=gn|kn,fn=Pn,_t({type:"drag",x:Pn[0]+lt[0],y:Pn[1]+lt[1],dx:gn,dy:kn}))}).on(et+Yt,function(){ze(Mt,Et)&&(Vt.on(He+Yt,null).on(et+Yt,null),Nt(zt),_t({type:"dragend"}))}),Nt=dt(xt),fn=ze(Mt,Et);lt=V?[(lt=V.apply(ft,arguments)).x-fn[0],lt.y-fn[1]]:[0,0],_t({type:"dragstart"})}}return ce.origin=function(Ce){return arguments.length?(V=Ce,ce):V},o.rebind(ce,L,"on")},o.touches=function(L,V){return arguments.length<2&&(V=Q().touches),V?b(V).map(function($){var ne=ht(L,$);return ne.identifier=$.identifier,ne}):[]};var Je=1e-6,wt=Je*Je,Pt=Math.PI,It=2*Pt,At=It-Je,qe=Pt/2,Ye=Pt/180,Ne=180/Pt;function We(L){return L>1?qe:L<-1?-qe:Math.asin(L)}function at(L){return((L=Math.exp(L))+1/L)/2}var tt=Math.SQRT2;o.interpolateZoom=function(L,V){var $,ne,ce=L[0],xe=L[1],Ce=L[2],ze=V[0],Ue=V[1],He=V[2],et=ze-ce,lt=Ue-xe,ft=et*et+lt*lt;if(ft<wt)ne=Math.log(He/Ce)/tt,$=function(Yt){return[ce+Yt*et,xe+Yt*lt,Ce*Math.exp(tt*Yt*ne)]};else{var xt=Math.sqrt(ft),Mt=(He*He-Ce*Ce+4*ft)/(2*Ce*2*xt),_t=(He*He-Ce*Ce-4*ft)/(2*He*2*xt),zt=Math.log(Math.sqrt(Mt*Mt+1)-Mt),Et=Math.log(Math.sqrt(_t*_t+1)-_t);ne=(Et-zt)/tt,$=function(Yt){var Vt,Nt=Yt*ne,fn=at(zt),gn=Ce/(2*xt)*(fn*(Vt=tt*Nt+zt,((Vt=Math.exp(2*Vt))-1)/(Vt+1))-function(kn){return((kn=Math.exp(kn))-1/kn)/2}(zt));return[ce+gn*et,xe+gn*lt,Ce*fn/at(tt*Nt+zt)]}}return $.duration=1e3*ne,$},o.behavior.zoom=function(){var L,V,$,ne,ce,xe,Ce,ze,Ue,He={x:0,y:0,k:1},et=[960,500],lt=nt,ft=250,xt=0,Mt="mousedown.zoom",_t="mousemove.zoom",zt="mouseup.zoom",Et="touchstart.zoom",Yt=J(Vt,"zoomstart","zoom","zoomend");function Vt(Qn){Qn.on(Mt,qn).on(Fe+".zoom",xr).on("dblclick.zoom",Er).on(Et,sr)}function Nt(Qn){return[(Qn[0]-He.x)/He.k,(Qn[1]-He.y)/He.k]}function fn(Qn){He.k=Math.max(lt[0],Math.min(lt[1],Qn))}function gn(Qn,or){or=function(wr){return[wr[0]*He.k+He.x,wr[1]*He.k+He.y]}(or),He.x+=Qn[0]-or[0],He.y+=Qn[1]-or[1]}function kn(Qn,or,wr,ur){Qn.__chart__={x:He.x,y:He.y,k:He.k},fn(Math.pow(2,ur)),gn(V=or,wr),Qn=o.select(Qn),ft>0&&(Qn=Qn.transition().duration(ft)),Qn.call(Vt.event)}function Pn(){Ce&&Ce.domain(xe.range().map(function(Qn){return(Qn-He.x)/He.k}).map(xe.invert)),Ue&&Ue.domain(ze.range().map(function(Qn){return(Qn-He.y)/He.k}).map(ze.invert))}function Nn(Qn){xt++||Qn({type:"zoomstart"})}function nr(Qn){Pn(),Qn({type:"zoom",scale:He.k,translate:[He.x,He.y]})}function cr(Qn){--xt||(Qn({type:"zoomend"}),V=null)}function qn(){var Qn=this,or=Yt.of(Qn,arguments),wr=0,ur=o.select(t(Qn)).on(_t,function(){wr=1,gn(o.mouse(Qn),Ar),nr(or)}).on(zt,function(){ur.on(_t,null).on(zt,null),Pr(wr),cr(or)}),Ar=Nt(o.mouse(Qn)),Pr=dt(Qn);Ea.call(Qn),Nn(or)}function sr(){var Qn,or=this,wr=Yt.of(or,arguments),ur={},Ar=0,Pr=".zoom-"+o.event.changedTouches[0].identifier,Nr="touchmove"+Pr,jr="touchend"+Pr,qr=[],Yr=o.select(or),gi=dt(or);function Li(){var xi=o.touches(or);return Qn=He.k,xi.forEach(function(Xr){Xr.identifier in ur&&(ur[Xr.identifier]=Nt(Xr))}),xi}function la(){var xi=o.event.target;o.select(xi).on(Nr,Gi).on(jr,ta),qr.push(xi);for(var Xr=o.event.changedTouches,ki=0,li=Xr.length;ki<li;++ki)ur[Xr[ki].identifier]=null;var $r=Li(),Ai=Date.now();if($r.length===1){if(Ai-ce<500){var Ci=$r[0];kn(or,Ci,ur[Ci.identifier],Math.floor(Math.log(He.k)/Math.LN2)+1),ee()}ce=Ai}else if($r.length>1){Ci=$r[0];var Ni=$r[1],Ss=Ci[0]-Ni[0],Es=Ci[1]-Ni[1];Ar=Ss*Ss+Es*Es}}function Gi(){var xi,Xr,ki,li,$r=o.touches(or);Ea.call(or);for(var Ai=0,Ci=$r.length;Ai<Ci;++Ai,li=null)if(ki=$r[Ai],li=ur[ki.identifier]){if(Xr)break;xi=ki,Xr=li}if(li){var Ni=(Ni=ki[0]-xi[0])*Ni+(Ni=ki[1]-xi[1])*Ni,Ss=Ar&&Math.sqrt(Ni/Ar);xi=[(xi[0]+ki[0])/2,(xi[1]+ki[1])/2],Xr=[(Xr[0]+li[0])/2,(Xr[1]+li[1])/2],fn(Ss*Qn)}ce=null,gn(xi,Xr),nr(wr)}function ta(){if(o.event.touches.length){for(var xi=o.event.changedTouches,Xr=0,ki=xi.length;Xr<ki;++Xr)delete ur[xi[Xr].identifier];for(var li in ur)return void Li()}o.selectAll(qr).on(Pr,null),Yr.on(Mt,qn).on(Et,sr),gi(),cr(wr)}la(),Nn(wr),Yr.on(Mt,null).on(Et,la)}function xr(){var Qn=Yt.of(this,arguments);ne?clearTimeout(ne):(Ea.call(this),L=Nt(V=$||o.mouse(this)),Nn(Qn)),ne=setTimeout(function(){ne=null,cr(Qn)},50),ee(),fn(Math.pow(2,.002*Re())*He.k),gn(V,L),nr(Qn)}function Er(){var Qn=o.mouse(this),or=Math.log(He.k)/Math.LN2;kn(this,Qn,Nt(Qn),o.event.shiftKey?Math.ceil(or)-1:Math.floor(or)+1)}return Fe||(Fe="onwheel"in p?(Re=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Re=function(){return o.event.wheelDelta},"mousewheel"):(Re=function(){return-o.event.detail},"MozMousePixelScroll")),Vt.event=function(Qn){Qn.each(function(){var or=Yt.of(this,arguments),wr=He;Oi?o.select(this).transition().each("start.zoom",function(){He=this.__chart__||{x:0,y:0,k:1},Nn(or)}).tween("zoom:zoom",function(){var ur=et[0],Ar=et[1],Pr=V?V[0]:ur/2,Nr=V?V[1]:Ar/2,jr=o.interpolateZoom([(Pr-He.x)/He.k,(Nr-He.y)/He.k,ur/He.k],[(Pr-wr.x)/wr.k,(Nr-wr.y)/wr.k,ur/wr.k]);return function(qr){var Yr=jr(qr),gi=ur/Yr[2];this.__chart__=He={x:Pr-Yr[0]*gi,y:Nr-Yr[1]*gi,k:gi},nr(or)}}).each("interrupt.zoom",function(){cr(or)}).each("end.zoom",function(){cr(or)}):(this.__chart__=He,Nn(or),nr(or),cr(or))})},Vt.translate=function(Qn){return arguments.length?(He={x:+Qn[0],y:+Qn[1],k:He.k},Pn(),Vt):[He.x,He.y]},Vt.scale=function(Qn){return arguments.length?(He={x:He.x,y:He.y,k:null},fn(+Qn),Pn(),Vt):He.k},Vt.scaleExtent=function(Qn){return arguments.length?(lt=Qn==null?nt:[+Qn[0],+Qn[1]],Vt):lt},Vt.center=function(Qn){return arguments.length?($=Qn&&[+Qn[0],+Qn[1]],Vt):$},Vt.size=function(Qn){return arguments.length?(et=Qn&&[+Qn[0],+Qn[1]],Vt):et},Vt.duration=function(Qn){return arguments.length?(ft=+Qn,Vt):ft},Vt.x=function(Qn){return arguments.length?(Ce=Qn,xe=Qn.copy(),He={x:0,y:0,k:1},Vt):Ce},Vt.y=function(Qn){return arguments.length?(Ue=Qn,ze=Qn.copy(),He={x:0,y:0,k:1},Vt):Ue},o.rebind(Vt,Yt,"on")};var Re,Fe,nt=[0,1/0];function Ge(){}function ut(L,V,$){return this instanceof ut?(this.h=+L,this.s=+V,void(this.l=+$)):arguments.length<2?L instanceof ut?new ut(L.h,L.s,L.l):cn(""+L,vn,ut):new ut(L,V,$)}o.color=Ge,Ge.prototype.toString=function(){return this.rgb()+""},o.hsl=ut;var pt=ut.prototype=new Ge;function gt(L,V,$){var ne,ce;function xe(Ce){return Math.round(255*function(ze){return ze>360?ze-=360:ze<0&&(ze+=360),ze<60?ne+(ce-ne)*ze/60:ze<180?ce:ze<240?ne+(ce-ne)*(240-ze)/60:ne}(Ce))}return L=isNaN(L)?0:(L%=360)<0?L+360:L,V=isNaN(V)||V<0?0:V>1?1:V,ne=2*($=$<0?0:$>1?1:$)-(ce=$<=.5?$*(1+V):$+V-$*V),new bn(xe(L+120),xe(L),xe(L-120))}function ct(L,V,$){return this instanceof ct?(this.h=+L,this.c=+V,void(this.l=+$)):arguments.length<2?L instanceof ct?new ct(L.h,L.c,L.l):function(ne,ce,xe){return ne>0?new ct(Math.atan2(xe,ce)*Ne,Math.sqrt(ce*ce+xe*xe),ne):new ct(NaN,NaN,ne)}(L instanceof kt?L.l:(L=xn((L=o.rgb(L)).r,L.g,L.b)).l,L.a,L.b):new ct(L,V,$)}pt.brighter=function(L){return L=Math.pow(.7,arguments.length?L:1),new ut(this.h,this.s,this.l/L)},pt.darker=function(L){return L=Math.pow(.7,arguments.length?L:1),new ut(this.h,this.s,L*this.l)},pt.rgb=function(){return gt(this.h,this.s,this.l)},o.hcl=ct;var Tt=ct.prototype=new Ge;function vt(L,V,$){return isNaN(L)&&(L=0),isNaN(V)&&(V=0),new kt($,Math.cos(L*=Ye)*V,Math.sin(L)*V)}function kt(L,V,$){return this instanceof kt?(this.l=+L,this.a=+V,void(this.b=+$)):arguments.length<2?L instanceof kt?new kt(L.l,L.a,L.b):L instanceof ct?vt(L.h,L.c,L.l):xn((L=bn(L)).r,L.g,L.b):new kt(L,V,$)}Tt.brighter=function(L){return new ct(this.h,this.c,Math.min(100,this.l+Lt*(arguments.length?L:1)))},Tt.darker=function(L){return new ct(this.h,this.c,Math.max(0,this.l-Lt*(arguments.length?L:1)))},Tt.rgb=function(){return vt(this.h,this.c,this.l).rgb()},o.lab=kt;var Lt=18,Ct=.95047,Dt=1,Gt=1.08883,tn=kt.prototype=new Ge;function jt(L,V,$){var ne=(L+16)/116,ce=ne+V/500,xe=ne-$/200;return new bn(Ln(3.2404542*(ce=Wt(ce)*Ct)-1.5371385*(ne=Wt(ne)*Dt)-.4985314*(xe=Wt(xe)*Gt)),Ln(-.969266*ce+1.8760108*ne+.041556*xe),Ln(.0556434*ce-.2040259*ne+1.0572252*xe))}function Wt(L){return L>.206893034?L*L*L:(L-.13793103448275862)/7.787037}function Ft(L){return L>.008856?Math.pow(L,.3333333333333333):7.787037*L+.13793103448275862}function Ln(L){return Math.round(255*(L<=.00304?12.92*L:1.055*Math.pow(L,.4166666666666667)-.055))}function bn(L,V,$){return this instanceof bn?(this.r=~~L,this.g=~~V,void(this.b=~~$)):arguments.length<2?L instanceof bn?new bn(L.r,L.g,L.b):cn(""+L,bn,gt):new bn(L,V,$)}function hn(L){return new bn(L>>16,L>>8&255,255&L)}function Kt(L){return hn(L)+""}tn.brighter=function(L){return new kt(Math.min(100,this.l+Lt*(arguments.length?L:1)),this.a,this.b)},tn.darker=function(L){return new kt(Math.max(0,this.l-Lt*(arguments.length?L:1)),this.a,this.b)},tn.rgb=function(){return jt(this.l,this.a,this.b)},o.rgb=bn;var sn=bn.prototype=new Ge;function Qt(L){return L<16?"0"+Math.max(0,L).toString(16):Math.min(255,L).toString(16)}function cn(L,V,$){var ne,ce,xe,Ce=0,ze=0,Ue=0;if(ne=/([a-z]+)\((.*)\)/.exec(L=L.toLowerCase()))switch(ce=ne[2].split(","),ne[1]){case"hsl":return $(parseFloat(ce[0]),parseFloat(ce[1])/100,parseFloat(ce[2])/100);case"rgb":return V(Sn(ce[0]),Sn(ce[1]),Sn(ce[2]))}return(xe=Tn.get(L))?V(xe.r,xe.g,xe.b):(L==null||L.charAt(0)!=="#"||isNaN(xe=parseInt(L.slice(1),16))||(L.length===4?(Ce=(3840&xe)>>4,Ce|=Ce>>4,ze=240&xe,ze|=ze>>4,Ue=15&xe,Ue|=Ue<<4):L.length===7&&(Ce=(16711680&xe)>>16,ze=(65280&xe)>>8,Ue=255&xe)),V(Ce,ze,Ue))}function vn(L,V,$){var ne,ce,xe=Math.min(L/=255,V/=255,$/=255),Ce=Math.max(L,V,$),ze=Ce-xe,Ue=(Ce+xe)/2;return ze?(ce=Ue<.5?ze/(Ce+xe):ze/(2-Ce-xe),ne=L==Ce?(V-$)/ze+(V<$?6:0):V==Ce?($-L)/ze+2:(L-V)/ze+4,ne*=60):(ne=NaN,ce=Ue>0&&Ue<1?0:ne),new ut(ne,ce,Ue)}function xn(L,V,$){var ne=Ft((.4124564*(L=An(L))+.3575761*(V=An(V))+.1804375*($=An($)))/Ct),ce=Ft((.2126729*L+.7151522*V+.072175*$)/Dt);return kt(116*ce-16,500*(ne-ce),200*(ce-Ft((.0193339*L+.119192*V+.9503041*$)/Gt)))}function An(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function Sn(L){var V=parseFloat(L);return L.charAt(L.length-1)==="%"?Math.round(2.55*V):V}sn.brighter=function(L){L=Math.pow(.7,arguments.length?L:1);var V=this.r,$=this.g,ne=this.b,ce=30;return V||$||ne?(V&&V<ce&&(V=ce),$&&$<ce&&($=ce),ne&&ne<ce&&(ne=ce),new bn(Math.min(255,V/L),Math.min(255,$/L),Math.min(255,ne/L))):new bn(ce,ce,ce)},sn.darker=function(L){return new bn((L=Math.pow(.7,arguments.length?L:1))*this.r,L*this.g,L*this.b)},sn.hsl=function(){return vn(this.r,this.g,this.b)},sn.toString=function(){return"#"+Qt(this.r)+Qt(this.g)+Qt(this.b)};var Tn=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Rn(L){return typeof L=="function"?L:function(){return L}}function In(L){return function(V,$,ne){return arguments.length===2&&typeof $=="function"&&(ne=$,$=null),Xn(V,$,L,ne)}}function Xn(L,V,$,ne){var ce={},xe=o.dispatch("beforesend","progress","load","error"),Ce={},ze=new XMLHttpRequest,Ue=null;function He(){var et,lt=ze.status;if(!lt&&function(ft){var xt=ft.responseType;return xt&&xt!=="text"?ft.response:ft.responseText}(ze)||lt>=200&&lt<300||lt===304){try{et=$.call(ce,ze)}catch(ft){return void xe.error.call(ce,ft)}xe.load.call(ce,et)}else xe.error.call(ce,ze)}return self.XDomainRequest&&!("withCredentials"in ze)&&/^(http(s)?:)?\/\//.test(L)&&(ze=new XDomainRequest),"onload"in ze?ze.onload=ze.onerror=He:ze.onreadystatechange=function(){ze.readyState>3&&He()},ze.onprogress=function(et){var lt=o.event;o.event=et;try{xe.progress.call(ce,ze)}finally{o.event=lt}},ce.header=function(et,lt){return et=(et+"").toLowerCase(),arguments.length<2?Ce[et]:(lt==null?delete Ce[et]:Ce[et]=lt+"",ce)},ce.mimeType=function(et){return arguments.length?(V=et==null?null:et+"",ce):V},ce.responseType=function(et){return arguments.length?(Ue=et,ce):Ue},ce.response=function(et){return $=et,ce},["get","post"].forEach(function(et){ce[et]=function(){return ce.send.apply(ce,[et].concat(b(arguments)))}}),ce.send=function(et,lt,ft){if(arguments.length===2&&typeof lt=="function"&&(ft=lt,lt=null),ze.open(et,L,!0),V==null||"accept"in Ce||(Ce.accept=V+",*/*"),ze.setRequestHeader)for(var xt in Ce)ze.setRequestHeader(xt,Ce[xt]);return V!=null&&ze.overrideMimeType&&ze.overrideMimeType(V),Ue!=null&&(ze.responseType=Ue),ft!=null&&ce.on("error",ft).on("load",function(Mt){ft(null,Mt)}),xe.beforesend.call(ce,ze),ze.send(lt??null),ce},ce.abort=function(){return ze.abort(),ce},o.rebind(ce,xe,"on"),ne==null?ce:ce.get(function(et){return et.length===1?function(lt,ft){et(lt==null?ft:null)}:et}(ne))}Tn.forEach(function(L,V){Tn.set(L,hn(V))}),o.functor=Rn,o.xhr=In(D),o.dsv=function(L,V){var $=new RegExp('["'+L+`
]`),ne=L.charCodeAt(0);function ce(He,et,lt){arguments.length<3&&(lt=et,et=null);var ft=Xn(He,V,et==null?xe:Ce(et),lt);return ft.row=function(xt){return arguments.length?ft.response((et=xt)==null?xe:Ce(xt)):et},ft}function xe(He){return ce.parse(He.responseText)}function Ce(He){return function(et){return ce.parse(et.responseText,He)}}function ze(He){return He.map(Ue).join(L)}function Ue(He){return $.test(He)?'"'+He.replace(/\"/g,'""')+'"':He}return ce.parse=function(He,et){var lt;return ce.parseRows(He,function(ft,xt){if(lt)return lt(ft,xt-1);var Mt=function(_t){for(var zt={},Et=ft.length,Yt=0;Yt<Et;++Yt)zt[ft[Yt]]=_t[Yt];return zt};lt=et?function(_t,zt){return et(Mt(_t),zt)}:Mt})},ce.parseRows=function(He,et){var lt,ft,xt={},Mt={},_t=[],zt=He.length,Et=0,Yt=0;function Vt(){if(Et>=zt)return Mt;if(ft)return ft=!1,xt;var fn=Et;if(He.charCodeAt(fn)===34){for(var gn=fn;gn++<zt;)if(He.charCodeAt(gn)===34){if(He.charCodeAt(gn+1)!==34)break;++gn}return Et=gn+2,(kn=He.charCodeAt(gn+1))===13?(ft=!0,He.charCodeAt(gn+2)===10&&++Et):kn===10&&(ft=!0),He.slice(fn+1,gn).replace(/""/g,'"')}for(;Et<zt;){var kn,Pn=1;if((kn=He.charCodeAt(Et++))===10)ft=!0;else if(kn===13)ft=!0,He.charCodeAt(Et)===10&&(++Et,++Pn);else if(kn!==ne)continue;return He.slice(fn,Et-Pn)}return He.slice(fn)}for(;(lt=Vt())!==Mt;){for(var Nt=[];lt!==xt&&lt!==Mt;)Nt.push(lt),lt=Vt();et&&(Nt=et(Nt,Yt++))==null||_t.push(Nt)}return _t},ce.format=function(He){if(Array.isArray(He[0]))return ce.formatRows(He);var et=new U,lt=[];return He.forEach(function(ft){for(var xt in ft)et.has(xt)||lt.push(et.add(xt))}),[lt.map(Ue).join(L)].concat(He.map(function(ft){return lt.map(function(xt){return Ue(ft[xt])}).join(L)})).join(`
`)},ce.formatRows=function(He){return He.map(ze).join(`
`)},ce},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("	","text/tab-separated-values");var Vn,er,Wn,fr,Jt=this[W(this,"requestAnimationFrame")]||function(L){setTimeout(L,17)};function en(L,V,$){var ne=arguments.length;ne<2&&(V=0),ne<3&&($=Date.now());var ce={c:L,t:$+V,n:null};return er?er.n=ce:Vn=ce,er=ce,Wn||(fr=clearTimeout(fr),Wn=1,Jt(Mn)),ce}function Mn(){var L=pn(),V=Cn()-L;V>24?(isFinite(V)&&(clearTimeout(fr),fr=setTimeout(Mn,V)),Wn=0):(Wn=1,Jt(Mn))}function pn(){for(var L=Date.now(),V=Vn;V;)L>=V.t&&V.c(L-V.t)&&(V.c=null),V=V.n;return L}function Cn(){for(var L,V=Vn,$=1/0;V;)V.c?(V.t<$&&($=V.t),V=(L=V).n):V=L?L.n=V.n:Vn=V.n;return er=L,$}function jn(L){return L[0]}function Bn(L){return L[1]}function Yn(L){for(var V,$,ne,ce=L.length,xe=[0,1],Ce=2,ze=2;ze<ce;ze++){for(;Ce>1&&(V=L[xe[Ce-2]],$=L[xe[Ce-1]],ne=L[ze],($[0]-V[0])*(ne[1]-V[1])-($[1]-V[1])*(ne[0]-V[0])<=0);)--Ce;xe[Ce++]=ze}return xe.slice(0,Ce)}function dr(L,V){return L[0]-V[0]||L[1]-V[1]}o.timer=function(){en.apply(this,arguments)},o.timer.flush=function(){pn(),Cn()},o.round=function(L,V){return V?Math.round(L*(V=Math.pow(10,V)))/V:Math.round(L)},o.geom={},o.geom.hull=function(L){var V=jn,$=Bn;if(arguments.length)return ne(L);function ne(ce){if(ce.length<3)return[];var xe,Ce=Rn(V),ze=Rn($),Ue=ce.length,He=[],et=[];for(xe=0;xe<Ue;xe++)He.push([+Ce.call(this,ce[xe],xe),+ze.call(this,ce[xe],xe),xe]);for(He.sort(dr),xe=0;xe<Ue;xe++)et.push([He[xe][0],-He[xe][1]]);var lt=Yn(He),ft=Yn(et),xt=ft[0]===lt[0],Mt=ft[ft.length-1]===lt[lt.length-1],_t=[];for(xe=lt.length-1;xe>=0;--xe)_t.push(ce[He[lt[xe]][2]]);for(xe=+xt;xe<ft.length-Mt;++xe)_t.push(ce[He[ft[xe]][2]]);return _t}return ne.x=function(ce){return arguments.length?(V=ce,ne):V},ne.y=function(ce){return arguments.length?($=ce,ne):$},ne},o.geom.polygon=function(L){return Y(L,Zt),L};var Zt=o.geom.polygon.prototype=[];function dn(L,V,$){return($[0]-V[0])*(L[1]-V[1])<($[1]-V[1])*(L[0]-V[0])}function St(L,V,$,ne){var ce=L[0],xe=$[0],Ce=V[0]-ce,ze=ne[0]-xe,Ue=L[1],He=$[1],et=V[1]-Ue,lt=ne[1]-He,ft=(ze*(Ue-He)-lt*(ce-xe))/(lt*Ce-ze*et);return[ce+ft*Ce,Ue+ft*et]}function Rt(L){var V=L[0],$=L[L.length-1];return!(V[0]-$[0]||V[1]-$[1])}Zt.area=function(){for(var L,V=-1,$=this.length,ne=this[$-1],ce=0;++V<$;)L=ne,ne=this[V],ce+=L[1]*ne[0]-L[0]*ne[1];return .5*ce},Zt.centroid=function(L){var V,$,ne=-1,ce=this.length,xe=0,Ce=0,ze=this[ce-1];for(arguments.length||(L=-1/(6*this.area()));++ne<ce;)V=ze,ze=this[ne],$=V[0]*ze[1]-ze[0]*V[1],xe+=(V[0]+ze[0])*$,Ce+=(V[1]+ze[1])*$;return[xe*L,Ce*L]},Zt.clip=function(L){for(var V,$,ne,ce,xe,Ce,ze=Rt(L),Ue=-1,He=this.length-Rt(this),et=this[He-1];++Ue<He;){for(V=L.slice(),L.length=0,ce=this[Ue],xe=V[(ne=V.length-ze)-1],$=-1;++$<ne;)dn(Ce=V[$],et,ce)?(dn(xe,et,ce)||L.push(St(xe,Ce,et,ce)),L.push(Ce)):dn(xe,et,ce)&&L.push(St(xe,Ce,et,ce)),xe=Ce;ze&&L.push(L[0]),et=ce}return L};var Xt,ln,un,mn,rn,qt=[],Ht=[];function $t(){fi(this),this.edge=this.site=this.circle=null}function an(L){var V=qt.pop()||new $t;return V.site=L,V}function wn(L){hr(L),un.remove(L),qt.push(L),fi(L)}function En(L){var V=L.circle,$=V.x,ne=V.cy,ce={x:$,y:ne},xe=L.P,Ce=L.N,ze=[L];wn(L);for(var Ue=xe;Ue.circle&&g($-Ue.circle.x)<Je&&g(ne-Ue.circle.cy)<Je;)xe=Ue.P,ze.unshift(Ue),wn(Ue),Ue=xe;ze.unshift(Ue),hr(Ue);for(var He=Ce;He.circle&&g($-He.circle.x)<Je&&g(ne-He.circle.cy)<Je;)Ce=He.N,ze.push(He),wn(He),He=Ce;ze.push(He),hr(He);var et,lt=ze.length;for(et=1;et<lt;++et)He=ze[et],Ue=ze[et-1],mr(He.edge,Ue.site,He.site,ce);Ue=ze[0],(He=ze[lt-1]).edge=ar(Ue.site,He.site,null,ce),Jn(Ue),Jn(He)}function On(L){for(var V,$,ne,ce,xe=L.x,Ce=L.y,ze=un._;ze;)if((ne=Fn(ze,Ce)-xe)>Je)ze=ze.L;else{if(!((ce=xe-$n(ze,Ce))>Je)){ne>-Je?(V=ze.P,$=ze):ce>-Je?(V=ze,$=ze.N):V=$=ze;break}if(!ze.R){V=ze;break}ze=ze.R}var Ue=an(L);if(un.insert(V,Ue),V||$){if(V===$)return hr(V),$=an(V.site),un.insert(Ue,$),Ue.edge=$.edge=ar(V.site,Ue.site),Jn(V),void Jn($);if($){hr(V),hr($);var He=V.site,et=He.x,lt=He.y,ft=L.x-et,xt=L.y-lt,Mt=$.site,_t=Mt.x-et,zt=Mt.y-lt,Et=2*(ft*zt-xt*_t),Yt=ft*ft+xt*xt,Vt=_t*_t+zt*zt,Nt={x:(zt*Yt-xt*Vt)/Et+et,y:(ft*Vt-_t*Yt)/Et+lt};mr($.edge,He,Mt,Nt),Ue.edge=ar(He,L,null,Nt),$.edge=ar(L,Mt,null,Nt),Jn(V),Jn($)}else Ue.edge=ar(V.site,Ue.site)}}function Fn(L,V){var $=L.site,ne=$.x,ce=$.y,xe=ce-V;if(!xe)return ne;var Ce=L.P;if(!Ce)return-1/0;var ze=($=Ce.site).x,Ue=$.y,He=Ue-V;if(!He)return ze;var et=ze-ne,lt=1/xe-1/He,ft=et/He;return lt?(-ft+Math.sqrt(ft*ft-2*lt*(et*et/(-2*He)-Ue+He/2+ce-xe/2)))/lt+ne:(ne+ze)/2}function $n(L,V){var $=L.N;if($)return Fn($,V);var ne=L.site;return ne.y===V?ne.x:1/0}function Hn(L){this.site=L,this.edges=[]}function Kn(L,V){return V.angle-L.angle}function tr(){fi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jn(L){var V=L.P,$=L.N;if(V&&$){var ne=V.site,ce=L.site,xe=$.site;if(ne!==xe){var Ce=ce.x,ze=ce.y,Ue=ne.x-Ce,He=ne.y-ze,et=xe.x-Ce,lt=2*(Ue*(zt=xe.y-ze)-He*et);if(!(lt>=-wt)){var ft=Ue*Ue+He*He,xt=et*et+zt*zt,Mt=(zt*ft-He*xt)/lt,_t=(Ue*xt-et*ft)/lt,zt=_t+ze,Et=Ht.pop()||new tr;Et.arc=L,Et.site=ce,Et.x=Mt+Ce,Et.y=zt+Math.sqrt(Mt*Mt+_t*_t),Et.cy=zt,L.circle=Et;for(var Yt=null,Vt=rn._;Vt;)if(Et.y<Vt.y||Et.y===Vt.y&&Et.x<=Vt.x){if(!Vt.L){Yt=Vt.P;break}Vt=Vt.L}else{if(!Vt.R){Yt=Vt;break}Vt=Vt.R}rn.insert(Yt,Et),Yt||(mn=Et)}}}}function hr(L){var V=L.circle;V&&(V.P||(mn=V.N),rn.remove(V),Ht.push(V),fi(V),L.circle=null)}function br(L,V){var $=L.b;if($)return!0;var ne,ce,xe=L.a,Ce=V[0][0],ze=V[1][0],Ue=V[0][1],He=V[1][1],et=L.l,lt=L.r,ft=et.x,xt=et.y,Mt=lt.x,_t=lt.y,zt=(ft+Mt)/2,Et=(xt+_t)/2;if(_t===xt){if(zt<Ce||zt>=ze)return;if(ft>Mt){if(xe){if(xe.y>=He)return}else xe={x:zt,y:Ue};$={x:zt,y:He}}else{if(xe){if(xe.y<Ue)return}else xe={x:zt,y:He};$={x:zt,y:Ue}}}else if(ce=Et-(ne=(ft-Mt)/(_t-xt))*zt,ne<-1||ne>1)if(ft>Mt){if(xe){if(xe.y>=He)return}else xe={x:(Ue-ce)/ne,y:Ue};$={x:(He-ce)/ne,y:He}}else{if(xe){if(xe.y<Ue)return}else xe={x:(He-ce)/ne,y:He};$={x:(Ue-ce)/ne,y:Ue}}else if(xt<_t){if(xe){if(xe.x>=ze)return}else xe={x:Ce,y:ne*Ce+ce};$={x:ze,y:ne*ze+ce}}else{if(xe){if(xe.x<Ce)return}else xe={x:ze,y:ne*ze+ce};$={x:Ce,y:ne*Ce+ce}}return L.a=xe,L.b=$,!0}function gr(L,V){this.l=L,this.r=V,this.a=this.b=null}function ar(L,V,$,ne){var ce=new gr(L,V);return Xt.push(ce),$&&mr(ce,L,V,$),ne&&mr(ce,V,L,ne),ln[L.i].edges.push(new Mr(ce,L,V)),ln[V.i].edges.push(new Mr(ce,V,L)),ce}function mr(L,V,$,ne){L.a||L.b?L.l===$?L.b=ne:L.a=ne:(L.a=ne,L.l=V,L.r=$)}function Mr(L,V,$){var ne=L.a,ce=L.b;this.edge=L,this.site=V,this.angle=$?Math.atan2($.y-V.y,$.x-V.x):L.l===V?Math.atan2(ce.x-ne.x,ne.y-ce.y):Math.atan2(ne.x-ce.x,ce.y-ne.y)}function Dr(){this._=null}function fi(L){L.U=L.C=L.L=L.R=L.P=L.N=null}function hi(L,V){var $=V,ne=V.R,ce=$.U;ce?ce.L===$?ce.L=ne:ce.R=ne:L._=ne,ne.U=ce,$.U=ne,$.R=ne.L,$.R&&($.R.U=$),ne.L=$}function Ri(L,V){var $=V,ne=V.L,ce=$.U;ce?ce.L===$?ce.L=ne:ce.R=ne:L._=ne,ne.U=ce,$.U=ne,$.L=ne.R,$.L&&($.L.U=$),ne.R=$}function ci(L){for(;L.L;)L=L.L;return L}function Ti(L,V){var $,ne,ce,xe=L.sort(fa).pop();for(Xt=[],ln=new Array(L.length),un=new Dr,rn=new Dr;;)if(ce=mn,xe&&(!ce||xe.y<ce.y||xe.y===ce.y&&xe.x<ce.x))xe.x===$&&xe.y===ne||(ln[xe.i]=new Hn(xe),On(xe),$=xe.x,ne=xe.y),xe=L.pop();else{if(!ce)break;En(ce.arc)}V&&(function(ze){for(var Ue,He,et,lt,ft,xt=Xt,Mt=(He=ze[0][0],et=ze[0][1],lt=ze[1][0],ft=ze[1][1],function(zt){var Et,Yt=zt.a,Vt=zt.b,Nt=Yt.x,fn=Yt.y,gn=0,kn=1,Pn=Vt.x-Nt,Nn=Vt.y-fn;if(Et=He-Nt,Pn||!(Et>0)){if(Et/=Pn,Pn<0){if(Et<gn)return;Et<kn&&(kn=Et)}else if(Pn>0){if(Et>kn)return;Et>gn&&(gn=Et)}if(Et=lt-Nt,Pn||!(Et<0)){if(Et/=Pn,Pn<0){if(Et>kn)return;Et>gn&&(gn=Et)}else if(Pn>0){if(Et<gn)return;Et<kn&&(kn=Et)}if(Et=et-fn,Nn||!(Et>0)){if(Et/=Nn,Nn<0){if(Et<gn)return;Et<kn&&(kn=Et)}else if(Nn>0){if(Et>kn)return;Et>gn&&(gn=Et)}if(Et=ft-fn,Nn||!(Et<0)){if(Et/=Nn,Nn<0){if(Et>kn)return;Et>gn&&(gn=Et)}else if(Nn>0){if(Et<gn)return;Et<kn&&(kn=Et)}return gn>0&&(zt.a={x:Nt+gn*Pn,y:fn+gn*Nn}),kn<1&&(zt.b={x:Nt+kn*Pn,y:fn+kn*Nn}),zt}}}}}),_t=xt.length;_t--;)(!br(Ue=xt[_t],ze)||!Mt(Ue)||g(Ue.a.x-Ue.b.x)<Je&&g(Ue.a.y-Ue.b.y)<Je)&&(Ue.a=Ue.b=null,xt.splice(_t,1))}(V),function(ze){for(var Ue,He,et,lt,ft,xt,Mt,_t,zt,Et,Yt=ze[0][0],Vt=ze[1][0],Nt=ze[0][1],fn=ze[1][1],gn=ln,kn=gn.length;kn--;)if((ft=gn[kn])&&ft.prepare())for(_t=(Mt=ft.edges).length,xt=0;xt<_t;)et=(Et=Mt[xt].end()).x,lt=Et.y,Ue=(zt=Mt[++xt%_t].start()).x,He=zt.y,(g(et-Ue)>Je||g(lt-He)>Je)&&(Mt.splice(xt,0,new Mr((Pn=ft.site,Nn=Et,nr=g(et-Yt)<Je&&fn-lt>Je?{x:Yt,y:g(Ue-Yt)<Je?He:fn}:g(lt-fn)<Je&&Vt-et>Je?{x:g(He-fn)<Je?Ue:Vt,y:fn}:g(et-Vt)<Je&&lt-Nt>Je?{x:Vt,y:g(Ue-Vt)<Je?He:Nt}:g(lt-Nt)<Je&&et-Yt>Je?{x:g(He-Nt)<Je?Ue:Yt,y:Nt}:null,cr=void 0,(cr=new gr(Pn,null)).a=Nn,cr.b=nr,Xt.push(cr),cr),ft.site,null)),++_t);var Pn,Nn,nr,cr}(V));var Ce={cells:ln,edges:Xt};return un=rn=Xt=ln=null,Ce}function fa(L,V){return V.y-L.y||V.x-L.x}Hn.prototype.prepare=function(){for(var L,V=this.edges,$=V.length;$--;)(L=V[$].edge).b&&L.a||V.splice($,1);return V.sort(Kn),V.length},Mr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Dr.prototype={insert:function(L,V){var $,ne,ce;if(L){if(V.P=L,V.N=L.N,L.N&&(L.N.P=V),L.N=V,L.R){for(L=L.R;L.L;)L=L.L;L.L=V}else L.R=V;$=L}else this._?(L=ci(this._),V.P=null,V.N=L,L.P=L.L=V,$=L):(V.P=V.N=null,this._=V,$=null);for(V.L=V.R=null,V.U=$,V.C=!0,L=V;$&&$.C;)$===(ne=$.U).L?(ce=ne.R)&&ce.C?($.C=ce.C=!1,ne.C=!0,L=ne):(L===$.R&&(hi(this,$),$=(L=$).U),$.C=!1,ne.C=!0,Ri(this,ne)):(ce=ne.L)&&ce.C?($.C=ce.C=!1,ne.C=!0,L=ne):(L===$.L&&(Ri(this,$),$=(L=$).U),$.C=!1,ne.C=!0,hi(this,ne)),$=L.U;this._.C=!1},remove:function(L){L.N&&(L.N.P=L.P),L.P&&(L.P.N=L.N),L.N=L.P=null;var V,$,ne,ce=L.U,xe=L.L,Ce=L.R;if($=xe?Ce?ci(Ce):xe:Ce,ce?ce.L===L?ce.L=$:ce.R=$:this._=$,xe&&Ce?(ne=$.C,$.C=L.C,$.L=xe,xe.U=$,$!==Ce?(ce=$.U,$.U=L.U,L=$.R,ce.L=L,$.R=Ce,Ce.U=$):($.U=ce,ce=$,L=$.R)):(ne=L.C,L=$),L&&(L.U=ce),!ne)if(L&&L.C)L.C=!1;else{do{if(L===this._)break;if(L===ce.L){if((V=ce.R).C&&(V.C=!1,ce.C=!0,hi(this,ce),V=ce.R),V.L&&V.L.C||V.R&&V.R.C){V.R&&V.R.C||(V.L.C=!1,V.C=!0,Ri(this,V),V=ce.R),V.C=ce.C,ce.C=V.R.C=!1,hi(this,ce),L=this._;break}}else if((V=ce.L).C&&(V.C=!1,ce.C=!0,Ri(this,ce),V=ce.L),V.L&&V.L.C||V.R&&V.R.C){V.L&&V.L.C||(V.R.C=!1,V.C=!0,hi(this,V),V=ce.L),V.C=ce.C,ce.C=V.L.C=!1,Ri(this,ce),L=this._;break}V.C=!0,L=ce,ce=ce.U}while(!L.C);L&&(L.C=!1)}}},o.geom.voronoi=function(L){var V=jn,$=Bn,ne=V,ce=$,xe=zr;if(L)return Ce(L);function Ce(Ue){var He=new Array(Ue.length),et=xe[0][0],lt=xe[0][1],ft=xe[1][0],xt=xe[1][1];return Ti(ze(Ue),xe).cells.forEach(function(Mt,_t){var zt=Mt.edges,Et=Mt.site;(He[_t]=zt.length?zt.map(function(Yt){var Vt=Yt.start();return[Vt.x,Vt.y]}):Et.x>=et&&Et.x<=ft&&Et.y>=lt&&Et.y<=xt?[[et,xt],[ft,xt],[ft,lt],[et,lt]]:[]).point=Ue[_t]}),He}function ze(Ue){return Ue.map(function(He,et){return{x:Math.round(ne(He,et)/Je)*Je,y:Math.round(ce(He,et)/Je)*Je,i:et}})}return Ce.links=function(Ue){return Ti(ze(Ue)).edges.filter(function(He){return He.l&&He.r}).map(function(He){return{source:Ue[He.l.i],target:Ue[He.r.i]}})},Ce.triangles=function(Ue){var He=[];return Ti(ze(Ue)).cells.forEach(function(et,lt){for(var ft,xt,Mt,_t,zt=et.site,Et=et.edges.sort(Kn),Yt=-1,Vt=Et.length,Nt=Et[Vt-1].edge,fn=Nt.l===zt?Nt.r:Nt.l;++Yt<Vt;)ft=fn,fn=(Nt=Et[Yt].edge).l===zt?Nt.r:Nt.l,lt<ft.i&&lt<fn.i&&(Mt=ft,_t=fn,((xt=zt).x-_t.x)*(Mt.y-xt.y)-(xt.x-Mt.x)*(_t.y-xt.y)<0)&&He.push([Ue[lt],Ue[ft.i],Ue[fn.i]])}),He},Ce.x=function(Ue){return arguments.length?(ne=Rn(V=Ue),Ce):V},Ce.y=function(Ue){return arguments.length?(ce=Rn($=Ue),Ce):$},Ce.clipExtent=function(Ue){return arguments.length?(xe=Ue??zr,Ce):xe===zr?null:xe},Ce.size=function(Ue){return arguments.length?Ce.clipExtent(Ue&&[[0,0],Ue]):xe===zr?null:xe&&xe[1]},Ce};var zr=[[-1e6,-1e6],[1e6,1e6]];function Ui(L){return L.x}function Ia(L){return L.y}function Bi(L,V,$,ne,ce,xe){if(!L(V,$,ne,ce,xe)){var Ce=.5*($+ce),ze=.5*(ne+xe),Ue=V.nodes;Ue[0]&&Bi(L,Ue[0],$,ne,Ce,ze),Ue[1]&&Bi(L,Ue[1],Ce,ne,ce,ze),Ue[2]&&Bi(L,Ue[2],$,ze,Ce,xe),Ue[3]&&Bi(L,Ue[3],Ce,ze,ce,xe)}}function bo(L,V){L=o.rgb(L),V=o.rgb(V);var $=L.r,ne=L.g,ce=L.b,xe=V.r-$,Ce=V.g-ne,ze=V.b-ce;return function(Ue){return"#"+Qt(Math.round($+xe*Ue))+Qt(Math.round(ne+Ce*Ue))+Qt(Math.round(ce+ze*Ue))}}function Do(L,V){var $,ne={},ce={};for($ in L)$ in V?ne[$]=Oa(L[$],V[$]):ce[$]=L[$];for($ in V)$ in L||(ce[$]=V[$]);return function(xe){for($ in ne)ce[$]=ne[$](xe);return ce}}function Qi(L,V){return L=+L,V=+V,function($){return L*(1-$)+V*$}}function io(L,V){var $,ne,ce,xe=ao.lastIndex=zo.lastIndex=0,Ce=-1,ze=[],Ue=[];for(L+="",V+="";($=ao.exec(L))&&(ne=zo.exec(V));)(ce=ne.index)>xe&&(ce=V.slice(xe,ce),ze[Ce]?ze[Ce]+=ce:ze[++Ce]=ce),($=$[0])===(ne=ne[0])?ze[Ce]?ze[Ce]+=ne:ze[++Ce]=ne:(ze[++Ce]=null,Ue.push({i:Ce,x:Qi($,ne)})),xe=zo.lastIndex;return xe<V.length&&(ce=V.slice(xe),ze[Ce]?ze[Ce]+=ce:ze[++Ce]=ce),ze.length<2?Ue[0]?(V=Ue[0].x,function(He){return V(He)+""}):function(){return V}:(V=Ue.length,function(He){for(var et,lt=0;lt<V;++lt)ze[(et=Ue[lt]).i]=et.x(He);return ze.join("")})}o.geom.delaunay=function(L){return o.geom.voronoi().triangles(L)},o.geom.quadtree=function(L,V,$,ne,ce){var xe,Ce=jn,ze=Bn;if(xe=arguments.length)return Ce=Ui,ze=Ia,xe===3&&(ce=$,ne=V,$=V=0),Ue(L);function Ue(He){var et,lt,ft,xt,Mt,_t,zt,Et,Yt,Vt=Rn(Ce),Nt=Rn(ze);if(V!=null)_t=V,zt=$,Et=ne,Yt=ce;else if(Et=Yt=-(_t=zt=1/0),lt=[],ft=[],Mt=He.length,xe)for(xt=0;xt<Mt;++xt)(et=He[xt]).x<_t&&(_t=et.x),et.y<zt&&(zt=et.y),et.x>Et&&(Et=et.x),et.y>Yt&&(Yt=et.y),lt.push(et.x),ft.push(et.y);else for(xt=0;xt<Mt;++xt){var fn=+Vt(et=He[xt],xt),gn=+Nt(et,xt);fn<_t&&(_t=fn),gn<zt&&(zt=gn),fn>Et&&(Et=fn),gn>Yt&&(Yt=gn),lt.push(fn),ft.push(gn)}var kn=Et-_t,Pn=Yt-zt;function Nn(qn,sr,xr,Er,Qn,or,wr,ur){if(!isNaN(xr)&&!isNaN(Er))if(qn.leaf){var Ar=qn.x,Pr=qn.y;if(Ar!=null)if(g(Ar-xr)+g(Pr-Er)<.01)nr(qn,sr,xr,Er,Qn,or,wr,ur);else{var Nr=qn.point;qn.x=qn.y=qn.point=null,nr(qn,Nr,Ar,Pr,Qn,or,wr,ur),nr(qn,sr,xr,Er,Qn,or,wr,ur)}else qn.x=xr,qn.y=Er,qn.point=sr}else nr(qn,sr,xr,Er,Qn,or,wr,ur)}function nr(qn,sr,xr,Er,Qn,or,wr,ur){var Ar=.5*(Qn+wr),Pr=.5*(or+ur),Nr=xr>=Ar,jr=Er>=Pr,qr=jr<<1|Nr;qn.leaf=!1,Nr?Qn=Ar:wr=Ar,jr?or=Pr:ur=Pr,Nn(qn=qn.nodes[qr]||(qn.nodes[qr]={leaf:!0,nodes:[],point:null,x:null,y:null}),sr,xr,Er,Qn,or,wr,ur)}kn>Pn?Yt=zt+kn:Et=_t+Pn;var cr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(qn){Nn(cr,qn,+Vt(qn,++xt),+Nt(qn,xt),_t,zt,Et,Yt)}};if(cr.visit=function(qn){Bi(qn,cr,_t,zt,Et,Yt)},cr.find=function(qn){return function(sr,xr,Er,Qn,or,wr,ur){var Ar,Pr=1/0;return function Nr(jr,qr,Yr,gi,Li){if(!(qr>wr||Yr>ur||gi<Qn||Li<or)){if(la=jr.point){var la,Gi=xr-jr.x,ta=Er-jr.y,xi=Gi*Gi+ta*ta;if(xi<Pr){var Xr=Math.sqrt(Pr=xi);Qn=xr-Xr,or=Er-Xr,wr=xr+Xr,ur=Er+Xr,Ar=la}}for(var ki=jr.nodes,li=.5*(qr+gi),$r=.5*(Yr+Li),Ai=(Er>=$r)<<1|xr>=li,Ci=Ai+4;Ai<Ci;++Ai)if(jr=ki[3&Ai])switch(3&Ai){case 0:Nr(jr,qr,Yr,li,$r);break;case 1:Nr(jr,li,Yr,gi,$r);break;case 2:Nr(jr,qr,$r,li,Li);break;case 3:Nr(jr,li,$r,gi,Li)}}}(sr,Qn,or,wr,ur),Ar}(cr,qn[0],qn[1],_t,zt,Et,Yt)},xt=-1,V==null){for(;++xt<Mt;)Nn(cr,He[xt],lt[xt],ft[xt],_t,zt,Et,Yt);--xt}else He.forEach(cr.add);return lt=ft=He=et=null,cr}return Ue.x=function(He){return arguments.length?(Ce=He,Ue):Ce},Ue.y=function(He){return arguments.length?(ze=He,Ue):ze},Ue.extent=function(He){return arguments.length?(He==null?V=$=ne=ce=null:(V=+He[0][0],$=+He[0][1],ne=+He[1][0],ce=+He[1][1]),Ue):V==null?null:[[V,$],[ne,ce]]},Ue.size=function(He){return arguments.length?(He==null?V=$=ne=ce=null:(V=$=0,ne=+He[0],ce=+He[1]),Ue):V==null?null:[ne-V,ce-$]},Ue},o.interpolateRgb=bo,o.interpolateObject=Do,o.interpolateNumber=Qi,o.interpolateString=io;var ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zo=new RegExp(ao.source,"g");function Oa(L,V){for(var $,ne=o.interpolators.length;--ne>=0&&!($=o.interpolators[ne](L,V)););return $}function Va(L,V){var $,ne=[],ce=[],xe=L.length,Ce=V.length,ze=Math.min(L.length,V.length);for($=0;$<ze;++$)ne.push(Oa(L[$],V[$]));for(;$<xe;++$)ce[$]=L[$];for(;$<Ce;++$)ce[$]=V[$];return function(Ue){for($=0;$<ze;++$)ce[$]=ne[$](Ue);return ce}}o.interpolate=Oa,o.interpolators=[function(L,V){var $=typeof V;return($==="string"?Tn.has(V.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(V)?bo:io:V instanceof Ge?bo:Array.isArray(V)?Va:$==="object"&&isNaN(V)?Do:Qi)(L,V)}],o.interpolateArray=Va;var Ha=function(){return D},oi=o.map({linear:Ha,poly:function(L){return function(V){return Math.pow(V,L)}},quad:function(){return qa},cubic:function(){return Ro},sin:function(){return Fo},exp:function(){return wo},circle:function(){return Bo},elastic:function(L,V){var $;return arguments.length<2&&(V=.45),arguments.length?$=V/It*Math.asin(1/L):(L=1,$=V/4),function(ne){return 1+L*Math.pow(2,-10*ne)*Math.sin((ne-$)*It/V)}},back:function(L){return L||(L=1.70158),function(V){return V*V*((L+1)*V-L)}},bounce:function(){return lo}}),Vi=o.map({in:D,out:_o,"in-out":oo,"out-in":function(L){return oo(_o(L))}});function _o(L){return function(V){return 1-L(1-V)}}function oo(L){return function(V){return .5*(V<.5?L(2*V):2-L(2-2*V))}}function qa(L){return L*L}function Ro(L){return L*L*L}function so(L){if(L<=0)return 0;if(L>=1)return 1;var V=L*L,$=V*L;return 4*(L<.5?$:3*(L-V)+$-.75)}function Fo(L){return 1-Math.cos(L*qe)}function wo(L){return Math.pow(2,10*(L-1))}function Bo(L){return 1-Math.sqrt(1-L*L)}function lo(L){return L<.36363636363636365?7.5625*L*L:L<.7272727272727273?7.5625*(L-=.5454545454545454)*L+.75:L<.9090909090909091?7.5625*(L-=.8181818181818182)*L+.9375:7.5625*(L-=.9545454545454546)*L+.984375}function hl(L,V){return V-=L,function($){return Math.round(L+V*$)}}function $s(L){var V,$,ne,ce=[L.a,L.b],xe=[L.c,L.d],Ce=Al(ce),ze=ts(ce,xe),Ue=Al(((V=xe)[0]+=(ne=-ze)*($=ce)[0],V[1]+=ne*$[1],V))||0;ce[0]*xe[1]<xe[0]*ce[1]&&(ce[0]*=-1,ce[1]*=-1,Ce*=-1,ze*=-1),this.rotate=(Ce?Math.atan2(ce[1],ce[0]):Math.atan2(-xe[0],xe[1]))*Ne,this.translate=[L.e,L.f],this.scale=[Ce,Ue],this.skew=Ue?Math.atan2(ze,Ue)*Ne:0}function ts(L,V){return L[0]*V[0]+L[1]*V[1]}function Al(L){var V=Math.sqrt(ts(L,L));return V&&(L[0]/=V,L[1]/=V),V}o.ease=function(L){var V,$=L.indexOf("-"),ne=$>=0?L.slice(0,$):L,ce=$>=0?L.slice($+1):"in";return ne=oi.get(ne)||Ha,ce=Vi.get(ce)||D,V=ce(ne.apply(null,T.call(arguments,1))),function(xe){return xe<=0?0:xe>=1?1:V(xe)}},o.interpolateHcl=function(L,V){L=o.hcl(L),V=o.hcl(V);var $=L.h,ne=L.c,ce=L.l,xe=V.h-$,Ce=V.c-ne,ze=V.l-ce;return isNaN(Ce)&&(Ce=0,ne=isNaN(ne)?V.c:ne),isNaN(xe)?(xe=0,$=isNaN($)?V.h:$):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return vt($+xe*Ue,ne+Ce*Ue,ce+ze*Ue)+""}},o.interpolateHsl=function(L,V){L=o.hsl(L),V=o.hsl(V);var $=L.h,ne=L.s,ce=L.l,xe=V.h-$,Ce=V.s-ne,ze=V.l-ce;return isNaN(Ce)&&(Ce=0,ne=isNaN(ne)?V.s:ne),isNaN(xe)?(xe=0,$=isNaN($)?V.h:$):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return gt($+xe*Ue,ne+Ce*Ue,ce+ze*Ue)+""}},o.interpolateLab=function(L,V){L=o.lab(L),V=o.lab(V);var $=L.l,ne=L.a,ce=L.b,xe=V.l-$,Ce=V.a-ne,ze=V.b-ce;return function(Ue){return jt($+xe*Ue,ne+Ce*Ue,ce+ze*Ue)+""}},o.interpolateRound=hl,o.transform=function(L){var V=p.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function($){if($!=null){V.setAttribute("transform",$);var ne=V.transform.baseVal.consolidate()}return new $s(ne?ne.matrix:Ml)})(L)},$s.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ml={a:1,b:0,c:0,d:1,e:0,f:0};function ns(L){return L.length?L.pop()+",":""}function Sl(L,V){var $=[],ne=[];return L=o.transform(L),V=o.transform(V),function(ce,xe,Ce,ze){if(ce[0]!==xe[0]||ce[1]!==xe[1]){var Ue=Ce.push("translate(",null,",",null,")");ze.push({i:Ue-4,x:Qi(ce[0],xe[0])},{i:Ue-2,x:Qi(ce[1],xe[1])})}else(xe[0]||xe[1])&&Ce.push("translate("+xe+")")}(L.translate,V.translate,$,ne),function(ce,xe,Ce,ze){ce!==xe?(ce-xe>180?xe+=360:xe-ce>180&&(ce+=360),ze.push({i:Ce.push(ns(Ce)+"rotate(",null,")")-2,x:Qi(ce,xe)})):xe&&Ce.push(ns(Ce)+"rotate("+xe+")")}(L.rotate,V.rotate,$,ne),function(ce,xe,Ce,ze){ce!==xe?ze.push({i:Ce.push(ns(Ce)+"skewX(",null,")")-2,x:Qi(ce,xe)}):xe&&Ce.push(ns(Ce)+"skewX("+xe+")")}(L.skew,V.skew,$,ne),function(ce,xe,Ce,ze){if(ce[0]!==xe[0]||ce[1]!==xe[1]){var Ue=Ce.push(ns(Ce)+"scale(",null,",",null,")");ze.push({i:Ue-4,x:Qi(ce[0],xe[0])},{i:Ue-2,x:Qi(ce[1],xe[1])})}else xe[0]===1&&xe[1]===1||Ce.push(ns(Ce)+"scale("+xe+")")}(L.scale,V.scale,$,ne),L=V=null,function(ce){for(var xe,Ce=-1,ze=ne.length;++Ce<ze;)$[(xe=ne[Ce]).i]=xe.x(ce);return $.join("")}}function jl(L,V){return V=(V-=L=+L)||1/V,function($){return($-L)/V}}function Ul(L,V){return V=(V-=L=+L)||1/V,function($){return Math.max(0,Math.min(1,($-L)/V))}}function rs(L){for(var V=L.source,$=L.target,ne=function(Ce,ze){if(Ce===ze)return Ce;for(var Ue=co(Ce),He=co(ze),et=Ue.pop(),lt=He.pop(),ft=null;et===lt;)ft=et,et=Ue.pop(),lt=He.pop();return ft}(V,$),ce=[V];V!==ne;)V=V.parent,ce.push(V);for(var xe=ce.length;$!==ne;)ce.splice(xe,0,$),$=$.parent;return ce}function co(L){for(var V=[],$=L.parent;$!=null;)V.push(L),L=$,$=$.parent;return V.push(L),V}function gs(L){L.fixed|=2}function is(L){L.fixed&=-7}function Os(L){L.fixed|=4,L.px=L.x,L.py=L.y}function as(L){L.fixed&=-5}function Ga(L,V,$){var ne=0,ce=0;if(L.charge=0,!L.leaf)for(var xe,Ce=L.nodes,ze=Ce.length,Ue=-1;++Ue<ze;)(xe=Ce[Ue])!=null&&(Ga(xe,V,$),L.charge+=xe.charge,ne+=xe.charge*xe.cx,ce+=xe.charge*xe.cy);if(L.point){L.leaf||(L.point.x+=Math.random()-.5,L.point.y+=Math.random()-.5);var He=V*$[L.point.index];L.charge+=L.pointCharge=He,ne+=He*L.point.x,ce+=He*L.point.y}L.cx=ne/L.charge,L.cy=ce/L.charge}o.interpolateTransform=Sl,o.layout={},o.layout.bundle=function(){return function(L){for(var V=[],$=-1,ne=L.length;++$<ne;)V.push(rs(L[$]));return V}},o.layout.chord=function(){var L,V,$,ne,ce,xe,Ce,ze={},Ue=0;function He(){var lt,ft,xt,Mt,_t,zt={},Et=[],Yt=o.range(ne),Vt=[];for(L=[],V=[],lt=0,Mt=-1;++Mt<ne;){for(ft=0,_t=-1;++_t<ne;)ft+=$[Mt][_t];Et.push(ft),Vt.push(o.range(ne)),lt+=ft}for(ce&&Yt.sort(function(cr,qn){return ce(Et[cr],Et[qn])}),xe&&Vt.forEach(function(cr,qn){cr.sort(function(sr,xr){return xe($[qn][sr],$[qn][xr])})}),lt=(It-Ue*ne)/lt,ft=0,Mt=-1;++Mt<ne;){for(xt=ft,_t=-1;++_t<ne;){var Nt=Yt[Mt],fn=Vt[Nt][_t],gn=$[Nt][fn],kn=ft,Pn=ft+=gn*lt;zt[Nt+"-"+fn]={index:Nt,subindex:fn,startAngle:kn,endAngle:Pn,value:gn}}V[Nt]={index:Nt,startAngle:xt,endAngle:ft,value:Et[Nt]},ft+=Ue}for(Mt=-1;++Mt<ne;)for(_t=Mt-1;++_t<ne;){var Nn=zt[Mt+"-"+_t],nr=zt[_t+"-"+Mt];(Nn.value||nr.value)&&L.push(Nn.value<nr.value?{source:nr,target:Nn}:{source:Nn,target:nr})}Ce&&et()}function et(){L.sort(function(lt,ft){return Ce((lt.source.value+lt.target.value)/2,(ft.source.value+ft.target.value)/2)})}return ze.matrix=function(lt){return arguments.length?(ne=($=lt)&&$.length,L=V=null,ze):$},ze.padding=function(lt){return arguments.length?(Ue=lt,L=V=null,ze):Ue},ze.sortGroups=function(lt){return arguments.length?(ce=lt,L=V=null,ze):ce},ze.sortSubgroups=function(lt){return arguments.length?(xe=lt,L=null,ze):xe},ze.sortChords=function(lt){return arguments.length?(Ce=lt,L&&et(),ze):Ce},ze.chords=function(){return L||He(),L},ze.groups=function(){return V||He(),V},ze},o.layout.force=function(){var L,V,$,ne,ce,xe,Ce={},ze=o.dispatch("start","tick","end"),Ue=[1,1],He=.9,et=pl,lt=No,ft=-30,xt=To,Mt=.1,_t=.64,zt=[],Et=[];function Yt(Nt){return function(fn,gn,kn,Pn){if(fn.point!==Nt){var Nn=fn.cx-Nt.x,nr=fn.cy-Nt.y,cr=Pn-gn,qn=Nn*Nn+nr*nr;if(cr*cr/_t<qn){if(qn<xt){var sr=fn.charge/qn;Nt.px-=Nn*sr,Nt.py-=nr*sr}return!0}fn.point&&qn&&qn<xt&&(sr=fn.pointCharge/qn,Nt.px-=Nn*sr,Nt.py-=nr*sr)}return!fn.charge}}function Vt(Nt){Nt.px=o.event.x,Nt.py=o.event.y,Ce.resume()}return Ce.tick=function(){if(($*=.99)<.005)return L=null,ze.end({type:"end",alpha:$=0}),!0;var Nt,fn,gn,kn,Pn,Nn,nr,cr,qn,sr=zt.length,xr=Et.length;for(fn=0;fn<xr;++fn)kn=(gn=Et[fn]).source,(Nn=(cr=(Pn=gn.target).x-kn.x)*cr+(qn=Pn.y-kn.y)*qn)&&(cr*=Nn=$*ce[fn]*((Nn=Math.sqrt(Nn))-ne[fn])/Nn,qn*=Nn,Pn.x-=cr*(nr=kn.weight+Pn.weight?kn.weight/(kn.weight+Pn.weight):.5),Pn.y-=qn*nr,kn.x+=cr*(nr=1-nr),kn.y+=qn*nr);if((nr=$*Mt)&&(cr=Ue[0]/2,qn=Ue[1]/2,fn=-1,nr))for(;++fn<sr;)(gn=zt[fn]).x+=(cr-gn.x)*nr,gn.y+=(qn-gn.y)*nr;if(ft)for(Ga(Nt=o.geom.quadtree(zt),$,xe),fn=-1;++fn<sr;)(gn=zt[fn]).fixed||Nt.visit(Yt(gn));for(fn=-1;++fn<sr;)(gn=zt[fn]).fixed?(gn.x=gn.px,gn.y=gn.py):(gn.x-=(gn.px-(gn.px=gn.x))*He,gn.y-=(gn.py-(gn.py=gn.y))*He);ze.tick({type:"tick",alpha:$})},Ce.nodes=function(Nt){return arguments.length?(zt=Nt,Ce):zt},Ce.links=function(Nt){return arguments.length?(Et=Nt,Ce):Et},Ce.size=function(Nt){return arguments.length?(Ue=Nt,Ce):Ue},Ce.linkDistance=function(Nt){return arguments.length?(et=typeof Nt=="function"?Nt:+Nt,Ce):et},Ce.distance=Ce.linkDistance,Ce.linkStrength=function(Nt){return arguments.length?(lt=typeof Nt=="function"?Nt:+Nt,Ce):lt},Ce.friction=function(Nt){return arguments.length?(He=+Nt,Ce):He},Ce.charge=function(Nt){return arguments.length?(ft=typeof Nt=="function"?Nt:+Nt,Ce):ft},Ce.chargeDistance=function(Nt){return arguments.length?(xt=Nt*Nt,Ce):Math.sqrt(xt)},Ce.gravity=function(Nt){return arguments.length?(Mt=+Nt,Ce):Mt},Ce.theta=function(Nt){return arguments.length?(_t=Nt*Nt,Ce):Math.sqrt(_t)},Ce.alpha=function(Nt){return arguments.length?(Nt=+Nt,$?Nt>0?$=Nt:(L.c=null,L.t=NaN,L=null,ze.end({type:"end",alpha:$=0})):Nt>0&&(ze.start({type:"start",alpha:$=Nt}),L=en(Ce.tick)),Ce):$},Ce.start=function(){var Nt,fn,gn,kn=zt.length,Pn=Et.length,Nn=Ue[0],nr=Ue[1];for(Nt=0;Nt<kn;++Nt)(gn=zt[Nt]).index=Nt,gn.weight=0;for(Nt=0;Nt<Pn;++Nt)typeof(gn=Et[Nt]).source=="number"&&(gn.source=zt[gn.source]),typeof gn.target=="number"&&(gn.target=zt[gn.target]),++gn.source.weight,++gn.target.weight;for(Nt=0;Nt<kn;++Nt)gn=zt[Nt],isNaN(gn.x)&&(gn.x=cr("x",Nn)),isNaN(gn.y)&&(gn.y=cr("y",nr)),isNaN(gn.px)&&(gn.px=gn.x),isNaN(gn.py)&&(gn.py=gn.y);if(ne=[],typeof et=="function")for(Nt=0;Nt<Pn;++Nt)ne[Nt]=+et.call(this,Et[Nt],Nt);else for(Nt=0;Nt<Pn;++Nt)ne[Nt]=et;if(ce=[],typeof lt=="function")for(Nt=0;Nt<Pn;++Nt)ce[Nt]=+lt.call(this,Et[Nt],Nt);else for(Nt=0;Nt<Pn;++Nt)ce[Nt]=lt;if(xe=[],typeof ft=="function")for(Nt=0;Nt<kn;++Nt)xe[Nt]=+ft.call(this,zt[Nt],Nt);else for(Nt=0;Nt<kn;++Nt)xe[Nt]=ft;function cr(qn,sr){if(!fn){for(fn=new Array(kn),or=0;or<kn;++or)fn[or]=[];for(or=0;or<Pn;++or){var xr=Et[or];fn[xr.source.index].push(xr.target),fn[xr.target.index].push(xr.source)}}for(var Er,Qn=fn[Nt],or=-1,wr=Qn.length;++or<wr;)if(!isNaN(Er=Qn[or][qn]))return Er;return Math.random()*sr}return Ce.resume()},Ce.resume=function(){return Ce.alpha(.1)},Ce.stop=function(){return Ce.alpha(0)},Ce.drag=function(){if(V||(V=o.behavior.drag().origin(D).on("dragstart.force",gs).on("drag.force",Vt).on("dragend.force",is)),!arguments.length)return V;this.on("mouseover.force",Os).on("mouseout.force",as).call(V)},o.rebind(Ce,ze,"on")};var pl=20,No=1,To=1/0;function ko(L,V){return o.rebind(L,V,"sort","children","value"),L.nodes=L,L.links=vs,L}function jo(L,V){for(var $=[L];(L=$.pop())!=null;)if(V(L),(ce=L.children)&&(ne=ce.length))for(var ne,ce;--ne>=0;)$.push(ce[ne])}function Gr(L,V){for(var $=[L],ne=[];(L=$.pop())!=null;)if(ne.push(L),(xe=L.children)&&(ce=xe.length))for(var ce,xe,Ce=-1;++Ce<ce;)$.push(xe[Ce]);for(;(L=ne.pop())!=null;)V(L)}function ms(L){return L.children}function Vl(L){return L.value}function Qs(L,V){return V.value-L.value}function vs(L){return o.merge(L.map(function(V){return(V.children||[]).map(function($){return{source:V,target:$}})}))}o.layout.hierarchy=function(){var L=Qs,V=ms,$=Vl;function ne(ce){var xe,Ce=[ce],ze=[];for(ce.depth=0;(xe=Ce.pop())!=null;)if(ze.push(xe),(He=V.call(ne,xe,xe.depth))&&(Ue=He.length)){for(var Ue,He,et;--Ue>=0;)Ce.push(et=He[Ue]),et.parent=xe,et.depth=xe.depth+1;$&&(xe.value=0),xe.children=He}else $&&(xe.value=+$.call(ne,xe,xe.depth)||0),delete xe.children;return Gr(ce,function(lt){var ft,xt;L&&(ft=lt.children)&&ft.sort(L),$&&(xt=lt.parent)&&(xt.value+=lt.value)}),ze}return ne.sort=function(ce){return arguments.length?(L=ce,ne):L},ne.children=function(ce){return arguments.length?(V=ce,ne):V},ne.value=function(ce){return arguments.length?($=ce,ne):$},ne.revalue=function(ce){return $&&(jo(ce,function(xe){xe.children&&(xe.value=0)}),Gr(ce,function(xe){var Ce;xe.children||(xe.value=+$.call(ne,xe,xe.depth)||0),(Ce=xe.parent)&&(Ce.value+=xe.value)})),ce},ne},o.layout.partition=function(){var L=o.layout.hierarchy(),V=[1,1];function $(xe,Ce,ze,Ue){var He=xe.children;if(xe.x=Ce,xe.y=xe.depth*Ue,xe.dx=ze,xe.dy=Ue,He&&(et=He.length)){var et,lt,ft,xt=-1;for(ze=xe.value?ze/xe.value:0;++xt<et;)$(lt=He[xt],Ce,ft=lt.value*ze,Ue),Ce+=ft}}function ne(xe){var Ce=xe.children,ze=0;if(Ce&&(Ue=Ce.length))for(var Ue,He=-1;++He<Ue;)ze=Math.max(ze,ne(Ce[He]));return 1+ze}function ce(xe,Ce){var ze=L.call(this,xe,Ce);return $(ze[0],0,V[0],V[1]/ne(ze[0])),ze}return ce.size=function(xe){return arguments.length?(V=xe,ce):V},ko(ce,L)},o.layout.pie=function(){var L=Number,V=El,$=0,ne=It,ce=0;function xe(Ce){var ze,Ue=Ce.length,He=Ce.map(function(Yt,Vt){return+L.call(xe,Yt,Vt)}),et=+(typeof $=="function"?$.apply(this,arguments):$),lt=(typeof ne=="function"?ne.apply(this,arguments):ne)-et,ft=Math.min(Math.abs(lt)/Ue,+(typeof ce=="function"?ce.apply(this,arguments):ce)),xt=ft*(lt<0?-1:1),Mt=o.sum(He),_t=Mt?(lt-Ue*xt)/Mt:0,zt=o.range(Ue),Et=[];return V!=null&&zt.sort(V===El?function(Yt,Vt){return He[Vt]-He[Yt]}:function(Yt,Vt){return V(Ce[Yt],Ce[Vt])}),zt.forEach(function(Yt){Et[Yt]={data:Ce[Yt],value:ze=He[Yt],startAngle:et,endAngle:et+=ze*_t+xt,padAngle:ft}}),Et}return xe.value=function(Ce){return arguments.length?(L=Ce,xe):L},xe.sort=function(Ce){return arguments.length?(V=Ce,xe):V},xe.startAngle=function(Ce){return arguments.length?($=Ce,xe):$},xe.endAngle=function(Ce){return arguments.length?(ne=Ce,xe):ne},xe.padAngle=function(Ce){return arguments.length?(ce=Ce,xe):ce},xe};var El={};function Hl(L){return L.x}function el(L){return L.y}function ql(L,V,$){L.y0=V,L.y=$}o.layout.stack=function(){var L=D,V=Ao,$=Wa,ne=ql,ce=Hl,xe=el;function Ce(ze,Ue){if(!(ft=ze.length))return ze;var He=ze.map(function(Yt,Vt){return L.call(Ce,Yt,Vt)}),et=He.map(function(Yt){return Yt.map(function(Vt,Nt){return[ce.call(Ce,Vt,Nt),xe.call(Ce,Vt,Nt)]})}),lt=V.call(Ce,et,Ue);He=o.permute(He,lt),et=o.permute(et,lt);var ft,xt,Mt,_t,zt=$.call(Ce,et,Ue),Et=He[0].length;for(Mt=0;Mt<Et;++Mt)for(ne.call(Ce,He[0][Mt],_t=zt[Mt],et[0][Mt][1]),xt=1;xt<ft;++xt)ne.call(Ce,He[xt][Mt],_t+=et[xt-1][Mt][1],et[xt][Mt][1]);return ze}return Ce.values=function(ze){return arguments.length?(L=ze,Ce):L},Ce.order=function(ze){return arguments.length?(V=typeof ze=="function"?ze:Uo.get(ze)||Ao,Ce):V},Ce.offset=function(ze){return arguments.length?($=typeof ze=="function"?ze:os.get(ze)||Wa,Ce):$},Ce.x=function(ze){return arguments.length?(ce=ze,Ce):ce},Ce.y=function(ze){return arguments.length?(xe=ze,Ce):xe},Ce.out=function(ze){return arguments.length?(ne=ze,Ce):ne},Ce};var Uo=o.map({"inside-out":function(L){var V,$,ne=L.length,ce=L.map(ys),xe=L.map(Ll),Ce=o.range(ne).sort(function(lt,ft){return ce[lt]-ce[ft]}),ze=0,Ue=0,He=[],et=[];for(V=0;V<ne;++V)$=Ce[V],ze<Ue?(ze+=xe[$],He.push($)):(Ue+=xe[$],et.push($));return et.reverse().concat(He)},reverse:function(L){return o.range(L.length).reverse()},default:Ao}),os=o.map({silhouette:function(L){var V,$,ne,ce=L.length,xe=L[0].length,Ce=[],ze=0,Ue=[];for($=0;$<xe;++$){for(V=0,ne=0;V<ce;V++)ne+=L[V][$][1];ne>ze&&(ze=ne),Ce.push(ne)}for($=0;$<xe;++$)Ue[$]=(ze-Ce[$])/2;return Ue},wiggle:function(L){var V,$,ne,ce,xe,Ce,ze,Ue,He,et=L.length,lt=L[0],ft=lt.length,xt=[];for(xt[0]=Ue=He=0,$=1;$<ft;++$){for(V=0,ce=0;V<et;++V)ce+=L[V][$][1];for(V=0,xe=0,ze=lt[$][0]-lt[$-1][0];V<et;++V){for(ne=0,Ce=(L[V][$][1]-L[V][$-1][1])/(2*ze);ne<V;++ne)Ce+=(L[ne][$][1]-L[ne][$-1][1])/ze;xe+=Ce*L[V][$][1]}xt[$]=Ue-=ce?xe/ce*ze:0,Ue<He&&(He=Ue)}for($=0;$<ft;++$)xt[$]-=He;return xt},expand:function(L){var V,$,ne,ce=L.length,xe=L[0].length,Ce=1/ce,ze=[];for($=0;$<xe;++$){for(V=0,ne=0;V<ce;V++)ne+=L[V][$][1];if(ne)for(V=0;V<ce;V++)L[V][$][1]/=ne;else for(V=0;V<ce;V++)L[V][$][1]=Ce}for($=0;$<xe;++$)ze[$]=0;return ze},zero:Wa});function Ao(L){return o.range(L.length)}function Wa(L){for(var V=-1,$=L[0].length,ne=[];++V<$;)ne[V]=0;return ne}function ys(L){for(var V,$=1,ne=0,ce=L[0][1],xe=L.length;$<xe;++$)(V=L[$][1])>ce&&(ne=$,ce=V);return ne}function Ll(L){return L.reduce(Ds,0)}function Ds(L,V){return L+V[1]}function tl(L,V){return Ma(L,Math.ceil(Math.log(V.length)/Math.LN2+1))}function Ma(L,V){for(var $=-1,ne=+L[0],ce=(L[1]-ne)/V,xe=[];++$<=V;)xe[$]=ce*$+ne;return xe}function nl(L){return[o.min(L),o.max(L)]}function Cl(L,V){return L.value-V.value}function xs(L,V){var $=L._pack_next;L._pack_next=V,V._pack_prev=L,V._pack_next=$,$._pack_prev=V}function ss(L,V){L._pack_next=V,V._pack_prev=L}function bs(L,V){var $=V.x-L.x,ne=V.y-L.y,ce=L.r+V.r;return .999*ce*ce>$*$+ne*ne}function ls(L){if((V=L.children)&&(Ue=V.length)){var V,$,ne,ce,xe,Ce,ze,Ue,He=1/0,et=-1/0,lt=1/0,ft=-1/0;if(V.forEach(cs),($=V[0]).x=-$.r,$.y=0,Vt($),Ue>1&&((ne=V[1]).x=ne.r,ne.y=0,Vt(ne),Ue>2))for(ri($,ne,ce=V[2]),Vt(ce),xs($,ce),$._pack_prev=ce,xs(ce,ne),ne=$._pack_next,xe=3;xe<Ue;xe++){ri($,ne,ce=V[xe]);var xt=0,Mt=1,_t=1;for(Ce=ne._pack_next;Ce!==ne;Ce=Ce._pack_next,Mt++)if(bs(Ce,ce)){xt=1;break}if(xt==1)for(ze=$._pack_prev;ze!==Ce._pack_prev&&!bs(ze,ce);ze=ze._pack_prev,_t++);xt?(Mt<_t||Mt==_t&&ne.r<$.r?ss($,ne=Ce):ss($=ze,ne),xe--):(xs($,ce),ne=ce,Vt(ce))}var zt=(He+et)/2,Et=(lt+ft)/2,Yt=0;for(xe=0;xe<Ue;xe++)(ce=V[xe]).x-=zt,ce.y-=Et,Yt=Math.max(Yt,ce.r+Math.sqrt(ce.x*ce.x+ce.y*ce.y));L.r=Yt,V.forEach(zs)}function Vt(Nt){He=Math.min(Nt.x-Nt.r,He),et=Math.max(Nt.x+Nt.r,et),lt=Math.min(Nt.y-Nt.r,lt),ft=Math.max(Nt.y+Nt.r,ft)}}function cs(L){L._pack_next=L._pack_prev=L}function zs(L){delete L._pack_next,delete L._pack_prev}function rl(L,V,$,ne){var ce=L.children;if(L.x=V+=ne*L.x,L.y=$+=ne*L.y,L.r*=ne,ce)for(var xe=-1,Ce=ce.length;++xe<Ce;)rl(ce[xe],V,$,ne)}function ri(L,V,$){var ne=L.r+$.r,ce=V.x-L.x,xe=V.y-L.y;if(ne&&(ce||xe)){var Ce=V.r+$.r,ze=ce*ce+xe*xe,Ue=.5+((ne*=ne)-(Ce*=Ce))/(2*ze),He=Math.sqrt(Math.max(0,2*Ce*(ne+ze)-(ne-=ze)*ne-Ce*Ce))/(2*ze);$.x=L.x+Ue*ce+He*xe,$.y=L.y+Ue*xe-He*ce}else $.x=L.x+ne,$.y=L.y}function Vo(L,V){return L.parent==V.parent?1:2}function ea(L){var V=L.children;return V.length?V[0]:L.t}function Ya(L){var V,$=L.children;return(V=$.length)?$[V-1]:L.t}function Kr(L,V,$){var ne=$/(V.i-L.i);V.c-=ne,V.s+=$,L.c+=ne,V.z+=$,V.m+=$}function ti(L,V,$){return L.a.parent===V.parent?L.a:$}function Sa(L){var V=L.children;return V&&V.length?Sa(V[0]):L}function _s(L){var V,$=L.children;return $&&(V=$.length)?_s($[V-1]):L}function Rs(L){return{x:L.x,y:L.y,dx:L.dx,dy:L.dy}}function il(L,V){var $=L.x+V[3],ne=L.y+V[0],ce=L.dx-V[1]-V[3],xe=L.dy-V[0]-V[2];return ce<0&&($+=ce/2,ce=0),xe<0&&(ne+=xe/2,xe=0),{x:$,y:ne,dx:ce,dy:xe}}function Fs(L){var V=L[0],$=L[L.length-1];return V<$?[V,$]:[$,V]}function Bs(L){return L.rangeExtent?L.rangeExtent():Fs(L.range())}function Da(L,V,$,ne){var ce=$(L[0],L[1]),xe=ne(V[0],V[1]);return function(Ce){return xe(ce(Ce))}}function Ho(L,V){var $,ne=0,ce=L.length-1,xe=L[ne],Ce=L[ce];return Ce<xe&&($=ne,ne=ce,ce=$,$=xe,xe=Ce,Ce=$),L[ne]=V.floor(xe),L[ce]=V.ceil(Ce),L}function qo(L){return L?{floor:function(V){return Math.floor(V/L)*L},ceil:function(V){return Math.ceil(V/L)*L}}:oa}o.layout.histogram=function(){var L=!0,V=Number,$=nl,ne=tl;function ce(xe,Ce){for(var ze,Ue,He=[],et=xe.map(V,this),lt=$.call(this,et,Ce),ft=ne.call(this,lt,et,Ce),xt=(Ce=-1,et.length),Mt=ft.length-1,_t=L?1:1/xt;++Ce<Mt;)(ze=He[Ce]=[]).dx=ft[Ce+1]-(ze.x=ft[Ce]),ze.y=0;if(Mt>0)for(Ce=-1;++Ce<xt;)(Ue=et[Ce])>=lt[0]&&Ue<=lt[1]&&((ze=He[o.bisect(ft,Ue,1,Mt)-1]).y+=_t,ze.push(xe[Ce]));return He}return ce.value=function(xe){return arguments.length?(V=xe,ce):V},ce.range=function(xe){return arguments.length?($=Rn(xe),ce):$},ce.bins=function(xe){return arguments.length?(ne=typeof xe=="number"?function(Ce){return Ma(Ce,xe)}:Rn(xe),ce):ne},ce.frequency=function(xe){return arguments.length?(L=!!xe,ce):L},ce},o.layout.pack=function(){var L,V=o.layout.hierarchy().sort(Cl),$=0,ne=[1,1];function ce(xe,Ce){var ze=V.call(this,xe,Ce),Ue=ze[0],He=ne[0],et=ne[1],lt=L==null?Math.sqrt:typeof L=="function"?L:function(){return L};if(Ue.x=Ue.y=0,Gr(Ue,function(xt){xt.r=+lt(xt.value)}),Gr(Ue,ls),$){var ft=$*(L?1:Math.max(2*Ue.r/He,2*Ue.r/et))/2;Gr(Ue,function(xt){xt.r+=ft}),Gr(Ue,ls),Gr(Ue,function(xt){xt.r-=ft})}return rl(Ue,He/2,et/2,L?1:1/Math.max(2*Ue.r/He,2*Ue.r/et)),ze}return ce.size=function(xe){return arguments.length?(ne=xe,ce):ne},ce.radius=function(xe){return arguments.length?(L=xe==null||typeof xe=="function"?xe:+xe,ce):L},ce.padding=function(xe){return arguments.length?($=+xe,ce):$},ko(ce,V)},o.layout.tree=function(){var L=o.layout.hierarchy().sort(null).value(null),V=Vo,$=[1,1],ne=null;function ce(Ue,He){var et=L.call(this,Ue,He),lt=et[0],ft=function(Vt){for(var Nt,fn={A:null,children:[Vt]},gn=[fn];(Nt=gn.pop())!=null;)for(var kn,Pn=Nt.children,Nn=0,nr=Pn.length;Nn<nr;++Nn)gn.push((Pn[Nn]=kn={_:Pn[Nn],parent:Nt,children:(kn=Pn[Nn].children)&&kn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Nn}).a=kn);return fn.children[0]}(lt);if(Gr(ft,xe),ft.parent.m=-ft.z,jo(ft,Ce),ne)jo(lt,ze);else{var xt=lt,Mt=lt,_t=lt;jo(lt,function(Vt){Vt.x<xt.x&&(xt=Vt),Vt.x>Mt.x&&(Mt=Vt),Vt.depth>_t.depth&&(_t=Vt)});var zt=V(xt,Mt)/2-xt.x,Et=$[0]/(Mt.x+V(Mt,xt)/2+zt),Yt=$[1]/(_t.depth||1);jo(lt,function(Vt){Vt.x=(Vt.x+zt)*Et,Vt.y=Vt.depth*Yt})}return et}function xe(Ue){var He=Ue.children,et=Ue.parent.children,lt=Ue.i?et[Ue.i-1]:null;if(He.length){(function(xt){for(var Mt,_t=0,zt=0,Et=xt.children,Yt=Et.length;--Yt>=0;)(Mt=Et[Yt]).z+=_t,Mt.m+=_t,_t+=Mt.s+(zt+=Mt.c)})(Ue);var ft=(He[0].z+He[He.length-1].z)/2;lt?(Ue.z=lt.z+V(Ue._,lt._),Ue.m=Ue.z-ft):Ue.z=ft}else lt&&(Ue.z=lt.z+V(Ue._,lt._));Ue.parent.A=function(xt,Mt,_t){if(Mt){for(var zt,Et=xt,Yt=xt,Vt=Mt,Nt=Et.parent.children[0],fn=Et.m,gn=Yt.m,kn=Vt.m,Pn=Nt.m;Vt=Ya(Vt),Et=ea(Et),Vt&&Et;)Nt=ea(Nt),(Yt=Ya(Yt)).a=xt,(zt=Vt.z+kn-Et.z-fn+V(Vt._,Et._))>0&&(Kr(ti(Vt,xt,_t),xt,zt),fn+=zt,gn+=zt),kn+=Vt.m,fn+=Et.m,Pn+=Nt.m,gn+=Yt.m;Vt&&!Ya(Yt)&&(Yt.t=Vt,Yt.m+=kn-gn),Et&&!ea(Nt)&&(Nt.t=Et,Nt.m+=fn-Pn,_t=xt)}return _t}(Ue,lt,Ue.parent.A||et[0])}function Ce(Ue){Ue._.x=Ue.z+Ue.parent.m,Ue.m+=Ue.parent.m}function ze(Ue){Ue.x*=$[0],Ue.y=Ue.depth*$[1]}return ce.separation=function(Ue){return arguments.length?(V=Ue,ce):V},ce.size=function(Ue){return arguments.length?(ne=($=Ue)==null?ze:null,ce):ne?null:$},ce.nodeSize=function(Ue){return arguments.length?(ne=($=Ue)==null?null:ze,ce):ne?$:null},ko(ce,L)},o.layout.cluster=function(){var L=o.layout.hierarchy().sort(null).value(null),V=Vo,$=[1,1],ne=!1;function ce(xe,Ce){var ze,Ue=L.call(this,xe,Ce),He=Ue[0],et=0;Gr(He,function(_t){var zt=_t.children;zt&&zt.length?(_t.x=function(Et){return Et.reduce(function(Yt,Vt){return Yt+Vt.x},0)/Et.length}(zt),_t.y=function(Et){return 1+o.max(Et,function(Yt){return Yt.y})}(zt)):(_t.x=ze?et+=V(_t,ze):0,_t.y=0,ze=_t)});var lt=Sa(He),ft=_s(He),xt=lt.x-V(lt,ft)/2,Mt=ft.x+V(ft,lt)/2;return Gr(He,ne?function(_t){_t.x=(_t.x-He.x)*$[0],_t.y=(He.y-_t.y)*$[1]}:function(_t){_t.x=(_t.x-xt)/(Mt-xt)*$[0],_t.y=(1-(He.y?_t.y/He.y:1))*$[1]}),Ue}return ce.separation=function(xe){return arguments.length?(V=xe,ce):V},ce.size=function(xe){return arguments.length?(ne=($=xe)==null,ce):ne?null:$},ce.nodeSize=function(xe){return arguments.length?(ne=($=xe)!=null,ce):ne?$:null},ko(ce,L)},o.layout.treemap=function(){var L,V=o.layout.hierarchy(),$=Math.round,ne=[1,1],ce=null,xe=Rs,Ce=!1,ze="squarify",Ue=.5*(1+Math.sqrt(5));function He(_t,zt){for(var Et,Yt,Vt=-1,Nt=_t.length;++Vt<Nt;)Yt=(Et=_t[Vt]).value*(zt<0?0:zt),Et.area=isNaN(Yt)||Yt<=0?0:Yt}function et(_t){var zt=_t.children;if(zt&&zt.length){var Et,Yt,Vt,Nt=xe(_t),fn=[],gn=zt.slice(),kn=1/0,Pn=ze==="slice"?Nt.dx:ze==="dice"?Nt.dy:ze==="slice-dice"?1&_t.depth?Nt.dy:Nt.dx:Math.min(Nt.dx,Nt.dy);for(He(gn,Nt.dx*Nt.dy/_t.value),fn.area=0;(Vt=gn.length)>0;)fn.push(Et=gn[Vt-1]),fn.area+=Et.area,ze!=="squarify"||(Yt=ft(fn,Pn))<=kn?(gn.pop(),kn=Yt):(fn.area-=fn.pop().area,xt(fn,Pn,Nt,!1),Pn=Math.min(Nt.dx,Nt.dy),fn.length=fn.area=0,kn=1/0);fn.length&&(xt(fn,Pn,Nt,!0),fn.length=fn.area=0),zt.forEach(et)}}function lt(_t){var zt=_t.children;if(zt&&zt.length){var Et,Yt=xe(_t),Vt=zt.slice(),Nt=[];for(He(Vt,Yt.dx*Yt.dy/_t.value),Nt.area=0;Et=Vt.pop();)Nt.push(Et),Nt.area+=Et.area,Et.z!=null&&(xt(Nt,Et.z?Yt.dx:Yt.dy,Yt,!Vt.length),Nt.length=Nt.area=0);zt.forEach(lt)}}function ft(_t,zt){for(var Et,Yt=_t.area,Vt=0,Nt=1/0,fn=-1,gn=_t.length;++fn<gn;)(Et=_t[fn].area)&&(Et<Nt&&(Nt=Et),Et>Vt&&(Vt=Et));return zt*=zt,(Yt*=Yt)?Math.max(zt*Vt*Ue/Yt,Yt/(zt*Nt*Ue)):1/0}function xt(_t,zt,Et,Yt){var Vt,Nt=-1,fn=_t.length,gn=Et.x,kn=Et.y,Pn=zt?$(_t.area/zt):0;if(zt==Et.dx){for((Yt||Pn>Et.dy)&&(Pn=Et.dy);++Nt<fn;)(Vt=_t[Nt]).x=gn,Vt.y=kn,Vt.dy=Pn,gn+=Vt.dx=Math.min(Et.x+Et.dx-gn,Pn?$(Vt.area/Pn):0);Vt.z=!0,Vt.dx+=Et.x+Et.dx-gn,Et.y+=Pn,Et.dy-=Pn}else{for((Yt||Pn>Et.dx)&&(Pn=Et.dx);++Nt<fn;)(Vt=_t[Nt]).x=gn,Vt.y=kn,Vt.dx=Pn,kn+=Vt.dy=Math.min(Et.y+Et.dy-kn,Pn?$(Vt.area/Pn):0);Vt.z=!1,Vt.dy+=Et.y+Et.dy-kn,Et.x+=Pn,Et.dx-=Pn}}function Mt(_t){var zt=L||V(_t),Et=zt[0];return Et.x=Et.y=0,Et.value?(Et.dx=ne[0],Et.dy=ne[1]):Et.dx=Et.dy=0,L&&V.revalue(Et),He([Et],Et.dx*Et.dy/Et.value),(L?lt:et)(Et),Ce&&(L=zt),zt}return Mt.size=function(_t){return arguments.length?(ne=_t,Mt):ne},Mt.padding=function(_t){if(!arguments.length)return ce;function zt(Yt){return il(Yt,_t)}var Et;return xe=(ce=_t)==null?Rs:(Et=typeof _t)=="function"?function(Yt){var Vt=_t.call(Mt,Yt,Yt.depth);return Vt==null?Rs(Yt):il(Yt,typeof Vt=="number"?[Vt,Vt,Vt,Vt]:Vt)}:(Et==="number"&&(_t=[_t,_t,_t,_t]),zt),Mt},Mt.round=function(_t){return arguments.length?($=_t?Math.round:Number,Mt):$!=Number},Mt.sticky=function(_t){return arguments.length?(Ce=_t,L=null,Mt):Ce},Mt.ratio=function(_t){return arguments.length?(Ue=_t,Mt):Ue},Mt.mode=function(_t){return arguments.length?(ze=_t+"",Mt):ze},ko(Mt,V)},o.random={normal:function(L,V){var $=arguments.length;return $<2&&(V=1),$<1&&(L=0),function(){var ne,ce,xe;do xe=(ne=2*Math.random()-1)*ne+(ce=2*Math.random()-1)*ce;while(!xe||xe>1);return L+V*ne*Math.sqrt(-2*Math.log(xe)/xe)}},logNormal:function(){var L=o.random.normal.apply(o,arguments);return function(){return Math.exp(L())}},bates:function(L){var V=o.random.irwinHall(L);return function(){return V()/L}},irwinHall:function(L){return function(){for(var V=0,$=0;$<L;$++)V+=Math.random();return V}}},o.scale={};var oa={floor:D,ceil:D};function Ns(L,V,$,ne){var ce=[],xe=[],Ce=0,ze=Math.min(L.length,V.length)-1;for(L[ze]<L[0]&&(L=L.slice().reverse(),V=V.slice().reverse());++Ce<=ze;)ce.push($(L[Ce-1],L[Ce])),xe.push(ne(V[Ce-1],V[Ce]));return function(Ue){var He=o.bisect(L,Ue,1,ze)-1;return xe[He](ce[He](Ue))}}function za(L,V,$,ne){var ce,xe;function Ce(){var Ue=Math.min(L.length,V.length)>2?Ns:Da,He=ne?Ul:jl;return ce=Ue(L,V,He,$),xe=Ue(V,L,He,Oa),ze}function ze(Ue){return ce(Ue)}return ze.invert=function(Ue){return xe(Ue)},ze.domain=function(Ue){return arguments.length?(L=Ue.map(Number),Ce()):L},ze.range=function(Ue){return arguments.length?(V=Ue,Ce()):V},ze.rangeRound=function(Ue){return ze.range(Ue).interpolate(hl)},ze.clamp=function(Ue){return arguments.length?(ne=Ue,Ce()):ne},ze.interpolate=function(Ue){return arguments.length?($=Ue,Ce()):$},ze.ticks=function(Ue){return Xi(L,Ue)},ze.tickFormat=function(Ue,He){return d3_scale_linearTickFormat(L,Ue,He)},ze.nice=function(Ue){return Zi(L,Ue),Ce()},ze.copy=function(){return za(L,V,$,ne)},Ce()}function Hi(L,V){return o.rebind(L,V,"range","rangeRound","interpolate","clamp")}function Zi(L,V){return Ho(L,qo(ui(L,V)[2])),Ho(L,qo(ui(L,V)[2])),L}function ui(L,V){V==null&&(V=10);var $=Fs(L),ne=$[1]-$[0],ce=Math.pow(10,Math.floor(Math.log(ne/V)/Math.LN10)),xe=V/ne*ce;return xe<=.15?ce*=10:xe<=.35?ce*=5:xe<=.75&&(ce*=2),$[0]=Math.ceil($[0]/ce)*ce,$[1]=Math.floor($[1]/ce)*ce+.5*ce,$[2]=ce,$}function Xi(L,V){return o.range.apply(o,ui(L,V))}function uo(L,V,$,ne){function ce(ze){return($?Math.log(ze<0?0:ze):-Math.log(ze>0?0:-ze))/Math.log(V)}function xe(ze){return $?Math.pow(V,ze):-Math.pow(V,-ze)}function Ce(ze){return L(ce(ze))}return Ce.invert=function(ze){return xe(L.invert(ze))},Ce.domain=function(ze){return arguments.length?($=ze[0]>=0,L.domain((ne=ze.map(Number)).map(ce)),Ce):ne},Ce.base=function(ze){return arguments.length?(V=+ze,L.domain(ne.map(ce)),Ce):V},Ce.nice=function(){var ze=Ho(ne.map(ce),$?Math:us);return L.domain(ze),ne=ze.map(xe),Ce},Ce.ticks=function(){var ze=Fs(ne),Ue=[],He=ze[0],et=ze[1],lt=Math.floor(ce(He)),ft=Math.ceil(ce(et)),xt=V%1?2:V;if(isFinite(ft-lt)){if($){for(;lt<ft;lt++)for(var Mt=1;Mt<xt;Mt++)Ue.push(xe(lt)*Mt);Ue.push(xe(lt))}else for(Ue.push(xe(lt));lt++<ft;)for(Mt=xt-1;Mt>0;Mt--)Ue.push(xe(lt)*Mt);for(lt=0;Ue[lt]<He;lt++);for(ft=Ue.length;Ue[ft-1]>et;ft--);Ue=Ue.slice(lt,ft)}return Ue},Ce.copy=function(){return uo(L.copy(),V,$,ne)},Hi(Ce,L)}o.scale.linear=function(){return za([0,1],[0,1],Oa,!1)},o.scale.log=function(){return uo(o.scale.linear().domain([0,1]),10,!0,[1,10])};var us={floor:function(L){return-Math.ceil(-L)},ceil:function(L){return-Math.floor(-L)}};function Za(L,V,$){var ne=Go(V),ce=Go(1/V);function xe(Ce){return L(ne(Ce))}return xe.invert=function(Ce){return ce(L.invert(Ce))},xe.domain=function(Ce){return arguments.length?(L.domain(($=Ce.map(Number)).map(ne)),xe):$},xe.ticks=function(Ce){return Xi($,Ce)},xe.tickFormat=function(Ce,ze){return d3_scale_linearTickFormat($,Ce,ze)},xe.nice=function(Ce){return xe.domain(Zi($,Ce))},xe.exponent=function(Ce){return arguments.length?(ne=Go(V=Ce),ce=Go(1/V),L.domain($.map(ne)),xe):V},xe.copy=function(){return Za(L.copy(),V,$)},Hi(xe,L)}function Go(L){return function(V){return V<0?-Math.pow(-V,L):Math.pow(V,L)}}function ha(L,V){var $,ne,ce;function xe(ze){return ne[(($.get(ze)||(V.t==="range"?$.set(ze,L.push(ze)):NaN))-1)%ne.length]}function Ce(ze,Ue){return o.range(L.length).map(function(He){return ze+Ue*He})}return xe.domain=function(ze){if(!arguments.length)return L;L=[],$=new v;for(var Ue,He=-1,et=ze.length;++He<et;)$.has(Ue=ze[He])||$.set(Ue,L.push(Ue));return xe[V.t].apply(xe,V.a)},xe.range=function(ze){return arguments.length?(ne=ze,ce=0,V={t:"range",a:arguments},xe):ne},xe.rangePoints=function(ze,Ue){arguments.length<2&&(Ue=0);var He=ze[0],et=ze[1],lt=L.length<2?(He=(He+et)/2,0):(et-He)/(L.length-1+Ue);return ne=Ce(He+lt*Ue/2,lt),ce=0,V={t:"rangePoints",a:arguments},xe},xe.rangeRoundPoints=function(ze,Ue){arguments.length<2&&(Ue=0);var He=ze[0],et=ze[1],lt=L.length<2?(He=et=Math.round((He+et)/2),0):(et-He)/(L.length-1+Ue)|0;return ne=Ce(He+Math.round(lt*Ue/2+(et-He-(L.length-1+Ue)*lt)/2),lt),ce=0,V={t:"rangeRoundPoints",a:arguments},xe},xe.rangeBands=function(ze,Ue,He){arguments.length<2&&(Ue=0),arguments.length<3&&(He=Ue);var et=ze[1]<ze[0],lt=ze[et-0],ft=(ze[1-et]-lt)/(L.length-Ue+2*He);return ne=Ce(lt+ft*He,ft),et&&ne.reverse(),ce=ft*(1-Ue),V={t:"rangeBands",a:arguments},xe},xe.rangeRoundBands=function(ze,Ue,He){arguments.length<2&&(Ue=0),arguments.length<3&&(He=Ue);var et=ze[1]<ze[0],lt=ze[et-0],ft=ze[1-et],xt=Math.floor((ft-lt)/(L.length-Ue+2*He));return ne=Ce(lt+Math.round((ft-lt-(L.length-Ue)*xt)/2),xt),et&&ne.reverse(),ce=Math.round(xt*(1-Ue)),V={t:"rangeRoundBands",a:arguments},xe},xe.rangeBand=function(){return ce},xe.rangeExtent=function(){return Fs(V.a[0])},xe.copy=function(){return ha(L,V)},xe.domain(L)}o.scale.pow=function(){return Za(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return ha([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(fs)},o.scale.category20=function(){return o.scale.ordinal().range(Mo)},o.scale.category20b=function(){return o.scale.ordinal().range(Ra)},o.scale.category20c=function(){return o.scale.ordinal().range(Fa)};var fs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Kt),Mo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Kt),Ra=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Kt),Fa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Kt);function pi(L,V){var $;function ne(){var xe=0,Ce=V.length;for($=[];++xe<Ce;)$[xe-1]=o.quantile(L,xe/Ce);return ce}function ce(xe){if(!isNaN(xe=+xe))return V[o.bisect($,xe)]}return ce.domain=function(xe){return arguments.length?(L=xe.map(h).filter(u).sort(c),ne()):L},ce.range=function(xe){return arguments.length?(V=xe,ne()):V},ce.quantiles=function(){return $},ce.invertExtent=function(xe){return(xe=V.indexOf(xe))<0?[NaN,NaN]:[xe>0?$[xe-1]:L[0],xe<$.length?$[xe]:L[L.length-1]]},ce.copy=function(){return pi(L,V)},ne()}function Xa(L,V,$){var ne,ce;function xe(ze){return $[Math.max(0,Math.min(ce,Math.floor(ne*(ze-L))))]}function Ce(){return ne=$.length/(V-L),ce=$.length-1,xe}return xe.domain=function(ze){return arguments.length?(L=+ze[0],V=+ze[ze.length-1],Ce()):[L,V]},xe.range=function(ze){return arguments.length?($=ze,Ce()):$},xe.invertExtent=function(ze){return[ze=(ze=$.indexOf(ze))<0?NaN:ze/ne+L,ze+1/ne]},xe.copy=function(){return Xa(L,V,$)},Ce()}function kr(L,V){function $(ne){if(ne<=ne)return V[o.bisect(L,ne)]}return $.domain=function(ne){return arguments.length?(L=ne,$):L},$.range=function(ne){return arguments.length?(V=ne,$):V},$.invertExtent=function(ne){return ne=V.indexOf(ne),[L[ne-1],L[ne]]},$.copy=function(){return kr(L,V)},$}function js(L){function V($){return+$}return V.invert=V,V.domain=V.range=function($){return arguments.length?(L=$.map(V),V):L},V.ticks=function($){return Xi(L,$)},V.tickFormat=function($,ne){return d3_scale_linearTickFormat(L,$,ne)},V.copy=function(){return js(L)},V}function dl(){return 0}o.scale.quantile=function(){return pi([],[])},o.scale.quantize=function(){return Xa(0,1,[0,1])},o.scale.threshold=function(){return kr([.5],[0,1])},o.scale.identity=function(){return js([0,1])},o.svg={},o.svg.arc=function(){var L=Yo,V=hs,$=dl,ne=Wo,ce=ws,xe=yr,Ce=Us;function ze(){var He=Math.max(0,+L.apply(this,arguments)),et=Math.max(0,+V.apply(this,arguments)),lt=ce.apply(this,arguments)-qe,ft=xe.apply(this,arguments)-qe,xt=Math.abs(ft-lt),Mt=lt>ft?0:1;if(et<He&&(_t=et,et=He,He=_t),xt>=At)return Ue(et,Mt)+(He?Ue(He,1-Mt):"")+"Z";var _t,zt,Et,Yt,Vt,Nt,fn,gn,kn,Pn,Nn,nr,cr=0,qn=0,sr=[];if((Yt=(+Ce.apply(this,arguments)||0)/2)&&(Et=ne===Wo?Math.sqrt(He*He+et*et):+ne.apply(this,arguments),Mt||(qn*=-1),et&&(qn=We(Et/et*Math.sin(Yt))),He&&(cr=We(Et/He*Math.sin(Yt)))),et){Vt=et*Math.cos(lt+qn),Nt=et*Math.sin(lt+qn),fn=et*Math.cos(ft-qn),gn=et*Math.sin(ft-qn);var xr=Math.abs(ft-lt-2*qn)<=Pt?0:1;if(qn&&So(Vt,Nt,fn,gn)===Mt^xr){var Er=(lt+ft)/2;Vt=et*Math.cos(Er),Nt=et*Math.sin(Er),fn=gn=null}}else Vt=Nt=0;if(He){kn=He*Math.cos(ft-cr),Pn=He*Math.sin(ft-cr),Nn=He*Math.cos(lt+cr),nr=He*Math.sin(lt+cr);var Qn=Math.abs(lt-ft+2*cr)<=Pt?0:1;if(cr&&So(kn,Pn,Nn,nr)===1-Mt^Qn){var or=(lt+ft)/2;kn=He*Math.cos(or),Pn=He*Math.sin(or),Nn=nr=null}}else kn=Pn=0;if(xt>Je&&(_t=Math.min(Math.abs(et-He)/2,+$.apply(this,arguments)))>.001){zt=He<et^Mt?0:1;var wr=_t,ur=_t;if(xt<Pt){var Ar=Nn==null?[kn,Pn]:fn==null?[Vt,Nt]:St([Vt,Nt],[Nn,nr],[fn,gn],[kn,Pn]),Pr=Vt-Ar[0],Nr=Nt-Ar[1],jr=fn-Ar[0],qr=gn-Ar[1],Yr=1/Math.sin(Math.acos((Pr*jr+Nr*qr)/(Math.sqrt(Pr*Pr+Nr*Nr)*Math.sqrt(jr*jr+qr*qr)))/2),gi=Math.sqrt(Ar[0]*Ar[0]+Ar[1]*Ar[1]);ur=Math.min(_t,(He-gi)/(Yr-1)),wr=Math.min(_t,(et-gi)/(Yr+1))}if(fn!=null){var Li=qi(Nn==null?[kn,Pn]:[Nn,nr],[Vt,Nt],et,wr,Mt),la=qi([fn,gn],[kn,Pn],et,wr,Mt);_t===wr?sr.push("M",Li[0],"A",wr,",",wr," 0 0,",zt," ",Li[1],"A",et,",",et," 0 ",1-Mt^So(Li[1][0],Li[1][1],la[1][0],la[1][1]),",",Mt," ",la[1],"A",wr,",",wr," 0 0,",zt," ",la[0]):sr.push("M",Li[0],"A",wr,",",wr," 0 1,",zt," ",la[0])}else sr.push("M",Vt,",",Nt);if(Nn!=null){var Gi=qi([Vt,Nt],[Nn,nr],He,-ur,Mt),ta=qi([kn,Pn],fn==null?[Vt,Nt]:[fn,gn],He,-ur,Mt);_t===ur?sr.push("L",ta[0],"A",ur,",",ur," 0 0,",zt," ",ta[1],"A",He,",",He," 0 ",Mt^So(ta[1][0],ta[1][1],Gi[1][0],Gi[1][1]),",",1-Mt," ",Gi[1],"A",ur,",",ur," 0 0,",zt," ",Gi[0]):sr.push("L",ta[0],"A",ur,",",ur," 0 0,",zt," ",Gi[0])}else sr.push("L",kn,",",Pn)}else sr.push("M",Vt,",",Nt),fn!=null&&sr.push("A",et,",",et," 0 ",xr,",",Mt," ",fn,",",gn),sr.push("L",kn,",",Pn),Nn!=null&&sr.push("A",He,",",He," 0 ",Qn,",",1-Mt," ",Nn,",",nr);return sr.push("Z"),sr.join("")}function Ue(He,et){return"M0,"+He+"A"+He+","+He+" 0 1,"+et+" 0,"+-He+"A"+He+","+He+" 0 1,"+et+" 0,"+He}return ze.innerRadius=function(He){return arguments.length?(L=Rn(He),ze):L},ze.outerRadius=function(He){return arguments.length?(V=Rn(He),ze):V},ze.cornerRadius=function(He){return arguments.length?($=Rn(He),ze):$},ze.padRadius=function(He){return arguments.length?(ne=He==Wo?Wo:Rn(He),ze):ne},ze.startAngle=function(He){return arguments.length?(ce=Rn(He),ze):ce},ze.endAngle=function(He){return arguments.length?(xe=Rn(He),ze):xe},ze.padAngle=function(He){return arguments.length?(Ce=Rn(He),ze):Ce},ze.centroid=function(){var He=(+L.apply(this,arguments)+ +V.apply(this,arguments))/2,et=(+ce.apply(this,arguments)+ +xe.apply(this,arguments))/2-qe;return[Math.cos(et)*He,Math.sin(et)*He]},ze};var Wo="auto";function Yo(L){return L.innerRadius}function hs(L){return L.outerRadius}function ws(L){return L.startAngle}function yr(L){return L.endAngle}function Us(L){return L&&L.padAngle}function So(L,V,$,ne){return(L-$)*V-(V-ne)*L>0?0:1}function qi(L,V,$,ne,ce){var xe=L[0]-V[0],Ce=L[1]-V[1],ze=(ce?ne:-ne)/Math.sqrt(xe*xe+Ce*Ce),Ue=ze*Ce,He=-ze*xe,et=L[0]+Ue,lt=L[1]+He,ft=V[0]+Ue,xt=V[1]+He,Mt=(et+ft)/2,_t=(lt+xt)/2,zt=ft-et,Et=xt-lt,Yt=zt*zt+Et*Et,Vt=$-ne,Nt=et*xt-ft*lt,fn=(Et<0?-1:1)*Math.sqrt(Math.max(0,Vt*Vt*Yt-Nt*Nt)),gn=(Nt*Et-zt*fn)/Yt,kn=(-Nt*zt-Et*fn)/Yt,Pn=(Nt*Et+zt*fn)/Yt,Nn=(-Nt*zt+Et*fn)/Yt,nr=gn-Mt,cr=kn-_t,qn=Pn-Mt,sr=Nn-_t;return nr*nr+cr*cr>qn*qn+sr*sr&&(gn=Pn,kn=Nn),[[gn-Ue,kn-He],[gn*$/Vt,kn*$/Vt]]}function Zo(){return!0}function Ka(L){var V=jn,$=Bn,ne=Zo,ce=sa,xe=ce.key,Ce=.7;function ze(Ue){var He,et=[],lt=[],ft=-1,xt=Ue.length,Mt=Rn(V),_t=Rn($);function zt(){et.push("M",ce(L(lt),Ce))}for(;++ft<xt;)ne.call(this,He=Ue[ft],ft)?lt.push([+Mt.call(this,He,ft),+_t.call(this,He,ft)]):lt.length&&(zt(),lt=[]);return lt.length&&zt(),et.length?et.join(""):null}return ze.x=function(Ue){return arguments.length?(V=Ue,ze):V},ze.y=function(Ue){return arguments.length?($=Ue,ze):$},ze.defined=function(Ue){return arguments.length?(ne=Ue,ze):ne},ze.interpolate=function(Ue){return arguments.length?(xe=typeof Ue=="function"?ce=Ue:(ce=Ba.get(Ue)||sa).key,ze):xe},ze.tension=function(Ue){return arguments.length?(Ce=Ue,ze):Ce},ze}o.svg.line=function(){return Ka(D)};var Ba=o.map({linear:sa,"linear-closed":fo,step:function(L){for(var V=0,$=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++V<$;)ce.push("H",(ne[0]+(ne=L[V])[0])/2,"V",ne[1]);return $>1&&ce.push("H",ne[0]),ce.join("")},"step-before":Na,"step-after":Eo,basis:Zr,"basis-open":function(L){if(L.length<4)return sa(L);for(var V,$=[],ne=-1,ce=L.length,xe=[0],Ce=[0];++ne<3;)V=L[ne],xe.push(V[0]),Ce.push(V[1]);for($.push(Ki(da,xe)+","+Ki(da,Ce)),--ne;++ne<ce;)V=L[ne],xe.shift(),xe.push(V[0]),Ce.shift(),Ce.push(V[1]),Ts($,xe,Ce);return $.join("")},"basis-closed":function(L){for(var V,$,ne=-1,ce=L.length,xe=ce+4,Ce=[],ze=[];++ne<4;)$=L[ne%ce],Ce.push($[0]),ze.push($[1]);for(V=[Ki(da,Ce),",",Ki(da,ze)],--ne;++ne<xe;)$=L[ne%ce],Ce.shift(),Ce.push($[0]),ze.shift(),ze.push($[1]),Ts(V,Ce,ze);return V.join("")},bundle:function(L,V){var $=L.length-1;if($)for(var ne,ce,xe=L[0][0],Ce=L[0][1],ze=L[$][0]-xe,Ue=L[$][1]-Ce,He=-1;++He<=$;)ce=He/$,(ne=L[He])[0]=V*ne[0]+(1-V)*(xe+ce*ze),ne[1]=V*ne[1]+(1-V)*(Ce+ce*Ue);return Zr(L)},cardinal:function(L,V){return L.length<3?sa(L):L[0]+Vs(L,Xo(L,V))},"cardinal-open":function(L,V){return L.length<4?sa(L):L[1]+Vs(L.slice(1,-1),Xo(L,V))},"cardinal-closed":function(L,V){return L.length<3?fo(L):L[0]+Vs((L.push(L[0]),L),Xo([L[L.length-2]].concat(L,[L[1]]),V))},monotone:function(L){return L.length<3?sa(L):L[0]+Vs(L,function(V){for(var $,ne,ce,xe,Ce=[],ze=function(et){for(var lt=0,ft=et.length-1,xt=[],Mt=et[0],_t=et[1],zt=xt[0]=ks(Mt,_t);++lt<ft;)xt[lt]=(zt+(zt=ks(Mt=_t,_t=et[lt+1])))/2;return xt[lt]=zt,xt}(V),Ue=-1,He=V.length-1;++Ue<He;)$=ks(V[Ue],V[Ue+1]),g($)<Je?ze[Ue]=ze[Ue+1]=0:(xe=(ne=ze[Ue]/$)*ne+(ce=ze[Ue+1]/$)*ce)>9&&(xe=3*$/Math.sqrt(xe),ze[Ue]=xe*ne,ze[Ue+1]=xe*ce);for(Ue=-1;++Ue<=He;)xe=(V[Math.min(He,Ue+1)][0]-V[Math.max(0,Ue-1)][0])/(6*(1+ze[Ue]*ze[Ue])),Ce.push([xe||0,ze[Ue]*xe||0]);return Ce}(L))}});function sa(L){return L.length>1?L.join("L"):L+"Z"}function fo(L){return L.join("L")+"Z"}function Na(L){for(var V=0,$=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++V<$;)ce.push("V",(ne=L[V])[1],"H",ne[0]);return ce.join("")}function Eo(L){for(var V=0,$=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++V<$;)ce.push("H",(ne=L[V])[0],"V",ne[1]);return ce.join("")}function Vs(L,V){if(V.length<1||L.length!=V.length&&L.length!=V.length+2)return sa(L);var $=L.length!=V.length,ne="",ce=L[0],xe=L[1],Ce=V[0],ze=Ce,Ue=1;if($&&(ne+="Q"+(xe[0]-2*Ce[0]/3)+","+(xe[1]-2*Ce[1]/3)+","+xe[0]+","+xe[1],ce=L[1],Ue=2),V.length>1){ze=V[1],xe=L[Ue],Ue++,ne+="C"+(ce[0]+Ce[0])+","+(ce[1]+Ce[1])+","+(xe[0]-ze[0])+","+(xe[1]-ze[1])+","+xe[0]+","+xe[1];for(var He=2;He<V.length;He++,Ue++)xe=L[Ue],ze=V[He],ne+="S"+(xe[0]-ze[0])+","+(xe[1]-ze[1])+","+xe[0]+","+xe[1]}if($){var et=L[Ue];ne+="Q"+(xe[0]+2*ze[0]/3)+","+(xe[1]+2*ze[1]/3)+","+et[0]+","+et[1]}return ne}function Xo(L,V){for(var $,ne=[],ce=(1-V)/2,xe=L[0],Ce=L[1],ze=1,Ue=L.length;++ze<Ue;)$=xe,xe=Ce,Ce=L[ze],ne.push([ce*(Ce[0]-$[0]),ce*(Ce[1]-$[1])]);return ne}function Zr(L){if(L.length<3)return sa(L);var V=1,$=L.length,ne=L[0],ce=ne[0],xe=ne[1],Ce=[ce,ce,ce,(ne=L[1])[0]],ze=[xe,xe,xe,ne[1]],Ue=[ce,",",xe,"L",Ki(da,Ce),",",Ki(da,ze)];for(L.push(L[$-1]);++V<=$;)ne=L[V],Ce.shift(),Ce.push(ne[0]),ze.shift(),ze.push(ne[1]),Ts(Ue,Ce,ze);return L.pop(),Ue.push("L",ne),Ue.join("")}function Ki(L,V){return L[0]*V[0]+L[1]*V[1]+L[2]*V[2]+L[3]*V[3]}Ba.forEach(function(L,V){V.key=L,V.closed=/-closed$/.test(L)});var pa=[0,2/3,1/3,0],ho=[0,1/3,2/3,0],da=[0,1/6,2/3,1/6];function Ts(L,V,$){L.push("C",Ki(pa,V),",",Ki(pa,$),",",Ki(ho,V),",",Ki(ho,$),",",Ki(da,V),",",Ki(da,$))}function ks(L,V){return(V[1]-L[1])/(V[0]-L[0])}function ga(L){for(var V,$,ne,ce=-1,xe=L.length;++ce<xe;)$=(V=L[ce])[0],ne=V[1]-qe,V[0]=$*Math.cos(ne),V[1]=$*Math.sin(ne);return L}function Wr(L){var V=jn,$=jn,ne=0,ce=Bn,xe=Zo,Ce=sa,ze=Ce.key,Ue=Ce,He="L",et=.7;function lt(ft){var xt,Mt,_t,zt=[],Et=[],Yt=[],Vt=-1,Nt=ft.length,fn=Rn(V),gn=Rn(ne),kn=V===$?function(){return Mt}:Rn($),Pn=ne===ce?function(){return _t}:Rn(ce);function Nn(){zt.push("M",Ce(L(Yt),et),He,Ue(L(Et.reverse()),et),"Z")}for(;++Vt<Nt;)xe.call(this,xt=ft[Vt],Vt)?(Et.push([Mt=+fn.call(this,xt,Vt),_t=+gn.call(this,xt,Vt)]),Yt.push([+kn.call(this,xt,Vt),+Pn.call(this,xt,Vt)])):Et.length&&(Nn(),Et=[],Yt=[]);return Et.length&&Nn(),zt.length?zt.join(""):null}return lt.x=function(ft){return arguments.length?(V=$=ft,lt):$},lt.x0=function(ft){return arguments.length?(V=ft,lt):V},lt.x1=function(ft){return arguments.length?($=ft,lt):$},lt.y=function(ft){return arguments.length?(ne=ce=ft,lt):ce},lt.y0=function(ft){return arguments.length?(ne=ft,lt):ne},lt.y1=function(ft){return arguments.length?(ce=ft,lt):ce},lt.defined=function(ft){return arguments.length?(xe=ft,lt):xe},lt.interpolate=function(ft){return arguments.length?(ze=typeof ft=="function"?Ce=ft:(Ce=Ba.get(ft)||sa).key,Ue=Ce.reverse||Ce,He=Ce.closed?"M":"L",lt):ze},lt.tension=function(ft){return arguments.length?(et=ft,lt):et},lt}function po(L){return L.source}function ps(L){return L.target}function Ja(L){return L.radius}function As(L){return[L.x,L.y]}function Ms(){return 64}function $a(){return"circle"}function di(L){var V=Math.sqrt(L/Pt);return"M0,"+V+"A"+V+","+V+" 0 1,1 0,"+-V+"A"+V+","+V+" 0 1,1 0,"+V+"Z"}o.svg.line.radial=function(){var L=Ka(ga);return L.radius=L.x,delete L.x,L.angle=L.y,delete L.y,L},Na.reverse=Eo,Eo.reverse=Na,o.svg.area=function(){return Wr(D)},o.svg.area.radial=function(){var L=Wr(ga);return L.radius=L.x,delete L.x,L.innerRadius=L.x0,delete L.x0,L.outerRadius=L.x1,delete L.x1,L.angle=L.y,delete L.y,L.startAngle=L.y0,delete L.y0,L.endAngle=L.y1,delete L.y1,L},o.svg.chord=function(){var L=po,V=ps,$=Ja,ne=ws,ce=yr;function xe(He,et){var lt,ft,xt=Ce(this,L,He,et),Mt=Ce(this,V,He,et);return"M"+xt.p0+ze(xt.r,xt.p1,xt.a1-xt.a0)+(ft=Mt,((lt=xt).a0==ft.a0&&lt.a1==ft.a1?Ue(xt.r,xt.p1,xt.r,xt.p0):Ue(xt.r,xt.p1,Mt.r,Mt.p0)+ze(Mt.r,Mt.p1,Mt.a1-Mt.a0)+Ue(Mt.r,Mt.p1,xt.r,xt.p0))+"Z")}function Ce(He,et,lt,ft){var xt=et.call(He,lt,ft),Mt=$.call(He,xt,ft),_t=ne.call(He,xt,ft)-qe,zt=ce.call(He,xt,ft)-qe;return{r:Mt,a0:_t,a1:zt,p0:[Mt*Math.cos(_t),Mt*Math.sin(_t)],p1:[Mt*Math.cos(zt),Mt*Math.sin(zt)]}}function ze(He,et,lt){return"A"+He+","+He+" 0 "+ +(lt>Pt)+",1 "+et}function Ue(He,et,lt,ft){return"Q 0,0 "+ft}return xe.radius=function(He){return arguments.length?($=Rn(He),xe):$},xe.source=function(He){return arguments.length?(L=Rn(He),xe):L},xe.target=function(He){return arguments.length?(V=Rn(He),xe):V},xe.startAngle=function(He){return arguments.length?(ne=Rn(He),xe):ne},xe.endAngle=function(He){return arguments.length?(ce=Rn(He),xe):ce},xe},o.svg.diagonal=function(){var L=po,V=ps,$=As;function ne(ce,xe){var Ce=L.call(this,ce,xe),ze=V.call(this,ce,xe),Ue=(Ce.y+ze.y)/2,He=[Ce,{x:Ce.x,y:Ue},{x:ze.x,y:Ue},ze];return"M"+(He=He.map($))[0]+"C"+He[1]+" "+He[2]+" "+He[3]}return ne.source=function(ce){return arguments.length?(L=Rn(ce),ne):L},ne.target=function(ce){return arguments.length?(V=Rn(ce),ne):V},ne.projection=function(ce){return arguments.length?($=ce,ne):$},ne},o.svg.diagonal.radial=function(){var L=o.svg.diagonal(),V=As,$=L.projection;return L.projection=function(ne){return arguments.length?$(function(ce){return function(){var xe=ce.apply(this,arguments),Ce=xe[0],ze=xe[1]-qe;return[Ce*Math.cos(ze),Ce*Math.sin(ze)]}}(V=ne)):V},L},o.svg.symbol=function(){var L=$a,V=Ms;function $(ne,ce){return(ds.get(L.call(this,ne,ce))||di)(V.call(this,ne,ce))}return $.type=function(ne){return arguments.length?(L=Rn(ne),$):L},$.size=function(ne){return arguments.length?(V=Rn(ne),$):V},$};var ds=o.map({circle:di,cross:function(L){var V=Math.sqrt(L/5)/2;return"M"+-3*V+","+-V+"H"+-V+"V"+-3*V+"H"+V+"V"+-V+"H"+3*V+"V"+V+"H"+V+"V"+3*V+"H"+-V+"V"+V+"H"+-3*V+"Z"},diamond:function(L){var V=Math.sqrt(L/(2*Or)),$=V*Or;return"M0,"+-V+"L"+$+",0 0,"+V+" "+-$+",0Z"},square:function(L){var V=Math.sqrt(L)/2;return"M"+-V+","+-V+"L"+V+","+-V+" "+V+","+V+" "+-V+","+V+"Z"},"triangle-down":function(L){var V=Math.sqrt(L/Sr),$=V*Sr/2;return"M0,"+$+"L"+V+","+-$+" "+-V+","+-$+"Z"},"triangle-up":function(L){var V=Math.sqrt(L/Sr),$=V*Sr/2;return"M0,"+-$+"L"+V+","+$+" "+-V+","+$+"Z"}});o.svg.symbolTypes=ds.keys();var Sr=Math.sqrt(3),Or=Math.tan(30*Ye);ve.transition=function(L){for(var V,$,ne=Oi||++Pl,ce=yi(L),xe=[],Ce=mo||{time:Date.now(),ease:so,delay:0,duration:250},ze=-1,Ue=this.length;++ze<Ue;){xe.push(V=[]);for(var He=this[ze],et=-1,lt=He.length;++et<lt;)($=He[et])&&_a($,et,ce,ne,Ce),V.push($)}return Lo(xe,ce,ne)},ve.interrupt=function(L){return this.each(L==null?Ea:go(yi(L)))};var Ea=go(yi());function go(L){return function(){var V,$,ne;(V=this[L])&&(ne=V[$=V.active])&&(ne.timer.c=null,ne.timer.t=NaN,--V.count?delete V[$]:delete this[L],V.active+=.5,ne.event&&ne.event.interrupt.call(this,this.__data__,ne.index))}}function Lo(L,V,$){return Y(L,ii),L.namespace=V,L.id=$,L}var Oi,mo,ii=[],Pl=0;function La(L,V,$,ne){var ce=L.id,xe=L.namespace;return _e(L,typeof $=="function"?function(Ce,ze,Ue){Ce[xe][ce].tween.set(V,ne($.call(Ce,Ce.__data__,ze,Ue)))}:($=ne($),function(Ce){Ce[xe][ce].tween.set(V,$)}))}function si(L){return L==null&&(L=""),function(){this.textContent=L}}function yi(L){return L==null?"__transition__":"__transition_"+L+"__"}function _a(L,V,$,ne,ce){var xe,Ce,ze,Ue,He,et=L[$]||(L[$]={active:0,count:0}),lt=et[ne];function ft(Mt){var _t=et.active,zt=et[_t];for(var Et in zt&&(zt.timer.c=null,zt.timer.t=NaN,--et.count,delete et[_t],zt.event&&zt.event.interrupt.call(L,L.__data__,zt.index)),et)if(+Et<ne){var Yt=et[Et];Yt.timer.c=null,Yt.timer.t=NaN,--et.count,delete et[Et]}Ce.c=xt,en(function(){return Ce.c&&xt(Mt||1)&&(Ce.c=null,Ce.t=NaN),1},0,xe),et.active=ne,lt.event&&lt.event.start.call(L,L.__data__,V),He=[],lt.tween.forEach(function(Vt,Nt){(Nt=Nt.call(L,L.__data__,V))&&He.push(Nt)}),Ue=lt.ease,ze=lt.duration}function xt(Mt){for(var _t=Mt/ze,zt=Ue(_t),Et=He.length;Et>0;)He[--Et].call(L,zt);if(_t>=1)return lt.event&&lt.event.end.call(L,L.__data__,V),--et.count?delete et[ne]:delete L[$],1}lt||(xe=ce.time,Ce=en(function(Mt){var _t=lt.delay;if(Ce.t=_t+xe,_t<=Mt)return ft(Mt-_t);Ce.c=ft},0,xe),lt=et[ne]={tween:new v,time:xe,timer:Ce,delay:ce.delay,duration:ce.duration,ease:ce.ease,index:V},ce=null,++et.count)}ii.call=ve.call,ii.empty=ve.empty,ii.node=ve.node,ii.size=ve.size,o.transition=function(L,V){return L&&L.transition?Oi?L.transition(V):L:o.selection().transition(L)},o.transition.prototype=ii,ii.select=function(L){var V,$,ne,ce=this.id,xe=this.namespace,Ce=[];L=ye(L);for(var ze=-1,Ue=this.length;++ze<Ue;){Ce.push(V=[]);for(var He=this[ze],et=-1,lt=He.length;++et<lt;)(ne=He[et])&&($=L.call(ne,ne.__data__,et,ze))?("__data__"in ne&&($.__data__=ne.__data__),_a($,et,xe,ce,ne[xe][ce]),V.push($)):V.push(null)}return Lo(Ce,xe,ce)},ii.selectAll=function(L){var V,$,ne,ce,xe,Ce=this.id,ze=this.namespace,Ue=[];L=de(L);for(var He=-1,et=this.length;++He<et;)for(var lt=this[He],ft=-1,xt=lt.length;++ft<xt;)if(ne=lt[ft]){xe=ne[ze][Ce],$=L.call(ne,ne.__data__,ft,He),Ue.push(V=[]);for(var Mt=-1,_t=$.length;++Mt<_t;)(ce=$[Mt])&&_a(ce,Mt,ze,Ce,xe),V.push(ce)}return Lo(Ue,ze,Ce)},ii.filter=function(L){var V,$,ne=[];typeof L!="function"&&(L=Oe(L));for(var ce=0,xe=this.length;ce<xe;ce++){ne.push(V=[]);for(var Ce,ze=0,Ue=(Ce=this[ce]).length;ze<Ue;ze++)($=Ce[ze])&&L.call($,$.__data__,ze,ce)&&V.push($)}return Lo(ne,this.namespace,this.id)},ii.tween=function(L,V){var $=this.id,ne=this.namespace;return arguments.length<2?this.node()[ne][$].tween.get(L):_e(this,V==null?function(ce){ce[ne][$].tween.remove(L)}:function(ce){ce[ne][$].tween.set(L,V)})},ii.attr=function(L,V){if(arguments.length<2){for(V in L)this.attr(V,L[V]);return this}var $=L=="transform"?Sl:Oa,ne=o.ns.qualify(L);function ce(){this.removeAttribute(ne)}function xe(){this.removeAttributeNS(ne.space,ne.local)}return La(this,"attr."+L,V,ne.local?function(Ce){return Ce==null?xe:(Ce+="",function(){var ze,Ue=this.getAttributeNS(ne.space,ne.local);return Ue!==Ce&&(ze=$(Ue,Ce),function(He){this.setAttributeNS(ne.space,ne.local,ze(He))})})}:function(Ce){return Ce==null?ce:(Ce+="",function(){var ze,Ue=this.getAttribute(ne);return Ue!==Ce&&(ze=$(Ue,Ce),function(He){this.setAttribute(ne,ze(He))})})})},ii.attrTween=function(L,V){var $=o.ns.qualify(L);return this.tween("attr."+L,$.local?function(ne,ce){var xe=V.call(this,ne,ce,this.getAttributeNS($.space,$.local));return xe&&function(Ce){this.setAttributeNS($.space,$.local,xe(Ce))}}:function(ne,ce){var xe=V.call(this,ne,ce,this.getAttribute($));return xe&&function(Ce){this.setAttribute($,xe(Ce))}})},ii.style=function(L,V,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(V=""),L)this.style($,L[$],V);return this}$=""}function ce(){this.style.removeProperty(L)}return La(this,"style."+L,V,function(xe){return xe==null?ce:(xe+="",function(){var Ce,ze=t(this).getComputedStyle(this,null).getPropertyValue(L);return ze!==xe&&(Ce=Oa(ze,xe),function(Ue){this.style.setProperty(L,Ce(Ue),$)})})})},ii.styleTween=function(L,V,$){return arguments.length<3&&($=""),this.tween("style."+L,function(ne,ce){var xe=V.call(this,ne,ce,t(this).getComputedStyle(this,null).getPropertyValue(L));return xe&&function(Ce){this.style.setProperty(L,xe(Ce),$)}})},ii.text=function(L){return La(this,"text",L,si)},ii.remove=function(){var L=this.namespace;return this.each("end.transition",function(){var V;this[L].count<2&&(V=this.parentNode)&&V.removeChild(this)})},ii.ease=function(L){var V=this.id,$=this.namespace;return arguments.length<1?this.node()[$][V].ease:(typeof L!="function"&&(L=o.ease.apply(o,arguments)),_e(this,function(ne){ne[$][V].ease=L}))},ii.delay=function(L){var V=this.id,$=this.namespace;return arguments.length<1?this.node()[$][V].delay:_e(this,typeof L=="function"?function(ne,ce,xe){ne[$][V].delay=+L.call(ne,ne.__data__,ce,xe)}:(L=+L,function(ne){ne[$][V].delay=L}))},ii.duration=function(L){var V=this.id,$=this.namespace;return arguments.length<1?this.node()[$][V].duration:_e(this,typeof L=="function"?function(ne,ce,xe){ne[$][V].duration=Math.max(1,L.call(ne,ne.__data__,ce,xe))}:(L=Math.max(1,L),function(ne){ne[$][V].duration=L}))},ii.each=function(L,V){var $=this.id,ne=this.namespace;if(arguments.length<2){var ce=mo,xe=Oi;try{Oi=$,_e(this,function(Ce,ze,Ue){mo=Ce[ne][$],L.call(Ce,Ce.__data__,ze,Ue)})}finally{mo=ce,Oi=xe}}else _e(this,function(Ce){var ze=Ce[ne][$];(ze.event||(ze.event=o.dispatch("start","end","interrupt"))).on(L,V)});return this},ii.transition=function(){for(var L,V,$,ne=this.id,ce=++Pl,xe=this.namespace,Ce=[],ze=0,Ue=this.length;ze<Ue;ze++){Ce.push(L=[]);for(var He,et=0,lt=(He=this[ze]).length;et<lt;et++)(V=He[et])&&_a(V,et,xe,ce,{time:($=V[xe][ne]).time,ease:$.ease,delay:$.delay+$.duration,duration:$.duration}),L.push(V)}return Lo(Ce,xe,ce)},o.svg.axis=function(){var L,V=o.scale.linear(),$=Ko,ne=6,ce=6,xe=3,Ce=[10],ze=null;function Ue(He){He.each(function(){var et,lt=o.select(this),ft=this.__chart__||V,xt=this.__chart__=V.copy(),Mt=ze??(xt.ticks?xt.ticks.apply(xt,Ce):xt.domain()),_t=L??(xt.tickFormat?xt.tickFormat.apply(xt,Ce):D),zt=lt.selectAll(".tick").data(Mt,xt),Et=zt.enter().insert("g",".domain").attr("class","tick").style("opacity",Je),Yt=o.transition(zt.exit()).style("opacity",Je).remove(),Vt=o.transition(zt.order()).style("opacity",1),Nt=Math.max(ne,0)+xe,fn=Bs(xt),gn=lt.selectAll(".domain").data([0]),kn=(gn.enter().append("path").attr("class","domain"),o.transition(gn));Et.append("line"),Et.append("text");var Pn,Nn,nr,cr,qn=Et.select("line"),sr=Vt.select("line"),xr=zt.select("text").text(_t),Er=Et.select("text"),Qn=Vt.select("text"),or=$==="top"||$==="left"?-1:1;if($==="bottom"||$==="top"?(et=Xe,Pn="x",nr="y",Nn="x2",cr="y2",xr.attr("dy",or<0?"0em":".71em").style("text-anchor","middle"),kn.attr("d","M"+fn[0]+","+or*ce+"V0H"+fn[1]+"V"+or*ce)):(et=$e,Pn="y",nr="x",Nn="y2",cr="x2",xr.attr("dy",".32em").style("text-anchor",or<0?"end":"start"),kn.attr("d","M"+or*ce+","+fn[0]+"H0V"+fn[1]+"H"+or*ce)),qn.attr(cr,or*ne),Er.attr(nr,or*Nt),sr.attr(Nn,0).attr(cr,or*ne),Qn.attr(Pn,0).attr(nr,or*Nt),xt.rangeBand){var wr=xt,ur=wr.rangeBand()/2;ft=xt=function(Ar){return wr(Ar)+ur}}else ft.rangeBand?ft=xt:Yt.call(et,xt,ft);Et.call(et,ft,xt),Vt.call(et,xt,xt)})}return Ue.scale=function(He){return arguments.length?(V=He,Ue):V},Ue.orient=function(He){return arguments.length?($=He in ml?He+"":Ko,Ue):$},Ue.ticks=function(){return arguments.length?(Ce=b(arguments),Ue):Ce},Ue.tickValues=function(He){return arguments.length?(ze=He,Ue):ze},Ue.tickFormat=function(He){return arguments.length?(L=He,Ue):L},Ue.tickSize=function(He){var et=arguments.length;return et?(ne=+He,ce=+arguments[et-1],Ue):ne},Ue.innerTickSize=function(He){return arguments.length?(ne=+He,Ue):ne},Ue.outerTickSize=function(He){return arguments.length?(ce=+He,Ue):ce},Ue.tickPadding=function(He){return arguments.length?(xe=+He,Ue):xe},Ue.tickSubdivide=function(){return arguments.length&&Ue},Ue};var Ko="bottom",ml={top:1,right:1,bottom:1,left:1};function Xe(L,V,$){L.attr("transform",function(ne){var ce=V(ne);return"translate("+(isFinite(ce)?ce:$(ne))+",0)"})}function $e(L,V,$){L.attr("transform",function(ne){var ce=V(ne);return"translate(0,"+(isFinite(ce)?ce:$(ne))+")"})}o.svg.brush=function(){var L,V,$=J(et,"brushstart","brush","brushend"),ne=null,ce=null,xe=[0,0],Ce=[0,0],ze=!0,Ue=!0,He=B[0];function et(_t){_t.each(function(){var zt=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Mt).on("touchstart.brush",Mt),Et=zt.selectAll(".background").data([0]);Et.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),zt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Yt=zt.selectAll(".resize").data(He,D);Yt.exit().remove(),Yt.enter().append("g").attr("class",function(gn){return"resize "+gn}).style("cursor",function(gn){return ot[gn]}).append("rect").attr("x",function(gn){return/[ew]$/.test(gn)?-3:null}).attr("y",function(gn){return/^[ns]/.test(gn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Yt.style("display",et.empty()?"none":null);var Vt,Nt=o.transition(zt),fn=o.transition(Et);ne&&(Vt=Bs(ne),fn.attr("x",Vt[0]).attr("width",Vt[1]-Vt[0]),ft(Nt)),ce&&(Vt=Bs(ce),fn.attr("y",Vt[0]).attr("height",Vt[1]-Vt[0]),xt(Nt)),lt(Nt)})}function lt(_t){_t.selectAll(".resize").attr("transform",function(zt){return"translate("+xe[+/e$/.test(zt)]+","+Ce[+/^s/.test(zt)]+")"})}function ft(_t){_t.select(".extent").attr("x",xe[0]),_t.selectAll(".extent,.n>rect,.s>rect").attr("width",xe[1]-xe[0])}function xt(_t){_t.select(".extent").attr("y",Ce[0]),_t.selectAll(".extent,.e>rect,.w>rect").attr("height",Ce[1]-Ce[0])}function Mt(){var _t,zt,Et=this,Yt=o.select(o.event.target),Vt=$.of(Et,arguments),Nt=o.select(Et),fn=Yt.datum(),gn=!/^(n|s)$/.test(fn)&&ne,kn=!/^(e|w)$/.test(fn)&&ce,Pn=Yt.classed("extent"),Nn=dt(Et),nr=o.mouse(Et),cr=o.select(t(Et)).on("keydown.brush",function(){o.event.keyCode==32&&(Pn||(_t=null,nr[0]-=xe[1],nr[1]-=Ce[1],Pn=2),ee())}).on("keyup.brush",function(){o.event.keyCode==32&&Pn==2&&(nr[0]+=xe[1],nr[1]+=Ce[1],Pn=0,ee())});if(o.event.changedTouches?cr.on("touchmove.brush",xr).on("touchend.brush",Qn):cr.on("mousemove.brush",xr).on("mouseup.brush",Qn),Nt.interrupt().selectAll("*").interrupt(),Pn)nr[0]=xe[0]-nr[0],nr[1]=Ce[0]-nr[1];else if(fn){var qn=+/w$/.test(fn),sr=+/^n/.test(fn);zt=[xe[1-qn]-nr[0],Ce[1-sr]-nr[1]],nr[0]=xe[qn],nr[1]=Ce[sr]}else o.event.altKey&&(_t=nr.slice());function xr(){var or=o.mouse(Et),wr=!1;zt&&(or[0]+=zt[0],or[1]+=zt[1]),Pn||(o.event.altKey?(_t||(_t=[(xe[0]+xe[1])/2,(Ce[0]+Ce[1])/2]),nr[0]=xe[+(or[0]<_t[0])],nr[1]=Ce[+(or[1]<_t[1])]):_t=null),gn&&Er(or,ne,0)&&(ft(Nt),wr=!0),kn&&Er(or,ce,1)&&(xt(Nt),wr=!0),wr&&(lt(Nt),Vt({type:"brush",mode:Pn?"move":"resize"}))}function Er(or,wr,ur){var Ar,Pr,Nr=Bs(wr),jr=Nr[0],qr=Nr[1],Yr=nr[ur],gi=ur?Ce:xe,Li=gi[1]-gi[0];if(Pn&&(jr-=Yr,qr-=Li+Yr),Ar=(ur?Ue:ze)?Math.max(jr,Math.min(qr,or[ur])):or[ur],Pn?Pr=(Ar+=Yr)+Li:(_t&&(Yr=Math.max(jr,Math.min(qr,2*_t[ur]-Ar))),Yr<Ar?(Pr=Ar,Ar=Yr):Pr=Yr),gi[0]!=Ar||gi[1]!=Pr)return ur?V=null:L=null,gi[0]=Ar,gi[1]=Pr,!0}function Qn(){xr(),Nt.style("pointer-events","all").selectAll(".resize").style("display",et.empty()?"none":null),o.select("body").style("cursor",null),cr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Nn(),Vt({type:"brushend"})}Nt.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",Yt.style("cursor")),Vt({type:"brushstart"}),xr()}return et.event=function(_t){_t.each(function(){var zt=$.of(this,arguments),Et={x:xe,y:Ce,i:L,j:V},Yt=this.__chart__||Et;this.__chart__=Et,Oi?o.select(this).transition().each("start.brush",function(){L=Yt.i,V=Yt.j,xe=Yt.x,Ce=Yt.y,zt({type:"brushstart"})}).tween("brush:brush",function(){var Vt=Va(xe,Et.x),Nt=Va(Ce,Et.y);return L=V=null,function(fn){xe=Et.x=Vt(fn),Ce=Et.y=Nt(fn),zt({type:"brush",mode:"resize"})}}).each("end.brush",function(){L=Et.i,V=Et.j,zt({type:"brush",mode:"resize"}),zt({type:"brushend"})}):(zt({type:"brushstart"}),zt({type:"brush",mode:"resize"}),zt({type:"brushend"}))})},et.x=function(_t){return arguments.length?(He=B[!(ne=_t)<<1|!ce],et):ne},et.y=function(_t){return arguments.length?(He=B[!ne<<1|!(ce=_t)],et):ce},et.clamp=function(_t){return arguments.length?(ne&&ce?(ze=!!_t[0],Ue=!!_t[1]):ne?ze=!!_t:ce&&(Ue=!!_t),et):ne&&ce?[ze,Ue]:ne?ze:ce?Ue:null},et.extent=function(_t){var zt,Et,Yt,Vt,Nt;return arguments.length?(ne&&(zt=_t[0],Et=_t[1],ce&&(zt=zt[0],Et=Et[0]),L=[zt,Et],ne.invert&&(zt=ne(zt),Et=ne(Et)),Et<zt&&(Nt=zt,zt=Et,Et=Nt),zt==xe[0]&&Et==xe[1]||(xe=[zt,Et])),ce&&(Yt=_t[0],Vt=_t[1],ne&&(Yt=Yt[1],Vt=Vt[1]),V=[Yt,Vt],ce.invert&&(Yt=ce(Yt),Vt=ce(Vt)),Vt<Yt&&(Nt=Yt,Yt=Vt,Vt=Nt),Yt==Ce[0]&&Vt==Ce[1]||(Ce=[Yt,Vt])),et):(ne&&(L?(zt=L[0],Et=L[1]):(zt=xe[0],Et=xe[1],ne.invert&&(zt=ne.invert(zt),Et=ne.invert(Et)),Et<zt&&(Nt=zt,zt=Et,Et=Nt))),ce&&(V?(Yt=V[0],Vt=V[1]):(Yt=Ce[0],Vt=Ce[1],ce.invert&&(Yt=ce.invert(Yt),Vt=ce.invert(Vt)),Vt<Yt&&(Nt=Yt,Yt=Vt,Vt=Nt))),ne&&ce?[[zt,Yt],[Et,Vt]]:ne?[zt,Et]:ce&&[Yt,Vt])},et.clear=function(){return et.empty()||(xe=[0,0],Ce=[0,0],L=V=null),et},et.empty=function(){return!!ne&&xe[0]==xe[1]||!!ce&&Ce[0]==Ce[1]},o.rebind(et,$,"on")};var ot={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},B=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function G(L){return JSON.parse(L.responseText)}function H(L){var V=p.createRange();return V.selectNode(p.body),V.createContextualFragment(L.responseText)}o.text=In(function(L){return L.responseText}),o.json=function(L,V){return Xn(L,"application/json",G,V)},o.html=function(L,V){return Xn(L,"text/html",H,V)},o.xml=In(function(L){return L.responseXML}),(k=typeof(A=o)=="function"?A.call(I,e,I,X):A)===void 0||(X.exports=k)}).apply(self)},3480:function(X){X.exports=function(){"use strict";var I,e,A;function k(o,T){if(I)if(e){var b="var sharedChunk = {}; ("+I+")(sharedChunk); ("+e+")(sharedChunk);",p={};I(p),A=T(p),typeof window<"u"&&(A.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}else e=T;else I=T}return k(0,function(o){function T(M,z){return M(z={exports:{}},z.exports),z.exports}var b="1.13.4",p=s;function s(M,z,Z,le){this.cx=3*M,this.bx=3*(Z-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(le-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=le,this.p2x=Z,this.p2y=le}s.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},s.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},s.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},s.prototype.solveCurveX=function(M,z){var Z,le,Te,Pe,je;for(z===void 0&&(z=1e-6),Te=M,je=0;je<8;je++){if(Pe=this.sampleCurveX(Te)-M,Math.abs(Pe)<z)return Te;var Ke=this.sampleCurveDerivativeX(Te);if(Math.abs(Ke)<1e-6)break;Te-=Pe/Ke}if((Te=M)<(Z=0))return Z;if(Te>(le=1))return le;for(;Z<le;){if(Pe=this.sampleCurveX(Te),Math.abs(Pe-M)<z)return Te;M>Pe?Z=Te:le=Te,Te=.5*(le-Z)+Z}return Te},s.prototype.solve=function(M,z){return this.sampleCurveY(this.solveCurveX(M,z))};var t=i;function i(M,z){this.x=M,this.y=z}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,z){return this.clone()._rotateAround(M,z)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var z=M.x-this.x,Z=M.y-this.y;return z*z+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,z){return Math.atan2(this.x*z-this.y*M,this.x*M+this.y*z)},_matMult:function(M){var z=M[0]*this.x+M[1]*this.y,Z=M[2]*this.x+M[3]*this.y;return this.x=z,this.y=Z,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var z=Math.cos(M),Z=Math.sin(M),le=z*this.x-Z*this.y,Te=Z*this.x+z*this.y;return this.x=le,this.y=Te,this},_rotateAround:function(M,z){var Z=Math.cos(M),le=Math.sin(M),Te=z.x+Z*(this.x-z.x)-le*(this.y-z.y),Pe=z.y+le*(this.x-z.x)+Z*(this.y-z.y);return this.x=Te,this.y=Pe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(M){return M instanceof i?M:Array.isArray(M)?new i(M[0],M[1]):M};var n=typeof self<"u"?self:{},r=Math.pow(2,53)-1;function a(M,z,Z,le){var Te=new p(M,z,Z,le);return function(Pe){return Te.solve(Pe)}}var l=a(.25,.1,.25,1);function c(M,z,Z){return Math.min(Z,Math.max(z,M))}function h(M,z,Z){var le=Z-z,Te=((M-z)%le+le)%le+z;return Te===z?Z:Te}function u(M){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];for(var le=0,Te=z;le<Te.length;le+=1){var Pe=Te[le];for(var je in Pe)M[je]=Pe[je]}return M}var x=1;function d(){return x++}function m(){return function M(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function g(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function y(M,z){M.forEach(function(Z){z[Z]&&(z[Z]=z[Z].bind(z))})}function v(M,z){return M.indexOf(z,M.length-z.length)!==-1}function _(M,z,Z){var le={};for(var Te in M)le[Te]=z.call(Z||this,M[Te],Te,M);return le}function f(M,z,Z){var le={};for(var Te in M)z.call(Z||this,M[Te],Te,M)&&(le[Te]=M[Te]);return le}function S(M){return Array.isArray(M)?M.map(S):typeof M=="object"&&M?_(M,S):M}var w={};function E(M){w[M]||(typeof console<"u"&&console.warn(M),w[M]=!0)}function P(M,z,Z){return(Z.y-M.y)*(z.x-M.x)>(z.y-M.y)*(Z.x-M.x)}function C(M){for(var z=0,Z=0,le=M.length,Te=le-1,Pe=void 0,je=void 0;Z<le;Te=Z++)Pe=M[Z],z+=((je=M[Te]).x-Pe.x)*(Pe.y+je.y);return z}function O(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function R(M){var z={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,Te,Pe,je){var Ke=Pe||je;return z[Te]=!Ke||Ke.toLowerCase(),""}),z["max-age"]){var Z=parseInt(z["max-age"],10);isNaN(Z)?delete z["max-age"]:z["max-age"]=Z}return z}var U=null;function D(M){if(U==null){var z=M.navigator?M.navigator.userAgent:null;U=!!M.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return U}function N(M){try{var z=n[M];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch{return!1}}var W,F,j,q,te=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),ee=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,Q=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,J={now:te,frame:function(M){var z=ee(M);return{cancel:function(){return Q(z)}}},getImageData:function(M,z){z===void 0&&(z=0);var Z=n.document.createElement("canvas"),le=Z.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return Z.width=M.width,Z.height=M.height,le.drawImage(M,0,0,M.width,M.height),le.getImageData(-z,-z,M.width+2*z,M.height+2*z)},resolveURL:function(M){return W||(W=n.document.createElement("a")),W.href=M,W.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(F==null&&(F=n.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}},K={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Y={supported:!1,testSupport:function(M){!ie&&q&&(se?ae(M):j=M)}},ie=!1,se=!1;function ae(M){var z=M.createTexture();M.bindTexture(M.TEXTURE_2D,z);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,q),M.isContextLost())return;Y.supported=!0}catch{}M.deleteTexture(z),ie=!0}n.document&&((q=n.document.createElement("img")).onload=function(){j&&ae(j),j=null,se=!0},q.onerror=function(){ie=!0,j=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ue="01",ve=function(M,z){this._transformRequestFn=M,this._customAccessToken=z,this._createSkuToken()};function ye(M){return M.indexOf("mapbox:")===0}ve.prototype._createSkuToken=function(){var M=function(){for(var z="",Z=0;Z<10;Z++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ue,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ve.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ve.prototype.transformRequest=function(M,z){return this._transformRequestFn&&this._transformRequestFn(M,z)||{url:M}},ve.prototype.normalizeStyleURL=function(M,z){if(!ye(M))return M;var Z=ke(M);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||z)},ve.prototype.normalizeGlyphsURL=function(M,z){if(!ye(M))return M;var Z=ke(M);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||z)},ve.prototype.normalizeSourceURL=function(M,z){if(!ye(M))return M;var Z=ke(M);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||z)},ve.prototype.normalizeSpriteURL=function(M,z,Z,le){var Te=ke(M);return ye(M)?(Te.path="/styles/v1"+Te.path+"/sprite"+z+Z,this._makeAPIURL(Te,this._customAccessToken||le)):(Te.path+=""+z+Z,Ee(Te))},ve.prototype.normalizeTileURL=function(M,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!ye(M))return M;var Z=ke(M),le=J.devicePixelRatio>=2||z===512?"@2x":"",Te=Y.supported?".webp":"$1";Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+Te),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Pe=this._customAccessToken||function(je){for(var Ke=0,st=je;Ke<st.length;Ke+=1){var yt=st[Ke].match(/^access_token=(.*)$/);if(yt)return yt[1]}return null}(Z.params)||K.ACCESS_TOKEN;return K.REQUIRE_ACCESS_TOKEN&&Pe&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Pe)},ve.prototype.canonicalizeTileURL=function(M,z){var Z=ke(M);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return M;var le="mapbox://tiles/";le+=Z.path.replace("/v4/","");var Te=Z.params;return z&&(Te=Te.filter(function(Pe){return!Pe.match(/^access_token=/)})),Te.length&&(le+="?"+Te.join("&")),le},ve.prototype.canonicalizeTileset=function(M,z){for(var Z=!!z&&ye(z),le=[],Te=0,Pe=M.tiles||[];Te<Pe.length;Te+=1){var je=Pe[Te];pe(je)?le.push(this.canonicalizeTileURL(je,Z)):le.push(je)}return le},ve.prototype._makeAPIURL=function(M,z){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=ke(K.API_URL);if(M.protocol=le.protocol,M.authority=le.authority,M.protocol==="http"){var Te=M.params.indexOf("secure");Te>=0&&M.params.splice(Te,1)}if(le.path!=="/"&&(M.path=""+le.path+M.path),!K.REQUIRE_ACCESS_TOKEN)return Ee(M);if(!(z=z||K.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if(z[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return M.params=M.params.filter(function(Pe){return Pe.indexOf("access_token")===-1}),M.params.push("access_token="+z),Ee(M)};var de=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function pe(M){return de.test(M)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ke(M){var z=M.match(ge);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function Ee(M){var z=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+z}var me="mapbox.eventData";function oe(M){if(!M)return null;var z,Z=M.split(".");if(!Z||Z.length!==3)return null;try{return JSON.parse((z=Z[1],decodeURIComponent(n.atob(z).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var re=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};re.prototype.getStorageKey=function(M){var z,Z,le=oe(K.ACCESS_TOKEN);return z=le&&le.u?(Z=le.u,n.btoa(encodeURIComponent(Z).replace(/%([0-9A-F]{2})/g,function(Te,Pe){return String.fromCharCode(+("0x"+Pe))}))):K.ACCESS_TOKEN||"",M?me+"."+M+":"+z:me+":"+z},re.prototype.fetchEventData=function(){var M=N("localStorage"),z=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{var le=n.localStorage.getItem(z);le&&(this.eventData=JSON.parse(le));var Te=n.localStorage.getItem(Z);Te&&(this.anonId=Te)}catch{E("Unable to read from LocalStorage")}},re.prototype.saveEventData=function(){var M=N("localStorage"),z=this.getStorageKey(),Z=this.getStorageKey("uuid");if(M)try{n.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(z,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},re.prototype.processRequests=function(M){},re.prototype.postEvent=function(M,z,Z,le){var Te=this;if(K.EVENTS_URL){var Pe=ke(K.EVENTS_URL);Pe.params.push("access_token="+(le||K.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ue,userId:this.anonId},Ke=z?u(je,z):je,st={url:Ee(Pe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ke])};this.pendingRequest=At(st,function(yt){Te.pendingRequest=null,Z(yt),Te.saveEventData(),Te.processRequests(le)})}},re.prototype.queueRequest=function(M,z){this.queue.push(M),this.processRequests(z)};var fe,Se,be=function(M){function z(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.postMapLoadEvent=function(Z,le,Te,Pe){this.skuToken=Te,(K.EVENTS_URL&&Pe||K.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(je){return ye(je)||pe(je)}))&&this.queueRequest({id:le,timestamp:Date.now()},Pe)},z.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var Te=this.queue.shift(),Pe=Te.id,je=Te.timestamp;Pe&&this.success[Pe]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=m()),this.postEvent(je,{skuToken:this.skuToken},function(Ke){Ke||Pe&&(le.success[Pe]=!0)},Z))}},z}(re),we=function(M){function z(Z){M.call(this,"appUserTurnstile"),this._customAccessToken=Z}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.postTurnstileEvent=function(Z,le){K.EVENTS_URL&&K.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(Te){return ye(Te)||pe(Te)})&&this.queueRequest(Date.now(),le)},z.prototype.processRequests=function(Z){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Te=oe(K.ACCESS_TOKEN),Pe=Te?Te.u:K.ACCESS_TOKEN,je=Pe!==this.eventData.tokenU;g(this.anonId)||(this.anonId=m(),je=!0);var Ke=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),yt=new Date(Ke),bt=(Ke-this.eventData.lastSuccess)/864e5;je=je||bt>=1||bt<-1||st.getDate()!==yt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Ke,{"enabled.telemetry":!1},function(Ot){Ot||(le.eventData.lastSuccess=Ke,le.eventData.tokenU=Pe)},Z)}},z}(re),Me=new we,Ie=Me.postTurnstileEvent.bind(Me),Oe=new be,he=Oe.postMapLoadEvent.bind(Oe),_e="mapbox-tiles",Ae=500,De=50,Le=42e4;function Be(){n.caches&&!fe&&(fe=n.caches.open(_e))}function Ve(M,z,Z){if(Be(),fe){var le={status:z.status,statusText:z.statusText,headers:new n.Headers};z.headers.forEach(function(Pe,je){return le.headers.set(je,Pe)});var Te=R(z.headers.get("Cache-Control")||"");Te["no-store"]||(Te["max-age"]&&le.headers.set("Expires",new Date(Z+1e3*Te["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-Z<Le||function(Pe,je){if(Se===void 0)try{new Response(new ReadableStream),Se=!0}catch{Se=!1}Se?je(Pe.body):Pe.blob().then(je)}(z,function(Pe){var je=new n.Response(Pe,le);Be(),fe&&fe.then(function(Ke){return Ke.put(Ze(M.url),je)}).catch(function(Ke){return E(Ke.message)})}))}}function Ze(M){var z=M.indexOf("?");return z<0?M:M.slice(0,z)}function rt(M,z){if(Be(),!fe)return z(null);var Z=Ze(M.url);fe.then(function(le){le.match(Z).then(function(Te){var Pe=function(je){if(!je)return!1;var Ke=new Date(je.headers.get("Expires")||0),st=R(je.headers.get("Cache-Control")||"");return Ke>Date.now()&&!st["no-cache"]}(Te);le.delete(Z),Pe&&le.put(Z,Te.clone()),z(null,Te,Pe)}).catch(z)}).catch(z)}var it,dt=1/0;function mt(){return it==null&&(it=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),it}var ht={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ht);var Qe=function(M){function z(Z,le,Te){le===401&&pe(Te)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,Z),this.status=le,this.url=Te,this.name=this.constructor.name,this.message=Z}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),Je=O()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href};function wt(M,z){var Z,le=new n.AbortController,Te=new n.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:Je(),signal:le.signal}),Pe=!1,je=!1,Ke=(Z=Te.url).indexOf("sku=")>0&&pe(Z);M.type==="json"&&Te.headers.set("Accept","application/json");var st=function(bt,Ot,Ut){if(!je){if(bt&&bt.message!=="SecurityError"&&E(bt),Ot&&Ut)return yt(Ot);var Bt=Date.now();n.fetch(Te).then(function(nn){if(nn.ok){var on=Ke?nn.clone():null;return yt(nn,on,Bt)}return z(new Qe(nn.statusText,nn.status,M.url))}).catch(function(nn){nn.code!==20&&z(new Error(nn.message))})}},yt=function(bt,Ot,Ut){(M.type==="arrayBuffer"?bt.arrayBuffer():M.type==="json"?bt.json():bt.text()).then(function(Bt){je||(Ot&&Ut&&Ve(Te,Ot,Ut),Pe=!0,z(null,Bt,bt.headers.get("Cache-Control"),bt.headers.get("Expires")))}).catch(function(Bt){je||z(new Error(Bt.message))})};return Ke?rt(Te,st):st(null,null),{cancel:function(){je=!0,Pe||le.abort()}}}var Pt=function(M,z){if(Z=M.url,!(/^file:/.test(Z)||/^file:/.test(Je())&&!/^\w+:/.test(Z))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return wt(M,z);if(O()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,z,void 0,!0)}var Z;return function(le,Te){var Pe=new n.XMLHttpRequest;for(var je in Pe.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Pe.responseType="arraybuffer"),le.headers)Pe.setRequestHeader(je,le.headers[je]);return le.type==="json"&&(Pe.responseType="text",Pe.setRequestHeader("Accept","application/json")),Pe.withCredentials=le.credentials==="include",Pe.onerror=function(){Te(new Error(Pe.statusText))},Pe.onload=function(){if((Pe.status>=200&&Pe.status<300||Pe.status===0)&&Pe.response!==null){var Ke=Pe.response;if(le.type==="json")try{Ke=JSON.parse(Pe.response)}catch(st){return Te(st)}Te(null,Ke,Pe.getResponseHeader("Cache-Control"),Pe.getResponseHeader("Expires"))}else Te(new Qe(Pe.statusText,Pe.status,le.url))},Pe.send(le.body),{cancel:function(){return Pe.abort()}}}(M,z)},It=function(M,z){return Pt(u(M,{type:"arrayBuffer"}),z)},At=function(M,z){return Pt(u(M,{method:"POST"}),z)},qe,Ye,Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";qe=[],Ye=0;var We=function(M,z){if(Y.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ye>=K.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:M,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return qe.push(Z),Z}Ye++;var le=!1,Te=function(){if(!le)for(le=!0,Ye--;qe.length&&Ye<K.MAX_PARALLEL_IMAGE_REQUESTS;){var je=qe.shift(),Ke=je.requestParameters,st=je.callback;je.cancelled||(je.cancel=We(Ke,st).cancel)}},Pe=It(M,function(je,Ke,st,yt){Te(),je?z(je):Ke&&(mt()?function(bt,Ot){var Ut=new n.Blob([new Uint8Array(bt)],{type:"image/png"});n.createImageBitmap(Ut).then(function(Bt){Ot(null,Bt)}).catch(function(Bt){Ot(new Error("Could not load image because of "+Bt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ke,z):function(bt,Ot,Ut,Bt){var nn=new n.Image,on=n.URL;nn.onload=function(){Ot(null,nn),on.revokeObjectURL(nn.src),nn.onload=null,n.requestAnimationFrame(function(){nn.src=Ne})},nn.onerror=function(){return Ot(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var _n=new n.Blob([new Uint8Array(bt)],{type:"image/png"});nn.cacheControl=Ut,nn.expires=Bt,nn.src=bt.byteLength?on.createObjectURL(_n):Ne}(Ke,z,st,yt))});return{cancel:function(){Pe.cancel(),Te()}}};function at(M,z,Z){Z[M]&&Z[M].indexOf(z)!==-1||(Z[M]=Z[M]||[],Z[M].push(z))}function tt(M,z,Z){if(Z&&Z[M]){var le=Z[M].indexOf(z);le!==-1&&Z[M].splice(le,1)}}var Re=function(M,z){z===void 0&&(z={}),u(this,z),this.type=M},Fe=function(M){function z(Z,le){le===void 0&&(le={}),M.call(this,"error",u({error:Z},le))}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(Re),nt=function(){};nt.prototype.on=function(M,z){return this._listeners=this._listeners||{},at(M,z,this._listeners),this},nt.prototype.off=function(M,z){return tt(M,z,this._listeners),tt(M,z,this._oneTimeListeners),this},nt.prototype.once=function(M,z){return this._oneTimeListeners=this._oneTimeListeners||{},at(M,z,this._oneTimeListeners),this},nt.prototype.fire=function(M,z){typeof M=="string"&&(M=new Re(M,z||{}));var Z=M.type;if(this.listens(Z)){M.target=this;for(var le=0,Te=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];le<Te.length;le+=1)Te[le].call(this,M);for(var Pe=0,je=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Pe<je.length;Pe+=1){var Ke=je[Pe];tt(Z,Ke,this._oneTimeListeners),Ke.call(this,M)}var st=this._eventedParent;st&&(u(M,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),st.fire(M))}else M instanceof Fe&&console.error(M.error);return this},nt.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},nt.prototype.setEventedParent=function(M,z){return this._eventedParent=M,this._eventedParentData=z,this};var Ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ut=function(M,z,Z,le){this.message=(M?M+": ":"")+Z,le&&(this.identifier=le),z!=null&&z.__line__&&(this.line=z.__line__)};function pt(M){var z=M.key,Z=M.value;return Z?[new ut(z,Z,"constants have been deprecated as of v8")]:[]}function gt(M){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];for(var le=0,Te=z;le<Te.length;le+=1){var Pe=Te[le];for(var je in Pe)M[je]=Pe[je]}return M}function ct(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function Tt(M){if(Array.isArray(M))return M.map(Tt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var z={};for(var Z in M)z[Z]=Tt(M[Z]);return z}return ct(M)}var vt=function(M){function z(Z,le){M.call(this,le),this.message=le,this.key=Z}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(Error),kt=function(M,z){z===void 0&&(z=[]),this.parent=M,this.bindings={};for(var Z=0,le=z;Z<le.length;Z+=1){var Te=le[Z],Pe=Te[0],je=Te[1];this.bindings[Pe]=je}};kt.prototype.concat=function(M){return new kt(this,M)},kt.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},kt.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Lt={kind:"null"},Ct={kind:"number"},Dt={kind:"string"},Gt={kind:"boolean"},tn={kind:"color"},jt={kind:"object"},Wt={kind:"value"},Ft={kind:"collator"},Ln={kind:"formatted"},bn={kind:"resolvedImage"};function hn(M,z){return{kind:"array",itemType:M,N:z}}function Kt(M){if(M.kind==="array"){var z=Kt(M.itemType);return typeof M.N=="number"?"array<"+z+", "+M.N+">":M.itemType.kind==="value"?"array":"array<"+z+">"}return M.kind}var sn=[Lt,Ct,Dt,Gt,tn,Ln,jt,hn(Wt),bn];function Qt(M,z){if(z.kind==="error")return null;if(M.kind==="array"){if(z.kind==="array"&&(z.N===0&&z.itemType.kind==="value"||!Qt(M.itemType,z.itemType))&&(typeof M.N!="number"||M.N===z.N))return null}else{if(M.kind===z.kind)return null;if(M.kind==="value"){for(var Z=0,le=sn;Z<le.length;Z+=1)if(!Qt(le[Z],z))return null}}return"Expected "+Kt(M)+" but found "+Kt(z)+" instead."}function cn(M,z){return z.some(function(Z){return Z.kind===M.kind})}function vn(M,z){return z.some(function(Z){return Z==="null"?M===null:Z==="array"?Array.isArray(M):Z==="object"?M&&!Array.isArray(M)&&typeof M=="object":Z===typeof M})}var xn=T(function(M,z){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(st){return(st=Math.round(st))<0?0:st>255?255:st}function Te(st){return st<0?0:st>1?1:st}function Pe(st){return st[st.length-1]==="%"?le(parseFloat(st)/100*255):le(parseInt(st))}function je(st){return st[st.length-1]==="%"?Te(parseFloat(st)/100):Te(parseFloat(st))}function Ke(st,yt,bt){return bt<0?bt+=1:bt>1&&(bt-=1),6*bt<1?st+(yt-st)*bt*6:2*bt<1?yt:3*bt<2?st+(yt-st)*(2/3-bt)*6:st}try{z.parseCSSColor=function(st){var yt,bt=st.replace(/ /g,"").toLowerCase();if(bt in Z)return Z[bt].slice();if(bt[0]==="#")return bt.length===4?(yt=parseInt(bt.substr(1),16))>=0&&yt<=4095?[(3840&yt)>>4|(3840&yt)>>8,240&yt|(240&yt)>>4,15&yt|(15&yt)<<4,1]:null:bt.length===7&&(yt=parseInt(bt.substr(1),16))>=0&&yt<=16777215?[(16711680&yt)>>16,(65280&yt)>>8,255&yt,1]:null;var Ot=bt.indexOf("("),Ut=bt.indexOf(")");if(Ot!==-1&&Ut+1===bt.length){var Bt=bt.substr(0,Ot),nn=bt.substr(Ot+1,Ut-(Ot+1)).split(","),on=1;switch(Bt){case"rgba":if(nn.length!==4)return null;on=je(nn.pop());case"rgb":return nn.length!==3?null:[Pe(nn[0]),Pe(nn[1]),Pe(nn[2]),on];case"hsla":if(nn.length!==4)return null;on=je(nn.pop());case"hsl":if(nn.length!==3)return null;var _n=(parseFloat(nn[0])%360+360)%360/360,yn=je(nn[1]),Dn=je(nn[2]),zn=Dn<=.5?Dn*(yn+1):Dn+yn-Dn*yn,Un=2*Dn-zn;return[le(255*Ke(Un,zn,_n+1/3)),le(255*Ke(Un,zn,_n)),le(255*Ke(Un,zn,_n-1/3)),on];default:return null}}return null}}catch{}}),An=xn.parseCSSColor,Sn=function(M,z,Z,le){le===void 0&&(le=1),this.r=M,this.g=z,this.b=Z,this.a=le};Sn.parse=function(M){if(M){if(M instanceof Sn)return M;if(typeof M=="string"){var z=An(M);if(z)return new Sn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},Sn.prototype.toString=function(){var M=this.toArray(),z=M[0],Z=M[1],le=M[2],Te=M[3];return"rgba("+Math.round(z)+","+Math.round(Z)+","+Math.round(le)+","+Te+")"},Sn.prototype.toArray=function(){var M=this,z=M.r,Z=M.g,le=M.b,Te=M.a;return Te===0?[0,0,0,0]:[255*z/Te,255*Z/Te,255*le/Te,Te]},Sn.black=new Sn(0,0,0,1),Sn.white=new Sn(1,1,1,1),Sn.transparent=new Sn(0,0,0,0),Sn.red=new Sn(1,0,0,1);var Tn=function(M,z,Z){this.sensitivity=M?z?"variant":"case":z?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Tn.prototype.compare=function(M,z){return this.collator.compare(M,z)},Tn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Rn=function(M,z,Z,le,Te){this.text=M,this.image=z,this.scale=Z,this.fontStack=le,this.textColor=Te},In=function(M){this.sections=M};In.fromString=function(M){return new In([new Rn(M,null,null,null,null)])},In.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(M){return M.text.length!==0||M.image&&M.image.name.length!==0})},In.factory=function(M){return M instanceof In?M:In.fromString(M)},In.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(M){return M.text}).join("")},In.prototype.serialize=function(){for(var M=["format"],z=0,Z=this.sections;z<Z.length;z+=1){var le=Z[z];if(le.image)M.push(["image",le.image.name]);else{M.push(le.text);var Te={};le.fontStack&&(Te["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(Te["font-scale"]=le.scale),le.textColor&&(Te["text-color"]=["rgba"].concat(le.textColor.toArray())),M.push(Te)}}return M};var Xn=function(M){this.name=M.name,this.available=M.available};function Vn(M,z,Z,le){return typeof M=="number"&&M>=0&&M<=255&&typeof z=="number"&&z>=0&&z<=255&&typeof Z=="number"&&Z>=0&&Z<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[M,z,Z,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[M,z,Z,le]:[M,z,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function er(M){if(M===null||typeof M=="string"||typeof M=="boolean"||typeof M=="number"||M instanceof Sn||M instanceof Tn||M instanceof In||M instanceof Xn)return!0;if(Array.isArray(M)){for(var z=0,Z=M;z<Z.length;z+=1)if(!er(Z[z]))return!1;return!0}if(typeof M=="object"){for(var le in M)if(!er(M[le]))return!1;return!0}return!1}function Wn(M){if(M===null)return Lt;if(typeof M=="string")return Dt;if(typeof M=="boolean")return Gt;if(typeof M=="number")return Ct;if(M instanceof Sn)return tn;if(M instanceof Tn)return Ft;if(M instanceof In)return Ln;if(M instanceof Xn)return bn;if(Array.isArray(M)){for(var z,Z=M.length,le=0,Te=M;le<Te.length;le+=1){var Pe=Wn(Te[le]);if(z){if(z===Pe)continue;z=Wt;break}z=Pe}return hn(z||Wt,Z)}return jt}function fr(M){var z=typeof M;return M===null?"":z==="string"||z==="number"||z==="boolean"?String(M):M instanceof Sn||M instanceof In||M instanceof Xn?M.toString():JSON.stringify(M)}Xn.prototype.toString=function(){return this.name},Xn.fromString=function(M){return M?new Xn({name:M,available:!1}):null},Xn.prototype.serialize=function(){return["image",this.name]};var Jt=function(M,z){this.type=M,this.value=z};Jt.parse=function(M,z){if(M.length!==2)return z.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!er(M[1]))return z.error("invalid value");var Z=M[1],le=Wn(Z),Te=z.expectedType;return le.kind!=="array"||le.N!==0||!Te||Te.kind!=="array"||typeof Te.N=="number"&&Te.N!==0||(le=Te),new Jt(le,Z)},Jt.prototype.evaluate=function(){return this.value},Jt.prototype.eachChild=function(){},Jt.prototype.outputDefined=function(){return!0},Jt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Sn?["rgba"].concat(this.value.toArray()):this.value instanceof In?this.value.serialize():this.value};var en=function(M){this.name="ExpressionEvaluationError",this.message=M};en.prototype.toJSON=function(){return this.message};var Mn={string:Dt,number:Ct,boolean:Gt,object:jt},pn=function(M,z){this.type=M,this.args=z};pn.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var Z,le=1,Te=M[0];if(Te==="array"){var Pe,je;if(M.length>2){var Ke=M[1];if(typeof Ke!="string"||!(Ke in Mn)||Ke==="object")return z.error('The item type argument of "array" must be one of string, number, boolean',1);Pe=Mn[Ke],le++}else Pe=Wt;if(M.length>3){if(M[2]!==null&&(typeof M[2]!="number"||M[2]<0||M[2]!==Math.floor(M[2])))return z.error('The length argument to "array" must be a positive integer literal',2);je=M[2],le++}Z=hn(Pe,je)}else Z=Mn[Te];for(var st=[];le<M.length;le++){var yt=z.parse(M[le],le,Wt);if(!yt)return null;st.push(yt)}return new pn(Z,st)},pn.prototype.evaluate=function(M){for(var z=0;z<this.args.length;z++){var Z=this.args[z].evaluate(M);if(!Qt(this.type,Wn(Z)))return Z;if(z===this.args.length-1)throw new en("Expected value to be of type "+Kt(this.type)+", but found "+Kt(Wn(Z))+" instead.")}return null},pn.prototype.eachChild=function(M){this.args.forEach(M)},pn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},pn.prototype.serialize=function(){var M=this.type,z=[M.kind];if(M.kind==="array"){var Z=M.itemType;if(Z.kind==="string"||Z.kind==="number"||Z.kind==="boolean"){z.push(Z.kind);var le=M.N;(typeof le=="number"||this.args.length>1)&&z.push(le)}}return z.concat(this.args.map(function(Te){return Te.serialize()}))};var Cn=function(M){this.type=Ln,this.sections=M};Cn.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var Z=M[1];if(!Array.isArray(Z)&&typeof Z=="object")return z.error("First argument must be an image or text section.");for(var le=[],Te=!1,Pe=1;Pe<=M.length-1;++Pe){var je=M[Pe];if(Te&&typeof je=="object"&&!Array.isArray(je)){Te=!1;var Ke=null;if(je["font-scale"]&&!(Ke=z.parse(je["font-scale"],1,Ct)))return null;var st=null;if(je["text-font"]&&!(st=z.parse(je["text-font"],1,hn(Dt))))return null;var yt=null;if(je["text-color"]&&!(yt=z.parse(je["text-color"],1,tn)))return null;var bt=le[le.length-1];bt.scale=Ke,bt.font=st,bt.textColor=yt}else{var Ot=z.parse(M[Pe],1,Wt);if(!Ot)return null;var Ut=Ot.type.kind;if(Ut!=="string"&&Ut!=="value"&&Ut!=="null"&&Ut!=="resolvedImage")return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Te=!0,le.push({content:Ot,scale:null,font:null,textColor:null})}}return new Cn(le)},Cn.prototype.evaluate=function(M){return new In(this.sections.map(function(z){var Z=z.content.evaluate(M);return Wn(Z)===bn?new Rn("",Z,null,null,null):new Rn(fr(Z),null,z.scale?z.scale.evaluate(M):null,z.font?z.font.evaluate(M).join(","):null,z.textColor?z.textColor.evaluate(M):null)}))},Cn.prototype.eachChild=function(M){for(var z=0,Z=this.sections;z<Z.length;z+=1){var le=Z[z];M(le.content),le.scale&&M(le.scale),le.font&&M(le.font),le.textColor&&M(le.textColor)}},Cn.prototype.outputDefined=function(){return!1},Cn.prototype.serialize=function(){for(var M=["format"],z=0,Z=this.sections;z<Z.length;z+=1){var le=Z[z];M.push(le.content.serialize());var Te={};le.scale&&(Te["font-scale"]=le.scale.serialize()),le.font&&(Te["text-font"]=le.font.serialize()),le.textColor&&(Te["text-color"]=le.textColor.serialize()),M.push(Te)}return M};var jn=function(M){this.type=bn,this.input=M};jn.parse=function(M,z){if(M.length!==2)return z.error("Expected two arguments.");var Z=z.parse(M[1],1,Dt);return Z?new jn(Z):z.error("No image name provided.")},jn.prototype.evaluate=function(M){var z=this.input.evaluate(M),Z=Xn.fromString(z);return Z&&M.availableImages&&(Z.available=M.availableImages.indexOf(z)>-1),Z},jn.prototype.eachChild=function(M){M(this.input)},jn.prototype.outputDefined=function(){return!1},jn.prototype.serialize=function(){return["image",this.input.serialize()]};var Bn={"to-boolean":Gt,"to-color":tn,"to-number":Ct,"to-string":Dt},Yn=function(M,z){this.type=M,this.args=z};Yn.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var Z=M[0];if((Z==="to-boolean"||Z==="to-string")&&M.length!==2)return z.error("Expected one argument.");for(var le=Bn[Z],Te=[],Pe=1;Pe<M.length;Pe++){var je=z.parse(M[Pe],Pe,Wt);if(!je)return null;Te.push(je)}return new Yn(le,Te)},Yn.prototype.evaluate=function(M){if(this.type.kind==="boolean")return!!this.args[0].evaluate(M);if(this.type.kind==="color"){for(var z,Z,le=0,Te=this.args;le<Te.length;le+=1){if(Z=null,(z=Te[le].evaluate(M))instanceof Sn)return z;if(typeof z=="string"){var Pe=M.parseColor(z);if(Pe)return Pe}else if(Array.isArray(z)&&!(Z=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":Vn(z[0],z[1],z[2],z[3])))return new Sn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new en(Z||"Could not parse color from value '"+(typeof z=="string"?z:String(JSON.stringify(z)))+"'")}if(this.type.kind==="number"){for(var je=null,Ke=0,st=this.args;Ke<st.length;Ke+=1){if((je=st[Ke].evaluate(M))===null)return 0;var yt=Number(je);if(!isNaN(yt))return yt}throw new en("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?In.fromString(fr(this.args[0].evaluate(M))):this.type.kind==="resolvedImage"?Xn.fromString(fr(this.args[0].evaluate(M))):fr(this.args[0].evaluate(M))},Yn.prototype.eachChild=function(M){this.args.forEach(M)},Yn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Yn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Cn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new jn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(z){M.push(z.serialize())}),M};var dr=["Unknown","Point","LineString","Polygon"],Zt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Zt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Zt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?dr[this.feature.type]:this.feature.type:null},Zt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Zt.prototype.canonicalID=function(){return this.canonical},Zt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Zt.prototype.parseColor=function(M){var z=this._parseColorCache[M];return z||(z=this._parseColorCache[M]=Sn.parse(M)),z};var dn=function(M,z,Z,le){this.name=M,this.type=z,this._evaluate=Z,this.args=le};dn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},dn.prototype.eachChild=function(M){this.args.forEach(M)},dn.prototype.outputDefined=function(){return!1},dn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},dn.parse=function(M,z){var Z,le=M[0],Te=dn.definitions[le];if(!Te)return z.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Pe=Array.isArray(Te)?Te[0]:Te.type,je=Array.isArray(Te)?[[Te[1],Te[2]]]:Te.overloads,Ke=je.filter(function(Br){var Cr=Br[0];return!Array.isArray(Cr)||Cr.length===M.length-1}),st=null,yt=0,bt=Ke;yt<bt.length;yt+=1){var Ot=bt[yt],Ut=Ot[0],Bt=Ot[1];st=new gr(z.registry,z.path,null,z.scope);for(var nn=[],on=!1,_n=1;_n<M.length;_n++){var yn=M[_n],Dn=Array.isArray(Ut)?Ut[_n-1]:Ut.type,zn=st.parse(yn,1+nn.length,Dn);if(!zn){on=!0;break}nn.push(zn)}if(!on)if(Array.isArray(Ut)&&Ut.length!==nn.length)st.error("Expected "+Ut.length+" arguments, but found "+nn.length+" instead.");else{for(var Un=0;Un<nn.length;Un++){var Zn=Array.isArray(Ut)?Ut[Un]:Ut.type,rr=nn[Un];st.concat(Un+1).checkSubtype(Zn,rr.type)}if(st.errors.length===0)return new dn(le,Pe,Bt,nn)}}if(Ke.length===1)(Z=z.errors).push.apply(Z,st.errors);else{for(var vr=(Ke.length?Ke:je).map(function(Br){return Cr=Br[0],Array.isArray(Cr)?"("+Cr.map(Kt).join(", ")+")":"("+Kt(Cr.type)+"...)";var Cr}).join(" | "),pr=[],_r=1;_r<M.length;_r++){var Tr=z.parse(M[_r],1+pr.length);if(!Tr)return null;pr.push(Kt(Tr.type))}z.error("Expected arguments of type "+vr+", but found ("+pr.join(", ")+") instead.")}return null},dn.register=function(M,z){for(var Z in dn.definitions=z,z)M[Z]=dn};var St=function(M,z,Z){this.type=Ft,this.locale=Z,this.caseSensitive=M,this.diacriticSensitive=z};St.parse=function(M,z){if(M.length!==2)return z.error("Expected one argument.");var Z=M[1];if(typeof Z!="object"||Array.isArray(Z))return z.error("Collator options argument must be an object.");var le=z.parse(Z["case-sensitive"]!==void 0&&Z["case-sensitive"],1,Gt);if(!le)return null;var Te=z.parse(Z["diacritic-sensitive"]!==void 0&&Z["diacritic-sensitive"],1,Gt);if(!Te)return null;var Pe=null;return Z.locale&&!(Pe=z.parse(Z.locale,1,Dt))?null:new St(le,Te,Pe)},St.prototype.evaluate=function(M){return new Tn(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},St.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},St.prototype.outputDefined=function(){return!1},St.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var Rt=8192;function Xt(M,z){M[0]=Math.min(M[0],z[0]),M[1]=Math.min(M[1],z[1]),M[2]=Math.max(M[2],z[0]),M[3]=Math.max(M[3],z[1])}function ln(M,z){return!(M[0]<=z[0]||M[2]>=z[2]||M[1]<=z[1]||M[3]>=z[3])}function un(M,z){var Z,le=(180+M[0])/360,Te=(Z=M[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Z*Math.PI/360)))/360),Pe=Math.pow(2,z.z);return[Math.round(le*Pe*Rt),Math.round(Te*Pe*Rt)]}function mn(M,z,Z){return z[1]>M[1]!=Z[1]>M[1]&&M[0]<(Z[0]-z[0])*(M[1]-z[1])/(Z[1]-z[1])+z[0]}function rn(M,z){for(var Z=!1,le=0,Te=z.length;le<Te;le++)for(var Pe=z[le],je=0,Ke=Pe.length;je<Ke-1;je++){if(st=M,yt=Pe[je],bt=Pe[je+1],Ot=void 0,Ut=void 0,Bt=void 0,nn=void 0,Ot=st[0]-yt[0],Ut=st[1]-yt[1],Bt=st[0]-bt[0],nn=st[1]-bt[1],Ot*nn-Bt*Ut==0&&Ot*Bt<=0&&Ut*nn<=0)return!1;mn(M,Pe[je],Pe[je+1])&&(Z=!Z)}var st,yt,bt,Ot,Ut,Bt,nn;return Z}function qt(M,z){for(var Z=0;Z<z.length;Z++)if(rn(M,z[Z]))return!0;return!1}function Ht(M,z,Z,le){var Te=M[0]-Z[0],Pe=M[1]-Z[1],je=z[0]-Z[0],Ke=z[1]-Z[1],st=le[0]-Z[0],yt=le[1]-Z[1],bt=Te*yt-st*Pe,Ot=je*yt-st*Ke;return bt>0&&Ot<0||bt<0&&Ot>0}function $t(M,z,Z){for(var le=0,Te=Z;le<Te.length;le+=1)for(var Pe=Te[le],je=0;je<Pe.length-1;++je)if(Ke=M,st=z,yt=Pe[je],bt=Pe[je+1],Ot=void 0,Ut=void 0,Bt=void 0,Bt=[st[0]-Ke[0],st[1]-Ke[1]],Ot=[bt[0]-yt[0],bt[1]-yt[1]],Ut=Bt,Ot[0]*Ut[1]-Ot[1]*Ut[0]!=0&&Ht(Ke,st,yt,bt)&&Ht(yt,bt,Ke,st))return!0;var Ke,st,yt,bt,Ot,Ut,Bt;return!1}function an(M,z){for(var Z=0;Z<M.length;++Z)if(!rn(M[Z],z))return!1;for(var le=0;le<M.length-1;++le)if($t(M[le],M[le+1],z))return!1;return!0}function wn(M,z){for(var Z=0;Z<z.length;Z++)if(an(M,z[Z]))return!0;return!1}function En(M,z,Z){for(var le=[],Te=0;Te<M.length;Te++){for(var Pe=[],je=0;je<M[Te].length;je++){var Ke=un(M[Te][je],Z);Xt(z,Ke),Pe.push(Ke)}le.push(Pe)}return le}function On(M,z,Z){for(var le=[],Te=0;Te<M.length;Te++){var Pe=En(M[Te],z,Z);le.push(Pe)}return le}function Fn(M,z,Z,le){if(M[0]<Z[0]||M[0]>Z[2]){var Te=.5*le,Pe=M[0]-Z[0]>Te?-le:Z[0]-M[0]>Te?le:0;Pe===0&&(Pe=M[0]-Z[2]>Te?-le:Z[2]-M[0]>Te?le:0),M[0]+=Pe}Xt(z,M)}function $n(M,z,Z,le){for(var Te=Math.pow(2,le.z)*Rt,Pe=[le.x*Rt,le.y*Rt],je=[],Ke=0,st=M;Ke<st.length;Ke+=1)for(var yt=0,bt=st[Ke];yt<bt.length;yt+=1){var Ot=bt[yt],Ut=[Ot.x+Pe[0],Ot.y+Pe[1]];Fn(Ut,z,Z,Te),je.push(Ut)}return je}function Hn(M,z,Z,le){for(var Te=Math.pow(2,le.z)*Rt,Pe=[le.x*Rt,le.y*Rt],je=[],Ke=0,st=M;Ke<st.length;Ke+=1){for(var yt=[],bt=0,Ot=st[Ke];bt<Ot.length;bt+=1){var Ut=Ot[bt],Bt=[Ut.x+Pe[0],Ut.y+Pe[1]];Xt(z,Bt),yt.push(Bt)}je.push(yt)}if(z[2]-z[0]<=Te/2){(Dn=z)[0]=Dn[1]=1/0,Dn[2]=Dn[3]=-1/0;for(var nn=0,on=je;nn<on.length;nn+=1)for(var _n=0,yn=on[nn];_n<yn.length;_n+=1)Fn(yn[_n],z,Z,Te)}var Dn;return je}var Kn=function(M,z){this.type=Gt,this.geojson=M,this.geometries=z};function tr(M){if(M instanceof dn&&(M.name==="get"&&M.args.length===1||M.name==="feature-state"||M.name==="has"&&M.args.length===1||M.name==="properties"||M.name==="geometry-type"||M.name==="id"||/^filter-/.test(M.name))||M instanceof Kn)return!1;var z=!0;return M.eachChild(function(Z){z&&!tr(Z)&&(z=!1)}),z}function Jn(M){if(M instanceof dn&&M.name==="feature-state")return!1;var z=!0;return M.eachChild(function(Z){z&&!Jn(Z)&&(z=!1)}),z}function hr(M,z){if(M instanceof dn&&z.indexOf(M.name)>=0)return!1;var Z=!0;return M.eachChild(function(le){Z&&!hr(le,z)&&(Z=!1)}),Z}Kn.parse=function(M,z){if(M.length!==2)return z.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(er(M[1])){var Z=M[1];if(Z.type==="FeatureCollection")for(var le=0;le<Z.features.length;++le){var Te=Z.features[le].geometry.type;if(Te==="Polygon"||Te==="MultiPolygon")return new Kn(Z,Z.features[le].geometry)}else if(Z.type==="Feature"){var Pe=Z.geometry.type;if(Pe==="Polygon"||Pe==="MultiPolygon")return new Kn(Z,Z.geometry)}else if(Z.type==="Polygon"||Z.type==="MultiPolygon")return new Kn(Z,Z)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Kn.prototype.evaluate=function(M){if(M.geometry()!=null&&M.canonicalID()!=null){if(M.geometryType()==="Point")return function(z,Z){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Pe=z.canonicalID();if(Z.type==="Polygon"){var je=En(Z.coordinates,Te,Pe),Ke=$n(z.geometry(),le,Te,Pe);if(!ln(le,Te))return!1;for(var st=0,yt=Ke;st<yt.length;st+=1)if(!rn(yt[st],je))return!1}if(Z.type==="MultiPolygon"){var bt=On(Z.coordinates,Te,Pe),Ot=$n(z.geometry(),le,Te,Pe);if(!ln(le,Te))return!1;for(var Ut=0,Bt=Ot;Ut<Bt.length;Ut+=1)if(!qt(Bt[Ut],bt))return!1}return!0}(M,this.geometries);if(M.geometryType()==="LineString")return function(z,Z){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Pe=z.canonicalID();if(Z.type==="Polygon"){var je=En(Z.coordinates,Te,Pe),Ke=Hn(z.geometry(),le,Te,Pe);if(!ln(le,Te))return!1;for(var st=0,yt=Ke;st<yt.length;st+=1)if(!an(yt[st],je))return!1}if(Z.type==="MultiPolygon"){var bt=On(Z.coordinates,Te,Pe),Ot=Hn(z.geometry(),le,Te,Pe);if(!ln(le,Te))return!1;for(var Ut=0,Bt=Ot;Ut<Bt.length;Ut+=1)if(!wn(Bt[Ut],bt))return!1}return!0}(M,this.geometries)}return!1},Kn.prototype.eachChild=function(){},Kn.prototype.outputDefined=function(){return!0},Kn.prototype.serialize=function(){return["within",this.geojson]};var br=function(M,z){this.type=z.type,this.name=M,this.boundExpression=z};br.parse=function(M,z){if(M.length!==2||typeof M[1]!="string")return z.error("'var' expression requires exactly one string literal argument.");var Z=M[1];return z.scope.has(Z)?new br(Z,z.scope.get(Z)):z.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},br.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},br.prototype.eachChild=function(){},br.prototype.outputDefined=function(){return!1},br.prototype.serialize=function(){return["var",this.name]};var gr=function(M,z,Z,le,Te){z===void 0&&(z=[]),le===void 0&&(le=new kt),Te===void 0&&(Te=[]),this.registry=M,this.path=z,this.key=z.map(function(Pe){return"["+Pe+"]"}).join(""),this.scope=le,this.errors=Te,this.expectedType=Z};function ar(M){if(M instanceof br)return ar(M.boundExpression);if(M instanceof dn&&M.name==="error"||M instanceof St||M instanceof Kn)return!1;var z=M instanceof Yn||M instanceof pn,Z=!0;return M.eachChild(function(le){Z=z?Z&&ar(le):Z&&le instanceof Jt}),!!Z&&tr(M)&&hr(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function mr(M,z){for(var Z,le,Te=M.length-1,Pe=0,je=Te,Ke=0;Pe<=je;)if(Z=M[Ke=Math.floor((Pe+je)/2)],le=M[Ke+1],Z<=z){if(Ke===Te||z<le)return Ke;Pe=Ke+1}else{if(!(Z>z))throw new en("Input is not a number.");je=Ke-1}return 0}gr.prototype.parse=function(M,z,Z,le,Te){return Te===void 0&&(Te={}),z?this.concat(z,Z,le)._parse(M,Te):this._parse(M,Te)},gr.prototype._parse=function(M,z){function Z(yt,bt,Ot){return Ot==="assert"?new pn(bt,[yt]):Ot==="coerce"?new Yn(bt,[yt]):yt}if(M!==null&&typeof M!="string"&&typeof M!="boolean"&&typeof M!="number"||(M=["literal",M]),Array.isArray(M)){if(M.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=M[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Te=this.registry[le];if(Te){var Pe=Te.parse(M,this);if(!Pe)return null;if(this.expectedType){var je=this.expectedType,Ke=Pe.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||Ke.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||Ke.kind!=="value"&&Ke.kind!=="string"){if(this.checkSubtype(je,Ke))return null}else Pe=Z(Pe,je,z.typeAnnotation||"coerce");else Pe=Z(Pe,je,z.typeAnnotation||"assert")}if(!(Pe instanceof Jt)&&Pe.type.kind!=="resolvedImage"&&ar(Pe)){var st=new Zt;try{Pe=new Jt(Pe.type,Pe.evaluate(st))}catch(yt){return this.error(yt.message),null}}return Pe}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return M===void 0?this.error("'undefined' value invalid. Use null instead."):typeof M=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof M+" instead.")},gr.prototype.concat=function(M,z,Z){var le=typeof M=="number"?this.path.concat(M):this.path,Te=Z?this.scope.concat(Z):this.scope;return new gr(this.registry,le,z||null,Te,this.errors)},gr.prototype.error=function(M){for(var z=[],Z=arguments.length-1;Z-- >0;)z[Z]=arguments[Z+1];var le=""+this.key+z.map(function(Te){return"["+Te+"]"}).join("");this.errors.push(new vt(le,M))},gr.prototype.checkSubtype=function(M,z){var Z=Qt(M,z);return Z&&this.error(Z),Z};var Mr=function(M,z,Z){this.type=M,this.input=z,this.labels=[],this.outputs=[];for(var le=0,Te=Z;le<Te.length;le+=1){var Pe=Te[le],je=Pe[0],Ke=Pe[1];this.labels.push(je),this.outputs.push(Ke)}};function Dr(M,z,Z){return M*(1-Z)+z*Z}Mr.parse=function(M,z){if(M.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return z.error("Expected an even number of arguments.");var Z=z.parse(M[1],1,Ct);if(!Z)return null;var le=[],Te=null;z.expectedType&&z.expectedType.kind!=="value"&&(Te=z.expectedType);for(var Pe=1;Pe<M.length;Pe+=2){var je=Pe===1?-1/0:M[Pe],Ke=M[Pe+1],st=Pe,yt=Pe+1;if(typeof je!="number")return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(le.length&&le[le.length-1][0]>=je)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var bt=z.parse(Ke,yt,Te);if(!bt)return null;Te=Te||bt.type,le.push([je,bt])}return new Mr(Te,Z,le)},Mr.prototype.evaluate=function(M){var z=this.labels,Z=this.outputs;if(z.length===1)return Z[0].evaluate(M);var le=this.input.evaluate(M);if(le<=z[0])return Z[0].evaluate(M);var Te=z.length;return le>=z[Te-1]?Z[Te-1].evaluate(M):Z[mr(z,le)].evaluate(M)},Mr.prototype.eachChild=function(M){M(this.input);for(var z=0,Z=this.outputs;z<Z.length;z+=1)M(Z[z])},Mr.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Mr.prototype.serialize=function(){for(var M=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&M.push(this.labels[z]),M.push(this.outputs[z].serialize());return M};var fi=Object.freeze({__proto__:null,number:Dr,color:function(M,z,Z){return new Sn(Dr(M.r,z.r,Z),Dr(M.g,z.g,Z),Dr(M.b,z.b,Z),Dr(M.a,z.a,Z))},array:function(M,z,Z){return M.map(function(le,Te){return Dr(le,z[Te],Z)})}}),hi=.95047,Ri=1,ci=1.08883,Ti=4/29,fa=6/29,zr=3*fa*fa,Ui=fa*fa*fa,Ia=Math.PI/180,Bi=180/Math.PI;function bo(M){return M>Ui?Math.pow(M,.3333333333333333):M/zr+Ti}function Do(M){return M>fa?M*M*M:zr*(M-Ti)}function Qi(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function io(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function ao(M){var z=io(M.r),Z=io(M.g),le=io(M.b),Te=bo((.4124564*z+.3575761*Z+.1804375*le)/hi),Pe=bo((.2126729*z+.7151522*Z+.072175*le)/Ri);return{l:116*Pe-16,a:500*(Te-Pe),b:200*(Pe-bo((.0193339*z+.119192*Z+.9503041*le)/ci)),alpha:M.a}}function zo(M){var z=(M.l+16)/116,Z=isNaN(M.a)?z:z+M.a/500,le=isNaN(M.b)?z:z-M.b/200;return z=Ri*Do(z),Z=hi*Do(Z),le=ci*Do(le),new Sn(Qi(3.2404542*Z-1.5371385*z-.4985314*le),Qi(-.969266*Z+1.8760108*z+.041556*le),Qi(.0556434*Z-.2040259*z+1.0572252*le),M.alpha)}function Oa(M,z,Z){var le=z-M;return M+Z*(le>180||le<-180?le-360*Math.round(le/360):le)}var Va={forward:ao,reverse:zo,interpolate:function(M,z,Z){return{l:Dr(M.l,z.l,Z),a:Dr(M.a,z.a,Z),b:Dr(M.b,z.b,Z),alpha:Dr(M.alpha,z.alpha,Z)}}},Ha={forward:function(M){var z=ao(M),Z=z.l,le=z.a,Te=z.b,Pe=Math.atan2(Te,le)*Bi;return{h:Pe<0?Pe+360:Pe,c:Math.sqrt(le*le+Te*Te),l:Z,alpha:M.a}},reverse:function(M){var z=M.h*Ia,Z=M.c;return zo({l:M.l,a:Math.cos(z)*Z,b:Math.sin(z)*Z,alpha:M.alpha})},interpolate:function(M,z,Z){return{h:Oa(M.h,z.h,Z),c:Dr(M.c,z.c,Z),l:Dr(M.l,z.l,Z),alpha:Dr(M.alpha,z.alpha,Z)}}},oi=Object.freeze({__proto__:null,lab:Va,hcl:Ha}),Vi=function(M,z,Z,le,Te){this.type=M,this.operator=z,this.interpolation=Z,this.input=le,this.labels=[],this.outputs=[];for(var Pe=0,je=Te;Pe<je.length;Pe+=1){var Ke=je[Pe],st=Ke[0],yt=Ke[1];this.labels.push(st),this.outputs.push(yt)}};function _o(M,z,Z,le){var Te=le-Z,Pe=M-Z;return Te===0?0:z===1?Pe/Te:(Math.pow(z,Pe)-1)/(Math.pow(z,Te)-1)}Vi.interpolationFactor=function(M,z,Z,le){var Te=0;if(M.name==="exponential")Te=_o(z,M.base,Z,le);else if(M.name==="linear")Te=_o(z,1,Z,le);else if(M.name==="cubic-bezier"){var Pe=M.controlPoints;Te=new p(Pe[0],Pe[1],Pe[2],Pe[3]).solve(_o(z,1,Z,le))}return Te},Vi.parse=function(M,z){var Z=M[0],le=M[1],Te=M[2],Pe=M.slice(3);if(!Array.isArray(le)||le.length===0)return z.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var je=le[1];if(typeof je!="number")return z.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:je}}else{if(le[0]!=="cubic-bezier")return z.error("Unknown interpolation type "+String(le[0]),1,0);var Ke=le.slice(1);if(Ke.length!==4||Ke.some(function(_n){return typeof _n!="number"||_n<0||_n>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:Ke}}if(M.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(Te=z.parse(Te,2,Ct)))return null;var st=[],yt=null;Z==="interpolate-hcl"||Z==="interpolate-lab"?yt=tn:z.expectedType&&z.expectedType.kind!=="value"&&(yt=z.expectedType);for(var bt=0;bt<Pe.length;bt+=2){var Ot=Pe[bt],Ut=Pe[bt+1],Bt=bt+3,nn=bt+4;if(typeof Ot!="number")return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bt);if(st.length&&st[st.length-1][0]>=Ot)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bt);var on=z.parse(Ut,nn,yt);if(!on)return null;yt=yt||on.type,st.push([Ot,on])}return yt.kind==="number"||yt.kind==="color"||yt.kind==="array"&&yt.itemType.kind==="number"&&typeof yt.N=="number"?new Vi(yt,Z,le,Te,st):z.error("Type "+Kt(yt)+" is not interpolatable.")},Vi.prototype.evaluate=function(M){var z=this.labels,Z=this.outputs;if(z.length===1)return Z[0].evaluate(M);var le=this.input.evaluate(M);if(le<=z[0])return Z[0].evaluate(M);var Te=z.length;if(le>=z[Te-1])return Z[Te-1].evaluate(M);var Pe=mr(z,le),je=z[Pe],Ke=z[Pe+1],st=Vi.interpolationFactor(this.interpolation,le,je,Ke),yt=Z[Pe].evaluate(M),bt=Z[Pe+1].evaluate(M);return this.operator==="interpolate"?fi[this.type.kind.toLowerCase()](yt,bt,st):this.operator==="interpolate-hcl"?Ha.reverse(Ha.interpolate(Ha.forward(yt),Ha.forward(bt),st)):Va.reverse(Va.interpolate(Va.forward(yt),Va.forward(bt),st))},Vi.prototype.eachChild=function(M){M(this.input);for(var z=0,Z=this.outputs;z<Z.length;z+=1)M(Z[z])},Vi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Vi.prototype.serialize=function(){var M;M=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,M,this.input.serialize()],Z=0;Z<this.labels.length;Z++)z.push(this.labels[Z],this.outputs[Z].serialize());return z};var oo=function(M,z){this.type=M,this.args=z};oo.parse=function(M,z){if(M.length<2)return z.error("Expectected at least one argument.");var Z=null,le=z.expectedType;le&&le.kind!=="value"&&(Z=le);for(var Te=[],Pe=0,je=M.slice(1);Pe<je.length;Pe+=1){var Ke=je[Pe],st=z.parse(Ke,1+Te.length,Z,void 0,{typeAnnotation:"omit"});if(!st)return null;Z=Z||st.type,Te.push(st)}var yt=le&&Te.some(function(bt){return Qt(le,bt.type)});return new oo(yt?Wt:Z,Te)},oo.prototype.evaluate=function(M){for(var z,Z=null,le=0,Te=0,Pe=this.args;Te<Pe.length&&(le++,(Z=Pe[Te].evaluate(M))&&Z instanceof Xn&&!Z.available&&(z||(z=Z.name),Z=null,le===this.args.length&&(Z=z)),Z===null);Te+=1);return Z},oo.prototype.eachChild=function(M){this.args.forEach(M)},oo.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},oo.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(z){M.push(z.serialize())}),M};var qa=function(M,z){this.type=z.type,this.bindings=[].concat(M),this.result=z};qa.prototype.evaluate=function(M){return this.result.evaluate(M)},qa.prototype.eachChild=function(M){for(var z=0,Z=this.bindings;z<Z.length;z+=1)M(Z[z][1]);M(this.result)},qa.parse=function(M,z){if(M.length<4)return z.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var Z=[],le=1;le<M.length-1;le+=2){var Te=M[le];if(typeof Te!="string")return z.error("Expected string, but found "+typeof Te+" instead.",le);if(/[^a-zA-Z0-9_]/.test(Te))return z.error("Variable names must contain only alphanumeric characters or '_'.",le);var Pe=z.parse(M[le+1],le+1);if(!Pe)return null;Z.push([Te,Pe])}var je=z.parse(M[M.length-1],M.length-1,z.expectedType,Z);return je?new qa(Z,je):null},qa.prototype.outputDefined=function(){return this.result.outputDefined()},qa.prototype.serialize=function(){for(var M=["let"],z=0,Z=this.bindings;z<Z.length;z+=1){var le=Z[z],Te=le[0],Pe=le[1];M.push(Te,Pe.serialize())}return M.push(this.result.serialize()),M};var Ro=function(M,z,Z){this.type=M,this.index=z,this.input=Z};Ro.parse=function(M,z){if(M.length!==3)return z.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=z.parse(M[1],1,Ct),le=z.parse(M[2],2,hn(z.expectedType||Wt));if(!Z||!le)return null;var Te=le.type;return new Ro(Te.itemType,Z,le)},Ro.prototype.evaluate=function(M){var z=this.index.evaluate(M),Z=this.input.evaluate(M);if(z<0)throw new en("Array index out of bounds: "+z+" < 0.");if(z>=Z.length)throw new en("Array index out of bounds: "+z+" > "+(Z.length-1)+".");if(z!==Math.floor(z))throw new en("Array index must be an integer, but found "+z+" instead.");return Z[z]},Ro.prototype.eachChild=function(M){M(this.index),M(this.input)},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var so=function(M,z){this.type=Gt,this.needle=M,this.haystack=z};so.parse=function(M,z){if(M.length!==3)return z.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Z=z.parse(M[1],1,Wt),le=z.parse(M[2],2,Wt);return Z&&le?cn(Z.type,[Gt,Dt,Ct,Lt,Wt])?new so(Z,le):z.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead"):null},so.prototype.evaluate=function(M){var z=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!Z)return!1;if(!vn(z,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Wn(z))+" instead.");if(!vn(Z,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+Kt(Wn(Z))+" instead.");return Z.indexOf(z)>=0},so.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},so.prototype.outputDefined=function(){return!0},so.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Fo=function(M,z,Z){this.type=Ct,this.needle=M,this.haystack=z,this.fromIndex=Z};Fo.parse=function(M,z){if(M.length<=2||M.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=z.parse(M[1],1,Wt),le=z.parse(M[2],2,Wt);if(!Z||!le)return null;if(!cn(Z.type,[Gt,Dt,Ct,Lt,Wt]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Z.type)+" instead");if(M.length===4){var Te=z.parse(M[3],3,Ct);return Te?new Fo(Z,le,Te):null}return new Fo(Z,le)},Fo.prototype.evaluate=function(M){var z=this.needle.evaluate(M),Z=this.haystack.evaluate(M);if(!vn(z,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Wn(z))+" instead.");if(!vn(Z,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+Kt(Wn(Z))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(M);return Z.indexOf(z,le)}return Z.indexOf(z)},Fo.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var wo=function(M,z,Z,le,Te,Pe){this.inputType=M,this.type=z,this.input=Z,this.cases=le,this.outputs=Te,this.otherwise=Pe};wo.parse=function(M,z){if(M.length<5)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return z.error("Expected an even number of arguments.");var Z,le;z.expectedType&&z.expectedType.kind!=="value"&&(le=z.expectedType);for(var Te={},Pe=[],je=2;je<M.length-1;je+=2){var Ke=M[je],st=M[je+1];Array.isArray(Ke)||(Ke=[Ke]);var yt=z.concat(je);if(Ke.length===0)return yt.error("Expected at least one branch label.");for(var bt=0,Ot=Ke;bt<Ot.length;bt+=1){var Ut=Ot[bt];if(typeof Ut!="number"&&typeof Ut!="string")return yt.error("Branch labels must be numbers or strings.");if(typeof Ut=="number"&&Math.abs(Ut)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ut=="number"&&Math.floor(Ut)!==Ut)return yt.error("Numeric branch labels must be integer values.");if(Z){if(yt.checkSubtype(Z,Wn(Ut)))return null}else Z=Wn(Ut);if(Te[String(Ut)]!==void 0)return yt.error("Branch labels must be unique.");Te[String(Ut)]=Pe.length}var Bt=z.parse(st,je,le);if(!Bt)return null;le=le||Bt.type,Pe.push(Bt)}var nn=z.parse(M[1],1,Wt);if(!nn)return null;var on=z.parse(M[M.length-1],M.length-1,le);return on?nn.type.kind!=="value"&&z.concat(1).checkSubtype(Z,nn.type)?null:new wo(Z,le,nn,Te,Pe,on):null},wo.prototype.evaluate=function(M){var z=this.input.evaluate(M);return(Wn(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(M)},wo.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},wo.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},wo.prototype.serialize=function(){for(var M=this,z=["match",this.input.serialize()],Z=[],le={},Te=0,Pe=Object.keys(this.cases).sort();Te<Pe.length;Te+=1){var je=Pe[Te];(Ot=le[this.cases[je]])===void 0?(le[this.cases[je]]=Z.length,Z.push([this.cases[je],[je]])):Z[Ot][1].push(je)}for(var Ke=function(Bt){return M.inputType.kind==="number"?Number(Bt):Bt},st=0,yt=Z;st<yt.length;st+=1){var bt=yt[st],Ot=bt[0],Ut=bt[1];Ut.length===1?z.push(Ke(Ut[0])):z.push(Ut.map(Ke)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var Bo=function(M,z,Z){this.type=M,this.branches=z,this.otherwise=Z};Bo.parse=function(M,z){if(M.length<4)return z.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return z.error("Expected an odd number of arguments.");var Z;z.expectedType&&z.expectedType.kind!=="value"&&(Z=z.expectedType);for(var le=[],Te=1;Te<M.length-1;Te+=2){var Pe=z.parse(M[Te],Te,Gt);if(!Pe)return null;var je=z.parse(M[Te+1],Te+1,Z);if(!je)return null;le.push([Pe,je]),Z=Z||je.type}var Ke=z.parse(M[M.length-1],M.length-1,Z);return Ke?new Bo(Z,le,Ke):null},Bo.prototype.evaluate=function(M){for(var z=0,Z=this.branches;z<Z.length;z+=1){var le=Z[z],Te=le[0],Pe=le[1];if(Te.evaluate(M))return Pe.evaluate(M)}return this.otherwise.evaluate(M)},Bo.prototype.eachChild=function(M){for(var z=0,Z=this.branches;z<Z.length;z+=1){var le=Z[z],Te=le[0],Pe=le[1];M(Te),M(Pe)}M(this.otherwise)},Bo.prototype.outputDefined=function(){return this.branches.every(function(M){return M[0],M[1].outputDefined()})&&this.otherwise.outputDefined()},Bo.prototype.serialize=function(){var M=["case"];return this.eachChild(function(z){M.push(z.serialize())}),M};var lo=function(M,z,Z,le){this.type=M,this.input=z,this.beginIndex=Z,this.endIndex=le};function hl(M,z){return M==="=="||M==="!="?z.kind==="boolean"||z.kind==="string"||z.kind==="number"||z.kind==="null"||z.kind==="value":z.kind==="string"||z.kind==="number"||z.kind==="value"}function $s(M,z,Z,le){return le.compare(z,Z)===0}function ts(M,z,Z){var le=M!=="=="&&M!=="!=";return function(){function Te(Pe,je,Ke){this.type=Gt,this.lhs=Pe,this.rhs=je,this.collator=Ke,this.hasUntypedArgument=Pe.type.kind==="value"||je.type.kind==="value"}return Te.parse=function(Pe,je){if(Pe.length!==3&&Pe.length!==4)return je.error("Expected two or three arguments.");var Ke=Pe[0],st=je.parse(Pe[1],1,Wt);if(!st)return null;if(!hl(Ke,st.type))return je.concat(1).error('"'+Ke+`" comparisons are not supported for type '`+Kt(st.type)+"'.");var yt=je.parse(Pe[2],2,Wt);if(!yt)return null;if(!hl(Ke,yt.type))return je.concat(2).error('"'+Ke+`" comparisons are not supported for type '`+Kt(yt.type)+"'.");if(st.type.kind!==yt.type.kind&&st.type.kind!=="value"&&yt.type.kind!=="value")return je.error("Cannot compare types '"+Kt(st.type)+"' and '"+Kt(yt.type)+"'.");le&&(st.type.kind==="value"&&yt.type.kind!=="value"?st=new pn(yt.type,[st]):st.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new pn(st.type,[yt])));var bt=null;if(Pe.length===4){if(st.type.kind!=="string"&&yt.type.kind!=="string"&&st.type.kind!=="value"&&yt.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(bt=je.parse(Pe[3],3,Ft)))return null}return new Te(st,yt,bt)},Te.prototype.evaluate=function(Pe){var je=this.lhs.evaluate(Pe),Ke=this.rhs.evaluate(Pe);if(le&&this.hasUntypedArgument){var st=Wn(je),yt=Wn(Ke);if(st.kind!==yt.kind||st.kind!=="string"&&st.kind!=="number")throw new en('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+st.kind+", "+yt.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var bt=Wn(je),Ot=Wn(Ke);if(bt.kind!=="string"||Ot.kind!=="string")return z(Pe,je,Ke)}return this.collator?Z(Pe,je,Ke,this.collator.evaluate(Pe)):z(Pe,je,Ke)},Te.prototype.eachChild=function(Pe){Pe(this.lhs),Pe(this.rhs),this.collator&&Pe(this.collator)},Te.prototype.outputDefined=function(){return!0},Te.prototype.serialize=function(){var Pe=[M];return this.eachChild(function(je){Pe.push(je.serialize())}),Pe},Te}()}lo.parse=function(M,z){if(M.length<=2||M.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Z=z.parse(M[1],1,Wt),le=z.parse(M[2],2,Ct);if(!Z||!le)return null;if(!cn(Z.type,[hn(Wt),Dt,Wt]))return z.error("Expected first argument to be of type array or string, but found "+Kt(Z.type)+" instead");if(M.length===4){var Te=z.parse(M[3],3,Ct);return Te?new lo(Z.type,Z,le,Te):null}return new lo(Z.type,Z,le)},lo.prototype.evaluate=function(M){var z=this.input.evaluate(M),Z=this.beginIndex.evaluate(M);if(!vn(z,["string","array"]))throw new en("Expected first argument to be of type array or string, but found "+Kt(Wn(z))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(M);return z.slice(Z,le)}return z.slice(Z)},lo.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},lo.prototype.outputDefined=function(){return!1},lo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Al=ts("==",function(M,z,Z){return z===Z},$s),Ml=ts("!=",function(M,z,Z){return z!==Z},function(M,z,Z,le){return!$s(0,z,Z,le)}),ns=ts("<",function(M,z,Z){return z<Z},function(M,z,Z,le){return le.compare(z,Z)<0}),Sl=ts(">",function(M,z,Z){return z>Z},function(M,z,Z,le){return le.compare(z,Z)>0}),jl=ts("<=",function(M,z,Z){return z<=Z},function(M,z,Z,le){return le.compare(z,Z)<=0}),Ul=ts(">=",function(M,z,Z){return z>=Z},function(M,z,Z,le){return le.compare(z,Z)>=0}),rs=function(M,z,Z,le,Te){this.type=Dt,this.number=M,this.locale=z,this.currency=Z,this.minFractionDigits=le,this.maxFractionDigits=Te};rs.parse=function(M,z){if(M.length!==3)return z.error("Expected two arguments.");var Z=z.parse(M[1],1,Ct);if(!Z)return null;var le=M[2];if(typeof le!="object"||Array.isArray(le))return z.error("NumberFormat options argument must be an object.");var Te=null;if(le.locale&&!(Te=z.parse(le.locale,1,Dt)))return null;var Pe=null;if(le.currency&&!(Pe=z.parse(le.currency,1,Dt)))return null;var je=null;if(le["min-fraction-digits"]&&!(je=z.parse(le["min-fraction-digits"],1,Ct)))return null;var Ke=null;return le["max-fraction-digits"]&&!(Ke=z.parse(le["max-fraction-digits"],1,Ct))?null:new rs(Z,Te,Pe,je,Ke)},rs.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},rs.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},rs.prototype.outputDefined=function(){return!1},rs.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var co=function(M){this.type=Ct,this.input=M};co.parse=function(M,z){if(M.length!==2)return z.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var Z=z.parse(M[1],1);return Z?Z.type.kind!=="array"&&Z.type.kind!=="string"&&Z.type.kind!=="value"?z.error("Expected argument of type string or array, but found "+Kt(Z.type)+" instead."):new co(Z):null},co.prototype.evaluate=function(M){var z=this.input.evaluate(M);if(typeof z=="string"||Array.isArray(z))return z.length;throw new en("Expected value to be of type string or array, but found "+Kt(Wn(z))+" instead.")},co.prototype.eachChild=function(M){M(this.input)},co.prototype.outputDefined=function(){return!1},co.prototype.serialize=function(){var M=["length"];return this.eachChild(function(z){M.push(z.serialize())}),M};var gs={"==":Al,"!=":Ml,">":Sl,"<":ns,">=":Ul,"<=":jl,array:pn,at:Ro,boolean:pn,case:Bo,coalesce:oo,collator:St,format:Cn,image:jn,in:so,"index-of":Fo,interpolate:Vi,"interpolate-hcl":Vi,"interpolate-lab":Vi,length:co,let:qa,literal:Jt,match:wo,number:pn,"number-format":rs,object:pn,slice:lo,step:Mr,string:pn,"to-boolean":Yn,"to-color":Yn,"to-number":Yn,"to-string":Yn,var:br,within:Kn};function is(M,z){var Z=z[0],le=z[1],Te=z[2],Pe=z[3];Z=Z.evaluate(M),le=le.evaluate(M),Te=Te.evaluate(M);var je=Pe?Pe.evaluate(M):1,Ke=Vn(Z,le,Te,je);if(Ke)throw new en(Ke);return new Sn(Z/255*je,le/255*je,Te/255*je,je)}function Os(M,z){return M in z}function as(M,z){var Z=z[M];return Z===void 0?null:Z}function Ga(M){return{type:M}}function pl(M){return{result:"success",value:M}}function No(M){return{result:"error",value:M}}function To(M){return M["property-type"]==="data-driven"||M["property-type"]==="cross-faded-data-driven"}function ko(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function jo(M){return!!M.expression&&M.expression.interpolated}function Gr(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":M===null?"null":typeof M}function ms(M){return typeof M=="object"&&M!==null&&!Array.isArray(M)}function Vl(M){return M}function Qs(M,z){var Z,le,Te,Pe=z.type==="color",je=M.stops&&typeof M.stops[0][0]=="object",Ke=je||M.property!==void 0,st=je||!Ke,yt=M.type||(jo(z)?"exponential":"interval");if(Pe&&((M=gt({},M)).stops&&(M.stops=M.stops.map(function(pr){return[pr[0],Sn.parse(pr[1])]})),M.default?M.default=Sn.parse(M.default):M.default=Sn.parse(z.default)),M.colorSpace&&M.colorSpace!=="rgb"&&!oi[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if(yt==="exponential")Z=el;else if(yt==="interval")Z=Hl;else if(yt==="categorical"){Z=El,le=Object.create(null);for(var bt=0,Ot=M.stops;bt<Ot.length;bt+=1){var Ut=Ot[bt];le[Ut[0]]=Ut[1]}Te=typeof M.stops[0][0]}else{if(yt!=="identity")throw new Error('Unknown function type "'+yt+'"');Z=ql}if(je){for(var Bt={},nn=[],on=0;on<M.stops.length;on++){var _n=M.stops[on],yn=_n[0].zoom;Bt[yn]===void 0&&(Bt[yn]={zoom:yn,type:M.type,property:M.property,default:M.default,stops:[]},nn.push(yn)),Bt[yn].stops.push([_n[0].value,_n[1]])}for(var Dn=[],zn=0,Un=nn;zn<Un.length;zn+=1){var Zn=Un[zn];Dn.push([Bt[Zn].zoom,Qs(Bt[Zn],z)])}var rr={name:"linear"};return{kind:"composite",interpolationType:rr,interpolationFactor:Vi.interpolationFactor.bind(void 0,rr),zoomStops:Dn.map(function(pr){return pr[0]}),evaluate:function(pr,_r){var Tr=pr.zoom;return el({stops:Dn,base:M.base},z,Tr).evaluate(Tr,_r)}}}if(st){var vr=yt==="exponential"?{name:"exponential",base:M.base!==void 0?M.base:1}:null;return{kind:"camera",interpolationType:vr,interpolationFactor:Vi.interpolationFactor.bind(void 0,vr),zoomStops:M.stops.map(function(pr){return pr[0]}),evaluate:function(pr){var _r=pr.zoom;return Z(M,z,_r,le,Te)}}}return{kind:"source",evaluate:function(pr,_r){var Tr=_r&&_r.properties?_r.properties[M.property]:void 0;return Tr===void 0?vs(M.default,z.default):Z(M,z,Tr,le,Te)}}}function vs(M,z,Z){return M!==void 0?M:z!==void 0?z:Z!==void 0?Z:void 0}function El(M,z,Z,le,Te){return vs(typeof Z===Te?le[Z]:void 0,M.default,z.default)}function Hl(M,z,Z){if(Gr(Z)!=="number")return vs(M.default,z.default);var le=M.stops.length;if(le===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[le-1][0])return M.stops[le-1][1];var Te=mr(M.stops.map(function(Pe){return Pe[0]}),Z);return M.stops[Te][1]}function el(M,z,Z){var le=M.base!==void 0?M.base:1;if(Gr(Z)!=="number")return vs(M.default,z.default);var Te=M.stops.length;if(Te===1||Z<=M.stops[0][0])return M.stops[0][1];if(Z>=M.stops[Te-1][0])return M.stops[Te-1][1];var Pe=mr(M.stops.map(function(Ot){return Ot[0]}),Z),je=function(Ot,Ut,Bt,nn){var on=nn-Bt,_n=Ot-Bt;return on===0?0:Ut===1?_n/on:(Math.pow(Ut,_n)-1)/(Math.pow(Ut,on)-1)}(Z,le,M.stops[Pe][0],M.stops[Pe+1][0]),Ke=M.stops[Pe][1],st=M.stops[Pe+1][1],yt=fi[z.type]||Vl;if(M.colorSpace&&M.colorSpace!=="rgb"){var bt=oi[M.colorSpace];yt=function(Ot,Ut){return bt.reverse(bt.interpolate(bt.forward(Ot),bt.forward(Ut),je))}}return typeof Ke.evaluate=="function"?{evaluate:function(){for(var Ot=[],Ut=arguments.length;Ut--;)Ot[Ut]=arguments[Ut];var Bt=Ke.evaluate.apply(void 0,Ot),nn=st.evaluate.apply(void 0,Ot);if(Bt!==void 0&&nn!==void 0)return yt(Bt,nn,je)}}:yt(Ke,st,je)}function ql(M,z,Z){return z.type==="color"?Z=Sn.parse(Z):z.type==="formatted"?Z=In.fromString(Z.toString()):z.type==="resolvedImage"?Z=Xn.fromString(Z.toString()):Gr(Z)===z.type||z.type==="enum"&&z.values[Z]||(Z=void 0),vs(Z,M.default,z.default)}dn.register(gs,{error:[{kind:"error"},[Dt],function(M,z){var Z=z[0];throw new en(Z.evaluate(M))}],typeof:[Dt,[Wt],function(M,z){return Kt(Wn(z[0].evaluate(M)))}],"to-rgba":[hn(Ct,4),[tn],function(M,z){return z[0].evaluate(M).toArray()}],rgb:[tn,[Ct,Ct,Ct],is],rgba:[tn,[Ct,Ct,Ct,Ct],is],has:{type:Gt,overloads:[[[Dt],function(M,z){return Os(z[0].evaluate(M),M.properties())}],[[Dt,jt],function(M,z){var Z=z[0],le=z[1];return Os(Z.evaluate(M),le.evaluate(M))}]]},get:{type:Wt,overloads:[[[Dt],function(M,z){return as(z[0].evaluate(M),M.properties())}],[[Dt,jt],function(M,z){var Z=z[0],le=z[1];return as(Z.evaluate(M),le.evaluate(M))}]]},"feature-state":[Wt,[Dt],function(M,z){return as(z[0].evaluate(M),M.featureState||{})}],properties:[jt,[],function(M){return M.properties()}],"geometry-type":[Dt,[],function(M){return M.geometryType()}],id:[Wt,[],function(M){return M.id()}],zoom:[Ct,[],function(M){return M.globals.zoom}],"heatmap-density":[Ct,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[Ct,[],function(M){return M.globals.lineProgress||0}],accumulated:[Wt,[],function(M){return M.globals.accumulated===void 0?null:M.globals.accumulated}],"+":[Ct,Ga(Ct),function(M,z){for(var Z=0,le=0,Te=z;le<Te.length;le+=1)Z+=Te[le].evaluate(M);return Z}],"*":[Ct,Ga(Ct),function(M,z){for(var Z=1,le=0,Te=z;le<Te.length;le+=1)Z*=Te[le].evaluate(M);return Z}],"-":{type:Ct,overloads:[[[Ct,Ct],function(M,z){var Z=z[0],le=z[1];return Z.evaluate(M)-le.evaluate(M)}],[[Ct],function(M,z){return-z[0].evaluate(M)}]]},"/":[Ct,[Ct,Ct],function(M,z){var Z=z[0],le=z[1];return Z.evaluate(M)/le.evaluate(M)}],"%":[Ct,[Ct,Ct],function(M,z){var Z=z[0],le=z[1];return Z.evaluate(M)%le.evaluate(M)}],ln2:[Ct,[],function(){return Math.LN2}],pi:[Ct,[],function(){return Math.PI}],e:[Ct,[],function(){return Math.E}],"^":[Ct,[Ct,Ct],function(M,z){var Z=z[0],le=z[1];return Math.pow(Z.evaluate(M),le.evaluate(M))}],sqrt:[Ct,[Ct],function(M,z){var Z=z[0];return Math.sqrt(Z.evaluate(M))}],log10:[Ct,[Ct],function(M,z){var Z=z[0];return Math.log(Z.evaluate(M))/Math.LN10}],ln:[Ct,[Ct],function(M,z){var Z=z[0];return Math.log(Z.evaluate(M))}],log2:[Ct,[Ct],function(M,z){var Z=z[0];return Math.log(Z.evaluate(M))/Math.LN2}],sin:[Ct,[Ct],function(M,z){var Z=z[0];return Math.sin(Z.evaluate(M))}],cos:[Ct,[Ct],function(M,z){var Z=z[0];return Math.cos(Z.evaluate(M))}],tan:[Ct,[Ct],function(M,z){var Z=z[0];return Math.tan(Z.evaluate(M))}],asin:[Ct,[Ct],function(M,z){var Z=z[0];return Math.asin(Z.evaluate(M))}],acos:[Ct,[Ct],function(M,z){var Z=z[0];return Math.acos(Z.evaluate(M))}],atan:[Ct,[Ct],function(M,z){var Z=z[0];return Math.atan(Z.evaluate(M))}],min:[Ct,Ga(Ct),function(M,z){return Math.min.apply(Math,z.map(function(Z){return Z.evaluate(M)}))}],max:[Ct,Ga(Ct),function(M,z){return Math.max.apply(Math,z.map(function(Z){return Z.evaluate(M)}))}],abs:[Ct,[Ct],function(M,z){var Z=z[0];return Math.abs(Z.evaluate(M))}],round:[Ct,[Ct],function(M,z){var Z=z[0].evaluate(M);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[Ct,[Ct],function(M,z){var Z=z[0];return Math.floor(Z.evaluate(M))}],ceil:[Ct,[Ct],function(M,z){var Z=z[0];return Math.ceil(Z.evaluate(M))}],"filter-==":[Gt,[Dt,Wt],function(M,z){var Z=z[0],le=z[1];return M.properties()[Z.value]===le.value}],"filter-id-==":[Gt,[Wt],function(M,z){var Z=z[0];return M.id()===Z.value}],"filter-type-==":[Gt,[Dt],function(M,z){var Z=z[0];return M.geometryType()===Z.value}],"filter-<":[Gt,[Dt,Wt],function(M,z){var Z=z[0],le=z[1],Te=M.properties()[Z.value],Pe=le.value;return typeof Te==typeof Pe&&Te<Pe}],"filter-id-<":[Gt,[Wt],function(M,z){var Z=z[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le<Te}],"filter->":[Gt,[Dt,Wt],function(M,z){var Z=z[0],le=z[1],Te=M.properties()[Z.value],Pe=le.value;return typeof Te==typeof Pe&&Te>Pe}],"filter-id->":[Gt,[Wt],function(M,z){var Z=z[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le>Te}],"filter-<=":[Gt,[Dt,Wt],function(M,z){var Z=z[0],le=z[1],Te=M.properties()[Z.value],Pe=le.value;return typeof Te==typeof Pe&&Te<=Pe}],"filter-id-<=":[Gt,[Wt],function(M,z){var Z=z[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le<=Te}],"filter->=":[Gt,[Dt,Wt],function(M,z){var Z=z[0],le=z[1],Te=M.properties()[Z.value],Pe=le.value;return typeof Te==typeof Pe&&Te>=Pe}],"filter-id->=":[Gt,[Wt],function(M,z){var Z=z[0],le=M.id(),Te=Z.value;return typeof le==typeof Te&&le>=Te}],"filter-has":[Gt,[Wt],function(M,z){return z[0].value in M.properties()}],"filter-has-id":[Gt,[],function(M){return M.id()!==null&&M.id()!==void 0}],"filter-type-in":[Gt,[hn(Dt)],function(M,z){return z[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Gt,[hn(Wt)],function(M,z){return z[0].value.indexOf(M.id())>=0}],"filter-in-small":[Gt,[Dt,hn(Wt)],function(M,z){var Z=z[0];return z[1].value.indexOf(M.properties()[Z.value])>=0}],"filter-in-large":[Gt,[Dt,hn(Wt)],function(M,z){var Z=z[0],le=z[1];return function(Te,Pe,je,Ke){for(;je<=Ke;){var st=je+Ke>>1;if(Pe[st]===Te)return!0;Pe[st]>Te?Ke=st-1:je=st+1}return!1}(M.properties()[Z.value],le.value,0,le.value.length-1)}],all:{type:Gt,overloads:[[[Gt,Gt],function(M,z){var Z=z[0],le=z[1];return Z.evaluate(M)&&le.evaluate(M)}],[Ga(Gt),function(M,z){for(var Z=0,le=z;Z<le.length;Z+=1)if(!le[Z].evaluate(M))return!1;return!0}]]},any:{type:Gt,overloads:[[[Gt,Gt],function(M,z){var Z=z[0],le=z[1];return Z.evaluate(M)||le.evaluate(M)}],[Ga(Gt),function(M,z){for(var Z=0,le=z;Z<le.length;Z+=1)if(le[Z].evaluate(M))return!0;return!1}]]},"!":[Gt,[Gt],function(M,z){return!z[0].evaluate(M)}],"is-supported-script":[Gt,[Dt],function(M,z){var Z=z[0],le=M.globals&&M.globals.isSupportedScript;return!le||le(Z.evaluate(M))}],upcase:[Dt,[Dt],function(M,z){return z[0].evaluate(M).toUpperCase()}],downcase:[Dt,[Dt],function(M,z){return z[0].evaluate(M).toLowerCase()}],concat:[Dt,Ga(Wt),function(M,z){return z.map(function(Z){return fr(Z.evaluate(M))}).join("")}],"resolved-locale":[Dt,[Ft],function(M,z){return z[0].evaluate(M).resolvedLocale()}]});var Uo=function(M,z){this.expression=M,this._warningHistory={},this._evaluator=new Zt,this._defaultValue=z?function(Z){return Z.type==="color"&&ms(Z.default)?new Sn(0,0,0,0):Z.type==="color"?Sn.parse(Z.default)||null:Z.default===void 0?null:Z.default}(z):null,this._enumValues=z&&z.type==="enum"?z.values:null};function os(M){return Array.isArray(M)&&M.length>0&&typeof M[0]=="string"&&M[0]in gs}function Ao(M,z){var Z=new gr(gs,[],z?function(Te){var Pe={color:tn,string:Dt,number:Ct,enum:Dt,boolean:Gt,formatted:Ln,resolvedImage:bn};return Te.type==="array"?hn(Pe[Te.value]||Wt,Te.length):Pe[Te.type]}(z):void 0),le=Z.parse(M,void 0,void 0,void 0,z&&z.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?pl(new Uo(le,z)):No(Z.errors)}Uo.prototype.evaluateWithoutErrorHandling=function(M,z,Z,le,Te,Pe){return this._evaluator.globals=M,this._evaluator.feature=z,this._evaluator.featureState=Z,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Pe,this.expression.evaluate(this._evaluator)},Uo.prototype.evaluate=function(M,z,Z,le,Te,Pe){this._evaluator.globals=M,this._evaluator.feature=z||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Pe||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new en("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ke){return JSON.stringify(Ke)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Ke){return this._warningHistory[Ke.message]||(this._warningHistory[Ke.message]=!0,typeof console<"u"&&console.warn(Ke.message)),this._defaultValue}};var Wa=function(M,z){this.kind=M,this._styleExpression=z,this.isStateDependent=M!=="constant"&&!Jn(z.expression)};Wa.prototype.evaluateWithoutErrorHandling=function(M,z,Z,le,Te,Pe){return this._styleExpression.evaluateWithoutErrorHandling(M,z,Z,le,Te,Pe)},Wa.prototype.evaluate=function(M,z,Z,le,Te,Pe){return this._styleExpression.evaluate(M,z,Z,le,Te,Pe)};var ys=function(M,z,Z,le){this.kind=M,this.zoomStops=Z,this._styleExpression=z,this.isStateDependent=M!=="camera"&&!Jn(z.expression),this.interpolationType=le};function Ll(M,z){if((M=Ao(M,z)).result==="error")return M;var Z=M.value.expression,le=tr(Z);if(!le&&!To(z))return No([new vt("","data expressions not supported")]);var Te=hr(Z,["zoom"]);if(!Te&&!ko(z))return No([new vt("","zoom expressions not supported")]);var Pe=tl(Z);if(!Pe&&!Te)return No([new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Pe instanceof vt)return No([Pe]);if(Pe instanceof Vi&&!jo(z))return No([new vt("",'"interpolate" expressions cannot be used with this property')]);if(!Pe)return pl(new Wa(le?"constant":"source",M.value));var je=Pe instanceof Vi?Pe.interpolation:void 0;return pl(new ys(le?"camera":"composite",M.value,Pe.labels,je))}ys.prototype.evaluateWithoutErrorHandling=function(M,z,Z,le,Te,Pe){return this._styleExpression.evaluateWithoutErrorHandling(M,z,Z,le,Te,Pe)},ys.prototype.evaluate=function(M,z,Z,le,Te,Pe){return this._styleExpression.evaluate(M,z,Z,le,Te,Pe)},ys.prototype.interpolationFactor=function(M,z,Z){return this.interpolationType?Vi.interpolationFactor(this.interpolationType,M,z,Z):0};var Ds=function(M,z){this._parameters=M,this._specification=z,gt(this,Qs(this._parameters,this._specification))};function tl(M){var z=null;if(M instanceof qa)z=tl(M.result);else if(M instanceof oo)for(var Z=0,le=M.args;Z<le.length;Z+=1){var Te=le[Z];if(z=tl(Te))break}else(M instanceof Mr||M instanceof Vi)&&M.input instanceof dn&&M.input.name==="zoom"&&(z=M);return z instanceof vt||M.eachChild(function(Pe){var je=tl(Pe);je instanceof vt?z=je:!z&&je?z=new vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):z&&je&&z!==je&&(z=new vt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),z}function Ma(M){var z=M.key,Z=M.value,le=M.valueSpec||{},Te=M.objectElementValidators||{},Pe=M.style,je=M.styleSpec,Ke=[],st=Gr(Z);if(st!=="object")return[new ut(z,Z,"object expected, "+st+" found")];for(var yt in Z){var bt=yt.split(".")[0],Ot=le[bt]||le["*"],Ut=void 0;if(Te[bt])Ut=Te[bt];else if(le[bt])Ut=za;else if(Te["*"])Ut=Te["*"];else{if(!le["*"]){Ke.push(new ut(z,Z[yt],'unknown property "'+yt+'"'));continue}Ut=za}Ke=Ke.concat(Ut({key:(z&&z+".")+yt,value:Z[yt],valueSpec:Ot,style:Pe,styleSpec:je,object:Z,objectKey:yt},Z))}for(var Bt in le)Te[Bt]||le[Bt].required&&le[Bt].default===void 0&&Z[Bt]===void 0&&Ke.push(new ut(z,Z,'missing required property "'+Bt+'"'));return Ke}function nl(M){var z=M.value,Z=M.valueSpec,le=M.style,Te=M.styleSpec,Pe=M.key,je=M.arrayElementValidator||za;if(Gr(z)!=="array")return[new ut(Pe,z,"array expected, "+Gr(z)+" found")];if(Z.length&&z.length!==Z.length)return[new ut(Pe,z,"array length "+Z.length+" expected, length "+z.length+" found")];if(Z["min-length"]&&z.length<Z["min-length"])return[new ut(Pe,z,"array length at least "+Z["min-length"]+" expected, length "+z.length+" found")];var Ke={type:Z.value,values:Z.values};Te.$version<7&&(Ke.function=Z.function),Gr(Z.value)==="object"&&(Ke=Z.value);for(var st=[],yt=0;yt<z.length;yt++)st=st.concat(je({array:z,arrayIndex:yt,value:z[yt],valueSpec:Ke,style:le,styleSpec:Te,key:Pe+"["+yt+"]"}));return st}function Cl(M){var z=M.key,Z=M.value,le=M.valueSpec,Te=Gr(Z);return Te==="number"&&Z!=Z&&(Te="NaN"),Te!=="number"?[new ut(z,Z,"number expected, "+Te+" found")]:"minimum"in le&&Z<le.minimum?[new ut(z,Z,Z+" is less than the minimum value "+le.minimum)]:"maximum"in le&&Z>le.maximum?[new ut(z,Z,Z+" is greater than the maximum value "+le.maximum)]:[]}function xs(M){var z,Z,le,Te=M.valueSpec,Pe=ct(M.value.type),je={},Ke=Pe!=="categorical"&&M.value.property===void 0,st=!Ke,yt=Gr(M.value.stops)==="array"&&Gr(M.value.stops[0])==="array"&&Gr(M.value.stops[0][0])==="object",bt=Ma({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Bt){if(Pe==="identity")return[new ut(Bt.key,Bt.value,'identity function may not have a "stops" property')];var nn=[],on=Bt.value;return nn=nn.concat(nl({key:Bt.key,value:on,valueSpec:Bt.valueSpec,style:Bt.style,styleSpec:Bt.styleSpec,arrayElementValidator:Ot})),Gr(on)==="array"&&on.length===0&&nn.push(new ut(Bt.key,on,"array must have at least one stop")),nn},default:function(Bt){return za({key:Bt.key,value:Bt.value,valueSpec:Te,style:Bt.style,styleSpec:Bt.styleSpec})}}});return Pe==="identity"&&Ke&&bt.push(new ut(M.key,M.value,'missing required property "property"')),Pe==="identity"||M.value.stops||bt.push(new ut(M.key,M.value,'missing required property "stops"')),Pe==="exponential"&&M.valueSpec.expression&&!jo(M.valueSpec)&&bt.push(new ut(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(st&&!To(M.valueSpec)?bt.push(new ut(M.key,M.value,"property functions not supported")):Ke&&!ko(M.valueSpec)&&bt.push(new ut(M.key,M.value,"zoom functions not supported"))),Pe!=="categorical"&&!yt||M.value.property!==void 0||bt.push(new ut(M.key,M.value,'"property" property is required')),bt;function Ot(Bt){var nn=[],on=Bt.value,_n=Bt.key;if(Gr(on)!=="array")return[new ut(_n,on,"array expected, "+Gr(on)+" found")];if(on.length!==2)return[new ut(_n,on,"array length 2 expected, length "+on.length+" found")];if(yt){if(Gr(on[0])!=="object")return[new ut(_n,on,"object expected, "+Gr(on[0])+" found")];if(on[0].zoom===void 0)return[new ut(_n,on,"object stop key must have zoom")];if(on[0].value===void 0)return[new ut(_n,on,"object stop key must have value")];if(le&&le>ct(on[0].zoom))return[new ut(_n,on[0].zoom,"stop zoom values must appear in ascending order")];ct(on[0].zoom)!==le&&(le=ct(on[0].zoom),Z=void 0,je={}),nn=nn.concat(Ma({key:_n+"[0]",value:on[0],valueSpec:{zoom:{}},style:Bt.style,styleSpec:Bt.styleSpec,objectElementValidators:{zoom:Cl,value:Ut}}))}else nn=nn.concat(Ut({key:_n+"[0]",value:on[0],valueSpec:{},style:Bt.style,styleSpec:Bt.styleSpec},on));return os(Tt(on[1]))?nn.concat([new ut(_n+"[1]",on[1],"expressions are not allowed in function stops.")]):nn.concat(za({key:_n+"[1]",value:on[1],valueSpec:Te,style:Bt.style,styleSpec:Bt.styleSpec}))}function Ut(Bt,nn){var on=Gr(Bt.value),_n=ct(Bt.value),yn=Bt.value!==null?Bt.value:nn;if(z){if(on!==z)return[new ut(Bt.key,yn,on+" stop domain type must match previous stop domain type "+z)]}else z=on;if(on!=="number"&&on!=="string"&&on!=="boolean")return[new ut(Bt.key,yn,"stop domain value must be a number, string, or boolean")];if(on!=="number"&&Pe!=="categorical"){var Dn="number expected, "+on+" found";return To(Te)&&Pe===void 0&&(Dn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ut(Bt.key,yn,Dn)]}return Pe!=="categorical"||on!=="number"||isFinite(_n)&&Math.floor(_n)===_n?Pe!=="categorical"&&on==="number"&&Z!==void 0&&_n<Z?[new ut(Bt.key,yn,"stop domain values must appear in ascending order")]:(Z=_n,Pe==="categorical"&&_n in je?[new ut(Bt.key,yn,"stop domain values must be unique")]:(je[_n]=!0,[])):[new ut(Bt.key,yn,"integer expected, found "+_n)]}}function ss(M){var z=(M.expressionContext==="property"?Ll:Ao)(Tt(M.value),M.valueSpec);if(z.result==="error")return z.value.map(function(le){return new ut(""+M.key+le.key,M.value,le.message)});var Z=z.value.expression||z.value._styleExpression.expression;if(M.expressionContext==="property"&&M.propertyKey==="text-font"&&!Z.outputDefined())return[new ut(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if(M.expressionContext==="property"&&M.propertyType==="layout"&&!Jn(Z))return[new ut(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if(M.expressionContext==="filter"&&!Jn(Z))return[new ut(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&M.expressionContext.indexOf("cluster")===0){if(!hr(Z,["zoom","feature-state"]))return[new ut(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(M.expressionContext==="cluster-initial"&&!tr(Z))return[new ut(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bs(M){var z=M.key,Z=M.value,le=M.valueSpec,Te=[];return Array.isArray(le.values)?le.values.indexOf(ct(Z))===-1&&Te.push(new ut(z,Z,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(Z)+" found")):Object.keys(le.values).indexOf(ct(Z))===-1&&Te.push(new ut(z,Z,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(Z)+" found")),Te}function ls(M){if(M===!0||M===!1)return!0;if(!Array.isArray(M)||M.length===0)return!1;switch(M[0]){case"has":return M.length>=2&&M[1]!=="$id"&&M[1]!=="$type";case"in":return M.length>=3&&(typeof M[1]!="string"||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return M.length!==3||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var z=0,Z=M.slice(1);z<Z.length;z+=1){var le=Z[z];if(!ls(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}Ds.deserialize=function(M){return new Ds(M._parameters,M._specification)},Ds.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var cs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zs(M){if(M==null)return{filter:function(){return!0},needGeometry:!1};ls(M)||(M=Vo(M));var z=Ao(M,cs);if(z.result==="error")throw new Error(z.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,le,Te){return z.value.evaluate(Z,le,{},Te)},needGeometry:ri(M)}}function rl(M,z){return M<z?-1:M>z?1:0}function ri(M){if(!Array.isArray(M))return!1;if(M[0]==="within")return!0;for(var z=1;z<M.length;z++)if(ri(M[z]))return!0;return!1}function Vo(M){if(!M)return!0;var z,Z=M[0];return M.length<=1?Z!=="any":Z==="=="?ea(M[1],M[2],"=="):Z==="!="?ti(ea(M[1],M[2],"==")):Z==="<"||Z===">"||Z==="<="||Z===">="?ea(M[1],M[2],Z):Z==="any"?(z=M.slice(1),["any"].concat(z.map(Vo))):Z==="all"?["all"].concat(M.slice(1).map(Vo)):Z==="none"?["all"].concat(M.slice(1).map(Vo).map(ti)):Z==="in"?Ya(M[1],M.slice(2)):Z==="!in"?ti(Ya(M[1],M.slice(2))):Z==="has"?Kr(M[1]):Z==="!has"?ti(Kr(M[1])):Z!=="within"||M}function ea(M,z,Z){switch(M){case"$type":return["filter-type-"+Z,z];case"$id":return["filter-id-"+Z,z];default:return["filter-"+Z,M,z]}}function Ya(M,z){if(z.length===0)return!1;switch(M){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(Z){return typeof Z!=typeof z[0]})?["filter-in-large",M,["literal",z.sort(rl)]]:["filter-in-small",M,["literal",z]]}}function Kr(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function ti(M){return["!",M]}function Sa(M){return ls(Tt(M.value))?ss(gt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_s(M)}function _s(M){var z=M.value,Z=M.key;if(Gr(z)!=="array")return[new ut(Z,z,"array expected, "+Gr(z)+" found")];var le,Te=M.styleSpec,Pe=[];if(z.length<1)return[new ut(Z,z,"filter array must have at least 1 element")];switch(Pe=Pe.concat(bs({key:Z+"[0]",value:z[0],valueSpec:Te.filter_operator,style:M.style,styleSpec:M.styleSpec})),ct(z[0])){case"<":case"<=":case">":case">=":z.length>=2&&ct(z[1])==="$type"&&Pe.push(new ut(Z,z,'"$type" cannot be use with operator "'+z[0]+'"'));case"==":case"!=":z.length!==3&&Pe.push(new ut(Z,z,'filter array for operator "'+z[0]+'" must have 3 elements'));case"in":case"!in":z.length>=2&&(le=Gr(z[1]))!=="string"&&Pe.push(new ut(Z+"[1]",z[1],"string expected, "+le+" found"));for(var je=2;je<z.length;je++)le=Gr(z[je]),ct(z[1])==="$type"?Pe=Pe.concat(bs({key:Z+"["+je+"]",value:z[je],valueSpec:Te.geometry_type,style:M.style,styleSpec:M.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Pe.push(new ut(Z+"["+je+"]",z[je],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var Ke=1;Ke<z.length;Ke++)Pe=Pe.concat(_s({key:Z+"["+Ke+"]",value:z[Ke],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":le=Gr(z[1]),z.length!==2?Pe.push(new ut(Z,z,'filter array for "'+z[0]+'" operator must have 2 elements')):le!=="string"&&Pe.push(new ut(Z+"[1]",z[1],"string expected, "+le+" found"));break;case"within":le=Gr(z[1]),z.length!==2?Pe.push(new ut(Z,z,'filter array for "'+z[0]+'" operator must have 2 elements')):le!=="object"&&Pe.push(new ut(Z+"[1]",z[1],"object expected, "+le+" found"))}return Pe}function Rs(M,z){var Z=M.key,le=M.style,Te=M.styleSpec,Pe=M.value,je=M.objectKey,Ke=Te[z+"_"+M.layerType];if(!Ke)return[];var st=je.match(/^(.*)-transition$/);if(z==="paint"&&st&&Ke[st[1]]&&Ke[st[1]].transition)return za({key:Z,value:Pe,valueSpec:Te.transition,style:le,styleSpec:Te});var yt,bt=M.valueSpec||Ke[je];if(!bt)return[new ut(Z,Pe,'unknown property "'+je+'"')];if(Gr(Pe)==="string"&&To(bt)&&!bt.tokens&&(yt=/^{([^}]+)}$/.exec(Pe)))return[new ut(Z,Pe,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var Ot=[];return M.layerType==="symbol"&&(je==="text-field"&&le&&!le.glyphs&&Ot.push(new ut(Z,Pe,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&ms(Tt(Pe))&&ct(Pe.type)==="identity"&&Ot.push(new ut(Z,Pe,'"text-font" does not support identity functions'))),Ot.concat(za({key:M.key,value:Pe,valueSpec:bt,style:le,styleSpec:Te,expressionContext:"property",propertyType:z,propertyKey:je}))}function il(M){return Rs(M,"paint")}function Fs(M){return Rs(M,"layout")}function Bs(M){var z=[],Z=M.value,le=M.key,Te=M.style,Pe=M.styleSpec;Z.type||Z.ref||z.push(new ut(le,Z,'either "type" or "ref" is required'));var je,Ke=ct(Z.type),st=ct(Z.ref);if(Z.id)for(var yt=ct(Z.id),bt=0;bt<M.arrayIndex;bt++){var Ot=Te.layers[bt];ct(Ot.id)===yt&&z.push(new ut(le,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+Ot.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(nn){nn in Z&&z.push(new ut(le,Z[nn],'"'+nn+'" is prohibited for ref layers'))}),Te.layers.forEach(function(nn){ct(nn.id)===st&&(je=nn)}),je?je.ref?z.push(new ut(le,Z.ref,"ref cannot reference another ref layer")):Ke=ct(je.type):z.push(new ut(le,Z.ref,'ref layer "'+st+'" not found'));else if(Ke!=="background")if(Z.source){var Ut=Te.sources&&Te.sources[Z.source],Bt=Ut&&ct(Ut.type);Ut?Bt==="vector"&&Ke==="raster"?z.push(new ut(le,Z.source,'layer "'+Z.id+'" requires a raster source')):Bt==="raster"&&Ke!=="raster"?z.push(new ut(le,Z.source,'layer "'+Z.id+'" requires a vector source')):Bt!=="vector"||Z["source-layer"]?Bt==="raster-dem"&&Ke!=="hillshade"?z.push(new ut(le,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ke!=="line"||!Z.paint||!Z.paint["line-gradient"]||Bt==="geojson"&&Ut.lineMetrics||z.push(new ut(le,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new ut(le,Z,'layer "'+Z.id+'" must specify a "source-layer"')):z.push(new ut(le,Z.source,'source "'+Z.source+'" not found'))}else z.push(new ut(le,Z,'missing required property "source"'));return z=z.concat(Ma({key:le,value:Z,valueSpec:Pe.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return za({key:le+".type",value:Z.type,valueSpec:Pe.layer.type,style:M.style,styleSpec:M.styleSpec,object:Z,objectKey:"type"})},filter:Sa,layout:function(nn){return Ma({layer:Z,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(on){return Fs(gt({layerType:Ke},on))}}})},paint:function(nn){return Ma({layer:Z,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(on){return il(gt({layerType:Ke},on))}}})}}})),z}function Da(M){var z=M.value,Z=M.key,le=Gr(z);return le!=="string"?[new ut(Z,z,"string expected, "+le+" found")]:[]}var Ho={promoteId:function(M){var z=M.key,Z=M.value;if(Gr(Z)==="string")return Da({key:z,value:Z});var le=[];for(var Te in Z)le.push.apply(le,Da({key:z+"."+Te,value:Z[Te]}));return le}};function qo(M){var z=M.value,Z=M.key,le=M.styleSpec,Te=M.style;if(!z.type)return[new ut(Z,z,'"type" is required')];var Pe,je=ct(z.type);switch(je){case"vector":case"raster":case"raster-dem":return Ma({key:Z,value:z,valueSpec:le["source_"+je.replace("-","_")],style:M.style,styleSpec:le,objectElementValidators:Ho});case"geojson":if(Pe=Ma({key:Z,value:z,valueSpec:le.source_geojson,style:Te,styleSpec:le,objectElementValidators:Ho}),z.cluster)for(var Ke in z.clusterProperties){var st=z.clusterProperties[Ke],yt=st[0],bt=st[1],Ot=typeof yt=="string"?[yt,["accumulated"],["get",Ke]]:yt;Pe.push.apply(Pe,ss({key:Z+"."+Ke+".map",value:bt,expressionContext:"cluster-map"})),Pe.push.apply(Pe,ss({key:Z+"."+Ke+".reduce",value:Ot,expressionContext:"cluster-reduce"}))}return Pe;case"video":return Ma({key:Z,value:z,valueSpec:le.source_video,style:Te,styleSpec:le});case"image":return Ma({key:Z,value:z,valueSpec:le.source_image,style:Te,styleSpec:le});case"canvas":return[new ut(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return bs({key:Z+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Te,styleSpec:le})}}function oa(M){var z=M.value,Z=M.styleSpec,le=Z.light,Te=M.style,Pe=[],je=Gr(z);if(z===void 0)return Pe;if(je!=="object")return Pe.concat([new ut("light",z,"object expected, "+je+" found")]);for(var Ke in z){var st=Ke.match(/^(.*)-transition$/);Pe=st&&le[st[1]]&&le[st[1]].transition?Pe.concat(za({key:Ke,value:z[Ke],valueSpec:Z.transition,style:Te,styleSpec:Z})):le[Ke]?Pe.concat(za({key:Ke,value:z[Ke],valueSpec:le[Ke],style:Te,styleSpec:Z})):Pe.concat([new ut(Ke,z[Ke],'unknown property "'+Ke+'"')])}return Pe}var Ns={"*":function(){return[]},array:nl,boolean:function(M){var z=M.value,Z=M.key,le=Gr(z);return le!=="boolean"?[new ut(Z,z,"boolean expected, "+le+" found")]:[]},number:Cl,color:function(M){var z=M.key,Z=M.value,le=Gr(Z);return le!=="string"?[new ut(z,Z,"color expected, "+le+" found")]:An(Z)===null?[new ut(z,Z,'color expected, "'+Z+'" found')]:[]},constants:pt,enum:bs,filter:Sa,function:xs,layer:Bs,object:Ma,source:qo,light:oa,string:Da,formatted:function(M){return Da(M).length===0?[]:ss(M)},resolvedImage:function(M){return Da(M).length===0?[]:ss(M)}};function za(M){var z=M.value,Z=M.valueSpec,le=M.styleSpec;return Z.expression&&ms(ct(z))?xs(M):Z.expression&&os(Tt(z))?ss(M):Z.type&&Ns[Z.type]?Ns[Z.type](M):Ma(gt({},M,{valueSpec:Z.type?le[Z.type]:Z}))}function Hi(M){var z=M.value,Z=M.key,le=Da(M);return le.length||(z.indexOf("{fontstack}")===-1&&le.push(new ut(Z,z,'"glyphs" url must include a "{fontstack}" token')),z.indexOf("{range}")===-1&&le.push(new ut(Z,z,'"glyphs" url must include a "{range}" token'))),le}function Zi(M,z){z===void 0&&(z=Ge);var Z=[];return Z=Z.concat(za({key:"",value:M,valueSpec:z.$root,styleSpec:z,style:M,objectElementValidators:{glyphs:Hi,"*":function(){return[]}}})),M.constants&&(Z=Z.concat(pt({key:"constants",value:M.constants,style:M,styleSpec:z}))),ui(Z)}function ui(M){return[].concat(M).sort(function(z,Z){return z.line-Z.line})}function Xi(M){return function(){for(var z=[],Z=arguments.length;Z--;)z[Z]=arguments[Z];return ui(M.apply(this,z))}}Zi.source=Xi(qo),Zi.light=Xi(oa),Zi.layer=Xi(Bs),Zi.filter=Xi(Sa),Zi.paintProperty=Xi(il),Zi.layoutProperty=Xi(Fs);var uo=Zi,us=uo.light,Za=uo.paintProperty,Go=uo.layoutProperty;function ha(M,z){var Z=!1;if(z&&z.length)for(var le=0,Te=z;le<Te.length;le+=1){var Pe=Te[le];M.fire(new Fe(new Error(Pe.message))),Z=!0}return Z}var fs=Ra,Mo=3;function Ra(M,z,Z){var le=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var Te=new Int32Array(this.arrayBuffer);M=Te[0],z=Te[1],Z=Te[2],this.d=z+2*Z;for(var Pe=0;Pe<this.d*this.d;Pe++){var je=Te[Mo+Pe],Ke=Te[Mo+Pe+1];le.push(je===Ke?null:Te.subarray(je,Ke))}var st=Te[Mo+le.length],yt=Te[Mo+le.length+1];this.keys=Te.subarray(st,yt),this.bboxes=Te.subarray(yt),this.insert=this._insertReadonly}else{this.d=z+2*Z;for(var bt=0;bt<this.d*this.d;bt++)le.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=M,this.padding=Z,this.scale=z/M,this.uid=0;var Ot=Z/z*M;this.min=-Ot,this.max=M+Ot}Ra.prototype.insert=function(M,z,Z,le,Te){this._forEachCell(z,Z,le,Te,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(z),this.bboxes.push(Z),this.bboxes.push(le),this.bboxes.push(Te)},Ra.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ra.prototype._insertCell=function(M,z,Z,le,Te,Pe){this.cells[Te].push(Pe)},Ra.prototype.query=function(M,z,Z,le,Te){var Pe=this.min,je=this.max;if(M<=Pe&&z<=Pe&&je<=Z&&je<=le&&!Te)return Array.prototype.slice.call(this.keys);var Ke=[];return this._forEachCell(M,z,Z,le,this._queryCell,Ke,{},Te),Ke},Ra.prototype._queryCell=function(M,z,Z,le,Te,Pe,je,Ke){var st=this.cells[Te];if(st!==null)for(var yt=this.keys,bt=this.bboxes,Ot=0;Ot<st.length;Ot++){var Ut=st[Ot];if(je[Ut]===void 0){var Bt=4*Ut;(Ke?Ke(bt[Bt+0],bt[Bt+1],bt[Bt+2],bt[Bt+3]):M<=bt[Bt+2]&&z<=bt[Bt+3]&&Z>=bt[Bt+0]&&le>=bt[Bt+1])?(je[Ut]=!0,Pe.push(yt[Ut])):je[Ut]=!1}}},Ra.prototype._forEachCell=function(M,z,Z,le,Te,Pe,je,Ke){for(var st=this._convertToCellCoord(M),yt=this._convertToCellCoord(z),bt=this._convertToCellCoord(Z),Ot=this._convertToCellCoord(le),Ut=st;Ut<=bt;Ut++)for(var Bt=yt;Bt<=Ot;Bt++){var nn=this.d*Bt+Ut;if((!Ke||Ke(this._convertFromCellCoord(Ut),this._convertFromCellCoord(Bt),this._convertFromCellCoord(Ut+1),this._convertFromCellCoord(Bt+1)))&&Te.call(this,M,z,Z,le,nn,Pe,je,Ke))return}},Ra.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},Ra.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},Ra.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,z=Mo+this.cells.length+1+1,Z=0,le=0;le<this.cells.length;le++)Z+=this.cells[le].length;var Te=new Int32Array(z+Z+this.keys.length+this.bboxes.length);Te[0]=this.extent,Te[1]=this.n,Te[2]=this.padding;for(var Pe=z,je=0;je<M.length;je++){var Ke=M[je];Te[Mo+je]=Pe,Te.set(Ke,Pe),Pe+=Ke.length}return Te[Mo+M.length]=Pe,Te.set(this.keys,Pe),Pe+=this.keys.length,Te[Mo+M.length+1]=Pe,Te.set(this.bboxes,Pe),Pe+=this.bboxes.length,Te.buffer};var Fa=n.ImageData,pi=n.ImageBitmap,Xa={};function kr(M,z,Z){Z===void 0&&(Z={}),Object.defineProperty(z,"_classRegistryKey",{value:M,writeable:!1}),Xa[M]={klass:z,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var js in kr("Object",Object),fs.serialize=function(M,z){var Z=M.toArrayBuffer();return z&&z.push(Z),{buffer:Z}},fs.deserialize=function(M){return new fs(M.buffer)},kr("Grid",fs),kr("Color",Sn),kr("Error",Error),kr("ResolvedImage",Xn),kr("StylePropertyFunction",Ds),kr("StyleExpression",Uo,{omit:["_evaluator"]}),kr("ZoomDependentExpression",ys),kr("ZoomConstantExpression",Wa),kr("CompoundExpression",dn,{omit:["_evaluate"]}),gs)gs[js]._classRegistryKey||kr("Expression_"+js,gs[js]);function dl(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&M.constructor.name==="ArrayBuffer")}function Wo(M){return pi&&M instanceof pi}function Yo(M,z){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(dl(M)||Wo(M))return z&&z.push(M),M;if(ArrayBuffer.isView(M)){var Z=M;return z&&z.push(Z.buffer),Z}if(M instanceof Fa)return z&&z.push(M.data.buffer),M;if(Array.isArray(M)){for(var le=[],Te=0,Pe=M;Te<Pe.length;Te+=1){var je=Pe[Te];le.push(Yo(je,z))}return le}if(typeof M=="object"){var Ke=M.constructor,st=Ke._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var yt=Ke.serialize?Ke.serialize(M,z):{};if(!Ke.serialize){for(var bt in M)if(M.hasOwnProperty(bt)&&!(Xa[st].omit.indexOf(bt)>=0)){var Ot=M[bt];yt[bt]=Xa[st].shallow.indexOf(bt)>=0?Ot:Yo(Ot,z)}M instanceof Error&&(yt.message=M.message)}if(yt.$name)throw new Error("$name property is reserved for worker serialization logic.");return st!=="Object"&&(yt.$name=st),yt}throw new Error("can't serialize object of type "+typeof M)}function hs(M){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||dl(M)||Wo(M)||ArrayBuffer.isView(M)||M instanceof Fa)return M;if(Array.isArray(M))return M.map(hs);if(typeof M=="object"){var z=M.$name||"Object",Z=Xa[z].klass;if(!Z)throw new Error("can't deserialize unregistered class "+z);if(Z.deserialize)return Z.deserialize(M);for(var le=Object.create(Z.prototype),Te=0,Pe=Object.keys(M);Te<Pe.length;Te+=1){var je=Pe[Te];if(je!=="$name"){var Ke=M[je];le[je]=Xa[z].shallow.indexOf(je)>=0?Ke:hs(Ke)}}return le}throw new Error("can't deserialize object of type "+typeof M)}var ws=function(){this.first=!0};ws.prototype.update=function(M,z){var Z=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=z),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=Z,!0))};var yr={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Us(M){for(var z=0,Z=M;z<Z.length;z+=1)if(So(Z[z].charCodeAt(0)))return!0;return!1}function So(M){return!(M!==746&&M!==747&&(M<4352||!(yr["Bopomofo Extended"](M)||yr.Bopomofo(M)||yr["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||yr["CJK Compatibility Ideographs"](M)||yr["CJK Compatibility"](M)||yr["CJK Radicals Supplement"](M)||yr["CJK Strokes"](M)||!(!yr["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||M===12336)||yr["CJK Unified Ideographs Extension A"](M)||yr["CJK Unified Ideographs"](M)||yr["Enclosed CJK Letters and Months"](M)||yr["Hangul Compatibility Jamo"](M)||yr["Hangul Jamo Extended-A"](M)||yr["Hangul Jamo Extended-B"](M)||yr["Hangul Jamo"](M)||yr["Hangul Syllables"](M)||yr.Hiragana(M)||yr["Ideographic Description Characters"](M)||yr.Kanbun(M)||yr["Kangxi Radicals"](M)||yr["Katakana Phonetic Extensions"](M)||yr.Katakana(M)&&M!==12540||!(!yr["Halfwidth and Fullwidth Forms"](M)||M===65288||M===65289||M===65293||M>=65306&&M<=65310||M===65339||M===65341||M===65343||M>=65371&&M<=65503||M===65507||M>=65512&&M<=65519)||!(!yr["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||yr["Unified Canadian Aboriginal Syllabics"](M)||yr["Unified Canadian Aboriginal Syllabics Extended"](M)||yr["Vertical Forms"](M)||yr["Yijing Hexagram Symbols"](M)||yr["Yi Syllables"](M)||yr["Yi Radicals"](M))))}function qi(M){return!(So(M)||function(z){return!!(yr["Latin-1 Supplement"](z)&&(z===167||z===169||z===174||z===177||z===188||z===189||z===190||z===215||z===247)||yr["General Punctuation"](z)&&(z===8214||z===8224||z===8225||z===8240||z===8241||z===8251||z===8252||z===8258||z===8263||z===8264||z===8265||z===8273)||yr["Letterlike Symbols"](z)||yr["Number Forms"](z)||yr["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||z===9003||z>=9085&&z<=9114||z>=9150&&z<=9165||z===9167||z>=9169&&z<=9179||z>=9186&&z<=9215)||yr["Control Pictures"](z)&&z!==9251||yr["Optical Character Recognition"](z)||yr["Enclosed Alphanumerics"](z)||yr["Geometric Shapes"](z)||yr["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||yr["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||yr["CJK Symbols and Punctuation"](z)||yr.Katakana(z)||yr["Private Use Area"](z)||yr["CJK Compatibility Forms"](z)||yr["Small Form Variants"](z)||yr["Halfwidth and Fullwidth Forms"](z)||z===8734||z===8756||z===8757||z>=9984&&z<=10087||z>=10102&&z<=10131||z===65532||z===65533)}(M))}function Zo(M){return yr.Arabic(M)||yr["Arabic Supplement"](M)||yr["Arabic Extended-A"](M)||yr["Arabic Presentation Forms-A"](M)||yr["Arabic Presentation Forms-B"](M)}function Ka(M){return M>=1424&&M<=2303||yr["Arabic Presentation Forms-A"](M)||yr["Arabic Presentation Forms-B"](M)}function Ba(M,z){return!(!z&&Ka(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||yr.Khmer(M))}function sa(M){for(var z=0,Z=M;z<Z.length;z+=1)if(Ka(Z[z].charCodeAt(0)))return!0;return!1}var fo="deferred",Na="loading",Eo="loaded",Vs="error",Xo=null,Zr="unavailable",Ki=null,pa=function(M){M&&typeof M=="string"&&M.indexOf("NetworkError")>-1&&(Zr=Vs),Xo&&Xo(M)};function ho(){da.fire(new Re("pluginStateChange",{pluginStatus:Zr,pluginURL:Ki}))}var da=new nt,Ts=function(){return Zr},ks=function(){if(Zr!==fo||!Ki)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Zr=Na,ho(),Ki&&It({url:Ki},function(M){M?pa(M):(Zr=Eo,ho())})},ga={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Zr===Eo||ga.applyArabicShaping!=null},isLoading:function(){return Zr===Na},setState:function(M){Zr=M.pluginStatus,Ki=M.pluginURL},isParsed:function(){return ga.applyArabicShaping!=null&&ga.processBidirectionalText!=null&&ga.processStyledBidirectionalText!=null},getPluginURL:function(){return Ki}},Wr=function(M,z){this.zoom=M,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ws,this.transition={})};Wr.prototype.isSupportedScript=function(M){return function(z,Z){for(var le=0,Te=z;le<Te.length;le+=1)if(!Ba(Te[le].charCodeAt(0),Z))return!1;return!0}(M,ga.isLoaded())},Wr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Wr.prototype.getCrossfadeParameters=function(){var M=this.zoom,z=M-Math.floor(M),Z=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*z}};var po=function(M,z){this.property=M,this.value=z,this.expression=function(Z,le){if(ms(Z))return new Ds(Z,le);if(os(Z)){var Te=Ll(Z,le);if(Te.result==="error")throw new Error(Te.value.map(function(je){return je.key+": "+je.message}).join(", "));return Te.value}var Pe=Z;return typeof Z=="string"&&le.type==="color"&&(Pe=Sn.parse(Z)),{kind:"constant",evaluate:function(){return Pe}}}(z===void 0?M.specification.default:z,M.specification)};po.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},po.prototype.possiblyEvaluate=function(M,z,Z){return this.property.possiblyEvaluate(this,M,z,Z)};var ps=function(M){this.property=M,this.value=new po(M,void 0)};ps.prototype.transitioned=function(M,z){return new As(this.property,this.value,z,u({},M.transition,this.transition),M.now)},ps.prototype.untransitioned=function(){return new As(this.property,this.value,null,{},0)};var Ja=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};Ja.prototype.getValue=function(M){return S(this._values[M].value.value)},Ja.prototype.setValue=function(M,z){this._values.hasOwnProperty(M)||(this._values[M]=new ps(this._values[M].property)),this._values[M].value=new po(this._values[M].property,z===null?void 0:S(z))},Ja.prototype.getTransition=function(M){return S(this._values[M].transition)},Ja.prototype.setTransition=function(M,z){this._values.hasOwnProperty(M)||(this._values[M]=new ps(this._values[M].property)),this._values[M].transition=S(z)||void 0},Ja.prototype.serialize=function(){for(var M={},z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var le=Z[z],Te=this.getValue(le);Te!==void 0&&(M[le]=Te);var Pe=this.getTransition(le);Pe!==void 0&&(M[le+"-transition"]=Pe)}return M},Ja.prototype.transitioned=function(M,z){for(var Z=new Ms(this._properties),le=0,Te=Object.keys(this._values);le<Te.length;le+=1){var Pe=Te[le];Z._values[Pe]=this._values[Pe].transitioned(M,z._values[Pe])}return Z},Ja.prototype.untransitioned=function(){for(var M=new Ms(this._properties),z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var le=Z[z];M._values[le]=this._values[le].untransitioned()}return M};var As=function(M,z,Z,le,Te){this.property=M,this.value=z,this.begin=Te+le.delay||0,this.end=this.begin+le.duration||0,M.specification.transition&&(le.delay||le.duration)&&(this.prior=Z)};As.prototype.possiblyEvaluate=function(M,z,Z){var le=M.now||0,Te=this.value.possiblyEvaluate(M,z,Z),Pe=this.prior;if(Pe){if(le>this.end)return this.prior=null,Te;if(this.value.isDataDriven())return this.prior=null,Te;if(le<this.begin)return Pe.possiblyEvaluate(M,z,Z);var je=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Pe.possiblyEvaluate(M,z,Z),Te,function(Ke){if(Ke<=0)return 0;if(Ke>=1)return 1;var st=Ke*Ke,yt=st*Ke;return 4*(Ke<.5?yt:3*(Ke-st)+yt-.75)}(je))}return Te};var Ms=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Ms.prototype.possiblyEvaluate=function(M,z,Z){for(var le=new ds(this._properties),Te=0,Pe=Object.keys(this._values);Te<Pe.length;Te+=1){var je=Pe[Te];le._values[je]=this._values[je].possiblyEvaluate(M,z,Z)}return le},Ms.prototype.hasTransition=function(){for(var M=0,z=Object.keys(this._values);M<z.length;M+=1){var Z=z[M];if(this._values[Z].prior)return!0}return!1};var $a=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};$a.prototype.getValue=function(M){return S(this._values[M].value)},$a.prototype.setValue=function(M,z){this._values[M]=new po(this._values[M].property,z===null?void 0:S(z))},$a.prototype.serialize=function(){for(var M={},z=0,Z=Object.keys(this._values);z<Z.length;z+=1){var le=Z[z],Te=this.getValue(le);Te!==void 0&&(M[le]=Te)}return M},$a.prototype.possiblyEvaluate=function(M,z,Z){for(var le=new ds(this._properties),Te=0,Pe=Object.keys(this._values);Te<Pe.length;Te+=1){var je=Pe[Te];le._values[je]=this._values[je].possiblyEvaluate(M,z,Z)}return le};var di=function(M,z,Z){this.property=M,this.value=z,this.parameters=Z};di.prototype.isConstant=function(){return this.value.kind==="constant"},di.prototype.constantOr=function(M){return this.value.kind==="constant"?this.value.value:M},di.prototype.evaluate=function(M,z,Z,le){return this.property.evaluate(this.value,this.parameters,M,z,Z,le)};var ds=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};ds.prototype.get=function(M){return this._values[M]};var Sr=function(M){this.specification=M};Sr.prototype.possiblyEvaluate=function(M,z){return M.expression.evaluate(z)},Sr.prototype.interpolate=function(M,z,Z){var le=fi[this.specification.type];return le?le(M,z,Z):M};var Or=function(M,z){this.specification=M,this.overrides=z};Or.prototype.possiblyEvaluate=function(M,z,Z,le){return M.expression.kind==="constant"||M.expression.kind==="camera"?new di(this,{kind:"constant",value:M.expression.evaluate(z,null,{},Z,le)},z):new di(this,M.expression,z)},Or.prototype.interpolate=function(M,z,Z){if(M.value.kind!=="constant"||z.value.kind!=="constant")return M;if(M.value.value===void 0||z.value.value===void 0)return new di(this,{kind:"constant",value:void 0},M.parameters);var le=fi[this.specification.type];return le?new di(this,{kind:"constant",value:le(M.value.value,z.value.value,Z)},M.parameters):M},Or.prototype.evaluate=function(M,z,Z,le,Te,Pe){return M.kind==="constant"?M.value:M.evaluate(z,Z,le,Te,Pe)};var Ea=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(Z,le,Te,Pe){if(Z.value===void 0)return new di(this,{kind:"constant",value:void 0},le);if(Z.expression.kind==="constant"){var je=Z.expression.evaluate(le,null,{},Te,Pe),Ke=Z.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,st=this._calculate(Ke,Ke,Ke,le);return new di(this,{kind:"constant",value:st},le)}if(Z.expression.kind==="camera"){var yt=this._calculate(Z.expression.evaluate({zoom:le.zoom-1}),Z.expression.evaluate({zoom:le.zoom}),Z.expression.evaluate({zoom:le.zoom+1}),le);return new di(this,{kind:"constant",value:yt},le)}return new di(this,Z.expression,le)},z.prototype.evaluate=function(Z,le,Te,Pe,je,Ke){if(Z.kind==="source"){var st=Z.evaluate(le,Te,Pe,je,Ke);return this._calculate(st,st,st,le)}return Z.kind==="composite"?this._calculate(Z.evaluate({zoom:Math.floor(le.zoom)-1},Te,Pe),Z.evaluate({zoom:Math.floor(le.zoom)},Te,Pe),Z.evaluate({zoom:Math.floor(le.zoom)+1},Te,Pe),le):Z.value},z.prototype._calculate=function(Z,le,Te,Pe){return Pe.zoom>Pe.zoomHistory.lastIntegerZoom?{from:Z,to:le}:{from:Te,to:le}},z.prototype.interpolate=function(Z){return Z},z}(Or),go=function(M){this.specification=M};go.prototype.possiblyEvaluate=function(M,z,Z,le){if(M.value!==void 0){if(M.expression.kind==="constant"){var Te=M.expression.evaluate(z,null,{},Z,le);return this._calculate(Te,Te,Te,z)}return this._calculate(M.expression.evaluate(new Wr(Math.floor(z.zoom-1),z)),M.expression.evaluate(new Wr(Math.floor(z.zoom),z)),M.expression.evaluate(new Wr(Math.floor(z.zoom+1),z)),z)}},go.prototype._calculate=function(M,z,Z,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:M,to:z}:{from:Z,to:z}},go.prototype.interpolate=function(M){return M};var Lo=function(M){this.specification=M};Lo.prototype.possiblyEvaluate=function(M,z,Z,le){return!!M.expression.evaluate(z,null,{},Z,le)},Lo.prototype.interpolate=function(){return!1};var Oi=function(M){for(var z in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var Z=M[z];Z.specification.overridable&&this.overridableProperties.push(z);var le=this.defaultPropertyValues[z]=new po(Z,void 0),Te=this.defaultTransitionablePropertyValues[z]=new ps(Z);this.defaultTransitioningPropertyValues[z]=Te.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=le.possiblyEvaluate({})}};kr("DataDrivenProperty",Or),kr("DataConstantProperty",Sr),kr("CrossFadedDataDrivenProperty",Ea),kr("CrossFadedProperty",go),kr("ColorRampProperty",Lo);var mo="-transition",ii=function(M){function z(Z,le){if(M.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Z.type!=="custom"&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,Z.type!=="background"&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),le.layout&&(this._unevaluatedLayout=new $a(le.layout)),le.paint)){for(var Te in this._transitionablePaint=new Ja(le.paint),Z.paint)this.setPaintProperty(Te,Z.paint[Te],{validate:!1});for(var Pe in Z.layout)this.setLayoutProperty(Pe,Z.layout[Pe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ds(le.paint)}}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(Z){return Z==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Z)},z.prototype.setLayoutProperty=function(Z,le,Te){if(Te===void 0&&(Te={}),le!=null){var Pe="layers."+this.id+".layout."+Z;if(this._validate(Go,Pe,Z,le,Te))return}Z!=="visibility"?this._unevaluatedLayout.setValue(Z,le):this.visibility=le},z.prototype.getPaintProperty=function(Z){return v(Z,mo)?this._transitionablePaint.getTransition(Z.slice(0,-11)):this._transitionablePaint.getValue(Z)},z.prototype.setPaintProperty=function(Z,le,Te){if(Te===void 0&&(Te={}),le!=null){var Pe="layers."+this.id+".paint."+Z;if(this._validate(Za,Pe,Z,le,Te))return!1}if(v(Z,mo))return this._transitionablePaint.setTransition(Z.slice(0,-11),le||void 0),!1;var je=this._transitionablePaint._values[Z],Ke=je.property.specification["property-type"]==="cross-faded-data-driven",st=je.value.isDataDriven(),yt=je.value;this._transitionablePaint.setValue(Z,le),this._handleSpecialPaintPropertyUpdate(Z);var bt=this._transitionablePaint._values[Z].value;return bt.isDataDriven()||st||Ke||this._handleOverridablePaintPropertyUpdate(Z,yt,bt)},z.prototype._handleSpecialPaintPropertyUpdate=function(Z){},z.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Te){return!1},z.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||this.visibility==="none"},z.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(Z,le){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,le)},z.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),f(Z,function(le,Te){return!(le===void 0||Te==="layout"&&!Object.keys(le).length||Te==="paint"&&!Object.keys(le).length)})},z.prototype._validate=function(Z,le,Te,Pe,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&ha(this,Z.call(uo,{key:le,layerType:this.type,objectKey:Te,value:Pe,styleSpec:Ge,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var Z in this.paint._values){var le=this.paint.get(Z);if(le instanceof di&&To(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},z}(nt),Pl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},La=function(M,z){this._structArray=M,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},si=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function yi(M,z){z===void 0&&(z=1);var Z=0,le=0;return{members:M.map(function(Te){var Pe,je=(Pe=Te.type,Pl[Pe].BYTES_PER_ELEMENT),Ke=Z=_a(Z,Math.max(z,je)),st=Te.components||1;return le=Math.max(le,je),Z+=je*st,{name:Te.name,type:Te.type,components:st,offset:Ke}}),size:_a(Z,Math.max(le,z)),alignment:z}}function _a(M,z){return Math.ceil(M/z)*z}si.serialize=function(M,z){return M._trim(),z&&(M.isTransferred=!0,z.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},si.deserialize=function(M){var z=Object.create(this.prototype);return z.arrayBuffer=M.arrayBuffer,z.length=M.length,z.capacity=M.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},si.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},si.prototype.clear=function(){this.length=0},si.prototype.resize=function(M){this.reserve(M),this.length=M},si.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},si.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ko=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},z.prototype.emplace=function(Z,le,Te){var Pe=2*Z;return this.int16[Pe+0]=le,this.int16[Pe+1]=Te,Z},z}(si);Ko.prototype.bytesPerElement=4,kr("StructArrayLayout2i4",Ko);var ml=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Pe)},z.prototype.emplace=function(Z,le,Te,Pe,je){var Ke=4*Z;return this.int16[Ke+0]=le,this.int16[Ke+1]=Te,this.int16[Ke+2]=Pe,this.int16[Ke+3]=je,Z},z}(si);ml.prototype.bytesPerElement=8,kr("StructArrayLayout4i8",ml);var Xe=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Te,Pe,je,Ke)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st){var yt=6*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Te,this.int16[yt+2]=Pe,this.int16[yt+3]=je,this.int16[yt+4]=Ke,this.int16[yt+5]=st,Z},z}(si);Xe.prototype.bytesPerElement=12,kr("StructArrayLayout2i4i12",Xe);var $e=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Te,Pe,je,Ke)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st){var yt=4*Z,bt=8*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Te,this.uint8[bt+4]=Pe,this.uint8[bt+5]=je,this.uint8[bt+6]=Ke,this.uint8[bt+7]=st,Z},z}(si);$e.prototype.bytesPerElement=8,kr("StructArrayLayout2i4ub8",$e);var ot=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},z.prototype.emplace=function(Z,le,Te){var Pe=2*Z;return this.float32[Pe+0]=le,this.float32[Pe+1]=Te,Z},z}(si);ot.prototype.bytesPerElement=8,kr("StructArrayLayout2f8",ot);var B=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot){var Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut){var Bt=10*Z;return this.uint16[Bt+0]=le,this.uint16[Bt+1]=Te,this.uint16[Bt+2]=Pe,this.uint16[Bt+3]=je,this.uint16[Bt+4]=Ke,this.uint16[Bt+5]=st,this.uint16[Bt+6]=yt,this.uint16[Bt+7]=bt,this.uint16[Bt+8]=Ot,this.uint16[Bt+9]=Ut,Z},z}(si);B.prototype.bytesPerElement=20,kr("StructArrayLayout10ui20",B);var G=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt){var nn=this.length;return this.resize(nn+1),this.emplace(nn,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn){var on=12*Z;return this.int16[on+0]=le,this.int16[on+1]=Te,this.int16[on+2]=Pe,this.int16[on+3]=je,this.uint16[on+4]=Ke,this.uint16[on+5]=st,this.uint16[on+6]=yt,this.uint16[on+7]=bt,this.int16[on+8]=Ot,this.int16[on+9]=Ut,this.int16[on+10]=Bt,this.int16[on+11]=nn,Z},z}(si);G.prototype.bytesPerElement=24,kr("StructArrayLayout4i4ui4i24",G);var H=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Pe){var je=3*Z;return this.float32[je+0]=le,this.float32[je+1]=Te,this.float32[je+2]=Pe,Z},z}(si);H.prototype.bytesPerElement=12,kr("StructArrayLayout3f12",H);var L=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},z.prototype.emplace=function(Z,le){var Te=1*Z;return this.uint32[Te+0]=le,Z},z}(si);L.prototype.bytesPerElement=4,kr("StructArrayLayout1ul4",L);var V=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke,st,yt,bt){var Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,Z,le,Te,Pe,je,Ke,st,yt,bt)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot){var Ut=10*Z,Bt=5*Z;return this.int16[Ut+0]=le,this.int16[Ut+1]=Te,this.int16[Ut+2]=Pe,this.int16[Ut+3]=je,this.int16[Ut+4]=Ke,this.int16[Ut+5]=st,this.uint32[Bt+3]=yt,this.uint16[Ut+8]=bt,this.uint16[Ut+9]=Ot,Z},z}(si);V.prototype.bytesPerElement=20,kr("StructArrayLayout6i1ul2ui20",V);var $=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Z,le,Te,Pe,je,Ke)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st){var yt=6*Z;return this.int16[yt+0]=le,this.int16[yt+1]=Te,this.int16[yt+2]=Pe,this.int16[yt+3]=je,this.int16[yt+4]=Ke,this.int16[yt+5]=st,Z},z}(si);$.prototype.bytesPerElement=12,kr("StructArrayLayout2i2i2i12",$);var ne=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je){var Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,Z,le,Te,Pe,je)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke){var st=4*Z,yt=8*Z;return this.float32[st+0]=le,this.float32[st+1]=Te,this.float32[st+2]=Pe,this.int16[yt+6]=je,this.int16[yt+7]=Ke,Z},z}(si);ne.prototype.bytesPerElement=16,kr("StructArrayLayout2f1f2i16",ne);var ce=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Pe)},z.prototype.emplace=function(Z,le,Te,Pe,je){var Ke=12*Z,st=3*Z;return this.uint8[Ke+0]=le,this.uint8[Ke+1]=Te,this.float32[st+1]=Pe,this.float32[st+2]=je,Z},z}(si);ce.prototype.bytesPerElement=12,kr("StructArrayLayout2ub2f12",ce);var xe=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Pe){var je=3*Z;return this.uint16[je+0]=le,this.uint16[je+1]=Te,this.uint16[je+2]=Pe,Z},z}(si);xe.prototype.bytesPerElement=6,kr("StructArrayLayout3ui6",xe);var Ce=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on,_n,yn,Dn){var zn=this.length;return this.resize(zn+1),this.emplace(zn,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on,_n,yn,Dn)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on,_n,yn,Dn,zn){var Un=24*Z,Zn=12*Z,rr=48*Z;return this.int16[Un+0]=le,this.int16[Un+1]=Te,this.uint16[Un+2]=Pe,this.uint16[Un+3]=je,this.uint32[Zn+2]=Ke,this.uint32[Zn+3]=st,this.uint32[Zn+4]=yt,this.uint16[Un+10]=bt,this.uint16[Un+11]=Ot,this.uint16[Un+12]=Ut,this.float32[Zn+7]=Bt,this.float32[Zn+8]=nn,this.uint8[rr+36]=on,this.uint8[rr+37]=_n,this.uint8[rr+38]=yn,this.uint32[Zn+10]=Dn,this.int16[Un+22]=zn,Z},z}(si);Ce.prototype.bytesPerElement=48,kr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ce);var ze=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on,_n,yn,Dn,zn,Un,Zn,rr,vr,pr,_r,Tr,Br,Cr,Fr){var Ir=this.length;return this.resize(Ir+1),this.emplace(Ir,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on,_n,yn,Dn,zn,Un,Zn,rr,vr,pr,_r,Tr,Br,Cr,Fr)},z.prototype.emplace=function(Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on,_n,yn,Dn,zn,Un,Zn,rr,vr,pr,_r,Tr,Br,Cr,Fr,Ir){var Lr=34*Z,Jr=17*Z;return this.int16[Lr+0]=le,this.int16[Lr+1]=Te,this.int16[Lr+2]=Pe,this.int16[Lr+3]=je,this.int16[Lr+4]=Ke,this.int16[Lr+5]=st,this.int16[Lr+6]=yt,this.int16[Lr+7]=bt,this.uint16[Lr+8]=Ot,this.uint16[Lr+9]=Ut,this.uint16[Lr+10]=Bt,this.uint16[Lr+11]=nn,this.uint16[Lr+12]=on,this.uint16[Lr+13]=_n,this.uint16[Lr+14]=yn,this.uint16[Lr+15]=Dn,this.uint16[Lr+16]=zn,this.uint16[Lr+17]=Un,this.uint16[Lr+18]=Zn,this.uint16[Lr+19]=rr,this.uint16[Lr+20]=vr,this.uint16[Lr+21]=pr,this.uint16[Lr+22]=_r,this.uint32[Jr+12]=Tr,this.float32[Jr+13]=Br,this.float32[Jr+14]=Cr,this.float32[Jr+15]=Fr,this.float32[Jr+16]=Ir,Z},z}(si);ze.prototype.bytesPerElement=68,kr("StructArrayLayout8i15ui1ul4f68",ze);var Ue=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},z.prototype.emplace=function(Z,le){var Te=1*Z;return this.float32[Te+0]=le,Z},z}(si);Ue.prototype.bytesPerElement=4,kr("StructArrayLayout1f4",Ue);var He=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Pe){var je=3*Z;return this.int16[je+0]=le,this.int16[je+1]=Te,this.int16[je+2]=Pe,Z},z}(si);He.prototype.bytesPerElement=6,kr("StructArrayLayout3i6",He);var et=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,Z,le,Te)},z.prototype.emplace=function(Z,le,Te,Pe){var je=2*Z,Ke=4*Z;return this.uint32[je+0]=le,this.uint16[Ke+2]=Te,this.uint16[Ke+3]=Pe,Z},z}(si);et.prototype.bytesPerElement=8,kr("StructArrayLayout1ul2ui8",et);var lt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Z,le)},z.prototype.emplace=function(Z,le,Te){var Pe=2*Z;return this.uint16[Pe+0]=le,this.uint16[Pe+1]=Te,Z},z}(si);lt.prototype.bytesPerElement=4,kr("StructArrayLayout2ui4",lt);var ft=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z){var le=this.length;return this.resize(le+1),this.emplace(le,Z)},z.prototype.emplace=function(Z,le){var Te=1*Z;return this.uint16[Te+0]=le,Z},z}(si);ft.prototype.bytesPerElement=2,kr("StructArrayLayout1ui2",ft);var xt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(Z,le,Te,Pe){var je=this.length;return this.resize(je+1),this.emplace(je,Z,le,Te,Pe)},z.prototype.emplace=function(Z,le,Te,Pe,je){var Ke=4*Z;return this.float32[Ke+0]=le,this.float32[Ke+1]=Te,this.float32[Ke+2]=Pe,this.float32[Ke+3]=je,Z},z}(si);xt.prototype.bytesPerElement=16,kr("StructArrayLayout4f16",xt);var Mt=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,Z),z}(La);Mt.prototype.size=20;var _t=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new Mt(this,Z)},z}(V);kr("CollisionBoxArray",_t);var zt=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,Z),z}(La);zt.prototype.size=48;var Et=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new zt(this,Z)},z}(Ce);kr("PlacedSymbolArray",Et);var Yt=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,Z),z}(La);Yt.prototype.size=68;var Vt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new Yt(this,Z)},z}(ze);kr("SymbolInstanceArray",Vt);var Nt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},z}(Ue);kr("GlyphOffsetArray",Nt);var fn=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.getx=function(Z){return this.int16[3*Z+0]},z.prototype.gety=function(Z){return this.int16[3*Z+1]},z.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},z}(He);kr("SymbolLineVertexArray",fn);var gn=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,Z),z}(La);gn.prototype.size=8;var kn=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(Z){return new gn(this,Z)},z}(et);kr("FeatureIndexArray",kn);var Pn=yi([{name:"a_pos",components:2,type:"Int16"}],4).members,Nn=function(M){M===void 0&&(M=[]),this.segments=M};function nr(M,z){return 256*(M=c(Math.floor(M),0,255))+c(Math.floor(z),0,255)}Nn.prototype.prepareSegment=function(M,z,Z,le){var Te=this.segments[this.segments.length-1];return M>Nn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+Nn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!Te||Te.vertexLength+M>Nn.MAX_VERTEX_ARRAY_LENGTH||Te.sortKey!==le)&&(Te={vertexOffset:z.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},le!==void 0&&(Te.sortKey=le),this.segments.push(Te)),Te},Nn.prototype.get=function(){return this.segments},Nn.prototype.destroy=function(){for(var M=0,z=this.segments;M<z.length;M+=1){var Z=z[M];for(var le in Z.vaos)Z.vaos[le].destroy()}},Nn.simpleSegment=function(M,z,Z,le){return new Nn([{vertexOffset:M,primitiveOffset:z,vertexLength:Z,primitiveLength:le,vaos:{},sortKey:0}])},Nn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,kr("SegmentVector",Nn);var cr=yi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),qn=T(function(M){M.exports=function(z,Z){var le,Te,Pe,je,Ke,st,yt,bt;for(le=3&z.length,Te=z.length-le,Pe=Z,Ke=3432918353,st=461845907,bt=0;bt<Te;)yt=255&z.charCodeAt(bt)|(255&z.charCodeAt(++bt))<<8|(255&z.charCodeAt(++bt))<<16|(255&z.charCodeAt(++bt))<<24,++bt,Pe=27492+(65535&(je=5*(65535&(Pe=(Pe^=yt=(65535&(yt=(yt=(65535&yt)*Ke+(((yt>>>16)*Ke&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295)<<13|Pe>>>19))+((5*(Pe>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(yt=0,le){case 3:yt^=(255&z.charCodeAt(bt+2))<<16;case 2:yt^=(255&z.charCodeAt(bt+1))<<8;case 1:Pe^=yt=(65535&(yt=(yt=(65535&(yt^=255&z.charCodeAt(bt)))*Ke+(((yt>>>16)*Ke&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295}return Pe^=z.length,Pe=2246822507*(65535&(Pe^=Pe>>>16))+((2246822507*(Pe>>>16)&65535)<<16)&4294967295,Pe=3266489909*(65535&(Pe^=Pe>>>13))+((3266489909*(Pe>>>16)&65535)<<16)&4294967295,(Pe^=Pe>>>16)>>>0}}),sr=T(function(M){M.exports=function(z,Z){for(var le,Te=z.length,Pe=Z^Te,je=0;Te>=4;)le=1540483477*(65535&(le=255&z.charCodeAt(je)|(255&z.charCodeAt(++je))<<8|(255&z.charCodeAt(++je))<<16|(255&z.charCodeAt(++je))<<24))+((1540483477*(le>>>16)&65535)<<16),Pe=1540483477*(65535&Pe)+((1540483477*(Pe>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),Te-=4,++je;switch(Te){case 3:Pe^=(255&z.charCodeAt(je+2))<<16;case 2:Pe^=(255&z.charCodeAt(je+1))<<8;case 1:Pe=1540483477*(65535&(Pe^=255&z.charCodeAt(je)))+((1540483477*(Pe>>>16)&65535)<<16)}return Pe=1540483477*(65535&(Pe^=Pe>>>13))+((1540483477*(Pe>>>16)&65535)<<16),(Pe^=Pe>>>15)>>>0}}),xr=qn,Er=qn,Qn=sr;xr.murmur3=Er,xr.murmur2=Qn;var or=function(){this.ids=[],this.positions=[],this.indexed=!1};or.prototype.add=function(M,z,Z,le){this.ids.push(ur(M)),this.positions.push(z,Z,le)},or.prototype.getPositions=function(M){for(var z=ur(M),Z=0,le=this.ids.length-1;Z<le;){var Te=Z+le>>1;this.ids[Te]>=z?le=Te:Z=Te+1}for(var Pe=[];this.ids[Z]===z;){var je=this.positions[3*Z],Ke=this.positions[3*Z+1],st=this.positions[3*Z+2];Pe.push({index:je,start:Ke,end:st}),Z++}return Pe},or.serialize=function(M,z){var Z=new Float64Array(M.ids),le=new Uint32Array(M.positions);return Ar(Z,le,0,Z.length-1),z&&z.push(Z.buffer,le.buffer),{ids:Z,positions:le}},or.deserialize=function(M){var z=new or;return z.ids=M.ids,z.positions=M.positions,z.indexed=!0,z};var wr=Math.pow(2,53)-1;function ur(M){var z=+M;return!isNaN(z)&&z<=wr?z:xr(String(M))}function Ar(M,z,Z,le){for(;Z<le;){for(var Te=M[Z+le>>1],Pe=Z-1,je=le+1;;){do Pe++;while(M[Pe]<Te);do je--;while(M[je]>Te);if(Pe>=je)break;Pr(M,Pe,je),Pr(z,3*Pe,3*je),Pr(z,3*Pe+1,3*je+1),Pr(z,3*Pe+2,3*je+2)}je-Z<le-je?(Ar(M,z,Z,je),Z=je+1):(Ar(M,z,je+1,le),le=je)}}function Pr(M,z,Z){var le=M[z];M[z]=M[Z],M[Z]=le}kr("FeaturePositionMap",or);var Nr=function(M,z){this.gl=M.gl,this.location=z},jr=function(M){function z(Z,le){M.call(this,Z,le),this.current=0}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},z}(Nr),qr=function(M){function z(Z,le){M.call(this,Z,le),this.current=0}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},z}(Nr),Yr=function(M){function z(Z,le){M.call(this,Z,le),this.current=[0,0]}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},z}(Nr),gi=function(M){function z(Z,le){M.call(this,Z,le),this.current=[0,0,0]}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},z}(Nr),Li=function(M){function z(Z,le){M.call(this,Z,le),this.current=[0,0,0,0]}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},z}(Nr),la=function(M){function z(Z,le){M.call(this,Z,le),this.current=Sn.transparent}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},z}(Nr),Gi=new Float32Array(16),ta=function(M){function z(Z,le){M.call(this,Z,le),this.current=Gi}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var le=1;le<16;le++)if(Z[le]!==this.current[le]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},z}(Nr);function xi(M){return[nr(255*M.r,255*M.g),nr(255*M.b,255*M.a)]}var Xr=function(M,z,Z){this.value=M,this.uniformNames=z.map(function(le){return"u_"+le}),this.type=Z};Xr.prototype.setUniform=function(M,z,Z){M.set(Z.constantOr(this.value))},Xr.prototype.getBinding=function(M,z,Z){return this.type==="color"?new la(M,z):new qr(M,z)};var ki=function(M,z){this.uniformNames=z.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ki.prototype.setConstantPatternPositions=function(M,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=M.tlbr},ki.prototype.setUniform=function(M,z,Z,le){var Te=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Te&&M.set(Te)},ki.prototype.getBinding=function(M,z,Z){return Z.substr(0,9)==="u_pattern"?new Li(M,z):new qr(M,z)};var li=function(M,z,Z,le){this.expression=M,this.type=Z,this.maxValue=0,this.paintVertexAttributes=z.map(function(Te){return{name:"a_"+Te,type:"Float32",components:Z==="color"?2:1,offset:0}}),this.paintVertexArray=new le};li.prototype.populatePaintArray=function(M,z,Z,le,Te){var Pe=this.paintVertexArray.length,je=this.expression.evaluate(new Wr(0),z,{},le,[],Te);this.paintVertexArray.resize(M),this._setPaintValue(Pe,M,je)},li.prototype.updatePaintArray=function(M,z,Z,le){var Te=this.expression.evaluate({zoom:0},Z,le);this._setPaintValue(M,z,Te)},li.prototype._setPaintValue=function(M,z,Z){if(this.type==="color")for(var le=xi(Z),Te=M;Te<z;Te++)this.paintVertexArray.emplace(Te,le[0],le[1]);else{for(var Pe=M;Pe<z;Pe++)this.paintVertexArray.emplace(Pe,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},li.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},li.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var $r=function(M,z,Z,le,Te,Pe){this.expression=M,this.uniformNames=z.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=le,this.zoom=Te,this.maxValue=0,this.paintVertexAttributes=z.map(function(je){return{name:"a_"+je,type:"Float32",components:Z==="color"?4:2,offset:0}}),this.paintVertexArray=new Pe};$r.prototype.populatePaintArray=function(M,z,Z,le,Te){var Pe=this.expression.evaluate(new Wr(this.zoom),z,{},le,[],Te),je=this.expression.evaluate(new Wr(this.zoom+1),z,{},le,[],Te),Ke=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Ke,M,Pe,je)},$r.prototype.updatePaintArray=function(M,z,Z,le){var Te=this.expression.evaluate({zoom:this.zoom},Z,le),Pe=this.expression.evaluate({zoom:this.zoom+1},Z,le);this._setPaintValue(M,z,Te,Pe)},$r.prototype._setPaintValue=function(M,z,Z,le){if(this.type==="color")for(var Te=xi(Z),Pe=xi(le),je=M;je<z;je++)this.paintVertexArray.emplace(je,Te[0],Te[1],Pe[0],Pe[1]);else{for(var Ke=M;Ke<z;Ke++)this.paintVertexArray.emplace(Ke,Z,le);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(le))}},$r.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},$r.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},$r.prototype.setUniform=function(M,z){var Z=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,le=c(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);M.set(le)},$r.prototype.getBinding=function(M,z,Z){return new qr(M,z)};var Ai=function(M,z,Z,le,Te,Pe){this.expression=M,this.type=z,this.useIntegerZoom=Z,this.zoom=le,this.layerId=Pe,this.zoomInPaintVertexArray=new Te,this.zoomOutPaintVertexArray=new Te};Ai.prototype.populatePaintArray=function(M,z,Z){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(le,M,z.patterns&&z.patterns[this.layerId],Z)},Ai.prototype.updatePaintArray=function(M,z,Z,le,Te){this._setPaintValues(M,z,Z.patterns&&Z.patterns[this.layerId],Te)},Ai.prototype._setPaintValues=function(M,z,Z,le){if(le&&Z){var Te=Z.min,Pe=Z.mid,je=Z.max,Ke=le[Te],st=le[Pe],yt=le[je];if(Ke&&st&&yt)for(var bt=M;bt<z;bt++)this.zoomInPaintVertexArray.emplace(bt,st.tl[0],st.tl[1],st.br[0],st.br[1],Ke.tl[0],Ke.tl[1],Ke.br[0],Ke.br[1],st.pixelRatio,Ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(bt,st.tl[0],st.tl[1],st.br[0],st.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],st.pixelRatio,yt.pixelRatio)}},Ai.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,cr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,cr.members,this.expression.isStateDependent))},Ai.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ci=function(M,z,Z){this.binders={},this._buffers=[];var le=[];for(var Te in M.paint._values)if(Z(Te)){var Pe=M.paint.get(Te);if(Pe instanceof di&&To(Pe.property.specification)){var je=Ss(Te,M.type),Ke=Pe.value,st=Pe.property.specification.type,yt=Pe.property.useIntegerZoom,bt=Pe.property.specification["property-type"],Ot=bt==="cross-faded"||bt==="cross-faded-data-driven";if(Ke.kind==="constant")this.binders[Te]=Ot?new ki(Ke.value,je):new Xr(Ke.value,je,st),le.push("/u_"+Te);else if(Ke.kind==="source"||Ot){var Ut=Es(Te,st,"source");this.binders[Te]=Ot?new Ai(Ke,st,yt,z,Ut,M.id):new li(Ke,je,st,Ut),le.push("/a_"+Te)}else{var Bt=Es(Te,st,"composite");this.binders[Te]=new $r(Ke,je,st,yt,z,Bt),le.push("/z_"+Te)}}}this.cacheKey=le.sort().join("")};Ci.prototype.getMaxValue=function(M){var z=this.binders[M];return z instanceof li||z instanceof $r?z.maxValue:0},Ci.prototype.populatePaintArrays=function(M,z,Z,le,Te){for(var Pe in this.binders){var je=this.binders[Pe];(je instanceof li||je instanceof $r||je instanceof Ai)&&je.populatePaintArray(M,z,Z,le,Te)}},Ci.prototype.setConstantPatternPositions=function(M,z){for(var Z in this.binders){var le=this.binders[Z];le instanceof ki&&le.setConstantPatternPositions(M,z)}},Ci.prototype.updatePaintArrays=function(M,z,Z,le,Te){var Pe=!1;for(var je in M)for(var Ke=0,st=z.getPositions(je);Ke<st.length;Ke+=1){var yt=st[Ke],bt=Z.feature(yt.index);for(var Ot in this.binders){var Ut=this.binders[Ot];if((Ut instanceof li||Ut instanceof $r||Ut instanceof Ai)&&Ut.expression.isStateDependent===!0){var Bt=le.paint.get(Ot);Ut.expression=Bt.value,Ut.updatePaintArray(yt.start,yt.end,bt,M[je],Te),Pe=!0}}}return Pe},Ci.prototype.defines=function(){var M=[];for(var z in this.binders){var Z=this.binders[z];(Z instanceof Xr||Z instanceof ki)&&M.push.apply(M,Z.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return M},Ci.prototype.getBinderAttributes=function(){var M=[];for(var z in this.binders){var Z=this.binders[z];if(Z instanceof li||Z instanceof $r)for(var le=0;le<Z.paintVertexAttributes.length;le++)M.push(Z.paintVertexAttributes[le].name);else if(Z instanceof Ai)for(var Te=0;Te<cr.members.length;Te++)M.push(cr.members[Te].name)}return M},Ci.prototype.getBinderUniforms=function(){var M=[];for(var z in this.binders){var Z=this.binders[z];if(Z instanceof Xr||Z instanceof ki||Z instanceof $r)for(var le=0,Te=Z.uniformNames;le<Te.length;le+=1){var Pe=Te[le];M.push(Pe)}}return M},Ci.prototype.getPaintVertexBuffers=function(){return this._buffers},Ci.prototype.getUniforms=function(M,z){var Z=[];for(var le in this.binders){var Te=this.binders[le];if(Te instanceof Xr||Te instanceof ki||Te instanceof $r)for(var Pe=0,je=Te.uniformNames;Pe<je.length;Pe+=1){var Ke=je[Pe];if(z[Ke]){var st=Te.getBinding(M,z[Ke],Ke);Z.push({name:Ke,property:le,binding:st})}}}return Z},Ci.prototype.setUniforms=function(M,z,Z,le){for(var Te=0,Pe=z;Te<Pe.length;Te+=1){var je=Pe[Te],Ke=je.name,st=je.property,yt=je.binding;this.binders[st].setUniform(yt,le,Z.get(st),Ke)}},Ci.prototype.updatePaintBuffers=function(M){for(var z in this._buffers=[],this.binders){var Z=this.binders[z];if(M&&Z instanceof Ai){var le=M.fromScale===2?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(Z instanceof li||Z instanceof $r)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},Ci.prototype.upload=function(M){for(var z in this.binders){var Z=this.binders[z];(Z instanceof li||Z instanceof $r||Z instanceof Ai)&&Z.upload(M)}this.updatePaintBuffers()},Ci.prototype.destroy=function(){for(var M in this.binders){var z=this.binders[M];(z instanceof li||z instanceof $r||z instanceof Ai)&&z.destroy()}};var Ni=function(M,z,Z){Z===void 0&&(Z=function(){return!0}),this.programConfigurations={};for(var le=0,Te=M;le<Te.length;le+=1){var Pe=Te[le];this.programConfigurations[Pe.id]=new Ci(Pe,z,Z)}this.needsUpload=!1,this._featureMap=new or,this._bufferOffset=0};function Ss(M,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(z+"-","").replace(/-/g,"_")]}function Es(M,z,Z){var le={color:{source:ot,composite:xt},number:{source:Ue,composite:ot}},Te=function(Pe){return{"line-pattern":{source:B,composite:B},"fill-pattern":{source:B,composite:B},"fill-extrusion-pattern":{source:B,composite:B}}[Pe]}(M);return Te&&Te[Z]||le[z][Z]}Ni.prototype.populatePaintArrays=function(M,z,Z,le,Te,Pe){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(M,z,le,Te,Pe);z.id!==void 0&&this._featureMap.add(z.id,Z,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},Ni.prototype.updatePaintArrays=function(M,z,Z,le){for(var Te=0,Pe=Z;Te<Pe.length;Te+=1){var je=Pe[Te];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(M,this._featureMap,z,je,le)||this.needsUpload}},Ni.prototype.get=function(M){return this.programConfigurations[M]},Ni.prototype.upload=function(M){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(M);this.needsUpload=!1}},Ni.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},kr("ConstantBinder",Xr),kr("CrossFadedConstantBinder",ki),kr("SourceExpressionBinder",li),kr("CrossFadedCompositeBinder",Ai),kr("CompositeExpressionBinder",$r),kr("ProgramConfiguration",Ci,{omit:["_buffers"]}),kr("ProgramConfigurationSet",Ni);var Qr=8192,al=Math.pow(2,14)-1,Hs=-al-1;function Co(M){for(var z=Qr/M.extent,Z=M.loadGeometry(),le=0;le<Z.length;le++)for(var Te=Z[le],Pe=0;Pe<Te.length;Pe++){var je=Te[Pe],Ke=Math.round(je.x*z),st=Math.round(je.y*z);je.x=c(Ke,Hs,al),je.y=c(st,Hs,al),(Ke<je.x||Ke>je.x+1||st<je.y||st>je.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return Z}function Mi(M,z){return{type:M.type,id:M.id,properties:M.properties,geometry:z?Co(M):[]}}function Ca(M,z,Z,le,Te){M.emplaceBack(2*z+(le+1)/2,2*Z+(Te+1)/2)}var Ji=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Ko,this.indexArray=new xe,this.segments=new Nn,this.programConfigurations=new Ni(M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Gl(M,z){for(var Z=0;Z<M.length;Z++)if(ol(z,M[Z]))return!0;for(var le=0;le<z.length;le++)if(ol(M,z[le]))return!0;return!!Il(M,z)}function Tf(M,z,Z){return!!ol(M,z)||!!Ol(z,M,Z)}function xu(M,z){if(M.length===1)return _u(z,M[0]);for(var Z=0;Z<z.length;Z++)for(var le=z[Z],Te=0;Te<le.length;Te++)if(ol(M,le[Te]))return!0;for(var Pe=0;Pe<M.length;Pe++)if(_u(z,M[Pe]))return!0;for(var je=0;je<z.length;je++)if(Il(M,z[je]))return!0;return!1}function kf(M,z,Z){if(M.length>1){if(Il(M,z))return!0;for(var le=0;le<z.length;le++)if(Ol(z[le],M,Z))return!0}for(var Te=0;Te<M.length;Te++)if(Ol(M[Te],z,Z))return!0;return!1}function Il(M,z){if(M.length===0||z.length===0)return!1;for(var Z=0;Z<M.length-1;Z++)for(var le=M[Z],Te=M[Z+1],Pe=0;Pe<z.length-1;Pe++)if(Af(le,Te,z[Pe],z[Pe+1]))return!0;return!1}function Af(M,z,Z,le){return P(M,Z,le)!==P(z,Z,le)&&P(M,z,Z)!==P(M,z,le)}function Ol(M,z,Z){var le=Z*Z;if(z.length===1)return M.distSqr(z[0])<le;for(var Te=1;Te<z.length;Te++)if(bu(M,z[Te-1],z[Te])<le)return!0;return!1}function bu(M,z,Z){var le=z.distSqr(Z);if(le===0)return M.distSqr(z);var Te=((M.x-z.x)*(Z.x-z.x)+(M.y-z.y)*(Z.y-z.y))/le;return Te<0?M.distSqr(z):Te>1?M.distSqr(Z):M.distSqr(Z.sub(z)._mult(Te)._add(z))}function _u(M,z){for(var Z,le,Te,Pe=!1,je=0;je<M.length;je++)for(var Ke=0,st=(Z=M[je]).length-1;Ke<Z.length;st=Ke++)le=Z[Ke],Te=Z[st],le.y>z.y!=Te.y>z.y&&z.x<(Te.x-le.x)*(z.y-le.y)/(Te.y-le.y)+le.x&&(Pe=!Pe);return Pe}function ol(M,z){for(var Z=!1,le=0,Te=M.length-1;le<M.length;Te=le++){var Pe=M[le],je=M[Te];Pe.y>z.y!=je.y>z.y&&z.x<(je.x-Pe.x)*(z.y-Pe.y)/(je.y-Pe.y)+Pe.x&&(Z=!Z)}return Z}function Gd(M,z,Z){var le=Z[0],Te=Z[2];if(M.x<le.x&&z.x<le.x||M.x>Te.x&&z.x>Te.x||M.y<le.y&&z.y<le.y||M.y>Te.y&&z.y>Te.y)return!1;var Pe=P(M,z,Z[0]);return Pe!==P(M,z,Z[1])||Pe!==P(M,z,Z[2])||Pe!==P(M,z,Z[3])}function Fc(M,z,Z){var le=z.paint.get(M).value;return le.kind==="constant"?le.value:Z.programConfigurations.get(z.id).getMaxValue(M)}function wu(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Tu(M,z,Z,le,Te){if(!z[0]&&!z[1])return M;var Pe=t.convert(z)._mult(Te);Z==="viewport"&&Pe._rotate(-le);for(var je=[],Ke=0;Ke<M.length;Ke++){var st=M[Ke];je.push(st.sub(Pe))}return je}Ji.prototype.populate=function(M,z,Z){var le=this.layers[0],Te=[],Pe=null;le.type==="circle"&&(Pe=le.layout.get("circle-sort-key"));for(var je=0,Ke=M;je<Ke.length;je+=1){var st=Ke[je],yt=st.feature,bt=st.id,Ot=st.index,Ut=st.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,nn=Mi(yt,Bt);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),nn,Z)){var on=Pe?Pe.evaluate(nn,{},Z):void 0,_n={id:bt,properties:yt.properties,type:yt.type,sourceLayerIndex:Ut,index:Ot,geometry:Bt?nn.geometry:Co(yt),patterns:{},sortKey:on};Te.push(_n)}}Pe&&Te.sort(function(_r,Tr){return _r.sortKey-Tr.sortKey});for(var yn=0,Dn=Te;yn<Dn.length;yn+=1){var zn=Dn[yn],Un=zn,Zn=Un.geometry,rr=Un.index,vr=Un.sourceLayerIndex,pr=M[rr].feature;this.addFeature(zn,Zn,rr,Z),z.featureIndex.insert(pr,Zn,rr,vr,this.index)}},Ji.prototype.update=function(M,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,Z)},Ji.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ji.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ji.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Pn),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Ji.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ji.prototype.addFeature=function(M,z,Z,le){for(var Te=0,Pe=z;Te<Pe.length;Te+=1)for(var je=0,Ke=Pe[Te];je<Ke.length;je+=1){var st=Ke[je],yt=st.x,bt=st.y;if(!(yt<0||yt>=Qr||bt<0||bt>=Qr)){var Ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),Ut=Ot.vertexLength;Ca(this.layoutVertexArray,yt,bt,-1,-1),Ca(this.layoutVertexArray,yt,bt,1,-1),Ca(this.layoutVertexArray,yt,bt,1,1),Ca(this.layoutVertexArray,yt,bt,-1,1),this.indexArray.emplaceBack(Ut,Ut+1,Ut+2),this.indexArray.emplaceBack(Ut,Ut+3,Ut+2),Ot.vertexLength+=4,Ot.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,{},le)},kr("CircleBucket",Ji,{omit:["layers"]});var Wd=new Oi({"circle-sort-key":new Or(Ge.layout_circle["circle-sort-key"])}),Yd={paint:new Oi({"circle-radius":new Or(Ge.paint_circle["circle-radius"]),"circle-color":new Or(Ge.paint_circle["circle-color"]),"circle-blur":new Or(Ge.paint_circle["circle-blur"]),"circle-opacity":new Or(Ge.paint_circle["circle-opacity"]),"circle-translate":new Sr(Ge.paint_circle["circle-translate"]),"circle-translate-anchor":new Sr(Ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sr(Ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sr(Ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Or(Ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Or(Ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Or(Ge.paint_circle["circle-stroke-opacity"])}),layout:Wd},Jo=typeof Float32Array<"u"?Float32Array:Array;function Mf(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Ah(M,z,Z){var le=z[0],Te=z[1],Pe=z[2],je=z[3],Ke=z[4],st=z[5],yt=z[6],bt=z[7],Ot=z[8],Ut=z[9],Bt=z[10],nn=z[11],on=z[12],_n=z[13],yn=z[14],Dn=z[15],zn=Z[0],Un=Z[1],Zn=Z[2],rr=Z[3];return M[0]=zn*le+Un*Ke+Zn*Ot+rr*on,M[1]=zn*Te+Un*st+Zn*Ut+rr*_n,M[2]=zn*Pe+Un*yt+Zn*Bt+rr*yn,M[3]=zn*je+Un*bt+Zn*nn+rr*Dn,zn=Z[4],Un=Z[5],Zn=Z[6],rr=Z[7],M[4]=zn*le+Un*Ke+Zn*Ot+rr*on,M[5]=zn*Te+Un*st+Zn*Ut+rr*_n,M[6]=zn*Pe+Un*yt+Zn*Bt+rr*yn,M[7]=zn*je+Un*bt+Zn*nn+rr*Dn,zn=Z[8],Un=Z[9],Zn=Z[10],rr=Z[11],M[8]=zn*le+Un*Ke+Zn*Ot+rr*on,M[9]=zn*Te+Un*st+Zn*Ut+rr*_n,M[10]=zn*Pe+Un*yt+Zn*Bt+rr*yn,M[11]=zn*je+Un*bt+Zn*nn+rr*Dn,zn=Z[12],Un=Z[13],Zn=Z[14],rr=Z[15],M[12]=zn*le+Un*Ke+Zn*Ot+rr*on,M[13]=zn*Te+Un*st+Zn*Ut+rr*_n,M[14]=zn*Pe+Un*yt+Zn*Bt+rr*yn,M[15]=zn*je+Un*bt+Zn*nn+rr*Dn,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,z=0,Z=arguments.length;Z--;)z+=M[Z]*M[Z];return Math.sqrt(z)});var Zd=Ah,ku,Xd=function(M,z,Z){return M[0]=z[0]-Z[0],M[1]=z[1]-Z[1],M[2]=z[2]-Z[2],M};function Au(M,z,Z){var le=z[0],Te=z[1],Pe=z[2],je=z[3];return M[0]=Z[0]*le+Z[4]*Te+Z[8]*Pe+Z[12]*je,M[1]=Z[1]*le+Z[5]*Te+Z[9]*Pe+Z[13]*je,M[2]=Z[2]*le+Z[6]*Te+Z[10]*Pe+Z[14]*je,M[3]=Z[3]*le+Z[7]*Te+Z[11]*Pe+Z[15]*je,M}ku=new Jo(3),Jo!=Float32Array&&(ku[0]=0,ku[1]=0,ku[2]=0),function(){var M=new Jo(4);Jo!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0)}();var Kd=function(M){var z=M[0],Z=M[1];return z*z+Z*Z},Jd=(function(){var M=new Jo(2);Jo!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function z(Z){M.call(this,Z,Yd)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new Ji(Z)},z.prototype.queryRadius=function(Z){var le=Z;return Fc("circle-radius",this,le)+Fc("circle-stroke-width",this,le)+wu(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(Z,le,Te,Pe,je,Ke,st,yt){for(var bt=Tu(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ke.angle,st),Ot=this.paint.get("circle-radius").evaluate(le,Te)+this.paint.get("circle-stroke-width").evaluate(le,Te),Ut=this.paint.get("circle-pitch-alignment")==="map",Bt=Ut?bt:function(vr,pr){return vr.map(function(_r){return Mh(_r,pr)})}(bt,yt),nn=Ut?Ot*st:Ot,on=0,_n=Pe;on<_n.length;on+=1)for(var yn=0,Dn=_n[on];yn<Dn.length;yn+=1){var zn=Dn[yn],Un=Ut?zn:Mh(zn,yt),Zn=nn,rr=Au([],[zn.x,zn.y,0,1],yt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Zn*=rr[3]/Ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Zn*=Ke.cameraToCenterDistance/rr[3]),Tf(Bt,Un,Zn))return!0}return!1},z}(ii));function Mh(M,z){var Z=Au([],[M.x,M.y,0,1],z);return new t(Z[0]/Z[3],Z[1]/Z[3])}var Sh=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(Ji);function Sf(M,z,Z,le){var Te=z.width,Pe=z.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==Te*Pe*Z)throw new RangeError("mismatched image size")}else le=new Uint8Array(Te*Pe*Z);return M.width=Te,M.height=Pe,M.data=le,M}function Eh(M,z,Z){var le=z.width,Te=z.height;if(le!==M.width||Te!==M.height){var Pe=Sf({},{width:le,height:Te},Z);Ef(M,Pe,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,le),height:Math.min(M.height,Te)},Z),M.width=le,M.height=Te,M.data=Pe.data}}function Ef(M,z,Z,le,Te,Pe){if(Te.width===0||Te.height===0)return z;if(Te.width>M.width||Te.height>M.height||Z.x>M.width-Te.width||Z.y>M.height-Te.height)throw new RangeError("out of range source coordinates for image copy");if(Te.width>z.width||Te.height>z.height||le.x>z.width-Te.width||le.y>z.height-Te.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=M.data,Ke=z.data,st=0;st<Te.height;st++)for(var yt=((Z.y+st)*M.width+Z.x)*Pe,bt=((le.y+st)*z.width+le.x)*Pe,Ot=0;Ot<Te.width*Pe;Ot++)Ke[bt+Ot]=je[yt+Ot];return z}kr("HeatmapBucket",Sh,{omit:["layers"]});var Wl=function(M,z){Sf(this,M,1,z)};Wl.prototype.resize=function(M){Eh(this,M,1)},Wl.prototype.clone=function(){return new Wl({width:this.width,height:this.height},new Uint8Array(this.data))},Wl.copy=function(M,z,Z,le,Te){Ef(M,z,Z,le,Te,1)};var vo=function(M,z){Sf(this,M,4,z)};vo.prototype.resize=function(M){Eh(this,M,4)},vo.prototype.replace=function(M,z){z?this.data.set(M):M instanceof Uint8ClampedArray?this.data=new Uint8Array(M.buffer):this.data=M},vo.prototype.clone=function(){return new vo({width:this.width,height:this.height},new Uint8Array(this.data))},vo.copy=function(M,z,Z,le,Te){Ef(M,z,Z,le,Te,4)},kr("AlphaImage",Wl),kr("RGBAImage",vo);var $d={paint:new Oi({"heatmap-radius":new Or(Ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Or(Ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sr(Ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lo(Ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sr(Ge.paint_heatmap["heatmap-opacity"])})};function Lh(M){var z={},Z=M.resolution||256,le=M.clips?M.clips.length:1,Te=M.image||new vo({width:Z,height:le}),Pe=function(nn,on,_n){z[M.evaluationKey]=_n;var yn=M.expression.evaluate(z);Te.data[nn+on+0]=Math.floor(255*yn.r/yn.a),Te.data[nn+on+1]=Math.floor(255*yn.g/yn.a),Te.data[nn+on+2]=Math.floor(255*yn.b/yn.a),Te.data[nn+on+3]=Math.floor(255*yn.a)};if(M.clips)for(var je=0,Ke=0;je<le;++je,Ke+=4*Z)for(var st=0,yt=0;st<Z;st++,yt+=4){var bt=st/(Z-1),Ot=M.clips[je];Pe(Ke,yt,Ot.start*(1-bt)+Ot.end*bt)}else for(var Ut=0,Bt=0;Ut<Z;Ut++,Bt+=4)Pe(0,Bt,Ut/(Z-1));return Te}var Qd=function(M){function z(Z){M.call(this,Z,$d),this._updateColorRamp()}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new Sh(Z)},z.prototype._handleSpecialPaintPropertyUpdate=function(Z){Z==="heatmap-color"&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){var Z=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Lh({expression:Z,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},z}(ii),e0={paint:new Oi({"hillshade-illumination-direction":new Sr(Ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Sr(Ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sr(Ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sr(Ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sr(Ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sr(Ge.paint_hillshade["hillshade-accent-color"])})},t0=function(M){function z(Z){M.call(this,Z,e0)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},z}(ii),n0=yi([{name:"a_pos",components:2,type:"Int16"}],4).members,Lf=Mu,r0=Mu;function Mu(M,z,Z){Z=Z||2;var le,Te,Pe,je,Ke,st,yt,bt=z&&z.length,Ot=bt?z[0]*Z:M.length,Ut=Ch(M,0,Ot,Z,!0),Bt=[];if(!Ut||Ut.next===Ut.prev)return Bt;if(bt&&(Ut=function(on,_n,yn,Dn){var zn,Un,Zn,rr=[];for(zn=0,Un=_n.length;zn<Un;zn++)(Zn=Ch(on,_n[zn]*Dn,zn<Un-1?_n[zn+1]*Dn:on.length,Dn,!1))===Zn.next&&(Zn.steiner=!0),rr.push(f0(Zn));for(rr.sort(l0),zn=0;zn<rr.length;zn++)c0(rr[zn],yn),yn=Dl(yn,yn.next);return yn}(M,z,Ut,Z)),M.length>80*Z){le=Pe=M[0],Te=je=M[1];for(var nn=Z;nn<Ot;nn+=Z)(Ke=M[nn])<le&&(le=Ke),(st=M[nn+1])<Te&&(Te=st),Ke>Pe&&(Pe=Ke),st>je&&(je=st);yt=(yt=Math.max(Pe-le,je-Te))!==0?1/yt:0}return Bc(Ut,Bt,Z,le,Te,yt),Bt}function Ch(M,z,Z,le,Te){var Pe,je;if(Te===If(M,z,Z,le)>0)for(Pe=z;Pe<Z;Pe+=le)je=Oh(Pe,M[Pe],M[Pe+1],je);else for(Pe=Z-le;Pe>=z;Pe-=le)je=Oh(Pe,M[Pe],M[Pe+1],je);return je&&Su(je,je.next)&&(jc(je),je=je.next),je}function Dl(M,z){if(!M)return M;z||(z=M);var Z,le=M;do if(Z=!1,le.steiner||!Su(le,le.next)&&na(le.prev,le,le.next)!==0)le=le.next;else{if(jc(le),(le=z=le.prev)===le.next)break;Z=!0}while(Z||le!==z);return z}function Bc(M,z,Z,le,Te,Pe,je){if(M){!je&&Pe&&function(bt,Ot,Ut,Bt){var nn=bt;do nn.z===null&&(nn.z=Cf(nn.x,nn.y,Ot,Ut,Bt)),nn.prevZ=nn.prev,nn.nextZ=nn.next,nn=nn.next;while(nn!==bt);nn.prevZ.nextZ=null,nn.prevZ=null,function(on){var _n,yn,Dn,zn,Un,Zn,rr,vr,pr=1;do{for(yn=on,on=null,Un=null,Zn=0;yn;){for(Zn++,Dn=yn,rr=0,_n=0;_n<pr&&(rr++,Dn=Dn.nextZ);_n++);for(vr=pr;rr>0||vr>0&&Dn;)rr!==0&&(vr===0||!Dn||yn.z<=Dn.z)?(zn=yn,yn=yn.nextZ,rr--):(zn=Dn,Dn=Dn.nextZ,vr--),Un?Un.nextZ=zn:on=zn,zn.prevZ=Un,Un=zn;yn=Dn}Un.nextZ=null,pr*=2}while(Zn>1)}(nn)}(M,le,Te,Pe);for(var Ke,st,yt=M;M.prev!==M.next;)if(Ke=M.prev,st=M.next,Pe?a0(M,le,Te,Pe):i0(M))z.push(Ke.i/Z),z.push(M.i/Z),z.push(st.i/Z),jc(M),M=st.next,yt=st.next;else if((M=st)===yt){je?je===1?Bc(M=o0(Dl(M),z,Z),z,Z,le,Te,Pe,2):je===2&&s0(M,z,Z,le,Te,Pe):Bc(Dl(M),z,Z,le,Te,Pe,1);break}}}function i0(M){var z=M.prev,Z=M,le=M.next;if(na(z,Z,le)>=0)return!1;for(var Te=M.next.next;Te!==M.prev;){if(oc(z.x,z.y,Z.x,Z.y,le.x,le.y,Te.x,Te.y)&&na(Te.prev,Te,Te.next)>=0)return!1;Te=Te.next}return!0}function a0(M,z,Z,le){var Te=M.prev,Pe=M,je=M.next;if(na(Te,Pe,je)>=0)return!1;for(var Ke=Te.x<Pe.x?Te.x<je.x?Te.x:je.x:Pe.x<je.x?Pe.x:je.x,st=Te.y<Pe.y?Te.y<je.y?Te.y:je.y:Pe.y<je.y?Pe.y:je.y,yt=Te.x>Pe.x?Te.x>je.x?Te.x:je.x:Pe.x>je.x?Pe.x:je.x,bt=Te.y>Pe.y?Te.y>je.y?Te.y:je.y:Pe.y>je.y?Pe.y:je.y,Ot=Cf(Ke,st,z,Z,le),Ut=Cf(yt,bt,z,Z,le),Bt=M.prevZ,nn=M.nextZ;Bt&&Bt.z>=Ot&&nn&&nn.z<=Ut;){if(Bt!==M.prev&&Bt!==M.next&&oc(Te.x,Te.y,Pe.x,Pe.y,je.x,je.y,Bt.x,Bt.y)&&na(Bt.prev,Bt,Bt.next)>=0||(Bt=Bt.prevZ,nn!==M.prev&&nn!==M.next&&oc(Te.x,Te.y,Pe.x,Pe.y,je.x,je.y,nn.x,nn.y)&&na(nn.prev,nn,nn.next)>=0))return!1;nn=nn.nextZ}for(;Bt&&Bt.z>=Ot;){if(Bt!==M.prev&&Bt!==M.next&&oc(Te.x,Te.y,Pe.x,Pe.y,je.x,je.y,Bt.x,Bt.y)&&na(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.prevZ}for(;nn&&nn.z<=Ut;){if(nn!==M.prev&&nn!==M.next&&oc(Te.x,Te.y,Pe.x,Pe.y,je.x,je.y,nn.x,nn.y)&&na(nn.prev,nn,nn.next)>=0)return!1;nn=nn.nextZ}return!0}function o0(M,z,Z){var le=M;do{var Te=le.prev,Pe=le.next.next;!Su(Te,Pe)&&Ph(Te,le,le.next,Pe)&&Nc(Te,Pe)&&Nc(Pe,Te)&&(z.push(Te.i/Z),z.push(le.i/Z),z.push(Pe.i/Z),jc(le),jc(le.next),le=M=Pe),le=le.next}while(le!==M);return Dl(le)}function s0(M,z,Z,le,Te,Pe){var je=M;do{for(var Ke=je.next.next;Ke!==je.prev;){if(je.i!==Ke.i&&h0(je,Ke)){var st=Ih(je,Ke);return je=Dl(je,je.next),st=Dl(st,st.next),Bc(je,z,Z,le,Te,Pe),void Bc(st,z,Z,le,Te,Pe)}Ke=Ke.next}je=je.next}while(je!==M)}function l0(M,z){return M.x-z.x}function c0(M,z){if(z=function(le,Te){var Pe,je=Te,Ke=le.x,st=le.y,yt=-1/0;do{if(st<=je.y&&st>=je.next.y&&je.next.y!==je.y){var bt=je.x+(st-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(bt<=Ke&&bt>yt){if(yt=bt,bt===Ke){if(st===je.y)return je;if(st===je.next.y)return je.next}Pe=je.x<je.next.x?je:je.next}}je=je.next}while(je!==Te);if(!Pe)return null;if(Ke===yt)return Pe;var Ot,Ut=Pe,Bt=Pe.x,nn=Pe.y,on=1/0;je=Pe;do Ke>=je.x&&je.x>=Bt&&Ke!==je.x&&oc(st<nn?Ke:yt,st,Bt,nn,st<nn?yt:Ke,st,je.x,je.y)&&(Ot=Math.abs(st-je.y)/(Ke-je.x),Nc(je,le)&&(Ot<on||Ot===on&&(je.x>Pe.x||je.x===Pe.x&&u0(Pe,je)))&&(Pe=je,on=Ot)),je=je.next;while(je!==Ut);return Pe}(M,z)){var Z=Ih(z,M);Dl(z,z.next),Dl(Z,Z.next)}}function u0(M,z){return na(M.prev,M,z.prev)<0&&na(z.next,M,M.next)<0}function Cf(M,z,Z,le,Te){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-Z)*Te)|M<<8))|M<<4))|M<<2))|M<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-le)*Te)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function f0(M){var z=M,Z=M;do(z.x<Z.x||z.x===Z.x&&z.y<Z.y)&&(Z=z),z=z.next;while(z!==M);return Z}function oc(M,z,Z,le,Te,Pe,je,Ke){return(Te-je)*(z-Ke)-(M-je)*(Pe-Ke)>=0&&(M-je)*(le-Ke)-(Z-je)*(z-Ke)>=0&&(Z-je)*(Pe-Ke)-(Te-je)*(le-Ke)>=0}function h0(M,z){return M.next.i!==z.i&&M.prev.i!==z.i&&!function(Z,le){var Te=Z;do{if(Te.i!==Z.i&&Te.next.i!==Z.i&&Te.i!==le.i&&Te.next.i!==le.i&&Ph(Te,Te.next,Z,le))return!0;Te=Te.next}while(Te!==Z);return!1}(M,z)&&(Nc(M,z)&&Nc(z,M)&&function(Z,le){var Te=Z,Pe=!1,je=(Z.x+le.x)/2,Ke=(Z.y+le.y)/2;do Te.y>Ke!=Te.next.y>Ke&&Te.next.y!==Te.y&&je<(Te.next.x-Te.x)*(Ke-Te.y)/(Te.next.y-Te.y)+Te.x&&(Pe=!Pe),Te=Te.next;while(Te!==Z);return Pe}(M,z)&&(na(M.prev,M,z.prev)||na(M,z.prev,z))||Su(M,z)&&na(M.prev,M,M.next)>0&&na(z.prev,z,z.next)>0)}function na(M,z,Z){return(z.y-M.y)*(Z.x-z.x)-(z.x-M.x)*(Z.y-z.y)}function Su(M,z){return M.x===z.x&&M.y===z.y}function Ph(M,z,Z,le){var Te=Lu(na(M,z,Z)),Pe=Lu(na(M,z,le)),je=Lu(na(Z,le,M)),Ke=Lu(na(Z,le,z));return Te!==Pe&&je!==Ke||!(Te!==0||!Eu(M,Z,z))||!(Pe!==0||!Eu(M,le,z))||!(je!==0||!Eu(Z,M,le))||!(Ke!==0||!Eu(Z,z,le))}function Eu(M,z,Z){return z.x<=Math.max(M.x,Z.x)&&z.x>=Math.min(M.x,Z.x)&&z.y<=Math.max(M.y,Z.y)&&z.y>=Math.min(M.y,Z.y)}function Lu(M){return M>0?1:M<0?-1:0}function Nc(M,z){return na(M.prev,M,M.next)<0?na(M,z,M.next)>=0&&na(M,M.prev,z)>=0:na(M,z,M.prev)<0||na(M,M.next,z)<0}function Ih(M,z){var Z=new Pf(M.i,M.x,M.y),le=new Pf(z.i,z.x,z.y),Te=M.next,Pe=z.prev;return M.next=z,z.prev=M,Z.next=Te,Te.prev=Z,le.next=Z,Z.prev=le,Pe.next=le,le.prev=Pe,le}function Oh(M,z,Z,le){var Te=new Pf(M,z,Z);return le?(Te.next=le.next,Te.prev=le,le.next.prev=Te,le.next=Te):(Te.prev=Te,Te.next=Te),Te}function jc(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function Pf(M,z,Z){this.i=M,this.x=z,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function If(M,z,Z,le){for(var Te=0,Pe=z,je=Z-le;Pe<Z;Pe+=le)Te+=(M[je]-M[Pe])*(M[Pe+1]+M[je+1]),je=Pe;return Te}function p0(M,z,Z,le,Te){Dh(M,z,Z||0,le||M.length-1,Te||d0)}function Dh(M,z,Z,le,Te){for(;le>Z;){if(le-Z>600){var Pe=le-Z+1,je=z-Z+1,Ke=Math.log(Pe),st=.5*Math.exp(2*Ke/3),yt=.5*Math.sqrt(Ke*st*(Pe-st)/Pe)*(je-Pe/2<0?-1:1);Dh(M,z,Math.max(Z,Math.floor(z-je*st/Pe+yt)),Math.min(le,Math.floor(z+(Pe-je)*st/Pe+yt)),Te)}var bt=M[z],Ot=Z,Ut=le;for(Uc(M,Z,z),Te(M[le],bt)>0&&Uc(M,Z,le);Ot<Ut;){for(Uc(M,Ot,Ut),Ot++,Ut--;Te(M[Ot],bt)<0;)Ot++;for(;Te(M[Ut],bt)>0;)Ut--}Te(M[Z],bt)===0?Uc(M,Z,Ut):Uc(M,++Ut,le),Ut<=z&&(Z=Ut+1),z<=Ut&&(le=Ut-1)}}function Uc(M,z,Z){var le=M[z];M[z]=M[Z],M[Z]=le}function d0(M,z){return M<z?-1:M>z?1:0}function Of(M,z){var Z=M.length;if(Z<=1)return[M];for(var le,Te,Pe=[],je=0;je<Z;je++){var Ke=C(M[je]);Ke!==0&&(M[je].area=Math.abs(Ke),Te===void 0&&(Te=Ke<0),Te===Ke<0?(le&&Pe.push(le),le=[M[je]]):le.push(M[je]))}if(le&&Pe.push(le),z>1)for(var st=0;st<Pe.length;st++)Pe[st].length<=z||(p0(Pe[st],z,1,Pe[st].length-1,g0),Pe[st]=Pe[st].slice(0,z));return Pe}function g0(M,z){return z.area-M.area}function Df(M,z,Z){for(var le=Z.patternDependencies,Te=!1,Pe=0,je=z;Pe<je.length;Pe+=1){var Ke=je[Pe].paint.get(M+"-pattern");Ke.isConstant()||(Te=!0);var st=Ke.constantOr(null);st&&(Te=!0,le[st.to]=!0,le[st.from]=!0)}return Te}function zf(M,z,Z,le,Te){for(var Pe=Te.patternDependencies,je=0,Ke=z;je<Ke.length;je+=1){var st=Ke[je],yt=st.paint.get(M+"-pattern").value;if(yt.kind!=="constant"){var bt=yt.evaluate({zoom:le-1},Z,{},Te.availableImages),Ot=yt.evaluate({zoom:le},Z,{},Te.availableImages),Ut=yt.evaluate({zoom:le+1},Z,{},Te.availableImages);bt=bt&&bt.name?bt.name:bt,Ot=Ot&&Ot.name?Ot.name:Ot,Ut=Ut&&Ut.name?Ut.name:Ut,Pe[bt]=!0,Pe[Ot]=!0,Pe[Ut]=!0,Z.patterns[st.id]={min:bt,mid:Ot,max:Ut}}}return Z}Mu.deviation=function(M,z,Z,le){var Te=z&&z.length,Pe=Te?z[0]*Z:M.length,je=Math.abs(If(M,0,Pe,Z));if(Te)for(var Ke=0,st=z.length;Ke<st;Ke++){var yt=z[Ke]*Z,bt=Ke<st-1?z[Ke+1]*Z:M.length;je-=Math.abs(If(M,yt,bt,Z))}var Ot=0;for(Ke=0;Ke<le.length;Ke+=3){var Ut=le[Ke]*Z,Bt=le[Ke+1]*Z,nn=le[Ke+2]*Z;Ot+=Math.abs((M[Ut]-M[nn])*(M[Bt+1]-M[Ut+1])-(M[Ut]-M[Bt])*(M[nn+1]-M[Ut+1]))}return je===0&&Ot===0?0:Math.abs((Ot-je)/je)},Mu.flatten=function(M){for(var z=M[0][0].length,Z={vertices:[],holes:[],dimensions:z},le=0,Te=0;Te<M.length;Te++){for(var Pe=0;Pe<M[Te].length;Pe++)for(var je=0;je<z;je++)Z.vertices.push(M[Te][Pe][je]);Te>0&&(le+=M[Te-1].length,Z.holes.push(le))}return Z},Lf.default=r0;var qs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ko,this.indexArray=new xe,this.indexArray2=new lt,this.programConfigurations=new Ni(M.layers,M.zoom),this.segments=new Nn,this.segments2=new Nn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};qs.prototype.populate=function(M,z,Z){this.hasPattern=Df("fill",this.layers,z);for(var le=this.layers[0].layout.get("fill-sort-key"),Te=[],Pe=0,je=M;Pe<je.length;Pe+=1){var Ke=je[Pe],st=Ke.feature,yt=Ke.id,bt=Ke.index,Ot=Ke.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,Bt=Mi(st,Ut);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),Bt,Z)){var nn=le?le.evaluate(Bt,{},Z,z.availableImages):void 0,on={id:yt,properties:st.properties,type:st.type,sourceLayerIndex:Ot,index:bt,geometry:Ut?Bt.geometry:Co(st),patterns:{},sortKey:nn};Te.push(on)}}le&&Te.sort(function(_r,Tr){return _r.sortKey-Tr.sortKey});for(var _n=0,yn=Te;_n<yn.length;_n+=1){var Dn=yn[_n],zn=Dn,Un=zn.geometry,Zn=zn.index,rr=zn.sourceLayerIndex;if(this.hasPattern){var vr=zf("fill",this.layers,Dn,this.zoom,z);this.patternFeatures.push(vr)}else this.addFeature(Dn,Un,Zn,Z,{});var pr=M[Zn].feature;z.featureIndex.insert(pr,Un,Zn,rr,this.index)}},qs.prototype.update=function(M,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,Z)},qs.prototype.addFeatures=function(M,z,Z){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Pe=Te[le];this.addFeature(Pe,Pe.geometry,Pe.index,z,Z)}},qs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,n0),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},qs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},qs.prototype.addFeature=function(M,z,Z,le,Te){for(var Pe=0,je=Of(z,500);Pe<je.length;Pe+=1){for(var Ke=je[Pe],st=0,yt=0,bt=Ke;yt<bt.length;yt+=1)st+=bt[yt].length;for(var Ot=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),Ut=Ot.vertexLength,Bt=[],nn=[],on=0,_n=Ke;on<_n.length;on+=1){var yn=_n[on];if(yn.length!==0){yn!==Ke[0]&&nn.push(Bt.length/2);var Dn=this.segments2.prepareSegment(yn.length,this.layoutVertexArray,this.indexArray2),zn=Dn.vertexLength;this.layoutVertexArray.emplaceBack(yn[0].x,yn[0].y),this.indexArray2.emplaceBack(zn+yn.length-1,zn),Bt.push(yn[0].x),Bt.push(yn[0].y);for(var Un=1;Un<yn.length;Un++)this.layoutVertexArray.emplaceBack(yn[Un].x,yn[Un].y),this.indexArray2.emplaceBack(zn+Un-1,zn+Un),Bt.push(yn[Un].x),Bt.push(yn[Un].y);Dn.vertexLength+=yn.length,Dn.primitiveLength+=yn.length}}for(var Zn=Lf(Bt,nn),rr=0;rr<Zn.length;rr+=3)this.indexArray.emplaceBack(Ut+Zn[rr],Ut+Zn[rr+1],Ut+Zn[rr+2]);Ot.vertexLength+=st,Ot.primitiveLength+=Zn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,Te,le)},kr("FillBucket",qs,{omit:["layers","patternFeatures"]});var m0=new Oi({"fill-sort-key":new Or(Ge.layout_fill["fill-sort-key"])}),v0={paint:new Oi({"fill-antialias":new Sr(Ge.paint_fill["fill-antialias"]),"fill-opacity":new Or(Ge.paint_fill["fill-opacity"]),"fill-color":new Or(Ge.paint_fill["fill-color"]),"fill-outline-color":new Or(Ge.paint_fill["fill-outline-color"]),"fill-translate":new Sr(Ge.paint_fill["fill-translate"]),"fill-translate-anchor":new Sr(Ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ea(Ge.paint_fill["fill-pattern"])}),layout:m0},y0=function(M){function z(Z){M.call(this,Z,v0)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(Z,le){M.prototype.recalculate.call(this,Z,le);var Te=this.paint._values["fill-outline-color"];Te.value.kind==="constant"&&Te.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(Z){return new qs(Z)},z.prototype.queryRadius=function(){return wu(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(Z,le,Te,Pe,je,Ke,st){return xu(Tu(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ke.angle,st),Pe)},z.prototype.isTileClipped=function(){return!0},z}(ii),x0=yi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,zh=sc;function sc(M,z,Z,le,Te){this.properties={},this.extent=Z,this.type=0,this._pbf=M,this._geometry=-1,this._keys=le,this._values=Te,M.readFields(b0,this,z)}function b0(M,z,Z){M==1?z.id=Z.readVarint():M==2?function(le,Te){for(var Pe=le.readVarint()+le.pos;le.pos<Pe;){var je=Te._keys[le.readVarint()],Ke=Te._values[le.readVarint()];Te.properties[je]=Ke}}(Z,z):M==3?z.type=Z.readVarint():M==4&&(z._geometry=Z.pos)}function _0(M){for(var z,Z,le=0,Te=0,Pe=M.length,je=Pe-1;Te<Pe;je=Te++)z=M[Te],le+=((Z=M[je]).x-z.x)*(z.y+Z.y);return le}sc.types=["Unknown","Point","LineString","Polygon"],sc.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var z,Z=M.readVarint()+M.pos,le=1,Te=0,Pe=0,je=0,Ke=[];M.pos<Z;){if(Te<=0){var st=M.readVarint();le=7&st,Te=st>>3}if(Te--,le===1||le===2)Pe+=M.readSVarint(),je+=M.readSVarint(),le===1&&(z&&Ke.push(z),z=[]),z.push(new t(Pe,je));else{if(le!==7)throw new Error("unknown command "+le);z&&z.push(z[0].clone())}}return z&&Ke.push(z),Ke},sc.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var z=M.readVarint()+M.pos,Z=1,le=0,Te=0,Pe=0,je=1/0,Ke=-1/0,st=1/0,yt=-1/0;M.pos<z;){if(le<=0){var bt=M.readVarint();Z=7&bt,le=bt>>3}if(le--,Z===1||Z===2)(Te+=M.readSVarint())<je&&(je=Te),Te>Ke&&(Ke=Te),(Pe+=M.readSVarint())<st&&(st=Pe),Pe>yt&&(yt=Pe);else if(Z!==7)throw new Error("unknown command "+Z)}return[je,st,Ke,yt]},sc.prototype.toGeoJSON=function(M,z,Z){var le,Te,Pe=this.extent*Math.pow(2,Z),je=this.extent*M,Ke=this.extent*z,st=this.loadGeometry(),yt=sc.types[this.type];function bt(Bt){for(var nn=0;nn<Bt.length;nn++){var on=Bt[nn],_n=180-360*(on.y+Ke)/Pe;Bt[nn]=[360*(on.x+je)/Pe-180,360/Math.PI*Math.atan(Math.exp(_n*Math.PI/180))-90]}}switch(this.type){case 1:var Ot=[];for(le=0;le<st.length;le++)Ot[le]=st[le][0];bt(st=Ot);break;case 2:for(le=0;le<st.length;le++)bt(st[le]);break;case 3:for(st=function(Bt){var nn=Bt.length;if(nn<=1)return[Bt];for(var on,_n,yn=[],Dn=0;Dn<nn;Dn++){var zn=_0(Bt[Dn]);zn!==0&&(_n===void 0&&(_n=zn<0),_n===zn<0?(on&&yn.push(on),on=[Bt[Dn]]):on.push(Bt[Dn]))}return on&&yn.push(on),yn}(st),le=0;le<st.length;le++)for(Te=0;Te<st[le].length;Te++)bt(st[le][Te])}st.length===1?st=st[0]:yt="Multi"+yt;var Ut={type:"Feature",geometry:{type:yt,coordinates:st},properties:this.properties};return"id"in this&&(Ut.id=this.id),Ut};var Rh=Fh;function Fh(M,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(w0,this,z),this.length=this._features.length}function w0(M,z,Z){M===15?z.version=Z.readVarint():M===1?z.name=Z.readString():M===5?z.extent=Z.readVarint():M===2?z._features.push(Z.pos):M===3?z._keys.push(Z.readString()):M===4&&z._values.push(function(le){for(var Te=null,Pe=le.readVarint()+le.pos;le.pos<Pe;){var je=le.readVarint()>>3;Te=je===1?le.readString():je===2?le.readFloat():je===3?le.readDouble():je===4?le.readVarint64():je===5?le.readVarint():je===6?le.readSVarint():je===7?le.readBoolean():null}return Te}(Z))}function T0(M,z,Z){if(M===3){var le=new Rh(Z,Z.readVarint()+Z.pos);le.length&&(z[le.name]=le)}}Fh.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var z=this._pbf.readVarint()+this._pbf.pos;return new zh(this._pbf,z,this.extent,this._keys,this._values)};var lc={VectorTile:function(M,z){this.layers=M.readFields(T0,{},z)},VectorTileFeature:zh,VectorTileLayer:Rh},k0=lc.VectorTileFeature.types,Rf=Math.pow(2,13);function Vc(M,z,Z,le,Te,Pe,je,Ke){M.emplaceBack(z,Z,2*Math.floor(le*Rf)+je,Te*Rf*2,Pe*Rf*2,Math.round(Ke))}var Gs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new xe,this.programConfigurations=new Ni(M.layers,M.zoom),this.segments=new Nn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function A0(M,z){return M.x===z.x&&(M.x<0||M.x>Qr)||M.y===z.y&&(M.y<0||M.y>Qr)}Gs.prototype.populate=function(M,z,Z){this.features=[],this.hasPattern=Df("fill-extrusion",this.layers,z);for(var le=0,Te=M;le<Te.length;le+=1){var Pe=Te[le],je=Pe.feature,Ke=Pe.id,st=Pe.index,yt=Pe.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Ot=Mi(je,bt);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),Ot,Z)){var Ut={id:Ke,sourceLayerIndex:yt,index:st,geometry:bt?Ot.geometry:Co(je),properties:je.properties,type:je.type,patterns:{}};this.hasPattern?this.features.push(zf("fill-extrusion",this.layers,Ut,this.zoom,z)):this.addFeature(Ut,Ut.geometry,st,Z,{}),z.featureIndex.insert(je,Ut.geometry,st,yt,this.index,!0)}}},Gs.prototype.addFeatures=function(M,z,Z){for(var le=0,Te=this.features;le<Te.length;le+=1){var Pe=Te[le],je=Pe.geometry;this.addFeature(Pe,je,Pe.index,z,Z)}},Gs.prototype.update=function(M,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,Z)},Gs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,x0),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gs.prototype.addFeature=function(M,z,Z,le,Te){for(var Pe=0,je=Of(z,500);Pe<je.length;Pe+=1){for(var Ke=je[Pe],st=0,yt=0,bt=Ke;yt<bt.length;yt+=1)st+=bt[yt].length;for(var Ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ut=0,Bt=Ke;Ut<Bt.length;Ut+=1){var nn=Bt[Ut];if(nn.length!==0&&!((Jr=nn).every(function(Vr){return Vr.x<0})||Jr.every(function(Vr){return Vr.x>Qr})||Jr.every(function(Vr){return Vr.y<0})||Jr.every(function(Vr){return Vr.y>Qr})))for(var on=0,_n=0;_n<nn.length;_n++){var yn=nn[_n];if(_n>=1){var Dn=nn[_n-1];if(!A0(yn,Dn)){Ot.vertexLength+4>Nn.MAX_VERTEX_ARRAY_LENGTH&&(Ot=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var zn=yn.sub(Dn)._perp()._unit(),Un=Dn.dist(yn);on+Un>32768&&(on=0),Vc(this.layoutVertexArray,yn.x,yn.y,zn.x,zn.y,0,0,on),Vc(this.layoutVertexArray,yn.x,yn.y,zn.x,zn.y,0,1,on),on+=Un,Vc(this.layoutVertexArray,Dn.x,Dn.y,zn.x,zn.y,0,0,on),Vc(this.layoutVertexArray,Dn.x,Dn.y,zn.x,zn.y,0,1,on);var Zn=Ot.vertexLength;this.indexArray.emplaceBack(Zn,Zn+2,Zn+1),this.indexArray.emplaceBack(Zn+1,Zn+2,Zn+3),Ot.vertexLength+=4,Ot.primitiveLength+=2}}}}if(Ot.vertexLength+st>Nn.MAX_VERTEX_ARRAY_LENGTH&&(Ot=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),k0[M.type]==="Polygon"){for(var rr=[],vr=[],pr=Ot.vertexLength,_r=0,Tr=Ke;_r<Tr.length;_r+=1){var Br=Tr[_r];if(Br.length!==0){Br!==Ke[0]&&vr.push(rr.length/2);for(var Cr=0;Cr<Br.length;Cr++){var Fr=Br[Cr];Vc(this.layoutVertexArray,Fr.x,Fr.y,0,0,1,1,0),rr.push(Fr.x),rr.push(Fr.y)}}}for(var Ir=Lf(rr,vr),Lr=0;Lr<Ir.length;Lr+=3)this.indexArray.emplaceBack(pr+Ir[Lr],pr+Ir[Lr+2],pr+Ir[Lr+1]);Ot.primitiveLength+=Ir.length/3,Ot.vertexLength+=st}}var Jr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,Te,le)},kr("FillExtrusionBucket",Gs,{omit:["layers","features"]});var M0={paint:new Oi({"fill-extrusion-opacity":new Sr(Ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Or(Ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sr(Ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sr(Ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ea(Ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Or(Ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Or(Ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sr(Ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},S0=function(M){function z(Z){M.call(this,Z,M0)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(Z){return new Gs(Z)},z.prototype.queryRadius=function(){return wu(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(Z,le,Te,Pe,je,Ke,st,yt){var bt=Tu(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ke.angle,st),Ot=this.paint.get("fill-extrusion-height").evaluate(le,Te),Ut=this.paint.get("fill-extrusion-base").evaluate(le,Te),Bt=function(on,_n,yn,Dn){for(var zn=[],Un=0,Zn=on;Un<Zn.length;Un+=1){var rr=Zn[Un],vr=[rr.x,rr.y,Dn,1];Au(vr,vr,_n),zn.push(new t(vr[0]/vr[3],vr[1]/vr[3]))}return zn}(bt,yt,0,0),nn=function(on,_n,yn,Dn){for(var zn=[],Un=[],Zn=Dn[8]*_n,rr=Dn[9]*_n,vr=Dn[10]*_n,pr=Dn[11]*_n,_r=Dn[8]*yn,Tr=Dn[9]*yn,Br=Dn[10]*yn,Cr=Dn[11]*yn,Fr=0,Ir=on;Fr<Ir.length;Fr+=1){for(var Lr=[],Jr=[],Vr=0,_i=Ir[Fr];Vr<_i.length;Vr+=1){var Rr=_i[Vr],vi=Rr.x,Ei=Rr.y,Pi=Dn[0]*vi+Dn[4]*Ei+Dn[12],Ii=Dn[1]*vi+Dn[5]*Ei+Dn[13],wi=Dn[2]*vi+Dn[6]*Ei+Dn[14],aa=Dn[3]*vi+Dn[7]*Ei+Dn[15],Fi=wi+vr,va=aa+pr,Pa=Pi+_r,Ta=Ii+Tr,eo=wi+Br,ka=aa+Cr,ca=new t((Pi+Zn)/va,(Ii+rr)/va);ca.z=Fi/va,Lr.push(ca);var Aa=new t(Pa/ka,Ta/ka);Aa.z=eo/ka,Jr.push(Aa)}zn.push(Lr),Un.push(Jr)}return[zn,Un]}(Pe,Ut,Ot,yt);return function(on,_n,yn){var Dn=1/0;xu(yn,_n)&&(Dn=Bh(yn,_n[0]));for(var zn=0;zn<_n.length;zn++)for(var Un=_n[zn],Zn=on[zn],rr=0;rr<Un.length-1;rr++){var vr=Un[rr],pr=Un[rr+1],_r=Zn[rr],Tr=[vr,pr,Zn[rr+1],_r,vr];Gl(yn,Tr)&&(Dn=Math.min(Dn,Bh(yn,Tr)))}return Dn!==1/0&&Dn}(nn[0],nn[1],Bt)},z}(ii);function Hc(M,z){return M.x*z.x+M.y*z.y}function Bh(M,z){if(M.length===1){for(var Z,le=0,Te=z[le++];!Z||Te.equals(Z);)if(!(Z=z[le++]))return 1/0;for(;le<z.length;le++){var Pe=z[le],je=M[0],Ke=Z.sub(Te),st=Pe.sub(Te),yt=je.sub(Te),bt=Hc(Ke,Ke),Ot=Hc(Ke,st),Ut=Hc(st,st),Bt=Hc(yt,Ke),nn=Hc(yt,st),on=bt*Ut-Ot*Ot,_n=(Ut*Bt-Ot*nn)/on,yn=(bt*nn-Ot*Bt)/on,Dn=1-_n-yn,zn=Te.z*Dn+Z.z*_n+Pe.z*yn;if(isFinite(zn))return zn}return 1/0}for(var Un=1/0,Zn=0,rr=z;Zn<rr.length;Zn+=1){var vr=rr[Zn];Un=Math.min(Un,vr.z)}return Un}var E0=yi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,L0=yi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,C0=lc.VectorTileFeature.types,P0=Math.cos(Math.PI/180*37.5),Nh=Math.pow(2,14)/.5,Qa=function(M){var z=this;this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Z){return Z.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Z){z.gradients[Z.id]={}}),this.layoutVertexArray=new $e,this.layoutVertexArray2=new ot,this.indexArray=new xe,this.programConfigurations=new Ni(M.layers,M.zoom),this.segments=new Nn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Z){return Z.isStateDependent()}).map(function(Z){return Z.id})};Qa.prototype.populate=function(M,z,Z){this.hasPattern=Df("line",this.layers,z);for(var le=this.layers[0].layout.get("line-sort-key"),Te=[],Pe=0,je=M;Pe<je.length;Pe+=1){var Ke=je[Pe],st=Ke.feature,yt=Ke.id,bt=Ke.index,Ot=Ke.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,Bt=Mi(st,Ut);if(this.layers[0]._featureFilter.filter(new Wr(this.zoom),Bt,Z)){var nn=le?le.evaluate(Bt,{},Z):void 0,on={id:yt,properties:st.properties,type:st.type,sourceLayerIndex:Ot,index:bt,geometry:Ut?Bt.geometry:Co(st),patterns:{},sortKey:nn};Te.push(on)}}le&&Te.sort(function(_r,Tr){return _r.sortKey-Tr.sortKey});for(var _n=0,yn=Te;_n<yn.length;_n+=1){var Dn=yn[_n],zn=Dn,Un=zn.geometry,Zn=zn.index,rr=zn.sourceLayerIndex;if(this.hasPattern){var vr=zf("line",this.layers,Dn,this.zoom,z);this.patternFeatures.push(vr)}else this.addFeature(Dn,Un,Zn,Z,{});var pr=M[Zn].feature;z.featureIndex.insert(pr,Un,Zn,rr,this.index)}},Qa.prototype.update=function(M,z,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,Z)},Qa.prototype.addFeatures=function(M,z,Z){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Pe=Te[le];this.addFeature(Pe,Pe.geometry,Pe.index,z,Z)}},Qa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qa.prototype.upload=function(M){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=M.createVertexBuffer(this.layoutVertexArray2,L0)),this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,E0),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Qa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qa.prototype.lineFeatureClips=function(M){if(M.properties&&M.properties.hasOwnProperty("mapbox_clip_start")&&M.properties.hasOwnProperty("mapbox_clip_end"))return{start:+M.properties.mapbox_clip_start,end:+M.properties.mapbox_clip_end}},Qa.prototype.addFeature=function(M,z,Z,le,Te){var Pe=this.layers[0].layout,je=Pe.get("line-join").evaluate(M,{}),Ke=Pe.get("line-cap"),st=Pe.get("line-miter-limit"),yt=Pe.get("line-round-limit");this.lineClips=this.lineFeatureClips(M);for(var bt=0,Ot=z;bt<Ot.length;bt+=1){var Ut=Ot[bt];this.addLine(Ut,M,je,Ke,st,yt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Z,Te,le)},Qa.prototype.addLine=function(M,z,Z,le,Te,Pe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var je=0;je<M.length-1;je++)this.totalDistance+=M[je].dist(M[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Ke=C0[z.type]==="Polygon",st=M.length;st>=2&&M[st-1].equals(M[st-2]);)st--;for(var yt=0;yt<st-1&&M[yt].equals(M[yt+1]);)yt++;if(!(st<(Ke?3:2))){Z==="bevel"&&(Te=1.05);var bt,Ot=this.overscaling<=16?15*Qr/(512*this.overscaling):0,Ut=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Bt=void 0,nn=void 0,on=void 0,_n=void 0;this.e1=this.e2=-1,Ke&&(bt=M[st-2],_n=M[yt].sub(bt)._unit()._perp());for(var yn=yt;yn<st;yn++)if(!(nn=yn===st-1?Ke?M[yt+1]:void 0:M[yn+1])||!M[yn].equals(nn)){_n&&(on=_n),bt&&(Bt=bt),bt=M[yn],_n=nn?nn.sub(bt)._unit()._perp():on;var Dn=(on=on||_n).add(_n);Dn.x===0&&Dn.y===0||Dn._unit();var zn=on.x*_n.x+on.y*_n.y,Un=Dn.x*_n.x+Dn.y*_n.y,Zn=Un!==0?1/Un:1/0,rr=2*Math.sqrt(2-2*Un),vr=Un<P0&&Bt&&nn,pr=on.x*_n.y-on.y*_n.x>0;if(vr&&yn>yt){var _r=bt.dist(Bt);if(_r>2*Ot){var Tr=bt.sub(bt.sub(Bt)._mult(Ot/_r)._round());this.updateDistance(Bt,Tr),this.addCurrentVertex(Tr,on,0,0,Ut),Bt=Tr}}var Br=Bt&&nn,Cr=Br?Z:Ke?"butt":le;if(Br&&Cr==="round"&&(Zn<Pe?Cr="miter":Zn<=2&&(Cr="fakeround")),Cr==="miter"&&Zn>Te&&(Cr="bevel"),Cr==="bevel"&&(Zn>2&&(Cr="flipbevel"),Zn<Te&&(Cr="miter")),Bt&&this.updateDistance(Bt,bt),Cr==="miter")Dn._mult(Zn),this.addCurrentVertex(bt,Dn,0,0,Ut);else if(Cr==="flipbevel"){if(Zn>100)Dn=_n.mult(-1);else{var Fr=Zn*on.add(_n).mag()/on.sub(_n).mag();Dn._perp()._mult(Fr*(pr?-1:1))}this.addCurrentVertex(bt,Dn,0,0,Ut),this.addCurrentVertex(bt,Dn.mult(-1),0,0,Ut)}else if(Cr==="bevel"||Cr==="fakeround"){var Ir=-Math.sqrt(Zn*Zn-1),Lr=pr?Ir:0,Jr=pr?0:Ir;if(Bt&&this.addCurrentVertex(bt,on,Lr,Jr,Ut),Cr==="fakeround")for(var Vr=Math.round(180*rr/Math.PI/20),_i=1;_i<Vr;_i++){var Rr=_i/Vr;if(Rr!==.5){var vi=Rr-.5;Rr+=Rr*vi*(Rr-1)*((1.0904+zn*(zn*(3.55645-1.43519*zn)-3.2452))*vi*vi+(.848013+zn*(.215638*zn-1.06021)))}var Ei=_n.sub(on)._mult(Rr)._add(on)._unit()._mult(pr?-1:1);this.addHalfVertex(bt,Ei.x,Ei.y,!1,pr,0,Ut)}nn&&this.addCurrentVertex(bt,_n,-Lr,-Jr,Ut)}else if(Cr==="butt")this.addCurrentVertex(bt,Dn,0,0,Ut);else if(Cr==="square"){var Pi=Bt?1:-1;this.addCurrentVertex(bt,Dn,Pi,Pi,Ut)}else Cr==="round"&&(Bt&&(this.addCurrentVertex(bt,on,0,0,Ut),this.addCurrentVertex(bt,on,1,1,Ut,!0)),nn&&(this.addCurrentVertex(bt,_n,-1,-1,Ut,!0),this.addCurrentVertex(bt,_n,0,0,Ut)));if(vr&&yn<st-1){var Ii=bt.dist(nn);if(Ii>2*Ot){var wi=bt.add(nn.sub(bt)._mult(Ot/Ii)._round());this.updateDistance(bt,wi),this.addCurrentVertex(wi,_n,0,0,Ut),bt=wi}}}}},Qa.prototype.addCurrentVertex=function(M,z,Z,le,Te,Pe){Pe===void 0&&(Pe=!1);var je=z.x+z.y*Z,Ke=z.y-z.x*Z,st=-z.x+z.y*le,yt=-z.y-z.x*le;this.addHalfVertex(M,je,Ke,Pe,!1,Z,Te),this.addHalfVertex(M,st,yt,Pe,!0,-le,Te),this.distance>Nh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(M,z,Z,le,Te,Pe))},Qa.prototype.addHalfVertex=function(M,z,Z,le,Te,Pe,je){var Ke=M.x,st=M.y,yt=.5*(this.lineClips?this.scaledDistance*(Nh-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((Ke<<1)+(le?1:0),(st<<1)+(Te?1:0),Math.round(63*z)+128,Math.round(63*Z)+128,1+(Pe===0?0:Pe<0?-1:1)|(63&yt)<<2,yt>>6),this.lineClips){var bt=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(bt,this.lineClipsArray.length)}var Ot=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ot),je.primitiveLength++),Te?this.e2=Ot:this.e1=Ot},Qa.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Qa.prototype.updateDistance=function(M,z){this.distance+=M.dist(z),this.updateScaledDistance()},kr("LineBucket",Qa,{omit:["layers","patternFeatures"]});var I0=new Oi({"line-cap":new Sr(Ge.layout_line["line-cap"]),"line-join":new Or(Ge.layout_line["line-join"]),"line-miter-limit":new Sr(Ge.layout_line["line-miter-limit"]),"line-round-limit":new Sr(Ge.layout_line["line-round-limit"]),"line-sort-key":new Or(Ge.layout_line["line-sort-key"])}),jh={paint:new Oi({"line-opacity":new Or(Ge.paint_line["line-opacity"]),"line-color":new Or(Ge.paint_line["line-color"]),"line-translate":new Sr(Ge.paint_line["line-translate"]),"line-translate-anchor":new Sr(Ge.paint_line["line-translate-anchor"]),"line-width":new Or(Ge.paint_line["line-width"]),"line-gap-width":new Or(Ge.paint_line["line-gap-width"]),"line-offset":new Or(Ge.paint_line["line-offset"]),"line-blur":new Or(Ge.paint_line["line-blur"]),"line-dasharray":new go(Ge.paint_line["line-dasharray"]),"line-pattern":new Ea(Ge.paint_line["line-pattern"]),"line-gradient":new Lo(Ge.paint_line["line-gradient"])}),layout:I0},O0=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(Z,le){return le=new Wr(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),M.prototype.possiblyEvaluate.call(this,Z,le)},z.prototype.evaluate=function(Z,le,Te,Pe){return le=u({},le,{zoom:Math.floor(le.zoom)}),M.prototype.evaluate.call(this,Z,le,Te,Pe)},z}(Or),Uh=new O0(jh.paint.properties["line-width"].specification);Uh.useIntegerZoom=!0;var D0=function(M){function z(Z){M.call(this,Z,jh),this.gradientVersion=0}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(Z){if(Z==="line-gradient"){var le=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=le._styleExpression.expression instanceof Mr,this.gradientVersion=(this.gradientVersion+1)%r}},z.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},z.prototype.recalculate=function(Z,le){M.prototype.recalculate.call(this,Z,le),this.paint._values["line-floorwidth"]=Uh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},z.prototype.createBucket=function(Z){return new Qa(Z)},z.prototype.queryRadius=function(Z){var le=Z,Te=Vh(Fc("line-width",this,le),Fc("line-gap-width",this,le)),Pe=Fc("line-offset",this,le);return Te/2+Math.abs(Pe)+wu(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(Z,le,Te,Pe,je,Ke,st){var yt=Tu(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ke.angle,st),bt=st/2*Vh(this.paint.get("line-width").evaluate(le,Te),this.paint.get("line-gap-width").evaluate(le,Te)),Ot=this.paint.get("line-offset").evaluate(le,Te);return Ot&&(Pe=function(Ut,Bt){for(var nn=[],on=new t(0,0),_n=0;_n<Ut.length;_n++){for(var yn=Ut[_n],Dn=[],zn=0;zn<yn.length;zn++){var Un=yn[zn-1],Zn=yn[zn],rr=yn[zn+1],vr=zn===0?on:Zn.sub(Un)._unit()._perp(),pr=zn===yn.length-1?on:rr.sub(Zn)._unit()._perp(),_r=vr._add(pr)._unit(),Tr=_r.x*pr.x+_r.y*pr.y;_r._mult(1/Tr),Dn.push(_r._mult(Bt)._add(Zn))}nn.push(Dn)}return nn}(Pe,Ot*st)),function(Ut,Bt,nn){for(var on=0;on<Bt.length;on++){var _n=Bt[on];if(Ut.length>=3){for(var yn=0;yn<_n.length;yn++)if(ol(Ut,_n[yn]))return!0}if(kf(Ut,_n,nn))return!0}return!1}(yt,Pe,bt)},z.prototype.isTileClipped=function(){return!0},z}(ii);function Vh(M,z){return z>0?z+2*M:M}var z0=yi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),R0=yi([{name:"a_projected_pos",components:3,type:"Float32"}],4),F0=(yi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),yi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Hh=(yi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),yi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),B0=yi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function N0(M,z,Z){return M.sections.forEach(function(le){le.text=function(Te,Pe,je){var Ke=Pe.layout.get("text-transform").evaluate(je,{});return Ke==="uppercase"?Te=Te.toLocaleUpperCase():Ke==="lowercase"&&(Te=Te.toLocaleLowerCase()),ga.applyArabicShaping&&(Te=ga.applyArabicShaping(Te)),Te}(le.text,z,Z)}),M}yi([{name:"triangle",components:3,type:"Uint16"}]),yi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),yi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),yi([{type:"Float32",name:"offsetX"}]),yi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var qc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},wa=24,qh=function(M,z,Z,le,Te){var Pe,je,Ke=8*Te-le-1,st=(1<<Ke)-1,yt=st>>1,bt=-7,Ot=Z?Te-1:0,Ut=Z?-1:1,Bt=M[z+Ot];for(Ot+=Ut,Pe=Bt&(1<<-bt)-1,Bt>>=-bt,bt+=Ke;bt>0;Pe=256*Pe+M[z+Ot],Ot+=Ut,bt-=8);for(je=Pe&(1<<-bt)-1,Pe>>=-bt,bt+=le;bt>0;je=256*je+M[z+Ot],Ot+=Ut,bt-=8);if(Pe===0)Pe=1-yt;else{if(Pe===st)return je?NaN:1/0*(Bt?-1:1);je+=Math.pow(2,le),Pe-=yt}return(Bt?-1:1)*je*Math.pow(2,Pe-le)},Gh=function(M,z,Z,le,Te,Pe){var je,Ke,st,yt=8*Pe-Te-1,bt=(1<<yt)-1,Ot=bt>>1,Ut=Te===23?Math.pow(2,-24)-Math.pow(2,-77):0,Bt=le?0:Pe-1,nn=le?1:-1,on=z<0||z===0&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(Ke=isNaN(z)?1:0,je=bt):(je=Math.floor(Math.log(z)/Math.LN2),z*(st=Math.pow(2,-je))<1&&(je--,st*=2),(z+=je+Ot>=1?Ut/st:Ut*Math.pow(2,1-Ot))*st>=2&&(je++,st/=2),je+Ot>=bt?(Ke=0,je=bt):je+Ot>=1?(Ke=(z*st-1)*Math.pow(2,Te),je+=Ot):(Ke=z*Math.pow(2,Ot-1)*Math.pow(2,Te),je=0));Te>=8;M[Z+Bt]=255&Ke,Bt+=nn,Ke/=256,Te-=8);for(je=je<<Te|Ke,yt+=Te;yt>0;M[Z+Bt]=255&je,Bt+=nn,je/=256,yt-=8);M[Z+Bt-nn]|=128*on},Cu=Si;function Si(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Si.Varint=0,Si.Fixed64=1,Si.Bytes=2,Si.Fixed32=5;var Ff=4294967296,Wh=1/Ff,Yh=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function vl(M){return M.type===Si.Bytes?M.readVarint()+M.pos:M.pos+1}function cc(M,z,Z){return Z?4294967296*z+(M>>>0):4294967296*(z>>>0)+(M>>>0)}function Zh(M,z,Z){var le=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));Z.realloc(le);for(var Te=Z.pos-1;Te>=M;Te--)Z.buf[Te+le]=Z.buf[Te]}function j0(M,z){for(var Z=0;Z<M.length;Z++)z.writeVarint(M[Z])}function U0(M,z){for(var Z=0;Z<M.length;Z++)z.writeSVarint(M[Z])}function V0(M,z){for(var Z=0;Z<M.length;Z++)z.writeFloat(M[Z])}function H0(M,z){for(var Z=0;Z<M.length;Z++)z.writeDouble(M[Z])}function q0(M,z){for(var Z=0;Z<M.length;Z++)z.writeBoolean(M[Z])}function G0(M,z){for(var Z=0;Z<M.length;Z++)z.writeFixed32(M[Z])}function W0(M,z){for(var Z=0;Z<M.length;Z++)z.writeSFixed32(M[Z])}function Y0(M,z){for(var Z=0;Z<M.length;Z++)z.writeFixed64(M[Z])}function Z0(M,z){for(var Z=0;Z<M.length;Z++)z.writeSFixed64(M[Z])}function Pu(M,z){return(M[z]|M[z+1]<<8|M[z+2]<<16)+16777216*M[z+3]}function uc(M,z,Z){M[Z]=z,M[Z+1]=z>>>8,M[Z+2]=z>>>16,M[Z+3]=z>>>24}function Xh(M,z){return(M[z]|M[z+1]<<8|M[z+2]<<16)+(M[z+3]<<24)}Si.prototype={destroy:function(){this.buf=null},readFields:function(M,z,Z){for(Z=Z||this.length;this.pos<Z;){var le=this.readVarint(),Te=le>>3,Pe=this.pos;this.type=7&le,M(Te,z,this),this.pos===Pe&&this.skip(le)}return z},readMessage:function(M,z){return this.readFields(M,z,this.readVarint()+this.pos)},readFixed32:function(){var M=Pu(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Xh(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Pu(this.buf,this.pos)+Pu(this.buf,this.pos+4)*Ff;return this.pos+=8,M},readSFixed64:function(){var M=Pu(this.buf,this.pos)+Xh(this.buf,this.pos+4)*Ff;return this.pos+=8,M},readFloat:function(){var M=qh(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=qh(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var z,Z,le=this.buf;return z=127&(Z=le[this.pos++]),Z<128?z:(z|=(127&(Z=le[this.pos++]))<<7,Z<128?z:(z|=(127&(Z=le[this.pos++]))<<14,Z<128?z:(z|=(127&(Z=le[this.pos++]))<<21,Z<128?z:function(Te,Pe,je){var Ke,st,yt=je.buf;if(Ke=(112&(st=yt[je.pos++]))>>4,st<128||(Ke|=(127&(st=yt[je.pos++]))<<3,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<10,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<17,st<128)||(Ke|=(127&(st=yt[je.pos++]))<<24,st<128)||(Ke|=(1&(st=yt[je.pos++]))<<31,st<128))return cc(Te,Ke,Pe);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(Z=le[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var M=this.readVarint()+this.pos,z=this.pos;return this.pos=M,M-z>=12&&Yh?function(Z,le,Te){return Yh.decode(Z.subarray(le,Te))}(this.buf,z,M):function(Z,le,Te){for(var Pe="",je=le;je<Te;){var Ke,st,yt,bt=Z[je],Ot=null,Ut=bt>239?4:bt>223?3:bt>191?2:1;if(je+Ut>Te)break;Ut===1?bt<128&&(Ot=bt):Ut===2?(192&(Ke=Z[je+1]))==128&&(Ot=(31&bt)<<6|63&Ke)<=127&&(Ot=null):Ut===3?(Ke=Z[je+1],st=Z[je+2],(192&Ke)==128&&(192&st)==128&&((Ot=(15&bt)<<12|(63&Ke)<<6|63&st)<=2047||Ot>=55296&&Ot<=57343)&&(Ot=null)):Ut===4&&(Ke=Z[je+1],st=Z[je+2],yt=Z[je+3],(192&Ke)==128&&(192&st)==128&&(192&yt)==128&&((Ot=(15&bt)<<18|(63&Ke)<<12|(63&st)<<6|63&yt)<=65535||Ot>=1114112)&&(Ot=null)),Ot===null?(Ot=65533,Ut=1):Ot>65535&&(Ot-=65536,Pe+=String.fromCharCode(Ot>>>10&1023|55296),Ot=56320|1023&Ot),Pe+=String.fromCharCode(Ot),je+=Ut}return Pe}(this.buf,z,M)},readBytes:function(){var M=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,M);return this.pos=M,z},readPackedVarint:function(M,z){if(this.type!==Si.Bytes)return M.push(this.readVarint(z));var Z=vl(this);for(M=M||[];this.pos<Z;)M.push(this.readVarint(z));return M},readPackedSVarint:function(M){if(this.type!==Si.Bytes)return M.push(this.readSVarint());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Si.Bytes)return M.push(this.readBoolean());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Si.Bytes)return M.push(this.readFloat());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Si.Bytes)return M.push(this.readDouble());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Si.Bytes)return M.push(this.readFixed32());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Si.Bytes)return M.push(this.readSFixed32());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Si.Bytes)return M.push(this.readFixed64());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Si.Bytes)return M.push(this.readSFixed64());var z=vl(this);for(M=M||[];this.pos<z;)M.push(this.readSFixed64());return M},skip:function(M){var z=7&M;if(z===Si.Varint)for(;this.buf[this.pos++]>127;);else if(z===Si.Bytes)this.pos=this.readVarint()+this.pos;else if(z===Si.Fixed32)this.pos+=4;else{if(z!==Si.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(M,z){this.writeVarint(M<<3|z)},realloc:function(M){for(var z=this.length||16;z<this.pos+M;)z*=2;if(z!==this.length){var Z=new Uint8Array(z);Z.set(this.buf),this.buf=Z,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),uc(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),uc(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),uc(this.buf,-1&M,this.pos),uc(this.buf,Math.floor(M*Wh),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),uc(this.buf,-1&M,this.pos),uc(this.buf,Math.floor(M*Wh),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(z,Z){var le,Te;if(z>=0?(le=z%4294967296|0,Te=z/4294967296|0):(Te=~(-z/4294967296),4294967295^(le=~(-z%4294967296))?le=le+1|0:(le=0,Te=Te+1|0)),z>=18446744073709552e3||z<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),function(Pe,je,Ke){Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos++]=127&Pe|128,Pe>>>=7,Ke.buf[Ke.pos]=127&Pe}(le,0,Z),function(Pe,je){var Ke=(7&Pe)<<4;je.buf[je.pos++]|=Ke|((Pe>>>=3)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe|((Pe>>>=7)?128:0),Pe&&(je.buf[je.pos++]=127&Pe)))))}(Te,Z)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(!!M)},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var z=this.pos;this.pos=function(le,Te,Pe){for(var je,Ke,st=0;st<Te.length;st++){if((je=Te.charCodeAt(st))>55295&&je<57344){if(!Ke){je>56319||st+1===Te.length?(le[Pe++]=239,le[Pe++]=191,le[Pe++]=189):Ke=je;continue}if(je<56320){le[Pe++]=239,le[Pe++]=191,le[Pe++]=189,Ke=je;continue}je=Ke-55296<<10|je-56320|65536,Ke=null}else Ke&&(le[Pe++]=239,le[Pe++]=191,le[Pe++]=189,Ke=null);je<128?le[Pe++]=je:(je<2048?le[Pe++]=je>>6|192:(je<65536?le[Pe++]=je>>12|224:(le[Pe++]=je>>18|240,le[Pe++]=je>>12&63|128),le[Pe++]=je>>6&63|128),le[Pe++]=63&je|128)}return Pe}(this.buf,M,this.pos);var Z=this.pos-z;Z>=128&&Zh(z,Z,this),this.pos=z-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(M){this.realloc(4),Gh(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),Gh(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var z=M.length;this.writeVarint(z),this.realloc(z);for(var Z=0;Z<z;Z++)this.buf[this.pos++]=M[Z]},writeRawMessage:function(M,z){this.pos++;var Z=this.pos;M(z,this);var le=this.pos-Z;le>=128&&Zh(Z,le,this),this.pos=Z-1,this.writeVarint(le),this.pos+=le},writeMessage:function(M,z,Z){this.writeTag(M,Si.Bytes),this.writeRawMessage(z,Z)},writePackedVarint:function(M,z){z.length&&this.writeMessage(M,j0,z)},writePackedSVarint:function(M,z){z.length&&this.writeMessage(M,U0,z)},writePackedBoolean:function(M,z){z.length&&this.writeMessage(M,q0,z)},writePackedFloat:function(M,z){z.length&&this.writeMessage(M,V0,z)},writePackedDouble:function(M,z){z.length&&this.writeMessage(M,H0,z)},writePackedFixed32:function(M,z){z.length&&this.writeMessage(M,G0,z)},writePackedSFixed32:function(M,z){z.length&&this.writeMessage(M,W0,z)},writePackedFixed64:function(M,z){z.length&&this.writeMessage(M,Y0,z)},writePackedSFixed64:function(M,z){z.length&&this.writeMessage(M,Z0,z)},writeBytesField:function(M,z){this.writeTag(M,Si.Bytes),this.writeBytes(z)},writeFixed32Field:function(M,z){this.writeTag(M,Si.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(M,z){this.writeTag(M,Si.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(M,z){this.writeTag(M,Si.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(M,z){this.writeTag(M,Si.Fixed64),this.writeSFixed64(z)},writeVarintField:function(M,z){this.writeTag(M,Si.Varint),this.writeVarint(z)},writeSVarintField:function(M,z){this.writeTag(M,Si.Varint),this.writeSVarint(z)},writeStringField:function(M,z){this.writeTag(M,Si.Bytes),this.writeString(z)},writeFloatField:function(M,z){this.writeTag(M,Si.Fixed32),this.writeFloat(z)},writeDoubleField:function(M,z){this.writeTag(M,Si.Fixed64),this.writeDouble(z)},writeBooleanField:function(M,z){this.writeVarintField(M,!!z)}};var Bf=3;function X0(M,z,Z){M===1&&Z.readMessage(K0,z)}function K0(M,z,Z){if(M===3){var le=Z.readMessage(J0,{}),Te=le.id,Pe=le.bitmap,je=le.width,Ke=le.height,st=le.left,yt=le.top,bt=le.advance;z.push({id:Te,bitmap:new Wl({width:je+2*Bf,height:Ke+2*Bf},Pe),metrics:{width:je,height:Ke,left:st,top:yt,advance:bt}})}}function J0(M,z,Z){M===1?z.id=Z.readVarint():M===2?z.bitmap=Z.readBytes():M===3?z.width=Z.readVarint():M===4?z.height=Z.readVarint():M===5?z.left=Z.readSVarint():M===6?z.top=Z.readSVarint():M===7&&(z.advance=Z.readVarint())}var Kh=Bf;function Jh(M){for(var z=0,Z=0,le=0,Te=M;le<Te.length;le+=1){var Pe=Te[le];z+=Pe.w*Pe.h,Z=Math.max(Z,Pe.w)}M.sort(function(on,_n){return _n.h-on.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),Z),h:1/0}],Ke=0,st=0,yt=0,bt=M;yt<bt.length;yt+=1)for(var Ot=bt[yt],Ut=je.length-1;Ut>=0;Ut--){var Bt=je[Ut];if(!(Ot.w>Bt.w||Ot.h>Bt.h)){if(Ot.x=Bt.x,Ot.y=Bt.y,st=Math.max(st,Ot.y+Ot.h),Ke=Math.max(Ke,Ot.x+Ot.w),Ot.w===Bt.w&&Ot.h===Bt.h){var nn=je.pop();Ut<je.length&&(je[Ut]=nn)}else Ot.h===Bt.h?(Bt.x+=Ot.w,Bt.w-=Ot.w):Ot.w===Bt.w?(Bt.y+=Ot.h,Bt.h-=Ot.h):(je.push({x:Bt.x+Ot.w,y:Bt.y,w:Bt.w-Ot.w,h:Ot.h}),Bt.y+=Ot.h,Bt.h-=Ot.h);break}}return{w:Ke,h:st,fill:z/(Ke*st)||0}}var Po=1,Iu=function(M,z){var Z=z.pixelRatio,le=z.version,Te=z.stretchX,Pe=z.stretchY,je=z.content;this.paddedRect=M,this.pixelRatio=Z,this.stretchX=Te,this.stretchY=Pe,this.content=je,this.version=le},Gc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Gc.tl.get=function(){return[this.paddedRect.x+Po,this.paddedRect.y+Po]},Gc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Po,this.paddedRect.y+this.paddedRect.h-Po]},Gc.tlbr.get=function(){return this.tl.concat(this.br)},Gc.displaySize.get=function(){return[(this.paddedRect.w-2*Po)/this.pixelRatio,(this.paddedRect.h-2*Po)/this.pixelRatio]},Object.defineProperties(Iu.prototype,Gc);var Wc=function(M,z){var Z={},le={};this.haveRenderCallbacks=[];var Te=[];this.addImages(M,Z,Te),this.addImages(z,le,Te);var Pe=Jh(Te),je=Pe.w,Ke=Pe.h,st=new vo({width:je||1,height:Ke||1});for(var yt in M){var bt=M[yt],Ot=Z[yt].paddedRect;vo.copy(bt.data,st,{x:0,y:0},{x:Ot.x+Po,y:Ot.y+Po},bt.data)}for(var Ut in z){var Bt=z[Ut],nn=le[Ut].paddedRect,on=nn.x+Po,_n=nn.y+Po,yn=Bt.data.width,Dn=Bt.data.height;vo.copy(Bt.data,st,{x:0,y:0},{x:on,y:_n},Bt.data),vo.copy(Bt.data,st,{x:0,y:Dn-1},{x:on,y:_n-1},{width:yn,height:1}),vo.copy(Bt.data,st,{x:0,y:0},{x:on,y:_n+Dn},{width:yn,height:1}),vo.copy(Bt.data,st,{x:yn-1,y:0},{x:on-1,y:_n},{width:1,height:Dn}),vo.copy(Bt.data,st,{x:0,y:0},{x:on+yn,y:_n},{width:1,height:Dn})}this.image=st,this.iconPositions=Z,this.patternPositions=le};Wc.prototype.addImages=function(M,z,Z){for(var le in M){var Te=M[le],Pe={x:0,y:0,w:Te.data.width+2*Po,h:Te.data.height+2*Po};Z.push(Pe),z[le]=new Iu(Pe,Te),Te.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},Wc.prototype.patchUpdatedImages=function(M,z){for(var Z in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],M.getImage(Z),z),this.patchUpdatedImage(this.patternPositions[Z],M.getImage(Z),z)},Wc.prototype.patchUpdatedImage=function(M,z,Z){if(M&&z&&M.version!==z.version){M.version=z.version;var le=M.tl,Te=le[0],Pe=le[1];Z.update(z.data,void 0,{x:Te,y:Pe})}},kr("ImagePosition",Iu),kr("ImageAtlas",Wc);var $o={horizontal:1,vertical:2,horizontalOnly:3},Yc=-17,fc=function(){this.scale=1,this.fontStack="",this.imageName=null};fc.forText=function(M,z){var Z=new fc;return Z.scale=M||1,Z.fontStack=z,Z},fc.forImage=function(M){var z=new fc;return z.imageName=M,z};var ja=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ou(M,z,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on){var _n,yn=ja.fromFeature(M,Te);Ot===$o.vertical&&yn.verticalizePunctuation();var Dn=ga.processBidirectionalText,zn=ga.processStyledBidirectionalText;if(Dn&&yn.sections.length===1){_n=[];for(var Un=0,Zn=Dn(yn.toString(),Nf(yn,yt,Pe,z,le,Bt,nn));Un<Zn.length;Un+=1){var rr=Zn[Un],vr=new ja;vr.text=rr,vr.sections=yn.sections;for(var pr=0;pr<rr.length;pr++)vr.sectionIndex.push(0);_n.push(vr)}}else if(zn){_n=[];for(var _r=0,Tr=zn(yn.text,yn.sectionIndex,Nf(yn,yt,Pe,z,le,Bt,nn));_r<Tr.length;_r+=1){var Br=Tr[_r],Cr=new ja;Cr.text=Br[0],Cr.sectionIndex=Br[1],Cr.sections=yn.sections,_n.push(Cr)}}else _n=function(Lr,Jr){for(var Vr=[],_i=Lr.text,Rr=0,vi=0,Ei=Jr;vi<Ei.length;vi+=1){var Pi=Ei[vi];Vr.push(Lr.substring(Rr,Pi)),Rr=Pi}return Rr<_i.length&&Vr.push(Lr.substring(Rr,_i.length)),Vr}(yn,Nf(yn,yt,Pe,z,le,Bt,nn));var Fr=[],Ir={positionedLines:Fr,text:yn.toString(),top:bt[1],bottom:bt[1],left:bt[0],right:bt[0],writingMode:Ot,iconsInText:!1,verticalizable:!1};return function(Lr,Jr,Vr,_i,Rr,vi,Ei,Pi,Ii,wi,aa,Fi){for(var va=0,Pa=Yc,Ta=0,eo=0,ka=Pi==="right"?1:Pi==="left"?0:.5,ca=0,Aa=0,ya=Rr;Aa<ya.length;Aa+=1){var ua=ya[Aa];ua.trim();var Hr=ua.getMaxScale(),ei=(Hr-1)*wa,Wi={positionedGlyphs:[],lineOffset:0};Lr.positionedLines[ca]=Wi;var bi=Wi.positionedGlyphs,ji=0;if(ua.length()){for(var zi=0;zi<ua.length();zi++){var ai=ua.getSection(zi),Yi=ua.getSectionIndex(zi),to=ua.getCharCode(zi),Oo=0,Ua=null,Ys=null,bl=null,xa=wa,Zs=!(Ii===$o.horizontal||!aa&&!So(to)||aa&&(Du[to]||Zo(to)));if(ai.imageName){var Ls=_i[ai.imageName];if(!Ls)continue;bl=ai.imageName,Lr.iconsInText=Lr.iconsInText||!0,Ys=Ls.paddedRect;var Cs=Ls.displaySize;ai.scale=ai.scale*wa/Fi,Ua={width:Cs[0],height:Cs[1],left:Po,top:-Kh,advance:Zs?Cs[1]:Cs[0]},Oo=ei+(wa-Cs[1]*ai.scale),xa=Ua.advance;var Kl=Zs?Cs[0]*ai.scale-wa*Hr:Cs[1]*ai.scale-wa*Hr;Kl>0&&Kl>ji&&(ji=Kl)}else{var Hu=Vr[ai.fontStack],Jl=Hu&&Hu[to];if(Jl&&Jl.rect)Ys=Jl.rect,Ua=Jl.metrics;else{var qu=Jr[ai.fontStack],Jc=qu&&qu[to];if(!Jc)continue;Ua=Jc.metrics}Oo=(Hr-ai.scale)*wa}Zs?(Lr.verticalizable=!0,bi.push({glyph:to,imageName:bl,x:va,y:Pa+Oo,vertical:Zs,scale:ai.scale,fontStack:ai.fontStack,sectionIndex:Yi,metrics:Ua,rect:Ys}),va+=xa*ai.scale+wi):(bi.push({glyph:to,imageName:bl,x:va,y:Pa+Oo,vertical:Zs,scale:ai.scale,fontStack:ai.fontStack,sectionIndex:Yi,metrics:Ua,rect:Ys}),va+=Ua.advance*ai.scale+wi)}if(bi.length!==0){var Xf=va-wi;Ta=Math.max(Xf,Ta),Q0(bi,0,bi.length-1,ka,ji)}va=0;var Gu=vi*Hr+ji;Wi.lineOffset=Math.max(ji,ei),Pa+=Gu,eo=Math.max(Gu,eo),++ca}else Pa+=vi,++ca}var _c=Pa-Yc,Wu=jf(Ei),Yu=Wu.horizontalAlign,$c=Wu.verticalAlign;(function(Kf,Qc,$l,wc,Zu,Xu,Tc,Ku,Ju){var eu=(Qc-$l)*Zu,tu=0;tu=Xu!==Tc?-Ku*wc-Yc:(-wc*Ju+.5)*Tc;for(var Ql=0,nu=Kf;Ql<nu.length;Ql+=1)for(var ec=0,ru=nu[Ql].positionedGlyphs;ec<ru.length;ec+=1){var iu=ru[ec];iu.x+=eu,iu.y+=tu}})(Lr.positionedLines,ka,Yu,$c,Ta,eo,vi,_c,Rr.length),Lr.top+=-$c*_c,Lr.bottom=Lr.top+_c,Lr.left+=-Yu*Ta,Lr.right=Lr.left+Ta}(Ir,z,Z,le,_n,je,Ke,st,Ot,yt,Ut,on),!function(Lr){for(var Jr=0,Vr=Lr;Jr<Vr.length;Jr+=1)if(Vr[Jr].positionedGlyphs.length!==0)return!1;return!0}(Fr)&&Ir}ja.fromFeature=function(M,z){for(var Z=new ja,le=0;le<M.sections.length;le++){var Te=M.sections[le];Te.image?Z.addImageSection(Te):Z.addTextSection(Te,z)}return Z},ja.prototype.length=function(){return this.text.length},ja.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},ja.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},ja.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},ja.prototype.verticalizePunctuation=function(){this.text=function(M){for(var z="",Z=0;Z<M.length;Z++){var le=M.charCodeAt(Z+1)||null,Te=M.charCodeAt(Z-1)||null;le&&qi(le)&&!qc[M[Z+1]]||Te&&qi(Te)&&!qc[M[Z-1]]||!qc[M[Z]]?z+=M[Z]:z+=qc[M[Z]]}return z}(this.text)},ja.prototype.trim=function(){for(var M=0,z=0;z<this.text.length&&Du[this.text.charCodeAt(z)];z++)M++;for(var Z=this.text.length,le=this.text.length-1;le>=0&&le>=M&&Du[this.text.charCodeAt(le)];le--)Z--;this.text=this.text.substring(M,Z),this.sectionIndex=this.sectionIndex.slice(M,Z)},ja.prototype.substring=function(M,z){var Z=new ja;return Z.text=this.text.substring(M,z),Z.sectionIndex=this.sectionIndex.slice(M,z),Z.sections=this.sections,Z},ja.prototype.toString=function(){return this.text},ja.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(z,Z){return Math.max(z,M.sections[Z].scale)},0)},ja.prototype.addTextSection=function(M,z){this.text+=M.text,this.sections.push(fc.forText(M.scale,M.fontStack||z));for(var Z=this.sections.length-1,le=0;le<M.text.length;++le)this.sectionIndex.push(Z)},ja.prototype.addImageSection=function(M){var z=M.image?M.image.name:"";if(z.length!==0){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(fc.forImage(z)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},ja.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Du={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Io={};function $h(M,z,Z,le,Te,Pe){if(z.imageName){var je=le[z.imageName];return je?je.displaySize[0]*z.scale*wa/Pe+Te:0}var Ke=Z[z.fontStack],st=Ke&&Ke[M];return st?st.metrics.advance*z.scale+Te:0}function Qh(M,z,Z,le){var Te=Math.pow(M-z,2);return le?M<z?Te/2:2*Te:Te+Math.abs(Z)*Z}function $0(M,z,Z){var le=0;return M===10&&(le-=1e4),Z&&(le+=150),M!==40&&M!==65288||(le+=50),z!==41&&z!==65289||(le+=50),le}function ep(M,z,Z,le,Te,Pe){for(var je=null,Ke=Qh(z,Z,Te,Pe),st=0,yt=le;st<yt.length;st+=1){var bt=yt[st],Ot=Qh(z-bt.x,Z,Te,Pe)+bt.badness;Ot<=Ke&&(je=bt,Ke=Ot)}return{index:M,x:z,priorBreak:je,badness:Ke}}function tp(M){return M?tp(M.priorBreak).concat(M.index):[]}function Nf(M,z,Z,le,Te,Pe,je){if(Pe!=="point")return[];if(!M)return[];for(var Ke=[],st=function(_n,yn,Dn,zn,Un,Zn){for(var rr=0,vr=0;vr<_n.length();vr++){var pr=_n.getSection(vr);rr+=$h(_n.getCharCode(vr),pr,zn,Un,yn,Zn)}return rr/Math.max(1,Math.ceil(rr/Dn))}(M,z,Z,le,Te,je),yt=M.text.indexOf("\u200B")>=0,bt=0,Ot=0;Ot<M.length();Ot++){var Ut=M.getSection(Ot),Bt=M.getCharCode(Ot);if(Du[Bt]||(bt+=$h(Bt,Ut,le,Te,z,je)),Ot<M.length()-1){var nn=!((on=Bt)<11904||!(yr["Bopomofo Extended"](on)||yr.Bopomofo(on)||yr["CJK Compatibility Forms"](on)||yr["CJK Compatibility Ideographs"](on)||yr["CJK Compatibility"](on)||yr["CJK Radicals Supplement"](on)||yr["CJK Strokes"](on)||yr["CJK Symbols and Punctuation"](on)||yr["CJK Unified Ideographs Extension A"](on)||yr["CJK Unified Ideographs"](on)||yr["Enclosed CJK Letters and Months"](on)||yr["Halfwidth and Fullwidth Forms"](on)||yr.Hiragana(on)||yr["Ideographic Description Characters"](on)||yr["Kangxi Radicals"](on)||yr["Katakana Phonetic Extensions"](on)||yr.Katakana(on)||yr["Vertical Forms"](on)||yr["Yi Radicals"](on)||yr["Yi Syllables"](on)));(Io[Bt]||nn||Ut.imageName)&&Ke.push(ep(Ot+1,bt,st,Ke,$0(Bt,M.getCharCode(Ot+1),nn&&yt),!1))}}var on;return tp(ep(M.length(),bt,st,Ke,0,!0))}function jf(M){var z=.5,Z=.5;switch(M){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:z,verticalAlign:Z}}function Q0(M,z,Z,le,Te){if(le||Te)for(var Pe=M[Z],je=Pe.metrics.advance*Pe.scale,Ke=(M[Z].x+je)*le,st=z;st<=Z;st++)M[st].x-=Ke,M[st].y+=Te}function np(M,z,Z,le,Te,Pe){var je,Ke=M.image;if(Ke.content){var st=Ke.content,yt=Ke.pixelRatio||1;je=[st[0]/yt,st[1]/yt,Ke.displaySize[0]-st[2]/yt,Ke.displaySize[1]-st[3]/yt]}var bt,Ot,Ut,Bt,nn=z.left*Pe,on=z.right*Pe;Z==="width"||Z==="both"?(Bt=Te[0]+nn-le[3],Ot=Te[0]+on+le[1]):Ot=(Bt=Te[0]+(nn+on-Ke.displaySize[0])/2)+Ke.displaySize[0];var _n=z.top*Pe,yn=z.bottom*Pe;return Z==="height"||Z==="both"?(bt=Te[1]+_n-le[0],Ut=Te[1]+yn+le[2]):Ut=(bt=Te[1]+(_n+yn-Ke.displaySize[1])/2)+Ke.displaySize[1],{image:Ke,top:bt,right:Ot,bottom:Ut,left:Bt,collisionPadding:je}}Io[10]=!0,Io[32]=!0,Io[38]=!0,Io[40]=!0,Io[41]=!0,Io[43]=!0,Io[45]=!0,Io[47]=!0,Io[173]=!0,Io[183]=!0,Io[8203]=!0,Io[8208]=!0,Io[8211]=!0,Io[8231]=!0;var hc=function(M){function z(Z,le,Te,Pe){M.call(this,Z,le),this.angle=Te,Pe!==void 0&&(this.segment=Pe)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(t);kr("Anchor",hc);var Ws=128;function Uf(M,z){var Z=z.expression;if(Z.kind==="constant")return{kind:"constant",layoutSize:Z.evaluate(new Wr(M+1))};if(Z.kind==="source")return{kind:"source"};for(var le=Z.zoomStops,Te=Z.interpolationType,Pe=0;Pe<le.length&&le[Pe]<=M;)Pe++;for(var je=Pe=Math.max(0,Pe-1);je<le.length&&le[je]<M+1;)je++;je=Math.min(le.length-1,je);var Ke=le[Pe],st=le[je];return Z.kind==="composite"?{kind:"composite",minZoom:Ke,maxZoom:st,interpolationType:Te}:{kind:"camera",minZoom:Ke,maxZoom:st,minSize:Z.evaluate(new Wr(Ke)),maxSize:Z.evaluate(new Wr(st)),interpolationType:Te}}function rp(M,z,Z){var le=z.uSize,Te=z.uSizeT,Pe=Z.lowerSize,je=Z.upperSize;return M.kind==="source"?Pe/Ws:M.kind==="composite"?Dr(Pe/Ws,je/Ws,Te):le}function ip(M,z){var Z=0,le=0;if(M.kind==="constant")le=M.layoutSize;else if(M.kind!=="source"){var Te=M.interpolationType,Pe=M.minZoom,je=M.maxZoom,Ke=Te?c(Vi.interpolationFactor(Te,z,Pe,je),0,1):0;M.kind==="camera"?le=Dr(M.minSize,M.maxSize,Ke):Z=Ke}return{uSizeT:Z,uSize:le}}var eg=Object.freeze({__proto__:null,getSizeData:Uf,evaluateSizeForFeature:rp,evaluateSizeForZoom:ip,SIZE_PACK_FACTOR:Ws});function ap(M,z,Z,le,Te){if(z.segment===void 0)return!0;for(var Pe=z,je=z.segment+1,Ke=0;Ke>-Z/2;){if(--je<0)return!1;Ke-=M[je].dist(Pe),Pe=M[je]}Ke+=M[je].dist(M[je+1]),je++;for(var st=[],yt=0;Ke<Z/2;){var bt=M[je-1],Ot=M[je],Ut=M[je+1];if(!Ut)return!1;var Bt=bt.angleTo(Ot)-Ot.angleTo(Ut);for(Bt=Math.abs((Bt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Ke,angleDelta:Bt}),yt+=Bt;Ke-st[0].distance>le;)yt-=st.shift().angleDelta;if(yt>Te)return!1;je++,Ke+=Ot.dist(Ut)}return!0}function op(M){for(var z=0,Z=0;Z<M.length-1;Z++)z+=M[Z].dist(M[Z+1]);return z}function sp(M,z,Z){return M?.6*z*Z:0}function lp(M,z){return Math.max(M?M.right-M.left:0,z?z.right-z.left:0)}function tg(M,z,Z,le,Te,Pe){for(var je=sp(Z,Te,Pe),Ke=lp(Z,le)*Pe,st=0,yt=op(M)/2,bt=0;bt<M.length-1;bt++){var Ot=M[bt],Ut=M[bt+1],Bt=Ot.dist(Ut);if(st+Bt>yt){var nn=(yt-st)/Bt,on=Dr(Ot.x,Ut.x,nn),_n=Dr(Ot.y,Ut.y,nn),yn=new hc(on,_n,Ut.angleTo(Ot),bt);return yn._round(),!je||ap(M,yn,Ke,je,z)?yn:void 0}st+=Bt}}function ng(M,z,Z,le,Te,Pe,je,Ke,st){var yt=sp(le,Pe,je),bt=lp(le,Te),Ot=bt*je,Ut=M[0].x===0||M[0].x===st||M[0].y===0||M[0].y===st;return z-Ot<z/4&&(z=Ot+z/4),cp(M,Ut?z/2*Ke%z:(bt/2+2*Pe)*je*Ke%z,z,yt,Z,Ot,Ut,!1,st)}function cp(M,z,Z,le,Te,Pe,je,Ke,st){for(var yt=Pe/2,bt=op(M),Ot=0,Ut=z-Z,Bt=[],nn=0;nn<M.length-1;nn++){for(var on=M[nn],_n=M[nn+1],yn=on.dist(_n),Dn=_n.angleTo(on);Ut+Z<Ot+yn;){var zn=((Ut+=Z)-Ot)/yn,Un=Dr(on.x,_n.x,zn),Zn=Dr(on.y,_n.y,zn);if(Un>=0&&Un<st&&Zn>=0&&Zn<st&&Ut-yt>=0&&Ut+yt<=bt){var rr=new hc(Un,Zn,Dn,nn);rr._round(),le&&!ap(M,rr,Pe,le,Te)||Bt.push(rr)}}Ot+=yn}return Ke||Bt.length||je||(Bt=cp(M,Ot/2,Z,le,Te,Pe,je,!0,st)),Bt}function up(M,z,Z,le,Te){for(var Pe=[],je=0;je<M.length;je++)for(var Ke=M[je],st=void 0,yt=0;yt<Ke.length-1;yt++){var bt=Ke[yt],Ot=Ke[yt+1];bt.x<z&&Ot.x<z||(bt.x<z?bt=new t(z,bt.y+(Ot.y-bt.y)*((z-bt.x)/(Ot.x-bt.x)))._round():Ot.x<z&&(Ot=new t(z,bt.y+(Ot.y-bt.y)*((z-bt.x)/(Ot.x-bt.x)))._round()),bt.y<Z&&Ot.y<Z||(bt.y<Z?bt=new t(bt.x+(Ot.x-bt.x)*((Z-bt.y)/(Ot.y-bt.y)),Z)._round():Ot.y<Z&&(Ot=new t(bt.x+(Ot.x-bt.x)*((Z-bt.y)/(Ot.y-bt.y)),Z)._round()),bt.x>=le&&Ot.x>=le||(bt.x>=le?bt=new t(le,bt.y+(Ot.y-bt.y)*((le-bt.x)/(Ot.x-bt.x)))._round():Ot.x>=le&&(Ot=new t(le,bt.y+(Ot.y-bt.y)*((le-bt.x)/(Ot.x-bt.x)))._round()),bt.y>=Te&&Ot.y>=Te||(bt.y>=Te?bt=new t(bt.x+(Ot.x-bt.x)*((Te-bt.y)/(Ot.y-bt.y)),Te)._round():Ot.y>=Te&&(Ot=new t(bt.x+(Ot.x-bt.x)*((Te-bt.y)/(Ot.y-bt.y)),Te)._round()),st&&bt.equals(st[st.length-1])||(st=[bt],Pe.push(st)),st.push(Ot)))))}return Pe}var pc=Po;function fp(M,z,Z,le){var Te=[],Pe=M.image,je=Pe.pixelRatio,Ke=Pe.paddedRect.w-2*pc,st=Pe.paddedRect.h-2*pc,yt=M.right-M.left,bt=M.bottom-M.top,Ot=Pe.stretchX||[[0,Ke]],Ut=Pe.stretchY||[[0,st]],Bt=function(vi,Ei){return vi+Ei[1]-Ei[0]},nn=Ot.reduce(Bt,0),on=Ut.reduce(Bt,0),_n=Ke-nn,yn=st-on,Dn=0,zn=nn,Un=0,Zn=on,rr=0,vr=_n,pr=0,_r=yn;if(Pe.content&&le){var Tr=Pe.content;Dn=zu(Ot,0,Tr[0]),Un=zu(Ut,0,Tr[1]),zn=zu(Ot,Tr[0],Tr[2]),Zn=zu(Ut,Tr[1],Tr[3]),rr=Tr[0]-Dn,pr=Tr[1]-Un,vr=Tr[2]-Tr[0]-zn,_r=Tr[3]-Tr[1]-Zn}var Br=function(vi,Ei,Pi,Ii){var wi=Ru(vi.stretch-Dn,zn,yt,M.left),aa=Fu(vi.fixed-rr,vr,vi.stretch,nn),Fi=Ru(Ei.stretch-Un,Zn,bt,M.top),va=Fu(Ei.fixed-pr,_r,Ei.stretch,on),Pa=Ru(Pi.stretch-Dn,zn,yt,M.left),Ta=Fu(Pi.fixed-rr,vr,Pi.stretch,nn),eo=Ru(Ii.stretch-Un,Zn,bt,M.top),ka=Fu(Ii.fixed-pr,_r,Ii.stretch,on),ca=new t(wi,Fi),Aa=new t(Pa,Fi),ya=new t(Pa,eo),ua=new t(wi,eo),Hr=new t(aa/je,va/je),ei=new t(Ta/je,ka/je),Wi=z*Math.PI/180;if(Wi){var bi=Math.sin(Wi),ji=Math.cos(Wi),zi=[ji,-bi,bi,ji];ca._matMult(zi),Aa._matMult(zi),ua._matMult(zi),ya._matMult(zi)}var ai=vi.stretch+vi.fixed,Yi=Pi.stretch+Pi.fixed,to=Ei.stretch+Ei.fixed,Oo=Ii.stretch+Ii.fixed;return{tl:ca,tr:Aa,bl:ua,br:ya,tex:{x:Pe.paddedRect.x+pc+ai,y:Pe.paddedRect.y+pc+to,w:Yi-ai,h:Oo-to},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hr,pixelOffsetBR:ei,minFontScaleX:vr/je/yt,minFontScaleY:_r/je/bt,isSDF:Z}};if(le&&(Pe.stretchX||Pe.stretchY))for(var Cr=hp(Ot,_n,nn),Fr=hp(Ut,yn,on),Ir=0;Ir<Cr.length-1;Ir++)for(var Lr=Cr[Ir],Jr=Cr[Ir+1],Vr=0;Vr<Fr.length-1;Vr++){var _i=Fr[Vr],Rr=Fr[Vr+1];Te.push(Br(Lr,_i,Jr,Rr))}else Te.push(Br({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ke+1},{fixed:0,stretch:st+1}));return Te}function zu(M,z,Z){for(var le=0,Te=0,Pe=M;Te<Pe.length;Te+=1){var je=Pe[Te];le+=Math.max(z,Math.min(Z,je[1]))-Math.max(z,Math.min(Z,je[0]))}return le}function hp(M,z,Z){for(var le=[{fixed:-pc,stretch:0}],Te=0,Pe=M;Te<Pe.length;Te+=1){var je=Pe[Te],Ke=je[0],st=je[1],yt=le[le.length-1];le.push({fixed:Ke-yt.stretch,stretch:yt.stretch}),le.push({fixed:Ke-yt.stretch,stretch:yt.stretch+(st-Ke)})}return le.push({fixed:z+pc,stretch:Z}),le}function Ru(M,z,Z,le){return M/z*Z+le}function Fu(M,z,Z,le){return M-z*Z/le}var Bu=function(M,z,Z,le,Te,Pe,je,Ke,st,yt){if(this.boxStartIndex=M.length,st){var bt=Pe.top,Ot=Pe.bottom,Ut=Pe.collisionPadding;Ut&&(bt-=Ut[1],Ot+=Ut[3]);var Bt=Ot-bt;Bt>0&&(Bt=Math.max(10,Bt),this.circleDiameter=Bt)}else{var nn=Pe.top*je-Ke,on=Pe.bottom*je+Ke,_n=Pe.left*je-Ke,yn=Pe.right*je+Ke,Dn=Pe.collisionPadding;if(Dn&&(_n-=Dn[0]*je,nn-=Dn[1]*je,yn+=Dn[2]*je,on+=Dn[3]*je),yt){var zn=new t(_n,nn),Un=new t(yn,nn),Zn=new t(_n,on),rr=new t(yn,on),vr=yt*Math.PI/180;zn._rotate(vr),Un._rotate(vr),Zn._rotate(vr),rr._rotate(vr),_n=Math.min(zn.x,Un.x,Zn.x,rr.x),yn=Math.max(zn.x,Un.x,Zn.x,rr.x),nn=Math.min(zn.y,Un.y,Zn.y,rr.y),on=Math.max(zn.y,Un.y,Zn.y,rr.y)}M.emplaceBack(z.x,z.y,_n,nn,yn,on,Z,le,Te)}this.boxEndIndex=M.length},dc=function(M,z){if(M===void 0&&(M=[]),z===void 0&&(z=rg),this.data=M,this.length=this.data.length,this.compare=z,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function rg(M,z){return M<z?-1:M>z?1:0}function ig(M,z,Z){z===void 0&&(z=1),Z===void 0&&(Z=!1);for(var le=1/0,Te=1/0,Pe=-1/0,je=-1/0,Ke=M[0],st=0;st<Ke.length;st++){var yt=Ke[st];(!st||yt.x<le)&&(le=yt.x),(!st||yt.y<Te)&&(Te=yt.y),(!st||yt.x>Pe)&&(Pe=yt.x),(!st||yt.y>je)&&(je=yt.y)}var bt=Pe-le,Ot=je-Te,Ut=Math.min(bt,Ot),Bt=Ut/2,nn=new dc([],ag);if(Ut===0)return new t(le,Te);for(var on=le;on<Pe;on+=Ut)for(var _n=Te;_n<je;_n+=Ut)nn.push(new gc(on+Bt,_n+Bt,Bt,M));for(var yn=function(Un){for(var Zn=0,rr=0,vr=0,pr=Un[0],_r=0,Tr=pr.length,Br=Tr-1;_r<Tr;Br=_r++){var Cr=pr[_r],Fr=pr[Br],Ir=Cr.x*Fr.y-Fr.x*Cr.y;rr+=(Cr.x+Fr.x)*Ir,vr+=(Cr.y+Fr.y)*Ir,Zn+=3*Ir}return new gc(rr/Zn,vr/Zn,0,Un)}(M),Dn=nn.length;nn.length;){var zn=nn.pop();(zn.d>yn.d||!yn.d)&&(yn=zn,Z&&console.log("found best %d after %d probes",Math.round(1e4*zn.d)/1e4,Dn)),zn.max-yn.d<=z||(Bt=zn.h/2,nn.push(new gc(zn.p.x-Bt,zn.p.y-Bt,Bt,M)),nn.push(new gc(zn.p.x+Bt,zn.p.y-Bt,Bt,M)),nn.push(new gc(zn.p.x-Bt,zn.p.y+Bt,Bt,M)),nn.push(new gc(zn.p.x+Bt,zn.p.y+Bt,Bt,M)),Dn+=4)}return Z&&(console.log("num probes: "+Dn),console.log("best distance: "+yn.d)),yn.p}function ag(M,z){return z.max-M.max}function gc(M,z,Z,le){this.p=new t(M,z),this.h=Z,this.d=function(Te,Pe){for(var je=!1,Ke=1/0,st=0;st<Pe.length;st++)for(var yt=Pe[st],bt=0,Ot=yt.length,Ut=Ot-1;bt<Ot;Ut=bt++){var Bt=yt[bt],nn=yt[Ut];Bt.y>Te.y!=nn.y>Te.y&&Te.x<(nn.x-Bt.x)*(Te.y-Bt.y)/(nn.y-Bt.y)+Bt.x&&(je=!je),Ke=Math.min(Ke,bu(Te,Bt,nn))}return(je?1:-1)*Math.sqrt(Ke)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}dc.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},dc.prototype.pop=function(){if(this.length!==0){var M=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),M}},dc.prototype.peek=function(){return this.data[0]},dc.prototype._up=function(M){for(var z=this.data,Z=this.compare,le=z[M];M>0;){var Te=M-1>>1,Pe=z[Te];if(Z(le,Pe)>=0)break;z[M]=Pe,M=Te}z[M]=le},dc.prototype._down=function(M){for(var z=this.data,Z=this.compare,le=this.length>>1,Te=z[M];M<le;){var Pe=1+(M<<1),je=z[Pe],Ke=Pe+1;if(Ke<this.length&&Z(z[Ke],je)<0&&(Pe=Ke,je=z[Ke]),Z(je,Te)>=0)break;z[M]=je,M=Pe}z[M]=Te};var mc=7,Vf=Number.POSITIVE_INFINITY;function pp(M,z){return z[1]!==Vf?function(Z,le,Te){var Pe=0,je=0;switch(le=Math.abs(le),Te=Math.abs(Te),Z){case"top-right":case"top-left":case"top":je=Te-mc;break;case"bottom-right":case"bottom-left":case"bottom":je=-Te+mc}switch(Z){case"top-right":case"bottom-right":case"right":Pe=-le;break;case"top-left":case"bottom-left":case"left":Pe=le}return[Pe,je]}(M,z[0],z[1]):function(Z,le){var Te=0,Pe=0;le<0&&(le=0);var je=le/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Pe=je-mc;break;case"bottom-right":case"bottom-left":Pe=-je+mc;break;case"bottom":Pe=-le+mc;break;case"top":Pe=le-mc}switch(Z){case"top-right":case"bottom-right":Te=-je;break;case"top-left":case"bottom-left":Te=je;break;case"left":Te=le;break;case"right":Te=-le}return[Te,Pe]}(M,z[0])}function Hf(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Zc=255,zl=Zc*Ws;function dp(M,z,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn){var on=function(Un,Zn,rr,vr,pr,_r,Tr,Br){for(var Cr=vr.layout.get("text-rotate").evaluate(_r,{})*Math.PI/180,Fr=[],Ir=0,Lr=Zn.positionedLines;Ir<Lr.length;Ir+=1)for(var Jr=Lr[Ir],Vr=0,_i=Jr.positionedGlyphs;Vr<_i.length;Vr+=1){var Rr=_i[Vr];if(Rr.rect){var vi=Rr.rect||{},Ei=Kh+1,Pi=!0,Ii=1,wi=0,aa=(pr||Br)&&Rr.vertical,Fi=Rr.metrics.advance*Rr.scale/2;if(Br&&Zn.verticalizable){var va=(Rr.scale-1)*wa,Pa=(wa-Rr.metrics.width*Rr.scale)/2;wi=Jr.lineOffset/2-(Rr.imageName?-Pa:va)}if(Rr.imageName){var Ta=Tr[Rr.imageName];Pi=Ta.sdf,Ii=Ta.pixelRatio,Ei=Po/Ii}var eo=pr?[Rr.x+Fi,Rr.y]:[0,0],ka=pr?[0,0]:[Rr.x+Fi+rr[0],Rr.y+rr[1]-wi],ca=[0,0];aa&&(ca=ka,ka=[0,0]);var Aa=(Rr.metrics.left-Ei)*Rr.scale-Fi+ka[0],ya=(-Rr.metrics.top-Ei)*Rr.scale+ka[1],ua=Aa+vi.w*Rr.scale/Ii,Hr=ya+vi.h*Rr.scale/Ii,ei=new t(Aa,ya),Wi=new t(ua,ya),bi=new t(Aa,Hr),ji=new t(ua,Hr);if(aa){var zi=new t(-Fi,Fi-Yc),ai=-Math.PI/2,Yi=wa/2-Fi,to=Rr.imageName?Yi:0,Oo=new t(5-Yc-Yi,-to),Ua=new(Function.prototype.bind.apply(t,[null].concat(ca)));ei._rotateAround(ai,zi)._add(Oo)._add(Ua),Wi._rotateAround(ai,zi)._add(Oo)._add(Ua),bi._rotateAround(ai,zi)._add(Oo)._add(Ua),ji._rotateAround(ai,zi)._add(Oo)._add(Ua)}if(Cr){var Ys=Math.sin(Cr),bl=Math.cos(Cr),xa=[bl,-Ys,Ys,bl];ei._matMult(xa),Wi._matMult(xa),bi._matMult(xa),ji._matMult(xa)}var Zs=new t(0,0),Ls=new t(0,0);Fr.push({tl:ei,tr:Wi,bl:bi,br:ji,tex:vi,writingMode:Zn.writingMode,glyphOffset:eo,sectionIndex:Rr.sectionIndex,isSDF:Pi,pixelOffsetTL:Zs,pixelOffsetBR:Ls,minFontScaleX:0,minFontScaleY:0})}}return Fr}(0,Z,Ke,Te,Pe,je,le,M.allowVerticalPlacement),_n=M.textSizeData,yn=null;_n.kind==="source"?(yn=[Ws*Te.layout.get("text-size").evaluate(je,{})])[0]>zl&&E(M.layerIds[0]+': Value for "text-size" is >= '+Zc+'. Reduce your "text-size".'):_n.kind==="composite"&&((yn=[Ws*Bt.compositeTextSizes[0].evaluate(je,{},nn),Ws*Bt.compositeTextSizes[1].evaluate(je,{},nn)])[0]>zl||yn[1]>zl)&&E(M.layerIds[0]+': Value for "text-size" is >= '+Zc+'. Reduce your "text-size".'),M.addSymbols(M.text,on,yn,Ke,Pe,je,yt,z,st.lineStartIndex,st.lineLength,Ut,nn);for(var Dn=0,zn=bt;Dn<zn.length;Dn+=1)Ot[zn[Dn]]=M.text.placedSymbolArray.length-1;return 4*on.length}function gp(M){for(var z in M)return M[z];return null}function og(M,z,Z,le){var Te=M.compareText;if(z in Te){for(var Pe=Te[z],je=Pe.length-1;je>=0;je--)if(le.dist(Pe[je])<Z)return!0}else Te[z]=[];return Te[z].push(le),!1}var sg=lc.VectorTileFeature.types,lg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Nu(M,z,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut){var Bt=Ke?Math.min(zl,Math.round(Ke[0])):0,nn=Ke?Math.min(zl,Math.round(Ke[1])):0;M.emplaceBack(z,Z,Math.round(32*le),Math.round(32*Te),Pe,je,(Bt<<1)+(st?1:0),nn,16*yt,16*bt,256*Ot,256*Ut)}function qf(M,z,Z){M.emplaceBack(z.x,z.y,Z),M.emplaceBack(z.x,z.y,Z),M.emplaceBack(z.x,z.y,Z),M.emplaceBack(z.x,z.y,Z)}function cg(M){for(var z=0,Z=M.sections;z<Z.length;z+=1)if(sa(Z[z].text))return!0;return!1}var vc=function(M){this.layoutVertexArray=new G,this.indexArray=new xe,this.programConfigurations=M,this.segments=new Nn,this.dynamicLayoutVertexArray=new H,this.opacityVertexArray=new L,this.placedSymbolArray=new Et};vc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},vc.prototype.upload=function(M,z,Z,le){this.isEmpty()||(Z&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,z0.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,R0.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,lg,!0),this.opacityVertexBuffer.itemSize=1),(Z||le)&&this.programConfigurations.upload(M))},vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},kr("SymbolBuffers",vc);var Xc=function(M,z,Z){this.layoutVertexArray=new M,this.layoutAttributes=z,this.indexArray=new Z,this.segments=new Nn,this.collisionVertexArray=new ce};Xc.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,F0.members,!0)},Xc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},kr("CollisionBuffers",Xc);var mi=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mf([]),this.placementViewportMatrix=Mf([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Uf(this.zoom,z["text-size"]),this.iconSizeData=Uf(this.zoom,z["icon-size"]);var Z=this.layers[0].layout,le=Z.get("symbol-sort-key"),Te=Z.get("symbol-z-order");this.canOverlap=Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement"),this.sortFeaturesByKey=Te!=="viewport-y"&&le.constantOr(1)!==void 0;var Pe=Te==="viewport-y"||Te==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Pe&&this.canOverlap,Z.get("symbol-placement")==="point"&&(this.writingModes=Z.get("text-writing-mode").map(function(je){return $o[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=M.sourceID};mi.prototype.createArrays=function(){this.text=new vc(new Ni(this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new vc(new Ni(this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Nt,this.lineVertexArray=new fn,this.symbolInstances=new Vt},mi.prototype.calculateGlyphDependencies=function(M,z,Z,le,Te){for(var Pe=0;Pe<M.length;Pe++)if(z[M.charCodeAt(Pe)]=!0,(Z||le)&&Te){var je=qc[M.charAt(Pe)];je&&(z[je.charCodeAt(0)]=!0)}},mi.prototype.populate=function(M,z,Z){var le=this.layers[0],Te=le.layout,Pe=Te.get("text-font"),je=Te.get("text-field"),Ke=Te.get("icon-image"),st=(je.value.kind!=="constant"||je.value.value instanceof In&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Pe.value.kind!=="constant"||Pe.value.value.length>0),yt=Ke.value.kind!=="constant"||!!Ke.value.value||Object.keys(Ke.parameters).length>0,bt=Te.get("symbol-sort-key");if(this.features=[],st||yt){for(var Ot=z.iconDependencies,Ut=z.glyphDependencies,Bt=z.availableImages,nn=new Wr(this.zoom),on=0,_n=M;on<_n.length;on+=1){var yn=_n[on],Dn=yn.feature,zn=yn.id,Un=yn.index,Zn=yn.sourceLayerIndex,rr=le._featureFilter.needGeometry,vr=Mi(Dn,rr);if(le._featureFilter.filter(nn,vr,Z)){rr||(vr.geometry=Co(Dn));var pr=void 0;if(st){var _r=le.getValueAndResolveTokens("text-field",vr,Z,Bt),Tr=In.factory(_r);cg(Tr)&&(this.hasRTLText=!0),(!this.hasRTLText||Ts()==="unavailable"||this.hasRTLText&&ga.isParsed())&&(pr=N0(Tr,le,vr))}var Br=void 0;if(yt){var Cr=le.getValueAndResolveTokens("icon-image",vr,Z,Bt);Br=Cr instanceof Xn?Cr:Xn.fromString(Cr)}if(pr||Br){var Fr=this.sortFeaturesByKey?bt.evaluate(vr,{},Z):void 0,Ir={id:zn,text:pr,icon:Br,index:Un,sourceLayerIndex:Zn,geometry:vr.geometry,properties:Dn.properties,type:sg[Dn.type],sortKey:Fr};if(this.features.push(Ir),Br&&(Ot[Br.name]=!0),pr){var Lr=Pe.evaluate(vr,{},Z).join(","),Jr=Te.get("text-rotation-alignment")==="map"&&Te.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf($o.vertical)>=0;for(var Vr=0,_i=pr.sections;Vr<_i.length;Vr+=1){var Rr=_i[Vr];if(Rr.image)Ot[Rr.image.name]=!0;else{var vi=Us(pr.toString()),Ei=Rr.fontStack||Lr,Pi=Ut[Ei]=Ut[Ei]||{};this.calculateGlyphDependencies(Rr.text,Pi,Jr,this.allowVerticalPlacement,vi)}}}}}}Te.get("symbol-placement")==="line"&&(this.features=function(Ii){var wi={},aa={},Fi=[],va=0;function Pa(ji){Fi.push(Ii[ji]),va++}function Ta(ji,zi,ai){var Yi=aa[ji];return delete aa[ji],aa[zi]=Yi,Fi[Yi].geometry[0].pop(),Fi[Yi].geometry[0]=Fi[Yi].geometry[0].concat(ai[0]),Yi}function eo(ji,zi,ai){var Yi=wi[zi];return delete wi[zi],wi[ji]=Yi,Fi[Yi].geometry[0].shift(),Fi[Yi].geometry[0]=ai[0].concat(Fi[Yi].geometry[0]),Yi}function ka(ji,zi,ai){var Yi=ai?zi[0][zi[0].length-1]:zi[0][0];return ji+":"+Yi.x+":"+Yi.y}for(var ca=0;ca<Ii.length;ca++){var Aa=Ii[ca],ya=Aa.geometry,ua=Aa.text?Aa.text.toString():null;if(ua){var Hr=ka(ua,ya),ei=ka(ua,ya,!0);if(Hr in aa&&ei in wi&&aa[Hr]!==wi[ei]){var Wi=eo(Hr,ei,ya),bi=Ta(Hr,ei,Fi[Wi].geometry);delete wi[Hr],delete aa[ei],aa[ka(ua,Fi[bi].geometry,!0)]=bi,Fi[Wi].geometry=null}else Hr in aa?Ta(Hr,ei,ya):ei in wi?eo(Hr,ei,ya):(Pa(ca),wi[Hr]=va-1,aa[ei]=va-1)}else Pa(ca)}return Fi.filter(function(ji){return ji.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ii,wi){return Ii.sortKey-wi.sortKey})}},mi.prototype.update=function(M,z,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,z,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(M,z,this.layers,Z))},mi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},mi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},mi.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},mi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},mi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},mi.prototype.addToLineVertexArray=function(M,z){var Z=this.lineVertexArray.length;if(M.segment!==void 0){for(var le=M.dist(z[M.segment+1]),Te=M.dist(z[M.segment]),Pe={},je=M.segment+1;je<z.length;je++)Pe[je]={x:z[je].x,y:z[je].y,tileUnitDistanceFromAnchor:le},je<z.length-1&&(le+=z[je+1].dist(z[je]));for(var Ke=M.segment||0;Ke>=0;Ke--)Pe[Ke]={x:z[Ke].x,y:z[Ke].y,tileUnitDistanceFromAnchor:Te},Ke>0&&(Te+=z[Ke-1].dist(z[Ke]));for(var st=0;st<z.length;st++){var yt=Pe[st];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},mi.prototype.addSymbols=function(M,z,Z,le,Te,Pe,je,Ke,st,yt,bt,Ot){for(var Ut=M.indexArray,Bt=M.layoutVertexArray,nn=M.segments.prepareSegment(4*z.length,Bt,Ut,this.canOverlap?Pe.sortKey:void 0),on=this.glyphOffsetArray.length,_n=nn.vertexLength,yn=this.allowVerticalPlacement&&je===$o.vertical?Math.PI/2:0,Dn=Pe.text&&Pe.text.sections,zn=0;zn<z.length;zn++){var Un=z[zn],Zn=Un.tl,rr=Un.tr,vr=Un.bl,pr=Un.br,_r=Un.tex,Tr=Un.pixelOffsetTL,Br=Un.pixelOffsetBR,Cr=Un.minFontScaleX,Fr=Un.minFontScaleY,Ir=Un.glyphOffset,Lr=Un.isSDF,Jr=Un.sectionIndex,Vr=nn.vertexLength,_i=Ir[1];Nu(Bt,Ke.x,Ke.y,Zn.x,_i+Zn.y,_r.x,_r.y,Z,Lr,Tr.x,Tr.y,Cr,Fr),Nu(Bt,Ke.x,Ke.y,rr.x,_i+rr.y,_r.x+_r.w,_r.y,Z,Lr,Br.x,Tr.y,Cr,Fr),Nu(Bt,Ke.x,Ke.y,vr.x,_i+vr.y,_r.x,_r.y+_r.h,Z,Lr,Tr.x,Br.y,Cr,Fr),Nu(Bt,Ke.x,Ke.y,pr.x,_i+pr.y,_r.x+_r.w,_r.y+_r.h,Z,Lr,Br.x,Br.y,Cr,Fr),qf(M.dynamicLayoutVertexArray,Ke,yn),Ut.emplaceBack(Vr,Vr+1,Vr+2),Ut.emplaceBack(Vr+1,Vr+2,Vr+3),nn.vertexLength+=4,nn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ir[0]),zn!==z.length-1&&Jr===z[zn+1].sectionIndex||M.programConfigurations.populatePaintArrays(Bt.length,Pe,Pe.index,{},Ot,Dn&&Dn[Jr])}M.placedSymbolArray.emplaceBack(Ke.x,Ke.y,on,this.glyphOffsetArray.length-on,_n,st,yt,Ke.segment,Z?Z[0]:0,Z?Z[1]:0,le[0],le[1],je,0,!1,0,bt)},mi.prototype._addCollisionDebugVertex=function(M,z,Z,le,Te,Pe){return z.emplaceBack(0,0),M.emplaceBack(Z.x,Z.y,le,Te,Math.round(Pe.x),Math.round(Pe.y))},mi.prototype.addCollisionDebugVertices=function(M,z,Z,le,Te,Pe,je){var Ke=Te.segments.prepareSegment(4,Te.layoutVertexArray,Te.indexArray),st=Ke.vertexLength,yt=Te.layoutVertexArray,bt=Te.collisionVertexArray,Ot=je.anchorX,Ut=je.anchorY;this._addCollisionDebugVertex(yt,bt,Pe,Ot,Ut,new t(M,z)),this._addCollisionDebugVertex(yt,bt,Pe,Ot,Ut,new t(Z,z)),this._addCollisionDebugVertex(yt,bt,Pe,Ot,Ut,new t(Z,le)),this._addCollisionDebugVertex(yt,bt,Pe,Ot,Ut,new t(M,le)),Ke.vertexLength+=4;var Bt=Te.indexArray;Bt.emplaceBack(st,st+1),Bt.emplaceBack(st+1,st+2),Bt.emplaceBack(st+2,st+3),Bt.emplaceBack(st+3,st),Ke.primitiveLength+=4},mi.prototype.addDebugCollisionBoxes=function(M,z,Z,le){for(var Te=M;Te<z;Te++){var Pe=this.collisionBoxArray.get(Te),je=Pe.x1,Ke=Pe.y1,st=Pe.x2,yt=Pe.y2;this.addCollisionDebugVertices(je,Ke,st,yt,le?this.textCollisionBox:this.iconCollisionBox,Pe.anchorPoint,Z)}},mi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xc($,Hh.members,lt),this.iconCollisionBox=new Xc($,Hh.members,lt);for(var M=0;M<this.symbolInstances.length;M++){var z=this.symbolInstances.get(M);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},mi.prototype._deserializeCollisionBoxesForSymbol=function(M,z,Z,le,Te,Pe,je,Ke,st){for(var yt={},bt=z;bt<Z;bt++){var Ot=M.get(bt);yt.textBox={x1:Ot.x1,y1:Ot.y1,x2:Ot.x2,y2:Ot.y2,anchorPointX:Ot.anchorPointX,anchorPointY:Ot.anchorPointY},yt.textFeatureIndex=Ot.featureIndex;break}for(var Ut=le;Ut<Te;Ut++){var Bt=M.get(Ut);yt.verticalTextBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},yt.verticalTextFeatureIndex=Bt.featureIndex;break}for(var nn=Pe;nn<je;nn++){var on=M.get(nn);yt.iconBox={x1:on.x1,y1:on.y1,x2:on.x2,y2:on.y2,anchorPointX:on.anchorPointX,anchorPointY:on.anchorPointY},yt.iconFeatureIndex=on.featureIndex;break}for(var _n=Ke;_n<st;_n++){var yn=M.get(_n);yt.verticalIconBox={x1:yn.x1,y1:yn.y1,x2:yn.x2,y2:yn.y2,anchorPointX:yn.anchorPointX,anchorPointY:yn.anchorPointY},yt.verticalIconFeatureIndex=yn.featureIndex;break}return yt},mi.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var Z=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},mi.prototype.hasTextData=function(){return this.text.segments.get().length>0},mi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},mi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},mi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},mi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},mi.prototype.addIndicesForPlacedSymbol=function(M,z){for(var Z=M.placedSymbolArray.get(z),le=Z.vertexStartIndex+4*Z.numGlyphs,Te=Z.vertexStartIndex;Te<le;Te+=4)M.indexArray.emplaceBack(Te,Te+1,Te+2),M.indexArray.emplaceBack(Te+1,Te+2,Te+3)},mi.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var z=Math.sin(M),Z=Math.cos(M),le=[],Te=[],Pe=[],je=0;je<this.symbolInstances.length;++je){Pe.push(je);var Ke=this.symbolInstances.get(je);le.push(0|Math.round(z*Ke.anchorX+Z*Ke.anchorY)),Te.push(Ke.featureIndex)}return Pe.sort(function(st,yt){return le[st]-le[yt]||Te[yt]-Te[st]}),Pe},mi.prototype.addToSortKeyRanges=function(M,z){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===z?Z.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:M,symbolInstanceEnd:M+1})},mi.prototype.sortFeatures=function(M){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,le=this.symbolInstanceIndexes;Z<le.length;Z+=1){var Te=le[Z],Pe=this.symbolInstances.get(Te);this.featureSortOrder.push(Pe.featureIndex),[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach(function(je,Ke,st){je>=0&&st.indexOf(je)===Ke&&z.addIndicesForPlacedSymbol(z.text,je)}),Pe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Pe.verticalPlacedTextSymbolIndex),Pe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.placedIconSymbolIndex),Pe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Pe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},kr("SymbolBucket",mi,{omit:["layers","collisionBoxArray","features","compareText"]}),mi.MAX_GLYPHS=65535,mi.addDynamicAttributes=qf;var ug=new Oi({"symbol-placement":new Sr(Ge.layout_symbol["symbol-placement"]),"symbol-spacing":new Sr(Ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sr(Ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Or(Ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sr(Ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sr(Ge.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Sr(Ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sr(Ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sr(Ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Or(Ge.layout_symbol["icon-size"]),"icon-text-fit":new Sr(Ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sr(Ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Or(Ge.layout_symbol["icon-image"]),"icon-rotate":new Or(Ge.layout_symbol["icon-rotate"]),"icon-padding":new Sr(Ge.layout_symbol["icon-padding"]),"icon-keep-upright":new Sr(Ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Or(Ge.layout_symbol["icon-offset"]),"icon-anchor":new Or(Ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sr(Ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sr(Ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sr(Ge.layout_symbol["text-rotation-alignment"]),"text-field":new Or(Ge.layout_symbol["text-field"]),"text-font":new Or(Ge.layout_symbol["text-font"]),"text-size":new Or(Ge.layout_symbol["text-size"]),"text-max-width":new Or(Ge.layout_symbol["text-max-width"]),"text-line-height":new Sr(Ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Or(Ge.layout_symbol["text-letter-spacing"]),"text-justify":new Or(Ge.layout_symbol["text-justify"]),"text-radial-offset":new Or(Ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sr(Ge.layout_symbol["text-variable-anchor"]),"text-anchor":new Or(Ge.layout_symbol["text-anchor"]),"text-max-angle":new Sr(Ge.layout_symbol["text-max-angle"]),"text-writing-mode":new Sr(Ge.layout_symbol["text-writing-mode"]),"text-rotate":new Or(Ge.layout_symbol["text-rotate"]),"text-padding":new Sr(Ge.layout_symbol["text-padding"]),"text-keep-upright":new Sr(Ge.layout_symbol["text-keep-upright"]),"text-transform":new Or(Ge.layout_symbol["text-transform"]),"text-offset":new Or(Ge.layout_symbol["text-offset"]),"text-allow-overlap":new Sr(Ge.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Sr(Ge.layout_symbol["text-ignore-placement"]),"text-optional":new Sr(Ge.layout_symbol["text-optional"])}),Gf={paint:new Oi({"icon-opacity":new Or(Ge.paint_symbol["icon-opacity"]),"icon-color":new Or(Ge.paint_symbol["icon-color"]),"icon-halo-color":new Or(Ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Or(Ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Or(Ge.paint_symbol["icon-halo-blur"]),"icon-translate":new Sr(Ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sr(Ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Or(Ge.paint_symbol["text-opacity"]),"text-color":new Or(Ge.paint_symbol["text-color"],{runtimeType:tn,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Or(Ge.paint_symbol["text-halo-color"]),"text-halo-width":new Or(Ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Or(Ge.paint_symbol["text-halo-blur"]),"text-translate":new Sr(Ge.paint_symbol["text-translate"]),"text-translate-anchor":new Sr(Ge.paint_symbol["text-translate-anchor"])}),layout:ug},yc=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Lt,this.defaultValue=M};yc.prototype.evaluate=function(M){if(M.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(M.formattedSection))return z.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},yc.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},yc.prototype.outputDefined=function(){return!1},yc.prototype.serialize=function(){return null},kr("FormatSectionOverride",yc,{omit:["defaultValue"]});var fg=function(M){function z(Z){M.call(this,Z,Gf)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(Z,le){if(M.prototype.recalculate.call(this,Z,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Te=this.layout.get("text-writing-mode");if(Te){for(var Pe=[],je=0,Ke=Te;je<Ke.length;je+=1){var st=Ke[je];Pe.indexOf(st)<0&&Pe.push(st)}this.layout._values["text-writing-mode"]=Pe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(Z,le,Te,Pe){var je=this.layout.get(Z).evaluate(le,{},Te,Pe),Ke=this._unevaluatedLayout._values[Z];return Ke.isDataDriven()||os(Ke.value)||!je?je:function(st,yt){return yt.replace(/{([^{}]+)}/g,function(bt,Ot){return Ot in st?String(st[Ot]):""})}(le.properties,je)},z.prototype.createBucket=function(Z){return new mi(Z)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var Z=0,le=Gf.paint.overridableProperties;Z<le.length;Z+=1){var Te=le[Z];if(z.hasPaintOverride(this.layout,Te)){var Pe,je=this.paint.get(Te),Ke=new yc(je),st=new Uo(Ke,je.property.specification);Pe=je.value.kind==="constant"||je.value.kind==="source"?new Wa("source",st):new ys("composite",st,je.value.zoomStops,je.value._interpolationType),this.paint._values[Te]=new di(je.property,Pe,je.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(Z,le,Te){return!(!this.layout||le.isDataDriven()||Te.isDataDriven())&&z.hasPaintOverride(this.layout,Z)},z.hasPaintOverride=function(Z,le){var Te=Z.get("text-field"),Pe=Gf.paint.properties[le],je=!1,Ke=function(bt){for(var Ot=0,Ut=bt;Ot<Ut.length;Ot+=1){var Bt=Ut[Ot];if(Pe.overrides&&Pe.overrides.hasOverride(Bt))return void(je=!0)}};if(Te.value.kind==="constant"&&Te.value.value instanceof In)Ke(Te.value.value.sections);else if(Te.value.kind==="source"){var st=function(bt){if(!je)if(bt instanceof Jt&&Wn(bt.value)===Ln){var Ot=bt.value;Ke(Ot.sections)}else bt instanceof Cn?Ke(bt.sections):bt.eachChild(st)},yt=Te.value;yt._styleExpression&&st(yt._styleExpression.expression)}return je},z}(ii),hg={paint:new Oi({"background-color":new Sr(Ge.paint_background["background-color"]),"background-pattern":new go(Ge.paint_background["background-pattern"]),"background-opacity":new Sr(Ge.paint_background["background-opacity"])})},pg=function(M){function z(Z){M.call(this,Z,hg)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(ii),dg={paint:new Oi({"raster-opacity":new Sr(Ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sr(Ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sr(Ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sr(Ge.paint_raster["raster-brightness-max"]),"raster-saturation":new Sr(Ge.paint_raster["raster-saturation"]),"raster-contrast":new Sr(Ge.paint_raster["raster-contrast"]),"raster-resampling":new Sr(Ge.paint_raster["raster-resampling"]),"raster-fade-duration":new Sr(Ge.paint_raster["raster-fade-duration"])})},gg=function(M){function z(Z){M.call(this,Z,dg)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(ii),mg=function(M){function z(Z){M.call(this,Z,{}),this.implementation=Z}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},z.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},z.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},z}(ii),vg={circle:Jd,heatmap:Qd,hillshade:t0,fill:y0,"fill-extrusion":S0,line:D0,symbol:fg,background:pg,raster:gg},mp=n.HTMLImageElement,vp=n.HTMLCanvasElement,yp=n.HTMLVideoElement,xp=n.ImageData,ju=n.ImageBitmap,Yl=function(M,z,Z,le){this.context=M,this.format=Z,this.texture=M.gl.createTexture(),this.update(z,le)};Yl.prototype.update=function(M,z,Z){var le=M.width,Te=M.height,Pe=!(this.size&&this.size[0]===le&&this.size[1]===Te||Z),je=this.context,Ke=je.gl;if(this.useMipmap=!!(z&&z.useMipmap),Ke.bindTexture(Ke.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ke.RGBA&&(!z||z.premultiply!==!1)),Pe)this.size=[le,Te],M instanceof mp||M instanceof vp||M instanceof yp||M instanceof xp||ju&&M instanceof ju?Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,this.format,Ke.UNSIGNED_BYTE,M):Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,le,Te,0,this.format,Ke.UNSIGNED_BYTE,M.data);else{var st=Z||{x:0,y:0},yt=st.x,bt=st.y;M instanceof mp||M instanceof vp||M instanceof yp||M instanceof xp||ju&&M instanceof ju?Ke.texSubImage2D(Ke.TEXTURE_2D,0,yt,bt,Ke.RGBA,Ke.UNSIGNED_BYTE,M):Ke.texSubImage2D(Ke.TEXTURE_2D,0,yt,bt,le,Te,Ke.RGBA,Ke.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ke.generateMipmap(Ke.TEXTURE_2D)},Yl.prototype.bind=function(M,z,Z){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),Z!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=le.LINEAR),M!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,M),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,Z||M),this.filter=M),z!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,z),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,z),this.wrap=z)},Yl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Yl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Wf=function(M){var z=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};Wf.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Wf.prototype.remove=function(){delete this._channel,this._callback=function(){}};var xc=function(M,z,Z){this.target=M,this.parent=z,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new Wf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=O()?M:n};function bp(M,z,Z){var le=2*Math.PI*6378137/256/Math.pow(2,Z);return[M*le-2*Math.PI*6378137/2,z*le-2*Math.PI*6378137/2]}xc.prototype.send=function(M,z,Z,le,Te){var Pe=this;Te===void 0&&(Te=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[je]=Z);var Ke=D(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:M,hasCallback:!!Z,targetMapId:le,mustQueue:Te,sourceMapId:this.mapId,data:Yo(z,Ke)},Ke),{cancel:function(){Z&&delete Pe.callbacks[je],Pe.target.postMessage({id:je,type:"<cancel>",targetMapId:le,sourceMapId:Pe.mapId})}}},xc.prototype.receive=function(M){var z=M.data,Z=z.id;if(Z&&(!z.targetMapId||this.mapId===z.targetMapId))if(z.type==="<cancel>"){delete this.tasks[Z];var le=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],le&&le()}else O()||z.mustQueue?(this.tasks[Z]=z,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,z)},xc.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),z=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(M,z)}},xc.prototype.processTask=function(M,z){var Z=this;if(z.type==="<response>"){var le=this.callbacks[M];delete this.callbacks[M],le&&(z.error?le(hs(z.error)):le(null,hs(z.data)))}else{var Te=!1,Pe=D(this.globalScope)?void 0:[],je=z.hasCallback?function(bt,Ot){Te=!0,delete Z.cancelCallbacks[M],Z.target.postMessage({id:M,type:"<response>",sourceMapId:Z.mapId,error:bt?Yo(bt):null,data:Yo(Ot,Pe)},Pe)}:function(bt){Te=!0},Ke=null,st=hs(z.data);if(this.parent[z.type])Ke=this.parent[z.type](z.sourceMapId,st,je);else if(this.parent.getWorkerSource){var yt=z.type.split(".");Ke=this.parent.getWorkerSource(z.sourceMapId,yt[0],st.source)[yt[1]](st,je)}else je(new Error("Could not find function "+z.type));!Te&&Ke&&Ke.cancel&&(this.cancelCallbacks[M]=Ke.cancel)}},xc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ra=function(M,z){M&&(z?this.setSouthWest(M).setNorthEast(z):M.length===4?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};ra.prototype.setNorthEast=function(M){return this._ne=M instanceof Di?new Di(M.lng,M.lat):Di.convert(M),this},ra.prototype.setSouthWest=function(M){return this._sw=M instanceof Di?new Di(M.lng,M.lat):Di.convert(M),this},ra.prototype.extend=function(M){var z,Z,le=this._sw,Te=this._ne;if(M instanceof Di)z=M,Z=M;else{if(!(M instanceof ra)){if(Array.isArray(M)){if(M.length===4||M.every(Array.isArray)){var Pe=M;return this.extend(ra.convert(Pe))}var je=M;return this.extend(Di.convert(je))}return this}if(z=M._sw,Z=M._ne,!z||!Z)return this}return le||Te?(le.lng=Math.min(z.lng,le.lng),le.lat=Math.min(z.lat,le.lat),Te.lng=Math.max(Z.lng,Te.lng),Te.lat=Math.max(Z.lat,Te.lat)):(this._sw=new Di(z.lng,z.lat),this._ne=new Di(Z.lng,Z.lat)),this},ra.prototype.getCenter=function(){return new Di((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ra.prototype.getSouthWest=function(){return this._sw},ra.prototype.getNorthEast=function(){return this._ne},ra.prototype.getNorthWest=function(){return new Di(this.getWest(),this.getNorth())},ra.prototype.getSouthEast=function(){return new Di(this.getEast(),this.getSouth())},ra.prototype.getWest=function(){return this._sw.lng},ra.prototype.getSouth=function(){return this._sw.lat},ra.prototype.getEast=function(){return this._ne.lng},ra.prototype.getNorth=function(){return this._ne.lat},ra.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ra.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ra.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ra.prototype.contains=function(M){var z=Di.convert(M),Z=z.lng,le=z.lat,Te=this._sw.lat<=le&&le<=this._ne.lat,Pe=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Pe=this._sw.lng>=Z&&Z>=this._ne.lng),Te&&Pe},ra.convert=function(M){return!M||M instanceof ra?M:new ra(M)};var _p=63710088e-1,Di=function(M,z){if(isNaN(M)||isNaN(z))throw new Error("Invalid LngLat object: ("+M+", "+z+")");if(this.lng=+M,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Di.prototype.wrap=function(){return new Di(h(this.lng,-180,180),this.lat)},Di.prototype.toArray=function(){return[this.lng,this.lat]},Di.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Di.prototype.distanceTo=function(M){var z=Math.PI/180,Z=this.lat*z,le=M.lat*z,Te=Math.sin(Z)*Math.sin(le)+Math.cos(Z)*Math.cos(le)*Math.cos((M.lng-this.lng)*z);return _p*Math.acos(Math.min(Te,1))},Di.prototype.toBounds=function(M){M===void 0&&(M=0);var z=360*M/40075017,Z=z/Math.cos(Math.PI/180*this.lat);return new ra(new Di(this.lng-Z,this.lat-z),new Di(this.lng+Z,this.lat+z))},Di.convert=function(M){if(M instanceof Di)return M;if(Array.isArray(M)&&(M.length===2||M.length===3))return new Di(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&typeof M=="object"&&M!==null)return new Di(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var wp=2*Math.PI*_p;function Tp(M){return wp*Math.cos(M*Math.PI/180)}function kp(M){return(180+M)/360}function Ap(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function Mp(M,z){return M/Tp(z)}function Yf(M){var z=180-360*M;return 360/Math.PI*Math.atan(Math.exp(z*Math.PI/180))-90}var Zl=function(M,z,Z){Z===void 0&&(Z=0),this.x=+M,this.y=+z,this.z=+Z};Zl.fromLngLat=function(M,z){z===void 0&&(z=0);var Z=Di.convert(M);return new Zl(kp(Z.lng),Ap(Z.lat),Mp(z,Z.lat))},Zl.prototype.toLngLat=function(){return new Di(360*this.x-180,Yf(this.y))},Zl.prototype.toAltitude=function(){return M=this.z,z=this.y,M*Tp(Yf(z));var M,z},Zl.prototype.meterInMercatorCoordinateUnits=function(){return 1/wp*(M=Yf(this.y),1/Math.cos(M*Math.PI/180));var M};var Xl=function(M,z,Z){this.z=M,this.x=z,this.y=Z,this.key=Kc(0,M,M,z,Z)};Xl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Xl.prototype.url=function(M,z){var Z,le,Te,Pe,je,Ke=(Z=this.x,le=this.y,Te=this.z,Pe=bp(256*Z,256*(le=Math.pow(2,Te)-le-1),Te),je=bp(256*(Z+1),256*(le+1),Te),Pe[0]+","+Pe[1]+","+je[0]+","+je[1]),st=function(yt,bt,Ot){for(var Ut,Bt="",nn=yt;nn>0;nn--)Bt+=(bt&(Ut=1<<nn-1)?1:0)+(Ot&Ut?2:0);return Bt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(z==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Ke)},Xl.prototype.getTilePoint=function(M){var z=Math.pow(2,this.z);return new t((M.x*z-this.x)*Qr,(M.y*z-this.y)*Qr)},Xl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Sp=function(M,z){this.wrap=M,this.canonical=z,this.key=Kc(M,z.z,z.z,z.x,z.y)},ia=function(M,z,Z,le,Te){this.overscaledZ=M,this.wrap=z,this.canonical=new Xl(Z,+le,+Te),this.key=Kc(z,M,Z,le,Te)};function Kc(M,z,Z,le,Te){(M*=2)<0&&(M=-1*M-1);var Pe=1<<Z;return(Pe*Pe*M+Pe*Te+le).toString(36)+Z.toString(36)+z.toString(36)}ia.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},ia.prototype.scaledTo=function(M){var z=this.canonical.z-M;return M>this.canonical.z?new ia(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ia(M,this.wrap,M,this.canonical.x>>z,this.canonical.y>>z)},ia.prototype.calculateScaledKey=function(M,z){var Z=this.canonical.z-M;return M>this.canonical.z?Kc(this.wrap*+z,M,this.canonical.z,this.canonical.x,this.canonical.y):Kc(this.wrap*+z,M,M,this.canonical.x>>Z,this.canonical.y>>Z)},ia.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var z=this.canonical.z-M.canonical.z;return M.overscaledZ===0||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>z&&M.canonical.y===this.canonical.y>>z},ia.prototype.children=function(M){if(this.overscaledZ>=M)return[new ia(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,Z=2*this.canonical.x,le=2*this.canonical.y;return[new ia(z,this.wrap,z,Z,le),new ia(z,this.wrap,z,Z+1,le),new ia(z,this.wrap,z,Z,le+1),new ia(z,this.wrap,z,Z+1,le+1)]},ia.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},ia.prototype.wrapped=function(){return new ia(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ia.prototype.unwrapTo=function(M){return new ia(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},ia.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ia.prototype.toUnwrapped=function(){return new Sp(this.wrap,this.canonical)},ia.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ia.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new Zl(M.x-this.wrap,M.y))},kr("CanonicalTileID",Xl),kr("OverscaledTileID",ia,{omit:["posMatrix"]});var yl=function(M,z,Z){if(this.uid=M,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(Z&&Z!=="mapbox"&&Z!=="terrarium")return E('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var le=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=Z||"mapbox";for(var Te=0;Te<le;Te++)this.data[this._idx(-1,Te)]=this.data[this._idx(0,Te)],this.data[this._idx(le,Te)]=this.data[this._idx(le-1,Te)],this.data[this._idx(Te,-1)]=this.data[this._idx(Te,0)],this.data[this._idx(Te,le)]=this.data[this._idx(Te,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};yl.prototype.get=function(M,z){var Z=new Uint8Array(this.data.buffer),le=4*this._idx(M,z);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Z[le],Z[le+1],Z[le+2])},yl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},yl.prototype._idx=function(M,z){if(M<-1||M>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(M+1)},yl.prototype._unpackMapbox=function(M,z,Z){return(256*M*256+256*z+Z)/10-1e4},yl.prototype._unpackTerrarium=function(M,z,Z){return 256*M+z+Z/256-32768},yl.prototype.getPixels=function(){return new vo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},yl.prototype.backfillBorder=function(M,z,Z){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var le=z*this.dim,Te=z*this.dim+this.dim,Pe=Z*this.dim,je=Z*this.dim+this.dim;switch(z){case-1:le=Te-1;break;case 1:Te=le+1}switch(Z){case-1:Pe=je-1;break;case 1:je=Pe+1}for(var Ke=-z*this.dim,st=-Z*this.dim,yt=Pe;yt<je;yt++)for(var bt=le;bt<Te;bt++)this.data[this._idx(bt,yt)]=M.data[this._idx(bt+Ke,yt+st)]},kr("DEMData",yl);var Uu=function(M){this._stringToNumber={},this._numberToString=[];for(var z=0;z<M.length;z++){var Z=M[z];this._stringToNumber[Z]=z,this._numberToString[z]=Z}};Uu.prototype.encode=function(M){return this._stringToNumber[M]},Uu.prototype.decode=function(M){return this._numberToString[M]};var Vu=function(M,z,Z,le,Te){this.type="Feature",this._vectorTileFeature=M,M._z=z,M._x=Z,M._y=le,this.properties=M.properties,this.id=Te},Zf={geometry:{configurable:!0}};Zf.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Zf.geometry.set=function(M){this._geometry=M},Vu.prototype.toJSON=function(){var M={geometry:this.geometry};for(var z in this)z!=="_geometry"&&z!=="_vectorTileFeature"&&(M[z]=this[z]);return M},Object.defineProperties(Vu.prototype,Zf);var bc=function(){this.state={},this.stateChanges={},this.deletedStates={}};bc.prototype.updateState=function(M,z,Z){var le=String(z);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][le]=this.stateChanges[M][le]||{},u(this.stateChanges[M][le],Z),this.deletedStates[M]===null)for(var Te in this.deletedStates[M]={},this.state[M])Te!==le&&(this.deletedStates[M][Te]=null);else if(this.deletedStates[M]&&this.deletedStates[M][le]===null)for(var Pe in this.deletedStates[M][le]={},this.state[M][le])Z[Pe]||(this.deletedStates[M][le][Pe]=null);else for(var je in Z)this.deletedStates[M]&&this.deletedStates[M][le]&&this.deletedStates[M][le][je]===null&&delete this.deletedStates[M][le][je]},bc.prototype.removeFeatureState=function(M,z,Z){if(this.deletedStates[M]!==null){var le=String(z);if(this.deletedStates[M]=this.deletedStates[M]||{},Z&&z!==void 0)this.deletedStates[M][le]!==null&&(this.deletedStates[M][le]=this.deletedStates[M][le]||{},this.deletedStates[M][le][Z]=null);else if(z!==void 0)if(this.stateChanges[M]&&this.stateChanges[M][le])for(Z in this.deletedStates[M][le]={},this.stateChanges[M][le])this.deletedStates[M][le][Z]=null;else this.deletedStates[M][le]=null;else this.deletedStates[M]=null}},bc.prototype.getState=function(M,z){var Z=String(z),le=this.state[M]||{},Te=this.stateChanges[M]||{},Pe=u({},le[Z],Te[Z]);if(this.deletedStates[M]===null)return{};if(this.deletedStates[M]){var je=this.deletedStates[M][z];if(je===null)return{};for(var Ke in je)delete Pe[Ke]}return Pe},bc.prototype.initializeTileState=function(M,z){M.setFeatureState(this.state,z)},bc.prototype.coalesceChanges=function(M,z){var Z={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var Te={};for(var Pe in this.stateChanges[le])this.state[le][Pe]||(this.state[le][Pe]={}),u(this.state[le][Pe],this.stateChanges[le][Pe]),Te[Pe]=this.state[le][Pe];Z[le]=Te}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Ke={};if(this.deletedStates[je]===null)for(var st in this.state[je])Ke[st]={},this.state[je][st]={};else for(var yt in this.deletedStates[je]){if(this.deletedStates[je][yt]===null)this.state[je][yt]={};else for(var bt=0,Ot=Object.keys(this.deletedStates[je][yt]);bt<Ot.length;bt+=1){var Ut=Ot[bt];delete this.state[je][yt][Ut]}Ke[yt]=this.state[je][yt]}Z[je]=Z[je]||{},u(Z[je],Ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(Z).length!==0)for(var Bt in M)M[Bt].setFeatureState(Z,z)};var xl=function(M,z){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new fs(Qr,16,0),this.grid3D=new fs(Qr,16,0),this.featureIndexArray=new kn,this.promoteId=z};function Ep(M,z,Z,le,Te){return _(M,function(Pe,je){var Ke=z instanceof ds?z.get(je):null;return Ke&&Ke.evaluate?Ke.evaluate(Z,le,Te):Ke})}function Lp(M){for(var z=1/0,Z=1/0,le=-1/0,Te=-1/0,Pe=0,je=M;Pe<je.length;Pe+=1){var Ke=je[Pe];z=Math.min(z,Ke.x),Z=Math.min(Z,Ke.y),le=Math.max(le,Ke.x),Te=Math.max(Te,Ke.y)}return{minX:z,minY:Z,maxX:le,maxY:Te}}function yg(M,z){return z-M}xl.prototype.insert=function(M,z,Z,le,Te,Pe){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,le,Te);for(var Ke=Pe?this.grid3D:this.grid,st=0;st<z.length;st++){for(var yt=z[st],bt=[1/0,1/0,-1/0,-1/0],Ot=0;Ot<yt.length;Ot++){var Ut=yt[Ot];bt[0]=Math.min(bt[0],Ut.x),bt[1]=Math.min(bt[1],Ut.y),bt[2]=Math.max(bt[2],Ut.x),bt[3]=Math.max(bt[3],Ut.y)}bt[0]<Qr&&bt[1]<Qr&&bt[2]>=0&&bt[3]>=0&&Ke.insert(je,bt[0],bt[1],bt[2],bt[3])}},xl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new lc.VectorTile(new Cu(this.rawTileData)).layers,this.sourceLayerCoder=new Uu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},xl.prototype.query=function(M,z,Z,le){var Te=this;this.loadVTLayers();for(var Pe=M.params||{},je=Qr/M.tileSize/M.scale,Ke=zs(Pe.filter),st=M.queryGeometry,yt=M.queryPadding*je,bt=Lp(st),Ot=this.grid.query(bt.minX-yt,bt.minY-yt,bt.maxX+yt,bt.maxY+yt),Ut=Lp(M.cameraQueryGeometry),Bt=0,nn=this.grid3D.query(Ut.minX-yt,Ut.minY-yt,Ut.maxX+yt,Ut.maxY+yt,function(Un,Zn,rr,vr){return function(pr,_r,Tr,Br,Cr){for(var Fr=0,Ir=pr;Fr<Ir.length;Fr+=1){var Lr=Ir[Fr];if(_r<=Lr.x&&Tr<=Lr.y&&Br>=Lr.x&&Cr>=Lr.y)return!0}var Jr=[new t(_r,Tr),new t(_r,Cr),new t(Br,Cr),new t(Br,Tr)];if(pr.length>2){for(var Vr=0,_i=Jr;Vr<_i.length;Vr+=1)if(ol(pr,_i[Vr]))return!0}for(var Rr=0;Rr<pr.length-1;Rr++)if(Gd(pr[Rr],pr[Rr+1],Jr))return!0;return!1}(M.cameraQueryGeometry,Un-yt,Zn-yt,rr+yt,vr+yt)});Bt<nn.length;Bt+=1){var on=nn[Bt];Ot.push(on)}Ot.sort(yg);for(var _n,yn={},Dn=function(Un){var Zn=Ot[Un];if(Zn!==_n){_n=Zn;var rr=Te.featureIndexArray.get(Zn),vr=null;Te.loadMatchingFeature(yn,rr.bucketIndex,rr.sourceLayerIndex,rr.featureIndex,Ke,Pe.layers,Pe.availableImages,z,Z,le,function(pr,_r,Tr){return vr||(vr=Co(pr)),_r.queryIntersectsFeature(st,pr,Tr,vr,Te.z,M.transform,je,M.pixelPosMatrix)})}},zn=0;zn<Ot.length;zn++)Dn(zn);return yn},xl.prototype.loadMatchingFeature=function(M,z,Z,le,Te,Pe,je,Ke,st,yt,bt){var Ot=this.bucketLayerIDs[z];if(!Pe||function(pr,_r){for(var Tr=0;Tr<pr.length;Tr++)if(_r.indexOf(pr[Tr])>=0)return!0;return!1}(Pe,Ot)){var Ut=this.sourceLayerCoder.decode(Z),Bt=this.vtLayers[Ut].feature(le);if(Te.needGeometry){var nn=Mi(Bt,!0);if(!Te.filter(new Wr(this.tileID.overscaledZ),nn,this.tileID.canonical))return}else if(!Te.filter(new Wr(this.tileID.overscaledZ),Bt))return;for(var on=this.getId(Bt,Ut),_n=0;_n<Ot.length;_n++){var yn=Ot[_n];if(!(Pe&&Pe.indexOf(yn)<0)){var Dn=Ke[yn];if(Dn){var zn={};on!==void 0&&yt&&(zn=yt.getState(Dn.sourceLayer||"_geojsonTileLayer",on));var Un=u({},st[yn]);Un.paint=Ep(Un.paint,Dn.paint,Bt,zn,je),Un.layout=Ep(Un.layout,Dn.layout,Bt,zn,je);var Zn=!bt||bt(Bt,Dn,zn);if(Zn){var rr=new Vu(Bt,this.z,this.x,this.y,on);rr.layer=Un;var vr=M[yn];vr===void 0&&(vr=M[yn]=[]),vr.push({featureIndex:le,feature:rr,intersectionZ:Zn})}}}}}},xl.prototype.lookupSymbolFeatures=function(M,z,Z,le,Te,Pe,je,Ke){var st={};this.loadVTLayers();for(var yt=zs(Te),bt=0,Ot=M;bt<Ot.length;bt+=1){var Ut=Ot[bt];this.loadMatchingFeature(st,Z,le,Ut,yt,Pe,je,Ke,z)}return st},xl.prototype.hasLayer=function(M){for(var z=0,Z=this.bucketLayerIDs;z<Z.length;z+=1)for(var le=0,Te=Z[z];le<Te.length;le+=1)if(M===Te[le])return!0;return!1},xl.prototype.getId=function(M,z){var Z=M.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[z];typeof(Z=M.properties[le])=="boolean"&&(Z=Number(Z))}return Z},kr("FeatureIndex",xl,{omit:["rawTileData","sourceLayerCoder"]});var ma=function(M,z){this.tileID=M,this.uid=d(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ma.prototype.registerFadeDuration=function(M){var z=M+this.timeAdded;z<J.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},ma.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ma.prototype.loadVectorData=function(M,z,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var le in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(yt,bt){var Ot={};if(!bt)return Ot;for(var Ut=function(){var on=nn[Bt],_n=on.layerIds.map(function(Un){return bt.getLayer(Un)}).filter(Boolean);if(_n.length!==0){on.layers=_n,on.stateDependentLayerIds&&(on.stateDependentLayers=on.stateDependentLayerIds.map(function(Un){return _n.filter(function(Zn){return Zn.id===Un})[0]}));for(var yn=0,Dn=_n;yn<Dn.length;yn+=1){var zn=Dn[yn];Ot[zn.id]=on}}},Bt=0,nn=yt;Bt<nn.length;Bt+=1)Ut();return Ot}(M.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var Te=this.buckets[le];if(Te instanceof mi){if(this.hasSymbolBuckets=!0,!Z)break;Te.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Pe in this.buckets){var je=this.buckets[Pe];if(je instanceof mi&&je.hasRTLText){this.hasRTLText=!0,ga.isLoading()||ga.isLoaded()||Ts()!=="deferred"||ks();break}}for(var Ke in this.queryPadding=0,this.buckets){var st=this.buckets[Ke];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(Ke).queryRadius(st))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new _t},ma.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ma.prototype.getBucket=function(M){return this.buckets[M.id]},ma.prototype.upload=function(M){for(var z in this.buckets){var Z=this.buckets[z];Z.uploadPending()&&Z.upload(M)}var le=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yl(M,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yl(M,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},ma.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},ma.prototype.queryRenderedFeatures=function(M,z,Z,le,Te,Pe,je,Ke,st,yt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:Te,scale:Pe,tileSize:this.tileSize,pixelPosMatrix:yt,transform:Ke,params:je,queryPadding:this.queryPadding*st},M,z,Z):{}},ma.prototype.querySourceFeatures=function(M,z){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var le=Z.loadVTLayers(),Te=z?z.sourceLayer:"",Pe=le._geojsonTileLayer||le[Te];if(Pe)for(var je=zs(z&&z.filter),Ke=this.tileID.canonical,st=Ke.z,yt=Ke.x,bt=Ke.y,Ot={z:st,x:yt,y:bt},Ut=0;Ut<Pe.length;Ut++){var Bt=Pe.feature(Ut);if(je.needGeometry){var nn=Mi(Bt,!0);if(!je.filter(new Wr(this.tileID.overscaledZ),nn,this.tileID.canonical))continue}else if(!je.filter(new Wr(this.tileID.overscaledZ),Bt))continue;var on=Z.getId(Bt,Te),_n=new Vu(Bt,st,yt,bt,on);_n.tile=Ot,M.push(_n)}}},ma.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ma.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ma.prototype.setExpiryData=function(M){var z=this.expirationTime;if(M.cacheControl){var Z=R(M.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var le=Date.now(),Te=!1;if(this.expirationTime>le)Te=!1;else if(z)if(this.expirationTime<z)Te=!0;else{var Pe=this.expirationTime-z;Pe?this.expirationTime=le+Math.max(Pe,3e4):Te=!0}else Te=!0;Te?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ma.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ma.prototype.setFeatureState=function(M,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(M).length!==0){var Z=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(z.style.hasLayer(le)){var Te=this.buckets[le],Pe=Te.layers[0].sourceLayer||"_geojsonTileLayer",je=Z[Pe],Ke=M[Pe];if(je&&Ke&&Object.keys(Ke).length!==0){Te.update(Ke,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=z&&z.style&&z.style.getLayer(le);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(Te)))}}}},ma.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ma.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<J.now()},ma.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ma.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=J.now()+M},ma.prototype.setDependencies=function(M,z){for(var Z={},le=0,Te=z;le<Te.length;le+=1)Z[Te[le]]=!0;this.dependencies[M]=Z},ma.prototype.hasDependency=function(M,z){for(var Z=0,le=M;Z<le.length;Z+=1){var Te=le[Z],Pe=this.dependencies[Te];if(Pe){for(var je=0,Ke=z;je<Ke.length;je+=1)if(Pe[Ke[je]])return!0}}return!1};var Rl=n.performance,Cp=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},Rl.mark(this._marks.start)};Cp.prototype.finish=function(){Rl.mark(this._marks.end);var M=Rl.getEntriesByName(this._marks.measure);return M.length===0&&(Rl.measure(this._marks.measure,this._marks.start,this._marks.end),M=Rl.getEntriesByName(this._marks.measure),Rl.clearMarks(this._marks.start),Rl.clearMarks(this._marks.end),Rl.clearMeasures(this._marks.measure)),M},o.Actor=xc,o.AlphaImage=Wl,o.CanonicalTileID=Xl,o.CollisionBoxArray=_t,o.Color=Sn,o.DEMData=yl,o.DataConstantProperty=Sr,o.DictionaryCoder=Uu,o.EXTENT=Qr,o.ErrorEvent=Fe,o.EvaluationParameters=Wr,o.Event=Re,o.Evented=nt,o.FeatureIndex=xl,o.FillBucket=qs,o.FillExtrusionBucket=Gs,o.ImageAtlas=Wc,o.ImagePosition=Iu,o.LineBucket=Qa,o.LngLat=Di,o.LngLatBounds=ra,o.MercatorCoordinate=Zl,o.ONE_EM=wa,o.OverscaledTileID=ia,o.Point=t,o.Point$1=t,o.Properties=Oi,o.Protobuf=Cu,o.RGBAImage=vo,o.RequestManager=ve,o.RequestPerformance=Cp,o.ResourceType=ht,o.SegmentVector=Nn,o.SourceFeatureState=bc,o.StructArrayLayout1ui2=ft,o.StructArrayLayout2f1f2i16=ne,o.StructArrayLayout2i4=Ko,o.StructArrayLayout3ui6=xe,o.StructArrayLayout4i8=ml,o.SymbolBucket=mi,o.Texture=Yl,o.Tile=ma,o.Transitionable=Ja,o.Uniform1f=qr,o.Uniform1i=jr,o.Uniform2f=Yr,o.Uniform3f=gi,o.Uniform4f=Li,o.UniformColor=la,o.UniformMatrix4f=ta,o.UnwrappedTileID=Sp,o.ValidationError=ut,o.WritingMode=$o,o.ZoomHistory=ws,o.add=function(M,z,Z){return M[0]=z[0]+Z[0],M[1]=z[1]+Z[1],M[2]=z[2]+Z[2],M},o.addDynamicAttributes=qf,o.asyncAll=function(M,z,Z){if(!M.length)return Z(null,[]);var le=M.length,Te=new Array(M.length),Pe=null;M.forEach(function(je,Ke){z(je,function(st,yt){st&&(Pe=st),Te[Ke]=yt,--le==0&&Z(Pe,Te)})})},o.bezier=a,o.bindAll=y,o.browser=J,o.cacheEntryPossiblyAdded=function(M){++dt>De&&(M.getActor().send("enforceCacheSizeLimit",Ae),dt=0)},o.clamp=c,o.clearTileCache=function(M){var z=n.caches.delete(_e);M&&z.catch(M).then(function(){return M()})},o.clipLine=up,o.clone=function(M){var z=new Jo(16);return z[0]=M[0],z[1]=M[1],z[2]=M[2],z[3]=M[3],z[4]=M[4],z[5]=M[5],z[6]=M[6],z[7]=M[7],z[8]=M[8],z[9]=M[9],z[10]=M[10],z[11]=M[11],z[12]=M[12],z[13]=M[13],z[14]=M[14],z[15]=M[15],z},o.clone$1=S,o.clone$2=function(M){var z=new Jo(3);return z[0]=M[0],z[1]=M[1],z[2]=M[2],z},o.collisionCircleLayout=B0,o.config=K,o.create=function(){var M=new Jo(16);return Jo!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},o.create$1=function(){var M=new Jo(9);return Jo!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},o.create$2=function(){var M=new Jo(4);return Jo!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},o.createCommonjsModule=T,o.createExpression=Ao,o.createLayout=yi,o.createStyleLayer=function(M){return M.type==="custom"?new mg(M):new vg[M.type](M)},o.cross=function(M,z,Z){var le=z[0],Te=z[1],Pe=z[2],je=Z[0],Ke=Z[1],st=Z[2];return M[0]=Te*st-Pe*Ke,M[1]=Pe*je-le*st,M[2]=le*Ke-Te*je,M},o.deepEqual=function M(z,Z){if(Array.isArray(z)){if(!Array.isArray(Z)||z.length!==Z.length)return!1;for(var le=0;le<z.length;le++)if(!M(z[le],Z[le]))return!1;return!0}if(typeof z=="object"&&z!==null&&Z!==null){if(typeof Z!="object"||Object.keys(z).length!==Object.keys(Z).length)return!1;for(var Te in z)if(!M(z[Te],Z[Te]))return!1;return!0}return z===Z},o.dot=function(M,z){return M[0]*z[0]+M[1]*z[1]+M[2]*z[2]},o.dot$1=function(M,z){return M[0]*z[0]+M[1]*z[1]+M[2]*z[2]+M[3]*z[3]},o.ease=l,o.emitValidationErrors=ha,o.endsWith=v,o.enforceCacheSizeLimit=function(M){Be(),fe&&fe.then(function(z){z.keys().then(function(Z){for(var le=0;le<Z.length-M;le++)z.delete(Z[le])})})},o.evaluateSizeForFeature=rp,o.evaluateSizeForZoom=ip,o.evaluateVariableOffset=pp,o.evented=da,o.extend=u,o.featureFilter=zs,o.filterObject=f,o.fromRotation=function(M,z){var Z=Math.sin(z),le=Math.cos(z);return M[0]=le,M[1]=Z,M[2]=0,M[3]=-Z,M[4]=le,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},o.getAnchorAlignment=jf,o.getAnchorJustification=Hf,o.getArrayBuffer=It,o.getImage=We,o.getJSON=function(M,z){return Pt(u(M,{type:"json"}),z)},o.getRTLTextPluginStatus=Ts,o.getReferrer=Je,o.getVideo=function(M,z){var Z,le,Te=n.document.createElement("video");Te.muted=!0,Te.onloadstart=function(){z(null,Te)};for(var Pe=0;Pe<M.length;Pe++){var je=n.document.createElement("source");Z=M[Pe],le=void 0,(le=n.document.createElement("a")).href=Z,le.protocol===n.document.location.protocol&&le.host===n.document.location.host||(Te.crossOrigin="Anonymous"),je.src=M[Pe],Te.appendChild(je)}return{cancel:function(){}}},o.identity=Mf,o.invert=function(M,z){var Z=z[0],le=z[1],Te=z[2],Pe=z[3],je=z[4],Ke=z[5],st=z[6],yt=z[7],bt=z[8],Ot=z[9],Ut=z[10],Bt=z[11],nn=z[12],on=z[13],_n=z[14],yn=z[15],Dn=Z*Ke-le*je,zn=Z*st-Te*je,Un=Z*yt-Pe*je,Zn=le*st-Te*Ke,rr=le*yt-Pe*Ke,vr=Te*yt-Pe*st,pr=bt*on-Ot*nn,_r=bt*_n-Ut*nn,Tr=bt*yn-Bt*nn,Br=Ot*_n-Ut*on,Cr=Ot*yn-Bt*on,Fr=Ut*yn-Bt*_n,Ir=Dn*Fr-zn*Cr+Un*Br+Zn*Tr-rr*_r+vr*pr;return Ir?(Ir=1/Ir,M[0]=(Ke*Fr-st*Cr+yt*Br)*Ir,M[1]=(Te*Cr-le*Fr-Pe*Br)*Ir,M[2]=(on*vr-_n*rr+yn*Zn)*Ir,M[3]=(Ut*rr-Ot*vr-Bt*Zn)*Ir,M[4]=(st*Tr-je*Fr-yt*_r)*Ir,M[5]=(Z*Fr-Te*Tr+Pe*_r)*Ir,M[6]=(_n*Un-nn*vr-yn*zn)*Ir,M[7]=(bt*vr-Ut*Un+Bt*zn)*Ir,M[8]=(je*Cr-Ke*Tr+yt*pr)*Ir,M[9]=(le*Tr-Z*Cr-Pe*pr)*Ir,M[10]=(nn*rr-on*Un+yn*Dn)*Ir,M[11]=(Ot*Un-bt*rr-Bt*Dn)*Ir,M[12]=(Ke*_r-je*Br-st*pr)*Ir,M[13]=(Z*Br-le*_r+Te*pr)*Ir,M[14]=(on*zn-nn*Zn-_n*Dn)*Ir,M[15]=(bt*Zn-Ot*zn+Ut*Dn)*Ir,M):null},o.isChar=yr,o.isMapboxURL=ye,o.keysDifference=function(M,z){var Z=[];for(var le in M)le in z||Z.push(le);return Z},o.makeRequest=Pt,o.mapObject=_,o.mercatorXfromLng=kp,o.mercatorYfromLat=Ap,o.mercatorZfromAltitude=Mp,o.mul=Zd,o.multiply=Ah,o.mvt=lc,o.nextPowerOfTwo=function(M){return M<=1?1:Math.pow(2,Math.ceil(Math.log(M)/Math.LN2))},o.normalize=function(M,z){var Z=z[0],le=z[1],Te=z[2],Pe=Z*Z+le*le+Te*Te;return Pe>0&&(Pe=1/Math.sqrt(Pe)),M[0]=z[0]*Pe,M[1]=z[1]*Pe,M[2]=z[2]*Pe,M},o.number=Dr,o.offscreenCanvasSupported=mt,o.ortho=function(M,z,Z,le,Te,Pe,je){var Ke=1/(z-Z),st=1/(le-Te),yt=1/(Pe-je);return M[0]=-2*Ke,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*st,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*yt,M[11]=0,M[12]=(z+Z)*Ke,M[13]=(Te+le)*st,M[14]=(je+Pe)*yt,M[15]=1,M},o.parseGlyphPBF=function(M){return new Cu(M).readFields(X0,[])},o.pbf=Cu,o.performSymbolLayout=function(M,z,Z,le,Te,Pe,je){M.createArrays();var Ke=512*M.overscaling;M.tilePixelRatio=Qr/Ke,M.compareText={},M.iconsNeedLinear=!1;var st=M.layers[0].layout,yt=M.layers[0]._unevaluatedLayout._values,bt={};if(M.textSizeData.kind==="composite"){var Ot=M.textSizeData,Ut=Ot.minZoom,Bt=Ot.maxZoom;bt.compositeTextSizes=[yt["text-size"].possiblyEvaluate(new Wr(Ut),je),yt["text-size"].possiblyEvaluate(new Wr(Bt),je)]}if(M.iconSizeData.kind==="composite"){var nn=M.iconSizeData,on=nn.minZoom,_n=nn.maxZoom;bt.compositeIconSizes=[yt["icon-size"].possiblyEvaluate(new Wr(on),je),yt["icon-size"].possiblyEvaluate(new Wr(_n),je)]}bt.layoutTextSize=yt["text-size"].possiblyEvaluate(new Wr(M.zoom+1),je),bt.layoutIconSize=yt["icon-size"].possiblyEvaluate(new Wr(M.zoom+1),je),bt.textMaxSize=yt["text-size"].possiblyEvaluate(new Wr(18));for(var yn=st.get("text-line-height")*wa,Dn=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",zn=st.get("text-keep-upright"),Un=st.get("text-size"),Zn=function(){var pr=vr[rr],_r=st.get("text-font").evaluate(pr,{},je).join(","),Tr=Un.evaluate(pr,{},je),Br=bt.layoutTextSize.evaluate(pr,{},je),Cr=bt.layoutIconSize.evaluate(pr,{},je),Fr={horizontal:{},vertical:void 0},Ir=pr.text,Lr=[0,0];if(Ir){var Jr=Ir.toString(),Vr=st.get("text-letter-spacing").evaluate(pr,{},je)*wa,_i=function(Hr){for(var ei=0,Wi=Hr;ei<Wi.length;ei+=1)if(bi=Wi[ei].charCodeAt(0),yr.Arabic(bi)||yr["Arabic Supplement"](bi)||yr["Arabic Extended-A"](bi)||yr["Arabic Presentation Forms-A"](bi)||yr["Arabic Presentation Forms-B"](bi))return!1;var bi;return!0}(Jr)?Vr:0,Rr=st.get("text-anchor").evaluate(pr,{},je),vi=st.get("text-variable-anchor");if(!vi){var Ei=st.get("text-radial-offset").evaluate(pr,{},je);Lr=Ei?pp(Rr,[Ei*wa,Vf]):st.get("text-offset").evaluate(pr,{},je).map(function(Hr){return Hr*wa})}var Pi=Dn?"center":st.get("text-justify").evaluate(pr,{},je),Ii=st.get("symbol-placement"),wi=Ii==="point"?st.get("text-max-width").evaluate(pr,{},je)*wa:0,aa=function(){M.allowVerticalPlacement&&Us(Jr)&&(Fr.vertical=Ou(Ir,z,Z,Te,_r,wi,yn,Rr,"left",_i,Lr,$o.vertical,!0,Ii,Br,Tr))};if(!Dn&&vi){for(var Fi=Pi==="auto"?vi.map(function(Hr){return Hf(Hr)}):[Pi],va=!1,Pa=0;Pa<Fi.length;Pa++){var Ta=Fi[Pa];if(!Fr.horizontal[Ta])if(va)Fr.horizontal[Ta]=Fr.horizontal[0];else{var eo=Ou(Ir,z,Z,Te,_r,wi,yn,"center",Ta,_i,Lr,$o.horizontal,!1,Ii,Br,Tr);eo&&(Fr.horizontal[Ta]=eo,va=eo.positionedLines.length===1)}}aa()}else{Pi==="auto"&&(Pi=Hf(Rr));var ka=Ou(Ir,z,Z,Te,_r,wi,yn,Rr,Pi,_i,Lr,$o.horizontal,!1,Ii,Br,Tr);ka&&(Fr.horizontal[Pi]=ka),aa(),Us(Jr)&&Dn&&zn&&(Fr.vertical=Ou(Ir,z,Z,Te,_r,wi,yn,Rr,Pi,_i,Lr,$o.vertical,!1,Ii,Br,Tr))}}var ca=void 0,Aa=!1;if(pr.icon&&pr.icon.name){var ya=le[pr.icon.name];ya&&(ca=function(Hr,ei,Wi){var bi=jf(Wi),ji=bi.horizontalAlign,zi=bi.verticalAlign,ai=ei[0],Yi=ei[1],to=ai-Hr.displaySize[0]*ji,Oo=to+Hr.displaySize[0],Ua=Yi-Hr.displaySize[1]*zi;return{image:Hr,top:Ua,bottom:Ua+Hr.displaySize[1],left:to,right:Oo}}(Te[pr.icon.name],st.get("icon-offset").evaluate(pr,{},je),st.get("icon-anchor").evaluate(pr,{},je)),Aa=ya.sdf,M.sdfIcons===void 0?M.sdfIcons=ya.sdf:M.sdfIcons!==ya.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ya.pixelRatio!==M.pixelRatio||st.get("icon-rotate").constantOr(1)!==0)&&(M.iconsNeedLinear=!0))}var ua=gp(Fr.horizontal)||Fr.vertical;M.iconsInText=!!ua&&ua.iconsInText,(ua||ca)&&function(Hr,ei,Wi,bi,ji,zi,ai,Yi,to,Oo,Ua){var Ys=zi.textMaxSize.evaluate(ei,{});Ys===void 0&&(Ys=ai);var bl,xa=Hr.layers[0].layout,Zs=xa.get("icon-offset").evaluate(ei,{},Ua),Ls=gp(Wi.horizontal),Cs=24,Kl=ai/Cs,Hu=Hr.tilePixelRatio*Kl,Jl=Hr.tilePixelRatio*Ys/Cs,qu=Hr.tilePixelRatio*Yi,Jc=Hr.tilePixelRatio*xa.get("symbol-spacing"),Xf=xa.get("text-padding")*Hr.tilePixelRatio,Gu=xa.get("icon-padding")*Hr.tilePixelRatio,_c=xa.get("text-max-angle")/180*Math.PI,Wu=xa.get("text-rotation-alignment")==="map"&&xa.get("symbol-placement")!=="point",Yu=xa.get("icon-rotation-alignment")==="map"&&xa.get("symbol-placement")!=="point",$c=xa.get("symbol-placement"),Kf=Jc/2,Qc=xa.get("icon-text-fit");bi&&Qc!=="none"&&(Hr.allowVerticalPlacement&&Wi.vertical&&(bl=np(bi,Wi.vertical,Qc,xa.get("icon-text-fit-padding"),Zs,Kl)),Ls&&(bi=np(bi,Ls,Qc,xa.get("icon-text-fit-padding"),Zs,Kl)));var $l=function(xg,au){au.x<0||au.x>=Qr||au.y<0||au.y>=Qr||function($i,Xs,bg,Fl,nh,zp,$u,sl,Qu,ou,ef,tf,rh,Rp,su,Fp,Bp,Np,jp,Up,Qo,nf,Vp,ll,_g){var Hp,tc,kc,Ac,Mc,Sc=$i.addToLineVertexArray(Xs,bg),qp=0,Gp=0,Wp=0,Yp=0,ih=-1,ah=-1,_l={},Zp=xr(""),oh=0,sh=0;if(sl._unevaluatedLayout.getValue("text-radial-offset")===void 0?(oh=(Hp=sl.layout.get("text-offset").evaluate(Qo,{},ll).map(function(cu){return cu*wa}))[0],sh=Hp[1]):(oh=sl.layout.get("text-radial-offset").evaluate(Qo,{},ll)*wa,sh=Vf),$i.allowVerticalPlacement&&Fl.vertical){var Xp=sl.layout.get("text-rotate").evaluate(Qo,{},ll)+90,wg=Fl.vertical;Ac=new Bu(Qu,Xs,ou,ef,tf,wg,rh,Rp,su,Xp),$u&&(Mc=new Bu(Qu,Xs,ou,ef,tf,$u,Bp,Np,su,Xp))}if(nh){var lh=sl.layout.get("icon-rotate").evaluate(Qo,{}),Kp=sl.layout.get("icon-text-fit")!=="none",Jp=fp(nh,lh,Vp,Kp),ch=$u?fp($u,lh,Vp,Kp):void 0;kc=new Bu(Qu,Xs,ou,ef,tf,nh,Bp,Np,!1,lh),qp=4*Jp.length;var $p=$i.iconSizeData,lu=null;$p.kind==="source"?(lu=[Ws*sl.layout.get("icon-size").evaluate(Qo,{})])[0]>zl&&E($i.layerIds[0]+': Value for "icon-size" is >= '+Zc+'. Reduce your "icon-size".'):$p.kind==="composite"&&((lu=[Ws*nf.compositeIconSizes[0].evaluate(Qo,{},ll),Ws*nf.compositeIconSizes[1].evaluate(Qo,{},ll)])[0]>zl||lu[1]>zl)&&E($i.layerIds[0]+': Value for "icon-size" is >= '+Zc+'. Reduce your "icon-size".'),$i.addSymbols($i.icon,Jp,lu,Up,jp,Qo,!1,Xs,Sc.lineStartIndex,Sc.lineLength,-1,ll),ih=$i.icon.placedSymbolArray.length-1,ch&&(Gp=4*ch.length,$i.addSymbols($i.icon,ch,lu,Up,jp,Qo,$o.vertical,Xs,Sc.lineStartIndex,Sc.lineLength,-1,ll),ah=$i.icon.placedSymbolArray.length-1)}for(var Qp in Fl.horizontal){var rf=Fl.horizontal[Qp];if(!tc){Zp=xr(rf.text);var Tg=sl.layout.get("text-rotate").evaluate(Qo,{},ll);tc=new Bu(Qu,Xs,ou,ef,tf,rf,rh,Rp,su,Tg)}var ed=rf.positionedLines.length===1;if(Wp+=dp($i,Xs,rf,zp,sl,su,Qo,Fp,Sc,Fl.vertical?$o.horizontal:$o.horizontalOnly,ed?Object.keys(Fl.horizontal):[Qp],_l,ih,nf,ll),ed)break}Fl.vertical&&(Yp+=dp($i,Xs,Fl.vertical,zp,sl,su,Qo,Fp,Sc,$o.vertical,["vertical"],_l,ah,nf,ll));var kg=tc?tc.boxStartIndex:$i.collisionBoxArray.length,Ag=tc?tc.boxEndIndex:$i.collisionBoxArray.length,Mg=Ac?Ac.boxStartIndex:$i.collisionBoxArray.length,Sg=Ac?Ac.boxEndIndex:$i.collisionBoxArray.length,Eg=kc?kc.boxStartIndex:$i.collisionBoxArray.length,Lg=kc?kc.boxEndIndex:$i.collisionBoxArray.length,Cg=Mc?Mc.boxStartIndex:$i.collisionBoxArray.length,Pg=Mc?Mc.boxEndIndex:$i.collisionBoxArray.length,cl=-1,af=function(cu,nd){return cu&&cu.circleDiameter?Math.max(cu.circleDiameter,nd):nd};cl=af(tc,cl),cl=af(Ac,cl),cl=af(kc,cl);var td=(cl=af(Mc,cl))>-1?1:0;td&&(cl*=_g/wa),$i.glyphOffsetArray.length>=mi.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qo.sortKey!==void 0&&$i.addToSortKeyRanges($i.symbolInstances.length,Qo.sortKey),$i.symbolInstances.emplaceBack(Xs.x,Xs.y,_l.right>=0?_l.right:-1,_l.center>=0?_l.center:-1,_l.left>=0?_l.left:-1,_l.vertical||-1,ih,ah,Zp,kg,Ag,Mg,Sg,Eg,Lg,Cg,Pg,ou,Wp,Yp,qp,Gp,td,0,rh,oh,sh,cl)}(Hr,au,xg,Wi,bi,ji,bl,Hr.layers[0],Hr.collisionBoxArray,ei.index,ei.sourceLayerIndex,Hr.index,Hu,Xf,Wu,to,qu,Gu,Yu,Zs,ei,zi,Oo,Ua,ai)};if($c==="line")for(var wc=0,Zu=up(ei.geometry,0,0,Qr,Qr);wc<Zu.length;wc+=1)for(var Xu=Zu[wc],Tc=0,Ku=ng(Xu,Jc,_c,Wi.vertical||Ls,bi,Cs,Jl,Hr.overscaling,Qr);Tc<Ku.length;Tc+=1){var Ju=Ku[Tc];Ls&&og(Hr,Ls.text,Kf,Ju)||$l(Xu,Ju)}else if($c==="line-center")for(var eu=0,tu=ei.geometry;eu<tu.length;eu+=1){var Ql=tu[eu];if(Ql.length>1){var nu=tg(Ql,_c,Wi.vertical||Ls,bi,Cs,Jl);nu&&$l(Ql,nu)}}else if(ei.type==="Polygon")for(var ec=0,ru=Of(ei.geometry,0);ec<ru.length;ec+=1){var iu=ru[ec],Pp=ig(iu,16);$l(iu[0],new hc(Pp.x,Pp.y,0))}else if(ei.type==="LineString")for(var Jf=0,Ip=ei.geometry;Jf<Ip.length;Jf+=1){var $f=Ip[Jf];$l($f,new hc($f[0].x,$f[0].y,0))}else if(ei.type==="Point")for(var Qf=0,Op=ei.geometry;Qf<Op.length;Qf+=1)for(var eh=0,Dp=Op[Qf];eh<Dp.length;eh+=1){var th=Dp[eh];$l([th],new hc(th.x,th.y,0))}}(M,pr,Fr,ca,le,bt,Br,Cr,Lr,Aa,je)},rr=0,vr=M.features;rr<vr.length;rr+=1)Zn();Pe&&M.generateCollisionDebugBuffers()},o.perspective=function(M,z,Z,le,Te){var Pe,je=1/Math.tan(z/2);return M[0]=je/Z,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=je,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,Te!=null&&Te!==1/0?(Pe=1/(le-Te),M[10]=(Te+le)*Pe,M[14]=2*Te*le*Pe):(M[10]=-1,M[14]=-2*le),M},o.pick=function(M,z){for(var Z={},le=0;le<z.length;le++){var Te=z[le];Te in M&&(Z[Te]=M[Te])}return Z},o.plugin=ga,o.polygonIntersectsPolygon=Gl,o.postMapLoadEvent=he,o.postTurnstileEvent=Ie,o.potpack=Jh,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=kr,o.registerForPluginStateChange=function(M){return M({pluginStatus:Zr,pluginURL:Ki}),da.on("pluginStateChange",M),M},o.renderColorRamp=Lh,o.rotate=function(M,z,Z){var le=z[0],Te=z[1],Pe=z[2],je=z[3],Ke=Math.sin(Z),st=Math.cos(Z);return M[0]=le*st+Pe*Ke,M[1]=Te*st+je*Ke,M[2]=le*-Ke+Pe*st,M[3]=Te*-Ke+je*st,M},o.rotateX=function(M,z,Z){var le=Math.sin(Z),Te=Math.cos(Z),Pe=z[4],je=z[5],Ke=z[6],st=z[7],yt=z[8],bt=z[9],Ot=z[10],Ut=z[11];return z!==M&&(M[0]=z[0],M[1]=z[1],M[2]=z[2],M[3]=z[3],M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15]),M[4]=Pe*Te+yt*le,M[5]=je*Te+bt*le,M[6]=Ke*Te+Ot*le,M[7]=st*Te+Ut*le,M[8]=yt*Te-Pe*le,M[9]=bt*Te-je*le,M[10]=Ot*Te-Ke*le,M[11]=Ut*Te-st*le,M},o.rotateZ=function(M,z,Z){var le=Math.sin(Z),Te=Math.cos(Z),Pe=z[0],je=z[1],Ke=z[2],st=z[3],yt=z[4],bt=z[5],Ot=z[6],Ut=z[7];return z!==M&&(M[8]=z[8],M[9]=z[9],M[10]=z[10],M[11]=z[11],M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15]),M[0]=Pe*Te+yt*le,M[1]=je*Te+bt*le,M[2]=Ke*Te+Ot*le,M[3]=st*Te+Ut*le,M[4]=yt*Te-Pe*le,M[5]=bt*Te-je*le,M[6]=Ot*Te-Ke*le,M[7]=Ut*Te-st*le,M},o.scale=function(M,z,Z){var le=Z[0],Te=Z[1],Pe=Z[2];return M[0]=z[0]*le,M[1]=z[1]*le,M[2]=z[2]*le,M[3]=z[3]*le,M[4]=z[4]*Te,M[5]=z[5]*Te,M[6]=z[6]*Te,M[7]=z[7]*Te,M[8]=z[8]*Pe,M[9]=z[9]*Pe,M[10]=z[10]*Pe,M[11]=z[11]*Pe,M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15],M},o.scale$1=function(M,z,Z){return M[0]=z[0]*Z,M[1]=z[1]*Z,M[2]=z[2]*Z,M[3]=z[3]*Z,M},o.scale$2=function(M,z,Z){return M[0]=z[0]*Z,M[1]=z[1]*Z,M[2]=z[2]*Z,M},o.setCacheLimits=function(M,z){Ae=M,De=z},o.setRTLTextPlugin=function(M,z,Z){if(Z===void 0&&(Z=!1),Zr===fo||Zr===Na||Zr===Eo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ki=J.resolveURL(M),Zr=fo,Xo=z,ho(),Z||ks()},o.sphericalToCartesian=function(M){var z=M[0],Z=M[1],le=M[2];return Z+=90,Z*=Math.PI/180,le*=Math.PI/180,{x:z*Math.cos(Z)*Math.sin(le),y:z*Math.sin(Z)*Math.sin(le),z:z*Math.cos(le)}},o.sqrLen=Kd,o.styleSpec=Ge,o.sub=Xd,o.symbolSize=eg,o.transformMat3=function(M,z,Z){var le=z[0],Te=z[1],Pe=z[2];return M[0]=le*Z[0]+Te*Z[3]+Pe*Z[6],M[1]=le*Z[1]+Te*Z[4]+Pe*Z[7],M[2]=le*Z[2]+Te*Z[5]+Pe*Z[8],M},o.transformMat4=Au,o.translate=function(M,z,Z){var le,Te,Pe,je,Ke,st,yt,bt,Ot,Ut,Bt,nn,on=Z[0],_n=Z[1],yn=Z[2];return z===M?(M[12]=z[0]*on+z[4]*_n+z[8]*yn+z[12],M[13]=z[1]*on+z[5]*_n+z[9]*yn+z[13],M[14]=z[2]*on+z[6]*_n+z[10]*yn+z[14],M[15]=z[3]*on+z[7]*_n+z[11]*yn+z[15]):(le=z[0],Te=z[1],Pe=z[2],je=z[3],Ke=z[4],st=z[5],yt=z[6],bt=z[7],Ot=z[8],Ut=z[9],Bt=z[10],nn=z[11],M[0]=le,M[1]=Te,M[2]=Pe,M[3]=je,M[4]=Ke,M[5]=st,M[6]=yt,M[7]=bt,M[8]=Ot,M[9]=Ut,M[10]=Bt,M[11]=nn,M[12]=le*on+Ke*_n+Ot*yn+z[12],M[13]=Te*on+st*_n+Ut*yn+z[13],M[14]=Pe*on+yt*_n+Bt*yn+z[14],M[15]=je*on+bt*_n+nn*yn+z[15]),M},o.triggerPluginCompletionEvent=pa,o.uniqueId=d,o.validateCustomStyleLayer=function(M){var z=[],Z=M.id;return Z===void 0&&z.push({message:"layers."+Z+': missing required property "id"'}),M.render===void 0&&z.push({message:"layers."+Z+': missing required method "render"'}),M.renderingMode&&M.renderingMode!=="2d"&&M.renderingMode!=="3d"&&z.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),z},o.validateLight=us,o.validateStyle=uo,o.values=function(M){var z=[];for(var Z in M)z.push(M[Z]);return z},o.vectorTile=lc,o.version=b,o.warnOnce=E,o.webpSupported=Y,o.window=n,o.wrap=h}),k(0,function(o){function T(qe){var Ye=typeof qe;if(Ye==="number"||Ye==="boolean"||Ye==="string"||qe==null)return JSON.stringify(qe);if(Array.isArray(qe)){for(var Ne="[",We=0,at=qe;We<at.length;We+=1)Ne+=T(at[We])+",";return Ne+"]"}for(var tt=Object.keys(qe).sort(),Re="{",Fe=0;Fe<tt.length;Fe++)Re+=JSON.stringify(tt[Fe])+":"+T(qe[tt[Fe]])+",";return Re+"}"}function b(qe){for(var Ye="",Ne=0,We=o.refProperties;Ne<We.length;Ne+=1)Ye+="/"+T(qe[We[Ne]]);return Ye}var p=function(qe){this.keyCache={},qe&&this.replace(qe)};p.prototype.replace=function(qe){this._layerConfigs={},this._layers={},this.update(qe,[])},p.prototype.update=function(qe,Ye){for(var Ne=this,We=0,at=qe;We<at.length;We+=1){var tt=at[We];this._layerConfigs[tt.id]=tt;var Re=this._layers[tt.id]=o.createStyleLayer(tt);Re._featureFilter=o.featureFilter(Re.filter),this.keyCache[tt.id]&&delete this.keyCache[tt.id]}for(var Fe=0,nt=Ye;Fe<nt.length;Fe+=1){var Ge=nt[Fe];delete this.keyCache[Ge],delete this._layerConfigs[Ge],delete this._layers[Ge]}this.familiesBySource={};for(var ut=0,pt=function(Ct,Dt){for(var Gt={},tn=0;tn<Ct.length;tn++){var jt=Dt&&Dt[Ct[tn].id]||b(Ct[tn]);Dt&&(Dt[Ct[tn].id]=jt);var Wt=Gt[jt];Wt||(Wt=Gt[jt]=[]),Wt.push(Ct[tn])}var Ft=[];for(var Ln in Gt)Ft.push(Gt[Ln]);return Ft}(o.values(this._layerConfigs),this.keyCache);ut<pt.length;ut+=1){var gt=pt[ut].map(function(Ct){return Ne._layers[Ct.id]}),ct=gt[0];if(ct.visibility!=="none"){var Tt=ct.source||"",vt=this.familiesBySource[Tt];vt||(vt=this.familiesBySource[Tt]={});var kt=ct.sourceLayer||"_geojsonTileLayer",Lt=vt[kt];Lt||(Lt=vt[kt]=[]),Lt.push(gt)}}};var s=function(qe){var Ye={},Ne=[];for(var We in qe){var at=qe[We],tt=Ye[We]={};for(var Re in at){var Fe=at[+Re];if(Fe&&Fe.bitmap.width!==0&&Fe.bitmap.height!==0){var nt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};Ne.push(nt),tt[Re]={rect:nt,metrics:Fe.metrics}}}}var Ge=o.potpack(Ne),ut=Ge.w,pt=Ge.h,gt=new o.AlphaImage({width:ut||1,height:pt||1});for(var ct in qe){var Tt=qe[ct];for(var vt in Tt){var kt=Tt[+vt];if(kt&&kt.bitmap.width!==0&&kt.bitmap.height!==0){var Lt=Ye[ct][vt].rect;o.AlphaImage.copy(kt.bitmap,gt,{x:0,y:0},{x:Lt.x+1,y:Lt.y+1},kt.bitmap)}}}this.image=gt,this.positions=Ye};o.register("GlyphAtlas",s);var t=function(qe){this.tileID=new o.OverscaledTileID(qe.tileID.overscaledZ,qe.tileID.wrap,qe.tileID.canonical.z,qe.tileID.canonical.x,qe.tileID.canonical.y),this.uid=qe.uid,this.zoom=qe.zoom,this.pixelRatio=qe.pixelRatio,this.tileSize=qe.tileSize,this.source=qe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=qe.showCollisionBoxes,this.collectResourceTiming=!!qe.collectResourceTiming,this.returnDependencies=!!qe.returnDependencies,this.promoteId=qe.promoteId};function i(qe,Ye,Ne){for(var We=new o.EvaluationParameters(Ye),at=0,tt=qe;at<tt.length;at+=1)tt[at].recalculate(We,Ne)}function n(qe,Ye){var Ne=o.getArrayBuffer(qe.request,function(We,at,tt,Re){We?Ye(We):at&&Ye(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(at)),rawData:at,cacheControl:tt,expires:Re})});return function(){Ne.cancel(),Ye()}}t.prototype.parse=function(qe,Ye,Ne,We,at){var tt=this;this.status="parsing",this.data=qe,this.collisionBoxArray=new o.CollisionBoxArray;var Re=new o.DictionaryCoder(Object.keys(qe.layers).sort()),Fe=new o.FeatureIndex(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];var nt,Ge,ut,pt,gt={},ct={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ne},Tt=Ye.familiesBySource[this.source];for(var vt in Tt){var kt=qe.layers[vt];if(kt){kt.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+vt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Lt=Re.encode(vt),Ct=[],Dt=0;Dt<kt.length;Dt++){var Gt=kt.feature(Dt),tn=Fe.getId(Gt,vt);Ct.push({feature:Gt,id:tn,index:Dt,sourceLayerIndex:Lt})}for(var jt=0,Wt=Tt[vt];jt<Wt.length;jt+=1){var Ft=Wt[jt],Ln=Ft[0];Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||Ln.visibility!=="none"&&(i(Ft,this.zoom,Ne),(gt[Ln.id]=Ln.createBucket({index:Fe.bucketLayerIDs.length,layers:Ft,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Lt,sourceID:this.source})).populate(Ct,ct,this.tileID.canonical),Fe.bucketLayerIDs.push(Ft.map(function(Qt){return Qt.id})))}}}var bn=o.mapObject(ct.glyphDependencies,function(Qt){return Object.keys(Qt).map(Number)});Object.keys(bn).length?We.send("getGlyphs",{uid:this.uid,stacks:bn},function(Qt,cn){nt||(nt=Qt,Ge=cn,sn.call(tt))}):Ge={};var hn=Object.keys(ct.iconDependencies);hn.length?We.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},function(Qt,cn){nt||(nt=Qt,ut=cn,sn.call(tt))}):ut={};var Kt=Object.keys(ct.patternDependencies);function sn(){if(nt)return at(nt);if(Ge&&ut&&pt){var Qt=new s(Ge),cn=new o.ImageAtlas(ut,pt);for(var vn in gt){var xn=gt[vn];xn instanceof o.SymbolBucket?(i(xn.layers,this.zoom,Ne),o.performSymbolLayout(xn,Ge,Qt.positions,ut,cn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):xn.hasPattern&&(xn instanceof o.LineBucket||xn instanceof o.FillBucket||xn instanceof o.FillExtrusionBucket)&&(i(xn.layers,this.zoom,Ne),xn.addFeatures(ct,this.tileID.canonical,cn.patternPositions))}this.status="done",at(null,{buckets:o.values(gt).filter(function(An){return!An.isEmpty()}),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qt.image,imageAtlas:cn,glyphMap:this.returnDependencies?Ge:null,iconMap:this.returnDependencies?ut:null,glyphPositions:this.returnDependencies?Qt.positions:null})}}Kt.length?We.send("getImages",{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"},function(Qt,cn){nt||(nt=Qt,pt=cn,sn.call(tt))}):pt={},sn.call(this)};var r=function(qe,Ye,Ne,We){this.actor=qe,this.layerIndex=Ye,this.availableImages=Ne,this.loadVectorData=We||n,this.loading={},this.loaded={}};r.prototype.loadTile=function(qe,Ye){var Ne=this,We=qe.uid;this.loading||(this.loading={});var at=!!(qe&&qe.request&&qe.request.collectResourceTiming)&&new o.RequestPerformance(qe.request),tt=this.loading[We]=new t(qe);tt.abort=this.loadVectorData(qe,function(Re,Fe){if(delete Ne.loading[We],Re||!Fe)return tt.status="done",Ne.loaded[We]=tt,Ye(Re);var nt=Fe.rawData,Ge={};Fe.expires&&(Ge.expires=Fe.expires),Fe.cacheControl&&(Ge.cacheControl=Fe.cacheControl);var ut={};if(at){var pt=at.finish();pt&&(ut.resourceTiming=JSON.parse(JSON.stringify(pt)))}tt.vectorTile=Fe.vectorTile,tt.parse(Fe.vectorTile,Ne.layerIndex,Ne.availableImages,Ne.actor,function(gt,ct){if(gt||!ct)return Ye(gt);Ye(null,o.extend({rawTileData:nt.slice(0)},ct,Ge,ut))}),Ne.loaded=Ne.loaded||{},Ne.loaded[We]=tt})},r.prototype.reloadTile=function(qe,Ye){var Ne=this,We=this.loaded,at=qe.uid,tt=this;if(We&&We[at]){var Re=We[at];Re.showCollisionBoxes=qe.showCollisionBoxes;var Fe=function(nt,Ge){var ut=Re.reloadCallback;ut&&(delete Re.reloadCallback,Re.parse(Re.vectorTile,tt.layerIndex,Ne.availableImages,tt.actor,ut)),Ye(nt,Ge)};Re.status==="parsing"?Re.reloadCallback=Fe:Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,Fe):Fe())}},r.prototype.abortTile=function(qe,Ye){var Ne=this.loading,We=qe.uid;Ne&&Ne[We]&&Ne[We].abort&&(Ne[We].abort(),delete Ne[We]),Ye()},r.prototype.removeTile=function(qe,Ye){var Ne=this.loaded,We=qe.uid;Ne&&Ne[We]&&delete Ne[We],Ye()};var a=o.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(qe,Ye){var Ne=qe.uid,We=qe.encoding,at=qe.rawImageData,tt=a&&at instanceof a?this.getImageData(at):at,Re=new o.DEMData(Ne,tt,We);this.loaded=this.loaded||{},this.loaded[Ne]=Re,Ye(null,Re)},l.prototype.getImageData=function(qe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(qe.width,qe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=qe.width,this.offscreenCanvas.height=qe.height,this.offscreenCanvasContext.drawImage(qe,0,0,qe.width,qe.height);var Ye=this.offscreenCanvasContext.getImageData(-1,-1,qe.width+2,qe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:Ye.width,height:Ye.height},Ye.data)},l.prototype.removeTile=function(qe){var Ye=this.loaded,Ne=qe.uid;Ye&&Ye[Ne]&&delete Ye[Ne]};var c=function qe(Ye,Ne){var We,at=Ye&&Ye.type;if(at==="FeatureCollection")for(We=0;We<Ye.features.length;We++)qe(Ye.features[We],Ne);else if(at==="GeometryCollection")for(We=0;We<Ye.geometries.length;We++)qe(Ye.geometries[We],Ne);else if(at==="Feature")qe(Ye.geometry,Ne);else if(at==="Polygon")h(Ye.coordinates,Ne);else if(at==="MultiPolygon")for(We=0;We<Ye.coordinates.length;We++)h(Ye.coordinates[We],Ne);return Ye};function h(qe,Ye){if(qe.length!==0){u(qe[0],Ye);for(var Ne=1;Ne<qe.length;Ne++)u(qe[Ne],!Ye)}}function u(qe,Ye){for(var Ne=0,We=0,at=qe.length,tt=at-1;We<at;tt=We++)Ne+=(qe[We][0]-qe[tt][0])*(qe[tt][1]+qe[We][1]);Ne>=0!=!!Ye&&qe.reverse()}var x=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(qe){this._feature=qe,this.extent=o.EXTENT,this.type=qe.type,this.properties=qe.tags,"id"in qe&&!isNaN(qe.id)&&(this.id=parseInt(qe.id,10))};d.prototype.loadGeometry=function(){if(this._feature.type===1){for(var qe=[],Ye=0,Ne=this._feature.geometry;Ye<Ne.length;Ye+=1){var We=Ne[Ye];qe.push([new o.Point$1(We[0],We[1])])}return qe}for(var at=[],tt=0,Re=this._feature.geometry;tt<Re.length;tt+=1){for(var Fe=[],nt=0,Ge=Re[tt];nt<Ge.length;nt+=1){var ut=Ge[nt];Fe.push(new o.Point$1(ut[0],ut[1]))}at.push(Fe)}return at},d.prototype.toGeoJSON=function(qe,Ye,Ne){return x.call(this,qe,Ye,Ne)};var m=function(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=qe.length,this._features=qe};m.prototype.feature=function(qe){return new d(this._features[qe])};var g=o.vectorTile.VectorTileFeature,y=v;function v(qe,Ye){this.options=Ye||{},this.features=qe,this.length=qe.length}function _(qe,Ye){this.id=typeof qe.id=="number"?qe.id:void 0,this.type=qe.type,this.rawGeometry=qe.type===1?[qe.geometry]:qe.geometry,this.properties=qe.tags,this.extent=Ye||4096}v.prototype.feature=function(qe){return new _(this.features[qe],this.options.extent)},_.prototype.loadGeometry=function(){var qe=this.rawGeometry;this.geometry=[];for(var Ye=0;Ye<qe.length;Ye++){for(var Ne=qe[Ye],We=[],at=0;at<Ne.length;at++)We.push(new o.Point$1(Ne[at][0],Ne[at][1]));this.geometry.push(We)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var qe=this.geometry,Ye=1/0,Ne=-1/0,We=1/0,at=-1/0,tt=0;tt<qe.length;tt++)for(var Re=qe[tt],Fe=0;Fe<Re.length;Fe++){var nt=Re[Fe];Ye=Math.min(Ye,nt.x),Ne=Math.max(Ne,nt.x),We=Math.min(We,nt.y),at=Math.max(at,nt.y)}return[Ye,We,Ne,at]},_.prototype.toGeoJSON=g.prototype.toGeoJSON;var f=P,S=P,w=function(qe,Ye){Ye=Ye||{};var Ne={};for(var We in qe)Ne[We]=new y(qe[We].features,Ye),Ne[We].name=We,Ne[We].version=Ye.version,Ne[We].extent=Ye.extent;return P({layers:Ne})},E=y;function P(qe){var Ye=new o.pbf;return function(Ne,We){for(var at in Ne.layers)We.writeMessage(3,C,Ne.layers[at])}(qe,Ye),Ye.finish()}function C(qe,Ye){var Ne;Ye.writeVarintField(15,qe.version||1),Ye.writeStringField(1,qe.name||""),Ye.writeVarintField(5,qe.extent||4096);var We={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<qe.length;Ne++)We.feature=qe.feature(Ne),Ye.writeMessage(2,O,We);var at=We.keys;for(Ne=0;Ne<at.length;Ne++)Ye.writeStringField(3,at[Ne]);var tt=We.values;for(Ne=0;Ne<tt.length;Ne++)Ye.writeMessage(4,W,tt[Ne])}function O(qe,Ye){var Ne=qe.feature;Ne.id!==void 0&&Ye.writeVarintField(1,Ne.id),Ye.writeMessage(2,R,qe),Ye.writeVarintField(3,Ne.type),Ye.writeMessage(4,N,Ne)}function R(qe,Ye){var Ne=qe.feature,We=qe.keys,at=qe.values,tt=qe.keycache,Re=qe.valuecache;for(var Fe in Ne.properties){var nt=tt[Fe];nt===void 0&&(We.push(Fe),nt=We.length-1,tt[Fe]=nt),Ye.writeVarint(nt);var Ge=Ne.properties[Fe],ut=typeof Ge;ut!=="string"&&ut!=="boolean"&&ut!=="number"&&(Ge=JSON.stringify(Ge));var pt=ut+":"+Ge,gt=Re[pt];gt===void 0&&(at.push(Ge),gt=at.length-1,Re[pt]=gt),Ye.writeVarint(gt)}}function U(qe,Ye){return(Ye<<3)+(7&qe)}function D(qe){return qe<<1^qe>>31}function N(qe,Ye){for(var Ne=qe.loadGeometry(),We=qe.type,at=0,tt=0,Re=Ne.length,Fe=0;Fe<Re;Fe++){var nt=Ne[Fe],Ge=1;We===1&&(Ge=nt.length),Ye.writeVarint(U(1,Ge));for(var ut=We===3?nt.length-1:nt.length,pt=0;pt<ut;pt++){pt===1&&We!==1&&Ye.writeVarint(U(2,ut-1));var gt=nt[pt].x-at,ct=nt[pt].y-tt;Ye.writeVarint(D(gt)),Ye.writeVarint(D(ct)),at+=gt,tt+=ct}We===3&&Ye.writeVarint(U(7,1))}}function W(qe,Ye){var Ne=typeof qe;Ne==="string"?Ye.writeStringField(1,qe):Ne==="boolean"?Ye.writeBooleanField(7,qe):Ne==="number"&&(qe%1!=0?Ye.writeDoubleField(3,qe):qe<0?Ye.writeSVarintField(6,qe):Ye.writeVarintField(5,qe))}function F(qe,Ye,Ne,We,at,tt){if(!(at-We<=Ne)){var Re=We+at>>1;j(qe,Ye,Re,We,at,tt%2),F(qe,Ye,Ne,We,Re-1,tt+1),F(qe,Ye,Ne,Re+1,at,tt+1)}}function j(qe,Ye,Ne,We,at,tt){for(;at>We;){if(at-We>600){var Re=at-We+1,Fe=Ne-We+1,nt=Math.log(Re),Ge=.5*Math.exp(2*nt/3),ut=.5*Math.sqrt(nt*Ge*(Re-Ge)/Re)*(Fe-Re/2<0?-1:1);j(qe,Ye,Ne,Math.max(We,Math.floor(Ne-Fe*Ge/Re+ut)),Math.min(at,Math.floor(Ne+(Re-Fe)*Ge/Re+ut)),tt)}var pt=Ye[2*Ne+tt],gt=We,ct=at;for(q(qe,Ye,We,Ne),Ye[2*at+tt]>pt&&q(qe,Ye,We,at);gt<ct;){for(q(qe,Ye,gt,ct),gt++,ct--;Ye[2*gt+tt]<pt;)gt++;for(;Ye[2*ct+tt]>pt;)ct--}Ye[2*We+tt]===pt?q(qe,Ye,We,ct):q(qe,Ye,++ct,at),ct<=Ne&&(We=ct+1),Ne<=ct&&(at=ct-1)}}function q(qe,Ye,Ne,We){te(qe,Ne,We),te(Ye,2*Ne,2*We),te(Ye,2*Ne+1,2*We+1)}function te(qe,Ye,Ne){var We=qe[Ye];qe[Ye]=qe[Ne],qe[Ne]=We}function ee(qe,Ye,Ne,We){var at=qe-Ne,tt=Ye-We;return at*at+tt*tt}f.fromVectorTileJs=S,f.fromGeojsonVt=w,f.GeoJSONWrapper=E;var Q=function(qe){return qe[0]},J=function(qe){return qe[1]},K=function(qe,Ye,Ne,We,at){Ye===void 0&&(Ye=Q),Ne===void 0&&(Ne=J),We===void 0&&(We=64),at===void 0&&(at=Float64Array),this.nodeSize=We,this.points=qe;for(var tt=qe.length<65536?Uint16Array:Uint32Array,Re=this.ids=new tt(qe.length),Fe=this.coords=new at(2*qe.length),nt=0;nt<qe.length;nt++)Re[nt]=nt,Fe[2*nt]=Ye(qe[nt]),Fe[2*nt+1]=Ne(qe[nt]);F(Re,Fe,We,0,Re.length-1,0)};K.prototype.range=function(qe,Ye,Ne,We){return function(at,tt,Re,Fe,nt,Ge,ut){for(var pt,gt,ct=[0,at.length-1,0],Tt=[];ct.length;){var vt=ct.pop(),kt=ct.pop(),Lt=ct.pop();if(kt-Lt<=ut)for(var Ct=Lt;Ct<=kt;Ct++)pt=tt[2*Ct],gt=tt[2*Ct+1],pt>=Re&&pt<=nt&&gt>=Fe&&gt<=Ge&&Tt.push(at[Ct]);else{var Dt=Math.floor((Lt+kt)/2);pt=tt[2*Dt],gt=tt[2*Dt+1],pt>=Re&&pt<=nt&&gt>=Fe&&gt<=Ge&&Tt.push(at[Dt]);var Gt=(vt+1)%2;(vt===0?Re<=pt:Fe<=gt)&&(ct.push(Lt),ct.push(Dt-1),ct.push(Gt)),(vt===0?nt>=pt:Ge>=gt)&&(ct.push(Dt+1),ct.push(kt),ct.push(Gt))}}return Tt}(this.ids,this.coords,qe,Ye,Ne,We,this.nodeSize)},K.prototype.within=function(qe,Ye,Ne){return function(We,at,tt,Re,Fe,nt){for(var Ge=[0,We.length-1,0],ut=[],pt=Fe*Fe;Ge.length;){var gt=Ge.pop(),ct=Ge.pop(),Tt=Ge.pop();if(ct-Tt<=nt)for(var vt=Tt;vt<=ct;vt++)ee(at[2*vt],at[2*vt+1],tt,Re)<=pt&&ut.push(We[vt]);else{var kt=Math.floor((Tt+ct)/2),Lt=at[2*kt],Ct=at[2*kt+1];ee(Lt,Ct,tt,Re)<=pt&&ut.push(We[kt]);var Dt=(gt+1)%2;(gt===0?tt-Fe<=Lt:Re-Fe<=Ct)&&(Ge.push(Tt),Ge.push(kt-1),Ge.push(Dt)),(gt===0?tt+Fe>=Lt:Re+Fe>=Ct)&&(Ge.push(kt+1),Ge.push(ct),Ge.push(Dt))}}return ut}(this.ids,this.coords,qe,Ye,Ne,this.nodeSize)};var Y={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(qe){return qe}},ie=function(qe){this.options=pe(Object.create(Y),qe),this.trees=new Array(this.options.maxZoom+1)};function se(qe,Ye,Ne,We,at){return{x:qe,y:Ye,zoom:1/0,id:Ne,parentId:-1,numPoints:We,properties:at}}function ae(qe,Ye){var Ne=qe.geometry.coordinates,We=Ne[0],at=Ne[1];return{x:ye(We),y:de(at),zoom:1/0,index:Ye,parentId:-1}}function ue(qe){return{type:"Feature",id:qe.id,properties:ve(qe),geometry:{type:"Point",coordinates:[(We=qe.x,360*(We-.5)),(Ye=qe.y,Ne=(180-360*Ye)*Math.PI/180,360*Math.atan(Math.exp(Ne))/Math.PI-90)]}};var Ye,Ne,We}function ve(qe){var Ye=qe.numPoints,Ne=Ye>=1e4?Math.round(Ye/1e3)+"k":Ye>=1e3?Math.round(Ye/100)/10+"k":Ye;return pe(pe({},qe.properties),{cluster:!0,cluster_id:qe.id,point_count:Ye,point_count_abbreviated:Ne})}function ye(qe){return qe/360+.5}function de(qe){var Ye=Math.sin(qe*Math.PI/180),Ne=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function pe(qe,Ye){for(var Ne in Ye)qe[Ne]=Ye[Ne];return qe}function ge(qe){return qe.x}function ke(qe){return qe.y}function Ee(qe,Ye,Ne,We){for(var at,tt=We,Re=Ne-Ye>>1,Fe=Ne-Ye,nt=qe[Ye],Ge=qe[Ye+1],ut=qe[Ne],pt=qe[Ne+1],gt=Ye+3;gt<Ne;gt+=3){var ct=me(qe[gt],qe[gt+1],nt,Ge,ut,pt);if(ct>tt)at=gt,tt=ct;else if(ct===tt){var Tt=Math.abs(gt-Re);Tt<Fe&&(at=gt,Fe=Tt)}}tt>We&&(at-Ye>3&&Ee(qe,Ye,at,We),qe[at+2]=tt,Ne-at>3&&Ee(qe,at,Ne,We))}function me(qe,Ye,Ne,We,at,tt){var Re=at-Ne,Fe=tt-We;if(Re!==0||Fe!==0){var nt=((qe-Ne)*Re+(Ye-We)*Fe)/(Re*Re+Fe*Fe);nt>1?(Ne=at,We=tt):nt>0&&(Ne+=Re*nt,We+=Fe*nt)}return(Re=qe-Ne)*Re+(Fe=Ye-We)*Fe}function oe(qe,Ye,Ne,We){var at={id:qe===void 0?null:qe,type:Ye,geometry:Ne,tags:We,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tt){var Re=tt.geometry,Fe=tt.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")re(tt,Re);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var nt=0;nt<Re.length;nt++)re(tt,Re[nt]);else if(Fe==="MultiPolygon")for(nt=0;nt<Re.length;nt++)for(var Ge=0;Ge<Re[nt].length;Ge++)re(tt,Re[nt][Ge])}(at),at}function re(qe,Ye){for(var Ne=0;Ne<Ye.length;Ne+=3)qe.minX=Math.min(qe.minX,Ye[Ne]),qe.minY=Math.min(qe.minY,Ye[Ne+1]),qe.maxX=Math.max(qe.maxX,Ye[Ne]),qe.maxY=Math.max(qe.maxY,Ye[Ne+1])}function fe(qe,Ye,Ne,We){if(Ye.geometry){var at=Ye.geometry.coordinates,tt=Ye.geometry.type,Re=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),Fe=[],nt=Ye.id;if(Ne.promoteId?nt=Ye.properties[Ne.promoteId]:Ne.generateId&&(nt=We||0),tt==="Point")Se(at,Fe);else if(tt==="MultiPoint")for(var Ge=0;Ge<at.length;Ge++)Se(at[Ge],Fe);else if(tt==="LineString")be(at,Fe,Re,!1);else if(tt==="MultiLineString"){if(Ne.lineMetrics){for(Ge=0;Ge<at.length;Ge++)Fe=[],be(at[Ge],Fe,Re,!1),qe.push(oe(nt,"LineString",Fe,Ye.properties));return}we(at,Fe,Re,!1)}else if(tt==="Polygon")we(at,Fe,Re,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(Ge=0;Ge<Ye.geometry.geometries.length;Ge++)fe(qe,{id:nt,geometry:Ye.geometry.geometries[Ge],properties:Ye.properties},Ne,We);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ge=0;Ge<at.length;Ge++){var ut=[];we(at[Ge],ut,Re,!0),Fe.push(ut)}}qe.push(oe(nt,tt,Fe,Ye.properties))}}function Se(qe,Ye){Ye.push(Me(qe[0])),Ye.push(Ie(qe[1])),Ye.push(0)}function be(qe,Ye,Ne,We){for(var at,tt,Re=0,Fe=0;Fe<qe.length;Fe++){var nt=Me(qe[Fe][0]),Ge=Ie(qe[Fe][1]);Ye.push(nt),Ye.push(Ge),Ye.push(0),Fe>0&&(Re+=We?(at*Ge-nt*tt)/2:Math.sqrt(Math.pow(nt-at,2)+Math.pow(Ge-tt,2))),at=nt,tt=Ge}var ut=Ye.length-3;Ye[2]=1,Ee(Ye,0,ut,Ne),Ye[ut+2]=1,Ye.size=Math.abs(Re),Ye.start=0,Ye.end=Ye.size}function we(qe,Ye,Ne,We){for(var at=0;at<qe.length;at++){var tt=[];be(qe[at],tt,Ne,We),Ye.push(tt)}}function Me(qe){return qe/360+.5}function Ie(qe){var Ye=Math.sin(qe*Math.PI/180),Ne=.5-.25*Math.log((1+Ye)/(1-Ye))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function Oe(qe,Ye,Ne,We,at,tt,Re,Fe){if(We/=Ye,tt>=(Ne/=Ye)&&Re<We)return qe;if(Re<Ne||tt>=We)return null;for(var nt=[],Ge=0;Ge<qe.length;Ge++){var ut=qe[Ge],pt=ut.geometry,gt=ut.type,ct=at===0?ut.minX:ut.minY,Tt=at===0?ut.maxX:ut.maxY;if(ct>=Ne&&Tt<We)nt.push(ut);else if(!(Tt<Ne||ct>=We)){var vt=[];if(gt==="Point"||gt==="MultiPoint")he(pt,vt,Ne,We,at);else if(gt==="LineString")_e(pt,vt,Ne,We,at,!1,Fe.lineMetrics);else if(gt==="MultiLineString")De(pt,vt,Ne,We,at,!1);else if(gt==="Polygon")De(pt,vt,Ne,We,at,!0);else if(gt==="MultiPolygon")for(var kt=0;kt<pt.length;kt++){var Lt=[];De(pt[kt],Lt,Ne,We,at,!0),Lt.length&&vt.push(Lt)}if(vt.length){if(Fe.lineMetrics&&gt==="LineString"){for(kt=0;kt<vt.length;kt++)nt.push(oe(ut.id,gt,vt[kt],ut.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(vt.length===1?(gt="LineString",vt=vt[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=vt.length===3?"Point":"MultiPoint"),nt.push(oe(ut.id,gt,vt,ut.tags))}}}return nt.length?nt:null}function he(qe,Ye,Ne,We,at){for(var tt=0;tt<qe.length;tt+=3){var Re=qe[tt+at];Re>=Ne&&Re<=We&&(Ye.push(qe[tt]),Ye.push(qe[tt+1]),Ye.push(qe[tt+2]))}}function _e(qe,Ye,Ne,We,at,tt,Re){for(var Fe,nt,Ge=Ae(qe),ut=at===0?Be:Ve,pt=qe.start,gt=0;gt<qe.length-3;gt+=3){var ct=qe[gt],Tt=qe[gt+1],vt=qe[gt+2],kt=qe[gt+3],Lt=qe[gt+4],Ct=at===0?ct:Tt,Dt=at===0?kt:Lt,Gt=!1;Re&&(Fe=Math.sqrt(Math.pow(ct-kt,2)+Math.pow(Tt-Lt,2))),Ct<Ne?Dt>Ne&&(nt=ut(Ge,ct,Tt,kt,Lt,Ne),Re&&(Ge.start=pt+Fe*nt)):Ct>We?Dt<We&&(nt=ut(Ge,ct,Tt,kt,Lt,We),Re&&(Ge.start=pt+Fe*nt)):Le(Ge,ct,Tt,vt),Dt<Ne&&Ct>=Ne&&(nt=ut(Ge,ct,Tt,kt,Lt,Ne),Gt=!0),Dt>We&&Ct<=We&&(nt=ut(Ge,ct,Tt,kt,Lt,We),Gt=!0),!tt&&Gt&&(Re&&(Ge.end=pt+Fe*nt),Ye.push(Ge),Ge=Ae(qe)),Re&&(pt+=Fe)}var tn=qe.length-3;ct=qe[tn],Tt=qe[tn+1],vt=qe[tn+2],(Ct=at===0?ct:Tt)>=Ne&&Ct<=We&&Le(Ge,ct,Tt,vt),tn=Ge.length-3,tt&&tn>=3&&(Ge[tn]!==Ge[0]||Ge[tn+1]!==Ge[1])&&Le(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&Ye.push(Ge)}function Ae(qe){var Ye=[];return Ye.size=qe.size,Ye.start=qe.start,Ye.end=qe.end,Ye}function De(qe,Ye,Ne,We,at,tt){for(var Re=0;Re<qe.length;Re++)_e(qe[Re],Ye,Ne,We,at,tt,!1)}function Le(qe,Ye,Ne,We){qe.push(Ye),qe.push(Ne),qe.push(We)}function Be(qe,Ye,Ne,We,at,tt){var Re=(tt-Ye)/(We-Ye);return qe.push(tt),qe.push(Ne+(at-Ne)*Re),qe.push(1),Re}function Ve(qe,Ye,Ne,We,at,tt){var Re=(tt-Ne)/(at-Ne);return qe.push(Ye+(We-Ye)*Re),qe.push(tt),qe.push(1),Re}function Ze(qe,Ye){for(var Ne=[],We=0;We<qe.length;We++){var at,tt=qe[We],Re=tt.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")at=rt(tt.geometry,Ye);else if(Re==="MultiLineString"||Re==="Polygon"){at=[];for(var Fe=0;Fe<tt.geometry.length;Fe++)at.push(rt(tt.geometry[Fe],Ye))}else if(Re==="MultiPolygon")for(at=[],Fe=0;Fe<tt.geometry.length;Fe++){for(var nt=[],Ge=0;Ge<tt.geometry[Fe].length;Ge++)nt.push(rt(tt.geometry[Fe][Ge],Ye));at.push(nt)}Ne.push(oe(tt.id,Re,at,tt.tags))}return Ne}function rt(qe,Ye){var Ne=[];Ne.size=qe.size,qe.start!==void 0&&(Ne.start=qe.start,Ne.end=qe.end);for(var We=0;We<qe.length;We+=3)Ne.push(qe[We]+Ye,qe[We+1],qe[We+2]);return Ne}function it(qe,Ye){if(qe.transformed)return qe;var Ne,We,at,tt=1<<qe.z,Re=qe.x,Fe=qe.y;for(Ne=0;Ne<qe.features.length;Ne++){var nt=qe.features[Ne],Ge=nt.geometry,ut=nt.type;if(nt.geometry=[],ut===1)for(We=0;We<Ge.length;We+=2)nt.geometry.push(dt(Ge[We],Ge[We+1],Ye,tt,Re,Fe));else for(We=0;We<Ge.length;We++){var pt=[];for(at=0;at<Ge[We].length;at+=2)pt.push(dt(Ge[We][at],Ge[We][at+1],Ye,tt,Re,Fe));nt.geometry.push(pt)}}return qe.transformed=!0,qe}function dt(qe,Ye,Ne,We,at,tt){return[Math.round(Ne*(qe*We-at)),Math.round(Ne*(Ye*We-tt))]}function mt(qe,Ye,Ne,We,at){for(var tt=Ye===at.maxZoom?0:at.tolerance/((1<<Ye)*at.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:We,z:Ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<qe.length;Fe++){Re.numFeatures++,ht(Re,qe[Fe],tt,at);var nt=qe[Fe].minX,Ge=qe[Fe].minY,ut=qe[Fe].maxX,pt=qe[Fe].maxY;nt<Re.minX&&(Re.minX=nt),Ge<Re.minY&&(Re.minY=Ge),ut>Re.maxX&&(Re.maxX=ut),pt>Re.maxY&&(Re.maxY=pt)}return Re}function ht(qe,Ye,Ne,We){var at=Ye.geometry,tt=Ye.type,Re=[];if(tt==="Point"||tt==="MultiPoint")for(var Fe=0;Fe<at.length;Fe+=3)Re.push(at[Fe]),Re.push(at[Fe+1]),qe.numPoints++,qe.numSimplified++;else if(tt==="LineString")Qe(Re,at,qe,Ne,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(Fe=0;Fe<at.length;Fe++)Qe(Re,at[Fe],qe,Ne,tt==="Polygon",Fe===0);else if(tt==="MultiPolygon")for(var nt=0;nt<at.length;nt++){var Ge=at[nt];for(Fe=0;Fe<Ge.length;Fe++)Qe(Re,Ge[Fe],qe,Ne,!0,Fe===0)}if(Re.length){var ut=Ye.tags||null;if(tt==="LineString"&&We.lineMetrics){for(var pt in ut={},Ye.tags)ut[pt]=Ye.tags[pt];ut.mapbox_clip_start=at.start/at.size,ut.mapbox_clip_end=at.end/at.size}var gt={geometry:Re,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:ut};Ye.id!==null&&(gt.id=Ye.id),qe.features.push(gt)}}function Qe(qe,Ye,Ne,We,at,tt){var Re=We*We;if(We>0&&Ye.size<(at?Re:We))Ne.numPoints+=Ye.length/3;else{for(var Fe=[],nt=0;nt<Ye.length;nt+=3)(We===0||Ye[nt+2]>Re)&&(Ne.numSimplified++,Fe.push(Ye[nt]),Fe.push(Ye[nt+1])),Ne.numPoints++;at&&function(Ge,ut){for(var pt=0,gt=0,ct=Ge.length,Tt=ct-2;gt<ct;Tt=gt,gt+=2)pt+=(Ge[gt]-Ge[Tt])*(Ge[gt+1]+Ge[Tt+1]);if(pt>0===ut)for(gt=0,ct=Ge.length;gt<ct/2;gt+=2){var vt=Ge[gt],kt=Ge[gt+1];Ge[gt]=Ge[ct-2-gt],Ge[gt+1]=Ge[ct-1-gt],Ge[ct-2-gt]=vt,Ge[ct-1-gt]=kt}}(Fe,tt),qe.push(Fe)}}function Je(qe,Ye){var Ne=(Ye=this.options=function(at,tt){for(var Re in tt)at[Re]=tt[Re];return at}(Object.create(this.options),Ye)).debug;if(Ne&&console.time("preprocess data"),Ye.maxZoom<0||Ye.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ye.promoteId&&Ye.generateId)throw new Error("promoteId and generateId cannot be used together.");var We=function(at,tt){var Re=[];if(at.type==="FeatureCollection")for(var Fe=0;Fe<at.features.length;Fe++)fe(Re,at.features[Fe],tt,Fe);else at.type==="Feature"?fe(Re,at,tt):fe(Re,{geometry:at},tt);return Re}(qe,Ye);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ye.indexMaxZoom,Ye.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(We=function(at,tt){var Re=tt.buffer/tt.extent,Fe=at,nt=Oe(at,1,-1-Re,Re,0,-1,2,tt),Ge=Oe(at,1,1-Re,2+Re,0,-1,2,tt);return(nt||Ge)&&(Fe=Oe(at,1,-Re,1+Re,0,-1,2,tt)||[],nt&&(Fe=Ze(nt,1).concat(Fe)),Ge&&(Fe=Fe.concat(Ze(Ge,-1)))),Fe}(We,Ye)).length&&this.splitTile(We,0,0,0),Ne&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(qe,Ye,Ne){return 32*((1<<qe)*Ne+Ye)+qe}function Pt(qe,Ye){var Ne=qe.tileID.canonical;if(!this._geoJSONIndex)return Ye(null,null);var We=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!We)return Ye(null,null);var at=new m(We.features),tt=f(at);tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),Ye(null,{vectorTile:at,rawData:tt.buffer})}ie.prototype.load=function(qe){var Ye=this.options,Ne=Ye.log,We=Ye.minZoom,at=Ye.maxZoom,tt=Ye.nodeSize;Ne&&console.time("total time");var Re="prepare "+qe.length+" points";Ne&&console.time(Re),this.points=qe;for(var Fe=[],nt=0;nt<qe.length;nt++)qe[nt].geometry&&Fe.push(ae(qe[nt],nt));this.trees[at+1]=new K(Fe,ge,ke,tt,Float32Array),Ne&&console.timeEnd(Re);for(var Ge=at;Ge>=We;Ge--){var ut=+Date.now();Fe=this._cluster(Fe,Ge),this.trees[Ge]=new K(Fe,ge,ke,tt,Float32Array),Ne&&console.log("z%d: %d clusters in %dms",Ge,Fe.length,+Date.now()-ut)}return Ne&&console.timeEnd("total time"),this},ie.prototype.getClusters=function(qe,Ye){var Ne=((qe[0]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,qe[1])),at=qe[2]===180?180:((qe[2]+180)%360+360)%360-180,tt=Math.max(-90,Math.min(90,qe[3]));if(qe[2]-qe[0]>=360)Ne=-180,at=180;else if(Ne>at){var Re=this.getClusters([Ne,We,180,tt],Ye),Fe=this.getClusters([-180,We,at,tt],Ye);return Re.concat(Fe)}for(var nt=this.trees[this._limitZoom(Ye)],Ge=[],ut=0,pt=nt.range(ye(Ne),de(tt),ye(at),de(We));ut<pt.length;ut+=1){var gt=pt[ut],ct=nt.points[gt];Ge.push(ct.numPoints?ue(ct):this.points[ct.index])}return Ge},ie.prototype.getChildren=function(qe){var Ye=this._getOriginId(qe),Ne=this._getOriginZoom(qe),We="No cluster with the specified id.",at=this.trees[Ne];if(!at)throw new Error(We);var tt=at.points[Ye];if(!tt)throw new Error(We);for(var Re=this.options.radius/(this.options.extent*Math.pow(2,Ne-1)),Fe=[],nt=0,Ge=at.within(tt.x,tt.y,Re);nt<Ge.length;nt+=1){var ut=Ge[nt],pt=at.points[ut];pt.parentId===qe&&Fe.push(pt.numPoints?ue(pt):this.points[pt.index])}if(Fe.length===0)throw new Error(We);return Fe},ie.prototype.getLeaves=function(qe,Ye,Ne){Ye=Ye||10,Ne=Ne||0;var We=[];return this._appendLeaves(We,qe,Ye,Ne,0),We},ie.prototype.getTile=function(qe,Ye,Ne){var We=this.trees[this._limitZoom(qe)],at=Math.pow(2,qe),tt=this.options,Re=tt.extent,Fe=tt.radius/Re,nt=(Ne-Fe)/at,Ge=(Ne+1+Fe)/at,ut={features:[]};return this._addTileFeatures(We.range((Ye-Fe)/at,nt,(Ye+1+Fe)/at,Ge),We.points,Ye,Ne,at,ut),Ye===0&&this._addTileFeatures(We.range(1-Fe/at,nt,1,Ge),We.points,at,Ne,at,ut),Ye===at-1&&this._addTileFeatures(We.range(0,nt,Fe/at,Ge),We.points,-1,Ne,at,ut),ut.features.length?ut:null},ie.prototype.getClusterExpansionZoom=function(qe){for(var Ye=this._getOriginZoom(qe)-1;Ye<=this.options.maxZoom;){var Ne=this.getChildren(qe);if(Ye++,Ne.length!==1)break;qe=Ne[0].properties.cluster_id}return Ye},ie.prototype._appendLeaves=function(qe,Ye,Ne,We,at){for(var tt=0,Re=this.getChildren(Ye);tt<Re.length;tt+=1){var Fe=Re[tt],nt=Fe.properties;if(nt&&nt.cluster?at+nt.point_count<=We?at+=nt.point_count:at=this._appendLeaves(qe,nt.cluster_id,Ne,We,at):at<We?at++:qe.push(Fe),qe.length===Ne)break}return at},ie.prototype._addTileFeatures=function(qe,Ye,Ne,We,at,tt){for(var Re=0,Fe=qe;Re<Fe.length;Re+=1){var nt=Ye[Fe[Re]],Ge=nt.numPoints,ut={type:1,geometry:[[Math.round(this.options.extent*(nt.x*at-Ne)),Math.round(this.options.extent*(nt.y*at-We))]],tags:Ge?ve(nt):this.points[nt.index].properties},pt=void 0;Ge?pt=nt.id:this.options.generateId?pt=nt.index:this.points[nt.index].id&&(pt=this.points[nt.index].id),pt!==void 0&&(ut.id=pt),tt.features.push(ut)}},ie.prototype._limitZoom=function(qe){return Math.max(this.options.minZoom,Math.min(+qe,this.options.maxZoom+1))},ie.prototype._cluster=function(qe,Ye){for(var Ne=[],We=this.options,at=We.radius,tt=We.extent,Re=We.reduce,Fe=We.minPoints,nt=at/(tt*Math.pow(2,Ye)),Ge=0;Ge<qe.length;Ge++){var ut=qe[Ge];if(!(ut.zoom<=Ye)){ut.zoom=Ye;for(var pt=this.trees[Ye+1],gt=pt.within(ut.x,ut.y,nt),ct=ut.numPoints||1,Tt=ct,vt=0,kt=gt;vt<kt.length;vt+=1){var Lt=kt[vt],Ct=pt.points[Lt];Ct.zoom>Ye&&(Tt+=Ct.numPoints||1)}if(Tt>=Fe){for(var Dt=ut.x*ct,Gt=ut.y*ct,tn=Re&&ct>1?this._map(ut,!0):null,jt=(Ge<<5)+(Ye+1)+this.points.length,Wt=0,Ft=gt;Wt<Ft.length;Wt+=1){var Ln=Ft[Wt],bn=pt.points[Ln];if(!(bn.zoom<=Ye)){bn.zoom=Ye;var hn=bn.numPoints||1;Dt+=bn.x*hn,Gt+=bn.y*hn,bn.parentId=jt,Re&&(tn||(tn=this._map(ut,!0)),Re(tn,this._map(bn)))}}ut.parentId=jt,Ne.push(se(Dt/Tt,Gt/Tt,jt,Tt,tn))}else if(Ne.push(ut),Tt>1)for(var Kt=0,sn=gt;Kt<sn.length;Kt+=1){var Qt=sn[Kt],cn=pt.points[Qt];cn.zoom<=Ye||(cn.zoom=Ye,Ne.push(cn))}}}return Ne},ie.prototype._getOriginId=function(qe){return qe-this.points.length>>5},ie.prototype._getOriginZoom=function(qe){return(qe-this.points.length)%32},ie.prototype._map=function(qe,Ye){if(qe.numPoints)return Ye?pe({},qe.properties):qe.properties;var Ne=this.points[qe.index].properties,We=this.options.map(Ne);return Ye&&We===Ne?pe({},We):We},Je.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Je.prototype.splitTile=function(qe,Ye,Ne,We,at,tt,Re){for(var Fe=[qe,Ye,Ne,We],nt=this.options,Ge=nt.debug;Fe.length;){We=Fe.pop(),Ne=Fe.pop(),Ye=Fe.pop(),qe=Fe.pop();var ut=1<<Ye,pt=wt(Ye,Ne,We),gt=this.tiles[pt];if(!gt&&(Ge>1&&console.time("creation"),gt=this.tiles[pt]=mt(qe,Ye,Ne,We,nt),this.tileCoords.push({z:Ye,x:Ne,y:We}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ye,Ne,We,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var ct="z"+Ye;this.stats[ct]=(this.stats[ct]||0)+1,this.total++}if(gt.source=qe,at){if(Ye===nt.maxZoom||Ye===at)continue;var Tt=1<<at-Ye;if(Ne!==Math.floor(tt/Tt)||We!==Math.floor(Re/Tt))continue}else if(Ye===nt.indexMaxZoom||gt.numPoints<=nt.indexMaxPoints)continue;if(gt.source=null,qe.length!==0){Ge>1&&console.time("clipping");var vt,kt,Lt,Ct,Dt,Gt,tn=.5*nt.buffer/nt.extent,jt=.5-tn,Wt=.5+tn,Ft=1+tn;vt=kt=Lt=Ct=null,Dt=Oe(qe,ut,Ne-tn,Ne+Wt,0,gt.minX,gt.maxX,nt),Gt=Oe(qe,ut,Ne+jt,Ne+Ft,0,gt.minX,gt.maxX,nt),qe=null,Dt&&(vt=Oe(Dt,ut,We-tn,We+Wt,1,gt.minY,gt.maxY,nt),kt=Oe(Dt,ut,We+jt,We+Ft,1,gt.minY,gt.maxY,nt),Dt=null),Gt&&(Lt=Oe(Gt,ut,We-tn,We+Wt,1,gt.minY,gt.maxY,nt),Ct=Oe(Gt,ut,We+jt,We+Ft,1,gt.minY,gt.maxY,nt),Gt=null),Ge>1&&console.timeEnd("clipping"),Fe.push(vt||[],Ye+1,2*Ne,2*We),Fe.push(kt||[],Ye+1,2*Ne,2*We+1),Fe.push(Lt||[],Ye+1,2*Ne+1,2*We),Fe.push(Ct||[],Ye+1,2*Ne+1,2*We+1)}}},Je.prototype.getTile=function(qe,Ye,Ne){var We=this.options,at=We.extent,tt=We.debug;if(qe<0||qe>24)return null;var Re=1<<qe,Fe=wt(qe,Ye=(Ye%Re+Re)%Re,Ne);if(this.tiles[Fe])return it(this.tiles[Fe],at);tt>1&&console.log("drilling down to z%d-%d-%d",qe,Ye,Ne);for(var nt,Ge=qe,ut=Ye,pt=Ne;!nt&&Ge>0;)Ge--,ut=Math.floor(ut/2),pt=Math.floor(pt/2),nt=this.tiles[wt(Ge,ut,pt)];return nt&&nt.source?(tt>1&&console.log("found parent tile z%d-%d-%d",Ge,ut,pt),tt>1&&console.time("drilling down"),this.splitTile(nt.source,Ge,ut,pt,qe,Ye,Ne),tt>1&&console.timeEnd("drilling down"),this.tiles[Fe]?it(this.tiles[Fe],at):null):null};var It=function(qe){function Ye(Ne,We,at,tt){qe.call(this,Ne,We,at,Pt),tt&&(this.loadGeoJSON=tt)}return qe&&(Ye.__proto__=qe),Ye.prototype=Object.create(qe&&qe.prototype),Ye.prototype.constructor=Ye,Ye.prototype.loadData=function(Ne,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=We,this._pendingLoadDataParams=Ne,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ye.prototype._loadData=function(){var Ne=this;if(this._pendingCallback&&this._pendingLoadDataParams){var We=this._pendingCallback,at=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var tt=!!(at&&at.request&&at.request.collectResourceTiming)&&new o.RequestPerformance(at.request);this.loadGeoJSON(at,function(Re,Fe){if(Re||!Fe)return We(Re);if(typeof Fe!="object")return We(new Error("Input data given to '"+at.source+"' is not a valid GeoJSON object."));c(Fe,!0);try{if(at.filter){var nt=o.createExpression(at.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nt.result==="error")throw new Error(nt.value.map(function(gt){return gt.key+": "+gt.message}).join(", "));var Ge=Fe.features.filter(function(gt){return nt.value.evaluate({zoom:0},gt)});Fe={type:"FeatureCollection",features:Ge}}Ne._geoJSONIndex=at.cluster?new ie(function(gt){var ct=gt.superclusterOptions,Tt=gt.clusterProperties;if(!Tt||!ct)return ct;for(var vt={},kt={},Lt={accumulated:null,zoom:0},Ct={properties:null},Dt=Object.keys(Tt),Gt=0,tn=Dt;Gt<tn.length;Gt+=1){var jt=tn[Gt],Wt=Tt[jt],Ft=Wt[0],Ln=Wt[1],bn=o.createExpression(Ln),hn=o.createExpression(typeof Ft=="string"?[Ft,["accumulated"],["get",jt]]:Ft);vt[jt]=bn.value,kt[jt]=hn.value}return ct.map=function(Kt){Ct.properties=Kt;for(var sn={},Qt=0,cn=Dt;Qt<cn.length;Qt+=1){var vn=cn[Qt];sn[vn]=vt[vn].evaluate(Lt,Ct)}return sn},ct.reduce=function(Kt,sn){Ct.properties=sn;for(var Qt=0,cn=Dt;Qt<cn.length;Qt+=1){var vn=cn[Qt];Lt.accumulated=Kt[vn],Kt[vn]=kt[vn].evaluate(Lt,Ct)}},ct}(at)).load(Fe.features):function(gt,ct){return new Je(gt,ct)}(Fe,at.geojsonVtOptions)}catch(gt){return We(gt)}Ne.loaded={};var ut={};if(tt){var pt=tt.finish();pt&&(ut.resourceTiming={},ut.resourceTiming[at.source]=JSON.parse(JSON.stringify(pt)))}We(null,ut)})}},Ye.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ye.prototype.reloadTile=function(Ne,We){var at=this.loaded,tt=Ne.uid;return at&&at[tt]?qe.prototype.reloadTile.call(this,Ne,We):this.loadTile(Ne,We)},Ye.prototype.loadGeoJSON=function(Ne,We){if(Ne.request)o.getJSON(Ne.request,We);else{if(typeof Ne.data!="string")return We(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));try{return We(null,JSON.parse(Ne.data))}catch{return We(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."))}}},Ye.prototype.removeSource=function(Ne,We){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),We()},Ye.prototype.getClusterExpansionZoom=function(Ne,We){try{We(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(at){We(at)}},Ye.prototype.getClusterChildren=function(Ne,We){try{We(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(at){We(at)}},Ye.prototype.getClusterLeaves=function(Ne,We){try{We(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(at){We(at)}},Ye}(r),At=function(qe){var Ye=this;this.self=qe,this.actor=new o.Actor(qe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:r,geojson:It},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ne,We){if(Ye.workerSourceTypes[Ne])throw new Error('Worker source with name "'+Ne+'" already registered.');Ye.workerSourceTypes[Ne]=We},this.self.registerRTLTextPlugin=function(Ne){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Ne.applyArabicShaping,o.plugin.processBidirectionalText=Ne.processBidirectionalText,o.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}};return At.prototype.setReferrer=function(qe,Ye){this.referrer=Ye},At.prototype.setImages=function(qe,Ye,Ne){for(var We in this.availableImages[qe]=Ye,this.workerSources[qe]){var at=this.workerSources[qe][We];for(var tt in at)at[tt].availableImages=Ye}Ne()},At.prototype.setLayers=function(qe,Ye,Ne){this.getLayerIndex(qe).replace(Ye),Ne()},At.prototype.updateLayers=function(qe,Ye,Ne){this.getLayerIndex(qe).update(Ye.layers,Ye.removedIds),Ne()},At.prototype.loadTile=function(qe,Ye,Ne){this.getWorkerSource(qe,Ye.type,Ye.source).loadTile(Ye,Ne)},At.prototype.loadDEMTile=function(qe,Ye,Ne){this.getDEMWorkerSource(qe,Ye.source).loadTile(Ye,Ne)},At.prototype.reloadTile=function(qe,Ye,Ne){this.getWorkerSource(qe,Ye.type,Ye.source).reloadTile(Ye,Ne)},At.prototype.abortTile=function(qe,Ye,Ne){this.getWorkerSource(qe,Ye.type,Ye.source).abortTile(Ye,Ne)},At.prototype.removeTile=function(qe,Ye,Ne){this.getWorkerSource(qe,Ye.type,Ye.source).removeTile(Ye,Ne)},At.prototype.removeDEMTile=function(qe,Ye){this.getDEMWorkerSource(qe,Ye.source).removeTile(Ye)},At.prototype.removeSource=function(qe,Ye,Ne){if(this.workerSources[qe]&&this.workerSources[qe][Ye.type]&&this.workerSources[qe][Ye.type][Ye.source]){var We=this.workerSources[qe][Ye.type][Ye.source];delete this.workerSources[qe][Ye.type][Ye.source],We.removeSource!==void 0?We.removeSource(Ye,Ne):Ne()}},At.prototype.loadWorkerSource=function(qe,Ye,Ne){try{this.self.importScripts(Ye.url),Ne()}catch(We){Ne(We.toString())}},At.prototype.syncRTLPluginState=function(qe,Ye,Ne){try{o.plugin.setState(Ye);var We=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&We!=null){this.self.importScripts(We);var at=o.plugin.isParsed();Ne(at?void 0:new Error("RTL Text Plugin failed to import scripts from "+We),at)}}catch(tt){Ne(tt.toString())}},At.prototype.getAvailableImages=function(qe){var Ye=this.availableImages[qe];return Ye||(Ye=[]),Ye},At.prototype.getLayerIndex=function(qe){var Ye=this.layerIndexes[qe];return Ye||(Ye=this.layerIndexes[qe]=new p),Ye},At.prototype.getWorkerSource=function(qe,Ye,Ne){var We=this;if(this.workerSources[qe]||(this.workerSources[qe]={}),this.workerSources[qe][Ye]||(this.workerSources[qe][Ye]={}),!this.workerSources[qe][Ye][Ne]){var at={send:function(tt,Re,Fe){We.actor.send(tt,Re,Fe,qe)}};this.workerSources[qe][Ye][Ne]=new this.workerSourceTypes[Ye](at,this.getLayerIndex(qe),this.getAvailableImages(qe))}return this.workerSources[qe][Ye][Ne]},At.prototype.getDEMWorkerSource=function(qe,Ye){return this.demWorkerSources[qe]||(this.demWorkerSources[qe]={}),this.demWorkerSources[qe][Ye]||(this.demWorkerSources[qe][Ye]=new l),this.demWorkerSources[qe][Ye]},At.prototype.enforceCacheSizeLimit=function(qe,Ye){o.enforceCacheSizeLimit(Ye)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new At(self)),At}),k(0,function(o){var T=o.createCommonjsModule(function(B){function G(V){return!H(V)}function H(V){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ne,ce,xe=new Blob([""],{type:"text/javascript"}),Ce=URL.createObjectURL(xe);try{ce=new Worker(Ce),ne=!0}catch{ne=!1}return ce&&ce.terminate(),URL.revokeObjectURL(Ce),ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ne=document.createElement("canvas");ne.width=ne.height=1;var ce=ne.getContext("2d");if(!ce)return!1;var xe=ce.getImageData(0,0,1,1);return xe&&xe.width===ne.width}()?($=V&&V.failIfMajorPerformanceCaveat,L[$]===void 0&&(L[$]=function(ne){var ce=function(Ce){var ze=document.createElement("canvas"),Ue=Object.create(G.webGLContextAttributes);return Ue.failIfMajorPerformanceCaveat=Ce,ze.probablySupportsContext?ze.probablySupportsContext("webgl",Ue)||ze.probablySupportsContext("experimental-webgl",Ue):ze.supportsContext?ze.supportsContext("webgl",Ue)||ze.supportsContext("experimental-webgl",Ue):ze.getContext("webgl",Ue)||ze.getContext("experimental-webgl",Ue)}(ne);if(!ce)return!1;var xe=ce.createShader(ce.VERTEX_SHADER);return!(!xe||ce.isContextLost())&&(ce.shaderSource(xe,"void main() {}"),ce.compileShader(xe),ce.getShaderParameter(xe,ce.COMPILE_STATUS)===!0)}($)),L[$]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var $}B.exports?B.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=H);var L={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(B,G,H){var L=o.window.document.createElement(B);return G!==void 0&&(L.className=G),H&&H.appendChild(L),L},createNS:function(B,G){return o.window.document.createElementNS(B,G)}},p=o.window.document&&o.window.document.documentElement.style;function s(B){if(!p)return B[0];for(var G=0;G<B.length;G++)if(B[G]in p)return B[G];return B[0]}var t,i=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){p&&i&&(t=p[i],p[i]="none")},b.enableDrag=function(){p&&i&&(p[i]=t)};var n=s(["transform","WebkitTransform"]);b.setTransform=function(B,G){B.style[n]=G};var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});o.window.addEventListener("test",a,a),o.window.removeEventListener("test",a,a)}catch{r=!1}b.addEventListener=function(B,G,H,L){L===void 0&&(L={}),"passive"in L&&r?B.addEventListener(G,H,L):B.addEventListener(G,H,L.capture)},b.removeEventListener=function(B,G,H,L){L===void 0&&(L={}),"passive"in L&&r?B.removeEventListener(G,H,L):B.removeEventListener(G,H,L.capture)};var l=function(B){B.preventDefault(),B.stopPropagation(),o.window.removeEventListener("click",l,!0)};function c(B){var G=B.userImage;return!!(G&&G.render&&G.render())&&(B.data.replace(new Uint8Array(G.data.buffer)),!0)}b.suppressClick=function(){o.window.addEventListener("click",l,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",l,!0)},0)},b.mousePos=function(B,G){var H=B.getBoundingClientRect();return new o.Point(G.clientX-H.left-B.clientLeft,G.clientY-H.top-B.clientTop)},b.touchPos=function(B,G){for(var H=B.getBoundingClientRect(),L=[],V=0;V<G.length;V++)L.push(new o.Point(G[V].clientX-H.left-B.clientLeft,G[V].clientY-H.top-B.clientTop));return L},b.mouseButton=function(B){return o.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},b.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var h=function(B){function G(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var L=0,V=this.requestors;L<V.length;L+=1){var $=V[L],ne=$.ids,ce=$.callback;this._notify(ne,ce)}this.requestors=[]}},G.prototype.getImage=function(H){return this.images[H]},G.prototype.addImage=function(H,L){this._validate(H,L)&&(this.images[H]=L)},G.prototype._validate=function(H,L){var V=!0;return this._validateStretch(L.stretchX,L.data&&L.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),V=!1),this._validateStretch(L.stretchY,L.data&&L.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),V=!1),this._validateContent(L.content,L)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),V=!1),V},G.prototype._validateStretch=function(H,L){if(!H)return!0;for(var V=0,$=0,ne=H;$<ne.length;$+=1){var ce=ne[$];if(ce[0]<V||ce[1]<ce[0]||L<ce[1])return!1;V=ce[1]}return!0},G.prototype._validateContent=function(H,L){return!(H&&(H.length!==4||H[0]<0||L.data.width<H[0]||H[1]<0||L.data.height<H[1]||H[2]<0||L.data.width<H[2]||H[3]<0||L.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},G.prototype.updateImage=function(H,L){var V=this.images[H];L.version=V.version+1,this.images[H]=L,this.updatedImages[H]=!0},G.prototype.removeImage=function(H){var L=this.images[H];delete this.images[H],delete this.patterns[H],L.userImage&&L.userImage.onRemove&&L.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(H,L){var V=!0;if(!this.isLoaded())for(var $=0,ne=H;$<ne.length;$+=1){var ce=ne[$];this.images[ce]||(V=!1)}this.isLoaded()||V?this._notify(H,L):this.requestors.push({ids:H,callback:L})},G.prototype._notify=function(H,L){for(var V={},$=0,ne=H;$<ne.length;$+=1){var ce=ne[$];this.images[ce]||this.fire(new o.Event("styleimagemissing",{id:ce}));var xe=this.images[ce];xe?V[ce]={data:xe.data.clone(),pixelRatio:xe.pixelRatio,sdf:xe.sdf,version:xe.version,stretchX:xe.stretchX,stretchY:xe.stretchY,content:xe.content,hasRenderCallback:!!(xe.userImage&&xe.userImage.render)}:o.warnOnce('Image "'+ce+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}L(null,V)},G.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},G.prototype.getPattern=function(H){var L=this.patterns[H],V=this.getImage(H);if(!V)return null;if(L&&L.position.version===V.version)return L.position;if(L)L.position.version=V.version;else{var $={w:V.data.width+2,h:V.data.height+2,x:0,y:0},ne=new o.ImagePosition($,V);this.patterns[H]={bin:$,position:ne}}return this._updatePatternAtlas(),this.patterns[H].position},G.prototype.bind=function(H){var L=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(H,this.atlasImage,L.RGBA),this.atlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var H=[];for(var L in this.patterns)H.push(this.patterns[L].bin);var V=o.potpack(H),$=V.w,ne=V.h,ce=this.atlasImage;for(var xe in ce.resize({width:$||1,height:ne||1}),this.patterns){var Ce=this.patterns[xe].bin,ze=Ce.x+1,Ue=Ce.y+1,He=this.images[xe].data,et=He.width,lt=He.height;o.RGBAImage.copy(He,ce,{x:0,y:0},{x:ze,y:Ue},{width:et,height:lt}),o.RGBAImage.copy(He,ce,{x:0,y:lt-1},{x:ze,y:Ue-1},{width:et,height:1}),o.RGBAImage.copy(He,ce,{x:0,y:0},{x:ze,y:Ue+lt},{width:et,height:1}),o.RGBAImage.copy(He,ce,{x:et-1,y:0},{x:ze-1,y:Ue},{width:1,height:lt}),o.RGBAImage.copy(He,ce,{x:0,y:0},{x:ze+et,y:Ue},{width:1,height:lt})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(H){for(var L=0,V=H;L<V.length;L+=1){var $=V[L];if(!this.callbackDispatchedThisFrame[$]){this.callbackDispatchedThisFrame[$]=!0;var ne=this.images[$];c(ne)&&this.updateImage($,ne)}}},G}(o.Evented),u=m,x=m,d=1e20;function m(B,G,H,L,V,$){this.fontSize=B||24,this.buffer=G===void 0?3:G,this.cutoff=L||.25,this.fontFamily=V||"sans-serif",this.fontWeight=$||"normal",this.radius=H||8;var ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ne*ne),this.gridInner=new Float64Array(ne*ne),this.f=new Float64Array(ne),this.d=new Float64Array(ne),this.z=new Float64Array(ne+1),this.v=new Int16Array(ne),this.middle=Math.round(ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(B,G,H,L,V,$,ne){for(var ce=0;ce<G;ce++){for(var xe=0;xe<H;xe++)L[xe]=B[xe*G+ce];for(y(L,V,$,ne,H),xe=0;xe<H;xe++)B[xe*G+ce]=V[xe]}for(xe=0;xe<H;xe++){for(ce=0;ce<G;ce++)L[ce]=B[xe*G+ce];for(y(L,V,$,ne,G),ce=0;ce<G;ce++)B[xe*G+ce]=Math.sqrt(V[ce])}}function y(B,G,H,L,V){H[0]=0,L[0]=-d,L[1]=+d;for(var $=1,ne=0;$<V;$++){for(var ce=(B[$]+$*$-(B[H[ne]]+H[ne]*H[ne]))/(2*$-2*H[ne]);ce<=L[ne];)ne--,ce=(B[$]+$*$-(B[H[ne]]+H[ne]*H[ne]))/(2*$-2*H[ne]);H[++ne]=$,L[ne]=ce,L[ne+1]=+d}for($=0,ne=0;$<V;$++){for(;L[ne+1]<$;)ne++;G[$]=($-H[ne])*($-H[ne])+B[H[ne]]}}m.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),L=0;L<this.size*this.size;L++){var V=G.data[4*L+3]/255;this.gridOuter[L]=V===1?0:V===0?d:Math.pow(Math.max(0,.5-V),2),this.gridInner[L]=V===1?d:V===0?0:Math.pow(Math.max(0,V-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),L=0;L<this.size*this.size;L++){var $=this.gridOuter[L]-this.gridInner[L];H[L]=Math.max(0,Math.min(255,Math.round(255-255*($/this.radius+this.cutoff))))}return H},u.default=x;var v=function(B,G){this.requestManager=B,this.localIdeographFontFamily=G,this.entries={}};v.prototype.setURL=function(B){this.url=B},v.prototype.getGlyphs=function(B,G){var H=this,L=[];for(var V in B)for(var $=0,ne=B[V];$<ne.length;$+=1){var ce=ne[$];L.push({stack:V,id:ce})}o.asyncAll(L,function(xe,Ce){var ze=xe.stack,Ue=xe.id,He=H.entries[ze];He||(He=H.entries[ze]={glyphs:{},requests:{},ranges:{}});var et=He.glyphs[Ue];if(et===void 0){if(et=H._tinySDF(He,ze,Ue))return He.glyphs[Ue]=et,void Ce(null,{stack:ze,id:Ue,glyph:et});var lt=Math.floor(Ue/256);if(256*lt>65535)Ce(new Error("glyphs > 65535 not supported"));else if(He.ranges[lt])Ce(null,{stack:ze,id:Ue,glyph:et});else{var ft=He.requests[lt];ft||(ft=He.requests[lt]=[],v.loadGlyphRange(ze,lt,H.url,H.requestManager,function(xt,Mt){if(Mt){for(var _t in Mt)H._doesCharSupportLocalGlyph(+_t)||(He.glyphs[+_t]=Mt[+_t]);He.ranges[lt]=!0}for(var zt=0,Et=ft;zt<Et.length;zt+=1)(0,Et[zt])(xt,Mt);delete He.requests[lt]})),ft.push(function(xt,Mt){xt?Ce(xt):Mt&&Ce(null,{stack:ze,id:Ue,glyph:Mt[Ue]||null})})}}else Ce(null,{stack:ze,id:Ue,glyph:et})},function(xe,Ce){if(xe)G(xe);else if(Ce){for(var ze={},Ue=0,He=Ce;Ue<He.length;Ue+=1){var et=He[Ue],lt=et.stack,ft=et.id,xt=et.glyph;(ze[lt]||(ze[lt]={}))[ft]=xt&&{id:xt.id,bitmap:xt.bitmap.clone(),metrics:xt.metrics}}G(null,ze)}})},v.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](B)||o.isChar["Hangul Syllables"](B)||o.isChar.Hiragana(B)||o.isChar.Katakana(B))},v.prototype._tinySDF=function(B,G,H){var L=this.localIdeographFontFamily;if(L&&this._doesCharSupportLocalGlyph(H)){var V=B.tinySDF;if(!V){var $="400";/bold/i.test(G)?$="900":/medium/i.test(G)?$="500":/light/i.test(G)&&($="200"),V=B.tinySDF=new v.TinySDF(24,3,8,.25,L,$)}return{id:H,bitmap:new o.AlphaImage({width:30,height:30},V.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(B,G,H,L,V){var $=256*G,ne=$+255,ce=L.transformRequest(L.normalizeGlyphsURL(H).replace("{fontstack}",B).replace("{range}",$+"-"+ne),o.ResourceType.Glyphs);o.getArrayBuffer(ce,function(xe,Ce){if(xe)V(xe);else if(Ce){for(var ze={},Ue=0,He=o.parseGlyphPBF(Ce);Ue<He.length;Ue+=1){var et=He[Ue];ze[et.id]=et}V(null,ze)}})},v.TinySDF=u;var _=function(){this.specification=o.styleSpec.light.position};_.prototype.possiblyEvaluate=function(B,G){return o.sphericalToCartesian(B.expression.evaluate(G))},_.prototype.interpolate=function(B,G,H){return{x:o.number(B.x,G.x,H),y:o.number(B.y,G.y,H),z:o.number(B.z,G.z,H)}};var f=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new _,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),S="-transition",w=function(B){function G(H){B.call(this),this._transitionable=new o.Transitionable(f),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(H,L){if(L===void 0&&(L={}),!this._validate(o.validateLight,H,L))for(var V in H){var $=H[V];o.endsWith(V,S)?this._transitionable.setTransition(V.slice(0,-11),$):this._transitionable.setValue(V,$)}},G.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},G.prototype._validate=function(H,L,V){return(!V||V.validate!==!1)&&o.emitValidationErrors(this,H.call(o.validateStyle,o.extend({value:L,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},G}(o.Evented),E=function(B,G){this.width=B,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(B,G){var H=B.join(",")+String(G);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(B,G)),this.dashEntry[H]},E.prototype.getDashRanges=function(B,G,H){var L=[],V=B.length%2==1?-B[B.length-1]*H:0,$=B[0]*H,ne=!0;L.push({left:V,right:$,isDash:ne,zeroLength:B[0]===0});for(var ce=B[0],xe=1;xe<B.length;xe++){ne=!ne;var Ce=B[xe];V=ce*H,$=(ce+=Ce)*H,L.push({left:V,right:$,isDash:ne,zeroLength:Ce===0})}return L},E.prototype.addRoundDash=function(B,G,H){for(var L=G/2,V=-H;V<=H;V++)for(var $=this.nextRow+H+V,ne=this.width*$,ce=0,xe=B[ce],Ce=0;Ce<this.width;Ce++){Ce/xe.right>1&&(xe=B[++ce]);var ze=Math.abs(Ce-xe.left),Ue=Math.abs(Ce-xe.right),He=Math.min(ze,Ue),et=void 0,lt=V/H*(L+1);if(xe.isDash){var ft=L-Math.abs(lt);et=Math.sqrt(He*He+ft*ft)}else et=L-Math.sqrt(He*He+lt*lt);this.data[ne+Ce]=Math.max(0,Math.min(255,et+128))}},E.prototype.addRegularDash=function(B){for(var G=B.length-1;G>=0;--G){var H=B[G],L=B[G+1];H.zeroLength?B.splice(G,1):L&&L.isDash===H.isDash&&(L.left=H.left,B.splice(G,1))}var V=B[0],$=B[B.length-1];V.isDash===$.isDash&&(V.left=$.left-this.width,$.right=V.right+this.width);for(var ne=this.width*this.nextRow,ce=0,xe=B[ce],Ce=0;Ce<this.width;Ce++){Ce/xe.right>1&&(xe=B[++ce]);var ze=Math.abs(Ce-xe.left),Ue=Math.abs(Ce-xe.right),He=Math.min(ze,Ue),et=xe.isDash?He:-He;this.data[ne+Ce]=Math.max(0,Math.min(255,et+128))}},E.prototype.addDash=function(B,G){var H=G?7:0,L=2*H+1;if(this.nextRow+L>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var V=0,$=0;$<B.length;$++)V+=B[$];if(V!==0){var ne=this.width/V,ce=this.getDashRanges(B,this.width,ne);G?this.addRoundDash(ce,ne,H):this.addRegularDash(ce)}var xe={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:V};return this.nextRow+=L,this.dirty=!0,xe},E.prototype.bind=function(B){var G=B.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var P=function B(G,H){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var L=this.workerPool.acquire(this.id),V=0;V<L.length;V++){var $=L[V],ne=new B.Actor($,H,this.id);ne.name="Worker "+V,this.actors.push(ne)}};function C(B,G,H){var L=function(V,$){if(V)return H(V);if($){var ne=o.pick(o.extend($,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);$.vector_layers&&(ne.vectorLayers=$.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(function(ce){return ce.id})),ne.tiles=G.canonicalizeTileset(ne,B.url),H(null,ne)}};return B.url?o.getJSON(G.transformRequest(G.normalizeSourceURL(B.url),o.ResourceType.Source),L):o.browser.frame(function(){return L(null,B)})}P.prototype.broadcast=function(B,G,H){H=H||function(){},o.asyncAll(this.actors,function(L,V){L.send(B,G,V)},H)},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=o.Actor;var O=function(B,G,H){this.bounds=o.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=G||0,this.maxzoom=H||24};O.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},O.prototype.contains=function(B){var G=Math.pow(2,B.z),H=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*G),L=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*G),V=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*G),$=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*G);return B.x>=H&&B.x<V&&B.y>=L&&B.y<$};var R=function(B){function G(H,L,V,$){if(B.call(this),this.id=H,this.dispatcher=V,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(L,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},L),this._collectResourceTiming=L.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent($)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,V){H._tileJSONRequest=null,H._loaded=!0,L?H.fire(new o.ErrorEvent(L)):V&&(o.extend(H,V),V.bounds&&(H.tileBounds=new O(V.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(V.tiles,H.map._requestManager._customAccessToken),o.postMapLoadEvent(V.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setSourceProperty=function(H){this._tileJSONRequest&&this._tileJSONRequest.cancel(),H(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},G.prototype.setTiles=function(H){var L=this;return this.setSourceProperty(function(){L._options.tiles=H}),this},G.prototype.setUrl=function(H){var L=this;return this.setSourceProperty(function(){L.url=H,L._options.url=H}),this},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.loadTile=function(H,L){var V=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),$={request:this.map._requestManager.transformRequest(V,o.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ne(ce,xe){return delete H.request,H.aborted?L(null):ce&&ce.status!==404?L(ce):(xe&&xe.resourceTiming&&(H.resourceTiming=xe.resourceTiming),this.map._refreshExpiredTiles&&xe&&H.setExpiryData(xe),H.loadVectorData(xe,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),L(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}$.request.collectResourceTiming=this._collectResourceTiming,H.actor&&H.state!=="expired"?H.state==="loading"?H.reloadCallback=L:H.request=H.actor.send("reloadTile",$,ne.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",$,ne.bind(this)))},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(o.Evented),U=function(B){function G(H,L,V,$){B.call(this),this.id=H,this.dispatcher=V,this.setEventedParent($),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},L),o.extend(this,o.pick(L,["url","scheme","tileSize"]))}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,V){H._tileJSONRequest=null,H._loaded=!0,L?H.fire(new o.ErrorEvent(L)):V&&(o.extend(H,V),V.bounds&&(H.tileBounds=new O(V.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(V.tiles),o.postMapLoadEvent(V.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.loadTile=function(H,L){var V=this,$=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=o.getImage(this.map._requestManager.transformRequest($,o.ResourceType.Tile),function(ne,ce){if(delete H.request,H.aborted)H.state="unloaded",L(null);else if(ne)H.state="errored",L(ne);else if(ce){V.map._refreshExpiredTiles&&H.setExpiryData(ce),delete ce.cacheControl,delete ce.expires;var xe=V.map.painter.context,Ce=xe.gl;H.texture=V.map.painter.getTileTexture(ce.width),H.texture?H.texture.update(ce,{useMipmap:!0}):(H.texture=new o.Texture(xe,ce,Ce.RGBA,{useMipmap:!0}),H.texture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),xe.extTextureFilterAnisotropic&&Ce.texParameterf(Ce.TEXTURE_2D,xe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,xe.extTextureFilterAnisotropicMax)),H.state="loaded",o.cacheEntryPossiblyAdded(V.dispatcher),L(null)}})},G.prototype.abortTile=function(H,L){H.request&&(H.request.cancel(),delete H.request),L()},G.prototype.unloadTile=function(H,L){H.texture&&this.map.painter.saveTileTexture(H.texture),L()},G.prototype.hasTransition=function(){return!1},G}(o.Evented),D=function(B){function G(H,L,V,$){B.call(this,H,L,V,$),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},L),this.encoding=L.encoding||"mapbox"}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(H,L){var V=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function $(ne,ce){ne&&(H.state="errored",L(ne)),ce&&(H.dem=ce,H.needsHillshadePrepare=!0,H.state="loaded",L(null))}H.request=o.getImage(this.map._requestManager.transformRequest(V,o.ResourceType.Tile),(function(ne,ce){if(delete H.request,H.aborted)H.state="unloaded",L(null);else if(ne)H.state="errored",L(ne);else if(ce){this.map._refreshExpiredTiles&&H.setExpiryData(ce),delete ce.cacheControl,delete ce.expires;var xe=o.window.ImageBitmap&&ce instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?ce:o.browser.getImageData(ce,1),Ce={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:xe,encoding:this.encoding};H.actor&&H.state!=="expired"||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",Ce,$.bind(this)))}}).bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},G.prototype._getNeighboringTiles=function(H){var L=H.canonical,V=Math.pow(2,L.z),$=(L.x-1+V)%V,ne=L.x===0?H.wrap-1:H.wrap,ce=(L.x+1+V)%V,xe=L.x+1===V?H.wrap+1:H.wrap,Ce={};return Ce[new o.OverscaledTileID(H.overscaledZ,ne,L.z,$,L.y).key]={backfilled:!1},Ce[new o.OverscaledTileID(H.overscaledZ,xe,L.z,ce,L.y).key]={backfilled:!1},L.y>0&&(Ce[new o.OverscaledTileID(H.overscaledZ,ne,L.z,$,L.y-1).key]={backfilled:!1},Ce[new o.OverscaledTileID(H.overscaledZ,H.wrap,L.z,L.x,L.y-1).key]={backfilled:!1},Ce[new o.OverscaledTileID(H.overscaledZ,xe,L.z,ce,L.y-1).key]={backfilled:!1}),L.y+1<V&&(Ce[new o.OverscaledTileID(H.overscaledZ,ne,L.z,$,L.y+1).key]={backfilled:!1},Ce[new o.OverscaledTileID(H.overscaledZ,H.wrap,L.z,L.x,L.y+1).key]={backfilled:!1},Ce[new o.OverscaledTileID(H.overscaledZ,xe,L.z,ce,L.y+1).key]={backfilled:!1}),Ce},G.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},G}(U),N=function(B){function G(H,L,V,$){B.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=V.getActor(),this.setEventedParent($),this._data=L.data,this._options=o.extend({},L),this._collectResourceTiming=L.collectResourceTiming,this._resourceTiming=[],L.maxzoom!==void 0&&(this.maxzoom=L.maxzoom),L.type&&(this.type=L.type),L.attribution&&(this.attribution=L.attribution),this.promoteId=L.promoteId;var ne=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:L.cluster||!1,geojsonVtOptions:{buffer:(L.buffer!==void 0?L.buffer:128)*ne,tolerance:(L.tolerance!==void 0?L.tolerance:.375)*ne,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:L.lineMetrics||!1,generateId:L.generateId||!1},superclusterOptions:{maxZoom:L.clusterMaxZoom!==void 0?Math.min(L.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,L.clusterMinPoints||2),extent:o.EXTENT,radius:(L.clusterRadius||50)*ne,log:!1,generateId:L.generateId||!1},clusterProperties:L.clusterProperties,filter:L.filter},L.workerOptions)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L)H.fire(new o.ErrorEvent(L));else{var V={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(V.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new o.Event("data",V))}})},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setData=function(H){var L=this;return this._data=H,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(V){if(V)L.fire(new o.ErrorEvent(V));else{var $={dataType:"source",sourceDataType:"content"};L._collectResourceTiming&&L._resourceTiming&&L._resourceTiming.length>0&&($.resourceTiming=L._resourceTiming,L._resourceTiming=[]),L.fire(new o.Event("data",$))}}),this},G.prototype.getClusterExpansionZoom=function(H,L){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},L),this},G.prototype.getClusterChildren=function(H,L){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},L),this},G.prototype.getClusterLeaves=function(H,L,V,$){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:L,offset:V},$),this},G.prototype._updateWorkerData=function(H){var L=this;this._loaded=!1;var V=o.extend({},this.workerOptions),$=this._data;typeof $=="string"?(V.request=this.map._requestManager.transformRequest(o.browser.resolveURL($),o.ResourceType.Source),V.request.collectResourceTiming=this._collectResourceTiming):V.data=JSON.stringify($),this.actor.send(this.type+".loadData",V,function(ne,ce){L._removed||ce&&ce.abandoned||(L._loaded=!0,ce&&ce.resourceTiming&&ce.resourceTiming[L.id]&&(L._resourceTiming=ce.resourceTiming[L.id].slice(0)),L.actor.send(L.type+".coalesce",{source:V.source},null),H(ne))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(H,L){var V=this,$=H.actor?"reloadTile":"loadTile";H.actor=this.actor;var ne={type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};H.request=this.actor.send($,ne,function(ce,xe){return delete H.request,H.unloadVectorData(),H.aborted?L(null):ce?L(ce):(H.loadVectorData(xe,V.map.painter,$==="reloadTile"),L(null))})},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},G.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(o.Evented),W=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(B){function G(H,L,V,$){B.call(this),this.id=H,this.dispatcher=V,this.coordinates=L.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent($),this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(H,L){var V=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function($,ne){V._loaded=!0,$?V.fire(new o.ErrorEvent($)):ne&&(V.image=ne,H&&(V.coordinates=H),L&&L(),V._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(H){var L=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){L.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setCoordinates=function(H){var L=this;this.coordinates=H;var V=H.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(ne){for(var ce=1/0,xe=1/0,Ce=-1/0,ze=-1/0,Ue=0,He=ne;Ue<He.length;Ue+=1){var et=He[Ue];ce=Math.min(ce,et.x),xe=Math.min(xe,et.y),Ce=Math.max(Ce,et.x),ze=Math.max(ze,et.y)}var lt=Ce-ce,ft=ze-xe,xt=Math.max(lt,ft),Mt=Math.max(0,Math.floor(-Math.log(xt)/Math.LN2)),_t=Math.pow(2,Mt);return new o.CanonicalTileID(Mt,Math.floor((ce+Ce)/2*_t),Math.floor((xe+ze)/2*_t))}(V),this.minzoom=this.maxzoom=this.tileID.z;var $=V.map(function(ne){return L.tileID.getTilePoint(ne)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack($[0].x,$[0].y,0,0),this._boundsArray.emplaceBack($[1].x,$[1].y,o.EXTENT,0),this._boundsArray.emplaceBack($[3].x,$[3].y,0,o.EXTENT),this._boundsArray.emplaceBack($[2].x,$[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var H=this.map.painter.context,L=H.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(H,this.image,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var $=this.tiles[V];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},G.prototype.loadTile=function(H,L){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},L(null)):(H.state="errored",L(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(o.Evented),j=function(B){function G(H,L,V,$){B.call(this,H,L,V,$),this.roundZoom=!0,this.type="video",this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1;var L=this.options;this.urls=[];for(var V=0,$=L.urls;V<$.length;V+=1){var ne=$[V];this.urls.push(this.map._requestManager.transformRequest(ne,o.ResourceType.Source).url)}o.getVideo(this.urls,function(ce,xe){H._loaded=!0,ce?H.fire(new o.ErrorEvent(ce)):xe&&(H.video=xe,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(H){if(this.video){var L=this.video.seekable;H<L.start(0)||H>L.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+L.start(0)+" and "+L.end(0)+"-second mark."))):this.video.currentTime=H}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var H=this.map.painter.context,L=H.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE),L.texSubImage2D(L.TEXTURE_2D,0,0,0,L.RGBA,L.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(H,this.video,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var $=this.tiles[V];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(F),q=function(B){function G(H,L,V,$){B.call(this,H,L,V,$),L.coordinates?Array.isArray(L.coordinates)&&L.coordinates.length===4&&!L.coordinates.some(function(ne){return!Array.isArray(ne)||ne.length!==2||ne.some(function(ce){return typeof ce!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "coordinates"'))),L.animate&&typeof L.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),L.canvas?typeof L.canvas=="string"||L.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=L,this.animate=L.animate===void 0||L.animate}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var L=this.map.painter.context,V=L.gl;for(var $ in this.boundsBuffer||(this.boundsBuffer=L.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(L,this.canvas,V.RGBA,{premultiply:!0}),this.tiles){var ne=this.tiles[$];ne.state!=="loaded"&&(ne.state="loaded",ne.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var H=0,L=[this.canvas.width,this.canvas.height];H<L.length;H+=1){var V=L[H];if(isNaN(V)||V<=0)return!0}return!1},G}(F),te={vector:R,raster:U,"raster-dem":D,geojson:N,video:j,image:F,canvas:q};function ee(B,G){var H=o.identity([]);return o.translate(H,H,[1,1,0]),o.scale(H,H,[.5*B.width,.5*B.height,1]),o.multiply(H,H,B.calculatePosMatrix(G.toUnwrapped()))}function Q(B,G,H,L,V,$){var ne=function(ft,xt,Mt){if(ft)for(var _t=0,zt=ft;_t<zt.length;_t+=1){var Et=xt[zt[_t]];if(Et&&Et.source===Mt&&Et.type==="fill-extrusion")return!0}else for(var Yt in xt){var Vt=xt[Yt];if(Vt.source===Mt&&Vt.type==="fill-extrusion")return!0}return!1}(V&&V.layers,G,B.id),ce=$.maxPitchScaleFactor(),xe=B.tilesIn(L,ce,ne);xe.sort(J);for(var Ce=[],ze=0,Ue=xe;ze<Ue.length;ze+=1){var He=Ue[ze];Ce.push({wrappedTileID:He.tileID.wrapped().key,queryResults:He.tile.queryRenderedFeatures(G,H,B._state,He.queryGeometry,He.cameraQueryGeometry,He.scale,V,$,ce,ee(B.transform,He.tileID))})}var et=function(ft){for(var xt={},Mt={},_t=0,zt=ft;_t<zt.length;_t+=1){var Et=zt[_t],Yt=Et.queryResults,Vt=Et.wrappedTileID,Nt=Mt[Vt]=Mt[Vt]||{};for(var fn in Yt)for(var gn=Yt[fn],kn=Nt[fn]=Nt[fn]||{},Pn=xt[fn]=xt[fn]||[],Nn=0,nr=gn;Nn<nr.length;Nn+=1){var cr=nr[Nn];kn[cr.featureIndex]||(kn[cr.featureIndex]=!0,Pn.push(cr))}}return xt}(Ce);for(var lt in et)et[lt].forEach(function(ft){var xt=ft.feature,Mt=B.getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=Mt});return et}function J(B,G){var H=B.tileID,L=G.tileID;return H.overscaledZ-L.overscaledZ||H.canonical.y-L.canonical.y||H.wrap-L.wrap||H.canonical.x-L.canonical.x}var K=function(B,G){this.max=B,this.onRemove=G,this.reset()};K.prototype.reset=function(){for(var B in this.data)for(var G=0,H=this.data[B];G<H.length;G+=1){var L=H[G];L.timeout&&clearTimeout(L.timeout),this.onRemove(L.value)}return this.data={},this.order=[],this},K.prototype.add=function(B,G,H){var L=this,V=B.wrapped().key;this.data[V]===void 0&&(this.data[V]=[]);var $={value:G,timeout:void 0};if(H!==void 0&&($.timeout=setTimeout(function(){L.remove(B,$)},H)),this.data[V].push($),this.order.push(V),this.order.length>this.max){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},K.prototype.has=function(B){return B.wrapped().key in this.data},K.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},K.prototype._getAndRemoveByKey=function(B){var G=this.data[B].shift();return G.timeout&&clearTimeout(G.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),G.value},K.prototype.getByKey=function(B){var G=this.data[B];return G?G[0].value:null},K.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},K.prototype.remove=function(B,G){if(!this.has(B))return this;var H=B.wrapped().key,L=G===void 0?0:this.data[H].indexOf(G),V=this.data[H][L];return this.data[H].splice(L,1),V.timeout&&clearTimeout(V.timeout),this.data[H].length===0&&delete this.data[H],this.onRemove(V.value),this.order.splice(this.order.indexOf(H),1),this},K.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},K.prototype.filter=function(B){var G=[];for(var H in this.data)for(var L=0,V=this.data[H];L<V.length;L+=1){var $=V[L];B($.value)||G.push($)}for(var ne=0,ce=G;ne<ce.length;ne+=1){var xe=ce[ne];this.remove(xe.value.tileID,xe)}};var Y=function(B,G,H){this.context=B;var L=B.gl;this.buffer=L.createBuffer(),this.dynamicDraw=!!H,this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),L.bufferData(L.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};Y.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Y.prototype.updateData=function(B){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},Y.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ie={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},se=function(B,G,H,L){this.length=G.length,this.attributes=H,this.itemSize=G.bytesPerElement,this.dynamicDraw=L,this.context=B;var V=B.gl;this.buffer=V.createBuffer(),B.bindVertexBuffer.set(this.buffer),V.bufferData(V.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?V.DYNAMIC_DRAW:V.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};se.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},se.prototype.updateData=function(B){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,B.arrayBuffer)},se.prototype.enableAttributes=function(B,G){for(var H=0;H<this.attributes.length;H++){var L=this.attributes[H],V=G.attributes[L.name];V!==void 0&&B.enableVertexAttribArray(V)}},se.prototype.setVertexAttribPointers=function(B,G,H){for(var L=0;L<this.attributes.length;L++){var V=this.attributes[L],$=G.attributes[V.name];$!==void 0&&B.vertexAttribPointer($,V.components,B[ie[V.type]],!1,this.itemSize,V.offset+this.itemSize*(H||0))}},se.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(B){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var ue=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(H){var L=this.current;(H.r!==L.r||H.g!==L.g||H.b!==L.b||H.a!==L.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ae),ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},G}(ae),ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},G}(ae),de=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||H[3]!==L[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ae),pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},G}(ae),ge=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},G}(ae),ke=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(H){var L=this.current;(H.func!==L.func||H.ref!==L.ref||H.mask!==L.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},G}(ae),Ee=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},G}(ae),me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this.current=H,this.dirty=!1}},G}(ae),oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ae),re=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this.current=H,this.dirty=!1}},G}(ae),fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},G}(ae),Se=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.BLEND):L.disable(L.BLEND),this.current=H,this.dirty=!1}},G}(ae),be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ae),we=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(H){var L=this.current;(H.r!==L.r||H.g!==L.g||H.b!==L.b||H.a!==L.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ae),Me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},G}(ae),Ie=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this.current=H,this.dirty=!1}},G}(ae),Oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},G}(ae),he=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},G}(ae),_e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},G}(ae),Ae=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},G}(ae),De=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||H[3]!==L[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ae),Le=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},G}(ae),Be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindRenderbuffer(L.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(ae),Ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindTexture(L.TEXTURE_2D,H),this.current=H,this.dirty=!1}},G}(ae),Ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindBuffer(L.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},G}(ae),rt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){var L=this.gl;L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},G}(ae),it=function(B){function G(H){B.call(this,H),this.vao=H.extVertexArrayObject}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},G}(ae),dt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},G}(ae),mt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},G}(ae),ht=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},G}(ae),Qe=function(B){function G(H,L){B.call(this,H),this.context=H,this.parent=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(ae),Je=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},G}(Qe),wt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(Qe),Pt=function(B,G,H,L){this.context=B,this.width=G,this.height=H;var V=B.gl,$=this.framebuffer=V.createFramebuffer();this.colorAttachment=new Je(B,$),L&&(this.depthAttachment=new wt(B,$))};Pt.prototype.destroy=function(){var B=this.context.gl,G=this.colorAttachment.get();if(G&&B.deleteTexture(G),this.depthAttachment){var H=this.depthAttachment.get();H&&B.deleteRenderbuffer(H)}B.deleteFramebuffer(this.framebuffer)};var It=function(B,G,H){this.func=B,this.mask=G,this.range=H};It.ReadOnly=!1,It.ReadWrite=!0,It.disabled=new It(519,It.ReadOnly,[0,1]);var At=7680,qe=function(B,G,H,L,V,$){this.test=B,this.ref=G,this.mask=H,this.fail=L,this.depthFail=V,this.pass=$};qe.disabled=new qe({func:519,mask:0},0,0,At,At,At);var Ye=function(B,G,H){this.blendFunction=B,this.blendColor=G,this.mask=H};Ye.Replace=[1,0],Ye.disabled=new Ye(Ye.Replace,o.Color.transparent,[!1,!1,!1,!1]),Ye.unblended=new Ye(Ye.Replace,o.Color.transparent,[!0,!0,!0,!0]),Ye.alphaBlended=new Ye([1,771],o.Color.transparent,[!0,!0,!0,!0]);var Ne=function(B,G,H){this.enable=B,this.mode=G,this.frontFace=H};Ne.disabled=new Ne(!1,1029,2305),Ne.backCCW=new Ne(!0,1029,2305);var We=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ue(this),this.clearDepth=new ve(this),this.clearStencil=new ye(this),this.colorMask=new de(this),this.depthMask=new pe(this),this.stencilMask=new ge(this),this.stencilFunc=new ke(this),this.stencilOp=new Ee(this),this.stencilTest=new me(this),this.depthRange=new oe(this),this.depthTest=new re(this),this.depthFunc=new fe(this),this.blend=new Se(this),this.blendFunc=new be(this),this.blendColor=new we(this),this.blendEquation=new Me(this),this.cullFace=new Ie(this),this.cullFaceSide=new Oe(this),this.frontFace=new he(this),this.program=new _e(this),this.activeTexture=new Ae(this),this.viewport=new De(this),this.bindFramebuffer=new Le(this),this.bindRenderbuffer=new Be(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new Ze(this),this.bindElementBuffer=new rt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new it(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new mt(this),this.pixelStoreUnpackFlipY=new ht(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)};We.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},We.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},We.prototype.createIndexBuffer=function(B,G){return new Y(this,B,G)},We.prototype.createVertexBuffer=function(B,G,H){return new se(this,B,G,H)},We.prototype.createRenderbuffer=function(B,G,H){var L=this.gl,V=L.createRenderbuffer();return this.bindRenderbuffer.set(V),L.renderbufferStorage(L.RENDERBUFFER,B,G,H),this.bindRenderbuffer.set(null),V},We.prototype.createFramebuffer=function(B,G,H){return new Pt(this,B,G,H)},We.prototype.clear=function(B){var G=B.color,H=B.depth,L=this.gl,V=0;G&&(V|=L.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),H!==void 0&&(V|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),L.clear(V)},We.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},We.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},We.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},We.prototype.setColorMode=function(B){o.deepEqual(B.blendFunction,Ye.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},We.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var at=function(B){function G(H,L,V){var $=this;B.call(this),this.id=H,this.dispatcher=V,this.on("data",function(ne){ne.dataType==="source"&&ne.sourceDataType==="metadata"&&($._sourceLoaded=!0),$._sourceLoaded&&!$._paused&&ne.dataType==="source"&&ne.sourceDataType==="content"&&($.reload(),$.transform&&$.update($.transform))}),this.on("error",function(){$._sourceErrored=!0}),this._source=function(ne,ce,xe,Ce){var ze=new te[ce.type](ne,ce,xe,Ce);if(ze.id!==ne)throw new Error("Expected Source id to be "+ne+" instead of "+ze.id);return o.bindAll(["load","abort","unload","serialize","prepare"],ze),ze}(H,L,V,this),this._tiles={},this._cache=new K(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},G.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var L=this._tiles[H];if(L.state!=="loaded"&&L.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(H,L){return this._source.loadTile(H,L)},G.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},G.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(H){for(var L in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var V=this._tiles[L];V.upload(H),V.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return o.values(this._tiles).map(function(H){return H.tileID}).sort(tt).map(function(H){return H.key})},G.prototype.getRenderableIds=function(H){var L=this,V=[];for(var $ in this._tiles)this._isIdRenderable($,H)&&V.push(this._tiles[$]);return H?V.sort(function(ne,ce){var xe=ne.tileID,Ce=ce.tileID,ze=new o.Point(xe.canonical.x,xe.canonical.y)._rotate(L.transform.angle),Ue=new o.Point(Ce.canonical.x,Ce.canonical.y)._rotate(L.transform.angle);return xe.overscaledZ-Ce.overscaledZ||Ue.y-ze.y||Ue.x-ze.x}).map(function(ne){return ne.tileID.key}):V.map(function(ne){return ne.tileID}).sort(tt).map(function(ne){return ne.key})},G.prototype.hasRenderableParent=function(H){var L=this.findLoadedParent(H,0);return!!L&&this._isIdRenderable(L.tileID.key)},G.prototype._isIdRenderable=function(H,L){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&(L||!this._tiles[H].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)this._tiles[H].state!=="errored"&&this._reloadTile(H,"reloading")},G.prototype._reloadTile=function(H,L){var V=this._tiles[H];V&&(V.state!=="loading"&&(V.state=L),this._loadTile(V,this._tileLoaded.bind(this,V,H,L)))},G.prototype._tileLoaded=function(H,L,V,$){if($)return H.state="errored",void($.status!==404?this._source.fire(new o.ErrorEvent($,{tile:H})):this.update(this.transform));H.timeAdded=o.browser.now(),V==="expired"&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer(L,H),this.getSource().type==="raster-dem"&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},G.prototype._backfillDEM=function(H){for(var L=this.getRenderableIds(),V=0;V<L.length;V++){var $=L[V];if(H.neighboringTiles&&H.neighboringTiles[$]){var ne=this.getTileByID($);ce(H,ne),ce(ne,H)}}function ce(xe,Ce){xe.needsHillshadePrepare=!0;var ze=Ce.tileID.canonical.x-xe.tileID.canonical.x,Ue=Ce.tileID.canonical.y-xe.tileID.canonical.y,He=Math.pow(2,xe.tileID.canonical.z),et=Ce.tileID.key;ze===0&&Ue===0||Math.abs(Ue)>1||(Math.abs(ze)>1&&(Math.abs(ze+He)===1?ze+=He:Math.abs(ze-He)===1&&(ze-=He)),Ce.dem&&xe.dem&&(xe.dem.backfillBorder(Ce.dem,ze,Ue),xe.neighboringTiles&&xe.neighboringTiles[et]&&(xe.neighboringTiles[et].backfilled=!0)))}},G.prototype.getTile=function(H){return this.getTileByID(H.key)},G.prototype.getTileByID=function(H){return this._tiles[H]},G.prototype._retainLoadedChildren=function(H,L,V,$){for(var ne in this._tiles){var ce=this._tiles[ne];if(!($[ne]||!ce.hasData()||ce.tileID.overscaledZ<=L||ce.tileID.overscaledZ>V)){for(var xe=ce.tileID;ce&&ce.tileID.overscaledZ>L+1;){var Ce=ce.tileID.scaledTo(ce.tileID.overscaledZ-1);(ce=this._tiles[Ce.key])&&ce.hasData()&&(xe=Ce)}for(var ze=xe;ze.overscaledZ>L;)if(H[(ze=ze.scaledTo(ze.overscaledZ-1)).key]){$[xe.key]=xe;break}}}},G.prototype.findLoadedParent=function(H,L){if(H.key in this._loadedParentTiles){var V=this._loadedParentTiles[H.key];return V&&V.tileID.overscaledZ>=L?V:null}for(var $=H.overscaledZ-1;$>=L;$--){var ne=H.scaledTo($),ce=this._getLoadedTile(ne);if(ce)return ce}},G.prototype._getLoadedTile=function(H){var L=this._tiles[H.key];return L&&L.hasData()?L:this._cache.getByKey(H.wrapped().key)},G.prototype.updateCacheSize=function(H){var L=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),V=Math.floor(5*L),$=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,V):V;this._cache.setMaxSize($)},G.prototype.handleWrapJump=function(H){var L=(H-(this._prevLng===void 0?H:this._prevLng))/360,V=Math.round(L);if(this._prevLng=H,V){var $={};for(var ne in this._tiles){var ce=this._tiles[ne];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+V),$[ce.tileID.key]=ce}for(var xe in this._tiles=$,this._timers)clearTimeout(this._timers[xe]),delete this._timers[xe];for(var Ce in this._tiles){var ze=this._tiles[Ce];this._setTileReloadTimer(Ce,ze)}}},G.prototype.update=function(H){var L=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var V;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?V=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Nt){return new o.OverscaledTileID(Nt.canonical.z,Nt.wrap,Nt.canonical.z,Nt.canonical.x,Nt.canonical.y)}):(V=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(V=V.filter(function(Nt){return L._source.hasTile(Nt)}))):V=[];var $=H.coveringZoomLevel(this._source),ne=Math.max($-G.maxOverzooming,this._source.minzoom),ce=Math.max($+G.maxUnderzooming,this._source.minzoom),xe=this._updateRetainedTiles(V,$);if(Re(this._source.type)){for(var Ce={},ze={},Ue=0,He=Object.keys(xe);Ue<He.length;Ue+=1){var et=He[Ue],lt=xe[et],ft=this._tiles[et];if(ft&&!(ft.fadeEndTime&&ft.fadeEndTime<=o.browser.now())){var xt=this.findLoadedParent(lt,ne);xt&&(this._addTile(xt.tileID),Ce[xt.tileID.key]=xt.tileID),ze[et]=lt}}for(var Mt in this._retainLoadedChildren(ze,$,ce,xe),Ce)xe[Mt]||(this._coveredTiles[Mt]=!0,xe[Mt]=Ce[Mt])}for(var _t in xe)this._tiles[_t].clearFadeHold();for(var zt=0,Et=o.keysDifference(this._tiles,xe);zt<Et.length;zt+=1){var Yt=Et[zt],Vt=this._tiles[Yt];Vt.hasSymbolBuckets&&!Vt.holdingForFade()?Vt.setHoldDuration(this.map._fadeDuration):Vt.hasSymbolBuckets&&!Vt.symbolFadeFinished()||this._removeTile(Yt)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},G.prototype._updateRetainedTiles=function(H,L){for(var V={},$={},ne=Math.max(L-G.maxOverzooming,this._source.minzoom),ce=Math.max(L+G.maxUnderzooming,this._source.minzoom),xe={},Ce=0,ze=H;Ce<ze.length;Ce+=1){var Ue=ze[Ce],He=this._addTile(Ue);V[Ue.key]=Ue,He.hasData()||L<this._source.maxzoom&&(xe[Ue.key]=Ue)}this._retainLoadedChildren(xe,L,ce,V);for(var et=0,lt=H;et<lt.length;et+=1){var ft=lt[et],xt=this._tiles[ft.key];if(!xt.hasData()){if(L+1>this._source.maxzoom){var Mt=ft.children(this._source.maxzoom)[0],_t=this.getTile(Mt);if(_t&&_t.hasData()){V[Mt.key]=Mt;continue}}else{var zt=ft.children(this._source.maxzoom);if(V[zt[0].key]&&V[zt[1].key]&&V[zt[2].key]&&V[zt[3].key])continue}for(var Et=xt.wasRequested(),Yt=ft.overscaledZ-1;Yt>=ne;--Yt){var Vt=ft.scaledTo(Yt);if($[Vt.key]||($[Vt.key]=!0,!(xt=this.getTile(Vt))&&Et&&(xt=this._addTile(Vt)),xt&&(V[Vt.key]=Vt,Et=xt.wasRequested(),xt.hasData())))break}}}return V},G.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var L=[],V=void 0,$=this._tiles[H].tileID;$.overscaledZ>0;){if($.key in this._loadedParentTiles){V=this._loadedParentTiles[$.key];break}L.push($.key);var ne=$.scaledTo($.overscaledZ-1);if(V=this._getLoadedTile(ne))break;$=ne}for(var ce=0,xe=L;ce<xe.length;ce+=1){var Ce=xe[ce];this._loadedParentTiles[Ce]=V}}},G.prototype._addTile=function(H){var L=this._tiles[H.key];if(L)return L;(L=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,L),L.tileID=H,this._state.initializeTileState(L,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,L)));var V=!!L;return V||(L=new o.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile(L,this._tileLoaded.bind(this,L,H.key,L.state))),L?(L.uses++,this._tiles[H.key]=L,V||this._source.fire(new o.Event("dataloading",{tile:L,coord:L.tileID,dataType:"source"})),L):null},G.prototype._setTileReloadTimer=function(H,L){var V=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var $=L.getExpiryTimeout();$&&(this._timers[H]=setTimeout(function(){V._reloadTile(H,"expired"),delete V._timers[H]},$))},G.prototype._removeTile=function(H){var L=this._tiles[H];L&&(L.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),L.uses>0||(L.hasData()&&L.state!=="reloading"?this._cache.add(L.tileID,L,L.getExpiryTimeout()):(L.aborted=!0,this._abortTile(L),this._unloadTile(L))))},G.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},G.prototype.tilesIn=function(H,L,V){var $=this,ne=[],ce=this.transform;if(!ce)return ne;for(var xe=V?ce.getCameraQueryGeometry(H):H,Ce=H.map(function(Yt){return ce.pointCoordinate(Yt)}),ze=xe.map(function(Yt){return ce.pointCoordinate(Yt)}),Ue=this.getIds(),He=1/0,et=1/0,lt=-1/0,ft=-1/0,xt=0,Mt=ze;xt<Mt.length;xt+=1){var _t=Mt[xt];He=Math.min(He,_t.x),et=Math.min(et,_t.y),lt=Math.max(lt,_t.x),ft=Math.max(ft,_t.y)}for(var zt=function(Yt){var Vt=$._tiles[Ue[Yt]];if(!Vt.holdingForFade()){var Nt=Vt.tileID,fn=Math.pow(2,ce.zoom-Vt.tileID.overscaledZ),gn=L*Vt.queryPadding*o.EXTENT/Vt.tileSize/fn,kn=[Nt.getTilePoint(new o.MercatorCoordinate(He,et)),Nt.getTilePoint(new o.MercatorCoordinate(lt,ft))];if(kn[0].x-gn<o.EXTENT&&kn[0].y-gn<o.EXTENT&&kn[1].x+gn>=0&&kn[1].y+gn>=0){var Pn=Ce.map(function(nr){return Nt.getTilePoint(nr)}),Nn=ze.map(function(nr){return Nt.getTilePoint(nr)});ne.push({tile:Vt,tileID:Nt,queryGeometry:Pn,cameraQueryGeometry:Nn,scale:fn})}}},Et=0;Et<Ue.length;Et++)zt(Et);return ne},G.prototype.getVisibleCoordinates=function(H){for(var L=this,V=this.getRenderableIds(H).map(function(xe){return L._tiles[xe].tileID}),$=0,ne=V;$<ne.length;$+=1){var ce=ne[$];ce.posMatrix=this.transform.calculatePosMatrix(ce.toUnwrapped())}return V},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Re(this._source.type))for(var H in this._tiles){var L=this._tiles[H];if(L.fadeEndTime!==void 0&&L.fadeEndTime>=o.browser.now())return!0}return!1},G.prototype.setFeatureState=function(H,L,V){H=H||"_geojsonTileLayer",this._state.updateState(H,L,V)},G.prototype.removeFeatureState=function(H,L,V){H=H||"_geojsonTileLayer",this._state.removeFeatureState(H,L,V)},G.prototype.getFeatureState=function(H,L){return H=H||"_geojsonTileLayer",this._state.getState(H,L)},G.prototype.setDependencies=function(H,L,V){var $=this._tiles[H];$&&$.setDependencies(L,V)},G.prototype.reloadTilesForDependencies=function(H,L){for(var V in this._tiles)this._tiles[V].hasDependency(H,L)&&this._reloadTile(V,"reloading");this._cache.filter(function($){return!$.hasDependency(H,L)})},G}(o.Evented);function tt(B,G){var H=Math.abs(2*B.wrap)-+(B.wrap<0),L=Math.abs(2*G.wrap)-+(G.wrap<0);return B.overscaledZ-G.overscaledZ||L-H||G.canonical.y-B.canonical.y||G.canonical.x-B.canonical.x}function Re(B){return B==="raster"||B==="image"||B==="video"}function Fe(){return new o.window.Worker(ot.workerUrl)}at.maxOverzooming=10,at.maxUnderzooming=3;var nt="mapboxgl_preloaded_worker_pool",Ge=function(){this.active={}};Ge.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<Ge.workerCount;)this.workers.push(new Fe);return this.active[B]=!0,this.workers.slice()},Ge.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},Ge.prototype.isPreloaded=function(){return!!this.active[nt]},Ge.prototype.numActive=function(){return Object.keys(this.active).length};var ut,pt=Math.floor(o.browser.hardwareConcurrency/2);function gt(){return ut||(ut=new Ge),ut}function ct(B,G){var H={};for(var L in B)L!=="ref"&&(H[L]=B[L]);return o.refProperties.forEach(function(V){V in G&&(H[V]=G[V])}),H}function Tt(B){B=B.slice();for(var G=Object.create(null),H=0;H<B.length;H++)G[B[H].id]=B[H];for(var L=0;L<B.length;L++)"ref"in B[L]&&(B[L]=ct(B[L],G[B[L].ref]));return B}Ge.workerCount=Math.max(Math.min(pt,6),1);var vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kt(B,G,H){H.push({command:vt.addSource,args:[B,G[B]]})}function Lt(B,G,H){G.push({command:vt.removeSource,args:[B]}),H[B]=!0}function Ct(B,G,H,L){Lt(B,H,L),kt(B,G,H)}function Dt(B,G,H){var L;for(L in B[H])if(B[H].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[H][L],G[H][L]))return!1;for(L in G[H])if(G[H].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[H][L],G[H][L]))return!1;return!0}function Gt(B,G,H,L,V,$){var ne;for(ne in G=G||{},B=B||{})B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||H.push({command:$,args:[L,ne,G[ne],V]}));for(ne in G)G.hasOwnProperty(ne)&&!B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||H.push({command:$,args:[L,ne,G[ne],V]}))}function tn(B){return B.id}function jt(B,G){return B[G.id]=G,B}function Wt(B,G){if(!B)return[{command:vt.setStyle,args:[G]}];var H=[];try{if(!o.deepEqual(B.version,G.version))return[{command:vt.setStyle,args:[G]}];o.deepEqual(B.center,G.center)||H.push({command:vt.setCenter,args:[G.center]}),o.deepEqual(B.zoom,G.zoom)||H.push({command:vt.setZoom,args:[G.zoom]}),o.deepEqual(B.bearing,G.bearing)||H.push({command:vt.setBearing,args:[G.bearing]}),o.deepEqual(B.pitch,G.pitch)||H.push({command:vt.setPitch,args:[G.pitch]}),o.deepEqual(B.sprite,G.sprite)||H.push({command:vt.setSprite,args:[G.sprite]}),o.deepEqual(B.glyphs,G.glyphs)||H.push({command:vt.setGlyphs,args:[G.glyphs]}),o.deepEqual(B.transition,G.transition)||H.push({command:vt.setTransition,args:[G.transition]}),o.deepEqual(B.light,G.light)||H.push({command:vt.setLight,args:[G.light]});var L={},V=[];(function(ne,ce,xe,Ce){var ze;for(ze in ce=ce||{},ne=ne||{})ne.hasOwnProperty(ze)&&(ce.hasOwnProperty(ze)||Lt(ze,xe,Ce));for(ze in ce)ce.hasOwnProperty(ze)&&(ne.hasOwnProperty(ze)?o.deepEqual(ne[ze],ce[ze])||(ne[ze].type==="geojson"&&ce[ze].type==="geojson"&&Dt(ne,ce,ze)?xe.push({command:vt.setGeoJSONSourceData,args:[ze,ce[ze].data]}):Ct(ze,ce,xe,Ce)):kt(ze,ce,xe))})(B.sources,G.sources,V,L);var $=[];B.layers&&B.layers.forEach(function(ne){L[ne.source]?H.push({command:vt.removeLayer,args:[ne.id]}):$.push(ne)}),H=H.concat(V),function(ne,ce,xe){ce=ce||[];var Ce,ze,Ue,He,et,lt,ft,xt=(ne=ne||[]).map(tn),Mt=ce.map(tn),_t=ne.reduce(jt,{}),zt=ce.reduce(jt,{}),Et=xt.slice(),Yt=Object.create(null);for(Ce=0,ze=0;Ce<xt.length;Ce++)Ue=xt[Ce],zt.hasOwnProperty(Ue)?ze++:(xe.push({command:vt.removeLayer,args:[Ue]}),Et.splice(Et.indexOf(Ue,ze),1));for(Ce=0,ze=0;Ce<Mt.length;Ce++)Ue=Mt[Mt.length-1-Ce],Et[Et.length-1-Ce]!==Ue&&(_t.hasOwnProperty(Ue)?(xe.push({command:vt.removeLayer,args:[Ue]}),Et.splice(Et.lastIndexOf(Ue,Et.length-ze),1)):ze++,lt=Et[Et.length-Ce],xe.push({command:vt.addLayer,args:[zt[Ue],lt]}),Et.splice(Et.length-Ce,0,Ue),Yt[Ue]=!0);for(Ce=0;Ce<Mt.length;Ce++)if(He=_t[Ue=Mt[Ce]],et=zt[Ue],!Yt[Ue]&&!o.deepEqual(He,et))if(o.deepEqual(He.source,et.source)&&o.deepEqual(He["source-layer"],et["source-layer"])&&o.deepEqual(He.type,et.type)){for(ft in Gt(He.layout,et.layout,xe,Ue,null,vt.setLayoutProperty),Gt(He.paint,et.paint,xe,Ue,null,vt.setPaintProperty),o.deepEqual(He.filter,et.filter)||xe.push({command:vt.setFilter,args:[Ue,et.filter]}),o.deepEqual(He.minzoom,et.minzoom)&&o.deepEqual(He.maxzoom,et.maxzoom)||xe.push({command:vt.setLayerZoomRange,args:[Ue,et.minzoom,et.maxzoom]}),He)He.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Gt(He[ft],et[ft],xe,Ue,ft.slice(6),vt.setPaintProperty):o.deepEqual(He[ft],et[ft])||xe.push({command:vt.setLayerProperty,args:[Ue,ft,et[ft]]}));for(ft in et)et.hasOwnProperty(ft)&&!He.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Gt(He[ft],et[ft],xe,Ue,ft.slice(6),vt.setPaintProperty):o.deepEqual(He[ft],et[ft])||xe.push({command:vt.setLayerProperty,args:[Ue,ft,et[ft]]}))}else xe.push({command:vt.removeLayer,args:[Ue]}),lt=Et[Et.lastIndexOf(Ue)+1],xe.push({command:vt.addLayer,args:[et,lt]})}($,G.layers,H)}catch(ne){console.warn("Unable to compute style diff:",ne),H=[{command:vt.setStyle,args:[G]}]}return H}var Ft=function(B,G){this.reset(B,G)};Ft.prototype.reset=function(B,G){this.points=B||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ft.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=o.clamp(B,0,1);for(var G=1,H=this._distances[G],L=B*this.paddedLength+this.padding;H<L&&G<this._distances.length;)H=this._distances[++G];var V=G-1,$=this._distances[V],ne=H-$,ce=ne>0?(L-$)/ne:0;return this.points[V].mult(1-ce).add(this.points[G].mult(ce))};var Ln=function(B,G,H){var L=this.boxCells=[],V=this.circleCells=[];this.xCellCount=Math.ceil(B/H),this.yCellCount=Math.ceil(G/H);for(var $=0;$<this.xCellCount*this.yCellCount;$++)L.push([]),V.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=G,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function bn(B,G,H,L,V){var $=o.create();return G?(o.scale($,$,[1/V,1/V,1]),H||o.rotateZ($,$,L.angle)):o.multiply($,L.labelPlaneMatrix,B),$}function hn(B,G,H,L,V){if(G){var $=o.clone(B);return o.scale($,$,[V,V,1]),H||o.rotateZ($,$,-L.angle),$}return L.glCoordMatrix}function Kt(B,G){var H=[B.x,B.y,0,1];Xn(H,H,G);var L=H[3];return{point:new o.Point(H[0]/L,H[1]/L),signedDistanceFromCamera:L}}function sn(B,G){return .5+B/G*.5}function Qt(B,G){var H=B[0]/B[3],L=B[1]/B[3];return H>=-G[0]&&H<=G[0]&&L>=-G[1]&&L<=G[1]}function cn(B,G,H,L,V,$,ne,ce){var xe=L?B.textSizeData:B.iconSizeData,Ce=o.evaluateSizeForZoom(xe,H.transform.zoom),ze=[256/H.width*2+1,256/H.height*2+1],Ue=L?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Ue.clear();for(var He=B.lineVertexArray,et=L?B.text.placedSymbolArray:B.icon.placedSymbolArray,lt=H.transform.width/H.transform.height,ft=!1,xt=0;xt<et.length;xt++){var Mt=et.get(xt);if(Mt.hidden||Mt.writingMode===o.WritingMode.vertical&&!ft)In(Mt.numGlyphs,Ue);else{ft=!1;var _t=[Mt.anchorX,Mt.anchorY,0,1];if(o.transformMat4(_t,_t,G),Qt(_t,ze)){var zt=_t[3],Et=sn(H.transform.cameraToCenterDistance,zt),Yt=o.evaluateSizeForFeature(xe,Ce,Mt),Vt=ne?Yt/Et:Yt*Et,Nt=new o.Point(Mt.anchorX,Mt.anchorY),fn=Kt(Nt,V).point,gn={},kn=An(Mt,Vt,!1,ce,G,V,$,B.glyphOffsetArray,He,Ue,fn,Nt,gn,lt);ft=kn.useVertical,(kn.notEnoughRoom||ft||kn.needsFlipping&&An(Mt,Vt,!0,ce,G,V,$,B.glyphOffsetArray,He,Ue,fn,Nt,gn,lt).notEnoughRoom)&&In(Mt.numGlyphs,Ue)}else In(Mt.numGlyphs,Ue)}}L?B.text.dynamicLayoutVertexBuffer.updateData(Ue):B.icon.dynamicLayoutVertexBuffer.updateData(Ue)}function vn(B,G,H,L,V,$,ne,ce,xe,Ce,ze){var Ue=ce.glyphStartIndex+ce.numGlyphs,He=ce.lineStartIndex,et=ce.lineStartIndex+ce.lineLength,lt=G.getoffsetX(ce.glyphStartIndex),ft=G.getoffsetX(Ue-1),xt=Tn(B*lt,H,L,V,$,ne,ce.segment,He,et,xe,Ce,ze);if(!xt)return null;var Mt=Tn(B*ft,H,L,V,$,ne,ce.segment,He,et,xe,Ce,ze);return Mt?{first:xt,last:Mt}:null}function xn(B,G,H,L){return B===o.WritingMode.horizontal&&Math.abs(H.y-G.y)>Math.abs(H.x-G.x)*L?{useVertical:!0}:(B===o.WritingMode.vertical?G.y<H.y:G.x>H.x)?{needsFlipping:!0}:null}function An(B,G,H,L,V,$,ne,ce,xe,Ce,ze,Ue,He,et){var lt,ft=G/24,xt=B.lineOffsetX*ft,Mt=B.lineOffsetY*ft;if(B.numGlyphs>1){var _t=B.glyphStartIndex+B.numGlyphs,zt=B.lineStartIndex,Et=B.lineStartIndex+B.lineLength,Yt=vn(ft,ce,xt,Mt,H,ze,Ue,B,xe,$,He);if(!Yt)return{notEnoughRoom:!0};var Vt=Kt(Yt.first.point,ne).point,Nt=Kt(Yt.last.point,ne).point;if(L&&!H){var fn=xn(B.writingMode,Vt,Nt,et);if(fn)return fn}lt=[Yt.first];for(var gn=B.glyphStartIndex+1;gn<_t-1;gn++)lt.push(Tn(ft*ce.getoffsetX(gn),xt,Mt,H,ze,Ue,B.segment,zt,Et,xe,$,He));lt.push(Yt.last)}else{if(L&&!H){var kn=Kt(Ue,V).point,Pn=B.lineStartIndex+B.segment+1,Nn=new o.Point(xe.getx(Pn),xe.gety(Pn)),nr=Kt(Nn,V),cr=nr.signedDistanceFromCamera>0?nr.point:Sn(Ue,Nn,kn,1,V),qn=xn(B.writingMode,kn,cr,et);if(qn)return qn}var sr=Tn(ft*ce.getoffsetX(B.glyphStartIndex),xt,Mt,H,ze,Ue,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,xe,$,He);if(!sr)return{notEnoughRoom:!0};lt=[sr]}for(var xr=0,Er=lt;xr<Er.length;xr+=1){var Qn=Er[xr];o.addDynamicAttributes(Ce,Qn.point,Qn.angle)}return{}}function Sn(B,G,H,L,V){var $=Kt(B.add(B.sub(G)._unit()),V).point,ne=H.sub($);return H.add(ne._mult(L/ne.mag()))}function Tn(B,G,H,L,V,$,ne,ce,xe,Ce,ze,Ue){var He=L?B-G:B+G,et=He>0?1:-1,lt=0;L&&(et*=-1,lt=Math.PI),et<0&&(lt+=Math.PI);for(var ft=et>0?ce+ne:ce+ne+1,xt=V,Mt=V,_t=0,zt=0,Et=Math.abs(He),Yt=[];_t+zt<=Et;){if((ft+=et)<ce||ft>=xe)return null;if(Mt=xt,Yt.push(xt),(xt=Ue[ft])===void 0){var Vt=new o.Point(Ce.getx(ft),Ce.gety(ft)),Nt=Kt(Vt,ze);if(Nt.signedDistanceFromCamera>0)xt=Ue[ft]=Nt.point;else{var fn=ft-et;xt=Sn(_t===0?$:new o.Point(Ce.getx(fn),Ce.gety(fn)),Vt,Mt,Et-_t+1,ze)}}_t+=zt,zt=Mt.dist(xt)}var gn=(Et-_t)/zt,kn=xt.sub(Mt),Pn=kn.mult(gn)._add(Mt);Pn._add(kn._unit()._perp()._mult(H*et));var Nn=lt+Math.atan2(xt.y-Mt.y,xt.x-Mt.x);return Yt.push(Pn),{point:Pn,angle:Nn,path:Yt}}Ln.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ln.prototype.insert=function(B,G,H,L,V){this._forEachCell(G,H,L,V,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push(G),this.bboxes.push(H),this.bboxes.push(L),this.bboxes.push(V)},Ln.prototype.insertCircle=function(B,G,H,L){this._forEachCell(G-L,H-L,G+L,H+L,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push(G),this.circles.push(H),this.circles.push(L)},Ln.prototype._insertBoxCell=function(B,G,H,L,V,$){this.boxCells[V].push($)},Ln.prototype._insertCircleCell=function(B,G,H,L,V,$){this.circleCells[V].push($)},Ln.prototype._query=function(B,G,H,L,V,$){if(H<0||B>this.width||L<0||G>this.height)return!V&&[];var ne=[];if(B<=0&&G<=0&&this.width<=H&&this.height<=L){if(V)return!0;for(var ce=0;ce<this.boxKeys.length;ce++)ne.push({key:this.boxKeys[ce],x1:this.bboxes[4*ce],y1:this.bboxes[4*ce+1],x2:this.bboxes[4*ce+2],y2:this.bboxes[4*ce+3]});for(var xe=0;xe<this.circleKeys.length;xe++){var Ce=this.circles[3*xe],ze=this.circles[3*xe+1],Ue=this.circles[3*xe+2];ne.push({key:this.circleKeys[xe],x1:Ce-Ue,y1:ze-Ue,x2:Ce+Ue,y2:ze+Ue})}return $?ne.filter($):ne}var He={hitTest:V,seenUids:{box:{},circle:{}}};return this._forEachCell(B,G,H,L,this._queryCell,ne,He,$),V?ne.length>0:ne},Ln.prototype._queryCircle=function(B,G,H,L,V){var $=B-H,ne=B+H,ce=G-H,xe=G+H;if(ne<0||$>this.width||xe<0||ce>this.height)return!L&&[];var Ce=[],ze={hitTest:L,circle:{x:B,y:G,radius:H},seenUids:{box:{},circle:{}}};return this._forEachCell($,ce,ne,xe,this._queryCellCircle,Ce,ze,V),L?Ce.length>0:Ce},Ln.prototype.query=function(B,G,H,L,V){return this._query(B,G,H,L,!1,V)},Ln.prototype.hitTest=function(B,G,H,L,V){return this._query(B,G,H,L,!0,V)},Ln.prototype.hitTestCircle=function(B,G,H,L){return this._queryCircle(B,G,H,!0,L)},Ln.prototype._queryCell=function(B,G,H,L,V,$,ne,ce){var xe=ne.seenUids,Ce=this.boxCells[V];if(Ce!==null)for(var ze=this.bboxes,Ue=0,He=Ce;Ue<He.length;Ue+=1){var et=He[Ue];if(!xe.box[et]){xe.box[et]=!0;var lt=4*et;if(B<=ze[lt+2]&&G<=ze[lt+3]&&H>=ze[lt+0]&&L>=ze[lt+1]&&(!ce||ce(this.boxKeys[et]))){if(ne.hitTest)return $.push(!0),!0;$.push({key:this.boxKeys[et],x1:ze[lt],y1:ze[lt+1],x2:ze[lt+2],y2:ze[lt+3]})}}}var ft=this.circleCells[V];if(ft!==null)for(var xt=this.circles,Mt=0,_t=ft;Mt<_t.length;Mt+=1){var zt=_t[Mt];if(!xe.circle[zt]){xe.circle[zt]=!0;var Et=3*zt;if(this._circleAndRectCollide(xt[Et],xt[Et+1],xt[Et+2],B,G,H,L)&&(!ce||ce(this.circleKeys[zt]))){if(ne.hitTest)return $.push(!0),!0;var Yt=xt[Et],Vt=xt[Et+1],Nt=xt[Et+2];$.push({key:this.circleKeys[zt],x1:Yt-Nt,y1:Vt-Nt,x2:Yt+Nt,y2:Vt+Nt})}}}},Ln.prototype._queryCellCircle=function(B,G,H,L,V,$,ne,ce){var xe=ne.circle,Ce=ne.seenUids,ze=this.boxCells[V];if(ze!==null)for(var Ue=this.bboxes,He=0,et=ze;He<et.length;He+=1){var lt=et[He];if(!Ce.box[lt]){Ce.box[lt]=!0;var ft=4*lt;if(this._circleAndRectCollide(xe.x,xe.y,xe.radius,Ue[ft+0],Ue[ft+1],Ue[ft+2],Ue[ft+3])&&(!ce||ce(this.boxKeys[lt])))return $.push(!0),!0}}var xt=this.circleCells[V];if(xt!==null)for(var Mt=this.circles,_t=0,zt=xt;_t<zt.length;_t+=1){var Et=zt[_t];if(!Ce.circle[Et]){Ce.circle[Et]=!0;var Yt=3*Et;if(this._circlesCollide(Mt[Yt],Mt[Yt+1],Mt[Yt+2],xe.x,xe.y,xe.radius)&&(!ce||ce(this.circleKeys[Et])))return $.push(!0),!0}}},Ln.prototype._forEachCell=function(B,G,H,L,V,$,ne,ce){for(var xe=this._convertToXCellCoord(B),Ce=this._convertToYCellCoord(G),ze=this._convertToXCellCoord(H),Ue=this._convertToYCellCoord(L),He=xe;He<=ze;He++)for(var et=Ce;et<=Ue;et++){var lt=this.xCellCount*et+He;if(V.call(this,B,G,H,L,lt,$,ne,ce))return}},Ln.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},Ln.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},Ln.prototype._circlesCollide=function(B,G,H,L,V,$){var ne=L-B,ce=V-G,xe=H+$;return xe*xe>ne*ne+ce*ce},Ln.prototype._circleAndRectCollide=function(B,G,H,L,V,$,ne){var ce=($-L)/2,xe=Math.abs(B-(L+ce));if(xe>ce+H)return!1;var Ce=(ne-V)/2,ze=Math.abs(G-(V+Ce));if(ze>Ce+H)return!1;if(xe<=ce||ze<=Ce)return!0;var Ue=xe-ce,He=ze-Ce;return Ue*Ue+He*He<=H*H};var Rn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function In(B,G){for(var H=0;H<B;H++){var L=G.length;G.resize(L+4),G.float32.set(Rn,3*L)}}function Xn(B,G,H){var L=G[0],V=G[1];return B[0]=H[0]*L+H[4]*V+H[12],B[1]=H[1]*L+H[5]*V+H[13],B[3]=H[3]*L+H[7]*V+H[15],B}var Vn=100,er=function(B,G,H){G===void 0&&(G=new Ln(B.width+200,B.height+200,25)),H===void 0&&(H=new Ln(B.width+200,B.height+200,25)),this.transform=B,this.grid=G,this.ignoredGrid=H,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+Vn,this.screenBottomBoundary=B.height+Vn,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function Wn(B,G,H){return G*(o.EXTENT/(B.tileSize*Math.pow(2,H-B.tileID.overscaledZ)))}er.prototype.placeCollisionBox=function(B,G,H,L,V){var $=this.projectAndGetPerspectiveRatio(L,B.anchorPointX,B.anchorPointY),ne=H*$.perspectiveRatio,ce=B.x1*ne+$.point.x,xe=B.y1*ne+$.point.y,Ce=B.x2*ne+$.point.x,ze=B.y2*ne+$.point.y;return!this.isInsideGrid(ce,xe,Ce,ze)||!G&&this.grid.hitTest(ce,xe,Ce,ze,V)?{box:[],offscreen:!1}:{box:[ce,xe,Ce,ze],offscreen:this.isOffscreen(ce,xe,Ce,ze)}},er.prototype.placeCollisionCircles=function(B,G,H,L,V,$,ne,ce,xe,Ce,ze,Ue,He){var et=[],lt=new o.Point(G.anchorX,G.anchorY),ft=Kt(lt,$),xt=sn(this.transform.cameraToCenterDistance,ft.signedDistanceFromCamera),Mt=(Ce?V/xt:V*xt)/o.ONE_EM,_t=Kt(lt,ne).point,zt=vn(Mt,L,G.lineOffsetX*Mt,G.lineOffsetY*Mt,!1,_t,lt,G,H,ne,{}),Et=!1,Yt=!1,Vt=!0;if(zt){for(var Nt=.5*Ue*xt+He,fn=new o.Point(-100,-100),gn=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),kn=new Ft,Pn=zt.first,Nn=zt.last,nr=[],cr=Pn.path.length-1;cr>=1;cr--)nr.push(Pn.path[cr]);for(var qn=1;qn<Nn.path.length;qn++)nr.push(Nn.path[qn]);var sr=2.5*Nt;if(ce){var xr=nr.map(function(Xr){return Kt(Xr,ce)});nr=xr.some(function(Xr){return Xr.signedDistanceFromCamera<=0})?[]:xr.map(function(Xr){return Xr.point})}var Er=[];if(nr.length>0){for(var Qn=nr[0].clone(),or=nr[0].clone(),wr=1;wr<nr.length;wr++)Qn.x=Math.min(Qn.x,nr[wr].x),Qn.y=Math.min(Qn.y,nr[wr].y),or.x=Math.max(or.x,nr[wr].x),or.y=Math.max(or.y,nr[wr].y);Er=Qn.x>=fn.x&&or.x<=gn.x&&Qn.y>=fn.y&&or.y<=gn.y?[nr]:or.x<fn.x||Qn.x>gn.x||or.y<fn.y||Qn.y>gn.y?[]:o.clipLine([nr],fn.x,fn.y,gn.x,gn.y)}for(var ur=0,Ar=Er;ur<Ar.length;ur+=1){var Pr=Ar[ur];kn.reset(Pr,.25*Nt);var Nr;Nr=kn.length<=.5*Nt?1:Math.ceil(kn.paddedLength/sr)+1;for(var jr=0;jr<Nr;jr++){var qr=jr/Math.max(Nr-1,1),Yr=kn.lerp(qr),gi=Yr.x+Vn,Li=Yr.y+Vn;et.push(gi,Li,Nt,0);var la=gi-Nt,Gi=Li-Nt,ta=gi+Nt,xi=Li+Nt;if(Vt=Vt&&this.isOffscreen(la,Gi,ta,xi),Yt=Yt||this.isInsideGrid(la,Gi,ta,xi),!B&&this.grid.hitTestCircle(gi,Li,Nt,ze)&&(Et=!0,!xe))return{circles:[],offscreen:!1,collisionDetected:Et}}}}return{circles:!xe&&Et||!Yt?[]:et,offscreen:Vt,collisionDetected:Et}},er.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],H=1/0,L=1/0,V=-1/0,$=-1/0,ne=0,ce=B;ne<ce.length;ne+=1){var xe=ce[ne],Ce=new o.Point(xe.x+Vn,xe.y+Vn);H=Math.min(H,Ce.x),L=Math.min(L,Ce.y),V=Math.max(V,Ce.x),$=Math.max($,Ce.y),G.push(Ce)}for(var ze={},Ue={},He=0,et=this.grid.query(H,L,V,$).concat(this.ignoredGrid.query(H,L,V,$));He<et.length;He+=1){var lt=et[He],ft=lt.key;if(ze[ft.bucketInstanceId]===void 0&&(ze[ft.bucketInstanceId]={}),!ze[ft.bucketInstanceId][ft.featureIndex]){var xt=[new o.Point(lt.x1,lt.y1),new o.Point(lt.x2,lt.y1),new o.Point(lt.x2,lt.y2),new o.Point(lt.x1,lt.y2)];o.polygonIntersectsPolygon(G,xt)&&(ze[ft.bucketInstanceId][ft.featureIndex]=!0,Ue[ft.bucketInstanceId]===void 0&&(Ue[ft.bucketInstanceId]=[]),Ue[ft.bucketInstanceId].push(ft.featureIndex))}}return Ue},er.prototype.insertCollisionBox=function(B,G,H,L,V){var $={bucketInstanceId:H,featureIndex:L,collisionGroupID:V};(G?this.ignoredGrid:this.grid).insert($,B[0],B[1],B[2],B[3])},er.prototype.insertCollisionCircles=function(B,G,H,L,V){for(var $=G?this.ignoredGrid:this.grid,ne={bucketInstanceId:H,featureIndex:L,collisionGroupID:V},ce=0;ce<B.length;ce+=4)$.insertCircle(ne,B[ce],B[ce+1],B[ce+2])},er.prototype.projectAndGetPerspectiveRatio=function(B,G,H){var L=[G,H,0,1];return Xn(L,L,B),{point:new o.Point((L[0]/L[3]+1)/2*this.transform.width+Vn,(-L[1]/L[3]+1)/2*this.transform.height+Vn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/L[3]*.5}},er.prototype.isOffscreen=function(B,G,H,L){return H<Vn||B>=this.screenRightBoundary||L<Vn||G>this.screenBottomBoundary},er.prototype.isInsideGrid=function(B,G,H,L){return H>=0&&B<this.gridRightBoundary&&L>=0&&G<this.gridBottomBoundary},er.prototype.getViewportMatrix=function(){var B=o.identity([]);return o.translate(B,B,[-100,-100,0]),B};var fr=function(B,G,H,L){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?G:-G))):L&&H?1:0,this.placed=H};fr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Jt=function(B,G,H,L,V){this.text=new fr(B?B.text:null,G,H,V),this.icon=new fr(B?B.icon:null,G,L,V)};Jt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var en=function(B,G,H){this.text=B,this.icon=G,this.skipFade=H},Mn=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},pn=function(B,G,H,L,V){this.bucketInstanceId=B,this.featureIndex=G,this.sourceLayerIndex=H,this.bucketIndex=L,this.tileID=V},Cn=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function jn(B,G,H,L,V){var $=o.getAnchorAlignment(B),ne=-($.horizontalAlign-.5)*G,ce=-($.verticalAlign-.5)*H,xe=o.evaluateVariableOffset(B,L);return new o.Point(ne+xe[0]*V,ce+xe[1]*V)}function Bn(B,G,H,L,V,$){var ne=B.x1,ce=B.x2,xe=B.y1,Ce=B.y2,ze=B.anchorPointX,Ue=B.anchorPointY,He=new o.Point(G,H);return L&&He._rotate(V?$:-$),{x1:ne+He.x,y1:xe+He.y,x2:ce+He.x,y2:Ce+He.y,anchorPointX:ze,anchorPointY:Ue}}Cn.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var G=++this.maxGroupID;this.collisionGroups[B]={ID:G,predicate:function(H){return H.collisionGroupID===G}}}return this.collisionGroups[B]};var Yn=function(B,G,H,L){this.transform=B.clone(),this.collisionIndex=new er(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Cn(H),this.collisionCircleArrays={},this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}};function dr(B,G,H,L,V){B.emplaceBack(G?1:0,H?1:0,L||0,V||0),B.emplaceBack(G?1:0,H?1:0,L||0,V||0),B.emplaceBack(G?1:0,H?1:0,L||0,V||0),B.emplaceBack(G?1:0,H?1:0,L||0,V||0)}Yn.prototype.getBucketParts=function(B,G,H,L){var V=H.getBucket(G),$=H.latestFeatureIndex;if(V&&$&&G.id===V.layerIds[0]){var ne=H.collisionBoxArray,ce=V.layers[0].layout,xe=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),Ce=H.tileSize/o.EXTENT,ze=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),Ue=ce.get("text-pitch-alignment")==="map",He=ce.get("text-rotation-alignment")==="map",et=Wn(H,1,this.transform.zoom),lt=bn(ze,Ue,He,this.transform,et),ft=null;if(Ue){var xt=hn(ze,Ue,He,this.transform,et);ft=o.multiply([],this.transform.labelPlaneMatrix,xt)}this.retainedQueryData[V.bucketInstanceId]=new pn(V.bucketInstanceId,$,V.sourceLayerIndex,V.index,H.tileID);var Mt={bucket:V,layout:ce,posMatrix:ze,textLabelPlaneMatrix:lt,labelToScreenMatrix:ft,scale:xe,textPixelRatio:Ce,holdingForFade:H.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(V.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(V.sourceID)};if(L)for(var _t=0,zt=V.sortKeyRanges;_t<zt.length;_t+=1){var Et=zt[_t],Yt=Et.sortKey,Vt=Et.symbolInstanceStart,Nt=Et.symbolInstanceEnd;B.push({sortKey:Yt,symbolInstanceStart:Vt,symbolInstanceEnd:Nt,parameters:Mt})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:V.symbolInstances.length,parameters:Mt})}},Yn.prototype.attemptAnchorPlacement=function(B,G,H,L,V,$,ne,ce,xe,Ce,ze,Ue,He,et,lt){var ft,xt=[Ue.textOffset0,Ue.textOffset1],Mt=jn(B,H,L,xt,V),_t=this.collisionIndex.placeCollisionBox(Bn(G,Mt.x,Mt.y,$,ne,this.transform.angle),ze,ce,xe,Ce.predicate);if(!lt||this.collisionIndex.placeCollisionBox(Bn(lt,Mt.x,Mt.y,$,ne,this.transform.angle),ze,ce,xe,Ce.predicate).box.length!==0)return _t.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(ft=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),this.variableOffsets[Ue.crossTileID]={textOffset:xt,width:H,height:L,anchor:B,textBoxScale:V,prevAnchor:ft},this.markUsedJustification(He,B,Ue,et),He.allowVerticalPlacement&&(this.markUsedOrientation(He,et,Ue),this.placedOrientations[Ue.crossTileID]=et),{shift:Mt,placedGlyphBoxes:_t}):void 0},Yn.prototype.placeLayerBucketPart=function(B,G,H){var L=this,V=B.parameters,$=V.bucket,ne=V.layout,ce=V.posMatrix,xe=V.textLabelPlaneMatrix,Ce=V.labelToScreenMatrix,ze=V.textPixelRatio,Ue=V.holdingForFade,He=V.collisionBoxArray,et=V.partiallyEvaluatedTextSize,lt=V.collisionGroup,ft=ne.get("text-optional"),xt=ne.get("icon-optional"),Mt=ne.get("text-allow-overlap"),_t=ne.get("icon-allow-overlap"),zt=ne.get("text-rotation-alignment")==="map",Et=ne.get("text-pitch-alignment")==="map",Yt=ne.get("icon-text-fit")!=="none",Vt=ne.get("symbol-z-order")==="viewport-y",Nt=Mt&&(_t||!$.hasIconData()||xt),fn=_t&&(Mt||!$.hasTextData()||ft);!$.collisionArrays&&He&&$.deserializeCollisionBoxes(He);var gn=function(qn,sr){if(!G[qn.crossTileID])if(Ue)L.placements[qn.crossTileID]=new en(!1,!1,!1);else{var xr,Er=!1,Qn=!1,or=!0,wr=null,ur={box:null,offscreen:null},Ar={box:null,offscreen:null},Pr=null,Nr=null,jr=0,qr=0,Yr=0;sr.textFeatureIndex?jr=sr.textFeatureIndex:qn.useRuntimeCollisionCircles&&(jr=qn.featureIndex),sr.verticalTextFeatureIndex&&(qr=sr.verticalTextFeatureIndex);var gi=sr.textBox;if(gi){var Li=function(Mi){var Ca=o.WritingMode.horizontal;if($.allowVerticalPlacement&&!Mi&&L.prevPlacement){var Ji=L.prevPlacement.placedOrientations[qn.crossTileID];Ji&&(L.placedOrientations[qn.crossTileID]=Ji,Ca=Ji,L.markUsedOrientation($,Ca,qn))}return Ca},la=function(Mi,Ca){if($.allowVerticalPlacement&&qn.numVerticalGlyphVertices>0&&sr.verticalTextBox)for(var Ji=0,Gl=$.writingModes;Ji<Gl.length&&(Gl[Ji]===o.WritingMode.vertical?(ur=Ca(),Ar=ur):ur=Mi(),!(ur&&ur.box&&ur.box.length));Ji+=1);else ur=Mi()};if(ne.get("text-variable-anchor")){var Gi=ne.get("text-variable-anchor");if(L.prevPlacement&&L.prevPlacement.variableOffsets[qn.crossTileID]){var ta=L.prevPlacement.variableOffsets[qn.crossTileID];Gi.indexOf(ta.anchor)>0&&(Gi=Gi.filter(function(Mi){return Mi!==ta.anchor})).unshift(ta.anchor)}var xi=function(Mi,Ca,Ji){for(var Gl=Mi.x2-Mi.x1,Tf=Mi.y2-Mi.y1,xu=qn.textBoxScale,kf=Yt&&!_t?Ca:null,Il={box:[],offscreen:!1},Af=Mt?2*Gi.length:Gi.length,Ol=0;Ol<Af;++Ol){var bu=Gi[Ol%Gi.length],_u=Ol>=Gi.length,ol=L.attemptAnchorPlacement(bu,Mi,Gl,Tf,xu,zt,Et,ze,ce,lt,_u,qn,$,Ji,kf);if(ol&&(Il=ol.placedGlyphBoxes)&&Il.box&&Il.box.length){Er=!0,wr=ol.shift;break}}return Il};la(function(){return xi(gi,sr.iconBox,o.WritingMode.horizontal)},function(){var Mi=sr.verticalTextBox,Ca=ur&&ur.box&&ur.box.length;return $.allowVerticalPlacement&&!Ca&&qn.numVerticalGlyphVertices>0&&Mi?xi(Mi,sr.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),ur&&(Er=ur.box,or=ur.offscreen);var Xr=Li(ur&&ur.box);if(!Er&&L.prevPlacement){var ki=L.prevPlacement.variableOffsets[qn.crossTileID];ki&&(L.variableOffsets[qn.crossTileID]=ki,L.markUsedJustification($,ki.anchor,qn,Xr))}}else{var li=function(Mi,Ca){var Ji=L.collisionIndex.placeCollisionBox(Mi,Mt,ze,ce,lt.predicate);return Ji&&Ji.box&&Ji.box.length&&(L.markUsedOrientation($,Ca,qn),L.placedOrientations[qn.crossTileID]=Ca),Ji};la(function(){return li(gi,o.WritingMode.horizontal)},function(){var Mi=sr.verticalTextBox;return $.allowVerticalPlacement&&qn.numVerticalGlyphVertices>0&&Mi?li(Mi,o.WritingMode.vertical):{box:null,offscreen:null}}),Li(ur&&ur.box&&ur.box.length)}}if(Er=(xr=ur)&&xr.box&&xr.box.length>0,or=xr&&xr.offscreen,qn.useRuntimeCollisionCircles){var $r=$.text.placedSymbolArray.get(qn.centerJustifiedTextSymbolIndex),Ai=o.evaluateSizeForFeature($.textSizeData,et,$r),Ci=ne.get("text-padding"),Ni=qn.collisionCircleDiameter;Pr=L.collisionIndex.placeCollisionCircles(Mt,$r,$.lineVertexArray,$.glyphOffsetArray,Ai,ce,xe,Ce,H,Et,lt.predicate,Ni,Ci),Er=Mt||Pr.circles.length>0&&!Pr.collisionDetected,or=or&&Pr.offscreen}if(sr.iconFeatureIndex&&(Yr=sr.iconFeatureIndex),sr.iconBox){var Ss=function(Mi){var Ca=Yt&&wr?Bn(Mi,wr.x,wr.y,zt,Et,L.transform.angle):Mi;return L.collisionIndex.placeCollisionBox(Ca,_t,ze,ce,lt.predicate)};Qn=Ar&&Ar.box&&Ar.box.length&&sr.verticalIconBox?(Nr=Ss(sr.verticalIconBox)).box.length>0:(Nr=Ss(sr.iconBox)).box.length>0,or=or&&Nr.offscreen}var Es=ft||qn.numHorizontalGlyphVertices===0&&qn.numVerticalGlyphVertices===0,Qr=xt||qn.numIconVertices===0;if(Es||Qr?Qr?Es||(Qn=Qn&&Er):Er=Qn&&Er:Qn=Er=Qn&&Er,Er&&xr&&xr.box&&(Ar&&Ar.box&&qr?L.collisionIndex.insertCollisionBox(xr.box,ne.get("text-ignore-placement"),$.bucketInstanceId,qr,lt.ID):L.collisionIndex.insertCollisionBox(xr.box,ne.get("text-ignore-placement"),$.bucketInstanceId,jr,lt.ID)),Qn&&Nr&&L.collisionIndex.insertCollisionBox(Nr.box,ne.get("icon-ignore-placement"),$.bucketInstanceId,Yr,lt.ID),Pr&&(Er&&L.collisionIndex.insertCollisionCircles(Pr.circles,ne.get("text-ignore-placement"),$.bucketInstanceId,jr,lt.ID),H)){var al=$.bucketInstanceId,Hs=L.collisionCircleArrays[al];Hs===void 0&&(Hs=L.collisionCircleArrays[al]=new Mn);for(var Co=0;Co<Pr.circles.length;Co+=4)Hs.circles.push(Pr.circles[Co+0]),Hs.circles.push(Pr.circles[Co+1]),Hs.circles.push(Pr.circles[Co+2]),Hs.circles.push(Pr.collisionDetected?1:0)}L.placements[qn.crossTileID]=new en(Er||Nt,Qn||fn,or||$.justReloaded),G[qn.crossTileID]=!0}};if(Vt)for(var kn=$.getSortedSymbolIndexes(this.transform.angle),Pn=kn.length-1;Pn>=0;--Pn){var Nn=kn[Pn];gn($.symbolInstances.get(Nn),$.collisionArrays[Nn])}else for(var nr=B.symbolInstanceStart;nr<B.symbolInstanceEnd;nr++)gn($.symbolInstances.get(nr),$.collisionArrays[nr]);if(H&&$.bucketInstanceId in this.collisionCircleArrays){var cr=this.collisionCircleArrays[$.bucketInstanceId];o.invert(cr.invProjMatrix,ce),cr.viewportMatrix=this.collisionIndex.getViewportMatrix()}$.justReloaded=!1},Yn.prototype.markUsedJustification=function(B,G,H,L){var V,$={left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex};V=L===o.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:$[o.getAnchorJustification(G)];for(var ne=0,ce=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];ne<ce.length;ne+=1){var xe=ce[ne];xe>=0&&(B.text.placedSymbolArray.get(xe).crossTileID=V>=0&&xe!==V?0:H.crossTileID)}},Yn.prototype.markUsedOrientation=function(B,G,H){for(var L=G===o.WritingMode.horizontal||G===o.WritingMode.horizontalOnly?G:0,V=G===o.WritingMode.vertical?G:0,$=0,ne=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];$<ne.length;$+=1){var ce=ne[$];B.text.placedSymbolArray.get(ce).placedOrientation=L}H.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=V)},Yn.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,H=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var L=G?G.symbolFadeChange(B):1,V=G?G.opacities:{},$=G?G.variableOffsets:{},ne=G?G.placedOrientations:{};for(var ce in this.placements){var xe=this.placements[ce],Ce=V[ce];Ce?(this.opacities[ce]=new Jt(Ce,L,xe.text,xe.icon),H=H||xe.text!==Ce.text.placed||xe.icon!==Ce.icon.placed):(this.opacities[ce]=new Jt(null,L,xe.text,xe.icon,xe.skipFade),H=H||xe.text||xe.icon)}for(var ze in V){var Ue=V[ze];if(!this.opacities[ze]){var He=new Jt(Ue,L,!1,!1);He.isHidden()||(this.opacities[ze]=He,H=H||Ue.text.placed||Ue.icon.placed)}}for(var et in $)this.variableOffsets[et]||!this.opacities[et]||this.opacities[et].isHidden()||(this.variableOffsets[et]=$[et]);for(var lt in ne)this.placedOrientations[lt]||!this.opacities[lt]||this.opacities[lt].isHidden()||(this.placedOrientations[lt]=ne[lt]);H?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:B)},Yn.prototype.updateLayerOpacities=function(B,G){for(var H={},L=0,V=G;L<V.length;L+=1){var $=V[L],ne=$.getBucket(B);ne&&$.latestFeatureIndex&&B.id===ne.layerIds[0]&&this.updateBucketOpacities(ne,H,$.collisionBoxArray)}},Yn.prototype.updateBucketOpacities=function(B,G,H){var L=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var V=B.layers[0].layout,$=new Jt(null,0,!1,!1,!0),ne=V.get("text-allow-overlap"),ce=V.get("icon-allow-overlap"),xe=V.get("text-variable-anchor"),Ce=V.get("text-rotation-alignment")==="map",ze=V.get("text-pitch-alignment")==="map",Ue=V.get("icon-text-fit")!=="none",He=new Jt(null,0,ne&&(ce||!B.hasIconData()||V.get("icon-optional")),ce&&(ne||!B.hasTextData()||V.get("text-optional")),!0);!B.collisionArrays&&H&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(H);for(var et=function(Mt,_t,zt){for(var Et=0;Et<_t/4;Et++)Mt.opacityVertexArray.emplaceBack(zt)},lt=function(Mt){var _t=B.symbolInstances.get(Mt),zt=_t.numHorizontalGlyphVertices,Et=_t.numVerticalGlyphVertices,Yt=_t.crossTileID,Vt=G[Yt],Nt=L.opacities[Yt];Vt?Nt=$:Nt||(Nt=He,L.opacities[Yt]=Nt),G[Yt]=!0;var fn=zt>0||Et>0,gn=_t.numIconVertices>0,kn=L.placedOrientations[_t.crossTileID],Pn=kn===o.WritingMode.vertical,Nn=kn===o.WritingMode.horizontal||kn===o.WritingMode.horizontalOnly;if(fn){var nr=mn(Nt.text),cr=Pn?rn:nr;et(B.text,zt,cr);var qn=Nn?rn:nr;et(B.text,Et,qn);var sr=Nt.text.isHidden();[_t.rightJustifiedTextSymbolIndex,_t.centerJustifiedTextSymbolIndex,_t.leftJustifiedTextSymbolIndex].forEach(function(Yr){Yr>=0&&(B.text.placedSymbolArray.get(Yr).hidden=sr||Pn?1:0)}),_t.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(_t.verticalPlacedTextSymbolIndex).hidden=sr||Nn?1:0);var xr=L.variableOffsets[_t.crossTileID];xr&&L.markUsedJustification(B,xr.anchor,_t,kn);var Er=L.placedOrientations[_t.crossTileID];Er&&(L.markUsedJustification(B,"left",_t,Er),L.markUsedOrientation(B,Er,_t))}if(gn){var Qn=mn(Nt.icon),or=!(Ue&&_t.verticalPlacedIconSymbolIndex&&Pn);if(_t.placedIconSymbolIndex>=0){var wr=or?Qn:rn;et(B.icon,_t.numIconVertices,wr),B.icon.placedSymbolArray.get(_t.placedIconSymbolIndex).hidden=Nt.icon.isHidden()}if(_t.verticalPlacedIconSymbolIndex>=0){var ur=or?rn:Qn;et(B.icon,_t.numVerticalIconVertices,ur),B.icon.placedSymbolArray.get(_t.verticalPlacedIconSymbolIndex).hidden=Nt.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var Ar=B.collisionArrays[Mt];if(Ar){var Pr=new o.Point(0,0);if(Ar.textBox||Ar.verticalTextBox){var Nr=!0;if(xe){var jr=L.variableOffsets[Yt];jr?(Pr=jn(jr.anchor,jr.width,jr.height,jr.textOffset,jr.textBoxScale),Ce&&Pr._rotate(ze?L.transform.angle:-L.transform.angle)):Nr=!1}Ar.textBox&&dr(B.textCollisionBox.collisionVertexArray,Nt.text.placed,!Nr||Pn,Pr.x,Pr.y),Ar.verticalTextBox&&dr(B.textCollisionBox.collisionVertexArray,Nt.text.placed,!Nr||Nn,Pr.x,Pr.y)}var qr=!!(!Nn&&Ar.verticalIconBox);Ar.iconBox&&dr(B.iconCollisionBox.collisionVertexArray,Nt.icon.placed,qr,Ue?Pr.x:0,Ue?Pr.y:0),Ar.verticalIconBox&&dr(B.iconCollisionBox.collisionVertexArray,Nt.icon.placed,!qr,Ue?Pr.x:0,Ue?Pr.y:0)}}},ft=0;ft<B.symbolInstances.length;ft++)lt(ft);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var xt=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=xt.invProjMatrix,B.placementViewportMatrix=xt.viewportMatrix,B.collisionCircleArray=xt.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},Yn.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yn.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},Yn.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},Yn.prototype.stillRecent=function(B,G){var H=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*H>B},Yn.prototype.setStale=function(){this.stale=!0};var Zt=Math.pow(2,25),dn=Math.pow(2,24),St=Math.pow(2,17),Rt=Math.pow(2,16),Xt=Math.pow(2,9),ln=Math.pow(2,8),un=Math.pow(2,1);function mn(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var G=B.placed?1:0,H=Math.floor(127*B.opacity);return H*Zt+G*dn+H*St+G*Rt+H*Xt+G*ln+H*un+G}var rn=0,qt=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};qt.prototype.continuePlacement=function(B,G,H,L,V){for(var $=this._bucketParts;this._currentTileIndex<B.length;){var ne=B[this._currentTileIndex];if(G.getBucketParts($,L,ne,this._sortAcrossTiles),this._currentTileIndex++,V())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,$.sort(function(xe,Ce){return xe.sortKey-Ce.sortKey}));this._currentPartIndex<$.length;){var ce=$[this._currentPartIndex];if(G.placeLayerBucketPart(ce,this._seenCrossTileIDs,H),this._currentPartIndex++,V())return!0}return!1};var Ht=function(B,G,H,L,V,$,ne){this.placement=new Yn(B,V,$,ne),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=L,this._done=!1};Ht.prototype.isDone=function(){return this._done},Ht.prototype.continuePlacement=function(B,G,H){for(var L=this,V=o.browser.now(),$=function(){var xe=o.browser.now()-V;return!L._forceFullPlacement&&xe>2};this._currentPlacementIndex>=0;){var ne=G[B[this._currentPlacementIndex]],ce=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=ce)&&(!ne.maxzoom||ne.maxzoom>ce)){if(this._inProgressLayer||(this._inProgressLayer=new qt(ne)),this._inProgressLayer.continuePlacement(H[ne.source],this.placement,this._showCollisionBoxes,ne,$))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ht.prototype.commit=function(B){return this.placement.commit(B),this.placement};var $t=512/o.EXTENT/2,an=function(B,G,H){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var L=0;L<G.length;L++){var V=G.get(L),$=V.key;this.indexedSymbolInstances[$]||(this.indexedSymbolInstances[$]=[]),this.indexedSymbolInstances[$].push({crossTileID:V.crossTileID,coord:this.getScaledCoordinates(V,B)})}};an.prototype.getScaledCoordinates=function(B,G){var H=G.canonical.z-this.tileID.canonical.z,L=$t/Math.pow(2,H);return{x:Math.floor((G.canonical.x*o.EXTENT+B.anchorX)*L),y:Math.floor((G.canonical.y*o.EXTENT+B.anchorY)*L)}},an.prototype.findMatches=function(B,G,H){for(var L=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),V=0;V<B.length;V++){var $=B.get(V);if(!$.crossTileID){var ne=this.indexedSymbolInstances[$.key];if(ne)for(var ce=this.getScaledCoordinates($,G),xe=0,Ce=ne;xe<Ce.length;xe+=1){var ze=Ce[xe];if(Math.abs(ze.coord.x-ce.x)<=L&&Math.abs(ze.coord.y-ce.y)<=L&&!H[ze.crossTileID]){H[ze.crossTileID]=!0,$.crossTileID=ze.crossTileID;break}}}}};var wn=function(){this.maxCrossTileID=0};wn.prototype.generate=function(){return++this.maxCrossTileID};var En=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};En.prototype.handleWrapJump=function(B){var G=Math.round((B-this.lng)/360);if(G!==0)for(var H in this.indexes){var L=this.indexes[H],V={};for(var $ in L){var ne=L[$];ne.tileID=ne.tileID.unwrapTo(ne.tileID.wrap+G),V[ne.tileID.key]=ne}this.indexes[H]=V}this.lng=B},En.prototype.addBucket=function(B,G,H){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var L=0;L<G.symbolInstances.length;L++)G.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var V=this.usedCrossTileIDs[B.overscaledZ];for(var $ in this.indexes){var ne=this.indexes[$];if(Number($)>B.overscaledZ)for(var ce in ne){var xe=ne[ce];xe.tileID.isChildOf(B)&&xe.findMatches(G.symbolInstances,B,V)}else{var Ce=ne[B.scaledTo(Number($)).key];Ce&&Ce.findMatches(G.symbolInstances,B,V)}}for(var ze=0;ze<G.symbolInstances.length;ze++){var Ue=G.symbolInstances.get(ze);Ue.crossTileID||(Ue.crossTileID=H.generate(),V[Ue.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new an(B,G.symbolInstances,G.bucketInstanceId),!0},En.prototype.removeBucketCrossTileIDs=function(B,G){for(var H in G.indexedSymbolInstances)for(var L=0,V=G.indexedSymbolInstances[H];L<V.length;L+=1){var $=V[L];delete this.usedCrossTileIDs[B][$.crossTileID]}},En.prototype.removeStaleBuckets=function(B){var G=!1;for(var H in this.indexes){var L=this.indexes[H];for(var V in L)B[L[V].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,L[V]),delete L[V],G=!0)}return G};var On=function(){this.layerIndexes={},this.crossTileIDs=new wn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};On.prototype.addLayer=function(B,G,H){var L=this.layerIndexes[B.id];L===void 0&&(L=this.layerIndexes[B.id]=new En);var V=!1,$={};L.handleWrapJump(H);for(var ne=0,ce=G;ne<ce.length;ne+=1){var xe=ce[ne],Ce=xe.getBucket(B);Ce&&B.id===Ce.layerIds[0]&&(Ce.bucketInstanceId||(Ce.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(xe.tileID,Ce,this.crossTileIDs)&&(V=!0),$[Ce.bucketInstanceId]=!0)}return L.removeStaleBuckets($)&&(V=!0),V},On.prototype.pruneUnusedLayers=function(B){var G={};for(var H in B.forEach(function(L){G[L]=!0}),this.layerIndexes)G[H]||delete this.layerIndexes[H]};var Fn=function(B,G){return o.emitValidationErrors(B,G&&G.filter(function(H){return H.identifier!=="source.canvas"}))},$n=o.pick(vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hn=o.pick(vt,["setCenter","setZoom","setBearing","setPitch"]),Kn=function(){var B={},G=o.styleSpec.$version;for(var H in o.styleSpec.$root){var L=o.styleSpec.$root[H];if(L.required){var V;(V=H==="version"?G:L.type==="array"?[]:{})!=null&&(B[H]=V)}}return B}(),tr=function(B){function G(H,L){var V=this;L===void 0&&(L={}),B.call(this),this.map=H,this.dispatcher=new P(gt(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new v(H._requestManager,L.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new On,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var $=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(ne){var ce={pluginStatus:ne.pluginStatus,pluginURL:ne.pluginURL};$.dispatcher.broadcast("syncRTLPluginState",ce,function(xe,Ce){if(o.triggerPluginCompletionEvent(xe),Ce&&Ce.every(function(Ue){return Ue}))for(var ze in $.sourceCaches)$.sourceCaches[ze].reload()})}),this.on("data",function(ne){if(ne.dataType==="source"&&ne.sourceDataType==="metadata"){var ce=V.sourceCaches[ne.sourceId];if(ce){var xe=ce.getSource();if(xe&&xe.vectorLayerIds)for(var Ce in V._layers){var ze=V._layers[Ce];ze.source===xe.id&&V._validateLayer(ze)}}}})}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(H,L){var V=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var $=typeof L.validate=="boolean"?L.validate:!o.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,L.accessToken);var ne=this.map._requestManager.transformRequest(H,o.ResourceType.Style);this._request=o.getJSON(ne,function(ce,xe){V._request=null,ce?V.fire(new o.ErrorEvent(ce)):xe&&V._load(xe,$)})},G.prototype.loadJSON=function(H,L){var V=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){V._request=null,V._load(H,L.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Kn,!1)},G.prototype._load=function(H,L){if(!L||!Fn(this,o.validateStyle(H))){for(var V in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(V,H.sources[V],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var $=Tt(this.stylesheet.layers);this._order=$.map(function(Ce){return Ce.id}),this._layers={},this._serializedLayers={};for(var ne=0,ce=$;ne<ce.length;ne+=1){var xe=ce[ne];(xe=o.createStyleLayer(xe)).setEventedParent(this,{layer:{id:xe.id}}),this._layers[xe.id]=xe,this._serializedLayers[xe.id]=xe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},G.prototype._loadSprite=function(H){var L=this;this._spriteRequest=function(V,$,ne){var ce,xe,Ce,ze=o.browser.devicePixelRatio>1?"@2x":"",Ue=o.getJSON($.transformRequest($.normalizeSpriteURL(V,ze,".json"),o.ResourceType.SpriteJSON),function(lt,ft){Ue=null,Ce||(Ce=lt,ce=ft,et())}),He=o.getImage($.transformRequest($.normalizeSpriteURL(V,ze,".png"),o.ResourceType.SpriteImage),function(lt,ft){He=null,Ce||(Ce=lt,xe=ft,et())});function et(){if(Ce)ne(Ce);else if(ce&&xe){var lt=o.browser.getImageData(xe),ft={};for(var xt in ce){var Mt=ce[xt],_t=Mt.width,zt=Mt.height,Et=Mt.x,Yt=Mt.y,Vt=Mt.sdf,Nt=Mt.pixelRatio,fn=Mt.stretchX,gn=Mt.stretchY,kn=Mt.content,Pn=new o.RGBAImage({width:_t,height:zt});o.RGBAImage.copy(lt,Pn,{x:Et,y:Yt},{x:0,y:0},{width:_t,height:zt}),ft[xt]={data:Pn,pixelRatio:Nt,sdf:Vt,stretchX:fn,stretchY:gn,content:kn}}ne(null,ft)}}return{cancel:function(){Ue&&(Ue.cancel(),Ue=null),He&&(He.cancel(),He=null)}}}(H,this.map._requestManager,function(V,$){if(L._spriteRequest=null,V)L.fire(new o.ErrorEvent(V));else if($)for(var ne in $)L.imageManager.addImage(ne,$[ne]);L.imageManager.setLoaded(!0),L._availableImages=L.imageManager.listImages(),L.dispatcher.broadcast("setImages",L._availableImages),L.fire(new o.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(H){var L=this.sourceCaches[H.source];if(L){var V=H.sourceLayer;if(V){var $=L.getSource();($.type==="geojson"||$.vectorLayerIds&&$.vectorLayerIds.indexOf(V)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+V+'" does not exist on source "'+$.id+'" as specified by style layer "'+H.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(H){for(var L=[],V=0,$=H;V<$.length;V+=1){var ne=$[V],ce=this._layers[ne];ce.type!=="custom"&&L.push(ce.serialize())}return L},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var L in this._layers)if(this._layers[L].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(H){if(this._loaded){var L=this._changed;if(this._changed){var V=Object.keys(this._updatedLayers),$=Object.keys(this._removedLayers);for(var ne in(V.length||$.length)&&this._updateWorkerLayers(V,$),this._updatedSources){var ce=this._updatedSources[ne];ce==="reload"?this._reloadSource(ne):ce==="clear"&&this._clearSource(ne)}for(var xe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[xe].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}var Ce={};for(var ze in this.sourceCaches){var Ue=this.sourceCaches[ze];Ce[ze]=Ue.used,Ue.used=!1}for(var He=0,et=this._order;He<et.length;He+=1){var lt=et[He],ft=this._layers[lt];ft.recalculate(H,this._availableImages),!ft.isHidden(H.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var xt in Ce){var Mt=this.sourceCaches[xt];Ce[xt]!==Mt.used&&Mt.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:xt}))}this.light.recalculate(H),this.z=H.zoom,L&&this.fire(new o.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var L in this.sourceCaches)this.sourceCaches[L].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},G.prototype._updateWorkerLayers=function(H,L){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:L})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(H){var L=this;if(this._checkLoaded(),Fn(this,o.validateStyle(H)))return!1;(H=o.clone$1(H)).layers=Tt(H.layers);var V=Wt(this.serialize(),H).filter(function(ne){return!(ne.command in Hn)});if(V.length===0)return!1;var $=V.filter(function(ne){return!(ne.command in $n)});if($.length>0)throw new Error("Unimplemented: "+$.map(function(ne){return ne.command}).join(", ")+".");return V.forEach(function(ne){ne.command!=="setTransition"&&L[ne.command].apply(L,ne.args)}),this.stylesheet=H,!0},G.prototype.addImage=function(H,L){if(this.getImage(H))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,L),this._afterImageUpdated(H)},G.prototype.updateImage=function(H,L){this.imageManager.updateImage(H,L)},G.prototype.getImage=function(H){return this.imageManager.getImage(H)},G.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._afterImageUpdated(H)},G.prototype._afterImageUpdated=function(H){this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(H,L,V){var $=this;if(V===void 0&&(V={}),this._checkLoaded(),this.sourceCaches[H]!==void 0)throw new Error("There is already a source with this ID");if(!L.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(L).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(L.type)>=0&&this._validate(o.validateStyle.source,"sources."+H,L,null,V))){this.map&&this.map._collectResourceTiming&&(L.collectResourceTiming=!0);var ne=this.sourceCaches[H]=new at(H,L,this.dispatcher);ne.style=this,ne.setEventedParent(this,function(){return{isSourceLoaded:$.loaded(),source:ne.serialize(),sourceId:H}}),ne.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(H){if(this._checkLoaded(),this.sourceCaches[H]===void 0)throw new Error("There is no source with this ID");for(var L in this._layers)if(this._layers[L].source===H)return this.fire(new o.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+L+'" is using it.')));var V=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],V.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),V.setEventedParent(null),V.clearTiles(),V.onRemove&&V.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(H,L){this._checkLoaded(),this.sourceCaches[H].getSource().setData(L),this._changed=!0},G.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},G.prototype.addLayer=function(H,L,V){V===void 0&&(V={}),this._checkLoaded();var $=H.id;if(this.getLayer($))this.fire(new o.ErrorEvent(new Error('Layer with id "'+$+'" already exists on this map')));else{var ne;if(H.type==="custom"){if(Fn(this,o.validateCustomStyleLayer(H)))return;ne=o.createStyleLayer(H)}else{if(typeof H.source=="object"&&(this.addSource($,H.source),H=o.clone$1(H),H=o.extend(H,{source:$})),this._validate(o.validateStyle.layer,"layers."+$,H,{arrayIndex:-1},V))return;ne=o.createStyleLayer(H),this._validateLayer(ne),ne.setEventedParent(this,{layer:{id:$}}),this._serializedLayers[ne.id]=ne.serialize()}var ce=L?this._order.indexOf(L):this._order.length;if(L&&ce===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.')));else{if(this._order.splice(ce,0,$),this._layerOrderChanged=!0,this._layers[$]=ne,this._removedLayers[$]&&ne.source&&ne.type!=="custom"){var xe=this._removedLayers[$];delete this._removedLayers[$],xe.type!==ne.type?this._updatedSources[ne.source]="clear":(this._updatedSources[ne.source]="reload",this.sourceCaches[ne.source].pause())}this._updateLayer(ne),ne.onAdd&&ne.onAdd(this.map)}}},G.prototype.moveLayer=function(H,L){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==L){var V=this._order.indexOf(H);this._order.splice(V,1);var $=L?this._order.indexOf(L):this._order.length;L&&$===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.'))):(this._order.splice($,0,H),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(H){this._checkLoaded();var L=this._layers[H];if(L){L.setEventedParent(null);var V=this._order.indexOf(H);this._order.splice(V,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=L,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],L.onRemove&&L.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(H){return this._layers[H]},G.prototype.hasLayer=function(H){return H in this._layers},G.prototype.setLayerZoomRange=function(H,L,V){this._checkLoaded();var $=this.getLayer(H);$?$.minzoom===L&&$.maxzoom===V||(L!=null&&($.minzoom=L),V!=null&&($.maxzoom=V),this._updateLayer($)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(H,L,V){V===void 0&&(V={}),this._checkLoaded();var $=this.getLayer(H);if($){if(!o.deepEqual($.filter,L))return L==null?($.filter=void 0,void this._updateLayer($)):void(this._validate(o.validateStyle.filter,"layers."+$.id+".filter",L,null,V)||($.filter=o.clone$1(L),this._updateLayer($)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(H){return o.clone$1(this.getLayer(H).filter)},G.prototype.setLayoutProperty=function(H,L,V,$){$===void 0&&($={}),this._checkLoaded();var ne=this.getLayer(H);ne?o.deepEqual(ne.getLayoutProperty(L),V)||(ne.setLayoutProperty(L,V,$),this._updateLayer(ne)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(H,L){var V=this.getLayer(H);if(V)return V.getLayoutProperty(L);this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(H,L,V,$){$===void 0&&($={}),this._checkLoaded();var ne=this.getLayer(H);ne?o.deepEqual(ne.getPaintProperty(L),V)||(ne.setPaintProperty(L,V,$)&&this._updateLayer(ne),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(H,L){return this.getLayer(H).getPaintProperty(L)},G.prototype.setFeatureState=function(H,L){this._checkLoaded();var V=H.source,$=H.sourceLayer,ne=this.sourceCaches[V];if(ne!==void 0){var ce=ne.getSource().type;ce==="geojson"&&$?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ce!=="vector"||$?(H.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),ne.setFeatureState($,H.id,L)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(H,L){this._checkLoaded();var V=H.source,$=this.sourceCaches[V];if($!==void 0){var ne=$.getSource().type,ce=ne==="vector"?H.sourceLayer:void 0;ne!=="vector"||ce?L&&typeof H.id!="string"&&typeof H.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):$.removeFeatureState(ce,H.id,L):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(H){this._checkLoaded();var L=H.source,V=H.sourceLayer,$=this.sourceCaches[L];if($!==void 0){if($.getSource().type!=="vector"||V)return H.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),$.getFeatureState(V,H.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return H!==void 0})},G.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&this.sourceCaches[H.source].getSource().type!=="raster"&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(H){for(var L=this,V=function(kn){return L._layers[kn].type==="fill-extrusion"},$={},ne=[],ce=this._order.length-1;ce>=0;ce--){var xe=this._order[ce];if(V(xe)){$[xe]=ce;for(var Ce=0,ze=H;Ce<ze.length;Ce+=1){var Ue=ze[Ce][xe];if(Ue)for(var He=0,et=Ue;He<et.length;He+=1){var lt=et[He];ne.push(lt)}}}}ne.sort(function(kn,Pn){return Pn.intersectionZ-kn.intersectionZ});for(var ft=[],xt=this._order.length-1;xt>=0;xt--){var Mt=this._order[xt];if(V(Mt))for(var _t=ne.length-1;_t>=0;_t--){var zt=ne[_t].feature;if($[zt.layer.id]<xt)break;ft.push(zt),ne.pop()}else for(var Et=0,Yt=H;Et<Yt.length;Et+=1){var Vt=Yt[Et][Mt];if(Vt)for(var Nt=0,fn=Vt;Nt<fn.length;Nt+=1){var gn=fn[Nt];ft.push(gn.feature)}}}return ft},G.prototype.queryRenderedFeatures=function(H,L,V){L&&L.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",L.filter,null,L);var $={};if(L&&L.layers){if(!Array.isArray(L.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ne=0,ce=L.layers;ne<ce.length;ne+=1){var xe=ce[ne],Ce=this._layers[xe];if(!Ce)return this.fire(new o.ErrorEvent(new Error("The layer '"+xe+"' does not exist in the map's style and cannot be queried for features."))),[];$[Ce.source]=!0}}var ze=[];for(var Ue in L.availableImages=this._availableImages,this.sourceCaches)L.layers&&!$[Ue]||ze.push(Q(this.sourceCaches[Ue],this._layers,this._serializedLayers,H,L,V));return this.placement&&ze.push(function(He,et,lt,ft,xt,Mt,_t){for(var zt={},Et=Mt.queryRenderedSymbols(ft),Yt=[],Vt=0,Nt=Object.keys(Et).map(Number);Vt<Nt.length;Vt+=1){var fn=Nt[Vt];Yt.push(_t[fn])}Yt.sort(J);for(var gn=function(){var cr=Pn[kn],qn=cr.featureIndex.lookupSymbolFeatures(Et[cr.bucketInstanceId],et,cr.bucketIndex,cr.sourceLayerIndex,xt.filter,xt.layers,xt.availableImages,He);for(var sr in qn){var xr=zt[sr]=zt[sr]||[],Er=qn[sr];Er.sort(function(ur,Ar){var Pr=cr.featureSortOrder;if(Pr){var Nr=Pr.indexOf(ur.featureIndex);return Pr.indexOf(Ar.featureIndex)-Nr}return Ar.featureIndex-ur.featureIndex});for(var Qn=0,or=Er;Qn<or.length;Qn+=1){var wr=or[Qn];xr.push(wr)}}},kn=0,Pn=Yt;kn<Pn.length;kn+=1)gn();var Nn=function(cr){zt[cr].forEach(function(qn){var sr=qn.feature,xr=He[cr],Er=lt[xr.source].getFeatureState(sr.layer["source-layer"],sr.id);sr.source=sr.layer.source,sr.layer["source-layer"]&&(sr.sourceLayer=sr.layer["source-layer"]),sr.state=Er})};for(var nr in zt)Nn(nr);return zt}(this._layers,this._serializedLayers,this.sourceCaches,H,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ze)},G.prototype.querySourceFeatures=function(H,L){L&&L.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",L.filter,null,L);var V=this.sourceCaches[H];return V?function($,ne){for(var ce=$.getRenderableIds().map(function(et){return $.getTileByID(et)}),xe=[],Ce={},ze=0;ze<ce.length;ze++){var Ue=ce[ze],He=Ue.tileID.canonical.key;Ce[He]||(Ce[He]=!0,Ue.querySourceFeatures(xe,ne))}return xe}(V,L):[]},G.prototype.addSourceType=function(H,L,V){return G.getSourceType(H)?V(new Error('A source type called "'+H+'" already exists.')):(G.setSourceType(H,L),L.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:L.workerSourceURL},V):V(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(H,L){L===void 0&&(L={}),this._checkLoaded();var V=this.light.getLight(),$=!1;for(var ne in H)if(!o.deepEqual(H[ne],V[ne])){$=!0;break}if($){var ce={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,L),this.light.updateTransitions(ce)}},G.prototype._validate=function(H,L,V,$,ne){return ne===void 0&&(ne={}),(!ne||ne.validate!==!1)&&Fn(this,H.call(o.validateStyle,o.extend({key:L,style:this.serialize(),value:V,styleSpec:o.styleSpec},$)))},G.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var L in this.sourceCaches)this.sourceCaches[L].clearTiles(),this.sourceCaches[L].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},G.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},G.prototype._updateSources=function(H){for(var L in this.sourceCaches)this.sourceCaches[L].update(H)},G.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},G.prototype._updatePlacement=function(H,L,V,$,ne){ne===void 0&&(ne=!1);for(var ce=!1,xe=!1,Ce={},ze=0,Ue=this._order;ze<Ue.length;ze+=1){var He=Ue[ze],et=this._layers[He];if(et.type==="symbol"){if(!Ce[et.source]){var lt=this.sourceCaches[et.source];Ce[et.source]=lt.getRenderableIds(!0).map(function(Et){return lt.getTileByID(Et)}).sort(function(Et,Yt){return Yt.tileID.overscaledZ-Et.tileID.overscaledZ||(Et.tileID.isLessThan(Yt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer(et,Ce[et.source],H.center.lng);ce=ce||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ne=ne||this._layerOrderChanged||V===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),H.zoom))&&(this.pauseablePlacement=new Ht(H,this._order,ne,L,V,$,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ce),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),xe=!0),ce&&this.pauseablePlacement.placement.setStale()),xe||ce)for(var xt=0,Mt=this._order;xt<Mt.length;xt+=1){var _t=Mt[xt],zt=this._layers[_t];zt.type==="symbol"&&this.placement.updateLayerOpacities(zt,Ce[zt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},G.prototype.getImages=function(H,L,V){this.imageManager.getImages(L.icons,V),this._updateTilesForChangedImages();var $=this.sourceCaches[L.source];$&&$.setDependencies(L.tileID.key,L.type,L.icons)},G.prototype.getGlyphs=function(H,L,V){this.glyphManager.getGlyphs(L.stacks,V)},G.prototype.getResource=function(H,L,V){return o.makeRequest(L,V)},G}(o.Evented);tr.getSourceType=function(B){return te[B]},tr.setSourceType=function(B,G){te[B]=G},tr.registerForPluginStateChange=o.registerForPluginStateChange;var Jn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),hr=oi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),br=oi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),gr=oi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ar=oi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),mr=oi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Mr=oi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Dr=oi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),fi=oi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),hi=oi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ri=oi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ci=oi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ti=oi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fa=oi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),zr=oi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ui=oi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ia=oi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Bi=oi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),bo=oi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Do=oi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Qi=oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),io=oi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ao=oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),zo=oi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Oa=oi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Va=oi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ha=oi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function oi(B,G){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,L=G.match(/attribute ([\w]+) ([\w]+)/g),V=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=G.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=$?$.concat(V):V,ce={};return{fragmentSource:B=B.replace(H,function(xe,Ce,ze,Ue,He){return ce[He]=!0,Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
varying `+ze+" "+Ue+" "+He+`;
#else
uniform `+ze+" "+Ue+" u_"+He+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+He+`
    `+ze+" "+Ue+" "+He+" = u_"+He+`;
#endif
`}),vertexSource:G=G.replace(H,function(xe,Ce,ze,Ue,He){var et=Ue==="float"?"vec2":"vec4",lt=He.match(/color/)?"color":et;return ce[He]?Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
uniform lowp float u_`+He+`_t;
attribute `+ze+" "+et+" a_"+He+`;
varying `+ze+" "+Ue+" "+He+`;
#else
uniform `+ze+" "+Ue+" u_"+He+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+He+`
    `+He+" = a_"+He+`;
#else
    `+ze+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+He+`
    `+He+" = unpack_mix_"+lt+"(a_"+He+", u_"+He+`_t);
#else
    `+ze+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+He+`
uniform lowp float u_`+He+`_t;
attribute `+ze+" "+et+" a_"+He+`;
#else
uniform `+ze+" "+Ue+" u_"+He+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+He+`
    `+ze+" "+Ue+" "+He+" = a_"+He+`;
#else
    `+ze+" "+Ue+" "+He+" = u_"+He+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+He+`
    `+ze+" "+Ue+" "+He+" = unpack_mix_"+lt+"(a_"+He+", u_"+He+`_t);
#else
    `+ze+" "+Ue+" "+He+" = u_"+He+`;
#endif
`}),staticAttributes:L,staticUniforms:ne}}var Vi=Object.freeze({__proto__:null,prelude:hr,background:br,backgroundPattern:gr,circle:ar,clippingMask:mr,heatmap:Mr,heatmapTexture:Dr,collisionBox:fi,collisionCircle:hi,debug:Ri,fill:ci,fillOutline:Ti,fillOutlinePattern:fa,fillPattern:zr,fillExtrusion:Ui,fillExtrusionPattern:Ia,hillshadePrepare:Bi,hillshade:bo,line:Do,lineGradient:Qi,linePattern:io,lineSDF:ao,raster:zo,symbolIcon:Oa,symbolSDF:Va,symbolTextAndIcon:Ha}),_o=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function oo(B){for(var G=[],H=0;H<B.length;H++)if(B[H]!==null){var L=B[H].split(" ");G.push(L.pop())}return G}_o.prototype.bind=function(B,G,H,L,V,$,ne,ce){this.context=B;for(var xe=this.boundPaintVertexBuffers.length!==L.length,Ce=0;!xe&&Ce<L.length;Ce++)this.boundPaintVertexBuffers[Ce]!==L[Ce]&&(xe=!0);var ze=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==H||xe||this.boundIndexBuffer!==V||this.boundVertexOffset!==$||this.boundDynamicVertexBuffer!==ne||this.boundDynamicVertexBuffer2!==ce;!B.extVertexArrayObject||ze?this.freshBind(G,H,L,V,$,ne,ce):(B.bindVertexArrayOES.set(this.vao),ne&&ne.bind(),V&&V.dynamicDraw&&V.bind(),ce&&ce.bind())},_o.prototype.freshBind=function(B,G,H,L,V,$,ne){var ce,xe=B.numAttributes,Ce=this.context,ze=Ce.gl;if(Ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ce.extVertexArrayObject.createVertexArrayOES(),Ce.bindVertexArrayOES.set(this.vao),ce=0,this.boundProgram=B,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=L,this.boundVertexOffset=V,this.boundDynamicVertexBuffer=$,this.boundDynamicVertexBuffer2=ne;else{ce=Ce.currentNumAttributes||0;for(var Ue=xe;Ue<ce;Ue++)ze.disableVertexAttribArray(Ue)}G.enableAttributes(ze,B);for(var He=0,et=H;He<et.length;He+=1)et[He].enableAttributes(ze,B);$&&$.enableAttributes(ze,B),ne&&ne.enableAttributes(ze,B),G.bind(),G.setVertexAttribPointers(ze,B,V);for(var lt=0,ft=H;lt<ft.length;lt+=1){var xt=ft[lt];xt.bind(),xt.setVertexAttribPointers(ze,B,V)}$&&($.bind(),$.setVertexAttribPointers(ze,B,V)),L&&L.bind(),ne&&(ne.bind(),ne.setVertexAttribPointers(ze,B,V)),Ce.currentNumAttributes=xe},_o.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var qa=function(B,G,H,L,V,$){var ne=B.gl;this.program=ne.createProgram();for(var ce=oo(H.staticAttributes),xe=L?L.getBinderAttributes():[],Ce=ce.concat(xe),ze=H.staticUniforms?oo(H.staticUniforms):[],Ue=L?L.getBinderUniforms():[],He=[],et=0,lt=ze.concat(Ue);et<lt.length;et+=1){var ft=lt[et];He.indexOf(ft)<0&&He.push(ft)}var xt=L?L.defines():[];$&&xt.push("#define OVERDRAW_INSPECTOR;");var Mt=xt.concat(hr.fragmentSource,H.fragmentSource).join(`
`),_t=xt.concat(hr.vertexSource,H.vertexSource).join(`
`),zt=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(zt,Mt),ne.compileShader(zt),ne.attachShader(this.program,zt);var Et=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(Et,_t),ne.compileShader(Et),ne.attachShader(this.program,Et),this.attributes={};var Yt={};this.numAttributes=Ce.length;for(var Vt=0;Vt<this.numAttributes;Vt++)Ce[Vt]&&(ne.bindAttribLocation(this.program,Vt,Ce[Vt]),this.attributes[Ce[Vt]]=Vt);ne.linkProgram(this.program),ne.deleteShader(Et),ne.deleteShader(zt);for(var Nt=0;Nt<He.length;Nt++){var fn=He[Nt];if(fn&&!Yt[fn]){var gn=ne.getUniformLocation(this.program,fn);gn&&(Yt[fn]=gn)}}this.fixedUniforms=V(B,Yt),this.binderUniforms=L?L.getUniforms(B,Yt):[]}}};function Ro(B,G,H){var L=1/Wn(H,1,G.transform.tileZoom),V=Math.pow(2,H.tileID.overscaledZ),$=H.tileSize*Math.pow(2,G.transform.tileZoom)/V,ne=$*(H.tileID.canonical.x+H.tileID.wrap*V),ce=$*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[L,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,ce>>16],u_pixel_coord_lower:[65535&ne,65535&ce]}}qa.prototype.draw=function(B,G,H,L,V,$,ne,ce,xe,Ce,ze,Ue,He,et,lt,ft){var xt,Mt=B.gl;if(!this.failedToCreate){for(var _t in B.program.set(this.program),B.setDepthMode(H),B.setStencilMode(L),B.setColorMode(V),B.setCullFace($),this.fixedUniforms)this.fixedUniforms[_t].set(ne[_t]);et&&et.setUniforms(B,this.binderUniforms,Ue,{zoom:He});for(var zt=(xt={},xt[Mt.LINES]=2,xt[Mt.TRIANGLES]=3,xt[Mt.LINE_STRIP]=1,xt)[G],Et=0,Yt=ze.get();Et<Yt.length;Et+=1){var Vt=Yt[Et],Nt=Vt.vaos||(Vt.vaos={});(Nt[ce]||(Nt[ce]=new _o)).bind(B,this,xe,et?et.getPaintVertexBuffers():[],Ce,Vt.vertexOffset,lt,ft),Mt.drawElements(G,Vt.primitiveLength*zt,Mt.UNSIGNED_SHORT,Vt.primitiveOffset*zt*2)}}};var so=function(B,G,H,L){var V=G.style.light,$=V.properties.get("position"),ne=[$.x,$.y,$.z],ce=o.create$1();V.properties.get("anchor")==="viewport"&&o.fromRotation(ce,-G.transform.angle),o.transformMat3(ne,ne,ce);var xe=V.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:V.properties.get("intensity"),u_lightcolor:[xe.r,xe.g,xe.b],u_vertical_gradient:+H,u_opacity:L}},Fo=function(B,G,H,L,V,$,ne){return o.extend(so(B,G,H,L),Ro($,G,ne),{u_height_factor:-Math.pow(2,V.overscaledZ)/ne.tileSize/8})},wo=function(B){return{u_matrix:B}},Bo=function(B,G,H,L){return o.extend(wo(B),Ro(H,G,L))},lo=function(B,G){return{u_matrix:B,u_world:G}},hl=function(B,G,H,L,V){return o.extend(Bo(B,G,H,L),{u_world:V})},$s=function(B,G,H,L){var V,$,ne=B.transform;if(L.paint.get("circle-pitch-alignment")==="map"){var ce=Wn(H,1,ne.zoom);V=!0,$=[ce,ce]}else V=!1,$=ne.pixelsToGLUnits;return{u_camera_to_center_distance:ne.cameraToCenterDistance,u_scale_with_map:+(L.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(G.posMatrix,H,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_pitch_with_map:+V,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:$}},ts=function(B,G,H){var L=Wn(H,1,G.zoom),V=Math.pow(2,G.zoom-H.tileID.overscaledZ),$=H.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:L,u_extrude_scale:[G.pixelsToGLUnits[0]/(L*V),G.pixelsToGLUnits[1]/(L*V)],u_overscale_factor:$}},Al=function(B,G,H){return{u_matrix:B,u_inv_matrix:G,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},Ml=function(B,G,H){return H===void 0&&(H=1),{u_matrix:B,u_color:G,u_overlay:0,u_overlay_scale:H}},ns=function(B){return{u_matrix:B}},Sl=function(B,G,H,L){return{u_matrix:B,u_extrude_scale:Wn(G,1,H),u_intensity:L}},jl=function(B,G,H,L){var V=o.create();o.ortho(V,0,B.width,B.height,0,0,1);var $=B.context.gl;return{u_matrix:V,u_world:[$.drawingBufferWidth,$.drawingBufferHeight],u_image:H,u_color_ramp:L,u_opacity:G.paint.get("heatmap-opacity")}},Ul=function(B,G,H){var L=H.paint.get("hillshade-shadow-color"),V=H.paint.get("hillshade-highlight-color"),$=H.paint.get("hillshade-accent-color"),ne=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=B.transform.angle);var ce,xe,Ce,ze=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),ze),u_image:0,u_latrange:(ce=G.tileID,xe=Math.pow(2,ce.canonical.z),Ce=ce.canonical.y,[new o.MercatorCoordinate(0,Ce/xe).toLngLat().lat,new o.MercatorCoordinate(0,(Ce+1)/xe).toLngLat().lat]),u_light:[H.paint.get("hillshade-exaggeration"),ne],u_shadow:L,u_highlight:V,u_accent:$}},rs=function(B,G){var H=G.stride,L=o.create();return o.ortho(L,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(L,L,[0,-o.EXTENT,0]),{u_matrix:L,u_image:1,u_dimension:[H,H],u_zoom:B.overscaledZ,u_unpack:G.getUnpackVector()}},co=function(B,G,H){var L=B.transform;return{u_matrix:Ga(B,G,H),u_ratio:1/Wn(G,1,L.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},gs=function(B,G,H,L){return o.extend(co(B,G,H),{u_image:0,u_image_height:L})},is=function(B,G,H,L){var V=B.transform,$=as(G,V);return{u_matrix:Ga(B,G,H),u_texsize:G.imageAtlasTexture.size,u_ratio:1/Wn(G,1,V.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[$,L.fromScale,L.toScale],u_fade:L.t,u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]]}},Os=function(B,G,H,L,V){var $=B.transform,ne=B.lineAtlas,ce=as(G,$),xe=H.layout.get("line-cap")==="round",Ce=ne.getDash(L.from,xe),ze=ne.getDash(L.to,xe),Ue=Ce.width*V.fromScale,He=ze.width*V.toScale;return o.extend(co(B,G,H),{u_patternscale_a:[ce/Ue,-Ce.height/2],u_patternscale_b:[ce/He,-ze.height/2],u_sdfgamma:ne.width/(256*Math.min(Ue,He)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ce.y,u_tex_y_b:ze.y,u_mix:V.t})};function as(B,G){return 1/Wn(B,1,G.tileZoom)}function Ga(B,G,H){return B.translatePosMatrix(G.tileID.posMatrix,G,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var pl=function(B,G,H,L,V){return{u_matrix:B,u_tl_parent:G,u_scale_parent:H,u_buffer_scale:1,u_fade_t:L.mix,u_opacity:L.opacity*V.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:V.paint.get("raster-brightness-min"),u_brightness_high:V.paint.get("raster-brightness-max"),u_saturation_factor:(ne=V.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:($=V.paint.get("raster-contrast"),$>0?1/(1-$):1+$),u_spin_weights:No(V.paint.get("raster-hue-rotate"))};var $,ne};function No(B){B*=Math.PI/180;var G=Math.sin(B),H=Math.cos(B);return[(2*H+1)/3,(-Math.sqrt(3)*G-H+1)/3,(Math.sqrt(3)*G-H+1)/3]}var To,ko=function(B,G,H,L,V,$,ne,ce,xe,Ce){var ze=V.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:ze.width/ze.height,u_fade_change:V.options.fadeDuration?V.symbolFadeChange:1,u_matrix:$,u_label_plane_matrix:ne,u_coord_matrix:ce,u_is_text:+xe,u_pitch_with_map:+L,u_texsize:Ce,u_texture:0}},jo=function(B,G,H,L,V,$,ne,ce,xe,Ce,ze){var Ue=V.transform;return o.extend(ko(B,G,H,L,V,$,ne,ce,xe,Ce),{u_gamma_scale:L?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+ze})},Gr=function(B,G,H,L,V,$,ne,ce,xe,Ce){return o.extend(jo(B,G,H,L,V,$,ne,ce,!0,xe,!0),{u_texsize_icon:Ce,u_texture_icon:1})},ms=function(B,G,H){return{u_matrix:B,u_opacity:G,u_color:H}},Vl=function(B,G,H,L,V,$){return o.extend(function(ne,ce,xe,Ce){var ze=xe.imageManager.getPattern(ne.from.toString()),Ue=xe.imageManager.getPattern(ne.to.toString()),He=xe.imageManager.getPixelSize(),et=He.width,lt=He.height,ft=Math.pow(2,Ce.tileID.overscaledZ),xt=Ce.tileSize*Math.pow(2,xe.transform.tileZoom)/ft,Mt=xt*(Ce.tileID.canonical.x+Ce.tileID.wrap*ft),_t=xt*Ce.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[et,lt],u_mix:ce.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ce.fromScale,u_scale_b:ce.toScale,u_tile_units_to_pixels:1/Wn(Ce,1,xe.transform.tileZoom),u_pixel_coord_upper:[Mt>>16,_t>>16],u_pixel_coord_lower:[65535&Mt,65535&_t]}}(L,$,H,V),{u_matrix:B,u_opacity:G})},Qs={fillExtrusion:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fillExtrusionPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_height_factor:new o.Uniform1f(B,G.u_height_factor),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fill:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},fillPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},fillOutline:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world)}},fillOutlinePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},circle:function(B,G){return{u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(B,G.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},collisionBox:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(B,G.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_overscale_factor:new o.Uniform1f(B,G.u_overscale_factor)}},collisionCircle:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_inv_matrix:new o.UniformMatrix4f(B,G.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(B,G.u_viewport_size)}},debug:function(B,G){return{u_color:new o.UniformColor(B,G.u_color),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_overlay:new o.Uniform1i(B,G.u_overlay),u_overlay_scale:new o.Uniform1f(B,G.u_overlay_scale)}},clippingMask:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmap:function(B,G){return{u_extrude_scale:new o.Uniform1f(B,G.u_extrude_scale),u_intensity:new o.Uniform1f(B,G.u_intensity),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmapTexture:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_color_ramp:new o.Uniform1i(B,G.u_color_ramp),u_opacity:new o.Uniform1f(B,G.u_opacity)}},hillshade:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_latrange:new o.Uniform2f(B,G.u_latrange),u_light:new o.Uniform2f(B,G.u_light),u_shadow:new o.UniformColor(B,G.u_shadow),u_highlight:new o.UniformColor(B,G.u_highlight),u_accent:new o.UniformColor(B,G.u_accent)}},hillshadePrepare:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_dimension:new o.Uniform2f(B,G.u_dimension),u_zoom:new o.Uniform1f(B,G.u_zoom),u_unpack:new o.Uniform4f(B,G.u_unpack)}},line:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels)}},lineGradient:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_image:new o.Uniform1i(B,G.u_image),u_image_height:new o.Uniform1f(B,G.u_image_height)}},linePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_texsize:new o.Uniform2f(B,G.u_texsize),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_image:new o.Uniform1i(B,G.u_image),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},lineSDF:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(B,G.u_patternscale_a),u_patternscale_b:new o.Uniform2f(B,G.u_patternscale_b),u_sdfgamma:new o.Uniform1f(B,G.u_sdfgamma),u_image:new o.Uniform1i(B,G.u_image),u_tex_y_a:new o.Uniform1f(B,G.u_tex_y_a),u_tex_y_b:new o.Uniform1f(B,G.u_tex_y_b),u_mix:new o.Uniform1f(B,G.u_mix)}},raster:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_tl_parent:new o.Uniform2f(B,G.u_tl_parent),u_scale_parent:new o.Uniform1f(B,G.u_scale_parent),u_buffer_scale:new o.Uniform1f(B,G.u_buffer_scale),u_fade_t:new o.Uniform1f(B,G.u_fade_t),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image0:new o.Uniform1i(B,G.u_image0),u_image1:new o.Uniform1i(B,G.u_image1),u_brightness_low:new o.Uniform1f(B,G.u_brightness_low),u_brightness_high:new o.Uniform1f(B,G.u_brightness_high),u_saturation_factor:new o.Uniform1f(B,G.u_saturation_factor),u_contrast_factor:new o.Uniform1f(B,G.u_contrast_factor),u_spin_weights:new o.Uniform3f(B,G.u_spin_weights)}},symbolIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture)}},symbolSDF:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},symbolTextAndIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texsize_icon:new o.Uniform2f(B,G.u_texsize_icon),u_texture:new o.Uniform1i(B,G.u_texture),u_texture_icon:new o.Uniform1i(B,G.u_texture_icon),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},background:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_color:new o.UniformColor(B,G.u_color)}},backgroundPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image:new o.Uniform1i(B,G.u_image),u_pattern_tl_a:new o.Uniform2f(B,G.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(B,G.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(B,G.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(B,G.u_pattern_br_b),u_texsize:new o.Uniform2f(B,G.u_texsize),u_mix:new o.Uniform1f(B,G.u_mix),u_pattern_size_a:new o.Uniform2f(B,G.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(B,G.u_pattern_size_b),u_scale_a:new o.Uniform1f(B,G.u_scale_a),u_scale_b:new o.Uniform1f(B,G.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(B,G.u_tile_units_to_pixels)}}};function vs(B,G,H,L,V,$,ne){for(var ce=B.context,xe=ce.gl,Ce=B.useProgram("collisionBox"),ze=[],Ue=0,He=0,et=0;et<L.length;et++){var lt=L[et],ft=G.getTile(lt),xt=ft.getBucket(H);if(xt){var Mt=lt.posMatrix;V[0]===0&&V[1]===0||(Mt=B.translatePosMatrix(lt.posMatrix,ft,V,$));var _t=ne?xt.textCollisionBox:xt.iconCollisionBox,zt=xt.collisionCircleArray;if(zt.length>0){var Et=o.create(),Yt=Mt;o.mul(Et,xt.placementInvProjMatrix,B.transform.glCoordMatrix),o.mul(Et,Et,xt.placementViewportMatrix),ze.push({circleArray:zt,circleOffset:He,transform:Yt,invTransform:Et}),He=Ue+=zt.length/4}_t&&Ce.draw(ce,xe.LINES,It.disabled,qe.disabled,B.colorModeForRenderPass(),Ne.disabled,ts(Mt,B.transform,ft),H.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,null,B.transform.zoom,null,null,_t.collisionVertexBuffer)}}if(ne&&ze.length){var Vt=B.useProgram("collisionCircle"),Nt=new o.StructArrayLayout2f1f2i16;Nt.resize(4*Ue),Nt._trim();for(var fn=0,gn=0,kn=ze;gn<kn.length;gn+=1)for(var Pn=kn[gn],Nn=0;Nn<Pn.circleArray.length/4;Nn++){var nr=4*Nn,cr=Pn.circleArray[nr+0],qn=Pn.circleArray[nr+1],sr=Pn.circleArray[nr+2],xr=Pn.circleArray[nr+3];Nt.emplace(fn++,cr,qn,sr,xr,0),Nt.emplace(fn++,cr,qn,sr,xr,1),Nt.emplace(fn++,cr,qn,sr,xr,2),Nt.emplace(fn++,cr,qn,sr,xr,3)}(!To||To.length<2*Ue)&&(To=function(Pr){var Nr=2*Pr,jr=new o.StructArrayLayout3ui6;jr.resize(Nr),jr._trim();for(var qr=0;qr<Nr;qr++){var Yr=6*qr;jr.uint16[Yr+0]=4*qr+0,jr.uint16[Yr+1]=4*qr+1,jr.uint16[Yr+2]=4*qr+2,jr.uint16[Yr+3]=4*qr+2,jr.uint16[Yr+4]=4*qr+3,jr.uint16[Yr+5]=4*qr+0}return jr}(Ue));for(var Er=ce.createIndexBuffer(To,!0),Qn=ce.createVertexBuffer(Nt,o.collisionCircleLayout.members,!0),or=0,wr=ze;or<wr.length;or+=1){var ur=wr[or],Ar=Al(ur.transform,ur.invTransform,B.transform);Vt.draw(ce,xe.TRIANGLES,It.disabled,qe.disabled,B.colorModeForRenderPass(),Ne.disabled,Ar,H.id,Qn,Er,o.SegmentVector.simpleSegment(0,2*ur.circleOffset,ur.circleArray.length,ur.circleArray.length/2),null,B.transform.zoom,null,null,null)}Qn.destroy(),Er.destroy()}}var El=o.identity(new Float32Array(16));function Hl(B,G,H,L,V,$){var ne=o.getAnchorAlignment(B),ce=-(ne.horizontalAlign-.5)*G,xe=-(ne.verticalAlign-.5)*H,Ce=o.evaluateVariableOffset(B,L);return new o.Point((ce/V+Ce[0])*$,(xe/V+Ce[1])*$)}function el(B,G,H,L,V,$,ne,ce,xe,Ce,ze){var Ue=B.text.placedSymbolArray,He=B.text.dynamicLayoutVertexArray,et=B.icon.dynamicLayoutVertexArray,lt={};He.clear();for(var ft=0;ft<Ue.length;ft++){var xt=Ue.get(ft),Mt=B.allowVerticalPlacement&&!xt.placedOrientation,_t=xt.hidden||!xt.crossTileID||Mt?null:L[xt.crossTileID];if(_t){var zt=new o.Point(xt.anchorX,xt.anchorY),Et=Kt(zt,H?ce:ne),Yt=sn($.cameraToCenterDistance,Et.signedDistanceFromCamera),Vt=V.evaluateSizeForFeature(B.textSizeData,Ce,xt)*Yt/o.ONE_EM;H&&(Vt*=B.tilePixelRatio/xe);for(var Nt=_t.width,fn=_t.height,gn=Hl(_t.anchor,Nt,fn,_t.textOffset,_t.textBoxScale,Vt),kn=H?Kt(zt.add(gn),ne).point:Et.point.add(G?gn.rotate(-$.angle):gn),Pn=B.allowVerticalPlacement&&xt.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Nn=0;Nn<xt.numGlyphs;Nn++)o.addDynamicAttributes(He,kn,Pn);ze&&xt.associatedIconIndex>=0&&(lt[xt.associatedIconIndex]={shiftedAnchor:kn,angle:Pn})}else In(xt.numGlyphs,He)}if(ze){et.clear();for(var nr=B.icon.placedSymbolArray,cr=0;cr<nr.length;cr++){var qn=nr.get(cr);if(qn.hidden)In(qn.numGlyphs,et);else{var sr=lt[cr];if(sr)for(var xr=0;xr<qn.numGlyphs;xr++)o.addDynamicAttributes(et,sr.shiftedAnchor,sr.angle);else In(qn.numGlyphs,et)}}B.icon.dynamicLayoutVertexBuffer.updateData(et)}B.text.dynamicLayoutVertexBuffer.updateData(He)}function ql(B,G,H){return H.iconsInText&&G?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function Uo(B,G,H,L,V,$,ne,ce,xe,Ce,ze,Ue){for(var He=B.context,et=He.gl,lt=B.transform,ft=ce==="map",xt=xe==="map",Mt=ft&&H.layout.get("symbol-placement")!=="point",_t=ft&&!xt&&!Mt,zt=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,Et=!1,Yt=B.depthModeForSublayer(0,It.ReadOnly),Vt=H.layout.get("text-variable-anchor"),Nt=[],fn=0,gn=L;fn<gn.length;fn+=1){var kn=gn[fn],Pn=G.getTile(kn),Nn=Pn.getBucket(H);if(Nn){var nr=V?Nn.text:Nn.icon;if(nr&&nr.segments.get().length){var cr=nr.programConfigurations.get(H.id),qn=V||Nn.sdfIcons,sr=V?Nn.textSizeData:Nn.iconSizeData,xr=xt||lt.pitch!==0,Er=B.useProgram(ql(qn,V,Nn),cr),Qn=o.evaluateSizeForZoom(sr,lt.zoom),or=void 0,wr=[0,0],ur=void 0,Ar=void 0,Pr=null,Nr=void 0;if(V){if(ur=Pn.glyphAtlasTexture,Ar=et.LINEAR,or=Pn.glyphAtlasTexture.size,Nn.iconsInText){wr=Pn.imageAtlasTexture.size,Pr=Pn.imageAtlasTexture;var jr=sr.kind==="composite"||sr.kind==="camera";Nr=xr||B.options.rotating||B.options.zooming||jr?et.LINEAR:et.NEAREST}}else{var qr=H.layout.get("icon-size").constantOr(0)!==1||Nn.iconsNeedLinear;ur=Pn.imageAtlasTexture,Ar=qn||B.options.rotating||B.options.zooming||qr||xr?et.LINEAR:et.NEAREST,or=Pn.imageAtlasTexture.size}var Yr=Wn(Pn,1,B.transform.zoom),gi=bn(kn.posMatrix,xt,ft,B.transform,Yr),Li=hn(kn.posMatrix,xt,ft,B.transform,Yr),la=Vt&&Nn.hasTextData(),Gi=H.layout.get("icon-text-fit")!=="none"&&la&&Nn.hasIconData();Mt&&cn(Nn,kn.posMatrix,B,V,gi,Li,xt,Ce);var ta=B.translatePosMatrix(kn.posMatrix,Pn,$,ne),xi=Mt||V&&Vt||Gi?El:gi,Xr=B.translatePosMatrix(Li,Pn,$,ne,!0),ki=qn&&H.paint.get(V?"text-halo-width":"icon-halo-width").constantOr(1)!==0,li={program:Er,buffers:nr,uniformValues:qn?Nn.iconsInText?Gr(sr.kind,Qn,_t,xt,B,ta,xi,Xr,or,wr):jo(sr.kind,Qn,_t,xt,B,ta,xi,Xr,V,or,!0):ko(sr.kind,Qn,_t,xt,B,ta,xi,Xr,V,or),atlasTexture:ur,atlasTextureIcon:Pr,atlasInterpolation:Ar,atlasInterpolationIcon:Nr,isSDF:qn,hasHalo:ki};if(zt&&Nn.canOverlap){Et=!0;for(var $r=0,Ai=nr.segments.get();$r<Ai.length;$r+=1){var Ci=Ai[$r];Nt.push({segments:new o.SegmentVector([Ci]),sortKey:Ci.sortKey,state:li})}}else Nt.push({segments:nr.segments,sortKey:0,state:li})}}}Et&&Nt.sort(function(Hs,Co){return Hs.sortKey-Co.sortKey});for(var Ni=0,Ss=Nt;Ni<Ss.length;Ni+=1){var Es=Ss[Ni],Qr=Es.state;if(He.activeTexture.set(et.TEXTURE0),Qr.atlasTexture.bind(Qr.atlasInterpolation,et.CLAMP_TO_EDGE),Qr.atlasTextureIcon&&(He.activeTexture.set(et.TEXTURE1),Qr.atlasTextureIcon&&Qr.atlasTextureIcon.bind(Qr.atlasInterpolationIcon,et.CLAMP_TO_EDGE)),Qr.isSDF){var al=Qr.uniformValues;Qr.hasHalo&&(al.u_is_halo=1,os(Qr.buffers,Es.segments,H,B,Qr.program,Yt,ze,Ue,al)),al.u_is_halo=0}os(Qr.buffers,Es.segments,H,B,Qr.program,Yt,ze,Ue,Qr.uniformValues)}}function os(B,G,H,L,V,$,ne,ce,xe){var Ce=L.context,ze=Ce.gl;V.draw(Ce,ze.TRIANGLES,$,ne,ce,Ne.disabled,xe,H.id,B.layoutVertexBuffer,B.indexBuffer,G,H.paint,L.transform.zoom,B.programConfigurations.get(H.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function Ao(B,G,H,L,V,$,ne){var ce,xe,Ce,ze,Ue,He=B.context.gl,et=H.paint.get("fill-pattern"),lt=et&&et.constantOr(1),ft=H.getCrossfadeParameters();ne?(xe=lt&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=He.LINES):(xe=lt?"fillPattern":"fill",ce=He.TRIANGLES);for(var xt=0,Mt=L;xt<Mt.length;xt+=1){var _t=Mt[xt],zt=G.getTile(_t);if(!lt||zt.patternsLoaded()){var Et=zt.getBucket(H);if(Et){var Yt=Et.programConfigurations.get(H.id),Vt=B.useProgram(xe,Yt);lt&&(B.context.activeTexture.set(He.TEXTURE0),zt.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),Yt.updatePaintBuffers(ft));var Nt=et.constantOr(null);if(Nt&&zt.imageAtlas){var fn=zt.imageAtlas,gn=fn.patternPositions[Nt.to.toString()],kn=fn.patternPositions[Nt.from.toString()];gn&&kn&&Yt.setConstantPatternPositions(gn,kn)}var Pn=B.translatePosMatrix(_t.posMatrix,zt,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(ne){ze=Et.indexBuffer2,Ue=Et.segments2;var Nn=[He.drawingBufferWidth,He.drawingBufferHeight];Ce=xe==="fillOutlinePattern"&&lt?hl(Pn,B,ft,zt,Nn):lo(Pn,Nn)}else ze=Et.indexBuffer,Ue=Et.segments,Ce=lt?Bo(Pn,B,ft,zt):wo(Pn);Vt.draw(B.context,ce,V,B.stencilModeForClipping(_t),$,Ne.disabled,Ce,H.id,Et.layoutVertexBuffer,ze,Ue,H.paint,B.transform.zoom,Yt)}}}}function Wa(B,G,H,L,V,$,ne){for(var ce=B.context,xe=ce.gl,Ce=H.paint.get("fill-extrusion-pattern"),ze=Ce.constantOr(1),Ue=H.getCrossfadeParameters(),He=H.paint.get("fill-extrusion-opacity"),et=0,lt=L;et<lt.length;et+=1){var ft=lt[et],xt=G.getTile(ft),Mt=xt.getBucket(H);if(Mt){var _t=Mt.programConfigurations.get(H.id),zt=B.useProgram(ze?"fillExtrusionPattern":"fillExtrusion",_t);ze&&(B.context.activeTexture.set(xe.TEXTURE0),xt.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),_t.updatePaintBuffers(Ue));var Et=Ce.constantOr(null);if(Et&&xt.imageAtlas){var Yt=xt.imageAtlas,Vt=Yt.patternPositions[Et.to.toString()],Nt=Yt.patternPositions[Et.from.toString()];Vt&&Nt&&_t.setConstantPatternPositions(Vt,Nt)}var fn=B.translatePosMatrix(ft.posMatrix,xt,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),gn=H.paint.get("fill-extrusion-vertical-gradient"),kn=ze?Fo(fn,B,gn,He,ft,Ue,xt):so(fn,B,gn,He);zt.draw(ce,ce.gl.TRIANGLES,V,$,ne,Ne.backCCW,kn,H.id,Mt.layoutVertexBuffer,Mt.indexBuffer,Mt.segments,H.paint,B.transform.zoom,_t)}}}function ys(B,G,H,L,V,$){var ne=B.context,ce=ne.gl,xe=G.fbo;if(xe){var Ce=B.useProgram("hillshade");ne.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,xe.colorAttachment.get());var ze=Ul(B,G,H);Ce.draw(ne,ce.TRIANGLES,L,V,$,Ne.disabled,ze,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function Ll(B,G,H,L,V,$){var ne=B.context,ce=ne.gl,xe=G.dem;if(xe&&xe.data){var Ce=xe.dim,ze=xe.stride,Ue=xe.getPixels();if(ne.activeTexture.set(ce.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||B.getTileTexture(ze),G.demTexture){var He=G.demTexture;He.update(Ue,{premultiply:!1}),He.bind(ce.NEAREST,ce.CLAMP_TO_EDGE)}else G.demTexture=new o.Texture(ne,Ue,ce.RGBA,{premultiply:!1}),G.demTexture.bind(ce.NEAREST,ce.CLAMP_TO_EDGE);ne.activeTexture.set(ce.TEXTURE0);var et=G.fbo;if(!et){var lt=new o.Texture(ne,{width:Ce,height:Ce,data:null},ce.RGBA);lt.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),(et=G.fbo=ne.createFramebuffer(Ce,Ce,!0)).colorAttachment.set(lt.texture)}ne.bindFramebuffer.set(et.framebuffer),ne.viewport.set([0,0,Ce,Ce]),B.useProgram("hillshadePrepare").draw(ne,ce.TRIANGLES,L,V,$,Ne.disabled,rs(G.tileID,xe),H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function Ds(B,G,H,L,V){var $=L.paint.get("raster-fade-duration");if($>0){var ne=o.browser.now(),ce=(ne-B.timeAdded)/$,xe=G?(ne-G.timeAdded)/$:-1,Ce=H.getSource(),ze=V.coveringZoomLevel({tileSize:Ce.tileSize,roundZoom:Ce.roundZoom}),Ue=!G||Math.abs(G.tileID.overscaledZ-ze)>Math.abs(B.tileID.overscaledZ-ze),He=Ue&&B.refreshedUponExpiration?1:o.clamp(Ue?ce:1-xe,0,1);return B.refreshedUponExpiration&&ce>=1&&(B.refreshedUponExpiration=!1),G?{opacity:1,mix:1-He}:{opacity:He,mix:0}}return{opacity:1,mix:0}}var tl=new o.Color(1,0,0,1),Ma=new o.Color(0,1,0,1),nl=new o.Color(0,0,1,1),Cl=new o.Color(1,0,1,1),xs=new o.Color(0,1,1,1);function ss(B){var G=B.transform.padding;bs(B,B.transform.height-(G.top||0),3,tl),bs(B,G.bottom||0,3,Ma),ls(B,G.left||0,3,nl),ls(B,B.transform.width-(G.right||0),3,Cl);var H=B.transform.centerPoint;(function(L,V,$,ne){var ce=20,xe=2;cs(L,V-xe/2,$-ce/2,xe,ce,ne),cs(L,V-ce/2,$-xe/2,ce,xe,ne)})(B,H.x,B.transform.height-H.y,xs)}function bs(B,G,H,L){cs(B,0,G+H/2,B.transform.width,H,L)}function ls(B,G,H,L){cs(B,G-H/2,0,H,B.transform.height,L)}function cs(B,G,H,L,V,$){var ne=B.context,ce=ne.gl;ce.enable(ce.SCISSOR_TEST),ce.scissor(G*o.browser.devicePixelRatio,H*o.browser.devicePixelRatio,L*o.browser.devicePixelRatio,V*o.browser.devicePixelRatio),ne.clear({color:$}),ce.disable(ce.SCISSOR_TEST)}function zs(B,G,H){var L=B.context,V=L.gl,$=H.posMatrix,ne=B.useProgram("debug"),ce=It.disabled,xe=qe.disabled,Ce=B.colorModeForRenderPass(),ze="$debug";L.activeTexture.set(V.TEXTURE0),B.emptyTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),ne.draw(L,V.LINE_STRIP,ce,xe,Ce,Ne.disabled,Ml($,o.Color.red),ze,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var Ue=G.getTileByID(H.key).latestRawTileData,He=Ue&&Ue.byteLength||0,et=Math.floor(He/1024),lt=G.getTile(H).tileSize,ft=512/Math.min(lt,512)*(H.overscaledZ/B.transform.zoom)*.5,xt=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(xt+=" => "+H.overscaledZ),function(Mt,_t){Mt.initDebugOverlayCanvas();var zt=Mt.debugOverlayCanvas,Et=Mt.context.gl,Yt=Mt.debugOverlayCanvas.getContext("2d");Yt.clearRect(0,0,zt.width,zt.height),Yt.shadowColor="white",Yt.shadowBlur=2,Yt.lineWidth=1.5,Yt.strokeStyle="white",Yt.textBaseline="top",Yt.font="bold 36px Open Sans, sans-serif",Yt.fillText(_t,5,5),Yt.strokeText(_t,5,5),Mt.debugOverlayTexture.update(zt),Mt.debugOverlayTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE)}(B,xt+" "+et+"kb"),ne.draw(L,V.TRIANGLES,ce,xe,Ye.alphaBlended,Ne.disabled,Ml($,o.Color.transparent,ft),ze,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var rl={symbol:function(B,G,H,L,V){if(B.renderPass==="translucent"){var $=qe.disabled,ne=B.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(ce,xe,Ce,ze,Ue,He,et){for(var lt=xe.transform,ft=Ue==="map",xt=He==="map",Mt=0,_t=ce;Mt<_t.length;Mt+=1){var zt=_t[Mt],Et=ze.getTile(zt),Yt=Et.getBucket(Ce);if(Yt&&Yt.text&&Yt.text.segments.get().length){var Vt=Yt.textSizeData,Nt=o.evaluateSizeForZoom(Vt,lt.zoom),fn=Wn(Et,1,xe.transform.zoom),gn=bn(zt.posMatrix,xt,ft,xe.transform,fn),kn=Ce.layout.get("icon-text-fit")!=="none"&&Yt.hasIconData();if(Nt){var Pn=Math.pow(2,lt.zoom-Et.tileID.overscaledZ);el(Yt,ft,xt,et,o.symbolSize,lt,gn,zt.posMatrix,Pn,Nt,kn)}}}}(L,B,H,G,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),V),H.paint.get("icon-opacity").constantOr(1)!==0&&Uo(B,G,H,L,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),$,ne),H.paint.get("text-opacity").constantOr(1)!==0&&Uo(B,G,H,L,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),$,ne),G.map.showCollisionBoxes&&(vs(B,G,H,L,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),vs(B,G,H,L,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(B,G,H,L){if(B.renderPass==="translucent"){var V=H.paint.get("circle-opacity"),$=H.paint.get("circle-stroke-width"),ne=H.paint.get("circle-stroke-opacity"),ce=H.layout.get("circle-sort-key").constantOr(1)!==void 0;if(V.constantOr(1)!==0||$.constantOr(1)!==0&&ne.constantOr(1)!==0){for(var xe=B.context,Ce=xe.gl,ze=B.depthModeForSublayer(0,It.ReadOnly),Ue=qe.disabled,He=B.colorModeForRenderPass(),et=[],lt=0;lt<L.length;lt++){var ft=L[lt],xt=G.getTile(ft),Mt=xt.getBucket(H);if(Mt){var _t=Mt.programConfigurations.get(H.id),zt={programConfiguration:_t,program:B.useProgram("circle",_t),layoutVertexBuffer:Mt.layoutVertexBuffer,indexBuffer:Mt.indexBuffer,uniformValues:$s(B,ft,xt,H)};if(ce)for(var Et=0,Yt=Mt.segments.get();Et<Yt.length;Et+=1){var Vt=Yt[Et];et.push({segments:new o.SegmentVector([Vt]),sortKey:Vt.sortKey,state:zt})}else et.push({segments:Mt.segments,sortKey:0,state:zt})}}ce&&et.sort(function(xr,Er){return xr.sortKey-Er.sortKey});for(var Nt=0,fn=et;Nt<fn.length;Nt+=1){var gn=fn[Nt],kn=gn.state,Pn=kn.programConfiguration,Nn=kn.program,nr=kn.layoutVertexBuffer,cr=kn.indexBuffer,qn=kn.uniformValues,sr=gn.segments;Nn.draw(xe,Ce.TRIANGLES,ze,Ue,He,Ne.disabled,qn,H.id,nr,cr,sr,H.paint,B.transform.zoom,Pn)}}}},heatmap:function(B,G,H,L){if(H.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var V=B.context,$=V.gl,ne=qe.disabled,ce=new Ye([$.ONE,$.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ft,xt,Mt){var _t=ft.gl;ft.activeTexture.set(_t.TEXTURE1),ft.viewport.set([0,0,xt.width/4,xt.height/4]);var zt=Mt.heatmapFbo;if(zt)_t.bindTexture(_t.TEXTURE_2D,zt.colorAttachment.get()),ft.bindFramebuffer.set(zt.framebuffer);else{var Et=_t.createTexture();_t.bindTexture(_t.TEXTURE_2D,Et),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_S,_t.CLAMP_TO_EDGE),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_WRAP_T,_t.CLAMP_TO_EDGE),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MIN_FILTER,_t.LINEAR),_t.texParameteri(_t.TEXTURE_2D,_t.TEXTURE_MAG_FILTER,_t.LINEAR),zt=Mt.heatmapFbo=ft.createFramebuffer(xt.width/4,xt.height/4,!1),function(Yt,Vt,Nt,fn){var gn=Yt.gl,kn=Yt.extRenderToTextureHalfFloat?Yt.extTextureHalfFloat.HALF_FLOAT_OES:gn.UNSIGNED_BYTE;gn.texImage2D(gn.TEXTURE_2D,0,gn.RGBA,Vt.width/4,Vt.height/4,0,gn.RGBA,kn,null),fn.colorAttachment.set(Nt)}(ft,xt,Et,zt)}})(V,B,H),V.clear({color:o.Color.transparent});for(var xe=0;xe<L.length;xe++){var Ce=L[xe];if(!G.hasRenderableParent(Ce)){var ze=G.getTile(Ce),Ue=ze.getBucket(H);if(Ue){var He=Ue.programConfigurations.get(H.id),et=B.useProgram("heatmap",He),lt=B.transform.zoom;et.draw(V,$.TRIANGLES,It.disabled,ne,ce,Ne.disabled,Sl(Ce.posMatrix,ze,lt,H.paint.get("heatmap-intensity")),H.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,H.paint,B.transform.zoom,He)}}}V.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(ft,xt){var Mt=ft.context,_t=Mt.gl,zt=xt.heatmapFbo;if(zt){Mt.activeTexture.set(_t.TEXTURE0),_t.bindTexture(_t.TEXTURE_2D,zt.colorAttachment.get()),Mt.activeTexture.set(_t.TEXTURE1);var Et=xt.colorRampTexture;Et||(Et=xt.colorRampTexture=new o.Texture(Mt,xt.colorRamp,_t.RGBA)),Et.bind(_t.LINEAR,_t.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(Mt,_t.TRIANGLES,It.disabled,qe.disabled,ft.colorModeForRenderPass(),Ne.disabled,jl(ft,xt,0,1),xt.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,xt.paint,ft.transform.zoom)}}(B,H))},line:function(B,G,H,L){if(B.renderPass==="translucent"){var V=H.paint.get("line-opacity"),$=H.paint.get("line-width");if(V.constantOr(1)!==0&&$.constantOr(1)!==0)for(var ne=B.depthModeForSublayer(0,It.ReadOnly),ce=B.colorModeForRenderPass(),xe=H.paint.get("line-dasharray"),Ce=H.paint.get("line-pattern"),ze=Ce.constantOr(1),Ue=H.paint.get("line-gradient"),He=H.getCrossfadeParameters(),et=ze?"linePattern":xe?"lineSDF":Ue?"lineGradient":"line",lt=B.context,ft=lt.gl,xt=!0,Mt=0,_t=L;Mt<_t.length;Mt+=1){var zt=_t[Mt],Et=G.getTile(zt);if(!ze||Et.patternsLoaded()){var Yt=Et.getBucket(H);if(Yt){var Vt=Yt.programConfigurations.get(H.id),Nt=B.context.program.get(),fn=B.useProgram(et,Vt),gn=xt||fn.program!==Nt,kn=Ce.constantOr(null);if(kn&&Et.imageAtlas){var Pn=Et.imageAtlas,Nn=Pn.patternPositions[kn.to.toString()],nr=Pn.patternPositions[kn.from.toString()];Nn&&nr&&Vt.setConstantPatternPositions(Nn,nr)}var cr=ze?is(B,Et,H,He):xe?Os(B,Et,H,xe,He):Ue?gs(B,Et,H,Yt.lineClipsArray.length):co(B,Et,H);if(ze)lt.activeTexture.set(ft.TEXTURE0),Et.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Vt.updatePaintBuffers(He);else if(xe&&(gn||B.lineAtlas.dirty))lt.activeTexture.set(ft.TEXTURE0),B.lineAtlas.bind(lt);else if(Ue){var qn=Yt.gradients[H.id],sr=qn.texture;if(H.gradientVersion!==qn.version){var xr=256;if(H.stepInterpolant){var Er=G.getSource().maxzoom,Qn=zt.canonical.z===Er?Math.ceil(1<<B.transform.maxZoom-zt.canonical.z):1,or=Yt.maxLineLength/o.EXTENT*1024*Qn;xr=o.clamp(o.nextPowerOfTwo(or),256,lt.maxTextureSize)}qn.gradient=o.renderColorRamp({expression:H.gradientExpression(),evaluationKey:"lineProgress",resolution:xr,image:qn.gradient||void 0,clips:Yt.lineClipsArray}),qn.texture?qn.texture.update(qn.gradient):qn.texture=new o.Texture(lt,qn.gradient,ft.RGBA),qn.version=H.gradientVersion,sr=qn.texture}lt.activeTexture.set(ft.TEXTURE0),sr.bind(H.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}fn.draw(lt,ft.TRIANGLES,ne,B.stencilModeForClipping(zt),ce,Ne.disabled,cr,H.id,Yt.layoutVertexBuffer,Yt.indexBuffer,Yt.segments,H.paint,B.transform.zoom,Vt,Yt.layoutVertexBuffer2),xt=!1}}}}},fill:function(B,G,H,L){var V=H.paint.get("fill-color"),$=H.paint.get("fill-opacity");if($.constantOr(1)!==0){var ne=B.colorModeForRenderPass(),ce=H.paint.get("fill-pattern"),xe=B.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&V.constantOr(o.Color.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===xe){var Ce=B.depthModeForSublayer(1,B.renderPass==="opaque"?It.ReadWrite:It.ReadOnly);Ao(B,G,H,L,Ce,ne,!1)}if(B.renderPass==="translucent"&&H.paint.get("fill-antialias")){var ze=B.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly);Ao(B,G,H,L,ze,ne,!0)}}},"fill-extrusion":function(B,G,H,L){var V=H.paint.get("fill-extrusion-opacity");if(V!==0&&B.renderPass==="translucent"){var $=new It(B.context.gl.LEQUAL,It.ReadWrite,B.depthRangeFor3D);if(V!==1||H.paint.get("fill-extrusion-pattern").constantOr(1))Wa(B,G,H,L,$,qe.disabled,Ye.disabled),Wa(B,G,H,L,$,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var ne=B.colorModeForRenderPass();Wa(B,G,H,L,$,qe.disabled,ne)}}},hillshade:function(B,G,H,L){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var V=B.context,$=B.depthModeForSublayer(0,It.ReadOnly),ne=B.colorModeForRenderPass(),ce=B.renderPass==="translucent"?B.stencilConfigForOverlap(L):[{},L],xe=ce[0],Ce=0,ze=ce[1];Ce<ze.length;Ce+=1){var Ue=ze[Ce],He=G.getTile(Ue);He.needsHillshadePrepare&&B.renderPass==="offscreen"?Ll(B,He,H,$,qe.disabled,ne):B.renderPass==="translucent"&&ys(B,He,H,$,xe[Ue.overscaledZ],ne)}V.viewport.set([0,0,B.width,B.height])}},raster:function(B,G,H,L){if(B.renderPass==="translucent"&&H.paint.get("raster-opacity")!==0&&L.length)for(var V=B.context,$=V.gl,ne=G.getSource(),ce=B.useProgram("raster"),xe=B.colorModeForRenderPass(),Ce=ne instanceof F?[{},L]:B.stencilConfigForOverlap(L),ze=Ce[0],Ue=Ce[1],He=Ue[Ue.length-1].overscaledZ,et=!B.options.moving,lt=0,ft=Ue;lt<ft.length;lt+=1){var xt=ft[lt],Mt=B.depthModeForSublayer(xt.overscaledZ-He,H.paint.get("raster-opacity")===1?It.ReadWrite:It.ReadOnly,$.LESS),_t=G.getTile(xt),zt=B.transform.calculatePosMatrix(xt.toUnwrapped(),et);_t.registerFadeDuration(H.paint.get("raster-fade-duration"));var Et=G.findLoadedParent(xt,0),Yt=Ds(_t,Et,G,H,B.transform),Vt=void 0,Nt=void 0,fn=H.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;V.activeTexture.set($.TEXTURE0),_t.texture.bind(fn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),V.activeTexture.set($.TEXTURE1),Et?(Et.texture.bind(fn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Vt=Math.pow(2,Et.tileID.overscaledZ-_t.tileID.overscaledZ),Nt=[_t.tileID.canonical.x*Vt%1,_t.tileID.canonical.y*Vt%1]):_t.texture.bind(fn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST);var gn=pl(zt,Nt||[0,0],Vt||1,Yt,H);ne instanceof F?ce.draw(V,$.TRIANGLES,Mt,qe.disabled,xe,Ne.disabled,gn,H.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):ce.draw(V,$.TRIANGLES,Mt,ze[xt.overscaledZ],xe,Ne.disabled,gn,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,G,H){var L=H.paint.get("background-color"),V=H.paint.get("background-opacity");if(V!==0){var $=B.context,ne=$.gl,ce=B.transform,xe=ce.tileSize,Ce=H.paint.get("background-pattern");if(!B.isPatternMissing(Ce)){var ze=!Ce&&L.a===1&&V===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===ze){var Ue=qe.disabled,He=B.depthModeForSublayer(0,ze==="opaque"?It.ReadWrite:It.ReadOnly),et=B.colorModeForRenderPass(),lt=B.useProgram(Ce?"backgroundPattern":"background"),ft=ce.coveringTiles({tileSize:xe});Ce&&($.activeTexture.set(ne.TEXTURE0),B.imageManager.bind(B.context));for(var xt=H.getCrossfadeParameters(),Mt=0,_t=ft;Mt<_t.length;Mt+=1){var zt=_t[Mt],Et=B.transform.calculatePosMatrix(zt.toUnwrapped()),Yt=Ce?Vl(Et,V,B,Ce,{tileID:zt,tileSize:xe},xt):ms(Et,V,L);lt.draw($,ne.TRIANGLES,He,Ue,et,Ne.disabled,Yt,H.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,G,H){for(var L=0;L<H.length;L++)zs(B,G,H[L])},custom:function(B,G,H){var L=B.context,V=H.implementation;if(B.renderPass==="offscreen"){var $=V.prerender;$&&(B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),$.call(V,L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),L.setStencilMode(qe.disabled);var ne=V.renderingMode==="3d"?new It(B.context.gl.LEQUAL,It.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,It.ReadOnly);L.setDepthMode(ne),V.render(L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState(),L.bindFramebuffer.set(null)}}},ri=function(B,G){this.context=new We(B),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new On,this.gpuTimers={}};ri.prototype.resize=function(B,G){if(this.width=B*o.browser.devicePixelRatio,this.height=G*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,L=this.style._order;H<L.length;H+=1){var V=L[H];this.style._layers[V].resize()}},ri.prototype.setup=function(){var B=this.context,G=new o.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(o.EXTENT,0),G.emplaceBack(0,o.EXTENT),G.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=B.createVertexBuffer(G,Jn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var H=new o.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(o.EXTENT,0),H.emplaceBack(0,o.EXTENT),H.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=B.createVertexBuffer(H,Jn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var L=new o.StructArrayLayout4i8;L.emplaceBack(0,0,0,0),L.emplaceBack(o.EXTENT,0,o.EXTENT,0),L.emplaceBack(0,o.EXTENT,0,o.EXTENT),L.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(L,W.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var V=new o.StructArrayLayout2i4;V.emplaceBack(0,0),V.emplaceBack(1,0),V.emplaceBack(0,1),V.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(V,Jn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var $=new o.StructArrayLayout1ui2;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer($);var ne=new o.StructArrayLayout3ui6;ne.emplaceBack(0,1,2),ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(ne),this.emptyTexture=new o.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var ce=this.context.gl;this.stencilClearMode=new qe({func:ce.ALWAYS,mask:0},0,255,ce.ZERO,ce.ZERO,ce.ZERO)},ri.prototype.clearStencil=function(){var B=this.context,G=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=o.create();o.ortho(H,0,this.width,this.height,0,0,1),o.scale(H,H,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,G.TRIANGLES,It.disabled,this.stencilClearMode,Ye.disabled,Ne.disabled,ns(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ri.prototype._renderTileClippingMasks=function(B,G){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&G&&G.length){this.currentStencilSource=B.source;var H=this.context,L=H.gl;this.nextStencilID+G.length>256&&this.clearStencil(),H.setColorMode(Ye.disabled),H.setDepthMode(It.disabled);var V=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var $=0,ne=G;$<ne.length;$+=1){var ce=ne[$],xe=this._tileClippingMaskIDs[ce.key]=this.nextStencilID++;V.draw(H,L.TRIANGLES,It.disabled,new qe({func:L.ALWAYS,mask:0},xe,255,L.KEEP,L.KEEP,L.REPLACE),Ye.disabled,Ne.disabled,ns(ce.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ri.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,G=this.context.gl;return new qe({func:G.NOTEQUAL,mask:255},B,255,G.KEEP,G.KEEP,G.REPLACE)},ri.prototype.stencilModeForClipping=function(B){var G=this.context.gl;return new qe({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,G.KEEP,G.KEEP,G.REPLACE)},ri.prototype.stencilConfigForOverlap=function(B){var G,H=this.context.gl,L=B.sort(function(xe,Ce){return Ce.overscaledZ-xe.overscaledZ}),V=L[L.length-1].overscaledZ,$=L[0].overscaledZ-V+1;if($>1){this.currentStencilSource=void 0,this.nextStencilID+$>256&&this.clearStencil();for(var ne={},ce=0;ce<$;ce++)ne[ce+V]=new qe({func:H.GEQUAL,mask:255},ce+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=$,[ne,L]}return[(G={},G[V]=qe.disabled,G),L]},ri.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new Ye([B.CONSTANT_COLOR,B.ONE],new o.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ye.unblended:Ye.alphaBlended},ri.prototype.depthModeForSublayer=function(B,G,H){if(!this.opaquePassEnabledForLayer())return It.disabled;var L=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new It(H||this.context.gl.LEQUAL,G,[L,L])},ri.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ri.prototype.render=function(B,G){var H=this;this.style=B,this.options=G,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var L=this.style._order,V=this.style.sourceCaches;for(var $ in V){var ne=V[$];ne.used&&ne.prepare(this.context)}var ce,xe,Ce={},ze={},Ue={};for(var He in V){var et=V[He];Ce[He]=et.getVisibleCoordinates(),ze[He]=Ce[He].slice().reverse(),Ue[He]=et.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var lt=0;lt<L.length;lt++){var ft=L[lt];if(this.style._layers[ft].is3D()){this.opaquePassCutoff=lt;break}}this.renderPass="offscreen";for(var xt=0,Mt=L;xt<Mt.length;xt+=1){var _t=Mt[xt],zt=this.style._layers[_t];if(zt.hasOffscreenPass()&&!zt.isHidden(this.transform.zoom)){var Et=ze[zt.source];(zt.type==="custom"||Et.length)&&this.renderLayer(this,V[zt.source],zt,Et)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){var Yt=this.style._layers[L[this.currentLayer]],Vt=V[Yt.source],Nt=Ce[Yt.source];this._renderTileClippingMasks(Yt,Nt),this.renderLayer(this,Vt,Yt,Nt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){var fn=this.style._layers[L[this.currentLayer]],gn=V[fn.source],kn=(fn.type==="symbol"?Ue:ze)[fn.source];this._renderTileClippingMasks(fn,Ce[fn.source]),this.renderLayer(this,gn,fn,kn)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Pn){Pn.source&&!Pn.isHidden(H.transform.zoom)&&(Pn.source!==(xe&&xe.id)&&(xe=H.style.sourceCaches[Pn.source]),(!ce||ce.getSource().maxzoom<xe.getSource().maxzoom)&&(ce=xe))}),ce&&rl.debug(this,ce,ce.getVisibleCoordinates())),this.options.showPadding&&ss(this),this.context.setDefault()},ri.prototype.renderLayer=function(B,G,H,L){H.isHidden(this.transform.zoom)||(H.type==="background"||H.type==="custom"||L.length)&&(this.id=H.id,this.gpuTimingStart(H),rl[H.type](B,G,H,L,this.style.placement.variableOffsets),this.gpuTimingEnd())},ri.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var G=this.context.extTimerQuery,H=this.gpuTimers[B.id];H||(H=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),H.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,H.query)}},ri.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},ri.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},ri.prototype.queryGpuTimers=function(B){var G={};for(var H in B){var L=B[H],V=this.context.extTimerQuery,$=V.getQueryObjectEXT(L.query,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(L.query),G[H]=$}return G},ri.prototype.translatePosMatrix=function(B,G,H,L,V){if(!H[0]&&!H[1])return B;var $=V?L==="map"?this.transform.angle:0:L==="viewport"?-this.transform.angle:0;if($){var ne=Math.sin($),ce=Math.cos($);H=[H[0]*ce-H[1]*ne,H[0]*ne+H[1]*ce]}var xe=[V?H[0]:Wn(G,H[0],this.transform.zoom),V?H[1]:Wn(G,H[1],this.transform.zoom),0],Ce=new Float32Array(16);return o.translate(Ce,B,xe),Ce},ri.prototype.saveTileTexture=function(B){var G=this._tileTextures[B.size[0]];G?G.push(B):this._tileTextures[B.size[0]]=[B]},ri.prototype.getTileTexture=function(B){var G=this._tileTextures[B];return G&&G.length>0?G.pop():null},ri.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var G=this.imageManager.getPattern(B.from.toString()),H=this.imageManager.getPattern(B.to.toString());return!G||!H},ri.prototype.useProgram=function(B,G){this.cache=this.cache||{};var H=""+B+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new qa(this.context,B,Vi[B],G,Qs[B],this._showOverdrawInspector)),this.cache[H]},ri.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ri.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},ri.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},ri.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Vo=function(B,G){this.points=B,this.planes=G};Vo.fromInvProjectionMatrix=function(B,G,H){var L=Math.pow(2,H),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ne){return o.transformMat4([],ne,B)}).map(function(ne){return o.scale$1([],ne,1/ne[3]/G*L)}),$=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ne){var ce=o.sub([],V[ne[0]],V[ne[1]]),xe=o.sub([],V[ne[2]],V[ne[1]]),Ce=o.normalize([],o.cross([],ce,xe)),ze=-o.dot(Ce,V[ne[1]]);return Ce.concat(ze)});return new Vo(V,$)};var ea=function(B,G){this.min=B,this.max=G,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};ea.prototype.quadrant=function(B){for(var G=[B%2==0,B<2],H=o.clone$2(this.min),L=o.clone$2(this.max),V=0;V<G.length;V++)H[V]=G[V]?this.min[V]:this.center[V],L[V]=G[V]?this.center[V]:this.max[V];return L[2]=this.max[2],new ea(H,L)},ea.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},ea.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},ea.prototype.intersects=function(B){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,L=0;L<B.planes.length;L++){for(var V=B.planes[L],$=0,ne=0;ne<G.length;ne++)$+=o.dot$1(V,G[ne])>=0;if($===0)return 0;$!==G.length&&(H=!1)}if(H)return 2;for(var ce=0;ce<3;ce++){for(var xe=Number.MAX_VALUE,Ce=-Number.MAX_VALUE,ze=0;ze<B.points.length;ze++){var Ue=B.points[ze][ce]-this.min[ce];xe=Math.min(xe,Ue),Ce=Math.max(Ce,Ue)}if(Ce<0||xe>this.max[ce]-this.min[ce])return 0}return 1};var Ya=function(B,G,H,L){if(B===void 0&&(B=0),G===void 0&&(G=0),H===void 0&&(H=0),L===void 0&&(L=0),isNaN(B)||B<0||isNaN(G)||G<0||isNaN(H)||H<0||isNaN(L)||L<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=G,this.left=H,this.right=L};Ya.prototype.interpolate=function(B,G,H){return G.top!=null&&B.top!=null&&(this.top=o.number(B.top,G.top,H)),G.bottom!=null&&B.bottom!=null&&(this.bottom=o.number(B.bottom,G.bottom,H)),G.left!=null&&B.left!=null&&(this.left=o.number(B.left,G.left,H)),G.right!=null&&B.right!=null&&(this.right=o.number(B.right,G.right,H)),this},Ya.prototype.getCenter=function(B,G){var H=o.clamp((this.left+B-this.right)/2,0,B),L=o.clamp((this.top+G-this.bottom)/2,0,G);return new o.Point(H,L)},Ya.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},Ya.prototype.clone=function(){return new Ya(this.top,this.bottom,this.left,this.right)},Ya.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Kr=function(B,G,H,L,V){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=V===void 0||V,this._minZoom=B||0,this._maxZoom=G||22,this._minPitch=H??0,this._maxPitch=L??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ya,this._posMatrixCache={},this._alignedPosMatrixCache={}},ti={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Kr.prototype.clone=function(){var B=new Kr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},ti.minZoom.get=function(){return this._minZoom},ti.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},ti.maxZoom.get=function(){return this._maxZoom},ti.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},ti.minPitch.get=function(){return this._minPitch},ti.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},ti.maxPitch.get=function(){return this._maxPitch},ti.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},ti.renderWorldCopies.get=function(){return this._renderWorldCopies},ti.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},ti.worldSize.get=function(){return this.tileSize*this.scale},ti.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ti.size.get=function(){return new o.Point(this.width,this.height)},ti.bearing.get=function(){return-this.angle/Math.PI*180},ti.bearing.set=function(B){var G=-o.wrap(B,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ti.pitch.get=function(){return this._pitch/Math.PI*180},ti.pitch.set=function(B){var G=o.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},ti.fov.get=function(){return this._fov/Math.PI*180},ti.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},ti.zoom.get=function(){return this._zoom},ti.zoom.set=function(B){var G=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},ti.center.get=function(){return this._center},ti.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},ti.padding.get=function(){return this._edgeInsets.toJSON()},ti.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},ti.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Kr.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},Kr.prototype.interpolatePadding=function(B,G,H){this._unmodified=!1,this._edgeInsets.interpolate(B,G,H),this._constrain(),this._calcMatrices()},Kr.prototype.coveringZoomLevel=function(B){var G=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,G)},Kr.prototype.getVisibleUnwrappedCoordinates=function(B){var G=[new o.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new o.Point(0,0)),L=this.pointCoordinate(new o.Point(this.width,0)),V=this.pointCoordinate(new o.Point(this.width,this.height)),$=this.pointCoordinate(new o.Point(0,this.height)),ne=Math.floor(Math.min(H.x,L.x,V.x,$.x)),ce=Math.floor(Math.max(H.x,L.x,V.x,$.x)),xe=ne-1;xe<=ce+1;xe++)xe!==0&&G.push(new o.UnwrappedTileID(xe,B));return G},Kr.prototype.coveringTiles=function(B){var G=this.coveringZoomLevel(B),H=G;if(B.minzoom!==void 0&&G<B.minzoom)return[];B.maxzoom!==void 0&&G>B.maxzoom&&(G=B.maxzoom);var L=o.MercatorCoordinate.fromLngLat(this.center),V=Math.pow(2,G),$=[V*L.x,V*L.y,0],ne=Vo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),ce=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ce=G);var xe=function(kn){return{aabb:new ea([kn*V,0,0],[(kn+1)*V,V,0]),zoom:0,x:0,y:0,wrap:kn,fullyVisible:!1}},Ce=[],ze=[],Ue=G,He=B.reparseOverscaled?H:G;if(this._renderWorldCopies)for(var et=1;et<=3;et++)Ce.push(xe(-et)),Ce.push(xe(et));for(Ce.push(xe(0));Ce.length>0;){var lt=Ce.pop(),ft=lt.x,xt=lt.y,Mt=lt.fullyVisible;if(!Mt){var _t=lt.aabb.intersects(ne);if(_t===0)continue;Mt=_t===2}var zt=lt.aabb.distanceX($),Et=lt.aabb.distanceY($),Yt=Math.max(Math.abs(zt),Math.abs(Et)),Vt=3+(1<<Ue-lt.zoom)-2;if(lt.zoom===Ue||Yt>Vt&&lt.zoom>=ce)ze.push({tileID:new o.OverscaledTileID(lt.zoom===Ue?He:lt.zoom,lt.wrap,lt.zoom,ft,xt),distanceSq:o.sqrLen([$[0]-.5-ft,$[1]-.5-xt])});else for(var Nt=0;Nt<4;Nt++){var fn=(ft<<1)+Nt%2,gn=(xt<<1)+(Nt>>1);Ce.push({aabb:lt.aabb.quadrant(Nt),zoom:lt.zoom+1,x:fn,y:gn,wrap:lt.wrap,fullyVisible:Mt})}}return ze.sort(function(kn,Pn){return kn.distanceSq-Pn.distanceSq}).map(function(kn){return kn.tileID})},Kr.prototype.resize=function(B,G){this.width=B,this.height=G,this.pixelsToGLUnits=[2/B,-2/G],this._constrain(),this._calcMatrices()},ti.unmodified.get=function(){return this._unmodified},Kr.prototype.zoomScale=function(B){return Math.pow(2,B)},Kr.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},Kr.prototype.project=function(B){var G=o.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(B.lng)*this.worldSize,o.mercatorYfromLat(G)*this.worldSize)},Kr.prototype.unproject=function(B){return new o.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},ti.point.get=function(){return this.project(this.center)},Kr.prototype.setLocationAtPoint=function(B,G){var H=this.pointCoordinate(G),L=this.pointCoordinate(this.centerPoint),V=this.locationCoordinate(B),$=new o.MercatorCoordinate(V.x-(H.x-L.x),V.y-(H.y-L.y));this.center=this.coordinateLocation($),this._renderWorldCopies&&(this.center=this.center.wrap())},Kr.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},Kr.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},Kr.prototype.locationCoordinate=function(B){return o.MercatorCoordinate.fromLngLat(B)},Kr.prototype.coordinateLocation=function(B){return B.toLngLat()},Kr.prototype.pointCoordinate=function(B){var G=[B.x,B.y,0,1],H=[B.x,B.y,1,1];o.transformMat4(G,G,this.pixelMatrixInverse),o.transformMat4(H,H,this.pixelMatrixInverse);var L=G[3],V=H[3],$=G[0]/L,ne=H[0]/V,ce=G[1]/L,xe=H[1]/V,Ce=G[2]/L,ze=H[2]/V,Ue=Ce===ze?0:(0-Ce)/(ze-Ce);return new o.MercatorCoordinate(o.number($,ne,Ue)/this.worldSize,o.number(ce,xe,Ue)/this.worldSize)},Kr.prototype.coordinatePoint=function(B){var G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix),new o.Point(G[0]/G[3],G[1]/G[3])},Kr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Kr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Kr.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Kr.prototype.calculatePosMatrix=function(B,G){G===void 0&&(G=!1);var H=B.key,L=G?this._alignedPosMatrixCache:this._posMatrixCache;if(L[H])return L[H];var V=B.canonical,$=this.worldSize/this.zoomScale(V.z),ne=V.x+Math.pow(2,V.z)*B.wrap,ce=o.identity(new Float64Array(16));return o.translate(ce,ce,[ne*$,V.y*$,0]),o.scale(ce,ce,[$/o.EXTENT,$/o.EXTENT,1]),o.multiply(ce,G?this.alignedProjMatrix:this.projMatrix,ce),L[H]=new Float32Array(ce),L[H]},Kr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Kr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,G,H,L,V=-90,$=90,ne=-180,ce=180,xe=this.size,Ce=this._unmodified;if(this.latRange){var ze=this.latRange;V=o.mercatorYfromLat(ze[1])*this.worldSize,B=($=o.mercatorYfromLat(ze[0])*this.worldSize)-V<xe.y?xe.y/($-V):0}if(this.lngRange){var Ue=this.lngRange;ne=o.mercatorXfromLng(Ue[0])*this.worldSize,G=(ce=o.mercatorXfromLng(Ue[1])*this.worldSize)-ne<xe.x?xe.x/(ce-ne):0}var He=this.point,et=Math.max(G||0,B||0);if(et)return this.center=this.unproject(new o.Point(G?(ce+ne)/2:He.x,B?($+V)/2:He.y)),this.zoom+=this.scaleZoom(et),this._unmodified=Ce,void(this._constraining=!1);if(this.latRange){var lt=He.y,ft=xe.y/2;lt-ft<V&&(L=V+ft),lt+ft>$&&(L=$-ft)}if(this.lngRange){var xt=He.x,Mt=xe.x/2;xt-Mt<ne&&(H=ne+Mt),xt+Mt>ce&&(H=ce-Mt)}H===void 0&&L===void 0||(this.center=this.unproject(new o.Point(H!==void 0?H:He.x,L!==void 0?L:He.y))),this._unmodified=Ce,this._constraining=!1}},Kr.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var H=Math.PI/2+this._pitch,L=this._fov*(.5+G.y/this.height),V=Math.sin(L)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-H-L,.01,Math.PI-.01)),$=this.point,ne=$.x,ce=$.y,xe=1.01*(Math.cos(Math.PI/2-this._pitch)*V+this.cameraToCenterDistance),Ce=this.height/50,ze=new Float64Array(16);o.perspective(ze,this._fov,this.width/this.height,Ce,xe),ze[8]=2*-G.x/this.width,ze[9]=2*G.y/this.height,o.scale(ze,ze,[1,-1,1]),o.translate(ze,ze,[0,0,-this.cameraToCenterDistance]),o.rotateX(ze,ze,this._pitch),o.rotateZ(ze,ze,this.angle),o.translate(ze,ze,[-ne,-ce,0]),this.mercatorMatrix=o.scale([],ze,[this.worldSize,this.worldSize,this.worldSize]),o.scale(ze,ze,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ze,this.invProjMatrix=o.invert([],this.projMatrix);var Ue=this.width%2/2,He=this.height%2/2,et=Math.cos(this.angle),lt=Math.sin(this.angle),ft=ne-Math.round(ne)+et*Ue+lt*He,xt=ce-Math.round(ce)+et*He+lt*Ue,Mt=new Float64Array(ze);if(o.translate(Mt,Mt,[ft>.5?ft-1:ft,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=Mt,ze=o.create(),o.scale(ze,ze,[this.width/2,-this.height/2,1]),o.translate(ze,ze,[1,-1,0]),this.labelPlaneMatrix=ze,ze=o.create(),o.scale(ze,ze,[1,-1,1]),o.translate(ze,ze,[-1,-1,0]),o.scale(ze,ze,[2/this.width,2/this.height,1]),this.glCoordMatrix=ze,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ze=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ze,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Kr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new o.Point(0,0)),G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},Kr.prototype.getCameraPoint=function(){var B=this._pitch,G=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,G))},Kr.prototype.getCameraQueryGeometry=function(B){var G=this.getCameraPoint();if(B.length===1)return[B[0],G];for(var H=G.x,L=G.y,V=G.x,$=G.y,ne=0,ce=B;ne<ce.length;ne+=1){var xe=ce[ne];H=Math.min(H,xe.x),L=Math.min(L,xe.y),V=Math.max(V,xe.x),$=Math.max($,xe.y)}return[new o.Point(H,L),new o.Point(V,L),new o.Point(V,$),new o.Point(H,$),new o.Point(H,L)]},Object.defineProperties(Kr.prototype,ti);var Sa=function(B){var G,H,L,V,$;this._hashName=B&&encodeURIComponent(B),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),H=300,L=!1,V=null,$=function(){V=null,L&&(G(),V=setTimeout($,H),L=!1)},function(){return L=!0,V||$(),V})};Sa.prototype.addTo=function(B){return this._map=B,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Sa.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Sa.prototype.getHashString=function(B){var G=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,L=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),V=Math.pow(10,L),$=Math.round(G.lng*V)/V,ne=Math.round(G.lat*V)/V,ce=this._map.getBearing(),xe=this._map.getPitch(),Ce="";if(Ce+=B?"/"+$+"/"+ne+"/"+H:H+"/"+ne+"/"+$,(ce||xe)&&(Ce+="/"+Math.round(10*ce)/10),xe&&(Ce+="/"+Math.round(xe)),this._hashName){var ze=this._hashName,Ue=!1,He=o.window.location.hash.slice(1).split("&").map(function(et){var lt=et.split("=")[0];return lt===ze?(Ue=!0,lt+"="+Ce):et}).filter(function(et){return et});return Ue||He.push(ze+"="+Ce),"#"+He.join("&")}return"#"+Ce},Sa.prototype._getCurrentHash=function(){var B,G=this,H=o.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function(L){return L.split("=")}).forEach(function(L){L[0]===G._hashName&&(B=L)}),(B&&B[1]||"").split("/")):H.split("/")},Sa.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(H){return isNaN(H)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:G,pitch:+(B[4]||0)}),!0}return!1},Sa.prototype._updateHashUnthrottled=function(){var B=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,B)}catch{}};var _s={linearity:.3,easing:o.bezier(0,0,.3,1)},Rs=o.extend({deceleration:2500,maxSpeed:1400},_s),il=o.extend({deceleration:20,maxSpeed:1400},_s),Fs=o.extend({deceleration:1e3,maxSpeed:360},_s),Bs=o.extend({deceleration:1e3,maxSpeed:90},_s),Da=function(B){this._map=B,this.clear()};function Ho(B,G){(!B.duration||B.duration<G.duration)&&(B.duration=G.duration,B.easing=G.easing)}function qo(B,G,H){var L=H.maxSpeed,V=H.linearity,$=H.deceleration,ne=o.clamp(B*V/(G/1e3),-L,L),ce=Math.abs(ne)/($*V);return{easing:H.easing,duration:1e3*ce,amount:ne*(ce/2)}}Da.prototype.clear=function(){this._inertiaBuffer=[]},Da.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:B})},Da.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,G=o.browser.now();B.length>0&&G-B[0].time>160;)B.shift()},Da.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},H=0,L=this._inertiaBuffer;H<L.length;H+=1){var V=L[H].settings;G.zoom+=V.zoomDelta||0,G.bearing+=V.bearingDelta||0,G.pitch+=V.pitchDelta||0,V.panDelta&&G.pan._add(V.panDelta),V.around&&(G.around=V.around),V.pinchAround&&(G.pinchAround=V.pinchAround)}var $=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ne={};if(G.pan.mag()){var ce=qo(G.pan.mag(),$,o.extend({},Rs,B||{}));ne.offset=G.pan.mult(ce.amount/G.pan.mag()),ne.center=this._map.transform.center,Ho(ne,ce)}if(G.zoom){var xe=qo(G.zoom,$,il);ne.zoom=this._map.transform.zoom+xe.amount,Ho(ne,xe)}if(G.bearing){var Ce=qo(G.bearing,$,Fs);ne.bearing=this._map.transform.bearing+o.clamp(Ce.amount,-179,179),Ho(ne,Ce)}if(G.pitch){var ze=qo(G.pitch,$,Bs);ne.pitch=this._map.transform.pitch+ze.amount,Ho(ne,ze)}if(ne.zoom||ne.bearing){var Ue=G.pinchAround===void 0?G.around:G.pinchAround;ne.around=Ue?this._map.unproject(Ue):this._map.getCenter()}return this.clear(),o.extend(ne,{noMoveStart:!0})}};var oa=function(B){function G(L,V,$,ne){ne===void 0&&(ne={});var ce=b.mousePos(V.getCanvasContainer(),$),xe=V.unproject(ce);B.call(this,L,o.extend({point:ce,lngLat:xe,originalEvent:$},ne)),this._defaultPrevented=!1,this.target=V}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Ns=function(B){function G(L,V,$){var ne=L==="touchend"?$.changedTouches:$.touches,ce=b.touchPos(V.getCanvasContainer(),ne),xe=ce.map(function(Ue){return V.unproject(Ue)}),Ce=ce.reduce(function(Ue,He,et,lt){return Ue.add(He.div(lt.length))},new o.Point(0,0)),ze=V.unproject(Ce);B.call(this,L,{points:ce,point:Ce,lngLats:xe,lngLat:ze,originalEvent:$}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),za=function(B){function G(L,V,$){B.call(this,L,{originalEvent:$}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Hi=function(B,G){this._map=B,this._clickTolerance=G.clickTolerance};Hi.prototype.reset=function(){delete this._mousedownPos},Hi.prototype.wheel=function(B){return this._firePreventable(new za(B.type,this._map,B))},Hi.prototype.mousedown=function(B,G){return this._mousedownPos=G,this._firePreventable(new oa(B.type,this._map,B))},Hi.prototype.mouseup=function(B){this._map.fire(new oa(B.type,this._map,B))},Hi.prototype.click=function(B,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new oa(B.type,this._map,B))},Hi.prototype.dblclick=function(B){return this._firePreventable(new oa(B.type,this._map,B))},Hi.prototype.mouseover=function(B){this._map.fire(new oa(B.type,this._map,B))},Hi.prototype.mouseout=function(B){this._map.fire(new oa(B.type,this._map,B))},Hi.prototype.touchstart=function(B){return this._firePreventable(new Ns(B.type,this._map,B))},Hi.prototype.touchmove=function(B){this._map.fire(new Ns(B.type,this._map,B))},Hi.prototype.touchend=function(B){this._map.fire(new Ns(B.type,this._map,B))},Hi.prototype.touchcancel=function(B){this._map.fire(new Ns(B.type,this._map,B))},Hi.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},Hi.prototype.isEnabled=function(){return!0},Hi.prototype.isActive=function(){return!1},Hi.prototype.enable=function(){},Hi.prototype.disable=function(){};var Zi=function(B){this._map=B};Zi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Zi.prototype.mousemove=function(B){this._map.fire(new oa(B.type,this._map,B))},Zi.prototype.mousedown=function(){this._delayContextMenu=!0},Zi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new oa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Zi.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new oa(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},Zi.prototype.isEnabled=function(){return!0},Zi.prototype.isActive=function(){return!1},Zi.prototype.enable=function(){},Zi.prototype.disable=function(){};var ui=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=G.clickTolerance||1};function Xi(B,G){for(var H={},L=0;L<B.length;L++)H[B[L].identifier]=G[L];return H}ui.prototype.isEnabled=function(){return!!this._enabled},ui.prototype.isActive=function(){return!!this._active},ui.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ui.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ui.prototype.mousedown=function(B,G){this.isEnabled()&&B.shiftKey&&B.button===0&&(b.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},ui.prototype.mousemoveWindow=function(B,G){if(this._active){var H=G;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var L=this._startPos;this._lastPos=H,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var V=Math.min(L.x,H.x),$=Math.max(L.x,H.x),ne=Math.min(L.y,H.y),ce=Math.max(L.y,H.y);b.setTransform(this._box,"translate("+V+"px,"+ne+"px)"),this._box.style.width=$-V+"px",this._box.style.height=ce-ne+"px"}}},ui.prototype.mouseupWindow=function(B,G){var H=this;if(this._active&&B.button===0){var L=this._startPos,V=G;if(this.reset(),b.suppressClick(),L.x!==V.x||L.y!==V.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function($){return $.fitScreenCoordinates(L,V,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},ui.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},ui.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},ui.prototype._fireEvent=function(B,G){return this._map.fire(new o.Event(B,{originalEvent:G}))};var uo=function(B){this.reset(),this.numTouches=B.numTouches};uo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},uo.prototype.touchstart=function(B,G,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),H.length===this.numTouches&&(this.centroid=function(L){for(var V=new o.Point(0,0),$=0,ne=L;$<ne.length;$+=1){var ce=ne[$];V._add(ce)}return V.div(L.length)}(G),this.touches=Xi(H,G)))},uo.prototype.touchmove=function(B,G,H){if(!this.aborted&&this.centroid){var L=Xi(H,G);for(var V in this.touches){var $=this.touches[V],ne=L[V];(!ne||ne.dist($)>30)&&(this.aborted=!0)}}},uo.prototype.touchend=function(B,G,H){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),H.length===0){var L=!this.aborted&&this.centroid;if(this.reset(),L)return L}};var us=function(B){this.singleTap=new uo(B),this.numTaps=B.numTaps,this.reset()};us.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},us.prototype.touchstart=function(B,G,H){this.singleTap.touchstart(B,G,H)},us.prototype.touchmove=function(B,G,H){this.singleTap.touchmove(B,G,H)},us.prototype.touchend=function(B,G,H){var L=this.singleTap.touchend(B,G,H);if(L){var V=B.timeStamp-this.lastTime<500,$=!this.lastTap||this.lastTap.dist(L)<30;if(V&&$||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=L,this.count===this.numTaps)return this.reset(),L}};var Za=function(){this._zoomIn=new us({numTouches:1,numTaps:2}),this._zoomOut=new us({numTouches:2,numTaps:1}),this.reset()};Za.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Za.prototype.touchstart=function(B,G,H){this._zoomIn.touchstart(B,G,H),this._zoomOut.touchstart(B,G,H)},Za.prototype.touchmove=function(B,G,H){this._zoomIn.touchmove(B,G,H),this._zoomOut.touchmove(B,G,H)},Za.prototype.touchend=function(B,G,H){var L=this,V=this._zoomIn.touchend(B,G,H),$=this._zoomOut.touchend(B,G,H);return V?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(V)},{originalEvent:B})}}):$?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject($)},{originalEvent:B})}}):void 0},Za.prototype.touchcancel=function(){this.reset()},Za.prototype.enable=function(){this._enabled=!0},Za.prototype.disable=function(){this._enabled=!1,this.reset()},Za.prototype.isEnabled=function(){return this._enabled},Za.prototype.isActive=function(){return this._active};var Go={};Go[0]=1,Go[2]=2;var ha=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};ha.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ha.prototype._correctButton=function(B,G){return!1},ha.prototype._move=function(B,G){return{}},ha.prototype.mousedown=function(B,G){if(!this._lastPoint){var H=b.mouseButton(B);this._correctButton(B,H)&&(this._lastPoint=G,this._eventButton=H)}},ha.prototype.mousemoveWindow=function(B,G){var H=this._lastPoint;if(H){if(B.preventDefault(),function(L,V){var $=Go[V];return L.buttons===void 0||(L.buttons&$)!==$}(B,this._eventButton))this.reset();else if(this._moved||!(G.dist(H)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(H,G)}},ha.prototype.mouseupWindow=function(B){this._lastPoint&&b.mouseButton(B)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var fs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(H,L){B.prototype.mousedown.call(this,H,L),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(H,L){return L===0&&!H.ctrlKey},G.prototype._move=function(H,L){return{around:L,panDelta:L.sub(H)}},G}(ha),Mo=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,L){return L===0&&H.ctrlKey||L===2},G.prototype._move=function(H,L){var V=.8*(L.x-H.x);if(V)return this._active=!0,{bearingDelta:V}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(ha),Ra=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,L){return L===0&&H.ctrlKey||L===2},G.prototype._move=function(H,L){var V=-.5*(L.y-H.y);if(V)return this._active=!0,{pitchDelta:V}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(ha),Fa=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};Fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Fa.prototype.touchstart=function(B,G,H){return this._calculateTransform(B,G,H)},Fa.prototype.touchmove=function(B,G,H){if(this._active&&!(H.length<this._minTouches))return B.preventDefault(),this._calculateTransform(B,G,H)},Fa.prototype.touchend=function(B,G,H){this._calculateTransform(B,G,H),this._active&&H.length<this._minTouches&&this.reset()},Fa.prototype.touchcancel=function(){this.reset()},Fa.prototype._calculateTransform=function(B,G,H){H.length>0&&(this._active=!0);var L=Xi(H,G),V=new o.Point(0,0),$=new o.Point(0,0),ne=0;for(var ce in L){var xe=L[ce],Ce=this._touches[ce];Ce&&(V._add(xe),$._add(xe.sub(Ce)),ne++,L[ce]=xe)}if(this._touches=L,!(ne<this._minTouches)&&$.mag()){var ze=$.div(ne);if(this._sum._add(ze),!(this._sum.mag()<this._clickTolerance))return{around:V.div(ne),panDelta:ze}}},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active};var pi=function(){this.reset()};function Xa(B,G,H){for(var L=0;L<B.length;L++)if(B[L].identifier===H)return G[L]}pi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},pi.prototype._start=function(B){},pi.prototype._move=function(B,G,H){return{}},pi.prototype.touchstart=function(B,G,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([G[0],G[1]]))},pi.prototype.touchmove=function(B,G,H){if(this._firstTwoTouches){B.preventDefault();var L=this._firstTwoTouches,V=L[0],$=L[1],ne=Xa(H,G,V),ce=Xa(H,G,$);if(ne&&ce){var xe=this._aroundCenter?null:ne.add(ce).div(2);return this._move([ne,ce],xe,B)}}},pi.prototype.touchend=function(B,G,H){if(this._firstTwoTouches){var L=this._firstTwoTouches,V=L[0],$=L[1],ne=Xa(H,G,V),ce=Xa(H,G,$);ne&&ce||(this._active&&b.suppressClick(),this.reset())}},pi.prototype.touchcancel=function(){this.reset()},pi.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},pi.prototype.disable=function(){this._enabled=!1,this.reset()},pi.prototype.isEnabled=function(){return this._enabled},pi.prototype.isActive=function(){return this._active};function kr(B,G){return Math.log(B/G)/Math.LN2}var js=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},G.prototype._move=function(H,L){var V=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(kr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:kr(this._distance,V),pinchAround:L}},G}(pi);function dl(B,G){return 180*B.angleWith(G)/Math.PI}var Wo=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},G.prototype._move=function(H,L){var V=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:dl(this._vector,V),pinchAround:L}},G.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var L=25/(Math.PI*this._minDiameter)*360,V=dl(H,this._startVector);return Math.abs(V)<L},G}(pi);function Yo(B){return Math.abs(B.y)>Math.abs(B.x)}var hs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(H){this._lastPoints=H,Yo(H[0].sub(H[1]))&&(this._valid=!1)},G.prototype._move=function(H,L,V){var $=H[0].sub(this._lastPoints[0]),ne=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically($,ne,V.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:($.y+ne.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(H,L,V){if(this._valid!==void 0)return this._valid;var $=H.mag()>=2,ne=L.mag()>=2;if($||ne){if(!$||!ne)return this._firstMove===void 0&&(this._firstMove=V),V-this._firstMove<100&&void 0;var ce=H.y>0==L.y>0;return Yo(H)&&Yo(L)&&ce}},G}(pi),ws={panStep:100,bearingStep:15,pitchStep:10},yr=function(){var B=ws;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep,this._rotationDisabled=!1};function Us(B){return B*(2-B)}yr.prototype.reset=function(){this._active=!1},yr.prototype.keydown=function(B){var G=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var H=0,L=0,V=0,$=0,ne=0;switch(B.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:B.shiftKey?L=-1:(B.preventDefault(),$=-1);break;case 39:B.shiftKey?L=1:(B.preventDefault(),$=1);break;case 38:B.shiftKey?V=1:(B.preventDefault(),ne=-1);break;case 40:B.shiftKey?V=-1:(B.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(L=0,V=0),{cameraAnimation:function(ce){var xe=ce.getZoom();ce.easeTo({duration:300,easeId:"keyboardHandler",easing:Us,zoom:H?Math.round(xe)+H*(B.shiftKey?2:1):xe,bearing:ce.getBearing()+L*G._bearingStep,pitch:ce.getPitch()+V*G._pitchStep,offset:[-$*G._panStep,-ne*G._panStep],center:ce.getCenter()},{originalEvent:B})}}}},yr.prototype.enable=function(){this._enabled=!0},yr.prototype.disable=function(){this._enabled=!1,this.reset()},yr.prototype.isEnabled=function(){return this._enabled},yr.prototype.isActive=function(){return this._active},yr.prototype.disableRotation=function(){this._rotationDisabled=!0},yr.prototype.enableRotation=function(){this._rotationDisabled=!1};var So=4.000244140625,qi=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)};qi.prototype.setZoomRate=function(B){this._defaultZoomRate=B},qi.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},qi.prototype.isEnabled=function(){return!!this._enabled},qi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},qi.prototype.isZooming=function(){return!!this._zooming},qi.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},qi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},qi.prototype.wheel=function(B){if(this.isEnabled()){var G=B.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,H=o.browser.now(),L=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,G!==0&&G%So==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":L>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(L*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),B.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=B,this._delta-=G,this._active||this._start(B)),B.preventDefault()}},qi.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},qi.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=b.mousePos(this._el,B);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},qi.prototype.renderFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var H=this._type==="wheel"&&Math.abs(this._delta)>So?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&L!==0&&(L=1/L);var V=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(V*L))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var $,ne=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,ce=this._startZoom,xe=this._easing,Ce=!1;if(this._type==="wheel"&&ce&&xe){var ze=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Ue=xe(ze);$=o.number(ce,ne,Ue),ze<1?this._frameId||(this._frameId=!0):Ce=!0}else $=ne,Ce=!0;return this._active=!0,Ce&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ce,zoomDelta:$-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},qi.prototype._smoothOutEasing=function(B){var G=o.ease;if(this._prevEase){var H=this._prevEase,L=(o.browser.now()-H.start)/H.duration,V=H.easing(L+.01)-H.easing(L),$=.27/Math.sqrt(V*V+1e-4)*.01,ne=Math.sqrt(.0729-$*$);G=o.bezier($,ne,.25,1)}return this._prevEase={start:o.browser.now(),duration:B,easing:G},G},qi.prototype.reset=function(){this._active=!1};var Zo=function(B,G){this._clickZoom=B,this._tapZoom=G};Zo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Zo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Zo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Zo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ka=function(){this.reset()};Ka.prototype.reset=function(){this._active=!1},Ka.prototype.dblclick=function(B,G){return B.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(B.shiftKey?-1:1),around:H.unproject(G)},{originalEvent:B})}}},Ka.prototype.enable=function(){this._enabled=!0},Ka.prototype.disable=function(){this._enabled=!1,this.reset()},Ka.prototype.isEnabled=function(){return this._enabled},Ka.prototype.isActive=function(){return this._active};var Ba=function(){this._tap=new us({numTouches:1,numTaps:1}),this.reset()};Ba.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ba.prototype.touchstart=function(B,G,H){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=G[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(B,G,H))},Ba.prototype.touchmove=function(B,G,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var L=G[0],V=L.y-this._swipePoint.y;return this._swipePoint=L,B.preventDefault(),this._active=!0,{zoomDelta:V/128}}}else this._tap.touchmove(B,G,H)},Ba.prototype.touchend=function(B,G,H){this._tapTime?this._swipePoint&&H.length===0&&this.reset():this._tap.touchend(B,G,H)&&(this._tapTime=B.timeStamp)},Ba.prototype.touchcancel=function(){this.reset()},Ba.prototype.enable=function(){this._enabled=!0},Ba.prototype.disable=function(){this._enabled=!1,this.reset()},Ba.prototype.isEnabled=function(){return this._enabled},Ba.prototype.isActive=function(){return this._active};var sa=function(B,G,H){this._el=B,this._mousePan=G,this._touchPan=H};sa.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},sa.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},sa.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},sa.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var fo=function(B,G,H){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=G,this._mousePitch=H};fo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},fo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},fo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},fo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Na=function(B,G,H,L){this._el=B,this._touchZoom=G,this._touchRotate=H,this._tapDragZoom=L,this._rotationDisabled=!1,this._enabled=!0};Na.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Na.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Na.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Na.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Na.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Na.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Eo=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Vs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G}(o.Event);function Xo(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var Zr=function(B,G){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Da(B),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),o.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!0}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[o.window,"blur",void 0]];for(var L=0,V=this._listeners;L<V.length;L+=1){var $=V[L],ne=$[0],ce=$[1],xe=$[2];b.addEventListener(ne,ce,ne===o.window.document?this.handleWindowEvent:this.handleEvent,xe)}};Zr.prototype.destroy=function(){for(var B=0,G=this._listeners;B<G.length;B+=1){var H=G[B],L=H[0],V=H[1],$=H[2];b.removeEventListener(L,V,L===o.window.document?this.handleWindowEvent:this.handleEvent,$)}},Zr.prototype._addDefaultHandlers=function(B){var G=this._map,H=G.getCanvasContainer();this._add("mapEvent",new Hi(G,B));var L=G.boxZoom=new ui(G,B);this._add("boxZoom",L);var V=new Za,$=new Ka;G.doubleClickZoom=new Zo($,V),this._add("tapZoom",V),this._add("clickZoom",$);var ne=new Ba;this._add("tapDragZoom",ne);var ce=G.touchPitch=new hs;this._add("touchPitch",ce);var xe=new Mo(B),Ce=new Ra(B);G.dragRotate=new fo(B,xe,Ce),this._add("mouseRotate",xe,["mousePitch"]),this._add("mousePitch",Ce,["mouseRotate"]);var ze=new fs(B),Ue=new Fa(B);G.dragPan=new sa(H,ze,Ue),this._add("mousePan",ze),this._add("touchPan",Ue,["touchZoom","touchRotate"]);var He=new Wo,et=new js;G.touchZoomRotate=new Na(H,et,He,ne),this._add("touchRotate",He,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]);var lt=G.scrollZoom=new qi(G,this);this._add("scrollZoom",lt,["mousePan"]);var ft=G.keyboard=new yr;this._add("keyboard",ft),this._add("blockableMapEvent",new Zi(G));for(var xt=0,Mt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];xt<Mt.length;xt+=1){var _t=Mt[xt];B.interactive&&B[_t]&&G[_t].enable(B[_t])}},Zr.prototype._add=function(B,G,H){this._handlers.push({handlerName:B,handler:G,allowed:H}),this._handlersById[B]=G},Zr.prototype.stop=function(B){if(!this._updatingCamera){for(var G=0,H=this._handlers;G<H.length;G+=1)H[G].handler.reset();this._inertia.clear(),this._fireEvents({},{},B),this._changes=[]}},Zr.prototype.isActive=function(){for(var B=0,G=this._handlers;B<G.length;B+=1)if(G[B].handler.isActive())return!0;return!1},Zr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Zr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Zr.prototype.isMoving=function(){return!!Eo(this._eventsInProgress)||this.isZooming()},Zr.prototype._blockedByActive=function(B,G,H){for(var L in B)if(L!==H&&(!G||G.indexOf(L)<0))return!0;return!1},Zr.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},Zr.prototype._getMapTouches=function(B){for(var G=[],H=0,L=B;H<L.length;H+=1){var V=L[H],$=V.target;this._el.contains($)&&G.push(V)}return G},Zr.prototype.handleEvent=function(B,G){if(B.type!=="blur"){this._updatingCamera=!0;for(var H=B.type==="renderFrame"?void 0:B,L={needsRenderFrame:!1},V={},$={},ne=B.touches?this._getMapTouches(B.touches):void 0,ce=ne?b.touchPos(this._el,ne):b.mousePos(this._el,B),xe=0,Ce=this._handlers;xe<Ce.length;xe+=1){var ze=Ce[xe],Ue=ze.handlerName,He=ze.handler,et=ze.allowed;if(He.isEnabled()){var lt=void 0;this._blockedByActive($,et,Ue)?He.reset():He[G||B.type]&&(lt=He[G||B.type](B,ce,ne),this.mergeHandlerResult(L,V,lt,Ue,H),lt&&lt.needsRenderFrame&&this._triggerRenderFrame()),(lt||He.isActive())&&($[Ue]=He)}}var ft={};for(var xt in this._previousActiveHandlers)$[xt]||(ft[xt]=H);this._previousActiveHandlers=$,(Object.keys(ft).length||Xo(L))&&(this._changes.push([L,V,ft]),this._triggerRenderFrame()),(Object.keys($).length||Xo(L))&&this._map._stop(!0),this._updatingCamera=!1;var Mt=L.cameraAnimation;Mt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Mt(this._map))}else this.stop(!0)},Zr.prototype.mergeHandlerResult=function(B,G,H,L,V){if(H){o.extend(B,H);var $={handlerName:L,originalEvent:H.originalEvent||V};H.zoomDelta!==void 0&&(G.zoom=$),H.panDelta!==void 0&&(G.drag=$),H.pitchDelta!==void 0&&(G.pitch=$),H.bearingDelta!==void 0&&(G.rotate=$)}},Zr.prototype._applyChanges=function(){for(var B={},G={},H={},L=0,V=this._changes;L<V.length;L+=1){var $=V[L],ne=$[0],ce=$[1],xe=$[2];ne.panDelta&&(B.panDelta=(B.panDelta||new o.Point(0,0))._add(ne.panDelta)),ne.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+ne.zoomDelta),ne.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+ne.bearingDelta),ne.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+ne.pitchDelta),ne.around!==void 0&&(B.around=ne.around),ne.pinchAround!==void 0&&(B.pinchAround=ne.pinchAround),ne.noInertia&&(B.noInertia=ne.noInertia),o.extend(G,ce),o.extend(H,xe)}this._updateMapTransform(B,G,H),this._changes=[]},Zr.prototype._updateMapTransform=function(B,G,H){var L=this._map,V=L.transform;if(!Xo(B))return this._fireEvents(G,H,!0);var $=B.panDelta,ne=B.zoomDelta,ce=B.bearingDelta,xe=B.pitchDelta,Ce=B.around,ze=B.pinchAround;ze!==void 0&&(Ce=ze),L._stop(!0),Ce=Ce||L.transform.centerPoint;var Ue=V.pointLocation($?Ce.sub($):Ce);ce&&(V.bearing+=ce),xe&&(V.pitch+=xe),ne&&(V.zoom+=ne),V.setLocationAtPoint(Ue,Ce),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents(G,H,!0)},Zr.prototype._fireEvents=function(B,G,H){var L=this,V=Eo(this._eventsInProgress),$=Eo(B),ne={};for(var ce in B){var xe=B[ce].originalEvent;this._eventsInProgress[ce]||(ne[ce+"start"]=xe),this._eventsInProgress[ce]=B[ce]}for(var Ce in!V&&$&&this._fireEvent("movestart",$.originalEvent),ne)this._fireEvent(Ce,ne[Ce]);for(var ze in $&&this._fireEvent("move",$.originalEvent),B){var Ue=B[ze].originalEvent;this._fireEvent(ze,Ue)}var He,et={};for(var lt in this._eventsInProgress){var ft=this._eventsInProgress[lt],xt=ft.handlerName,Mt=ft.originalEvent;this._handlersById[xt].isActive()||(delete this._eventsInProgress[lt],He=G[xt]||Mt,et[lt+"end"]=He)}for(var _t in et)this._fireEvent(_t,et[_t]);var zt=Eo(this._eventsInProgress);if(H&&(V||$)&&!zt){this._updatingCamera=!0;var Et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Yt=function(Vt){return Vt!==0&&-L._bearingSnap<Vt&&Vt<L._bearingSnap};Et?(Yt(Et.bearing||this._map.getBearing())&&(Et.bearing=0),this._map.easeTo(Et,{originalEvent:He})):(this._map.fire(new o.Event("moveend",{originalEvent:He})),Yt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Zr.prototype._fireEvent=function(B,G){this._map.fire(new o.Event(B,G?{originalEvent:G}:{}))},Zr.prototype._requestFrame=function(){var B=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete B._frameId,B.handleEvent(new Vs("renderFrame",{timeStamp:G})),B._applyChanges()})},Zr.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ki=function(B){function G(H,L){B.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=L.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(H,L){return this.jumpTo({center:H},L)},G.prototype.panBy=function(H,L,V){return H=o.Point.convert(H).mult(-1),this.panTo(this.transform.center,o.extend({offset:H},L),V)},G.prototype.panTo=function(H,L,V){return this.easeTo(o.extend({center:H},L),V)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(H,L){return this.jumpTo({zoom:H},L),this},G.prototype.zoomTo=function(H,L,V){return this.easeTo(o.extend({zoom:H},L),V)},G.prototype.zoomIn=function(H,L){return this.zoomTo(this.getZoom()+1,H,L),this},G.prototype.zoomOut=function(H,L){return this.zoomTo(this.getZoom()-1,H,L),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(H,L){return this.jumpTo({bearing:H},L),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(H,L){return this.jumpTo({padding:H},L),this},G.prototype.rotateTo=function(H,L,V){return this.easeTo(o.extend({bearing:H},L),V)},G.prototype.resetNorth=function(H,L){return this.rotateTo(0,o.extend({duration:1e3},H),L),this},G.prototype.resetNorthPitch=function(H,L){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},H),L),this},G.prototype.snapToNorth=function(H,L){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,L):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(H,L){return this.jumpTo({pitch:H},L),this},G.prototype.cameraForBounds=function(H,L){H=o.LngLatBounds.convert(H);var V=L&&L.bearing||0;return this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),V,L)},G.prototype._cameraForBoxAndBearing=function(H,L,V,$){var ne={top:0,bottom:0,right:0,left:0};if(typeof($=o.extend({padding:ne,offset:[0,0],maxZoom:this.transform.maxZoom},$)).padding=="number"){var ce=$.padding;$.padding={top:ce,bottom:ce,right:ce,left:ce}}$.padding=o.extend(ne,$.padding);var xe=this.transform,Ce=xe.padding,ze=xe.project(o.LngLat.convert(H)),Ue=xe.project(o.LngLat.convert(L)),He=ze.rotate(-V*Math.PI/180),et=Ue.rotate(-V*Math.PI/180),lt=new o.Point(Math.max(He.x,et.x),Math.max(He.y,et.y)),ft=new o.Point(Math.min(He.x,et.x),Math.min(He.y,et.y)),xt=lt.sub(ft),Mt=(xe.width-(Ce.left+Ce.right+$.padding.left+$.padding.right))/xt.x,_t=(xe.height-(Ce.top+Ce.bottom+$.padding.top+$.padding.bottom))/xt.y;if(!(_t<0||Mt<0)){var zt=Math.min(xe.scaleZoom(xe.scale*Math.min(Mt,_t)),$.maxZoom),Et=typeof $.offset.x=="number"?new o.Point($.offset.x,$.offset.y):o.Point.convert($.offset),Yt=($.padding.left-$.padding.right)/2,Vt=($.padding.top-$.padding.bottom)/2,Nt=new o.Point(Yt,Vt).rotate(V*Math.PI/180),fn=Et.add(Nt).mult(xe.scale/xe.zoomScale(zt));return{center:xe.unproject(ze.add(Ue).div(2).sub(fn)),zoom:zt,bearing:V}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(H,L,V){return this._fitInternal(this.cameraForBounds(H,L),L,V)},G.prototype.fitScreenCoordinates=function(H,L,V,$,ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(H)),this.transform.pointLocation(o.Point.convert(L)),V,$),$,ne)},G.prototype._fitInternal=function(H,L,V){return H?(delete(L=o.extend(H,L)).padding,L.linear?this.easeTo(L,V):this.flyTo(L,V)):this},G.prototype.jumpTo=function(H,L){this.stop();var V=this.transform,$=!1,ne=!1,ce=!1;return"zoom"in H&&V.zoom!==+H.zoom&&($=!0,V.zoom=+H.zoom),H.center!==void 0&&(V.center=o.LngLat.convert(H.center)),"bearing"in H&&V.bearing!==+H.bearing&&(ne=!0,V.bearing=+H.bearing),"pitch"in H&&V.pitch!==+H.pitch&&(ce=!0,V.pitch=+H.pitch),H.padding==null||V.isPaddingEqual(H.padding)||(V.padding=H.padding),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L)),$&&this.fire(new o.Event("zoomstart",L)).fire(new o.Event("zoom",L)).fire(new o.Event("zoomend",L)),ne&&this.fire(new o.Event("rotatestart",L)).fire(new o.Event("rotate",L)).fire(new o.Event("rotateend",L)),ce&&this.fire(new o.Event("pitchstart",L)).fire(new o.Event("pitch",L)).fire(new o.Event("pitchend",L)),this.fire(new o.Event("moveend",L))},G.prototype.easeTo=function(H,L){var V=this;this._stop(!1,H.easeId),((H=o.extend({offset:[0,0],duration:500,easing:o.ease},H)).animate===!1||!H.essential&&o.browser.prefersReducedMotion)&&(H.duration=0);var $=this.transform,ne=this.getZoom(),ce=this.getBearing(),xe=this.getPitch(),Ce=this.getPadding(),ze="zoom"in H?+H.zoom:ne,Ue="bearing"in H?this._normalizeBearing(H.bearing,ce):ce,He="pitch"in H?+H.pitch:xe,et="padding"in H?H.padding:$.padding,lt=o.Point.convert(H.offset),ft=$.centerPoint.add(lt),xt=$.pointLocation(ft),Mt=o.LngLat.convert(H.center||xt);this._normalizeCenter(Mt);var _t,zt,Et=$.project(xt),Yt=$.project(Mt).sub(Et),Vt=$.zoomScale(ze-ne);H.around&&(_t=o.LngLat.convert(H.around),zt=$.locationPoint(_t));var Nt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ze!==ne,this._rotating=this._rotating||ce!==Ue,this._pitching=this._pitching||He!==xe,this._padding=!$.isPaddingEqual(et),this._easeId=H.easeId,this._prepareEase(L,H.noMoveStart,Nt),this._ease(function(fn){if(V._zooming&&($.zoom=o.number(ne,ze,fn)),V._rotating&&($.bearing=o.number(ce,Ue,fn)),V._pitching&&($.pitch=o.number(xe,He,fn)),V._padding&&($.interpolatePadding(Ce,et,fn),ft=$.centerPoint.add(lt)),_t)$.setLocationAtPoint(_t,zt);else{var gn=$.zoomScale($.zoom-ne),kn=ze>ne?Math.min(2,Vt):Math.max(.5,Vt),Pn=Math.pow(kn,1-fn),Nn=$.unproject(Et.add(Yt.mult(fn*Pn)).mult(gn));$.setLocationAtPoint($.renderWorldCopies?Nn.wrap():Nn,ft)}V._fireMoveEvents(L)},function(fn){V._afterEase(L,fn)},H),this},G.prototype._prepareEase=function(H,L,V){V===void 0&&(V={}),this._moving=!0,L||V.moving||this.fire(new o.Event("movestart",H)),this._zooming&&!V.zooming&&this.fire(new o.Event("zoomstart",H)),this._rotating&&!V.rotating&&this.fire(new o.Event("rotatestart",H)),this._pitching&&!V.pitching&&this.fire(new o.Event("pitchstart",H))},G.prototype._fireMoveEvents=function(H){this.fire(new o.Event("move",H)),this._zooming&&this.fire(new o.Event("zoom",H)),this._rotating&&this.fire(new o.Event("rotate",H)),this._pitching&&this.fire(new o.Event("pitch",H))},G.prototype._afterEase=function(H,L){if(!this._easeId||!L||this._easeId!==L){delete this._easeId;var V=this._zooming,$=this._rotating,ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,V&&this.fire(new o.Event("zoomend",H)),$&&this.fire(new o.Event("rotateend",H)),ne&&this.fire(new o.Event("pitchend",H)),this.fire(new o.Event("moveend",H))}},G.prototype.flyTo=function(H,L){var V=this;if(!H.essential&&o.browser.prefersReducedMotion){var $=o.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo($,L)}this.stop(),H=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},H);var ne=this.transform,ce=this.getZoom(),xe=this.getBearing(),Ce=this.getPitch(),ze=this.getPadding(),Ue="zoom"in H?o.clamp(+H.zoom,ne.minZoom,ne.maxZoom):ce,He="bearing"in H?this._normalizeBearing(H.bearing,xe):xe,et="pitch"in H?+H.pitch:Ce,lt="padding"in H?H.padding:ne.padding,ft=ne.zoomScale(Ue-ce),xt=o.Point.convert(H.offset),Mt=ne.centerPoint.add(xt),_t=ne.pointLocation(Mt),zt=o.LngLat.convert(H.center||_t);this._normalizeCenter(zt);var Et=ne.project(_t),Yt=ne.project(zt).sub(Et),Vt=H.curve,Nt=Math.max(ne.width,ne.height),fn=Nt/ft,gn=Yt.mag();if("minZoom"in H){var kn=o.clamp(Math.min(H.minZoom,ce,Ue),ne.minZoom,ne.maxZoom),Pn=Nt/ne.zoomScale(kn-ce);Vt=Math.sqrt(Pn/gn*2)}var Nn=Vt*Vt;function nr(ur){var Ar=(fn*fn-Nt*Nt+(ur?-1:1)*Nn*Nn*gn*gn)/(2*(ur?fn:Nt)*Nn*gn);return Math.log(Math.sqrt(Ar*Ar+1)-Ar)}function cr(ur){return(Math.exp(ur)-Math.exp(-ur))/2}function qn(ur){return(Math.exp(ur)+Math.exp(-ur))/2}var sr=nr(0),xr=function(ur){return qn(sr)/qn(sr+Vt*ur)},Er=function(ur){return Nt*((qn(sr)*(cr(Ar=sr+Vt*ur)/qn(Ar))-cr(sr))/Nn)/gn;var Ar},Qn=(nr(1)-sr)/Vt;if(Math.abs(gn)<1e-6||!isFinite(Qn)){if(Math.abs(Nt-fn)<1e-6)return this.easeTo(H,L);var or=fn<Nt?-1:1;Qn=Math.abs(Math.log(fn/Nt))/Vt,Er=function(){return 0},xr=function(ur){return Math.exp(or*Vt*ur)}}if("duration"in H)H.duration=+H.duration;else{var wr="screenSpeed"in H?+H.screenSpeed/Vt:+H.speed;H.duration=1e3*Qn/wr}return H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=xe!==He,this._pitching=et!==Ce,this._padding=!ne.isPaddingEqual(lt),this._prepareEase(L,!1),this._ease(function(ur){var Ar=ur*Qn,Pr=1/xr(Ar);ne.zoom=ur===1?Ue:ce+ne.scaleZoom(Pr),V._rotating&&(ne.bearing=o.number(xe,He,ur)),V._pitching&&(ne.pitch=o.number(Ce,et,ur)),V._padding&&(ne.interpolatePadding(ze,lt,ur),Mt=ne.centerPoint.add(xt));var Nr=ur===1?zt:ne.unproject(Et.add(Yt.mult(Er(Ar))).mult(Pr));ne.setLocationAtPoint(ne.renderWorldCopies?Nr.wrap():Nr,Mt),V._fireMoveEvents(L)},function(){return V._afterEase(L)},H),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(H,L){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var V=this._onEaseEnd;delete this._onEaseEnd,V.call(this,L)}if(!H){var $=this.handlers;$&&$.stop(!1)}return this},G.prototype._ease=function(H,L,V){V.animate===!1||V.duration===0?(H(1),L()):(this._easeStart=o.browser.now(),this._easeOptions=V,this._onEaseFrame=H,this._onEaseEnd=L,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var H=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(H,L){H=o.wrap(H,-180,180);var V=Math.abs(H-L);return Math.abs(H-360-L)<V&&(H-=360),Math.abs(H+360-L)<V&&(H+=360),H},G.prototype._normalizeCenter=function(H){var L=this.transform;if(L.renderWorldCopies&&!L.lngRange){var V=H.lng-L.center.lng;H.lng+=V>180?-360:V<-180?360:0}},G}(o.Evented),pa=function(B){B===void 0&&(B={}),this.options=B,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};pa.prototype.getDefaultPosition=function(){return"bottom-right"},pa.prototype.onAdd=function(B){var G=this.options&&this.options.compact;return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},pa.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},pa.prototype._setElementTitle=function(B,G){var H=this._map._getUIString("AttributionControl."+G);B.title=H,B.setAttribute("aria-label",H)},pa.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},pa.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(B){var H=G.reduce(function(L,V,$){return V.value&&(L+=V.key+"="+V.value+($<G.length-1?"&":"")),L},"?");B.href=o.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow",this._setElementTitle(B,"MapFeedback")}},pa.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.sourceDataType!=="visibility"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},pa.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(ce){return typeof ce!="string"?"":ce})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var H=this._map.style.sourceCaches;for(var L in H){var V=H[L];if(V.used){var $=V.getSource();$.attribution&&B.indexOf($.attribution)<0&&B.push($.attribution)}}B.sort(function(ce,xe){return ce.length-xe.length});var ne=(B=B.filter(function(ce,xe){for(var Ce=xe+1;Ce<B.length;Ce++)if(B[Ce].indexOf(ce)>=0)return!1;return!0})).join(" | ");ne!==this._attribHTML&&(this._attribHTML=ne,B.length?(this._innerContainer.innerHTML=ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},pa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ho=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};ho.prototype.onAdd=function(B){this._map=B,this._container=b.create("div","mapboxgl-ctrl");var G=b.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ho.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ho.prototype.getDefaultPosition=function(){return"bottom-left"},ho.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ho.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var G in B)if(B[G].getSource().mapbox_logo)return!0;return!1}},ho.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var G=B[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var da=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};da.prototype.add=function(B){var G=++this._id;return this._queue.push({callback:B,id:G,cancelled:!1}),G},da.prototype.remove=function(B){for(var G=this._currentlyRunning,H=0,L=G?this._queue.concat(G):this._queue;H<L.length;H+=1){var V=L[H];if(V.id===B)return void(V.cancelled=!0)}},da.prototype.run=function(B){B===void 0&&(B=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,L=G;H<L.length;H+=1){var V=L[H];if(!V.cancelled&&(V.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},da.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ts={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ks=o.window.HTMLImageElement,ga=o.window.HTMLElement,Wr=o.window.ImageBitmap,po=60,ps={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:po,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ja=function(B){function G(L){var V=this;if((L=o.extend({},ps,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>po)throw new Error("maxPitch must be less than or equal to 60");var $=new Kr(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies);if(B.call(this,$,L),this._interactive=L.interactive,this._maxTileCacheSize=L.maxTileCacheSize,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new da,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Ts,L.locale),this._clickTolerance=L.clickTolerance,this._requestManager=new o.RequestManager(L.transformRequest,L.accessToken),typeof L.container=="string"){if(this._container=o.window.document.getElementById(L.container),!this._container)throw new Error("Container '"+L.container+"' not found.")}else{if(!(L.container instanceof ga))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return V._update(!1)}),this.on("moveend",function(){return V._update(!1)}),this.on("zoom",function(){return V._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Zr(this,L);var ne=typeof L.hash=="string"&&L.hash||void 0;this._hash=L.hash&&new Sa(ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,o.extend({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new pa({customAttribution:L.customAttribution})),this.addControl(new ho,L.logoPosition),this.on("style.load",function(){V.transform.unmodified&&V.jumpTo(V.style.stylesheet)}),this.on("data",function(ce){V._update(ce.dataType==="style"),V.fire(new o.Event(ce.dataType+"data",ce))}),this.on("dataloading",function(ce){V.fire(new o.Event(ce.dataType+"dataloading",ce))})}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(L,V){if(V===void 0&&(V=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var $=L.onAdd(this);this._controls.push(L);var ne=this._controlPositions[V];return V.indexOf("bottom")!==-1?ne.insertBefore($,ne.firstChild):ne.appendChild($),this},G.prototype.removeControl=function(L){if(!L||!L.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var V=this._controls.indexOf(L);return V>-1&&this._controls.splice(V,1),L.onRemove(this),this},G.prototype.hasControl=function(L){return this._controls.indexOf(L)>-1},G.prototype.resize=function(L){var V=this._containerDimensions(),$=V[0],ne=V[1];this._resizeCanvas($,ne),this.transform.resize($,ne),this.painter.resize($,ne);var ce=!this._moving;return ce&&(this.stop(),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L))),this.fire(new o.Event("resize",L)),ce&&this.fire(new o.Event("moveend",L)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(L){return this.transform.setMaxBounds(o.LngLatBounds.convert(L)),this._update()},G.prototype.setMinZoom=function(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(L){if((L=L??po)>po)throw new Error("maxPitch must be less than or equal to 60");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(L){return this.transform.renderWorldCopies=L,this._update()},G.prototype.project=function(L){return this.transform.locationPoint(o.LngLat.convert(L))},G.prototype.unproject=function(L){return this.transform.pointLocation(o.Point.convert(L))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(L,V,$){var ne,ce=this;if(L==="mouseenter"||L==="mouseover"){var xe=!1;return{layer:V,listener:$,delegates:{mousemove:function(ze){var Ue=ce.getLayer(V)?ce.queryRenderedFeatures(ze.point,{layers:[V]}):[];Ue.length?xe||(xe=!0,$.call(ce,new oa(L,ce,ze.originalEvent,{features:Ue}))):xe=!1},mouseout:function(){xe=!1}}}}if(L==="mouseleave"||L==="mouseout"){var Ce=!1;return{layer:V,listener:$,delegates:{mousemove:function(ze){(ce.getLayer(V)?ce.queryRenderedFeatures(ze.point,{layers:[V]}):[]).length?Ce=!0:Ce&&(Ce=!1,$.call(ce,new oa(L,ce,ze.originalEvent)))},mouseout:function(ze){Ce&&(Ce=!1,$.call(ce,new oa(L,ce,ze.originalEvent)))}}}}return{layer:V,listener:$,delegates:(ne={},ne[L]=function(ze){var Ue=ce.getLayer(V)?ce.queryRenderedFeatures(ze.point,{layers:[V]}):[];Ue.length&&(ze.features=Ue,$.call(ce,ze),delete ze.features)},ne)}},G.prototype.on=function(L,V,$){if($===void 0)return B.prototype.on.call(this,L,V);var ne=this._createDelegatedListener(L,V,$);for(var ce in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(ne),ne.delegates)this.on(ce,ne.delegates[ce]);return this},G.prototype.once=function(L,V,$){if($===void 0)return B.prototype.once.call(this,L,V);var ne=this._createDelegatedListener(L,V,$);for(var ce in ne.delegates)this.once(ce,ne.delegates[ce]);return this},G.prototype.off=function(L,V,$){var ne=this;return $===void 0?B.prototype.off.call(this,L,V):(this._delegatedListeners&&this._delegatedListeners[L]&&function(ce){for(var xe=ce[L],Ce=0;Ce<xe.length;Ce++){var ze=xe[Ce];if(ze.layer===V&&ze.listener===$){for(var Ue in ze.delegates)ne.off(Ue,ze.delegates[Ue]);return xe.splice(Ce,1),ne}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(L,V){if(!this.style)return[];var $;if(V!==void 0||L===void 0||L instanceof o.Point||Array.isArray(L)||(V=L,L=void 0),V=V||{},(L=L||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof L[0]=="number")$=[o.Point.convert(L)];else{var ne=o.Point.convert(L[0]),ce=o.Point.convert(L[1]);$=[ne,new o.Point(ce.x,ne.y),ce,new o.Point(ne.x,ce.y),ne]}return this.style.queryRenderedFeatures($,V,this.transform)},G.prototype.querySourceFeatures=function(L,V){return this.style.querySourceFeatures(L,V)},G.prototype.setStyle=function(L,V){return(V=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},V)).diff!==!1&&V.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,V),this):(this._localIdeographFontFamily=V.localIdeographFontFamily,this._updateStyle(L,V))},G.prototype._getUIString=function(L){var V=this._locale[L];if(V==null)throw new Error("Missing UI string '"+L+"'");return V},G.prototype._updateStyle=function(L,V){return this.style&&(this.style.setEventedParent(null),this.style._remove()),L?(this.style=new tr(this,V||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L):this.style.loadJSON(L),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new tr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(L,V){var $=this;if(typeof L=="string"){var ne=this._requestManager.normalizeStyleURL(L),ce=this._requestManager.transformRequest(ne,o.ResourceType.Style);o.getJSON(ce,function(xe,Ce){xe?$.fire(new o.ErrorEvent(xe)):Ce&&$._updateDiff(Ce,V)})}else typeof L=="object"&&this._updateDiff(L,V)},G.prototype._updateDiff=function(L,V){try{this.style.setState(L)&&this._update(!0)}catch($){o.warnOnce("Unable to perform style diff: "+($.message||$.error||$)+".  Rebuilding the style from scratch."),this._updateStyle(L,V)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(L,V){return this._lazyInitEmptyStyle(),this.style.addSource(L,V),this._update(!0)},G.prototype.isSourceLoaded=function(L){var V=this.style&&this.style.sourceCaches[L];if(V!==void 0)return V.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+L+"'")))},G.prototype.areTilesLoaded=function(){var L=this.style&&this.style.sourceCaches;for(var V in L){var $=L[V]._tiles;for(var ne in $){var ce=$[ne];if(ce.state!=="loaded"&&ce.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(L,V,$){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,V,$)},G.prototype.removeSource=function(L){return this.style.removeSource(L),this._update(!0)},G.prototype.getSource=function(L){return this.style.getSource(L)},G.prototype.addImage=function(L,V,$){$===void 0&&($={});var ne=$.pixelRatio;ne===void 0&&(ne=1);var ce=$.sdf;ce===void 0&&(ce=!1);var xe=$.stretchX,Ce=$.stretchY,ze=$.content;if(this._lazyInitEmptyStyle(),V instanceof ks||Wr&&V instanceof Wr){var Ue=o.browser.getImageData(V),He=Ue.width,et=Ue.height,lt=Ue.data;this.style.addImage(L,{data:new o.RGBAImage({width:He,height:et},lt),pixelRatio:ne,stretchX:xe,stretchY:Ce,content:ze,sdf:ce,version:0})}else{if(V.width===void 0||V.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ft=V.width,xt=V.height,Mt=V.data,_t=V;this.style.addImage(L,{data:new o.RGBAImage({width:ft,height:xt},new Uint8Array(Mt)),pixelRatio:ne,stretchX:xe,stretchY:Ce,content:ze,sdf:ce,version:0,userImage:_t}),_t.onAdd&&_t.onAdd(this,L)}},G.prototype.updateImage=function(L,V){var $=this.style.getImage(L);if(!$)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ne=V instanceof ks||Wr&&V instanceof Wr?o.browser.getImageData(V):V,ce=ne.width,xe=ne.height,Ce=ne.data;if(ce===void 0||xe===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ce!==$.data.width||xe!==$.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ze=!(V instanceof ks||Wr&&V instanceof Wr);$.data.replace(Ce,ze),this.style.updateImage(L,$)},G.prototype.hasImage=function(L){return L?!!this.style.getImage(L):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(L){this.style.removeImage(L)},G.prototype.loadImage=function(L,V){o.getImage(this._requestManager.transformRequest(L,o.ResourceType.Image),V)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(L,V){return this._lazyInitEmptyStyle(),this.style.addLayer(L,V),this._update(!0)},G.prototype.moveLayer=function(L,V){return this.style.moveLayer(L,V),this._update(!0)},G.prototype.removeLayer=function(L){return this.style.removeLayer(L),this._update(!0)},G.prototype.getLayer=function(L){return this.style.getLayer(L)},G.prototype.setLayerZoomRange=function(L,V,$){return this.style.setLayerZoomRange(L,V,$),this._update(!0)},G.prototype.setFilter=function(L,V,$){return $===void 0&&($={}),this.style.setFilter(L,V,$),this._update(!0)},G.prototype.getFilter=function(L){return this.style.getFilter(L)},G.prototype.setPaintProperty=function(L,V,$,ne){return ne===void 0&&(ne={}),this.style.setPaintProperty(L,V,$,ne),this._update(!0)},G.prototype.getPaintProperty=function(L,V){return this.style.getPaintProperty(L,V)},G.prototype.setLayoutProperty=function(L,V,$,ne){return ne===void 0&&(ne={}),this.style.setLayoutProperty(L,V,$,ne),this._update(!0)},G.prototype.getLayoutProperty=function(L,V){return this.style.getLayoutProperty(L,V)},G.prototype.setLight=function(L,V){return V===void 0&&(V={}),this._lazyInitEmptyStyle(),this.style.setLight(L,V),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(L,V){return this.style.setFeatureState(L,V),this._update()},G.prototype.removeFeatureState=function(L,V){return this.style.removeFeatureState(L,V),this._update()},G.prototype.getFeatureState=function(L){return this.style.getFeatureState(L)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var L=0,V=0;return this._container&&(L=this._container.clientWidth||400,V=this._container.clientHeight||300),[L,V]},G.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var L=this._container;L.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",L)).style.visibility="hidden",this._detectMissingCSS();var V=this._canvasContainer=b.create("div","mapboxgl-canvas-container",L);this._interactive&&V.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",V),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var $=this._containerDimensions();this._resizeCanvas($[0],$[1]);var ne=this._controlContainer=b.create("div","mapboxgl-control-container",L),ce=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(xe){ce[xe]=b.create("div","mapboxgl-ctrl-"+xe,ne)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},G.prototype._resizeCanvas=function(L,V){var $=o.browser.devicePixelRatio||1;this._canvas.width=$*L,this._canvas.height=$*V,this._canvas.style.width=L+"px",this._canvas.style.height=V+"px"},G.prototype._setupPainter=function(){var L=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),V=this._canvas.getContext("webgl",L)||this._canvas.getContext("experimental-webgl",L);V?(this.painter=new ri(V,this.transform),o.webpSupported.testSupport(V)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(L){L.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:L}))},G.prototype._contextRestored=function(L){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:L}))},G.prototype._onMapScroll=function(L){if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(L){return this.style?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(L){return this._update(),this._renderTaskQueue.add(L)},G.prototype._cancelRenderFrame=function(L){this._renderTaskQueue.remove(L)},G.prototype._render=function(L){var V,$=this,ne=0,ce=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(V=ce.createQueryEXT(),ce.beginQueryEXT(ce.TIME_ELAPSED_EXT,V),ne=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),!this._removed){var xe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ce=this.transform.zoom,ze=o.browser.now();this.style.zoomHistory.update(Ce,ze);var Ue=new o.EvaluationParameters(Ce,{now:ze,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),He=Ue.crossFadingFactor();He===1&&He===this._crossFadingFactor||(xe=!0,this._crossFadingFactor=He),this.style.update(Ue)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||xe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var et=o.browser.now()-ne;ce.endQueryEXT(ce.TIME_ELAPSED_EXT,V),setTimeout(function(){var xt=ce.getQueryObjectEXT(V,ce.QUERY_RESULT_EXT)/1e6;ce.deleteQueryEXT(V),$.fire(new o.Event("gpu-timing-frame",{cpuTime:et,gpuTime:xt}))},50)}if(this.listens("gpu-timing-layer")){var lt=this.painter.collectGpuTimers();setTimeout(function(){var xt=$.painter.queryGpuTimers(lt);$.fire(new o.Event("gpu-timing-layer",{layerTimes:xt}))},50)}var ft=this._sourcesDirty||this._styleDirty||this._placementDirty;return ft||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ft||(this._fullyLoaded=!0),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var L=0,V=this._controls;L<V.length;L+=1)V[L].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var $=this.painter.context.gl.getExtension("WEBGL_lose_context");$&&$.loseContext&&$.loseContext(),As(this._canvasContainer),As(this._controlContainer),As(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},G.prototype.triggerRepaint=function(){var L=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(V){L._frame=null,L._render(V)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(L){this._trackResize&&this.resize({originalEvent:L})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function(L){this._showPadding!==L&&(this._showPadding=L,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function(L){this._vertices=L,this._update()},G.prototype._setCacheLimits=function(L,V){o.setCacheLimits(L,V)},H.version.get=function(){return o.version},Object.defineProperties(G.prototype,H),G}(Ki);function As(B){B.parentNode&&B.parentNode.removeChild(B)}var Ms={showCompass:!0,showZoom:!0,visualizePitch:!1},$a=function(B){var G=this;this.options=o.extend({},Ms,B),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return G._map.zoomIn({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return G._map.zoomOut({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:H}):G._map.resetNorth({},{originalEvent:H})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};$a.prototype._updateZoomButtons=function(){var B=this._map.getZoom(),G=B===this._map.getMaxZoom(),H=B===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=H,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",H.toString())},$a.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},$a.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new di(this._map,this._compass,this.options.visualizePitch)),this._container},$a.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},$a.prototype._createButton=function(B,G){var H=b.create("button",B,this._container);return H.type="button",H.addEventListener("click",G),H},$a.prototype._setButtonTitle=function(B,G){var H=this._map._getUIString("NavigationControl."+G);B.title=H,B.setAttribute("aria-label",H)};var di=function(B,G,H){H===void 0&&(H=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new Mo({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,H&&(this.mousePitch=new Ra({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(G,"mousedown",this.mousedown),b.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(G,"touchmove",this.touchmove),b.addEventListener(G,"touchend",this.touchend),b.addEventListener(G,"touchcancel",this.reset)};function ds(B,G,H){if(B=new o.LngLat(B.lng,B.lat),G){var L=new o.LngLat(B.lng-360,B.lat),V=new o.LngLat(B.lng+360,B.lat),$=H.locationPoint(B).distSqr(G);H.locationPoint(L).distSqr(G)<$?B=L:H.locationPoint(V).distSqr(G)<$&&(B=V)}for(;Math.abs(B.lng-H.center.lng)>180;){var ne=H.locationPoint(B);if(ne.x>=0&&ne.y>=0&&ne.x<=H.width&&ne.y<=H.height)break;B.lng>H.center.lng?B.lng-=360:B.lng+=360}return B}di.prototype.down=function(B,G){this.mouseRotate.mousedown(B,G),this.mousePitch&&this.mousePitch.mousedown(B,G),b.disableDrag()},di.prototype.move=function(B,G){var H=this.map,L=this.mouseRotate.mousemoveWindow(B,G);if(L&&L.bearingDelta&&H.setBearing(H.getBearing()+L.bearingDelta),this.mousePitch){var V=this.mousePitch.mousemoveWindow(B,G);V&&V.pitchDelta&&H.setPitch(H.getPitch()+V.pitchDelta)}},di.prototype.off=function(){var B=this.element;b.removeEventListener(B,"mousedown",this.mousedown),b.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(B,"touchmove",this.touchmove),b.removeEventListener(B,"touchend",this.touchend),b.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},di.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(o.window,"mousemove",this.mousemove),b.removeEventListener(o.window,"mouseup",this.mouseup)},di.prototype.mousedown=function(B){this.down(o.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),b.mousePos(this.element,B)),b.addEventListener(o.window,"mousemove",this.mousemove),b.addEventListener(o.window,"mouseup",this.mouseup)},di.prototype.mousemove=function(B){this.move(B,b.mousePos(this.element,B))},di.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},di.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},di.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},di.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},di.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Sr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Or(B,G,H){var L=B.classList;for(var V in Sr)L.remove("mapboxgl-"+H+"-anchor-"+V);L.add("mapboxgl-"+H+"-anchor-"+G)}var Ea,go=function(B){function G(H,L){if(B.call(this),(H instanceof o.window.HTMLElement||L)&&(H=o.extend({element:H},L)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._scale=H&&H.scale||1,this._draggable=H&&H.draggable||!1,this._clickTolerance=H&&H.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&H.pitchAlignment!=="auto"?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=o.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var V=b.createNS("http://www.w3.org/2000/svg","svg");V.setAttributeNS(null,"display","block"),V.setAttributeNS(null,"height","41px"),V.setAttributeNS(null,"width","27px"),V.setAttributeNS(null,"viewBox","0 0 27 41");var $=b.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"stroke","none"),$.setAttributeNS(null,"stroke-width","1"),$.setAttributeNS(null,"fill","none"),$.setAttributeNS(null,"fill-rule","evenodd");var ne=b.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill-rule","nonzero");var ce=b.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ce.setAttributeNS(null,"fill","#000000");for(var xe=0,Ce=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];xe<Ce.length;xe+=1){var ze=Ce[xe],Ue=b.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",ze.rx),Ue.setAttributeNS(null,"ry",ze.ry),ce.appendChild(Ue)}var He=b.createNS("http://www.w3.org/2000/svg","g");He.setAttributeNS(null,"fill",this._color);var et=b.createNS("http://www.w3.org/2000/svg","path");et.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),He.appendChild(et);var lt=b.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"opacity","0.25"),lt.setAttributeNS(null,"fill","#000000");var ft=b.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),lt.appendChild(ft);var xt=b.createNS("http://www.w3.org/2000/svg","g");xt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xt.setAttributeNS(null,"fill","#FFFFFF");var Mt=b.createNS("http://www.w3.org/2000/svg","g");Mt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _t=b.createNS("http://www.w3.org/2000/svg","circle");_t.setAttributeNS(null,"fill","#000000"),_t.setAttributeNS(null,"opacity","0.25"),_t.setAttributeNS(null,"cx","5.5"),_t.setAttributeNS(null,"cy","5.5"),_t.setAttributeNS(null,"r","5.4999962");var zt=b.createNS("http://www.w3.org/2000/svg","circle");zt.setAttributeNS(null,"fill","#FFFFFF"),zt.setAttributeNS(null,"cx","5.5"),zt.setAttributeNS(null,"cy","5.5"),zt.setAttributeNS(null,"r","5.4999962"),Mt.appendChild(_t),Mt.appendChild(zt),ne.appendChild(ce),ne.appendChild(He),ne.appendChild(lt),ne.appendChild(xt),ne.appendChild(Mt),V.appendChild(ne),V.setAttributeNS(null,"height",41*this._scale+"px"),V.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(V),this._offset=o.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Et){Et.preventDefault()}),this._element.addEventListener("mousedown",function(Et){Et.preventDefault()}),Or(this._element,this._anchor,"marker"),this._popup=null}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var L=13.5,V=Math.sqrt(Math.pow(L,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[V,-1*(24.6+V)],"bottom-right":[-V,-1*(24.6+V)],left:[L,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(H){var L=H.code,V=H.charCode||H.keyCode;L!=="Space"&&L!=="Enter"&&V!==32&&V!==13||this.togglePopup()},G.prototype._onMapClick=function(H){var L=H.originalEvent.target,V=this._element;this._popup&&(L===V||V.contains(L))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},G.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ds(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(L="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var V="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?V="rotateX(0deg)":this._pitchAlignment==="map"&&(V="rotateX("+this._map.getPitch()+"deg)"),H&&H.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,Sr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+V+" "+L)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(H){return this._offset=o.Point.convert(H),this._update(),this},G.prototype._onMove=function(H){if(!this._isDragging){var L=this._clickTolerance||this._map._clickTolerance;this._isDragging=H.point.dist(this._pointerdownPos)>=L}this._isDragging&&(this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._pointerdownPos=H.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&H!=="auto"?H:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(o.Evented),Lo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Oi=0,mo=!1,ii=function(B){function G(H){B.call(this),this.options=o.extend({},Lo,H),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){return this._map=H,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),L=this._setupUI,Ea!==void 0?L(Ea):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(V){Ea=V.state!=="denied",L(Ea)}):(Ea=!!o.window.navigator.geolocation,L(Ea)),this._container;var L},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Oi=0,mo=!1},G.prototype._isOutOfMapMaxBounds=function(H){var L=this._map.getMaxBounds(),V=H.coords;return L&&(V.longitude<L.getWest()||V.longitude>L.getEast()||V.latitude<L.getSouth()||V.latitude>L.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(H),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",H)),this._finish()}},G.prototype._updateCamera=function(H){var L=new o.LngLat(H.coords.longitude,H.coords.latitude),V=H.coords.accuracy,$=this._map.getBearing(),ne=o.extend({bearing:$},this.options.fitBoundsOptions);this._map.fitBounds(L.toBounds(V),ne,{geolocateSource:!0})},G.prototype._updateMarker=function(H){if(H){var L=new o.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat(L).addTo(this._map),this._userLocationDotMarker.setLngLat(L).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,L=this._map.unproject([0,H]),V=this._map.unproject([1,H]),$=L.distanceTo(V),ne=Math.ceil(2*this._accuracy/$);this._circleElement.style.width=ne+"px",this._circleElement.style.height=ne+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(H.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(H.code===3&&mo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",H)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(H){var L=this;if(this._container.addEventListener("contextmenu",function(ne){return ne.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",H===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var V=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=V,this._geolocateButton.setAttribute("aria-label",V)}else{var $=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=$,this._geolocateButton.setAttribute("aria-label",$)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new go(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new go({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ne){var ce=ne.originalEvent&&ne.originalEvent.type==="resize";ne.geolocateSource||L._watchState!=="ACTIVE_LOCK"||ce||(L._watchState="BACKGROUND",L._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),L._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),L.fire(new o.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Oi--,mo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Oi>1?(H={maximumAge:6e5,timeout:0},mo=!0):(H=this.options.positionOptions,mo=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(o.Evented),Pl={maxWidth:100,unit:"metric"},La=function(B){this.options=o.extend({},Pl,B),o.bindAll(["_onMove","setUnit"],this)};function si(B,G,H){var L=H&&H.maxWidth||100,V=B._container.clientHeight/2,$=B.unproject([0,V]),ne=B.unproject([L,V]),ce=$.distanceTo(ne);if(H&&H.unit==="imperial"){var xe=3.2808*ce;xe>5280?yi(G,L,xe/5280,B._getUIString("ScaleControl.Miles")):yi(G,L,xe,B._getUIString("ScaleControl.Feet"))}else H&&H.unit==="nautical"?yi(G,L,ce/1852,B._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?yi(G,L,ce/1e3,B._getUIString("ScaleControl.Kilometers")):yi(G,L,ce,B._getUIString("ScaleControl.Meters"))}function yi(B,G,H,L){var V,$,ne,ce=(V=H,($=Math.pow(10,(""+Math.floor(V)).length-1))*((ne=V/$)>=10?10:ne>=5?5:ne>=3?3:ne>=2?2:ne>=1?1:function(Ce){var ze=Math.pow(10,Math.ceil(-Math.log(Ce)/Math.LN10));return Math.round(Ce*ze)/ze}(ne))),xe=ce/H;B.style.width=G*xe+"px",B.innerHTML=ce+"&nbsp;"+L}La.prototype.getDefaultPosition=function(){return"bottom-left"},La.prototype._onMove=function(){si(this._map,this._container,this.options)},La.prototype.onAdd=function(B){return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},La.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},La.prototype.setUnit=function(B){this.options.unit=B,si(this._map,this._container,this.options)};var _a=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof o.window.HTMLElement?this._container=B.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};_a.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},_a.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},_a.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},_a.prototype._setupUI=function(){var B=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},_a.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},_a.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},_a.prototype._isFullscreen=function(){return this._fullscreen},_a.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},_a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ko={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ml=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xe=function(B){function G(H){B.call(this),this.options=o.extend(Object.create(Ko),H),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(H){return this.setDOMContent(o.window.document.createTextNode(H))},G.prototype.setHTML=function(H){var L,V=o.window.document.createDocumentFragment(),$=o.window.document.createElement("body");for($.innerHTML=H;L=$.firstChild;)V.appendChild(L);return this.setDOMContent(V)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},G.prototype.setDOMContent=function(H){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(H),this._createCloseButton(),this._update(),this._focusFirstElement(),this},G.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},G.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},G.prototype.setOffset=function(H){return this.options.offset=H,this._update(),this},G.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},G.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(H){this._update(H.point)},G.prototype._onMouseMove=function(H){this._update(H.point)},G.prototype._onDrag=function(H){this._update(H.point)},G.prototype._update=function(H){var L=this,V=this._lngLat||this._trackPointer;if(this._map&&V&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(He){return L._container.classList.add(He)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ds(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var $=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),ne=this.options.anchor,ce=$e(this.options.offset);if(!ne){var xe,Ce=this._container.offsetWidth,ze=this._container.offsetHeight;xe=$.y+ce.bottom.y<ze?["top"]:$.y>this._map.transform.height-ze?["bottom"]:[],$.x<Ce/2?xe.push("left"):$.x>this._map.transform.width-Ce/2&&xe.push("right"),ne=xe.length===0?"bottom":xe.join("-")}var Ue=$.add(ce[ne]).round();b.setTransform(this._container,Sr[ne]+" translate("+Ue.x+"px,"+Ue.y+"px)"),Or(this._container,ne,"popup")}},G.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var H=this._container.querySelector(ml);H&&H.focus()}},G.prototype._onClose=function(){this.remove()},G}(o.Evented);function $e(B){if(B){if(typeof B=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new o.Point(0,0),top:new o.Point(0,B),"top-left":new o.Point(G,G),"top-right":new o.Point(-G,G),bottom:new o.Point(0,-B),"bottom-left":new o.Point(G,-G),"bottom-right":new o.Point(-G,-G),left:new o.Point(B,0),right:new o.Point(-B,0)}}if(B instanceof o.Point||Array.isArray(B)){var H=o.Point.convert(B);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:o.Point.convert(B.center||[0,0]),top:o.Point.convert(B.top||[0,0]),"top-left":o.Point.convert(B["top-left"]||[0,0]),"top-right":o.Point.convert(B["top-right"]||[0,0]),bottom:o.Point.convert(B.bottom||[0,0]),"bottom-left":o.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(B["bottom-right"]||[0,0]),left:o.Point.convert(B.left||[0,0]),right:o.Point.convert(B.right||[0,0])}}return $e(new o.Point(0,0))}var ot={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Ja,NavigationControl:$a,GeolocateControl:ii,AttributionControl:pa,ScaleControl:La,FullscreenControl:_a,Popup:Xe,Marker:go,Style:tr,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){gt().acquire(nt)},clearPrewarmedResources:function(){var B=ut;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(nt),ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(B){o.config.ACCESS_TOKEN=B},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(B){o.config.API_URL=B},get workerCount(){return Ge.workerCount},set workerCount(B){Ge.workerCount=B},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){o.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){o.clearTileCache(B)},workerUrl:""};return ot}),A}()},3108:function(X,I,e){"use strict";X.exports=e(26099)},26099:function(X,I,e){"use strict";var A=e(64928),k=e(32420),o=e(51160),T=e(76752),b=e(55616),p=e(31264),s=e(47520),t=e(18400),i=e(72512),n=e(76244);function r(a,l){for(var c=l[0],h=l[1],u=1/(l[2]-c),x=1/(l[3]-h),d=new Array(a.length),m=0,g=a.length/2;m<g;m++)d[2*m]=k((a[2*m]-c)*u,0,1),d[2*m+1]=k((a[2*m+1]-h)*x,0,1);return d}X.exports=function(a,l){l||(l={}),a=s(a,"float64"),l=b(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=p(l.maxDepth,255),h=p(l.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var u,x=r(a,h),d=a.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?u=new(i(l.dtype))(d):l.dtype&&(u=l.dtype,Array.isArray(u)&&(u.length=d));for(var m=0;m<d;++m)u[m]=m;var g=[],y=[],v=[],_=[];(function R(U,D,N,W,F,j){if(!W.length)return null;var q=g[F]||(g[F]=[]),te=v[F]||(v[F]=[]),ee=y[F]||(y[F]=[]),Q=q.length;if(++F>c||j>1073741824){for(var J=0;J<W.length;J++)q.push(W[J]),te.push(j),ee.push(null,null,null,null);return Q}if(q.push(W[0]),te.push(j),W.length<=1)return ee.push(null,null,null,null),Q;for(var K=.5*N,Y=U+K,ie=D+K,se=[],ae=[],ue=[],ve=[],ye=1,de=W.length;ye<de;ye++){var pe=W[ye],ge=x[2*pe],ke=x[2*pe+1];ge<Y?ke<ie?se.push(pe):ae.push(pe):ke<ie?ue.push(pe):ve.push(pe)}return j<<=2,ee.push(R(U,D,K,se,F,j),R(U,ie,K,ae,F,j+1),R(Y,D,K,ue,F,j+2),R(Y,ie,K,ve,F,j+3)),Q})(0,0,1,u,0,1);for(var f=0,S=0;S<g.length;S++){var w=g[S];if(u.set)u.set(w,f);else for(var E=0,P=w.length;E<P;E++)u[E+f]=w[E];var C=f+g[S].length;_[S]=[f,C],f=C}return u.range=function(){for(var R,U=[],D=arguments.length;D--;)U[D]=arguments[D];if(t(U[U.length-1])){var N=U.pop();U.length||N.x==null&&N.l==null&&N.left==null||(U=[N],R={}),R=b(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else R={};U.length||(U=h);var W,F=o.apply(void 0,U),j=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],q=j[0],te=j[1],ee=j[2],Q=j[3],J=r([q,te,ee,Q],h),K=J[0],Y=J[1],ie=J[2],se=J[3],ae=p(R.level,g.length);if(R.d!=null&&(typeof R.d=="number"?W=[R.d,R.d]:R.d.length&&(W=R.d),ae=Math.min(Math.max(Math.ceil(-n(Math.abs(W[0])/(h[2]-h[0]))),Math.ceil(-n(Math.abs(W[1])/(h[3]-h[1])))),ae)),ae=Math.min(ae,g.length),R.lod)return function(ve,ye,de,pe,ge){for(var ke=[],Ee=0;Ee<ge;Ee++){var me=v[Ee],oe=_[Ee][0],re=O(ve,ye,Ee),fe=O(de,pe,Ee),Se=A.ge(me,re),be=A.gt(me,fe,Se,me.length-1);ke[Ee]=[Se+oe,be+oe]}return ke}(K,Y,ie,se,ae);var ue=[];return function ve(ye,de,pe,ge,ke,Ee){if(ke!==null&&Ee!==null&&!(K>ye+pe||Y>de+pe||ie<ye||se<de||ge>=ae||ke===Ee)){var me=g[ge];Ee===void 0&&(Ee=me.length);for(var oe=ke;oe<Ee;oe++){var re=me[oe],fe=a[2*re],Se=a[2*re+1];fe>=q&&fe<=ee&&Se>=te&&Se<=Q&&ue.push(re)}var be=y[ge],we=be[4*ke+0],Me=be[4*ke+1],Ie=be[4*ke+2],Oe=be[4*ke+3],he=function(De,Le){for(var Be=null,Ve=0;Be===null;)if(Be=De[4*Le+Ve],++Ve>De.length)return null;return Be}(be,ke+1),_e=.5*pe,Ae=ge+1;ve(ye,de,_e,Ae,we,Me||Ie||Oe||he),ve(ye,de+_e,_e,Ae,Me,Ie||Oe||he),ve(ye+_e,de,_e,Ae,Ie,Oe||he),ve(ye+_e,de+_e,_e,Ae,Oe,he)}}(0,0,1,0,0,1),ue},u;function O(R,U,D){for(var N=1,W=.5,F=.5,j=.5,q=0;q<D;q++)N<<=2,N+=R<W?U<F?0:1:U<F?2:3,j*=.5,W+=R<W?-j:j,F+=U<F?-j:j;return N}}},40440:function(X,I,e){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var A=e(3256),k=6378137;function o(p){var s=0;if(p&&p.length>0){s+=Math.abs(T(p[0]));for(var t=1;t<p.length;t++)s-=Math.abs(T(p[t]))}return s}function T(p){var s,t,i,n,r,a,l=0,c=p.length;if(c>2){for(a=0;a<c;a++)a===c-2?(i=c-2,n=c-1,r=0):a===c-1?(i=c-1,n=0,r=1):(i=a,n=a+1,r=a+2),s=p[i],t=p[n],l+=(b(p[r][0])-b(s[0]))*Math.sin(b(t[1]));l=l*k*k/2}return l}function b(p){return p*Math.PI/180}I.default=function(p){return A.geomReduce(p,function(s,t){return s+function(i){var n,r=0;switch(i.type){case"Polygon":return o(i.coordinates);case"MultiPolygon":for(n=0;n<i.coordinates.length;n++)r+=o(i.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(X,I){"use strict";function e(a,l,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=l||{},h.geometry=a,h}function A(a,l,c){if(c===void 0&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(a[0])||!r(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,c)}function k(a,l,c){c===void 0&&(c={});for(var h=0,u=a;h<u.length;h++){var x=u[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,c)}function o(a,l,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,c)}function T(a,l){l===void 0&&(l={});var c={type:"FeatureCollection"};return l.id&&(c.id=l.id),l.bbox&&(c.bbox=l.bbox),c.features=a,c}function b(a,l,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},l,c)}function p(a,l,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},l,c)}function s(a,l,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},l,c)}function t(a,l){l===void 0&&(l="kilometers");var c=I.factors[l];if(!c)throw new Error(l+" units is invalid");return a*c}function i(a,l){l===void 0&&(l="kilometers");var c=I.factors[l];if(!c)throw new Error(l+" units is invalid");return a/c}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=63710088e-1,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:1.0936*I.earthRadius},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:1.0936133},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=e,I.geometry=function(a,l,c){switch(c===void 0&&(c={}),a){case"Point":return A(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return p(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},I.point=A,I.points=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,l)}),c)},I.polygon=k,I.polygons=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,l)}),c)},I.lineString=o,I.lineStrings=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return o(h,l)}),c)},I.featureCollection=T,I.multiLineString=b,I.multiPoint=p,I.multiPolygon=s,I.geometryCollection=function(a,l,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},l,c)},I.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,l||0);return Math.round(a*c)/c},I.radiansToLength=t,I.lengthToRadians=i,I.lengthToDegrees=function(a,l){return n(i(a,l))},I.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},I.radiansToDegrees=n,I.degreesToRadians=function(a){return a%360*Math.PI/180},I.convertLength=function(a,l,c){if(l===void 0&&(l="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),c)},I.convertArea=function(a,l,c){if(l===void 0&&(l="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=I.areaFactors[l];if(!h)throw new Error("invalid original units");var u=I.areaFactors[c];if(!u)throw new Error("invalid final units");return a/h*u},I.isNumber=r,I.isObject=function(a){return!!a&&a.constructor===Object},I.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},I.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},3256:function(X,I,e){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var A=e(46284);function k(i,n,r){if(i!==null)for(var a,l,c,h,u,x,d,m,g=0,y=0,v=i.type,_=v==="FeatureCollection",f=v==="Feature",S=_?i.features.length:1,w=0;w<S;w++){u=(m=!!(d=_?i.features[w].geometry:f?i.geometry:i)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<u;E++){var P=0,C=0;if((h=m?d.geometries[E]:d)!==null){x=h.coordinates;var O=h.type;switch(g=!r||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(n(x,y,w,P,C)===!1)return!1;y++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],y,w,P,C)===!1)return!1;y++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(n(x[a][l],y,w,P,C)===!1)return!1;y++}O==="MultiLineString"&&P++,O==="Polygon"&&C++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(c=0;c<x[a][l].length-g;c++){if(n(x[a][l][c],y,w,P,C)===!1)return!1;y++}C++}P++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,c,h,u,x,d,m,g,y=0,v=i.type==="FeatureCollection",_=i.type==="Feature",f=v?i.features.length:1;for(r=0;r<f;r++){for(u=v?i.features[r].geometry:_?i.geometry:i,d=v?i.features[r].properties:_?i.properties:{},m=v?i.features[r].bbox:_?i.bbox:void 0,g=v?i.features[r].id:_?i.id:void 0,h=(x=!!u&&u.type==="GeometryCollection")?u.geometries.length:1,l=0;l<h;l++)if((c=x?u.geometries[l]:u)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(c,y,d,m,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(n(c.geometries[a],y,d,m,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,d,m,g)===!1)return!1;y++}}function p(i,n){b(i,function(r,a,l,c,h){var u,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(A.feature(r,l,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var d=0;d<r.coordinates.length;d++){var m={type:u,coordinates:r.coordinates[d]};if(n(A.feature(m,l),a,d)===!1)return!1}})}function s(i,n){p(i,function(r,a,l){var c=0;if(r.geometry){var h=r.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var u,x=0,d=0,m=0;return k(r,function(g,y,v,_,f){if(u===void 0||a>x||_>d||f>m)return u=g,x=a,d=_,m=f,void(c=0);var S=A.lineString([u,g],r.properties);if(n(S,a,l,f,c)===!1)return!1;c++,u=g})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");p(i,function(r,a,l){if(r.geometry!==null){var c=r.geometry.type,h=r.geometry.coordinates;switch(c){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<h.length;u++)if(n(A.lineString(h[u],r.properties),a,l,u)===!1)return!1}}})}I.coordEach=k,I.coordReduce=function(i,n,r,a){var l=r;return k(i,function(c,h,u,x,d){l=h===0&&r===void 0?c:n(l,c,h,u,x,d)},a),l},I.propEach=o,I.propReduce=function(i,n,r){var a=r;return o(i,function(l,c){a=c===0&&r===void 0?l:n(a,l,c)}),a},I.featureEach=T,I.featureReduce=function(i,n,r){var a=r;return T(i,function(l,c){a=c===0&&r===void 0?l:n(a,l,c)}),a},I.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},I.geomEach=b,I.geomReduce=function(i,n,r){var a=r;return b(i,function(l,c,h,u,x){a=c===0&&r===void 0?l:n(a,l,c,h,u,x)}),a},I.flattenEach=p,I.flattenReduce=function(i,n,r){var a=r;return p(i,function(l,c,h){a=c===0&&h===0&&r===void 0?l:n(a,l,c,h)}),a},I.segmentEach=s,I.segmentReduce=function(i,n,r){var a=r,l=!1;return s(i,function(c,h,u,x,d){a=l===!1&&r===void 0?c:n(a,c,h,u,x,d),l=!0}),a},I.lineEach=t,I.lineReduce=function(i,n,r){var a=r;return t(i,function(l,c,h,u){a=c===0&&r===void 0?l:n(a,l,c,h,u)}),a},I.findSegment=function(i,n){if(n=n||{},!A.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,c=n.geometryIndex||0,h=n.segmentIndex||0,u=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":u=u||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),A.lineString([x[h],x[h+1]],u,n);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h-1),A.lineString([x[c][h],x[c][h+1]],u,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),A.lineString([x[l][h],x[l][h+1]],u,n);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),h<0&&(h=x[l][c].length-h-1),A.lineString([x[l][c][h],x[l][c][h+1]],u,n)}throw new Error("geojson is invalid")},I.findPoint=function(i,n){if(n=n||{},!A.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,c=n.geometryIndex||0,h=n.coordIndex||0,u=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":u=u||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return A.point(x,u,n);case"MultiPoint":return l<0&&(l=x.length+l),A.point(x[l],u,n);case"LineString":return h<0&&(h=x.length+h),A.point(x[h],u,n);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h),A.point(x[c][h],u,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),A.point(x[l][h],u,n);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),h<0&&(h=x[l][c].length-h),A.point(x[l][c][h],u,n)}throw new Error("geojson is invalid")}},42428:function(X,I,e){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var A=e(84880);function k(o){var T=[1/0,1/0,-1/0,-1/0];return A.coordEach(o,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,I.default=k},76796:function(X,I){"use strict";function e(a,l,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=l||{},h.geometry=a,h}function A(a,l,c){if(c===void 0&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(a[0])||!r(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,c)}function k(a,l,c){c===void 0&&(c={});for(var h=0,u=a;h<u.length;h++){var x=u[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,c)}function o(a,l,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,c)}function T(a,l){l===void 0&&(l={});var c={type:"FeatureCollection"};return l.id&&(c.id=l.id),l.bbox&&(c.bbox=l.bbox),c.features=a,c}function b(a,l,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},l,c)}function p(a,l,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},l,c)}function s(a,l,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},l,c)}function t(a,l){l===void 0&&(l="kilometers");var c=I.factors[l];if(!c)throw new Error(l+" units is invalid");return a*c}function i(a,l){l===void 0&&(l="kilometers");var c=I.factors[l];if(!c)throw new Error(l+" units is invalid");return a/c}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=63710088e-1,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:1.0936*I.earthRadius},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:1.0936133},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=e,I.geometry=function(a,l,c){switch(c===void 0&&(c={}),a){case"Point":return A(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return p(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},I.point=A,I.points=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,l)}),c)},I.polygon=k,I.polygons=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,l)}),c)},I.lineString=o,I.lineStrings=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return o(h,l)}),c)},I.featureCollection=T,I.multiLineString=b,I.multiPoint=p,I.multiPolygon=s,I.geometryCollection=function(a,l,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},l,c)},I.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,l||0);return Math.round(a*c)/c},I.radiansToLength=t,I.lengthToRadians=i,I.lengthToDegrees=function(a,l){return n(i(a,l))},I.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},I.radiansToDegrees=n,I.degreesToRadians=function(a){return a%360*Math.PI/180},I.convertLength=function(a,l,c){if(l===void 0&&(l="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),c)},I.convertArea=function(a,l,c){if(l===void 0&&(l="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=I.areaFactors[l];if(!h)throw new Error("invalid original units");var u=I.areaFactors[c];if(!u)throw new Error("invalid final units");return a/h*u},I.isNumber=r,I.isObject=function(a){return!!a&&a.constructor===Object},I.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},I.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},84880:function(X,I,e){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var A=e(76796);function k(i,n,r){if(i!==null)for(var a,l,c,h,u,x,d,m,g=0,y=0,v=i.type,_=v==="FeatureCollection",f=v==="Feature",S=_?i.features.length:1,w=0;w<S;w++){u=(m=!!(d=_?i.features[w].geometry:f?i.geometry:i)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<u;E++){var P=0,C=0;if((h=m?d.geometries[E]:d)!==null){x=h.coordinates;var O=h.type;switch(g=!r||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(n(x,y,w,P,C)===!1)return!1;y++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],y,w,P,C)===!1)return!1;y++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(n(x[a][l],y,w,P,C)===!1)return!1;y++}O==="MultiLineString"&&P++,O==="Polygon"&&C++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(c=0;c<x[a][l].length-g;c++){if(n(x[a][l][c],y,w,P,C)===!1)return!1;y++}C++}P++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,c,h,u,x,d,m,g,y=0,v=i.type==="FeatureCollection",_=i.type==="Feature",f=v?i.features.length:1;for(r=0;r<f;r++){for(u=v?i.features[r].geometry:_?i.geometry:i,d=v?i.features[r].properties:_?i.properties:{},m=v?i.features[r].bbox:_?i.bbox:void 0,g=v?i.features[r].id:_?i.id:void 0,h=(x=!!u&&u.type==="GeometryCollection")?u.geometries.length:1,l=0;l<h;l++)if((c=x?u.geometries[l]:u)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(c,y,d,m,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(n(c.geometries[a],y,d,m,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,d,m,g)===!1)return!1;y++}}function p(i,n){b(i,function(r,a,l,c,h){var u,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(A.feature(r,l,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var d=0;d<r.coordinates.length;d++){var m={type:u,coordinates:r.coordinates[d]};if(n(A.feature(m,l),a,d)===!1)return!1}})}function s(i,n){p(i,function(r,a,l){var c=0;if(r.geometry){var h=r.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var u,x=0,d=0,m=0;return k(r,function(g,y,v,_,f){if(u===void 0||a>x||_>d||f>m)return u=g,x=a,d=_,m=f,void(c=0);var S=A.lineString([u,g],r.properties);if(n(S,a,l,f,c)===!1)return!1;c++,u=g})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");p(i,function(r,a,l){if(r.geometry!==null){var c=r.geometry.type,h=r.geometry.coordinates;switch(c){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<h.length;u++)if(n(A.lineString(h[u],r.properties),a,l,u)===!1)return!1}}})}I.coordEach=k,I.coordReduce=function(i,n,r,a){var l=r;return k(i,function(c,h,u,x,d){l=h===0&&r===void 0?c:n(l,c,h,u,x,d)},a),l},I.propEach=o,I.propReduce=function(i,n,r){var a=r;return o(i,function(l,c){a=c===0&&r===void 0?l:n(a,l,c)}),a},I.featureEach=T,I.featureReduce=function(i,n,r){var a=r;return T(i,function(l,c){a=c===0&&r===void 0?l:n(a,l,c)}),a},I.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},I.geomEach=b,I.geomReduce=function(i,n,r){var a=r;return b(i,function(l,c,h,u,x){a=c===0&&r===void 0?l:n(a,l,c,h,u,x)}),a},I.flattenEach=p,I.flattenReduce=function(i,n,r){var a=r;return p(i,function(l,c,h){a=c===0&&h===0&&r===void 0?l:n(a,l,c,h)}),a},I.segmentEach=s,I.segmentReduce=function(i,n,r){var a=r,l=!1;return s(i,function(c,h,u,x,d){a=l===!1&&r===void 0?c:n(a,c,h,u,x,d),l=!0}),a},I.lineEach=t,I.lineReduce=function(i,n,r){var a=r;return t(i,function(l,c,h,u){a=c===0&&r===void 0?l:n(a,l,c,h,u)}),a},I.findSegment=function(i,n){if(n=n||{},!A.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,c=n.geometryIndex||0,h=n.segmentIndex||0,u=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":u=u||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),A.lineString([x[h],x[h+1]],u,n);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h-1),A.lineString([x[c][h],x[c][h+1]],u,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),A.lineString([x[l][h],x[l][h+1]],u,n);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),h<0&&(h=x[l][c].length-h-1),A.lineString([x[l][c][h],x[l][c][h+1]],u,n)}throw new Error("geojson is invalid")},I.findPoint=function(i,n){if(n=n||{},!A.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,c=n.geometryIndex||0,h=n.coordIndex||0,u=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":u=u||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return A.point(x,u,n);case"MultiPoint":return l<0&&(l=x.length+l),A.point(x[l],u,n);case"LineString":return h<0&&(h=x.length+h),A.point(x[h],u,n);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h),A.point(x[c][h],u,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),A.point(x[l][h],u,n);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),h<0&&(h=x[l][c].length-h),A.point(x[l][c][h],u,n)}throw new Error("geojson is invalid")}},77844:function(X,I,e){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var A=e(43752),k=e(49840);I.default=function(o,T){T===void 0&&(T={});var b=0,p=0,s=0;return A.coordEach(o,function(t){b+=t[0],p+=t[1],s++}),k.point([b/s,p/s],T.properties)}},49840:function(X,I){"use strict";function e(a,l,c){c===void 0&&(c={});var h={type:"Feature"};return(c.id===0||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=l||{},h.geometry=a,h}function A(a,l,c){return c===void 0&&(c={}),e({type:"Point",coordinates:a},l,c)}function k(a,l,c){c===void 0&&(c={});for(var h=0,u=a;h<u.length;h++){var x=u[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,c)}function o(a,l,c){if(c===void 0&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,c)}function T(a,l){l===void 0&&(l={});var c={type:"FeatureCollection"};return l.id&&(c.id=l.id),l.bbox&&(c.bbox=l.bbox),c.features=a,c}function b(a,l,c){return c===void 0&&(c={}),e({type:"MultiLineString",coordinates:a},l,c)}function p(a,l,c){return c===void 0&&(c={}),e({type:"MultiPoint",coordinates:a},l,c)}function s(a,l,c){return c===void 0&&(c={}),e({type:"MultiPolygon",coordinates:a},l,c)}function t(a,l){l===void 0&&(l="kilometers");var c=I.factors[l];if(!c)throw new Error(l+" units is invalid");return a*c}function i(a,l){l===void 0&&(l="kilometers");var c=I.factors[l];if(!c)throw new Error(l+" units is invalid");return a/c}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=63710088e-1,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:I.earthRadius/1.0936},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:.91441111923921},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=e,I.geometry=function(a,l,c){switch(c===void 0&&(c={}),a){case"Point":return A(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return p(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},I.point=A,I.points=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return A(h,l)}),c)},I.polygon=k,I.polygons=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return k(h,l)}),c)},I.lineString=o,I.lineStrings=function(a,l,c){return c===void 0&&(c={}),T(a.map(function(h){return o(h,l)}),c)},I.featureCollection=T,I.multiLineString=b,I.multiPoint=p,I.multiPolygon=s,I.geometryCollection=function(a,l,c){return c===void 0&&(c={}),e({type:"GeometryCollection",geometries:a},l,c)},I.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,l||0);return Math.round(a*c)/c},I.radiansToLength=t,I.lengthToRadians=i,I.lengthToDegrees=function(a,l){return n(i(a,l))},I.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},I.radiansToDegrees=n,I.degreesToRadians=function(a){return a%360*Math.PI/180},I.convertLength=function(a,l,c){if(l===void 0&&(l="kilometers"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),c)},I.convertArea=function(a,l,c){if(l===void 0&&(l="meters"),c===void 0&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=I.areaFactors[l];if(!h)throw new Error("invalid original units");var u=I.areaFactors[c];if(!u)throw new Error("invalid final units");return a/h*u},I.isNumber=r,I.isObject=function(a){return!!a&&a.constructor===Object},I.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},I.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},I.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},I.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},I.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},I.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},I.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},I.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},I.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(X,I,e){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var A=e(49840);function k(i,n,r){if(i!==null)for(var a,l,c,h,u,x,d,m,g=0,y=0,v=i.type,_=v==="FeatureCollection",f=v==="Feature",S=_?i.features.length:1,w=0;w<S;w++){u=(m=!!(d=_?i.features[w].geometry:f?i.geometry:i)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<u;E++){var P=0,C=0;if((h=m?d.geometries[E]:d)!==null){x=h.coordinates;var O=h.type;switch(g=!r||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(n(x,y,w,P,C)===!1)return!1;y++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],y,w,P,C)===!1)return!1;y++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(n(x[a][l],y,w,P,C)===!1)return!1;y++}O==="MultiLineString"&&P++,O==="Polygon"&&C++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(c=0;c<x[a][l].length-g;c++){if(n(x[a][l][c],y,w,P,C)===!1)return!1;y++}C++}P++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,c,h,u,x,d,m,g,y=0,v=i.type==="FeatureCollection",_=i.type==="Feature",f=v?i.features.length:1;for(r=0;r<f;r++){for(u=v?i.features[r].geometry:_?i.geometry:i,d=v?i.features[r].properties:_?i.properties:{},m=v?i.features[r].bbox:_?i.bbox:void 0,g=v?i.features[r].id:_?i.id:void 0,h=(x=!!u&&u.type==="GeometryCollection")?u.geometries.length:1,l=0;l<h;l++)if((c=x?u.geometries[l]:u)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(c,y,d,m,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(n(c.geometries[a],y,d,m,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,d,m,g)===!1)return!1;y++}}function p(i,n){b(i,function(r,a,l,c,h){var u,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(A.feature(r,l,{bbox:c,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var d=0;d<r.coordinates.length;d++){var m={type:u,coordinates:r.coordinates[d]};if(n(A.feature(m,l),a,d)===!1)return!1}})}function s(i,n){p(i,function(r,a,l){var c=0;if(r.geometry){var h=r.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var u,x=0,d=0,m=0;return k(r,function(g,y,v,_,f){if(u===void 0||a>x||_>d||f>m)return u=g,x=a,d=_,m=f,void(c=0);var S=A.lineString([u,g],r.properties);if(n(S,a,l,f,c)===!1)return!1;c++,u=g})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");p(i,function(r,a,l){if(r.geometry!==null){var c=r.geometry.type,h=r.geometry.coordinates;switch(c){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<h.length;u++)if(n(A.lineString(h[u],r.properties),a,l,u)===!1)return!1}}})}I.coordEach=k,I.coordReduce=function(i,n,r,a){var l=r;return k(i,function(c,h,u,x,d){l=h===0&&r===void 0?c:n(l,c,h,u,x,d)},a),l},I.propEach=o,I.propReduce=function(i,n,r){var a=r;return o(i,function(l,c){a=c===0&&r===void 0?l:n(a,l,c)}),a},I.featureEach=T,I.featureReduce=function(i,n,r){var a=r;return T(i,function(l,c){a=c===0&&r===void 0?l:n(a,l,c)}),a},I.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},I.geomEach=b,I.geomReduce=function(i,n,r){var a=r;return b(i,function(l,c,h,u,x){a=c===0&&r===void 0?l:n(a,l,c,h,u,x)}),a},I.flattenEach=p,I.flattenReduce=function(i,n,r){var a=r;return p(i,function(l,c,h){a=c===0&&h===0&&r===void 0?l:n(a,l,c,h)}),a},I.segmentEach=s,I.segmentReduce=function(i,n,r){var a=r,l=!1;return s(i,function(c,h,u,x,d){a=l===!1&&r===void 0?c:n(a,c,h,u,x,d),l=!0}),a},I.lineEach=t,I.lineReduce=function(i,n,r){var a=r;return t(i,function(l,c,h,u){a=c===0&&r===void 0?l:n(a,l,c,h,u)}),a},I.findSegment=function(i,n){if(n=n||{},!A.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,c=n.geometryIndex||0,h=n.segmentIndex||0,u=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":u=u||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),A.lineString([x[h],x[h+1]],u,n);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h-1),A.lineString([x[c][h],x[c][h+1]],u,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),A.lineString([x[l][h],x[l][h+1]],u,n);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),h<0&&(h=x[l][c].length-h-1),A.lineString([x[l][c][h],x[l][c][h+1]],u,n)}throw new Error("geojson is invalid")},I.findPoint=function(i,n){if(n=n||{},!A.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,c=n.geometryIndex||0,h=n.coordIndex||0,u=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),u=u||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":u=u||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return A.point(x,u,n);case"MultiPoint":return l<0&&(l=x.length+l),A.point(x[l],u,n);case"LineString":return h<0&&(h=x.length+h),A.point(x[h],u,n);case"Polygon":return c<0&&(c=x.length+c),h<0&&(h=x[c].length+h),A.point(x[c][h],u,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),A.point(x[l][h],u,n);case"MultiPolygon":return l<0&&(l=x.length+l),c<0&&(c=x[l].length+c),h<0&&(h=x[l][c].length-h),A.point(x[l][c][h],u,n)}throw new Error("geojson is invalid")}},49972:function(X){X.exports=function(I){var e=0,A=0,k=0,o=0;return I.map(function(T){var b=(T=T.slice())[0],p=b.toUpperCase();if(b!=p)switch(T[0]=p,b){case"a":T[6]+=k,T[7]+=o;break;case"v":T[1]+=o;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=o}switch(p){case"Z":k=e,o=A;break;case"H":k=T[1];break;case"V":o=T[1];break;case"M":k=e=T[1],o=A=T[2];break;default:k=T[T.length-2],o=T[T.length-1]}return T})}},76752:function(X){"use strict";X.exports=function(I,e){if(!I||I.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var A=Array(2*e),k=0;k<e;k++){for(var o=-1/0,T=1/0,b=k,p=I.length;b<p;b+=e)I[b]>o&&(o=I[b]),I[b]<T&&(T=I[b]);A[k]=T,A[e+k]=o}return A}},10272:function(X){"use strict";X.exports=function(I,e,A){if(typeof Array.prototype.findIndex=="function")return I.findIndex(e,A);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(I),o=k.length;if(o===0)return-1;for(var T=0;T<o;T++)if(e.call(A,k[T],T,k))return T;return-1}},71152:function(X,I,e){"use strict";var A=e(76752);X.exports=function(k,o,T){if(!k||k.length==null)throw Error("Argument should be an array");o==null&&(o=1),T==null&&(T=A(k,o));for(var b=0;b<o;b++){var p=T[o+b],s=T[b],t=b,i=k.length;if(p===1/0&&s===-1/0)for(t=b;t<i;t+=o)k[t]=k[t]===p?1:k[t]===s?0:.5;else if(p===1/0)for(t=b;t<i;t+=o)k[t]=k[t]===p?1:0;else if(s===-1/0)for(t=b;t<i;t+=o)k[t]=k[t]===s?0:1;else{var n=p-s;for(t=b;t<i;t+=o)isNaN(k[t])||(k[t]=n===0?.5:(k[t]-s)/n)}}return k}},67752:function(X){X.exports=function(I,e){var A=typeof I=="number",k=typeof e=="number";A&&!k?(e=I,I=0):A||k||(I=0,e=0);var o=(e|=0)-(I|=0);if(o<0)throw new Error("array length must be positive");for(var T=new Array(o),b=0,p=I;b<o;b++,p++)T[b]=p;return T}},45408:function(X,I,e){"use strict";var A=e(4168);function k(D){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},k(D)}var o,T,b=e(86832).codes,p=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,n=b.ERR_MISSING_ARGS,r=e(26144),a=e(35840).inspect,l=e(35840).types,c=l.isPromise,h=l.isRegExp,u=Object.assign?Object.assign:e(60964).assign,x=Object.is?Object.is:e(39896);function d(){var D=e(25116);o=D.isDeepEqual,T=D.isDeepStrictEqual}var m=!1,g=X.exports=f,y={};function v(D){throw D.message instanceof Error?D.message:new r(D)}function _(D,N,W,F){if(!W){var j=!1;if(N===0)j=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var q=new r({actual:W,expected:!0,message:F,operator:"==",stackStartFn:D});throw q.generatedMessage=j,q}}function f(){for(var D=arguments.length,N=new Array(D),W=0;W<D;W++)N[W]=arguments[W];_.apply(void 0,[f,N.length].concat(N))}g.fail=function D(N,W,F,j,q){var te,ee=arguments.length;if(ee===0?te="Failed":ee===1?(F=N,N=void 0):(m===!1&&(m=!0,(A.emitWarning?A.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),ee===2&&(j="!=")),F instanceof Error)throw F;var Q={actual:N,expected:W,operator:j===void 0?"fail":j,stackStartFn:q||D};F!==void 0&&(Q.message=F);var J=new r(Q);throw te&&(J.message=te,J.generatedMessage=!0),J},g.AssertionError=r,g.ok=f,g.equal=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");N!=W&&v({actual:N,expected:W,message:F,operator:"==",stackStartFn:D})},g.notEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");N==W&&v({actual:N,expected:W,message:F,operator:"!=",stackStartFn:D})},g.deepEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),o(N,W)||v({actual:N,expected:W,message:F,operator:"deepEqual",stackStartFn:D})},g.notDeepEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),o(N,W)&&v({actual:N,expected:W,message:F,operator:"notDeepEqual",stackStartFn:D})},g.deepStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),T(N,W)||v({actual:N,expected:W,message:F,operator:"deepStrictEqual",stackStartFn:D})},g.notDeepStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),T(N,W)&&v({actual:N,expected:W,message:F,operator:"notDeepStrictEqual",stackStartFn:D})},g.strictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)||v({actual:N,expected:W,message:F,operator:"strictEqual",stackStartFn:D})},g.notStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)&&v({actual:N,expected:W,message:F,operator:"notStrictEqual",stackStartFn:D})};var S=function D(N,W,F){var j=this;(function(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")})(this,D),W.forEach(function(q){q in N&&(F!==void 0&&typeof F[q]=="string"&&h(N[q])&&N[q].test(F[q])?j[q]=F[q]:j[q]=N[q])})};function w(D,N,W,F){if(typeof N!="function"){if(h(N))return N.test(D);if(arguments.length===2)throw new s("expected",["Function","RegExp"],N);if(k(D)!=="object"||D===null){var j=new r({actual:D,expected:N,message:W,operator:"deepStrictEqual",stackStartFn:F});throw j.operator=F.name,j}var q=Object.keys(N);if(N instanceof Error)q.push("name","message");else if(q.length===0)throw new t("error",N,"may not be an empty object");return o===void 0&&d(),q.forEach(function(te){typeof D[te]=="string"&&h(N[te])&&N[te].test(D[te])||function(ee,Q,J,K,Y,ie){if(!(J in ee)||!T(ee[J],Q[J])){if(!K){var se=new S(ee,Y),ae=new S(Q,Y,ee),ue=new r({actual:se,expected:ae,operator:"deepStrictEqual",stackStartFn:ie});throw ue.actual=ee,ue.expected=Q,ue.operator=ie.name,ue}v({actual:ee,expected:Q,message:K,operator:ie.name,stackStartFn:ie})}}(D,N,te,W,q,F)}),!0}return N.prototype!==void 0&&D instanceof N||!Error.isPrototypeOf(N)&&N.call({},D)===!0}function E(D){if(typeof D!="function")throw new s("fn","Function",D);try{D()}catch(N){return N}return y}function P(D){return c(D)||D!==null&&k(D)==="object"&&typeof D.then=="function"&&typeof D.catch=="function"}function C(D){return Promise.resolve().then(function(){var N;if(typeof D=="function"){if(!P(N=D()))throw new i("instance of Promise","promiseFn",N)}else{if(!P(D))throw new s("promiseFn",["Function","Promise"],D);N=D}return Promise.resolve().then(function(){return N}).then(function(){return y}).catch(function(W){return W})})}function O(D,N,W,F){if(typeof W=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],W);if(k(N)==="object"&&N!==null){if(N.message===W)throw new p("error/message",'The error message "'.concat(N.message,'" is identical to the message.'))}else if(N===W)throw new p("error/message",'The error "'.concat(N,'" is identical to the message.'));F=W,W=void 0}else if(W!=null&&k(W)!=="object"&&typeof W!="function")throw new s("error",["Object","Error","Function","RegExp"],W);if(N===y){var j="";W&&W.name&&(j+=" (".concat(W.name,")")),j+=F?": ".concat(F):".";var q=D.name==="rejects"?"rejection":"exception";v({actual:void 0,expected:W,operator:D.name,message:"Missing expected ".concat(q).concat(j),stackStartFn:D})}if(W&&!w(N,W,F,D))throw N}function R(D,N,W,F){if(N!==y){if(typeof W=="string"&&(F=W,W=void 0),!W||w(N,W)){var j=F?": ".concat(F):".",q=D.name==="doesNotReject"?"rejection":"exception";v({actual:N,expected:W,operator:D.name,message:"Got unwanted ".concat(q).concat(j,`
`)+'Actual message: "'.concat(N&&N.message,'"'),stackStartFn:D})}throw N}}function U(){for(var D=arguments.length,N=new Array(D),W=0;W<D;W++)N[W]=arguments[W];_.apply(void 0,[U,N.length].concat(N))}g.throws=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];O.apply(void 0,[D,E(N)].concat(F))},g.rejects=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];return C(N).then(function(q){return O.apply(void 0,[D,q].concat(F))})},g.doesNotThrow=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];R.apply(void 0,[D,E(N)].concat(F))},g.doesNotReject=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),j=1;j<W;j++)F[j-1]=arguments[j];return C(N).then(function(q){return R.apply(void 0,[D,q].concat(F))})},g.ifError=function D(N){if(N!=null){var W="ifError got unwanted exception: ";k(N)==="object"&&typeof N.message=="string"?N.message.length===0&&N.constructor?W+=N.constructor.name:W+=N.message:W+=a(N);var F=new r({actual:N,expected:null,operator:"ifError",message:W,stackStartFn:D}),j=N.stack;if(typeof j=="string"){var q=j.split(`
`);q.shift();for(var te=F.stack.split(`
`),ee=0;ee<q.length;ee++){var Q=te.indexOf(q[ee]);if(Q!==-1){te=te.slice(0,Q);break}}F.stack="".concat(te.join(`
`),`
`).concat(q.join(`
`))}throw F}},g.strict=u(U,g,{equal:g.strictEqual,deepEqual:g.deepStrictEqual,notEqual:g.notStrictEqual,notDeepEqual:g.notDeepStrictEqual}),g.strict.strict=g.strict},26144:function(X,I,e){"use strict";var A=e(4168);function k(v,_,f){return _ in v?Object.defineProperty(v,_,{value:f,enumerable:!0,configurable:!0,writable:!0}):v[_]=f,v}function o(v,_){for(var f=0;f<_.length;f++){var S=_[f];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}function T(v,_){return!_||n(_)!=="object"&&typeof _!="function"?b(v):_}function b(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function p(v){var _=typeof Map=="function"?new Map:void 0;return p=function(f){if(f===null||(S=f,Function.toString.call(S).indexOf("[native code]")===-1))return f;var S;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(f))return _.get(f);_.set(f,w)}function w(){return s(f,arguments,i(this).constructor)}return w.prototype=Object.create(f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,f)},p(v)}function s(v,_,f){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,w,E){var P=[null];P.push.apply(P,w);var C=new(Function.bind.apply(S,P));return E&&t(C,E.prototype),C},s.apply(null,arguments)}function t(v,_){return t=Object.setPrototypeOf||function(f,S){return f.__proto__=S,f},t(v,_)}function i(v){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},i(v)}function n(v){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},n(v)}var r=e(35840).inspect,a=e(86832).codes.ERR_INVALID_ARG_TYPE;function l(v,_,f){return(f===void 0||f>v.length)&&(f=v.length),v.substring(f-_.length,f)===_}var c="",h="",u="",x="",d={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function m(v){var _=Object.keys(v),f=Object.create(Object.getPrototypeOf(v));return _.forEach(function(S){f[S]=v[S]}),Object.defineProperty(f,"message",{value:v.message}),f}function g(v){return r(v,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var y=function(v){function _(w){var E;if(function(te,ee){if(!(te instanceof ee))throw new TypeError("Cannot call a class as a function")}(this,_),n(w)!=="object"||w===null)throw new a("options","Object",w);var P=w.message,C=w.operator,O=w.stackStartFn,R=w.actual,U=w.expected,D=Error.stackTraceLimit;if(Error.stackTraceLimit=0,P!=null)E=T(this,i(_).call(this,String(P)));else if(A.stderr&&A.stderr.isTTY&&(A.stderr&&A.stderr.getColorDepth&&A.stderr.getColorDepth()!==1?(c="\x1B[34m",h="\x1B[32m",x="\x1B[39m",u="\x1B[31m"):(c="",h="",x="",u="")),n(R)==="object"&&R!==null&&n(U)==="object"&&U!==null&&"stack"in R&&R instanceof Error&&"stack"in U&&U instanceof Error&&(R=m(R),U=m(U)),C==="deepStrictEqual"||C==="strictEqual")E=T(this,i(_).call(this,function(te,ee,Q){var J="",K="",Y=0,ie="",se=!1,ae=g(te),ue=ae.split(`
`),ve=g(ee).split(`
`),ye=0,de="";if(Q==="strictEqual"&&n(te)==="object"&&n(ee)==="object"&&te!==null&&ee!==null&&(Q="strictEqualObject"),ue.length===1&&ve.length===1&&ue[0]!==ve[0]){var pe=ue[0].length+ve[0].length;if(pe<=10){if(!(n(te)==="object"&&te!==null||n(ee)==="object"&&ee!==null||te===0&&ee===0))return"".concat(d[Q],`

`)+"".concat(ue[0]," !== ").concat(ve[0],`
`)}else if(Q!=="strictEqualObject"&&pe<(A.stderr&&A.stderr.isTTY?A.stderr.columns:80)){for(;ue[0][ye]===ve[0][ye];)ye++;ye>2&&(de=`
  `.concat(function(Ie,Oe){if(Oe=Math.floor(Oe),Ie.length==0||Oe==0)return"";var he=Ie.length*Oe;for(Oe=Math.floor(Math.log(Oe)/Math.log(2));Oe;)Ie+=Ie,Oe--;return Ie+Ie.substring(0,he-Ie.length)}(" ",ye),"^"),ye=0)}}for(var ge=ue[ue.length-1],ke=ve[ve.length-1];ge===ke&&(ye++<2?ie=`
  `.concat(ge).concat(ie):J=ge,ue.pop(),ve.pop(),ue.length!==0&&ve.length!==0);)ge=ue[ue.length-1],ke=ve[ve.length-1];var Ee=Math.max(ue.length,ve.length);if(Ee===0){var me=ae.split(`
`);if(me.length>30)for(me[26]="".concat(c,"...").concat(x);me.length>27;)me.pop();return"".concat(d.notIdentical,`

`).concat(me.join(`
`),`
`)}ye>3&&(ie=`
`.concat(c,"...").concat(x).concat(ie),se=!0),J!==""&&(ie=`
  `.concat(J).concat(ie),J="");var oe=0,re=d[Q]+`
`.concat(h,"+ actual").concat(x," ").concat(u,"- expected").concat(x),fe=" ".concat(c,"...").concat(x," Lines skipped");for(ye=0;ye<Ee;ye++){var Se=ye-Y;if(ue.length<ye+1)Se>1&&ye>2&&(Se>4?(K+=`
`.concat(c,"...").concat(x),se=!0):Se>3&&(K+=`
  `.concat(ve[ye-2]),oe++),K+=`
  `.concat(ve[ye-1]),oe++),Y=ye,J+=`
`.concat(u,"-").concat(x," ").concat(ve[ye]),oe++;else if(ve.length<ye+1)Se>1&&ye>2&&(Se>4?(K+=`
`.concat(c,"...").concat(x),se=!0):Se>3&&(K+=`
  `.concat(ue[ye-2]),oe++),K+=`
  `.concat(ue[ye-1]),oe++),Y=ye,K+=`
`.concat(h,"+").concat(x," ").concat(ue[ye]),oe++;else{var be=ve[ye],we=ue[ye],Me=we!==be&&(!l(we,",")||we.slice(0,-1)!==be);Me&&l(be,",")&&be.slice(0,-1)===we&&(Me=!1,we+=","),Me?(Se>1&&ye>2&&(Se>4?(K+=`
`.concat(c,"...").concat(x),se=!0):Se>3&&(K+=`
  `.concat(ue[ye-2]),oe++),K+=`
  `.concat(ue[ye-1]),oe++),Y=ye,K+=`
`.concat(h,"+").concat(x," ").concat(we),J+=`
`.concat(u,"-").concat(x," ").concat(be),oe+=2):(K+=J,J="",Se!==1&&ye!==0||(K+=`
  `.concat(we),oe++))}if(oe>20&&ye<Ee-2)return"".concat(re).concat(fe,`
`).concat(K,`
`).concat(c,"...").concat(x).concat(J,`
`)+"".concat(c,"...").concat(x)}return"".concat(re).concat(se?fe:"",`
`).concat(K).concat(J).concat(ie).concat(de)}(R,U,C)));else if(C==="notDeepStrictEqual"||C==="notStrictEqual"){var N=d[C],W=g(R).split(`
`);if(C==="notStrictEqual"&&n(R)==="object"&&R!==null&&(N=d.notStrictEqualObject),W.length>30)for(W[26]="".concat(c,"...").concat(x);W.length>27;)W.pop();E=W.length===1?T(this,i(_).call(this,"".concat(N," ").concat(W[0]))):T(this,i(_).call(this,"".concat(N,`

`).concat(W.join(`
`),`
`)))}else{var F=g(R),j="",q=d[C];C==="notDeepEqual"||C==="notEqual"?(F="".concat(d[C],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(j="".concat(g(U)),F.length>512&&(F="".concat(F.slice(0,509),"...")),j.length>512&&(j="".concat(j.slice(0,509),"...")),C==="deepEqual"||C==="equal"?F="".concat(q,`

`).concat(F,`

should equal

`):j=" ".concat(C," ").concat(j)),E=T(this,i(_).call(this,"".concat(F).concat(j)))}return Error.stackTraceLimit=D,E.generatedMessage=!P,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=R,E.expected=U,E.operator=C,Error.captureStackTrace&&Error.captureStackTrace(b(E),O),E.stack,E.name="AssertionError",T(E)}var f,S;return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(_,v),f=_,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:r.custom,value:function(w,E){return r(this,function(P){for(var C=1;C<arguments.length;C++){var O=arguments[C]!=null?arguments[C]:{},R=Object.keys(O);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(O).filter(function(U){return Object.getOwnPropertyDescriptor(O,U).enumerable}))),R.forEach(function(U){k(P,U,O[U])})}return P}({},E,{customInspect:!1,depth:0}))}}],S&&o(f.prototype,S),_}(p(Error));X.exports=y},86832:function(X,I,e){"use strict";function A(i){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},A(i)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},k(i)}function o(i,n){return o=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},o(i,n)}var T,b,p={};function s(i,n,r){r||(r=Error);var a=function(l){function c(h,u,x){var d;return function(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}(this,c),d=function(m,g){return!g||A(g)!=="object"&&typeof g!="function"?function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(m):g}(this,k(c).call(this,function(m,g,y){return typeof n=="string"?n:n(m,g,y)}(h,u,x))),d.code=i,d}return function(h,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(u&&u.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),u&&o(h,u)}(c,l),c}(r);p[i]=a}function t(i,n){if(Array.isArray(i)){var r=i.length;return i=i.map(function(a){return String(a)}),r>2?"one of ".concat(n," ").concat(i.slice(0,r-1).join(", "),", or ")+i[r-1]:r===2?"one of ".concat(n," ").concat(i[0]," or ").concat(i[1]):"of ".concat(n," ").concat(i[0])}return"of ".concat(n," ").concat(String(i))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(i,n,r){var a,l,c,h,u;if(T===void 0&&(T=e(45408)),T(typeof i=="string","'name' must be a string"),typeof n=="string"&&(l="not ",n.substr(0,4)===l)?(a="must not be",n=n.replace(/^not /,"")):a="must be",function(d,m,g){return(g===void 0||g>d.length)&&(g=d.length),d.substring(g-9,g)===m}(i," argument"))c="The ".concat(i," ").concat(a," ").concat(t(n,"type"));else{var x=(typeof u!="number"&&(u=0),u+1>(h=i).length||h.indexOf(".",u)===-1?"argument":"property");c='The "'.concat(i,'" ').concat(x," ").concat(a," ").concat(t(n,"type"))}return c+". Received type ".concat(A(r))},TypeError),s("ERR_INVALID_ARG_VALUE",function(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(35840));var a=b.inspect(n);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(r,". Received ").concat(a)},TypeError,RangeError),s("ERR_INVALID_RETURN_VALUE",function(i,n,r){var a;return a=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(A(r)),"Expected ".concat(i,' to be returned from the "').concat(n,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];T===void 0&&(T=e(45408)),T(n.length>0,"At least one arg needs to be specified");var a="The ",l=n.length;switch(n=n.map(function(c){return'"'.concat(c,'"')}),l){case 1:a+="".concat(n[0]," argument");break;case 2:a+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:a+=n.slice(0,l-1).join(", "),a+=", and ".concat(n[l-1]," arguments")}return"".concat(a," must be specified")},TypeError),X.exports.codes=p},25116:function(X,I,e){"use strict";function A(Y,ie){return function(se){if(Array.isArray(se))return se}(Y)||function(se,ae){var ue=[],ve=!0,ye=!1,de=void 0;try{for(var pe,ge=se[Symbol.iterator]();!(ve=(pe=ge.next()).done)&&(ue.push(pe.value),!ae||ue.length!==ae);ve=!0);}catch(ke){ye=!0,de=ke}finally{try{ve||ge.return==null||ge.return()}finally{if(ye)throw de}}return ue}(Y,ie)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(Y){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},k(Y)}var o=/a/g.flags!==void 0,T=function(Y){var ie=[];return Y.forEach(function(se){return ie.push(se)}),ie},b=function(Y){var ie=[];return Y.forEach(function(se,ae){return ie.push([ae,se])}),ie},p=Object.is?Object.is:e(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i(Y){return Y.call.bind(Y)}var n=i(Object.prototype.hasOwnProperty),r=i(Object.prototype.propertyIsEnumerable),a=i(Object.prototype.toString),l=e(35840).types,c=l.isAnyArrayBuffer,h=l.isArrayBufferView,u=l.isDate,x=l.isMap,d=l.isRegExp,m=l.isSet,g=l.isNativeError,y=l.isBoxedPrimitive,v=l.isNumberObject,_=l.isStringObject,f=l.isBooleanObject,S=l.isBigIntObject,w=l.isSymbolObject,E=l.isFloat32Array,P=l.isFloat64Array;function C(Y){if(Y.length===0||Y.length>10)return!0;for(var ie=0;ie<Y.length;ie++){var se=Y.charCodeAt(ie);if(se<48||se>57)return!0}return Y.length===10&&Y>=Math.pow(2,32)}function O(Y){return Object.keys(Y).filter(C).concat(s(Y).filter(Object.prototype.propertyIsEnumerable.bind(Y)))}function R(Y,ie){if(Y===ie)return 0;for(var se=Y.length,ae=ie.length,ue=0,ve=Math.min(se,ae);ue<ve;++ue)if(Y[ue]!==ie[ue]){se=Y[ue],ae=ie[ue];break}return se<ae?-1:ae<se?1:0}var U=0,D=1,N=2,W=3;function F(Y,ie,se,ae){if(Y===ie)return Y!==0||!se||p(Y,ie);if(se){if(k(Y)!=="object")return typeof Y=="number"&&t(Y)&&t(ie);if(k(ie)!=="object"||Y===null||ie===null||Object.getPrototypeOf(Y)!==Object.getPrototypeOf(ie))return!1}else{if(Y===null||k(Y)!=="object")return(ie===null||k(ie)!=="object")&&Y==ie;if(ie===null||k(ie)!=="object")return!1}var ue,ve,ye,de,pe=a(Y);if(pe!==a(ie))return!1;if(Array.isArray(Y)){if(Y.length!==ie.length)return!1;var ge=O(Y),ke=O(ie);return ge.length===ke.length&&q(Y,ie,se,ae,D,ge)}if(pe==="[object Object]"&&(!x(Y)&&x(ie)||!m(Y)&&m(ie)))return!1;if(u(Y)){if(!u(ie)||Date.prototype.getTime.call(Y)!==Date.prototype.getTime.call(ie))return!1}else if(d(Y)){if(!d(ie)||(ye=Y,de=ie,!(o?ye.source===de.source&&ye.flags===de.flags:RegExp.prototype.toString.call(ye)===RegExp.prototype.toString.call(de))))return!1}else if(g(Y)||Y instanceof Error){if(Y.message!==ie.message||Y.name!==ie.name)return!1}else{if(h(Y)){if(se||!E(Y)&&!P(Y)){if(!function(oe,re){return oe.byteLength===re.byteLength&&R(new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength),new Uint8Array(re.buffer,re.byteOffset,re.byteLength))===0}(Y,ie))return!1}else if(!function(oe,re){if(oe.byteLength!==re.byteLength)return!1;for(var fe=0;fe<oe.byteLength;fe++)if(oe[fe]!==re[fe])return!1;return!0}(Y,ie))return!1;var Ee=O(Y),me=O(ie);return Ee.length===me.length&&q(Y,ie,se,ae,U,Ee)}if(m(Y))return!(!m(ie)||Y.size!==ie.size)&&q(Y,ie,se,ae,N);if(x(Y))return!(!x(ie)||Y.size!==ie.size)&&q(Y,ie,se,ae,W);if(c(Y)){if(ve=ie,(ue=Y).byteLength!==ve.byteLength||R(new Uint8Array(ue),new Uint8Array(ve))!==0)return!1}else if(y(Y)&&!function(oe,re){return v(oe)?v(re)&&p(Number.prototype.valueOf.call(oe),Number.prototype.valueOf.call(re)):_(oe)?_(re)&&String.prototype.valueOf.call(oe)===String.prototype.valueOf.call(re):f(oe)?f(re)&&Boolean.prototype.valueOf.call(oe)===Boolean.prototype.valueOf.call(re):S(oe)?S(re)&&BigInt.prototype.valueOf.call(oe)===BigInt.prototype.valueOf.call(re):w(re)&&Symbol.prototype.valueOf.call(oe)===Symbol.prototype.valueOf.call(re)}(Y,ie))return!1}return q(Y,ie,se,ae,U)}function j(Y,ie){return ie.filter(function(se){return r(Y,se)})}function q(Y,ie,se,ae,ue,ve){if(arguments.length===5){ve=Object.keys(Y);var ye=Object.keys(ie);if(ve.length!==ye.length)return!1}for(var de=0;de<ve.length;de++)if(!n(ie,ve[de]))return!1;if(se&&arguments.length===5){var pe=s(Y);if(pe.length!==0){var ge=0;for(de=0;de<pe.length;de++){var ke=pe[de];if(r(Y,ke)){if(!r(ie,ke))return!1;ve.push(ke),ge++}else if(r(ie,ke))return!1}var Ee=s(ie);if(pe.length!==Ee.length&&j(ie,Ee).length!==ge)return!1}else{var me=s(ie);if(me.length!==0&&j(ie,me).length!==0)return!1}}if(ve.length===0&&(ue===U||ue===D&&Y.length===0||Y.size===0))return!0;if(ae===void 0)ae={val1:new Map,val2:new Map,position:0};else{var oe=ae.val1.get(Y);if(oe!==void 0){var re=ae.val2.get(ie);if(re!==void 0)return oe===re}ae.position++}ae.val1.set(Y,ae.position),ae.val2.set(ie,ae.position);var fe=function(Se,be,we,Me,Ie,Oe){var he=0;if(Oe===N){if(!function(Le,Be,Ve,Ze){for(var rt=null,it=T(Le),dt=0;dt<it.length;dt++){var mt=it[dt];if(k(mt)==="object"&&mt!==null)rt===null&&(rt=new Set),rt.add(mt);else if(!Be.has(mt)){if(Ve||!Q(Le,Be,mt))return!1;rt===null&&(rt=new Set),rt.add(mt)}}if(rt!==null){for(var ht=T(Be),Qe=0;Qe<ht.length;Qe++){var Je=ht[Qe];if(k(Je)==="object"&&Je!==null){if(!te(rt,Je,Ve,Ze))return!1}else if(!Ve&&!Le.has(Je)&&!te(rt,Je,Ve,Ze))return!1}return rt.size===0}return!0}(Se,be,we,Ie))return!1}else if(Oe===W){if(!function(Le,Be,Ve,Ze){for(var rt=null,it=b(Le),dt=0;dt<it.length;dt++){var mt=A(it[dt],2),ht=mt[0],Qe=mt[1];if(k(ht)==="object"&&ht!==null)rt===null&&(rt=new Set),rt.add(ht);else{var Je=Be.get(ht);if(Je===void 0&&!Be.has(ht)||!F(Qe,Je,Ve,Ze)){if(Ve||!J(Le,Be,ht,Qe,Ze))return!1;rt===null&&(rt=new Set),rt.add(ht)}}}if(rt!==null){for(var wt=b(Be),Pt=0;Pt<wt.length;Pt++){var It=A(wt[Pt],2),At=(ht=It[0],It[1]);if(k(ht)==="object"&&ht!==null){if(!K(rt,Le,ht,At,Ve,Ze))return!1}else if(!(Ve||Le.has(ht)&&F(Le.get(ht),At,!1,Ze)||K(rt,Le,ht,At,!1,Ze)))return!1}return rt.size===0}return!0}(Se,be,we,Ie))return!1}else if(Oe===D)for(;he<Se.length;he++){if(!n(Se,he)){if(n(be,he))return!1;for(var _e=Object.keys(Se);he<_e.length;he++){var Ae=_e[he];if(!n(be,Ae)||!F(Se[Ae],be[Ae],we,Ie))return!1}return _e.length===Object.keys(be).length}if(!n(be,he)||!F(Se[he],be[he],we,Ie))return!1}for(he=0;he<Me.length;he++){var De=Me[he];if(!F(Se[De],be[De],we,Ie))return!1}return!0}(Y,ie,se,ve,ae,ue);return ae.val1.delete(Y),ae.val2.delete(ie),fe}function te(Y,ie,se,ae){for(var ue=T(Y),ve=0;ve<ue.length;ve++){var ye=ue[ve];if(F(ie,ye,se,ae))return Y.delete(ye),!0}return!1}function ee(Y){switch(k(Y)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Y=+Y;case"number":if(t(Y))return!1}return!0}function Q(Y,ie,se){var ae=ee(se);return ae??(ie.has(ae)&&!Y.has(ae))}function J(Y,ie,se,ae,ue){var ve=ee(se);if(ve!=null)return ve;var ye=ie.get(ve);return!(ye===void 0&&!ie.has(ve)||!F(ae,ye,!1,ue))&&!Y.has(ve)&&F(ae,ye,!1,ue)}function K(Y,ie,se,ae,ue,ve){for(var ye=T(Y),de=0;de<ye.length;de++){var pe=ye[de];if(F(se,pe,ue,ve)&&F(ae,ie.get(pe),ue,ve))return Y.delete(pe),!0}return!1}X.exports={isDeepEqual:function(Y,ie){return F(Y,ie,!1)},isDeepStrictEqual:function(Y,ie){return F(Y,ie,!0)}}},83160:function(X,I,e){"use strict";e.r(I),e.d(I,{decode:function(){return b},encode:function(){return T}});for(var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<64;o++)k[A.charCodeAt(o)]=o;var T=function(p){var s,t=new Uint8Array(p),i=t.length,n="";for(s=0;s<i;s+=3)n+=A[t[s]>>2],n+=A[(3&t[s])<<4|t[s+1]>>4],n+=A[(15&t[s+1])<<2|t[s+2]>>6],n+=A[63&t[s+2]];return i%3==2?n=n.substring(0,n.length-1)+"=":i%3==1&&(n=n.substring(0,n.length-2)+"=="),n},b=function(p){var s,t,i,n,r,a=.75*p.length,l=p.length,c=0;p[p.length-1]==="="&&(a--,p[p.length-2]==="="&&a--);var h=new ArrayBuffer(a),u=new Uint8Array(h);for(s=0;s<l;s+=4)t=k[p.charCodeAt(s)],i=k[p.charCodeAt(s+1)],n=k[p.charCodeAt(s+2)],r=k[p.charCodeAt(s+3)],u[c++]=t<<2|i>>4,u[c++]=(15&i)<<4|n>>2,u[c++]=(3&n)<<6|63&r;return h}},59968:function(X,I){"use strict";I.byteLength=function(s){var t=b(s),i=t[0],n=t[1];return 3*(i+n)/4-n},I.toByteArray=function(s){var t,i,n=b(s),r=n[0],a=n[1],l=new k(function(u,x,d){return 3*(x+d)/4-d}(0,r,a)),c=0,h=a>0?r-4:r;for(i=0;i<h;i+=4)t=A[s.charCodeAt(i)]<<18|A[s.charCodeAt(i+1)]<<12|A[s.charCodeAt(i+2)]<<6|A[s.charCodeAt(i+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return a===2&&(t=A[s.charCodeAt(i)]<<2|A[s.charCodeAt(i+1)]>>4,l[c++]=255&t),a===1&&(t=A[s.charCodeAt(i)]<<10|A[s.charCodeAt(i+1)]<<4|A[s.charCodeAt(i+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},I.fromByteArray=function(s){for(var t,i=s.length,n=i%3,r=[],a=16383,l=0,c=i-n;l<c;l+=a)r.push(p(s,l,l+a>c?c:l+a));return n===1?(t=s[i-1],r.push(e[t>>2]+e[t<<4&63]+"==")):n===2&&(t=(s[i-2]<<8)+s[i-1],r.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),r.join("")};for(var e=[],A=[],k=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=o[T],A[o.charCodeAt(T)]=T;function b(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=s.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function p(s,t,i){for(var n,r,a=[],l=t;l<i;l+=3)n=(s[l]<<16&16711680)+(s[l+1]<<8&65280)+(255&s[l+2]),a.push(e[(r=n)>>18&63]+e[r>>12&63]+e[r>>6&63]+e[63&r]);return a.join("")}A[45]=62,A[95]=63},64928:function(X){"use strict";function I(b,p,s,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,p):a-p)>=0?(n=r,i=r-1):t=r+1}return n}function e(b,p,s,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,p):a-p)>0?(n=r,i=r-1):t=r+1}return n}function A(b,p,s,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,p):a-p)<0?(n=r,t=r+1):i=r-1}return n}function k(b,p,s,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,p):a-p)<=0?(n=r,t=r+1):i=r-1}return n}function o(b,p,s,t,i){for(;t<=i;){var n=t+i>>>1,r=b[n],a=s!==void 0?s(r,p):r-p;if(a===0)return n;a<=0?t=n+1:i=n-1}return-1}function T(b,p,s,t,i,n){return typeof s=="function"?n(b,p,s,t===void 0?0:0|t,i===void 0?b.length-1:0|i):n(b,p,void 0,s===void 0?0:0|s,t===void 0?b.length-1:0|t)}X.exports={ge:function(b,p,s,t,i){return T(b,p,s,t,i,I)},gt:function(b,p,s,t,i){return T(b,p,s,t,i,e)},lt:function(b,p,s,t,i){return T(b,p,s,t,i,A)},le:function(b,p,s,t,i){return T(b,p,s,t,i,k)},eq:function(b,p,s,t,i){return T(b,p,s,t,i,o)}}},308:function(X,I){"use strict";function e(k){var o=32;return(k&=-k)&&o--,65535&k&&(o-=16),16711935&k&&(o-=8),252645135&k&&(o-=4),858993459&k&&(o-=2),1431655765&k&&(o-=1),o}I.INT_BITS=32,I.INT_MAX=2147483647,I.INT_MIN=-2147483648,I.sign=function(k){return(k>0)-(k<0)},I.abs=function(k){var o=k>>31;return(k^o)-o},I.min=function(k,o){return o^(k^o)&-(k<o)},I.max=function(k,o){return k^(k^o)&-(k<o)},I.isPow2=function(k){return!(k&k-1||!k)},I.log2=function(k){var o,T;return o=(k>65535)<<4,o|=T=((k>>>=o)>255)<<3,o|=T=((k>>>=T)>15)<<2,(o|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},I.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},I.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},I.countTrailingZeros=e,I.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},I.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},I.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var A=new Array(256);(function(k){for(var o=0;o<256;++o){var T=o,b=o,p=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--p;k[o]=b<<p&255}})(A),I.reverse=function(k){return A[255&k]<<24|A[k>>>8&255]<<16|A[k>>>16&255]<<8|A[k>>>24&255]},I.interleave2=function(k,o){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},I.deinterleave2=function(k,o){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>o&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},I.interleave3=function(k,o,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},I.deinterleave3=function(k,o){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>o&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},I.nextCombination=function(k){var o=k|k-1;return o+1|(~o&-~o)-1>>>e(k)+1}},29620:function(X,I,e){"use strict";var A=e(32420);X.exports=function(b,p){p||(p={});var s,t,i,n,r,a,l,c,h,u,x,d=p.cutoff==null?.25:p.cutoff,m=p.radius==null?8:p.radius,g=p.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!p.width||!p.height)throw Error("For raw data width and height should be provided by options");s=p.width,t=p.height,n=b,a=p.stride?p.stride:Math.floor(b.length/s/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(l=(c=b).getContext("2d"),s=c.width,t=c.height,n=(h=l.getImageData(0,0,s,t)).data,a=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(l=b,s=(c=b.canvas).width,t=c.height,n=(h=l.getImageData(0,0,s,t)).data,a=4):window.ImageData&&b instanceof window.ImageData&&(h=b,s=b.width,t=b.height,n=h.data,a=4);if(i=Math.max(s,t),window.Uint8ClampedArray&&n instanceof window.Uint8ClampedArray||window.Uint8Array&&n instanceof window.Uint8Array)for(r=n,n=Array(s*t),u=0,x=r.length;u<x;u++)n[u]=r[u*a+g]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var y=Array(s*t),v=Array(s*t),_=Array(i),f=Array(i),S=Array(i+1),w=Array(i);for(u=0,x=s*t;u<x;u++){var E=n[u];y[u]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),v[u]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}o(y,s,t,_,f,w,S),o(v,s,t,_,f,w,S);var P=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(u=0,x=s*t;u<x;u++)P[u]=A(1-((y[u]-v[u])/m+d),0,1);return P};var k=1e20;function o(b,p,s,t,i,n,r){for(var a=0;a<p;a++){for(var l=0;l<s;l++)t[l]=b[l*p+a];for(T(t,i,n,r,s),l=0;l<s;l++)b[l*p+a]=i[l]}for(l=0;l<s;l++){for(a=0;a<p;a++)t[a]=b[l*p+a];for(T(t,i,n,r,p),a=0;a<p;a++)b[l*p+a]=Math.sqrt(i[a])}}function T(b,p,s,t,i){s[0]=0,t[0]=-k,t[1]=+k;for(var n=1,r=0;n<i;n++){for(var a=(b[n]+n*n-(b[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);a<=t[r];)r--,a=(b[n]+n*n-(b[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);s[++r]=n,t[r]=a,t[r+1]=+k}for(n=0,r=0;n<i;n++){for(;t[r+1]<n;)r++;p[n]=(n-s[r])*(n-s[r])+b[s[r]]}}},99676:function(X,I,e){"use strict";var A=e(53664),k=e(57916),o=k(A("String.prototype.indexOf"));X.exports=function(T,b){var p=A(T,!!b);return typeof p=="function"&&o(T,".prototype.")>-1?k(p):p}},57916:function(X,I,e){"use strict";var A=e(8844),k=e(53664),o=e(14500),T=k("%TypeError%"),b=k("%Function.prototype.apply%"),p=k("%Function.prototype.call%"),s=k("%Reflect.apply%",!0)||A.call(p,b),t=k("%Object.defineProperty%",!0),i=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}X.exports=function(r){if(typeof r!="function")throw new T("a function is required");var a=s(A,p,arguments);return o(a,1+i(0,r.length-(arguments.length-1)),!0)};var n=function(){return s(A,b,arguments)};t?t(X.exports,"apply",{value:n}):X.exports.apply=n},32420:function(X){X.exports=function(I,e,A){return e<A?I<e?e:I>A?A:I:I<A?A:I>e?e:I}},3808:function(X,I,e){"use strict";var A=e(32420);function k(o,T){T==null&&(T=!0);var b=o[0],p=o[1],s=o[2],t=o[3];return t==null&&(t=T?1:255),T&&(b*=255,p*=255,s*=255,t*=255),16777216*(b=255&A(b,0,255))+((p=255&A(p,0,255))<<16)+((s=255&A(s,0,255))<<8)+(255&A(t,0,255))}X.exports=k,X.exports.to=k,X.exports.from=function(o,T){var b=(o=+o)>>>24,p=(16711680&o)>>>16,s=(65280&o)>>>8,t=255&o;return T===!1?[b,p,s,t]:[b/255,p/255,s/255,t/255]}},17592:function(X){"use strict";X.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(X,I,e){"use strict";var A=e(96824),k=e(32420),o=e(72512);X.exports=function(T,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var p=new(o(b))(4),s=b!=="uint8"&&b!=="uint8_clamped";return T.length&&typeof T!="string"||((T=A(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=T[3]!=null?T[3]:255,s&&(p[0]/=255,p[1]/=255,p[2]/=255,p[3]/=255),p):(s?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=T[3]!=null?T[3]:1):(p[0]=k(Math.floor(255*T[0]),0,255),p[1]=k(Math.floor(255*T[1]),0,255),p[2]=k(Math.floor(255*T[2]),0,255),p[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),p)}},96824:function(X,I,e){"use strict";var A=e(95532),k=e(53576),o=e(32420);X.exports=function(T){var b,p=A(T);return p.space?((b=Array(3))[0]=o(p.values[0],0,255),b[1]=o(p.values[1],0,255),b[2]=o(p.values[2],0,255),p.space[0]==="h"&&(b=k.rgb(b)),b.push(o(p.alpha,0,1)),b):[]}},95532:function(X,I,e){"use strict";var A=e(17592);X.exports=function(o){var T,b,p=[],s=1;if(typeof o=="string")if(o=o.toLowerCase(),A[o])p=A[o].slice(),b="rgb";else if(o==="transparent")s=0,b="rgb",p=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var t=o.slice(1);s=1,(r=t.length)<=4?(p=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],r===4&&(s=parseInt(t[3]+t[3],16)/255)):(p=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],r===8&&(s=parseInt(t[6]+t[7],16)/255)),p[0]||(p[0]=0),p[1]||(p[1]=0),p[2]||(p[2]=0),b="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var i=T[1],n=i==="rgb";b=t=i.replace(/a$/,"");var r=t==="cmyk"?4:t==="gray"?1:3;p=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(a,l){if(/%$/.test(a))return l===r?parseFloat(a)/100:t==="rgb"?255*parseFloat(a)/100:parseFloat(a);if(t[l]==="h"){if(/deg$/.test(a))return parseFloat(a);if(k[a]!==void 0)return k[a]}return parseFloat(a)}),i===t&&p.push(1),s=n||p[r]===void 0?1:p[r],p=p.slice(0,r)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(p=o.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),b=o.match(/([a-z])/gi).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(p=[o[0],o[1],o[2]],b="rgb",s=o.length===4?o[3]:1):o instanceof Object&&(o.r!=null||o.red!=null||o.R!=null?(b="rgb",p=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(b="hsl",p=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),s=o.a||o.alpha||o.opacity||1,o.opacity!=null&&(s/=100)):(b="rgb",p=[o>>>16,(65280&o)>>>8,255&o]);return{space:b,values:p,alpha:s}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(X,I,e){"use strict";var A=e(19336);X.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var o,T,b,p,s,t=k[0]/360,i=k[1]/100,n=k[2]/100;if(i===0)return[s=255*n,s,s];o=2*n-(T=n<.5?n*(1+i):n+i-n*i),p=[0,0,0];for(var r=0;r<3;r++)(b=t+.3333333333333333*-(r-1))<0?b++:b>1&&b--,s=6*b<1?o+6*(T-o)*b:2*b<1?T:3*b<2?o+(T-o)*(.6666666666666666-b)*6:o,p[r]=255*s;return p}},A.hsl=function(k){var o,T,b=k[0]/255,p=k[1]/255,s=k[2]/255,t=Math.min(b,p,s),i=Math.max(b,p,s),n=i-t;return i===t?o=0:b===i?o=(p-s)/n:p===i?o=2+(s-b)/n:s===i&&(o=4+(b-p)/n),(o=Math.min(60*o,360))<0&&(o+=360),T=(t+i)/2,[o,100*(i===t?0:T<=.5?n/(i+t):n/(2-i-t)),100*T]}},19336:function(X){"use strict";X.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(X){X.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(X,I,e){"use strict";X.exports={parse:e(46416),stringify:e(49395)}},8744:function(X,I,e){"use strict";var A=e(30584);X.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||A.indexOf(k)!==-1}}},46416:function(X,I,e){"use strict";var A=e(92384),k=e(68194),o=e(3748),T=e(2904),b=e(47916),p=e(7294),s=e(39956),t=e(8744).isSize;X.exports=n;var i=n.cache={};function n(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(i[a])return i[a];if(a==="")throw new Error("Cannot parse an empty string.");if(o.indexOf(a)!==-1)return i[a]={system:a};for(var l,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=s(a,/\s+/);l=h.shift();){if(k.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(x){c[x]=l}),i[a]=c;if(b.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(p.indexOf(l)===-1){if(T.indexOf(l)===-1){if(t(l)){var u=s(l,"/");if(c.size=u[0],u[1]!=null?c.lineHeight=r(u[1]):h[0]==="/"&&(h.shift(),c.lineHeight=r(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=s(h.join(" "),/\s*,\s*/).map(A),i[a]=c}throw new Error("Unknown or unsupported font token: "+l)}c.weight=l}else c.stretch=l;else c.variant=l;else c.style=l}throw new Error("Missing required font-size.")}function r(a){var l=parseFloat(a);return l.toString()===a?l:a}},49395:function(X,I,e){"use strict";var A=e(55616),k=e(8744).isSize,o=a(e(68194)),T=a(e(3748)),b=a(e(2904)),p=a(e(47916)),s=a(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},n="serif";function r(l,c){if(l&&!c[l]&&!o[l])throw Error("Unknown keyword `"+l+"`");return l}function a(l){for(var c={},h=0;h<l.length;h++)c[l[h]]=1;return c}X.exports=function(l){if((l=A(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&r(l.system,T),l.system;if(r(l.style,p),r(l.variant,t),r(l.weight,b),r(l.stretch,s),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!k)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=n),Array.isArray(l.family)&&(l.family.length||(l.family=[n]),l.family=l.family.map(function(h){return i[h]?h:'"'+h+'"'}).join(", "));var c=[];return c.push(l.style),l.variant!==l.style&&c.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&c.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&c.push(l.stretch),c.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),c.push(l.family),c.filter(Boolean).join(" ")}},27940:function(X,I,e){"use strict";var A,k=e(81680),o=e(18496),T=e(87396),b=e(95920),p=e(50868),s=e(84323),t=Function.prototype.bind,i=Object.defineProperty,n=Object.prototype.hasOwnProperty;A=function(r,a,l){var c,h=o(a)&&T(a.value);return delete(c=b(a)).writable,delete c.value,c.get=function(){return!l.overwriteDefinition&&n.call(this,r)?h:(a.value=t.call(h,l.resolveContext?l.resolveContext(this):this),i(this,r,a),this[r])},c},X.exports=function(r){var a=p(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),s(r,function(l,c){return A(c,l,a)})}},21092:function(X,I,e){"use strict";var A=e(81680),k=e(85488),o=e(38452),T=e(50868),b=e(71056),p=X.exports=function(s,t){var i,n,r,a,l;return arguments.length<2||typeof s!="string"?(a=t,t=s,s=null):a=arguments[2],A(s)?(i=b.call(s,"c"),n=b.call(s,"e"),r=b.call(s,"w")):(i=r=!0,n=!1),l={value:t,configurable:i,enumerable:n,writable:r},a?o(T(a),l):l};p.gs=function(s,t,i){var n,r,a,l;return typeof s!="string"?(a=i,i=t,t=s,s=null):a=arguments[3],A(t)?k(t)?A(i)?k(i)||(a=i,i=void 0):i=void 0:(a=t,t=i=void 0):t=void 0,A(s)?(n=b.call(s,"c"),r=b.call(s,"e")):(n=!0,r=!1),l={get:t,set:i,configurable:n,enumerable:r},a?o(T(a),l):l}},84706:function(X,I,e){"use strict";function A(a,l){return a<l?-1:a>l?1:a>=l?0:NaN}e.d(I,{XE:function(){return A},kv:function(){return b},mo:function(){return s},Uf:function(){return t},SY:function(){return i},ik:function(){return n},oh:function(){return r}}),(k=A).length===1&&(o=k,k=function(a,l){return A(o(a),l)});var k,o,T=Array.prototype;function b(a,l){var c,h,u=a.length,x=-1;if(l==null){for(;++x<u;)if((c=a[x])!=null&&c>=c)for(h=c;++x<u;)(c=a[x])!=null&&c>h&&(h=c)}else for(;++x<u;)if((c=l(a[x],x,a))!=null&&c>=c)for(h=c;++x<u;)(c=l(a[x],x,a))!=null&&c>h&&(h=c);return h}function p(a){return a===null?NaN:+a}function s(a,l){var c,h=a.length,u=h,x=-1,d=0;if(l==null)for(;++x<h;)isNaN(c=p(a[x]))?--u:d+=c;else for(;++x<h;)isNaN(c=p(l(a[x],x,a)))?--u:d+=c;if(u)return d/u}function t(a){for(var l,c,h,u=a.length,x=-1,d=0;++x<u;)d+=a[x].length;for(c=new Array(d);--u>=0;)for(l=(h=a[u]).length;--l>=0;)c[--d]=h[l];return c}function i(a,l){var c,h,u=a.length,x=-1;if(l==null){for(;++x<u;)if((c=a[x])!=null&&c>=c)for(h=c;++x<u;)(c=a[x])!=null&&h>c&&(h=c)}else for(;++x<u;)if((c=l(a[x],x,a))!=null&&c>=c)for(h=c;++x<u;)(c=l(a[x],x,a))!=null&&h>c&&(h=c);return h}function n(a,l,c){a=+a,l=+l,c=(u=arguments.length)<2?(l=a,a=0,1):u<3?1:+c;for(var h=-1,u=0|Math.max(0,Math.ceil((l-a)/c)),x=new Array(u);++h<u;)x[h]=a+h*c;return x}function r(a,l){var c,h=a.length,u=-1,x=0;if(l==null)for(;++u<h;)(c=+a[u])&&(x+=c);else for(;++u<h;)(c=+l(a[u],u,a))&&(x+=c);return x}T.slice,T.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(X,I,e){"use strict";e.d(I,{kH:function(){return T},UJ:function(){return b}});var A="$";function k(){}function o(a,l){var c=new k;if(a instanceof k)a.each(function(m,g){c.set(g,m)});else if(Array.isArray(a)){var h,u=-1,x=a.length;if(l==null)for(;++u<x;)c.set(u,a[u]);else for(;++u<x;)c.set(l(h=a[u],u,a),h)}else if(a)for(var d in a)c.set(d,a[d]);return c}k.prototype=o.prototype={constructor:k,has:function(a){return A+a in this},get:function(a){return this[A+a]},set:function(a,l){return this[A+a]=l,this},remove:function(a){var l=A+a;return l in this&&delete this[l]},clear:function(){for(var a in this)a[0]===A&&delete this[a]},keys:function(){var a=[];for(var l in this)l[0]===A&&a.push(l.slice(1));return a},values:function(){var a=[];for(var l in this)l[0]===A&&a.push(this[l]);return a},entries:function(){var a=[];for(var l in this)l[0]===A&&a.push({key:l.slice(1),value:this[l]});return a},size:function(){var a=0;for(var l in this)l[0]===A&&++a;return a},empty:function(){for(var a in this)if(a[0]===A)return!1;return!0},each:function(a){for(var l in this)l[0]===A&&a(this[l],l.slice(1),this)}};var T=o;function b(){var a,l,c,h=[],u=[];function x(m,g,y,v){if(g>=h.length)return a!=null&&m.sort(a),l!=null?l(m):m;for(var _,f,S,w=-1,E=m.length,P=h[g++],C=T(),O=y();++w<E;)(S=C.get(_=P(f=m[w])+""))?S.push(f):C.set(_,[f]);return C.each(function(R,U){v(O,U,x(R,g,y,v))}),O}function d(m,g){if(++g>h.length)return m;var y,v=u[g-1];return l!=null&&g>=h.length?y=m.entries():(y=[],m.each(function(_,f){y.push({key:f,values:d(_,g)})})),v!=null?y.sort(function(_,f){return v(_.key,f.key)}):y}return c={object:function(m){return x(m,0,p,s)},map:function(m){return x(m,0,t,i)},entries:function(m){return d(x(m,0,t,i),0)},key:function(m){return h.push(m),c},sortKeys:function(m){return u[h.length-1]=m,c},sortValues:function(m){return a=m,c},rollup:function(m){return l=m,c}}}function p(){return{}}function s(a,l,c){a[l]=c}function t(){return T()}function i(a,l,c){a.set(l,c)}function n(){}var r=T.prototype;n.prototype=(function(a,l){var c=new n;if(a instanceof n)a.each(function(x){c.add(x)});else if(a){var h=-1,u=a.length;if(l==null)for(;++h<u;)c.add(a[h]);else for(;++h<u;)c.add(l(a[h],h,a))}return c}).prototype={constructor:n,has:r.has,add:function(a){return this[A+(a+="")]=a,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each}},49812:function(X,I,e){"use strict";function A(pe,ge){var ke;function Ee(){var me,oe,re=ke.length,fe=0,Se=0;for(me=0;me<re;++me)fe+=(oe=ke[me]).x,Se+=oe.y;for(fe=fe/re-pe,Se=Se/re-ge,me=0;me<re;++me)(oe=ke[me]).x-=fe,oe.y-=Se}return pe==null&&(pe=0),ge==null&&(ge=0),Ee.initialize=function(me){ke=me},Ee.x=function(me){return arguments.length?(pe=+me,Ee):pe},Ee.y=function(me){return arguments.length?(ge=+me,Ee):ge},Ee}function k(pe){return function(){return pe}}function o(){return 1e-6*(Math.random()-.5)}function T(pe,ge,ke,Ee){if(isNaN(ge)||isNaN(ke))return pe;var me,oe,re,fe,Se,be,we,Me,Ie,Oe=pe._root,he={data:Ee},_e=pe._x0,Ae=pe._y0,De=pe._x1,Le=pe._y1;if(!Oe)return pe._root=he,pe;for(;Oe.length;)if((be=ge>=(oe=(_e+De)/2))?_e=oe:De=oe,(we=ke>=(re=(Ae+Le)/2))?Ae=re:Le=re,me=Oe,!(Oe=Oe[Me=we<<1|be]))return me[Me]=he,pe;if(fe=+pe._x.call(null,Oe.data),Se=+pe._y.call(null,Oe.data),ge===fe&&ke===Se)return he.next=Oe,me?me[Me]=he:pe._root=he,pe;do me=me?me[Me]=new Array(4):pe._root=new Array(4),(be=ge>=(oe=(_e+De)/2))?_e=oe:De=oe,(we=ke>=(re=(Ae+Le)/2))?Ae=re:Le=re;while((Me=we<<1|be)==(Ie=(Se>=re)<<1|fe>=oe));return me[Ie]=Oe,me[Me]=he,pe}function b(pe,ge,ke,Ee,me){this.node=pe,this.x0=ge,this.y0=ke,this.x1=Ee,this.y1=me}function p(pe){return pe[0]}function s(pe){return pe[1]}function t(pe,ge,ke){var Ee=new i(ge??p,ke??s,NaN,NaN,NaN,NaN);return pe==null?Ee:Ee.addAll(pe)}function i(pe,ge,ke,Ee,me,oe){this._x=pe,this._y=ge,this._x0=ke,this._y0=Ee,this._x1=me,this._y1=oe,this._root=void 0}function n(pe){for(var ge={data:pe.data},ke=ge;pe=pe.next;)ke=ke.next={data:pe.data};return ge}e.r(I),e.d(I,{forceCenter:function(){return A},forceCollide:function(){return c},forceLink:function(){return d},forceManyBody:function(){return ue},forceRadial:function(){return ve},forceSimulation:function(){return ae},forceX:function(){return ye},forceY:function(){return de}});var r=t.prototype=i.prototype;function a(pe){return pe.x+pe.vx}function l(pe){return pe.y+pe.vy}function c(pe){var ge,ke,Ee=1,me=1;function oe(){for(var Se,be,we,Me,Ie,Oe,he,_e=ge.length,Ae=0;Ae<me;++Ae)for(be=t(ge,a,l).visitAfter(re),Se=0;Se<_e;++Se)we=ge[Se],Oe=ke[we.index],he=Oe*Oe,Me=we.x+we.vx,Ie=we.y+we.vy,be.visit(De);function De(Le,Be,Ve,Ze,rt){var it=Le.data,dt=Le.r,mt=Oe+dt;if(!it)return Be>Me+mt||Ze<Me-mt||Ve>Ie+mt||rt<Ie-mt;if(it.index>we.index){var ht=Me-it.x-it.vx,Qe=Ie-it.y-it.vy,Je=ht*ht+Qe*Qe;Je<mt*mt&&(ht===0&&(Je+=(ht=o())*ht),Qe===0&&(Je+=(Qe=o())*Qe),Je=(mt-(Je=Math.sqrt(Je)))/Je*Ee,we.vx+=(ht*=Je)*(mt=(dt*=dt)/(he+dt)),we.vy+=(Qe*=Je)*mt,it.vx-=ht*(mt=1-mt),it.vy-=Qe*mt)}}}function re(Se){if(Se.data)return Se.r=ke[Se.data.index];for(var be=Se.r=0;be<4;++be)Se[be]&&Se[be].r>Se.r&&(Se.r=Se[be].r)}function fe(){if(ge){var Se,be,we=ge.length;for(ke=new Array(we),Se=0;Se<we;++Se)be=ge[Se],ke[be.index]=+pe(be,Se,ge)}}return typeof pe!="function"&&(pe=k(pe==null?1:+pe)),oe.initialize=function(Se){ge=Se,fe()},oe.iterations=function(Se){return arguments.length?(me=+Se,oe):me},oe.strength=function(Se){return arguments.length?(Ee=+Se,oe):Ee},oe.radius=function(Se){return arguments.length?(pe=typeof Se=="function"?Se:k(+Se),fe(),oe):pe},oe}r.copy=function(){var pe,ge,ke=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ee=this._root;if(!Ee)return ke;if(!Ee.length)return ke._root=n(Ee),ke;for(pe=[{source:Ee,target:ke._root=new Array(4)}];Ee=pe.pop();)for(var me=0;me<4;++me)(ge=Ee.source[me])&&(ge.length?pe.push({source:ge,target:Ee.target[me]=new Array(4)}):Ee.target[me]=n(ge));return ke},r.add=function(pe){var ge=+this._x.call(null,pe),ke=+this._y.call(null,pe);return T(this.cover(ge,ke),ge,ke,pe)},r.addAll=function(pe){var ge,ke,Ee,me,oe=pe.length,re=new Array(oe),fe=new Array(oe),Se=1/0,be=1/0,we=-1/0,Me=-1/0;for(ke=0;ke<oe;++ke)isNaN(Ee=+this._x.call(null,ge=pe[ke]))||isNaN(me=+this._y.call(null,ge))||(re[ke]=Ee,fe[ke]=me,Ee<Se&&(Se=Ee),Ee>we&&(we=Ee),me<be&&(be=me),me>Me&&(Me=me));if(Se>we||be>Me)return this;for(this.cover(Se,be).cover(we,Me),ke=0;ke<oe;++ke)T(this,re[ke],fe[ke],pe[ke]);return this},r.cover=function(pe,ge){if(isNaN(pe=+pe)||isNaN(ge=+ge))return this;var ke=this._x0,Ee=this._y0,me=this._x1,oe=this._y1;if(isNaN(ke))me=(ke=Math.floor(pe))+1,oe=(Ee=Math.floor(ge))+1;else{for(var re,fe,Se=me-ke,be=this._root;ke>pe||pe>=me||Ee>ge||ge>=oe;)switch(fe=(ge<Ee)<<1|pe<ke,(re=new Array(4))[fe]=be,be=re,Se*=2,fe){case 0:me=ke+Se,oe=Ee+Se;break;case 1:ke=me-Se,oe=Ee+Se;break;case 2:me=ke+Se,Ee=oe-Se;break;case 3:ke=me-Se,Ee=oe-Se}this._root&&this._root.length&&(this._root=be)}return this._x0=ke,this._y0=Ee,this._x1=me,this._y1=oe,this},r.data=function(){var pe=[];return this.visit(function(ge){if(!ge.length)do pe.push(ge.data);while(ge=ge.next)}),pe},r.extent=function(pe){return arguments.length?this.cover(+pe[0][0],+pe[0][1]).cover(+pe[1][0],+pe[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(pe,ge,ke){var Ee,me,oe,re,fe,Se,be,we=this._x0,Me=this._y0,Ie=this._x1,Oe=this._y1,he=[],_e=this._root;for(_e&&he.push(new b(_e,we,Me,Ie,Oe)),ke==null?ke=1/0:(we=pe-ke,Me=ge-ke,Ie=pe+ke,Oe=ge+ke,ke*=ke);Se=he.pop();)if(!(!(_e=Se.node)||(me=Se.x0)>Ie||(oe=Se.y0)>Oe||(re=Se.x1)<we||(fe=Se.y1)<Me))if(_e.length){var Ae=(me+re)/2,De=(oe+fe)/2;he.push(new b(_e[3],Ae,De,re,fe),new b(_e[2],me,De,Ae,fe),new b(_e[1],Ae,oe,re,De),new b(_e[0],me,oe,Ae,De)),(be=(ge>=De)<<1|pe>=Ae)&&(Se=he[he.length-1],he[he.length-1]=he[he.length-1-be],he[he.length-1-be]=Se)}else{var Le=pe-+this._x.call(null,_e.data),Be=ge-+this._y.call(null,_e.data),Ve=Le*Le+Be*Be;if(Ve<ke){var Ze=Math.sqrt(ke=Ve);we=pe-Ze,Me=ge-Ze,Ie=pe+Ze,Oe=ge+Ze,Ee=_e.data}}return Ee},r.remove=function(pe){if(isNaN(oe=+this._x.call(null,pe))||isNaN(re=+this._y.call(null,pe)))return this;var ge,ke,Ee,me,oe,re,fe,Se,be,we,Me,Ie,Oe=this._root,he=this._x0,_e=this._y0,Ae=this._x1,De=this._y1;if(!Oe)return this;if(Oe.length)for(;;){if((be=oe>=(fe=(he+Ae)/2))?he=fe:Ae=fe,(we=re>=(Se=(_e+De)/2))?_e=Se:De=Se,ge=Oe,!(Oe=Oe[Me=we<<1|be]))return this;if(!Oe.length)break;(ge[Me+1&3]||ge[Me+2&3]||ge[Me+3&3])&&(ke=ge,Ie=Me)}for(;Oe.data!==pe;)if(Ee=Oe,!(Oe=Oe.next))return this;return(me=Oe.next)&&delete Oe.next,Ee?(me?Ee.next=me:delete Ee.next,this):ge?(me?ge[Me]=me:delete ge[Me],(Oe=ge[0]||ge[1]||ge[2]||ge[3])&&Oe===(ge[3]||ge[2]||ge[1]||ge[0])&&!Oe.length&&(ke?ke[Ie]=Oe:this._root=Oe),this):(this._root=me,this)},r.removeAll=function(pe){for(var ge=0,ke=pe.length;ge<ke;++ge)this.remove(pe[ge]);return this},r.root=function(){return this._root},r.size=function(){var pe=0;return this.visit(function(ge){if(!ge.length)do++pe;while(ge=ge.next)}),pe},r.visit=function(pe){var ge,ke,Ee,me,oe,re,fe=[],Se=this._root;for(Se&&fe.push(new b(Se,this._x0,this._y0,this._x1,this._y1));ge=fe.pop();)if(!pe(Se=ge.node,Ee=ge.x0,me=ge.y0,oe=ge.x1,re=ge.y1)&&Se.length){var be=(Ee+oe)/2,we=(me+re)/2;(ke=Se[3])&&fe.push(new b(ke,be,we,oe,re)),(ke=Se[2])&&fe.push(new b(ke,Ee,we,be,re)),(ke=Se[1])&&fe.push(new b(ke,be,me,oe,we)),(ke=Se[0])&&fe.push(new b(ke,Ee,me,be,we))}return this},r.visitAfter=function(pe){var ge,ke=[],Ee=[];for(this._root&&ke.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));ge=ke.pop();){var me=ge.node;if(me.length){var oe,re=ge.x0,fe=ge.y0,Se=ge.x1,be=ge.y1,we=(re+Se)/2,Me=(fe+be)/2;(oe=me[0])&&ke.push(new b(oe,re,fe,we,Me)),(oe=me[1])&&ke.push(new b(oe,we,fe,Se,Me)),(oe=me[2])&&ke.push(new b(oe,re,Me,we,be)),(oe=me[3])&&ke.push(new b(oe,we,Me,Se,be))}Ee.push(ge)}for(;ge=Ee.pop();)pe(ge.node,ge.x0,ge.y0,ge.x1,ge.y1);return this},r.x=function(pe){return arguments.length?(this._x=pe,this):this._x},r.y=function(pe){return arguments.length?(this._y=pe,this):this._y};var h=e(34712);function u(pe){return pe.index}function x(pe,ge){var ke=pe.get(ge);if(!ke)throw new Error("missing: "+ge);return ke}function d(pe){var ge,ke,Ee,me,oe,re=u,fe=function(he){return 1/Math.min(me[he.source.index],me[he.target.index])},Se=k(30),be=1;function we(he){for(var _e=0,Ae=pe.length;_e<be;++_e)for(var De,Le,Be,Ve,Ze,rt,it,dt=0;dt<Ae;++dt)Le=(De=pe[dt]).source,Ve=(Be=De.target).x+Be.vx-Le.x-Le.vx||o(),Ze=Be.y+Be.vy-Le.y-Le.vy||o(),Ve*=rt=((rt=Math.sqrt(Ve*Ve+Ze*Ze))-ke[dt])/rt*he*ge[dt],Ze*=rt,Be.vx-=Ve*(it=oe[dt]),Be.vy-=Ze*it,Le.vx+=Ve*(it=1-it),Le.vy+=Ze*it}function Me(){if(Ee){var he,_e,Ae=Ee.length,De=pe.length,Le=(0,h.kH)(Ee,re);for(he=0,me=new Array(Ae);he<De;++he)(_e=pe[he]).index=he,typeof _e.source!="object"&&(_e.source=x(Le,_e.source)),typeof _e.target!="object"&&(_e.target=x(Le,_e.target)),me[_e.source.index]=(me[_e.source.index]||0)+1,me[_e.target.index]=(me[_e.target.index]||0)+1;for(he=0,oe=new Array(De);he<De;++he)_e=pe[he],oe[he]=me[_e.source.index]/(me[_e.source.index]+me[_e.target.index]);ge=new Array(De),Ie(),ke=new Array(De),Oe()}}function Ie(){if(Ee)for(var he=0,_e=pe.length;he<_e;++he)ge[he]=+fe(pe[he],he,pe)}function Oe(){if(Ee)for(var he=0,_e=pe.length;he<_e;++he)ke[he]=+Se(pe[he],he,pe)}return pe==null&&(pe=[]),we.initialize=function(he){Ee=he,Me()},we.links=function(he){return arguments.length?(pe=he,Me(),we):pe},we.id=function(he){return arguments.length?(re=he,we):re},we.iterations=function(he){return arguments.length?(be=+he,we):be},we.strength=function(he){return arguments.length?(fe=typeof he=="function"?he:k(+he),Ie(),we):fe},we.distance=function(he){return arguments.length?(Se=typeof he=="function"?he:k(+he),Oe(),we):Se},we}var m={value:function(){}};function g(){for(var pe,ge=0,ke=arguments.length,Ee={};ge<ke;++ge){if(!(pe=arguments[ge]+"")||pe in Ee||/[\s.]/.test(pe))throw new Error("illegal type: "+pe);Ee[pe]=[]}return new y(Ee)}function y(pe){this._=pe}function v(pe,ge){for(var ke,Ee=0,me=pe.length;Ee<me;++Ee)if((ke=pe[Ee]).name===ge)return ke.value}function _(pe,ge,ke){for(var Ee=0,me=pe.length;Ee<me;++Ee)if(pe[Ee].name===ge){pe[Ee]=m,pe=pe.slice(0,Ee).concat(pe.slice(Ee+1));break}return ke!=null&&pe.push({name:ge,value:ke}),pe}y.prototype=g.prototype={constructor:y,on:function(pe,ge){var ke,Ee,me=this._,oe=(Ee=me,(pe+"").trim().split(/^|\s+/).map(function(Se){var be="",we=Se.indexOf(".");if(we>=0&&(be=Se.slice(we+1),Se=Se.slice(0,we)),Se&&!Ee.hasOwnProperty(Se))throw new Error("unknown type: "+Se);return{type:Se,name:be}})),re=-1,fe=oe.length;if(!(arguments.length<2)){if(ge!=null&&typeof ge!="function")throw new Error("invalid callback: "+ge);for(;++re<fe;)if(ke=(pe=oe[re]).type)me[ke]=_(me[ke],pe.name,ge);else if(ge==null)for(ke in me)me[ke]=_(me[ke],pe.name,null);return this}for(;++re<fe;)if((ke=(pe=oe[re]).type)&&(ke=v(me[ke],pe.name)))return ke},copy:function(){var pe={},ge=this._;for(var ke in ge)pe[ke]=ge[ke].slice();return new y(pe)},call:function(pe,ge){if((ke=arguments.length-2)>0)for(var ke,Ee,me=new Array(ke),oe=0;oe<ke;++oe)me[oe]=arguments[oe+2];if(!this._.hasOwnProperty(pe))throw new Error("unknown type: "+pe);for(oe=0,ke=(Ee=this._[pe]).length;oe<ke;++oe)Ee[oe].value.apply(ge,me)},apply:function(pe,ge,ke){if(!this._.hasOwnProperty(pe))throw new Error("unknown type: "+pe);for(var Ee=this._[pe],me=0,oe=Ee.length;me<oe;++me)Ee[me].value.apply(ge,ke)}};var f,S,w=g,E=0,P=0,C=0,O=1e3,R=0,U=0,D=0,N=typeof performance=="object"&&performance.now?performance:Date,W=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(pe){setTimeout(pe,17)};function F(){return U||(W(j),U=N.now()+D)}function j(){U=0}function q(){this._call=this._time=this._next=null}function te(pe,ge,ke){var Ee=new q;return Ee.restart(pe,ge,ke),Ee}function ee(){U=(R=N.now())+D,E=P=0;try{(function(){F(),++E;for(var pe,ge=f;ge;)(pe=U-ge._time)>=0&&ge._call.call(null,pe),ge=ge._next;--E})()}finally{E=0,function(){for(var pe,ge,ke=f,Ee=1/0;ke;)ke._call?(Ee>ke._time&&(Ee=ke._time),pe=ke,ke=ke._next):(ge=ke._next,ke._next=null,ke=pe?pe._next=ge:f=ge);S=pe,J(Ee)}(),U=0}}function Q(){var pe=N.now(),ge=pe-R;ge>O&&(D-=ge,R=pe)}function J(pe){E||(P&&(P=clearTimeout(P)),pe-U>24?(pe<1/0&&(P=setTimeout(ee,pe-N.now()-D)),C&&(C=clearInterval(C))):(C||(R=N.now(),C=setInterval(Q,O)),E=1,W(ee)))}function K(pe){return pe.x}function Y(pe){return pe.y}q.prototype=te.prototype={constructor:q,restart:function(pe,ge,ke){if(typeof pe!="function")throw new TypeError("callback is not a function");ke=(ke==null?F():+ke)+(ge==null?0:+ge),this._next||S===this||(S?S._next=this:f=this,S=this),this._call=pe,this._time=ke,J()},stop:function(){this._call&&(this._call=null,this._time=1/0,J())}};var ie=10,se=Math.PI*(3-Math.sqrt(5));function ae(pe){var ge,ke=1,Ee=.001,me=1-Math.pow(Ee,1/300),oe=0,re=.6,fe=(0,h.kH)(),Se=te(we),be=w("tick","end");function we(){Me(),be.call("tick",ge),ke<Ee&&(Se.stop(),be.call("end",ge))}function Me(he){var _e,Ae,De=pe.length;he===void 0&&(he=1);for(var Le=0;Le<he;++Le)for(ke+=(oe-ke)*me,fe.each(function(Be){Be(ke)}),_e=0;_e<De;++_e)(Ae=pe[_e]).fx==null?Ae.x+=Ae.vx*=re:(Ae.x=Ae.fx,Ae.vx=0),Ae.fy==null?Ae.y+=Ae.vy*=re:(Ae.y=Ae.fy,Ae.vy=0);return ge}function Ie(){for(var he,_e=0,Ae=pe.length;_e<Ae;++_e){if((he=pe[_e]).index=_e,he.fx!=null&&(he.x=he.fx),he.fy!=null&&(he.y=he.fy),isNaN(he.x)||isNaN(he.y)){var De=ie*Math.sqrt(_e),Le=_e*se;he.x=De*Math.cos(Le),he.y=De*Math.sin(Le)}(isNaN(he.vx)||isNaN(he.vy))&&(he.vx=he.vy=0)}}function Oe(he){return he.initialize&&he.initialize(pe),he}return pe==null&&(pe=[]),Ie(),ge={tick:Me,restart:function(){return Se.restart(we),ge},stop:function(){return Se.stop(),ge},nodes:function(he){return arguments.length?(pe=he,Ie(),fe.each(Oe),ge):pe},alpha:function(he){return arguments.length?(ke=+he,ge):ke},alphaMin:function(he){return arguments.length?(Ee=+he,ge):Ee},alphaDecay:function(he){return arguments.length?(me=+he,ge):+me},alphaTarget:function(he){return arguments.length?(oe=+he,ge):oe},velocityDecay:function(he){return arguments.length?(re=1-he,ge):1-re},force:function(he,_e){return arguments.length>1?(_e==null?fe.remove(he):fe.set(he,Oe(_e)),ge):fe.get(he)},find:function(he,_e,Ae){var De,Le,Be,Ve,Ze,rt=0,it=pe.length;for(Ae==null?Ae=1/0:Ae*=Ae,rt=0;rt<it;++rt)(Be=(De=he-(Ve=pe[rt]).x)*De+(Le=_e-Ve.y)*Le)<Ae&&(Ze=Ve,Ae=Be);return Ze},on:function(he,_e){return arguments.length>1?(be.on(he,_e),ge):be.on(he)}}}function ue(){var pe,ge,ke,Ee,me=k(-30),oe=1,re=1/0,fe=.81;function Se(Ie){var Oe,he=pe.length,_e=t(pe,K,Y).visitAfter(we);for(ke=Ie,Oe=0;Oe<he;++Oe)ge=pe[Oe],_e.visit(Me)}function be(){if(pe){var Ie,Oe,he=pe.length;for(Ee=new Array(he),Ie=0;Ie<he;++Ie)Oe=pe[Ie],Ee[Oe.index]=+me(Oe,Ie,pe)}}function we(Ie){var Oe,he,_e,Ae,De,Le=0,Be=0;if(Ie.length){for(_e=Ae=De=0;De<4;++De)(Oe=Ie[De])&&(he=Math.abs(Oe.value))&&(Le+=Oe.value,Be+=he,_e+=he*Oe.x,Ae+=he*Oe.y);Ie.x=_e/Be,Ie.y=Ae/Be}else{(Oe=Ie).x=Oe.data.x,Oe.y=Oe.data.y;do Le+=Ee[Oe.data.index];while(Oe=Oe.next)}Ie.value=Le}function Me(Ie,Oe,he,_e){if(!Ie.value)return!0;var Ae=Ie.x-ge.x,De=Ie.y-ge.y,Le=_e-Oe,Be=Ae*Ae+De*De;if(Le*Le/fe<Be)return Be<re&&(Ae===0&&(Be+=(Ae=o())*Ae),De===0&&(Be+=(De=o())*De),Be<oe&&(Be=Math.sqrt(oe*Be)),ge.vx+=Ae*Ie.value*ke/Be,ge.vy+=De*Ie.value*ke/Be),!0;if(!(Ie.length||Be>=re)){(Ie.data!==ge||Ie.next)&&(Ae===0&&(Be+=(Ae=o())*Ae),De===0&&(Be+=(De=o())*De),Be<oe&&(Be=Math.sqrt(oe*Be)));do Ie.data!==ge&&(Le=Ee[Ie.data.index]*ke/Be,ge.vx+=Ae*Le,ge.vy+=De*Le);while(Ie=Ie.next)}}return Se.initialize=function(Ie){pe=Ie,be()},Se.strength=function(Ie){return arguments.length?(me=typeof Ie=="function"?Ie:k(+Ie),be(),Se):me},Se.distanceMin=function(Ie){return arguments.length?(oe=Ie*Ie,Se):Math.sqrt(oe)},Se.distanceMax=function(Ie){return arguments.length?(re=Ie*Ie,Se):Math.sqrt(re)},Se.theta=function(Ie){return arguments.length?(fe=Ie*Ie,Se):Math.sqrt(fe)},Se}function ve(pe,ge,ke){var Ee,me,oe,re=k(.1);function fe(be){for(var we=0,Me=Ee.length;we<Me;++we){var Ie=Ee[we],Oe=Ie.x-ge||1e-6,he=Ie.y-ke||1e-6,_e=Math.sqrt(Oe*Oe+he*he),Ae=(oe[we]-_e)*me[we]*be/_e;Ie.vx+=Oe*Ae,Ie.vy+=he*Ae}}function Se(){if(Ee){var be,we=Ee.length;for(me=new Array(we),oe=new Array(we),be=0;be<we;++be)oe[be]=+pe(Ee[be],be,Ee),me[be]=isNaN(oe[be])?0:+re(Ee[be],be,Ee)}}return typeof pe!="function"&&(pe=k(+pe)),ge==null&&(ge=0),ke==null&&(ke=0),fe.initialize=function(be){Ee=be,Se()},fe.strength=function(be){return arguments.length?(re=typeof be=="function"?be:k(+be),Se(),fe):re},fe.radius=function(be){return arguments.length?(pe=typeof be=="function"?be:k(+be),Se(),fe):pe},fe.x=function(be){return arguments.length?(ge=+be,fe):ge},fe.y=function(be){return arguments.length?(ke=+be,fe):ke},fe}function ye(pe){var ge,ke,Ee,me=k(.1);function oe(fe){for(var Se,be=0,we=ge.length;be<we;++be)(Se=ge[be]).vx+=(Ee[be]-Se.x)*ke[be]*fe}function re(){if(ge){var fe,Se=ge.length;for(ke=new Array(Se),Ee=new Array(Se),fe=0;fe<Se;++fe)ke[fe]=isNaN(Ee[fe]=+pe(ge[fe],fe,ge))?0:+me(ge[fe],fe,ge)}}return typeof pe!="function"&&(pe=k(pe==null?0:+pe)),oe.initialize=function(fe){ge=fe,re()},oe.strength=function(fe){return arguments.length?(me=typeof fe=="function"?fe:k(+fe),re(),oe):me},oe.x=function(fe){return arguments.length?(pe=typeof fe=="function"?fe:k(+fe),re(),oe):pe},oe}function de(pe){var ge,ke,Ee,me=k(.1);function oe(fe){for(var Se,be=0,we=ge.length;be<we;++be)(Se=ge[be]).vy+=(Ee[be]-Se.y)*ke[be]*fe}function re(){if(ge){var fe,Se=ge.length;for(ke=new Array(Se),Ee=new Array(Se),fe=0;fe<Se;++fe)ke[fe]=isNaN(Ee[fe]=+pe(ge[fe],fe,ge))?0:+me(ge[fe],fe,ge)}}return typeof pe!="function"&&(pe=k(pe==null?0:+pe)),oe.initialize=function(fe){ge=fe,re()},oe.strength=function(fe){return arguments.length?(me=typeof fe=="function"?fe:k(+fe),re(),oe):me},oe.y=function(fe){return arguments.length?(pe=typeof fe=="function"?fe:k(+fe),re(),oe):pe},oe}},57624:function(X,I,e){"use strict";function A(c,h){if((u=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var u,x=c.slice(0,u);return[x.length>1?x[0]+x.slice(2):x,+c.slice(u+1)]}e.d(I,{E9:function(){return n},SO:function(){return l}});var k,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(c){if(!(h=o.exec(c)))throw new Error("invalid format: "+c);var h;return new b({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function b(c){this.fill=c.fill===void 0?" ":c.fill+"",this.align=c.align===void 0?">":c.align+"",this.sign=c.sign===void 0?"-":c.sign+"",this.symbol=c.symbol===void 0?"":c.symbol+"",this.zero=!!c.zero,this.width=c.width===void 0?void 0:+c.width,this.comma=!!c.comma,this.precision=c.precision===void 0?void 0:+c.precision,this.trim=!!c.trim,this.type=c.type===void 0?"":c.type+""}function p(c,h){var u=A(c,h);if(!u)return c+"";var x=u[0],d=u[1];return d<0?"0."+new Array(-d).join("0")+x:x.length>d+1?x.slice(0,d+1)+"."+x.slice(d+1):x+new Array(d-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(c,h){return(100*c).toFixed(h)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,h){return c.toExponential(h)},f:function(c,h){return c.toFixed(h)},g:function(c,h){return c.toPrecision(h)},o:function(c){return Math.round(c).toString(8)},p:function(c,h){return p(100*c,h)},r:p,s:function(c,h){var u=A(c,h);if(!u)return c+"";var x=u[0],d=u[1],m=d-(k=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,g=x.length;return m===g?x:m>g?x+new Array(m-g+1).join("0"):m>0?x.slice(0,m)+"."+x.slice(m):"0."+new Array(1-m).join("0")+A(c,Math.max(0,h+m-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function t(c){return c}var i,n,r=Array.prototype.map,a=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(c){var h,u,x=c.grouping===void 0||c.thousands===void 0?t:(h=r.call(c.grouping,Number),u=c.thousands+"",function(w,E){for(var P=w.length,C=[],O=0,R=h[0],U=0;P>0&&R>0&&(U+R+1>E&&(R=Math.max(1,E-U)),C.push(w.substring(P-=R,P+R)),!((U+=R+1)>E));)R=h[O=(O+1)%h.length];return C.reverse().join(u)}),d=c.currency===void 0?"":c.currency[0]+"",m=c.currency===void 0?"":c.currency[1]+"",g=c.decimal===void 0?".":c.decimal+"",y=c.numerals===void 0?t:function(w){return function(E){return E.replace(/[0-9]/g,function(P){return w[+P]})}}(r.call(c.numerals,String)),v=c.percent===void 0?"%":c.percent+"",_=c.minus===void 0?"-":c.minus+"",f=c.nan===void 0?"NaN":c.nan+"";function S(w){var E=(w=T(w)).fill,P=w.align,C=w.sign,O=w.symbol,R=w.zero,U=w.width,D=w.comma,N=w.precision,W=w.trim,F=w.type;F==="n"?(D=!0,F="g"):s[F]||(N===void 0&&(N=12),W=!0,F="g"),(R||E==="0"&&P==="=")&&(R=!0,E="0",P="=");var j=O==="$"?d:O==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",q=O==="$"?m:/[%p]/.test(F)?v:"",te=s[F],ee=/[defgprs%]/.test(F);function Q(J){var K,Y,ie,se=j,ae=q;if(F==="c")ae=te(J)+ae,J="";else{var ue=(J=+J)<0||1/J<0;if(J=isNaN(J)?f:te(Math.abs(J),N),W&&(J=function(de){e:for(var pe,ge=de.length,ke=1,Ee=-1;ke<ge;++ke)switch(de[ke]){case".":Ee=pe=ke;break;case"0":Ee===0&&(Ee=ke),pe=ke;break;default:if(!+de[ke])break e;Ee>0&&(Ee=0)}return Ee>0?de.slice(0,Ee)+de.slice(pe+1):de}(J)),ue&&+J==0&&C!=="+"&&(ue=!1),se=(ue?C==="("?C:_:C==="-"||C==="("?"":C)+se,ae=(F==="s"?a[8+k/3]:"")+ae+(ue&&C==="("?")":""),ee){for(K=-1,Y=J.length;++K<Y;)if(48>(ie=J.charCodeAt(K))||ie>57){ae=(ie===46?g+J.slice(K+1):J.slice(K))+ae,J=J.slice(0,K);break}}}D&&!R&&(J=x(J,1/0));var ve=se.length+J.length+ae.length,ye=ve<U?new Array(U-ve+1).join(E):"";switch(D&&R&&(J=x(ye+J,ye.length?U-ae.length:1/0),ye=""),P){case"<":J=se+J+ae+ye;break;case"=":J=se+ye+J+ae;break;case"^":J=ye.slice(0,ve=ye.length>>1)+se+J+ae+ye.slice(ve);break;default:J=ye+se+J+ae}return y(J)}return N=N===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N)),Q.toString=function(){return w+""},Q}return{format:S,formatPrefix:function(w,E){var P,C=S(((w=T(w)).type="f",w)),O=3*Math.max(-8,Math.min(8,Math.floor((P=E,((P=A(Math.abs(P)))?P[1]:NaN)/3)))),R=Math.pow(10,-O),U=a[8+O/3];return function(D){return C(R*D)+U}}}}i=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n=i.format,i.formatPrefix},87108:function(X,I,e){"use strict";e.r(I),e.d(I,{geoAiry:function(){return D},geoAiryRaw:function(){return U},geoAitoff:function(){return W},geoAitoffRaw:function(){return N},geoArmadillo:function(){return j},geoArmadilloRaw:function(){return F},geoAugust:function(){return te},geoAugustRaw:function(){return q},geoBaker:function(){return K},geoBakerRaw:function(){return J},geoBerghaus:function(){return se},geoBerghausRaw:function(){return ie},geoBertin1953:function(){return ke},geoBertin1953Raw:function(){return ge},geoBoggs:function(){return we},geoBoggsRaw:function(){return be},geoBonne:function(){return _e},geoBonneRaw:function(){return he},geoBottomley:function(){return De},geoBottomleyRaw:function(){return Ae},geoBromley:function(){return Be},geoBromleyRaw:function(){return Le},geoChamberlin:function(){return Je},geoChamberlinAfrica:function(){return Qe},geoChamberlinRaw:function(){return mt},geoCollignon:function(){return Pt},geoCollignonRaw:function(){return wt},geoCraig:function(){return At},geoCraigRaw:function(){return It},geoCraster:function(){return Ne},geoCrasterRaw:function(){return Ye},geoCylindricalEqualArea:function(){return at},geoCylindricalEqualAreaRaw:function(){return We},geoCylindricalStereographic:function(){return Re},geoCylindricalStereographicRaw:function(){return tt},geoEckert1:function(){return nt},geoEckert1Raw:function(){return Fe},geoEckert2:function(){return ut},geoEckert2Raw:function(){return Ge},geoEckert3:function(){return gt},geoEckert3Raw:function(){return pt},geoEckert4:function(){return Tt},geoEckert4Raw:function(){return ct},geoEckert5:function(){return kt},geoEckert5Raw:function(){return vt},geoEckert6:function(){return Ct},geoEckert6Raw:function(){return Lt},geoEisenlohr:function(){return tn},geoEisenlohrRaw:function(){return Gt},geoFahey:function(){return Ft},geoFaheyRaw:function(){return Wt},geoFoucaut:function(){return bn},geoFoucautRaw:function(){return Ln},geoFoucautSinusoidal:function(){return Kt},geoFoucautSinusoidalRaw:function(){return hn},geoGilbert:function(){return xn},geoGingery:function(){return Rn},geoGingeryRaw:function(){return An},geoGinzburg4:function(){return Vn},geoGinzburg4Raw:function(){return Xn},geoGinzburg5:function(){return Wn},geoGinzburg5Raw:function(){return er},geoGinzburg6:function(){return Jt},geoGinzburg6Raw:function(){return fr},geoGinzburg8:function(){return Mn},geoGinzburg8Raw:function(){return en},geoGinzburg9:function(){return Cn},geoGinzburg9Raw:function(){return pn},geoGringorten:function(){return Yn},geoGringortenQuincuncial:function(){return ha},geoGringortenRaw:function(){return Bn},geoGuyou:function(){return St},geoGuyouRaw:function(){return dn},geoHammer:function(){return ye},geoHammerRaw:function(){return ue},geoHammerRetroazimuthal:function(){return un},geoHammerRetroazimuthalRaw:function(){return Xt},geoHealpix:function(){return On},geoHealpixRaw:function(){return $t},geoHill:function(){return $n},geoHillRaw:function(){return Fn},geoHomolosine:function(){return br},geoHomolosineRaw:function(){return hr},geoHufnagel:function(){return ar},geoHufnagelRaw:function(){return gr},geoHyperelliptical:function(){return fi},geoHyperellipticalRaw:function(){return Dr},geoInterrupt:function(){return ci},geoInterruptedBoggs:function(){return fa},geoInterruptedHomolosine:function(){return Ui},geoInterruptedMollweide:function(){return Bi},geoInterruptedMollweideHemispheres:function(){return Do},geoInterruptedQuarticAuthalic:function(){return Hl},geoInterruptedSinuMollweide:function(){return io},geoInterruptedSinusoidal:function(){return zo},geoKavrayskiy7:function(){return Va},geoKavrayskiy7Raw:function(){return Oa},geoLagrange:function(){return oi},geoLagrangeRaw:function(){return Ha},geoLarrivee:function(){return oo},geoLarriveeRaw:function(){return _o},geoLaskowski:function(){return Ro},geoLaskowskiRaw:function(){return qa},geoLittrow:function(){return Fo},geoLittrowRaw:function(){return so},geoLoximuthal:function(){return Bo},geoLoximuthalRaw:function(){return wo},geoMiller:function(){return hl},geoMillerRaw:function(){return lo},geoModifiedStereographic:function(){return is},geoModifiedStereographicAlaska:function(){return jl},geoModifiedStereographicGs48:function(){return Ul},geoModifiedStereographicGs50:function(){return rs},geoModifiedStereographicLee:function(){return gs},geoModifiedStereographicMiller:function(){return co},geoModifiedStereographicRaw:function(){return $s},geoMollweide:function(){return re},geoMollweideRaw:function(){return oe},geoMtFlatPolarParabolic:function(){return pl},geoMtFlatPolarParabolicRaw:function(){return Ga},geoMtFlatPolarQuartic:function(){return To},geoMtFlatPolarQuarticRaw:function(){return No},geoMtFlatPolarSinusoidal:function(){return jo},geoMtFlatPolarSinusoidalRaw:function(){return ko},geoNaturalEarth:function(){return Gr.c},geoNaturalEarth2:function(){return Vl},geoNaturalEarth2Raw:function(){return ms},geoNaturalEarthRaw:function(){return Gr.g},geoNellHammer:function(){return vs},geoNellHammerRaw:function(){return Qs},geoNicolosi:function(){return ql},geoNicolosiRaw:function(){return el},geoPatterson:function(){return Cl},geoPattersonRaw:function(){return nl},geoPeirceQuincuncial:function(){return fs},geoPierceQuincuncial:function(){return fs},geoPolyconic:function(){return ss},geoPolyconicRaw:function(){return xs},geoPolyhedral:function(){return ri},geoPolyhedralButterfly:function(){return _s},geoPolyhedralCollignon:function(){return Fs},geoPolyhedralWaterman:function(){return Bs},geoProject:function(){return Ns},geoQuantize:function(){return Mo},geoQuincuncial:function(){return Go},geoRectangularPolyconic:function(){return Fa},geoRectangularPolyconicRaw:function(){return Ra},geoRobinson:function(){return kr},geoRobinsonRaw:function(){return Xa},geoSatellite:function(){return dl},geoSatelliteRaw:function(){return js},geoSinuMollweide:function(){return Jn},geoSinuMollweideRaw:function(){return tr},geoSinusoidal:function(){return Oe},geoSinusoidalRaw:function(){return Ie},geoStitch:function(){return Ki},geoTimes:function(){return ho},geoTimesRaw:function(){return pa},geoTwoPointAzimuthal:function(){return ga},geoTwoPointAzimuthalRaw:function(){return Ts},geoTwoPointAzimuthalUsa:function(){return ks},geoTwoPointEquidistant:function(){return ps},geoTwoPointEquidistantRaw:function(){return Wr},geoTwoPointEquidistantUsa:function(){return po},geoVanDerGrinten:function(){return As},geoVanDerGrinten2:function(){return $a},geoVanDerGrinten2Raw:function(){return Ms},geoVanDerGrinten3:function(){return ds},geoVanDerGrinten3Raw:function(){return di},geoVanDerGrinten4:function(){return Or},geoVanDerGrinten4Raw:function(){return Sr},geoVanDerGrintenRaw:function(){return Ja},geoWagner:function(){return go},geoWagner4:function(){return Pl},geoWagner4Raw:function(){return ii},geoWagner6:function(){return si},geoWagner6Raw:function(){return La},geoWagner7:function(){return Lo},geoWagnerRaw:function(){return Ea},geoWiechel:function(){return _a},geoWiechelRaw:function(){return yi},geoWinkel3:function(){return ml},geoWinkel3Raw:function(){return Ko}});var A=e(87952),k=Math.abs,o=Math.atan,T=Math.atan2,b=Math.cos,p=Math.exp,s=Math.floor,t=Math.log,i=Math.max,n=Math.min,r=Math.pow,a=Math.round,l=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},c=Math.sin,h=Math.tan,u=1e-6,x=1e-12,d=Math.PI,m=d/2,g=d/4,y=Math.SQRT1_2,v=C(2),_=C(d),f=2*d,S=180/d,w=d/180;function E(Xe){return Xe>1?m:Xe<-1?-m:Math.asin(Xe)}function P(Xe){return Xe>1?0:Xe<-1?d:Math.acos(Xe)}function C(Xe){return Xe>0?Math.sqrt(Xe):0}function O(Xe){return(p(Xe)-p(-Xe))/2}function R(Xe){return(p(Xe)+p(-Xe))/2}function U(Xe){var $e=h(Xe/2),ot=2*t(b(Xe/2))/($e*$e);function B(G,H){var L=b(G),V=b(H),$=c(H),ne=V*L,ce=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+ot/(1+ne));return[ce*V*c(G),ce*$]}return B.invert=function(G,H){var L,V=C(G*G+H*H),$=-Xe/2,ne=50;if(!V)return[0,0];do{var ce=$/2,xe=b(ce),Ce=c(ce),ze=Ce/xe,Ue=-t(k(xe));$-=L=(2/ze*Ue-ot*ze-V)/(-Ue/(Ce*Ce)+1-ot/(2*xe*xe))*(xe<0?.7:1)}while(k(L)>u&&--ne>0);var He=c($);return[T(G*He,V*b($)),E(H*He/V)]},B}function D(){var Xe=m,$e=(0,A.U)(U),ot=$e(Xe);return ot.radius=function(B){return arguments.length?$e(Xe=B*w):Xe*S},ot.scale(179.976).clipAngle(147)}function N(Xe,$e){var ot=b($e),B=function(G){return G?G/Math.sin(G):1}(P(ot*b(Xe/=2)));return[2*ot*c(Xe)*B,c($e)*B]}function W(){return(0,A.c)(N).scale(152.63)}function F(Xe){var $e=c(Xe),ot=b(Xe),B=Xe>=0?1:-1,G=h(B*Xe),H=(1+$e-ot)/2;function L(V,$){var ne=b($),ce=b(V/=2);return[(1+ne)*c(V),(B*$>-T(ce,G)-.001?0:10*-B)+H+c($)*ot-(1+ne)*$e*ce]}return L.invert=function(V,$){var ne=0,ce=0,xe=50;do{var Ce=b(ne),ze=c(ne),Ue=b(ce),He=c(ce),et=1+Ue,lt=et*ze-V,ft=H+He*ot-et*$e*Ce-$,xt=et*Ce/2,Mt=-ze*He,_t=$e*et*ze/2,zt=ot*Ue+$e*Ce*He,Et=Mt*_t-zt*xt,Yt=(ft*Mt-lt*zt)/Et/2,Vt=(lt*_t-ft*xt)/Et;k(Vt)>2&&(Vt/=2),ne-=Yt,ce-=Vt}while((k(Yt)>u||k(Vt)>u)&&--xe>0);return B*ce>-T(b(ne),G)-.001?[2*ne,ce]:null},L}function j(){var Xe=20*w,$e=Xe>=0?1:-1,ot=h($e*Xe),B=(0,A.U)(F),G=B(Xe),H=G.stream;return G.parallel=function(L){return arguments.length?(ot=h(($e=(Xe=L*w)>=0?1:-1)*Xe),B(Xe)):Xe*S},G.stream=function(L){var V=G.rotate(),$=H(L),ne=(G.rotate([0,0]),H(L)),ce=G.precision();return G.rotate(V),$.sphere=function(){ne.polygonStart(),ne.lineStart();for(var xe=-180*$e;$e*xe<180;xe+=90*$e)ne.point(xe,90*$e);if(Xe)for(;$e*(xe-=3*$e*ce)>=-180;)ne.point(xe,$e*-T(b(xe*w/2),ot)*S);ne.lineEnd(),ne.polygonEnd()},$},G.scale(218.695).center([0,28.0974])}function q(Xe,$e){var ot=h($e/2),B=C(1-ot*ot),G=1+B*b(Xe/=2),H=c(Xe)*B/G,L=ot/G,V=H*H,$=L*L;return[1.3333333333333333*H*(3+V-3*$),1.3333333333333333*L*(3+3*V-$)]}function te(){return(0,A.c)(q).scale(66.1603)}N.invert=function(Xe,$e){if(!(Xe*Xe+4*$e*$e>d*d+u)){var ot=Xe,B=$e,G=25;do{var H,L=c(ot),V=c(ot/2),$=b(ot/2),ne=c(B),ce=b(B),xe=c(2*B),Ce=ne*ne,ze=ce*ce,Ue=V*V,He=1-ze*$*$,et=He?P(ce*$)*C(H=1/He):H=0,lt=2*et*ce*V-Xe,ft=et*ne-$e,xt=H*(ze*Ue+et*ce*$*Ce),Mt=H*(.5*L*xe-2*et*ne*V),_t=.25*H*(xe*V-et*ne*ze*L),zt=H*(Ce*$+et*Ue*ce),Et=Mt*_t-zt*xt;if(!Et)break;var Yt=(ft*Mt-lt*zt)/Et,Vt=(lt*_t-ft*xt)/Et;ot-=Yt,B-=Vt}while((k(Yt)>u||k(Vt)>u)&&--G>0);return[ot,B]}},q.invert=function(Xe,$e){if($e*=.375,!(Xe*=.375)&&k($e)>1)return null;var ot=1+Xe*Xe+$e*$e,B=C((ot-C(ot*ot-4*$e*$e))/2),G=E(B)/3,H=B?function(ne){return t(ne+C(ne*ne-1))}(k($e/B))/3:function(ne){return t(ne+C(ne*ne+1))}(k(Xe))/3,L=b(G),V=R(H),$=V*V-L*L;return[2*l(Xe)*T(O(H)*L,.25-$),2*l($e)*T(V*c(G),.25+$)]};var ee=C(8),Q=t(1+v);function J(Xe,$e){var ot=k($e);return ot<g?[Xe,t(h(g+$e/2))]:[Xe*b(ot)*(2*v-1/c(ot)),l($e)*(2*v*(ot-g)-t(h(ot/2)))]}function K(){return(0,A.c)(J).scale(112.314)}J.invert=function(Xe,$e){if((B=k($e))<Q)return[Xe,2*o(p($e))-m];var ot,B,G=g,H=25;do{var L=b(G/2),V=h(G/2);G-=ot=(ee*(G-g)-t(V)-B)/(ee-L*L/(2*V))}while(k(ot)>x&&--H>0);return[Xe/(b(G)*(ee-1/c(G))),l($e)*G]};var Y=e(69020);function ie(Xe){var $e=2*d/Xe;function ot(B,G){var H=(0,Y.O)(B,G);if(k(B)>m){var L=T(H[1],H[0]),V=C(H[0]*H[0]+H[1]*H[1]),$=$e*a((L-m)/$e)+m,ne=T(c(L-=$),2-b(L));L=$+E(d/V*c(ne))-ne,H[0]=V*b(L),H[1]=V*c(L)}return H}return ot.invert=function(B,G){var H=C(B*B+G*G);if(H>m){var L=T(G,B),V=$e*a((L-m)/$e)+m,$=L>V?-1:1,ne=H*b(V-L),ce=1/h($*P((ne-d)/C(d*(d-2*ne)+H*H)));L=V+2*o((ce+$*C(ce*ce-3))/3),B=H*b(L),G=H*c(L)}return Y.O.invert(B,G)},ot}function se(){var Xe=5,$e=(0,A.U)(ie),ot=$e(Xe),B=ot.stream,G=.01,H=-b(G*w),L=c(G*w);return ot.lobes=function(V){return arguments.length?$e(Xe=+V):Xe},ot.stream=function(V){var $=ot.rotate(),ne=B(V),ce=(ot.rotate([0,0]),B(V));return ot.rotate($),ne.sphere=function(){ce.polygonStart(),ce.lineStart();for(var xe=0,Ce=360/Xe,ze=2*d/Xe,Ue=90-180/Xe,He=m;xe<Xe;++xe,Ue-=Ce,He-=ze)ce.point(T(L*b(He),H)*S,E(L*c(He))*S),Ue<-90?(ce.point(-90,-180-Ue-G),ce.point(-90,-180-Ue+G)):(ce.point(90,Ue+G),ce.point(90,Ue-G));ce.lineEnd(),ce.polygonEnd()},ne},ot.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=e(54724);function ue(Xe,$e){if(arguments.length<2&&($e=Xe),$e===1)return ae.y;if($e===1/0)return ve;function ot(B,G){var H=(0,ae.y)(B/$e,G);return H[0]*=Xe,H}return ot.invert=function(B,G){var H=ae.y.invert(B/Xe,G);return H[0]*=$e,H},ot}function ve(Xe,$e){return[Xe*b($e)/b($e/=2),2*c($e)]}function ye(){var Xe=2,$e=(0,A.U)(ue),ot=$e(Xe);return ot.coefficient=function(B){return arguments.length?$e(Xe=+B):Xe},ot.scale(169.529)}function de(Xe,$e,ot){var B,G,H,L=100;ot=ot===void 0?0:+ot,$e=+$e;do(G=Xe(ot))===(H=Xe(ot+u))&&(H=G+u),ot-=B=-1*u*(G-$e)/(G-H);while(L-- >0&&k(B)>u);return L<0?NaN:ot}function pe(Xe,$e,ot){return $e===void 0&&($e=40),ot===void 0&&(ot=x),function(B,G,H,L){var V,$,ne;H=H===void 0?0:+H,L=L===void 0?0:+L;for(var ce=0;ce<$e;ce++){var xe=Xe(H,L),Ce=xe[0]-B,ze=xe[1]-G;if(k(Ce)<ot&&k(ze)<ot)break;var Ue=Ce*Ce+ze*ze;if(Ue>V)H-=$/=2,L-=ne/=2;else{V=Ue;var He=(H>0?-1:1)*ot,et=(L>0?-1:1)*ot,lt=Xe(H+He,L),ft=Xe(H,L+et),xt=(lt[0]-xe[0])/He,Mt=(lt[1]-xe[1])/He,_t=(ft[0]-xe[0])/et,zt=(ft[1]-xe[1])/et,Et=zt*xt-Mt*_t,Yt=(k(Et)<.5?.5:1)/Et;if(H+=$=(ze*_t-Ce*zt)*Yt,L+=ne=(Ce*Mt-ze*xt)*Yt,k($)<ot&&k(ne)<ot)break}}return[H,L]}}function ge(){var Xe=ue(1.68,2);function $e(ot,B){if(ot+B<-1.4){var G=(ot-B+1.6)*(ot+B+1.4)/8;ot+=G,B-=.8*G*c(B+d/2)}var H=Xe(ot,B),L=(1-b(ot*B))/12;return H[1]<0&&(H[0]*=1+L),H[1]>0&&(H[1]*=1+L/1.5*H[0]*H[0]),H}return $e.invert=pe($e),$e}function ke(){return(0,A.c)(ge()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ee(Xe,$e){var ot,B=Xe*c($e),G=30;do $e-=ot=($e+c($e)-B)/(1+b($e));while(k(ot)>u&&--G>0);return $e/2}function me(Xe,$e,ot){function B(G,H){return[Xe*G*b(H=Ee(ot,H)),$e*c(H)]}return B.invert=function(G,H){return H=E(H/$e),[G/(Xe*b(H)),E((2*H+c(2*H))/ot)]},B}ve.invert=function(Xe,$e){var ot=2*E($e/2);return[Xe*b(ot/2)/b(ot),ot]};var oe=me(v/m,v,d);function re(){return(0,A.c)(oe).scale(169.529)}var fe=2.00276,Se=1.11072;function be(Xe,$e){var ot=Ee(d,$e);return[fe*Xe/(1/b($e)+Se/b(ot)),($e+v*c(ot))/fe]}function we(){return(0,A.c)(be).scale(160.857)}function Me(Xe){var $e=0,ot=(0,A.U)(Xe),B=ot($e);return B.parallel=function(G){return arguments.length?ot($e=G*w):$e*S},B}function Ie(Xe,$e){return[Xe*b($e),$e]}function Oe(){return(0,A.c)(Ie).scale(152.63)}function he(Xe){if(!Xe)return Ie;var $e=1/h(Xe);function ot(B,G){var H=$e+Xe-G,L=H&&B*b(G)/H;return[H*c(L),$e-H*b(L)]}return ot.invert=function(B,G){var H=C(B*B+(G=$e-G)*G),L=$e+Xe-H;return[H/b(L)*T(B,G),L]},ot}function _e(){return Me(he).scale(123.082).center([0,26.1441]).parallel(45)}function Ae(Xe){function $e(ot,B){var G=m-B,H=G&&ot*Xe*c(G)/G;return[G*c(H)/Xe,m-G*b(H)]}return $e.invert=function(ot,B){var G=ot*Xe,H=m-B,L=C(G*G+H*H),V=T(G,H);return[(L?L/c(L):1)*V/Xe,m-L]},$e}function De(){var Xe=.5,$e=(0,A.U)(Ae),ot=$e(Xe);return ot.fraction=function(B){return arguments.length?$e(Xe=+B):Xe},ot.scale(158.837)}be.invert=function(Xe,$e){var ot,B,G=fe*$e,H=$e<0?-g:g,L=25;do B=G-v*c(H),H-=ot=(c(2*H)+2*H-d*c(B))/(2*b(2*H)+2+d*b(B)*v*b(H));while(k(ot)>u&&--L>0);return B=G-v*c(H),[Xe*(1/b(B)+Se/b(H))/fe,B]},Ie.invert=function(Xe,$e){return[Xe/b($e),$e]};var Le=me(1,4/d,d);function Be(){return(0,A.c)(Le).scale(152.63)}var Ve=e(24052),Ze=e(92992);function rt(Xe,$e,ot,B,G,H){var L,V=b(H);if(k(Xe)>1||k(H)>1)L=P(ot*G+$e*B*V);else{var $=c(Xe/2),ne=c(H/2);L=2*E(C($*$+$e*B*ne*ne))}return k(L)>u?[L,T(B*c(H),$e*G-ot*B*V)]:[0,0]}function it(Xe,$e,ot){return P((Xe*Xe+$e*$e-ot*ot)/(2*Xe*$e))}function dt(Xe){return Xe-2*d*s((Xe+d)/(2*d))}function mt(Xe,$e,ot){for(var B,G=[[Xe[0],Xe[1],c(Xe[1]),b(Xe[1])],[$e[0],$e[1],c($e[1]),b($e[1])],[ot[0],ot[1],c(ot[1]),b(ot[1])]],H=G[2],L=0;L<3;++L,H=B)B=G[L],H.v=rt(B[1]-H[1],H[3],H[2],B[3],B[2],B[0]-H[0]),H.point=[0,0];var V=it(G[0].v[0],G[2].v[0],G[1].v[0]),$=it(G[0].v[0],G[1].v[0],G[2].v[0]),ne=d-V;G[2].point[1]=0,G[0].point[0]=-(G[1].point[0]=G[0].v[0]/2);var ce=[G[2].point[0]=G[0].point[0]+G[2].v[0]*b(V),2*(G[0].point[1]=G[1].point[1]=G[2].v[0]*c(V))];return function(xe,Ce){var ze,Ue=c(Ce),He=b(Ce),et=new Array(3);for(ze=0;ze<3;++ze){var lt=G[ze];if(et[ze]=rt(Ce-lt[1],lt[3],lt[2],He,Ue,xe-lt[0]),!et[ze][0])return lt.point;et[ze][1]=dt(et[ze][1]-lt.v[1])}var ft=ce.slice();for(ze=0;ze<3;++ze){var xt=ze==2?0:ze+1,Mt=it(G[ze].v[0],et[ze][0],et[xt][0]);et[ze][1]<0&&(Mt=-Mt),ze?ze==1?(Mt=$-Mt,ft[0]-=et[ze][0]*b(Mt),ft[1]-=et[ze][0]*c(Mt)):(Mt=ne-Mt,ft[0]+=et[ze][0]*b(Mt),ft[1]+=et[ze][0]*c(Mt)):(ft[0]+=et[ze][0]*b(Mt),ft[1]-=et[ze][0]*c(Mt))}return ft[0]/=3,ft[1]/=3,ft}}function ht(Xe){return Xe[0]*=w,Xe[1]*=w,Xe}function Qe(){return Je([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Je(Xe,$e,ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:[Xe,$e,ot]}),G=[-B[0],-B[1]],H=(0,Ze.c)(G),L=mt(ht(H(Xe)),ht(H($e)),ht(H(ot)));L.invert=pe(L);var V=(0,A.c)(L).rotate(G),$=V.center;return delete V.rotate,V.center=function(ne){return arguments.length?$(H(ne)):H.invert($())},V.clipAngle(90)}function wt(Xe,$e){var ot=C(1-c($e));return[2/_*Xe*ot,_*(1-ot)]}function Pt(){return(0,A.c)(wt).scale(95.6464).center([0,30])}function It(Xe){var $e=h(Xe);function ot(B,G){return[B,(B?B/c(B):1)*(c(G)*b(B)-$e*b(G))]}return ot.invert=$e?function(B,G){B&&(G*=c(B)/B);var H=b(B);return[B,2*T(C(H*H+$e*$e-G*G)-H,$e-G)]}:function(B,G){return[B,E(B?G*h(B)/B:G)]},ot}function At(){return Me(It).scale(249.828).clipAngle(90)}wt.invert=function(Xe,$e){var ot=(ot=$e/_-1)*ot;return[ot>0?Xe*C(d/ot)/2:0,E(1-ot)]};var qe=C(3);function Ye(Xe,$e){return[qe*Xe*(2*b(2*$e/3)-1)/_,qe*_*c($e/3)]}function Ne(){return(0,A.c)(Ye).scale(156.19)}function We(Xe){var $e=b(Xe);function ot(B,G){return[B*$e,c(G)/$e]}return ot.invert=function(B,G){return[B/$e,E(G*$e)]},ot}function at(){return Me(We).parallel(38.58).scale(195.044)}function tt(Xe){var $e=b(Xe);function ot(B,G){return[B*$e,(1+$e)*h(G/2)]}return ot.invert=function(B,G){return[B/$e,2*o(G/(1+$e))]},ot}function Re(){return Me(tt).scale(124.75)}function Fe(Xe,$e){var ot=C(8/(3*d));return[ot*Xe*(1-k($e)/d),ot*$e]}function nt(){return(0,A.c)(Fe).scale(165.664)}function Ge(Xe,$e){var ot=C(4-3*c(k($e)));return[2/C(6*d)*Xe*ot,l($e)*C(2*d/3)*(2-ot)]}function ut(){return(0,A.c)(Ge).scale(165.664)}function pt(Xe,$e){var ot=C(d*(4+d));return[2/ot*Xe*(1+C(1-4*$e*$e/(d*d))),4/ot*$e]}function gt(){return(0,A.c)(pt).scale(180.739)}function ct(Xe,$e){var ot=(2+m)*c($e);$e/=2;for(var B=0,G=1/0;B<10&&k(G)>u;B++){var H=b($e);$e-=G=($e+c($e)*(H+2)-ot)/(2*H*(1+H))}return[2/C(d*(4+d))*Xe*(1+b($e)),2*C(d/(4+d))*c($e)]}function Tt(){return(0,A.c)(ct).scale(180.739)}function vt(Xe,$e){return[Xe*(1+b($e))/C(2+d),2*$e/C(2+d)]}function kt(){return(0,A.c)(vt).scale(173.044)}function Lt(Xe,$e){for(var ot=(1+m)*c($e),B=0,G=1/0;B<10&&k(G)>u;B++)$e-=G=($e+c($e)-ot)/(1+b($e));return ot=C(2+d),[Xe*(1+b($e))/ot,2*$e/ot]}function Ct(){return(0,A.c)(Lt).scale(173.044)}Ye.invert=function(Xe,$e){var ot=3*E($e/(qe*_));return[_*Xe/(qe*(2*b(2*ot/3)-1)),ot]},Fe.invert=function(Xe,$e){var ot=C(8/(3*d)),B=$e/ot;return[Xe/(ot*(1-k(B)/d)),B]},Ge.invert=function(Xe,$e){var ot=2-k($e)/C(2*d/3);return[Xe*C(6*d)/(2*ot),l($e)*E((4-ot*ot)/3)]},pt.invert=function(Xe,$e){var ot=C(d*(4+d))/2;return[Xe*ot/(1+C(1-$e*$e*(4+d)/(4*d))),$e*ot/2]},ct.invert=function(Xe,$e){var ot=$e*C((4+d)/d)/2,B=E(ot),G=b(B);return[Xe/(2/C(d*(4+d))*(1+G)),E((B+ot*(G+2))/(2+m))]},vt.invert=function(Xe,$e){var ot=C(2+d),B=$e*ot/2;return[ot*Xe/(1+b(B)),B]},Lt.invert=function(Xe,$e){var ot=1+m,B=C(ot/2);return[2*Xe*B/(1+b($e*=B)),E(($e+c($e))/ot)]};var Dt=3+2*v;function Gt(Xe,$e){var ot=c(Xe/=2),B=b(Xe),G=C(b($e)),H=b($e/=2),L=c($e)/(H+v*B*G),V=C(2/(1+L*L)),$=C((v*H+(B+ot)*G)/(v*H+(B-ot)*G));return[Dt*(V*($-1/$)-2*t($)),Dt*(V*L*($+1/$)-2*o(L))]}function tn(){return(0,A.c)(Gt).scale(62.5271)}Gt.invert=function(Xe,$e){if(!(ot=q.invert(Xe/1.2,1.065*$e)))return null;var ot,B=ot[0],G=ot[1],H=20;Xe/=Dt,$e/=Dt;do{var L=B/2,V=G/2,$=c(L),ne=b(L),ce=c(V),xe=b(V),Ce=b(G),ze=C(Ce),Ue=ce/(xe+v*ne*ze),He=Ue*Ue,et=C(2/(1+He)),lt=(v*xe+(ne+$)*ze)/(v*xe+(ne-$)*ze),ft=C(lt),xt=ft-1/ft,Mt=ft+1/ft,_t=et*xt-2*t(ft)-Xe,zt=et*Ue*Mt-2*o(Ue)-$e,Et=ce&&y*ze*$*He/ce,Yt=(v*ne*xe+ze)/(2*(xe+v*ne*ze)*(xe+v*ne*ze)*ze),Vt=-.5*Ue*et*et*et,Nt=Vt*Et,fn=Vt*Yt,gn=(gn=2*xe+v*ze*(ne-$))*gn*ft,kn=(v*ne*xe*ze+Ce)/gn,Pn=-v*$*ce/(ze*gn),Nn=xt*Nt-2*kn/ft+et*(kn+kn/lt),nr=xt*fn-2*Pn/ft+et*(Pn+Pn/lt),cr=Ue*Mt*Nt-2*Et/(1+He)+et*Mt*Et+et*Ue*(kn-kn/lt),qn=Ue*Mt*fn-2*Yt/(1+He)+et*Mt*Yt+et*Ue*(Pn-Pn/lt),sr=nr*cr-qn*Nn;if(!sr)break;var xr=(zt*nr-_t*qn)/sr,Er=(_t*cr-zt*Nn)/sr;B-=xr,G=i(-m,n(m,G-Er))}while((k(xr)>u||k(Er)>u)&&--H>0);return k(k(G)-m)<u?[0,G]:H&&[B,G]};var jt=b(35*w);function Wt(Xe,$e){var ot=h($e/2);return[Xe*jt*C(1-ot*ot),(1+jt)*ot]}function Ft(){return(0,A.c)(Wt).scale(137.152)}function Ln(Xe,$e){var ot=$e/2,B=b(ot);return[2*Xe/_*b($e)*B*B,_*h(ot)]}function bn(){return(0,A.c)(Ln).scale(135.264)}function hn(Xe){var $e=1-Xe,ot=G(d,0)[0]-G(-d,0)[0],B=C(2*(G(0,m)[1]-G(0,-m)[1])/ot);function G(V,$){var ne=b($),ce=c($);return[ne/($e+Xe*ne)*V,$e*$+Xe*ce]}function H(V,$){var ne=G(V,$);return[ne[0]*B,ne[1]/B]}function L(V){return H(0,V)[1]}return H.invert=function(V,$){var ne=de(L,$);return[V/B*(Xe+$e/b(ne)),ne]},H}function Kt(){var Xe=.5,$e=(0,A.U)(hn),ot=$e(Xe);return ot.alpha=function(B){return arguments.length?$e(Xe=+B):Xe},ot.scale(168.725)}Wt.invert=function(Xe,$e){var ot=$e/(1+jt);return[Xe&&Xe/(jt*C(1-ot*ot)),2*o(ot)]},Ln.invert=function(Xe,$e){var ot=o($e/_),B=b(ot),G=2*ot;return[Xe*_/2/(b(G)*B*B),G]};var sn=e(4888),Qt=e(69604);function cn(Xe){return[Xe[0]/2,E(h(Xe[1]/2*w))*S]}function vn(Xe){return[2*Xe[0],2*o(c(Xe[1]*w))*S]}function xn(Xe){Xe==null&&(Xe=sn.c);var $e=Xe(),ot=(0,Qt.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function B(H){return $e(cn(H))}function G(H){B[H]=function(){return arguments.length?($e[H].apply($e,arguments),B):$e[H]()}}return $e.invert&&(B.invert=function(H){return vn($e.invert(H))}),B.stream=function(H){var L=$e.stream(H),V=ot.stream({point:function($,ne){L.point($/2,E(h(-ne/2*w))*S)},lineStart:function(){L.lineStart()},lineEnd:function(){L.lineEnd()},polygonStart:function(){L.polygonStart()},polygonEnd:function(){L.polygonEnd()}});return V.sphere=L.sphere,V},B.rotate=function(H){return arguments.length?(ot.rotate(H),B):ot.rotate()},B.center=function(H){return arguments.length?($e.center(cn(H)),B):vn($e.center())},G("angle"),G("clipAngle"),G("clipExtent"),G("fitExtent"),G("fitHeight"),G("fitSize"),G("fitWidth"),G("scale"),G("translate"),G("precision"),B.scale(249.5)}function An(Xe,$e){var ot=2*d/$e,B=Xe*Xe;function G(H,L){var V=(0,Y.O)(H,L),$=V[0],ne=V[1],ce=$*$+ne*ne;if(ce>B){var xe=C(ce),Ce=T(ne,$),ze=ot*a(Ce/ot),Ue=Ce-ze,He=Xe*b(Ue),et=(Xe*c(Ue)-Ue*c(He))/(m-He),lt=Sn(Ue,et),ft=(d-Xe)/Tn(lt,He,d);$=xe;var xt,Mt=50;do $-=xt=(Xe+Tn(lt,He,$)*ft-xe)/(lt($)*ft);while(k(xt)>u&&--Mt>0);ne=Ue*c($),$<m&&(ne-=et*($-m));var _t=c(ze),zt=b(ze);V[0]=$*zt-ne*_t,V[1]=$*_t+ne*zt}return V}return G.invert=function(H,L){var V=H*H+L*L;if(V>B){var $=C(V),ne=T(L,H),ce=ot*a(ne/ot),xe=ne-ce;H=$*b(xe),L=$*c(xe);for(var Ce=H-m,ze=c(H),Ue=L/ze,He=H<m?1/0:0,et=10;;){var lt=Xe*c(Ue),ft=Xe*b(Ue),xt=c(ft),Mt=m-ft,_t=(lt-Ue*xt)/Mt,zt=Sn(Ue,_t);if(k(He)<x||!--et)break;Ue-=He=(Ue*ze-_t*Ce-L)/(ze-2*Ce*(Mt*(ft+Ue*lt*b(ft)-xt)-lt*(lt-Ue*xt))/(Mt*Mt))}H=($=Xe+Tn(zt,ft,H)*(d-Xe)/Tn(zt,ft,d))*b(ne=ce+Ue),L=$*c(ne)}return Y.O.invert(H,L)},G}function Sn(Xe,$e){return function(ot){var B=Xe*b(ot);return ot<m&&(B-=$e),C(1+B*B)}}function Tn(Xe,$e,ot){for(var B=(ot-$e)/50,G=Xe($e)+Xe(ot),H=1,L=$e;H<50;++H)G+=2*Xe(L+=B);return .5*G*B}function Rn(){var Xe=6,$e=30*w,ot=b($e),B=c($e),G=(0,A.U)(An),H=G($e,Xe),L=H.stream,V=-b(.01*w),$=c(.01*w);return H.radius=function(ne){return arguments.length?(ot=b($e=ne*w),B=c($e),G($e,Xe)):$e*S},H.lobes=function(ne){return arguments.length?G($e,Xe=+ne):Xe},H.stream=function(ne){var ce=H.rotate(),xe=L(ne),Ce=(H.rotate([0,0]),L(ne));return H.rotate(ce),xe.sphere=function(){Ce.polygonStart(),Ce.lineStart();for(var ze=0,Ue=2*d/Xe,He=0;ze<Xe;++ze,He-=Ue)Ce.point(T($*b(He),V)*S,E($*c(He))*S),Ce.point(T(B*b(He-Ue/2),ot)*S,E(B*c(He-Ue/2))*S);Ce.lineEnd(),Ce.polygonEnd()},xe},H.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function In(Xe,$e,ot,B,G,H,L,V){function $(ne,ce){if(!ce)return[Xe*ne/d,0];var xe=ce*ce,Ce=Xe+xe*($e+xe*(ot+xe*B)),ze=ce*(G-1+xe*(H-V+xe*L)),Ue=(Ce*Ce+ze*ze)/(2*ze),He=ne*E(Ce/Ue)/d;return[Ue*c(He),ce*(1+xe*V)+Ue*(1-b(He))]}return arguments.length<8&&(V=0),$.invert=function(ne,ce){var xe,Ce,ze=d*ne/Xe,Ue=ce,He=50;do{var et=Ue*Ue,lt=Xe+et*($e+et*(ot+et*B)),ft=Ue*(G-1+et*(H-V+et*L)),xt=lt*lt+ft*ft,Mt=2*ft,_t=xt/Mt,zt=_t*_t,Et=E(lt/_t)/d,Yt=ze*Et,Vt=lt*lt,Nt=(2*$e+et*(4*ot+6*et*B))*Ue,fn=G+et*(3*H+5*et*L),gn=(2*(lt*Nt+ft*(fn-1))*Mt-xt*(2*(fn-1)))/(Mt*Mt),kn=b(Yt),Pn=c(Yt),Nn=_t*kn,nr=_t*Pn,cr=ze/d*(1/C(1-Vt/zt))*(Nt*_t-lt*gn)/zt,qn=nr-ne,sr=Ue*(1+et*V)+_t-Nn-ce,xr=gn*Pn+Nn*cr,Er=Nn*Et,Qn=1+gn-(gn*kn-nr*cr),or=nr*Et,wr=xr*or-Qn*Er;if(!wr)break;ze-=xe=(sr*xr-qn*Qn)/wr,Ue-=Ce=(qn*or-sr*Er)/wr}while((k(xe)>u||k(Ce)>u)&&--He>0);return[ze,Ue]},$}var Xn=In(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Vn(){return(0,A.c)(Xn).scale(149.995)}var er=In(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Wn(){return(0,A.c)(er).scale(153.93)}var fr=In(5/6*d,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Jt(){return(0,A.c)(fr).scale(130.945)}function en(Xe,$e){var ot=Xe*Xe,B=$e*$e;return[Xe*(1-.162388*B)*(.87-952426e-9*ot*ot),$e*(1+B/12)]}function Mn(){return(0,A.c)(en).scale(131.747)}en.invert=function(Xe,$e){var ot,B=Xe,G=$e,H=50;do{var L=G*G;G-=ot=(G*(1+L/12)-$e)/(1+L/4)}while(k(ot)>u&&--H>0);H=50,Xe/=1-.162388*L;do{var V=(V=B*B)*V;B-=ot=(B*(.87-952426e-9*V)-Xe)/(.87-.00476213*V)}while(k(ot)>u&&--H>0);return[B,G]};var pn=In(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Cn(){return(0,A.c)(pn).scale(131.087)}function jn(Xe){var $e=Xe(m,0)[0]-Xe(-m,0)[0];function ot(B,G){var H=B>0?-.5:.5,L=Xe(B+H*d,G);return L[0]-=H*$e,L}return Xe.invert&&(ot.invert=function(B,G){var H=B>0?-.5:.5,L=Xe.invert(B+H*$e,G),V=L[0]-H*d;return V<-d?V+=2*d:V>d&&(V-=2*d),L[0]=V,L}),ot}function Bn(Xe,$e){var ot=l(Xe),B=l($e),G=b($e),H=b(Xe)*G,L=c(Xe)*G,V=c(B*$e);Xe=k(T(L,V)),$e=E(H),k(Xe-m)>u&&(Xe%=m);var $=function(ne,ce){if(ce===m)return[0,0];var xe,Ce,ze=c(ce),Ue=ze*ze,He=Ue*Ue,et=1+He,lt=1+3*He,ft=1-He,xt=E(1/C(et)),Mt=ft+Ue*et*xt,_t=(1-ze)/Mt,zt=C(_t),Et=_t*et,Yt=C(Et),Vt=zt*ft;if(ne===0)return[0,-(Vt+Ue*Yt)];var Nt,fn=b(ce),gn=1/fn,kn=2*ze*fn,Pn=(-Mt*fn-(1-ze)*((-3*Ue+xt*lt)*kn))/(Mt*Mt),Nn=-gn*kn,nr=-gn*(Ue*et*Pn+_t*lt*kn),cr=-2*gn*(ft*(.5*Pn/zt)-2*Ue*zt*kn),qn=4*ne/d;if(ne>.222*d||ce<d/4&&ne>.175*d){if(xe=(Vt+Ue*C(Et*(1+He)-Vt*Vt))/(1+He),ne>d/4)return[xe,xe];var sr=xe,xr=.5*xe;xe=.5*(xr+sr),Ce=50;do{var Er=xe*(cr+Nn*C(Et-xe*xe))+nr*E(xe/Yt)-qn;if(!Er)break;Er<0?xr=xe:sr=xe,xe=.5*(xr+sr)}while(k(sr-xr)>u&&--Ce>0)}else{xe=u,Ce=25;do{var Qn=xe*xe,or=C(Et-Qn),wr=cr+Nn*or,ur=xe*wr+nr*E(xe/Yt)-qn;xe-=Nt=or?ur/(wr+(nr-Nn*Qn)/or):0}while(k(Nt)>u&&--Ce>0)}return[xe,-Vt-Ue*C(Et-xe*xe)]}(Xe>d/4?m-Xe:Xe,$e);return Xe>d/4&&(V=$[0],$[0]=-$[1],$[1]=-V),$[0]*=ot,$[1]*=-B,$}function Yn(){return(0,A.c)(jn(Bn)).scale(239.75)}function dr(Xe,$e){var ot,B,G,H,L,V;if($e<u)return[(H=c(Xe))-(ot=$e*(Xe-H*(B=b(Xe)))/4)*B,B+ot*H,1-$e*H*H/2,Xe-ot];if($e>=1-u)return ot=(1-$e)/4,G=1/(B=R(Xe)),[(H=((V=p(2*(V=Xe)))-1)/(V+1))+ot*((L=B*O(Xe))-Xe)/(B*B),G-ot*H*G*(L-Xe),G+ot*H*G*(L+Xe),2*o(p(Xe))-m+ot*(L-Xe)/B];var $=[1,0,0,0,0,0,0,0,0],ne=[C($e),0,0,0,0,0,0,0,0],ce=0;for(B=C(1-$e),L=1;k(ne[ce]/$[ce])>u&&ce<8;)ot=$[ce++],ne[ce]=(ot-B)/2,$[ce]=(ot+B)/2,B=C(ot*B),L*=2;G=L*$[ce]*Xe;do G=(E(H=ne[ce]*c(B=G)/$[ce])+G)/2;while(--ce);return[c(G),H=b(G),H/b(G-B),G]}function Zt(Xe,$e){if(!$e)return Xe;if($e===1)return t(h(Xe/2+g));for(var ot=1,B=C(1-$e),G=C($e),H=0;k(G)>u;H++){if(Xe%d){var L=o(B*h(Xe)/ot);L<0&&(L+=d),Xe+=L+~~(Xe/d)*d}else Xe+=Xe;G=(ot+B)/2,B=C(ot*B),G=((ot=G)-B)/2}return Xe/(r(2,H)*ot)}function dn(Xe,$e){var ot=(v-1)/(v+1),B=C(1-ot*ot),G=Zt(m,B*B),H=t(h(d/4+k($e)/2)),L=p(-1*H)/C(ot),V=function(ne,ce){var xe=ne*ne,Ce=ce+1,ze=1-xe-ce*ce;return[.5*((ne>=0?m:-m)-T(ze,2*ne)),-.25*t(ze*ze+4*xe)+.5*t(Ce*Ce+xe)]}(L*b(-1*Xe),L*c(-1*Xe)),$=function(ne,ce,xe){var Ce=k(ne),ze=O(k(ce));if(Ce){var Ue=1/c(Ce),He=1/(h(Ce)*h(Ce)),et=-(He+xe*(ze*ze*Ue*Ue)-1+xe),lt=(-et+C(et*et-(xe-1)*He*4))/2;return[Zt(o(1/C(lt)),xe)*l(ne),Zt(o(C((lt/He-1)/xe)),1-xe)*l(ce)]}return[0,Zt(o(ze),1-xe)*l(ce)]}(V[0],V[1],B*B);return[-$[1],($e>=0?1:-1)*(.5*G-$[0])]}function St(){return(0,A.c)(jn(dn)).scale(151.496)}Bn.invert=function(Xe,$e){k(Xe)>1&&(Xe=2*l(Xe)-Xe),k($e)>1&&($e=2*l($e)-$e);var ot=l(Xe),B=l($e),G=-ot*Xe,H=-B*$e,L=H/G<1,V=function(xe,Ce){for(var ze=0,Ue=1,He=.5,et=50;;){var lt=He*He,ft=C(He),xt=E(1/C(1+lt)),Mt=1-lt+He*(1+lt)*xt,_t=(1-ft)/Mt,zt=C(_t),Et=_t*(1+lt),Yt=zt*(1-lt),Vt=C(Et-xe*xe),Nt=Ce+Yt+He*Vt;if(k(Ue-ze)<x||--et==0||Nt===0)break;Nt>0?ze=He:Ue=He,He=.5*(ze+Ue)}if(!et)return null;var fn=E(ft),gn=b(fn),kn=1/gn,Pn=2*ft*gn,Nn=(-Mt*gn-(-3*He+xt*(1+3*lt))*Pn*(1-ft))/(Mt*Mt);return[d/4*(xe*(-2*kn*((1-lt)*(.5*Nn/zt)-2*He*zt*Pn)+-kn*Pn*Vt)+-kn*(He*(1+lt)*Nn+_t*(1+3*lt)*Pn)*E(xe/C(Et))),fn]}(L?H:G,L?G:H),$=V[0],ne=V[1],ce=b(ne);return L&&($=-m-$),[ot*(T(c($)*ce,-c(ne))+d),B*E(b($)*ce)]},dn.invert=function(Xe,$e){var ot,B,G,H,L,V,$=(v-1)/(v+1),ne=C(1-$*$),ce=(B=-Xe,G=ne*ne,(ot=.5*Zt(m,ne*ne)-$e)?(H=dr(ot,G),B?(V=(L=dr(B,1-G))[1]*L[1]+G*H[0]*H[0]*L[0]*L[0],[[H[0]*L[2]/V,H[1]*H[2]*L[0]*L[1]/V],[H[1]*L[1]/V,-H[0]*H[2]*L[0]*L[2]/V],[H[2]*L[1]*L[2]/V,-G*H[0]*H[1]*L[0]/V]]):[[H[0],0],[H[1],0],[H[2],0]]):[[0,(L=dr(B,1-G))[0]/L[1]],[1/L[1],0],[L[2]/L[1],0]]),xe=function(Ce,ze){var Ue=ze[0]*ze[0]+ze[1]*ze[1];return[(Ce[0]*ze[0]+Ce[1]*ze[1])/Ue,(Ce[1]*ze[0]-Ce[0]*ze[1])/Ue]}(ce[0],ce[1]);return[T(xe[1],xe[0])/-1,2*o(p(-.5*t($*xe[0]*xe[0]+$*xe[1]*xe[1])))-m]};var Rt=e(61780);function Xt(Xe){var $e=c(Xe),ot=b(Xe),B=ln(Xe);function G(H,L){var V=B(H,L);H=V[0],L=V[1];var $=c(L),ne=b(L),ce=b(H),xe=P($e*$+ot*ne*ce),Ce=c(xe),ze=k(Ce)>u?xe/Ce:1;return[ze*ot*c(H),(k(H)>m?ze:-ze)*($e*ne-ot*$*ce)]}return B.invert=ln(-Xe),G.invert=function(H,L){var V=C(H*H+L*L),$=-c(V),ne=b(V),ce=V*ne,xe=-L*$,Ce=V*$e,ze=C(ce*ce+xe*xe-Ce*Ce),Ue=T(ce*Ce+xe*ze,xe*Ce-ce*ze),He=(V>m?-1:1)*T(H*$,V*b(Ue)*ne+L*c(Ue)*$);return B.invert(He,Ue)},G}function ln(Xe){var $e=c(Xe),ot=b(Xe);return function(B,G){var H=b(G),L=b(B)*H,V=c(B)*H,$=c(G);return[T(V,L*ot-$*$e),E($*ot+L*$e)]}}function un(){var Xe=0,$e=(0,A.U)(Xt),ot=$e(Xe),B=ot.rotate,G=ot.stream,H=(0,Rt.c)();return ot.parallel=function(L){if(!arguments.length)return Xe*S;var V=ot.rotate();return $e(Xe=L*w).rotate(V)},ot.rotate=function(L){return arguments.length?(B.call(ot,[L[0],L[1]-Xe*S]),H.center([-L[0],-L[1]]),ot):((L=B.call(ot))[1]+=Xe*S,L)},ot.stream=function(L){return(L=G(L)).sphere=function(){L.polygonStart();var V,$=H.radius(89.99)().coordinates[0],ne=$.length-1,ce=-1;for(L.lineStart();++ce<ne;)L.point((V=$[ce])[0],V[1]);for(L.lineEnd(),ne=($=H.radius(90.01)().coordinates[0]).length-1,L.lineStart();--ce>=0;)L.point((V=$[ce])[0],V[1]);L.lineEnd(),L.polygonEnd()},L},ot.scale(79.4187).parallel(45).clipAngle(179.999)}var mn=e(84706),rn=e(16016),qt=E(1-1/3)*S,Ht=We(0);function $t(Xe){var $e=qt*w,ot=wt(d,$e)[0]-wt(-d,$e)[0],B=Ht(0,$e)[1],G=wt(0,$e)[1],H=_-G,L=f/Xe,V=4/f,$=B+H*H*4/f;function ne(ce,xe){var Ce,ze=k(xe);if(ze>$e){var Ue=n(Xe-1,i(0,s((ce+d)/L)));(Ce=wt(ce+=d*(Xe-1)/Xe-Ue*L,ze))[0]=Ce[0]*f/ot-f*(Xe-1)/(2*Xe)+Ue*f/Xe,Ce[1]=B+4*(Ce[1]-G)*H/f,xe<0&&(Ce[1]=-Ce[1])}else Ce=Ht(ce,xe);return Ce[0]*=V,Ce[1]/=$,Ce}return ne.invert=function(ce,xe){ce/=V;var Ce=k(xe*=$);if(Ce>B){var ze=n(Xe-1,i(0,s((ce+d)/L)));ce=(ce+d*(Xe-1)/Xe-ze*L)*ot/f;var Ue=wt.invert(ce,.25*(Ce-B)*f/H+G);return Ue[0]-=d*(Xe-1)/Xe-ze*L,xe<0&&(Ue[1]=-Ue[1]),Ue}return Ht.invert(ce,xe)},ne}function an(Xe,$e){return[Xe,1&$e?90-u:qt]}function wn(Xe,$e){return[Xe,1&$e?-90+u:-qt]}function En(Xe){return[Xe[0]*(1-u),Xe[1]]}function On(){var Xe=4,$e=(0,A.U)($t),ot=$e(Xe),B=ot.stream;return ot.lobes=function(G){return arguments.length?$e(Xe=+G):Xe},ot.stream=function(G){var H=ot.rotate(),L=B(G),V=(ot.rotate([0,0]),B(G));return ot.rotate(H),L.sphere=function(){var $,ne;(0,rn.c)(($=180/Xe,ne=[].concat((0,mn.ik)(-180,180+$/2,$).map(an),(0,mn.ik)(180,-180-$/2,-$).map(wn)),{type:"Polygon",coordinates:[$===180?ne.map(En):ne]}),V)},L},ot.scale(239.75)}function Fn(Xe){var $e,ot=1+Xe,B=E(c(1/ot)),G=2*C(d/($e=d+4*B*ot)),H=.5*G*(ot+C(Xe*(2+Xe))),L=Xe*Xe,V=ot*ot;function $(ne,ce){var xe,Ce,ze=1-c(ce);if(ze&&ze<2){var Ue,He=m-ce,et=25;do{var lt=c(He),ft=b(He),xt=B+T(lt,ot-ft),Mt=1+V-2*ot*ft;He-=Ue=(He-L*B-ot*lt+Mt*xt-.5*ze*$e)/(2*ot*lt*xt)}while(k(Ue)>x&&--et>0);xe=G*C(Mt),Ce=ne*xt/d}else xe=G*(Xe+ze),Ce=ne*B/d;return[xe*c(Ce),H-xe*b(Ce)]}return $.invert=function(ne,ce){var xe=ne*ne+(ce-=H)*ce,Ce=(1+V-xe/(G*G))/(2*ot),ze=P(Ce),Ue=c(ze),He=B+T(Ue,ot-Ce);return[E(ne/C(xe))*d/He,E(1-2*(ze-L*B-ot*Ue+(1+V-2*ot*Ce)*He)/$e)]},$}function $n(){var Xe=1,$e=(0,A.U)(Fn),ot=$e(Xe);return ot.ratio=function(B){return arguments.length?$e(Xe=+B):Xe},ot.scale(167.774).center([0,18.67])}var Hn=.7109889596207567,Kn=.0528035274542;function tr(Xe,$e){return $e>-Hn?((Xe=oe(Xe,$e))[1]+=Kn,Xe):Ie(Xe,$e)}function Jn(){return(0,A.c)(tr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function hr(Xe,$e){return k($e)>Hn?((Xe=oe(Xe,$e))[1]-=$e>0?Kn:-Kn,Xe):Ie(Xe,$e)}function br(){return(0,A.c)(hr).scale(152.63)}function gr(Xe,$e,ot,B){var G=C(4*d/(2*ot+(1+Xe-$e/2)*c(2*ot)+(Xe+$e)/2*c(4*ot)+$e/2*c(6*ot))),H=C(B*c(ot)*C((1+Xe*b(2*ot)+$e*b(4*ot))/(1+Xe+$e))),L=ot*$(1);function V(xe){return C(1+Xe*b(2*xe)+$e*b(4*xe))}function $(xe){var Ce=xe*ot;return(2*Ce+(1+Xe-$e/2)*c(2*Ce)+(Xe+$e)/2*c(4*Ce)+$e/2*c(6*Ce))/ot}function ne(xe){return V(xe)*c(xe)}var ce=function(xe,Ce){var ze=ot*de($,L*c(Ce)/ot,Ce/d);isNaN(ze)&&(ze=ot*l(Ce));var Ue=G*V(ze);return[Ue*H*xe/d*b(ze),Ue/H*c(ze)]};return ce.invert=function(xe,Ce){var ze=de(ne,Ce*H/G);return[xe*d/(b(ze)*G*H*V(ze)),E(ot*$(ze/ot)/L)]},ot===0&&(G=C(B/d),(ce=function(xe,Ce){return[xe*G,c(Ce)/G]}).invert=function(xe,Ce){return[xe/G,E(Ce*G)]}),ce}function ar(){var Xe=1,$e=0,ot=45*w,B=2,G=(0,A.U)(gr),H=G(Xe,$e,ot,B);return H.a=function(L){return arguments.length?G(Xe=+L,$e,ot,B):Xe},H.b=function(L){return arguments.length?G(Xe,$e=+L,ot,B):$e},H.psiMax=function(L){return arguments.length?G(Xe,$e,ot=+L*w,B):ot*S},H.ratio=function(L){return arguments.length?G(Xe,$e,ot,B=+L):B},H.scale(180.739)}function mr(Xe,$e,ot,B,G,H,L,V,$,ne,ce){if(ce.nanEncountered)return NaN;var xe,Ce,ze,Ue,He,et,lt,ft,xt,Mt;if(Ce=Xe($e+.25*(xe=ot-$e)),ze=Xe(ot-.25*xe),isNaN(Ce))ce.nanEncountered=!0;else{if(!isNaN(ze))return Mt=((et=(Ue=xe*(B+4*Ce+G)/12)+(He=xe*(G+4*ze+H)/12))-L)/15,ne>$?(ce.maxDepthCount++,et+Mt):Math.abs(Mt)<V?et+Mt:(ft=mr(Xe,$e,lt=$e+.5*xe,B,Ce,G,Ue,.5*V,$,ne+1,ce),isNaN(ft)?(ce.nanEncountered=!0,NaN):(xt=mr(Xe,lt,ot,G,ze,H,He,.5*V,$,ne+1,ce),isNaN(xt)?(ce.nanEncountered=!0,NaN):ft+xt));ce.nanEncountered=!0}}function Mr(Xe,$e,ot,B,G){B===void 0&&(B=1e-8),G===void 0&&(G=20);var H=Xe($e),L=Xe(.5*($e+ot)),V=Xe(ot);return mr(Xe,$e,ot,H,L,V,(H+4*L+V)*(ot-$e)/6,B,G,1,{maxDepthCount:0,nanEncountered:!1})}function Dr(Xe,$e,ot){function B(ze){return Xe+(1-Xe)*r(1-r(ze,$e),1/$e)}function G(ze){return Mr(B,0,ze,1e-4)}for(var H=1/G(1),L=1e3,V=1.00000001*H,$=[],ne=0;ne<=L;ne++)$.push(G(ne/L)*V);function ce(ze){var Ue=0,He=L,et=500;do $[et]>ze?He=et:Ue=et,et=Ue+He>>1;while(et>Ue);var lt=$[et+1]-$[et];return lt&&(lt=(ze-$[et+1])/lt),(et+1+lt)/L}var xe=2*ce(1)/d*H/ot,Ce=function(ze,Ue){var He=ce(k(c(Ue))),et=B(He)*ze;return He/=xe,[et,Ue>=0?He:-He]};return Ce.invert=function(ze,Ue){var He;return k(Ue*=xe)<1&&(He=l(Ue)*E(G(k(Ue))*H)),[ze/B(k(Ue)),He]},Ce}function fi(){var Xe=0,$e=2.5,ot=1.183136,B=(0,A.U)(Dr),G=B(Xe,$e,ot);return G.alpha=function(H){return arguments.length?B(Xe=+H,$e,ot):Xe},G.k=function(H){return arguments.length?B(Xe,$e=+H,ot):$e},G.gamma=function(H){return arguments.length?B(Xe,$e,ot=+H):ot},G.scale(152.63)}function hi(Xe,$e){return k(Xe[0]-$e[0])<u&&k(Xe[1]-$e[1])<u}function Ri(Xe,$e){for(var ot,B,G,H=-1,L=Xe.length,V=Xe[0],$=[];++H<L;){B=((ot=Xe[H])[0]-V[0])/$e,G=(ot[1]-V[1])/$e;for(var ne=0;ne<$e;++ne)$.push([V[0]+ne*B,V[1]+ne*G]);V=ot}return $.push(ot),$}function ci(Xe,$e,ot){var B,G;function H($,ne){for(var ce=ne<0?-1:1,xe=$e[+(ne<0)],Ce=0,ze=xe.length-1;Ce<ze&&$>xe[Ce][2][0];++Ce);var Ue=Xe($-xe[Ce][1][0],ne);return Ue[0]+=Xe(xe[Ce][1][0],ce*ne>ce*xe[Ce][0][1]?xe[Ce][0][1]:ne)[0],Ue}ot?H.invert=ot(H):Xe.invert&&(H.invert=function($,ne){for(var ce=G[+(ne<0)],xe=$e[+(ne<0)],Ce=0,ze=ce.length;Ce<ze;++Ce){var Ue=ce[Ce];if(Ue[0][0]<=$&&$<Ue[1][0]&&Ue[0][1]<=ne&&ne<Ue[1][1]){var He=Xe.invert($-Xe(xe[Ce][1][0],0)[0],ne);return He[0]+=xe[Ce][1][0],hi(H(He[0],He[1]),[$,ne])?He:null}}});var L=(0,A.c)(H),V=L.stream;return L.stream=function($){var ne=L.rotate(),ce=V($),xe=(L.rotate([0,0]),V($));return L.rotate(ne),ce.sphere=function(){(0,rn.c)(B,xe)},ce},L.lobes=function($){return arguments.length?(B=function(ne){var ce,xe,Ce,ze,Ue,He,et,lt=[],ft=ne[0].length;for(et=0;et<ft;++et)xe=(ce=ne[0][et])[0][0],Ce=ce[0][1],ze=ce[1][1],Ue=ce[2][0],He=ce[2][1],lt.push(Ri([[xe+u,Ce+u],[xe+u,ze-u],[Ue-u,ze-u],[Ue-u,He+u]],30));for(et=ne[1].length-1;et>=0;--et)xe=(ce=ne[1][et])[0][0],Ce=ce[0][1],ze=ce[1][1],Ue=ce[2][0],He=ce[2][1],lt.push(Ri([[Ue-u,He-u],[Ue-u,ze+u],[xe+u,ze+u],[xe+u,Ce-u]],30));return{type:"Polygon",coordinates:[(0,mn.Uf)(lt)]}}($),$e=$.map(function(ne){return ne.map(function(ce){return[[ce[0][0]*w,ce[0][1]*w],[ce[1][0]*w,ce[1][1]*w],[ce[2][0]*w,ce[2][1]*w]]})}),G=$e.map(function(ne){return ne.map(function(ce){var xe,Ce=Xe(ce[0][0],ce[0][1])[0],ze=Xe(ce[2][0],ce[2][1])[0],Ue=Xe(ce[1][0],ce[0][1])[1],He=Xe(ce[1][0],ce[1][1])[1];return Ue>He&&(xe=Ue,Ue=He,He=xe),[[Ce,Ue],[ze,He]]})}),L):$e.map(function(ne){return ne.map(function(ce){return[[ce[0][0]*S,ce[0][1]*S],[ce[1][0]*S,ce[1][1]*S],[ce[2][0]*S,ce[2][1]*S]]})})},$e!=null&&L.lobes($e),L}tr.invert=function(Xe,$e){return $e>-Hn?oe.invert(Xe,$e-Kn):Ie.invert(Xe,$e)},hr.invert=function(Xe,$e){return k($e)>Hn?oe.invert(Xe,$e+($e>0?Kn:-Kn)):Ie.invert(Xe,$e)};var Ti=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function fa(){return ci(be,Ti).scale(160.857)}var zr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ui(){return ci(hr,zr).scale(152.63)}var Ia=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Bi(){return ci(oe,Ia).scale(169.529)}var bo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Do(){return ci(oe,bo).scale(169.529).rotate([20,0])}var Qi=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function io(){return ci(tr,Qi,pe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ao=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function zo(){return ci(Ie,ao).scale(152.63).rotate([-20,0])}function Oa(Xe,$e){return[3/f*Xe*C(d*d/3-$e*$e),$e]}function Va(){return(0,A.c)(Oa).scale(158.837)}function Ha(Xe){function $e(ot,B){if(k(k(B)-m)<u)return[0,B<0?-2:2];var G=c(B),H=r((1+G)/(1-G),Xe/2),L=.5*(H+1/H)+b(ot*=Xe);return[2*c(ot)/L,(H-1/H)/L]}return $e.invert=function(ot,B){var G=k(B);if(k(G-2)<u)return ot?null:[0,l(B)*m];if(G>2)return null;var H=(ot/=2)*ot,L=(B/=2)*B,V=2*B/(1+H+L);return V=r((1+V)/(1-V),1/Xe),[T(2*ot,1-H-L)/Xe,E((V-1)/(V+1))]},$e}function oi(){var Xe=.5,$e=(0,A.U)(Ha),ot=$e(Xe);return ot.spacing=function(B){return arguments.length?$e(Xe=+B):Xe},ot.scale(124.75)}Oa.invert=function(Xe,$e){return[f/3*Xe/C(d*d/3-$e*$e),$e]};var Vi=d/v;function _o(Xe,$e){return[Xe*(1+C(b($e)))/2,$e/(b($e/2)*b(Xe/6))]}function oo(){return(0,A.c)(_o).scale(97.2672)}function qa(Xe,$e){var ot=Xe*Xe,B=$e*$e;return[Xe*(.975534+B*(-.0143059*ot-.119161+-.0547009*B)),$e*(1.00384+ot*(.0802894+-.02855*B+199025e-9*ot)+B*(.0998909+-.0491032*B))]}function Ro(){return(0,A.c)(qa).scale(139.98)}function so(Xe,$e){return[c(Xe)/b($e),h($e)*b(Xe)]}function Fo(){return(0,A.c)(so).scale(144.049).clipAngle(89.999)}function wo(Xe){var $e=b(Xe),ot=h(g+Xe/2);function B(G,H){var L=H-Xe,V=k(L)<u?G*$e:k(V=g+H/2)<u||k(k(V)-m)<u?0:G*L/t(h(V)/ot);return[V,L]}return B.invert=function(G,H){var L,V=H+Xe;return[k(H)<u?G/$e:k(L=g+V/2)<u||k(k(L)-m)<u?0:G*t(h(L)/ot)/H,V]},B}function Bo(){return Me(wo).parallel(40).scale(158.837)}function lo(Xe,$e){return[Xe,1.25*t(h(g+.4*$e))]}function hl(){return(0,A.c)(lo).scale(108.318)}function $s(Xe){var $e=Xe.length-1;function ot(B,G){for(var H,L=b(G),V=2/(1+L*b(B)),$=V*L*c(B),ne=V*c(G),ce=$e,xe=Xe[ce],Ce=xe[0],ze=xe[1];--ce>=0;)Ce=(xe=Xe[ce])[0]+$*(H=Ce)-ne*ze,ze=xe[1]+$*ze+ne*H;return[Ce=$*(H=Ce)-ne*ze,ze=$*ze+ne*H]}return ot.invert=function(B,G){var H=20,L=B,V=G;do{for(var $,ne=$e,ce=Xe[ne],xe=ce[0],Ce=ce[1],ze=0,Ue=0;--ne>=0;)ze=xe+L*($=ze)-V*Ue,Ue=Ce+L*Ue+V*$,xe=(ce=Xe[ne])[0]+L*($=xe)-V*Ce,Ce=ce[1]+L*Ce+V*$;var He,et,lt=(ze=xe+L*($=ze)-V*Ue)*ze+(Ue=Ce+L*Ue+V*$)*Ue;L-=He=((xe=L*($=xe)-V*Ce-B)*ze+(Ce=L*Ce+V*$-G)*Ue)/lt,V-=et=(Ce*ze-xe*Ue)/lt}while(k(He)+k(et)>u*u&&--H>0);if(H){var ft=C(L*L+V*V),xt=2*o(.5*ft),Mt=c(xt);return[T(L*Mt,ft*b(xt)),ft?E(V*Mt/ft):0]}},ot}_o.invert=function(Xe,$e){var ot=k(Xe),B=k($e),G=u,H=m;B<Vi?H*=B/Vi:G+=6*P(Vi/B);for(var L=0;L<25;L++){var V=c(H),$=C(b(H)),ne=c(H/2),ce=b(H/2),xe=c(G/6),Ce=b(G/6),ze=.5*G*(1+$)-ot,Ue=H/(ce*Ce)-B,He=$?-.25*G*V/$:0,et=.5*(1+$),lt=(1+.5*H*ne/ce)/(ce*Ce),ft=H/ce*(xe/6)/(Ce*Ce),xt=He*ft-lt*et,Mt=(ze*ft-Ue*et)/xt,_t=(Ue*He-ze*lt)/xt;if(H-=Mt,G-=_t,k(Mt)<u&&k(_t)<u)break}return[Xe<0?-G:G,$e<0?-H:H]},qa.invert=function(Xe,$e){var ot=l(Xe)*d,B=$e/2,G=50;do{var H=ot*ot,L=B*B,V=ot*B,$=ot*(.975534+L*(-.0143059*H-.119161+-.0547009*L))-Xe,ne=B*(1.00384+H*(.0802894+-.02855*L+199025e-9*H)+L*(.0998909+-.0491032*L))-$e,ce=.975534-L*(.119161+3*H*.0143059+.0547009*L),xe=-V*(.238322+.2188036*L+.0286118*H),Ce=V*(.1605788+7961e-7*H+-.0571*L),ze=1.00384+H*(.0802894+199025e-9*H)+L*(3*(.0998909-.02855*H)-.245516*L),Ue=xe*Ce-ze*ce,He=(ne*xe-$*ze)/Ue,et=($*Ce-ne*ce)/Ue;ot-=He,B-=et}while((k(He)>u||k(et)>u)&&--G>0);return G&&[ot,B]},so.invert=function(Xe,$e){var ot=Xe*Xe,B=$e*$e+1,G=ot+B,H=Xe?y*C((G-C(G*G-4*ot))/ot):1/C(B);return[E(Xe*H),l($e)*P(H)]},lo.invert=function(Xe,$e){return[Xe,2.5*o(p(.8*$e))-.625*d]};var ts=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Al=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Ml=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ns=[[.9245,0],[0,0],[.01943,0]],Sl=[[.721316,0],[0,0],[-.00881625,-.00617325]];function jl(){return is(ts,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Ul(){return is(Al,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function rs(){return is(Ml,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function co(){return is(ns,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function gs(){return is(Sl,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function is(Xe,$e){var ot=(0,A.c)($s(Xe)).rotate($e).clipAngle(90),B=(0,Ze.c)($e),G=ot.center;return delete ot.rotate,ot.center=function(H){return arguments.length?G(B(H)):B.invert(G())},ot}var Os=C(6),as=C(7);function Ga(Xe,$e){var ot=E(7*c($e)/(3*Os));return[Os*Xe*(2*b(2*ot/3)-1)/as,9*c(ot/3)/as]}function pl(){return(0,A.c)(Ga).scale(164.859)}function No(Xe,$e){for(var ot,B=(1+y)*c($e),G=$e,H=0;H<25&&(G-=ot=(c(G/2)+c(G)-B)/(.5*b(G/2)+b(G)),!(k(ot)<u));H++);return[Xe*(1+2*b(G)/b(G/2))/(3*v),2*C(3)*c(G/2)/C(2+v)]}function To(){return(0,A.c)(No).scale(188.209)}function ko(Xe,$e){for(var ot,B=C(6/(4+d)),G=(1+d/4)*c($e),H=$e/2,L=0;L<25&&(H-=ot=(H/2+c(H)-G)/(.5+b(H)),!(k(ot)<u));L++);return[B*(.5+b(H))*Xe/1.5,B*H]}function jo(){return(0,A.c)(ko).scale(166.518)}Ga.invert=function(Xe,$e){var ot=3*E($e*as/9);return[Xe*as/(Os*(2*b(2*ot/3)-1)),E(3*c(ot)*Os/7)]},No.invert=function(Xe,$e){var ot=$e*C(2+v)/(2*C(3)),B=2*E(ot);return[3*v*Xe/(1+2*b(B)/b(B/2)),E((ot+c(B))/(1+y))]},ko.invert=function(Xe,$e){var ot=C(6/(4+d)),B=$e/ot;return k(k(B)-m)<u&&(B=B<0?-m:m),[1.5*Xe/(ot*(.5+b(B))),E((B/2+c(B))/(1+d/4))]};var Gr=e(47984);function ms(Xe,$e){var ot=$e*$e,B=ot*ot,G=ot*B;return[Xe*(.84719-.13063*ot+G*G*(.05494*ot-.04515-.02326*B+.00331*G)),$e*(1.01183+B*B*(.01926*ot-.02625-.00396*B))]}function Vl(){return(0,A.c)(ms).scale(175.295)}function Qs(Xe,$e){return[Xe*(1+b($e))/2,2*($e-h($e/2))]}function vs(){return(0,A.c)(Qs).scale(152.63)}ms.invert=function(Xe,$e){var ot,B,G,H,L=$e,V=25;do L-=ot=(L*(1.01183+(G=(B=L*L)*B)*G*(.01926*B-.02625-.00396*G))-$e)/(1.01183+G*G*(.21186*B-.23625+-.05148*G));while(k(ot)>x&&--V>0);return[Xe/(.84719-.13063*(B=L*L)+(H=B*(G=B*B))*H*(.05494*B-.04515-.02326*G+.00331*H)),L]},Qs.invert=function(Xe,$e){for(var ot=$e/2,B=0,G=1/0;B<10&&k(G)>u;++B){var H=b($e/2);$e-=G=($e-h($e/2)-ot)/(1-.5/(H*H))}return[2*Xe/(1+b($e)),$e]};var El=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Hl(){return ci(ue(1/0),El).rotate([20,0]).scale(152.63)}function el(Xe,$e){var ot=c($e),B=b($e),G=l(Xe);if(Xe===0||k($e)===m)return[0,$e];if($e===0)return[Xe,0];if(k(Xe)===m)return[Xe*B,m*ot];var H=d/(2*Xe)-2*Xe/d,L=2*$e/d,V=(1-L*L)/(ot-L),$=H*H,ne=V*V,ce=1+$/ne,xe=1+ne/$,Ce=(H*ot/V-H/2)/ce,ze=(ne*ot/$+V/2)/xe,Ue=ze*ze-(ne*ot*ot/$+V*ot-1)/xe;return[m*(Ce+C(Ce*Ce+B*B/ce)*G),m*(ze+C(Ue<0?0:Ue)*l(-$e*H)*G)]}function ql(){return(0,A.c)(el).scale(127.267)}el.invert=function(Xe,$e){var ot=(Xe/=m)*Xe,B=ot+($e/=m)*$e,G=d*d;return[Xe?(B-1+C((1-B)*(1-B)+4*ot))/(2*Xe)*m:0,de(function(H){return B*(d*c(H)-2*H)*d+4*H*H*($e-c(H))+2*d*H-G*$e},0)]};var Uo=1.0148,os=.23185,Ao=-.14499,Wa=.02406,ys=Uo,Ll=5*os,Ds=7*Ao,tl=9*Wa,Ma=1.790857183;function nl(Xe,$e){var ot=$e*$e;return[Xe,$e*(Uo+ot*ot*(os+ot*(Ao+Wa*ot)))]}function Cl(){return(0,A.c)(nl).scale(139.319)}function xs(Xe,$e){if(k($e)<u)return[Xe,0];var ot=h($e),B=Xe*c($e);return[c(B)/ot,$e+(1-b(B))/ot]}function ss(){return(0,A.c)(xs).scale(103.74)}nl.invert=function(Xe,$e){$e>Ma?$e=Ma:$e<-1.790857183&&($e=-1.790857183);var ot,B=$e;do{var G=B*B;B-=ot=(B*(Uo+G*G*(os+G*(Ao+Wa*G)))-$e)/(ys+G*G*(Ll+G*(Ds+tl*G)))}while(k(ot)>u);return[Xe,B]},xs.invert=function(Xe,$e){if(k($e)<u)return[Xe,0];var ot,B=Xe*Xe+$e*$e,G=.5*$e,H=10;do{var L=h(G),V=1/b(G),$=B-2*$e*G+G*G;G-=ot=(L*$+2*(G-$e))/(2+$*V*V+2*(G-$e)*L)}while(k(ot)>u&&--H>0);return L=h(G),[(k($e)<k(G+1/L)?E(Xe*L):l($e)*l(Xe)*(P(k(Xe*L))+m))/c(G),G]};var bs=e(13696),ls=e(27284);function cs(Xe,$e){return[Xe[0]*$e[0]+Xe[1]*$e[3],Xe[0]*$e[1]+Xe[1]*$e[4],Xe[0]*$e[2]+Xe[1]*$e[5]+Xe[2],Xe[3]*$e[0]+Xe[4]*$e[3],Xe[3]*$e[1]+Xe[4]*$e[4],Xe[3]*$e[2]+Xe[4]*$e[5]+Xe[5]]}function zs(Xe,$e){return[Xe[0]-$e[0],Xe[1]-$e[1]]}function rl(Xe){return C(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function ri(Xe,$e,ot){function B(V,$){var ne,ce=$e(V,$),xe=ce.project([V*S,$*S]);return(ne=ce.transform)?[ne[0]*xe[0]+ne[1]*xe[1]+ne[2],-(ne[3]*xe[0]+ne[4]*xe[1]+ne[5])]:(xe[1]=-xe[1],xe)}function G(V,$){var ne=V.project.invert,ce=V.transform,xe=$;if(ce&&(ce=function(et){var lt=1/(et[0]*et[4]-et[1]*et[3]);return[lt*et[4],-lt*et[1],lt*(et[1]*et[5]-et[2]*et[4]),-lt*et[3],lt*et[0],lt*(et[2]*et[3]-et[0]*et[5])]}(ce),xe=[ce[0]*xe[0]+ce[1]*xe[1]+ce[2],ce[3]*xe[0]+ce[4]*xe[1]+ce[5]]),ne&&V===function(et){return $e(et[0]*w,et[1]*w)}(Ce=ne(xe)))return Ce;for(var Ce,ze=V.children,Ue=0,He=ze&&ze.length;Ue<He;++Ue)if(Ce=G(ze[Ue],$))return Ce}(function V($,ne){if($.edges=function(_t){for(var zt=_t.length,Et=[],Yt=_t[zt-1],Vt=0;Vt<zt;++Vt)Et.push([Yt,Yt=_t[Vt]]);return Et}($.face),ne.face){var ce=$.shared=function(_t,zt){for(var Et,Yt,Vt=_t.length,Nt=null,fn=0;fn<Vt;++fn){Et=_t[fn];for(var gn=zt.length;--gn>=0;)if(Yt=zt[gn],Et[0]===Yt[0]&&Et[1]===Yt[1]){if(Nt)return[Nt,Et];Nt=Et}}}($.face,ne.face),xe=(He=ce.map(ne.project),et=ce.map($.project),lt=zs(He[1],He[0]),ft=zs(et[1],et[0]),xt=function(_t,zt){return T(_t[0]*zt[1]-_t[1]*zt[0],_t[0]*zt[0]+_t[1]*zt[1])}(lt,ft),Mt=rl(lt)/rl(ft),cs([1,0,He[0][0],0,1,He[0][1]],cs([Mt,0,0,0,Mt,0],cs([b(xt),c(xt),0,-c(xt),b(xt),0],[1,0,-et[0][0],0,1,-et[0][1]]))));$.transform=ne.transform?cs(ne.transform,xe):xe;for(var Ce=ne.edges,ze=0,Ue=Ce.length;ze<Ue;++ze)ea(ce[0],Ce[ze][1])&&ea(ce[1],Ce[ze][0])&&(Ce[ze]=$),ea(ce[0],Ce[ze][0])&&ea(ce[1],Ce[ze][1])&&(Ce[ze]=$);for(ze=0,Ue=(Ce=$.edges).length;ze<Ue;++ze)ea(ce[0],Ce[ze][0])&&ea(ce[1],Ce[ze][1])&&(Ce[ze]=ne),ea(ce[0],Ce[ze][1])&&ea(ce[1],Ce[ze][0])&&(Ce[ze]=ne)}else $.transform=ne.transform;var He,et,lt,ft,xt,Mt;return $.children&&$.children.forEach(function(_t){V(_t,$)}),$})(Xe,{transform:null}),Ya(Xe)&&(B.invert=function(V,$){var ne=G(Xe,[V,-$]);return ne&&(ne[0]*=w,ne[1]*=w,ne)});var H=(0,A.c)(B),L=H.stream;return H.stream=function(V){var $=H.rotate(),ne=L(V),ce=(H.rotate([0,0]),L(V));return H.rotate($),ne.sphere=function(){ce.polygonStart(),ce.lineStart(),Vo(ce,Xe),ce.lineEnd(),ce.polygonEnd()},ne},H.angle(ot==null?-30:ot*S)}function Vo(Xe,$e,ot){var B,G,H=$e.edges,L=H.length,V={type:"MultiPoint",coordinates:$e.face},$=$e.face.filter(function(He){return k(He[1])!==90}),ne=(0,bs.c)({type:"MultiPoint",coordinates:$}),ce=!1,xe=-1,Ce=ne[1][0]-ne[0][0],ze=Ce===180||Ce===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,Ve.c)(V);if(ot)for(;++xe<L&&H[xe]!==ot;);++xe;for(var Ue=0;Ue<L;++Ue)G=H[(Ue+xe)%L],Array.isArray(G)?(ce||(Xe.point((B=(0,ls.c)(G[0],ze)(u))[0],B[1]),ce=!0),Xe.point((B=(0,ls.c)(G[1],ze)(u))[0],B[1])):(ce=!1,G!==ot&&Vo(Xe,G,$e))}function ea(Xe,$e){return Xe&&$e&&Xe[0]===$e[0]&&Xe[1]===$e[1]}function Ya(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Ya)}var Kr=e(53285),ti=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Sa=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function($e){return ti[$e]})});function _s(Xe){Xe=Xe||function(ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:ot});return(0,Kr.c)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var $e=Sa.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,B){var G=$e[ot];G&&(G.children||(G.children=[])).push($e[B])}),ri($e[0],function(ot,B){return $e[ot<-d/2?B<0?6:4:ot<0?B<0?2:0:ot<d/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Rs=2/C(3);function il(Xe,$e){var ot=wt(Xe,$e);return[ot[0]*Rs,ot[1]]}function Fs(Xe){Xe=Xe||function(ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:ot});return(0,A.c)(il).translate([0,0]).scale(1).rotate(B[1]>0?[-B[0],0]:[180-B[0],180])};var $e=Sa.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,B){var G=$e[ot];G&&(G.children||(G.children=[])).push($e[B])}),ri($e[0],function(ot,B){return $e[ot<-d/2?B<0?6:4:ot<0?B<0?2:0:ot<d/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Bs(Xe){Xe=Xe||function(H){var L=H.length===6?(0,Ve.c)({type:"MultiPoint",coordinates:H}):H[0];return(0,Kr.c)().scale(1).translate([0,0]).rotate([-L[0],-L[1]])};var $e=Sa.map(function(H){for(var L,V=H.map(qo),$=V.length,ne=V[$-1],ce=[],xe=0;xe<$;++xe)L=V[xe],ce.push(Ho([.9486832980505138*ne[0]+.31622776601683794*L[0],.9486832980505138*ne[1]+.31622776601683794*L[1],.9486832980505138*ne[2]+.31622776601683794*L[2]]),Ho([.9486832980505138*L[0]+.31622776601683794*ne[0],.9486832980505138*L[1]+.31622776601683794*ne[1],.9486832980505138*L[2]+.31622776601683794*ne[2]])),ne=L;return ce}),ot=[],B=[-1,0,0,1,0,1,4,5];$e.forEach(function(H,L){for(var V,$,ne=Sa[L],ce=ne.length,xe=ot[L]=[],Ce=0;Ce<ce;++Ce)$e.push([ne[Ce],H[(2*Ce+2)%(2*ce)],H[(2*Ce+1)%(2*ce)]]),B.push(L),xe.push((V=qo(H[(2*Ce+2)%(2*ce)]),$=qo(H[(2*Ce+1)%(2*ce)]),[V[1]*$[2]-V[2]*$[1],V[2]*$[0]-V[0]*$[2],V[0]*$[1]-V[1]*$[0]]))});var G=$e.map(function(H){return{project:Xe(H),face:H}});return B.forEach(function(H,L){var V=G[H];V&&(V.children||(V.children=[])).push(G[L])}),ri(G[0],function(H,L){var V=b(L),$=[V*b(H),V*c(H),c(L)],ne=H<-d/2?L<0?6:4:H<0?L<0?2:0:H<d/2?L<0?3:1:L<0?7:5,ce=ot[ne];return G[Da(ce[0],$)<0?8+3*ne:Da(ce[1],$)<0?8+3*ne+1:Da(ce[2],$)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function Da(Xe,$e){for(var ot=0,B=Xe.length,G=0;ot<B;++ot)G+=Xe[ot]*$e[ot];return G}function Ho(Xe){return[T(Xe[1],Xe[0])*S,E(i(-1,n(1,Xe[2])))*S]}function qo(Xe){var $e=Xe[0]*w,ot=Xe[1]*w,B=b(ot);return[B*b($e),B*c($e),c(ot)]}function oa(){}function Ns(Xe,$e){var ot,B=$e.stream;if(!B)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":ot=Hi;break;case"FeatureCollection":ot=za;break;default:ot=Zi}return ot(Xe,B)}function za(Xe,$e){return{type:"FeatureCollection",features:Xe.features.map(function(ot){return Hi(ot,$e)})}}function Hi(Xe,$e){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:Zi(Xe.geometry,$e)}}function Zi(Xe,$e){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(B,G){return{type:"GeometryCollection",geometries:B.geometries.map(function(H){return Zi(H,G)})}}(Xe,$e);var ot;switch(Xe.type){case"Point":case"MultiPoint":ot=uo;break;case"LineString":case"MultiLineString":ot=us;break;case"Polygon":case"MultiPolygon":case"Sphere":ot=Za;break;default:return null}return(0,rn.c)(Xe,$e(ot)),ot.result()}il.invert=function(Xe,$e){return wt.invert(Xe/Rs,$e)};var ui=[],Xi=[],uo={point:function(Xe,$e){ui.push([Xe,$e])},result:function(){var Xe=ui.length?ui.length<2?{type:"Point",coordinates:ui[0]}:{type:"MultiPoint",coordinates:ui}:null;return ui=[],Xe}},us={lineStart:oa,point:function(Xe,$e){ui.push([Xe,$e])},lineEnd:function(){ui.length&&(Xi.push(ui),ui=[])},result:function(){var Xe=Xi.length?Xi.length<2?{type:"LineString",coordinates:Xi[0]}:{type:"MultiLineString",coordinates:Xi}:null;return Xi=[],Xe}},Za={polygonStart:oa,lineStart:oa,point:function(Xe,$e){ui.push([Xe,$e])},lineEnd:function(){var Xe=ui.length;if(Xe){do ui.push(ui[0].slice());while(++Xe<4);Xi.push(ui),ui=[]}},polygonEnd:oa,result:function(){if(!Xi.length)return null;var Xe=[],$e=[];return Xi.forEach(function(ot){(function(B){if((G=B.length)<4)return!1;for(var G,H=0,L=B[G-1][1]*B[0][0]-B[G-1][0]*B[0][1];++H<G;)L+=B[H-1][1]*B[H][0]-B[H-1][0]*B[H][1];return L<=0})(ot)?Xe.push([ot]):$e.push(ot)}),$e.forEach(function(ot){var B=ot[0];Xe.some(function(G){if(function(H,L){for(var V=L[0],$=L[1],ne=!1,ce=0,xe=H.length,Ce=xe-1;ce<xe;Ce=ce++){var ze=H[ce],Ue=ze[0],He=ze[1],et=H[Ce],lt=et[0],ft=et[1];He>$^ft>$&&V<(lt-Ue)*($-He)/(ft-He)+Ue&&(ne=!ne)}return ne}(G[0],B))return G.push(ot),!0})||Xe.push([ot])}),Xi=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function Go(Xe){var $e=Xe(m,0)[0]-Xe(-m,0)[0];function ot(B,G){var H=k(B)<m,L=Xe(H?B:B>0?B-d:B+d,G),V=(L[0]-L[1])*y,$=(L[0]+L[1])*y;if(H)return[V,$];var ne=$e*y,ce=V>0^$>0?-1:1;return[ce*V-l($)*ne,ce*$-l(V)*ne]}return Xe.invert&&(ot.invert=function(B,G){var H=(B+G)*y,L=(G-B)*y,V=k(H)<.5*$e&&k(L)<.5*$e;if(!V){var $=$e*y,ne=H>0^L>0?-1:1,ce=-ne*B+(L>0?1:-1)*$,xe=-ne*G+(H>0?1:-1)*$;H=(-ce-xe)*y,L=(ce-xe)*y}var Ce=Xe.invert(H,L);return V||(Ce[0]+=H>0?d:-d),Ce}),(0,A.c)(ot).rotate([-90,-90,45]).clipAngle(179.999)}function ha(){return Go(Bn).scale(176.423)}function fs(){return Go(dn).scale(111.48)}function Mo(Xe,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function ot(ne){var ce=ne.length,xe=2,Ce=new Array(ce);for(Ce[0]=+ne[0].toFixed($e),Ce[1]=+ne[1].toFixed($e);xe<ce;)Ce[xe]=ne[xe],++xe;return Ce}function B(ne){return ne.map(ot)}function G(ne){for(var ce=ot(ne[0]),xe=[ce],Ce=1;Ce<ne.length;Ce++){var ze=ot(ne[Ce]);(ze.length>2||ze[0]!=ce[0]||ze[1]!=ce[1])&&(xe.push(ze),ce=ze)}return xe.length===1&&ne.length>1&&xe.push(ot(ne[ne.length-1])),xe}function H(ne){return ne.map(G)}function L(ne){if(ne==null)return ne;var ce;switch(ne.type){case"GeometryCollection":ce={type:"GeometryCollection",geometries:ne.geometries.map(L)};break;case"Point":ce={type:"Point",coordinates:ot(ne.coordinates)};break;case"MultiPoint":ce={type:ne.type,coordinates:B(ne.coordinates)};break;case"LineString":ce={type:ne.type,coordinates:G(ne.coordinates)};break;case"MultiLineString":case"Polygon":ce={type:ne.type,coordinates:H(ne.coordinates)};break;case"MultiPolygon":ce={type:"MultiPolygon",coordinates:ne.coordinates.map(H)};break;default:return ne}return ne.bbox!=null&&(ce.bbox=ne.bbox),ce}function V(ne){var ce={type:"Feature",properties:ne.properties,geometry:L(ne.geometry)};return ne.id!=null&&(ce.id=ne.id),ne.bbox!=null&&(ce.bbox=ne.bbox),ce}if(Xe!=null)switch(Xe.type){case"Feature":return V(Xe);case"FeatureCollection":var $={type:"FeatureCollection",features:Xe.features.map(V)};return Xe.bbox!=null&&($.bbox=Xe.bbox),$;default:return L(Xe)}return Xe}function Ra(Xe){var $e=c(Xe);function ot(B,G){var H=$e?h(B*$e/2)/$e:B/2;if(!G)return[2*H,-Xe];var L=2*o(H*c(G)),V=1/h(G);return[c(L)*V,G+(1-b(L))*V-Xe]}return ot.invert=function(B,G){if(k(G+=Xe)<u)return[$e?2*o($e*B/2)/$e:B,0];var H,L=B*B+G*G,V=0,$=10;do{var ne=h(V),ce=1/b(V),xe=L-2*G*V+V*V;V-=H=(ne*xe+2*(V-G))/(2+xe*ce*ce+2*(V-G)*ne)}while(k(H)>u&&--$>0);var Ce=B*(ne=h(V)),ze=h(k(G)<k(V+1/ne)?.5*E(Ce):.5*P(Ce)+d/4)/c(V);return[$e?2*o($e*ze)/$e:2*ze,V]},ot}function Fa(){return Me(Ra).scale(131.215)}var pi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Xa(Xe,$e){var ot,B=n(18,36*k($e)/d),G=s(B),H=B-G,L=(ot=pi[G])[0],V=ot[1],$=(ot=pi[++G])[0],ne=ot[1],ce=(ot=pi[n(19,++G)])[0],xe=ot[1];return[Xe*($+H*(ce-L)/2+H*H*(ce-2*$+L)/2),($e>0?m:-m)*(ne+H*(xe-V)/2+H*H*(xe-2*ne+V)/2)]}function kr(){return(0,A.c)(Xa).scale(152.63)}function js(Xe,$e){var ot=function(L){function V($,ne){var ce=b(ne),xe=(L-1)/(L-ce*b($));return[xe*ce*c($),xe*c(ne)]}return V.invert=function($,ne){var ce=$*$+ne*ne,xe=C(ce),Ce=(L-C(1-ce*(L+1)/(L-1)))/((L-1)/xe+xe/(L-1));return[T($*Ce,xe*C(1-Ce*Ce)),xe?E(ne*Ce/xe):0]},V}(Xe);if(!$e)return ot;var B=b($e),G=c($e);function H(L,V){var $=ot(L,V),ne=$[1],ce=ne*G/(Xe-1)+B;return[$[0]*B/ce,ne/ce]}return H.invert=function(L,V){var $=(Xe-1)/(Xe-1-V*G);return ot.invert($*L,$*V*B)},H}function dl(){var Xe=2,$e=0,ot=(0,A.U)(js),B=ot(Xe,$e);return B.distance=function(G){return arguments.length?ot(Xe=+G,$e):Xe},B.tilt=function(G){return arguments.length?ot(Xe,$e=G*w):$e*S},B.scale(432.147).clipAngle(P(1/Xe)*S-1e-6)}pi.forEach(function(Xe){Xe[1]*=1.0144}),Xa.invert=function(Xe,$e){var ot=$e/m,B=90*ot,G=n(18,k(B/5)),H=i(0,s(G));do{var L=pi[H][1],V=pi[H+1][1],$=pi[n(19,H+2)][1],ne=$-L,ce=$-2*V+L,xe=2*(k(ot)-V)/ne,Ce=ce/ne,ze=xe*(1-Ce*xe*(1-2*Ce*xe));if(ze>=0||H===1){B=($e>=0?5:-5)*(ze+G);var Ue,He=50;do ze=(G=n(18,k(B)/5))-(H=s(G)),L=pi[H][1],V=pi[H+1][1],$=pi[n(19,H+2)][1],B-=(Ue=($e>=0?m:-m)*(V+ze*($-L)/2+ze*ze*($-2*V+L)/2)-$e)*S;while(k(Ue)>x&&--He>0);break}}while(--H>=0);var et=pi[H][0],lt=pi[H+1][0],ft=pi[n(19,H+2)][0];return[Xe/(lt+ze*(ft-et)/2+ze*ze*(ft-2*lt+et)/2),B*w]};var Wo=1e-4,Yo=1e4,hs=-180,ws=hs+Wo,yr=180,Us=yr-Wo,So=-90,qi=So+Wo,Zo=90,Ka=Zo-Wo;function Ba(Xe){return Xe.length>0}function sa(Xe){return Xe===So||Xe===Zo?[0,Xe]:[hs,($e=Xe,Math.floor($e*Yo)/Yo)];var $e}function fo(Xe){var $e=Xe[0],ot=Xe[1],B=!1;return $e<=ws?($e=hs,B=!0):$e>=Us&&($e=yr,B=!0),ot<=qi?(ot=So,B=!0):ot>=Ka&&(ot=Zo,B=!0),B?[$e,ot]:Xe}function Na(Xe){return Xe.map(fo)}function Eo(Xe,$e,ot){for(var B=0,G=Xe.length;B<G;++B){var H=Xe[B].slice();ot.push({index:-1,polygon:$e,ring:H});for(var L=0,V=H.length;L<V;++L){var $=H[L],ne=$[0],ce=$[1];if(ne<=ws||ne>=Us||ce<=qi||ce>=Ka){H[L]=fo($);for(var xe=L+1;xe<V;++xe){var Ce=H[xe],ze=Ce[0],Ue=Ce[1];if(ze>ws&&ze<Us&&Ue>qi&&Ue<Ka)break}if(xe===L+1)continue;if(L){var He={index:-1,polygon:$e,ring:H.slice(0,L+1)};He.ring[He.ring.length-1]=sa(ce),ot[ot.length-1]=He}else ot.pop();if(xe>=V)break;ot.push({index:-1,polygon:$e,ring:H=H.slice(xe-1)}),H[0]=sa(H[0][1]),L=-1,V=H.length}}}}function Vs(Xe){var $e,ot,B,G,H,L,V=Xe.length,$={},ne={};for($e=0;$e<V;++$e)B=(ot=Xe[$e]).ring[0],H=ot.ring[ot.ring.length-1],B[0]!==H[0]||B[1]!==H[1]?(ot.index=$e,$[B]=ne[H]=ot):(ot.polygon.push(ot.ring),Xe[$e]=null);for($e=0;$e<V;++$e)if(ot=Xe[$e]){if(B=ot.ring[0],H=ot.ring[ot.ring.length-1],G=ne[B],L=$[H],delete $[B],delete ne[H],B[0]===H[0]&&B[1]===H[1]){ot.polygon.push(ot.ring);continue}G?(delete ne[B],delete $[G.ring[0]],G.ring.pop(),Xe[G.index]=null,ot={index:-1,polygon:G.polygon,ring:G.ring.concat(ot.ring)},G===L?ot.polygon.push(ot.ring):(ot.index=V++,Xe.push($[ot.ring[0]]=ne[ot.ring[ot.ring.length-1]]=ot))):L?(delete $[H],delete ne[L.ring[L.ring.length-1]],ot.ring.pop(),ot={index:V++,polygon:L.polygon,ring:ot.ring.concat(L.ring)},Xe[L.index]=null,Xe.push($[ot.ring[0]]=ne[ot.ring[ot.ring.length-1]]=ot)):(ot.ring.push(ot.ring[0]),ot.polygon.push(ot.ring))}}function Xo(Xe){var $e={type:"Feature",geometry:Zr(Xe.geometry)};return Xe.id!=null&&($e.id=Xe.id),Xe.bbox!=null&&($e.bbox=Xe.bbox),Xe.properties!=null&&($e.properties=Xe.properties),$e}function Zr(Xe){if(Xe==null)return Xe;var $e,ot,B,G;switch(Xe.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:Xe.geometries.map(Zr)};break;case"Point":$e={type:"Point",coordinates:fo(Xe.coordinates)};break;case"MultiPoint":case"LineString":$e={type:Xe.type,coordinates:Na(Xe.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:Xe.coordinates.map(Na)};break;case"Polygon":var H=[];Eo(Xe.coordinates,H,ot=[]),Vs(ot),$e={type:"Polygon",coordinates:H};break;case"MultiPolygon":ot=[],B=-1,G=Xe.coordinates.length;for(var L=new Array(G);++B<G;)Eo(Xe.coordinates[B],L[B]=[],ot);Vs(ot),$e={type:"MultiPolygon",coordinates:L.filter(Ba)};break;default:return Xe}return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e}function Ki(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return Xo(Xe);case"FeatureCollection":var $e={type:"FeatureCollection",features:Xe.features.map(Xo)};return Xe.bbox!=null&&($e.bbox=Xe.bbox),$e;default:return Zr(Xe)}}function pa(Xe,$e){var ot=h($e/2),B=c(g*ot);return[Xe*(.74482-.34588*B*B),1.70711*ot]}function ho(){return(0,A.c)(pa).scale(146.153)}function da(Xe,$e,ot){var B=(0,ls.c)($e,ot),G=B(.5),H=(0,Ze.c)([-G[0],-G[1]])($e),L=B.distance/2,V=-E(c(H[1]*w)/c(L)),$=[-G[0],-G[1],-(H[0]>0?d-V:V)*S],ne=(0,A.c)(Xe(L)).rotate($),ce=(0,Ze.c)($),xe=ne.center;return delete ne.rotate,ne.center=function(Ce){return arguments.length?xe(ce(Ce)):ce.invert(xe())},ne.clipAngle(90)}function Ts(Xe){var $e=b(Xe);function ot(B,G){var H=(0,Kr.Y)(B,G);return H[0]*=$e,H}return ot.invert=function(B,G){return Kr.Y.invert(B/$e,G)},ot}function ks(){return ga([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function ga(Xe,$e){return da(Ts,Xe,$e)}function Wr(Xe){if(!(Xe*=2))return Y.O;var $e=-Xe/2,ot=-$e,B=Xe*Xe,G=h(ot),H=.5/c(ot);function L(V,$){var ne=P(b($)*b(V-$e)),ce=P(b($)*b(V-ot));return[((ne*=ne)-(ce*=ce))/(2*Xe),($<0?-1:1)*C(4*B*ce-(B-ne+ce)*(B-ne+ce))/(2*Xe)]}return L.invert=function(V,$){var ne,ce,xe=$*$,Ce=b(C(xe+(ne=V+$e)*ne)),ze=b(C(xe+(ne=V+ot)*ne));return[T(ce=Ce-ze,ne=(Ce+ze)*G),($<0?-1:1)*P(C(ne*ne+ce*ce)*H)]},L}function po(){return ps([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ps(Xe,$e){return da(Wr,Xe,$e)}function Ja(Xe,$e){if(k($e)<u)return[Xe,0];var ot=k($e/m),B=E(ot);if(k(Xe)<u||k(k($e)-m)<u)return[0,l($e)*d*h(B/2)];var G=b(B),H=k(d/Xe-Xe/d)/2,L=H*H,V=G/(ot+G-1),$=V*(2/ot-1),ne=$*$,ce=ne+L,xe=V-ne,Ce=L+V;return[l(Xe)*d*(H*xe+C(L*xe*xe-ce*(V*V-ne)))/ce,l($e)*d*($*Ce-H*C((L+1)*ce-Ce*Ce))/ce]}function As(){return(0,A.c)(Ja).scale(79.4183)}function Ms(Xe,$e){if(k($e)<u)return[Xe,0];var ot=k($e/m),B=E(ot);if(k(Xe)<u||k(k($e)-m)<u)return[0,l($e)*d*h(B/2)];var G=b(B),H=k(d/Xe-Xe/d)/2,L=H*H,V=G*(C(1+L)-H*G)/(1+L*ot*ot);return[l(Xe)*d*V,l($e)*d*C(1-V*(2*H+V))]}function $a(){return(0,A.c)(Ms).scale(79.4183)}function di(Xe,$e){if(k($e)<u)return[Xe,0];var ot=$e/m,B=E(ot);if(k(Xe)<u||k(k($e)-m)<u)return[0,d*h(B/2)];var G=(d/Xe-Xe/d)/2,H=ot/(1+b(B));return[d*(l(Xe)*C(G*G+1-H*H)-G),d*H]}function ds(){return(0,A.c)(di).scale(79.4183)}function Sr(Xe,$e){if(!$e)return[Xe,0];var ot=k($e);if(!Xe||ot===m)return[0,$e];var B=ot/m,G=B*B,H=(8*B-G*(G+2)-5)/(2*G*(B-1)),L=H*H,V=B*H,$=G+L+2*V,ne=B+3*H,ce=Xe/m,xe=ce+1/ce,Ce=l(k(Xe)-m)*C(xe*xe-4),ze=Ce*Ce,Ue=(Ce*($+L-1)+2*C($*(G+L*ze-1)+(1-G)*(G*(ne*ne+4*L)+12*V*L+4*L*L)))/(4*$+ze);return[l(Xe)*m*Ue,l($e)*m*C(1+Ce*k(Ue)-Ue*Ue)]}function Or(){return(0,A.c)(Sr).scale(127.16)}function Ea(Xe,$e,ot,B){var G=d/3;Xe=i(Xe,u),$e=i($e,u),Xe=n(Xe,m),$e=n($e,d-u),ot=i(ot,0),ot=n(ot,100-u);var H=(B=i(B,u))/100,L=P((ot/100+1)*b(G))/G,V=c(Xe)/c(L*m),$=$e/d,ne=C(H*c(Xe/2)/c($e/2));return function(ce,xe,Ce,ze,Ue){function He(et,lt){var ft=Ce*c(ze*lt),xt=C(1-ft*ft),Mt=C(2/(1+xt*b(et*=Ue)));return[ce*xt*Mt*c(et),xe*ft*Mt]}return He.invert=function(et,lt){var ft=et/ce,xt=lt/xe,Mt=C(ft*ft+xt*xt),_t=2*E(Mt/2);return[T(et*h(_t),ce*Mt)/Ue,Mt&&E(lt*c(_t)/(xe*Ce*Mt))/ze]},He}(ne/C($*V*L),1/(ne*C($*V*L)),V,L,$)}function go(){var Xe=65*w,$e=60*w,ot=20,B=200,G=(0,A.U)(Ea),H=G(Xe,$e,ot,B);return H.poleline=function(L){return arguments.length?G(Xe=+L*w,$e,ot,B):Xe*S},H.parallels=function(L){return arguments.length?G(Xe,$e=+L*w,ot,B):$e*S},H.inflation=function(L){return arguments.length?G(Xe,$e,ot=+L,B):ot},H.ratio=function(L){return arguments.length?G(Xe,$e,ot,B=+L):B},H.scale(163.775)}function Lo(){return go().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}pa.invert=function(Xe,$e){var ot=$e/1.70711,B=c(g*ot);return[Xe/(.74482-.34588*B*B),2*o(ot)]},Ja.invert=function(Xe,$e){if(k($e)<u)return[Xe,0];if(k(Xe)<u)return[0,m*c(2*o($e/d))];var ot=(Xe/=d)*Xe,B=($e/=d)*$e,G=ot+B,H=G*G,L=-k($e)*(1+G),V=L-2*B+ot,$=-2*L+1+2*B+H,ne=B/$+(2*V*V*V/($*$*$)-9*L*V/($*$))/27,ce=(L-V*V/(3*$))/$,xe=2*C(-ce/3),Ce=P(3*ne/(ce*xe))/3;return[d*(G-1+C(1+2*(ot-B)+H))/(2*Xe),l($e)*d*(-xe*b(Ce+d/3)-V/(3*$))]},Ms.invert=function(Xe,$e){if(!Xe)return[0,m*c(2*o($e/d))];var ot=k(Xe/d),B=(1-ot*ot-($e/=d)*$e)/(2*ot),G=C(B*B+1);return[l(Xe)*d*(G-B),l($e)*m*c(2*T(C((1-2*B*ot)*(B+G)-ot),C(G+B+ot)))]},di.invert=function(Xe,$e){if(!$e)return[Xe,0];var ot=$e/d,B=(d*d*(1-ot*ot)-Xe*Xe)/(2*d*Xe);return[Xe?d*(l(Xe)*C(B*B+1)-B):0,m*c(2*o(ot))]},Sr.invert=function(Xe,$e){var ot;if(!Xe||!$e)return[Xe,$e];$e/=d;var B=l(Xe)*Xe/m,G=(B*B-1+4*$e*$e)/k(B),H=G*G,L=2*$e,V=50;do{var $=L*L,ne=(8*L-$*($+2)-5)/(2*$*(L-1)),ce=(3*L-$*L-10)/(2*$*L),xe=ne*ne,Ce=L*ne,ze=L+ne,Ue=ze*ze,He=L+3*ne,et=-2*ze*(4*Ce*xe+(1-4*$+3*$*$)*(1+ce)+xe*(14*$-6-H+(8*$-8-2*H)*ce)+Ce*(12*$-8+(10*$-10-H)*ce)),lt=C(Ue*($+xe*H-1)+(1-$)*($*(He*He+4*xe)+xe*(12*Ce+4*xe)));L-=ot=(G*(Ue+xe-1)+2*lt-B*(4*Ue+H))/(G*(2*ne*ce+2*ze*(1+ce))+et/lt-8*ze*(G*(-1+xe+Ue)+2*lt)*(1+ce)/(H+4*Ue))}while(ot>u&&--V>0);return[l(Xe)*(C(G*G+4)+G)*d/4,m*L]};var Oi=4*d+3*C(3),mo=2*C(2*d*C(3)/Oi),ii=me(mo*C(3)/d,mo,Oi/6);function Pl(){return(0,A.c)(ii).scale(176.84)}function La(Xe,$e){return[Xe*C(1-3*$e*$e/(d*d)),$e]}function si(){return(0,A.c)(La).scale(152.63)}function yi(Xe,$e){var ot=b($e),B=b(Xe)*ot,G=1-B,H=b(Xe=T(c(Xe)*ot,-c($e))),L=c(Xe);return[L*(ot=C(1-B*B))-H*G,-H*ot-L*G]}function _a(){return(0,A.c)(yi).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Ko(Xe,$e){var ot=N(Xe,$e);return[(ot[0]+Xe/m)/2,(ot[1]+$e)/2]}function ml(){return(0,A.c)(Ko).scale(158.837)}La.invert=function(Xe,$e){return[Xe/C(1-3*$e*$e/(d*d)),$e]},yi.invert=function(Xe,$e){var ot=(Xe*Xe+$e*$e)/-2,B=C(-ot*(2+ot)),G=$e*ot+Xe*B,H=Xe*ot-$e*B,L=C(H*H+G*G);return[T(B*G,L*(1+ot)),L?-E(B*H/L):0]},Ko.invert=function(Xe,$e){var ot=Xe,B=$e,G=25;do{var H,L=b(B),V=c(B),$=c(2*B),ne=V*V,ce=L*L,xe=c(ot),Ce=b(ot/2),ze=c(ot/2),Ue=ze*ze,He=1-ce*Ce*Ce,et=He?P(L*Ce)*C(H=1/He):H=0,lt=.5*(2*et*L*ze+ot/m)-Xe,ft=.5*(et*V+B)-$e,xt=.5*H*(ce*Ue+et*L*Ce*ne)+.5/m,Mt=H*(xe*$/4-et*V*ze),_t=.125*H*($*ze-et*V*ce*xe),zt=.5*H*(ne*Ce+et*Ue*L)+.5,Et=Mt*_t-zt*xt,Yt=(ft*Mt-lt*zt)/Et,Vt=(lt*_t-ft*xt)/Et;ot-=Yt,B-=Vt}while((k(Yt)>u||k(Vt)>u)&&--G>0);return[ot,B]}},88728:function(X,I,e){"use strict";function A(){return new k}function k(){this.reset()}e.d(I,{c:function(){return A}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(o,b,this.t),T(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new k;function T(b,p,s){var t=b.s=p+s,i=t-p,n=t-i;b.t=p-n+(s-i)}},95384:function(X,I,e){"use strict";e.d(I,{cp:function(){return x},mQ:function(){return n},oB:function(){return a}});var A,k,o,T,b,p=e(88728),s=e(64528),t=e(70932),i=e(16016),n=(0,p.c)(),r=(0,p.c)(),a={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){n.reset(),a.lineStart=l,a.lineEnd=c},polygonEnd:function(){var d=+n;r.add(d<0?s.kD+d:d),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){r.add(s.kD)}};function l(){a.point=h}function c(){u(A,k)}function h(d,m){a.point=u,A=d,k=m,d*=s.qw,m*=s.qw,o=d,T=(0,s.W8)(m=m/2+s.wL),b=(0,s.g$)(m)}function u(d,m){d*=s.qw,m=(m*=s.qw)/2+s.wL;var g=d-o,y=g>=0?1:-1,v=y*g,_=(0,s.W8)(m),f=(0,s.g$)(m),S=b*f,w=T*_+S*(0,s.W8)(v),E=S*y*(0,s.g$)(v);n.add((0,s.WE)(E,w)),o=d,T=_,b=f}function x(d){return r.reset(),(0,i.c)(d,a),2*r}},13696:function(X,I,e){"use strict";e.d(I,{c:function(){return P}});var A,k,o,T,b,p,s,t,i,n,r=e(88728),a=e(95384),l=e(84220),c=e(64528),h=e(16016),u=(0,r.c)(),x={point:d,lineStart:g,lineEnd:y,polygonStart:function(){x.point=v,x.lineStart=_,x.lineEnd=f,u.reset(),a.oB.polygonStart()},polygonEnd:function(){a.oB.polygonEnd(),x.point=d,x.lineStart=g,x.lineEnd=y,a.mQ<0?(A=-(o=180),k=-(T=90)):u>c.Gg?T=90:u<-c.Gg&&(k=-90),n[0]=A,n[1]=o},sphere:function(){A=-(o=180),k=-(T=90)}};function d(C,O){i.push(n=[A=C,o=C]),O<k&&(k=O),O>T&&(T=O)}function m(C,O){var R=(0,l.ux)([C*c.qw,O*c.qw]);if(t){var U=(0,l.CW)(t,R),D=[U[1],-U[0],0],N=(0,l.CW)(D,U);(0,l.cJ)(N),N=(0,l.G)(N);var W,F=C-b,j=F>0?1:-1,q=N[0]*c.oh*j,te=(0,c.a2)(F)>180;te^(j*b<q&&q<j*C)?(W=N[1]*c.oh)>T&&(T=W):te^(j*b<(q=(q+360)%360-180)&&q<j*C)?(W=-N[1]*c.oh)<k&&(k=W):(O<k&&(k=O),O>T&&(T=O)),te?C<b?S(A,C)>S(A,o)&&(o=C):S(C,o)>S(A,o)&&(A=C):o>=A?(C<A&&(A=C),C>o&&(o=C)):C>b?S(A,C)>S(A,o)&&(o=C):S(C,o)>S(A,o)&&(A=C)}else i.push(n=[A=C,o=C]);O<k&&(k=O),O>T&&(T=O),t=R,b=C}function g(){x.point=m}function y(){n[0]=A,n[1]=o,x.point=d,t=null}function v(C,O){if(t){var R=C-b;u.add((0,c.a2)(R)>180?R+(R>0?360:-360):R)}else p=C,s=O;a.oB.point(C,O),m(C,O)}function _(){a.oB.lineStart()}function f(){v(p,s),a.oB.lineEnd(),(0,c.a2)(u)>c.Gg&&(A=-(o=180)),n[0]=A,n[1]=o,t=null}function S(C,O){return(O-=C)<0?O+360:O}function w(C,O){return C[0]-O[0]}function E(C,O){return C[0]<=C[1]?C[0]<=O&&O<=C[1]:O<C[0]||C[1]<O}function P(C){var O,R,U,D,N,W,F;if(T=o=-(A=k=1/0),i=[],(0,h.c)(C,x),R=i.length){for(i.sort(w),O=1,N=[U=i[0]];O<R;++O)E(U,(D=i[O])[0])||E(U,D[1])?(S(U[0],D[1])>S(U[0],U[1])&&(U[1]=D[1]),S(D[0],U[1])>S(U[0],U[1])&&(U[0]=D[0])):N.push(U=D);for(W=-1/0,O=0,U=N[R=N.length-1];O<=R;U=D,++O)D=N[O],(F=S(U[1],D[0]))>W&&(W=F,A=D[0],o=U[1])}return i=n=null,A===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[A,k],[o,T]]}},84220:function(X,I,e){"use strict";e.d(I,{CW:function(){return b},Ez:function(){return T},G:function(){return k},cJ:function(){return t},mg:function(){return p},ux:function(){return o},wx:function(){return s}});var A=e(64528);function k(i){return[(0,A.WE)(i[1],i[0]),(0,A.qR)(i[2])]}function o(i){var n=i[0],r=i[1],a=(0,A.W8)(r);return[a*(0,A.W8)(n),a*(0,A.g$)(n),(0,A.g$)(r)]}function T(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function b(i,n){return[i[1]*n[2]-i[2]*n[1],i[2]*n[0]-i[0]*n[2],i[0]*n[1]-i[1]*n[0]]}function p(i,n){i[0]+=n[0],i[1]+=n[1],i[2]+=n[2]}function s(i,n){return[i[0]*n,i[1]*n,i[2]*n]}function t(i){var n=(0,A._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=n,i[1]/=n,i[2]/=n}},24052:function(X,I,e){"use strict";e.d(I,{c:function(){return R}});var A,k,o,T,b,p,s,t,i,n,r,a,l,c,h,u,x=e(64528),d=e(70932),m=e(16016),g={sphere:d.c,point:y,lineStart:_,lineEnd:w,polygonStart:function(){g.lineStart=E,g.lineEnd=P},polygonEnd:function(){g.lineStart=_,g.lineEnd=w}};function y(U,D){U*=x.qw,D*=x.qw;var N=(0,x.W8)(D);v(N*(0,x.W8)(U),N*(0,x.g$)(U),(0,x.g$)(D))}function v(U,D,N){++A,o+=(U-o)/A,T+=(D-T)/A,b+=(N-b)/A}function _(){g.point=f}function f(U,D){U*=x.qw,D*=x.qw;var N=(0,x.W8)(D);c=N*(0,x.W8)(U),h=N*(0,x.g$)(U),u=(0,x.g$)(D),g.point=S,v(c,h,u)}function S(U,D){U*=x.qw,D*=x.qw;var N=(0,x.W8)(D),W=N*(0,x.W8)(U),F=N*(0,x.g$)(U),j=(0,x.g$)(D),q=(0,x.WE)((0,x._I)((q=h*j-u*F)*q+(q=u*W-c*j)*q+(q=c*F-h*W)*q),c*W+h*F+u*j);k+=q,p+=q*(c+(c=W)),s+=q*(h+(h=F)),t+=q*(u+(u=j)),v(c,h,u)}function w(){g.point=y}function E(){g.point=C}function P(){O(a,l),g.point=y}function C(U,D){a=U,l=D,U*=x.qw,D*=x.qw,g.point=O;var N=(0,x.W8)(D);c=N*(0,x.W8)(U),h=N*(0,x.g$)(U),u=(0,x.g$)(D),v(c,h,u)}function O(U,D){U*=x.qw,D*=x.qw;var N=(0,x.W8)(D),W=N*(0,x.W8)(U),F=N*(0,x.g$)(U),j=(0,x.g$)(D),q=h*j-u*F,te=u*W-c*j,ee=c*F-h*W,Q=(0,x._I)(q*q+te*te+ee*ee),J=(0,x.qR)(Q),K=Q&&-J/Q;i+=K*q,n+=K*te,r+=K*ee,k+=J,p+=J*(c+(c=W)),s+=J*(h+(h=F)),t+=J*(u+(u=j)),v(c,h,u)}function R(U){A=k=o=T=b=p=s=t=i=n=r=0,(0,m.c)(U,g);var D=i,N=n,W=r,F=D*D+N*N+W*W;return F<x.a8&&(D=p,N=s,W=t,k<x.Gg&&(D=o,N=T,W=b),(F=D*D+N*N+W*W)<x.a8)?[NaN,NaN]:[(0,x.WE)(N,D)*x.oh,(0,x.qR)(W/(0,x._I)(F))*x.oh]}},61780:function(X,I,e){"use strict";e.d(I,{Q:function(){return b},c:function(){return s}});var A=e(84220);function k(t){return function(){return t}}var o=e(64528),T=e(92992);function b(t,i,n,r,a,l){if(n){var c=(0,o.W8)(i),h=(0,o.g$)(i),u=r*n;a==null?(a=i+r*o.kD,l=i-u/2):(a=p(c,a),l=p(c,l),(r>0?a<l:a>l)&&(a+=r*o.kD));for(var x,d=a;r>0?d>l:d<l;d-=u)x=(0,A.G)([c,-h*(0,o.W8)(d),-h*(0,o.g$)(d)]),t.point(x[0],x[1])}}function p(t,i){(i=(0,A.ux)(i))[0]-=t,(0,A.cJ)(i);var n=(0,o.mE)(-i[1]);return((-i[2]<0?-n:n)+o.kD-o.Gg)%o.kD}function s(){var t,i,n=k([0,0]),r=k(90),a=k(6),l={point:function(h,u){t.push(h=i(h,u)),h[0]*=o.oh,h[1]*=o.oh}};function c(){var h=n.apply(this,arguments),u=r.apply(this,arguments)*o.qw,x=a.apply(this,arguments)*o.qw;return t=[],i=(0,T.O)(-h[0]*o.qw,-h[1]*o.qw,0).invert,b(l,u,x,1),h={type:"Polygon",coordinates:[t]},t=i=null,h}return c.center=function(h){return arguments.length?(n=typeof h=="function"?h:k([+h[0],+h[1]]),c):n},c.radius=function(h){return arguments.length?(r=typeof h=="function"?h:k(+h),c):r},c.precision=function(h){return arguments.length?(a=typeof h=="function"?h:k(+h),c):a},c}},78284:function(X,I,e){"use strict";var A=e(14229),k=e(64528);I.c=(0,A.c)(function(){return!0},function(o){var T,b=NaN,p=NaN,s=NaN;return{lineStart:function(){o.lineStart(),T=1},point:function(t,i){var n=t>0?k.pi:-k.pi,r=(0,k.a2)(t-b);(0,k.a2)(r-k.pi)<k.Gg?(o.point(b,p=(p+i)/2>0?k.or:-k.or),o.point(s,p),o.lineEnd(),o.lineStart(),o.point(n,p),o.point(t,p),T=0):s!==n&&r>=k.pi&&((0,k.a2)(b-s)<k.Gg&&(b-=s*k.Gg),(0,k.a2)(t-n)<k.Gg&&(t-=n*k.Gg),p=function(a,l,c,h){var u,x,d=(0,k.g$)(a-c);return(0,k.a2)(d)>k.Gg?(0,k.MQ)(((0,k.g$)(l)*(x=(0,k.W8)(h))*(0,k.g$)(c)-(0,k.g$)(h)*(u=(0,k.W8)(l))*(0,k.g$)(a))/(u*x*d)):(l+h)/2}(b,p,t,i),o.point(s,p),o.lineEnd(),o.lineStart(),o.point(n,p),T=0),o.point(b=t,p=i),s=n},lineEnd:function(){o.lineEnd(),b=p=NaN},clean:function(){return 2-T}}},function(o,T,b,p){var s;if(o==null)s=b*k.or,p.point(-k.pi,s),p.point(0,s),p.point(k.pi,s),p.point(k.pi,0),p.point(k.pi,-s),p.point(0,-s),p.point(-k.pi,-s),p.point(-k.pi,0),p.point(-k.pi,s);else if((0,k.a2)(o[0]-T[0])>k.Gg){var t=o[0]<T[0]?k.pi:-k.pi;s=b*t/2,p.point(-t,s),p.point(0,s),p.point(t,s)}else p.point(T[0],T[1])},[-k.pi,-k.or])},97208:function(X,I,e){"use strict";e.d(I,{c:function(){return k}});var A=e(70932);function k(){var o,T=[];return{point:function(b,p,s){o.push([b,p,s])},lineStart:function(){T.push(o=[])},lineEnd:A.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],o=null,b}}}},2728:function(X,I,e){"use strict";e.d(I,{c:function(){return p}});var A=e(84220),k=e(61780),o=e(64528),T=e(41860),b=e(14229);function p(s){var t=(0,o.W8)(s),i=6*o.qw,n=t>0,r=(0,o.a2)(t)>o.Gg;function a(h,u){return(0,o.W8)(h)*(0,o.W8)(u)>t}function l(h,u,x){var d=(0,A.ux)(h),m=(0,A.ux)(u),g=[1,0,0],y=(0,A.CW)(d,m),v=(0,A.Ez)(y,y),_=y[0],f=v-_*_;if(!f)return!x&&h;var S=t*v/f,w=-t*_/f,E=(0,A.CW)(g,y),P=(0,A.wx)(g,S),C=(0,A.wx)(y,w);(0,A.mg)(P,C);var O=E,R=(0,A.Ez)(P,O),U=(0,A.Ez)(O,O),D=R*R-U*((0,A.Ez)(P,P)-1);if(!(D<0)){var N=(0,o._I)(D),W=(0,A.wx)(O,(-R-N)/U);if((0,A.mg)(W,P),W=(0,A.G)(W),!x)return W;var F,j=h[0],q=u[0],te=h[1],ee=u[1];q<j&&(F=j,j=q,q=F);var Q=q-j,J=(0,o.a2)(Q-o.pi)<o.Gg;if(!J&&ee<te&&(F=te,te=ee,ee=F),J||Q<o.Gg?J?te+ee>0^W[1]<((0,o.a2)(W[0]-j)<o.Gg?te:ee):te<=W[1]&&W[1]<=ee:Q>o.pi^(j<=W[0]&&W[0]<=q)){var K=(0,A.wx)(O,(-R+N)/U);return(0,A.mg)(K,P),[W,(0,A.G)(K)]}}}function c(h,u){var x=n?s:o.pi-s,d=0;return h<-x?d|=1:h>x&&(d|=2),u<-x?d|=4:u>x&&(d|=8),d}return(0,b.c)(a,function(h){var u,x,d,m,g;return{lineStart:function(){m=d=!1,g=1},point:function(y,v){var _,f=[y,v],S=a(y,v),w=n?S?0:c(y,v):S?c(y+(y<0?o.pi:-o.pi),v):0;if(!u&&(m=d=S)&&h.lineStart(),S!==d&&(!(_=l(u,f))||(0,T.c)(u,_)||(0,T.c)(f,_))&&(f[2]=1),S!==d)g=0,S?(h.lineStart(),_=l(f,u),h.point(_[0],_[1])):(_=l(u,f),h.point(_[0],_[1],2),h.lineEnd()),u=_;else if(r&&u&&n^S){var E;w&x||!(E=l(f,u,!0))||(g=0,n?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!S||u&&(0,T.c)(u,f)||h.point(f[0],f[1]),u=f,d=S,x=w},lineEnd:function(){d&&h.lineEnd(),u=null},clean:function(){return g|(m&&d)<<1}}},function(h,u,x,d){(0,k.Q)(d,s,i,x,h,u)},n?[0,-s]:[-o.pi,s-o.pi])}},14229:function(X,I,e){"use strict";e.d(I,{c:function(){return p}});var A=e(97208),k=e(32232),o=e(64528),T=e(58196),b=e(84706);function p(i,n,r,a){return function(l){var c,h,u,x=n(l),d=(0,A.c)(),m=n(d),g=!1,y={point:v,lineStart:f,lineEnd:S,polygonStart:function(){y.point=w,y.lineStart=E,y.lineEnd=P,h=[],c=[]},polygonEnd:function(){y.point=v,y.lineStart=f,y.lineEnd=S,h=(0,b.Uf)(h);var C=(0,T.c)(c,a);h.length?(g||(l.polygonStart(),g=!0),(0,k.c)(h,t,C,r,l)):C&&(g||(l.polygonStart(),g=!0),l.lineStart(),r(null,null,1,l),l.lineEnd()),g&&(l.polygonEnd(),g=!1),h=c=null},sphere:function(){l.polygonStart(),l.lineStart(),r(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function v(C,O){i(C,O)&&l.point(C,O)}function _(C,O){x.point(C,O)}function f(){y.point=_,x.lineStart()}function S(){y.point=v,x.lineEnd()}function w(C,O){u.push([C,O]),m.point(C,O)}function E(){m.lineStart(),u=[]}function P(){w(u[0][0],u[0][1]),m.lineEnd();var C,O,R,U,D=m.clean(),N=d.result(),W=N.length;if(u.pop(),c.push(u),u=null,W)if(1&D){if((O=(R=N[0]).length-1)>0){for(g||(l.polygonStart(),g=!0),l.lineStart(),C=0;C<O;++C)l.point((U=R[C])[0],U[1]);l.lineEnd()}}else W>1&&2&D&&N.push(N.pop().concat(N.shift())),h.push(N.filter(s))}return y}}function s(i){return i.length>1}function t(i,n){return((i=i.x)[0]<0?i[1]-o.or-o.Gg:o.or-i[1])-((n=n.x)[0]<0?n[1]-o.or-o.Gg:o.or-n[1])}},21676:function(X,I,e){"use strict";e.d(I,{c:function(){return s}});var A=e(64528),k=e(97208),o=e(32232),T=e(84706),b=1e9,p=-b;function s(t,i,n,r){function a(x,d){return t<=x&&x<=n&&i<=d&&d<=r}function l(x,d,m,g){var y=0,v=0;if(x==null||(y=c(x,m))!==(v=c(d,m))||u(x,d)<0^m>0)do g.point(y===0||y===3?t:n,y>1?r:i);while((y=(y+m+4)%4)!==v);else g.point(d[0],d[1])}function c(x,d){return(0,A.a2)(x[0]-t)<A.Gg?d>0?0:3:(0,A.a2)(x[0]-n)<A.Gg?d>0?2:1:(0,A.a2)(x[1]-i)<A.Gg?d>0?1:0:d>0?3:2}function h(x,d){return u(x.x,d.x)}function u(x,d){var m=c(x,1),g=c(d,1);return m!==g?m-g:m===0?d[1]-x[1]:m===1?x[0]-d[0]:m===2?x[1]-d[1]:d[0]-x[0]}return function(x){var d,m,g,y,v,_,f,S,w,E,P,C=x,O=(0,k.c)(),R={point:U,lineStart:function(){R.point=D,m&&m.push(g=[]),E=!0,w=!1,f=S=NaN},lineEnd:function(){d&&(D(y,v),_&&w&&O.rejoin(),d.push(O.result())),R.point=U,w&&C.lineEnd()},polygonStart:function(){C=O,d=[],m=[],P=!0},polygonEnd:function(){var N=function(){for(var j=0,q=0,te=m.length;q<te;++q)for(var ee,Q,J=m[q],K=1,Y=J.length,ie=J[0],se=ie[0],ae=ie[1];K<Y;++K)ee=se,Q=ae,se=(ie=J[K])[0],ae=ie[1],Q<=r?ae>r&&(se-ee)*(r-Q)>(ae-Q)*(t-ee)&&++j:ae<=r&&(se-ee)*(r-Q)<(ae-Q)*(t-ee)&&--j;return j}(),W=P&&N,F=(d=(0,T.Uf)(d)).length;(W||F)&&(x.polygonStart(),W&&(x.lineStart(),l(null,null,1,x),x.lineEnd()),F&&(0,o.c)(d,h,N,l,x),x.polygonEnd()),C=x,d=m=g=null}};function U(N,W){a(N,W)&&C.point(N,W)}function D(N,W){var F=a(N,W);if(m&&g.push([N,W]),E)y=N,v=W,_=F,E=!1,F&&(C.lineStart(),C.point(N,W));else if(F&&w)C.point(N,W);else{var j=[f=Math.max(p,Math.min(b,f)),S=Math.max(p,Math.min(b,S))],q=[N=Math.max(p,Math.min(b,N)),W=Math.max(p,Math.min(b,W))];(function(te,ee,Q,J,K,Y){var ie,se=te[0],ae=te[1],ue=0,ve=1,ye=ee[0]-se,de=ee[1]-ae;if(ie=Q-se,ye||!(ie>0)){if(ie/=ye,ye<0){if(ie<ue)return;ie<ve&&(ve=ie)}else if(ye>0){if(ie>ve)return;ie>ue&&(ue=ie)}if(ie=K-se,ye||!(ie<0)){if(ie/=ye,ye<0){if(ie>ve)return;ie>ue&&(ue=ie)}else if(ye>0){if(ie<ue)return;ie<ve&&(ve=ie)}if(ie=J-ae,de||!(ie>0)){if(ie/=de,de<0){if(ie<ue)return;ie<ve&&(ve=ie)}else if(de>0){if(ie>ve)return;ie>ue&&(ue=ie)}if(ie=Y-ae,de||!(ie<0)){if(ie/=de,de<0){if(ie>ve)return;ie>ue&&(ue=ie)}else if(de>0){if(ie<ue)return;ie<ve&&(ve=ie)}return ue>0&&(te[0]=se+ue*ye,te[1]=ae+ue*de),ve<1&&(ee[0]=se+ve*ye,ee[1]=ae+ve*de),!0}}}}})(j,q,t,i,n,r)?(w||(C.lineStart(),C.point(j[0],j[1])),C.point(q[0],q[1]),F||C.lineEnd(),P=!1):F&&(C.lineStart(),C.point(N,W),P=!1)}f=N,S=W,w=F}return R}}},32232:function(X,I,e){"use strict";e.d(I,{c:function(){return T}});var A=e(41860),k=e(64528);function o(p,s,t,i){this.x=p,this.z=s,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(p,s,t,i,n){var r,a,l=[],c=[];if(p.forEach(function(g){if(!((y=g.length-1)<=0)){var y,v,_=g[0],f=g[y];if((0,A.c)(_,f)){if(!_[2]&&!f[2]){for(n.lineStart(),r=0;r<y;++r)n.point((_=g[r])[0],_[1]);return void n.lineEnd()}f[0]+=2*k.Gg}l.push(v=new o(_,g,null,!0)),c.push(v.o=new o(_,null,v,!1)),l.push(v=new o(f,g,null,!1)),c.push(v.o=new o(f,null,v,!0))}}),l.length){for(c.sort(s),b(l),b(c),r=0,a=c.length;r<a;++r)c[r].e=t=!t;for(var h,u,x=l[0];;){for(var d=x,m=!0;d.v;)if((d=d.n)===x)return;h=d.z,n.lineStart();do{if(d.v=d.o.v=!0,d.e){if(m)for(r=0,a=h.length;r<a;++r)n.point((u=h[r])[0],u[1]);else i(d.x,d.n.x,1,n);d=d.n}else{if(m)for(h=d.p.z,r=h.length-1;r>=0;--r)n.point((u=h[r])[0],u[1]);else i(d.x,d.p.x,-1,n);d=d.p}h=(d=d.o).z,m=!m}while(!d.v);n.lineEnd()}}}function b(p){if(s=p.length){for(var s,t,i=0,n=p[0];++i<s;)n.n=t=p[i],t.p=n,n=t;n.n=t=p[0],t.p=n}}},68120:function(X,I,e){"use strict";function A(k,o){function T(b,p){return b=k(b,p),o(b[0],b[1])}return k.invert&&o.invert&&(T.invert=function(b,p){return(b=o.invert(b,p))&&k.invert(b[0],b[1])}),T}e.d(I,{c:function(){return A}})},7376:function(X,I,e){"use strict";function A(k){return k}e.d(I,{c:function(){return A}})},83356:function(X,I,e){"use strict";e.r(I),e.d(I,{geoAlbers:function(){return gt},geoAlbersUsa:function(){return Tt},geoArea:function(){return A.cp},geoAzimuthalEqualArea:function(){return vt.c},geoAzimuthalEqualAreaRaw:function(){return vt.y},geoAzimuthalEquidistant:function(){return kt.c},geoAzimuthalEquidistantRaw:function(){return kt.O},geoBounds:function(){return k.c},geoCentroid:function(){return o.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return b.c},geoClipCircle:function(){return p.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.c},geoConicConformal:function(){return Wt},geoConicConformalRaw:function(){return jt},geoConicEqualArea:function(){return pt},geoConicEqualAreaRaw:function(){return ut},geoConicEquidistant:function(){return bn},geoConicEquidistantRaw:function(){return Ln},geoContains:function(){return N},geoDistance:function(){return S},geoEqualEarth:function(){return xn},geoEqualEarthRaw:function(){return vn},geoEquirectangular:function(){return Ft.c},geoEquirectangularRaw:function(){return Ft.u},geoGnomonic:function(){return An.c},geoGnomonicRaw:function(){return An.Y},geoGraticule:function(){return q},geoGraticule10:function(){return te},geoIdentity:function(){return Tn},geoInterpolate:function(){return Y.c},geoLength:function(){return v},geoMercator:function(){return Dt},geoMercatorRaw:function(){return Ct},geoNaturalEarth1:function(){return Rn.c},geoNaturalEarth1Raw:function(){return Rn.g},geoOrthographic:function(){return In.c},geoOrthographicRaw:function(){return In.t},geoPath:function(){return Fe},geoProjection:function(){return nt.c},geoProjectionMutator:function(){return nt.U},geoRotation:function(){return Lt.c},geoStereographic:function(){return er},geoStereographicRaw:function(){return Vn},geoStream:function(){return u.c},geoTransform:function(){return Sn.c},geoTransverseMercator:function(){return fr},geoTransverseMercatorRaw:function(){return Wn}});var A=e(95384),k=e(13696),o=e(24052),T=e(61780),b=e(78284),p=e(2728),s=e(21676);function t(){var Jt,en,Mn,pn=0,Cn=0,jn=960,Bn=500;return Mn={stream:function(Yn){return Jt&&en===Yn?Jt:Jt=(0,s.c)(pn,Cn,jn,Bn)(en=Yn)},extent:function(Yn){return arguments.length?(pn=+Yn[0][0],Cn=+Yn[0][1],jn=+Yn[1][0],Bn=+Yn[1][1],Jt=en=null,Mn):[[pn,Cn],[jn,Bn]]}}}var i,n,r,a=e(58196),l=e(88728),c=e(64528),h=e(70932),u=e(16016),x=(0,l.c)(),d={sphere:h.c,point:h.c,lineStart:function(){d.point=g,d.lineEnd=m},lineEnd:h.c,polygonStart:h.c,polygonEnd:h.c};function m(){d.point=d.lineEnd=h.c}function g(Jt,en){Jt*=c.qw,en*=c.qw,i=Jt,n=(0,c.g$)(en),r=(0,c.W8)(en),d.point=y}function y(Jt,en){Jt*=c.qw,en*=c.qw;var Mn=(0,c.g$)(en),pn=(0,c.W8)(en),Cn=(0,c.a2)(Jt-i),jn=(0,c.W8)(Cn),Bn=pn*(0,c.g$)(Cn),Yn=r*Mn-n*pn*jn,dr=n*Mn+r*pn*jn;x.add((0,c.WE)((0,c._I)(Bn*Bn+Yn*Yn),dr)),i=Jt,n=Mn,r=pn}function v(Jt){return x.reset(),(0,u.c)(Jt,d),+x}var _=[null,null],f={type:"LineString",coordinates:_};function S(Jt,en){return _[0]=Jt,_[1]=en,v(f)}var w={Feature:function(Jt,en){return P(Jt.geometry,en)},FeatureCollection:function(Jt,en){for(var Mn=Jt.features,pn=-1,Cn=Mn.length;++pn<Cn;)if(P(Mn[pn].geometry,en))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Jt,en){return C(Jt.coordinates,en)},MultiPoint:function(Jt,en){for(var Mn=Jt.coordinates,pn=-1,Cn=Mn.length;++pn<Cn;)if(C(Mn[pn],en))return!0;return!1},LineString:function(Jt,en){return O(Jt.coordinates,en)},MultiLineString:function(Jt,en){for(var Mn=Jt.coordinates,pn=-1,Cn=Mn.length;++pn<Cn;)if(O(Mn[pn],en))return!0;return!1},Polygon:function(Jt,en){return R(Jt.coordinates,en)},MultiPolygon:function(Jt,en){for(var Mn=Jt.coordinates,pn=-1,Cn=Mn.length;++pn<Cn;)if(R(Mn[pn],en))return!0;return!1},GeometryCollection:function(Jt,en){for(var Mn=Jt.geometries,pn=-1,Cn=Mn.length;++pn<Cn;)if(P(Mn[pn],en))return!0;return!1}};function P(Jt,en){return!(!Jt||!E.hasOwnProperty(Jt.type))&&E[Jt.type](Jt,en)}function C(Jt,en){return S(Jt,en)===0}function O(Jt,en){for(var Mn,pn,Cn,jn=0,Bn=Jt.length;jn<Bn;jn++){if((pn=S(Jt[jn],en))===0||jn>0&&(Cn=S(Jt[jn],Jt[jn-1]))>0&&Mn<=Cn&&pn<=Cn&&(Mn+pn-Cn)*(1-Math.pow((Mn-pn)/Cn,2))<c.a8*Cn)return!0;Mn=pn}return!1}function R(Jt,en){return!!(0,a.c)(Jt.map(U),D(en))}function U(Jt){return(Jt=Jt.map(D)).pop(),Jt}function D(Jt){return[Jt[0]*c.qw,Jt[1]*c.qw]}function N(Jt,en){return(Jt&&w.hasOwnProperty(Jt.type)?w[Jt.type]:P)(Jt,en)}var W=e(84706);function F(Jt,en,Mn){var pn=(0,W.ik)(Jt,en-c.Gg,Mn).concat(en);return function(Cn){return pn.map(function(jn){return[Cn,jn]})}}function j(Jt,en,Mn){var pn=(0,W.ik)(Jt,en-c.Gg,Mn).concat(en);return function(Cn){return pn.map(function(jn){return[jn,Cn]})}}function q(){var Jt,en,Mn,pn,Cn,jn,Bn,Yn,dr,Zt,dn,St,Rt=10,Xt=Rt,ln=90,un=360,mn=2.5;function rn(){return{type:"MultiLineString",coordinates:qt()}}function qt(){return(0,W.ik)((0,c.Km)(pn/ln)*ln,Mn,ln).map(dn).concat((0,W.ik)((0,c.Km)(Yn/un)*un,Bn,un).map(St)).concat((0,W.ik)((0,c.Km)(en/Rt)*Rt,Jt,Rt).filter(function(Ht){return(0,c.a2)(Ht%ln)>c.Gg}).map(dr)).concat((0,W.ik)((0,c.Km)(jn/Xt)*Xt,Cn,Xt).filter(function(Ht){return(0,c.a2)(Ht%un)>c.Gg}).map(Zt))}return rn.lines=function(){return qt().map(function(Ht){return{type:"LineString",coordinates:Ht}})},rn.outline=function(){return{type:"Polygon",coordinates:[dn(pn).concat(St(Bn).slice(1),dn(Mn).reverse().slice(1),St(Yn).reverse().slice(1))]}},rn.extent=function(Ht){return arguments.length?rn.extentMajor(Ht).extentMinor(Ht):rn.extentMinor()},rn.extentMajor=function(Ht){return arguments.length?(pn=+Ht[0][0],Mn=+Ht[1][0],Yn=+Ht[0][1],Bn=+Ht[1][1],pn>Mn&&(Ht=pn,pn=Mn,Mn=Ht),Yn>Bn&&(Ht=Yn,Yn=Bn,Bn=Ht),rn.precision(mn)):[[pn,Yn],[Mn,Bn]]},rn.extentMinor=function(Ht){return arguments.length?(en=+Ht[0][0],Jt=+Ht[1][0],jn=+Ht[0][1],Cn=+Ht[1][1],en>Jt&&(Ht=en,en=Jt,Jt=Ht),jn>Cn&&(Ht=jn,jn=Cn,Cn=Ht),rn.precision(mn)):[[en,jn],[Jt,Cn]]},rn.step=function(Ht){return arguments.length?rn.stepMajor(Ht).stepMinor(Ht):rn.stepMinor()},rn.stepMajor=function(Ht){return arguments.length?(ln=+Ht[0],un=+Ht[1],rn):[ln,un]},rn.stepMinor=function(Ht){return arguments.length?(Rt=+Ht[0],Xt=+Ht[1],rn):[Rt,Xt]},rn.precision=function(Ht){return arguments.length?(mn=+Ht,dr=F(jn,Cn,90),Zt=j(en,Jt,mn),dn=F(Yn,Bn,90),St=j(pn,Mn,mn),rn):mn},rn.extentMajor([[-180,-90+c.Gg],[180,90-c.Gg]]).extentMinor([[-180,-80-c.Gg],[180,80+c.Gg]])}function te(){return q()()}var ee,Q,J,K,Y=e(27284),ie=e(7376),se=(0,l.c)(),ae=(0,l.c)(),ue={point:h.c,lineStart:h.c,lineEnd:h.c,polygonStart:function(){ue.lineStart=ve,ue.lineEnd=pe},polygonEnd:function(){ue.lineStart=ue.lineEnd=ue.point=h.c,se.add((0,c.a2)(ae)),ae.reset()},result:function(){var Jt=se/2;return se.reset(),Jt}};function ve(){ue.point=ye}function ye(Jt,en){ue.point=de,ee=J=Jt,Q=K=en}function de(Jt,en){ae.add(K*Jt-J*en),J=Jt,K=en}function pe(){de(ee,Q)}var ge,ke,Ee,me,oe=ue,re=e(73784),fe=0,Se=0,be=0,we=0,Me=0,Ie=0,Oe=0,he=0,_e=0,Ae={point:De,lineStart:Le,lineEnd:Ze,polygonStart:function(){Ae.lineStart=rt,Ae.lineEnd=it},polygonEnd:function(){Ae.point=De,Ae.lineStart=Le,Ae.lineEnd=Ze},result:function(){var Jt=_e?[Oe/_e,he/_e]:Ie?[we/Ie,Me/Ie]:be?[fe/be,Se/be]:[NaN,NaN];return fe=Se=be=we=Me=Ie=Oe=he=_e=0,Jt}};function De(Jt,en){fe+=Jt,Se+=en,++be}function Le(){Ae.point=Be}function Be(Jt,en){Ae.point=Ve,De(Ee=Jt,me=en)}function Ve(Jt,en){var Mn=Jt-Ee,pn=en-me,Cn=(0,c._I)(Mn*Mn+pn*pn);we+=Cn*(Ee+Jt)/2,Me+=Cn*(me+en)/2,Ie+=Cn,De(Ee=Jt,me=en)}function Ze(){Ae.point=De}function rt(){Ae.point=dt}function it(){mt(ge,ke)}function dt(Jt,en){Ae.point=mt,De(ge=Ee=Jt,ke=me=en)}function mt(Jt,en){var Mn=Jt-Ee,pn=en-me,Cn=(0,c._I)(Mn*Mn+pn*pn);we+=Cn*(Ee+Jt)/2,Me+=Cn*(me+en)/2,Ie+=Cn,Oe+=(Cn=me*Jt-Ee*en)*(Ee+Jt),he+=Cn*(me+en),_e+=3*Cn,De(Ee=Jt,me=en)}var ht=Ae;function Qe(Jt){this._context=Jt}Qe.prototype={_radius:4.5,pointRadius:function(Jt){return this._radius=Jt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Jt,en){switch(this._point){case 0:this._context.moveTo(Jt,en),this._point=1;break;case 1:this._context.lineTo(Jt,en);break;default:this._context.moveTo(Jt+this._radius,en),this._context.arc(Jt,en,this._radius,0,c.kD)}},result:h.c};var Je,wt,Pt,It,At,qe=(0,l.c)(),Ye={point:h.c,lineStart:function(){Ye.point=Ne},lineEnd:function(){Je&&We(wt,Pt),Ye.point=h.c},polygonStart:function(){Je=!0},polygonEnd:function(){Je=null},result:function(){var Jt=+qe;return qe.reset(),Jt}};function Ne(Jt,en){Ye.point=We,wt=It=Jt,Pt=At=en}function We(Jt,en){It-=Jt,At-=en,qe.add((0,c._I)(It*It+At*At)),It=Jt,At=en}var at=Ye;function tt(){this._string=[]}function Re(Jt){return"m0,"+Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+-2*Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+2*Jt+"z"}function Fe(Jt,en){var Mn,pn,Cn=4.5;function jn(Bn){return Bn&&(typeof Cn=="function"&&pn.pointRadius(+Cn.apply(this,arguments)),(0,u.c)(Bn,Mn(pn))),pn.result()}return jn.area=function(Bn){return(0,u.c)(Bn,Mn(oe)),oe.result()},jn.measure=function(Bn){return(0,u.c)(Bn,Mn(at)),at.result()},jn.bounds=function(Bn){return(0,u.c)(Bn,Mn(re.c)),re.c.result()},jn.centroid=function(Bn){return(0,u.c)(Bn,Mn(ht)),ht.result()},jn.projection=function(Bn){return arguments.length?(Mn=Bn==null?(Jt=null,ie.c):(Jt=Bn).stream,jn):Jt},jn.context=function(Bn){return arguments.length?(pn=Bn==null?(en=null,new tt):new Qe(en=Bn),typeof Cn!="function"&&pn.pointRadius(Cn),jn):en},jn.pointRadius=function(Bn){return arguments.length?(Cn=typeof Bn=="function"?Bn:(pn.pointRadius(+Bn),+Bn),jn):Cn},jn.projection(Jt).context(en)}tt.prototype={_radius:4.5,_circle:Re(4.5),pointRadius:function(Jt){return(Jt=+Jt)!==this._radius&&(this._radius=Jt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Jt,en){switch(this._point){case 0:this._string.push("M",Jt,",",en),this._point=1;break;case 1:this._string.push("L",Jt,",",en);break;default:this._circle==null&&(this._circle=Re(this._radius)),this._string.push("M",Jt,",",en,this._circle)}},result:function(){if(this._string.length){var Jt=this._string.join("");return this._string=[],Jt}return null}};var nt=e(87952);function Ge(Jt){var en=0,Mn=c.pi/3,pn=(0,nt.U)(Jt),Cn=pn(en,Mn);return Cn.parallels=function(jn){return arguments.length?pn(en=jn[0]*c.qw,Mn=jn[1]*c.qw):[en*c.oh,Mn*c.oh]},Cn}function ut(Jt,en){var Mn=(0,c.g$)(Jt),pn=(Mn+(0,c.g$)(en))/2;if((0,c.a2)(pn)<c.Gg)return function(Yn){var dr=(0,c.W8)(Yn);function Zt(dn,St){return[dn*dr,(0,c.g$)(St)/dr]}return Zt.invert=function(dn,St){return[dn/dr,(0,c.qR)(St*dr)]},Zt}(Jt);var Cn=1+Mn*(2*pn-Mn),jn=(0,c._I)(Cn)/pn;function Bn(Yn,dr){var Zt=(0,c._I)(Cn-2*pn*(0,c.g$)(dr))/pn;return[Zt*(0,c.g$)(Yn*=pn),jn-Zt*(0,c.W8)(Yn)]}return Bn.invert=function(Yn,dr){var Zt=jn-dr,dn=(0,c.WE)(Yn,(0,c.a2)(Zt))*(0,c.kq)(Zt);return Zt*pn<0&&(dn-=c.pi*(0,c.kq)(Yn)*(0,c.kq)(Zt)),[dn/pn,(0,c.qR)((Cn-(Yn*Yn+Zt*Zt)*pn*pn)/(2*pn))]},Bn}function pt(){return Ge(ut).scale(155.424).center([0,33.6442])}function gt(){return pt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ct=e(86420);function Tt(){var Jt,en,Mn,pn,Cn,jn,Bn=gt(),Yn=pt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),dr=pt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Zt={point:function(Rt,Xt){jn=[Rt,Xt]}};function dn(Rt){var Xt=Rt[0],ln=Rt[1];return jn=null,Mn.point(Xt,ln),jn||(pn.point(Xt,ln),jn)||(Cn.point(Xt,ln),jn)}function St(){return Jt=en=null,dn}return dn.invert=function(Rt){var Xt=Bn.scale(),ln=Bn.translate(),un=(Rt[0]-ln[0])/Xt,mn=(Rt[1]-ln[1])/Xt;return(mn>=.12&&mn<.234&&un>=-.425&&un<-.214?Yn:mn>=.166&&mn<.234&&un>=-.214&&un<-.115?dr:Bn).invert(Rt)},dn.stream=function(Rt){return Jt&&en===Rt?Jt:(Xt=[Bn.stream(en=Rt),Yn.stream(Rt),dr.stream(Rt)],ln=Xt.length,Jt={point:function(un,mn){for(var rn=-1;++rn<ln;)Xt[rn].point(un,mn)},sphere:function(){for(var un=-1;++un<ln;)Xt[un].sphere()},lineStart:function(){for(var un=-1;++un<ln;)Xt[un].lineStart()},lineEnd:function(){for(var un=-1;++un<ln;)Xt[un].lineEnd()},polygonStart:function(){for(var un=-1;++un<ln;)Xt[un].polygonStart()},polygonEnd:function(){for(var un=-1;++un<ln;)Xt[un].polygonEnd()}});var Xt,ln},dn.precision=function(Rt){return arguments.length?(Bn.precision(Rt),Yn.precision(Rt),dr.precision(Rt),St()):Bn.precision()},dn.scale=function(Rt){return arguments.length?(Bn.scale(Rt),Yn.scale(.35*Rt),dr.scale(Rt),dn.translate(Bn.translate())):Bn.scale()},dn.translate=function(Rt){if(!arguments.length)return Bn.translate();var Xt=Bn.scale(),ln=+Rt[0],un=+Rt[1];return Mn=Bn.translate(Rt).clipExtent([[ln-.455*Xt,un-.238*Xt],[ln+.455*Xt,un+.238*Xt]]).stream(Zt),pn=Yn.translate([ln-.307*Xt,un+.201*Xt]).clipExtent([[ln-.425*Xt+c.Gg,un+.12*Xt+c.Gg],[ln-.214*Xt-c.Gg,un+.234*Xt-c.Gg]]).stream(Zt),Cn=dr.translate([ln-.205*Xt,un+.212*Xt]).clipExtent([[ln-.214*Xt+c.Gg,un+.166*Xt+c.Gg],[ln-.115*Xt-c.Gg,un+.234*Xt-c.Gg]]).stream(Zt),St()},dn.fitExtent=function(Rt,Xt){return(0,ct.QX)(dn,Rt,Xt)},dn.fitSize=function(Rt,Xt){return(0,ct.UV)(dn,Rt,Xt)},dn.fitWidth=function(Rt,Xt){return(0,ct.Qx)(dn,Rt,Xt)},dn.fitHeight=function(Rt,Xt){return(0,ct.OW)(dn,Rt,Xt)},dn.scale(1070)}var vt=e(54724),kt=e(69020),Lt=e(92992);function Ct(Jt,en){return[Jt,(0,c.Yz)((0,c.a6)((c.or+en)/2))]}function Dt(){return Gt(Ct).scale(961/c.kD)}function Gt(Jt){var en,Mn,pn,Cn=(0,nt.c)(Jt),jn=Cn.center,Bn=Cn.scale,Yn=Cn.translate,dr=Cn.clipExtent,Zt=null;function dn(){var St=c.pi*Bn(),Rt=Cn((0,Lt.c)(Cn.rotate()).invert([0,0]));return dr(Zt==null?[[Rt[0]-St,Rt[1]-St],[Rt[0]+St,Rt[1]+St]]:Jt===Ct?[[Math.max(Rt[0]-St,Zt),en],[Math.min(Rt[0]+St,Mn),pn]]:[[Zt,Math.max(Rt[1]-St,en)],[Mn,Math.min(Rt[1]+St,pn)]])}return Cn.scale=function(St){return arguments.length?(Bn(St),dn()):Bn()},Cn.translate=function(St){return arguments.length?(Yn(St),dn()):Yn()},Cn.center=function(St){return arguments.length?(jn(St),dn()):jn()},Cn.clipExtent=function(St){return arguments.length?(St==null?Zt=en=Mn=pn=null:(Zt=+St[0][0],en=+St[0][1],Mn=+St[1][0],pn=+St[1][1]),dn()):Zt==null?null:[[Zt,en],[Mn,pn]]},dn()}function tn(Jt){return(0,c.a6)((c.or+Jt)/2)}function jt(Jt,en){var Mn=(0,c.W8)(Jt),pn=Jt===en?(0,c.g$)(Jt):(0,c.Yz)(Mn/(0,c.W8)(en))/(0,c.Yz)(tn(en)/tn(Jt)),Cn=Mn*(0,c.g3)(tn(Jt),pn)/pn;if(!pn)return Ct;function jn(Bn,Yn){Cn>0?Yn<-c.or+c.Gg&&(Yn=-c.or+c.Gg):Yn>c.or-c.Gg&&(Yn=c.or-c.Gg);var dr=Cn/(0,c.g3)(tn(Yn),pn);return[dr*(0,c.g$)(pn*Bn),Cn-dr*(0,c.W8)(pn*Bn)]}return jn.invert=function(Bn,Yn){var dr=Cn-Yn,Zt=(0,c.kq)(pn)*(0,c._I)(Bn*Bn+dr*dr),dn=(0,c.WE)(Bn,(0,c.a2)(dr))*(0,c.kq)(dr);return dr*pn<0&&(dn-=c.pi*(0,c.kq)(Bn)*(0,c.kq)(dr)),[dn/pn,2*(0,c.MQ)((0,c.g3)(Cn/Zt,1/pn))-c.or]},jn}function Wt(){return Ge(jt).scale(109.5).parallels([30,30])}Ct.invert=function(Jt,en){return[Jt,2*(0,c.MQ)((0,c.oN)(en))-c.or]};var Ft=e(69604);function Ln(Jt,en){var Mn=(0,c.W8)(Jt),pn=Jt===en?(0,c.g$)(Jt):(Mn-(0,c.W8)(en))/(en-Jt),Cn=Mn/pn+Jt;if((0,c.a2)(pn)<c.Gg)return Ft.u;function jn(Bn,Yn){var dr=Cn-Yn,Zt=pn*Bn;return[dr*(0,c.g$)(Zt),Cn-dr*(0,c.W8)(Zt)]}return jn.invert=function(Bn,Yn){var dr=Cn-Yn,Zt=(0,c.WE)(Bn,(0,c.a2)(dr))*(0,c.kq)(dr);return dr*pn<0&&(Zt-=c.pi*(0,c.kq)(Bn)*(0,c.kq)(dr)),[Zt/pn,Cn-(0,c.kq)(pn)*(0,c._I)(Bn*Bn+dr*dr)]},jn}function bn(){return Ge(Ln).scale(131.154).center([0,13.9389])}var hn=1.340264,Kt=-.081106,sn=893e-6,Qt=.003796,cn=(0,c._I)(3)/2;function vn(Jt,en){var Mn=(0,c.qR)(cn*(0,c.g$)(en)),pn=Mn*Mn,Cn=pn*pn*pn;return[Jt*(0,c.W8)(Mn)/(cn*(hn+3*Kt*pn+Cn*(7*sn+9*Qt*pn))),Mn*(hn+Kt*pn+Cn*(sn+Qt*pn))]}function xn(){return(0,nt.c)(vn).scale(177.158)}vn.invert=function(Jt,en){for(var Mn,pn=en,Cn=pn*pn,jn=Cn*Cn*Cn,Bn=0;Bn<12&&(jn=(Cn=(pn-=Mn=(pn*(hn+Kt*Cn+jn*(sn+Qt*Cn))-en)/(hn+3*Kt*Cn+jn*(7*sn+9*Qt*Cn)))*pn)*Cn*Cn,!((0,c.a2)(Mn)<c.a8));++Bn);return[cn*Jt*(hn+3*Kt*Cn+jn*(7*sn+9*Qt*Cn))/(0,c.W8)(pn),(0,c.qR)((0,c.g$)(pn)/cn)]};var An=e(53285),Sn=e(15196);function Tn(){var Jt,en,Mn,pn,Cn,jn,Bn,Yn=1,dr=0,Zt=0,dn=1,St=1,Rt=0,Xt=null,ln=1,un=1,mn=(0,Sn.s)({point:function($t,an){var wn=Ht([$t,an]);this.stream.point(wn[0],wn[1])}}),rn=ie.c;function qt(){return ln=Yn*dn,un=Yn*St,jn=Bn=null,Ht}function Ht($t){var an=$t[0]*ln,wn=$t[1]*un;if(Rt){var En=wn*Jt-an*en;an=an*Jt+wn*en,wn=En}return[an+dr,wn+Zt]}return Ht.invert=function($t){var an=$t[0]-dr,wn=$t[1]-Zt;if(Rt){var En=wn*Jt+an*en;an=an*Jt-wn*en,wn=En}return[an/ln,wn/un]},Ht.stream=function($t){return jn&&Bn===$t?jn:jn=mn(rn(Bn=$t))},Ht.postclip=function($t){return arguments.length?(rn=$t,Xt=Mn=pn=Cn=null,qt()):rn},Ht.clipExtent=function($t){return arguments.length?(rn=$t==null?(Xt=Mn=pn=Cn=null,ie.c):(0,s.c)(Xt=+$t[0][0],Mn=+$t[0][1],pn=+$t[1][0],Cn=+$t[1][1]),qt()):Xt==null?null:[[Xt,Mn],[pn,Cn]]},Ht.scale=function($t){return arguments.length?(Yn=+$t,qt()):Yn},Ht.translate=function($t){return arguments.length?(dr=+$t[0],Zt=+$t[1],qt()):[dr,Zt]},Ht.angle=function($t){return arguments.length?(Rt=$t%360*c.qw,en=(0,c.g$)(Rt),Jt=(0,c.W8)(Rt),qt()):Rt*c.oh},Ht.reflectX=function($t){return arguments.length?(dn=$t?-1:1,qt()):dn<0},Ht.reflectY=function($t){return arguments.length?(St=$t?-1:1,qt()):St<0},Ht.fitExtent=function($t,an){return(0,ct.QX)(Ht,$t,an)},Ht.fitSize=function($t,an){return(0,ct.UV)(Ht,$t,an)},Ht.fitWidth=function($t,an){return(0,ct.Qx)(Ht,$t,an)},Ht.fitHeight=function($t,an){return(0,ct.OW)(Ht,$t,an)},Ht}var Rn=e(47984),In=e(4888),Xn=e(62280);function Vn(Jt,en){var Mn=(0,c.W8)(en),pn=1+(0,c.W8)(Jt)*Mn;return[Mn*(0,c.g$)(Jt)/pn,(0,c.g$)(en)/pn]}function er(){return(0,nt.c)(Vn).scale(250).clipAngle(142)}function Wn(Jt,en){return[(0,c.Yz)((0,c.a6)((c.or+en)/2)),-Jt]}function fr(){var Jt=Gt(Wn),en=Jt.center,Mn=Jt.rotate;return Jt.center=function(pn){return arguments.length?en([-pn[1],pn[0]]):[(pn=en())[1],-pn[0]]},Jt.rotate=function(pn){return arguments.length?Mn([pn[0],pn[1],pn.length>2?pn[2]+90:90]):[(pn=Mn())[0],pn[1],pn[2]-90]},Mn([0,0,90]).scale(159.155)}Vn.invert=(0,Xn.g)(function(Jt){return 2*(0,c.MQ)(Jt)}),Wn.invert=function(Jt,en){return[-en,2*(0,c.MQ)((0,c.oN)(Jt))-c.or]}},27284:function(X,I,e){"use strict";e.d(I,{c:function(){return k}});var A=e(64528);function k(o,T){var b=o[0]*A.qw,p=o[1]*A.qw,s=T[0]*A.qw,t=T[1]*A.qw,i=(0,A.W8)(p),n=(0,A.g$)(p),r=(0,A.W8)(t),a=(0,A.g$)(t),l=i*(0,A.W8)(b),c=i*(0,A.g$)(b),h=r*(0,A.W8)(s),u=r*(0,A.g$)(s),x=2*(0,A.qR)((0,A._I)((0,A.SD)(t-p)+i*r*(0,A.SD)(s-b))),d=(0,A.g$)(x),m=x?function(g){var y=(0,A.g$)(g*=x)/d,v=(0,A.g$)(x-g)/d,_=v*l+y*h,f=v*c+y*u,S=v*n+y*a;return[(0,A.WE)(f,_)*A.oh,(0,A.WE)(S,(0,A._I)(_*_+f*f))*A.oh]}:function(){return[b*A.oh,p*A.oh]};return m.distance=x,m}},64528:function(X,I,e){"use strict";e.d(I,{Gg:function(){return A},Km:function(){return l},MQ:function(){return n},SD:function(){return _},W8:function(){return a},WE:function(){return r},Yz:function(){return h},_I:function(){return m},a2:function(){return i},a6:function(){return g},a8:function(){return k},g$:function(){return x},g3:function(){return u},kD:function(){return p},kq:function(){return d},mE:function(){return y},oN:function(){return c},oh:function(){return s},or:function(){return T},pi:function(){return o},qR:function(){return v},qw:function(){return t},wL:function(){return b}});var A=1e-6,k=1e-12,o=Math.PI,T=o/2,b=o/4,p=2*o,s=180/o,t=o/180,i=Math.abs,n=Math.atan,r=Math.atan2,a=Math.cos,l=Math.ceil,c=Math.exp,h=Math.log,u=Math.pow,x=Math.sin,d=Math.sign||function(f){return f>0?1:f<0?-1:0},m=Math.sqrt,g=Math.tan;function y(f){return f>1?0:f<-1?o:Math.acos(f)}function v(f){return f>1?T:f<-1?-T:Math.asin(f)}function _(f){return(f=x(f/2))*f}},70932:function(X,I,e){"use strict";function A(){}e.d(I,{c:function(){return A}})},73784:function(X,I,e){"use strict";var A=e(70932),k=1/0,o=k,T=-k,b=T,p={point:function(s,t){s<k&&(k=s),s>T&&(T=s),t<o&&(o=t),t>b&&(b=t)},lineStart:A.c,lineEnd:A.c,polygonStart:A.c,polygonEnd:A.c,result:function(){var s=[[k,o],[T,b]];return T=b=-(o=k=1/0),s}};I.c=p},41860:function(X,I,e){"use strict";e.d(I,{c:function(){return k}});var A=e(64528);function k(o,T){return(0,A.a2)(o[0]-T[0])<A.Gg&&(0,A.a2)(o[1]-T[1])<A.Gg}},58196:function(X,I,e){"use strict";e.d(I,{c:function(){return p}});var A=e(88728),k=e(84220),o=e(64528),T=(0,A.c)();function b(s){return(0,o.a2)(s[0])<=o.pi?s[0]:(0,o.kq)(s[0])*(((0,o.a2)(s[0])+o.pi)%o.kD-o.pi)}function p(s,t){var i=b(t),n=t[1],r=(0,o.g$)(n),a=[(0,o.g$)(i),-(0,o.W8)(i),0],l=0,c=0;T.reset(),r===1?n=o.or+o.Gg:r===-1&&(n=-o.or-o.Gg);for(var h=0,u=s.length;h<u;++h)if(d=(x=s[h]).length)for(var x,d,m=x[d-1],g=b(m),y=m[1]/2+o.wL,v=(0,o.g$)(y),_=(0,o.W8)(y),f=0;f<d;++f,g=w,v=P,_=C,m=S){var S=x[f],w=b(S),E=S[1]/2+o.wL,P=(0,o.g$)(E),C=(0,o.W8)(E),O=w-g,R=O>=0?1:-1,U=R*O,D=U>o.pi,N=v*P;if(T.add((0,o.WE)(N*R*(0,o.g$)(U),_*C+N*(0,o.W8)(U))),l+=D?O+R*o.kD:O,D^g>=i^w>=i){var W=(0,k.CW)((0,k.ux)(m),(0,k.ux)(S));(0,k.cJ)(W);var F=(0,k.CW)(a,W);(0,k.cJ)(F);var j=(D^O>=0?-1:1)*(0,o.qR)(F[2]);(n>j||n===j&&(W[0]||W[1]))&&(c+=D^O>=0?1:-1)}}return(l<-o.Gg||l<o.Gg&&T<-o.Gg)^1&c}},62280:function(X,I,e){"use strict";e.d(I,{a:function(){return k},g:function(){return o}});var A=e(64528);function k(T){return function(b,p){var s=(0,A.W8)(b),t=(0,A.W8)(p),i=T(s*t);return[i*t*(0,A.g$)(b),i*(0,A.g$)(p)]}}function o(T){return function(b,p){var s=(0,A._I)(b*b+p*p),t=T(s),i=(0,A.g$)(t),n=(0,A.W8)(t);return[(0,A.WE)(b*i,s*n),(0,A.qR)(s&&p*i/s)]}}},54724:function(X,I,e){"use strict";e.d(I,{c:function(){return b},y:function(){return T}});var A=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(0,A._I)(2/(1+p))});function b(){return(0,o.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return 2*(0,A.qR)(p/2)})},69020:function(X,I,e){"use strict";e.d(I,{O:function(){return T},c:function(){return b}});var A=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(p){return(p=(0,A.mE)(p))&&p/(0,A.g$)(p)});function b(){return(0,o.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.g)(function(p){return p})},69604:function(X,I,e){"use strict";e.d(I,{c:function(){return o},u:function(){return k}});var A=e(87952);function k(T,b){return[T,b]}function o(){return(0,A.c)(k).scale(152.63)}k.invert=k},86420:function(X,I,e){"use strict";e.d(I,{OW:function(){return s},QX:function(){return T},Qx:function(){return p},UV:function(){return b}});var A=e(16016),k=e(73784);function o(t,i,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),(0,A.c)(n,t.stream(k.c)),i(k.c.result()),r!=null&&t.clipExtent(r),t}function T(t,i,n){return o(t,function(r){var a=i[1][0]-i[0][0],l=i[1][1]-i[0][1],c=Math.min(a/(r[1][0]-r[0][0]),l/(r[1][1]-r[0][1])),h=+i[0][0]+(a-c*(r[1][0]+r[0][0]))/2,u=+i[0][1]+(l-c*(r[1][1]+r[0][1]))/2;t.scale(150*c).translate([h,u])},n)}function b(t,i,n){return T(t,[[0,0],i],n)}function p(t,i,n){return o(t,function(r){var a=+i,l=a/(r[1][0]-r[0][0]),c=(a-l*(r[1][0]+r[0][0]))/2,h=-l*r[0][1];t.scale(150*l).translate([c,h])},n)}function s(t,i,n){return o(t,function(r){var a=+i,l=a/(r[1][1]-r[0][1]),c=-l*r[0][0],h=(a-l*(r[1][1]+r[0][1]))/2;t.scale(150*l).translate([c,h])},n)}},53285:function(X,I,e){"use strict";e.d(I,{Y:function(){return T},c:function(){return b}});var A=e(64528),k=e(62280),o=e(87952);function T(p,s){var t=(0,A.W8)(s),i=(0,A.W8)(p)*t;return[t*(0,A.g$)(p)/i,(0,A.g$)(s)/i]}function b(){return(0,o.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.g)(A.MQ)},87952:function(X,I,e){"use strict";e.d(I,{c:function(){return x},U:function(){return d}});var A=e(78284),k=e(2728),o=e(21676),T=e(68120),b=e(7376),p=e(64528),s=e(92992),t=e(15196),i=e(86420),n=e(84220),r=16,a=(0,p.W8)(30*p.qw);function l(m,g){return+g?function(y,v){function _(f,S,w,E,P,C,O,R,U,D,N,W,F,j){var q=O-f,te=R-S,ee=q*q+te*te;if(ee>4*v&&F--){var Q=E+D,J=P+N,K=C+W,Y=(0,p._I)(Q*Q+J*J+K*K),ie=(0,p.qR)(K/=Y),se=(0,p.a2)((0,p.a2)(K)-1)<p.Gg||(0,p.a2)(w-U)<p.Gg?(w+U)/2:(0,p.WE)(J,Q),ae=y(se,ie),ue=ae[0],ve=ae[1],ye=ue-f,de=ve-S,pe=te*ye-q*de;(pe*pe/ee>v||(0,p.a2)((q*ye+te*de)/ee-.5)>.3||E*D+P*N+C*W<a)&&(_(f,S,w,E,P,C,ue,ve,se,Q/=Y,J/=Y,K,F,j),j.point(ue,ve),_(ue,ve,se,Q,J,K,O,R,U,D,N,W,F,j))}}return function(f){var S,w,E,P,C,O,R,U,D,N,W,F,j={point:q,lineStart:te,lineEnd:Q,polygonStart:function(){f.polygonStart(),j.lineStart=J},polygonEnd:function(){f.polygonEnd(),j.lineStart=te}};function q(ie,se){ie=y(ie,se),f.point(ie[0],ie[1])}function te(){U=NaN,j.point=ee,f.lineStart()}function ee(ie,se){var ae=(0,n.ux)([ie,se]),ue=y(ie,se);_(U,D,R,N,W,F,U=ue[0],D=ue[1],R=ie,N=ae[0],W=ae[1],F=ae[2],r,f),f.point(U,D)}function Q(){j.point=q,f.lineEnd()}function J(){te(),j.point=K,j.lineEnd=Y}function K(ie,se){ee(S=ie,se),w=U,E=D,P=N,C=W,O=F,j.point=ee}function Y(){_(U,D,R,N,W,F,w,E,S,P,C,O,r,f),j.lineEnd=Q,Q()}return j}}(m,g):function(y){return(0,t.s)({point:function(v,_){v=y(v,_),this.stream.point(v[0],v[1])}})}(m)}var c=(0,t.s)({point:function(m,g){this.stream.point(m*p.qw,g*p.qw)}});function h(m,g,y,v,_){function f(S,w){return[g+m*(S*=v),y-m*(w*=_)]}return f.invert=function(S,w){return[(S-g)/m*v,(y-w)/m*_]},f}function u(m,g,y,v,_,f){var S=(0,p.W8)(f),w=(0,p.g$)(f),E=S*m,P=w*m,C=S/m,O=w/m,R=(w*y-S*g)/m,U=(w*g+S*y)/m;function D(N,W){return[E*(N*=v)-P*(W*=_)+g,y-P*N-E*W]}return D.invert=function(N,W){return[v*(C*N-O*W+R),_*(U-O*N-C*W)]},D}function x(m){return d(function(){return m})()}function d(m){var g,y,v,_,f,S,w,E,P,C,O=150,R=480,U=250,D=0,N=0,W=0,F=0,j=0,q=0,te=1,ee=1,Q=null,J=A.c,K=null,Y=b.c,ie=.5;function se(ye){return E(ye[0]*p.qw,ye[1]*p.qw)}function ae(ye){return(ye=E.invert(ye[0],ye[1]))&&[ye[0]*p.oh,ye[1]*p.oh]}function ue(){var ye=u(O,0,0,te,ee,q).apply(null,g(D,N)),de=(q?u:h)(O,R-ye[0],U-ye[1],te,ee,q);return y=(0,s.O)(W,F,j),w=(0,T.c)(g,de),E=(0,T.c)(y,w),S=l(w,ie),ve()}function ve(){return P=C=null,se}return se.stream=function(ye){return P&&C===ye?P:P=c(function(de){return(0,t.s)({point:function(pe,ge){var ke=de(pe,ge);return this.stream.point(ke[0],ke[1])}})}(y)(J(S(Y(C=ye)))))},se.preclip=function(ye){return arguments.length?(J=ye,Q=void 0,ve()):J},se.postclip=function(ye){return arguments.length?(Y=ye,K=v=_=f=null,ve()):Y},se.clipAngle=function(ye){return arguments.length?(J=+ye?(0,k.c)(Q=ye*p.qw):(Q=null,A.c),ve()):Q*p.oh},se.clipExtent=function(ye){return arguments.length?(Y=ye==null?(K=v=_=f=null,b.c):(0,o.c)(K=+ye[0][0],v=+ye[0][1],_=+ye[1][0],f=+ye[1][1]),ve()):K==null?null:[[K,v],[_,f]]},se.scale=function(ye){return arguments.length?(O=+ye,ue()):O},se.translate=function(ye){return arguments.length?(R=+ye[0],U=+ye[1],ue()):[R,U]},se.center=function(ye){return arguments.length?(D=ye[0]%360*p.qw,N=ye[1]%360*p.qw,ue()):[D*p.oh,N*p.oh]},se.rotate=function(ye){return arguments.length?(W=ye[0]%360*p.qw,F=ye[1]%360*p.qw,j=ye.length>2?ye[2]%360*p.qw:0,ue()):[W*p.oh,F*p.oh,j*p.oh]},se.angle=function(ye){return arguments.length?(q=ye%360*p.qw,ue()):q*p.oh},se.reflectX=function(ye){return arguments.length?(te=ye?-1:1,ue()):te<0},se.reflectY=function(ye){return arguments.length?(ee=ye?-1:1,ue()):ee<0},se.precision=function(ye){return arguments.length?(S=l(w,ie=ye*ye),ve()):(0,p._I)(ie)},se.fitExtent=function(ye,de){return(0,i.QX)(se,ye,de)},se.fitSize=function(ye,de){return(0,i.UV)(se,ye,de)},se.fitWidth=function(ye,de){return(0,i.Qx)(se,ye,de)},se.fitHeight=function(ye,de){return(0,i.OW)(se,ye,de)},function(){return g=m.apply(this,arguments),se.invert=g.invert&&ae,ue()}}},47984:function(X,I,e){"use strict";e.d(I,{c:function(){return T},g:function(){return o}});var A=e(87952),k=e(64528);function o(b,p){var s=p*p,t=s*s;return[b*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),p*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,A.c)(o).scale(175.295)}o.invert=function(b,p){var s,t=p,i=25;do{var n=t*t,r=n*n;t-=s=(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))-p)/(1.007226+n*(.045255+r*(.259866*n-.311325-.06507600000000001*r)))}while((0,k.a2)(s)>k.Gg&&--i>0);return[b/(.8707+(n=t*t)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),t]}},4888:function(X,I,e){"use strict";e.d(I,{c:function(){return b},t:function(){return T}});var A=e(64528),k=e(62280),o=e(87952);function T(p,s){return[(0,A.W8)(s)*(0,A.g$)(p),(0,A.g$)(s)]}function b(){return(0,o.c)(T).scale(249.5).clipAngle(90+A.Gg)}T.invert=(0,k.g)(A.qR)},92992:function(X,I,e){"use strict";e.d(I,{O:function(){return T},c:function(){return t}});var A=e(68120),k=e(64528);function o(i,n){return[(0,k.a2)(i)>k.pi?i+Math.round(-i/k.kD)*k.kD:i,n]}function T(i,n,r){return(i%=k.kD)?n||r?(0,A.c)(p(i),s(n,r)):p(i):n||r?s(n,r):o}function b(i){return function(n,r){return[(n+=i)>k.pi?n-k.kD:n<-k.pi?n+k.kD:n,r]}}function p(i){var n=b(i);return n.invert=b(-i),n}function s(i,n){var r=(0,k.W8)(i),a=(0,k.g$)(i),l=(0,k.W8)(n),c=(0,k.g$)(n);function h(u,x){var d=(0,k.W8)(x),m=(0,k.W8)(u)*d,g=(0,k.g$)(u)*d,y=(0,k.g$)(x),v=y*r+m*a;return[(0,k.WE)(g*l-v*c,m*r-y*a),(0,k.qR)(v*l+g*c)]}return h.invert=function(u,x){var d=(0,k.W8)(x),m=(0,k.W8)(u)*d,g=(0,k.g$)(u)*d,y=(0,k.g$)(x),v=y*l-g*c;return[(0,k.WE)(g*l+y*c,m*r+v*a),(0,k.qR)(v*r-m*a)]},h}function t(i){function n(r){return(r=i(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r}return i=T(i[0]*k.qw,i[1]*k.qw,i.length>2?i[2]*k.qw:0),n.invert=function(r){return(r=i.invert(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r},n}o.invert=o},16016:function(X,I,e){"use strict";function A(s,t){s&&o.hasOwnProperty(s.type)&&o[s.type](s,t)}e.d(I,{c:function(){return p}});var k={Feature:function(s,t){A(s.geometry,t)},FeatureCollection:function(s,t){for(var i=s.features,n=-1,r=i.length;++n<r;)A(i[n].geometry,t)}},o={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var i=s.coordinates,n=-1,r=i.length;++n<r;)s=i[n],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var i=s.coordinates,n=-1,r=i.length;++n<r;)T(i[n],t,0)},Polygon:function(s,t){b(s.coordinates,t)},MultiPolygon:function(s,t){for(var i=s.coordinates,n=-1,r=i.length;++n<r;)b(i[n],t)},GeometryCollection:function(s,t){for(var i=s.geometries,n=-1,r=i.length;++n<r;)A(i[n],t)}};function T(s,t,i){var n,r=-1,a=s.length-i;for(t.lineStart();++r<a;)n=s[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function b(s,t){var i=-1,n=s.length;for(t.polygonStart();++i<n;)T(s[i],t,1);t.polygonEnd()}function p(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):A(s,t)}},15196:function(X,I,e){"use strict";function A(T){return{stream:k(T)}}function k(T){return function(b){var p=new o;for(var s in T)p[s]=T[s];return p.stream=b,p}}function o(){}e.d(I,{c:function(){return A},s:function(){return k}}),o.prototype={constructor:o,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(X,I,e){"use strict";function A(re,fe){return re.parent===fe.parent?1:2}function k(re,fe){return re+fe.x}function o(re,fe){return Math.max(re,fe.y)}function T(){var re=A,fe=1,Se=1,be=!1;function we(Me){var Ie,Oe=0;Me.eachAfter(function(Le){var Be=Le.children;Be?(Le.x=function(Ve){return Ve.reduce(k,0)/Ve.length}(Be),Le.y=function(Ve){return 1+Ve.reduce(o,0)}(Be)):(Le.x=Ie?Oe+=re(Le,Ie):0,Le.y=0,Ie=Le)});var he=function(Le){for(var Be;Be=Le.children;)Le=Be[0];return Le}(Me),_e=function(Le){for(var Be;Be=Le.children;)Le=Be[Be.length-1];return Le}(Me),Ae=he.x-re(he,_e)/2,De=_e.x+re(_e,he)/2;return Me.eachAfter(be?function(Le){Le.x=(Le.x-Me.x)*fe,Le.y=(Me.y-Le.y)*Se}:function(Le){Le.x=(Le.x-Ae)/(De-Ae)*fe,Le.y=(1-(Me.y?Le.y/Me.y:1))*Se})}return we.separation=function(Me){return arguments.length?(re=Me,we):re},we.size=function(Me){return arguments.length?(be=!1,fe=+Me[0],Se=+Me[1],we):be?null:[fe,Se]},we.nodeSize=function(Me){return arguments.length?(be=!0,fe=+Me[0],Se=+Me[1],we):be?[fe,Se]:null},we}function b(re){var fe=0,Se=re.children,be=Se&&Se.length;if(be)for(;--be>=0;)fe+=Se[be].value;else fe=1;re.value=fe}function p(re,fe){var Se,be,we,Me,Ie,Oe=new n(re),he=+re.value&&(Oe.value=re.value),_e=[Oe];for(fe==null&&(fe=s);Se=_e.pop();)if(he&&(Se.value=+Se.data.value),(we=fe(Se.data))&&(Ie=we.length))for(Se.children=new Array(Ie),Me=Ie-1;Me>=0;--Me)_e.push(be=Se.children[Me]=new n(we[Me])),be.parent=Se,be.depth=Se.depth+1;return Oe.eachBefore(i)}function s(re){return re.children}function t(re){re.data=re.data.data}function i(re){var fe=0;do re.height=fe;while((re=re.parent)&&re.height<++fe)}function n(re){this.data=re,this.depth=this.height=0,this.parent=null}e.r(I),e.d(I,{cluster:function(){return T},hierarchy:function(){return p},pack:function(){return O},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return J},tree:function(){return ve},treemap:function(){return ke},treemapBinary:function(){return Ee},treemapDice:function(){return W},treemapResquarify:function(){return oe},treemapSlice:function(){return ye},treemapSliceDice:function(){return me},treemapSquarify:function(){return ge}}),n.prototype=p.prototype={constructor:n,count:function(){return this.eachAfter(b)},each:function(re){var fe,Se,be,we,Me=this,Ie=[Me];do for(fe=Ie.reverse(),Ie=[];Me=fe.pop();)if(re(Me),Se=Me.children)for(be=0,we=Se.length;be<we;++be)Ie.push(Se[be]);while(Ie.length);return this},eachAfter:function(re){for(var fe,Se,be,we=this,Me=[we],Ie=[];we=Me.pop();)if(Ie.push(we),fe=we.children)for(Se=0,be=fe.length;Se<be;++Se)Me.push(fe[Se]);for(;we=Ie.pop();)re(we);return this},eachBefore:function(re){for(var fe,Se,be=this,we=[be];be=we.pop();)if(re(be),fe=be.children)for(Se=fe.length-1;Se>=0;--Se)we.push(fe[Se]);return this},sum:function(re){return this.eachAfter(function(fe){for(var Se=+re(fe.data)||0,be=fe.children,we=be&&be.length;--we>=0;)Se+=be[we].value;fe.value=Se})},sort:function(re){return this.eachBefore(function(fe){fe.children&&fe.children.sort(re)})},path:function(re){for(var fe=this,Se=function(Me,Ie){if(Me===Ie)return Me;var Oe=Me.ancestors(),he=Ie.ancestors(),_e=null;for(Me=Oe.pop(),Ie=he.pop();Me===Ie;)_e=Me,Me=Oe.pop(),Ie=he.pop();return _e}(fe,re),be=[fe];fe!==Se;)fe=fe.parent,be.push(fe);for(var we=be.length;re!==Se;)be.splice(we,0,re),re=re.parent;return be},ancestors:function(){for(var re=this,fe=[re];re=re.parent;)fe.push(re);return fe},descendants:function(){var re=[];return this.each(function(fe){re.push(fe)}),re},leaves:function(){var re=[];return this.eachBefore(function(fe){fe.children||re.push(fe)}),re},links:function(){var re=this,fe=[];return re.each(function(Se){Se!==re&&fe.push({source:Se.parent,target:Se})}),fe},copy:function(){return p(this).eachBefore(t)}};var r=Array.prototype.slice;function a(re){for(var fe,Se,be=0,we=(re=function(Ie){for(var Oe,he,_e=Ie.length;_e;)he=Math.random()*_e--|0,Oe=Ie[_e],Ie[_e]=Ie[he],Ie[he]=Oe;return Ie}(r.call(re))).length,Me=[];be<we;)fe=re[be],Se&&h(Se,fe)?++be:(Se=x(Me=l(Me,fe)),be=0);return Se}function l(re,fe){var Se,be;if(u(fe,re))return[fe];for(Se=0;Se<re.length;++Se)if(c(fe,re[Se])&&u(d(re[Se],fe),re))return[re[Se],fe];for(Se=0;Se<re.length-1;++Se)for(be=Se+1;be<re.length;++be)if(c(d(re[Se],re[be]),fe)&&c(d(re[Se],fe),re[be])&&c(d(re[be],fe),re[Se])&&u(m(re[Se],re[be],fe),re))return[re[Se],re[be],fe];throw new Error}function c(re,fe){var Se=re.r-fe.r,be=fe.x-re.x,we=fe.y-re.y;return Se<0||Se*Se<be*be+we*we}function h(re,fe){var Se=re.r-fe.r+1e-6,be=fe.x-re.x,we=fe.y-re.y;return Se>0&&Se*Se>be*be+we*we}function u(re,fe){for(var Se=0;Se<fe.length;++Se)if(!h(re,fe[Se]))return!1;return!0}function x(re){switch(re.length){case 1:return{x:(fe=re[0]).x,y:fe.y,r:fe.r};case 2:return d(re[0],re[1]);case 3:return m(re[0],re[1],re[2])}var fe}function d(re,fe){var Se=re.x,be=re.y,we=re.r,Me=fe.x,Ie=fe.y,Oe=fe.r,he=Me-Se,_e=Ie-be,Ae=Oe-we,De=Math.sqrt(he*he+_e*_e);return{x:(Se+Me+he/De*Ae)/2,y:(be+Ie+_e/De*Ae)/2,r:(De+we+Oe)/2}}function m(re,fe,Se){var be=re.x,we=re.y,Me=re.r,Ie=fe.x,Oe=fe.y,he=fe.r,_e=Se.x,Ae=Se.y,De=Se.r,Le=be-Ie,Be=be-_e,Ve=we-Oe,Ze=we-Ae,rt=he-Me,it=De-Me,dt=be*be+we*we-Me*Me,mt=dt-Ie*Ie-Oe*Oe+he*he,ht=dt-_e*_e-Ae*Ae+De*De,Qe=Be*Ve-Le*Ze,Je=(Ve*ht-Ze*mt)/(2*Qe)-be,wt=(Ze*rt-Ve*it)/Qe,Pt=(Be*mt-Le*ht)/(2*Qe)-we,It=(Le*it-Be*rt)/Qe,At=wt*wt+It*It-1,qe=2*(Me+Je*wt+Pt*It),Ye=Je*Je+Pt*Pt-Me*Me,Ne=-(At?(qe+Math.sqrt(qe*qe-4*At*Ye))/(2*At):Ye/qe);return{x:be+Je+wt*Ne,y:we+Pt+It*Ne,r:Ne}}function g(re,fe,Se){var be,we,Me,Ie,Oe=re.x-fe.x,he=re.y-fe.y,_e=Oe*Oe+he*he;_e?(we=fe.r+Se.r,we*=we,Ie=re.r+Se.r,we>(Ie*=Ie)?(be=(_e+Ie-we)/(2*_e),Me=Math.sqrt(Math.max(0,Ie/_e-be*be)),Se.x=re.x-be*Oe-Me*he,Se.y=re.y-be*he+Me*Oe):(be=(_e+we-Ie)/(2*_e),Me=Math.sqrt(Math.max(0,we/_e-be*be)),Se.x=fe.x+be*Oe-Me*he,Se.y=fe.y+be*he+Me*Oe)):(Se.x=fe.x+Se.r,Se.y=fe.y)}function y(re,fe){var Se=re.r+fe.r-1e-6,be=fe.x-re.x,we=fe.y-re.y;return Se>0&&Se*Se>be*be+we*we}function v(re){var fe=re._,Se=re.next._,be=fe.r+Se.r,we=(fe.x*Se.r+Se.x*fe.r)/be,Me=(fe.y*Se.r+Se.y*fe.r)/be;return we*we+Me*Me}function _(re){this._=re,this.next=null,this.previous=null}function f(re){if(!(we=re.length))return 0;var fe,Se,be,we,Me,Ie,Oe,he,_e,Ae,De;if((fe=re[0]).x=0,fe.y=0,!(we>1))return fe.r;if(Se=re[1],fe.x=-Se.r,Se.x=fe.r,Se.y=0,!(we>2))return fe.r+Se.r;g(Se,fe,be=re[2]),fe=new _(fe),Se=new _(Se),be=new _(be),fe.next=be.previous=Se,Se.next=fe.previous=be,be.next=Se.previous=fe;e:for(Oe=3;Oe<we;++Oe){g(fe._,Se._,be=re[Oe]),be=new _(be),he=Se.next,_e=fe.previous,Ae=Se._.r,De=fe._.r;do if(Ae<=De){if(y(he._,be._)){Se=he,fe.next=Se,Se.previous=fe,--Oe;continue e}Ae+=he._.r,he=he.next}else{if(y(_e._,be._)){(fe=_e).next=Se,Se.previous=fe,--Oe;continue e}De+=_e._.r,_e=_e.previous}while(he!==_e.next);for(be.previous=fe,be.next=Se,fe.next=Se.previous=Se=be,Me=v(fe);(be=be.next)!==Se;)(Ie=v(be))<Me&&(fe=be,Me=Ie);Se=fe.next}for(fe=[Se._],be=Se;(be=be.next)!==Se;)fe.push(be._);for(be=a(fe),Oe=0;Oe<we;++Oe)(fe=re[Oe]).x-=be.x,fe.y-=be.y;return be.r}function S(re){return f(re),re}function w(re){if(typeof re!="function")throw new Error;return re}function E(){return 0}function P(re){return function(){return re}}function C(re){return Math.sqrt(re.value)}function O(){var re=null,fe=1,Se=1,be=E;function we(Me){return Me.x=fe/2,Me.y=Se/2,re?Me.eachBefore(R(re)).eachAfter(U(be,.5)).eachBefore(D(1)):Me.eachBefore(R(C)).eachAfter(U(E,1)).eachAfter(U(be,Me.r/Math.min(fe,Se))).eachBefore(D(Math.min(fe,Se)/(2*Me.r))),Me}return we.radius=function(Me){return arguments.length?(re=(Ie=Me)==null?null:w(Ie),we):re;var Ie},we.size=function(Me){return arguments.length?(fe=+Me[0],Se=+Me[1],we):[fe,Se]},we.padding=function(Me){return arguments.length?(be=typeof Me=="function"?Me:P(+Me),we):be},we}function R(re){return function(fe){fe.children||(fe.r=Math.max(0,+re(fe)||0))}}function U(re,fe){return function(Se){if(be=Se.children){var be,we,Me,Ie=be.length,Oe=re(Se)*fe||0;if(Oe)for(we=0;we<Ie;++we)be[we].r+=Oe;if(Me=f(be),Oe)for(we=0;we<Ie;++we)be[we].r-=Oe;Se.r=Me+Oe}}}function D(re){return function(fe){var Se=fe.parent;fe.r*=re,Se&&(fe.x=Se.x+re*fe.x,fe.y=Se.y+re*fe.y)}}function N(re){re.x0=Math.round(re.x0),re.y0=Math.round(re.y0),re.x1=Math.round(re.x1),re.y1=Math.round(re.y1)}function W(re,fe,Se,be,we){for(var Me,Ie=re.children,Oe=-1,he=Ie.length,_e=re.value&&(be-fe)/re.value;++Oe<he;)(Me=Ie[Oe]).y0=Se,Me.y1=we,Me.x0=fe,Me.x1=fe+=Me.value*_e}function F(){var re=1,fe=1,Se=0,be=!1;function we(Me){var Ie=Me.height+1;return Me.x0=Me.y0=Se,Me.x1=re,Me.y1=fe/Ie,Me.eachBefore(function(Oe,he){return function(_e){_e.children&&W(_e,_e.x0,Oe*(_e.depth+1)/he,_e.x1,Oe*(_e.depth+2)/he);var Ae=_e.x0,De=_e.y0,Le=_e.x1-Se,Be=_e.y1-Se;Le<Ae&&(Ae=Le=(Ae+Le)/2),Be<De&&(De=Be=(De+Be)/2),_e.x0=Ae,_e.y0=De,_e.x1=Le,_e.y1=Be}}(fe,Ie)),be&&Me.eachBefore(N),Me}return we.round=function(Me){return arguments.length?(be=!!Me,we):be},we.size=function(Me){return arguments.length?(re=+Me[0],fe=+Me[1],we):[re,fe]},we.padding=function(Me){return arguments.length?(Se=+Me,we):Se},we}var j="$",q={depth:-1},te={};function ee(re){return re.id}function Q(re){return re.parentId}function J(){var re=ee,fe=Q;function Se(be){var we,Me,Ie,Oe,he,_e,Ae,De=be.length,Le=new Array(De),Be={};for(Me=0;Me<De;++Me)we=be[Me],he=Le[Me]=new n(we),(_e=re(we,Me,be))!=null&&(_e+="")&&(Be[Ae=j+(he.id=_e)]=Ae in Be?te:he);for(Me=0;Me<De;++Me)if(he=Le[Me],(_e=fe(be[Me],Me,be))!=null&&(_e+="")){if(!(Oe=Be[j+_e]))throw new Error("missing: "+_e);if(Oe===te)throw new Error("ambiguous: "+_e);Oe.children?Oe.children.push(he):Oe.children=[he],he.parent=Oe}else{if(Ie)throw new Error("multiple roots");Ie=he}if(!Ie)throw new Error("no root");if(Ie.parent=q,Ie.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--De}).eachBefore(i),Ie.parent=null,De>0)throw new Error("cycle");return Ie}return Se.id=function(be){return arguments.length?(re=w(be),Se):re},Se.parentId=function(be){return arguments.length?(fe=w(be),Se):fe},Se}function K(re,fe){return re.parent===fe.parent?1:2}function Y(re){var fe=re.children;return fe?fe[0]:re.t}function ie(re){var fe=re.children;return fe?fe[fe.length-1]:re.t}function se(re,fe,Se){var be=Se/(fe.i-re.i);fe.c-=be,fe.s+=Se,re.c+=be,fe.z+=Se,fe.m+=Se}function ae(re,fe,Se){return re.a.parent===fe.parent?re.a:Se}function ue(re,fe){this._=re,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=fe}function ve(){var re=K,fe=1,Se=1,be=null;function we(he){var _e=function(it){for(var dt,mt,ht,Qe,Je,wt=new ue(it,0),Pt=[wt];dt=Pt.pop();)if(ht=dt._.children)for(dt.children=new Array(Je=ht.length),Qe=Je-1;Qe>=0;--Qe)Pt.push(mt=dt.children[Qe]=new ue(ht[Qe],Qe)),mt.parent=dt;return(wt.parent=new ue(null,0)).children=[wt],wt}(he);if(_e.eachAfter(Me),_e.parent.m=-_e.z,_e.eachBefore(Ie),be)he.eachBefore(Oe);else{var Ae=he,De=he,Le=he;he.eachBefore(function(it){it.x<Ae.x&&(Ae=it),it.x>De.x&&(De=it),it.depth>Le.depth&&(Le=it)});var Be=Ae===De?1:re(Ae,De)/2,Ve=Be-Ae.x,Ze=fe/(De.x+Be+Ve),rt=Se/(Le.depth||1);he.eachBefore(function(it){it.x=(it.x+Ve)*Ze,it.y=it.depth*rt})}return he}function Me(he){var _e=he.children,Ae=he.parent.children,De=he.i?Ae[he.i-1]:null;if(_e){(function(Be){for(var Ve,Ze=0,rt=0,it=Be.children,dt=it.length;--dt>=0;)(Ve=it[dt]).z+=Ze,Ve.m+=Ze,Ze+=Ve.s+(rt+=Ve.c)})(he);var Le=(_e[0].z+_e[_e.length-1].z)/2;De?(he.z=De.z+re(he._,De._),he.m=he.z-Le):he.z=Le}else De&&(he.z=De.z+re(he._,De._));he.parent.A=function(Be,Ve,Ze){if(Ve){for(var rt,it=Be,dt=Be,mt=Ve,ht=it.parent.children[0],Qe=it.m,Je=dt.m,wt=mt.m,Pt=ht.m;mt=ie(mt),it=Y(it),mt&&it;)ht=Y(ht),(dt=ie(dt)).a=Be,(rt=mt.z+wt-it.z-Qe+re(mt._,it._))>0&&(se(ae(mt,Be,Ze),Be,rt),Qe+=rt,Je+=rt),wt+=mt.m,Qe+=it.m,Pt+=ht.m,Je+=dt.m;mt&&!ie(dt)&&(dt.t=mt,dt.m+=wt-Je),it&&!Y(ht)&&(ht.t=it,ht.m+=Qe-Pt,Ze=Be)}return Ze}(he,De,he.parent.A||Ae[0])}function Ie(he){he._.x=he.z+he.parent.m,he.m+=he.parent.m}function Oe(he){he.x*=fe,he.y=he.depth*Se}return we.separation=function(he){return arguments.length?(re=he,we):re},we.size=function(he){return arguments.length?(be=!1,fe=+he[0],Se=+he[1],we):be?null:[fe,Se]},we.nodeSize=function(he){return arguments.length?(be=!0,fe=+he[0],Se=+he[1],we):be?[fe,Se]:null},we}function ye(re,fe,Se,be,we){for(var Me,Ie=re.children,Oe=-1,he=Ie.length,_e=re.value&&(we-Se)/re.value;++Oe<he;)(Me=Ie[Oe]).x0=fe,Me.x1=be,Me.y0=Se,Me.y1=Se+=Me.value*_e}ue.prototype=Object.create(n.prototype);var de=(1+Math.sqrt(5))/2;function pe(re,fe,Se,be,we,Me){for(var Ie,Oe,he,_e,Ae,De,Le,Be,Ve,Ze,rt,it=[],dt=fe.children,mt=0,ht=0,Qe=dt.length,Je=fe.value;mt<Qe;){he=we-Se,_e=Me-be;do Ae=dt[ht++].value;while(!Ae&&ht<Qe);for(De=Le=Ae,rt=Ae*Ae*(Ze=Math.max(_e/he,he/_e)/(Je*re)),Ve=Math.max(Le/rt,rt/De);ht<Qe;++ht){if(Ae+=Oe=dt[ht].value,Oe<De&&(De=Oe),Oe>Le&&(Le=Oe),rt=Ae*Ae*Ze,(Be=Math.max(Le/rt,rt/De))>Ve){Ae-=Oe;break}Ve=Be}it.push(Ie={value:Ae,dice:he<_e,children:dt.slice(mt,ht)}),Ie.dice?W(Ie,Se,be,we,Je?be+=_e*Ae/Je:Me):ye(Ie,Se,be,Je?Se+=he*Ae/Je:we,Me),Je-=Ae,mt=ht}return it}var ge=function re(fe){function Se(be,we,Me,Ie,Oe){pe(fe,be,we,Me,Ie,Oe)}return Se.ratio=function(be){return re((be=+be)>1?be:1)},Se}(de);function ke(){var re=ge,fe=!1,Se=1,be=1,we=[0],Me=E,Ie=E,Oe=E,he=E,_e=E;function Ae(Le){return Le.x0=Le.y0=0,Le.x1=Se,Le.y1=be,Le.eachBefore(De),we=[0],fe&&Le.eachBefore(N),Le}function De(Le){var Be=we[Le.depth],Ve=Le.x0+Be,Ze=Le.y0+Be,rt=Le.x1-Be,it=Le.y1-Be;rt<Ve&&(Ve=rt=(Ve+rt)/2),it<Ze&&(Ze=it=(Ze+it)/2),Le.x0=Ve,Le.y0=Ze,Le.x1=rt,Le.y1=it,Le.children&&(Be=we[Le.depth+1]=Me(Le)/2,Ve+=_e(Le)-Be,Ze+=Ie(Le)-Be,(rt-=Oe(Le)-Be)<Ve&&(Ve=rt=(Ve+rt)/2),(it-=he(Le)-Be)<Ze&&(Ze=it=(Ze+it)/2),re(Le,Ve,Ze,rt,it))}return Ae.round=function(Le){return arguments.length?(fe=!!Le,Ae):fe},Ae.size=function(Le){return arguments.length?(Se=+Le[0],be=+Le[1],Ae):[Se,be]},Ae.tile=function(Le){return arguments.length?(re=w(Le),Ae):re},Ae.padding=function(Le){return arguments.length?Ae.paddingInner(Le).paddingOuter(Le):Ae.paddingInner()},Ae.paddingInner=function(Le){return arguments.length?(Me=typeof Le=="function"?Le:P(+Le),Ae):Me},Ae.paddingOuter=function(Le){return arguments.length?Ae.paddingTop(Le).paddingRight(Le).paddingBottom(Le).paddingLeft(Le):Ae.paddingTop()},Ae.paddingTop=function(Le){return arguments.length?(Ie=typeof Le=="function"?Le:P(+Le),Ae):Ie},Ae.paddingRight=function(Le){return arguments.length?(Oe=typeof Le=="function"?Le:P(+Le),Ae):Oe},Ae.paddingBottom=function(Le){return arguments.length?(he=typeof Le=="function"?Le:P(+Le),Ae):he},Ae.paddingLeft=function(Le){return arguments.length?(_e=typeof Le=="function"?Le:P(+Le),Ae):_e},Ae}function Ee(re,fe,Se,be,we){var Me,Ie,Oe=re.children,he=Oe.length,_e=new Array(he+1);for(_e[0]=Ie=Me=0;Me<he;++Me)_e[Me+1]=Ie+=Oe[Me].value;(function Ae(De,Le,Be,Ve,Ze,rt,it){if(De>=Le-1){var dt=Oe[De];return dt.x0=Ve,dt.y0=Ze,dt.x1=rt,void(dt.y1=it)}for(var mt=_e[De],ht=Be/2+mt,Qe=De+1,Je=Le-1;Qe<Je;){var wt=Qe+Je>>>1;_e[wt]<ht?Qe=wt+1:Je=wt}ht-_e[Qe-1]<_e[Qe]-ht&&De+1<Qe&&--Qe;var Pt=_e[Qe]-mt,It=Be-Pt;if(rt-Ve>it-Ze){var At=(Ve*It+rt*Pt)/Be;Ae(De,Qe,Pt,Ve,Ze,At,it),Ae(Qe,Le,It,At,Ze,rt,it)}else{var qe=(Ze*It+it*Pt)/Be;Ae(De,Qe,Pt,Ve,Ze,rt,qe),Ae(Qe,Le,It,Ve,qe,rt,it)}})(0,he,re.value,fe,Se,be,we)}function me(re,fe,Se,be,we){(1&re.depth?ye:W)(re,fe,Se,be,we)}var oe=function re(fe){function Se(be,we,Me,Ie,Oe){if((he=be._squarify)&&he.ratio===fe)for(var he,_e,Ae,De,Le,Be=-1,Ve=he.length,Ze=be.value;++Be<Ve;){for(Ae=(_e=he[Be]).children,De=_e.value=0,Le=Ae.length;De<Le;++De)_e.value+=Ae[De].value;_e.dice?W(_e,we,Me,Ie,Me+=(Oe-Me)*_e.value/Ze):ye(_e,we,Me,we+=(Ie-we)*_e.value/Ze,Oe),Ze-=_e.value}else be._squarify=he=pe(fe,be,we,Me,Ie,Oe),he.ratio=fe}return Se.ratio=function(be){return re((be=+be)>1?be:1)},Se}(de)},10132:function(X,I,e){"use strict";e.d(I,{ak:function(){return h}});var A=Math.PI,k=2*A,o=1e-6,T=k-o;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new b}b.prototype=p.prototype={constructor:b,moveTo:function(u,x){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(u,x){this._+="L"+(this._x1=+u)+","+(this._y1=+x)},quadraticCurveTo:function(u,x,d,m){this._+="Q"+ +u+","+ +x+","+(this._x1=+d)+","+(this._y1=+m)},bezierCurveTo:function(u,x,d,m,g,y){this._+="C"+ +u+","+ +x+","+ +d+","+ +m+","+(this._x1=+g)+","+(this._y1=+y)},arcTo:function(u,x,d,m,g){u=+u,x=+x,d=+d,m=+m,g=+g;var y=this._x1,v=this._y1,_=d-u,f=m-x,S=y-u,w=v-x,E=S*S+w*w;if(g<0)throw new Error("negative radius: "+g);if(this._x1===null)this._+="M"+(this._x1=u)+","+(this._y1=x);else if(E>o)if(Math.abs(w*_-f*S)>o&&g){var P=d-y,C=m-v,O=_*_+f*f,R=P*P+C*C,U=Math.sqrt(O),D=Math.sqrt(E),N=g*Math.tan((A-Math.acos((O+E-R)/(2*U*D)))/2),W=N/D,F=N/U;Math.abs(W-1)>o&&(this._+="L"+(u+W*S)+","+(x+W*w)),this._+="A"+g+","+g+",0,0,"+ +(w*P>S*C)+","+(this._x1=u+F*_)+","+(this._y1=x+F*f)}else this._+="L"+(this._x1=u)+","+(this._y1=x)},arc:function(u,x,d,m,g,y){u=+u,x=+x,y=!!y;var v=(d=+d)*Math.cos(m),_=d*Math.sin(m),f=u+v,S=x+_,w=1^y,E=y?m-g:g-m;if(d<0)throw new Error("negative radius: "+d);this._x1===null?this._+="M"+f+","+S:(Math.abs(this._x1-f)>o||Math.abs(this._y1-S)>o)&&(this._+="L"+f+","+S),d&&(E<0&&(E=E%k+k),E>T?this._+="A"+d+","+d+",0,1,"+w+","+(u-v)+","+(x-_)+"A"+d+","+d+",0,1,"+w+","+(this._x1=f)+","+(this._y1=S):E>o&&(this._+="A"+d+","+d+",0,"+ +(E>=A)+","+w+","+(this._x1=u+d*Math.cos(g))+","+(this._y1=x+d*Math.sin(g))))},rect:function(u,x,d,m){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+x)+"h"+ +d+"v"+ +m+"h"+-d+"Z"},toString:function(){return this._}};var s=p,t=Array.prototype.slice;function i(u){return function(){return u}}function n(u){return u[0]}function r(u){return u[1]}function a(u){return u.source}function l(u){return u.target}function c(u,x,d,m,g){u.moveTo(x,d),u.bezierCurveTo(x=(x+m)/2,d,x,g,m,g)}function h(){return function(u){var x=a,d=l,m=n,g=r,y=null;function v(){var _,f=t.call(arguments),S=x.apply(this,f),w=d.apply(this,f);if(y||(y=_=s()),u(y,+m.apply(this,(f[0]=S,f)),+g.apply(this,f),+m.apply(this,(f[0]=w,f)),+g.apply(this,f)),_)return y=null,_+""||null}return v.source=function(_){return arguments.length?(x=_,v):x},v.target=function(_){return arguments.length?(d=_,v):d},v.x=function(_){return arguments.length?(m=typeof _=="function"?_:i(+_),v):m},v.y=function(_){return arguments.length?(g=typeof _=="function"?_:i(+_),v):g},v.context=function(_){return arguments.length?(y=_??null,v):y},v}(c)}},94336:function(X,I,e){"use strict";e.d(I,{Yn:function(){return a},m_:function(){return n},E9:function(){return l}});var A=e(8208),k=e(58931),o=e(46192),T=e(68936),b=e(32171),p=e(53528);function s(Qe){if(0<=Qe.y&&Qe.y<100){var Je=new Date(-1,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L);return Je.setFullYear(Qe.y),Je}return new Date(Qe.y,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L)}function t(Qe){if(0<=Qe.y&&Qe.y<100){var Je=new Date(Date.UTC(-1,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L));return Je.setUTCFullYear(Qe.y),Je}return new Date(Date.UTC(Qe.y,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L))}function i(Qe,Je,wt){return{y:Qe,m:Je,d:wt,H:0,M:0,S:0,L:0}}function n(Qe){var Je=Qe.dateTime,wt=Qe.date,Pt=Qe.time,It=Qe.periods,At=Qe.days,qe=Qe.shortDays,Ye=Qe.months,Ne=Qe.shortMonths,We=g(It),at=y(It),tt=g(At),Re=y(At),Fe=g(qe),nt=y(qe),Ge=g(Ye),ut=y(Ye),pt=g(Ne),gt=y(Ne),ct={a:function(Dt){return qe[Dt.getDay()]},A:function(Dt){return At[Dt.getDay()]},b:function(Dt){return Ne[Dt.getMonth()]},B:function(Dt){return Ye[Dt.getMonth()]},c:null,d:J,e:J,f:ae,H:K,I:Y,j:ie,L:se,m:ue,M:ve,p:function(Dt){return It[+(Dt.getHours()>=12)]},q:function(Dt){return 1+~~(Dt.getMonth()/3)},Q:mt,s:ht,S:ye,u:de,U:pe,V:ge,w:ke,W:Ee,x:null,X:null,y:me,Y:oe,Z:re,"%":dt},Tt={a:function(Dt){return qe[Dt.getUTCDay()]},A:function(Dt){return At[Dt.getUTCDay()]},b:function(Dt){return Ne[Dt.getUTCMonth()]},B:function(Dt){return Ye[Dt.getUTCMonth()]},c:null,d:fe,e:fe,f:Ie,H:Se,I:be,j:we,L:Me,m:Oe,M:he,p:function(Dt){return It[+(Dt.getUTCHours()>=12)]},q:function(Dt){return 1+~~(Dt.getUTCMonth()/3)},Q:mt,s:ht,S:_e,u:Ae,U:De,V:Le,w:Be,W:Ve,x:null,X:null,y:Ze,Y:rt,Z:it,"%":dt},vt={a:function(Dt,Gt,tn){var jt=Fe.exec(Gt.slice(tn));return jt?(Dt.w=nt[jt[0].toLowerCase()],tn+jt[0].length):-1},A:function(Dt,Gt,tn){var jt=tt.exec(Gt.slice(tn));return jt?(Dt.w=Re[jt[0].toLowerCase()],tn+jt[0].length):-1},b:function(Dt,Gt,tn){var jt=pt.exec(Gt.slice(tn));return jt?(Dt.m=gt[jt[0].toLowerCase()],tn+jt[0].length):-1},B:function(Dt,Gt,tn){var jt=Ge.exec(Gt.slice(tn));return jt?(Dt.m=ut[jt[0].toLowerCase()],tn+jt[0].length):-1},c:function(Dt,Gt,tn){return Ct(Dt,Je,Gt,tn)},d:U,e:U,f:q,H:N,I:N,j:D,L:j,m:R,M:W,p:function(Dt,Gt,tn){var jt=We.exec(Gt.slice(tn));return jt?(Dt.p=at[jt[0].toLowerCase()],tn+jt[0].length):-1},q:O,Q:ee,s:Q,S:F,u:_,U:f,V:S,w:v,W:w,x:function(Dt,Gt,tn){return Ct(Dt,wt,Gt,tn)},X:function(Dt,Gt,tn){return Ct(Dt,Pt,Gt,tn)},y:P,Y:E,Z:C,"%":te};function kt(Dt,Gt){return function(tn){var jt,Wt,Ft,Ln=[],bn=-1,hn=0,Kt=Dt.length;for(tn instanceof Date||(tn=new Date(+tn));++bn<Kt;)Dt.charCodeAt(bn)===37&&(Ln.push(Dt.slice(hn,bn)),(Wt=c[jt=Dt.charAt(++bn)])!=null?jt=Dt.charAt(++bn):Wt=jt==="e"?" ":"0",(Ft=Gt[jt])&&(jt=Ft(tn,Wt)),Ln.push(jt),hn=bn+1);return Ln.push(Dt.slice(hn,bn)),Ln.join("")}}function Lt(Dt,Gt){return function(tn){var jt,Wt,Ft=i(1900,void 0,1);if(Ct(Ft,Dt,tn+="",0)!=tn.length)return null;if("Q"in Ft)return new Date(Ft.Q);if("s"in Ft)return new Date(1e3*Ft.s+("L"in Ft?Ft.L:0));if(Gt&&!("Z"in Ft)&&(Ft.Z=0),"p"in Ft&&(Ft.H=Ft.H%12+12*Ft.p),Ft.m===void 0&&(Ft.m="q"in Ft?Ft.q:0),"V"in Ft){if(Ft.V<1||Ft.V>53)return null;"w"in Ft||(Ft.w=1),"Z"in Ft?(Wt=(jt=t(i(Ft.y,0,1))).getUTCDay(),jt=Wt>4||Wt===0?A.ot.ceil(jt):(0,A.ot)(jt),jt=k.c.offset(jt,7*(Ft.V-1)),Ft.y=jt.getUTCFullYear(),Ft.m=jt.getUTCMonth(),Ft.d=jt.getUTCDate()+(Ft.w+6)%7):(Wt=(jt=s(i(Ft.y,0,1))).getDay(),jt=Wt>4||Wt===0?o.qT.ceil(jt):(0,o.qT)(jt),jt=T.c.offset(jt,7*(Ft.V-1)),Ft.y=jt.getFullYear(),Ft.m=jt.getMonth(),Ft.d=jt.getDate()+(Ft.w+6)%7)}else("W"in Ft||"U"in Ft)&&("w"in Ft||(Ft.w="u"in Ft?Ft.u%7:"W"in Ft?1:0),Wt="Z"in Ft?t(i(Ft.y,0,1)).getUTCDay():s(i(Ft.y,0,1)).getDay(),Ft.m=0,Ft.d="W"in Ft?(Ft.w+6)%7+7*Ft.W-(Wt+5)%7:Ft.w+7*Ft.U-(Wt+6)%7);return"Z"in Ft?(Ft.H+=Ft.Z/100|0,Ft.M+=Ft.Z%100,t(Ft)):s(Ft)}}function Ct(Dt,Gt,tn,jt){for(var Wt,Ft,Ln=0,bn=Gt.length,hn=tn.length;Ln<bn;){if(jt>=hn)return-1;if((Wt=Gt.charCodeAt(Ln++))===37){if(Wt=Gt.charAt(Ln++),!(Ft=vt[Wt in c?Gt.charAt(Ln++):Wt])||(jt=Ft(Dt,tn,jt))<0)return-1}else if(Wt!=tn.charCodeAt(jt++))return-1}return jt}return ct.x=kt(wt,ct),ct.X=kt(Pt,ct),ct.c=kt(Je,ct),Tt.x=kt(wt,Tt),Tt.X=kt(Pt,Tt),Tt.c=kt(Je,Tt),{format:function(Dt){var Gt=kt(Dt+="",ct);return Gt.toString=function(){return Dt},Gt},parse:function(Dt){var Gt=Lt(Dt+="",!1);return Gt.toString=function(){return Dt},Gt},utcFormat:function(Dt){var Gt=kt(Dt+="",Tt);return Gt.toString=function(){return Dt},Gt},utcParse:function(Dt){var Gt=Lt(Dt+="",!0);return Gt.toString=function(){return Dt},Gt}}}var r,a,l,c={"-":"",_:" ",0:"0"},h=/^\s*\d+/,u=/^%/,x=/[\\^$*+?|[\]().{}]/g;function d(Qe,Je,wt){var Pt=Qe<0?"-":"",It=(Pt?-Qe:Qe)+"",At=It.length;return Pt+(At<wt?new Array(wt-At+1).join(Je)+It:It)}function m(Qe){return Qe.replace(x,"\\$&")}function g(Qe){return new RegExp("^(?:"+Qe.map(m).join("|")+")","i")}function y(Qe){for(var Je={},wt=-1,Pt=Qe.length;++wt<Pt;)Je[Qe[wt].toLowerCase()]=wt;return Je}function v(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+1));return Pt?(Qe.w=+Pt[0],wt+Pt[0].length):-1}function _(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+1));return Pt?(Qe.u=+Pt[0],wt+Pt[0].length):-1}function f(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.U=+Pt[0],wt+Pt[0].length):-1}function S(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.V=+Pt[0],wt+Pt[0].length):-1}function w(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.W=+Pt[0],wt+Pt[0].length):-1}function E(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+4));return Pt?(Qe.y=+Pt[0],wt+Pt[0].length):-1}function P(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.y=+Pt[0]+(+Pt[0]>68?1900:2e3),wt+Pt[0].length):-1}function C(Qe,Je,wt){var Pt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Je.slice(wt,wt+6));return Pt?(Qe.Z=Pt[1]?0:-(Pt[2]+(Pt[3]||"00")),wt+Pt[0].length):-1}function O(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+1));return Pt?(Qe.q=3*Pt[0]-3,wt+Pt[0].length):-1}function R(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.m=Pt[0]-1,wt+Pt[0].length):-1}function U(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.d=+Pt[0],wt+Pt[0].length):-1}function D(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+3));return Pt?(Qe.m=0,Qe.d=+Pt[0],wt+Pt[0].length):-1}function N(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.H=+Pt[0],wt+Pt[0].length):-1}function W(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.M=+Pt[0],wt+Pt[0].length):-1}function F(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+2));return Pt?(Qe.S=+Pt[0],wt+Pt[0].length):-1}function j(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+3));return Pt?(Qe.L=+Pt[0],wt+Pt[0].length):-1}function q(Qe,Je,wt){var Pt=h.exec(Je.slice(wt,wt+6));return Pt?(Qe.L=Math.floor(Pt[0]/1e3),wt+Pt[0].length):-1}function te(Qe,Je,wt){var Pt=u.exec(Je.slice(wt,wt+1));return Pt?wt+Pt[0].length:-1}function ee(Qe,Je,wt){var Pt=h.exec(Je.slice(wt));return Pt?(Qe.Q=+Pt[0],wt+Pt[0].length):-1}function Q(Qe,Je,wt){var Pt=h.exec(Je.slice(wt));return Pt?(Qe.s=+Pt[0],wt+Pt[0].length):-1}function J(Qe,Je){return d(Qe.getDate(),Je,2)}function K(Qe,Je){return d(Qe.getHours(),Je,2)}function Y(Qe,Je){return d(Qe.getHours()%12||12,Je,2)}function ie(Qe,Je){return d(1+T.c.count((0,b.c)(Qe),Qe),Je,3)}function se(Qe,Je){return d(Qe.getMilliseconds(),Je,3)}function ae(Qe,Je){return se(Qe,Je)+"000"}function ue(Qe,Je){return d(Qe.getMonth()+1,Je,2)}function ve(Qe,Je){return d(Qe.getMinutes(),Je,2)}function ye(Qe,Je){return d(Qe.getSeconds(),Je,2)}function de(Qe){var Je=Qe.getDay();return Je===0?7:Je}function pe(Qe,Je){return d(o.uU.count((0,b.c)(Qe)-1,Qe),Je,2)}function ge(Qe,Je){var wt=Qe.getDay();return Qe=wt>=4||wt===0?(0,o.kD)(Qe):o.kD.ceil(Qe),d(o.kD.count((0,b.c)(Qe),Qe)+((0,b.c)(Qe).getDay()===4),Je,2)}function ke(Qe){return Qe.getDay()}function Ee(Qe,Je){return d(o.qT.count((0,b.c)(Qe)-1,Qe),Je,2)}function me(Qe,Je){return d(Qe.getFullYear()%100,Je,2)}function oe(Qe,Je){return d(Qe.getFullYear()%1e4,Je,4)}function re(Qe){var Je=Qe.getTimezoneOffset();return(Je>0?"-":(Je*=-1,"+"))+d(Je/60|0,"0",2)+d(Je%60,"0",2)}function fe(Qe,Je){return d(Qe.getUTCDate(),Je,2)}function Se(Qe,Je){return d(Qe.getUTCHours(),Je,2)}function be(Qe,Je){return d(Qe.getUTCHours()%12||12,Je,2)}function we(Qe,Je){return d(1+k.c.count((0,p.c)(Qe),Qe),Je,3)}function Me(Qe,Je){return d(Qe.getUTCMilliseconds(),Je,3)}function Ie(Qe,Je){return Me(Qe,Je)+"000"}function Oe(Qe,Je){return d(Qe.getUTCMonth()+1,Je,2)}function he(Qe,Je){return d(Qe.getUTCMinutes(),Je,2)}function _e(Qe,Je){return d(Qe.getUTCSeconds(),Je,2)}function Ae(Qe){var Je=Qe.getUTCDay();return Je===0?7:Je}function De(Qe,Je){return d(A.EV.count((0,p.c)(Qe)-1,Qe),Je,2)}function Le(Qe,Je){var wt=Qe.getUTCDay();return Qe=wt>=4||wt===0?(0,A.yA)(Qe):A.yA.ceil(Qe),d(A.yA.count((0,p.c)(Qe),Qe)+((0,p.c)(Qe).getUTCDay()===4),Je,2)}function Be(Qe){return Qe.getUTCDay()}function Ve(Qe,Je){return d(A.ot.count((0,p.c)(Qe)-1,Qe),Je,2)}function Ze(Qe,Je){return d(Qe.getUTCFullYear()%100,Je,2)}function rt(Qe,Je){return d(Qe.getUTCFullYear()%1e4,Je,4)}function it(){return"+0000"}function dt(){return"%"}function mt(Qe){return+Qe}function ht(Qe){return Math.floor(+Qe/1e3)}r=n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=r.format,r.parse,l=r.utcFormat,r.utcParse},68936:function(X,I,e){"use strict";e.d(I,{m:function(){return T}});var A=e(81628),k=e(69792),o=(0,A.c)(function(b){b.setHours(0,0,0,0)},function(b,p){b.setDate(b.getDate()+p)},function(b,p){return(p-b-(p.getTimezoneOffset()-b.getTimezoneOffset())*k.iy)/k.SK},function(b){return b.getDate()-1});I.c=o;var T=o.range},69792:function(X,I,e){"use strict";e.d(I,{KK:function(){return b},SK:function(){return T},cg:function(){return o},iy:function(){return k},yc:function(){return A}});var A=1e3,k=6e4,o=36e5,T=864e5,b=6048e5},73220:function(X,I,e){"use strict";e.r(I),e.d(I,{timeDay:function(){return h.c},timeDays:function(){return h.m},timeFriday:function(){return u.iB},timeFridays:function(){return u.sJ},timeHour:function(){return l},timeHours:function(){return c},timeInterval:function(){return A.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return T},timeMinute:function(){return n},timeMinutes:function(){return r},timeMonday:function(){return u.qT},timeMondays:function(){return u.QP},timeMonth:function(){return d},timeMonths:function(){return m},timeSaturday:function(){return u.Wc},timeSaturdays:function(){return u.aI},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return u.uU},timeSundays:function(){return u.Ab},timeThursday:function(){return u.kD},timeThursdays:function(){return u.eC},timeTuesday:function(){return u.Mf},timeTuesdays:function(){return u.Oc},timeWednesday:function(){return u.eg},timeWednesdays:function(){return u.sn},timeWeek:function(){return u.uU},timeWeeks:function(){return u.Ab},timeYear:function(){return g.c},timeYears:function(){return g.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return P.od},utcFridays:function(){return P.iG},utcHour:function(){return S},utcHours:function(){return w},utcMillisecond:function(){return o},utcMilliseconds:function(){return T},utcMinute:function(){return v},utcMinutes:function(){return _},utcMonday:function(){return P.ot},utcMondays:function(){return P.iO},utcMonth:function(){return O},utcMonths:function(){return R},utcSaturday:function(){return P.Ad},utcSaturdays:function(){return P.K8},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return P.EV},utcSundays:function(){return P.Wq},utcThursday:function(){return P.yA},utcThursdays:function(){return P.ob},utcTuesday:function(){return P.sG},utcTuesdays:function(){return P.kl},utcWednesday:function(){return P._6},utcWednesdays:function(){return P.W_},utcWeek:function(){return P.EV},utcWeeks:function(){return P.Wq},utcYear:function(){return U.c},utcYears:function(){return U.i}});var A=e(81628),k=(0,A.c)(function(){},function(D,N){D.setTime(+D+N)},function(D,N){return N-D});k.every=function(D){return D=Math.floor(D),isFinite(D)&&D>0?D>1?(0,A.c)(function(N){N.setTime(Math.floor(N/D)*D)},function(N,W){N.setTime(+N+W*D)},function(N,W){return(W-N)/D}):k:null};var o=k,T=k.range,b=e(69792),p=(0,A.c)(function(D){D.setTime(D-D.getMilliseconds())},function(D,N){D.setTime(+D+N*b.yc)},function(D,N){return(N-D)/b.yc},function(D){return D.getUTCSeconds()}),s=p,t=p.range,i=(0,A.c)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*b.yc)},function(D,N){D.setTime(+D+N*b.iy)},function(D,N){return(N-D)/b.iy},function(D){return D.getMinutes()}),n=i,r=i.range,a=(0,A.c)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*b.yc-D.getMinutes()*b.iy)},function(D,N){D.setTime(+D+N*b.cg)},function(D,N){return(N-D)/b.cg},function(D){return D.getHours()}),l=a,c=a.range,h=e(68936),u=e(46192),x=(0,A.c)(function(D){D.setDate(1),D.setHours(0,0,0,0)},function(D,N){D.setMonth(D.getMonth()+N)},function(D,N){return N.getMonth()-D.getMonth()+12*(N.getFullYear()-D.getFullYear())},function(D){return D.getMonth()}),d=x,m=x.range,g=e(32171),y=(0,A.c)(function(D){D.setUTCSeconds(0,0)},function(D,N){D.setTime(+D+N*b.iy)},function(D,N){return(N-D)/b.iy},function(D){return D.getUTCMinutes()}),v=y,_=y.range,f=(0,A.c)(function(D){D.setUTCMinutes(0,0,0)},function(D,N){D.setTime(+D+N*b.cg)},function(D,N){return(N-D)/b.cg},function(D){return D.getUTCHours()}),S=f,w=f.range,E=e(58931),P=e(8208),C=(0,A.c)(function(D){D.setUTCDate(1),D.setUTCHours(0,0,0,0)},function(D,N){D.setUTCMonth(D.getUTCMonth()+N)},function(D,N){return N.getUTCMonth()-D.getUTCMonth()+12*(N.getUTCFullYear()-D.getUTCFullYear())},function(D){return D.getUTCMonth()}),O=C,R=C.range,U=e(53528)},81628:function(X,I,e){"use strict";e.d(I,{c:function(){return o}});var A=new Date,k=new Date;function o(T,b,p,s){function t(i){return T(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return T(i=new Date(+i)),i},t.ceil=function(i){return T(i=new Date(i-1)),b(i,1),T(i),i},t.round=function(i){var n=t(i),r=t.ceil(i);return i-n<r-i?n:r},t.offset=function(i,n){return b(i=new Date(+i),n==null?1:Math.floor(n)),i},t.range=function(i,n,r){var a,l=[];if(i=t.ceil(i),r=r==null?1:Math.floor(r),!(i<n&&r>0))return l;do l.push(a=new Date(+i)),b(i,r),T(i);while(a<i&&i<n);return l},t.filter=function(i){return o(function(n){if(n>=n)for(;T(n),!i(n);)n.setTime(n-1)},function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;b(n,-1),!i(n););else for(;--r>=0;)for(;b(n,1),!i(n););})},p&&(t.count=function(i,n){return A.setTime(+i),k.setTime(+n),T(A),T(k),Math.floor(p(A,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(s?function(n){return s(n)%i==0}:function(n){return t.count(0,n)%i==0}):t:null}),t}},58931:function(X,I,e){"use strict";e.d(I,{o:function(){return T}});var A=e(81628),k=e(69792),o=(0,A.c)(function(b){b.setUTCHours(0,0,0,0)},function(b,p){b.setUTCDate(b.getUTCDate()+p)},function(b,p){return(p-b)/k.SK},function(b){return b.getUTCDate()-1});I.c=o;var T=o.range},8208:function(X,I,e){"use strict";e.d(I,{Ad:function(){return n},EV:function(){return T},K8:function(){return x},W_:function(){return c},Wq:function(){return r},_6:function(){return s},iG:function(){return u},iO:function(){return a},kl:function(){return l},ob:function(){return h},od:function(){return i},ot:function(){return b},sG:function(){return p},yA:function(){return t}});var A=e(81628),k=e(69792);function o(d){return(0,A.c)(function(m){m.setUTCDate(m.getUTCDate()-(m.getUTCDay()+7-d)%7),m.setUTCHours(0,0,0,0)},function(m,g){m.setUTCDate(m.getUTCDate()+7*g)},function(m,g){return(g-m)/k.KK})}var T=o(0),b=o(1),p=o(2),s=o(3),t=o(4),i=o(5),n=o(6),r=T.range,a=b.range,l=p.range,c=s.range,h=t.range,u=i.range,x=n.range},53528:function(X,I,e){"use strict";e.d(I,{i:function(){return o}});var A=e(81628),k=(0,A.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,A.c)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,p){b.setUTCFullYear(b.getUTCFullYear()+p*T)}):null},I.c=k;var o=k.range},46192:function(X,I,e){"use strict";e.d(I,{Ab:function(){return r},Mf:function(){return p},Oc:function(){return l},QP:function(){return a},Wc:function(){return n},aI:function(){return x},eC:function(){return h},eg:function(){return s},iB:function(){return i},kD:function(){return t},qT:function(){return b},sJ:function(){return u},sn:function(){return c},uU:function(){return T}});var A=e(81628),k=e(69792);function o(d){return(0,A.c)(function(m){m.setDate(m.getDate()-(m.getDay()+7-d)%7),m.setHours(0,0,0,0)},function(m,g){m.setDate(m.getDate()+7*g)},function(m,g){return(g-m-(g.getTimezoneOffset()-m.getTimezoneOffset())*k.iy)/k.KK})}var T=o(0),b=o(1),p=o(2),s=o(3),t=o(4),i=o(5),n=o(6),r=T.range,a=b.range,l=p.range,c=s.range,h=t.range,u=i.range,x=n.range},32171:function(X,I,e){"use strict";e.d(I,{Q:function(){return o}});var A=e(81628),k=(0,A.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,A.c)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,p){b.setFullYear(b.getFullYear()+p*T)}):null},I.c=k;var o=k.range},64348:function(X,I,e){"use strict";var A=e(39640)(),k=e(53664),o=A&&k("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var T=k("%SyntaxError%"),b=k("%TypeError%"),p=e(2304);X.exports=function(s,t,i){if(!s||typeof s!="object"&&typeof s!="function")throw new b("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new b("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new b("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new b("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new b("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new b("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,r=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],c=!!p&&p(s,t);if(o)o(s,t,{configurable:a===null&&c?c.configurable:!a,enumerable:n===null&&c?c.enumerable:!n,value:i,writable:r===null&&c?c.writable:!r});else{if(!l&&(n||r||a))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");s[t]=i}}},81288:function(X,I,e){"use strict";var A=e(41820),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",o=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,p=e(39640)(),s=b&&p,t=function(n,r,a,l){if(r in n){if(l===!0){if(n[r]===a)return}else if(typeof(c=l)!="function"||o.call(c)!=="[object Function]"||!l())return}var c;s?b(n,r,{configurable:!0,enumerable:!1,value:a,writable:!0}):n[r]=a},i=function(n,r){var a=arguments.length>2?arguments[2]:{},l=A(r);k&&(l=T.call(l,Object.getOwnPropertySymbols(r)));for(var c=0;c<l.length;c+=1)t(n,l[c],r[l[c]],a[l[c]])};i.supportsDescriptors=!!s,X.exports=i},31264:function(X){X.exports=function(){for(var I=0;I<arguments.length;I++)if(arguments[I]!==void 0)return arguments[I]}},63768:function(X){"use strict";X.exports=A;var I=(A.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function A(o,T){Array.isArray(o)&&(o=o.join(", "));var b,p={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),b||(b=e),I.font=s+"px "+o;for(var i=0;i<b.length;i++){var n=b[i],r=I.measureText(n[0]).width+I.measureText(n[1]).width,a=I.measureText(n).width;if(Math.abs(r-a)>s*t){var l=(a-r)/s;p[n]=1e3*l}}return p}function k(o){for(var T=[],b=o[0];b<=o[1];b++)for(var p=String.fromCharCode(b),s=o[0];s<o[1];s++){var t=p+String.fromCharCode(s);T.push(t)}return T}A.createPairs=k,A.ascii=e},22235:function(X,I,e){var A=e(49972),k=e(48816),o={M:"moveTo",C:"bezierCurveTo"};X.exports=function(T,b){T.beginPath(),k(A(b)).forEach(function(p){var s=p[0],t=p.slice(1);T[o[s]].apply(T,t)}),T.closePath()}},72512:function(X){X.exports=function(I){switch(I){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(X){"use strict";function I(e,A,k){var o=0|e[k];if(o<=0)return[];var T,b=new Array(o);if(k===e.length-1)for(T=0;T<o;++T)b[T]=A;else for(T=0;T<o;++T)b[T]=I(e,A,k+1);return b}X.exports=function(e,A){switch(A===void 0&&(A=0),typeof e){case"number":if(e>0)return function(k,o){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=o;return T}(0|e,A);break;case"object":if(typeof e.length=="number")return I(e,A,0)}return[]}},28912:function(X){"use strict";function I(S,w,E){E=E||2;var P,C,O,R,U,D,N,W=w&&w.length,F=W?w[0]*E:S.length,j=e(S,0,F,E,!0),q=[];if(!j||j.next===j.prev)return q;if(W&&(j=function(ee,Q,J,K){var Y,ie,se,ae=[];for(Y=0,ie=Q.length;Y<ie;Y++)(se=e(ee,Q[Y]*K,Y<ie-1?Q[Y+1]*K:ee.length,K,!1))===se.next&&(se.steiner=!0),ae.push(r(se));for(ae.sort(s),Y=0;Y<ae.length;Y++)t(ae[Y],J),J=A(J,J.next);return J}(S,w,j,E)),S.length>80*E){P=O=S[0],C=R=S[1];for(var te=E;te<F;te+=E)(U=S[te])<P&&(P=U),(D=S[te+1])<C&&(C=D),U>O&&(O=U),D>R&&(R=D);N=(N=Math.max(O-P,R-C))!==0?1/N:0}return k(j,q,E,P,C,N),q}function e(S,w,E,P,C){var O,R;if(C===f(S,w,E,P)>0)for(O=w;O<E;O+=P)R=y(O,S[O],S[O+1],R);else for(O=E-P;O>=w;O-=P)R=y(O,S[O],S[O+1],R);return R&&h(R,R.next)&&(v(R),R=R.next),R}function A(S,w){if(!S)return S;w||(w=S);var E,P=S;do if(E=!1,P.steiner||!h(P,P.next)&&c(P.prev,P,P.next)!==0)P=P.next;else{if(v(P),(P=w=P.prev)===P.next)break;E=!0}while(E||P!==w);return w}function k(S,w,E,P,C,O,R){if(S){!R&&O&&function(W,F,j,q){var te=W;do te.z===null&&(te.z=n(te.x,te.y,F,j,q)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==W);te.prevZ.nextZ=null,te.prevZ=null,function(ee){var Q,J,K,Y,ie,se,ae,ue,ve=1;do{for(J=ee,ee=null,ie=null,se=0;J;){for(se++,K=J,ae=0,Q=0;Q<ve&&(ae++,K=K.nextZ);Q++);for(ue=ve;ae>0||ue>0&&K;)ae!==0&&(ue===0||!K||J.z<=K.z)?(Y=J,J=J.nextZ,ae--):(Y=K,K=K.nextZ,ue--),ie?ie.nextZ=Y:ee=Y,Y.prevZ=ie,ie=Y;J=K}ie.nextZ=null,ve*=2}while(se>1)}(te)}(S,P,C,O);for(var U,D,N=S;S.prev!==S.next;)if(U=S.prev,D=S.next,O?T(S,P,C,O):o(S))w.push(U.i/E),w.push(S.i/E),w.push(D.i/E),v(S),S=D.next,N=D.next;else if((S=D)===N){R?R===1?k(S=b(A(S),w,E),w,E,P,C,O,2):R===2&&p(S,w,E,P,C,O):k(A(S),w,E,P,C,O,1);break}}}function o(S){var w=S.prev,E=S,P=S.next;if(c(w,E,P)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(a(w.x,w.y,E.x,E.y,P.x,P.y,C.x,C.y)&&c(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,w,E,P){var C=S.prev,O=S,R=S.next;if(c(C,O,R)>=0)return!1;for(var U=C.x<O.x?C.x<R.x?C.x:R.x:O.x<R.x?O.x:R.x,D=C.y<O.y?C.y<R.y?C.y:R.y:O.y<R.y?O.y:R.y,N=C.x>O.x?C.x>R.x?C.x:R.x:O.x>R.x?O.x:R.x,W=C.y>O.y?C.y>R.y?C.y:R.y:O.y>R.y?O.y:R.y,F=n(U,D,w,E,P),j=n(N,W,w,E,P),q=S.prevZ,te=S.nextZ;q&&q.z>=F&&te&&te.z<=j;){if(q!==S.prev&&q!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,q.x,q.y)&&c(q.prev,q,q.next)>=0||(q=q.prevZ,te!==S.prev&&te!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,te.x,te.y)&&c(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;q&&q.z>=F;){if(q!==S.prev&&q!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,q.x,q.y)&&c(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;te&&te.z<=j;){if(te!==S.prev&&te!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,te.x,te.y)&&c(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function b(S,w,E){var P=S;do{var C=P.prev,O=P.next.next;!h(C,O)&&u(C,P,P.next,O)&&m(C,O)&&m(O,C)&&(w.push(C.i/E),w.push(P.i/E),w.push(O.i/E),v(P),v(P.next),P=S=O),P=P.next}while(P!==S);return A(P)}function p(S,w,E,P,C,O){var R=S;do{for(var U=R.next.next;U!==R.prev;){if(R.i!==U.i&&l(R,U)){var D=g(R,U);return R=A(R,R.next),D=A(D,D.next),k(R,w,E,P,C,O),void k(D,w,E,P,C,O)}U=U.next}R=R.next}while(R!==S)}function s(S,w){return S.x-w.x}function t(S,w){if(w=function(P,C){var O,R=C,U=P.x,D=P.y,N=-1/0;do{if(D<=R.y&&D>=R.next.y&&R.next.y!==R.y){var W=R.x+(D-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(W<=U&&W>N){if(N=W,W===U){if(D===R.y)return R;if(D===R.next.y)return R.next}O=R.x<R.next.x?R:R.next}}R=R.next}while(R!==C);if(!O)return null;if(U===N)return O;var F,j=O,q=O.x,te=O.y,ee=1/0;R=O;do U>=R.x&&R.x>=q&&U!==R.x&&a(D<te?U:N,D,q,te,D<te?N:U,D,R.x,R.y)&&(F=Math.abs(D-R.y)/(U-R.x),m(R,P)&&(F<ee||F===ee&&(R.x>O.x||R.x===O.x&&i(O,R)))&&(O=R,ee=F)),R=R.next;while(R!==j);return O}(S,w),w){var E=g(w,S);A(w,w.next),A(E,E.next)}}function i(S,w){return c(S.prev,S,w.prev)<0&&c(w.next,S,S.next)<0}function n(S,w,E,P,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-P)*C)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function r(S){var w=S,E=S;do(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next;while(w!==S);return E}function a(S,w,E,P,C,O,R,U){return(C-R)*(w-U)-(S-R)*(O-U)>=0&&(S-R)*(P-U)-(E-R)*(w-U)>=0&&(E-R)*(O-U)-(C-R)*(P-U)>=0}function l(S,w){return S.next.i!==w.i&&S.prev.i!==w.i&&!function(E,P){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==P.i&&C.next.i!==P.i&&u(C,C.next,E,P))return!0;C=C.next}while(C!==E);return!1}(S,w)&&(m(S,w)&&m(w,S)&&function(E,P){var C=E,O=!1,R=(E.x+P.x)/2,U=(E.y+P.y)/2;do C.y>U!=C.next.y>U&&C.next.y!==C.y&&R<(C.next.x-C.x)*(U-C.y)/(C.next.y-C.y)+C.x&&(O=!O),C=C.next;while(C!==E);return O}(S,w)&&(c(S.prev,S,w.prev)||c(S,w.prev,w))||h(S,w)&&c(S.prev,S,S.next)>0&&c(w.prev,w,w.next)>0)}function c(S,w,E){return(w.y-S.y)*(E.x-w.x)-(w.x-S.x)*(E.y-w.y)}function h(S,w){return S.x===w.x&&S.y===w.y}function u(S,w,E,P){var C=d(c(S,w,E)),O=d(c(S,w,P)),R=d(c(E,P,S)),U=d(c(E,P,w));return C!==O&&R!==U||!(C!==0||!x(S,E,w))||!(O!==0||!x(S,P,w))||!(R!==0||!x(E,S,P))||!(U!==0||!x(E,w,P))}function x(S,w,E){return w.x<=Math.max(S.x,E.x)&&w.x>=Math.min(S.x,E.x)&&w.y<=Math.max(S.y,E.y)&&w.y>=Math.min(S.y,E.y)}function d(S){return S>0?1:S<0?-1:0}function m(S,w){return c(S.prev,S,S.next)<0?c(S,w,S.next)>=0&&c(S,S.prev,w)>=0:c(S,w,S.prev)<0||c(S,S.next,w)<0}function g(S,w){var E=new _(S.i,S.x,S.y),P=new _(w.i,w.x,w.y),C=S.next,O=w.prev;return S.next=w,w.prev=S,E.next=C,C.prev=E,P.next=E,E.prev=P,O.next=P,P.prev=O,P}function y(S,w,E,P){var C=new _(S,w,E);return P?(C.next=P.next,C.prev=P,P.next.prev=C,P.next=C):(C.prev=C,C.next=C),C}function v(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function _(S,w,E){this.i=S,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f(S,w,E,P){for(var C=0,O=w,R=E-P;O<E;O+=P)C+=(S[R]-S[O])*(S[O+1]+S[R+1]),R=O;return C}X.exports=I,X.exports.default=I,I.deviation=function(S,w,E,P){var C=w&&w.length,O=C?w[0]*E:S.length,R=Math.abs(f(S,0,O,E));if(C)for(var U=0,D=w.length;U<D;U++){var N=w[U]*E,W=U<D-1?w[U+1]*E:S.length;R-=Math.abs(f(S,N,W,E))}var F=0;for(U=0;U<P.length;U+=3){var j=P[U]*E,q=P[U+1]*E,te=P[U+2]*E;F+=Math.abs((S[j]-S[te])*(S[q+1]-S[j+1])-(S[j]-S[q])*(S[te+1]-S[j+1]))}return R===0&&F===0?0:Math.abs((F-R)/R)},I.flatten=function(S){for(var w=S[0][0].length,E={vertices:[],holes:[],dimensions:w},P=0,C=0;C<S.length;C++){for(var O=0;O<S[C].length;O++)for(var R=0;R<w;R++)E.vertices.push(S[C][O][R]);C>0&&(P+=S[C-1].length,E.holes.push(P))}return E}},6688:function(X,I,e){var A=e(78484);X.exports=function(k,o){var T,b=[],p=[],s=[],t={},i=[];function n(m){s[m]=!1,t.hasOwnProperty(m)&&Object.keys(t[m]).forEach(function(g){delete t[m][g],s[g]&&n(g)})}function r(m){var g,y,v=!1;for(p.push(m),s[m]=!0,g=0;g<i[m].length;g++)(y=i[m][g])===T?(a(T,p),v=!0):s[y]||(v=r(y));if(v)n(m);else for(g=0;g<i[m].length;g++){y=i[m][g];var _=t[y];_||(_={},t[y]=_),_[y]=!0}return p.pop(),v}function a(m,g){var y=[].concat(g).concat(m);o?o(r):b.push(y)}function l(m){(function(E){for(var P=0;P<k.length;P++)P<E&&(k[P]=[]),k[P]=k[P].filter(function(C){return C>=E})})(m);for(var g,y=A(k).components.filter(function(E){return E.length>1}),v=1/0,_=0;_<y.length;_++)for(var f=0;f<y[_].length;f++)y[_][f]<v&&(v=y[_][f],g=_);var S=y[g];if(!S)return!1;var w=k.map(function(E,P){return S.indexOf(P)===-1?[]:E.filter(function(C){return S.indexOf(C)!==-1})});return{leastVertex:v,adjList:w}}T=0;for(var c=k.length;T<c;){var h=l(T);if(T=h.leastVertex,i=h.adjList){for(var u=0;u<i.length;u++)for(var x=0;x<i[u].length;x++){var d=i[u][x];s[+d]=!1,t[d]={}}r(T),T+=1}else T=c}return o?void 0:b}},41476:function(X,I,e){"use strict";var A=e(9252);X.exports=function(){return A(this).length=0,this}},74772:function(X,I,e){"use strict";X.exports=e(44716)()?Array.from:e(80816)},44716:function(X){"use strict";X.exports=function(){var I,e,A=Array.from;return typeof A=="function"&&(e=A(I=["raz","dwa"]),!!(e&&e!==I&&e[1]==="dwa"))}},80816:function(X,I,e){"use strict";var A=e(92664).iterator,k=e(60948),o=e(17024),T=e(81304),b=e(34044),p=e(9252),s=e(42584),t=e(29768),i=Array.isArray,n=Function.prototype.call,r={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;X.exports=function(l){var c,h,u,x,d,m,g,y,v,_,f=arguments[1],S=arguments[2];if(l=Object(p(l)),s(f)&&b(f),this&&this!==Array&&o(this))c=this;else{if(!f){if(k(l))return(d=l.length)!==1?Array.apply(null,l):((x=new Array(1))[0]=l[0],x);if(i(l)){for(x=new Array(d=l.length),h=0;h<d;++h)x[h]=l[h];return x}}x=[]}if(!i(l)){if((v=l[A])!==void 0){for(g=b(v).call(l),c&&(x=new c),y=g.next(),h=0;!y.done;)_=f?n.call(f,S,y.value,h):y.value,c?(r.value=_,a(x,h,r)):x[h]=_,y=g.next(),++h;d=h}else if(t(l)){for(d=l.length,c&&(x=new c),h=0,u=0;h<d;++h)_=l[h],h+1<d&&(m=_.charCodeAt(0))>=55296&&m<=56319&&(_+=l[++h]),_=f?n.call(f,S,_,u):_,c?(r.value=_,a(x,u,r)):x[u]=_,++u;d=u}}if(d===void 0)for(d=T(l.length),c&&(x=new c(d)),h=0;h<d;++h)_=f?n.call(f,S,l[h],h):l[h],c?(r.value=_,a(x,h,r)):x[h]=_;return c&&(r.value=null,x.length=d),x}},60948:function(X){"use strict";var I=Object.prototype.toString,e=I.call(function(){return arguments}());X.exports=function(A){return I.call(A)===e}},17024:function(X){"use strict";var I=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);X.exports=function(A){return typeof A=="function"&&e(I.call(A))}},33208:function(X){"use strict";X.exports=function(){}},85608:function(X,I,e){"use strict";X.exports=e(37328)()?Math.sign:e(92928)},37328:function(X){"use strict";X.exports=function(){var I=Math.sign;return typeof I=="function"&&I(10)===1&&I(-20)===-1}},92928:function(X){"use strict";X.exports=function(I){return I=Number(I),isNaN(I)||I===0?I:I>0?1:-1}},96936:function(X,I,e){"use strict";var A=e(85608),k=Math.abs,o=Math.floor;X.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?A(T)*o(k(T)):T}},81304:function(X,I,e){"use strict";var A=e(96936),k=Math.max;X.exports=function(o){return k(0,A(o))}},14428:function(X,I,e){"use strict";var A=e(34044),k=e(9252),o=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,p=Object.prototype.propertyIsEnumerable;X.exports=function(s,t){return function(i,n){var r,a=arguments[2],l=arguments[3];return i=Object(k(i)),A(n),r=b(i),l&&r.sort(typeof l=="function"?o.call(l,i):void 0),typeof s!="function"&&(s=r[s]),T.call(s,r,function(c,h){return p.call(i,c)?T.call(n,a,i[c],c,i,h):t})}}},38452:function(X,I,e){"use strict";X.exports=e(96276)()?Object.assign:e(81892)},96276:function(X){"use strict";X.exports=function(){var I,e=Object.assign;return typeof e=="function"&&(e(I={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),I.foo+I.bar+I.trzy==="razdwatrzy")}},81892:function(X,I,e){"use strict";var A=e(54768),k=e(9252),o=Math.max;X.exports=function(T,b){var p,s,t,i=o(arguments.length,2);for(T=Object(k(T)),t=function(n){try{T[n]=b[n]}catch(r){p||(p=r)}},s=1;s<i;++s)A(b=arguments[s]).forEach(t);if(p!==void 0)throw p;return T}},95920:function(X,I,e){"use strict";var A=e(74772),k=e(38452),o=e(9252);X.exports=function(T){var b=Object(o(T)),p=arguments[1],s=Object(arguments[2]);if(b!==T&&!p)return b;var t={};return p?A(p,function(i){(s.ensure||i in T)&&(t[i]=T[i])}):k(t,T),t}},14452:function(X,I,e){"use strict";var A,k,o,T,b=Object.create;e(63092)()||(A=e(8672)),X.exports=A?A.level!==1?b:(k={},o={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(p){o[p]=p!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,o),Object.defineProperty(A,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(p,s){return b(p===null?k:p,s)}):b},42748:function(X,I,e){"use strict";X.exports=e(14428)("forEach")},69127:function(X,I,e){"use strict";var A=e(42584),k={function:!0,object:!0};X.exports=function(o){return A(o)&&k[typeof o]||!1}},42584:function(X,I,e){"use strict";var A=e(33208)();X.exports=function(k){return k!==A&&k!==null}},54768:function(X,I,e){"use strict";X.exports=e(87888)()?Object.keys:e(89592)},87888:function(X){"use strict";X.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(X,I,e){"use strict";var A=e(42584),k=Object.keys;X.exports=function(o){return k(A(o)?Object(o):o)}},84323:function(X,I,e){"use strict";var A=e(34044),k=e(42748),o=Function.prototype.call;X.exports=function(T,b){var p={},s=arguments[2];return A(b),k(T,function(t,i,n,r){p[i]=o.call(b,s,t,i,n,r)}),p}},50868:function(X,I,e){"use strict";var A=e(42584),k=Array.prototype.forEach,o=Object.create;X.exports=function(T){var b=o(null);return k.call(arguments,function(p){A(p)&&function(s,t){var i;for(i in s)t[i]=s[i]}(Object(p),b)}),b}},69932:function(X,I,e){"use strict";X.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(X){"use strict";var I=Object.create,e=Object.getPrototypeOf,A={};X.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&e(k((arguments[0]||I)(null),A))===A}},8672:function(X,I,e){"use strict";var A,k,o,T,b=e(69127),p=e(9252),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};A=function(n,r){if(p(n),r===null||b(r))return n;throw new TypeError("Prototype must be null or an object")},X.exports=(k=function(){var n,r=Object.create(null),a={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(n=l.set).call(r,a)}catch{}if(Object.getPrototypeOf(r)===a)return{set:n,level:2}}return r.__proto__=a,Object.getPrototypeOf(r)===a?{level:2}:((r={}).__proto__=a,Object.getPrototypeOf(r)===a&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,o=function(n,r){return T.call(A(n,r),r),n}):o=function(n,r){return A(n,r).__proto__=r,n}:o=function n(r,a){var l;return A(r,a),(l=s.call(n.nullPolyfill,r))&&delete n.nullPolyfill.__proto__,a===null&&(a=n.nullPolyfill),r.__proto__=a,l&&t(n.nullPolyfill,"__proto__",i),r},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(14452)},34044:function(X){"use strict";X.exports=function(I){if(typeof I!="function")throw new TypeError(I+" is not a function");return I}},92584:function(X,I,e){"use strict";var A=e(69127);X.exports=function(k){if(!A(k))throw new TypeError(k+" is not an Object");return k}},9252:function(X,I,e){"use strict";var A=e(42584);X.exports=function(k){if(!A(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(X,I,e){"use strict";X.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(X){"use strict";var I="razdwatrzy";X.exports=function(){return typeof I.contains=="function"&&I.contains("dwa")===!0&&I.contains("foo")===!1}},93040:function(X){"use strict";var I=String.prototype.indexOf;X.exports=function(e){return I.call(this,e,arguments[1])>-1}},29768:function(X){"use strict";var I=Object.prototype.toString,e=I.call("");X.exports=function(A){return typeof A=="string"||A&&typeof A=="object"&&(A instanceof String||I.call(A)===e)||!1}},82252:function(X){"use strict";var I=Object.create(null),e=Math.random;X.exports=function(){var A;do A=e().toString(36).slice(2);while(I[A]);return A}},52104:function(X,I,e){"use strict";var A,k=e(69932),o=e(71056),T=e(21092),b=e(92664),p=e(85512),s=Object.defineProperty;A=X.exports=function(t,i){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");p.call(this,t),i=i?o.call(i,"key+value")?"key+value":o.call(i,"key")?"key":"value":"value",s(this,"__kind__",T("",i))},k&&k(A,p),delete A.prototype.constructor,A.prototype=Object.create(p.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(A.prototype,b.toStringTag,T("c","Array Iterator"))},76024:function(X,I,e){"use strict";var A=e(60948),k=e(34044),o=e(29768),T=e(76252),b=Array.isArray,p=Function.prototype.call,s=Array.prototype.some;X.exports=function(t,i){var n,r,a,l,c,h,u,x,d=arguments[2];if(b(t)||A(t)?n="array":o(t)?n="string":t=T(t),k(i),a=function(){l=!0},n!=="array")if(n!=="string")for(r=t.next();!r.done;){if(p.call(i,d,r.value,a),l)return;r=t.next()}else for(h=t.length,c=0;c<h&&(u=t[c],c+1<h&&(x=u.charCodeAt(0))>=55296&&x<=56319&&(u+=t[++c]),p.call(i,d,u,a),!l);++c);else s.call(t,function(m){return p.call(i,d,m,a),l})}},76252:function(X,I,e){"use strict";var A=e(60948),k=e(29768),o=e(52104),T=e(80940),b=e(52891),p=e(92664).iterator;X.exports=function(s){return typeof b(s)[p]=="function"?s[p]():A(s)?new o(s):k(s)?new T(s):new o(s)}},85512:function(X,I,e){"use strict";var A,k=e(41476),o=e(38452),T=e(34044),b=e(9252),p=e(21092),s=e(27940),t=e(92664),i=Object.defineProperty,n=Object.defineProperties;X.exports=A=function(r,a){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");n(this,{__list__:p("w",b(r)),__context__:p("w",a),__nextIndex__:p("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete A.prototype.constructor,n(A.prototype,o({_next:p(function(){var r;if(this.__list__)return this.__redo__&&(r=this.__redo__.shift())!==void 0?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:p(function(){return this._createResult(this._next())}),_createResult:p(function(r){return r===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:p(function(r){return this.__list__[r]}),_unBind:p(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:p(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:p(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,l){a>=r&&(this.__redo__[l]=++a)},this),this.__redo__.push(r)):i(this,"__redo__",p("c",[r])))}),_onDelete:p(function(r){var a;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(r))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(l,c){l>r&&(this.__redo__[c]=--l)},this)))}),_onClear:p(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(A.prototype,t.iterator,p(function(){return this}))},76368:function(X,I,e){"use strict";var A=e(60948),k=e(42584),o=e(29768),T=e(92664).iterator,b=Array.isArray;X.exports=function(p){return!(!k(p)||!b(p)&&!o(p)&&!A(p)&&typeof p[T]!="function")}},80940:function(X,I,e){"use strict";var A,k=e(69932),o=e(21092),T=e(92664),b=e(85512),p=Object.defineProperty;A=X.exports=function(s){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),p(this,"__length__",o("",s.length))},k&&k(A,b),delete A.prototype.constructor,A.prototype=Object.create(b.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(s){var t,i=this.__list__[s];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),p(A.prototype,T.toStringTag,o("c","String Iterator"))},52891:function(X,I,e){"use strict";var A=e(76368);X.exports=function(k){if(!A(k))throw new TypeError(k+" is not iterable");return k}},60964:function(X){"use strict";function I(e,A){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),o=1;o<arguments.length;o++){var T=arguments[o];if(T!=null)for(var b=Object.keys(Object(T)),p=0,s=b.length;p<s;p++){var t=b[p],i=Object.getOwnPropertyDescriptor(T,t);i!==void 0&&i.enumerable&&(k[t]=T[t])}}return k}X.exports={assign:I,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:I})}}},92664:function(X,I,e){"use strict";X.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(X,I,e){"use strict";var A=e(12296),k={object:!0,symbol:!0};X.exports=function(){var o,T=A.Symbol;if(typeof T!="function")return!1;o=T("test symbol");try{String(o)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},53908:function(X){"use strict";X.exports=function(I){return!!I&&(typeof I=="symbol"||!!I.constructor&&I.constructor.name==="Symbol"&&I[I.constructor.toStringTag]==="Symbol")}},96863:function(X,I,e){"use strict";var A=e(21092),k=Object.create,o=Object.defineProperty,T=Object.prototype,b=k(null);X.exports=function(p){for(var s,t,i=0;b[p+(i||"")];)++i;return b[p+=i||""]=!0,o(T,s="@@"+p,A.gs(null,function(n){t||(t=!0,o(this,s,A(n)),t=!1)})),s}},53540:function(X,I,e){"use strict";var A=e(21092),k=e(12296).Symbol;X.exports=function(o){return Object.defineProperties(o,{hasInstance:A("",k&&k.hasInstance||o("hasInstance")),isConcatSpreadable:A("",k&&k.isConcatSpreadable||o("isConcatSpreadable")),iterator:A("",k&&k.iterator||o("iterator")),match:A("",k&&k.match||o("match")),replace:A("",k&&k.replace||o("replace")),search:A("",k&&k.search||o("search")),species:A("",k&&k.species||o("species")),split:A("",k&&k.split||o("split")),toPrimitive:A("",k&&k.toPrimitive||o("toPrimitive")),toStringTag:A("",k&&k.toStringTag||o("toStringTag")),unscopables:A("",k&&k.unscopables||o("unscopables"))})}},73852:function(X,I,e){"use strict";var A=e(21092),k=e(63948),o=Object.create(null);X.exports=function(T){return Object.defineProperties(T,{for:A(function(b){return o[b]?o[b]:o[b]=T(String(b))}),keyFor:A(function(b){var p;for(p in k(b),o)if(o[p]===b)return p})})}},18376:function(X,I,e){"use strict";var A,k,o,T=e(21092),b=e(63948),p=e(12296).Symbol,s=e(96863),t=e(53540),i=e(73852),n=Object.create,r=Object.defineProperties,a=Object.defineProperty;if(typeof p=="function")try{String(p()),o=!0}catch{}else p=null;k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return A(l)},X.exports=A=function l(c){var h;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return o?p(c):(h=n(k.prototype),c=c===void 0?"":String(c),r(h,{__description__:T("",c),__name__:T("",s(c))}))},t(A),i(A),r(k.prototype,{constructor:T(A),toString:T("",function(){return this.__name__})}),r(A.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),a(A.prototype,A.toPrimitive,T("",function(){var l=b(this);return typeof l=="symbol"?l:l.toString()})),a(A.prototype,A.toStringTag,T("c","Symbol")),a(k.prototype,A.toStringTag,T("c",A.prototype[A.toStringTag])),a(k.prototype,A.toPrimitive,T("c",A.prototype[A.toPrimitive]))},63948:function(X,I,e){"use strict";var A=e(53908);X.exports=function(k){if(!A(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(X,I,e){"use strict";X.exports=e(96979)()?WeakMap:e(64864)},96979:function(X){"use strict";X.exports=function(){var I,e;if(typeof WeakMap!="function")return!1;try{I=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(I)==="[object WeakMap]"&&typeof I.set=="function"&&I.set({},1)===I&&typeof I.delete=="function"&&typeof I.has=="function"&&I.get(e)==="one"}},69876:function(X){"use strict";X.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(X,I,e){"use strict";var A,k=e(42584),o=e(69932),T=e(92584),b=e(9252),p=e(82252),s=e(21092),t=e(76252),i=e(76024),n=e(92664).toStringTag,r=e(69876),a=Array.isArray,l=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;X.exports=A=function(){var u,x=arguments[0];if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");return u=r&&o&&WeakMap!==A?o(new WeakMap,h(this)):this,k(x)&&(a(x)||(x=t(x))),l(u,"__weakMapData__",s("c","$weakMap$"+p())),x&&i(x,function(d){b(d),u.set(d[0],d[1])}),u},r&&(o&&o(A,WeakMap),A.prototype=Object.create(WeakMap.prototype,{constructor:s(A)})),Object.defineProperties(A.prototype,{delete:s(function(u){return!!c.call(T(u),this.__weakMapData__)&&(delete u[this.__weakMapData__],!0)}),get:s(function(u){if(c.call(T(u),this.__weakMapData__))return u[this.__weakMapData__]}),has:s(function(u){return c.call(T(u),this.__weakMapData__)}),set:s(function(u,x){return l(T(u),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),l(A.prototype,n,s("c","WeakMap"))},61252:function(X){"use strict";var I,e=typeof Reflect=="object"?Reflect:null,A=e&&typeof e.apply=="function"?e.apply:function(c,h,u){return Function.prototype.apply.call(c,h,u)};I=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var k=Number.isNaN||function(c){return c!=c};function o(){o.init.call(this)}X.exports=o,X.exports.once=function(c,h){return new Promise(function(u,x){function d(g){c.removeListener(h,m),x(g)}function m(){typeof c.removeListener=="function"&&c.removeListener("error",d),u([].slice.call(arguments))}l(c,h,m,{once:!0}),h!=="error"&&function(g,y,v){typeof g.on=="function"&&l(g,"error",y,{once:!0})}(c,d)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var T=10;function b(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function p(c){return c._maxListeners===void 0?o.defaultMaxListeners:c._maxListeners}function s(c,h,u,x){var d,m,g,y;if(b(u),(m=c._events)===void 0?(m=c._events=Object.create(null),c._eventsCount=0):(m.newListener!==void 0&&(c.emit("newListener",h,u.listener?u.listener:u),m=c._events),g=m[h]),g===void 0)g=m[h]=u,++c._eventsCount;else if(typeof g=="function"?g=m[h]=x?[u,g]:[g,u]:x?g.unshift(u):g.push(u),(d=p(c))>0&&g.length>d&&!g.warned){g.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=c,v.type=h,v.count=g.length,y=v,console&&console.warn&&console.warn(y)}return c}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(c,h,u){var x={fired:!1,wrapFn:void 0,target:c,type:h,listener:u},d=t.bind(x);return d.listener=u,x.wrapFn=d,d}function n(c,h,u){var x=c._events;if(x===void 0)return[];var d=x[h];return d===void 0?[]:typeof d=="function"?u?[d.listener||d]:[d]:u?function(m){for(var g=new Array(m.length),y=0;y<g.length;++y)g[y]=m[y].listener||m[y];return g}(d):a(d,d.length)}function r(c){var h=this._events;if(h!==void 0){var u=h[c];if(typeof u=="function")return 1;if(u!==void 0)return u.length}return 0}function a(c,h){for(var u=new Array(h),x=0;x<h;++x)u[x]=c[x];return u}function l(c,h,u,x){if(typeof c.on=="function")x.once?c.once(h,u):c.on(h,u);else{if(typeof c.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(h,function d(m){x.once&&c.removeEventListener(h,d),u(m)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(c){if(typeof c!="number"||c<0||k(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");T=c}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||k(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(c){for(var h=[],u=1;u<arguments.length;u++)h.push(arguments[u]);var x=c==="error",d=this._events;if(d!==void 0)x=x&&d.error===void 0;else if(!x)return!1;if(x){var m;if(h.length>0&&(m=h[0]),m instanceof Error)throw m;var g=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw g.context=m,g}var y=d[c];if(y===void 0)return!1;if(typeof y=="function")A(y,this,h);else{var v=y.length,_=a(y,v);for(u=0;u<v;++u)A(_[u],this,h)}return!0},o.prototype.addListener=function(c,h){return s(this,c,h,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(c,h){return s(this,c,h,!0)},o.prototype.once=function(c,h){return b(h),this.on(c,i(this,c,h)),this},o.prototype.prependOnceListener=function(c,h){return b(h),this.prependListener(c,i(this,c,h)),this},o.prototype.removeListener=function(c,h){var u,x,d,m,g;if(b(h),(x=this._events)===void 0)return this;if((u=x[c])===void 0)return this;if(u===h||u.listener===h)--this._eventsCount==0?this._events=Object.create(null):(delete x[c],x.removeListener&&this.emit("removeListener",c,u.listener||h));else if(typeof u!="function"){for(d=-1,m=u.length-1;m>=0;m--)if(u[m]===h||u[m].listener===h){g=u[m].listener,d=m;break}if(d<0)return this;d===0?u.shift():function(y,v){for(;v+1<y.length;v++)y[v]=y[v+1];y.pop()}(u,d),u.length===1&&(x[c]=u[0]),x.removeListener!==void 0&&this.emit("removeListener",c,g||h)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(c){var h,u,x;if((u=this._events)===void 0)return this;if(u.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):u[c]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete u[c]),this;if(arguments.length===0){var d,m=Object.keys(u);for(x=0;x<m.length;++x)(d=m[x])!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(h=u[c])=="function")this.removeListener(c,h);else if(h!==void 0)for(x=h.length-1;x>=0;x--)this.removeListener(c,h[x]);return this},o.prototype.listeners=function(c){return n(this,c,!0)},o.prototype.rawListeners=function(c){return n(this,c,!1)},o.listenerCount=function(c,h){return typeof c.listenerCount=="function"?c.listenerCount(h):r.call(c,h)},o.prototype.listenerCount=r,o.prototype.eventNames=function(){return this._eventsCount>0?I(this._events):[]}},39072:function(X){var I=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};X.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return I()}try{return __global__||I()}finally{delete Object.prototype.__global__}}()},12296:function(X,I,e){"use strict";X.exports=e(45072)()?globalThis:e(39072)},45072:function(X){"use strict";X.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(X,I,e){"use strict";var A=e(94576);X.exports=function(k){var o=typeof k;if(o==="string"){var T=k;if((k=+k)==0&&A(T))return!1}else if(o!=="number")return!1;return k-k<1}},47520:function(X,I,e){var A=e(72512);X.exports=function(k,o,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,p,s,t,i=k[0].length,n=k.length*i;o&&typeof o!="string"||(o=new(A(o||"float32"))(n+T));var r=o.length-T;if(n!==r)throw new Error("source length "+n+" ("+i+"x"+k.length+") does not match destination length "+r);for(b=0,s=T;b<k.length;b++)for(p=0;p<i;p++)o[s++]=k[b][p]===null?NaN:k[b][p]}else if(o&&typeof o!="string")o.set(k,T);else{var a=A(o||"float32");if(Array.isArray(k)||o==="array")for(b=0,s=T,t=(o=new a(k.length+T)).length;s<t;s++,b++)o[s]=k[b]===null?NaN:k[b];else T===0?o=new a(k):(o=new a(k.length+T)).set(k,T)}return o}},33888:function(X,I,e){"use strict";var A=e(49395),k=[32,126];X.exports=function(o){var T=(o=o||{}).shape?o.shape:o.canvas?[o.canvas.width,o.canvas.height]:[512,512],b=o.canvas||document.createElement("canvas"),p=o.font,s=typeof o.step=="number"?[o.step,o.step]:o.step||[32,32],t=o.chars||k;if(p&&typeof p!="string"&&(p=A(p)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],n=t[0],r=0;n<=t[1];n++)i[r++]=String.fromCharCode(n);t=i}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var a=b.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,b.width,b.height),a.font=p,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var l=s[0]/2,c=s[1]/2;for(n=0;n<t.length;n++)a.fillText(t[n],l,c),(l+=s[0])>T[0]-s[0]/2&&(l=s[0]/2,c+=s[1]);return b}},71920:function(X){"use strict";function I(o,T){T||(T={}),(typeof o=="string"||Array.isArray(o))&&(T.family=o);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var p=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(o=[T.style||T.fontStyle||"",s,p].join(" ")+"px "+b,T.origin||"top");if(I.cache[b]&&p<=I.cache[b].em)return e(I.cache[b],t);var i=T.canvas||I.canvas,n=i.getContext("2d"),r={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*p);i.height=a,i.width=.5*a,n.font=o;var l="H",c={top:0};n.clearRect(0,0,a,a),n.textBaseline="top",n.fillStyle="black",n.fillText(l,0,0);var h=A(n.getImageData(0,0,a,a));n.clearRect(0,0,a,a),n.textBaseline="bottom",n.fillText(l,0,a);var u=A(n.getImageData(0,0,a,a));c.lineHeight=c.bottom=a-u+h,n.clearRect(0,0,a,a),n.textBaseline="alphabetic",n.fillText(l,0,a);var x=a-A(n.getImageData(0,0,a,a))-1+h;c.baseline=c.alphabetic=x,n.clearRect(0,0,a,a),n.textBaseline="middle",n.fillText(l,0,.5*a);var d=A(n.getImageData(0,0,a,a));c.median=c.middle=a-d-1+h-.5*a,n.clearRect(0,0,a,a),n.textBaseline="hanging",n.fillText(l,0,.5*a);var m=A(n.getImageData(0,0,a,a));c.hanging=a-m-1+h-.5*a,n.clearRect(0,0,a,a),n.textBaseline="ideographic",n.fillText(l,0,a);var g=A(n.getImageData(0,0,a,a));if(c.ideographic=a-g-1+h,r.upper&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.upper,0,0),c.upper=A(n.getImageData(0,0,a,a)),c.capHeight=c.baseline-c.upper),r.lower&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.lower,0,0),c.lower=A(n.getImageData(0,0,a,a)),c.xHeight=c.baseline-c.lower),r.tittle&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.tittle,0,0),c.tittle=A(n.getImageData(0,0,a,a))),r.ascent&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.ascent,0,0),c.ascent=A(n.getImageData(0,0,a,a))),r.descent&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.descent,0,0),c.descent=k(n.getImageData(0,0,a,a))),r.overshoot){n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.overshoot,0,0);var y=k(n.getImageData(0,0,a,a));c.overshoot=y-x}for(var v in c)c[v]/=p;return c.em=p,I.cache[b]=c,e(c,t)}function e(o,T){var b={};for(var p in typeof T=="string"&&(T=o[T]),o)p!=="em"&&(b[p]=o[p]-T);return b}function A(o){for(var T=o.height,b=o.data,p=3;p<b.length;p+=4)if(b[p]!==0)return Math.floor(.25*(p-3)/T)}function k(o){for(var T=o.height,b=o.data,p=b.length-1;p>0;p-=4)if(b[p]!==0)return Math.floor(.25*(p-3)/T)}X.exports=I,I.canvas=document.createElement("canvas"),I.cache={}},46492:function(X,I,e){"use strict";var A=e(90720),k=Object.prototype.toString,o=Object.prototype.hasOwnProperty;X.exports=function(T,b,p){if(!A(b))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=p),k.call(T)==="[object Array]"?function(t,i,n){for(var r=0,a=t.length;r<a;r++)o.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(T,b,s):typeof T=="string"?function(t,i,n){for(var r=0,a=t.length;r<a;r++)n==null?i(t.charAt(r),r,t):i.call(n,t.charAt(r),r,t)}(T,b,s):function(t,i,n){for(var r in t)o.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(T,b,s)}},74336:function(X){"use strict";var I=Object.prototype.toString,e=Math.max,A=function(k,o){for(var T=[],b=0;b<k.length;b+=1)T[b]=k[b];for(var p=0;p<o.length;p+=1)T[p+k.length]=o[p];return T};X.exports=function(k){var o=this;if(typeof o!="function"||I.apply(o)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var T,b=function(n,r){for(var a=[],l=1,c=0;l<n.length;l+=1,c+=1)a[c]=n[l];return a}(arguments),p=e(0,o.length-b.length),s=[],t=0;t<p;t++)s[t]="$"+t;if(T=Function("binder","return function ("+function(n,r){for(var a="",l=0;l<n.length;l+=1)a+=n[l],l+1<n.length&&(a+=",");return a}(s)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var n=o.apply(this,A(b,arguments));return Object(n)===n?n:this}return o.apply(k,A(b,arguments))}),o.prototype){var i=function(){};i.prototype=o.prototype,T.prototype=new i,i.prototype=null}return T}},8844:function(X,I,e){"use strict";var A=e(74336);X.exports=Function.prototype.bind||A},13380:function(X){X.exports=function(I,e){if(typeof I!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var A=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(A.width=e.width),typeof e.height=="number"&&(A.height=e.height);var k,o=e;try{var T=[I];I.indexOf("webgl")===0&&T.push("experimental-"+I);for(var b=0;b<T.length;b++)if(k=A.getContext(T[b],o))return k}catch{k=null}return k||null}},53664:function(X,I,e){"use strict";var A,k=SyntaxError,o=Function,T=TypeError,b=function(P){try{return o('"use strict"; return ('+P+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var s=function(){throw new T},t=p?function(){try{return s}catch{try{return p(arguments,"callee").get}catch{return s}}}():s,i=e(71080)(),n=e(69572)(),r=Object.getPrototypeOf||(n?function(P){return P.__proto__}:null),a={},l=typeof Uint8Array<"u"&&r?r(Uint8Array):A,c={"%AggregateError%":typeof AggregateError>"u"?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayIteratorPrototype%":i&&r?r([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%BigInt%":typeof BigInt>"u"?A:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?A:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?A:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?A:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&r?r(r([][Symbol.iterator]())):A,"%JSON%":typeof JSON=="object"?JSON:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i&&r?r(new Map()[Symbol.iterator]()):A,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i&&r?r(new Set()[Symbol.iterator]()):A,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&r?r(""[Symbol.iterator]()):A,"%Symbol%":i?Symbol:A,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakRef%":typeof WeakRef>"u"?A:WeakRef,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet};if(r)try{null.error}catch(P){var h=r(r(P));c["%Error.prototype%"]=h}var u=function P(C){var O;if(C==="%AsyncFunction%")O=b("async function () {}");else if(C==="%GeneratorFunction%")O=b("function* () {}");else if(C==="%AsyncGeneratorFunction%")O=b("async function* () {}");else if(C==="%AsyncGenerator%"){var R=P("%AsyncGeneratorFunction%");R&&(O=R.prototype)}else if(C==="%AsyncIteratorPrototype%"){var U=P("%AsyncGenerator%");U&&r&&(O=r(U.prototype))}return c[C]=O,O},x={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},d=e(8844),m=e(92064),g=d.call(Function.call,Array.prototype.concat),y=d.call(Function.apply,Array.prototype.splice),v=d.call(Function.call,String.prototype.replace),_=d.call(Function.call,String.prototype.slice),f=d.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(P,C){var O,R=P;if(m(x,R)&&(R="%"+(O=x[R])[0]+"%"),m(c,R)){var U=c[R];if(U===a&&(U=u(R)),U===void 0&&!C)throw new T("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:O,name:R,value:U}}throw new k("intrinsic "+P+" does not exist!")};X.exports=function(P,C){if(typeof P!="string"||P.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new T('"allowMissing" argument must be a boolean');if(f(/^%?[^%]*%?$/,P)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=function(K){var Y=_(K,0,1),ie=_(K,-1);if(Y==="%"&&ie!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(ie==="%"&&Y!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var se=[];return v(K,S,function(ae,ue,ve,ye){se[se.length]=ve?v(ye,w,"$1"):ue||ae}),se}(P),R=O.length>0?O[0]:"",U=E("%"+R+"%",C),D=U.name,N=U.value,W=!1,F=U.alias;F&&(R=F[0],y(O,g([0,1],F)));for(var j=1,q=!0;j<O.length;j+=1){var te=O[j],ee=_(te,0,1),Q=_(te,-1);if((ee==='"'||ee==="'"||ee==="`"||Q==='"'||Q==="'"||Q==="`")&&ee!==Q)throw new k("property names with quotes must have matching quotes");if(te!=="constructor"&&q||(W=!0),m(c,D="%"+(R+="."+te)+"%"))N=c[D];else if(N!=null){if(!(te in N)){if(!C)throw new T("base intrinsic for "+P+" exists, but the property is not available.");return}if(p&&j+1>=O.length){var J=p(N,te);N=(q=!!J)&&"get"in J&&!("originalValue"in J.get)?J.get:N[te]}else q=m(N,te),N=N[te];q&&!W&&(c[D]=N)}}return N}},12408:function(X){X.exports=function(I,e){var A=e[0],k=e[1],o=e[2],T=e[3],b=e[4],p=e[5],s=e[6],t=e[7],i=e[8],n=e[9],r=e[10],a=e[11],l=e[12],c=e[13],h=e[14],u=e[15];return I[0]=p*(r*u-a*h)-n*(s*u-t*h)+c*(s*a-t*r),I[1]=-(k*(r*u-a*h)-n*(o*u-T*h)+c*(o*a-T*r)),I[2]=k*(s*u-t*h)-p*(o*u-T*h)+c*(o*t-T*s),I[3]=-(k*(s*a-t*r)-p*(o*a-T*r)+n*(o*t-T*s)),I[4]=-(b*(r*u-a*h)-i*(s*u-t*h)+l*(s*a-t*r)),I[5]=A*(r*u-a*h)-i*(o*u-T*h)+l*(o*a-T*r),I[6]=-(A*(s*u-t*h)-b*(o*u-T*h)+l*(o*t-T*s)),I[7]=A*(s*a-t*r)-b*(o*a-T*r)+i*(o*t-T*s),I[8]=b*(n*u-a*c)-i*(p*u-t*c)+l*(p*a-t*n),I[9]=-(A*(n*u-a*c)-i*(k*u-T*c)+l*(k*a-T*n)),I[10]=A*(p*u-t*c)-b*(k*u-T*c)+l*(k*t-T*p),I[11]=-(A*(p*a-t*n)-b*(k*a-T*n)+i*(k*t-T*p)),I[12]=-(b*(n*h-r*c)-i*(p*h-s*c)+l*(p*r-s*n)),I[13]=A*(n*h-r*c)-i*(k*h-o*c)+l*(k*r-o*n),I[14]=-(A*(p*h-s*c)-b*(k*h-o*c)+l*(k*s-o*p)),I[15]=A*(p*r-s*n)-b*(k*r-o*n)+i*(k*s-o*p),I}},76860:function(X){X.exports=function(I){var e=new Float32Array(16);return e[0]=I[0],e[1]=I[1],e[2]=I[2],e[3]=I[3],e[4]=I[4],e[5]=I[5],e[6]=I[6],e[7]=I[7],e[8]=I[8],e[9]=I[9],e[10]=I[10],e[11]=I[11],e[12]=I[12],e[13]=I[13],e[14]=I[14],e[15]=I[15],e}},64492:function(X){X.exports=function(I,e){return I[0]=e[0],I[1]=e[1],I[2]=e[2],I[3]=e[3],I[4]=e[4],I[5]=e[5],I[6]=e[6],I[7]=e[7],I[8]=e[8],I[9]=e[9],I[10]=e[10],I[11]=e[11],I[12]=e[12],I[13]=e[13],I[14]=e[14],I[15]=e[15],I}},54212:function(X){X.exports=function(){var I=new Float32Array(16);return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},70800:function(X){X.exports=function(I){var e=I[0],A=I[1],k=I[2],o=I[3],T=I[4],b=I[5],p=I[6],s=I[7],t=I[8],i=I[9],n=I[10],r=I[11],a=I[12],l=I[13],c=I[14],h=I[15];return(e*b-A*T)*(n*h-r*c)-(e*p-k*T)*(i*h-r*l)+(e*s-o*T)*(i*c-n*l)+(A*p-k*b)*(t*h-r*a)-(A*s-o*b)*(t*c-n*a)+(k*s-o*p)*(t*l-i*a)}},61784:function(X){X.exports=function(I,e){var A=e[0],k=e[1],o=e[2],T=e[3],b=A+A,p=k+k,s=o+o,t=A*b,i=k*b,n=k*p,r=o*b,a=o*p,l=o*s,c=T*b,h=T*p,u=T*s;return I[0]=1-n-l,I[1]=i+u,I[2]=r-h,I[3]=0,I[4]=i-u,I[5]=1-t-l,I[6]=a+c,I[7]=0,I[8]=r+h,I[9]=a-c,I[10]=1-t-n,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},91616:function(X){X.exports=function(I,e,A){var k,o,T,b=A[0],p=A[1],s=A[2],t=Math.sqrt(b*b+p*p+s*s);return Math.abs(t)<1e-6?null:(b*=t=1/t,p*=t,s*=t,k=Math.sin(e),T=1-(o=Math.cos(e)),I[0]=b*b*T+o,I[1]=p*b*T+s*k,I[2]=s*b*T-p*k,I[3]=0,I[4]=b*p*T-s*k,I[5]=p*p*T+o,I[6]=s*p*T+b*k,I[7]=0,I[8]=b*s*T+p*k,I[9]=p*s*T-b*k,I[10]=s*s*T+o,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I)}},51944:function(X){X.exports=function(I,e,A){var k=e[0],o=e[1],T=e[2],b=e[3],p=k+k,s=o+o,t=T+T,i=k*p,n=k*s,r=k*t,a=o*s,l=o*t,c=T*t,h=b*p,u=b*s,x=b*t;return I[0]=1-(a+c),I[1]=n+x,I[2]=r-u,I[3]=0,I[4]=n-x,I[5]=1-(i+c),I[6]=l+h,I[7]=0,I[8]=r+u,I[9]=l-h,I[10]=1-(i+a),I[11]=0,I[12]=A[0],I[13]=A[1],I[14]=A[2],I[15]=1,I}},69444:function(X){X.exports=function(I,e){return I[0]=e[0],I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=e[1],I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=e[2],I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},48268:function(X){X.exports=function(I,e){return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=e[0],I[13]=e[1],I[14]=e[2],I[15]=1,I}},21856:function(X){X.exports=function(I,e){var A=Math.sin(e),k=Math.cos(e);return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=k,I[6]=A,I[7]=0,I[8]=0,I[9]=-A,I[10]=k,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},79216:function(X){X.exports=function(I,e){var A=Math.sin(e),k=Math.cos(e);return I[0]=k,I[1]=0,I[2]=-A,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=A,I[9]=0,I[10]=k,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},57736:function(X){X.exports=function(I,e){var A=Math.sin(e),k=Math.cos(e);return I[0]=k,I[1]=A,I[2]=0,I[3]=0,I[4]=-A,I[5]=k,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},38848:function(X){X.exports=function(I,e,A,k,o,T,b){var p=1/(A-e),s=1/(o-k),t=1/(T-b);return I[0]=2*T*p,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=2*T*s,I[6]=0,I[7]=0,I[8]=(A+e)*p,I[9]=(o+k)*s,I[10]=(b+T)*t,I[11]=-1,I[12]=0,I[13]=0,I[14]=b*T*2*t,I[15]=0,I}},36635:function(X){X.exports=function(I){return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},36524:function(X,I,e){X.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(X){X.exports=function(I,e){var A=e[0],k=e[1],o=e[2],T=e[3],b=e[4],p=e[5],s=e[6],t=e[7],i=e[8],n=e[9],r=e[10],a=e[11],l=e[12],c=e[13],h=e[14],u=e[15],x=A*p-k*b,d=A*s-o*b,m=A*t-T*b,g=k*s-o*p,y=k*t-T*p,v=o*t-T*s,_=i*c-n*l,f=i*h-r*l,S=i*u-a*l,w=n*h-r*c,E=n*u-a*c,P=r*u-a*h,C=x*P-d*E+m*w+g*S-y*f+v*_;return C?(C=1/C,I[0]=(p*P-s*E+t*w)*C,I[1]=(o*E-k*P-T*w)*C,I[2]=(c*v-h*y+u*g)*C,I[3]=(r*y-n*v-a*g)*C,I[4]=(s*S-b*P-t*f)*C,I[5]=(A*P-o*S+T*f)*C,I[6]=(h*m-l*v-u*d)*C,I[7]=(i*v-r*m+a*d)*C,I[8]=(b*E-p*S+t*_)*C,I[9]=(k*S-A*E-T*_)*C,I[10]=(l*y-c*m+u*x)*C,I[11]=(n*m-i*y-a*x)*C,I[12]=(p*f-b*w-s*_)*C,I[13]=(A*w-k*f+o*_)*C,I[14]=(c*d-l*g-h*x)*C,I[15]=(i*g-n*d+r*x)*C,I):null}},56508:function(X,I,e){var A=e(36635);X.exports=function(k,o,T,b){var p,s,t,i,n,r,a,l,c,h,u=o[0],x=o[1],d=o[2],m=b[0],g=b[1],y=b[2],v=T[0],_=T[1],f=T[2];return Math.abs(u-v)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(d-f)<1e-6?A(k):(a=u-v,l=x-_,c=d-f,p=g*(c*=h=1/Math.sqrt(a*a+l*l+c*c))-y*(l*=h),s=y*(a*=h)-m*c,t=m*l-g*a,(h=Math.sqrt(p*p+s*s+t*t))?(p*=h=1/h,s*=h,t*=h):(p=0,s=0,t=0),i=l*t-c*s,n=c*p-a*t,r=a*s-l*p,(h=Math.sqrt(i*i+n*n+r*r))?(i*=h=1/h,n*=h,r*=h):(i=0,n=0,r=0),k[0]=p,k[1]=i,k[2]=a,k[3]=0,k[4]=s,k[5]=n,k[6]=l,k[7]=0,k[8]=t,k[9]=r,k[10]=c,k[11]=0,k[12]=-(p*u+s*x+t*d),k[13]=-(i*u+n*x+r*d),k[14]=-(a*u+l*x+c*d),k[15]=1,k)}},80944:function(X){X.exports=function(I,e,A){var k=e[0],o=e[1],T=e[2],b=e[3],p=e[4],s=e[5],t=e[6],i=e[7],n=e[8],r=e[9],a=e[10],l=e[11],c=e[12],h=e[13],u=e[14],x=e[15],d=A[0],m=A[1],g=A[2],y=A[3];return I[0]=d*k+m*p+g*n+y*c,I[1]=d*o+m*s+g*r+y*h,I[2]=d*T+m*t+g*a+y*u,I[3]=d*b+m*i+g*l+y*x,d=A[4],m=A[5],g=A[6],y=A[7],I[4]=d*k+m*p+g*n+y*c,I[5]=d*o+m*s+g*r+y*h,I[6]=d*T+m*t+g*a+y*u,I[7]=d*b+m*i+g*l+y*x,d=A[8],m=A[9],g=A[10],y=A[11],I[8]=d*k+m*p+g*n+y*c,I[9]=d*o+m*s+g*r+y*h,I[10]=d*T+m*t+g*a+y*u,I[11]=d*b+m*i+g*l+y*x,d=A[12],m=A[13],g=A[14],y=A[15],I[12]=d*k+m*p+g*n+y*c,I[13]=d*o+m*s+g*r+y*h,I[14]=d*T+m*t+g*a+y*u,I[15]=d*b+m*i+g*l+y*x,I}},97688:function(X){X.exports=function(I,e,A,k,o,T,b){var p=1/(e-A),s=1/(k-o),t=1/(T-b);return I[0]=-2*p,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=-2*s,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=2*t,I[11]=0,I[12]=(e+A)*p,I[13]=(o+k)*s,I[14]=(b+T)*t,I[15]=1,I}},51296:function(X){X.exports=function(I,e,A,k,o){var T=1/Math.tan(e/2),b=1/(k-o);return I[0]=T/A,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=T,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=(o+k)*b,I[11]=-1,I[12]=0,I[13]=0,I[14]=2*o*k*b,I[15]=0,I}},63688:function(X){X.exports=function(I,e,A,k){var o=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),s=2/(b+p),t=2/(o+T);return I[0]=s,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=t,I[6]=0,I[7]=0,I[8]=-(b-p)*s*.5,I[9]=(o-T)*t*.5,I[10]=k/(A-k),I[11]=-1,I[12]=0,I[13]=0,I[14]=k*A/(A-k),I[15]=0,I}},30016:function(X){X.exports=function(I,e,A,k){var o,T,b,p,s,t,i,n,r,a,l,c,h,u,x,d,m,g,y,v,_,f,S,w,E=k[0],P=k[1],C=k[2],O=Math.sqrt(E*E+P*P+C*C);return Math.abs(O)<1e-6?null:(E*=O=1/O,P*=O,C*=O,o=Math.sin(A),b=1-(T=Math.cos(A)),p=e[0],s=e[1],t=e[2],i=e[3],n=e[4],r=e[5],a=e[6],l=e[7],c=e[8],h=e[9],u=e[10],x=e[11],d=E*E*b+T,m=P*E*b+C*o,g=C*E*b-P*o,y=E*P*b-C*o,v=P*P*b+T,_=C*P*b+E*o,f=E*C*b+P*o,S=P*C*b-E*o,w=C*C*b+T,I[0]=p*d+n*m+c*g,I[1]=s*d+r*m+h*g,I[2]=t*d+a*m+u*g,I[3]=i*d+l*m+x*g,I[4]=p*y+n*v+c*_,I[5]=s*y+r*v+h*_,I[6]=t*y+a*v+u*_,I[7]=i*y+l*v+x*_,I[8]=p*f+n*S+c*w,I[9]=s*f+r*S+h*w,I[10]=t*f+a*S+u*w,I[11]=i*f+l*S+x*w,e!==I&&(I[12]=e[12],I[13]=e[13],I[14]=e[14],I[15]=e[15]),I)}},15456:function(X){X.exports=function(I,e,A){var k=Math.sin(A),o=Math.cos(A),T=e[4],b=e[5],p=e[6],s=e[7],t=e[8],i=e[9],n=e[10],r=e[11];return e!==I&&(I[0]=e[0],I[1]=e[1],I[2]=e[2],I[3]=e[3],I[12]=e[12],I[13]=e[13],I[14]=e[14],I[15]=e[15]),I[4]=T*o+t*k,I[5]=b*o+i*k,I[6]=p*o+n*k,I[7]=s*o+r*k,I[8]=t*o-T*k,I[9]=i*o-b*k,I[10]=n*o-p*k,I[11]=r*o-s*k,I}},64840:function(X){X.exports=function(I,e,A){var k=Math.sin(A),o=Math.cos(A),T=e[0],b=e[1],p=e[2],s=e[3],t=e[8],i=e[9],n=e[10],r=e[11];return e!==I&&(I[4]=e[4],I[5]=e[5],I[6]=e[6],I[7]=e[7],I[12]=e[12],I[13]=e[13],I[14]=e[14],I[15]=e[15]),I[0]=T*o-t*k,I[1]=b*o-i*k,I[2]=p*o-n*k,I[3]=s*o-r*k,I[8]=T*k+t*o,I[9]=b*k+i*o,I[10]=p*k+n*o,I[11]=s*k+r*o,I}},4192:function(X){X.exports=function(I,e,A){var k=Math.sin(A),o=Math.cos(A),T=e[0],b=e[1],p=e[2],s=e[3],t=e[4],i=e[5],n=e[6],r=e[7];return e!==I&&(I[8]=e[8],I[9]=e[9],I[10]=e[10],I[11]=e[11],I[12]=e[12],I[13]=e[13],I[14]=e[14],I[15]=e[15]),I[0]=T*o+t*k,I[1]=b*o+i*k,I[2]=p*o+n*k,I[3]=s*o+r*k,I[4]=t*o-T*k,I[5]=i*o-b*k,I[6]=n*o-p*k,I[7]=r*o-s*k,I}},68152:function(X){X.exports=function(I,e,A){var k=A[0],o=A[1],T=A[2];return I[0]=e[0]*k,I[1]=e[1]*k,I[2]=e[2]*k,I[3]=e[3]*k,I[4]=e[4]*o,I[5]=e[5]*o,I[6]=e[6]*o,I[7]=e[7]*o,I[8]=e[8]*T,I[9]=e[9]*T,I[10]=e[10]*T,I[11]=e[11]*T,I[12]=e[12],I[13]=e[13],I[14]=e[14],I[15]=e[15],I}},89412:function(X){X.exports=function(I){return"mat4("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+", "+I[8]+", "+I[9]+", "+I[10]+", "+I[11]+", "+I[12]+", "+I[13]+", "+I[14]+", "+I[15]+")"}},35176:function(X){X.exports=function(I,e,A){var k,o,T,b,p,s,t,i,n,r,a,l,c=A[0],h=A[1],u=A[2];return e===I?(I[12]=e[0]*c+e[4]*h+e[8]*u+e[12],I[13]=e[1]*c+e[5]*h+e[9]*u+e[13],I[14]=e[2]*c+e[6]*h+e[10]*u+e[14],I[15]=e[3]*c+e[7]*h+e[11]*u+e[15]):(k=e[0],o=e[1],T=e[2],b=e[3],p=e[4],s=e[5],t=e[6],i=e[7],n=e[8],r=e[9],a=e[10],l=e[11],I[0]=k,I[1]=o,I[2]=T,I[3]=b,I[4]=p,I[5]=s,I[6]=t,I[7]=i,I[8]=n,I[9]=r,I[10]=a,I[11]=l,I[12]=k*c+p*h+n*u+e[12],I[13]=o*c+s*h+r*u+e[13],I[14]=T*c+t*h+a*u+e[14],I[15]=b*c+i*h+l*u+e[15]),I}},86520:function(X){X.exports=function(I,e){if(I===e){var A=e[1],k=e[2],o=e[3],T=e[6],b=e[7],p=e[11];I[1]=e[4],I[2]=e[8],I[3]=e[12],I[4]=A,I[6]=e[9],I[7]=e[13],I[8]=k,I[9]=T,I[11]=e[14],I[12]=o,I[13]=b,I[14]=p}else I[0]=e[0],I[1]=e[4],I[2]=e[8],I[3]=e[12],I[4]=e[1],I[5]=e[5],I[6]=e[9],I[7]=e[13],I[8]=e[2],I[9]=e[6],I[10]=e[10],I[11]=e[14],I[12]=e[3],I[13]=e[7],I[14]=e[11],I[15]=e[15];return I}},23352:function(X,I,e){"use strict";var A=e(42771),k=e(55616),o=e(28624),T=e(55212),b=e(60463),p=e(72160),s=e(33888),t=e(14144),i=e(51160),n=e(58908),r=e(65819),a=e(23464),l=e(63768),c=e(50896),h=e(71920),u=e(47520),x=e(308).nextPow2,d=new b,m=!1;if(document.body){var g=document.body.appendChild(document.createElement("div"));g.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(g).fontStretch&&(m=!0),document.body.removeChild(g)}var y=function(v){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=T(v),this.shader=d.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),d.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(n(v)?v:{})};y.prototype.createShader=function(){var v=this.regl,_=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(f,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(f,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(f,S){return S.atlas.texture},charStep:function(f,S){return S.atlas.step},em:function(f,S){return S.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:v,draw:_,atlas:{}}},y.prototype.update=function(v){var _=this;if(typeof v=="string")v={text:v};else if(!v)return;(v=k(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(fe){return parseFloat(fe)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=i(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=u(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||v.font||(v.font=y.baseFontSize+"px sans-serif");var f,S=!1,w=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(fe,Se){if(typeof fe=="string")try{fe=A.parse(fe)}catch{fe=A.parse(y.baseFontSize+"px "+fe)}else{var be=fe.style,we=fe.weight,Me=fe.stretch,Ie=fe.variant;fe=A.parse(A.stringify(fe)),be&&(fe.style=be),we&&(fe.weight=we),Me&&(fe.stretch=Me),Ie&&(fe.variant=Ie)}var Oe=A.stringify({size:y.baseFontSize,family:fe.family,stretch:m?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style}),he=r(fe.size),_e=Math.round(he[0]*a(he[1]));if(_e!==_.fontSize[Se]&&(w=!0,_.fontSize[Se]=_e),!(_.font[Se]&&Oe==_.font[Se].baseString||(S=!0,_.font[Se]=y.fonts[Oe],_.font[Se]))){var Ae=fe.family.join(", "),De=[fe.style];fe.style!=fe.variant&&De.push(fe.variant),fe.variant!=fe.weight&&De.push(fe.weight),m&&fe.weight!=fe.stretch&&De.push(fe.stretch),_.font[Se]={baseString:Oe,family:Ae,weight:fe.weight,stretch:fe.stretch,style:fe.style,variant:fe.variant,width:{},kerning:{},metrics:h(Ae,{origin:"top",fontSize:y.baseFontSize,fontStyle:De.join(" ")})},y.fonts[Oe]=_.font[Se]}}),(S||w)&&this.font.forEach(function(fe,Se){var be=A.stringify({size:_.fontSize[Se],family:fe.family,stretch:m?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style});if(_.fontAtlas[Se]=_.shader.atlas[be],!_.fontAtlas[Se]){var we=fe.metrics;_.shader.atlas[be]=_.fontAtlas[Se]={fontString:be,step:2*Math.ceil(_.fontSize[Se]*we.bottom*.5),em:_.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}v.text==null&&(v.text=_.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var E=Array(.5*v.position.length),P=0;P<E.length;P++)E[P]=v.text;v.text=E}if(v.text!=null||S){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var C=1;C<v.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+v.text[C-1].length,this.count+=v.text[C].length,this.counts.push(v.text[C].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];f=[],this.font.forEach(function(fe,Se){y.atlasContext.font=fe.baseString;for(var be=_.fontAtlas[Se],we=0;we<_.text.length;we++){var Me=_.text.charAt(we);if(be.ids[Me]==null&&(be.ids[Me]=be.chars.length,be.chars.push(Me),f.push(Me)),fe.width[Me]==null&&(fe.width[Me]=y.atlasContext.measureText(Me).width/y.baseFontSize,_.kerning)){var Ie=[];for(var Oe in fe.width)Ie.push(Oe+Me,Me+Oe);c(fe.kerning,l(fe.family,{pairs:Ie}))}}})}if(v.position)if(v.position.length>2){for(var O=!v.position[0].length,R=t.mallocFloat(2*this.count),U=0,D=0;U<this.counts.length;U++){var N=this.counts[U];if(O)for(var W=0;W<N;W++)R[D++]=v.position[2*U],R[D++]=v.position[2*U+1];else for(var F=0;F<N;F++)R[D++]=v.position[U][0],R[D++]=v.position[U][1]}this.position.call?this.position({type:"float",data:R}):this.position=this.regl.buffer({type:"float",data:R}),t.freeFloat(R)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||S){var j=t.mallocUint8(this.count),q=t.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,ee=0;te<this.counts.length;te++){for(var Q=this.counts[te],J=this.font[te]||this.font[0],K=this.fontAtlas[te]||this.fontAtlas[0],Y=0;Y<Q;Y++){var ie=this.text.charAt(ee),se=this.text.charAt(ee-1);if(j[ee]=K.ids[ie],q[2*ee]=J.width[ie],Y){var ae=q[2*ee-2],ue=q[2*ee],ve=q[2*ee-1]+.5*ae+.5*ue;if(this.kerning){var ye=J.kerning[se+ie];ye&&(ve+=.001*ye)}q[2*ee+1]=ve}else q[2*ee+1]=.5*q[2*ee];ee++}this.textWidth.push(q.length?.5*q[2*ee-2]+q[2*ee-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:j,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),t.freeUint8(j),t.freeFloat(q),f.length&&this.font.forEach(function(fe,Se){var be=_.fontAtlas[Se],we=be.step,Me=Math.floor(y.maxAtlasSize/we),Ie=Math.min(Me,be.chars.length),Oe=Math.ceil(be.chars.length/Ie),he=x(Ie*we),_e=x(Oe*we);be.width=he,be.height=_e,be.rows=Oe,be.cols=Ie,be.em&&be.texture({data:s({canvas:y.atlasCanvas,font:be.fontString,chars:be.chars,shape:[he,_e],step:[we,we]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(fe,Se){var be=Array.isArray(_.align)?_.align.length>1?_.align[Se]:_.align[0]:_.align;if(typeof be=="number")return be;switch(be){case"right":case"end":return-fe;case"center":case"centre":case"middle":return .5*-fe}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(fe,Se){var be=(_.font[Se]||_.font[0]).metrics,we=0;return we+=.5*be.bottom,-1*(we+=typeof fe=="number"?fe-be.baseline:-be[fe])})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color!="string"&&isNaN(v.color)){var de;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var pe=v.color.length;de=t.mallocUint8(pe);for(var ge=(v.color.subarray||v.color.slice).bind(v.color),ke=0;ke<pe;ke+=4)de.set(p(ge(ke,ke+4),"uint8"),ke)}else{var Ee=v.color.length;de=t.mallocUint8(4*Ee);for(var me=0;me<Ee;me++)de.set(p(v.color[me]||0,"uint8"),4*me)}this.color=de}else this.color=p(v.color,"uint8");if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var oe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(oe);for(var re=0;re<this.batch.length;re++)this.batch[re]={count:this.counts.length>1?this.counts[re]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[re]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*re,4*re+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[re]:this.opacity,baseline:this.baselineOffset[re]!=null?this.baselineOffset[re]:this.baselineOffset[0],align:this.align?this.alignOffset[re]!=null?this.alignOffset[re]:this.alignOffset[0]:0,atlas:this.fontAtlas[re]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*re,2*re+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},y.prototype.destroy=function(){},y.prototype.kerning=!0,y.prototype.position={constant:new Float32Array(2)},y.prototype.translate=null,y.prototype.scale=null,y.prototype.font=null,y.prototype.text="",y.prototype.positionOffset=[0,0],y.prototype.opacity=1,y.prototype.color=new Uint8Array([0,0,0,255]),y.prototype.alignOffset=[0,0],y.maxAtlasSize=1024,y.atlasCanvas=document.createElement("canvas"),y.atlasContext=y.atlasCanvas.getContext("2d",{alpha:!1}),y.baseFontSize=64,y.fonts={},X.exports=y},55212:function(X,I,e){"use strict";var A=e(55616);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var p=b.container.getBoundingClientRect();b.canvas.width=b.width||p.right-p.left,b.canvas.height=b.height||p.bottom-p.top}}function o(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}X.exports=function(b){var p;if(b?typeof b=="string"&&(b={container:b}):b={},(b=o(b)||typeof(p=b).nodeName=="string"&&typeof p.appendChild=="function"&&typeof p.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:A(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}o(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},26444:function(X){X.exports=function(I){typeof I=="string"&&(I=[I]);for(var e=[].slice.call(arguments,1),A=[],k=0;k<I.length-1;k++)A.push(I[k],e[k]||"");return A.push(I[k]),A.join("")}},2304:function(X,I,e){"use strict";var A=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(A)try{A([],"length")}catch{A=null}X.exports=A},52264:function(X,I,e){"use strict";var A,k=e(24200);A=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,X.exports=A},89184:function(X,I,e){"use strict";var A=e(24200);X.exports=A&&function(){var k=!1;try{var o=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{k=!1}return k}()},39640:function(X,I,e){"use strict";var A=e(53664)("%Object.defineProperty%",!0),k=function(){if(A)try{return A({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return A([],"length",{value:1}).length!==1}catch{return!0}},X.exports=k},69572:function(X){"use strict";var I={foo:{}},e=Object;X.exports=function(){return{__proto__:I}.foo===I.foo&&!({__proto__:null}instanceof e)}},71080:function(X,I,e){"use strict";var A=typeof Symbol<"u"&&Symbol,k=e(89320);X.exports=function(){return typeof A=="function"&&typeof Symbol=="function"&&typeof A("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},89320:function(X){"use strict";X.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var I={},e=Symbol("test"),A=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(A)!=="[object Symbol]")return!1;for(e in I[e]=42,I)return!1;if(typeof Object.keys=="function"&&Object.keys(I).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(I).length!==0)return!1;var k=Object.getOwnPropertySymbols(I);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(I,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(I,e);if(o.value!==42||o.enumerable!==!0)return!1}return!0}},46672:function(X,I,e){"use strict";var A=e(89320);X.exports=function(){return A()&&!!Symbol.toStringTag}},92064:function(X,I,e){"use strict";var A=Function.prototype.call,k=Object.prototype.hasOwnProperty,o=e(8844);X.exports=o.call(A,k)},35984:function(X,I){I.read=function(e,A,k,o,T){var b,p,s=8*T-o-1,t=(1<<s)-1,i=t>>1,n=-7,r=k?T-1:0,a=k?-1:1,l=e[A+r];for(r+=a,b=l&(1<<-n)-1,l>>=-n,n+=s;n>0;b=256*b+e[A+r],r+=a,n-=8);for(p=b&(1<<-n)-1,b>>=-n,n+=o;n>0;p=256*p+e[A+r],r+=a,n-=8);if(b===0)b=1-i;else{if(b===t)return p?NaN:1/0*(l?-1:1);p+=Math.pow(2,o),b-=i}return(l?-1:1)*p*Math.pow(2,b-o)},I.write=function(e,A,k,o,T,b){var p,s,t,i=8*b-T-1,n=(1<<i)-1,r=n>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=o?0:b-1,c=o?1:-1,h=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(s=isNaN(A)?1:0,p=n):(p=Math.floor(Math.log(A)/Math.LN2),A*(t=Math.pow(2,-p))<1&&(p--,t*=2),(A+=p+r>=1?a/t:a*Math.pow(2,1-r))*t>=2&&(p++,t/=2),p+r>=n?(s=0,p=n):p+r>=1?(s=(A*t-1)*Math.pow(2,T),p+=r):(s=A*Math.pow(2,r-1)*Math.pow(2,T),p=0));T>=8;e[k+l]=255&s,l+=c,s/=256,T-=8);for(p=p<<T|s,i+=T;i>0;e[k+l]=255&p,l+=c,p/=256,i-=8);e[k+l-c]|=128*h}},6768:function(X){typeof Object.create=="function"?X.exports=function(I,e){e&&(I.super_=e,I.prototype=Object.create(e.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}))}:X.exports=function(I,e){if(e){I.super_=e;var A=function(){};A.prototype=e.prototype,I.prototype=new A,I.prototype.constructor=I}}},91148:function(X,I,e){"use strict";var A=e(46672)(),k=e(99676)("Object.prototype.toString"),o=function(p){return!(A&&p&&typeof p=="object"&&Symbol.toStringTag in p)&&k(p)==="[object Arguments]"},T=function(p){return!!o(p)||p!==null&&typeof p=="object"&&typeof p.length=="number"&&p.length>=0&&k(p)!=="[object Array]"&&k(p.callee)==="[object Function]"},b=function(){return o(arguments)}();o.isLegacyArguments=T,X.exports=b?o:T},24200:function(X){X.exports=!0},90720:function(X){"use strict";var I,e,A=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{I=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,I)}catch(r){r!==e&&(k=null)}else k=null;var o=/^\s*class\b/,T=function(r){try{var a=A.call(r);return o.test(a)}catch{return!1}},b=function(r){try{return!T(r)&&(A.call(r),!0)}catch{return!1}},p=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var n=document.all;p.call(n)===p.call(document.all)&&(i=function(r){if((t||!r)&&(r===void 0||typeof r=="object"))try{var a=p.call(r);return(a==="[object HTMLAllCollection]"||a==="[object HTML document.all class]"||a==="[object HTMLCollection]"||a==="[object Object]")&&r("")==null}catch{}return!1})}X.exports=k?function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{k(r,null,I)}catch(a){if(a!==e)return!1}return!T(r)&&b(r)}:function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(s)return b(r);if(T(r))return!1;var a=p.call(r);return!(a!=="[object Function]"&&a!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(a))&&b(r)}},84420:function(X,I,e){"use strict";var A,k=Object.prototype.toString,o=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(46672)(),p=Object.getPrototypeOf;X.exports=function(s){if(typeof s!="function")return!1;if(T.test(o.call(s)))return!0;if(!b)return k.call(s)==="[object GeneratorFunction]";if(!p)return!1;if(A===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();A=!!t&&p(t)}return p(s)===A}},96604:function(X){"use strict";X.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(X){"use strict";X.exports=function(I){return I!=I}},1560:function(X,I,e){"use strict";var A=e(57916),k=e(81288),o=e(85992),T=e(57740),b=e(59736),p=A(T(),Number);k(p,{getPolyfill:T,implementation:o,shim:b}),X.exports=p},57740:function(X,I,e){"use strict";var A=e(85992);X.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:A}},59736:function(X,I,e){"use strict";var A=e(81288),k=e(57740);X.exports=function(){var o=k();return A(Number,{isNaN:o},{isNaN:function(){return Number.isNaN!==o}}),o}},18400:function(X){"use strict";X.exports=function(I){var e=typeof I;return I!==null&&(e==="object"||e==="function")}},58908:function(X){"use strict";var I=Object.prototype.toString;X.exports=function(e){var A;return I.call(e)==="[object Object]"&&((A=Object.getPrototypeOf(e))===null||A===Object.getPrototypeOf({}))}},94576:function(X){"use strict";X.exports=function(I){for(var e,A=I.length,k=0;k<A;k++)if(((e=I.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(X){"use strict";X.exports=function(I){return typeof I=="string"&&(I=I.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(I)&&/[\dz]$/i.test(I)&&I.length>4))}},7728:function(X,I,e){"use strict";var A=e(46492),k=e(63436),o=e(99676),T=o("Object.prototype.toString"),b=e(46672)(),p=e(2304),s=typeof globalThis>"u"?e.g:globalThis,t=k(),i=o("Array.prototype.indexOf",!0)||function(l,c){for(var h=0;h<l.length;h+=1)if(l[h]===c)return h;return-1},n=o("String.prototype.slice"),r={},a=Object.getPrototypeOf;b&&p&&a&&A(t,function(l){var c=new s[l];if(Symbol.toStringTag in c){var h=a(c),u=p(h,Symbol.toStringTag);if(!u){var x=a(h);u=p(x,Symbol.toStringTag)}r[l]=u.get}}),X.exports=function(l){if(!l||typeof l!="object")return!1;if(!b||!(Symbol.toStringTag in l)){var c=n(T(l),8,-1);return i(t,c)>-1}return!!p&&function(h){var u=!1;return A(r,function(x,d){if(!u)try{u=x.call(h)===d}catch{}}),u}(l)}},76244:function(X){"use strict";X.exports=Math.log2||function(I){return Math.log(I)*Math.LOG2E}},62644:function(X,I,e){"use strict";X.exports=function(k,o){o||(o=k,k=window);var T=0,b=0,p=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(m){var g=!1;return"altKey"in m&&(g=g||m.altKey!==s.alt,s.alt=!!m.altKey),"shiftKey"in m&&(g=g||m.shiftKey!==s.shift,s.shift=!!m.shiftKey),"ctrlKey"in m&&(g=g||m.ctrlKey!==s.control,s.control=!!m.ctrlKey),"metaKey"in m&&(g=g||m.metaKey!==s.meta,s.meta=!!m.metaKey),g}function n(m,g){var y=A.x(g),v=A.y(g);"buttons"in g&&(m=0|g.buttons),(m!==T||y!==b||v!==p||i(g))&&(T=0|m,b=y||0,p=v||0,o&&o(T,b,p,s))}function r(m){n(0,m)}function a(){(T||b||p||s.shift||s.alt||s.meta||s.control)&&(b=p=0,T=0,s.shift=s.alt=s.control=s.meta=!1,o&&o(0,0,0,s))}function l(m){i(m)&&o&&o(T,b,p,s)}function c(m){A.buttons(m)===0?n(0,m):n(T,m)}function h(m){n(T|A.buttons(m),m)}function u(m){n(T&~A.buttons(m),m)}function x(){t||(t=!0,k.addEventListener("mousemove",c),k.addEventListener("mousedown",h),k.addEventListener("mouseup",u),k.addEventListener("mouseleave",r),k.addEventListener("mouseenter",r),k.addEventListener("mouseout",r),k.addEventListener("mouseover",r),k.addEventListener("blur",a),k.addEventListener("keyup",l),k.addEventListener("keydown",l),k.addEventListener("keypress",l),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}x();var d={element:k};return Object.defineProperties(d,{enabled:{get:function(){return t},set:function(m){m?x():t&&(t=!1,k.removeEventListener("mousemove",c),k.removeEventListener("mousedown",h),k.removeEventListener("mouseup",u),k.removeEventListener("mouseleave",r),k.removeEventListener("mouseenter",r),k.removeEventListener("mouseout",r),k.removeEventListener("mouseover",r),k.removeEventListener("blur",a),k.removeEventListener("keyup",l),k.removeEventListener("keydown",l),k.removeEventListener("keypress",l),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),d};var A=e(93784)},29128:function(X){var I={left:0,top:0};X.exports=function(e,A,k){A=A||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var o,T=e.clientX||0,b=e.clientY||0,p=(o=A)===window||o===document||o===document.body?I:o.getBoundingClientRect();return k[0]=T-p.left,k[1]=b-p.top,k}},93784:function(X,I){"use strict";function e(A){return A.target||A.srcElement||window}I.buttons=function(A){if(typeof A=="object"){if("buttons"in A)return A.buttons;if("which"in A){if((k=A.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in A){var k;if((k=A.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},I.element=e,I.x=function(A){if(typeof A=="object"){if("offsetX"in A)return A.offsetX;var k=e(A).getBoundingClientRect();return A.clientX-k.left}return 0},I.y=function(A){if(typeof A=="object"){if("offsetY"in A)return A.offsetY;var k=e(A).getBoundingClientRect();return A.clientY-k.top}return 0}},97264:function(X,I,e){"use strict";var A=e(23464);X.exports=function(k,o,T){typeof k=="function"&&(T=!!o,o=k,k=window);var b=A("ex",k),p=function(s){T&&s.preventDefault();var t=s.deltaX||0,i=s.deltaY||0,n=s.deltaZ||0,r=1;switch(s.deltaMode){case 1:r=b;break;case 2:r=window.innerHeight}if(i*=r,n*=r,(t*=r)||i||n)return o(t,i,n,s)};return k.addEventListener("wheel",p),p}},88324:function(X,I,e){var A;(function(k,o,T){o[k]=o[k]||function(){"use strict";var b,p,s,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(y){return setImmediate(y)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(y,v,_,f){return Object.defineProperty(y,v,{value:_,writable:!0,configurable:f!==!1})}}catch{b=function(v,_,f){return v[_]=f,v}}function n(y,v){s.add(y,v),p||(p=i(s.drain))}function r(y){var v,_=typeof y;return y==null||_!="object"&&_!="function"||(v=y.then),typeof v=="function"&&v}function a(){for(var y=0;y<this.chain.length;y++)l(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function l(y,v,_){var f,S;try{v===!1?_.reject(y.msg):(f=v===!0?y.msg:v.call(void 0,y.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(S=r(f))?S.call(f,_.resolve,_.reject):_.resolve(f)}catch(w){_.reject(w)}}function c(y){var v,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(v=r(y))?n(function(){var f=new x(_);try{v.call(y,function(){c.apply(f,arguments)},function(){h.apply(f,arguments)})}catch(S){h.call(f,S)}}):(_.msg=y,_.state=1,_.chain.length>0&&n(a,_))}catch(f){h.call(new x(_),f)}}}function h(y){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=y,v.state=2,v.chain.length>0&&n(a,v))}function u(y,v,_,f){for(var S=0;S<v.length;S++)(function(w){y.resolve(v[w]).then(function(E){_(w,E)},f)})(S)}function x(y){this.def=y,this.triggered=!1}function d(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var v=new d(this);this.then=function(_,f){var S={success:typeof _!="function"||_,failure:typeof f=="function"&&f};return S.promise=new this.constructor(function(w,E){if(typeof w!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=w,S.reject=E}),v.chain.push(S),v.state!==0&&n(a,v),S.promise},this.catch=function(_){return this.then(void 0,_)};try{y.call(void 0,function(_){c.call(v,_)},function(_){h.call(v,_)})}catch(_){h.call(v,_)}}s=function(){var y,v,_;function f(S,w){this.fn=S,this.self=w,this.next=void 0}return{add:function(S,w){_=new f(S,w),v?v.next=_:y=_,v=_,_=void 0},drain:function(){var S=y;for(y=v=p=void 0;S;)S.fn.call(S.self),S=S.next}}}();var g=b({},"constructor",m,!1);return m.prototype=g,b(g,"__NPO__",0,!1),b(m,"resolve",function(y){return y&&typeof y=="object"&&y.__NPO__===1?y:new this(function(v,_){if(typeof v!="function"||typeof _!="function")throw TypeError("Not a function");v(y)})}),b(m,"reject",function(y){return new this(function(v,_){if(typeof v!="function"||typeof _!="function")throw TypeError("Not a function");_(y)})}),b(m,"all",function(y){var v=this;return t.call(y)!="[object Array]"?v.reject(TypeError("Not an array")):y.length===0?v.resolve([]):new v(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");var S=y.length,w=Array(S),E=0;u(v,y,function(P,C){w[P]=C,++E===S&&_(w)},f)})}),b(m,"race",function(y){var v=this;return t.call(y)!="[object Array]"?v.reject(TypeError("Not an array")):new v(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");u(v,y,function(S,w){_(w)},f)})}),m}(),X.exports?X.exports=o[k]:(A=(function(){return o[k]}).call(I,e,I,X))===void 0||(X.exports=A)})("Promise",e.g!==void 0?e.g:this)},48816:function(X){var I=Math.PI,e=b(120);function A(p,s,t,i){return["C",p,s,t,i,t,i]}function k(p,s,t,i,n,r){return["C",p/3+.6666666666666666*t,s/3+.6666666666666666*i,n/3+.6666666666666666*t,r/3+.6666666666666666*i,n,r]}function o(p,s,t,i,n,r,a,l,c,h){if(h)S=h[0],w=h[1],_=h[2],f=h[3];else{var u=T(p,s,-n);p=u.x,s=u.y;var x=(p-(l=(u=T(l,c,-n)).x))/2,d=(s-(c=u.y))/2,m=x*x/(t*t)+d*d/(i*i);m>1&&(t*=m=Math.sqrt(m),i*=m);var g=t*t,y=i*i,v=(r==a?-1:1)*Math.sqrt(Math.abs((g*y-g*d*d-y*x*x)/(g*d*d+y*x*x)));v==1/0&&(v=1);var _=v*t*d/i+(p+l)/2,f=v*-i*x/t+(s+c)/2,S=Math.asin(((s-f)/i).toFixed(9)),w=Math.asin(((c-f)/i).toFixed(9));(S=p<_?I-S:S)<0&&(S=2*I+S),(w=l<_?I-w:w)<0&&(w=2*I+w),a&&S>w&&(S-=2*I),!a&&w>S&&(w-=2*I)}if(Math.abs(w-S)>e){var E=w,P=l,C=c;w=S+e*(a&&w>S?1:-1);var O=o(l=_+t*Math.cos(w),c=f+i*Math.sin(w),t,i,n,0,a,P,C,[w,E,_,f])}var R=Math.tan((w-S)/4),U=4/3*t*R,D=4/3*i*R,N=[2*p-(p+U*Math.sin(S)),2*s-(s-D*Math.cos(S)),l+U*Math.sin(w),c-D*Math.cos(w),l,c];if(h)return N;O&&(N=N.concat(O));for(var W=0;W<N.length;){var F=T(N[W],N[W+1],n);N[W++]=F.x,N[W++]=F.y}return N}function T(p,s,t){return{x:p*Math.cos(t)-s*Math.sin(t),y:p*Math.sin(t)+s*Math.cos(t)}}function b(p){return p*(I/180)}X.exports=function(p){for(var s,t=[],i=0,n=0,r=0,a=0,l=null,c=null,h=0,u=0,x=0,d=p.length;x<d;x++){var m=p[x],g=m[0];switch(g){case"M":r=m[1],a=m[2];break;case"A":(m=o(h,u,m[1],m[2],b(m[3]),m[4],m[5],m[6],m[7])).unshift("C"),m.length>7&&(t.push(m.splice(0,7)),m.unshift("C"));break;case"S":var y=h,v=u;s!="C"&&s!="S"||(y+=y-i,v+=v-n),m=["C",y,v,m[1],m[2],m[3],m[4]];break;case"T":s=="Q"||s=="T"?(l=2*h-l,c=2*u-c):(l=h,c=u),m=k(h,u,l,c,m[1],m[2]);break;case"Q":l=m[1],c=m[2],m=k(h,u,m[1],m[2],m[3],m[4]);break;case"L":m=A(h,u,m[1],m[2]);break;case"H":m=A(h,u,m[1],u);break;case"V":m=A(h,u,h,m[1]);break;case"Z":m=A(h,u,r,a)}s=g,h=m[m.length-2],u=m[m.length-1],m.length>4?(i=m[m.length-4],n=m[m.length-3]):(i=h,n=u),t.push(m)}return t}},50896:function(X){"use strict";var I=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;X.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var o={},T=0;T<10;T++)o["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(o).map(function(p){return o[p]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(p){b[p]=p}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,o){for(var T,b,p=function(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}(k),s=1;s<arguments.length;s++){for(var t in T=Object(arguments[s]))e.call(T,t)&&(p[t]=T[t]);if(I){b=I(T);for(var i=0;i<b.length;i++)A.call(T,b[i])&&(p[b[i]]=T[b[i]])}}return p}},76835:function(X){"use strict";var I=function(e){return e!=e};X.exports=function(e,A){return e===0&&A===0?1/e==1/A:e===A||!(!I(e)||!I(A))}},39896:function(X,I,e){"use strict";var A=e(81288),k=e(57916),o=e(76835),T=e(66148),b=e(16408),p=k(T(),Object);A(p,{getPolyfill:T,implementation:o,shim:b}),X.exports=p},66148:function(X,I,e){"use strict";var A=e(76835);X.exports=function(){return typeof Object.is=="function"?Object.is:A}},16408:function(X,I,e){"use strict";var A=e(66148),k=e(81288);X.exports=function(){var o=A();return k(Object,{is:o},{is:function(){return Object.is!==o}}),o}},32764:function(X,I,e){"use strict";var A;if(!Object.keys){var k=Object.prototype.hasOwnProperty,o=Object.prototype.toString,T=e(97344),b=Object.prototype.propertyIsEnumerable,p=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(a){var l=a.constructor;return l&&l.prototype===a},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},r=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!n["$"+a]&&k.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{i(window[a])}catch{return!0}}catch{return!0}return!1}();A=function(a){var l=a!==null&&typeof a=="object",c=o.call(a)==="[object Function]",h=T(a),u=l&&o.call(a)==="[object String]",x=[];if(!l&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var d=s&&c;if(u&&a.length>0&&!k.call(a,0))for(var m=0;m<a.length;++m)x.push(String(m));if(h&&a.length>0)for(var g=0;g<a.length;++g)x.push(String(g));else for(var y in a)d&&y==="prototype"||!k.call(a,y)||x.push(String(y));if(p)for(var v=function(f){if(typeof window>"u"||!r)return i(f);try{return i(f)}catch{return!1}}(a),_=0;_<t.length;++_)v&&t[_]==="constructor"||!k.call(a,t[_])||x.push(t[_]);return x}}X.exports=A},41820:function(X,I,e){"use strict";var A=Array.prototype.slice,k=e(97344),o=Object.keys,T=o?function(p){return o(p)}:e(32764),b=Object.keys;T.shim=function(){if(Object.keys){var p=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);p||(Object.keys=function(s){return k(s)?b(A.call(s)):b(s)})}else Object.keys=T;return Object.keys||T},X.exports=T},97344:function(X){"use strict";var I=Object.prototype.toString;X.exports=function(e){var A=I.call(e),k=A==="[object Arguments]";return k||(k=A!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&I.call(e.callee)==="[object Function]"),k}},32868:function(X){"use strict";function I(k,o){if(typeof k!="string")return[k];var T=[k];typeof o=="string"||Array.isArray(o)?o={brackets:o}:o||(o={});var b=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],p=o.escape||"___",s=!!o.flat;b.forEach(function(i){var n=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),r=[];function a(l,c,h){var u=T.push(l.slice(i[0].length,-i[1].length))-1;return r.push(u),p+u+p}T.forEach(function(l,c){for(var h,u=0;l!=h;)if(h=l,l=l.replace(n,a),u++>1e4)throw Error("References have circular dependency. Please, check them.");T[c]=l}),r=r.reverse(),T=T.map(function(l){return r.forEach(function(c){l=l.replace(new RegExp("(\\"+p+c+"\\"+p+")","g"),i[0]+"$1"+i[1])}),l})});var t=new RegExp("\\"+p+"([0-9]+)\\"+p);return s?T:function i(n,r,a){for(var l,c=[],h=0;l=t.exec(n);){if(h++>1e4)throw Error("Circular references in parenthesis");c.push(n.slice(0,l.index)),c.push(i(r[l[1]],r)),n=n.slice(l.index+l[0].length)}return c.push(n),c}(T[0],T)}function e(k,o){if(o&&o.flat){var T,b=o&&o.escape||"___",p=k[0];if(!p)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;p!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=p,p=p.replace(s,i)}return p}return k.reduce(function n(r,a){return Array.isArray(a)&&(a=a.reduce(n,"")),r+a},"");function i(n,r){if(k[r]==null)throw Error("Reference "+r+"is undefined");return k[r]}}function A(k,o){return Array.isArray(k)?e(k,o):I(k,o)}A.parse=I,A.stringify=e,X.exports=A},51160:function(X,I,e){"use strict";var A=e(55616);X.exports=function(k){var o;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?o=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(o={x:(k=A(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?o.width=k.right-o.x:o.width=0:o.width=k.width,k.height==null?k.bottom?o.height=k.bottom-o.y:o.height=0:o.height=k.height),o}},21984:function(X){X.exports=function(k){var o=[];return k.replace(e,function(T,b,p){var s=b.toLowerCase();for(p=function(t){var i=t.match(A);return i?i.map(Number):[]}(p),s=="m"&&p.length>2&&(o.push([b].concat(p.splice(0,2))),s="l",b=b=="m"?"l":"L");;){if(p.length==I[s])return p.unshift(b),o.push(p);if(p.length<I[s])throw new Error("malformed path data");o.push([b].concat(p.splice(0,I[s])))}}),o};var I={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,A=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(X){X.exports=function(I,e){e||(e=[0,""]),I=String(I);var A=parseFloat(I,10);return e[0]=A,e[1]=I.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(X,I,e){var A=e(4168);(function(){var k,o,T,b,p,s;typeof performance<"u"&&performance!==null&&performance.now?X.exports=function(){return performance.now()}:A!=null&&A.hrtime?(X.exports=function(){return(k()-p)/1e6},o=A.hrtime,b=(k=function(){var t;return 1e9*(t=o())[0]+t[1]})(),s=1e9*A.uptime(),p=b-s):Date.now?(X.exports=function(){return Date.now()-T},T=Date.now()):(X.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},55616:function(X){"use strict";X.exports=function(A,k,o){var T,b,p={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(b=0;b<k.length;b++)s[k[b]]=!0;k=s}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var i=k[T];if(Array.isArray(i))for(b=0;b<i.length;b++){var n=i[b];if(o&&(t[n]=!0),n in A){if(p[T]=A[n],o)for(var r=b;r<i.length;r++)t[i[r]]=!0;break}}else T in A&&(k[T]&&(p[T]=A[T]),o&&(t[T]=!0))}if(o)for(T in A)t[T]||(p[T]=A[T]);return p};var I={};function e(A){return I[A]?I[A]:(typeof A=="string"&&(A=I[A]=A.split(/\s*,\s*|\s+/)),A)}},61456:function(X){X.exports=function(I,e,A,k){var o=I[0],T=I[1],b=!1;A===void 0&&(A=0),k===void 0&&(k=e.length);for(var p=k-A,s=0,t=p-1;s<p;t=s++){var i=e[s+A][0],n=e[s+A][1],r=e[t+A][0],a=e[t+A][1];n>T!=a>T&&o<(r-i)*(T-n)/(a-n)+i&&(b=!b)}return b}},14756:function(X,I,e){var A,k=e(7688),o=e(28648),T=e(72200),b=e(11403),p=e(82368),s=e(17792),t=!1,i=o();function n(r,a,l){var c=A.segments(r),h=A.segments(a),u=l(A.combine(c,h));return A.polygon(u)}A={buildLog:function(r){return r===!0?t=k():r===!1&&(t=!1),t!==!1&&t.list},epsilon:function(r){return i.epsilon(r)},segments:function(r){var a=T(!0,i,t);return r.regions.forEach(a.addRegion),{segments:a.calculate(r.inverted),inverted:r.inverted}},combine:function(r,a){return{combined:T(!1,i,t).calculate(r.segments,r.inverted,a.segments,a.inverted),inverted1:r.inverted,inverted2:a.inverted}},selectUnion:function(r){return{segments:p.union(r.combined,t),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:p.intersect(r.combined,t),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:p.difference(r.combined,t),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:p.differenceRev(r.combined,t),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:p.xor(r.combined,t),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:b(r.segments,i,t),inverted:r.inverted}},polygonFromGeoJSON:function(r){return s.toPolygon(A,r)},polygonToGeoJSON:function(r){return s.fromPolygon(A,i,r)},union:function(r,a){return n(r,a,A.selectUnion)},intersect:function(r,a){return n(r,a,A.selectIntersect)},difference:function(r,a){return n(r,a,A.selectDifference)},differenceRev:function(r,a){return n(r,a,A.selectDifferenceRev)},xor:function(r,a){return n(r,a,A.selectXor)}},typeof window=="object"&&(window.PolyBool=A),X.exports=A},7688:function(X){X.exports=function(){var I,e=0,A=!1;function k(o,T){return I.list.push({type:o,data:T?JSON.parse(JSON.stringify(T)):void 0}),I}return I={list:[],segmentId:function(){return e++},checkIntersection:function(o,T){return k("check",{seg1:o,seg2:T})},segmentChop:function(o,T){return k("div_seg",{seg:o,pt:T}),k("chop",{seg:o,pt:T})},statusRemove:function(o){return k("pop_seg",{seg:o})},segmentUpdate:function(o){return k("seg_update",{seg:o})},segmentNew:function(o,T){return k("new_seg",{seg:o,primary:T})},segmentRemove:function(o){return k("rem_seg",{seg:o})},tempStatus:function(o,T,b){return k("temp_status",{seg:o,above:T,below:b})},rewind:function(o){return k("rewind",{seg:o})},status:function(o,T,b){return k("status",{seg:o,above:T,below:b})},vert:function(o){return o===A?I:(A=o,k("vert",{x:o}))},log:function(o){return typeof o!="string"&&(o=JSON.stringify(o,!1,"  ")),k("log",{txt:o})},reset:function(){return k("reset")},selected:function(o){return k("selected",{segs:o})},chainStart:function(o){return k("chain_start",{seg:o})},chainRemoveHead:function(o,T){return k("chain_rem_head",{index:o,pt:T})},chainRemoveTail:function(o,T){return k("chain_rem_tail",{index:o,pt:T})},chainNew:function(o,T){return k("chain_new",{pt1:o,pt2:T})},chainMatch:function(o){return k("chain_match",{index:o})},chainClose:function(o){return k("chain_close",{index:o})},chainAddHead:function(o,T){return k("chain_add_head",{index:o,pt:T})},chainAddTail:function(o,T){return k("chain_add_tail",{index:o,pt:T})},chainConnect:function(o,T){return k("chain_con",{index1:o,index2:T})},chainReverse:function(o){return k("chain_rev",{index:o})},chainJoin:function(o,T){return k("chain_join",{index1:o,index2:T})},done:function(){return k("done")}}}},28648:function(X){X.exports=function(I){typeof I!="number"&&(I=1e-10);var e={epsilon:function(A){return typeof A=="number"&&(I=A),I},pointAboveOrOnLine:function(A,k,o){var T=k[0],b=k[1],p=o[0],s=o[1],t=A[0];return(p-T)*(A[1]-b)-(s-b)*(t-T)>=-I},pointBetween:function(A,k,o){var T=A[1]-k[1],b=o[0]-k[0],p=A[0]-k[0],s=o[1]-k[1],t=p*b+T*s;return!(t<I||t-(b*b+s*s)>-I)},pointsSameX:function(A,k){return Math.abs(A[0]-k[0])<I},pointsSameY:function(A,k){return Math.abs(A[1]-k[1])<I},pointsSame:function(A,k){return e.pointsSameX(A,k)&&e.pointsSameY(A,k)},pointsCompare:function(A,k){return e.pointsSameX(A,k)?e.pointsSameY(A,k)?0:A[1]<k[1]?-1:1:A[0]<k[0]?-1:1},pointsCollinear:function(A,k,o){var T=A[0]-k[0],b=A[1]-k[1],p=k[0]-o[0],s=k[1]-o[1];return Math.abs(T*s-p*b)<I},linesIntersect:function(A,k,o,T){var b=k[0]-A[0],p=k[1]-A[1],s=T[0]-o[0],t=T[1]-o[1],i=b*t-p*s;if(Math.abs(i)<I)return!1;var n=A[0]-o[0],r=A[1]-o[1],a=(s*r-t*n)/i,l=(b*r-p*n)/i,c={alongA:0,alongB:0,pt:[A[0]+a*b,A[1]+a*p]};return c.alongA=a<=-I?-2:a<I?-1:a-1<=-I?0:a-1<I?1:2,c.alongB=l<=-I?-2:l<I?-1:l-1<=-I?0:l-1<I?1:2,c},pointInsideRegion:function(A,k){for(var o=A[0],T=A[1],b=k[k.length-1][0],p=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var i=k[t][0],n=k[t][1];n-T>I!=p-T>I&&(b-i)*(T-n)/(p-n)+i-o>I&&(s=!s),b=i,p=n}return s}};return e}},17792:function(X){var I={toPolygon:function(e,A){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function p(i){var n=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[n]})}for(var s=p(b[0]),t=1;t<b.length;t++)s=e.selectDifference(e.combine(s,p(b[t])));return s}if(A.type==="Polygon")return e.polygon(k(A.coordinates));if(A.type==="MultiPolygon"){for(var o=e.segments({inverted:!1,regions:[]}),T=0;T<A.coordinates.length;T++)o=e.selectUnion(e.combine(o,k(A.coordinates[T])));return e.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,A,k){function o(l,c){return A.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],c)}function T(l){return{region:l,children:[]}}k=e.polygon(e.segments(k));var b=T(null);function p(l,c){for(var h=0;h<l.children.length;h++)if(o(c,(x=l.children[h]).region))return void p(x,c);var u=T(c);for(h=0;h<l.children.length;h++){var x;o((x=l.children[h]).region,c)&&(u.children.push(x),l.children.splice(h,1),h--)}l.children.push(u)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||p(b,t)}function i(l,c){for(var h=0,u=l[l.length-1][0],x=l[l.length-1][1],d=[],m=0;m<l.length;m++){var g=l[m][0],y=l[m][1];d.push([g,y]),h+=y*u-g*x,u=g,x=y}return h<0!==c&&d.reverse(),d.push([d[0][0],d[0][1]]),d}var n=[];function r(l){var c=[i(l.region,!1)];n.push(c);for(var h=0;h<l.children.length;h++)c.push(a(l.children[h]))}function a(l){for(var c=0;c<l.children.length;c++)r(l.children[c]);return i(l.region,!0)}for(s=0;s<b.children.length;s++)r(b.children[s]);return n.length<=0?{type:"Polygon",coordinates:[]}:n.length==1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}};X.exports=I},72200:function(X,I,e){var A=e(48088);X.exports=function(k,o,T){function b(r,a,l){return{id:T?T.segmentId():-1,start:r,end:a,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var p=A.create();function s(r,a){p.insertBefore(r,function(l){return c=r.isStart,h=r.pt,u=a,x=l.isStart,d=l.pt,m=l.other.pt,((g=o.pointsCompare(h,d))!==0?g:o.pointsSame(u,m)?0:c!==x?c?1:-1:o.pointAboveOrOnLine(u,x?d:m,x?m:d)?1:-1)<0;var c,h,u,x,d,m,g})}function t(r,a){var l=function(c,h){var u=A.node({isStart:!0,pt:c.start,seg:c,primary:h,other:null,status:null});return s(u,c.end),u}(r,a);return function(c,h,u){var x=A.node({isStart:!1,pt:h.end,seg:h,primary:u,other:c,status:null});c.other=x,s(x,c.pt)}(l,r,a),l}function i(r,a){var l=b(a,r.seg.end,r.seg);return function(c,h){T&&T.segmentChop(c.seg,h),c.other.remove(),c.seg.end=h,c.other.pt=h,s(c.other,c.pt)}(r,a),t(l,r.primary)}function n(r,a){var l=A.create();function c(E){return l.findTransition(function(P){var C,O,R,U,D,N;return C=E,O=P.ev,R=C.seg.start,U=C.seg.end,D=O.seg.start,N=O.seg.end,(o.pointsCollinear(R,D,N)?o.pointsCollinear(U,D,N)||o.pointAboveOrOnLine(U,D,N)?1:-1:o.pointAboveOrOnLine(R,D,N)?1:-1)>0})}function h(E,P){var C=E.seg,O=P.seg,R=C.start,U=C.end,D=O.start,N=O.end;T&&T.checkIntersection(C,O);var W=o.linesIntersect(R,U,D,N);if(W===!1){if(!o.pointsCollinear(R,U,D)||o.pointsSame(R,N)||o.pointsSame(U,D))return!1;var F=o.pointsSame(R,D),j=o.pointsSame(U,N);if(F&&j)return P;var q=!F&&o.pointBetween(R,D,N),te=!j&&o.pointBetween(U,D,N);if(F)return te?i(P,U):i(E,N),P;q&&(j||(te?i(P,U):i(E,N)),i(P,R))}else W.alongA===0&&(W.alongB===-1?i(E,D):W.alongB===0?i(E,W.pt):W.alongB===1&&i(E,N)),W.alongB===0&&(W.alongA===-1?i(P,R):W.alongA===0?i(P,W.pt):W.alongA===1&&i(P,U));return!1}for(var u=[];!p.isEmpty();){var x=p.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let E=function(){if(m){var P=h(x,m);if(P)return P}return!!g&&h(x,g)};var w=E;T&&T.segmentNew(x.seg,x.primary);var d=c(x),m=d.before?d.before.ev:null,g=d.after?d.after.ev:null;T&&T.tempStatus(x.seg,!!m&&m.seg,!!g&&g.seg);var y,v,_=E();if(_&&(k?(v=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(_.seg),x.other.remove(),x.remove()),p.getHead()!==x){T&&T.rewind(x.seg);continue}k?(v=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=g?g.seg.myFill.above:r,x.seg.myFill.above=v?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(y=g?x.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:x.primary?a:r,x.seg.otherFill={above:y,below:y}),T&&T.status(x.seg,!!m&&m.seg,!!g&&g.seg),x.other.status=d.insert(A.node({ev:x}))}else{var f=x.status;if(f===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(f.prev)&&l.exists(f.next)&&h(f.prev.ev,f.next.ev),T&&T.statusRemove(f.ev.seg),f.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}u.push(x.seg)}p.getHead().remove()}return T&&T.done(),u}return k?{addRegion:function(r){for(var a,l,c,h=r[r.length-1],u=0;u<r.length;u++){a=h,h=r[u];var x=o.pointsCompare(a,h);x!==0&&t((l=x<0?a:h,c=x<0?h:a,{id:T?T.segmentId():-1,start:l,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return n(r,!1)}}:{calculate:function(r,a,l,c){return r.forEach(function(h){t(b(h.start,h.end,h),!0)}),l.forEach(function(h){t(b(h.start,h.end,h),!1)}),n(a,c)}}}},48088:function(X){X.exports={create:function(){var I={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==I.root},isEmpty:function(){return I.root.next===null},getHead:function(){return I.root.next},insertBefore:function(e,A){for(var k=I.root,o=I.root.next;o!==null;){if(A(o))return e.prev=o.prev,e.next=o,o.prev.next=e,void(o.prev=e);k=o,o=o.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var A=I.root,k=I.root.next;k!==null&&!e(k);)A=k,k=k.next;return{before:A===I.root?null:A,after:k,insert:function(o){return o.prev=A,o.next=k,A.next=o,k!==null&&(k.prev=o),o}}}};return I},node:function(I){return I.prev=null,I.next=null,I.remove=function(){I.prev.next=I.next,I.next&&(I.next.prev=I.prev),I.prev=null,I.next=null},I}}},11403:function(X){X.exports=function(I,e,A){var k=[],o=[];return I.forEach(function(T){var b=T.start,p=T.end;if(e.pointsSame(b,p))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{A&&A.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=s,n=0;n<k.length;n++){var r=(u=k[n])[0],a=(u[1],u[u.length-1]);if(u[u.length-2],e.pointsSame(r,b)){if(f(n,!0,!0))break}else if(e.pointsSame(r,p)){if(f(n,!0,!1))break}else if(e.pointsSame(a,b)){if(f(n,!1,!0))break}else if(e.pointsSame(a,p)&&f(n,!1,!1))break}if(i===s)return k.push([b,p]),void(A&&A.chainNew(b,p));if(i===t){A&&A.chainMatch(s.index);var l=s.index,c=s.matches_pt1?p:b,h=s.matches_head,u=k[l],x=h?u[0]:u[u.length-1],d=h?u[1]:u[u.length-2],m=h?u[u.length-1]:u[0],g=h?u[u.length-2]:u[1];return e.pointsCollinear(d,x,c)&&(h?(A&&A.chainRemoveHead(s.index,c),u.shift()):(A&&A.chainRemoveTail(s.index,c),u.pop()),x=d),e.pointsSame(m,c)?(k.splice(l,1),e.pointsCollinear(g,m,x)&&(h?(A&&A.chainRemoveTail(s.index,x),u.pop()):(A&&A.chainRemoveHead(s.index,x),u.shift())),A&&A.chainClose(s.index),void o.push(u)):void(h?(A&&A.chainAddHead(s.index,c),u.unshift(c)):(A&&A.chainAddTail(s.index,c),u.push(c)))}var y=s.index,v=t.index;A&&A.chainConnect(y,v);var _=k[y].length<k[v].length;s.matches_head?t.matches_head?_?(S(y),w(y,v)):(S(v),w(v,y)):w(v,y):t.matches_head?w(y,v):_?(S(y),w(v,y)):(S(v),w(y,v))}function f(E,P,C){return i.index=E,i.matches_head=P,i.matches_pt1=C,i===s?(i=t,!1):(i=null,!0)}function S(E){A&&A.chainReverse(E),k[E].reverse()}function w(E,P){var C=k[E],O=k[P],R=C[C.length-1],U=C[C.length-2],D=O[0],N=O[1];e.pointsCollinear(U,R,D)&&(A&&A.chainRemoveTail(E,R),C.pop(),R=U),e.pointsCollinear(R,D,N)&&(A&&A.chainRemoveHead(P,D),O.shift()),A&&A.chainJoin(E,P),k[E]=C.concat(O),k.splice(P,1)}}),o}},82368:function(X){function I(A,k,o){var T=[];return A.forEach(function(b){var p=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[p]!==0&&T.push({id:o?o.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[p]===1,below:k[p]===2},otherFill:null})}),o&&o.selected(T),T}var e={union:function(A,k){return I(A,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(A,k){return I(A,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(A,k){return I(A,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(A,k){return I(A,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(A,k){return I(A,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};X.exports=e},9696:function(X,I,e){"use strict";var A=e(29936).Transform,k=e(55619);function o(){A.call(this,{readableObjectMode:!0})}function T(b,p,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,p&&(this.code=p),s&&(this.statusCode=s)}o.prototype=Object.create(A.prototype),o.prototype.constructor=o,k(o.prototype),I.gS=function(b,p,s){for(var t=p,i=0;i<s.length;)if(b[t++]!==s[i++])return!1;return!0},I.wR=function(b,p){var s=[],t=0;if(p&&p==="hex")for(;t<b.length;)s.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)s.push(255&b.charCodeAt(t));return s},I.Bz=function(b,p){return b[p]|b[p+1]<<8},I.eW=function(b,p){return b[p+1]|b[p]<<8},I.st=function(b,p){return b[p]|b[p+1]<<8|b[p+2]<<16|16777216*b[p+3]},I.eI=function(b,p){return b[p+3]|b[p+2]<<8|b[p+1]<<16|16777216*b[p]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},11688:function(X){"use strict";function I(k,o){var T=new Error(k);return T.code=o,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function A(k,o,T){this.input=k.subarray(o,T),this.start=o;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw I("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}A.prototype.each=function(k){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},A.prototype.read_uint16=function(k){var o=this.input;if(k+2>o.length)throw I("unexpected EOF","EBADDATA");return this.big_endian?256*o[k]+o[k+1]:o[k]+256*o[k+1]},A.prototype.read_uint32=function(k){var o=this.input;if(k+4>o.length)throw I("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[k]+65536*o[k+1]+256*o[k+2]+o[k+3]:o[k]+256*o[k+1]+65536*o[k+2]+16777216*o[k+3]},A.prototype.is_subifd_link=function(k,o){return k===0&&o===34665||k===0&&o===34853||k===34665&&o===40965},A.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},A.prototype.exif_format_read=function(k,o){var T;switch(k){case 1:case 2:return this.input[o];case 6:return(T=this.input[o])|33554430*(128&T);case 3:return this.read_uint16(o);case 8:return(T=this.read_uint16(o))|131070*(32768&T);case 4:return this.read_uint32(o);case 9:return 0|this.read_uint32(o);default:return null}},A.prototype.scan_ifd=function(k,o,T){var b=this.read_uint16(o);o+=2;for(var p=0;p<b;p++){var s=this.read_uint16(o),t=this.read_uint16(o+2),i=this.read_uint32(o+4),n=this.exif_format_length(t),r=i*n,a=r<=4?o+8:this.read_uint32(o+8),l=!1;if(a+r>this.input.length)throw I("unexpected EOF","EBADDATA");for(var c=[],h=a,u=0;u<i;u++,h+=n){var x=this.exif_format_read(t,h);if(x===null){c=null;break}c.push(x)}if(Array.isArray(c)&&t===2&&(c=e(String.fromCharCode.apply(null,c)))&&c[c.length-1]==="\0"&&(c=c.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:s,offset:c[0]}),l=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:i,entry_offset:o+this.start,data_length:r,data_offset:a+this.start,value:c,is_subifd_link:l})===!1)return void(this.aborted=!0);o+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},X.exports.ExifParser=A,X.exports.get_orientation=function(k){var o=0;try{return new A(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return o=T.value[0],!1}),o}catch{return-1}}},44600:function(X,I,e){"use strict";var A=e(9696).eW,k=e(9696).eI;function o(i,n){if(i.length<4+n)return null;var r=k(i,n);return i.length<r+n||r<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(n+4,n+8)),data:i.slice(n+8,n+r),end:n+r}}function T(i,n){for(var r=0;;){var a=o(i,r);if(!a)break;switch(a.boxtype){case"ispe":n.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&a.data[0]})}r=a.end}}function b(i,n,r){for(var a=0,l=0;l<r;l++)a=256*a+(i[n+l]||0);return a}function p(i,n){for(var r=i[4]>>4&15,a=15&i[4],l=i[5]>>4&15,c=A(i,6),h=8,u=0;u<c;u++){var x=A(i,h),d=A(i,h+=2),m=b(i,h+=2,l),g=A(i,h+=l);if(h+=2,d===0&&g===1){var y=b(i,h,r),v=b(i,h+r,a);n.item_loc[x]={length:v,offset:y+m}}h+=g*(r+a)}}function s(i,n){for(var r=A(i,4),a=6,l=0;l<r;l++){var c=o(i,a);if(!c)break;if(c.boxtype==="infe"){for(var h=A(c.data,4),u="",x=8;x<c.data.length&&c.data[x];x++)u+=String.fromCharCode(c.data[x]);n.item_inf[u]=h}a=c.end}}function t(i,n){for(var r=0;;){var a=o(i,r);if(!a)break;a.boxtype==="ipco"&&T(a.data,n),r=a.end}}X.exports.unbox=o,X.exports.readSizeFromMeta=function(i){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,d){for(var m=4;;){var g=o(x,m);if(!g)break;g.boxtype==="iprp"&&t(g.data,d),g.boxtype==="iloc"&&p(g.data,d),g.boxtype==="iinf"&&s(g.data,d),m=g.end}}(i,n),n.sizes.length){var r,a,l,c=(a=(r=n.sizes).reduce(function(x,d){return x.width>d.width||x.width===d.width&&x.height>d.height?x:d}),l=r.reduce(function(x,d){return x.height>d.height||x.height===d.height&&x.width>d.width?x:d}),a.width>l.height||a.width===l.height&&a.height>l.width?a:l),h=1;n.transforms.forEach(function(x){var d={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},m={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(h=x.value===0?m[h]:d[h=d[h=m[h]]]),x.type==="irot")for(var g=0;g<x.value;g++)h=d[h]});var u=null;return n.item_inf.Exif&&(u=n.item_loc[n.item_inf.Exif]),{width:c.width,height:c.height,orientation:n.transforms.length?h:null,variants:n.sizes,exif_location:u}}},X.exports.getMimeType=function(i){var n=String.fromCharCode.apply(null,i.slice(0,4)),r={};r[n]=!0;for(var a=8;a<i.length;a+=4)r[String.fromCharCode.apply(null,i.slice(a,a+4))]=!0;if(r.mif1||r.msf1||r.miaf)return n==="avif"||n==="avis"||n==="avio"?{type:"avif",mime:"image/avif"}:n==="heic"||n==="heix"?{type:"heic",mime:"image/heic"}:n==="hevc"||n==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(X,I,e){"use strict";var A=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=e(44600),b=e(11688),p=A("ftyp");X.exports=function(s){if(k(s,4,p)){var t=T.unbox(s,0);if(t){var i=T.getMimeType(t.data);if(i){for(var n,r=t.end;;){var a=T.unbox(s,r);if(!a)break;if(r=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){n=a.data;break}}if(n){var l=T.readSizeFromMeta(n);if(l){var c={width:l.width,height:l.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(c.variants=l.variants),l.orientation&&(c.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=s.length){var h=o(s,l.exif_location.offset),u=s.slice(l.exif_location.offset+h+4,l.exif_location.offset+l.exif_location.length),x=b.get_orientation(u);x>0&&(c.orientation=x)}return c}}}}}}},38728:function(X,I,e){"use strict";var A=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=A("BM");X.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:o(b,18),height:o(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(X,I,e){"use strict";var A=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=A("GIF87a"),b=A("GIF89a");X.exports=function(p){if(!(p.length<10)&&(k(p,0,T)||k(p,0,b)))return{width:o(p,6),height:o(p,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(X,I,e){"use strict";var A=e(9696).Bz;X.exports=function(k){var o=A(k,0),T=A(k,2),b=A(k,4);if(o===0&&T===1&&b){for(var p=[],s={width:0,height:0},t=0;t<b;t++){var i=k[6+16*t]||256,n=k[6+16*t+1]||256,r={width:i,height:n};p.push(r),(i>s.width||n>s.height)&&(s=r)}return{width:s.width,height:s.height,variants:p,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(X,I,e){"use strict";var A=e(9696).eW,k=e(9696).wR,o=e(9696).gS,T=e(11688),b=k("Exif\0\0");X.exports=function(p){if(!(p.length<2)&&p[0]===255&&p[1]===216&&p[2]===255)for(var s=2;;){for(;;){if(p.length-s<2)return;if(p[s++]===255)break}for(var t,i,n=p[s++];n===255;)n=p[s++];if(208<=n&&n<=217||n===1)t=0;else{if(!(192<=n&&n<=254)||p.length-s<2)return;t=A(p,s)-2,s+=2}if(n===217||n===218)return;if(n===225&&t>=10&&o(p,s,b)&&(i=T.get_orientation(p.slice(s+6,s+t))),t>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(p.length-s<t)return;var r={width:A(p,s+3),height:A(p,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(r.orientation=i),r}s+=t}}},37276:function(X,I,e){"use strict";var A=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=A(`\x89PNG\r

`),b=A("IHDR");X.exports=function(p){if(!(p.length<24)&&k(p,0,T)&&k(p,12,b))return{width:o(p,16),height:o(p,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(X,I,e){"use strict";var A=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=A("8BPS\0");X.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:o(b,18),height:o(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(X){"use strict";function I(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,A=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,o=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function p(s){return b.test(s)?s.match(b)[0]:"px"}X.exports=function(s){if(function(m){var g,y=0,v=m.length;for(m[0]===239&&m[1]===187&&m[2]===191&&(y=3);y<v&&((g=m[y])===32||g===9||g===13||g===10);)y++;return y!==v&&m[y]===60}(s)){for(var t="",i=0;i<s.length;i++)t+=String.fromCharCode(s[i]);var n=(t.match(e)||[""])[0];if(A.test(n)){var r=function(m){var g=m.match(k),y=m.match(o),v=m.match(T);return{width:g&&(g[1]||g[2]),height:y&&(y[1]||y[2]),viewbox:v&&(v[1]||v[2])}}(n),a=parseFloat(r.width),l=parseFloat(r.height);if(r.width&&r.height)return!I(a)||!I(l)?void 0:{width:a,height:l,type:"svg",mime:"image/svg+xml",wUnits:p(r.width),hUnits:p(r.height)};var c=(r.viewbox||"").split(" "),h={width:c[2],height:c[3]},u=parseFloat(h.width),x=parseFloat(h.height);if(I(u)&&I(x)&&p(h.width)===p(h.height)){var d=u/x;return r.width?I(a)?{width:a,height:a/d,type:"svg",mime:"image/svg+xml",wUnits:p(r.width),hUnits:p(r.width)}:void 0:r.height?I(l)?{width:l*d,height:l,type:"svg",mime:"image/svg+xml",wUnits:p(r.height),hUnits:p(r.height)}:void 0:{width:u,height:x,type:"svg",mime:"image/svg+xml",wUnits:p(h.width),hUnits:p(h.height)}}}}}},98792:function(X,I,e){"use strict";var A=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).eW,b=e(9696).st,p=e(9696).eI,s=A("II*\0"),t=A("MM\0*");function i(a,l,c){return c?T(a,l):o(a,l)}function n(a,l,c){return c?p(a,l):b(a,l)}function r(a,l,c){var h=i(a,l+2,c);return n(a,l+4,c)!==1||h!==3&&h!==4?null:h===3?i(a,l+8,c):n(a,l+8,c)}X.exports=function(a){if(!(a.length<8)&&(k(a,0,s)||k(a,0,t))){var l=a[0]===77,c=n(a,4,l)-8;if(!(c<0)){var h=c+8;if(!(a.length-h<2)){var u=12*i(a,h+0,l);if(!(u<=0||(h+=2,a.length-h<u))){var x,d,m,g;for(x=0;x<u;x+=12)(g=i(a,h+x,l))===256?d=r(a,h+x,l):g===257&&(m=r(a,h+x,l));return d&&m?{width:d,height:m,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(X,I,e){"use strict";var A=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).st,b=e(11688),p=A("RIFF"),s=A("WEBP");function t(r,a){if(r[a+3]===157&&r[a+4]===1&&r[a+5]===42)return{width:16383&o(r,a+6),height:16383&o(r,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(r,a){if(r[a]===47){var l=T(r,a+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function n(r,a){return{width:1+(r[a+6]<<16|r[a+5]<<8|r[a+4]),height:1+(r[a+9]<<a|r[a+8]<<8|r[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}X.exports=function(r){if(!(r.length<16)&&(k(r,0,p)||k(r,8,s))){var a=12,l=null,c=0,h=T(r,4)+8;if(!(h>r.length)){for(;a+8<h;)if(r[a]!==0){var u=String.fromCharCode.apply(null,r.slice(a,a+4)),x=T(r,a+4);u==="VP8 "&&x>=10?l=l||t(r,a+8):u==="VP8L"&&x>=9?l=l||i(r,a+8):u==="VP8X"&&x>=10?l=l||n(r,a+8):u==="EXIF"&&(c=b.get_orientation(r.slice(a+8,a+8+x)),a=1/0),a+=8+x}else a++;if(l)return c>0&&(l.orientation=c),l}}}},87480:function(X,I,e){"use strict";X.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(X,I,e){"use strict";var A=e(87480);X.exports=function(k){return function(o){for(var T=Object.keys(A),b=0;b<T.length;b++){var p=A[T[b]](o);if(p)return p}return null}(k)},X.exports.parsers=A},4168:function(X){var I,e,A=X.exports={};function k(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function T(l){if(I===setTimeout)return setTimeout(l,0);if((I===k||!I)&&setTimeout)return I=setTimeout,setTimeout(l,0);try{return I(l,0)}catch{try{return I.call(null,l,0)}catch{return I.call(this,l,0)}}}(function(){try{I=typeof setTimeout=="function"?setTimeout:k}catch{I=k}try{e=typeof clearTimeout=="function"?clearTimeout:o}catch{e=o}})();var b,p=[],s=!1,t=-1;function i(){s&&b&&(s=!1,b.length?p=b.concat(p):t=-1,p.length&&n())}function n(){if(!s){var l=T(i);s=!0;for(var c=p.length;c;){for(b=p,p=[];++t<c;)b&&b[t].run();t=-1,c=p.length}b=null,s=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{return e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(l)}}function r(l,c){this.fun=l,this.array=c}function a(){}A.nextTick=function(l){var c=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)c[h-1]=arguments[h];p.push(new r(l,c)),p.length!==1||s||T(n)},r.prototype.run=function(){this.fun.apply(null,this.array)},A.title="browser",A.browser=!0,A.env={},A.argv=[],A.version="",A.versions={},A.on=a,A.addListener=a,A.once=a,A.off=a,A.removeListener=a,A.removeAllListeners=a,A.emit=a,A.prependListener=a,A.prependOnceListener=a,A.listeners=function(l){return[]},A.binding=function(l){throw new Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(l){throw new Error("process.chdir is not supported")},A.umask=function(){return 0}},3951:function(X,I,e){for(var A=e(41984),k=typeof window>"u"?e.g:window,o=["moz","webkit"],T="AnimationFrame",b=k["request"+T],p=k["cancel"+T]||k["cancelRequest"+T],s=0;!b&&s<o.length;s++)b=k[o[s]+"Request"+T],p=k[o[s]+"Cancel"+T]||k[o[s]+"CancelRequest"+T];if(!b||!p){var t=0,i=0,n=[];b=function(r){if(n.length===0){var a=A(),l=Math.max(0,16.666666666666668-(a-t));t=l+a,setTimeout(function(){var c=n.slice(0);n.length=0;for(var h=0;h<c.length;h++)if(!c[h].cancelled)try{c[h].callback(t)}catch(u){setTimeout(function(){throw u},0)}},Math.round(l))}return n.push({handle:++i,callback:r,cancelled:!1}),i},p=function(r){for(var a=0;a<n.length;a++)n[a].handle===r&&(n[a].cancelled=!0)}}X.exports=function(r){return b.call(k,r)},X.exports.cancel=function(){p.apply(k,arguments)},X.exports.polyfill=function(r){r||(r=k),r.requestAnimationFrame=b,r.cancelAnimationFrame=p}},24544:function(X,I,e){"use strict";var A=e(76752),k=e(72160),o=e(45223),T=e(55616),b=e(50896),p=e(47520),s=e(37816),t=s.float32,i=s.fract32;X.exports=function(r,a){if(typeof r=="function"?(a||(a={}),a.regl=r):a=r,a.length&&(a.positions=a),!(r=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,c,h,u,x,d,m=r._gl,g={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},y=[];return u=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=r.buffer({usage:"static",type:"float",data:n}),S(a),l=r({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(E,P){return[P.viewport.x,P.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:u,offset:function(E,P){return 4*P.offset},divisor:1},position:{buffer:c,offset:function(E,P){return 8*P.offset},divisor:1},positionFract:{buffer:h,offset:function(E,P){return 8*P.offset},divisor:1},error:{buffer:x,offset:function(E,P){return 16*P.offset},divisor:1},direction:{buffer:d,stride:24,offset:0},lineOffset:{buffer:d,stride:24,offset:8},capOffset:{buffer:d,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:n.length}),b(v,{update:S,draw:_,destroy:w,regl:r,gl:m,canvas:m.canvas,groups:y}),v;function v(E){E?S(E):E===null&&w(),_()}function _(E){if(typeof E=="number")return f(E);E&&!Array.isArray(E)&&(E=[E]),r._refresh(),y.forEach(function(P,C){P&&(E&&(E[C]?P.draw=!0:P.draw=!1),P.draw?f(C):P.draw=!0)})}function f(E){typeof E=="number"&&(E=y[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var P=0,C=0;if(v.groups=y=E.map(function(F,j){var q=y[j];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=T(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(y[j]=q={id:j,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=b({},g,F)),o(q,F,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=p(te),C+=te.length,te},positions:function(te,ee){return te=p(te,"float64"),ee.count=Math.floor(te.length/2),ee.bounds=A(te,2),ee.offset=P,P+=ee.count,te}},{color:function(te,ee){var Q=ee.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var J=te;te=Array(Q);for(var K=0;K<Q;K++)te[K]=J}if(te.length<Q)throw Error("Not enough colors");for(var Y=new Uint8Array(4*Q),ie=0;ie<Q;ie++){var se=k(te[ie],"uint8");Y.set(se,4*ie)}return Y},range:function(te,ee,Q){var J=ee.bounds;return te||(te=J),ee.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],ee.translate=[-te[0],-te[1]],ee.scaleFract=i(ee.scale),ee.translateFract=i(ee.translate),te},viewport:function(te){var ee;return Array.isArray(te)?ee={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?(ee={x:te.x||te.left||0,y:te.y||te.top||0},te.right?ee.width=te.right-ee.x:ee.width=te.w||te.width||0,te.bottom?ee.height=te.bottom-ee.y:ee.height=te.h||te.height||0):ee={x:0,y:0,width:m.drawingBufferWidth,height:m.drawingBufferHeight},ee}}])),q}),P||C){var O=y.reduce(function(F,j,q){return F+(j?j.count:0)},0),R=new Float64Array(2*O),U=new Uint8Array(4*O),D=new Float32Array(4*O);y.forEach(function(F,j){if(F){var q=F.positions,te=F.count,ee=F.offset,Q=F.color,J=F.errors;te&&(U.set(Q,4*ee),D.set(J,4*ee),R.set(q,2*ee))}});var N=t(R);c(N);var W=i(R,N);h(W),u(U),x(D)}}}function w(){c.destroy(),h.destroy(),u.destroy(),x.destroy(),d.destroy()}};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(X,I,e){"use strict";var A=e(72160),k=e(76752),o=e(50896),T=e(55616),b=e(47520),p=e(28912),s=e(71152),t=e(37816),i=t.float32,n=t.fract32,r=e(60463),a=e(51160),l=e(10272);function c(h,u){if(!(this instanceof c))return new c(h,u);if(typeof h=="function"?(u||(u={}),u.regl=h):u=h,u.length&&(u.positions=u),!(h=u.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=c.shaders.has(h)?c.shaders.get(h):c.shaders.set(h,c.createShaders(h)).get(h),this.update(u)}X.exports=c,c.dashMult=2,c.maxPatternLength=256,c.precisionThreshold=3e6,c.maxPoints=1e4,c.maxLines=2048,c.shaders=new r,c.createShaders=function(h){var u,x=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(g,y){return y.join==="round"?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(g,y){return[y.viewport.x,y.viewport.y,g.viewportWidth,g.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(g,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},m=h(o({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{u=h(o({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},d))}catch{u=m}return{fill:h({primitive:"triangle",elements:function(g,y){return y.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(g,y){return[y.viewport.x,y.viewport.y,g.viewportWidth,g.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:m,miter:u}},c.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},c.prototype.render=function(){for(var h,u=[],x=arguments.length;x--;)u[x]=arguments[x];u.length&&(h=this).update.apply(h,u),this.draw()},c.prototype.draw=function(){for(var h=this,u=[],x=arguments.length;x--;)u[x]=arguments[x];return(u.length?u:this.passes).forEach(function(d,m){var g;if(d&&Array.isArray(d))return(g=h).draw.apply(g,d);typeof d=="number"&&(d=h.passes[d]),d&&d.count>1&&d.opacity&&(h.regl._refresh(),d.fill&&d.triangles&&d.triangles.length>2&&h.shaders.fill(d),d.thickness&&(d.scale[0]*d.viewport.width>c.precisionThreshold||d.scale[1]*d.viewport.height>c.precisionThreshold||d.join==="rect"||!d.join&&(d.thickness<=2||d.count>=c.maxPoints)?h.shaders.rect(d):h.shaders.miter(d)))}),this},c.prototype.update=function(h){var u=this;if(h){h.length!=null?typeof h[0]=="number"&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var x=this.regl,d=this.gl;if(h.forEach(function(_,f){var S=u.passes[f];if(_!==void 0)if(_!==null){if(typeof _[0]=="number"&&(_={positions:_}),_=T(_,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(u.passes[f]=S={id:f,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},_=o({},c.defaults,_)),_.thickness!=null&&(S.thickness=parseFloat(_.thickness)),_.opacity!=null&&(S.opacity=parseFloat(_.opacity)),_.miterLimit!=null&&(S.miterLimit=parseFloat(_.miterLimit)),_.overlay!=null&&(S.overlay=!!_.overlay,f<c.maxLines&&(S.depth=2*(c.maxLines-1-f%c.maxLines)/c.maxLines-1)),_.join!=null&&(S.join=_.join),_.hole!=null&&(S.hole=_.hole),_.fill!=null&&(S.fill=_.fill?A(_.fill,"uint8"):null),_.viewport!=null&&(S.viewport=a(_.viewport)),S.viewport||(S.viewport=a([d.drawingBufferWidth,d.drawingBufferHeight])),_.close!=null&&(S.close=_.close),_.positions===null&&(_.positions=[]),_.positions){var w,E;if(_.positions.x&&_.positions.y){var P=_.positions.x,C=_.positions.y;E=S.count=Math.max(P.length,C.length),w=new Float64Array(2*E);for(var O=0;O<E;O++)w[2*O]=P[O],w[2*O+1]=C[O]}else w=b(_.positions,"float64"),E=S.count=Math.floor(w.length/2);var R=S.bounds=k(w,2);if(S.fill){for(var U=[],D={},N=0,W=0,F=0,j=S.count;W<j;W++){var q=w[2*W],te=w[2*W+1];isNaN(q)||isNaN(te)||q==null||te==null?(q=w[2*N],te=w[2*N+1],D[W]=N):N=W,U[F++]=q,U[F++]=te}if(_.splitNull){S.count-1 in D||(D[S.count]=S.count-1);var ee=Object.keys(D).map(Number).sort(function(mt,ht){return mt-ht}),Q=[],J=0,K=S.hole!=null?S.hole[0]:null;if(K!=null){var Y=l(ee,function(mt){return mt>=K});(ee=ee.slice(0,Y)).push(K)}for(var ie=function(mt){var ht=U.slice(2*J,2*ee[mt]).concat(K?U.slice(2*K):[]),Qe=(S.hole||[]).map(function(wt){return wt-K+(ee[mt]-J)}),Je=p(ht,Qe);Je=Je.map(function(wt){return wt+J+(wt+J<ee[mt]?0:K-ee[mt])}),Q.push.apply(Q,Je),J=ee[mt]+1},se=0;se<ee.length;se++)ie(se);for(var ae=0,ue=Q.length;ae<ue;ae++)D[Q[ae]]!=null&&(Q[ae]=D[Q[ae]]);S.triangles=Q}else{for(var ve=p(U,S.hole||[]),ye=0,de=ve.length;ye<de;ye++)D[ve[ye]]!=null&&(ve[ye]=D[ve[ye]]);S.triangles=ve}}var pe=new Float64Array(w);s(pe,2,R);var ge=new Float64Array(2*E+6);S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(ge[0]=pe[2*E-4],ge[1]=pe[2*E-3]):(ge[0]=pe[2*E-2],ge[1]=pe[2*E-1]):(ge[0]=pe[0],ge[1]=pe[1]),ge.set(pe,2),S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(ge[2*E+2]=pe[2],ge[2*E+3]=pe[3],S.count-=1):(ge[2*E+2]=pe[0],ge[2*E+3]=pe[1],ge[2*E+4]=pe[2],ge[2*E+5]=pe[3]):(ge[2*E+2]=pe[2*E-2],ge[2*E+3]=pe[2*E-1],ge[2*E+4]=pe[2*E-2],ge[2*E+5]=pe[2*E-1]);var ke=i(ge);S.positionBuffer(ke);var Ee=n(ge,ke);S.positionFractBuffer(Ee)}if(_.range?S.range=_.range:S.range||(S.range=S.bounds),(_.range||_.positions)&&S.count){var me=S.bounds,oe=me[2]-me[0],re=me[3]-me[1],fe=S.range[2]-S.range[0],Se=S.range[3]-S.range[1];S.scale=[oe/fe,re/Se],S.translate=[-S.range[0]/fe+me[0]/fe||0,-S.range[1]/Se+me[1]/Se||0],S.scaleFract=n(S.scale),S.translateFract=n(S.translate)}if(_.dashes){var be,we=0;if(!_.dashes||_.dashes.length<2)we=1,be=new Uint8Array([255,255,255,255,255,255,255,255]);else{we=0;for(var Me=0;Me<_.dashes.length;++Me)we+=_.dashes[Me];be=new Uint8Array(we*c.dashMult);for(var Ie=0,Oe=255,he=0;he<2;he++)for(var _e=0;_e<_.dashes.length;++_e){for(var Ae=0,De=_.dashes[_e]*c.dashMult*.5;Ae<De;++Ae)be[Ie++]=Oe;Oe^=255}}S.dashLength=we,S.dashTexture({channels:1,data:be,width:be.length,height:1,mag:"linear",min:"linear"},0,0)}if(_.color){var Le=S.count,Be=_.color;Be||(Be="transparent");var Ve=new Uint8Array(4*Le+4);if(Array.isArray(Be)&&typeof Be[0]!="number"){for(var Ze=0;Ze<Le;Ze++){var rt=A(Be[Ze],"uint8");Ve.set(rt,4*Ze)}Ve.set(A(Be[0],"uint8"),4*Le)}else for(var it=A(Be,"uint8"),dt=0;dt<Le+1;dt++)Ve.set(it,4*dt);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ve})}}else u.passes[f]=null}),h.length<this.passes.length){for(var m=h.length;m<this.passes.length;m++){var g=this.passes[m];g&&(g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy())}this.passes.length=h.length}for(var y=[],v=0;v<this.passes.length;v++)this.passes[v]!==null&&y.push(this.passes[v]);return this.passes=y,this}},c.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(X,I,e){"use strict";function A(m,g){return function(y){if(Array.isArray(y))return y}(m)||function(y,v){var _=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(_!=null){var f,S,w,E,P=[],C=!0,O=!1;try{if(w=(_=_.call(y)).next,v===0){if(Object(_)!==_)return;C=!1}else for(;!(C=(f=w.call(_)).done)&&(P.push(f.value),P.length!==v);C=!0);}catch(R){O=!0,S=R}finally{try{if(!C&&_.return!=null&&(E=_.return(),Object(E)!==E))return}finally{if(O)throw S}}return P}}(m,g)||k(m,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(m,g){if(m){if(typeof m=="string")return o(m,g);var y=Object.prototype.toString.call(m).slice(8,-1);return y==="Object"&&m.constructor&&(y=m.constructor.name),y==="Map"||y==="Set"?Array.from(m):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?o(m,g):void 0}}function o(m,g){(g==null||g>m.length)&&(g=m.length);for(var y=0,v=new Array(g);y<g;y++)v[y]=m[y];return v}var T=e(72160),b=e(76752),p=e(3808),s=e(3108),t=e(50896),i=e(26444),n=e(55616),r=e(45223),a=e(47520),l=e(96604),c=e(37816),h=e(51160),u=x;function x(m,g){var y=this;if(!(this instanceof x))return new x(m,g);typeof m=="function"?(g||(g={}),g.regl=m):(g=m,m=null),g&&g.length&&(g.positions=g);var v,_=(m=g.regl)._gl,f=[];this.tooManyColors=l,v=m.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:m,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:f,paletteIds:{},paletteTexture:v,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(g);var S={uniforms:{constPointSize:!!g.constPointSize,opacity:m.prop("opacity"),paletteSize:function(P,C){return[y.tooManyColors?0:255,v.height]},pixelRatio:m.context("pixelRatio"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translate:m.prop("translate"),translateFract:m.prop("translateFract"),markerTexture:m.prop("markerTexture"),paletteTexture:v},attributes:{x:function(P,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(P,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(P,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(P,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(P,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/y.maxSize)]}},borderSize:function(P,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/y.maxSize)]}},colorId:function(P,C){return C.color.length?{buffer:C.colorBuffer,stride:y.tooManyColors?8:4,offset:0}:{constant:y.tooManyColors?f.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(P,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:y.tooManyColors?8:4,offset:y.tooManyColors?4:2}:{constant:y.tooManyColors?f.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(P,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:m.prop("elements"),count:m.prop("count"),offset:m.prop("offset"),primitive:"points"},w=t({},S);w.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),w.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=m(w);var E=t({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=m(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var m=this,g=arguments.length,y=new Array(g),v=0;v<g;v++)y[v]=arguments[v];var _=this.groups;if(y.length===1&&Array.isArray(y[0])&&(y[0][0]===null||Array.isArray(y[0][0]))&&(y=y[0]),this.regl._refresh(),y.length)for(var f=0;f<y.length;f++)this.drawItem(f,y[f]);else _.forEach(function(S,w){m.drawItem(w)});return this},x.prototype.drawItem=function(m,g){var y,v=this.groups,_=v[m];if(typeof g=="number"&&(m=g,_=v[g],g=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,g));for(var f=[],S=1;S<_.activation.length;S++)_.activation[S]&&(_.activation[S]===!0||_.activation[S].data.length)&&f.push.apply(f,function(w){if(Array.isArray(w))return o(w)}(y=this.getMarkerDrawOptions(S,_,g))||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(y)||k(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());f.length&&this.drawMarker(f)}},x.prototype.getMarkerDrawOptions=function(m,g,y){var v=g.range,_=g.tree,f=g.viewport,S=g.activation,w=g.selectionBuffer,E=g.count;if(this.regl,!_)return y?[t({},g,{markerTexture:this.markerTextures[m],activation:S[m],count:y.length,elements:y,offset:0})]:[t({},g,{markerTexture:this.markerTextures[m],activation:S[m],offset:0})];var P=[],C=_.range(v,{lod:!0,px:[(v[2]-v[0])/f.width,(v[3]-v[1])/f.height]});if(y){for(var O=S[m].data,R=new Uint8Array(E),U=0;U<y.length;U++){var D=y[U];R[D]=O?O[D]:1}w.subdata(R)}for(var N=C.length;N--;){var W=A(C[N],2),F=W[0],j=W[1];P.push(t({},g,{markerTexture:this.markerTextures[m],activation:y?w:S[m],offset:F,count:j-F}))}return P},x.prototype.update=function(){for(var m=this,g=arguments.length,y=new Array(g),v=0;v<g;v++)y[v]=arguments[v];if(y.length){y.length===1&&Array.isArray(y[0])&&(y=y[0]);var _=this.groups,f=this.gl,S=this.regl,w=this.maxSize,E=this.maxColors,P=this.palette;this.groups=_=y.map(function(C,O){var R=_[O];if(C===void 0)return R;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=n(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(m.tooManyColors=C.tooManyColors),R||(_[O]=R={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=R.marker,delete R.marker),C.marker&&!("positions"in C)&&(C.positions=R.positions,delete R.positions);var U=0,D=0;if(r(R,C,[{snap:!0,size:function(de,pe){return de==null&&(de=x.defaults.size),U+=de&&de.length?1:0,de},borderSize:function(de,pe){return de==null&&(de=x.defaults.borderSize),U+=de&&de.length?1:0,de},opacity:parseFloat,color:function(de,pe){return de==null&&(de=x.defaults.color),de=m.updateColor(de),D++,de},borderColor:function(de,pe){return de==null&&(de=x.defaults.borderColor),de=m.updateColor(de),D++,de},bounds:function(de,pe,ge){return"range"in ge||(ge.range=null),de},positions:function(de,pe,ge){var ke=pe.snap,Ee=pe.positionBuffer,me=pe.positionFractBuffer,oe=pe.selectionBuffer;if(de.x||de.y)return de.x.length?pe.xAttr={buffer:S.buffer(de.x),offset:0,stride:4,count:de.x.length}:pe.xAttr={buffer:de.x.buffer,offset:4*de.x.offset||0,stride:4*(de.x.stride||1),count:de.x.count},de.y.length?pe.yAttr={buffer:S.buffer(de.y),offset:0,stride:4,count:de.y.length}:pe.yAttr={buffer:de.y.buffer,offset:4*de.y.offset||0,stride:4*(de.y.stride||1),count:de.y.count},pe.count=Math.max(pe.xAttr.count,pe.yAttr.count),de;de=a(de,"float64");var re=pe.count=Math.floor(de.length/2),fe=pe.bounds=re?b(de,2):null;if(ge.range||pe.range||(delete pe.range,ge.range=fe),ge.marker||pe.marker||(delete pe.marker,ge.marker=null),ke&&(ke===!0||re>ke)?pe.tree=s(de,{bounds:fe}):ke&&ke.length&&(pe.tree=ke),pe.tree){var Se={primitive:"points",usage:"static",data:pe.tree,type:"uint32"};pe.elements?pe.elements(Se):pe.elements=S.elements(Se)}var be=c.float32(de);return Ee({data:be,usage:"dynamic"}),me({data:c.fract32(de,be),usage:"dynamic"}),oe({data:new Uint8Array(re),type:"uint8",usage:"stream"}),de}},{marker:function(de,pe,ge){var ke=pe.activation;if(ke.forEach(function(be){return be&&be.destroy&&be.destroy()}),ke.length=0,de&&typeof de[0]!="number"){for(var Ee=[],me=0,oe=Math.min(de.length,pe.count);me<oe;me++){var re=m.addMarker(de[me]);Ee[re]||(Ee[re]=new Uint8Array(pe.count)),Ee[re][me]=1}for(var fe=0;fe<Ee.length;fe++)if(Ee[fe]){var Se={data:Ee[fe],type:"uint8",usage:"static"};ke[fe]?ke[fe](Se):ke[fe]=S.buffer(Se),ke[fe].data=Ee[fe]}}else ke[m.addMarker(de)]=!0;return de},range:function(de,pe,ge){var ke=pe.bounds;if(ke)return de||(de=ke),pe.scale=[1/(de[2]-de[0]),1/(de[3]-de[1])],pe.translate=[-de[0],-de[1]],pe.scaleFract=c.fract(pe.scale),pe.translateFract=c.fract(pe.translate),de},viewport:function(de){return h(de||[f.drawingBufferWidth,f.drawingBufferHeight])}}]),U){var N=R,W=N.count,F=N.size,j=N.borderSize,q=N.sizeBuffer,te=new Uint8Array(2*W);if(F.length||j.length)for(var ee=0;ee<W;ee++)te[2*ee]=Math.round(255*(F[ee]==null?F:F[ee])/w),te[2*ee+1]=Math.round(255*(j[ee]==null?j:j[ee])/w);q({data:te,usage:"dynamic"})}if(D){var Q,J=R,K=J.count,Y=J.color,ie=J.borderColor,se=J.colorBuffer;if(m.tooManyColors){if(Y.length||ie.length){Q=new Uint8Array(8*K);for(var ae=0;ae<K;ae++){var ue=Y[ae];Q[8*ae]=P[4*ue],Q[8*ae+1]=P[4*ue+1],Q[8*ae+2]=P[4*ue+2],Q[8*ae+3]=P[4*ue+3];var ve=ie[ae];Q[8*ae+4]=P[4*ve],Q[8*ae+5]=P[4*ve+1],Q[8*ae+6]=P[4*ve+2],Q[8*ae+7]=P[4*ve+3]}}}else if(Y.length||ie.length){Q=new Uint8Array(4*K+2);for(var ye=0;ye<K;ye++)Y[ye]!=null&&(Q[4*ye]=Y[ye]%E,Q[4*ye+1]=Math.floor(Y[ye]/E)),ie[ye]!=null&&(Q[4*ye+2]=ie[ye]%E,Q[4*ye+3]=Math.floor(ie[ye]/E))}se({data:Q||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return R})}},x.prototype.addMarker=function(m){var g,y=this.markerTextures,v=this.regl,_=this.markerCache,f=m==null?0:_.indexOf(m);if(f>=0)return f;if(m instanceof Uint8Array||m instanceof Uint8ClampedArray)g=m;else{g=new Uint8Array(m.length);for(var S=0,w=m.length;S<w;S++)g[S]=255*m[S]}var E=Math.floor(Math.sqrt(g.length));return f=y.length,_.push(m),y.push(v.texture({channels:1,data:g,radius:E,mag:"linear",min:"linear"})),f},x.prototype.updateColor=function(m){var g=this.paletteIds,y=this.palette,v=this.maxColors;Array.isArray(m)||(m=[m]);var _=[];if(typeof m[0]=="number"){var f=[];if(Array.isArray(m))for(var S=0;S<m.length;S+=4)f.push(m.slice(S,S+4));else for(var w=0;w<m.length;w+=4)f.push(m.subarray(w,w+4));m=f}for(var E=0;E<m.length;E++){var P=m[E];P=T(P,"uint8");var C=p(P,!1);if(g[C]==null){var O=y.length;g[C]=Math.floor(O/4),y[O]=P[0],y[O+1]=P[1],y[O+2]=P[2],y[O+3]=P[3]}_[E]=g[C]}return!this.tooManyColors&&y.length>4*v&&(this.tooManyColors=!0),this.updatePalette(y),_.length===1?_[0]:_},x.prototype.updatePalette=function(m){if(!this.tooManyColors){var g=this.maxColors,y=this.paletteTexture,v=Math.ceil(.25*m.length/g);if(v>1)for(var _=.25*(m=m.slice()).length%g;_<v*g;_++)m.push(0,0,0,0);y.height<v&&y.resize(g,v),y.subimage({width:Math.min(.25*m.length,g),height:v,data:m},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(m){m.sizeBuffer.destroy(),m.positionBuffer.destroy(),m.positionFractBuffer.destroy(),m.colorBuffer.destroy(),m.activation.forEach(function(g){return g&&g.destroy&&g.destroy()}),m.selectionBuffer.destroy(),m.elements&&m.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(m){return m&&m.destroy&&m.destroy()}),this};var d=e(50896);X.exports=function(m,g){var y=new u(m,g),v=y.render.bind(y);return d(v,{render:v,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette}),v}},55795:function(X,I,e){"use strict";var A=e(38540),k=e(55616),o=e(76752),T=e(3951),b=e(67752),p=e(51160),s=e(47520);function t(a,l){if(!(this instanceof t))return new t(a,l);this.traces=[],this.passes={},this.regl=a,this.scatter=A(a),this.canvas=this.scatter.canvas}function i(a,l,c){return(a.id!=null?a.id:a)<<16|(255&l)<<8|255&c}function n(a,l,c){var h,u,x,d,m=a[l],g=a[c];return m.length>2?(m[0],m[2],h=m[1],u=m[3]):m.length?(h=m[0],u=m[1]):(m.x,h=m.y,m.x,m.width,u=m.y+m.height),g.length>2?(x=g[0],d=g[2],g[1],g[3]):g.length?(x=g[0],d=g[1]):(x=g.x,g.y,d=g.x+g.width,g.y,g.height),[x,h,d,u]}function r(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var l=p(a);return[l.x,l.y,l.x+l.width,l.y+l.height]}X.exports=t,t.prototype.render=function(){for(var a,l=this,c=[],h=arguments.length;h--;)c[h]=arguments[h];return c.length&&(a=this).update.apply(a,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,T(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var a,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var h=0;h<l.length;h++)this.updateItem(h,l[h]);this.traces=this.traces.filter(Boolean);for(var u=[],x=0,d=0;d<this.traces.length;d++){for(var m=this.traces[d],g=this.traces[d].passes,y=0;y<g.length;y++)u.push(this.passes[g[y]]);m.passOffset=x,x+=m.passes.length}return(a=this.scatter).update.apply(a,u),this}},t.prototype.updateItem=function(a,l){var c=this.regl;if(l===null)return this.traces[a]=null,this;if(!l)return this;var h,u=k(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(u.color!=null&&(x.color=u.color),u.size!=null&&(x.size=u.size),u.marker!=null&&(x.marker=u.marker),u.borderColor!=null&&(x.borderColor=u.borderColor),u.borderSize!=null&&(x.borderSize=u.borderSize),u.opacity!=null&&(x.opacity=u.opacity),u.viewport&&(x.viewport=p(u.viewport)),u.diagonal!=null&&(x.diagonal=u.diagonal),u.upper!=null&&(x.upper=u.upper),u.lower!=null&&(x.lower=u.lower),u.data){x.buffer(s(u.data)),x.columns=u.data.length,x.count=u.data[0].length,x.bounds=[];for(var d=0;d<x.columns;d++)x.bounds[d]=o(u.data[d],1)}u.range&&(x.range=u.range,h=x.range&&typeof x.range[0]!="number"),u.domain&&(x.domain=u.domain);var m=!1;u.padding!=null&&(Array.isArray(u.padding)&&u.padding.length===x.columns&&typeof u.padding[u.padding.length-1]=="number"?(x.padding=u.padding.map(r),m=!0):x.padding=r(u.padding));var g=x.columns,y=x.count,v=x.viewport.width,_=x.viewport.height,f=x.viewport.x,S=x.viewport.y,w=v/g,E=_/g;x.passes=[];for(var P=0;P<g;P++)for(var C=0;C<g;C++)if((x.diagonal||C!==P)&&(x.upper||!(P>C))&&(x.lower||!(P<C))){var O=i(x.id,P,C),R=this.passes[O]||(this.passes[O]={});if(u.data&&(u.transpose?R.positions={x:{buffer:x.buffer,offset:C,count:y,stride:g},y:{buffer:x.buffer,offset:P,count:y,stride:g}}:R.positions={x:{buffer:x.buffer,offset:C*y,count:y},y:{buffer:x.buffer,offset:P*y,count:y}},R.bounds=n(x.bounds,P,C)),u.domain||u.viewport||u.data){var U=m?n(x.padding,P,C):x.padding;if(x.domain){var D=n(x.domain,P,C),N=D[0],W=D[1],F=D[2],j=D[3];R.viewport=[f+N*v+U[0],S+W*_+U[1],f+F*v-U[2],S+j*_-U[3]]}else R.viewport=[f+C*w+w*U[0],S+P*E+E*U[1],f+(C+1)*w-w*U[2],S+(P+1)*E-E*U[3]]}u.color&&(R.color=x.color),u.size&&(R.size=x.size),u.marker&&(R.marker=x.marker),u.borderSize&&(R.borderSize=x.borderSize),u.borderColor&&(R.borderColor=x.borderColor),u.opacity&&(R.opacity=x.opacity),u.range&&(R.range=h?n(x.range,P,C):x.range||R.bounds),x.passes.push(O)}return this},t.prototype.draw=function(){for(var a,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var h=[],u=0;u<l.length;u++)if(typeof l[u]=="number"){var x=this.traces[l[u]],d=x.passes,m=x.passOffset;h.push.apply(h,b(m,m+d.length))}else if(l[u].length){var g=l[u],y=this.traces[u],v=y.passes,_=y.passOffset;v=v.map(function(f,S){h[_+S]=g})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(X){X.exports=function(){function I(Ne,We){this.id=ie++,this.type=Ne,this.data=We}function e(Ne){if(Ne.length===0)return[];var We=Ne.charAt(0),at=Ne.charAt(Ne.length-1);if(1<Ne.length&&We===at&&(We==='"'||We==="'"))return['"'+Ne.substr(1,Ne.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(We=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ne))return e(Ne.substr(0,We.index)).concat(e(We[1])).concat(e(Ne.substr(We.index+We[0].length)));if((We=Ne.split(".")).length===1)return['"'+Ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ne=[],at=0;at<We.length;++at)Ne=Ne.concat(e(We[at]));return Ne}function A(Ne){return"["+e(Ne).join("][")+"]"}function k(Ne){return typeof Ne=="string"?Ne.split():Ne}function o(Ne){return typeof Ne=="string"?document.querySelector(Ne):Ne}function T(Ne){var We,at,tt,Re,Fe=Ne||{};Ne={};var nt=[],Ge=[],ut=typeof window>"u"?1:window.devicePixelRatio,pt=!1,gt={},ct=function(vt){},Tt=function(){};if(typeof Fe=="string"?We=document.querySelector(Fe):typeof Fe=="object"&&(typeof Fe.nodeName=="string"&&typeof Fe.appendChild=="function"&&typeof Fe.getBoundingClientRect=="function"?We=Fe:typeof Fe.drawArrays=="function"||typeof Fe.drawElements=="function"?tt=(Re=Fe).canvas:("gl"in Fe?Re=Fe.gl:"canvas"in Fe?tt=o(Fe.canvas):"container"in Fe&&(at=o(Fe.container)),"attributes"in Fe&&(Ne=Fe.attributes),"extensions"in Fe&&(nt=k(Fe.extensions)),"optionalExtensions"in Fe&&(Ge=k(Fe.optionalExtensions)),"onDone"in Fe&&(ct=Fe.onDone),"profile"in Fe&&(pt=!!Fe.profile),"pixelRatio"in Fe&&(ut=+Fe.pixelRatio),"cachedCode"in Fe&&(gt=Fe.cachedCode))),We&&(We.nodeName.toLowerCase()==="canvas"?tt=We:at=We),!Re){if(!tt){if(!(We=function(vt,kt,Lt){function Ct(){var tn=window.innerWidth,jt=window.innerHeight;vt!==document.body&&(tn=(jt=Gt.getBoundingClientRect()).right-jt.left,jt=jt.bottom-jt.top),Gt.width=Lt*tn,Gt.height=Lt*jt}var Dt,Gt=document.createElement("canvas");return Y(Gt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),vt.appendChild(Gt),vt===document.body&&(Gt.style.position="absolute",Y(vt.style,{margin:0,padding:0})),vt!==document.body&&typeof ResizeObserver=="function"?(Dt=new ResizeObserver(function(){setTimeout(Ct)})).observe(vt):window.addEventListener("resize",Ct,!1),Ct(),{canvas:Gt,onDestroy:function(){Dt?Dt.disconnect():window.removeEventListener("resize",Ct),vt.removeChild(Gt)}}}(at||document.body,0,ut)))return null;tt=We.canvas,Tt=We.onDestroy}Ne.premultipliedAlpha===void 0&&(Ne.premultipliedAlpha=!0),Re=function(vt,kt){function Lt(Ct){try{return vt.getContext(Ct,kt)}catch{return null}}return Lt("webgl")||Lt("experimental-webgl")||Lt("webgl-experimental")}(tt,Ne)}return Re?{gl:Re,canvas:tt,container:at,extensions:nt,optionalExtensions:Ge,pixelRatio:ut,profile:pt,cachedCode:gt,onDone:ct,onDestroy:Tt}:(Tt(),ct("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Ne,We){for(var at=Array(Ne),tt=0;tt<Ne;++tt)at[tt]=We(tt);return at}function p(Ne){var We,at;return We=(65535<Ne)<<4,We|=at=(255<(Ne>>>=We))<<3,(We|=at=(15<(Ne>>>=at))<<2)|(at=(3<(Ne>>>=at))<<1)|Ne>>>at>>1}function s(){function Ne(tt){e:{for(var Re=16;268435456>=Re;Re*=16)if(tt<=Re){tt=Re;break e}tt=0}return 0<(Re=at[p(tt)>>2]).length?Re.pop():new ArrayBuffer(tt)}function We(tt){at[p(tt.byteLength)>>2].push(tt)}var at=b(8,function(){return[]});return{alloc:Ne,free:We,allocType:function(tt,Re){var Fe=null;switch(tt){case 5120:Fe=new Int8Array(Ne(Re),0,Re);break;case 5121:Fe=new Uint8Array(Ne(Re),0,Re);break;case 5122:Fe=new Int16Array(Ne(2*Re),0,Re);break;case 5123:Fe=new Uint16Array(Ne(2*Re),0,Re);break;case 5124:Fe=new Int32Array(Ne(4*Re),0,Re);break;case 5125:Fe=new Uint32Array(Ne(4*Re),0,Re);break;case 5126:Fe=new Float32Array(Ne(4*Re),0,Re);break;default:return null}return Fe.length!==Re?Fe.subarray(0,Re):Fe},freeType:function(tt){We(tt.buffer)}}}function t(Ne){return!!Ne&&typeof Ne=="object"&&Array.isArray(Ne.shape)&&Array.isArray(Ne.stride)&&typeof Ne.offset=="number"&&Ne.shape.length===Ne.stride.length&&(Array.isArray(Ne.data)||de(Ne.data))}function i(Ne,We,at,tt,Re,Fe){for(var nt=0;nt<We;++nt)for(var Ge=Ne[nt],ut=0;ut<at;++ut)for(var pt=Ge[ut],gt=0;gt<tt;++gt)Re[Fe++]=pt[gt]}function n(Ne,We,at,tt,Re){for(var Fe=1,nt=at+1;nt<We.length;++nt)Fe*=We[nt];var Ge=We[at];if(We.length-at==4){var ut=We[at+1],pt=We[at+2];for(We=We[at+3],nt=0;nt<Ge;++nt)i(Ne[nt],ut,pt,We,tt,Re),Re+=Fe}else for(nt=0;nt<Ge;++nt)n(Ne[nt],We,at+1,tt,Re),Re+=Fe}function r(Ne){return 0|ke[Object.prototype.toString.call(Ne)]}function a(Ne,We){for(var at=0;at<We.length;++at)Ne[at]=We[at]}function l(Ne,We,at,tt,Re,Fe,nt){for(var Ge=0,ut=0;ut<at;++ut)for(var pt=0;pt<tt;++pt)Ne[Ge++]=We[Re*ut+Fe*pt+nt]}function c(Ne,We,at,tt){function Re(ct){this.id=ut++,this.buffer=Ne.createBuffer(),this.type=ct,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,at.profile&&(this.stats={size:0})}function Fe(ct,Tt,vt){ct.byteLength=Tt.byteLength,Ne.bufferData(ct.type,Tt,vt)}function nt(ct,Tt,vt,kt,Lt,Ct){if(ct.usage=vt,Array.isArray(Tt)){if(ct.dtype=kt||5126,0<Tt.length)if(Array.isArray(Tt[0])){Lt=re(Tt);for(var Dt=kt=1;Dt<Lt.length;++Dt)kt*=Lt[Dt];ct.dimension=kt,Fe(ct,Tt=oe(Tt,Lt,ct.dtype),vt),Ct?ct.persistentData=Tt:ve.freeType(Tt)}else typeof Tt[0]=="number"?(ct.dimension=Lt,a(Lt=ve.allocType(ct.dtype,Tt.length),Tt),Fe(ct,Lt,vt),Ct?ct.persistentData=Lt:ve.freeType(Lt)):de(Tt[0])&&(ct.dimension=Tt[0].length,ct.dtype=kt||r(Tt[0])||5126,Fe(ct,Tt=oe(Tt,[Tt.length,Tt[0].length],ct.dtype),vt),Ct?ct.persistentData=Tt:ve.freeType(Tt))}else if(de(Tt))ct.dtype=kt||r(Tt),ct.dimension=Lt,Fe(ct,Tt,vt),Ct&&(ct.persistentData=new Uint8Array(new Uint8Array(Tt.buffer)));else if(t(Tt)){Lt=Tt.shape;var Gt=Tt.stride,tn=(Dt=Tt.offset,0),jt=0,Wt=0,Ft=0;Lt.length===1?(tn=Lt[0],jt=1,Wt=Gt[0],Ft=0):Lt.length===2&&(tn=Lt[0],jt=Lt[1],Wt=Gt[0],Ft=Gt[1]),ct.dtype=kt||r(Tt.data)||5126,ct.dimension=jt,l(Lt=ve.allocType(ct.dtype,tn*jt),Tt.data,tn,jt,Wt,Ft,Dt),Fe(ct,Lt,vt),Ct?ct.persistentData=Lt:ve.freeType(Lt)}else Tt instanceof ArrayBuffer&&(ct.dtype=5121,ct.dimension=Lt,Fe(ct,Tt,vt),Ct&&(ct.persistentData=new Uint8Array(new Uint8Array(Tt))))}function Ge(ct){We.bufferCount--,tt(ct),Ne.deleteBuffer(ct.buffer),ct.buffer=null,delete pt[ct.id]}var ut=0,pt={};Re.prototype.bind=function(){Ne.bindBuffer(this.type,this.buffer)},Re.prototype.destroy=function(){Ge(this)};var gt=[];return at.profile&&(We.getTotalBufferSize=function(){var ct=0;return Object.keys(pt).forEach(function(Tt){ct+=pt[Tt].stats.size}),ct}),{create:function(ct,Tt,vt,kt){function Lt(Dt){var Gt=35044,tn=null,jt=0,Wt=0,Ft=1;return Array.isArray(Dt)||de(Dt)||t(Dt)||Dt instanceof ArrayBuffer?tn=Dt:typeof Dt=="number"?jt=0|Dt:Dt&&("data"in Dt&&(tn=Dt.data),"usage"in Dt&&(Gt=me[Dt.usage]),"type"in Dt&&(Wt=Ee[Dt.type]),"dimension"in Dt&&(Ft=0|Dt.dimension),"length"in Dt&&(jt=0|Dt.length)),Ct.bind(),tn?nt(Ct,tn,Gt,Wt,Ft,kt):(jt&&Ne.bufferData(Ct.type,jt,Gt),Ct.dtype=Wt||5121,Ct.usage=Gt,Ct.dimension=Ft,Ct.byteLength=jt),at.profile&&(Ct.stats.size=Ct.byteLength*fe[Ct.dtype]),Lt}We.bufferCount++;var Ct=new Re(Tt);return pt[Ct.id]=Ct,vt||Lt(ct),Lt._reglType="buffer",Lt._buffer=Ct,Lt.subdata=function(Dt,Gt){var tn,jt=0|(Gt||0);if(Ct.bind(),de(Dt)||Dt instanceof ArrayBuffer)Ne.bufferSubData(Ct.type,jt,Dt);else if(Array.isArray(Dt)){if(0<Dt.length)if(typeof Dt[0]=="number"){var Wt=ve.allocType(Ct.dtype,Dt.length);a(Wt,Dt),Ne.bufferSubData(Ct.type,jt,Wt),ve.freeType(Wt)}else(Array.isArray(Dt[0])||de(Dt[0]))&&(tn=re(Dt),Wt=oe(Dt,tn,Ct.dtype),Ne.bufferSubData(Ct.type,jt,Wt),ve.freeType(Wt))}else if(t(Dt)){tn=Dt.shape;var Ft=Dt.stride,Ln=Wt=0,bn=0,hn=0;tn.length===1?(Wt=tn[0],Ln=1,bn=Ft[0],hn=0):tn.length===2&&(Wt=tn[0],Ln=tn[1],bn=Ft[0],hn=Ft[1]),tn=Array.isArray(Dt.data)?Ct.dtype:r(Dt.data),l(tn=ve.allocType(tn,Wt*Ln),Dt.data,Wt,Ln,bn,hn,Dt.offset),Ne.bufferSubData(Ct.type,jt,tn),ve.freeType(tn)}return Lt},at.profile&&(Lt.stats=Ct.stats),Lt.destroy=function(){Ge(Ct)},Lt},createStream:function(ct,Tt){var vt=gt.pop();return vt||(vt=new Re(ct)),vt.bind(),nt(vt,Tt,35040,0,1,!1),vt},destroyStream:function(ct){gt.push(ct)},clear:function(){pe(pt).forEach(Ge),gt.forEach(Ge)},getBuffer:function(ct){return ct&&ct._buffer instanceof Re?ct._buffer:null},restore:function(){pe(pt).forEach(function(ct){ct.buffer=Ne.createBuffer(),Ne.bindBuffer(ct.type,ct.buffer),Ne.bufferData(ct.type,ct.persistentData||ct.byteLength,ct.usage)})},_initBuffer:nt}}function h(Ne,We,at,tt){function Re(ct){this.id=ut++,Ge[this.id]=this,this.buffer=ct,this.primType=4,this.type=this.vertCount=0}function Fe(ct,Tt,vt,kt,Lt,Ct,Dt){var Gt;if(ct.buffer.bind(),Tt?((Gt=Dt)||de(Tt)&&(!t(Tt)||de(Tt.data))||(Gt=We.oes_element_index_uint?5125:5123),at._initBuffer(ct.buffer,Tt,vt,Gt,3)):(Ne.bufferData(34963,Ct,vt),ct.buffer.dtype=Gt||5121,ct.buffer.usage=vt,ct.buffer.dimension=3,ct.buffer.byteLength=Ct),Gt=Dt,!Dt){switch(ct.buffer.dtype){case 5121:case 5120:Gt=5121;break;case 5123:case 5122:Gt=5123;break;case 5125:case 5124:Gt=5125}ct.buffer.dtype=Gt}ct.type=Gt,0>(Tt=Lt)&&(Tt=ct.buffer.byteLength,Gt===5123?Tt>>=1:Gt===5125&&(Tt>>=2)),ct.vertCount=Tt,Tt=kt,0>kt&&(Tt=4,(kt=ct.buffer.dimension)===1&&(Tt=0),kt===2&&(Tt=1),kt===3&&(Tt=4)),ct.primType=Tt}function nt(ct){tt.elementsCount--,delete Ge[ct.id],ct.buffer.destroy(),ct.buffer=null}var Ge={},ut=0,pt={uint8:5121,uint16:5123};We.oes_element_index_uint&&(pt.uint32=5125),Re.prototype.bind=function(){this.buffer.bind()};var gt=[];return{create:function(ct,Tt){function vt(Ct){if(Ct)if(typeof Ct=="number")kt(Ct),Lt.primType=4,Lt.vertCount=0|Ct,Lt.type=5121;else{var Dt=null,Gt=35044,tn=-1,jt=-1,Wt=0,Ft=0;Array.isArray(Ct)||de(Ct)||t(Ct)?Dt=Ct:("data"in Ct&&(Dt=Ct.data),"usage"in Ct&&(Gt=me[Ct.usage]),"primitive"in Ct&&(tn=Se[Ct.primitive]),"count"in Ct&&(jt=0|Ct.count),"type"in Ct&&(Ft=pt[Ct.type]),"length"in Ct?Wt=0|Ct.length:(Wt=jt,Ft===5123||Ft===5122?Wt*=2:Ft!==5125&&Ft!==5124||(Wt*=4))),Fe(Lt,Dt,Gt,tn,jt,Wt,Ft)}else kt(),Lt.primType=4,Lt.vertCount=0,Lt.type=5121;return vt}var kt=at.create(null,34963,!0),Lt=new Re(kt._buffer);return tt.elementsCount++,vt(ct),vt._reglType="elements",vt._elements=Lt,vt.subdata=function(Ct,Dt){return kt.subdata(Ct,Dt),vt},vt.destroy=function(){nt(Lt)},vt},createStream:function(ct){var Tt=gt.pop();return Tt||(Tt=new Re(at.create(null,34963,!0,!1)._buffer)),Fe(Tt,ct,35040,-1,-1,0,0),Tt},destroyStream:function(ct){gt.push(ct)},getElements:function(ct){return typeof ct=="function"&&ct._elements instanceof Re?ct._elements:null},clear:function(){pe(Ge).forEach(nt)}}}function u(Ne){for(var We=ve.allocType(5123,Ne.length),at=0;at<Ne.length;++at)if(isNaN(Ne[at]))We[at]=65535;else if(Ne[at]===1/0)We[at]=31744;else if(Ne[at]===-1/0)We[at]=64512;else{be[0]=Ne[at];var tt=(Fe=we[0])>>>31<<15,Re=(Fe<<1>>>24)-127,Fe=Fe>>13&1023;We[at]=-24>Re?tt:-14>Re?tt+(Fe+1024>>-14-Re):15<Re?tt+31744:tt+(Re+15<<10)+Fe}return We}function x(Ne){return Array.isArray(Ne)||de(Ne)}function d(Ne){return"[object "+Ne+"]"}function m(Ne){return Array.isArray(Ne)&&(Ne.length===0||typeof Ne[0]=="number")}function g(Ne){return!(!Array.isArray(Ne)||Ne.length===0||!x(Ne[0]))}function y(Ne){return Object.prototype.toString.call(Ne)}function v(Ne){if(!Ne)return!1;var We=y(Ne);return 0<=Ve.indexOf(We)||m(Ne)||g(Ne)||t(Ne)}function _(Ne,We){Ne.type===36193?(Ne.data=u(We),ve.freeType(We)):Ne.data=We}function f(Ne,We,at,tt,Re,Fe){if(Ne=rt[Ne]!==void 0?rt[Ne]:Oe[Ne]*Ze[We],Fe&&(Ne*=6),Re){for(tt=0;1<=at;)tt+=Ne*at*at,at/=2;return tt}return Ne*at*tt}function S(Ne,We,at,tt,Re,Fe,nt){function Ge(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ut(Zt,dn){Zt.internalformat=dn.internalformat,Zt.format=dn.format,Zt.type=dn.type,Zt.compressed=dn.compressed,Zt.premultiplyAlpha=dn.premultiplyAlpha,Zt.flipY=dn.flipY,Zt.unpackAlignment=dn.unpackAlignment,Zt.colorSpace=dn.colorSpace,Zt.width=dn.width,Zt.height=dn.height,Zt.channels=dn.channels}function pt(Zt,dn){if(typeof dn=="object"&&dn){"premultiplyAlpha"in dn&&(Zt.premultiplyAlpha=dn.premultiplyAlpha),"flipY"in dn&&(Zt.flipY=dn.flipY),"alignment"in dn&&(Zt.unpackAlignment=dn.alignment),"colorSpace"in dn&&(Zt.colorSpace=Sn[dn.colorSpace]),"type"in dn&&(Zt.type=Tn[dn.type]);var St=Zt.width,Rt=Zt.height,Xt=Zt.channels,ln=!1;"shape"in dn?(St=dn.shape[0],Rt=dn.shape[1],dn.shape.length===3&&(Xt=dn.shape[2],ln=!0)):("radius"in dn&&(St=Rt=dn.radius),"width"in dn&&(St=dn.width),"height"in dn&&(Rt=dn.height),"channels"in dn&&(Xt=dn.channels,ln=!0)),Zt.width=0|St,Zt.height=0|Rt,Zt.channels=0|Xt,St=!1,"format"in dn&&(St=dn.format,Rt=Zt.internalformat=Rn[St],Zt.format=Mn[Rt],St in Tn&&!("type"in dn)&&(Zt.type=Tn[St]),St in In&&(Zt.compressed=!0),St=!0),!ln&&St?Zt.channels=Oe[Zt.format]:ln&&!St&&Zt.channels!==Ie[Zt.format]&&(Zt.format=Zt.internalformat=Ie[Zt.channels])}}function gt(Zt){Ne.pixelStorei(37440,Zt.flipY),Ne.pixelStorei(37441,Zt.premultiplyAlpha),Ne.pixelStorei(37443,Zt.colorSpace),Ne.pixelStorei(3317,Zt.unpackAlignment)}function ct(){Ge.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Tt(Zt,dn){var St=null;if(v(dn)?St=dn:dn&&(pt(Zt,dn),"x"in dn&&(Zt.xOffset=0|dn.x),"y"in dn&&(Zt.yOffset=0|dn.y),v(dn.data)&&(St=dn.data)),dn.copy){var Rt=Re.viewportWidth,Xt=Re.viewportHeight;Zt.width=Zt.width||Rt-Zt.xOffset,Zt.height=Zt.height||Xt-Zt.yOffset,Zt.needsCopy=!0}else if(St){if(de(St))Zt.channels=Zt.channels||4,Zt.data=St,"type"in dn||Zt.type!==5121||(Zt.type=0|ke[Object.prototype.toString.call(St)]);else if(m(St)){switch(Zt.channels=Zt.channels||4,Xt=(Rt=St).length,Zt.type){case 5121:case 5123:case 5125:case 5126:(Xt=ve.allocType(Zt.type,Xt)).set(Rt),Zt.data=Xt;break;case 36193:Zt.data=u(Rt)}Zt.alignment=1,Zt.needsFree=!0}else if(t(St)){Rt=St.data,Array.isArray(Rt)||Zt.type!==5121||(Zt.type=0|ke[Object.prototype.toString.call(Rt)]),Xt=St.shape;var ln,un,mn,rn,qt=St.stride;Xt.length===3?(mn=Xt[2],rn=qt[2]):rn=mn=1,ln=Xt[0],un=Xt[1],Xt=qt[0],qt=qt[1],Zt.alignment=1,Zt.width=ln,Zt.height=un,Zt.channels=mn,Zt.format=Zt.internalformat=Ie[mn],Zt.needsFree=!0,ln=rn,St=St.offset,mn=Zt.width,rn=Zt.height,un=Zt.channels;for(var Ht=ve.allocType(Zt.type===36193?5126:Zt.type,mn*rn*un),$t=0,an=0;an<rn;++an)for(var wn=0;wn<mn;++wn)for(var En=0;En<un;++En)Ht[$t++]=Rt[Xt*wn+qt*an+ln*En+St];_(Zt,Ht)}else if(y(St)===he||y(St)===_e||y(St)===Ae)y(St)===he||y(St)===_e?Zt.element=St:Zt.element=St.canvas,Zt.width=Zt.element.width,Zt.height=Zt.element.height,Zt.channels=4;else if(y(St)===De)Zt.element=St,Zt.width=St.width,Zt.height=St.height,Zt.channels=4;else if(y(St)===Le)Zt.element=St,Zt.width=St.naturalWidth,Zt.height=St.naturalHeight,Zt.channels=4;else if(y(St)===Be)Zt.element=St,Zt.width=St.videoWidth,Zt.height=St.videoHeight,Zt.channels=4;else if(g(St)){for(Rt=Zt.width||St[0].length,Xt=Zt.height||St.length,qt=Zt.channels,qt=x(St[0][0])?qt||St[0][0].length:qt||1,ln=ge.shape(St),mn=1,rn=0;rn<ln.length;++rn)mn*=ln[rn];mn=ve.allocType(Zt.type===36193?5126:Zt.type,mn),ge.flatten(St,ln,"",mn),_(Zt,mn),Zt.alignment=1,Zt.width=Rt,Zt.height=Xt,Zt.channels=qt,Zt.format=Zt.internalformat=Ie[qt],Zt.needsFree=!0}}else Zt.width=Zt.width||1,Zt.height=Zt.height||1,Zt.channels=Zt.channels||4}function vt(Zt,dn,St,Rt,Xt){var ln=Zt.element,un=Zt.data,mn=Zt.internalformat,rn=Zt.format,qt=Zt.type,Ht=Zt.width,$t=Zt.height;gt(Zt),ln?Ne.texSubImage2D(dn,Xt,St,Rt,rn,qt,ln):Zt.compressed?Ne.compressedTexSubImage2D(dn,Xt,St,Rt,mn,Ht,$t,un):Zt.needsCopy?(tt(),Ne.copyTexSubImage2D(dn,Xt,St,Rt,Zt.xOffset,Zt.yOffset,Ht,$t)):Ne.texSubImage2D(dn,Xt,St,Rt,Ht,$t,rn,qt,un)}function kt(){return pn.pop()||new ct}function Lt(Zt){Zt.needsFree&&ve.freeType(Zt.data),ct.call(Zt),pn.push(Zt)}function Ct(){Ge.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Dt(Zt,dn,St){var Rt=Zt.images[0]=kt();Zt.mipmask=1,Rt.width=Zt.width=dn,Rt.height=Zt.height=St,Rt.channels=Zt.channels=4}function Gt(Zt,dn){var St=null;if(v(dn))ut(St=Zt.images[0]=kt(),Zt),Tt(St,dn),Zt.mipmask=1;else if(pt(Zt,dn),Array.isArray(dn.mipmap))for(var Rt=dn.mipmap,Xt=0;Xt<Rt.length;++Xt)ut(St=Zt.images[Xt]=kt(),Zt),St.width>>=Xt,St.height>>=Xt,Tt(St,Rt[Xt]),Zt.mipmask|=1<<Xt;else ut(St=Zt.images[0]=kt(),Zt),Tt(St,dn),Zt.mipmask=1;ut(Zt,Zt.images[0])}function tn(Zt,dn){for(var St=Zt.images,Rt=0;Rt<St.length&&St[Rt];++Rt){var Xt=St[Rt],ln=dn,un=Rt,mn=Xt.element,rn=Xt.data,qt=Xt.internalformat,Ht=Xt.format,$t=Xt.type,an=Xt.width,wn=Xt.height;gt(Xt),mn?Ne.texImage2D(ln,un,Ht,Ht,$t,mn):Xt.compressed?Ne.compressedTexImage2D(ln,un,qt,an,wn,0,rn):Xt.needsCopy?(tt(),Ne.copyTexImage2D(ln,un,Ht,Xt.xOffset,Xt.yOffset,an,wn,0)):Ne.texImage2D(ln,un,Ht,an,wn,0,Ht,$t,rn||null)}}function jt(){var Zt=Cn.pop()||new Ct;Ge.call(Zt);for(var dn=Zt.mipmask=0;16>dn;++dn)Zt.images[dn]=null;return Zt}function Wt(Zt){for(var dn=Zt.images,St=0;St<dn.length;++St)dn[St]&&Lt(dn[St]),dn[St]=null;Cn.push(Zt)}function Ft(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Ln(Zt,dn){"min"in dn&&(Zt.minFilter=An[dn.min],0<=Me.indexOf(Zt.minFilter)&&!("faces"in dn)&&(Zt.genMipmaps=!0)),"mag"in dn&&(Zt.magFilter=xn[dn.mag]);var St=Zt.wrapS,Rt=Zt.wrapT;if("wrap"in dn){var Xt=dn.wrap;typeof Xt=="string"?St=Rt=vn[Xt]:Array.isArray(Xt)&&(St=vn[Xt[0]],Rt=vn[Xt[1]])}else"wrapS"in dn&&(St=vn[dn.wrapS]),"wrapT"in dn&&(Rt=vn[dn.wrapT]);if(Zt.wrapS=St,Zt.wrapT=Rt,"anisotropic"in dn&&(Zt.anisotropic=dn.anisotropic),"mipmap"in dn){switch(St=!1,typeof dn.mipmap){case"string":Zt.mipmapHint=cn[dn.mipmap],St=Zt.genMipmaps=!0;break;case"boolean":St=Zt.genMipmaps=dn.mipmap;break;case"object":Zt.genMipmaps=!1,St=!0}!St||"min"in dn||(Zt.minFilter=9984)}}function bn(Zt,dn){Ne.texParameteri(dn,10241,Zt.minFilter),Ne.texParameteri(dn,10240,Zt.magFilter),Ne.texParameteri(dn,10242,Zt.wrapS),Ne.texParameteri(dn,10243,Zt.wrapT),We.ext_texture_filter_anisotropic&&Ne.texParameteri(dn,34046,Zt.anisotropic),Zt.genMipmaps&&(Ne.hint(33170,Zt.mipmapHint),Ne.generateMipmap(dn))}function hn(Zt){Ge.call(this),this.mipmask=0,this.internalformat=6408,this.id=jn++,this.refCount=1,this.target=Zt,this.texture=Ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ft,nt.profile&&(this.stats={size:0})}function Kt(Zt){Ne.activeTexture(33984),Ne.bindTexture(Zt.target,Zt.texture)}function sn(){var Zt=dr[0];Zt?Ne.bindTexture(Zt.target,Zt.texture):Ne.bindTexture(3553,null)}function Qt(Zt){var dn=Zt.texture,St=Zt.unit,Rt=Zt.target;0<=St&&(Ne.activeTexture(33984+St),Ne.bindTexture(Rt,null),dr[St]=null),Ne.deleteTexture(dn),Zt.texture=null,Zt.params=null,Zt.pixels=null,Zt.refCount=0,delete Bn[Zt.id],Fe.textureCount--}var cn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},vn={repeat:10497,clamp:33071,mirror:33648},xn={nearest:9728,linear:9729},An=Y({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},xn),Sn={none:0,browser:37444},Tn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Rn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},In={};We.ext_srgb&&(Rn.srgb=35904,Rn.srgba=35906),We.oes_texture_float&&(Tn.float32=Tn.float=5126),We.oes_texture_half_float&&(Tn.float16=Tn["half float"]=36193),We.webgl_depth_texture&&(Y(Rn,{depth:6402,"depth stencil":34041}),Y(Tn,{uint16:5123,uint32:5125,"depth stencil":34042})),We.webgl_compressed_texture_s3tc&&Y(In,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),We.webgl_compressed_texture_atc&&Y(In,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),We.webgl_compressed_texture_pvrtc&&Y(In,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),We.webgl_compressed_texture_etc1&&(In["rgb etc1"]=36196);var Xn=Array.prototype.slice.call(Ne.getParameter(34467));Object.keys(In).forEach(function(Zt){var dn=In[Zt];0<=Xn.indexOf(dn)&&(Rn[Zt]=dn)});var Vn=Object.keys(Rn);at.textureFormats=Vn;var er=[];Object.keys(Rn).forEach(function(Zt){er[Rn[Zt]]=Zt});var Wn=[];Object.keys(Tn).forEach(function(Zt){Wn[Tn[Zt]]=Zt});var fr=[];Object.keys(xn).forEach(function(Zt){fr[xn[Zt]]=Zt});var Jt=[];Object.keys(An).forEach(function(Zt){Jt[An[Zt]]=Zt});var en=[];Object.keys(vn).forEach(function(Zt){en[vn[Zt]]=Zt});var Mn=Vn.reduce(function(Zt,dn){var St=Rn[dn];return St===6409||St===6406||St===6409||St===6410||St===6402||St===34041||We.ext_srgb&&(St===35904||St===35906)?Zt[St]=St:St===32855||0<=dn.indexOf("rgba")?Zt[St]=6408:Zt[St]=6407,Zt},{}),pn=[],Cn=[],jn=0,Bn={},Yn=at.maxTextureUnits,dr=Array(Yn).map(function(){return null});return Y(hn.prototype,{bind:function(){this.bindCount+=1;var Zt=this.unit;if(0>Zt){for(var dn=0;dn<Yn;++dn){var St=dr[dn];if(St){if(0<St.bindCount)continue;St.unit=-1}dr[dn]=this,Zt=dn;break}nt.profile&&Fe.maxTextureUnits<Zt+1&&(Fe.maxTextureUnits=Zt+1),this.unit=Zt,Ne.activeTexture(33984+Zt),Ne.bindTexture(this.target,this.texture)}return Zt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Qt(this)}}),nt.profile&&(Fe.getTotalTextureSize=function(){var Zt=0;return Object.keys(Bn).forEach(function(dn){Zt+=Bn[dn].stats.size}),Zt}),{create2D:function(Zt,dn){function St(Xt,ln){var un=Rt.texInfo;Ft.call(un);var mn=jt();return typeof Xt=="number"?Dt(mn,0|Xt,typeof ln=="number"?0|ln:0|Xt):Xt?(Ln(un,Xt),Gt(mn,Xt)):Dt(mn,1,1),un.genMipmaps&&(mn.mipmask=(mn.width<<1)-1),Rt.mipmask=mn.mipmask,ut(Rt,mn),Rt.internalformat=mn.internalformat,St.width=mn.width,St.height=mn.height,Kt(Rt),tn(mn,3553),bn(un,3553),sn(),Wt(mn),nt.profile&&(Rt.stats.size=f(Rt.internalformat,Rt.type,mn.width,mn.height,un.genMipmaps,!1)),St.format=er[Rt.internalformat],St.type=Wn[Rt.type],St.mag=fr[un.magFilter],St.min=Jt[un.minFilter],St.wrapS=en[un.wrapS],St.wrapT=en[un.wrapT],St}var Rt=new hn(3553);return Bn[Rt.id]=Rt,Fe.textureCount++,St(Zt,dn),St.subimage=function(Xt,ln,un,mn){ln|=0,un|=0,mn|=0;var rn=kt();return ut(rn,Rt),rn.width=0,rn.height=0,Tt(rn,Xt),rn.width=rn.width||(Rt.width>>mn)-ln,rn.height=rn.height||(Rt.height>>mn)-un,Kt(Rt),vt(rn,3553,ln,un,mn),sn(),Lt(rn),St},St.resize=function(Xt,ln){var un=0|Xt,mn=0|ln||un;if(un===Rt.width&&mn===Rt.height)return St;St.width=Rt.width=un,St.height=Rt.height=mn,Kt(Rt);for(var rn=0;Rt.mipmask>>rn;++rn){var qt=un>>rn,Ht=mn>>rn;if(!qt||!Ht)break;Ne.texImage2D(3553,rn,Rt.format,qt,Ht,0,Rt.format,Rt.type,null)}return sn(),nt.profile&&(Rt.stats.size=f(Rt.internalformat,Rt.type,un,mn,!1,!1)),St},St._reglType="texture2d",St._texture=Rt,nt.profile&&(St.stats=Rt.stats),St.destroy=function(){Rt.decRef()},St},createCube:function(Zt,dn,St,Rt,Xt,ln){function un(qt,Ht,$t,an,wn,En){var On,Fn=mn.texInfo;for(Ft.call(Fn),On=0;6>On;++On)rn[On]=jt();if(typeof qt!="number"&&qt){if(typeof qt=="object")if(Ht)Gt(rn[0],qt),Gt(rn[1],Ht),Gt(rn[2],$t),Gt(rn[3],an),Gt(rn[4],wn),Gt(rn[5],En);else if(Ln(Fn,qt),pt(mn,qt),"faces"in qt)for(qt=qt.faces,On=0;6>On;++On)ut(rn[On],mn),Gt(rn[On],qt[On]);else for(On=0;6>On;++On)Gt(rn[On],qt)}else for(qt=0|qt||1,On=0;6>On;++On)Dt(rn[On],qt,qt);for(ut(mn,rn[0]),mn.mipmask=Fn.genMipmaps?(rn[0].width<<1)-1:rn[0].mipmask,mn.internalformat=rn[0].internalformat,un.width=rn[0].width,un.height=rn[0].height,Kt(mn),On=0;6>On;++On)tn(rn[On],34069+On);for(bn(Fn,34067),sn(),nt.profile&&(mn.stats.size=f(mn.internalformat,mn.type,un.width,un.height,Fn.genMipmaps,!0)),un.format=er[mn.internalformat],un.type=Wn[mn.type],un.mag=fr[Fn.magFilter],un.min=Jt[Fn.minFilter],un.wrapS=en[Fn.wrapS],un.wrapT=en[Fn.wrapT],On=0;6>On;++On)Wt(rn[On]);return un}var mn=new hn(34067);Bn[mn.id]=mn,Fe.cubeCount++;var rn=Array(6);return un(Zt,dn,St,Rt,Xt,ln),un.subimage=function(qt,Ht,$t,an,wn){$t|=0,an|=0,wn|=0;var En=kt();return ut(En,mn),En.width=0,En.height=0,Tt(En,Ht),En.width=En.width||(mn.width>>wn)-$t,En.height=En.height||(mn.height>>wn)-an,Kt(mn),vt(En,34069+qt,$t,an,wn),sn(),Lt(En),un},un.resize=function(qt){if((qt|=0)!==mn.width){un.width=mn.width=qt,un.height=mn.height=qt,Kt(mn);for(var Ht=0;6>Ht;++Ht)for(var $t=0;mn.mipmask>>$t;++$t)Ne.texImage2D(34069+Ht,$t,mn.format,qt>>$t,qt>>$t,0,mn.format,mn.type,null);return sn(),nt.profile&&(mn.stats.size=f(mn.internalformat,mn.type,un.width,un.height,!1,!0)),un}},un._reglType="textureCube",un._texture=mn,nt.profile&&(un.stats=mn.stats),un.destroy=function(){mn.decRef()},un},clear:function(){for(var Zt=0;Zt<Yn;++Zt)Ne.activeTexture(33984+Zt),Ne.bindTexture(3553,null),dr[Zt]=null;pe(Bn).forEach(Qt),Fe.cubeCount=0,Fe.textureCount=0},getTexture:function(Zt){return null},restore:function(){for(var Zt=0;Zt<Yn;++Zt){var dn=dr[Zt];dn&&(dn.bindCount=0,dn.unit=-1,dr[Zt]=null)}pe(Bn).forEach(function(St){St.texture=Ne.createTexture(),Ne.bindTexture(St.target,St.texture);for(var Rt=0;32>Rt;++Rt)if(St.mipmask&1<<Rt)if(St.target===3553)Ne.texImage2D(3553,Rt,St.internalformat,St.width>>Rt,St.height>>Rt,0,St.internalformat,St.type,null);else for(var Xt=0;6>Xt;++Xt)Ne.texImage2D(34069+Xt,Rt,St.internalformat,St.width>>Rt,St.height>>Rt,0,St.internalformat,St.type,null);bn(St.texInfo,St.target)})},refresh:function(){for(var Zt=0;Zt<Yn;++Zt){var dn=dr[Zt];dn&&(dn.bindCount=0,dn.unit=-1,dr[Zt]=null),Ne.activeTexture(33984+Zt),Ne.bindTexture(3553,null),Ne.bindTexture(34067,null)}}}}function w(Ne,We,at,tt,Re,Fe){function nt(hn,Kt,sn){this.target=hn,this.texture=Kt,this.renderbuffer=sn;var Qt=hn=0;Kt?(hn=Kt.width,Qt=Kt.height):sn&&(hn=sn.width,Qt=sn.height),this.width=hn,this.height=Qt}function Ge(hn){hn&&(hn.texture&&hn.texture._texture.decRef(),hn.renderbuffer&&hn.renderbuffer._renderbuffer.decRef())}function ut(hn,Kt,sn){hn&&(hn.texture?hn.texture._texture.refCount+=1:hn.renderbuffer._renderbuffer.refCount+=1)}function pt(hn,Kt){Kt&&(Kt.texture?Ne.framebufferTexture2D(36160,hn,Kt.target,Kt.texture._texture.texture,0):Ne.framebufferRenderbuffer(36160,hn,36161,Kt.renderbuffer._renderbuffer.renderbuffer))}function gt(hn){var Kt=3553,sn=null,Qt=null,cn=hn;return typeof hn=="object"&&(cn=hn.data,"target"in hn&&(Kt=0|hn.target)),(hn=cn._reglType)==="texture2d"||hn==="textureCube"?sn=cn:hn==="renderbuffer"&&(Qt=cn,Kt=36161),new nt(Kt,sn,Qt)}function ct(hn,Kt,sn,Qt,cn){return sn?((hn=tt.create2D({width:hn,height:Kt,format:Qt,type:cn}))._texture.refCount=0,new nt(3553,hn,null)):((hn=Re.create({width:hn,height:Kt,format:Qt}))._renderbuffer.refCount=0,new nt(36161,null,hn))}function Tt(hn){return hn&&(hn.texture||hn.renderbuffer)}function vt(hn,Kt,sn){hn&&(hn.texture?hn.texture.resize(Kt,sn):hn.renderbuffer&&hn.renderbuffer.resize(Kt,sn),hn.width=Kt,hn.height=sn)}function kt(){this.id=Ln++,bn[this.id]=this,this.framebuffer=Ne.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Lt(hn){hn.colorAttachments.forEach(Ge),Ge(hn.depthAttachment),Ge(hn.stencilAttachment),Ge(hn.depthStencilAttachment)}function Ct(hn){Ne.deleteFramebuffer(hn.framebuffer),hn.framebuffer=null,Fe.framebufferCount--,delete bn[hn.id]}function Dt(hn){var Kt;Ne.bindFramebuffer(36160,hn.framebuffer);var sn=hn.colorAttachments;for(Kt=0;Kt<sn.length;++Kt)pt(36064+Kt,sn[Kt]);for(Kt=sn.length;Kt<at.maxColorAttachments;++Kt)Ne.framebufferTexture2D(36160,36064+Kt,3553,null,0);Ne.framebufferTexture2D(36160,33306,3553,null,0),Ne.framebufferTexture2D(36160,36096,3553,null,0),Ne.framebufferTexture2D(36160,36128,3553,null,0),pt(36096,hn.depthAttachment),pt(36128,hn.stencilAttachment),pt(33306,hn.depthStencilAttachment),Ne.checkFramebufferStatus(36160),Ne.isContextLost(),Ne.bindFramebuffer(36160,tn.next?tn.next.framebuffer:null),tn.cur=tn.next,Ne.getError()}function Gt(hn,Kt){function sn(cn,vn){var xn,An=0,Sn=0,Tn=!0,Rn=!0;xn=null;var In=!0,Xn="rgba",Vn="uint8",er=1,Wn=null,fr=null,Jt=null,en=!1;typeof cn=="number"?(An=0|cn,Sn=0|vn||An):cn?("shape"in cn?(An=(Sn=cn.shape)[0],Sn=Sn[1]):("radius"in cn&&(An=Sn=cn.radius),"width"in cn&&(An=cn.width),"height"in cn&&(Sn=cn.height)),("color"in cn||"colors"in cn)&&(xn=cn.color||cn.colors,Array.isArray(xn)),xn||("colorCount"in cn&&(er=0|cn.colorCount),"colorTexture"in cn&&(In=!!cn.colorTexture,Xn="rgba4"),"colorType"in cn&&(Vn=cn.colorType,!In)&&(Vn==="half float"||Vn==="float16"?Xn="rgba16f":Vn!=="float"&&Vn!=="float32"||(Xn="rgba32f")),"colorFormat"in cn&&(Xn=cn.colorFormat,0<=jt.indexOf(Xn)?In=!0:0<=Wt.indexOf(Xn)&&(In=!1))),("depthTexture"in cn||"depthStencilTexture"in cn)&&(en=!(!cn.depthTexture&&!cn.depthStencilTexture)),"depth"in cn&&(typeof cn.depth=="boolean"?Tn=cn.depth:(Wn=cn.depth,Rn=!1)),"stencil"in cn&&(typeof cn.stencil=="boolean"?Rn=cn.stencil:(fr=cn.stencil,Tn=!1)),"depthStencil"in cn&&(typeof cn.depthStencil=="boolean"?Tn=Rn=cn.depthStencil:(Jt=cn.depthStencil,Rn=Tn=!1))):An=Sn=1;var Mn=null,pn=null,Cn=null,jn=null;if(Array.isArray(xn))Mn=xn.map(gt);else if(xn)Mn=[gt(xn)];else for(Mn=Array(er),xn=0;xn<er;++xn)Mn[xn]=ct(An,Sn,In,Xn,Vn);for(An=An||Mn[0].width,Sn=Sn||Mn[0].height,Wn?pn=gt(Wn):Tn&&!Rn&&(pn=ct(An,Sn,en,"depth","uint32")),fr?Cn=gt(fr):Rn&&!Tn&&(Cn=ct(An,Sn,!1,"stencil","uint8")),Jt?jn=gt(Jt):!Wn&&!fr&&Rn&&Tn&&(jn=ct(An,Sn,en,"depth stencil","depth stencil")),Tn=null,xn=0;xn<Mn.length;++xn)ut(Mn[xn]),Mn[xn]&&Mn[xn].texture&&(Rn=mt[Mn[xn].texture._texture.format]*ht[Mn[xn].texture._texture.type],Tn===null&&(Tn=Rn));return ut(pn),ut(Cn),ut(jn),Lt(Qt),Qt.width=An,Qt.height=Sn,Qt.colorAttachments=Mn,Qt.depthAttachment=pn,Qt.stencilAttachment=Cn,Qt.depthStencilAttachment=jn,sn.color=Mn.map(Tt),sn.depth=Tt(pn),sn.stencil=Tt(Cn),sn.depthStencil=Tt(jn),sn.width=Qt.width,sn.height=Qt.height,Dt(Qt),sn}var Qt=new kt;return Fe.framebufferCount++,sn(hn,Kt),Y(sn,{resize:function(cn,vn){var xn=Math.max(0|cn,1),An=Math.max(0|vn||xn,1);if(xn===Qt.width&&An===Qt.height)return sn;for(var Sn=Qt.colorAttachments,Tn=0;Tn<Sn.length;++Tn)vt(Sn[Tn],xn,An);return vt(Qt.depthAttachment,xn,An),vt(Qt.stencilAttachment,xn,An),vt(Qt.depthStencilAttachment,xn,An),Qt.width=sn.width=xn,Qt.height=sn.height=An,Dt(Qt),sn},_reglType:"framebuffer",_framebuffer:Qt,destroy:function(){Ct(Qt),Lt(Qt)},use:function(cn){tn.setFBO({framebuffer:sn},cn)}})}var tn={cur:null,next:null,dirty:!1,setFBO:null},jt=["rgba"],Wt=["rgba4","rgb565","rgb5 a1"];We.ext_srgb&&Wt.push("srgba"),We.ext_color_buffer_half_float&&Wt.push("rgba16f","rgb16f"),We.webgl_color_buffer_float&&Wt.push("rgba32f");var Ft=["uint8"];We.oes_texture_half_float&&Ft.push("half float","float16"),We.oes_texture_float&&Ft.push("float","float32");var Ln=0,bn={};return Y(tn,{getFramebuffer:function(hn){return typeof hn=="function"&&hn._reglType==="framebuffer"&&(hn=hn._framebuffer)instanceof kt?hn:null},create:Gt,createCube:function(hn){function Kt(Qt){var cn,vn={color:null},xn=0,An=null;cn="rgba";var Sn="uint8",Tn=1;if(typeof Qt=="number"?xn=0|Qt:Qt?("shape"in Qt?xn=Qt.shape[0]:("radius"in Qt&&(xn=0|Qt.radius),"width"in Qt?xn=0|Qt.width:"height"in Qt&&(xn=0|Qt.height)),("color"in Qt||"colors"in Qt)&&(An=Qt.color||Qt.colors,Array.isArray(An)),An||("colorCount"in Qt&&(Tn=0|Qt.colorCount),"colorType"in Qt&&(Sn=Qt.colorType),"colorFormat"in Qt&&(cn=Qt.colorFormat)),"depth"in Qt&&(vn.depth=Qt.depth),"stencil"in Qt&&(vn.stencil=Qt.stencil),"depthStencil"in Qt&&(vn.depthStencil=Qt.depthStencil)):xn=1,An)if(Array.isArray(An))for(Qt=[],cn=0;cn<An.length;++cn)Qt[cn]=An[cn];else Qt=[An];else for(Qt=Array(Tn),An={radius:xn,format:cn,type:Sn},cn=0;cn<Tn;++cn)Qt[cn]=tt.createCube(An);for(vn.color=Array(Qt.length),cn=0;cn<Qt.length;++cn)Tn=Qt[cn],xn=xn||Tn.width,vn.color[cn]={target:34069,data:Qt[cn]};for(cn=0;6>cn;++cn){for(Tn=0;Tn<Qt.length;++Tn)vn.color[Tn].target=34069+cn;0<cn&&(vn.depth=sn[0].depth,vn.stencil=sn[0].stencil,vn.depthStencil=sn[0].depthStencil),sn[cn]?sn[cn](vn):sn[cn]=Gt(vn)}return Y(Kt,{width:xn,height:xn,color:Qt})}var sn=Array(6);return Kt(hn),Y(Kt,{faces:sn,resize:function(Qt){var cn=0|Qt;if(cn===Kt.width)return Kt;var vn=Kt.color;for(Qt=0;Qt<vn.length;++Qt)vn[Qt].resize(cn);for(Qt=0;6>Qt;++Qt)sn[Qt].resize(cn);return Kt.width=Kt.height=cn,Kt},_reglType:"framebufferCube",destroy:function(){sn.forEach(function(Qt){Qt.destroy()})}})},clear:function(){pe(bn).forEach(Ct)},restore:function(){tn.cur=null,tn.next=null,tn.dirty=!0,pe(bn).forEach(function(hn){hn.framebuffer=Ne.createFramebuffer(),Dt(hn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(Ne,We,at,tt,Re,Fe,nt){function Ge(){this.id=++gt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var vt=We.oes_vertex_array_object;this.vao=vt?vt.createVertexArrayOES():null,ct[this.id]=this,this.buffers=[]}var ut=at.maxAttributes,pt=Array(ut);for(at=0;at<ut;++at)pt[at]=new E;var gt=0,ct={},Tt={Record:E,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:We.oes_vertex_array_object?function(){We.oes_vertex_array_object&&pe(ct).forEach(function(vt){vt.refresh()})}:function(){},createVAO:function(vt){function kt(Ct){var Dt;Array.isArray(Ct)?(Dt=Ct,Lt.elements&&Lt.ownsElements&&Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1,Lt.offset=0,Lt.count=0,Lt.instances=-1,Lt.primitive=4):(Ct.elements?(Dt=Ct.elements,Lt.ownsElements?(typeof Dt=="function"&&Dt._reglType==="elements"?Lt.elements.destroy():Lt.elements(Dt),Lt.ownsElements=!1):Fe.getElements(Ct.elements)?(Lt.elements=Ct.elements,Lt.ownsElements=!1):(Lt.elements=Fe.create(Ct.elements),Lt.ownsElements=!0)):(Lt.elements=null,Lt.ownsElements=!1),Dt=Ct.attributes,Lt.offset=0,Lt.count=-1,Lt.instances=-1,Lt.primitive=4,Lt.elements&&(Lt.count=Lt.elements._elements.vertCount,Lt.primitive=Lt.elements._elements.primType),"offset"in Ct&&(Lt.offset=0|Ct.offset),"count"in Ct&&(Lt.count=0|Ct.count),"instances"in Ct&&(Lt.instances=0|Ct.instances),"primitive"in Ct&&(Lt.primitive=Se[Ct.primitive])),Ct={};var Gt=Lt.attributes;Gt.length=Dt.length;for(var tn=0;tn<Dt.length;++tn){var jt,Wt=Dt[tn],Ft=Gt[tn]=new E,Ln=Wt.data||Wt;Array.isArray(Ln)||de(Ln)||t(Ln)?(Lt.buffers[tn]&&(jt=Lt.buffers[tn],de(Ln)&&jt._buffer.byteLength>=Ln.byteLength?jt.subdata(Ln):(jt.destroy(),Lt.buffers[tn]=null)),Lt.buffers[tn]||(jt=Lt.buffers[tn]=Re.create(Wt,34962,!1,!0)),Ft.buffer=Re.getBuffer(jt),Ft.size=0|Ft.buffer.dimension,Ft.normalized=!1,Ft.type=Ft.buffer.dtype,Ft.offset=0,Ft.stride=0,Ft.divisor=0,Ft.state=1,Ct[tn]=1):Re.getBuffer(Wt)?(Ft.buffer=Re.getBuffer(Wt),Ft.size=0|Ft.buffer.dimension,Ft.normalized=!1,Ft.type=Ft.buffer.dtype,Ft.offset=0,Ft.stride=0,Ft.divisor=0,Ft.state=1):Re.getBuffer(Wt.buffer)?(Ft.buffer=Re.getBuffer(Wt.buffer),Ft.size=0|(+Wt.size||Ft.buffer.dimension),Ft.normalized=!!Wt.normalized||!1,Ft.type="type"in Wt?Ee[Wt.type]:Ft.buffer.dtype,Ft.offset=0|(Wt.offset||0),Ft.stride=0|(Wt.stride||0),Ft.divisor=0|(Wt.divisor||0),Ft.state=1):"x"in Wt&&(Ft.x=+Wt.x||0,Ft.y=+Wt.y||0,Ft.z=+Wt.z||0,Ft.w=+Wt.w||0,Ft.state=2)}for(jt=0;jt<Lt.buffers.length;++jt)!Ct[jt]&&Lt.buffers[jt]&&(Lt.buffers[jt].destroy(),Lt.buffers[jt]=null);return Lt.refresh(),kt}var Lt=new Ge;return tt.vaoCount+=1,kt.destroy=function(){for(var Ct=0;Ct<Lt.buffers.length;++Ct)Lt.buffers[Ct]&&Lt.buffers[Ct].destroy();Lt.buffers.length=0,Lt.ownsElements&&(Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1),Lt.destroy()},kt._vao=Lt,kt._reglType="vao",kt(vt)},getVAO:function(vt){return typeof vt=="function"&&vt._vao?vt._vao:null},destroyBuffer:function(vt){for(var kt=0;kt<pt.length;++kt){var Lt=pt[kt];Lt.buffer===vt&&(Ne.disableVertexAttribArray(kt),Lt.buffer=null)}},setVAO:We.oes_vertex_array_object?function(vt){if(vt!==Tt.currentVAO){var kt=We.oes_vertex_array_object;vt?kt.bindVertexArrayOES(vt.vao):kt.bindVertexArrayOES(null),Tt.currentVAO=vt}}:function(vt){if(vt!==Tt.currentVAO){if(vt)vt.bindAttrs();else{for(var kt=We.angle_instanced_arrays,Lt=0;Lt<pt.length;++Lt){var Ct=pt[Lt];Ct.buffer?(Ne.enableVertexAttribArray(Lt),Ct.buffer.bind(),Ne.vertexAttribPointer(Lt,Ct.size,Ct.type,Ct.normalized,Ct.stride,Ct.offfset),kt&&Ct.divisor&&kt.vertexAttribDivisorANGLE(Lt,Ct.divisor)):(Ne.disableVertexAttribArray(Lt),Ne.vertexAttrib4f(Lt,Ct.x,Ct.y,Ct.z,Ct.w))}nt.elements?Ne.bindBuffer(34963,nt.elements.buffer.buffer):Ne.bindBuffer(34963,null)}Tt.currentVAO=vt}},clear:We.oes_vertex_array_object?function(){pe(ct).forEach(function(vt){vt.destroy()})}:function(){}};return Ge.prototype.bindAttrs=function(){for(var vt=We.angle_instanced_arrays,kt=this.attributes,Lt=0;Lt<kt.length;++Lt){var Ct=kt[Lt];Ct.buffer?(Ne.enableVertexAttribArray(Lt),Ne.bindBuffer(34962,Ct.buffer.buffer),Ne.vertexAttribPointer(Lt,Ct.size,Ct.type,Ct.normalized,Ct.stride,Ct.offset),vt&&Ct.divisor&&vt.vertexAttribDivisorANGLE(Lt,Ct.divisor)):(Ne.disableVertexAttribArray(Lt),Ne.vertexAttrib4f(Lt,Ct.x,Ct.y,Ct.z,Ct.w))}for(vt=kt.length;vt<ut;++vt)Ne.disableVertexAttribArray(vt);(vt=Fe.getElements(this.elements))?Ne.bindBuffer(34963,vt.buffer.buffer):Ne.bindBuffer(34963,null)},Ge.prototype.refresh=function(){var vt=We.oes_vertex_array_object;vt&&(vt.bindVertexArrayOES(this.vao),this.bindAttrs(),Tt.currentVAO=null,vt.bindVertexArrayOES(null))},Ge.prototype.destroy=function(){if(this.vao){var vt=We.oes_vertex_array_object;this===Tt.currentVAO&&(Tt.currentVAO=null,vt.bindVertexArrayOES(null)),vt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ct[this.id]&&(delete ct[this.id],--tt.vaoCount)},Tt}function C(Ne,We,at,tt){function Re(kt,Lt,Ct,Dt){this.name=kt,this.id=Lt,this.location=Ct,this.info=Dt}function Fe(kt,Lt){for(var Ct=0;Ct<kt.length;++Ct)if(kt[Ct].id===Lt.id)return void(kt[Ct].location=Lt.location);kt.push(Lt)}function nt(kt,Lt,Ct){if(!(Gt=(Ct=kt===35632?pt:gt)[Lt])){var Dt=We.str(Lt),Gt=Ne.createShader(kt);Ne.shaderSource(Gt,Dt),Ne.compileShader(Gt),Ct[Lt]=Gt}return Gt}function Ge(kt,Lt){this.id=vt++,this.fragId=kt,this.vertId=Lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,tt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ut(kt,Lt,Ct){var Dt;Dt=nt(35632,kt.fragId);var Gt=nt(35633,kt.vertId);if(Lt=kt.program=Ne.createProgram(),Ne.attachShader(Lt,Dt),Ne.attachShader(Lt,Gt),Ct)for(Dt=0;Dt<Ct.length;++Dt)Gt=Ct[Dt],Ne.bindAttribLocation(Lt,Gt[0],Gt[1]);Ne.linkProgram(Lt),Gt=Ne.getProgramParameter(Lt,35718),tt.profile&&(kt.stats.uniformsCount=Gt);var tn=kt.uniforms;for(Dt=0;Dt<Gt;++Dt)if(Ct=Ne.getActiveUniform(Lt,Dt))if(1<Ct.size)for(var jt=0;jt<Ct.size;++jt){var Wt=Ct.name.replace("[0]","["+jt+"]");Fe(tn,new Re(Wt,We.id(Wt),Ne.getUniformLocation(Lt,Wt),Ct))}else Fe(tn,new Re(Ct.name,We.id(Ct.name),Ne.getUniformLocation(Lt,Ct.name),Ct));for(Gt=Ne.getProgramParameter(Lt,35721),tt.profile&&(kt.stats.attributesCount=Gt),kt=kt.attributes,Dt=0;Dt<Gt;++Dt)(Ct=Ne.getActiveAttrib(Lt,Dt))&&Fe(kt,new Re(Ct.name,We.id(Ct.name),Ne.getAttribLocation(Lt,Ct.name),Ct))}var pt={},gt={},ct={},Tt=[],vt=0;return tt.profile&&(at.getMaxUniformsCount=function(){var kt=0;return Tt.forEach(function(Lt){Lt.stats.uniformsCount>kt&&(kt=Lt.stats.uniformsCount)}),kt},at.getMaxAttributesCount=function(){var kt=0;return Tt.forEach(function(Lt){Lt.stats.attributesCount>kt&&(kt=Lt.stats.attributesCount)}),kt}),{clear:function(){var kt=Ne.deleteShader.bind(Ne);pe(pt).forEach(kt),pt={},pe(gt).forEach(kt),gt={},Tt.forEach(function(Lt){Ne.deleteProgram(Lt.program)}),Tt.length=0,ct={},at.shaderCount=0},program:function(kt,Lt,Ct,Dt){var Gt=ct[Lt];Gt||(Gt=ct[Lt]={});var tn=Gt[kt];if(tn&&(tn.refCount++,!Dt))return tn;var jt=new Ge(Lt,kt);return at.shaderCount++,ut(jt,Ct,Dt),tn||(Gt[kt]=jt),Tt.push(jt),Y(jt,{destroy:function(){if(jt.refCount--,0>=jt.refCount){Ne.deleteProgram(jt.program);var Wt=Tt.indexOf(jt);Tt.splice(Wt,1),at.shaderCount--}0>=Gt[jt.vertId].refCount&&(Ne.deleteShader(gt[jt.vertId]),delete gt[jt.vertId],delete ct[jt.fragId][jt.vertId]),Object.keys(ct[jt.fragId]).length||(Ne.deleteShader(pt[jt.fragId]),delete pt[jt.fragId],delete ct[jt.fragId])}})},restore:function(){pt={},gt={};for(var kt=0;kt<Tt.length;++kt)ut(Tt[kt],null,Tt[kt].attributes.map(function(Lt){return[Lt.location,Lt.name]}))},shader:nt,frag:-1,vert:-1}}function O(Ne,We,at,tt,Re,Fe,nt){function Ge(ut){var pt;pt=We.next===null?5121:We.next.colorAttachments[0].texture._texture.type;var gt=0,ct=0,Tt=tt.framebufferWidth,vt=tt.framebufferHeight,kt=null;return de(ut)?kt=ut:ut&&(gt=0|ut.x,ct=0|ut.y,Tt=0|(ut.width||tt.framebufferWidth-gt),vt=0|(ut.height||tt.framebufferHeight-ct),kt=ut.data||null),at(),ut=Tt*vt*4,kt||(pt===5121?kt=new Uint8Array(ut):pt===5126&&(kt=kt||new Float32Array(ut))),Ne.pixelStorei(3333,4),Ne.readPixels(gt,ct,Tt,vt,6408,pt,kt),kt}return function(ut){return ut&&"framebuffer"in ut?function(pt){var gt;return We.setFBO({framebuffer:pt.framebuffer},function(){gt=Ge(pt)}),gt}(ut):Ge(ut)}}function R(Ne,We){return Ne>>>We|Ne<<32-We}function U(Ne,We){var at=(65535&Ne)+(65535&We);return(Ne>>16)+(We>>16)+(at>>16)<<16|65535&at}function D(Ne){return Array.prototype.slice.call(Ne)}function N(Ne){return D(Ne).join("")}function W(Ne){function We(){var gt=[],ct=[];return Y(function(){gt.push.apply(gt,D(arguments))},{def:function(){var Tt="v"+Re++;return ct.push(Tt),0<arguments.length&&(gt.push(Tt,"="),gt.push.apply(gt,D(arguments)),gt.push(";")),Tt},toString:function(){return N([0<ct.length?"var "+ct.join(",")+";":"",N(gt)])}})}function at(){function gt(Lt,Ct){Tt(Lt,Ct,"=",ct.def(Lt,Ct),";")}var ct=We(),Tt=We(),vt=ct.toString,kt=Tt.toString;return Y(function(){ct.apply(ct,D(arguments))},{def:ct.def,entry:ct,exit:Tt,save:gt,set:function(Lt,Ct,Dt){gt(Lt,Ct),ct(Lt,Ct,"=",Dt,";")},toString:function(){return vt()+kt()}})}var tt=Ne&&Ne.cache,Re=0,Fe=[],nt=[],Ge=[],ut=We(),pt={};return{global:ut,link:function(gt,ct){var Tt=ct&&ct.stable;if(!Tt){for(var vt=0;vt<nt.length;++vt)if(nt[vt]===gt&&!Ge[vt])return Fe[vt]}return vt="g"+Re++,Fe.push(vt),nt.push(gt),Ge.push(Tt),vt},block:We,proc:function(gt,ct){function Tt(){var Ct="a"+vt.length;return vt.push(Ct),Ct}var vt=[];ct=ct||0;for(var kt=0;kt<ct;++kt)Tt();var Lt=(kt=at()).toString;return pt[gt]=Y(kt,{arg:Tt,toString:function(){return N(["function(",vt.join(),"){",Lt(),"}"])}})},scope:at,cond:function(){var gt=N(arguments),ct=at(),Tt=at(),vt=ct.toString,kt=Tt.toString;return Y(ct,{then:function(){return ct.apply(ct,D(arguments)),this},else:function(){return Tt.apply(Tt,D(arguments)),this},toString:function(){var Lt=kt();return Lt&&(Lt="else{"+Lt+"}"),N(["if(",gt,"){",vt(),"}",Lt])}})},compile:function(){var gt=['"use strict";',ut,"return {"];Object.keys(pt).forEach(function(vt){gt.push('"',vt,'":',pt[vt].toString(),",")}),gt.push("}");var ct,Tt=N(gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return tt&&(ct=function(vt){for(var kt,Lt="",Ct=0;Ct<vt.length;Ct++)kt=vt.charCodeAt(Ct),Lt+="0123456789abcdef".charAt(kt>>>4&15)+"0123456789abcdef".charAt(15&kt);return Lt}(function(vt){for(var kt=Array(vt.length>>2),Lt=0;Lt<kt.length;Lt++)kt[Lt]=0;for(Lt=0;Lt<8*vt.length;Lt+=8)kt[Lt>>5]|=(255&vt.charCodeAt(Lt/8))<<24-Lt%32;var Ct,Dt,Gt,tn,jt,Wt,Ft,Ln,bn,hn,Kt,sn=8*vt.length;for(vt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Lt=Array(64),kt[sn>>5]|=128<<24-sn%32,kt[15+(sn+64>>9<<4)]=sn,Ln=0;Ln<kt.length;Ln+=16){for(sn=vt[0],Ct=vt[1],Dt=vt[2],Gt=vt[3],tn=vt[4],jt=vt[5],Wt=vt[6],Ft=vt[7],bn=0;64>bn;bn++){var Qt;16>bn?Lt[bn]=kt[bn+Ln]:(hn=bn,Kt=U(Kt=R(Kt=Lt[bn-2],17)^R(Kt,19)^Kt>>>10,Lt[bn-7]),Qt=R(Qt=Lt[bn-15],7)^R(Qt,18)^Qt>>>3,Lt[hn]=U(U(Kt,Qt),Lt[bn-16])),hn=U(U(U(U(Ft,hn=R(hn=tn,6)^R(hn,11)^R(hn,25)),tn&jt^~tn&Wt),Qe[bn]),Lt[bn]),Kt=U(Ft=R(Ft=sn,2)^R(Ft,13)^R(Ft,22),sn&Ct^sn&Dt^Ct&Dt),Ft=Wt,Wt=jt,jt=tn,tn=U(Gt,hn),Gt=Dt,Dt=Ct,Ct=sn,sn=U(hn,Kt)}vt[0]=U(sn,vt[0]),vt[1]=U(Ct,vt[1]),vt[2]=U(Dt,vt[2]),vt[3]=U(Gt,vt[3]),vt[4]=U(tn,vt[4]),vt[5]=U(jt,vt[5]),vt[6]=U(Wt,vt[6]),vt[7]=U(Ft,vt[7])}for(kt="",Lt=0;Lt<32*vt.length;Lt+=8)kt+=String.fromCharCode(vt[Lt>>5]>>>24-Lt%32&255);return kt}(function(vt){for(var kt,Lt,Ct="",Dt=-1;++Dt<vt.length;)kt=vt.charCodeAt(Dt),Lt=Dt+1<vt.length?vt.charCodeAt(Dt+1):0,55296<=kt&&56319>=kt&&56320<=Lt&&57343>=Lt&&(kt=65536+((1023&kt)<<10)+(1023&Lt),Dt++),127>=kt?Ct+=String.fromCharCode(kt):2047>=kt?Ct+=String.fromCharCode(192|kt>>>6&31,128|63&kt):65535>=kt?Ct+=String.fromCharCode(224|kt>>>12&15,128|kt>>>6&63,128|63&kt):2097151>=kt&&(Ct+=String.fromCharCode(240|kt>>>18&7,128|kt>>>12&63,128|kt>>>6&63,128|63&kt));return Ct}(Tt))),tt[ct])?tt[ct].apply(null,nt):(Tt=Function.apply(null,Fe.concat(Tt)),tt&&(tt[ct]=Tt),Tt.apply(null,nt))}}}function F(Ne){return Array.isArray(Ne)||de(Ne)||t(Ne)}function j(Ne){return Ne.sort(function(We,at){return We==="viewport"?-1:at==="viewport"?1:We<at?-1:1})}function q(Ne,We,at,tt){this.thisDep=Ne,this.contextDep=We,this.propDep=at,this.append=tt}function te(Ne){return Ne&&!(Ne.thisDep||Ne.contextDep||Ne.propDep)}function ee(Ne){return new q(!1,!1,!1,Ne)}function Q(Ne,We){var at=Ne.type;if(at===0)return new q(!0,1<=(at=Ne.data.length),2<=at,We);if(at===4)return new q((at=Ne.data).thisDep,at.contextDep,at.propDep,We);if(at===5)return new q(!1,!1,!1,We);if(at===6){for(var tt=at=!1,Re=!1,Fe=0;Fe<Ne.data.length;++Fe){var nt=Ne.data[Fe];nt.type===1?Re=!0:nt.type===2?tt=!0:nt.type===3?at=!0:nt.type===0?(at=!0,1<=(nt=nt.data)&&(tt=!0),2<=nt&&(Re=!0)):nt.type===4&&(at=at||nt.data.thisDep,tt=tt||nt.data.contextDep,Re=Re||nt.data.propDep)}return new q(at,tt,Re,We)}return new q(at===3,at===2,at===1,We)}function J(Ne,We,at,tt,Re,Fe,nt,Ge,ut,pt,gt,ct,Tt,vt,kt,Lt){function Ct(St){return St.replace(".","_")}function Dt(St,Rt,Xt){var ln=Ct(St);jn.push(St),Cn[ln]=pn[ln]=!!Xt,Bn[ln]=Rt}function Gt(St,Rt,Xt){var ln=Ct(St);jn.push(St),Array.isArray(Xt)?(pn[ln]=Xt.slice(),Cn[ln]=Xt.slice()):pn[ln]=Cn[ln]=Xt,Yn[ln]=Rt}function tn(){var St=W({cache:kt}),Rt=St.link,Xt=St.global;St.id=dn++,St.batchId="0";var ln=Rt(dr),un=St.shared={props:"a0"};Object.keys(dr).forEach(function($t){un[$t]=Xt.def(ln,".",$t)});var mn=St.next={},rn=St.current={};Object.keys(Yn).forEach(function($t){Array.isArray(pn[$t])&&(mn[$t]=Xt.def(un.next,".",$t),rn[$t]=Xt.def(un.current,".",$t))});var qt=St.constants={};Object.keys(Zt).forEach(function($t){qt[$t]=Xt.def(JSON.stringify(Zt[$t]))}),St.invoke=function($t,an){switch(an.type){case 0:var wn=["this",un.context,un.props,St.batchId];return $t.def(Rt(an.data),".call(",wn.slice(0,Math.max(an.data.length+1,4)),")");case 1:return $t.def(un.props,an.data);case 2:return $t.def(un.context,an.data);case 3:return $t.def("this",an.data);case 4:return an.data.append(St,$t),an.data.ref;case 5:return an.data.toString();case 6:return an.data.map(function(En){return St.invoke($t,En)})}},St.attribCache={};var Ht={};return St.scopeAttrib=function($t){if(($t=We.id($t))in Ht)return Ht[$t];var an=pt.scope[$t];return an||(an=pt.scope[$t]=new Wn),Ht[$t]=Rt(an)},St}function jt(St,Rt){var Xt=St.static,ln=St.dynamic;if("framebuffer"in Xt){var un=Xt.framebuffer;return un?(un=Ge.getFramebuffer(un),ee(function(rn,qt){var Ht=rn.link(un),$t=rn.shared;return qt.set($t.framebuffer,".next",Ht),$t=$t.context,qt.set($t,".framebufferWidth",Ht+".width"),qt.set($t,".framebufferHeight",Ht+".height"),Ht})):ee(function(rn,qt){var Ht=rn.shared;return qt.set(Ht.framebuffer,".next","null"),Ht=Ht.context,qt.set(Ht,".framebufferWidth",Ht+".drawingBufferWidth"),qt.set(Ht,".framebufferHeight",Ht+".drawingBufferHeight"),"null"})}if("framebuffer"in ln){var mn=ln.framebuffer;return Q(mn,function(rn,qt){var Ht=rn.invoke(qt,mn),$t=rn.shared,an=$t.framebuffer;return Ht=qt.def(an,".getFramebuffer(",Ht,")"),qt.set(an,".next",Ht),$t=$t.context,qt.set($t,".framebufferWidth",Ht+"?"+Ht+".width:"+$t+".drawingBufferWidth"),qt.set($t,".framebufferHeight",Ht+"?"+Ht+".height:"+$t+".drawingBufferHeight"),Ht})}return null}function Wt(St,Rt,Xt){function ln($t){if($t in un){var an=We.id(un[$t]);return($t=ee(function(){return an})).id=an,$t}if($t in mn){var wn=mn[$t];return Q(wn,function(En,On){var Fn=En.invoke(On,wn);return On.def(En.shared.strings,".id(",Fn,")")})}return null}var un=St.static,mn=St.dynamic,rn=ln("frag"),qt=ln("vert"),Ht=null;return te(rn)&&te(qt)?(Ht=gt.program(qt.id,rn.id,null,Xt),St=ee(function($t,an){return $t.link(Ht)})):St=new q(rn&&rn.thisDep||qt&&qt.thisDep,rn&&rn.contextDep||qt&&qt.contextDep,rn&&rn.propDep||qt&&qt.propDep,function($t,an){var wn,En,On=$t.shared.shader;return wn=rn?rn.append($t,an):an.def(On,".","frag"),En=qt?qt.append($t,an):an.def(On,".","vert"),an.def(On+".program("+En+","+wn+")")}),{frag:rn,vert:qt,progVar:St,program:Ht}}function Ft(St,Rt){function Xt(Fn,$n){if(Fn in ln){var Hn=0|ln[Fn];return $n?mn.offset=Hn:mn.instances=Hn,ee(function(tr,Jn){return $n&&(tr.OFFSET=Hn),Hn})}if(Fn in un){var Kn=un[Fn];return Q(Kn,function(tr,Jn){var hr=tr.invoke(Jn,Kn);return $n&&(tr.OFFSET=hr),hr})}if($n){if(Ht)return ee(function(tr,Jn){return tr.OFFSET=0});if(rn)return new q(qt.thisDep,qt.contextDep,qt.propDep,function(tr,Jn){return Jn.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.offset:0")})}else if(rn)return new q(qt.thisDep,qt.contextDep,qt.propDep,function(tr,Jn){return Jn.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.instances:-1")});return null}var ln=St.static,un=St.dynamic,mn={},rn=!1,qt=function(){if("vao"in ln){var Fn=ln.vao;return Fn!==null&&pt.getVAO(Fn)===null&&(Fn=pt.createVAO(Fn)),rn=!0,mn.vao=Fn,ee(function(Hn){var Kn=pt.getVAO(Fn);return Kn?Hn.link(Kn):"null"})}if("vao"in un){rn=!0;var $n=un.vao;return Q($n,function(Hn,Kn){var tr=Hn.invoke(Kn,$n);return Kn.def(Hn.shared.vao+".getVAO("+tr+")")})}return null}(),Ht=!1,$t=function(){if("elements"in ln){var Fn=ln.elements;if(mn.elements=Fn,F(Fn)){var $n=mn.elements=Fe.create(Fn,!0);Fn=Fe.getElements($n),Ht=!0}else Fn&&(Fn=Fe.getElements(Fn),Ht=!0);return $n=ee(function(Kn,tr){if(Fn){var Jn=Kn.link(Fn);return Kn.ELEMENTS=Jn}return Kn.ELEMENTS=null}),$n.value=Fn,$n}if("elements"in un){Ht=!0;var Hn=un.elements;return Q(Hn,function(Kn,tr){var Jn=(hr=Kn.shared).isBufferArgs,hr=hr.elements,br=Kn.invoke(tr,Hn),gr=tr.def("null");return Jn=tr.def(Jn,"(",br,")"),br=Kn.cond(Jn).then(gr,"=",hr,".createStream(",br,");").else(gr,"=",hr,".getElements(",br,");"),tr.entry(br),tr.exit(Kn.cond(Jn).then(hr,".destroyStream(",gr,");")),Kn.ELEMENTS=gr})}return rn?new q(qt.thisDep,qt.contextDep,qt.propDep,function(Kn,tr){return tr.def(Kn.shared.vao+".currentVAO?"+Kn.shared.elements+".getElements("+Kn.shared.vao+".currentVAO.elements):null")}):null}(),an=Xt("offset",!0),wn=function(){if("primitive"in ln){var Fn=ln.primitive;return mn.primitive=Fn,ee(function(Hn,Kn){return Se[Fn]})}if("primitive"in un){var $n=un.primitive;return Q($n,function(Hn,Kn){var tr=Hn.constants.primTypes,Jn=Hn.invoke(Kn,$n);return Kn.def(tr,"[",Jn,"]")})}return Ht?te($t)?$t.value?ee(function(Hn,Kn){return Kn.def(Hn.ELEMENTS,".primType")}):ee(function(){return 4}):new q($t.thisDep,$t.contextDep,$t.propDep,function(Hn,Kn){var tr=Hn.ELEMENTS;return Kn.def(tr,"?",tr,".primType:",4)}):rn?new q(qt.thisDep,qt.contextDep,qt.propDep,function(Hn,Kn){return Kn.def(Hn.shared.vao+".currentVAO?"+Hn.shared.vao+".currentVAO.primitive:4")}):null}(),En=function(){if("count"in ln){var Fn=0|ln.count;return mn.count=Fn,ee(function(){return Fn})}if("count"in un){var $n=un.count;return Q($n,function(Hn,Kn){return Hn.invoke(Kn,$n)})}return Ht?te($t)?$t?an?new q(an.thisDep,an.contextDep,an.propDep,function(Hn,Kn){return Kn.def(Hn.ELEMENTS,".vertCount-",Hn.OFFSET)}):ee(function(Hn,Kn){return Kn.def(Hn.ELEMENTS,".vertCount")}):ee(function(){return-1}):new q($t.thisDep||an.thisDep,$t.contextDep||an.contextDep,$t.propDep||an.propDep,function(Hn,Kn){var tr=Hn.ELEMENTS;return Hn.OFFSET?Kn.def(tr,"?",tr,".vertCount-",Hn.OFFSET,":-1"):Kn.def(tr,"?",tr,".vertCount:-1")}):rn?new q(qt.thisDep,qt.contextDep,qt.propDep,function(Hn,Kn){return Kn.def(Hn.shared.vao,".currentVAO?",Hn.shared.vao,".currentVAO.count:-1")}):null}(),On=Xt("instances",!1);return{elements:$t,primitive:wn,count:En,instances:On,offset:an,vao:qt,vaoActive:rn,elementsActive:Ht,static:mn}}function Ln(St,Rt){var Xt=St.static,ln=St.dynamic,un={};return Object.keys(Xt).forEach(function(mn){var rn=Xt[mn],qt=We.id(mn),Ht=new Wn;if(F(rn))Ht.state=1,Ht.buffer=Re.getBuffer(Re.create(rn,34962,!1,!0)),Ht.type=0;else if(an=Re.getBuffer(rn))Ht.state=1,Ht.buffer=an,Ht.type=0;else if("constant"in rn){var $t=rn.constant;Ht.buffer="null",Ht.state=2,typeof $t=="number"?Ht.x=$t:Je.forEach(function(Hn,Kn){Kn<$t.length&&(Ht[Hn]=$t[Kn])})}else{var an=F(rn.buffer)?Re.getBuffer(Re.create(rn.buffer,34962,!1,!0)):Re.getBuffer(rn.buffer),wn=0|rn.offset,En=0|rn.stride,On=0|rn.size,Fn=!!rn.normalized,$n=0;"type"in rn&&($n=Ee[rn.type]),rn=0|rn.divisor,Ht.buffer=an,Ht.state=1,Ht.size=On,Ht.normalized=Fn,Ht.type=$n||an.dtype,Ht.offset=wn,Ht.stride=En,Ht.divisor=rn}un[mn]=ee(function(Hn,Kn){var tr=Hn.attribCache;if(qt in tr)return tr[qt];var Jn={isStream:!1};return Object.keys(Ht).forEach(function(hr){Jn[hr]=Ht[hr]}),Ht.buffer&&(Jn.buffer=Hn.link(Ht.buffer),Jn.type=Jn.type||Jn.buffer+".dtype"),tr[qt]=Jn})}),Object.keys(ln).forEach(function(mn){var rn=ln[mn];un[mn]=Q(rn,function(qt,Ht){function $t(tr){Ht(Fn[tr],"=",an,".",tr,"|0;")}var an=qt.invoke(Ht,rn),wn=qt.shared,En=qt.constants,On=wn.isBufferArgs,Fn=(wn=wn.buffer,{isStream:Ht.def(!1)}),$n=new Wn;$n.state=1,Object.keys($n).forEach(function(tr){Fn[tr]=Ht.def(""+$n[tr])});var Hn=Fn.buffer,Kn=Fn.type;return Ht("if(",On,"(",an,")){",Fn.isStream,"=true;",Hn,"=",wn,".createStream(",34962,",",an,");",Kn,"=",Hn,".dtype;","}else{",Hn,"=",wn,".getBuffer(",an,");","if(",Hn,"){",Kn,"=",Hn,".dtype;",'}else if("constant" in ',an,"){",Fn.state,"=",2,";","if(typeof "+an+'.constant === "number"){',Fn[Je[0]],"=",an,".constant;",Je.slice(1).map(function(tr){return Fn[tr]}).join("="),"=0;","}else{",Je.map(function(tr,Jn){return Fn[tr]+"="+an+".constant.length>"+Jn+"?"+an+".constant["+Jn+"]:0;"}).join(""),"}}else{","if(",On,"(",an,".buffer)){",Hn,"=",wn,".createStream(",34962,",",an,".buffer);","}else{",Hn,"=",wn,".getBuffer(",an,".buffer);","}",Kn,'="type" in ',an,"?",En.glTypes,"[",an,".type]:",Hn,".dtype;",Fn.normalized,"=!!",an,".normalized;"),$t("size"),$t("offset"),$t("stride"),$t("divisor"),Ht("}}"),Ht.exit("if(",Fn.isStream,"){",wn,".destroyStream(",Hn,");","}"),Fn})}),un}function bn(St,Rt,Xt,ln,un){function mn($n){var Hn=qt[$n];Hn&&($t[$n]=Hn)}var rn=function($n,Hn){if(typeof(Kn=$n.static).frag=="string"&&typeof Kn.vert=="string"){if(0<Object.keys(Hn.dynamic).length)return null;var Kn=Hn.static,tr=Object.keys(Kn);if(0<tr.length&&typeof Kn[tr[0]]=="number"){for(var Jn=[],hr=0;hr<tr.length;++hr)Jn.push([0|Kn[tr[hr]],tr[hr]]);return Jn}}return null}(St,Rt),qt=function($n,Hn,Kn){function tr(gr){if(gr in Jn){var ar=Jn[gr];gr=!0;var mr,Mr,Dr=0|ar.x,fi=0|ar.y;return"width"in ar?mr=0|ar.width:gr=!1,"height"in ar?Mr=0|ar.height:gr=!1,new q(!gr&&Hn&&Hn.thisDep,!gr&&Hn&&Hn.contextDep,!gr&&Hn&&Hn.propDep,function(Ri,ci){var Ti=Ri.shared.context,fa=mr;"width"in ar||(fa=ci.def(Ti,".","framebufferWidth","-",Dr));var zr=Mr;return"height"in ar||(zr=ci.def(Ti,".","framebufferHeight","-",fi)),[Dr,fi,fa,zr]})}if(gr in hr){var hi=hr[gr];return gr=Q(hi,function(Ri,ci){var Ti=Ri.invoke(ci,hi),fa=Ri.shared.context,zr=ci.def(Ti,".x|0"),Ui=ci.def(Ti,".y|0");return[zr,Ui,ci.def('"width" in ',Ti,"?",Ti,".width|0:","(",fa,".","framebufferWidth","-",zr,")"),Ti=ci.def('"height" in ',Ti,"?",Ti,".height|0:","(",fa,".","framebufferHeight","-",Ui,")")]}),Hn&&(gr.thisDep=gr.thisDep||Hn.thisDep,gr.contextDep=gr.contextDep||Hn.contextDep,gr.propDep=gr.propDep||Hn.propDep),gr}return Hn?new q(Hn.thisDep,Hn.contextDep,Hn.propDep,function(Ri,ci){var Ti=Ri.shared.context;return[0,0,ci.def(Ti,".","framebufferWidth"),ci.def(Ti,".","framebufferHeight")]}):null}var Jn=$n.static,hr=$n.dynamic;if($n=tr("viewport")){var br=$n;$n=new q($n.thisDep,$n.contextDep,$n.propDep,function(gr,ar){var mr=br.append(gr,ar),Mr=gr.shared.context;return ar.set(Mr,".viewportWidth",mr[2]),ar.set(Mr,".viewportHeight",mr[3]),mr})}return{viewport:$n,scissor_box:tr("scissor.box")}}(St,wn=jt(St)),Ht=Ft(St),$t=function($n,Hn){var Kn=$n.static,tr=$n.dynamic,Jn={};return jn.forEach(function(hr){function br(ar,mr){if(hr in Kn){var Mr=ar(Kn[hr]);Jn[gr]=ee(function(){return Mr})}else if(hr in tr){var Dr=tr[hr];Jn[gr]=Q(Dr,function(fi,hi){return mr(fi,hi,fi.invoke(hi,Dr))})}}var gr=Ct(hr);switch(hr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return br(function(ar){return ar},function(ar,mr,Mr){return Mr});case"depth.func":return br(function(ar){return It[ar]},function(ar,mr,Mr){return mr.def(ar.constants.compareFuncs,"[",Mr,"]")});case"depth.range":return br(function(ar){return ar},function(ar,mr,Mr){return[mr.def("+",Mr,"[0]"),mr=mr.def("+",Mr,"[1]")]});case"blend.func":return br(function(ar){return[Pt["srcRGB"in ar?ar.srcRGB:ar.src],Pt["dstRGB"in ar?ar.dstRGB:ar.dst],Pt["srcAlpha"in ar?ar.srcAlpha:ar.src],Pt["dstAlpha"in ar?ar.dstAlpha:ar.dst]]},function(ar,mr,Mr){function Dr(ci,Ti){return mr.def('"',ci,Ti,'" in ',Mr,"?",Mr,".",ci,Ti,":",Mr,".",ci)}ar=ar.constants.blendFuncs;var fi=Dr("src","RGB"),hi=Dr("dst","RGB"),Ri=(fi=mr.def(ar,"[",fi,"]"),mr.def(ar,"[",Dr("src","Alpha"),"]"));return[fi,hi=mr.def(ar,"[",hi,"]"),Ri,ar=mr.def(ar,"[",Dr("dst","Alpha"),"]")]});case"blend.equation":return br(function(ar){return typeof ar=="string"?[fr[ar],fr[ar]]:typeof ar=="object"?[fr[ar.rgb],fr[ar.alpha]]:void 0},function(ar,mr,Mr){var Dr=ar.constants.blendEquations,fi=mr.def(),hi=mr.def();return(ar=ar.cond("typeof ",Mr,'==="string"')).then(fi,"=",hi,"=",Dr,"[",Mr,"];"),ar.else(fi,"=",Dr,"[",Mr,".rgb];",hi,"=",Dr,"[",Mr,".alpha];"),mr(ar),[fi,hi]});case"blend.color":return br(function(ar){return b(4,function(mr){return+ar[mr]})},function(ar,mr,Mr){return b(4,function(Dr){return mr.def("+",Mr,"[",Dr,"]")})});case"stencil.mask":return br(function(ar){return 0|ar},function(ar,mr,Mr){return mr.def(Mr,"|0")});case"stencil.func":return br(function(ar){return[It[ar.cmp||"keep"],ar.ref||0,"mask"in ar?ar.mask:-1]},function(ar,mr,Mr){return[ar=mr.def('"cmp" in ',Mr,"?",ar.constants.compareFuncs,"[",Mr,".cmp]",":",7680),mr.def(Mr,".ref|0"),mr=mr.def('"mask" in ',Mr,"?",Mr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return br(function(ar){return[hr==="stencil.opBack"?1029:1028,At[ar.fail||"keep"],At[ar.zfail||"keep"],At[ar.zpass||"keep"]]},function(ar,mr,Mr){function Dr(hi){return mr.def('"',hi,'" in ',Mr,"?",fi,"[",Mr,".",hi,"]:",7680)}var fi=ar.constants.stencilOps;return[hr==="stencil.opBack"?1029:1028,Dr("fail"),Dr("zfail"),Dr("zpass")]});case"polygonOffset.offset":return br(function(ar){return[0|ar.factor,0|ar.units]},function(ar,mr,Mr){return[mr.def(Mr,".factor|0"),mr=mr.def(Mr,".units|0")]});case"cull.face":return br(function(ar){var mr=0;return ar==="front"?mr=1028:ar==="back"&&(mr=1029),mr},function(ar,mr,Mr){return mr.def(Mr,'==="front"?',1028,":",1029)});case"frontFace":return br(function(ar){return qe[ar]},function(ar,mr,Mr){return mr.def(Mr+'==="cw"?2304:2305')});case"colorMask":return br(function(ar){return ar.map(function(mr){return!!mr})},function(ar,mr,Mr){return b(4,function(Dr){return"!!"+Mr+"["+Dr+"]"})});case"sample.coverage":return br(function(ar){return["value"in ar?ar.value:1,!!ar.invert]},function(ar,mr,Mr){return[mr.def('"value" in ',Mr,"?+",Mr,".value:1"),mr=mr.def("!!",Mr,".invert")]})}}),Jn}(St),an=Wt(St,0,rn);mn("viewport"),mn(Ct("scissor.box"));var wn,En=0<Object.keys($t).length;if((wn={framebuffer:wn,draw:Ht,shader:an,state:$t,dirty:En,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function($n){var Hn,Kn=$n.static;if($n=$n.dynamic,"profile"in Kn){var tr=!!Kn.profile;(Hn=ee(function(hr,br){return tr})).enable=tr}else if("profile"in $n){var Jn=$n.profile;Hn=Q(Jn,function(hr,br){return hr.invoke(br,Jn)})}return Hn}(St),wn.uniforms=function($n,Hn){var Kn=$n.static,tr=$n.dynamic,Jn={};return Object.keys(Kn).forEach(function(hr){var br,gr=Kn[hr];if(typeof gr=="number"||typeof gr=="boolean")br=ee(function(){return gr});else if(typeof gr=="function"){var ar=gr._reglType;ar==="texture2d"||ar==="textureCube"?br=ee(function(mr){return mr.link(gr)}):ar!=="framebuffer"&&ar!=="framebufferCube"||(br=ee(function(mr){return mr.link(gr.color[0])}))}else x(gr)&&(br=ee(function(mr){return mr.global.def("[",b(gr.length,function(Mr){return gr[Mr]}),"]")}));br.value=gr,Jn[hr]=br}),Object.keys(tr).forEach(function(hr){var br=tr[hr];Jn[hr]=Q(br,function(gr,ar){return gr.invoke(ar,br)})}),Jn}(Xt),wn.drawVAO=wn.scopeVAO=Ht.vao,!wn.drawVAO&&an.program&&!rn&&at.angle_instanced_arrays&&Ht.static.elements){var On=!0;if(St=an.program.attributes.map(function($n){return $n=Rt.static[$n],On=On&&!!$n,$n}),On&&0<St.length){var Fn=pt.getVAO(pt.createVAO({attributes:St,elements:Ht.static.elements}));wn.drawVAO=new q(null,null,null,function($n,Hn){return $n.link(Fn)}),wn.useVAO=!0}}return rn?wn.useVAO=!0:wn.attributes=Ln(Rt),wn.context=function($n){var Hn=$n.static,Kn=$n.dynamic,tr={};return Object.keys(Hn).forEach(function(Jn){var hr=Hn[Jn];tr[Jn]=ee(function(br,gr){return typeof hr=="number"||typeof hr=="boolean"?""+hr:br.link(hr)})}),Object.keys(Kn).forEach(function(Jn){var hr=Kn[Jn];tr[Jn]=Q(hr,function(br,gr){return br.invoke(gr,hr)})}),tr}(ln),wn}function hn(St,Rt,Xt){var ln=St.shared.context,un=St.scope();Object.keys(Xt).forEach(function(mn){Rt.save(ln,"."+mn);var rn=Xt[mn].append(St,Rt);Array.isArray(rn)?un(ln,".",mn,"=[",rn.join(),"];"):un(ln,".",mn,"=",rn,";")}),Rt(un)}function Kt(St,Rt,Xt,ln){var un,mn=(qt=St.shared).gl,rn=qt.framebuffer;en&&(un=Rt.def(qt.extensions,".webgl_draw_buffers"));var qt=(Ht=St.constants).drawBuffer,Ht=Ht.backBuffer;St=Xt?Xt.append(St,Rt):Rt.def(rn,".next"),ln||Rt("if(",St,"!==",rn,".cur){"),Rt("if(",St,"){",mn,".bindFramebuffer(",36160,",",St,".framebuffer);"),en&&Rt(un,".drawBuffersWEBGL(",qt,"[",St,".colorAttachments.length]);"),Rt("}else{",mn,".bindFramebuffer(",36160,",null);"),en&&Rt(un,".drawBuffersWEBGL(",Ht,");"),Rt("}",rn,".cur=",St,";"),ln||Rt("}")}function sn(St,Rt,Xt){var ln=St.shared,un=ln.gl,mn=St.current,rn=St.next,qt=ln.current,Ht=ln.next,$t=St.cond(qt,".dirty");jn.forEach(function(an){var wn,En;if(!((an=Ct(an))in Xt.state))if(an in rn){wn=rn[an],En=mn[an];var On=b(pn[an].length,function(Fn){return $t.def(wn,"[",Fn,"]")});$t(St.cond(On.map(function(Fn,$n){return Fn+"!=="+En+"["+$n+"]"}).join("||")).then(un,".",Yn[an],"(",On,");",On.map(function(Fn,$n){return En+"["+$n+"]="+Fn}).join(";"),";"))}else wn=$t.def(Ht,".",an),On=St.cond(wn,"!==",qt,".",an),$t(On),an in Bn?On(St.cond(wn).then(un,".enable(",Bn[an],");").else(un,".disable(",Bn[an],");"),qt,".",an,"=",wn,";"):On(un,".",Yn[an],"(",wn,");",qt,".",an,"=",wn,";")}),Object.keys(Xt.state).length===0&&$t(qt,".dirty=false;"),Rt($t)}function Qt(St,Rt,Xt,ln){var un,mn=St.shared,rn=St.current,qt=mn.current,Ht=mn.gl;j(Object.keys(Xt)).forEach(function($t){var an=Xt[$t];if(!ln||ln(an)){var wn=an.append(St,Rt);if(Bn[$t]){var En=Bn[$t];te(an)?(un=St.link(wn,{stable:!0}),Rt(St.cond(un).then(Ht,".enable(",En,");").else(Ht,".disable(",En,");")),Rt(qt,".",$t,"=",un,";")):(Rt(St.cond(wn).then(Ht,".enable(",En,");").else(Ht,".disable(",En,");")),Rt(qt,".",$t,"=",wn,";"))}else if(x(wn)){var On=rn[$t];Rt(Ht,".",Yn[$t],"(",wn,");",wn.map(function(Fn,$n){return On+"["+$n+"]="+Fn}).join(";"),";")}else te(an)?(un=St.link(wn,{stable:!0}),Rt(Ht,".",Yn[$t],"(",un,");",qt,".",$t,"=",un,";")):Rt(Ht,".",Yn[$t],"(",wn,");",qt,".",$t,"=",wn,";")}})}function cn(St,Rt){Jt&&(St.instancing=Rt.def(St.shared.extensions,".angle_instanced_arrays"))}function vn(St,Rt,Xt,ln,un){function mn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function rn($n){$n($t=Rt.def(),"=",mn(),";"),typeof un=="string"?$n(En,".count+=",un,";"):$n(En,".count++;"),vt&&(ln?$n(an=Rt.def(),"=",Fn,".getNumPendingQueries();"):$n(Fn,".beginQuery(",En,");"))}function qt($n){$n(En,".cpuTime+=",mn(),"-",$t,";"),vt&&(ln?$n(Fn,".pushScopeStats(",an,",",Fn,".getNumPendingQueries(),",En,");"):$n(Fn,".endQuery();"))}function Ht($n){var Hn=Rt.def(On,".profile");Rt(On,".profile=",$n,";"),Rt.exit(On,".profile=",Hn,";")}var $t,an,wn=St.shared,En=St.stats,On=wn.current,Fn=wn.timer;if(Xt=Xt.profile){if(te(Xt))return void(Xt.enable?(rn(Rt),qt(Rt.exit),Ht("true")):Ht("false"));Ht(Xt=Xt.append(St,Rt))}else Xt=Rt.def(On,".profile");rn(wn=St.block()),Rt("if(",Xt,"){",wn,"}"),qt(St=St.block()),Rt.exit("if(",Xt,"){",St,"}")}function xn(St,Rt,Xt,ln,un){function mn(qt,Ht,$t){function an(){Rt("if(!",Fn,".buffer){",En,".enableVertexAttribArray(",On,");}");var tr,Jn=$t.type;tr=$t.size?Rt.def($t.size,"||",Ht):Ht,Rt("if(",Fn,".type!==",Jn,"||",Fn,".size!==",tr,"||",Kn.map(function(hr){return Fn+"."+hr+"!=="+$t[hr]}).join("||"),"){",En,".bindBuffer(",34962,",",$n,".buffer);",En,".vertexAttribPointer(",[On,tr,Jn,$t.normalized,$t.stride,$t.offset],");",Fn,".type=",Jn,";",Fn,".size=",tr,";",Kn.map(function(hr){return Fn+"."+hr+"="+$t[hr]+";"}).join(""),"}"),Jt&&(Jn=$t.divisor,Rt("if(",Fn,".divisor!==",Jn,"){",St.instancing,".vertexAttribDivisorANGLE(",[On,Jn],");",Fn,".divisor=",Jn,";}"))}function wn(){Rt("if(",Fn,".buffer){",En,".disableVertexAttribArray(",On,");",Fn,".buffer=null;","}if(",Je.map(function(tr,Jn){return Fn+"."+tr+"!=="+Hn[Jn]}).join("||"),"){",En,".vertexAttrib4f(",On,",",Hn,");",Je.map(function(tr,Jn){return Fn+"."+tr+"="+Hn[Jn]+";"}).join(""),"}")}var En=rn.gl,On=Rt.def(qt,".location"),Fn=Rt.def(rn.attributes,"[",On,"]");qt=$t.state;var $n=$t.buffer,Hn=[$t.x,$t.y,$t.z,$t.w],Kn=["buffer","normalized","offset","stride"];qt===1?an():qt===2?wn():(Rt("if(",qt,"===",1,"){"),an(),Rt("}else{"),wn(),Rt("}"))}var rn=St.shared;ln.forEach(function(qt){var Ht,$t=qt.name,an=Xt.attributes[$t];if(an){if(!un(an))return;Ht=an.append(St,Rt)}else{if(!un(Ye))return;var wn=St.scopeAttrib($t);Ht={},Object.keys(new Wn).forEach(function(En){Ht[En]=Rt.def(wn,".",En)})}mn(St.link(qt),function(En){switch(En){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(qt.info.type),Ht)})}function An(St,Rt,Xt,ln,un,mn){for(var rn,qt=St.shared,Ht=qt.gl,$t=0;$t<ln.length;++$t){var an,wn=(Fn=ln[$t]).name,En=Fn.info.type,On=Xt.uniforms[wn],Fn=St.link(Fn)+".location";if(On){if(!un(On))continue;if(te(On)){if(wn=On.value,En===35678||En===35680)Rt(Ht,".uniform1i(",Fn,",",(En=St.link(wn._texture||wn.color[0]._texture))+".bind());"),Rt.exit(En,".unbind();");else if(En===35674||En===35675||En===35676)On=2,En===35675?On=3:En===35676&&(On=4),Rt(Ht,".uniformMatrix",On,"fv(",Fn,",false,",wn=St.global.def("new Float32Array(["+Array.prototype.slice.call(wn)+"])"),");");else{switch(En){case 5126:rn="1f";break;case 35664:rn="2f";break;case 35665:rn="3f";break;case 35666:rn="4f";break;case 35670:case 5124:rn="1i";break;case 35671:case 35667:rn="2i";break;case 35672:case 35668:rn="3i";break;case 35673:case 35669:rn="4i"}Rt(Ht,".uniform",rn,"(",Fn,",",x(wn)?Array.prototype.slice.call(wn):wn,");")}continue}an=On.append(St,Rt)}else{if(!un(Ye))continue;an=Rt.def(qt.uniforms,"[",We.id(wn),"]")}switch(En===35678?Rt("if(",an,"&&",an,'._reglType==="framebuffer"){',an,"=",an,".color[0];","}"):En===35680&&Rt("if(",an,"&&",an,'._reglType==="framebufferCube"){',an,"=",an,".color[0];","}"),wn=1,En){case 35678:case 35680:En=Rt.def(an,"._texture"),Rt(Ht,".uniform1i(",Fn,",",En,".bind());"),Rt.exit(En,".unbind();");continue;case 5124:case 35670:rn="1i";break;case 35667:case 35671:rn="2i",wn=2;break;case 35668:case 35672:rn="3i",wn=3;break;case 35669:case 35673:rn="4i",wn=4;break;case 5126:rn="1f";break;case 35664:rn="2f",wn=2;break;case 35665:rn="3f",wn=3;break;case 35666:rn="4f",wn=4;break;case 35674:rn="Matrix2fv";break;case 35675:rn="Matrix3fv";break;case 35676:rn="Matrix4fv"}if(rn.charAt(0)==="M"){Rt(Ht,".uniform",rn,"(",Fn,","),Fn=Math.pow(En-35674+2,2);var $n=St.global.def("new Float32Array(",Fn,")");Array.isArray(an)?Rt("false,(",b(Fn,function(Kn){return $n+"["+Kn+"]="+an[Kn]}),",",$n,")"):Rt("false,(Array.isArray(",an,")||",an," instanceof Float32Array)?",an,":(",b(Fn,function(Kn){return $n+"["+Kn+"]="+an+"["+Kn+"]"}),",",$n,")"),Rt(");")}else{if(1<wn){En=[];var Hn=[];for(On=0;On<wn;++On)Array.isArray(an)?Hn.push(an[On]):Hn.push(Rt.def(an+"["+On+"]")),mn&&En.push(Rt.def());mn&&Rt("if(!",St.batchId,"||",En.map(function(Kn,tr){return Kn+"!=="+Hn[tr]}).join("||"),"){",En.map(function(Kn,tr){return Kn+"="+Hn[tr]+";"}).join("")),Rt(Ht,".uniform",rn,"(",Fn,",",Hn.join(","),");")}else mn&&(En=Rt.def(),Rt("if(!",St.batchId,"||",En,"!==",an,"){",En,"=",an,";")),Rt(Ht,".uniform",rn,"(",Fn,",",an,");");mn&&Rt("}")}}}function Sn(St,Rt,Xt,ln){function un(Jn){var hr=En[Jn];return hr?hr.contextDep&&ln.contextDynamic||hr.propDep?hr.append(St,Xt):hr.append(St,Rt):Rt.def(wn,".",Jn)}function mn(){function Jn(){Xt(Ht,".drawElementsInstancedANGLE(",[Fn,Hn,Kn,$n+"<<(("+Kn+"-5121)>>1)",qt],");")}function hr(){Xt(Ht,".drawArraysInstancedANGLE(",[Fn,$n,Hn,qt],");")}On&&On!=="null"?tr?Jn():(Xt("if(",On,"){"),Jn(),Xt("}else{"),hr(),Xt("}")):hr()}function rn(){function Jn(){Xt(an+".drawElements("+[Fn,Hn,Kn,$n+"<<(("+Kn+"-5121)>>1)"]+");")}function hr(){Xt(an+".drawArrays("+[Fn,$n,Hn]+");")}On&&On!=="null"?tr?Jn():(Xt("if(",On,"){"),Jn(),Xt("}else{"),hr(),Xt("}")):hr()}var qt,Ht,$t=St.shared,an=$t.gl,wn=$t.draw,En=ln.draw,On=function(){var Jn=En.elements,hr=Rt;return Jn?((Jn.contextDep&&ln.contextDynamic||Jn.propDep)&&(hr=Xt),Jn=Jn.append(St,hr),En.elementsActive&&hr("if("+Jn+")"+an+".bindBuffer(34963,"+Jn+".buffer.buffer);")):(Jn=hr.def(),hr(Jn,"=",wn,".","elements",";","if(",Jn,"){",an,".bindBuffer(",34963,",",Jn,".buffer.buffer);}","else if(",$t.vao,".currentVAO){",Jn,"=",St.shared.elements+".getElements("+$t.vao,".currentVAO.elements);",Mn?"":"if("+Jn+")"+an+".bindBuffer(34963,"+Jn+".buffer.buffer);","}")),Jn}(),Fn=un("primitive"),$n=un("offset"),Hn=function(){var Jn=En.count,hr=Rt;return Jn?((Jn.contextDep&&ln.contextDynamic||Jn.propDep)&&(hr=Xt),Jn=Jn.append(St,hr)):Jn=hr.def(wn,".","count"),Jn}();if(typeof Hn=="number"){if(Hn===0)return}else Xt("if(",Hn,"){"),Xt.exit("}");Jt&&(qt=un("instances"),Ht=St.instancing);var Kn=On+".type",tr=En.elements&&te(En.elements)&&!En.vaoActive;Jt&&(typeof qt!="number"||0<=qt)?typeof qt=="string"?(Xt("if(",qt,">0){"),mn(),Xt("}else if(",qt,"<0){"),rn(),Xt("}")):mn():rn()}function Tn(St,Rt,Xt,ln,un){return un=(Rt=tn()).proc("body",un),Jt&&(Rt.instancing=un.def(Rt.shared.extensions,".angle_instanced_arrays")),St(Rt,un,Xt,ln),Rt.compile().body}function Rn(St,Rt,Xt,ln){cn(St,Rt),Xt.useVAO?Xt.drawVAO?Rt(St.shared.vao,".setVAO(",Xt.drawVAO.append(St,Rt),");"):Rt(St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"):(Rt(St.shared.vao,".setVAO(null);"),xn(St,Rt,Xt,ln.attributes,function(){return!0})),An(St,Rt,Xt,ln.uniforms,function(){return!0},!1),Sn(St,Rt,Rt,Xt)}function In(St,Rt,Xt,ln){function un(){return!0}St.batchId="a1",cn(St,Rt),xn(St,Rt,Xt,ln.attributes,un),An(St,Rt,Xt,ln.uniforms,un,!1),Sn(St,Rt,Rt,Xt)}function Xn(St,Rt,Xt,ln){function un(wn){return wn.contextDep&&rn||wn.propDep}function mn(wn){return!un(wn)}cn(St,Rt);var rn=Xt.contextDep,qt=Rt.def(),Ht=Rt.def();St.shared.props=Ht,St.batchId=qt;var $t=St.scope(),an=St.scope();Rt($t.entry,"for(",qt,"=0;",qt,"<","a1",";++",qt,"){",Ht,"=","a0","[",qt,"];",an,"}",$t.exit),Xt.needsContext&&hn(St,an,Xt.context),Xt.needsFramebuffer&&Kt(St,an,Xt.framebuffer),Qt(St,an,Xt.state,un),Xt.profile&&un(Xt.profile)&&vn(St,an,Xt,!1,!0),ln?(Xt.useVAO?Xt.drawVAO?un(Xt.drawVAO)?an(St.shared.vao,".setVAO(",Xt.drawVAO.append(St,an),");"):$t(St.shared.vao,".setVAO(",Xt.drawVAO.append(St,$t),");"):$t(St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"):($t(St.shared.vao,".setVAO(null);"),xn(St,$t,Xt,ln.attributes,mn),xn(St,an,Xt,ln.attributes,un)),An(St,$t,Xt,ln.uniforms,mn,!1),An(St,an,Xt,ln.uniforms,un,!0),Sn(St,$t,an,Xt)):(Rt=St.global.def("{}"),ln=Xt.shader.progVar.append(St,an),Ht=an.def(ln,".id"),$t=an.def(Rt,"[",Ht,"]"),an(St.shared.gl,".useProgram(",ln,".program);","if(!",$t,"){",$t,"=",Rt,"[",Ht,"]=",St.link(function(wn){return Tn(In,St,Xt,wn,2)}),"(",ln,");}",$t,".call(this,a0[",qt,"],",qt,");"))}function Vn(St,Rt){function Xt(qt){var Ht=Rt.shader[qt];Ht&&(Ht=Ht.append(St,ln),isNaN(Ht)?ln.set(un.shader,"."+qt,Ht):ln.set(un.shader,"."+qt,St.link(Ht,{stable:!0})))}var ln=St.proc("scope",3);St.batchId="a2";var un=St.shared,mn=un.current;if(hn(St,ln,Rt.context),Rt.framebuffer&&Rt.framebuffer.append(St,ln),j(Object.keys(Rt.state)).forEach(function(qt){var Ht=Rt.state[qt],$t=Ht.append(St,ln);x($t)?$t.forEach(function(an,wn){isNaN(an)?ln.set(St.next[qt],"["+wn+"]",an):ln.set(St.next[qt],"["+wn+"]",St.link(an,{stable:!0}))}):te(Ht)?ln.set(un.next,"."+qt,St.link($t,{stable:!0})):ln.set(un.next,"."+qt,$t)}),vn(St,ln,Rt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(qt){var Ht=Rt.draw[qt];Ht&&(Ht=Ht.append(St,ln),isNaN(Ht)?ln.set(un.draw,"."+qt,Ht):ln.set(un.draw,"."+qt,St.link(Ht),{stable:!0}))}),Object.keys(Rt.uniforms).forEach(function(qt){var Ht=Rt.uniforms[qt].append(St,ln);Array.isArray(Ht)&&(Ht="["+Ht.map(function($t){return isNaN($t)?$t:St.link($t,{stable:!0})})+"]"),ln.set(un.uniforms,"["+St.link(We.id(qt),{stable:!0})+"]",Ht)}),Object.keys(Rt.attributes).forEach(function(qt){var Ht=Rt.attributes[qt].append(St,ln),$t=St.scopeAttrib(qt);Object.keys(new Wn).forEach(function(an){ln.set($t,"."+an,Ht[an])})}),Rt.scopeVAO){var rn=Rt.scopeVAO.append(St,ln);isNaN(rn)?ln.set(un.vao,".targetVAO",rn):ln.set(un.vao,".targetVAO",St.link(rn,{stable:!0}))}Xt("vert"),Xt("frag"),0<Object.keys(Rt.state).length&&(ln(mn,".dirty=true;"),ln.exit(mn,".dirty=true;")),ln("a1(",St.shared.context,",a0,",St.batchId,");")}function er(St,Rt,Xt){var ln=Rt.static[Xt];if(ln&&function(an){if(typeof an=="object"&&!x(an)){for(var wn=Object.keys(an),En=0;En<wn.length;++En)if(se.isDynamic(an[wn[En]]))return!0;return!1}}(ln)){var un=St.global,mn=Object.keys(ln),rn=!1,qt=!1,Ht=!1,$t=St.global.def("{}");mn.forEach(function(an){var wn=ln[an];if(se.isDynamic(wn))typeof wn=="function"&&(wn=ln[an]=se.unbox(wn)),an=Q(wn,null),rn=rn||an.thisDep,Ht=Ht||an.propDep,qt=qt||an.contextDep;else{switch(un($t,".",an,"="),typeof wn){case"number":un(wn);break;case"string":un('"',wn,'"');break;case"object":Array.isArray(wn)&&un("[",wn.join(),"]");break;default:un(St.link(wn))}un(";")}}),Rt.dynamic[Xt]=new se.DynamicVariable(4,{thisDep:rn,contextDep:qt,propDep:Ht,ref:$t,append:function(an,wn){mn.forEach(function(En){var On=ln[En];se.isDynamic(On)&&(On=an.invoke(wn,On),wn($t,".",En,"=",On,";"))})}}),delete Rt.static[Xt]}}var Wn=pt.Record,fr={add:32774,subtract:32778,"reverse subtract":32779};at.ext_blend_minmax&&(fr.min=32775,fr.max=32776);var Jt=at.angle_instanced_arrays,en=at.webgl_draw_buffers,Mn=at.oes_vertex_array_object,pn={dirty:!0,profile:Lt.profile},Cn={},jn=[],Bn={},Yn={};Dt("dither",3024),Dt("blend.enable",3042),Gt("blend.color","blendColor",[0,0,0,0]),Gt("blend.equation","blendEquationSeparate",[32774,32774]),Gt("blend.func","blendFuncSeparate",[1,0,1,0]),Dt("depth.enable",2929,!0),Gt("depth.func","depthFunc",513),Gt("depth.range","depthRange",[0,1]),Gt("depth.mask","depthMask",!0),Gt("colorMask","colorMask",[!0,!0,!0,!0]),Dt("cull.enable",2884),Gt("cull.face","cullFace",1029),Gt("frontFace","frontFace",2305),Gt("lineWidth","lineWidth",1),Dt("polygonOffset.enable",32823),Gt("polygonOffset.offset","polygonOffset",[0,0]),Dt("sample.alpha",32926),Dt("sample.enable",32928),Gt("sample.coverage","sampleCoverage",[1,!1]),Dt("stencil.enable",2960),Gt("stencil.mask","stencilMask",-1),Gt("stencil.func","stencilFunc",[519,0,-1]),Gt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Gt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Dt("scissor.enable",3089),Gt("scissor.box","scissor",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]),Gt("viewport","viewport",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]);var dr={gl:Ne,context:Tt,strings:We,next:Cn,current:pn,draw:ct,elements:Fe,buffer:Re,shader:gt,attributes:pt.state,vao:pt,uniforms:ut,framebuffer:Ge,extensions:at,timer:vt,isBufferArgs:F},Zt={primTypes:Se,compareFuncs:It,blendFuncs:Pt,blendEquations:fr,stencilOps:At,glTypes:Ee,orientationType:qe};en&&(Zt.backBuffer=[1029],Zt.drawBuffer=b(tt.maxDrawbuffers,function(St){return St===0?[0]:b(St,function(Rt){return 36064+Rt})}));var dn=0;return{next:Cn,current:pn,procs:function(){var St=tn(),Rt=St.proc("poll"),Xt=St.proc("refresh"),ln=St.block();Rt(ln),Xt(ln);var un,mn=(Ht=St.shared).gl,rn=Ht.next,qt=Ht.current;ln(qt,".dirty=false;"),Kt(St,Rt),Kt(St,Xt,null,!0),Jt&&(un=St.link(Jt)),at.oes_vertex_array_object&&Xt(St.link(at.oes_vertex_array_object),".bindVertexArrayOES(null);");var Ht=Xt.def(Ht.attributes),$t=Xt.def(0),an=St.cond($t,".buffer");an.then(mn,".enableVertexAttribArray(i);",mn,".bindBuffer(",34962,",",$t,".buffer.buffer);",mn,".vertexAttribPointer(i,",$t,".size,",$t,".type,",$t,".normalized,",$t,".stride,",$t,".offset);").else(mn,".disableVertexAttribArray(i);",mn,".vertexAttrib4f(i,",$t,".x,",$t,".y,",$t,".z,",$t,".w);",$t,".buffer=null;");var wn=St.link(tt.maxAttributes,{stable:!0});return Xt("for(var i=0;i<",wn,";++i){",$t,"=",Ht,"[i];",an,"}"),Jt&&Xt("for(var i=0;i<",wn,";++i){",un,".vertexAttribDivisorANGLE(i,",Ht,"[i].divisor);","}"),Xt(St.shared.vao,".currentVAO=null;",St.shared.vao,".setVAO(",St.shared.vao,".targetVAO);"),Object.keys(Bn).forEach(function(En){var On=Bn[En],Fn=ln.def(rn,".",En),$n=St.block();$n("if(",Fn,"){",mn,".enable(",On,")}else{",mn,".disable(",On,")}",qt,".",En,"=",Fn,";"),Xt($n),Rt("if(",Fn,"!==",qt,".",En,"){",$n,"}")}),Object.keys(Yn).forEach(function(En){var On,Fn,$n=Yn[En],Hn=pn[En],Kn=St.block();Kn(mn,".",$n,"("),x(Hn)?($n=Hn.length,On=St.global.def(rn,".",En),Fn=St.global.def(qt,".",En),Kn(b($n,function(tr){return On+"["+tr+"]"}),");",b($n,function(tr){return Fn+"["+tr+"]="+On+"["+tr+"];"}).join("")),Rt("if(",b($n,function(tr){return On+"["+tr+"]!=="+Fn+"["+tr+"]"}).join("||"),"){",Kn,"}")):(On=ln.def(rn,".",En),Fn=ln.def(qt,".",En),Kn(On,");",qt,".",En,"=",On,";"),Rt("if(",On,"!==",Fn,"){",Kn,"}")),Xt(Kn)}),St.compile()}(),compile:function(St,Rt,Xt,ln,un){var mn=tn();mn.stats=mn.link(un),Object.keys(Rt.static).forEach(function(qt){er(mn,Rt,qt)}),wt.forEach(function(qt){er(mn,St,qt)});var rn=bn(St,Rt,Xt,ln);return rn.shader.program&&(rn.shader.program.attributes.sort(function(qt,Ht){return qt.name<Ht.name?-1:1}),rn.shader.program.uniforms.sort(function(qt,Ht){return qt.name<Ht.name?-1:1})),function(qt,Ht){var $t=qt.proc("draw",1);cn(qt,$t),hn(qt,$t,Ht.context),Kt(qt,$t,Ht.framebuffer),sn(qt,$t,Ht),Qt(qt,$t,Ht.state),vn(qt,$t,Ht,!1,!0);var an=Ht.shader.progVar.append(qt,$t);if($t(qt.shared.gl,".useProgram(",an,".program);"),Ht.shader.program)Rn(qt,$t,Ht,Ht.shader.program);else{$t(qt.shared.vao,".setVAO(null);");var wn=qt.global.def("{}"),En=$t.def(an,".id"),On=$t.def(wn,"[",En,"]");$t(qt.cond(On).then(On,".call(this,a0);").else(On,"=",wn,"[",En,"]=",qt.link(function(Fn){return Tn(Rn,qt,Ht,Fn,1)}),"(",an,");",On,".call(this,a0);"))}0<Object.keys(Ht.state).length&&$t(qt.shared.current,".dirty=true;"),qt.shared.vao&&$t(qt.shared.vao,".setVAO(null);")}(mn,rn),Vn(mn,rn),function(qt,Ht){function $t(Hn){return Hn.contextDep&&wn||Hn.propDep}var an=qt.proc("batch",2);qt.batchId="0",cn(qt,an);var wn=!1,En=!0;Object.keys(Ht.context).forEach(function(Hn){wn=wn||Ht.context[Hn].propDep}),wn||(hn(qt,an,Ht.context),En=!1);var On=!1;if((Fn=Ht.framebuffer)?(Fn.propDep?wn=On=!0:Fn.contextDep&&wn&&(On=!0),On||Kt(qt,an,Fn)):Kt(qt,an,null),Ht.state.viewport&&Ht.state.viewport.propDep&&(wn=!0),sn(qt,an,Ht),Qt(qt,an,Ht.state,function(Hn){return!$t(Hn)}),Ht.profile&&$t(Ht.profile)||vn(qt,an,Ht,!1,"a1"),Ht.contextDep=wn,Ht.needsContext=En,Ht.needsFramebuffer=On,(En=Ht.shader.progVar).contextDep&&wn||En.propDep)Xn(qt,an,Ht,null);else if(En=En.append(qt,an),an(qt.shared.gl,".useProgram(",En,".program);"),Ht.shader.program)Xn(qt,an,Ht,Ht.shader.program);else{an(qt.shared.vao,".setVAO(null);");var Fn=qt.global.def("{}"),$n=(On=an.def(En,".id"),an.def(Fn,"[",On,"]"));an(qt.cond($n).then($n,".call(this,a0,a1);").else($n,"=",Fn,"[",On,"]=",qt.link(function(Hn){return Tn(Xn,qt,Ht,Hn,2)}),"(",En,");",$n,".call(this,a0,a1);"))}0<Object.keys(Ht.state).length&&an(qt.shared.current,".dirty=true;"),qt.shared.vao&&an(qt.shared.vao,".setVAO(null);")}(mn,rn),Y(mn.compile(),{destroy:function(){rn.shader.program.destroy()}})}}}function K(Ne,We){for(var at=0;at<Ne.length;++at)if(Ne[at]===We)return at;return-1}var Y=function(Ne,We){for(var at=Object.keys(We),tt=0;tt<at.length;++tt)Ne[at[tt]]=We[at[tt]];return Ne},ie=0,se={DynamicVariable:I,define:function(Ne,We){return new I(Ne,A(We+""))},isDynamic:function(Ne){return typeof Ne=="function"&&!Ne._reglType||Ne instanceof I},unbox:function Ne(We,at){return typeof We=="function"?new I(0,We):typeof We=="number"||typeof We=="boolean"?new I(5,We):Array.isArray(We)?new I(6,We.map(function(tt,Re){return Ne(tt,at+"["+Re+"]")})):We instanceof I?We:void 0},accessor:A},ae={next:typeof requestAnimationFrame=="function"?function(Ne){return requestAnimationFrame(Ne)}:function(Ne){return setTimeout(Ne,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ne){return cancelAnimationFrame(Ne)}:clearTimeout},ue=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ve=s();ve.zero=s();var ye=function(Ne,We){var at=1;We.ext_texture_filter_anisotropic&&(at=Ne.getParameter(34047));var tt=1,Re=1;We.webgl_draw_buffers&&(tt=Ne.getParameter(34852),Re=Ne.getParameter(36063));var Fe=!!We.oes_texture_float;if(Fe){Fe=Ne.createTexture(),Ne.bindTexture(3553,Fe),Ne.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var nt=Ne.createFramebuffer();if(Ne.bindFramebuffer(36160,nt),Ne.framebufferTexture2D(36160,36064,3553,Fe,0),Ne.bindTexture(3553,null),Ne.checkFramebufferStatus(36160)!==36053)Fe=!1;else{Ne.viewport(0,0,1,1),Ne.clearColor(1,0,0,1),Ne.clear(16384);var Ge=ve.allocType(5126,4);Ne.readPixels(0,0,1,1,6408,5126,Ge),Ne.getError()?Fe=!1:(Ne.deleteFramebuffer(nt),Ne.deleteTexture(Fe),Fe=Ge[0]===1),ve.freeType(Ge)}}return Ge=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Ge=Ne.createTexture(),nt=ve.allocType(5121,36),Ne.activeTexture(33984),Ne.bindTexture(34067,Ge),Ne.texImage2D(34069,0,6408,3,3,0,6408,5121,nt),ve.freeType(nt),Ne.bindTexture(34067,null),Ne.deleteTexture(Ge),Ge=!Ne.getError()),{colorBits:[Ne.getParameter(3410),Ne.getParameter(3411),Ne.getParameter(3412),Ne.getParameter(3413)],depthBits:Ne.getParameter(3414),stencilBits:Ne.getParameter(3415),subpixelBits:Ne.getParameter(3408),extensions:Object.keys(We).filter(function(ut){return!!We[ut]}),maxAnisotropic:at,maxDrawbuffers:tt,maxColorAttachments:Re,pointSizeDims:Ne.getParameter(33901),lineWidthDims:Ne.getParameter(33902),maxViewportDims:Ne.getParameter(3386),maxCombinedTextureUnits:Ne.getParameter(35661),maxCubeMapSize:Ne.getParameter(34076),maxRenderbufferSize:Ne.getParameter(34024),maxTextureUnits:Ne.getParameter(34930),maxTextureSize:Ne.getParameter(3379),maxAttributes:Ne.getParameter(34921),maxVertexUniforms:Ne.getParameter(36347),maxVertexTextureUnits:Ne.getParameter(35660),maxVaryingVectors:Ne.getParameter(36348),maxFragmentUniforms:Ne.getParameter(36349),glsl:Ne.getParameter(35724),renderer:Ne.getParameter(7937),vendor:Ne.getParameter(7936),version:Ne.getParameter(7938),readFloat:Fe,npotTextureCube:Ge}},de=function(Ne){return Ne instanceof Uint8Array||Ne instanceof Uint16Array||Ne instanceof Uint32Array||Ne instanceof Int8Array||Ne instanceof Int16Array||Ne instanceof Int32Array||Ne instanceof Float32Array||Ne instanceof Float64Array||Ne instanceof Uint8ClampedArray},pe=function(Ne){return Object.keys(Ne).map(function(We){return Ne[We]})},ge={shape:function(Ne){for(var We=[];Ne.length;Ne=Ne[0])We.push(Ne.length);return We},flatten:function(Ne,We,at,tt){var Re=1;if(We.length)for(var Fe=0;Fe<We.length;++Fe)Re*=We[Fe];else Re=0;switch(at=tt||ve.allocType(at,Re),We.length){case 0:break;case 1:for(tt=We[0],We=0;We<tt;++We)at[We]=Ne[We];break;case 2:for(tt=We[0],We=We[1],Fe=Re=0;Fe<tt;++Fe)for(var nt=Ne[Fe],Ge=0;Ge<We;++Ge)at[Re++]=nt[Ge];break;case 3:i(Ne,We[0],We[1],We[2],at,0);break;default:n(Ne,We,0,at,0)}return at}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},me={dynamic:35048,stream:35040,static:35044},oe=ge.flatten,re=ge.shape,fe=[];fe[5120]=1,fe[5122]=2,fe[5124]=4,fe[5121]=1,fe[5123]=2,fe[5125]=4,fe[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},be=new Float32Array(1),we=new Uint32Array(be.buffer),Me=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Oe={};Oe[6409]=Oe[6406]=Oe[6402]=1,Oe[34041]=Oe[6410]=2,Oe[6407]=Oe[35904]=3,Oe[6408]=Oe[35906]=4;var he=d("HTMLCanvasElement"),_e=d("OffscreenCanvas"),Ae=d("CanvasRenderingContext2D"),De=d("ImageBitmap"),Le=d("HTMLImageElement"),Be=d("HTMLVideoElement"),Ve=Object.keys(ke).concat([he,_e,Ae,De,Le,Be]),Ze=[];Ze[5121]=1,Ze[5126]=4,Ze[36193]=2,Ze[5123]=2,Ze[5125]=4;var rt=[];rt[32854]=2,rt[32855]=2,rt[36194]=2,rt[34041]=4,rt[33776]=.5,rt[33777]=.5,rt[33778]=1,rt[33779]=1,rt[35986]=.5,rt[35987]=1,rt[34798]=1,rt[35840]=.5,rt[35841]=.25,rt[35842]=.5,rt[35843]=.25,rt[36196]=.5;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[33189]=2,it[36168]=1,it[34041]=4,it[35907]=4,it[34836]=16,it[34842]=8,it[34843]=6;var dt=function(Ne,We,at,tt,Re){function Fe(ct){this.id=pt++,this.refCount=1,this.renderbuffer=ct,this.format=32854,this.height=this.width=0,Re.profile&&(this.stats={size:0})}function nt(ct){var Tt=ct.renderbuffer;Ne.bindRenderbuffer(36161,null),Ne.deleteRenderbuffer(Tt),ct.renderbuffer=null,ct.refCount=0,delete gt[ct.id],tt.renderbufferCount--}var Ge={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};We.ext_srgb&&(Ge.srgba=35907),We.ext_color_buffer_half_float&&(Ge.rgba16f=34842,Ge.rgb16f=34843),We.webgl_color_buffer_float&&(Ge.rgba32f=34836);var ut=[];Object.keys(Ge).forEach(function(ct){ut[Ge[ct]]=ct});var pt=0,gt={};return Fe.prototype.decRef=function(){0>=--this.refCount&&nt(this)},Re.profile&&(tt.getTotalRenderbufferSize=function(){var ct=0;return Object.keys(gt).forEach(function(Tt){ct+=gt[Tt].stats.size}),ct}),{create:function(ct,Tt){function vt(Lt,Ct){var Dt=0,Gt=0,tn=32854;if(typeof Lt=="object"&&Lt?("shape"in Lt?(Dt=0|(Gt=Lt.shape)[0],Gt=0|Gt[1]):("radius"in Lt&&(Dt=Gt=0|Lt.radius),"width"in Lt&&(Dt=0|Lt.width),"height"in Lt&&(Gt=0|Lt.height)),"format"in Lt&&(tn=Ge[Lt.format])):typeof Lt=="number"?(Dt=0|Lt,Gt=typeof Ct=="number"?0|Ct:Dt):Lt||(Dt=Gt=1),Dt!==kt.width||Gt!==kt.height||tn!==kt.format)return vt.width=kt.width=Dt,vt.height=kt.height=Gt,kt.format=tn,Ne.bindRenderbuffer(36161,kt.renderbuffer),Ne.renderbufferStorage(36161,tn,Dt,Gt),Re.profile&&(kt.stats.size=it[kt.format]*kt.width*kt.height),vt.format=ut[kt.format],vt}var kt=new Fe(Ne.createRenderbuffer());return gt[kt.id]=kt,tt.renderbufferCount++,vt(ct,Tt),vt.resize=function(Lt,Ct){var Dt=0|Lt,Gt=0|Ct||Dt;return Dt===kt.width&&Gt===kt.height||(vt.width=kt.width=Dt,vt.height=kt.height=Gt,Ne.bindRenderbuffer(36161,kt.renderbuffer),Ne.renderbufferStorage(36161,kt.format,Dt,Gt),Re.profile&&(kt.stats.size=it[kt.format]*kt.width*kt.height)),vt},vt._reglType="renderbuffer",vt._renderbuffer=kt,Re.profile&&(vt.stats=kt.stats),vt.destroy=function(){kt.decRef()},vt},clear:function(){pe(gt).forEach(nt)},restore:function(){pe(gt).forEach(function(ct){ct.renderbuffer=Ne.createRenderbuffer(),Ne.bindRenderbuffer(36161,ct.renderbuffer),Ne.renderbufferStorage(36161,ct.format,ct.width,ct.height)}),Ne.bindRenderbuffer(36161,null)}}},mt=[];mt[6408]=4,mt[6407]=3;var ht=[];ht[5121]=1,ht[5126]=4,ht[36193]=2;var Qe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Je=["x","y","z","w"],wt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Pt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},It={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},At={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},qe={cw:2304,ccw:2305},Ye=new q(!1,!1,!1,function(){});return function(Ne){function We(){if(In.length===0)jt&&jt.update(),Wn=null;else{Wn=ae.next(We),gt();for(var Jt=In.length-1;0<=Jt;--Jt){var en=In[Jt];en&&en(bn,null,0)}vt.flush(),jt&&jt.update()}}function at(){!Wn&&0<In.length&&(Wn=ae.next(We))}function tt(){Wn&&(ae.cancel(We),Wn=null)}function Re(Jt){Jt.preventDefault(),tt(),Xn.forEach(function(en){en()})}function Fe(Jt){vt.getError(),Lt.restore(),cn.restore(),Kt.restore(),vn.restore(),xn.restore(),An.restore(),Qt.restore(),jt&&jt.restore(),Sn.procs.refresh(),at(),Vn.forEach(function(en){en()})}function nt(Jt){function en(St,Rt){var Xt={},ln={};return Object.keys(St).forEach(function(un){var mn=St[un];if(se.isDynamic(mn))ln[un]=se.unbox(mn,un);else{if(Rt&&Array.isArray(mn)){for(var rn=0;rn<mn.length;++rn)if(se.isDynamic(mn[rn]))return void(ln[un]=se.unbox(mn,un))}Xt[un]=mn}}),{dynamic:ln,static:Xt}}var Mn=en(Jt.context||{},!0),pn=en(Jt.uniforms||{},!0),Cn=en(Jt.attributes||{},!1);Jt=en(function(St){function Rt(ln){if(ln in Xt){var un=Xt[ln];delete Xt[ln],Object.keys(un).forEach(function(mn){Xt[ln+"."+mn]=un[mn]})}}var Xt=Y({},St);return delete Xt.uniforms,delete Xt.attributes,delete Xt.context,delete Xt.vao,"stencil"in Xt&&Xt.stencil.op&&(Xt.stencil.opBack=Xt.stencil.opFront=Xt.stencil.op,delete Xt.stencil.op),Rt("blend"),Rt("depth"),Rt("cull"),Rt("stencil"),Rt("polygonOffset"),Rt("scissor"),Rt("sample"),"vao"in St&&(Xt.vao=St.vao),Xt}(Jt),!1);var jn={gpuTime:0,cpuTime:0,count:0},Bn=Sn.compile(Jt,Cn,pn,Mn,jn),Yn=Bn.draw,dr=Bn.batch,Zt=Bn.scope,dn=[];return Y(function(St,Rt){var Xt;if(typeof St=="function")return Zt.call(this,null,St,0);if(typeof Rt=="function")if(typeof St=="number")for(Xt=0;Xt<St;++Xt)Zt.call(this,null,Rt,Xt);else{if(!Array.isArray(St))return Zt.call(this,St,Rt,0);for(Xt=0;Xt<St.length;++Xt)Zt.call(this,St[Xt],Rt,Xt)}else if(typeof St=="number"){if(0<St)return dr.call(this,function(ln){for(;dn.length<ln;)dn.push(null);return dn}(0|St),0|St)}else{if(!Array.isArray(St))return Yn.call(this,St);if(St.length)return dr.call(this,St,St.length)}},{stats:jn,destroy:function(){Bn.destroy()}})}function Ge(Jt,en){var Mn=0;Sn.procs.poll();var pn=en.color;pn&&(vt.clearColor(+pn[0]||0,+pn[1]||0,+pn[2]||0,+pn[3]||0),Mn|=16384),"depth"in en&&(vt.clearDepth(+en.depth),Mn|=256),"stencil"in en&&(vt.clearStencil(0|en.stencil),Mn|=1024),vt.clear(Mn)}function ut(Jt){return In.push(Jt),at(),{cancel:function(){var en=K(In,Jt);In[en]=function Mn(){var pn=K(In,Mn);In[pn]=In[In.length-1],--In.length,0>=In.length&&tt()}}}}function pt(){var Jt=Tn.viewport,en=Tn.scissor_box;Jt[0]=Jt[1]=en[0]=en[1]=0,bn.viewportWidth=bn.framebufferWidth=bn.drawingBufferWidth=Jt[2]=en[2]=vt.drawingBufferWidth,bn.viewportHeight=bn.framebufferHeight=bn.drawingBufferHeight=Jt[3]=en[3]=vt.drawingBufferHeight}function gt(){bn.tick+=1,bn.time=Tt(),pt(),Sn.procs.poll()}function ct(){vn.refresh(),pt(),Sn.procs.refresh(),jt&&jt.update()}function Tt(){return(ue()-Wt)/1e3}if(!(Ne=T(Ne)))return null;var vt=Ne.gl,kt=vt.getContextAttributes();vt.isContextLost();var Lt=function(Jt,en){function Mn(Bn){var Yn;Bn=Bn.toLowerCase();try{Yn=pn[Bn]=Jt.getExtension(Bn)}catch{}return!!Yn}for(var pn={},Cn=0;Cn<en.extensions.length;++Cn){var jn=en.extensions[Cn];if(!Mn(jn))return en.onDestroy(),en.onDone('"'+jn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return en.optionalExtensions.forEach(Mn),{extensions:pn,restore:function(){Object.keys(pn).forEach(function(Bn){if(pn[Bn]&&!Mn(Bn))throw Error("(regl): error restoring extension "+Bn)})}}}(vt,Ne);if(!Lt)return null;var Ct=function(){var Jt={"":0},en=[""];return{id:function(Mn){var pn=Jt[Mn];return pn||(pn=Jt[Mn]=en.length,en.push(Mn),pn)},str:function(Mn){return en[Mn]}}}(),Dt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Gt=Ne.cachedCode||{},tn=Lt.extensions,jt=function(Jt,en){function Mn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function pn(dn,St,Rt){var Xt=Bn.pop()||new Mn;Xt.startQueryIndex=dn,Xt.endQueryIndex=St,Xt.sum=0,Xt.stats=Rt,Yn.push(Xt)}if(!en.ext_disjoint_timer_query)return null;var Cn=[],jn=[],Bn=[],Yn=[],dr=[],Zt=[];return{beginQuery:function(dn){var St=Cn.pop()||en.ext_disjoint_timer_query.createQueryEXT();en.ext_disjoint_timer_query.beginQueryEXT(35007,St),jn.push(St),pn(jn.length-1,jn.length,dn)},endQuery:function(){en.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:pn,update:function(){var dn,St;if((dn=jn.length)!==0){Zt.length=Math.max(Zt.length,dn+1),dr.length=Math.max(dr.length,dn+1),dr[0]=0;var Rt=Zt[0]=0;for(St=dn=0;St<jn.length;++St){var Xt=jn[St];en.ext_disjoint_timer_query.getQueryObjectEXT(Xt,34919)?(Rt+=en.ext_disjoint_timer_query.getQueryObjectEXT(Xt,34918),Cn.push(Xt)):jn[dn++]=Xt,dr[St+1]=Rt,Zt[St+1]=dn}for(jn.length=dn,St=dn=0;St<Yn.length;++St){var ln=(Rt=Yn[St]).startQueryIndex;Xt=Rt.endQueryIndex,Rt.sum+=dr[Xt]-dr[ln],ln=Zt[ln],(Xt=Zt[Xt])===ln?(Rt.stats.gpuTime+=Rt.sum/1e6,Bn.push(Rt)):(Rt.startQueryIndex=ln,Rt.endQueryIndex=Xt,Yn[dn++]=Rt)}Yn.length=dn}},getNumPendingQueries:function(){return jn.length},clear:function(){Cn.push.apply(Cn,jn);for(var dn=0;dn<Cn.length;dn++)en.ext_disjoint_timer_query.deleteQueryEXT(Cn[dn]);jn.length=0,Cn.length=0},restore:function(){jn.length=0,Cn.length=0}}}(0,tn),Wt=ue(),Ft=vt.drawingBufferWidth,Ln=vt.drawingBufferHeight,bn={tick:0,time:0,viewportWidth:Ft,viewportHeight:Ln,framebufferWidth:Ft,framebufferHeight:Ln,drawingBufferWidth:Ft,drawingBufferHeight:Ln,pixelRatio:Ne.pixelRatio},hn=(Ft={elements:null,primitive:4,count:-1,offset:0,instances:-1},ye(vt,tn)),Kt=c(vt,Dt,Ne,function(Jt){return Qt.destroyBuffer(Jt)}),sn=h(vt,tn,Kt,Dt),Qt=P(vt,tn,hn,Dt,Kt,sn,Ft),cn=C(vt,Ct,Dt,Ne),vn=S(vt,tn,hn,function(){Sn.procs.poll()},bn,Dt,Ne),xn=dt(vt,tn,0,Dt,Ne),An=w(vt,tn,hn,vn,xn,Dt),Sn=J(vt,Ct,tn,hn,Kt,sn,0,An,{},Qt,cn,Ft,bn,jt,Gt,Ne),Tn=(Ct=O(vt,An,Sn.procs.poll,bn),Sn.next),Rn=vt.canvas,In=[],Xn=[],Vn=[],er=[Ne.onDestroy],Wn=null;Rn&&(Rn.addEventListener("webglcontextlost",Re,!1),Rn.addEventListener("webglcontextrestored",Fe,!1));var fr=An.setFBO=nt({framebuffer:se.define.call(null,1,"framebuffer")});return ct(),kt=Y(nt,{clear:function(Jt){if("framebuffer"in Jt)if(Jt.framebuffer&&Jt.framebuffer_reglType==="framebufferCube")for(var en=0;6>en;++en)fr(Y({framebuffer:Jt.framebuffer.faces[en]},Jt),Ge);else fr(Jt,Ge);else Ge(0,Jt)},prop:se.define.bind(null,1),context:se.define.bind(null,2),this:se.define.bind(null,3),draw:nt({}),buffer:function(Jt){return Kt.create(Jt,34962,!1,!1)},elements:function(Jt){return sn.create(Jt,!1)},texture:vn.create2D,cube:vn.createCube,renderbuffer:xn.create,framebuffer:An.create,framebufferCube:An.createCube,vao:Qt.createVAO,attributes:kt,frame:ut,on:function(Jt,en){var Mn;switch(Jt){case"frame":return ut(en);case"lost":Mn=Xn;break;case"restore":Mn=Vn;break;case"destroy":Mn=er}return Mn.push(en),{cancel:function(){for(var pn=0;pn<Mn.length;++pn)if(Mn[pn]===en){Mn[pn]=Mn[Mn.length-1],Mn.pop();break}}}},limits:hn,hasExtension:function(Jt){return 0<=hn.extensions.indexOf(Jt.toLowerCase())},read:Ct,destroy:function(){In.length=0,tt(),Rn&&(Rn.removeEventListener("webglcontextlost",Re),Rn.removeEventListener("webglcontextrestored",Fe)),cn.clear(),An.clear(),xn.clear(),Qt.clear(),vn.clear(),sn.clear(),Kt.clear(),jt&&jt.clear(),er.forEach(function(Jt){Jt()})},_gl:vt,_refresh:ct,poll:function(){gt(),jt&&jt.update()},now:Tt,stats:Dt,getCachedCode:function(){return Gt},preloadCachedCode:function(Jt){Object.entries(Jt).forEach(function(en){Gt[en[0]]=en[1]})}}),Ne.onDone(null,kt),kt}}()},30456:function(X,I,e){var A=e(33576),k=A.Buffer;function o(b,p){for(var s in b)p[s]=b[s]}function T(b,p,s){return k(b,p,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?X.exports=A:(o(A,I),I.Buffer=T),T.prototype=Object.create(k.prototype),o(k,T),T.from=function(b,p,s){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,p,s)},T.alloc=function(b,p,s){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=k(b);return p!==void 0?typeof s=="string"?t.fill(p,s):t.fill(p):t.fill(0),t},T.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return A.SlowBuffer(b)}},14500:function(X,I,e){"use strict";var A=e(53664),k=e(64348),o=e(39640)(),T=e(2304),b=A("%TypeError%"),p=A("%Math.floor%");X.exports=function(s,t){if(typeof s!="function")throw new b("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||p(t)!==t)throw new b("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,r=!0;if("length"in s&&T){var a=T(s,"length");a&&!a.configurable&&(n=!1),a&&!a.writable&&(r=!1)}return(n||r||!i)&&(o?k(s,"length",t,!0,!0):k(s,"length",t)),s}},29936:function(X,I,e){X.exports=k;var A=e(61252).EventEmitter;function k(){A.call(this)}e(6768)(k,A),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(o,T){var b=this;function p(l){o.writable&&o.write(l)===!1&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",p),o.on("drain",s),o._isStdio||T&&T.end===!1||(b.on("end",i),b.on("close",n));var t=!1;function i(){t||(t=!0,o.end())}function n(){t||(t=!0,typeof o.destroy=="function"&&o.destroy())}function r(l){if(a(),A.listenerCount(this,"error")===0)throw l}function a(){b.removeListener("data",p),o.removeListener("drain",s),b.removeListener("end",i),b.removeListener("close",n),b.removeListener("error",r),o.removeListener("error",r),b.removeListener("end",a),b.removeListener("close",a),o.removeListener("close",a)}return b.on("error",r),o.on("error",r),b.on("end",a),b.on("close",a),o.on("close",a),o.emit("pipe",b),o}},92784:function(X){"use strict";var I={};function e(k,o,T){T||(T=Error);var b=function(p){var s,t;function i(n,r,a){return p.call(this,function(l,c,h){return typeof o=="string"?o:o(l,c,h)}(n,r,a))||this}return t=p,(s=i).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,i}(T);b.prototype.name=T.name,b.prototype.code=k,I[k]=b}function A(k,o){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(o," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(o," ").concat(k[0]," or ").concat(k[1]):"of ".concat(o," ").concat(k[0])}return"of ".concat(o," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,o){return'The value "'+o+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,o,T){var b,p,s,t,i;if(typeof o=="string"&&(p="not ",o.substr(0,4)===p)?(b="must not be",o=o.replace(/^not /,"")):b="must be",function(r,a,l){return(l===void 0||l>r.length)&&(l=r.length),r.substring(l-9,l)===a}(k," argument"))s="The ".concat(k," ").concat(b," ").concat(A(o,"type"));else{var n=(typeof i!="number"&&(i=0),i+1>(t=k).length||t.indexOf(".",i)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(n," ").concat(b," ").concat(A(o,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),X.exports.i=I},15316:function(X,I,e){"use strict";var A=e(4168),k=Object.keys||function(r){var a=[];for(var l in r)a.push(l);return a};X.exports=t;var o=e(12348),T=e(11288);e(6768)(t,o);for(var b=k(T.prototype),p=0;p<b.length;p++){var s=b[p];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(r){if(!(this instanceof t))return new t(r);o.call(this,r),T.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||A.nextTick(n,this)}function n(r){r.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},27136:function(X,I,e){"use strict";X.exports=k;var A=e(22477);function k(o){if(!(this instanceof k))return new k(o);A.call(this,o)}e(6768)(k,A),k.prototype._transform=function(o,T,b){b(null,o)}},12348:function(X,I,e){"use strict";var A,k=e(4168);X.exports=_,_.ReadableState=v,e(61252).EventEmitter;var o,T=function(ee,Q){return ee.listeners(Q).length},b=e(4776),p=e(33576).Buffer,s=e.g.Uint8Array||function(){},t=e(19768);o=t&&t.debuglog?t.debuglog("stream"):function(){};var i,n,r,a=e(47264),l=e(55324),c=e(24888).getHighWaterMark,h=e(92784).i,u=h.ERR_INVALID_ARG_TYPE,x=h.ERR_STREAM_PUSH_AFTER_EOF,d=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(_,b);var g=l.errorOrDestroy,y=["error","close","destroy","pause","resume"];function v(ee,Q,J){A=A||e(15316),ee=ee||{},typeof J!="boolean"&&(J=Q instanceof A),this.objectMode=!!ee.objectMode,J&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=c(this,ee,"readableHighWaterMark",J),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&(i||(i=e(86032).o),this.decoder=new i(ee.encoding),this.encoding=ee.encoding)}function _(ee){if(A=A||e(15316),!(this instanceof _))return new _(ee);var Q=this instanceof A;this._readableState=new v(ee,this,Q),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),b.call(this)}function f(ee,Q,J,K,Y){o("readableAddChunk",Q);var ie,se=ee._readableState;if(Q===null)se.reading=!1,function(ae,ue){if(o("onEofChunk"),!ue.ended){if(ue.decoder){var ve=ue.decoder.end();ve&&ve.length&&(ue.buffer.push(ve),ue.length+=ue.objectMode?1:ve.length)}ue.ended=!0,ue.sync?P(ae):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,C(ae)))}}(ee,se);else if(Y||(ie=function(ae,ue){var ve,ye;return ye=ue,p.isBuffer(ye)||ye instanceof s||typeof ue=="string"||ue===void 0||ae.objectMode||(ve=new u("chunk",["string","Buffer","Uint8Array"],ue)),ve}(se,Q)),ie)g(ee,ie);else if(se.objectMode||Q&&Q.length>0)if(typeof Q=="string"||se.objectMode||Object.getPrototypeOf(Q)===p.prototype||(Q=function(ae){return p.from(ae)}(Q)),K)se.endEmitted?g(ee,new m):S(ee,se,Q,!0);else if(se.ended)g(ee,new x);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!J?(Q=se.decoder.write(Q),se.objectMode||Q.length!==0?S(ee,se,Q,!1):O(ee,se)):S(ee,se,Q,!1)}else K||(se.reading=!1,O(ee,se));return!se.ended&&(se.length<se.highWaterMark||se.length===0)}function S(ee,Q,J,K){Q.flowing&&Q.length===0&&!Q.sync?(Q.awaitDrain=0,ee.emit("data",J)):(Q.length+=Q.objectMode?1:J.length,K?Q.buffer.unshift(J):Q.buffer.push(J),Q.needReadable&&P(ee)),O(ee,Q)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function(ee,Q){Q(ee)},_.prototype.push=function(ee,Q){var J,K=this._readableState;return K.objectMode?J=!0:typeof ee=="string"&&((Q=Q||K.defaultEncoding)!==K.encoding&&(ee=p.from(ee,Q),Q=""),J=!0),f(this,ee,Q,!1,J)},_.prototype.unshift=function(ee){return f(this,ee,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(ee){i||(i=e(86032).o);var Q=new i(ee);this._readableState.decoder=Q,this._readableState.encoding=this._readableState.decoder.encoding;for(var J=this._readableState.buffer.head,K="";J!==null;)K+=Q.write(J.data),J=J.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};var w=1073741824;function E(ee,Q){return ee<=0||Q.length===0&&Q.ended?0:Q.objectMode?1:ee!=ee?Q.flowing&&Q.length?Q.buffer.head.data.length:Q.length:(ee>Q.highWaterMark&&(Q.highWaterMark=function(J){return J>=w?J=w:(J--,J|=J>>>1,J|=J>>>2,J|=J>>>4,J|=J>>>8,J|=J>>>16,J++),J}(ee)),ee<=Q.length?ee:Q.ended?Q.length:(Q.needReadable=!0,0))}function P(ee){var Q=ee._readableState;o("emitReadable",Q.needReadable,Q.emittedReadable),Q.needReadable=!1,Q.emittedReadable||(o("emitReadable",Q.flowing),Q.emittedReadable=!0,k.nextTick(C,ee))}function C(ee){var Q=ee._readableState;o("emitReadable_",Q.destroyed,Q.length,Q.ended),Q.destroyed||!Q.length&&!Q.ended||(ee.emit("readable"),Q.emittedReadable=!1),Q.needReadable=!Q.flowing&&!Q.ended&&Q.length<=Q.highWaterMark,W(ee)}function O(ee,Q){Q.readingMore||(Q.readingMore=!0,k.nextTick(R,ee,Q))}function R(ee,Q){for(;!Q.reading&&!Q.ended&&(Q.length<Q.highWaterMark||Q.flowing&&Q.length===0);){var J=Q.length;if(o("maybeReadMore read 0"),ee.read(0),J===Q.length)break}Q.readingMore=!1}function U(ee){var Q=ee._readableState;Q.readableListening=ee.listenerCount("readable")>0,Q.resumeScheduled&&!Q.paused?Q.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function D(ee){o("readable nexttick read 0"),ee.read(0)}function N(ee,Q){o("resume",Q.reading),Q.reading||ee.read(0),Q.resumeScheduled=!1,ee.emit("resume"),W(ee),Q.flowing&&!Q.reading&&ee.read(0)}function W(ee){var Q=ee._readableState;for(o("flow",Q.flowing);Q.flowing&&ee.read()!==null;);}function F(ee,Q){return Q.length===0?null:(Q.objectMode?J=Q.buffer.shift():!ee||ee>=Q.length?(J=Q.decoder?Q.buffer.join(""):Q.buffer.length===1?Q.buffer.first():Q.buffer.concat(Q.length),Q.buffer.clear()):J=Q.buffer.consume(ee,Q.decoder),J);var J}function j(ee){var Q=ee._readableState;o("endReadable",Q.endEmitted),Q.endEmitted||(Q.ended=!0,k.nextTick(q,Q,ee))}function q(ee,Q){if(o("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,Q.readable=!1,Q.emit("end"),ee.autoDestroy)){var J=Q._writableState;(!J||J.autoDestroy&&J.finished)&&Q.destroy()}}function te(ee,Q){for(var J=0,K=ee.length;J<K;J++)if(ee[J]===Q)return J;return-1}_.prototype.read=function(ee){o("read",ee),ee=parseInt(ee,10);var Q=this._readableState,J=ee;if(ee!==0&&(Q.emittedReadable=!1),ee===0&&Q.needReadable&&((Q.highWaterMark!==0?Q.length>=Q.highWaterMark:Q.length>0)||Q.ended))return o("read: emitReadable",Q.length,Q.ended),Q.length===0&&Q.ended?j(this):P(this),null;if((ee=E(ee,Q))===0&&Q.ended)return Q.length===0&&j(this),null;var K,Y=Q.needReadable;return o("need readable",Y),(Q.length===0||Q.length-ee<Q.highWaterMark)&&o("length less than watermark",Y=!0),Q.ended||Q.reading?o("reading or ended",Y=!1):Y&&(o("do read"),Q.reading=!0,Q.sync=!0,Q.length===0&&(Q.needReadable=!0),this._read(Q.highWaterMark),Q.sync=!1,Q.reading||(ee=E(J,Q))),(K=ee>0?F(ee,Q):null)===null?(Q.needReadable=Q.length<=Q.highWaterMark,ee=0):(Q.length-=ee,Q.awaitDrain=0),Q.length===0&&(Q.ended||(Q.needReadable=!0),J!==ee&&Q.ended&&j(this)),K!==null&&this.emit("data",K),K},_.prototype._read=function(ee){g(this,new d("_read()"))},_.prototype.pipe=function(ee,Q){var J=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=ee;break;case 1:K.pipes=[K.pipes,ee];break;default:K.pipes.push(ee)}K.pipesCount+=1,o("pipe count=%d opts=%j",K.pipesCount,Q);var Y=Q&&Q.end===!1||ee===k.stdout||ee===k.stderr?pe:ie;function ie(){o("onend"),ee.end()}K.endEmitted?k.nextTick(Y):J.once("end",Y),ee.on("unpipe",function ge(ke,Ee){o("onunpipe"),ke===J&&Ee&&Ee.hasUnpiped===!1&&(Ee.hasUnpiped=!0,o("cleanup"),ee.removeListener("close",ye),ee.removeListener("finish",de),ee.removeListener("drain",se),ee.removeListener("error",ve),ee.removeListener("unpipe",ge),J.removeListener("end",ie),J.removeListener("end",pe),J.removeListener("data",ue),ae=!0,!K.awaitDrain||ee._writableState&&!ee._writableState.needDrain||se())});var se=function(ge){return function(){var ke=ge._readableState;o("pipeOnDrain",ke.awaitDrain),ke.awaitDrain&&ke.awaitDrain--,ke.awaitDrain===0&&T(ge,"data")&&(ke.flowing=!0,W(ge))}}(J);ee.on("drain",se);var ae=!1;function ue(ge){o("ondata");var ke=ee.write(ge);o("dest.write",ke),ke===!1&&((K.pipesCount===1&&K.pipes===ee||K.pipesCount>1&&te(K.pipes,ee)!==-1)&&!ae&&(o("false write response, pause",K.awaitDrain),K.awaitDrain++),J.pause())}function ve(ge){o("onerror",ge),pe(),ee.removeListener("error",ve),T(ee,"error")===0&&g(ee,ge)}function ye(){ee.removeListener("finish",de),pe()}function de(){o("onfinish"),ee.removeListener("close",ye),pe()}function pe(){o("unpipe"),J.unpipe(ee)}return J.on("data",ue),function(ge,ke,Ee){if(typeof ge.prependListener=="function")return ge.prependListener(ke,Ee);ge._events&&ge._events[ke]?Array.isArray(ge._events[ke])?ge._events[ke].unshift(Ee):ge._events[ke]=[Ee,ge._events[ke]]:ge.on(ke,Ee)}(ee,"error",ve),ee.once("close",ye),ee.once("finish",de),ee.emit("pipe",J),K.flowing||(o("pipe resume"),J.resume()),ee},_.prototype.unpipe=function(ee){var Q=this._readableState,J={hasUnpiped:!1};if(Q.pipesCount===0)return this;if(Q.pipesCount===1)return ee&&ee!==Q.pipes||(ee||(ee=Q.pipes),Q.pipes=null,Q.pipesCount=0,Q.flowing=!1,ee&&ee.emit("unpipe",this,J)),this;if(!ee){var K=Q.pipes,Y=Q.pipesCount;Q.pipes=null,Q.pipesCount=0,Q.flowing=!1;for(var ie=0;ie<Y;ie++)K[ie].emit("unpipe",this,{hasUnpiped:!1});return this}var se=te(Q.pipes,ee);return se===-1||(Q.pipes.splice(se,1),Q.pipesCount-=1,Q.pipesCount===1&&(Q.pipes=Q.pipes[0]),ee.emit("unpipe",this,J)),this},_.prototype.on=function(ee,Q){var J=b.prototype.on.call(this,ee,Q),K=this._readableState;return ee==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):ee==="readable"&&(K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,o("on readable",K.length,K.reading),K.length?P(this):K.reading||k.nextTick(D,this))),J},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(ee,Q){var J=b.prototype.removeListener.call(this,ee,Q);return ee==="readable"&&k.nextTick(U,this),J},_.prototype.removeAllListeners=function(ee){var Q=b.prototype.removeAllListeners.apply(this,arguments);return ee!=="readable"&&ee!==void 0||k.nextTick(U,this),Q},_.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(o("resume"),ee.flowing=!ee.readableListening,function(Q,J){J.resumeScheduled||(J.resumeScheduled=!0,k.nextTick(N,Q,J))}(this,ee)),ee.paused=!1,this},_.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(ee){var Q=this,J=this._readableState,K=!1;for(var Y in ee.on("end",function(){if(o("wrapped end"),J.decoder&&!J.ended){var se=J.decoder.end();se&&se.length&&Q.push(se)}Q.push(null)}),ee.on("data",function(se){o("wrapped data"),J.decoder&&(se=J.decoder.write(se)),J.objectMode&&se==null||(J.objectMode||se&&se.length)&&(Q.push(se)||(K=!0,ee.pause()))}),ee)this[Y]===void 0&&typeof ee[Y]=="function"&&(this[Y]=function(se){return function(){return ee[se].apply(ee,arguments)}}(Y));for(var ie=0;ie<y.length;ie++)ee.on(y[ie],this.emit.bind(this,y[ie]));return this._read=function(se){o("wrapped _read",se),K&&(K=!1,ee.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return n===void 0&&(n=e(60328)),n(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),_._fromList=F,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function(ee,Q){return r===void 0&&(r=e(90555)),r(_,ee,Q)})},22477:function(X,I,e){"use strict";X.exports=t;var A=e(92784).i,k=A.ERR_METHOD_NOT_IMPLEMENTED,o=A.ERR_MULTIPLE_CALLBACK,T=A.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=A.ERR_TRANSFORM_WITH_LENGTH_0,p=e(15316);function s(r,a){var l=this._transformState;l.transforming=!1;var c=l.writecb;if(c===null)return this.emit("error",new o);l.writechunk=null,l.writecb=null,a!=null&&this.push(a),c(r);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(r){if(!(this instanceof t))return new t(r);p.call(this,r),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var r=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(a,l){n(r,a,l)})}function n(r,a,l){if(a)return r.emit("error",a);if(l!=null&&r.push(l),r._writableState.length)throw new b;if(r._transformState.transforming)throw new T;return r.push(null)}e(6768)(t,p),t.prototype.push=function(r,a){return this._transformState.needTransform=!1,p.prototype.push.call(this,r,a)},t.prototype._transform=function(r,a,l){l(new k("_transform()"))},t.prototype._write=function(r,a,l){var c=this._transformState;if(c.writecb=l,c.writechunk=r,c.writeencoding=a,!c.transforming){var h=this._readableState;(c.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(r){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(r,a){p.prototype._destroy.call(this,r,function(l){a(l)})}},11288:function(X,I,e){"use strict";var A,k=e(4168);function o(O){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(U,D,N){var W=U.entry;for(U.entry=null;W;){var F=W.callback;D.pendingcb--,F(void 0),W=W.next}D.corkedRequestsFree.next=U})(R,O)}}X.exports=_,_.WritableState=v;var T,b={deprecate:e(96656)},p=e(4776),s=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),n=e(24888).getHighWaterMark,r=e(92784).i,a=r.ERR_INVALID_ARG_TYPE,l=r.ERR_METHOD_NOT_IMPLEMENTED,c=r.ERR_MULTIPLE_CALLBACK,h=r.ERR_STREAM_CANNOT_PIPE,u=r.ERR_STREAM_DESTROYED,x=r.ERR_STREAM_NULL_VALUES,d=r.ERR_STREAM_WRITE_AFTER_END,m=r.ERR_UNKNOWN_ENCODING,g=i.errorOrDestroy;function y(){}function v(O,R,U){A=A||e(15316),O=O||{},typeof U!="boolean"&&(U=R instanceof A),this.objectMode=!!O.objectMode,U&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=n(this,O,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=O.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){(function(W,F){var j=W._writableState,q=j.sync,te=j.writecb;if(typeof te!="function")throw new c;if(function(Q){Q.writing=!1,Q.writecb=null,Q.length-=Q.writelen,Q.writelen=0}(j),F)(function(Q,J,K,Y,ie){--J.pendingcb,K?(k.nextTick(ie,Y),k.nextTick(C,Q,J),Q._writableState.errorEmitted=!0,g(Q,Y)):(ie(Y),Q._writableState.errorEmitted=!0,g(Q,Y),C(Q,J))})(W,j,q,F,te);else{var ee=E(j)||W.destroyed;ee||j.corked||j.bufferProcessing||!j.bufferedRequest||w(W,j),q?k.nextTick(S,W,j,ee,te):S(W,j,ee,te)}})(R,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(O){var R=this instanceof(A=A||e(15316));if(!R&&!T.call(_,this))return new _(O);this._writableState=new v(O,this,R),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),p.call(this)}function f(O,R,U,D,N,W,F){R.writelen=D,R.writecb=F,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new u("write")):U?O._writev(N,R.onwrite):O._write(N,W,R.onwrite),R.sync=!1}function S(O,R,U,D){U||function(N,W){W.length===0&&W.needDrain&&(W.needDrain=!1,N.emit("drain"))}(O,R),R.pendingcb--,D(),C(O,R)}function w(O,R){R.bufferProcessing=!0;var U=R.bufferedRequest;if(O._writev&&U&&U.next){var D=R.bufferedRequestCount,N=new Array(D),W=R.corkedRequestsFree;W.entry=U;for(var F=0,j=!0;U;)N[F]=U,U.isBuf||(j=!1),U=U.next,F+=1;N.allBuffers=j,f(O,R,!0,R.length,N,"",W.finish),R.pendingcb++,R.lastBufferedRequest=null,W.next?(R.corkedRequestsFree=W.next,W.next=null):R.corkedRequestsFree=new o(R),R.bufferedRequestCount=0}else{for(;U;){var q=U.chunk,te=U.encoding,ee=U.callback;if(f(O,R,!1,R.objectMode?1:q.length,q,te,ee),U=U.next,R.bufferedRequestCount--,R.writing)break}U===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=U,R.bufferProcessing=!1}function E(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function P(O,R){O._final(function(U){R.pendingcb--,U&&g(O,U),R.prefinished=!0,O.emit("prefinish"),C(O,R)})}function C(O,R){var U=E(R);if(U&&(function(N,W){W.prefinished||W.finalCalled||(typeof N._final!="function"||W.destroyed?(W.prefinished=!0,N.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,k.nextTick(P,N,W)))}(O,R),R.pendingcb===0&&(R.finished=!0,O.emit("finish"),R.autoDestroy))){var D=O._readableState;(!D||D.autoDestroy&&D.endEmitted)&&O.destroy()}return U}e(6768)(_,p),v.prototype.getBuffer=function(){for(var O=this.bufferedRequest,R=[];O;)R.push(O),O=O.next;return R},function(){try{Object.defineProperty(v.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(O){return!!T.call(this,O)||this===_&&O&&O._writableState instanceof v}})):T=function(O){return O instanceof this},_.prototype.pipe=function(){g(this,new h)},_.prototype.write=function(O,R,U){var D,N=this._writableState,W=!1,F=!N.objectMode&&(D=O,s.isBuffer(D)||D instanceof t);return F&&!s.isBuffer(O)&&(O=function(j){return s.from(j)}(O)),typeof R=="function"&&(U=R,R=null),F?R="buffer":R||(R=N.defaultEncoding),typeof U!="function"&&(U=y),N.ending?function(j,q){var te=new d;g(j,te),k.nextTick(q,te)}(this,U):(F||function(j,q,te,ee){var Q;return te===null?Q=new x:typeof te=="string"||q.objectMode||(Q=new a("chunk",["string","Buffer"],te)),!Q||(g(j,Q),k.nextTick(ee,Q),!1)}(this,N,O,U))&&(N.pendingcb++,W=function(j,q,te,ee,Q,J){if(!te){var K=function(ae,ue,ve){return ae.objectMode||ae.decodeStrings===!1||typeof ue!="string"||(ue=s.from(ue,ve)),ue}(q,ee,Q);ee!==K&&(te=!0,Q="buffer",ee=K)}var Y=q.objectMode?1:ee.length;q.length+=Y;var ie=q.length<q.highWaterMark;if(ie||(q.needDrain=!0),q.writing||q.corked){var se=q.lastBufferedRequest;q.lastBufferedRequest={chunk:ee,encoding:Q,isBuf:te,callback:J,next:null},se?se.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else f(j,q,!1,Y,ee,Q,J);return ie}(this,N,F,O,R,U)),W},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||w(this,O))},_.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new m(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(O,R,U){U(new l("_write()"))},_.prototype._writev=null,_.prototype.end=function(O,R,U){var D=this._writableState;return typeof O=="function"?(U=O,O=null,R=null):typeof R=="function"&&(U=R,R=null),O!=null&&this.write(O,R),D.corked&&(D.corked=1,this.uncork()),D.ending||function(N,W,F){W.ending=!0,C(N,W),F&&(W.finished?k.nextTick(F):N.once("finish",F)),W.ended=!0,N.writable=!1}(this,D,U),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),_.prototype.destroy=i.destroy,_.prototype._undestroy=i.undestroy,_.prototype._destroy=function(O,R){R(O)}},60328:function(X,I,e){"use strict";var A,k=e(4168);function o(x,d,m){return d in x?Object.defineProperty(x,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):x[d]=m,x}var T=e(15932),b=Symbol("lastResolve"),p=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),n=Symbol("handlePromise"),r=Symbol("stream");function a(x,d){return{value:x,done:d}}function l(x){var d=x[b];if(d!==null){var m=x[r].read();m!==null&&(x[i]=null,x[b]=null,x[p]=null,d(a(m,!1)))}}function c(x){k.nextTick(l,x)}var h=Object.getPrototypeOf(function(){}),u=Object.setPrototypeOf((o(A={get stream(){return this[r]},next:function(){var x=this,d=this[s];if(d!==null)return Promise.reject(d);if(this[t])return Promise.resolve(a(void 0,!0));if(this[r].destroyed)return new Promise(function(v,_){k.nextTick(function(){x[s]?_(x[s]):v(a(void 0,!0))})});var m,g=this[i];if(g)m=new Promise(function(v,_){return function(f,S){v.then(function(){_[t]?f(a(void 0,!0)):_[n](f,S)},S)}}(g,this));else{var y=this[r].read();if(y!==null)return Promise.resolve(a(y,!1));m=new Promise(this[n])}return this[i]=m,m}},Symbol.asyncIterator,function(){return this}),o(A,"return",function(){var x=this;return new Promise(function(d,m){x[r].destroy(null,function(g){g?m(g):d(a(void 0,!0))})})}),A),h);X.exports=function(x){var d,m=Object.create(u,(o(d={},r,{value:x,writable:!0}),o(d,b,{value:null,writable:!0}),o(d,p,{value:null,writable:!0}),o(d,s,{value:null,writable:!0}),o(d,t,{value:x._readableState.endEmitted,writable:!0}),o(d,n,{value:function(g,y){var v=m[r].read();v?(m[i]=null,m[b]=null,m[p]=null,g(a(v,!1))):(m[b]=g,m[p]=y)},writable:!0}),d));return m[i]=null,T(x,function(g){if(g&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=m[p];return y!==null&&(m[i]=null,m[b]=null,m[p]=null,y(g)),void(m[s]=g)}var v=m[b];v!==null&&(m[i]=null,m[b]=null,m[p]=null,v(a(void 0,!0))),m[t]=!0}),x.on("readable",c.bind(null,m)),m}},47264:function(X,I,e){"use strict";function A(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),i.push.apply(i,n)}return i}function k(s,t,i){return t in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function o(s,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}var T=e(33576).Buffer,b=e(21576).inspect,p=b&&b.custom||"inspect";X.exports=function(){function s(){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,i;return t=s,i=[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,a=""+r.data;r=r.next;)a+=n+r.data;return a}},{key:"concat",value:function(n){if(this.length===0)return T.alloc(0);for(var r,a,l,c=T.allocUnsafe(n>>>0),h=this.head,u=0;h;)r=h.data,a=c,l=u,T.prototype.copy.call(r,a,l),u+=h.data.length,h=h.next;return c}},{key:"consume",value:function(n,r){var a;return n<this.head.data.length?(a=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):a=n===this.head.data.length?this.shift():r?this._getString(n):this._getBuffer(n),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,a=1,l=r.data;for(n-=l.length;r=r.next;){var c=r.data,h=n>c.length?c.length:n;if(h===c.length?l+=c:l+=c.slice(0,n),(n-=h)==0){h===c.length?(++a,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=c.slice(h));break}++a}return this.length-=a,l}},{key:"_getBuffer",value:function(n){var r=T.allocUnsafe(n),a=this.head,l=1;for(a.data.copy(r),n-=a.data.length;a=a.next;){var c=a.data,h=n>c.length?c.length:n;if(c.copy(r,r.length-n,0,h),(n-=h)==0){h===c.length?(++l,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=c.slice(h));break}++l}return this.length-=l,r}},{key:p,value:function(n,r){return b(this,function(a){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?A(Object(c),!0).forEach(function(h){k(a,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):A(Object(c)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(c,h))})}return a}({},r,{depth:0,customInspect:!1}))}}],i&&o(t.prototype,i),s}()},55324:function(X,I,e){"use strict";var A=e(4168);function k(b,p){T(b,p),o(b)}function o(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,p){b.emit("error",p)}X.exports={destroy:function(b,p){var s=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(p?p(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,A.nextTick(T,this,b)):A.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(n){!p&&n?s._writableState?s._writableState.errorEmitted?A.nextTick(o,s):(s._writableState.errorEmitted=!0,A.nextTick(k,s,n)):A.nextTick(k,s,n):p?(A.nextTick(o,s),p(n)):A.nextTick(o,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,p){var s=b._readableState,t=b._writableState;s&&s.autoDestroy||t&&t.autoDestroy?b.destroy(p):b.emit("error",p)}}},15932:function(X,I,e){"use strict";var A=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}X.exports=function o(T,b,p){if(typeof b=="function")return o(T,null,b);b||(b={}),p=function(x){var d=!1;return function(){if(!d){d=!0;for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];x.apply(this,g)}}}(p||k);var s=b.readable||b.readable!==!1&&T.readable,t=b.writable||b.writable!==!1&&T.writable,i=function(){T.writable||r()},n=T._writableState&&T._writableState.finished,r=function(){t=!1,n=!0,s||p.call(T)},a=T._readableState&&T._readableState.endEmitted,l=function(){s=!1,a=!0,t||p.call(T)},c=function(x){p.call(T,x)},h=function(){var x;return s&&!a?(T._readableState&&T._readableState.ended||(x=new A),p.call(T,x)):t&&!n?(T._writableState&&T._writableState.ended||(x=new A),p.call(T,x)):void 0},u=function(){T.req.on("finish",r)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",r),T.on("abort",h),T.req?u():T.on("request",u)):t&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",l),T.on("finish",r),b.error!==!1&&T.on("error",c),T.on("close",h),function(){T.removeListener("complete",r),T.removeListener("abort",h),T.removeListener("request",u),T.req&&T.req.removeListener("finish",r),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",r),T.removeListener("end",l),T.removeListener("error",c),T.removeListener("close",h)}}},90555:function(X){X.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(X,I,e){"use strict";var A,k=e(92784).i,o=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function p(t){t()}function s(t,i){return t.pipe(i)}X.exports=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r,a=function(c){return c.length?typeof c[c.length-1]!="function"?b:c.pop():b}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new o("streams");var l=i.map(function(c,h){var u=h<i.length-1;return function(x,d,m,g){g=function(_){var f=!1;return function(){f||(f=!0,_.apply(void 0,arguments))}}(g);var y=!1;x.on("close",function(){y=!0}),A===void 0&&(A=e(15932)),A(x,{readable:d,writable:m},function(_){if(_)return g(_);y=!0,g()});var v=!1;return function(_){if(!y&&!v)return v=!0,function(f){return f.setHeader&&typeof f.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void g(_||new T("pipe"))}}(c,u,h>0,function(x){r||(r=x),x&&l.forEach(p),u||(l.forEach(p),a(r))})});return i.reduce(s)}},24888:function(X,I,e){"use strict";var A=e(92784).i.ERR_INVALID_OPT_VALUE;X.exports={getHighWaterMark:function(k,o,T,b){var p=function(s,t,i){return s.highWaterMark!=null?s.highWaterMark:t?s[i]:null}(o,b,T);if(p!=null){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new A(b?T:"highWaterMark",p);return Math.floor(p)}return k.objectMode?16:16384}}},4776:function(X,I,e){X.exports=e(61252).EventEmitter},86032:function(X,I,e){"use strict";var A=e(30456).Buffer,k=A.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(a){var l;switch(this.encoding=function(c){var h=function(u){if(!u)return"utf8";for(var x;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(x)return;u=(""+u).toLowerCase(),x=!0}}(c);if(typeof h!="string"&&(A.isEncoding===k||!k(c)))throw new Error("Unknown encoding: "+c);return h||c}(a),this.encoding){case"utf16le":this.text=p,this.end=s,l=4;break;case"utf8":this.fillLast=b,l=4;break;case"base64":this.text=t,this.end=i,l=3;break;default:return this.write=n,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=A.allocUnsafe(l)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function b(a){var l=this.lastTotal-this.lastNeed,c=function(h,u,x){if((192&u[0])!=128)return h.lastNeed=0,"\uFFFD";if(h.lastNeed>1&&u.length>1){if((192&u[1])!=128)return h.lastNeed=1,"\uFFFD";if(h.lastNeed>2&&u.length>2&&(192&u[2])!=128)return h.lastNeed=2,"\uFFFD"}}(this,a);return c!==void 0?c:this.lastNeed<=a.length?(a.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,l,0,a.length),void(this.lastNeed-=a.length))}function p(a,l){if((a.length-l)%2==0){var c=a.toString("utf16le",l);if(c){var h=c.charCodeAt(c.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",l,a.length-1)}function s(a){var l=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,c)}return l}function t(a,l){var c=(a.length-l)%3;return c===0?a.toString("base64",l):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",l,a.length-c))}function i(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function n(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}I.o=o,o.prototype.write=function(a){if(a.length===0)return"";var l,c;if(this.lastNeed){if((l=this.fillLast(a))===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?l?l+this.text(a,c):this.text(a,c):l||""},o.prototype.end=function(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+"\uFFFD":l},o.prototype.text=function(a,l){var c=function(u,x,d){var m=x.length-1;if(m<d)return 0;var g=T(x[m]);return g>=0?(g>0&&(u.lastNeed=g-1),g):--m<d||g===-2?0:(g=T(x[m]))>=0?(g>0&&(u.lastNeed=g-2),g):--m<d||g===-2?0:(g=T(x[m]))>=0?(g>0&&(g===2?g=0:u.lastNeed=g-3),g):0}(this,a,l);if(!this.lastNeed)return a.toString("utf8",l);this.lastTotal=c;var h=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",l,h)},o.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},55619:function(X,I,e){var A=e(45408),k=e(86844)("stream-parser");X.exports=function(u){var x=u&&typeof u._transform=="function",d=u&&typeof u._write=="function";if(!x&&!d)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),u._bytes=t,u._skipBytes=i,x&&(u._passthrough=n),x?u._transform=a:u._write=r};var o=-1,T=0,b=1,p=2;function s(u){k("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=o,u._parserCallback=null,typeof u.push=="function"&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function t(u,x){A(!this._parserCallback,'there is already a "callback" set!'),A(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||s(this),k("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=x,this._parserState=T}function i(u,x){A(!this._parserCallback,'there is already a "callback" set!'),A(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||s(this),k("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=x,this._parserState=b}function n(u,x){A(!this._parserCallback,'There is already a "callback" set!'),A(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||s(this),k("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=x,this._parserState=p}function r(u,x,d){this._parserInit||s(this),k("write(%o bytes)",u.length),typeof x=="function"&&(d=x),c(this,u,null,d)}function a(u,x,d){this._parserInit||s(this),k("transform(%o bytes)",u.length),typeof x!="function"&&(x=this._parserOutput),c(this,u,x,d)}function l(u,x,d,m){if(u._parserBytesLeft-=x.length,k("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===T?(u._parserBuffers.push(x),u._parserBuffered+=x.length):u._parserState===p&&d(x),u._parserBytesLeft!==0)return m;var g=u._parserCallback;if(g&&u._parserState===T&&u._parserBuffers.length>1&&(x=Buffer.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==T&&(x=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=o,u._parserBuffers.splice(0),g){var y=[];x&&y.push(x),d&&y.push(d);var v=g.length>y.length;v&&y.push(h(m));var _=g.apply(u,y);if(!v||m===_)return m}}var c=h(function u(x,d,m,g){return x._parserBytesLeft<=0?g(new Error("got data but not currently parsing anything")):d.length<=x._parserBytesLeft?function(){return l(x,d,m,g)}:function(){var y=d.slice(0,x._parserBytesLeft);return l(x,y,m,function(v){return v?g(v):d.length>y.length?function(){return u(x,d.slice(y.length),m,g)}:void 0})}});function h(u){return function(){for(var x=u.apply(this,arguments);typeof x=="function";)x=x();return x}}},86844:function(X,I,e){var A=e(4168);function k(){var o;try{o=I.storage.debug}catch{}return!o&&A!==void 0&&"env"in A&&(o=A.env.DEBUG),o}(I=X.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},I.formatArgs=function(o){var T=this.useColors;if(o[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+o[0]+(T?"%c ":" ")+"+"+I.humanize(this.diff),T){var b="color: "+this.color;o.splice(1,0,b,"color: inherit");var p=0,s=0;o[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(p++,t==="%c"&&(s=p))}),o.splice(s,0,b)}},I.save=function(o){try{o==null?I.storage.removeItem("debug"):I.storage.debug=o}catch{}},I.load=k,I.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},I.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),I.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],I.formatters.j=function(o){try{return JSON.stringify(o)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},I.enable(k())},89416:function(X,I,e){var A;function k(o){function T(){if(T.enabled){var b=T,p=+new Date,s=p-(A||p);b.diff=s,b.prev=A,b.curr=p,A=p;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=I.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(r,a){if(r==="%%")return r;n++;var l=I.formatters[a];if(typeof l=="function"){var c=t[n];r=l.call(b,c),t.splice(n,1),n--}return r}),I.formatArgs.call(b,t),(T.log||I.log||console.log.bind(console)).apply(b,t)}}return T.namespace=o,T.enabled=I.enabled(o),T.useColors=I.useColors(),T.color=function(b){var p,s=0;for(p in b)s=(s<<5)-s+b.charCodeAt(p),s|=0;return I.colors[Math.abs(s)%I.colors.length]}(o),typeof I.init=="function"&&I.init(T),T}(I=X.exports=k.debug=k.default=k).coerce=function(o){return o instanceof Error?o.stack||o.message:o},I.disable=function(){I.enable("")},I.enable=function(o){I.save(o),I.names=[],I.skips=[];for(var T=(typeof o=="string"?o:"").split(/[\s,]+/),b=T.length,p=0;p<b;p++)T[p]&&((o=T[p].replace(/\*/g,".*?"))[0]==="-"?I.skips.push(new RegExp("^"+o.substr(1)+"$")):I.names.push(new RegExp("^"+o+"$")))},I.enabled=function(o){var T,b;for(T=0,b=I.skips.length;T<b;T++)if(I.skips[T].test(o))return!1;for(T=0,b=I.names.length;T<b;T++)if(I.names[T].test(o))return!0;return!1},I.humanize=e(93744),I.names=[],I.skips=[],I.formatters={}},93744:function(X){var I=1e3,e=60*I,A=60*e,k=24*A;function o(T,b,p){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+p:Math.ceil(T/b)+" "+p+"s"}X.exports=function(T,b){b=b||{};var p,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var n=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*k;case"hours":case"hour":case"hrs":case"hr":case"h":return n*A;case"minutes":case"minute":case"mins":case"min":case"m":return n*e;case"seconds":case"second":case"secs":case"sec":case"s":return n*I;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return b.long?o(p=T,k,"day")||o(p,A,"hour")||o(p,e,"minute")||o(p,I,"second")||p+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=A?Math.round(t/A)+"h":t>=e?Math.round(t/e)+"m":t>=I?Math.round(t/I)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(X,I,e){"use strict";var A=e(32868);X.exports=function(k,o,T){if(k==null)throw Error("First argument should be a string");if(o==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(r){return r.length===1&&(r+=r),r}));var b=A.parse(k,{flat:!0,brackets:T.ignore}),p=b[0].split(o);if(T.escape){for(var s=[],t=0;t<p.length;t++){var i=p[t],n=p[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(s.push(i+o+n),t++):s.push(i)}p=s}for(t=0;t<p.length;t++)b[0]=p[t],p[t]=A.stringify(b,{flat:!0});return p}},78484:function(X){"use strict";X.exports=function(I){for(var e=I.length,A=new Array(e),k=new Array(e),o=new Array(e),T=new Array(e),b=new Array(e),p=new Array(e),s=0;s<e;++s)A[s]=-1,k[s]=0,o[s]=!1,T[s]=0,b[s]=-1,p[s]=[];var t,i=0,n=[],r=[];function a(h){var u=[h],x=[h];for(A[h]=k[h]=i,o[h]=!0,i+=1;x.length>0;){h=x[x.length-1];var d=I[h];if(T[h]<d.length){for(var m=T[h];m<d.length;++m){var g=d[m];if(A[g]<0){A[g]=k[g]=i,o[g]=!0,i+=1,u.push(g),x.push(g);break}o[g]&&(k[h]=0|Math.min(k[h],k[g])),b[g]>=0&&p[h].push(b[g])}T[h]=m}else{if(k[h]===A[h]){var y=[],v=[],_=0;for(m=u.length-1;m>=0;--m){var f=u[m];if(o[f]=!1,y.push(f),v.push(p[f]),_+=p[f].length,b[f]=n.length,f===h){u.length=m;break}}n.push(y);var S=new Array(_);for(m=0;m<v.length;m++)for(var w=0;w<v[m].length;w++)S[--_]=v[m][w];r.push(S)}x.pop()}}}for(s=0;s<e;++s)A[s]<0&&a(s);for(s=0;s<r.length;s++){var l=r[s];if(l.length!==0){l.sort(function(h,u){return h-u}),t=[l[0]];for(var c=1;c<l.length;c++)l[c]!==l[c-1]&&t.push(l[c]);r[s]=t}}return{components:n,adjacencyList:r}}},92848:function(X,I,e){"use strict";e.r(I);var A=2*Math.PI,k=function(b,p,s,t,i,n,r){var a=b.x,l=b.y;return{x:t*(a*=p)-i*(l*=s)+n,y:i*a+t*l+r}},o=function(b,p){var s=p===1.5707963267948966?.551915024494:p===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(p/4),t=Math.cos(b),i=Math.sin(b),n=Math.cos(b+p),r=Math.sin(b+p);return[{x:t-i*s,y:i+t*s},{x:n+r*s,y:r-n*s},{x:n,y:r}]},T=function(b,p,s,t){var i=b*s+p*t;return i>1&&(i=1),i<-1&&(i=-1),(b*t-p*s<0?-1:1)*Math.acos(i)};I.default=function(b){var p=b.px,s=b.py,t=b.cx,i=b.cy,n=b.rx,r=b.ry,a=b.xAxisRotation,l=a===void 0?0:a,c=b.largeArcFlag,h=c===void 0?0:c,u=b.sweepFlag,x=u===void 0?0:u,d=[];if(n===0||r===0)return[];var m=Math.sin(l*A/360),g=Math.cos(l*A/360),y=g*(p-t)/2+m*(s-i)/2,v=-m*(p-t)/2+g*(s-i)/2;if(y===0&&v===0)return[];n=Math.abs(n),r=Math.abs(r);var _=Math.pow(y,2)/Math.pow(n,2)+Math.pow(v,2)/Math.pow(r,2);_>1&&(n*=Math.sqrt(_),r*=Math.sqrt(_));var f=function(D,N,W,F,j,q,te,ee,Q,J,K,Y){var ie=Math.pow(j,2),se=Math.pow(q,2),ae=Math.pow(K,2),ue=Math.pow(Y,2),ve=ie*se-ie*ue-se*ae;ve<0&&(ve=0),ve/=ie*ue+se*ae;var ye=(ve=Math.sqrt(ve)*(te===ee?-1:1))*j/q*Y,de=ve*-q/j*K,pe=J*ye-Q*de+(D+W)/2,ge=Q*ye+J*de+(N+F)/2,ke=(K-ye)/j,Ee=(Y-de)/q,me=(-K-ye)/j,oe=(-Y-de)/q,re=T(1,0,ke,Ee),fe=T(ke,Ee,me,oe);return ee===0&&fe>0&&(fe-=A),ee===1&&fe<0&&(fe+=A),[pe,ge,re,fe]}(p,s,t,i,n,r,h,x,m,g,y,v),S=function(D,N){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return function(W,F){var j=[],q=!0,te=!1,ee=void 0;try{for(var Q,J=W[Symbol.iterator]();!(q=(Q=J.next()).done)&&(j.push(Q.value),!F||j.length!==F);q=!0);}catch(K){te=!0,ee=K}finally{try{!q&&J.return&&J.return()}finally{if(te)throw ee}}return j}(D,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(f,4),w=S[0],E=S[1],P=S[2],C=S[3],O=Math.abs(C)/(A/4);Math.abs(1-O)<1e-7&&(O=1);var R=Math.max(Math.ceil(O),1);C/=R;for(var U=0;U<R;U++)d.push(o(P,C)),P+=C;return d.map(function(D){var N=k(D[0],n,r,g,m,w,E),W=N.x,F=N.y,j=k(D[1],n,r,g,m,w,E),q=j.x,te=j.y,ee=k(D[2],n,r,g,m,w,E);return{x1:W,y1:F,x2:q,y2:te,x:ee.x,y:ee.y}})}},74840:function(X,I,e){"use strict";var A=e(21984),k=e(49972),o=e(41976),T=e(53520),b=e(45408);X.exports=function(p){if(Array.isArray(p)&&p.length===1&&typeof p[0]=="string"&&(p=p[0]),typeof p=="string"&&(b(T(p),"String is not an SVG path."),p=A(p)),b(Array.isArray(p),"Argument should be a string or an array of path segments."),p=k(p),!(p=o(p)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,i=p.length;t<i;t++)for(var n=p[t].slice(1),r=0;r<n.length;r+=2)n[r+0]<s[0]&&(s[0]=n[r+0]),n[r+1]<s[1]&&(s[1]=n[r+1]),n[r+0]>s[2]&&(s[2]=n[r+0]),n[r+1]>s[3]&&(s[3]=n[r+1]);return s}},41976:function(X,I,e){"use strict";X.exports=function(T){for(var b,p=[],s=0,t=0,i=0,n=0,r=null,a=null,l=0,c=0,h=0,u=T.length;h<u;h++){var x=T[h],d=x[0];switch(d){case"M":i=x[1],n=x[2];break;case"A":var m=A({px:l,py:c,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!m.length)continue;for(var g,y=0;y<m.length;y++)x=["C",(g=m[y]).x1,g.y1,g.x2,g.y2,g.x,g.y],y<m.length-1&&p.push(x);break;case"S":var v=l,_=c;b!="C"&&b!="S"||(v+=v-s,_+=_-t),x=["C",v,_,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(r=2*l-r,a=2*c-a):(r=l,a=c),x=o(l,c,r,a,x[1],x[2]);break;case"Q":r=x[1],a=x[2],x=o(l,c,x[1],x[2],x[3],x[4]);break;case"L":x=k(l,c,x[1],x[2]);break;case"H":x=k(l,c,x[1],c);break;case"V":x=k(l,c,l,x[1]);break;case"Z":x=k(l,c,i,n)}b=d,l=x[x.length-2],c=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=l,t=c),p.push(x)}return p};var A=e(92848);function k(T,b,p,s){return["C",T,b,p,s,p,s]}function o(T,b,p,s,t,i){return["C",T/3+.6666666666666666*p,b/3+.6666666666666666*s,t/3+.6666666666666666*p,i/3+.6666666666666666*s,t,i]}},20472:function(X,I,e){"use strict";var A,k=e(74840),o=e(21984),T=e(22235),b=e(53520),p=e(29620),s=document.createElement("canvas"),t=s.getContext("2d");X.exports=function(i,n){if(!b(i))throw Error("Argument should be valid svg path string");var r,a;n||(n={}),n.shape?(r=n.shape[0],a=n.shape[1]):(r=s.width=n.w||n.width||200,a=s.height=n.h||n.height||200);var l=Math.min(r,a),c=n.stroke||0,h=n.viewbox||n.viewBox||k(i),u=[r/(h[2]-h[0]),a/(h[3]-h[1])],x=Math.min(u[0]||0,u[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,r,a),t.fillStyle="white",c&&(typeof c!="number"&&(c=1),t.strokeStyle=c>0?"white":"black",t.lineWidth=Math.abs(c)),t.translate(.5*r,.5*a),t.scale(x,x),function(){if(A!=null)return A;var g=document.createElement("canvas").getContext("2d");if(g.canvas.width=g.canvas.height=1,!window.Path2D)return A=!1;var y=new Path2D("M0,0h1v1h-1v-1Z");g.fillStyle="black",g.fill(y);var v=g.getImageData(0,0,1,1);return A=v&&v.data&&v.data[3]===255}()){var d=new Path2D(i);t.fill(d),c&&t.stroke(d)}else{var m=o(i);T(t,m),t.fill(),c&&t.stroke()}return t.setTransform(1,0,0,1,0,0),p(t,{cutoff:n.cutoff!=null?n.cutoff:.5,radius:n.radius!=null?n.radius:.5*l})}},49760:function(X,I,e){var A;(function(k){var o=/^\s+/,T=/\s+$/,b=0,p=k.round,s=k.min,t=k.max,i=k.random;function n(K,Y){if(Y=Y||{},(K=K||"")instanceof n)return K;if(!(this instanceof n))return new n(K,Y);var ie=function(se){var ae,ue,ve,ye={r:0,g:0,b:0},de=1,pe=null,ge=null,ke=null,Ee=!1,me=!1;return typeof se=="string"&&(se=function(oe){oe=oe.replace(o,"").replace(T,"").toLowerCase();var re,fe=!1;if(P[oe])oe=P[oe],fe=!0;else if(oe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(re=Q.rgb.exec(oe))?{r:re[1],g:re[2],b:re[3]}:(re=Q.rgba.exec(oe))?{r:re[1],g:re[2],b:re[3],a:re[4]}:(re=Q.hsl.exec(oe))?{h:re[1],s:re[2],l:re[3]}:(re=Q.hsla.exec(oe))?{h:re[1],s:re[2],l:re[3],a:re[4]}:(re=Q.hsv.exec(oe))?{h:re[1],s:re[2],v:re[3]}:(re=Q.hsva.exec(oe))?{h:re[1],s:re[2],v:re[3],a:re[4]}:(re=Q.hex8.exec(oe))?{r:D(re[1]),g:D(re[2]),b:D(re[3]),a:j(re[4]),format:fe?"name":"hex8"}:(re=Q.hex6.exec(oe))?{r:D(re[1]),g:D(re[2]),b:D(re[3]),format:fe?"name":"hex"}:(re=Q.hex4.exec(oe))?{r:D(re[1]+""+re[1]),g:D(re[2]+""+re[2]),b:D(re[3]+""+re[3]),a:j(re[4]+""+re[4]),format:fe?"name":"hex8"}:!!(re=Q.hex3.exec(oe))&&{r:D(re[1]+""+re[1]),g:D(re[2]+""+re[2]),b:D(re[3]+""+re[3]),format:fe?"name":"hex"}}(se)),typeof se=="object"&&(J(se.r)&&J(se.g)&&J(se.b)?(ae=se.r,ue=se.g,ve=se.b,ye={r:255*R(ae,255),g:255*R(ue,255),b:255*R(ve,255)},Ee=!0,me=String(se.r).substr(-1)==="%"?"prgb":"rgb"):J(se.h)&&J(se.s)&&J(se.v)?(pe=W(se.s),ge=W(se.v),ye=function(oe,re,fe){oe=6*R(oe,360),re=R(re,100),fe=R(fe,100);var Se=k.floor(oe),be=oe-Se,we=fe*(1-re),Me=fe*(1-be*re),Ie=fe*(1-(1-be)*re),Oe=Se%6;return{r:255*[fe,Me,we,we,Ie,fe][Oe],g:255*[Ie,fe,fe,Me,we,we][Oe],b:255*[we,we,Ie,fe,fe,Me][Oe]}}(se.h,pe,ge),Ee=!0,me="hsv"):J(se.h)&&J(se.s)&&J(se.l)&&(pe=W(se.s),ke=W(se.l),ye=function(oe,re,fe){var Se,be,we;function Me(he,_e,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?he+6*(_e-he)*Ae:Ae<.5?_e:Ae<2/3?he+(_e-he)*(2/3-Ae)*6:he}if(oe=R(oe,360),re=R(re,100),fe=R(fe,100),re===0)Se=be=we=fe;else{var Ie=fe<.5?fe*(1+re):fe+re-fe*re,Oe=2*fe-Ie;Se=Me(Oe,Ie,oe+1/3),be=Me(Oe,Ie,oe),we=Me(Oe,Ie,oe-1/3)}return{r:255*Se,g:255*be,b:255*we}}(se.h,pe,ke),Ee=!0,me="hsl"),se.hasOwnProperty("a")&&(de=se.a)),de=O(de),{ok:Ee,format:se.format||me,r:s(255,t(ye.r,0)),g:s(255,t(ye.g,0)),b:s(255,t(ye.b,0)),a:de}}(K);this._originalInput=K,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=p(100*this._a)/100,this._format=Y.format||ie.format,this._gradientType=Y.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=ie.ok,this._tc_id=b++}function r(K,Y,ie){K=R(K,255),Y=R(Y,255),ie=R(ie,255);var se,ae,ue=t(K,Y,ie),ve=s(K,Y,ie),ye=(ue+ve)/2;if(ue==ve)se=ae=0;else{var de=ue-ve;switch(ae=ye>.5?de/(2-ue-ve):de/(ue+ve),ue){case K:se=(Y-ie)/de+(Y<ie?6:0);break;case Y:se=(ie-K)/de+2;break;case ie:se=(K-Y)/de+4}se/=6}return{h:se,s:ae,l:ye}}function a(K,Y,ie){K=R(K,255),Y=R(Y,255),ie=R(ie,255);var se,ae,ue=t(K,Y,ie),ve=s(K,Y,ie),ye=ue,de=ue-ve;if(ae=ue===0?0:de/ue,ue==ve)se=0;else{switch(ue){case K:se=(Y-ie)/de+(Y<ie?6:0);break;case Y:se=(ie-K)/de+2;break;case ie:se=(K-Y)/de+4}se/=6}return{h:se,s:ae,v:ye}}function l(K,Y,ie,se){var ae=[N(p(K).toString(16)),N(p(Y).toString(16)),N(p(ie).toString(16))];return se&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function c(K,Y,ie,se){return[N(F(se)),N(p(K).toString(16)),N(p(Y).toString(16)),N(p(ie).toString(16))].join("")}function h(K,Y){Y=Y===0?0:Y||10;var ie=n(K).toHsl();return ie.s-=Y/100,ie.s=U(ie.s),n(ie)}function u(K,Y){Y=Y===0?0:Y||10;var ie=n(K).toHsl();return ie.s+=Y/100,ie.s=U(ie.s),n(ie)}function x(K){return n(K).desaturate(100)}function d(K,Y){Y=Y===0?0:Y||10;var ie=n(K).toHsl();return ie.l+=Y/100,ie.l=U(ie.l),n(ie)}function m(K,Y){Y=Y===0?0:Y||10;var ie=n(K).toRgb();return ie.r=t(0,s(255,ie.r-p(-Y/100*255))),ie.g=t(0,s(255,ie.g-p(-Y/100*255))),ie.b=t(0,s(255,ie.b-p(-Y/100*255))),n(ie)}function g(K,Y){Y=Y===0?0:Y||10;var ie=n(K).toHsl();return ie.l-=Y/100,ie.l=U(ie.l),n(ie)}function y(K,Y){var ie=n(K).toHsl(),se=(ie.h+Y)%360;return ie.h=se<0?360+se:se,n(ie)}function v(K){var Y=n(K).toHsl();return Y.h=(Y.h+180)%360,n(Y)}function _(K){var Y=n(K).toHsl(),ie=Y.h;return[n(K),n({h:(ie+120)%360,s:Y.s,l:Y.l}),n({h:(ie+240)%360,s:Y.s,l:Y.l})]}function f(K){var Y=n(K).toHsl(),ie=Y.h;return[n(K),n({h:(ie+90)%360,s:Y.s,l:Y.l}),n({h:(ie+180)%360,s:Y.s,l:Y.l}),n({h:(ie+270)%360,s:Y.s,l:Y.l})]}function S(K){var Y=n(K).toHsl(),ie=Y.h;return[n(K),n({h:(ie+72)%360,s:Y.s,l:Y.l}),n({h:(ie+216)%360,s:Y.s,l:Y.l})]}function w(K,Y,ie){Y=Y||6,ie=ie||30;var se=n(K).toHsl(),ae=360/ie,ue=[n(K)];for(se.h=(se.h-(ae*Y>>1)+720)%360;--Y;)se.h=(se.h+ae)%360,ue.push(n(se));return ue}function E(K,Y){Y=Y||6;for(var ie=n(K).toHsv(),se=ie.h,ae=ie.s,ue=ie.v,ve=[],ye=1/Y;Y--;)ve.push(n({h:se,s:ae,v:ue})),ue=(ue+ye)%1;return ve}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var K=this.toRgb();return(299*K.r+587*K.g+114*K.b)/1e3},getLuminance:function(){var K,Y,ie,se=this.toRgb();return K=se.r/255,Y=se.g/255,ie=se.b/255,.2126*(K<=.03928?K/12.92:k.pow((K+.055)/1.055,2.4))+.7152*(Y<=.03928?Y/12.92:k.pow((Y+.055)/1.055,2.4))+.0722*(ie<=.03928?ie/12.92:k.pow((ie+.055)/1.055,2.4))},setAlpha:function(K){return this._a=O(K),this._roundA=p(100*this._a)/100,this},toHsv:function(){var K=a(this._r,this._g,this._b);return{h:360*K.h,s:K.s,v:K.v,a:this._a}},toHsvString:function(){var K=a(this._r,this._g,this._b),Y=p(360*K.h),ie=p(100*K.s),se=p(100*K.v);return this._a==1?"hsv("+Y+", "+ie+"%, "+se+"%)":"hsva("+Y+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHsl:function(){var K=r(this._r,this._g,this._b);return{h:360*K.h,s:K.s,l:K.l,a:this._a}},toHslString:function(){var K=r(this._r,this._g,this._b),Y=p(360*K.h),ie=p(100*K.s),se=p(100*K.l);return this._a==1?"hsl("+Y+", "+ie+"%, "+se+"%)":"hsla("+Y+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHex:function(K){return l(this._r,this._g,this._b,K)},toHexString:function(K){return"#"+this.toHex(K)},toHex8:function(K){return function(Y,ie,se,ae,ue){var ve=[N(p(Y).toString(16)),N(p(ie).toString(16)),N(p(se).toString(16)),N(F(ae))];return ue&&ve[0].charAt(0)==ve[0].charAt(1)&&ve[1].charAt(0)==ve[1].charAt(1)&&ve[2].charAt(0)==ve[2].charAt(1)&&ve[3].charAt(0)==ve[3].charAt(1)?ve[0].charAt(0)+ve[1].charAt(0)+ve[2].charAt(0)+ve[3].charAt(0):ve.join("")}(this._r,this._g,this._b,this._a,K)},toHex8String:function(K){return"#"+this.toHex8(K)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*R(this._r,255))+"%",g:p(100*R(this._g,255))+"%",b:p(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+p(100*R(this._r,255))+"%, "+p(100*R(this._g,255))+"%, "+p(100*R(this._b,255))+"%)":"rgba("+p(100*R(this._r,255))+"%, "+p(100*R(this._g,255))+"%, "+p(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(K){var Y="#"+c(this._r,this._g,this._b,this._a),ie=Y,se=this._gradientType?"GradientType = 1, ":"";if(K){var ae=n(K);ie="#"+c(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+se+"startColorstr="+Y+",endColorstr="+ie+")"},toString:function(K){var Y=!!K;K=K||this._format;var ie=!1,se=this._a<1&&this._a>=0;return Y||!se||K!=="hex"&&K!=="hex6"&&K!=="hex3"&&K!=="hex4"&&K!=="hex8"&&K!=="name"?(K==="rgb"&&(ie=this.toRgbString()),K==="prgb"&&(ie=this.toPercentageRgbString()),K!=="hex"&&K!=="hex6"||(ie=this.toHexString()),K==="hex3"&&(ie=this.toHexString(!0)),K==="hex4"&&(ie=this.toHex8String(!0)),K==="hex8"&&(ie=this.toHex8String()),K==="name"&&(ie=this.toName()),K==="hsl"&&(ie=this.toHslString()),K==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString()):K==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(K,Y){var ie=K.apply(null,[this].concat([].slice.call(Y)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(K,Y){return K.apply(null,[this].concat([].slice.call(Y)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(f,arguments)}},n.fromRatio=function(K,Y){if(typeof K=="object"){var ie={};for(var se in K)K.hasOwnProperty(se)&&(ie[se]=se==="a"?K[se]:W(K[se]));K=ie}return n(K,Y)},n.equals=function(K,Y){return!(!K||!Y)&&n(K).toRgbString()==n(Y).toRgbString()},n.random=function(){return n.fromRatio({r:i(),g:i(),b:i()})},n.mix=function(K,Y,ie){ie=ie===0?0:ie||50;var se=n(K).toRgb(),ae=n(Y).toRgb(),ue=ie/100;return n({r:(ae.r-se.r)*ue+se.r,g:(ae.g-se.g)*ue+se.g,b:(ae.b-se.b)*ue+se.b,a:(ae.a-se.a)*ue+se.a})},n.readability=function(K,Y){var ie=n(K),se=n(Y);return(k.max(ie.getLuminance(),se.getLuminance())+.05)/(k.min(ie.getLuminance(),se.getLuminance())+.05)},n.isReadable=function(K,Y,ie){var se,ae,ue,ve,ye,de=n.readability(K,Y);switch(ae=!1,(ue=ie,(ve=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ve!=="AAA"&&(ve="AA"),(ye=(ue.size||"small").toLowerCase())!=="small"&&ye!=="large"&&(ye="small"),se={level:ve,size:ye}).level+se.size){case"AAsmall":case"AAAlarge":ae=de>=4.5;break;case"AAlarge":ae=de>=3;break;case"AAAsmall":ae=de>=7}return ae},n.mostReadable=function(K,Y,ie){var se,ae,ue,ve,ye=null,de=0;ae=(ie=ie||{}).includeFallbackColors,ue=ie.level,ve=ie.size;for(var pe=0;pe<Y.length;pe++)(se=n.readability(K,Y[pe]))>de&&(de=se,ye=n(Y[pe]));return n.isReadable(K,ye,{level:ue,size:ve})||!ae?ye:(ie.includeFallbackColors=!1,n.mostReadable(K,["#fff","#000"],ie))};var P=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=n.hexNames=function(K){var Y={};for(var ie in K)K.hasOwnProperty(ie)&&(Y[K[ie]]=ie);return Y}(P);function O(K){return K=parseFloat(K),(isNaN(K)||K<0||K>1)&&(K=1),K}function R(K,Y){(function(se){return typeof se=="string"&&se.indexOf(".")!=-1&&parseFloat(se)===1})(K)&&(K="100%");var ie=function(se){return typeof se=="string"&&se.indexOf("%")!=-1}(K);return K=s(Y,t(0,parseFloat(K))),ie&&(K=parseInt(K*Y,10)/100),k.abs(K-Y)<1e-6?1:K%Y/parseFloat(Y)}function U(K){return s(1,t(0,K))}function D(K){return parseInt(K,16)}function N(K){return K.length==1?"0"+K:""+K}function W(K){return K<=1&&(K=100*K+"%"),K}function F(K){return k.round(255*parseFloat(K)).toString(16)}function j(K){return D(K)/255}var q,te,ee,Q=(te="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",ee="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+ee),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+ee),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+ee),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function J(K){return!!Q.CSS_UNIT.exec(K)}X.exports?X.exports=n:(A=(function(){return n}).call(I,e,I,X))===void 0||(X.exports=A)})(Math)},37816:function(X){"use strict";X.exports=e,X.exports.float32=X.exports.float=e,X.exports.fract32=X.exports.fract=function(A,k){if(A.length){if(A instanceof Float32Array)return new Float32Array(A.length);k instanceof Float32Array||(k=e(A));for(var o=0,T=k.length;o<T;o++)k[o]=A[o]-k[o];return k}return e(A-e(A))};var I=new Float32Array(1);function e(A){return A.length?A instanceof Float32Array?A:new Float32Array(A):(I[0]=A,I[0])}},23464:function(X,I,e){"use strict";var A=e(65819);X.exports=T;var k=96;function o(b,p){var s=A(getComputedStyle(b).getPropertyValue(p));return s[0]*T(s[1],b)}function T(b,p){switch(p=p||document.body,b=(b||"px").trim().toLowerCase(),p!==window&&p!==document||(p=document.body),b){case"%":return p.clientHeight/100;case"ch":case"ex":return function(s,t){var i=document.createElement("div");i.style["font-size"]="128"+s,t.appendChild(i);var n=o(i,"font-size")/128;return t.removeChild(i),n}(b,p);case"em":return o(p,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(X,I,e){"use strict";function A(T){return T}function k(T,b){return typeof b=="string"&&(b=T.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(p){return o(T,p)})}:o(T,b)}function o(T,b){var p=b.id,s=b.bbox,t=b.properties==null?{}:b.properties,i=function(n,r){var a=function(m){if(m==null)return A;var g,y,v=m.scale[0],_=m.scale[1],f=m.translate[0],S=m.translate[1];return function(w,E){E||(g=y=0);var P=2,C=w.length,O=new Array(C);for(O[0]=(g+=w[0])*v+f,O[1]=(y+=w[1])*_+S;P<C;)O[P]=w[P],++P;return O}}(n.transform),l=n.arcs;function c(m,g){g.length&&g.pop();for(var y=l[m<0?~m:m],v=0,_=y.length;v<_;++v)g.push(a(y[v],v));m<0&&function(f,S){for(var w,E=f.length,P=E-S;P<--E;)w=f[P],f[P++]=f[E],f[E]=w}(g,_)}function h(m){return a(m)}function u(m){for(var g=[],y=0,v=m.length;y<v;++y)c(m[y],g);return g.length<2&&g.push(g[0]),g}function x(m){for(var g=u(m);g.length<4;)g.push(g[0]);return g}function d(m){return m.map(x)}return function m(g){var y,v=g.type;switch(v){case"GeometryCollection":return{type:v,geometries:g.geometries.map(m)};case"Point":y=h(g.coordinates);break;case"MultiPoint":y=g.coordinates.map(h);break;case"LineString":y=u(g.arcs);break;case"MultiLineString":y=g.arcs.map(u);break;case"Polygon":y=d(g.arcs);break;case"MultiPolygon":y=g.arcs.map(d);break;default:return null}return{type:v,coordinates:y}}(r)}(T,b);return p==null&&s==null?{type:"Feature",properties:t,geometry:i}:s==null?{type:"Feature",id:p,properties:t,geometry:i}:{type:"Feature",id:p,bbox:s,properties:t,geometry:i}}e.d(I,{NO:function(){return k}})},73384:function(X,I,e){"use strict";var A=e(54612);X.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!A(k)}},57980:function(X,I,e){"use strict";var A=e(81680),k=e(7328),o=e(33940),T=e(18856),b=function(p,s){return p.replace("%v",T(s))};X.exports=function(p,s,t){if(!k(t))throw new TypeError(b(s,p));if(!A(p)){if("default"in t)return t.default;if(t.isOptional)return null}var i=o(t.errorMessage);throw A(i)||(i=s),new TypeError(b(i,p))}},32336:function(X){"use strict";X.exports=function(I){try{return I.toString()}catch{try{return String(I)}catch{return null}}}},18856:function(X,I,e){"use strict";var A=e(32336),k=/[\n\r\u2028\u2029]/g;X.exports=function(o){var T=A(o);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(X,I,e){"use strict";var A=e(81680),k={object:!0,function:!0,undefined:!0};X.exports=function(o){return!!A(o)&&hasOwnProperty.call(k,typeof o)}},87396:function(X,I,e){"use strict";var A=e(57980),k=e(85488);X.exports=function(o){return k(o)?o:A(o,"%v is not a plain function",arguments[1])}},85488:function(X,I,e){"use strict";var A=e(73384),k=/^\s*class[\s{/}]/,o=Function.prototype.toString;X.exports=function(T){return!!A(T)&&!k.test(o.call(T))}},54612:function(X,I,e){"use strict";var A=e(7328);X.exports=function(k){if(!A(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},33940:function(X,I,e){"use strict";var A=e(81680),k=e(7328),o=Object.prototype.toString;X.exports=function(T){if(!A(T))return null;if(k(T)){var b=T.toString;if(typeof b!="function"||b===o)return null}try{return""+T}catch{return null}}},18496:function(X,I,e){"use strict";var A=e(57980),k=e(81680);X.exports=function(o){return k(o)?o:A(o,"Cannot use %v",arguments[1])}},81680:function(X){"use strict";X.exports=function(I){return I!=null}},14144:function(X,I,e){"use strict";var A=e(308),k=e(10352),o=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",p=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,i=s.BUFFER;function n(S){if(S){var w=S.length||S.byteLength,E=A.log2(w);t[E].push(S)}}function r(S){S=A.nextPow2(S);var w=A.log2(S),E=t[w];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(r(S),0,S)}function l(S){return new Uint16Array(r(2*S),0,S)}function c(S){return new Uint32Array(r(4*S),0,S)}function h(S){return new Int8Array(r(S),0,S)}function u(S){return new Int16Array(r(2*S),0,S)}function x(S){return new Int32Array(r(4*S),0,S)}function d(S){return new Float32Array(r(4*S),0,S)}function m(S){return new Float64Array(r(8*S),0,S)}function g(S){return T?new Uint8ClampedArray(r(S),0,S):a(S)}function y(S){return b?new BigUint64Array(r(8*S),0,S):null}function v(S){return p?new BigInt64Array(r(8*S),0,S):null}function _(S){return new DataView(r(S),0,S)}function f(S){S=A.nextPow2(S);var w=A.log2(S),E=i[w];return E.length>0?E.pop():new o(S)}I.free=function(S){if(o.isBuffer(S))i[A.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var w=S.length||S.byteLength,E=0|A.log2(w);t[E].push(S)}},I.freeUint8=I.freeUint16=I.freeUint32=I.freeBigUint64=I.freeInt8=I.freeInt16=I.freeInt32=I.freeBigInt64=I.freeFloat32=I.freeFloat=I.freeFloat64=I.freeDouble=I.freeUint8Clamped=I.freeDataView=function(S){n(S.buffer)},I.freeArrayBuffer=n,I.freeBuffer=function(S){i[A.log2(S.length)].push(S)},I.malloc=function(S,w){if(w===void 0||w==="arraybuffer")return r(S);switch(w){case"uint8":return a(S);case"uint16":return l(S);case"uint32":return c(S);case"int8":return h(S);case"int16":return u(S);case"int32":return x(S);case"float":case"float32":return d(S);case"double":case"float64":return m(S);case"uint8_clamped":return g(S);case"bigint64":return v(S);case"biguint64":return y(S);case"buffer":return f(S);case"data":case"dataview":return _(S);default:return null}return null},I.mallocArrayBuffer=r,I.mallocUint8=a,I.mallocUint16=l,I.mallocUint32=c,I.mallocInt8=h,I.mallocInt16=u,I.mallocInt32=x,I.mallocFloat32=I.mallocFloat=d,I.mallocFloat64=I.mallocDouble=m,I.mallocUint8Clamped=g,I.mallocBigUint64=y,I.mallocBigInt64=v,I.mallocDataView=_,I.mallocBuffer=f,I.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},92384:function(X){var I=/[\'\"]/;X.exports=function(e){return e?(I.test(e.charAt(0))&&(e=e.substr(1)),I.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(X){"use strict";X.exports=function(I,e,A){Array.isArray(A)||(A=[].slice.call(arguments,2));for(var k=0,o=A.length;k<o;k++){var T=A[k];for(var b in T)if((e[b]===void 0||Array.isArray(e[b])||I[b]!==e[b])&&b in e){var p;if(T[b]===!0)p=e[b];else if(T[b]===!1||typeof T[b]=="function"&&(p=T[b](e[b],I,e))===void 0)continue;I[b]=p}}return I}},96656:function(X,I,e){function A(k){try{if(!e.g.localStorage)return!1}catch{return!1}var o=e.g.localStorage[k];return o!=null&&String(o).toLowerCase()==="true"}X.exports=function(k,o){if(A("noDeprecation"))return k;var T=!1;return function(){if(!T){if(A("throwDeprecation"))throw new Error(o);A("traceDeprecation")?console.trace(o):console.warn(o),T=!0}return k.apply(this,arguments)}}},75272:function(X){X.exports=function(I){return I&&typeof I=="object"&&typeof I.copy=="function"&&typeof I.fill=="function"&&typeof I.readUInt8=="function"}},41088:function(X,I,e){"use strict";var A=e(91148),k=e(84420),o=e(96632),T=e(7728);function b(R){return R.call.bind(R)}var p=typeof BigInt<"u",s=typeof Symbol<"u",t=b(Object.prototype.toString),i=b(Number.prototype.valueOf),n=b(String.prototype.valueOf),r=b(Boolean.prototype.valueOf);if(p)var a=b(BigInt.prototype.valueOf);if(s)var l=b(Symbol.prototype.valueOf);function c(R,U){if(typeof R!="object")return!1;try{return U(R),!0}catch{return!1}}function h(R){return t(R)==="[object Map]"}function u(R){return t(R)==="[object Set]"}function x(R){return t(R)==="[object WeakMap]"}function d(R){return t(R)==="[object WeakSet]"}function m(R){return t(R)==="[object ArrayBuffer]"}function g(R){return typeof ArrayBuffer<"u"&&(m.working?m(R):R instanceof ArrayBuffer)}function y(R){return t(R)==="[object DataView]"}function v(R){return typeof DataView<"u"&&(y.working?y(R):R instanceof DataView)}I.isArgumentsObject=A,I.isGeneratorFunction=k,I.isTypedArray=T,I.isPromise=function(R){return typeof Promise<"u"&&R instanceof Promise||R!==null&&typeof R=="object"&&typeof R.then=="function"&&typeof R.catch=="function"},I.isArrayBufferView=function(R){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(R):T(R)||v(R)},I.isUint8Array=function(R){return o(R)==="Uint8Array"},I.isUint8ClampedArray=function(R){return o(R)==="Uint8ClampedArray"},I.isUint16Array=function(R){return o(R)==="Uint16Array"},I.isUint32Array=function(R){return o(R)==="Uint32Array"},I.isInt8Array=function(R){return o(R)==="Int8Array"},I.isInt16Array=function(R){return o(R)==="Int16Array"},I.isInt32Array=function(R){return o(R)==="Int32Array"},I.isFloat32Array=function(R){return o(R)==="Float32Array"},I.isFloat64Array=function(R){return o(R)==="Float64Array"},I.isBigInt64Array=function(R){return o(R)==="BigInt64Array"},I.isBigUint64Array=function(R){return o(R)==="BigUint64Array"},h.working=typeof Map<"u"&&h(new Map),I.isMap=function(R){return typeof Map<"u"&&(h.working?h(R):R instanceof Map)},u.working=typeof Set<"u"&&u(new Set),I.isSet=function(R){return typeof Set<"u"&&(u.working?u(R):R instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),I.isWeakMap=function(R){return typeof WeakMap<"u"&&(x.working?x(R):R instanceof WeakMap)},d.working=typeof WeakSet<"u"&&d(new WeakSet),I.isWeakSet=function(R){return d(R)},m.working=typeof ArrayBuffer<"u"&&m(new ArrayBuffer),I.isArrayBuffer=g,y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&y(new DataView(new ArrayBuffer(1),0,1)),I.isDataView=v;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function f(R){return t(R)==="[object SharedArrayBuffer]"}function S(R){return _!==void 0&&(f.working===void 0&&(f.working=f(new _)),f.working?f(R):R instanceof _)}function w(R){return c(R,i)}function E(R){return c(R,n)}function P(R){return c(R,r)}function C(R){return p&&c(R,a)}function O(R){return s&&c(R,l)}I.isSharedArrayBuffer=S,I.isAsyncFunction=function(R){return t(R)==="[object AsyncFunction]"},I.isMapIterator=function(R){return t(R)==="[object Map Iterator]"},I.isSetIterator=function(R){return t(R)==="[object Set Iterator]"},I.isGeneratorObject=function(R){return t(R)==="[object Generator]"},I.isWebAssemblyCompiledModule=function(R){return t(R)==="[object WebAssembly.Module]"},I.isNumberObject=w,I.isStringObject=E,I.isBooleanObject=P,I.isBigIntObject=C,I.isSymbolObject=O,I.isBoxedPrimitive=function(R){return w(R)||E(R)||P(R)||C(R)||O(R)},I.isAnyArrayBuffer=function(R){return typeof Uint8Array<"u"&&(g(R)||S(R))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(R){Object.defineProperty(I,R,{enumerable:!1,value:function(){throw new Error(R+" is not supported in userland")}})})},35840:function(X,I,e){var A=e(4168),k=Object.getOwnPropertyDescriptors||function(O){for(var R=Object.keys(O),U={},D=0;D<R.length;D++)U[R[D]]=Object.getOwnPropertyDescriptor(O,R[D]);return U},o=/%[sdj%]/g;I.format=function(O){if(!x(O)){for(var R=[],U=0;U<arguments.length;U++)R.push(s(arguments[U]));return R.join(" ")}U=1;for(var D=arguments,N=D.length,W=String(O).replace(o,function(j){if(j==="%%")return"%";if(U>=N)return j;switch(j){case"%s":return String(D[U++]);case"%d":return Number(D[U++]);case"%j":try{return JSON.stringify(D[U++])}catch{return"[Circular]"}default:return j}}),F=D[U];U<N;F=D[++U])h(F)||!g(F)?W+=" "+F:W+=" "+s(F);return W},I.deprecate=function(O,R){if(A!==void 0&&A.noDeprecation===!0)return O;if(A===void 0)return function(){return I.deprecate(O,R).apply(this,arguments)};var U=!1;return function(){if(!U){if(A.throwDeprecation)throw new Error(R);A.traceDeprecation?console.trace(R):console.error(R),U=!0}return O.apply(this,arguments)}};var T={},b=/^$/;if(A.env.NODE_DEBUG){var p=A.env.NODE_DEBUG;p=p.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+p+"$","i")}function s(O,R){var U={seen:[],stylize:i};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),c(R)?U.showHidden=R:R&&I._extend(U,R),d(U.showHidden)&&(U.showHidden=!1),d(U.depth)&&(U.depth=2),d(U.colors)&&(U.colors=!1),d(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=t),n(U,O,U.depth)}function t(O,R){var U=s.styles[R];return U?"\x1B["+s.colors[U][0]+"m"+O+"\x1B["+s.colors[U][1]+"m":O}function i(O,R){return O}function n(O,R,U){if(O.customInspect&&R&&_(R.inspect)&&R.inspect!==I.inspect&&(!R.constructor||R.constructor.prototype!==R)){var D=R.inspect(U,O);return x(D)||(D=n(O,D,U)),D}var N=function(J,K){if(d(K))return J.stylize("undefined","undefined");if(x(K)){var Y="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return J.stylize(Y,"string")}return u(K)?J.stylize(""+K,"number"):c(K)?J.stylize(""+K,"boolean"):h(K)?J.stylize("null","null"):void 0}(O,R);if(N)return N;var W=Object.keys(R),F=function(J){var K={};return J.forEach(function(Y,ie){K[Y]=!0}),K}(W);if(O.showHidden&&(W=Object.getOwnPropertyNames(R)),v(R)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return r(R);if(W.length===0){if(_(R)){var j=R.name?": "+R.name:"";return O.stylize("[Function"+j+"]","special")}if(m(R))return O.stylize(RegExp.prototype.toString.call(R),"regexp");if(y(R))return O.stylize(Date.prototype.toString.call(R),"date");if(v(R))return r(R)}var q,te="",ee=!1,Q=["{","}"];return l(R)&&(ee=!0,Q=["[","]"]),_(R)&&(te=" [Function"+(R.name?": "+R.name:"")+"]"),m(R)&&(te=" "+RegExp.prototype.toString.call(R)),y(R)&&(te=" "+Date.prototype.toUTCString.call(R)),v(R)&&(te=" "+r(R)),W.length!==0||ee&&R.length!=0?U<0?m(R)?O.stylize(RegExp.prototype.toString.call(R),"regexp"):O.stylize("[Object]","special"):(O.seen.push(R),q=ee?function(J,K,Y,ie,se){for(var ae=[],ue=0,ve=K.length;ue<ve;++ue)E(K,String(ue))?ae.push(a(J,K,Y,ie,String(ue),!0)):ae.push("");return se.forEach(function(ye){ye.match(/^\d+$/)||ae.push(a(J,K,Y,ie,ye,!0))}),ae}(O,R,U,F,W):W.map(function(J){return a(O,R,U,F,J,ee)}),O.seen.pop(),function(J,K,Y){return J.reduce(function(ie,se){return se.indexOf(`
`),ie+se.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Y[0]+(K===""?"":K+`
 `)+" "+J.join(`,
  `)+" "+Y[1]:Y[0]+K+" "+J.join(", ")+" "+Y[1]}(q,te,Q)):Q[0]+te+Q[1]}function r(O){return"["+Error.prototype.toString.call(O)+"]"}function a(O,R,U,D,N,W){var F,j,q;if((q=Object.getOwnPropertyDescriptor(R,N)||{value:R[N]}).get?j=q.set?O.stylize("[Getter/Setter]","special"):O.stylize("[Getter]","special"):q.set&&(j=O.stylize("[Setter]","special")),E(D,N)||(F="["+N+"]"),j||(O.seen.indexOf(q.value)<0?(j=h(U)?n(O,q.value,null):n(O,q.value,U-1)).indexOf(`
`)>-1&&(j=W?j.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+j.split(`
`).map(function(te){return"   "+te}).join(`
`)):j=O.stylize("[Circular]","special")),d(F)){if(W&&N.match(/^\d+$/))return j;(F=JSON.stringify(""+N)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=O.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=O.stylize(F,"string"))}return F+": "+j}function l(O){return Array.isArray(O)}function c(O){return typeof O=="boolean"}function h(O){return O===null}function u(O){return typeof O=="number"}function x(O){return typeof O=="string"}function d(O){return O===void 0}function m(O){return g(O)&&f(O)==="[object RegExp]"}function g(O){return typeof O=="object"&&O!==null}function y(O){return g(O)&&f(O)==="[object Date]"}function v(O){return g(O)&&(f(O)==="[object Error]"||O instanceof Error)}function _(O){return typeof O=="function"}function f(O){return Object.prototype.toString.call(O)}function S(O){return O<10?"0"+O.toString(10):O.toString(10)}I.debuglog=function(O){if(O=O.toUpperCase(),!T[O])if(b.test(O)){var R=A.pid;T[O]=function(){var U=I.format.apply(I,arguments);console.error("%s %d: %s",O,R,U)}}else T[O]=function(){};return T[O]},I.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},I.types=e(41088),I.isArray=l,I.isBoolean=c,I.isNull=h,I.isNullOrUndefined=function(O){return O==null},I.isNumber=u,I.isString=x,I.isSymbol=function(O){return typeof O=="symbol"},I.isUndefined=d,I.isRegExp=m,I.types.isRegExp=m,I.isObject=g,I.isDate=y,I.types.isDate=y,I.isError=v,I.types.isNativeError=v,I.isFunction=_,I.isPrimitive=function(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||O===void 0},I.isBuffer=e(75272);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(O,R){return Object.prototype.hasOwnProperty.call(O,R)}I.log=function(){var O,R;console.log("%s - %s",(R=[S((O=new Date).getHours()),S(O.getMinutes()),S(O.getSeconds())].join(":"),[O.getDate(),w[O.getMonth()],R].join(" ")),I.format.apply(I,arguments))},I.inherits=e(6768),I._extend=function(O,R){if(!R||!g(R))return O;for(var U=Object.keys(R),D=U.length;D--;)O[U[D]]=R[U[D]];return O};var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function C(O,R){if(!O){var U=new Error("Promise was rejected with a falsy value");U.reason=O,O=U}return R(O)}I.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&O[P]){var R;if(typeof(R=O[P])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(R,P,{value:R,enumerable:!1,writable:!1,configurable:!0}),R}function R(){for(var U,D,N=new Promise(function(j,q){U=j,D=q}),W=[],F=0;F<arguments.length;F++)W.push(arguments[F]);W.push(function(j,q){j?D(j):U(q)});try{O.apply(this,W)}catch(j){D(j)}return N}return Object.setPrototypeOf(R,Object.getPrototypeOf(O)),P&&Object.defineProperty(R,P,{value:R,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(R,k(O))},I.promisify.custom=P,I.callbackify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function R(){for(var U=[],D=0;D<arguments.length;D++)U.push(arguments[D]);var N=U.pop();if(typeof N!="function")throw new TypeError("The last argument must be of type Function");var W=this,F=function(){return N.apply(W,arguments)};O.apply(this,U).then(function(j){A.nextTick(F.bind(null,null,j))},function(j){A.nextTick(C.bind(null,j,F))})}return Object.setPrototypeOf(R,Object.getPrototypeOf(O)),Object.defineProperties(R,k(O)),R}},5408:function(X,I,e){var A=e(13380);X.exports=function(k){return A("webgl",k)}},96632:function(X,I,e){"use strict";var A=e(46492),k=e(63436),o=e(57916),T=e(99676),b=e(2304),p=T("Object.prototype.toString"),s=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,i=k(),n=T("String.prototype.slice"),r=Object.getPrototypeOf,a=T("Array.prototype.indexOf",!0)||function(c,h){for(var u=0;u<c.length;u+=1)if(c[u]===h)return u;return-1},l={__proto__:null};A(i,s&&b&&r?function(c){var h=new t[c];if(Symbol.toStringTag in h){var u=r(h),x=b(u,Symbol.toStringTag);if(!x){var d=r(u);x=b(d,Symbol.toStringTag)}l["$"+c]=o(x.get)}}:function(c){var h=new t[c],u=h.slice||h.set;u&&(l["$"+c]=o(u))}),X.exports=function(c){if(!c||typeof c!="object")return!1;if(!s){var h=n(p(c),8,-1);return a(i,h)>-1?h:h==="Object"&&function(u){var x=!1;return A(l,function(d,m){if(!x)try{d(u),x=n(m,1)}catch{}}),x}(c)}return b?function(u){var x=!1;return A(l,function(d,m){if(!x)try{"$"+d(u)===m&&(x=n(m,1))}catch{}}),x}(c):null}},67020:function(X,I,e){var A=e(38700),k=e(50896),o=A.instance();function T(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}T.prototype=new A.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,a){if(typeof r=="string"){var l=r.match(p);return l?l[0]:""}var c=this._validateYear(r),h=r.month(),u=""+this.toChineseMonth(c,h);return a&&u.length<2&&(u="0"+u),this.isIntercalaryMonth(c,h)&&(u+="i"),u},monthNames:function(r){if(typeof r=="string"){var a=r.match(s);return a?a[0]:""}var l=this._validateYear(r),c=r.month(),h=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(h="\u95F0"+h),h},monthNamesShort:function(r){if(typeof r=="string"){var a=r.match(t);return a?a[0]:""}var l=this._validateYear(r),c=r.month(),h=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(h="\u95F0"+h),h},parseMonth:function(r,a){r=this._validateYear(r);var l,c=parseInt(a);if(isNaN(c))a[0]==="\u95F0"&&(l=!0,a=a.substring(1)),a[a.length-1]==="\u6708"&&(a=a.substring(0,a.length-1)),c=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(a);else{var h=a[a.length-1];l=h==="i"||h==="I"}return this.toMonthIndex(r,c,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,a){if(r.year&&(r=r.year()),typeof r!="number"||r<1888||r>2111)throw a.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,a,l){var c=this.intercalaryMonth(r);if(l&&a!==c||a<1||a>12)throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!l&&a<=c?a-1:a:a-1},toChineseMonth:function(r,a){r.year&&(a=(r=r.year()).month());var l=this.intercalaryMonth(r);if(a<0||a>(l?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?a<l?a+1:a:a+1},intercalaryMonth:function(r){return r=this._validateYear(r),i[r-i[0]]>>13},isIntercalaryMonth:function(r,a){r.year&&(a=(r=r.year()).month());var l=this.intercalaryMonth(r);return!!l&&l===a},leapYear:function(r){return this.intercalaryMonth(r)!==0},weekOfYear:function(r,a,l){var c,h=this._validateYear(r,A.local.invalidyear),u=n[h-n[0]],x=u>>9&4095,d=u>>5&15,m=31&u;(c=o.newDate(x,d,m)).add(4-(c.dayOfWeek()||7),"d");var g=this.toJD(r,a,l)-c.toJD();return 1+Math.floor(g/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,a){r.year&&(a=r.month(),r=r.year()),r=this._validateYear(r);var l=i[r-i[0]];if(a>(l>>13?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-a?30:29},weekDay:function(r,a,l){return(this.dayOfWeek(r,a,l)||7)<6},toJD:function(r,a,l){var c=this._validate(r,u,l,A.local.invalidDate);r=this._validateYear(c.year()),a=c.month(),l=c.day();var h=this.isIntercalaryMonth(r,a),u=this.toChineseMonth(r,a),x=function(d,m,g,y,v){var _,f,S;if(typeof d=="object")f=d,_=m||{};else{var w;if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof m=="number"&&m>=1&&m<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof g=="number"&&g>=1&&g<=30))throw new Error("Lunar day outside range 1 - 30");typeof y=="object"?(w=!1,_=y):(w=!!y,_={}),f={year:d,month:m,day:g,isIntercalary:w}}S=f.day-1;var E,P=i[f.year-i[0]],C=P>>13;E=C&&(f.month>C||f.isIntercalary)?f.month:f.month-1;for(var O=0;O<E;O++)S+=P&1<<12-O?30:29;var R=n[f.year-n[0]],U=new Date(R>>9&4095,(R>>5&15)-1,(31&R)+S);return _.year=U.getFullYear(),_.month=1+U.getMonth(),_.day=U.getDate(),_}(r,u,l,h);return o.toJD(x.year,x.month,x.day)},fromJD:function(r){var a=o.fromJD(r),l=function(h,u,x,d){var m,g;if(typeof h=="object")m=h,g=u||{};else{if(!(typeof h=="number"&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof u=="number"&&u>=1&&u<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");m={year:h,month:u,day:x},g={}}var y=n[m.year-n[0]],v=m.year<<9|m.month<<5|m.day;g.year=v>=y?m.year:m.year-1,y=n[g.year-n[0]];var _,f=new Date(y>>9&4095,(y>>5&15)-1,31&y),S=new Date(m.year,m.month-1,m.day);_=Math.round((S-f)/864e5);var w,E=i[g.year-i[0]];for(w=0;w<13;w++){var P=E&1<<12-w?30:29;if(_<P)break;_-=P}var C=E>>13;return!C||w<C?(g.isIntercalary=!1,g.month=1+w):w===C?(g.isIntercalary=!0,g.month=w):(g.isIntercalary=!1,g.month=w),g.day=1+_,g}(a.year(),a.month(),a.day()),c=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,c,l.day)},fromString:function(r){var a=r.match(b),l=this._validateYear(+a[1]),c=+a[2],h=!!a[3],u=this.toMonthIndex(l,c,h),x=+a[4];return this.newDate(l,u,x)},add:function(r,a,l){var c=r.year(),h=r.month(),u=this.isIntercalaryMonth(c,h),x=this.toChineseMonth(c,h),d=Object.getPrototypeOf(T.prototype).add.call(this,r,a,l);if(l==="y"){var m=d.year(),g=d.month(),y=this.isIntercalaryMonth(m,x),v=u&&y?this.toMonthIndex(m,x,!0):this.toMonthIndex(m,x,!1);v!==g&&d.month(v)}return d}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,s=/^闰?十?[一二三四五六七八九]?月/m,t=/^闰?十?[一二三四五六七八九]?/m;A.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(X,I,e){var A=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,p){var s=this.newDate(T,b,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,A.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return(this.dayOfWeek(T,b,p)||7)<6},toJD:function(T,b,p){var s=this._validate(T,b,p,A.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((b-Math.floor((b+366)/1461))/365)+1;p<=0&&p--,b=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(p,s,t)}}),A.calendars.coptic=o},55668:function(X,I,e){var A=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,A.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,A.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,A.local.invalidYear),400},weekOfYear:function(b,p,s){var t=this.newDate(b,p,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,p){var s=this._validate(b,p,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,p,s){return(this._validate(b,p,s,A.local.invalidDate).day()+1)%8},weekDay:function(b,p,s){var t=this.dayOfWeek(b,p,s);return t>=2&&t<=6},extraInfo:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate);return b=t.year()+(t.year()<0?1:0),p=t.month(),(s=t.day())+(p>1?16:0)+(p>2?32*(p-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(b/400)+1;b-=400*(p-1),b+=b>15?16:0;var s=Math.floor(b/32)+1,t=b-32*(s-1)+1;return this.newDate(p<=0?p-1:p,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};A.calendars.discworld=o},65168:function(X,I,e){var A=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,p){var s=this.newDate(T,b,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,A.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===13&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return(this.dayOfWeek(T,b,p)||7)<6},toJD:function(T,b,p){var s=this._validate(T,b,p,A.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((b-Math.floor((b+366)/1461))/365)+1;p<=0&&p--,b=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(p,s,t)}}),A.calendars.ethiopian=o},2084:function(X,I,e){var A=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,p){return b-p*Math.floor(b/p)}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,A.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,p,s){var t=this.newDate(b,p,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,p){return b.year&&(p=b.month(),b=b.year()),this._validate(b,p,this.minDay,A.local.invalidMonth),p===12&&this.leapYear(b)||p===8&&T(this.daysInYear(b),10)===5?30:p===9&&T(this.daysInYear(b),10)===3?29:this.daysPerMonth[p-1]},weekDay:function(b,p,s){return this.dayOfWeek(b,p,s)!==6},extraInfo:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate);b=t.year(),p=t.month(),s=t.day();var i=b<=0?b+1:b,n=this.jdEpoch+this._delay1(i)+this._delay2(i)+s+1;if(p<7){for(var r=7;r<=this.monthsInYear(b);r++)n+=this.daysInMonth(b,r);for(r=1;r<p;r++)n+=this.daysInMonth(b,r)}else for(r=7;r<p;r++)n+=this.daysInMonth(b,r);return n},_delay1:function(b){var p=Math.floor((235*b-234)/19),s=12084+13753*p,t=29*p+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var p=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-p==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var p=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(p===-1?1:p+1,7,1);)p++;for(var s=b<this.toJD(p,1,1)?7:1;b>this.toJD(p,s,this.daysInMonth(p,s));)s++;var t=b-this.toJD(p,s,1)+1;return this.newDate(p,s,t)}}),A.calendars.hebrew=o},26368:function(X,I,e){var A=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,A.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,p){var s=this.newDate(T,b,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,A.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===12&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return this.dayOfWeek(T,b,p)!==5},toJD:function(T,b,p){var s=this._validate(T,b,p,A.local.invalidDate);return T=s.year(),b=s.month(),T=T<=0?T+1:T,(p=s.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var p=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),s=T-this.toJD(b,p,1)+1;return this.newDate(b,p,s)}}),A.calendars.islamic=o},24747:function(X,I,e){var A=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,p){var s=this.newDate(T,b,p);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var p=this._validate(T,b,this.minDay,A.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===2&&this.leapYear(p.year())?1:0)},weekDay:function(T,b,p){return(this.dayOfWeek(T,b,p)||7)<6},toJD:function(T,b,p){var s=this._validate(T,b,p,A.local.invalidDate);return T=s.year(),b=s.month(),p=s.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+p-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,p=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*p),t=Math.floor((b-s)/30.6001),i=t-Math.floor(t<14?1:13),n=p-Math.floor(i>2?4716:4715),r=b-s-Math.floor(30.6001*t);return n<=0&&n--,this.newDate(n,i,r)}}),A.calendars.julian=o},65616:function(X,I,e){var A=e(38700),k=e(50896);function o(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}function T(p,s){return p-s*Math.floor(p/s)}function b(p,s){return T(p-1,s)+1}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,A.local.invalidYear),!1},formatYear:function(p){p=this._validate(p,this.minMonth,this.minDay,A.local.invalidYear).year();var s=Math.floor(p/400);return p%=400,p+=p<0?400:0,s+"."+Math.floor(p/20)+"."+p%20},forYear:function(p){if((p=p.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<p.length;t++){var i=parseInt(p[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";s=20*s+i}return s},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,A.local.invalidYear),18},weekOfYear:function(p,s,t){return this._validate(p,s,t,A.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,A.local.invalidYear),360},daysInMonth:function(p,s){return this._validate(p,s,this.minDay,A.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,s,t){return this._validate(p,s,t,A.local.invalidDate).day()},weekDay:function(p,s,t){return this._validate(p,s,t,A.local.invalidDate),!0},extraInfo:function(p,s,t){var i=this._validate(p,s,t,A.local.invalidDate).toJD(),n=this._toHaab(i),r=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[r[0]-1],tzolkinDay:r[0],tzolkinTrecena:r[1]}},_toHaab:function(p){var s=T(8+(p-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(p){return[b(20+(p-=this.jdEpoch),20),b(p+4,13)]},toJD:function(p,s,t){var i=this._validate(p,s,t,A.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var s=Math.floor(p/360);p%=360,p+=p<0?360:0;var t=Math.floor(p/20),i=p%20;return this.newDate(s,t,i)}}),A.calendars.mayan=o},30632:function(X,I,e){var A=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar;var T=A.instance("gregorian");k(o.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear);return T.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(b,p,s){var t=this.newDate(b,p,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,p){var s=this._validate(b,p,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,p,s){return(this.dayOfWeek(b,p,s)||7)<6},toJD:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidMonth);(b=t.year())<0&&b++;for(var i=t.day(),n=1;n<t.month();n++)i+=this.daysPerMonth[n-1];return i+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var p=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(p+1,1,1);)p++;for(var s=b-Math.floor(this.toJD(p,1,1)+.5)+1,t=1;s>this.daysInMonth(p,t);)s-=this.daysInMonth(p,t),t++;return this.newDate(p,t,s)}}),A.calendars.nanakshahi=o},73040:function(X,I,e){var A=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,p){var s=this.newDate(T,b,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,A.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var b=0,p=this.minMonth;p<=12;p++)b+=this.NEPALI_CALENDAR_DATA[T][p];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,A.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,p){return this.dayOfWeek(T,b,p)!==6},toJD:function(T,b,p){var s=this._validate(T,b,p,A.local.invalidDate);T=s.year(),b=s.month(),p=s.day();var t=A.instance(),i=0,n=b,r=T;this._createMissingCalendarData(T);var a=T-(n>9||n===9&&p>=this.NEPALI_CALENDAR_DATA[r][0]?56:57);for(b!==9&&(i=p,n--);n!==9;)n<=0&&(n=12,r--),i+=this.NEPALI_CALENDAR_DATA[r][n],n--;return b===9?(i+=p-this.NEPALI_CALENDAR_DATA[r][0])<0&&(i+=t.daysInYear(a)):i+=this.NEPALI_CALENDAR_DATA[r][9]-this.NEPALI_CALENDAR_DATA[r][0],t.newDate(a,1,1).add(i,"d").toJD()},fromJD:function(T){var b=A.instance().fromJD(T),p=b.year(),s=b.dayOfYear(),t=p+56;this._createMissingCalendarData(t);for(var i=9,n=this.NEPALI_CALENDAR_DATA[t][0],r=this.NEPALI_CALENDAR_DATA[t][i]-n+1;s>r;)++i>12&&(i=1,t++),r+=this.NEPALI_CALENDAR_DATA[t][i];var a=this.NEPALI_CALENDAR_DATA[t][i]-(r-s);return this.newDate(t,i,a)},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var p=T-1;p<T+2;p++)this.NEPALI_CALENDAR_DATA[p]===void 0&&(this.NEPALI_CALENDAR_DATA[p]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),A.calendars.nepali=o},1104:function(X,I,e){var A=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,p){return b-p*Math.floor(b/p)}o.prototype=new A.baseCalendar,k(o.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear);return 682*((p.year()-(p.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,p,s){var t=this.newDate(b,p,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,p){var s=this._validate(b,p,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,p,s){return this.dayOfWeek(b,p,s)!==5},toJD:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate);b=t.year(),p=t.month(),s=t.day();var i=b-(b>=0?474:473),n=474+T(i,2820);return s+(p<=7?31*(p-1):30*(p-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var p=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(p/1029983),t=T(p,1029983),i=2820;if(t!==1029982){var n=Math.floor(t/366),r=T(t,366);i=Math.floor((2134*n+2816*r+2815)/1028522)+n+1}var a=i+2820*s+474;a=a<=0?a-1:a;var l=b-this.toJD(a,1,1)+1,c=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),h=b-this.toJD(a,c,1)+1;return this.newDate(a,c,h)}}),A.calendars.persian=o,A.calendars.jalali=o},51456:function(X,I,e){var A=e(38700),k=e(50896),o=A.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new A.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear);return b=this._t2gYear(p.year()),o.leapYear(b)},weekOfYear:function(b,p,s){var t=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,p){var s=this._validate(b,p,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,p,s){return(this.dayOfWeek(b,p,s)||7)<6},toJD:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var p=o.fromJD(b),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),A.calendars.taiwan=T},4592:function(X,I,e){var A=e(38700),k=e(50896),o=A.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new A.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear);return b=this._t2gYear(p.year()),o.leapYear(b)},weekOfYear:function(b,p,s){var t=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,p){var s=this._validate(b,p,this.minDay,A.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,p,s){return(this.dayOfWeek(b,p,s)||7)<6},toJD:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var p=o.fromJD(b),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),A.calendars.thai=T},45348:function(X,I,e){var A=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new A.baseCalendar,k(o.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var p=this._validate(b,this.minMonth,this.minDay,A.local.invalidYear);return this.daysInYear(p.year())===355},weekOfYear:function(b,p,s){var t=this.newDate(b,p,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var p=0,s=1;s<=12;s++)p+=this.daysInMonth(b,s);return p},daysInMonth:function(b,p){for(var s=this._validate(b,p,this.minDay,A.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<T.length;i++){if(T[i]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(b,p,s){return this.dayOfWeek(b,p,s)!==5},toJD:function(b,p,s){var t=this._validate(b,p,s,A.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+T[i-1]-1+24e5-.5},fromJD:function(b){for(var p=b-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>p);t++)s++;var i=s+15292,n=Math.floor((i-1)/12),r=n+1,a=i-12*n,l=p-T[s-1]+1;return this.newDate(r,a,l)},isValid:function(b,p,s){var t=A.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,p,s,t){var i=A.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),A.calendars.ummalqura=o;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(X,I,e){var A=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(t,i,n,r){if(this._calendar=t,this._year=i,this._month=n,this._day=r,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function p(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}A(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var n=this._localCals[t+"-"+i];if(!n&&this.calendars[t]&&(n=new this.calendars[t](i),this._localCals[t+"-"+i]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return n},newDate:function(t,i,n,r,a){return(r=(t!=null&&t.year?t.calendar():typeof r=="string"?this.instance(r,a):r)||this.instance()).newDate(t,i,n)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(n){return t[n]})}},substituteChineseDigits:function(t,i){return function(n){for(var r="",a=0;n>0;){var l=n%10;r=(l===0?"":t[l]+i[a])+r,a++,n=Math.floor(n/10)}return r.indexOf(t[1]+i[1])===0&&(r=r.substr(1)),r||t[0]}}}),A(o.prototype,{newDate:function(t,i,n){return this._calendar.newDate(t??this,i,n)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,n){if(!this._calendar.isValid(t,i,n))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),A(b.prototype,{_validateLevel:0,newDate:function(t,i,n){return t==null?this.today():(t.year&&(this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),n=t.day(),i=t.month(),t=t.year()),new o(this,t,i,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var n=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(t,i){var n=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,n,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),n},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(t,i,n){return this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,i,n){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,n),i,n)},_add:function(t,i,n){if(this._validateLevel++,n==="d"||n==="w"){var r=t.toJD()+i*(n==="w"?this.daysInWeek():1),a=t.calendar().fromJD(r);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var l=t.year()+(n==="y"?i:0),c=t.monthOfYear()+(n==="m"?i:0);a=t.day(),n==="y"?(t.month()!==this.fromMonthOfYear(l,c)&&(c=this.newDate(l,t.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(l)),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,c)))):n==="m"&&(function(u){for(;c<u.minMonth;)l--,c+=u.monthsInYear(l);for(var x=u.monthsInYear(l);c>x-1+u.minMonth;)l++,c-=x,x=u.monthsInYear(l)}(this),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,c))));var h=[l,this.fromMonthOfYear(l,c),a];return this._validateLevel--,h}catch(u){throw this._validateLevel--,u}},_correctAdd:function(t,i,n,r){if(!(this.hasYearZero||r!=="y"&&r!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],l=n<0?-1:1;i=this._add(t,n*a[0]+l*a[1],a[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,n){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var r=n==="y"?i:t.year(),a=n==="m"?i:t.month(),l=n==="d"?i:t.day();return n!=="y"&&n!=="m"||(l=Math.min(l,this.daysInMonth(r,a))),t.date(r,a,l)},isValid:function(t,i,n){this._validateLevel++;var r=this.hasYearZero||t!==0;if(r){var a=this.newDate(t,i,this.minDay);r=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(a)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(a)}return this._validateLevel--,r},toJSDate:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,i,n,r){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,n))throw r.replace(/\{0\}/,this.local.name);var a=this.newDate(t,i,n);return this._validateLevel--,a}catch(l){throw this._validateLevel--,l}}}),p.prototype=new b,A(p.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,n){var r=this.newDate(t,i,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var n=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,i,n){return(this.dayOfWeek(t,i,n)||7)<6},toJD:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=r.year(),i=r.month(),n=r.day(),t<0&&t++,i<3&&(i+=12,t--);var a=Math.floor(t/100),l=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+n+l-1524.5},fromJD:function(t){var i=Math.floor(t+.5),n=Math.floor((i-186721625e-2)/36524.25),r=1524+(n=i+1+n-Math.floor(n/4)),a=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*a),c=Math.floor((r-l)/30.6001),h=r-l-Math.floor(30.6001*c),u=c-(c>13.5?13:1),x=a-(u>2.5?4716:4715);return x<=0&&x--,this.newDate(x,u,h)},toJSDate:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(r.year(),r.month()-1,r.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=X.exports=new k;s.cdate=o,s.baseCalendar=b,s.calendars.gregorian=p},15168:function(X,I,e){var A=e(50896),k=e(38700);A(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],A(k.cdate.prototype,{formatDate:function(o,T){return typeof o!="string"&&(T=o,o=""),this._calendar.formatDate(o||"",this,T)}}),A(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,T,b){if(typeof o!="string"&&(b=T,T=o,o=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat;for(var p,s,t,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,n=b.dayNames||this.local.dayNames,r=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,l=b.monthNames||this.local.monthNames,c=(b.calculateWeek||this.local.calculateWeek,function(f,S){for(var w=1;_+w<o.length&&o.charAt(_+w)===f;)w++;return _+=w-1,Math.floor(w/(S||1))>1}),h=function(f,S,w,E){var P=""+S;if(c(f,E))for(;P.length<w;)P="0"+P;return P},u=this,x=function(f){return typeof r=="function"?r.call(u,f,c("m")):g(h("m",f.month(),2))},d=function(f,S){return S?typeof l=="function"?l.call(u,f):l[f.month()-u.minMonth]:typeof a=="function"?a.call(u,f):a[f.month()-u.minMonth]},m=this.local.digits,g=function(f){return b.localNumbers&&m?m(f):f},y="",v=!1,_=0;_<o.length;_++)if(v)o.charAt(_)!=="'"||c("'")?y+=o.charAt(_):v=!1;else switch(o.charAt(_)){case"d":y+=g(h("d",T.day(),2));break;case"D":y+=(p=T.dayOfWeek(),s=i,t=n,c("D")?t[p]:s[p]);break;case"o":y+=h("o",T.dayOfYear(),3);break;case"w":y+=h("w",T.weekOfYear(),2);break;case"m":y+=x(T);break;case"M":y+=d(T,c("M"));break;case"y":y+=c("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":c("Y",2),y+=T.formatYear();break;case"J":y+=T.toJD();break;case"@":y+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?y+="'":v=!0;break;default:y+=o.charAt(_)}return y},parseDate:function(o,T,b){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;o=o||this.local.dateFormat;var p=(b=b||{}).shortYearCutoff||this.shortYearCutoff;p=typeof p!="string"?p:this.today().year()%100+parseInt(p,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,n=b.monthNumbers||this.local.monthNumbers,r=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,l=-1,c=-1,h=-1,u=-1,x=-1,d=!1,m=!1,g=function(R,U){for(var D=1;P+D<o.length&&o.charAt(P+D)===R;)D++;return P+=D-1,Math.floor(D/(U||1))>1},y=function(R,U){var D=g(R,U),N=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(R)+1],W=new RegExp("^-?\\d{1,"+N+"}"),F=T.substring(E).match(W);if(!F)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},v=this,_=function(){if(typeof n=="function"){g("m");var R=n.call(v,T.substring(E));return E+=R.length,R}return y("m")},f=function(R,U,D,N){for(var W=g(R,N)?D:U,F=0;F<W.length;F++)if(T.substr(E,W[F].length).toLowerCase()===W[F].toLowerCase())return E+=W[F].length,F+v.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof a=="function"){var R=g("M")?a.call(v,T.substring(E)):r.call(v,T.substring(E));return E+=R.length,R}return f("M",r,a)},w=function(){if(T.charAt(E)!==o.charAt(P))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,P=0;P<o.length;P++)if(m)o.charAt(P)!=="'"||g("'")?w():m=!1;else switch(o.charAt(P)){case"d":u=y("d");break;case"D":f("D",s,t);break;case"o":x=y("o");break;case"w":y("w");break;case"m":h=_();break;case"M":h=S();break;case"y":var C=P;d=!g("y",2),P=C,c=y("y",2);break;case"Y":c=y("Y",2);break;case"J":l=y("J")+.5,T.charAt(E)==="."&&(E++,y("J"));break;case"@":l=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":g("'")?w():m=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&d&&(c+=p===-1?1900:this.today().year()-this.today().year()%100-(c<=p?0:100)),typeof h=="string"&&(h=i.call(this,c,h)),x>-1){h=1,u=x;for(var O=this.daysInMonth(c,h);u>O;O=this.daysInMonth(c,h))h++,u-=O}return l>-1?this.fromJD(l):this.newDate(c,h,u)},determineDate:function(o,T,b,p,s){b&&typeof b!="object"&&(s=p,p=b,b=null),typeof p!="string"&&(s=p,p="");var t=this;return T=T?T.newDate():null,o==null?T:typeof o=="string"?function(i){try{return t.parseDate(p,i,s)}catch{}for(var n=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=r.exec(i);a;)n.add(parseInt(a[1],10),a[2]||"d"),a=r.exec(i);return n}(o):typeof o=="number"?isNaN(o)||o===1/0||o===-1/0?T:t.today().add(o,"d"):t.newDate(o)}})},21576:function(){},19768:function(){},63436:function(X,I,e){"use strict";var A=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;X.exports=function(){for(var o=[],T=0;T<A.length;T++)typeof k[A[T]]=="function"&&(o[o.length]=A[T]);return o}},67756:function(X,I,e){"use strict";function A(de,pe,ge){de.prototype=pe.prototype=ge,ge.constructor=de}function k(de,pe){var ge=Object.create(de.prototype);for(var ke in pe)ge[ke]=pe[ke];return ge}function o(){}e.d(I,{qy:function(){return ye},Gz:function(){return J}});var T=.7,b=1/T,p="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\(".concat(p,",").concat(p,",").concat(p,"\\)$")),r=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(p,",").concat(p,",").concat(p,",").concat(s,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),h=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function m(de){var pe,ge;return de=(de+"").trim().toLowerCase(),(pe=i.exec(de))?(ge=pe[1].length,pe=parseInt(pe[1],16),ge===6?g(pe):ge===3?new _(pe>>8&15|pe>>4&240,pe>>4&15|240&pe,(15&pe)<<4|15&pe,1):ge===8?y(pe>>24&255,pe>>16&255,pe>>8&255,(255&pe)/255):ge===4?y(pe>>12&15|pe>>8&240,pe>>8&15|pe>>4&240,pe>>4&15|240&pe,((15&pe)<<4|15&pe)/255):null):(pe=n.exec(de))?new _(pe[1],pe[2],pe[3],1):(pe=r.exec(de))?new _(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,1):(pe=a.exec(de))?y(pe[1],pe[2],pe[3],pe[4]):(pe=l.exec(de))?y(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,pe[4]):(pe=c.exec(de))?C(pe[1],pe[2]/100,pe[3]/100,1):(pe=h.exec(de))?C(pe[1],pe[2]/100,pe[3]/100,pe[4]):u.hasOwnProperty(de)?g(u[de]):de==="transparent"?new _(NaN,NaN,NaN,0):null}function g(de){return new _(de>>16&255,de>>8&255,255&de,1)}function y(de,pe,ge,ke){return ke<=0&&(de=pe=ge=NaN),new _(de,pe,ge,ke)}function v(de,pe,ge,ke){return arguments.length===1?((Ee=de)instanceof o||(Ee=m(Ee)),Ee?new _((Ee=Ee.rgb()).r,Ee.g,Ee.b,Ee.opacity):new _):new _(de,pe,ge,ke??1);var Ee}function _(de,pe,ge,ke){this.r=+de,this.g=+pe,this.b=+ge,this.opacity=+ke}function f(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function S(){var de=w(this.opacity);return"".concat(de===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(de===1?")":", ".concat(de,")"))}function w(de){return isNaN(de)?1:Math.max(0,Math.min(1,de))}function E(de){return Math.max(0,Math.min(255,Math.round(de)||0))}function P(de){return((de=E(de))<16?"0":"")+de.toString(16)}function C(de,pe,ge,ke){return ke<=0?de=pe=ge=NaN:ge<=0||ge>=1?de=pe=NaN:pe<=0&&(de=NaN),new R(de,pe,ge,ke)}function O(de){if(de instanceof R)return new R(de.h,de.s,de.l,de.opacity);if(de instanceof o||(de=m(de)),!de)return new R;if(de instanceof R)return de;var pe=(de=de.rgb()).r/255,ge=de.g/255,ke=de.b/255,Ee=Math.min(pe,ge,ke),me=Math.max(pe,ge,ke),oe=NaN,re=me-Ee,fe=(me+Ee)/2;return re?(oe=pe===me?(ge-ke)/re+6*(ge<ke):ge===me?(ke-pe)/re+2:(pe-ge)/re+4,re/=fe<.5?me+Ee:2-me-Ee,oe*=60):re=fe>0&&fe<1?0:oe,new R(oe,re,fe,de.opacity)}function R(de,pe,ge,ke){this.h=+de,this.s=+pe,this.l=+ge,this.opacity=+ke}function U(de){return(de=(de||0)%360)<0?de+360:de}function D(de){return Math.max(0,Math.min(1,de||0))}function N(de,pe,ge){return 255*(de<60?pe+(ge-pe)*de/60:de<180?ge:de<240?pe+(ge-pe)*(240-de)/60:pe)}function W(de,pe,ge,ke,Ee){var me=de*de,oe=me*de;return((1-3*de+3*me-oe)*pe+(4-6*me+3*oe)*ge+(1+3*de+3*me-3*oe)*ke+oe*Ee)/6}A(o,m,{copy:function(de){return Object.assign(new this.constructor,this,de)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:d,toString:d}),A(_,v,k(o,{brighter:function(de){return de=de==null?b:Math.pow(b,de),new _(this.r*de,this.g*de,this.b*de,this.opacity)},darker:function(de){return de=de==null?T:Math.pow(T,de),new _(this.r*de,this.g*de,this.b*de,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f,formatHex:f,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),A(R,function(de,pe,ge,ke){return arguments.length===1?O(de):new R(de,pe,ge,ke??1)},k(o,{brighter:function(de){return de=de==null?b:Math.pow(b,de),new R(this.h,this.s,this.l*de,this.opacity)},darker:function(de){return de=de==null?T:Math.pow(T,de),new R(this.h,this.s,this.l*de,this.opacity)},rgb:function(){var de=this.h%360+360*(this.h<0),pe=isNaN(de)||isNaN(this.s)?0:this.s,ge=this.l,ke=ge+(ge<.5?ge:1-ge)*pe,Ee=2*ge-ke;return new _(N(de>=240?de-240:de+120,Ee,ke),N(de,Ee,ke),N(de<120?de+240:de-120,Ee,ke),this.opacity)},clamp:function(){return new R(U(this.h),D(this.s),D(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var de=w(this.opacity);return"".concat(de===1?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*D(this.s),"%, ").concat(100*D(this.l),"%").concat(de===1?")":", ".concat(de,")"))}}));var F=function(de){return function(){return de}};function j(de,pe){var ge=pe-de;return ge?function(ke,Ee){return function(me){return ke+me*Ee}}(de,ge):F(isNaN(de)?pe:de)}var q=function de(pe){var ge=function(Ee){return(Ee=+Ee)==1?j:function(me,oe){return oe-me?function(re,fe,Se){return re=Math.pow(re,Se),fe=Math.pow(fe,Se)-re,Se=1/Se,function(be){return Math.pow(re+be*fe,Se)}}(me,oe,Ee):F(isNaN(me)?oe:me)}}(pe);function ke(Ee,me){var oe=ge((Ee=v(Ee)).r,(me=v(me)).r),re=ge(Ee.g,me.g),fe=ge(Ee.b,me.b),Se=j(Ee.opacity,me.opacity);return function(be){return Ee.r=oe(be),Ee.g=re(be),Ee.b=fe(be),Ee.opacity=Se(be),Ee+""}}return ke.gamma=de,ke}(1);function te(de){return function(pe){var ge,ke,Ee=pe.length,me=new Array(Ee),oe=new Array(Ee),re=new Array(Ee);for(ge=0;ge<Ee;++ge)ke=v(pe[ge]),me[ge]=ke.r||0,oe[ge]=ke.g||0,re[ge]=ke.b||0;return me=de(me),oe=de(oe),re=de(re),ke.opacity=1,function(fe){return ke.r=me(fe),ke.g=oe(fe),ke.b=re(fe),ke+""}}}function ee(de,pe){var ge,ke=pe?pe.length:0,Ee=de?Math.min(ke,de.length):0,me=new Array(Ee),oe=new Array(ke);for(ge=0;ge<Ee;++ge)me[ge]=ye(de[ge],pe[ge]);for(;ge<ke;++ge)oe[ge]=pe[ge];return function(re){for(ge=0;ge<Ee;++ge)oe[ge]=me[ge](re);return oe}}function Q(de,pe){var ge=new Date;return de=+de,pe=+pe,function(ke){return ge.setTime(de*(1-ke)+pe*ke),ge}}function J(de,pe){return de=+de,pe=+pe,function(ge){return de*(1-ge)+pe*ge}}function K(de){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},K(de)}function Y(de,pe){var ge,ke={},Ee={};for(ge in de!==null&&K(de)==="object"||(de={}),pe!==null&&K(pe)==="object"||(pe={}),pe)ge in de?ke[ge]=ye(de[ge],pe[ge]):Ee[ge]=pe[ge];return function(me){for(ge in ke)Ee[ge]=ke[ge](me);return Ee}}te(function(de){var pe=de.length-1;return function(ge){var ke=ge<=0?ge=0:ge>=1?(ge=1,pe-1):Math.floor(ge*pe),Ee=de[ke],me=de[ke+1],oe=ke>0?de[ke-1]:2*Ee-me,re=ke<pe-1?de[ke+2]:2*me-Ee;return W((ge-ke/pe)*pe,oe,Ee,me,re)}}),te(function(de){var pe=de.length;return function(ge){var ke=Math.floor(((ge%=1)<0?++ge:ge)*pe),Ee=de[(ke+pe-1)%pe],me=de[ke%pe],oe=de[(ke+1)%pe],re=de[(ke+2)%pe];return W((ge-ke/pe)*pe,Ee,me,oe,re)}});var ie=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,se=new RegExp(ie.source,"g");function ae(de,pe){var ge,ke,Ee,me=ie.lastIndex=se.lastIndex=0,oe=-1,re=[],fe=[];for(de+="",pe+="";(ge=ie.exec(de))&&(ke=se.exec(pe));)(Ee=ke.index)>me&&(Ee=pe.slice(me,Ee),re[oe]?re[oe]+=Ee:re[++oe]=Ee),(ge=ge[0])===(ke=ke[0])?re[oe]?re[oe]+=ke:re[++oe]=ke:(re[++oe]=null,fe.push({i:oe,x:J(ge,ke)})),me=se.lastIndex;return me<pe.length&&(Ee=pe.slice(me),re[oe]?re[oe]+=Ee:re[++oe]=Ee),re.length<2?fe[0]?function(Se){return function(be){return Se(be)+""}}(fe[0].x):function(Se){return function(){return Se}}(pe):(pe=fe.length,function(Se){for(var be,we=0;we<pe;++we)re[(be=fe[we]).i]=be.x(Se);return re.join("")})}function ue(de,pe){pe||(pe=[]);var ge,ke=de?Math.min(pe.length,de.length):0,Ee=pe.slice();return function(me){for(ge=0;ge<ke;++ge)Ee[ge]=de[ge]*(1-me)+pe[ge]*me;return Ee}}function ve(de){return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},ve(de)}function ye(de,pe){var ge,ke,Ee=ve(pe);return pe==null||Ee==="boolean"?F(pe):(Ee==="number"?J:Ee==="string"?(ge=m(pe))?(pe=ge,q):ae:pe instanceof m?q:pe instanceof Date?Q:(ke=pe,!ArrayBuffer.isView(ke)||ke instanceof DataView?Array.isArray(pe)?ee:typeof pe.valueOf!="function"&&typeof pe.toString!="function"||isNaN(pe)?Y:J:ue))(de,pe)}},30584:function(X){"use strict";X.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(X){"use strict";X.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(X){"use strict";X.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(X){"use strict";X.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(X){"use strict";X.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(X){"use strict";X.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Gn={};function lr(X){var I=Gn[X];if(I!==void 0)return I.exports;var e=Gn[X]={exports:{}};return ir[X].call(e.exports,e,e.exports,lr),e.exports}return lr.n=function(X){var I=X&&X.__esModule?function(){return X.default}:function(){return X};return lr.d(I,{a:I}),I},lr.d=function(X,I){for(var e in I)lr.o(I,e)&&!lr.o(X,e)&&Object.defineProperty(X,e,{enumerable:!0,get:I[e]})},lr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),lr.o=function(X,I){return Object.prototype.hasOwnProperty.call(X,I)},lr.r=function(X){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(X,"__esModule",{value:!0})},lr(13792)}()})});var Th=["*"];function Rg(ir,Gn){ir&1&&zc(0)}var Fg=["tabListContainer"],Bg=["tabList"],Ng=["tabListInner"],jg=["nextPaginator"],Ug=["previousPaginator"],Vg=ir=>({animationDuration:ir}),Hg=(ir,Gn)=>({value:ir,params:Gn});function qg(ir,Gn){}var Gg=["tabBodyWrapper"],Wg=["tabHeader"];function Yg(ir,Gn){}function Zg(ir,Gn){if(ir&1&&Pc(0,Yg,0,0,"ng-template",12),ir&2){let lr=kl().$implicit;Ks("cdkPortalOutlet",lr.templateLabel)}}function Xg(ir,Gn){if(ir&1&&bd(0),ir&2){let lr=kl().$implicit;_d(lr.textLabel)}}function Kg(ir,Gn){if(ir&1){let lr=Oc();es(0,"div",7,2),Tl("click",function(){let I=no(lr),e=I.$implicit,A=I.$index,k=kl(),o=vh(1);return ro(k._handleClick(e,o,A))})("cdkFocusChange",function(I){let e=no(lr).$index,A=kl();return ro(A._tabFocusChanged(I,e))}),pf(2,"span",8)(3,"div",9),es(4,"span",10)(5,"span",11),Pc(6,Zg,1,1,null,12)(7,Xg,1,1),Js()()()}if(ir&2){let lr=Gn.$implicit,X=Gn.$index,I=vh(1),e=kl();hf(lr.labelClass),ul("mdc-tab--active",e.selectedIndex===X),Ks("id",e._getTabLabelId(X))("disabled",lr.disabled)("fitInkBarToContent",e.fitInkBarToContent),Ic("tabIndex",e._getTabIndex(X))("aria-posinset",X+1)("aria-setsize",e._tabs.length)("aria-controls",e._getTabContentId(X))("aria-selected",e.selectedIndex===X)("aria-label",lr.ariaLabel||null)("aria-labelledby",!lr.ariaLabel&&lr.ariaLabelledby?lr.ariaLabelledby:null),wl(3),Ks("matRippleTrigger",I)("matRippleDisabled",lr.disabled||e.disableRipple),wl(3),ph(lr.templateLabel?6:7)}}function Jg(ir,Gn){ir&1&&zc(0)}function $g(ir,Gn){if(ir&1){let lr=Oc();es(0,"mat-tab-body",13),Tl("_onCentered",function(){no(lr);let I=kl();return ro(I._removeTabBodyWrapperHeight())})("_onCentering",function(I){no(lr);let e=kl();return ro(e._setTabBodyWrapperHeight(I))}),Js()}if(ir&2){let lr=Gn.$implicit,X=Gn.$index,I=kl();hf(lr.bodyClass),ul("mat-mdc-tab-body-active",I.selectedIndex===X),Ks("id",I._getTabContentId(X))("content",lr.content)("position",lr.position)("origin",lr.origin)("animationDuration",I.animationDuration)("preserveContent",I.preserveContent),Ic("tabindex",I.contentTabIndex!=null&&I.selectedIndex===X?I.contentTabIndex:null)("aria-labelledby",I._getTabLabelId(X))("aria-hidden",I.selectedIndex!==X)}}var Qg=new Lc("MatTabContent"),em=(()=>{let Gn=class Gn{constructor(X){this.template=X}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(Cc))},Gn.\u0275dir=rc({type:Gn,selectors:[["","matTabContent",""]],standalone:!0,features:[ac([{provide:Qg,useExisting:Gn}])]});let ir=Gn;return ir})(),tm=new Lc("MatTabLabel"),Ud=new Lc("MAT_TAB"),nm=(()=>{let Gn=class Gn extends Rd{constructor(X,I,e){super(X,I),this._closestTab=e}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(Cc),ni(ff),ni(Ud,8))},Gn.\u0275dir=rc({type:Gn,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[ac([{provide:tm,useExisting:Gn}]),du]});let ir=Gn;return ir})(),Vd=new Lc("MAT_TAB_GROUP"),rm=(()=>{let Gn=class Gn{get templateLabel(){return this._templateLabel}set templateLabel(X){this._setTemplateLabelInput(X)}get content(){return this._contentPortal}constructor(X,I){this._viewContainerRef=X,this._closestTabGroup=I,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new uu,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(X){(X.hasOwnProperty("textLabel")||X.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new zd(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(X){X&&X._closestTab===this&&(this._templateLabel=X)}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(ff),ni(Vd,8))},Gn.\u0275cmp=nc({type:Gn,selectors:[["mat-tab"]],contentQueries:function(I,e,A){if(I&1&&(gu(A,nm,5),gu(A,em,7,Cc)),I&2){let k;yo(k=xo())&&(e.templateLabel=k.first),yo(k=xo())&&(e._explicitContent=k.first)}},viewQuery:function(I,e){if(I&1&&Ps(Cc,7),I&2){let A;yo(A=xo())&&(e._implicitContent=A.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",Is],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[ac([{provide:Ud,useExisting:Gn}]),ic,cf,mu],ngContentSelectors:Th,decls:1,vars:0,template:function(I,e){I&1&&(Dc(),Pc(0,Rg,1,0,"ng-template"))},encapsulation:2});let ir=Gn;return ir})(),bh="mdc-tab-indicator--active",Nd="mdc-tab-indicator--no-transition",_h=class{constructor(Gn){this._items=Gn}hide(){this._items.forEach(Gn=>Gn.deactivateInkBar())}alignToElement(Gn){let lr=this._items.find(I=>I.elementRef.nativeElement===Gn),X=this._currentItem;if(lr!==X&&(X?.deactivateInkBar(),lr)){let I=X?.elementRef.nativeElement.getBoundingClientRect?.();lr.activateInkBar(I),this._currentItem=lr}}},im=(()=>{let Gn=class Gn{constructor(){this._elementRef=hu(Nl),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(X){this._fitToContent!==X&&(this._fitToContent=X,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(X){let I=this._elementRef.nativeElement;if(!X||!I.getBoundingClientRect||!this._inkBarContentElement){I.classList.add(bh);return}let e=I.getBoundingClientRect(),A=X.width/e.width,k=X.left-e.left;I.classList.add(Nd),this._inkBarContentElement.style.setProperty("transform",`translateX(${k}px) scaleX(${A})`),I.getBoundingClientRect(),I.classList.remove(Nd),I.classList.add(bh),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(bh)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let X=this._elementRef.nativeElement.ownerDocument||document,I=this._inkBarElement=X.createElement("span"),e=this._inkBarContentElement=X.createElement("span");I.className="mdc-tab-indicator",e.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",I.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let X=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;X.appendChild(this._inkBarElement)}};Gn.\u0275fac=function(I){return new(I||Gn)},Gn.\u0275dir=rc({type:Gn,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Is]},features:[ic]});let ir=Gn;return ir})();var Hd=(()=>{let Gn=class Gn extends im{constructor(X){super(),this.elementRef=X,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(Nl))},Gn.\u0275dir=rc({type:Gn,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(I,e){I&2&&(Ic("aria-disabled",!!e.disabled),ul("mat-mdc-tab-disabled",e.disabled))},inputs:{disabled:[2,"disabled","disabled",Is]},standalone:!0,features:[ic,du]});let ir=Gn;return ir})(),jd=Ld({passive:!0}),am=650,om=100,sm=(()=>{let Gn=class Gn{get selectedIndex(){return this._selectedIndex}set selectedIndex(X){let I=isNaN(X)?0:X;this._selectedIndex!=I&&(this._selectedIndexChanged=!0,this._selectedIndex=I,this._keyManager&&this._keyManager.updateActiveItem(I))}constructor(X,I,e,A,k,o,T){this._elementRef=X,this._changeDetectorRef=I,this._viewportRuler=e,this._dir=A,this._ngZone=k,this._platform=o,this._animationMode=T,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new uu,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new uu,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new Ur,this.indexFocused=new Ur,this._sharedResizeObserver=hu(Bd),this._injector=hu(gd),k.runOutsideAngular(()=>{of(X.nativeElement,"mouseleave").pipe(Bl(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){of(this._previousPaginator.nativeElement,"touchstart",jd).pipe(Bl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),of(this._nextPaginator.nativeElement,"touchstart",jd).pipe(Bl(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let X=this._dir?this._dir.change:od("ltr"),I=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(cd(32),Bl(this._destroyed)),e=this._viewportRuler.change(150).pipe(Bl(this._destroyed)),A=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Id(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),yd(A,{injector:this._injector}),sf(X,e,I,this._items.changes,this._itemsResized()).pipe(Bl(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),A()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(k=>{this.indexFocused.emit(k),this._setTabFocus(k)})}_itemsResized(){return typeof ResizeObserver!="function"?ad:this._items.changes.pipe(lf(this._items),hd(X=>new id(I=>this._ngZone.runOutsideAngular(()=>{let e=new ResizeObserver(A=>I.next(A));return X.forEach(A=>e.observe(A.elementRef.nativeElement)),()=>{e.disconnect()}}))),fd(1),ld(X=>X.some(I=>I.contentRect.width>0&&I.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(X){if(!Cd(X))switch(X.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let I=this._items.get(this.focusIndex);I&&!I.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(X))}break;default:this._keyManager.onKeydown(X)}}_onContentChanges(){let X=this._elementRef.nativeElement.textContent;X!==this._currentTextContent&&(this._currentTextContent=X||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(X){!this._isValidIndex(X)||this.focusIndex===X||!this._keyManager||this._keyManager.setActiveItem(X)}_isValidIndex(X){return this._items?!!this._items.toArray()[X]:!0}_setTabFocus(X){if(this._showPaginationControls&&this._scrollToLabel(X),this._items&&this._items.length){this._items.toArray()[X].focus();let I=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?I.scrollLeft=0:I.scrollLeft=I.scrollWidth-I.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let X=this.scrollDistance,I=this._getLayoutDirection()==="ltr"?-X:X;this._tabList.nativeElement.style.transform=`translateX(${Math.round(I)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(X){this._scrollTo(X)}_scrollHeader(X){let I=this._tabListContainer.nativeElement.offsetWidth,e=(X=="before"?-1:1)*I/3;return this._scrollTo(this._scrollDistance+e)}_handlePaginatorClick(X){this._stopInterval(),this._scrollHeader(X)}_scrollToLabel(X){if(this.disablePagination)return;let I=this._items?this._items.toArray()[X]:null;if(!I)return;let e=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:A,offsetWidth:k}=I.elementRef.nativeElement,o,T;this._getLayoutDirection()=="ltr"?(o=A,T=o+k):(T=this._tabListInner.nativeElement.offsetWidth-A,o=T-k);let b=this.scrollDistance,p=this.scrollDistance+e;o<b?this.scrollDistance-=b-o:T>p&&(this.scrollDistance+=Math.min(T-p,o-b))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let X=this._tabListInner.nativeElement.scrollWidth,I=this._elementRef.nativeElement.offsetWidth,e=X-I>=5;e||(this.scrollDistance=0),e!==this._showPaginationControls&&(this._showPaginationControls=e,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let X=this._tabListInner.nativeElement.scrollWidth,I=this._tabListContainer.nativeElement.offsetWidth;return X-I||0}_alignInkBarToSelectedTab(){let X=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,I=X?X.elementRef.nativeElement:null;I?this._inkBar.alignToElement(I):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(X,I){I&&I.button!=null&&I.button!==0||(this._stopInterval(),sd(am,om).pipe(Bl(sf(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:e,distance:A}=this._scrollHeader(X);(A===0||A>=e)&&this._stopInterval()}))}_scrollTo(X){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let I=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(I,X)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:I,distance:this._scrollDistance}}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(Nl),ni(vu),ni(xh),ni(mf,8),ni(hh),ni(yu),ni(uf,8))},Gn.\u0275dir=rc({type:Gn,inputs:{disablePagination:[2,"disablePagination","disablePagination",Is],selectedIndex:[2,"selectedIndex","selectedIndex",df]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[ic]});let ir=Gn;return ir})(),lm=(()=>{let Gn=class Gn extends sm{constructor(X,I,e,A,k,o,T){super(X,I,e,A,k,o,T),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new _h(this._items),super.ngAfterContentInit()}_itemSelected(X){X.preventDefault()}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(Nl),ni(vu),ni(xh),ni(mf,8),ni(hh),ni(yu),ni(uf,8))},Gn.\u0275cmp=nc({type:Gn,selectors:[["mat-tab-header"]],contentQueries:function(I,e,A){if(I&1&&gu(A,Hd,4),I&2){let k;yo(k=xo())&&(e._items=k)}},viewQuery:function(I,e){if(I&1&&(Ps(Fg,7),Ps(Bg,7),Ps(Ng,7),Ps(jg,5),Ps(Ug,5)),I&2){let A;yo(A=xo())&&(e._tabListContainer=A.first),yo(A=xo())&&(e._tabList=A.first),yo(A=xo())&&(e._tabListInner=A.first),yo(A=xo())&&(e._nextPaginator=A.first),yo(A=xo())&&(e._previousPaginator=A.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(I,e){I&2&&ul("mat-mdc-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-mdc-tab-header-rtl",e._getLayoutDirection()=="rtl")},inputs:{disableRipple:[2,"disableRipple","disableRipple",Is]},standalone:!0,features:[ic,du,mu],ngContentSelectors:Th,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(I,e){if(I&1){let A=Oc();Dc(),es(0,"button",5,0),Tl("click",function(){return no(A),ro(e._handlePaginatorClick("before"))})("mousedown",function(o){return no(A),ro(e._handlePaginatorPress("before",o))})("touchend",function(){return no(A),ro(e._stopInterval())}),pf(2,"div",6),Js(),es(3,"div",7,1),Tl("keydown",function(o){return no(A),ro(e._handleKeydown(o))}),es(5,"div",8,2),Tl("cdkObserveContent",function(){return no(A),ro(e._onContentChanges())}),es(7,"div",9,3),zc(9),Js()()(),es(10,"button",10,4),Tl("mousedown",function(o){return no(A),ro(e._handlePaginatorPress("after",o))})("click",function(){return no(A),ro(e._handlePaginatorClick("after"))})("touchend",function(){return no(A),ro(e._stopInterval())}),pf(12,"div",6),Js()}I&2&&(ul("mat-mdc-tab-header-pagination-disabled",e._disableScrollBefore),Ks("matRippleDisabled",e._disableScrollBefore||e.disableRipple)("disabled",e._disableScrollBefore||null),wl(3),ul("_mat-animation-noopable",e._animationMode==="NoopAnimations"),wl(7),ul("mat-mdc-tab-header-pagination-disabled",e._disableScrollAfter),Ks("matRippleDisabled",e._disableScrollAfter||e.disableRipple)("disabled",e._disableScrollAfter||null))},dependencies:[yh,Pd],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let ir=Gn;return ir})(),cm=new Lc("MAT_TABS_CONFIG"),um={translateTab:Fd("translateTab",[xf("center, void, left-origin-center, right-origin-center",Rc({transform:"none"})),xf("left",Rc({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),xf("right",Rc({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),bf("* => left, * => right, left => center, right => center",yf("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),bf("void => left-origin-center",[Rc({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),yf("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),bf("void => right-origin-center",[Rc({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),yf("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},fm=(()=>{let Gn=class Gn extends vf{constructor(X,I,e,A){super(X,I,A),this._host=e,this._centeringSub=Ec.EMPTY,this._leavingSub=Ec.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(lf(this._host._isCenterPosition(this._host._position))).subscribe(X=>{X&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(vd),ni(ff),ni(pd(()=>qd)),ni(Md))},Gn.\u0275dir=rc({type:Gn,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[du]});let ir=Gn;return ir})(),qd=(()=>{let Gn=class Gn{set position(X){this._positionIndex=X,this._computePositionAnimationState()}constructor(X,I,e){this._elementRef=X,this._dir=I,this._dirChangeSubscription=Ec.EMPTY,this._translateTabComplete=new uu,this._onCentering=new Ur,this._beforeCentering=new Ur,this._afterLeavingCenter=new Ur,this._onCentered=new Ur(!0),this.animationDuration="500ms",this.preserveContent=!1,I&&(this._dirChangeSubscription=I.change.subscribe(A=>{this._computePositionAnimationState(A),e.markForCheck()})),this._translateTabComplete.pipe(ud((A,k)=>A.fromState===k.fromState&&A.toState===k.toState)).subscribe(A=>{this._isCenterPosition(A.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(A.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(X){let I=this._isCenterPosition(X.toState);this._beforeCentering.emit(I),I&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(X){return X=="center"||X=="left-origin-center"||X=="right-origin-center"}_computePositionAnimationState(X=this._getLayoutDirection()){this._positionIndex<0?this._position=X=="ltr"?"left":"right":this._positionIndex>0?this._position=X=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(X){let I=this._getLayoutDirection();return I=="ltr"&&X<=0||I=="rtl"&&X>0?"left-origin-center":"right-origin-center"}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(Nl),ni(mf,8),ni(vu))},Gn.\u0275cmp=nc({type:Gn,selectors:[["mat-tab-body"]],viewQuery:function(I,e){if(I&1&&Ps(vf,5),I&2){let A;yo(A=xo())&&(e._portalHost=A.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[mu],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(I,e){if(I&1){let A=Oc();es(0,"div",1,0),Tl("@translateTab.start",function(o){return no(A),ro(e._onTranslateTabStarted(o))})("@translateTab.done",function(o){return no(A),ro(e._translateTabComplete.next(o))}),Pc(2,qg,0,0,"ng-template",2),Js()}I&2&&Ks("@translateTab",Td(3,Hg,e._position,wd(1,Vg,e.animationDuration)))},dependencies:[fm,Dd],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[um.translateTab]}});let ir=Gn;return ir})(),hm=0,pm=!0,Jm=(()=>{let Gn=class Gn{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(X){this._fitInkBarToContent=X,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(X){this._indexToSelect=isNaN(X)?null:X}get animationDuration(){return this._animationDuration}set animationDuration(X){let I=X+"";this._animationDuration=/^\d+$/.test(I)?X+"ms":I}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(X){this._contentTabIndex=isNaN(X)?null:X}get backgroundColor(){return this._backgroundColor}set backgroundColor(X){if(!pm)throw new Error("mat-tab-group background color must be set through the Sass theming API");let I=this._elementRef.nativeElement.classList;I.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),X&&I.add("mat-tabs-with-background",`mat-background-${X}`),this._backgroundColor=X}constructor(X,I,e,A){this._elementRef=X,this._changeDetectorRef=I,this._animationMode=A,this._tabs=new md,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Ec.EMPTY,this._tabLabelSubscription=Ec.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new Ur,this.focusChange=new Ur,this.animationDone=new Ur,this.selectedTabChange=new Ur(!0),this._isServer=!hu(yu).isBrowser,this._groupId=hm++,this.animationDuration=e&&e.animationDuration?e.animationDuration:"500ms",this.disablePagination=e&&e.disablePagination!=null?e.disablePagination:!1,this.dynamicHeight=e&&e.dynamicHeight!=null?e.dynamicHeight:!1,e?.contentTabIndex!=null&&(this.contentTabIndex=e.contentTabIndex),this.preserveContent=!!e?.preserveContent,this.fitInkBarToContent=e&&e.fitInkBarToContent!=null?e.fitInkBarToContent:!1,this.stretchTabs=e&&e.stretchTabs!=null?e.stretchTabs:!0}ngAfterContentChecked(){let X=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=X){let I=this._selectedIndex==null;if(!I){this.selectedTabChange.emit(this._createChangeEvent(X));let e=this._tabBodyWrapper.nativeElement;e.style.minHeight=e.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((e,A)=>e.isActive=A===X),I||(this.selectedIndexChange.emit(X),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((I,e)=>{I.position=e-X,this._selectedIndex!=null&&I.position==0&&!I.origin&&(I.origin=X-this._selectedIndex)}),this._selectedIndex!==X&&(this._selectedIndex=X,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let X=this._clampTabIndex(this._indexToSelect);if(X===this._selectedIndex){let I=this._tabs.toArray(),e;for(let A=0;A<I.length;A++)if(I[A].isActive){this._indexToSelect=this._selectedIndex=A,this._lastFocusedTabIndex=null,e=I[A];break}!e&&I[X]&&Promise.resolve().then(()=>{I[X].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(X))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(lf(this._allTabs)).subscribe(X=>{this._tabs.reset(X.filter(I=>I._closestTabGroup===this||!I._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(X){let I=this._tabHeader;I&&(I.focusIndex=X)}_focusChanged(X){this._lastFocusedTabIndex=X,this.focusChange.emit(this._createChangeEvent(X))}_createChangeEvent(X){let I=new wh;return I.index=X,this._tabs&&this._tabs.length&&(I.tab=this._tabs.toArray()[X]),I}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=sf(...this._tabs.map(X=>X._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(X){return Math.min(this._tabs.length-1,Math.max(X||0,0))}_getTabLabelId(X){return`mat-tab-label-${this._groupId}-${X}`}_getTabContentId(X){return`mat-tab-content-${this._groupId}-${X}`}_setTabBodyWrapperHeight(X){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let I=this._tabBodyWrapper.nativeElement;I.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(I.style.height=X+"px")}_removeTabBodyWrapperHeight(){let X=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=X.clientHeight,X.style.height="",this.animationDone.emit()}_handleClick(X,I,e){I.focusIndex=e,X.disabled||(this.selectedIndex=e)}_getTabIndex(X){let I=this._lastFocusedTabIndex??this.selectedIndex;return X===I?0:-1}_tabFocusChanged(X,I){X&&X!=="mouse"&&X!=="touch"&&(this._tabHeader.focusIndex=I)}};Gn.\u0275fac=function(I){return new(I||Gn)(ni(Nl),ni(vu),ni(cm,8),ni(uf,8))},Gn.\u0275cmp=nc({type:Gn,selectors:[["mat-tab-group"]],contentQueries:function(I,e,A){if(I&1&&gu(A,rm,5),I&2){let k;yo(k=xo())&&(e._allTabs=k)}},viewQuery:function(I,e){if(I&1&&(Ps(Gg,5),Ps(Wg,5)),I&2){let A;yo(A=xo())&&(e._tabBodyWrapper=A.first),yo(A=xo())&&(e._tabHeader=A.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(I,e){I&2&&(hf("mat-"+(e.color||"primary")),xd("--mat-tab-animation-duration",e.animationDuration),ul("mat-mdc-tab-group-dynamic-height",e.dynamicHeight)("mat-mdc-tab-group-inverted-header",e.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",e.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Is],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",Is],dynamicHeight:[2,"dynamicHeight","dynamicHeight",Is],selectedIndex:[2,"selectedIndex","selectedIndex",df],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",df],disablePagination:[2,"disablePagination","disablePagination",Is],disableRipple:[2,"disableRipple","disableRipple",Is],preserveContent:[2,"preserveContent","preserveContent",Is],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[ac([{provide:Vd,useExisting:Gn}]),ic,mu],ngContentSelectors:Th,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(I,e){if(I&1){let A=Oc();Dc(),es(0,"mat-tab-header",3,0),Tl("indexFocused",function(o){return no(A),ro(e._focusChanged(o))})("selectFocusedIndex",function(o){return no(A),ro(e.selectedIndex=o)}),gh(2,Kg,8,17,"div",4,dh),Js(),Pc(4,Jg,1,0),es(5,"div",5,1),gh(7,$g,1,13,"mat-tab-body",6,dh),Js()}I&2&&(Ks("selectedIndex",e.selectedIndex||0)("disableRipple",e.disableRipple)("disablePagination",e.disablePagination),wl(2),mh(e._tabs),wl(2),ph(e._isServer?4:-1),wl(),ul("_mat-animation-noopable",e._animationMode==="NoopAnimations"),wl(2),mh(e._tabs))},dependencies:[lm,Hd,Od,yh,vf,qd],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let ir=Gn;return ir})(),wh=class{};var gm=["plot"],mm=["*"],ba=class ir{static setModuleName(Gn){ir.moduleName=Gn}static getModuleName(){return ir.moduleName}static setPlotly(Gn){if(typeof Gn=="object"&&typeof Gn.react!="function")throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");ir.plotly=Gn}static insert(Gn){return ir.instances.indexOf(Gn)===-1&&ir.instances.push(Gn),Gn}static remove(Gn){let lr=ir.instances.indexOf(Gn);lr>=0&&(ir.instances.splice(lr,1),ir.plotly.purge(Gn))}getInstanceByDivId(Gn){for(let lr of ir.instances)if(lr&&lr.id===Gn)return lr}getPlotly(){return uh(this,null,function*(){return yield this.waitFor(()=>this._getPlotly()!=="waiting"),this._getPlotly()})}_getPlotly(){if(typeof ir.plotly>"u"){let Gn=ir.moduleName==="ViaCDN"?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed";throw new Error(Gn)}return ir.plotly}waitFor(Gn){return new Promise(lr=>{let X=()=>{Gn()?lr():setTimeout(X,10)};X()})}newPlot(Gn,lr,X,I,e){return uh(this,null,function*(){if(yield this.waitFor(()=>this._getPlotly()!=="waiting"),e){let A={data:lr,layout:X,config:I,frames:e};return this._getPlotly().newPlot(Gn,A).then(()=>ir.insert(Gn))}return this._getPlotly().newPlot(Gn,lr,X,I).then(()=>ir.insert(Gn))})}plot(Gn,lr,X,I,e){if(e){let A={data:lr,layout:X,config:I,frames:e};return this._getPlotly().newPlot(Gn,A)}return this._getPlotly().newPlot(Gn,lr,X,I)}update(Gn,lr,X,I,e){if(e){let A={data:lr,layout:X,config:I,frames:e};return this._getPlotly().react(Gn,A)}return this._getPlotly().react(Gn,lr,X,I)}resize(Gn){return this._getPlotly().Plots.resize(Gn)}};ba.instances=[];ba.plotly=void 0;ba.moduleName=void 0;ba.\u0275fac=function(Gn){return new(Gn||ba)};ba.\u0275prov=fh({token:ba,factory:ba.\u0275fac,providedIn:"root"});var vm=(()=>{class ir{constructor(){this._isLoading=!1}get isLoading(){return this._isLoading}load(lr){return this._isLoading=!0,new Promise(X=>{X(!0)})}}return ir.\u0275fac=function(lr){return new(lr||ir)},ir.\u0275prov=fh({token:ir,factory:ir.\u0275fac,providedIn:"root"}),ir})(),lv=(()=>{class ir{constructor(lr,X,I,e){this.plotly=lr,this.themeLoader=X,this.iterableDiffers=I,this.keyValueDiffers=e,this.defaultClassName="js-plotly-plot",this.theme="none",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new Ur,this.update=new Ur,this.purge=new Ur,this.error=new Ur,this.afterExport=new Ur,this.afterPlot=new Ur,this.animated=new Ur,this.animatingFrame=new Ur,this.animationInterrupted=new Ur,this.autoSize=new Ur,this.beforeExport=new Ur,this.beforeHover=new Ur,this.buttonClicked=new Ur,this.click=new Ur,this.plotlyClick=new Ur,this.clickAnnotation=new Ur,this.deselect=new Ur,this.doubleClick=new Ur,this.framework=new Ur,this.hover=new Ur,this.legendClick=new Ur,this.legendDoubleClick=new Ur,this.react=new Ur,this.relayout=new Ur,this.relayouting=new Ur,this.restyle=new Ur,this.redraw=new Ur,this.selected=new Ur,this.selecting=new Ur,this.sliderChange=new Ur,this.sliderEnd=new Ur,this.sliderStart=new Ur,this.sunburstclick=new Ur,this.transitioning=new Ur,this.transitionInterrupted=new Ur,this.unhover=new Ur,this.treemapclick=new Ur,this.webglcontextlost=new Ur,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","beforeHover","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","relayouting","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","sunburstclick","transitioning","transitionInterrupted","unhover","treemapclick","webglcontextlost"]}ngOnInit(){this.createPlot().then(()=>{let lr=this.createFigure();this.initialized.emit(lr)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){if(typeof this.resizeHandler=="function"&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0),this.plotlyInstance){let lr=this.createFigure();this.purge.emit(lr),ba.remove(this.plotlyInstance)}}ngOnChanges(lr){let X=!1,I=lr.revision;I&&!I.isFirstChange()&&(X=!0);let e=lr.debug;e&&!e.isFirstChange()&&(X=!0),X&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let lr=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(lr=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(lr=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=void 0),lr&&this.plotlyInstance&&this.updatePlot()}getData(){return this.data??[]}getWindow(){return window}getClassName(){let lr=[this.defaultClassName];return Array.isArray(this.className)?lr=lr.concat(this.className):this.className&&lr.push(this.className),lr.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.getData(),this.layout,this.config,this.frames).then(lr=>{this.plotlyInstance=lr,this.getWindow().gd=this.debug?lr:void 0,this.eventNames.forEach(X=>{let I=`plotly_${X.toLowerCase()}`,e=this[X];lr.on(I,A=>e.emit(A))}),lr.on("plotly_click",X=>{this.plotlyClick.emit(X)}),this.updateWindowResizeHandler()},lr=>{console.error("Error while plotting:",lr),this.error.emit(lr)})}createFigure(){let lr=this.plotlyInstance;return{data:lr.data,layout:lr.layout,frames:lr._transitionData?lr._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){let X=new Error("Plotly component wasn't initialized");throw this.error.emit(X),X}let lr=rd({},this.layout);return this.plotly.update(this.plotlyInstance,this.getData(),lr,this.config,this.frames).then(()=>{let X=this.createFigure();this.update.emit(X)},X=>{console.error("Error while updating plot:",X),this.error.emit(X)})}updateWindowResizeHandler(){this.useResizeHandler?this.resizeHandler===void 0&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):typeof this.resizeHandler=="function"&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(lr,X){let I=Object.assign({},X,{uid:""});return JSON.stringify(I)}loadTheme(){this.layout!==void 0&&console.warn("You fulfill both `theme` and `layout` properties. This will overwrite the `layout` data with the `theme` data."),this.themeLoader.load(this.theme).then(lr=>this.layout=lr)}}return ir.\u0275fac=function(lr){return new(lr||ir)(ni(ba),ni(vm),ni(kd),ni(Ad))},ir.\u0275cmp=nc({type:ir,selectors:[["plotly-plot"]],viewQuery:function(lr,X){if(lr&1&&Ps(gm,7),lr&2){let I;yo(I=xo())&&(X.plotEl=I.first)}},inputs:{data:"data",layout:"layout",config:"config",frames:"frames",style:"style",theme:"theme",divId:"divId",revision:"revision",className:"className",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",beforeHover:"beforeHover",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",relayouting:"relayouting",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",sunburstclick:"sunburstclick",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",treemapclick:"treemapclick",webglcontextlost:"webglcontextlost"},features:[ac([ba]),cf],ngContentSelectors:mm,decls:3,vars:3,consts:[["plot",""],[3,"ngClass","ngStyle"]],template:function(lr,X){lr&1&&(Dc(),es(0,"div",1,0),zc(2),Js()),lr&2&&(Ks("ngClass",X.getClassName())("ngStyle",X.style),Ic("id",X.divId))},dependencies:[Sd,Ed],encapsulation:2}),ir})(),wf=(()=>{class ir{constructor(){}}return ir.\u0275fac=function(lr){return new(lr||ir)},ir.\u0275mod=pu({type:ir}),ir.\u0275inj=fu({providers:[ba],imports:[gf]}),ir})(),cv=(()=>{class ir{constructor(){if(!this.isValid()){let lr="Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.";throw new Error(lr)}ba.setPlotly(ir.plotlyjs)}isValid(){return ir.plotlyjs!==void 0&&(typeof ir.plotlyjs.plot=="function"||typeof ir.plotlyjs.newPlot=="function")}}return ir.plotlyjs={},ir.\u0275fac=function(lr){return new(lr||ir)},ir.\u0275mod=pu({type:ir}),ir.\u0275inj=fu({providers:[ba],imports:[gf,wf,wf]}),ir})(),fl=class ir{constructor(Gn){this.plotlyService=Gn,ba.setModuleName("ViaCDN")}static setPlotlyVersion(Gn,lr="plotly",X=""){if(!(Gn==="latest"||/^(strict-)?\d\.\d{1,2}\.\d{1,2}$/.test(Gn)))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3) or strict version number (i.e.: strict-1.4.3)");ir.loadViaCDN(lr,X),ir.plotlyVersion=Gn}static setPlotlyBundle(Gn){if(!(Gn===null||ir.plotlyBundleNames.indexOf(Gn)>=0)){let X=ir.plotlyBundleNames.map(I=>`"${I}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${X} for a partial bundle.`)}ir.plotlyBundle=Gn}static loadViaCDN(Gn="plotly",lr=""){ba.setPlotly("waiting"),setTimeout(()=>{let I="";switch(Gn){case"cloudflare":if(ir.plotlyVersion=="latest")throw new Error("As cloudflare hosts version specific files, 'latest' as a version is not supported. Please specify a version or you can choose 'plotly' as a CDN provider.");I=ir.plotlyBundle==null?`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${ir.plotlyVersion}/plotly.min.js`:`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${ir.plotlyVersion}/plotly-${ir.plotlyBundle}.min.js`;break;case"custom":if(!(lr&&typeof lr=="string"))throw new Error("Invalid or missing CDN URL. Please provide a CDN URL in case of custom provider. Alternatively, you can choose from 'plotly' or 'cloudflare'.");I=lr;break;default:I=ir.plotlyBundle==null?`https://cdn.plot.ly/plotly-${ir.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${ir.plotlyBundle}-${ir.plotlyVersion}.min.js`;break}let e=document.createElement("script");e.type="text/javascript",e.src=I,e.onerror=()=>console.error(`Error loading plotly.js library from ${I}`),document.getElementsByTagName("head")[0].appendChild(e);let k=200,o=()=>{let T=window.Plotly;if(T)ba.setPlotly(T);else if(k>0)k--,setTimeout(o,50);else throw new Error(`Error loading plotly.js library from ${I}. Timeout.`)};o()})}};fl.plotlyBundle=void 0;fl.plotlyVersion="latest";fl.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"];fl.\u0275fac=function(Gn){return new(Gn||fl)(dd(ba))};fl.\u0275mod=pu({type:fl});fl.\u0275inj=fu({providers:[ba],imports:[gf,wf,wf]});export{rm as a,Jm as b,dm as c,lv as d,cv as e};
