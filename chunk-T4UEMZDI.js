import{b as Yt,c as Ut,d as qt,e as Wt,f as Kt,g as Jt,h as Xt,i as Zt,j as te,k as ee}from"./chunk-JZNDLJT4.js";import{a as ie}from"./chunk-XR2I7HWO.js";import{a as jt,e as zt,f as Bt,g as $t,h as tt}from"./chunk-5YSNDHRT.js";import{B as Ot,E as z,F as B,ea as Gt,fa as Nt,ha as $,ia as Y,j as Ft,ka as U,la as q,na as W,oa as K,p as Vt,pa as L,ra as J,s as Lt,t as Pt,ta as X,wa as Z,xa as kt,za as P}from"./chunk-H4GRKNEN.js";import{m as At}from"./chunk-ZOIK2NCC.js";import{c as V,d as E,f as u,g as v,h as k,i as M,j as Ht,k as Qt}from"./chunk-AESYL7IM.js";import{$b as Rt,Ab as s,Bb as a,Ca as ft,Cb as x,Cc as Et,Da as F,Db as y,Dc as Tt,E as ht,Eb as D,Gb as I,Ib as g,Jb as p,Kb as vt,Lb as wt,Nb as xt,Pb as bt,Qb as yt,Rb as Dt,Tb as l,Ub as G,Va as St,Vb as R,Xa as c,Xb as b,Ya as _,_b as It,ca as mt,da as nt,fa as pt,ic as Mt,k as it,lb as rt,lc as N,ma as w,n as dt,na as ot,oa as ut,pb as h,qb as at,rb as m,ta as _t,tb as st,ua as f,va as S,wb as C,yb as Ct,zb as gt}from"./chunk-EU3335TE.js";var ue=(t,i)=>i.id;function _e(t,i){if(t&1){let o=I();s(0,"mat-list-option",1),g("click",function(){let n=f(o).$implicit,r=p(2);return S(r.searchSessionSelected.emit(n))}),s(1,"div")(2,"div")(3,"b"),l(4),a()(),s(5,"small"),l(6),It(7,"date"),a()()(),x(8,"mat-divider")}if(t&2){let o=i.$implicit;m("value",o),c(4),G(o.search_term),c(2),G(Rt(7,3,o.created_at,"short"))}}function fe(t,i){if(t&1&&(s(0,"mat-selection-list",0),Ct(1,_e,9,6,null,null,ue),a()),t&2){let o=p();m("multiple",!1),c(),gt(o.searchSessionQuery.results)}}var ne=(()=>{let i=class i{set searchSessionQuery(e){this._searchSessionQuery=e}get searchSessionQuery(){return this._searchSessionQuery}constructor(){this._searchSessionQuery=void 0,this.searchSessionSelected=new F}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=w({type:i,selectors:[["app-search-session-list"]],inputs:{searchSessionQuery:"searchSessionQuery"},outputs:{searchSessionSelected:"searchSessionSelected"},standalone:!0,features:[b],decls:1,vars:1,consts:[[3,"multiple"],[3,"click","value"]],template:function(n,r){n&1&&h(0,fe,3,1,"mat-selection-list",0),n&2&&C(r.searchSessionQuery?0:-1)},dependencies:[jt,zt,Bt,Et]});let t=i;return t})();var Se=["mat-sort-header",""],Ce=["*"];function ge(t,i){if(t&1){let o=I();s(0,"div",2),g("@arrowPosition.start",function(){f(o);let n=p();return S(n._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){f(o);let n=p();return S(n._disableViewStateAnimation=!1)}),x(1,"div",3),s(2,"div",4),x(3,"div",5)(4,"div",6)(5,"div",7),a()()}if(t&2){let o=p();m("@arrowOpacity",o._getArrowViewState())("@arrowPosition",o._getArrowViewState())("@allowChildren",o._getArrowDirectionState()),c(2),m("@indicator",o._getArrowDirectionState()),c(),m("@leftPointer",o._getArrowDirectionState()),c(),m("@rightPointer",o._getArrowDirectionState())}}var oe=new pt("MAT_SORT_DEFAULT_OPTIONS"),ct=(()=>{let i=class i{get direction(){return this._direction}set direction(e){this._direction=e}constructor(e){this._defaultOptions=e,this._initializedStream=new dt(1),this.sortables=new Map,this._stateChanges=new it,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new F,this.initialized=this._initializedStream}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let n=e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,r=ve(e.start||this.start,n),d=r.indexOf(this.direction)+1;return d>=r.length&&(d=0),r[d]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}};i.\u0275fac=function(n){return new(n||i)(_(oe,8))},i.\u0275dir=ut({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",N],disabled:[2,"matSortDisabled","disabled",N]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[rt,_t]});let t=i;return t})();function ve(t,i){let o=["asc","desc"];return t=="desc"&&o.reverse(),i||o.push(""),o}var T=Pt.ENTERING+" "+Lt.STANDARD_CURVE,H={indicator:V("indicator",[v("active-asc, asc",u({transform:"translateY(0px)"})),v("active-desc, desc",u({transform:"translateY(10px)"})),M("active-asc <=> active-desc",E(T))]),leftPointer:V("leftPointer",[v("active-asc, asc",u({transform:"rotate(-45deg)"})),v("active-desc, desc",u({transform:"rotate(45deg)"})),M("active-asc <=> active-desc",E(T))]),rightPointer:V("rightPointer",[v("active-asc, asc",u({transform:"rotate(45deg)"})),v("active-desc, desc",u({transform:"rotate(-45deg)"})),M("active-asc <=> active-desc",E(T))]),arrowOpacity:V("arrowOpacity",[v("desc-to-active, asc-to-active, active",u({opacity:1})),v("desc-to-hint, asc-to-hint, hint",u({opacity:.54})),v("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",u({opacity:0})),M("* => asc, * => desc, * => active, * => hint, * => void",E("0ms")),M("* <=> *",E(T))]),arrowPosition:V("arrowPosition",[M("* => desc-to-hint, * => desc-to-active",E(T,k([u({transform:"translateY(-25%)"}),u({transform:"translateY(0)"})]))),M("* => hint-to-desc, * => active-to-desc",E(T,k([u({transform:"translateY(0)"}),u({transform:"translateY(25%)"})]))),M("* => asc-to-hint, * => asc-to-active",E(T,k([u({transform:"translateY(25%)"}),u({transform:"translateY(0)"})]))),M("* => hint-to-asc, * => active-to-asc",E(T,k([u({transform:"translateY(0)"}),u({transform:"translateY(-25%)"})]))),v("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",u({transform:"translateY(0)"})),v("hint-to-desc, active-to-desc, desc",u({transform:"translateY(-25%)"})),v("hint-to-asc, active-to-asc, asc",u({transform:"translateY(25%)"}))]),allowChildren:V("allowChildren",[M("* <=> *",[Qt("@*",Ht(),{optional:!0})])])},we=(()=>{let i=class i{constructor(){this.changes=new it}};i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();var re=(()=>{let i=class i{get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}constructor(e,n,r,d,Q,A,et,j){this._intl=e,this._changeDetectorRef=n,this._sort=r,this._columnDef=d,this._focusMonitor=Q,this._elementRef=A,this._ariaDescriber=et,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this.disabled=!1,this._sortActionDescription="Sort",j?.arrowPosition&&(this.arrowPosition=j?.arrowPosition),this._handleStateChanges()}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let n=!!e;n!==this._showIndicatorHint&&(this._setIndicatorHintVisible(n),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._showIndicatorHint?this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"hint"}):this._setAnimationTransitionState({fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(e.keyCode===32||e.keyCode===13)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&(this._sort.direction==="asc"||this._sort.direction==="desc")}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){let e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?this._sort.direction=="asc"?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=ht(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),(this._viewState.toState==="hint"||this._viewState.toState==="active")&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&this._viewState.toState==="active"&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}};i.\u0275fac=function(n){return new(n||i)(_(we),_(Mt),_(ct,8),_("MAT_SORT_HEADER_COLUMN_DEF",8),_(Vt),_(ft),_(Ft,8),_(oe,8))},i.\u0275cmp=w({type:i,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(n,r){n&1&&g("click",function(){return r._handleClick()})("keydown",function(Q){return r._handleKeydown(Q)})("mouseenter",function(){return r._setIndicatorHintVisible(!0)})("mouseleave",function(){return r._setIndicatorHintVisible(!1)}),n&2&&(at("aria-sort",r._getAriaSortAttribute()),st("mat-sort-header-disabled",r._isDisabled()))},inputs:{id:[0,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[2,"disabled","disabled",N],sortActionDescription:"sortActionDescription",disableClear:[2,"disableClear","disableClear",N]},exportAs:["matSortHeader"],standalone:!0,features:[rt,b],attrs:Se,ngContentSelectors:Ce,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(n,r){n&1&&(vt(),s(0,"div",0)(1,"div",1),wt(2),a(),h(3,ge,6,6,"div",2),a()),n&2&&(st("mat-sort-header-sorted",r._isSorted())("mat-sort-header-position-before",r.arrowPosition==="before"),at("tabindex",r._isDisabled()?null:0)("role",r._isDisabled()?null:"button"),c(3),C(r._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;color:var(--mat-sort-arrow-color);opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[H.indicator,H.leftPointer,H.rightPointer,H.arrowOpacity,H.arrowPosition,H.allowChildren]},changeDetection:0});let t=i;return t})();var xe=["table"];function be(t,i){t&1&&(s(0,"div",1)(1,"h2"),l(2,"No results found"),a()())}function ye(t,i){t&1&&(s(0,"th",19),l(1," Primary ID "),a())}function De(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.primary_id," ")}}function Ie(t,i){t&1&&(s(0,"th",19),l(1," UniProt Accession ID "),a())}function Re(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.uniprot_id," ")}}function Me(t,i){t&1&&(s(0,"th",19),l(1," Gene name "),a())}function Ee(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.gene_name," ")}}function Te(t,i){t&1&&(s(0,"th",21),l(1," Log2 FC "),a())}function Ae(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.log2_fc," ")}}function Fe(t,i){t&1&&(s(0,"th",21),l(1," -Log10(P-Value) "),a())}function Ve(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.log10_p," ")}}function Le(t,i){t&1&&(s(0,"th",19),l(1," Comparison "),a())}function Pe(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.comparison_label," ")}}function Oe(t,i){t&1&&(s(0,"th",19),l(1," Search term "),a())}function He(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.search_term," ")}}function Qe(t,i){t&1&&(s(0,"th",19),l(1," Condition A "),a())}function Ge(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.condition_A,"")}}function Ne(t,i){t&1&&(s(0,"th",19),l(1," Condition B "),a())}function ke(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.condition_A,"")}}function je(t,i){t&1&&(s(0,"th",19),l(1," File "),a())}function ze(t,i){if(t&1&&(s(0,"td",20),l(1),a()),t&2){let o=i.$implicit;c(),R(" ",o.file.name," ")}}function Be(t,i){t&1&&x(0,"tr",22)}function $e(t,i){if(t&1){let o=I();s(0,"tr",23),g("click",function(){let n=f(o).$implicit,r=p(3);return S(r.handleSelection(n))}),a()}}function Ye(t,i){if(t&1){let o=I();s(0,"table",3,0),g("matSortChange",function(n){f(o);let r=p(2);return S(r.handleSortChange(n))}),y(2,4),h(3,ye,2,0,"th",5)(4,De,2,1,"td",6),D(),y(5,7),h(6,Ie,2,0,"th",5)(7,Re,2,1,"td",6),D(),y(8,8),h(9,Me,2,0,"th",5)(10,Ee,2,1,"td",6),D(),y(11,9),h(12,Te,2,0,"th",10)(13,Ae,2,1,"td",6),D(),y(14,11),h(15,Fe,2,0,"th",10)(16,Ve,2,1,"td",6),D(),y(17,12),h(18,Le,2,0,"th",5)(19,Pe,2,1,"td",6),D(),y(20,13),h(21,Oe,2,0,"th",5)(22,He,2,1,"td",6),D(),y(23,14),h(24,Qe,2,0,"th",5)(25,Ge,2,1,"td",6),D(),y(26,15),h(27,Ne,2,0,"th",5)(28,ke,2,1,"td",6),D(),y(29,16),h(30,je,2,0,"th",5)(31,ze,2,1,"td",6),D(),h(32,Be,1,0,"tr",17)(33,$e,1,0,"tr",18),a()}if(t&2){let o=p(2);m("dataSource",o.searchResultQuery.results),c(32),m("matHeaderRowDef",o.displayedColumns),c(),m("matRowDefColumns",o.displayedColumns)}}function Ue(t,i){if(t&1&&h(0,be,3,0,"div",1)(1,Ye,34,3,"table",2),t&2){let o=p();C(o.searchResultQuery.results.length===0?0:1)}}var ae=(()=>{let i=class i{set searchResultQuery(e){this._searchResultQuery=e,this.table&&this.table.renderRows()}get searchResultQuery(){return this._searchResultQuery}constructor(){this.displayedColumns=["primary_id","gene_name","uniprot_id","search_term","condition_A","condition_B","log2_fc","log10_p","file","comparison_label"],this._searchResultQuery=void 0,this.selected=new F,this.sortChange=new F}handleSelection(e){this.selected.emit(e)}handleSortChange(e){this.sortChange.emit(e)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=w({type:i,selectors:[["app-search-result-list"]],viewQuery:function(n,r){if(n&1&&bt(xe,5),n&2){let d;yt(d=Dt())&&(r.table=d.first)}},inputs:{searchResultQuery:"searchResultQuery"},outputs:{selected:"selected",sortChange:"sortChange"},standalone:!0,features:[b],decls:1,vars:1,consts:[["table",""],[1,"no-results"],["mat-table","","matSort","",3,"dataSource"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","primary_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uniprot_id"],["matColumnDef","gene_name"],["matColumnDef","log2_fc"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","log10_p"],["matColumnDef","comparison_label"],["matColumnDef","search_term"],["matColumnDef","condition_A"],["matColumnDef","condition_B"],["matColumnDef","file"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,r){n&1&&h(0,Ue,2,1),n&2&&C(r.searchResultQuery?0:-1)},dependencies:[Yt,Wt,Kt,Ut,Jt,qt,te,ee,Zt,Xt,ct,re],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}"]});let t=i;return t})();var le=(()=>{let i=class i{set searchResult(e){this._searchResult=e,this.web.getSearchResultRelated(e.id).subscribe(n=>{this.relatedResult=n[0]}),this.web.getAnalysisGroup(e.analysis_group.id).subscribe(n=>{this.analysisGroup=n,this.web.getAnalysisGroupFiles(n.id).subscribe(r=>{this.analysisGroupDF=r.find(d=>d.file_category==="df"),this.analysisGroupSearched=r.find(d=>d.file_category==="searched"),this.analysisGroupSearched&&(this.web.getProjectFileSampleAnnotations(this.analysisGroupSearched.id).subscribe(d=>{this.sampleAnnotations=d}),this.web.getProjectFileColumns(this.analysisGroupSearched.id).subscribe(d=>{this.analysisGroupSearchedColumns=d})),this.analysisGroupDF&&this.web.getProjectFileColumns(this.analysisGroupDF.id).subscribe(d=>{this.analysisGroupDFColumns=d,this.web.getProjectFileComparisonMatrix(this.analysisGroupDF.id).subscribe(Q=>{if(this.comparisonMatrix=Q,this.searchResult.file.file_category==="df")for(let A of this.comparisonMatrix.matrix){let et=this.getCMIndex(A.fold_change_col),j=this.getCMIndex(A.p_value_col),he=-1,ni=A.comparison_label,me=-1,pe=-1;this.analysisGroupDF?.extra_data.primary_id_col&&(pe=this.getCMIndex(this.analysisGroupDF.extra_data.primary_id_col)),this.analysisGroupDF?.extra_data.gene_name_col&&(me=this.getCMIndex(this.analysisGroupDF.extra_data.gene_name_col)),A.comparison_col&&(he=this.getCMIndex(A.comparison_col))}})})})})}get searchResult(){return this._searchResult}constructor(e,n){this.web=e,this.fb=n,this._searchResult=void 0,this.relatedResult=void 0,this.analysisGroup=void 0,this.analysisGroupDF=void 0,this.analysisGroupDFColumns=[],this.analysisGroupSearched=void 0,this.analysisGroupSearchedColumns=[],this.sampleAnnotations=void 0,this.comparisonMatrix=void 0,this.differentialData=[]}getSAIndex(e){return this.analysisGroupSearchedColumns?this.analysisGroupSearchedColumns.indexOf(e):-1}getCMIndex(e){return this.analysisGroupDFColumns?this.analysisGroupDFColumns.indexOf(e):-1}};i.\u0275fac=function(n){return new(n||i)(_(P),_(L))},i.\u0275cmp=w({type:i,selectors:[["app-selected-result-view"]],inputs:{searchResult:"searchResult"},standalone:!0,features:[b],decls:4,vars:1,consts:[[3,"color"]],template:function(n,r){n&1&&(s(0,"mat-toolbar",0)(1,"mat-toolbar-row")(2,"span"),l(3,"Result Details"),a()()()),n&2&&m("color","accent")},dependencies:[B,z]});let t=i;return t})();function qe(t,i){if(t&1){let o=I();s(0,"app-search-result-list",7),g("selected",function(n){f(o);let r=p();return S(r.handleSelectedResult(n))})("sortChange",function(n){f(o);let r=p();return S(r.handleSort(n))}),a(),s(1,"mat-paginator",8,0),g("page",function(n){f(o);let r=p();return S(r.handlePageEvent(n))}),l(3,"> "),a()}if(t&2){let o=p();m("searchResultQuery",o.searchResultQuery),c(),m("length",o.searchResultQuery.count)("pageSize",o.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",o.pageIndex)}}function We(t,i){if(t&1&&(s(0,"div",6),x(1,"app-selected-result-view",9),a()),t&2){let o=p();c(),m("searchResult",o.selectedSearchResult)}}var de=(()=>{let i=class i{set searchSession(e){this._searchSession=e,e&&this.form.controls.file_category.value&&this.web.getSearchResults(e.id,this.pageSize,0,this.form.controls.file_category.value,this.currentSort?.active,this.currentSort?.direction).subscribe(n=>{this.searchResultQuery=n})}get searchSession(){return this._searchSession}constructor(e,n){this.web=e,this.fb=n,this._searchSession=void 0,this.searchResultQuery=void 0,this.pageSize=10,this.pageIndex=0,this.selectedSearchResult=void 0,this.form=this.fb.group({file_category:new U("df",Nt.required)}),this.currentSort=void 0,this.form.controls.file_category.valueChanges.subscribe(r=>{this.searchSession&&r&&this.web.getSearchResults(this.searchSession.id,this.pageSize,0,r,this.currentSort?.active,this.currentSort?.direction).subscribe(d=>{this.searchResultQuery=d})})}handlePageEvent(e){let n=e.pageIndex*e.pageSize;this.pageSize=e.pageSize,this.form.controls.file_category.value&&this.web.getSearchResults(this.searchSession.id,this.pageSize,n,this.form.controls.file_category.value,this.currentSort?.active,this.currentSort?.direction).subscribe(r=>{this.searchResultQuery=r})}handleSelectedResult(e){e&&(this.selectedSearchResult=e)}handleSort(e){this.currentSort=e,this.searchResultQuery&&this.form.controls.file_category.value&&this.web.getSearchResults(this.searchSession.id,this.pageSize,0,this.form.controls.file_category.value,e.active,e.direction).subscribe(n=>{this.searchResultQuery=n})}};i.\u0275fac=function(n){return new(n||i)(_(P),_(L))},i.\u0275cmp=w({type:i,selectors:[["app-search-session-view"]],inputs:{searchSession:"searchSession"},standalone:!0,features:[b],decls:13,vars:5,consts:[["paginator",""],[2,"display","flex","flex-direction","row","justify-content","center"],[2,"width","100%","padding","50px"],[3,"formGroup"],["formControlName","file_category"],[3,"value"],[1,"selected-result"],[3,"selected","sortChange","searchResultQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],[3,"searchResult"]],template:function(n,r){n&1&&(s(0,"div",1)(1,"div",2)(2,"form",3)(3,"mat-form-field")(4,"mat-select",4)(5,"mat-option",5),l(6,"Differential Analysis"),a(),s(7,"mat-option",5),l(8,"MS Searched File"),a()(),s(9,"mat-label"),l(10,"File Category"),a()()(),h(11,qe,4,6),a(),h(12,We,2,1,"div",6),a()),n&2&&(c(2),m("formGroup",r.form),c(3),m("value","df"),c(2),m("value","searched"),c(4),C(r.searchResultQuery?11:-1),c(),C(r.selectedSearchResult?12:-1))},dependencies:[ae,tt,J,q,$,Y,W,K,Z,$t,Ot,X,le],styles:[".selected-result[_ngcontent-%COMP%]{width:400px;border-left:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 148px)}"]});let t=i;return t})();function Ke(t,i){if(t&1){let o=I();s(0,"div",11)(1,"app-search-session-list",12),g("searchSessionSelected",function(n){f(o);let r=p(2);return S(r.searchSession=n)}),a()(),s(2,"mat-paginator",13,0),g("page",function(n){f(o);let r=p(2);return S(r.handlePageEvent(n))}),a()}if(t&2){let o=p(2);c(),m("searchSessionQuery",o.searchSessionQuery),c(),m("length",o.searchSessionQuery.count)("pageSize",o.pageSize)("showFirstLastButtons",!0)("hidePageSize",!0)("pageIndex",o.pageIndex)}}function Je(t,i){t&1&&(s(0,"p"),l(1,"No search sessions found."),a())}function Xe(t,i){if(t&1&&h(0,Ke,4,6)(1,Je,2,0,"p"),t&2){let o=p();C(o.searchSessionQuery.count>0?0:1)}}function Ze(t,i){if(t&1&&(s(0,"a",8)(1,"span",14)(2,"b"),l(3),a()()()),t&2){let o=p();xt("href","/#/search-session/",o.searchSession.id,"",St),c(3),G(o.searchSession.search_term)}}function ti(t,i){t&1&&l(0," Select Search Session ")}function ei(t,i){if(t&1&&x(0,"app-search-session-view",10),t&2){let o=p();m("searchSession",o.searchSession)}}var lt=(()=>{let i=class i{set searchID(e){e&&(this._searchID=e,this.web.getSearchSession(e).subscribe(n=>{this._searchSession=n}))}get searchID(){return this._searchID}set searchSession(e){this._searchSession=e}get searchSession(){return this._searchSession}constructor(e,n,r){this.web=e,this.fb=n,this.accounts=r,this._searchSession=void 0,this._searchID=0,this.searchSessionQuery=void 0,this.pageSize=10,this.pageIndex=0,this.form=this.fb.group({search:new U("")}),this.web.getSearchSessions(void 0,this.pageSize,0,void 0,this.accounts.loggedIn,this.web.searchSessionID).subscribe(d=>{this.searchSessionQuery=d})}handlePageEvent(e){this.pageSize=e.pageSize;let n=e.pageIndex*e.pageSize;this.form.controls.search.value?this.web.getSearchSessions(void 0,this.pageSize,n,this.form.controls.search.value,this.accounts.loggedIn,this.web.searchSessionID).subscribe(r=>{this.searchSessionQuery=r}):this.web.getSearchSessions(void 0,this.pageSize,n,void 0,this.accounts.loggedIn,this.web.searchSessionID).subscribe(r=>{this.searchSessionQuery=r})}};i.\u0275fac=function(n){return new(n||i)(_(P),_(L),_(ie))},i.\u0275cmp=w({type:i,selectors:[["app-search-session"]],inputs:{searchID:"searchID"},standalone:!0,features:[b],decls:20,vars:4,consts:[["paginator",""],[2,"display","flex","flex-direction","row"],[1,"search-session-side-nav"],[2,"display","flex","flex-direction","column","padding","5px"],[3,"formGroup"],[2,"width","100%"],["matInput","","formControlName","search","type","search","placeholder","Find Search Session"],[1,"search-session-main-content"],[3,"href"],[2,"height","calc(100vh - 64px*2 - 20px)","overflow","auto"],[3,"searchSession"],[2,"height","calc(100vh - 64px*4 - 20px)","overflow","auto"],[3,"searchSessionSelected","searchSessionQuery"],["aria-label","Select page",3,"page","length","pageSize","showFirstLastButtons","hidePageSize","pageIndex"],[2,"color","#ba0000"]],template:function(n,r){n&1&&(s(0,"div",1)(1,"div",2)(2,"mat-toolbar")(3,"mat-toolbar-row")(4,"span"),l(5,"Search Session"),a()()(),s(6,"div",3)(7,"form",4)(8,"mat-form-field",5),x(9,"input",6),s(10,"mat-label"),l(11,"Find Search Sessions"),a()()(),h(12,Xe,2,1),a()(),s(13,"div",7)(14,"mat-toolbar")(15,"mat-toolbar-row"),h(16,Ze,4,3,"a",8)(17,ti,1,0),a()(),s(18,"div",9),h(19,ei,1,1,"app-search-session-view",10),a()()()),n&2&&(c(7),m("formGroup",r.form),c(5),C(r.searchSessionQuery?12:-1),c(4),C(r.searchSession?16:17),c(3),C(r.searchSession?19:-1))},dependencies:[Z,kt,X,J,q,Gt,$,Y,W,K,tt,B,z,ne,de],styles:[".search-session-side-nav[_ngcontent-%COMP%]{width:300px;border-right:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 64px)}.search-session-main-content[_ngcontent-%COMP%]{flex:1}"]});let t=i;return t})();var ii=[{path:"",component:lt},{path:":searchID",component:lt}],un=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=ot({type:i}),i.\u0275inj=nt({imports:[Tt,At.forChild(ii)]});let t=i;return t})();export{un as SearchSessionModule};
