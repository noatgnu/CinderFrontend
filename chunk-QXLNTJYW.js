import{a as fn}from"./chunk-VSOOYACP.js";import{a as dn}from"./chunk-4Y6C6B6Y.js";import{a as mn,b as Wn,c as un,d as po,e as Ie,f as Ni,g as je,h as Te,i as Qe}from"./chunk-4QNTITRE.js";import{a as Bi,b as Ri,c as Gi,d as Li}from"./chunk-FTJM37WF.js";import{a as wi}from"./chunk-FNF3YX4S.js";import{a as bi,b as Si}from"./chunk-EFA4RKVI.js";import{a as Me}from"./chunk-DNOBBIBA.js";import{a as hn,b as Ii,c as Vi}from"./chunk-Q4BTCPC6.js";import{a as Mi,b as ji,c as Ti,d as ki,e as Ei,f as Di,g as Pi,h as Ai,i as Oi,j as Fi}from"./chunk-OG2CUBHY.js";import{a as ze,b as $o,c as qe,d as Wo,e as Xo,f as Yo,g as xi,h as yi}from"./chunk-DUGR6R2K.js";import{a as _i,b as Ci,c as ln,d as vi,e as cn,f as pn}from"./chunk-PTJFY6LV.js";import{a as se}from"./chunk-M4HDPTVA.js";import{a as en,c as on,d as nn,e as rn,f as hi,g as an,h as ui}from"./chunk-QNFV5FNB.js";import{a as Bt,c as He,d as Rt,e as Gt,f as Lt,g as he}from"./chunk-XE6LPW3G.js";import{Aa as ie,Ca as me,Ha as Yt,Ia as Ut,Ja as sn,Ka as fi,L as Ne,La as gi,Na as Jt,Q as $t,R as Tt,S as we,ja as Jo,ka as Wt,ma as re,oa as Ft,pa as te,qa as Ko,ra as ae,sa as be,ta as ee,ua as Zo,va as tn,wa as pe,xa as de,ya as Xt,za as Se}from"./chunk-5FWRCZN2.js";import{c as Uo,d as ao,g as ve,i as so,j as lo,l as Ye,m as co}from"./chunk-HX3ESI56.js";import{h as Ho,l as Le,p as Qo}from"./chunk-7KO7FTCN.js";import{$c as zo,A as Je,Aa as V,Ab as Fo,Ba as B,Bb as F,Bc as No,Ca as ei,Cb as ye,Da as Eo,Db as ii,Eb as Io,Ec as ci,G as Mo,Ga as Do,Hb as J,Ia as wt,Ib as Ce,Jb as ft,Kb as gt,L as jo,La as Xe,Lb as c,Mb as u,Nb as Q,Ob as At,Pb as Ot,Rb as K,Ub as O,Wb as x,Xb as Vo,Yb as Bo,Zb as Ro,_b as oo,a as xt,ad as ro,b as jt,ba as Ke,bb as Po,bc as oi,bd as pi,ca as Ze,cb as Ao,cc as ni,d as $n,db as io,dc as ri,dd as di,e as bo,f as Zt,fb as v,fd as mi,g as So,gb as G,gc as ne,ha as To,hc as w,ia as We,ic as yt,ja as Re,jc as dt,kb as Oo,kc as Go,lc as qt,ld as qo,mc as Ht,na as ti,nc as Qt,oc as Lo,pc as mt,qc as ai,r as Ue,rc as no,sa as at,ta as Ge,tc as si,ua as eo,uc as li,xb as q,za as ko}from"./chunk-JUSXM7HP.js";var wn=$n((Wi,uo)=>{"use strict";(function(i,a){typeof Wi=="object"&&typeof uo=="object"?uo.exports=a():typeof define=="function"&&define.amd?define([],a):typeof Wi=="object"?Wi.QRCodeStyling=a():i.QRCodeStyling=a()})(self,function(){return(()=>{var i={192:(e,o)=>{var n,f,T=function(){var I=function(A,P){var E=A,S=ht[P],y=null,k=0,H=null,L=[],$={},Et=function(d,h){y=function(p){for(var C=new Array(p),b=0;b<p;b+=1){C[b]=new Array(p);for(var R=0;R<p;R+=1)C[b][R]=null}return C}(k=4*E+17),M(0,0),M(k-7,0),M(0,k-7),l(),r(),m(d,h),E>=7&&s(d),H==null&&(H=g(E,S,L)),_(H,h)},M=function(d,h){for(var p=-1;p<=7;p+=1)if(!(d+p<=-1||k<=d+p))for(var C=-1;C<=7;C+=1)h+C<=-1||k<=h+C||(y[d+p][h+C]=0<=p&&p<=6&&(C==0||C==6)||0<=C&&C<=6&&(p==0||p==6)||2<=p&&p<=4&&2<=C&&C<=4)},r=function(){for(var d=8;d<k-8;d+=1)y[d][6]==null&&(y[d][6]=d%2==0);for(var h=8;h<k-8;h+=1)y[6][h]==null&&(y[6][h]=h%2==0)},l=function(){for(var d=ct.getPatternPosition(E),h=0;h<d.length;h+=1)for(var p=0;p<d.length;p+=1){var C=d[h],b=d[p];if(y[C][b]==null)for(var R=-2;R<=2;R+=1)for(var N=-2;N<=2;N+=1)y[C+R][b+N]=R==-2||R==2||N==-2||N==2||R==0&&N==0}},s=function(d){for(var h=ct.getBCHTypeNumber(E),p=0;p<18;p+=1){var C=!d&&(h>>p&1)==1;y[Math.floor(p/3)][p%3+k-8-3]=C}for(p=0;p<18;p+=1)C=!d&&(h>>p&1)==1,y[p%3+k-8-3][Math.floor(p/3)]=C},m=function(d,h){for(var p=S<<3|h,C=ct.getBCHTypeInfo(p),b=0;b<15;b+=1){var R=!d&&(C>>b&1)==1;b<6?y[b][8]=R:b<8?y[b+1][8]=R:y[k-15+b][8]=R}for(b=0;b<15;b+=1)R=!d&&(C>>b&1)==1,b<8?y[8][k-b-1]=R:b<9?y[8][15-b-1+1]=R:y[8][15-b-1]=R;y[k-8][8]=!d},_=function(d,h){for(var p=-1,C=k-1,b=7,R=0,N=ct.getMaskFunction(h),D=k-1;D>0;D-=2)for(D==6&&(D-=1);;){for(var W=0;W<2;W+=1)if(y[C][D-W]==null){var U=!1;R<d.length&&(U=(d[R]>>>b&1)==1),N(C,D-W)&&(U=!U),y[C][D-W]=U,(b-=1)==-1&&(R+=1,b=7)}if((C+=p)<0||k<=C){C-=p,p=-p;break}}},g=function(d,h,p){for(var C=Ee.getRSBlocks(d,h),b=ge(),R=0;R<p.length;R+=1){var N=p[R];b.put(N.getMode(),4),b.put(N.getLength(),ct.getLengthInBits(N.getMode(),d)),N.write(b)}var D=0;for(R=0;R<C.length;R+=1)D+=C[R].dataCount;if(b.getLengthInBits()>8*D)throw"code length overflow. ("+b.getLengthInBits()+">"+8*D+")";for(b.getLengthInBits()+4<=8*D&&b.put(0,4);b.getLengthInBits()%8!=0;)b.putBit(!1);for(;!(b.getLengthInBits()>=8*D||(b.put(236,8),b.getLengthInBits()>=8*D));)b.put(17,8);return function(W,U){for(var it=0,_t=0,Y=0,ot=new Array(U.length),et=new Array(U.length),rt=0;rt<U.length;rt+=1){var zt=U[rt].dataCount,bt=U[rt].totalCount-zt;_t=Math.max(_t,zt),Y=Math.max(Y,bt),ot[rt]=new Array(zt);for(var st=0;st<ot[rt].length;st+=1)ot[rt][st]=255&W.getBuffer()[st+it];it+=zt;var St=ct.getErrorCorrectPolynomial(bt),Ct=It(ot[rt],St.getLength()-1).mod(St);for(et[rt]=new Array(St.getLength()-1),st=0;st<et[rt].length;st+=1){var Mt=st+Ct.getLength()-et[rt].length;et[rt][st]=Mt>=0?Ct.getAt(Mt):0}}var Dt=0;for(st=0;st<U.length;st+=1)Dt+=U[st].totalCount;var Pt=new Array(Dt),Nt=0;for(st=0;st<_t;st+=1)for(rt=0;rt<U.length;rt+=1)st<ot[rt].length&&(Pt[Nt]=ot[rt][st],Nt+=1);for(st=0;st<Y;st+=1)for(rt=0;rt<U.length;rt+=1)st<et[rt].length&&(Pt[Nt]=et[rt][st],Nt+=1);return Pt}(b,C)};$.addData=function(d,h){var p=null;switch(h=h||"Byte"){case"Numeric":p=Be(d);break;case"Alphanumeric":p=nt(d);break;case"Byte":p=ut(d);break;case"Kanji":p=vt(d);break;default:throw"mode:"+h}L.push(p),H=null},$.isDark=function(d,h){if(d<0||k<=d||h<0||k<=h)throw d+","+h;return y[d][h]},$.getModuleCount=function(){return k},$.make=function(){if(E<1){for(var d=1;d<40;d++){for(var h=Ee.getRSBlocks(d,S),p=ge(),C=0;C<L.length;C++){var b=L[C];p.put(b.getMode(),4),p.put(b.getLength(),ct.getLengthInBits(b.getMode(),d)),b.write(p)}var R=0;for(C=0;C<h.length;C++)R+=h[C].dataCount;if(p.getLengthInBits()<=8*R)break}E=d}Et(!1,function(){for(var N=0,D=0,W=0;W<8;W+=1){Et(!0,W);var U=ct.getLostPoint($);(W==0||N>U)&&(N=U,D=W)}return D}())},$.createTableTag=function(d,h){d=d||2;var p="";p+='<table style="',p+=" border-width: 0px; border-style: none;",p+=" border-collapse: collapse;",p+=" padding: 0px; margin: "+(h=h===void 0?4*d:h)+"px;",p+='">',p+="<tbody>";for(var C=0;C<$.getModuleCount();C+=1){p+="<tr>";for(var b=0;b<$.getModuleCount();b+=1)p+='<td style="',p+=" border-width: 0px; border-style: none;",p+=" border-collapse: collapse;",p+=" padding: 0px; margin: 0px;",p+=" width: "+d+"px;",p+=" height: "+d+"px;",p+=" background-color: ",p+=$.isDark(C,b)?"#000000":"#ffffff",p+=";",p+='"/>';p+="</tr>"}return(p+="</tbody>")+"</table>"},$.createSvgTag=function(d,h,p,C){var b={};typeof arguments[0]=="object"&&(d=(b=arguments[0]).cellSize,h=b.margin,p=b.alt,C=b.title),d=d||2,h=h===void 0?4*d:h,(p=typeof p=="string"?{text:p}:p||{}).text=p.text||null,p.id=p.text?p.id||"qrcode-description":null,(C=typeof C=="string"?{text:C}:C||{}).text=C.text||null,C.id=C.text?C.id||"qrcode-title":null;var R,N,D,W,U=$.getModuleCount()*d+2*h,it="";for(W="l"+d+",0 0,"+d+" -"+d+",0 0,-"+d+"z ",it+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',it+=b.scalable?"":' width="'+U+'px" height="'+U+'px"',it+=' viewBox="0 0 '+U+" "+U+'" ',it+=' preserveAspectRatio="xMinYMin meet"',it+=C.text||p.text?' role="img" aria-labelledby="'+j([C.id,p.id].join(" ").trim())+'"':"",it+=">",it+=C.text?'<title id="'+j(C.id)+'">'+j(C.text)+"</title>":"",it+=p.text?'<description id="'+j(p.id)+'">'+j(p.text)+"</description>":"",it+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',it+='<path d="',N=0;N<$.getModuleCount();N+=1)for(D=N*d+h,R=0;R<$.getModuleCount();R+=1)$.isDark(N,R)&&(it+="M"+(R*d+h)+","+D+W);return(it+='" stroke="transparent" fill="black"/>')+"</svg>"},$.createDataURL=function(d,h){d=d||2,h=h===void 0?4*d:h;var p=$.getModuleCount()*d+2*h,C=h,b=p-h;return oe(p,p,function(R,N){if(C<=R&&R<b&&C<=N&&N<b){var D=Math.floor((R-C)/d),W=Math.floor((N-C)/d);return $.isDark(W,D)?0:1}return 1})},$.createImgTag=function(d,h,p){d=d||2,h=h===void 0?4*d:h;var C=$.getModuleCount()*d+2*h,b="";return b+="<img",b+=' src="',b+=$.createDataURL(d,h),b+='"',b+=' width="',b+=C,b+='"',b+=' height="',b+=C,b+='"',p&&(b+=' alt="',b+=j(p),b+='"'),b+"/>"};var j=function(d){for(var h="",p=0;p<d.length;p+=1){var C=d.charAt(p);switch(C){case"<":h+="&lt;";break;case">":h+="&gt;";break;case"&":h+="&amp;";break;case'"':h+="&quot;";break;default:h+=C}}return h};return $.createASCII=function(d,h){if((d=d||1)<2)return function(ot){ot=ot===void 0?2:ot;var et,rt,zt,bt,st,St=1*$.getModuleCount()+2*ot,Ct=ot,Mt=St-ot,Dt={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},Pt={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},Nt="";for(et=0;et<St;et+=2){for(zt=Math.floor((et-Ct)/1),bt=Math.floor((et+1-Ct)/1),rt=0;rt<St;rt+=1)st="\u2588",Ct<=rt&&rt<Mt&&Ct<=et&&et<Mt&&$.isDark(zt,Math.floor((rt-Ct)/1))&&(st=" "),Ct<=rt&&rt<Mt&&Ct<=et+1&&et+1<Mt&&$.isDark(bt,Math.floor((rt-Ct)/1))?st+=" ":st+="\u2588",Nt+=ot<1&&et+1>=Mt?Pt[st]:Dt[st];Nt+=`
`}return St%2&&ot>0?Nt.substring(0,Nt.length-St-1)+Array(St+1).join("\u2580"):Nt.substring(0,Nt.length-1)}(h);d-=1,h=h===void 0?2*d:h;var p,C,b,R,N=$.getModuleCount()*d+2*h,D=h,W=N-h,U=Array(d+1).join("\u2588\u2588"),it=Array(d+1).join("  "),_t="",Y="";for(p=0;p<N;p+=1){for(b=Math.floor((p-D)/d),Y="",C=0;C<N;C+=1)R=1,D<=C&&C<W&&D<=p&&p<W&&$.isDark(b,Math.floor((C-D)/d))&&(R=0),Y+=R?U:it;for(b=0;b<d;b+=1)_t+=Y+`
`}return _t.substring(0,_t.length-1)},$.renderTo2dContext=function(d,h){h=h||2;for(var p=$.getModuleCount(),C=0;C<p;C++)for(var b=0;b<p;b++)d.fillStyle=$.isDark(C,b)?"black":"white",d.fillRect(C*h,b*h,h,h)},$};I.stringToBytes=(I.stringToBytesFuncs={default:function(A){for(var P=[],E=0;E<A.length;E+=1){var S=A.charCodeAt(E);P.push(255&S)}return P}}).default,I.createStringToBytes=function(A,P){var E=function(){for(var y=ce(A),k=function(){var r=y.read();if(r==-1)throw"eof";return r},H=0,L={};;){var $=y.read();if($==-1)break;var Et=k(),M=k()<<8|k();L[String.fromCharCode($<<8|Et)]=M,H+=1}if(H!=P)throw H+" != "+P;return L}(),S=63;return function(y){for(var k=[],H=0;H<y.length;H+=1){var L=y.charCodeAt(H);if(L<128)k.push(L);else{var $=E[y.charAt(H)];typeof $=="number"?(255&$)==$?k.push($):(k.push($>>>8),k.push(255&$)):k.push(S)}}return k}};var z,X,lt,Z,tt,ht={L:1,M:0,Q:3,H:2},ct=(z=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],X=1335,lt=7973,tt=function(A){for(var P=0;A!=0;)P+=1,A>>>=1;return P},(Z={}).getBCHTypeInfo=function(A){for(var P=A<<10;tt(P)-tt(X)>=0;)P^=X<<tt(P)-tt(X);return 21522^(A<<10|P)},Z.getBCHTypeNumber=function(A){for(var P=A<<12;tt(P)-tt(lt)>=0;)P^=lt<<tt(P)-tt(lt);return A<<12|P},Z.getPatternPosition=function(A){return z[A-1]},Z.getMaskFunction=function(A){switch(A){case 0:return function(P,E){return(P+E)%2==0};case 1:return function(P,E){return P%2==0};case 2:return function(P,E){return E%3==0};case 3:return function(P,E){return(P+E)%3==0};case 4:return function(P,E){return(Math.floor(P/2)+Math.floor(E/3))%2==0};case 5:return function(P,E){return P*E%2+P*E%3==0};case 6:return function(P,E){return(P*E%2+P*E%3)%2==0};case 7:return function(P,E){return(P*E%3+(P+E)%2)%2==0};default:throw"bad maskPattern:"+A}},Z.getErrorCorrectPolynomial=function(A){for(var P=It([1],0),E=0;E<A;E+=1)P=P.multiply(It([1,Vt.gexp(E)],0));return P},Z.getLengthInBits=function(A,P){if(1<=P&&P<10)switch(A){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+A}else if(P<27)switch(A){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+A}else{if(!(P<41))throw"type:"+P;switch(A){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+A}}},Z.getLostPoint=function(A){for(var P=A.getModuleCount(),E=0,S=0;S<P;S+=1)for(var y=0;y<P;y+=1){for(var k=0,H=A.isDark(S,y),L=-1;L<=1;L+=1)if(!(S+L<0||P<=S+L))for(var $=-1;$<=1;$+=1)y+$<0||P<=y+$||L==0&&$==0||H==A.isDark(S+L,y+$)&&(k+=1);k>5&&(E+=3+k-5)}for(S=0;S<P-1;S+=1)for(y=0;y<P-1;y+=1){var Et=0;A.isDark(S,y)&&(Et+=1),A.isDark(S+1,y)&&(Et+=1),A.isDark(S,y+1)&&(Et+=1),A.isDark(S+1,y+1)&&(Et+=1),Et!=0&&Et!=4||(E+=3)}for(S=0;S<P;S+=1)for(y=0;y<P-6;y+=1)A.isDark(S,y)&&!A.isDark(S,y+1)&&A.isDark(S,y+2)&&A.isDark(S,y+3)&&A.isDark(S,y+4)&&!A.isDark(S,y+5)&&A.isDark(S,y+6)&&(E+=40);for(y=0;y<P;y+=1)for(S=0;S<P-6;S+=1)A.isDark(S,y)&&!A.isDark(S+1,y)&&A.isDark(S+2,y)&&A.isDark(S+3,y)&&A.isDark(S+4,y)&&!A.isDark(S+5,y)&&A.isDark(S+6,y)&&(E+=40);var M=0;for(y=0;y<P;y+=1)for(S=0;S<P;S+=1)A.isDark(S,y)&&(M+=1);return E+Math.abs(100*M/P/P-50)/5*10},Z),Vt=function(){for(var A=new Array(256),P=new Array(256),E=0;E<8;E+=1)A[E]=1<<E;for(E=8;E<256;E+=1)A[E]=A[E-4]^A[E-5]^A[E-6]^A[E-8];for(E=0;E<255;E+=1)P[A[E]]=E;return{glog:function(S){if(S<1)throw"glog("+S+")";return P[S]},gexp:function(S){for(;S<0;)S+=255;for(;S>=256;)S-=255;return A[S]}}}();function It(A,P){if(A.length===void 0)throw A.length+"/"+P;var E=function(){for(var y=0;y<A.length&&A[y]==0;)y+=1;for(var k=new Array(A.length-y+P),H=0;H<A.length-y;H+=1)k[H]=A[H+y];return k}(),S={getAt:function(y){return E[y]},getLength:function(){return E.length},multiply:function(y){for(var k=new Array(S.getLength()+y.getLength()-1),H=0;H<S.getLength();H+=1)for(var L=0;L<y.getLength();L+=1)k[H+L]^=Vt.gexp(Vt.glog(S.getAt(H))+Vt.glog(y.getAt(L)));return It(k,0)},mod:function(y){if(S.getLength()-y.getLength()<0)return S;for(var k=Vt.glog(S.getAt(0))-Vt.glog(y.getAt(0)),H=new Array(S.getLength()),L=0;L<S.getLength();L+=1)H[L]=S.getAt(L);for(L=0;L<y.getLength();L+=1)H[L]^=Vt.gexp(Vt.glog(y.getAt(L))+k);return It(H,0).mod(y)}};return S}var Ee=function(){var A=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],P=function(S,y){var k={};return k.totalCount=S,k.dataCount=y,k},E={getRSBlocks:function(S,y){var k=function(s,m){switch(m){case ht.L:return A[4*(s-1)+0];case ht.M:return A[4*(s-1)+1];case ht.Q:return A[4*(s-1)+2];case ht.H:return A[4*(s-1)+3];default:return}}(S,y);if(k===void 0)throw"bad rs block @ typeNumber:"+S+"/errorCorrectionLevel:"+y;for(var H=k.length/3,L=[],$=0;$<H;$+=1)for(var Et=k[3*$+0],M=k[3*$+1],r=k[3*$+2],l=0;l<Et;l+=1)L.push(P(M,r));return L}};return E}(),ge=function(){var A=[],P=0,E={getBuffer:function(){return A},getAt:function(S){var y=Math.floor(S/8);return(A[y]>>>7-S%8&1)==1},put:function(S,y){for(var k=0;k<y;k+=1)E.putBit((S>>>y-k-1&1)==1)},getLengthInBits:function(){return P},putBit:function(S){var y=Math.floor(P/8);A.length<=y&&A.push(0),S&&(A[y]|=128>>>P%8),P+=1}};return E},Be=function(A){var P=A,E={getMode:function(){return 1},getLength:function(k){return P.length},write:function(k){for(var H=P,L=0;L+2<H.length;)k.put(S(H.substring(L,L+3)),10),L+=3;L<H.length&&(H.length-L==1?k.put(S(H.substring(L,L+1)),4):H.length-L==2&&k.put(S(H.substring(L,L+2)),7))}},S=function(k){for(var H=0,L=0;L<k.length;L+=1)H=10*H+y(k.charAt(L));return H},y=function(k){if("0"<=k&&k<="9")return k.charCodeAt(0)-48;throw"illegal char :"+k};return E},nt=function(A){var P=A,E={getMode:function(){return 2},getLength:function(y){return P.length},write:function(y){for(var k=P,H=0;H+1<k.length;)y.put(45*S(k.charAt(H))+S(k.charAt(H+1)),11),H+=2;H<k.length&&y.put(S(k.charAt(H)),6)}},S=function(y){if("0"<=y&&y<="9")return y.charCodeAt(0)-48;if("A"<=y&&y<="Z")return y.charCodeAt(0)-65+10;switch(y){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+y}};return E},ut=function(A){var P=I.stringToBytes(A);return{getMode:function(){return 4},getLength:function(E){return P.length},write:function(E){for(var S=0;S<P.length;S+=1)E.put(P[S],8)}}},vt=function(A){var P=I.stringToBytesFuncs.SJIS;if(!P)throw"sjis not supported.";(function(S,y){var k=P("\u53CB");if(k.length!=2||(k[0]<<8|k[1])!=38726)throw"sjis not supported."})();var E=P(A);return{getMode:function(){return 8},getLength:function(S){return~~(E.length/2)},write:function(S){for(var y=E,k=0;k+1<y.length;){var H=(255&y[k])<<8|255&y[k+1];if(33088<=H&&H<=40956)H-=33088;else{if(!(57408<=H&&H<=60351))throw"illegal char at "+(k+1)+"/"+H;H-=49472}H=192*(H>>>8&255)+(255&H),S.put(H,13),k+=2}if(k<y.length)throw"illegal char at "+(k+1)}}},pt=function(){var A=[],P={writeByte:function(E){A.push(255&E)},writeShort:function(E){P.writeByte(E),P.writeByte(E>>>8)},writeBytes:function(E,S,y){S=S||0,y=y||E.length;for(var k=0;k<y;k+=1)P.writeByte(E[k+S])},writeString:function(E){for(var S=0;S<E.length;S+=1)P.writeByte(E.charCodeAt(S))},toByteArray:function(){return A},toString:function(){var E="";E+="[";for(var S=0;S<A.length;S+=1)S>0&&(E+=","),E+=A[S];return E+"]"}};return P},ce=function(A){var P=A,E=0,S=0,y=0,k={read:function(){for(;y<8;){if(E>=P.length){if(y==0)return-1;throw"unexpected end of file./"+y}var L=P.charAt(E);if(E+=1,L=="=")return y=0,-1;L.match(/^\s$/)||(S=S<<6|H(L.charCodeAt(0)),y+=6)}var $=S>>>y-8&255;return y-=8,$}},H=function(L){if(65<=L&&L<=90)return L-65;if(97<=L&&L<=122)return L-97+26;if(48<=L&&L<=57)return L-48+52;if(L==43)return 62;if(L==47)return 63;throw"c:"+L};return k},oe=function(A,P,E){for(var S=function(M,r){var l=M,s=r,m=new Array(M*r),_={setPixel:function(d,h,p){m[h*l+d]=p},write:function(d){d.writeString("GIF87a"),d.writeShort(l),d.writeShort(s),d.writeByte(128),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(0),d.writeByte(255),d.writeByte(255),d.writeByte(255),d.writeString(","),d.writeShort(0),d.writeShort(0),d.writeShort(l),d.writeShort(s),d.writeByte(0);var h=g(2);d.writeByte(2);for(var p=0;h.length-p>255;)d.writeByte(255),d.writeBytes(h,p,255),p+=255;d.writeByte(h.length-p),d.writeBytes(h,p,h.length-p),d.writeByte(0),d.writeString(";")}},g=function(d){for(var h=1<<d,p=1+(1<<d),C=d+1,b=j(),R=0;R<h;R+=1)b.add(String.fromCharCode(R));b.add(String.fromCharCode(h)),b.add(String.fromCharCode(p));var N,D,W,U=pt(),it=(N=U,D=0,W=0,{write:function(et,rt){if(et>>>rt)throw"length over";for(;D+rt>=8;)N.writeByte(255&(et<<D|W)),rt-=8-D,et>>>=8-D,W=0,D=0;W|=et<<D,D+=rt},flush:function(){D>0&&N.writeByte(W)}});it.write(h,C);var _t=0,Y=String.fromCharCode(m[_t]);for(_t+=1;_t<m.length;){var ot=String.fromCharCode(m[_t]);_t+=1,b.contains(Y+ot)?Y+=ot:(it.write(b.indexOf(Y),C),b.size()<4095&&(b.size()==1<<C&&(C+=1),b.add(Y+ot)),Y=ot)}return it.write(b.indexOf(Y),C),it.write(p,C),it.flush(),U.toByteArray()},j=function(){var d={},h=0,p={add:function(C){if(p.contains(C))throw"dup key:"+C;d[C]=h,h+=1},size:function(){return h},indexOf:function(C){return d[C]},contains:function(C){return d[C]!==void 0}};return p};return _}(A,P),y=0;y<P;y+=1)for(var k=0;k<A;k+=1)S.setPixel(k,y,E(k,y));var H=pt();S.write(H);for(var L=function(){var M=0,r=0,l=0,s="",m={},_=function(j){s+=String.fromCharCode(g(63&j))},g=function(j){if(!(j<0)){if(j<26)return 65+j;if(j<52)return j-26+97;if(j<62)return j-52+48;if(j==62)return 43;if(j==63)return 47}throw"n:"+j};return m.writeByte=function(j){for(M=M<<8|255&j,r+=8,l+=1;r>=6;)_(M>>>r-6),r-=6},m.flush=function(){if(r>0&&(_(M<<6-r),M=0,r=0),l%3!=0)for(var j=3-l%3,d=0;d<j;d+=1)s+="="},m.toString=function(){return s},m}(),$=H.toByteArray(),Et=0;Et<$.length;Et+=1)L.writeByte($[Et]);return L.flush(),"data:image/gif;base64,"+L};return I}();T.stringToBytesFuncs["UTF-8"]=function(I){return function(z){for(var X=[],lt=0;lt<z.length;lt++){var Z=z.charCodeAt(lt);Z<128?X.push(Z):Z<2048?X.push(192|Z>>6,128|63&Z):Z<55296||Z>=57344?X.push(224|Z>>12,128|Z>>6&63,128|63&Z):(lt++,Z=65536+((1023&Z)<<10|1023&z.charCodeAt(lt)),X.push(240|Z>>18,128|Z>>12&63,128|Z>>6&63,128|63&Z))}return X}(I)},(f=typeof(n=function(){return T})=="function"?n.apply(o,[]):n)===void 0||(e.exports=f)},676:(e,o,n)=>{"use strict";n.d(o,{default:()=>Et});var f=function(){return(f=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var m in r=arguments[l])Object.prototype.hasOwnProperty.call(r,m)&&(M[m]=r[m]);return M}).apply(this,arguments)},T=function(){for(var M=0,r=0,l=arguments.length;r<l;r++)M+=arguments[r].length;var s=Array(M),m=0;for(r=0;r<l;r++)for(var _=arguments[r],g=0,j=_.length;g<j;g++,m++)s[m]=_[g];return s},I=function(M){return!!M&&typeof M=="object"&&!Array.isArray(M)};function z(M){for(var r=[],l=1;l<arguments.length;l++)r[l-1]=arguments[l];if(!r.length)return M;var s=r.shift();return s!==void 0&&I(M)&&I(s)?(M=f({},M),Object.keys(s).forEach(function(m){var _=M[m],g=s[m];Array.isArray(_)&&Array.isArray(g)?M[m]=g:I(_)&&I(g)?M[m]=z(Object.assign({},_),g):M[m]=g}),z.apply(void 0,T([M],r))):M}function X(M,r){var l=document.createElement("a");l.download=r,l.href=M,document.body.appendChild(l),l.click(),document.body.removeChild(l)}function lt(M){return r=this,l=void 0,m=function(){return function(_,g){var j,d,h,p,C={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return p={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function b(R){return function(N){return function(D){if(j)throw new TypeError("Generator is already executing.");for(;C;)try{if(j=1,d&&(h=2&D[0]?d.return:D[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,D[1])).done)return h;switch(d=0,h&&(D=[2&D[0],h.value]),D[0]){case 0:case 1:h=D;break;case 4:return C.label++,{value:D[1],done:!1};case 5:C.label++,d=D[1],D=[0];continue;case 7:D=C.ops.pop(),C.trys.pop();continue;default:if(!((h=(h=C.trys).length>0&&h[h.length-1])||D[0]!==6&&D[0]!==2)){C=0;continue}if(D[0]===3&&(!h||D[1]>h[0]&&D[1]<h[3])){C.label=D[1];break}if(D[0]===6&&C.label<h[1]){C.label=h[1],h=D;break}if(h&&C.label<h[2]){C.label=h[2],C.ops.push(D);break}h[2]&&C.ops.pop(),C.trys.pop();continue}D=g.call(_,C)}catch(W){D=[6,W],d=0}finally{j=h=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([R,N])}}}(this,function(_){return[2,new Promise(function(g){var j=new XMLHttpRequest;j.onload=function(){var d=new FileReader;d.onloadend=function(){g(d.result)},d.readAsDataURL(j.response)},j.open("GET",M),j.responseType="blob",j.send()})]})},new((s=void 0)||(s=Promise))(function(_,g){function j(p){try{h(m.next(p))}catch(C){g(C)}}function d(p){try{h(m.throw(p))}catch(C){g(C)}}function h(p){var C;p.done?_(p.value):(C=p.value,C instanceof s?C:new s(function(b){b(C)})).then(j,d)}h((m=m.apply(r,l||[])).next())});var r,l,s,m}let Z={L:.07,M:.15,Q:.25,H:.3};var tt=function(){return(tt=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var m in r=arguments[l])Object.prototype.hasOwnProperty.call(r,m)&&(M[m]=r[m]);return M}).apply(this,arguments)};let ht=function(){function M(r){var l=r.svg,s=r.type;this._svg=l,this._type=s}return M.prototype.draw=function(r,l,s,m){var _;switch(this._type){case"dots":_=this._drawDot;break;case"classy":_=this._drawClassy;break;case"classy-rounded":_=this._drawClassyRounded;break;case"rounded":_=this._drawRounded;break;case"extra-rounded":_=this._drawExtraRounded;break;case"square":default:_=this._drawSquare}_.call(this,{x:r,y:l,size:s,getNeighbor:m})},M.prototype._rotateFigure=function(r){var l,s=r.x,m=r.y,_=r.size,g=r.rotation,j=g===void 0?0:g,d=s+_/2,h=m+_/2;(0,r.draw)(),(l=this._element)===null||l===void 0||l.setAttribute("transform","rotate("+180*j/Math.PI+","+d+","+h+")")},M.prototype._basicDot=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),l._element.setAttribute("cx",String(m+s/2)),l._element.setAttribute("cy",String(_+s/2)),l._element.setAttribute("r",String(s/2))}}))},M.prototype._basicSquare=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),l._element.setAttribute("x",String(m)),l._element.setAttribute("y",String(_)),l._element.setAttribute("width",String(s)),l._element.setAttribute("height",String(s))}}))},M.prototype._basicSideRounded=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+m+" "+_+"v "+s+"h "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, 0 "+-s)}}))},M.prototype._basicCornerRounded=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+m+" "+_+"v "+s+"h "+s+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},M.prototype._basicCornerExtraRounded=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+m+" "+_+"v "+s+"h "+s+"a "+s+" "+s+", 0, 0, 0, "+-s+" "+-s)}}))},M.prototype._basicCornersRounded=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+m+" "+_+"v "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+s/2+" "+s/2+"h "+s/2+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},M.prototype._drawDot=function(r){var l=r.x,s=r.y,m=r.size;this._basicDot({x:l,y:s,size:m,rotation:0})},M.prototype._drawSquare=function(r){var l=r.x,s=r.y,m=r.size;this._basicSquare({x:l,y:s,size:m,rotation:0})},M.prototype._drawRounded=function(r){var l=r.x,s=r.y,m=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,d=_?+_(0,-1):0,h=_?+_(0,1):0,p=g+j+d+h;if(p!==0)if(p>2||g&&j||d&&h)this._basicSquare({x:l,y:s,size:m,rotation:0});else{if(p===2){var C=0;return g&&d?C=Math.PI/2:d&&j?C=Math.PI:j&&h&&(C=-Math.PI/2),void this._basicCornerRounded({x:l,y:s,size:m,rotation:C})}if(p===1)return C=0,d?C=Math.PI/2:j?C=Math.PI:h&&(C=-Math.PI/2),void this._basicSideRounded({x:l,y:s,size:m,rotation:C})}else this._basicDot({x:l,y:s,size:m,rotation:0})},M.prototype._drawExtraRounded=function(r){var l=r.x,s=r.y,m=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,d=_?+_(0,-1):0,h=_?+_(0,1):0,p=g+j+d+h;if(p!==0)if(p>2||g&&j||d&&h)this._basicSquare({x:l,y:s,size:m,rotation:0});else{if(p===2){var C=0;return g&&d?C=Math.PI/2:d&&j?C=Math.PI:j&&h&&(C=-Math.PI/2),void this._basicCornerExtraRounded({x:l,y:s,size:m,rotation:C})}if(p===1)return C=0,d?C=Math.PI/2:j?C=Math.PI:h&&(C=-Math.PI/2),void this._basicSideRounded({x:l,y:s,size:m,rotation:C})}else this._basicDot({x:l,y:s,size:m,rotation:0})},M.prototype._drawClassy=function(r){var l=r.x,s=r.y,m=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,d=_?+_(0,-1):0,h=_?+_(0,1):0;g+j+d+h!==0?g||d?j||h?this._basicSquare({x:l,y:s,size:m,rotation:0}):this._basicCornerRounded({x:l,y:s,size:m,rotation:Math.PI/2}):this._basicCornerRounded({x:l,y:s,size:m,rotation:-Math.PI/2}):this._basicCornersRounded({x:l,y:s,size:m,rotation:Math.PI/2})},M.prototype._drawClassyRounded=function(r){var l=r.x,s=r.y,m=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,d=_?+_(0,-1):0,h=_?+_(0,1):0;g+j+d+h!==0?g||d?j||h?this._basicSquare({x:l,y:s,size:m,rotation:0}):this._basicCornerExtraRounded({x:l,y:s,size:m,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:l,y:s,size:m,rotation:-Math.PI/2}):this._basicCornersRounded({x:l,y:s,size:m,rotation:Math.PI/2})},M}();var ct=function(){return(ct=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var m in r=arguments[l])Object.prototype.hasOwnProperty.call(r,m)&&(M[m]=r[m]);return M}).apply(this,arguments)};let Vt=function(){function M(r){var l=r.svg,s=r.type;this._svg=l,this._type=s}return M.prototype.draw=function(r,l,s,m){var _;switch(this._type){case"square":_=this._drawSquare;break;case"extra-rounded":_=this._drawExtraRounded;break;case"dot":default:_=this._drawDot}_.call(this,{x:r,y:l,size:s,rotation:m})},M.prototype._rotateFigure=function(r){var l,s=r.x,m=r.y,_=r.size,g=r.rotation,j=g===void 0?0:g,d=s+_/2,h=m+_/2;(0,r.draw)(),(l=this._element)===null||l===void 0||l.setAttribute("transform","rotate("+180*j/Math.PI+","+d+","+h+")")},M.prototype._basicDot=function(r){var l=this,s=r.size,m=r.x,_=r.y,g=s/7;this._rotateFigure(ct(ct({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("clip-rule","evenodd"),l._element.setAttribute("d","M "+(m+s/2)+" "+_+"a "+s/2+" "+s/2+" 0 1 0 0.1 0zm 0 "+g+"a "+(s/2-g)+" "+(s/2-g)+" 0 1 1 -0.1 0Z")}}))},M.prototype._basicSquare=function(r){var l=this,s=r.size,m=r.x,_=r.y,g=s/7;this._rotateFigure(ct(ct({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("clip-rule","evenodd"),l._element.setAttribute("d","M "+m+" "+_+"v "+s+"h "+s+"v "+-s+"zM "+(m+g)+" "+(_+g)+"h "+(s-2*g)+"v "+(s-2*g)+"h "+(2*g-s)+"z")}}))},M.prototype._basicExtraRounded=function(r){var l=this,s=r.size,m=r.x,_=r.y,g=s/7;this._rotateFigure(ct(ct({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("clip-rule","evenodd"),l._element.setAttribute("d","M "+m+" "+(_+2.5*g)+"v "+2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*g+" "+2.5*g+"h "+2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*g+" "+2.5*-g+"v "+-2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*-g+" "+2.5*-g+"h "+-2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*-g+" "+2.5*g+"M "+(m+2.5*g)+" "+(_+g)+"h "+2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*g+" "+1.5*g+"v "+2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*-g+" "+1.5*g+"h "+-2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*-g+" "+1.5*-g+"v "+-2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*g+" "+1.5*-g)}}))},M.prototype._drawDot=function(r){var l=r.x,s=r.y,m=r.size,_=r.rotation;this._basicDot({x:l,y:s,size:m,rotation:_})},M.prototype._drawSquare=function(r){var l=r.x,s=r.y,m=r.size,_=r.rotation;this._basicSquare({x:l,y:s,size:m,rotation:_})},M.prototype._drawExtraRounded=function(r){var l=r.x,s=r.y,m=r.size,_=r.rotation;this._basicExtraRounded({x:l,y:s,size:m,rotation:_})},M}();var It=function(){return(It=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var m in r=arguments[l])Object.prototype.hasOwnProperty.call(r,m)&&(M[m]=r[m]);return M}).apply(this,arguments)};let Ee=function(){function M(r){var l=r.svg,s=r.type;this._svg=l,this._type=s}return M.prototype.draw=function(r,l,s,m){var _;switch(this._type){case"square":_=this._drawSquare;break;case"dot":default:_=this._drawDot}_.call(this,{x:r,y:l,size:s,rotation:m})},M.prototype._rotateFigure=function(r){var l,s=r.x,m=r.y,_=r.size,g=r.rotation,j=g===void 0?0:g,d=s+_/2,h=m+_/2;(0,r.draw)(),(l=this._element)===null||l===void 0||l.setAttribute("transform","rotate("+180*j/Math.PI+","+d+","+h+")")},M.prototype._basicDot=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(It(It({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),l._element.setAttribute("cx",String(m+s/2)),l._element.setAttribute("cy",String(_+s/2)),l._element.setAttribute("r",String(s/2))}}))},M.prototype._basicSquare=function(r){var l=this,s=r.size,m=r.x,_=r.y;this._rotateFigure(It(It({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),l._element.setAttribute("x",String(m)),l._element.setAttribute("y",String(_)),l._element.setAttribute("width",String(s)),l._element.setAttribute("height",String(s))}}))},M.prototype._drawDot=function(r){var l=r.x,s=r.y,m=r.size,_=r.rotation;this._basicDot({x:l,y:s,size:m,rotation:_})},M.prototype._drawSquare=function(r){var l=r.x,s=r.y,m=r.size,_=r.rotation;this._basicSquare({x:l,y:s,size:m,rotation:_})},M}(),ge="circle";var Be=function(M,r,l,s){return new(l||(l=Promise))(function(m,_){function g(h){try{d(s.next(h))}catch(p){_(p)}}function j(h){try{d(s.throw(h))}catch(p){_(p)}}function d(h){var p;h.done?m(h.value):(p=h.value,p instanceof l?p:new l(function(C){C(p)})).then(g,j)}d((s=s.apply(M,r||[])).next())})},nt=function(M,r){var l,s,m,_,g={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return _={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function j(d){return function(h){return function(p){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,s&&(m=2&p[0]?s.return:p[0]?s.throw||((m=s.return)&&m.call(s),0):s.next)&&!(m=m.call(s,p[1])).done)return m;switch(s=0,m&&(p=[2&p[0],m.value]),p[0]){case 0:case 1:m=p;break;case 4:return g.label++,{value:p[1],done:!1};case 5:g.label++,s=p[1],p=[0];continue;case 7:p=g.ops.pop(),g.trys.pop();continue;default:if(!((m=(m=g.trys).length>0&&m[m.length-1])||p[0]!==6&&p[0]!==2)){g=0;continue}if(p[0]===3&&(!m||p[1]>m[0]&&p[1]<m[3])){g.label=p[1];break}if(p[0]===6&&g.label<m[1]){g.label=m[1],m=p;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(p);break}m[2]&&g.ops.pop(),g.trys.pop();continue}p=r.call(M,g)}catch(C){p=[6,C],s=0}finally{l=m=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([d,h])}}},ut=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],vt=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];let pt=function(){function M(r){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(r.width)),this._element.setAttribute("height",String(r.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=r}return Object.defineProperty(M.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),M.prototype.getElement=function(){return this._element},M.prototype.drawQR=function(r){return Be(this,void 0,void 0,function(){var l,s,m,_,g,j,d,h,p,C,b=this;return nt(this,function(R){switch(R.label){case 0:return l=r.getModuleCount(),s=Math.min(this._options.width,this._options.height)-2*this._options.margin,m=this._options.shape===ge?s/Math.sqrt(2):s,_=Math.floor(m/l),g={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=r,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(R.sent(),!this._image)return[2];j=this._options,d=j.imageOptions,h=j.qrOptions,p=d.imageSize*Z[h.errorCorrectionLevel],C=Math.floor(p*l*l),g=function(N){var D=N.originalHeight,W=N.originalWidth,U=N.maxHiddenDots,it=N.maxHiddenAxisDots,_t=N.dotSize,Y={x:0,y:0},ot={x:0,y:0};if(D<=0||W<=0||U<=0||_t<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var et=D/W;return Y.x=Math.floor(Math.sqrt(U/et)),Y.x<=0&&(Y.x=1),it&&it<Y.x&&(Y.x=it),Y.x%2==0&&Y.x--,ot.x=Y.x*_t,Y.y=1+2*Math.ceil((Y.x*et-1)/2),ot.y=Math.round(ot.x*et),(Y.y*Y.x>U||it&&it<Y.y)&&(it&&it<Y.y?(Y.y=it,Y.y%2==0&&Y.x--):Y.y-=2,ot.y=Y.y*_t,Y.x=1+2*Math.ceil((Y.y/et-1)/2),ot.x=Math.round(ot.y/et)),{height:ot.y,width:ot.x,hideYDots:Y.y,hideXDots:Y.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:C,maxHiddenAxisDots:l-14,dotSize:_}),R.label=2;case 2:return this.drawBackground(),this.drawDots(function(N,D){var W,U,it,_t,Y,ot;return!(b._options.imageOptions.hideBackgroundDots&&N>=(l-g.hideXDots)/2&&N<(l+g.hideXDots)/2&&D>=(l-g.hideYDots)/2&&D<(l+g.hideYDots)/2||!((W=ut[N])===null||W===void 0)&&W[D]||!((U=ut[N-l+7])===null||U===void 0)&&U[D]||!((it=ut[N])===null||it===void 0)&&it[D-l+7]||!((_t=vt[N])===null||_t===void 0)&&_t[D]||!((Y=vt[N-l+7])===null||Y===void 0)&&Y[D]||!((ot=vt[N])===null||ot===void 0)&&ot[D-l+7])}),this.drawCorners(),this._options.image?[4,this.drawImage({width:g.width,height:g.height,count:l,dotSize:_})]:[3,4];case 3:R.sent(),R.label=4;case 4:return[2]}})})},M.prototype.drawBackground=function(){var r,l,s,m=this._element,_=this._options;if(m){var g=(r=_.backgroundOptions)===null||r===void 0?void 0:r.gradient,j=(l=_.backgroundOptions)===null||l===void 0?void 0:l.color;if((g||j)&&this._createColor({options:g,color:j,additionalRotation:0,x:0,y:0,height:_.height,width:_.width,name:"background-color"}),(s=_.backgroundOptions)===null||s===void 0?void 0:s.round){var d=Math.min(_.width,_.height),h=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),h.setAttribute("x",String((_.width-d)/2)),h.setAttribute("y",String((_.height-d)/2)),h.setAttribute("width",String(d)),h.setAttribute("height",String(d)),h.setAttribute("rx",String(d/2*_.backgroundOptions.round)),this._backgroundClipPath.appendChild(h)}}},M.prototype.drawDots=function(r){var l,s,m=this;if(!this._qr)throw"QR code is not defined";var _=this._options,g=this._qr.getModuleCount();if(g>_.width||g>_.height)throw"The canvas is too small.";var j=Math.min(_.width,_.height)-2*_.margin,d=_.shape===ge?j/Math.sqrt(2):j,h=Math.floor(d/g),p=Math.floor((_.width-g*h)/2),C=Math.floor((_.height-g*h)/2),b=new ht({svg:this._element,type:_.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(l=_.dotsOptions)===null||l===void 0?void 0:l.gradient,color:_.dotsOptions.color,additionalRotation:0,x:0,y:0,height:_.height,width:_.width,name:"dot-color"});for(var R=function(bt){for(var st=function(Ct){return r&&!r(bt,Ct)?"continue":!((s=N._qr)===null||s===void 0)&&s.isDark(bt,Ct)?(b.draw(p+bt*h,C+Ct*h,h,function(Mt,Dt){return!(bt+Mt<0||Ct+Dt<0||bt+Mt>=g||Ct+Dt>=g)&&!(r&&!r(bt+Mt,Ct+Dt))&&!!m._qr&&m._qr.isDark(bt+Mt,Ct+Dt)}),void(b._element&&N._dotsClipPath&&N._dotsClipPath.appendChild(b._element))):"continue"},St=0;St<g;St++)st(St)},N=this,D=0;D<g;D++)R(D);if(_.shape===ge){var W=Math.floor((j/h-g)/2),U=g+2*W,it=p-W*h,_t=C-W*h,Y=[],ot=Math.floor(U/2);for(D=0;D<U;D++){Y[D]=[];for(var et=0;et<U;et++)D>=W-1&&D<=U-W&&et>=W-1&&et<=U-W||Math.sqrt((D-ot)*(D-ot)+(et-ot)*(et-ot))>ot?Y[D][et]=0:Y[D][et]=this._qr.isDark(et-2*W<0?et:et>=g?et-2*W:et-W,D-2*W<0?D:D>=g?D-2*W:D-W)?1:0}var rt=function(bt){for(var st=function(Ct){if(!Y[bt][Ct])return"continue";b.draw(it+bt*h,_t+Ct*h,h,function(Mt,Dt){var Pt;return!!(!((Pt=Y[bt+Mt])===null||Pt===void 0)&&Pt[Ct+Dt])}),b._element&&zt._dotsClipPath&&zt._dotsClipPath.appendChild(b._element)},St=0;St<U;St++)st(St)},zt=this;for(D=0;D<U;D++)rt(D)}},M.prototype.drawCorners=function(){var r=this;if(!this._qr)throw"QR code is not defined";var l=this._element,s=this._options;if(!l)throw"Element code is not defined";var m=this._qr.getModuleCount(),_=Math.min(s.width,s.height)-2*s.margin,g=s.shape===ge?_/Math.sqrt(2):_,j=Math.floor(g/m),d=7*j,h=3*j,p=Math.floor((s.width-m*j)/2),C=Math.floor((s.height-m*j)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(b){var R,N,D,W,U,it,_t,Y,ot,et,rt,zt,bt=b[0],st=b[1],St=b[2],Ct=p+bt*j*(m-7),Mt=C+st*j*(m-7),Dt=r._dotsClipPath,Pt=r._dotsClipPath;if((!((R=s.cornersSquareOptions)===null||R===void 0)&&R.gradient||!((N=s.cornersSquareOptions)===null||N===void 0)&&N.color)&&((Dt=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+bt+"-"+st),r._defs.appendChild(Dt),r._cornersSquareClipPath=r._cornersDotClipPath=Pt=Dt,r._createColor({options:(D=s.cornersSquareOptions)===null||D===void 0?void 0:D.gradient,color:(W=s.cornersSquareOptions)===null||W===void 0?void 0:W.color,additionalRotation:St,x:Ct,y:Mt,height:d,width:d,name:"corners-square-color-"+bt+"-"+st})),(U=s.cornersSquareOptions)===null||U===void 0?void 0:U.type){var Nt=new Vt({svg:r._element,type:s.cornersSquareOptions.type});Nt.draw(Ct,Mt,d,St),Nt._element&&Dt&&Dt.appendChild(Nt._element)}else for(var De=new ht({svg:r._element,type:s.dotsOptions.type}),Hn=function(_e){for(var Ki=function(Oe){if(!(!((it=ut[_e])===null||it===void 0)&&it[Oe]))return"continue";De.draw(Ct+_e*j,Mt+Oe*j,j,function(Zi,to){var Fe;return!!(!((Fe=ut[_e+Zi])===null||Fe===void 0)&&Fe[Oe+to])}),De._element&&Dt&&Dt.appendChild(De._element)},Ae=0;Ae<ut[_e].length;Ae++)Ki(Ae)},Pe=0;Pe<ut.length;Pe++)Hn(Pe);if((!((_t=s.cornersDotOptions)===null||_t===void 0)&&_t.gradient||!((Y=s.cornersDotOptions)===null||Y===void 0)&&Y.color)&&((Pt=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+bt+"-"+st),r._defs.appendChild(Pt),r._cornersDotClipPath=Pt,r._createColor({options:(ot=s.cornersDotOptions)===null||ot===void 0?void 0:ot.gradient,color:(et=s.cornersDotOptions)===null||et===void 0?void 0:et.color,additionalRotation:St,x:Ct+2*j,y:Mt+2*j,height:h,width:h,name:"corners-dot-color-"+bt+"-"+st})),(rt=s.cornersDotOptions)===null||rt===void 0?void 0:rt.type){var Ji=new Ee({svg:r._element,type:s.cornersDotOptions.type});Ji.draw(Ct+2*j,Mt+2*j,h,St),Ji._element&&Pt&&Pt.appendChild(Ji._element)}else{De=new ht({svg:r._element,type:s.dotsOptions.type});var Qn=function(_e){for(var Ki=function(Oe){if(!(!((zt=vt[_e])===null||zt===void 0)&&zt[Oe]))return"continue";De.draw(Ct+_e*j,Mt+Oe*j,j,function(Zi,to){var Fe;return!!(!((Fe=vt[_e+Zi])===null||Fe===void 0)&&Fe[Oe+to])}),De._element&&Pt&&Pt.appendChild(De._element)},Ae=0;Ae<vt[_e].length;Ae++)Ki(Ae)};for(Pe=0;Pe<vt.length;Pe++)Qn(Pe)}})},M.prototype.loadImage=function(){var r=this;return new Promise(function(l,s){var m=r._options,_=new Image;if(!m.image)return s("Image is not defined");typeof m.imageOptions.crossOrigin=="string"&&(_.crossOrigin=m.imageOptions.crossOrigin),r._image=_,_.onload=function(){l()},_.src=m.image})},M.prototype.drawImage=function(r){var l=r.width,s=r.height,m=r.count,_=r.dotSize;return Be(this,void 0,void 0,function(){var g,j,d,h,p,C,b,R,N;return nt(this,function(D){switch(D.label){case 0:return g=this._options,j=Math.floor((g.width-m*_)/2),d=Math.floor((g.height-m*_)/2),h=j+g.imageOptions.margin+(m*_-l)/2,p=d+g.imageOptions.margin+(m*_-s)/2,C=l-2*g.imageOptions.margin,b=s-2*g.imageOptions.margin,(R=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(h)),R.setAttribute("y",String(p)),R.setAttribute("width",C+"px"),R.setAttribute("height",b+"px"),[4,lt(g.image||"")];case 1:return N=D.sent(),R.setAttribute("href",N||""),this._element.appendChild(R),[2]}})})},M.prototype._createColor=function(r){var l=r.options,s=r.color,m=r.additionalRotation,_=r.x,g=r.y,j=r.height,d=r.width,h=r.name,p=d>j?d:j,C=document.createElementNS("http://www.w3.org/2000/svg","rect");if(C.setAttribute("x",String(_)),C.setAttribute("y",String(g)),C.setAttribute("height",String(j)),C.setAttribute("width",String(d)),C.setAttribute("clip-path","url('#clip-path-"+h+"')"),l){var b;if(l.type==="radial")(b=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",h),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("fx",String(_+d/2)),b.setAttribute("fy",String(g+j/2)),b.setAttribute("cx",String(_+d/2)),b.setAttribute("cy",String(g+j/2)),b.setAttribute("r",String(p/2));else{var R=((l.rotation||0)+m)%(2*Math.PI),N=(R+2*Math.PI)%(2*Math.PI),D=_+d/2,W=g+j/2,U=_+d/2,it=g+j/2;N>=0&&N<=.25*Math.PI||N>1.75*Math.PI&&N<=2*Math.PI?(D-=d/2,W-=j/2*Math.tan(R),U+=d/2,it+=j/2*Math.tan(R)):N>.25*Math.PI&&N<=.75*Math.PI?(W-=j/2,D-=d/2/Math.tan(R),it+=j/2,U+=d/2/Math.tan(R)):N>.75*Math.PI&&N<=1.25*Math.PI?(D+=d/2,W+=j/2*Math.tan(R),U-=d/2,it-=j/2*Math.tan(R)):N>1.25*Math.PI&&N<=1.75*Math.PI&&(W+=j/2,D+=d/2/Math.tan(R),it-=j/2,U-=d/2/Math.tan(R)),(b=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",h),b.setAttribute("gradientUnits","userSpaceOnUse"),b.setAttribute("x1",String(Math.round(D))),b.setAttribute("y1",String(Math.round(W))),b.setAttribute("x2",String(Math.round(U))),b.setAttribute("y2",String(Math.round(it)))}l.colorStops.forEach(function(_t){var Y=_t.offset,ot=_t.color,et=document.createElementNS("http://www.w3.org/2000/svg","stop");et.setAttribute("offset",100*Y+"%"),et.setAttribute("stop-color",ot),b.appendChild(et)}),C.setAttribute("fill","url('#"+h+"')"),this._defs.appendChild(b)}else s&&C.setAttribute("fill",s);this._element.appendChild(C)},M}(),ce="canvas";for(var oe={},A=0;A<=40;A++)oe[A]=A;let P={type:ce,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:oe[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var E=function(){return(E=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var m in r=arguments[l])Object.prototype.hasOwnProperty.call(r,m)&&(M[m]=r[m]);return M}).apply(this,arguments)};function S(M){var r=E({},M);if(!r.colorStops||!r.colorStops.length)throw"Field 'colorStops' is required in gradient";return r.rotation?r.rotation=Number(r.rotation):r.rotation=0,r.colorStops=r.colorStops.map(function(l){return E(E({},l),{offset:Number(l.offset)})}),r}function y(M){var r=E({},M);return r.width=Number(r.width),r.height=Number(r.height),r.margin=Number(r.margin),r.imageOptions=E(E({},r.imageOptions),{hideBackgroundDots:!!r.imageOptions.hideBackgroundDots,imageSize:Number(r.imageOptions.imageSize),margin:Number(r.imageOptions.margin)}),r.margin>Math.min(r.width,r.height)&&(r.margin=Math.min(r.width,r.height)),r.dotsOptions=E({},r.dotsOptions),r.dotsOptions.gradient&&(r.dotsOptions.gradient=S(r.dotsOptions.gradient)),r.cornersSquareOptions&&(r.cornersSquareOptions=E({},r.cornersSquareOptions),r.cornersSquareOptions.gradient&&(r.cornersSquareOptions.gradient=S(r.cornersSquareOptions.gradient))),r.cornersDotOptions&&(r.cornersDotOptions=E({},r.cornersDotOptions),r.cornersDotOptions.gradient&&(r.cornersDotOptions.gradient=S(r.cornersDotOptions.gradient))),r.backgroundOptions&&(r.backgroundOptions=E({},r.backgroundOptions),r.backgroundOptions.gradient&&(r.backgroundOptions.gradient=S(r.backgroundOptions.gradient))),r}var k=n(192),H=n.n(k),L=function(M,r,l,s){return new(l||(l=Promise))(function(m,_){function g(h){try{d(s.next(h))}catch(p){_(p)}}function j(h){try{d(s.throw(h))}catch(p){_(p)}}function d(h){var p;h.done?m(h.value):(p=h.value,p instanceof l?p:new l(function(C){C(p)})).then(g,j)}d((s=s.apply(M,r||[])).next())})},$=function(M,r){var l,s,m,_,g={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return _={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function j(d){return function(h){return function(p){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,s&&(m=2&p[0]?s.return:p[0]?s.throw||((m=s.return)&&m.call(s),0):s.next)&&!(m=m.call(s,p[1])).done)return m;switch(s=0,m&&(p=[2&p[0],m.value]),p[0]){case 0:case 1:m=p;break;case 4:return g.label++,{value:p[1],done:!1};case 5:g.label++,s=p[1],p=[0];continue;case 7:p=g.ops.pop(),g.trys.pop();continue;default:if(!((m=(m=g.trys).length>0&&m[m.length-1])||p[0]!==6&&p[0]!==2)){g=0;continue}if(p[0]===3&&(!m||p[1]>m[0]&&p[1]<m[3])){g.label=p[1];break}if(p[0]===6&&g.label<m[1]){g.label=m[1],m=p;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(p);break}m[2]&&g.ops.pop(),g.trys.pop();continue}p=r.call(M,g)}catch(C){p=[6,C],s=0}finally{l=m=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([d,h])}}};let Et=function(){function M(r){this._options=r?y(z(P,r)):P,this.update()}return M._clearContainer=function(r){r&&(r.innerHTML="")},M.prototype._setupSvg=function(){var r=this;if(this._qr){var l=new pt(this._options);this._svg=l.getElement(),this._svgDrawingPromise=l.drawQR(this._qr).then(function(){var s;r._svg&&((s=r._extension)===null||s===void 0||s.call(r,l.getElement(),r._options))})}},M.prototype._setupCanvas=function(){var r,l=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=(r=this._svgDrawingPromise)===null||r===void 0?void 0:r.then(function(){if(l._svg){var s=l._svg,m=new XMLSerializer().serializeToString(s),_="data:image/svg+xml;base64,"+btoa(m),g=new Image;return new Promise(function(j){g.onload=function(){var d,h;(h=(d=l._canvas)===null||d===void 0?void 0:d.getContext("2d"))===null||h===void 0||h.drawImage(g,0,0),j()},g.src=_})}}))},M.prototype._getElement=function(r){return r===void 0&&(r="png"),L(this,void 0,void 0,function(){return $(this,function(l){switch(l.label){case 0:if(!this._qr)throw"QR code is empty";return r.toLowerCase()!=="svg"?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return l.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return l.sent(),[2,this._canvas]}})})},M.prototype.update=function(r){M._clearContainer(this._container),this._options=r?y(z(this._options,r)):this._options,this._options.data&&(this._qr=H()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(l){switch(!0){case/^[0-9]*$/.test(l):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(l):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===ce?this._setupCanvas():this._setupSvg(),this.append(this._container))},M.prototype.append=function(r){if(r){if(typeof r.appendChild!="function")throw"Container should be a single DOM node";this._options.type===ce?this._canvas&&r.appendChild(this._canvas):this._svg&&r.appendChild(this._svg),this._container=r}},M.prototype.applyExtension=function(r){if(!r)throw"Extension function should be defined.";this._extension=r,this.update()},M.prototype.deleteExtension=function(){this._extension=void 0,this.update()},M.prototype.getRawData=function(r){return r===void 0&&(r="png"),L(this,void 0,void 0,function(){var l,s,m;return $(this,function(_){switch(_.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(r)];case 1:return(l=_.sent())?r.toLowerCase()==="svg"?(s=new XMLSerializer,m=s.serializeToString(l),[2,new Blob([`<?xml version="1.0" standalone="no"?>\r
`+m],{type:"image/svg+xml"})]):[2,new Promise(function(g){return l.toBlob(g,"image/"+r,1)})]:[2,null]}})})},M.prototype.download=function(r){return L(this,void 0,void 0,function(){var l,s,m,_,g;return $(this,function(j){switch(j.label){case 0:if(!this._qr)throw"QR code is empty";return l="png",s="qr",typeof r=="string"?(l=r,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof r=="object"&&r!==null&&(r.name&&(s=r.name),r.extension&&(l=r.extension)),[4,this._getElement(l)];case 1:return(m=j.sent())?(l.toLowerCase()==="svg"?(_=new XMLSerializer,g=`<?xml version="1.0" standalone="no"?>\r
`+(g=_.serializeToString(m)),X("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(g),s+".svg")):X(m.toDataURL("image/"+l),s+"."+l),[2]):[2]}})})},M}()}},a={};function t(e){if(a[e])return a[e].exports;var o=a[e]={exports:{}};return i[e](o,o.exports,t),o.exports}return t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t(676)})().default})});var mo=(i,a)=>a.id;function Xn(i,a){if(i&1){let t=K();c(0,"mat-chip-row",15),O("removed",function(){let o=V(t).$implicit,n=x();return B(n.removeTag(o))}),w(1),c(2,"button",16)(3,"mat-icon"),w(4,"cancel"),u()()()}if(i&2){let t=a.$implicit;F("removable",!0),v(),dt(" ",t.name," "),v(),Fo("aria-label","remove "+t.name)}}function Yn(i,a){if(i&1&&(c(0,"mat-option",13),w(1),u()),i&2){let t=a.$implicit;F("value",t),v(),dt(" ",t.name," ")}}function Un(i,a){if(i&1&&(c(0,"mat-list-option",13),w(1),u()),i&2){let t=a.$implicit;F("value",t),v(),dt(" ",t.title," ")}}function Jn(i,a){if(i&1){let t=K();c(0,"mat-selection-list",17),Qt("ngModelChange",function(o){V(t);let n=x();return Ht(n.selectedCollate,o)||(n.selectedCollate=o),B(o)}),O("selectionChange",function(o){V(t);let n=x();return B(n.onCollateSelect(o))}),ft(1,Un,2,2,"mat-list-option",13,mo),u(),c(3,"mat-paginator",18),O("page",function(o){V(t);let n=x();return B(n.handlePageEvent(o))}),u()}if(i&2){let t=x();qt("ngModel",t.selectedCollate),F("multiple",!1),v(),gt(t.collates),v(2),F("length",t.totalCount)("pageSize",t.limit)}}function Kn(i,a){i&1&&(c(0,"p"),w(1,"No collates could be found."),u())}var _n=(()=>{class i{constructor(t,e,o,n,f){this.snackBar=t,this.fb=e,this.router=o,this.collateService=n,this.dialog=f,this.collates=[],this.searchTags=[],this.selectedCollate=null,this.searchTerm="",this.limit=5,this.offset=0,this.totalCount=0,this.separatorKeysCodes=[13,188],this.form=this.fb.group({tag:[""]}),this.loading=!1}ngOnInit(){this.searchCollates(),this.filteredTags=this.form.controls.tag.valueChanges.pipe(Ke(""),jo(t=>t?t.length>=2:!1),Ze(t=>this.collateService.getCollateTags(t).pipe(Je(e=>e.results))))}searchCollates(){this.loading=!0,this.collateService.getCollates(this.limit,this.offset,this.searchTerm,this.searchTags.map(t=>t.id)).subscribe({next:t=>{this.collates=t.results,this.totalCount=t.count,this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Error loading collates","Dismiss")}})}onCollateSelect(t){this.selectedCollate=t.options[0].value,this.router.navigate([`/collate/view/${t.options[0].value.id}`]).then(e=>console.log(e))}openCreateCollateDialog(){this.dialog.open(dn).afterClosed().subscribe(e=>{e&&this.collateService.createCollate(e.title,e.greeting).subscribe(o=>{this.router.navigate([`/collate/edit/${o.id}`]).then(n=>console.log(n))})})}handlePageEvent(t){this.limit=t.pageSize,this.offset=t.pageIndex*this.limit,this.searchCollates()}addTag(t){let e=t.option.value;e&&!this.searchTags.find(o=>o.id===e.id)&&this.searchTags.push(e),this.form.controls.tag.setValue(""),this.searchCollates()}removeTag(t){let e=this.searchTags.indexOf(t);e>=0&&this.searchTags.splice(e,1),this.searchCollates()}static{this.\u0275fac=function(e){return new(e||i)(G(se),G(Xt),G(Le),G(Me),G(He))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate"]],standalone:!0,features:[mt],decls:33,vars:8,consts:[["chipGrid",""],["auto","matAutocomplete"],[1,"collate-container"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[1,"search-box"],["mat-button","",2,"width","100%",3,"click"],["appearance","outlined",2,"width","500px"],[2,"width","100%"],["matInput","","placeholder","Search Collates",3,"ngModelChange","ngModel"],[3,"removable"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],[3,"removed","removable"],["matChipRemove",""],[3,"ngModelChange","selectionChange","ngModel","multiple"],[3,"page","length","pageSize"]],template:function(e,o){if(e&1){let n=K();c(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),w(4,"C|nder Collates"),u(),Q(5,"br"),u()(),c(6,"div",5)(7,"div")(8,"button",6),O("click",function(){return V(n),B(o.openCreateCollateDialog())}),c(9,"h3"),w(10,"+ Create Collate From Projects"),u()()(),Q(11,"hr"),c(12,"mat-card",7)(13,"mat-card-content")(14,"mat-form-field",8)(15,"input",9),Qt("ngModelChange",function(T){return V(n),Ht(o.searchTerm,T)||(o.searchTerm=T),B(T)}),O("ngModelChange",function(){return V(n),B(o.searchCollates())}),u()(),c(16,"mat-form-field",8)(17,"mat-label"),w(18,"Search Tags"),u(),c(19,"mat-chip-grid",null,0),ft(21,Xn,5,3,"mat-chip-row",10,mo),Q(23,"input",11),u(),c(24,"mat-autocomplete",12,1),O("optionSelected",function(T){return V(n),B(o.addTag(T))}),ft(26,Yn,2,2,"mat-option",13,mo),si(28,"async"),u()(),c(29,"button",14),O("click",function(){return V(n),B(o.searchCollates())}),w(30,"Search"),u(),q(31,Jn,4,4)(32,Kn,2,0,"p"),u()()()()}if(e&2){let n=ne(20),f=ne(25);v(15),qt("ngModel",o.searchTerm),v(6),gt(o.searchTags),v(2),F("matChipInputFor",n)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("formControl",o.form.controls.tag)("matAutocomplete",f),v(3),gt(li(28,6,o.filteredTags)),v(5),J(o.collates.length>0?31:32)}},dependencies:[Yt,Se,Wt,Ft,be,Ut,ui,hi,me,qe,ze,Tt,gi,$t,_i,pn,cn,ln,Ne,xi,di,ie,tn,yi],styles:[".collate-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:80vh}.search-box[_ngcontent-%COMP%]{width:500px}"]})}}return i})();var Cn=(()=>{class i{constructor(){this.collate=null}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-header"]],inputs:{collate:"collate"},standalone:!0,features:[mt],decls:7,vars:2,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"]],template:function(e,o){e&1&&(c(0,"div",0)(1,"div",1)(2,"h1"),w(3),u(),Q(4,"br"),c(5,"div",2),w(6),u()()()),e&2&&(v(3),yt(o.collate==null?null:o.collate.title),v(3),yt(o.collate==null?null:o.collate.greeting))},styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return i})();function tr(i,a){if(i&1&&(c(0,"p"),w(1),Q(2,"br"),w(3),u(),Q(4,"mat-progress-bar",8)),i&2){let t=x();v(),dt("Elapsed Time: ",t.elapsedTime," seconds"),v(2),dt(" ",t.progress," ")}}var qi=(()=>{class i{constructor(t,e,o,n,f){this.snackBar=t,this.ws=e,this.fb=o,this.web=n,this.sb=f,this.projects=[],this.loading=!1,this.searchStartTime=null,this.elapsedTime="0.00",this.progress="",this.form=this.fb.group({searchQuery:new ae("",re.required),searchMode:new ae("gene",re.required)}),this.searchResultID=new wt,this.ws.searchWSConnection?.subscribe(T=>{if(T&&T.type==="search_status")switch(T.status){case"complete":this.loading=!1,clearInterval(this.timerInterval);let I=this.calculateElapsedTime();this.progress="",this.showSnackBar(`Search complete in ${I} seconds`),this.searchResultID.emit(parseInt(T.id));break;case"in_progress":this.progress=`Current progress: ${T.current_progress}/${T.found_files}`;break;case"error":this.loading=!1,this.progress="Search error",this.showSnackBar("Search error");break}})}runSearch(){return Zt(this,null,function*(){if(this.form.invalid)return;this.loading=!0,this.progress="Current progress: search initiated",this.searchStartTime=new Date,this.elapsedTime="0.00",this.timerInterval=setInterval(()=>{this.elapsedTime=this.calculateElapsedTime().toFixed(2)},200);let t=[];if(this.projects.length>0){let e=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();if(e)for(let o of e)t.push(o.id)}if(this.form.value.searchQuery&&this.form.value.searchMode){let o=this.form.value.searchQuery.toUpperCase().split("OR").map(n=>`"${n.trim().replace(/'/g,"").replace(/"/g,"")}"`);this.web.createSearch(t,o.join(" OR "),this.web.searchSessionID,1e-9,1e-9,this.form.value.searchMode).subscribe({next:()=>{this.sb.open("Search queued","Dismiss",{duration:2e3})},error:()=>{this.loading=!1,clearInterval(this.timerInterval),this.showSnackBar("Search error")}})}})}showSnackBar(t){this.snackBar.open(t,"Close",{duration:3e3})}calculateElapsedTime(){return this.searchStartTime?(new Date().getTime()-this.searchStartTime.getTime())/1e3:0}static{this.\u0275fac=function(e){return new(e||i)(G(se),G(wi),G(Xt),G(Jt),G(se))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-search"]],inputs:{projects:"projects"},outputs:{searchResultID:"searchResultID"},standalone:!0,features:[mt],decls:22,vars:2,consts:[["appearance","outlined"],[2,"display","flex","gap","20px","align-items","center",3,"ngSubmit","formGroup"],[2,"width","500px"],["matInput","","placeholder","Search Query","formControlName","searchQuery"],["formControlName","searchMode"],["value","pi"],["value","gene"],["mat-icon-button","","color","primary","type","submit"],["mode","indeterminate"]],template:function(e,o){e&1&&(c(0,"mat-card",0)(1,"mat-card-content")(2,"form",1),O("ngSubmit",function(){return o.runSearch()}),c(3,"mat-form-field",2),Q(4,"input",3),u(),c(5,"mat-form-field")(6,"mat-label"),w(7,"Search Mode"),u(),c(8,"mat-select",4)(9,"mat-option",5),w(10,"Primary Ids"),u(),c(11,"mat-option",6),w(12,"Gene Names"),u()()(),c(13,"button",7)(14,"mat-icon"),w(15,"search"),u()()(),c(16,"p"),w(17," For multiple search terms separate them with "),c(18,"b"),w(19,"OR"),u(),w(20,". "),u(),q(21,tr,5,2),u()()),e&2&&(v(2),F("formGroup",o.form),v(19),J(o.loading?21:-1))},dependencies:[Ut,ie,ee,Wt,Ft,te,pe,de,Yt,we,$t,qe,ze,Ne,sn,me,mn]})}}return i})();var ir=bo(Wn());po.plotlyjs=ir;var vn=(()=>{class i{set searchTerm(t){t?this._searchTerm=t:this._searchTerm=""}get searchTerm(){return this._searchTerm}set renameCondition(t){t?this._renameCondition=t:this._renameCondition={}}get renameCondition(){return this._renameCondition}set data(t){this._data=t,this.graphLayout.title.text=t?.analysis_group?.name||"",this.graphLayout.yaxis.title=this.searchTerm||"",this.conditionA=t?.condition_A||"",this.conditionB=t?.condition_B||"",this.drawGraph()}get data(){return this._data}set expanded(t){this._expanded=t,this.data&&this.drawGraph()}get expanded(){return this._expanded}set colorMap(t){t&&(this._colorMap=t,this.data&&t&&this.drawGraph())}get colorMap(){return this._colorMap}constructor(t,e){this.graph=t,this.accounts=e,this._data=null,this._renameCondition={},this._searchTerm="",this._expanded=!1,this.graphData=[],this.graphLayout={title:{text:"",font:{size:16}},height:400,margin:{l:150,r:100,b:100,t:100},yaxis:{title:this.searchTerm,tickfont:{size:14}}},this.conditionA="",this.conditionB="",this.valueA=[],this.valueB=[],this.barSize=50,this.revision=0,this._colorMap={},this.currentColor=0,this.graph.redrawTrigger.subscribe(()=>{this.drawGraph()})}drawGraph(){this.loadPlotSettings(),this.graph.plotSettings.showTitle||(this.graphLayout.title.text="");let t=this.renameCondition[this.conditionA];t||(t=this.conditionA);let e=this.renameCondition[this.conditionB];e||(e=this.conditionB);let o=document.getElementsByTagName("body")[0],f=window.getComputedStyle(o).backgroundColor;this.accounts.userAccount.darkMode?(this.graphLayout.plot_bgcolor=f,this.graphLayout.paper_bgcolor=f,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white"):(this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14});let T=0;if(this.data&&this.data.condition_A&&this.data.condition_B&&this.data.searched_data&&!this.expanded){this.conditionA=this.data.condition_A||"",this.conditionB=this.data.condition_B||"",this.valueA=this.data.searched_data.filter(ht=>ht.Condition===this.conditionA).map(ht=>ht.Value),this.valueB=this.data.searched_data.filter(ht=>ht.Condition===this.conditionB).map(ht=>ht.Value);let I=this.calculateMean(this.valueA),z=this.calculateMean(this.valueB);this.colorMap[this.conditionA]||(this.colorMap[this.conditionA]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let X={x:[t],y:[I],type:"bar",mode:"markers",name:t,error_y:{type:"data",array:[this.calculateWhisker(this.valueA)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionA]},showlegend:!1},lt=this.drawTransparentBoxPlot(this.valueA,t);this.colorMap[this.conditionB]||(this.colorMap[this.conditionB]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let Z={x:[e],y:[z],type:"bar",mode:"markers",name:e,error_y:{type:"data",array:[this.calculateWhisker(this.valueB)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionB]},showlegend:!1},tt=this.drawTransparentBoxPlot(this.valueB,e);T=2,this.graphData=[X,lt,Z,tt]}else if(this.data&&(this.expanded||this.data.condition_A==""||this.data.condition_B=="")){let I=Array.from(new Set(this.data.searched_data.map(tt=>tt.Condition))),z=I.map(tt=>{let ht=this.data.searched_data.filter(ct=>ct.Condition===tt).map(ct=>ct.Value);return this.calculateMean(ht)}),X=I.map(tt=>{let ht=this.data.searched_data.filter(ct=>ct.Condition===tt).map(ct=>ct.Value);return this.calculateWhisker(ht)}),lt=I.map((tt,ht)=>{this.colorMap[tt]||(this.colorMap[tt]=this.graph.defaultColorList[this.currentColor],this.currentColor++,this.currentColor>=this.graph.defaultColorList.length&&(this.currentColor=0));let ct=this.renameCondition[tt];return ct||(ct=tt),{x:[ct],y:[z[ht]],type:"bar",mode:"markers",name:ct,error_y:{type:"data",array:[X[ht]],visible:!0},line:{color:"black"},marker:{color:this.colorMap[tt]},showlegend:!1}}),Z=I.map((tt,ht)=>{let ct=this.renameCondition[tt];ct||(ct=tt);let Vt=this.data.searched_data.filter(It=>It.Condition===tt).map(It=>It.Value);return this.drawTransparentBoxPlot(Vt,ct)});T=I.length,this.graphData=[...lt,...Z]}console.log(this.colorMap),this.graphLayout.width=this.graphLayout.margin.l+this.graphLayout.margin.r+this.barSize*T,this.revision++,console.log(this.graphData)}calculateMean(t){return t.reduce((o,n)=>o+n,0)/t.length}calculateWhisker(t){let e=this.calculateMean(t),o=t.reduce((n,f)=>n+Math.pow(f-e,2),0)/t.length;return Math.sqrt(o)}drawTransparentBoxPlot(t,e){return{x:e,y:t.filter(o=>!isNaN(o)),type:"box",boxpoints:"all",pointpos:0,jitter:.3,fillcolor:"rgba(255,255,255,0)",line:{color:"rgba(255,255,255,0)"},hoveron:"points",marker:{color:"#654949",opacity:.8},name:e,showlegend:!1}}loadPlotSettings(){this.graphLayout.height=this.graph.plotSettings.height,this.graphLayout.margin.l=this.graph.plotSettings.marginLeft,this.graphLayout.margin.r=this.graph.plotSettings.marginRight,this.graphLayout.margin.b=this.graph.plotSettings.marginBottom,this.graphLayout.margin.t=this.graph.plotSettings.marginTop,this.graphLayout.title.font.size=this.graph.plotSettings.titleTextSize,this.barSize=this.graph.plotSettings.barSize}static{this.\u0275fac=function(e){return new(e||i)(G(Bi),G(he))}}static{this.\u0275cmp=at({type:i,selectors:[["app-bar-chart"]],inputs:{searchTerm:"searchTerm",renameCondition:"renameCondition",data:"data",expanded:"expanded",colorMap:"colorMap"},standalone:!0,features:[mt],decls:1,vars:4,consts:[[3,"data","layout","revision","updateOnLayoutChange"]],template:function(e,o){e&1&&Q(0,"plotly-plot",0),e&2&&F("data",o.graphData)("layout",o.graphLayout)("revision",o.revision)("updateOnLayoutChange",!0)},dependencies:[po,un]})}}return i})();var or=(i,a)=>a.id;function nr(i,a){if(i&1){let t=K();c(0,"div",3)(1,"mat-slide-toggle",8),O("change",function(){V(t);let o=x(2);return B(o.expanded=!o.expanded)}),w(2," Expand Bar Chart "),u(),c(3,"mat-slide-toggle",8),O("change",function(){V(t);let o=x(2);return B(o.viewDifferentialAnalysis=!o.viewDifferentialAnalysis)}),w(4," View Differential Analysis Stats "),u()()}i&2&&(v(),F("color","primary"),v(2),F("color","primary"))}function rr(i,a){if(i&1&&(c(0,"div"),Q(1,"app-bar-chart",11),u()),i&2){let t=x().$implicit,e=x(3);v(),F("searchTerm",t.gene_name)("expanded",e.expanded)("renameCondition",e.renameCondition)("colorMap",e.colorMap)("data",t)}}function ar(i,a){i&1&&(c(0,"div")(1,"p"),w(2,"No data found for this search"),u()())}function sr(i,a){if(i&1&&(c(0,"div",9),q(1,rr,2,5,"div")(2,ar,3,0,"div"),c(3,"div")(4,"button",10)(5,"mat-icon"),w(6,"drag_handle"),u()(),c(7,"p"),w(8),u()()()),i&2){let t=a.$implicit;v(),J(t.searched_data.length>0?1:2),v(3),F("matTooltip",t.analysis_group.name),v(4),dt(" ",t.analysis_group.name," ")}}function lr(i,a){if(i&1&&ft(0,sr,9,3,"div",9,or),i&2){let t=x(2);gt(t.searchResults)}}function cr(i,a){i&1&&(c(0,"p"),w(1,"No search results found in this project"),u())}function pr(i,a){i&1&&(c(0,"th",24),w(1," Primary ID "),u())}function dr(i,a){if(i&1&&(c(0,"td",25),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t.primary_id," ")}}function mr(i,a){i&1&&(c(0,"th",24),w(1," UniProt ID "),u())}function hr(i,a){if(i&1&&(c(0,"td",25),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t.uniprot_id," ")}}function ur(i,a){i&1&&(c(0,"th",24),w(1," Gene Names "),u())}function fr(i,a){if(i&1&&(c(0,"td",25),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t.gene_name," ")}}function gr(i,a){i&1&&(c(0,"th",24),w(1," log2FC "),u())}function _r(i,a){if(i&1&&(c(0,"td",25),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t.log2_fc," ")}}function Cr(i,a){i&1&&(c(0,"th",24),w(1," -log10(p) "),u())}function vr(i,a){if(i&1&&(c(0,"td",25),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t.log10_p," ")}}function xr(i,a){i&1&&(c(0,"th",24),w(1," Condition A "),u())}function yr(i,a){if(i&1&&w(0),i&2){let t=x().$implicit,e=x(3);dt(" ",e.renameCondition[t.condition_A]," ")}}function wr(i,a){if(i&1&&w(0),i&2){let t=x().$implicit;dt(" ",t.condition_A," ")}}function br(i,a){if(i&1&&(c(0,"td",25),q(1,yr,1,1)(2,wr,1,1),u()),i&2){let t=x(3);v(),J(t.renameCondition?1:2)}}function Sr(i,a){i&1&&(c(0,"th",24),w(1," Condition B "),u())}function Mr(i,a){if(i&1&&w(0),i&2){let t=x().$implicit,e=x(3);dt(" ",e.renameCondition[t.condition_B]," ")}}function jr(i,a){if(i&1&&w(0),i&2){let t=x().$implicit;dt(" ",t.condition_B," ")}}function Tr(i,a){if(i&1&&(c(0,"td",25),q(1,Mr,1,1)(2,jr,1,1),u()),i&2){let t=x(3);v(),J(t.renameCondition?1:2)}}function kr(i,a){i&1&&(c(0,"th",24),w(1," Comparison "),u())}function Er(i,a){if(i&1&&(c(0,"td",25),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t.comparison_label," ")}}function Dr(i,a){i&1&&Q(0,"tr",26)}function Pr(i,a){i&1&&Q(0,"tr",27)}function Ar(i,a){if(i&1&&(c(0,"table",5),At(1,12),q(2,pr,2,0,"th",13)(3,dr,2,1,"td",14),Ot(),At(4,15),q(5,mr,2,0,"th",13)(6,hr,2,1,"td",14),Ot(),At(7,16),q(8,ur,2,0,"th",13)(9,fr,2,1,"td",14),Ot(),At(10,17),q(11,gr,2,0,"th",13)(12,_r,2,1,"td",14),Ot(),At(13,18),q(14,Cr,2,0,"th",13)(15,vr,2,1,"td",14),Ot(),At(16,19),q(17,xr,2,0,"th",13)(18,br,3,1,"td",14),Ot(),At(19,20),q(20,Sr,2,0,"th",13)(21,Tr,3,1,"td",14),Ot(),At(22,21),q(23,kr,2,0,"th",13)(24,Er,2,1,"td",14),Ot(),q(25,Dr,1,0,"tr",22)(26,Pr,1,0,"tr",23),u()),i&2){let t=x(2);F("dataSource",t.searchResults),v(25),F("matHeaderRowDef",t.searchResultDisplayColumns),v(),F("matRowDefColumns",t.searchResultDisplayColumns)}}function Or(i,a){if(i&1){let t=K();c(0,"button",28),O("click",function(){V(t);let o=x(2);return B(o.deleteProject.emit(o.project))}),c(1,"mat-icon"),w(2,"delete"),u()()}if(i&2){let t=x(2);oo("matTooltip","Delete Project ",t.project.name," from collate")}}function Fr(i,a){if(i&1&&(c(0,"a",7)(1,"mat-icon"),w(2,"link"),u()()),i&2){let t=x(2);oo("href","/#/project/",t.project.id,"",Po)}}function Ir(i,a){if(i&1){let t=K();c(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"span",2),w(4),u()(),c(5,"mat-card-subtitle"),w(6),u()(),c(7,"mat-card-content"),q(8,nr,5,2,"div",3),c(9,"div",4),O("cdkDropListDropped",function(o){V(t);let n=x();return B(n.drop(o))}),q(10,lr,2,0)(11,cr,2,0,"p"),u(),q(12,Ar,27,3,"table",5),u(),c(13,"mat-card-actions"),q(14,Or,3,2,"button",6)(15,Fr,3,2,"a",7),u()()}if(i&2){let t=x();v(4),yt(t.project.name),v(2),yt(t.project.description),v(2),J(t.searchResults.length>0?8:-1),v(2),J(t.searchResults.length>0?10:11),v(2),J(t.searchResults.length>0&&t.viewDifferentialAnalysis?12:-1),v(2),J(t.accounts.loggedIn?14:-1),v(),J(t.project?15:-1)}}var xn=(()=>{class i{set project(t){this._project=t}get project(){return this._project}set searchResults(t){this._searchResults=t,console.log(t)}get searchResults(){return this._searchResults}constructor(t){this.accounts=t,this._project=null,this.searchTerm="",this._searchResults=[],this.colorMap={},this.renameCondition={},this.deleteProject=new wt,this.searchResultsChange=new wt,this.searchResultDisplayColumns=["primary_id","uniprot_id","gene_name","condition_A","condition_B","log2_fc","log10_p","comparison_label"],this.expanded=!1,this.viewDifferentialAnalysis=!1}drop(t){let o=this._searchResults[t.previousIndex].analysis_group.id,n=this._searchResults.filter(f=>f.analysis_group.id===o);this._searchResults=this._searchResults.filter(f=>f.analysis_group.id!==o),this._searchResults.splice(t.currentIndex,0,...n),this.searchResultsChange.emit(this._searchResults)}static{this.\u0275fac=function(e){return new(e||i)(G(he))}}static{this.\u0275cmp=at({type:i,selectors:[["app-project-card-viewer"]],inputs:{searchTerm:"searchTerm",project:"project",searchResults:"searchResults",colorMap:"colorMap",renameCondition:"renameCondition"},outputs:{deleteProject:"deleteProject",searchResultsChange:"searchResultsChange"},standalone:!0,features:[mt],decls:1,vars:1,consts:[["appearance","outlined"],["cdkDragHandle",""],[2,"color","#ba0000"],[2,"display","flex","flex-direction","column","gap","20px"],["cdkDropList","",2,"display","flex","gap","20px","flex-wrap","wrap","justify-content","center",3,"cdkDropListDropped"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["mat-icon-button","","color","primary",3,"matTooltip"],["target","_blank",3,"href"],[3,"change","color"],["cdkDrag",""],["mat-icon-button","","cdkDragHandle","",3,"matTooltip"],[3,"searchTerm","expanded","renameCondition","colorMap","data"],["matColumnDef","primary_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uniprot_id"],["matColumnDef","gene_name"],["matColumnDef","log2_fc"],["matColumnDef","log10_p"],["matColumnDef","condition_A"],["matColumnDef","condition_B"],["matColumnDef","comparison_label"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-icon-button","","color","primary",3,"click","matTooltip"]],template:function(e,o){e&1&&q(0,Ir,16,7,"mat-card",0),e&2&&J(o.project?0:-1)},dependencies:[Wo,$o,Yo,ze,qe,Ni,vn,Xo,$t,we,je,Te,Di,ji,ki,Ei,Oi,Pi,Fi,Ai,Mi,Ti,fn,fi]})}}return i})();var Vr=(i,a)=>a.id,Br=()=>[];function Rr(i,a){if(i&1){let t=K();c(0,"app-project-card-viewer",3),O("deleteProject",function(o){V(t);let n=x(2);return B(n.deleteProject.emit(o))}),u()}if(i&2){let t=x().$implicit,e=x();F("searchTerm",e.searchTerm)("colorMap",e.projectConditionColorMap==null?null:e.projectConditionColorMap[t.id])("project",t)("searchResults",e.filteredResults[t.id]||ai(5,Br))("renameCondition",e.renameCondition==null?null:e.renameCondition[t.id])}}function Gr(i,a){if(i&1&&(c(0,"div",1),q(1,Rr,1,6,"app-project-card-viewer",2),u()),i&2){let t=a.$implicit;v(),J(t&&t.id?1:-1)}}var Qi=(()=>{class i{constructor(){this._searchTerm="",this.projects=[],this._filteredResults={},this.projectConditionColorMap={},this.renameCondition={},this.projectOrderChanged=new wt,this.deleteProject=new wt}set searchTerm(t){t?this._searchTerm=t:this._searchTerm=""}get searchTerm(){return this._searchTerm}set filteredResults(t){console.log(t),t?this._filteredResults=t:this._filteredResults={}}get filteredResults(){return this._filteredResults}drop(t){Ie(this.projects,t.previousIndex,t.currentIndex),this.projectOrderChanged.emit(this.projects)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-project-list"]],inputs:{searchTerm:"searchTerm",projects:"projects",filteredResults:"filteredResults",projectConditionColorMap:"projectConditionColorMap",renameCondition:"renameCondition"},outputs:{projectOrderChanged:"projectOrderChanged",deleteProject:"deleteProject"},standalone:!0,features:[mt],decls:3,vars:0,consts:[["cdkDropList","",1,"project-list",3,"cdkDropListDropped"],[2,"margin","20px"],["cdkDrag","",3,"searchTerm","colorMap","project","searchResults","renameCondition"],["cdkDrag","",3,"deleteProject","searchTerm","colorMap","project","searchResults","renameCondition"]],template:function(e,o){e&1&&(c(0,"div",0),O("cdkDropListDropped",function(f){return o.drop(f)}),ft(1,Gr,2,1,"div",1,Vr),u()),e&2&&(v(),gt(o.projects))},dependencies:[Te,xn,je]})}}return i})();var yn=(i,a)=>a.id;function Lr(i,a){if(i&1){let t=K();c(0,"mat-chip",4),O("removed",function(){let o=V(t).$implicit,n=x(2);return B(n.removeTag(o))}),w(1),c(2,"mat-icon",5),w(3,"cancel"),u()()}if(i&2){let t=a.$implicit;v(),dt(" ",t.name," ")}}function Nr(i,a){if(i&1){let t=K();c(0,"mat-chip-set",2),O("cdkDropListDropped",function(o){V(t);let n=x();return B(n.drop(o))}),ft(1,Lr,4,1,"mat-chip",3,yn),u()}if(i&2){let t=x();v(),gt(t.collageTags)}}function zr(i,a){if(i&1&&(c(0,"mat-chip"),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t.name," ")}}function qr(i,a){if(i&1&&(c(0,"mat-chip-set"),ft(1,zr,2,1,"mat-chip",null,yn),u()),i&2){let t=x();v(),gt(t.collageTags)}}var $i=(()=>{class i{constructor(t){this.accounts=t,this.collageTags=[],this.collageTagsChange=new wt}removeTag(t){this.collageTags=this.collageTags.filter(e=>e!==t),this.collageTagsChange.emit(this.collageTags)}drop(t){Ie(this.collageTags,t.previousIndex,t.currentIndex),this.collageTagsChange.emit(this.collageTags)}static{this.\u0275fac=function(e){return new(e||i)(G(he))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-tags"]],inputs:{collageTags:"collageTags"},outputs:{collageTagsChange:"collageTagsChange"},standalone:!0,features:[mt],decls:4,vars:1,consts:[[2,"display","flex","justify-content","center"],["cdkDropList",""],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["cdkDrag","",3,"removed"],["matChipRemove",""]],template:function(e,o){e&1&&(c(0,"div",0),q(1,Nr,3,0,"mat-chip-set",1)(2,qr,3,0,"mat-chip-set"),u(),Q(3,"div",0)),e&2&&(v(),J(o.accounts.loggedIn?1:2))},dependencies:[Te,vi,_i,$t,Ci,je]})}}return i})();var go=bo(wn(),1);var Hr=["*"],Qr=i=>{switch(i){case"default":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#202020"},backgroundOptions:{color:"#ffffff"}};case"ocean":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"dots",gradient:{type:"radial",colorStops:[{offset:0,color:"#36CDA5"},{offset:1,color:"#1582AE"},{offset:2,color:"#0277BD"}]}},backgroundOptions:{color:"#ffffff"},cornersSquareOptions:{type:"square"}};case"sunflower":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"dots",gradient:{type:"radial",colorStops:[{offset:0,color:"#BB8412"},{offset:1,color:"#4D762E"},{offset:2,color:"#2F702F"}]}},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#006B3B",type:"dot"},cornersSquareOptions:{color:"#006B3B",type:"extra-rounded"}};case"luxury":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#E29C0F"},{offset:1,color:"#913C0C"},{offset:2,color:"#732E0C"}]}},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#732E0C",type:"dot"},cornersSquareOptions:{color:"#732E0C",type:"extra-rounded"}};case"bitcoin":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#3a3a3a",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#ff9900"},cornersSquareOptions:{type:"extra-rounded"}};case"starbucks":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#3a3a3a",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#00643C",type:"dot"},cornersSquareOptions:{color:"#00643C",type:"extra-rounded"}};case"angular":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#c3002f",type:"dots"},backgroundOptions:{color:"#ffffff"}};case"facebook":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#4D72A9",type:"dots"},backgroundOptions:{color:"#ffffff"}};case"beans":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#416B2C",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#60A541",type:"dot"},cornersSquareOptions:{type:"extra-rounded"}};case"green":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#006B3B",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#006B3B",type:"dot"},cornersSquareOptions:{color:"#006B3B",type:"extra-rounded"}};case"sky":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2c7597",type:"rounded"},backgroundOptions:{color:"#ffffff"}};case"mosaic":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"rounded",gradient:{rotation:190,type:"linear",colorStops:[{offset:0,color:"#0277BD"},{offset:1,color:"#943A40"},{offset:2,color:"#A13535"}]}},backgroundOptions:{color:"#ffffff"}};case"coffee":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#5E4F39",type:"dots"},backgroundOptions:{color:"#FAEDE7"}};case"vintage":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2D7363",type:"extra-rounded"},backgroundOptions:{color:"#E7E5C5"},cornersDotOptions:{color:"#BE8C49"},cornersSquareOptions:{color:"#2D7363"}};case"stamp":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2a3c16",type:"square"},backgroundOptions:{color:"#9cc66e"},cornersDotOptions:{color:"#4c692c"},cornersSquareOptions:{color:"#2a3c16"}};case"chess":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#F4EAA5",type:"dots"},backgroundOptions:{color:"#494B49"}};case"jungle":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#84b931"},{offset:1,color:"#537234"},{offset:2,color:"#537234"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#84b931"},{offset:1,color:"#537234"},{offset:2,color:"#537234"}]}}};case"arabic":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#393939"},{offset:1,color:"#393939"},{offset:2,color:"#393939"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#393939"},{offset:1,color:"#72a28b"},{offset:2,color:"#72a28b"}]}}};case"tea":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"extra-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#72b0b4"},{offset:1,color:"#035558"},{offset:2,color:"#035558"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#72b0b4"},{offset:1,color:"#035558"},{offset:2,color:"#035558"}]}}};case"grape":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#7076ae"},{offset:1,color:"#2a3240"},{offset:2,color:"#2a3240"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#7b7cb5"},{offset:1,color:"#2a3240"},{offset:2,color:"#2a3240"}]}}};default:return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#202020"},backgroundOptions:{color:"#ffffff"}}}};function bn(i,a){let t=new Ue;if(!i||!a)return t.error("Container or Config not available!"),t.complete(),t;let e=document.createElement("div"),o=()=>{if(i?.frameOptions)return!1;{let nt=()=>{let vt=i&&JSON.parse(JSON.stringify(i));return Object.assign({data:window.unescape(encodeURIComponent(vt?.data??""))},vt)};for(;a.firstChild;)a.removeChild(a.lastChild);return new go.default(nt()).append(a),!0}},n=i?.frameOptions?.style??"F_020",f=i?.frameOptions?.height??300,T=i?.frameOptions?.width??300,I=i?.frameOptions?.x??50,z=i?.frameOptions?.y??50,X=()=>{let nt=fetch(`https://cdn.jsdelivr.net/gh/id1945/ngx-qrcode-styling/svg/1.2.9/${n}.svg`,{method:"GET"});return new Promise((ut,vt)=>{nt.then(pt=>pt.text()).then(pt=>{pt!=="404: Not Found"&&lt(pt),ut(pt)}).catch(pt=>{console.error(pt),vt(pt)})})},lt=nt=>{let vt=new DOMParser().parseFromString(nt,"image/svg+xml");if(vt){let pt=vt.documentElement.children[n+"_svg"];if(!pt)return;let ce=pt.getElementsByClassName("frame-text"),oe=pt.getElementsByClassName("frame-content"),A=pt.getElementsByClassName("frame-container");i?.frameOptions?.background&&pt.setAttribute("style",`background: ${i?.frameOptions?.background};${pt?.getAttribute("style")}`);let P=(S,y)=>{if(S)for(let k in y)["x","y","transform"].includes(k)?S.setAttribute(k,y&&y[k]):["textContent"].includes(k)?S[k]=y&&y[k]:S.style[k]=y&&y[k]},E=S=>{let k=document.createElementNS("http://www.w3.org/2000/svg","text");P(k,S),pt.appendChild(k)};i?.frameOptions?.texts&&[...i.frameOptions.texts].forEach((S,y)=>{let k=[...ce][y];k?P(k,S):E(S)}),i?.frameOptions?.containers&&[...A].forEach((S,y)=>{P(S,i?.frameOptions?.containers?.[y])}),i?.frameOptions?.contents&&[...oe].forEach((S,y)=>{P(S,i?.frameOptions?.contents?.[y])}),e.appendChild(vt.documentElement)}},Z=()=>{let nt=e.querySelector(".ngx_qrcode_styling_after");if(nt&&i?.zIndex===1)return nt?.setAttribute("transform",`translate(${I},${z})`),nt;let ut=e.querySelector(".ngx_qrcode_styling_before");return ut?.setAttribute("transform",`translate(${I},${z})`),ut},tt=nt=>{nt&&i?.rotate&&nt?.childNodes?.[0]?.childNodes?.forEach(ut=>{ut.nodeName==="rect"&&(ut.style.transformOrigin="50% 50%",ut.style.transform=`rotate(${i?.rotate??0}deg)`)}),nt&&i?.scale&&nt?.childNodes?.[0]?.childNodes?.forEach(ut=>{ut.nodeName==="rect"&&(ut.style.scale=i?.scale??0)})},ht=nt=>{let ut=()=>{let pt=i&&JSON.parse(JSON.stringify(i));return pt=jt(xt({},pt),{type:"svg",data:window.unescape(encodeURIComponent(pt?.data??""))}),delete pt.frameOptions,delete pt.template,pt};for(;a?.firstChild;)a.removeChild(a.lastChild);let vt=new go.default(ut());return vt?._svgDrawingPromise?.then(()=>{vt.append(nt)}).catch(pt=>console.error(pt))},ct=()=>i?.type==="svg"?(Ee(),a.appendChild(e),!0):!1,Vt=()=>{let nt=document.createElement("canvas");return nt.height=f,nt.width=T,a.appendChild(nt),nt},It=nt=>{let ut="data:image/svg+xml;base64,",vt=nt&&new XMLSerializer().serializeToString(nt);return ut+=vt&&btoa(unescape(encodeURIComponent(vt)))},Ee=()=>{let nt=e.querySelector(`#${n}_svg`);return nt&&nt.setAttribute("height",`${f}px`),nt&&nt.setAttribute("width",`${T}px`),nt},ge=nt=>{let ut=nt.split(";base64,"),vt=ut[0].split(":")[1],pt=window.atob(ut[1]),ce=new Uint8Array(pt.length);for(let oe=0;oe<pt.length;++oe)ce[oe]=pt.charCodeAt(oe);return new Blob([ce],{type:vt})},Be=()=>{let nt=new Image,ut=Vt().getContext("2d");nt.onload=function(){ut&&ut.drawImage(nt,0,0)};let vt=ge(It(Ee())),pt=URL.createObjectURL(vt);nt.src=pt};return function(){return Zt(this,null,function*(){if(o()){t.next({config:i,container:a}),t.complete();return}else{yield X();let nt=Z();yield ht(nt),tt(nt),ct()?(t.next({config:i,container:a}),t.complete()):(Be(),t.next({config:i,container:a}),t.complete())}})}(),t}var fo=i=>{let a=i&&JSON.parse(JSON.stringify(i));return i?.template?xt(xt({},Qr(i.template.toLocaleLowerCase())),a):a},$r=(i,a)=>Zt(void 0,null,function*(){let t=i&&JSON.parse(JSON.stringify(i)),e=xt(xt({},t),a),o=["frameOptions","qrOptions","imageOptions","dotsOptions","cornersSquareOptions","cornersDotOptions","backgroundOptions"];try{for(var n=So(o),f,T,I;f=!(T=yield n.next()).done;f=!1){let z=T.value;if(z in a){let X={[z]:xt(xt({},t[z]),a[z])};e=xt(xt({},e),X)}}}catch{I=[T]}finally{try{f&&(T=n.return)&&(yield T.call(n))}finally{if(I)throw I[0]}}return e}),Sn=(()=>{class i{create(t,e){return bn(fo(t),e)}update(t,e,o){let n=new Ue;return function(){return Zt(this,null,function*(){let f=yield $r(fo(t),fo(e));bn(f,o).subscribe(T=>{n.next(T),n.complete()})})}(),n}download(t,e="",o=0){let n=new Ue,f=z=>{e||(e=`ngx_qrcode_styling_${Date.now()}.${z}`)},T=z=>{let X=document.createElement("a");X.download=e,X.href=z,X.click(),X.remove()},I=z=>{z?(T(z),n.next({fileName:e,container:t,url:z}),n.complete()):(n.error("Container not found!"),n.complete())};return setTimeout(()=>{let z=t?.querySelector("canvas");if(z){f("png");let X=e?e?.split(".")?.slice(-1)?.toString():"png";z.toBlob(lt=>I(URL.createObjectURL(lt)),"image/"+X)}else{let X=t?.querySelector("svg");if(X){f("svg");let lt=X.outerHTML,Z=new Blob([lt],{type:"image/svg+xml;charset=utf-8"}),tt=URL.createObjectURL(Z);I(tt)}else I("")}},o),n}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=We({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Mn=(()=>{class i{constructor(t,e){this.canvas=t,this.service=e,this.template="default",this.scale=0,this.rotate=0,this.zIndex=2}ngOnInit(){this.canvas&&(this.template&&(this.config=jt(xt({},this.config),{template:this.template})),this.type&&(this.config=jt(xt({},this.config),{type:this.type})),this.shape&&(this.config=jt(xt({},this.config),{shape:this.shape})),this.width&&(this.config=jt(xt({},this.config),{width:this.width})),this.height&&(this.config=jt(xt({},this.config),{height:this.height})),this.margin&&(this.config=jt(xt({},this.config),{margin:this.margin})),this.data&&(this.config=jt(xt({},this.config),{data:this.data})),this.image&&(this.config=jt(xt({},this.config),{image:this.image})),this.scale&&(this.config=jt(xt({},this.config),{scale:this.scale})),this.rotate&&(this.config=jt(xt({},this.config),{rotate:this.rotate})),this.zIndex&&(this.config=jt(xt({},this.config),{zIndex:this.zIndex})),this.frameOptions&&(this.config=jt(xt({},this.config),{frameOptions:this.frameOptions})),this.qrOptions&&(this.config=jt(xt({},this.config),{qrOptions:this.qrOptions})),this.imageOptions&&(this.config=jt(xt({},this.config),{imageOptions:this.imageOptions})),this.dotsOptions&&(this.config=jt(xt({},this.config),{dotsOptions:this.dotsOptions})),this.cornersSquareOptions&&(this.config=jt(xt({},this.config),{cornersSquareOptions:this.cornersSquareOptions})),this.cornersDotOptions&&(this.config=jt(xt({},this.config),{cornersDotOptions:this.cornersDotOptions})),this.backgroundOptions&&(this.config=jt(xt({},this.config),{backgroundOptions:this.backgroundOptions})),this.create(this.config))}create(t){return this.service.create(t,this.canvas.nativeElement)}update(t,e){return this.service.update(t,e,this.canvas.nativeElement)}download(t,e=0){return this.service.download(this.canvas.nativeElement,t,e)}static{this.\u0275fac=function(e){return new(e||i)(G(Xe),G(Sn))}}static{this.\u0275cmp=at({type:i,selectors:[["ngx-qrcode-styling"]],inputs:{config:"config",template:"template",type:"type",shape:"shape",width:"width",height:"height",margin:"margin",data:"data",image:"image",scale:"scale",rotate:"rotate",zIndex:"zIndex",frameOptions:"frameOptions",qrOptions:"qrOptions",imageOptions:"imageOptions",dotsOptions:"dotsOptions",cornersSquareOptions:"cornersSquareOptions",cornersDotOptions:"cornersDotOptions",backgroundOptions:"backgroundOptions"},ngContentSelectors:Hr,decls:1,vars:0,template:function(e,o){e&1&&(Vo(),Bo(0))},encapsulation:2})}}return i})(),jn=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=Ge({type:i})}static{this.\u0275inj=Re({providers:[Sn]})}}return i})();function Xr(i,a){if(i&1&&(c(0,"div",2),Q(1,"ngx-qrcode-styling",5),u()),i&2){let t=x();v(),F("config",t.config)}}var Tn=(()=>{class i{set url(t){this.config.data=t,this._url=t}constructor(t){this.dialogRef=t,this._url="",this.config={width:250,height:250,data:this.url,margin:5,dotsOptions:{color:"#780101",type:"dots"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:0}}}close(){this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||i)(G(Bt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-qr-code-dialog"]],inputs:{url:"url"},standalone:!0,features:[mt],decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","justify-content","center","align-items","center"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"config"]],template:function(e,o){e&1&&(c(0,"h1",0),w(1,"Collate QR Code"),u(),c(2,"div",1),q(3,Xr,2,1,"div",2),u(),c(4,"div",3)(5,"button",4),O("click",function(){return o.close()}),w(6,"Close"),u()()),e&2&&(v(3),J(o.config.data&&o.config.data!==""?3:-1))},dependencies:[Rt,Gt,jn,Mn,Lt,Tt]})}}return i})();var kn=(i,a)=>a.id,Yr=()=>({standalone:!0});function Ur(i,a){if(i&1){let t=K();c(0,"mat-checkbox",6),Qt("ngModelChange",function(o){let n=V(t).$implicit,f=x(2).$implicit,T=x();return Ht(T.projectAnalysisGroupVisibilityMap[f.id][n.id],o)||(T.projectAnalysisGroupVisibilityMap[f.id][n.id]=o),B(o)}),w(1),u()}if(i&2){let t=a.$implicit,e=x(2).$implicit,o=x();qt("ngModel",o.projectAnalysisGroupVisibilityMap[e.id][t.id]),F("ngModelOptions",ai(3,Yr)),v(),dt(" ",t.name," ")}}function Jr(i,a){if(i&1&&ft(0,Ur,2,4,"mat-checkbox",5,kn),i&2){let t=x().$implicit,e=x();gt(e.projectAnalysisGroupMap[t.id])}}function Kr(i,a){if(i&1&&(c(0,"h2"),w(1),u(),q(2,Jr,2,0)),i&2){let t=a.$implicit,e=x();v(),yt(t.name),v(),J(e.projectAnalysisGroupMap[t.id]?2:-1)}}var Xi=(()=>{class i{set projects(t){this._projects=t}get projects(){return this._projects}set projectAnalysisGroupMap(t){this._projectAnalysisGroupMap=t}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}set projectAnalysisGroupVisibilityMap(t){this._projectAnalysisGroupVisibilityMap={};for(let e in t){this._projectAnalysisGroupVisibilityMap[e]={};for(let o in t[e])this._projectAnalysisGroupVisibilityMap[e][o]=t[e][o]}}get projectAnalysisGroupVisibilityMap(){return this._projectAnalysisGroupVisibilityMap}constructor(t){this.dialog=t,this._projects=[],this._projectAnalysisGroupMap={},this._projectAnalysisGroupVisibilityMap={}}close(){this.dialog.close()}save(){this.dialog.close(this.projectAnalysisGroupVisibilityMap)}static{this.\u0275fac=function(e){return new(e||i)(G(Bt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-project-analysis-group-visibility-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap",projectAnalysisGroupVisibilityMap:"projectAnalysisGroupVisibilityMap"},standalone:!0,features:[mt],decls:11,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","20px"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"]],template:function(e,o){e&1&&(c(0,"h1",0),w(1,"Analysis Group Visibility"),u(),c(2,"div",1)(3,"form",2),ft(4,Kr,3,2,null,null,kn),u()(),c(6,"div",3)(7,"button",4),O("click",function(){return o.close()}),w(8,"Cancel"),u(),c(9,"button",4),O("click",function(){return o.save()}),w(10,"Submit"),u()()),e&2&&(v(4),gt(o.projects))},dependencies:[Rt,Gt,Se,ee,Ft,te,be,Ko,Qe,Lt,Tt]})}}return i})();function Zr(i,a){i&1&&(c(0,"button",11),w(1,"No previous searches"),u())}function ta(i,a){if(i&1){let t=K();c(0,"button",13),O("click",function(){V(t);let o=x().$implicit,n=x(3);return B(n.restoreSearches(o.searchQuery,o.searchID))}),w(1),u()}if(i&2){let t=x().$implicit;v(),Go("",t.searchID,". ",t.termFounds.join(","),"")}}function ea(i,a){if(i&1&&q(0,ta,2,2,"button",12),i&2){let t=a.$implicit,e=x(3);J(t.collate===e.collate.id?0:-1)}}function ia(i,a){if(i&1&&ft(0,ea,1,1,null,null,Ce),i&2){let t=x(2);gt(t.pastSearches)}}function oa(i,a){if(i&1&&(c(0,"button",10)(1,"mat-icon"),w(2,"history"),u()(),c(3,"mat-menu",null,0),q(5,Zr,2,0,"button",11)(6,ia,2,0),u()),i&2){let t=ne(4),e=x();F("matMenuTriggerFor",t),v(5),J(e.pastSearches.length===0?5:6)}}function na(i,a){if(i&1){let t=K();c(0,"button",14),O("click",function(){V(t);let o=x();return B(o.navigateToEdit())}),c(1,"mat-icon"),w(2,"edit"),u()()}}function ra(i,a){if(i&1&&Q(0,"app-collate-header",7),i&2){let t=x();F("collate",t.collate)}}function aa(i,a){if(i&1&&(c(0,"div",15),Q(1,"app-collate-tags",16),u()),i&2){let t=x(2);v(),F("collageTags",t.collate.tags)}}function sa(i,a){if(i&1&&q(0,aa,2,1,"div",15),i&2){let t=x();J(t.collate.settings.showTags?0:-1)}}function la(i,a){if(i&1){let t=K();w(0),c(1,"button",21),O("click",function(){V(t);let o=x().$implicit,n=x(2);return B(n.exportData(o))}),c(2,"mat-icon"),w(3,"download"),u()()}if(i&2){let t=x().$implicit,e=x(2);dt(" ",t," "),v(),F("disabled",e.waitingForDownload)}}function ca(i,a){i&1&&(c(0,"mat-tab"),q(1,la,4,2,"ng-template",20),u())}function pa(i,a){if(i&1&&Q(0,"app-collate-project-list",19),i&2){let t=x(2);F("searchTerm",t.selectedSearchTerm)("renameCondition",t.collate.settings.renameSampleCondition)("projects",t.projects)("filteredResults",t.filteredResults)}}function da(i,a){if(i&1){let t=K();c(0,"div",17)(1,"mat-tab-group",18),O("selectedTabChange",function(){V(t);let o=x();return B(o.filterDataBySearchTerm())}),Qt("selectedIndexChange",function(o){V(t);let n=x();return Ht(n.selectedIndex,o)||(n.selectedIndex=o),B(o)}),ft(2,ca,2,0,"mat-tab",null,Ce),u()(),q(4,pa,1,4,"app-collate-project-list",19)}if(i&2){let t=x();v(),qt("selectedIndex",t.selectedIndex),F("mat-stretch-tabs",!1),v(),gt(t.searchTerms),v(2),J(t.collate?4:-1)}}var _o=(()=>{class i{set collateId(t){t&&this.collateService.getCollate(t).subscribe(e=>{if(this.collate=e,this.title.setTitle(`${e.title} - C|nder`),this.projects=e.projects,e.settings||(e.settings={projectOrder:[],analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},plotSettings:{},showTags:!1}),e.settings.plotSettings||(e.settings.plotSettings={}),e.settings.projectOrder&&(this.projects=e.settings.projectOrder.map(o=>e.projects.find(n=>n.id===o))),!this.collate?.settings.projectAnalysisGroupVisibility){this.collate.settings.projectAnalysisGroupVisibility={};for(let o of this.projects)this.collate.settings.projectAnalysisGroupVisibility[o.id]={}}if(!this.collate?.settings.renameSampleCondition){this.collate.settings.renameSampleCondition={};for(let o of this.projects)this.collate.settings.renameSampleCondition[o.id]={},this.web.getProjectUniqueConditions(o.id).subscribe(n=>{for(let f of n)this.collate.settings.renameSampleCondition[o.id][f.Condition]=f.Condition;console.log(this.collate.settings.renameSampleCondition)})}console.log(this.projects)})}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(t){this._selectedSearchTerm=t}constructor(t,e,o,n,f,T,I,z){this.title=t,this.ws=e,this.sb=o,this.dialog=n,this.collateService=f,this.web=T,this.accounts=I,this.router=z,this.collate=null,this.projects=[],this.filteredResults={},this.searchTerms=[],this.selectedIndex=0,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this._selectedSearchTerm="",this.pastSearches=[],this.waitingForDownload=!1;let X=localStorage.getItem("cinderPastSearches");X&&(this.pastSearches=JSON.parse(X)),this.ws.searchWSConnection?.subscribe(lt=>{if(lt&&lt.type==="export_status"&&this.web.cinderInstanceID===lt.instance_id&&this.waitingForDownload)switch(lt.status){case"error":this.waitingForDownload=!1;break;case"started":this.sb.open("Export started","Dismiss",{duration:2e3});break;case"in_progress":break;case"complete":this.waitingForDownload=!1,this.sb.open("Export complete","Dismiss",{duration:2e3});let Z=`${this.web.baseURL}/api/search/download_temp_file/?token=${lt.file}`;window.open(Z,"_blank");break}})}associateAnalysisGroupsWithProjects(){return Zt(this,null,function*(){let t=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},t&&t.forEach(e=>{let o=e.project;this.projectAnalysisGroups[o]||(this.projectAnalysisGroups[o]=[]),this.projectAnalysisGroups[o].push(e),this.analysisGroupProjects[e.id]=this.projects.find(n=>n.id===o)})})}distributeSearchResults(t){return Zt(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(t.map(e=>e.search_term))),t.forEach(e=>{let o=e.analysis_group.id,n=this.analysisGroupProjects[o];n&&(this.searchResults[n.id]||(this.searchResults[n.id]=[]),this.searchResults[n.id].push(e))}),console.log(this.searchResults),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let t={};return Object.keys(this.searchResults).forEach(e=>{t[e]=this.searchResults[e].filter(o=>o.search_term===this.selectedSearchTerm),this.collate?.settings?.analysisGroupOrderMap&&(console.log(this.collate.settings.analysisGroupOrderMap),Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(o=>{let n=parseInt(o),f=this.collate?.settings.analysisGroupOrderMap[n];if(!t[n]||!f)return;console.log(f);let T=t[n].filter(I=>!f.includes(I.analysis_group.id));if(t[n]=t[n].filter(I=>f.includes(I.analysis_group.id)),t[n]=t[n].sort((I,z)=>f.indexOf(I.analysis_group.id)-f.indexOf(z.analysis_group.id)),t[n].concat(T),this.collate?.settings?.projectAnalysisGroupVisibility){let I=this.collate?.settings.projectAnalysisGroupVisibility[n];t[n]=t[n].filter(z=>!I||!(z.analysis_group.id in I)?!0:I[z.analysis_group.id])}}))}),t}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults(),console.log(this.filteredResults)}getSearchFromID(t){this.web.getSearchSession(t).subscribe(e=>{this.searchSession=e}),this.web.getSearchResults(t,99999).subscribe(e=>{if(!this.collate)return;console.log(e.results);let o=Array.from(new Set(e.results.map(n=>n.search_term)));this.pastSearches.push({searchQuery:e,termFounds:o,collate:this.collate.id,searchID:t}),this.pastSearches=this.pastSearches.slice(-20),localStorage.setItem("cinderPastSearches",JSON.stringify(this.pastSearches)),this.distributeSearchResults(e.results).then()})}restoreSearches(t,e){this.web.getSearchSession(e).subscribe(o=>{this.searchSession=o}),this.distributeSearchResults(t.results).then()}navigateToEdit(){this.collate&&this.router.navigate([`/collate/edit/${this.collate.id}`])}openQRCodeDialog(){let t=window.location.href,e=this.dialog.open(Tn);e.componentInstance.url=t}navigateToHome(){this.router.navigate(["/"])}exportData(t){this.web.exportSearchData(this.searchSession.id,t,1e-8,1e-8,this.web.searchSessionID).subscribe(e=>{this.waitingForDownload=!0})}openVisibilityDialog(){let t=this.dialog.open(Xi);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(e=>{let o={};e.forEach(f=>{o[f.project]||(o[f.project]=[]),o[f.project].push(f)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(f=>{let T=parseInt(f),I=this.collate?.settings.analysisGroupOrderMap[T];if(!I||!o[T])return;let z=o[T].filter(X=>!I.includes(X.id));o[T]=o[T].filter(X=>I.includes(X.id)),o[T]=o[T].sort((X,lt)=>I.indexOf(X.id)-I.indexOf(lt.id)),o[T]=o[T].concat(z)}),t.componentInstance.projectAnalysisGroupMap=o,t.componentInstance.projects=this.projects;let n={};this.collate?.settings?.projectAnalysisGroupVisibility&&(n=this.collate.settings.projectAnalysisGroupVisibility);for(let f in o){n[f]||(n[f]={});for(let T of o[f])T.id in n[f]||(n[f][T.id]=!0)}t.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},n)}),t.afterClosed().subscribe(e=>{this.collate&&e&&(this.collate.settings.projectAnalysisGroupVisibility=e,this.filteredResults=this.getFilteredSearchResults())})}static{this.\u0275fac=function(e){return new(e||i)(G(Ho),G(wi),G(se),G(He),G(Me),G(Jt),G(he),G(Le))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-view"]],inputs:{collateId:"collateId"},standalone:!0,features:[mt],decls:18,vars:9,consts:[["previousSearch","matMenu"],["href","/#/home"],[3,"width","height","ngSrc"],[1,"spacer"],["mat-icon-button","","matTooltip","Open QR code dialog",3,"click"],["mat-icon-button","","matTooltip","Change analysis group visibility",3,"click"],["mat-icon-button","","matTooltip","Edit collate"],[3,"collate"],[2,"display","flex","justify-content","center"],[3,"searchResultID","projects"],["mat-icon-button","","matTooltip","View previous searches",3,"matMenuTriggerFor"],["mat-menu-item","","disabled",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],["mat-icon-button","","matTooltip","Edit collate",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTags"],[2,"padding","20px"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"searchTerm","renameCondition","projects","filteredResults"],["mat-tab-label",""],["mat-icon-button","","matTooltip","Export data",3,"click","disabled"]],template:function(e,o){e&1&&(c(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"a",1),Q(3,"img",2),u(),Q(4,"span",3),q(5,oa,7,2),c(6,"button",4),O("click",function(){return o.openQRCodeDialog()}),c(7,"mat-icon"),w(8,"qr_code"),u()(),c(9,"button",5),O("click",function(){return o.openVisibilityDialog()}),c(10,"mat-icon"),w(11,"visibility"),u()(),q(12,na,3,0,"button",6),u()(),q(13,ra,1,1,"app-collate-header",7)(14,sa,1,1),c(15,"div",8)(16,"app-collate-search",9),O("searchResultID",function(f){return o.getSearchFromID(f)}),u()(),q(17,da,5,3)),e&2&&(v(3),F("width",25)("height",25)("ngSrc","/assets/logo.png"),v(2),J(o.collate?5:-1),v(7),J(o.accounts.loggedIn?12:-1),v(),J(o.collate?13:-1),v(),J(o.collate&&o.collate.settings?14:-1),v(2),F("projects",o.projects),v(),J(o.searchTerms.length>0?17:-1))},dependencies:[Cn,qi,Ii,Vi,Qi,$t,we,bi,Si,$i,qo,Gi,Ri,Li,hn,fi]})}}return i})();var En=(i,a)=>a.id;function ma(i,a){if(i&1){let t=K();c(0,"mat-chip",2),O("click",function(){let o=V(t).$implicit,n=x(2);return B(n.removeProject(o))}),w(1),u()}if(i&2){let t=a.$implicit;v(),dt(" ",t.name," ")}}function ha(i,a){if(i&1&&(c(0,"div"),w(1),c(2,"mat-chip-set"),ft(3,ma,2,1,"mat-chip",null,En),u()()),i&2){let t=x();v(),dt(" Selected Projects: ",t.selectedMultipleProjects.length," "),v(2),gt(t.selectedMultipleProjects)}}function ua(i,a){if(i&1&&(c(0,"mat-list-option",4),w(1),u()),i&2){let t=a.$implicit;F("value",t),v(),yt(t.name)}}function fa(i,a){if(i&1){let t=K();c(0,"div")(1,"mat-selection-list",3),ft(2,ua,2,2,"mat-list-option",4,En),u(),c(4,"mat-paginator",5),O("page",function(o){V(t);let n=x(2);return B(n.handleProjectPageEvent(o))}),u()()}if(i&2){let t=x(2);v(),F("multiple",!1),v(),gt(t.projectQuery.results),v(2),F("pageSize",t.projectPageSize)("length",t.projectQuery.count)("pageIndex",t.projectPageIndex)}}function ga(i,a){i&1&&(c(0,"p"),w(1,"No projects found."),u())}function _a(i,a){if(i&1&&q(0,fa,5,4,"div")(1,ga,2,0,"p"),i&2){let t=x();J(t.projectQuery.count>0?0:1)}}var Dn=(()=>{class i{constructor(t,e){this.fb=t,this.web=e,this.multipleSelection=!1,this.selectedProjects=new wt,this.formProjectSearch=this.fb.group({searchTerm:new ae("",re.required),selectedProjects:new ae([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(o=>{o&&this.fetchProjects(o,this.projectPageSize,0)}),this.formProjectSearch.controls.selectedProjects.valueChanges.subscribe(o=>{if(o){for(let n of o)this.selectedMultipleProjects.includes(n)||this.selectedMultipleProjects.push(n);this.selectedProjects.emit(this.selectedMultipleProjects)}})}fetchProjects(t,e,o){let n=o*e;this.web.getProjects(void 0,e,n,t,void 0).subscribe(f=>{this.projectQuery=f})}handleProjectPageEvent(t){this.projectPageIndex=t.pageIndex,this.fetchProjects(this.formProjectSearch.controls.searchTerm.value||"",t.pageSize,t.pageIndex)}removeProject(t){this.selectedMultipleProjects=this.selectedMultipleProjects.filter(e=>e!==t),this.selectedProjects.emit(this.selectedMultipleProjects)}static{this.\u0275fac=function(e){return new(e||i)(G(Xt),G(Jt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-project-search"]],inputs:{multipleSelection:"multipleSelection"},outputs:{selectedProjects:"selectedProjects"},standalone:!0,features:[mt],decls:7,vars:3,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Project Name","type","search"],[3,"click"],["formControlName","selectedProjects",3,"multiple"],[3,"value"],[3,"page","pageSize","length","pageIndex"]],template:function(e,o){e&1&&(c(0,"form",0)(1,"mat-form-field"),Q(2,"input",1),c(3,"mat-label"),w(4,"Search For Specific Projects"),u()(),q(5,ha,5,1,"div")(6,_a,2,1),u()),e&2&&(F("formGroup",o.formProjectSearch),v(5),J(o.selectedMultipleProjects.length>0?5:-1),v(),J(o.projectQuery?6:-1))},dependencies:[ie,ee,Wt,Ft,te,pe,de,Yt,Ut,me,vi,Ci,ui,hi,gi]})}}return i})();var Pn=(()=>{class i{constructor(t,e,o){this.dialogRef=t,this.fb=e,this.web=o,this.formProjectSearch=this.fb.group({searchTerm:new ae("",re.required),selectedProjects:new ae([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.multipleSelection=!0,this.web.getProjects(void 0,this.projectPageSize,0,void 0).subscribe(n=>{this.projectQuery=n}),this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(n=>{n&&this.web.getProjects(void 0,this.projectPageSize,0,n).subscribe(f=>{this.projectQuery=f})})}handleSelectedProjects(t){this.selectedMultipleProjects=t}close(){this.dialogRef.close()}save(){this.dialogRef.close(this.selectedMultipleProjects)}static{this.\u0275fac=function(e){return new(e||i)(G(Bt),G(Xt),G(Jt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-project-add-dialog"]],standalone:!0,features:[mt],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedProjects"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(e,o){e&1&&(c(0,"h2",0),w(1,"Project Add"),u(),c(2,"div",1)(3,"app-project-search",2),O("selectedProjects",function(f){return o.handleSelectedProjects(f)}),u(),c(4,"small"),w(5),u()(),c(6,"div",3)(7,"button",4),O("click",function(){return o.save()}),w(8,"Submit"),u(),c(9,"button",4),O("click",function(){return o.close()}),w(10,"Close"),u()()),e&2&&(v(5),dt("Selected ",o.selectedMultipleProjects.length," Projects."))},dependencies:[Dn,Rt,Gt,Lt,Tt]})}}return i})();var An=(i,a)=>a.id;function Ca(i,a){if(i&1&&(c(0,"mat-list-item",5)(1,"mat-icon",7),w(2,"notes"),u(),c(3,"div",8),w(4),u(),Q(5,"div",9),u()),i&2){let t=a.$implicit;v(4),yt(t.name)}}function va(i,a){if(i&1){let t=K();c(0,"div",5)(1,"div",6)(2,"b"),w(3),u()(),c(4,"div",4),O("cdkDropListDropped",function(o){let n=V(t).$implicit,f=x(2);return B(f.drop(o,n.id))}),ft(5,Ca,6,1,"mat-list-item",5,An),u(),Q(7,"mat-divider"),u()}if(i&2){let t=a.$implicit,e=x(2);v(3),yt(t.name),v(2),gt(e.projectAnalysisGroupMap[t.id])}}function xa(i,a){if(i&1){let t=K();c(0,"mat-list")(1,"div",4),O("cdkDropListDropped",function(o){V(t);let n=x();return B(n.dropProject(o))}),ft(2,va,8,1,"div",5,An),u()()}if(i&2){let t=x();v(2),gt(t.projects)}}var On=(()=>{class i{set projects(t){this._projects=t.slice()}get projects(){return this._projects}set projectAnalysisGroupMap(t){this._projectAnalysisGroupMap=t}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}constructor(t){this.dialogRef=t,this._projectAnalysisGroupMap={},this._projects=[]}save(){this.dialogRef.close({projects:this.projects,projectAnalysisGroupMap:this.projectAnalysisGroupMap})}cancel(){this.dialogRef.close()}drop(t,e){Ie(this.projectAnalysisGroupMap[e],t.previousIndex,t.currentIndex)}dropProject(t){Ie(this.projects,t.previousIndex,t.currentIndex)}static{this.\u0275fac=function(e){return new(e||i)(G(Bt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-project-analysis-group-reorder-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap"},standalone:!0,features:[mt],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["mat-subheader","","cdkDragHandle",""],["cdkDragHandle","","matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(e,o){e&1&&(c(0,"h1",0),w(1,"Analysis Group Reorder"),u(),c(2,"div",1),q(3,xa,4,0,"mat-list"),u(),c(4,"div",2)(5,"button",3),O("click",function(){return o.cancel()}),w(6,"Close"),u(),c(7,"button",3),O("click",function(){return o.save()}),w(8,"Save"),u()()),e&2&&(v(3),J(o.projects.length>0?3:-1))},dependencies:[Rt,Gt,nn,an,rn,en,$t,on,Ni,Te,je,Lt,Tt]})}}return i})();var ya=["hueSlider"],wa=["alphaSlider"];function ba(i,a){if(i&1){let t=K();c(0,"div",10),O("newValue",function(o){V(t);let n=x();return B(n.onSliderChange("saturation-lightness",o))}),c(1,"div",11),Q(2,"div"),u()()}if(i&2){let t=x();ye("background-color",t.hueSliderColor),F("rgX",1)("rgY",1),v(),ye("top",t.slider==null?null:t.slider.v,"px")("left",t.slider==null?null:t.slider.s,"px")}}function Sa(i,a){if(i&1&&(c(0,"div",12),Q(1,"div",13)(2,"div",14),u()),i&2){let t=x();v(2),ye("background-color",t.selectedColor)}}function Ma(i,a){if(i&1){let t=K();c(0,"div",15,1),O("newValue",function(o){V(t);let n=x();return B(n.onSliderChange("hue",o))}),c(2,"div",16)(3,"div"),Q(4,"div"),u()()()}if(i&2){let t=x();F("rgX",1),v(2),ye("left",t.slider==null?null:t.slider.h,"px")}}function ja(i,a){if(i&1){let t=K();c(0,"div",17,2),O("newValue",function(o){V(t);let n=x();return B(n.onSliderChange("alpha",o))}),Q(2,"div",18),c(3,"div",16)(4,"div"),Q(5,"div"),u()()()}if(i&2){let t=x();F("rgX",1),v(2),F("ngStyle",t.getBackgroundColor(t.alphaSliderColor)),v(),ye("left",t.slider==null?null:t.slider.a,"px")}}var Ta=["dialog"],Vn=i=>({background:i});function ka(i,a){i&1&&Q(0,"div",12)}function Ea(i,a){if(i&1){let t=K();At(0),c(1,"div",9)(2,"div",10),O("click",function(){let o=V(t).$implicit,n=x(2);return B(n.onColorClick(o))}),q(3,ka,1,0,"div",11),u()(),Ot()}if(i&2){let t=a.$implicit,e=a.index,o=x(2);v(2),ii("colornull",!t),F("ngStyle",o.getBackgroundColor(t)),v(),F("ngIf",e==o.indexSeleccionado)}}function Da(i,a){if(i&1&&Q(0,"div",18),i&2){let t=x(3);F("ngStyle",t.getBackgroundColor(t.color))}}function Pa(i,a){if(i&1){let t=K();c(0,"div",13),O("click",function(){V(t);let o=x(2);return B(o.addColor())}),q(1,Da,1,1,"div",14),ei(),c(2,"svg",15),Q(3,"path",16)(4,"path",17),u()()}if(i&2){let t=x(2);v(),F("ngIf",t.indexSeleccionado===void 0)}}function Aa(i,a){if(i&1){let t=K();c(0,"color-picker",19),O("colorChange",function(o){V(t);let n=x(2);return B(n.onChangeColorPicker(o))})("onAlphaChange",function(o){V(t);let n=x(2);return B(n.onAlphaChange(o))}),u()}if(i&2){let t=x(2);F("controls",t.colorPickerControls)("color",t.hsva)}}function Oa(i,a){if(i&1&&(At(0),c(1,"div",5),q(2,Ea,4,4,"ng-container",6)(3,Pa,5,1,"div",7)(4,Aa,1,2,"color-picker",8),u(),Ot()),i&2){let t=x();v(),F("@colorsAnimation",t.colorsAnimationEffect),v(),F("ngForOf",t.palette),v(),F("ngIf",!t.hideColorPicker&&t.colorPickerControls!="only-alpha"),v(),F("ngIf",!t.hideColorPicker&&t.colorPickerControls=="only-alpha")}}function Fa(i,a){i&1&&Q(0,"div",12)}function Ia(i,a){if(i&1){let t=K();At(0),c(1,"div",9)(2,"div",25),O("click",function(){let o=V(t).$implicit,n=x(2);return B(n.changeColor(o))}),q(3,Fa,1,0,"div",11),u()(),Ot()}if(i&2){let t=a.$implicit,e=x(2);v(2),ii("colornull",!t),F("ngStyle",no(4,Vn,t)),v(),F("ngIf",e.isSelected(t))}}function Va(i,a){if(i&1){let t=K();At(0),c(1,"div",5)(2,"div",20)(3,"div",21),O("click",function(){V(t);let o=x();return B(o.onClickBack())}),ei(),c(4,"svg",22),Q(5,"path",23)(6,"path",24),u()()(),q(7,Ia,4,6,"ng-container",6),u(),Ot()}if(i&2){let t=x();v(),F("@colorsAnimation",t.colorsAnimationEffect),v(6),F("ngForOf",t.variants)}}function Ba(i,a){if(i&1){let t=K();At(0),c(1,"div",26)(2,"div",27),O("click",function(){V(t);let o=x();return B(o.onClickBack())}),ei(),c(3,"svg",22),Q(4,"path",23)(5,"path",24),u()(),Eo(),c(6,"button",28),O("click",function(){V(t);let o=x();return B(o.emitClose("cancel"))}),w(7),u(),c(8,"button",28),O("click",function(){V(t);let o=x();return B(o.emitClose("accept"))}),w(9),u()(),c(10,"div",29)(11,"color-picker",30),O("sliderChange",function(o){V(t);let n=x();return B(n.onChangeColorPicker(o))}),u()(),Ot()}if(i&2){let t=x();v(7),dt(" ",t.cancelLabel," "),v(2),dt(" ",t.acceptLabel," "),v(2),F("controls",t.colorPickerControls)("color",t.hsva)}}function Ra(i,a){if(i&1){let t=K();c(0,"div",31)(1,"p",32),O("click",function(){V(t);let o=x();return B(o.nextFormat())}),w(2),u(),c(3,"div",33)(4,"input",34,1),O("keyup",function(){V(t);let o=ne(5),n=x();return B(n.changeColorManual(o.value))})("keydown.enter",function(){V(t);let o=x();return B(o.emitClose("accept"))}),u()()()}if(i&2){let t=x();v(2),yt(t.colorFormats[t.format]),v(2),ye("font-size",t.color&&t.color.length>23?9:10,"px")("letter-spacing",t.color&&t.color.length>16?0:1.5,"px"),F("placeholder",t.placeholder)("value",t.color)}}var Co=["hex","rgba","hsla","cmyk"],Kt=function(i){return i[i.HEX=0]="HEX",i[i.RGBA=1]="RGBA",i[i.HSLA=2]="HSLA",i[i.CMYK=3]="CMYK",i}(Kt||{}),Fn=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],fe=class{constructor(a,t,e,o){this.r=a,this.g=t,this.b=e,this.a=o}denormalize(){return this.r=Math.round(this.r*255),this.g=Math.round(this.g*255),this.b=Math.round(this.b*255),this}toString(){return this.denormalize(),"rgb"+(this.a!=1?"a(":"(")+this.r+", "+this.g+", "+this.b+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},le=class{constructor(a,t,e,o){this.h=a,this.s=t,this.v=e,this.a=o,this.onChange=new wt(!0)}onColorChange(a){this.s=a.s/a.rgX,this.v=a.v/a.rgY}onHueChange(a){this.h=a.v/a.rgX}onValueChange(a){this.v=a.v/a.rgX}onAlphaChange(a){this.a=a.v/a.rgX}},Ve=class{constructor(a,t,e,o){this.h=a,this.s=t,this.l=e,this.a=o}denormalize(){return this.h=Math.round(this.h*360),this.s=Math.round(this.s*100),this.l=Math.round(this.l*100),this}toString(){return"hsl"+(this.a!=1?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},ke=class{constructor(a,t,e,o,n=1){this.c=a,this.m=t,this.y=e,this.k=o,this.a=n}denormalize(){return this.c=Math.round(this.c*100),this.m=Math.round(this.m*100),this.y=Math.round(this.y*100),this.k=Math.round(this.k*100),this}toString(){return this.denormalize(),"cmyk("+this.c+", "+this.m+", "+this.y+", "+this.k+")"}},vo=class{constructor(a){a&&(this.preview=a.preview,this.variants=a.variants)}},Ui=(()=>{class i{constructor(){}toFormat(t,e){var o="";if(t)switch(e){case Kt.HEX:var f=this.hsvaToRgba(t);f.denormalize();var o=this.rgbaToHex(f,!0);break;case Kt.HSLA:var n=this.hsva2hsla(t);n.denormalize();var o=n.toString();break;case Kt.RGBA:var f=this.hsvaToRgba(t),o=f.toString();break;case Kt.CMYK:var T=this.hsvaToCmyk(t),o=T.toString();break}return o}stringToFormat(t,e){var o=this.stringToHsva(t,!0);return this.toFormat(o,e)}hsva2hsla(t){let e=t.h,o=t.s,n=t.v,f=t.a;if(n===0)return new Ve(e,0,0,f);if(o===0&&n===1)return new Ve(e,1,1,f);{let T=n*(2-o)/2;return new Ve(e,n*o/(1-Math.abs(2*T-1)),T,f)}}hsla2hsva(t){let e=Math.min(t.h,1),o=Math.min(t.s,1),n=Math.min(t.l,1),f=Math.min(t.a,1);if(n===0)return new le(e,0,0,f);{let T=n+o*(1-Math.abs(2*n-1))/2;return new le(e,2*(T-n)/T,T,f)}}hsvaToRgba(t){let e,o,n,f=t.h,T=t.s,I=t.v,z=t.a,X=Math.floor(f*6),lt=f*6-X,Z=I*(1-T),tt=I*(1-lt*T),ht=I*(1-(1-lt)*T);switch(X%6){case 0:e=I,o=ht,n=Z;break;case 1:e=tt,o=I,n=Z;break;case 2:e=Z,o=I,n=ht;break;case 3:e=Z,o=tt,n=I;break;case 4:e=ht,o=Z,n=I;break;case 5:e=I,o=Z,n=tt;break;default:e=0,o=0,n=0}return new fe(e,o,n,z)}cmykToRgb(t){let e=(1-t.c)*(1-t.k),o=(1-t.m)*(1-t.k),n=(1-t.y)*(1-t.k);return new fe(e,o,n,t.a)}rgbaToCmyk(t){let e=1-Math.max(t.r,t.g,t.b);if(e===1)return new ke(0,0,0,1,t.a);{let o=(1-t.r-e)/(1-e),n=(1-t.g-e)/(1-e),f=(1-t.b-e)/(1-e);return new ke(o,n,f,e,t.a)}}hsvaToCmyk(t){let e=this.hsvaToRgba(t);return this.rgbaToCmyk(e)}rgbaToHsva(t){let e,o,n=Math.min(t.r,1),f=Math.min(t.g,1),T=Math.min(t.b,1),I=Math.min(t.a,1),z=Math.max(n,f,T),X=Math.min(n,f,T),lt=z,Z=z-X;if(o=z===0?0:Z/z,z===X)e=0;else{switch(z){case n:e=(f-T)/Z+(f<T?6:0);break;case f:e=(T-n)/Z+2;break;case T:e=(n-f)/Z+4;break;default:e=0}e/=6}return new le(e,o,lt,I)}rgbaToHex(t,e){let o="#"+(16777216|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return t.a!=1&&(o+=(256|Math.round(t.a*255)).toString(16).substr(1)),o}normalizeCMYK(t){return new ke(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new ke(Math.floor(t.c*100),Math.floor(t.m*100),Math.floor(t.y*100),Math.floor(t.k*100),t.a)}denormalizeRGBA(t){return new fe(Math.round(t.r*255),Math.round(t.g*255),Math.round(t.b*255),t.a)}stringToHsva(t="",e=!0){let o=null;t=(t||"").toLowerCase();let n=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(f){return new fe(parseInt(f[2],10)/255,parseInt(f[3],10)/255,parseInt(f[4],10)/255,isNaN(parseFloat(f[5]))?1:parseFloat(f[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(f){return new Ve(parseInt(f[2],10)/360,parseInt(f[3],10)/100,parseInt(f[4],10)/100,isNaN(parseFloat(f[5]))?1:parseFloat(f[5]))}},{re:/cmyk?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(f){return new ke(parseInt(f[1],10)/100,parseInt(f[2],10)/100,parseInt(f[3],10)/100,parseInt(f[4],10)/100)}}];e?n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(f){return new fe(parseInt(f[1],16)/255,parseInt(f[2],16)/255,parseInt(f[3],16)/255,parseInt(f[4]||"FF",16)/255)}}):n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(f){return new fe(parseInt(f[1],16)/255,parseInt(f[2],16)/255,parseInt(f[3],16)/255,1)}}),n.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(f){return new fe(parseInt(f[1]+f[1],16)/255,parseInt(f[2]+f[2],16)/255,parseInt(f[3]+f[3],16)/255,1)}});for(let f in n)if(n.hasOwnProperty(f)){let T=n[f],I=T.re.exec(t),z=I&&T.parse(I);if(z){if(z instanceof fe)o=this.rgbaToHsva(z);else if(z instanceof Ve)o=this.hsla2hsva(z);else if(z instanceof ke){let X=this.cmykToRgb(z);o=this.rgbaToHsva(X)}return o}}return o}outputFormat(t){return this.hsvaToRgba(t).toString()}getFormatByString(t){if(t){t=t.toLowerCase();let e=/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/,o=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,n=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/,f=/(cmyk\(\d{1,3}(,\s?\d{1,3}){3}\))/;if(e.test(t))return"hex";if(o.test(t))return"rgba";if(n.test(t))return"hsla";if(f.test(t))return"cmyk"}return"hex"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=We({token:i,factory:i.\u0275fac}),i})(),Yi=class{constructor(a,t,e,o){this.h=a,this.s=t,this.v=e,this.a=o}},xo=class{constructor(a,t,e,o){this.h=a,this.s=t,this.v=e,this.a=o}},Ga=(()=>{class i{mouseDown(t){this.start(t)}touchStart(t){this.start(t)}constructor(t){this.elRef=t,this.dragEnd=new wt,this.dragStart=new wt,this.newValue=new wt,this.listenerMove=e=>this.move(e),this.listenerStop=()=>this.stop()}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){let e=this.elRef.nativeElement.getBoundingClientRect();return(t.pageX!==void 0?t.pageX:t.touches[0].pageX)-e.left-window.pageXOffset}getY(t){let e=this.elRef.nativeElement.getBoundingClientRect();return(t.pageY!==void 0?t.pageY:t.touches[0].pageY)-e.top-window.pageYOffset}setCursor(t){let e=this.elRef.nativeElement.offsetWidth,o=this.elRef.nativeElement.offsetHeight,n=Math.max(0,Math.min(this.getX(t),e)),f=Math.max(0,Math.min(this.getY(t),o));this.rgX!==void 0&&this.rgY!==void 0?this.newValue.emit({s:n/e,v:1-f/o,rgX:this.rgX,rgY:this.rgY}):this.rgX===void 0&&this.rgY!==void 0?this.newValue.emit({v:f/o,rgY:this.rgY}):this.rgX!==void 0&&this.rgY===void 0&&this.newValue.emit({v:n/e,rgX:this.rgX})}}return i.\u0275fac=function(t){return new(t||i)(G(Xe))},i.\u0275dir=eo({type:i,selectors:[["","slider",""]],hostBindings:function(t,e){t&1&&O("mousedown",function(n){return e.mouseDown(n)})("touchstart",function(n){return e.touchStart(n)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),i})(),La=(()=>{class i{constructor(t,e){this.service=t,this.cdr=e,this.color=new le(0,1,1,1),this.controls="default",this.sliderChange=new wt(!1),this.onAlphaChange=new wt(!1),this.hsva=new le(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new le(0,1,1,1)),this.slider=new Yi(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(t){t.color&&this.color&&this.update()}ngAfterViewInit(){let t=this.hueSlider?.nativeElement.offsetWidth||140,e=this.alphaSlider?.nativeElement.offsetWidth||140;this.sliderDimMax=new xo(t,220,130,e),this.update()}onSliderChange(t,e){switch(t){case"saturation-lightness":this.hsva.onColorChange(e);break;case"hue":this.hsva.onHueChange(e);break;case"alpha":this.hsva.onAlphaChange(e),this.onAlphaChange.emit(e);break;case"value":this.hsva.onValueChange(e);break}this.update(),this.setColor(this.outputColor)}setColor(t){this.color=t,this.sliderChange.emit(this.color)}getBackgroundColor(t){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+t+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let t=this.service.hsvaToRgba(this.hsva).denormalize(),e=this.service.hsvaToRgba(new le(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+e.r+","+e.g+","+e.b+")",this.alphaSliderColor="rgb("+t.r+","+t.g+","+t.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new Yi(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return i.\u0275fac=function(t){return new(t||i)(G(Ui),G(ci))},i.\u0275cmp=at({type:i,selectors:[["color-picker"]],viewQuery:function(t,e){if(t&1&&(oi(ya,5),oi(wa,5)),t&2){let o;ni(o=ri())&&(e.hueSlider=o.first),ni(o=ri())&&(e.alphaSlider=o.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[ko],decls:8,vars:4,consts:[["dialogPopup",""],["hueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"newValue","slider","rgX","rgY"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"newValue","slider","rgX"],[1,"sliderCursor"],[1,"alpha",3,"newValue","slider","rgX"],[1,"alpha-gradient",3,"ngStyle"]],template:function(t,e){if(t&1){let o=K();c(0,"div",3,0),O("click",function(f){return V(o),B(f.stopPropagation())}),q(2,ba,3,8,"div",4),c(3,"div",5),q(4,Sa,3,2,"div",6),c(5,"div",7),q(6,Ma,5,3,"div",8)(7,ja,6,4,"div",9),u()()()}t&2&&(v(2),F("ngIf",e.controls!="only-alpha"),v(2),F("ngIf",e.controls!="only-alpha"),v(2),F("ngIf",e.controls!="only-alpha"),v(),F("ngIf",e.controls!="no-alpha"))},dependencies:[ro,pi,Ga],styles:[`.color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}
`],encapsulation:2}),i})(),Na=(()=>{class i{click(t){this.isOutside(t)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(t,e){this.service=t,this.cdr=e,this.color="#000000",this.previewColor="#000000",this.hsva=new le(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=Fn,this.variants=[],this.userFormats=[],this.colorFormats=Co,this.format=Kt.HEX,this.formatMap={hex:Kt.HEX,rgba:Kt.RGBA,hsla:Kt.HSLA,cmyk:Kt.CMYK},this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default",this.placeholder="#FFFFFF"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(t){let e;if(this.color)for(let o=0;o<t.length;o++){let n=t[o];typeof n=="string"?this.service.stringToFormat(this.color,Kt.HEX)==this.service.stringToFormat(n,Kt.HEX)&&(e=o):n===void 0?this.color=void 0:this.findIndexSelectedColor(n.variants)!=null&&(e=o)}return e}iniciate(t,e,o,n,f,T,I,z,X,lt,Z,tt,ht=[]){if(this.colorPickerControls=Z,this.triggerInstance=t,this.TriggerBBox=e,this.color=o,this.hideColorPicker=z,this.hideTextInput=I,this.acceptLabel=X,this.cancelLabel=lt,ht.length&&ht.every(Vt=>Co.includes(Vt))&&(this.colorFormats=ht),T?this.colorFormats.includes(T)?(this.format=this.colorFormats.indexOf(T.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=T.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=Kt.HEX):(this.format=this.colorFormats.indexOf(this.service.getFormatByString(this.color)),this.format<0&&(this.format=0)),this.previewColor=this.color,this.palette=n??Fn,this.colorsAnimationEffect=f,tt=="top"){let ct=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+ct.height+"px ))"}}setPosition(){if(this.TriggerBBox){let e=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=e.top+e.height,e.left+250>window.innerWidth?this.left=e.right<250?window.innerWidth/2-250/2:e.right-250:this.left=e.left}}setPositionY(){let t=this.TriggerBBox.nativeElement.getBoundingClientRect(),e=this.panelRef.nativeElement.getBoundingClientRect(),o=e.height;t.bottom+o>window.innerHeight?this.positionString=t.top<e.height?"transform: translateY(-"+t.bottom+"px );":"transform: translateY(calc( -100% - "+t.height+"px ));":this.positionString="",this.cdr.detectChanges()}hasVariant(t){return this.previewColor?typeof t!="string"&&t.variants.some(e=>e.toUpperCase()==this.previewColor.toUpperCase()):!1}isSelected(t){return this.previewColor?typeof t=="string"&&t.toUpperCase()==this.previewColor.toUpperCase():!1}getBackgroundColor(t){return typeof t=="string"?{background:t}:{background:t?.preview}}onAlphaChange(t){this.palette=this.ChangeAlphaOnPalette(t,this.palette)}ChangeAlphaOnPalette(t,e){var o=[];for(let n=0;n<e.length;n++){let f=e[n];if(typeof f=="string"){let T=this.service.stringToHsva(f);T.onAlphaChange(t),o.push(this.service.toFormat(T,this.format))}else{let T=new vo,I=this.service.stringToHsva(f.preview);I.onAlphaChange(t),T.preview=this.service.toFormat(I,this.format),T.variants=this.ChangeAlphaOnPalette(t,f.variants),o.push(T)}}return o}changeColor(t){this.setColor(this.service.stringToHsva(t)),this.emitClose("accept")}onChangeColorPicker(t){this.temporalColor=t,this.color=this.service.toFormat(t,this.format),this.triggerInstance.sliderChange(this.service.toFormat(t,this.format))}changeColorManual(t){this.previewColor=t,this.color=t,this.hsva=this.service.stringToHsva(t),this.setPreviewColor(this.hsva),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color,this.previewColor)}setColor(t,e=-1){this.hsva=t;let o=this.colorFormats[this.format],n=e;n<0&&(n=this.formatMap[o]),this.color=this.service.toFormat(t,n),this.setPreviewColor(t),this.triggerInstance.setColor(this.color,this.previewColor)}setPreviewColor(t){this.previewColor=t?this.service.hsvaToRgba(t).toString():void 0}onChange(){}onColorClick(t){typeof t=="string"||t===void 0?this.changeColor(t):(this.variants=t.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){if(this.canChangeFormat){this.format=(this.format+1)%this.colorFormats.length;let t=this.colorFormats[this.format],e=this.formatMap[t];this.setColor(this.hsva,e),this.placeholder=this.service.toFormat(new le(0,0,1,1),e)}}emitClose(t){this.menu==3&&(t=="cancel"||t=="accept"&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){this.menu==3&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(t){return t.target.classList.contains("ngx-colors-overlay")}}return i.\u0275fac=function(t){return new(t||i)(G(Ui),G(ci))},i.\u0275cmp=at({type:i,selectors:[["ngx-colors-panel"]],viewQuery:function(t,e){if(t&1&&oi(Ta,5),t&2){let o;ni(o=ri())&&(e.panelRef=o.first)}},hostVars:4,hostBindings:function(t,e){t&1&&O("mousedown",function(n){return e.click(n)},!1,io)("scroll",function(){return e.onScroll()},!1,io)("resize",function(){return e.onResize()},!1,Ao),t&2&&ye("top",e.top,"px")("left",e.left,"px")},decls:6,vars:6,consts:[["dialog",""],["paintInput",""],[1,"opened"],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"click","ngStyle"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style",`
            position: absolute;
            height: 7px;
            width: 7px;
            border: 1px solid rgba(0, 0, 0, 0.03);
            border-radius: 100%;
            top: 0;
            right: 0;
          `,3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"colorChange","onAlphaChange","controls","color"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"click","ngStyle"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"sliderChange","controls","color"],[1,"manual-input-wrapper"],[2,"cursor","pointer",3,"click"],[1,"g-input"],["type","text",3,"keyup","keydown.enter","placeholder","value"]],template:function(t,e){t&1&&(c(0,"div",2,0),q(2,Oa,5,4,"ng-container",3)(3,Va,8,2,"ng-container",3)(4,Ba,12,4,"ng-container",3)(5,Ra,6,7,"div",4),u()),t&2&&(Io(e.positionString),v(2),F("ngIf",e.menu==1),v(),F("ngIf",e.menu==2),v(),F("ngIf",e.menu==3),v(),F("ngIf",!e.hideTextInput))},dependencies:[zo,ro,pi,La],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[Uo("colorsAnimation",[lo("void => slide-in",[Ye(":enter",ve({opacity:0}),{optional:!0}),Ye(":enter",co("10ms",[ao(".3s ease-in",so([ve({opacity:0,transform:"translatex(-50%)",offset:0}),ve({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),ve({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),lo("void => popup",[Ye(":enter",ve({opacity:0,transform:"scale(0)"}),{optional:!0}),Ye(":enter",co("10ms",[ao("500ms ease-out",so([ve({opacity:.5,transform:"scale(.5)",offset:.3}),ve({opacity:1,transform:"scale(1.1)",offset:.8}),ve({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),i})(),In={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0},Bn=(()=>{class i{constructor(t,e,o){this.resolver=t,this.applicationRef=e,this.injector=o}createPanel(t,e){this.componentRef!=null&&this.removePanel();let o=this.resolver.resolveComponentFactory(Na);this.componentRef=o.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);let n=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(e),Object.keys(In).forEach(f=>{this.overlay.style[f]=In[f]}),t?document.getElementById(t).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(n),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return i.\u0275fac=function(t){return new(t||i)(ti(Oo),ti(No),ti(Do))},i.\u0275prov=We({token:i,factory:i.\u0275fac}),i})(),yo=(()=>{class i{onClick(){this.openPanel()}constructor(t,e,o){this.triggerRef=t,this.panelFactory=e,this.service=o,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new wt,this.input=new wt,this.slider=new wt,this.close=new wt,this.open=new wt,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}ngOnDestroy(){this.panelRef&&this.panelFactory.removePanel()}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position,this.formats)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}setDisabledState(t){this.isDisabled=t,this.triggerRef.nativeElement.style.opacity=t?.5:1}setColor(t,e=""){this.writeValue(t,e),this.onChangeCallback(t),this.input.emit(t)}sliderChange(t){this.slider.emit(t)}get value(){return this.color}set value(t){this.setColor(t),this.onChangeCallback(t)}writeValue(t,e=""){if(t!==this.color){if(this.format){let n=Co.indexOf(this.format.toLowerCase());t=this.service.stringToFormat(t,n)}this.color=t;let o=!1;t&&t.startsWith("cmyk")&&(o=!0,e||(e=this.service.stringToFormat(t,Kt.RGBA))),this.change.emit(o?e:t)}}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}}return i.\u0275fac=function(t){return new(t||i)(G(Xe),G(Bn),G(Ui))},i.\u0275dir=eo({type:i,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(t,e){t&1&&O("click",function(){return e.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",formats:"formats",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[Lo([{provide:Jo,useExisting:To(()=>i),multi:!0}])]}),i})(),Rn=(()=>{class i{constructor(t,e){this.cdRef=t,this.triggerDirective=e,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(t=>{this.color=t,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(G(ci),G(yo,1))},i.\u0275cmp=at({type:i,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(t,e){t&1&&(c(0,"div",0)(1,"div",1)(2,"div",2),Q(3,"div",3),u()()()),t&2&&(v(3),ii("colornull",!e.color),F("ngStyle",no(3,Vn,e.color)))},dependencies:[pi],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),i})(),Gn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ge({type:i}),i.\u0275inj=Re({providers:[Ui,Bn],imports:[mi]}),i})();var qa=(i,a)=>a.id;function Ha(i,a){if(i&1){let t=K();c(0,"div",4)(1,"ngx-colors",5),Qt("ngModelChange",function(o){let n=V(t).$implicit,f=x(2).$implicit,T=x();return Ht(T.projectConditionColorMap[f.id][n],o)||(T.projectConditionColorMap[f.id][n]=o),B(o)}),u(),c(2,"div"),w(3),u()()}if(i&2){let t=a.$implicit,e=x(2).$implicit,o=x();v(),qt("ngModel",o.projectConditionColorMap[e.id][t]),v(2),yt(t)}}function Qa(i,a){if(i&1&&ft(0,Ha,4,2,"div",4,Ce),i&2){let t=x().$implicit,e=x();gt(e.projectConditionMap[t.id])}}function $a(i,a){if(i&1&&(c(0,"div")(1,"div")(2,"b"),w(3),u()(),q(4,Qa,2,0),u()),i&2){let t=a.$implicit,e=x();v(3),yt(t.name),v(),J(e.projectConditionMap[t.id]?4:-1)}}var Ln=(()=>{class i{set projects(t){this._projects=t;for(let e of t)this.web.getProjectUniqueConditions(e.id).subscribe(o=>{for(let n of o)this.projectConditionMap[n.AnalysisGroup.project]||(this.projectConditionMap[n.AnalysisGroup.project]=[]),this.projectConditionMap[n.AnalysisGroup.project].includes(n.Condition)||this.projectConditionMap[n.AnalysisGroup.project].push(n.Condition),this.projectConditionColorMap[n.AnalysisGroup.project]||(this.projectConditionColorMap[n.AnalysisGroup.project]={}),this.projectConditionColorMap[n.AnalysisGroup.project][n.Condition]||(this.projectConditionColorMap[n.AnalysisGroup.project][n.Condition]="")})}get projects(){return this._projects}set projectConditionColorMap(t){if(t==null){this._projectConditionColorMap={};return}this._projectConditionColorMap=Object.assign({},t)}get projectConditionColorMap(){return this._projectConditionColorMap}constructor(t,e){this.dialogRef=t,this.web=e,this._projects=[],this.projectConditionMap={},this._projectConditionColorMap={}}save(){this.dialogRef.close(this.projectConditionColorMap)}cancel(){this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||i)(G(Bt),G(Jt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-condition-color-editor-dialog"]],inputs:{projects:"projects",projectConditionColorMap:"projectConditionColorMap"},standalone:!0,features:[mt],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],[2,"display","flex","gap","5px","align-items","center"],["ngx-colors-trigger","",3,"ngModelChange","ngModel"]],template:function(e,o){e&1&&(c(0,"h1",0),w(1,"Condition Color Editor"),u(),c(2,"div",1),ft(3,$a,5,2,"div",null,qa),u(),c(5,"div",2)(6,"button",3),O("click",function(){return o.cancel()}),w(7,"Close"),u(),c(8,"button",3),O("click",function(){return o.save()}),w(9,"Save"),u()()),e&2&&(v(3),gt(o.projects))},dependencies:[Rt,Gt,Gn,Rn,yo,Se,Ft,be,Tt,Lt]})}}return i})();function Wa(i,a){if(i&1&&(c(0,"mat-option",6),w(1),u()),i&2){let t=a.$implicit;F("value",t),v(),yt(t)}}var Nn=(()=>{class i{_filter(t){let e=t.toLowerCase();return this.tags.filter(o=>o.toLowerCase().includes(e))}constructor(t,e,o){this.fb=t,this.dialogRef=e,this.collateService=o,this.form=this.fb.group({name:["",re.required],existing:[!1],id:[-1]}),this.tags=[]}ngOnInit(){this.filteredTags=this.form.controls.name.valueChanges.pipe(Ke(""),Ze(t=>this.collateService.getCollateTags(t).pipe(Je(e=>e.results.map(o=>o.name)))))}submit(){let t=this.form.controls.name.value;this.collateService.getCollateTags(t).subscribe(e=>{let o=e.results.find(f=>f.name.toLowerCase()===t.toLowerCase()),n=!!o;this.form.controls.existing.setValue(n),this.form.controls.id.setValue(n?o.id:null),this.dialogRef.close(this.form.value)})}cancel(){this.dialogRef.close()}onTagSelected(t){let e=t.option.value;this.form.controls.name.setValue(e),this.collateService.getCollateTags(e).subscribe(o=>{let n=o.results.find(f=>f.name.toLowerCase()===e.toLowerCase());this.form.controls.existing.setValue(!!n),this.form.controls.id.setValue(n?n.id:null)})}static{this.\u0275fac=function(e){return new(e||i)(G(Xt),G(Bt),G(Me))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-tag-create-dialog"]],standalone:!0,features:[mt],decls:18,vars:5,consts:[["auto","matAutocomplete"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["type","text","matInput","","formControlName","name",3,"matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"click","disabled"]],template:function(e,o){if(e&1){let n=K();c(0,"h1",1),w(1,"Create/Add Tag"),u(),c(2,"div",2)(3,"form",3)(4,"mat-form-field")(5,"mat-label"),w(6,"Tag Name"),u(),Q(7,"input",4),c(8,"mat-autocomplete",5,0),O("optionSelected",function(T){return V(n),B(o.onTagSelected(T))}),ft(10,Wa,2,2,"mat-option",6,Ce),si(12,"async"),u()()()(),c(13,"div",7)(14,"button",8),O("click",function(){return V(n),B(o.cancel())}),w(15,"Cancel"),u(),c(16,"button",9),O("click",function(){return V(n),B(o.submit())}),w(17,"Submit"),u()()}if(e&2){let n=ne(9);v(3),F("formGroup",o.form),v(4),F("matAutocomplete",n),v(3),gt(li(12,3,o.filteredTags)),v(6),F("disabled",o.form.invalid)}},dependencies:[Rt,Gt,ie,ee,Wt,Ft,te,pe,de,me,Ut,Yt,Tt,Lt,Ne,di,xi,yi]})}}return i})();var Xa=(i,a)=>a.id;function Ya(i,a){i&1&&(c(0,"th",11),w(1," Original Title "),u())}function Ua(i,a){if(i&1&&(c(0,"td",12),w(1),u()),i&2){let t=a.$implicit;v(),dt(" ",t," ")}}function Ja(i,a){i&1&&(c(0,"th",11),w(1," Display Title "),u())}function Ka(i,a){if(i&1&&(c(0,"td",12)(1,"form",13)(2,"mat-form-field"),Q(3,"input",14),u()()()),i&2){let t=a.$implicit,e=x(2).$implicit,o=x();v(),F("formGroup",o.formMap[e.id][t]),v(2),Ro("formControlName",t)}}function Za(i,a){i&1&&Q(0,"tr",15)}function ts(i,a){i&1&&Q(0,"tr",16)}function es(i,a){if(i&1&&(c(0,"h5"),w(1),u(),c(2,"table",4),At(3,5),q(4,Ya,2,0,"th",6)(5,Ua,2,1,"td",7),Ot(),At(6,8),q(7,Ja,2,0,"th",6)(8,Ka,4,2,"td",7),Ot(),q(9,Za,1,0,"tr",9)(10,ts,1,0,"tr",10),u()),i&2){let t=x().$implicit,e=x();v(),yt(t.name),v(),F("dataSource",e.projectConditionMap[t.id]),v(7),F("matHeaderRowDef",e.displayedColumns),v(),F("matRowDefColumns",e.displayedColumns)}}function is(i,a){if(i&1&&q(0,es,11,4),i&2){let t=a.$implicit,e=x();J(e.formMap[t.id]?0:-1)}}var zn=(()=>{class i{set projects(t){this._projects=t.slice()}get projects(){return this._projects}set renameSampleCondition(t){for(let e of this.projects)this.web.getProjectUniqueConditions(e.id).subscribe(o=>{for(let n of o){if(this.formMap[n.AnalysisGroup.project]||(this.formMap[n.AnalysisGroup.project]={}),!this.formMap[n.AnalysisGroup.project][n.Condition]){let f={};f[n.Condition]=new ae(n.Condition,re.required),this.formMap[n.AnalysisGroup.project][n.Condition]=this.fb.group(f)}this.projectConditionMap[n.AnalysisGroup.project]||(this.projectConditionMap[n.AnalysisGroup.project]=[]),this.projectConditionMap[n.AnalysisGroup.project].includes(n.Condition)||this.projectConditionMap[n.AnalysisGroup.project].push(n.Condition),this.renameSampleCondition[n.AnalysisGroup.project]||(this.renameSampleCondition[n.AnalysisGroup.project]={}),this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]||(this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]=n.Condition),t[n.AnalysisGroup.project]&&t[n.AnalysisGroup.project][n.Condition]&&(this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]=t[n.AnalysisGroup.project][n.Condition],this.formMap[n.AnalysisGroup.project][n.Condition].controls[n.Condition].setValue(t[n.AnalysisGroup.project][n.Condition]))}})}get renameSampleCondition(){return this._renameSampleCondition}constructor(t,e,o,n){this.dialog=t,this.web=e,this.fb=o,this.sb=n,this.displayedColumns=["original","display"],this.projectConditionMap={},this._projects=[],this._renameSampleCondition={},this.formMap={}}close(){this.dialog.close()}submit(){let t={};for(let e in this.formMap){t[e]={};for(let o in this.formMap[e])if(t[e][o]=this.formMap[e][o].value[o],!this.formMap[e][o].valid){this.sb.open(`${o} is invalid`);return}}this.dialog.close(t)}static{this.\u0275fac=function(e){return new(e||i)(G(Bt),G(Jt),G(Xt),G(se))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-rename-sample-condition-dialog"]],inputs:{projects:"projects",renameSampleCondition:"renameSampleCondition"},standalone:!0,features:[mt],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","original"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","display"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"formGroup"],["matInput","",2,"border-radius","0",3,"formControlName"],["mat-header-row",""],["mat-row",""]],template:function(e,o){e&1&&(c(0,"h1",0),w(1,"Rename Conditions"),u(),c(2,"div",1),ft(3,is,1,1,null,null,Xa),u(),c(5,"div",2)(6,"button",3),O("click",function(){return o.submit()}),w(7,"Submit"),u(),c(8,"button",3),O("click",function(){return o.close()}),w(9,"Close"),u()()),e&2&&(v(3),gt(o.projects))},dependencies:[Rt,Gt,ie,ee,Wt,Ft,te,pe,de,Di,ji,ki,Ei,Oi,Pi,Fi,Ai,Mi,Ti,Lt,Tt,Yt,Ut]})}}return i})();var qn=(()=>{class i{set settings(t){for(let e in t)this._settings[e]=t[e];this._settings&&this.form.patchValue(this._settings)}get settings(){return this._settings}constructor(t,e){this.fb=t,this.dialog=e,this._settings={},this.form=this.fb.group({marginLeft:150,marginRight:100,marginTop:100,marginBottom:100,titleTextSize:14,showTitle:!0,height:500,barSize:50})}submit(){this.dialog.close(this.form.value)}close(){this.dialog.close()}static{this.\u0275fac=function(e){return new(e||i)(G(Xt),G(Bt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-plot-settings"]],inputs:{settings:"settings"},standalone:!0,features:[mt],decls:46,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","20px",3,"formGroup"],["matInput","","formControlName","height","type","number"],["matInput","","formControlName","barSize","type","number"],["matInput","","formControlName","marginLeft","type","number"],["matInput","","formControlName","marginRight","type","number"],["matInput","","formControlName","marginTop","type","number"],["matInput","","formControlName","marginBottom","type","number"],["formControlName","showTitle"],["matInput","","formControlName","titleTextSize","type","number"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(e,o){e&1&&(c(0,"h5",0),w(1,"Plot General Settings"),u(),c(2,"div",1)(3,"form",2)(4,"section")(5,"b"),w(6,"Overall Size"),u(),c(7,"mat-form-field"),Q(8,"input",3),c(9,"mat-label"),w(10,"Height"),u()(),c(11,"mat-form-field"),Q(12,"input",4),c(13,"mat-label"),w(14,"Bar size"),u()(),c(15,"mat-form-field"),Q(16,"input",5),c(17,"mat-label"),w(18,"Margin Left"),u()(),c(19,"mat-form-field"),Q(20,"input",6),c(21,"mat-label"),w(22,"Margin Right"),u()(),c(23,"mat-form-field"),Q(24,"input",7),c(25,"mat-label"),w(26,"Margin Top"),u()(),c(27,"mat-form-field"),Q(28,"input",8),c(29,"mat-label"),w(30,"Margin Bottom"),u()(),Q(31,"hr"),u(),c(32,"section")(33,"b"),w(34,"Title"),u(),c(35,"mat-checkbox",9),w(36,"Show Title"),u(),c(37,"mat-form-field"),Q(38,"input",10),c(39,"mat-label"),w(40,"Title Text Size"),u()()()()(),c(41,"div",11)(42,"button",12),O("click",function(){return o.close()}),w(43,"Cancel"),u(),c(44,"button",12),O("click",function(){return o.submit()}),w(45,"Save"),u()()),e&2&&(v(3),F("formGroup",o.form))},dependencies:[Rt,Gt,ie,ee,Wt,Zo,Ft,te,pe,de,Yt,Ut,me,Qe,Lt,Tt]})}}return i})();function os(i,a){if(i&1){let t=K();c(0,"mat-checkbox",12),Qt("ngModelChange",function(o){V(t);let n=x(2);return Ht(n.collate.settings.showTags,o)||(n.collate.settings.showTags=o),B(o)}),w(1,"Show Tags"),u()}if(i&2){let t=x(2);qt("ngModel",t.collate.settings.showTags)}}function ns(i,a){if(i&1){let t=K();c(0,"h1",15),O("click",function(){V(t);let o=x(3);return B(o.toggleEditTitle())}),w(1),u(),Q(2,"br")}if(i&2){let t=x(3);v(),yt(t.collate.title)}}function rs(i,a){if(i&1){let t=K();c(0,"div")(1,"mat-form-field",16)(2,"input",17),O("keydown.enter",function(){V(t);let o=x(3);return B(o.toggleEditTitle())}),Qt("ngModelChange",function(o){V(t);let n=x(3);return Ht(n.collate.title,o)||(n.collate.title=o),B(o)}),u()(),c(3,"button",18),O("click",function(){V(t);let o=x(3);return B(o.toggleEditTitle())}),c(4,"mat-icon"),w(5,"save"),u()()()}if(i&2){let t=x(3);v(2),qt("ngModel",t.collate.title)}}function as(i,a){if(i&1){let t=K();c(0,"div",19),O("click",function(){V(t);let o=x(3);return B(o.toggleEditGreeting())}),w(1),u()}if(i&2){let t=x(3);v(),yt(t.collate.greeting)}}function ss(i,a){if(i&1){let t=K();c(0,"div")(1,"mat-form-field",20)(2,"input",17),O("keydown.enter",function(){V(t);let o=x(3);return B(o.toggleEditGreeting())}),Qt("ngModelChange",function(o){V(t);let n=x(3);return Ht(n.collate.greeting,o)||(n.collate.greeting=o),B(o)}),u()(),c(3,"button",18),O("click",function(){V(t);let o=x(3);return B(o.toggleEditGreeting())}),c(4,"mat-icon"),w(5,"save"),u()()()}if(i&2){let t=x(3);v(2),qt("ngModel",t.collate.greeting)}}function ls(i,a){if(i&1&&(c(0,"div",9)(1,"div",13),q(2,ns,3,1)(3,rs,6,1,"div")(4,as,2,1,"div",14)(5,ss,6,1,"div"),u()()),i&2){let t=x(2);v(2),J(t.editTitle?3:2),v(2),J(t.editGreeting?5:4)}}function cs(i,a){if(i&1){let t=K();c(0,"div",1)(1,"button",21),O("click",function(){V(t);let o=x(2);return B(o.openCollateTagCreateDialog())}),w(2,"Add Tag +"),u()(),c(3,"div",22)(4,"app-collate-tags",23),O("collageTagsChange",function(o){V(t);let n=x(2);return B(n.handleCollageTagsChange(o))}),u()()}if(i&2){let t=x(2);v(4),F("collageTags",t.collate.tags)}}function ps(i,a){if(i&1&&Q(0,"mat-tab",25),i&2){let t=a.$implicit;F("label",t)}}function ds(i,a){if(i&1){let t=K();c(0,"div",11)(1,"mat-tab-group",24),O("selectedTabChange",function(){V(t);let o=x(2);return B(o.filterDataBySearchTerm())}),Qt("selectedIndexChange",function(o){V(t);let n=x(2);return Ht(n.selectedIndex,o)||(n.selectedIndex=o),B(o)}),ft(2,ps,1,1,"mat-tab",25,Ce),u()()}if(i&2){let t=x(2);v(),qt("selectedIndex",t.selectedIndex),F("mat-stretch-tabs",!1),v(),gt(t.searchTerms)}}function ms(i,a){if(i&1){let t=K();c(0,"app-collate-project-list",27),O("deleteProject",function(o){V(t);let n=x(4);return B(n.deleteProject(o))})("projectOrderChanged",function(o){V(t);let n=x(4);return B(n.onProjectOrderChanged(o))}),u()}if(i&2){let t=x(4);F("searchTerm",t.selectedSearchTerm)("projectConditionColorMap",t.collate.settings.projectConditionColorMap)("projects",t.projects)("filteredResults",t.filteredResults)("renameCondition",t.collate.settings.renameSampleCondition)}}function hs(i,a){if(i&1&&q(0,ms,1,5,"app-collate-project-list",26),i&2){let t=x(3);J(t.collate.settings.projectConditionColorMap&&t.collate.settings.renameSampleCondition?0:-1)}}function us(i,a){if(i&1&&q(0,hs,1,1),i&2){let t=x(2);J(t.collate.settings?0:-1)}}function fs(i,a){if(i&1){let t=K();c(0,"mat-toolbar")(1,"mat-toolbar-row"),Q(2,"span",2),q(3,os,2,1,"mat-checkbox",3),c(4,"button",4),O("click",function(){V(t);let o=x();return B(o.goToCollateView())}),c(5,"mat-icon"),w(6,"visibility"),u()(),c(7,"button",5),O("click",function(){V(t);let o=x();return B(o.openProjectAddDialog())}),c(8,"mat-icon"),w(9,"add"),u()(),c(10,"button",6),O("click",function(){V(t);let o=x();return B(o.updateCollate())}),c(11,"mat-icon"),w(12,"save"),u()(),c(13,"button",7)(14,"mat-icon"),w(15,"more_vert"),u()(),c(16,"mat-menu",null,0)(18,"button",8),O("click",function(){V(t);let o=x();return B(o.openReorderDialog())}),w(19,"Reorder Analysis Groups"),u(),c(20,"button",8),O("click",function(){V(t);let o=x();return B(o.openVisibilityDialog())}),w(21,"Change Analysis Group Visibility"),u(),c(22,"button",8),O("click",function(){V(t);let o=x();return B(o.openConditionColorEditorDialog())}),w(23,"Set Condition Colors"),u(),c(24,"button",8),O("click",function(){V(t);let o=x();return B(o.openPlotSettings())}),w(25,"Change Plot General Settings"),u(),c(26,"button",8),O("click",function(){V(t);let o=x();return B(o.openRenameConditionDialog())}),w(27,"Rename Condition"),u()()()(),q(28,ls,6,2,"div",9)(29,cs,5,1),c(30,"div",1)(31,"app-collate-search",10),O("searchResultID",function(o){V(t);let n=x();return B(n.getSearchFromID(o))}),u()(),q(32,ds,4,2,"div",11)(33,us,1,1)}if(i&2){let t=ne(17),e=x();v(3),J(e.collate?3:-1),v(10),F("matMenuTriggerFor",t),v(15),J(e.collate?28:-1),v(),J(e.collate?29:-1),v(2),F("projects",e.projects),v(),J(e.searchTerms.length>0?32:-1),v(),J(e.collate?33:-1)}}function gs(i,a){i&1&&(c(0,"div",1)(1,"p"),w(2," You do not have permission to edit this collate. "),u()())}var wo=(()=>{class i{set collateId(t){t&&this.collateService.getCollate(t).subscribe(e=>{if(this._collate=e,this.accounts.getCollatePermissions(e.id).subscribe(o=>{this.canEdit=o.edit}),this.projects=e.projects,this._collate.settings||(this._collate.settings={projectOrder:this.projects.map(o=>o.id),analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},plotSettings:{},showTags:!1}),this._collate.settings.plotSettings||(this._collate.settings.plotSettings={}),e.settings.projectOrder){let o=this.projects.filter(n=>!e.settings.projectOrder.includes(n.id));this.projects=this.projects.filter(n=>e.settings.projectOrder.includes(n.id)),this.projects=this.projects.concat(o)}if(this.collate&&"showTags"in this.collate.settings&&(this.collate.settings.showTags=!1),this.collate?.settings.projectConditionColorMap)this.graph.projectConditionColorMap=this.collate.settings.projectConditionColorMap;else{this.collate.settings.projectConditionColorMap={};for(let o of this.projects)this.collate.settings.projectConditionColorMap[o.id]={}}if(!this.collate?.settings.renameSampleCondition){this.collate.settings.renameSampleCondition={};for(let o of this.projects)this.collate.settings.renameSampleCondition[o.id]={},this.web.getProjectUniqueConditions(o.id).subscribe(n=>{for(let f of n)this.collate.settings.renameSampleCondition[o.id][f.Condition]=f.Condition;console.log(this.collate.settings.renameSampleCondition)})}})}get collate(){return this._collate}set collate(t){this._collate=t}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(t){this._selectedSearchTerm=t}constructor(t,e,o,n,f,T,I){this.accounts=t,this.graph=e,this.router=o,this.snackBar=n,this.dialog=f,this.collateService=T,this.web=I,this._collate=null,this.canEdit=!1,this.projects=[],this.selectedIndex=0,this.editTitle=!1,this.editGreeting=!1,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this.searchTerms=[],this._selectedSearchTerm="",this.filteredResults={},this.removedTags=[]}openProjectAddDialog(){this.dialog.open(Pn).afterClosed().subscribe(e=>{e&&(this.projects=this.projects.concat(e),this.collate&&(this.collate.projects=this.projects,this.updateProjectOrder()))})}updateProjectOrder(){this._collate&&(this._collate.settings.projectOrder=this.projects.map(t=>t.id)),console.log(this.collate)}updateCollate(){this._collate&&this.collateService.updateCollate(this._collate.id,this._collate).subscribe(()=>{if(this.removedTags.length>0){let t=this.removedTags.map(e=>this.collateService.removeTagFromCollate(this._collate?.id,e.id));Mo(t).subscribe(()=>{this.showSnackBar("Collate saved successfully"),this.removedTags=[]})}else this.showSnackBar("Collate saved successfully")})}toggleEditTitle(){this.editTitle=!this.editTitle}toggleEditGreeting(){this.editGreeting=!this.editGreeting}saveTitle(){this.toggleEditTitle(),this.updateCollate()}saveGreeting(){this.toggleEditGreeting(),this.updateCollate()}getSearchFromID(t){this.web.getSearchSession(t).subscribe(e=>{console.log(e)}),this.web.getSearchResults(t,99999).subscribe(e=>{console.log(e.results),this.distributeSearchResults(e.results).then()})}associateAnalysisGroupsWithProjects(){return Zt(this,null,function*(){let t=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},t&&t.forEach(e=>{let o=e.project;this.projectAnalysisGroups[o]||(this.projectAnalysisGroups[o]=[]),this.projectAnalysisGroups[o].push(e),this.analysisGroupProjects[e.id]=this.projects.find(n=>n.id===o)})})}distributeSearchResults(t){return Zt(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(t.map(e=>e.search_term))),t.forEach(e=>{let o=e.analysis_group.id,n=this.analysisGroupProjects[o];n&&(this.searchResults[n.id]||(this.searchResults[n.id]=[]),this.searchResults[n.id].push(e))}),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let t={};return Object.keys(this.searchResults).forEach(e=>{t[e]=this.searchResults[e].filter(o=>o.search_term===this.selectedSearchTerm)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(e=>{let o=parseInt(e),n=this.collate?.settings.analysisGroupOrderMap[o];if(!t[o]||!n)return;let f=t[o].filter(T=>!n.includes(T.analysis_group.id));if(t[o]=t[o].filter(T=>n.includes(T.analysis_group.id)),t[o]=t[o].sort((T,I)=>n.indexOf(T.analysis_group.id)-n.indexOf(I.analysis_group.id)),t[o]=t[o].concat(f),this.collate?.settings?.projectAnalysisGroupVisibility){let T=this.collate?.settings.projectAnalysisGroupVisibility[o];t[o]=t[o].filter(I=>!T||!(I.analysis_group.id in T)?!0:T[I.analysis_group.id])}}),t}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults()}onProjectOrderChanged(t){this.projects=t,this.updateProjectOrder()}showSnackBar(t){this.snackBar.open(t,"Close",{duration:3e3})}deleteProject(t){this.projects=this.projects.filter(e=>e.id!==t.id),this.updateProjectOrder()}goToCollateView(){this._collate&&this.router.navigate(["/collate/view",this._collate.id])}onSearchResultsChange(t,e){this.filteredResults[e]=t,this.collate&&(this.collate.settings.analysisGroupOrderMap||(this.collate.settings.analysisGroupOrderMap={}),this.collate.settings.analysisGroupOrderMap[e]=t.map(o=>o.analysis_group.id),Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(o=>{this.collate.settings.analysisGroupOrderMap[o]=Array.from(new Set(this.collate.settings.analysisGroupOrderMap[o]))}))}openVisibilityDialog(){let t=this.dialog.open(Xi);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(e=>{let o={};e.forEach(f=>{o[f.project]||(o[f.project]=[]),o[f.project].push(f)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(f=>{let T=parseInt(f),I=this.collate?.settings.analysisGroupOrderMap[T];if(!I||!o[T])return;let z=o[T].filter(X=>!I.includes(X.id));o[T]=o[T].filter(X=>I.includes(X.id)),o[T]=o[T].sort((X,lt)=>I.indexOf(X.id)-I.indexOf(lt.id)),o[T]=o[T].concat(z)}),t.componentInstance.projectAnalysisGroupMap=o,t.componentInstance.projects=this.projects;let n={};this.collate?.settings?.projectAnalysisGroupVisibility&&(n=this.collate.settings.projectAnalysisGroupVisibility);for(let f in o){n[f]||(n[f]={});for(let T of o[f])T.id in n[f]||(n[f][T.id]=!0)}t.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},n)}),t.afterClosed().subscribe(e=>{this.collate&&e&&(this.collate.settings.projectAnalysisGroupVisibility=e,this.filteredResults=this.getFilteredSearchResults())})}openReorderDialog(){let t=this.dialog.open(On);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(e=>{let o={};e.forEach(n=>{o[n.project]||(o[n.project]=[]),o[n.project].push(n)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(n=>{let f=parseInt(n),T=this.collate?.settings.analysisGroupOrderMap[f];if(!T||!o[f])return;let I=o[f].filter(z=>!T.includes(z.id));o[f]=o[f].filter(z=>T.includes(z.id)),o[f]=o[f].sort((z,X)=>T.indexOf(z.id)-T.indexOf(X.id)),o[f]=o[f].concat(I)}),t.componentInstance.projectAnalysisGroupMap=o,t.componentInstance.projects=this.projects}),t.afterClosed().subscribe(e=>{this.projects=e.projects,this.updateProjectOrder(),this.projectAnalysisGroups=e.projectAnalysisGroupMap;let o={};Object.keys(this.projectAnalysisGroups).forEach(n=>{o[n]=this.projectAnalysisGroups[n].map(f=>f.id)}),this.collate&&(this.collate.settings.analysisGroupOrderMap=o,this.filteredResults=this.getFilteredSearchResults())})}openConditionColorEditorDialog(){let t=this.dialog.open(Ln);t.componentInstance.projectConditionColorMap=this.collate?.settings?.projectConditionColorMap,t.componentInstance.projects=this.projects,t.afterClosed().subscribe(e=>{this.collate&&(this.collate.settings.projectConditionColorMap=e),this.graph.projectConditionColorMap=Object.assign({},e),this.filteredResults=this.getFilteredSearchResults(),this.graph.redrawTrigger.next(!0)})}openCollateTagCreateDialog(){this.dialog.open(Nn).afterClosed().subscribe(e=>{e&&e.name&&(e.existing&&e.id&&e.id!==-1?this.collateService.addTagToCollate(this.collate?.id,e.id).subscribe(o=>{this.collate&&this.collate.tags.push(o)}):this.collateService.createCollateTag(e.name).subscribe(o=>{this.collateService.addTagToCollate(this.collate?.id,o.id).subscribe(n=>{this.collate&&this.collate.tags.push(n)})}))})}handleCollageTagsChange(t){this.collate&&(this.removedTags=this.collate.tags.filter(e=>!t.includes(e)),this.collate.tags=t)}openRenameConditionDialog(){if(this.collate){let t=this.dialog.open(zn);t.componentInstance.projects=this.collate.projects,t.componentInstance.renameSampleCondition=this.collate.settings.renameSampleCondition,t.afterClosed().subscribe(e=>{this.collate&&(this.collate.settings.renameSampleCondition=Object.assign({},e),console.log(this.collate.settings.renameSampleCondition))})}}openPlotSettings(){if(this.collate){let t=this.dialog.open(qn);t.componentInstance.settings=this.collate.settings.plotSettings,t.afterClosed().subscribe(e=>{this.collate&&e&&(this.collate.settings.plotSettings=e,this.graph.plotSettings=e,this.graph.redrawTrigger.next(!0))})}}static{this.\u0275fac=function(e){return new(e||i)(G(he),G(Bi),G(Le),G(se),G(He),G(Me),G(Jt))}}static{this.\u0275cmp=at({type:i,selectors:[["app-collate-editor"]],inputs:{collateId:"collateId"},standalone:!0,features:[mt],decls:2,vars:1,consts:[["extraActionsMenu","matMenu"],[2,"display","flex","justify-content","center"],[1,"spacer"],[3,"ngModel"],["type","button","aria-label","View Collate","mat-icon-button","",3,"click"],["type","button","aria-label","Add Projects","mat-icon-button","",3,"click"],["type","button","aria-label","Update Collate","mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[3,"searchResultID","projects"],[2,"padding","20px"],[3,"ngModelChange","ngModel"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"],[3,"click"],[2,"font-size","2em","text-align","center","font-family","Roboto, Helvetica Neue, sans-serif","padding","5px"],["matInput","",3,"keydown.enter","ngModelChange","ngModel"],["mat-icon-button","",3,"click"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif",3,"click"],[2,"font-size","25px","text-align","center","font-family","'Roboto', 'Arial Narrow', sans-serif","padding","5px"],["mat-button","",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTagsChange","collageTags"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"label"],[3,"searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"],[3,"deleteProject","projectOrderChanged","searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"]],template:function(e,o){e&1&&q(0,fs,34,7)(1,gs,3,0,"div",1),e&2&&J(o.canEdit?0:1)},dependencies:[Si,we,$t,bi,Se,Wt,Ft,be,qi,Vi,Ii,Yt,Ut,Qi,Gi,Ri,Li,Tt,$i,Qe],styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return i})();var _s=[{component:_n,path:""},{component:_o,path:"view"},{component:_o,path:"view/:collateId"},{component:wo,path:"edit"},{component:wo,path:"edit/:collateId"}],Up=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=Ge({type:i})}static{this.\u0275inj=Re({imports:[mi,Qo.forChild(_s)]})}}return i})();export{Up as CollateModule};
