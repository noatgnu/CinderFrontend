import{a as mn}from"./chunk-ACPICFZ3.js";import{a as pn}from"./chunk-2XQAQ7IP.js";import{a as dn,b as Qn,c as un,d as po,e as Ie,f as Li,g as Me,h as je,i as Ni}from"./chunk-UQF3DTT5.js";import{a as Vi,b as Bi,c as Ri,d as Gi}from"./chunk-CV7N6VUD.js";import{a as yi}from"./chunk-NJANYNPB.js";import{a as wi,b as bi}from"./chunk-7WKUGZYX.js";import{a as Se}from"./chunk-XU3ENHOS.js";import{a as hn,b as Fi,c as Ii}from"./chunk-EWOF6TFM.js";import{a as Si,b as Mi,c as ji,d as Ti,e as ki,f as Ei,g as Di,h as Pi,i as Ai,j as Oi}from"./chunk-XQMPDJO4.js";import{a as ze,b as $o,c as qe,d as Wo,e as Xo,f as Yo,g as vi,h as xi}from"./chunk-QHFQA64Z.js";import{a as gi,b as _i,c as sn,d as Ci,e as ln,f as cn}from"./chunk-DTFCFGOY.js";import{a as ne}from"./chunk-MWJJ7CN7.js";import{a as tn,c as en,d as on,e as nn,f as hi,g as rn,h as ui}from"./chunk-5BYUXBZ2.js";import{a as qt,c as He,d as Ht,e as Qt,f as $t,g as pe}from"./chunk-J5CPSBJE.js";import{Aa as ce,Ca as be,Ha as Kt,Ia as Zt,Ja as an,Ka as mi,L as Ne,La as fi,Na as Wt,Q as zt,R as Ot,S as Ce,ja as Jo,ka as Ut,ma as ie,oa as Vt,pa as se,qa as Ko,ra as oe,sa as ve,ta as le,va as Zo,wa as xe,xa as ye,ya as Jt,za as we}from"./chunk-6THSO37P.js";import{c as Uo,d as ao,g as fe,i as so,j as lo,l as Xe,m as co}from"./chunk-HX3ESI56.js";import{h as Ho,l as Le,p as Qo}from"./chunk-QJ2HU2ZW.js";import{$c as ro,A as Ue,Aa as B,Ab as Fo,Ac as No,Ba as R,Bb as F,Ca as ti,Cb as _e,Da as Eo,Db as ei,Dc as li,Eb as Io,G as Mo,Ga as Do,Hb as J,Ia as wt,Ib as me,Jb as ft,Kb as gt,L as jo,La as We,Lb as u,Mb as f,Nb as Y,Ob as Pt,Pb as At,Rb as K,Ub as O,Wb as x,Xb as Vo,Yb as Bo,Zb as Ro,_b as oo,_c as zo,a as xt,ac as ii,ad as ci,b as jt,ba as Je,bb as Po,bc as oi,ca as Ke,cb as Ao,cc as ni,cd as pi,d as Hn,db as io,e as bo,ed as di,f as Yt,fb as v,fc as ee,g as So,gb as L,gc as S,ha as To,hc as yt,ia as $e,ic as ht,ja as Re,jc as Go,kb as Oo,kc as Gt,kd as qo,lc as Lt,mc as Nt,na as Ze,nc as Lo,oc as ut,pc as ri,qc as no,r as Ye,sa as st,sc as ai,ta as Ge,tc as si,ua as eo,xb as q,za as ko}from"./chunk-TUTLJQZA.js";var yn=Hn((Wi,mo)=>{"use strict";(function(i,a){typeof Wi=="object"&&typeof mo=="object"?mo.exports=a():typeof define=="function"&&define.amd?define([],a):typeof Wi=="object"?Wi.QRCodeStyling=a():i.QRCodeStyling=a()})(self,function(){return(()=>{var i={192:(e,o)=>{var n,m,T=function(){var I=function(A,P){var E=A,b=dt[P],y=null,k=0,H=null,G=[],Q={},Tt=function(p,h){y=function(c){for(var C=new Array(c),w=0;w<c;w+=1){C[w]=new Array(c);for(var V=0;V<c;V+=1)C[w][V]=null}return C}(k=4*E+17),M(0,0),M(k-7,0),M(0,k-7),l(),r(),d(p,h),E>=7&&s(p),H==null&&(H=g(E,b,G)),_(H,h)},M=function(p,h){for(var c=-1;c<=7;c+=1)if(!(p+c<=-1||k<=p+c))for(var C=-1;C<=7;C+=1)h+C<=-1||k<=h+C||(y[p+c][h+C]=0<=c&&c<=6&&(C==0||C==6)||0<=C&&C<=6&&(c==0||c==6)||2<=c&&c<=4&&2<=C&&C<=4)},r=function(){for(var p=8;p<k-8;p+=1)y[p][6]==null&&(y[p][6]=p%2==0);for(var h=8;h<k-8;h+=1)y[6][h]==null&&(y[6][h]=h%2==0)},l=function(){for(var p=ct.getPatternPosition(E),h=0;h<p.length;h+=1)for(var c=0;c<p.length;c+=1){var C=p[h],w=p[c];if(y[C][w]==null)for(var V=-2;V<=2;V+=1)for(var N=-2;N<=2;N+=1)y[C+V][w+N]=V==-2||V==2||N==-2||N==2||V==0&&N==0}},s=function(p){for(var h=ct.getBCHTypeNumber(E),c=0;c<18;c+=1){var C=!p&&(h>>c&1)==1;y[Math.floor(c/3)][c%3+k-8-3]=C}for(c=0;c<18;c+=1)C=!p&&(h>>c&1)==1,y[c%3+k-8-3][Math.floor(c/3)]=C},d=function(p,h){for(var c=b<<3|h,C=ct.getBCHTypeInfo(c),w=0;w<15;w+=1){var V=!p&&(C>>w&1)==1;w<6?y[w][8]=V:w<8?y[w+1][8]=V:y[k-15+w][8]=V}for(w=0;w<15;w+=1)V=!p&&(C>>w&1)==1,w<8?y[8][k-w-1]=V:w<9?y[8][15-w-1+1]=V:y[8][15-w-1]=V;y[k-8][8]=!p},_=function(p,h){for(var c=-1,C=k-1,w=7,V=0,N=ct.getMaskFunction(h),D=k-1;D>0;D-=2)for(D==6&&(D-=1);;){for(var $=0;$<2;$+=1)if(y[C][D-$]==null){var U=!1;V<p.length&&(U=(p[V]>>>w&1)==1),N(C,D-$)&&(U=!U),y[C][D-$]=U,(w-=1)==-1&&(V+=1,w=7)}if((C+=c)<0||k<=C){C-=c,c=-c;break}}},g=function(p,h,c){for(var C=Ee.getRSBlocks(p,h),w=he(),V=0;V<c.length;V+=1){var N=c[V];w.put(N.getMode(),4),w.put(N.getLength(),ct.getLengthInBits(N.getMode(),p)),N.write(w)}var D=0;for(V=0;V<C.length;V+=1)D+=C[V].dataCount;if(w.getLengthInBits()>8*D)throw"code length overflow. ("+w.getLengthInBits()+">"+8*D+")";for(w.getLengthInBits()+4<=8*D&&w.put(0,4);w.getLengthInBits()%8!=0;)w.putBit(!1);for(;!(w.getLengthInBits()>=8*D||(w.put(236,8),w.getLengthInBits()>=8*D));)w.put(17,8);return function($,U){for(var it=0,_t=0,X=0,ot=new Array(U.length),et=new Array(U.length),rt=0;rt<U.length;rt+=1){var Rt=U[rt].dataCount,bt=U[rt].totalCount-Rt;_t=Math.max(_t,Rt),X=Math.max(X,bt),ot[rt]=new Array(Rt);for(var at=0;at<ot[rt].length;at+=1)ot[rt][at]=255&$.getBuffer()[at+it];it+=Rt;var St=ct.getErrorCorrectPolynomial(bt),Ct=Ft(ot[rt],St.getLength()-1).mod(St);for(et[rt]=new Array(St.getLength()-1),at=0;at<et[rt].length;at+=1){var Mt=at+Ct.getLength()-et[rt].length;et[rt][at]=Mt>=0?Ct.getAt(Mt):0}}var kt=0;for(at=0;at<U.length;at+=1)kt+=U[at].totalCount;var Dt=new Array(kt),Bt=0;for(at=0;at<_t;at+=1)for(rt=0;rt<U.length;rt+=1)at<ot[rt].length&&(Dt[Bt]=ot[rt][at],Bt+=1);for(at=0;at<X;at+=1)for(rt=0;rt<U.length;rt+=1)at<et[rt].length&&(Dt[Bt]=et[rt][at],Bt+=1);return Dt}(w,C)};Q.addData=function(p,h){var c=null;switch(h=h||"Byte"){case"Numeric":c=Be(p);break;case"Alphanumeric":c=nt(p);break;case"Byte":c=mt(p);break;case"Kanji":c=vt(p);break;default:throw"mode:"+h}G.push(c),H=null},Q.isDark=function(p,h){if(p<0||k<=p||h<0||k<=h)throw p+","+h;return y[p][h]},Q.getModuleCount=function(){return k},Q.make=function(){if(E<1){for(var p=1;p<40;p++){for(var h=Ee.getRSBlocks(p,b),c=he(),C=0;C<G.length;C++){var w=G[C];c.put(w.getMode(),4),c.put(w.getLength(),ct.getLengthInBits(w.getMode(),p)),w.write(c)}var V=0;for(C=0;C<h.length;C++)V+=h[C].dataCount;if(c.getLengthInBits()<=8*V)break}E=p}Tt(!1,function(){for(var N=0,D=0,$=0;$<8;$+=1){Tt(!0,$);var U=ct.getLostPoint(Q);($==0||N>U)&&(N=U,D=$)}return D}())},Q.createTableTag=function(p,h){p=p||2;var c="";c+='<table style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: "+(h=h===void 0?4*p:h)+"px;",c+='">',c+="<tbody>";for(var C=0;C<Q.getModuleCount();C+=1){c+="<tr>";for(var w=0;w<Q.getModuleCount();w+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+p+"px;",c+=" height: "+p+"px;",c+=" background-color: ",c+=Q.isDark(C,w)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return(c+="</tbody>")+"</table>"},Q.createSvgTag=function(p,h,c,C){var w={};typeof arguments[0]=="object"&&(p=(w=arguments[0]).cellSize,h=w.margin,c=w.alt,C=w.title),p=p||2,h=h===void 0?4*p:h,(c=typeof c=="string"?{text:c}:c||{}).text=c.text||null,c.id=c.text?c.id||"qrcode-description":null,(C=typeof C=="string"?{text:C}:C||{}).text=C.text||null,C.id=C.text?C.id||"qrcode-title":null;var V,N,D,$,U=Q.getModuleCount()*p+2*h,it="";for($="l"+p+",0 0,"+p+" -"+p+",0 0,-"+p+"z ",it+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',it+=w.scalable?"":' width="'+U+'px" height="'+U+'px"',it+=' viewBox="0 0 '+U+" "+U+'" ',it+=' preserveAspectRatio="xMinYMin meet"',it+=C.text||c.text?' role="img" aria-labelledby="'+j([C.id,c.id].join(" ").trim())+'"':"",it+=">",it+=C.text?'<title id="'+j(C.id)+'">'+j(C.text)+"</title>":"",it+=c.text?'<description id="'+j(c.id)+'">'+j(c.text)+"</description>":"",it+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',it+='<path d="',N=0;N<Q.getModuleCount();N+=1)for(D=N*p+h,V=0;V<Q.getModuleCount();V+=1)Q.isDark(N,V)&&(it+="M"+(V*p+h)+","+D+$);return(it+='" stroke="transparent" fill="black"/>')+"</svg>"},Q.createDataURL=function(p,h){p=p||2,h=h===void 0?4*p:h;var c=Q.getModuleCount()*p+2*h,C=h,w=c-h;return te(c,c,function(V,N){if(C<=V&&V<w&&C<=N&&N<w){var D=Math.floor((V-C)/p),$=Math.floor((N-C)/p);return Q.isDark($,D)?0:1}return 1})},Q.createImgTag=function(p,h,c){p=p||2,h=h===void 0?4*p:h;var C=Q.getModuleCount()*p+2*h,w="";return w+="<img",w+=' src="',w+=Q.createDataURL(p,h),w+='"',w+=' width="',w+=C,w+='"',w+=' height="',w+=C,w+='"',c&&(w+=' alt="',w+=j(c),w+='"'),w+"/>"};var j=function(p){for(var h="",c=0;c<p.length;c+=1){var C=p.charAt(c);switch(C){case"<":h+="&lt;";break;case">":h+="&gt;";break;case"&":h+="&amp;";break;case'"':h+="&quot;";break;default:h+=C}}return h};return Q.createASCII=function(p,h){if((p=p||1)<2)return function(ot){ot=ot===void 0?2:ot;var et,rt,Rt,bt,at,St=1*Q.getModuleCount()+2*ot,Ct=ot,Mt=St-ot,kt={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},Dt={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},Bt="";for(et=0;et<St;et+=2){for(Rt=Math.floor((et-Ct)/1),bt=Math.floor((et+1-Ct)/1),rt=0;rt<St;rt+=1)at="\u2588",Ct<=rt&&rt<Mt&&Ct<=et&&et<Mt&&Q.isDark(Rt,Math.floor((rt-Ct)/1))&&(at=" "),Ct<=rt&&rt<Mt&&Ct<=et+1&&et+1<Mt&&Q.isDark(bt,Math.floor((rt-Ct)/1))?at+=" ":at+="\u2588",Bt+=ot<1&&et+1>=Mt?Dt[at]:kt[at];Bt+=`
`}return St%2&&ot>0?Bt.substring(0,Bt.length-St-1)+Array(St+1).join("\u2580"):Bt.substring(0,Bt.length-1)}(h);p-=1,h=h===void 0?2*p:h;var c,C,w,V,N=Q.getModuleCount()*p+2*h,D=h,$=N-h,U=Array(p+1).join("\u2588\u2588"),it=Array(p+1).join("  "),_t="",X="";for(c=0;c<N;c+=1){for(w=Math.floor((c-D)/p),X="",C=0;C<N;C+=1)V=1,D<=C&&C<$&&D<=c&&c<$&&Q.isDark(w,Math.floor((C-D)/p))&&(V=0),X+=V?U:it;for(w=0;w<p;w+=1)_t+=X+`
`}return _t.substring(0,_t.length-1)},Q.renderTo2dContext=function(p,h){h=h||2;for(var c=Q.getModuleCount(),C=0;C<c;C++)for(var w=0;w<c;w++)p.fillStyle=Q.isDark(C,w)?"black":"white",p.fillRect(C*h,w*h,h,h)},Q};I.stringToBytes=(I.stringToBytesFuncs={default:function(A){for(var P=[],E=0;E<A.length;E+=1){var b=A.charCodeAt(E);P.push(255&b)}return P}}).default,I.createStringToBytes=function(A,P){var E=function(){for(var y=ae(A),k=function(){var r=y.read();if(r==-1)throw"eof";return r},H=0,G={};;){var Q=y.read();if(Q==-1)break;var Tt=k(),M=k()<<8|k();G[String.fromCharCode(Q<<8|Tt)]=M,H+=1}if(H!=P)throw H+" != "+P;return G}(),b=63;return function(y){for(var k=[],H=0;H<y.length;H+=1){var G=y.charCodeAt(H);if(G<128)k.push(G);else{var Q=E[y.charAt(H)];typeof Q=="number"?(255&Q)==Q?k.push(Q):(k.push(Q>>>8),k.push(255&Q)):k.push(b)}}return k}};var z,W,lt,Z,tt,dt={L:1,M:0,Q:3,H:2},ct=(z=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],W=1335,lt=7973,tt=function(A){for(var P=0;A!=0;)P+=1,A>>>=1;return P},(Z={}).getBCHTypeInfo=function(A){for(var P=A<<10;tt(P)-tt(W)>=0;)P^=W<<tt(P)-tt(W);return 21522^(A<<10|P)},Z.getBCHTypeNumber=function(A){for(var P=A<<12;tt(P)-tt(lt)>=0;)P^=lt<<tt(P)-tt(lt);return A<<12|P},Z.getPatternPosition=function(A){return z[A-1]},Z.getMaskFunction=function(A){switch(A){case 0:return function(P,E){return(P+E)%2==0};case 1:return function(P,E){return P%2==0};case 2:return function(P,E){return E%3==0};case 3:return function(P,E){return(P+E)%3==0};case 4:return function(P,E){return(Math.floor(P/2)+Math.floor(E/3))%2==0};case 5:return function(P,E){return P*E%2+P*E%3==0};case 6:return function(P,E){return(P*E%2+P*E%3)%2==0};case 7:return function(P,E){return(P*E%3+(P+E)%2)%2==0};default:throw"bad maskPattern:"+A}},Z.getErrorCorrectPolynomial=function(A){for(var P=Ft([1],0),E=0;E<A;E+=1)P=P.multiply(Ft([1,It.gexp(E)],0));return P},Z.getLengthInBits=function(A,P){if(1<=P&&P<10)switch(A){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+A}else if(P<27)switch(A){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+A}else{if(!(P<41))throw"type:"+P;switch(A){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+A}}},Z.getLostPoint=function(A){for(var P=A.getModuleCount(),E=0,b=0;b<P;b+=1)for(var y=0;y<P;y+=1){for(var k=0,H=A.isDark(b,y),G=-1;G<=1;G+=1)if(!(b+G<0||P<=b+G))for(var Q=-1;Q<=1;Q+=1)y+Q<0||P<=y+Q||G==0&&Q==0||H==A.isDark(b+G,y+Q)&&(k+=1);k>5&&(E+=3+k-5)}for(b=0;b<P-1;b+=1)for(y=0;y<P-1;y+=1){var Tt=0;A.isDark(b,y)&&(Tt+=1),A.isDark(b+1,y)&&(Tt+=1),A.isDark(b,y+1)&&(Tt+=1),A.isDark(b+1,y+1)&&(Tt+=1),Tt!=0&&Tt!=4||(E+=3)}for(b=0;b<P;b+=1)for(y=0;y<P-6;y+=1)A.isDark(b,y)&&!A.isDark(b,y+1)&&A.isDark(b,y+2)&&A.isDark(b,y+3)&&A.isDark(b,y+4)&&!A.isDark(b,y+5)&&A.isDark(b,y+6)&&(E+=40);for(y=0;y<P;y+=1)for(b=0;b<P-6;b+=1)A.isDark(b,y)&&!A.isDark(b+1,y)&&A.isDark(b+2,y)&&A.isDark(b+3,y)&&A.isDark(b+4,y)&&!A.isDark(b+5,y)&&A.isDark(b+6,y)&&(E+=40);var M=0;for(y=0;y<P;y+=1)for(b=0;b<P;b+=1)A.isDark(b,y)&&(M+=1);return E+Math.abs(100*M/P/P-50)/5*10},Z),It=function(){for(var A=new Array(256),P=new Array(256),E=0;E<8;E+=1)A[E]=1<<E;for(E=8;E<256;E+=1)A[E]=A[E-4]^A[E-5]^A[E-6]^A[E-8];for(E=0;E<255;E+=1)P[A[E]]=E;return{glog:function(b){if(b<1)throw"glog("+b+")";return P[b]},gexp:function(b){for(;b<0;)b+=255;for(;b>=256;)b-=255;return A[b]}}}();function Ft(A,P){if(A.length===void 0)throw A.length+"/"+P;var E=function(){for(var y=0;y<A.length&&A[y]==0;)y+=1;for(var k=new Array(A.length-y+P),H=0;H<A.length-y;H+=1)k[H]=A[H+y];return k}(),b={getAt:function(y){return E[y]},getLength:function(){return E.length},multiply:function(y){for(var k=new Array(b.getLength()+y.getLength()-1),H=0;H<b.getLength();H+=1)for(var G=0;G<y.getLength();G+=1)k[H+G]^=It.gexp(It.glog(b.getAt(H))+It.glog(y.getAt(G)));return Ft(k,0)},mod:function(y){if(b.getLength()-y.getLength()<0)return b;for(var k=It.glog(b.getAt(0))-It.glog(y.getAt(0)),H=new Array(b.getLength()),G=0;G<b.getLength();G+=1)H[G]=b.getAt(G);for(G=0;G<y.getLength();G+=1)H[G]^=It.gexp(It.glog(y.getAt(G))+k);return Ft(H,0).mod(y)}};return b}var Ee=function(){var A=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],P=function(b,y){var k={};return k.totalCount=b,k.dataCount=y,k},E={getRSBlocks:function(b,y){var k=function(s,d){switch(d){case dt.L:return A[4*(s-1)+0];case dt.M:return A[4*(s-1)+1];case dt.Q:return A[4*(s-1)+2];case dt.H:return A[4*(s-1)+3];default:return}}(b,y);if(k===void 0)throw"bad rs block @ typeNumber:"+b+"/errorCorrectionLevel:"+y;for(var H=k.length/3,G=[],Q=0;Q<H;Q+=1)for(var Tt=k[3*Q+0],M=k[3*Q+1],r=k[3*Q+2],l=0;l<Tt;l+=1)G.push(P(M,r));return G}};return E}(),he=function(){var A=[],P=0,E={getBuffer:function(){return A},getAt:function(b){var y=Math.floor(b/8);return(A[y]>>>7-b%8&1)==1},put:function(b,y){for(var k=0;k<y;k+=1)E.putBit((b>>>y-k-1&1)==1)},getLengthInBits:function(){return P},putBit:function(b){var y=Math.floor(P/8);A.length<=y&&A.push(0),b&&(A[y]|=128>>>P%8),P+=1}};return E},Be=function(A){var P=A,E={getMode:function(){return 1},getLength:function(k){return P.length},write:function(k){for(var H=P,G=0;G+2<H.length;)k.put(b(H.substring(G,G+3)),10),G+=3;G<H.length&&(H.length-G==1?k.put(b(H.substring(G,G+1)),4):H.length-G==2&&k.put(b(H.substring(G,G+2)),7))}},b=function(k){for(var H=0,G=0;G<k.length;G+=1)H=10*H+y(k.charAt(G));return H},y=function(k){if("0"<=k&&k<="9")return k.charCodeAt(0)-48;throw"illegal char :"+k};return E},nt=function(A){var P=A,E={getMode:function(){return 2},getLength:function(y){return P.length},write:function(y){for(var k=P,H=0;H+1<k.length;)y.put(45*b(k.charAt(H))+b(k.charAt(H+1)),11),H+=2;H<k.length&&y.put(b(k.charAt(H)),6)}},b=function(y){if("0"<=y&&y<="9")return y.charCodeAt(0)-48;if("A"<=y&&y<="Z")return y.charCodeAt(0)-65+10;switch(y){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+y}};return E},mt=function(A){var P=I.stringToBytes(A);return{getMode:function(){return 4},getLength:function(E){return P.length},write:function(E){for(var b=0;b<P.length;b+=1)E.put(P[b],8)}}},vt=function(A){var P=I.stringToBytesFuncs.SJIS;if(!P)throw"sjis not supported.";(function(b,y){var k=P("\u53CB");if(k.length!=2||(k[0]<<8|k[1])!=38726)throw"sjis not supported."})();var E=P(A);return{getMode:function(){return 8},getLength:function(b){return~~(E.length/2)},write:function(b){for(var y=E,k=0;k+1<y.length;){var H=(255&y[k])<<8|255&y[k+1];if(33088<=H&&H<=40956)H-=33088;else{if(!(57408<=H&&H<=60351))throw"illegal char at "+(k+1)+"/"+H;H-=49472}H=192*(H>>>8&255)+(255&H),b.put(H,13),k+=2}if(k<y.length)throw"illegal char at "+(k+1)}}},pt=function(){var A=[],P={writeByte:function(E){A.push(255&E)},writeShort:function(E){P.writeByte(E),P.writeByte(E>>>8)},writeBytes:function(E,b,y){b=b||0,y=y||E.length;for(var k=0;k<y;k+=1)P.writeByte(E[k+b])},writeString:function(E){for(var b=0;b<E.length;b+=1)P.writeByte(E.charCodeAt(b))},toByteArray:function(){return A},toString:function(){var E="";E+="[";for(var b=0;b<A.length;b+=1)b>0&&(E+=","),E+=A[b];return E+"]"}};return P},ae=function(A){var P=A,E=0,b=0,y=0,k={read:function(){for(;y<8;){if(E>=P.length){if(y==0)return-1;throw"unexpected end of file./"+y}var G=P.charAt(E);if(E+=1,G=="=")return y=0,-1;G.match(/^\s$/)||(b=b<<6|H(G.charCodeAt(0)),y+=6)}var Q=b>>>y-8&255;return y-=8,Q}},H=function(G){if(65<=G&&G<=90)return G-65;if(97<=G&&G<=122)return G-97+26;if(48<=G&&G<=57)return G-48+52;if(G==43)return 62;if(G==47)return 63;throw"c:"+G};return k},te=function(A,P,E){for(var b=function(M,r){var l=M,s=r,d=new Array(M*r),_={setPixel:function(p,h,c){d[h*l+p]=c},write:function(p){p.writeString("GIF87a"),p.writeShort(l),p.writeShort(s),p.writeByte(128),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(255),p.writeByte(255),p.writeByte(255),p.writeString(","),p.writeShort(0),p.writeShort(0),p.writeShort(l),p.writeShort(s),p.writeByte(0);var h=g(2);p.writeByte(2);for(var c=0;h.length-c>255;)p.writeByte(255),p.writeBytes(h,c,255),c+=255;p.writeByte(h.length-c),p.writeBytes(h,c,h.length-c),p.writeByte(0),p.writeString(";")}},g=function(p){for(var h=1<<p,c=1+(1<<p),C=p+1,w=j(),V=0;V<h;V+=1)w.add(String.fromCharCode(V));w.add(String.fromCharCode(h)),w.add(String.fromCharCode(c));var N,D,$,U=pt(),it=(N=U,D=0,$=0,{write:function(et,rt){if(et>>>rt)throw"length over";for(;D+rt>=8;)N.writeByte(255&(et<<D|$)),rt-=8-D,et>>>=8-D,$=0,D=0;$|=et<<D,D+=rt},flush:function(){D>0&&N.writeByte($)}});it.write(h,C);var _t=0,X=String.fromCharCode(d[_t]);for(_t+=1;_t<d.length;){var ot=String.fromCharCode(d[_t]);_t+=1,w.contains(X+ot)?X+=ot:(it.write(w.indexOf(X),C),w.size()<4095&&(w.size()==1<<C&&(C+=1),w.add(X+ot)),X=ot)}return it.write(w.indexOf(X),C),it.write(c,C),it.flush(),U.toByteArray()},j=function(){var p={},h=0,c={add:function(C){if(c.contains(C))throw"dup key:"+C;p[C]=h,h+=1},size:function(){return h},indexOf:function(C){return p[C]},contains:function(C){return p[C]!==void 0}};return c};return _}(A,P),y=0;y<P;y+=1)for(var k=0;k<A;k+=1)b.setPixel(k,y,E(k,y));var H=pt();b.write(H);for(var G=function(){var M=0,r=0,l=0,s="",d={},_=function(j){s+=String.fromCharCode(g(63&j))},g=function(j){if(!(j<0)){if(j<26)return 65+j;if(j<52)return j-26+97;if(j<62)return j-52+48;if(j==62)return 43;if(j==63)return 47}throw"n:"+j};return d.writeByte=function(j){for(M=M<<8|255&j,r+=8,l+=1;r>=6;)_(M>>>r-6),r-=6},d.flush=function(){if(r>0&&(_(M<<6-r),M=0,r=0),l%3!=0)for(var j=3-l%3,p=0;p<j;p+=1)s+="="},d.toString=function(){return s},d}(),Q=H.toByteArray(),Tt=0;Tt<Q.length;Tt+=1)G.writeByte(Q[Tt]);return G.flush(),"data:image/gif;base64,"+G};return I}();T.stringToBytesFuncs["UTF-8"]=function(I){return function(z){for(var W=[],lt=0;lt<z.length;lt++){var Z=z.charCodeAt(lt);Z<128?W.push(Z):Z<2048?W.push(192|Z>>6,128|63&Z):Z<55296||Z>=57344?W.push(224|Z>>12,128|Z>>6&63,128|63&Z):(lt++,Z=65536+((1023&Z)<<10|1023&z.charCodeAt(lt)),W.push(240|Z>>18,128|Z>>12&63,128|Z>>6&63,128|63&Z))}return W}(I)},(m=typeof(n=function(){return T})=="function"?n.apply(o,[]):n)===void 0||(e.exports=m)},676:(e,o,n)=>{"use strict";n.d(o,{default:()=>Tt});var m=function(){return(m=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var d in r=arguments[l])Object.prototype.hasOwnProperty.call(r,d)&&(M[d]=r[d]);return M}).apply(this,arguments)},T=function(){for(var M=0,r=0,l=arguments.length;r<l;r++)M+=arguments[r].length;var s=Array(M),d=0;for(r=0;r<l;r++)for(var _=arguments[r],g=0,j=_.length;g<j;g++,d++)s[d]=_[g];return s},I=function(M){return!!M&&typeof M=="object"&&!Array.isArray(M)};function z(M){for(var r=[],l=1;l<arguments.length;l++)r[l-1]=arguments[l];if(!r.length)return M;var s=r.shift();return s!==void 0&&I(M)&&I(s)?(M=m({},M),Object.keys(s).forEach(function(d){var _=M[d],g=s[d];Array.isArray(_)&&Array.isArray(g)?M[d]=g:I(_)&&I(g)?M[d]=z(Object.assign({},_),g):M[d]=g}),z.apply(void 0,T([M],r))):M}function W(M,r){var l=document.createElement("a");l.download=r,l.href=M,document.body.appendChild(l),l.click(),document.body.removeChild(l)}function lt(M){return r=this,l=void 0,d=function(){return function(_,g){var j,p,h,c,C={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return c={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function w(V){return function(N){return function(D){if(j)throw new TypeError("Generator is already executing.");for(;C;)try{if(j=1,p&&(h=2&D[0]?p.return:D[0]?p.throw||((h=p.return)&&h.call(p),0):p.next)&&!(h=h.call(p,D[1])).done)return h;switch(p=0,h&&(D=[2&D[0],h.value]),D[0]){case 0:case 1:h=D;break;case 4:return C.label++,{value:D[1],done:!1};case 5:C.label++,p=D[1],D=[0];continue;case 7:D=C.ops.pop(),C.trys.pop();continue;default:if(!((h=(h=C.trys).length>0&&h[h.length-1])||D[0]!==6&&D[0]!==2)){C=0;continue}if(D[0]===3&&(!h||D[1]>h[0]&&D[1]<h[3])){C.label=D[1];break}if(D[0]===6&&C.label<h[1]){C.label=h[1],h=D;break}if(h&&C.label<h[2]){C.label=h[2],C.ops.push(D);break}h[2]&&C.ops.pop(),C.trys.pop();continue}D=g.call(_,C)}catch($){D=[6,$],p=0}finally{j=h=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([V,N])}}}(this,function(_){return[2,new Promise(function(g){var j=new XMLHttpRequest;j.onload=function(){var p=new FileReader;p.onloadend=function(){g(p.result)},p.readAsDataURL(j.response)},j.open("GET",M),j.responseType="blob",j.send()})]})},new((s=void 0)||(s=Promise))(function(_,g){function j(c){try{h(d.next(c))}catch(C){g(C)}}function p(c){try{h(d.throw(c))}catch(C){g(C)}}function h(c){var C;c.done?_(c.value):(C=c.value,C instanceof s?C:new s(function(w){w(C)})).then(j,p)}h((d=d.apply(r,l||[])).next())});var r,l,s,d}let Z={L:.07,M:.15,Q:.25,H:.3};var tt=function(){return(tt=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var d in r=arguments[l])Object.prototype.hasOwnProperty.call(r,d)&&(M[d]=r[d]);return M}).apply(this,arguments)};let dt=function(){function M(r){var l=r.svg,s=r.type;this._svg=l,this._type=s}return M.prototype.draw=function(r,l,s,d){var _;switch(this._type){case"dots":_=this._drawDot;break;case"classy":_=this._drawClassy;break;case"classy-rounded":_=this._drawClassyRounded;break;case"rounded":_=this._drawRounded;break;case"extra-rounded":_=this._drawExtraRounded;break;case"square":default:_=this._drawSquare}_.call(this,{x:r,y:l,size:s,getNeighbor:d})},M.prototype._rotateFigure=function(r){var l,s=r.x,d=r.y,_=r.size,g=r.rotation,j=g===void 0?0:g,p=s+_/2,h=d+_/2;(0,r.draw)(),(l=this._element)===null||l===void 0||l.setAttribute("transform","rotate("+180*j/Math.PI+","+p+","+h+")")},M.prototype._basicDot=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),l._element.setAttribute("cx",String(d+s/2)),l._element.setAttribute("cy",String(_+s/2)),l._element.setAttribute("r",String(s/2))}}))},M.prototype._basicSquare=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),l._element.setAttribute("x",String(d)),l._element.setAttribute("y",String(_)),l._element.setAttribute("width",String(s)),l._element.setAttribute("height",String(s))}}))},M.prototype._basicSideRounded=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+d+" "+_+"v "+s+"h "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, 0 "+-s)}}))},M.prototype._basicCornerRounded=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+d+" "+_+"v "+s+"h "+s+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},M.prototype._basicCornerExtraRounded=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+d+" "+_+"v "+s+"h "+s+"a "+s+" "+s+", 0, 0, 0, "+-s+" "+-s)}}))},M.prototype._basicCornersRounded=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(tt(tt({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("d","M "+d+" "+_+"v "+s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+s/2+" "+s/2+"h "+s/2+"v "+-s/2+"a "+s/2+" "+s/2+", 0, 0, 0, "+-s/2+" "+-s/2)}}))},M.prototype._drawDot=function(r){var l=r.x,s=r.y,d=r.size;this._basicDot({x:l,y:s,size:d,rotation:0})},M.prototype._drawSquare=function(r){var l=r.x,s=r.y,d=r.size;this._basicSquare({x:l,y:s,size:d,rotation:0})},M.prototype._drawRounded=function(r){var l=r.x,s=r.y,d=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,p=_?+_(0,-1):0,h=_?+_(0,1):0,c=g+j+p+h;if(c!==0)if(c>2||g&&j||p&&h)this._basicSquare({x:l,y:s,size:d,rotation:0});else{if(c===2){var C=0;return g&&p?C=Math.PI/2:p&&j?C=Math.PI:j&&h&&(C=-Math.PI/2),void this._basicCornerRounded({x:l,y:s,size:d,rotation:C})}if(c===1)return C=0,p?C=Math.PI/2:j?C=Math.PI:h&&(C=-Math.PI/2),void this._basicSideRounded({x:l,y:s,size:d,rotation:C})}else this._basicDot({x:l,y:s,size:d,rotation:0})},M.prototype._drawExtraRounded=function(r){var l=r.x,s=r.y,d=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,p=_?+_(0,-1):0,h=_?+_(0,1):0,c=g+j+p+h;if(c!==0)if(c>2||g&&j||p&&h)this._basicSquare({x:l,y:s,size:d,rotation:0});else{if(c===2){var C=0;return g&&p?C=Math.PI/2:p&&j?C=Math.PI:j&&h&&(C=-Math.PI/2),void this._basicCornerExtraRounded({x:l,y:s,size:d,rotation:C})}if(c===1)return C=0,p?C=Math.PI/2:j?C=Math.PI:h&&(C=-Math.PI/2),void this._basicSideRounded({x:l,y:s,size:d,rotation:C})}else this._basicDot({x:l,y:s,size:d,rotation:0})},M.prototype._drawClassy=function(r){var l=r.x,s=r.y,d=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,p=_?+_(0,-1):0,h=_?+_(0,1):0;g+j+p+h!==0?g||p?j||h?this._basicSquare({x:l,y:s,size:d,rotation:0}):this._basicCornerRounded({x:l,y:s,size:d,rotation:Math.PI/2}):this._basicCornerRounded({x:l,y:s,size:d,rotation:-Math.PI/2}):this._basicCornersRounded({x:l,y:s,size:d,rotation:Math.PI/2})},M.prototype._drawClassyRounded=function(r){var l=r.x,s=r.y,d=r.size,_=r.getNeighbor,g=_?+_(-1,0):0,j=_?+_(1,0):0,p=_?+_(0,-1):0,h=_?+_(0,1):0;g+j+p+h!==0?g||p?j||h?this._basicSquare({x:l,y:s,size:d,rotation:0}):this._basicCornerExtraRounded({x:l,y:s,size:d,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:l,y:s,size:d,rotation:-Math.PI/2}):this._basicCornersRounded({x:l,y:s,size:d,rotation:Math.PI/2})},M}();var ct=function(){return(ct=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var d in r=arguments[l])Object.prototype.hasOwnProperty.call(r,d)&&(M[d]=r[d]);return M}).apply(this,arguments)};let It=function(){function M(r){var l=r.svg,s=r.type;this._svg=l,this._type=s}return M.prototype.draw=function(r,l,s,d){var _;switch(this._type){case"square":_=this._drawSquare;break;case"extra-rounded":_=this._drawExtraRounded;break;case"dot":default:_=this._drawDot}_.call(this,{x:r,y:l,size:s,rotation:d})},M.prototype._rotateFigure=function(r){var l,s=r.x,d=r.y,_=r.size,g=r.rotation,j=g===void 0?0:g,p=s+_/2,h=d+_/2;(0,r.draw)(),(l=this._element)===null||l===void 0||l.setAttribute("transform","rotate("+180*j/Math.PI+","+p+","+h+")")},M.prototype._basicDot=function(r){var l=this,s=r.size,d=r.x,_=r.y,g=s/7;this._rotateFigure(ct(ct({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("clip-rule","evenodd"),l._element.setAttribute("d","M "+(d+s/2)+" "+_+"a "+s/2+" "+s/2+" 0 1 0 0.1 0zm 0 "+g+"a "+(s/2-g)+" "+(s/2-g)+" 0 1 1 -0.1 0Z")}}))},M.prototype._basicSquare=function(r){var l=this,s=r.size,d=r.x,_=r.y,g=s/7;this._rotateFigure(ct(ct({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("clip-rule","evenodd"),l._element.setAttribute("d","M "+d+" "+_+"v "+s+"h "+s+"v "+-s+"zM "+(d+g)+" "+(_+g)+"h "+(s-2*g)+"v "+(s-2*g)+"h "+(2*g-s)+"z")}}))},M.prototype._basicExtraRounded=function(r){var l=this,s=r.size,d=r.x,_=r.y,g=s/7;this._rotateFigure(ct(ct({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","path"),l._element.setAttribute("clip-rule","evenodd"),l._element.setAttribute("d","M "+d+" "+(_+2.5*g)+"v "+2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*g+" "+2.5*g+"h "+2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*g+" "+2.5*-g+"v "+-2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*-g+" "+2.5*-g+"h "+-2*g+"a "+2.5*g+" "+2.5*g+", 0, 0, 0, "+2.5*-g+" "+2.5*g+"M "+(d+2.5*g)+" "+(_+g)+"h "+2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*g+" "+1.5*g+"v "+2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*-g+" "+1.5*g+"h "+-2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*-g+" "+1.5*-g+"v "+-2*g+"a "+1.5*g+" "+1.5*g+", 0, 0, 1, "+1.5*g+" "+1.5*-g)}}))},M.prototype._drawDot=function(r){var l=r.x,s=r.y,d=r.size,_=r.rotation;this._basicDot({x:l,y:s,size:d,rotation:_})},M.prototype._drawSquare=function(r){var l=r.x,s=r.y,d=r.size,_=r.rotation;this._basicSquare({x:l,y:s,size:d,rotation:_})},M.prototype._drawExtraRounded=function(r){var l=r.x,s=r.y,d=r.size,_=r.rotation;this._basicExtraRounded({x:l,y:s,size:d,rotation:_})},M}();var Ft=function(){return(Ft=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var d in r=arguments[l])Object.prototype.hasOwnProperty.call(r,d)&&(M[d]=r[d]);return M}).apply(this,arguments)};let Ee=function(){function M(r){var l=r.svg,s=r.type;this._svg=l,this._type=s}return M.prototype.draw=function(r,l,s,d){var _;switch(this._type){case"square":_=this._drawSquare;break;case"dot":default:_=this._drawDot}_.call(this,{x:r,y:l,size:s,rotation:d})},M.prototype._rotateFigure=function(r){var l,s=r.x,d=r.y,_=r.size,g=r.rotation,j=g===void 0?0:g,p=s+_/2,h=d+_/2;(0,r.draw)(),(l=this._element)===null||l===void 0||l.setAttribute("transform","rotate("+180*j/Math.PI+","+p+","+h+")")},M.prototype._basicDot=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(Ft(Ft({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),l._element.setAttribute("cx",String(d+s/2)),l._element.setAttribute("cy",String(_+s/2)),l._element.setAttribute("r",String(s/2))}}))},M.prototype._basicSquare=function(r){var l=this,s=r.size,d=r.x,_=r.y;this._rotateFigure(Ft(Ft({},r),{draw:function(){l._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),l._element.setAttribute("x",String(d)),l._element.setAttribute("y",String(_)),l._element.setAttribute("width",String(s)),l._element.setAttribute("height",String(s))}}))},M.prototype._drawDot=function(r){var l=r.x,s=r.y,d=r.size,_=r.rotation;this._basicDot({x:l,y:s,size:d,rotation:_})},M.prototype._drawSquare=function(r){var l=r.x,s=r.y,d=r.size,_=r.rotation;this._basicSquare({x:l,y:s,size:d,rotation:_})},M}(),he="circle";var Be=function(M,r,l,s){return new(l||(l=Promise))(function(d,_){function g(h){try{p(s.next(h))}catch(c){_(c)}}function j(h){try{p(s.throw(h))}catch(c){_(c)}}function p(h){var c;h.done?d(h.value):(c=h.value,c instanceof l?c:new l(function(C){C(c)})).then(g,j)}p((s=s.apply(M,r||[])).next())})},nt=function(M,r){var l,s,d,_,g={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return _={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function j(p){return function(h){return function(c){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,s&&(d=2&c[0]?s.return:c[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,c[1])).done)return d;switch(s=0,d&&(c=[2&c[0],d.value]),c[0]){case 0:case 1:d=c;break;case 4:return g.label++,{value:c[1],done:!1};case 5:g.label++,s=c[1],c=[0];continue;case 7:c=g.ops.pop(),g.trys.pop();continue;default:if(!((d=(d=g.trys).length>0&&d[d.length-1])||c[0]!==6&&c[0]!==2)){g=0;continue}if(c[0]===3&&(!d||c[1]>d[0]&&c[1]<d[3])){g.label=c[1];break}if(c[0]===6&&g.label<d[1]){g.label=d[1],d=c;break}if(d&&g.label<d[2]){g.label=d[2],g.ops.push(c);break}d[2]&&g.ops.pop(),g.trys.pop();continue}c=r.call(M,g)}catch(C){c=[6,C],s=0}finally{l=d=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([p,h])}}},mt=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],vt=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];let pt=function(){function M(r){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(r.width)),this._element.setAttribute("height",String(r.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=r}return Object.defineProperty(M.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),M.prototype.getElement=function(){return this._element},M.prototype.drawQR=function(r){return Be(this,void 0,void 0,function(){var l,s,d,_,g,j,p,h,c,C,w=this;return nt(this,function(V){switch(V.label){case 0:return l=r.getModuleCount(),s=Math.min(this._options.width,this._options.height)-2*this._options.margin,d=this._options.shape===he?s/Math.sqrt(2):s,_=Math.floor(d/l),g={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=r,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(V.sent(),!this._image)return[2];j=this._options,p=j.imageOptions,h=j.qrOptions,c=p.imageSize*Z[h.errorCorrectionLevel],C=Math.floor(c*l*l),g=function(N){var D=N.originalHeight,$=N.originalWidth,U=N.maxHiddenDots,it=N.maxHiddenAxisDots,_t=N.dotSize,X={x:0,y:0},ot={x:0,y:0};if(D<=0||$<=0||U<=0||_t<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var et=D/$;return X.x=Math.floor(Math.sqrt(U/et)),X.x<=0&&(X.x=1),it&&it<X.x&&(X.x=it),X.x%2==0&&X.x--,ot.x=X.x*_t,X.y=1+2*Math.ceil((X.x*et-1)/2),ot.y=Math.round(ot.x*et),(X.y*X.x>U||it&&it<X.y)&&(it&&it<X.y?(X.y=it,X.y%2==0&&X.x--):X.y-=2,ot.y=X.y*_t,X.x=1+2*Math.ceil((X.y/et-1)/2),ot.x=Math.round(ot.y/et)),{height:ot.y,width:ot.x,hideYDots:X.y,hideXDots:X.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:C,maxHiddenAxisDots:l-14,dotSize:_}),V.label=2;case 2:return this.drawBackground(),this.drawDots(function(N,D){var $,U,it,_t,X,ot;return!(w._options.imageOptions.hideBackgroundDots&&N>=(l-g.hideXDots)/2&&N<(l+g.hideXDots)/2&&D>=(l-g.hideYDots)/2&&D<(l+g.hideYDots)/2||!(($=mt[N])===null||$===void 0)&&$[D]||!((U=mt[N-l+7])===null||U===void 0)&&U[D]||!((it=mt[N])===null||it===void 0)&&it[D-l+7]||!((_t=vt[N])===null||_t===void 0)&&_t[D]||!((X=vt[N-l+7])===null||X===void 0)&&X[D]||!((ot=vt[N])===null||ot===void 0)&&ot[D-l+7])}),this.drawCorners(),this._options.image?[4,this.drawImage({width:g.width,height:g.height,count:l,dotSize:_})]:[3,4];case 3:V.sent(),V.label=4;case 4:return[2]}})})},M.prototype.drawBackground=function(){var r,l,s,d=this._element,_=this._options;if(d){var g=(r=_.backgroundOptions)===null||r===void 0?void 0:r.gradient,j=(l=_.backgroundOptions)===null||l===void 0?void 0:l.color;if((g||j)&&this._createColor({options:g,color:j,additionalRotation:0,x:0,y:0,height:_.height,width:_.width,name:"background-color"}),(s=_.backgroundOptions)===null||s===void 0?void 0:s.round){var p=Math.min(_.width,_.height),h=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),h.setAttribute("x",String((_.width-p)/2)),h.setAttribute("y",String((_.height-p)/2)),h.setAttribute("width",String(p)),h.setAttribute("height",String(p)),h.setAttribute("rx",String(p/2*_.backgroundOptions.round)),this._backgroundClipPath.appendChild(h)}}},M.prototype.drawDots=function(r){var l,s,d=this;if(!this._qr)throw"QR code is not defined";var _=this._options,g=this._qr.getModuleCount();if(g>_.width||g>_.height)throw"The canvas is too small.";var j=Math.min(_.width,_.height)-2*_.margin,p=_.shape===he?j/Math.sqrt(2):j,h=Math.floor(p/g),c=Math.floor((_.width-g*h)/2),C=Math.floor((_.height-g*h)/2),w=new dt({svg:this._element,type:_.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(l=_.dotsOptions)===null||l===void 0?void 0:l.gradient,color:_.dotsOptions.color,additionalRotation:0,x:0,y:0,height:_.height,width:_.width,name:"dot-color"});for(var V=function(bt){for(var at=function(Ct){return r&&!r(bt,Ct)?"continue":!((s=N._qr)===null||s===void 0)&&s.isDark(bt,Ct)?(w.draw(c+bt*h,C+Ct*h,h,function(Mt,kt){return!(bt+Mt<0||Ct+kt<0||bt+Mt>=g||Ct+kt>=g)&&!(r&&!r(bt+Mt,Ct+kt))&&!!d._qr&&d._qr.isDark(bt+Mt,Ct+kt)}),void(w._element&&N._dotsClipPath&&N._dotsClipPath.appendChild(w._element))):"continue"},St=0;St<g;St++)at(St)},N=this,D=0;D<g;D++)V(D);if(_.shape===he){var $=Math.floor((j/h-g)/2),U=g+2*$,it=c-$*h,_t=C-$*h,X=[],ot=Math.floor(U/2);for(D=0;D<U;D++){X[D]=[];for(var et=0;et<U;et++)D>=$-1&&D<=U-$&&et>=$-1&&et<=U-$||Math.sqrt((D-ot)*(D-ot)+(et-ot)*(et-ot))>ot?X[D][et]=0:X[D][et]=this._qr.isDark(et-2*$<0?et:et>=g?et-2*$:et-$,D-2*$<0?D:D>=g?D-2*$:D-$)?1:0}var rt=function(bt){for(var at=function(Ct){if(!X[bt][Ct])return"continue";w.draw(it+bt*h,_t+Ct*h,h,function(Mt,kt){var Dt;return!!(!((Dt=X[bt+Mt])===null||Dt===void 0)&&Dt[Ct+kt])}),w._element&&Rt._dotsClipPath&&Rt._dotsClipPath.appendChild(w._element)},St=0;St<U;St++)at(St)},Rt=this;for(D=0;D<U;D++)rt(D)}},M.prototype.drawCorners=function(){var r=this;if(!this._qr)throw"QR code is not defined";var l=this._element,s=this._options;if(!l)throw"Element code is not defined";var d=this._qr.getModuleCount(),_=Math.min(s.width,s.height)-2*s.margin,g=s.shape===he?_/Math.sqrt(2):_,j=Math.floor(g/d),p=7*j,h=3*j,c=Math.floor((s.width-d*j)/2),C=Math.floor((s.height-d*j)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(w){var V,N,D,$,U,it,_t,X,ot,et,rt,Rt,bt=w[0],at=w[1],St=w[2],Ct=c+bt*j*(d-7),Mt=C+at*j*(d-7),kt=r._dotsClipPath,Dt=r._dotsClipPath;if((!((V=s.cornersSquareOptions)===null||V===void 0)&&V.gradient||!((N=s.cornersSquareOptions)===null||N===void 0)&&N.color)&&((kt=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+bt+"-"+at),r._defs.appendChild(kt),r._cornersSquareClipPath=r._cornersDotClipPath=Dt=kt,r._createColor({options:(D=s.cornersSquareOptions)===null||D===void 0?void 0:D.gradient,color:($=s.cornersSquareOptions)===null||$===void 0?void 0:$.color,additionalRotation:St,x:Ct,y:Mt,height:p,width:p,name:"corners-square-color-"+bt+"-"+at})),(U=s.cornersSquareOptions)===null||U===void 0?void 0:U.type){var Bt=new It({svg:r._element,type:s.cornersSquareOptions.type});Bt.draw(Ct,Mt,p,St),Bt._element&&kt&&kt.appendChild(Bt._element)}else for(var De=new dt({svg:r._element,type:s.dotsOptions.type}),zn=function(ue){for(var Ki=function(Oe){if(!(!((it=mt[ue])===null||it===void 0)&&it[Oe]))return"continue";De.draw(Ct+ue*j,Mt+Oe*j,j,function(Zi,to){var Fe;return!!(!((Fe=mt[ue+Zi])===null||Fe===void 0)&&Fe[Oe+to])}),De._element&&kt&&kt.appendChild(De._element)},Ae=0;Ae<mt[ue].length;Ae++)Ki(Ae)},Pe=0;Pe<mt.length;Pe++)zn(Pe);if((!((_t=s.cornersDotOptions)===null||_t===void 0)&&_t.gradient||!((X=s.cornersDotOptions)===null||X===void 0)&&X.color)&&((Dt=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+bt+"-"+at),r._defs.appendChild(Dt),r._cornersDotClipPath=Dt,r._createColor({options:(ot=s.cornersDotOptions)===null||ot===void 0?void 0:ot.gradient,color:(et=s.cornersDotOptions)===null||et===void 0?void 0:et.color,additionalRotation:St,x:Ct+2*j,y:Mt+2*j,height:h,width:h,name:"corners-dot-color-"+bt+"-"+at})),(rt=s.cornersDotOptions)===null||rt===void 0?void 0:rt.type){var Ji=new Ee({svg:r._element,type:s.cornersDotOptions.type});Ji.draw(Ct+2*j,Mt+2*j,h,St),Ji._element&&Dt&&Dt.appendChild(Ji._element)}else{De=new dt({svg:r._element,type:s.dotsOptions.type});var qn=function(ue){for(var Ki=function(Oe){if(!(!((Rt=vt[ue])===null||Rt===void 0)&&Rt[Oe]))return"continue";De.draw(Ct+ue*j,Mt+Oe*j,j,function(Zi,to){var Fe;return!!(!((Fe=vt[ue+Zi])===null||Fe===void 0)&&Fe[Oe+to])}),De._element&&Dt&&Dt.appendChild(De._element)},Ae=0;Ae<vt[ue].length;Ae++)Ki(Ae)};for(Pe=0;Pe<vt.length;Pe++)qn(Pe)}})},M.prototype.loadImage=function(){var r=this;return new Promise(function(l,s){var d=r._options,_=new Image;if(!d.image)return s("Image is not defined");typeof d.imageOptions.crossOrigin=="string"&&(_.crossOrigin=d.imageOptions.crossOrigin),r._image=_,_.onload=function(){l()},_.src=d.image})},M.prototype.drawImage=function(r){var l=r.width,s=r.height,d=r.count,_=r.dotSize;return Be(this,void 0,void 0,function(){var g,j,p,h,c,C,w,V,N;return nt(this,function(D){switch(D.label){case 0:return g=this._options,j=Math.floor((g.width-d*_)/2),p=Math.floor((g.height-d*_)/2),h=j+g.imageOptions.margin+(d*_-l)/2,c=p+g.imageOptions.margin+(d*_-s)/2,C=l-2*g.imageOptions.margin,w=s-2*g.imageOptions.margin,(V=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(h)),V.setAttribute("y",String(c)),V.setAttribute("width",C+"px"),V.setAttribute("height",w+"px"),[4,lt(g.image||"")];case 1:return N=D.sent(),V.setAttribute("href",N||""),this._element.appendChild(V),[2]}})})},M.prototype._createColor=function(r){var l=r.options,s=r.color,d=r.additionalRotation,_=r.x,g=r.y,j=r.height,p=r.width,h=r.name,c=p>j?p:j,C=document.createElementNS("http://www.w3.org/2000/svg","rect");if(C.setAttribute("x",String(_)),C.setAttribute("y",String(g)),C.setAttribute("height",String(j)),C.setAttribute("width",String(p)),C.setAttribute("clip-path","url('#clip-path-"+h+"')"),l){var w;if(l.type==="radial")(w=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",h),w.setAttribute("gradientUnits","userSpaceOnUse"),w.setAttribute("fx",String(_+p/2)),w.setAttribute("fy",String(g+j/2)),w.setAttribute("cx",String(_+p/2)),w.setAttribute("cy",String(g+j/2)),w.setAttribute("r",String(c/2));else{var V=((l.rotation||0)+d)%(2*Math.PI),N=(V+2*Math.PI)%(2*Math.PI),D=_+p/2,$=g+j/2,U=_+p/2,it=g+j/2;N>=0&&N<=.25*Math.PI||N>1.75*Math.PI&&N<=2*Math.PI?(D-=p/2,$-=j/2*Math.tan(V),U+=p/2,it+=j/2*Math.tan(V)):N>.25*Math.PI&&N<=.75*Math.PI?($-=j/2,D-=p/2/Math.tan(V),it+=j/2,U+=p/2/Math.tan(V)):N>.75*Math.PI&&N<=1.25*Math.PI?(D+=p/2,$+=j/2*Math.tan(V),U-=p/2,it-=j/2*Math.tan(V)):N>1.25*Math.PI&&N<=1.75*Math.PI&&($+=j/2,D+=p/2/Math.tan(V),it-=j/2,U-=p/2/Math.tan(V)),(w=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",h),w.setAttribute("gradientUnits","userSpaceOnUse"),w.setAttribute("x1",String(Math.round(D))),w.setAttribute("y1",String(Math.round($))),w.setAttribute("x2",String(Math.round(U))),w.setAttribute("y2",String(Math.round(it)))}l.colorStops.forEach(function(_t){var X=_t.offset,ot=_t.color,et=document.createElementNS("http://www.w3.org/2000/svg","stop");et.setAttribute("offset",100*X+"%"),et.setAttribute("stop-color",ot),w.appendChild(et)}),C.setAttribute("fill","url('#"+h+"')"),this._defs.appendChild(w)}else s&&C.setAttribute("fill",s);this._element.appendChild(C)},M}(),ae="canvas";for(var te={},A=0;A<=40;A++)te[A]=A;let P={type:ae,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:te[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var E=function(){return(E=Object.assign||function(M){for(var r,l=1,s=arguments.length;l<s;l++)for(var d in r=arguments[l])Object.prototype.hasOwnProperty.call(r,d)&&(M[d]=r[d]);return M}).apply(this,arguments)};function b(M){var r=E({},M);if(!r.colorStops||!r.colorStops.length)throw"Field 'colorStops' is required in gradient";return r.rotation?r.rotation=Number(r.rotation):r.rotation=0,r.colorStops=r.colorStops.map(function(l){return E(E({},l),{offset:Number(l.offset)})}),r}function y(M){var r=E({},M);return r.width=Number(r.width),r.height=Number(r.height),r.margin=Number(r.margin),r.imageOptions=E(E({},r.imageOptions),{hideBackgroundDots:!!r.imageOptions.hideBackgroundDots,imageSize:Number(r.imageOptions.imageSize),margin:Number(r.imageOptions.margin)}),r.margin>Math.min(r.width,r.height)&&(r.margin=Math.min(r.width,r.height)),r.dotsOptions=E({},r.dotsOptions),r.dotsOptions.gradient&&(r.dotsOptions.gradient=b(r.dotsOptions.gradient)),r.cornersSquareOptions&&(r.cornersSquareOptions=E({},r.cornersSquareOptions),r.cornersSquareOptions.gradient&&(r.cornersSquareOptions.gradient=b(r.cornersSquareOptions.gradient))),r.cornersDotOptions&&(r.cornersDotOptions=E({},r.cornersDotOptions),r.cornersDotOptions.gradient&&(r.cornersDotOptions.gradient=b(r.cornersDotOptions.gradient))),r.backgroundOptions&&(r.backgroundOptions=E({},r.backgroundOptions),r.backgroundOptions.gradient&&(r.backgroundOptions.gradient=b(r.backgroundOptions.gradient))),r}var k=n(192),H=n.n(k),G=function(M,r,l,s){return new(l||(l=Promise))(function(d,_){function g(h){try{p(s.next(h))}catch(c){_(c)}}function j(h){try{p(s.throw(h))}catch(c){_(c)}}function p(h){var c;h.done?d(h.value):(c=h.value,c instanceof l?c:new l(function(C){C(c)})).then(g,j)}p((s=s.apply(M,r||[])).next())})},Q=function(M,r){var l,s,d,_,g={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return _={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function j(p){return function(h){return function(c){if(l)throw new TypeError("Generator is already executing.");for(;g;)try{if(l=1,s&&(d=2&c[0]?s.return:c[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,c[1])).done)return d;switch(s=0,d&&(c=[2&c[0],d.value]),c[0]){case 0:case 1:d=c;break;case 4:return g.label++,{value:c[1],done:!1};case 5:g.label++,s=c[1],c=[0];continue;case 7:c=g.ops.pop(),g.trys.pop();continue;default:if(!((d=(d=g.trys).length>0&&d[d.length-1])||c[0]!==6&&c[0]!==2)){g=0;continue}if(c[0]===3&&(!d||c[1]>d[0]&&c[1]<d[3])){g.label=c[1];break}if(c[0]===6&&g.label<d[1]){g.label=d[1],d=c;break}if(d&&g.label<d[2]){g.label=d[2],g.ops.push(c);break}d[2]&&g.ops.pop(),g.trys.pop();continue}c=r.call(M,g)}catch(C){c=[6,C],s=0}finally{l=d=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([p,h])}}};let Tt=function(){function M(r){this._options=r?y(z(P,r)):P,this.update()}return M._clearContainer=function(r){r&&(r.innerHTML="")},M.prototype._setupSvg=function(){var r=this;if(this._qr){var l=new pt(this._options);this._svg=l.getElement(),this._svgDrawingPromise=l.drawQR(this._qr).then(function(){var s;r._svg&&((s=r._extension)===null||s===void 0||s.call(r,l.getElement(),r._options))})}},M.prototype._setupCanvas=function(){var r,l=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=(r=this._svgDrawingPromise)===null||r===void 0?void 0:r.then(function(){if(l._svg){var s=l._svg,d=new XMLSerializer().serializeToString(s),_="data:image/svg+xml;base64,"+btoa(d),g=new Image;return new Promise(function(j){g.onload=function(){var p,h;(h=(p=l._canvas)===null||p===void 0?void 0:p.getContext("2d"))===null||h===void 0||h.drawImage(g,0,0),j()},g.src=_})}}))},M.prototype._getElement=function(r){return r===void 0&&(r="png"),G(this,void 0,void 0,function(){return Q(this,function(l){switch(l.label){case 0:if(!this._qr)throw"QR code is empty";return r.toLowerCase()!=="svg"?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return l.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return l.sent(),[2,this._canvas]}})})},M.prototype.update=function(r){M._clearContainer(this._container),this._options=r?y(z(this._options,r)):this._options,this._options.data&&(this._qr=H()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(l){switch(!0){case/^[0-9]*$/.test(l):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(l):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===ae?this._setupCanvas():this._setupSvg(),this.append(this._container))},M.prototype.append=function(r){if(r){if(typeof r.appendChild!="function")throw"Container should be a single DOM node";this._options.type===ae?this._canvas&&r.appendChild(this._canvas):this._svg&&r.appendChild(this._svg),this._container=r}},M.prototype.applyExtension=function(r){if(!r)throw"Extension function should be defined.";this._extension=r,this.update()},M.prototype.deleteExtension=function(){this._extension=void 0,this.update()},M.prototype.getRawData=function(r){return r===void 0&&(r="png"),G(this,void 0,void 0,function(){var l,s,d;return Q(this,function(_){switch(_.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(r)];case 1:return(l=_.sent())?r.toLowerCase()==="svg"?(s=new XMLSerializer,d=s.serializeToString(l),[2,new Blob([`<?xml version="1.0" standalone="no"?>\r
`+d],{type:"image/svg+xml"})]):[2,new Promise(function(g){return l.toBlob(g,"image/"+r,1)})]:[2,null]}})})},M.prototype.download=function(r){return G(this,void 0,void 0,function(){var l,s,d,_,g;return Q(this,function(j){switch(j.label){case 0:if(!this._qr)throw"QR code is empty";return l="png",s="qr",typeof r=="string"?(l=r,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof r=="object"&&r!==null&&(r.name&&(s=r.name),r.extension&&(l=r.extension)),[4,this._getElement(l)];case 1:return(d=j.sent())?(l.toLowerCase()==="svg"?(_=new XMLSerializer,g=`<?xml version="1.0" standalone="no"?>\r
`+(g=_.serializeToString(d)),W("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(g),s+".svg")):W(d.toDataURL("image/"+l),s+"."+l),[2]):[2]}})})},M}()}},a={};function t(e){if(a[e])return a[e].exports;var o=a[e]={exports:{}};return i[e](o,o.exports,t),o.exports}return t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t(676)})().default})});var ho=(i,a)=>a.id;function $n(i,a){if(i&1){let t=K();u(0,"mat-chip-row",15),O("removed",function(){let o=B(t).$implicit,n=x();return R(n.removeTag(o))}),S(1),u(2,"button",16)(3,"mat-icon"),S(4,"cancel"),f()()()}if(i&2){let t=a.$implicit;F("removable",!0),v(),ht(" ",t.name," "),v(),Fo("aria-label","remove "+t.name)}}function Wn(i,a){if(i&1&&(u(0,"mat-option",13),S(1),f()),i&2){let t=a.$implicit;F("value",t),v(),ht(" ",t.name," ")}}function Xn(i,a){if(i&1&&(u(0,"mat-list-option",13),S(1),f()),i&2){let t=a.$implicit;F("value",t),v(),ht(" ",t.title," ")}}function Yn(i,a){if(i&1){let t=K();u(0,"mat-selection-list",17),Nt("ngModelChange",function(o){B(t);let n=x();return Lt(n.selectedCollate,o)||(n.selectedCollate=o),R(o)}),O("selectionChange",function(o){B(t);let n=x();return R(n.onCollateSelect(o))}),ft(1,Xn,2,2,"mat-list-option",13,ho),f(),u(3,"mat-paginator",18),O("page",function(o){B(t);let n=x();return R(n.handlePageEvent(o))}),f()}if(i&2){let t=x();Gt("ngModel",t.selectedCollate),F("multiple",!1),v(),gt(t.collates),v(2),F("length",t.totalCount)("pageSize",t.limit)}}function Un(i,a){i&1&&(u(0,"p"),S(1,"No collates could be found."),f())}var gn=(()=>{class i{constructor(t,e,o,n,m){this.snackBar=t,this.fb=e,this.router=o,this.collateService=n,this.dialog=m,this.collates=[],this.searchTags=[],this.selectedCollate=null,this.searchTerm="",this.limit=5,this.offset=0,this.totalCount=0,this.separatorKeysCodes=[13,188],this.form=this.fb.group({tag:[""]}),this.loading=!1}ngOnInit(){this.searchCollates(),this.filteredTags=this.form.controls.tag.valueChanges.pipe(Je(""),jo(t=>t?t.length>=2:!1),Ke(t=>this.collateService.getCollateTags(t).pipe(Ue(e=>e.results))))}searchCollates(){this.loading=!0,this.collateService.getCollates(this.limit,this.offset,this.searchTerm,this.searchTags.map(t=>t.id)).subscribe({next:t=>{this.collates=t.results,this.totalCount=t.count,this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Error loading collates","Dismiss")}})}onCollateSelect(t){this.selectedCollate=t.options[0].value,this.router.navigate([`/collate/view/${t.options[0].value.id}`]).then(e=>console.log(e))}openCreateCollateDialog(){this.dialog.open(pn).afterClosed().subscribe(e=>{e&&this.collateService.createCollate(e.title,e.greeting).subscribe(o=>{this.router.navigate([`/collate/edit/${o.id}`]).then(n=>console.log(n))})})}handlePageEvent(t){this.limit=t.pageSize,this.offset=t.pageIndex*this.limit,this.searchCollates()}addTag(t){let e=t.option.value;e&&!this.searchTags.find(o=>o.id===e.id)&&this.searchTags.push(e),this.form.controls.tag.setValue(""),this.searchCollates()}removeTag(t){let e=this.searchTags.indexOf(t);e>=0&&this.searchTags.splice(e,1),this.searchCollates()}static{this.\u0275fac=function(e){return new(e||i)(L(ne),L(Jt),L(Le),L(Se),L(He))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate"]],standalone:!0,features:[ut],decls:33,vars:8,consts:[["chipGrid",""],["auto","matAutocomplete"],[1,"collate-container"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[1,"search-box"],["mat-button","",2,"width","100%",3,"click"],["appearance","outlined",2,"width","500px"],[2,"width","100%"],["matInput","","placeholder","Search Collates",3,"ngModelChange","ngModel"],[3,"removable"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControl","matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],[3,"removed","removable"],["matChipRemove",""],[3,"ngModelChange","selectionChange","ngModel","multiple"],[3,"page","length","pageSize"]],template:function(e,o){if(e&1){let n=K();u(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),S(4,"C|nder Collates"),f(),Y(5,"br"),f()(),u(6,"div",5)(7,"div")(8,"button",6),O("click",function(){return B(n),R(o.openCreateCollateDialog())}),u(9,"h3"),S(10,"+ Create Collate From Projects"),f()()(),Y(11,"hr"),u(12,"mat-card",7)(13,"mat-card-content")(14,"mat-form-field",8)(15,"input",9),Nt("ngModelChange",function(T){return B(n),Lt(o.searchTerm,T)||(o.searchTerm=T),R(T)}),O("ngModelChange",function(){return B(n),R(o.searchCollates())}),f()(),u(16,"mat-form-field",8)(17,"mat-label"),S(18,"Search Tags"),f(),u(19,"mat-chip-grid",null,0),ft(21,$n,5,3,"mat-chip-row",10,ho),Y(23,"input",11),f(),u(24,"mat-autocomplete",12,1),O("optionSelected",function(T){return B(n),R(o.addTag(T))}),ft(26,Wn,2,2,"mat-option",13,ho),ai(28,"async"),f()(),u(29,"button",14),O("click",function(){return B(n),R(o.searchCollates())}),S(30,"Search"),f(),q(31,Yn,4,4)(32,Un,2,0,"p"),f()()()()}if(e&2){let n=ee(20),m=ee(25);v(15),Gt("ngModel",o.searchTerm),v(6),gt(o.searchTags),v(2),F("matChipInputFor",n)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("formControl",o.form.controls.tag)("matAutocomplete",m),v(3),gt(si(28,6,o.filteredTags)),v(5),J(o.collates.length>0?31:32)}},dependencies:[Kt,we,Ut,Vt,ve,Zt,ui,hi,be,qe,ze,Ot,fi,zt,gi,cn,ln,sn,Ne,vi,pi,ce,Zo,xi],styles:[".collate-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:80vh}.search-box[_ngcontent-%COMP%]{width:500px}"]})}}return i})();var _n=(()=>{class i{constructor(){this.collate=null}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-header"]],inputs:{collate:"collate"},standalone:!0,features:[ut],decls:7,vars:2,consts:[[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"]],template:function(e,o){e&1&&(u(0,"div",0)(1,"div",1)(2,"h1"),S(3),f(),Y(4,"br"),u(5,"div",2),S(6),f()()()),e&2&&(v(3),yt(o.collate==null?null:o.collate.title),v(3),yt(o.collate==null?null:o.collate.greeting))},styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return i})();function Kn(i,a){if(i&1&&(u(0,"p"),S(1),Y(2,"br"),S(3),f(),Y(4,"mat-progress-bar",8)),i&2){let t=x();v(),ht("Elapsed Time: ",t.elapsedTime," seconds"),v(2),ht(" ",t.progress," ")}}var qi=(()=>{class i{constructor(t,e,o,n,m){this.snackBar=t,this.ws=e,this.fb=o,this.web=n,this.sb=m,this.projects=[],this.loading=!1,this.searchStartTime=null,this.elapsedTime="0.00",this.progress="",this.form=this.fb.group({searchQuery:new oe("",ie.required),searchMode:new oe("gene",ie.required)}),this.searchResultID=new wt,this.ws.searchWSConnection?.subscribe(T=>{if(T&&T.type==="search_status")switch(T.status){case"complete":this.loading=!1,clearInterval(this.timerInterval);let I=this.calculateElapsedTime();this.progress="",this.showSnackBar(`Search complete in ${I} seconds`),this.searchResultID.emit(parseInt(T.id));break;case"in_progress":this.progress=`Current progress: ${T.current_progress}/${T.found_files}`;break;case"error":this.loading=!1,this.progress="Search error",this.showSnackBar("Search error");break}})}runSearch(){return Yt(this,null,function*(){if(this.form.invalid)return;this.loading=!0,this.progress="Current progress: search initiated",this.searchStartTime=new Date,this.elapsedTime="0.00",this.timerInterval=setInterval(()=>{this.elapsedTime=this.calculateElapsedTime().toFixed(2)},200);let t=[];if(this.projects.length>0){let e=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();if(e)for(let o of e)t.push(o.id)}if(this.form.value.searchQuery&&this.form.value.searchMode){let o=this.form.value.searchQuery.toUpperCase().split("OR").map(n=>`"${n.trim().replace(/'/g,"").replace(/"/g,"")}"`);this.web.createSearch(t,o.join(" OR "),this.web.searchSessionID,1e-9,1e-9,this.form.value.searchMode).subscribe({next:()=>{this.sb.open("Search queued","Dismiss",{duration:2e3})},error:()=>{this.loading=!1,clearInterval(this.timerInterval),this.showSnackBar("Search error")}})}})}showSnackBar(t){this.snackBar.open(t,"Close",{duration:3e3})}calculateElapsedTime(){return this.searchStartTime?(new Date().getTime()-this.searchStartTime.getTime())/1e3:0}static{this.\u0275fac=function(e){return new(e||i)(L(ne),L(yi),L(Jt),L(Wt),L(ne))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-search"]],inputs:{projects:"projects"},outputs:{searchResultID:"searchResultID"},standalone:!0,features:[ut],decls:22,vars:2,consts:[["appearance","outlined"],[2,"display","flex","gap","20px","align-items","center",3,"ngSubmit","formGroup"],[2,"width","500px"],["matInput","","placeholder","Search Query","formControlName","searchQuery"],["formControlName","searchMode"],["value","pi"],["value","gene"],["mat-icon-button","","color","primary","type","submit"],["mode","indeterminate"]],template:function(e,o){e&1&&(u(0,"mat-card",0)(1,"mat-card-content")(2,"form",1),O("ngSubmit",function(){return o.runSearch()}),u(3,"mat-form-field",2),Y(4,"input",3),f(),u(5,"mat-form-field")(6,"mat-label"),S(7,"Search Mode"),f(),u(8,"mat-select",4)(9,"mat-option",5),S(10,"Primary Ids"),f(),u(11,"mat-option",6),S(12,"Gene Names"),f()()(),u(13,"button",7)(14,"mat-icon"),S(15,"search"),f()()(),u(16,"p"),S(17," For multiple search terms separate them with "),u(18,"b"),S(19,"OR"),f(),S(20,". "),f(),q(21,Kn,5,2),f()()),e&2&&(v(2),F("formGroup",o.form),v(19),J(o.loading?21:-1))},dependencies:[Zt,ce,le,Ut,Vt,se,xe,ye,Kt,Ce,zt,qe,ze,Ne,an,be,dn]})}}return i})();var tr=bo(Qn());po.plotlyjs=tr;var Cn=(()=>{class i{set searchTerm(t){t?this._searchTerm=t:this._searchTerm=""}get searchTerm(){return this._searchTerm}set renameCondition(t){t?this._renameCondition=t:this._renameCondition={}}get renameCondition(){return this._renameCondition}set data(t){this._data=t,this.graphLayout.title=t?.analysis_group?.name||"",this.graphLayout.yaxis.title=this.searchTerm||"",this.conditionA=t?.condition_A||"",this.conditionB=t?.condition_B||"",this.drawGraph()}get data(){return this._data}set expanded(t){this._expanded=t,this.data&&this.drawGraph()}get expanded(){return this._expanded}set colorMap(t){t&&(this._colorMap=t,this.data&&t&&this.drawGraph())}get colorMap(){return this._colorMap}constructor(t,e){this.graph=t,this.accounts=e,this._data=null,this._renameCondition={},this._searchTerm="",this._expanded=!1,this.graphData=[],this.graphLayout={title:"",height:400,margin:{l:150,r:100,b:100,t:100},yaxis:{title:this.searchTerm,tickfont:{size:14}}},this.conditionA="",this.conditionB="",this.valueA=[],this.valueB=[],this.barSize=50,this.revision=0,this._colorMap={},this.currentColor=0,this.graph.redrawTrigger.subscribe(()=>{this.drawGraph()})}drawGraph(){let t=this.renameCondition[this.conditionA];t||(t=this.conditionA);let e=this.renameCondition[this.conditionB];e||(e=this.conditionB);let o=document.getElementsByTagName("body")[0],m=window.getComputedStyle(o).backgroundColor;this.accounts.userAccount.darkMode?(this.graphLayout.plot_bgcolor=m,this.graphLayout.paper_bgcolor=m,this.graphLayout.font={color:"white",size:14},this.graphLayout.xaxis.tickfont.color="white",this.graphLayout.yaxis.tickfont.color="white"):(this.graphLayout.plot_bgcolor="#FFFFFF",this.graphLayout.paper_bgcolor="#FFFFFF",this.graphLayout.font={color:"black",size:14});let T=0;if(this.data&&this.data.condition_A&&this.data.condition_B&&this.data.searched_data&&!this.expanded){this.conditionA=this.data.condition_A||"",this.conditionB=this.data.condition_B||"",this.valueA=this.data.searched_data.filter(dt=>dt.Condition===this.conditionA).map(dt=>dt.Value),this.valueB=this.data.searched_data.filter(dt=>dt.Condition===this.conditionB).map(dt=>dt.Value);let I=this.calculateMean(this.valueA),z=this.calculateMean(this.valueB);this.colorMap[this.conditionA]||(this.colorMap[this.conditionA]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let W={x:[t],y:[I],type:"bar",mode:"markers",name:t,error_y:{type:"data",array:[this.calculateWhisker(this.valueA)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionA]},showlegend:!1},lt=this.drawTransparentBoxPlot(this.valueA,t);this.colorMap[this.conditionB]||(this.colorMap[this.conditionB]=this.graph.defaultColorList[this.currentColor],this.currentColor++);let Z={x:[e],y:[z],type:"bar",mode:"markers",name:e,error_y:{type:"data",array:[this.calculateWhisker(this.valueB)],visible:!0},line:{color:"black"},marker:{color:this.colorMap[this.conditionB]},showlegend:!1},tt=this.drawTransparentBoxPlot(this.valueB,e);T=2,this.graphData=[W,lt,Z,tt]}else if(this.data&&(this.expanded||this.data.condition_A==""||this.data.condition_B=="")){let I=Array.from(new Set(this.data.searched_data.map(tt=>tt.Condition))),z=I.map(tt=>{let dt=this.data.searched_data.filter(ct=>ct.Condition===tt).map(ct=>ct.Value);return this.calculateMean(dt)}),W=I.map(tt=>{let dt=this.data.searched_data.filter(ct=>ct.Condition===tt).map(ct=>ct.Value);return this.calculateWhisker(dt)}),lt=I.map((tt,dt)=>{this.colorMap[tt]||(this.colorMap[tt]=this.graph.defaultColorList[this.currentColor],this.currentColor++,this.currentColor>=this.graph.defaultColorList.length&&(this.currentColor=0));let ct=this.renameCondition[tt];return ct||(ct=tt),{x:[ct],y:[z[dt]],type:"bar",mode:"markers",name:ct,error_y:{type:"data",array:[W[dt]],visible:!0},line:{color:"black"},marker:{color:this.colorMap[tt]},showlegend:!1}}),Z=I.map((tt,dt)=>{let ct=this.renameCondition[tt];ct||(ct=tt);let It=this.data.searched_data.filter(Ft=>Ft.Condition===tt).map(Ft=>Ft.Value);return this.drawTransparentBoxPlot(It,ct)});T=I.length,this.graphData=[...lt,...Z]}console.log(this.colorMap),this.graphLayout.width=this.graphLayout.margin.l+this.graphLayout.margin.r+this.barSize*T,this.revision++,console.log(this.graphData)}calculateMean(t){return t.reduce((o,n)=>o+n,0)/t.length}calculateWhisker(t){let e=this.calculateMean(t),o=t.reduce((n,m)=>n+Math.pow(m-e,2),0)/t.length;return Math.sqrt(o)}drawTransparentBoxPlot(t,e){return{x:e,y:t.filter(o=>!isNaN(o)),type:"box",boxpoints:"all",pointpos:0,jitter:.3,fillcolor:"rgba(255,255,255,0)",line:{color:"rgba(255,255,255,0)"},hoveron:"points",marker:{color:"#654949",opacity:.8},name:e,showlegend:!1}}static{this.\u0275fac=function(e){return new(e||i)(L(Vi),L(pe))}}static{this.\u0275cmp=st({type:i,selectors:[["app-bar-chart"]],inputs:{searchTerm:"searchTerm",renameCondition:"renameCondition",data:"data",expanded:"expanded",colorMap:"colorMap"},standalone:!0,features:[ut],decls:1,vars:4,consts:[[3,"data","layout","revision","updateOnLayoutChange"]],template:function(e,o){e&1&&Y(0,"plotly-plot",0),e&2&&F("data",o.graphData)("layout",o.graphLayout)("revision",o.revision)("updateOnLayoutChange",!0)},dependencies:[po,un]})}}return i})();var er=(i,a)=>a.id;function ir(i,a){if(i&1){let t=K();u(0,"div",3)(1,"mat-slide-toggle",8),O("change",function(){B(t);let o=x(2);return R(o.expanded=!o.expanded)}),S(2," Expand Bar Chart "),f(),u(3,"mat-slide-toggle",8),O("change",function(){B(t);let o=x(2);return R(o.viewDifferentialAnalysis=!o.viewDifferentialAnalysis)}),S(4," View Differential Analysis Stats "),f()()}i&2&&(v(),F("color","primary"),v(2),F("color","primary"))}function or(i,a){if(i&1&&(u(0,"div"),Y(1,"app-bar-chart",11),f()),i&2){let t=x().$implicit,e=x(3);v(),F("searchTerm",t.gene_name)("expanded",e.expanded)("renameCondition",e.renameCondition)("colorMap",e.colorMap)("data",t)}}function nr(i,a){i&1&&(u(0,"div")(1,"p"),S(2,"No data found for this search"),f()())}function rr(i,a){if(i&1&&(u(0,"div",9),q(1,or,2,5,"div")(2,nr,3,0,"div"),u(3,"button",10)(4,"mat-icon"),S(5,"drag_handle"),f()()()),i&2){let t=a.$implicit;v(),J(t.searched_data.length>0?1:2),v(2),F("matTooltip",t.analysis_group.name)}}function ar(i,a){if(i&1&&ft(0,rr,6,2,"div",9,er),i&2){let t=x(2);gt(t.searchResults)}}function sr(i,a){i&1&&(u(0,"p"),S(1,"No search results found in this project"),f())}function lr(i,a){i&1&&(u(0,"th",24),S(1," Primary ID "),f())}function cr(i,a){if(i&1&&(u(0,"td",25),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t.primary_id," ")}}function pr(i,a){i&1&&(u(0,"th",24),S(1," UniProt ID "),f())}function dr(i,a){if(i&1&&(u(0,"td",25),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t.uniprot_id," ")}}function hr(i,a){i&1&&(u(0,"th",24),S(1," Gene Names "),f())}function ur(i,a){if(i&1&&(u(0,"td",25),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t.gene_name," ")}}function mr(i,a){i&1&&(u(0,"th",24),S(1," log2FC "),f())}function fr(i,a){if(i&1&&(u(0,"td",25),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t.log2_fc," ")}}function gr(i,a){i&1&&(u(0,"th",24),S(1," -log10(p) "),f())}function _r(i,a){if(i&1&&(u(0,"td",25),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t.log10_p," ")}}function Cr(i,a){i&1&&(u(0,"th",24),S(1," Condition A "),f())}function vr(i,a){if(i&1&&S(0),i&2){let t=x().$implicit,e=x(3);ht(" ",e.renameCondition[t.condition_A]," ")}}function xr(i,a){if(i&1&&S(0),i&2){let t=x().$implicit;ht(" ",t.condition_A," ")}}function yr(i,a){if(i&1&&(u(0,"td",25),q(1,vr,1,1)(2,xr,1,1),f()),i&2){let t=x(3);v(),J(t.renameCondition?1:2)}}function wr(i,a){i&1&&(u(0,"th",24),S(1," Condition B "),f())}function br(i,a){if(i&1&&S(0),i&2){let t=x().$implicit,e=x(3);ht(" ",e.renameCondition[t.condition_B]," ")}}function Sr(i,a){if(i&1&&S(0),i&2){let t=x().$implicit;ht(" ",t.condition_B," ")}}function Mr(i,a){if(i&1&&(u(0,"td",25),q(1,br,1,1)(2,Sr,1,1),f()),i&2){let t=x(3);v(),J(t.renameCondition?1:2)}}function jr(i,a){i&1&&(u(0,"th",24),S(1," Comparison "),f())}function Tr(i,a){if(i&1&&(u(0,"td",25),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t.comparison_label," ")}}function kr(i,a){i&1&&Y(0,"tr",26)}function Er(i,a){i&1&&Y(0,"tr",27)}function Dr(i,a){if(i&1&&(u(0,"table",5),Pt(1,12),q(2,lr,2,0,"th",13)(3,cr,2,1,"td",14),At(),Pt(4,15),q(5,pr,2,0,"th",13)(6,dr,2,1,"td",14),At(),Pt(7,16),q(8,hr,2,0,"th",13)(9,ur,2,1,"td",14),At(),Pt(10,17),q(11,mr,2,0,"th",13)(12,fr,2,1,"td",14),At(),Pt(13,18),q(14,gr,2,0,"th",13)(15,_r,2,1,"td",14),At(),Pt(16,19),q(17,Cr,2,0,"th",13)(18,yr,3,1,"td",14),At(),Pt(19,20),q(20,wr,2,0,"th",13)(21,Mr,3,1,"td",14),At(),Pt(22,21),q(23,jr,2,0,"th",13)(24,Tr,2,1,"td",14),At(),q(25,kr,1,0,"tr",22)(26,Er,1,0,"tr",23),f()),i&2){let t=x(2);F("dataSource",t.searchResults),v(25),F("matHeaderRowDef",t.searchResultDisplayColumns),v(),F("matRowDefColumns",t.searchResultDisplayColumns)}}function Pr(i,a){if(i&1){let t=K();u(0,"button",28),O("click",function(){B(t);let o=x(2);return R(o.deleteProject.emit(o.project))}),u(1,"mat-icon"),S(2,"delete"),f()()}if(i&2){let t=x(2);oo("matTooltip","Delete Project ",t.project.name," from collate")}}function Ar(i,a){if(i&1&&(u(0,"a",7)(1,"mat-icon"),S(2,"link"),f()()),i&2){let t=x(2);oo("href","/#/project/",t.project.id,"",Po)}}function Or(i,a){if(i&1){let t=K();u(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"span",2),S(4),f()(),u(5,"mat-card-subtitle"),S(6),f()(),u(7,"mat-card-content"),q(8,ir,5,2,"div",3),u(9,"div",4),O("cdkDropListDropped",function(o){B(t);let n=x();return R(n.drop(o))}),q(10,ar,2,0)(11,sr,2,0,"p"),f(),q(12,Dr,27,3,"table",5),f(),u(13,"mat-card-actions"),q(14,Pr,3,2,"button",6)(15,Ar,3,2,"a",7),f()()}if(i&2){let t=x();v(4),yt(t.project.name),v(2),yt(t.project.description),v(2),J(t.searchResults.length>0?8:-1),v(2),J(t.searchResults.length>0?10:11),v(2),J(t.searchResults.length>0&&t.viewDifferentialAnalysis?12:-1),v(2),J(t.accounts.loggedIn?14:-1),v(),J(t.project?15:-1)}}var vn=(()=>{class i{set project(t){this._project=t}get project(){return this._project}set searchResults(t){this._searchResults=t,console.log(t)}get searchResults(){return this._searchResults}constructor(t){this.accounts=t,this._project=null,this.searchTerm="",this._searchResults=[],this.colorMap={},this.renameCondition={},this.deleteProject=new wt,this.searchResultsChange=new wt,this.searchResultDisplayColumns=["primary_id","uniprot_id","gene_name","condition_A","condition_B","log2_fc","log10_p","comparison_label"],this.expanded=!1,this.viewDifferentialAnalysis=!1}drop(t){let o=this._searchResults[t.previousIndex].analysis_group.id,n=this._searchResults.filter(m=>m.analysis_group.id===o);this._searchResults=this._searchResults.filter(m=>m.analysis_group.id!==o),this._searchResults.splice(t.currentIndex,0,...n),this.searchResultsChange.emit(this._searchResults)}static{this.\u0275fac=function(e){return new(e||i)(L(pe))}}static{this.\u0275cmp=st({type:i,selectors:[["app-project-card-viewer"]],inputs:{searchTerm:"searchTerm",project:"project",searchResults:"searchResults",colorMap:"colorMap",renameCondition:"renameCondition"},outputs:{deleteProject:"deleteProject",searchResultsChange:"searchResultsChange"},standalone:!0,features:[ut],decls:1,vars:1,consts:[["appearance","outlined"],["cdkDragHandle",""],[2,"color","#ba0000"],[2,"display","flex","flex-direction","column","gap","20px"],["cdkDropList","",2,"display","flex","gap","20px","flex-wrap","wrap","justify-content","center",3,"cdkDropListDropped"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["mat-icon-button","","color","primary",3,"matTooltip"],["target","_blank",3,"href"],[3,"change","color"],["cdkDrag",""],["mat-icon-button","","cdkDragHandle","",3,"matTooltip"],[3,"searchTerm","expanded","renameCondition","colorMap","data"],["matColumnDef","primary_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uniprot_id"],["matColumnDef","gene_name"],["matColumnDef","log2_fc"],["matColumnDef","log10_p"],["matColumnDef","condition_A"],["matColumnDef","condition_B"],["matColumnDef","comparison_label"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-icon-button","","color","primary",3,"click","matTooltip"]],template:function(e,o){e&1&&q(0,Or,16,7,"mat-card",0),e&2&&J(o.project?0:-1)},dependencies:[Wo,$o,Yo,ze,qe,Li,Cn,Xo,zt,Ce,Me,je,Ei,Mi,Ti,ki,Ai,Di,Oi,Pi,Si,ji,mn,mi]})}}return i})();var Fr=(i,a)=>a.id,Ir=()=>[];function Vr(i,a){if(i&1){let t=K();u(0,"app-project-card-viewer",3),O("deleteProject",function(o){B(t);let n=x(2);return R(n.deleteProject.emit(o))}),f()}if(i&2){let t=x().$implicit,e=x();F("searchTerm",e.searchTerm)("colorMap",e.projectConditionColorMap==null?null:e.projectConditionColorMap[t.id])("project",t)("searchResults",e.filteredResults[t.id]||ri(5,Ir))("renameCondition",e.renameCondition==null?null:e.renameCondition[t.id])}}function Br(i,a){if(i&1&&(u(0,"div",1),q(1,Vr,1,6,"app-project-card-viewer",2),f()),i&2){let t=a.$implicit;v(),J(t&&t.id?1:-1)}}var Qi=(()=>{class i{constructor(){this._searchTerm="",this.projects=[],this.filteredResults={},this.projectConditionColorMap={},this.renameCondition={},this.projectOrderChanged=new wt,this.deleteProject=new wt}set searchTerm(t){t?this._searchTerm=t:this._searchTerm=""}get searchTerm(){return this._searchTerm}drop(t){Ie(this.projects,t.previousIndex,t.currentIndex),this.projectOrderChanged.emit(this.projects)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-project-list"]],inputs:{searchTerm:"searchTerm",projects:"projects",filteredResults:"filteredResults",projectConditionColorMap:"projectConditionColorMap",renameCondition:"renameCondition"},outputs:{projectOrderChanged:"projectOrderChanged",deleteProject:"deleteProject"},standalone:!0,features:[ut],decls:3,vars:0,consts:[["cdkDropList","",1,"project-list",3,"cdkDropListDropped"],[2,"margin","20px"],["cdkDrag","",3,"searchTerm","colorMap","project","searchResults","renameCondition"],["cdkDrag","",3,"deleteProject","searchTerm","colorMap","project","searchResults","renameCondition"]],template:function(e,o){e&1&&(u(0,"div",0),O("cdkDropListDropped",function(m){return o.drop(m)}),ft(1,Br,2,1,"div",1,Fr),f()),e&2&&(v(),gt(o.projects))},dependencies:[je,vn,Me]})}}return i})();var xn=(i,a)=>a.id;function Rr(i,a){if(i&1){let t=K();u(0,"mat-chip",4),O("removed",function(){let o=B(t).$implicit,n=x(2);return R(n.removeTag(o))}),S(1),u(2,"mat-icon",5),S(3,"cancel"),f()()}if(i&2){let t=a.$implicit;v(),ht(" ",t.name," ")}}function Gr(i,a){if(i&1){let t=K();u(0,"mat-chip-set",2),O("cdkDropListDropped",function(o){B(t);let n=x();return R(n.drop(o))}),ft(1,Rr,4,1,"mat-chip",3,xn),f()}if(i&2){let t=x();v(),gt(t.collageTags)}}function Lr(i,a){if(i&1&&(u(0,"mat-chip"),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t.name," ")}}function Nr(i,a){if(i&1&&(u(0,"mat-chip-set"),ft(1,Lr,2,1,"mat-chip",null,xn),f()),i&2){let t=x();v(),gt(t.collageTags)}}var $i=(()=>{class i{constructor(t){this.accounts=t,this.collageTags=[],this.collageTagsChange=new wt}removeTag(t){this.collageTags=this.collageTags.filter(e=>e!==t),this.collageTagsChange.emit(this.collageTags)}drop(t){Ie(this.collageTags,t.previousIndex,t.currentIndex),this.collageTagsChange.emit(this.collageTags)}static{this.\u0275fac=function(e){return new(e||i)(L(pe))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-tags"]],inputs:{collageTags:"collageTags"},outputs:{collageTagsChange:"collageTagsChange"},standalone:!0,features:[ut],decls:4,vars:1,consts:[[2,"display","flex","justify-content","center"],["cdkDropList",""],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["cdkDrag","",3,"removed"],["matChipRemove",""]],template:function(e,o){e&1&&(u(0,"div",0),q(1,Gr,3,0,"mat-chip-set",1)(2,Nr,3,0,"mat-chip-set"),f(),Y(3,"div",0)),e&2&&(v(),J(o.accounts.loggedIn?1:2))},dependencies:[je,Ci,gi,zt,_i,Me]})}}return i})();var go=bo(yn(),1);var zr=["*"],qr=i=>{switch(i){case"default":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#202020"},backgroundOptions:{color:"#ffffff"}};case"ocean":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"dots",gradient:{type:"radial",colorStops:[{offset:0,color:"#36CDA5"},{offset:1,color:"#1582AE"},{offset:2,color:"#0277BD"}]}},backgroundOptions:{color:"#ffffff"},cornersSquareOptions:{type:"square"}};case"sunflower":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"dots",gradient:{type:"radial",colorStops:[{offset:0,color:"#BB8412"},{offset:1,color:"#4D762E"},{offset:2,color:"#2F702F"}]}},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#006B3B",type:"dot"},cornersSquareOptions:{color:"#006B3B",type:"extra-rounded"}};case"luxury":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#E29C0F"},{offset:1,color:"#913C0C"},{offset:2,color:"#732E0C"}]}},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#732E0C",type:"dot"},cornersSquareOptions:{color:"#732E0C",type:"extra-rounded"}};case"bitcoin":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#3a3a3a",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#ff9900"},cornersSquareOptions:{type:"extra-rounded"}};case"starbucks":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#3a3a3a",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#00643C",type:"dot"},cornersSquareOptions:{color:"#00643C",type:"extra-rounded"}};case"angular":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#c3002f",type:"dots"},backgroundOptions:{color:"#ffffff"}};case"facebook":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#4D72A9",type:"dots"},backgroundOptions:{color:"#ffffff"}};case"beans":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#416B2C",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#60A541",type:"dot"},cornersSquareOptions:{type:"extra-rounded"}};case"green":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#006B3B",type:"dots"},backgroundOptions:{color:"#ffffff"},cornersDotOptions:{color:"#006B3B",type:"dot"},cornersSquareOptions:{color:"#006B3B",type:"extra-rounded"}};case"sky":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2c7597",type:"rounded"},backgroundOptions:{color:"#ffffff"}};case"mosaic":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"rounded",gradient:{rotation:190,type:"linear",colorStops:[{offset:0,color:"#0277BD"},{offset:1,color:"#943A40"},{offset:2,color:"#A13535"}]}},backgroundOptions:{color:"#ffffff"}};case"coffee":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#5E4F39",type:"dots"},backgroundOptions:{color:"#FAEDE7"}};case"vintage":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2D7363",type:"extra-rounded"},backgroundOptions:{color:"#E7E5C5"},cornersDotOptions:{color:"#BE8C49"},cornersSquareOptions:{color:"#2D7363"}};case"stamp":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#2a3c16",type:"square"},backgroundOptions:{color:"#9cc66e"},cornersDotOptions:{color:"#4c692c"},cornersSquareOptions:{color:"#2a3c16"}};case"chess":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#F4EAA5",type:"dots"},backgroundOptions:{color:"#494B49"}};case"jungle":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#84b931"},{offset:1,color:"#537234"},{offset:2,color:"#537234"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#84b931"},{offset:1,color:"#537234"},{offset:2,color:"#537234"}]}}};case"arabic":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"classy-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#393939"},{offset:1,color:"#393939"},{offset:2,color:"#393939"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#393939"},{offset:1,color:"#72a28b"},{offset:2,color:"#72a28b"}]}}};case"tea":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"extra-rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#72b0b4"},{offset:1,color:"#035558"},{offset:2,color:"#035558"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#72b0b4"},{offset:1,color:"#035558"},{offset:2,color:"#035558"}]}}};case"grape":return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{type:"rounded",gradient:{type:"radial",colorStops:[{offset:0,color:"#7076ae"},{offset:1,color:"#2a3240"},{offset:2,color:"#2a3240"}]}},cornersSquareOptions:{color:"#434343",gradient:{type:"radial",colorStops:[{offset:0,color:"#7b7cb5"},{offset:1,color:"#2a3240"},{offset:2,color:"#2a3240"}]}}};default:return{data:"",qrOptions:{errorCorrectionLevel:"Q"},dotsOptions:{color:"#202020"},backgroundOptions:{color:"#ffffff"}}}};function wn(i,a){let t=new Ye;if(!i||!a)return t.error("Container or Config not available!"),t.complete(),t;let e=document.createElement("div"),o=()=>{if(i?.frameOptions)return!1;{let nt=()=>{let vt=i&&JSON.parse(JSON.stringify(i));return Object.assign({data:window.unescape(encodeURIComponent(vt?.data??""))},vt)};for(;a.firstChild;)a.removeChild(a.lastChild);return new go.default(nt()).append(a),!0}},n=i?.frameOptions?.style??"F_020",m=i?.frameOptions?.height??300,T=i?.frameOptions?.width??300,I=i?.frameOptions?.x??50,z=i?.frameOptions?.y??50,W=()=>{let nt=fetch(`https://cdn.jsdelivr.net/gh/id1945/ngx-qrcode-styling/svg/1.2.9/${n}.svg`,{method:"GET"});return new Promise((mt,vt)=>{nt.then(pt=>pt.text()).then(pt=>{pt!=="404: Not Found"&&lt(pt),mt(pt)}).catch(pt=>{console.error(pt),vt(pt)})})},lt=nt=>{let vt=new DOMParser().parseFromString(nt,"image/svg+xml");if(vt){let pt=vt.documentElement.children[n+"_svg"];if(!pt)return;let ae=pt.getElementsByClassName("frame-text"),te=pt.getElementsByClassName("frame-content"),A=pt.getElementsByClassName("frame-container");i?.frameOptions?.background&&pt.setAttribute("style",`background: ${i?.frameOptions?.background};${pt?.getAttribute("style")}`);let P=(b,y)=>{if(b)for(let k in y)["x","y","transform"].includes(k)?b.setAttribute(k,y&&y[k]):["textContent"].includes(k)?b[k]=y&&y[k]:b.style[k]=y&&y[k]},E=b=>{let k=document.createElementNS("http://www.w3.org/2000/svg","text");P(k,b),pt.appendChild(k)};i?.frameOptions?.texts&&[...i.frameOptions.texts].forEach((b,y)=>{let k=[...ae][y];k?P(k,b):E(b)}),i?.frameOptions?.containers&&[...A].forEach((b,y)=>{P(b,i?.frameOptions?.containers?.[y])}),i?.frameOptions?.contents&&[...te].forEach((b,y)=>{P(b,i?.frameOptions?.contents?.[y])}),e.appendChild(vt.documentElement)}},Z=()=>{let nt=e.querySelector(".ngx_qrcode_styling_after");if(nt&&i?.zIndex===1)return nt?.setAttribute("transform",`translate(${I},${z})`),nt;let mt=e.querySelector(".ngx_qrcode_styling_before");return mt?.setAttribute("transform",`translate(${I},${z})`),mt},tt=nt=>{nt&&i?.rotate&&nt?.childNodes?.[0]?.childNodes?.forEach(mt=>{mt.nodeName==="rect"&&(mt.style.transformOrigin="50% 50%",mt.style.transform=`rotate(${i?.rotate??0}deg)`)}),nt&&i?.scale&&nt?.childNodes?.[0]?.childNodes?.forEach(mt=>{mt.nodeName==="rect"&&(mt.style.scale=i?.scale??0)})},dt=nt=>{let mt=()=>{let pt=i&&JSON.parse(JSON.stringify(i));return pt=jt(xt({},pt),{type:"svg",data:window.unescape(encodeURIComponent(pt?.data??""))}),delete pt.frameOptions,delete pt.template,pt};for(;a?.firstChild;)a.removeChild(a.lastChild);let vt=new go.default(mt());return vt?._svgDrawingPromise?.then(()=>{vt.append(nt)}).catch(pt=>console.error(pt))},ct=()=>i?.type==="svg"?(Ee(),a.appendChild(e),!0):!1,It=()=>{let nt=document.createElement("canvas");return nt.height=m,nt.width=T,a.appendChild(nt),nt},Ft=nt=>{let mt="data:image/svg+xml;base64,",vt=nt&&new XMLSerializer().serializeToString(nt);return mt+=vt&&btoa(unescape(encodeURIComponent(vt)))},Ee=()=>{let nt=e.querySelector(`#${n}_svg`);return nt&&nt.setAttribute("height",`${m}px`),nt&&nt.setAttribute("width",`${T}px`),nt},he=nt=>{let mt=nt.split(";base64,"),vt=mt[0].split(":")[1],pt=window.atob(mt[1]),ae=new Uint8Array(pt.length);for(let te=0;te<pt.length;++te)ae[te]=pt.charCodeAt(te);return new Blob([ae],{type:vt})},Be=()=>{let nt=new Image,mt=It().getContext("2d");nt.onload=function(){mt&&mt.drawImage(nt,0,0)};let vt=he(Ft(Ee())),pt=URL.createObjectURL(vt);nt.src=pt};return function(){return Yt(this,null,function*(){if(o()){t.next({config:i,container:a}),t.complete();return}else{yield W();let nt=Z();yield dt(nt),tt(nt),ct()?(t.next({config:i,container:a}),t.complete()):(Be(),t.next({config:i,container:a}),t.complete())}})}(),t}var fo=i=>{let a=i&&JSON.parse(JSON.stringify(i));return i?.template?xt(xt({},qr(i.template.toLocaleLowerCase())),a):a},Hr=(i,a)=>Yt(void 0,null,function*(){let t=i&&JSON.parse(JSON.stringify(i)),e=xt(xt({},t),a),o=["frameOptions","qrOptions","imageOptions","dotsOptions","cornersSquareOptions","cornersDotOptions","backgroundOptions"];try{for(var n=So(o),m,T,I;m=!(T=yield n.next()).done;m=!1){let z=T.value;if(z in a){let W={[z]:xt(xt({},t[z]),a[z])};e=xt(xt({},e),W)}}}catch{I=[T]}finally{try{m&&(T=n.return)&&(yield T.call(n))}finally{if(I)throw I[0]}}return e}),bn=(()=>{class i{create(t,e){return wn(fo(t),e)}update(t,e,o){let n=new Ye;return function(){return Yt(this,null,function*(){let m=yield Hr(fo(t),fo(e));wn(m,o).subscribe(T=>{n.next(T),n.complete()})})}(),n}download(t,e="",o=0){let n=new Ye,m=z=>{e||(e=`ngx_qrcode_styling_${Date.now()}.${z}`)},T=z=>{let W=document.createElement("a");W.download=e,W.href=z,W.click(),W.remove()},I=z=>{z?(T(z),n.next({fileName:e,container:t,url:z}),n.complete()):(n.error("Container not found!"),n.complete())};return setTimeout(()=>{let z=t?.querySelector("canvas");if(z){m("png");let W=e?e?.split(".")?.slice(-1)?.toString():"png";z.toBlob(lt=>I(URL.createObjectURL(lt)),"image/"+W)}else{let W=t?.querySelector("svg");if(W){m("svg");let lt=W.outerHTML,Z=new Blob([lt],{type:"image/svg+xml;charset=utf-8"}),tt=URL.createObjectURL(Z);I(tt)}else I("")}},o),n}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=$e({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Sn=(()=>{class i{constructor(t,e){this.canvas=t,this.service=e,this.template="default",this.scale=0,this.rotate=0,this.zIndex=2}ngOnInit(){this.canvas&&(this.template&&(this.config=jt(xt({},this.config),{template:this.template})),this.type&&(this.config=jt(xt({},this.config),{type:this.type})),this.shape&&(this.config=jt(xt({},this.config),{shape:this.shape})),this.width&&(this.config=jt(xt({},this.config),{width:this.width})),this.height&&(this.config=jt(xt({},this.config),{height:this.height})),this.margin&&(this.config=jt(xt({},this.config),{margin:this.margin})),this.data&&(this.config=jt(xt({},this.config),{data:this.data})),this.image&&(this.config=jt(xt({},this.config),{image:this.image})),this.scale&&(this.config=jt(xt({},this.config),{scale:this.scale})),this.rotate&&(this.config=jt(xt({},this.config),{rotate:this.rotate})),this.zIndex&&(this.config=jt(xt({},this.config),{zIndex:this.zIndex})),this.frameOptions&&(this.config=jt(xt({},this.config),{frameOptions:this.frameOptions})),this.qrOptions&&(this.config=jt(xt({},this.config),{qrOptions:this.qrOptions})),this.imageOptions&&(this.config=jt(xt({},this.config),{imageOptions:this.imageOptions})),this.dotsOptions&&(this.config=jt(xt({},this.config),{dotsOptions:this.dotsOptions})),this.cornersSquareOptions&&(this.config=jt(xt({},this.config),{cornersSquareOptions:this.cornersSquareOptions})),this.cornersDotOptions&&(this.config=jt(xt({},this.config),{cornersDotOptions:this.cornersDotOptions})),this.backgroundOptions&&(this.config=jt(xt({},this.config),{backgroundOptions:this.backgroundOptions})),this.create(this.config))}create(t){return this.service.create(t,this.canvas.nativeElement)}update(t,e){return this.service.update(t,e,this.canvas.nativeElement)}download(t,e=0){return this.service.download(this.canvas.nativeElement,t,e)}static{this.\u0275fac=function(e){return new(e||i)(L(We),L(bn))}}static{this.\u0275cmp=st({type:i,selectors:[["ngx-qrcode-styling"]],inputs:{config:"config",template:"template",type:"type",shape:"shape",width:"width",height:"height",margin:"margin",data:"data",image:"image",scale:"scale",rotate:"rotate",zIndex:"zIndex",frameOptions:"frameOptions",qrOptions:"qrOptions",imageOptions:"imageOptions",dotsOptions:"dotsOptions",cornersSquareOptions:"cornersSquareOptions",cornersDotOptions:"cornersDotOptions",backgroundOptions:"backgroundOptions"},ngContentSelectors:zr,decls:1,vars:0,template:function(e,o){e&1&&(Vo(),Bo(0))},encapsulation:2})}}return i})(),Mn=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=Ge({type:i})}static{this.\u0275inj=Re({providers:[bn]})}}return i})();function $r(i,a){if(i&1&&(u(0,"div",2),Y(1,"ngx-qrcode-styling",5),f()),i&2){let t=x();v(),F("config",t.config)}}var jn=(()=>{class i{set url(t){this.config.data=t,this._url=t}constructor(t){this.dialogRef=t,this._url="",this.config={width:250,height:250,data:this.url,margin:5,dotsOptions:{color:"#780101",type:"dots"},backgroundOptions:{color:"#ffffff"},imageOptions:{crossOrigin:"anonymous",margin:0}}}close(){this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||i)(L(qt))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-qr-code-dialog"]],inputs:{url:"url"},standalone:!0,features:[ut],decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","justify-content","center","align-items","center"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"config"]],template:function(e,o){e&1&&(u(0,"h1",0),S(1,"Collate QR Code"),f(),u(2,"div",1),q(3,$r,2,1,"div",2),f(),u(4,"div",3)(5,"button",4),O("click",function(){return o.close()}),S(6,"Close"),f()()),e&2&&(v(3),J(o.config.data&&o.config.data!==""?3:-1))},dependencies:[Ht,Qt,Mn,Sn,$t,Ot]})}}return i})();var Tn=(i,a)=>a.id,Wr=()=>({standalone:!0});function Xr(i,a){if(i&1){let t=K();u(0,"mat-checkbox",6),Nt("ngModelChange",function(o){let n=B(t).$implicit,m=x(2).$implicit,T=x();return Lt(T.projectAnalysisGroupVisibilityMap[m.id][n.id],o)||(T.projectAnalysisGroupVisibilityMap[m.id][n.id]=o),R(o)}),S(1),f()}if(i&2){let t=a.$implicit,e=x(2).$implicit,o=x();Gt("ngModel",o.projectAnalysisGroupVisibilityMap[e.id][t.id]),F("ngModelOptions",ri(3,Wr)),v(),ht(" ",t.name," ")}}function Yr(i,a){if(i&1&&ft(0,Xr,2,4,"mat-checkbox",5,Tn),i&2){let t=x().$implicit,e=x();gt(e.projectAnalysisGroupMap[t.id])}}function Ur(i,a){if(i&1&&(u(0,"h2"),S(1),f(),q(2,Yr,2,0)),i&2){let t=a.$implicit,e=x();v(),yt(t.name),v(),J(e.projectAnalysisGroupMap[t.id]?2:-1)}}var Xi=(()=>{class i{set projects(t){this._projects=t}get projects(){return this._projects}set projectAnalysisGroupMap(t){this._projectAnalysisGroupMap=t}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}set projectAnalysisGroupVisibilityMap(t){this._projectAnalysisGroupVisibilityMap={};for(let e in t){this._projectAnalysisGroupVisibilityMap[e]={};for(let o in t[e])this._projectAnalysisGroupVisibilityMap[e][o]=t[e][o]}}get projectAnalysisGroupVisibilityMap(){return this._projectAnalysisGroupVisibilityMap}constructor(t){this.dialog=t,this._projects=[],this._projectAnalysisGroupMap={},this._projectAnalysisGroupVisibilityMap={}}close(){this.dialog.close()}save(){this.dialog.close(this.projectAnalysisGroupVisibilityMap)}static{this.\u0275fac=function(e){return new(e||i)(L(qt))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-project-analysis-group-visibility-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap",projectAnalysisGroupVisibilityMap:"projectAnalysisGroupVisibilityMap"},standalone:!0,features:[ut],decls:11,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"display","flex","flex-direction","column","gap","20px"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"ngModel","ngModelOptions"],[3,"ngModelChange","ngModel","ngModelOptions"]],template:function(e,o){e&1&&(u(0,"h1",0),S(1,"Analysis Group Visibility"),f(),u(2,"div",1)(3,"form",2),ft(4,Ur,3,2,null,null,Tn),f()(),u(6,"div",3)(7,"button",4),O("click",function(){return o.close()}),S(8,"Cancel"),f(),u(9,"button",4),O("click",function(){return o.save()}),S(10,"Submit"),f()()),e&2&&(v(4),gt(o.projects))},dependencies:[Ht,Qt,we,le,Vt,se,ve,Ko,Ni,$t,Ot]})}}return i})();function Jr(i,a){i&1&&(u(0,"button",11),S(1,"No previous searches"),f())}function Kr(i,a){if(i&1){let t=K();u(0,"button",13),O("click",function(){B(t);let o=x().$implicit,n=x(3);return R(n.restoreSearches(o.searchQuery,o.searchID))}),S(1),f()}if(i&2){let t=x().$implicit;v(),Go("",t.searchID,". ",t.termFounds.join(","),"")}}function Zr(i,a){if(i&1&&q(0,Kr,2,2,"button",12),i&2){let t=a.$implicit,e=x(3);J(t.collate===e.collate.id?0:-1)}}function ta(i,a){if(i&1&&ft(0,Zr,1,1,null,null,me),i&2){let t=x(2);gt(t.pastSearches)}}function ea(i,a){if(i&1&&(u(0,"button",10)(1,"mat-icon"),S(2,"history"),f()(),u(3,"mat-menu",null,0),q(5,Jr,2,0,"button",11)(6,ta,2,0),f()),i&2){let t=ee(4),e=x();F("matMenuTriggerFor",t),v(5),J(e.pastSearches.length===0?5:6)}}function ia(i,a){if(i&1){let t=K();u(0,"button",14),O("click",function(){B(t);let o=x();return R(o.navigateToEdit())}),u(1,"mat-icon"),S(2,"edit"),f()()}}function oa(i,a){if(i&1&&Y(0,"app-collate-header",7),i&2){let t=x();F("collate",t.collate)}}function na(i,a){if(i&1&&(u(0,"div",15),Y(1,"app-collate-tags",16),f()),i&2){let t=x(2);v(),F("collageTags",t.collate.tags)}}function ra(i,a){if(i&1&&q(0,na,2,1,"div",15),i&2){let t=x();J(t.collate.settings.showTags?0:-1)}}function aa(i,a){if(i&1){let t=K();S(0),u(1,"button",21),O("click",function(){B(t);let o=x().$implicit,n=x(2);return R(n.exportData(o))}),u(2,"mat-icon"),S(3,"download"),f()()}if(i&2){let t=x().$implicit,e=x(2);ht(" ",t," "),v(),F("disabled",e.waitingForDownload)}}function sa(i,a){i&1&&(u(0,"mat-tab"),q(1,aa,4,2,"ng-template",20),f())}function la(i,a){if(i&1&&Y(0,"app-collate-project-list",19),i&2){let t=x(2);F("searchTerm",t.selectedSearchTerm)("renameCondition",t.collate.settings.renameSampleCondition)("projects",t.projects)("filteredResults",t.filteredResults)}}function ca(i,a){if(i&1){let t=K();u(0,"div",17)(1,"mat-tab-group",18),O("selectedTabChange",function(){B(t);let o=x();return R(o.filterDataBySearchTerm())}),Nt("selectedIndexChange",function(o){B(t);let n=x();return Lt(n.selectedIndex,o)||(n.selectedIndex=o),R(o)}),ft(2,sa,2,0,"mat-tab",null,me),f()(),q(4,la,1,4,"app-collate-project-list",19)}if(i&2){let t=x();v(),Gt("selectedIndex",t.selectedIndex),F("mat-stretch-tabs",!1),v(),gt(t.searchTerms),v(2),J(t.collate?4:-1)}}var _o=(()=>{class i{set collateId(t){t&&this.collateService.getCollate(t).subscribe(e=>{if(this.collate=e,this.title.setTitle(`${e.title} - C|nder`),this.projects=e.projects,e.settings||(e.settings={projectOrder:[],analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},showTags:!1}),e.settings.projectOrder&&(this.projects=e.settings.projectOrder.map(o=>e.projects.find(n=>n.id===o))),!this.collate?.settings.projectAnalysisGroupVisibility){this.collate.settings.projectAnalysisGroupVisibility={};for(let o of this.projects)this.collate.settings.projectAnalysisGroupVisibility[o.id]={}}if(!this.collate?.settings.renameSampleCondition){this.collate.settings.renameSampleCondition={};for(let o of this.projects)this.collate.settings.renameSampleCondition[o.id]={},this.web.getProjectUniqueConditions(o.id).subscribe(n=>{for(let m of n)this.collate.settings.renameSampleCondition[o.id][m.Condition]=m.Condition;console.log(this.collate.settings.renameSampleCondition)})}console.log(this.projects)})}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(t){this._selectedSearchTerm=t}constructor(t,e,o,n,m,T,I,z){this.title=t,this.ws=e,this.sb=o,this.dialog=n,this.collateService=m,this.web=T,this.accounts=I,this.router=z,this.collate=null,this.projects=[],this.filteredResults={},this.searchTerms=[],this.selectedIndex=0,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this._selectedSearchTerm="",this.pastSearches=[],this.waitingForDownload=!1;let W=localStorage.getItem("cinderPastSearches");W&&(this.pastSearches=JSON.parse(W)),this.ws.searchWSConnection?.subscribe(lt=>{if(lt&&lt.type==="export_status"&&this.web.cinderInstanceID===lt.instance_id&&this.waitingForDownload)switch(lt.status){case"error":this.waitingForDownload=!1;break;case"started":this.sb.open("Export started","Dismiss",{duration:2e3});break;case"in_progress":break;case"complete":this.waitingForDownload=!1,this.sb.open("Export complete","Dismiss",{duration:2e3});let Z=`${this.web.baseURL}/api/search/download_temp_file/?token=${lt.file}`;window.open(Z,"_blank");break}})}associateAnalysisGroupsWithProjects(){return Yt(this,null,function*(){let t=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},t&&t.forEach(e=>{let o=e.project;this.projectAnalysisGroups[o]||(this.projectAnalysisGroups[o]=[]),this.projectAnalysisGroups[o].push(e),this.analysisGroupProjects[e.id]=this.projects.find(n=>n.id===o)})})}distributeSearchResults(t){return Yt(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(t.map(e=>e.search_term))),t.forEach(e=>{let o=e.analysis_group.id,n=this.analysisGroupProjects[o];n&&(this.searchResults[n.id]||(this.searchResults[n.id]=[]),this.searchResults[n.id].push(e))}),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let t={};return Object.keys(this.searchResults).forEach(e=>{t[e]=this.searchResults[e].filter(o=>o.search_term===this.selectedSearchTerm),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(o=>{let n=parseInt(o),m=this.collate?.settings.analysisGroupOrderMap[n];if(!t[n]||!m)return;let T=t[n].filter(I=>!m.includes(I.analysis_group.id));if(t[n]=t[n].filter(I=>m.includes(I.analysis_group.id)),t[n]=t[n].sort((I,z)=>m.indexOf(I.analysis_group.id)-m.indexOf(z.analysis_group.id)),t[n].concat(T),this.collate?.settings?.projectAnalysisGroupVisibility){let I=this.collate?.settings.projectAnalysisGroupVisibility[n];t[n]=t[n].filter(z=>!I||!(z.analysis_group.id in I)?!0:I[z.analysis_group.id])}})}),t}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults()}getSearchFromID(t){this.web.getSearchSession(t).subscribe(e=>{this.searchSession=e}),this.web.getSearchResults(t,99999).subscribe(e=>{if(!this.collate)return;console.log(e.results);let o=Array.from(new Set(e.results.map(n=>n.search_term)));this.pastSearches.push({searchQuery:e,termFounds:o,collate:this.collate.id,searchID:t}),this.pastSearches=this.pastSearches.slice(-20),localStorage.setItem("cinderPastSearches",JSON.stringify(this.pastSearches)),this.distributeSearchResults(e.results).then()})}restoreSearches(t,e){this.web.getSearchSession(e).subscribe(o=>{this.searchSession=o}),this.distributeSearchResults(t.results).then()}navigateToEdit(){this.collate&&this.router.navigate([`/collate/edit/${this.collate.id}`])}openQRCodeDialog(){let t=window.location.href,e=this.dialog.open(jn);e.componentInstance.url=t}navigateToHome(){this.router.navigate(["/"])}exportData(t){this.web.exportSearchData(this.searchSession.id,t,1e-8,1e-8,this.web.searchSessionID).subscribe(e=>{this.waitingForDownload=!0})}openVisibilityDialog(){let t=this.dialog.open(Xi);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(e=>{let o={};e.forEach(m=>{o[m.project]||(o[m.project]=[]),o[m.project].push(m)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(m=>{let T=parseInt(m),I=this.collate?.settings.analysisGroupOrderMap[T];if(!I||!o[T])return;let z=o[T].filter(W=>!I.includes(W.id));o[T]=o[T].filter(W=>I.includes(W.id)),o[T]=o[T].sort((W,lt)=>I.indexOf(W.id)-I.indexOf(lt.id)),o[T]=o[T].concat(z)}),t.componentInstance.projectAnalysisGroupMap=o,t.componentInstance.projects=this.projects;let n={};this.collate?.settings?.projectAnalysisGroupVisibility&&(n=this.collate.settings.projectAnalysisGroupVisibility);for(let m in o){n[m]||(n[m]={});for(let T of o[m])T.id in n[m]||(n[m][T.id]=!0)}t.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},n)}),t.afterClosed().subscribe(e=>{this.collate&&e&&(this.collate.settings.projectAnalysisGroupVisibility=e,this.filteredResults=this.getFilteredSearchResults())})}static{this.\u0275fac=function(e){return new(e||i)(L(Ho),L(yi),L(ne),L(He),L(Se),L(Wt),L(pe),L(Le))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-view"]],inputs:{collateId:"collateId"},standalone:!0,features:[ut],decls:18,vars:9,consts:[["previousSearch","matMenu"],["href","/#/home"],[3,"width","height","ngSrc"],[1,"spacer"],["mat-icon-button","","matTooltip","Open QR code dialog",3,"click"],["mat-icon-button","","matTooltip","Change analysis group visibility",3,"click"],["mat-icon-button","","matTooltip","Edit collate"],[3,"collate"],[2,"display","flex","justify-content","center"],[3,"searchResultID","projects"],["mat-icon-button","","matTooltip","View previous searches",3,"matMenuTriggerFor"],["mat-menu-item","","disabled",""],["mat-menu-item",""],["mat-menu-item","",3,"click"],["mat-icon-button","","matTooltip","Edit collate",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTags"],[2,"padding","20px"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"searchTerm","renameCondition","projects","filteredResults"],["mat-tab-label",""],["mat-icon-button","","matTooltip","Export data",3,"click","disabled"]],template:function(e,o){e&1&&(u(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"a",1),Y(3,"img",2),f(),Y(4,"span",3),q(5,ea,7,2),u(6,"button",4),O("click",function(){return o.openQRCodeDialog()}),u(7,"mat-icon"),S(8,"qr_code"),f()(),u(9,"button",5),O("click",function(){return o.openVisibilityDialog()}),u(10,"mat-icon"),S(11,"visibility"),f()(),q(12,ia,3,0,"button",6),f()(),q(13,oa,1,1,"app-collate-header",7)(14,ra,1,1),u(15,"div",8)(16,"app-collate-search",9),O("searchResultID",function(m){return o.getSearchFromID(m)}),f()(),q(17,ca,5,3)),e&2&&(v(3),F("width",25)("height",25)("ngSrc","/assets/logo.png"),v(2),J(o.collate?5:-1),v(7),J(o.accounts.loggedIn?12:-1),v(),J(o.collate?13:-1),v(),J(o.collate&&o.collate.settings?14:-1),v(2),F("projects",o.projects),v(),J(o.searchTerms.length>0?17:-1))},dependencies:[_n,qi,Fi,Ii,Qi,zt,Ce,wi,bi,$i,qo,Ri,Bi,Gi,hn,mi]})}}return i})();var kn=(i,a)=>a.id;function pa(i,a){if(i&1){let t=K();u(0,"mat-chip",2),O("click",function(){let o=B(t).$implicit,n=x(2);return R(n.removeProject(o))}),S(1),f()}if(i&2){let t=a.$implicit;v(),ht(" ",t.name," ")}}function da(i,a){if(i&1&&(u(0,"div"),S(1),u(2,"mat-chip-set"),ft(3,pa,2,1,"mat-chip",null,kn),f()()),i&2){let t=x();v(),ht(" Selected Projects: ",t.selectedMultipleProjects.length," "),v(2),gt(t.selectedMultipleProjects)}}function ha(i,a){if(i&1&&(u(0,"mat-list-option",4),S(1),f()),i&2){let t=a.$implicit;F("value",t),v(),yt(t.name)}}function ua(i,a){if(i&1){let t=K();u(0,"div")(1,"mat-selection-list",3),ft(2,ha,2,2,"mat-list-option",4,kn),f(),u(4,"mat-paginator",5),O("page",function(o){B(t);let n=x(2);return R(n.handleProjectPageEvent(o))}),f()()}if(i&2){let t=x(2);v(),F("multiple",!1),v(),gt(t.projectQuery.results),v(2),F("pageSize",t.projectPageSize)("length",t.projectQuery.count)("pageIndex",t.projectPageIndex)}}function ma(i,a){i&1&&(u(0,"p"),S(1,"No projects found."),f())}function fa(i,a){if(i&1&&q(0,ua,5,4,"div")(1,ma,2,0,"p"),i&2){let t=x();J(t.projectQuery.count>0?0:1)}}var En=(()=>{class i{constructor(t,e){this.fb=t,this.web=e,this.multipleSelection=!1,this.selectedProjects=new wt,this.formProjectSearch=this.fb.group({searchTerm:new oe("",ie.required),selectedProjects:new oe([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(o=>{o&&this.fetchProjects(o,this.projectPageSize,0)}),this.formProjectSearch.controls.selectedProjects.valueChanges.subscribe(o=>{if(o){for(let n of o)this.selectedMultipleProjects.includes(n)||this.selectedMultipleProjects.push(n);this.selectedProjects.emit(this.selectedMultipleProjects)}})}fetchProjects(t,e,o){let n=o*e;this.web.getProjects(void 0,e,n,t,void 0).subscribe(m=>{this.projectQuery=m})}handleProjectPageEvent(t){this.projectPageIndex=t.pageIndex,this.fetchProjects(this.formProjectSearch.controls.searchTerm.value||"",t.pageSize,t.pageIndex)}removeProject(t){this.selectedMultipleProjects=this.selectedMultipleProjects.filter(e=>e!==t),this.selectedProjects.emit(this.selectedMultipleProjects)}static{this.\u0275fac=function(e){return new(e||i)(L(Jt),L(Wt))}}static{this.\u0275cmp=st({type:i,selectors:[["app-project-search"]],inputs:{multipleSelection:"multipleSelection"},outputs:{selectedProjects:"selectedProjects"},standalone:!0,features:[ut],decls:7,vars:3,consts:[[2,"display","flex","flex-direction","column","gap","10px",3,"formGroup"],["matInput","","formControlName","searchTerm","placeholder","Search Project Name","type","search"],[3,"click"],["formControlName","selectedProjects",3,"multiple"],[3,"value"],[3,"page","pageSize","length","pageIndex"]],template:function(e,o){e&1&&(u(0,"form",0)(1,"mat-form-field"),Y(2,"input",1),u(3,"mat-label"),S(4,"Search For Specific Projects"),f()(),q(5,da,5,1,"div")(6,fa,2,1),f()),e&2&&(F("formGroup",o.formProjectSearch),v(5),J(o.selectedMultipleProjects.length>0?5:-1),v(),J(o.projectQuery?6:-1))},dependencies:[ce,le,Ut,Vt,se,xe,ye,Kt,Zt,be,Ci,_i,ui,hi,fi]})}}return i})();var Dn=(()=>{class i{constructor(t,e,o){this.dialogRef=t,this.fb=e,this.web=o,this.formProjectSearch=this.fb.group({searchTerm:new oe("",ie.required),selectedProjects:new oe([])}),this.projectPageSize=5,this.projectPageIndex=0,this.projectQuery=void 0,this.selectedMultipleProjects=[],this.multipleSelection=!0,this.web.getProjects(void 0,this.projectPageSize,0,void 0).subscribe(n=>{this.projectQuery=n}),this.formProjectSearch.controls.searchTerm.valueChanges.subscribe(n=>{n&&this.web.getProjects(void 0,this.projectPageSize,0,n).subscribe(m=>{this.projectQuery=m})})}handleSelectedProjects(t){this.selectedMultipleProjects=t}close(){this.dialogRef.close()}save(){this.dialogRef.close(this.selectedMultipleProjects)}static{this.\u0275fac=function(e){return new(e||i)(L(qt),L(Jt),L(Wt))}}static{this.\u0275cmp=st({type:i,selectors:[["app-project-add-dialog"]],standalone:!0,features:[ut],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"selectedProjects"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(e,o){e&1&&(u(0,"h2",0),S(1,"Project Add"),f(),u(2,"div",1)(3,"app-project-search",2),O("selectedProjects",function(m){return o.handleSelectedProjects(m)}),f(),u(4,"small"),S(5),f()(),u(6,"div",3)(7,"button",4),O("click",function(){return o.save()}),S(8,"Submit"),f(),u(9,"button",4),O("click",function(){return o.close()}),S(10,"Close"),f()()),e&2&&(v(5),ht("Selected ",o.selectedMultipleProjects.length," Projects."))},dependencies:[En,Ht,Qt,$t,Ot]})}}return i})();var Pn=(i,a)=>a.id;function ga(i,a){if(i&1&&(u(0,"mat-list-item",5)(1,"mat-icon",7),S(2,"notes"),f(),u(3,"div",8),S(4),f(),Y(5,"div",9),f()),i&2){let t=a.$implicit;v(4),yt(t.name)}}function _a(i,a){if(i&1){let t=K();u(0,"div",5)(1,"div",6)(2,"b"),S(3),f()(),u(4,"div",4),O("cdkDropListDropped",function(o){let n=B(t).$implicit,m=x(2);return R(m.drop(o,n.id))}),ft(5,ga,6,1,"mat-list-item",5,Pn),f(),Y(7,"mat-divider"),f()}if(i&2){let t=a.$implicit,e=x(2);v(3),yt(t.name),v(2),gt(e.projectAnalysisGroupMap[t.id])}}function Ca(i,a){if(i&1){let t=K();u(0,"mat-list")(1,"div",4),O("cdkDropListDropped",function(o){B(t);let n=x();return R(n.dropProject(o))}),ft(2,_a,8,1,"div",5,Pn),f()()}if(i&2){let t=x();v(2),gt(t.projects)}}var An=(()=>{class i{set projects(t){this._projects=t.slice()}get projects(){return this._projects}set projectAnalysisGroupMap(t){this._projectAnalysisGroupMap=t}get projectAnalysisGroupMap(){return this._projectAnalysisGroupMap}constructor(t){this.dialogRef=t,this._projectAnalysisGroupMap={},this._projects=[]}save(){this.dialogRef.close({projects:this.projects,projectAnalysisGroupMap:this.projectAnalysisGroupMap})}cancel(){this.dialogRef.close()}drop(t,e){Ie(this.projectAnalysisGroupMap[e],t.previousIndex,t.currentIndex)}dropProject(t){Ie(this.projects,t.previousIndex,t.currentIndex)}static{this.\u0275fac=function(e){return new(e||i)(L(qt))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-project-analysis-group-reorder-dialog"]],inputs:{projects:"projects",projectAnalysisGroupMap:"projectAnalysisGroupMap"},standalone:!0,features:[ut],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag",""],["mat-subheader","","cdkDragHandle",""],["cdkDragHandle","","matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(e,o){e&1&&(u(0,"h1",0),S(1,"Analysis Group Reorder"),f(),u(2,"div",1),q(3,Ca,4,0,"mat-list"),f(),u(4,"div",2)(5,"button",3),O("click",function(){return o.cancel()}),S(6,"Close"),f(),u(7,"button",3),O("click",function(){return o.save()}),S(8,"Save"),f()()),e&2&&(v(3),J(o.projects.length>0?3:-1))},dependencies:[Ht,Qt,on,rn,nn,tn,zt,en,Li,je,Me,$t,Ot]})}}return i})();var va=["hueSlider"],xa=["alphaSlider"];function ya(i,a){if(i&1){let t=K();u(0,"div",10),O("newValue",function(o){B(t);let n=x();return R(n.onSliderChange("saturation-lightness",o))}),u(1,"div",11),Y(2,"div"),f()()}if(i&2){let t=x();_e("background-color",t.hueSliderColor),F("rgX",1)("rgY",1),v(),_e("top",t.slider==null?null:t.slider.v,"px")("left",t.slider==null?null:t.slider.s,"px")}}function wa(i,a){if(i&1&&(u(0,"div",12),Y(1,"div",13)(2,"div",14),f()),i&2){let t=x();v(2),_e("background-color",t.selectedColor)}}function ba(i,a){if(i&1){let t=K();u(0,"div",15,1),O("newValue",function(o){B(t);let n=x();return R(n.onSliderChange("hue",o))}),u(2,"div",16)(3,"div"),Y(4,"div"),f()()()}if(i&2){let t=x();F("rgX",1),v(2),_e("left",t.slider==null?null:t.slider.h,"px")}}function Sa(i,a){if(i&1){let t=K();u(0,"div",17,2),O("newValue",function(o){B(t);let n=x();return R(n.onSliderChange("alpha",o))}),Y(2,"div",18),u(3,"div",16)(4,"div"),Y(5,"div"),f()()()}if(i&2){let t=x();F("rgX",1),v(2),F("ngStyle",t.getBackgroundColor(t.alphaSliderColor)),v(),_e("left",t.slider==null?null:t.slider.a,"px")}}var Ma=["dialog"],In=i=>({background:i});function ja(i,a){i&1&&Y(0,"div",12)}function Ta(i,a){if(i&1){let t=K();Pt(0),u(1,"div",9)(2,"div",10),O("click",function(){let o=B(t).$implicit,n=x(2);return R(n.onColorClick(o))}),q(3,ja,1,0,"div",11),f()(),At()}if(i&2){let t=a.$implicit,e=a.index,o=x(2);v(2),ei("colornull",!t),F("ngStyle",o.getBackgroundColor(t)),v(),F("ngIf",e==o.indexSeleccionado)}}function ka(i,a){if(i&1&&Y(0,"div",18),i&2){let t=x(3);F("ngStyle",t.getBackgroundColor(t.color))}}function Ea(i,a){if(i&1){let t=K();u(0,"div",13),O("click",function(){B(t);let o=x(2);return R(o.addColor())}),q(1,ka,1,1,"div",14),ti(),u(2,"svg",15),Y(3,"path",16)(4,"path",17),f()()}if(i&2){let t=x(2);v(),F("ngIf",t.indexSeleccionado===void 0)}}function Da(i,a){if(i&1){let t=K();u(0,"color-picker",19),O("colorChange",function(o){B(t);let n=x(2);return R(n.onChangeColorPicker(o))})("onAlphaChange",function(o){B(t);let n=x(2);return R(n.onAlphaChange(o))}),f()}if(i&2){let t=x(2);F("controls",t.colorPickerControls)("color",t.hsva)}}function Pa(i,a){if(i&1&&(Pt(0),u(1,"div",5),q(2,Ta,4,4,"ng-container",6)(3,Ea,5,1,"div",7)(4,Da,1,2,"color-picker",8),f(),At()),i&2){let t=x();v(),F("@colorsAnimation",t.colorsAnimationEffect),v(),F("ngForOf",t.palette),v(),F("ngIf",!t.hideColorPicker&&t.colorPickerControls!="only-alpha"),v(),F("ngIf",!t.hideColorPicker&&t.colorPickerControls=="only-alpha")}}function Aa(i,a){i&1&&Y(0,"div",12)}function Oa(i,a){if(i&1){let t=K();Pt(0),u(1,"div",9)(2,"div",25),O("click",function(){let o=B(t).$implicit,n=x(2);return R(n.changeColor(o))}),q(3,Aa,1,0,"div",11),f()(),At()}if(i&2){let t=a.$implicit,e=x(2);v(2),ei("colornull",!t),F("ngStyle",no(4,In,t)),v(),F("ngIf",e.isSelected(t))}}function Fa(i,a){if(i&1){let t=K();Pt(0),u(1,"div",5)(2,"div",20)(3,"div",21),O("click",function(){B(t);let o=x();return R(o.onClickBack())}),ti(),u(4,"svg",22),Y(5,"path",23)(6,"path",24),f()()(),q(7,Oa,4,6,"ng-container",6),f(),At()}if(i&2){let t=x();v(),F("@colorsAnimation",t.colorsAnimationEffect),v(6),F("ngForOf",t.variants)}}function Ia(i,a){if(i&1){let t=K();Pt(0),u(1,"div",26)(2,"div",27),O("click",function(){B(t);let o=x();return R(o.onClickBack())}),ti(),u(3,"svg",22),Y(4,"path",23)(5,"path",24),f()(),Eo(),u(6,"button",28),O("click",function(){B(t);let o=x();return R(o.emitClose("cancel"))}),S(7),f(),u(8,"button",28),O("click",function(){B(t);let o=x();return R(o.emitClose("accept"))}),S(9),f()(),u(10,"div",29)(11,"color-picker",30),O("sliderChange",function(o){B(t);let n=x();return R(n.onChangeColorPicker(o))}),f()(),At()}if(i&2){let t=x();v(7),ht(" ",t.cancelLabel," "),v(2),ht(" ",t.acceptLabel," "),v(2),F("controls",t.colorPickerControls)("color",t.hsva)}}function Va(i,a){if(i&1){let t=K();u(0,"div",31)(1,"p",32),O("click",function(){B(t);let o=x();return R(o.nextFormat())}),S(2),f(),u(3,"div",33)(4,"input",34,1),O("keyup",function(){B(t);let o=ee(5),n=x();return R(n.changeColorManual(o.value))})("keydown.enter",function(){B(t);let o=x();return R(o.emitClose("accept"))}),f()()()}if(i&2){let t=x();v(2),yt(t.colorFormats[t.format]),v(2),_e("font-size",t.color&&t.color.length>23?9:10,"px")("letter-spacing",t.color&&t.color.length>16?0:1.5,"px"),F("placeholder",t.placeholder)("value",t.color)}}var Co=["hex","rgba","hsla","cmyk"],Xt=function(i){return i[i.HEX=0]="HEX",i[i.RGBA=1]="RGBA",i[i.HSLA=2]="HSLA",i[i.CMYK=3]="CMYK",i}(Xt||{}),On=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],de=class{constructor(a,t,e,o){this.r=a,this.g=t,this.b=e,this.a=o}denormalize(){return this.r=Math.round(this.r*255),this.g=Math.round(this.g*255),this.b=Math.round(this.b*255),this}toString(){return this.denormalize(),"rgb"+(this.a!=1?"a(":"(")+this.r+", "+this.g+", "+this.b+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},re=class{constructor(a,t,e,o){this.h=a,this.s=t,this.v=e,this.a=o,this.onChange=new wt(!0)}onColorChange(a){this.s=a.s/a.rgX,this.v=a.v/a.rgY}onHueChange(a){this.h=a.v/a.rgX}onValueChange(a){this.v=a.v/a.rgX}onAlphaChange(a){this.a=a.v/a.rgX}},Ve=class{constructor(a,t,e,o){this.h=a,this.s=t,this.l=e,this.a=o}denormalize(){return this.h=Math.round(this.h*360),this.s=Math.round(this.s*100),this.l=Math.round(this.l*100),this}toString(){return"hsl"+(this.a!=1?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},ke=class{constructor(a,t,e,o,n=1){this.c=a,this.m=t,this.y=e,this.k=o,this.a=n}denormalize(){return this.c=Math.round(this.c*100),this.m=Math.round(this.m*100),this.y=Math.round(this.y*100),this.k=Math.round(this.k*100),this}toString(){return this.denormalize(),"cmyk("+this.c+", "+this.m+", "+this.y+", "+this.k+")"}},vo=class{constructor(a){a&&(this.preview=a.preview,this.variants=a.variants)}},Ui=(()=>{class i{constructor(){}toFormat(t,e){var o="";if(t)switch(e){case Xt.HEX:var m=this.hsvaToRgba(t);m.denormalize();var o=this.rgbaToHex(m,!0);break;case Xt.HSLA:var n=this.hsva2hsla(t);n.denormalize();var o=n.toString();break;case Xt.RGBA:var m=this.hsvaToRgba(t),o=m.toString();break;case Xt.CMYK:var T=this.hsvaToCmyk(t),o=T.toString();break}return o}stringToFormat(t,e){var o=this.stringToHsva(t,!0);return this.toFormat(o,e)}hsva2hsla(t){let e=t.h,o=t.s,n=t.v,m=t.a;if(n===0)return new Ve(e,0,0,m);if(o===0&&n===1)return new Ve(e,1,1,m);{let T=n*(2-o)/2;return new Ve(e,n*o/(1-Math.abs(2*T-1)),T,m)}}hsla2hsva(t){let e=Math.min(t.h,1),o=Math.min(t.s,1),n=Math.min(t.l,1),m=Math.min(t.a,1);if(n===0)return new re(e,0,0,m);{let T=n+o*(1-Math.abs(2*n-1))/2;return new re(e,2*(T-n)/T,T,m)}}hsvaToRgba(t){let e,o,n,m=t.h,T=t.s,I=t.v,z=t.a,W=Math.floor(m*6),lt=m*6-W,Z=I*(1-T),tt=I*(1-lt*T),dt=I*(1-(1-lt)*T);switch(W%6){case 0:e=I,o=dt,n=Z;break;case 1:e=tt,o=I,n=Z;break;case 2:e=Z,o=I,n=dt;break;case 3:e=Z,o=tt,n=I;break;case 4:e=dt,o=Z,n=I;break;case 5:e=I,o=Z,n=tt;break;default:e=0,o=0,n=0}return new de(e,o,n,z)}cmykToRgb(t){let e=(1-t.c)*(1-t.k),o=(1-t.m)*(1-t.k),n=(1-t.y)*(1-t.k);return new de(e,o,n,t.a)}rgbaToCmyk(t){let e=1-Math.max(t.r,t.g,t.b);if(e===1)return new ke(0,0,0,1,t.a);{let o=(1-t.r-e)/(1-e),n=(1-t.g-e)/(1-e),m=(1-t.b-e)/(1-e);return new ke(o,n,m,e,t.a)}}hsvaToCmyk(t){let e=this.hsvaToRgba(t);return this.rgbaToCmyk(e)}rgbaToHsva(t){let e,o,n=Math.min(t.r,1),m=Math.min(t.g,1),T=Math.min(t.b,1),I=Math.min(t.a,1),z=Math.max(n,m,T),W=Math.min(n,m,T),lt=z,Z=z-W;if(o=z===0?0:Z/z,z===W)e=0;else{switch(z){case n:e=(m-T)/Z+(m<T?6:0);break;case m:e=(T-n)/Z+2;break;case T:e=(n-m)/Z+4;break;default:e=0}e/=6}return new re(e,o,lt,I)}rgbaToHex(t,e){let o="#"+(16777216|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return t.a!=1&&(o+=(256|Math.round(t.a*255)).toString(16).substr(1)),o}normalizeCMYK(t){return new ke(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new ke(Math.floor(t.c*100),Math.floor(t.m*100),Math.floor(t.y*100),Math.floor(t.k*100),t.a)}denormalizeRGBA(t){return new de(Math.round(t.r*255),Math.round(t.g*255),Math.round(t.b*255),t.a)}stringToHsva(t="",e=!0){let o=null;t=(t||"").toLowerCase();let n=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(m){return new de(parseInt(m[2],10)/255,parseInt(m[3],10)/255,parseInt(m[4],10)/255,isNaN(parseFloat(m[5]))?1:parseFloat(m[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(m){return new Ve(parseInt(m[2],10)/360,parseInt(m[3],10)/100,parseInt(m[4],10)/100,isNaN(parseFloat(m[5]))?1:parseFloat(m[5]))}},{re:/cmyk?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(m){return new ke(parseInt(m[1],10)/100,parseInt(m[2],10)/100,parseInt(m[3],10)/100,parseInt(m[4],10)/100)}}];e?n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(m){return new de(parseInt(m[1],16)/255,parseInt(m[2],16)/255,parseInt(m[3],16)/255,parseInt(m[4]||"FF",16)/255)}}):n.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(m){return new de(parseInt(m[1],16)/255,parseInt(m[2],16)/255,parseInt(m[3],16)/255,1)}}),n.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(m){return new de(parseInt(m[1]+m[1],16)/255,parseInt(m[2]+m[2],16)/255,parseInt(m[3]+m[3],16)/255,1)}});for(let m in n)if(n.hasOwnProperty(m)){let T=n[m],I=T.re.exec(t),z=I&&T.parse(I);if(z){if(z instanceof de)o=this.rgbaToHsva(z);else if(z instanceof Ve)o=this.hsla2hsva(z);else if(z instanceof ke){let W=this.cmykToRgb(z);o=this.rgbaToHsva(W)}return o}}return o}outputFormat(t){return this.hsvaToRgba(t).toString()}getFormatByString(t){if(t){t=t.toLowerCase();let e=/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/,o=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,n=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/,m=/(cmyk\(\d{1,3}(,\s?\d{1,3}){3}\))/;if(e.test(t))return"hex";if(o.test(t))return"rgba";if(n.test(t))return"hsla";if(m.test(t))return"cmyk"}return"hex"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=$e({token:i,factory:i.\u0275fac}),i})(),Yi=class{constructor(a,t,e,o){this.h=a,this.s=t,this.v=e,this.a=o}},xo=class{constructor(a,t,e,o){this.h=a,this.s=t,this.v=e,this.a=o}},Ba=(()=>{class i{mouseDown(t){this.start(t)}touchStart(t){this.start(t)}constructor(t){this.elRef=t,this.dragEnd=new wt,this.dragStart=new wt,this.newValue=new wt,this.listenerMove=e=>this.move(e),this.listenerStop=()=>this.stop()}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){let e=this.elRef.nativeElement.getBoundingClientRect();return(t.pageX!==void 0?t.pageX:t.touches[0].pageX)-e.left-window.pageXOffset}getY(t){let e=this.elRef.nativeElement.getBoundingClientRect();return(t.pageY!==void 0?t.pageY:t.touches[0].pageY)-e.top-window.pageYOffset}setCursor(t){let e=this.elRef.nativeElement.offsetWidth,o=this.elRef.nativeElement.offsetHeight,n=Math.max(0,Math.min(this.getX(t),e)),m=Math.max(0,Math.min(this.getY(t),o));this.rgX!==void 0&&this.rgY!==void 0?this.newValue.emit({s:n/e,v:1-m/o,rgX:this.rgX,rgY:this.rgY}):this.rgX===void 0&&this.rgY!==void 0?this.newValue.emit({v:m/o,rgY:this.rgY}):this.rgX!==void 0&&this.rgY===void 0&&this.newValue.emit({v:n/e,rgX:this.rgX})}}return i.\u0275fac=function(t){return new(t||i)(L(We))},i.\u0275dir=eo({type:i,selectors:[["","slider",""]],hostBindings:function(t,e){t&1&&O("mousedown",function(n){return e.mouseDown(n)})("touchstart",function(n){return e.touchStart(n)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),i})(),Ra=(()=>{class i{constructor(t,e){this.service=t,this.cdr=e,this.color=new re(0,1,1,1),this.controls="default",this.sliderChange=new wt(!1),this.onAlphaChange=new wt(!1),this.hsva=new re(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new re(0,1,1,1)),this.slider=new Yi(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(t){t.color&&this.color&&this.update()}ngAfterViewInit(){let t=this.hueSlider?.nativeElement.offsetWidth||140,e=this.alphaSlider?.nativeElement.offsetWidth||140;this.sliderDimMax=new xo(t,220,130,e),this.update()}onSliderChange(t,e){switch(t){case"saturation-lightness":this.hsva.onColorChange(e);break;case"hue":this.hsva.onHueChange(e);break;case"alpha":this.hsva.onAlphaChange(e),this.onAlphaChange.emit(e);break;case"value":this.hsva.onValueChange(e);break}this.update(),this.setColor(this.outputColor)}setColor(t){this.color=t,this.sliderChange.emit(this.color)}getBackgroundColor(t){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+t+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let t=this.service.hsvaToRgba(this.hsva).denormalize(),e=this.service.hsvaToRgba(new re(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+e.r+","+e.g+","+e.b+")",this.alphaSliderColor="rgb("+t.r+","+t.g+","+t.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new Yi(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return i.\u0275fac=function(t){return new(t||i)(L(Ui),L(li))},i.\u0275cmp=st({type:i,selectors:[["color-picker"]],viewQuery:function(t,e){if(t&1&&(ii(va,5),ii(xa,5)),t&2){let o;oi(o=ni())&&(e.hueSlider=o.first),oi(o=ni())&&(e.alphaSlider=o.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[ko],decls:8,vars:4,consts:[["dialogPopup",""],["hueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"newValue","slider","rgX","rgY"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"newValue","slider","rgX"],[1,"sliderCursor"],[1,"alpha",3,"newValue","slider","rgX"],[1,"alpha-gradient",3,"ngStyle"]],template:function(t,e){if(t&1){let o=K();u(0,"div",3,0),O("click",function(m){return B(o),R(m.stopPropagation())}),q(2,ya,3,8,"div",4),u(3,"div",5),q(4,wa,3,2,"div",6),u(5,"div",7),q(6,ba,5,3,"div",8)(7,Sa,6,4,"div",9),f()()()}t&2&&(v(2),F("ngIf",e.controls!="only-alpha"),v(2),F("ngIf",e.controls!="only-alpha"),v(2),F("ngIf",e.controls!="only-alpha"),v(),F("ngIf",e.controls!="no-alpha"))},dependencies:[ro,ci,Ba],styles:[`.color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}
`],encapsulation:2}),i})(),Ga=(()=>{class i{click(t){this.isOutside(t)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(t,e){this.service=t,this.cdr=e,this.color="#000000",this.previewColor="#000000",this.hsva=new re(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=On,this.variants=[],this.userFormats=[],this.colorFormats=Co,this.format=Xt.HEX,this.formatMap={hex:Xt.HEX,rgba:Xt.RGBA,hsla:Xt.HSLA,cmyk:Xt.CMYK},this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default",this.placeholder="#FFFFFF"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(t){let e;if(this.color)for(let o=0;o<t.length;o++){let n=t[o];typeof n=="string"?this.service.stringToFormat(this.color,Xt.HEX)==this.service.stringToFormat(n,Xt.HEX)&&(e=o):n===void 0?this.color=void 0:this.findIndexSelectedColor(n.variants)!=null&&(e=o)}return e}iniciate(t,e,o,n,m,T,I,z,W,lt,Z,tt,dt=[]){if(this.colorPickerControls=Z,this.triggerInstance=t,this.TriggerBBox=e,this.color=o,this.hideColorPicker=z,this.hideTextInput=I,this.acceptLabel=W,this.cancelLabel=lt,dt.length&&dt.every(It=>Co.includes(It))&&(this.colorFormats=dt),T?this.colorFormats.includes(T)?(this.format=this.colorFormats.indexOf(T.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=T.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=Xt.HEX):(this.format=this.colorFormats.indexOf(this.service.getFormatByString(this.color)),this.format<0&&(this.format=0)),this.previewColor=this.color,this.palette=n??On,this.colorsAnimationEffect=m,tt=="top"){let ct=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+ct.height+"px ))"}}setPosition(){if(this.TriggerBBox){let e=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=e.top+e.height,e.left+250>window.innerWidth?this.left=e.right<250?window.innerWidth/2-250/2:e.right-250:this.left=e.left}}setPositionY(){let t=this.TriggerBBox.nativeElement.getBoundingClientRect(),e=this.panelRef.nativeElement.getBoundingClientRect(),o=e.height;t.bottom+o>window.innerHeight?this.positionString=t.top<e.height?"transform: translateY(-"+t.bottom+"px );":"transform: translateY(calc( -100% - "+t.height+"px ));":this.positionString="",this.cdr.detectChanges()}hasVariant(t){return this.previewColor?typeof t!="string"&&t.variants.some(e=>e.toUpperCase()==this.previewColor.toUpperCase()):!1}isSelected(t){return this.previewColor?typeof t=="string"&&t.toUpperCase()==this.previewColor.toUpperCase():!1}getBackgroundColor(t){return typeof t=="string"?{background:t}:{background:t?.preview}}onAlphaChange(t){this.palette=this.ChangeAlphaOnPalette(t,this.palette)}ChangeAlphaOnPalette(t,e){var o=[];for(let n=0;n<e.length;n++){let m=e[n];if(typeof m=="string"){let T=this.service.stringToHsva(m);T.onAlphaChange(t),o.push(this.service.toFormat(T,this.format))}else{let T=new vo,I=this.service.stringToHsva(m.preview);I.onAlphaChange(t),T.preview=this.service.toFormat(I,this.format),T.variants=this.ChangeAlphaOnPalette(t,m.variants),o.push(T)}}return o}changeColor(t){this.setColor(this.service.stringToHsva(t)),this.emitClose("accept")}onChangeColorPicker(t){this.temporalColor=t,this.color=this.service.toFormat(t,this.format),this.triggerInstance.sliderChange(this.service.toFormat(t,this.format))}changeColorManual(t){this.previewColor=t,this.color=t,this.hsva=this.service.stringToHsva(t),this.setPreviewColor(this.hsva),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color,this.previewColor)}setColor(t,e=-1){this.hsva=t;let o=this.colorFormats[this.format],n=e;n<0&&(n=this.formatMap[o]),this.color=this.service.toFormat(t,n),this.setPreviewColor(t),this.triggerInstance.setColor(this.color,this.previewColor)}setPreviewColor(t){this.previewColor=t?this.service.hsvaToRgba(t).toString():void 0}onChange(){}onColorClick(t){typeof t=="string"||t===void 0?this.changeColor(t):(this.variants=t.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){if(this.canChangeFormat){this.format=(this.format+1)%this.colorFormats.length;let t=this.colorFormats[this.format],e=this.formatMap[t];this.setColor(this.hsva,e),this.placeholder=this.service.toFormat(new re(0,0,1,1),e)}}emitClose(t){this.menu==3&&(t=="cancel"||t=="accept"&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){this.menu==3&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(t){return t.target.classList.contains("ngx-colors-overlay")}}return i.\u0275fac=function(t){return new(t||i)(L(Ui),L(li))},i.\u0275cmp=st({type:i,selectors:[["ngx-colors-panel"]],viewQuery:function(t,e){if(t&1&&ii(Ma,5),t&2){let o;oi(o=ni())&&(e.panelRef=o.first)}},hostVars:4,hostBindings:function(t,e){t&1&&O("mousedown",function(n){return e.click(n)},!1,io)("scroll",function(){return e.onScroll()},!1,io)("resize",function(){return e.onResize()},!1,Ao),t&2&&_e("top",e.top,"px")("left",e.left,"px")},decls:6,vars:6,consts:[["dialog",""],["paintInput",""],[1,"opened"],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"click","ngStyle"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style",`
            position: absolute;
            height: 7px;
            width: 7px;
            border: 1px solid rgba(0, 0, 0, 0.03);
            border-radius: 100%;
            top: 0;
            right: 0;
          `,3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"colorChange","onAlphaChange","controls","color"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"click","ngStyle"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"sliderChange","controls","color"],[1,"manual-input-wrapper"],[2,"cursor","pointer",3,"click"],[1,"g-input"],["type","text",3,"keyup","keydown.enter","placeholder","value"]],template:function(t,e){t&1&&(u(0,"div",2,0),q(2,Pa,5,4,"ng-container",3)(3,Fa,8,2,"ng-container",3)(4,Ia,12,4,"ng-container",3)(5,Va,6,7,"div",4),f()),t&2&&(Io(e.positionString),v(2),F("ngIf",e.menu==1),v(),F("ngIf",e.menu==2),v(),F("ngIf",e.menu==3),v(),F("ngIf",!e.hideTextInput))},dependencies:[zo,ro,ci,Ra],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[Uo("colorsAnimation",[lo("void => slide-in",[Xe(":enter",fe({opacity:0}),{optional:!0}),Xe(":enter",co("10ms",[ao(".3s ease-in",so([fe({opacity:0,transform:"translatex(-50%)",offset:0}),fe({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),fe({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),lo("void => popup",[Xe(":enter",fe({opacity:0,transform:"scale(0)"}),{optional:!0}),Xe(":enter",co("10ms",[ao("500ms ease-out",so([fe({opacity:.5,transform:"scale(.5)",offset:.3}),fe({opacity:1,transform:"scale(1.1)",offset:.8}),fe({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),i})(),Fn={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0},Vn=(()=>{class i{constructor(t,e,o){this.resolver=t,this.applicationRef=e,this.injector=o}createPanel(t,e){this.componentRef!=null&&this.removePanel();let o=this.resolver.resolveComponentFactory(Ga);this.componentRef=o.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);let n=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(e),Object.keys(Fn).forEach(m=>{this.overlay.style[m]=Fn[m]}),t?document.getElementById(t).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(n),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return i.\u0275fac=function(t){return new(t||i)(Ze(Oo),Ze(No),Ze(Do))},i.\u0275prov=$e({token:i,factory:i.\u0275fac}),i})(),yo=(()=>{class i{onClick(){this.openPanel()}constructor(t,e,o){this.triggerRef=t,this.panelFactory=e,this.service=o,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new wt,this.input=new wt,this.slider=new wt,this.close=new wt,this.open=new wt,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}ngOnDestroy(){this.panelRef&&this.panelFactory.removePanel()}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position,this.formats)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}setDisabledState(t){this.isDisabled=t,this.triggerRef.nativeElement.style.opacity=t?.5:1}setColor(t,e=""){this.writeValue(t,e),this.onChangeCallback(t),this.input.emit(t)}sliderChange(t){this.slider.emit(t)}get value(){return this.color}set value(t){this.setColor(t),this.onChangeCallback(t)}writeValue(t,e=""){if(t!==this.color){if(this.format){let n=Co.indexOf(this.format.toLowerCase());t=this.service.stringToFormat(t,n)}this.color=t;let o=!1;t&&t.startsWith("cmyk")&&(o=!0,e||(e=this.service.stringToFormat(t,Xt.RGBA))),this.change.emit(o?e:t)}}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}}return i.\u0275fac=function(t){return new(t||i)(L(We),L(Vn),L(Ui))},i.\u0275dir=eo({type:i,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(t,e){t&1&&O("click",function(){return e.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",formats:"formats",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[Lo([{provide:Jo,useExisting:To(()=>i),multi:!0}])]}),i})(),Bn=(()=>{class i{constructor(t,e){this.cdRef=t,this.triggerDirective=e,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(t=>{this.color=t,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(L(li),L(yo,1))},i.\u0275cmp=st({type:i,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(t,e){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),Y(3,"div",3),f()()()),t&2&&(v(3),ei("colornull",!e.color),F("ngStyle",no(3,In,e.color)))},dependencies:[ci],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),i})(),Rn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ge({type:i}),i.\u0275inj=Re({providers:[Ui,Vn],imports:[di]}),i})();var Na=(i,a)=>a.id;function za(i,a){if(i&1){let t=K();u(0,"div",4)(1,"ngx-colors",5),Nt("ngModelChange",function(o){let n=B(t).$implicit,m=x(2).$implicit,T=x();return Lt(T.projectConditionColorMap[m.id][n],o)||(T.projectConditionColorMap[m.id][n]=o),R(o)}),f(),u(2,"div"),S(3),f()()}if(i&2){let t=a.$implicit,e=x(2).$implicit,o=x();v(),Gt("ngModel",o.projectConditionColorMap[e.id][t]),v(2),yt(t)}}function qa(i,a){if(i&1&&ft(0,za,4,2,"div",4,me),i&2){let t=x().$implicit,e=x();gt(e.projectConditionMap[t.id])}}function Ha(i,a){if(i&1&&(u(0,"div")(1,"div")(2,"b"),S(3),f()(),q(4,qa,2,0),f()),i&2){let t=a.$implicit,e=x();v(3),yt(t.name),v(),J(e.projectConditionMap[t.id]?4:-1)}}var Gn=(()=>{class i{set projects(t){this._projects=t;for(let e of t)this.web.getProjectUniqueConditions(e.id).subscribe(o=>{for(let n of o)this.projectConditionMap[n.AnalysisGroup.project]||(this.projectConditionMap[n.AnalysisGroup.project]=[]),this.projectConditionMap[n.AnalysisGroup.project].includes(n.Condition)||this.projectConditionMap[n.AnalysisGroup.project].push(n.Condition),this.projectConditionColorMap[n.AnalysisGroup.project]||(this.projectConditionColorMap[n.AnalysisGroup.project]={}),this.projectConditionColorMap[n.AnalysisGroup.project][n.Condition]||(this.projectConditionColorMap[n.AnalysisGroup.project][n.Condition]="")})}get projects(){return this._projects}set projectConditionColorMap(t){if(t==null){this._projectConditionColorMap={};return}this._projectConditionColorMap=Object.assign({},t)}get projectConditionColorMap(){return this._projectConditionColorMap}constructor(t,e){this.dialogRef=t,this.web=e,this._projects=[],this.projectConditionMap={},this._projectConditionColorMap={}}save(){this.dialogRef.close(this.projectConditionColorMap)}cancel(){this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||i)(L(qt),L(Wt))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-condition-color-editor-dialog"]],inputs:{projects:"projects",projectConditionColorMap:"projectConditionColorMap"},standalone:!0,features:[ut],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],[2,"display","flex","gap","5px","align-items","center"],["ngx-colors-trigger","",3,"ngModelChange","ngModel"]],template:function(e,o){e&1&&(u(0,"h1",0),S(1,"Condition Color Editor"),f(),u(2,"div",1),ft(3,Ha,5,2,"div",null,Na),f(),u(5,"div",2)(6,"button",3),O("click",function(){return o.cancel()}),S(7,"Close"),f(),u(8,"button",3),O("click",function(){return o.save()}),S(9,"Save"),f()()),e&2&&(v(3),gt(o.projects))},dependencies:[Ht,Qt,Rn,Bn,yo,we,Vt,ve,Ot,$t]})}}return i})();function Qa(i,a){if(i&1&&(u(0,"mat-option",6),S(1),f()),i&2){let t=a.$implicit;F("value",t),v(),yt(t)}}var Ln=(()=>{class i{_filter(t){let e=t.toLowerCase();return this.tags.filter(o=>o.toLowerCase().includes(e))}constructor(t,e,o){this.fb=t,this.dialogRef=e,this.collateService=o,this.form=this.fb.group({name:["",ie.required],existing:[!1],id:[-1]}),this.tags=[]}ngOnInit(){this.filteredTags=this.form.controls.name.valueChanges.pipe(Je(""),Ke(t=>this.collateService.getCollateTags(t).pipe(Ue(e=>e.results.map(o=>o.name)))))}submit(){let t=this.form.controls.name.value;this.collateService.getCollateTags(t).subscribe(e=>{let o=e.results.find(m=>m.name.toLowerCase()===t.toLowerCase()),n=!!o;this.form.controls.existing.setValue(n),this.form.controls.id.setValue(n?o.id:null),this.dialogRef.close(this.form.value)})}cancel(){this.dialogRef.close()}onTagSelected(t){let e=t.option.value;this.form.controls.name.setValue(e),this.collateService.getCollateTags(e).subscribe(o=>{let n=o.results.find(m=>m.name.toLowerCase()===e.toLowerCase());this.form.controls.existing.setValue(!!n),this.form.controls.id.setValue(n?n.id:null)})}static{this.\u0275fac=function(e){return new(e||i)(L(Jt),L(qt),L(Se))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-tag-create-dialog"]],standalone:!0,features:[ut],decls:18,vars:5,consts:[["auto","matAutocomplete"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["type","text","matInput","","formControlName","name",3,"matAutocomplete"],[3,"optionSelected"],[3,"value"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"click","disabled"]],template:function(e,o){if(e&1){let n=K();u(0,"h1",1),S(1,"Create/Add Tag"),f(),u(2,"div",2)(3,"form",3)(4,"mat-form-field")(5,"mat-label"),S(6,"Tag Name"),f(),Y(7,"input",4),u(8,"mat-autocomplete",5,0),O("optionSelected",function(T){return B(n),R(o.onTagSelected(T))}),ft(10,Qa,2,2,"mat-option",6,me),ai(12,"async"),f()()()(),u(13,"div",7)(14,"button",8),O("click",function(){return B(n),R(o.cancel())}),S(15,"Cancel"),f(),u(16,"button",9),O("click",function(){return B(n),R(o.submit())}),S(17,"Submit"),f()()}if(e&2){let n=ee(9);v(3),F("formGroup",o.form),v(4),F("matAutocomplete",n),v(3),gt(si(12,3,o.filteredTags)),v(6),F("disabled",o.form.invalid)}},dependencies:[Ht,Qt,ce,le,Ut,Vt,se,xe,ye,be,Zt,Kt,Ot,$t,Ne,pi,vi,xi]})}}return i})();var $a=(i,a)=>a.id;function Wa(i,a){i&1&&(u(0,"th",11),S(1," Original Title "),f())}function Xa(i,a){if(i&1&&(u(0,"td",12),S(1),f()),i&2){let t=a.$implicit;v(),ht(" ",t," ")}}function Ya(i,a){i&1&&(u(0,"th",11),S(1," Display Title "),f())}function Ua(i,a){if(i&1&&(u(0,"td",12)(1,"form",13)(2,"mat-form-field"),Y(3,"input",14),f()()()),i&2){let t=a.$implicit,e=x(2).$implicit,o=x();v(),F("formGroup",o.formMap[e.id][t]),v(2),Ro("formControlName",t)}}function Ja(i,a){i&1&&Y(0,"tr",15)}function Ka(i,a){i&1&&Y(0,"tr",16)}function Za(i,a){if(i&1&&(u(0,"h5"),S(1),f(),u(2,"table",4),Pt(3,5),q(4,Wa,2,0,"th",6)(5,Xa,2,1,"td",7),At(),Pt(6,8),q(7,Ya,2,0,"th",6)(8,Ua,4,2,"td",7),At(),q(9,Ja,1,0,"tr",9)(10,Ka,1,0,"tr",10),f()),i&2){let t=x().$implicit,e=x();v(),yt(t.name),v(),F("dataSource",e.projectConditionMap[t.id]),v(7),F("matHeaderRowDef",e.displayedColumns),v(),F("matRowDefColumns",e.displayedColumns)}}function ts(i,a){if(i&1&&q(0,Za,11,4),i&2){let t=a.$implicit,e=x();J(e.formMap[t.id]?0:-1)}}var Nn=(()=>{class i{set projects(t){this._projects=t.slice()}get projects(){return this._projects}set renameSampleCondition(t){for(let e of this.projects)this.web.getProjectUniqueConditions(e.id).subscribe(o=>{for(let n of o){if(this.formMap[n.AnalysisGroup.project]||(this.formMap[n.AnalysisGroup.project]={}),!this.formMap[n.AnalysisGroup.project][n.Condition]){let m={};m[n.Condition]=new oe(n.Condition,ie.required),this.formMap[n.AnalysisGroup.project][n.Condition]=this.fb.group(m)}this.projectConditionMap[n.AnalysisGroup.project]||(this.projectConditionMap[n.AnalysisGroup.project]=[]),this.projectConditionMap[n.AnalysisGroup.project].includes(n.Condition)||this.projectConditionMap[n.AnalysisGroup.project].push(n.Condition),this.renameSampleCondition[n.AnalysisGroup.project]||(this.renameSampleCondition[n.AnalysisGroup.project]={}),this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]||(this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]=n.Condition),t[n.AnalysisGroup.project]&&t[n.AnalysisGroup.project][n.Condition]&&(this.renameSampleCondition[n.AnalysisGroup.project][n.Condition]=t[n.AnalysisGroup.project][n.Condition],this.formMap[n.AnalysisGroup.project][n.Condition].controls[n.Condition].setValue(t[n.AnalysisGroup.project][n.Condition]))}})}get renameSampleCondition(){return this._renameSampleCondition}constructor(t,e,o,n){this.dialog=t,this.web=e,this.fb=o,this.sb=n,this.displayedColumns=["original","display"],this.projectConditionMap={},this._projects=[],this._renameSampleCondition={},this.formMap={}}close(){this.dialog.close()}submit(){let t={};for(let e in this.formMap){t[e]={};for(let o in this.formMap[e])if(t[e][o]=this.formMap[e][o].value[o],!this.formMap[e][o].valid){this.sb.open(`${o} is invalid`);return}}this.dialog.close(t)}static{this.\u0275fac=function(e){return new(e||i)(L(qt),L(Wt),L(Jt),L(ne))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-rename-sample-condition-dialog"]],inputs:{projects:"projects",renameSampleCondition:"renameSampleCondition"},standalone:!0,features:[ut],decls:10,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","original"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","display"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"formGroup"],["matInput","",2,"border-radius","0",3,"formControlName"],["mat-header-row",""],["mat-row",""]],template:function(e,o){e&1&&(u(0,"h1",0),S(1,"Rename Conditions"),f(),u(2,"div",1),ft(3,ts,1,1,null,null,$a),f(),u(5,"div",2)(6,"button",3),O("click",function(){return o.submit()}),S(7,"Submit"),f(),u(8,"button",3),O("click",function(){return o.close()}),S(9,"Close"),f()()),e&2&&(v(3),gt(o.projects))},dependencies:[Ht,Qt,ce,le,Ut,Vt,se,xe,ye,Ei,Mi,Ti,ki,Ai,Di,Oi,Pi,Si,ji,$t,Ot,Kt,Zt]})}}return i})();function es(i,a){if(i&1){let t=K();u(0,"mat-checkbox",12),Nt("ngModelChange",function(o){B(t);let n=x(2);return Lt(n.collate.settings.showTags,o)||(n.collate.settings.showTags=o),R(o)}),S(1,"Show Tags"),f()}if(i&2){let t=x(2);Gt("ngModel",t.collate.settings.showTags)}}function is(i,a){if(i&1){let t=K();u(0,"h1",15),O("click",function(){B(t);let o=x(3);return R(o.toggleEditTitle())}),S(1),f(),Y(2,"br")}if(i&2){let t=x(3);v(),yt(t.collate.title)}}function os(i,a){if(i&1){let t=K();u(0,"div")(1,"mat-form-field",16)(2,"input",17),O("keydown.enter",function(){B(t);let o=x(3);return R(o.toggleEditTitle())}),Nt("ngModelChange",function(o){B(t);let n=x(3);return Lt(n.collate.title,o)||(n.collate.title=o),R(o)}),f()(),u(3,"button",18),O("click",function(){B(t);let o=x(3);return R(o.toggleEditTitle())}),u(4,"mat-icon"),S(5,"save"),f()()()}if(i&2){let t=x(3);v(2),Gt("ngModel",t.collate.title)}}function ns(i,a){if(i&1){let t=K();u(0,"div",19),O("click",function(){B(t);let o=x(3);return R(o.toggleEditGreeting())}),S(1),f()}if(i&2){let t=x(3);v(),yt(t.collate.greeting)}}function rs(i,a){if(i&1){let t=K();u(0,"div")(1,"mat-form-field",20)(2,"input",17),O("keydown.enter",function(){B(t);let o=x(3);return R(o.toggleEditGreeting())}),Nt("ngModelChange",function(o){B(t);let n=x(3);return Lt(n.collate.greeting,o)||(n.collate.greeting=o),R(o)}),f()(),u(3,"button",18),O("click",function(){B(t);let o=x(3);return R(o.toggleEditGreeting())}),u(4,"mat-icon"),S(5,"save"),f()()()}if(i&2){let t=x(3);v(2),Gt("ngModel",t.collate.greeting)}}function as(i,a){if(i&1&&(u(0,"div",9)(1,"div",13),q(2,is,3,1)(3,os,6,1,"div")(4,ns,2,1,"div",14)(5,rs,6,1,"div"),f()()),i&2){let t=x(2);v(2),J(t.editTitle?3:2),v(2),J(t.editGreeting?5:4)}}function ss(i,a){if(i&1){let t=K();u(0,"div",1)(1,"button",21),O("click",function(){B(t);let o=x(2);return R(o.openCollateTagCreateDialog())}),S(2,"Add Tag +"),f()(),u(3,"div",22)(4,"app-collate-tags",23),O("collageTagsChange",function(o){B(t);let n=x(2);return R(n.handleCollageTagsChange(o))}),f()()}if(i&2){let t=x(2);v(4),F("collageTags",t.collate.tags)}}function ls(i,a){if(i&1&&Y(0,"mat-tab",25),i&2){let t=a.$implicit;F("label",t)}}function cs(i,a){if(i&1){let t=K();u(0,"div",11)(1,"mat-tab-group",24),O("selectedTabChange",function(){B(t);let o=x(2);return R(o.filterDataBySearchTerm())}),Nt("selectedIndexChange",function(o){B(t);let n=x(2);return Lt(n.selectedIndex,o)||(n.selectedIndex=o),R(o)}),ft(2,ls,1,1,"mat-tab",25,me),f()()}if(i&2){let t=x(2);v(),Gt("selectedIndex",t.selectedIndex),F("mat-stretch-tabs",!1),v(),gt(t.searchTerms)}}function ps(i,a){if(i&1){let t=K();u(0,"app-collate-project-list",27),O("deleteProject",function(o){B(t);let n=x(4);return R(n.deleteProject(o))})("projectOrderChanged",function(o){B(t);let n=x(4);return R(n.onProjectOrderChanged(o))}),f()}if(i&2){let t=x(4);F("searchTerm",t.selectedSearchTerm)("projectConditionColorMap",t.collate.settings.projectConditionColorMap)("projects",t.projects)("filteredResults",t.filteredResults)("renameCondition",t.collate.settings.renameSampleCondition)}}function ds(i,a){if(i&1&&q(0,ps,1,5,"app-collate-project-list",26),i&2){let t=x(3);J(t.collate.settings.projectConditionColorMap&&t.collate.settings.renameSampleCondition?0:-1)}}function hs(i,a){if(i&1&&q(0,ds,1,1),i&2){let t=x(2);J(t.collate.settings?0:-1)}}function us(i,a){if(i&1){let t=K();u(0,"mat-toolbar")(1,"mat-toolbar-row"),Y(2,"span",2),q(3,es,2,1,"mat-checkbox",3),u(4,"button",4),O("click",function(){B(t);let o=x();return R(o.goToCollateView())}),u(5,"mat-icon"),S(6,"visibility"),f()(),u(7,"button",5),O("click",function(){B(t);let o=x();return R(o.openProjectAddDialog())}),u(8,"mat-icon"),S(9,"add"),f()(),u(10,"button",6),O("click",function(){B(t);let o=x();return R(o.updateCollate())}),u(11,"mat-icon"),S(12,"save"),f()(),u(13,"button",7)(14,"mat-icon"),S(15,"more_vert"),f()(),u(16,"mat-menu",null,0)(18,"button",8),O("click",function(){B(t);let o=x();return R(o.openReorderDialog())}),S(19,"Reorder Analysis Groups"),f(),u(20,"button",8),O("click",function(){B(t);let o=x();return R(o.openVisibilityDialog())}),S(21,"Change Analysis Group Visibility"),f(),u(22,"button",8),O("click",function(){B(t);let o=x();return R(o.openConditionColorEditorDialog())}),S(23,"Set Condition Colors"),f(),u(24,"button",8),O("click",function(){B(t);let o=x();return R(o.openRenameConditionDialog())}),S(25,"Rename Condition"),f()()()(),q(26,as,6,2,"div",9)(27,ss,5,1),u(28,"div",1)(29,"app-collate-search",10),O("searchResultID",function(o){B(t);let n=x();return R(n.getSearchFromID(o))}),f()(),q(30,cs,4,2,"div",11)(31,hs,1,1)}if(i&2){let t=ee(17),e=x();v(3),J(e.collate?3:-1),v(10),F("matMenuTriggerFor",t),v(13),J(e.collate?26:-1),v(),J(e.collate?27:-1),v(2),F("projects",e.projects),v(),J(e.searchTerms.length>0?30:-1),v(),J(e.collate?31:-1)}}function ms(i,a){i&1&&(u(0,"div",1)(1,"p"),S(2," You do not have permission to edit this collate. "),f()())}var wo=(()=>{class i{set collateId(t){t&&this.collateService.getCollate(t).subscribe(e=>{if(this._collate=e,this.accounts.getCollatePermissions(e.id).subscribe(o=>{this.canEdit=o.edit}),this.projects=e.projects,this._collate.settings||(this._collate.settings={projectOrder:this.projects.map(o=>o.id),analysisGroupOrderMap:{},projectConditionColorMap:{},renameSampleCondition:{},projectAnalysisGroupVisibility:{},showTags:!1}),e.settings.projectOrder){let o=this.projects.filter(n=>!e.settings.projectOrder.includes(n.id));this.projects=this.projects.filter(n=>e.settings.projectOrder.includes(n.id)),this.projects=this.projects.concat(o)}if(this.collate&&"showTags"in this.collate.settings&&(this.collate.settings.showTags=!1),this.collate?.settings.projectConditionColorMap)this.graph.projectConditionColorMap=this.collate.settings.projectConditionColorMap;else{this.collate.settings.projectConditionColorMap={};for(let o of this.projects)this.collate.settings.projectConditionColorMap[o.id]={}}if(!this.collate?.settings.renameSampleCondition){this.collate.settings.renameSampleCondition={};for(let o of this.projects)this.collate.settings.renameSampleCondition[o.id]={},this.web.getProjectUniqueConditions(o.id).subscribe(n=>{for(let m of n)this.collate.settings.renameSampleCondition[o.id][m.Condition]=m.Condition;console.log(this.collate.settings.renameSampleCondition)})}})}get collate(){return this._collate}set collate(t){this._collate=t}get selectedSearchTerm(){return this._selectedSearchTerm}set selectedSearchTerm(t){this._selectedSearchTerm=t}constructor(t,e,o,n,m,T,I){this.accounts=t,this.graph=e,this.router=o,this.snackBar=n,this.dialog=m,this.collateService=T,this.web=I,this._collate=null,this.canEdit=!1,this.projects=[],this.selectedIndex=0,this.editTitle=!1,this.editGreeting=!1,this.searchResults={},this.projectAnalysisGroups={},this.analysisGroupProjects={},this.searchTerms=[],this._selectedSearchTerm="",this.filteredResults={},this.removedTags=[]}openProjectAddDialog(){this.dialog.open(Dn).afterClosed().subscribe(e=>{e&&(this.projects=this.projects.concat(e),this.collate&&(this.collate.projects=this.projects,this.updateProjectOrder()))})}updateProjectOrder(){this._collate&&(this._collate.settings.projectOrder=this.projects.map(t=>t.id)),console.log(this.collate)}updateCollate(){this._collate&&this.collateService.updateCollate(this._collate.id,this._collate).subscribe(()=>{if(this.removedTags.length>0){let t=this.removedTags.map(e=>this.collateService.removeTagFromCollate(this._collate?.id,e.id));Mo(t).subscribe(()=>{this.showSnackBar("Collate saved successfully"),this.removedTags=[]})}else this.showSnackBar("Collate saved successfully")})}toggleEditTitle(){this.editTitle=!this.editTitle}toggleEditGreeting(){this.editGreeting=!this.editGreeting}saveTitle(){this.toggleEditTitle(),this.updateCollate()}saveGreeting(){this.toggleEditGreeting(),this.updateCollate()}getSearchFromID(t){this.web.getSearchSession(t).subscribe(e=>{console.log(e)}),this.web.getSearchResults(t,99999).subscribe(e=>{console.log(e.results),this.distributeSearchResults(e.results).then()})}associateAnalysisGroupsWithProjects(){return Yt(this,null,function*(){let t=yield this.web.getAnalysisGroupsFromProjects(this.projects).toPromise();this.projectAnalysisGroups={},this.analysisGroupProjects={},t&&t.forEach(e=>{let o=e.project;this.projectAnalysisGroups[o]||(this.projectAnalysisGroups[o]=[]),this.projectAnalysisGroups[o].push(e),this.analysisGroupProjects[e.id]=this.projects.find(n=>n.id===o)})})}distributeSearchResults(t){return Yt(this,null,function*(){yield this.associateAnalysisGroupsWithProjects(),this.searchResults={},this.searchTerms=Array.from(new Set(t.map(e=>e.search_term))),t.forEach(e=>{let o=e.analysis_group.id,n=this.analysisGroupProjects[o];n&&(this.searchResults[n.id]||(this.searchResults[n.id]=[]),this.searchResults[n.id].push(e))}),this.selectedSearchTerm=this.searchTerms[0],this.filterDataBySearchTerm()})}getFilteredSearchResults(){let t={};return Object.keys(this.searchResults).forEach(e=>{t[e]=this.searchResults[e].filter(o=>o.search_term===this.selectedSearchTerm)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(e=>{let o=parseInt(e),n=this.collate?.settings.analysisGroupOrderMap[o];if(!t[o]||!n)return;let m=t[o].filter(T=>!n.includes(T.analysis_group.id));if(t[o]=t[o].filter(T=>n.includes(T.analysis_group.id)),t[o]=t[o].sort((T,I)=>n.indexOf(T.analysis_group.id)-n.indexOf(I.analysis_group.id)),t[o]=t[o].concat(m),this.collate?.settings?.projectAnalysisGroupVisibility){let T=this.collate?.settings.projectAnalysisGroupVisibility[o];t[o]=t[o].filter(I=>!T||!(I.analysis_group.id in T)?!0:T[I.analysis_group.id])}}),t}filterDataBySearchTerm(){this.selectedSearchTerm=this.searchTerms[this.selectedIndex],this.filteredResults=this.getFilteredSearchResults()}onProjectOrderChanged(t){this.projects=t,this.updateProjectOrder()}showSnackBar(t){this.snackBar.open(t,"Close",{duration:3e3})}deleteProject(t){this.projects=this.projects.filter(e=>e.id!==t.id),this.updateProjectOrder()}goToCollateView(){this._collate&&this.router.navigate(["/collate/view",this._collate.id])}onSearchResultsChange(t,e){this.filteredResults[e]=t,this.collate&&(this.collate.settings.analysisGroupOrderMap||(this.collate.settings.analysisGroupOrderMap={}),this.collate.settings.analysisGroupOrderMap[e]=t.map(o=>o.analysis_group.id),Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(o=>{this.collate.settings.analysisGroupOrderMap[o]=Array.from(new Set(this.collate.settings.analysisGroupOrderMap[o]))}))}openVisibilityDialog(){let t=this.dialog.open(Xi);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(e=>{let o={};e.forEach(m=>{o[m.project]||(o[m.project]=[]),o[m.project].push(m)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(m=>{let T=parseInt(m),I=this.collate?.settings.analysisGroupOrderMap[T];if(!I||!o[T])return;let z=o[T].filter(W=>!I.includes(W.id));o[T]=o[T].filter(W=>I.includes(W.id)),o[T]=o[T].sort((W,lt)=>I.indexOf(W.id)-I.indexOf(lt.id)),o[T]=o[T].concat(z)}),t.componentInstance.projectAnalysisGroupMap=o,t.componentInstance.projects=this.projects;let n={};this.collate?.settings?.projectAnalysisGroupVisibility&&(n=this.collate.settings.projectAnalysisGroupVisibility);for(let m in o){n[m]||(n[m]={});for(let T of o[m])T.id in n[m]||(n[m][T.id]=!0)}t.componentInstance.projectAnalysisGroupVisibilityMap=Object.assign({},n)}),t.afterClosed().subscribe(e=>{this.collate&&e&&(this.collate.settings.projectAnalysisGroupVisibility=e,this.filteredResults=this.getFilteredSearchResults())})}openReorderDialog(){let t=this.dialog.open(An);this.web.getAnalysisGroupsFromProjects(this.projects).subscribe(e=>{let o={};e.forEach(n=>{o[n.project]||(o[n.project]=[]),o[n.project].push(n)}),this.collate?.settings?.analysisGroupOrderMap&&Object.keys(this.collate.settings.analysisGroupOrderMap).forEach(n=>{let m=parseInt(n),T=this.collate?.settings.analysisGroupOrderMap[m];if(!T||!o[m])return;let I=o[m].filter(z=>!T.includes(z.id));o[m]=o[m].filter(z=>T.includes(z.id)),o[m]=o[m].sort((z,W)=>T.indexOf(z.id)-T.indexOf(W.id)),o[m]=o[m].concat(I)}),t.componentInstance.projectAnalysisGroupMap=o,t.componentInstance.projects=this.projects}),t.afterClosed().subscribe(e=>{this.projects=e.projects,this.updateProjectOrder(),this.projectAnalysisGroups=e.projectAnalysisGroupMap;let o={};Object.keys(this.projectAnalysisGroups).forEach(n=>{o[n]=this.projectAnalysisGroups[n].map(m=>m.id)}),this.collate&&(this.collate.settings.analysisGroupOrderMap=o,this.filteredResults=this.getFilteredSearchResults())})}openConditionColorEditorDialog(){let t=this.dialog.open(Gn);t.componentInstance.projectConditionColorMap=this.collate?.settings?.projectConditionColorMap,t.componentInstance.projects=this.projects,t.afterClosed().subscribe(e=>{this.collate&&(this.collate.settings.projectConditionColorMap=e),this.graph.projectConditionColorMap=Object.assign({},e),this.filteredResults=this.getFilteredSearchResults(),this.graph.redrawTrigger.next(!0)})}openCollateTagCreateDialog(){this.dialog.open(Ln).afterClosed().subscribe(e=>{e&&e.name&&(e.existing&&e.id&&e.id!==-1?this.collateService.addTagToCollate(this.collate?.id,e.id).subscribe(o=>{this.collate&&this.collate.tags.push(o)}):this.collateService.createCollateTag(e.name).subscribe(o=>{this.collateService.addTagToCollate(this.collate?.id,o.id).subscribe(n=>{this.collate&&this.collate.tags.push(n)})}))})}handleCollageTagsChange(t){this.collate&&(this.removedTags=this.collate.tags.filter(e=>!t.includes(e)),this.collate.tags=t)}openRenameConditionDialog(){if(this.collate){let t=this.dialog.open(Nn);t.componentInstance.projects=this.collate.projects,t.componentInstance.renameSampleCondition=this.collate.settings.renameSampleCondition,t.afterClosed().subscribe(e=>{this.collate&&(this.collate.settings.renameSampleCondition=Object.assign({},e),console.log(this.collate.settings.renameSampleCondition))})}}static{this.\u0275fac=function(e){return new(e||i)(L(pe),L(Vi),L(Le),L(ne),L(He),L(Se),L(Wt))}}static{this.\u0275cmp=st({type:i,selectors:[["app-collate-editor"]],inputs:{collateId:"collateId"},standalone:!0,features:[ut],decls:2,vars:1,consts:[["extraActionsMenu","matMenu"],[2,"display","flex","justify-content","center"],[1,"spacer"],[3,"ngModel"],["type","button","aria-label","View Collate","mat-icon-button","",3,"click"],["type","button","aria-label","Add Projects","mat-icon-button","",3,"click"],["type","button","aria-label","Update Collate","mat-icon-button","",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"header-container",2,"display","flex","flex-direction","row","justify-content","center","align-items","center","height","200px"],[3,"searchResultID","projects"],[2,"padding","20px"],[3,"ngModelChange","ngModel"],[1,"header",2,"text-align","center","font-family","Roboto, Helvetica Neue, sans-serif"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif"],[3,"click"],[2,"font-size","2em","text-align","center","font-family","Roboto, Helvetica Neue, sans-serif","padding","5px"],["matInput","",3,"keydown.enter","ngModelChange","ngModel"],["mat-icon-button","",3,"click"],[2,"font-size","25px","font-family","'Roboto', 'Arial Narrow', sans-serif",3,"click"],[2,"font-size","25px","text-align","center","font-family","'Roboto', 'Arial Narrow', sans-serif","padding","5px"],["mat-button","",3,"click"],[2,"display","flex","justify-content","center","padding","20px"],[3,"collageTagsChange","collageTags"],[3,"selectedTabChange","selectedIndexChange","selectedIndex","mat-stretch-tabs"],[3,"label"],[3,"searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"],[3,"deleteProject","projectOrderChanged","searchTerm","projectConditionColorMap","projects","filteredResults","renameCondition"]],template:function(e,o){e&1&&q(0,us,32,7)(1,ms,3,0,"div",1),e&2&&J(o.canEdit?0:1)},dependencies:[bi,Ce,zt,wi,we,Ut,Vt,ve,qi,Ii,Fi,Kt,Zt,Qi,Ri,Bi,Gi,Ot,$i,Ni],styles:["mat-card[_ngcontent-%COMP%]{margin:20px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 2s ease-in-out forwards}"]})}}return i})();var fs=[{component:gn,path:""},{component:_o,path:"view"},{component:_o,path:"view/:collateId"},{component:wo,path:"edit"},{component:wo,path:"edit/:collateId"}],Lp=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=Ge({type:i})}static{this.\u0275inj=Re({imports:[di,Qo.forChild(fs)]})}}return i})();export{Lp as CollateModule};
